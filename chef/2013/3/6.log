[2013-03-06 00:09:09 -0500] maek: nm, turns out the version of chef-client I have on windwos doesnt support -o
[2013-03-06 00:28:35 -0500] meckadocious: anyone interested in helping a chef noob try to get knife ec2 working?
[2013-03-06 00:28:41 -0500] meckadocious: i'm having bizarre issues related to ssh
[2013-03-06 00:28:50 -0500] meckadocious: in short, running this: knife bootstrap $HOST -x ubuntu -i ~/.ssh/knifekey.pem  -VV
[2013-03-06 00:28:56 -0500] meckadocious: results in this: ERROR: all authorization methods failed (tried password)
[2013-03-06 00:29:11 -0500] meckadocious: wheras this works fine: ssh -i ~/.ssh/knifekey.pem ubuntu@$HOST
[2013-03-06 00:29:28 -0500] meckadocious: > knife --version
[2013-03-06 00:29:29 -0500] meckadocious: Chef: 11.4.0
[2013-03-06 00:30:01 -0500] meckadocious: osx, 10.7.5
[2013-03-06 00:53:28 -0500] dcrosta: is there a reference somewhere on the @config object as used in knife bootstrap scripts?
[2013-03-06 00:53:37 -0500] dcrosta: or does someone know where in chef code i can look to see what it might have in it?
[2013-03-06 00:54:33 -0500] yfeldblum: dcrosta, https://github.com/opscode/chef/blob/master/lib/chef/knife/core/bootstrap_context.rb
[2013-03-06 00:54:42 -0500] dcrosta: awesome thanks
[2013-03-06 00:54:55 -0500] yfeldblum: dcrosta, https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap.rb#L159
[2013-03-06 00:55:10 -0500] dcrosta: yfeldblum thanks again :)
[2013-03-06 00:55:34 -0500] yfeldblum: dcrosta, no problem
[2013-03-06 01:07:52 -0500] tjwallace: is this a bug: json attributes for chef solo can't accept a json file that has a "json_class" key
[2013-03-06 01:08:35 -0500] tjwallace: it gets to here (https://github.com/opscode/chef/blob/master/lib/chef/node.rb#L296), and attrs is actually a node object, so it can't extract the run_list
[2013-03-06 01:09:36 -0500] tjwallace: my node.json file (that i pass to chef-solo) has `"json_class": "Chef::Node"`
[2013-03-06 01:09:57 -0500] tjwallace: this is so the same file that i pass to chef solo can be used for https://github.com/edelight/chef-solo-search
[2013-03-06 01:10:25 -0500] tjwallace: https://github.com/edelight/chef-solo-search/blob/master/libraries/search/overrides.rb#L68
[2013-03-06 01:22:38 -0500] josephholsten: btm, jtimberman: can we make sure COOK-2486 gets into the next cookbook review?
[2013-03-06 01:27:07 -0500] flaccid: excuse me if i missed it. i'd like to submit some feedback for docs.opscode.com, is there a way i should do that?
[2013-03-06 01:27:12 -0500] flaccid: just simple enhancements..
[2013-03-06 01:34:06 -0500] jfl0wers: where can I find downloads for old chef server solo tar balls?
[2013-03-06 01:34:27 -0500] jfl0wers: for example the latest is always her: https://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz
[2013-03-06 01:34:59 -0500] jfl0wers: I need to recreate a server that needs to be version 10.14.4
[2013-03-06 01:41:36 -0500] josephholsten: anyone got a way to migrate chef-server client data?
[2013-03-06 01:41:59 -0500] josephholsten: I'd like to not re-validate all my nodes
[2013-03-06 01:49:33 -0500] timsmith: josephholsten: 10 -> 10
[2013-03-06 01:49:35 -0500] timsmith: ?
[2013-03-06 01:50:11 -0500] jhowarth: Is it possible to prevent a chef resource from logging?
[2013-03-06 01:51:47 -0500] timsmith: jhowarth:  There's some tricks to make it continue when it fails.  ignore_failure true or returns [0, 1]
[2013-03-06 01:53:28 -0500] jhowarth: timsmith: I'm looking to prevent logging completely of an execute resource because it has sensitive information.
[2013-03-06 01:53:51 -0500] timsmith: not sure how to do that one
[2013-03-06 02:08:14 -0500] spheromak: jhowarth: you might be able to store old loggers, then reset Chef::Log, then run resorce then restore loggers
[2013-03-06 02:08:21 -0500] sabooky: If I have multiple related resources: download archive, extract, create installer template, run installer (passing in template)
[2013-03-06 02:08:35 -0500] sabooky: What's the best way to making that idiompotent
[2013-03-06 02:08:47 -0500] sabooky: should I wrapper everything in an if statement?
[2013-03-06 02:09:40 -0500] spheromak: jhowarth: https://gist.github.com/spheromak/c43659265289115bff96
[2013-03-06 02:09:45 -0500] spheromak: somehting like that might work
[2013-03-06 02:10:37 -0500] spheromak: sabooky: they all depend on the same condition ?
[2013-03-06 02:10:51 -0500] spheromak: sabooky: if its a common abstraction maing it into an LWRP may make the most sense
[2013-03-06 02:10:57 -0500] spheromak: *making
[2013-03-06 02:11:06 -0500] sabooky: spheromak: Yes, it's installing websphere (ugh)
[2013-03-06 02:11:31 -0500] spheromak: well I mean each part should be idempotent. you dont want some big global lock do you ?
[2013-03-06 02:11:38 -0500] sabooky: I could make an LWRP but the template options are many
[2013-03-06 02:11:42 -0500] spheromak: if you can break it into descrete parts thats usually better
[2013-03-06 02:12:15 -0500] spheromak: and you can just use receipe ordering to manage things.
[2013-03-06 02:12:26 -0500] sabooky: oh, it's all the installation process. I would say the downloaded file, extracted version, generated template     are all temporary
[2013-03-06 02:12:27 -0500] spheromak: prob your config side of it tho would benefit from an lwrp
[2013-03-06 02:12:39 -0500] spheromak: so its websphere::install recipe
[2013-03-06 02:12:59 -0500] sabooky: the installer installs the app.. then I can delete all the other files (I currently have them in Chef::Config['file_cache_path']
[2013-03-06 02:12:59 -0500] spheromak: and each step should ensure its idempotence
[2013-03-06 02:13:19 -0500] sabooky: spheromak: How would that work with temporary files? or do I have to keep the installer files lying around?
[2013-03-06 02:14:29 -0500] spheromak: theres lots of examples of cooks that do this sort of thign out there.  Ususally keep the installer files around or drop a manifest file/template so you can track whats installed
[2013-03-06 02:14:40 -0500] spheromak: assuming its not installing from packages
[2013-03-06 02:15:00 -0500] spheromak: jenkins cook does this pretty good. as well as the omnibuss-updater cook from heavywater
[2013-03-06 02:15:06 -0500] spheromak: for examples
[2013-03-06 02:15:25 -0500] sabooky: compressed + uncompressed archives would be about 3gigs of data.
[2013-03-06 02:15:29 -0500] sabooky: I'll take a look at omnibuss
[2013-03-06 02:15:31 -0500] sabooky: brb
[2013-03-06 02:15:35 -0500] spheromak: so make a manifest
[2013-03-06 02:15:40 -0500] spheromak: and use that to be idempotent
[2013-03-06 02:15:49 -0500] spheromak: so you can pop the version installed and any modules etc
[2013-03-06 02:16:44 -0500] spheromak: then jsut add conditionals to your various resources if they don't match te manifest. Easy target to abstract that manifest stuff into a lib.  Or alternatively just package the thing up in your platforms packager and handle it that way (my prefrence)
[2013-03-06 02:17:30 -0500] spheromak: the tomcat cook or jboss cooks out there would prob be good things to look at as well
[2013-03-06 02:17:42 -0500] sabooky: 2nd on isn't an option at this current client (I agree it solves a lot of problems)
[2013-03-06 02:17:46 -0500] sabooky: manifest approach is interesting
[2013-03-06 02:18:21 -0500] sabooky: tomcat cookbook just does "package"
[2013-03-06 02:18:39 -0500] spheromak: yea i haven't looked at either of those in a while. haven't been in a jboss shop for a couple years :D
[2013-03-06 02:19:12 -0500] sabooky: jboss does: https://github.com/bryanwb/chef-jboss/blob/master/recipes/default.rb
[2013-03-06 02:19:19 -0500] josephholsten: timsmith: 10 -> 10 is a start, but I'd really like to migrate the public keys into 11
[2013-03-06 02:19:22 -0500] sabooky: just a bash script to download and extract with a test
[2013-03-06 02:19:33 -0500] spheromak: yea most basic
[2013-03-06 02:19:42 -0500] sabooky: The template file makes bash not an option for me
[2013-03-06 02:19:45 -0500] spheromak: josephholsten: have you loked at knife-server ?
[2013-03-06 02:19:48 -0500] sabooky: I like the idea of a manifest
[2013-03-06 02:19:50 -0500] josephholsten: digging into chef-server-api nao
[2013-03-06 02:19:58 -0500] sabooky: so I guess all of them would test against the manifest?
[2013-03-06 02:20:00 -0500] timsmith: josephholsten:  I've done 10 -> 10.  You stop the server and rsync the data dirs and then copy the couchdb over.  Start up on the new server and update DNS
[2013-03-06 02:20:15 -0500] josephholsten: spheromak: knife-server only does node, env, role, data bag
[2013-03-06 02:20:17 -0500] spheromak: sabooky: yea i would write a lib that loaded it and provided methods for checking,
[2013-03-06 02:20:27 -0500] sabooky: not_if Websphere.installed?
[2013-03-06 02:20:43 -0500] spheromak: josephholsten: yea dunno i've done 9-10 migrations (keeping couch data) but im not sure on the 10->11
[2013-03-06 02:20:56 -0500] spheromak: sabooky: something like that yea
[2013-03-06 02:21:09 -0500] sabooky: spheromak: Thanks for the info.. so one last thing
[2013-03-06 02:21:26 -0500] josephholsten: it looks like user.public_key comes from couch
[2013-03-06 02:21:31 -0500] sabooky: what is the down side of an if/else wrappering 3-4 resources up?
[2013-03-06 02:21:34 -0500] spheromak: sabooky: Websphere.installed? and node[:websphere][:verison] ==  Websphere.version
[2013-03-06 02:21:40 -0500] spheromak: "D
[2013-03-06 02:21:58 -0500] spheromak: sabooky: nothing really just smells :)
[2013-03-06 02:22:09 -0500] spheromak: and if your recipes get long harder to maintain
[2013-03-06 02:22:22 -0500] timsmith: josephholsten:  The key is moving your couchdb.  You can just copy the data files from one system to another
[2013-03-06 02:22:27 -0500] sabooky: Ah
[2013-03-06 02:22:30 -0500] spheromak: timsmith: its 10 to 11
[2013-03-06 02:22:32 -0500] spheromak: no couch
[2013-03-06 02:22:57 -0500] spheromak: so you gotta pull client keys out of 10 and drop them in 11 should be doable, but im not sure there are any tools for it
[2013-03-06 02:23:01 -0500] timsmith: 10 -> 11 hasn't been documented by Opscode yet
[2013-03-06 02:23:05 -0500] spheromak: yeap
[2013-03-06 02:23:27 -0500] sabooky: one more thing, since you seem responsive. debating how to handle data from one "tier" to the next.. basically having a cookbook that handles partitioning and user creation
[2013-03-06 02:23:35 -0500] sabooky: are databags a good candidate for this?
[2013-03-06 02:23:38 -0500] sabooky: (chef-solo btw)
[2013-03-06 02:24:17 -0500] sabooky: Or multiple cookbooks  env1::users  env2::users      and a generic  os::users
[2013-03-06 02:30:18 -0500] spheromak: well thats what environments are for.
[2013-03-06 02:30:31 -0500] spheromak: but no envs in solo atm there was a patch out there for that
[2013-03-06 02:30:57 -0500] spheromak: databags are best for data that needs to be accessed by many nodes (in the server model).  you can fake environments with bags pretty easy tho
[2013-03-06 02:31:21 -0500] spheromak: and thats how we did it in the pre environemnts days.
[2013-03-06 02:32:37 -0500] sabooky: spheromak: yeah, saw the patch.. seems cool.. but won't make it in before I roll off this project. Thanks for all the help. :)
[2013-03-06 02:54:02 -0500] mehlah: I'm a bit confused about how to tell application_php cookbook, to install PHP from source and not use the default recipe
[2013-03-06 02:55:01 -0500] mehlah: there is a php provider with before_compile method but can't find how to override it
[2013-03-06 02:55:01 -0500] mehlah: https://github.com/opscode-cookbooks/application_php/blob/master/providers/php.rb#L24
[2013-03-06 02:55:10 -0500] mehlah: I'm not getting something here :)
[2013-03-06 03:01:59 -0500] pipework: What'cha all cooking?
[2013-03-06 03:02:07 -0500] pipework: inb4meth
[2013-03-06 03:04:02 -0500] log1kal: currently cooking : quick and easy testing environments for developers with vagrant and chef-solo
[2013-03-06 03:07:19 -0500] glennpratt: installing chef from rubygems on a mac with CLI tools only...
[2013-03-06 03:08:25 -0500] glennpratt: having issues with yajl-ruby: yajl-ruby Tells be no Xcode is selected (which is true, I don't have Xcode installed)... anyone have a way around this
[2013-03-06 03:08:32 -0500] glennpratt: setting it to a dummy path doesn't work
[2013-03-06 03:15:57 -0500] kisoku: anyone here use chef-rewind ?
[2013-03-06 03:21:14 -0500] sabooky: spheromak: one other quick question.. can libraries access node information?
[2013-03-06 04:11:29 -0500] spheromak: sabooky: you can pass the node object into your classes, or you can extend chef or you can mix your lib methods into Chef resources.
[2013-03-06 04:11:54 -0500] spheromak: those are ways i know of, there might be more :)
[2013-03-06 04:14:25 -0500] sabooky: what's the difference between #2 and #3?
[2013-03-06 04:14:46 -0500] sabooky: I assume 3 is class Chef::Resource  include MyModule end
[2013-03-06 04:23:44 -0500] miah: libraries are loaded before attributes are compiled. so they don't technically have the ability. but when you call them you can pass in node details as arguments.
[2013-03-06 04:32:07 -0500] sprack: does anyone use the rvm cookbook? I'm looking for where to put optflags
[2013-03-06 05:45:28 -0500] flaccid: i can't see to get this to match hmm, not_if { `/opt/chef/bin/chef-solo -v | awk '{ print $2; }'`.chomp! == node['chef']['version'] }
[2013-03-06 05:46:09 -0500] flaccid: perhaps i'll use .include?
[2013-03-06 05:46:29 -0500] flaccid: like not_if { `/opt/chef/bin/chef-solo -v | awk '{ print $2; }'`.chomp.include? node['chef']['version'] }
[2013-03-06 05:47:10 -0500] llakey: i'm trying to set an attrbute once in an attribute file and then refer to that attribute not from a template but from the recipe. is this possible? is the syntax different? i'm trying from within the recipe: nodejs_version "<%= @node[:nodejs][:version] %>"  do  end
[2013-03-06 05:48:15 -0500] flaccid: llakey: thats template/erb syntax, node[:nodejs][:version] in recipe
[2013-03-06 05:48:28 -0500] llakey: hmmm. nice. i'll try it!
[2013-03-06 05:50:42 -0500] llakey: flaccid: it worked (of course it worked). nice
[2013-03-06 05:51:17 -0500] flaccid: llakey: try the basic sections in the docs to get going properly :)
[2013-03-06 05:51:38 -0500] llakey: will do
[2013-03-06 05:56:13 -0500] flaccid: man i'm going insane, what is wrong with not_if { `/opt/chef/bin/chef-solo -v`.include? node['chef']['version'] }
[2013-03-06 06:00:03 -0500] flaccid: has to be the encapsulation
[2013-03-06 06:00:39 -0500] flaccid: ah i see, the install version number doesn't match the output of -v dang
[2013-03-06 06:02:43 -0500] ssd7: Ohai Chefs
[2013-03-06 07:57:17 -0500] ProfFalken: tmichael: sorry, was AFK for the last couple of days, you still need help?
[2013-03-06 07:58:03 -0500] tmichael: ProfFalken: hey, figured you were enjoying the best dinner ever :)
[2013-03-06 07:58:11 -0500] tmichael: much obliged for getting back
[2013-03-06 07:58:39 -0500] tmichael: actually had to give up cuz what i found online was that matt has fix for hpcloud that's not yet merged
[2013-03-06 07:58:53 -0500] tmichael: and i wasn't sure how to monkey patch to get to work
[2013-03-06 08:06:11 -0500] tmichael: ProfFalken: re hints file, after i create do i need to just re-run chef-client or something else involved?  gonna test adding openstack.json
[2013-03-06 08:09:38 -0500] psn1: hello
[2013-03-06 08:10:21 -0500] psn1: can i post a question about chef-solo?
[2013-03-06 08:12:52 -0500] tmichael: ProfFalken: https://gist.github.com/toddmichael/8091d93b33fd1115fad2
[2013-03-06 08:13:03 -0500] tmichael: also tried ec2 to no avail
[2013-03-06 08:16:32 -0500] bjensen: Does anyone have a recipe for setting the sources for apt on ubuntu? I get failed fetching of packages on ubuntu when I try to install imagemagick: http://pastie.org/6402980
[2013-03-06 08:23:26 -0500] ProfFalken: tmichael: lol, let me check what I've got...
[2013-03-06 08:23:57 -0500] tmichael: thx ProfFalken
[2013-03-06 08:24:39 -0500] tmichael: fyi ProfFalken: Chef: 11.4.0
[2013-03-06 08:24:43 -0500] tmichael: not sure if that matters
[2013-03-06 08:24:59 -0500] ProfFalken: tmichael: it helps, I'm running the same on almost all of my nodes
[2013-03-06 08:25:38 -0500] ProfFalken: looks like I've done "touch /etc/chef/ohai/ec2.json" and included the "cloud.rb" file in /etc/chef/ohai_plugins
[2013-03-06 08:26:41 -0500] tmichael: ProfFalken - you enable that plugin via chef-client recipe, i presume?
[2013-03-06 08:26:47 -0500] ProfFalken: tmichael: checking now.
[2013-03-06 08:26:54 -0500] tmichael: thought i remember seeing that in the readme for the cook
[2013-03-06 08:26:55 -0500] tmichael: thx
[2013-03-06 08:27:00 -0500] ProfFalken: plugin is at https://gist.github.com/proffalken/5097635 if you want to see the source, can't remember where I got it from... :(
[2013-03-06 08:28:18 -0500] ProfFalken: tmichael: looks like I may have comitted a cardinal sin and just uploaded that direct to the server...
[2013-03-06 08:28:59 -0500] tmichael: so ProfFalken - that plugin need to be on all nodes?
[2013-03-06 08:29:04 -0500] ProfFalken: yes
[2013-03-06 08:29:33 -0500] ProfFalken: if you drop it in to the "files/default/plugins" directory in the ohai cookbook then you should get it distributed to the correct plaec
[2013-03-06 08:30:17 -0500] ProfFalken: tmichael: I need to pop out for about an hour, I'll test it when I'm back, let me know if you have any other questios  and I'll pick them up in a bit as well :)
[2013-03-06 08:31:16 -0500] tmichael: thx ProfFalken - gonna crash. will pick back up tomorrow sometime.
[2013-03-06 08:34:54 -0500] Tensibai: Hello there
[2013-03-06 08:35:17 -0500] Tensibai: Small question, how can I tell an include recipe to work with a specific subset of attributes ?
[2013-03-06 08:35:27 -0500] Tensibai: included*
[2013-03-06 08:37:11 -0500] Tensibai: in brief: hash of definitions (with a type attribute inside), choose the correct recipe to work for this type with the rest of definitions attributes: include_recipe cookbook:type  ok, but how to tell it to run with the current hash item ?
[2013-03-06 08:38:52 -0500] Tensibai: Hum well, each recipe should parse the whole hash to procfess only the type ones...
[2013-03-06 09:22:32 -0500] tmichael: ProfFalken: so i added the ohai recipe to run_list to get my plugins dir; i then added the cloud.rb plugin and touched a file hints/ec2, but no love.  i do anything wrong here?
[2013-03-06 09:23:36 -0500] tmichael: actually gonna try this one.  appears newer and includes openstack
[2013-03-06 09:33:53 -0500] ProfFalken: tmichael: cool, let me know how you get on
[2013-03-06 09:33:59 -0500] tmichael: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/cloud.rb
[2013-03-06 09:34:13 -0500] tmichael: tried that.  tried hp, ec2 and openstack in hints file
[2013-03-06 09:34:20 -0500] tmichael: no love
[2013-03-06 09:34:46 -0500] tmichael: ProfFalken: should just populate at next chef run?
[2013-03-06 09:39:17 -0500] tmichael: nfi.  just doesn't work for me.  crashing.  if you think of anything else or anything i fubar'd let me know ProfFalken.  appreciate all the help.
[2013-03-06 09:42:01 -0500] ProfFalken: np, will do
[2013-03-06 10:12:06 -0500] trilitheus: anyone using the users cookbook on a redhat node?
[2013-03-06 10:25:15 -0500] kesor: How do I set attributes in my own cookbook for another cookbook to use? I tried putting them in attributes/default.rb as default[] or normal[], and in my own recipe just before the include_recipe line but it seems it has no effect. I want to 1) set some variables 2) include_recipe that will use the new values how?
[2013-03-06 10:29:06 -0500] gyre007: is there any way how I can search Chef for nodes with given any attributes stored on CHef server on that node ?
[2013-03-06 10:30:12 -0500] Tensibai: gyre007: docs.opscode.com/essentials_search.html
[2013-03-06 10:30:51 -0500] gyre007: saw taht document...doesnt answer my question..also Partial search is only in 11+ as far as I know
[2013-03-06 10:33:27 -0500] Tensibai: gyre a knife search -a "needed attr" "search query" should do, or I don't understand clearly what you wish
[2013-03-06 10:35:18 -0500] gyre007: -a "attr" will tell you what attributes you want to have printed from the nodes returned by search query...
[2013-03-06 10:35:38 -0500] gyre007: I want to search by attribute to return the nodes which have that attibute set...
[2013-03-06 10:35:52 -0500] Tensibai: and so filter the search on nodes havng this attr
[2013-03-06 10:36:28 -0500] gyre007: what I find weird is http://docs.opscode.com/essentials_search_keys.html
[2013-03-06 10:36:46 -0500] gyre007: basically to see available keys by which you can search you run knife node show staging -Fj
[2013-03-06 10:36:53 -0500] gyre007: and that does not return all attributes...
[2013-03-06 10:46:29 -0500] Rickky: How can it be that after I ran the default apt::default recipe (just triggers apt-get update) my ubuntu precise64 machine still says 124 package updates available? Chefs says it's processing it and 20 seconds later its done, tha'ts of course way too quick to update 100+ packages
[2013-03-06 10:46:44 -0500] drrk: Hi, is there any good writeups of using chef to manage windows servers?
[2013-03-06 10:47:02 -0500] drrk: one of my collegues on the windows admin team has been asking if they can use Chef too :)
[2013-03-06 11:16:35 -0500] kesor: Rickky: pretty sure that "apt::default" does not trigger an apt-get update.
[2013-03-06 11:16:57 -0500] kesor: Rickky: the "apt-get update" block in there has "action :nothing" instead of "action :run"
[2013-03-06 11:17:08 -0500] Rickky: kesor It does trigger update though doesn't do upgRade
[2013-03-06 11:17:40 -0500] Rickky: kesor There is execute apt-get-update which executes the command if the update-success-stamp file doesn't exist
[2013-03-06 11:17:57 -0500] Rickky: There is also an apt-get update block which does :nothing
[2013-03-06 11:18:43 -0500] Rickky: kesor I added an apt-get upgRade block but all it does is messing up my terminal window, somehow upgrade doesn't work
[2013-03-06 11:18:59 -0500] fabio: hello, im just creating my organisation to deploy on EC2
[2013-03-06 11:19:18 -0500] kesor: Rickky: you need to pass some options to upgrade that will not cause apt to be interactive.
[2013-03-06 11:19:48 -0500] Rickky: kesor I set the command to apt-get -y upgrade to automatically answer 'Yes' to all the questiosn
[2013-03-06 11:19:49 -0500] fabio: and I have put my aws credentials in knife.rb
[2013-03-06 11:19:52 -0500] Rickky: *questions
[2013-03-06 11:19:53 -0500] fabio: like says the tutorial
[2013-03-06 11:19:59 -0500] kesor: Rickky: that is not enough
[2013-03-06 11:20:05 -0500] fabio: and get  syntax error, unexpected tIDENTIFIER, expecting $end
[2013-03-06 11:20:05 -0500] fabio: knife[:aws_access_key_id]=  "AKIA
[2013-03-06 11:20:40 -0500] Rickky: kesor Please, enlighten me. All what I get looks like a forwarded terminal somehow, though all gibberish and weird characters
[2013-03-06 11:20:58 -0500] kesor: Rickky: you can try to set DEBIAN_FRONTEND=noninteractive in the environment, and use "apt -get upgrade -y -q"
[2013-03-06 11:21:03 -0500] fabio: yo know this error?
[2013-03-06 11:21:31 -0500] Rickky: kesor So just setting command to command "DEBIAN_FRONTEND=noninteractive apt -get upgrade -y -q"?
[2013-03-06 11:21:48 -0500] kesor: Rickky: yeah, check http://stackoverflow.com/questions/702248/how-can-i-automate-dpkg-apt-get and http://serverfault.com/questions/227190/how-do-i-ask-apt-get-to-skip-any-interactive-post-install-configuration-steps
[2013-03-06 11:33:12 -0500] laurent\: Rickky: i'm using this "DEBIAN_FRONTEND=noninteractive DEBIAN_PRIORITY=critical aptitude -y -q -o Dpkg::Options::=\"--force-confdef\" safe-upgrade"
[2013-03-06 11:33:51 -0500] Rickky: laurent\ Thanks, I'll try that in a second, I'm still waiting for chef to be done provisioning with the command kesor said
[2013-03-06 11:36:49 -0500] Rickky: kesor I placed this in my recipe: command "DEBIAN_FRONTEND=noninteractive apt-get upgrade -y -q"
[2013-03-06 11:36:58 -0500] Rickky: Though I'm getting 'command not found' error?
[2013-03-06 11:37:11 -0500] Rickky: Doesn't it recognize the env var?
[2013-03-06 11:37:18 -0500] laurent\: you can't pass the env this way
[2013-03-06 11:37:19 -0500] kesor: apparently not
[2013-03-06 11:37:34 -0500] Rickky: Sorry, not getting command not found but I'm getting 'No such file or directory'
[2013-03-06 11:37:55 -0500] kesor: Rickky: you can use environment in the execute block
[2013-03-06 11:38:56 -0500] Rickky: Should be ENV['IMPORTANT_VAR'] = "value" format I see?
[2013-03-06 11:40:36 -0500] Rickky: Yeah ENV['DEBIAN_FRONTEND'] = "noninteractive" doesn't throw any errors so far, curious to see if it will completely finish
[2013-03-06 11:52:59 -0500] spheromak: execute resoutrce takes an environment param
[2013-03-06 11:53:08 -0500] spheromak: http://docs.opscode.com/resource_execute.html
[2013-03-06 11:57:14 -0500] wegginho: hey, somebody there who's got some knowledge in chef/knife ?
[2013-03-06 12:05:33 -0500] Rickky: kesor laurent\ Yeah by setting the env it worked, thanks guys
[2013-03-06 12:09:23 -0500] wegginho: i have kind of a problem :( knife node edit doesn't work, i get a "undefined method: name" error
[2013-03-06 12:19:44 -0500] holojorge: wegginho are you using chef11??  change your chef-server url to https
[2013-03-06 13:01:27 -0500] giorgian: hi; what's the easiest way to check if I have the right client.pem key without performing a chef-run? I don't want the server to update this node...
[2013-03-06 13:02:43 -0500] hughsaunders: chef-client why-run ?
[2013-03-06 13:03:00 -0500] Tensibai: giorgian: running a chef-cient with -o '' to override the runl-list ?
[2013-03-06 13:03:33 -0500] giorgian: Tensibai: that would change VM's last seen on server
[2013-03-06 13:03:44 -0500] giorgian: node, that is
[2013-03-06 13:05:35 -0500] Tensibai: giorgian: sorry though you wish it to not change the node state
[2013-03-06 13:05:59 -0500] giorgian: Tensibai: sure, but I also want to preserve what's on server
[2013-03-06 13:06:25 -0500] Tensibai: sounds strange
[2013-03-06 13:07:08 -0500] Tensibai: you may try a get signed witht he client.pem using curl, but that's out of my scope of knowledge (have a look at the server API for that)
[2013-03-06 13:07:12 -0500] giorgian: Tensibai: why so? I'm trying to examine evidence to understand what happened without destroying evidence
[2013-03-06 13:07:21 -0500] Tensibai: But I can't ensure it won't update anything about the node on the server
[2013-03-06 13:07:58 -0500] Tensibai: giorgian: knife node show -Fj  > node_name.json
[2013-03-06 13:08:05 -0500] Tensibai: to backup the node attr and so on
[2013-03-06 13:08:44 -0500] Tensibai: you may wish to use the -l option too to get the full attribute list
[2013-03-06 13:08:58 -0500] Tensibai: at least to write down the evidence ...
[2013-03-06 13:11:48 -0500] giorgian: Tensibai: ok, thanks. I hoped to find a more "low level" way to validate keys than to do a chef-run...
[2013-03-06 13:12:47 -0500] Tensibai: giorgian: maybe there's solutions, but I don't see any 'easy' one
[2013-03-06 13:13:45 -0500] Tensibai: one way could be using the public key on the server to encrypt a file (with gpg for exemple) and trying to decrypt it with the client.pem on the other side
[2013-03-06 13:14:21 -0500] Tensibai: or crypt with client.pem and decrypt with public key
[2013-03-06 13:14:37 -0500] Tensibai: but that involves working with gpg to use the correct keys
[2013-03-06 13:16:04 -0500] Tensibai: giorgian: I don't know what the --why-run option would give in this case, you may dig this way too as proposed by hughsaunders
[2013-03-06 13:19:04 -0500] giorgian: Tensibai: hughsaunders: yes, that's right, thanks: --why-run is what I was looking for
[2013-03-06 13:19:41 -0500] Gues_____: hi, anyone here familiar with chef-server 11.x?
[2013-03-06 13:20:27 -0500] hughsaunders: giorgian: :)
[2013-03-06 13:21:06 -0500] Gues_____: would love to know how the change the default ports for nginx for a reconfigure
[2013-03-06 13:22:06 -0500] Tensibai: Gues_____: I did it by editing the chef-server.rb in /etc/chef before calling a reconfigure
[2013-03-06 13:22:54 -0500] Tensibai: christia_: I did it by editing the chef-server.rb in /etc/chef before calling a reconfigure
[2013-03-06 13:24:12 -0500] christia_: hmmm that file doesn't exist in my installation
[2013-03-06 13:24:36 -0500] christia_: I've installed the latest version of 11 for ubuntu
[2013-03-06 13:25:34 -0500] Tensibai: christia_: sorry
[2013-03-06 13:25:43 -0500] Tensibai: The file chef-server-running.json into /etc/chef-server
[2013-03-06 13:26:08 -0500] christia_: yes, i edited that one, then if I run reconfigure it restores to defaults
[2013-03-06 13:26:20 -0500] christia_: it has to take them from somewhere
[2013-03-06 13:27:01 -0500] jopz: Hi
[2013-03-06 13:27:35 -0500] jopz: is it possible to provision a system, i mean install an operating system with chef?
[2013-03-06 13:29:08 -0500] Tensibai: christia_: see there: /opt/chef-server/embedded/cookbooks/chef-server/attributes
[2013-03-06 13:29:13 -0500] Tensibai: the default.rb file
[2013-03-06 13:29:26 -0500] Tensibai: IIRC this is the base source for reconfigure
[2013-03-06 13:30:08 -0500] christia_: thanks, I'll try that
[2013-03-06 13:30:36 -0500] Tensibai: I did change the non-http port here to reconfigure mine
[2013-03-06 13:43:35 -0500] christia_: there is a check for an existing chef-server.rb in /etc/chef-server
[2013-03-06 13:43:45 -0500] christia_: what is the format for config in that file however?
[2013-03-06 13:44:09 -0500] christia_: it errors out if I just copy the default.rb into that location
[2013-03-06 13:44:26 -0500] christia_: Tensibai?
[2013-03-06 13:54:47 -0500] Tensibai: christia_: sorry was busy
[2013-03-06 13:54:52 -0500] Tensibai: I did modify it in place
[2013-03-06 13:55:12 -0500] Tensibai: It's the cookbook used by ctl-chef-server reconfigure to create the config files
[2013-03-06 13:55:16 -0500] christia_: okay, I googled for the chef-server.rb and found this
[2013-03-06 13:55:27 -0500] Tensibai: you may wish to backup it elsewhere before any change eventually
[2013-03-06 13:55:32 -0500] christia_: http://docs.opscode.com/config_rb_chef_server.html
[2013-03-06 13:56:31 -0500] christia_: I only changed the values I needed and it worked :)
[2013-03-06 13:56:45 -0500] christia_: now I just have to update all the references to use the new port numbers as well
[2013-03-06 13:57:38 -0500] christia_: Tensibai thanks for your help! you got me to look in the right place :)
[2013-03-06 13:57:49 -0500] Tensibai: you're welcome
[2013-03-06 14:23:13 -0500] cwj: jopz: http://cookbooks.opscode.com/cookbooks/pxe_dust might be relevant to your interests
[2013-03-06 14:43:25 -0500] jarosser06: would anyone have any idea why knife commands would just stop working against my chef server
[2013-03-06 14:44:32 -0500] jarosser06: I can run commands to delete nodes etc in the webui but when I try and do it on my local box via knife they don't actually do anything other than perform GET's
[2013-03-06 14:45:44 -0500] allaire: Hey, I need to add an environment variable to my user (RAILS_ENV=production), whats the best way to do this?
[2013-03-06 14:45:58 -0500] allaire: I want it set on my server
[2013-03-06 14:46:09 -0500] allaire: not only when I deploy with chef
[2013-03-06 14:48:20 -0500] gamafranco: hi
[2013-03-06 14:48:41 -0500] gamafranco: anyone having problems with the chef-rvm cookbook?
[2013-03-06 14:51:20 -0500] TriangleIL: Hey all, I have a problem searching within chef (from webui and from knife).  In the solr.log I see the following...java.lang.ClassNotFoundException: org.apache.solr.servlet.SolrDispatchFilter
[2013-03-06 14:51:20 -0500] TriangleIL:   and  Failed startup of context org.mortbay.jetty.webapp.WebAppContext@c5d53c3{/solr,file:/var/lib/chef/solr/solr-jetty/webapps/solr/}
[2013-03-06 14:51:20 -0500] TriangleIL: javax.servlet.UnavailableException: org.apache.solr.servlet.SolrDispatchFilter  ideas?
[2013-03-06 15:07:57 -0500] jhayden: anyone have any insight into why a yum_package action :upgrade would not work when there is a newer version available?
[2013-03-06 15:08:37 -0500] Mic92: Is there a common workflow or recipe to generate ssh keys and upload the public key somewhere (probably to a databag?) ?
[2013-03-06 15:08:37 -0500] Mic92: I need this to deploy code with git
[2013-03-06 15:09:52 -0500] knuckolls: Mic92: in the past i've just used the users cookbook with a deploy user. in the databag i set the public key. if i want to rotate it, i just update the databag and the next time all the chef-clients run it picks up the new public key
[2013-03-06 15:09:57 -0500] TriangleIL: Anyone have a resource or blog on how to upgrade from Chef 10.18 to 11.4?
[2013-03-06 15:12:22 -0500] Mic92: knuckolls: This what I do too, but I need it the other way around. I want private ssh keys to be generated on the servers and uploaded to a single location. So I can give them write access to my git repository.
[2013-03-06 15:12:30 -0500] Chocobo: does anyone here use vagrant and berkshelf?  I am having a slight problem having berkshelf load the vagrant plugin.  This is my entire install log:  http://paste2.org/p/3058870   Sorry, I know this probably isn't the right place to ask but the berkshelf channel is dead.
[2013-03-06 15:12:53 -0500] knuckolls: Chocobo: this likely is the right place to ask
[2013-03-06 15:13:09 -0500] Chocobo: Oh, well that is good then :)
[2013-03-06 15:13:28 -0500] Mic92: TriangleIL: you should have an up to date json gem at least.
[2013-03-06 15:14:21 -0500] Mic92: mhm wrong, the lastest json gem breaked 11.x chefs
[2013-03-06 15:16:34 -0500] knuckolls: Chocobo: " Install Berkshelf by running: "vagrant gem install berkshelf"" didn't work for you?
[2013-03-06 15:16:48 -0500] knuckolls: my berkshelf worked out of the box, but that looks like the solution to the problem
[2013-03-06 15:18:18 -0500] TriangleIL: My bigger problem, maybe I don't need to upgrade my chef server.  It seems solr is failing to run, because I can't perform search from web ui or knife
[2013-03-06 15:18:26 -0500] TriangleIL: I'm seeing (in solr.log) 1873 [main] WARN org.mortbay.log - Failed startup of context org.mortbay.jetty.webapp.WebAppContext
[2013-03-06 15:18:36 -0500] TriangleIL: javax.servlet.UnavailableException: org.apache.solr.servlet.SolrDispatchFilter
[2013-03-06 15:18:49 -0500] Chocobo: knuckolls: I will try that.  I didn't install vagrant by "one of the pre-packaged installers" so I did not do that.  I will give it a shot
[2013-03-06 15:19:13 -0500] knuckolls: Chocobo: oh, you're right. i saw that.. hm...
[2013-03-06 15:20:35 -0500] knuckolls: Chocobo: another thing to try, not sure if it will work, is to use bundle exec vagrant up from within your cookbook
[2013-03-06 15:20:46 -0500] knuckolls: to force it to use the versions defined in your Gemfile.lock
[2013-03-06 15:20:54 -0500] Chocobo: I am not sure I need to set up any environment variables (other than PATH) seeing I installed the gems to my home directory.
[2013-03-06 15:20:55 -0500] Mic92: I run an older server with newer clients and everything seems well.
[2013-03-06 15:21:03 -0500] Chocobo: knuckolls: I will give it a shot
[2013-03-06 15:21:32 -0500] knuckolls: Chocobo: oh actually, bundle install in that directory first
[2013-03-06 15:23:21 -0500] Chocobo: knuckolls: raid1/home/swinchen/.gem/ruby/1.9.1/gems/bundler-1.3.1/lib/bundler/rubygems_integration.rb:214:in `block in replace_gem': vagrant is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
[2013-03-06 15:23:51 -0500] Chocobo: That was after "bundle exec vagrant up"  bundle install ran correctly.
[2013-03-06 15:23:57 -0500] knuckolls: oh, it's not in the gemfile by default. :/ you could add it and try again
[2013-03-06 15:24:14 -0500] knuckolls: there's likely a better way than the route i'm taking you down, but i'm curious as to whether or not it's going to work
[2013-03-06 15:25:16 -0500] awgross: knuckolls: Chocobo I dont think you need to install Berkshelf in to Vagrant, you need to have it on your development machine itself, but not inside
[2013-03-06 15:25:50 -0500] knuckolls: awgross: his paste from above attempted that first and doesn't seem to have access to the berkshelf plugin. it's strange.
[2013-03-06 15:25:59 -0500] awgross: that is weird
[2013-03-06 15:26:10 -0500] knuckolls: http://paste2.org/p/3058870 if you missed it
[2013-03-06 15:26:43 -0500] awgross: thanks
[2013-03-06 15:26:50 -0500] awgross: looks like he did things in the wrong order
[2013-03-06 15:26:56 -0500] awgross: well, kidna
[2013-03-06 15:27:37 -0500] awgross: Chocobo: you should install bundler, then throw vagrant and berkshelf inside the Gemfile
[2013-03-06 15:27:38 -0500] Chocobo: knuckolls: Ooo.... I added "gem 'vagrant'" now I have an error about the json version:  http://paste2.org/p/3059073
[2013-03-06 15:27:44 -0500] awgross: then to bundle install
[2013-03-06 15:27:56 -0500] awgross: then prefix your berks and vagrant commands with bundle exec
[2013-03-06 15:29:13 -0500] Chocobo: I am not so good with gems and bundles, but I will type up what I think you are telling me.
[2013-03-06 15:29:19 -0500] knuckolls: Chocobo: i ran into that incompatible json version problem the other day, and ended up just sidestepping it by not having vagrant in the Gemfile. which is the opposite of what we're telling you to do so. i'm not sure..
[2013-03-06 15:29:25 -0500] knuckolls: give it a whirl
[2013-03-06 15:29:37 -0500] awgross: Chocobo: no problem, can be a bit confusing to get used to bundler etc
[2013-03-06 15:32:28 -0500] Chocobo: So... where is the "Gemfile" I should put vagrant and berkshelf in?
[2013-03-06 15:37:26 -0500] awgross: Chocobo: you create it yourself, though it should be in the directory you are running your bundle command from
[2013-03-06 15:37:49 -0500] awgross: Chocobo: i have the same one symlinked in to each of my cookbooks
[2013-03-06 15:39:16 -0500] awgross: Chocobo: here is a rundown of the flow i was talking about https://gist.github.com/andrewgross/5100171
[2013-03-06 15:39:24 -0500] awgross: this is assuming you are in the cookbook you want to work on
[2013-03-06 15:41:10 -0500] Chocobo: awgross: http://paste2.org/p/3059148
[2013-03-06 15:41:18 -0500] Chocobo: Like that?
[2013-03-06 15:43:23 -0500] awgross: Chocobo: i think you will want to put a copy of the Gemfile inside testbook.  You can try it without, but I am unsure how bundler checks for Gemfiles, if it goes up directories or not etc
[2013-03-06 15:44:29 -0500] Chocobo: Ok thanks.  I have to run for an hour or so but I iwll be back.  Thanks for the help!
[2013-03-06 15:44:43 -0500] awgross: Chocobo: in my case, I have my overarching Chef project which has a bunch of helper scripts, knife configs etc.  This has one Gemfile.  Inside my cookbooks/ directory I have each of my cookbooks (they are all separate git repos).  These each have a Gemfile inside
[2013-03-06 15:45:12 -0500] thouveng: hello, I'm a new  user of Chef and I have a question about how to overwrite an attribute. Is it ok to ask here?
[2013-03-06 15:46:05 -0500] awgross: thouveng: yep
[2013-03-06 15:46:34 -0500] thouveng: Ok thanks :). So I created a cookbook and I wrote a simple recipe. I set a default attribute in attributes/default.rb that is default["un_attribut"] = "c est un attribut par defaut"
[2013-03-06 15:46:47 -0500] thouveng: my recipe is using template to copy coucou.erb into a file
[2013-03-06 15:46:58 -0500] awgross: ok
[2013-03-06 15:47:04 -0500] thouveng: in this template I'm using the attribute <%= node["un_attribut"] %>
[2013-03-06 15:47:11 -0500] awgross: k
[2013-03-06 15:47:34 -0500] thouveng: when I run the client everything goes as expected. I can see a new file coucou with the sentence "c est un attribut par defaut"
[2013-03-06 15:48:02 -0500] thouveng: now I want to overwrite this attribute. So I created a JSON file and run the client with: $ chef-client -j firsttry.json
[2013-03-06 15:48:14 -0500] thouveng: here is the json file: { "override_attributes": {"un_attribut": "un attribut qui se change" } }
[2013-03-06 15:48:38 -0500] thouveng: but in the file "coucou" I still see "c est un attribut par defaut"
[2013-03-06 15:48:48 -0500] awgross: hmm
[2013-03-06 15:49:03 -0500] awgross: I have not done much with override attributes with -j
[2013-03-06 15:49:31 -0500] awgross: that seems right however
[2013-03-06 15:50:35 -0500] thouveng: ok. I try to google it but i'm always finding the same pages.
[2013-03-06 15:50:59 -0500] thouveng: There are not a lot of examples on http://docs.opscode.com
[2013-03-06 15:52:45 -0500] awgross: yeah, the move to from wiki.opscode.com to docs.opscode.com seems to have shuffled some things around
[2013-03-06 15:53:47 -0500] thouveng: I agree ... unfortunately :(
[2013-03-06 15:54:51 -0500] geekbri: override attributes will not merge with default level attributes, they will... well override them.  They will deep merge with other override attributes
[2013-03-06 15:55:52 -0500] awgross: geekbri: doesnt seem like it is properly reading in the override attribs from the json file passed in with -j
[2013-03-06 15:56:23 -0500] geekbri: i lost track once it turned to french ;)
[2013-03-06 15:56:33 -0500] geekbri: is it using template or file to create this file thats using the attribute
[2013-03-06 15:56:50 -0500] awgross: hes just templating the phrase from his node attribute
[2013-03-06 15:56:59 -0500] geekbri: Yeah that should be fairly straight forward it looks like.
[2013-03-06 15:57:13 -0500] geekbri: I'd love to see a gist of the chef run output
[2013-03-06 15:57:46 -0500] geekbri: That would make it a little easier to debug.  I mean the template resource takes a SHA1 of the contents of a file and then SHA1 of the tmp template it lays down then compares and replaces if different
[2013-03-06 15:58:03 -0500] awgross: thouveng: can you run `chef-client -j firsttry.json -l debug` and give us a link to the results?
[2013-03-06 15:58:04 -0500] geekbri: The output of the chef run should show you the template resource and what actions its taking.
[2013-03-06 15:58:05 -0500] thouveng: I'm using a file coucou.erb with "<%= node["un_attribut"] %>".. and sorry the french as name for variable name :)
[2013-03-06 15:58:17 -0500] geekbri: haha I was just teasing, it was plenty easy to understand
[2013-03-06 15:58:18 -0500] awgross: thouveng: thats -L, but lowercase
[2013-03-06 15:59:44 -0500] geekbri: inside of the node.json isn't the key for override attributes just "override" ?
[2013-03-06 16:00:01 -0500] thouveng: ok I'm running it.
[2013-03-06 16:00:14 -0500] willsalt: hey, anyone got any chef-client log stash patterns?
[2013-03-06 16:01:12 -0500] pwelch_: does anyone have experience with faking a include_recipe in chefspec?
[2013-03-06 16:02:34 -0500] thouveng: output should be visible here. http://pastebin.com/wNyvpGmS
[2013-03-06 16:02:56 -0500] geekbri: oh no, debug level. this will take me a while to read :-p
[2013-03-06 16:03:55 -0500] geekbri: thouveng: ok yeah template rendered is the same.  What happens if you change the key from "override_attributes" to just "override" and run again?
[2013-03-06 16:05:47 -0500] geekbri: thouveng: actually, what makes more sense in the node.json file is to use "default" since thats what would really be set on a node object
[2013-03-06 16:06:03 -0500] thouveng: It's the same.
[2013-03-06 16:06:07 -0500] geekbri: thouveng: Is there a reason youre using override attributes?  If you need to maybe you should put them in a role file thats included in the nodes run list?
[2013-03-06 16:07:22 -0500] thouveng: No there is not really a reason. It was just because I want a particular value for a givent client.
[2013-03-06 16:07:30 -0500] awgross: willsalt: can you elaborate on what you are looking for?
[2013-03-06 16:08:05 -0500] thouveng: for example if I'm using a cookbook like ntp, how a client can set it's own value for a server? you are using role?
[2013-03-06 16:08:29 -0500] TriangleIL: Anyone have any idea how to fix the following error in solr.log?  My search functionality is broken.
[2013-03-06 16:08:30 -0500] TriangleIL: javax.servlet.UnavailableException: org.apache.solr.servlet.SolrDispatchFilter
[2013-03-06 16:09:11 -0500] awgross: thouveng: I solve that by using Chef Search and Data Bags
[2013-03-06 16:09:39 -0500] awgross: thouveng: Chef search is great for finding servers that already exist (say the master redis server this slave should connect to)
[2013-03-06 16:10:24 -0500] willsalt: awgross: I'm using logstash, and to index the logs you parse the logs through filters, and use grok patterns to extract the different fields in your logs i wondered if anyone had already written a pattern for grok?
[2013-03-06 16:11:02 -0500] knuckolls: willsalt: for the chef-client logs?
[2013-03-06 16:11:03 -0500] awgross: willsalt: gotcha, unsure but somewhere around here maintains the logstash cookbook and they would probably know
[2013-03-06 16:11:15 -0500] geekbri: thouveng: can you paste your node.json for me
[2013-03-06 16:11:19 -0500] geekbri: thouveng: to pastebin or gist
[2013-03-06 16:11:24 -0500] thouveng: ok I see. In fact my goal is to use chef for installing openstack. I'm looking  https://github.com/opscode/openstack-chef-repo.git
[2013-03-06 16:11:24 -0500] willsalt: knuckolls: yeah, chef-client logs :D
[2013-03-06 16:12:29 -0500] geekbri: thouveng: just put your attribute at the top leve of the node.json
[2013-03-06 16:12:49 -0500] thouveng: geekbri: Yes I can paste it but... I don't know where I can find it (I'm a new user of chef :(
[2013-03-06 16:13:23 -0500] geekbri: thouveng: ok, i'll make this easy then.  Just remove the "override_attribute" or "default" or "override" whatever you named it level of the key and put it at the top level.
[2013-03-06 16:13:25 -0500] knuckolls: willsalt: not that i'm aware of, but there are a fair amount of logstash users that also use chef, you might get more visibility on either the logstash mailing list or the chef mailing list
[2013-03-06 16:13:41 -0500] geekbri: thouveng: so whatever your attribute is, the key for it should be at the same level as the run list in your node.json
[2013-03-06 16:14:32 -0500] geekbri: thouveng: just keep in mind that it will be treated as a normal level attribute, which is higher level than "default" so it will override any defaults set in a cookbook or default level in a role
[2013-03-06 16:15:03 -0500] willsalt: cheers knuckles. il hit the mailinglists
[2013-03-06 16:16:34 -0500] thouveng: geekbri: just to be sure, what you called node.json is the file that I give to -j parameter of my chef-client right? the run_list for this node is set on the server. So in the file that I give as parameter there is only:  { "override": {"un_attribut": "un attribut qui se change" } }
[2013-03-06 16:17:20 -0500] thouveng: YES: I change to this : { "un_attribut": "un attribut qui se change" } and it works :)
[2013-03-06 16:17:35 -0500] geekbri: thouveng: Yes sorry I should have been more clear, thats what i was saying.
[2013-03-06 16:18:30 -0500] geekbri: thouveng: the file you pass in through -j is basically the equivalent how chef server would be storing information about the node.  IF you set an attribute on a node directly it would be a "normal" level attribute, it sticks with the node.
[2013-03-06 16:18:50 -0500] awgross: any know if someone has done work with Chef and Redis to make it possible to apply config changes without restarting redis using "Config SET/GET"?
[2013-03-06 16:18:53 -0500] thouveng: geekbri: no you are clear, I'm not familiar with the vocabulary. It works now so thanks :).
[2013-03-06 16:19:07 -0500] geekbri: thouveng: attributes you put in your node json file will be considered normal level.  That means if you set the attribute there, then you set a default level attribute in a role file, the one in your node json file will be a higher level and used.
[2013-03-06 16:19:34 -0500] makerbreakr: i just setup a reverse proxy for chef w/ nginx over SSL
[2013-03-06 16:19:54 -0500] thouveng: geekbri: Ok I see. Thanks a lot for the explanation... really cool :)
[2013-03-06 16:19:55 -0500] makerbreakr: knife is working fine on my workstation, but I keep getting  JSON::ParserError: 751: unexpected token at
[2013-03-06 16:19:59 -0500] makerbreakr: on chef-client runs
[2013-03-06 16:19:59 -0500] knuckolls: awgross: i did at a previous job, i don't think that code is open sourced but i can find out. it was really easy to write a library that just opened a connection to redis, checked the config variables, compared them to the attributes, and changed whatever ones were necessary.
[2013-03-06 16:20:29 -0500] awgross: knuckolls: cool, i was thinking of writing that but was curious if anyone else had done it just in case there were pitfalls
[2013-03-06 16:20:40 -0500] awgross: only one i can think of is handling the "save" parameter properly
[2013-03-06 16:21:29 -0500] knuckolls: awgross: worked like a charm for me. it wasn't a mission critical system so it was a bit out of my warpath as far as hardening was concerned. maybe one of the other open source redis cookbooks already does it
[2013-03-06 16:21:43 -0500] awgross: yeah im looking at miah's chef-redis
[2013-03-06 16:21:54 -0500] awgross: figuring out if its the one for me,
[2013-03-06 16:23:15 -0500] Joel: I have multiple cookbooks in a single repository on github, what's the correct way to link to these in the Cheffile?
[2013-03-06 16:24:32 -0500] Joel: I guess I could download them all, but seems over the top
[2013-03-06 16:24:34 -0500] pikesley: I think you can't
[2013-03-06 16:24:47 -0500] pikesley: one repo per book
[2013-03-06 16:25:42 -0500] teukka: Joel: you can use `:path` attribute. you still need to declare the cookbooks one by one
[2013-03-06 16:25:54 -0500] Joel: teukka: thanks
[2013-03-06 16:26:03 -0500] teukka: Joel: look for examples in https://github.com/applicationsonline/librarian
[2013-03-06 16:26:13 -0500] teukka: in that readme, that is
[2013-03-06 16:29:43 -0500] teukka: he, actually there is no example for that. only a paragraph explainin it =)
[2013-03-06 16:31:19 -0500] makerbreakr: would running chef through an nginx reverse proxy, affect the length of requests?
[2013-03-06 16:31:36 -0500] makerbreakr: my chef run seems to be getting cut off arbitrarily
[2013-03-06 16:36:58 -0500] makerbreakr: "/var/lib/nginx/proxy/1/04/0000000041" failed (13: Permission denied)
[2013-03-06 16:46:27 -0500] makerbreakr: fwiw, if anyoen has troubel with reverse proxy's, nginx, and chef, check your perms on /var/lib/nginx/proxy/
[2013-03-06 16:47:06 -0500] Joel: teukka: how about a doc that talks about recipes in a password protected repo?
[2013-03-06 16:47:27 -0500] cpasmoi: makerbreaker, you can force the permission with a directory bloc
[2013-03-06 16:48:38 -0500] Majost1: Is it possible to pass an attribute override when using bootstrap with the --json-attributes argument?
[2013-03-06 16:49:02 -0500] gamafranco: :)
[2013-03-06 16:49:18 -0500] gamafranco: is there a way to check in a recipe if we're on chef-solo or not?
[2013-03-06 16:50:36 -0500] awgross: gamafranco: yes, if    Chef::Config[:solo]
[2013-03-06 16:50:45 -0500] gamafranco: thanks
[2013-03-06 16:51:05 -0500] gamafranco: I guess there is no special case to detect if we're on vagrant or not?
[2013-03-06 16:51:11 -0500] gamafranco: thanks awgross
[2013-03-06 16:51:29 -0500] awgross: gamafranco: not really? you can always set a node attribute in your vagrantfile
[2013-03-06 16:56:56 -0500] teukka: Joel: sorry, is that a question? :)
[2013-03-06 16:57:17 -0500] Joel: teukka: yes?
[2013-03-06 16:58:03 -0500] teukka: Joel: do tou want me to read or create a document? =)
[2013-03-06 16:58:45 -0500] bmoritz: Does anyone know why the opscode apt repo isn't building the latest releases?
[2013-03-06 16:59:38 -0500] Joel: teukka: wondering if you know of a document that talks about it, as stated in my question.
[2013-03-06 17:00:47 -0500] j^2: i'm trying to build chef11 on a 12.10 machine, and i get https://gist.github.com/ae103d913e8edfe06e3a
[2013-03-06 17:00:55 -0500] j^2: that doesnt seem good...
[2013-03-06 17:01:30 -0500] teukka: Joel: no. but can't you use ssh keys? I assume you are speking about a ssh accessed git repository?
[2013-03-06 17:01:58 -0500] Joel: teukka: hrm.. I'm using http, let me switch it to ssh and see what happens
[2013-03-06 17:03:59 -0500] Joel: teukka: derp, thanks.
[2013-03-06 17:04:10 -0500] teukka: Joel: np!
[2013-03-06 17:09:14 -0500] teukka: bmoritz: I guess it requires manual work to build and test the debs
[2013-03-06 17:09:48 -0500] magoo: For recipes that provide LWRPs, is it preferred to customize the cookbook with recipes that make use of those resources or to make use of those resources in the master cookbook and thus leaving the additional cookbook in a pristine state?
[2013-03-06 17:10:03 -0500] magoo: *for cookbooks that provide
[2013-03-06 17:10:44 -0500] magoo: i'm hopeful that that made sense at all
[2013-03-06 17:11:14 -0500] bmoritz: teukka: I thought maybe it needed to be kicked.  If there was something I could help with I would be willing.
[2013-03-06 17:11:30 -0500] Tensibai: magoo: I would say leave the cookbook on its state and do another depending on it using the ressources
[2013-03-06 17:11:54 -0500] Tensibai: which allow you to upgrade any or both while locking the versions
[2013-03-06 17:12:12 -0500] magoo: this was my thought process as well
[2013-03-06 17:12:33 -0500] Tensibai: http://devopsanywhere.blogspot.fr/2012/11/how-to-write-reusable-chef-cookbooks.html <= nice post about it
[2013-03-06 17:12:39 -0500] magoo: this also allows me to put it in cookbooks as opposed to site-cookbooks
[2013-03-06 17:16:26 -0500] awgross: hey miah, im guessing that HEAD on chef-redis is not stable?
[2013-03-06 17:23:25 -0500] rh_: Setting up my local workstation for the first time and hoping someone can point me into the right direction regarding this error when using `knife bootstrap IP`: ERROR: RegexpError: end pattern with unmatched parenthesis: /^(v0\.85-v0\.88$/i
[2013-03-06 17:23:54 -0500] rh_: This is displayed right after "Bootstrapping Chef on xxx.xxx.xxx.xxx"
[2013-03-06 17:23:56 -0500] magoo: you have an unmatched parenthesis :)
[2013-03-06 17:24:32 -0500] magoo: *runs away
[2013-03-06 17:24:35 -0500] c_t: you want /^\(v0....
[2013-03-06 17:24:57 -0500] c_t: (assuming the ( is part of the pattern)
[2013-03-06 17:25:10 -0500] rh_: I get that, but that's not my code.  I've literally only filled out .chef/knife.rb
[2013-03-06 17:25:40 -0500] Joel: rh_: who's code is it?
[2013-03-06 17:26:24 -0500] jfl0wers: hello, I am getting a compile error when in chef-solo when I have the cookbook chef_package in the cookbooks dir while doing a chef_gem
[2013-03-06 17:26:25 -0500] jfl0wers: https://gist.github.com/jflowers/5101147
[2013-03-06 17:26:45 -0500] rh_: Joel: I'm setting up my workstation on Mac OSX 10.7.4 following the guide here: http://docs.opscode.com/install_workstation.html
[2013-03-06 17:27:19 -0500] jfl0wers: it failed with SystemStackError: stack level too deep
[2013-03-06 17:27:23 -0500] Chocobo: back
[2013-03-06 17:27:24 -0500] rh_: I completed that and decided to try bootstrapping a server
[2013-03-06 17:27:29 -0500] rh_: And this is what happens
[2013-03-06 17:28:28 -0500] jfl0wers: this on a fresh install of a chef server following the wiki instructions
[2013-03-06 17:29:09 -0500] Joel: rh_: so track down what file it's in, and submit an issue, or a pull request
[2013-03-06 17:29:29 -0500] Chocobo: so when I do a "bundle install" it is asking for my password.  Is this going to install the gems to my system (not what I want)?
[2013-03-06 17:29:32 -0500] Joel: rh_: you've given everyone here so little detail, such as which step you're even on in that doc.
[2013-03-06 17:29:46 -0500] Joel: w/o steps to reproduce... ugh.
[2013-03-06 17:30:13 -0500] awgross: Chocobo: yes that is what it is trying to do, if it finds a gem it needs that it doesnt have it will do a gem install
[2013-03-06 17:30:18 -0500] awgross: to where gem install goes
[2013-03-06 17:31:15 -0500] Chocobo: awgross: interesting.  gem install goes to my home directory.  I have no idea why it is asking for my password
[2013-03-06 17:31:25 -0500] awgross: odd
[2013-03-06 17:34:50 -0500] j^2: has anyone tryed to build chef11 in EC2 with ami-7539b41c ?
[2013-03-06 17:35:01 -0500] j^2: it seems that it won't play nice.. :(
[2013-03-06 17:35:24 -0500] rh_: Joel: I'm sorry for being vague.  As I said above I completed the doc (`knife client list` works properly).  Immediately after that I tried using `knife bootstrap xxx.xxx.xxx.xxx` for one of my servers and received the error above.  I can provide more details, but I'm not sure what other details you would need.  I am happy to track down the file it is in, but I'm not certain where to begin.  How can I get a stack trace?
[2013-03-06 17:36:14 -0500] Chocobo: yeah... "gem: --user-install" is in my /etc/gemrc
[2013-03-06 17:36:24 -0500] j^2: i put http://tickets.opscode.com/browse/CHEF-3973 in because i've bene able to reproduce it multiple times with multiple new images
[2013-03-06 17:41:10 -0500] Chocobo: Yeah, I am getting no where with this.  I think I might throw in the towel.
[2013-03-06 17:43:12 -0500] werdnativ: trying to use knife solo, getting ERROR: ArgumentError: Illformed requirement [http://community.opscode.com/api/v1], has anyone seen this?
[2013-03-06 17:44:27 -0500] gswallow: http://pastebin.com/N4wn0AGg
[2013-03-06 17:44:40 -0500] gamafranco: awgross thanks
[2013-03-06 17:44:40 -0500] gswallow: There has to be a more concise, "ruby way" of doing this?
[2013-03-06 17:49:06 -0500] werdnativ: never mind, knife-solo needs librarian. I was trying to work with berkshelf.
[2013-03-06 17:49:08 -0500] teukka: werdnativ: I haven't seen that, but it has to come from the automatic `librarian install` call
[2013-03-06 17:49:21 -0500] werdnativ: teukka: yup, good guess!
[2013-03-06 17:49:32 -0500] teukka: werdnativ: you can give it `--no-librarian` to skip it
[2013-03-06 17:51:10 -0500] teukka: werdnativ: native berkshelf support should be included in the next release
[2013-03-06 17:51:52 -0500] werdnativ: ok. I'm just experimenting, I'm still not sure which manager I prefer...
[2013-03-06 17:51:56 -0500] teukka: werdnativ: oh, and the librarian should not be invoked unless you have Cheffile in your repo
[2013-03-06 17:52:12 -0500] werdnativ: right, that makes sense now.
[2013-03-06 17:55:08 -0500] j^2: so, an fyi, you cant run chef11 in the micro instance in EC2
[2013-03-06 17:55:18 -0500] j^2: it has to be atleast small, 1gig of ram
[2013-03-06 17:55:49 -0500] j^2: so inother words no freetier for chef11 :*
[2013-03-06 17:55:52 -0500] j^2: :(
[2013-03-06 18:00:49 -0500] anentropic: hopefully easy question about writing recipes...
[2013-03-06 18:01:09 -0500] anentropic: I want a resource to notify another resource which may or may not exist
[2013-03-06 18:01:22 -0500] timsmith: have the other resource subscribe
[2013-03-06 18:01:34 -0500] timsmith: you avoid the problem entirely
[2013-03-06 18:01:42 -0500] anentropic: ah better thanks
[2013-03-06 18:01:49 -0500] timsmith: np
[2013-03-06 18:05:17 -0500] BugBuster123: Hi
[2013-03-06 18:05:27 -0500] BugBuster123: I have a short question regarding modelling of roles
[2013-03-06 18:05:46 -0500] BugBuster123: I use a recipe for distributing SSH Keys (https://github.com/nickola/chef-ssh-keys)
[2013-03-06 18:06:01 -0500] BugBuster123: The recipe accepts parameters for which key should be added to what user
[2013-03-06 18:06:28 -0500] BugBuster123: I also have a "all_server" role, that adds my SSH keys to the machines and does some other things
[2013-03-06 18:06:39 -0500] BugBuster123: All Servers use this role
[2013-03-06 18:07:00 -0500] BugBuster123: the role all_server has run_list = recipe[chef-ssh-keys]
[2013-03-06 18:07:20 -0500] BugBuster123: Now .. I want to deploy some application with chef
[2013-03-06 18:07:38 -0500] BugBuster123: Here I defined another role application_all
[2013-03-06 18:07:53 -0500] BugBuster123: this should create the user on all machines and install required packages and software
[2013-03-06 18:08:17 -0500] BugBuster123: This role should also create a user for the application and configure SSH PasswordLess Authentication
[2013-03-06 18:08:21 -0500] magichands: it seems like cookbooks are meant to be reusable but I'm finding they all lack something pretty much
[2013-03-06 18:08:54 -0500] magichands: most of my problems seem to just be related to versions of packages though
[2013-03-06 18:09:04 -0500] magichands: shit is just too damn old
[2013-03-06 18:09:12 -0500] BugBuster123: now in the rile "application_all" I added the recipe "recipe[chef-ssh-keys]" again, this time with different parameters
[2013-03-06 18:09:23 -0500] BugBuster123: however It seems that the action is not performed
[2013-03-06 18:09:39 -0500] BugBuster123: Does chef only execute each recipe once for each node ?
[2013-03-06 18:10:22 -0500] anentropic: magichands: it is a common problem, I have struggled with it too.  I found this article the other day which suggest some good patterns http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/
[2013-03-06 18:11:50 -0500] BugBuster123: How can I use the same recipe in multiple roles with different atrributes ?
[2013-03-06 18:12:08 -0500] BugBuster123: when one server inherits multiple roles with the same recipe
[2013-03-06 18:12:13 -0500] anentropic: override the relevant attributes in the role
[2013-03-06 18:12:22 -0500] anentropic: ah
[2013-03-06 18:12:48 -0500] magichands: anentropic: huh, they say dont' use run lists in a role?
[2013-03-06 18:12:54 -0500] magichands: what the hell is the point of a role then
[2013-03-06 18:13:14 -0500] BugBuster123: so I want to make "Bundles" "All Servers" and Application Specific Bundles "Application1"
[2013-03-06 18:13:51 -0500] BugBuster123: any maybe Hardware Specific Bundles "HarddwareType1"
[2013-03-06 18:14:12 -0500] BugBuster123: All may bring OS Users or SSh Keys with them .. and I want to "add the ressouces up"
[2013-03-06 18:15:28 -0500] BugBuster123: What is the answer to this ... Own Cookbook with Own Recipe Wrapping the community cookbook
[2013-03-06 18:15:29 -0500] BugBuster123: ?
[2013-03-06 18:15:52 -0500] BugBuster123: still .. How do I add up ressources that need to be added
[2013-03-06 18:16:14 -0500] jroh: I'm sure this is documented somewhere, but is there a way to use chef-client functionality from outside scripts? Mainly I want to be able to search for other nodes
[2013-03-06 18:24:23 -0500] magichands: part of me just wants to write some monster cookbook for setting up my app...
[2013-03-06 18:24:25 -0500] magichands: which seems crazy
[2013-03-06 18:25:34 -0500] magichands: is that uncommon?
[2013-03-06 18:26:00 -0500] skarufue: hello. I am trying to get opensauce chef-server running on a ubuntu Quantal installation. after beeing pointed to Omnibus installer i got the chef-webui up and running. now whe trying to cut the server (using knife) i run into problems. it seems that the default port for knifing is 4000 but ofc 4000 is not opened. there are loads of other port though. but then i am not entirely shure which keys knnife configure -i wants. so instead of a
[2013-03-06 18:26:02 -0500] skarufue: huge trial and error orgy i am here to ask you for pointers. how does one knife a chef?
[2013-03-06 18:27:59 -0500] skarufue: i will also prepare some pasties in 3.....2......1.
[2013-03-06 18:30:34 -0500] skarufue: http://pastebin.com/9MxWbMgC
[2013-03-06 18:32:29 -0500] penk: hey guys, i'm back for Round 2 of wrestling with chef.  i've installed the server on a standalone host (and followed ya'lls advice NEVER LOG INTO IT), but testing out the connection to the serveris giving me a connection refused on port 4000.   this is part of the chef client setup.
[2013-03-06 18:32:36 -0500] penk: I'm following this page: http://wiki.opscode.com/display/chef/Installing+Omnibus+Chef+Client+on+Linux+and+Mac
[2013-03-06 18:34:32 -0500] teukka: I heard that opscode chose erlang after watching this: http://www.youtube.com/watch?v=1yH_j8-VVLo
[2013-03-06 18:38:00 -0500] jubilo: penk and skarufue: I don't know if this is helpful, but I've noticed I had to use https://<chefserver>, not http://<chefserver>:4000 in my knife.rb file for Chef 11
[2013-03-06 18:38:04 -0500] skarufue: i created a user through webinterface made him admin copied his private key. i called him knifetest. i put the key in ~./chef/knifetest.pem. so i came up with this ~./chef/knife.rb: http://pastebin.com/7ANYcaeD . but when i do for example: "knife recipe list" i get: ERROR: Connection refused connecting to 10.0.0.202:4000 for /cookbooks/_recipes, retry 1/5
[2013-03-06 18:38:15 -0500] penk: oh?  hmm.
[2013-03-06 18:38:18 -0500] penk: okay, i'll try that.
[2013-03-06 18:38:18 -0500] jubilo: so try that in your knife.rb
[2013-03-06 18:38:19 -0500] coderanger: teukka: c
[2013-03-06 18:38:55 -0500] rh_: skarufue: Apparently that port isn't used any longer.  Just omit the port altogether
[2013-03-06 18:39:14 -0500] penk: jubilo: another example of where the docs are wrong.  awesome.
[2013-03-06 18:39:23 -0500] rep0st: it's just a slight oversight
[2013-03-06 18:39:26 -0500] penk: ...
[2013-03-06 18:39:30 -0500] doomviking: moving target
[2013-03-06 18:39:34 -0500] rep0st: the release notes state that it uses https
[2013-03-06 18:39:46 -0500] rep0st: but i guess when they packaged the omnibus installer they forgot to change the port
[2013-03-06 18:39:48 -0500] penk: this is the intro page.  it's the number one hit on google.  it's where all the pages refer to to how to set up chef.  and its wrong?
[2013-03-06 18:39:49 -0500] rep0st: it's one of those gotchas
[2013-03-06 18:40:04 -0500] skarufue: ok. nice. ommiting the port helped.
[2013-03-06 18:40:05 -0500] coderanger: jubilo: Can you point me at the incorrect doc? I'll get it fixed up :)
[2013-03-06 18:40:06 -0500] skarufue: TY
[2013-03-06 18:40:11 -0500] coderanger: er, skarufue
[2013-03-06 18:40:30 -0500] jubilo: penk, I feel your pain.
[2013-03-06 18:40:31 -0500] penk: coderanger: http://wiki.opscode.com/display/chef/Installing+Omnibus+Chef+Client+on+Linux+and+Mac
[2013-03-06 18:40:33 -0500] coderanger: skarufue: and yeah, :4000/:4040 became 80 and 443 in chef 11
[2013-03-06 18:40:49 -0500] rep0st: coderanger: the problem is that after install the knife.rb config file is still pointing to 4000
[2013-03-06 18:40:54 -0500] jubilo: it bit me in the ass hard a couple of weeks ago when trying to spin up a new infrastructure
[2013-03-06 18:41:08 -0500] Chocobo: grrr, I can't give up.  It is an addiction.
[2013-03-06 18:41:22 -0500] skarufue: coderanger: oh its all over the place ill make a collection for you. firstly: knife configure -i suggests port 4000
[2013-03-06 18:41:26 -0500] jubilo: chef is awesome but trying to figure out how to make it do anything, especially when you don't know anything about it, is an exercise in voodoo and frustration
[2013-03-06 18:41:40 -0500] penk: yeah, i'm in the puppet vs chef debate right now
[2013-03-06 18:41:43 -0500] coderanger: penk skarufue: Check out https://learnchef.opscode.com/ and doc.opscode.com for Correct docs
[2013-03-06 18:41:48 -0500] penk: this sort of crap really is what makes folks run away from chef.
[2013-03-06 18:41:54 -0500] coderanger: The wiki is being slowly decommissioned
[2013-03-06 18:41:54 -0500] rep0st: jubilo: i was in your position at one point. But the Docs even if they are for 10.x is still very helpful
[2013-03-06 18:42:07 -0500] jubilo: they *are* helpful, but they're also not quite right
[2013-03-06 18:42:14 -0500] jubilo: and I spent a lot of time figuring that out
[2013-03-06 18:42:16 -0500] penk: coderanger: this really frsturates me.  if the docs on the wiki are wrong, why don't you just add to the top of the wikie all over the place "THIS WIKI IS NO LONGER VALID, GO HERE"
[2013-03-06 18:42:25 -0500] rep0st: coderanger: i think it might help to update that in the wiki. there's pages where it's sparse letting people know that it's being decommed
[2013-03-06 18:42:26 -0500] penk: how could i possibly know that the docs i'm looking at are worthless?
[2013-03-06 18:42:41 -0500] coderanger: penk: A lot of pages do say that, just haven't gotten to all of them yet
[2013-03-06 18:42:44 -0500] jubilo: penk: there's a redirect somewhere in the docs, but it's at a top level and if you get there via a google hit you'll probably never see it
[2013-03-06 18:42:51 -0500] penk: right.
[2013-03-06 18:42:57 -0500] jubilo: so yeah
[2013-03-06 18:43:35 -0500] skarufue: coderanger: oh ok thx for the link. so do you want to know about occurences of port 4000 in http://wiki.opscode.com   ???
[2013-03-06 18:43:45 -0500] coderanger: in unrelated news, can I jsut say how much I dislike Confluences new GUI-only editor?
[2013-03-06 18:43:54 -0500] penk: heh
[2013-03-06 18:44:04 -0500] penk: didn't they roll the gui only editor like 3 years ago?
[2013-03-06 18:44:06 -0500] penk: i'm okay with it.
[2013-03-06 18:44:58 -0500] hatchetation: so, I'm a new chef user -- having a similar(?) port-related issue
[2013-03-06 18:45:34 -0500] jubilo: yeah, that bit in the docs really needs to be changed right away
[2013-03-06 18:45:37 -0500] hatchetation: however, it's on chef server 10.24.0 -- running on port :4000 ok, knife can connect ok, but berkshelf is failing due to the Location headers being returned
[2013-03-06 18:45:40 -0500] jubilo: it messes with people all the time
[2013-03-06 18:46:34 -0500] hatchetation: eg, when a resource is created in the sandbox during berks upload, the chef server returns a 201 with Location: http://server/sandboxes/foobarhash (note the lack of port)
[2013-03-06 18:46:42 -0500] gyre007: has Chef 10.18.2 been removed from omnibus packages ???
[2013-03-06 18:46:50 -0500] gyre007: I buiilt bunch of servers in the morning
[2013-03-06 18:47:01 -0500] gyre007: and Now I can only install 11
[2013-03-06 18:47:04 -0500] coderanger: skarufue: Okay, updated that page
[2013-03-06 18:47:05 -0500] gyre007: what the heck
[2013-03-06 18:47:07 -0500] coderanger: thanks for the report
[2013-03-06 18:47:32 -0500] coderanger: skarufue: And certainly, if you want to spam me with pmsgs you can send me everything you've got
[2013-03-06 18:47:33 -0500] hatchetation: any ideas? chef_server_url is set appropriately.
[2013-03-06 18:47:44 -0500] miah: hi
[2013-03-06 18:48:20 -0500] gyre007: Im trying to bootstrap 10.18.2 via omninbus...but it looks like since the lunch time that's job impossible...mm
[2013-03-06 18:48:47 -0500] rep0st: gyre007: you can specify the version of chef to be installed using the --distro option
[2013-03-06 18:48:55 -0500] gyre007: I DO
[2013-03-06 18:49:01 -0500] gyre007: it ws working in the morning
[2013-03-06 18:49:45 -0500] coderanger: gyre007: Can you pastebin the error oyu get?
[2013-03-06 18:49:49 -0500] coderanger: miah: G'morning!
[2013-03-06 18:49:56 -0500] gyre007: this is my omnibus script https://gist.github.com/milosgajdos83/5101947
[2013-03-06 18:50:02 -0500] skarufue: coderanger: ok. well its also here: http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages here: http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo here: http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually
[2013-03-06 18:50:44 -0500] coderanger: skarufue: Will fix, thanky :)
[2013-03-06 18:51:46 -0500] gyre007: weird
[2013-03-06 18:54:01 -0500] gyre007: and also I havent changed my knife config...
[2013-03-06 18:54:04 -0500] gyre007: bizzarre
[2013-03-06 18:54:23 -0500] coderanger: gyre007: That was a bad link
[2013-03-06 18:54:41 -0500] gyre007: coderanger: hm ?
[2013-03-06 18:54:50 -0500] penk: heh.  the omnibus page just changed to have the correct url, but the 'last edited by' didn't.  weird :)
[2013-03-06 18:54:53 -0500] penk: coderanger: was that you?
[2013-03-06 18:54:53 -0500] coderanger: Your gist link, I think you missed the end of it
[2013-03-06 18:55:03 -0500] gyre007: https://gist.github.com/milosgajdos83/5101947
[2013-03-06 18:55:07 -0500] gyre007: nope
[2013-03-06 18:55:07 -0500] coderanger: penk: If you look closely its a subpage include
[2013-03-06 18:55:17 -0500] gyre007: works for me
[2013-03-06 18:55:26 -0500] penk: coderanger: ah.  well, thank you for the edit no matter where you did it :)
[2013-03-06 18:55:27 -0500] coderanger: penk: That took a minute to find
[2013-03-06 18:55:31 -0500] penk: :)
[2013-03-06 18:55:34 -0500] rep0st: gyre007: works for me
[2013-03-06 18:55:43 -0500] penk: i used to do a cton of confluence work.  it can be fun.
[2013-03-06 18:56:01 -0500] gyre007: really annoying
[2013-03-06 18:56:08 -0500] coderanger: penk: Give me markdown/restructuredtext or give me death
[2013-03-06 18:56:19 -0500] penk: sorry man :)
[2013-03-06 18:56:31 -0500] skarufue: sine i got you all talking ports now. how much of this list do i need to expose to my chef-clients (the world) for them to work?: http://pastie.org/private/6rlephqpcodcnuklszdmg
[2013-03-06 18:56:46 -0500] gyre007: ill try to run knife with -V
[2013-03-06 18:57:05 -0500] gyre007: something must've changed...
[2013-03-06 18:57:23 -0500] gleam: you should only need 443 open
[2013-03-06 18:57:27 -0500] coderanger: penk: New docs are all ReST via Sphinx :)
[2013-03-06 18:57:31 -0500] rep0st: skarufue: chef 11 or 10?
[2013-03-06 18:57:54 -0500] mshilling: Can someone tell me an approximation of how much space CouchDB should take up?  We have 388 nodes, and my couchDB is 365GB.  I run compaction every night.
[2013-03-06 18:57:58 -0500] skarufue: rep0st: 11.06
[2013-03-06 18:58:08 -0500] rep0st: skarufue: only 443 ..i just went through that exercised last week
[2013-03-06 18:58:17 -0500] rep0st: s/exercised/exercise/
[2013-03-06 18:58:25 -0500] coderanger: mshilling: make sure you are compacting all views
[2013-03-06 18:58:27 -0500] penk: so that doc page also says 'your validation.pem is on your chef server in /etc/chef'
[2013-03-06 18:58:28 -0500] gyre007: yeah its picking the right omnibus script based on Verbose ouptut
[2013-03-06 18:58:39 -0500] penk: on my chef server, installed via omnibus:
[2013-03-06 18:58:40 -0500] penk: dshevett@inf-3:/etc/chef$ ls -l
[2013-03-06 18:58:40 -0500] penk: total 0
[2013-03-06 18:58:40 -0500] gyre007: but it's ignoring the version option passed to install.sh script
[2013-03-06 18:58:45 -0500] gyre007: oh dear
[2013-03-06 18:58:58 -0500] mshilling: I am.  I do it via a cron job and I took everything from the chef-client cookbook
[2013-03-06 18:59:22 -0500] gyre007: IS there any way how I can BOOTSTRAP 10.18.2
[2013-03-06 18:59:25 -0500] gyre007: on my servers
[2013-03-06 18:59:26 -0500] gyre007: and not 11
[2013-03-06 19:00:15 -0500] coderanger: gyre007: Are you running 10.18.2 locally?
[2013-03-06 19:00:29 -0500] skarufue: rep0st: thankyou. well then ill be a smartass and suggest making everything else bind to loopback by default or use sockets. its not hard for me to isolate since this just goes into container. but it would just be nicer. maybe ill do it if chef convinces me elsewise
[2013-03-06 19:00:33 -0500] mshilling: here is the cron job that runs every night.  Is this everything that I need to compact?  https://gist.github.com/anonymous/5102023
[2013-03-06 19:00:39 -0500] coderanger: All recent (I think since 10.14 or 10.16) versions of the chef-full bootstrap install the same version of Chef o the server as on the workstation
[2013-03-06 19:00:50 -0500] gyre007: coderanger: YES
[2013-03-06 19:01:14 -0500] coderanger: gyre007: Please remember that allcaps is generally regarded as shouting
[2013-03-06 19:01:30 -0500] gyre007: oki
[2013-03-06 19:01:33 -0500] skarufue: rep0st: that probably shouldnt have been adressed to zou....
[2013-03-06 19:01:50 -0500] rep0st: skarufue: lol you should see the question marks in my eyes. But to be honest i would have to agree with you
[2013-03-06 19:01:54 -0500] gyre007: well Im running 10.18.2 locally and that's the reason why im trying to bootstrap 10.18.2 in the cloud
[2013-03-06 19:02:24 -0500] werdnativ: I'm trying to copy these lines to install mysql gem against the percona libraries: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/ruby.rb but I'm getting the error "make not found" as though build-essentials isn't getting installed. How can I make sure it's installed before it tries to install the chef_gem "mysql"?
[2013-03-06 19:02:35 -0500] penk: anyone on why my chef install seems to not have completed the server install?  i have no validator.pem.  I used the " curl -L https://www.opscode.com/chef/install.sh | sudo bash
[2013-03-06 19:02:36 -0500] penk: method.
[2013-03-06 19:02:56 -0500] gyre007: but I simply dont get this coderanger
[2013-03-06 19:03:08 -0500] gyre007: something must've changed somewhere...
[2013-03-06 19:03:17 -0500] penk: oh good, and more broken docs.
[2013-03-06 19:03:21 -0500] penk: http://wiki.opscode.com/display/chef/Common+Errors
[2013-03-06 19:03:35 -0500] coderanger: gyre007: At the top of the bootstrap process, what file do you see being downloaded?
[2013-03-06 19:03:37 -0500] penk: that page describes that i can use /etc/init.d/chef-server restart to recreate the server key.  but that file doesn't even work.
[2013-03-06 19:03:43 -0500] penk: er, exist
[2013-03-06 19:04:08 -0500] coderanger: penk: That one was cleaned up yesterday :) https://learnchef.opscode.com/errors-and-problems/401-unauthorized/
[2013-03-06 19:04:26 -0500] UForgotten: is there an easy way to force one to part of a recipe to run before another? because it does not appear to be going in order.
[2013-03-06 19:04:26 -0500] hatchetation: if anyone knows of any other configuration options (undocumented?) that affect the server port configuration on 10.24, I'd love to hear them. I'm blocked pretty hard and am fairly sure it's a bug
[2013-03-06 19:04:29 -0500] penk: but there's nothing that says that page is invalida
[2013-03-06 19:04:37 -0500] penk: coderanger: that page should be deleted then, anda  redirect.
[2013-03-06 19:04:40 -0500] penk: you're publishing false information.
[2013-03-06 19:04:50 -0500] coderanger: penk: There will be by the end of the day today, it literally was rewritten 12 hours ago :P
[2013-03-06 19:05:35 -0500] gyre007: I need to make some tests...but this looks dodgy...mm
[2013-03-06 19:05:36 -0500] skarufue: hatchetation: did you try a lsof -i (assuming you are on a *nix)
[2013-03-06 19:06:06 -0500] hatchetation: skarufue: chef-server and basic knife commands both work fine, everything is listening where you'd expect per the docs
[2013-03-06 19:06:39 -0500] penk: coderanger: i'm sorry to sound like a jerk
[2013-03-06 19:06:47 -0500] penk: but that page does not say anything about /etc/chef/validation.pem
[2013-03-06 19:07:02 -0500] penk: er, validator
[2013-03-06 19:07:04 -0500] hatchetation: guessing that knife forces the port to the chef-server; however, other API clients like berkshelf are failing because the server isn't referring to constructing self-referential URLs correctly
[2013-03-06 19:07:12 -0500] penk: that page seems to be completey about hosted chef.
[2013-03-06 19:07:18 -0500] skarufue: hatchetation: yes i thought you are struglling with ports. always good to look if a port is actually opened. but then i realise you are just collecting information to write documentation.
[2013-03-06 19:07:21 -0500] hatchetation: eg, it's sending down URLs w/out a port in Location headers, resources, etc
[2013-03-06 19:07:27 -0500] coderanger: penk: https://learnchef.opscode.com/errors-and-problems/workflow-problems/
[2013-03-06 19:07:29 -0500] coderanger: First one
[2013-03-06 19:07:42 -0500] penk: wtf
[2013-03-06 19:07:59 -0500] penk: how.. could i possible know to click on a menu pick on the left?
[2013-03-06 19:08:05 -0500] hatchetation: skarufue: nope, not collecting info for docs, just a new user who is blocked and doesn't know what else to do besides file a bug and hope it's not my problem
[2013-03-06 19:08:11 -0500] penk: called ambiguously 'workflow problems'?
[2013-03-06 19:08:58 -0500] coderanger: sethvargo: ^^
[2013-03-06 19:09:25 -0500] penk: also?
[2013-03-06 19:09:28 -0500] penk: https://learnchef.opscode.com/errors-and-problems/workflow-problems/
[2013-03-06 19:09:44 -0500] penk: tell me again how to fix the missing validation.pem?
[2013-03-06 19:09:50 -0500] penk: oh, look, troubleshooting: Make sure your validation.pem or ORGANIZATION-validator.pem is downloaded and accessible by the current user.
[2013-03-06 19:09:56 -0500] penk: downloaded... from where?
[2013-03-06 19:09:59 -0500] penk: oh, right, hosted chef.
[2013-03-06 19:10:02 -0500] penk: which i'm not running
[2013-03-06 19:10:11 -0500] penk: the gist i'm getting here is opscode wants everyone to pay money for hosted chef
[2013-03-06 19:10:15 -0500] penk: and screw hosting your own
[2013-03-06 19:10:16 -0500] coderanger: sethvargo meet penk, vice versa
[2013-03-06 19:10:22 -0500] skarufue: penk: i found mine in /etc/chef-server
[2013-03-06 19:10:40 -0500] hatchetation: ahh -- seems to be related to this, but I'm not doing anything fancy with proxying http://tickets.opscode.com/browse/CHEF-3853
[2013-03-06 19:10:46 -0500] sethvargo: penk: i'm late to the parade. whats up?
[2013-03-06 19:10:49 -0500] penk: skarufue: oh that's convenient.  the directory that the docs don't ever mention.
[2013-03-06 19:11:02 -0500] gleam: the path changed between chef 10 and 11
[2013-03-06 19:11:02 -0500] penk: sethvargo: the chef docs are crap.
[2013-03-06 19:11:12 -0500] skarufue: penk: yeah its badly documentet
[2013-03-06 19:11:12 -0500] sethvargo: penk: docs or learnchef?
[2013-03-06 19:11:19 -0500] penk: gleam: i was jsut pointed to, by several pepople, this page
[2013-03-06 19:11:20 -0500] penk: https://learnchef.opscode.com/errors-and-problems/workflow-problems/
[2013-03-06 19:11:29 -0500] penk: which happily points to /etc/chef/vbalidation.pem
[2013-03-06 19:11:36 -0500] penk: and gives no way to generate, set up, or configure that file.
[2013-03-06 19:11:44 -0500] skarufue: penk: but maybe we can help to better them. i think they changed alot in 11 and documentation is not up to date.
[2013-03-06 19:12:02 -0500] penk: skarufue: in all honesty, i'd love to see correct docs.  first, invalidate all the docs that are wrong
[2013-03-06 19:12:04 -0500] penk: because most of them are wrong.
[2013-03-06 19:12:11 -0500] penk: with no indication of where to find the correc tinformation
[2013-03-06 19:12:48 -0500] mshilling: so aside from compacting the DB and views, does 365GB seem normal for a 388 node chef environment?
[2013-03-06 19:13:05 -0500] sethvargo: penk: the docs are all open source, so if you have issues with incorrect or incomplete documentation, we'd love to hear about them: https://github.com/opscode/chef-docs
[2013-03-06 19:13:16 -0500] skarufue: penk: well you are hinting that they just want to sell hosted chef. ever trieg to set up your own gitorious  ? same problem there. but then again we are the community. we make the community docs.
[2013-03-06 19:13:19 -0500] mshilling: can I delete/clean up anything?  I dont necessarily need historical data
[2013-03-06 19:13:47 -0500] penk: really?  that's the asnwer?  don't lke the docs, write your own?
[2013-03-06 19:13:53 -0500] rep0st: the community docs are only as strong as the community
[2013-03-06 19:14:18 -0500] penk: i don't know the product at all
[2013-03-06 19:14:19 -0500] rep0st: penk: it's a community effort. WE're not getting paid for any of this nor is anybody trying to sell hosted chef.
[2013-03-06 19:14:22 -0500] penk: i'm trying to use it at a very basic level
[2013-03-06 19:14:31 -0500] penk: but even the very basic docs are unuseable, inaccurate, and disorganized.
[2013-03-06 19:14:40 -0500] penk: do you want me to open bugs on every single fault in the documetnation?
[2013-03-06 19:14:43 -0500] rep0st: penk: you caught chef at a transition period
[2013-03-06 19:14:52 -0500] sethvargo: penk: I'm having trouble understanding your problems. You've only said "they suck", but haven't provided an indication of what or where they are lacking. If you give us specific problems, we can fix them, but it does no good to continue to say they suck without telling us what they are missing
[2013-03-06 19:15:03 -0500] rep0st: penk: and perhaps a bad on the community not habing established docs before release
[2013-03-06 19:15:11 -0500] penk: sethvargo: you came in late on the conversation.  i've posted numerous links that have inaccurate or inaccessible information.
[2013-03-06 19:15:19 -0500] rep0st: s/habing/having
[2013-03-06 19:15:22 -0500] penk: i'll give you an example
[2013-03-06 19:15:30 -0500] penk: https://learnchef.opscode.com/errors-and-problems/workflow-problems/
[2013-03-06 19:15:34 -0500] penk: that has inaccurate paths
[2013-03-06 19:15:57 -0500] sethvargo: what do you mean by "inaccurate paths" - there's a lot of content on that page
[2013-03-06 19:16:04 -0500] sethvargo: penk ^
[2013-03-06 19:16:37 -0500] penk: this talks about directoris that are incorrect, but the answer i got was "that page is invalid, use the workflow-problems page" - but why not have the original page deleted, and have a redirect to the correct one?
[2013-03-06 19:16:38 -0500] penk: http://wiki.opscode.com/display/chef/Common+Errors
[2013-03-06 19:16:47 -0500] penk: on the workflow-problems page (which is badly named):
[2013-03-06 19:16:56 -0500] penk:  No such file or directory - /etc/chef/validation.pem...
[2013-03-06 19:16:59 -0500] penk: that does not exist.
[2013-03-06 19:17:06 -0500] penk: the troubleshooting says
[2013-03-06 19:17:07 -0500] penk: Make sure your validation.pem or ORGANIZATION-validator.pem is downloaded and accessible by the current user.
[2013-03-06 19:17:12 -0500] penk: which is a hosted-chef answer
[2013-03-06 19:17:17 -0500] penk: what if you're not running hosted chef?
[2013-03-06 19:17:34 -0500] chris613: validation.pem is not a hosted chef thing
[2013-03-06 19:17:39 -0500] sethvargo: all of the learnchef documentation assumes hosted chef
[2013-03-06 19:17:52 -0500] penk: then why was i pointed to learnchef when i had a problem with my chef server?
[2013-03-06 19:17:55 -0500] penk: and yes, here's another issue.
[2013-03-06 19:18:04 -0500] miah: hosted chef most certainly has a validation.pem
[2013-03-06 19:18:06 -0500] penk: you just pointed out the exact problem.  "How would i know this is only for a hosted chef installation"?
[2013-03-06 19:18:24 -0500] chris613: miah: I mean it isn't EXCLUSIVELY a hosted chef thing
[2013-03-06 19:18:27 -0500] sethvargo: the learnchef campaign is designed for users looking to get started with chef. setting up OS chef server is somewhat painful and detracts from the power of Chef. if you're trying to setup a workstation, the easiest thing to do is use learnchef and the free 5-node plan of hosted chef
[2013-03-06 19:18:34 -0500] miah: thats more accurate =)
[2013-03-06 19:18:48 -0500] sethvargo: penk:  if someone pointed you to learnchef for setting up chef server, they were wrong, and I apologize for that
[2013-03-06 19:18:49 -0500] penk: sethvargo: brilliant.  so opscode only documents things that move people to hosted chef.  the one that makes them money.
[2013-03-06 19:19:00 -0500] sethvargo: penk:  that's not true at all
[2013-03-06 19:19:09 -0500] sethvargo: docs.opscode.com is our full documentation
[2013-03-06 19:19:49 -0500] sethvargo: penk: learnchef is the "fastest way to learn chef". the bulk of chef isn't getting a chef server setup and configured - it's writing recipes, learning workflow, using community cookbooks, etc.
[2013-03-06 19:20:07 -0500] mshilling: anybody care to comment on couchdb size?
[2013-03-06 19:20:07 -0500] sethvargo: penk: and hosted-chef is free for 5 nodes...
[2013-03-06 19:20:13 -0500] pdtpatrick: Question .. does Chef have run stages like Puppet or does it have require? So i can say run this before running this other part? Or only run if this dependency passes ?
[2013-03-06 19:20:28 -0500] penk: i do not have 5 nodes, i have 55.
[2013-03-06 19:20:49 -0500] sethvargo: pdtpatrick: Chef run_lists operate in the order you give them. so if you want x before y, simply put x before y in a run_list :)
[2013-03-06 19:21:10 -0500] chris613: pdtpatrick: There are two phases, one where resources are defined, and then one where they are executed. The recipes are read in the order they appear in the run list in order to build resources, and then those resources execute in the order they were defined (I think).
[2013-03-06 19:21:30 -0500] penk: this is the installation document for how to set up a chef client and get the basics of chef operating
[2013-03-06 19:21:30 -0500] penk: http://wiki.opscode.com/display/chef/Installing+Omnibus+Chef+Client+on+Linux+and+Mac
[2013-03-06 19:21:34 -0500] sethvargo: penk: and you've followed these docs: http://docs.opscode.com/chef/install_server.html
[2013-03-06 19:21:52 -0500] pdtpatrick: so then I cannot say this service depends on this config. If this config gets changed then automatically restart this service ?
[2013-03-06 19:21:55 -0500] sethvargo: penk:  are you trying to install chef server or install chef client - they are different
[2013-03-06 19:22:10 -0500] penk: i am trying to do both.  i was instructed to do the installation from that page, which i have complete.d
[2013-03-06 19:22:12 -0500] sethvargo: pdtpatrick: you can - you can use notifications and recipe dependencies for that
[2013-03-06 19:22:14 -0500] rh_: If you setting up your own server, is http://docs.opscode.com/ the place to go?
[2013-03-06 19:22:19 -0500] chris613: pdtpatrick: Certainly can. Look at the "notifies" line for something like the template resource
[2013-03-06 19:22:24 -0500] penk: one moment, i'm checking something
[2013-03-06 19:22:45 -0500] sethvargo: penk: and this didn't help you; http://docs.opscode.com/chef/install_workstation.html#download-pem-files-and-knife-rb
[2013-03-06 19:22:53 -0500] skarufue: coderanger: another port 4000: http://wiki.opscode.com/display/chef/Installing+Omnibus+Chef+Client+on+Linux+and+Mac
[2013-03-06 19:23:05 -0500] magoo: can someone tell me why my runlist order would not be honored?
[2013-03-06 19:23:19 -0500] rh_: sethvargo: That only seems to apply to private/hosted, I ran into that issue yesterday
[2013-03-06 19:24:16 -0500] sethvargo: And you've followed the docs here that are dedicated to OS Chef server: http://docs.opscode.com/chef/manage_server_open_source.html
[2013-03-06 19:24:18 -0500] penk: running chef-server-ctl test
[2013-03-06 19:25:08 -0500] sethvargo: penk: ^
[2013-03-06 19:25:12 -0500] rh_: this one seems up-to-date, not sure the diff: http://docs.opscode.com/install_workstation.html#get-the-pem-files-and-knife-rb-files
[2013-03-06 19:25:43 -0500] penk: sethvargo: unfortunately, you'er pasting links from 3 different websites.  learnchef, docs, opscode, and wiki.opscode.  waht i'm doing is going back through various links to see waht magical path i should have been following, and making sure i did.
[2013-03-06 19:25:46 -0500] sethvargo: rh_:  that's for hosted and private chef, but the steps for OSC are slightly different
[2013-03-06 19:26:03 -0500] sethvargo: penk: we are currently in a migration from the wiki to docs.opscode as of yesterday
[2013-03-06 19:26:06 -0500] penk: xref: i'm running the test suite now, because that's on the insetall_server page.
[2013-03-06 19:26:18 -0500] sethvargo: penk: learnchef was never the right solution in your case, so feel free to ignore it
[2013-03-06 19:26:24 -0500] penk: sethvargo: then every page on the wiki should have a big banner across the top that says THIS DOCUMENTAITON IS LIKELY INACCURATE, GO TO THE DOCS SITE
[2013-03-06 19:26:33 -0500] miah: agreed
[2013-03-06 19:26:36 -0500] sethvargo: penk: most of them do...
[2013-03-06 19:26:40 -0500] rh_: sethvargo: The one I linked?  Odd, it has a section specifically for open source that was missing from the other
[2013-03-06 19:26:45 -0500] sethvargo: penk: and some of them even have permanent redirects
[2013-03-06 19:27:01 -0500] penk: that's demonstrably incorrect.
[2013-03-06 19:27:04 -0500] penk: http://wiki.opscode.com/display/chef/Installing+Omnibus+Chef+Client+on+Linux+and+Mac
[2013-03-06 19:27:10 -0500] penk: that is the first hit in google on installing chef
[2013-03-06 19:27:13 -0500] sethvargo: rh_: oh that is strange. i just though it was the same thing
[2013-03-06 19:27:20 -0500] penk: and has no banner
[2013-03-06 19:27:55 -0500] rh_: sethvargo: Yeah, they seem mostly the same otherwise.  oh well.
[2013-03-06 19:28:50 -0500] penk: i'm sorry if i'm sounding like a real jerk here.  but there is only one thing worse than no documetnation, and that's wrong documentation.  and right now, the chef world is heavily populated with well indexed bad documetnation that contains inaccurate information, without any way of getting the right information.
[2013-03-06 19:28:56 -0500] sethvargo: penk: we can't control google and we are doing our best. you've literally caught us in the middle of a transition period and im sorry for that
[2013-03-06 19:29:23 -0500] penk: i understand that, but simply adding a banner to every wiki page with the redirect and/or a pointer to the new docs site would be ENORMOUSLY helpful.
[2013-03-06 19:30:08 -0500] penk: Finished in 1 minute 43.67 seconds
[2013-03-06 19:30:08 -0500] penk: 70 examples, 0 failures
[2013-03-06 19:30:09 -0500] penk: \o/
[2013-03-06 19:30:19 -0500] sethvargo: penk:  we have hundreds of thousands of wiki pages. I've raised this issue with our docs folks and they are looking into it. there are multiple pages which have redirects and/or headers at the top
[2013-03-06 19:31:09 -0500] penk: your wiki doesn't support adding a banner to every page?
[2013-03-06 19:31:21 -0500] penk: that's confluence.  i absolutely know it can do that.
[2013-03-06 19:41:41 -0500] ack: hosted chef still down?
[2013-03-06 19:42:01 -0500] ack: ERROR: Server returned error for https://api.opscode.com/organizations/appfog/roles/, retrying 5/5 in 41s. internal server error
[2013-03-06 19:56:19 -0500] rep0st: what's the easiest way to decomm a VM using knife
[2013-03-06 19:58:27 -0500] doomviking: rep0st: here's how I do it: https://gist.github.com/luntzel/5102523
[2013-03-06 19:58:38 -0500] doomviking: ymmv
[2013-03-06 19:59:08 -0500] sethvargo: rep0st: are you using vagrant? check out vagrant butcher
[2013-03-06 19:59:47 -0500] j^2: doomviking: isn't there a -P with server delete with ec2?
[2013-03-06 19:59:55 -0500] j^2: i know there is one with rackspace
[2013-03-06 20:00:53 -0500] doomviking: j^2: dunno!
[2013-03-06 20:01:10 -0500] doomviking: ah, purge
[2013-03-06 20:01:11 -0500] j^2: i'm checking as soon as this bootstrap is done ;)
[2013-03-06 20:01:41 -0500] doomviking: I do that because the node/client name and the instance on ec2 differ
[2013-03-06 20:01:51 -0500] doomviking: thats my shit though
[2013-03-06 20:03:03 -0500] j^2: ahh
[2013-03-06 20:03:48 -0500] rep0st: sethvargo: thanks ill take a look. We're not using vagrant juist open source chef. Currently when i decomm a VM in xenserver i just do a knife node delete and knife client delete
[2013-03-06 20:04:08 -0500] sethvargo: that's basically all vagrant-butcher does :)
[2013-03-06 20:08:17 -0500] j^2: doomviking: yep, there is a -P
[2013-03-06 20:08:20 -0500] j^2: example -->
[2013-03-06 20:08:21 -0500] magoo: so postgres sets the template encoding via locale environment variables. I'm using the locale recipe to set these variables to en_US.UTF-8 before postgres is installed. The problem is that the root environment needs to be resourced before these updates can be seen. Any idea how to do this inside the chef run?
[2013-03-06 20:08:34 -0500] j^2: doomviking: https://gist.github.com/3c85b812a748a551fac4
[2013-03-06 20:11:09 -0500] doomviking: j^2: so that nuked the client/node data from the chef server?
[2013-03-06 20:11:20 -0500] j^2: yep
[2013-03-06 20:11:27 -0500] UForgotten: soo... I still have a problem in chef-solo where I've done an include_recipe and the recipe doesn't run before the rest of the tasks in the recipe that is including it, even though it is at the top of the file.  how can I force the include to go first?
[2013-03-06 20:12:03 -0500] btm: @opscode chef code review, join: http://bit.ly/13HgBwd, watch: http://youtu.be/pZvpnA_E71o #opschef
[2013-03-06 20:12:14 -0500] doomviking: j^2: feels like 6 of one half dozen of the other, a little :)
[2013-03-06 20:13:03 -0500] rep0st: just curious when i execute knife node list or a knife client list . should i be getting the FQDN? or shortname?
[2013-03-06 20:13:10 -0500] rep0st: what's the expected output
[2013-03-06 20:13:20 -0500] j^2: doomviking: yeah ;)
[2013-03-06 20:15:27 -0500] doomviking: rep0st: definitely not the fqdn, unless your nodes/clients are named after the fqdn
[2013-03-06 20:16:21 -0500] rep0st: doomviking: no my /etc/hostname is using the short name im using debian 6 which from what i know pulls the fqdn from dns
[2013-03-06 20:16:31 -0500] jblaine: What am I missing? https://gist.github.com/jblaine/5102661
[2013-03-06 20:16:44 -0500] doomviking: rep0st: knife node list is querying the chef server
[2013-03-06 20:17:28 -0500] rep0st: doomviking: right. When i bootstrapped my node for some reason it's using the fqdn for the node name
[2013-03-06 20:17:30 -0500] failshell: within a cookbook, what's the best way to share variables between recipes? id like to have something like recipes/vars.rb automatically included in all other recipes within that cookbook
[2013-03-06 20:17:56 -0500] doomviking: rep0st: dunno. weird.
[2013-03-06 20:18:09 -0500] jblaine: failshell: include_recipe?
[2013-03-06 20:18:32 -0500] failshell: jblaine: that's so manual
[2013-03-06 20:18:48 -0500] doomviking: rep0st: you used -N on bootstrap?
[2013-03-06 20:19:53 -0500] jblaine: failshell: far as I know, there is no special hook to include some boilerplate by default in every recipe of a cookbook w/o doing it manually. That's a feature, IMO.
[2013-03-06 20:20:29 -0500] rep0st: doomviking: ooo no i did not.
[2013-03-06 20:20:41 -0500] failshell: jblaine: yeah i never seen that used either. guess ill include hehe
[2013-03-06 20:21:02 -0500] rep0st: doomviking: i think that's it right there im goign to rebootstrap and see what happens
[2013-03-06 20:24:43 -0500] penk: so question, folks running chef-solo - what's usually the first step?  spin my own recipe to learn it?  or start pulling from the community cookbooks anda pplying?  for me i'm looking at things like "Makes sure there's a cron job and/or file in /etc/cron.d"
[2013-03-06 20:25:28 -0500] penk: (for those who heard me ranting earlier, i apologize again.  personally hosted chef server is... a hive of scum and villainy for me.  so in the interest of community harmony, i'll avoid it for now)
[2013-03-06 20:27:16 -0500] rep0st: doomviking: thank you that did it for me
[2013-03-06 20:37:23 -0500] knuckolls: penk: did anyone point you to this? http://fnichol.github.com/knife-server/
[2013-03-06 20:37:42 -0500] penk: not yet
[2013-03-06 20:38:14 -0500] knuckolls: penk: as far as solo is concerned, writing a cookbook w/ a simple recipe then having it run in vagrant w/ the chef-solo provisioner is the way to go
[2013-03-06 20:38:52 -0500] penk: well, i don't have vagrant yet.  so i'm just trying to whip up a quicky cookbook and a test recipe and apply it
[2013-03-06 20:39:12 -0500] knuckolls: penk: berkshelf w/ the berks cookbook <name> command will set you up with a skeleton cookbook w/ vagrant preconfigured. it'll also pull in all the upstream dependencies that you define in the metadata.yml file.
[2013-03-06 20:39:36 -0500] knuckolls: vagrant takes like 5 minutes to install and berks will hand you a working Vagrantfile.
[2013-03-06 20:39:52 -0500] penk: well, it looks like
[2013-03-06 20:39:53 -0500] penk: git clone git://github.com/opscode/chef-repo
[2013-03-06 20:39:58 -0500] penk: will get me a cookbook skeelton
[2013-03-06 20:40:19 -0500] knuckolls: traditionally people put all their cookbooks in a structure like that
[2013-03-06 20:40:27 -0500] knuckolls: in a subfolder called cookbooks, or site-cookbooks
[2013-03-06 20:40:38 -0500] knuckolls: there are also folders for roles, and environments if you want to keep them in source control
[2013-03-06 20:41:19 -0500] knuckolls: berkshelf treats cookbooks as single repositories, and has really nice tooling for working w/ chef solo and rapidly iterating on cookbooks. that's the only reason i'd point you to that. it seems really simple for a newcomer. gets you going
[2013-03-06 20:41:34 -0500] penk: cook, okay, i'll look at it.
[2013-03-06 20:42:09 -0500] Chocobo: huh, I think I solved my berkshelf/vagrant problem by using rvm
[2013-03-06 20:42:19 -0500] magoo: according to this: http://rubydoc.info/gems/chef/0.10.4/Chef/Provider/Package/Dpkg#install_package-instance_method package should execute run_command_with_systems_locale. This should pull the locale data that i've set with the locale recipe but it is not for some reason
[2013-03-06 20:42:25 -0500] knuckolls: Chocobo: wild. glad you've got things going
[2013-03-06 20:43:16 -0500] Chocobo: Thank knuckolls.  I still wish I knew what was going on with my system version of ruby.  Oh well.   Is there a prefered ruby version for chef, berkshelf, vagrant?
[2013-03-06 20:43:31 -0500] knuckolls: 1.9 is pretty standard these days
[2013-03-06 20:43:44 -0500] knuckolls: 2.0 is brand new, likely still fresh w/ bugs
[2013-03-06 20:43:55 -0500] Chocobo: ok.  I think rvm is using 2 right now
[2013-03-06 20:44:09 -0500] knuckolls: honestly, i see no reason not to try it
[2013-03-06 20:44:16 -0500] knuckolls: if it gives you problems, rvm install 1.9
[2013-03-06 20:45:08 -0500] Chocobo: Alright, thanks knuckolls
[2013-03-06 20:45:09 -0500] tmichael: just want to confirm, if i have base role with a run_list and then add another recipe in "run_list" for an environment they will get merged
[2013-03-06 20:45:17 -0500] tmichael: not behaving that way and trying to track down why
[2013-03-06 20:45:29 -0500] magoo: I know it's not pulling the locale correctly because package "postgresql-server-9.1" will only have the correct encoding set after removing the postgres packages manually and running chef-client a 2nd time
[2013-03-06 20:45:41 -0500] tmichael: recipe in the environment's run_list is not getting included for some reason
[2013-03-06 20:45:55 -0500] tmichael: figured it's an array and docs suggest that means they merge
[2013-03-06 20:46:01 -0500] magoo: this leads me to believe that run_command_with_systems_locale doesn't work correctly or is not getting called
[2013-03-06 20:47:07 -0500] knuckolls: tmichael: as far as i'm aware, run lists are just on nodes, and in roles.
[2013-03-06 20:47:38 -0500] knuckolls: when the chef-client is figuring out what to do with the run list it's been handed on bootstrap, if it sees a role, it'll expand it out to that role's runlist for this given environment.
[2013-03-06 20:47:54 -0500] knuckolls: http://docs.opscode.com/essentials_nodes_chef_run.html
[2013-03-06 20:47:59 -0500] knuckolls: "expand the run-list"
[2013-03-06 20:48:35 -0500] Chocobo: Wow!  When it works it is smooooth
[2013-03-06 20:48:57 -0500] tmichael: knuckolls: that's interesting.  i assumed i could add to run_list in env file because when creating a new environment the json has a run_list element.  But what you're saying makes sense.  I'll just use a role.  Thanks
[2013-03-06 20:59:47 -0500] behemphi1: ohai chefs
[2013-03-06 20:59:57 -0500] behemphi1: is it possible to define an attribute as a mash?
[2013-03-06 21:05:36 -0500] btm: @opscode cookbook code review, join: http://bit.ly/Zd8m7m, watch: http://youtu.be/dbLUcLfZ6Vs
[2013-03-06 21:22:26 -0500] dotslash: Is there a way to add a user to a group without removing everyone else from the group?
[2013-03-06 21:26:16 -0500] gmiranda23: dotslash: http://docs.opscode.com/resource_group.html
[2013-03-06 21:27:14 -0500] dotslash: I looked at that. I must be missing something.
[2013-03-06 21:27:43 -0500] gmiranda23: the example shows how to append users to a group
[2013-03-06 21:27:51 -0500] dotslash: I'm creating a group and then creating a user and adding it to the group.  If I manually add someone to the group they get removed when the recipe runs again.
[2013-03-06 21:28:14 -0500] dotslash: I'm not adding a user from inside the group. Let me see if append true changes that.
[2013-03-06 21:37:22 -0500] Aqueous: anyone have  a problem with the phpmyadmin cookbook trying to find a php-fpm resource that doesn't exist?
[2013-03-06 21:38:19 -0500] flaccid_: this might seem like a weird question, but is there a way to print all the node attributes from a recipe?
[2013-03-06 21:43:19 -0500] awgross: geekbri: nice job on the redisio cookbook
[2013-03-06 21:43:47 -0500] geekbri: awgross: thanks.
[2013-03-06 21:43:59 -0500] geekbri: awgross: When I look at it all I see is all the stuff that needs to be changed, but as long as others are happy with it, then I am too :)
[2013-03-06 21:44:05 -0500] flaccid_: i guess node.default_attrs
[2013-03-06 21:44:13 -0500] awgross: geekbri: out of curiousity, why the push to allow multiple redis servers on one machine?
[2013-03-06 21:44:25 -0500] geekbri: awgross: I needed it for something personally :-\
[2013-03-06 21:44:26 -0500] geekbri: haha
[2013-03-06 21:44:37 -0500] awgross: geekbri: gotcha
[2013-03-06 21:44:41 -0500] geekbri: I think the use case for it is fairly uncommon
[2013-03-06 21:44:59 -0500] geekbri: however, at the time I felt it wasn't a big deal so adding it made sense.  It however added a lot of complexity that I now wish wasn't there.
[2013-03-06 21:45:18 -0500] geekbri: Theres other stuff I want to refine and change, but I don't have the time currently.  Some day I'll release a 2.0
[2013-03-06 21:45:36 -0500] geekbri: Which will simplify it without taking away functionality
[2013-03-06 21:46:01 -0500] awgross: cool, ill probably be using this in my internal redis refactor, going to have to add the ability to update configs w/o restart.  Ill try to push that upstream if i get it working
[2013-03-06 21:46:36 -0500] geekbri: yeah i mean, i love when people send me stuff upstream so feel free
[2013-03-06 21:46:57 -0500] geekbri: I resisted adding upstart support because i hate upstart so much, but I recently finally added it because somebody pushed up some code.  Granted I had to refine and make major changes to their pull request but
[2013-03-06 21:47:00 -0500] geekbri: it still got me off my butt ;)
[2013-03-06 21:47:06 -0500] awgross: haha
[2013-03-06 21:48:43 -0500] geekbri: bleh I just noticed markdown errors in the readme.
[2013-03-06 21:50:23 -0500] awgross: also SHA checking for versions
[2013-03-06 21:50:28 -0500] awgross: from source
[2013-03-06 21:50:49 -0500] geekbri: Yeah, I kept meaning to add that, I just never got around to it
[2013-03-06 21:51:03 -0500] geekbri: I actually had it bite me once when a download was corrupt too
[2013-03-06 21:54:47 -0500] version2beta: jtimberman, are you around? I've been working with the postgresql database and I notice there are no retries set on the package provider. Based on perceived flakiness with both packages and python_pip, I've been putting retries 5 in on my cookbooks. Is this not preferred?
[2013-03-06 21:55:09 -0500] version2beta: jtimberman, sorry postgresql cookbook.
[2013-03-06 21:55:11 -0500] penk: ladies and gentlemen.  you may all rejoice.
[2013-03-06 21:55:17 -0500] penk: i've just successfully run my first recipe.
[2013-03-06 21:55:28 -0500] rep0st: penk: congrats
[2013-03-06 21:55:37 -0500] penk: this is a very very handy webpage.
[2013-03-06 21:55:38 -0500] penk: http://jonathanotto.com/blog/chef-tutorial-in-minutes.html
[2013-03-06 22:10:20 -0500] ZacharyBlank: Anyone available for help with knife rackspace debugging?
[2013-03-06 22:10:46 -0500] freshgrilled: Question:  I'm trying to do something that could work one of two ways, the first being the easiest...  Call an external resource from a ruby block.  In my case, I'm using ruby_block to pull some variables and then for each set use "aws_ebs_volume" to create within the block, but I get a undefined method `aws_ebs_volume' for Chef::Resource::RubyBlock  I've played around with attempting to set the method with results such as: undefin
[2013-03-06 22:11:27 -0500] freshgrilled: Any thoughts on how to approach this differently?  I'm still coming up to speed on a number of things, so excuse any ignorance.
[2013-03-06 22:13:43 -0500] knuckolls: freshgrilled: scope w/ libraries and ruby blocks gets kind of wild
[2013-03-06 22:14:07 -0500] knuckolls: i don't know if it was ever fixed, but at one point i had to make a "proxy method" in the recipe
[2013-03-06 22:14:15 -0500] knuckolls: that literally was just a new name for a library function
[2013-03-06 22:14:19 -0500] knuckolls: so i could call it in a ruby_block
[2013-03-06 22:14:28 -0500] miah: i never use ruby_block
[2013-03-06 22:15:12 -0500] knuckolls: see there's also that. ^^ you could likely write a lwrp to solve what you want solved that would be much cleaner and reusable
[2013-03-06 22:15:21 -0500] miah: yup
[2013-03-06 22:16:03 -0500] miah: or just write some ruby in a recipe and pass that to the aws_ebs_volume resource
[2013-03-06 22:17:00 -0500] miah: i think ruby_block just confuses people into thinking that they have to use it to write ruby code in a recipe
[2013-03-06 22:17:09 -0500] miah: which certainly isn't the case
[2013-03-06 22:17:49 -0500] freshgrilled: Hmmm, still coming up to speed with ruby, so I'm mostly using external recipes to do what I need with my limited ruby/bash skills to tie it all together...  I'm using the ruby_block to handle a small script that I don't want compiling early, just to attach some drives after using ebs-describe-snapshots to get info on the mount info
[2013-03-06 22:18:12 -0500] davidmz: Hello, I have installed chef using sudo chef-server-ctl reconfigure and the ubuntu package http://www.opscode.com/chef/install/ , but I am missing knife and I can't access on port 4000, what am I doing wrong?
[2013-03-06 22:18:35 -0500] penk: hmm.  vagrant is supporting or will Very Soon support aws launches?
[2013-03-06 22:18:37 -0500] rep0st: davidmz: change your knife.rb server_url to https://mychefserverisawesome.com
[2013-03-06 22:18:55 -0500] miah: freshgrilled: just write some wrapper code in a recipe that gets the data you need and passes it to the aws_ebs_volume resource.
[2013-03-06 22:19:08 -0500] miah: or write a wrapper lwrp
[2013-03-06 22:19:22 -0500] davidmz: rep0st: how do I install knife now? and why can't I access chef on port 4000 for the web interface
[2013-03-06 22:19:44 -0500] davidmz: rep0st: with the old install method I got knife for free
[2013-03-06 22:20:00 -0500] penk: there are several docs referring to port 4000 - that is old information.  chef 11 is ssl and is on the standard ssl port
[2013-03-06 22:20:04 -0500] penk: https://yourchefserver/
[2013-03-06 22:20:18 -0500] kisoku: davidmz: cheff 11 listens on https now
[2013-03-06 22:20:27 -0500] kisoku: also chef-server and chef are separate packages
[2013-03-06 22:20:31 -0500] penk: davidmz: where do you see a page still referring to port 4000?
[2013-03-06 22:20:32 -0500] kisoku: so if you want the chef-client
[2013-03-06 22:20:50 -0500] kisoku: you need to install the omnibus chef package as well
[2013-03-06 22:20:51 -0500] knuckolls: freshgrilled: miah's right, you can write ruby code in the recipe file itself, or in a light weight resource provider, which are basically for providing your own resources to your cookbook, and other cookbooks that depend on it.
[2013-03-06 22:20:51 -0500] freshgrilled: miah That's actually more or less the sum of what I"m trying to do, but I'm unsure of the best method to keep my wrapper code, which is calling a bash command to get info, to avoid compiling early and failing due to lack of external packages being available yet...
[2013-03-06 22:21:13 -0500] miah: why do you need to call bash code?
[2013-03-06 22:21:18 -0500] davidmz: I knew this from version 10, what about knife, how do I install it for chef 11?
[2013-03-06 22:21:48 -0500] rep0st: davidmz: when you install chef-server it doesn't come with knife because really the chef-server should just function as a chef-server and not have knife
[2013-03-06 22:22:14 -0500] miah: thankfully everything in aws has a handy dandy api and scripting with it isn't too bad
[2013-03-06 22:22:17 -0500] davidmz: rep0st: I understand so is there an easy way to install knife?
[2013-03-06 22:22:30 -0500] kisoku: install the chef client omnibus package
[2013-03-06 22:22:44 -0500] rep0st: download and install the chef client omnibus installer from the link you provided http://www.opscode.com/chef/install/ on a seperate machine
[2013-03-06 22:22:51 -0500] rep0st: ^ davidmz
[2013-03-06 22:22:51 -0500] penk: oooomneeeebuuuuuussss.
[2013-03-06 22:22:54 -0500] freshgrilled: I am using the amazon ec2 tools:  ebs-describe-instances among others, to pull all the tag info from existing snapshots.  I did not think that was available through existing cookbooks...
[2013-03-06 22:23:13 -0500] miah: you could add it
[2013-03-06 22:23:14 -0500] rep0st: davidmz: when you install chef-client on a seperate workstation you need to edit your knife.rb config to https://yourchefserver instead of the default value
[2013-03-06 22:23:20 -0500] miah: but iirc, tag is available in the aws cookbook
[2013-03-06 22:23:38 -0500] miah: http://aws.amazon.com/sdkforruby/
[2013-03-06 22:24:51 -0500] knuckolls: one thing i don't like is that the aws cookbook uses right_aws instead of the ruby sdk from amazon
[2013-03-06 22:24:54 -0500] miah: ya
[2013-03-06 22:25:04 -0500] miah: its on my list. but my list is scary.
[2013-03-06 22:25:09 -0500] knuckolls: mine too
[2013-03-06 22:25:14 -0500] knuckolls: someone'll get to it :D
[2013-03-06 22:25:17 -0500] miah: maybe
[2013-03-06 22:25:42 -0500] davidmz: guys, I can't access my chef using https, where do I configure bindings, I have a webserver already running on the machine, so it may have problems with that
[2013-03-06 22:26:22 -0500] hippiehacker: Nathan and I are going to give a preview of our #ChefConf talks next Tuesday at the Seattle Chef Meetup: http://t.co/SXinrvNTw6
[2013-03-06 22:26:39 -0500] heph: so, this is really weird. I have a template that has the line: host => "<%= node['logstash']['server']['es_host'] %>", and when it's evaluated, it outputs: host => "<%= node['logstash']['server']['es_host'] %>"
[2013-03-06 22:27:00 -0500] failshell: i know how to access node.roles or node.run_list. can you access the loaded cookbooks somehow?
[2013-03-06 22:27:06 -0500] heph: but the following line, cluster => "<%= node['logstash']['server']['es_cluster'] %>" outputs: cluster => "logstash"
[2013-03-06 22:27:35 -0500] heph: so the variables are being interpolated correctly other places in this erb, but just not for the host line
[2013-03-06 22:27:37 -0500] failshell: it seems the expanded run list does not include ALL the cookbooks
[2013-03-06 22:27:43 -0500] knuckolls: failshell: node.recipes i think
[2013-03-06 22:27:59 -0500] miah: heph: make sure that erb isn't being encapsulated by another?
[2013-03-06 22:28:10 -0500] knuckolls: you can also explore the node object in shef.
[2013-03-06 22:28:11 -0500] heph: it's not
[2013-03-06 22:28:12 -0500] freshgrilled: Huh.  Well, I'm skimming through the AWS cookbook and while I see ways to set tags, it does not mention reading tags.  Still, I'll dig into it more.  As to the alternatives, with the lwrp, I have moved all our servers from Rightscale to Chef in two months with no prior knowledge of chef or ruby, and I'm rather overwhelmed, picking up lwrp would take more time then I have at the moment, though I'm working toward it
[2013-03-06 22:28:27 -0500] failshell: knuckolls: that does not expand
[2013-03-06 22:28:27 -0500] miah: sometimes i write little wrapper ruby scripts to test templates
[2013-03-06 22:28:57 -0500] miah: so i dont have to deal with convergence and to make sure my syntax etc is good (tests are cool yo)
[2013-03-06 22:29:04 -0500] miah: it looks fine
[2013-03-06 22:29:12 -0500] miah: but i wonder if the => is somehow confusing things
[2013-03-06 22:29:32 -0500] knuckolls: failshell: hop on a node and run `shef -z` type recipes to go into recipes mode, you can then do (node.methods - Object.methods).sort to see a complete list of what's available to you
[2013-03-06 22:29:34 -0500] c0ff33: with the version of chef-server found at http://www.opscode.com/chef/install/ - how do you set up webui or what is the address to login to it?
[2013-03-06 22:29:39 -0500] knuckolls: i fall back on that from time to time
[2013-03-06 22:31:31 -0500] freshgrilled: An alternative question, is there a way of starting a ruby loop in a cookbook without using ruby_block that does not compile early?
[2013-03-06 22:32:29 -0500] miah: heph: you could try to change the <%= %> to <?rb ?>
[2013-03-06 22:32:33 -0500] c0ff33: I have tried ports 4000, 4040, 8080, 8000 with SSL and without SSL and i'm not having any luck. I am getting redirected to SSL and it is also causing a redirect loop at /users/login and that's making ruby take up a bunch of CPU usage
[2013-03-06 22:32:48 -0500] miah: not sure if chef messes with the supported embedded patterns at all
[2013-03-06 22:33:03 -0500] alxism: hi all, I'm having the following issue with the aws cookbook on my vagrant vm:
[2013-03-06 22:33:05 -0500] alxism: ws_elastic_lb[foo_elb] (mmz::web_elb_register line 7) had an error: NameError: Cannot find a resource for converge_by on ubuntu version 12.04
[2013-03-06 22:33:05 -0500] alxism: /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/resource_platform_map.rb:126:in `get'
[2013-03-06 22:33:05 -0500] alxism: /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/resource.rb:667:in `resource_for_platform'
[2013-03-06 22:33:05 -0500] alxism: /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/resource.rb:684:in `resource_for_node'
[2013-03-06 22:33:05 -0500] alxism: /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.12.0/bin/../lib/chef/mixin/recipe_definition_dsl_core.rb:58:in `method_missing'
[2013-03-06 22:33:05 -0500] alxism: /tmp/vagrant-chef/chef-solo-2/cookbooks/aws/providers/elastic_lb.rb:4:in `class_from_file
[2013-03-06 22:33:09 -0500] miah: and im not sure if using one type of embedded pattern will cause erubis to ignore others
[2013-03-06 22:33:13 -0500] miah: alxism: please past to gist.github.com
[2013-03-06 22:33:28 -0500] alxism: sorry
[2013-03-06 22:33:33 -0500] failshell: knuckolls: you wouldn't know if there's a list somewhere of all the possible node attributes?
[2013-03-06 22:34:05 -0500] miah: failshell: type 'ohai' on a system to get a list of all the automatic attributes
[2013-03-06 22:34:05 -0500] knuckolls: failshell: well.. do you mean all the built in chef attributes?
[2013-03-06 22:34:21 -0500] miah: other than that, attributes can be defined by cookbooks and there isn't a "standard list"
[2013-03-06 22:34:22 -0500] failshell: ok here's my problem
[2013-03-06 22:34:24 -0500] knuckolls: failshell: you can also do knife node show <node name> -l to see everything
[2013-03-06 22:34:29 -0500] failshell: i have recipe1 which includes apache2
[2013-03-06 22:34:38 -0500] failshell: apache2 doesnt get included in the expanded list
[2013-03-06 22:34:48 -0500] failshell: but i need to check if its there to apply a condition
[2013-03-06 22:34:52 -0500] miah: does it 'include' or does it 'include_recipe' ?
[2013-03-06 22:34:57 -0500] failshell: include_recipe
[2013-03-06 22:35:04 -0500] alxism: here we go: https://gist.github.com/alexism/5103780
[2013-03-06 22:35:05 -0500] c0ff33: can anyone point me to the webui documentation then? because i can't find it via google
[2013-03-06 22:35:16 -0500] miah: the webui is pointless
[2013-03-06 22:35:37 -0500] miah: alxism: you have an error: mmz::web_elb_register line 7
[2013-03-06 22:35:44 -0500] failshell: miah: what's the different between both?
[2013-03-06 22:35:57 -0500] miah: you are specifying a resource called 'converge_by' that doesnt exist
[2013-03-06 22:36:07 -0500] miah: 'include' is a ruby method to include modules/mixins
[2013-03-06 22:36:19 -0500] miah: include_recipe is a chef method to add a recipe to the runlist
[2013-03-06 22:36:25 -0500] c0ff33: @miah i agree but i would like it to work if it is installed
[2013-03-06 22:37:38 -0500] miah: alxism: if we cna see line7 of that script we might be able to help more. its certainly possible its a bug with the version of chef you're running.
[2013-03-06 22:38:11 -0500] alxism: @miah line 7 is the call to aws_elastic_lb.  I updated the gist with my recipe https://gist.github.com/alexism/5103780
[2013-03-06 22:38:11 -0500] miah: converge_by is provided by the provider class
[2013-03-06 22:38:16 -0500] miah: ok
[2013-03-06 22:38:21 -0500] miah: which version of chef are y ou running?
[2013-03-06 22:38:38 -0500] alxism: the trace indicates 10.12.0
[2013-03-06 22:39:12 -0500] miah: why such an old version?
[2013-03-06 22:40:03 -0500] alxism: no particular reason, It comes with the vagrant vm
[2013-03-06 22:40:05 -0500] c0ff33: probably becuase webui is broken on the new versions
[2013-03-06 22:40:14 -0500] alxism: I picked a precise64 here http://www.vagrantbox.es/
[2013-03-06 22:41:17 -0500] ZacharyBlank: What does: "FATAL: 1 node found, but does not have the required attribute to establish the connection. Try setting another attribute to open the connection using --attribute." mean when running knife ssh "sudo chef-client"
[2013-03-06 22:41:29 -0500] alxism: just for my understanding, the error is happening on the vm, not on my system correct?
[2013-03-06 22:41:33 -0500] miah: im thinking converge_by was added by a recent chef version
[2013-03-06 22:41:48 -0500] miah: its in 10.16.4 but its not in older 10 releases (though I didnt check all)
[2013-03-06 22:42:26 -0500] miah: yes, the error is happening on the vm running chef-client.
[2013-03-06 22:43:25 -0500] miah: the aws_elastic_lb definitely calls 'converge_by' in it, so its technically incompatible with some older versions of chef
[2013-03-06 22:43:33 -0500] alxism: what is the best place to read up on converge_by ?
[2013-03-06 22:43:45 -0500] alxism: docs.opscode.com does not mention it
[2013-03-06 22:44:06 -0500] c0ff33: yeah their documentation overall is pretty terrible
[2013-03-06 22:44:47 -0500] miah: its a internal method from the provider class
[2013-03-06 22:44:49 -0500] miah: read the chef source
[2013-03-06 22:45:10 -0500] miah: docs.opscode.com is fine, but i'd love better 'ri' support =)
[2013-03-06 22:45:58 -0500] alxism: I guess it does not matter much anyway, I'm playing with AWS Opswork and they use a fork of chef version 9
[2013-03-06 22:46:08 -0500] miah: ya. so that definitely won't work
[2013-03-06 22:46:09 -0500] alxism: no way I can use the aws cookbook
[2013-03-06 22:46:13 -0500] knuckolls: woah woah woah they forked 9
[2013-03-06 22:46:19 -0500] alxism: apparently
[2013-03-06 22:46:24 -0500] miah: yes, its a forked version of 0.9.16 iirc
[2013-03-06 22:46:31 -0500] alxism: I had another similar issue
[2013-03-06 22:46:38 -0500] knuckolls: i'm gonna have to call my guy up there at aws and give him a good lol
[2013-03-06 22:46:45 -0500] alxism: some cookbook using post-v9 apis
[2013-03-06 22:47:36 -0500] miah: its a common problem. im not sure of any cookbook that checks which version of chef its running on to enable/disable certain features/methods
[2013-03-06 22:49:23 -0500] alxism: are you familiar with converge_by and whyrun? (they seem related)
[2013-03-06 22:49:25 -0500] miah: and you can't really set a dependency in metadata that says "chef-client", ">= 10.16.1"
[2013-03-06 22:49:34 -0500] miah: nah. i havent touched why_run stuff at all
[2013-03-06 22:53:49 -0500] alxism: I upgrade the chef gem on the vm to v11.4.0. now `vagrant provision` fails saying that aws_elastic_lb cannot be found
[2013-03-06 22:54:19 -0500] miah: sounds like a vagrant configuration issue =)
[2013-03-06 22:54:43 -0500] alxism: I bet the new chef-client broke something.
[2013-03-06 22:55:10 -0500] miah: depends on how chef was installed
[2013-03-06 22:55:19 -0500] miah: i stick to the omnibus install these days
[2013-03-06 22:55:31 -0500] logfilelimit: is there a configuration to limit the log file size?
[2013-03-06 22:55:37 -0500] miah: no
[2013-03-06 22:55:47 -0500] miah: you should run something like logrotate
[2013-03-06 22:55:59 -0500] logfilelimit: nice, quick answer, thanks
[2013-03-06 22:57:25 -0500] alxism: @miah I did a gem update on the vm
[2013-03-06 22:57:53 -0500] alxism: im using the installer version of vagrant
[2013-03-06 22:58:41 -0500] miah: ya
[2013-03-06 22:58:48 -0500] miah: but how was chef originally installed on the vm
[2013-03-06 22:58:59 -0500] miah: debian package, gem, omnibus, etc?
[2013-03-06 22:59:21 -0500] alxism: i see.
[2013-03-06 22:59:48 -0500] alxism: i don't know. I could try to start from an empty vm and set up chef myself.
[2013-03-06 23:00:20 -0500] miah: ya
[2013-03-06 23:00:38 -0500] miah: or build your own with veewee
[2013-03-06 23:03:08 -0500] alxism: good advice. thx
[2013-03-06 23:03:20 -0500] alxism: on a different subject, I'm writing my first cookbooks, and I understand that there are some file-naming conventions for recipes/, esources and providers. but what about attributes?
[2013-03-06 23:03:48 -0500] alxism: do attributes files follow some conventions? or are they all loaded
[2013-03-06 23:05:23 -0500] miah: all attributes files in the attributes dir are loaded
[2013-03-06 23:05:50 -0500] miah: but it can be handy to break things into their own attributes files if you intend to use include_attributes anywhere
[2013-03-06 23:05:56 -0500] miah: but i dont use them much
[2013-03-06 23:07:24 -0500] solarce: so like, what's up with people having nicks that describe their issue? I see here and in #puppet a lot
[2013-03-06 23:08:18 -0500] Joel: any way to get chef to do the equiv of a mkdir -p ?
[2013-03-06 23:08:55 -0500] awgross: Joel: add "recursive true"
[2013-03-06 23:08:59 -0500] awgross: to your directory blocks
[2013-03-06 23:09:30 -0500] miah: solarce: web irc probably?
[2013-03-06 23:09:31 -0500] Joel: awgross: thanks! not seeing that on the doc for the directory resource oddly enough
[2013-03-06 23:10:18 -0500] awgross: weird
[2013-03-06 23:11:29 -0500] solarce: miah: i suppose that makes a sort of sense
[2013-03-06 23:16:19 -0500] gene: So I've got a opscode cookbook (daemontools) that defines a new LWRP. When I try to provision a machine, chef complains because I'm using a DSL construct that's defined by the daemontools LWRP (daemontools_service).
[2013-03-06 23:16:24 -0500] gene: How do I get chef, in a single run, to load the daemontools cookbook, process the new LWRP, then continue loading the rest of the cookbooks that use this new LWRP?
[2013-03-06 23:17:42 -0500] gene: I mean I could set my run_list to the daemontools cookbook. run chef. then change the run_list to what I actually want (to use the new LWRP) and it should work. But isn't possible in an automated fashion (changing run_lists as you go)
[2013-03-06 23:18:16 -0500] gene: I swear I remember in the chef class that there was some command to tell chef to reload itself mid run to pickup new LWRPs and stuff
[2013-03-06 23:18:20 -0500] gene: ring a bell with anyone?
[2013-03-06 23:18:39 -0500] solarce: gene: :)
[2013-03-06 23:19:37 -0500] gene: I've looked through the chef fundamentals materials that metaxis and jtimberman made but can't find what I'm vaguely remembering
[2013-03-06 23:35:35 -0500] alxism: @miah thanks again. ttyl
[2013-03-06 23:45:33 -0500] miah: alxism: np
[2013-03-06 23:55:44 -0500] gene: alright, just did a little google hangout with metaxis and I'm pretty sure I see what I'm doing wrong. Going to tweak things around to confirm and then I'll share here what I did
[2013-03-06 23:59:06 -0500] gene: ok, for anyone who's curious. Initially I didn't have the daemontools cookbook in my run_list and was instead including the default recipe from another cookbook. Including the default recipe of a cookbook doesn't help you in regards to loading LWRPs
[2013-03-06 23:59:54 -0500] gene: Having a vague notion of this, I changed how I was doing it so that I first loaded 1 cookbook which set the stuff that I needed to happen before daemontools (setting up a yum.repos.d file), but then forgot to put daemontools in the run_list directly

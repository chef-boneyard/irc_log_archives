[2013-03-11 00:22:10 -0400] rnewson: doubtless a stupid question, but is there a knife command that will tell where a given attribute on a node came from?
[2013-03-11 00:24:49 -0400] macros: rnewson: Actually that would be a very useful tool, but can't work in just knife since parts of the node object only exist at runtime and aren't persisted
[2013-03-11 00:25:10 -0400] rnewson: fair point. sure would be nice right about now.
[2013-03-11 00:25:25 -0400] macros: Yeah, precedence can be a little confusing
[2013-03-11 00:26:15 -0400] rnewson: well, it's worse.
[2013-03-11 00:26:26 -0400] rnewson: there's no match in our repo for the setting on this node.
[2013-03-11 00:26:39 -0400] macros: knife node edit and cry
[2013-03-11 00:26:43 -0400] rnewson: so, the only thing I can think of is that the git repo and the chef server settings are out of sync.
[2013-03-11 00:27:06 -0400] rnewson: which means a) someone forgot to upload something to git and b) we'll have one less engineer tomorrow when I find out which one it was.
[2013-03-11 00:27:26 -0400] macros: Don't be too harsh on them, the tools are clumsy still and easy to mess up
[2013-03-11 00:27:36 -0400] rnewson: *nod* but I'm also evil.
[2013-03-11 00:28:23 -0400] rnewson: oddly, just one node. I guess it's a manual edit then.
[2013-03-11 00:28:28 -0400] rnewson: thanks, this helped.
[2013-03-11 01:33:26 -0400] conradev: I am subclassing the `deploy` LWRP and setting my subclass as the `strategy` in my cookbook that uses the application cookbook (https://github.com/opscode-cookbooks/application). My provider and resource are straight subclasses of Deploy, and yet when I attempt to run it, `:deploy` is not in the allowed_actions of my cookbook. Any ideas?
[2013-03-11 01:39:24 -0400] conradev: (I am attempting to make the application cookbook symlink a Vagrant shared directory as opposed from using an scm provider, for local development)
[2013-03-11 01:39:42 -0400] conradev: s/from/to/
[2013-03-11 03:22:44 -0400] pnorman: I want to open a ticket against part of the results of the windows chef installer. Where would I do so?
[2013-03-11 03:59:34 -0400] halfss: java is still in chef11(erchef)?
[2013-03-11 04:17:26 -0400] spheromak: halfss: yea still has solr search
[2013-03-11 04:24:02 -0400] spheromak: that office is nuts
[2013-03-11 04:24:04 -0400] spheromak: mt
[2013-03-11 04:40:50 -0400] jondavidjohn: If I have a cookbook that has a few lwrps, how do I use them in other cookbooks? is that possible?
[2013-03-11 04:41:30 -0400] jondavidjohn: for example the database cookbook has some LWRPs to manage databases.  I am wanting to use those in my custom cookbooks.
[2013-03-11 04:44:03 -0400] knuckolls: jondavidjohn: that's a really key question. it's as simple as putting `depends "database"` in the metadata.rb of the cookbook that you're writing
[2013-03-11 04:44:52 -0400] jondavidjohn: can you depends on a per recipe basis?
[2013-03-11 04:59:14 -0400] spheromak: jondavidjohn: you just make them a dep in metadata, and the lwrp's will becmoe available
[2013-03-11 05:00:08 -0400] spheromak: theres also a reccomends
[2013-03-11 05:00:55 -0400] spheromak: you don't need to do it per-recipe the depends/recommends will make sure the cooks get on the node, and that the libs/LWRP's are parsed and made available to all, but those dependant cooks won't have their default recipe run.
[2013-03-11 05:43:27 -0400] pnorman: I want to open a ticket against part of what is installed by the windows chef installer. Where would I do so?
[2013-03-11 06:31:48 -0400] jmickle: anyone around?
[2013-03-11 06:31:57 -0400] jmickle: having an error with chef an in the middle of a crisis
[2013-03-11 06:36:57 -0400] spheromak: pnorman: tickets.opscode.com  file in chef
[2013-03-11 06:39:42 -0400] pnorman: spheromak: which components?
[2013-03-11 06:40:09 -0400] pnorman: ah, found it
[2013-03-11 06:43:16 -0400] jmickle: we updated chef with apt and are getting 500's now
[2013-03-11 06:43:22 -0400] jmickle: with http requests from knife
[2013-03-11 06:43:23 -0400] jmickle: or chef-client
[2013-03-11 06:43:26 -0400] jmickle: can't launch any server
[2013-03-11 06:44:21 -0400] jmickle: even knife uploads are causing errors
[2013-03-11 06:44:33 -0400] pnorman: http://tickets.opscode.com/browse/CHEF-3993 created, thanks
[2013-03-11 07:58:02 -0400] kesor: I am trying to use chef-rewind with runit_service, which is a lwrp. it says "Cannot find a resource matching runit_service[myname] (did you define it first?)"  anyone has any experience with this working?
[2013-03-11 08:00:43 -0400] denniswisnia: hey guys!
[2013-03-11 08:00:58 -0400] denniswisnia: how i can access an resource from another cookbook?
[2013-03-11 08:01:34 -0400] denniswisnia: had one cookbook for my site with all content like vhost and definations and want to use them in the nginx cookbook
[2013-03-11 08:02:22 -0400] kesor: denniswisnia: use attributes, in both places.
[2013-03-11 08:06:29 -0400] denniswisnia: kesor: had create an pastebin: http://pastebin.com/y4X43bHp
[2013-03-11 08:07:25 -0400] kesor: denniswisnia: in your case, the nginx_load_balancer block accepts a template parameter, so you can have your own customized template in the application cookbook.
[2013-03-11 08:07:59 -0400] denniswisnia: kesor: how?
[2013-03-11 08:08:16 -0400] kesor: denniswisnia: check the doc at https://github.com/opscode-cookbooks/application_nginx/
[2013-03-11 08:08:45 -0400] kesor: search for the word "template" in the readme there
[2013-03-11 08:09:52 -0400] denniswisnia: hm, okay.
[2013-03-11 08:17:02 -0400] denniswisnia: kesor: ah! great it works ;)
[2013-03-11 08:17:05 -0400] denniswisnia: thanks!
[2013-03-11 08:17:14 -0400] kesor: denniswisnia: glad to help
[2013-03-11 08:24:33 -0400] kisoku: kesor: did you manage to resolve your issue ?
[2013-03-11 08:24:40 -0400] kisoku: with run_service ?
[2013-03-11 08:24:41 -0400] kesor: kisoku: nope
[2013-03-11 08:24:51 -0400] kesor: not run_service, runit_service. from the runit cookbook.
[2013-03-11 08:24:51 -0400] kisoku: because I am trying to do the same thing somehwere
[2013-03-11 08:24:59 -0400] kisoku: yes runit_service
[2013-03-11 08:25:18 -0400] kisoku: I am trying the same thing but haven't quite gotten to testing that new change yet
[2013-03-11 08:25:24 -0400] kesor: kisoku: I just want to use upstart and not the hard-coded runit  it looks like I'm just going to fork the cookbook that uses it and remove it.
[2013-03-11 08:30:49 -0400] zts: runit_service is a definition, not an LWRP
[2013-03-11 08:32:06 -0400] zts: you should be able to rewind the resources it creates
[2013-03-11 08:32:52 -0400] kesor: zts: for some reason the application cookbook creates it after chef-rewind tries to do its thing
[2013-03-11 08:33:00 -0400] zts: although it seems weird to be changing runit_service to not use runit - modifying the cookbook to not insist on runit would be a better change
[2013-03-11 08:33:38 -0400] zts: oh sorry, it actually is an LWRP now
[2013-03-11 08:33:49 -0400] zts: well, a HWRP
[2013-03-11 08:33:53 -0400] kesor: zts: yes. but unfortunately jtimberman believes that runit is the de-facto standard that everyone should be using, so its hardcoded in half the cookbooks on github.com/opscode-cookbooks.
[2013-03-11 08:33:54 -0400] zts: ignore me :)
[2013-03-11 08:34:10 -0400] zts: kesor: indeed, it's miserable.  And the right thing to do is to parameterise that and push the changes upstream
[2013-03-11 08:34:39 -0400] zts: if everyone monkeypatches around it, things never get better
[2013-03-11 08:34:49 -0400] kesor: zts: very oponionated, see - http://jtimberman.housepub.org/blog/2012/12/29/process-supervision-solved-problem/
[2013-03-11 08:34:52 -0400] kisoku: I really wish they would just put runit in base chef and then make a mechanism to set a preferred service provider
[2013-03-11 08:35:13 -0400] kisoku: so you could pick your poison
[2013-03-11 08:35:49 -0400] zts: kesor: that's jtimberman's personal blog.  If you have something official from Opscode to show there's no point pushing such changes upstream, by all means link it up...
[2013-03-11 08:35:54 -0400] kesor: I want my ubuntu systems to use upstart  it works great, and its simple, and everything uses it. but its hell to make chef do what I want, such a waste of time and effort :(
[2013-03-11 08:36:06 -0400] kisoku: kesor: to each their own
[2013-03-11 08:36:17 -0400] kisoku: I detest upstart
[2013-03-11 08:36:36 -0400] kesor: the part that needs fixing is the " hell to make chef do what I want "
[2013-03-11 08:36:41 -0400] kisoku: very difficult to debug
[2013-03-11 08:37:16 -0400] kesor: kisoku: upstart has log files, and once I used it for enough time I already know the various quircks and workarounds with it.
[2013-03-11 08:38:33 -0400] kisoku: yeah. I feel the same about daemontools/runit :-P
[2013-03-11 08:38:35 -0400] spheromak: .me grumbles and says to hell with all of em
[2013-03-11 08:38:40 -0400] spheromak: ack /me !
[2013-03-11 08:38:43 -0400] kisoku: spheromak!
[2013-03-11 08:38:50 -0400] spheromak: kisoku: ohai
[2013-03-11 08:38:55 -0400] kisoku: long time no see
[2013-03-11 08:39:09 -0400] kisoku: you going to chefconf this year ?
[2013-03-11 08:39:14 -0400] spheromak: yea last few weeks i've been lurking :P
[2013-03-11 08:39:20 -0400] spheromak: Yes hopefully
[2013-03-11 08:39:27 -0400] kisoku: hope to see you there
[2013-03-11 08:39:38 -0400] spheromak: I got the Verbal OK from corp
[2013-03-11 08:39:51 -0400] spheromak: yea for sure,. Im over in your neck of the woods right now
[2013-03-11 08:40:08 -0400] kisoku: japan ?
[2013-03-11 08:40:10 -0400] spheromak: assuming your still in japan yea ?
[2013-03-11 08:40:16 -0400] kisoku: yes
[2013-03-11 08:40:17 -0400] spheromak: Im in Seoul atm
[2013-03-11 08:40:24 -0400] kisoku: yeah i heard that
[2013-03-11 08:40:30 -0400] kisoku: you've been there for a while no ?
[2013-03-11 08:40:33 -0400] spheromak: well i go back and forth
[2013-03-11 08:40:43 -0400] spheromak: this year ill be out here less
[2013-03-11 08:41:27 -0400] spheromak: anyhow  :)  back to supervision.. bah humbug
[2013-03-11 08:41:31 -0400] spheromak: s6 :P
[2013-03-11 08:42:21 -0400] kisoku: s6 ?
[2013-03-11 08:42:34 -0400] kesor: yet another daemontools
[2013-03-11 08:42:49 -0400] spheromak:   sorta not quite
[2013-03-11 08:43:09 -0400] spheromak: really I think they are all trying to solve problems that have existed for a long while.
[2013-03-11 08:43:13 -0400] kesor: whatever your poison is  its hell to use existing chef cookbooks that insist on their own.
[2013-03-11 08:43:48 -0400] spheromak: kesor: well they assume system default
[2013-03-11 08:43:53 -0400] spheromak: really its just hell
[2013-03-11 08:43:55 -0400] kesor: no, they assume runit.
[2013-03-11 08:44:00 -0400] spheromak: uh
[2013-03-11 08:44:01 -0400] spheromak: no
[2013-03-11 08:44:03 -0400] kesor: yes
[2013-03-11 08:44:09 -0400] spheromak: service assumes system
[2013-03-11 08:44:25 -0400] kesor: i'm talking about github.com/opscode-cookbooks/ not chef itself.
[2013-03-11 08:44:30 -0400] kisoku: hehehe
[2013-03-11 08:44:32 -0400] kisoku: Linking process 1 against libdbus? This is insanity.
[2013-03-11 08:44:36 -0400] kisoku: :-P
[2013-03-11 08:44:39 -0400] kisoku: my thoughts exactly
[2013-03-11 08:44:45 -0400] kisoku: http://www.skarnet.org/software/s6/why.html
[2013-03-11 08:44:48 -0400] spheromak: kisoku: lol
[2013-03-11 08:44:50 -0400] kesor: :)
[2013-03-11 08:44:52 -0400] spheromak: yea srsly
[2013-03-11 08:45:00 -0400] spheromak: lets drop kitchen since in pid1
[2013-03-11 08:45:04 -0400] spheromak: *sink
[2013-03-11 08:45:14 -0400] spheromak: casue you know segfaults on pid 1 aren't no big thing
[2013-03-11 08:45:20 -0400] spheromak: :P
[2013-03-11 08:45:24 -0400] kisoku: all we need is an xml parser and the circle will be complete
[2013-03-11 08:45:34 -0400] spheromak: thats msf
[2013-03-11 08:45:51 -0400] kisoku: no, I'm msf :-P
[2013-03-11 08:46:00 -0400] kisoku: msf ?
[2013-03-11 08:46:03 -0400] spheromak: sun
[2013-03-11 08:46:07 -0400] kesor: solaris thingy
[2013-03-11 08:46:11 -0400] kisoku: those happen to be my initials :-P
[2013-03-11 08:47:00 -0400] spheromak: Service management framework :P
[2013-03-11 08:47:18 -0400] spheromak: you never had the joy of working with it ?  should go install some opensolaris
[2013-03-11 08:47:26 -0400] kisoku: thanks but no
[2013-03-11 08:47:40 -0400] kesor: oracle solaris :)
[2013-03-11 08:47:52 -0400] kisoku: ugh
[2013-03-11 08:47:55 -0400] spheromak: srsly
[2013-03-11 08:48:01 -0400] kisoku: trying to kill all of the oracle shit around me
[2013-03-11 08:48:05 -0400] kisoku: kill it with fire
[2013-03-11 08:48:21 -0400] kisoku: so much hate for that company right now :-P
[2013-03-11 08:48:23 -0400] spheromak: kesor: yea re: opscode cooks.  make a PR :)
[2013-03-11 08:48:45 -0400] spheromak: i mean they are opscodes cooks. originally they were running their infra. so they have their opinions
[2013-03-11 08:48:58 -0400] kesor: spheromak: right, a PR, a ticket, a signature of my will and all earthly possessions to go to opscode, etc ...
[2013-03-11 08:49:12 -0400] spheromak: kesor: are you bitching about the CLA ?
[2013-03-11 08:49:22 -0400] kesor: yeah. even though I already signed it.
[2013-03-11 08:49:23 -0400] spheromak: process isn't that bad tbh
[2013-03-11 08:49:35 -0400] spheromak: I did it back when we had to )gasp_ fax shit
[2013-03-11 08:49:42 -0400] kesor: I just dont like the idea 
[2013-03-11 08:49:49 -0400] spheromak: stupid fingers. i need more coffee
[2013-03-11 08:50:07 -0400] kesor: when I send a patch for the linux kernel I don't need to sign any silly clas.
[2013-03-11 08:50:14 -0400] spheromak: it makes sense to me.
[2013-03-11 08:51:46 -0400] spheromak: http://www.opscode.com/blog/2009/08/11/why-we-chose-the-apache-license/
[2013-03-11 08:51:50 -0400] spheromak: if you hadn't seen that
[2013-03-11 09:11:57 -0400] spheromak: kisoku: is there chef conf and chef summit ? or just conf now. I didn't get to do anything last year
[2013-03-11 09:12:10 -0400] kisoku: there's both
[2013-03-11 09:12:20 -0400] kisoku: they are very different
[2013-03-11 09:12:24 -0400] spheromak: no info on whne summit is this year
[2013-03-11 09:12:30 -0400] kisoku: summit is like what we attended
[2013-03-11 09:12:34 -0400] spheromak: yea i liked the first sumit.. didn't get to go last year
[2013-03-11 09:12:42 -0400] spheromak: *summit.
[2013-03-11 09:12:53 -0400] kisoku: last year's was similar
[2013-03-11 09:13:08 -0400] spheromak: working out the triplicate forms i have to file in order to get teh company to pay my way :D
[2013-03-11 09:13:15 -0400] kisoku: I didn't take away as much as the first year though
[2013-03-11 09:59:34 -0400] ShawnMcCool: hello everyone, loving my hosted chef setup. i have a question about the best-practices approach to this situation. I want to have (in my vagrantfile) 1-2 bash commands that run once my server is fully provisioned. these tell my server-side MVC framework to run database migrations. What's the right approach to manually running shell commands with chef?
[2013-03-11 10:03:03 -0400] kesor: ShawnMcCool: why not use a vagrant shell provisioner?
[2013-03-11 10:03:19 -0400] ShawnMcCool: *google*
[2013-03-11 10:04:03 -0400] kesor: ShawnMcCool: but chef does have "exec" which you can use to just run commands
[2013-03-11 10:04:22 -0400] ShawnMcCool: that looks perfect
[2013-03-11 10:04:23 -0400] ShawnMcCool: thank you
[2013-03-11 10:12:16 -0400] hikeit: kisoku / spheromak: what is chef summit like vs chef conf? i'm still trying to get my company to pay my way to conf, though the schedule didn't look all that interesting to me
[2013-03-11 10:13:58 -0400] spheromak: hikeit: i can only speak to summit, it was an unconf and It was verry good IMO
[2013-03-11 10:14:48 -0400] spheromak: i.e. people just ad-hoc had talks or presos. and you just went where things seemed to interest you. the sessions varried from typical preso to brainstorm to hackfest
[2013-03-11 10:15:20 -0400] hikeit: sounds much less dull :)
[2013-03-11 10:15:44 -0400] hikeit: also happens in cali?
[2013-03-11 10:15:47 -0400] spheromak: i had a good time :) only prob that first one was no name tags :)
[2013-03-11 10:16:33 -0400] hikeit: ooh it was in seattle.
[2013-03-11 10:17:01 -0400] spheromak: yea sorry my food just arrived. yea was in seattle.
[2013-03-11 10:17:50 -0400] hikeit: hmmm food sounds good, i think i'll go find some too.
[2013-03-11 10:22:51 -0400] mixandgo: is there a way to have different settings (a few variables) for different environments with chef-solo ? or how else would I be able to configure different environments ?
[2013-03-11 10:24:42 -0400] spheromak: theres a pull req that should get in the next feature release
[2013-03-11 10:24:56 -0400] spheromak: that should add environemnt support to chef-solo
[2013-03-11 10:25:19 -0400] spheromak: http://tickets.opscode.com/browse/CHEF-3356
[2013-03-11 10:25:35 -0400] spheromak: other than that you can manage the nodes json data you pass to the chef-solo run with -j
[2013-03-11 10:25:41 -0400] zts: hah, I hadn't noticed the schedule was up for chefconf
[2013-03-11 10:26:12 -0400] zts: nice of them to tell the rest of the speakers their submissions weren't accepted
[2013-03-11 10:26:30 -0400] spheromak: mixandgo: another possible way is to use a env bag, and refrence that in some helper/base recipe in your run_list and have it merge attribs from a bag item
[2013-03-11 10:27:15 -0400] hikeit: zts: yeah they must have just posted it or something, i was looking last week and it was pretty barren. actually might be worth going now
[2013-03-11 10:27:45 -0400] mixandgo: spheromak: I guess for new the easier way would be to create a separate node.json for each env I need...
[2013-03-11 10:27:48 -0400] hikeit: agreed though, would've been nice to let people know before posting that they weren't accepted
[2013-03-11 10:27:54 -0400] spheromak: mixandgo: ya
[2013-03-11 10:28:05 -0400] mixandgo: thank you, I'll try that
[2013-03-11 10:30:14 -0400] zts: hikeit: yeah, bit poor, but so it goes.  I'll just have to propose my talk in the open space :)
[2013-03-11 10:30:41 -0400] hikeit: the unconf time on friday you mean?
[2013-03-11 10:32:17 -0400] zts: one track is unconf for both thrursday and friday
[2013-03-11 10:32:50 -0400] zts: although granted, looks like Thursday is only a half a day because we all desperately want to suffer through that guy from Forrester not getting devops, again
[2013-03-11 10:33:13 -0400] hikeit: ah, so it is.
[2013-03-11 10:33:44 -0400] hikeit: i wonder if there'll be any unofficial unconf happening during some of those keynotes
[2013-03-11 10:35:18 -0400] zts: there's always the hallway track :)
[2013-03-11 10:40:39 -0400] spheromak: sometimes thats the best one :)
[2013-03-11 11:19:09 -0400] maruq: hi chefs
[2013-03-11 11:23:15 -0400] maruq: I'm trying to go through and debugger some rather crazy recipes just wondering on the best way to debug in no-op mode
[2013-03-11 11:23:15 -0400] maruq: would you use shef or why-run?
[2013-03-11 11:23:15 -0400] maruq: is it possible to combine both?
[2013-03-11 11:25:23 -0400] gyre007: is there any way how I can figure out run list of a server after it was removed from the chef server ? basically it's an old server which was part of an old infrastructure and we don't use it any more , but I'd like to know what is its runlist
[2013-03-11 11:25:35 -0400] gyre007: must be somewhere hiding on the server itself im guessing...
[2013-03-11 11:26:28 -0400] gyre007: oh ..got it
[2013-03-11 11:27:18 -0400] maruq: gyre007: the log would probably tell you
[2013-03-11 11:27:29 -0400] gyre007: yeah
[2013-03-11 11:27:31 -0400] maruq: and I think also client.rb
[2013-03-11 11:27:46 -0400] maruq: depending on how it gets it's run_list
[2013-03-11 11:28:21 -0400] gyre007: btw I have this really weird problem haha...when I run knife racksapce server create from iterm it bootstraps 11.4...when I run it from Apple terminal it bootstraps 10.8.2 :-D
[2013-03-11 11:28:25 -0400] gyre007: this is no joke
[2013-03-11 11:28:30 -0400] gyre007: hah...anyone ideas ?
[2013-03-11 11:28:39 -0400] gyre007: im totally puzzled...been puzzled for a while...
[2013-03-11 11:28:46 -0400] spheromak: maruq: i prefer shef, and on occasion i use pry  to debug recipes
[2013-03-11 11:28:56 -0400] spheromak: tho you can breakpoint with shef
[2013-03-11 11:29:29 -0400] spheromak: gyre007: something with your profile ?
[2013-03-11 11:29:32 -0400] maruq: spheromak: got an example of the pry stuff? are you just loading all the libraries?
[2013-03-11 11:29:38 -0400] spheromak: you running zsh / bash in one and not the other
[2013-03-11 11:29:51 -0400] gyre007: spheromak: yeah...thats what I thought...but im using bash on both terminals
[2013-03-11 11:29:57 -0400] spheromak: https://gist.github.com/bryanwb/2225015
[2013-03-11 11:29:59 -0400] gyre007: and it should be reading bash profile
[2013-03-11 11:30:14 -0400] spheromak: should be would check out env vars depending on your chef config
[2013-03-11 11:30:19 -0400] spheromak: also if you have ./.chef/
[2013-03-11 11:30:21 -0400] maruq: gure007: could it be gem_paths? perhaps using different versions of knife-rackspace gem
[2013-03-11 11:30:22 -0400] spheromak: in one an not the other.
[2013-03-11 11:30:28 -0400] spheromak: possible as well
[2013-03-11 11:30:59 -0400] spheromak: but i would guess the most likely is something in env (like gem path ruby version something liek that) or knife.rb  pathing
[2013-03-11 11:31:06 -0400] maruq: rvm always catches me out when jumping around chef repos
[2013-03-11 11:31:22 -0400] spheromak: maruq: https://gist.github.com/bryanwb/2225015
[2013-03-11 11:31:36 -0400] gyre007: maruq: Im using omnibus on my workstation...
[2013-03-11 11:31:53 -0400] gyre007: maybe thats totally messed up...
[2013-03-11 11:33:10 -0400] maruq: gyre007: hmm not sure. I know omnibus sets a chef version in the script, which I'm pretty sure can be overridden.
[2013-03-11 11:33:27 -0400] maruq: spheromak: thanks ;)
[2013-03-11 11:33:37 -0400] gyre007: but why is it working in Apple terminal correctly and in Iterm it's messing up hah
[2013-03-11 11:33:40 -0400] gyre007: really strange :)
[2013-03-11 11:34:05 -0400] maruq: gyre007: I'm using both terminals and launching against ec2. seems to work for me.
[2013-03-11 11:34:19 -0400] fabio: hello, im trying to install postfix cookbook in vagrant, but the postinstall ncurses screen makes chef to fail, anyone knows this issue?
[2013-03-11 11:34:24 -0400] maruq: I'm going to grab some lunch, but can look into my setup and figure out when I get back
[2013-03-11 11:34:27 -0400] hughsaunders: gyre007: write env from each out to files, then diff them.
[2013-03-11 11:34:42 -0400] gyre007: yeah might just do that
[2013-03-11 11:35:36 -0400] fabio: sorry is about my hostname
[2013-03-11 11:36:57 -0400] gyre007: hughsaunders: the only difference seems to be that apple terminals environment sets TERM_PROG version and some session Ids...the rest is the same..hah...mystery
[2013-03-11 11:37:52 -0400] gyre007: I'll turn on verbose logging in knife...but I'm feeling to lazy atm...
[2013-03-11 11:41:44 -0400] hughsaunders: gyre007: odd
[2013-03-11 11:41:51 -0400] gyre007: yup
[2013-03-11 11:42:09 -0400] gyre007: unless iterm is messing up some other stuff...
[2013-03-11 11:42:12 -0400] gyre007: who knows
[2013-03-11 12:35:28 -0400] maruq: gyre007: just checked my stuff, looks like I'm passing things in via cli to the rubygems stuff
[2013-03-11 12:35:47 -0400] maruq: -d ubuntu12.04-gems --bootstrap-version 10.22.0
[2013-03-11 12:36:09 -0400] maruq: the -d tells it to use gems instead of omnibus
[2013-03-11 12:37:33 -0400] spheromak: different chef  version
[2013-03-11 12:37:50 -0400] spheromak: default swapped on 10.16 ? IIRC
[2013-03-11 12:38:09 -0400] spheromak: you have something in your .chef or ~/.chef/knife.rb ?
[2013-03-11 12:38:40 -0400] gyre007: maruq: cheers...i'll give it a shot later in the afternoon
[2013-03-11 12:38:56 -0400] gyre007: I'm loving database LWRPs
[2013-03-11 12:39:05 -0400] spheromak: oh sorry maruq thought you were still debuggin your iterm/term.app thing
[2013-03-11 12:39:29 -0400] spheromak: i guess that was gyre007
[2013-03-11 12:39:33 -0400] gyre007: spheromak: hah I was but then I had to move on to something else...didnt want to spend too much time on it
[2013-03-11 13:29:02 -0400] freezey: anyway to force chef_environment in a role file?
[2013-03-11 13:30:03 -0400] viraptor: hi all, how do I change a Mash into a simple ruby hash? even when I do "h = some_mash.to_hash" unknown keys on "h" return a value "data_bag_item["original_bag", nil, {}]" instead of nil
[2013-03-11 13:35:13 -0400] laurent\: viraptor: Hash[some_mash] ?
[2013-03-11 13:35:43 -0400] viraptor: laurent\: that seems to work, thanks
[2013-03-11 14:08:02 -0400] seph: I have a problem I'm not sure how to solve. I'd like my nodes to create ssh keys, and then save them somewhere (attributes? data bags?) for future use. I'm trying to create the key, then save it to an attribute, but the attribute set happens before the execute, and results in a very early ENOENT. https://gist.github.com/directionless/5134452 is the snippet I'm using
[2013-03-11 14:08:49 -0400] seph: I'm amenable to other ways of approaching this problem, though it looks like nodes can't write to data bags. So I'm not sure what other than attributes would work.
[2013-03-11 14:16:55 -0400] ivey: seph: what if you put the set into a ruby block attribute?
[2013-03-11 14:17:00 -0400] ivey: er resource
[2013-03-11 14:17:11 -0400] ivey: sorry not attribute, resource, it's too early
[2013-03-11 14:17:52 -0400] ivey: the set is happening at compile time. so you either need to delay the set or make the ssh keygen happen at compile
[2013-03-11 14:17:55 -0400] ivey: http://docs.opscode.com/resource_common_compile.html
[2013-03-11 14:18:42 -0400] dotslash: I have a recipe that uses some custom code to download a file adn then tries to install it. However, I get a compilation error saying it can't find the file in the section that installs it...it can't find it because it doesn't execute the download part. Any idea why? The download code works to download the file when in a recipe by itself.
[2013-03-11 14:20:46 -0400] dotslash: Am I misunderstanding something?
[2013-03-11 14:28:44 -0400] kesor: Can someone please explain why uploading cookbooks to my local chef server is taking so much time? I got a server in a vagrant host, and it takes 30+ seconds to upload each cookbook  how can I make it fast? :(
[2013-03-11 14:28:47 -0400] seph: ivey: Yeah, I though it was probably something like ordering. But I'm not sure how to effect that. I tried delaying the set by putting it into an if File.exists block, but that didn't work.
[2013-03-11 14:29:16 -0400] seph: You're suggesting pushing the ssh-keygen earlier? I'm also wondering if I can cram this all into an LWRP if that will solve it
[2013-03-11 14:30:16 -0400] kesor: seph: you can store the generated keys in the node attributes, not databags;
[2013-03-11 14:30:54 -0400] agoddard: seph have a look at this http://fnichol.github.com/chef-user/
[2013-03-11 14:33:30 -0400] agoddard: dotslash can you use the remote_file resource instead of the custom code? http://docs.opscode.com/chef/resources.html#remote-file otherwise, is the download happening in a ruby_block?
[2013-03-11 14:33:40 -0400] seph: agoddard: I'm not sure what I should see in that url. Creating the ssh keys is the easy part, it's the saving that's kind of ugly
[2013-03-11 14:39:17 -0400] dotslash: agoddard: I have created a nexus provider. Yes it is in a block. I couldn't seem to find a way to get remote_file resource to work with self signed https and authentication.
[2013-03-11 14:41:35 -0400] nvbasd: is there an easy way to do a diff between your local git repo, and the content of a chef server?
[2013-03-11 14:42:14 -0400] gchristensen: knife diff
[2013-03-11 14:42:16 -0400] agoddard: dotslash can you try subscribing the install to the download, or notifying the install from the download?
[2013-03-11 14:43:08 -0400] kesor: nvbasd: also checkout the health_inspector gem
[2013-03-11 14:44:10 -0400] nvbasd: cool thanks :)
[2013-03-11 14:45:33 -0400] seubert: Is there any way to do a :sync action on just a couple directories in a subversion repo? I don't want to checkout the whole thing or update the whole thing, just two directories.
[2013-03-11 14:46:18 -0400] agoddard: seph I guess you could rescue the ENOENT exception, and it will succeed on the second run, or use an ohai plugin to grab the contents of the ssh keys? We do wrote an ohai plugin but it's been like that for years, not sure it's still the best way
[2013-03-11 14:46:31 -0400] seubert: I can do this manually with ``svn co --non-recursive <repo_root> <destination>`` then ``svn update <repo_root>/<desired_subdirectory>`` for each subdirectory I want
[2013-03-11 14:47:00 -0400] seph: agoddard: I'm currently trying to shift the key creation to the start of the run. (As others suggested)
[2013-03-11 14:47:01 -0400] seubert: But I'd like to avoid using those actual commands in chef if possible
[2013-03-11 14:53:24 -0400] seph: FTR shifting the execute ssh-keygen to the start worked fine.
[2013-03-11 14:55:28 -0400] agoddard: seph nice, can you gist the working solution?
[2013-03-11 15:00:06 -0400] seph: agoddard: sure!  I've updated https://gist.github.com/directionless/5134452
[2013-03-11 15:02:01 -0400] awgross: anyone have an idea why the remote_file resource would be failing when trying to find a file inside the cookbook?
[2013-03-11 15:02:06 -0400] falcor84: hi guys, I've installed omnitruck11.0.6-1 and when trying to upload cookbooks got "501 Not Implemented This method may not be used", uploading roles works ok. Any ideas how to debug?
[2013-03-11 15:02:11 -0400] awgross: it seems to be acting like "cookbook_file"
[2013-03-11 15:03:43 -0400] agoddard: seph nice one, I think the
[2013-03-11 15:04:16 -0400] agoddard: seph nice one I think the File.read is (was) compiled first, I'm not sure the node.set is run first always, but I might be wrong
[2013-03-11 15:04:29 -0400] falcor84: oh, I think my client's too old
[2013-03-11 15:04:52 -0400] seph: I'm not sure? My error was clearly coming from the File.read, so maybe it was just that. Either way, shifting the ssh earlier fixes it. I guess I'll update the comment to be more clear
[2013-03-11 15:11:18 -0400] falcor84: nope, still get the error with 11.4.0 client
[2013-03-11 15:16:19 -0400] awgross: nevermind, figured out my problem.  Turns out the variable i was passing to source in remote_file was empty, so it was using the name attribute, which wasnt a url, which caused it to try to find it as a cookbook file
[2013-03-11 15:16:20 -0400] awgross: fun
[2013-03-11 15:18:09 -0400] awgross: hey btm_ and/or jtimberman when do knife extension pull requests get code reviewed
[2013-03-11 15:20:19 -0400] smdahlen: question: if I define a default attribute in my cookbook does it mask the same default attribute in a cookbook that mine depends on?
[2013-03-11 15:22:42 -0400] test___: Hello all.  I'm trying to run chef as a service on a client 2k8 windows server.  Service throws the following: NameError: undefined local variable or method `run_chef_client' for #<Chef::Application::WindowsService:0x4282698>
[2013-03-11 15:22:54 -0400] test___: chef version 11.4.0
[2013-03-11 15:22:57 -0400] awgross: smdahlen: its a mostly determined by which one gets loaded last.  Best to use override if you can
[2013-03-11 15:23:35 -0400] smdahlen: awgross: thanks
[2013-03-11 15:28:17 -0400] ssd7: Ohai Chefs
[2013-03-11 15:28:24 -0400] awgross: hey
[2013-03-11 15:28:30 -0400] falcor84: hi
[2013-03-11 15:28:36 -0400] rep0st: ohai
[2013-03-11 15:30:16 -0400] ssd7: awgross: Which pull request in particular are you intersted in.
[2013-03-11 15:30:28 -0400] rep0st: smdahlen: from what i remember. It depends on what gets run last as awgross mentioned. I was just reading through the new docs.opscode.com on attribute precedence and they suggest putting everything into a default attribute to utilize overrides a bit more.
[2013-03-11 15:30:35 -0400] ssd7: awgross: It was my hope to bring up some of the active KNIFE_EC2 tickets up in code review today.
[2013-03-11 15:30:42 -0400] awgross: i have one open for Knife-ec2 regarding VPC startup time
[2013-03-11 15:30:44 -0400] rep0st: smdahlen: check this out. http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2013-03-11 15:30:45 -0400] awgross: haha perfect
[2013-03-11 15:31:22 -0400] awgross: ssd7: http://tickets.opscode.com/browse/KNIFE-241
[2013-03-11 15:31:29 -0400] Guest89020: hey, could anyone explain how to search for something like this: "knife search node 'recipe:nagios::server'". It works if i search just for "recipe:nagios", but not "recipe:nagios::server". Why? What's the right way of doing it?
[2013-03-11 15:31:49 -0400] awgross: Guest89020: try escaping the second set of :
[2013-03-11 15:32:29 -0400] Guest89020: thanks awgross, that worked
[2013-03-11 15:49:15 -0400] test___: Anyone know of any breaks on windows services from 10.16 to 11.4?
[2013-03-11 16:04:38 -0400] AckZ: are the chef packages in the apt repository going to be updated past 10.18?
[2013-03-11 16:05:03 -0400] test___: I'm guessing this is why I can't run as a service in windows: http://tickets.opscode.com/browse/CHEF-3690
[2013-03-11 16:41:41 -0400] petecheslock: test___ I ran into similar issues on windows, chef client as a service was always a bit troublesome - i had much better luck running as a scheduled task instead
[2013-03-11 16:41:53 -0400] petecheslock: creating the scheduled tast on bootstrap and letting it run every 30min
[2013-03-11 16:42:11 -0400] test___: petecheslock: thanks, was just setting that up as well
[2013-03-11 16:42:38 -0400] petecheslock: imho - i think you'll have less issues and much more success with schedule task of chef-client.  the windows task resource is quite good
[2013-03-11 16:53:31 -0400] drrk: is it possible to prevent uploading of a cookbook with a version that is <= a version that already exists, whislt still allowing newversions to be uploaded?
[2013-03-11 16:54:25 -0400] awgross: drrk: check out the freeze option
[2013-03-11 16:55:21 -0400] drrk: thanks
[2013-03-11 16:57:25 -0400] senor: hiya folks, I have a node with an outdated ohai time (3 hours) but chef-client is running successfully. Any thoughts on how to diagnose?
[2013-03-11 17:16:35 -0400] judd7: we can set data bag contents in recipes, right?
[2013-03-11 17:20:05 -0400] benner: senor: look ant chef-client log. I think there will be some exception in run_list processing.
[2013-03-11 17:20:14 -0400] benner: *look at
[2013-03-11 17:27:17 -0400] timsmith: Anyone have any advice on tracking down runaway chef-client memory.  Out of the blue my nodes are going nuts.  They're leaking to 2GB+ and hosing the systems
[2013-03-11 17:28:43 -0400] kesor: when I want to include_recipe from another cookbook, and the attributes defined in that cookbook -- can I do it by adding attributes with the same name in my own cookbook/attributes/detaulf.rb ?   it doesn't seem to work, and I feel lost.
[2013-03-11 17:29:22 -0400] kesor: I mean I want to override the attributes of that cookbook with my own
[2013-03-11 17:29:50 -0400] gleam: use override[ instead of default[
[2013-03-11 17:29:59 -0400] kesor: in my attributes/default.rb file?
[2013-03-11 17:30:02 -0400] gleam: sure
[2013-03-11 17:30:06 -0400] kesor: ok. i'll try.
[2013-03-11 17:30:07 -0400] gleam: or in your recipe itself, either one works
[2013-03-11 17:33:01 -0400] kesor: gleam: what if I have in the other external cookbook attributes/default.rb file something like --    default["name"] = "x"; default["path"] = "/tmp/#{node[:name]}"    -- will that get overriden as well? since that is one of my problems.
[2013-03-11 17:35:14 -0400] kesor: hmm.. looks better, will wait for the run to end though.
[2013-03-11 17:35:45 -0400] queso: Could someone please explain in layman's terms what an environment is for?  Is a node "in" an environment?  Are data bags specific "to" an environment?  Or does an environment only exist for a cookbook to see and modify attributes?  Or... ?
[2013-03-11 17:35:56 -0400] dyer: Hey guys, question for you.. I am trying to run foodcritic on my ci server and I cant seem to satisfy its cookbook_path requirement if I pass in any arguments
[2013-03-11 17:36:07 -0400] dyer: [ec2-user@jenkins64 Prism-Chef]$ bundle exec foodcritic -f correctness /home/ec2-user/workspace
[2013-03-11 17:36:08 -0400] dyer: foodcritic [cookbook_path]
[2013-03-11 17:36:23 -0400] dyer: but "bundle exec foodcritic ." works fine
[2013-03-11 17:36:36 -0400] dyer: Any idea whats up w/ that ?
[2013-03-11 17:37:05 -0400] kesor: queso: environment filters the cookbooks you have uploaded to your server so that nodes in that environment will only use the ones defined for the environment, and will not see the other ones. it can also add attributes that are specific to that environment and apply to all nodes that use it.
[2013-03-11 17:37:11 -0400] doomviking: queso: I use environments to separate dev, staging, prod. dev nodes often need different settings / packages / etc.
[2013-03-11 17:37:43 -0400] queso: kesor, doomviking: Thanks, guys.
[2013-03-11 17:39:40 -0400] ankits: hello
[2013-03-11 17:40:11 -0400] ankits: i am getting a strange error while running chef-client on ubuntu 12.10
[2013-03-11 17:40:26 -0400] ankits: the client just gets killed without any useful error message
[2013-03-11 17:40:32 -0400] queso: kesor: So there must be a way to specify which environment a cookbook is being uploaded to, then?
[2013-03-11 17:40:40 -0400] ankits: C:/vagrant/vagrant/bin//../embedded/../embedded/gems/bin/vagrant:23:in `<main>'  INFO interface: error: The following SSH command responded with a non-zero exit  status. Vagrant assumes that this means the command failed!  chef-client -c /tmp/vagrant-chef-1/client.rb -j /tmp/vagrant-chef-1/dna.json The following SSH command responded with a non-zero exit status. Vagrant assumes that this means the command failed!  chef-client -c /tmp/
[2013-03-11 17:41:16 -0400] ankits: the funny things is that I am manually able to execute the .sh file after I loginto the machine
[2013-03-11 17:41:27 -0400] kesor: queso: yes, you do it as an argument to "knife cookbook upload". you can also edit an environment with "knife environment edit some_env_name"
[2013-03-11 17:41:38 -0400] kesor: queso: the usual knife commands really
[2013-03-11 17:41:44 -0400] yfeldblum: queso, environments let you divide your set of nodes into a set of disjoint subsets based on your particular chosen parameter
[2013-03-11 17:42:05 -0400] kesor: yfeldblum: what are those words that you used? :)
[2013-03-11 17:42:08 -0400] yfeldblum: queso, e.g., by region, by datacenter, etc
[2013-03-11 17:42:46 -0400] queso: Great, that makes sense.
[2013-03-11 17:43:11 -0400] yfeldblum: queso, a node is always in exactly one environment, never zero and never two
[2013-03-11 17:43:18 -0400] yfeldblum: queso, unlike roles
[2013-03-11 17:43:26 -0400] queso: yfeldblum: Right, okay.
[2013-03-11 17:43:38 -0400] yfeldblum: queso, nodes offer some similar features as roles, such as default/override attributes
[2013-03-11 17:43:40 -0400] queso: Anything special about how databags are treated?  Are databags "global" like roles?
[2013-03-11 17:43:48 -0400] yfeldblum: queso, everything is global
[2013-03-11 17:44:03 -0400] yfeldblum: queso, nodes, clients, data-bags, data-bag items, roles, and environments are all global
[2013-03-11 17:44:05 -0400] queso: yfeldblum: Except nodes
[2013-03-11 17:44:21 -0400] kesor: nodes are also global, only they have 1 unique environment for each one.
[2013-03-11 17:44:46 -0400] yfeldblum: queso, nodes are global; the environment is just an extra string attached to the node metadata
[2013-03-11 17:44:55 -0400] queso: Ah, okay.
[2013-03-11 17:45:03 -0400] queso: I'm sure it will make sense when I get into it.
[2013-03-11 17:46:02 -0400] test___: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2013-03-11 17:46:05 -0400] yfeldblum: queso, there is *no isolation* at all; if you want isolation, you need a multitenant chef-server like private-chef or hosted-chef that has isolated organizations
[2013-03-11 17:47:26 -0400] queso: yfeldblum: Got it, thank you!
[2013-03-11 18:14:13 -0400] jfl0wers: hello
[2013-03-11 18:14:26 -0400] jfl0wers: I must be missing something
[2013-03-11 18:14:54 -0400] jfl0wers: when  I use this installer: https://opscode-omnitruck-release.s3.amazonaws.com/mac_os_x/10.7/x86_64/chef-10.14.4_2.mac_os_x.10.7.2.sh
[2013-03-11 18:15:23 -0400] jfl0wers: then run the command: /opt/chef/bin/chef-solo -v
[2013-03-11 18:15:36 -0400] jfl0wers: I get: Chef: 10.16.2
[2013-03-11 18:16:56 -0400] jfl0wers: I already had chef 10.16.2 installed on this machine in rvm
[2013-03-11 18:17:15 -0400] jfl0wers: it seem that is the chef-solo that is responding
[2013-03-11 18:17:27 -0400] jfl0wers: as that is the version I have installed into rvm
[2013-03-11 18:18:48 -0400] Litex: Anybody out there using thor-scmversion to do version bumps at the end of a successful CI build on a cookbook?  (Or some other mechanism?)
[2013-03-11 18:21:32 -0400] miah: bjensen: ya. so the readme is a bit out of date. its all been moved to a lwrp now. take a look at using that.
[2013-03-11 18:21:56 -0400] bjensen: lwrp?
[2013-03-11 18:22:08 -0400] miah: light weight resource provider
[2013-03-11 18:24:22 -0400] ivey: Litex:
[2013-03-11 18:24:23 -0400] ivey: I am
[2013-03-11 18:24:50 -0400] bjensen: miah: no idea what that is mate :p
[2013-03-11 18:25:36 -0400] Litex: ivey:  I would expect so.  :)
[2013-03-11 18:25:41 -0400] ivey: Litex: question about it?
[2013-03-11 18:25:45 -0400] Litex: version          IO.read(File.join(File.dirname(__FILE__), 'VERSION')) rescue '0.0.1'
[2013-03-11 18:25:50 -0400] ivey: yeah that's wrong
[2013-03-11 18:25:54 -0400] ivey: we were being stupid
[2013-03-11 18:25:56 -0400] Litex: What's the best way to handle that?
[2013-03-11 18:26:23 -0400] ivey: version          lambda { IO.read(File.join(File.dirname(__FILE__), 'VERSION')) rescue '0.0.1' }.call
[2013-03-11 18:26:28 -0400] ivey: is the best we've come up with
[2013-03-11 18:26:37 -0400] ivey: improvements welcomed
[2013-03-11 18:27:20 -0400] Litex: ok, awesome.
[2013-03-11 18:27:49 -0400] Litex: Will keep playing around.  Thanks much.
[2013-03-11 18:28:10 -0400] ivey: be sure and use bump auto. the auto stuff is pretty cool
[2013-03-11 18:29:09 -0400] wdpro_kevin: anyone have success using chef-workflow? Having a time even getting the chef-workflow-example to work.
[2013-03-11 18:30:09 -0400] Litex: Very cool.
[2013-03-11 18:36:21 -0400] miah: bjensen: http://docs.opscode.com/lwrp.html
[2013-03-11 18:38:28 -0400] freezey: anyway to override the node.chef_environment in a role file?
[2013-03-11 18:42:15 -0400] miah: you can't override chef_environment its a node attribute.
[2013-03-11 18:42:33 -0400] miah: you can modify the node and change its environment.
[2013-03-11 18:42:34 -0400] freezey: miah: ah
[2013-03-11 18:42:40 -0400] freezey: what about in chef solo?
[2013-03-11 18:42:46 -0400] miah: you can specify the environment
[2013-03-11 18:42:47 -0400] freezey: anyway to force an environment?
[2013-03-11 18:42:54 -0400] freezey: ok
[2013-03-11 18:42:55 -0400] freezey: how so
[2013-03-11 18:43:09 -0400] miah: through vagrant =)
[2013-03-11 18:43:14 -0400] freezey: ahh
[2013-03-11 18:43:15 -0400] freezey: chef.json?
[2013-03-11 18:43:17 -0400] miah: ya
[2013-03-11 18:43:18 -0400] miah: iirc
[2013-03-11 18:43:22 -0400] freezey: gotcha
[2013-03-11 18:44:12 -0400] miah: http://docs-v1.vagrantup.com/v1/docs/provisioners/chef_solo.html
[2013-03-11 18:44:16 -0400] freezey: yep
[2013-03-11 18:44:17 -0400] freezey: just saw that
[2013-03-11 18:44:17 -0400] freezey: lol
[2013-03-11 18:44:23 -0400] miah: cool
[2013-03-11 18:44:56 -0400] freezey: thanks
[2013-03-11 18:47:33 -0400] geekbri: ohhh, can't wait for 1.1.0
[2013-03-11 18:47:54 -0400] miah: 1.1.0 of what?
[2013-03-11 18:48:22 -0400] geekbri: vagrant
[2013-03-11 18:48:27 -0400] miah: wdpro_kevin: probably best posting a issue to chef-workflow or mailing the chef ml, or bugging erikh.
[2013-03-11 18:48:30 -0400] geekbri: isn't that the version that will support vmware, ec2, and etc etc
[2013-03-11 18:48:36 -0400] miah: not sure many people have started digging into it yet
[2013-03-11 18:48:50 -0400] miah: geekbri: ah ya i guess. haven't been following it =)
[2013-03-11 18:48:59 -0400] geekbri: miah: it should be a big / exciting release ;)
[2013-03-11 18:49:06 -0400] geekbri: surely i meant :) not ;)
[2013-03-11 18:51:14 -0400] freezey: men doesnt do it
[2013-03-11 18:53:38 -0400] Litex: ivey:  version:bump auto == awesome.
[2013-03-11 18:54:24 -0400] Litex: No more committing metadata.rb bumps by hand!   I hadn't even thought of using tags.  (I'm a relative n00b to the dev-side of this fun)
[2013-03-11 18:57:31 -0400] c0ff33: is there any way to decrease chef's memory footprint?
[2013-03-11 18:57:59 -0400] c0ff33: perhaps run it with cron instead of leaving in memory as a daemon ?
[2013-03-11 18:58:24 -0400] awgross: c0ff33: are you having it fork the chef runs from the daemon?
[2013-03-11 18:59:06 -0400] c0ff33: is that what happens by default with the apt-get install method? btw im trying to move to the omnibus install method
[2013-03-11 19:00:03 -0400] awgross: unsure, it should be the default when using the chef-client::init recipe.  wasnt aware the aptitude package ran it as a service
[2013-03-11 19:00:24 -0400] hikeit: i run it with cron, configured by the chef-client recipe, it works quite well. we have it set up to only run chef-client overnight
[2013-03-11 19:00:41 -0400] Darnoth: It doesn't fork by default, and some people have reported that when the children fork they still keep increasing memory usage.. And I have had forked  copies never die off with dozens left running heh.
[2013-03-11 19:00:42 -0400] c0ff33: awgross: you are correct, i forgot that I did set up the chef-client recipe
[2013-03-11 19:01:17 -0400] c0ff33: so what do I do to make it use the least memory?
[2013-03-11 19:01:31 -0400] c0ff33: I was thinking along the lines of hikeit and running it overnight, followed by a reboot
[2013-03-11 19:02:02 -0400] awgross: there should be a way to set it to fork the actual chef-client runs.  Check the attributes in the recipe
[2013-03-11 19:02:06 -0400] Darnoth: http://pastebin.com/Vjdu75PZ is what I did.. It is retarded, though not as bad as leaving this unfixed for so long heh.
[2013-03-11 19:02:32 -0400] c0ff33: nice Darnoth
[2013-03-11 19:02:37 -0400] Darnoth: Basically causes Chef to restart itself as part of the run if the client has been running for more than a day.
[2013-03-11 19:02:57 -0400] c0ff33: oh i see - so it restarts chef but not the system
[2013-03-11 19:03:21 -0400] Darnoth: Yes it restarts the chef-client service.
[2013-03-11 19:03:28 -0400] c0ff33: Darnoth are you running the omnibus version? does it also have problems with memory leak / memory usage ?
[2013-03-11 19:03:37 -0400] geekbri: I found forking reduced overall memory usage, but did not elimnate the memory leak
[2013-03-11 19:03:39 -0400] hikeit: we just have cron do a one-off, so there is no service left running
[2013-03-11 19:03:41 -0400] geekbri: it just made it, not as bad :)
[2013-03-11 19:03:54 -0400] Darnoth: I am running an old version of 10.x, but even in the latest version of 11.x (as of a week ago) it still happens.
[2013-03-11 19:03:55 -0400] btm_: @opscode chef code review, join: http://bit.ly/10Ea4Se, watch: http://youtu.be/umdUMZaYuO8
[2013-03-11 19:04:48 -0400] Darnoth: geekbri: I took down our entire DR cluster when I turned fork mode on because there were over 100+ forked chef clients running.
[2013-03-11 19:04:54 -0400] c0ff33: interesting. i like the cron idea maybe
[2013-03-11 19:04:58 -0400] geekbri: Darnoth: ouch!
[2013-03-11 19:05:00 -0400] awgross: Darnoth: soemthing went wrong there
[2013-03-11 19:05:01 -0400] Darnoth: The only reason it stopped making clients is because the servers ran out of memory heh.
[2013-03-11 19:05:02 -0400] awgross: ouch
[2013-03-11 19:05:27 -0400] Darnoth: The setup is pretty typical Ubuntu with the fork command added to client.rb.. So yeah something went wrong, but not on my side that I could tell.
[2013-03-11 19:05:52 -0400] c0ff33: i am going to save the code snippet, thanks
[2013-03-11 19:09:18 -0400] c0ff33: thanks for the help with the memory issue. i am also having a hard time with setting up the omnibus version of chef - specifically a few questions about running knife on the chef-server and getting it to talk to it (i guess via rabbitmq)
[2013-03-11 19:10:37 -0400] c0ff33: after installing the omnibus version I have `/etc/chef-server/chef-validator.pem` - which I think was previously `/etc/chef/chef-validator.pem`
[2013-03-11 19:11:08 -0400] c0ff33: so I added /opt/chef-server/embedded/bin to my path
[2013-03-11 19:11:17 -0400] freezey: can you set the nodes environment in a cookbook?
[2013-03-11 19:11:27 -0400] c0ff33: and then run `knife configure -i`
[2013-03-11 19:11:29 -0400] freezey: mainly this is for awesome vagrant and chef solo
[2013-03-11 19:11:35 -0400] freezey: cant force the node to be in an environment
[2013-03-11 19:11:57 -0400] c0ff33: but I'm unable to configure knife successfully
[2013-03-11 19:12:39 -0400] Darnoth: freezey:knife node edit <node> will let you edit it.
[2013-03-11 19:12:46 -0400] freezey: Darnoth: yeah thats fine
[2013-03-11 19:12:49 -0400] Darnoth: Of course that brings up an editor which isn't terribly useful :P.
[2013-03-11 19:12:51 -0400] freezey: but through vagrant on the node spinup
[2013-03-11 19:12:55 -0400] Darnoth: But you can do from file too.
[2013-03-11 19:12:58 -0400] freezey: thats where the problem lies
[2013-03-11 19:12:59 -0400] Darnoth: Oh.
[2013-03-11 19:13:10 -0400] freezey: yeah
[2013-03-11 19:13:11 -0400] Darnoth: I dunno then sorry, don't use vagrant.
[2013-03-11 19:14:25 -0400] c0ff33: ok, so on the omnibus version of chef does RabbitMQ now run on 5672 instead of 4000 ?
[2013-03-11 19:16:02 -0400] Darnoth: freezey: One thing you can do is use something like "if Chef::Config[:solo]" though for stuff like Vagrant.
[2013-03-11 19:16:06 -0400] c0ff33: I tried configuring knife with those but end up getting `ERROR: EOFError: end of file reached`
[2013-03-11 19:17:51 -0400] heathsnow: anyone experienced using Berkshelf/Vagrant/Vagrant-Windows?  If so...I seem to be stuck with an 'Invalid Verb Switch.' error after the VM boots :S  Any ideas?
[2013-03-11 19:20:44 -0400] c0ff33: is anyone getting ERROR: EOFError: end of file reached ?
[2013-03-11 19:21:14 -0400] Litex: ivey: An error occurred while reading the Berksfile: '1.0.0+build.4' does not match 'x.y.z' or 'x.y'
[2013-03-11 19:21:25 -0400] test___: I see that through the UI, when looking at a cookbook, yes
[2013-03-11 19:21:50 -0400] Litex: ivey: I'm clearly doing it wrong.  I was hoping that maybe you could do versions w/ "+blah" with Chef, but it doesn't appear to be happy.
[2013-03-11 19:21:57 -0400] test___: i did a --purge on the cookbook, and re-uploaded
[2013-03-11 19:22:07 -0400] Litex: ivey: Can version:bump auto default to a patch-level bump somehow?
[2013-03-11 19:26:47 -0400] Litex: ivey: Or I suppose I could just make Jenkins always bump patch, and tag the major/minor releases outside of the CI process.
[2013-03-11 19:27:20 -0400] ivey: oh yeah, I forgot we made that change
[2013-03-11 19:27:34 -0400] ivey: we need to make it configurable
[2013-03-11 19:27:43 -0400] ivey: let me see how hard that would be to do real quick
[2013-03-11 19:28:15 -0400] Litex: Awesome.  :)  Appreciate it!
[2013-03-11 19:28:19 -0400] tabolario: hey guys, trying to get chef 11 up and running, running into an issue with knife that i can't find anything on
[2013-03-11 19:28:55 -0400] tabolario: whenever i try to upload a cookbook with knife, i'm getting along the lines of "ERROR: Errno::EACCES: Permission denied - /var/chef"
[2013-03-11 19:29:11 -0400] tabolario: i figured this would be as simple as chown'ing /var/opt/chef_server to the chef_server user, but no dice
[2013-03-11 19:32:16 -0400] tabolario: it does output "Uploading cookbook-name" before it outputs that error message
[2013-03-11 19:33:10 -0400] Darnoth: It is trying to write to /var/chef...
[2013-03-11 19:33:32 -0400] tabolario: ohh
[2013-03-11 19:33:33 -0400] tabolario: doh!
[2013-03-11 19:33:40 -0400] tabolario: hmm now where to fix that...
[2013-03-11 19:33:41 -0400] Darnoth: Hehe.
[2013-03-11 19:34:08 -0400] Darnoth: I've no clue.. I played with 11 a bit but it was not immediately obvious how to change the config for the server heh.
[2013-03-11 19:35:50 -0400] jtimberman: Perhaps this is helpful for those getting started w/ the Chef 11 Server and configuring things, https://twitter.com/opscode/status/311195255984750592
[2013-03-11 19:35:53 -0400] tabolario: Yeah I don't see any reference to /var/chef in the files that are currently in /etc/chef-server
[2013-03-11 19:35:54 -0400] jtimberman: :)
[2013-03-11 19:37:16 -0400] tabolario: That was actually what I used to setup initially @jtimberman :)
[2013-03-11 19:37:33 -0400] tabolario: And that all worked well, just seem to be having this odd issue with knife now
[2013-03-11 19:38:15 -0400] tabolario: I wonder is there any client-side configuration with knife that might be trying to point to /var/chef on the chef server when I try to upload a cookbook?
[2013-03-11 19:38:39 -0400] ranjibd: yesterday i tried installing chef 11 server .. didn't work out on amazon os, due to the runit cookbook, and then in ubuntu where it failed due to fqdn.
[2013-03-11 19:40:00 -0400] Darnoth: It would be more helpful if there was a blank chef-server.rb created in /etc/chef/chef-server with commented out help :).
[2013-03-11 19:40:10 -0400] Darnoth: er /etc/chef-server I mean.
[2013-03-11 19:40:11 -0400] miah: guh. ey.
[2013-03-11 19:41:26 -0400] miah: github.com/opscode/chef has lots of tags that 404 :/
[2013-03-11 19:41:44 -0400] ranjibd: Darnoth: yes.. now the server configs are scattered across /etc/chef-server/*.json, /ope/chef-server/embeded/service/*/etc/* .. blah blah
[2013-03-11 19:44:17 -0400] chrisballinger: Hey guys, is the application_python cookbook broken for Django 1.4.x deploys?
[2013-03-11 19:45:42 -0400] dbro: I've noticed the migrate and collectstatic actions fail due to the django resource  expecting manage.py in the deploy root, not in the project subdirectory as standard in Django
[2013-03-11 19:50:10 -0400] jtimberman: tabolario: knife config should have cookbook_path set to the chef repository where your cookbooks are.
[2013-03-11 19:50:40 -0400] jtimberman: tabolario: you can also run knife cookbook upload -VV to get more information about what its doing when the EACCESS error occurs.
[2013-03-11 19:50:59 -0400] ivey: litex: apparently we already fixed it. --default patch
[2013-03-11 19:53:25 -0400] chrisballinger: It seems like application_python is expecting a Django 1.3 style project structure and is failing for 1.4+ projects
[2013-03-11 19:55:53 -0400] gamafranco: hi
[2013-03-11 19:55:56 -0400] gamafranco: `level=': Log level must be one of :debug, :info, :warn, :error, or :fatal (ArgumentError)
[2013-03-11 19:55:57 -0400] gamafranco: lol
[2013-03-11 19:56:04 -0400] magichands: hi, I don't see any thing in the opscode user resource page about ssh keys
[2013-03-11 19:56:04 -0400] gamafranco: is this normal on chef client 10?
[2013-03-11 19:56:06 -0400] tabolario: @jtimberman Thanks for the -VV tip, I ran it again with that and I'm seeing that something is trying to mkdir /var/chef locally
[2013-03-11 19:56:20 -0400] magichands: wondering how most people create a user with ssh keys using chef then?
[2013-03-11 19:56:37 -0400] tabolario: I have cookbook_path set to the absolute path of the cookbooks directories in my local clone of my chef repo
[2013-03-11 19:56:46 -0400] magichands: like lets say I want to create a user with my deployment public ssh key so it can clone from git or whatever
[2013-03-11 19:58:25 -0400] tabolario: Ohhh... maybe I need to set the cache directory
[2013-03-11 19:59:24 -0400] geekbri: so can you no longer use .delete on a nodes now in chef11?
[2013-03-11 19:59:27 -0400] geekbri: how does one remove an attribute?
[2013-03-11 19:59:32 -0400] tabolario: Yup that was it :)
[2013-03-11 20:00:27 -0400] geekbri: no nevermind i think i found the source of my woes
[2013-03-11 20:03:14 -0400] btm: @opscode cookbook code review, join: http://bit.ly/13PUBz1, watch: http://youtu.be/GU2LmK4up-0
[2013-03-11 20:07:00 -0400] gamafranco: does anyone know a simple way to fix the ' Log level must be one of ' error?
[2013-03-11 20:08:42 -0400] c0ff33: jtimberman does chef now use 5672 instead of 4000 ?
[2013-03-11 20:19:12 -0400] c0ff33: can anyone tell me if the port for using knife has changed to 5672 with chef 11 ?
[2013-03-11 20:19:52 -0400] cwj: c0ff33: 5672 is a port used by rabbitmq, and i'm not aware of a port change for the chef api as part of chef 11
[2013-03-11 20:19:58 -0400] Litex: ivey: Sweet.
[2013-03-11 20:20:21 -0400] c0ff33: cwj - i'm getting no response when using port 4000 - do you know if chef11 is requiring ssl ?
[2013-03-11 20:20:47 -0400] c0ff33: er, and also sometimes `ERROR: EOFError: end of file reached` :(
[2013-03-11 20:21:03 -0400] cwj: c0ff33: are you able to telnet to port 4000? that should work even if SSL is being used
[2013-03-11 20:22:10 -0400] c0ff33: hmm, connection refused when trying it remotely
[2013-03-11 20:23:28 -0400] c0ff33: cwj - with telnet do i just use `telnet hostname port` or do I need to provide something else? even with `telnet localhost 4000` it doesn't seem to work
[2013-03-11 20:24:10 -0400] cwj: thats the correct syntax
[2013-03-11 20:24:27 -0400] c0ff33: interesting - it works on chef that was installed with apt-get but not on the omnibus version
[2013-03-11 20:24:38 -0400] cwj: where's your knife.rb ?
[2013-03-11 20:24:51 -0400] c0ff33: cwj i don't think that's the problem
[2013-03-11 20:25:24 -0400] cwj:  well you should have a chef_server_url parameter in there
[2013-03-11 20:25:46 -0400] c0ff33: i've tried setting that, and the port
[2013-03-11 20:25:56 -0400] c0ff33: it works fine for the older versions of chef
[2013-03-11 20:26:06 -0400] c0ff33: but with the new omnibus installed version it's giving me a lot of trouble
[2013-03-11 20:26:18 -0400] c0ff33: otherwise the setup is pretty much identiacal
[2013-03-11 20:27:01 -0400] c0ff33: cwd i do appreciate the help and feedback tho
[2013-03-11 20:27:04 -0400] hikeit: we changed all of our knife configs to use https and port 443 instead of http and port 4000
[2013-03-11 20:27:27 -0400] c0ff33: interesting. and does it matter that it is a self signed cert?
[2013-03-11 20:27:37 -0400] hikeit: knife doesn't seem to object
[2013-03-11 20:28:04 -0400] c0ff33: i don't know why they don't mention ssl or 443 in their blog post - http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/
[2013-03-11 20:28:17 -0400] hikeit: (it could be ignoring it, or it could be expecting a self signed cert that was made using their tooling)
[2013-03-11 20:28:38 -0400] cwj: c0ff33: because https:// implies both ssl and port 443
[2013-03-11 20:28:46 -0400] cwj: Please enter the chef server URL: [http://chef.example.com:4000] https://chef.example.com
[2013-03-11 20:29:14 -0400] hikeit: this is the only mention: Use the FQDN of your newly installed Chef Server, with HTTPS
[2013-03-11 20:29:43 -0400] c0ff33: guess i didn't catch that. i think the option should be changed with chef-11 then, no ?
[2013-03-11 20:29:58 -0400] c0ff33: [http://chef.example.com:4000] seems outdated
[2013-03-11 20:29:59 -0400] hikeit: (we used to use http://chef01.ops.internal:4000, now we use https://chef01.ops.internal)
[2013-03-11 20:30:03 -0400] hikeit: agreed
[2013-03-11 20:30:08 -0400] benkay: hey chef friends, if i'm provisioning with chef-solo, where do I set the rules for which hosts get assigned which roles?
[2013-03-11 20:30:25 -0400] c0ff33: going to test this now. i will be so happy if it works
[2013-03-11 20:30:33 -0400] tmichael: have require statement in libraries/my_library.rb that is puking during chef run. i have gem_package install in my recipe.  should i put my requires in the recipe too so that install happens before require?  seems library code pukes before recipe gets going.
[2013-03-11 20:30:40 -0400] geekbri: yfeldblum: can you use local paths with librarian-chef for cookbooks?
[2013-03-11 20:30:51 -0400] yfeldblum: geekbri, yes
[2013-03-11 20:31:04 -0400] geekbri: yfeldblum: great.   is it just :path => ?
[2013-03-11 20:31:10 -0400] yfeldblum: geekbri, yes
[2013-03-11 20:31:19 -0400] geekbri: ty
[2013-03-11 20:31:46 -0400] geekbri: should have just rubber ducked that one.
[2013-03-11 20:32:15 -0400] yfeldblum: geekbri, :D
[2013-03-11 20:33:19 -0400] bluekelp: are roles generally preferred over tags? pointers to "best practices" and other wisdom-based tutorials (instead of step-by-step guides) also appreciated. ideas on when tags are preferred over roles?
[2013-03-11 20:35:13 -0400] yfeldblum: bluekelp, no; the choice must be particular to your particular team, experience, infrastructure, and codebase
[2013-03-11 20:35:29 -0400] c0ff33: thanks hikeit and cwj - chef 11 is working again
[2013-03-11 20:36:03 -0400] yfeldblum: bluekelp, tags are simple string data where the meaning of those strings is defined elsewhere; roles can define their own meaning by settings various default/override attributes and adding to the run-list
[2013-03-11 20:36:08 -0400] benkay: given a set of boxes for which I've got roles all set up, where do I specify that a given host should provision itself per a specific role?
[2013-03-11 20:36:24 -0400] qhartman: bluekelp, we use roles and they work well, but they can't be versioned, which has bitten us a couple times when we wanted to make a potentially unsafe change and isolate a particular environment from it.
[2013-03-11 20:37:21 -0400] qhartman: bluekelp, so with that in mind, I would encourage avoiding them and using the "reusable cookbooks" style outlined here: http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-03-11 20:37:29 -0400] bluekelp: qhartman: thx for the tip. is there a good way to version tags/attributes for individual nodes?
[2013-03-11 20:37:34 -0400] bluekelp: oh, nice.  thanks
[2013-03-11 20:37:42 -0400] qhartman: bluekelp, It's what I plan to move our infrastructure to at somepoint in the future, when time allows for it.
[2013-03-11 20:38:16 -0400] yfeldblum: qhartman, you can do it a little at a time
[2013-03-11 20:39:03 -0400] qhartman: yfeldblum, yeah, we have a lot of moving parts though, so I haven't quite gotten the orchestration of that worked out. I'm thinking it would be cleaner to develop the new style stuff on it's own and then do a forklift upgrade.
[2013-03-11 20:39:34 -0400] qhartman: yfeldblum, it would all be theoretical / on my own time at this point regardless though.
[2013-03-11 20:39:44 -0400] benkay: am i not asking this question in a way that makes sense?
[2013-03-11 20:40:17 -0400] qhartman: add the role(s) to the node's run_list
[2013-03-11 20:40:28 -0400] qhartman: benkay ^
[2013-03-11 20:40:43 -0400] benkay: let me try again
[2013-03-11 20:40:50 -0400] benkay: provisioning box xxx.xxx.xxx.xxx
[2013-03-11 20:40:54 -0400] benkay: or whatever
[2013-03-11 20:41:29 -0400] benkay: how do I get chef-solo to do something along the lines of "oh, hey, i'm running on the xxx box and not the yyy box, so let's provision by the role associated with host:xxx.xxx.xxx.xxx"
[2013-03-11 20:41:40 -0400] benkay: it's the tying of roles to ip addresses that has my brain all sillified
[2013-03-11 20:42:34 -0400] qhartman: benkay, I'm not aware of a good way to do that. It seems like a weird thing to do. Why not just have the roles defined differently for each host in the "normal" way?
[2013-03-11 20:42:36 -0400] miah: chef-solo: making it harder
[2013-03-11 20:42:58 -0400] miah: benkay: just define the role to be used by the host with chef-solo
[2013-03-11 20:43:07 -0400] miah: instead of a conditional
[2013-03-11 20:43:30 -0400] benkay: miah: i understand what you just said, but not how to do it :(
[2013-03-11 20:44:04 -0400] benkay: bossman hired me and said "go learn chef"
[2013-03-11 20:44:17 -0400] benkay: so here i r in deep end
[2013-03-11 20:46:48 -0400] ivey: benkay:
[2013-03-11 20:47:04 -0400] ivey: think of chef as declaring intentions, and less about loops and if statements
[2013-03-11 20:47:09 -0400] qhartman: benkay, Looks like in chef-solo you define the runlist in a json file: http://wiki.opscode.com/display/chef/Chef+Solo
[2013-03-11 20:47:51 -0400] ivey: so, you create a role, or an app cookbook, that declares some behavior
[2013-03-11 20:48:13 -0400] littleidea: benkay: if you are using chef solo, you need to manage the getting the cookbooks on the node, and then feed chef-solo the cookbook path and a ball of json, that json is where you are going to set attributes and roles specific to the host
[2013-03-11 20:48:15 -0400] ivey: and setting that role, or cookbook, or multiple cookbooks, into a node's run list is how you say "I want this node to act like X and Y"
[2013-03-11 20:49:28 -0400] ivey: while you certainly can have your cookbooks and roles special casing behavior based on an IP or node name or other node-specific data, you're now teaching your recipes the specifics of your infrastructure, which makes it much harder to reuse/adapt
[2013-03-11 20:50:23 -0400] benkay: i totally grok the methodology of declaring the things i want installed on a node-by-node basis.
[2013-03-11 20:50:30 -0400] littleidea: does anyone know syntax to add roles/recipes to a node from inside a recipe?
[2013-03-11 20:50:50 -0400] ranjibd: benkay: that works fine for a small number of nodes,,,
[2013-03-11 20:51:22 -0400] benkay: sorry, role by role
[2013-03-11 20:51:39 -0400] ranjibd: littleidea: you cant do that easily.. as chef has to expand those stuff ...
[2013-03-11 20:52:23 -0400] miah: littleidea: you can do 'include_recipe' from inside recipes. not sure if there is a 'include_role' or equiv.
[2013-03-11 20:53:09 -0400] littleidea: miah: I want to add recipes dynamically from a databag
[2013-03-11 20:53:18 -0400] miah: ya
[2013-03-11 20:53:26 -0400] littleidea: will it just work?
[2013-03-11 20:53:28 -0400] miah: you could feed the contents of a data_bag to include_recipe
[2013-03-11 20:53:29 -0400] littleidea: I'll try it
[2013-03-11 20:53:32 -0400] ranjibd: include_recipe data_bag_item()
[2013-03-11 20:53:37 -0400] miah: yup
[2013-03-11 20:54:01 -0400] littleidea: I thought the anatomy of a chef run would have an ordering problem
[2013-03-11 20:54:06 -0400] ranjibd: miah,, but how the depends thing will work?
[2013-03-11 20:54:13 -0400] littleidea: I'll know if it works in a bit.
[2013-03-11 20:54:21 -0400] ranjibd: if the cookbook is not downloaded,,, the chef run will bomb
[2013-03-11 20:54:24 -0400] bougyman: NoMethodError: aws_ebs_volume[aws_ebs_stripe: /dev/xvdi 50] (/var/chef/cache/cookbooks/aws/providers/ebs_stripe.rb line 44) had an error: NoMethodError: undefined method `[]' for nil:NilClass
[2013-03-11 20:54:28 -0400] bougyman: is this just us?
[2013-03-11 20:54:43 -0400] ranjibd: littleidea: you have to declare depends on all possible values of include_recipe
[2013-03-11 20:54:50 -0400] ranjibd: else the chef run will bomb
[2013-03-11 20:54:53 -0400] littleidea: bougyman: you have something you think is a hash that is nil
[2013-03-11 20:54:59 -0400] bougyman: littleidea: I know
[2013-03-11 20:55:03 -0400] littleidea: or maybe you think it is an array
[2013-03-11 20:55:12 -0400] bougyman: i've printed everything in that resource definition and none of it is nil
[2013-03-11 20:55:15 -0400] bougyman: i think it's deeper.
[2013-03-11 20:55:20 -0400] bougyman: also: we've had no code changes.
[2013-03-11 20:55:28 -0400] bougyman: I figured something may have changed on the aws side.
[2013-03-11 20:56:48 -0400] littleidea: bougyman: where is ebs_stripe.rb defined? I don't see it in the cookbook on github
[2013-03-11 20:57:24 -0400] bougyman: this could be one we added.
[2013-03-11 20:57:44 -0400] miah: ranjibd: ya. depends will be tricky. hopefully the recipes you include have their depends set right.
[2013-03-11 20:57:53 -0400] bluekelp: can notifies be used to trigger a resource in another recipe (that is part of the run_list for the node/role)?  or do they have to be local to the recipe?
[2013-03-11 20:58:01 -0400] littleidea: miah: I think what I really want to do is add the right stuff to the node definition, and let it build up for the next run.
[2013-03-11 20:58:26 -0400] miah: you could modify the nodes run_list ?
[2013-03-11 20:58:30 -0400] littleidea: miah: I'm going to try a straight include _recipe for giggles
[2013-03-11 20:58:36 -0400] miah: ya
[2013-03-11 20:58:49 -0400] miah: im pretty sure that would work. just make sure your cookbooks all have good metadata.
[2013-03-11 20:59:05 -0400] bougyman: littleidea: http://sprunge.us/dPPd, line 44 is         vol = aws_ebs_volume "aws_ebs_stripe: #{disk} #{size}" do
[2013-03-11 20:59:15 -0400] bougyman: so nothing on that line even references an array or hash
[2013-03-11 20:59:48 -0400] bougyman: and as I said, i log print node.run_state right above that and all the hash keys that the resource references exist (:cloud_credentials, etc)
[2013-03-11 20:59:52 -0400] littleidea: miah: that was kind of what I was asking, what does the code look like to modify a nodes run list from inside of a recipe
[2013-03-11 21:00:26 -0400] miah: i havent written it, but i'd assume you could take a peak at the node object and it would just be some setter actions
[2013-03-11 21:00:39 -0400] miah: then doing a node.save
[2013-03-11 21:00:58 -0400] bougyman: the error that it's throwing doesn't make any sense to me
[2013-03-11 21:01:20 -0400] miah: bougyman: provide code of your cookbook for further debugging
[2013-03-11 21:01:34 -0400] bougyman: miah: I just did.
[2013-03-11 21:01:42 -0400] bougyman: that's the recipe in questino
[2013-03-11 21:02:39 -0400] bougyman: er the provider.
[2013-03-11 21:03:05 -0400] miah: ya
[2013-03-11 21:03:08 -0400] miah: i see.
[2013-03-11 21:03:35 -0400] miah: when calling lwrp inside a lwrp i've seen all sorts of fun
[2013-03-11 21:04:28 -0400] miah: i wrote a lwrp to wrap the two lwrp's youre doing in this cookbook too though
[2013-03-11 21:05:19 -0400] bougyman: is it published somewhere/available for use?
[2013-03-11 21:05:31 -0400] cwj: has anyone seen this approach to generating ssh keys and authorizing them on github distributed as a cookbook? http://loadedinthecloud.blogspot.com/2012/11/github-deploy-keys-with-chef.html
[2013-03-11 21:05:41 -0400] ranjibd: littleidea: https://github.com/ranjib/chef-stage/blob/master/libraries/staged_chef_client.rb
[2013-03-11 21:05:58 -0400] miah: https://gist.github.com/miah/5137749
[2013-03-11 21:06:01 -0400] miah: look there
[2013-03-11 21:06:12 -0400] miah: hasnt been released publically yet really. but there you go
[2013-03-11 21:06:55 -0400] cwj: miah, bougyman: this might be relevant to your interests? https://github.com/opscode-cookbooks/aws/pull/12
[2013-03-11 21:07:26 -0400] miah: indeed. i didnt raid. i just lvm'd
[2013-03-11 21:08:00 -0400] bougyman: cwj: same here.
[2013-03-11 21:08:06 -0400] bougyman: no mdadm, just lvm stripes
[2013-03-11 21:09:39 -0400] miah: i avoid ebs like the plague honestly
[2013-03-11 21:09:58 -0400] cwj: i think the presentation on mongodb in aws which i watched recently was advocating lvm on top of mdadm with ebs
[2013-03-11 21:10:49 -0400] bougyman: heh, mongodb
[2013-03-11 21:11:03 -0400] heathsnow: Anyone using Berkshelf/Vagrant with a Windows base box?  I had to remove the hostname config in the vagrant file to get it to run  :S
[2013-03-11 21:11:44 -0400] miah: do we really trust mongodb to make recommendations about stability at this point? =)
[2013-03-11 21:11:48 -0400] ivey: heathsnow:
[2013-03-11 21:11:49 -0400] ivey: https://github.com/BIAINC/vagrant-windows/issues/14#issuecomment-13040801
[2013-03-11 21:15:14 -0400] heathsnow: thanks ivey....looks like the same issue
[2013-03-11 21:15:32 -0400] awgross: cwj: i wrote that post
[2013-03-11 21:15:47 -0400] awgross: cwj: no cookbook yet, but its not too hard
[2013-03-11 21:15:58 -0400] awgross: cwj: re SSH keys
[2013-03-11 21:16:09 -0400] cwj: awgross: oh cool
[2013-03-11 21:16:20 -0400] cwj: awgross: i am going to steal your shit and stuff it in a cookbook then :)
[2013-03-11 21:16:35 -0400] awgross: cwj: thats cool
[2013-03-11 21:16:41 -0400] cwj: thanks!
[2013-03-11 21:16:55 -0400] awgross: cwj: been on a todo list for a while so hopefully i can steal it back and replace my stuff
[2013-03-11 21:17:03 -0400] Litex: ivey:  Any thoughts on this fun thor-foodcritic thing I'm seeing?  https://gist.github.com/eric-al/5137827          foodcritic works fine, bundle exec foodcritic complains about my metadata.rb not having a cookbook name, which it clearly does.
[2013-03-11 21:17:09 -0400] cwj: awgross: i will ping you when i have something to share
[2013-03-11 21:18:32 -0400] Litex: Erm.  'bundle exec thor foodcritic:lint' complains.
[2013-03-11 21:18:42 -0400] awgross: cwj: cool
[2013-03-11 21:19:02 -0400] ivey: Litex: nope. seems a little weird, it's a really simple tool
[2013-03-11 21:19:33 -0400] Litex: ivey: Yeah, there didn't seem to be any moving parts in thor-foodcritic really.
[2013-03-11 21:25:18 -0400] pwf: is there a chef resource for updating chef-client?
[2013-03-11 21:25:18 -0400] pwf: argh, the chef-client cookbook requires 0.10.10 and i'm trying to upgrade from 0.10.8
[2013-03-11 21:26:17 -0400] Litex: ivey: FYI.  thor-scmversion is only at 1.1.0 @rubygems.org.  And I'll try to quit bugging you now.  :)
[2013-03-11 21:26:30 -0400] Litex: Thanks for the info.
[2013-03-11 21:27:15 -0400] ivey: Litex: thanks, i'll push a new version
[2013-03-11 21:40:15 -0400] hikeit: pwf: you should be able to use the omnibus-updater cookbook to get yourself updated. alternatively just run a knife ssh command to do it.
[2013-03-11 21:40:57 -0400] hikeit: pwf: we used omnibus-updater to get ourselves from 0.10.6 to 10.16.2, then when i upgraded us to 11.0.4 last weekend i found it was easier to just use knife ssh
[2013-03-11 21:43:33 -0400] sascha_d: so I'm running chef-client 11 and noticing this funky thing where, if it has a problem phoning home, it never tries again
[2013-03-11 21:44:00 -0400] sascha_d: I shut down my chef-server services over the weekend and turned them back on today and none of my servers is even trying to talk to it
[2013-03-11 21:44:07 -0400] sascha_d:  the service is just hanging out
[2013-03-11 21:45:14 -0400] pwf: hikeit: looks like just what i needed, thank you
[2013-03-11 21:45:19 -0400] pwf: knife ssh is not an option for us
[2013-03-11 21:46:33 -0400] iverson0881: anyone here use softlayer?
[2013-03-11 21:48:51 -0400] miah: i have.
[2013-03-11 21:52:26 -0400] iverson0881: we're working on a chef softlayer plugin here, has anyone done this before? we seem to have gotten most of things going, create bootstrap, list and now just delete
[2013-03-11 21:53:06 -0400] iverson0881: one hassle is that the plugin needs to be lazy loaded as the ruby gem we depend on (softlayer_api) has a nasty json monkey-patching issue
[2013-03-11 21:53:54 -0400] iverson0881: is there any procedure for getting this plugin posted on the community website?
[2013-03-11 21:54:07 -0400] iverson0881: we'll most likely open source it in a week or so
[2013-03-11 21:57:02 -0400] josephholsten: iverson0881: are you talking about a knife plugin?
[2013-03-11 21:58:37 -0400] iverson0881: sorry, yes
[2013-03-11 21:58:42 -0400] iverson0881: josephholsten: yes that's what i meant
[2013-03-11 22:00:22 -0400] josephholsten: iverson0881: and here's the repo for the docs site: https://github.com/opscode/chef-docs
[2013-03-11 22:01:09 -0400] josephholsten: you probably want to edit this page: http://docs.opscode.com/community_plugin_knife.html
[2013-03-11 22:05:19 -0400] __chrisf__: Wondering if anyone can help with chef gem version conflict with net ssh and net ssh multi
[2013-03-11 22:07:02 -0400] __chrisf__: I'm running an older version of Chef Server (0.10.4). When trying to bootstrap a new client using KNIFE, I pass an ubuntu12.04 bootstrap file via --distro, and in there, I've tried using gem install net-ssh -v 2.2.2 --no-ri --no-rdoc, and same for net-ssh-gateway and net-ssh-multi
[2013-03-11 22:09:00 -0400] __chrisf__: But I still have issues where net-ssh-2.6.6.gemspec.rz and net-ssh-gateway-1.2.0.gemspec.rz are getting downloaded
[2013-03-11 22:09:29 -0400] __chrisf__: and the whole process crashes on "Unable to resolve dependencies: chef requires net-ssh (~> 2.2.2); net-ssh-multi  on and on
[2013-03-11 22:11:34 -0400] miah: time to update =)
[2013-03-11 22:15:23 -0400] joemiller: jtimberman: ping
[2013-03-11 22:16:33 -0400] joemiller: jtimberman: so for my openbsd pkg/service resources. i'm guessing one of my first steps is going to be converting them into the split resource / provider style? like with freebsd::package:  lib/chef/resource/freebsd_package.rb and lib/chef/provider/package/freebsd.rb
[2013-03-11 22:19:13 -0400] miah: joemiller: ya. i think they all should be that way.
[2013-03-11 22:19:50 -0400] joemiller: thought so. just had to verify. right now it's just implemented as a single library, https://github.com/joemiller/chef-openbsd/blob/master/libraries/openbsd_package.rb
[2013-03-11 22:21:22 -0400] miah: interesting
[2013-03-11 22:24:32 -0400] miah: kisoku: you're off the hook now btw =) : https://github.com/joemiller/chef-openbsd
[2013-03-11 22:27:34 -0400] ranjibd: __chrisf__: you have to update the chef gem
[2013-03-11 22:27:52 -0400] ranjibd: at least till chef 10.22 i think
[2013-03-11 22:48:27 -0400] kavi: hi, i 'm configuring chef-server with webui. after login in to webui I'm getting error like "we're sorry but something went wrong." please help me out
[2013-03-11 22:52:12 -0400] kavi: someone please help me....
[2013-03-11 22:52:57 -0400] hikeit: chef 11 server?
[2013-03-11 22:53:45 -0400] kavi: yes
[2013-03-11 22:54:06 -0400] hikeit: any logs?
[2013-03-11 22:55:01 -0400] hikeit: also, what process did you go through up 'til now? what host OS, what version of chef server, any errors when running chef-server-ctl reconfigure?
[2013-03-11 22:55:02 -0400] kavi: which log u r askin exactly?
[2013-03-11 22:55:45 -0400] kavi: i tried to install chef-server
[2013-03-11 22:55:52 -0400] hikeit: when it says "we're sorry but something went wrong" it means that rails had an error, so there should be logs somewhere from the ruby container (merb or nginx or whatever is running it)
[2013-03-11 22:55:58 -0400] hikeit: how did you do it?
[2013-03-11 22:56:14 -0400] kavi: while reconfigure i'm nt getin any error, but when i tried to login in webui, i'm gettin this
[2013-03-11 22:56:20 -0400] hikeit: centos? debian?
[2013-03-11 22:56:37 -0400] kavi: yeah, its ngix
[2013-03-11 22:56:46 -0400] hikeit: anything in the nginx logs?
[2013-03-11 22:58:27 -0400] kavi: totally 5 files r there, access.log, current, error.log, lock & re-write-port-80.log
[2013-03-11 22:58:48 -0400] hikeit: take a look in them and see if you see anything helpful\
[2013-03-11 22:59:34 -0400] kavi: yeah thanks for your help
[2013-03-11 23:04:53 -0400] kavi: pls chek th log(172.26.146.55 - - [11/Mar/2013:08:13:51 -0600]  "DELETE /users/knifey HTTP/1.1" 200 "0.012" 445 "-" "chef-pedant rspec tests" "127.0.0.1:8000" "200" "0.008" "11.0.0" "algorithm=sha1;version=1.0;" "admin" "2013-03-11T14:13:51Z" "2jmj7l5rSw0yVb/vlWAYkK/YBwk=" 860)
[2013-03-11 23:07:14 -0400] hikeit: that all looks okay, maybe search back a bit to see if you can find anything that has HTTP/1.1 500
[2013-03-11 23:09:56 -0400] kavi: pls have aluk ((((172.26.146.55 - - [11/Mar/2013:08:13:42 -0600]  "POST /search/client?q=name:pedant_temporary_client_1363011185-779913226-3147%20OR%20name:pedant_multiple_client_1363011185-779913226-3147* HTTP/1.1" 200 "0.073" 257 "-" "chef-pedant rspec tests" "127.0.0.1:8000" "200" "0.028" "11.0.0" "algorithm=sha1;version=1.0;" "admin" "2013-03-11T14:13:42Z" "/9jYxUy0/gvTHf1varD24xSdtaw=" 1118))))
[2013-03-11 23:12:14 -0400] hikeit: sorry, i don't really see anything there is that the access log or the error log?
[2013-03-11 23:13:30 -0400] kavi: tat is access.log, in error .log noting is there
[2013-03-11 23:16:29 -0400] dacasey: it looks like many of the wiki entries redirect to the default docs page http://docs.opscode.com/ Have they been deprecated, or is this a bug?
[2013-03-11 23:19:48 -0400] hikeit: might be a bug they should have two links, one to the default docs page, the other to the relevant page inside docs
[2013-03-11 23:19:50 -0400] cwj: dacasey: i believe the docs site is intended to replace the wiki, and that the redirects are a recent step in that direction
[2013-03-11 23:20:15 -0400] hikeit: oh they're redirects now?
[2013-03-11 23:20:15 -0400] cwj: oh if you arent getting to the actually relevant page then thats probably a bug
[2013-03-11 23:20:35 -0400] cwj: yes
[2013-03-11 23:20:51 -0400] cwj: for example my bookmark for http://wiki.opscode.com/display/chef/Resources takes me to http://docs.opscode.com/resource.html
[2013-03-11 23:21:07 -0400] dacasey: http://wiki.opscode.com/display/chef/Introduction+to+Search+and+Data+Bags -> http://docs.opscode.com/
[2013-03-11 23:21:25 -0400] cwj: thats not very helpful is it
[2013-03-11 23:21:51 -0400] hikeit: was the old page about search, data bags, or searching data bags?
[2013-03-11 23:21:52 -0400] cwj: i think you can report issues on https://github.com/opscode/chef-docs
[2013-03-11 23:21:55 -0400] kavi: hi i ahve a access.log file, hw to upload to u.
[2013-03-11 23:22:20 -0400] hikeit: access log will be full of not-terribly-useful information
[2013-03-11 23:24:15 -0400] hikeit: is there anything in /var/log/chef-server/chef-server-webui
[2013-03-11 23:24:16 -0400] hikeit: ?
[2013-03-11 23:24:28 -0400] hikeit: on my box there is a "current" file that actually shows webui logs
[2013-03-11 23:31:51 -0400] w6fu: need to build a mysql master/slave setup, seems to be so many moving parts in the cookbooks any suggestions on a cookbook to use?
[2013-03-11 23:33:12 -0400] benkay: is installing chef from source really really really recommended against?
[2013-03-11 23:33:43 -0400] benkay: i want to bootstrap chef from packages on my company's servers instead of apt-get
[2013-03-11 23:33:46 -0400] benkay: is bad idea?
[2013-03-11 23:34:40 -0400] awgross: benkay: chef-client/solo or chef-server
[2013-03-11 23:34:40 -0400] cwj: benkay: i think opscode would suggest the best idea is to use the omnibus installer
[2013-03-11 23:35:34 -0400] benkay: solo.
[2013-03-11 23:35:37 -0400] benkay: client/solo.
[2013-03-11 23:36:04 -0400] benkay: does omnibus do client/solo?
[2013-03-11 23:36:07 -0400] awgross: benkay: you can make a distrib yourself.  Just a bunch of gems and making sure binaries are in the right spot
[2013-03-11 23:36:12 -0400] awgross: benkay: yes
[2013-03-11 23:36:26 -0400] awgross: benkay: from source a bit misleading because its ruby
[2013-03-11 23:36:32 -0400] benkay: yeah
[2013-03-11 23:37:11 -0400] cwj: omnibus installers are available for both client/solo and server
[2013-03-11 23:37:25 -0400] benkay: i am googling like a fiend and am fail
[2013-03-11 23:37:25 -0400] cwj: and takes all the work out of setting up either
[2013-03-11 23:37:28 -0400] cwj: http://www.opscode.com/chef/install/
[2013-03-11 23:37:40 -0400] benkay: ugh
[2013-03-11 23:37:45 -0400] benkay: nowhere on that page does it say omnibus
[2013-03-11 23:37:46 -0400] benkay: confus.
[2013-03-11 23:38:07 -0400] cwj: for me it is the first google result for "chef omnibus"
[2013-03-11 23:38:38 -0400] benkay: wonder how they do that.
[2013-03-11 23:54:40 -0400] tmichael: noticing my chef json data, retrieved via various knife commands, is now coming back without line feeds.  anyone else experience this lately?

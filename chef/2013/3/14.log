[2013-03-14 00:00:17 -0400] AntonZ: gotcha, well, they list rhel6 as supported os now
[2013-03-14 00:00:37 -0400] atomic-penguin: AntonZ, if they have gone the route of a pre-install RPM, I could install that and re-factor the cookbook to take into account those changes.   Currently the oracle cookbook has not been tested on RHEL6
[2013-03-14 00:01:12 -0400] atomic-penguin: AntonZ, so not something I am going to whip up tonight, unfortunately
[2013-03-14 00:03:29 -0400] AntonZ: Eric, no worries, i found an offical article for this issue, check it out: https://access.redhat.com/knowledge/solutions/66816
[2013-03-14 00:03:50 -0400] AntonZ: it talkes specifically about oracle isntall and pdksh
[2013-03-14 00:04:58 -0400] AntonZ: just fyi :)
[2013-03-14 00:05:14 -0400] willejs: what library does chef use to parse json from attributes and data bags? does it not interpret json null type to ruby nil?
[2013-03-14 00:34:23 -0400] Apes: What is the point of having a distinction between files and templates in Chef? Aren't files just a subset of templates?
[2013-03-14 00:34:54 -0400] atomic-penguin: Apes, files are static, templates are rendered from variables and static information
[2013-03-14 00:35:31 -0400] Apes: atomic-penguin: So what is the difference between a template with no dynamically generated content and a file?
[2013-03-14 00:36:04 -0400] atomic-penguin: Apes, there would be no difference, use a file in that case
[2013-03-14 00:36:20 -0400] Apes: atomic-penguin: But then why have a distinction between the two?
[2013-03-14 00:36:46 -0400] Apes: Why use a file if a template can do the exact same thing?
[2013-03-14 00:41:31 -0400] agoddard: just guessing that a template is parsed for erb, whereas a file might not be parseable (it might be an image for example)
[2013-03-14 00:42:07 -0400] agoddard: so a template is always text, but that's not the case for a file
[2013-03-14 00:43:44 -0400] Apes: agoddard: That makes sense to me, thanks
[2013-03-14 00:44:11 -0400] bluekelp: any ideas on why a tag('foo') call inside a ruby_block resource errors out?
[2013-03-14 00:44:36 -0400] bluekelp: the examples on opscode site show access node['foo']['bar'] so i assumed tag() is also callable
[2013-03-14 00:49:51 -0400] Majost: How do I tell knife to return the value of an attribute when using search, instead of the node?
[2013-03-14 00:53:07 -0400] Majost: I got it
[2013-03-14 00:53:09 -0400] Majost: nm
[2013-03-14 00:59:29 -0400] yfeldblum: bluekelp, why are you traing to tag the node from inside a resource?
[2013-03-14 01:00:53 -0400] bluekelp: it's an execute resource that deploys our code (JVM, can't use deploy resource).  i mark the node as deployed
[2013-03-14 01:00:57 -0400] bluekelp: or try to
[2013-03-14 01:01:24 -0400] bluekelp: i figured out i can shovel the tag into node.tags
[2013-03-14 01:01:28 -0400] bluekelp: undocumented? but works
[2013-03-14 01:02:03 -0400] bluekelp: on a related note, do you know why i can't call: log "foo" do level :error end   -- in the only_if() part of an execute?
[2013-03-14 01:02:13 -0400] bluekelp: and/or recommend a better way to log recipe errors
[2013-03-14 01:02:38 -0400] bluekelp: could i throw an exception and have that in the logs?
[2013-03-14 01:03:22 -0400] yfeldblum: bluekelp, so many ...
[2013-03-14 01:04:42 -0400] yfeldblum: bluekelp, the "tags" attribute is right there in the node data (`knife node show $NAME -Fj`)
[2013-03-14 01:05:30 -0400] bluekelp: right.  but the docs said to use tag('foo') - which blew up on me during recipe run
[2013-03-14 01:05:39 -0400] yfeldblum: bluekelp, you can assign the tag at the toplevel rather than inside a resource; the node data will only be saved after chef-client has completed the run successfully so you won't be marking nodes as deployed until the deploy has succeeded
[2013-03-14 01:06:03 -0400] bluekelp: ok so if i throw an exception in the recipe the tag won't get set?
[2013-03-14 01:06:07 -0400] yfeldblum: bluekelp, `log` is a resource; it's not what you want
[2013-03-14 01:06:29 -0400] yfeldblum: bluekelp, the node won't be saved if anything throws an error or any resources fail to converge
[2013-03-14 01:07:42 -0400] bluekelp: awesome. thanks for the tip.  ideas on logging/output in a recipe other than log resource?  does a simple puts work?  didn't think it did
[2013-03-14 01:08:16 -0400] yfeldblum: bluekelp, Chef::Log.error("oops lulz")
[2013-03-14 01:08:36 -0400] yfeldblum: bluekelp, that's not a resource and it logs immediately when it's called
[2013-03-14 01:25:41 -0400] bluekelp: yfeldblum: thanks again for your help. working like a charm.
[2013-03-14 02:07:00 -0400] Chobobo: I wish the peepcode screencasts covered chef-client/server
[2013-03-14 02:09:03 -0400] joonas: doesn't it?
[2013-03-14 02:09:07 -0400] joonas: the second part?
[2013-03-14 02:11:23 -0400] Chobobo: joonas: nope
[2013-03-14 02:11:55 -0400] Majost: hrmm
[2013-03-14 02:11:58 -0400] Chobobo: joonas: it covers using chef-solo to read a json file served from a web server
[2013-03-14 02:12:26 -0400] Majost: I am getting a weird error when trying to add an entry to pg_hba.conf from the postgresql cookbook
[2013-03-14 02:12:36 -0400] Majost: undefined method `keys' for #<Array:0x00000001e3a6d8>
[2013-03-14 02:13:01 -0400] Chobobo: Also I would have expected that with two hours of video knife would have been mentioned at least once.  I don't have any idea what that does :P
[2013-03-14 02:13:14 -0400] joonas: Chobobo: that would make sense, heh
[2013-03-14 02:16:21 -0400] jtimberman: Chobobo: knife is the plugin based command-line administrative tool for chef.
[2013-03-14 02:16:22 -0400] jtimberman: :)
[2013-03-14 02:16:24 -0400] jtimberman: that help?
[2013-03-14 02:17:43 -0400] fauncybillups: what is the easiest way to add a role to every node that is listed in chef server (I assume there is a way to do this in chef, but I can't seem to find it)
[2013-03-14 02:18:30 -0400] Chobobo: jtimberman: ummm, well... I guess technically yes.  :)   I was hoping the screencast would cover when to use it.  Oh well.. I can stop being lazy and do some reading :)
[2013-03-14 02:18:48 -0400] jtimberman: yeah i can't speak to the peepcode, i have only seen the preview.
[2013-03-14 02:20:33 -0400] Majost:  Is there something wrong with my syntax here: https://gist.github.com/rhass/5158291
[2013-03-14 02:20:46 -0400] Chobobo: I decided to shell out the $24 for both... They were pretty helpful.  Those are really the only problems I had with the series, other than how he says "appication" like the L doesn't exist.  hehe
[2013-03-14 02:25:08 -0400] fauncybillups: I was able to come across an answer to my question from this web page.. http://dougireton.com/blog/2013/02/03/knife-tricks/ .. under "Add a role to all nodes in an Environment which dont contain the given Role"
[2013-03-14 02:30:15 -0400] Majost: Updated the gist with the full error output
[2013-03-14 02:30:25 -0400] Majost: I am at a total loss here
[2013-03-14 02:31:19 -0400] Majost: From looking at the template for pg_hba.conf and the README.md in the postgresql cookbook, it seems like it should work
[2013-03-14 02:43:23 -0400] crypticsymbols: hello everyone, I am trying to get chef-solo-search working with a chef solo / opscode users cookbook and having some trouble.  does anyone have any usage examples?
[2013-03-14 02:43:38 -0400] ranjibd: Majost: can you share the stacktrace?
[2013-03-14 02:43:59 -0400] crypticsymbols: apologies, I am a bit of a chef noob.  where would I find that?
[2013-03-14 02:44:22 -0400] Majost: ranjibd: sure
[2013-03-14 02:45:08 -0400] Majost: ranjibd: updated gist
[2013-03-14 02:45:15 -0400] Majost: oops
[2013-03-14 02:45:15 -0400] Majost: crap
[2013-03-14 02:45:17 -0400] Majost: wrong one
[2013-03-14 02:46:24 -0400] Majost: ranjibd: stack trace is there now
[2013-03-14 02:48:36 -0400] ranjibd: Majost: you are in chef client-server setup?
[2013-03-14 02:48:47 -0400] Majost: ranjibd: yep
[2013-03-14 02:48:49 -0400] ranjibd: can you start chef-sheell -z
[2013-03-14 02:48:58 -0400] ranjibd: or shef if you are in chef 10.x
[2013-03-14 02:49:01 -0400] ranjibd: on the client box
[2013-03-14 02:49:08 -0400] Majost: shef, yes?
[2013-03-14 02:49:10 -0400] ranjibd: shef -z
[2013-03-14 02:49:16 -0400] ranjibd: yeah .. with -z
[2013-03-14 02:49:17 -0400] Majost: on the client
[2013-03-14 02:49:55 -0400] Majost: ok, t started with the same stack trace
[2013-03-14 02:50:25 -0400] ranjibd: go to recipe mode
[2013-03-14 02:50:31 -0400] ranjibd: recipe
[2013-03-14 02:50:46 -0400] Majost: ok
[2013-03-14 02:51:03 -0400] ranjibd: and then type node.postgresql.pg_hba
[2013-03-14 02:51:24 -0400] ranjibd: see whats in there.. .class, what type of object it is
[2013-03-14 02:52:55 -0400] ranjibd: whats node.postgresql ,,, looks like its an array
[2013-03-14 02:53:02 -0400] Majost: it does
[2013-03-14 02:53:08 -0400] ranjibd: while it should be a mash or hash
[2013-03-14 02:53:20 -0400] Majost: it is a hash
[2013-03-14 02:54:22 -0400] Majost: msg'd you the value
[2013-03-14 03:02:04 -0400] fauncybillups: what recipe is typically responsible for setting node.fqdn?
[2013-03-14 03:04:11 -0400] matschaffer: fauncybillups: pretty sure ohai does that
[2013-03-14 03:04:25 -0400] matschaffer: which is gem rather than a recipe
[2013-03-14 03:04:42 -0400] fauncybillups: i'm running ohai, but it does not seem to be setting fqdn
[2013-03-14 03:05:10 -0400] ranjibd: fauncybillups: does hostname -f returns something on the system?
[2013-03-14 03:06:09 -0400] fauncybillups: ranjibd: ahh.. interesting.  hostname -f returns "hostname: Unknown Host" with a RC of 1
[2013-03-14 03:11:15 -0400] sabooky: Any major reason to upgrade from chef 10.X to 11.X?
[2013-03-14 03:11:30 -0400] sabooky: Skimmed the log file and seemed like minor changes overall if not using chef-server
[2013-03-14 03:12:47 -0400] knuckolls_: sabooky: that's where the community is moving, so go w/ the flow and don't get left behind? new cookbooks will inevitably be written to be chef 11 only.
[2013-03-14 03:13:00 -0400] knuckolls_: sabooky: i haven't done it yet, but i feel like i need to. just get it out of the way
[2013-03-14 03:13:49 -0400] yfeldblum: sabooky, same reason for upgrading from centos-3 to centos-6
[2013-03-14 03:14:02 -0400] yfeldblum: sabooky, or from palm pilot to iphone 5
[2013-03-14 03:14:29 -0400] sabooky: When I last looked Vagrant only supported 10.X and it was part of my workflow
[2013-03-14 03:15:19 -0400] sabooky: This might not be the case anymore (haven't checked in a while).. was mostly trying to see if I'm missing out on any "game changers".. otherwise might just trail behind a bit
[2013-03-14 03:15:34 -0400] juliancdunn: sabooky: Vagrant supports Chef 11
[2013-03-14 03:17:07 -0400] sabooky: juliancdunn: Ok, I'll test and upgrade then :)
[2013-03-14 03:17:28 -0400] sabooky: That said aside from being on the latest and greatest, any big change (on the chef-solo side)
[2013-03-14 03:17:42 -0400] jtimberman: sabooky: whether the box you're using has chef 11 installed already or not is another matter. you can use the vagrant shell provisioner to install it on every vagrant up/provision: jtimberman.housepub.org/blog/2012/08/10/vagrant-multiple-provisioners/
[2013-03-14 03:18:13 -0400] jtimberman: sabooky: on solo, if you're doing anything like include_recipe, using resources or otherwise use parts of a cookbook in another, you need to create a correct dependency
[2013-03-14 03:18:43 -0400] jtimberman: e.g., if your cookbook is named "fuzzy", and you're using a recipe from "splat", then you need: depends "splat" in fuzzy's metadata.
[2013-03-14 03:18:44 -0400] sabooky: jtimberman: heh.. that might break some cookbooks we have here (but for a good reason)
[2013-03-14 03:18:55 -0400] jtimberman: being explicit about your dependencies is a good thing :)
[2013-03-14 03:19:09 -0400] jtimberman: whereas its kind of accidentally working now.
[2013-03-14 03:19:15 -0400] sabooky: Cool, glad that change is in... was thinking about writing a small test in CI to enforce that.. but i guess that's done now :)
[2013-03-14 03:19:33 -0400] sabooky: I'll rebuild a redhat box with chef 11.. thanks for the info
[2013-03-14 03:21:28 -0400] sabooky: Hmm.. one more quick chef question. If cookbooks are being split into a "installation" phase and "integration" phase. Using chef server, what would be the best way to pass down metadata to interlink the machines
[2013-03-14 03:22:41 -0400] sabooky: Debating whether databag or node.json is the correct location for ip/host information of external machines
[2013-03-14 03:23:06 -0400] sabooky: Hmm.. I'll make my question more general. When do you put attributes in node/role.json vs databag?
[2013-03-14 03:23:47 -0400] jtimberman: sabooky: if the data is orthogonal to a specific node or a type of node, i put it in a data bag.
[2013-03-14 03:23:55 -0400] jtimberman: e.g., users, application information, etc.
[2013-03-14 03:24:21 -0400] jtimberman: sabooky: when using a chef server, instead of storing specific other node IPs anywhere, i use the search API to find it.
[2013-03-14 03:27:02 -0400] sabooky: jtimberman: hmm.. could you give an example of "application information"
[2013-03-14 03:30:44 -0400] jtimberman: sabooky: whats your app stack? rails, django, php, java?
[2013-03-14 03:30:52 -0400] sabooky: java
[2013-03-14 03:31:31 -0400] psykidellic: Using the latest opscode postgres cookbook and I keep getting: https://gist.github.com/psykidellic/5158594 - earlier, I had issue with EBS mounted device not being found but now I made sure its formatted and the right directory is available.
[2013-03-14 03:31:54 -0400] jtimberman: sabooky: so for example, you could put the URL to your war file, its checksum, the servlet container that it deploys into
[2013-03-14 03:33:40 -0400] sabooky: jtimberman: interesting, always thought of those as attibutes in the application-node.json file
[2013-03-14 03:34:03 -0400] jtimberman: sure, and that's usually fine :)
[2013-03-14 03:34:21 -0400] jtimberman: but the benefit of putting that in a data bag is that its not specific to *that* node in some cases.
[2013-03-14 03:34:39 -0400] jtimberman: for example, database connection information
[2013-03-14 03:34:52 -0400] sabooky: hmm.. so they're kind of like "global variables"
[2013-03-14 03:35:15 -0400] jtimberman: "kind of"
[2013-03-14 03:35:22 -0400] jtimberman: global data
[2013-03-14 03:35:39 -0400] jtimberman: and w/ chef server, a global API you can use to store or retrieve (or search)
[2013-03-14 03:35:47 -0400] sabooky: Ok, I'll throw one last question at you (thanks for all the help so far)
[2013-03-14 03:36:08 -0400] sabooky: Say, I have multiple apps.. and multiple tiers (dev, qa, pre-prod, prod, etc..)
[2013-03-14 03:36:28 -0400] psykidellic: Could it be because I am using knife-solo?
[2013-03-14 03:36:40 -0400] sabooky: I have a cookbook that creates lvms and mounts them to specific locations
[2013-03-14 03:37:01 -0400] jtimberman: psykidellic: by latest do you mean "github master branch" or "downloaded version from the community site"?
[2013-03-14 03:37:22 -0400] psykidellic: github master branch
[2013-03-14 03:37:38 -0400] sabooky: Since I'm stuck with chef-solo for now, would I be best off defining the partitions and sizes for different app/tier combo in databags? Or should I have that as attributes (whether in node.json or application cookbook)
[2013-03-14 03:38:39 -0400] jtimberman: psykidellic: fwiw, i don't recommend using the master branch of *anyone's* github repo for a cookbook.
[2013-03-14 03:38:42 -0400] jtimberman: http://stackoverflow.com/questions/14993677/how-do-i-use-the-new-opscode-repo-with-vagrant/15006285#15006285
[2013-03-14 03:38:47 -0400] jtimberman: has more detail
[2013-03-14 03:39:21 -0400] psykidellic: Hmm. Okay. I will read.
[2013-03-14 03:39:23 -0400] jtimberman: sabooky: probably fine doing that in "environment/tier" specific roles
[2013-03-14 03:39:46 -0400] jtimberman: its basically the same rationale as, "do you install gems from the repo master branch too?"
[2013-03-14 03:39:56 -0400] jtimberman: (most people probably dont)
[2013-03-14 03:40:46 -0400] psykidellic: I see.
[2013-03-14 03:40:52 -0400] jtimberman: psykidellic: that aside, it may simply be a matter of the init script being brittle and relying too much on PID files. does the postmaster.pid file exist?
[2013-03-14 03:40:55 -0400] jtimberman: in that location
[2013-03-14 03:41:15 -0400] jtimberman: is the postgresql service starting up but dying for some reason?
[2013-03-14 03:41:18 -0400] psykidellic: jtimberman: Let me see. I didnt do anything special but just use postgresql::server in the runlist
[2013-03-14 03:41:33 -0400] psykidellic: jtimberman: Its the first setup that I do using: knife solo cook ....
[2013-03-14 03:41:41 -0400] littleidea: any of you kids use Ridley?
[2013-03-14 03:43:14 -0400] jtimberman: psykidellic: this line:  * pg_ctl: PID file "/mnt/ebs/pg_data/postmaster.pid" does not exist
[2013-03-14 03:43:21 -0400] jtimberman: is the key to the puzzle
[2013-03-14 03:46:27 -0400] senilegenius: ohai chefs. i've got a question about how y'all use git & chef server/hosted chef.
[2013-03-14 03:46:49 -0400] senilegenius: seems that there are two sources of truth with a  chef repo in git and on the chef server
[2013-03-14 03:47:07 -0400] senilegenius: how do you do deployment and know that what's in git is the only source of truth?
[2013-03-14 03:47:15 -0400] jtimberman: senilegenius: I consider the Chef Server to be the source of truth.
[2013-03-14 03:47:58 -0400] jtimberman: it's a publishing system with an API where data can come from multiple inputs, not just git. think of e.g. a CI system that sends data about builds into data bags or similar.
[2013-03-14 03:48:09 -0400] senilegenius: it is for the nodesbut what if i do a 'knife cookbook upload' and forget to check in the codethen someone else on another workstation checks in code *and* also does a 'knife cookbook upload'
[2013-03-14 03:48:52 -0400] jtimberman: in some environments, particularly where CI is used, there is no direct 'knife cookbook upload' (or knife anything upload)
[2013-03-14 03:48:57 -0400] jtimberman: as an example
[2013-03-14 03:49:04 -0400] jtimberman: you commit code to a git repository
[2013-03-14 03:49:08 -0400] jtimberman: it gets reviewed
[2013-03-14 03:49:15 -0400] jtimberman: and it goes through a CI system
[2013-03-14 03:49:38 -0400] jtimberman: the CI system has a pipeline that runs smoke tests, passes the build and then does the upload to the chef server.
[2013-03-14 03:50:14 -0400] senilegenius: jtimberman: yes! that's exactly what i'm talking about.i'm more of a systems guywould jenkins be one example of that CI system?
[2013-03-14 03:50:21 -0400] jtimberman: as a demonstration of this for application deployment (but showing some cookbook stuff too), stathy just posted this video: http://www.youtube.com/watch?v=EUrHpAJhCbU
[2013-03-14 03:50:28 -0400] jtimberman: totally an example.
[2013-03-14 03:50:37 -0400] jtimberman: that 8 minute video just might change your life ;)
[2013-03-14 03:50:50 -0400] senilegenius: ah cool!
[2013-03-14 03:51:18 -0400] senilegenius: my sys admin background is a hinderance when it comes to this particular nugget. thanks! :)
[2013-03-14 03:56:45 -0400] ss__: Hi. Here is my recipe. http://pastebin.com/TuaYVDYs however, i run into a peculiar error.  opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:115:in `chdir': No such file or directory /opt/test/hellowworld-version1/hello/ However, this directory does exist. I wonder if the second Shellout command is receiving the O/P of the first one in the right form.
[2013-03-14 04:15:29 -0400] psykidellic: jtimberman: Well, I am reading at: https://github.com/opscode-cookbooks/postgresql and there is no mention of special of setting up .pid files. I just have the following in my .json file: https://gist.github.com/psykidellic/5158746
[2013-03-14 04:15:38 -0400] psykidellic: Sorry, mrs. called so had to go out for a bit.
[2013-03-14 04:28:08 -0400] kerouac: fellow chefs, just installed private chef
[2013-03-14 04:28:44 -0400] kerouac: should i see a private-chef.rb file in /etc/opscode?
[2013-03-14 04:28:45 -0400] kerouac: or is that something we create ourselves?
[2013-03-14 04:31:43 -0400] kerouac: While there are a great deal of configuration options, the number required for common use is quite small. For standalone single server configurations no configuration is required at all - the defaults take care of everything.
[2013-03-14 04:32:14 -0400] kerouac: ok, so the defaults in private-chef-ctl show-config are just overridden if i decide to make a config file
[2013-03-14 04:32:17 -0400] kerouac: got it.
[2013-03-14 04:35:51 -0400] psykidellic: Okay, tried with a released version (tagged 2.2.0) and same issue.
[2013-03-14 05:16:03 -0400] jkeiser: senilegenius: in a world where you *do* use knife cookbook upload, best practice is to use "knife diff" before you upload, to make sure you are actually changing what you think you're changing
[2013-03-14 05:18:14 -0400] senilegenius: jkeiser: thanks for the protip. i haven't looked at 'knife diff'
[2013-03-14 05:19:18 -0400] jkeiser: It's a new thing, part of Chef 11.  gem install knife-essentials gets you a more recent beta version
[2013-03-14 05:19:35 -0400] jkeiser: https://github.com/jkeiser/knife-essentials
[2013-03-14 05:21:01 -0400] jkeiser: senilegenius: basic idea: knife diff cookbooks/apache2 before you upload it, and it will show you the differences between the filesystem and what is presently on the server.  If the changes are what you expect, proceed.
[2013-03-14 05:23:55 -0400] senilegenius: jkeiser: this might fit better than integrating it into our CI process, or at least, will work for now until w can integrate our config mgmt into our application dev/deployment process. good stuff!
[2013-03-14 05:24:32 -0400] jkeiser: Yeah, I see it as a stopgap so people don't kill themselves before they implement the whole meal deal.  And a useful debugging tool
[2013-03-14 05:26:54 -0400] psykidellic: Well, it gets even more interesting. The first time I "knife solo cook ....", it fails with pgsql cannot be restarted (with postmaster.pid) not being found. The third time, when I run the cook command, everything works.
[2013-03-14 05:28:28 -0400] psykidellic: Interestingly, the third time - it does not try to reload postgres.
[2013-03-14 05:37:46 -0400] psykidellic: Looking at output again, in the first cook run, it fails on "restart" action. On second cook run, it fails on "reload" action. Third time, it does not call either and the whole setup succeeds and the postgres daemon is correctly running.
[2013-03-14 05:57:25 -0400] psykidellic: jtimberman: Okay, I think I see the issue. In all the runs, "action" start is called even before postgresql.conf and pg_hba.conf is setup. So first two time it fails with those two files missing. Third time, when I cook and those files are present, everything works.
[2013-03-14 05:59:13 -0400] utf1000: i heard chef is better than puppet from the facebook guy presenting at the los angeles SCALE linux thingy
[2013-03-14 06:16:22 -0400] psykidellic: Looks like, if I move the the template files before include_recipe at: https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/server.rb, it should work.
[2013-03-14 06:51:28 -0400] manju: hi guys
[2013-03-14 06:52:58 -0400] manju: i have a problem with the knife command
[2013-03-14 07:11:15 -0400] manju: anybody there ?
[2013-03-14 07:14:20 -0400] aruntomar: manju: plz state your problem
[2013-03-14 07:15:11 -0400] manju: knife command throws me error
[2013-03-14 07:15:13 -0400] manju: /usr/bin/knife:22:in `require': no such file to load -- chef/application/knife (LoadError)
[2013-03-14 07:15:14 -0400] manju: from /usr/bin/knife:22
[2013-03-14 07:15:27 -0400] manju: what might be the problem ?
[2013-03-14 07:16:26 -0400] aruntomar: manju: knife -v , does it work?
[2013-03-14 07:17:04 -0400] manju: no , it throws same error for knife -v also
[2013-03-14 07:17:08 -0400] aruntomar: manju: how did u install chef? omnibus or gems
[2013-03-14 07:17:18 -0400] manju: i installed chef
[2013-03-14 07:17:31 -0400] manju: it was working fine for these days
[2013-03-14 07:18:22 -0400] aruntomar: yes, but how did you configure your workstation in the first place.
[2013-03-14 07:18:40 -0400] aruntomar: did u install ruby and other dependencies?
[2013-03-14 07:18:55 -0400] aruntomar: and then installed and configured chef?
[2013-03-14 07:19:07 -0400] manju: yes
[2013-03-14 07:19:15 -0400] manju: i followed the same way as u said
[2013-03-14 07:19:51 -0400] aruntomar: k, have u tried setting up another machine or user as a workstation
[2013-03-14 07:20:31 -0400] manju: yes , i have configured my local machine as client as well as node
[2013-03-14 07:20:57 -0400] aruntomar: setup another machine as a workstation
[2013-03-14 07:21:06 -0400] aruntomar: seems like your env/path is messed up
[2013-03-14 07:21:18 -0400] aruntomar: and chef can't find the knife module to load
[2013-03-14 07:21:38 -0400] manju: ok , let me check for it then
[2013-03-14 07:22:49 -0400] manju: thanks arun
[2013-03-14 07:23:21 -0400] aruntomar: manju: welcome
[2013-03-14 09:41:44 -0400] daemogia: hi there
[2013-03-14 09:54:10 -0400] railsraider: how can i use knife ssh to collect nodes? can i do something like knife ssh 'name:*qa* AND name: *app *AND name:*db*'
[2013-03-14 09:55:15 -0400] railsraider: nm i chenged it OR and it worked
[2013-03-14 10:41:36 -0400] vegardx: If I want to find out if a cookbook_file source exists before doing anythig, how would I go forth?
[2013-03-14 10:48:52 -0400] pipework: http://ruby-doc.org/core-2.0/File.html#method-c-exist-3F
[2013-03-14 10:49:06 -0400] vegardx: yeah, but how would I do that on the source?
[2013-03-14 10:49:38 -0400] vegardx: The recipies are run locally, so File.exists? would check the local filesystem.
[2013-03-14 10:50:55 -0400] siXy: you could wrap the cookbook_file & following resources in a begin / rescue block.  If the cookbook_file resource failed, it would then hanlde that gracefully.  Though I'm curious why you're not sure if they source exists...
[2013-03-14 10:51:02 -0400] siXy: s/they/the/
[2013-03-14 10:52:13 -0400] vegardx: siXy: I'm distributing bashrc-files, but want to fallback to a default if the user doesn't have one. It might be a better way to do it though...
[2013-03-14 10:57:59 -0400] siXy: vegardx: right, so a begin; cookbook_file "user"; rescue; cookbook_file "default"; end work do the job.  There are other ways you could do it (e.g. LWRP), but that's simple if you can live with the exceptions-as-code thing.
[2013-03-14 10:59:18 -0400] vegardx: ah, so rescue runs if the previous statement fails?
[2013-03-14 11:01:33 -0400] siXy: yes
[2013-03-14 11:02:08 -0400] siXy: it'd be called a try/catch block in any other language
[2013-03-14 11:03:45 -0400] vegardx: alright, thanks! :)
[2013-03-14 12:45:58 -0400] crypticsymbols: I'm looking for help using the opscode users cookbook with chef-solo-search.  Does anyone have any functioning examples?
[2013-03-14 12:52:47 -0400] jsnapp: crypticsymbols: is there a particular problem you're running into?
[2013-03-14 12:56:05 -0400] crypticsymbols: Full disclosure: I am a total chef noob.  So I have a recipe working with hosted chef by having a recipe that included nothing except "include_recipe "users"" in it
[2013-03-14 12:56:55 -0400] crypticsymbols: that recipe did not work with chef solo, even with the chef-solo-search cookbook in my chef solo collection alongside the users cookbook.
[2013-03-14 12:57:13 -0400] crypticsymbols: I assume I am missing the correct way to include it
[2013-03-14 12:58:12 -0400] jsnapp: instead of using include_recipe try putting "chef-solo-search" in the run_list along with your other cookbooks
[2013-03-14 12:58:44 -0400] jsnapp: i'm assuming you're using chef 11 in which case it includes libraries differently than chef 10
[2013-03-14 12:58:45 -0400] jsnapp: http://docs.opscode.com/breaking_changes_chef_11.html#non-recipe-file-evaluation-includes-dependencies
[2013-03-14 12:59:29 -0400] ss__: Hi. Here is my recipe. http://pastebin.com/TuaYVDYs however, i run into a peculiar error. opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.1.0/lib/mixlib/shellout/unix.rb:115:in `chdir': No such file or directory /opt/test/hellowworld-version1/hello/ However, this directory does exist. I wonder if the second Shellout command is receiving the O/P of the first one in the right form.
[2013-03-14 12:59:59 -0400] crypticsymbols: jsnapp... trying now, thank you
[2013-03-14 13:04:08 -0400] gyre007: for whatever reason all cookbooks where we are using deploy_revision resource getting the code from GitHub started failing today...anyone noticed anything similar ?
[2013-03-14 13:07:47 -0400] jsnapp: ss__ maybe try inserting Chef::Log.info("'#{apppath}'") to help debug
[2013-03-14 13:08:30 -0400] jsnapp: notice that there are single quotes inside the double quotes .. that might help identify any extraneous spaces in the path name being returned
[2013-03-14 13:08:30 -0400] gyre007: this is what im seeing https://gist.github.com/milosgajdos83/5161150
[2013-03-14 13:11:05 -0400] gyre007: ah GitHub problems....again
[2013-03-14 13:22:19 -0400] ss__: @jsnapp  I think its adding a new line character.
[2013-03-14 13:32:13 -0400] geekbri: yeah I think github is being DDoSed again
[2013-03-14 13:40:52 -0400] awgross: indeed
[2013-03-14 13:41:03 -0400] awgross: just finished debugging why their outage was causing problems
[2013-03-14 13:41:15 -0400] awgross: "but none of our code hits github after the initial run"
[2013-03-14 13:41:29 -0400] awgross: then we saw the single quoted string interpolation bug thanks ruby
[2013-03-14 13:45:14 -0400] Chobobo: Man, just when I start to think I have things figured out I watch a screencast that uses the term "Data Bags" like I know what it is.
[2013-03-14 13:45:47 -0400] Chobobo: Ahh.. it is under getting started :P
[2013-03-14 13:46:23 -0400] jsnapp: ss__ if it does have a newline then maybe try cmdret.stdout.strip to get rid of any extra whitespace
[2013-03-14 13:58:38 -0400] Chobobo: Well here it goes.  I am going to attempt my first boot on folsom :/
[2013-03-14 14:03:59 -0400] Illusioneer: I know this is sort of a dumb question but I've been digging through google and i'm not getting any clarification, the 'node.json' file, is it used to define all nodes?
[2013-03-14 14:04:04 -0400] ss__: @jsnapp i think i fixed my problem. I used regex to get rid of the new line. Thanks for your suggestions! :)
[2013-03-14 14:04:37 -0400] geekbri: Illusioneer: the node.json file is used with chef solo to describe the node that chef solo will be run on
[2013-03-14 14:05:05 -0400] Illusioneer: geekbri: so each server that chef runs on should have it's own node.json?
[2013-03-14 14:05:28 -0400] jsnapp: ss__ no problem .. i'm glad you got it working
[2013-03-14 14:05:31 -0400] geekbri: Illusioneer: if you are using chef-solo then yes, each server that has chef run on it would have its own node.json, typically it will contain the run_list
[2013-03-14 14:05:51 -0400] geekbri: Illusioneer: If you are using chef server (or hosted chef), that information would be stored in the chef server as opposed to the node.json file
[2013-03-14 14:06:07 -0400] Illusioneer: thanks geekbri :)
[2013-03-14 14:06:08 -0400] geekbri: Illusioneer: you could also name that file anything you wanted, you pass it to the chef run with -j <node json file>
[2013-03-14 14:06:10 -0400] geekbri: oh no problem
[2013-03-14 14:16:25 -0400] ngrayson: If I'm writing an application cookbook and I need to set an attribute to a different value in the application cookbook can I use default or do i need to use override?
[2013-03-14 14:19:06 -0400] cpasmoi: I'd suggest override in the role definition, but I read default was enough
[2013-03-14 14:19:19 -0400] cpasmoi: on my old chef server, I had to use override
[2013-03-14 14:20:45 -0400] ngrayson: i'm trying to gangnom style remove roles. i figured default was enough but it didn't seem to change the value. i'll try it again
[2013-03-14 15:09:58 -0400] GreatSUN: hi all
[2013-03-14 15:10:01 -0400] awgross: hey
[2013-03-14 15:10:12 -0400] DaveK: hi
[2013-03-14 15:10:35 -0400] GreatSUN: if I want to install a package via yum_package, but need to implement some ruby coding directly afterwards before installing another package
[2013-03-14 15:10:54 -0400] GreatSUN: does someone know how I can do this?
[2013-03-14 15:11:27 -0400] awgross: GreatSUN: you should have the yum package install notify a ruby block (and just have the ruby block do action :nothing by default)
[2013-03-14 15:12:47 -0400] DaveK: i got a problem with knife bootstrap. iam trying to follow the tutorial to get it running, but being in a firewalled network in my company wont make it easy. most thing will still work when setting a proxy, but finally i cant advance. I get a "connection refused - connect(2)" error, when i try to bootstrap
[2013-03-14 15:13:43 -0400] GreatSUN: awgross: thanks
[2013-03-14 15:14:28 -0400] siXy: how can I use a LWRP from another cookbook?
[2013-03-14 15:15:14 -0400] GreatSUN: awgross: is it possible to notify a ruby_block with a variable?
[2013-03-14 15:15:18 -0400] DaveK: does anyone know a solution to my problem?
[2013-03-14 15:15:44 -0400] awgross: siXy: make sure your metadata.rb has the cookbook as a dependency then just call the LWRP  cookbookname_lwrpname
[2013-03-14 15:15:58 -0400] awgross: siXy: if the LWRP is default, then you can omit it and jsut use cookbookname
[2013-03-14 15:16:16 -0400] cwj: siXy: what awgross said, and you may need to include_recipe 'cookbookname'
[2013-03-14 15:16:25 -0400] cwj: in the recipe where you want to use the lwrp
[2013-03-14 15:16:31 -0400] awgross: GreatSUN: not sure? you might be able to use string interpolation in your ruby script?
[2013-03-14 15:17:15 -0400] siXy: great, thanks :)
[2013-03-14 15:17:17 -0400] GreatSUN: awgross: thing is, I got a list of packages to install and after each package, I need to run a ruby-script which sets up some hash
[2013-03-14 15:17:42 -0400] awgross: GreatSUN: can you post a code example somewhere and link it?
[2013-03-14 15:17:43 -0400] GreatSUN: and the key in the hash should be the software-package-name that is send to yum_package
[2013-03-14 15:20:30 -0400] GreatSUN: awgross: http://nopaste.info/90f38e07d7.html
[2013-03-14 15:21:05 -0400] ngrayson: DaveK you could do ssh tunnels. I'm not sure on the easiest way to have the bootstrap set that up though
[2013-03-14 15:21:31 -0400] GreatSUN: awgross: due to some package problem I have to download rpm-files and install them with rpm_package
[2013-03-14 15:22:04 -0400] awgross: DaveK: ngrayson:  knife-ssh respects ssh config, simplest to set the SSH proxy in there
[2013-03-14 15:22:08 -0400] GreatSUN: but to be able to do that, I have to download the package via name and link the file to the name
[2013-03-14 15:22:18 -0400] awgross: GreatSUN: hmm I see, a bit tricky
[2013-03-14 15:22:25 -0400] GreatSUN: yeah
[2013-03-14 15:22:41 -0400] GreatSUN: and all just cause of oracle not staying with standards
[2013-03-14 15:22:46 -0400] awgross: surpise
[2013-03-14 15:24:08 -0400] awgross: GreatSUN: you may want to extract this logic out in to a custom LWRP that you can call for each package
[2013-03-14 15:24:33 -0400] GreatSUN: LWRP = Library wrapper?
[2013-03-14 15:24:37 -0400] awgross: GreatSUN: the main reason is that is tricky to assign node data in a recipe, because it will often try to do it during the parsing phase, instead of when the rest of the recipe gets run
[2013-03-14 15:24:47 -0400] awgross: GreatSUN: Lightweight Resource provider
[2013-03-14 15:24:53 -0400] DaveK: ngrayson: iam using  knife bootstrap localhost \ --ssh-user vagrant \ --ssh-password \ -- ssh-port 2222 \  --run-list "recipe[aliases],recipe[apache2],recipe[networking_basic]" \ --bootstrap-proxy <MYPROXY> \  --sudo
[2013-03-14 15:24:53 -0400] GreatSUN: ah
[2013-03-14 15:24:55 -0400] GreatSUN: thanks
[2013-03-14 15:24:57 -0400] awgross: GreatSUN: essentially a custom chef block
[2013-03-14 15:25:15 -0400] awgross: GreatSUN: also check out using node.set['myhash']['stuff']
[2013-03-14 15:25:36 -0400] awgross: GreatSUN: In the most recent chef versions using node['foo'] = 'bar' doesnt work anymore
[2013-03-14 15:25:55 -0400] GreatSUN: ah, ok. thanks for that info
[2013-03-14 15:26:55 -0400] GreatSUN: in general my problem is that the yum_package command doesn't get executed in the same thread than the shell-command which sets up the hash
[2013-03-14 15:27:36 -0400] ngrayson: DaveK and it fails connecting to the chef server?
[2013-03-14 15:30:15 -0400] DaveK: ngrayson: i dont know if it is supposed to connect to the server at this point.
[2013-03-14 15:30:31 -0400] GreatSUN: awgross: in a LWRP it is possible to use yum_package, right?
[2013-03-14 15:31:00 -0400] awgross: GreatSUN: yes you can call other resources inside of them, essentially you are just going to wrap yum_package with a little custom logic
[2013-03-14 15:31:02 -0400] ngrayson: DaveK can you gist the output
[2013-03-14 15:31:34 -0400] GreatSUN: kk
[2013-03-14 15:31:36 -0400] GreatSUN: thanks
[2013-03-14 15:31:40 -0400] GreatSUN: will do so later on
[2013-03-14 15:35:05 -0400] test: is there a registry resource action to read?
[2013-03-14 15:35:21 -0400] test: I'm only seeing delete/create
[2013-03-14 15:36:38 -0400] teukka: jtimberman: could you please bump "users" cookbook's version number on master? so I could pin for '> 1.3.0' or something
[2013-03-14 15:38:19 -0400] DaveK: ngrayson: Bootstrapping Chef on localhost. ERROR: Network Error: Connection refused - connect(2). Check your knife configuration and network settings
[2013-03-14 15:38:48 -0400] ngrayson: can you ssh to it?
[2013-03-14 15:39:04 -0400] halfamind: Can anyone help me get going with librarian-chef? There's no installable gem (0.0.26 was yanked) and the beta release doesn't actually install the librarian-chef  bin.
[2013-03-14 15:41:12 -0400] DaveK: ngrayson: i presume that "ssh vagrant:vagrant@localhost:2222 or vagrant@localhost:2222 should work. but they dont
[2013-03-14 15:41:31 -0400] ngrayson: vagrant ssh is different than normal ssh
[2013-03-14 15:41:58 -0400] ngrayson: if you just want to test things with vagrant why are you bootstrapping?
[2013-03-14 15:43:02 -0400] DaveK: iam just trying to get through the tutorial. but iam stumbling a lot
[2013-03-14 15:43:14 -0400] ngrayson: link?
[2013-03-14 15:43:29 -0400] qhartman: Just started using the omnibus isntallation of chef-client rather than the gems installation. I have a recipe that installs the "pg" gem via the gem_package resource
[2013-03-14 15:43:32 -0400] DaveK: https://learnchef.opscode.com/quickstart/converge/
[2013-03-14 15:43:53 -0400] qhartman: when it tries to do that it attempts to build the native gem, and fails with the following in the log: https://gist.github.com/qhartman/5162430
[2013-03-14 15:44:29 -0400] qhartman: It looks to me that it's missing some SSL libs. What's the right way to make those available to the encapsulated ruby / gem environment that omnibus chef-client uses?
[2013-03-14 15:44:35 -0400] DaveK: got to the point where iam supposed to bootstrap the node, thats why iam doing it :)
[2013-03-14 15:45:20 -0400] ngrayson: DaveK want to move to #learnchef ?
[2013-03-14 15:45:56 -0400] DaveK: maybe thats a better place for me
[2013-03-14 15:46:17 -0400] DaveK: thanks for the help
[2013-03-14 15:52:46 -0400] test: this works in ruby:  Win32::Registry::HKEY_LOCAL_MACHINE.open('Software\Clients\Mail') do |reg|       in chef, states it's an unintialized constant Chef::Win32::Registry::HKEY_LOCAL_MACHINE.  Is there anything I can do to adjust?
[2013-03-14 15:59:19 -0400] zts: qhartman: I'd just use the postgresql cookbook, if I were you, but otherwise refer to that recipe for the tricks required: https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/ruby.rb
[2013-03-14 16:00:55 -0400] awgross: anyone else have trouble with using the chef mail handler causing SSL issues (and ignoring options not to use SSL/ ignore cert mismatch?)
[2013-03-14 16:01:50 -0400] awgross: i template my mail.rb file with proper pony settings and it just seems to ignore them
[2013-03-14 16:04:28 -0400] j^2: in opensource chef server, is there a way to call back to the server and say "hey these are how many resources i've updated?"
[2013-03-14 16:04:42 -0400] j^2: or is that a fundemental no-no with chef? i can see it both ways
[2013-03-14 16:05:08 -0400] gchristensen: j^2: look into report handlers
[2013-03-14 16:05:16 -0400] j^2: gchristensen: nice!
[2013-03-14 16:05:18 -0400] j^2: thanks
[2013-03-14 16:05:22 -0400] gchristensen: :) you're welcome
[2013-03-14 16:08:31 -0400] qhartman: zts, Thanks for the pointer
[2013-03-14 16:09:11 -0400] giorgian: hi; does anyone know why, since a few weeks ago, Chef client (10.16.0 and 10.24.0) on Windows runs on a new cmd windows (that then is closed at the end, taking with it any useful output) instead than in the current one?
[2013-03-14 16:14:01 -0400] j^2: so i hate not having a aggreate chef place
[2013-03-14 16:14:03 -0400] j^2: so i created
[2013-03-14 16:14:05 -0400] j^2: http://www.reddit.com/r/chef_opscode/
[2013-03-14 16:22:40 -0400] halfamind: Hi folks I'm trying to work with librarian-chef. Will it allow me to keep some stub cookbooks in the destination directory? (I need them to override some of my host's default chef templates.)
[2013-03-14 16:23:17 -0400] halfamind: Or is there a way to declare those in the Cheffile? Everything I've tried so far causes them to be deleted from the destination directory when I run "librarian-chef install."
[2013-03-14 16:24:32 -0400] hikeit: you could put them in a separate folder, then declare them in the cheffile
[2013-03-14 16:24:40 -0400] hikeit: then they'd get copied in
[2013-03-14 16:27:31 -0400] eliklein: hola, any other berkshelf users experiencing problems uploading cookbooks to hosted chef at the moment?
[2013-03-14 16:27:43 -0400] eliklein: or am i doing it wrong? :) just getting started playing with berkself
[2013-03-14 16:27:46 -0400] eliklein: +h
[2013-03-14 16:28:36 -0400] halfamind: hikeit: Thanks. Do you know if berkshelf handles this scenario better? I have several instances where I'll need to preserve directories in the destination, but I'd like librarian (or berkshelf) to maintain the others.
[2013-03-14 16:30:43 -0400] hikeit: i haven't used berkshelf in a while, it didn't support my use case back in december when i was deciding between them (the update function was broken), and now my team knows librarian
[2013-03-14 16:31:54 -0400] aruntomar: halfamind: librarian will override your cookbooks directory. so you could create a sites-cookbooks directory and place all your own/custom cookbooks there, that way, they won't be overwritten.
[2013-03-14 16:34:00 -0400] halfamind: Thanks hikeit, aruntomar will try that next.
[2013-03-14 16:42:01 -0400] gamafranco: hi
[2013-03-14 16:42:19 -0400] gamafranco: quick question: is it possible to add alias to .bashrc with user_account ?
[2013-03-14 16:43:50 -0400] halfamind: hikeit, aruntomar: Do you have any suggestions for getting librarian-chef running? The beta version doesn't seem to add the librarian-chef executable.
[2013-03-14 16:48:00 -0400] hikeit: the current release i think there are maybe two gems? I'm not sure, we still run v0.26
[2013-03-14 16:49:05 -0400] halfamind: hikeit: Yeah, but 0.0.26 doesn't allow you to specify the --path to install at. I'm installing the pre-release of librarian-chef but there's not librarian-chef executable for some reason.
[2013-03-14 16:50:29 -0400] hikeit: halfamind: i specify the path by doing "export LIBRARIAN_CHEF_PATH=vendor_cookbooks" before running librarian-chef
[2013-03-14 16:51:06 -0400] hikeit: halfamind: (not ideal, but perfectly functional)
[2013-03-14 16:55:57 -0400] halfamind: hikeit: Sweet! Thanks for that.
[2013-03-14 16:56:44 -0400] drgage: so i need to install jenkins today, but the opscode jenkins cookbook is undergoing "major refactoring" and has no readme, but the old heavywater cookbook it's based on is deleted. recommendations?
[2013-03-14 17:01:31 -0400] cwj: drgage: if you cant wait, grab 0.6.3 from http://community.opscode.com/cookbooks/jenkins
[2013-03-14 17:04:02 -0400] drgage: cwj: thanks. i managed to overlook the giant download button, only saw the github link :)
[2013-03-14 17:04:10 -0400] cwj: no worries :)
[2013-03-14 17:08:18 -0400] drgage: wow, long distance 10gig?
[2013-03-14 17:08:21 -0400] drgage: oops mischan
[2013-03-14 17:11:27 -0400] leifmadsen: afternoon all! I'm hoping to output some information in a motd file, and right now I have node.run_state with some filtering that gives me a list of the cookbooks. I would also like to show the version of the cookbook, but node.run_state.to_yaml doesn't appear to show anything like that. Is there another attribute I can look at?
[2013-03-14 17:12:15 -0400] Liquid--: any body have experience with troubleshooting this error: ERROR: EOFError: end of file reached --- I receive this when I try to run knife node list or knife cookbook upload. Also, It looks like the web gui for chef is locked up. Is this as simple as restarting a service on the chef server?
[2013-03-14 17:12:23 -0400] Liquid--: is the fix*
[2013-03-14 17:14:16 -0400] gamafranco: is anyone adding alias to a user's bashrc file? like ll = ls -la
[2013-03-14 17:14:33 -0400] hikeit: liquid--: chef 10 or chef 11?
[2013-03-14 17:15:00 -0400] bougyman: anyone like in general, gamafranco ?
[2013-03-14 17:15:11 -0400] gamafranco: someone, sorry
[2013-03-14 17:15:14 -0400] gamafranco: I meant someone
[2013-03-14 17:15:17 -0400] Liquid--: 10.16.2
[2013-03-14 17:15:31 -0400] gamafranco: bougyman: need to know how to do it
[2013-03-14 17:16:43 -0400] hikeit: liquid--: that used to be a problem for us when one of the underlying services fell over. check that chef-solr, chef-server and couchdb are all running
[2013-03-14 17:17:52 -0400] hikeit: they seemed to generally break when log file ownership changed or when various gems got updated unexpectedly (chef-solr and chef-client versions need to match in v10 for example)
[2013-03-14 17:18:06 -0400] Liquid--: They all appear to be running right now
[2013-03-14 17:18:51 -0400] hikeit: i guess check rabbitmq-server and chef-expander, though those've never been a problem for us
[2013-03-14 17:19:16 -0400] bougyman: gamafranco: I have http://sprunge.us/BACI in my ~/.zsh/aliases
[2013-03-14 17:19:24 -0400] bougyman: which I include from my ~/.zshrc
[2013-03-14 17:19:48 -0400] hikeit: alternatively try restarting chef-solr and couchdb, then chef-server
[2013-03-14 17:21:45 -0400] gamafranco: hanks
[2013-03-14 17:24:05 -0400] Liquid--: awesome! I am trying to restart those now.
[2013-03-14 17:29:04 -0400] scalp: I have a super newbish question
[2013-03-14 17:30:25 -0400] scalp: I dont have that site-cookbooks directory, and I keep seeing it. Whats the difference between the `cookbooks` and `site-cookbooks` in chef repo. Which one should I use to vendor cookbooks with Berkshelf (so I can have my team contribute) please ?
[2013-03-14 17:30:31 -0400] scalp: (go hide in a corner)
[2013-03-14 17:31:15 -0400] Liquid--: hikeit: chef-solr is failing to start now, I'm wondering if I have deeper issues lol.
[2013-03-14 17:31:33 -0400] hikeit: did you update chef-client?
[2013-03-14 17:31:41 -0400] hikeit: that's what happened on our servers
[2013-03-14 17:31:55 -0400] hikeit: we updated client across the board, then solr wouldn't start up
[2013-03-14 17:32:04 -0400] hikeit: tried to update solr and it complained about different formats
[2013-03-14 17:32:15 -0400] hikeit: ended up downgrading back to 10.16 for client and solr
[2013-03-14 17:32:30 -0400] hikeit: (and then migrated to chef 11 server, which is *so* much better)
[2013-03-14 17:33:59 -0400] Liquid--: You know, I think we did do a max update of chef-client. That may be it!
[2013-03-14 17:34:13 -0400] Liquid--: mass*
[2013-03-14 17:35:20 -0400] Liquid--: but the update we ran was just to get some of our stragglers to run 10.16.2 instead of the previous version of chef-client
[2013-03-14 17:36:13 -0400] Liquid--: and chef-sole is 10.16.2
[2013-03-14 17:36:27 -0400] Liquid--: solr*
[2013-03-14 17:36:33 -0400] hikeit: anything in the chef-solr log for the startup?
[2013-03-14 17:37:06 -0400] hikeit: for a lot of the server components i've needed to tear open the init script and run by hand from the command line to see the errors
[2013-03-14 17:49:28 -0400] knuckolls_: scalp: cookbooks and site-cookbooks are a bit of an outdated practice, and certainly aren't used with berkshelf in my opinion. berkshelf expects cookbooks to be in their own repositories. people used to use cookbooks and site-cookbooks when they kept all their cookbooks in one master repository.
[2013-03-14 17:49:44 -0400] knuckolls_: i shouldn't say their outdated, lots of people still use them.
[2013-03-14 17:49:53 -0400] knuckolls_: eh bad english. "they are"
[2013-03-14 17:50:05 -0400] knuckolls_: but w/ berkshelf you'll do it one cookbook per repo
[2013-03-14 17:55:40 -0400] scalp: knuckolls: I see
[2013-03-14 17:55:56 -0400] scalp: I'm trying to work with the many constraints I have, one being only one repo for everything
[2013-03-14 17:56:24 -0400] scalp: so I thought of vendoring cookbook with berkshelf vendor or something like this
[2013-03-14 17:58:35 -0400] halfamind: Can anyone show me an example of referencing a private github repo in a Cheffile?
[2013-03-14 17:59:32 -0400] cwj: cookbook 'foo', :git => 'git+ssh://git@github.com/yourorg/chef-foo.git'
[2013-03-14 17:59:47 -0400] cwj: thats how i roll anyway
[2013-03-14 18:00:26 -0400] awgross: anyone have issues with getting mail_handler to work with a self signed cert?  doesnt seem to be respecting the openssl verify mode
[2013-03-14 18:00:52 -0400] awgross: looks like before it makes it to the mail gem it is only passing defaults
[2013-03-14 18:01:10 -0400] awgross: somewhere in pony maybe?
[2013-03-14 18:02:14 -0400] halfamind: cwj: Uh can you link me to something that explains that by any chance? I was hoping to use the credentials from a "machine" account we have.
[2013-03-14 18:02:31 -0400] Liquid--: hikeit: hmm I'm looking at the /var/log/chef/solar.log  --found this at the end off the log file
[2013-03-14 18:02:32 -0400] Liquid--: INFO: created sdoub[2013-03-14T11:26:02-06:00] WARN: The maxFieldLimit for the mainIndex is set to 10000.  It's recommended to increase this value (in /var/lib/chef/solr/conf/solrconfig.xml).
[2013-03-14 18:02:32 -0400] Liquid--: [2013-03-14T11:26:02-06:00] INFO: About to change privilege to chef:chef
[2013-03-14 18:02:33 -0400] Liquid--: [2013-03-14T11:26:02-06:00] FATAL: Chef is already running pid 0
[2013-03-14 18:03:12 -0400] Liquid--: not sure if there is really anything useful there.
[2013-03-14 18:03:15 -0400] hikeit: maybe try "id chef" to make sure the chef user exists
[2013-03-14 18:03:18 -0400] rep0st: so..i have an encrypted data bag that i created after bootstrapping my nodes. What's the best way of getting the secrets file to all my nodes? is there any voodoo magic/
[2013-03-14 18:03:45 -0400] Liquid--: it does exist
[2013-03-14 18:04:18 -0400] cwj: halfamind: unless there is a way to get librarian to use an ssh wrapper, maybe something similar to how GIT_SSH env var is used by git, then you'll probably need to have a valid ssh key for that repo loaded into a running ssh-agent process before running librarian
[2013-03-14 18:04:45 -0400] ypaq: hey, is it reasonable to use https://www.opscode.com/chef/install.sh vs. gem install chef in a bootstrap script when using knife?
[2013-03-14 18:04:50 -0400] knuckolls_: scalp: you may be able to configure your berksfile to use everything in one repo. don't worry about site-cookbooks though, previously people would put their personal cookbooks in site-cookbooks and upstream cookbooks in cookbooks. berkshelf gets rid of any concerns with managing upstream cookbooks
[2013-03-14 18:05:46 -0400] cwj: ypaq: yes, thats exactly the approach used by the chef-full bootstrap template which ships with chef
[2013-03-14 18:05:48 -0400] cwj: ypaq: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-03-14 18:06:21 -0400] ypaq: thanks!
[2013-03-14 18:08:16 -0400] hikeit: liquid: hmm
[2013-03-14 18:08:50 -0400] hikeit: maybe try restarting the server? could be that chef-solr didn't stop completely
[2013-03-14 18:09:10 -0400] pizzahead: quick question about chef, how does chef-client become aware of changes to a role or recipe ?  I assumed it checked in but I'm not sure how often this happens and it seems like from my status page the node is only checking in during the initial deployment.
[2013-03-14 18:09:16 -0400] Liquid--: sweetness, trying that now.
[2013-03-14 18:10:03 -0400] cwj: pizzahead: either you run chef-client as a daemon process which checks in with the server on an interval, or you run it as needed
[2013-03-14 18:10:23 -0400] pizzahead: cwj: so I should have a recipe that is configuring chef-client to run as a daemon?
[2013-03-14 18:10:28 -0400] eXoRt: hey guys, i'm trying to use a node attribute and chef method #{cookbook_name} together in a not_if. I've try different syntax without luck. Can anyone help ?
[2013-03-14 18:10:29 -0400] cwj: pizzahead: so in this case it sounds like you want/expect it to run as a daemon but it hasn't been configured or started
[2013-03-14 18:10:53 -0400] cwj: pizzahead: i believe the opscode chef-client cookbook has such a recipe
[2013-03-14 18:11:02 -0400] cwj: https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/service.rb
[2013-03-14 18:11:09 -0400] pizzahead: cwj: thanks a lot!
[2013-03-14 18:11:19 -0400] cwj: no problem
[2013-03-14 18:11:22 -0400] scalp: knuckolls: so I'm gonna create our app cookbooks into the chef repo under lets say "taskrabbit/app_name". In each app_name, I'm gonna put a Berksfile with cookbook needed. I'll finally do berks install vendor cookbooks I'm thinking ?
[2013-03-14 18:11:39 -0400] Liquid--: tried to restart - it fails
[2013-03-14 18:11:43 -0400] Liquid--: then i get the following
[2013-03-14 18:11:45 -0400] Liquid--: Checking status of chef-server: apparently not running failed!
[2013-03-14 18:11:47 -0400] Kzim: hi !
[2013-03-14 18:12:05 -0400] eXoRt: not_if {registry_key_exists?("#{node['notepad2']['reg_32']")#{cookbook_name}"\\"} <------Not sure how to include the cookbook_name in this syntax for reg key exists. Help?
[2013-03-14 18:12:13 -0400] scalp: knuckolls: then if folks wanna contribute in my team, they'll clone chef repo, and make changes in each taskrabbit/app_name and hopefully magic will happen.
[2013-03-14 18:12:15 -0400] Liquid--: when running chef-server status - I see it in my process list. Wonder if I need to rudely kill the process and start over.
[2013-03-14 18:12:27 -0400] scalp: (relying more and more on magic lately)
[2013-03-14 18:12:29 -0400] Kzim: i want to create a simple ... function say "nodejs" that take argument like log_dir, and init_type. is it a ressource or a provider ?
[2013-03-14 18:14:49 -0400] wamilton: Kzim: the point of resources and providers is to separate the configuration of similar things and the implementation of handling that configuration
[2013-03-14 18:15:13 -0400] wamilton: Kzim: what do you want this 'function' to do?
[2013-03-14 18:16:25 -0400] Kzim: wamilton, i want a generic way to setup a nodejs application that will be called on other recipe like node_instance "myapp" do logidr=/var... startjs=/blog.js end or something
[2013-03-14 18:17:57 -0400] wamilton: Kzim: if you're literally just looking for a standard interface to configure the same set of resources many times, you should make a definition, which takes configuration just like a resource
[2013-03-14 18:19:01 -0400] wamilton: Kzim: a good example is the apache2 web_app definition
[2013-03-14 18:19:20 -0400] hikeit: liquid: might be worth it, i guess i meant try just restarting the whole VM
[2013-03-14 18:20:36 -0400] scalp: knuckolls: I disconnected in case you answered :)
[2013-03-14 18:20:48 -0400] Kzim: wamilton, oh okay it's called definition thank !
[2013-03-14 18:20:54 -0400] Kzim: i ll check the apache2 one thank you
[2013-03-14 18:22:25 -0400] scalp: also I often see recipes/default.rb empty. I suppose it's to force calling a particular recipe and act as a safe catch or something like this ?
[2013-03-14 18:25:47 -0400] geekbri: Kzim: Resources have providers, but you can't really have one without the other
[2013-03-14 18:25:54 -0400] geekbri: Kzim: If something is a resource it has at least 1 provider
[2013-03-14 18:26:13 -0400] geekbri: Kzim: take for example the "package" resource, it could have a debian, redhat, or windows provider
[2013-03-14 18:26:55 -0400] geekbri: Kzim: A definition is different than a resource.  A definition is just a shortcut layer on top of a resource.  In the end ultimately in your resource collection the definition is replaced by the resource its defining
[2013-03-14 18:27:14 -0400] geekbri: Kzim: You won't be able to deal with notifications properly if its a definition.
[2013-03-14 18:31:17 -0400] Liquid--: hikeit: mmkay, I'll try that.
[2013-03-14 18:38:28 -0400] Kzim: geekbri, i see thanks a lot, i ll start with a definition and then read more about resources
[2013-03-14 18:41:37 -0400] scalp: I'm writing a wrapper cookbook that happens to include 'redis' cookbook. I would like to change the redis version from the original redis cookbook by some ruby code. Can I do this in attributes.rb ?
[2013-03-14 18:41:56 -0400] scalp: default[:redis][:version] = "2.0.2" -> default[:redis][:version] = [curl something that returns me "2.0.2"]
[2013-03-14 18:43:17 -0400] awgross: scalp: you should use override instead of default, I think ruby code will get run in the attributes file as it gets parsed
[2013-03-14 18:44:09 -0400] sascha_d: hey chefs, does anyone know the current state of the route resource? Is it usable or still shaky?
[2013-03-14 18:48:08 -0400] Apes: Has anyone here gotten Chef working with Razor?
[2013-03-14 18:48:17 -0400] macros: sascha_d: I would avoid for the simple reason is that it is only peristent on red hat last I looked
[2013-03-14 18:50:58 -0400] sascha_d: @macros it only needs to work on rh for me
[2013-03-14 18:51:26 -0400] sascha_d: last time I used it it was a little buggy though with remaking the route every time or something
[2013-03-14 18:52:04 -0400] sascha_d: @Apes you should check out Fletcher's Razor Chef demo
[2013-03-14 18:52:19 -0400] sascha_d: @Apes http://www.bluebox.net/about/blog/2013/01/provisioning-with-razor-and-chef-an-interactive-demo/
[2013-03-14 18:53:04 -0400] xerxas: Hi all
[2013-03-14 18:53:15 -0400] xerxas: does anyone uploads file to s3 from a chef run ?
[2013-03-14 18:53:19 -0400] xerxas: does it makes sense ?
[2013-03-14 18:55:25 -0400] kallistec: sascha_d: I remember reviewing patches to fix it, but I can't remember if they made it to release yet
[2013-03-14 18:55:43 -0400] sascha_d: @kallistec I will chef-shell it and see what I find
[2013-03-14 18:55:52 -0400] sascha_d: there are some open tickets/pull requests
[2013-03-14 18:56:04 -0400] ranjibd: xerxas: i do. using s3cmd ,,
[2013-03-14 18:57:36 -0400] xerxas: ranjibd: thx, this is what I used to do, but I would prefer doing it in ruby, but doesn't seem to exist
[2013-03-14 18:58:51 -0400] ranjibd: xerxas: you can write an lwrp using aws sdk for ruby if you want
[2013-03-14 18:59:12 -0400] xerxas: ranjibd: yes, adding it to the aws cookbook
[2013-03-14 18:59:19 -0400] xerxas: but I don't code well ;)
[2013-03-14 19:02:07 -0400] scalp: awgross: any chance you could look at this ? https://gist.github.com/scalp42/5164178
[2013-03-14 19:02:58 -0400] awgross: might work? try it out and see
[2013-03-14 19:03:01 -0400] scalp: if I have a default attribute in 'redis' cookbook and I still set up default attribute in my wrapper cookbook 'tr_redis', would I end up getting 'redis' or 'tr_redis' attributes?
[2013-03-14 19:03:07 -0400] awgross: also use override scalp
[2013-03-14 19:03:26 -0400] awgross: scalp: attribute names are not namespaced by cookbook, thats just a convention
[2013-03-14 19:03:53 -0400] scalp: okay I see, so override or node.set['redis'] ?
[2013-03-14 19:04:10 -0400] awgross: scalp: override would be best in that situation
[2013-03-14 19:04:22 -0400] scalp: gotcha will do then!
[2013-03-14 19:04:23 -0400] awgross: i think
[2013-03-14 19:04:33 -0400] scalp: thanks for the help awgross!
[2013-03-14 19:04:37 -0400] awgross: np
[2013-03-14 19:07:22 -0400] rep0st: i'm starting to think there is no "right way" of managing an infrastructure with chef. Meaning, i feel like no matter what approach i take i won't pidgeon hole my self into oblivion.
[2013-03-14 19:07:25 -0400] rep0st: anybody else agree?
[2013-03-14 19:08:43 -0400] ranjibd: rep0st: TMTOWTDI
[2013-03-14 19:09:08 -0400] doomviking: not sure I'd make a sweeping generalization like that; there are *lots* or wrong ways to do it. Chef kinda helps minimize those, to a certain degree.
[2013-03-14 19:09:22 -0400] doomviking: *of
[2013-03-14 19:09:23 -0400] ranjibd: recipes reflect how one's own workflows. and we cant generalize that
[2013-03-14 19:10:22 -0400] ranjibd: but we can generalize that there are certain best practices.. like dont keep non-idempotent stuff.. dont do lot of ruby foo in the recipe.. keep the ability to customization via attributes (standard OCP) etc
[2013-03-14 19:15:25 -0400] rep0st: ranjibd: wut? TMTOWTDI?
[2013-03-14 19:15:40 -0400] ranjibd: there is more than one way to do it
[2013-03-14 19:15:49 -0400] rep0st: ranjibd: got it
[2013-03-14 19:22:26 -0400] kryptek: Is it possible to use 'include_recipe' and supply a version for the cookbook to use?
[2013-03-14 19:23:22 -0400] awgross: kryptek: versions can only be specified in the 'depends' in metadata.rb
[2013-03-14 19:23:31 -0400] awgross: you can also lock versions with environment files
[2013-03-14 19:23:34 -0400] kryptek: ahh.. i'll try that
[2013-03-14 19:23:43 -0400] kryptek: Yeah, we used to lock'em with env files but we don't anymore
[2013-03-14 19:25:36 -0400] kryptek: thanks a lot bro
[2013-03-14 19:51:09 -0400] mgalkiewicz: hi guys
[2013-03-14 19:51:22 -0400] hikeit: hello
[2013-03-14 19:51:37 -0400] hikeit: yay bought my chefconf and cookbook authoring workshop tickets today!
[2013-03-14 19:51:39 -0400] mgalkiewicz: how secure is using default or override attributes for storing any kind of passwords and credentials?
[2013-03-14 19:52:08 -0400] hikeit: what avenues of security are you worried about?
[2013-03-14 19:53:04 -0400] hikeit: as of chef 11, all information in-transit is secured by SSL, but if you have access to either the chef server or the node, you could probably get the data out
[2013-03-14 19:53:21 -0400] miah: if you're worried you could use encrypted data bags
[2013-03-14 19:53:25 -0400] mgalkiewicz: I am configuring many kinds of servers with single chef and I am considering what happens when one of nodes will be compromised and could read anyone's attributes
[2013-03-14 19:53:55 -0400] hikeit: ^ what miah said
[2013-03-14 19:53:56 -0400] mgalkiewicz: but as we now default and override are not persistent
[2013-03-14 19:54:57 -0400] hikeit: open source server if you have a client key you can read practically everything (attributes, cookbooks, data bags, etc) writes are limited however
[2013-03-14 19:55:06 -0400] mgalkiewicz: yes but it aggravate deployment (need to manually copy necessary keys)
[2013-03-14 19:55:15 -0400] hikeit: in private chef and hosted chef you could possibly lock it down
[2013-03-14 19:55:31 -0400] hikeit: bootstrap can drop in the keys
[2013-03-14 19:55:41 -0400] Majost: Is it possible to monkey patch a chef recipe from another cookbook/recipe?
[2013-03-14 19:56:30 -0400] mgalkiewicz: ok but if attributes are not persistent in theory I cannot read them any time I want
[2013-03-14 19:57:10 -0400] hikeit: attribute values get written out to the chef server in the node.save that happens at the end of the run
[2013-03-14 19:57:19 -0400] hikeit: they also get indexed in solr
[2013-03-14 19:57:27 -0400] bean: if you have passwords you likely want them in an encrypted databag.
[2013-03-14 19:57:38 -0400] bean: just a best practice.
[2013-03-14 19:58:01 -0400] mgalkiewicz: yeah but many cookbooks dont support such things
[2013-03-14 19:58:16 -0400] mgalkiewicz: even opscode uses attributes as the main source of data
[2013-03-14 19:58:44 -0400] mgalkiewicz: for example attributes in rabbitmq cookbook where user credentials are stored
[2013-03-14 19:59:08 -0400] mgalkiewicz: why do you write them in such way? just because it is simple?
[2013-03-14 19:59:36 -0400] gamafranco: :)
[2013-03-14 19:59:50 -0400] gamafranco: what is the best way to add text to .bashrc on a recipe?
[2013-03-14 20:00:21 -0400] miah: also. if somebody hacks your server the 'passwords' are probably going to be in a place thats accessible anyways.
[2013-03-14 20:00:30 -0400] mgalkiewicz: gamafranco:  I suggest sourcing entire directory like .bashrc.d and put file there
[2013-03-14 20:00:57 -0400] gamafranco: mgalkiewicz: sourcing? a template?
[2013-03-14 20:00:59 -0400] miah: mgalkiewicz: its up to you to decide if thats the way you want to do things. you can write your own cookbook if its not up to your standards =)
[2013-03-14 20:01:15 -0400] matti: gamafranco: What mgalkiewicz said.
[2013-03-14 20:01:54 -0400] gamafranco: matti: I don't understand what is meant by 'sourcing'
[2013-03-14 20:02:00 -0400] gamafranco: sorry
[2013-03-14 20:02:07 -0400] matti: gamafranco: You can include different bash script into another.
[2013-03-14 20:02:16 -0400] mgalkiewicz: gamafranco: no sourcing in bashrc like: source ~/.bashrc.d/*
[2013-03-14 20:02:21 -0400] gamafranco: ah
[2013-03-14 20:02:22 -0400] matti: gamafranco: This is for instance what a lot of init script would do on Debian.
[2013-03-14 20:02:25 -0400] gamafranco: ok, I got it
[2013-03-14 20:02:27 -0400] gamafranco: but
[2013-03-14 20:02:27 -0400] matti: mgalkiewicz: That actually is a bad idea.
[2013-03-14 20:02:33 -0400] mgalkiewicz: why?
[2013-03-14 20:02:44 -0400] matti: mgalkiewicz: for f in ~/.bashrc.d/* ; do . $f ; done
[2013-03-14 20:02:48 -0400] gamafranco: how do I append 'source ' to .bashrc?
[2013-03-14 20:03:08 -0400] mgalkiewicz: yeah I just wanted to give him a general idea
[2013-03-14 20:03:11 -0400] matti: Ah :)
[2013-03-14 20:03:29 -0400] matti: This is how /etc/profile.d/ is done on Debian / Ubuntu etc.
[2013-03-14 20:03:31 -0400] gamafranco: I want to append and environment varialble
[2013-03-14 20:03:36 -0400] gamafranco: and prob one or two alias
[2013-03-14 20:03:43 -0400] matti: gamafranco: It is easier to drop a file, thather than edit file in place.
[2013-03-14 20:03:47 -0400] gamafranco: but the alias are optional, and the variable is just for one user
[2013-03-14 20:03:54 -0400] gamafranco: I see
[2013-03-14 20:04:02 -0400] matti: gamafranco: Then consider dropping a file in under /etc/profile.d/<file>.sh
[2013-03-14 20:04:11 -0400] gamafranco: must be on the user's env
[2013-03-14 20:04:12 -0400] matti: gamafranco: And any login shell will pick it up.
[2013-03-14 20:04:29 -0400] gamafranco: this is just for one user, but I see your point
[2013-03-14 20:04:30 -0400] gamafranco: thanks
[2013-03-14 20:04:34 -0400] matti: :)
[2013-03-14 20:04:49 -0400] gamafranco: and to drop the file, what is the chef way to do that?
[2013-03-14 20:04:54 -0400] matti: You can drop a file. You can template.
[2013-03-14 20:04:57 -0400] gamafranco: ok
[2013-03-14 20:04:58 -0400] matti: You can cookbook_file it.
[2013-03-14 20:05:00 -0400] gamafranco: I see
[2013-03-14 20:05:03 -0400] gamafranco: thanks
[2013-03-14 20:05:03 -0400] mgalkiewicz: hikeit: bean: any ideas why the cookooks are written in such way?
[2013-03-14 20:05:29 -0400] hikeit: probably just because it is easier, but i've no more insight into the inner workings at opscode than you :)
[2013-03-14 20:06:15 -0400] gamafranco: ok, thanks so much
[2013-03-14 20:06:28 -0400] gamafranco: I'll put .bashrc under version control then
[2013-03-14 20:06:28 -0400] gamafranco: thanks
[2013-03-14 20:06:31 -0400] mgalkiewicz: jtimberman: are you there?
[2013-03-14 20:06:41 -0400] hikeit: mgalkiewicz: you could relatively easily monkey patch the various resources with encrypted data bag content
[2013-03-14 20:08:17 -0400] mgalkiewicz: ok thx for help
[2013-03-14 20:09:10 -0400] matti: mgalkiewicz: Google for Lusis's blog post about encrypted data bags.
[2013-03-14 20:09:42 -0400] mgalkiewicz: checking
[2013-03-14 20:14:09 -0400] miah: http://jtimberman.housepub.org/blog/2011/08/06/encrypted-data-bag-for-postfix-sasl-authentication/
[2013-03-14 20:14:22 -0400] miah: http://lusislog.blogspot.com/2011/01/chef-and-encrypted-data-bags-revisted.html
[2013-03-14 20:21:42 -0400] godxzilla: anyone in here have a good way to remove a recipe from a run list via knife exec?
[2013-03-14 20:22:11 -0400] godxzilla: I need to remove it from multiple nodes via script, so I figured knife exec was the best way
[2013-03-14 20:24:12 -0400] brianseeders: can you use a role and update the role instead?
[2013-03-14 20:24:34 -0400] bean: or a cookbook that includes multiple other recipes
[2013-03-14 20:24:46 -0400] bean: roles suck, imo, cuz they aren't versioned
[2013-03-14 20:25:08 -0400] wamilton: bean: that's entirely dependent on your organizations process
[2013-03-14 20:25:15 -0400] bean: aware.
[2013-03-14 20:27:45 -0400] godxzilla: I just saw the knife node run_list command
[2013-03-14 20:27:51 -0400] godxzilla: I can wrap that into a for loop
[2013-03-14 20:31:48 -0400] miah: lots of people say that. i feel like they just don't know how to use attributes
[2013-03-14 20:32:01 -0400] miah: re: "roles suck"
[2013-03-14 20:32:32 -0400] matti: miah: There is a lot of things that sucks :)
[2013-03-14 20:32:55 -0400] miah: yes, especially vacuums
[2013-03-14 20:33:00 -0400] matti: Damn.
[2013-03-14 20:33:02 -0400] matti: YOu were quicker
[2013-03-14 20:33:04 -0400] matti: ;/
[2013-03-14 20:33:13 -0400] matti: :>
[2013-03-14 20:39:13 -0400] wamilton: for me 'roles suck' when a cookbook has no published usage example that doesn't involve creating roles
[2013-03-14 20:39:45 -0400] Kzim: lANyone know a sudo cookbook that allow to specify command for example in attributes ?
[2013-03-14 20:42:36 -0400] rep0st: imho i like roles for generic settings that don't require modifying a cookbook straight up. I'm no ruby expert, but it's easier on my team who don't know chef as well as i do to add a change.
[2013-03-14 20:44:10 -0400] rep0st: i <3 roles there i said it
[2013-03-14 20:44:19 -0400] matti: LOL
[2013-03-14 20:44:31 -0400] matti: rep0st: I'd recommend anti-stab vest too ;d
[2013-03-14 20:44:53 -0400] rep0st: matti: lol then i'd have an HEV suit from half life
[2013-03-14 20:45:05 -0400] matti: HEV \o/
[2013-03-14 20:45:26 -0400] matti: You will hear this robotic female voice.
[2013-03-14 20:45:28 -0400] kallistec: with any luck, we'll add role versioning in chef 12 and you all can stop the stabbing
[2013-03-14 20:45:39 -0400] matti: Saying that you have severe bleeding ...
[2013-03-14 20:45:40 -0400] matti: ;p
[2013-03-14 20:45:46 -0400] rep0st: matti: ohh the memories
[2013-03-14 20:45:50 -0400] matti: Yeah ;]
[2013-03-14 20:45:56 -0400] matti: +1
[2013-03-14 20:46:12 -0400] ranjibd_: roles with versions.. that would be nice!
[2013-03-14 20:46:28 -0400] rep0st: i dunno i guess every environment is different.
[2013-03-14 20:47:07 -0400] rep0st: but roles allowed me a complete beginner at config management and ruby to setup VMs alot quicker
[2013-03-14 20:47:13 -0400] rep0st: setting dns settings and what not
[2013-03-14 20:48:54 -0400] miah: kallistec: =)
[2013-03-14 20:49:04 -0400] miah: i personally think its just an educational issue
[2013-03-14 20:49:16 -0400] miah: we should stive to make few changes to cookbooks
[2013-03-14 20:49:18 -0400] matti: kallistec: Add DSL for Nodes et al
[2013-03-14 20:49:20 -0400] miah: strive
[2013-03-14 20:49:34 -0400] matti: kallistec: JSON is so .... No.
[2013-03-14 20:50:01 -0400] miah: more library cookbooks with wrapper cookbooks that pull data from 'attributes, databags, or third party data sources' that are passed as messages to the resources
[2013-03-14 20:50:12 -0400] miah: my mind has been corrupted by oop though =)
[2013-03-14 20:50:38 -0400] rep0st: miah: that's the approach i'm taking. Cookbooks shouldn't really change often. Probably more on the application level, but when setting up environment settings like dns,ntp, smtp relay. There's very little need in changing the cookbook
[2013-03-14 20:50:46 -0400] miah: yup
[2013-03-14 20:50:51 -0400] miah: you're just passing some details
[2013-03-14 20:51:15 -0400] miah: to a hopefully stable public interface
[2013-03-14 20:51:40 -0400] qhartman: I used to like roles
[2013-03-14 20:51:44 -0400] miah: this is why hwrp and lwrp are more useful than a cookbook that is just a singular recipe
[2013-03-14 20:51:46 -0400] DrVonNostren: so guys, im a little new at this, and ive written recipes to distribute a small amount of files, into a folder, but what if i want to distribute a huge directory tree and simply recursively apply ownership and permissions? I certainly dont have to do this file by file folder by folder right?
[2013-03-14 20:51:52 -0400] hikeit: we use ruby DSL for our environments and roles knife diff seems to not support them at all
[2013-03-14 20:52:00 -0400] miah: people who hate roles also probably write cookbooks that mostly live in /recipes
[2013-03-14 20:52:01 -0400] qhartman: but then the "you can safely isolate one env from role changes" bit me
[2013-03-14 20:52:13 -0400] qhartman: s/can/can't/
[2013-03-14 20:52:28 -0400] miah: you can override attributes in environments
[2013-03-14 20:52:34 -0400] miah: and you can use environment specific run lists in roles
[2013-03-14 20:52:42 -0400] miah: im not sure how you can still get to a isolation issue
[2013-03-14 20:53:17 -0400] qhartman: Interesting, I did not know about env-specific runlists in roles
[2013-03-14 20:53:25 -0400] rep0st: qhartman: i have two environments that override my sudo attributes because i hvae different requirements for dev and prod vms.
[2013-03-14 20:53:26 -0400] miah: env_run_lists
[2013-03-14 20:53:35 -0400] rep0st: qhartman: it's at the end of the role
[2013-03-14 20:53:48 -0400] miah: well, it can technically be 'anywhere' in the role definition
[2013-03-14 20:53:50 -0400] qhartman: if that's the case, it removes most of my negative feelings about them
[2013-03-14 20:54:19 -0400] rep0st: qhartman: look into it ..the docs are pretty good ..even the opscode blog introducing environments helps understand why they were needed
[2013-03-14 20:54:53 -0400] miah: http://docs.opscode.com/essentials_roles_formats.html
[2013-03-14 20:54:57 -0400] qhartman: yeah, conceptually it makes perfect sense, just didn't know it was a thing
[2013-03-14 20:55:06 -0400] rep0st: qhartman: word
[2013-03-14 20:55:12 -0400] miah: like i said, i think its a educational issue more than anything
[2013-03-14 20:55:27 -0400] qhartman: comes from learning this on the fly from people who were learning on the fly, I'm sure
[2013-03-14 20:55:30 -0400] miah: yup =)
[2013-03-14 20:55:35 -0400] rep0st: got that right
[2013-03-14 20:55:50 -0400] rep0st: <3 opscode blog to those who contribute to it
[2013-03-14 20:55:53 -0400] miah: its certainly not anybodies fault for not knowing. so long as people are reasonable when they're told there are ways to work around that issue.
[2013-03-14 20:56:18 -0400] miah: some people really stick to their 'but roles need to be versioned'
[2013-03-14 20:56:28 -0400] rep0st: miah: version nazi's
[2013-03-14 20:56:31 -0400] qhartman: yeah, with that in mind, I officially don't get all the hate roles are getting from people who should theoretically know better
[2013-03-14 20:56:35 -0400] miah: im sure ther are other reasons. but most of the arguments i hear tend to be the same
[2013-03-14 20:57:15 -0400] mmm1: When I run knife ssh "sudo chef-client", I am getting ERROR: Server returned error for http://chef-server.domain.com:4000/search/node?q=name:node01&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000, retrying 1/5 in 4s, other knife commands work and I can get to :4000 in a browser. Can anyone give me an idea where to look to resolve this problem?
[2013-03-14 20:57:54 -0400] doomviking: mmm1: is your dns in order?
[2013-03-14 20:58:04 -0400] hikeit: mmm1: can you do any other searches?
[2013-03-14 20:58:14 -0400] hikeit: also knife ssh "sudo chef-client" isn't enough of a command
[2013-03-14 20:58:20 -0400] mmm1: Can you give me an example a search?
[2013-03-14 20:58:37 -0400] qhartman: I DO want to start getting away from customizing community cookbooks though and move to the "wrapper/lib" pattern. I'm tired of re-inventing the wheel for so many things
[2013-03-14 20:58:42 -0400] miah: qhartman: i think https://yourlogicalfallacyis.com/bandwagon is usually the problem =)
[2013-03-14 20:58:46 -0400] hikeit: syntax is knife ssh <query> <command>
[2013-03-14 20:58:56 -0400] qhartman: miah, heh
[2013-03-14 20:59:03 -0400] hikeit: try knife search node name:*
[2013-03-14 20:59:31 -0400] jtimberman: released users v1.4.0 w/ chef 11 fix *and* chef-solo-search.
[2013-03-14 20:59:42 -0400] mmm1: knknife search node name:* - Gives me a the same error.
[2013-03-14 20:59:55 -0400] jtimberman: use of chef-solo-search is up to you to worry/reason about, because we still recommend and support server for search :)
[2013-03-14 20:59:59 -0400] hikeit: check if chef-solr is running on your chef server
[2013-03-14 21:00:57 -0400] log1kal: on a scale of 0-must go, how much am I willing to pay for chefcon out of pocket?
[2013-03-14 21:01:43 -0400] mmm1: chef-solr is running
[2013-03-14 21:01:45 -0400] hikeit: probably depends how deep your pocket is
[2013-03-14 21:01:58 -0400] hikeit: mmm1: can you run a search from the webui?
[2013-03-14 21:02:06 -0400] mmm1: let me try
[2013-03-14 21:03:53 -0400] mmm1: I get Unable to find the node. (500 "Internal Server Error")
[2013-03-14 21:04:43 -0400] mmm1: knife search node name:* finally finished and after the ERROR: Server returned errors it says ERROR: internal server error
[2013-03-14 21:04:43 -0400] mmm1: Response: Net::HTTPFatalError: 503 "Service Unavailable".
[2013-03-14 21:05:08 -0400] rep0st: mmm1: what version of chef is it
[2013-03-14 21:05:41 -0400] mmm1: How can I find out?
[2013-03-14 21:05:54 -0400] maek: knife -v
[2013-03-14 21:05:57 -0400] maek: chef-client -v
[2013-03-14 21:05:59 -0400] maek: chef-server -v
[2013-03-14 21:06:10 -0400] maek: mmm1: ^
[2013-03-14 21:06:23 -0400] mmm1: Chef: 10.24.0
[2013-03-14 21:06:44 -0400] mmm1: Chef Server (API) Version: 10.18.0
[2013-03-14 21:08:01 -0400] hikeit: mmm1: chef 10 doesn't like it when chef-client and chef-server are different versions you end up with all sorts of different versions of gems that weren't necessarily meant for each other
[2013-03-14 21:08:18 -0400] miah: it should be fine so long as the server is a newer version than the client
[2013-03-14 21:08:29 -0400] hikeit: on the same server?
[2013-03-14 21:08:58 -0400] hikeit: i ran into issues because they both installed in the same gem path
[2013-03-14 21:09:01 -0400] miah: well. on the same server i'd imagine its using the same installation
[2013-03-14 21:09:23 -0400] miah: i dont use gem installs anymore either though.
[2013-03-14 21:09:36 -0400] hikeit: neither do i, but there was no omnibus server until chef 11
[2013-03-14 21:10:15 -0400] miah: ya
[2013-03-14 21:10:17 -0400] mmm1: So I need to reinstall chef-client 10.18.0?
[2013-03-14 21:10:27 -0400] hikeit: you could try that
[2013-03-14 21:10:30 -0400] miah: most likely
[2013-03-14 21:10:47 -0400] miah: i dont _think_ there are incompatible changes between 10.24 and 10.18, but maybe.
[2013-03-14 21:11:00 -0400] miah: the general rule of thumb is to keep client version the same or lower than server version
[2013-03-14 21:11:08 -0400] hikeit: i think 10.18 uses the old net-ssh and 10.20 uses the newer
[2013-03-14 21:11:11 -0400] miah: the server is backwards compat
[2013-03-14 21:11:15 -0400] mmm1: ok thanks, I'll give that a try.
[2013-03-14 21:11:17 -0400] miah: but the client rarely is
[2013-03-14 21:11:50 -0400] maek: fwiw we upgraded from 10.18 to 10.24 and had a lot of the random problems go away
[2013-03-14 21:11:54 -0400] maek: re client.
[2013-03-14 21:11:56 -0400] hikeit: if it was me, i'd back up and install 10.20.x of client and server
[2013-03-14 21:12:39 -0400] hikeit: maek: when i tried upgrading to 10.24 server, it complained that the solr tables were incompatible, did you run into that?
[2013-03-14 21:12:59 -0400] maek: hikeit: sorry private chef
[2013-03-14 21:13:21 -0400] kallistec: everything from 10.18 to 10.24 has been either a security fix or fix for upstream gem breakage
[2013-03-14 21:13:59 -0400] kallistec: hikeit: run chef-solr-installer again and then run `knife index rebuild` as admin
[2013-03-14 21:14:09 -0400] hikeit: ah
[2013-03-14 21:14:12 -0400] maek: oh tasty
[2013-03-14 21:14:14 -0400] maek: kallistec: ty
[2013-03-14 21:14:20 -0400] kallistec: http://www.opscode.com/blog/2013/02/15/chef-server-11-0-6-and-10-24-0-released/
[2013-03-14 21:14:51 -0400] hikeit: my solution was to just shove chef server 11 down my coworkers throats :)
[2013-03-14 21:15:10 -0400] rep0st: <3 chef11
[2013-03-14 21:15:16 -0400] maek: rep0st: +1
[2013-03-14 21:15:32 -0400] rep0st: nothing beats installing chef-server with dpkg-i and then running one command
[2013-03-14 21:15:35 -0400] maek: its like a cadillac. my jaw was literally on the grown the install was so easy
[2013-03-14 21:15:42 -0400] rep0st: maek: +1
[2013-03-14 21:15:59 -0400] hikeit: i'm still rather ecstatic about the drop in average chef client run time 250 seconds to 17
[2013-03-14 21:16:09 -0400] matti: Chef 11 -1
[2013-03-14 21:16:23 -0400] matti: With the client my integration tests fail ;/
[2013-03-14 21:16:24 -0400] kallistec: there's this: http://www.opscode.com/blog/2013/03/12/5106/
[2013-03-14 21:16:41 -0400] Litex: I never understood the complexity of installing Chef Server, because I never went through it by hand.  The .debs have always worked like a champ.
[2013-03-14 21:16:44 -0400] rep0st: lol @ running chef-server-ctl cleanse
[2013-03-14 21:17:12 -0400] rep0st: hikeit: that's the champ in postgres
[2013-03-14 21:17:21 -0400] hikeit: matti: you can run server 11 with client 10
[2013-03-14 21:18:20 -0400] hikeit: rep0st: yep :]. i'd have preferred mysql, so i could use percona cluster for the DB, but i'm sure eventually i'll find a comparable postgres clustering technology
[2013-03-14 21:18:20 -0400] Litex: Client 11 + Server 10 works, too.  (At least briefly in my testing environment)
[2013-03-14 21:18:31 -0400] matti: hikeit: Indeed
[2013-03-14 21:18:39 -0400] rep0st: i like how versatile chef-server is. I can export my chef-server vm template and bring it up somewhere else and execute chef-server-ctl cleanse.
[2013-03-14 21:19:01 -0400] rep0st: hikeit: agreed with the mysql comment. mysql for somereason makes me feel warm and fuzzy inside
[2013-03-14 21:19:45 -0400] rep0st: or maybe that's just percona doing that
[2013-03-14 21:19:52 -0400] hikeit: 3.14159265358979323
[2013-03-14 21:21:05 -0400] kallistec: yeah, the GPL is a real ball buster and trying to give oracle money for a private MySQL license is futile
[2013-03-14 21:21:30 -0400] hikeit: kallistec: +1 on that
[2013-03-14 21:24:16 -0400] hikeit: matti: have you delved into why your tests fail?
[2013-03-14 21:25:10 -0400] matti: Yes.
[2013-03-14 21:25:31 -0400] rep0st: matti: sharing is caring =)
[2013-03-14 21:25:32 -0400] matti: Because 11 has different API and gem used to carry out testing is not catching up yet.
[2013-03-14 21:25:50 -0400] matti: I like minitest-chef-handler.
[2013-03-14 21:25:55 -0400] matti: For its simplicity.
[2013-03-14 21:26:20 -0400] matti: Every time a Solo run finishes it kick off integration tests.
[2013-03-14 21:26:28 -0400] matti: And we write them for every single cookbook.
[2013-03-14 21:27:52 -0400] hikeit: i'm taking the cookbook authoring workshop, even though i'll probably be bored for half of it, to learn about cookbook testing kinda hoping to get someone like jtimberman to teach it
[2013-03-14 21:28:33 -0400] jtimberman: hikeit: at chefconf?
[2013-03-14 21:28:39 -0400] hikeit: yeah
[2013-03-14 21:28:50 -0400] jtimberman: i think we have two of those. i'll be assisting rather than teaching :)
[2013-03-14 21:29:02 -0400] hikeit: nice :) i'm in the second one
[2013-03-14 21:31:02 -0400] DrVonNostren: Folks, how can i distribute a directory full of files with specifically listing each and every file?
[2013-03-14 21:31:06 -0400] hikeit: wow the one on april 6 in SF is a steal
[2013-03-14 21:31:11 -0400] DrVonNostren: errr without
[2013-03-14 21:31:26 -0400] hikeit: try the remote_directory resource
[2013-03-14 21:31:40 -0400] hikeit: (would be better named cookbook_directory)
[2013-03-14 21:32:26 -0400] DrVonNostren: hikeit: thank you
[2013-03-14 21:32:44 -0400] egon: Question: does Opscode use anything in particular for code reviews?
[2013-03-14 21:32:47 -0400] DrVonNostren: suprisingly didnt come across this after about ten minutes of googling
[2013-03-14 21:35:09 -0400] hikeit: egon: from what i've seen of the reviews, it is looking at the pull requests on github
[2013-03-14 21:35:13 -0400] brianseeders: nice, is remote_directory new?
[2013-03-14 21:35:34 -0400] brianseeders: I was trying to find exactly that back in January
[2013-03-14 21:35:52 -0400] hikeit: remote_directory i think came with chef 9, but it may have been there in 8 so not exactly :)
[2013-03-14 21:36:45 -0400] brianseeders: weird that I could never find it in the old wiki
[2013-03-14 21:36:50 -0400] brianseeders: maybe the remote_ threw me off
[2013-03-14 21:36:56 -0400] jtimberman: egon: we use jira for ticketing and github pull requests+comments for code review
[2013-03-14 21:37:17 -0400] jtimberman: we're working with continuous delivery / integration pipelines using gerrit
[2013-03-14 21:38:46 -0400] egon: jtimberman: that's what I was looking for.. thanks!
[2013-03-14 21:41:07 -0400] hikeit: gerrit another thing on my to-learn list...
[2013-03-14 21:41:38 -0400] jtimberman: hikeit: you're welcome!
[2013-03-14 21:42:00 -0400] hikeit: :]
[2013-03-14 21:54:08 -0400] maplebed: I want to change the mongodb cookbook to include an attribute that controls whether it restarts the mongod service on things like configchange.  (cuz, you know, accidentally restarting all your mongo servers when you're not looking is ... unfortunate).
[2013-03-14 21:54:35 -0400] maplebed: is the best way to just go through every spot that has a notifies and put an if around it?
[2013-03-14 21:54:50 -0400] maplebed: or something fance like digging into the service and overriding the notifies stuff?
[2013-03-14 22:09:47 -0400] knuckolls_: public service announcement: the newest version of ridley appears to break berks upload, downgraded to 0.8.3 and things work again.
[2013-03-14 22:10:01 -0400] knuckolls_: walking away from the rage this caused for a bit, then i'll submit a bug report somewhere.
[2013-03-14 22:24:18 -0400] scalp: If I wanna publish a wrapper cookbook, but depending on a git repo (not opscode), how can I accomplish that in metadata.rb please ?
[2013-03-14 22:25:00 -0400] knuckolls_: scalp: depends in metadata.rb is just for dependency resolution within chef
[2013-03-14 22:25:08 -0400] knuckolls_: and what has been uploaded to the chef server, or is available to chef solo
[2013-03-14 22:25:19 -0400] knuckolls_: berkshelf's Berksfile is what you're looking for.
[2013-03-14 22:25:33 -0400] knuckolls_: publish your wrapper with a Berksfile
[2013-03-14 22:25:49 -0400] scalp: okay just wanted to be sure!
[2013-03-14 22:26:05 -0400] scalp: thanks knuckolls
[2013-03-14 22:26:31 -0400] sascha_d: So I'm having a wacky with my yum templates.  Is it possible that the :create action is causing the file to be re-created on every run? On purpose?
[2013-03-14 22:39:02 -0400] cwj: sascha_d: not really. usually when i have encountered that phenomenon i've located some duplication between recipes
[2013-03-14 22:39:17 -0400] cwj: e.g. some cookbook wants the file to be mode 0755 and the other thinks 0750
[2013-03-14 22:39:57 -0400] sascha_d: @cwj The template change output shows the only diff in the  --- /tmp/chef-tempfile
[2013-03-14 22:40:16 -0400] sascha_d: but I'll check file perms too
[2013-03-14 22:40:24 -0400] cwj: some careful reading of -l debug output usually helps
[2013-03-14 22:42:57 -0400] sascha_d: it's a yum_repository block with one attribute no perms set by me
[2013-03-14 22:44:07 -0400] thampton: I'm having trouble passing json attributes to knife using the -j flag. I was wondering if anybody would be willing to assist? Greatly appreciated.
[2013-03-14 22:44:55 -0400] sascha_d: @thampton jsonlint.com is your best friend
[2013-03-14 22:45:07 -0400] sascha_d: I always pass mine in a file
[2013-03-14 22:45:31 -0400] thampton: The json is valid.
[2013-03-14 22:45:41 -0400] thampton: http://pastebin.com/QvuxS9Wx
[2013-03-14 22:46:59 -0400] sascha_d: what's the error?
[2013-03-14 22:47:31 -0400] thampton: There is none. The attributes are just not utilized.
[2013-03-14 22:47:33 -0400] sascha_d: @cwj this is the template change offered by chef-client -l debug: https://gist.github.com/sbates/4bd5453ae4db7055d4fa
[2013-03-14 22:48:16 -0400] cwj: sascha_d: that strikes me as really weird
[2013-03-14 22:48:23 -0400] sascha_d: yep :)
[2013-03-14 22:48:27 -0400] sascha_d: I feel the need to debug
[2013-03-14 22:48:34 -0400] sascha_d: probably tonight when I'm not on the clock
[2013-03-14 22:48:43 -0400] sascha_d: because that's just weird
[2013-03-14 22:48:45 -0400] cwj: no other occurences of clientmedia.repo in the debug output?
[2013-03-14 22:48:50 -0400] sascha_d: this yum provider is weird
[2013-03-14 22:49:13 -0400] cwj: i am not familiar with it myself
[2013-03-14 22:49:38 -0400] Chris_Woods: Has anyone run into a problem where a node shows up in knife node list, but you still can't ssh to it with 'No nodes returned from search'?  I found a year old bug about it, but it's marked as closed.
[2013-03-14 22:50:29 -0400] cwj: Chris_Woods: what query are you using for knife ssh?
[2013-03-14 22:51:01 -0400] Chris_Woods: knife ssh 'node:<name>' 'chef-client' -x root -i <rsa_key>
[2013-03-14 22:51:10 -0400] sascha_d: cwj yeah I think it's the provider
[2013-03-14 22:51:20 -0400] Chris_Woods: erm, sory, it's 'name:<node_name>'
[2013-03-14 22:51:31 -0400] doomviking: eep. root.
[2013-03-14 22:51:46 -0400] thampton: I'm also using a template for knife. I know that @run_list can be grabbed from the -r command and passed to the template... can you do the same with the json attributes flag?
[2013-03-14 22:51:52 -0400] Chris_Woods: Yeah, I'm just playing around trying to learn chef.
[2013-03-14 22:51:57 -0400] cwj: Chris_Woods: does knife node show work on that node?
[2013-03-14 22:53:05 -0400] Chris_Woods: It does.  It has no FQDN, which seemed to be what the bug claimed was the problem.
[2013-03-14 22:53:59 -0400] cwj: Chris_Woods: try knife ssh 'node:name' -a ipaddress
[2013-03-14 22:54:05 -0400] cwj: and whatever other flags
[2013-03-14 22:54:30 -0400] cwj: -a tells knife ssh which attribute to use for the host part of the ssh connection
[2013-03-14 22:55:12 -0400] Chris_Woods: Oh, haha.  Yeah I read that online, but I thought '-a ipaddress' means to use -a with the ip address (eg, "1.2.3.4").   You mean it should actually say '-a ipaddress'.  Haha, I'm an idiot.
[2013-03-14 22:55:41 -0400] doomviking: its not the first time someone made that mistake.
[2013-03-14 22:55:51 -0400] doomviking: wont be the last :)
[2013-03-14 22:56:00 -0400] cwj: no doubt
[2013-03-14 22:56:03 -0400] Chris_Woods: At least I'm in good company!
[2013-03-14 22:56:11 -0400] cwj: ipaddress is a top level attribute
[2013-03-14 22:56:35 -0400] cwj: and if you have multiple ip interfaces it will tend to be whichever IP has the default route
[2013-03-14 22:57:04 -0400] doomviking: I use -a ec2.public_hostname
[2013-03-14 22:57:09 -0400] doomviking: for obvious reasons
[2013-03-14 22:59:34 -0400] Chris_Woods: Hum.  "knife ssh 'name:<node_name>' 'chef-client' -a ipaddress -x root -i <rsa_key>" still returns the same error.
[2013-03-14 23:00:16 -0400] thampton: How does the json attributes flag work internally for the knife tool?
[2013-03-14 23:02:35 -0400] miah: read the source?
[2013-03-14 23:03:02 -0400] doomviking: heh
[2013-03-14 23:15:08 -0400] vrqNate: Question about strategy when using "deploy".  I want to mount an s3fs bucket into the shared folders and then symlink it into the current release.  This works fine the first time, but when another deploy action happens, the "enforce_ownership" block hangs because it doesn't respond so well to a typical chown.
[2013-03-14 23:16:37 -0400] vrqNate: would it be better to mount it into another folder outside of the deploy managed filesystem to avoid this?
[2013-03-14 23:17:25 -0400] psykidellic: Using, opscode postgresql cookbook 2.2.2, is there a way I can delay the start/reload/restart of postgres after the conf file has been created? https://gist.github.com/psykidellic/5166090 - the first two time when I run "knife solo cook ...", it fails with the issues. Third time when the conf file are present, everything works. I am using custom data path (on a mounted drive of EBS).
[2013-03-14 23:24:15 -0400] psykidellic: Maybe, I can overwrite the default restart/reload and do a hard restart at end of my recipe but that does not sound correct.
[2013-03-14 23:29:21 -0400] qhartman: Looks like the link resource in chef-client 10.24.0 is refusing to create symbolic links to directories?
[2013-03-14 23:29:45 -0400] qhartman: https://gist.github.com/qhartman/5166206
[2013-03-14 23:29:53 -0400] qhartman: Is that intended behavior?

[2013-09-25 00:00:38 -0400] juliancdunn: yeah, that's the same thing
[2013-09-25 00:07:49 -0400] jblack: So, I got myself into trouble with a multi-machine Vagrantfile (as listed at http://pastebin.com/zaJf32JY )
[2013-09-25 00:08:41 -0400] jblack: On line 48, I'm  trying to set a machine's hostname on line 48, yet for some reason, it seems that cfg.vm.hostname is not set.
[2013-09-25 00:11:50 -0400] jblack: how can I check the node's configuration? dna.json doens't seem to list node data
[2013-09-25 00:18:40 -0400] wongt: quit
[2013-09-25 00:18:41 -0400] wongt: exit
[2013-09-25 00:19:18 -0400] cpuguy83: Is there a resource to check the status of a service?
[2013-09-25 00:19:32 -0400] cpuguy83: Essentially I want to notify a service to restart, but only if it was already started
[2013-09-25 01:13:30 -0400] axsuul: How would I get a node's remote IP address when using chef-solo?
[2013-09-25 02:38:32 -0400] tjr9898: hey all, I've been trying to use the mysql::server recipe to install on a centos 6.4 vagrant box but keep failing
[2013-09-25 02:39:02 -0400] tjr9898: the apparent error is stating that chef can not find the init.d script
[2013-09-25 02:43:18 -0400] tjr9898: It is a pretty simple setup with it being in the list
[2013-09-25 02:49:48 -0400] juliancdunn: can you gist the output tjr9898?
[2013-09-25 02:50:50 -0400] blarghmatey_: Hello all, I'm just learning chef and hitting a snag. Is a resource (e.g. service.rb) namespaced automatically such that the supervisor cookbook service resource will be made available as supervisor_service?
[2013-09-25 02:51:29 -0400] blarghmatey_: I'm wondering because I'm trying to use the supervisor cookbook and I keep gettinga  message that a resource for supervisor_service cannot be found
[2013-09-25 02:51:44 -0400] blarghmatey_: Cookbook is here: http://community.opscode.com/cookbooks/supervisor
[2013-09-25 02:54:26 -0400] mikemar10: is there any particular reason why chef-client isn't synchronizing the latest version of my cookbook?
[2013-09-25 02:54:33 -0400] mikemar10: I just bumped the version and uploaded to my chef server
[2013-09-25 02:54:39 -0400] mikemar10: but chef-client isn't bothering to grab the latest version
[2013-09-25 02:54:43 -0400] mikemar10: nothing is pinned
[2013-09-25 02:57:40 -0400] mikemar10: never mind, got it working
[2013-09-25 02:59:24 -0400] juliancdunn: blarghmatey_: did you use "depends supervisor" in the cookbook where you're invoking supervisor_service?
[2013-09-25 02:59:54 -0400] tjr9898: juliancdunn, I can but let me try one more thing.
[2013-09-25 02:59:57 -0400] blarghmatey_: No. Would I put that in the same block as the include_recipe directives?
[2013-09-25 03:00:37 -0400] blarghmatey_: Ah ha, nevermind. I see it goes in the metadata.rb
[2013-09-25 03:04:43 -0400] blarghmatey_: juliancdunn it would appear that you suggestion worked. Many thanks.
[2013-09-25 03:04:50 -0400] blarghmatey_: s/you/your/\
[2013-09-25 03:35:42 -0400] juliancdunn: np
[2013-09-25 03:42:06 -0400] jtimberman: dgarstang2: the thing about chef-client cookbook attribute and recipe is "legacy of the codebase" :-|
[2013-09-25 03:49:46 -0400] tjr9898: juliancdunn, I think my development process is wrong
[2013-09-25 03:50:09 -0400] tjr9898: I have been running a vagrant provision, make a change, then vagrant provision
[2013-09-25 03:50:32 -0400] tjr9898: but I think the cached version of the cookbook is not helping my case
[2013-09-25 03:50:45 -0400] tjr9898: does this sound accurate?
[2013-09-25 04:23:19 -0400] juliancdunn: tjr9898: no, running vagrant provision should update the cookbook on your guest
[2013-09-25 04:28:04 -0400] tjr9898: I was also trying to use vagrant-chef-zero
[2013-09-25 05:29:01 -0400] joe__: hi
[2013-09-25 05:29:42 -0400] joe__: hi i'm new to chef, im having error "exception": "Chef::Exceptions::Env: env[PATH] (C line /chef/cache/cookbooks/windows/providers/path.rb) had an error: Chef::Exceptions::Env: Cannot modify env[PATH] - key does not exist!",
[2013-09-25 05:30:41 -0400] joe__: hi i'm new to chef, im having error "exception": "Chef::Exceptions::Env: env[PATH] (C line /chef/cache/cookbooks/windows/providers/path.rb) had an error: Chef::Exceptions::Env: Cannot modify env[PATH] - key does not exist!", does anyone new how to solve this
[2013-09-25 05:34:16 -0400] joe__: hi i'm new to chef, im having error "exception": "Chef::Exceptions::Env: env[PATH] (C line /chef/cache/cookbooks/windows/providers/path.rb) had an error: Chef::Exceptions::Env: Cannot modify env[PATH] - key does not exist!", does anyone new how to solve this
[2013-09-25 05:43:41 -0400] joe__: hi i'm new to chef, im having error "exception": "Chef::Exceptions::Env: env[PATH] (C line /chef/cache/cookbooks/windows/providers/path.rb) had an error: Chef::Exceptions::Env: Cannot modify env[PATH] - key does not exist!", does anyone new how to solve this
[2013-09-25 05:48:17 -0400] pontiki: wow
[2013-09-25 06:39:53 -0400] liondgr8: I am getting error while upgrading chef opensource server from 10 to 11. I am following this link http://www.opscode.com/blog/2013/03/12/5106/
[2013-09-25 06:40:31 -0400] liondgr8: when i try to to "knife upload / -c <knife.rb>" it gives and error
[2013-09-25 06:40:49 -0400] liondgr8: ERROR: Failed to upload  : 403 Forbidden <?xml version="1.0" encoding="UTF-8"?><Error><Code>SignatureDoesNotMatch</Code><Message>The request signature we calculated does not match the signature you provided. Check your key and signing method.</Message><StringToSignBytes></StringToSignBytes><RequestId>g2gCZAATYm9va3NoZWxmQDEyNy4wLjAuMWgDYgAABWRiAAFjLmIAB/CE</RequestId><HostId></HostId><SignatureProvided>bqfHQgqzQpM3M5dYA/l/+ktBkWs=</Si
[2013-09-25 07:25:51 -0400] bigbigbang: Ohai ! asking me a question ... How do you do when you want to be able to change a value of a recipe, specific for a node : imagine I want to do a you check update every 1 of month for a node and every 7 for an another .. Did you use tags ?
[2013-09-25 07:26:40 -0400] bigbigbang: and I can't use the name of node to do that ..
[2013-09-25 10:43:54 -0400] zeroXten: is manage_home for the user resource backwards? "If supports :manage_home=>true, the user resource does not pass the -d and -m parameters together (i.e. -dm) to usermod".. if it is true, chef doesn't create it?
[2013-09-25 10:45:17 -0400] arussel`: I'm having an issue with spiceweasel, when I run delete, it outputs the corrects commands, but if I add the -e I've got this error: http://pastebin.com/w7MTvMri
[2013-09-25 10:52:49 -0400] glen: am i doing something wrong here? http://sprunge.us/hTCX the httpd service is not restarted if resource is updated
[2013-09-25 10:54:21 -0400] zeroXten: glen: does the chef run finish completely?
[2013-09-25 10:54:46 -0400] zeroXten: its delayed by default, so perhaps chef isn't getting to the end where it would run the delayed actions
[2013-09-25 10:54:49 -0400] glen: zeroXten: yes. i run chef-client via -o, dopes it matter?
[2013-09-25 10:54:58 -0400] glen: i added :immediately too, still nothing
[2013-09-25 10:55:34 -0400] zeroXten: hmm, could it be a problem with the certificate_manage resource?
[2013-09-25 10:55:51 -0400] zeroXten: what exactly is changing?
[2013-09-25 10:56:03 -0400] glen: i looked the resource and it does have imho update hooks in place
[2013-09-25 10:56:46 -0400] glen: https://github.com/glensc/chef-cookbook-certificate/blob/master/providers/manage.rb#L61
[2013-09-25 10:56:47 -0400] zeroXten: hmm, the only thing I can suggest then is to monkey patch with with a few puts statements etc
[2013-09-25 10:57:16 -0400] glen: maybe the subresoufcing is not done properly?
[2013-09-25 10:57:33 -0400] glen: i.e cert_file_resource is correct, but the top level _manage is not?
[2013-09-25 10:57:44 -0400] zeroXten: not sure tbh
[2013-09-25 10:58:14 -0400] glen: i'm not seeying anything in -l debug, like that notifices part is not even existing!
[2013-09-25 10:58:28 -0400] glen: does the provider need to register the "notifies" action?
[2013-09-25 10:58:58 -0400] zeroXten: not sure, haven't had to do too much with that side of resources/providers
[2013-09-25 10:59:33 -0400] glen: chqangelog says it was fixed or something https://github.com/glensc/chef-cookbook-certificate/blob/master/CHANGELOG.md#v041
[2013-09-25 10:59:53 -0400] glen: but yet again. damn he reverted it. wtf
[2013-09-25 10:59:55 -0400] glen: https://github.com/glensc/chef-cookbook-certificate/commit/67990fe8f9e627d05353eb90b39fdf8fc81699c8
[2013-09-25 11:00:35 -0400] glen: so it's the same question, should the :action also update last_modified stuff or not
[2013-09-25 11:01:18 -0400] glen: does ruby have such construct: updated=false; updated||=runsomeactionthatreturnsmaybetrue;  ?
[2013-09-25 11:02:11 -0400] glen: like i do something like this: http://sprunge.us/VSeL ?
[2013-09-25 11:02:59 -0400] zeroXten: glen: something like this? updated = dosomething ? true : false
[2013-09-25 11:03:12 -0400] zeroXten: but that is kinda meaningless
[2013-09-25 11:03:31 -0400] glen: i need to add =true if something added true, but never add false
[2013-09-25 11:03:46 -0400] glen: so foo||=function() would work, but not sure does that do what i expect
[2013-09-25 11:04:22 -0400] zeroXten: oh, so foo is an array?
[2013-09-25 11:04:28 -0400] glen: no, boolean
[2013-09-25 11:04:34 -0400] glen: 14:01:19  glen> does ruby have such construct: updated=false; updated||=runsomeactionthatreturnsmaybetrue;  ?
[2013-09-25 11:04:36 -0400] zeroXten: what do you mean with "add"?
[2013-09-25 11:05:04 -0400] glen: do you understand that stement i just pasted?
[2013-09-25 11:05:13 -0400] glen: i.e "variable ||= VALUE" ?
[2013-09-25 11:05:38 -0400] glen: in perl that would assign "variable" a "VALUE" only if variable is "UNSET"
[2013-09-25 11:05:48 -0400] glen: so perhaps ruby has it too, as the syntax does not cry
[2013-09-25 11:40:00 -0400] xhae: glen: || returns the left side if it is truthy or the right side if it isn't
[2013-09-25 11:40:23 -0400] xhae: glen: ||= is the assignment version, like perl
[2013-09-25 11:50:13 -0400] glen: xhae: yeah, but seems that return value is not what i need
[2013-09-25 11:50:46 -0400] glen: r = callsomeresource(); updated ||= r.updated_by_last_action could work altho
[2013-09-25 11:52:31 -0400] glen: i.e this: http://sprunge.us/iFaT
[2013-09-25 11:52:49 -0400] glen: but is there somewhat simplier way to do this, this multiple assign and iff statements kind of kill readability
[2013-09-25 11:56:31 -0400] glen: hmm, actually none of what i do is really needed. as the new_resource is updated by subcalls
[2013-09-25 12:04:21 -0400] glen: but seems my problem is that subresource r.updatedbylastaction? is always false
[2013-09-25 12:04:34 -0400] glen: i.e: def cert_file_resource(path, content, options = {}) r = template ::File.join(new_resource.cert_path, path) do
[2013-09-25 12:04:39 -0400] glen:   new_resource.updated_by_last_action(true) if r.updated_by_last_action?
[2013-09-25 12:04:56 -0400] glen: i mean i removed the certs and reran recipe, it should go true, but doesnt
[2013-09-25 12:05:35 -0400] xhae: glen: why are you testing last_modified instead of using notifies?
[2013-09-25 12:06:41 -0400] glen: um, i thought notifies is brokenb because resource itself is broken
[2013-09-25 12:07:02 -0400] glen: toplevel recipe itself has notifies: http://sprunge.us/hTCX
[2013-09-25 12:07:06 -0400] glen: but it's never fired
[2013-09-25 12:07:31 -0400] glen: so, i'l hacking inside certificate_manage now as i believe it should do new_resource.updated_by_last_action(true)
[2013-09-25 12:08:03 -0400] glen: and if i debug, then p "#{r.updated_by_last_action?.inspect}" shows it's always false
[2013-09-25 12:09:47 -0400] glen: maybe you see yourself, is here anything broken? https://github.com/atomic-penguin/cookbook-certificate/blob/master/resources/manage.rb
[2013-09-25 12:10:08 -0400] glen: sorry, this url: https://github.com/atomic-penguin/cookbook-certificate/blob/master/providers/manage.rb
[2013-09-25 12:11:01 -0400] glen: looks to me that the check is in wrong place. the actual template replace is later than i "p"
[2013-09-25 12:12:04 -0400] glen: and if i make action :create last thing to be "new_resource.updated_by_last_action(true)" the notification starts to work
[2013-09-25 12:15:38 -0400] glen: correct, me what i'm doing wrong
[2013-09-25 12:18:43 -0400] glen: as seems me and that cookbook suffers the evaluation in wrong phase: http://stackoverflow.com/questions/14889602/chef-template-file-updated-by-last-action-broken
[2013-09-25 12:18:52 -0400] glen: which leaves me puzzled how it ever worked
[2013-09-25 12:52:36 -0400] abrkn: one of my nodes has an outdated environment. the environment is correct on the chef server (checked in the admin ui), but when i run chef-client on the node it uses old values. how can i clean this up?
[2013-09-25 13:26:16 -0400] titusjose: I am trying to get a simple nginx recipe run with chef 11. I bootstrapped a node and got nginx installed, now I need to override an attribute at role level, via chef-ui
[2013-09-25 13:26:26 -0400] titusjose: Any thoughts
[2013-09-25 13:33:59 -0400] adnichols: titusjose why via chef-ui?
[2013-09-25 13:34:15 -0400] adnichols: titusjose typically you would just upload a role w/ the overrides you need via knife
[2013-09-25 13:34:51 -0400] titusjose: I used an jclouds-chef to create a role with override attributes
[2013-09-25 13:35:17 -0400] titusjose: I used chef-ui to modify the attribute becaue I was not too sure of the format of attrbutes
[2013-09-25 13:35:47 -0400] titusjose: I meant jclouds-chef api
[2013-09-25 13:37:46 -0400] adnichols: ok, so if you modified the role attributes I guess I don't understand what your question is
[2013-09-25 13:37:59 -0400] adnichols: or did you resolve it?
[2013-09-25 13:38:57 -0400] titusjose: I expected when chef-client was run the overriden attribute value would be in place, but it does not
[2013-09-25 13:39:20 -0400] adnichols: ah, I see
[2013-09-25 13:40:27 -0400] adnichols: I'd have to see the role you used & the recipe - my first question would be whether you overrode the correct attribute
[2013-09-25 13:40:41 -0400] adnichols: You can output the role in JSON like this 'knife role show <name> -Fj'
[2013-09-25 13:40:59 -0400] adnichols: makes it easier to pastebin
[2013-09-25 13:42:19 -0400] titusjose: I would have to setup knife first
[2013-09-25 13:42:40 -0400] adnichols: true - I'd highly recommend it
[2013-09-25 13:43:26 -0400] adnichols: I don't know of a way in the UI to see the role in an easy copy/paste format
[2013-09-25 13:44:52 -0400] titusjose: ok, if I point you to the attribute in a repo at github and screen shot the ui, will you be able get a quick reply ?
[2013-09-25 13:45:17 -0400] adnichols: I have to run but if you can do it in the next few minutes I can take a look - also point me to the recipe you are using
[2013-09-25 13:45:33 -0400] titusjose: https://github.com/opscode-cookbooks/nginx/blob/master/attributes/default.rb#L80
[2013-09-25 13:45:35 -0400] titusjose: thanks
[2013-09-25 13:45:59 -0400] adnichols: got it - so just need to see the role
[2013-09-25 13:48:48 -0400] titusjose: http://picpaste.com/screen-0MFGR076.png
[2013-09-25 13:49:23 -0400] adnichols: yeah, that doesn't seem right
[2013-09-25 13:49:57 -0400] titusjose: what should it read ? I tried keepalive_timeout
[2013-09-25 13:50:00 -0400] adnichols: it's basically a hash - so keepalive_timeout is a key under nginx
[2013-09-25 13:50:13 -0400] titusjose: ok, ah I see
[2013-09-25 13:50:21 -0400] adnichols: I'd expect nginx to have a +/- next to it & when expanded you see keepalive_timeout
[2013-09-25 13:50:34 -0400] adnichols: it's easier to see in JSON - I'm not sure how to construct that in the UI
[2013-09-25 13:50:43 -0400] titusjose: ok
[2013-09-25 13:50:45 -0400] adnichols: in any case, that's likely your issue
[2013-09-25 13:51:42 -0400] adnichols: So under overrides I'm guessing you could add it like this:
[2013-09-25 13:52:14 -0400] adnichols: { "nginx":{"keepalive_timeout":"somevalue"}}
[2013-09-25 13:52:23 -0400] titusjose: ok thanks
[2013-09-25 13:52:27 -0400] adnichols: np
[2013-09-25 13:52:32 -0400] adnichols: k - gotta run
[2013-09-25 13:52:44 -0400] titusjose: ok
[2013-09-25 14:00:38 -0400] meineerde: I recently start to get play to the idea of wrapper cookbooks instead of roles. Now I wonder how I preferrably set attributes. I started by using recipes which use node.override["foo" = "bar" but that gets tedious after a while (esp. when dealing with deeper attribute hierarchies).
[2013-09-25 14:00:57 -0400] meineerde: I now wonder if I can use attribute files instead and use their override mechanism to merge the attributes
[2013-09-25 14:01:20 -0400] meineerde: however, I only want to have a base "wrapper" cookbook containing the specification for multiple roles
[2013-09-25 14:02:27 -0400] meineerde: as such, I'd prefer if the attribute files would only be loaded together with their respective recipes, i.e if I include my_wrappers:foo into the runlist, I'd prefer that *only then* the attributes file in my_wrapper/attributes/foo.rb would be evaluated on the node.
[2013-09-25 14:02:51 -0400] meineerde: Is that how it works by default now? Or is there something I can do to make it work that way?
[2013-09-25 14:04:50 -0400] prad123: i have installed chef windows plugin using "gem install chef-windows"
[2013-09-25 14:04:59 -0400] prad123: thye installation was sucessful
[2013-09-25 14:05:19 -0400] prad123: when i try "knife bootstrap windows ssh bsd-pc0790 -p 22 -x sr115201 -P Sep$061984"
[2013-09-25 14:05:26 -0400] prad123: i get a error
[2013-09-25 14:05:34 -0400] prad123: Network Error: getaddrinfo: Name or service not known Check your knife configuration and network settings
[2013-09-25 14:05:41 -0400] prad123: could some one help?
[2013-09-25 14:10:40 -0400] irr: Ohai Chefs. What the current best practice on dealing with environments(prod/staging/testing) when writint an app-level cookbook? I need to perform different actions depending on environment. Where should I set it? Separate recipe called "app-$env", chef environments, role?
[2013-09-25 14:12:05 -0400] fak3r: using opscode mysql cookbook, it's failing to install the server can anyone tell why from the error? https://gist.github.com/philcryer/6687940
[2013-09-25 14:12:52 -0400] mattjalexander: @irr having multipe app-$env recipes won't scale. my first guess would be to just have a case/if statemnt in the recipe
[2013-09-25 14:13:47 -0400] bean__: fak3r: what OS are you on
[2013-09-25 14:15:37 -0400] pabst^: Ya know... Migrating a company who has written a bunch of ad hoc perl/bash stuff to chef, when you are the only one with any chef experience is tough.
[2013-09-25 14:15:44 -0400] bean__: yep
[2013-09-25 14:15:48 -0400] fak3r: bean__: Centos 6.4
[2013-09-25 14:15:49 -0400] bean__: gotta get other people on board.
[2013-09-25 14:16:34 -0400] bean__: fak3r: well, it looks like that CB is only tested on 6.3 though I can't imagine things being broken between 6.3 and 6.4
[2013-09-25 14:16:40 -0400] pabst^: They are on board
[2013-09-25 14:18:05 -0400] pabst^: Which is part of the battle. Executing though, and keeping expectations real has been a challenge
[2013-09-25 14:18:32 -0400] bean__: for sure
[2013-09-25 14:20:43 -0400] fak3r: bean__: thanks, think it was the my.cnf that the DBA gave me yesterday. of course he's off today :)
[2013-09-25 14:20:59 -0400] bean__: could be, but it appears to be failing to install the package
[2013-09-25 14:21:02 -0400] bean__: so i'm not convinced
[2013-09-25 14:21:14 -0400] bean__: prad123: you can feel free to ask your questions in here instead of PMing me
[2013-09-25 14:21:49 -0400] prad123: i have installed chef windows plugin using "gem install chef-windows"
[2013-09-25 14:22:03 -0400] prad123: when i try "knife bootstrap windows ssh bsd-pc0790 -p 22 -x sr115201 -P Sep$061984"
[2013-09-25 14:22:22 -0400] bean__: thx for your password
[2013-09-25 14:22:22 -0400] prad123: i get
[2013-09-25 14:22:27 -0400] prad123: Network Error: getaddrinfo: Name or service not known Check your knife configuration and network settings
[2013-09-25 14:22:58 -0400] bean__: well, obviously, it can't resolve the dns name for either your chef server or bsd-pc0790
[2013-09-25 14:23:36 -0400] prad123: but when i try bootstraping a linux machine
[2013-09-25 14:23:39 -0400] prad123: it does
[2013-09-25 14:23:55 -0400] bean__: well, then you have a difference in your dns configuration
[2013-09-25 14:24:12 -0400] bean__: you could try using the IP instead
[2013-09-25 14:24:25 -0400] prad123: ip is also not working
[2013-09-25 14:24:46 -0400] bean__: then it can't get to that network?
[2013-09-25 14:24:58 -0400] prad123: nope
[2013-09-25 14:25:02 -0400] prad123: same error
[2013-09-25 14:27:10 -0400] bean__: prad123: you obviously have some issue with your network or dns configuration then
[2013-09-25 14:27:24 -0400] prad123: ty
[2013-09-25 14:27:29 -0400] prad123: will check
[2013-09-25 14:28:31 -0400] bean__: prad123: i'd imagine you can't "ping bsd-pc0790" from your windows machine
[2013-09-25 14:28:41 -0400] bean__: tbh I can't say i've ever programmed on windows, ever.
[2013-09-25 14:28:46 -0400] bean__: and the thought terrifies me
[2013-09-25 14:29:27 -0400] prad123: yep
[2013-09-25 14:29:29 -0400] prad123: i can
[2013-09-25 14:29:39 -0400] prad123: ping
[2013-09-25 14:30:20 -0400] bean__: prad123: you're using a chef server, yeah?
[2013-09-25 14:30:35 -0400] prad123: yep
[2013-09-25 14:30:38 -0400] prad123: i am
[2013-09-25 14:30:48 -0400] prad123: mine is a hybrid env
[2013-09-25 14:30:57 -0400] prad123: its both windows and linux
[2013-09-25 14:31:02 -0400] prad123: thats the proble,
[2013-09-25 14:38:38 -0400] fifthecho: Anyone in this morning that is familiar with Ridley?
[2013-09-25 14:40:37 -0400] gchristensen: is there any way with `knife ssh` to use SSH key with a password attached?
[2013-09-25 14:42:54 -0400] mattjalexander: http://docs.opscode.com/knife_ssh.html
[2013-09-25 14:43:04 -0400] mattjalexander: looks like -P or --ssh-password
[2013-09-25 14:48:12 -0400] gchristensen: mattjalexander: not quite - that is for doing password auth, but I'm doing SSH key authentication, but my SSH keys have a password attached. I get the error: ArgumentError: Could not parse PKey: no start line
[2013-09-25 14:59:35 -0400] fak3r: trying to overwrite an httpd.conf file, getting perm denied on my chef run? (I am root) https://gist.github.com/philcryer/6687940
[2013-09-25 15:00:18 -0400] bean__: fak3r: looks to me like you're having trouble talking to your chef server. That client is all properly registered and all, yeah?
[2013-09-25 15:14:23 -0400] fak3r: bean__: ya, this is our qa server and running w/in vagrant - I've had other weirdness..
[2013-09-25 15:17:52 -0400] lozzd: is there a good way to do something like " launchctl load -w /System/Library/LaunchDaemons/org.isc.named.plist" on OS X without simply jkust running that in an execute block?
[2013-09-25 15:18:14 -0400] lozzd: i know the "service" resource has OS X support but i cant find any good examples
[2013-09-25 15:18:24 -0400] lozzd: (or i suck at googling)
[2013-09-25 15:18:52 -0400] lozzd: trying to do something like : service "org.isc.named" do etc etc
[2013-09-25 15:24:12 -0400] gchristensen: lozzd: probably best to read the source of the OSX service provider... I don't know.
[2013-09-25 15:25:58 -0400] Urocyon: Any advice on dealing with setting up master/slave cluster of databases?  I'm messing about with pgpool and trying to figure out the best way to gather and write out backends to its configuration.
[2013-09-25 15:26:38 -0400] Urocyon: I'm trying for automating failover so don't see how that would work with setting a master role, for example.
[2013-09-25 15:26:41 -0400] glen: so, anyone can help me figure out why notify is not working in certifcicates cookbook?
[2013-09-25 15:27:23 -0400] Urocyon: I think maybe this is just something it's easier not to automate with chef.
[2013-09-25 15:27:32 -0400] lewiz: If I upload a cookbook with an earlier version than is currently available will it be used if my roles do not specify versions?
[2013-09-25 15:28:23 -0400] fifthecho: lewiz: Not if the greater version still lives on the server.
[2013-09-25 15:28:34 -0400] lewiz: fifthecho: Cool, thanks
[2013-09-25 15:28:48 -0400] juliancdunn: Urocyon: automating failover is very hard
[2013-09-25 15:28:50 -0400] fifthecho: If you don't specify a version, chef will use the latest version available.
[2013-09-25 15:29:09 -0400] juliancdunn: since Chef is generally asynchronously run, and fail over is synchronous, I'd say it's not a good fit to start Urocyon
[2013-09-25 15:33:53 -0400] jkeiser: FYI: I'm releasing mixlib-config 2.0 now.  Because of the way version constraints are specified, Chef 10.x and 11.x (non-omnibus) will start loading this version.  It is backwards compatible, but please report if you see any issues with config :)  Thanks!
[2013-09-25 15:35:29 -0400] jkeiser: Info on the release can be found at http://www.opscode.com/blog/2013/09/11/mixlib-config-2-0/
[2013-09-25 15:38:45 -0400] pabst^: Does anyonek now of any good cookbooks for managing fstab? Or at least managing the volumes being mounted to a server?
[2013-09-25 15:42:00 -0400] kmaqsudi: Does anyone know of any cookbooks for icinga?
[2013-09-25 15:43:32 -0400] Urocyon: Thanks, juliancdunn.  I was thinking the same, but wanted to see if there was something I was missing.
[2013-09-25 15:44:45 -0400] lewiz: As a follow-up to my previous question... I just rolled out an earlier version of a cookbook and removed the newer version from the server, yet clients are not picking it up.  I presume this is because they have the newer (deleted) version cached.  Will this get flushed automatically at some point?
[2013-09-25 15:45:16 -0400] juliancdunn: pabst^: the built-in "mount" resource knows how to manage fstab
[2013-09-25 15:47:14 -0400] juliancdunn: kmaqsudi: someone has an in-flight PR against "nagios" to make it support icinga as well https://github.com/opscode-cookbooks/nagios/pull/173
[2013-09-25 15:47:27 -0400] fak3r: anyone know if there's a cookbook for Pound? it's in Yum, but no cookbook in opscode or github afaict
[2013-09-25 15:47:57 -0400] kmaqsudi: juliancdunn:  Thanks
[2013-09-25 15:48:41 -0400] fak3r: can I just not list it in metadata, but have the system install Pound via part of a recipe? (I'll worry about config later)
[2013-09-25 15:49:26 -0400] juliancdunn: fak3r: yes, just write "package pound" in recipe code to install it
[2013-09-25 15:49:46 -0400] juliancdunn: (though I feel pound is abandonware and there are better packages out there now :-))
[2013-09-25 15:53:04 -0400] pabst^: juliancdunn: durrr... thanks for answering a simple one :( I should have known better.
[2013-09-25 15:53:59 -0400] fak3r: juliancdunn: I'm with you, but right now I have to clone another site exactly how they had it. but, at least I'm getting to do it via Chef! :)
[2013-09-25 16:17:49 -0400] jshsu: how can i get cookbook_file to execute before chef_gem?
[2013-09-25 16:23:40 -0400] juliancdunn: jshsu: chef_gem is special in that it runs at compile time
[2013-09-25 16:25:04 -0400] jshsu: juliancdunn: hm ok, guess i was wondering if i could somehow specify a cookbook file for chef_gem, but doesn't seem like it
[2013-09-25 16:25:46 -0400] juliancdunn: jshsu: if you make the cookbook_file resource run at compile time, you can
[2013-09-25 16:27:16 -0400] juliancdunn: like this jshsu: https://gist.github.com/juliandunn/11493e2a1f887231520f
[2013-09-25 16:28:51 -0400] jshsu: juliancdunn: ok, thanks a bunch
[2013-09-25 16:31:33 -0400] gchristensen: I'm having an issue where my recipe installs a package, then writes a template file. later, when I want to upgrade the package, chef is unable to perform the upgrade because dpkg fails, wanting to resolve a diff error. How do other people resolve the error? right now my best option is manually running the update command and resolving the diff error manually.
[2013-09-25 16:31:39 -0400] gchristensen: (which is obviously not a good solution.)
[2013-09-25 16:34:04 -0400] fooJBar: Hi Chefs, anyone know how to get the cookbook's version from inside a recipe?
[2013-09-25 16:36:25 -0400] fak3r: chef-client is timing out on installing a base package, but working on other 3 servers. The error, with debug logging output https://gist.github.com/philcryer/00009382f0b75609f972
[2013-09-25 16:46:54 -0400] cheeseplus: gchristensen: a diff in the config file?
[2013-09-25 16:47:16 -0400] gchristensen: cheeseplus: yep
[2013-09-25 16:47:19 -0400] cheeseplus: like it wants you to choose between the old config and the new one?
[2013-09-25 16:47:44 -0400] gchristensen: exactly, it causes the package resource to fail
[2013-09-25 16:49:14 -0400] dgarstang2: I'm trying to use this to override a borken template in chef-client. http://pastebin.com/QLdui7xV .... not working. Note on line 18... erbX. Thats intentional. It doesn't even complain.
[2013-09-25 16:49:15 -0400] gchristensen: cheeseplus: ^
[2013-09-25 16:49:18 -0400] cheeseplus: gchristensen: there are confdef options for dpkg
[2013-09-25 16:50:12 -0400] cheeseplus: gchristensen: --force-confdef --force-confold
[2013-09-25 16:50:15 -0400] cheeseplus: for example
[2013-09-25 16:50:29 -0400] fooJBar: @run_context.cookbook_collection[cookbook_name].version seems to return the current cookbook's version. Any simpler way?
[2013-09-25 16:53:17 -0400] gchristensen: cheeseplus: got it, so like package "foo" do options "--force-confdef --force-confold" end?
[2013-09-25 16:53:24 -0400] cheeseplus: yep
[2013-09-25 16:53:37 -0400] dgarstang2: Anyone? http://pastebin.com/QLdui7xV
[2013-09-25 16:54:01 -0400] cheeseplus: gchristensen: https://github.com/basho/riak-chef-cookbook/blob/d738d2cf3498e7162b0cc4be1acbd8ecc8e1a7f8/recipes/enterprise_package.rb
[2013-09-25 16:55:25 -0400] gchristensen: cheeseplus: so good! thank you very much.
[2013-09-25 16:55:40 -0400] cheeseplus: np, it was a pain in the arse for me back then
[2013-09-25 16:55:50 -0400] gchristensen: "Seth Thomas" I have a few of your clocks in my home ;)
[2013-09-25 16:56:05 -0400] cheeseplus: I don't like getting away from the abstractions but sometimes it is necessary :(
[2013-09-25 16:56:12 -0400] gchristensen: yeah
[2013-09-25 16:56:34 -0400] cheeseplus: ha, sadly no relation unless there is a fat inheritance someone has been hiding
[2013-09-25 16:57:51 -0400] juliancdunn: dgarstang2: typo on line 17?
[2013-09-25 16:58:03 -0400] juliancdunn: init versus init.d?
[2013-09-25 17:00:09 -0400] dgarstang2: juliancdunn: 17 or 18?
[2013-09-25 17:05:46 -0400] fifthecho: Anyone have any experience bootstrapping nodes using Ridley? I'm needing to use an alternate port number and can't seem to get it to set correctly.
[2013-09-25 17:13:12 -0400] dmdeklerk: Question.. Trying to setup apache with vagrant and chef-solo. Running `ohai | grep domain` on the host returns `"domain": null,`. Is that normal?
[2013-09-25 17:20:36 -0400] fak3r: so I found my error, it's not chef, it's yum. it just stopped working, can't get out, no idea why it'd be diff or what would have failed that would be ok on the other servers
[2013-09-25 17:20:46 -0400] fak3r: how do you 'reset' yum? :\
[2013-09-25 17:23:36 -0400] stkowski: Is there a cookbook or common method of getting detail on the chef runs in a centralized manner? See what happened at the server, etc? I'm asking for OSS chef, but could also be Enterprise at a later date
[2013-09-25 17:26:45 -0400] subway: Is there a way to get chef-client to only display changes it intends to make, instead of spewing garbage about every resource managed?
[2013-09-25 17:34:23 -0400] juliancdunn: dgarstang2: it depends on what you're trying to override... does the file go into /etc/init (rather than init.d?)
[2013-09-25 17:34:31 -0400] juliancdunn: also, on line 18 you don't need "default" there
[2013-09-25 17:34:59 -0400] juliancdunn: dmdeklerk: no, properly-built Vagrant boxes should have "vagrantup.com" as the domain
[2013-09-25 17:36:08 -0400] juliancdunn: stkowski: various ways of doing it, you can use handlers to report that, or Enterprise (both Hosted and Private) will have built-in reporting
[2013-09-25 17:36:31 -0400] juliancdunn: subway: chef-client has a why-run mode, or you can also turn down output verbosity
[2013-09-25 17:37:28 -0400] stkowski: juliancdunn: Thanks! Is there any handy documentation that might point me down the handlers route? Or should I just got read up on "handlers" ?
[2013-09-25 17:37:39 -0400] dmdeklerk: juliancdunn: thank you
[2013-09-25 17:38:56 -0400] juliancdunn: stkowski: there are canned examples here http://docs.opscode.com/community_plugin_report_handler.html
[2013-09-25 17:38:57 -0400] zenloop: Hey guys, what is best practice for managing rc.local?
[2013-09-25 17:39:19 -0400] dmdeklerk: Question.. do you have to set `config.vm.hostname` in your Vagrantfile when provisioning with chef-solo?
[2013-09-25 17:39:22 -0400] zenloop: Is there a cookbook that people like to use or do people just create a rc_local cookbook with a template or something.
[2013-09-25 17:39:23 -0400] stkowski: juliancdunn: Thanks again!
[2013-09-25 17:39:43 -0400] juliancdunn: dmdeklerk: it's a good idea, but that is not the FQDN, just the hostname
[2013-09-25 17:40:06 -0400] dmdeklerk: How do I set the FQDN?
[2013-09-25 17:40:12 -0400] stkowski: Do you guys do karma here? juliancdunn++
[2013-09-25 17:40:13 -0400] subway: juliancdunn: Unfortunately why-run only means chef doesn't actually change anything, but provides the same output as if it were running. Turning down the log level doesn't really help much, as it still displays every cookbook it is looking at, comments on every resource being up to date.
[2013-09-25 17:40:39 -0400] juliancdunn: dmdeklerk: it should be set already in the box image... if not, the box isn't technically compliant with Mitchell's guidelines
[2013-09-25 17:40:45 -0400] subway: ...I'd really like something like puppet's output where if nothing is to be changed, nothing is displayed other than "It took %d seconds to run"
[2013-09-25 17:41:07 -0400] dmdeklerk: Cool!
[2013-09-25 17:41:11 -0400] subway: For instance, I don't care about the output:
[2013-09-25 17:41:12 -0400] subway: Recipe: postgresql::client * package[postgresql-client] action install (up to date)
[2013-09-25 17:41:21 -0400] juliancdunn: subway: you can write your own formatter if you don't like the out-of-the-box one
[2013-09-25 17:41:31 -0400] subway: but if it were actually going to install/update/remove a package, I'd like to see it
[2013-09-25 17:41:56 -0400] subway: ahh, there's that lovely chef community I've grown so familiar with.
[2013-09-25 17:42:20 -0400] bean__: dgarstang2: I gotta say, thats a pretty nonstandard cookbook style.
[2013-09-25 17:42:26 -0400] juliancdunn: well, we try to make judicious choices that cover the majority of people's use cases subway
[2013-09-25 17:42:39 -0400] juliancdunn: and make it extensible enough that if you don't like those choices, it's not hard to write an extension
[2013-09-25 17:43:42 -0400] juliancdunn: you could start with the nyan-cat-formatter and build one based on it: https://github.com/andreacampi/nyan-cat-chef-formatter
[2013-09-25 17:44:29 -0400] cwj: subway: would this existing report handler not do what youre asking? https://github.com/jtimberman/chef-handler-updated-resources
[2013-09-25 17:44:49 -0400] subway: juliancdunn: Having to write a custom formatter isn't what bugged me. The persistent phrasing of "If you don't like it, write your own" that pops up around here so often is very offputting.
[2013-09-25 17:45:15 -0400] subway: And is easily interpreted as "get bent"
[2013-09-25 17:45:24 -0400] juliancdunn: subway: that's not how I intended to come across, sorry about that
[2013-09-25 17:45:30 -0400] subway: cwj: thanks, I'll look at that.
[2013-09-25 17:45:49 -0400] cwj: cheers, hope it helps
[2013-09-25 17:46:42 -0400] cwj: subway: http://jtimberman.housepub.org/blog/2011/04/24/a-simple-report-handler/
[2013-09-25 17:46:59 -0400] cwj: since the link in the repo is broken
[2013-09-25 17:47:24 -0400] subway: awesome. thanks
[2013-09-25 17:48:15 -0400] stkowski: Is there a cookbook that implements a tripwire like functionality out there? Watches/reports when a file changes. Or is that something I should put together myself and use a handler to report back with?
[2013-09-25 17:49:45 -0400] juliancdunn: stkowski: if someone changes a file, Chef will "fix it" and that will count as an updated resource
[2013-09-25 17:49:58 -0400] cwj: stkowski: sounds like a good fit for a report handler, or you could implement something much more like tripwire using chef, e.g. https://github.com/ucidentity/chef-aide
[2013-09-25 17:50:28 -0400] stkowski: I'm thinking chef would be a great platform for it. I'm surprised no one has done it. :)
[2013-09-25 17:50:32 -0400] stkowski: Time to go code
[2013-09-25 17:50:41 -0400] cwj: from an intrusion detection standpoint one is certainly concerned with more than just the resources managed by chef
[2013-09-25 17:50:49 -0400] stkowski: cwj & juliancdunn : thanks for both!
[2013-09-25 17:51:28 -0400] stkowski: cwj: Exactly. I had a former system I wrote at one place that kept track of key files and changes. (It was a project called "horus" -- no one has used it :)
[2013-09-25 17:51:46 -0400] stkowski: But since chef is already doing the heavy lifting of checking files, and reporting, it should be implementable as a cookbook
[2013-09-25 17:52:11 -0400] stkowski: All I need is the server side DB and the file diff and reporting. I've already got that from my older project.
[2013-09-25 17:52:27 -0400] stkowski: Thanks again
[2013-09-25 17:52:38 -0400] mattjalexander: how would that be different than just having chef-client run every 5 minutes or so?
[2013-09-25 17:53:05 -0400] stkowski: I do not want to overwrite the files in all cases. I just want to see any changes
[2013-09-25 17:53:24 -0400] stkowski: And report them
[2013-09-25 17:53:34 -0400] mattjalexander: oh, so you want like a --noop
[2013-09-25 17:54:03 -0400] stkowski: Yes. But also, once a change has been made you need to update your template basically, so you only see the change made after that
[2013-09-25 17:54:34 -0400] stkowski: Basically this will feed into a change mangement system where all observed changes will need to be matched to change tickets as a matter of policy or people will get reprimanded for skipping the review process.
[2013-09-25 17:55:57 -0400] stkowski: I suppose the most difficult thing will be picking a chef/food/restaurant themed name for the cookbook.
[2013-09-25 18:01:23 -0400] dmdeklerk: If you look at https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/hostname.rb. if your fqdn is for instance 'misheska-ubuntu1204' then ohai will set 'domain' to nil.
[2013-09-25 18:01:32 -0400] mattjalexander: maitred?
[2013-09-25 18:01:47 -0400] dmdeklerk: This causes application_ruby to fail since it needs node[ 'domain']
[2013-09-25 18:01:53 -0400] dmdeklerk: Or am I missing something?
[2013-09-25 18:02:32 -0400] dmdeklerk: hostname.rb says: fqdn =~ /.+?\.(.*)/; domain $1
[2013-09-25 18:02:50 -0400] dmdeklerk: It says: Domain is everything after the first dot
[2013-09-25 18:03:09 -0400] tmichael: there some slick knife sauce that allows me get cookbook versions tied to a node?  currently do with combination of run_list, metadata and environment info, but figured i'd check before reinventing any wheels
[2013-09-25 18:06:19 -0400] jstallard: Hey folks. I'm writing a lwrp. What's the best way, in the provider, to test if a certain attribute has actually been specified for the new resource?
[2013-09-25 18:19:48 -0400] juliancdunn: jstallard: can't you just make it mandatory in the resource definition?
[2013-09-25 18:24:47 -0400] jstallard: I don't want it to be manditory for the user to specify that attribute
[2013-09-25 18:24:59 -0400] jstallard: I just want to know that they actually specified it, before trying to use it for something
[2013-09-25 18:25:32 -0400] jstallard: right now, I'm just setting the default value for that attribute to nil, and testing for that before using it
[2013-09-25 18:25:39 -0400] jstallard: but I feel like there's a better way
[2013-09-25 18:25:43 -0400] jstallard: or maybe there isn't
[2013-09-25 18:27:25 -0400] juliancdunn: that seems sane
[2013-09-25 18:27:34 -0400] jbz: jstallard:  maybe something like: var = new_resource.attribute if new_instance.include? "attribute"
[2013-09-25 18:28:16 -0400] jbz: I have no idea if that's a Good Idea() rubywise (or honestly even if it'll work properly, I should say) but it's what I'd try.
[2013-09-25 18:28:16 -0400] jstallard: what's new_instance?
[2013-09-25 18:28:20 -0400] jbz: oh sorry
[2013-09-25 18:28:23 -0400] jbz: that should be new_resource
[2013-09-25 18:28:25 -0400] jbz: derp
[2013-09-25 18:28:28 -0400] jstallard: ahh, ok
[2013-09-25 18:29:09 -0400] jstallard: I tried testing using new_resource.respond_to?("attribute")
[2013-09-25 18:29:23 -0400] jstallard: but that returns true for every attribute I specify in the resource
[2013-09-25 18:29:34 -0400] jstallard: not just the ones that actually get declared by the user
[2013-09-25 18:31:28 -0400] fifthecho: Anyone have any experience bootstrapping nodes using Ridley? I'm needing to use an alternate port number and can't seem to get it to set correctly.
[2013-09-25 18:36:25 -0400] mikemar10: I feel like I'm missing something obvious, is there an easy way to list the cookbook versions currently installed on a chef server using knife?
[2013-09-25 18:46:19 -0400] mattjalexander: knife cookbook list shows your cookbooks and the latest version of each
[2013-09-25 18:46:45 -0400] mikemar10: thanks mattjalexander!
[2013-09-25 18:47:19 -0400] mattjalexander: nife cookbook show [COOKBOOK] will show all versions uploaded
[2013-09-25 18:48:06 -0400] mattjalexander: so, the jenkins node recipe will restart the node process if some configs change (particularly the init script)
[2013-09-25 18:48:26 -0400] mattjalexander: this will totally break any builds that happen to be going on at that moment, is there a good way to prevent unintented restarts from happening?
[2013-09-25 18:55:44 -0400] mattjalexander: i'm thinking about adding a :stop_command to the service definitions, is there a better way?
[2013-09-25 18:58:42 -0400] jperry_: ohai chefs!
[2013-09-25 18:59:03 -0400] jperry_: in a cookbook metadata file is "depends" the only thing that will pull down a cookbook
[2013-09-25 18:59:28 -0400] jperry_: for example if I need access to a resource that is defined in another cookbook
[2013-09-25 18:59:47 -0400] jperry_: or does provides offer that as well?
[2013-09-25 19:08:12 -0400] btm: @opscode Chef/Ohai Code Review: Join: https://plus.google.com/hangouts/_/f5933d696809cf6f457e3bba1c6139d5f176d97f, watch: http://youtu.be/JKhNBKK-vGk
[2013-09-25 19:08:21 -0400] btm: I pasted that in the wrong channel earlier. ;(
[2013-09-25 19:20:08 -0400] Majost: Is ohai vagrant aware?
[2013-09-25 19:20:59 -0400] chip-: It knows it's a guest inside of virtualbox or fusion.
[2013-09-25 19:21:47 -0400] DandyPandy: What is the correct way to pass the option "-t wheezy-backports" to apt when installing a package? I'm using apt_package and passing it in options, but it's not installing the package from backports.
[2013-09-25 19:21:49 -0400] Majost: hrm
[2013-09-25 19:23:23 -0400] DandyPandy: Nevermind. I just realized I didn't have :upgrade set
[2013-09-25 19:23:42 -0400] gleam: i do it with pins, fwiw
[2013-09-25 19:23:55 -0400] gleam: apt_preference whatever
[2013-09-25 19:41:32 -0400] dgarstang2: Not entire a chef question, but related. Anyone using git tags when building cookbooks with jenkins?
[2013-09-25 19:44:04 -0400] Sauraus: Hi there
[2013-09-25 19:44:36 -0400] Sauraus: What cookbook(s ) are best used when setting up windows domain authentication on a CentOS system?
[2013-09-25 19:48:42 -0400] coderanger: Sauraus: How are you planning to setup the domain auth?
[2013-09-25 19:49:01 -0400] coderanger: (LDAP, Likewise, some other pam module, etc)
[2013-09-25 19:49:26 -0400] DandyPandy: Is there a reason the 'default_release' attribute of apt_package isn't documented? http://docs.opscode.com/resource_apt_package.html
[2013-09-25 19:50:02 -0400] DandyPandy: I found a hint of it in an old bug and then found it in the code for the resource provider
[2013-09-25 19:51:08 -0400] DandyPandy: It's required if you want to specify another release for a package, so I think it would be valuable to be documented.
[2013-09-25 19:51:31 -0400] coderanger: Looks like it probably doesn't work
[2013-09-25 19:51:44 -0400] DandyPandy: Worked like a champ for me
[2013-09-25 19:51:49 -0400] coderanger: unless #expand_options is injecting a space
[2013-09-25 19:52:22 -0400] coderanger: In general I wouldn't recommend that way of installing stuff though, use normal apt pinning
[2013-09-25 20:01:44 -0400] btm: @opscode Cookbook Code Review: join: https://plus.google.com/hangouts/_/d9be173967541e309468848b281b50a042124954, watch: http://youtu.be/ePOT078Fk0M
[2013-09-25 20:04:27 -0400] wdilly: is it possible to set multip items in a databag with one knife command or does that require the use of the editor?
[2013-09-25 20:08:05 -0400] Sauraus: @coderanger LDAP most likely
[2013-09-25 20:20:02 -0400] fak3r: anyone know the opscode NFS cookbook? I can get it to create the exports file, and the dir, but it doesn't do the mount cmd
[2013-09-25 20:23:47 -0400] zanshin: What would cause a "cannot find recipe for cookbook" error when you've freshly added a new recipe to a previous working cookbook? I have a cookbook, ome_jboss, that installs JBoss AS and I've added recipe to install a specific release, as430. The cookbook has been pushed to Github and Berkshelf is retrieving it properly, but my chef_solo runlist is failing.
[2013-09-25 20:29:03 -0400] jameson__: metadata.rb up to date?
[2013-09-25 20:29:29 -0400] zanshin: jameson: Yes. I added the new recipe to the metada.rb
[2013-09-25 20:33:58 -0400] jtimberman: fak3r: opscode doesn't maintain an nfs cookbook that i'm aware of.
[2013-09-25 20:36:40 -0400] jtimberman: (so, in other words, *I* can't speak to such things, as i've not used any... :))
[2013-09-25 20:40:24 -0400] zanshin: jameson_: er, s/metada.rb/metadata.rb/
[2013-09-25 21:11:31 -0400] zanshin: jameson_: Sorted it. I had a trailing period on the new metadata version number. `x.y.z.`. For the want of a period...
[2013-09-25 21:11:43 -0400] zanshin: Thanks for suggesting the metadata file
[2013-09-25 21:15:37 -0400] dgarstang2: Anyone using git tags to get jenkins to build chef cookbooks?
[2013-09-25 21:19:28 -0400] togume: Hi all - question: Is there a simple way to output the encrypted value of the data bag if one has the knife[:secret_file] path set in knife.rb. Use case: output json for Chef Solo runs in Vagrant. Currently disabling the path in knife.rb to get encrypted values.
[2013-09-25 21:36:19 -0400] msmoyer: I'm having a problem with my development Chef 10 server...  someone is uploading a new version of the java cookbook and it's failing a smoketest...
[2013-09-25 21:36:31 -0400] msmoyer: anyone know how I can tell whose doing it?
[2013-09-25 21:36:51 -0400] msmoyer: I assume they're using either knife directly or knife through berks..
[2013-09-25 21:37:28 -0400] msmoyer: I looked through all of the normal logs on the server and found where it was updated.. but it doesn't have an ip or client name
[2013-09-25 21:40:27 -0400] jameson__: aww..
[2013-09-25 21:43:54 -0400] coderanger: msmoyer: There is not currently a log of that
[2013-09-25 21:44:22 -0400] msmoyer: k, could I tell on chef 11?
[2013-09-25 21:44:30 -0400] eherot: anyone know how to nullify a value when doing a resource override?
[2013-09-25 21:44:35 -0400] eherot: e.g.
[2013-09-25 21:44:53 -0400] eherot: p = resources(:package => "somepackage"); p.version nil # this doesn't work
[2013-09-25 21:52:34 -0400] coderanger: eherot: how ugly do you mind?
[2013-09-25 21:53:12 -0400] coderanger: eherot: p.instance_variable_set(:@version, nil) should work I think
[2013-09-25 21:54:04 -0400] eherot: lol
[2013-09-25 21:54:15 -0400] eherot: coderanger: no worse than the rest of the cookbook i suppose.
[2013-09-25 21:54:19 -0400] eherot: good to know there's a way to do that
[2013-09-25 21:58:29 -0400] coderanger: Yeah, unfortunately its a tricky issue
[2013-09-25 21:58:48 -0400] coderanger: Ruby tends to use nil as a sentinel value
[2013-09-25 22:03:49 -0400] eherot: coderanger: your trick definitely worked.  Thanks.
[2013-09-25 22:12:12 -0400] rusticules: Is anyone here using test-kitchen on a cu-server?  We are having a problem where if two test-kitchen jobs are running and one kills the VM, the second VM is also killed.
[2013-09-25 22:12:25 -0400] rusticules: sorry, ci-server
[2013-09-25 22:14:24 -0400] rusticules: we are using latest versions of virtualbox, vagrant and beta3 of test-kitchen.
[2013-09-25 22:39:39 -0400] togume: msmoyer: Thanks for the info. However, I'm looking to not decrypt the data in order to store the enncrypted json locally to use with Chef Solo.
[2013-09-25 22:40:01 -0400] togume: Seems like Chef 11.6 now automatically decrypts the data if you have the path in your knife.rb
[2013-09-25 22:40:14 -0400] maplebed: Hi folks, I'm trying to write a LWRP that takes, as one of its attributes, an array of strings.  I tried putting (in the resources/foo.rb file) "attribute :nodes, :kind_of => Array" but it doesn't seem to like that. Am I getting confused by a different bug somewhere, or is there a different way I should be trying to do what I want?
[2013-09-25 22:40:19 -0400] togume: And the only way to get it to output the json with encrypted data is to remove it from the configuration.
[2013-09-25 22:46:49 -0400] darkdust: just installed chef 11, when trying to upload a cookbook I receive a 403 Forbidden, error code: SignatureDoesNotMatch. Has anyone seen this, and know how to fix it?
[2013-09-25 22:46:58 -0400] dgarstang2: Thor... docs? examples?
[2013-09-25 22:50:00 -0400] maplebed: Let me ask a different question - where can I find a list of things I can use in the attribute line when creating a LWRP? (a pointer into the chef code is fine)
[2013-09-25 22:50:22 -0400] tobin: Can someone help me with a chef search issue. I can't seem to get interpolation working with #{node.chef_environment}
[2013-09-25 22:50:23 -0400] tobin: search(:node, "run_list:recipe\[role\:\:elasticsearch\] AND #{node.chef_environment} AND attribute:value")
[2013-09-25 22:51:25 -0400] tobin: oh hai maplebed
[2013-09-25 22:51:33 -0400] maplebed: :D
[2013-09-25 22:51:37 -0400] tobin: heh
[2013-09-25 22:51:56 -0400] maplebed: tobin: try AND chef_environment:#{node.chef_environment} instead.
[2013-09-25 22:52:21 -0400] tobin: yeah I did. It doesn't seem to like it. If I just do chef_enviroment:qa it works
[2013-09-25 22:52:40 -0400] maplebed: are you sure the node has the environmente set?
[2013-09-25 22:52:53 -0400] tobin: yup, positive.
[2013-09-25 22:54:49 -0400] dgarstang2: omg. i thought chef docs were bad. Thor makes it looks like the library of congress.
[2013-09-25 22:55:17 -0400] maplebed: tobin: that syntax looks fine to me...  Here's an example of teh same thing in the nagios cookbook (that does work): https://github.com/opscode-cookbooks/nagios/blob/master/recipes/client.rb#L36
[2013-09-25 22:55:46 -0400] tobin: thanks maplebed , I think i might need \\ vs \
[2013-09-25 22:57:01 -0400] maplebed: I'm curious, though, why your search is run_list:recipe\[role\:\:elasticsearch\] instead of just role:elasticseacrh.
[2013-09-25 22:57:27 -0400] tobin: we're actually using run_list wrappers, so its not really a role
[2013-09-25 22:57:38 -0400] tobin: we needed a way to version run_lists...
[2013-09-25 22:58:28 -0400] maplebed: the only other thing I'd suggest is intsead of looking at teh run_list, make sure that every cookbook sets appropriate attributes and search on that instead.
[2013-09-25 22:58:46 -0400] maplebed: I'm not sure it actually changes much, but it's much easier to reason about.
[2013-09-25 22:59:24 -0400] tobin: Yeah , unfortunately a disadvantage with a wrapper cookbook around run_lists, is that you get default attributes for all cookbooks
[2013-09-25 23:00:02 -0400] tobin: So say you have an mongo, mysql and es role, you're gonna get default attributes for all of them, even if you're only calling the msyql recipe (since they're in the metadata.rb)
[2013-09-25 23:00:14 -0400] tobin: and by role, i mean recipes in the wrapper coookbook
[2013-09-25 23:00:22 -0400] tobin: we've kinda abused the term here where i work.
[2013-09-25 23:00:32 -0400] maplebed: you can set attributes in the recipes in addition to the attributes that go in the attributes dir...
[2013-09-25 23:01:38 -0400] maplebed: anyway. if what you've got works, sgtm.
[2013-09-25 23:01:38 -0400] maplebed: ;)
[2013-09-25 23:01:41 -0400] tobin: Yeah. thats what we're doing. We filter on environment, run_list recipe, and a specific attribute (cluster_name)
[2013-09-25 23:03:01 -0400] aaronfeng: i'm using chef-solo-search, it returns a Hash as a search result, which is different than normal (I believe it's a Mash thing) chef server search.  what's the best way to handle it?  Since the cookbook it's calling methods it's doesn't exists on a Hash.
[2013-09-25 23:06:53 -0400] mac_: How do I install Bundler with chef?
[2013-09-25 23:14:36 -0400] tayworm: mac_: maybe something like this? http://brandonparsons.me/2013/installing-gems-in-a-new-chef-system-ruby/

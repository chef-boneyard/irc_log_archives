[2013-09-26 00:25:27 -0400] doomviking: http://docs.opscode.com/resource_chef_gem.html
[2013-09-26 00:55:00 -0400] bobbywilson0: hey all, is symlink_before_migrate what I want if I am not seeing a file symlinked from the shared/config/ dir into the current/config?
[2013-09-26 00:56:11 -0400] bobbywilson0: I should add that I see database.yml and memcached.yml symlinked just fine, just the new redis.yml file that I have added to a recipe shows up in shared but isn't symlinked back to current (in a Rails app btw)
[2013-09-26 01:21:25 -0400] broconne: Has anyone seen any work done w/ chef or around chef in the plugin space with environment inheritance?
[2013-09-26 01:25:50 -0400] fak3r: does anyone else get horrendous stalls trying to get php mods from pear? Man, this delay is terrible   * php_pear_channel[pear.php.net] action update[2013-09-25T20:23:40-05:00] INFO: Processing php_pear_channel[pear.php.net] action update (php::default line 25)
[2013-09-26 05:52:55 -0400] prad123: Bootstrapping Chef on windows ERROR: Network Error: getaddrinfo: Name or service not known Check your knife configuration and network settings
[2013-09-26 05:53:34 -0400] prad123: when i try "knife bootstrap windows ssh bsd-pc0790 -p 22 -x msat/sr115201 -P ********"
[2013-09-26 05:53:45 -0400] prad123: can some1 help?
[2013-09-26 05:54:02 -0400] prad123: stuck up here from 2 days
[2013-09-26 06:05:12 -0400] mindlace: anybody else on os x 10.8.5?
[2013-09-26 06:05:32 -0400] mindlace: I can't get vagrant to use virtualbox ...
[2013-09-26 06:05:33 -0400] mindlace: https://github.com/mitchellh/vagrant/issues/2252
[2013-09-26 06:05:38 -0400] mindlace: is what happens to me
[2013-09-26 06:05:50 -0400] mindlace: i've tried vagrant 1.3.3 and tried installing from github.
[2013-09-26 07:19:13 -0400] s2r2: good morning (localise as needed)
[2013-09-26 07:22:32 -0400] s2r2: I wonder if there are any publicly available thoughts on using Chef with "non-clients" (network appliances... coffee machines) that only give you a SSH login.... I'm contemplating an execute-provider that abstracts the underlying ssh connection and maybe creating a node object for the machine (somehow), without actually running chef-client on them (but using
[2013-09-26 07:22:32 -0400] s2r2: some script/chef-apply/knife exec from another machine/cookbook).... this is not very original, so I'm hoping for pointers :)
[2013-09-26 09:40:39 -0400] Volcane: wouldnt it be quite similar to how all the other stuff that interact with remote APIs work?
[2013-09-26 09:40:56 -0400] Volcane: LWRPs modeling the remote device and some node proxies to the API
[2013-09-26 09:41:05 -0400] Volcane: here you'd just use ssh+whatever instead of an API
[2013-09-26 09:50:51 -0400] prad123: when i try "knife bootstrap windows ssh bsd-pc0790 -p 22 -x msat/sr115201 -P ********"
[2013-09-26 09:50:57 -0400] prad123: when i try this
[2013-09-26 09:51:01 -0400] prad123: i get
[2013-09-26 09:51:12 -0400] prad123: Bootstrapping Chef on windows ERROR: Network Error: getaddrinfo: Name or service not known Check your knife configuration and network settings
[2013-09-26 09:51:18 -0400] prad123: please help
[2013-09-26 09:52:48 -0400] mtpereira: it looks like the name is not resolving
[2013-09-26 09:52:59 -0400] mtpereira: maybe bsd-pc0790 or some other name in knife's conf file?
[2013-09-26 10:09:30 -0400] arussel`: https://s3.amazonaws.com/cloudformation-examples/IntegratingAWSCloudFormationWithOpscodeChef.pdf this shows how to install chef-client using cloudformation for chef 10, anyone has the same for chef 11 ?
[2013-09-26 11:00:46 -0400] prad123: @<mtpereira>: running only "knife bootstrap windows" also throws the same error
[2013-09-26 11:01:00 -0400] glen: i get WARN: unable to detect ipaddress
[2013-09-26 11:01:04 -0400] glen: and then random cookbooks fail
[2013-09-26 11:01:17 -0400] glen: # ohai |grep ipaddress
[2013-09-26 11:01:18 -0400] glen: [2013-09-26T14:01:11+03:00] WARN: unable to detect ipaddress
[2013-09-26 11:03:00 -0400] glen: http://sprunge.us/VRTZ
[2013-09-26 11:03:39 -0400] glen: iproute2-3.5.1-2.x86_64
[2013-09-26 11:04:37 -0400] glen: oh, upgrade helped: iproute2-3.10.0-1.x86_64
[2013-09-26 11:05:01 -0400] glen: otoh the ip  comamnd output did not change
[2013-09-26 11:06:07 -0400] glen: [2013-09-26T14:04:20+03:00] INFO: [inet6] no default interface, picking the first ipaddress
[2013-09-26 11:06:10 -0400] glen: [2013-09-26T14:04:20+03:00] INFO: ipaddress and ip6address are set from different interfaces (eth0 & eth3), macaddress has been set using the ipaddress interface
[2013-09-26 11:28:23 -0400] prad123: how to verify if knife windows plugin is installed and working??
[2013-09-26 11:29:31 -0400] prad123: please help guys
[2013-09-26 11:33:27 -0400] ocholetras: cant help you more than google right now
[2013-09-26 11:33:41 -0400] ocholetras: i have not used knife on windows
[2013-09-26 11:45:14 -0400] arussel`: where can I find a cloudformation template to bootstrap a node with chef 11 ?
[2013-09-26 12:32:09 -0400] ocholetras: Anyone knows how to use a different hash based on the platform, on the users recipe, being the password hash on a data bag?
[2013-09-26 12:41:47 -0400] arussel`: can you put a run_list in client.rb ?
[2013-09-26 12:50:10 -0400] ocholetras: umm
[2013-09-26 12:50:16 -0400] ocholetras: a run_list in client.rb?
[2013-09-26 12:50:29 -0400] ocholetras: i dont know even what you mean
[2013-09-26 12:50:36 -0400] ocholetras: runlist are on nodes an roles
[2013-09-26 13:10:22 -0400] cytale: Hey, I'm trying to use the secure_password method from the opscode openssl cookbook (https://github.com/opscode-cookbooks/openssl) with chef-solo. But the "include Opscode::OpenSSL::Password" does not work.
[2013-09-26 13:10:30 -0400] cytale: I always get the error "Cannot find a resource for include on ubuntu version 12.04" when I want to use it in my main::default recipe.
[2013-09-26 13:10:37 -0400] cytale: My foldertree currently looks like this https://pastee.org/hust4
[2013-09-26 13:10:46 -0400] cytale: And yes, I'm new to chef ;)
[2013-09-26 13:14:26 -0400] cytale: Anyone knows how to do this?
[2013-09-26 13:15:22 -0400] zanshin: cytale: I'm also relatively new to Chef. How are you getting the openssl cookbook?
[2013-09-26 13:15:31 -0400] ocholetras: the postgresql
[2013-09-26 13:15:33 -0400] ocholetras: cookbook
[2013-09-26 13:15:46 -0400] cytale: I cloned it from github
[2013-09-26 13:15:49 -0400] ocholetras: cytale: have a look at postgresql opscode recipe
[2013-09-26 13:15:54 -0400] cytale: postgresql?
[2013-09-26 13:15:56 -0400] ocholetras: cookbooks/postgresql/recipes/server.rb
[2013-09-26 13:15:58 -0400] ocholetras: yea
[2013-09-26 13:16:07 -0400] ocholetras: it uses the same thing you are trying to do
[2013-09-26 13:16:10 -0400] ocholetras: ;)
[2013-09-26 13:16:27 -0400] cytale: ok, i will have a look
[2013-09-26 13:18:20 -0400] cytale: hmmmmm..... It worked....
[2013-09-26 13:18:30 -0400] cytale: ;D
[2013-09-26 13:19:16 -0400] cytale: I did not get it to work for an hour or so... I was totally freaking out here ;D
[2013-09-26 13:48:45 -0400] BryanWB: hey spox: :) i have a quick q for u about stunnel when u get a chance. If i use my own self-signed cert.pem as the CA file, does that mean stunnel will only allow connections using the same certificate?
[2013-09-26 13:58:52 -0400] atomic-penguin: BryanWB, stunnel might not complain, but it kind of depends on what you're doing with stunnel.  See "Problems with self-signed certificates", https://www.stunnel.org/howto.html
[2013-09-26 13:59:39 -0400] BryanWB: atomic-penguin: tks, i will read that
[2013-09-26 14:10:34 -0400] BryanWB: atomic-penguin: sweet, verify = 3 looks like it will do what i am looking for
[2013-09-26 14:10:38 -0400] BryanWB: atomic-penguin: tks for the link
[2013-09-26 14:12:28 -0400] dissolve: hello all, could someone give me a hand working through using data bags correctly in my recipe, currently i'm using the .chef/knife.rb to set the location on my local machine and load_secret(Chef::EncryptedDataBagItem::DEFAULT_SECRET_FILE) in my recipe, but that just stopped working
[2013-09-26 14:13:25 -0400] dissolve: i understand i can use --secret in my knife command rather than in my config, which makes sense, but the DEFAULT_SECRET_FILE also stopped working, and i cannot figure out how to do that part correctly
[2013-09-26 14:15:05 -0400] bean__: dissolve: you shouldn't need to tell it to load the secret if it exists.
[2013-09-26 14:15:26 -0400] bean__: i just do my_thing = Chef::EncryptedDataBagItem.load("databagname","thingiwant")
[2013-09-26 14:15:58 -0400] bean__: the bootstrap template will grab it from your encrypted_data_bag_secret path
[2013-09-26 14:15:59 -0400] dissolve: okay, thats the piece i was missing i think
[2013-09-26 14:16:16 -0400] bean__: (or should grab)
[2013-09-26 14:30:15 -0400] dissolve: thanks bean__ that did the trick
[2013-09-26 14:30:20 -0400] bean__: aganov: hmm, odd. np
[2013-09-26 14:30:26 -0400] bean__: ahh dang not deleteing things
[2013-09-26 14:30:28 -0400] bean__: dissolve: np.
[2013-09-26 14:30:50 -0400] adamjk-dev: hey all
[2013-09-26 14:31:11 -0400] adamjk-dev: how are most people storing true binary data? in a cookbook, as a remote file, b64 encoded to data bag, etc.?
[2013-09-26 14:32:23 -0400] cpuguy83: I am putting some debs, custom installation packages, etc into cookbooks, but it's for a totally offline installation.
[2013-09-26 14:33:10 -0400] adamjk-dev: i see.... well this is a SSL certificate
[2013-09-26 14:35:13 -0400] cpuguy83: My thoughts on encrypted data bags are this:  In most cases, if someone has access to your chef server then that someone also has access to the rest of your infrastructure.  So encrypting the data is kind of pointless here.  If the person accessing the chef server is unauthorized (say you got hacked), then you have much bigger worries than your private keys being stolen
[2013-09-26 14:35:35 -0400] cpuguy83: So in a private chef scenario encrypted data bags are completely pointless
[2013-09-26 14:35:59 -0400] cpuguy83: Hosted chef is a different animal and you should definitely use encryption there.
[2013-09-26 14:35:59 -0400] adamjk-dev: i see your points
[2013-09-26 14:36:04 -0400] adamjk-dev: agreed
[2013-09-26 14:36:17 -0400] adamjk-dev: well... wouldn't the cert be able to be stored in a regular data bag (not encrypted)?
[2013-09-26 14:36:21 -0400] cpuguy83: So, all that to say, encrypting your SSL certs in a data bag is a huge hassle for no gain
[2013-09-26 14:36:31 -0400] gchristensen: adamjk-dev: as long as its ascii-armored
[2013-09-26 14:36:48 -0400] adamjk-dev: gchristensen: right, as long as the cert provides a textual form (not just straight binary)
[2013-09-26 14:36:51 -0400] gchristensen: yep
[2013-09-26 14:37:00 -0400] adamjk-dev: thanks guys
[2013-09-26 14:37:57 -0400] bean__: i disagree. storing SSL certs in an encrypted databag is completely fine and not that hard to do.
[2013-09-26 14:38:48 -0400] cpuguy83: bean__: Using encrypted data bags is a major hassle, because you have to figure out how to securely distribute your private keys to whatever node needs access to that data bag.
[2013-09-26 14:39:09 -0400] bean__: thats valid, we're considering using chef-vault for that
[2013-09-26 14:39:12 -0400] cpuguy83: And it's a hassle that is not needed when you are running your own chef-server
[2013-09-26 14:39:25 -0400] cpuguy83: yes, chef-vault, I was just trying to remember the name of that project
[2013-09-26 14:43:07 -0400] adamjk-dev: i ran across chef-vault the other day
[2013-09-26 14:43:11 -0400] adamjk-dev: was wondering if its worth it
[2013-09-26 14:43:20 -0400] gchristensen: also looks like a PITA
[2013-09-26 14:57:34 -0400] drrk: cpuguy83: if a minor server gets comprimised, one that doesn't have ssl keys installed, and you don't have encrypted data bags, the attacker can then get the keys from the chef server easily
[2013-09-26 15:07:48 -0400] cwj: more like using encrypted anything is a hassle because key distribution is not a solved problem
[2013-09-26 15:08:38 -0400] cwj: i like chef vault but it doesnt seem like it will work well for anyone doing autoscaling/cloudformation type stuff
[2013-09-26 15:08:51 -0400] bean__: cwj: there was a big discussion about it on the mailing list apparently.
[2013-09-26 15:08:58 -0400] bean__: I haven't read it yet, but probably should
[2013-09-26 15:09:14 -0400] cwj: ill have to check it out, i am pretty bad at mailing lists
[2013-09-26 15:09:41 -0400] bean__: me too
[2013-09-26 15:16:29 -0400] pabst^: is there a way to dry run against a server and see what is actually going to be changed?
[2013-09-26 15:17:06 -0400] siezer: chef-client -W
[2013-09-26 15:17:14 -0400] siezer: but it lies
[2013-09-26 15:17:18 -0400] siezer: because computers
[2013-09-26 15:17:54 -0400] juliancdunn: cwj: yeah, it doesn't really work for cloudformation/autoscaling
[2013-09-26 15:18:13 -0400] juliancdunn: in that case I'd probably use IAM roles for key distribution -- stick the key in a special S3 bucket
[2013-09-26 15:21:05 -0400] pabst^: siezer: thanks :)
[2013-09-26 15:22:08 -0400] Joes_: Hi
[2013-09-26 15:22:49 -0400] Joes_: Is there a way to use a template in a recipe but having the erb file in a remote location?
[2013-09-26 15:22:59 -0400] Joes_: I want to have the erb file in a AWS S3 location
[2013-09-26 15:23:23 -0400] gchristensen: no
[2013-09-26 15:24:14 -0400] Joes_: Any hack like downloading first the erb and then using it as a template?
[2013-09-26 15:25:36 -0400] juliancdunn: Joes_: in Chef 11.6.x, you can allegedly use HTTP/FTP URLs in the "source" parameter of a template
[2013-09-26 15:25:49 -0400] juliancdunn: http://docs.opscode.com/release_notes.html
[2013-09-26 15:25:57 -0400] juliancdunn: but I've not tried it
[2013-09-26 15:26:07 -0400] Joes_: Oh, great!
[2013-09-26 15:26:09 -0400] Joes_: That's what I need
[2013-09-26 15:26:21 -0400] Joes_: Will try it
[2013-09-26 15:32:55 -0400] zoom7_fritsch: Hey guys, just a small question: I want to deploy a rails app using capistrano and not chef deployment. Can I use application_ruby anyway?
[2013-09-26 15:48:58 -0400] fak3r: basic question, but I have a template block in a recipe, I want it to put down like php.ini, but if the file is there, I *still* want it to use the one in chef - how do you 'replace' an existing file?
[2013-09-26 15:49:11 -0400] fak3r: so the file that chef-server has always "wins"
[2013-09-26 15:50:14 -0400] juliancdunn: fak3r: it does that by default
[2013-09-26 15:50:26 -0400] gchristensen: fak3r: the action :create in the template, I believe, is the only case where it won't overwrite
[2013-09-26 15:50:53 -0400] juliancdunn: gchristensen: nah, that should still overwrite it... unless you meant :create_if_missing
[2013-09-26 15:51:04 -0400] gchristensen: that's the one :)
[2013-09-26 15:51:26 -0400] zoom7_fritsch: Can I use opcode's application cookbook without using the deployment? I just want a folder that is configured as application root in apache, etc.
[2013-09-26 15:52:18 -0400] lewiz: Anybody know why I might see "NoMethodError: undefined method `option' for Chef::Resource::Directory" on Windows?  I see in the docs that option is indeed supported.
[2013-09-26 15:53:05 -0400] fak3r: juliancdunn: thanks!
[2013-09-26 15:53:11 -0400] fak3r: gchristensen: also thanks!
[2013-09-26 15:54:58 -0400] juliancdunn: lewiz: is this in the filesystem rights?
[2013-09-26 15:55:51 -0400] lewiz: juliancdunn: Yes, directory rights.
[2013-09-26 15:56:55 -0400] juliancdunn: paste the one-liner of your "rights" statement?
[2013-09-26 15:57:28 -0400] lewiz: rights :read, "Everyone", option => :applies_to_children
[2013-09-26 15:58:05 -0400] juliancdunn: hmmm that looks right to me
[2013-09-26 15:58:33 -0400] gkra: Gah Is there a way to get ruby / Berkshelf to not care about self-signed SSL on a chef server?
[2013-09-26 15:58:39 -0400] gkra: getting this:
[2013-09-26 15:58:41 -0400] gkra: Ridley::Errors::ConnectionFailed: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
[2013-09-26 15:59:54 -0400] lewiz: juliancdunn: Yep - to me too.  This is from the zabbix cookbook which is otherwise pretty good.  I see it on a bunch of Windows VMs.
[2013-09-26 16:01:26 -0400] Danleyden: gkra: turn off ssl verification in your config.json... change "ssl":{"verify":true} to "ssl":{"verify":false}
[2013-09-26 16:01:38 -0400] gkra: oh duh, thanks :)
[2013-09-26 16:01:47 -0400] Danleyden: np
[2013-09-26 16:02:04 -0400] juliancdunn: lewiz: I'm reading the code in Chef, it might be a doc bug
[2013-09-26 16:02:07 -0400] juliancdunn: try:
[2013-09-26 16:02:14 -0400] juliancdunn: rights :read, "Everyone", :applies_to_children => true
[2013-09-26 16:02:27 -0400] Joes_: @juliancdunn
[2013-09-26 16:02:35 -0400] Joes_: It seems the http source does not work...
[2013-09-26 16:02:42 -0400] Joes_: I'm using 11.6.0
[2013-09-26 16:03:29 -0400] Joes_: Cookbook 'nagios_ops' (0.1.0) does not contain a file at any of these locations:   templates/ubuntu-12.04/http://s3-us-west-2.amazonaws.com/chef-xyz-packages/host-monitor.erb   templates/ubuntu/http://s3-us-west-2.amazonaws.com/chef-xyz-packages/host-monitor.erb   templates/default/http://s3-us-west-2.amazonaws.com/chef-xyz-packages/host-monitor.erb
[2013-09-26 16:03:40 -0400] juliancdunn: ugh
[2013-09-26 16:03:40 -0400] Joes_: seems it tries to concatenate
[2013-09-26 16:03:52 -0400] lewiz: juliancdunn: Yes - thanks, that did indeed fix it.  I'm now hitting CHEF-3787 :)
[2013-09-26 16:04:36 -0400] juliancdunn: Joes_: try setting local to true
[2013-09-26 16:04:59 -0400] Joes_: How?
[2013-09-26 16:05:29 -0400] juliancdunn: Joes_: as an extra parameter in the resource declaration
[2013-09-26 16:05:30 -0400] Joes_: Ok, I see
[2013-09-26 16:05:37 -0400] juliancdunn: I think it might be another doc bug :)
[2013-09-26 16:05:44 -0400] Joes_: :)
[2013-09-26 16:05:46 -0400] juliancdunn: lewiz: sorry to hear :-(
[2013-09-26 16:06:14 -0400] gkra: Okay, wtf, Berkshelf...
[2013-09-26 16:06:17 -0400] Breakin__: guys what cause this error
[2013-09-26 16:06:24 -0400] Breakin__:  Chef::Exceptions::Package: No candidate version available for package_name
[2013-09-26 16:06:33 -0400] juliancdunn: lewiz: if you have 5 minutes can you file a doc issue at https://github.com/opscode/chef-docs/issues
[2013-09-26 16:06:47 -0400] lewiz: juliancdunn: Yes, I'll do it now
[2013-09-26 16:06:52 -0400] juliancdunn: thanky
[2013-09-26 16:07:26 -0400] Breakin__: i have added a file to apt/sources.list.d/ directory and tell chef that runs an apt-update
[2013-09-26 16:07:33 -0400] Breakin__: but it didn't do it
[2013-09-26 16:08:22 -0400] jdve: hey all!  i've got a resource notification question: i have a service (from the rabbitmq cookbook) that i'd like to restart only *after* enabling a bunch of plugins but *before* doing any subsequent resources.  so i can use :notifies to trigger the service to restart, but i don't want to use :immediately within the plugins.each loop, because that it would restart it multiple times.  how can i trigger the serv
[2013-09-26 16:08:22 -0400] jdve: ice to restart exactly once but only if one of the plugin resources actually required a restart of the service?
[2013-09-26 16:08:26 -0400] Breakin__: i have to do apt-get update manually
[2013-09-26 16:10:26 -0400] btm: Breakin__: what's the name of your file in /etc/apt/sources.list.d ? Do you see Chef running an apt-get update AFTER the file is in place? Are you using an apt cookbook that will avoid running an apt-get update if one has run recently, similar to /var/lib/apt/periodic/update-stamp ?
[2013-09-26 16:12:19 -0400] Breakin__: btm I have this http://pastebin.com/tXb7M9C8
[2013-09-26 16:12:27 -0400] Breakin__: after the file creation
[2013-09-26 16:13:07 -0400] fak3r: hmm.. how about files? how do those get overwritten? (asking cause ssl keys aren't over righting, the old ones are still there)
[2013-09-26 16:14:05 -0400] fak3r: cookbook_file "/etc/pki/tls/private/somehost.key" do
[2013-09-26 16:14:16 -0400] fak3r: source "somehost.key.erb"
[2013-09-26 16:14:21 -0400] Urocyon: Is there a way to increase timeout on a yum_package install?  I'm not finding one in the docs.  I'm trying to install vmware tools from vmware's repo and one of the packages takes a very long time to run.
[2013-09-26 16:14:28 -0400] fak3r: but on the nodes they're still the old ones...
[2013-09-26 16:15:23 -0400] juliancdunn: Urocyon: every resource can take "timeout"; by default it's 3600s
[2013-09-26 16:15:30 -0400] jstallard: I'm writing a provider (lwrp) and I'd like to iterate over the attributes for the resource I'm defining. Is there a way to do this? @new_resource.state returns an empty hash
[2013-09-26 16:16:54 -0400] Urocyon: ah, guess I needed to look a little higher in the options.  Though it definitely isn't taking 3600s to run, more like 2-3 min.
[2013-09-26 16:17:30 -0400] Urocyon: maybe 5. I haven't really timed it.
[2013-09-26 16:17:31 -0400] Breakin__: bfm some idea of waht can be wrong this code worked before :(
[2013-09-26 16:17:38 -0400] juliancdunn: maybe yum is timing out then
[2013-09-26 16:18:14 -0400] Urocyon: maybe this is what I'm going on: ATAL: Timeout::Error: package[vmware-tools-esx-kmods] (yumrepo::vmware-tools line 52) had an error: Timeout::Error: execution expired
[2013-09-26 16:18:46 -0400] Urocyon: s/ATAL/FATAL/
[2013-09-26 16:19:48 -0400] juliancdunn: ah... yum has a timeout
[2013-09-26 16:20:13 -0400] juliancdunn: er, "yum" has a special timeout of 900s
[2013-09-26 16:20:15 -0400] juliancdunn: in Chef
[2013-09-26 16:20:30 -0400] dennis: lwrp - how do you call an action from another action within the same recipe?  It seems to work, but why-run says new_resource attributes are nil
[2013-09-26 16:20:33 -0400] juliancdunn: so you could set "yum_timeout [whatever]" in your client.rb
[2013-09-26 16:21:11 -0400] Breakin__: btm this could help us http://pastebin.com/Pqh8KDqY
[2013-09-26 16:22:35 -0400] Urocyon: I think I'll try timing this and seeing how long it's actually taking.   I'm surprised it's > 15m
[2013-09-26 16:24:01 -0400] Urocyon: I could just stop using the rpms maybe try out Bryan's vmware-tools cookbook instead of yumrepo.
[2013-09-26 16:24:45 -0400] Joes_: @juliancdunn
[2013-09-26 16:24:59 -0400] Joes_: Does not work with local either.
[2013-09-26 16:25:25 -0400] juliancdunn: Joes_: :-(
[2013-09-26 16:25:37 -0400] juliancdunn: probably worth filing a bug at tickets.opscode.com then Joes_
[2013-09-26 16:26:46 -0400] Joes_: ok, thanks
[2013-09-26 16:27:03 -0400] Joes_: Was thinking about doing a remote_file to download the erb to a /tmp location
[2013-09-26 16:27:14 -0400] Joes_: and the using template with local true and the /tmp filename
[2013-09-26 16:30:13 -0400] gkra: poop
[2013-09-26 16:30:22 -0400] gkra: now when I do "berks upload" I get:
[2013-09-26 16:30:33 -0400] dennis: lwrp - how do you call an action from another action within the same lwrp?  It seems to work fine, but why-run says new_resource attributes are nil when calling the other action
[2013-09-26 16:30:40 -0400] gkra:  /Users/gruiz-ade/.rbenv/versions/1.9.3-p392/lib/ruby/gems/1.9.1/gems/addressable-2.3.5/lib/addressable/uri.rb:101:in `rescue in parse': Can't convert Hash into String. (TypeError)
[2013-09-26 16:31:01 -0400] dennis: and fails
[2013-09-26 16:32:54 -0400] bean__: gkra: that sounds like the bug i've ran into before.
[2013-09-26 16:33:01 -0400] bean__: i had to nuke my berksfile.lock
[2013-09-26 16:33:06 -0400] bean__: when i had an HTTP source in my berks file
[2013-09-26 16:33:15 -0400] gkra: hmm...
[2013-09-26 16:33:28 -0400] gkra: yeah, if I blow the .lock file away, it works, but it re-downloads everything
[2013-09-26 16:36:22 -0400] dennis: How do you call an action from another action within the same lwrp?  It seems to work fine, but why-run errors on new_resource attributes are nil when calling the other action
[2013-09-26 16:49:19 -0400] fak3r: ok, so my ports.conf is NOT getting rewritten. file IS checked into git properly, it IS checked into chef-server correctly.
[2013-09-26 16:55:28 -0400] joenuspl: According to http://docs.opscode.com/resource_remote_file.html , file:// is supported.  However: chef-apply -e 'remote_file "/root/motd" do source "file:///etc/motd" end' fails.  Maybe not supported on 11.4.4?
[2013-09-26 16:59:42 -0400] dchalloner: Hasn't anyone tried the application::java stock example lately?  My app has application and application_java listed as dependencies.   I'm using pretty much the example application_java resource block and I'm getting an error on application/resources/default.rb:126 where the app cookbook can't find application_java_java_webapp (chef 11.4.4)
[2013-09-26 17:02:30 -0400] fak3r: ok, so somewhere, my apache port :8443 declartion is being overwritten as 443 somewhere, but I can't find in chef where that is happening
[2013-09-26 17:04:19 -0400] bean__: fak3r: is this just using the community apache cb?
[2013-09-26 17:05:15 -0400] fak3r: yes
[2013-09-26 17:05:24 -0400] bean__: and how are you setting it currently?
[2013-09-26 17:05:57 -0400] fak3r: in a recipe:
[2013-09-26 17:05:58 -0400] fak3r: template "/etc/httpd/ports.conf" do
[2013-09-26 17:05:58 -0400] fak3r:   source "ports.conf.erb"
[2013-09-26 17:05:58 -0400] fak3r: end
[2013-09-26 17:06:34 -0400] bean__: fak3r: you do know that the apache2 cookbook will pull in listen ports from attributes, right?
[2013-09-26 17:07:13 -0400] bean__: default['apache']['listen_ports'] = ['80'] etc
[2013-09-26 17:07:59 -0400] bean__: you may consider using chef-rewind if you do need to modify something that is being put there by another recipe.
[2013-09-26 17:08:08 -0400] fak3r: so yes, I had that defined below the template line oh, but I only had it as '8080' NOT '8080', '8443'! so maybe it defaulted to 443 then?
[2013-09-26 17:09:51 -0400] fak3r: so in the recipe it should be..
[2013-09-26 17:09:51 -0400] fak3r: node.default["apache"]["listen_ports"] = [ "8080", "8443" ]
[2013-09-26 17:10:49 -0400] pskirko: Hi are there official Chef reps in here? I have a question about an open ticket that would be easier to discuss in real-time if possible
[2013-09-26 17:12:45 -0400] bean__: fak3r: likely.
[2013-09-26 17:12:50 -0400] bean__: or set it in the environment
[2013-09-26 17:12:54 -0400] bean__: or on the node attribute.
[2013-09-26 17:20:27 -0400] fak3r: bean__: so I put the template thing at the bottom of my recipe - but ports still gets 443. maybe no template and apache should set 8080/8443 in ports.conf?
[2013-09-26 17:22:23 -0400] fak3r: so, something is writting the config out as 443 - then the chef run fails, so it never gets backt o writing it out as 8443 - this is what I think is happening
[2013-09-26 17:22:31 -0400] fak3r: so what would write it out as default
[2013-09-26 17:31:47 -0400] dgarstang2: I'm trying to get jenkins to build cookbooks with berkshelf and thor. ANy guides on that?
[2013-09-26 17:38:30 -0400] dennis: How do you call an action from another action within the same lwrp?  It seems to work fine, but why-run errors on new_resource attributes are nil when calling the other action
[2013-09-26 17:43:52 -0400] mattjalexander: @dgarstang2 i just have a Rakefile that jenkins calls
[2013-09-26 17:44:23 -0400] dgarstang2: mattjalexander: not what we're using but thanks for the reply.
[2013-09-26 17:44:25 -0400] chip-: dgarstang2: What do you mean "build cookbooks?" Like, run in-memory tests, or are you triggering Kitchen or another harness to fire up VMs and do full converges?
[2013-09-26 17:45:27 -0400] dgarstang2: chip-: nah, just upload to the chef server. no tests yet
[2013-09-26 17:46:17 -0400] mattjalexander: so, our rakefile is little more than foodcritic && chefspec && kitchen test && berks upload --force
[2013-09-26 17:46:18 -0400] dgarstang2: chip-: using thor scm version to bump cookbook versions, which adds tags to git, which is cool and all, but i'm trying to find a way to make jenkins only trigger a build when a tag is added
[2013-09-26 17:48:25 -0400] dgarstang2: wow, like https://github.com/opscode/test-kitchen there's totally no context whatsoever unless you wrote it, and know what it's all about
[2013-09-26 17:48:42 -0400] chip-: dgarstang2: It's not released yet, still in beta.
[2013-09-26 17:48:44 -0400] mattjalexander: i think you can use the branches to build field in jenkins with tags
[2013-09-26 17:48:58 -0400] mattjalexander: there's more documentation on how to use test-kitchen in the wiki there
[2013-09-26 17:49:04 -0400] mattjalexander: but yeah, it's still kinda sparse.
[2013-09-26 17:49:33 -0400] chip-: But you'd use a regex matcher on your ref to build off git tags.
[2013-09-26 17:50:06 -0400] dgarstang2: mattjalexander: not really. jenkins needs to build only when the tag is present. hooks will fire when a commit is made OR a tag is added. This must be such a common thing. Can't work out why there's no general solution
[2013-09-26 17:50:11 -0400] arussel`: can I put a run list in my client.rb ? (used to bootstrap an ec2 instance)
[2013-09-26 17:50:53 -0400] mattjalexander: yeah, i'd poke around jenkins job configuration or maybe plugins
[2013-09-26 17:51:01 -0400] mattjalexander: we just build off of HEAD for our cookbooks
[2013-09-26 17:51:11 -0400] dgarstang2: mattjalexander: designed only for vagrant?
[2013-09-26 17:51:49 -0400] dgarstang2: mattjalexander: We're trying to add a little more control so that every git commit doesn't go straight to prod
[2013-09-26 17:52:41 -0400] mattjalexander: well, you can try https://github.com/opscode/kitchen-ec2 or some other drivers out there
[2013-09-26 17:52:53 -0400] mattjalexander: that's what the tests are for :p
[2013-09-26 17:52:59 -0400] dgarstang2: mattjalexander: yah i think that stuff comes later though.
[2013-09-26 17:53:28 -0400] mattjalexander: you're right though, it's a common pattern that i just don't need quite yet
[2013-09-26 17:57:32 -0400] arussel`: If I start a cluster with cloudformation, I see how I can start chef-client on it, but how can I tell which recipe/role to start ?
[2013-09-26 18:11:26 -0400] juliancdunn: arussel`: I'd suggest doing it the same way the bootstrap procedure works
[2013-09-26 18:11:37 -0400] juliancdunn: create a first-boot.json and load it with chef-client -j
[2013-09-26 18:14:37 -0400] gsymons-di: Is there a way to inject a breakpoint resource into a recipe when you're in chef-shell? Or do I have to modify the cookbook and reupload it?
[2013-09-26 18:17:31 -0400] arussel`: juliancdunn: at the moment the last line of my user-data script is /usr/bin/chef-client, do you mean replace it with /usr/bin/chef-client -j first-boot.json or add new call to chef-client ?
[2013-09-26 18:19:04 -0400] RayS: I have a like 'package "htop"
[2013-09-26 18:19:36 -0400] RayS: in one of my recipies, but I'm getting "There are problems and -y was used without --force-yes" which stops the build. Is there a way aroudn this?
[2013-09-26 18:26:09 -0400] dgarstang2: thor scm version. Anyone?
[2013-09-26 18:26:41 -0400] juliancdunn: arussel`: yeah, replace it with chef-client -j /etc/chef/first-boot.json or what have you
[2013-09-26 18:27:04 -0400] juliancdunn: and then you could use CF's "files" section to bake out a JSON if you like, based on input parameters for the role
[2013-09-26 18:27:34 -0400] arussel`: juliancdunn: thanks
[2013-09-26 18:27:47 -0400] adamjk-dev: can you notify a directory resource?
[2013-09-26 18:28:09 -0400] adamjk-dev: notifies :create, 'directory[home_dir]', :immediately
[2013-09-26 18:28:26 -0400] adamjk-dev: when the directory resource has a variable in it (i.e.   directory home_dir do .... end )
[2013-09-26 18:28:28 -0400] dgarstang2: re: Thor. it writes to the VERSION file. However, the docs say to remove that from git.  However, if it isn't in git, when jenkins clones, since VERSION ins't there, the metadata.rb can't find it, and  it resolves to 0.0.0.
[2013-09-26 18:30:19 -0400] arussel`: juliancdunn: I'm reading http://docs.opscode.com/chef_client.html, wouldn't -o role[myrole] , just do it ?
[2013-09-26 18:31:31 -0400] mattjalexander: @adamjk-dev if debian & rhel disagree with how the permissions should be installed, then case it out in the cookbook as well?
[2013-09-26 18:31:51 -0400] mattjalexander: unless we have a reason to disagree with rhel about the perms on that directory
[2013-09-26 18:34:50 -0400] arussel`: what is the format of the -o option of chef-client ?
[2013-09-26 18:39:12 -0400] nicgrayson: anyone having problems uploading cookbooks to hosted chef?
[2013-09-26 18:40:41 -0400] dgarstang2: re: Thor. it writes to the VERSION file. However, the docs say to remove that from git.  However, if it isn't in git, when jenkins clones, since VERSION ins't there, the metadata.rb can't find it, and  it resolves to 0.0.0.
[2013-09-26 18:54:31 -0400] juliancdunn: arussel`: -o will do it, but I don't recommend using that
[2013-09-26 18:54:58 -0400] juliancdunn: people are contemplating making -o *not* save the node object back to the server
[2013-09-26 18:55:29 -0400] juliancdunn: if you want to use -o though, the format is "-o role[foo]" or "-o recipe[foo]"
[2013-09-26 19:03:14 -0400] btm: @opscode Knife Plugin Code review: join: https://plus.google.com/hangouts/_/5d418bd0c3b91fafed6d04c6d8c620f5fdc19b2d, watch: http://youtu.be/E9ZXbzEGNYo
[2013-09-26 19:11:34 -0400] ToBeReplaced: with the opscode postgresql cookbook, how can you make it create the default database cluster in a different data directory? (ubuntu)
[2013-09-26 19:11:39 -0400] arussel`: juliancdunn: thanks again
[2013-09-26 19:12:43 -0400] ToBeReplaced: if i override the ['data_directory'] attribute, it complains b/c the dir doesn't exist (it doesn't try to create it), and i see /var/lib/postgresql/... is nonempty
[2013-09-26 19:13:42 -0400] tscanausa: ToBeReplaced: use another cookbook to create the directory and have in run before the postgres cook book?
[2013-09-26 19:29:13 -0400] pcn: Hi all - is it possible to put node attributes into the file pointed at by the -j flag for the first run at a particular level?  E.g. {"run_list": ["recipe[kcb_cassandra]"], "override_attributes": {"cassandra_cluster_name": "pn_cassandra"}}
[2013-09-26 19:29:37 -0400] pcn: I don't see much documentation for what the json file should look like?
[2013-09-26 19:42:26 -0400] fak3r: I have a user, but we need his key regen'd - how can we do it on the commandline? Thought it was knife reregister or something?
[2013-09-26 19:47:07 -0400] stkowski: Is there a place to find the full list of platform_family options?
[2013-09-26 19:48:26 -0400] jchauncey: http://docs.opscode.com/dsl_recipe_method_platform_family.html
[2013-09-26 19:49:35 -0400] stkowski: Lookiong at thatso there is no platform_family for windows?
[2013-09-26 19:50:10 -0400] konopka: stkowksi: this might help http://hectcastro.me/2012/09/17/chef-platform-families.html
[2013-09-26 19:50:32 -0400] konopka: stkowski: ^^^^
[2013-09-26 19:50:38 -0400] stkowski: Awesome. Thanks konopka !
[2013-09-26 19:52:00 -0400] stkowski: Is it worth surfacing that as a documentation bug? And if so, how does one formally do that?
[2013-09-26 19:52:28 -0400] pcn: stkowski: jira I believe
[2013-09-26 19:53:13 -0400] broconne: Have a chef best practices question... Is it bad to set a value in node['something']['something'] if the value isn't already set?  For example, trying to programatically figure out a default...
[2013-09-26 19:53:32 -0400] pcn: stkowski: there's a docmentation component in the chef project
[2013-09-26 19:54:30 -0400] kl4m: broconne: if the default is "static", for example depending on other defaults, it can be programatically defined
[2013-09-26 19:55:20 -0400] broconne: so, if it is not explciitly set, it needs to be calculated based on the value of another attribute that must be set.
[2013-09-26 19:56:23 -0400] broconne: essentially.. trying to determine if this is the wrong thing to do.
[2013-09-26 19:57:06 -0400] broconne: node['x']['y] = [node['x']['z'].hash if node['x']['y'].nul?
[2013-09-26 19:57:18 -0400] broconne: ignore the leading [ after the qual..
[2013-09-26 19:57:23 -0400] broconne: and s/nul/nil
[2013-09-26 19:58:24 -0400] kl4m: You can use node.set_unless[:x]
[2013-09-26 19:59:08 -0400] Urocyon: My typing has been nuts since moving back to Qwerty.   Fingers just don't know what to do.
[2013-09-26 20:00:24 -0400] stkowski: pcn: thanks. Ticket filed
[2013-09-26 20:01:05 -0400] konopka: broconne: set_unless and the if .. .null? approach can lead to confusion. attribute precedence is already complicated enough without selective assignments.
[2013-09-26 20:01:33 -0400] broconne: what would my alternatives be?
[2013-09-26 20:01:43 -0400] broconne: just pull it in and if null caluclate and use the instance variable?
[2013-09-26 20:01:57 -0400] konopka: broconne: where are you expecting the value might get set?
[2013-09-26 20:02:23 -0400] broconne: when someone calls the recipe they should be able to explicitly set it.  Otherwse, we can generate a default.
[2013-09-26 20:02:38 -0400] broconne: is hwat I am trying to accomplish
[2013-09-26 20:02:57 -0400] broconne: part of the "provide reasonable defaults" mantra
[2013-09-26 20:03:07 -0400] broconne: and the default has to be unique based on another requried attribute
[2013-09-26 20:03:53 -0400] konopka: what's preventing you from setting it via node.default in the cookbook?
[2013-09-26 20:04:16 -0400] dgarstang2: Anyone else in the univerise using thor scm version besides me?
[2013-09-26 20:04:25 -0400] broconne: konopka - could you give me an example?
[2013-09-26 20:04:45 -0400] broconne: I thougth that was essentially what I was doing.
[2013-09-26 20:05:19 -0400] broconne: so we are saying
[2013-09-26 20:05:32 -0400] konopka: broconne: the cookbook sets node.default['x']['y'] = whatever  if someone wants to override it they put it somewhere where it will override, ie node.override in a cookbook, role, environment
[2013-09-26 20:05:55 -0400] broconne: node.default.x.y = node[x][z] unless node.defualt.x.y
[2013-09-26 20:06:01 -0400] broconne: that what you are proposing?
[2013-09-26 20:06:45 -0400] konopka: no, suggesting node.default.x.y = node[x][z]
[2013-09-26 20:07:13 -0400] broconne: ok, will that not override the setting if someone specifies it when they call the cookbook?
[2013-09-26 20:07:31 -0400] konopka: not if it's set node.override where they call it
[2013-09-26 20:10:12 -0400] broconne: ok, got it.. thanks.
[2013-09-26 20:13:57 -0400] paulmooring: any chef-vault users around that have a good strategy for managing access as you bring up new nodes?
[2013-09-26 20:17:37 -0400] mattjalexander: is there way to tell knife to download items into a place locally that's not your chef repo defined in knife.rb?
[2013-09-26 20:18:23 -0400] cwj: mattjalexander: doesn't the -o flag do that?
[2013-09-26 20:18:27 -0400] mattjalexander: http://docs.opscode.com/knife_download.html says i can use chef-repo-path, but i get rror: invalid option: --chef-repo-path
[2013-09-26 20:19:02 -0400] cwj: sorry, its -d
[2013-09-26 20:19:09 -0400] cwj: -o must be for some other subcommand
[2013-09-26 20:20:35 -0400] cwj: at least for knife cookbook download
[2013-09-26 20:22:21 -0400] mattjalexander: yeah, i'm trying to get data_bags
[2013-09-26 20:22:57 -0400] salientdigital: I'm trying to learn chef based on studying stuff done by a 3rd party and have some script.rb calling .py scripts in recipes - I can tail the chef/client.log and see what its doing, but the python scripts doing print "such and such" aren't getting incorporated into the logs. Anyone know where I can find that to redirect it?
[2013-09-26 21:03:45 -0400] doki_pen: Is there a way to prevent merging of an attribute when setting a value via node edit?
[2013-09-26 21:04:05 -0400] doki_pen: I read somewhere about using '!<attribute_name>', but it doesn't seem to work for me
[2013-09-26 21:04:22 -0400] doki_pen: basically, I have an array, and I want to overwrite it instead of appending too it
[2013-09-26 21:18:57 -0400] zanshin: I'm using the opscode 'java' cookbook to install jdk 7. I also need to install jdk 6 on my VM. Is there a way to pass both versions to the cookbook? Or do I need to put it in the runlist twice?
[2013-09-26 21:20:58 -0400] techminer: Two wrapper cookbooks, one for each version and apply both to the node?
[2013-09-26 21:21:24 -0400] zanshin: Yeah that sounds like it'd work
[2013-09-26 21:21:52 -0400] zanshin: Treat java as a LWRP in effect. (Provided I understand LWRPs)
[2013-09-26 21:27:43 -0400] tmpname: Does anyone know of a way to have a new node announce that it exists? IE I have a HAproxy server that handles load balancing for a series of app servers. When a new app server is created, I would like to figure out a way for it to announce its existence and have HAProxy add it to the configuration.
[2013-09-26 21:28:49 -0400] nicgrayson: tmpname: i'm not sure that is a completely solved problem. i've heard some people use zookeeper for it
[2013-09-26 21:30:09 -0400] tmpname: I have tried zookeeper and it still isn't working as I would like it too
[2013-09-26 21:30:31 -0400] mwhooker: yeah, zk is the standard way to do it
[2013-09-26 21:31:01 -0400] mwhooker: or use chef search in the haproxy recipe to come up with list of members
[2013-09-26 21:31:14 -0400] Sauraus: Hi
[2013-09-26 21:31:24 -0400] pkboyz: Does anyone have or know where I can get an example on how to create a windows users via chef
[2013-09-26 21:31:25 -0400] tmpname: Chef search isn't ideal as it requires me to run chef client on a timer
[2013-09-26 21:31:27 -0400] Sauraus: Is there a some kind of unique ID generated on a chef run?
[2013-09-26 21:31:35 -0400] Sauraus: I would like to use it to backup existing config files
[2013-09-26 21:31:40 -0400] tmpname: trying to come up with more a notification system for nodes
[2013-09-26 21:31:41 -0400] Sauraus: for authconfig
[2013-09-26 21:31:50 -0400] pkboyz: Documentation suck balls for windows
[2013-09-26 21:34:23 -0400] fak3r: so if chef-client as a deamon is running, and it hits an error, does it revert that change to restart the server it trippped up?
[2013-09-26 21:46:46 -0400] Sauraus: @OpsCode :) is there a thing like a 'chef run' ID?
[2013-09-26 21:54:51 -0400] jmickle: has anyone seen the local_ipv4 address variable not being populated before for a node?
[2013-09-26 21:55:38 -0400] doki_pen: jmickle: yeah, if the node is created but chef-client is never run from the node
[2013-09-26 21:55:51 -0400] jmickle: doki_pen: if i run chef-client -o will that fix it?
[2013-09-26 21:55:57 -0400] jmickle: doki_pen: or does it need to be a full run
[2013-09-26 21:55:58 -0400] doki_pen: *from the actually computer that is assigned to the node
[2013-09-26 21:56:34 -0400] doki_pen: I'm not sure. worth a try
[2013-09-26 21:56:40 -0400] jmickle: doki_pen: got it thank you
[2013-09-26 21:58:05 -0400] jmickle: hmm that still didn't seem to update it
[2013-09-26 22:07:47 -0400] jmickle: its the knife cloud data
[2013-09-26 22:07:53 -0400] jmickle: thats not being populated for some reason
[2013-09-26 22:08:19 -0400] dgarstang2: Nice. http://docs.kitchen-ci.org/drivers/usage == 404
[2013-09-26 22:10:24 -0400] doomviking: http://docs.kitchen-ci.org/
[2013-09-26 22:10:32 -0400] doomviking: 'sorry'
[2013-09-26 22:11:33 -0400] dgarstang2: doomviking: link on https://github.com/opscode/kitchen-ec2 is broken
[2013-09-26 22:11:51 -0400] doomviking: sadness
[2013-09-26 22:11:54 -0400] dgarstang2: but, thanks.
[2013-09-26 22:21:46 -0400] MrBIOS: hi folks, how do I go about accessing sub-items in a databag?
[2013-09-26 22:22:08 -0400] Majost: Is there any reason why the alternatives priority is not being defined in the java cookbook? https://github.com/rhass/java/blob/master/providers/ark.rb#L229
[2013-09-26 22:22:30 -0400] Majost: I am compelled to patch this -- but there may be some use cases I am neglecting to think up
[2013-09-26 22:23:21 -0400] evalencia-: Hi there, is there a way to assign a client admin privileges as the client is being registered using the chef-cllient?
[2013-09-26 22:26:37 -0400] stkowski: Are there any knife plugings to automate a local git commit of a cookbook when uploading it?
[2013-09-26 22:26:49 -0400] stkowski: Or anything to integrate the cookbooks into source control?
[2013-09-26 22:38:24 -0400] filippos: hello, i had some issues running knife solo in ubuntu 12.04 and/or under vagrant, relevant to the ruby version and the PATH set by one of the vagrant boxes. do you think it would be worth to document these as issues under knife solo in github, or not really, since they are mostly related to the environment ?
[2013-09-26 23:24:11 -0400] mattjalexander: anyone familiar with how to use the node['jenkins']['node']['env'] attribute in the jenkins cookbook?
[2013-09-26 23:56:00 -0400] jmickle: anyone know how to manually make a client admin after someone has removed the admin clients?

[2013-09-05 00:46:08 -0400] mveitas: I am looking to create a new LWRP in the mysql cookbook (basically moving the mysql_database_user from the database cookbook to the mysql cookbook). I am new to creating LWRPs, but how do I include/require something like this:  class MysqlUser < Chef::Provider::Database::Mysql
[2013-09-05 00:48:54 -0400] mveitas: would including Chef::Provier::Database::Mysql work?
[2013-09-05 02:07:23 -0400] a13x212: anyone have an example of recipe attributes based on variables?
[2013-09-05 02:15:28 -0400] Artsemis: hey guys, I'm just getting into Chef for work and have run into a stubling block... and I've heard this is a great place :) My issue is that I need to install an RPM that goes to /my/path/app_xyz where xyz is basically a versioned directory that changes. I then need to use chef to template a config file in that directory. I can get the version used for the directory name using rpm -q but it seems
[2013-09-05 02:15:28 -0400] Artsemis: template paths are built at compile time and this variable (in a ruby_block) gets set at runtime. Any ideas? Aside from writing templates in full-blown Ruby? That works but feels dirty.
[2013-09-05 02:15:55 -0400] Artsemis: (tl;dr: I need to use a runtime variable for a template path)
[2013-09-05 02:18:37 -0400] mveitas: a13x212: what do you mean based on variables meaning branching to do one thing if an attribute is set and another way if it is set to something else?
[2013-09-05 02:21:19 -0400] a13x212: mveitas, i'm trying to do this: http://pastebin.com/XQ8aC9E6
[2013-09-05 02:41:27 -0400] a13x212: looks like i got it but know this attribute seems to be cached somewhere
[2013-09-05 02:41:34 -0400] a13x212: know = now
[2013-09-05 02:50:50 -0400] yoshie902a: I noticed that I get a bootstrap error, http://pastie.org/8299323 ,when I use https://github.com/karmi/chef-hello-cloud, any ideas?
[2013-09-05 04:06:27 -0400] pono: What's the best way to handle multiple vhost entries on a shared webhost?
[2013-09-05 04:07:36 -0400] pontiki: not the way godadddy does it :((
[2013-09-05 05:54:35 -0400] girishb: please help, even though I have cookbook in chef server  I'mm getting this error 
[2013-09-05 05:54:36 -0400] girishb: http://pastebin.com/yEUaymz5
[2013-09-05 05:55:02 -0400] girishb: previously was all good working fine
[2013-09-05 05:57:51 -0400] ezotrank: Maybe can try deploy app with chef and has error like this http://cl.ly/text/3e2b2w202Q2Z ?
[2013-09-05 06:06:27 -0400] erthad: hiall
[2013-09-05 06:06:46 -0400] erthad: is there a way to define a restriction for chef version inside a cookbook?
[2013-09-05 08:11:13 -0400] tugce: Hello. I'm using amazon for chef-server. But it is very slow these days. I can't create environment because it lack of connection. Do anyone have any idea about it or experience the same situation?
[2013-09-05 08:13:20 -0400] tugce: root@something:~/chef-repo# knife environment create prod ERROR: Server returned error for https://ec2-something.eu-west-1.compute.amazonaws.com/environments/prod, retrying 1/5 in 3s
[2013-09-05 08:13:52 -0400] tugce: This is what happens when I try to create an environment with knife. Also I'm not able to create it via web ui.
[2013-09-05 08:18:43 -0400] s2r2: tugce: do basic things work? `knife node list`, `knife client list`?
[2013-09-05 08:20:56 -0400] tugce: s2r2: yes. I can list nodes, cookbooks, environments, create nodes,cookbooks, clients but when it comes to environments it fails at connections
[2013-09-05 08:22:19 -0400] tugce: s2r2: I can also edit _default environment. But creating... doesnt work.
[2013-09-05 08:23:00 -0400] s2r2: tugce: very weird .... sorry, I can't help...
[2013-09-05 08:23:59 -0400] tugce: s2r2: I also think it's very weird. I have one more question. Do you know which ports chef-server uses? I think it might be something about port numbers.
[2013-09-05 08:24:59 -0400] s2r2: https/443 should be fine
[2013-09-05 08:25:44 -0400] s2r2: maybe 4000, too, this always confuses me
[2013-09-05 08:26:12 -0400] tugce: s2r2: I use 443 as well, I was thinling about maybe I misconfigured port number but it seems fine. Thanks!
[2013-09-05 08:47:28 -0400] s2r2: hmm can someone lend me a hint on calling a cookbook's library functions from chef-shell?
[2013-09-05 08:50:27 -0400] s2r2: http://blog.vicecity.co.uk/post/58905064410/chef-11-libraries-and-lwrp-testing-in-chef-shell  << ah, I see. interesting.
[2013-09-05 08:53:44 -0400] tsunamie: when performing operations like "knife cookbook upload java2 I am constantly told I need to download and then upload the dependancies for each one of the cookbooks. IS there a way to ahve them all amss downloaded and uploaded automaticly?
[2013-09-05 08:54:43 -0400] s2r2: `knife cookbook upload -a` will upload all cookbooks in your cookbook_path
[2013-09-05 08:55:03 -0400] s2r2: but why not use berks? ;)
[2013-09-05 08:55:24 -0400] tsunamie: s2s2 - thank. I will when I know what that is. New to chef. Coming from a puppet background
[2013-09-05 08:55:37 -0400] n1ko: berkshelf is a must have imho
[2013-09-05 08:55:46 -0400] s2r2: berkshelf.com
[2013-09-05 08:56:22 -0400] tsunamie: just trying to understand how things are done and what everything is. Like I don't know what the hiera eqivalent in chef. I only understand that recipies are modules. Ohio is facte and cookbooks are kind of manifests
[2013-09-05 08:56:51 -0400] tsunamie: sorry I am still learning so I appeciate the recomendations. but until I understand the different parts and how they fit togeather
[2013-09-05 08:57:02 -0400] tsunamie: over complication or new ways fo doing things will only slow me down.
[2013-09-05 08:58:01 -0400] tsunamie: s2r2 is there a way to do a automated "knife cookbook site download" of all dependancies?
[2013-09-05 09:07:25 -0400] s2r2: berkshelf ;)
[2013-09-05 09:07:48 -0400] tsunamie: lol I see
[2013-09-05 09:07:51 -0400] tsunamie: thanks
[2013-09-05 09:08:09 -0400] s2r2: you're welcome
[2013-09-05 09:08:13 -0400] tsunamie: do you happen to ahve a beginners guide you would recomend
[2013-09-05 09:08:22 -0400] tsunamie: I am nto a fan of the opsworks doc's or guides
[2013-09-05 09:12:00 -0400] tsunamie: however I think my understanding of a cookbooks and recipes is wrong
[2013-09-05 09:12:22 -0400] tsunamie: I thought recipies were the modules but it loks like people use the term cookbook and recipies interchanably in chef
[2013-09-05 09:13:14 -0400] s2r2: cookbook ~ "a package"; so the foo cookbook might include a recipe server (foo::server) for the service foo and foo::client for the client.
[2013-09-05 09:15:04 -0400] tsunamie: k
[2013-09-05 09:15:21 -0400] tsunamie: so what is a recipie as that sounds like it is a module in puppet
[2013-09-05 09:15:41 -0400] tsunamie: where a modaul is a logical service with all compenets or varations of that service available when called
[2013-09-05 09:16:25 -0400] tsunamie: however it sounds like recipties are the sub modauls of a cookbook?
[2013-09-05 09:16:32 -0400] n1ko: tsunamie: i just explained cheff-stuff at a devops meetup here in finland, my slides can be found here: http://tasting.solita.fi/chef/
[2013-09-05 09:16:44 -0400] n1ko: although, those slides aren't really a newbie how to or migrating from puppet
[2013-09-05 09:16:51 -0400] n1ko: but some things like the cookbooks etc are explained there
[2013-09-05 09:17:07 -0400] n1ko: opscode documentation is awesome, but its a bit overwhelming when you are just getting started
[2013-09-05 09:18:43 -0400] tsunamie: n1ko - k as I feel like I am lost in the forrest of differen jargon
[2013-09-05 09:19:14 -0400] n1ko: yeah, and the funny thing is that there are multiple ways to use chef
[2013-09-05 09:19:14 -0400] woltage: tsunamie: been there too ;)
[2013-09-05 09:20:01 -0400] n1ko: for example some people give a certain web server different roles and some people make one specific role (like projectX-web-server) which includes those
[2013-09-05 09:20:05 -0400] tsunamie: I know what I need to do, but short of explaining it out in a long decription. tI feel like Making notes and putting it up on a blog. adirect cmoparision of jargon
[2013-09-05 09:20:11 -0400] tsunamie: like facter -> ohio
[2013-09-05 09:20:25 -0400] tsunamie: hira -> Databag
[2013-09-05 09:20:43 -0400] tsunamie: mcollective -> ?
[2013-09-05 09:22:28 -0400] n1ko: tsunamie: knife
[2013-09-05 09:22:37 -0400] n1ko: but ~knife, not a direct substitute
[2013-09-05 09:22:46 -0400] tsunamie: I see
[2013-09-05 09:24:40 -0400] tsunamie: so here is an intresting one. I have a cookbook that has multipke dependancies with sub dependancies. My intire estate is ubuntu at the moment. However the nginx cookbook just says I need to upload the yum dependancies
[2013-09-05 09:25:16 -0400] tsunamie: so how would people nrmally treat this. Would they just upload the dependancy and why does it alert? would it not be better for it just to accept I want it uploaded?
[2013-09-05 09:25:49 -0400] tsunamie: or again is this why Berkshelf is needed?
[2013-09-05 09:25:56 -0400] tsunamie: so people don't have to care any more
[2013-09-05 09:32:40 -0400] s2r2: mcollective can be used with chef, too, afaik
[2013-09-05 09:40:54 -0400] tsunamie: feel like I am going around in circles http://pastebin.com/MZDcQUsY
[2013-09-05 09:43:30 -0400] tsunamie: s2r2 - why would it complain about a circular dependancy?
[2013-09-05 09:44:27 -0400] s2r2: try uploading both at once (or using "upload -a")... it's been a while since I used plain knife cookbook upload with an "empty" chef server..
[2013-09-05 09:46:01 -0400] tsunamie: s2sr - http://pastebin.com/XvKL7EUN
[2013-09-05 09:46:09 -0400] tsunamie: s2r2
[2013-09-05 09:46:45 -0400] s2r2: ah, look at the version...
[2013-09-05 09:46:57 -0400] tsunamie: greater than 1.8
[2013-09-05 09:46:57 -0400] s2r2: ~> 1.8.0 doesn't match 1.10.0, but only 1.8.x
[2013-09-05 09:47:15 -0400] tsunamie: right I see
[2013-09-05 09:47:23 -0400] tsunamie: how do I download a specific version of a cookbook?
[2013-09-05 09:48:42 -0400] tsunamie: http://docs.opscode.com/knife_cookbook_site.html
[2013-09-05 09:48:44 -0400] tsunamie: got it nvm
[2013-09-05 09:49:33 -0400] tsunamie: s2r2 - sorry I thought it was a greater than :)
[2013-09-05 09:49:40 -0400] tsunamie: did'n realize it has to be that version
[2013-09-05 09:50:11 -0400] s2r2: :)
[2013-09-05 09:53:42 -0400] nimbius: hi chef.  can anyone help me understand how berkshelf fits into developing chef cookbooks and recipes?
[2013-09-05 09:54:47 -0400] nimbius: id like to use the existing opscode cookbooks, but i feel like if i squirrel them away in my own repo and write my own recipes, i miss the point.
[2013-09-05 09:56:47 -0400] tsunamie: s2r2 - I have now uploaded all the cookbooks to the chef server. what is the usaul next best practice? I can see throught the WebUI I can add these recipies /cookbooks to a run list
[2013-09-05 09:56:55 -0400] tsunamie: or should I be doing that throught knife
[2013-09-05 09:58:53 -0400] fclausen: hello all - what happens if I delete an environment that has associated hosts? Will those hosts then use the "_default" env?
[2013-09-05 10:01:37 -0400] s2r2: tsunamie: lots of ways here.  I like "knife node run_list add NODE ITEM", but there's also "knife node edit NODE"
[2013-09-05 10:02:26 -0400] s2r2: tsunamie: best practice depends on your use case...
[2013-09-05 10:02:36 -0400] tsunamie: one sec checking that out - s2r2 - k so it does'nt matter they will syntaxaully all maage the chef-server in the same way. Unlike the puppet gui?
[2013-09-05 10:02:53 -0400] tsunamie: s2r2 - rapid deployment of a POC for testing
[2013-09-05 10:03:29 -0400] s2r2: I don't follow, not much pupper knowledge here.... If you want to be rapid, you could check out how to have these steps done by cloud-init (for example), reducing manual interaction all together
[2013-09-05 10:03:31 -0400] tsunamie: I want to test ICE from nextflix just because they have a chef cookbook I decided it's time to move to chef since alot of what I do now is going to be chef orientated
[2013-09-05 10:04:04 -0400] tsunamie: s2r2 - I see
[2013-09-05 10:05:07 -0400] tsunamie: s2r2 - so after I add the cookbook to the runlist. How does it work? Does it poll every 15 minutes. do I ave to push the config from the chef-server or do I run a commmand on the chef-client to initate the running of the cookbook?
[2013-09-05 10:06:07 -0400] s2r2: note, you add recipes (or roles) to the run_list; when you specify "recipe[foo]" it really means "recipe[foo::default]", the default recipe of the foo cookbook
[2013-09-05 10:07:09 -0400] s2r2: chef-client will pull from the server: cookbooks and its run_list.  whenever it is run. you can daemonize + "-i interval" the chef-client or run it from cron or run it via "knife ssh" or plain ssh, via some orchestration tools...
[2013-09-05 10:07:45 -0400] tsunamie: whats the command to perform a run?
[2013-09-05 10:07:53 -0400] tsunamie: locally on the machine
[2013-09-05 10:08:07 -0400] tsunamie: I see knife ssh and thought it was cool
[2013-09-05 10:08:13 -0400] s2r2: "sudo chef-client -l info" is a start
[2013-09-05 10:08:27 -0400] s2r2: (the machine = the chef-managed machine, right? not the workstation)
[2013-09-05 10:08:32 -0400] tsunamie: ahhh so the binary I call is chef-client itself. K
[2013-09-05 10:08:45 -0400] tsunamie: yes the chef managed machine
[2013-09-05 10:10:51 -0400] tsunamie: s2r2 - thank one sec while I read the man page and understand what all of this is doing
[2013-09-05 10:17:24 -0400] tsunamie: s2r2 - sorry . running the comand and I understand it's the eqivalent of running puppetd -tv. So that works in the same way as I expect it
[2013-09-05 10:18:07 -0400] tsunamie: However I now get error output http://pastebin.com/P2mtXNRv on a cookbook I downloaded. I am seriously confused as powershell is a windows thing and it's trying to install/configure it for ubuntu 12.04
[2013-09-05 10:18:22 -0400] tsunamie: s2r2 - so not sure whats going on there
[2013-09-05 10:19:06 -0400] s2r2: it's ok.  all cookbook dependencies are loaded... on windows, it needs the powershell.  (weird but true)
[2013-09-05 10:20:04 -0400] s2r2: the error seems to hint at some missing (encrypted) data bag
[2013-09-05 10:20:09 -0400] tsunamie: but it's not installed anything
[2013-09-05 10:20:16 -0400] tsunamie: I assume it's because of that failure?
[2013-09-05 10:20:17 -0400] s2r2: the cookbook probably has some expectations about these...
[2013-09-05 10:20:23 -0400] s2r2: yes
[2013-09-05 10:21:12 -0400] s2r2: if you read up on how a chef-run works, there's a compile and a converge phase. with some exceptions, nothing happens (to the system) in the compile phase (where your failure happened)
[2013-09-05 10:22:51 -0400] tsunamie: s2r2 - okay I understand what went wrong now. Thanks, it's especting varables to make the install. I havwe to look into how to create a role now
[2013-09-05 10:25:09 -0400] nimbius: do i just berks upload the cookbooks to the server, then include the berkshelf cookbooks as dependencies in my application-level cookbook? or is there inheritance
[2013-09-05 10:49:33 -0400] zeroXten: any decent ways of detecting a resource state change other than using notifies?
[2013-09-05 10:57:42 -0400] tsunamie: s2r2 - sorry I feel like a munchkin - I have the following document https://github.com/mdsol/ice_cookbook . In this is states I need to create a role. However I have tried to create these roles using. knife role create ice-processor and it comes up with a json format
[2013-09-05 10:58:05 -0400] tsunamie: however have converted that file text into jason at great time expensiture but it always fails.
[2013-09-05 10:58:37 -0400] tsunamie: s2r2 - is there something I can just paste that role into? for the role to be created? As using knife to do this is not working out for me
[2013-09-05 11:41:39 -0400] s2r2: sorry, was afk.  Have a look at the "chef-repo" github repository floating around.  It's a convention to have a directory "roles/" there and ruby files, e.g. "base.rb" in it.  These can be updated on the chef server via "knife role from file base.rb"
[2013-09-05 11:42:14 -0400] s2r2: what you see in the mdsol/ice_cookbook is the output of "knife role show ..."
[2013-09-05 11:43:18 -0400] s2r2: http://docs.opscode.com/essentials_roles.html#ruby-dsl < explains the ruby dsl for roles (scroll down a little for examples)
[2013-09-05 11:53:19 -0400] yoshie902a: I noticed that I get a bootstrap error, http://pastie.org/8299323 ,when I use https://github.com/karmi/chef-hello-cloud, any ideas?
[2013-09-05 11:58:57 -0400] yoshie902a: anyone here?
[2013-09-05 12:00:17 -0400] s2r2: https://tickets.opscode.com/browse/CHEF-3698
[2013-09-05 12:00:34 -0400] s2r2: yoshie902a: this was for you ;)
[2013-09-05 12:01:05 -0400] tsunamie: s2r2 - hehe all good
[2013-09-05 12:02:10 -0400] yoshie902a: s2r2: I was installing version 10.14, does this still relate to me? I read this before, but I thought it was for a version 10.16.2
[2013-09-05 12:02:33 -0400] s2r2: sure, chef 11 uses :auto, hence all non-11-versions will fail in this way
[2013-09-05 12:02:51 -0400] s2r2: (loglevel :auto, which is unknown to 10.*)
[2013-09-05 12:02:55 -0400] tsunamie: s2r2 - I am asking for help after all, I am more than willing to wait
[2013-09-05 12:03:27 -0400] yoshie902a: s2r2: I'm confused, should I update to 11? or 10.18?
[2013-09-05 12:03:36 -0400] s2r2: your client probably is chef 11
[2013-09-05 12:03:50 -0400] yoshie902a: so therefore, I should downgrade?
[2013-09-05 12:03:53 -0400] s2r2: on your workstation; and the chef-client to-be-bootstrapped is 10.x?
[2013-09-05 12:04:12 -0400] s2r2: just bring it in sync.  you could just as well bootstrap chef-11 on the ec2 node
[2013-09-05 12:04:59 -0400] yoshie902a: got it, but should I be concerned I'll break something else by upgrading to 11?
[2013-09-05 12:05:56 -0400] yoshie902a: Is 11.6 the latest?
[2013-09-05 12:06:26 -0400] s2r2: yes, 11.6.0 (it's in the topic)
[2013-09-05 12:07:00 -0400] yoshie902a: s2r2: ok, thanks, so to confirm, I will upgrade my work station and the ec2 node to 11.6
[2013-09-05 12:07:07 -0400] s2r2: depends, node['foo'] = 'bar'  is forbidden now (use node.set['foo'] = bar or read the attribute precedence docs)
[2013-09-05 12:07:39 -0400] s2r2: (I can't promise that you will not get any issues here...)
[2013-09-05 12:07:53 -0400] yoshie902a: ok, I'll let you know. thanks
[2013-09-05 12:07:56 -0400] s2r2: but yes, if you bootstrap chef 11 on the node, this bug is worked around ;)
[2013-09-05 12:08:11 -0400] yoshie902a: will do
[2013-09-05 12:09:50 -0400] yoshie902a: testing it now, thank you and I will let you know! :)
[2013-09-05 12:11:38 -0400] james_morrin: Can someone help out with a quick vagrant / chef question?
[2013-09-05 12:12:04 -0400] james_morrin: I am trying to detect I am running in vagrant in my cookbook but this doesnt seem to work
[2013-09-05 12:12:31 -0400] n1ko: what are you trying to do?
[2013-09-05 12:12:47 -0400] yoshie902a: james_morrin:  post your error and code in a paste, it's usually more helpful
[2013-09-05 12:13:02 -0400] n1ko: we have separated vagrant runs by using different environments (since we use vagrant only in dev and have other attributes in dev that differ from prod)
[2013-09-05 12:13:31 -0400] james_morrin: so it looks like node[:instance_role] doesnt work with vagrant v2?
[2013-09-05 12:13:35 -0400] failshell: james_morrin: https://gist.github.com/failshell/0ec5ac5da3abd9da1133
[2013-09-05 12:13:38 -0400] failshell: that's how to do it
[2013-09-05 12:13:52 -0400] s2r2: there is a 'vagrant-ohai', however that's all I know about it
[2013-09-05 12:18:20 -0400] yoshie902a: s2r2: got this error now, http://pastie.org/8300199,  I found a gist with the same error, but no resolution. ;(
[2013-09-05 12:22:06 -0400] s2r2: yoshie902a: what is your distribution?
[2013-09-05 12:22:52 -0400] yoshie902a: -distro amazon, is this what you were looking for?
[2013-09-05 12:23:05 -0400] yoshie902a: s2r2: ^
[2013-09-05 12:23:46 -0400] yoshie902a: s2r2: my ec2 image is ami-aecd60c7
[2013-09-05 12:26:15 -0400] s2r2: yoshie902a: distro is supposed to be one of the bootstrap templates I think (someone correct me if I'm wrong)
[2013-09-05 12:27:00 -0400] s2r2: http://docs.opscode.com/knife_bootstrap.html#custom-templates  < you should try one that's there
[2013-09-05 12:27:08 -0400] tsunamie: s2r2 - I have made the following rb file so far. However got stuck. http://pastebin.com/Y7ui7YNG I am trying to convert the rest but not sure how.https://github.com/mdsol/ice_cookbook
[2013-09-05 12:27:31 -0400] tsunamie: the one I am stuck on is processor: ir reader. I don't know how to formate that
[2013-09-05 12:27:40 -0400] s2r2: yoshie902a: one of these for example: https://github.com/opscode/chef/tree/master/lib/chef/knife/bootstrap
[2013-09-05 12:28:26 -0400] s2r2: yoshie902a: nevermind, you already tried that, right?  (from your pastie)
[2013-09-05 12:29:10 -0400] yoshie902a: s2r2: here is my bootstrap code.. it's from chef-hello-cloud by karel.  https://github.com/karmi/chef-hello-cloud/blob/master/.chef/bootstrap/amazon.erb
[2013-09-05 12:29:34 -0400] s2r2: tsunamie: syntax trouble... try override_attributes({ :foo => { ... } }) etc
[2013-09-05 12:29:54 -0400] tsunamie: k
[2013-09-05 12:29:58 -0400] s2r2: yoshie902a: ah! now I see...
[2013-09-05 12:30:07 -0400] tsunamie: s2r2 - thanks - am I on the right track with that?
[2013-09-05 12:30:54 -0400] s2r2: tsunamie: yes, right track.  the env_run_list for the _default env is superfluous, though...
[2013-09-05 12:31:27 -0400] tsunamie: so just remove the envrun list?
[2013-09-05 12:32:22 -0400] s2r2: yup
[2013-09-05 12:35:59 -0400] yoshie902a: s2r2: did you see the issue?
[2013-09-05 12:43:46 -0400] yoshie902a: if anyone has any ideas I'm all ears(or eyes in this case)
[2013-09-05 12:47:51 -0400] yoshie902a: s2r2: what did you see?
[2013-09-05 12:48:15 -0400] s2r2: yoshie902a: sorry, I just meant that I understand your issue now... I was confused first
[2013-09-05 12:48:20 -0400] s2r2: because there's no official amazon template
[2013-09-05 12:48:25 -0400] s2r2: (bootstrap template)
[2013-09-05 12:49:15 -0400] yoshie902a: s2r2: got it, but I assume karma has it working before, so I'm not sure what broke with 11.6
[2013-09-05 12:49:55 -0400] s2r2: "Oops! This link appears to be broken.  Did you mean: www.opscode.com"  huh? that's what chrome tells me when I try to fetch the URL in your pastie output
[2013-09-05 12:49:58 -0400] yoshie902a: I usually use ubuntu or I'm a little out of my element with amazon too
[2013-09-05 12:52:39 -0400] tsunamie: s2r2 - sorry about this. I have created the role and run it. However I get the same error message. How would I debug to find out what information it's missing?
[2013-09-05 12:52:53 -0400] s2r2: it's databag related, right?
[2013-09-05 12:52:54 -0400] tsunamie: alreay tried chef-client -l debug
[2013-09-05 12:53:04 -0400] tsunamie: yea
[2013-09-05 12:55:30 -0400] tsunamie: s2r2 ??
[2013-09-05 12:56:34 -0400] s2r2: (some dependency of) this cookbook might need a specific (encrypted) data bag set up... sorry, no idea which one... have you got that output again?
[2013-09-05 12:57:47 -0400] tsunamie: http://pastebin.com/qskawS97
[2013-09-05 12:57:54 -0400] tsunamie: s2r2 - thats the new output
[2013-09-05 12:58:30 -0400] tsunamie: s2r2 - looks like powershell is expecting something
[2013-09-05 12:58:57 -0400] tsunamie: s2r2 - but I don't understand why thats still being called. Since this is linux box
[2013-09-05 13:01:04 -0400] s2r2: the error comes from a recipe of the artifact cookbook
[2013-09-05 13:05:01 -0400] tsunamie: bbleeeeee <s2r2> the error comes from a recipe of the artifact cookbook
[2013-09-05 13:05:23 -0400] tsunamie: https://github.com/RiotGames/artifact-cookbook
[2013-09-05 13:05:31 -0400] tsunamie: wtf is this for lol
[2013-09-05 13:06:12 -0400] tsunamie: got it
[2013-09-05 13:06:12 -0400] tsunamie: Nexus Usage
[2013-09-05 13:07:07 -0400] s2r2: among other things, definitely cool.
[2013-09-05 13:07:30 -0400] tsunamie: ice does'nt seem to use any of this. is there a way to turn off peaces of a cookbook. I don't get why all fo this is being called
[2013-09-05 13:08:29 -0400] s2r2: ice does use its artifact resource (recipes/default.rb)
[2013-09-05 13:09:45 -0400] tsunamie: s2r2 - :( Isee. I need to build a databag encrpted but I am not sure what it's using it for
[2013-09-05 13:10:00 -0400] tsunamie: I think it's using artifact to pull data down
[2013-09-05 13:10:09 -0400] tsunamie: from an s3bucket from scimming that
[2013-09-05 13:30:20 -0400] Archbishop: Hello
[2013-09-05 13:30:46 -0400] Archbishop: I'm having some trouble running a recipe.
[2013-09-05 13:31:05 -0400] Archbishop: chef-client raises an error saying:
[2013-09-05 13:31:27 -0400] Archbishop: "Error executing action `install` on resource 'chef_gem[rubyzip]'"
[2013-09-05 13:31:53 -0400] Archbishop: I'm using cookbooks from win-chef-repo on github
[2013-09-05 13:32:06 -0400] Archbishop: Any ideas as to what's causing this issue?
[2013-09-05 13:33:32 -0400] mveitas: Archbisop: Can you share the error log?
[2013-09-05 13:34:45 -0400] olivierb: trying to install chef server 11 on ubuntu (vagrant lxc : precise64 or quantal64)
[2013-09-05 13:35:02 -0400] olivierb: with deb chef-server_11.0.8-1.ubuntu.12.04_amd64.deb from https://opscode-omnibus-packages.s3.amazonaws.com
[2013-09-05 13:35:11 -0400] olivierb: installation works fine but
[2013-09-05 13:35:17 -0400] olivierb: 'chef-server-ctl reconfigure' is blocked at "ruby_block[supervise_rabbitmq_sleep] action run"
[2013-09-05 13:36:24 -0400] olivierb: any tips ?
[2013-09-05 13:37:56 -0400] Archbishop: mveitas: Here it is https://gist.github.com/ArcaArtem/6450206
[2013-09-05 13:38:39 -0400] mveitas: Archbishop: have you looked at the stacktrace: c:/chef/cache/chef-stacktrace.out
[2013-09-05 13:39:17 -0400] Archbishop: mveitas: No I haven't
[2013-09-05 13:41:31 -0400] Archbishop: mveitas: https://gist.github.com/ArcaArtem/6450246
[2013-09-05 13:46:12 -0400] pabst^: If I have an action on a file resource of :create instead of :create_if_missing, is it going to recreate that file on every chef run?
[2013-09-05 13:47:03 -0400] cpuguy83: pabst^: Only if it's different
[2013-09-05 13:47:46 -0400] cpuguy83: pabst^: Wait, file resource, I'm not sure.... cookbook_file, only if it's different
[2013-09-05 13:50:15 -0400] pabst^: cpuguy83: Thanks... might have to hit the mailing list or dig into the source...
[2013-09-05 13:53:55 -0400] Archbishop: mveitas: The run_list for the node has only "recipe[webpi]"
[2013-09-05 13:56:03 -0400] mveitas: Archibishop: What version of the webpi cookbook are you using?
[2013-09-05 13:57:37 -0400] Archbishop: mveitas: Latest from here: https://github.com/gmiranda23/win-chef-repo/tree/master/cookbooks/webpi
[2013-09-05 13:58:28 -0400] mveitas: Archbishop, why not just use the Opscode Cookbook: https://github.com/opscode-cookbooks/webpi
[2013-09-05 13:59:04 -0400] Archbishop:  mveitas: No idea! =) I've been following the training slides. Didn't realize there was another one
[2013-09-05 13:59:17 -0400] Archbishop: mveitas: I'll give it a go
[2013-09-05 13:59:49 -0400] Archbishop: mveitas: Many thanks
[2013-09-05 14:01:41 -0400] mveitas: Archbishop: not all cookbooks are created equal
[2013-09-05 14:09:41 -0400] Artsemis: hey guys, I'm just getting into Chef for work and have run into a stubling block... and I've heard this is a great place :) My issue is that I need to install an RPM that goes to /my/path/app_xyz where xyz is basically a versioned directory that changes. I then need to use chef to template a config file in that directory. I can get the version used for the directory name using rpm -q but it seems
[2013-09-05 14:09:43 -0400] Artsemis: template paths are built at compile time and this variable (in a ruby_block) gets set at runtime. Any ideas? Aside from writing templates in full-blown Ruby? That works but feels dirty.
[2013-09-05 14:09:59 -0400] Artsemis: (tl;dr: I need to use a runtime variable for a template path)
[2013-09-05 14:17:01 -0400] Archbishop: mveitas: Yup. That did the trick
[2013-09-05 14:17:15 -0400] Archbishop: mveitas: Thanks very much for your help
[2013-09-05 14:19:58 -0400] cwj: Artsemis: i would try shelling out to rpm -q outside of a ruby block, that is, just put some ruby inline in the recipe
[2013-09-05 14:20:21 -0400] cwj: Artsemis: in my experience, it is not possible to pass variables from inside a ruby block out to other resources
[2013-09-05 14:20:42 -0400] cwj: Artsemis: and you might look at Chef::Mixin::ShellOut for a handy way to shell out
[2013-09-05 14:21:57 -0400] cwj: Artsemis: one catch is that you may need to use some tricks to ensure your rpm exists when your shell out code would run during the compile
[2013-09-05 14:22:05 -0400] cwj: s/compile/compile phase/
[2013-09-05 14:25:37 -0400] Artsemis: cwj: That's how I originally had it but unfortunately that result from the RPM query comes from a package that gets installed just before the query :/  So the value at compile-time for the recipe will be stale :(
[2013-09-05 14:26:28 -0400] cwj: Artsemis: you can make the rpm installation happen at compile time as well
[2013-09-05 14:26:53 -0400] Artsemis: cwj: oh? this is new to me
[2013-09-05 14:28:01 -0400] cwj: http://docs.opscode.com/chef/resources.html#before-other-resources
[2013-09-05 14:28:05 -0400] cwj: try that
[2013-09-05 14:30:39 -0400] Artsemis: cwj: (sorry, still figuring out Chef) So I basically just set the action to :nothing and then manually run it? This would be on the package resource that I need to run before the rpm version query?
[2013-09-05 14:30:55 -0400] cwj: yeah exactly
[2013-09-05 14:31:41 -0400] Artsemis: interesting.. not sure I understand how that changes the order of things yet but if that solves the problem, I owe you :)
[2013-09-05 14:31:59 -0400] Artsemis: i apprecite it and I'll give that a shot
[2013-09-05 14:32:18 -0400] zts: Artsemis: take a look at this too http://docs.opscode.com/release_notes.html#lazy-attribute-evaluation
[2013-09-05 14:32:24 -0400] cwj: hope it helps :)
[2013-09-05 14:34:14 -0400] cwj: zts: that is cool, didnt know about that
[2013-09-05 14:35:20 -0400] zts: cwj: yeah, brand new in 11.6, I haven't actually used it in anger yet
[2013-09-05 14:35:48 -0400] cwj: just last night i cried out to hell with this and upgraded my pre-prod environments from 10.x to 11.6.0, so i imagine theres quite a lot of new stuff for me to discover
[2013-09-05 14:35:49 -0400] zts: nice to have one fewer reason for pulling resource convergence into the compile phase :)
[2013-09-05 14:36:44 -0400] mattupstate: I think 11.6 is a grand improvement
[2013-09-05 14:37:44 -0400] Artsemis: cwj: Interesting -- thanks for that link too. I'm not sure how I overlooked it after all the searching for this but it seems  both options will work. I'll probably try the lazy loading first since it makes more sense to me not to mess with the normal order of things with the package
[2013-09-05 14:37:59 -0400] cwj: yeah good idea
[2013-09-05 14:38:04 -0400] Artsemis: Sorry, that last link was from zts
[2013-09-05 14:39:36 -0400] Artsemis: unfortunately I'm locked into 10.16 for now but we'll be moving to 11.6 at some point... sounds like this may lock me into the first option from cwj but i really like the lazy loading feature
[2013-09-05 14:43:00 -0400] zts: Artsemis: if you can update even to 10.28 (instead of all the way to 11), that has it too - but on 10.16, cwj's option is simplest
[2013-09-05 14:43:40 -0400] drrk: Hi.  knife node show -Fj is giving my long format all the time, any ideas why?
[2013-09-05 14:44:02 -0400] Artsemis: zts: thanks for the info... i'll see if that's an option but I think it's all kinda on the backlog for right now
[2013-09-05 14:44:05 -0400] drrk: same without -Fj infat
[2013-09-05 14:47:30 -0400] zts: drrk: that happened to me the other day, and I didn't get to the bottom of it - but it went away after I upgraded my chef and berkshelf gems
[2013-09-05 14:47:56 -0400] drrk: I've doen an gem update
[2013-09-05 14:48:24 -0400] drrk: chef (11.6.0, 0.10.10)
[2013-09-05 15:05:50 -0400] s2r2: oliverb: another rabbitmq-server already running?  (I know, he left... anyways)
[2013-09-05 15:13:27 -0400] PleasureTown: Hey Guys, I am a newish user of Puppet and am interested in Chef. Are there any books I can look to?
[2013-09-05 15:17:16 -0400] cwj: PleasureTown: im aware of two books on Chef in general, but I havent read either of them so I cant comment on their value http://www.amazon.com/Chef-Definitive-Guide-Stephen-Nelson-Smith/dp/1449327443/ and http://www.amazon.com/Instant-Chef-Starter-ebook/dp/B00BKXQTJC/
[2013-09-05 15:17:27 -0400] PleasureTown: cwj: thanks!
[2013-09-05 15:17:36 -0400] cwj: PleasureTown: you might try https://learnchef.opscode.com/ for a free tutorial
[2013-09-05 15:17:57 -0400] PleasureTown: cwj: yeah, I tried that, but since I'm used to Puppet, it got me a little confused.
[2013-09-05 15:18:40 -0400] zts: the first of those two has been cancelled, apparently
[2013-09-05 15:19:23 -0400] cwj: zts: oh snap. i was wondering why it still said it wasnt shipping
[2013-09-05 15:21:05 -0400] zts: cwj: http://support.oreilly.com/oreilly/topics/chef_the_definitive_guide_missing_from_search_results :(
[2013-09-05 15:21:17 -0400] zts: yeah, I'd forgotten that was due around now
[2013-09-05 15:21:32 -0400] dnievas: Hi Guys
[2013-09-05 15:22:06 -0400] cwj: PleasureTown: disregard the first book then i guess :/
[2013-09-05 15:25:36 -0400] dnievas: Guys, I'm trying to create a highly available Chef environment. But I can't find any solid documentation, specially regarding scaling erchef. Do you know where can I look for documentation for this?
[2013-09-05 15:26:39 -0400] fak3r: after running vagrant up, chef-client kicks off, but I'm seeing this error:
[2013-09-05 15:26:40 -0400] Artsemis: cwj: zts: The run_action method seems to have solved my problem -- thanks a bunch for the help!
[2013-09-05 15:26:41 -0400] fak3r: [2013-09-05T15:25:44+00:00] INFO: Client key /etc/chef/client.pem is not present - registering
[2013-09-05 15:26:41 -0400] fak3r: [2013-09-05T15:25:49+00:00] INFO: HTTP Request Returned 409 Conflict: Client already exists
[2013-09-05 15:26:56 -0400] cwj: Artsemis: rock on
[2013-09-05 15:27:15 -0400] mveitas: dnievas: I was told to look here for docs regarding setting up a HA Chef Server: http://docs.opscode.com/server/private_chef_1x_install.html
[2013-09-05 15:27:17 -0400] fak3r: so ya, the client.pem isn't there, but I have client_key set: [2013-09-05T15:25:44+00:00] INFO: Client key /etc/chef/client.pem is not present - registering
[2013-09-05 15:27:17 -0400] fak3r: [2013-09-05T15:25:49+00:00] INFO: HTTP Request Returned 409 Conflict: Client already exists
[2013-09-05 15:27:49 -0400] cwj: fak3r: rub some https://github.com/cassianoleal/vagrant-butcher on it
[2013-09-05 15:28:00 -0400] fak3r: sorry, that should have been: client_key "#{home_dir}/.chef/#{node_name}.pem"
[2013-09-05 15:28:15 -0400] cwj: fak3r: that vagrant plugin helps you by automatically cleaning up node and client off the chef server when you destroy a vagrant box
[2013-09-05 15:33:03 -0400] fak3r: cwj: cool ya, so I installed that yesterday, and it fails with ""; status=404; method=DELETE; path=//clients/CentOS_6.4_x86_64_Minimal; user=phil; msg=client_not_found;""
[2013-09-05 15:33:44 -0400] fak3r: cwj: so that tells me that the initial error during vagrant up is right; it's not finding/using the client.pem, so it's giving it the wrong URL to use on the delete
[2013-09-05 15:34:38 -0400] fak3r: cwj: so even when I manually, 'knife node delete localhost' - I still see that error when I do vagrant up
[2013-09-05 15:35:53 -0400] fak3r: assuming maybe I have a knife.rb issue?
[2013-09-05 15:36:11 -0400] cwj: yes that would be my first guess
[2013-09-05 15:52:19 -0400] cpuguy83: So... Berkshelf... how do I customize the chefignore file?
[2013-09-05 15:59:49 -0400] dandroid_: i am having an issue where i have a init script called node-service-layer that i can use like "sudo service node-service-layer start|stop|status"
[2013-09-05 15:59:52 -0400] dandroid_: however
[2013-09-05 16:00:03 -0400] dandroid_: when i use what i normally use for services in chef to call start
[2013-09-05 16:00:08 -0400] dandroid_: i have no success
[2013-09-05 16:00:12 -0400] dandroid_: any ideas from anyone?
[2013-09-05 16:01:26 -0400] mveitas: anyone know how to delete an opscode account? My finance dept decided to create an account without talking to the tech team which had an account already setup
[2013-09-05 16:03:37 -0400] dandroid_: i am having an issue where i have a init script called node-service-layer that i can use like "sudo service node-service-layer start|stop|status" however when I use the service block it doesnt start the service, anyone have ideas? if it helps i have also trried the /etc/init.d/node-service-layer approach wthin an execute block with no success also
[2013-09-05 16:04:07 -0400] cwj: dandroid_: gist your recipe?
[2013-09-05 16:04:34 -0400] cwj: dandroid_: if the init script is failing to run inside chef, i tend to start with checking the environment variables the script expects
[2013-09-05 16:04:38 -0400] MrBIOS: Mornin folks!
[2013-09-05 16:04:48 -0400] MrBIOS: Are return codes for chef-client documented anywhere?
[2013-09-05 16:05:04 -0400] clakeb: mveitas: you can just add their user to your organization and give them billing privileges.
[2013-09-05 16:05:33 -0400] mveitas: clakeb: good point! thanks
[2013-09-05 16:05:52 -0400] dandroid_: http://pastebin.com/FRxdjQkq
[2013-09-05 16:06:51 -0400] dandroid_: cwj  thats an interstring thought
[2013-09-05 16:06:59 -0400] dandroid_: @cwj thats a good idea
[2013-09-05 16:07:04 -0400] dandroid_: crap
[2013-09-05 16:08:42 -0400] cpuguy83: MrBIOS: You should be looking at Ruby exceptions and not return codes
[2013-09-05 16:09:29 -0400] cpuguy83: MrBIOS: That said, I could not find anything about chef-client's exit codes
[2013-09-05 16:09:54 -0400] MrBIOS: yeah nor I
[2013-09-05 16:10:10 -0400] MrBIOS: all I want to do is trigger some basic behavior if provisioning of a node fails
[2013-09-05 16:10:18 -0400] MrBIOS: so we can get some eyes on it
[2013-09-05 16:10:21 -0400] cpuguy83: MrBIOS: Have a look at handlers
[2013-09-05 16:10:31 -0400] MrBIOS: ok
[2013-09-05 16:10:33 -0400] MrBIOS: will do, thanks
[2013-09-05 16:11:01 -0400] cpuguy83: MrBIOS: Also, you can rescue an exception, do what you want to do, then re-raise that same exception (or retry the code block)
[2013-09-05 16:11:20 -0400] cpuguy83: ... Or pretty much whatever you want.
[2013-09-05 16:27:47 -0400] cannonball: I've got a FreeBSD box running under vagrant.  Ports is not installed on this machine.  When I run the chef-solo command manually, and the only recipe is "vim", it tries to install vim from ports instead of doing pkg_add. I'm trying to wrap my head around *why* chef is using ports instead of pkg's.
[2013-09-05 16:28:33 -0400] cannonball: I tend to think I have a vagrant configuration problem and not a chef problem.  Either way it's PEBKAC. :-/
[2013-09-05 16:29:17 -0400] cpuguy83: cannonball: http://docs.opscode.com/resource_freebsd_package.html
[2013-09-05 16:29:34 -0400] cpuguy83: You the freebsd_package resource instead
[2013-09-05 16:29:37 -0400] cpuguy83: *use the
[2013-09-05 16:35:42 -0400] cannonball: cpuguy83: So I'm right, I have to figure out how to configure vagrant to make chef use freebsd_package instead of just package.  These are common recipes pulled from opscode site by the Berkshelf plugin, so I'm not really sure if that's possible.
[2013-09-05 16:36:11 -0400] cpuguy83: cannonball: This is done via the cookbook, not vagrant
[2013-09-05 16:37:54 -0400] zts: cpuguy83: can you explain a little bit more about why that's required?  The package resource should use the provider appropriate to the platform, so I'd have imagined that "freebsd_package" would be already be used when running on freebsd
[2013-09-05 16:38:16 -0400] cannonball: cpuguy83: Can I infer that I am going to have to make all of my own cookbooks for my freebsd host instead of using the official opscode cookbooks?
[2013-09-05 16:38:38 -0400] adnichols: cannonball you are probably going to have to make quite a bit of stuff work on your own
[2013-09-05 16:38:53 -0400] cpuguy83: zts: the package resource is by default going to use the preferred installation mechanism, which is apt, yum, ports, etc.
[2013-09-05 16:38:58 -0400] adnichols: cannonball most cookbooks I've seen are centos/ubuntu at best
[2013-09-05 16:39:05 -0400] cpuguy83: If you want to install actual packages you need to tell it that's what you want to do
[2013-09-05 16:40:38 -0400] cpuguy83: You can override the provider in the package resource as well.
[2013-09-05 16:40:41 -0400] cpuguy83: http://docs.opscode.com/resource_package.html
[2013-09-05 16:42:44 -0400] zts: I may not have been very clear in my question
[2013-09-05 16:43:42 -0400] aemcknig: Hey, #chef, question for you - I'm having a hard time setting up a handler to catch 401 - Unauthorized exceptions on chef-client runs
[2013-09-05 16:43:49 -0400] cpuguy83: zts: It is using the provider approriate for the platform, but the default provider is going to be a package management system like APT, Yum, Ports, or whatever is the norm for the system, not just the plain jane package installer
[2013-09-05 16:44:08 -0400] aemcknig: when the clock on a machine that we chef gets out of sync, this happens and we don't hear about it
[2013-09-05 16:44:34 -0400] aemcknig: but it looks like the handlers set up in client.rb don't actually run when that happens - maybe chef-client quits before the handlers are registered?
[2013-09-05 16:44:58 -0400] aemcknig: Is there an outline of the chef-client run timeline somewhere, or does somebody know a way to catch these exceptions?
[2013-09-05 16:45:58 -0400] jtimberman: mveitas: unfortunately at this timme i don't believe we have self-service account deletion and you'll need to email support@opscode.com for assistance.
[2013-09-05 16:46:10 -0400] MrBIOS: wow, that's pretty lame
[2013-09-05 16:46:16 -0400] MrBIOS: get your act together, guys
[2013-09-05 16:46:42 -0400] cpuguy83: MrBIOS: Sorry the free software doesn't do exactly what you want it to out of the box.
[2013-09-05 16:47:14 -0400] mattupstate: cpuguy83:  easy now ;)
[2013-09-05 16:47:17 -0400] cpuguy83:  :)
[2013-09-05 16:47:28 -0400] binamov: aemcknig http://docs.opscode.com/essentials_nodes_chef_run.html and also consider running ntp?
[2013-09-05 16:47:29 -0400] cpuguy83: I am in know way affiliated with opscode, btw
[2013-09-05 16:47:45 -0400] jtimberman: cpuguy83: Enterprise Chef isn't free over 5 nodes though :)
[2013-09-05 16:48:45 -0400] aemcknig: binamov: It's even a chart!  This is wonderful.
[2013-09-05 16:49:07 -0400] aemcknig: great.  Thank you :)
[2013-09-05 16:49:27 -0400] binamov: aemcknig if the time is off my guess is that authentication won't happen
[2013-09-05 16:51:36 -0400] aemcknig: yes, that seems to be the problem
[2013-09-05 16:51:59 -0400] binamov: aemcknig typically folks have ntp as part of their base role
[2013-09-05 16:53:05 -0400] jtimberman: MrBIOS: it's unfortunate that we don't have that, indeed. however, we don't get a lot of requests anyway so it hasn't been a thing that's been prioritized.
[2013-09-05 16:53:42 -0400] aemcknig: Yeah, it looks like we have it in there somewhere - I'll have to investigate further (I'm new to our chef setup (and chef in general))
[2013-09-05 16:53:51 -0400] MrBIOS: yeah, I guess it's just something I consider such a basic piece of functionality, that it seems backwards to think it should even need "lots of requests" to have been implemented in the first place :)
[2013-09-05 16:54:01 -0400] MrBIOS: for other features, I can understand that policy
[2013-09-05 16:54:05 -0400] aemcknig: but apparently we occasionally have this issue, or are worried that we might have it and not know because we aren't being notified of failed runs
[2013-09-05 16:54:52 -0400] cpuguy83: aemcknig: You could wrap the chef-client run in another script so you can handle the error
[2013-09-05 16:55:26 -0400] cwj: better yet, use exception handler? http://docs.opscode.com/essentials_handlers.html
[2013-09-05 16:56:12 -0400] aemcknig: cpuguy83: I considered that, but it seems a bit shaky and I figured I'd try to understand the flow of chef-client and maybe come up with a better solution
[2013-09-05 16:56:24 -0400] aemcknig: cwj: The problem is that the exception handlers aren't registered in time to catch the exception
[2013-09-05 16:56:32 -0400] cwj: ah
[2013-09-05 16:56:36 -0400] cwj: i see what you mean
[2013-09-05 16:56:38 -0400] aemcknig: Also, I hear chef-client accepts patches?  Is there code somewhere?
[2013-09-05 16:56:40 -0400] aemcknig: yeahhh
[2013-09-05 17:00:51 -0400] siezer: aemcknig https://wiki.opscode.com/display/chef/How+to+Contribute
[2013-09-05 17:01:44 -0400] aemcknig: Fantastic.  Thanks, siezer :)
[2013-09-05 17:15:45 -0400] dgarstang: I've got a simple package statement in my recipe.rb.... chef is trying to run 'apt-get -q -y install python-mako=0.3.6-1'. Where's it pulling the version number from? Why is it pinning it?
[2013-09-05 17:17:34 -0400] cpuguy83: dgarstang: What's your package statement?
[2013-09-05 17:18:06 -0400] dgarstang: cpuguy83: for pkg in ['python-boto', 'python-mako'] do package "#{pkg}" do action :install end end
[2013-09-05 17:19:21 -0400] cpuguy83: dgarstang: It's probably pinning it to the current version available, I've not watched things this closely.
[2013-09-05 17:20:10 -0400] cpuguy83: dgarstang: Also, Ruby semantics... try ['python-boto', 'python-mako'].each do |pkg|
[2013-09-05 17:20:24 -0400] dgarstang: cpuguy83: No thanks. Far less readable that way
[2013-09-05 17:20:37 -0400] Shred00: i have http[s]_proxy set in my solo.rb file and while that seems to work for fetching the json_attributes, chef-solo seems to not want to use the proxy to fetch the recipe_url.  is this a known limitation?
[2013-09-05 17:24:35 -0400] pcn: Heya chefs.  Is there a way to say, at the top of a recipe, "return if node["is_in_testkitchen"]"?
[2013-09-05 17:24:55 -0400] pcn: I want to not compile any resources for my aws raid creation if this recipe is invoked in a test kitchen context
[2013-09-05 17:27:56 -0400] sparr: how can I delete multiple nodes and/or clients at once?
[2013-09-05 17:29:24 -0400] adnichols: sparr I haven't found a more elegant way than a for loop - would love to know of one
[2013-09-05 17:29:44 -0400] sparr: `knife node bulk delete` works, but it's slower than doing it manually from the web ui :(
[2013-09-05 17:29:46 -0400] adnichols: I suspect knife exec could do it w/ the right code
[2013-09-05 17:30:09 -0400] cwj: i believe you could write some code around https://github.com/RiotGames/ridley to do it
[2013-09-05 17:30:32 -0400] cwj: i used to use https://github.com/danryan/spice but it is no longer supported
[2013-09-05 17:30:49 -0400] adnichols: cwj nice
[2013-09-05 17:31:08 -0400] MrBIOS: hm, I'm trying to use easy_install_package in a chef recipe
[2013-09-05 17:31:29 -0400] MrBIOS: from the CLI I can install it just fine with "easy_install /path/to/zipfile"
[2013-09-05 17:31:37 -0400] MrBIOS: but can't seem to make this work via chef
[2013-09-05 17:33:48 -0400] adnichols: MrBIOS can you provide some detail around how you are trying to do it and how it's failing? Maybe in a pastebin?
[2013-09-05 17:35:25 -0400] MrBIOS: @adnichols http://pastie.org/8301013
[2013-09-05 17:35:34 -0400] MrBIOS: that's all I want Chef to do for me
[2013-09-05 17:36:09 -0400] adnichols: MrBIOS that's great - I need to see how you are doing it in chef & what the error is
[2013-09-05 17:36:28 -0400] MrBIOS: I've tried it a few different ways with chef
[2013-09-05 17:36:48 -0400] adnichols: well lets start with one
[2013-09-05 17:45:06 -0400] MrBIOS: adnichols: http://pastie.org/private/hodrp0ar7theviylcowaqg
[2013-09-05 17:47:36 -0400] MrBIOS: adnichols: looks like it's erroring with "Chef::Exceptions::Package: easy_install_package[scrapylib] (scrapy::default line 40) had an error: Chef::Exceptions::Package: No version specified, and no candidate version available for scrapylib"
[2013-09-05 17:49:30 -0400] cjerdonek: i'm having a problem with the application/application_ruby cookbook: chef doesn't display stderr/stdout when a pre-deployment step fails. it just says "Chef::Exceptions::Exec: bundle exec rake db:migrate returned 1, expected 0"
[2013-09-05 17:49:52 -0400] cjerdonek: any recommendations?
[2013-09-05 17:50:19 -0400] Kzim: any reason my chef-client do not get the latest cookbook, i have no constraint in run_list or environment can i force the refresh for something ?
[2013-09-05 17:51:33 -0400] cwj: Kzim: perhaps one of the cookbooks in your run list specifies a version constraint which prevents your expected version from being used?
[2013-09-05 17:52:15 -0400] cwj: Kzim: you could try to expose the conflict by forcing your expected version in the nodes environment
[2013-09-05 17:52:25 -0400] Kzim: cwj, i have 2 cookbook with depend on the same one but 2 diffrent version it cause issue ?
[2013-09-05 17:53:53 -0400] basic`: is there a better way to define node array values in a chef recipe -- instead of doing a node['thing']['item'] = 'value'
[2013-09-05 17:54:16 -0400] Kzim: cwj, @my_version with only that cookbook doesn't work :(
[2013-09-05 17:55:02 -0400] afirth: basic`: you mean like node->thing->item = 'value'? i'm confused
[2013-09-05 17:55:53 -0400] basic`: afirth: sorry, like i want to define node['thing']['item1'], item2, item3, item4, etc.
[2013-09-05 17:55:54 -0400] basic`: instead of having to repeat node['thing'] each time
[2013-09-05 17:55:59 -0400] cwj: Kzim: if you have two recipes in the run list for a single node, and the cookbooks for those recipes have conflicting version dependencies on a third cookbook, you should get an error
[2013-09-05 17:56:28 -0400] cwj: Kzim: but if the version constraints are different, and not necessarily in conflict, youll probably get the lowest version that satisfies both constraints
[2013-09-05 17:56:47 -0400] cwj: er newest version that satisfies both constraints
[2013-09-05 17:56:59 -0400] cwj: which tends to be an older version
[2013-09-05 17:58:53 -0400] basic`: afirth: any idea?
[2013-09-05 17:59:25 -0400] afirth: this is in cookbookfoo/attributes/blah.rb?
[2013-09-05 17:59:27 -0400] Kzim: cwj, i do a chef-client -o "recipe[mycookbook::myrecipe@0.1.8]" and it still does not work
[2013-09-05 17:59:45 -0400] Kzim: cwj, i did a knife cookbook download mycookbook version 0.1.8 and the metadata are ok
[2013-09-05 17:59:53 -0400] basic`: afirth: cookbooks/recipes/blah.rb
[2013-09-05 17:59:59 -0400] Kzim: cwj, i did a rm -rf /var/chef/cache :(
[2013-09-05 18:00:06 -0400] cwj: i am not familiar with the recipe[mycookbook::myrecipe@0.1.8] syntax you are talking about
[2013-09-05 18:00:59 -0400] miah: hello children
[2013-09-05 18:01:03 -0400] cwj: hi miah
[2013-09-05 18:01:15 -0400] miah: HI CHEF
[2013-09-05 18:01:54 -0400] afirth: basic`:  i guess you could put them in a databag, but i'm not aware of any way to put the json in there directly
[2013-09-05 18:02:10 -0400] miah: databags are mashes
[2013-09-05 18:02:17 -0400] afirth: basic`: vim is you're friend :)
[2013-09-05 18:02:20 -0400] afirth: your
[2013-09-05 18:02:23 -0400] miah: pretty easy to put things into them
[2013-09-05 18:02:38 -0400] afirth: miah: into the recipe, not into a databag
[2013-09-05 18:02:47 -0400] miah: hrm?
[2013-09-05 18:02:49 -0400] miah: elaborate
[2013-09-05 18:03:29 -0400] afirth: basic`1:55 afirth: sorry, like i want to define node['thing']['item1'], item2, item3, item4, etc.
[2013-09-05 18:03:29 -0400] afirth: basic`1:55 instead of having to repeat node['thing'] each time
[2013-09-05 18:04:26 -0400] miah: foo = { 'thing' => { } }
[2013-09-05 18:04:31 -0400] miah: or something like that
[2013-09-05 18:04:34 -0400] miah: im still not quite awake
[2013-09-05 18:04:48 -0400] miah: but you can shorten it up by setting a variable to the spot you want to work
[2013-09-05 18:05:09 -0400] miah: also i dont use attributes :P
[2013-09-05 18:05:32 -0400] MrBIOS: who here is familiar with http://docs.opscode.com/resource_easy_install_package.html ?
[2013-09-05 18:06:30 -0400] mattupstate: MrBIOS: whats up?
[2013-09-05 18:06:49 -0400] TJNII_: Are there repositories for Chef, or do you need to perform installs as one-offs.  I'm currently looking at http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/ and I can't seem to locate a repo containing the chef-server RPMs.
[2013-09-05 18:07:12 -0400] arussel``: I'm having trouble understanding the files in .chef. what is the difference between client_key and validation_key ?
[2013-09-05 18:07:20 -0400] miah: TJNII_: opscode.com/http://www.opscode.com/chef/install/
[2013-09-05 18:07:22 -0400] MrBIOS: mattupstate: http://pastie.org/private/hodrp0ar7theviylcowaqg
[2013-09-05 18:07:22 -0400] miah: er, http://www.opscode.com/chef/install/
[2013-09-05 18:07:27 -0400] miah: fuck im awful this morning
[2013-09-05 18:07:47 -0400] MrBIOS: mattupstate: in short trying to use easy_install from a local zip file. It works fine when manually run at the CLI
[2013-09-05 18:07:53 -0400] basic`: miah: so something similar to the roles attributes?
[2013-09-05 18:08:05 -0400] MrBIOS: example of that working at http://pastie.org/private/hodrp0ar7theviylcowaqg
[2013-09-05 18:08:32 -0400] TJNII_: miah: Yea, I don't want to download a one-off RPM, I want to configure a yum repo so I can pull in upgrades per the standard in my OS.  Are there yum repositories for Chef?
[2013-09-05 18:09:23 -0400] basic`: no attributes? how? :)
[2013-09-05 18:09:39 -0400] miah: TJNII_: so download the rpm and setup a repo
[2013-09-05 18:10:00 -0400] TJNII_: miah: No, you're missing my point.
[2013-09-05 18:10:22 -0400] miah: no. you want opscode to host a yum repository. i dont rely on third-parties during system bootstrapping =)
[2013-09-05 18:10:48 -0400] TJNII_: miah: I would like to use an opscode repo, so when opscode releases a new version it is available via "yum update"
[2013-09-05 18:10:56 -0400] miah: yes, i get it
[2013-09-05 18:10:59 -0400] TJNII_: Rather than having to go to opscode.com and dlwnload the new rpm
[2013-09-05 18:11:19 -0400] miah: you know you can automate such things via rsync or wget ?
[2013-09-05 18:11:44 -0400] miah: also, fwiw. they used to have repo's. i dont know what the address is though.
[2013-09-05 18:11:55 -0400] mattupstate: MrBIOS: is the python library called scrapylib?
[2013-09-05 18:12:30 -0400] mattupstate: and when you say manual, what you do mean?
[2013-09-05 18:12:36 -0400] arussel``: I'm having 'Response:  Invalid signature for user or client' when trying to upload a cookbook
[2013-09-05 18:12:41 -0400] gyre007: how can I load nodes runlist from some file ?
[2013-09-05 18:12:57 -0400] gyre007: essentially i dont want to be adding and removing
[2013-09-05 18:13:03 -0400] gyre007: I just want to load runlist
[2013-09-05 18:14:22 -0400] gyre007: essentially is there a way to modify node's runlist with one knife command
[2013-09-05 18:15:24 -0400] MrBIOS: mattupstate: yes
[2013-09-05 18:16:14 -0400] mattupstate: so whats the manual command?
[2013-09-05 18:17:01 -0400] TJNII_: Looks like https://wiki.opscode.com/display/chef/Opscode+Yum+Repository+Excerpt may have my answer.
[2013-09-05 18:17:04 -0400] MrBIOS: mattupstate: sorry, mispasted second pastie url before http://pastie.org/8301013
[2013-09-05 18:18:09 -0400] arussel``: is the client_key of knife.rb referring to my loggedin name in the manage.opscode.com or to the list in the clients tab ?
[2013-09-05 18:19:44 -0400] mattupstate: MrBIOS: looking at the source code for that provider, it doesn't look as if they considered this scenario
[2013-09-05 18:19:50 -0400] pabst^: being forced into SVN world when you LOVE git should be considered abuse
[2013-09-05 18:22:10 -0400] mattupstate: MrBIOS: I would just use the execute provider for now
[2013-09-05 18:23:04 -0400] MrBIOS: too bad, it's a pretty useful use case
[2013-09-05 18:23:06 -0400] mattupstate: MrBIOS: there's already a ticket for this issue https://tickets.opscode.com/browse/CHEF-1695
[2013-09-05 18:23:13 -0400] MrBIOS: thanks, I'll upvote it
[2013-09-05 18:23:55 -0400] dgarstang: Anyone here using knife ec2 with proxies (-w) across multiple amazon ec2 regions?
[2013-09-05 18:24:23 -0400] MrBIOS: done, and commented
[2013-09-05 18:25:10 -0400] arussel``: I've successfuly authenticated but got: Response:  missing update permission. I can't find in the console where to update this permission ...
[2013-09-05 18:27:29 -0400] basic`: miah: while you're here upgrading the chef server via the omnitruck rpm safe? do i need to backup/restore anything?
[2013-09-05 18:27:50 -0400] miah: uh, always backup before doing upgrades. JUST IN CASE
[2013-09-05 18:27:56 -0400] miah: but ya, its probably fine
[2013-09-05 18:28:23 -0400] basic`: ya, i mean i have backups nightly
[2013-09-05 18:28:24 -0400] basic`: just wondering what the process is assuming no unexpected issues
[2013-09-05 18:31:00 -0400] basic`: backup, chef-server-ctl stop, install new rpm, chef-server-ctl start?
[2013-09-05 18:32:01 -0400] dgarstang: Anyone here using knife ec2 with proxies (-w) across multiple amazon ec2 regions?
[2013-09-05 18:35:03 -0400] miah: that should cover it
[2013-09-05 18:37:12 -0400] redfive_: I'm working through a tutorial from opscode that sets up mysql on a Ubuntu 12.04 vagrant box and I'm getting a failure in the minitest that does | service('mysqld').must_be_enabled |  It appears that mysqld is running, although the init.d entry is for mysql
[2013-09-05 18:37:44 -0400] redfive_: I've been searching online to see if this is a known issue and can't really find anything specific.
[2013-09-05 18:41:12 -0400] dgarstang: Anyone here using knife ec2 with proxies (-w) across multiple amazon ec2 regions?
[2013-09-05 18:45:28 -0400] adamjk-dev: redfive_: is mysqld managed via runit or service resource?
[2013-09-05 18:46:40 -0400] redfive_: adamjk-dev: on the VM I use service to interact with it.
[2013-09-05 18:47:24 -0400] redfive_: There is a call to enable mysql in the cookbook for mysql::server, I don't see any output related to that line in my chef run.
[2013-09-05 18:48:43 -0400] redfive_: It's also odd to me that the file installed in init.d is named mysql instead of mysqld or mysql.server, but I don't think that's interfering as a similar check for service('mysqld').must_be_running succeeds.
[2013-09-05 18:52:57 -0400] gyre007: looks like updating a run_list could be done via knife exec mmm...now to figure it out
[2013-09-05 18:57:02 -0400] gyre007: oh boy...so there isn't an easy way to do this...mmmm if there is one at all...
[2013-09-05 18:58:16 -0400] redfive_: doens't knife node run_list add <nodename> <recipe> do that?
[2013-09-05 19:04:02 -0400] btm: @opscode knife code review, join: https://plus.google.com/hangouts/_/b663aeb530a265e53534bd751e8370c3253cd050, watch: http://youtu.be/K5kGmYa6Pxw
[2013-09-05 19:06:31 -0400] gyre007: redfive_: nope
[2013-09-05 19:06:47 -0400] gyre007: that can only add (which appends at the end) or remove (which removes from wherever)
[2013-09-05 19:06:53 -0400] gyre007: but you can essentially JUST APPEND
[2013-09-05 19:07:07 -0400] gyre007: you can give knife a COMPLETELY new runlist
[2013-09-05 19:07:24 -0400] gyre007: or you can't INSERT new item inside the run_list
[2013-09-05 19:07:28 -0400] gyre007: which is kind of funny
[2013-09-05 19:07:33 -0400] gyre007: because ORDER MATTERS
[2013-09-05 19:07:48 -0400] gyre007: so you must slavishly load WebUI to do anything more complicated with runlists
[2013-09-05 19:07:49 -0400] gyre007: ...
[2013-09-05 19:07:54 -0400] gyre007: which is really annoying
[2013-09-05 19:07:57 -0400] dgarstang: Anyone here using knife ec2 with proxies (-w) across multiple amazon ec2 regions?
[2013-09-05 19:14:40 -0400] gabrielqs: trying to install bacula through this cookbook (http://community.opscode.com/cookbooks/bacula) and getting a weird error: chef_gem[mysql] (mysql::ruby line 31) had an error: ArgumentError: Illformed requirement [""]
[2013-09-05 19:14:47 -0400] gabrielqs: any ideas on how to fix this?
[2013-09-05 19:15:18 -0400] tasslehawf: Is there any documentation on setting up jenkins plugins with chef?
[2013-09-05 19:23:23 -0400] dgarstang: Anyone here using knife ec2 with proxies (-w) across multiple amazon ec2 regions?
[2013-09-05 19:23:43 -0400] arussel``: what cookbook can I use to download an artifact from a private maven repository (artifactory) ?
[2013-09-05 19:24:51 -0400] gabrielqs: nevermind... i added the mysql client recipe to the role's run list and it worked
[2013-09-05 19:25:01 -0400] gabrielqs: strange it didn't complain about the dependency, though
[2013-09-05 19:25:11 -0400] gabrielqs: anyway... moving on...
[2013-09-05 19:27:37 -0400] cpuguy83: gabrielqs: mysql gem fails to install without libmysqlclient installed
[2013-09-05 19:30:38 -0400] gabrielqs: cpuguy83: yes... it is the bacula cookbook that doesn't list mysql as a dependency...
[2013-09-05 19:31:27 -0400] cpuguy83: gabrielqs: Yeah, I'm not sure you can set a gem dependency in a cookbook.
[2013-09-05 19:34:14 -0400] yfeldblum: gyre007, `knife node edit $NODE` to edit a run-list
[2013-09-05 19:36:18 -0400] dgarstang: Anyone here using knife ec2 with proxies (-w) across multiple amazon ec2 regions?
[2013-09-05 19:44:00 -0400] elathrop: how does one get the fqdn of a windows node to be the ec2 dns name?
[2013-09-05 19:45:17 -0400] jhulten_: Anyone know a way to do a 'before' notification? Calling an action on a resource before a resources action runs?
[2013-09-05 19:48:48 -0400] gyre007: yfeldblum: Id like to load it from a file...I mean JUST the runlist not the whole object
[2013-09-05 19:49:00 -0400] gyre007: but yeah edit is the option I went with...
[2013-09-05 19:51:19 -0400] cwj: i have a cookbook foo with versions 0.5.0 and 0.4.0 available on the chef server, and a cookbook bar which specifies a dependency on foo ~> 0.4.0. why does it seem to be necessary for me to lock the environment at 0.4.0 in order for chef to resolve the dependencies for cookbook bar?
[2013-09-05 19:52:20 -0400] pwelch: anyone have any experience with knife-spork?
[2013-09-05 19:52:34 -0400] mattupstate: yeup
[2013-09-05 19:52:39 -0400] pwelch: pros/cons or is there a new hottness?
[2013-09-05 19:52:48 -0400] mattupstate: i still dig it
[2013-09-05 19:53:26 -0400] pwelch: mattupstate: cool
[2013-09-05 19:53:30 -0400] dgarstang: Anyone here using knife ec2 with proxies (-w) across multiple amazon ec2 regions?
[2013-09-05 19:58:14 -0400] fak3r: vagrant up will create a new client on chef-server, but not the node. I get this in the output [2013-09-05T20:40:34+02:00] INFO: Client key /etc/chef/client.pem is not present - registering
[2013-09-05 19:58:43 -0400] fak3r: the client.pem, shouldn't that be ~/.chef/$NAME.pem or should it be on the server?
[2013-09-05 19:59:04 -0400] chip-: fak3r: node.save only happens when the run finishes successfully, so I wouldn't expect a node object created unless the run passes.
[2013-09-05 19:59:36 -0400] fak3r: ah, ok - sounds like what's happening
[2013-09-05 20:00:21 -0400] chip-: fak3r: The authentication loop for chef-client is: Does /etc/chef/client.pem exist? If no, use validation.pem to register with the server, and generate my own client.pem. From then on, client.pem will exist, so it'll re-use that next run.
[2013-09-05 20:01:01 -0400] fak3r: so that will then exist in /etc/chef on the server?
[2013-09-05 20:04:22 -0400] azret: does knife client create not create a key pair on the client?
[2013-09-05 20:07:56 -0400] force: I'm getting a notification that a constant in my attribute file is already defined. But...nuh uh. Not in this cookbook. Do all constants defined in attribute files exist in the same scope? So if I have a constant called USERNAME in cookbooks/foo/attributes/default.rb and cookbooks/bar/attributes/default.rb with 2 different definitions, does this bite me?
[2013-09-05 20:08:32 -0400] dgarstang: Anyone here using knife ec2 with proxies (-w) across multiple amazon ec2 regions?
[2013-09-05 20:13:41 -0400] a13x212: how do i override an attribute when running via chef-client
[2013-09-05 20:14:33 -0400] jbz: a13x212: For testing?  You can point chef-client at an attributes file using an option, and you can set attributes there
[2013-09-05 20:15:02 -0400] jbz: a13x212: But I don't know if that prevents it from loading the node state from the server as well
[2013-09-05 20:16:56 -0400] jtimberman: fak3r: https://speakerdeck.com/jtimberman/anatomy-of-a-chef-run-and-authentication-cycle-1 :)
[2013-09-05 20:29:46 -0400] ptwobrussell: hi folks. i am racking my brain on something. i have a service that is managed by runit, and despite all of my attempts to modify the erb template that it uses, my changes to the template don't take effect. e.g. i am adding command line arguments to the template and they aren't taking effect when i restart the service. does chef solo cache these somewhere that i could delete them? i can't figure what else may be happening here.
[2013-09-05 20:32:51 -0400] ptwobrussell: i guess another way of asking the question would be how get changes to take effect to a template managed by runit. from what i am experiencing, they only take effect the first time that the service is started, so i know i'm just missing something basic here
[2013-09-05 20:34:41 -0400] cwj: ptwobrussell: gist your recipe?
[2013-09-05 20:35:47 -0400] ptwobrussell: cwj - https://github.com/ptwobrussell/Mining-the-Social-Web-2nd-Edition/blob/master/deploy/cookbooks/mtsw2e/recipes/default.rb is the recipe that is calling the ipython service via runit, and https://github.com/ptwobrussell/Mining-the-Social-Web-2nd-Edition/blob/master/deploy/cookbooks/mtsw2e/templates/default/sv-ipython-run.erb is the template that i am trying to change, but won't seem to take effect
[2013-09-05 20:36:02 -0400] ptwobrussell: cwj - thanks for being willing to take a look, btw
[2013-09-05 20:37:46 -0400] fak3r: jtimberman: that's helpful, thanks. So, I don't have a client.pem... anywhere, and it doesn't create one
[2013-09-05 20:38:13 -0400] fak3r: vagrant up gives a warning... INFO: Client key /etc/chef/client.pem is not present - registering - but shortly afterwards bombs out and says the node wasn't created
[2013-09-05 20:38:14 -0400] cwj: ptwobrussell: i think you need to add the cookbook parameter to your runit_service resource, with the name of your cookbook as its value
[2013-09-05 20:38:32 -0400] cwj: ptwobrussell: that way runit_service provider knows you want it to look in your cookbook for the template to use
[2013-09-05 20:40:35 -0400] cwj: i guess runit_service is supposed to be looking in the cookbook where the resource is being used anyway
[2013-09-05 20:41:18 -0400] cwj: or maybe im misunderstanding the problem
[2013-09-05 20:42:25 -0400] ptwobrussell: cwj - basically, whenever i make a change to that erb template, say i add an extra option like --foo=bar to the command it's invoking and then say 'service ipython restart', the change i made to the template doesn't take effect. it's as though a cached version of the template is being used or it's not using the template at all (though i had to have used it the first time to start the service)
[2013-09-05 20:42:58 -0400] cwj: and youre re-running chef after you modify the template in your cookbook?
[2013-09-05 20:43:35 -0400] ptwobrussell: cwj - no, i'm not re-running chef. maybe that's the problem. i was hoping to only rerun the service to get the changes to the template to take effect. must i re-run chef?
[2013-09-05 20:44:14 -0400] cwj: if you re-run chef it should evaluate that the template output has changed, write out the new service script and (i think) restart the service
[2013-09-05 20:45:24 -0400] ptwobrussell: cwj - ok, if that's the easiest path forward, then i'll give that a shot. i've never actually run chef before though, believe it or not. i've always used it as provisioning through vagrant. i'll have to figure out how to use the chef-solo that i see in my path to point to the right place to kick things off
[2013-09-05 20:45:24 -0400] cwj: looks like if you set restart_on_update to false, the service wont be restarted when the run script is updated
[2013-09-05 20:45:45 -0400] cwj: oh, in that case you can probably just run 'vagrant provision'
[2013-09-05 20:46:03 -0400] cwj: it will re-run your provisioner, i assume thats chef-solo
[2013-09-05 20:46:44 -0400] ptwobrussell: cwj - i wish i could, but i'm one level removed now. i burned an AMI that i have been working from which didn't use vagrant to start it up. might be just as easy to start over after all of this, but i was hoping to learn a few things along the way (and i guess i am)
[2013-09-05 20:47:14 -0400] cwj: oh ok
[2013-09-05 20:47:23 -0400] ptwobrussell: hmm. i do see a chef-shell. maybe i can use that
[2013-09-05 20:48:09 -0400] cwj: sounds like success may depend on locating the config files which were used with chef-solo when you provisioned the box initially
[2013-09-05 20:48:21 -0400] cwj: and then calling chef-solo with the right flags to use those configs
[2013-09-05 20:48:41 -0400] cwj: chef-shell can be used to run recipes but its a little complicated compared to just running chef-solo
[2013-09-05 20:48:55 -0400] cwj: and i think it would still need to know where your cookbook files are and what the run list is, etc
[2013-09-05 20:49:10 -0400] cwj: i think vagrant writes it out as dna.json
[2013-09-05 20:51:51 -0400] ptwobrussell: cwj - thanks. hopefully this will come together soon. another one of those tangents, but it's probably for the best to learn more about this
[2013-09-05 20:52:06 -0400] cwj: good luck! :)
[2013-09-05 20:56:33 -0400] EricL: If I want to call out to a file in a repo that is deployed the same way that before_restart.rb is called out to, how would I do that?
[2013-09-05 20:57:36 -0400] fak3r: so I copied client.pem from /etc/chef-server to /etc/chef on the server, but it still will only create the client, it will not create the node on the server
[2013-09-05 21:02:59 -0400] itarchmerc: i am attempting to create an ec2 instance using knife ec2 server create.  I've done this in the past without issue, but now I get the following error every time "ERROR: Fog::Compute::AWS::Error: SignatureDoesNotMatch".  I get the same error on knife ec2 server list.  I've looked online, but haven't found any solutions.  any ideas?
[2013-09-05 21:07:07 -0400] jmickle: has anyone seen knife ec2 fail when supplying both subnet and security group?
[2013-09-05 21:11:54 -0400] dgarstang: Anyone here used aws cli?
[2013-09-05 21:14:05 -0400] itarchmerc: @jmickle - If using VPC, you must use -g, not -G
[2013-09-05 21:15:39 -0400] jmickle: got it
[2013-09-05 21:15:52 -0400] Majost: Is there a trick to using the windows_zipfile provider? When I try to unzip a file, I get a LoadError of "cannot load such file -- zip/zip"
[2013-09-05 21:15:55 -0400] jmickle: ty itarchmerc
[2013-09-05 21:16:00 -0400] Majost: which in itself, doesn't make sense to me.
[2013-09-05 21:17:37 -0400] Majost: ah
[2013-09-05 21:17:38 -0400] Majost: nm
[2013-09-05 21:17:44 -0400] Majost: https://tickets.opscode.com/browse/COOK-3542
[2013-09-05 21:17:49 -0400] Majost: seems to be a known bug
[2013-09-05 21:21:28 -0400] dgarstang: Anyone here used aws cli?
[2013-09-05 21:26:17 -0400] timsmith: anyone know if there's a core contributor discount on the summit this year?
[2013-09-05 21:35:10 -0400] gazarsgo: dgarstang: the 1.0 release ?
[2013-09-05 21:41:09 -0400] mveitas: dgarstang: I am using parts of aws cli
[2013-09-05 21:50:44 -0400] Damon: Hello - I am trying to install chef and running into trouble.  Looking for some help:
[2013-09-05 21:51:17 -0400] Damon: I installed ruby, and rubygems (ruby setup.rb) all went well.
[2013-09-05 21:52:24 -0400] Damon: but when i run: gem install chef --version 0.10.4  I get an error of:  ERROR: Failed to build gem native extension  /  /usr/bin/ruby extconf.rb  / creating Makefile / sh: make: command not found
[2013-09-05 21:53:07 -0400] Damon: i've searched all over but cannot find a relative answer.  "Make" should be there.  Could it be a path issue?
[2013-09-05 21:53:43 -0400] kallistec: Damon: any particular reason you're installing this all the manual way?
[2013-09-05 21:54:14 -0400] Damon: no particular reason, it's the only way I know and have found thru research.
[2013-09-05 21:54:30 -0400] kallistec: Damon: what OS/distro you got? http://www.opscode.com/chef/install/
[2013-09-05 21:54:53 -0400] Damon: I don't have RVM or any other tools.  but this should be doable via yum + gem.  but no luck so far
[2013-09-05 21:55:08 -0400] Damon: RHEL 6.2
[2013-09-05 21:55:37 -0400] kallistec: Damon: you can just grab an RPM from that link that has everything included
[2013-09-05 21:55:47 -0400] Damon: I just can't seem to pinpoint an answer on google.
[2013-09-05 21:57:03 -0400] kallistec: Damon: e.g., https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.6.0-1.el6.x86_64.rpm gets you latest chef (11.6) for centos/rhel 6 on 64bit
[2013-09-05 21:57:22 -0400] timsmith: kallistec:  how come latest isn't the hotfix?
[2013-09-05 21:57:23 -0400] Damon: ok, i'll give the URL a try.  I am guessnig "gem install chef" was a bad choice. :-)
[2013-09-05 21:58:10 -0400] kallistec: Damon: it's okay if you work at a mostly-ruby shop and have a particular reason for wanting to install that way
[2013-09-05 21:59:10 -0400] kallistec: timsmith: mostly because we released that without the same testing guantlet that the main release went through
[2013-09-05 21:59:19 -0400] timsmith: k
[2013-09-05 21:59:30 -0400] timsmith: any chance that you could put it in the pull down menu on the download site in the future
[2013-09-05 21:59:34 -0400] Damon: Ah I see.  Sometimes u read so many articles that u look for just the cmd line answer and 'every thing should work just fine".  Ok, let me download the cheff installer and post back w/ results. THANKS MUCH Kallistec!
[2013-09-05 21:59:36 -0400] timsmith: I had to contact support to get a link to the debs
[2013-09-05 22:00:19 -0400] kallistec: timsmith: yeah, if you know the vagaries of omnitruck you can find it on your own
[2013-09-05 22:00:44 -0400] kallistec: timsmith: e.g., bookmark this: http://www.opscode.com/chef/full_client_list
[2013-09-05 22:00:59 -0400] azret: Anyone here use chef and vagrant together?
[2013-09-05 22:01:50 -0400] timsmith: handy.  Thanks
[2013-09-05 22:02:31 -0400] Damon: Just one question:  Can I install a specific version of chef (ie 0.10.4) via the opscode install script?
[2013-09-05 22:02:54 -0400] kallistec: timsmith: our UI dude has psds for a way better install page that lets you find prereleases and hotfixes and stuff but not sure when that's gonna drop
[2013-09-05 22:03:33 -0400] timsmith: that'll be nice
[2013-09-05 22:03:39 -0400] kallistec: Damon: if you click through the drop down boxes on http://opscode.com/chef/install (make sure you enable scripts if you're a noscript person)
[2013-09-05 22:03:51 -0400] kallistec: you can select any version you want
[2013-09-05 22:04:21 -0400] kallistec: Damon: if you do the curl | bash thing, you can give it a -v option, but the shell syntax is a little wonky
[2013-09-05 22:04:46 -0400] Urocyon: azret, I'm sure plenty do.
[2013-09-05 22:05:21 -0400] azret: I'm just having a problem getting Vagrant to use the client.pem i specified in Vagrantfile
[2013-09-05 22:05:25 -0400] azret: keeps failing
[2013-09-05 22:06:31 -0400] Urocyon: I think I only ever had a vagrant talk to a chef server once.
[2013-09-05 22:06:53 -0400] Urocyon: I primarily use it for testing of cookbooks via chef-solo.
[2013-09-05 22:08:15 -0400] jameson__: i love half-ass cookbooks that don't have metadata.rb in some @_@
[2013-09-05 22:08:17 -0400] azret: i want to use it for the testing
[2013-09-05 22:08:26 -0400] jameson__: er cookbook collections that is missing metadata.rb
[2013-09-05 22:08:32 -0400] jameson__: *Are
[2013-09-05 22:08:39 -0400] azret: but why not use the enterprise chef that i already have =)
[2013-09-05 22:09:28 -0400] kallistec: azret: you're getting 401s?
[2013-09-05 22:09:42 -0400] azret: [2013-09-05T21:48:26+00:00] FATAL: Chef::Exceptions::CannotWritePrivateKey: I cannot write your private key to ~/.chef/client.pem - check permissions?
[2013-09-05 22:09:58 -0400] azret: the box is supposed to be provisioned through vagrant which has root access
[2013-09-05 22:10:02 -0400] Urocyon: azret: not saying there's a reason you shouldn't.  I just don't.
[2013-09-05 22:10:38 -0400] kallistec: azret: yeah, sounds like a vagrant config problem that's beyond me
[2013-09-05 22:10:59 -0400] Urocyon: what's the vagrantfile setting you use to set the client.pem file?
[2013-09-05 22:11:44 -0400] Urocyon: Maybe you could gist you vagrantfile for us?
[2013-09-05 22:11:46 -0400] azret: i think i might have figured it out
[2013-09-05 22:11:48 -0400] azret: chef.client_key_path = "~/.chef/client.pem"
[2013-09-05 22:11:52 -0400] azret: thats telling it to look there
[2013-09-05 22:12:04 -0400] azret: not look inside the directory that I'm telling it to use
[2013-09-05 22:12:46 -0400] azret: nope
[2013-09-05 22:12:49 -0400] azret: ill post it sec
[2013-09-05 22:13:39 -0400] azret: http://pastebin.com/uQ96WQL0
[2013-09-05 22:13:59 -0400] bixu: I'm trying to get ohai to properly get a newly-set hostname during the first chef run.  Anyone deal with this or similar issues before?
[2013-09-05 22:14:07 -0400] bixu: The normal ohai reload method doesn't seem to be working.
[2013-09-05 22:15:35 -0400] kallistec: bixu: by "normal ohai reload method", you mean the ohai resource?
[2013-09-05 22:15:43 -0400] bixu: Yes.
[2013-09-05 22:16:06 -0400] Urocyon: azret, when I did it I used a validation.pem to register the machine to my chef-server.  I didn't try to pass in a pre-existing client.pem.
[2013-09-05 22:16:26 -0400] kallistec: bixu: is this a compile phase vs. converge phase problem?
[2013-09-05 22:16:28 -0400] lococo: Has anyone ever encountered a condition where knife cookbook upload ignores some directories (aka the files directory containing minitests)? If I run knife cookbook upload foo --verbose --verbose I see the complete list of files get uploaded... but it inexplicably skips the files dir and it's contents.
[2013-09-05 22:16:56 -0400] bixu: kallistec: I think so.  Maybe what I want isn't possible?
[2013-09-05 22:17:07 -0400] azret: im worried that without the client.pem it won't do what i want it to
[2013-09-05 22:17:10 -0400] azret: it doesn't run the runlist
[2013-09-05 22:17:26 -0400] kallistec: bixu: I don't know exactly what you're trying to do, maybe?
[2013-09-05 22:17:58 -0400] bixu: kallistec: I have a few subdomains that I register a-records in.  demo. stage. and prod.
[2013-09-05 22:19:01 -0400] bixu: And I have one dynect zone per subdomain.
[2013-09-05 22:19:39 -0400] bixu: My node names are name.[subdomain]
[2013-09-05 22:19:46 -0400] Urocyon: azret: yeah it needs a client.pem.  Usually you use a validation.pem to have the chef-client register a system with a server and get it's own client.pem.
[2013-09-05 22:20:12 -0400] lococo: Also more generally interested in any experiences troubleshooting '0 tests, 0 assertions, 0 failures, 0 errors, 0 skips' with minitest handler since it seems to give very little feedback when it doesn't find any tests. But in this case, I'm looking in the private-chef dashboard to "show" the cookbook and confirming that the tests aren't even on the chef-server since the files dir is missing.
[2013-09-05 22:20:17 -0400] bixu: So I want to just append my domain name to the node name and register in the appropriate zone with dynect and the community dynect cookbook.
[2013-09-05 22:20:54 -0400] bixu: This works fine post-converge, but not pre-converge, because I don't have a hostname or node name attribute that matches the dynect zone name yet.
[2013-09-05 22:23:56 -0400] Urocyon: azret: I'm looking at the chef provisioner to see how that setting is used.  https://github.com/mitchellh/vagrant/blob/master/plugins/provisioners/chef/provisioner/chef_client.rb
[2013-09-05 22:24:15 -0400] force: I'm getting a notification that a constant in my attribute file is already defined. But...nuh uh. Not in this cookbook. Do all constants defined in attribute files exist in the same scope? So if I have a constant called USERNAME in cookbooks/foo/attributes/default.rb and cookbooks/bar/attributes/default.rb with 2 different definitions, does this bite me?
[2013-09-05 22:24:59 -0400] bixu: kallistec: Does that make sense?
[2013-09-05 22:24:59 -0400] Urocyon: azret: it looks like it is only used to define what folder to create to hold the client key.   I guess if you want it stored someplace other than the default?
[2013-09-05 22:25:16 -0400] azret: i think thats the problem
[2013-09-05 22:26:18 -0400] Urocyon: azret there is not upload of an existing client key, just the validation key.
[2013-09-05 22:26:20 -0400] Majost: Anyone know of a commonly used way to wait for a file to appear before proceeding?
[2013-09-05 22:26:26 -0400] azret: i figured it out
[2013-09-05 22:26:29 -0400] azret: its doing what i want now
[2013-09-05 22:26:37 -0400] azret: the path was wrong
[2013-09-05 22:26:40 -0400] lococo: force: You can definitely set attributes for across cookbook boundaries (this is what role-cookbooks do routinely). If the node var is in a shared namespace, I'd think constants would be as well.
[2013-09-05 22:28:19 -0400] Urocyon: azret: cool
[2013-09-05 22:31:18 -0400] force: lococo I see your reasoning, but there's no Ruby reason to believe that the namespace for all attribute file constants would be the same. It can be the case, but there's no reason that it has to be. It's not the way I would design it. You're essentially making variables defined in ALL attribute files from ALL cookbooks global variables. Nobody wants that. But if you want to share between cookbooks, you can actually set an attribute. That makes sense. But yeah,
[2013-09-05 22:31:19 -0400] force:  the behavior I seem to be observing is that there are name collisions for constants that I define in attributes/*.rb
[2013-09-05 22:32:57 -0400] lococo: force: Fair enough. I'm speculating a bit.
[2013-09-05 22:33:13 -0400] force: lococo: I still appreciate it. :D
[2013-09-05 22:33:48 -0400] bixu: kallistec: The specific error I'm seeing is "RROR MISSING_DATA API-A - customer_name: required field missing"
[2013-09-05 22:34:05 -0400] bixu: I'm setting customer_name and password as override attributes in my environment.
[2013-09-05 22:34:19 -0400] force: I guess I could...open a bug...on Opscode's Jira...*shudder*. Thank god they don't use GitHub for that! Am I right? Up top!
[2013-09-05 22:35:44 -0400] kallistec: bixu: so you're using the opscode dynect cookbook? I think we're on a really old version of that here, so I'm not familiar with any current version
[2013-09-05 22:35:50 -0400] kallistec: what recipe are you using
[2013-09-05 22:36:37 -0400] bixu: kallistec: Just a_record.
[2013-09-05 22:37:33 -0400] bixu: I think the problem is that the two attributes I reference aren't visible to chef-client during compile?
[2013-09-05 22:38:11 -0400] kallistec: bixu: if they're correctly set by the environment, they should be available
[2013-09-05 22:40:19 -0400] MrBIOS: what do I need to do to address/fix these messages: "WARN: Chef::Exceptions::ShellCommandFailed is deprecated, use Mixlib::ShellOut::ShellCommandFailed"
[2013-09-05 22:41:09 -0400] bixu: kallistec: They look like this: https://gist.github.com/anonymous/52fcae6dad9a3a759626
[2013-09-05 22:41:11 -0400] kallistec: bixu: I don't know what to suggest beyond putting a debug recipe in your run_list before dynect::a_record and printing the values of the attributes
[2013-09-05 22:41:26 -0400] bixu: kallistec: Thanks.
[2013-09-05 22:42:03 -0400] kallistec: MrBIOS: just s/Chef::Exceptions::ShellCommandFailed/Mixlib::ShellOut::ShellCommandFailed/g in your recipes
[2013-09-05 22:42:18 -0400] MrBIOS: okay, easy enough
[2013-09-05 22:44:53 -0400] kallistec: bixu: if you happen to be on chef 11+, you can do something like `pp node.debug_value(:dynect, :customer)`
[2013-09-05 22:45:44 -0400] bixu: kallistec: Cool.  I'll give that a shot (we are on 11.6)
[2013-09-05 22:46:20 -0400] lococo: Ok... knife cookbook upload isn't skipping the entire files directory, only files/default/test/*
[2013-09-05 22:51:51 -0400] jtimberman: kallistec: we're on a really current version of it now :)
[2013-09-05 22:52:00 -0400] jtimberman: kallistec: like, cookbook "dynect", "~> 1.0.4"
[2013-09-05 22:52:25 -0400] jtimberman: with a site-specific cookbook liend up w/ it and everything.
[2013-09-05 22:52:59 -0400] kallistec: jtimberman: yeah, but you guys are too on-point with the ops so I don't touch it any more
[2013-09-05 22:55:18 -0400] c_t: hmm
[2013-09-05 22:55:25 -0400] c_t: Kerbal Space Program cookbook
[2013-09-05 22:55:30 -0400] c_t: Best Idea, or Worst Idea?
[2013-09-05 22:57:14 -0400] pwelch: c_t: best
[2013-09-05 22:58:40 -0400] pwelch: c_t: there should probably be a steam client cookbook. I think steam might be an essential resource for workstations.
[2013-09-05 23:00:33 -0400] jtimberman: pwelch: hurm, i had one at somep oint
[2013-09-05 23:01:03 -0400] jtimberman: worked on windows and os x
[2013-09-05 23:01:11 -0400] pwelch: jtimberman: nice. on the community site?
[2013-09-05 23:01:32 -0400] pwelch: I imagine the issue may be keeping up to date with the new packages unless there is a base one you can install
[2013-09-05 23:03:32 -0400] jtimberman: dunno. i might be imagining things too
[2013-09-05 23:21:31 -0400] Majost: jtimberman: dreaming about cookbooks while you sleep again?
[2013-09-05 23:21:34 -0400] Majost: heh
[2013-09-05 23:59:46 -0400] tasslehawf: do I have to do something explicit to access the jenkins_cli provide?
[2013-09-05 23:59:49 -0400] tasslehawf: provider

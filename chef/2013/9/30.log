[2013-09-30 01:17:52 -0400] acidst0rm: anyone available for a bit of contract work re: chef/rightscale?
[2013-09-30 01:57:47 -0400] tdk2fe: is there any documentation around installing chef server on a box that already has postgres and nginx running?
[2013-09-30 07:51:51 -0400] msartor: morning guys
[2013-09-30 07:52:07 -0400] msartor: anyone ready for answering a chef newbe question?
[2013-09-30 07:52:32 -0400] bigbigbang: yes
[2013-09-30 07:52:40 -0400] bigbigbang: go ahead
[2013-09-30 07:53:01 -0400] msartor: The problem I am having is that template's are creating during compilation
[2013-09-30 07:53:21 -0400] msartor: I want to be able to create a template after I have set a certain variable
[2013-09-30 07:53:33 -0400] msartor: so I can expand that variable in my template
[2013-09-30 07:53:37 -0400] msartor: the variable is dynamic
[2013-09-30 07:53:53 -0400] bigbigbang: will this varrialbe changes ?
[2013-09-30 07:54:08 -0400] msartor: Yes I will read that variable from a file in a ruby_block
[2013-09-30 07:54:09 -0400] bigbigbang: or only hardcoded in recipe
[2013-09-30 07:55:33 -0400] bigbigbang: so you can retrive these variable, and put it in attribute ? and then get these attribute in the template
[2013-09-30 07:57:14 -0400] msartor: I am able to retrieve the variable fine, I log that to the chef log and I can see that variable is there
[2013-09-30 07:58:12 -0400] msartor: only the problem seems that the template is created before the variable is populated
[2013-09-30 07:58:47 -0400] bigbigbang: yes ok so try to put it in attribute now, and then you specify a variable for the template that gat these attribute , like this I think, it will execute your ruby block, and put the varaible in the attribute and then it will create the template with.
[2013-09-30 08:00:12 -0400] msartor: Have tried that, but still the variable is not parsed correctly. Also tried it with a notification from within the ruby_block, still no luck
[2013-09-30 08:00:25 -0400] msartor: have standups now. back in 10 mins.
[2013-09-30 08:00:32 -0400] bigbigbang: k
[2013-09-30 08:16:30 -0400] msartor: so maybe my problem isn't clear enough:
[2013-09-30 08:16:48 -0400] msartor: I have a recipe which sets a variable in a file at setup time
[2013-09-30 08:17:33 -0400] msartor: at deploy time I use a ruby_block which reads out that variable from that file and then I want to create a template which needs to parse that variable
[2013-09-30 08:18:01 -0400] msartor: from the ruby_block I can read the variable, and the value is correct.
[2013-09-30 08:18:36 -0400] chgravier: did you try bigbigbang suggestion (i.e. make the variable an atttribute and use it in the tempalte ?)
[2013-09-30 08:19:10 -0400] msartor: Only the template doesn't seem to parse the variable to the new value.
[2013-09-30 08:20:09 -0400] msartor: But isn't the parsing of the template done at compile time?
[2013-09-30 08:20:39 -0400] msartor: and my variable is set at run time (ruby_block), so that still results in my template being incorrect, right?
[2013-09-30 08:20:51 -0400] msartor: or am I missing something here?
[2013-09-30 08:25:21 -0400] chgravier: Could variables paragraph at http://docs.opscode.com/essentials_cookbook_templates.html help ?
[2013-09-30 08:26:47 -0400] msartor: currently trying bigbigbangs suggestion, I cannot really remember if I tried that. So trying that now
[2013-09-30 08:27:46 -0400] lxndrp: Hey everyone.
[2013-09-30 08:27:56 -0400] lxndrp: A quick question:
[2013-09-30 08:28:10 -0400] lxndrp: Is it possible to have multiple versions of the same cookbook on the same node?
[2013-09-30 08:29:32 -0400] chgravier: lxndrp: yes
[2013-09-30 08:29:53 -0400] lxndrp: Ok, then i couldn't find how to get this to work.
[2013-09-30 08:30:28 -0400] lxndrp: In fact, we have differing dependencies from our cookbooks to a tomcat cookbook, but chef-client seems to select the first one always.
[2013-09-30 08:31:15 -0400] lxndrp: That is, only the first dep is downloaded from the chef-server (say, v.0.5.3), but subsequent (other) deps from other cookbooks do not, even if they are different.
[2013-09-30 08:31:54 -0400] connor_goodwolf: g'day all
[2013-09-30 08:32:05 -0400] lxndrp: So if I have two cookbooks, say foo and bar, and foo depends on baz-0.5 while bar depends on baz-1.0, things break horribly.
[2013-09-30 08:32:47 -0400] chgravier: i think this is normal behaviour, but i am not an expert
[2013-09-30 08:33:31 -0400] chgravier: this is why you can find lots of pull requests on github for various cookbooks about changing cookbook version from pessimistic to >= 0;-)
[2013-09-30 08:33:51 -0400] lxndrp: chef-client runs through with, say, foo as the first cookbook processed, downloads baz-0.5 (because it is a dep). Then chef-client processes bar, which needs baz-1.0, but baz-1.0 does not get downloaded (because there already is a copy of baz in the cookbook path).
[2013-09-30 08:33:53 -0400] chgravier: how precisely do you set baz dependency in each cookbook ?
[2013-09-30 08:34:05 -0400] lxndrp: =0.5 and =1.0
[2013-09-30 08:34:58 -0400] lxndrp: needless to say that bar will not work, because the version of bas in the cookbook path on the node does not fit the requirements (since its interface is different).
[2013-09-30 08:36:21 -0400] connor_goodwolf: lxndrp: while I've not looked at the internals, does the order of the runlist for the cookbooks matter?
[2013-09-30 08:36:37 -0400] connor_goodwolf: nevermind, if it's not unloading baz, it doesn't matter
[2013-09-30 08:36:41 -0400] chgravier: yes. sorry i don't know. i'm not proficient enough on this :( i just find this behavior weird (using 0.5 instead of trying to fetch 0.1 given dep. specification on =0.1
[2013-09-30 08:37:41 -0400] bigbigbang: Have someone already use the Ceph cookbook ? a co worker of me said that we need to restart the whole cluster when deplying with Chef ... I can't find such information.. any advices ?
[2013-09-30 08:41:00 -0400] msartor: bigbigbang:  Tried your suggestion, but the attributes aren't parsed from the template creation
[2013-09-30 08:43:05 -0400] bigbigbang: msartor: Yes, but i wans't sure i already did it .. the thing I do is in a databag .. but can you with your ruby-block put your varaible in a databag ?
[2013-09-30 08:44:02 -0400] bigbigbang: and then when you create your tempalte  : variables({      :hadoop_home => recette["hadoop.home"],  where recette = data_bag_item('hadoop','recette')   .. for example ..
[2013-09-30 08:44:32 -0400] bigbigbang: sorry if I did'nt help you
[2013-09-30 08:49:18 -0400] msartor: I was thinking of another solution:  Trying to create the template from within the ruby_block
[2013-09-30 08:51:29 -0400] Garo_: I need to add a "session required pam_limits.so" to a bunch of pam rules under /etc/pam.d. Any suggestions what would be the best way to do this in chef?
[2013-09-30 08:59:07 -0400] bigbigbang: msartor: if you could, it would be the best solution for you I think .. but like this we can't really help you , we don't know what you are doing in your ruby_block ..
[2013-09-30 09:03:27 -0400] \du: heelo, how was the line to don't stop the recipe if there is and error in this resources ?
[2013-09-30 09:42:02 -0400] Breaking_Pitt: Hi guys I'm not able to execute an apt-get update
[2013-09-30 09:49:00 -0400] msartor: bigbigbang: got it to work with my idea by creating a template from within the ruby_block
[2013-09-30 09:55:51 -0400] Breaking_Pitt: I'm unable to update the sources in a ubuntu machine
[2013-09-30 09:55:54 -0400] Breaking_Pitt: some advice please
[2013-09-30 09:55:58 -0400] Breaking_Pitt: this is the code that i have
[2013-09-30 09:56:06 -0400] Breaking_Pitt: execute "apt-get update" do
[2013-09-30 09:56:06 -0400] Breaking_Pitt:   command "apt-get update"
[2013-09-30 09:56:06 -0400] Breaking_Pitt:   ignore_failure true
[2013-09-30 09:56:06 -0400] Breaking_Pitt:   action :nothing
[2013-09-30 09:56:06 -0400] Breaking_Pitt: end
[2013-09-30 09:58:18 -0400] chgravier: Breaking_Pitt: check what :nothing does: http://docs.opscode.com/resource_execute.html
[2013-09-30 09:59:00 -0400] Breaking_Pitt: sp I have to put :run
[2013-09-30 09:59:48 -0400] Breaking_Pitt: chgravier I'm not sure about this line Indicates that the command should not be run. This action is used to specify that a command is run only when another resource notifies it.
[2013-09-30 10:02:09 -0400] Breaking_Pitt: chgravier I can't see the update running on the screen
[2013-09-30 10:02:32 -0400] Breaking_Pitt: it should show the output of the apt-get update command
[2013-09-30 11:46:13 -0400] bigbigbang: #ceph
[2013-09-30 13:01:04 -0400] broconne: Two questions around libraries..  (1) is there a way to get access to the node object without requiring it be passed in?   (2) This is more of a general ruby question, can you create an instance of class from a method inside that class?  I am getting an error message when I try, but not entirely sure why that is.
[2013-09-30 13:07:10 -0400] gchristensen: broconne: can you show me the code from #2?
[2013-09-30 13:13:10 -0400] cpuguy83: broconne: Should be no reason that you couldn't do 'self.class.new' from an instance
[2013-09-30 13:18:05 -0400] Frizlab: Hello
[2013-09-30 13:18:18 -0400] Frizlab: I have a question about chef-server
[2013-09-30 13:18:27 -0400] Frizlab: can it be installed officially on Debian?
[2013-09-30 13:18:30 -0400] Frizlab: If so, how?
[2013-09-30 13:18:33 -0400] Frizlab: thanks
[2013-09-30 13:19:09 -0400] laurent\: what do you mean by officially ?
[2013-09-30 13:19:25 -0400] laurent\: there's a omnibus debian package that you can use
[2013-09-30 13:19:47 -0400] laurent\: hmm iirc there's an ubuntu debian package you can use
[2013-09-30 13:20:44 -0400] Frizlab: I've searched the opscode website and only found the Ubuntu and Enterprise Linux packages for chef-server
[2013-09-30 13:20:47 -0400] Frizlab: thus my question ;)
[2013-09-30 13:23:00 -0400] broconne: gchristensen:  http://pastebin.com/pGHaL8Hf
[2013-09-30 13:23:12 -0400] broconne: sorry for the delay, synergy went out to lunch on me and had to try and recover it to get access back to this pc
[2013-09-30 13:23:45 -0400] gchristensen: no worries
[2013-09-30 13:24:20 -0400] gchristensen: broconne: what error do you get?
[2013-09-30 13:24:56 -0400] broconne: uninitialized constant Chef::Recipe::EIPerms::EIPerms
[2013-09-30 13:26:18 -0400] Frizlab: Where can I find the omnibus package?
[2013-09-30 13:27:40 -0400] gchristensen: broconne: ah, yes - insead of EIPerms.new, do self.new
[2013-09-30 13:28:30 -0400] broconne: gchristensen:  Thanks.. will try that.
[2013-09-30 13:28:40 -0400] broconne: new to ruby (obviously)
[2013-09-30 13:29:02 -0400] broconne: thanks
[2013-09-30 13:29:04 -0400] broconne: that fixed that.
[2013-09-30 13:29:36 -0400] gchristensen: broconne: I'd highly recommend doing the ruby koans ( http://rubykoans.com/ ) - I came to Ruby from a different language, and I didn't have to read any docs to be able to  finish the koans...
[2013-09-30 13:29:38 -0400] gchristensen: dammit!
[2013-09-30 13:31:07 -0400] bigbigbang: Hey guys , if I create a databag using knife, not a file, how can I then retrive this databag in file format to store it on control version (like gitlab)
[2013-09-30 13:31:30 -0400] bigbigbang: can't find the command to download it ..
[2013-09-30 13:32:02 -0400] gchristensen: bigbigbang: knife data bag show... example: knife data bag show nagios_services disk -f json
[2013-09-30 13:33:10 -0400] bigbigbang: gchristensen:  thks , I know i already do this in the past .. but now writing the doc and could'nt find the way to do it thx
[2013-09-30 13:33:49 -0400] yfeldblum: gchristensen, -F not -f
[2013-09-30 13:34:05 -0400] gchristensen: yfeldblum: WFM
[2013-09-30 13:34:16 -0400] gchristensen: but I see -F is the documented switch
[2013-09-30 13:34:29 -0400] yfeldblum: gchristensen, ah cool
[2013-09-30 13:51:30 -0400] isbaran: i'm in a weird situation, any feedback appreciated. i have a cookbook X that extends apache2, and a cookbook Y that extends X ( meaning they include each other ) i can't reach apache.cgibin_dir from cookbook Y's attribute file, but can reach attributes without an underscore
[2013-09-30 13:53:10 -0400] isbaran: if i enter default['apache']['cgibin_dir'] = ".." in X's attribute file, i can reach it from Y's attirbute file, but not the default value which is in apache's attribute file
[2013-09-30 13:54:10 -0400] adnichols: isbaran does Y behave differently if you reference the attribute inside the recipe instead of using the attributes file?
[2013-09-30 13:54:33 -0400] adnichols: eg. node.default['apache']['cgibin_dir'] = ""
[2013-09-30 13:55:17 -0400] adnichols: I'm not really sure why what you are describing would happen - nor why it would be specific to attributes w/ an underscore
[2013-09-30 13:55:51 -0400] isbaran: adnichols: i was trying not to hardcode apache docroot, and came up with this thing
[2013-09-30 13:56:06 -0400] isbaran: its same within recipe
[2013-09-30 13:56:15 -0400] adnichols: interesting
[2013-09-30 13:56:29 -0400] adnichols: yeah, I understand it's not ideal - just trying to understand the parameters
[2013-09-30 13:56:30 -0400] isbaran: i logged the values and i can reach bindir for example, but not the ones with an _
[2013-09-30 13:58:00 -0400] adnichols: and when you say you can "reach" it - does that mean the value in the original apache cookbook is inherited by X / Y ?
[2013-09-30 14:01:12 -0400] isbaran: yes i can use the default values from apache cookbook in Y's attributes and recipes ( like mybin = #{node.default['apache']['bindir']}.sh for example)
[2013-09-30 14:02:12 -0400] isbaran: but when i write mydocroot = #{node.default['apache']['docroot_dir']}/subdir i get /subdir only
[2013-09-30 14:04:39 -0400] adnichols: I'm not sure if this impacts this - but do you have apache listed as a depends in metadata.rb for X & Y?
[2013-09-30 14:04:55 -0400] isbaran: yes i checked them to be sure
[2013-09-30 14:05:14 -0400] isbaran: i'll just try another cookbook with custom _'ed attribute
[2013-09-30 14:05:32 -0400] adnichols: yeah, I guess I could see this being something uncommon that is actually broken - haven't tried it
[2013-09-30 14:07:20 -0400] adnichols: isbaran one thing I notice tho - in your above example you are using node.default in an output string - you should just use node
[2013-09-30 14:08:32 -0400] isbaran: thats sth. i also changed to see if its related, i was using node originalyl
[2013-09-30 14:08:39 -0400] adnichols: ah ok
[2013-09-30 14:09:25 -0400] techminer: Is there a resource from copying one remote directory to another on the same node?  The "remote_directory" resource seems to only copy files from the cookbook files to a directory on the node.
[2013-09-30 14:15:40 -0400] techminer: Maybe just an execute resource with "rsync -a src dest" ???
[2013-09-30 14:16:11 -0400] broconne: I did a fair amount of searching.. but couldn't find an answer to this..  Is there a way to access the node object from a library in chef?
[2013-09-30 14:18:23 -0400] isbaran: broconne: you can use them afaik, check application/libraries/default.rb
[2013-09-30 14:18:55 -0400] broconne: isbaran.. not to be dense.. but check that where?  the chef source?
[2013-09-30 14:19:11 -0400] isbaran: sorry, cookbook called application
[2013-09-30 14:19:24 -0400] broconne: If i don't pass it in, currently, it says it doesn't know what "node" is.
[2013-09-30 14:19:33 -0400] broconne: I saw there is something that might need to happen about mixing it into the chef namespace.
[2013-09-30 14:19:37 -0400] broconne: but never saw details on that
[2013-09-30 14:19:42 -0400] isbaran: https://github.com/opscode-cookbooks/application/blob/master/libraries/default.rb
[2013-09-30 14:20:32 -0400] broconne: maybe the require line at the top is what i need...
[2013-09-30 14:22:08 -0400] broconne: nope.. that didn't help.
[2013-09-30 14:22:32 -0400] broconne: undefined local variable or method `node' for Chef::Recipe::EIPerms:Class
[2013-09-30 14:26:51 -0400] isbaran: broconne: that cookbook does searches and auto inserts ipaddress of nodes in config files, i'm new to ruby and can't debug now but i'm sure answer is within it :D
[2013-09-30 14:27:16 -0400] broconne: yeah, I took a look at it.. I can see it access the node object...  just can't figure out why its foo is different than my foo
[2013-09-30 14:32:05 -0400] gchristensen: I hate Dell DRAC... requires me to have a windows machine to use the virtual CDRom
[2013-09-30 14:36:34 -0400] fak3r: keep having the issue of chef-client failing to run "STDERR: yum-dump Locking Error! Couldn't obtain an exclusive yum lock in 10 seconds. Giving up." solution is to `rm /var/run/yum.pid` - but I don't know why it keeps happening
[2013-09-30 14:37:33 -0400] isbaran: fak3r: it happens each time ? ( after removing /var/run/yum.pid )
[2013-09-30 14:38:48 -0400] fak3r: isbaran: if I run chef-client again, it all works fine
[2013-09-30 14:39:41 -0400] isbaran: fak3r: if its an older version of chef-client, it may be an issue of multiple clients running on that node ?
[2013-09-30 14:39:59 -0400] isbaran: maybe you configured as a daemon and running it manually at the same time
[2013-09-30 14:40:02 -0400] workmad3: gah
[2013-09-30 14:40:29 -0400] workmad3: is there anything special I need to do to get a hwrp defined in the libraries/ folder to be usable in a recipe?
[2013-09-30 14:42:00 -0400] fak3r: isbaran: it is, I installed chef-client with runit, maybe not a good idea in the first place?
[2013-09-30 14:44:09 -0400] isbaran: fak3r: i had some issues with daemon and switched to cronjob
[2013-09-30 14:45:49 -0400] fak3r: isbaran: so that might be all it is, cool, will take a look, thanks
[2013-09-30 14:53:26 -0400] jag: hello everyone: when i use java_webapp resource of "application_java" cookbook in a recipe, then  on chef-client run i get resource not found, any pointers pls !
[2013-09-30 14:55:57 -0400] wamilton: jag: is the application_java cookbook listed as a dependency in your metadata.rb?
[2013-09-30 14:56:41 -0400] workmad3: jag: also, if you're trying to use it outside an 'application' resource block, you need to use the full name 'application_java_webapp', I believe
[2013-09-30 14:57:25 -0400] wamilton: oh yeah... 'sub-resources'
[2013-09-30 14:59:47 -0400] jag: wamilton, the recipe is created inside the application_java cookbook , is that wrong ! pls bear with me , iam new to chef.
[2013-09-30 15:00:13 -0400] jag: and java_webapp is inside application resource block..
[2013-09-30 15:00:40 -0400] tyty: I identified an issue with OpsCode's official Chef Jenkins recipe. I'm using a nginx proxying setup that differs from what the recipe proposes, necessitating Jenkins being told what it's $PREFIX in a different manner. I haven't signed the contributers agreement. What does the community prefer, I submit a merge request to the recipe's GH repo, or create an issue in the JIRA "Chef Cookbooks" project, or ???
[2013-09-30 15:01:05 -0400] gchristensen: if two recipes include a cookbook, which one wins? the first one, or the last one? if I also specify the recipe in the runlist at the end,how does that affect it?
[2013-09-30 15:01:19 -0400] bigbigbang: Is there a way to specify a role for a node in client.rb ?
[2013-09-30 15:02:02 -0400] wamilton: jag: application and application_* cookbooks are meant to just make tools available so you can write a cookbook that describes your particular application
[2013-09-30 15:03:12 -0400] wamilton: jag: also, I believe that if you don't include the default recipe, then the libraries (i.e. resources and providers) won't get loaded
[2013-09-30 15:03:58 -0400] wamilton: jag: so, with the recipe you've got right now, you could just try adding: include_recipe "application_java::default" at the top and see if that does it
[2013-09-30 15:04:26 -0400] wamilton: jag: and then use knife or berkshelf to create a new cookbook and move your recipe over there and depend on application_java
[2013-09-30 15:04:40 -0400] techminer: bigbigbang: roles are declared for nodes on the chef-server.unless you are using chef solo.then I'm not sure what you need to do
[2013-09-30 15:04:51 -0400] jag: wamilton- thanks so much.. i will try out those options..
[2013-09-30 15:05:44 -0400] wamilton: techminer, bigbigbang: there's a ruby config file for solo that describes things like paths to cookbooks, data bags, and roles, just specify with -c
[2013-09-30 15:06:02 -0400] gchristensen: broconne: I'd highly recommend doing the ruby koans ( http://rubykoans.com/ ) - I came to Ruby from a different language, and I didn't have to read any docs to be able to  finish the koans, and it helped immensely.
[2013-09-30 15:06:12 -0400] wamilton: of course, you also need to add the role to the run list
[2013-09-30 15:06:24 -0400] yfeldblum: gchristensen, if recipe X::A and recipe Y::A both call `include_recipe "Z::A"`, then Z::A will be included only once total and it will included at the site of the first caller
[2013-09-30 15:06:33 -0400] gchristensen: excellent. thank you
[2013-09-30 15:08:56 -0400] bigbigbang: techminer: let's say I install a fresh node, and i have basic recipe that I want to automatically apply when in a role .. ie : Linux .. how can I specify the role automaticaly ? I could do it with knife search "sort of name" and put in in role but it will not be "automatically" .. I though there where option to provide the role when launching chef-client ...
[2013-09-30 15:09:59 -0400] techminer: bigbigbang:  Are you using bootstrap?  Bootstrap accepts roles and recipes as one of it's parameters
[2013-09-30 15:10:33 -0400] bigbigbang: techminer: Ah ... no i d'ont use it ...  but if this is the way ...
[2013-09-30 15:10:54 -0400] techminer: So when you bootstrap a new node with knife, you can tell it via that param what default roles and recipes to apply from the chef-server.
[2013-09-30 15:10:57 -0400] wamilton: tyty: I believe that if you submit a pr and haven't done the cla then your work can't be merged until you do so, which would actually block any other work on it until you do sign... so ideally you would sign, get a jira account, make a pr, and reference it in an issue on jira
[2013-09-30 15:11:33 -0400] broconne: gchristensen - thanks.. loading it now.
[2013-09-30 15:13:02 -0400] techminer: bigbigbang:  The parameter is actually "-r or run-list". see here http://docs.opscode.com/knife_bootstrap.html
[2013-09-30 15:13:11 -0400] techminer: Looks something like this...
[2013-09-30 15:13:29 -0400] tyty: wamilton: Thank you. I'll look into the Corporate Contributor License Agreement.
[2013-09-30 15:14:13 -0400] techminer: knife bootstrap IPADDR -N NODE_NAME -r 'recipe[my_recipe]'
[2013-09-30 15:14:46 -0400] techminer: or -r 'role[my_role]'.if you use roles....
[2013-09-30 15:16:27 -0400] bigbigbang: techminer: ok thanks, but I can't use bootstrap, .. the node i will maintain will be generated with chef-client already .. so i'm more looking for a solution providing the node data with a json file ...
[2013-09-30 15:16:41 -0400] bigbigbang: and inside this json file i can specify the environemtn
[2013-09-30 15:16:50 -0400] techminer: bigbigbang:  If you want to add to the run_list after a node is bootstrapped you can add from the Chef Server UI or use the "knife node run_list add" command.
[2013-09-30 15:19:59 -0400] wamilton: can anyone confirm or deny: default attributes get autoloaded by metadata requirements, ie are available before the recipe is included if it wasn't in the run list?
[2013-09-30 15:20:16 -0400] gchristensen: wamilton: surely
[2013-09-30 15:20:31 -0400] wamilton: gchristensen: which one? confirm or deny?
[2013-09-30 15:20:37 -0400] gchristensen: they are loaded
[2013-09-30 15:20:41 -0400] wamilton: gchristensen: thanks
[2013-09-30 15:20:50 -0400] dennis__: I have a lwrp wrapper calling Berry's Tomcat install recipe on centos 6.4 and Oracle 7 java. It works fine, unless there is another recipe downstream that calls java cookbook.  Then tomcat fails to start because java is not there (being reinstalled?) during startup. I'm using the latest 1.13.1 cookbook  and have tried other versions as well with same results. How do I fix or workaround this????
[2013-09-30 15:21:50 -0400] dennis__: 1.13.1 java cookbook, that is
[2013-09-30 15:24:00 -0400] jchauncey: another reason why i dislike specifying include_recipe for java
[2013-09-30 15:24:09 -0400] jchauncey: or for any other low level resource
[2013-09-30 15:27:21 -0400] dennis__: jchauncy: how should I do this then
[2013-09-30 15:29:34 -0400] dennis__: jchauncey: should this be baked in an ami? what should I do for resources like java?
[2013-09-30 15:30:07 -0400] jchauncey: i would include it as part of the base role or cookbook
[2013-09-30 15:30:32 -0400] jchauncey: if your application needs java then it should install it as part of the application cookbook (which i guess tomcat is) or as part of the role
[2013-09-30 15:31:26 -0400] jchauncey: you wnat it as close to the top as possible IMHO
[2013-09-30 16:12:27 -0400] techminer: Is it possible to restart a service based on a file change, if that file is not a chef managed template?
[2013-09-30 16:12:37 -0400] geekbri: Is there a way to access the knife configuration options from inside of knife_exec scripts?
[2013-09-30 16:12:56 -0400] techminer: based on file modification timestamp perhaps?
[2013-09-30 16:13:27 -0400] geekbri: Or maybe it's correct to say, how does one retrieve the knife configuration object from inside of a knife exec script?
[2013-09-30 16:17:04 -0400] geekbri: ok nevermind, looks like you can access Chef::Config[:knife]
[2013-09-30 16:30:08 -0400] fedgoat: anyone have any tips for auto registering nodes using Kickstart
[2013-09-30 16:31:57 -0400] maloik: After running knife edit node <node>, how do you upload/run that config again ?
[2013-09-30 17:35:28 -0400] mattw: Not a chef question specifically, but if there is a PR stalled on GitHub from someone that didn't read the Contributor information, what is the consensus on someone else (myself in this case) submitting a new PR for the same fix?
[2013-09-30 17:36:05 -0400] mattw: It seems like this is a pretty common issue on Opscode projects and I hate seeing fixes I'm waiting on just sitting there :)
[2013-09-30 17:36:22 -0400] gchristensen: mattw: if you happen to write highly similar code, and have submitted a CLA ... I don't see how that would be a problem ... *hem*
[2013-09-30 17:38:22 -0400] mattw: I'm certainly not trying to take someone's contributions as my own, but for instance something like https://github.com/opscode/bento/pull/74/files doesn't have a lot of options for differentiation.
[2013-09-30 17:39:41 -0400] gchristensen: mattw: resubmit as your own.
[2013-09-30 17:46:24 -0400] mattw: Ah, I was checking to see if that PR had been merged instead of checking the code and the fix was already committed elsewhere.
[2013-09-30 18:14:49 -0400] jeff_r: is there an easy way to translate Fauxhai to a Ridley NodeObject?
[2013-09-30 18:19:23 -0400] andyl: \quit
[2013-09-30 18:19:59 -0400] volker-: hi
[2013-09-30 18:20:42 -0400] volker-: if I need in a recipe just the attributes of another cookbook A, isn't it enough to just add the 'depends "A"' in the metadata.rb?
[2013-09-30 18:21:03 -0400] volker-: I would have assumed it but vagrants chef-solo does not seem to accept that
[2013-09-30 18:22:33 -0400] jtran: i have a cookbook 'foobar' that is a wrapper for logstash.  foobar has recipes 'agent' and 'server'.   agent does an node.override['logstash']['log_file'] = 'agent.log' and server does a node.override['logstash']['log_file'] = 'server.log' .    HOWEVER, on my test node, which runs both agent AND server recipes,    it appears that BOTH recipes will use 'agent.log' value despite the override.  If i change the recipe order, it does vice versa
[2013-09-30 18:22:34 -0400] jtran: Any idea why that's happening?
[2013-09-30 18:26:48 -0400] miah: that cookbook is full of fun issues
[2013-09-30 18:27:06 -0400] miah: its not really designed to have both recipes run on the same node
[2013-09-30 18:27:14 -0400] miah: which is pretty silly imho
[2013-09-30 18:29:16 -0400] jtran: miah:  ya agreed.  certainly fun but i dunno if the node.override behavior is expected i might run into this issue w/ others
[2013-09-30 18:29:38 -0400] jtran: in other words, i can't have two diff recipes (same cookbook) run on the same node, that override the same attr ?
[2013-09-30 18:29:59 -0400] miah: remember, node attributes get merged
[2013-09-30 18:30:20 -0400] jtran: miah:  ah i see.  they get merged 1 time on each chef-client run?
[2013-09-30 18:30:23 -0400] jtran: if that's so, it makes sense
[2013-09-30 18:30:24 -0400] miah: yes
[2013-09-30 18:30:32 -0400] miah: each chef run, they get merged
[2013-09-30 18:30:39 -0400] jtran: kk.  that makes it very clear.  thanks, miah
[2013-09-30 18:31:02 -0400] miah: http://docs.opscode.com/chef_overview_attributes.html
[2013-09-30 18:45:06 -0400] EricL: Is it not possible to search by tag with knife?
[2013-09-30 18:45:23 -0400] EricL: knife search 'tag:foo' doesnt' work when I know I have machines tagged with foo.
[2013-09-30 18:45:30 -0400] EricL: (tags plural doesn't work either)
[2013-09-30 18:48:53 -0400] adamjk-dev: EricL: i feel like I have done this for sure
[2013-09-30 18:50:40 -0400] jag2: iam using application_java to deploy  a sample war to tomcat. when i run chef-client i get " NameError: No resource found for tomcat. Tried application_tomcat, application_java_tomcat, tomcat"
[2013-09-30 18:52:42 -0400] EricL: adamjk-dev: I would think it's possible, but I keep coming back with nothing when I do the search.
[2013-09-30 18:52:56 -0400] EricL: Though when I do a node edit or a tag list, I see the tag there.
[2013-09-30 18:53:07 -0400] EricL: Googling isn't much help here.
[2013-09-30 18:55:04 -0400] wdilly: Does anyone here have a chef recipe that creates an EBS volume from a snapshot and auto-attaches it to an ec2 (ideally a eucalyptus) instance? Thanks.
[2013-09-30 18:55:18 -0400] adamjk-dev: EricL: knife search node tags:*
[2013-09-30 18:55:26 -0400] adamjk-dev: EricL: that just worked for me
[2013-09-30 18:55:42 -0400] adamjk-dev: are you sure your knife.rb points to the right chef server?
[2013-09-30 18:56:14 -0400] EricL: It must be a SOLR indexing thing.
[2013-09-30 18:56:20 -0400] EricL: It just worked but it took a while to start.
[2013-09-30 18:56:39 -0400] adamjk-dev: EricL: perhaps, I don't know how often they re-index
[2013-09-30 19:08:24 -0400] xtristan: not chef related, but relevant to shared interests: is there a bug with vagrant and the new metadata.json requirement?  i've put a metadata file in the basedir of .box with the contents { "provider" : "virtualbox" } and i'm getting complains/fatal errors when trying to add it as a vagrant box
[2013-09-30 19:12:27 -0400] kallistec: CHEF code review starting now. Join: https://t.co/D4ns8mw8Im Watch: http://t.co/uLD4Gz5LSU #opschef
[2013-09-30 19:18:54 -0400] manu: HI i need help with this chef recipe i am writing
[2013-09-30 19:19:29 -0400] Guest15176: I have written this chef recipe  below,   This is what i expect/require  * The bash resource shall fail is the shell script i am running below fails,  * the cookbook file should not say up to date if the bash script below fail  Please advise  cookbook_file "#{node[:mule][:deploy_dir]}/x-billing-1.1.0-SNAPSHOT.zip" do   source "x-billing-1.1.0-SNAPSHOT.zip"   mode 777   notifies :run, "bash[install_bill]", :immediately end  # Run a b
[2013-09-30 19:27:01 -0400] elathrop: anyone know how to bootstap a node so that the new client is an admin?
[2013-09-30 19:29:43 -0400] elifrey: elathrop: how do you mean? So the person who runs chef-client is root?
[2013-09-30 19:30:19 -0400] elifrey: I often think of anyone whith sudo rights as an admin :P
[2013-09-30 19:31:08 -0400] elathrop: so the client.pem key has admin rights on the chef-server
[2013-09-30 19:31:24 -0400] elathrop: so i can do "knife client list -c client.pem" on the new node
[2013-09-30 19:32:35 -0400] ccope: @elathrop: do you want the node to create/delete/modify other nodes?
[2013-09-30 19:32:54 -0400] elathrop: yup, it's a continuous-integration server
[2013-09-30 19:33:45 -0400] ccope: then i think you could just do a knife client edit/use the webui to modify the client data and make it an admin
[2013-09-30 19:34:15 -0400] elathrop: i want to do it programmatically
[2013-09-30 19:42:45 -0400] broconne: ruby style question...   is it bad to do an if/unless if they are one liners  or should I do an if/else..  instead?
[2013-09-30 19:43:03 -0400] josephholsten: timsmith, jtimberman: any objections to check_command configurable (instead of hardcoding to check-host-alive) here: https://github.com/opscode-cookbooks/nagios/blob/master/templates/default/templates.cfg.erb#L50?
[2013-09-30 19:43:05 -0400] broconne: this is over the same var.
[2013-09-30 19:43:42 -0400] josephholsten: I need a non-icmp check for rackspace. If I should use another approach, I'm all ears.
[2013-09-30 19:47:14 -0400] alunduil: Can multiple providers be attempted from a single resource definition?
[2013-09-30 19:47:39 -0400] queso: Say I have a cookbook for setting up a firewall and two other app cookbooks for app-a and app-b.  App-a's cookbook depends on firewall@1.0.0 and app-b depends on firewall@1.1.0.  Now I can't add both app-a and app-b to the runlist for a single node. What's the right way to fix this?
[2013-09-30 19:48:53 -0400] timsmith: josephholsten:  that should probably be an attribute
[2013-09-30 19:49:07 -0400] timsmith: same with notification options
[2013-09-30 19:49:14 -0400] timsmith: period
[2013-09-30 19:49:17 -0400] timsmith: you know everything...
[2013-09-30 19:53:03 -0400] josephholsten: timsmith: should we have the check_command in host server be configurable? or the command in check-host-alive? https://github.com/opscode-cookbooks/nagios/blob/master/templates/default/commands.cfg.erb#L8
[2013-09-30 19:53:54 -0400] timsmith: ideally you could define a command via data bag
[2013-09-30 19:54:15 -0400] timsmith: and you'd config the check command to use whatever command you wished
[2013-09-30 19:54:32 -0400] timsmith: without that it's most likely still going to lead to a custom erb
[2013-09-30 19:54:35 -0400] timsmith: which is less than ideal
[2013-09-30 19:59:39 -0400] wdilly: Hi everyone, im a bit over my head here. I am trying to use the "aws" recipe which requires the "right_aws" ruby gem, however, I need to change a minute amount of code in the gem "right_aws"  What would be the right strategy here? Thanks so much.
[2013-09-30 20:01:17 -0400] cwj: wdilly: what change are you trying to make?
[2013-09-30 20:02:31 -0400] timsmith: code review today?
[2013-09-30 20:02:43 -0400] wdilly: cwj, I want to change the variable  DEFAULT_HOST in this file: https://github.com/rightscale/right_aws/blob/411fe624357d10a170b233aa34f29f4e89d5fff5/lib/ec2/right_ec2.rb
[2013-09-30 20:05:20 -0400] cwj: wdilly: i infer that you are trying to change the API endpoint your chef aws resources talk to
[2013-09-30 20:06:00 -0400] cwj: i would think it would be easier, and more reusable, to modify the aws cookbook to allow you to specify a custom endpoint
[2013-09-30 20:06:26 -0400] wdilly: cwj, precisely, i am trying to modify this so it talks to our install of eucalyptus
[2013-09-30 20:06:32 -0400] cwj: e.g. around https://github.com/opscode-cookbooks/aws/blob/master/libraries/ec2.rb#L51 where the aws cookbook sets up an instance of RightAws::Ec2
[2013-09-30 20:09:23 -0400] josephholsten: @jtimberman code review?
[2013-09-30 20:10:15 -0400] cwj: it looks like you can pass params like :default_host, :default_port, etc when creating an instance of RightAws::Ec2, so the trick would be ensuring that the existing resources provided by the aws cookbook continue to work for everyone who is fine with the aws default
[2013-09-30 20:12:07 -0400] wdilly: cwj, im a bit dense still trying to see what you are saying
[2013-09-30 20:13:03 -0400] wdilly: cwj, we will only be having one user (one set of aws credentials) utilizing this recipe
[2013-09-30 20:14:01 -0400] wdilly:  :default_host (can you elaborate on how that would be "passed" to that cookbook?
[2013-09-30 20:16:26 -0400] gmcinnes: Hi all: Currently I set hostnames on my nodes by looking up the ip from ifconfig and doing a reverse DNS lookup on that IP.  It turns out this is painful since my upstream never sets the rDNS correctly without nagging.  I'm thinking of just building a "nodes" data bag with IP -> hostname mapping.  Is there a better way to do this?
[2013-09-30 20:17:23 -0400] timsmith: there's code review today
[2013-09-30 20:17:27 -0400] timsmith: vargo is just too cool for IRC
[2013-09-30 20:17:35 -0400] cwj: wdilly: it appears to me that RightAws::Ec2 already provides a means for overriding the default api settings, and (imo) the right way to accomplish your objective is to modify the aws cookbook to accept additional parameters (for each resource the cookbook provides) that relate to the api endpoint settings, and then modify the code related to initalizing and calling RightAws::Ec2 so that those parameters are passed as needed
[2013-09-30 20:17:52 -0400] timsmith: https://t.co/FFurgpGlVq
[2013-09-30 20:19:24 -0400] wdilly: cwj, thank you. Im gonna try and woek with that.
[2013-09-30 20:19:29 -0400] cwj: wdilly: so the LWRPs in the aws cookbook would need a set of additional parameters like api_host, api_port, api_protocol, etc for each aspect of the api endpoint that needs to be specified
[2013-09-30 20:19:38 -0400] cwj: cool, hope it helps
[2013-09-30 20:19:52 -0400] wdilly: what are LWRPs?
[2013-09-30 20:19:55 -0400] cwj: if done correctly i think that would be a useful improvement to the cookbook
[2013-09-30 20:20:15 -0400] cwj: LWRPs are light weight resource providers http://docs.opscode.com/chef/lwrps_custom.html
[2013-09-30 20:20:27 -0400] juliancdunn: timsmith: we should have Chef automate the notifications for that :-)
[2013-09-30 20:23:40 -0400] timsmith: yep
[2013-09-30 20:37:05 -0400] Majost: Code review is @ 2PM PDT?
[2013-09-30 20:37:41 -0400] jag2: i get this error while using application & application_java cookbook in my recipe - can anyone point me what is wrong here !!
[2013-09-30 20:37:42 -0400] jag2: [2013-10-01T02:04:56+05:30] FATAL: NameError: No resource found for tomcat. Tried application_tomcat, application_java_tomcat, tomcat
[2013-09-30 20:38:50 -0400] jag2: i have specified the dependency in my cookbooks metadata.rb
[2013-09-30 20:39:17 -0400] cwj: jag2: gist your recipe?
[2013-09-30 20:39:40 -0400] jag2: application  'deploy_java' do
[2013-09-30 20:39:41 -0400] jag2:   path       '/usr/share/tomcat6/webapps/'
[2013-09-30 20:39:41 -0400] jag2:   repository '/u1/jag/hello-3.0.war'
[2013-09-30 20:39:41 -0400] jag2:   scm_provider Chef::Provider::File::Deploy
[2013-09-30 20:39:41 -0400] jag2:   tomcat
[2013-09-30 20:39:42 -0400] jag2: end
[2013-09-30 20:40:59 -0400] jag2: in metadata.rb i have the dependency like this
[2013-09-30 20:41:06 -0400] jag2: depends "application"
[2013-09-30 20:41:06 -0400] jag2: depends "application_java"
[2013-09-30 20:44:09 -0400] jag2: cwj:https://gist.github.com/jagshub/6769982
[2013-09-30 20:49:00 -0400] jag2: cwj: can you point me whats wrong here https://gist.github.com/jagshub/6769982
[2013-09-30 20:50:01 -0400] cwj: jag2: granted, i am more familiar with application_python myself, but nothing in your code is jumping out at me as obviously wrong
[2013-09-30 20:50:27 -0400] cwj: which version of chef are you using?
[2013-09-30 20:52:00 -0400] jag2: cwj - Chef Client, version 11.4.4
[2013-09-30 20:58:49 -0400] jag2: hello everyone - iam using application_java resource "tomcat" in my cookbook , but i get a error , can anyone point me whats wrong here pls !
[2013-09-30 20:58:51 -0400] jag2: FATAL: NameError: No resource found for tomcat. Tried application_tomcat, application_java_tomcat, tomcat
[2013-09-30 20:59:24 -0400] jag2: https://gist.github.com/jagshub/6769982
[2013-09-30 21:03:19 -0400] yfeldblum: jag2, what's https://gist.github.com/jagshub/6769982#file-gistfile1-txt-L7 supposed to do?
[2013-09-30 21:04:27 -0400] jag2: yfeldblum: intention is to deploy the war to tomcat..
[2013-09-30 21:05:27 -0400] jag2: yfeldblum: i get FATAL: NameError: No resource found for tomcat. Tried application_tomcat, application_java_tomcat, tomcat
[2013-09-30 21:07:36 -0400] yfeldblum: jag2, does your cookbook depend on the "application_java" cookbook?
[2013-09-30 21:07:43 -0400] jag2: yes
[2013-09-30 21:07:55 -0400] yfeldblum: jag2, is that dependency listed in your cookbook's metadata.rb?
[2013-09-30 21:08:27 -0400] jag2: yfeldblum: yes
[2013-09-30 21:09:50 -0400] jag2: yfeldblum: i have this in metadata.rb    depends "application_java"
[2013-09-30 21:11:26 -0400] jag2: yfeldblum: tomcat is a resource in application_java , but  that is not working for me , when i use it in my cookbook recipe.
[2013-09-30 21:22:57 -0400] d```: how do I do a node search and then then do an action with each node's ip address? I know how to execute the query, but data returned appears to be an array of hashes?
[2013-09-30 21:25:07 -0400] solvip: d```: results.each do |thing| ... ?
[2013-09-30 21:26:54 -0400] d```: solvip: would I have to do something like results.each do |node|; node.each do |ipaddress, ip| puts ip
[2013-09-30 21:26:57 -0400] d```: ??
[2013-09-30 21:28:25 -0400] d```: I know that if I want to get the first result, it's results[0]['ipaddress']
[2013-09-30 21:28:32 -0400] werdnativ: I'm trying to understand how to best set up Vagrant as a chef client I need to copy the chef-validator.pem PRIVATE key from the chef server?
[2013-09-30 21:28:33 -0400] solvip: yeah, except you could just do results.each do |foo| puts foo['ipaddress'] end
[2013-09-30 21:29:10 -0400] werdnativ: I guess I don't understand why it needs to share a private key.
[2013-09-30 21:30:07 -0400] werdnativ: Or is it better to set up a separate client key?
[2013-09-30 21:32:23 -0400] surge_: d```: search(:node, 'recipes:FOO') do |node|
[2013-09-30 21:32:26 -0400] d```: solvip: that appears to still return all the node data for all node
[2013-09-30 21:32:28 -0400] surge_: Is that what you're looking for?
[2013-09-30 21:33:05 -0400] d```: surge_: I'm looking for how to get data from each result
[2013-09-30 21:33:15 -0400] werdnativ: Is there an explanation of how client authentication works in chef somewhere?
[2013-09-30 21:33:35 -0400] surge_: nvm solvip beat me to it. Yeah, so just iterate with the 'each' method
[2013-09-30 21:34:00 -0400] d```: is the data that's returned an array of hashes?
[2013-09-30 21:34:35 -0400] d```: solvip's solution is still returning all the data for all the results
[2013-09-30 21:35:34 -0400] tomduffield: are you wanting just the ip address?
[2013-09-30 21:35:56 -0400] adnichols: werdnativ if you use the validation.pem a per-client key pair will be created the first time the client runs - typically you use 'knife bootstrap' for this and then you don't have to copy the validation.pem in place - it does that for you
[2013-09-30 21:36:09 -0400] d```: tomduffield: yes, but from a search that returns multiple servers, and I want all of them
[2013-09-30 21:36:52 -0400] tomduffield: alright. it sounds like you want to use partial_search: https://github.com/opscode-cookbooks/partial_search
[2013-09-30 21:38:41 -0400] surge_: http://docs.opscode.com/essentials_search.html#partial-search
[2013-09-30 21:40:01 -0400] d```: tomduffield surge_, I'd love to use partial search, except that our server is stuck in the 10.x because there's no official packages for debian 7
[2013-09-30 21:40:38 -0400] surge_: well, i'm out of ideas =X
[2013-09-30 21:41:41 -0400] d```: I feel like if I wasn't such a dummy with ruby/programming I'd be able to solve this
[2013-09-30 21:42:05 -0400] d```: surge_, tomduffield, solvip thanks for your help
[2013-09-30 21:42:27 -0400] werdnativ: adnichols, knife bootstrap is looking for "/etc/chef/validation.pem", I'm running it inside my vagrant box with `knife bootstrap mynode.dev`, shouldn't vagrant do this? Where should it get "validation.pem" from?
[2013-09-30 21:42:59 -0400] tomduffield: d```: So you can still use search you'll just be pulling down the full node object for each node.
[2013-09-30 21:43:30 -0400] adnichols: werdnativ you need to follow the client setup so you have the validation.pem in your .chef directory on your workstation. Typically you run knife bootstrap on a workstation and it ssh'es into the host you are trying to bootstrap and sets it up
[2013-09-30 21:43:35 -0400] d```: tomduffield: I understand that, I think I just don't understand how to pull out just the data I'm looking for
[2013-09-30 21:44:03 -0400] adnichols: werdnativ http://docs.opscode.com/install_workstation.html
[2013-09-30 21:44:42 -0400] tomduffield: d```: so inside the .each do |result| block, you can treat the result variable just like the node object
[2013-09-30 21:44:54 -0400] adnichols: werdnativ vagrant can also do this - but it's totally different, you have to tlook at the vagrant docs for that
[2013-09-30 21:44:54 -0400] surge_: d```: You're getting an array of hashes as the search results. What might help you is if you run "ohai > ohai.json" throw that into an app like "jason" for mac and then you can see what you can query for.
[2013-09-30 21:45:00 -0400] tomduffield: so you should be able to do result['ip_address']
[2013-09-30 21:45:08 -0400] werdnativ: adnichols: Thanks, will review those docs I was pretty sure I had my workstation set up already. Just trying to get a vagrant project working with it.
[2013-09-30 21:45:26 -0400] tomduffield: werdnativ: are you trying to manually bootstrap a vagrant box?
[2013-09-30 21:45:45 -0400] werdnativ: tomduffield: hopefully not too manually, trying to get vagrant to do it. :)
[2013-09-30 21:46:12 -0400] tomduffield: and vagrant is throwing the validation.pem error?
[2013-09-30 21:46:20 -0400] werdnativ: yes
[2013-09-30 21:46:39 -0400] tomduffield: and you have the validation key on your system? do you know where it is?
[2013-09-30 21:46:43 -0400] adnichols: if you are running knife boostrap inside your vagrant box that's not accurate
[2013-09-30 21:46:48 -0400] adnichols: that's not vagrant
[2013-09-30 21:47:05 -0400] d```: tomduffield: that returns the whole node object when I try it in chef-shell
[2013-09-30 21:47:48 -0400] werdnativ: vagrant takes a validation_key_path. I gave it a file ".chef/our-validation.pem" which I created as a client with "admin" in chef-server.
[2013-09-30 21:48:03 -0400] werdnativ: it throws a can't register error inside vagrant.
[2013-09-30 21:48:11 -0400] tomduffield: d```: can you show me your chef-shell output in a gist?
[2013-09-30 21:48:14 -0400] adnichols: werdnativ you should have a specific validation client
[2013-09-30 21:48:25 -0400] d```: tomduffield: yes
[2013-09-30 21:49:15 -0400] d```: tomduffield: actually maybe not
[2013-09-30 21:49:18 -0400] tomduffield: werdnativ: this may be off topic but save you: is there a reason you are using chef-client vs chef-zero when using vagrant?
[2013-09-30 21:49:48 -0400] d```: but I can show you what I'm doign
[2013-09-30 21:50:21 -0400] werdnativ: tomduffield: wasn't aware of chef-zero I was using chef-solo before, but was running into lots of problems with things not working (cookbooks depending on search, etc)
[2013-09-30 21:50:45 -0400] werdnativ: so I'm thinking to make it all go from the server to make it "easier"
[2013-09-30 21:50:50 -0400] tomduffield: okay. well there is a chef-solo-search cookbook you can use
[2013-09-30 21:50:57 -0400] tomduffield: but chef-zero is an in-memory chef server
[2013-09-30 21:51:05 -0400] tomduffield: which is great if you want to test cookbooks you are working on
[2013-09-30 21:51:26 -0400] werdnativ: yeah, I was using that too.
[2013-09-30 21:52:02 -0400] tomduffield: Are you doing development testing or CI testing with Vagrant in this scenario
[2013-09-30 21:52:06 -0400] werdnativ: Basically what I want to do is 1. give a new developer our app repo (with a Vagrantfile). 2. auth them ?? 3. profit
[2013-09-30 21:52:25 -0400] tomduffield: ah
[2013-09-30 21:52:32 -0400] tomduffield: so I think chef-zero will save you
[2013-09-30 21:52:37 -0400] tomduffield: new developer and chef-server can be dangerous
[2013-09-30 21:53:01 -0400] werdnativ: thanks, I'll take a look
[2013-09-30 21:53:04 -0400] d```: tomduffield: https://gist.github.com/ranxxerox/c863623ebe1e55e3bacc
[2013-09-30 21:53:49 -0400] tomduffield: chef-zero is basically a locally hosted, in-memory chef server (http://www.youtube.com/watch?v=bUYjX1SNUh8)
[2013-09-30 21:54:22 -0400] adnichols: tomduffield found any good guides on making that load up and work nicely in a vagrant setup?
[2013-09-30 21:54:29 -0400] tomduffield: there is a vagrant plugin as well (https://github.com/andrewgross/vagrant-chef-zero)
[2013-09-30 21:54:46 -0400] adnichols: ah, and there it is
[2013-09-30 21:56:27 -0400] tomduffield: d``` and result['ipaddress'] is the full node object?
[2013-09-30 21:56:43 -0400] tomduffield: its not just the ip address, its giving you a hash?
[2013-09-30 21:57:02 -0400] d```: tomduffield: it's a huge hash that fills up my scroll history
[2013-09-30 21:57:13 -0400] d```: which is why I can't give you a meaningful gist
[2013-09-30 21:58:01 -0400] tomduffield: ah
[2013-09-30 21:58:07 -0400] tomduffield: i think i know what you are seeing
[2013-09-30 21:58:16 -0400] tomduffield: when you load the object its printing it out
[2013-09-30 21:58:40 -0400] tomduffield: actually...
[2013-09-30 21:59:11 -0400] tomduffield: can you show me what you have?
[2013-09-30 21:59:22 -0400] tomduffield: even if its not complete?
[2013-09-30 21:59:25 -0400] d```: sure
[2013-09-30 22:00:39 -0400] d```: do you want all 2000 lines
[2013-09-30 22:00:40 -0400] d```: ?
[2013-09-30 22:00:47 -0400] tomduffield: yeah
[2013-09-30 22:01:12 -0400] tomduffield: also, did you try that search function in a recipe or just chef-shell?
[2013-09-30 22:01:21 -0400] d```: just chef-shell
[2013-09-30 22:01:23 -0400] tomduffield: hmm
[2013-09-30 22:02:13 -0400] tomduffield: so without looking i think what you are seeing with that huge hash is the object getting loaded into the do block
[2013-09-30 22:02:40 -0400] tomduffield: and in practice you'll actually get what you are expecting
[2013-09-30 22:02:56 -0400] d```: okay I'll make a test recipe that just prints out that data
[2013-09-30 22:03:13 -0400] tomduffield: on a separate note: is there a reason you are on Open Source Chef and not hosted?
[2013-09-30 22:03:23 -0400] tomduffield: or that you are running Debian?
[2013-09-30 22:03:32 -0400] d```: haha, it was like that when I got here
[2013-09-30 22:03:41 -0400] tomduffield: gotcha
[2013-09-30 22:03:53 -0400] tomduffield: well I would advise starting to grease the wheels to solve that issue for good
[2013-09-30 22:04:07 -0400] tomduffield: by switching to the hosted service
[2013-09-30 22:04:20 -0400] d```: I don't mind running open source chef
[2013-09-30 22:04:40 -0400] tomduffield: how many nodes do you have?
[2013-09-30 22:04:43 -0400] d```: and we're a financial institution so everyone is paranoid about anything not internally hosted
[2013-09-30 22:04:53 -0400] d```: 400ish atm
[2013-09-30 22:04:56 -0400] tomduffield: okay
[2013-09-30 22:05:07 -0400] d```: it'll probably increase to about 1k in the next 6mo
[2013-09-30 22:05:22 -0400] tomduffield: well then I'd take a look at Enterprise Chef, which can be installed internally
[2013-09-30 22:05:25 -0400] tomduffield: its HA
[2013-09-30 22:05:35 -0400] tomduffield: and has more features than Open Source
[2013-09-30 22:05:49 -0400] d```: doesn't it have rbac?
[2013-09-30 22:06:06 -0400] tomduffield: role-based access control?
[2013-09-30 22:06:39 -0400] tomduffield: if you mean role-based access control, then yes: http://www.opscode.com/enterprise-chef/
[2013-09-30 22:07:12 -0400] d```: I've updated the gist
[2013-09-30 22:07:52 -0400] tomduffield: I dont see anything different on the gist  yet :?
[2013-09-30 22:08:04 -0400] d```: line 5 should be SUPER long
[2013-09-30 22:08:34 -0400] tomduffield: okay
[2013-09-30 22:08:36 -0400] tomduffield: the first bit is blank
[2013-09-30 22:08:41 -0400] d```: github is interpreting a bunch of it as blank
[2013-09-30 22:08:45 -0400] tomduffield: but yeah, I think that if you put that into practice you'd be fine
[2013-09-30 22:08:47 -0400] d```: when I hit edit there's stuff there
[2013-09-30 22:08:56 -0400] tomduffield: ah
[2013-09-30 22:08:58 -0400] tomduffield: view raw also works
[2013-09-30 22:09:06 -0400] d```: weird
[2013-09-30 22:09:15 -0400] d```: secret txt markup
[2013-09-30 22:10:28 -0400] d```: tomduffield: hopefully this works, thanks for your help
[2013-09-30 22:10:32 -0400] tomduffield: np
[2013-09-30 22:10:49 -0400] tomduffield: if you want more info on Enterprise Chef, just hit me up on twitter @tomduffield. I think you'd be a good candidate for it
[2013-09-30 22:11:09 -0400] d```: tomduffield: can I install it on not ubuntu or RHEL?
[2013-09-30 22:12:00 -0400] tomduffield: unfortunately not at the moment
[2013-09-30 22:12:37 -0400] d```: that's a pretty big stopper for us, I'm not super interested in supporting more than one distro
[2013-09-30 22:12:53 -0400] d```: unless it's absolutely necessary
[2013-09-30 22:13:10 -0400] d```: but we may switch to ubuntu for everything
[2013-09-30 22:13:18 -0400] d```: because openstack
[2013-09-30 22:14:21 -0400] tomduffield: right. There aren't any plans to support Debian in the near future but if you do the internal install you can get help/support from Opscode as well. I personally think it'd be worth it.
[2013-09-30 22:15:10 -0400] d```: tomduffield: I'm all about having someone upstream to blame
[2013-09-30 22:15:21 -0400] d```: I'll take it into consideration
[2013-09-30 22:15:49 -0400] tomduffield: http://docs.opscode.com/server/private_chef_1x_engage.html
[2013-09-30 22:15:57 -0400] tomduffield: here's a bit more info on it as well
[2013-09-30 22:41:18 -0400] surge_: Is there a way to stop chef from creating the symlink to database.yml when using the "deploy" resource?
[2013-09-30 22:41:39 -0400] surge_: I thought "symlink_before_migrate nil" would prevent that but that's not the case.
[2013-09-30 22:42:31 -0400] surge_: The issue I'm having is because there is no database.yml file to speak of.
[2013-09-30 22:42:41 -0400] cwj: try symlink_before_migrate.clear
[2013-09-30 22:43:25 -0400] cwj: i think symlink_before_migrate is a hash so .clear should remove all the default key-value pairs
[2013-09-30 22:46:22 -0400] surge_: Thanks, I'll try it out.
[2013-09-30 23:10:14 -0400] dgarstang1: I'm seeing the CHEF-3694 warning from the opscode user cookbook TWICE for each user. How's that possible?
[2013-09-30 23:19:06 -0400] Kzim: hello is there a way to upload a cookbook from python for example  ?
[2013-09-30 23:23:02 -0400] stormerider: Kzim: there's pychef, but i dont know if cookbook uploads is one of the things it supports
[2013-09-30 23:23:18 -0400] stormerider: Kzim: the chef ecosystem is primarily ruby.
[2013-09-30 23:24:52 -0400] geggam: it makes no sense to do chef in python... if you need python use saltstack or ansible
[2013-09-30 23:24:57 -0400] geggam: imho
[2013-09-30 23:26:06 -0400] Kzim: stormbrew, well in ruby is good also
[2013-09-30 23:26:11 -0400] Kzim: i wil check that thanks
[2013-09-30 23:26:49 -0400] Kzim: can i do knife cookbook upload . ? i mean upload the cookbook in the working directory ?
[2013-09-30 23:26:55 -0400] Kzim: without any cookbook_paths
[2013-09-30 23:45:58 -0400] mmgaggle: anyone built/tested omnibus chef for ARM?
[2013-09-30 23:55:42 -0400] jtimberman: Kzim: check out coderanger's chef-funnel project for some prototype/experimental code: https://github.com/coderanger/chef-funnel
[2013-09-30 23:55:54 -0400] coderanger: Hmm?
[2013-09-30 23:56:08 -0400] jtimberman: coderanger: go back to sleep :)
[2013-09-30 23:56:14 -0400] coderanger: Using chef-funnel is probably not a great idea, you should use the dialects branch :)
[2013-09-30 23:57:06 -0400] coderanger: Hopefully after this flight, I'll have the python dialect cookbook working

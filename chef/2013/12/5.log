[2013-12-05 00:03:09 -0500] maraca: what's the easiest way to back up my chef server?
[2013-12-05 00:03:34 -0500] josephholsten: vm snapshot?
[2013-12-05 00:03:56 -0500] josephholsten: we use "knife download '*'"
[2013-12-05 00:04:14 -0500] maraca: josephholsten: im on AWS and the root device is an EBS volume which means (i think) that I have to shut down the instance to make a snapshot :/
[2013-12-05 00:04:37 -0500] maraca: well sh*t i've never heard of knife download
[2013-12-05 00:04:43 -0500] maraca: that looks mighty useful
[2013-12-05 00:06:18 -0500] josephholsten: all of knife-essentials is good
[2013-12-05 00:06:28 -0500] maraca: josephholsten does it download the nodes too?
[2013-12-05 00:06:40 -0500] josephholsten: it's built into knife with chef 11
[2013-12-05 00:06:44 -0500] josephholsten: I don't remember
[2013-12-05 00:06:47 -0500] jkeiser: It does
[2013-12-05 00:06:49 -0500] svanzoest: I'd love to get some feedback on apache2 cookbook 2.4 support as per https://tickets.opscode.com/browse/COOK-3900
[2013-12-05 00:06:54 -0500] jkeiser: It downloads absolutely everything
[2013-12-05 00:06:59 -0500] jkeiser: knife download /
[2013-12-05 00:07:22 -0500] maraca: right on - i'll play around with it a bit. thanks jkeiser and josephholsten!
[2013-12-05 00:07:38 -0500] josephholsten: yeah, I keep playbooks around so I never need to remember those exact commands
[2013-12-05 00:08:32 -0500] josephholsten: but we've practiced live migration to a new chef server with a load balancer, knife-server to build the new box, and knife download/upload to handle backup/restore
[2013-12-05 00:08:44 -0500] josephholsten: well, we also used that to move data centers
[2013-12-05 00:08:51 -0500] josephholsten: it doesn't suck
[2013-12-05 00:09:33 -0500] josephholsten: it's not HA chef, but it's good enough for govmt work
[2013-12-05 00:15:08 -0500] maraca: haha
[2013-12-05 01:00:26 -0500] Lolindir: Is there another way to evaluate code at runtime besides a ruby_block? or is there a method to run a provider inside a ruby_block?
[2013-12-05 01:13:45 -0500] coderanger: Lolindir: What are you trying to do?
[2013-12-05 01:24:38 -0500] Lolindir: coderanger: same script, need inf_file to be evaluated after the files are copied to the local system.  But at run time it evaluates to null
[2013-12-05 01:25:05 -0500] Lolindir: putting the logic in the block successfully evaluates it, but I can't then use windows_batch to run the correct script
[2013-12-05 01:26:31 -0500] Lolindir: coderanger: http://pastebin.com/Dc2XN66y
[2013-12-05 01:27:50 -0500] Lolindir: I need to either evaluate $inf_file to the value in the ruby_block or somehow run Create printer driver inside the same block
[2013-12-05 01:31:16 -0500] coderanger: Lolindir: you can use notifications
[2013-12-05 01:31:32 -0500] coderanger: make the windows_batch with action :nothing
[2013-12-05 01:31:46 -0500] coderanger: and have some other resource notify it
[2013-12-05 01:32:28 -0500] kreisys: hey all... anyone knows how can I make an attribute evaluate at runtime and not at compile time?
[2013-12-05 01:33:07 -0500] supercom32: If you use the service resource to stop a service, is there a way to make it work so that if the user does not have that service, not to fail?
[2013-12-05 01:33:14 -0500] jidar: http://pastebin.com/PHFpH3WX full stack trace of me trying to upload via knife cookbook upload foo -VV, for some reason halfway through the exchange the server configured in knife.rb is ignored and it starts using localhost
[2013-12-05 01:33:17 -0500] jidar: any ideas?
[2013-12-05 01:33:33 -0500] JayF: supercom32: you could add an -> ignore_failure true -> directive to the resource
[2013-12-05 01:35:31 -0500] jidar: sorry, different pastebin: same issue http://pastebin.com/abj5hxC7
[2013-12-05 01:35:33 -0500] coderanger: kreisys: Thats not really a thing, what are you trying to do?
[2013-12-05 01:35:47 -0500] coderanger: jidar: So you are running your own chef-server right?
[2013-12-05 01:35:50 -0500] jidar: yea
[2013-12-05 01:35:55 -0500] kreisys: I have a ruby_block that alters the attribute and then another resource uses it. but since resources are evaluated at compile time I end up with the old value
[2013-12-05 01:36:10 -0500] coderanger: jidar: So you probably have hostname issues
[2013-12-05 01:36:31 -0500] jidar: coderanger: yep, just don't understand what the issue is, hostname -f returns the foo.local and that resolves everywhere
[2013-12-05 01:36:40 -0500] coderanger: jidar: the chef server needs to know its FQDN for when it sends you links to bookshelf for file uploads
[2013-12-05 01:37:12 -0500] coderanger: jidar: On the machine itself does that hostname resolve to 127.0.0.1?
[2013-12-05 01:37:19 -0500] jidar: yea
[2013-12-05 01:37:25 -0500] jidar: the server you mean right?
[2013-12-05 01:37:27 -0500] coderanger: kreisys: Ahh, use the new lazy {} thang
[2013-12-05 01:37:28 -0500] supercom32: JayF: Doh, your right. Thanks for the reminder >_<
[2013-12-05 01:37:31 -0500] coderanger: jidar: Yeah
[2013-12-05 01:37:42 -0500] jidar: PING VPC-QA-ChefServer.local (127.0.0.1) 56(84) bytes of data.
[2013-12-05 01:38:00 -0500] kreisys: lazy {}? never heard of it
[2013-12-05 01:38:14 -0500] coderanger: kreisys: Sec, looking for blog post
[2013-12-05 01:38:20 -0500] coderanger: jidar: So thats incorrect :-)
[2013-12-05 01:38:34 -0500] coderanger: jidar: FQDN should map to the machines real IP
[2013-12-05 01:38:46 -0500] coderanger: jidar: You can override the auto-detection though, in chef-server.rb
[2013-12-05 01:39:15 -0500] jidar: hmm, I might have to do that because I'm not aware of how to trick the hosts file out so that it uses the other ip
[2013-12-05 01:40:40 -0500] coderanger: kreisys: http://docs.opscode.com/release/11-6/release_notes.html#lazy-attribute-evaluation
[2013-12-05 01:41:18 -0500] kreisys: coderanger: ty :>
[2013-12-05 01:41:22 -0500] coderanger: jidar: http://docs.opscode.com/config_rb_chef_server.html
[2013-12-05 01:41:49 -0500] jidar: nginx['server_name'] I assume?
[2013-12-05 01:42:08 -0500] jidar: nginx['url'] or this one maybe
[2013-12-05 01:42:23 -0500] coderanger: jidar: I don't remember off hand, would have to dive the config cookbooks
[2013-12-05 01:42:25 -0500] jidar: ah, that's so goofy, let me see if I can figure this out
[2013-12-05 01:42:30 -0500] jidar: thanks!
[2013-12-05 01:59:24 -0500] supercom32: So I'm trying to specify a dword value using the registry_key resource. But a value of 00000001 doesn't work, nor does 1.
[2013-12-05 01:59:28 -0500] supercom32: I must be doing something wrong
[2013-12-05 02:00:02 -0500] supercom32: It keeps saying "cannot convert Hash into integer". A value of 0 works fine however.
[2013-12-05 02:04:43 -0500] supercom32: Bah, the 'windows_registry' resource works.
[2013-12-05 02:18:47 -0500] bluethundr: hey all.. I have a few clients setup in chef currently. but I notice that one of the clients fell behind it's status check by a day, until I ran chef-client manually
[2013-12-05 02:19:20 -0500] bluethundr: is there any way to make sure that the client is checking in with the chef server other than setting up a cron job to run chef-client every so often? thanks
[2013-12-05 02:28:16 -0500] coderanger: bluethundr: you could use nagios or similar to check the last run time on each node
[2013-12-05 02:28:25 -0500] coderanger: bluethundr: It is stored as the node attribute 'ohai_time'
[2013-12-05 02:28:34 -0500] coderanger: Thats what populates the status info
[2013-12-05 02:29:45 -0500] nate`: chef-server needs to have the ability to associate emails with accounts.
[2013-12-05 02:30:24 -0500] coderanger: nate`: Hmm?
[2013-12-05 02:30:57 -0500] nate`: Well I'm about to generate something like 200 accounts onto a chef-server based on my automated IAM user creation.
[2013-12-05 02:31:24 -0500] nate`: Most of these users ain't gonna remember some random password I send into it and then I'm going to have to reset that crap for them.
[2013-12-05 02:31:24 -0500] coderanger: Okay, how is that related to emails?
[2013-12-05 02:31:44 -0500] coderanger: Ahh, password resets in FOSS chef is an open ticket I think
[2013-12-05 02:31:50 -0500] nate`: If an email address was associated with an account on chef-server, then they could just reset their password.
[2013-12-05 02:32:04 -0500] coderanger: Do they all actually need webui access?
[2013-12-05 02:32:12 -0500] coderanger: If not, then just don't tell them the password
[2013-12-05 02:32:40 -0500] nate`: Well I'm not going to have my script email them their private key.
[2013-12-05 02:32:48 -0500] nate`: So regardless they need to log in.
[2013-12-05 02:32:51 -0500] coderanger: Why not?
[2013-12-05 02:33:14 -0500] nate`: I do not believe a private key should ever go through email nor do I believe a privat key should ever be stored anywhere in version control.
[2013-12-05 02:33:30 -0500] nate`: Plus there's sort of a contractual obligation with a customer regarding that.
[2013-12-05 02:33:54 -0500] coderanger: +1 on the latter, but emailing the private key seems no different than emailing the password
[2013-12-05 02:34:01 -0500] coderanger: They are in fact isomorphic
[2013-12-05 02:34:22 -0500] coderanger: since an attacker than gets the password also gets the private key
[2013-12-05 02:34:24 -0500] nate`: Well chef-server also does not have a "force update your private key" upon first login.
[2013-12-05 02:34:44 -0500] nate`: At least I can get around the obligation for passwords, but cannot with keys.
[2013-12-05 02:34:46 -0500] coderanger: Indeed, because FOSS webui isn't really a thing you should be using :P
[2013-12-05 02:34:59 -0500] nate`: I'm hitting up the API to generate these accounts.
[2013-12-05 02:34:59 -0500] coderanger: Okay, well if its a legal hack then mazel tov
[2013-12-05 02:35:09 -0500] coderanger: but don't cite it as security related ;-)
[2013-12-05 02:35:37 -0500] nate`: Well I'd still prefer if I would never have to reset someone's password.  Hrm, maybe I can write something that will do that instead based on the IAM policies I have.
[2013-12-05 02:35:44 -0500] nate`: Yay, more code I don't want to write.
[2013-12-05 02:36:01 -0500] coderanger: external authentication integration is a feature of enterprise chef
[2013-12-05 02:36:04 -0500] coderanger: just sayin' :)
[2013-12-05 02:36:35 -0500] nate`: I'm sure it'll be cheaper to pay me for 8-12 hours to come up with something than for that.  Do have budget constraints.
[2013-12-05 02:36:48 -0500] coderanger: Probably true :-)
[2013-12-05 02:36:50 -0500] nate`: :%s/than/then/g
[2013-12-05 02:37:07 -0500] coderanger: So if you want to make your own thing let me know and I can give you some pointers
[2013-12-05 02:37:33 -0500] coderanger: Would be pretty easy to make a single purpose webapp that just federates to an existing auth source and hits the chef API to reset keys
[2013-12-05 02:37:50 -0500] nate`: Well just a quick thought, and I'm talking under a minute.  I already have a script that queries our AD to build our IAM accounts based on policies I helped the security team write.
[2013-12-05 02:37:57 -0500] nate`: Using that I've been able to generate accounts.
[2013-12-05 02:38:20 -0500] nate`: So I figure it shouldn't be too hard for me to eventually create some sort of class in order to reset a password.
[2013-12-05 02:38:37 -0500] coderanger: You mean in the chef codebase itself?
[2013-12-05 02:38:55 -0500] nate`: coderanger: I'm not a programmer though ;)  Sort have been forced into it.  I do network security, network design, that sort of thing.
[2013-12-05 02:39:19 -0500] nate`: coderanger: I'm working on a mixture of a CLI/webapp at the moment.  Only a week into it :P
[2013-12-05 02:39:26 -0500] coderanger: I would not recommend trying to patch this into the chef-webui itself, better to make your own web app that talks to the chef API
[2013-12-05 02:39:29 -0500] nate`: Every day more crap gets added into it.
[2013-12-05 02:39:48 -0500] nate`: Hrm.  I'll talk to legal to see if I can contribute.
[2013-12-05 02:39:54 -0500] nate`: My NDA was very weird this time.
[2013-12-05 02:41:15 -0500] nate`: I'm sure you've come accross some of those in the past.  Damn you NDA, just open source everything.
[2013-12-05 02:42:09 -0500] coderanger: Not really, only ever had one job that wasn't an open-source-based company
[2013-12-05 02:42:30 -0500] coderanger: And even there I released a lot of the stuff I worked on
[2013-12-05 02:42:34 -0500] nate`: In the early aughts I was a government contractor.
[2013-12-05 02:42:49 -0500] coderanger: I'm also a tad more of a zealot than most :-)
[2013-12-05 02:43:06 -0500] nate`: I'm a whore when it comes to the times I need a job.
[2013-12-05 02:43:21 -0500] nate`: I'll go a few years without working, but when the money runs out, well gotta replenish that stock.
[2013-12-05 02:44:12 -0500] coderanger: Balanced is always hiring ;-)
[2013-12-05 02:44:14 -0500] nate`: When I do have to replenish I'm always given something stupidly impossible to accomplish.
[2013-12-05 02:44:41 -0500] bluethundr: coderanger: cool thanks for the info
[2013-12-05 02:44:43 -0500] nate`: architect the entire automation within any public cloud provider along with everything in our data centers.  Then make it one tool.
[2013-12-05 02:45:41 -0500] nate`: Then I'm assigned two people that use windows only and have never written a script in their lives and they're both at least a decade older than me.
[2013-12-05 02:46:28 -0500] nate`: Might as well delve into this
[2013-12-05 02:47:31 -0500] coderanger: nate`: Good luck, still would say making something single-purpose will be easier ;-)
[2013-12-05 02:48:02 -0500] coderanger: (I say having been the maintainer of that code for many years)
[2013-12-05 02:48:56 -0500] nate`: Well I could add forms into the ui fairly easily for an email address.  Gotta figure out where to put that information though :P
[2013-12-05 02:49:17 -0500] nate`: I honestly haven't looked at any of the chef code, I've only ever written cookbooks for it.
[2013-12-05 02:49:28 -0500] nate`: Well and a script that generated roughly 200 user accounts
[2013-12-05 02:51:23 -0500] nate`: should refactor the two account creation scripts I have into one.  Why is there only 24 hours in a day and stupid deadlines all the time?
[2013-12-05 03:04:39 -0500] broconne: Hey ruby experts...  is remote_file or just ruby HTTP known to be slow in general?  I am seeing difference for large files.  Somehing in the 200 MB range takes 4 seconds w/ wget and 40 with remote_file or even just ruby doing net:http
[2013-12-05 03:05:27 -0500] coderanger: broconne: Its certainly not especially fast
[2013-12-05 03:05:36 -0500] coderanger: that does seem a tad slow, but not insanely
[2013-12-05 03:06:44 -0500] broconne: ok - will use wget then..  have some 1GB files to pull over at times.. up to 4GB.. so a 10x slowdown is pretty painful, certainly during testing.
[2013-12-05 03:09:06 -0500] coderanger: Yeah, you want something in C
[2013-12-05 03:09:18 -0500] coderanger: wget, curl, or a native implementation in Ruby
[2013-12-05 04:54:02 -0500] jidar: using the omnibus installer for server, is the /etc/chef-server/chef-server.rb file not read upon restarting services?
[2013-12-05 05:49:46 -0500] kumavis: trying to setup a chef-server
[2013-12-05 05:52:45 -0500] kumavis: is there a vagrant file avail for chef-server?
[2013-12-05 05:57:14 -0500] fnichol: kumavis: I believe that the Vagrantfile in https://github.com/opscode-cookbooks/chef-server works for this
[2013-12-05 05:58:56 -0500] kumavis: fnichol ah there it is, cheers!
[2013-12-05 06:06:04 -0500] fnichol: kumavis: no problem!
[2013-12-05 06:43:59 -0500] segv: So say I have a ruby_block being called from a cookbook that has its own LWRP's
[2013-12-05 06:44:10 -0500] segv: say one is named blah_blahpack
[2013-12-05 06:44:24 -0500] segv: within that ruby_block (block do) would I call Chef::Resource::BlahPack?
[2013-12-05 06:47:59 -0500] kumavis: No builds for platform: 10.9
[2013-12-05 06:48:00 -0500] kumavis: Please file a bug report at http://tickets.opscode.com
[2013-12-05 06:48:36 -0500] kumavis: running chef-client install.sh http://www.opscode.com/chef/install/ for osx
[2013-12-05 06:54:56 -0500] ignatz: yeah it doesn't work on mavericks
[2013-12-05 06:55:18 -0500] fnichol: kumavis: not that i recommend this in the long term, but i copy/forked install.sh for mavericks support about 2 months ago https://gist.github.com/fnichol/3c10e7e58625ebe63487/raw/install.sh
[2013-12-05 06:55:24 -0500] ignatz: I saw some workarounds when I googled but have not tried any.
[2013-12-05 06:55:36 -0500] c_t: chef-server runs on os x now?
[2013-12-05 06:55:47 -0500] kumavis: chef-client
[2013-12-05 06:56:13 -0500] fnichol: kumavis: i view this as a bandaid until install.sh gets updated. and bonus points for it being open sourced for pull requests :)
[2013-12-05 06:57:07 -0500] segv: chef-client 10.8 works fine on 10.9
[2013-12-05 06:58:12 -0500] c_t: trying to decide how important it is to get the error messages to match exactly
[2013-12-05 06:58:13 -0500] kumavis: welp i hope you didnt sneak anything nasty in there fnichol, b/c otherwise you now own my box
[2013-12-05 06:58:26 -0500] kumavis: cheers again
[2013-12-05 07:02:32 -0500] Guest28286: hi all
[2013-12-05 07:02:42 -0500] Guest28286: got time for a quick chef question ?
[2013-12-05 07:06:46 -0500] coderanger: Guest28286: Whats up
[2013-12-05 07:07:15 -0500] Guest28286: i have a problem since upgrading to a newer version of chef
[2013-12-05 07:07:52 -0500] Guest28286: secureRandom=`cat #{randomKeyFile}`
[2013-12-05 07:08:30 -0500] Guest28286: I am trying to capture either the content of a file or the output produced on STDOUT from a shell command into a local variable
[2013-12-05 07:08:44 -0500] Guest28286: however since upgrading chef i am getting an error
[2013-12-05 07:08:52 -0500] Guest28286: undefined method `randomKeyFile' for Chef::Resource::Bash
[2013-12-05 07:09:41 -0500] Guest28286: I understand this is a very un-chef method of doing things, so I am looking at what options are available to resolve this
[2013-12-05 07:09:43 -0500] coderanger: That seems like a sub-par way to read in a file
[2013-12-05 07:11:15 -0500] coderanger: Can you pastebin the whole recipe so I can see it in context?
[2013-12-05 07:26:17 -0500] Guest28286: http://pastebin.com/VUgBuVjy
[2013-12-05 07:26:35 -0500] Guest28286: I am generating a random string which I need to insert into a template
[2013-12-05 07:26:56 -0500] coderanger: Why not just generate it in Ruby?
[2013-12-05 07:26:58 -0500] Guest28286: However if the random string has already been generated I don't have to do this again
[2013-12-05 07:27:12 -0500] Guest28286: it should be a secure random
[2013-12-05 07:27:19 -0500] coderanger: Sure
[2013-12-05 07:27:25 -0500] kumavis: so launched 'demo' chef server via vagrant, but navigating to the web ui (https://33.33.33.50/) fails
[2013-12-05 07:27:38 -0500] kumavis: ping is successful though
[2013-12-05 07:28:07 -0500] gchristensen: Guest28286: today is your lucky day! http://www.ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html
[2013-12-05 07:28:08 -0500] coderanger: file "/root/.random.key"; do owner 'root'; group 'root'; mode '600'; content SecureRandom.base64(32); end
[2013-12-05 07:28:11 -0500] coderanger: Guest28286: ^^
[2013-12-05 07:28:54 -0500] Guest28286: And to read it back into a variable ?
[2013-12-05 07:29:00 -0500] coderanger: kumavis: I think you need to enable the webui manually now
[2013-12-05 07:29:15 -0500] kumavis: coderanger oh how can i do that
[2013-12-05 07:29:15 -0500] coderanger: Guest28286: Just store it in a variable first if you need
[2013-12-05 07:29:21 -0500] coderanger: kumavis: chef-server.rb
[2013-12-05 07:30:07 -0500] Guest28286: I need the value on the next chef run as well
[2013-12-05 07:30:33 -0500] coderanger: Guest28286: One option is to store it as a node attribute
[2013-12-05 07:30:40 -0500] coderanger: depends on the exact needs
[2013-12-05 07:31:13 -0500] Guest28286: that could work
[2013-12-05 07:31:17 -0500] Guest28286: I will give this a try
[2013-12-05 07:31:27 -0500] Guest28286: thanks for your help
[2013-12-05 07:36:25 -0500] kumavis:  /etc/chef-server/chef-server.rb is not present in the chef-server vm
[2013-12-05 07:36:47 -0500] kumavis: chef-server-ctl doesnt seem to exist either, or atleast is not in path
[2013-12-05 07:37:18 -0500] kumavis: weird
[2013-12-05 07:37:48 -0500] kumavis: guess ill destroy and reup the box
[2013-12-05 07:42:34 -0500] kumavis: "stdin: is not a tty"
[2013-12-05 08:10:07 -0500] henk_: morning people. is it possible to stop a service on windows before the contents of a directory on the chef server (which will be uploaded to the client) is changed? we have to stop a certain services that blocks files from being changed
[2013-12-05 08:15:19 -0500] coderanger: henk_: No, its been talked about a lot (there was a recent mailing list thread about this) but as it stands there is no way to know if a resource will be updated without running it
[2013-12-05 08:16:08 -0500] coderanger: There is desire for this feature though, and I know some people are pondering it
[2013-12-05 08:27:27 -0500] henk_: well, than it's just the following procedure: make a run list of "stop service", "deploy directory", start service", remove 'stop service' from runlist
[2013-12-05 08:27:36 -0500] henk_: that's my best guess
[2013-12-05 08:34:19 -0500] robwatkin: Anyone in the kitchen? :-)
[2013-12-05 08:37:36 -0500] henk_: yeah, but i'm not the best chef expert., pretty noob
[2013-12-05 08:38:52 -0500] coderanger: henk_: Yeah, thats all you can do now, which kind of sucks
[2013-12-05 08:39:08 -0500] coderanger: henk_: Windows is at a disadvantage here because of how it does file locks
[2013-12-05 08:44:21 -0500] robwatkin: henk_: I'm new too, just hanging out in the kitchen while I learn.
[2013-12-05 08:52:32 -0500] GreatSUN: rehi
[2013-12-05 08:53:06 -0500] GreatSUN: good morning to everyone
[2013-12-05 08:54:56 -0500] robwatkin: morning here too! :-)
[2013-12-05 08:55:20 -0500] GreatSUN: robwatkin: hehe and where is here with you?
[2013-12-05 08:55:44 -0500] robwatkin: Windy North Wales
[2013-12-05 08:58:09 -0500] GreatSUN: robwatkin: southern germany here, will get windy tonight
[2013-12-05 08:58:10 -0500] GreatSUN: ;-)
[2013-12-05 08:58:40 -0500] robwatkin: Bist du echte Bayern?
[2013-12-05 08:58:59 -0500] robwatkin: GreatSUN: Bist du echte Bayern?
[2013-12-05 09:00:55 -0500] robwatkin: ... oops bayer... :-)
[2013-12-05 09:01:49 -0500] henk_: Holland here. and it's getting storm at the end of the working day ;)
[2013-12-05 09:02:01 -0500] GreatSUN: robwatkin: nope, me is a "Hesse"
[2013-12-05 09:02:32 -0500] GreatSUN: henk_: oh, you send us storm downwards *grrrr*
[2013-12-05 09:02:54 -0500] henk_: hahaha.... trying to push it to norway
[2013-12-05 09:04:21 -0500] robwatkin: Christmas tree has blown down :-)
[2013-12-05 09:18:23 -0500] maniac: hello guys  why this @node[:chef_environment] givex me nil but node.chef_environment gives the value i needed?
[2013-12-05 09:18:35 -0500] maniac: i guess it' not node attribute?
[2013-12-05 09:25:01 -0500] maniac: ahh i see its a method for Chef::Node obejct =)
[2013-12-05 09:25:35 -0500] coderanger: Yeah
[2013-12-05 09:25:44 -0500] coderanger: node.chef_environment
[2013-12-05 10:09:51 -0500] parshap: I am creating users using the user resource and setting the shell to zsh - however on some systems the path to zsh is `/bin/zsh` and some `/opt/local/bin/zsh` - how can I make this portable?
[2013-12-05 10:13:01 -0500] parshap: i guess instead of using the `shell` attribute on the user resource i can just execute `chsh $(which zsh)` as the newly created user
[2013-12-05 10:13:52 -0500] maniac: you could also chech if file exists and make a symlink on it
[2013-12-05 10:15:24 -0500] maniac: if !{ ::File.exists?(/bin/zsh) } ln -s /opt/local/bin/zsh /bin/zsh end
[2013-12-05 10:24:36 -0500] shay-: hey guys, i have one cookbook for webserver and one for portalserver. Now I want to use the exact same template on both, do I really have to maintain the temaplte source two times?
[2013-12-05 10:24:50 -0500] parshap: maniac: i like that except /bin is read-only in smartos local zones
[2013-12-05 10:36:03 -0500] parshap: smartos doesn't have chsh!
[2013-12-05 11:04:56 -0500] determinant_: I have instances configured in azure connected to Hosted Chef,
[2013-12-05 11:04:59 -0500] determinant_: is there a way
[2013-12-05 11:05:12 -0500] determinant_: how do i trigger the chef-client run from my workstation ?
[2013-12-05 11:05:34 -0500] determinant_: My typical scneario is when i am editing the run list
[2013-12-05 11:08:06 -0500] enbergj: knife bootstrap failed at some inconvenient step, trying to rerun chef-client or knife bootstrap will just result it failing to authenticate against the server .. now how do I tell knife to "bootstrap from scratch"?
[2013-12-05 11:53:01 -0500] determinant_: How to trigger a chef-client run on a azure machine ?
[2013-12-05 11:53:11 -0500] determinant_: other than the knife bootstrap
[2013-12-05 12:20:41 -0500] zaargy: determinant_: winrm/winexe/windows ssh
[2013-12-05 12:20:55 -0500] zaargy: or you know stuff like mcollective
[2013-12-05 13:44:57 -0500] Xeron: How long CLA approval usually takes? I've signed CLA 3 days ago and still no reply from Opscode.
[2013-12-05 13:46:30 -0500] determinant_: zaargy: I could try a knife route, is there an API way of doing it ?
[2013-12-05 14:01:10 -0500] nate`: hrm, so where does chef-server actually store user accounts?  Also where does one find the damn autogenerated password to access the data store?
[2013-12-05 14:11:57 -0500] CPS: anyone used geminabox?
[2013-12-05 14:23:01 -0500] tnarik: hi all
[2013-12-05 14:23:24 -0500] determinant_: Is there a way to trigger the chef-client run on a node from a server API ?
[2013-12-05 14:23:41 -0500] tnarik: I am trying to find a way of refreshing the environment in a chef run after the deployment of a /etc/profile.d file that sets the PATH
[2013-12-05 14:23:55 -0500] tnarik: is that possible?
[2013-12-05 14:24:53 -0500] tnarik: I need it to affect a shell_out! invocation, so another option would be passing the PATH as part of the environment run_options
[2013-12-05 14:25:05 -0500] tnarik: but I would prefer to avoid that if possible
[2013-12-05 14:32:47 -0500] pcarrier: is there an API to detect if a recipe exists?
[2013-12-05 14:33:18 -0500] pcarrier: that might sound like a bad idea, but the idea here is that each user should be able to create their own recipe, which would then get loaded, and I want to let them know if they haven't created it. it's for dev workstations
[2013-12-05 14:34:08 -0500] Tensibai: Hi there
[2013-12-05 14:34:12 -0500] pringlescan: has anyone used vagrant with chef on freebsd?
[2013-12-05 14:34:34 -0500] pringlescan: juliancdunn: I have been told you may know about this (or petecheslock)
[2013-12-05 14:37:19 -0500] CPS: this is a pretty specific problem but I'm having trouble running my chef-server as a ruby gem server
[2013-12-05 14:37:22 -0500] CPS: anyone done this?
[2013-12-05 14:48:18 -0500] oscargala: I have a client for which we developed an online application in Drupal & Symfony. They now need to create a training program for their customers where each trainee gets it's own individual sandbox to play around in. The idea is that my client maintains one master LAMP server image on a cloud service and during a training they can dynamically start/stop multiple copies/instances of that server image for each trainee. So ea
[2013-12-05 14:50:16 -0500] pabst^: if I accidentally deleted my .pem file for knife, is there a way to get it back from the chef server with out generating a new one? Or should I just generate a new one and be done with it
[2013-12-05 15:00:34 -0500] petecheslock: pringlescan - yup - i've done some freebsd/vagrant/chef/test-kitchen
[2013-12-05 15:02:07 -0500] henk_: pabst^: i think regenerating is the best way to go
[2013-12-05 15:03:26 -0500] pabst^: henk_: thanks. Thats what I ended up doing, easier than digging for a solution to a dumb question :)
[2013-12-05 15:40:07 -0500] CPS: when you use the log resource, where does chef client write logs?
[2013-12-05 15:58:12 -0500] jtimberman: CPS: Just STDOUT
[2013-12-05 15:58:31 -0500] jtimberman: CPS: unless you tell chef-client to log somewhere, you'll see a log message there too at INFO level.
[2013-12-05 15:58:52 -0500] CPS: i'm looking to write things to either a file or email
[2013-12-05 15:58:52 -0500] huuggee: \q
[2013-12-05 15:58:58 -0500] CPS: has that been done arleady?
[2013-12-05 16:27:26 -0500] royr: "The cookbook path 'dir/cookbooks doesn't exist' I have my recipes along with a metadata in dir. Getting cookbook not found, but it IS dir ??
[2013-12-05 16:30:54 -0500] daxroc1: How would you specify a cookbook version constraint to a role ?
[2013-12-05 16:33:53 -0500] gregkare: daxroc1: Environments can have cookbook version constraints, I don't think roles can (or why it would make sense)
[2013-12-05 16:34:15 -0500] gregkare: Can you explain what you want to do?
[2013-12-05 16:34:53 -0500] daxroc1: We have multiple versions in the field and when we bump a version we don't want it to go every where.
[2013-12-05 16:35:15 -0500] daxroc1: gregkare: does that make sense ?
[2013-12-05 16:35:52 -0500] gregkare: It sounds like version constraints on environments (production, staging, etc) would make sense in that case
[2013-12-05 16:36:18 -0500] daxroc1: Not so much as we would have 100s of environments ?
[2013-12-05 16:36:21 -0500] jtimberman: CPS: you could use a report handler for that at the end of the run
[2013-12-05 16:36:29 -0500] jtimberman: CPS: you can tell chef where to log with the log_location configuration option
[2013-12-05 16:36:53 -0500] gregkare: knife-spork is quite useful for that workflow, but I'm not sure why you would have hundreds of environments, so there must be something I'm missing
[2013-12-05 16:37:05 -0500] jtimberman: daxroc1: http://docs.opscode.com/essentials_cookbook_versions.html
[2013-12-05 16:37:07 -0500] jtimberman: see run list
[2013-12-05 16:37:20 -0500] jtimberman: actually: http://docs.opscode.com/essentials_cookbook_versions.html#run-lists
[2013-12-05 16:37:22 -0500] jtimberman: there :)
[2013-12-05 16:37:36 -0500] gazarsgo: anyone using chef-sentry-handler ? i'm kinda confused by the stacktraces it generates
[2013-12-05 16:37:48 -0500] gregkare: Oooh, I didn't know about that one, thanks jtimberman
[2013-12-05 16:38:30 -0500] CPS: jtimberman: for log_location, what does that look like in windows if you want to write to a file?
[2013-12-05 16:38:43 -0500] CPS: http://docs.opscode.com/config_rb_client.html isn't super helpful
[2013-12-05 16:38:50 -0500] jtimberman: log_location "c:\\mah-logs\\chef-client.log" i guess?
[2013-12-05 16:39:04 -0500] jtimberman: (I don't have any Windows systems...)
[2013-12-05 16:44:01 -0500] gchristensen: coderanger: it looks like 'depot' doesn't work in December... :P
[2013-12-05 16:45:19 -0500] CPS: jtimberman: that seems to work. can i put executable ruby code in client.rb to timestamp the logs? make an epoch time variable and use that as the filename?
[2013-12-05 16:46:17 -0500] jtimberman: The file should already get timestamps from the Chef::Log class (which uses mixlib-log)
[2013-12-05 16:47:53 -0500] CPS: jtimberman: putting a file name for that field just appends it each time chef-client runs
[2013-12-05 16:51:06 -0500] jchauncey: anyone aware of how to turn off a food critic rule for a single recipe?
[2013-12-05 16:53:13 -0500] cpuguy83: jchauncey: Fix the issue? :)
[2013-12-05 17:04:34 -0500] jchauncey: cpuguy83: that would entail fixing FC
[2013-12-05 17:04:50 -0500] jchauncey: it thinks im using the chef deploy provider and not my own
[2013-12-05 17:04:58 -0500] cpuguy83: jchauncey: Do it!
[2013-12-05 17:05:01 -0500] cpuguy83: I'm joking of course
[2013-12-05 17:05:17 -0500] cpuguy83: But would be nice if you could provide a fix for it, or at least open an issue
[2013-12-05 17:54:50 -0500] CPS: i set log_location to a file, but chef-client is still writing a lot of stuff to stdout
[2013-12-05 18:07:30 -0500] timsmith1: CPS:  when you run the client from the cli?
[2013-12-05 18:31:05 -0500] cheflevelramen: ohai chefs. Silly question. Have some trouble passing options to the rbenv_gem resource from this cookbook: https://github.com/fnichol/chef-rbenv . I'm not great a ruby. Anyone see what I'm doing wrong. I've tried a number of different ways: http://pastebin.com/x6cMEDW2
[2013-12-05 18:31:19 -0500] phutchins: hey, is there an easy way to make template_file push a template to a folder that is a symlink?
[2013-12-05 18:31:45 -0500] phutchins: or template resource rather
[2013-12-05 18:44:40 -0500] phutchins: Anyone?
[2013-12-05 18:44:54 -0500] phutchins: will teh template resource follow symlinks to write a file?
[2013-12-05 18:45:33 -0500] cheflevelramen: phutchins: It should. I can't recall if I've done it before, but I've never had trouble with it
[2013-12-05 18:48:52 -0500] sn0wb1rd: cheflevelramen: it looks like you have validation for options happening in two places; one in the underlying gem_package resource (expecting Hash) and another in the app-wind cookbook (expecting it to be a String)
[2013-12-05 18:53:23 -0500] cheflevelramen: sn0wb1rd: Hmm, that's what I was thinking too. However, I'm not doing any validation myself, so if it's being done, it would be in the chef-rbenv cookbook that I'm wrapping.
[2013-12-05 18:54:27 -0500] cheflevelramen: sn0wb1rd: I'm trying another tact of just using the gem_resource and setting the binary to the rbenv gem. Now I get this silly issue:
[2013-12-05 18:54:43 -0500] cheflevelramen: /usr/local/rbenv/shims/gem install database_cleaner -q --no-rdoc --no-ri -v "" --source http://rubygems.org/
[2013-12-05 18:55:01 -0500] cheflevelramen: that command returns exit code of 1 because of the empty -v "" string
[2013-12-05 18:55:28 -0500] determinant__: Is there a Server API client for .NET ?
[2013-12-05 18:55:39 -0500] cheflevelramen: gem_package seems to be passing in a nil value for the version (since I didn't specify). But it should not be passing in that flag at all if empty
[2013-12-05 18:59:32 -0500] gchristensen: fnichol: how on earth did you pick up kitchen.ci? I tried for several months to get a contact in the ivory coast to get one.
[2013-12-05 19:00:22 -0500] gchristensen: I wanted hifi.ci
[2013-12-05 19:00:49 -0500] fnichol: gchristensen: for the .ci, calebhailey managed to snag it
[2013-12-05 19:01:02 -0500] gchristensen: I'm very jealous :)
[2013-12-05 19:03:24 -0500] cheflevelramen: fnichol: I'm using one of your cookbooks and running into an issue. I'm Having some trouble passing options to the rbenv_gem resource from this cookbook: https://github.com/fnichol/chef-rbenv . I'm not great a ruby. Do you see what I'm doing wrong? I've tried a number of different ways: http://pastebin.com/x6cMEDW2
[2013-12-05 19:04:02 -0500] cheflevelramen: fnichol: it looks like your cookbook validates options one way, and gem_package another, and they may be in conflict. Not sure though
[2013-12-05 19:09:01 -0500] magoo: I have a really odd issue where my vagrant provision is hanging on cookbook_file[/etc/chef/ohai_plugins]
[2013-12-05 19:09:18 -0500] magoo: i've destroyed/uped, reprovisioned numerous times, you name it
[2013-12-05 19:10:22 -0500] cheflevelramen: magoo: can you paste your cookbook_file resource in something like pastebin.com or a gist?
[2013-12-05 19:23:27 -0500] magoo: cheflevelramen: ohai is just included
[2013-12-05 19:23:37 -0500] magoo: it's the upstream cookbook in original condition
[2013-12-05 19:24:20 -0500] cheflevelramen: magoo: which cookbook/recipe is it in?
[2013-12-05 19:24:51 -0500] magoo: it's in an app/_base.rb recipe
[2013-12-05 19:25:13 -0500] cheflevelramen: magoo: Sorry, what's the original cookbook/recipe that you are including?
[2013-12-05 19:26:02 -0500] magoo: hrm, hold that thought
[2013-12-05 19:26:15 -0500] magoo: i've commented out a cookbook and it passes
[2013-12-05 19:26:20 -0500] magoo: this must not have anything to do with ohai
[2013-12-05 19:26:26 -0500] cheflevelramen: magoo: cool
[2013-12-05 19:30:23 -0500] anoldhacker: Any hope for a response to https://tickets.opscode.com/browse/CHEF-4826?  I'm sure you guys were focusing on getting chef-server out, but this is a killer for us...
[2013-12-05 19:31:24 -0500] determinant__: Is there an API way to trigger chef-client run on a node from my workstation ?
[2013-12-05 19:33:15 -0500] cwj: determinant__: no, i dont think so. you can use knife ssh though.
[2013-12-05 19:34:08 -0500] determinant__: cwj: I work on windows, so the equivalent i am tring out is knife winrm,
[2013-12-05 19:34:33 -0500] determinant__: When i change my role definition in hosted chef, i want it to get auto triggered in the node,
[2013-12-05 19:34:37 -0500] determinant__: is there a way to achieve this ?
[2013-12-05 19:35:26 -0500] magoo: cheflevelramen: it appears that including postgresql::config_pgtune was breaking things
[2013-12-05 19:35:45 -0500] magoo: straced into the chef run and it looked like an infinite loop
[2013-12-05 19:38:59 -0500] cwj: determinant__: the chef-server has no special access to clients, although the Pushy
[2013-12-05 19:39:04 -0500] cwj: features might make it possible
[2013-12-05 19:39:55 -0500] cwj: i think chaining a knife winrm command to your role upload is what i would do
[2013-12-05 19:40:16 -0500] cwj: in unix something like knife role from file foo.rb && knife winrm query command'
[2013-12-05 19:41:28 -0500] determinant__: cwj: That seems to be a good place for me to start. thanks
[2013-12-05 19:41:42 -0500] cwj: no problem
[2013-12-05 19:58:05 -0500] anoldhacker: anyone here from opscode?
[2013-12-05 19:58:12 -0500] anoldhacker: s/opscode/Opscode/
[2013-12-05 20:01:10 -0500] miah: several people, but if you have questions just ask them.
[2013-12-05 20:08:38 -0500] nd__: I just noticed, the latest chef gem needs mime-types which requires ruby  1.9.2. Does anyone have a quick tip on how to get chef on ruby 1.8.3 running? Apparently that's all CentOS 6.4 offers :/
[2013-12-05 20:09:10 -0500] cg75: mime-type 1.25 and below should work
[2013-12-05 20:09:34 -0500] anoldhacker: Any hope for a response to https://tickets.opscode.com/browse/CHEF-4826? I'm sure you guys were focusing on getting chef-server out, but this is a killer for us...
[2013-12-05 20:09:47 -0500] techminer: off topic.just curious what other Chefs might be doing.  Anyone using any open source document management system they absolutely love?
[2013-12-05 20:09:51 -0500] nd__: cg75: Ok, will try that thanks
[2013-12-05 20:09:53 -0500] stormerider: nd__: use omnibus.
[2013-12-05 20:10:11 -0500] stormerider: ruby 1.8 and chef is not a good idea in general. :)
[2013-12-05 20:10:41 -0500] cg75: stormerider: agreed, but sometimes you dont have a choice
[2013-12-05 20:11:25 -0500] stormerider: cg75: that's what omnibus is for.
[2013-12-05 20:11:38 -0500] nd__: stormerider: I will try that one too running inside packer to create a box using chef-solo for provisioning via vagrant. Lots of moving parts therefor looking for the easiest solution.
[2013-12-05 20:12:43 -0500] cg75: stormerider: sure, but what if you have to have system ruby at 1.8.x
[2013-12-05 20:13:04 -0500] c_t: then use omnibus
[2013-12-05 20:13:15 -0500] c_t: it embeds a newer ruby for itself
[2013-12-05 20:13:17 -0500] cg75: *sigh*
[2013-12-05 20:13:22 -0500] cg75: nevermind
[2013-12-05 20:13:26 -0500] c_t: leaving the system ruby alone
[2013-12-05 20:13:38 -0500] cg75: yes, yes..
[2013-12-05 20:13:45 -0500] stormerider: right, just dont cross the streams.
[2013-12-05 20:14:03 -0500] c_t: otherwise I guess you could use rvm/rb_env/etc.
[2013-12-05 20:14:24 -0500] c_t: but omnibus seems less disruptive
[2013-12-05 20:14:26 -0500] c_t: fwiw
[2013-12-05 20:16:32 -0500] Thesolonius: anoldhacker: I'll check for you.
[2013-12-05 20:16:42 -0500] anoldhacker: ty
[2013-12-05 20:16:51 -0500] Thesolonius: np
[2013-12-05 20:30:33 -0500] holoway: cg75: do you not want to use omnibus because of a policy decision?
[2013-12-05 20:30:43 -0500] cg75: holoway: using omnibus
[2013-12-05 20:30:50 -0500] holoway: cg75: (not trying to push it on you - want to understand your use case)
[2013-12-05 20:30:53 -0500] cg75: but have gems that install mime-types into system ruby
[2013-12-05 20:31:03 -0500] cg75: which is 1.8.7
[2013-12-05 20:31:08 -0500] cg75: and cannot be upgraded
[2013-12-05 20:31:50 -0500] anoldhacker: ???
[2013-12-05 20:31:51 -0500] cg75: was just trying to help out nd__ anyway
[2013-12-05 20:31:54 -0500] holoway: cg75: I'm not sure I understand the problem - you have chef installed via omnibus, and you are using that chef to install gems into the system ruby, but are getting dependency problems?
[2013-12-05 20:32:02 -0500] holoway: ah
[2013-12-05 20:32:05 -0500] cg75: no
[2013-12-05 20:32:10 -0500] anoldhacker: The gems are blowing out their environment?
[2013-12-05 20:32:13 -0500] cg75: i'm not having dependeny problems
[2013-12-05 20:32:23 -0500] holoway: got it
[2013-12-05 20:32:28 -0500] holoway: the other dude was, and my reading skills suck
[2013-12-05 20:32:29 -0500] holoway: :)
[2013-12-05 20:32:34 -0500] cg75: :-)
[2013-12-05 20:32:45 -0500] holoway: you were trying to answer his *actual question*
[2013-12-05 20:32:51 -0500] holoway: the mind baffles
[2013-12-05 20:33:13 -0500] nd__: But omnisbus worked fine for me too :)
[2013-12-05 20:39:23 -0500] stormerider: holoway: hah :)
[2013-12-05 20:40:23 -0500] stormerider: that's some crazy exorcist stuff right there ;)
[2013-12-05 20:40:44 -0500] mannyt: Hey all, I am running os chef-server on ec2 and I'm encountering some odd behavior.  Most knife actions seem to work fine. Now from the webui I can list cookbooks by going to /cookbooks but if I click on a cookbook, /users/1.5.3 for example, it will just spin and return a 504 Gateway Time-out.  Does anyone know where to start with something like this?
[2013-12-05 20:41:48 -0500] kl4m: mannyt: can you try removing all the cookbooks from the server and re-upload them?
[2013-12-05 20:42:10 -0500] juliancdunn: that seems kind of nuclear
[2013-12-05 20:42:23 -0500] juliancdunn: what about checking to make sure all the services are running?
[2013-12-05 20:42:31 -0500] juliancdunn: it sounds like the bookshelf might be down
[2013-12-05 20:42:42 -0500] supercom32: So I'm trying to automate the installation of Oracle Client 11g, an I noted that when I launch the installer using quiet mode, it spawns a new window and chef just continues execution (rather than wait for the process to finish). Is there a way to avoid this?
[2013-12-05 20:42:45 -0500] mannyt: kl4m  haven't tried reuploaded everything was looking at systems issues
[2013-12-05 20:42:53 -0500] mannyt: juliancdunn:
[2013-12-05 20:43:01 -0500] mannyt: all my services are up
[2013-12-05 20:43:25 -0500] juliancdunn: mannyt: any IP addresses change? does your host still resolve in DNS?
[2013-12-05 20:43:29 -0500] anoldhacker: supercom32:  Why do you need to use quiet mode?
[2013-12-05 20:43:31 -0500] mannyt: have restarted and ran reconfigure with the chef run completing successfully
[2013-12-05 20:43:35 -0500] juliancdunn: you can also examine the nginx log to see what it's having trouble connecting to
[2013-12-05 20:44:02 -0500] supercom32: anoldhacker: well, I'm trying to do a silent install. Ie. with no user interaction.
[2013-12-05 20:44:36 -0500] anoldhacker: supercom32: I don't usually think of those as the same thing.
[2013-12-05 20:44:43 -0500] magoo: correct me if i'm wrong but setting array values in a recipe is supposed to append to the array, no?
[2013-12-05 20:44:50 -0500] magoo: or has that been reworked?
[2013-12-05 20:45:02 -0500] supercom32: anoldhacker: sorry about that confusion :P
[2013-12-05 20:46:16 -0500] mannyt: juliancdunn: haven't changed the ipaddress tho doing a curl seems to hang for a bit, let me look into it.  From the nginx logs it looked as though everything was going to 127.0.0.1 but maybe I was mistaken
[2013-12-05 20:46:45 -0500] anoldhacker: supercom32:  Once the process chef calls returns, chef is going to consider it complete.  If the process fires of another process & goes away, then there better be some sort of status that chef can spin onunless you change what you call...
[2013-12-05 20:47:56 -0500] supercom32: anoldhacker: I see. Is there a way for chef to detect when the whole process tree dies? Or maybe wait in a loop for some status to change?
[2013-12-05 20:48:55 -0500] anoldhacker: supercom32:  Its all just code.  Are you writing a provider or using someone else's?
[2013-12-05 20:49:25 -0500] supercom32: I'm just using the windows_package provider.
[2013-12-05 20:49:28 -0500] supercom32: Nothing fancy
[2013-12-05 20:50:44 -0500] anoldhacker: supercom32:  Avoiding snide comments, I would not expect that a package as complex as Oracle client to necessarily install under the default package provider.  I would look for a custom Oracle package.
[2013-12-05 20:52:11 -0500] anoldhacker: supercom32:  Or, the windows_package provider probably has a lot of hooks that can be used to drive the installer invocation.  Comparing those to the Oracle client installer's options might provide an answer.
[2013-12-05 20:52:33 -0500] supercom32: anoldhacker: I see. Well I did record all my installation options ahead of time and used those to feed it into the installer. So I assumed it would a simple matter of kicking off the install, and go. It seems to work just fine, outside of the fact that it spawns a seperate process so chef continues without waiting.
[2013-12-05 20:53:07 -0500] anoldhacker: supercom32:  You're looking for an option to change that behavior.
[2013-12-05 20:53:35 -0500] supercom32: anoldhacker: right. Maybe oracle does provide an option for that.
[2013-12-05 20:53:39 -0500] supercom32: I doubt it
[2013-12-05 20:53:46 -0500] cwj: supercom32: perhaps you could use a ruby_block resource which sleeps until a particular condition is met (e.g. a file exists) indicating the installation completed
[2013-12-05 20:53:47 -0500] anoldhacker: supercom32:  Or, you're looking to see what call the installer makes before returning, and doing THAT yourself.
[2013-12-05 20:54:14 -0500] anoldhacker: cwj:  That is quite fragile, unless documented to work.
[2013-12-05 20:54:19 -0500] supercom32: cwj & anoldhacker: Both great leads to follow up on :-)
[2013-12-05 20:55:29 -0500] cwj: checking to see if the service is listening might be a better test
[2013-12-05 20:55:43 -0500] supercom32: Right
[2013-12-05 20:55:46 -0500] cwj: there are a lot of installers that suck
[2013-12-05 20:55:50 -0500] cwj: best of luck :)
[2013-12-05 20:56:01 -0500] supercom32: Thanks for the advice! :-)
[2013-12-05 20:56:16 -0500] anoldhacker: :)
[2013-12-05 21:44:44 -0500] holoway: @magoo if you want to append to an array, you use the << syntax
[2013-12-05 21:44:56 -0500] holoway: @magoo if you set it with = , it will replace
[2013-12-05 21:45:01 -0500] holoway: (this is how it has always been)
[2013-12-05 21:59:41 -0500] fveillette: Anybody that found a way to put chef log in windows event viewer?
[2013-12-05 22:03:43 -0500] kevinbur_: If I'm running chef inside virtualbox, is there a way in Chef to determine whether a folder is being shared outside the VM?
[2013-12-05 22:13:15 -0500] anoldhacker: kevinbur_:  I'm having a hard time imagining a circumstance where that would be the right thing to do.  Why do you care?
[2013-12-05 22:13:26 -0500] anoldhacker: Or rather, what are you trying to do?
[2013-12-05 22:13:37 -0500] kevinbur_: Hmm.
[2013-12-05 22:13:52 -0500] kevinbur_: Sometimes I install a package via RPM, sometimes I share it from the host OS
[2013-12-05 22:14:06 -0500] kevinbur_: however if it's shared, I need to make install a few things to get the shared dep working properly
[2013-12-05 22:14:53 -0500] anoldhacker: So you don't care if it is shared, you care if it was installed through RPM or found already on your file system.
[2013-12-05 22:15:06 -0500] kevinbur_: Yeah
[2013-12-05 22:15:15 -0500] kevinbur_: I guess I could check File.exists?
[2013-12-05 22:15:15 -0500] kevinbur_: or
[2013-12-05 22:15:19 -0500] kevinbur_: er rpm -qa probably the best way
[2013-12-05 22:15:23 -0500] kevinbur_: file.exists not idempotent
[2013-12-05 22:15:27 -0500] anoldhacker: ;)
[2013-12-05 22:15:54 -0500] anoldhacker: File#exists? is a key to idempotency.
[2013-12-05 22:16:23 -0500] anoldhacker: You probably want to do both.
[2013-12-05 22:16:34 -0500] anoldhacker: If it found through rpm, you are done.
[2013-12-05 22:17:01 -0500] anoldhacker: If not, you check if some file relative to the package exists.   If it does, add the scaffolding.
[2013-12-05 22:17:07 -0500] anoldhacker: If not, rpm install.
[2013-12-05 22:19:24 -0500] anoldhacker: (only add the scaffolding if the scaffolding is not in placebut file resources already have that)
[2013-12-05 22:21:05 -0500] supercom32: Hrm... Is this the proper way to use the not operator? 'while !::Win32::Service.exists?("MyService")'
[2013-12-05 22:22:21 -0500] kumavis_: on the first run of the chef-server with vagrant+berkshelf (https://github.com/opscode-cookbooks/chef-server#demo-chef-server-with-vagrant-and-berkshelf) I get an error ''stdin: is not a tty" i https://gist.github.com/kumavis/9bd401ac735095ad939b
[2013-12-05 22:22:39 -0500] anoldhacker: supercom32: Assuming there is a space between ! and ::, yes.
[2013-12-05 22:23:09 -0500] kumavis_: and then the process hangs
[2013-12-05 22:23:20 -0500] kumavis_: not sure how to debug this
[2013-12-05 22:23:33 -0500] supercom32: anoldhacker: Strange. When I try to run my cookbook it hangs at compiling. But if I remove my ! it compiles just fine.
[2013-12-05 22:23:51 -0500] anoldhacker: kumavis_: I see the error every time on Mac, but not the hang..
[2013-12-05 22:25:03 -0500] kumavis_: anoldhacker: does it continue immediately after that? or is there a significant delay before the next output?
[2013-12-05 22:25:06 -0500] anoldhacker: supercom32:  "hangs at compiling" won't happen on a syntax error.  I expect an infinite loop.  I can actually get ruby to segfault in rspec with let(:foo){ foo }
[2013-12-05 22:25:30 -0500] anoldhacker: kumavis_:  checking...
[2013-12-05 22:26:24 -0500] supercom32: anoldhacker: Well my while loop for 'if a service is not running, then sleep for a second and check again'. But why would that effect the cookbook? it's just compiling, not running yet?
[2013-12-05 22:27:44 -0500] anoldhacker: supercom32:  Are you sure?  Unless that while is inside a block inside the resource block, it executes during compile.
[2013-12-05 22:29:07 -0500] supercom32: anoldhacker: DOH! I had no idea that was the case :-)
[2013-12-05 22:29:24 -0500] anoldhacker: kumavis_:  continues immediately for me.
[2013-12-05 22:29:44 -0500] kumavis_: anoldhacker: hmm, mine just sits there
[2013-12-05 22:29:47 -0500] anoldhacker: supercom32:  I was implicitly reminded of that yesterday, and read the source an hour ago.
[2013-12-05 22:30:14 -0500] redondos: what's a more idiomatic way of extracting "two" from this string? "one.two.three.four" - this is what i'm doing: c.sub(/(.\w+){2}$/, "").sub(/.*\./, "")
[2013-12-05 22:31:07 -0500] spheromak:  "one.two.three.four".split('.')[1]
[2013-12-05 22:31:19 -0500] redondos: thanks
[2013-12-05 22:31:29 -0500] anoldhacker: Well, 3, anyway. :P
[2013-12-05 22:31:51 -0500] spheromak: redondos: depends on how flexable you want that to be ;)
[2013-12-05 22:32:16 -0500] anoldhacker: I'm just following the functionality he described...
[2013-12-05 22:32:52 -0500] redondos: yeah, -3 is what i wanted. thanks both
[2013-12-05 22:59:03 -0500] trappiste: hey guys, need some direction here -> https://gist.github.com/anonymous/7815563
[2013-12-05 22:59:24 -0500] trappiste: the database cookbook is download
[2013-12-05 22:59:47 -0500] trappiste: can provide other pieces of config as needed
[2013-12-05 23:00:04 -0500] trappiste: so why wouldn't the resource be loaded?
[2013-12-05 23:04:13 -0500] BriGuy: how can I have Chef tell me if a service is running? I have to run a command have a service is started, but need to wait until it finishes starting. I can't find anything on this
[2013-12-05 23:05:31 -0500] trappiste: BriGuy: does this help you? http://enrico.sartorello.org/blog/2013/01/chef-and-automated-service-discovery/
[2013-12-05 23:08:27 -0500] BriGuy: trappiste: I don't see anything about getting the status of a service in that
[2013-12-05 23:18:54 -0500] trappiste: fixed my issue by taking care of some missing dependency statements, have another interesting issue
[2013-12-05 23:19:27 -0500] trappiste: the php default recipe fails to find its own cookbook
[2013-12-05 23:19:35 -0500] supercom32: Is there a way to check if a process is running or not with chef?
[2013-12-05 23:19:46 -0500] supercom32:  I mean with a pre-build resource.
[2013-12-05 23:19:54 -0500] BriGuy: I was just asking that too!
[2013-12-05 23:20:17 -0500] supercom32: Ah
[2013-12-05 23:21:17 -0500] jmickle: *yawn&
[2013-12-05 23:44:59 -0500] TrinitronX: So earlier I got a deprecation warning from `knife rackspace server create` during bootstrap about using encrypted_data_bag_secret.  It mentioned that in the future to use: knife[:secret_file]
[2013-12-05 23:45:31 -0500] TrinitronX: So I changed that in my knife config, but now `knife data bag upload from file [...]` uploads all data bags as encrypted
[2013-12-05 23:45:39 -0500] TrinitronX: is that expected behavior of this option?
[2013-12-05 23:46:14 -0500] parshap: I'm trying to get the path to zsh before creating a user account. Is there a better way of doing this? https://gist.github.com/parshap/7816222
[2013-12-05 23:51:47 -0500] TrinitronX: @parshap: that looks like the best way to me

[2013-12-12 00:11:56 -0500] clakeb: I'm getting an error when installing a remote_file.
[2013-12-12 00:11:57 -0500] coderanger: allaire: application_* cookbooks are supposed to be the answer, but they need a lot of lovin'
[2013-12-12 00:12:00 -0500] clakeb: "ERROR: "http://www.google.com/url?q=http%3A%2F%2Fwww.marksimonson.com%2Fassets%2Fcontent%2Ffonts%2FAnonymousPro-&sa=D&sntz=1&usg=AFQjCNFnZHPvMYEklhQXHN5NOe47ENTWYw\#{node[:asprov][:anonpro][:version]}.zip" is not a valid `source` parameter for remote_file. `source` must be an absolute URI or an array of URIs.
[2013-12-12 00:12:43 -0500] coderanger: clakeb: You copy-pasta'd a URL from google results
[2013-12-12 00:12:43 -0500] allaire: coderanger: Application cookbooks per this definition? http://www.prashantrajan.com/posts/2013/06/leveling-up-chef-best-practices/
[2013-12-12 00:12:54 -0500] coderanger: allaire: No, as in github.com/poise
[2013-12-12 00:13:12 -0500] clakeb: yeah I am provisioning my mac and sent the error through hangouts
[2013-12-12 00:13:15 -0500] clakeb: hold on
[2013-12-12 00:13:18 -0500] coderanger: allaire: The broader definition came after I wrote those :-)
[2013-12-12 00:13:40 -0500] clakeb:   ERROR: "http://www.google.com/url?q=http%3A%2F%2Fwww.marksimonson.com%2Fassets%2Fcontent%2Ffonts%2FAnonymousPro-&sa=D&sntz=1&usg=AFQjCNFnZHPvMYEklhQXHN5NOe47ENTWYw\#{node[:asprov][:anonpro][:version]}.zip" is not a valid `source` parameter for remote_file. `source` must be an absolute URI or an array of URIs.
[2013-12-12 00:13:45 -0500] clakeb: did it again
[2013-12-12 00:13:53 -0500] coderanger: clakeb: Looks like there is un-interpolated Ruby in there
[2013-12-12 00:14:00 -0500] coderanger: make sure you are using " and not '
[2013-12-12 00:14:05 -0500] clakeb: ahh
[2013-12-12 00:14:09 -0500] clakeb: that is it
[2013-12-12 00:14:12 -0500] coderanger: (unlike JS and Python, the two are not always interchangable)
[2013-12-12 00:14:13 -0500] clakeb: why is that the case
[2013-12-12 00:14:20 -0500] clakeb: I come from php
[2013-12-12 00:14:30 -0500] coderanger: Like with Perl, double-quotes interpolate and single-quotes don't
[2013-12-12 00:14:51 -0500] clakeb: coderanger: Thank you
[2013-12-12 00:14:56 -0500] coderanger: Pretty sure Ruby copied it from Perl, which copied it from Bash, which copied it from /bin/sh
[2013-12-12 00:15:13 -0500] coderanger: Beyond that I wasn't born yet, so I can't help ya :)
[2013-12-12 00:15:17 -0500] allaire: coderanger: so you need the chef-repo to deploy your app if you do everything in chef?
[2013-12-12 00:15:28 -0500] coderanger: allaire: No?
[2013-12-12 00:15:36 -0500] coderanger: allaire: Not sure what you are asking
[2013-12-12 00:16:54 -0500] allaire: coderanger: Like, capistrano is bundled in my application
[2013-12-12 00:16:58 -0500] allaire: chef is not
[2013-12-12 00:17:14 -0500] allaire: it's under its own repository, not linked to my app
[2013-12-12 00:17:17 -0500] coderanger: allaire: Sure, but Chef is just the management layer
[2013-12-12 00:17:32 -0500] coderanger: Thats like saying that openssh is also not bundled with your app
[2013-12-12 00:17:41 -0500] coderanger: its part of your command and control system, not the app
[2013-12-12 00:17:53 -0500] allaire: Yeah I know
[2013-12-12 00:18:06 -0500] allaire: but my question is, how do I make chef aware of where my app is?
[2013-12-12 00:18:31 -0500] coderanger: Its in the recipe code, the specifics depend on exactly what you are doing
[2013-12-12 00:18:39 -0500] coderanger: deploying from git, svn, deb packages, etc
[2013-12-12 00:18:50 -0500] allaire: got it, just found the ruby version, lookin'
[2013-12-12 00:18:58 -0500] allaire: what is poise exactly? :o
[2013-12-12 00:19:55 -0500] coderanger: allaire: Brand name for my "do chef better" stuffs, currently a cookbook and some in-progress docs
[2013-12-12 00:20:17 -0500] coderanger: Easier to have a single name for it than "the stuff coderanger has been yelling about for years"
[2013-12-12 00:20:36 -0500] allaire: :)
[2013-12-12 00:20:40 -0500] allaire: true that
[2013-12-12 00:21:13 -0500] allaire: followed ;)
[2013-12-12 00:22:05 -0500] allaire: I really enjoy the learnchef microsite btw
[2013-12-12 00:22:18 -0500] allaire: finally a good step-by-step learning place :)
[2013-12-12 00:22:37 -0500] coderanger: Heh, thats all sethvargo and nathenharvey
[2013-12-12 00:23:11 -0500] coderanger: And yeah, it covers the basics well
[2013-12-12 00:23:32 -0500] coderanger: My issue right now is how to get people from "I know how to use chef" on the path to mastery
[2013-12-12 00:23:43 -0500] allaire: I'm runing with chef solo currently (using knife-solo), but considering to use chef server with Entreprise chef
[2013-12-12 00:24:05 -0500] allaire: I fee like chef-solo is getting less and less traction
[2013-12-12 00:24:19 -0500] allaire: maybe it's just me...
[2013-12-12 00:24:28 -0500] coderanger: Eh, it is, but I have very specific reasons for disliking it
[2013-12-12 00:24:35 -0500] coderanger: which are different than most people :)
[2013-12-12 00:25:07 -0500] allaire: rent on, I'm curiousi
[2013-12-12 00:25:24 -0500] allaire: I would be curious to hear your thoughts about Ansible too ;)
[2013-12-12 00:26:00 -0500] miah: ansible = shitty ssh wrapper
[2013-12-12 00:26:19 -0500] miah: higher level abstractions are required to move to cfgmgt v 3
[2013-12-12 00:26:36 -0500] coderanger: Heh, basically data bags are bad because they do nothing you can't do better in recipe code, roles are bad because they lack versioning (see also: the berkshelf way), search is bad because it should use an AP data store for stateful data (ZK, etcd, et al)
[2013-12-12 00:26:50 -0500] coderanger: So that leaves two things, environments and cookbooks
[2013-12-12 00:27:17 -0500] coderanger: I basically just use my chef server as an artifact repository for releasing cookbooks
[2013-12-12 00:27:22 -0500] miah: just wrote a class that will untar / decompress gzip files, using Ruby stdlib. its certainly not perfect. but no more 'execute "tar"' bullshit
[2013-12-12 00:27:28 -0500] coderanger: and use its version constraint solving capabilities
[2013-12-12 00:27:47 -0500] mwhooker: my alert for ZK went off so I figured I'd hope in and plug https://github.com/SimpleFinance/chef-zookeeper/blob/master/resources/node.rb
[2013-12-12 00:27:53 -0500] miah: pretty close to being able to replace ark with it
[2013-12-12 00:28:04 -0500] coderanger: as for ansible, its simple for small setups but lacks the expressive power to scale to bigger networks
[2013-12-12 00:28:09 -0500] mwhooker: I think heavywater has a better one
[2013-12-12 00:28:25 -0500] allaire: coderanger: So you prefer chef solo to chef server?
[2013-12-12 00:28:37 -0500] coderanger: allaire: No, I used server, just I only use very select pieces of it
[2013-12-12 00:28:57 -0500] allaire: roger that
[2013-12-12 00:28:57 -0500] coderanger: namely I use it as a place to store released versions of cookbooks, and as a depsolver for those releases
[2013-12-12 00:30:09 -0500] allaire: coderanger: data bags are still useful for encrypted stuff I guess
[2013-12-12 00:30:21 -0500] coderanger: allaire: Nope
[2013-12-12 00:30:29 -0500] coderanger: allaire: Encrypted data bags are almost always wrong
[2013-12-12 00:30:35 -0500] coderanger: I really need to write up this rant
[2013-12-12 00:31:37 -0500] coderanger: allaire: tl;dr version, check out citadel and chef-vault, both have heavy limitations but are more likely what you want
[2013-12-12 00:32:29 -0500] lawnchair: coderanger, do you store credential files in data bags?
[2013-12-12 00:32:48 -0500] lawnchair: or private keys
[2013-12-12 00:33:07 -0500] allaire: cant find citadel
[2013-12-12 00:33:22 -0500] allaire: and chef-fault is encrypted databags without databags? :P
[2013-12-12 00:33:39 -0500] allaire: nv
[2013-12-12 00:33:43 -0500] allaire: nvm, just read
[2013-12-12 00:34:01 -0500] coderanger: allaire: citadel is on github.com/balanced-cookbooks
[2013-12-12 00:34:27 -0500] coderanger: Will probably move over to the poise org eventually when its more tested :)
[2013-12-12 00:34:56 -0500] allaire: these things are a bit too advanced for me I think :)
[2013-12-12 00:35:10 -0500] allaire: I've read about roles and how it's better to keep them lean tho
[2013-12-12 00:35:16 -0500] coderanger: See also: there is a big skill gap between "basic chef user" and "chef user on the path to mastery"
[2013-12-12 00:35:16 -0500] coderanger: :-(
[2013-12-12 00:35:40 -0500] allaire: yeah
[2013-12-12 00:35:43 -0500] allaire: chef is hard
[2013-12-12 00:36:13 -0500] coderanger: Operations and infra is hard, chef just can't always hide that ;-)
[2013-12-12 00:36:14 -0500] jtimberman: someone capture this chat and summarize it as a blog post ;)
[2013-12-12 00:36:35 -0500] coderanger: jtimberman: All my rants will be up on the poise site over time
[2013-12-12 00:36:47 -0500] coderanger: jtimberman: Or the Balanced blog ;-)
[2013-12-12 00:37:00 -0500] jtimberman: :)
[2013-12-12 00:37:14 -0500] coderanger: jtimberman: First doc I'm working on is just definition library cookbooks vs. application vs wrapper vs berkshelf-style-role
[2013-12-12 00:37:22 -0500] coderanger: er, definition of
[2013-12-12 00:38:33 -0500] allaire: Chef is hard because there is "no right way" to do something
[2013-12-12 00:38:44 -0500] allaire: you can do it 3221313 ways
[2013-12-12 00:38:49 -0500] allaire: but most or bad
[2013-12-12 00:38:50 -0500] allaire: :P
[2013-12-12 00:39:07 -0500] coderanger: Not that I ever toted the Opscode party line, but now I am getting even more opinionated ;-)
[2013-12-12 00:39:32 -0500] coderanger: So stay tuned
[2013-12-12 00:39:47 -0500] coderanger: Between Poise and Berkshelf I think a solid workflow and ontology is growing
[2013-12-12 00:39:57 -0500] allaire: @coderanger: I will, I followed on twitter
[2013-12-12 00:40:16 -0500] drogoh: I found it easier to get chef going in my organization, being a perl shop
[2013-12-12 00:41:08 -0500] drogoh: simply because there is no One True Way
[2013-12-12 00:42:30 -0500] coderanger: drogoh: I think thats a lot of why Opscode hasn't really backed a particular workflow, though Berkshelf is leaking more into the official stuff (which is good)
[2013-12-12 00:42:56 -0500] allaire: I like Berkshelf so far
[2013-12-12 00:43:10 -0500] drogoh: Berkshelf is indeed good stuff
[2013-12-12 00:44:45 -0500] MrBIOS: what's wrong with this, syntactically?
[2013-12-12 00:44:51 -0500] MrBIOS: directory node['storm']['root_dir'] do
[2013-12-12 00:44:51 -0500] MrBIOS: blahblah
[2013-12-12 00:45:26 -0500] gregkare: no end?
[2013-12-12 00:46:15 -0500] allaire: coderanger: Any good resources you would share that I can go through after I'm done reading learningchef?
[2013-12-12 00:46:23 -0500] allaire: and watching the screencasts
[2013-12-12 00:46:41 -0500] coderanger: allaire: Check out Jamie Windsor's keynote from chefconf about The Berkshelf Way
[2013-12-12 00:46:56 -0500] coderanger: That has some good bits about that workflow and why it is the way it is
[2013-12-12 00:47:15 -0500] coderanger: And after that check out of the FoodFightShow archives
[2013-12-12 00:47:51 -0500] allaire: thanks
[2013-12-12 00:47:53 -0500] allaire: bookmarked both
[2013-12-12 00:54:17 -0500] jmickle: coderanger
[2013-12-12 00:54:36 -0500] jmickle: how are you
[2013-12-12 01:01:28 -0500] coderanger: jmickle: Not bad, on the cusp of jenkins stuff working
[2013-12-12 01:01:35 -0500] kennon:  allaire: somewhere in there read \\
[2013-12-12 01:01:37 -0500] kennon: er
[2013-12-12 01:01:38 -0500] kennon: http://www.getchef.com/blog/2013/11/19/chef-roles-arent-evil/
[2013-12-12 01:02:12 -0500] allaire: kennon: thx
[2013-12-12 01:02:34 -0500] jmickle: hehe
[2013-12-12 01:02:40 -0500] jmickle: just hadn't heard from you in a while
[2013-12-12 01:02:45 -0500] jmickle: figured id bug ya
[2013-12-12 01:10:07 -0500] bluethundr: hey all.. I have a new chef server I'm working with and trying to learn
[2013-12-12 01:10:31 -0500] bluethundr: knife is working really well. I am able to knife all servers in a small collection of 5 hosts
[2013-12-12 01:11:25 -0500] bluethundr: but when I add  cookbooks to my chef repo with kniofe cookbook site download and knife cookbook site install, and commit my changes to the chef repo, my chef server is not aware of the new cookbooks in the gui
[2013-12-12 01:11:37 -0500] bluethundr: how can I make the chef server aware of the new cookbooks?
[2013-12-12 01:11:40 -0500] bluethundr: thanks
[2013-12-12 01:12:28 -0500] jbz: bluethundr: chef server is not integrated with git.  You must manually upload new cookbooks to the chef server.
[2013-12-12 01:15:40 -0500] bluethundr: jbz oh ok... is there a directory the chef server is looking for them to be stored in?
[2013-12-12 01:18:56 -0500] someara_: you have to use the chef-server api
[2013-12-12 01:19:17 -0500] someara_: chef-server is a cookbook artifact repository. you can have multiple versions of a given cookbook
[2013-12-12 01:20:04 -0500] bluethundr: ok good to know
[2013-12-12 01:20:14 -0500] bluethundr: are there some good docs on how to do this?
[2013-12-12 01:20:22 -0500] someara_: knife cookbook upload
[2013-12-12 01:20:26 -0500] someara_: or berks install
[2013-12-12 01:20:27 -0500] someara_: brb
[2013-12-12 01:20:32 -0500] bluethundr: ok thnaks
[2013-12-12 02:20:41 -0500] judd7: ohai chefs - anyone dealing with centos/rhel's new "Software Collections" yet?
[2013-12-12 02:22:49 -0500] judd7: wrapping lots of commands in "scl enable"
[2013-12-12 04:07:55 -0500] miah: sup
[2013-12-12 05:06:58 -0500] flaccid: someara_: hello can i talk to you about openvpn?
[2013-12-12 05:24:37 -0500] flaccid: its ok, i sent another email and commented on the wiki
[2013-12-12 07:16:42 -0500] stevenator: does anyone have ohai chops that can help me? I am trying to disable the linux/block_device plugin with Ohai::Config[:disabled_plugins] = ["block_device"] in my client.rb but I am still seeing the plugin load in the chef-client run
[2013-12-12 07:17:15 -0500] stevenator: maybe it is the plugin path I need? Ohai::Config[:disabled_plugins] = ["linux/block_device"]
[2013-12-12 07:33:31 -0500] stevenator: for posterity, the name of the nested ohai plugin is done using class syntax Ohai::Config[:disabled_plugins] = ["linux::block_device"]
[2013-12-12 08:07:06 -0500] cubed: had a question about berkshelf/cookbook dependency resolution conflicts: my application requires "application = 3.0.0" but application_ruby requires "application ~> 4.0.0". what would be the "right" way to resolve this?
[2013-12-12 08:08:45 -0500] Garo_: After resolving my problem and figuring out a tricky Chef internal detail http://imgur.com/CFZyaqC
[2013-12-12 08:53:45 -0500] henk76: guys, is there anyway to import a sql database dump with chef? I've used the 2 options on http://pastebin.com/gYg3F9pU  but the import breaks (using the first options) at a delimiter, and the other option doesn't do anything
[2013-12-12 08:56:53 -0500] slicknick: neither of those look to me like they would or should be importing or writing to the databse
[2013-12-12 08:57:58 -0500] henk76: morning slicknick. The first one actually does import things. Only the first few lines. but at one point it stops
[2013-12-12 08:58:30 -0500] slicknick: may be more sql help you need ..
[2013-12-12 08:58:48 -0500] slicknick: have you tried removing chef from the equation with the same file
[2013-12-12 08:59:16 -0500] henk76: the it runs smoothly.
[2013-12-12 09:00:26 -0500] st_iron: hello my friends
[2013-12-12 09:00:48 -0500] st_iron: what is the "best" way to install opensource chef 11 server on my debian wheezy system?
[2013-12-12 09:00:54 -0500] henk76: i believe it has something to do with the delimiter.
[2013-12-12 09:01:13 -0500] henk76: st_iron, have you looked at the chef site?
[2013-12-12 09:01:38 -0500] st_iron: of course, I see there are multiple choices
[2013-12-12 09:02:04 -0500] st_iron: I am interested in how the most of you do it
[2013-12-12 09:02:38 -0500] henk76: i use the installer ;)
[2013-12-12 09:03:22 -0500] st_iron: henk76: do you mean the omnibus installer? on debian?
[2013-12-12 09:04:14 -0500] henk76: well i use ubuntu. but i think the method is the same
[2013-12-12 09:04:19 -0500] slicknick: henk76: are you using the mysql cookbook? if so make sure mysql gem. chef resources is the way to go tho
[2013-12-12 09:07:17 -0500] henk76: yeah i'm using the mysql and database cookbook. And it does work, up to a certain point. but i'll go and fiddle around some more ;)
[2013-12-12 09:08:57 -0500] slicknick: try https://github.com/opscode-cookbooks/mysql
[2013-12-12 09:10:36 -0500] henk76: But this cookbook is only for maintaining client and server mysql. or am i wrong?
[2013-12-12 09:12:01 -0500] slicknick: yeah my bad
[2013-12-12 09:12:04 -0500] slicknick: https://github.com/opscode-cookbooks/database
[2013-12-12 09:12:07 -0500] slicknick: strike me out
[2013-12-12 09:14:48 -0500] henk76: wb slicknick. I can't find a method of importing a complete sql file. that's the strangest thing. I would guess that there is a way to bootstrap a database from chef.
[2013-12-12 10:17:54 -0500] clocKwize: Hey, I'm trying to install java but the cookbook is trying to install a package that doesn't exist, trying to override this: node['java']['openjdk_packages'] but its ignoring it :/
[2013-12-12 10:21:07 -0500] StefanS: Is there a quick and easy way to get a nodes network gateway inside a recipe? like the ip node['ipaddress']?
[2013-12-12 10:21:32 -0500] StefanS: Or do I have to iterate through all node attributes?
[2013-12-12 10:22:56 -0500] workmad3: StefanS: you need to drill down to the appropriate interface, I believe
[2013-12-12 10:23:26 -0500] StefanS: workmad3: any simple way to do that in ruby?
[2013-12-12 10:23:55 -0500] StefanS: workmad3: Is there a helper function for iterating through?
[2013-12-12 10:24:49 -0500] workmad3: d'oh, I forgot about this one (I was looking up the bit in my chef server :) )
[2013-12-12 10:24:56 -0500] workmad3: node['network']['default_gateway']
[2013-12-12 10:25:19 -0500] StefanS: workmad3: awesome! thanks
[2013-12-12 10:26:10 -0500] workmad3: you also have node['network']['default_interface'] that you can use for other details in this way: 'interface = node['network']['default_interface']; node['network']['interfaces'][interface]['netmask']' etc
[2013-12-12 10:27:07 -0500] StefanS: workmad3: thanks good to know.
[2013-12-12 10:27:59 -0500] workmad3: clocKwize: how are you trying to override it?
[2013-12-12 10:31:36 -0500] clocKwize: workmad3: https://gist.github.com/brightbits/30af8e2f8716c5f41260
[2013-12-12 10:33:17 -0500] clocKwize: it still logs this though: apt-get -q -y install openjdk-7-jre-headless=7u25-2.3.10-1ubuntu0.12.04.2 returned 100, expected 0
[2013-12-12 10:33:46 -0500] clocKwize: oh ah, that is actually the right package, but no idea what =7u25-2.3.10-1ubuntu0.12.04.2 is
[2013-12-12 10:34:31 -0500] workmad3: that's the version
[2013-12-12 10:35:33 -0500] clocKwize: hmm, how do I get rid of that :p
[2013-12-12 10:35:41 -0500] workmad3: you don't, it's correct that it's there :)
[2013-12-12 10:35:57 -0500] workmad3: most likely, it's that no apt-get update has been run
[2013-12-12 10:36:14 -0500] workmad3: I'd suggest pulling in the apt cookbook
[2013-12-12 10:36:50 -0500] clocKwize: ah ok
[2013-12-12 10:36:54 -0500] clocKwize: cheers
[2013-12-12 10:37:08 -0500] workmad3: add 'recipe[apt]' to your runlist then, and it'll make sure that the apt cache is updated daily
[2013-12-12 10:37:30 -0500] clocKwize: nice
[2013-12-12 10:38:00 -0500] workmad3: (well, it'll run apt-get update if that hasn't occured in the last day :) )
[2013-12-12 10:38:06 -0500] clocKwize: thanks, I'm giving it a go now :)
[2013-12-12 10:48:11 -0500] clocKwize: workmad3: that worked, thank you :)
[2013-12-12 10:48:13 -0500] henk76: guys, i'm trying to import a sql script. i've uploaded with chef in d:\temp\test2.sql  and use the following statement: http://pastebin.com/gYg3F9pU  But nothing gets imported.
[2013-12-12 10:48:56 -0500] workmad3: clocKwize: woo :)
[2013-12-12 10:49:33 -0500] henk76: but when i manually use source d:/temp/test2.sql;  it works fine
[2013-12-12 10:51:24 -0500] henk76: hey lars ;)
[2013-12-12 10:55:06 -0500] workmad3: henk76: this is using the opscode database cookbook, yeah?
[2013-12-12 10:57:17 -0500] henk76: yeah
[2013-12-12 10:57:46 -0500] workmad3: henk76: may I draw your attention to https://github.com/opscode-cookbooks/database#examples then ;) and the example near the bottom of how to execute SQL from a file...
[2013-12-12 10:58:32 -0500] workmad3: henk76: specifically, that the 'sql' attribute needs the SQL, not a command to load it, and that in order to use the 'sql' attribute, you need to use 'action :query'
[2013-12-12 10:59:43 -0500] henk76: yeah, i tried that. but trying to execute SQL from file can't handle DELIMITER statements. it stops when it reads that line
[2013-12-12 11:01:58 -0500] henk76: oh, off to lunch. be right back
[2013-12-12 11:35:03 -0500] Blizzik: Hi, is it possible to run something like "adduser --disabled-login git" using the user method?
[2013-12-12 11:36:03 -0500] stormerider: Blizzik: set the shell to /bin/false?
[2013-12-12 11:38:57 -0500] Blizzik: stormerider: Ah, I'm not sure if it does exactly same thing, because it seems that the --disabled-login adds a special flag to the account
[2013-12-12 11:39:29 -0500] stormerider: exactly the same thing, probably not, but if they have a shell of /bin/false, they're still not going to be able to log in
[2013-12-12 11:40:25 -0500] fclausen: hello all - I am trying to install the pg gem with postgresql::ruby on RHEL 6 but it fails because there is no "libpq-dev" package on Red Hat. Am I doing something wrong or is this a bug?
[2013-12-12 11:40:26 -0500] stormerider: if you want an exact duplicate scenario, use an execute block
[2013-12-12 11:40:31 -0500] workmad3: stormerider: a shell of /bin/false may still allow a user to execute commands via SSH
[2013-12-12 11:40:39 -0500] Blizzik: stormerider: I will, thank you
[2013-12-12 11:40:44 -0500] workmad3: Blizzik: user "git"; action :lock; end may do it
[2013-12-12 11:41:07 -0500] workmad3: Blizzik: or, if you're adding the user at the same time, user "git"; action [:add, :lock]; end
[2013-12-12 11:41:19 -0500] stormerider: workmad3: bwah? since when did that get allowed? i thought sshd read /etc/shells like everything else did
[2013-12-12 11:41:57 -0500] workmad3: stormerider: ssh foo@bar.com -e "some_command" doesn't always do a logon prompt or load a shell
[2013-12-12 11:42:36 -0500] stormerider: ill have to do some testing, huh.
[2013-12-12 11:44:23 -0500] Blizzik: Yeah, I just want to setup a git user so he cannot run any commands, except ones I specify in authorized_keys (There will be just a command to authorize users based on their ssh keys)
[2013-12-12 11:44:55 -0500] workmad3: Blizzik: you're setting up a git repo server, basically ;)
[2013-12-12 11:45:04 -0500] Blizzik: workmad3: Exactly
[2013-12-12 11:45:24 -0500] workmad3: Blizzik: any particular reason you're not using something like gitolite?
[2013-12-12 11:45:47 -0500] gregkare: Not Invented Here maybe?
[2013-12-12 11:45:52 -0500] workmad3: :)
[2013-12-12 11:46:20 -0500] gregkare: You can look up how Gitolite (and other git servers) do it even if you want to roll your own :)
[2013-12-12 11:46:25 -0500] workmad3: or maybe gitlab
[2013-12-12 11:47:25 -0500] Blizzik: workmad3: Gitolite seems to be over-complicated for my needs. I basically need handle all the authorizations through my application (web-based) and found that gitlab-shell (Based on gitlabhg developed by GitHub) seems to be a right tool for me :)
[2013-12-12 11:49:22 -0500] Blizzik: Sorry, thought it's developed by GitHub itself, but it seems it's not. Sorry for that :X
[2013-12-12 11:49:38 -0500] jpoole: it was developed by gitlab
[2013-12-12 11:49:44 -0500] jpoole: fwiw
[2013-12-12 11:50:38 -0500] clocKwize: so, I've got a role, it configures and set up a server for me. there is some stuff in the role that specifies the name of an elastic search cluster, etc which I want to change depending on the environment, like if its a staging box I'm booting up, i want it to be in a different elastic search cluster to production, how can I achieve this?
[2013-12-12 11:51:02 -0500] jpoole: i would use data bags clockwize
[2013-12-12 11:51:08 -0500] jpoole: but that's me
[2013-12-12 11:51:21 -0500] jpoole: there is also environments
[2013-12-12 11:51:33 -0500] jpoole: are you using hosted chef? or chef server?
[2013-12-12 11:51:39 -0500] clocKwize: I'm using hosted chef on opscode
[2013-12-12 11:51:46 -0500] gregkare: I'd override an attribute in the staging environment
[2013-12-12 11:51:59 -0500] T5u: Gaaaaarrr stuck. I am trying to modify the following template/recipie for the logstash cook book. I was going to create a new recipie however found out that it's best if I simply modify the template for the logstash cofiguration. However I am now stuck as I am not sure how to logically parse things so that each node gets a different set of input's, filters and outputs based on the node number.
[2013-12-12 11:52:10 -0500] workmad3: clocKwize: or use node attributes in the environment
[2013-12-12 11:52:36 -0500] clocKwize: how would I go about that? currently I have in my role override_attributes({"elasticsearch" => {"cluster_name" => "es-staging"}})
[2013-12-12 11:52:59 -0500] workmad3: clocKwize: you've created an environment file, yeah?
[2013-12-12 11:53:00 -0500] T5u: for example if a set of servers started up have hostname test1, test2, test3 each one will hvae a different input and the same output. However. I don't know how to code it so that it can identify this marker. I know it's in the hostname
[2013-12-12 11:53:07 -0500] clocKwize: nope
[2013-12-12 11:53:29 -0500] workmad3: clocKwize: ok... so in your chef-repo, create a file 'environments/staging.rb'
[2013-12-12 11:53:49 -0500] clocKwize: ok
[2013-12-12 11:54:00 -0500] workmad3: clocKwize: add to it a name, a description, and move that override_attributes line over to it
[2013-12-12 11:54:29 -0500] workmad3: clocKwize: then 'knife environment from file environments/staging.rb' to upload it to your server, and assign a staging node to it
[2013-12-12 11:55:16 -0500] gregkare: http://docs.opscode.com/essentials_environments.html#environment-attributes
[2013-12-12 11:55:31 -0500] clocKwize: like ta
[2013-12-12 11:55:35 -0500] clocKwize: -like
[2013-12-12 11:55:37 -0500] clocKwize: thanks :D
[2013-12-12 11:55:54 -0500] workmad3: clocKwize: basically, in an environment you can do things like lock to specific cookbook versions, set environment-specific config, etc
[2013-12-12 11:56:13 -0500] clocKwize: cool
[2013-12-12 11:56:51 -0500] workmad3: clocKwize: and personally, I'd suggest you read up and make use on environments and forget roles ;)
[2013-12-12 11:57:05 -0500] workmad3: *use of
[2013-12-12 11:57:10 -0500] clocKwize: ok
[2013-12-12 11:57:24 -0500] clocKwize: what if I have mutliple roles for the same environment? :)
[2013-12-12 11:57:32 -0500] clocKwize: like es server, varnish server..
[2013-12-12 11:57:32 -0500] gregkare: Once you're comfortable with environments, take a look at the knife-inspect plugin (you'll have to use it from the GitHub repo if you're using Chef 11)
[2013-12-12 11:57:37 -0500] gregkare: oops
[2013-12-12 11:57:42 -0500] gregkare: My brain doesn't work anymore
[2013-12-12 11:57:43 -0500] workmad3: clocKwize: roles are, IMO, bad methods of re-use... they're not versionable
[2013-12-12 11:57:54 -0500] gregkare: I mean the knife-spork plugin, and it does work with Chef 11!
[2013-12-12 11:58:16 -0500] gregkare: It gives you commands for bumping cookbook versions, promoting in environments, etc
[2013-12-12 11:58:20 -0500] workmad3: clocKwize: ok, so you're trying out something new in your dev environment with elasticsearch... so you alter the recipes in the role, add and change some config...
[2013-12-12 11:58:23 -0500] clocKwize: gregkare: I'll keep that in mind :P
[2013-12-12 11:58:28 -0500] workmad3: clocKwize: oh crap, you just edited your production environment :P
[2013-12-12 11:58:49 -0500] workmad3: clocKwize: so you 'solve' this by having elastic-search-staging, elastic-search-production...
[2013-12-12 11:58:58 -0500] jpoole: i generaly name my roles, role['dev_webserver']
[2013-12-12 11:59:12 -0500] jpoole: instead of role['webserver'] to sorta get around that
[2013-12-12 11:59:26 -0500] workmad3: jpoole: I've gone for server-cookbooks in my latest infrastructure
[2013-12-12 11:59:41 -0500] workmad3: jpoole: so my webserver has a single recipe - hedtek_webserver::default
[2013-12-12 12:00:09 -0500] workmad3: jpoole: then I can version that cookbook, and lock the environment based on my server cookbook versions
[2013-12-12 12:00:17 -0500] jpoole: ahh
[2013-12-12 12:00:18 -0500] jpoole: yeah
[2013-12-12 12:00:22 -0500] jpoole: that's a bit cleaner too
[2013-12-12 12:00:48 -0500] jpoole: using berks as well?
[2013-12-12 12:01:03 -0500] workmad3: jpoole: also means that my transitive dependencies can trickle-down in the environment... I don't need to lock my environment to apt 2.3.0, because my hedtek_webserver locks to that, and I'm locked to 0.2.0 of that cookbook :)
[2013-12-12 12:01:07 -0500] workmad3: yeah, using berks
[2013-12-12 12:01:21 -0500] jpoole: righton
[2013-12-12 12:02:07 -0500] jpoole: you ahve alot of blog posts to write it sounds ;)
[2013-12-12 12:02:12 -0500] workmad3: yeah, I really do :P
[2013-12-12 12:02:16 -0500] jpoole: :)
[2013-12-12 12:02:43 -0500] jpoole: do you transition nodes between environments?
[2013-12-12 12:02:47 -0500] workmad3: the company devblog has been rather silent recently
[2013-12-12 12:03:12 -0500] workmad3: no, because I've got separate encrypted databag secrets per environment
[2013-12-12 12:03:20 -0500] jpoole: right
[2013-12-12 12:03:28 -0500] workmad3: so a transition of a node from staging to production would require a fair bit of manually re-working
[2013-12-12 12:04:11 -0500] jpoole: im arguing at my company that we ahve nodes in dev, test, stage, prod and rebuild them each time we need to deploy/test
[2013-12-12 12:04:19 -0500] jpoole: but they want me to look at migrating
[2013-12-12 12:04:26 -0500] workmad3: bleh
[2013-12-12 12:04:26 -0500] jpoole: but same problem, i have encrypted data bags
[2013-12-12 12:04:35 -0500] jpoole: it's really because they're being frugal
[2013-12-12 12:04:45 -0500] jpoole: i'll iron fist it out.
[2013-12-12 12:04:50 -0500] workmad3: yeah :)
[2013-12-12 12:05:11 -0500] workmad3: the question is - how quickly can you rebuild a node from scratch vs how quickly can you transition a node?
[2013-12-12 12:05:21 -0500] jpoole: same amount of time really
[2013-12-12 12:05:29 -0500] jpoole: minus a few seconds for instance creation
[2013-12-12 12:05:31 -0500] workmad3: ah, for me it's probably about twice as long to transition it :)
[2013-12-12 12:05:44 -0500] jpoole: i've kept things pretty lean
[2013-12-12 12:06:01 -0500] jpoole: but over time, i suppose as my cookbooks get bloaty, it may take some time
[2013-12-12 12:06:30 -0500] workmad3: well, it's only really because I copy the secrets across during bootstrapping and once I've bootstrapped a node and disabled root SSH login, re-bootstrapping in a new environment becomes a PITA
[2013-12-12 12:06:43 -0500] workmad3: so I need to manually resync the databag secrets
[2013-12-12 12:06:54 -0500] jpoole: that's also my problem.
[2013-12-12 12:06:57 -0500] jpoole: well simular
[2013-12-12 12:07:17 -0500] workmad3: so bootstrapping a node takes (in my time) about 5 seconds, while transitioning a node takes about 5 minutes :)
[2013-12-12 12:07:31 -0500] jpoole: amazon user-data script has to have a default set of creds to bootstrap itself, and chef, etc...
[2013-12-12 12:07:33 -0500] workmad3: also, I don't need to argue with anyone about which approach to take :)
[2013-12-12 12:07:33 -0500] masterkorp: Guys what is the best way to save the result of bash script to the recipe
[2013-12-12 12:07:52 -0500] masterkorp: can i pass a variable to the recipe and then use it ?
[2013-12-12 12:08:00 -0500] jpoole: foo =  `bash -c "uptime"`
[2013-12-12 12:08:32 -0500] masterkorp: and with the bash block ?
[2013-12-12 12:08:43 -0500] jpoole: yup, preferred
[2013-12-12 12:09:15 -0500] masterkorp: on the code ?
[2013-12-12 12:09:26 -0500] masterkorp: hmm, i am not visualizing it
[2013-12-12 12:09:35 -0500] masterkorp: can you give me an example please ?
[2013-12-12 12:09:37 -0500] jpoole: finding an example
[2013-12-12 12:09:38 -0500] jpoole: sec
[2013-12-12 12:09:52 -0500] jpoole: maybe a bit dirty..
[2013-12-12 12:09:56 -0500] jpoole: hwoever..
[2013-12-12 12:10:14 -0500] clocKwize: If I do knife role from file..
[2013-12-12 12:10:18 -0500] workmad3: oh, that's something I've been meaning to ask... is it possible to suppress the content-diff output of file resources?
[2013-12-12 12:10:20 -0500] clocKwize: will that update my servers with the changes?
[2013-12-12 12:10:35 -0500] workmad3: clocKwize: have you got the chef-client daemonized on your servers?
[2013-12-12 12:10:43 -0500] clocKwize: I... assume so :)
[2013-12-12 12:10:46 -0500] masterkorp: clocKwize: yeah
[2013-12-12 12:10:47 -0500] jpoole: code << EOH cat /etc/passwd | wc -l >> /some/dir/file EOH
[2013-12-12 12:10:52 -0500] clocKwize: how can I check?
[2013-12-12 12:10:56 -0500] workmad3: clocKwize: as it'll update the next time chef-client is run
[2013-12-12 12:10:59 -0500] jpoole: then you could assign my var = `cat /some/dir/file`
[2013-12-12 12:11:07 -0500] masterkorp: oh, like that
[2013-12-12 12:11:12 -0500] jpoole: it's dirty.
[2013-12-12 12:11:12 -0500] workmad3: clocKwize: well, it doesn't daemonize by default...
[2013-12-12 12:11:16 -0500] jpoole: i think there is a better way
[2013-12-12 12:11:18 -0500] clocKwize: chef gets installed on the server
[2013-12-12 12:11:19 -0500] jpoole: trying to find it
[2013-12-12 12:11:19 -0500] masterkorp: so you can really pass it directly
[2013-12-12 12:11:25 -0500] masterkorp: *can't
[2013-12-12 12:11:43 -0500] workmad3: clocKwize: there's the chef-client recipe from opscode that can set it up though, using a variety of methods (my preferred method is runit)
[2013-12-12 12:11:47 -0500] jpoole: i think it's out of context
[2013-12-12 12:11:51 -0500] jpoole: when chef runs the block
[2013-12-12 12:11:58 -0500] jpoole: but there is ways of setting env variables, etc
[2013-12-12 12:12:00 -0500] jpoole: and reading frm them
[2013-12-12 12:12:43 -0500] workmad3: jpoole: File.read("/some/dir/file"), rather than `cat /some/dir/file` surely? ;)
[2013-12-12 12:12:44 -0500] clocKwize: ok ta.
[2013-12-12 12:12:54 -0500] jpoole: work of coure ;)
[2013-12-12 12:13:06 -0500] jpoole: there is better ways ;)
[2013-12-12 12:13:14 -0500] jpoole: s/coure/course
[2013-12-12 12:13:19 -0500] workmad3: :)
[2013-12-12 12:13:23 -0500] masterkorp: i got that
[2013-12-12 12:13:25 -0500] masterkorp: thanks
[2013-12-12 12:13:54 -0500] jpoole: you could do a ruby block i suppose
[2013-12-12 12:14:25 -0500] jpoole: shit, shower time
[2013-12-12 12:14:25 -0500] jpoole: bbl
[2013-12-12 12:14:31 -0500] workmad3: yeah, I'd probably do a ruby_block with MixLib::ShellOut
[2013-12-12 12:14:44 -0500] masterkorp: hmm
[2013-12-12 12:14:45 -0500] workmad3: err, Chef::ShellOut even
[2013-12-12 12:14:50 -0500] masterkorp: that would be nice
[2013-12-12 12:14:54 -0500] jpoole: http://stackoverflow.com/questions/17696991/passing-variables-between-chef-resources
[2013-12-12 12:14:57 -0500] masterkorp: i just need to check if a user exists
[2013-12-12 12:14:59 -0500] jpoole: that sorta shows how to do it
[2013-12-12 12:15:59 -0500] workmad3: masterkorp: why not check if the user exists in node["etc"]["passwd"] ?
[2013-12-12 12:16:19 -0500] masterkorp: oh wait theres is a attribute for that ?
[2013-12-12 12:16:28 -0500] workmad3: 'if node["etc"]["passwd"].keys.include?("some_user")' ...
[2013-12-12 12:17:00 -0500] workmad3: or just 'if node["etc"]["passwd"]["some_user"]
[2013-12-12 12:17:14 -0500] masterkorp: wow that makes it so much cleaner !
[2013-12-12 12:17:22 -0500] workmad3: ;)
[2013-12-12 12:17:30 -0500] masterkorp: I can just have a not_if statement and I am done
[2013-12-12 12:17:33 -0500] masterkorp: thank you sir
[2013-12-12 12:18:04 -0500] workmad3: :)
[2013-12-12 12:18:45 -0500] masterkorp: knife node show node -a etc proves yout statement
[2013-12-12 12:19:09 -0500] masterkorp: just for anyone that will be greping these irc logs
[2013-12-12 12:19:25 -0500] workmad3: I tend to browse through the chef webui for that, but yeah :)
[2013-12-12 12:22:07 -0500] masterkorp: i just love the cli flex
[2013-12-12 12:22:18 -0500] clocKwize: do I need to specify role[base] in my run list or is it a special role that is automatically included?
[2013-12-12 12:23:09 -0500] workmad3: you need to specify it
[2013-12-12 12:23:12 -0500] clocKwize: ok :)
[2013-12-12 12:23:16 -0500] clocKwize: just convention then
[2013-12-12 12:23:25 -0500] workmad3: masterkorp: yeah, I love my CLI too :)
[2013-12-12 12:24:07 -0500] workmad3: masterkorp: I just find a GUI slightly easier for browsing, CLI easier to drill to exactly what I want once I know what it is
[2013-12-12 12:25:05 -0500] masterkorp: i agree with that
[2013-12-12 12:26:09 -0500] workmad3: masterkorp: once you mentioned needing to know if a user existed, I went 'hmm, I think there's an attribute for that? it's not users... hmm, what's under etc? oh, passwd... there we go' :)
[2013-12-12 12:27:04 -0500] masterkorp: yeah it makes sense
[2013-12-12 12:27:27 -0500] masterkorp: i've been away out of the chef scene for way too long
[2013-12-12 12:27:35 -0500] workmad3: :)
[2013-12-12 12:28:00 -0500] clocKwize: so many chef related browser tabs ..
[2013-12-12 12:38:39 -0500] maxmanders: I'm dumping a databag into a file; do I still need to use the template resource with an empty file e.g. <%= some_var %>; or is there a way to short circuit that use-case?
[2013-12-12 12:41:39 -0500] maxmanders: Ah, File resource with content option
[2013-12-12 12:43:14 -0500] jpoole: workmad3, do you have a suggestive way to enumerate nodes in an autoscaling group with amazon instances?
[2013-12-12 12:43:36 -0500] jpoole: ie, i want to say, based on the node, name my instances role01.env.domain.com
[2013-12-12 12:43:42 -0500] jpoole: role02, etc
[2013-12-12 12:44:30 -0500] jpoole: where role will be web, or some tla
[2013-12-12 12:44:37 -0500] jpoole: (three letter acronym)
[2013-12-12 12:44:58 -0500] jpoole: this is for dns name, or amazon tag name
[2013-12-12 12:46:27 -0500] jpoole: msg me i'm heading to work, will catchup there.
[2013-12-12 12:52:25 -0500] clocKwize: can I run things directly in a role file?
[2013-12-12 12:52:42 -0500] clocKwize: like execute "blah" do ...
[2013-12-12 12:52:43 -0500] daos: what's a good resource/tutorial for updating the chef server?
[2013-12-12 12:52:52 -0500] daos: i'm on 11 already but i think i am behind stable
[2013-12-12 12:55:14 -0500] stormerider: daos: if you're using the omnibus server packages, you just update the package
[2013-12-12 12:55:30 -0500] daos: i am using the omnibus
[2013-12-12 12:55:38 -0500] daos: does that mean just reinstalling thru the omnibus?
[2013-12-12 12:56:01 -0500] stormerider: then just download the deb/rpm and run dpkg/rpm to update it
[2013-12-12 12:56:07 -0500] daos: cool
[2013-12-12 12:56:13 -0500] daos: will give it a shot--thanks
[2013-12-12 12:56:20 -0500] stormerider: np
[2013-12-12 13:22:59 -0500] clocKwize: once I have a box set up in ec2 just the way I like it, can I snapshot it and boot future ones from that AMI, so all the slow/heavy lifting is already done and it just changes configs etc?
[2013-12-12 13:23:35 -0500] clocKwize: or will that break because the configurations etc are already set up?
[2013-12-12 13:24:59 -0500] daos: clocKwize: i haven't tried it but you could try boooting up the AMI then changing the node name in client.rb and re-registering with the chef server
[2013-12-12 13:25:19 -0500] Runkle: clocKwize: i think you ar would be better off having chef do everything.
[2013-12-12 13:25:25 -0500] stormerider: clocKwize: yes, that's fairly common to do. you may need to delete configs for some apps but in general it works fine
[2013-12-12 13:25:35 -0500] clocKwize: well, I just mean changing the ami to use in the knife create server
[2013-12-12 13:25:39 -0500] stormerider: Runkle: not if you want to do autoscaling
[2013-12-12 13:25:53 -0500] Runkle: stormerider: thats true.
[2013-12-12 13:26:07 -0500] clocKwize: so it'll go to install chef, will already be there, will run apt update, already up to date, go to install elastic search, already there, update all config files, restart service etc
[2013-12-12 13:26:08 -0500] Runkle: but i guess for long lived machines, i'd rather maintain them fully with chef.
[2013-12-12 13:26:29 -0500] clocKwize: maybe its ok to wait 20 mins for a machine to configure
[2013-12-12 13:26:32 -0500] stormerider: what i do is have chef manage everything, then after a lot of updates, i bake a new AMI so that chef has less to do.
[2013-12-12 13:26:43 -0500] clocKwize: stormerider: thats what I'm getting at
[2013-12-12 13:26:50 -0500] stormerider: chef still being the authoritative source
[2013-12-12 13:27:34 -0500] clocKwize: is there anything special to do? like will config files be overwritten if they are already there?
[2013-12-12 13:27:52 -0500] daos: stormerider: do you bake a new AMI out of an existing chef-managed node?
[2013-12-12 13:27:58 -0500] daos: or do youbuild it up from scratch
[2013-12-12 13:28:11 -0500] stormerider: from a managed node
[2013-12-12 13:28:24 -0500] daos: how do you handle client/node name conflicts?
[2013-12-12 13:28:32 -0500] daos: user data script ?
[2013-12-12 13:29:01 -0500] stormerider: i delete the client.pem and have an rc.local script that generates the client.rb and runs chef-client to register
[2013-12-12 13:29:34 -0500] daos: cool
[2013-12-12 13:29:41 -0500] daos: i've been thinking about doing the same
[2013-12-12 13:29:48 -0500] stormerider: more specifically, i delete the pem and log files via a prep-for-ami script :)
[2013-12-12 13:30:02 -0500] stormerider: no sense cloning old logs from a previous server
[2013-12-12 13:30:07 -0500] daos: my chef run installs a lot of stuff from source (mostly perl modules) so it takes a _LONG_ time
[2013-12-12 13:30:10 -0500] daos: yeah that makes sense
[2013-12-12 13:30:32 -0500] stormerider: i hear you. installing java, etc, here.
[2013-12-12 13:30:41 -0500] daos: :)
[2013-12-12 13:30:57 -0500] daos: are you using ASG in ec2?
[2013-12-12 13:32:05 -0500] stormerider: asg?
[2013-12-12 13:32:29 -0500] daos: sorry
[2013-12-12 13:32:31 -0500] daos: auto scale groups
[2013-12-12 13:32:40 -0500] stormerider: ah, no, but using elastic beanstalk
[2013-12-12 13:32:53 -0500] daos: cool
[2013-12-12 13:41:03 -0500] daos: i'm trying to view a cookbook in the Chef Server web view and getting the following error "ERROR: undefined method `close!' for nil:NilClass" -- this is just happening for 1 of my cookbooks
[2013-12-12 13:45:43 -0500] jpoole: Morning chefs.
[2013-12-12 13:47:48 -0500] Runkle: morning.
[2013-12-12 13:48:28 -0500] Runkle: curious question for mac users : do you treat your machine like a unix box and actually do your chef work on it, or do you do that on a remote serversomewhere? and if its remote, do you use something like sublimetext + sshfs, or do you use vim/emacs ON the server ?
[2013-12-12 13:49:01 -0500] jpoole: i fire up vagrant instances to mirror my servers
[2013-12-12 13:49:10 -0500] jpoole: with knife vagrant
[2013-12-12 13:49:24 -0500] jpoole: develop on my mac, git commit, upload to chef server, etc
[2013-12-12 13:49:29 -0500] Runkle: i mean the actual recipe development and all that. like where does your git checkout of your chefrepo live?
[2013-12-12 13:49:36 -0500] Runkle: cool cool.
[2013-12-12 13:49:48 -0500] jpoole: i test on vagrant first
[2013-12-12 13:49:50 -0500] jpoole: before commiting
[2013-12-12 13:49:57 -0500] jpoole: and i can also test on vagrant, before uploading
[2013-12-12 13:50:03 -0500] Runkle: i was in this habbit for years of only working remotly, and i'm trying todo more directly on my mac.
[2013-12-12 13:50:12 -0500] Runkle: with vagrant are you using virtualbox ?
[2013-12-12 13:50:18 -0500] jpoole: yes sir
[2013-12-12 13:50:24 -0500] jpoole: however, for some ec2 specific recipes
[2013-12-12 13:50:28 -0500] jpoole: i'll do vagrant ec2
[2013-12-12 13:50:35 -0500] jpoole: i also do stuff on esx as well with knife
[2013-12-12 13:50:38 -0500] Runkle: cool. does it work with fusion at all that you know of (i'm also googling, but i like conversation)
[2013-12-12 13:50:47 -0500] jpoole: i think it does now
[2013-12-12 13:51:12 -0500] jpoole: i didn't want to buy fusion, so i just do it via esxi on a local desktop in my office
[2013-12-12 13:51:22 -0500] jpoole: mainly cause i like my ram
[2013-12-12 13:51:31 -0500] jpoole: and i dont like other shit chewing into it
[2013-12-12 13:51:31 -0500] jpoole: :)
[2013-12-12 13:52:22 -0500] Runkle: yeah, i have an iMac that is dedicated to just running vms.
[2013-12-12 13:52:31 -0500] Runkle: but i could easily slap virtual box on it as well.
[2013-12-12 13:52:33 -0500] jpoole: well, this mbpro is pretty beefy
[2013-12-12 13:52:40 -0500] jpoole: 512 ssd, 16gb memory.
[2013-12-12 13:52:50 -0500] jpoole: but i'm still a bitch and use it all for me
[2013-12-12 13:53:24 -0500] Runkle: i'm guessing virtualbox is the favoured/easiest way to get vagrant up and running?
[2013-12-12 13:53:36 -0500] jpoole: it was how it was originally written
[2013-12-12 13:53:41 -0500] jpoole: so it has the most exposure
[2013-12-12 13:54:06 -0500] Runkle: cool. last time iused vbox was about 5 years ago and the io was "not great" is it more competitive now? not that i need rocket speed, but it was painful at times
[2013-12-12 13:54:23 -0500] jpoole: the only thing i find annoying with vagrant
[2013-12-12 13:54:26 -0500] jpoole: or virtualbox
[2013-12-12 13:54:33 -0500] jpoole: is the network interface binding or lackthereof
[2013-12-12 13:54:44 -0500] jpoole: i can't for the life of me get the airport to bridge on my mac
[2013-12-12 13:54:59 -0500] jpoole: but the ethernet/thunderbolt display ethernet works just fine in bridging
[2013-12-12 13:55:12 -0500] jpoole: it maybe a Mavericks thing, or a virtualbox thing
[2013-12-12 13:55:15 -0500] jpoole: maybe it's fixed now
[2013-12-12 13:55:20 -0500] jpoole: i haven't bothered to check
[2013-12-12 13:55:30 -0500] jpoole: i just make sure i'm only doing vagrant stuff when hard wired in
[2013-12-12 13:55:57 -0500] jpoole: i picked up the O'Reilly 'Vagrant up and running' book a few weeks back
[2013-12-12 13:56:11 -0500] jpoole: really sped up my vagrant fundamentals.
[2013-12-12 13:56:15 -0500] Runkle: nice.
[2013-12-12 13:56:24 -0500] Runkle: i'm really just beginngin chef now, vagrant will come in a bit.
[2013-12-12 13:56:35 -0500] jpoole: since i am mainly in ec2 world, it's nice to not always spin up ec2 instances for quick tests
[2013-12-12 13:56:55 -0500] Runkle: righto.
[2013-12-12 13:56:56 -0500] daos: jpoole: you don't keep dev instances around to test with
[2013-12-12 13:56:57 -0500] daos: ?
[2013-12-12 13:57:04 -0500] daos: i'm also exclusively in ec2
[2013-12-12 13:57:10 -0500] jpoole: ddos tear em down when i'm done to save costs.
[2013-12-12 13:57:18 -0500] daos: ah
[2013-12-12 13:57:25 -0500] jpoole: also i tend to 'rebuild' clusters when deploying to production
[2013-12-12 13:57:35 -0500] daos: the netflix way :)
[2013-12-12 13:57:41 -0500] jpoole: ie, cluster1 = current prod, i'll build cluster2 and then re-attach
[2013-12-12 13:57:46 -0500] daos: yea
[2013-12-12 13:57:56 -0500] daos: it's a good model
[2013-12-12 13:57:59 -0500] jpoole: yup, i also use chaos monkey, gorilla, and soon kong
[2013-12-12 13:58:00 -0500] jpoole: ;)
[2013-12-12 13:58:18 -0500] jpoole: but i am a team of 1
[2013-12-12 13:58:22 -0500] jpoole: so sometimes it's pointlesss
[2013-12-12 13:58:22 -0500] daos: haha me too
[2013-12-12 13:58:40 -0500] daos: everyone else on the team is software engineer
[2013-12-12 13:58:44 -0500] jpoole: ditto
[2013-12-12 13:58:44 -0500] daos: no one thinks about ops :)
[2013-12-12 13:58:55 -0500] jpoole: we're thrown the code and told to 'make it work'
[2013-12-12 13:58:57 -0500] Runkle: we... don't even need a cluster for what we do. so really i get to do this stuff so i can learn for my next job :) everything here "runs fine" atm.
[2013-12-12 13:59:20 -0500] jpoole: when i was hired, they didn't think they needed someone for this role
[2013-12-12 13:59:29 -0500] daos: haha
[2013-12-12 13:59:32 -0500] daos: how did u get hired?
[2013-12-12 13:59:33 -0500] jpoole: that's abruptly been an eyeopening aha moment for them
[2013-12-12 13:59:40 -0500] jpoole: friend of mine is a software engineer
[2013-12-12 13:59:49 -0500] Runkle: hehe, when i hwas hired they were running tomcat with 256 megs of ram on a old sparc.
[2013-12-12 13:59:54 -0500] jpoole: he fucked around with aws for a month, i came in, in half a day did more than he did in a month
[2013-12-12 14:00:04 -0500] daos: oh lol
[2013-12-12 14:00:08 -0500] Runkle: i love replacing people that are like that.
[2013-12-12 14:00:11 -0500] daos: so you immediately proved them wrong
[2013-12-12 14:00:14 -0500] Runkle: stuck in their ways from 18 years ago.
[2013-12-12 14:00:16 -0500] jpoole: well no
[2013-12-12 14:00:17 -0500] daos: i as going to say
[2013-12-12 14:00:28 -0500] jpoole: I just basically am geared for aws/dev-ops
[2013-12-12 14:00:36 -0500] Runkle: daos: do you have a link to what you meant when you said "the netflix way" up above?
[2013-12-12 14:00:37 -0500] jpoole: they are scala developers
[2013-12-12 14:01:01 -0500] jpoole: i dont know java, dont want to, barley know enough ruby (enough to be dangerous) but I am a battle hardened ops/systems engineer
[2013-12-12 14:01:28 -0500] jpoole: Runkle actually.
[2013-12-12 14:01:38 -0500] jpoole: i have a really good video on failure fridays from Pager Duty
[2013-12-12 14:01:44 -0500] jpoole: which talks about netflix a bit
[2013-12-12 14:02:01 -0500] jpoole: http://blog.pagerduty.com/2013/11/failure-friday-at-pagerduty/?utm_source=december_2013_newsletter&utm_medium=email&utm_campaign=newsletter
[2013-12-12 14:02:07 -0500] Runkle: sigh. keep throwing these sites at me. i feel like i miss out on a lot of good ops/devops blogs, cause none of my real life friends are nerds :P
[2013-12-12 14:02:09 -0500] jpoole: you guys use pagerduty?
[2013-12-12 14:02:23 -0500] jpoole: real life friends? what are those...
[2013-12-12 14:02:33 -0500] jpoole: you guys right?
[2013-12-12 14:02:34 -0500] jpoole: ;)
[2013-12-12 14:02:37 -0500] Runkle: they're the ones that wear the lulu lemon pants.
[2013-12-12 14:03:43 -0500] stormerider: vagrant works with esx as well?
[2013-12-12 14:05:55 -0500] daos: Runkle: referring to the deployment strategy explained here: http://techblog.netflix.com/2012/06/asgard-web-based-cloud-management-and.html
[2013-12-12 14:06:02 -0500] Runkle: thanks.
[2013-12-12 14:06:04 -0500] daos: their blog is an amazing wealth of information and tools
[2013-12-12 14:06:12 -0500] Runkle: yeah i'm reading about chaos monkey now
[2013-12-12 14:06:15 -0500] daos: if you're looking for good reading material
[2013-12-12 14:06:21 -0500] Runkle: are either of you 2 allowed to say where you work?
[2013-12-12 14:06:29 -0500] daos: i work at DuckDuckGo
[2013-12-12 14:06:39 -0500] Runkle: you crazy bastard
[2013-12-12 14:07:11 -0500] Runkle: do you guys play duck duck go all day at the cubicle farm?
[2013-12-12 14:07:21 -0500] daos: haha there is no cubicle farm
[2013-12-12 14:07:28 -0500] jpoole: Runkle lol@lululemon
[2013-12-12 14:07:33 -0500] daos: i work from home
[2013-12-12 14:07:51 -0500] jpoole: i applied at lulu lemon for a systems admin job, just so i could possibly see some nice apple bottoms while i work
[2013-12-12 14:08:09 -0500] Runkle: bless you sir.
[2013-12-12 14:08:25 -0500] jpoole: storm no, but there is a knife esx plugin
[2013-12-12 14:08:47 -0500] jpoole: stormerider: http://blog.milesburton.com/2013/04/13/the-secret-wish-to-be-devops/
[2013-12-12 14:08:55 -0500] jpoole: esxi + chef
[2013-12-12 14:10:51 -0500] daos: http://pgexercises.com/questions/basic/index.html
[2013-12-12 14:11:04 -0500] stormerider: thanks, jpoole
[2013-12-12 14:11:30 -0500] stormerider: apple bottoms? im hoping that doesnt refer to what im thinking it does
[2013-12-12 14:11:55 -0500] jpoole: not baby arms holding apples, just apple bottoms ;)
[2013-12-12 14:24:19 -0500] samp: hello, i'm looking for some help with the java cookbook.
[2013-12-12 14:24:40 -0500] samp: i have a role that is overriding the java.install_flavor attribute
[2013-12-12 14:24:54 -0500] samp: but java_home is getting set without taking the install_flavor into account
[2013-12-12 14:33:43 -0500] pengunix: hi
[2013-12-12 14:33:51 -0500] pengunix: Can chef execute all unrelated operations in parallel?
[2013-12-12 14:34:07 -0500] pengunix: When there are several execs which are unrelated, will they be executed together?
[2013-12-12 14:38:09 -0500] stormerider: i believe it's serial, but i could be mistaken.
[2013-12-12 14:39:07 -0500] tscanausa: pengunix: chef is serial, but if you write your own cookbooks you can hack around it.
[2013-12-12 14:39:33 -0500] Runkle: do you guys run internal ntp, or just use ntp.org ?
[2013-12-12 14:40:03 -0500] helfire: hey, anyone used partial search much? does it return a Ruby Hash? and has anyone used an array of ruby hashes array = [], x = partial_search(foo), array.push(x) in a template
[2013-12-12 14:40:14 -0500] helfire: have sets of app servers i want to configure nginx upstream to hit
[2013-12-12 14:49:01 -0500] pengunix: aha
[2013-12-12 14:57:15 -0500] Blizzik: Hey, just a question. I created a databag called ssh and put there a root.json containing {'id': 'root', 'private_key': 'some key'} do I access this key with data_bag_item[ssh::root]['private_key'] in my cookbook template?
[2013-12-12 14:57:59 -0500] glen: hi. how do you handle dead cookbooks in community site?
[2013-12-12 14:59:04 -0500] glen: for example, this is empty cookbook (does absolutely nothing) http://community.opscode.com/cookbooks/lighttpd
[2013-12-12 14:59:09 -0500] glen: and occupies good name
[2013-12-12 14:59:30 -0500] gregkare: It's my understanding a decision hasn't been made yet, so dead cookbooks keep the good names
[2013-12-12 15:00:23 -0500] glen: the author never kept his promise, and i believe he just ditched whole cookbook
[2013-12-12 15:00:41 -0500] glen: i.e used something else like nginx or apache
[2013-12-12 15:00:54 -0500] glen: but can cookbook ownership be transferred?
[2013-12-12 15:03:13 -0500] gregkare: I think ownership can be transfered, but you can't upload new versions
[2013-12-12 15:03:14 -0500] gregkare: https://github.com/fnichol/chef-rvm/issues/117
[2013-12-12 15:03:37 -0500] glen: gregkare: eh, why upload forbidden then?
[2013-12-12 15:03:59 -0500] gregkare: I don't know, this is a weird situation, Fletcher is the owner of the rvm cookbook but there's still only the old one: http://community.opscode.com/cookbooks/rvm
[2013-12-12 15:04:47 -0500] gregkare: Maybe someone from Opscode^WChef knows
[2013-12-12 15:05:28 -0500] glen: but can original author give up authorship? for example destroy the cookbook?
[2013-12-12 15:05:36 -0500] glen: in that case there would be no need to enforce some policy
[2013-12-12 15:05:48 -0500] glen: i.e if it's voluntering action
[2013-12-12 15:05:57 -0500] gregkare: Agreed, I guess anything would be better than the current situation
[2013-12-12 15:06:20 -0500] glen: the outcome is that no cookbooks gets upload to crappy site
[2013-12-12 15:06:31 -0500] glen: or stupid names like lighttpd2 cookbooks
[2013-12-12 15:06:45 -0500] glen: which could be totally wrong considering  there's another project lighttpd2
[2013-12-12 15:07:03 -0500] workmad3: the worry would be older installs that still use the original rvm cookbook
[2013-12-12 15:07:20 -0500] glen: are those automatically updated?
[2013-12-12 15:07:36 -0500] workmad3: I'd personally say screw them :) and yeah, the community cookbook API could do with a cleanup...
[2013-12-12 15:07:37 -0500] gregkare: Yeah it's a problem if you use Berkshelf or Librarian
[2013-12-12 15:07:45 -0500] glen: and what if there is no compatibility issue (previous version was empty, or new version is fullyu compatible)
[2013-12-12 15:08:10 -0500] glen: and in any case, any cookbook can break itself naturally with evolution, i.e major version update
[2013-12-12 15:08:16 -0500] glen: so the compatibility shouldn't be a new issue
[2013-12-12 15:08:52 -0500] workmad3: glen: when it's a completely different cookbook, it's somewhat different as then you can end up with the same 'version' being completely different
[2013-12-12 15:08:52 -0500] gregkare: I think it's more of a problem than with for example RubyGems, there's a whole lot more forking going on in cookbooks, people abandoning software stacks, etc
[2013-12-12 15:09:15 -0500] glen: workmad3: it can be made compatible, i.e new version that is bigger or so
[2013-12-12 15:09:37 -0500] workmad3: glen: very hard to enforce that on community contributions
[2013-12-12 15:09:47 -0500] glen: like in linux, systemd changed version from 44 to 120 because it merged with udev
[2013-12-12 15:10:49 -0500] workmad3: glen: and I'm just pointing out some of the issues... I'd personally love to see a cleanup of the community API site
[2013-12-12 15:11:16 -0500] glen: and making one exception would cause "why not here and there" type support issues?
[2013-12-12 15:11:35 -0500] workmad3: almost certainly ;)
[2013-12-12 15:11:38 -0500] daos: are there any open source alternatives to the existing open source web view
[2013-12-12 15:12:17 -0500] cpuguy83: daos: You mean the chef server web UI?
[2013-12-12 15:12:25 -0500] daos: yeah
[2013-12-12 15:13:55 -0500] workmad3: glen: at least with things like berkshelf, it's reasonably easy to pull down a different version of a cookbook...
[2013-12-12 15:14:45 -0500] workmad3: glen: imagine what it was like when you had to do things like manually add and maintain a git submodule... the bad old days ;(
[2013-12-12 15:21:58 -0500] glen: workmad3: i do maintain each cookbook locally in git
[2013-12-12 15:22:11 -0500] glen: because the cookbooks quality is terribly, i must fix every single one of them
[2013-12-12 15:22:42 -0500] glen: and the cookbook maintainers don't accept every single patch
[2013-12-12 15:22:49 -0500] glen: and getting these back to upstream takes forever
[2013-12-12 15:23:25 -0500] glen: but at least i don't manage them as submodules, as knife can upload just by cookbook name
[2013-12-12 15:32:08 -0500] henk76: guys, if you make an encrypted databag, do you need to copy it over to the nodes? or can you access it straight inside a recipe from the server?
[2013-12-12 15:33:12 -0500] cpuguy83: daos: You could certainly customize the opscode one.  I don't know of anything else, though.
[2013-12-12 15:33:15 -0500] jbz: henk76: if you're using chef-server, you can read the encrypted databag from recipes on the nodes, but you'll need to first deploy the databag encryption secret to the nodes somehow.
[2013-12-12 15:34:26 -0500] henk76: so the only way is to use a cookbook_file entry in the recipe for the transport of the databag?>
[2013-12-12 15:34:46 -0500] jbz: uh, no
[2013-12-12 15:35:00 -0500] jbz: the databag lives on the chef server.  Chef-client can access databags directly.
[2013-12-12 15:35:26 -0500] jbz: You need to create the data bag on the server, after which the databag code in the clients can access it via API.
[2013-12-12 15:35:42 -0500] henk76: eeh, sorry. ment the encryption secret
[2013-12-12 15:35:47 -0500] jbz: oh
[2013-12-12 15:35:48 -0500] jbz: well
[2013-12-12 15:36:00 -0500] workmad3: henk76: transporting that via a cookbook file would kinda remove the point of it
[2013-12-12 15:36:08 -0500] jbz: the whole point of an encrypted databag is so that the contents aren't available to anyone with access to the server or your repo
[2013-12-12 15:36:17 -0500] jbz: so putting the secret in there would, as workmad3 says, defeat the purpose.
[2013-12-12 15:37:13 -0500] jbz: henk76: If you don't need secrecy, just use a regular databag.
[2013-12-12 15:37:26 -0500] henk76: yeah ok that point i get ;) . But if i have a recipe which needs like say encrypted mysql password, what is the way to access it from the recipe?
[2013-12-12 15:39:22 -0500] jbz: henk76: read this - http://docs.opscode.com/essentials_data_bags.html#encrypt-a-data-bag - specifically the 'With Recipes' section
[2013-12-12 15:39:26 -0500] workmad3: henk76: you could take a look at chef-vault
[2013-12-12 15:39:35 -0500] Runkle: curious, what are the benefits/differences of spinning up a ephermoral machine with vagrant, versus using knife ?
[2013-12-12 15:40:37 -0500] henk76: thanks guys. i'll look into it
[2013-12-12 15:44:17 -0500] daos: +1 to chef-vault
[2013-12-12 15:44:21 -0500] daos: i use that with success over here
[2013-12-12 15:57:23 -0500] daxroc: Hi all
[2013-12-12 15:58:10 -0500] daxroc: When using remote_file resource with not_if does the checksum / etag get used ?
[2013-12-12 16:01:00 -0500] CPS: is there any documentation out there for managing active directory tasks in chef?
[2013-12-12 16:02:00 -0500] daxroc: ignore my question. Misreadling log entry
[2013-12-12 16:03:27 -0500] jidar: is there a prefered way to load up a large directory full of files? download zip and then unzip?
[2013-12-12 16:06:43 -0500] CPS: jidar: depends on your circumstances I'd imagine
[2013-12-12 16:07:14 -0500] CPS: in my recipes I execute "copy source destination" which will copy all files in a directory if no specific file is specified
[2013-12-12 16:16:04 -0500] jidar: CPS: doesn't it take a long time to traverse a large file structure?
[2013-12-12 16:18:11 -0500] CPS: i'm only copying ~a dozen files so that's not an issue
[2013-12-12 16:24:22 -0500] judd7: any chefs using RHEL/Centos's 'scl enable' in their recipes?
[2013-12-12 16:35:37 -0500] juliancdunn: judd7: no, but I would love to know if someone has a cookbook to manage Software Collections, maybe with an LWRP :)
[2013-12-12 16:37:20 -0500] judd7: sigh.  might have to write some sorta lwrp that can override gem_package to prefix all gem commands with 'scl enable ruby193 '
[2013-12-12 16:37:51 -0500] judd7: For now, just using execs. :(
[2013-12-12 16:38:20 -0500] juliancdunn: (sadpanda)
[2013-12-12 16:38:29 -0500] juliancdunn: oh damn, this isn't HipChat :)
[2013-12-12 16:38:51 -0500] efeldhusen: what's a good cookbook for managing a bind9 server, dns zones, and records all from chef?
[2013-12-12 16:43:18 -0500] castro1688: anyone know how to get attributes to display/use multi-lines? this is going to be terrible to read.. http://pastebin.com/nkHjt1ud
[2013-12-12 16:59:15 -0500] prometheanfire: I think you have have an error in your mysql cookbook
[2013-12-12 16:59:47 -0500] prometheanfire: you never set the node["mysql"]["version"] (which is used in the my.cnf.erb)
[2013-12-12 16:59:52 -0500] prometheanfire: so some variables never get set
[2013-12-12 17:00:06 -0500] prometheanfire: I also can't think of a good way to set that programatically
[2013-12-12 17:02:58 -0500] Alex____: Hello! Was wondering if someone can help me debug an issue with a vagrant VM and getting chef set-up. When I try to bootstrap, it gives me this error: " Log level must be one of :debug, :info, :warn, :error, or :fatal"
[2013-12-12 17:04:29 -0500] zambon: Hello everyone! I'm trying to create a node, set the run list and bootstrap a node from Ruby code, instead of using knife. Any leads on that?
[2013-12-12 17:04:33 -0500] Mukluc: How can I bootstrap a node from within a ruby session (e.g. using Chef::Knife::Bootstrap)
[2013-12-12 17:05:12 -0500] Alex____: Ah. Running sudo apt-get upgrade chef-client on the VM seems to fix it.
[2013-12-12 17:05:29 -0500] zambon: ouch
[2013-12-12 17:07:45 -0500] sebgar: hello. quick question. I' trying to setup a testing environment. Which one is the best option? As of right now, I have 3 VMs, one chef-server, a host, and a workstation. Everytime I change something in a recipe I have to upload the cookbook and run chefclient to test. I'm sure there's a better way...
[2013-12-12 17:10:29 -0500] Visit0r_: hello
[2013-12-12 17:10:58 -0500] prometheanfire: how do I set a attribute based off of something returned via bash
[2013-12-12 17:12:13 -0500] Visit0r_: as in, stdout?, prometheanfire?
[2013-12-12 17:13:15 -0500] prometheanfire: ya
[2013-12-12 17:13:51 -0500] prometheanfire: dpkg -l | grep mysql-server-c | awk '{print $3}' | egrep -o '^[0-9].[0-9]'
[2013-12-12 17:13:59 -0500] prometheanfire: need that to be assigned to an attribute
[2013-12-12 17:14:29 -0500] Visit0r_: you could send the stdout to be written to a file, that'd make things easier
[2013-12-12 17:14:47 -0500] Visit0r_: yet, i don't know how to capture stdout
[2013-12-12 17:14:51 -0500] sebgar: prometheafire: can you use node.default['your_attr'] = variable ???
[2013-12-12 17:14:52 -0500] prometheanfire: ya
[2013-12-12 17:15:15 -0500] prometheanfire: sebgar: the variable is based on stdout from a script
[2013-12-12 17:17:00 -0500] Visit0r_: what do you want to do with the output, prometheanfire?
[2013-12-12 17:17:13 -0500] prometheanfire: set a node attrib
[2013-12-12 17:17:13 -0500] clocKwize: if I've done knife ec2 create server .. can I re run the bootstrap again easily?
[2013-12-12 17:17:40 -0500] Visit0r_: i'd suggest to use the if case, prometheanfire
[2013-12-12 17:19:34 -0500] Alex____: apt-get upgrade didn't work. Running this properly upgrades to the latest version:  sudo true && curl -L https://www.opscode.com/chef/install.sh | sudo bash.  The ubuntu repos our outdated, I suppose.
[2013-12-12 17:21:21 -0500] sebgar: quick question. I' trying to setup a testing environment. Which one is the best option? As of right now, I have 3 VMs, one chef-server, a host, and a workstation. Everytime I change something in a recipe I have to upload the cookbook and run chefclient to test. I'm sure there's a better way... any ideas???
[2013-12-12 17:21:56 -0500] prometheanfire: Visit0r_: what do you mean?
[2013-12-12 17:22:14 -0500] zambon: sebgar: I believe that's how you do it
[2013-12-12 17:22:35 -0500] Blkdragon: sebgar: I use chef-solo to test cookbook development. but this only tests the cookbook during development.
[2013-12-12 17:22:50 -0500] Visit0r_: if output is identical to stdout, set this, prometheanfire
[2013-12-12 17:23:18 -0500] efeldhusen: what's a good cookbook for managing a bind9 server, dns zones, and records all from chef?
[2013-12-12 17:24:01 -0500] prometheanfire: but chef doesn't capture the output in a useable format
[2013-12-12 17:24:10 -0500] sebgar: would chef-solo do everything from the same machine? I just one to have one machine where I can write the code and test on
[2013-12-12 17:24:28 -0500] Blkdragon: http://docs.opscode.com/chef_solo.html
[2013-12-12 17:24:59 -0500] Blkdragon: check out that link sebgar. I don't know if it would work in your situation. But works fine in mine
[2013-12-12 17:25:21 -0500] Blkdragon: there are some lacking features but in my case I didn't need them to test my cookbooks
[2013-12-12 17:25:32 -0500] Visit0r_: well, you could hardcode the output in an if-statement, prometheanfire
[2013-12-12 17:25:39 -0500] sebgar: thanks blkdragon! has anyone tried test kitchen or cucumber or any of the other development tools mentioned on the page???
[2013-12-12 17:25:59 -0500] prometheanfire: I'm just going to use a ruby block
[2013-12-12 17:29:58 -0500] Visit0r_: ....].each do |name_service|
[2013-12-12 17:30:13 -0500] Visit0r_: notifies :restart,resources(:services => name_service),:delayed
[2013-12-12 17:30:18 -0500] Visit0r_: does not work
[2013-12-12 17:30:39 -0500] Visit0r_: how can i use this kind of approach with notifies, so it would work?
[2013-12-12 17:30:54 -0500] Visit0r_: have experimented with resources(:services => #{name_service}), ..ces => '#{name_service}') .. ces => name_service)
[2013-12-12 17:31:06 -0500] Visit0r_:  of which all do not seem to work
[2013-12-12 17:31:25 -0500] Visit0r_: also notifies :restart,resources(:services => 'name_service') does not work
[2013-12-12 17:31:38 -0500] prometheanfire: http://bpaste.net/show/oiOqo9AvDurEI2cjge0v/
[2013-12-12 17:31:40 -0500] prometheanfire: that works
[2013-12-12 17:32:41 -0500] Visit0r_: yeah, that's the approach i was thinking of, @prometheanfire
[2013-12-12 17:32:43 -0500] prometheanfire: anyway, going to open an issue and pull req after lunch
[2013-12-12 17:33:41 -0500] Visit0r_: my resource_name comes from an .each do |name_service|
[2013-12-12 17:34:29 -0500] Visit0r_: for me it seems notifies is not able to recognize my resource_name from the .each do |name_service|, so i thought it was a simple syntax-error on my side
[2013-12-12 17:34:33 -0500] daos: prometheanfire: thanks for pasting that example--didn't know you could do that
[2013-12-12 17:34:39 -0500] Visit0r_: where would i go from here?
[2013-12-12 17:34:40 -0500] daos: sweet
[2013-12-12 17:36:40 -0500] Visit0r_: any ideas, @all ?
[2013-12-12 17:39:13 -0500] gregkare: Visit0r_: Post that snippet in a Gist or something
[2013-12-12 17:39:29 -0500] Visit0r_: will do, @gregkare
[2013-12-12 17:46:29 -0500] jidar: man, getting IIS setup via the IIS cookbook is a pain with the way it's using dsim.exe, if you use Add-WindowsFeature you can just toss it a list and it's fine
[2013-12-12 17:46:32 -0500] Visit0r_: here you go, @gregkare, http://bpaste.net/show/b0vSDq0g61i0yoL4H3Ub/
[2013-12-12 17:46:53 -0500] Visit0r_: notifies is not able to recognize my resource_name from the .each do |name_service|, what am i doing wrong here?
[2013-12-12 17:48:04 -0500] gregkare: I'd use: notifies :restart, "service[#{name_service_x}]", :delayed
[2013-12-12 17:48:11 -0500] gregkare: Assuming node.default['cookbook_name']['recipe_name']['name_service'] is an array of strings
[2013-12-12 17:48:56 -0500] Visit0r_: it's an if-statement in my attributes, @ gregkare
[2013-12-12 17:49:32 -0500] Visit0r_: let me see if that works, @gregkare
[2013-12-12 17:50:05 -0500] gregkare: Oh and of course you can only restart a service if you have a service resource with that name
[2013-12-12 17:51:40 -0500] Visit0r_: well, the given attributes represent working services by name, @ gregkare
[2013-12-12 17:52:55 -0500] gregkare: Visit0r_: Oh, and when you ask for help, it's better to post the actual error messages you get instead of "it doesn't work" :)
[2013-12-12 17:53:18 -0500] ec99988: Hi, I added a Ubuntu node to chef using bootstrap.  When I do "knife search node my-node -a domain", it doesn't return a domain name.  Can someone tell me where does chef get the domain information from the node?
[2013-12-12 17:55:12 -0500] Visit0r_: okay, @gregkare, will do
[2013-12-12 17:56:05 -0500] Visit0r_: 'service[#{name_service_ntp}]',:delayed, did not work either, the resource cannot be found in the resource collection
[2013-12-12 17:56:44 -0500] Visit0r_: i just fired up an example cookbook, with existing service-name
[2013-12-12 17:56:53 -0500] Visit0r_: @gregkare
[2013-12-12 17:57:56 -0500] royr: Chef is complaining my cookbook has no '/etc/hosts' in my templates/default. But it do.
[2013-12-12 17:58:37 -0500] royr: \
[2013-12-12 18:01:59 -0500] daos: did you upload it to the chef server?
[2013-12-12 18:02:31 -0500] Adobeman: hi, I'm trying to setup chef server on Fedora 18.  Getting stucked on this line.. "ruby_block[supervise_rabbitmq_sleep] action run" after I did chef-server-ctl reconfigure.  I googled it, and it looks like I need to modify "/opt/chef-server/embedded/cookbooks/runit/recipes/default.rb", to define Fedora somehow?
[2013-12-12 18:06:25 -0500] Visit0r_: http://bpaste.net/show/4NsMbr9aWJZjm7AvWCCO/
[2013-12-12 18:09:16 -0500] rsbcode: what is the best practice to manage the chef repo when all your cookbooks are managed in individual git repos
[2013-12-12 18:16:01 -0500] Visit0r_: notifies is not able to recognize my resource_name, http://bpaste.net/show/ppHGtVK4R1kqXfbpURE0/
[2013-12-12 18:20:43 -0500] Visit0r_: where do i go from here?
[2013-12-12 18:36:36 -0500] teukka: to a pub?
[2013-12-12 18:37:24 -0500] Visit0r_: http://bpaste.net/show/ynYBF44eh2tqWU1XUSNB/
[2013-12-12 18:39:07 -0500] aspiers: is it OK to have conditional dependencies in metadata.rb? e.g. only depend on the yum cookbook if the OS is Fedora?
[2013-12-12 18:39:37 -0500] aspiers: (obviously assuming that the recipes only use yum if the OS is Fedora)
[2013-12-12 18:40:01 -0500] aspiers: hmm actually this should be handled by the providers transparently, right?
[2013-12-12 18:40:14 -0500] aspiers: it's just a bug in this particular cookbook I'm editing
[2013-12-12 18:41:14 -0500] teukka: aspiers: you can't add logic into metadata. it will be declarative json on the server and node
[2013-12-12 18:41:21 -0500] aspiers: ok
[2013-12-12 18:41:36 -0500] aspiers: I think it was just a thinko from whoever wrote it previously
[2013-12-12 18:41:36 -0500] teukka: aspiers: dependency does nothing more than downloads the cookbook to the node
[2013-12-12 18:42:00 -0500] aspiers: they had %w(apt yum).each do |dep| depends dep; end
[2013-12-12 18:42:02 -0500] teukka: you have to have it in run list or other recipe must include it for it to get evaluated
[2013-12-12 18:42:05 -0500] aspiers: but that's just wrong
[2013-12-12 18:42:20 -0500] aspiers: they weren't even referencing it
[2013-12-12 18:42:33 -0500] aspiers: the recipe only uses a package resource
[2013-12-12 18:42:44 -0500] aspiers: so I'll just delete it
[2013-12-12 18:42:46 -0500] teukka: yeah, that does nothing
[2013-12-12 18:43:27 -0500] teukka: well, it gives you the possible libraries though
[2013-12-12 18:43:53 -0500] aspiers: ?
[2013-12-12 18:45:11 -0500] teukka: the libraries from apt and yum cookbooks are loaded if someone depends on them
[2013-12-12 18:45:41 -0500] aspiers: what extra does that bring? repository management?
[2013-12-12 18:45:42 -0500] teukka: and attributes too I think
[2013-12-12 18:45:53 -0500] aspiers: in any case, these recipes don't use them
[2013-12-12 18:45:54 -0500] teukka: and lwrps
[2013-12-12 18:46:38 -0500] Visit0r_: notifies is not able to recognize my resource_name, http://bpaste.net/show/13r8wKxABp31JvwKE9zf/
[2013-12-12 18:48:00 -0500] teukka: Visit0r_: have you declared your service resource? that paste doesn't have it
[2013-12-12 18:48:21 -0500] miah: sup
[2013-12-12 18:48:23 -0500] Visit0r_: i have, teukka
[2013-12-12 18:48:38 -0500] Visit0r_: i'll add it to the paste
[2013-12-12 18:49:04 -0500] teukka: miah can continue here. she knows everything =)
[2013-12-12 18:49:48 -0500] miah: what did i do?
[2013-12-12 18:50:19 -0500] Visit0r_: updated, http://bpaste.net/show/mVaZ00HSVpWhOSxYqdKl/
[2013-12-12 18:50:40 -0500] teukka: miah: oh, nothing special. but you have huge amount of chef knowledge :)
[2013-12-12 18:50:51 -0500] teukka: and opinions. /me likes
[2013-12-12 18:51:33 -0500] Blizzik: Hi, is it possible to execute a command just once? Everytime I provision my vagrant some commands are run again for example http://bpaste.net/show/0wRAdadXO1jzUundGY6K/
[2013-12-12 18:51:48 -0500] Visit0r_: i really don't know what i'm doing wrong here, i still suspect it to be a simple syntax-error
[2013-12-12 18:52:00 -0500] teukka: Visit0r_: drop the `.default` from the `each` line
[2013-12-12 18:52:00 -0500] Blizzik: Don't mind the [ -d "/home/git" ] &>/dev/null || part... I am just trying to do something to not run it twice
[2013-12-12 18:52:23 -0500] teukka: Visit0r_: you use just `node[...]` when *accessing* the attributes
[2013-12-12 18:52:47 -0500] prometheanfire: if I could get someone to look at this bug/pull req that'd be great :D    https://tickets.opscode.com/browse/COOK-4099    https://github.com/opscode-cookbooks/mysql/pull/143
[2013-12-12 18:52:53 -0500] miah: i find it difficult to support most chef use cases because they are.. well. i wouldn't use it.
[2013-12-12 18:53:06 -0500] Visit0r_: i see, in every case? @teukka?
[2013-12-12 18:53:30 -0500] stormerider: prometheanfire: they do a weekly code review on google hangout, just make sure the ticket is marked as "fix provided"
[2013-12-12 18:53:30 -0500] teukka: Visit0r_: in the recipe when you are reading the value
[2013-12-12 18:53:38 -0500] Visit0r_: exactly
[2013-12-12 18:53:43 -0500] prometheanfire: stormerider: ok, done
[2013-12-12 18:53:52 -0500] miah: i'll say again, you shouldn't abuse node attribues, aka global variables; https://en.wikipedia.org/wiki/Action_at_a_distance_%28computer_programming%29
[2013-12-12 18:54:17 -0500] miah: use sparingly, act as if they are immutable.
[2013-12-12 18:54:20 -0500] stormerider: Visit0r_: any time you read it, you dont want to be specifying the precedence, or the idea of the precedence goes out the window as far as usefulness
[2013-12-12 18:55:48 -0500] Visit0r_: that's correct, stormerider, my logic needs some overthinking
[2013-12-12 18:58:30 -0500] Visit0r_: so, it still does not work, http://bpaste.net/show/gyv8bomyn2BrqDRlDd4y/
[2013-12-12 18:59:48 -0500] Visit0r_: how do i get notifies to understand my resource_name?
[2013-12-12 19:00:28 -0500] teukka: miah: I planned to create a cookbook which just reads shell commands from a list in node attributes and executes them. all one could ever need :D
[2013-12-12 19:01:07 -0500] miah: its too bad im not on an airplane at the moment because otherwise a barfbag would be nearby.
[2013-12-12 19:02:26 -0500] teukka: I was sure you would like the idea
[2013-12-12 19:02:56 -0500] miah: i have been rewriting the java cookbook. i havent touched a shell command at all. i'm decompressing and extracting tarballs using stdlib ruby.
[2013-12-12 19:03:48 -0500] miah: shell commands are dangerous. sysv, bsd, gnu, etc. all differ.
[2013-12-12 19:04:16 -0500] miah: unless you want to write lots of ugly code to determine platform_family and then run it rhough a switch statement.. oh right.
[2013-12-12 19:04:21 -0500] miah: =)
[2013-12-12 19:04:32 -0500] Visit0r_: .each do |shell_command|
[2013-12-12 19:04:33 -0500] clayb: miah That's awesome!
[2013-12-12 19:05:00 -0500] clayb: I want to get my OpenStack cookbook to finally stop the torrent of bash actions that are in it today
[2013-12-12 19:06:49 -0500] miah: do it
[2013-12-12 19:08:52 -0500] Visit0r_: could someone please have a look at this again, i still suspect a simple syntax-error, http://bpaste.net/show/gyv8bomyn2BrqDRlDd4y/
[2013-12-12 19:09:58 -0500] gregkare: Does the service (as in the script, init.d or whatever) actually exist?
[2013-12-12 19:10:12 -0500] miah: Visit0r_: your code paste is missing much of the code. so uh. can't help.
[2013-12-12 19:10:37 -0500] gregkare: If the error is the "service cannot be found", check if there's actually a service to be found
[2013-12-12 19:10:44 -0500] Visit0r_: yes it does actually exist, gregkare
[2013-12-12 19:11:10 -0500] jtimberman: miah: but.. but.. POSIX!
[2013-12-12 19:11:33 -0500] miah: jtimberman: posix is pretty cool. cli arguments are often positional.
[2013-12-12 19:11:46 -0500] miah: so uh. scripting cli is prone to error.
[2013-12-12 19:12:00 -0500] miah: and i wont even get into the whole 'some programs dont even use stderr, stdout correctly'
[2013-12-12 19:12:05 -0500] miah: (aka vagrant, packer, etc)
[2013-12-12 19:12:32 -0500] miah: also, embedded ansi color codes in log output. fuck you.
[2013-12-12 19:12:41 -0500] MrBIOS: kids these days
[2013-12-12 19:12:46 -0500] miah: srsly.
[2013-12-12 19:12:48 -0500] MrBIOS: it pisses me off too
[2013-12-12 19:12:57 -0500] MrBIOS: ain't got no respect for tradition
[2013-12-12 19:13:15 -0500] miah: its free, people need to read it; http://catb.org/~esr/writings/taoup/html/
[2013-12-12 19:13:29 -0500] MrBIOS: I work with some 24 year olds who are essentially like "why can't we just put all our crap in /<companyname>_logs ?
[2013-12-12 19:14:03 -0500] MrBIOS: or /domain or a dozen other retarded top-level directories
[2013-12-12 19:14:08 -0500] miah: ya
[2013-12-12 19:14:16 -0500] miah: GET OFF MY LAWN ALREADY
[2013-12-12 19:14:28 -0500] jtimberman: Please refrain from the use of 'retarded' as a derogatory word.
[2013-12-12 19:14:34 -0500] MrBIOS: apologies, they're brain-damaged
[2013-12-12 19:14:43 -0500] miah: drain-bamaged.
[2013-12-12 19:14:53 -0500] miah: jtimberman: +1
[2013-12-12 19:16:01 -0500] MrBIOS: the doubly-derogatory version of "retarded" = "mental midget"
[2013-12-12 19:16:23 -0500] miah: midget is also offensive.
[2013-12-12 19:16:26 -0500] MrBIOS: exactly
[2013-12-12 19:16:41 -0500] jtimberman: there are much more imaginative words to use :)
[2013-12-12 19:16:50 -0500] miah: we try not to be ablist, classist, fucks here.
[2013-12-12 19:16:51 -0500] MrBIOS: I'm a child of the mid-80s, sadly it was not shunned at the time
[2013-12-12 19:17:00 -0500] MrBIOS: I'd be very interested to know at what point it became so
[2013-12-12 19:17:20 -0500] miah: it always has been. its just now more likely to get you slapped.
[2013-12-12 19:17:34 -0500] MrBIOS: I honestly don't think it always has been
[2013-12-12 19:17:44 -0500] miah: ok, well, thats a debate for another channel =)
[2013-12-12 19:17:47 -0500] atomic-penguin: He was calling a directory structure, retarded, not a person. <get offended>
[2013-12-12 19:17:55 -0500] miah: atomic-penguin: certainly.
[2013-12-12 19:18:38 -0500] miah: retard, verb, the process is retarded by bureaucratic red tape: delay, slow down, slow up, hold back, hold up, set back, postpone, put back, detain, decelerate; hinder, hamper, obstruct, inhibit, impede, check, restrain, restrict, trammel; literary stay. ANTONYMS accelerate.
[2013-12-12 19:18:42 -0500] MrBIOS: http://www.r-word.org/r-word-effects-of-the-word.aspx
[2013-12-12 19:19:15 -0500] miah: lets be smarts.
[2013-12-12 19:19:19 -0500] miah: much <3 to all
[2013-12-12 19:19:23 -0500] miah: hugops and shit
[2013-12-12 19:19:39 -0500] ranjib: :-)
[2013-12-12 19:19:48 -0500] teukka: shitty hugs to all!
[2013-12-12 19:19:56 -0500] MrBIOS: the forced hugging will continue until morale improves
[2013-12-12 19:20:01 -0500] miah: awkward hugs to all! =)
[2013-12-12 19:23:43 -0500] atomic-penguin: I think douche nozzle, or ass hat, are more fitting terms for people doing stupid things
[2013-12-12 19:23:46 -0500] Visit0r_: same logic works for execute, http://bpaste.net/show/SyOiPBXCdepcTTxPmAzk/
[2013-12-12 19:24:00 -0500] Visit0r_: still, it does not apply to notifies
[2013-12-12 19:24:23 -0500] miah: it does
[2013-12-12 19:24:49 -0500] miah: but notifications require the notified resource to be created prior to the notification.
[2013-12-12 19:24:56 -0500] miah: so, order of execution totally matters
[2013-12-12 19:25:04 -0500] miah: its part of the problem with chef recipes
[2013-12-12 19:25:31 -0500] miah: its why i dont write recipes, unless i'm invoking a simple resource.
[2013-12-12 19:25:51 -0500] miah: its good to see runs do stuff like this; Chef Client finished, 2 resources updated
[2013-12-12 19:26:42 -0500] Visit0r_: the resource_name is created before that, @miah
[2013-12-12 19:27:04 -0500] Visit0r_: or what am i doing wrong exactly?
[2013-12-12 19:29:10 -0500] Runkle: does the bind-chroot cookbook also address being able to completely manage zones from chef as well?
[2013-12-12 19:29:15 -0500] Runkle: or it just gets it installed?
[2013-12-12 19:29:41 -0500] miah: unlikely
[2013-12-12 19:29:43 -0500] Runkle: cause if i could mange dns servers with cehf, i'd not have to deal with master/slave etc.
[2013-12-12 19:29:52 -0500] miah: Visit0r_: unless you paste all of your code i can't help. so get on it.
[2013-12-12 19:30:14 -0500] miah: recipes are _hell_ to mentally map out, especially when you abuse node attributes. so more information is required.
[2013-12-12 19:30:20 -0500] Runkle: mind you that is just a file update and push a tmeplate and restart it, so not rocket science to write.
[2013-12-12 19:30:40 -0500] miah: its not even rocket science to use nsupdate in ruby. and i've infact done that too
[2013-12-12 19:30:57 -0500] tscanausa: Runkle: there is a dynect cookbook....
[2013-12-12 19:31:04 -0500] miah: dynect != bind
[2013-12-12 19:31:09 -0500] Runkle: correct.
[2013-12-12 19:31:53 -0500] Runkle: so when you make a change with nsupdate... bind takes care of updating the serial and reloading the zone and updating the zone file?
[2013-12-12 19:32:10 -0500] Runkle: ie: it doesn't go do it all in memory so if it restrats i lose my changes right?
[2013-12-12 19:32:15 -0500] miah: Runkle: yup
[2013-12-12 19:32:21 -0500] Runkle: awesome. thats going on the list.
[2013-12-12 19:32:27 -0500] miah: you can write the changes to disk too though
[2013-12-12 19:32:33 -0500] Runkle: i have 400 mx records i have to change and damned if i'm gonna update all those serials.
[2013-12-12 19:32:36 -0500] miah: via writing out your updated zone files
[2013-12-12 19:32:42 -0500] miah: also, bind10 supports database backends natively
[2013-12-12 19:32:44 -0500] miah: and has a restful api
[2013-12-12 19:32:55 -0500] Runkle: can nsupdate do that, or would you do it with a cron job?
[2013-12-12 19:33:00 -0500] miah: nsupdate y0
[2013-12-12 19:33:03 -0500] Runkle: word.
[2013-12-12 19:33:35 -0500] Runkle: i said i know i'll never chef my current environemt AND keep on top of my todo list , so instead i'm re-doing our envnorionemtn with as many best practices as i can... all built into chef.
[2013-12-12 19:35:02 -0500] jpoole: Runkle you using aws?
[2013-12-12 19:35:08 -0500] miah: awesome. good job.
[2013-12-12 19:35:09 -0500] Runkle: nah, esxi in house.
[2013-12-12 19:35:12 -0500] jpoole: ahh
[2013-12-12 19:35:30 -0500] Runkle: or "e-sexy" as i'm trying to coin it. but it won't catch on. but eye-scuzzy did!
[2013-12-12 19:35:35 -0500] Runkle: .... thats a torch i hold
[2013-12-12 19:35:57 -0500] atomic-penguin: Runkle, bind-chroot doesn't manage zones
[2013-12-12 19:35:58 -0500] Runkle: our boss is crazy, so everything is in house.
[2013-12-12 19:36:10 -0500] Runkle: atomic-penguin: tks. i'll write my own or get looking.
[2013-12-12 19:36:41 -0500] atomic-penguin: Runkle, bind lets you consume zone configuration from an external source.  Might look at that, and tack on your own zone consumer
[2013-12-12 19:36:53 -0500] atomic-penguin: Runkle, bind cookbook that is
[2013-12-12 19:37:05 -0500] Runkle: cool.
[2013-12-12 19:37:24 -0500] atomic-penguin: Runkle, the way I do it, is suck in zone names from AD and configure all my slave servers
[2013-12-12 19:38:47 -0500] allaire: couple questions about Amazon AWS and chef: What's your thoughts on AWS OpsWorks. Also, is it possible to attach node balancers and play with EC2 specifics using knife somehow? (EC2 plugin doesnt seem to have elastic load balancer support)
[2013-12-12 19:40:06 -0500] jpoole: allaire my thoughts are you get no elb, so opsworks is a no go for my environment
[2013-12-12 19:40:21 -0500] jpoole: i heavily write my own recipes with the ec2-api-tools and do all that stuff within them
[2013-12-12 19:40:24 -0500] miah: OpsWorks is still using an ancient version of Chef iirc
[2013-12-12 19:40:41 -0500] juliancdunn: miah: they are on Chef 11 now, but their Ruby is still 1.8.7 I think
[2013-12-12 19:40:45 -0500] miah: lulz.
[2013-12-12 19:40:54 -0500] miah: do they even dev?
[2013-12-12 19:41:00 -0500] jpoole: lol
[2013-12-12 19:41:06 -0500] jpoole: do they even lift!
[2013-12-12 19:41:23 -0500] juliancdunn: welp, RedHat just committed to backporting fixes into system Ruby 1.8.7 until 2017, so...
[2013-12-12 19:41:26 -0500] miah: https://www.ruby-lang.org/en/news/2013/06/30/we-retire-1-8-7/
[2013-12-12 19:41:27 -0500] allaire: but what is opswork exactly lol
[2013-12-12 19:41:36 -0500] miah: of course, Chef is totally in this boat of support hell.
[2013-12-12 19:41:39 -0500] allaire: why not go full-chef
[2013-12-12 19:42:09 -0500] miah: its got buttons and points and clicks. must be good.
[2013-12-12 19:42:22 -0500] juliancdunn: you can think of Opsworks as a competitor to Hosted Chef
[2013-12-12 19:42:28 -0500] jpoole: i guess i'm silly by updating ruby before i bootstrap chef-client in my user-data scripts.
[2013-12-12 19:42:30 -0500] miah: you can, but you shouldn't.
[2013-12-12 19:42:43 -0500] allaire: ok that's what I thought
[2013-12-12 19:43:10 -0500] miah: just omnibus it, then you're segregated from system changes and possible fuckups from people who don't know how to use bundler
[2013-12-12 19:43:45 -0500] jpoole: omnibus does the embedded binaries in /opt/chef/embedded/bin no?
[2013-12-12 19:44:07 -0500] allaire: and when you install your own chef server, do you get the web app interface or that's all chef enterprise (hosted) ?
[2013-12-12 19:44:31 -0500] jpoole: I wasn't sure, so I paranoid-adly (is that even a word?), updated ruby to 1.9.3 before doing the install of chef-client.
[2013-12-12 19:44:40 -0500] jpoole: you get a lightweight chef-server web/app
[2013-12-12 19:44:48 -0500] jpoole: it's not fancy, but does the job.
[2013-12-12 19:45:04 -0500] jpoole: s'all you really need IMHO
[2013-12-12 19:45:11 -0500] jpoole: then again i haven't used hosted-chef to compare
[2013-12-12 19:45:34 -0500] Visit0r_: here we go again, http://bpaste.net/show/fLD7YKzV1gMvWNzLXknI/
[2013-12-12 19:45:42 -0500] allaire: cool thx
[2013-12-12 19:45:58 -0500] miah: i never use the web interface
[2013-12-12 19:46:32 -0500] jpoole: im stuck with knife on the cli.
[2013-12-12 19:46:53 -0500] jpoole: use chef-server to sometimes visually see where things are
[2013-12-12 19:47:25 -0500] jpoole: have some scripts that create data bags, dynamically, etc, login to see what's in them if they're being created n such
[2013-12-12 19:47:30 -0500] jpoole: but mostly just knife on the cli
[2013-12-12 19:48:06 -0500] juliancdunn: allaire: the open source Chef server has a webui, but it's more basic than either Hosted or on-premise Enterprise Chef.
[2013-12-12 19:48:28 -0500] davsharyan33: Hey ppl. I got a problem with knife search. I get NTP servers list using search "role:ntp-server" and the problem is that it changes the order every our which means ntp.conf on client side changes every hour and service got restarted every time. Any idea how to fix that ?
[2013-12-12 19:48:30 -0500] juliancdunn: no reporting dashboards or run history for example.
[2013-12-12 19:48:31 -0500] allaire: juliancdunn: Thanks for clarifying this!
[2013-12-12 19:48:54 -0500] allaire: the pricing is steep after the free 5 nodes on hosted chef, but I guess it's worth it?
[2013-12-12 19:48:56 -0500] juliancdunn: davsharyan33: sort the list that you get back
[2013-12-12 19:49:00 -0500] jpoole: no run history, but you can see when the last time a client ran
[2013-12-12 19:49:17 -0500] juliancdunn: allaire: is it? $72/node/year
[2013-12-12 19:49:33 -0500] miah: davsharyan33: search(<foo>).sort
[2013-12-12 19:49:37 -0500] allaire: juliancdunn: compared to to puppetlabs
[2013-12-12 19:49:43 -0500] daw13: Is there doc page somewhere that tells what each Ohai plugin does?  Some of them are self explanatory but it would be nice.  Thanks!
[2013-12-12 19:49:48 -0500] allaire: juliancdunn: http://puppetlabs.com/puppet/how-to-buy
[2013-12-12 19:49:51 -0500] miah: arrays are mostly unordered.
[2013-12-12 19:50:01 -0500] allaire: Unless I'm missing something in their pricing
[2013-12-12 19:50:03 -0500] allaire: vs chef's procing
[2013-12-12 19:50:05 -0500] allaire: pricing*
[2013-12-12 19:50:20 -0500] juliancdunn: that page says $99/node/year
[2013-12-12 19:50:41 -0500] allaire: wowzord, I miss-read
[2013-12-12 19:50:42 -0500] allaire: haha
[2013-12-12 19:50:45 -0500] allaire: sorry :)
[2013-12-12 19:50:45 -0500] jpoole: standard support.
[2013-12-12 19:52:59 -0500] maplebed: Hi folks. I'm having trouble figuring out how to send the ssh connections from 'knife ec2 create' through a proxy host (for ssh configs like http://sshmenu.sourceforge.net/articles/transparent-mulithop.html)
[2013-12-12 19:53:27 -0500] maplebed: any suggestions? I was hoping it would Just Work(tm) using my ssh config, but it doesn't seem to.
[2013-12-12 19:53:47 -0500] juliancdunn: daw13: do you mean what comes out of the box in Ohai?
[2013-12-12 19:53:48 -0500] davsharyan33: juliancdunn:  , miah : thanks, gonna tried that
[2013-12-12 19:54:08 -0500] daw13: juliancdunn: yes, please
[2013-12-12 19:54:35 -0500] juliancdunn: daw13: there's not really anything at the moment, sorry... the source code is a pretty easy read though
[2013-12-12 19:54:40 -0500] juliancdunn: what specifically are you looking for?
[2013-12-12 19:55:19 -0500] miah: read the source luke.
[2013-12-12 19:55:19 -0500] daw13: I'm looking to disable the ones I don't need.  I'm guessing that the ones I don't know are linux related but I can research to find out
[2013-12-12 19:55:20 -0500] juliancdunn: maplebed: that command will take a "-w" for your gateway host
[2013-12-12 19:55:35 -0500] daw13: we are a windows environment
[2013-12-12 19:56:06 -0500] miah: kinda lulz that ohai even runs the non-linux related checks after it discovers its windows
[2013-12-12 19:56:07 -0500] maplebed: I saw http://docs.opscode.com/knife_ssh.html mention -G but couldn't more detail on what a gateway was.
[2013-12-12 19:56:15 -0500] miah: er, non-windows related
[2013-12-12 19:56:20 -0500] daw13: I know Doug Ireton did a slide on this.  I can use that as a start
[2013-12-12 19:56:25 -0500] maplebed: I'll give it a try...
[2013-12-12 19:56:28 -0500] maplebed: thanks juliancdunn
[2013-12-12 19:56:33 -0500] daw13: and look at the code
[2013-12-12 19:56:39 -0500] juliancdunn: daw13: you're more likely to want to disable some of the *windows* plugins that gather a crapton of data
[2013-12-12 19:57:23 -0500] juliancdunn: I had one on Windows that gathered every pixel of my custom background and stuck that in a giant 2D array :-/
[2013-12-12 19:57:31 -0500] daw13: What!
[2013-12-12 19:57:41 -0500] juliancdunn: yeah, I don't remember which one that is, but some of the Win32 calls return a lot of data
[2013-12-12 19:58:01 -0500] juliancdunn: maplebed: "knife ssh" is not the same as bootstrap or ec2 server create
[2013-12-12 19:58:09 -0500] juliancdunn: the option you want is "-w" for ec2 server create
[2013-12-12 19:58:13 -0500] maplebed: yeah, figured.
[2013-12-12 19:58:21 -0500] maplebed: ERROR: Net::SSH::Disconnect: connection closed by remote host
[2013-12-12 19:58:22 -0500] maplebed: :(
[2013-12-12 19:58:38 -0500] maplebed: (I used knife ec2 -w myproxyhost create blah blah blah
[2013-12-12 19:58:39 -0500] maplebed: )
[2013-12-12 19:58:49 -0500] maplebed: but that's better than before, where it just timed out
[2013-12-12 20:04:24 -0500] chrisballinger: i found a bug in chef-solo
[2013-12-12 20:04:53 -0500] chrisballinger: if your dna.json file has too many keys in it, for some reason it assumes an empty run list
[2013-12-12 20:05:26 -0500] chrisballinger: but if you remove all the extraneous keys, it works
[2013-12-12 20:07:21 -0500] btm: @getchefdotcom knife code review: join: https://plus.google.com/hangouts/_/hoaevent/AP36tYeRs1I83722xK9KDg-FLBMQbIL0EaCbTtKLBwTeoW9nYzIlLA
[2013-12-12 20:16:27 -0500] drywheat: when building a rails server, does it make sense to perform a chef search for the database server ipaddress?
[2013-12-12 20:17:08 -0500] drywheat: on one hand, that's nice because it is dynamic, but i'm having trouble trying to understand how you account for failover
[2013-12-12 20:19:12 -0500] pabst^: If I have a directory of files in cookbook_name/files/default/directory - what is the best way to move that directory into place during the chef run? cookbook_file apparently only does one file at a time?
[2013-12-12 20:20:18 -0500] aspiers: when simultaneously assigning the same role to multiple nodes, is there a way to write the recipe so that just one of the nodes is randomly and automatically selected as the "master"?
[2013-12-12 20:20:19 -0500] juliancdunn: drywheat: that's another "it depends" answer :-)
[2013-12-12 20:20:32 -0500] juliancdunn: drywheat: how do you do it now?
[2013-12-12 20:21:18 -0500] juliancdunn: pabst^: http://docs.opscode.com/resource_remote_directory.html
[2013-12-12 20:22:35 -0500] pabst^: juliancdunn: thanks
[2013-12-12 20:23:00 -0500] drywheat: juliancdunn: right now we use DNS tied to a private network IP. it works, but then we have to incur the cost of DNS queries, TTL concerns and exposing a private IP publicly, albeit inaccessible
[2013-12-12 20:23:29 -0500] juliancdunn: you don't have an internal zone then
[2013-12-12 20:24:44 -0500] drywheat: juliancdunn: not currently, no. i inherited this infrastucture and i'm just starting to rebuild
[2013-12-12 20:25:16 -0500] juliancdunn: ah ok. well, couple ideas -- tag the master in Chef either with a node attribute or "tag as the master
[2013-12-12 20:25:26 -0500] juliancdunn: use that in search, and flip the tag to the slave if the master explodes
[2013-12-12 20:25:51 -0500] drywheat: ah, so search by tag and not by role
[2013-12-12 20:26:04 -0500] juliancdunn: or both, if applicable
[2013-12-12 20:26:15 -0500] juliancdunn: dunno what DB system you're using but for example, MongoDB is dynamic
[2013-12-12 20:26:43 -0500] juliancdunn: all nodes are the "same"
[2013-12-12 20:27:16 -0500] Blizzik: I have really neewbiesh question... https://github.com/fnichol/chef-rvm they say: "Include recipe[rvm::system] in your run_list and override the defaults you want changed" Where can I reconfigure the defaults?
[2013-12-12 20:27:24 -0500] Blizzik: I am using opscode server
[2013-12-12 20:27:36 -0500] drywheat: i think i see what you're driving at (e.g. role 'mysql_database' and tag 'master')
[2013-12-12 20:27:44 -0500] juliancdunn: drywheat: correct
[2013-12-12 20:28:12 -0500] maplebed: Blizzik: I think that means that in the recipe from which you're including the rvm recipe, set some attributes to override what you need
[2013-12-12 20:28:29 -0500] drywheat: that's a good suggestion, did you have another one or did I misunderstand
[2013-12-12 20:28:30 -0500] drywheat: ?
[2013-12-12 20:29:01 -0500] juliancdunn: oh, the other one I had is that I've seen people write their apps to make TCP connections to both master and slave
[2013-12-12 20:29:15 -0500] juliancdunn: and handle it in the app layer outside of Chef
[2013-12-12 20:29:22 -0500] Blizzik: maplebed: Hmm... Can run a recipe from an other recipe?
[2013-12-12 20:29:24 -0500] juliancdunn: so if the master shits itself, just start sending writes to the slave
[2013-12-12 20:29:35 -0500] maplebed: +1 move the logic of finding the master to the application (or to some process outside of chef)
[2013-12-12 20:29:47 -0500] drywheat: Blizzik: yes, just use `include_recipe "other_recipe"'
[2013-12-12 20:29:57 -0500] Blizzik: drywheat: Aha, thank you :D
[2013-12-12 20:30:33 -0500] juliancdunn: yeah, if you want to get really sophisticated, you can get zookeeper, etcd, whatever to do those leader election algorithms
[2013-12-12 20:30:41 -0500] juliancdunn: but it requires software development work at the app
[2013-12-12 20:31:51 -0500] drywheat: those are good strategies, but I guess for my domain and purpose, the first is most suiting
[2013-12-12 20:32:35 -0500] drywheat: juliancdunn: thanks for the back-and-forth
[2013-12-12 20:32:42 -0500] juliancdunn: np
[2013-12-12 20:33:10 -0500] maplebed: drywheat: one thing that may influence your decision on what route to take is the time resolution in which you need the master change processed.
[2013-12-12 20:33:23 -0500] juliancdunn: maplebed: +1
[2013-12-12 20:33:34 -0500] maplebed: chef runs are ... sporatic (dunno how often you run it) but moving it outside of chef lets you respond *much* more quickly.
[2013-12-12 20:34:39 -0500] maplebed: moving it outside of chef deosn't necessarily mean into the app though; it's perfectly reasonable to have a cronjob taht writes out a config file or something.
[2013-12-12 20:36:03 -0500] maplebed: juliancdunn: do you know anybody who's successfully done the gateway ssh thing? it seems to me like it's considering success when connecting to the tunnel host rather than the target host, then attempting to ssh to the target host before ssh is fully up so failing.
[2013-12-12 20:36:44 -0500] juliancdunn: maplebed: I have not. that's interesting, probably a bug
[2013-12-12 20:37:13 -0500] maplebed: I guess it's time to go from reading code to changing code.
[2013-12-12 20:37:16 -0500] maplebed: \o/
[2013-12-12 20:37:22 -0500] juliancdunn: can you open a ticket at tickets.opscode.com against the KNIFE project, component knife-ec2
[2013-12-12 20:37:40 -0500] maplebed: I want to do more diagnosis to come up with proof or a patch first.
[2013-12-12 20:37:46 -0500] maplebed: but if I get it I certainly will.
[2013-12-12 20:37:52 -0500] juliancdunn: yeah, of course -- thanks :)
[2013-12-12 20:38:50 -0500] patmaddox: Hi I installed chef on an EC2 instance using the instructions at http://www.getchef.com/blog/2013/03/11/chef-11-server-up-and-running/ - it worked great. I want to change the SSL certificate file that nginx.conf points to...I don't know what to add to my chef-server.rb and I don't know where the cookbooks are being run from in order to find out. Ideas?
[2013-12-12 20:40:58 -0500] DandyPandy: Anyone know anything about chefspec being unable to find the berkshelf gem?
[2013-12-12 20:46:35 -0500] juliancdunn: patmaddox: you can change nginx['ssl_certificate'] and nginx['ssl_certificate_key'] in chef-server.rb
[2013-12-12 20:46:43 -0500] patmaddox: okay I still don't know where the recipes are stored in this setup, but I looked at chef-server-running.json in order to figure out the proper attribute to override my SSL certificate file name
[2013-12-12 20:47:20 -0500] drywheat: maplebed: we can tolerate a small window of downtime on account of db failure, and in the event of that. I think would probably trigger a manual chef run using `knife ssh "criteria"
[2013-12-12 20:47:46 -0500] patmaddox: juliancdunn: yep! can you tell me where the recipes are? as mentioned, I figured out what I needed to do via chef-server-running.json but am wondering where the recipes are stored
[2013-12-12 20:48:05 -0500] drywheat: it also seems like some more elaborate db failover schemes can be employed, in many external forms
[2013-12-12 20:49:03 -0500] juliancdunn: patmaddox: I believe it's /opt/opscode/embedded/cookbooks
[2013-12-12 20:49:34 -0500] juliancdunn: DandyPandy: it's a ridley and JSON activation issue -- try to make sure you have json >= 1.7.7 installed
[2013-12-12 20:50:23 -0500] patmaddox: juliancdunn: thanks :)
[2013-12-12 20:51:05 -0500] DandyPandy: juliancdunn: just install 1.8.1 and still getting the same thing
[2013-12-12 20:51:13 -0500] DandyPandy: json 1.8.1
[2013-12-12 20:51:39 -0500] juliancdunn: I have both 1.5.5 (which comes with Ruby) and 1.8.1
[2013-12-12 20:52:13 -0500] DandyPandy: juliancdunn: same
[2013-12-12 20:52:23 -0500] juliancdunn: I found what was wrong by firing up irb, then doing "require 'chefspec'" then "require 'chefspec/berkshelf'"
[2013-12-12 20:52:32 -0500] juliancdunn: and it complained about an activation error
[2013-12-12 20:53:22 -0500] DandyPandy: juliancdunn: yeah, it's just saying berkshelf isn't found
[2013-12-12 20:53:31 -0500] maplebed: drywheat: sounds like a good place to start, and if down the road you need something else, it's not hard to change. you certainly won't regret having the data in chef.
[2013-12-12 20:53:36 -0500] DandyPandy: oh
[2013-12-12 20:53:39 -0500] DandyPandy: there it is
[2013-12-12 20:54:57 -0500] DandyPandy: juliancdunn: do I just remove json 1.5.5?
[2013-12-12 20:55:37 -0500] juliancdunn: no actually, just install json 1.7.7
[2013-12-12 20:55:57 -0500] juliancdunn: I forgot, I've got a hacked up chef.gemspec b/c I'm testing to see if we can relax the pinning in Chef to <= 1.8.1
[2013-12-12 20:56:09 -0500] juliancdunn: #include <daily-swearing-about-json-gem.h>
[2013-12-12 20:57:12 -0500] DandyPandy: juliancdunn: awesome! That did it. Thanks for the help!
[2013-12-12 21:02:04 -0500] juliancdunn: np!
[2013-12-12 21:16:14 -0500] patmaddox: now I'm setting up a vagrant box based on my chef recipes, and have run into a bootstrapping problem. I want to install the rbenv recipe, but it fails because it's written with Ruby 2 hash syntax, and the base box has ruby 1.8.7. So I tried the "knife bootstrap" command I found at https://learnchef.opscode.com/quickstart/converge/ and that installed rbenv, but I have no idea why it worked. Does bootstrap download a vers
[2013-12-12 21:16:14 -0500] patmaddox: ion of ruby 2 that I don't know about?
[2013-12-12 21:33:12 -0500] gregkare: patmaddox: The next hash syntax appeared in Ruby 1.9, so if you installed an Omnibus package of Chef (which is the default for the bootstrap in recent versions of Chef) you get a self-contained Ruby 1.9.3 just for Chef
[2013-12-12 21:33:16 -0500] gregkare: s/next/new/
[2013-12-12 21:34:22 -0500] patmaddox: got it
[2013-12-12 21:34:53 -0500] gregkare: Also, never use Ruby 1.8.7 for anything even if your distribution still has it
[2013-12-12 21:35:22 -0500] gregkare: It's been EOL since June and most projects have already or will stop supporting it soon
[2013-12-12 21:35:45 -0500] gregkare: Even if RedHat/Ubuntu/etc still provide security updates most projects won't work anymore anyway
[2013-12-12 21:41:25 -0500] coderanger: miah: WTF is wrong with Michigan
[2013-12-12 21:41:57 -0500] patmaddox: I'm not using Ruby 1.8.7. That's just what comes installed on this base box. Hence me installing rbenv so I can get ruby 2
[2013-12-12 21:44:30 -0500] miah: coderanger: i duno. what stupid did they do now?
[2013-12-12 21:44:40 -0500] miah: coderanger: i also want to know wtf is wrong with India
[2013-12-12 21:44:44 -0500] coderanger: miah: http://www.huffingtonpost.com/2013/12/11/michigan-rape-insurance_n_4428432.html
[2013-12-12 21:45:02 -0500] miah: ah yes. i just found that
[2013-12-12 21:45:33 -0500] Majost: does anyone know what the chef_api value would be for a standalone chef server?
[2013-12-12 21:46:09 -0500] miah: its sad that people are so damned stupid.
[2013-12-12 21:46:23 -0500] daos: having a weird issue where i have a cookbook to install rbenv, set the global ruby to 2.0.0, install some gems, and then have a another recipe that requires one of those gems fail because it tries to install the gem and can't because it's not using the global ruby (it thinks system ruby is 1.8.7)
[2013-12-12 21:46:46 -0500] Majost: nm.. I think I found the right doc
[2013-12-12 21:47:05 -0500] daos: what's truly bizarre here is that this configuratoin works on other similar nodes
[2013-12-12 21:50:41 -0500] coderanger: Majost: For berkshelf?
[2013-12-12 21:59:19 -0500] xrl: how long should it take to synchronize packages when doing a chef run?
[2013-12-12 21:59:29 -0500] xrl: seems like it takes a long time to download
[2013-12-12 22:00:39 -0500] miah: elaborate.
[2013-12-12 22:01:57 -0500] flaccid: sync packages, bsd or arch or something
[2013-12-12 22:03:39 -0500] xrl: err, sync cookbook from hosted chef
[2013-12-12 22:03:53 -0500] xrl: I think of coobooks are packages ;)
[2013-12-12 22:04:00 -0500] miah: cookbooks are not packages.
[2013-12-12 22:04:15 -0500] miah: terminology matters when dealing with programming.
[2013-12-12 22:04:28 -0500] xrl: of course
[2013-12-12 22:05:23 -0500] xrl: I thought the cookbooks were already on the host but it was taking 20 seconds a cookbook to "check"
[2013-12-12 22:05:25 -0500] miah: i dont hosted-chef anymore, so i dont have any advice. when i did. i noticed lots of load-balancing issues. got lots and lots of 504's
[2013-12-12 22:05:38 -0500] xrl: how long ago was that?
[2013-12-12 22:05:44 -0500] miah: ~1year
[2013-12-12 22:06:03 -0500] xrl: I wonder if the chef-11 release fixed that stuff?
[2013-12-12 22:06:22 -0500] xrl: I can probably turn up the verboseness and see what it's doing
[2013-12-12 22:06:25 -0500] miah: they did make changes to their infrastructure
[2013-12-12 22:06:46 -0500] miah: but im not privy to what changed, so i can't say if it was a positive improvement =)
[2013-12-12 22:08:59 -0500] coderanger: xrl: For hosted chef, cookbook data itself is just coming from S3
[2013-12-12 22:12:31 -0500] juliancdunn: after we switched to the erlang endpoints, the errors have gone down significantly
[2013-12-12 22:13:43 -0500] juliancdunn: http://www.getchef.com/blog/2013/05/21/open-the-bifrost/
[2013-12-12 22:26:39 -0500] miah: juliancdunn: awesome.
[2013-12-12 22:30:15 -0500] volker-: is there a way to run execute and shell/bash only if an attribute changed? creates or similar options don't fit on attribute changes
[2013-12-12 22:33:58 -0500] coderanger: volker-: What kind of attribute?
[2013-12-12 22:36:34 -0500] queuetip: i'm having some trouble understanding some basics about chef, i'm researching installing a chef server, is chef server enterprise only? it seems that the requirements for even a standalone server are quite hefty, is this always the case? is there a way to use a micro instance for instance to host a chef server?
[2013-12-12 22:37:07 -0500] volker-: coderanger: a regular node attribute, variable or databag attribute
[2013-12-12 22:37:28 -0500] queuetip: just the requirement for 5g in /opt and 5g in /var for standalone make me kind of weary
[2013-12-12 22:37:36 -0500] volker-: coderanger: basically "run once, only run again if [ X ] has changed", whree X is in the cookbook or similar
[2013-12-12 22:37:51 -0500] volker-: queuetip: where do you have that requirement from
[2013-12-12 22:38:01 -0500] queuetip: http://docs.opscode.com/install_server_standalone.html
[2013-12-12 22:39:12 -0500] volker-: queuetip: i run mine on a standard ec2, /opt has 537M and /var 412M (including logs)
[2013-12-12 22:39:41 -0500] queuetip: volker-: ahhh, okay, because that doc makes me almost run away from chef haha
[2013-12-12 22:40:08 -0500] juliancdunn: memory and CPU are more important than disk space
[2013-12-12 22:40:19 -0500] volker-: actually, the entire system (ubuntu 12.04 LTS, default ami, chef-server) only requres 1.7G
[2013-12-12 22:40:45 -0500] volker-: queuetip: look into knife-server, you can easily backup & restore a chef server with it
[2013-12-12 22:41:04 -0500] volker-: queuetip: so even if I would hit the limit, who cares, new instance/vm, adding it, done.
[2013-12-12 22:41:20 -0500] queuetip: volker-: all good to know for my research, thanks!
[2013-12-12 22:41:21 -0500] adnichols: volker-: you could store the attribute from the last time the resoruce executed in an attribute that is only set when the resource runs - thus your guard is to compare if they are different and run when they are
[2013-12-12 22:41:51 -0500] volker-: adnichols: how would you do it? writing this attribute into a file and then using not_if?
[2013-12-12 22:42:05 -0500] adnichols: volker-: no, just set a 'normal' attribute which persists
[2013-12-12 22:42:24 -0500] volker-: adnichols: sorry, I have problems to follow you.
[2013-12-12 22:42:53 -0500] volker-: adnichols: you mean something like "dummyattribute-just-for-check = $current_attribute" and then checking always against it?
[2013-12-12 22:43:07 -0500] adnichols: volker-: I'm not sure if this will work on execute/bash blocks because it needs to be able to set the attribute - a ruby_block may be the only option
[2013-12-12 22:43:19 -0500] adnichols: volker-: yes, that's the basic idea
[2013-12-12 22:43:50 -0500] volker-: you could do this outside of that block. yeah, nicer as writing a file.
[2013-12-12 22:44:03 -0500] adnichols: volker-: well actually - you can do it on any resource by just notifying another resource which sets the attribute
[2013-12-12 22:44:47 -0500] adnichols: a file would work too
[2013-12-12 22:44:52 -0500] volker-: adnichols: true, but I think a not_if { ... } would be prettier to read
[2013-12-12 22:44:58 -0500] volker-: adnichols: thanks for giving me the idea.
[2013-12-12 22:45:14 -0500] adnichols: volker-: you would still have your not_if, you would just have a notify in addition
[2013-12-12 22:46:39 -0500] adnichols: volker-: it's a variant of this pattern: http://docs.opscode.com/essentials_cookbook_resources_first_run.html
[2013-12-12 22:47:03 -0500] adnichols: volker-: instead of looking for attribute existence, you're comparing to another attribute
[2013-12-12 22:47:42 -0500] volker-: I need a ruby block for node.set?
[2013-12-12 22:47:59 -0500] adnichols: volker-: no, but you have to be able to notify something
[2013-12-12 22:48:27 -0500] adnichols: volker-: you only want to node.set when the execute runs
[2013-12-12 22:48:34 -0500] volker-: k, I think you could do it shorter.
[2013-12-12 22:48:50 -0500] adnichols: awesome - if you come up w/ something please share :)
[2013-12-12 22:49:02 -0500] volker-: adnichols: I could let you know when I'm done
[2013-12-12 22:49:06 -0500] adnichols: great
[2013-12-12 23:03:49 -0500] xrl: what's a good way of managing node names?
[2013-12-12 23:04:23 -0500] xrl: I'm using environments to mirror physical installation and I don't really care about the node names... but it looks like I need to make unique ones
[2013-12-12 23:12:52 -0500] volker-: adnichols: https://gist.github.com/anonymous/6c823153cfafa072f16c
[2013-12-12 23:13:44 -0500] volker-: adnichols: let's not talk about the security of it and potential issues around it. Passwords are a special issues, it is about the general possibility.
[2013-12-12 23:15:41 -0500] Majost:  Anyone know why a chef_api:  definition in my Berksfile would be completely ignored?
[2013-12-12 23:33:34 -0500] queuetip: after getting a chef server installed and configured, what are the steps to launcht the web management console? the docs are kind of unclear about how to do this
[2013-12-12 23:34:47 -0500] queuetip: in the docs it simply states: In order to set up and start the management console, use the bootstrap_server recipe with webui_enabled. The management console will be running on port 4040.
[2013-12-12 23:34:51 -0500] queuetip: but i have no idea how to do that
[2013-12-12 23:39:01 -0500] daos: what's the best way to change the system's ruby version thru chef?
[2013-12-12 23:39:12 -0500] daos: i'm using an ubuntu 12.04 ami from ec2 and it comes w/ 1.8.7
[2013-12-12 23:47:32 -0500] volker-: adnichols: https://gist.github.com/anonymous/ab81e27417bc3ce327f9
[2013-12-12 23:54:20 -0500] queuetip: so what do i do now that chef server is installed? i still can't figure out how to launch the web based manager, and i still can't figure out how to run the bootstrap_server recipe
[2013-12-12 23:54:38 -0500] juliancdunn: queuetip: what docs are you reading?! those look really old
[2013-12-12 23:54:53 -0500] queuetip: juliancdunn: http://docs.opscode.com/chef/manage_server_open_source.html
[2013-12-12 23:55:08 -0500] queuetip: literally it states: In order to set up and start the management console, use the bootstrap_server recipe with webui_enabled. The management console will be running on port 4040.
[2013-12-12 23:55:20 -0500] queuetip: but i have no idea how to do that and i can't find any docs on how to do that
[2013-12-12 23:55:41 -0500] juliancdunn: ouch, that looks wrong
[2013-12-12 23:56:16 -0500] juliancdunn: if you install the RPM or deb and then run chef-server-ctl reconfigure as root, it should set everything up for you
[2013-12-12 23:56:33 -0500] queuetip: juliancdunn: i did that :) but still nothing running on 4040
[2013-12-12 23:56:49 -0500] juliancdunn: I think that's an error
[2013-12-12 23:56:54 -0500] juliancdunn: should be nginx running on port 80 and 443
[2013-12-12 23:58:35 -0500] queuetip: well, netstat tells me nginx is running on 80, but hitting the ip directly i see nothing loading
[2013-12-12 23:59:24 -0500] juliancdunn: like it shows a blank page, or...?
[2013-12-12 23:59:56 -0500] queuetip: juliancdunn: sec i'm trying again, right now it's just loading loading loading

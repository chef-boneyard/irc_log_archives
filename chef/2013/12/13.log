[2013-12-13 00:00:20 -0500] juliancdunn: it is probably going to try to redirect you to port 443
[2013-12-13 00:00:28 -0500] juliancdunn: so hopefully that's open on your firewall
[2013-12-13 00:00:51 -0500] queuetip: juliancdunn: ahh maybe that's the problem, lemme add that rule
[2013-12-13 00:01:40 -0500] queuetip: ah, it did instantly put me on https
[2013-12-13 00:01:45 -0500] queuetip: and now i see it!!!
[2013-12-13 00:01:51 -0500] queuetip: thanks juliancdunn!
[2013-12-13 00:01:51 -0500] juliancdunn: (claps)
[2013-12-13 00:02:02 -0500] juliancdunn: no sweat! I'll have our doc writer remove that thing about port 4040
[2013-12-13 00:02:10 -0500] queuetip: yeah that part was really confusing
[2013-12-13 00:02:19 -0500] juliancdunn: it's wrong. that is like Chef 0.9 stuff
[2013-12-13 00:02:26 -0500] queuetip: i see :)
[2013-12-13 00:02:35 -0500] coderanger: juliancdunn: Chef 10 server
[2013-12-13 00:02:39 -0500] coderanger: So not that old :P
[2013-12-13 00:08:22 -0500] Sauraus: Is there a way to use the value of a node attribute in a role definition?
[2013-12-13 00:08:51 -0500] Sauraus: I have a recipe that goes like node['system']['listen'
[2013-12-13 00:08:58 -0500] Sauraus: ] = 7777
[2013-12-13 00:09:24 -0500] Sauraus: sorry
[2013-12-13 00:09:28 -0500] Sauraus: ] = 1.1.1.1
[2013-12-13 00:09:56 -0500] Sauraus: but when applying the role to a node I want to dynamicly replace the 1.1.1.1 with node['fqdn']
[2013-12-13 00:13:35 -0500] adnichols: Sauraus: you would need to set a higher precidence value for that attribute somewhere (like in the role)
[2013-12-13 00:13:36 -0500] maplebed: anybody else having issues logging in to tickets.opscode.com? it's giving me a bad password thing even after resetting mine. :(
[2013-12-13 00:14:29 -0500] Sauraus: How would I set the precidence value?
[2013-12-13 00:15:05 -0500] adnichols: http://docs.opscode.com/essentials_cookbook_attribute_files.html read about precedence and types
[2013-12-13 00:17:08 -0500] adnichols: Sauraus: the roles docs talk about how you can specify either default or override attributes
[2013-12-13 00:28:42 -0500] Sauraus: I think I understand the mechanics, however it's still puzzling for me how to assign a value contained in an attribute on the node to an attribute in a cookbook at run time through a recipe on the chef server, does that even make sense?
[2013-12-13 00:36:43 -0500] flaccid: Sauraus: i'm not sure that it does :(
[2013-12-13 00:36:52 -0500] Sauraus: :D
[2013-12-13 00:37:32 -0500] Sauraus: let me try again
[2013-12-13 00:37:59 -0500] Sauraus: I have 8 environments with 1 node in each, and a role with 1 cookbook
[2013-12-13 00:38:51 -0500] Sauraus: the cookbook defines an attribute default['memcached']['listen'] = ''
[2013-12-13 00:39:33 -0500] Sauraus: The cookbook is on the runlist for the role, which is assigned to each node in the 8 different environments.
[2013-12-13 00:40:35 -0500] Sauraus: On my environment I define several attributes in the json doc, specifying things like memory etc. for memcached
[2013-12-13 00:41:48 -0500] Sauraus: During the chef run on a node I need to assign the value of node['fqdn'] to node['memcached']['listen'], how do I do this?
[2013-12-13 00:42:49 -0500] flaccid: use node.set in the recipe or just do it in the cookbook attributes/default.rb
[2013-12-13 00:43:02 -0500] flaccid:  default['memcached']['listen'] = node['fqdn']
[2013-12-13 00:43:02 -0500] Sauraus: I could modify the cookbook and make it default['memcached']['listen'] = node['fqdn'], but that feels like a hack and really bad
[2013-12-13 00:43:27 -0500] flaccid: sounds like a good thing to me, although you don't listen on hostnames
[2013-12-13 00:44:18 -0500] flaccid: https://github.com/opscode-cookbooks/memcached/blob/master/attributes/default.rb#L24 does 0.0.0.0
[2013-12-13 00:44:43 -0500] flaccid: if you have a wrapper style cookbook, you could set it to what you want in a recipe
[2013-12-13 00:45:05 -0500] Sauraus: Yes but 0.0.0.0 is a bad idea in my case as I have multiple NICs in the system and I don't want memcached listening on anything else but a specific NIC
[2013-12-13 00:45:42 -0500] flaccid: thats why you can set the node attribute value how you want, that is merely a default
[2013-12-13 00:47:20 -0500] Sauraus: I understand that, however my thinking has always been to leave cookbooks alone as much as possible, and to leverage the attribute hierarchy in Chef to manager any 'overrides' as needed, but it looks like this is not possible with Chef at present.
[2013-12-13 00:48:14 -0500] flaccid: you don't have to touch a cookbook in this case
[2013-12-13 00:48:54 -0500] Sauraus: You mean write a wrapper around the default cookbook that only sets the attribute for me?
[2013-12-13 00:54:54 -0500] nshenry03_: Does anyone know how to skip a block of code in test kitchen?
[2013-12-13 00:56:05 -0500] nshenry03_: I'm writing a simple wrapper cookbook for jenkins (to install some packages) and when ever I add [depends 'jenkins'] to metadata kitchen fails
[2013-12-13 00:58:48 -0500] nshenry03_: I would rather just 'skip' (the depends in metadata and the includes in the recipe) and let opscode worry about testing the jenkins cookbook
[2013-12-13 01:24:16 -0500] flaccid: Sauraus: just set the node attribute value on the node, but if you really need it to be dynamic, derived from another attribute you would need to do that with cookbook code
[2013-12-13 01:24:57 -0500] Sauraus: argh... such a shame :(
[2013-12-13 01:25:17 -0500] Sauraus: Anyway's what about this: http://pastebin.com/fd3x0vWr postgresql duplicate keys on a brand new server...
[2013-12-13 01:27:03 -0500] flaccid: Sauraus: is the ip dynamic or something, can't memcached listen on a interface name?
[2013-12-13 01:27:34 -0500] Sauraus: memcached needs an IP address
[2013-12-13 01:27:47 -0500] flaccid: node['fqdn'] is not an ip address
[2013-12-13 01:34:08 -0500] Sauraus: 'hacked' the cookbook to do what I need, really don't like this approach at all because it pushes env/role/node specific configuration attributes into a cookbook which is a no-ho IMHO
[2013-12-13 01:38:35 -0500] Sauraus: memcached works with the fqdn just fine as well :)
[2013-12-13 01:38:39 -0500] Sauraus: yay
[2013-12-13 01:48:29 -0500] Sauraus: Anyone have an idea how to track this down: http://pastebin.com/khcms4ir
[2013-12-13 01:49:16 -0500] flaccid: Sauraus: this is why wrapper style cookbooks are good because you don't hack upstream sources
[2013-12-13 01:50:30 -0500] Sauraus: IMHO this should be handled server side at runtime and not in a cookbook.
[2013-12-13 01:51:15 -0500] flaccid: Sauraus: well you can do it in rightscale heh, but i don't think you can do it with chef/hosted chef
[2013-12-13 01:53:34 -0500] queuetip: i'm having trouble understanding something, i'm trying to bootstrap a client server, but knife expects a fqdn of the client, but in my case the client is in a private subnet that only has access inbound via the chef server and via a bastion host
[2013-12-13 01:53:55 -0500] queuetip: in my case do i have to manually create the clients on each server in my private subnet?
[2013-12-13 01:54:19 -0500] queuetip: or am i thinking about this incorrectly
[2013-12-13 01:55:01 -0500] flaccid: queuetip: you can't set a fqdn on the client before bootstrap?
[2013-12-13 01:55:45 -0500] queuetip: flaccid: i could but then i'd also have to edit my hosts file to point to each server right?
[2013-12-13 01:56:32 -0500] queuetip: flaccid: although i guess i could do that and then do all the bootstrapping from the chef server itself...
[2013-12-13 01:56:36 -0500] flaccid: maybe i'm misunderstanding. whats a client server?
[2013-12-13 01:57:00 -0500] queuetip: flaccid: just a client that the open source chef server can deploy to
[2013-12-13 01:57:53 -0500] queuetip: i'm just trying to figure out best case set up for this, given that the boxes i need chef to install stuff on are all in a private subnet with no public ip and no outside access except via the chef server and my bastion host
[2013-12-13 01:58:39 -0500] flaccid: so you have a oss chef server running ok and this is just client bootstrapping?
[2013-12-13 01:58:46 -0500] queuetip: yes
[2013-12-13 01:58:55 -0500] flaccid: set fqdn on client, knife bootstrap
[2013-12-13 01:59:33 -0500] queuetip: right, but client has no public ip address, so i'd have to knife bootstrap from the server itself
[2013-12-13 01:59:55 -0500] queuetip: and update the server's host file to actually map those private ips to their respective fqdn's
[2013-12-13 02:00:04 -0500] flaccid: i'm talking on a node now that has no public ip address and is bootstrapped
[2013-12-13 02:00:30 -0500] queuetip: ohhh, you mean knife bootstrap on the node itself
[2013-12-13 02:00:30 -0500] flaccid: do you mean you can't run commands on the client or something ?
[2013-12-13 02:00:36 -0500] queuetip: i can ssh into them and do that
[2013-12-13 02:00:51 -0500] flaccid: that sounds like the easiest path, but i'm not chef server/client expert yet
[2013-12-13 02:01:12 -0500] queuetip: flaccid: yeah... i can't really think of an easier way either given my network setup
[2013-12-13 02:01:57 -0500] flaccid: are those client nodes in a cloud or some vm thing or something?
[2013-12-13 02:03:16 -0500] queuetip: yes, in vpc on amazon
[2013-12-13 02:03:34 -0500] queuetip: the clients are only reachable via the chef server and via the bastion host
[2013-12-13 02:03:45 -0500] queuetip: and i'm certainly not going to install anything else on the bastion host
[2013-12-13 02:04:08 -0500] queuetip: so yeah, i think my only 2 options are to ssh into each private box and bootstrap them one at a time, or do it from the chef server itself
[2013-12-13 02:04:42 -0500] flaccid: for new ones do http://docs.opscode.com/plugin_knife_ec2.html
[2013-12-13 02:05:00 -0500] flaccid: or yes do things from chef server
[2013-12-13 02:17:43 -0500] queuetip: flaccid: yeah, although, part of the problem though too is that each client needs to have a FQDN
[2013-12-13 02:17:47 -0500] queuetip: i don't really understand that about chef
[2013-12-13 02:17:51 -0500] queuetip: why require a FQDN?
[2013-12-13 02:17:55 -0500] queuetip: why not just straight IPs?
[2013-12-13 02:18:23 -0500] queuetip: because if i set up a proxy and that will forward my internal private ips in my private subnet from the chef box to the appropriate boxes then that would be a nice solution
[2013-12-13 02:18:44 -0500] queuetip: but since chef requires everything to have a FQDN then it becomes a PITA because then i have to update hosts file on any box that i run this from
[2013-12-13 02:19:05 -0500] queuetip: why does chef require fqdn and not straight IP addresses? why should chef even care if a box has a fqdn or not?
[2013-12-13 02:20:55 -0500] queuetip: some of these requirements are making me extremely wary of chef and making me learn toward something less strict like sprinkle or ansible : /
[2013-12-13 02:21:56 -0500] chip-: Chef only requires a valid FQDN on the server.
[2013-12-13 02:22:19 -0500] chip-: Nodes running the client will by default be named whatever 'hostname -f' returns, but you can override that to name them whatever you want.
[2013-12-13 02:24:12 -0500] patmaddox: chip-: that brings up a question I've got...I'm setting up a vagrant box for my team to use, and by default the box is named "precise64" so that's what the node defaults to. Do I need to set it up to have a unique node name per team member, or can we all share a node name for this dev box?
[2013-12-13 02:24:39 -0500] queuetip: chip-: ohhhhh, weird, from what i read i thought it required a resolvable fqdn, but if the client doesn't have to resolve, then nice
[2013-12-13 02:24:52 -0500] chip-: Which provisioner are you using in Vagrant? If you're doing the full client provisioner then you'll wind up with name collisions.
[2013-12-13 02:25:04 -0500] chip-: If you're using the chef-zero or chef-solo provisioners, then you should be fine.
[2013-12-13 02:25:13 -0500] patmaddox: yeah I've got a chef server set up, so it's doing chef-client
[2013-12-13 02:25:25 -0500] patmaddox: okay
[2013-12-13 02:25:27 -0500] chip-: That'll definitely lead to name collisions.
[2013-12-13 02:26:00 -0500] chip-: If your devs understand ENVARS, you could have the Vagrantfile say $MYNAME-precise64 as hostname, and generate it dynamically that way
[2013-12-13 02:26:08 -0500] stormerider: so, curious, how many folks are doing testing with vagabond? i'm just getting my LXC systems up and running for it, hoping to dive into the test side of things next week
[2013-12-13 02:26:14 -0500] queuetip: chip-: except that on my private subnet boxes, this returns: [ec2-user@ip-10-0-30-30 ~]$ hostname -f hostname: Unknown host
[2013-12-13 02:26:22 -0500] queuetip: chip-: but i can override that?
[2013-12-13 02:26:34 -0500] patmaddox: so what I want to end up with is a vagrant box with everything on it, so people don't need to have knife installed on their dev machines or even know it exists
[2013-12-13 02:26:37 -0500] chip-: Also helpful: The vagrant-butcher plugin, which will delete the node & client object when vagrant destroy gets run
[2013-12-13 02:26:53 -0500] chip-: patmaddox: Cool.
[2013-12-13 02:26:55 -0500] chip-: Good goal
[2013-12-13 02:27:21 -0500] patmaddox: and at this point I'm thinking I need to set up an initial vagrant box that has chef-client on it, and then image that for them to install
[2013-12-13 02:27:32 -0500] patmaddox: knife bootstrap works but that requires them to have knife on their main machines
[2013-12-13 02:27:40 -0500] patmaddox: does that sound like I'm on the right track?
[2013-12-13 02:27:53 -0500] chip-: patmaddox: Yeah. The only trick will be making sure each dev has a unique node name.
[2013-12-13 02:28:07 -0500] chip-: But again, you can dynamically generate that in the Vagrantfile based on a host envar or something similar.
[2013-12-13 02:28:39 -0500] patmaddox: yeah that shouldn't be a problem
[2013-12-13 02:28:47 -0500] patmaddox: if I can figure out where the node name gets set :)
[2013-12-13 02:29:11 -0500] chip-: patmaddox: vagrant.vm.name I think? I'd have to look
[2013-12-13 02:29:22 -0500] chip-: queuetip: Well, your hosts files be busted. :P But! If you're using knife ec2 or knife bootstrap to bring a machine up, then the -N myname flag will set the name for you.
[2013-12-13 02:30:07 -0500] patmaddox: found in http://stackoverflow.com/questions/16589235/how-can-i-override-the-chef-node-name-in-vagrant
[2013-12-13 02:30:14 -0500] patmaddox: chef.node_name
[2013-12-13 02:31:11 -0500] chip-: One up on me. :)
[2013-12-13 02:31:27 -0500] chip-: I usually do Vagrant dev in chef-zero mode.
[2013-12-13 02:31:40 -0500] regork: Hi, I have a question about a service not getting restarted when a config file is modifed.
[2013-12-13 02:32:13 -0500] regork: also, should I use :reload or :restart for sshd if /etc/ssh/sshd_config is modified?
[2013-12-13 02:32:52 -0500] stormerider: reload works on ubuntu, assuming you have the service declared as supporting it in chef
[2013-12-13 02:33:25 -0500] stormerider: actually newer ubuntus the service is just ssh
[2013-12-13 02:33:40 -0500] stormerider: not sure how far back that goes
[2013-12-13 02:34:13 -0500] regork: ok, I just created the sshd service resource with action: nothing
[2013-12-13 02:34:44 -0500] patmaddox: well I'm *trying* to write one set of recipes that will work for setting up a dev box as well as staging and production environments... so basically a dev box just has all the web/db/app roles on it, and all the versions match what we use in production
[2013-12-13 02:34:56 -0500] regork: the template for /etc/ssh/sshd_config then notifies it with reload but apparently sshd is never restarted. This is on CentOS unfortunately
[2013-12-13 02:34:57 -0500] patmaddox: which seems feasible based on my limited understanding of chef, we'll see how it pans out
[2013-12-13 02:38:55 -0500] regork: On this page, there's a section labeled: 'Restart a service when a template is modified' http://docs.opscode.com/resource_template.html
[2013-12-13 02:39:29 -0500] regork: does that mean the the actual config file is modified or just the template on the server during next chef-client run?
[2013-12-13 02:40:27 -0500] regork: I'm trying to restart sshd if /etc/ssh/sshd_config is modified (i.e. a new config file is generated from a newer template file).
[2013-12-13 02:40:58 -0500] regork: I've tried both reload and restart in a template like this:
[2013-12-13 02:41:02 -0500] regork: template "/etc/ssh/sshd_conf" do   notifies :reload, "service[sshd]" end
[2013-12-13 02:41:36 -0500] regork: but when I run ps, sshd still shows as running the pre chef-client run process
[2013-12-13 02:42:01 -0500] patmaddox: is there a good example cookbook that has basically everything I might want to do? I'm unclear about defining roles...I thought I had to do that either via the server or with knife, but the docs refer to a Ruby DSL for roles, but I don't see any examples of that
[2013-12-13 02:42:40 -0500] patmaddox: which is kind of what I'm experiencing with the docs in general...lots of info about the details of how stuff works, but not a whole lot on how to actually do it. And I suspect at this point my best bet is just looking at example code
[2013-12-13 02:43:04 -0500] jpoole: anyone have an example of retrieving files via s3 in order to bootstrap a node
[2013-12-13 02:43:16 -0500] jpoole: oh with aws roles too
[2013-12-13 02:43:48 -0500] jpoole: regork put a notify on the sshd_config
[2013-12-13 02:43:53 -0500] regork: examples of ruby DSL for roles here: http://docs.opscode.com/essentials_roles.html
[2013-12-13 02:43:59 -0500] jpoole: thanks regork
[2013-12-13 02:44:14 -0500] jpoole: oh wait
[2013-12-13 02:44:18 -0500] jpoole: that's chef roles
[2013-12-13 02:44:21 -0500] regork: I have a notifies but it's not restarting sshd
[2013-12-13 02:44:30 -0500] jpoole: you have a notify on the service, or on the file?
[2013-12-13 02:44:31 -0500] regork: which role are you referring to?
[2013-12-13 02:44:36 -0500] jpoole: AWS roles
[2013-12-13 02:44:51 -0500] regork: file (i.e. template)
[2013-12-13 02:45:06 -0500] regork: sorry, not familiar with AWS roles
[2013-12-13 02:45:38 -0500] jpoole: regork do you have a service defined for sshd too?
[2013-12-13 02:46:17 -0500] jpoole: service "apache" do
[2013-12-13 02:46:17 -0500] jpoole:   supports :restart => true, :reload => true
[2013-12-13 02:46:17 -0500] jpoole:   action :enable
[2013-12-13 02:46:17 -0500] jpoole:   subscribes :reload, "template[/tmp/somefile]", :immediately
[2013-12-13 02:46:18 -0500] jpoole: end
[2013-12-13 02:46:20 -0500] jpoole: something like that
[2013-12-13 02:47:00 -0500] regork: thanks, subscribes is just the flip side of notifies, right?
[2013-12-13 02:47:13 -0500] jpoole: i think so
[2013-12-13 02:47:16 -0500] jpoole: http://docs.opscode.com/resource_service.html
[2013-12-13 02:47:25 -0500] jpoole: search for : Reload a service using a template
[2013-12-13 02:49:23 -0500] flaccid: queuetip: you can setup an fqdn without dns resolution, just set the hostname correctly..
[2013-12-13 02:50:00 -0500] flaccid: queuetip: i'm not sure technically its like that but you could probably look at the code or find something historical on it. i am on the fence about it
[2013-12-13 02:51:14 -0500] flaccid: oh i see you guys discussed it in depth cool
[2013-12-13 02:51:32 -0500] patmaddox: regork: I'm confused about where that goes...the docs say to put them in a roles/ subdir of chef repo, which makes sense. I tried a "knife role create" and that seems to create it directly on the server, using JSON. What I'd like to do is define the roles in ruby, in my local repo, and upload them to the chef server
[2013-12-13 02:51:51 -0500] patmaddox: but now I'm wondering if I'm getting a bit confused, that the cookbooks repo I have locally is a totally different thing from the chef-repo on the server
[2013-12-13 02:53:06 -0500] jpoole: you may need to knife upload .
[2013-12-13 02:53:51 -0500] patmaddox: okay so if I want to define a role using ruby, I do use my normal cookbooks repo, and just knife upload instead of using something like knife role create
[2013-12-13 02:53:58 -0500] queuetip: flaccid: i mean you can get it resolved editing /etc/hosts but to do that on a large number of boxes on a private subnet sucks
[2013-12-13 02:55:05 -0500] flaccid: queuetip: thats not dns resolution but it is resolution. the thing is, why isn't the hostname set properly to begin with..
[2013-12-13 02:55:18 -0500] flaccid: ah well i was going to get an example
[2013-12-13 03:35:52 -0500] ggolin: miah, you got a moment?
[2013-12-13 03:39:36 -0500] nate`: So, it appears the rest-client portion can't tell if a s3 file is text or binary.  Should I create some form of patch, how long until it shows up in an RPM?
[2013-12-13 06:01:56 -0500] miah: sup
[2013-12-13 08:14:51 -0500] st_iron: hello
[2013-12-13 08:22:17 -0500] nobayz: j #learnchef
[2013-12-13 09:25:00 -0500] irr: Ohai Chef's. Anyone knows how to speed up opensource chef server to return cookbooks faster? I'm using Vagrant+chef-zero a lot and installing cookbooks from my production chef_api to chef-zero, it always soo slow
[2013-12-13 09:25:29 -0500] irr: there is no load at my chef server though
[2013-12-13 09:25:32 -0500] irr: it's just slow
[2013-12-13 09:42:49 -0500] flaccid: irr: sounds normal for ruby
[2013-12-13 09:43:52 -0500] irr: flaccid: I believe there's erlang beam's :)
[2013-12-13 09:45:26 -0500] brzm: hello, is there a way to get rid of empty hashes in node object if I setup default_attributes in role? i have a lot of "service_X" : { "someparam": { } } in node which is filled in role.
[2013-12-13 10:30:20 -0500] GreatSUN: hi all
[2013-12-13 10:30:57 -0500] GreatSUN: short question... in chef-solo 11.6 I don't get output from Chef::Log when in recipe directly, only when I am in a ruby block or such
[2013-12-13 10:31:10 -0500] GreatSUN: is that default/wished behavior?
[2013-12-13 10:34:19 -0500] workmad3: GreatSUN: is the logging definitely not happening, or is it just not happening when you expect?
[2013-12-13 10:34:58 -0500] workmad3: GreatSUN: as a call to Chef::Log outside of something like a ruby_block resource will (and always has) happened at recipe compile-time, not during convergance
[2013-12-13 10:35:29 -0500] GreatSUN: workmad3: simple recipe just with Chef::Log.info('test') does not output test
[2013-12-13 10:36:03 -0500] GreatSUN: maybe there is some option that I am missing when calling chef-solo
[2013-12-13 10:36:05 -0500] workmad3: hmm... they could have altered the log level during compile :)
[2013-12-13 10:36:16 -0500] workmad3: GreatSUN: I'd always suggest you use the log resource personally
[2013-12-13 10:36:25 -0500] workmad3: GreatSUN: 'log "test"'
[2013-12-13 10:36:53 -0500] workmad3: GreatSUN: as logging during recipe compile is rarely what people really want
[2013-12-13 10:38:20 -0500] GreatSUN: hmmm...
[2013-12-13 10:38:22 -0500] GreatSUN: ok
[2013-12-13 10:38:44 -0500] GreatSUN: but sometimes I need logging also at compile time
[2013-12-13 10:39:01 -0500] GreatSUN: maybe that shall be puts then?
[2013-12-13 10:39:31 -0500] workmad3: less than ideal
[2013-12-13 10:39:51 -0500] workmad3: if you use a higher log level, does it still not appear?
[2013-12-13 10:39:58 -0500] workmad3: Chef::Log.warn("test") for example
[2013-12-13 10:40:01 -0500] GreatSUN: workmad3: I just tried up to warn
[2013-12-13 10:40:07 -0500] GreatSUN: warn didn't appear
[2013-12-13 10:40:15 -0500] GreatSUN: info, debug and warn
[2013-12-13 10:40:25 -0500] GreatSUN: didn't try error though
[2013-12-13 10:42:06 -0500] workmad3: ok... maybe someone with better knowledge of chef internals will know
[2013-12-13 10:51:57 -0500] GreatSUN: workmad3: solution found
[2013-12-13 10:52:07 -0500] GreatSUN: --force-logger is your friend
[2013-12-13 10:52:15 -0500] workmad3: hmm, interesting
[2013-12-13 10:52:49 -0500] GreatSUN: seams like the new formatter option is not sending logoutput to stdout/log in compile time
[2013-12-13 10:52:57 -0500] GreatSUN: and it is no matter what level it is
[2013-12-13 10:53:02 -0500] GreatSUN: could be a bug ;-)
[2013-12-13 11:03:40 -0500] GreatSUN: bbl -> lunch
[2013-12-13 11:36:32 -0500] zaargy: anyone tried to run a command on a node and save the output to a databag?
[2013-12-13 11:48:29 -0500] workmad3: zaargy: afaik, databags can't be updated during a chef client run... and if you figure out a way, it's pretty dangerous anyway due to it introducing a distributed race condition
[2013-12-13 12:07:44 -0500] joelmoss: hi all
[2013-12-13 12:07:56 -0500] joelmoss: what's the best way to set a variable inside a recipe?
[2013-12-13 12:08:08 -0500] joelmoss: is this sufficient?
[2013-12-13 12:08:09 -0500] joelmoss: node[:scout][:key] = keys['key']
[2013-12-13 12:08:30 -0500] cientifico: I am not too sure, but you have to set the priority of the variable
[2013-12-13 12:08:36 -0500] joelmoss: or use override?
[2013-12-13 12:08:53 -0500] cientifico: node.default[:scout][:key]
[2013-12-13 12:09:02 -0500] cientifico: node.normal[:scout][:key]
[2013-12-13 12:09:03 -0500] cientifico: ...
[2013-12-13 12:09:36 -0500] cientifico: which one to choose depends on the needs
[2013-12-13 12:11:24 -0500] joelmoss: thx
[2013-12-13 12:21:36 -0500] DandyPandy: When testing with chefspec, is it generally considered to be worth it to test all of the values defined in your templates?
[2013-12-13 12:24:46 -0500] dark_dr4g0n: hello. how can i use users cookbook for setup id_rsa for user? if i add key in one string in data bag item - key is broken
[2013-12-13 12:25:23 -0500] jbasko: Hi. I have created a working LWRP and it is working all fine, but now I want to notify it from outside (from a wrapping recipe). I want to run one of its actions if a template (managed by the wrapping recipe) changes. It does not seem to work. Is it supported at all? I am using "use_inline_resources" mode.
[2013-12-13 12:26:20 -0500] jbasko: I am trying to send a notification with: notifies :reload, "cookbook_resource[name]", :delayed
[2013-12-13 12:26:40 -0500] jbasko: And I get an error "Cannot find a resource for action_reload on centos version 6.5"
[2013-12-13 12:33:08 -0500] workmad3: jbasko: did you add your cookbook as a dependency in the wrapping cookbook metadata?
[2013-12-13 12:34:03 -0500] jbasko: workmad3: yes, i did
[2013-12-13 12:40:15 -0500] jbasko: workmad3: it appears that the resource is found because if i change the name in notifies message to nonsense, it fails very fast and says exactly that in the error message:.. is configured to notify resource nonexistent_resource[wrapping_cookbook] with action reload, but nonexistent_resource[wrapping_cookbook] cannot be found in the resource collection.
[2013-12-13 12:41:16 -0500] jbasko: do i have to put anything in the resource file to tell it to listen/respond to notifications?
[2013-12-13 12:45:17 -0500] jbasko: workmad3: oh i'm so stupid. i actually didn't have that action defined in that lwrp. i had defined it in another one. thanks for trying to help. your question helped me to look into the problem more carefully!
[2013-12-13 12:47:12 -0500] DandyPandy: dark_dr4g0n: for multi-line certs and keys, I use this: tr '\n' '`' < id_rsa | sed 's/`/\\n/g'
[2013-12-13 12:47:38 -0500] DandyPandy: dark_dr4g0n: that puts it into a single line with \n embedded where there would normally be a newline
[2013-12-13 12:48:33 -0500] DandyPandy: there's probably a way to do it with just sed, but that was the way I figured out
[2013-12-13 12:52:01 -0500] dark_dr4g0n: thanks!
[2013-12-13 12:55:36 -0500] jpoole: this maybe a silly question, but I am dynamically writing out my client.rb, and I want to specify the environment "dev" from a BASH environment variable
[2013-12-13 12:55:48 -0500] jpoole: can i just do environment "echo $CHEF_ENV"
[2013-12-13 12:55:48 -0500] jpoole: ?
[2013-12-13 12:56:03 -0500] jpoole: err environment=`echo $CHEF_ENV`
[2013-12-13 12:56:28 -0500] tscanausa: jpoole: I think you can just do ENV['CHEF_ENV']
[2013-12-13 12:56:40 -0500] jpoole: in the client.rb?
[2013-12-13 12:58:11 -0500] tscanausa: jpoole: ENV will give you access to all system environment variables, so swap echo $CHEF_ENV with ENV['CHEF_ENV']
[2013-12-13 12:58:35 -0500] jpoole: brilliant thanks
[2013-12-13 13:26:31 -0500] nate`: Well apparently that didn't fix it.  Stupid getting binary files
[2013-12-13 13:38:46 -0500] nate`: is s3_file the only damn cookbook that offers an lwrp for s3?
[2013-12-13 13:46:31 -0500] henk76: have a great weekend all.... hope it treats you well
[2013-12-13 14:00:23 -0500] clocKwize: how would I go about overriding a template in a cookbook?
[2013-12-13 14:00:47 -0500] cpuguy83: clocKwize: http://stackoverflow.com/questions/15933157/replacing-a-template-in-a-wrapper-cookbook
[2013-12-13 14:01:01 -0500] clocKwize: I read that, I don't know what a wrapper cookbook is
[2013-12-13 14:01:08 -0500] clocKwize: I don't have one, I'm just doing stuff in a role
[2013-12-13 14:01:49 -0500] cpuguy83: clocKwize: http://realityforge.org/code/2012/11/19/role-cookbooks-and-wrapper-cookbooks.html
[2013-12-13 14:01:56 -0500] cpuguy83: clocKwize: Google is your friend
[2013-12-13 14:04:12 -0500] clocKwize: hmm, so I need to define another cookbook
[2013-12-13 14:08:06 -0500] cpuguy83: clocKwize: A wrapper cookbook is simply a cookbook that includes another cookbook for the purposes of modifying the default behavior of it.
[2013-12-13 14:08:15 -0500] clocKwize: I see
[2013-12-13 14:08:27 -0500] clocKwize: I'll go ahead and do that then, if thats the standard way to go about it
[2013-12-13 14:08:30 -0500] clocKwize: thanks
[2013-12-13 14:09:07 -0500] clocKwize: 1 more question - I want to check my chef-repo in to source control, but I don't want all my aws keys and stuff checked in, they are in data bag files, what is the best practice?
[2013-12-13 14:11:11 -0500] clocKwize: I've just added data_bags/*/*.json to .gitignore, then added *.json.example files
[2013-12-13 14:11:12 -0500] cpuguy83: clocKwize: Pretty much just however you would normally secure these things.
[2013-12-13 14:11:33 -0500] cpuguy83: You could use an encrypted databag... but IMHO those are completely pointless.
[2013-12-13 14:11:35 -0500] gregkare: You can use encrypted data bags, but then you have to find a way to distribute the secret key
[2013-12-13 14:12:06 -0500] cpuguy83: There's also Chef-Vault
[2013-12-13 14:12:56 -0500] cpuguy83: http://www.getchef.com/blog/2013/09/19/managing-secrets-with-chef-vault/
[2013-12-13 14:14:11 -0500] clocKwize: ok
[2013-12-13 14:14:13 -0500] clocKwize: thanks
[2013-12-13 14:14:26 -0500] srini: Hi all!
[2013-12-13 14:14:37 -0500] srini: I am a new chef :)
[2013-12-13 14:15:24 -0500] gregkare: Are you Chef Client 11.8.4?
[2013-12-13 14:15:27 -0500] srini: I want to print something to the console from the chef recipe while bootstrapping and running...
[2013-12-13 14:15:32 -0500] srini: how do I do it?
[2013-12-13 14:16:29 -0500] srini: gregkare, 11.8.0
[2013-12-13 14:16:44 -0500] gregkare: Sorry that was a joke, you said you were a new chef
[2013-12-13 14:16:51 -0500] srini: :)
[2013-12-13 14:17:01 -0500] srini: trying to cook for the first time gregkare :)
[2013-12-13 14:17:25 -0500] gregkare: I can't find docs about logging on docs.opscode.com but you need to use Chef::Log
[2013-12-13 14:17:44 -0500] srini: Chef::Log prints to log file? or to the console! I was about to ask!
[2013-12-13 14:19:46 -0500] srini: gregkare, I just want to print and exit.... can you please help me write this into a recipe.... what should I use bash? script? service?
[2013-12-13 14:19:58 -0500] srini: I am sorry if I am asking something irrelevent
[2013-12-13 14:20:28 -0500] gregkare: exit the chef run?
[2013-12-13 14:20:42 -0500] gregkare: What are you trying to do?
[2013-12-13 14:20:46 -0500] Runkle: echo
[2013-12-13 14:23:51 -0500] zaargy: workmad3: it's only dangerous if you try and update it from multiple places i would think
[2013-12-13 14:23:54 -0500] zaargy: and i'm not doing
[2013-12-13 14:23:59 -0500] zaargy: + that
[2013-12-13 14:23:59 -0500] gregkare: Chef::Log prints to stdout by default, you can set a log location in /etc/chef/client.rb (log_location), you can also set the log level (log_level)
[2013-12-13 14:24:12 -0500] zaargy: regardless it doesn't seem to be possible indeed
[2013-12-13 14:24:32 -0500] workmad3: zaargy: that would mean that your recipe is intended to only ever be run on one single node... ever...
[2013-12-13 14:24:59 -0500] zaargy: workmad3: but i'm writing the item with a random value
[2013-12-13 14:25:06 -0500] zaargy: anyway bit of a moot point now
[2013-12-13 14:25:12 -0500] workmad3: ah, ok :) and yeah
[2013-12-13 14:25:49 -0500] workmad3: wait... it only really matters if you're writing to a random key
[2013-12-13 14:25:51 -0500] srini: gregkare, I am trying to track the control of an available cookbook... I trying to see how the attributes, roles and templates are contributing to eachother by just putting some print to console...
[2013-12-13 14:25:54 -0500] workmad3: or something unique to the node anyway..
[2013-12-13 14:26:05 -0500] workmad3: at which point, you may as well use node attributes
[2013-12-13 14:26:39 -0500] srini: gregkare, actually I have just created a cookbook, and trying to define few things in the attributes and trying to print the same through recipe
[2013-12-13 14:27:06 -0500] srini: gregkare, a kind of dummy recipes which only prints to console
[2013-12-13 14:41:01 -0500] srini: gregkare, I mean to ask how the simple block to be written in order to print to console at the time of bootstrap and exit...
[2013-12-13 14:41:15 -0500] srini: gregkare, Sorry if I am singling you out here!
[2013-12-13 14:44:06 -0500] gregkare: srini: http://docs.opscode.com/resource_log.html
[2013-12-13 14:44:33 -0500] srini: gregkare, Yes looking at it already! :) thanks!
[2013-12-13 14:45:20 -0500] gregkare: There's nothing to do to exit, if your run list only has your recipe that logs that's all it will do
[2013-12-13 14:51:13 -0500] mondo: is there a chef way of installing multiple rpms at once?  I need to do the equivalent of "yum localinstall rpm1 rpm2".  The reason is that in an upgrade situation both rpms have to be installed at the same time due to one being dependant on the other.
[2013-12-13 14:51:57 -0500] Runkle: well, you could actually call yum if you wanted.
[2013-12-13 14:52:21 -0500] mondo: yeah I guess I'll just have to use yum directly
[2013-12-13 14:52:35 -0500] Runkle: i've been cooking for less than a day tho, so i can't be truested.
[2013-12-13 14:52:49 -0500] mondo: :)
[2013-12-13 14:58:35 -0500] StefanS: How do I remove a default attribute? In the community postfix recipe there is inet_interfaces=loopback-only. In my wrapper recipe I want to remove it but if I do node.override I replace it not remove it. I don't want the line in my template file. How do I "unset" a node attribute?
[2013-12-13 14:59:54 -0500] srini: gregkare, Actually 'print' worked nicely!
[2013-12-13 15:00:15 -0500] StefanS: it appears the template iterated through each so if where missing it wont set it which is what I want.
[2013-12-13 15:01:14 -0500] srini: I am trying to 'print' an attribute... I am trying 'print #{[:cookbook][:attribute]}' is that correct?
[2013-12-13 15:01:26 -0500] srini: its not working
[2013-12-13 15:02:29 -0500] gregkare: srini: If you just want to print it to stdout, "puts node[:cookbook][:attribute]" will work
[2013-12-13 15:02:49 -0500] gregkare: But if you want it in a proper log file you shouldn't use puts
[2013-12-13 15:03:40 -0500] mondo: StefanS: This might help: http://stackoverflow.com/questions/2011654/undefine-variable-in-ruby
[2013-12-13 15:04:01 -0500] gregkare: You can even use "raise node[:cookbook][:attribute].inspect" if you want to display the value & stop the chef run right away, it's the flamethrower option
[2013-12-13 15:04:16 -0500] StefanS: mondo: thanks I will take a look
[2013-12-13 15:04:46 -0500] srini: gregkare, sounds great! I will use it and see!
[2013-12-13 15:06:00 -0500] mondo: StefanS: actually this might be more appropriate http://stackoverflow.com/questions/8929053/removing-elements-from-array-ruby
[2013-12-13 15:08:05 -0500] madjam002: Hi guys, does anyone know if it is possible to do include_recipe inside before_symlink during the deploy_revision task?
[2013-12-13 15:09:06 -0500] madjam002: I've tried it but I get the error: "deploy_revision: Name Error cannot find a resource for include_recipe"
[2013-12-13 15:18:13 -0500] StefanS: Doesn't work :( 'node.default['postfix']['main'].delete(['inet_interfaces'])'
[2013-12-13 15:18:32 -0500] StefanS: it still uses the default from the community attributes file
[2013-12-13 15:28:46 -0500] mondo: StefanS, the easiest thing might be to exclude it in the template file
[2013-12-13 15:29:36 -0500] StefanS: mondo: I think I found a solution. Not setting it in postfix just means its set to 'all' so I will set it to that.
[2013-12-13 15:30:14 -0500] StefanS: mondo: would still be nice to be able to remove attributes for community cookbooks that set things I dont want without having to copy the template and modify it.
[2013-12-13 15:35:17 -0500] jpoole: anyone know if i update AWS Role, do I need to rebuild an instance to get access to the metadata, or should it be relativley instant.
[2013-12-13 15:36:00 -0500] jpoole: maybe that's for #ec2
[2013-12-13 15:36:09 -0500] gchristensen: probably :)
[2013-12-13 15:36:54 -0500] jpoole: ##aws rather
[2013-12-13 15:43:42 -0500] daos: what's the best way to change the system's ruby version thru chef?
[2013-12-13 15:43:54 -0500] daos: i'm installing on a stock Ubuntu 12.04 AMI on EC2 and it ships with 1.8.7
[2013-12-13 15:44:04 -0500] daos: the omnibus seems to use a later version, but it's not system wide
[2013-12-13 15:44:19 -0500] daos: so when chef-client runs and tries to install some gem depends for recipes i get errors because the system ruby is too old
[2013-12-13 15:46:37 -0500] sethvargo: @daos you probably don't want to change the system ruby version. some internal tools rely on it
[2013-12-13 15:47:03 -0500] jpoole: i bootstrap before chef and install a newer version of ruby
[2013-12-13 15:47:12 -0500] sethvargo: I would recommend installing another ruby somewhere on your system (like /usr/local)
[2013-12-13 15:47:25 -0500] sethvargo: You _can_ update the system ruby using apt (since you said Ubuntu) and then update-alternatives
[2013-12-13 15:47:28 -0500] jpoole: the ancient version that ships with 12.04 is well fossilized
[2013-12-13 15:47:50 -0500] daos: jpoole: so how do you install the newer ruby?
[2013-12-13 15:48:04 -0500] phutchins: Anyone know if with Berkshelf or a similar tool I can include subdirectories of a git repo as a cookbook?
[2013-12-13 15:48:09 -0500] daos: you say you bootstrap before chef? so i'm guessing this isn't a chef bootstrap
[2013-12-13 15:48:20 -0500] sethvargo: @daos there are a lot of different ways -you can compile from source, use rbenv/rvm/chruby/an apt mirror
[2013-12-13 15:48:31 -0500] sethvargo: @phutchins you can as that question in #berkshelf
[2013-12-13 15:48:33 -0500] jpoole: nope, it's a pre-boot bootstrap
[2013-12-13 15:48:45 -0500] sethvargo: @phutchins hint: yes
[2013-12-13 15:48:46 -0500] daos: sethvargo: ah ok so you mean essentially a shell script?
[2013-12-13 15:49:06 -0500] daos: sethvargo: additionally, i have a cookbook that installs rbenv and sets the global ruby version. however, the chef-client doesn't recognize that version of ruby
[2013-12-13 15:49:08 -0500] sethvargo: @daos no - there are cookbooks for rbenv and rvm (and probably chruby, but I haven't personally seen it)
[2013-12-13 15:49:27 -0500] sethvargo: @daos it shouldn't - Chef manages its own Ruby in /opt/chef/embedded
[2013-12-13 15:49:28 -0500] phutchins: sethvargo: awesome :)
[2013-12-13 15:49:29 -0500] sethvargo: What are you trying to do
[2013-12-13 15:49:30 -0500] daos: when i run `knife ssh 'name:node' 'ruby -v'` it shows the system ruby
[2013-12-13 15:49:57 -0500] sethvargo: @phutchins you want to use `cookbook 'foo', git: '...', rel: 'relative_path/inside_repo/to_cookbook'`
[2013-12-13 15:50:02 -0500] daos: despite that rbenv has installed a newer ruby that users get when they login
[2013-12-13 15:50:17 -0500] phutchins: sethvargo: so as i mentioned before i'm stuck on chef-solo on opsworks... I am bypassing their rails layer and pulling in their rails cookbooks manually to get the same outcome but at the same time allow me to change the order of a few things...
[2013-12-13 15:50:20 -0500] sethvargo: @phutchins but be warned, it will clone your repo each time because of a critical bug I have yet to fix...
[2013-12-13 15:50:58 -0500] sethvargo: @daos that's because the old ruby is in your path first...
[2013-12-13 15:51:08 -0500] sethvargo: If you specify the full path to your rbenv-installed Ruby, you will get the correct version
[2013-12-13 15:51:17 -0500] sethvargo: Update your $PATH to prepend the rbenv version
[2013-12-13 15:51:27 -0500] phutchins: so I'd like to use berkshelf to pull say something like... git://github.com/aws/opsworks/cookbooks/unicorn.git
[2013-12-13 15:51:37 -0500] phutchins: *opsworks-cookbooks
[2013-12-13 15:51:38 -0500] phutchins: not /
[2013-12-13 15:51:54 -0500] sethvargo: @phutchins let's move to #berkshelf please? I don't want to crowd the #chef room with #berkshelf stuff
[2013-12-13 15:51:54 -0500] phutchins: and unicorn is not a .git :) so
[2013-12-13 15:52:30 -0500] phutchins: sethvargo: sure thing
[2013-12-13 15:52:38 -0500] daos: sethvargo: so when chef-client runs it doesn't get a full shell--currently, users source /etc/profile.d/rbenv.sh to get the proper ruby path
[2013-12-13 15:52:47 -0500] daos: you're saying i need to set it explicitly somewhere?
[2013-12-13 15:53:04 -0500] daos: the `source` happens automatically at login
[2013-12-13 15:53:30 -0500] sethvargo: @daos right, but chef-client doesn't perform a login
[2013-12-13 15:53:48 -0500] daos: so i'm confused where to set the path for chef-client
[2013-12-13 15:54:44 -0500] sethvargo: @daos you would do it in a recipe
[2013-12-13 15:55:13 -0500] daos: so before: require 'gem_name'
[2013-12-13 15:55:14 -0500] daos: ?
[2013-12-13 15:59:21 -0500] phutchins: daos: does the require gem need the path or whatever you're using that gem for?
[2013-12-13 15:59:38 -0500] sethvargo: @daos if you are requiring a gem during a CCR, you should use chef_gem to install it, not gem_package
[2013-12-13 15:59:39 -0500] phutchins: daos: my guess is you could do it after the require but before the use of that gem...
[2013-12-13 15:59:42 -0500] sethvargo: Then you won't have any of these problems
[2013-12-13 15:59:50 -0500] phutchins: ^ what he said :)
[2013-12-13 16:00:37 -0500] daos: sethvargo: so to reiterate... before i even 'require' it i should use a chef_gem resource to install it?
[2013-12-13 16:01:04 -0500] daos: what's a CCR?
[2013-12-13 16:01:05 -0500] sethvargo: @daos it's really hard to answer your question without having a context of what you're trying to do... that statement you made is very general and may or may not be true
[2013-12-13 16:01:13 -0500] sethvargo: @daos  = Chef Client Run
[2013-12-13 16:01:14 -0500] daos: sethvargo: i'm sorry for that
[2013-12-13 16:01:24 -0500] daos: i can show you a specific example
[2013-12-13 16:01:31 -0500] sethvargo: @daos that would be very helpful
[2013-12-13 16:01:48 -0500] daos: https://github.com/opsway/chef-hipchat/blob/master/recipes/default.rb
[2013-12-13 16:01:57 -0500] daos: sethvargo: that is the specific recipe that i'm adapting here
[2013-12-13 16:02:03 -0500] daos: it's an exception handler that sends exceptions to hipchat
[2013-12-13 16:02:21 -0500] sethvargo: @daos okay, so you're trying to make a handler?
[2013-12-13 16:02:23 -0500] daos: i apologize before--i didn't mean 'requre 'gemname''--i'm doing chef_gem after all
[2013-12-13 16:02:28 -0500] daos: (facepalm)
[2013-12-13 16:03:24 -0500] ohookins_: can someone clarify attribute merging for me? if you are dealing with an array or hash am I right in thinking they will always be merged, and can never be replaced entirely?
[2013-12-13 16:03:49 -0500] ohookins: at least that is my understanding from the docs
[2013-12-13 16:19:49 -0500] cassianoleal: is there a way, via chef-shell or otherwise, to print a compiled resource to the console?
[2013-12-13 16:27:40 -0500] los324: Good morning.  I'm new to Chef and I'm trying to get the generic-users cookbook to work, however I cannot seem to make it add the one user I put into my data bag.  I'm still confused fter reading the documentation here:  http://community.opscode.com/cookbooks/generic-users .  Does anyone here have experience with this cookbook?
[2013-12-13 17:03:03 -0500] jblancett: is anybody here currently using the firewall cookbook?
[2013-12-13 17:18:32 -0500] royr: I have chef run a bash script that performs more chef provisioning on the node. When done in this fashion I'm getting a Fatal:argument error: invalid byte sequence is US-ASCII. Anyone knows what's going on here?
[2013-12-13 17:24:52 -0500] nd__: Is there a way to tell `package` to use --nosignature when running with yum? Can't find anything
[2013-12-13 17:25:18 -0500] Takumo: nd__: Have you checked the yum cookbook for such an option?
[2013-12-13 17:25:45 -0500] Takumo: as `package` will likely  not have any awareness of the actual package manager
[2013-12-13 17:27:06 -0500] nd__: Takumo: Right, I also searched in yum_package (I had hopes that `package` would pass through something). Maybe it's named differently, but nothing with `signature` to find online
[2013-12-13 17:29:01 -0500] nd__: Takumo: Ah, maybe I'm getting it wrong with the repo and signatures I will try another way  normally I don't use CentOS.
[2013-12-13 17:35:14 -0500] gregkare: nd__: You can pass options with the yum_package resource, see the "options" attribute, http://docs.opscode.com/resource_yum.html
[2013-12-13 17:35:31 -0500] Runkle: so.. i'm re-doing our  infrastrure from the ground up. (new chef'd one along side of current one).. and part of my job was to segregate production from management from corp. the plan was to use VLANs to do it but I got thinking.. for the size of my infrastruture (25 vms) ... would there be any arguments against just using iptables on each vm. very very easily chef-able for management.
[2013-12-13 17:37:14 -0500] nd__: gregkare: Thanks! I just saw, when I do not provide a key attribute with yum_repository, `package` doesn't complain about unsigned packages
[2013-12-13 18:02:17 -0500] maplebed: re-asking from yesterday - has anybody successfully used knife ec2 server create with the -w flag using an ssh gateway (aka bastion host) to access the instance? Mine is failing as soon as it tries to start the bootstrap process.
[2013-12-13 18:03:01 -0500] jblancett: Runkle: in my opinion that just comes down to personal preference.  if you need to make changes do you want to make them in whatever interface you use to manage the vlans or just update your cookbook?
[2013-12-13 18:05:18 -0500] jblancett: maplebed: with a manual ssh connection can you access the same server using that gateway?
[2013-12-13 18:05:26 -0500] maplebed: yup.
[2013-12-13 18:05:33 -0500] maplebed: (using my ssh config with ProxyCommand)
[2013-12-13 18:05:39 -0500] jblancett: well thats all I got :P
[2013-12-13 18:06:06 -0500] maplebed: also, before closing direct ssh access to the security group, knife without the ssh gateway worked, so in terms of authentication and the AMI and all that jazz it should be fine too.
[2013-12-13 18:06:59 -0500] maplebed: I did find https://tickets.opscode.com/browse/KNIFE-422 which implies that at least one other person is trying (and failing) recently.
[2013-12-13 18:07:12 -0500] maplebed: I was hoping I might have at least someone claim it works for them...
[2013-12-13 18:07:34 -0500] maplebed: sadly I can't seem to log into tickets.opscode.com at the moment so I can't comment on that or file my own ticket.
[2013-12-13 18:07:38 -0500] Sauraus: How do I find our which file is causing a "incompatible character encodings: ASCII-8BIT and UTF-8" exception http://pastebin.com/khcms4ir
[2013-12-13 18:08:18 -0500] jblancett: Sauraus: I found an awk command for that purpose at one point, will try to find it again
[2013-12-13 18:08:44 -0500] maplebed: Sauraus: that error isn't saying taht cookbooks/index.html.haml is the culprit?
[2013-12-13 18:08:57 -0500] jblancett: grep --color='auto' -P -n "[\x80-\xFF]" cookbooks/*/templates/*/*
[2013-12-13 18:09:00 -0500] jblancett: try that
[2013-12-13 18:09:08 -0500] jblancett: modify the last bit if needed
[2013-12-13 18:09:10 -0500] maplebed: jblancett: nice.
[2013-12-13 18:11:08 -0500] jblancett: might be good to add an -R in there too in case its deeper
[2013-12-13 18:11:51 -0500] jblancett: so `grep --color='auto' -R -P -n "[\x80-\xFF]" cookbooks/*`
[2013-12-13 18:12:29 -0500] Sauraus: zip nothing :(
[2013-12-13 18:13:40 -0500] jblancett: =/
[2013-12-13 18:14:50 -0500] Sauraus: The only files returned are chef-server image files
[2013-12-13 18:15:06 -0500] jblancett: try adding "-# coding: UTF-8" to first line of cookbooks/show.html.haml
[2013-12-13 18:15:43 -0500] jblancett: just now looked at your pastebin
[2013-12-13 18:17:15 -0500] miah: meh
[2013-12-13 18:17:38 -0500] jblancett: and by add to the first line I mean make that the first line
[2013-12-13 18:18:44 -0500] jblancett: also make sure your editor is encoding that file in UTF-8 not ASCII-8BIT
[2013-12-13 18:21:17 -0500] ggolin: hello
[2013-12-13 18:21:26 -0500] ggolin: miah, got a moment?
[2013-12-13 18:22:04 -0500] miah: ask quesiton
[2013-12-13 18:23:36 -0500] ggolin: miah, im seeing a 100% repro bug in chef-redis, im wondering if you could help. on precise during the first tk converge things break when _server_service.rb tries to restart redis.
[2013-12-13 18:23:59 -0500] ggolin: return code is 127, file not foud
[2013-12-13 18:24:01 -0500] ggolin: n*
[2013-12-13 18:24:05 -0500] miah: ah. ya. can you file a issue or point me to one? i'm rewriting that whole thing.
[2013-12-13 18:24:08 -0500] ggolin: i can produce a stack here in a moment
[2013-12-13 18:24:33 -0500] ggolin: miah i did not find anything similar. let me produce a stack and i will open an issue.
[2013-12-13 18:27:42 -0500] los3241: Does anyone have experience with the generic-users cookbook?
[2013-12-13 18:28:36 -0500] los3241: specifically I'm trying to figure out how to add a user that I have in my data bag
[2013-12-13 18:29:15 -0500] los3241: I read this, but I just can't seem to find an example of how to add a user
[2013-12-13 18:29:23 -0500] los3241: http://community.opscode.com/cookbooks/generic-users
[2013-12-13 18:32:27 -0500] Sauraus: jblancett where is this file that I am to edit
[2013-12-13 18:32:38 -0500] Sauraus: the cookbooks directory does not contain any show.html
[2013-12-13 18:36:12 -0500] ggolin: miah: submitted #57
[2013-12-13 18:38:01 -0500] erthad: hiall
[2013-12-13 18:39:08 -0500] erthad: when I update the cookbook version constraint in webui it occasionally (quite often actually) does not save it and worse it resets version constraints on other cookbooks
[2013-12-13 18:39:21 -0500] erthad: is there an issue in bugtracker for that? I could not find the one
[2013-12-13 18:39:40 -0500] erthad: knife environment edit works fine otoh
[2013-12-13 18:40:47 -0500] erthad: sorry, I've refined the search and I see the tickets related to this now
[2013-12-13 18:41:26 -0500] Liquid--: Hello - does anyone have any resources for demonizing celery? I get it to daemonize on a chef run. however after a reboot I cannot run /etc/init.d/celery start, as it fails.
[2013-12-13 18:45:08 -0500] ajlobono: quick question, how do i check if an 'execute' resource is already queued to run?
[2013-12-13 18:45:40 -0500] maplebed: ajlobono: http://www.acidlogic.com/avoiding_the_devil.htm
[2013-12-13 18:45:43 -0500] maplebed: (sorry, not helpful)
[2013-12-13 18:47:41 -0500] jblancett: Sauraus: your pastebin stacktrace mentioned the file, so if its not there I'm not sure
[2013-12-13 18:47:45 -0500] ajlobono: basically i have two execute resources but i only want to run the second if the first has not been notified to run
[2013-12-13 18:47:56 -0500] erthad: how do versions in http://www.getchef.com/chef/install/ relate to versions in https://github.com/opscode/omnibus-chef-server/releases ? or am I looking to the wrong github repo?
[2013-12-13 18:49:21 -0500] erthad: sorry once again, I've look at chef-client's versions in the web page instead of server's
[2013-12-13 18:52:20 -0500] daos: sethvargo: yeah i'm trying to make a handler--sorry for late reply
[2013-12-13 18:56:23 -0500] erthad: still don't get it: what means server version "11.2.0-server" in https://tickets.opscode.com/browse/CHEF-4040 ? is it still unreleased?
[2013-12-13 18:56:24 -0500] jblancett: Saurus: /roblox/bin/opt/chef-server/embedded/service/chef-server-webui/app/views/cookbooks/show.html.haml
[2013-12-13 18:56:34 -0500] jblancett: Sauraus: * ^
[2013-12-13 18:57:17 -0500] cwj: daos: https://github.com/cwjohnston/chef-hipchat/ might be relevant to your interests
[2013-12-13 19:07:43 -0500] maplebed: Triumph! I figured out my knife ec2 ssh gateway woes. I'm pretty confident the problem lies in two parts - the ec2 plugin uses the -w flag to determine the gateway and ignores ~/.ssh/config but the knife bootstrap command honors ~/.ssh/config. I had a ProxyCommand for Host * in my ssh config, which I think the bootstrap was using, causing it to fight with the gateway I specified on the command line.
[2013-12-13 19:08:00 -0500] maplebed: jblancett: ^^^ in case you're curious
[2013-12-13 19:12:17 -0500] daos: cwj: that looks like pretty much the same cookbook that i'm using :)
[2013-12-13 19:12:24 -0500] daos: my issue is with ruby version
[2013-12-13 19:13:11 -0500] daos: i have rbenv setting the global ruby to 2.0.0 (which users get when they log in), but when chef tries to install the hipchat gem via "chef_gem 'hipchat'" it fails because the ruby version is 1.8.7
[2013-12-13 19:13:18 -0500] daos: trying to figure out why chef uses the old ruby
[2013-12-13 19:16:51 -0500] jblancett: maplebed: good to know!
[2013-12-13 19:25:23 -0500] cassianoleal: ohai! I have a resource that I want to check its fully compiled version... is there a way I can print it out to the console? (via chef-shell or otherwise)
[2013-12-13 19:28:23 -0500] geggam: is it possible to stack templates into one file ?
[2013-12-13 19:28:32 -0500] daw13: juliancdunn: I heard you say on the Food Fight Show that you use another users docs to create Windows base boxes.  Can you point me this?
[2013-12-13 19:30:26 -0500] patmaddox: I want to override this option: default['chef_server']['notification_email'] = "info@example.com" - if I put chef_server['notification_email'] = 'new_email' I get a nil object error for chef_server. Should that be node['notification_email'] instead? in my chef-server.rb
[2013-12-13 19:31:05 -0500] patmaddox: no, definitely not. what should it be?
[2013-12-13 19:34:21 -0500] Sauraus: jblancett I added the line no change still the same error
[2013-12-13 19:38:19 -0500] zachallett: I have a cloud instance in Rackspace that will not list its Cloud.public_ips or Cloud.private_ips. I have a hints file at /etc/chef/ohai/hints/rackspace.json. Any ideas?
[2013-12-13 19:49:20 -0500] Sauraus: I have a weird situation on my Chef server, it has 24 nodes across 8 environments, however when I select an environment and click status I get the following message: "You appear to have no nodes in the GameTest environment - try connecting one, or creating or editing a client"
[2013-12-13 19:50:11 -0500] Sauraus: I am able to run chef-client on any node which executes the run_list just as defined for each role that I have.
[2013-12-13 19:53:24 -0500] Sauraus: when I run "chef-shell -z" on a node and then run role.all it lists all roles, but an environments.all only returns the _default and no other
[2013-12-13 19:54:56 -0500] Sauraus: And cookbooks.all just returns a long array of [nil, nil, nil, .....  ]
[2013-12-13 20:05:55 -0500] queuetip: trying to knife bootstrap a remote box but i get super user required, but i don't want to open up root on that box, but the user on that box has sudo priveleges, is there a way to force knife to use sudo on the remote box?
[2013-12-13 20:08:04 -0500] troyready: queuetip, knife bootstrap --sudo
[2013-12-13 20:08:24 -0500] werdnativ: Opscode, you have a cute 404 page: http://pages.opscode.com/adobe_enterprisechef_webinar.html
[2013-12-13 20:08:25 -0500] queuetip: troyready: ahhhh awesome
[2013-12-13 20:10:19 -0500] patmaddox: I'm having problems uploading to a new chef-server ... the final 500 error is
[2013-12-13 20:10:28 -0500] patmaddox: https://gist.github.com/patmaddox/ce84e87a2b55839b5709
[2013-12-13 20:10:55 -0500] patmaddox: but I'm also seeing lots of https://gist.github.com/patmaddox/4b3615229a4750f5416e
[2013-12-13 20:12:11 -0500] AskSteve: I have a cloud instance in Rackspace that will not list its Cloud.public_ips or Cloud.private_ips. I have a hints file at /etc/chef/ohai/hints/rackspace.json. Any ideas?
[2013-12-13 20:35:06 -0500] adnichols: were there recent changes made to the install.sh omnibus installer? Suddenly test-kitchen cares (and fails) if it tries to install the omnibus installer and the RPM (on CentOS) is already installed
[2013-12-13 20:36:11 -0500] adnichols: used to be a no-op if the RPM was already there it'd just say it was installed and continue
[2013-12-13 20:47:42 -0500] someara_: adnichols we're aware of this and fixing it asap
[2013-12-13 20:48:04 -0500] adnichols: someara_: awesome - thanks
[2013-12-13 20:54:55 -0500] daxroc: Should you use roles to make decisions inside cookbooks ie: database role decides that mysql is installed for custom_application cookbook ?
[2013-12-13 20:55:26 -0500] patmaddox: okay I'm getting farther now... when doing a 'vagrant up' and installing the rbenv recipe, I get the error "Error executing action `install` on resource 'package[libxml2-dev]'" which from what I can tell is because it's not using sudo in the "apt-get install" command. How can I tell chef it should be using sudo for that?
[2013-12-13 20:56:06 -0500] AskSteve: daxroc: I would suggest the other way around.  Use roles to decide which recipes (/other roles) get installed
[2013-12-13 20:56:38 -0500] daxroc: patmaddox: You shouldn't it should be running as root normally ?
[2013-12-13 20:57:32 -0500] patmaddox: daxroc: hrm I don't know. I'm just doing "vagrant up" which starts things as the vagrant user, I think. vagrant has sudo access, so I would expect apt commands to be run with sudo
[2013-12-13 20:57:56 -0500] daxroc: AskSteve: So you would only use node.roles include? when you needed to deviate from a 'standard' installation
[2013-12-13 20:58:13 -0500] patmaddox: I'm not sure how to tell vagrant to run the chef-client provisioner as root. I don't see anything like that in http://docs.vagrantup.com/v2/provisioning/chef_client.html
[2013-12-13 20:58:28 -0500] patmaddox: hence me figuring there'd be some way to tell apt to use sudo when it runs
[2013-12-13 20:59:32 -0500] daxroc: patmaddox: If you have it setup correctly with ALL::ALL for sudo it should escalate automatically. vagrant ssh to your instance and see if you can sudo -i ?
[2013-12-13 21:00:01 -0500] AskSteve: daxroc:  I would create a new role, they are free afterall
[2013-12-13 21:00:10 -0500] patmaddox: daxroc: yeah that switches me to root
[2013-12-13 21:00:50 -0500] daxroc: patmaddox are you using an external chef-server?
[2013-12-13 21:00:56 -0500] patmaddox: yes
[2013-12-13 21:01:46 -0500] patmaddox: geggam: you know who switched to root, but if you SSH direct to root then you don't know who that is
[2013-12-13 21:02:01 -0500] geggam: who is this vagrant :)
[2013-12-13 21:03:16 -0500] daxroc: patmaddox: when you escalate with sudo. run the client, chef-client -c /tmp/vagrant-chef-1/client.rb
[2013-12-13 21:03:31 -0500] c_t: vagrants need to leave the computer by sundown, incidentally
[2013-12-13 21:03:40 -0500] daxroc: patmaddox: Does that work correctly
[2013-12-13 21:04:10 -0500] patmaddox: daxroc: I'll give it a shot
[2013-12-13 21:05:08 -0500] patmaddox: btw apt cookbook doesn't seem to know anything about su or sudo anyway: https://github.com/opscode-cookbooks/apt/search?q=su&type=Code
[2013-12-13 21:05:49 -0500] daxroc: AskSteve: I'm a little reluctant to use roles when they are un-versioned
[2013-12-13 21:06:10 -0500] geggam: is that sundown UTC or other PST c_t  ?
[2013-12-13 21:06:20 -0500] geggam: :)
[2013-12-13 21:06:52 -0500] daxroc: it does make sense but I fear for when I need to upgrade a single cluster of nodes
[2013-12-13 21:08:09 -0500] c_t: geggam: PST is the One True Timezone, so I think that suffices
[2013-12-13 21:08:21 -0500] geggam: amen... east bay
[2013-12-13 21:09:02 -0500] c_t: Puget Sound represent
[2013-12-13 21:09:04 -0500] btm: geggam: the big thing about sudo is it lets you give multiple people root access without having a single password you have to change every time you want to take away that access, but there are lots of other nicities like letting someone run only a certain command(s) as root.
[2013-12-13 21:09:30 -0500] geggam: let me have vi with sudo btm :)
[2013-12-13 21:09:48 -0500] jbz: geggam: visudo
[2013-12-13 21:09:50 -0500] jbz: lol
[2013-12-13 21:11:16 -0500] geggam: I quote -- " If you have it setup correctly with ALL::ALL for sudo " ... sudo is pointless here
[2013-12-13 21:11:55 -0500] adnichols: geggam: disagree - provides logging at the very least
[2013-12-13 21:12:06 -0500] geggam: sudo rm /var/log/secure
[2013-12-13 21:12:09 -0500] geggam: what?
[2013-12-13 21:12:15 -0500] adnichols: geggam: rsyslog much?
[2013-12-13 21:12:22 -0500] AskSteve: daxroc: I save roles in a /roles folder and version them with github.  edit txt file and then knife role from file filename, and git commit filename
[2013-12-13 21:12:32 -0500] geggam: sudo /etc/init.d/rsyslog  stop
[2013-12-13 21:12:52 -0500] adnichols: don't have to distribute root pass...
[2013-12-13 21:13:21 -0500] geggam: if you are going to use sudo configure it... otherwise its security theater
[2013-12-13 21:13:25 -0500] geggam: all im saying
[2013-12-13 21:13:29 -0500] daxroc: geggam: no as you can escalate easily with a script and yes "NEVER use it in production"
[2013-12-13 21:14:43 -0500] adnichols: geggam: I think that's a very simplistic view - if your model is to only provide logins to those who should have root it's just as secure as providing a root pass
[2013-12-13 21:14:48 -0500] btm: geggam: Again, you can control which users have root access with sudo. That's Real Talk.
[2013-12-13 21:15:23 -0500] daxroc: AskSteve: Not what I mean when I say version. role db_server version 1.0.0 has run_list x where 1.1.0 has y
[2013-12-13 21:16:05 -0500] adnichols: geggam: that said - I would typically at least restrict it to some group
[2013-12-13 21:17:11 -0500] AskSteve: daxroc: ah ok
[2013-12-13 21:17:13 -0500] daxroc: AskSteve: how do you have groups of both roles in the same chef-server / environment
[2013-12-13 21:17:36 -0500] geggam: my model is to not allow access to users ... i have chef...
[2013-12-13 21:18:06 -0500] daxroc: AskSteve: I could use different roles for each version but that could get ugly fast
[2013-12-13 21:18:15 -0500] geggam: chef is root for all intents and purposes
[2013-12-13 21:18:29 -0500] adnichols: geggam: that's the beauty - you can do what is right for you, in my world that's not sufficient
[2013-12-13 21:18:52 -0500] geggam: i change my world :) ... stubborn like that
[2013-12-13 21:18:59 -0500] adnichols: glad that works for you:)
[2013-12-13 21:19:28 -0500] geggam: but my comment still stands... not configuring sudo is security theater
[2013-12-13 21:20:25 -0500] AskSteve: daxroc: I'm out I thought you meant the other kind of versioning. AFAIK chef don't allow versioning roles like you want.
[2013-12-13 21:21:59 -0500] daxroc: AskSteve: Appreciate it. Just looking for input on how people handle multiple deployed versions of the same application stack with roles ? I've read that roles maybe versioned in v2 ?
[2013-12-13 21:22:54 -0500] queuetip: i need to change the hostname that i originall installed OS chef server on, but chef server management page still wants to forward me to the https version of the old hostname, how do i fix that so it uses the new FQDN?
[2013-12-13 21:23:13 -0500] queuetip: or rather, i already changed the hostname
[2013-12-13 21:23:46 -0500] queuetip: reconfigure?
[2013-12-13 21:23:52 -0500] jperry: ohai!
[2013-12-13 21:23:55 -0500] daxroc: queuetip: /etc/chef configuration files iirc
[2013-12-13 21:24:11 -0500] jperry: I attributes defined in my role that aren't being used in my attributes file
[2013-12-13 21:24:20 -0500] jperry: is there a way to ensure the value in the role is used
[2013-12-13 21:25:54 -0500] jperry: specifically this line
[2013-12-13 21:25:55 -0500] jperry: https://github.com/socrata/java/blob/master/attributes/default.rb#L33
[2013-12-13 21:26:10 -0500] jperry: if  set the jdk_version in my role it's not being applied
[2013-12-13 21:26:35 -0500] daxroc: how do you set it in the role?
[2013-12-13 21:27:05 -0500] jperry: "override_attributes": {
[2013-12-13 21:27:05 -0500] jperry:     "java": {
[2013-12-13 21:27:06 -0500] queuetip: daxroc: thanks, actually reconfigure worked perfectly :P
[2013-12-13 21:27:06 -0500] jperry:       "jdk_version": "6"
[2013-12-13 21:27:08 -0500] jperry:     }
[2013-12-13 21:27:09 -0500] jperry:   },
[2013-12-13 21:27:12 -0500] jperry: daxroc: see above
[2013-12-13 21:27:31 -0500] patmaddox: daxroc: it does not succeed when run as root! https://gist.github.com/patmaddox/a089916c75bd8f89c127
[2013-12-13 21:28:27 -0500] ranjib: kallistec, around?
[2013-12-13 21:28:42 -0500] patmaddox: I tried an apt-get update first, and now it gives a different error: https://gist.github.com/patmaddox/0baa2a1c1af8af482411
[2013-12-13 21:29:48 -0500] ranjib: how can i take a block as an attribute value using lwrp.. https://github.com/opscode/chef/blob/master/lib/chef/resource/ruby_block.rb#L34
[2013-12-13 21:30:04 -0500] ranjib: i tried kind_of: Proc , but that does not work
[2013-12-13 21:31:06 -0500] miah: this is why i avoid lwrp.
[2013-12-13 21:31:14 -0500] ranjib: :-)
[2013-12-13 21:31:15 -0500] spheromak: one reason.
[2013-12-13 21:31:26 -0500] daxroc: god bless lwrp :D
[2013-12-13 21:31:30 -0500] ryan___: heyhey, Chef: 11.8.2 - `knife cookbook create foo` gives "ERROR: TypeError: can't convert nil into String"  any ideas?
[2013-12-13 21:31:32 -0500] miah: spheromak: among many.
[2013-12-13 21:31:37 -0500] spheromak: yea
[2013-12-13 21:31:43 -0500] ranjib: last time i said.. every one shouted on me. so i though may be i sud learn how to use lwrp correctly
[2013-12-13 21:31:52 -0500] miah: hwrp, yes.
[2013-12-13 21:31:59 -0500] spheromak: think timing issues are one of the more compelling.
[2013-12-13 21:32:05 -0500] miah: ya
[2013-12-13 21:32:17 -0500] miah: lwrp has some issues. if you are trying to do basic stuff they are fine.
[2013-12-13 21:32:22 -0500] miah: once you start being clever..
[2013-12-13 21:32:27 -0500] miah: move on.
[2013-12-13 21:32:36 -0500] spheromak: yeap indeed great definition replacement.
[2013-12-13 21:32:43 -0500] vitaly: Hi guys, can any1 help me with the template resource? For some reason it updates the file, even though there is no difference between the runs
[2013-12-13 21:32:50 -0500] ranjib: also i saw jkeiser making loads of resource using lwrpbase, but not the dsl.. i still wonder what all batteries it gives.. we are missing something
[2013-12-13 21:32:54 -0500] vitaly:   * template[/var/lib/jenkins/jobs/RedisRehash-source/config.xml] action create     - update content in file /var/lib/jenkins/jobs/RedisRehash-source/config.xml from a66f6e to 6d3287         (no diff)
[2013-12-13 21:33:24 -0500] spheromak: yea ranjib
[2013-12-13 21:33:25 -0500] jperry: anyone have any ideas about how to make use of role attributes in an attributes file?
[2013-12-13 21:33:36 -0500] jperry: trying to set jdk_version in a role
[2013-12-13 21:33:36 -0500] jperry: https://github.com/socrata/java/blob/master/attributes/default.rb#L33
[2013-12-13 21:33:41 -0500] jperry: and it's not working
[2013-12-13 21:33:57 -0500] spheromak: vitaly: check the backups of the template vs the current version to see what might be changing
[2013-12-13 21:34:18 -0500] ranjib: fellas.. liblxc based ruby binding are now available :-) ..
[2013-12-13 21:34:33 -0500] spheromak: ranjib: where ?
[2013-12-13 21:34:36 -0500] ranjib: high time to make chef lxc resources
[2013-12-13 21:34:37 -0500] spheromak: ranjib: you do this ?
[2013-12-13 21:34:42 -0500] ranjib: https://github.com/andrenth/ruby-lxc
[2013-12-13 21:34:51 -0500] spheromak: ranjib: using this in chef-metal ?
[2013-12-13 21:35:07 -0500] ranjib: no dude.. i am stuck with apartment move
[2013-12-13 21:35:15 -0500] ranjib: this is someone else.. god bless him
[2013-12-13 21:35:32 -0500] spheromak: man you're in india for weeks, then you move ;) how do you get this OSS work done ;)
[2013-12-13 21:35:58 -0500] miah: hah
[2013-12-13 21:36:04 -0500] ranjib: im not getting anything done .. at least for couple of weeks.. we dont have electricity in my village
[2013-12-13 21:36:33 -0500] jkeiser: ranjib: I was extending from lwrpbase because LWRPs didn't do everything I wanted, but I liked typing "attribute" :)
[2013-12-13 21:36:39 -0500] ranjib: now im back.. need to fix some cookbooks before i get my shit together for lxc
[2013-12-13 21:36:43 -0500] miah: hah
[2013-12-13 21:36:54 -0500] miah: i dont feel like 'attribute' saves me much.
[2013-12-13 21:37:09 -0500] ranjib: jkeiser,  why not Chef::Resource directly?
[2013-12-13 21:37:11 -0500] miah: set_or_return is handy though
[2013-12-13 21:37:19 -0500] ranjib: yeah..
[2013-12-13 21:37:27 -0500] miah: though so is @foo ||= bar
[2013-12-13 21:37:59 -0500] miah: trying to minimize the number of resource attributes on my objects
[2013-12-13 21:38:13 -0500] miah: make things more smarter
[2013-12-13 21:38:15 -0500] jkeiser: ranjib: because it lets me type "attribute" instead of "def attribute(value=nil) blah blah blah
[2013-12-13 21:38:24 -0500] spheromak: hah
[2013-12-13 21:38:37 -0500] ranjib: ah.. fair
[2013-12-13 21:39:23 -0500] ranjib: i recently figured out that with inline_resources the child resources updated_by_last_action is never set to true, even if the resource is being created/updated
[2013-12-13 21:39:40 -0500] spheromak: on the child
[2013-12-13 21:39:45 -0500] ranjib: though the parent (lwrp) reflects the updated_by_last_action correctly
[2013-12-13 21:39:52 -0500] someara_: wat
[2013-12-13 21:39:57 -0500] miah: meh. mostly doesn't matter. many lwrp's dont even bother with load_current_resource
[2013-12-13 21:39:58 -0500] ranjib: yeah.. it was a bummer, but i guess its not a bug.
[2013-12-13 21:40:33 -0500] spheromak: miah: well cause i think if yer doing it right in lwrp you aren't doing much more than calling other primitive resources.  If you need to load_current you prob should be in HWRP terriotory.
[2013-12-13 21:40:44 -0500] miah: true
[2013-12-13 21:42:18 -0500] miah: (what im working on recently) https://github.com/SimpleFinance/java
[2013-12-13 21:43:21 -0500] someara_: ranjib sure they are... you can notify between resources within the lwrp implementation, you just can't see them from outside. The whole point of use_inline_resources is to create a closure around the implementation of the resource
[2013-12-13 21:43:32 -0500] vitaly: spheromak: thanks a lot, you wont believe it, but it was \n at the end of the file
[2013-12-13 21:43:49 -0500] vitaly: that made the diff check fail
[2013-12-13 21:43:54 -0500] miah: im close to being able to say 'bye bye' to 'ark'
[2013-12-13 21:44:02 -0500] spheromak: vitaly: yarp i've def done that b4
[2013-12-13 21:44:05 -0500] someara_: its a black-box from the perspective of the calling run_context
[2013-12-13 21:45:37 -0500] ranjib: someara_, yeah.. i thought the same.. but its kinda weird that u still see them in the resource_collection from top level
[2013-12-13 21:45:47 -0500] jperry: for anyone curious about my issue looks like reloading the attributes in the recipe will fix it
[2013-12-13 21:46:22 -0500] miah: node attributes are seriously chef's herpes
[2013-12-13 21:46:41 -0500] someara_: yea... that probably has something to do with reporting
[2013-12-13 21:46:51 -0500] ranjib: someara_, you know any way i can pass a block as resource attribute using lwrp?
[2013-12-13 21:47:35 -0500] someara_: I'm trying to talk everyone into using "resource parameter" since "attribute" is already taken, but....
[2013-12-13 21:47:38 -0500] someara_: not off the top of my head
[2013-12-13 21:48:06 -0500] jkeiser: ranjib: you can fix the inline resources thing by writing "use_inline_resources true" in your provider
[2013-12-13 21:48:25 -0500] jkeiser: That fixes updated by last action
[2013-12-13 21:48:33 -0500] ranjib: i do that all the time..
[2013-12-13 21:48:35 -0500] someara_: maybe if you were to specify kind_of => Block or something in the resource definition?
[2013-12-13 21:48:38 -0500] ryan___: any idea what all of these are doing in an strace of my knife run? ioctl(5, SNDCTL_TMR_TIMEBASE or TCGETS, 0x7fff87b4b248) = -1 ENOTTY (Inappropriate ioctl for device)
[2013-12-13 21:48:39 -0500] someara_: I've never tried it
[2013-12-13 21:49:00 -0500] ranjib: what i was saying is , u can see the child resources, but their updated_by_last_action is always false..
[2013-12-13 21:49:11 -0500] spheromak: miah: lol
[2013-12-13 21:49:50 -0500] ranjib: which is kinda strange, because folks tend to subscribe and notify against the child resources (migrated from definitions) .. which does not break., but yields false result
[2013-12-13 21:50:03 -0500] spheromak: someara_: yea paramaters makes more sense. I've used that for a long while when teaching chef.
[2013-12-13 21:50:07 -0500] jkeiser: oh, interesting.  Sounds sort of bugged
[2013-12-13 21:50:10 -0500] ranjib: someara_, i tried that.. it does not work.. we need block_given? type of things
[2013-12-13 21:50:41 -0500] jkeiser: ranjib: in LWRPs or non-LWRPs, you can still do def x(arg1, arg2, &block)
[2013-12-13 21:50:45 -0500] someara_: people should not ever attempt to notify/subscribe against lwrp child resources
[2013-12-13 21:50:47 -0500] jkeiser: And the user can write
[2013-12-13 21:50:50 -0500] jkeiser: my_lwrp do
[2013-12-13 21:51:07 -0500] ranjib: i know.. but people are strange..
[2013-12-13 21:51:10 -0500] jkeiser:   x 'a', 'b' { |*args| puts args }
[2013-12-13 21:51:18 -0500] someara_: I dont even think they should be visible
[2013-12-13 21:51:29 -0500] ranjib: they are gonna learn one day.. hopefully ..
[2013-12-13 21:51:32 -0500] someara_: but thats just like, my opinion, man
[2013-12-13 21:51:38 -0500] spheromak: someara_: what if they are pre-defined in a recipe someplace else
[2013-12-13 21:51:45 -0500] ranjib: exactly that was my earlier expectation with use_inline_resources
[2013-12-13 21:51:52 -0500] spheromak: someara_: or what if people want to 'rewind' the child resource
[2013-12-13 21:52:29 -0500] ranjib: spheromak, if they are top level resources.. that fine.. but if its hidden inside the lwrp.. that sud fail
[2013-12-13 21:52:30 -0500] jkeiser: I am not a fan of this, if the resources end up in the main resource collection doesn't that mean that they can conflict (name wise) with other resources from outside the LWRP?
[2013-12-13 21:52:44 -0500] someara_: the fact that a provider is made up of with chef resources instead of Pure Ruby or assembly, or whatever is an implementation detail
[2013-12-13 21:52:56 -0500] jkeiser: Like if you have execute 'blah' inside an LWRP, and execute 'blah' outside, notifies 'execute[blah]' might go to the wrong one
[2013-12-13 21:52:57 -0500] someara_: jkeiser yep, sure does
[2013-12-13 21:53:04 -0500] jkeiser: That's really uncool
[2013-12-13 21:53:08 -0500] jkeiser: We should make that go away
[2013-12-13 21:53:10 -0500] someara_: thats why its a closure
[2013-12-13 21:53:14 -0500] ranjib: they can, but u can do that any way,,, even with the top level resources.. current resource cloning safeguards only with same name/ resource type
[2013-12-13 21:53:42 -0500] jkeiser: Sure, but at least if you give something the same name in your outer recipes you can claim it's Your Own Damn Faukt
[2013-12-13 21:53:47 -0500] spheromak: someara_: jkeiser agreed that redifinition of lwrp resources should throw a fit
[2013-12-13 21:53:48 -0500] jkeiser: I can't control what people name stuff in their LWRPs
[2013-12-13 21:54:16 -0500] spheromak: or least be abstracted away.
[2013-12-13 21:54:16 -0500] someara_: exactly
[2013-12-13 21:54:22 -0500] someara_: so this line, for example
[2013-12-13 21:54:22 -0500] someara_: https://github.com/opscode-cookbooks/yum/blob/master/providers/repository.rb#L49
[2013-12-13 21:54:45 -0500] someara_: If I were not striving for Chef10 compat there, I would have just named that execute[make-cache]
[2013-12-13 21:55:13 -0500] someara_: that way 15 consumers of the yum_repository resource could have 15 identically named child resources
[2013-12-13 21:55:22 -0500] someara_: because the run_context is isolated
[2013-12-13 21:55:54 -0500] gchristensen: coderanger: ping
[2013-12-13 21:56:01 -0500] coderanger: Yo
[2013-12-13 21:56:27 -0500] gchristensen: coderanger: depot PR#6 :)
[2013-12-13 21:57:12 -0500] coderanger: Lol, I am clearly excellent at code
[2013-12-13 21:57:37 -0500] coderanger: Will do a release in a moment
[2013-12-13 21:57:46 -0500] gchristensen: :P its bizarre, because python's don't be surprising thing is surprising.
[2013-12-13 21:58:11 -0500] gchristensen: tm_wday is 0 - 6, tm_mon is 1 - 12
[2013-12-13 21:58:14 -0500] spheromak: coderanger: since when is spelling part of coding :)
[2013-12-13 21:58:31 -0500] gchristensen: spheromak: nah, PR5 makes `depot` work in December
[2013-12-13 21:58:34 -0500] spheromak: ah
[2013-12-13 21:58:41 -0500] gchristensen: spheromak: https://github.com/coderanger/depot/pull/6
[2013-12-13 21:58:48 -0500] coderanger: spheromak: More like I never checked the generated timestamp was actually correct
[2013-12-13 21:58:52 -0500] spheromak: yea i was looking @ #6
[2013-12-13 21:58:54 -0500] spheromak: er 5
[2013-12-13 21:59:21 -0500] spheromak: coderanger: yay off by 1
[2013-12-13 22:00:59 -0500] spheromak: someara_: getting back to child resourcess stuff.  In the current way with isolated run_context my only beef is that I can have many things think they are authority for some undlerlying system 'thing' .. that can lead to some odd chef-runs
[2013-12-13 22:01:25 -0500] someara_: well
[2013-12-13 22:02:03 -0500] someara_: thats unavoidable anyway
[2013-12-13 22:02:08 -0500] spheromak: not saying that redefining the same thing over and over is in anyway better
[2013-12-13 22:02:12 -0500] spheromak: yea
[2013-12-13 22:02:20 -0500] jameson__: anyone have experience with using chef with asgard (Netflix) ?
[2013-12-13 22:02:30 -0500] someara_: so what if, in implementing my resource in Pure Ruby, I ::File.opened up /etc/passwd
[2013-12-13 22:02:37 -0500] spheromak: :D
[2013-12-13 22:02:39 -0500] someara_: which is being managed by a file[/etc/passwd]
[2013-12-13 22:02:43 -0500] spheromak: yup
[2013-12-13 22:03:20 -0500] someara_: I like to describe it as "resource collection oriented programming" =)
[2013-12-13 22:03:27 -0500] spheromak: hah
[2013-12-13 22:03:35 -0500] someara_: I think the single global run_context is a mistake too
[2013-12-13 22:03:39 -0500] spheromak: yea
[2013-12-13 22:03:43 -0500] spheromak: well
[2013-12-13 22:03:54 -0500] ranjib: exactly
[2013-12-13 22:03:55 -0500] spheromak: if it was more granular we could do some interesting stuff with partial runs
[2013-12-13 22:04:05 -0500] someara_: because you very often need to mutate system state before the compilation phase of a thing
[2013-12-13 22:04:16 -0500] someara_: run_action needs to die
[2013-12-13 22:04:24 -0500] spheromak: expand
[2013-12-13 22:04:26 -0500] spheromak: on that
[2013-12-13 22:04:32 -0500] spheromak: i abusse run_action quite alot
[2013-12-13 22:04:36 -0500] spheromak: *abuse
[2013-12-13 22:05:07 -0500] someara_: its an arms race
[2013-12-13 22:05:10 -0500] someara_: https://gist.github.com/someara/d2e0c8cd0d3cf78053de
[2013-12-13 22:05:53 -0500] spheromak: yea
[2013-12-13 22:05:56 -0500] spheromak: I run into that
[2013-12-13 22:06:11 -0500] someara_: everyone does
[2013-12-13 22:06:22 -0500] spheromak: so what is the way out of this
[2013-12-13 22:06:52 -0500] someara_: two ways... use nothing but LWRPs with use_inline_resources to isolate run_contexts
[2013-12-13 22:07:09 -0500] someara_: or implement some way to control the compile and converge phases from recipes directly
[2013-12-13 22:07:44 -0500] someara_: noah's hack from over the summer worked for me https://github.com/someara/now-cookbook/tree/chef_gem
[2013-12-13 22:08:30 -0500] someara_: somebody should put in a ticket ;)
[2013-12-13 22:08:46 -0500] coderanger: Or write poised resources :-)
[2013-12-13 22:08:46 -0500] spheromak: so what about what sethvargo did with the before/after and compile_time methods in chef-sugar
[2013-12-13 22:08:56 -0500] coderanger: via poise's notifying_block helper
[2013-12-13 22:10:00 -0500] spheromak: coderanger: someara_ miah I think theres an accesibility issue with the composable Providers.  Big divide for someone to go from starting with chef to writing poised resources.
[2013-12-13 22:10:17 -0500] coderanger: spheromak: Yep, its a problem
[2013-12-13 22:10:22 -0500] coderanger: but one that can be bridged with docs
[2013-12-13 22:10:58 -0500] spheromak: possibly. May be my own failure to fully grasp it as well. I haven't been able to get people to grok it on my team.
[2013-12-13 22:11:15 -0500] someara_: the compile_time thing is just an easier way to use the ugly hack
[2013-12-13 22:11:34 -0500] someara_: "compile time" should be just that... compiling the resource collection. it should **never** affect system state
[2013-12-13 22:11:47 -0500] someara_: it breaks chef's model completely
[2013-12-13 22:11:59 -0500] spheromak: someara_: well then you should jsut have compile_time pretty much
[2013-12-13 22:12:03 -0500] spheromak: ;P
[2013-12-13 22:12:03 -0500] someara_: doing it at all admits the need for multiple run_contexts
[2013-12-13 22:12:10 -0500] spheromak: yea
[2013-12-13 22:12:32 -0500] spheromak: someara_: i always imagined compile / run  phases like  macro expansion + evaluation.
[2013-12-13 22:13:02 -0500] someara_: yep
[2013-12-13 22:13:35 -0500] spheromak: and agree its sorta like doing silly hacks in the pre-processor.  Whic can get you into trouble
[2013-12-13 22:13:49 -0500] spheromak: it _is_
[2013-12-13 22:14:02 -0500] spheromak: ok so when do we see multi run_contexts
[2013-12-13 22:14:04 -0500] spheromak: ;)
[2013-12-13 22:14:23 -0500] coderanger: spheromak: poise/libraries/subcontent.rb
[2013-12-13 22:14:24 -0500] coderanger: :-)
[2013-12-13 22:14:35 -0500] spheromak: coderanger: ok I need to crack out more on poise
[2013-12-13 22:14:49 -0500] coderanger: Thats how it works internally, it generates a tree of run contexts that inherit from each other
[2013-12-13 22:15:00 -0500] coderanger: Technically it ends up being a kind of DAG in some cases
[2013-12-13 22:15:05 -0500] coderanger: but I try to not make that obvious
[2013-12-13 22:16:35 -0500] coderanger: gchristensen: Release pushed
[2013-12-13 22:17:00 -0500] gchristensen: <3 thank you coderanger!
[2013-12-13 22:17:11 -0500] someara_: kallistec needs to be convinced still afaik
[2013-12-13 22:17:33 -0500] coderanger: someara_: I intend to win that war via attrition :)
[2013-12-13 22:18:17 -0500] someara_: =P
[2013-12-13 22:18:31 -0500] spheromak: well
[2013-12-13 22:20:06 -0500] spheromak: whats the argument for 1 run_context to rule them all  (and evne then we are doing tricks in providers already that make many contexts via use_inline).
[2013-12-13 22:22:18 -0500] someara_: I don't want to speak for dan, but I think its just momentum and user grokability
[2013-12-13 22:23:02 -0500] someara_: sprinkle roles, reporting consoles, and stuff like that onto it and things get weird
[2013-12-13 22:23:49 -0500] miah: spheromak: i agree, but i dont care about making things easy. =)
[2013-12-13 22:23:59 -0500] someara_: taking the time to Do The Best Thing
[2013-12-13 22:24:40 -0500] miah: compile time doesnt need to happen when libraries are smart enough to ensure their requirements are met
[2013-12-13 22:25:00 -0500] queuetip: so i finally called OS chef server installed, and finally bootstrapped my first client :) so then in the chef-repo (starter repo) that i cloned from github, i did knife cookbook site install php, and it also installed a mysql cookbook, why?
[2013-12-13 22:26:56 -0500] spheromak: someara_: ^^ then theres this stuff too ;)
[2013-12-13 22:27:30 -0500] someara_: I'm working on that... I just left a trail of bloody yaks behind the yum cookbook. time for dinner.
[2013-12-13 22:27:37 -0500] someara_: late!
[2013-12-13 22:27:46 -0500] spheromak: someara_: i like the new yum thankss fort the discussion verry informative
[2013-12-13 22:27:46 -0500] miah: =)
[2013-12-13 22:30:36 -0500] patmaddox: I don't quite understand roles, and when I'd want to use them instead of a custom recipe. For example, roles in a typical web app might be web, database, app server, cache server. In my dev environment I want all those roles on one box. Am I better off defining roles with with "standard" recipes (ngin, postgres, ruby, etc) or just creating one recipe for dev that installs those recipes, and another for production ?
[2013-12-13 22:36:05 -0500] queuetip: why does the community cookbook for php depend on mysql? how do i kill that dependency?
[2013-12-13 22:36:37 -0500] gregkare: Dependencies work like this in cookbooks
[2013-12-13 22:37:11 -0500] gregkare: If you don't like it, fork the cookbook and remove the dependency and the recipe that uses it
[2013-12-13 22:37:19 -0500] coderanger: queuetip: I don't see a dep on php
[2013-12-13 22:37:32 -0500] miah: probably one of the leafs
[2013-12-13 22:37:33 -0500] coderanger: queuetip: Just openssl and build-essential
[2013-12-13 22:37:45 -0500] coderanger: gregkare: Oh god, don't do that
[2013-12-13 22:37:55 -0500] queuetip: coderanger: my steps: knife cookbook site install php ... also downloads mysql cookbook, then in the php directory, grep -rin mysql .
[2013-12-13 22:38:03 -0500] queuetip: coderanger: i just did this about 3 minutes ago
[2013-12-13 22:38:08 -0500] coderanger: queuetip: Okay, first step never use knife cookbook site install :-)
[2013-12-13 22:38:09 -0500] gregkare: Yup, was about to say it's a bad idea, just ignore the dependencies you don't need
[2013-12-13 22:38:13 -0500] coderanger: Berkshelf has completely overtaken it :)
[2013-12-13 22:38:20 -0500] queuetip: coderanger: ./attributes/default.rb:95:                                          --with-mysql
[2013-12-13 22:38:43 -0500] queuetip: how do i ignore the dependencies i don't need?
[2013-12-13 22:38:47 -0500] gregkare: You don't
[2013-12-13 22:38:47 -0500] coderanger: queuetip: Also ahh, I read your question backwards
[2013-12-13 22:38:55 -0500] gregkare: I mean, you just pretend they're not there
[2013-12-13 22:39:07 -0500] coderanger: Yeah, so it won't actually install mysql
[2013-12-13 22:39:21 -0500] gregkare: It's just a couple bytes, it won't kill you
[2013-12-13 22:39:36 -0500] coderanger: It just needs the cookbook as part of dependency resolution
[2013-12-13 22:39:47 -0500] coderanger: And using Berkshelf, you don't actually see it
[2013-12-13 22:39:57 -0500] gregkare: You'll probably freak out even more when one of the cookbooks you install depend on the windows cookbook
[2013-12-13 22:40:04 -0500] queuetip: haha
[2013-12-13 22:40:08 -0500] queuetip: you're right, i will :)
[2013-12-13 22:40:19 -0500] queuetip: coderanger: what's berkshelf?
[2013-12-13 22:40:30 -0500] coderanger: queuetip: berkshelf.com, its a package manage for chef cookbooks
[2013-12-13 22:40:35 -0500] coderanger: so similar to Bundler or Composer
[2013-12-13 22:40:45 -0500] queuetip: coderanger: awesome, i'll check that out, thanks for the help
[2013-12-13 22:40:51 -0500] queuetip: gregkare: thanks also
[2013-12-13 22:45:11 -0500] xrl: How can i use knife ssh to query all nodes in an environment? knife ssh "environment:derp" "echo $PATH" comes back empty
[2013-12-13 22:45:26 -0500] xrl: and i have a "derp" environment on hosted chef
[2013-12-13 22:45:35 -0500] coderanger: chef_environment:derp
[2013-12-13 22:46:34 -0500] xrl: coderanger: thanks!
[2013-12-13 22:47:52 -0500] queuetip: ERROR: Cookbook nginx depends on cookbook 'yum' version '< 3.0' how do i install an earlier version?
[2013-12-13 22:48:12 -0500] queuetip: doing a knife cookbook site install yum gives me version 3.0
[2013-12-13 22:48:41 -0500] coderanger: queuetip: Heh, so this is where berkshelf is better
[2013-12-13 22:49:19 -0500] queuetip: i looked at berkshelf, and i'm wary because installing one more thing, and having to learn one more command line tool right now after my brain is racked trying to figure out all the new chef stuff :/
[2013-12-13 22:49:45 -0500] coderanger: Yeah, so I know you can go download old versions from the community site manually
[2013-12-13 22:49:51 -0500] coderanger: let me check if there is a CLI option for it
[2013-12-13 22:49:59 -0500] queuetip: awesome, thanks
[2013-12-13 22:50:19 -0500] coderanger: Try knife cookbook site install yum 2.4.4
[2013-12-13 22:50:43 -0500] queuetip: coderanger: thanks
[2013-12-13 22:51:26 -0500] queuetip: that did the trick :)
[2013-12-13 22:53:35 -0500] werdnativ: Three are lots of tutorials on working with chef e.g. writing cookbooks. Are there any good "higher-level" docs or tutorials about organizing a project together to orchestrate everything? (Setting up a project, development workflow, test-driven, etc.)
[2013-12-13 22:55:22 -0500] coderanger: werdnativ: Not a ton, blog posts here and there
[2013-12-13 22:55:48 -0500] coderanger: werdnativ: Look up Jamie Windsor's chefconf talk The Berkshelf Way and there is some stuff in the Food Fight Show archives
[2013-12-13 22:55:59 -0500] werdnativ: cool, thanks.
[2013-12-13 22:56:23 -0500] coderanger: werdnativ: A lot of what are now considered "best practices" really only arose in the last 6 months
[2013-12-13 22:56:33 -0500] coderanger: so its a bit wild-west-style
[2013-12-13 22:56:37 -0500] werdnativ: So many ways to do things, and it has changed a lot, with opinions on using roles, and layering over community cookbooks, etc...
[2013-12-13 22:56:44 -0500] werdnativ: yeah. exactly!
[2013-12-13 22:57:04 -0500] werdnativ: would be nice to collect all that knowledge.
[2013-12-13 22:58:29 -0500] coderanger: I'm working on documenting my (highly opinionated) workflow
[2013-12-13 22:58:31 -0500] queuetip: so i finally got all my cookbooks uploaded to the server, now what? do i need to put all of them into a role? that part is easy, but how do i get them actually installed on my client node?
[2013-12-13 22:58:34 -0500] coderanger: Hopefully will make more headway this weekend
[2013-12-13 22:58:55 -0500] coderanger: queuetip: So yeah, make a role with a run_list of 'recipe[php], etc'
[2013-12-13 22:59:05 -0500] queuetip: and after that?
[2013-12-13 22:59:22 -0500] coderanger: Do you have an existing server you are trying to use with chef
[2013-12-13 22:59:28 -0500] coderanger: or do you want to spin up a new one on a public cloud?
[2013-12-13 22:59:36 -0500] queuetip: i have an existing server
[2013-12-13 22:59:59 -0500] queuetip: and the role is already created with the cookbooks, i got that far following some hodge podge tutorials
[2013-12-13 23:00:07 -0500] coderanger: knife bootstrap -r 'role[itsname]' -x yourusername --sudo serveripaddr
[2013-12-13 23:00:18 -0500] queuetip: awesome, that's what i was looking for
[2013-12-13 23:00:22 -0500] queuetip: much thanks for all your help
[2013-12-13 23:00:24 -0500] coderanger: That will SSH to the server, install chef, and set it up with the runlist you specified
[2013-12-13 23:00:42 -0500] queuetip: well, i already bootstrapped the server though
[2013-12-13 23:01:03 -0500] queuetip: with just knife bootstrap -x username --sudo ipaddress -i keyfile
[2013-12-13 23:01:20 -0500] queuetip: so i can see that as a node / client in the management console
[2013-12-13 23:08:12 -0500] troyready: queuetip, this may already be clear to you, but when you change the runlist of your node after its been bootstrapped, then it'll really take effect the next time the chef-client run occurs on that node (http://docs.opscode.com/essentials_nodes_chef_run.html)
[2013-12-13 23:13:06 -0500] werdnativ: @coderanger if you want someone to help review & comment, ping me. I'm probably your target audience. :)
[2013-12-13 23:14:39 -0500] coderanger: werdnativ: launch.poise.io, you can sign up to be notified when the beta site has a little more content
[2013-12-13 23:16:20 -0500] werdnativ: thanks, I'm on your spam list.
[2013-12-13 23:16:23 -0500] coderanger: :-)
[2013-12-13 23:29:15 -0500] queuetip: undefined method `run_state' for Chef::Resource::RunitService when installing redis cookbook, i have no idea what this means
[2013-12-13 23:29:47 -0500] coderanger: queuetip: Please pastebin the full traceback
[2013-12-13 23:29:54 -0500] coderanger: Probably a version mismatch issue
[2013-12-13 23:30:29 -0500] queuetip: preferred pastebin?
[2013-12-13 23:30:38 -0500] coderanger: None in particular
[2013-12-13 23:30:42 -0500] coderanger: I usually use hastebin.com
[2013-12-13 23:30:44 -0500] coderanger: :-)
[2013-12-13 23:31:04 -0500] queuetip: noted
[2013-12-13 23:31:50 -0500] regork: Hi CodeRanger, any advice on how a PyChef role object can be customized (othan than subclassing Role)?
[2013-12-13 23:32:26 -0500] coderanger: regork: What kind of customization do you mean?
[2013-12-13 23:33:52 -0500] regork: @coderanger, iirc something needs to be added to run list for the role
[2013-12-13 23:34:18 -0500] queuetip: coderanger: http://hastebin.com/ceditumasa.parser3
[2013-12-13 23:34:30 -0500] coderanger: regork: Thats not really customizing it, just r.run_list.append('whatever')
[2013-12-13 23:36:06 -0500] coderanger: queuetip: Hmm, not sure what version of the runit cookbook your redis cookbook expects, but probably something very early
[2013-12-13 23:36:13 -0500] coderanger: queuetip: Which redis cookbook are you using?
[2013-12-13 23:36:19 -0500] coderanger: (please don't say mine)
[2013-12-13 23:36:40 -0500] regork: coderanger: I don't have access to source right now, when will you be on #chef again?
[2013-12-13 23:37:11 -0500] coderanger: regork: I'm in here 24/7 via my bouncer, I'm usually looking at IRC during work hours (UTC-8) and then again a bit at night
[2013-12-13 23:37:26 -0500] queuetip: coderanger: not 100% sure, just from knife cookbook site install redis
[2013-12-13 23:37:52 -0500] queuetip: coderanger: how do i find out which version, exactly
[2013-12-13 23:37:53 -0500] coderanger: queuetip: Ahh yeah, that one is abandoned :(
[2013-12-13 23:38:15 -0500] coderanger: queuetip: https://github.com/miah/chef-redis is probably the best one to use right now
[2013-12-13 23:38:22 -0500] queuetip: noted, thank you
[2013-12-13 23:38:23 -0500] coderanger: Woo tribal knowledge
[2013-12-13 23:39:06 -0500] regork: coderanger: thx!
[2013-12-13 23:39:25 -0500] coderanger: regork: You can also email me, address is in the PyChef metadata (and all over the internet)
[2013-12-13 23:39:59 -0500] queuetip: coderanger: how do i download that cookbook and put it in the same directory that my others are in : /
[2013-12-13 23:40:14 -0500] queuetip: coderanger: sorry for the incessent questions by the way, this is all very new to me
[2013-12-13 23:40:23 -0500] coderanger: queuetip: https://github.com/miah/chef-redis/archive/master.zip
[2013-12-13 23:40:38 -0500] coderanger: queuetip: unpack and replace your existing redis/ folder
[2013-12-13 23:40:44 -0500] queuetip: perfect, thank you
[2013-12-13 23:41:05 -0500] coderanger: queuetip: For the future http://i.coderanger.net/RsJuJ.png
[2013-12-13 23:42:02 -0500] queuetip: coderanger: thanks again
[2013-12-13 23:45:09 -0500] regork: To reload sshd if /etc/ssh/sshd_config changes, should the template send a :reload or :restart to sshd service?
[2013-12-13 23:46:02 -0500] regork: I tried both but sshd pid remained the same. Want to have same effect as kill -HUP `cat /var/run/sshd.pid` if template changes.
[2013-12-13 23:48:21 -0500] chip-: regork: Depends on what your initd script supports.
[2013-12-13 23:48:44 -0500] regork: chip: it's the standard CentOS service script
[2013-12-13 23:49:05 -0500] coderanger: thats usually called reload
[2013-12-13 23:49:15 -0500] coderanger: but sshd is handled weirdly in most distros
[2013-12-13 23:49:39 -0500] regork: I think it's called just ssh in Ubuntu
[2013-12-13 23:57:13 -0500] werdnativ: wow, this sounds like me: http://peterjmit.com/blog/a-better-workflow-with-chef-and-vagrant.html#simplify-chef
[2013-12-13 23:58:50 -0500] coderanger: werdnativ: You'll note it links to the talk I mentioned saying thats what it is based on :-)

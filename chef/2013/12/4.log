[2013-12-04 00:04:03 -0500] jblack: =)
[2013-12-04 00:07:48 -0500] flaccid__: supercom32: after chef has run and exited it wouldn't be consuming disk space or ram. you may like to check disk usage with du
[2013-12-04 00:08:02 -0500] coderanger: supercom32: Not sure what you mean
[2013-12-04 00:08:21 -0500] coderanger: supercom32: How can a delete file due to being out of space?
[2013-12-04 00:08:50 -0500] supercom32: coderanger: If I run my recipe that deletes a file, it sits there and waits for a bit (Like it's working), then comes back and says the delete failed due to out of disk splace.
[2013-12-04 00:09:08 -0500] coderanger: supercom32: Did you disable backups?
[2013-12-04 00:09:08 -0500] supercom32: And then when i check my disk space I see indeed it was all gone. But that was strange because I had 1G before I ran the operation.
[2013-12-04 00:09:12 -0500] coderanger: supercom32: backups 0
[2013-12-04 00:09:25 -0500] coderanger: by default Chef keeps 5 copies of all files it touches
[2013-12-04 00:09:26 -0500] supercom32: coderanger: Ummm, no? :-)
[2013-12-04 00:09:31 -0500] coderanger: There ya go (probably)
[2013-12-04 00:09:48 -0500] supercom32: coderanger: I had no idea such a provision existed! How do I change this, and how do I delete backups?
[2013-12-04 00:10:54 -0500] coderanger: supercom32: http://docs.opscode.com/resource_file.html#attributes backup attr
[2013-12-04 00:11:15 -0500] coderanger: and they are stored in /var/chef usually, or /var/cache/chef, I forget where the omnibus installs put it
[2013-12-04 00:12:18 -0500] supercom32: under windows? Maybe the user profile?
[2013-12-04 00:13:00 -0500] coderanger: No idea on Windows
[2013-12-04 00:13:42 -0500] supercom32: c:\chef apparently.
[2013-12-04 00:14:47 -0500] flaccid__: oh yes, default backups, i understand now  heh
[2013-12-04 00:17:57 -0500] d4c7: For non-encrypted data bags, when you have a knife[:secret_file] specified in your knife.rb, is it expected that showing the data bag results in a, "wrong final block length" error message?  Removing the secret_file attribute resolves this.
[2013-12-04 00:19:42 -0500] jblack: flaccid__: Do you use a chef server, or do you normally stick with solo?
[2013-12-04 00:22:05 -0500] flaccid__: jblack: solo just because its what we have at rightscale, but i do plan to start using my free hosted chef account again soon, particularly once i have multiple vagrant machines going for dev/test of stacks that use for example a client and a server node e.g. nfs
[2013-12-04 00:35:24 -0500] webframp: sascha_d ping us in #heavywater if you're around
[2013-12-04 00:43:48 -0500] mfaulise: hey guys, yesterday there was a discussion about possible problem with application and application_python
[2013-12-04 00:44:04 -0500] mfaulise: did anyone come up with a solution?
[2013-12-04 00:48:46 -0500] jblack: Ok, chef is pretty frigging fun once it clicks. =)
[2013-12-04 00:49:34 -0500] supercom32: Using knife, is there a way to add a new data bag item to an existing data bag? When I use the create command it keeps saying my data bag exists. :-)
[2013-12-04 00:50:32 -0500] jblack: try knife data bag edit
[2013-12-04 00:50:38 -0500] jblack: knife data bag edit BAG ITEM (options)
[2013-12-04 00:51:33 -0500] supercom32: It says my bag item doesn't exist. which is true because I'm trying to create it.
[2013-12-04 00:51:35 -0500] jbz: supercom32: you can also add a data bag item from json using "knife data bag from file <databag to add to> <filename.json>"
[2013-12-04 00:51:56 -0500] tmichael: ^^ +1
[2013-12-04 00:52:20 -0500] jbz: supercom32: what I do is I something like:
[2013-12-04 00:52:28 -0500] supercom32: jbz: ah right
[2013-12-04 00:52:36 -0500] jbz: "knife data bag show <databag> <existing item> -Fjson > tmp.json"
[2013-12-04 00:52:43 -0500] jbz: then I edit tmp.json to reflect the new entry
[2013-12-04 00:52:44 -0500] jbz: and use that.
[2013-12-04 00:53:15 -0500] supercom32: jbz: your method works much better. thanks! :-)
[2013-12-04 00:56:05 -0500] jbz: yw
[2013-12-04 01:00:19 -0500] jbz: jblack: I found that chef had a super rough learning curve but once it clicked, it was like being handed a magic wand of Smiting.
[2013-12-04 01:01:09 -0500] jblack: I am never going to whine about setting up a new workstation again. =)
[2013-12-04 01:01:46 -0500] jbz: heh
[2013-12-04 01:01:47 -0500] jbz: man
[2013-12-04 01:01:57 -0500] jbz: I keep meaning to write a chef stack for my preferred Mac setup
[2013-12-04 01:02:04 -0500] jbz: someday in my copious free time.
[2013-12-04 01:02:26 -0500] jblack: I have put getting a new laptop off for -months- because I didn't want to deal with the hassle.
[2013-12-04 01:26:33 -0500] nick343: Hi.. I'm trying to learn chef to put it into use where I work.  I've been able to use chef-solo with some very simple recipes to add a logger cron job and update a file on disk.   I am now trying to use the apache2 cookbook to install apache.
[2013-12-04 01:27:11 -0500] nick343: I'm getting all sort of errors that I'm not familiar with,.. can someone help?   I'm using this https://github.com/opscode-cookbooks/apache2
[2013-12-04 01:28:19 -0500] nick343: I created a cookbooks/apache2/recipies/default.rb file with the one I got from github
[2013-12-04 01:29:21 -0500] nick343: when I run chef-solo I get the following error message: FATAL: NoMethodError: undefined method `[]' for nil:NilClass
[2013-12-04 01:29:49 -0500] douglaswth: do you have the whole apache2 cookbook in cookbooks/ or just that file?
[2013-12-04 01:29:50 -0500] nick343: here's the line it's having trouble with:  21>>   package_name node['apache']['package']
[2013-12-04 01:30:25 -0500] nick343: hi douglaswth.... I only have the default.rb file there
[2013-12-04 01:30:38 -0500] douglaswth: well, that's not going to work very well
[2013-12-04 01:30:57 -0500] nick343: ok, ouch.  I need all the files there I take it.
[2013-12-04 01:31:35 -0500] douglaswth: have you gone through learnchef?
[2013-12-04 01:32:37 -0500] nick343: This is my attempt at going thru it hands on.   OK,.. RTFM ha
[2013-12-04 01:33:15 -0500] nick343: I'm trying not to stream youtube videos while at work, but I imagine I will need to go through it
[2013-12-04 01:34:14 -0500] flaccid__: nick343: use the cookbook
[2013-12-04 01:34:15 -0500] nick343: One thing I noticed is that the line it's havinga problem with (that I pasted above) calls out a 'node' and I believe nodes don't really exist with chef-solo
[2013-12-04 01:34:41 -0500] flaccid__: nick343: those are node attributes, they are used in the same way with chef-solo
[2013-12-04 01:34:51 -0500] nick343: ok
[2013-12-04 01:35:13 -0500] douglaswth: learnchef has tutorials that don't involve watching youtube, at least that's what I remember
[2013-12-04 01:35:24 -0500] nick343: when you say, use the cookbook... I am using the opscode repository and copied that default.rb cookbook into my directory struture.
[2013-12-04 01:36:07 -0500] nick343: this is where I got the recipe: https://github.com/opscode-cookbooks/apache2/tree/master/recipes
[2013-12-04 01:40:33 -0500] nick343: is this not the recipe to use?   it should be as simple as copying the default.rb file to my local cookbook and adding it to the run list I thought.
[2013-12-04 02:08:59 -0500] broconne: I fear I am tackling something wrong in this cookbook...  I am guessing others have done before..  I want to give an application cookbook the ability to override a template or cookbook file.  The way I am doing that is to have an atttirbute and if its nil, then I use the default cookbook file or template..  but it feels very unclean.. is there a better way to handle?
[2013-12-04 02:11:57 -0500] broconne: so for example, I have a lot of this:
[2013-12-04 02:11:59 -0500] broconne: if node[:attribute]nil?
[2013-12-04 02:11:59 -0500] broconne:    node.default[:attribute] = "/blah/blah.conf"
[2013-12-04 02:11:59 -0500] broconne:    cookbook_file node[:attribute] do
[2013-12-04 02:12:00 -0500] broconne:       source 'default.conf'
[2013-12-04 02:12:00 -0500] broconne:    end
[2013-12-04 02:12:00 -0500] broconne: end
[2013-12-04 02:12:17 -0500] broconne: and then later do something else with node[;attribute]
[2013-12-04 02:13:01 -0500] flaccid__: nick343: i mean use the whole cookbook as is, it works quite well. you don't just cherry pick files..
[2013-12-04 02:13:57 -0500] flaccid__: broconne: i think there is an anti-patter for overriding template in recipe. let me see if i can find
[2013-12-04 02:14:31 -0500] flaccid__: broconne: https://gist.github.com/fujin/1713157
[2013-12-04 02:16:19 -0500] broconne: flaccid_ ... I don't know which actually feels more unclean.... :-)
[2013-12-04 02:16:45 -0500] broconne: but that is certainly interesting!
[2013-12-04 02:17:19 -0500] broconne: but even if you change the source...  wouldn't it still look in that OTHER cookbooks files dir? or templates dir?
[2013-12-04 02:19:39 -0500] broconne: is there a way to find out if an attribute value is currently the default value or an override?
[2013-12-04 02:19:47 -0500] douglaswth: nick343: that's not how you use cookbooks, you would have a full cookbook in your cookbook path and add the recipe to the run list
[2013-12-04 02:21:47 -0500] douglaswth: broconne: why not just specify a default value for the attribute in the attributes file?
[2013-12-04 02:22:23 -0500] broconne: I do .. here is one of hte specific situations..
[2013-12-04 02:23:05 -0500] broconne: I have a file included in an apache config.. mime types file.. It is the same across 95% of our web servers.   That 5% I want to override the file we are including.  But I need to pull that file from the "files" directory of the cookbook.
[2013-12-04 02:23:51 -0500] broconne: so the only method I came up with was to copy the default one out of the cookbook_file if the variable isn't set, then set the variable to the path of the one I just did a cook_book file on
[2013-12-04 02:24:08 -0500] broconne: then if an application cookbook overrides, its job is to copy it out of its cookbook and set that variable to wherever it copied it.
[2013-12-04 02:24:19 -0500] flaccid__: broconne:  this is kind of where you would actually contribute what is needed to the cookbook or do it in a wrapper cookbook anyway..
[2013-12-04 02:24:53 -0500] broconne: yes, exactly.. the wrapper cookbook woudl copy the file it needs and then set that attribute..  unless I am missing an obious other way.
[2013-12-04 02:25:08 -0500] flaccid__: broconne: are you using like the apache2 cookbook or something?
[2013-12-04 02:25:32 -0500] broconne: no, its a custom webserver actually, I just used apache as an example
[2013-12-04 02:26:14 -0500] broconne: but essentially, at its core I want to override a template source to point to another cookbook.
[2013-12-04 02:26:24 -0500] broconne: only way I can see to do it is with the pattern I posted above.
[2013-12-04 02:26:28 -0500] broconne: just foesn't feel great :-)
[2013-12-04 02:29:33 -0500] broconne: rewind I suppose would be an answer, but since I own both cookbooks - also didn't feel great
[2013-12-04 02:29:53 -0500] flaccid__: if its your cookbooks just use a node attribute for those variables
[2013-12-04 02:30:04 -0500] flaccid__: source node['foo']['bar']
[2013-12-04 02:30:18 -0500] broconne: ok, then when I override how does that work?
[2013-12-04 02:30:44 -0500] flaccid__: you would simply set the node attribute as required on each node that use the same cookbook
[2013-12-04 02:30:51 -0500] broconne: hmm
[2013-12-04 02:30:52 -0500] broconne: so
[2013-12-04 02:30:53 -0500] broconne: for example
[2013-12-04 02:31:11 -0500] broconne: source node['foo']['bar'] = "file1.txt"
[2013-12-04 02:31:18 -0500] broconne: file1.txt lives in this cookbooks files/default
[2013-12-04 02:31:27 -0500] broconne: in the wrapper cookbook I do
[2013-12-04 02:31:39 -0500] flaccid__: source node['foo']['bar'] was example recipe code for the source option of template resource
[2013-12-04 02:31:45 -0500] broconne: override['foo']['bar'] = "file2.txt"
[2013-12-04 02:31:52 -0500] broconne: fiel2. txt lives in the wrapper cookbooks files/default
[2013-12-04 02:32:00 -0500] broconne: how would the original cookbook find that file when it ran?
[2013-12-04 02:32:21 -0500] flaccid__: i'd keep it simple and use the one cookbook
[2013-12-04 02:33:06 -0500] broconne: Unfortunately, don't see that as an option here.  Many many websites, lots in common, some small changes between them.  including files like these.
[2013-12-04 02:33:41 -0500] flaccid__: there is always going to be a problem with more than 1 cookbook managing the same file, thats what you need to avoid
[2013-12-04 02:34:11 -0500] broconne: Yeah, I noticed.. which is why I came up with the pattern above.. which certainly works - it just doesn't look pretty.
[2013-12-04 02:34:43 -0500] flaccid__: i simply wouldn't ever double manage
[2013-12-04 02:35:47 -0500] broconne: I am struggling to see an alternative, sadly.
[2013-12-04 02:36:24 -0500] flaccid__: sounds like you have an organizational problem there if you can't remove the double manage of a file
[2013-12-04 02:37:04 -0500] broconne: well i am certainly open to ideas.
[2013-12-04 02:37:20 -0500] flaccid__: i fink we provided some
[2013-12-04 02:39:08 -0500] broconne: Its really not "double managing a file" - its setting the source of a file.  Which doesn't seem much different than override an attribute.
[2013-12-04 02:40:09 -0500] flaccid__: broconne: if two separate cookbook recipes use a resource to manage that file, that is double managing
[2013-12-04 02:40:10 -0500] broconne: unless I am missing something..  Just not sure how its an organization problem to say.. mime-types are located here by default, but you override it from a wrapper cookbook..  ot sure how that is any different htan saying.. my default port is 80, but you can override it to port 8000 from a wrapper cookbook.
[2013-12-04 02:41:07 -0500] broconne: only one cookbook uses the resource.. the wrapper cookbook is trying to instruct the other cookbook wehre to get the source file from.
[2013-12-04 02:41:23 -0500] broconne: but this might be a religious debate :-)
[2013-12-04 02:41:46 -0500] flaccid__: i showed you how to override template, but if you wanna do the wrapper attribute override thing i can show that too
[2013-12-04 02:42:27 -0500] broconne: but on the override template..  just correct me if I am wrong here. the source of that file MUST live in the original cookbook correct?
[2013-12-04 02:42:58 -0500] flaccid__: pretty sure yes
[2013-12-04 02:43:31 -0500] broconne: Yes, and I would say in theory, organizationally, that higher level cookbook really shold not be storing files that a wrapper cookbook, may or may nto want to use.
[2013-12-04 02:43:43 -0500] flaccid__: broconne: https://github.com/rightscale-cookbooks/rs-base/blob/master/recipes/ntp.rb#L21
[2013-12-04 02:44:35 -0500] flaccid__: i dunno, i like to keep things simple, switch things that happen by variables like node attributes, can have different templates for that in the one cookbook etc.
[2013-12-04 02:44:38 -0500] broconne: yeah, I mean I understand attribute overriding.  I just end up w/ the that if syntax in my recipe.
[2013-12-04 02:45:42 -0500] flaccid__: can't you set the attribute on the node instead of having to do it with recipe code?
[2013-12-04 02:45:58 -0500] flaccid__: like in a node.json. i havnt used server for ages, i just use a node.json with chef-solo..
[2013-12-04 02:47:42 -0500] flaccid__: like for example http://docs.opscode.com/knife_bootstrap.html knife bootstrap foo.bar.suf -j /foo/bar.json where the json file has the node attribute set as desired
[2013-12-04 02:49:20 -0500] broconne: ok - given me some things to think about. will play around a bit and see what comes of it
[2013-12-04 03:06:36 -0500] flaccid__: broconne: i looked in the opscode manage web UI and you can edit node attributes on a node in there too
[2013-12-04 03:07:20 -0500] broconne: looking a bit more, and it appears to me perhaps partials are what I should be using.. since they can be from another cookbook.
[2013-12-04 03:07:52 -0500] flaccid__: oh i'm not familiar with them
[2013-12-04 03:08:04 -0500] broconne: http://www.opscode.com/blog/2013/02/06/chef-11-in-depth-client-improvements/
[2013-12-04 03:08:07 -0500] broconne: under temlate partials
[2013-12-04 03:08:22 -0500] broconne: The render method takes some additional options that allow you to set
[2013-12-04 03:08:23 -0500] broconne: variables within the partial, lookup partials from disk, or use partials
[2013-12-04 03:08:23 -0500] broconne: from a different cookbook.
[2013-12-04 03:09:00 -0500] flaccid__: that sounds good, its like a subtemplate and can be from another cookbook?
[2013-12-04 03:09:14 -0500] broconne: yes
[2013-12-04 03:09:27 -0500] flaccid__: i always wanted that!
[2013-12-04 03:09:39 -0500] flaccid__: now its even more like mvc feel hehe
[2013-12-04 03:31:41 -0500] bluethundr: hey all .. I've installed chef server onto an ubuntu 13.10 server using the chef-server_11.0.4-1.ubuntu.12.04_amd64.deb I've downloaded from opscode
[2013-12-04 03:32:03 -0500] bluethundr: but I seem to be missing a chef-server init script. I was wondering what I was missing and how I could get the init script
[2013-12-04 03:54:43 -0500] storme_away: bluethundr: it's not in /etc/init.d, it's under /etc/init... opscode-runsvdir.conf
[2013-12-04 03:56:33 -0500] bluethundr: storme_away: ok thanks for the info
[2013-12-04 03:56:42 -0500] storme_away: np
[2013-12-04 03:57:08 -0500] storme_away: bluethundr: if you want to manually control things you'll want chef-server-ctl
[2013-12-04 04:38:07 -0500] strictlyb: is there a limit of how many roles can be included in a node runlist
[2013-12-04 04:51:28 -0500] jchauncey: strictlyb: its an array so im guessing no
[2013-12-04 04:51:43 -0500] jchauncey: would be rather stupid to do that
[2013-12-04 04:52:55 -0500] strictlyb: so wierd
[2013-12-04 04:52:59 -0500] strictlyb: my 3rd role
[2013-12-04 04:53:02 -0500] strictlyb: in runlist
[2013-12-04 04:53:04 -0500] strictlyb: is not running
[2013-12-04 04:53:06 -0500] strictlyb: hrm
[2013-12-04 05:02:07 -0500] jchauncey: do you have a comma seperating 2 nd 3?
[2013-12-04 05:23:24 -0500] freannrak: Is it possible to have my berkshelf cookbooks in a subdirectory? For example ../chef-repo/cookbooks/vendor/. I tried putting them there, but 'knife cookbook upload -all' doesn't detect them.
[2013-12-04 06:04:28 -0500] jchauncey: freannrak: why woud you do that?
[2013-12-04 06:04:41 -0500] jchauncey: if you want to upload all yoru dependent cookbooks just use berks upload
[2013-12-04 08:13:15 -0500] ignatz: I see that chef client is now 11.8.2 but I can't find release notes anywhere. Are they published?
[2013-12-04 08:17:12 -0500] slicknick: so this doesnt just happen at work?  :>
[2013-12-04 09:03:41 -0500] enbergj: I'm trying to use the "roles" search with chef, it doesn't seem to work, but then I read "the roles field is updated each time the chef-client is run" .. does this mean that the search will also not find the nodes until the next time chef-client is run on the nodes that were added to some role if I use the roles search?
[2013-12-04 09:04:46 -0500] enbergj: to clarify: node search, with roles:role_name
[2013-12-04 09:04:52 -0500] slicknick: you lost me at ...
[2013-12-04 09:05:08 -0500] slicknick: ok
[2013-12-04 09:05:20 -0500] slicknick: so you have a pre-existing role for 3 weeks
[2013-12-04 09:05:26 -0500] slicknick: you create a new node and add it to the role
[2013-12-04 09:05:35 -0500] slicknick: chef-client has not yet run on this new node
[2013-12-04 09:05:43 -0500] slicknick: hence it missing from search
[2013-12-04 09:06:12 -0500] enbergj: not exactly, I have an existing node, I create a new role and add it to the node
[2013-12-04 09:06:29 -0500] slicknick: i suppsoe it makes sense... you used knife on some other server to create the node in chef (is it master) DB ... but the client running on the actually OS hasnt checked in
[2013-12-04 09:06:36 -0500] slicknick: ah
[2013-12-04 09:06:47 -0500] slicknick: well yeah
[2013-12-04 09:06:56 -0500] enbergj: though it makes sense, as it still hasn't run chef-client, thus not configured it for the role
[2013-12-04 09:06:59 -0500] slicknick: whats your chef client check in interfval
[2013-12-04 09:07:10 -0500] slicknick: or, whats the equiv to uploading cookbook
[2013-12-04 09:07:13 -0500] slicknick: err maybe thats what you do
[2013-12-04 09:07:16 -0500] slicknick: add recipe and upload it right
[2013-12-04 09:07:17 -0500] slicknick: heh
[2013-12-04 09:07:23 -0500] slicknick: <- learnin
[2013-12-04 09:08:20 -0500] enbergj: this would make perfect sense, it not being returned because client hasn't run yet, except that the role: search still finds it .. makes me think that the role: search is buggy
[2013-12-04 09:10:54 -0500] slicknick: i dont even know what this roles:role_name reference is about .. mmm but thats beside the point
[2013-12-04 09:11:20 -0500] enbergj: in chef server you can search based on attributes, that is one of such search queries .. finds nodes, that have the role "role_name"
[2013-12-04 09:11:24 -0500] slicknick: id be surprised, but not shocked if search was buggy
[2013-12-04 09:11:32 -0500] slicknick: sure
[2013-12-04 09:11:36 -0500] slicknick: but if node hasnt checked int
[2013-12-04 09:11:37 -0500] slicknick: in
[2013-12-04 09:11:45 -0500] slicknick: or you ahvent uploaded the cookbook
[2013-12-04 09:11:47 -0500] slicknick: with the new recipe
[2013-12-04 09:12:12 -0500] slicknick: node, no no NOiDEa
[2013-12-04 10:15:43 -0500] ptrf: hmm, why do I have both /var/cache/chef/cookbooks and /var/chef/cache/cookbooks?
[2013-12-04 10:23:06 -0500] Takumo: Hi all, is it possible to run `knife bootstrap` as a user other than root? perhaps with 'sudo' once connected?
[2013-12-04 10:25:31 -0500] ptrf: Takumo: ye
[2013-12-04 10:25:47 -0500] ptrf: Takumo: knife bootstrap -h shows you that you have --ssh-user :-)
[2013-12-04 10:26:15 -0500] ptrf: Takumo: or -x
[2013-12-04 10:26:37 -0500] ptrf: and --sudo
[2013-12-04 10:26:44 -0500] workmad3: was just about to mention that :)
[2013-12-04 10:30:15 -0500] daxroc1: Morning all
[2013-12-04 10:32:58 -0500] daxroc1: How do I get chef-shell to include recipes from my local dir. I've a chef_shell.rb with the cookbook_path set and loading it with chef-shell -c .chef/chef-shell.rb
[2013-12-04 10:37:00 -0500] henk_: hi people. question: we build custom software in windows. To upgrade the software we need to stop a certain services and upgrade the files and then start the services again. I've got the recipe ready, but it keeps on restarting the services every time the chef-client services runs. is there a smarter way for this?
[2013-12-04 10:40:04 -0500] daxroc1: It's not reading the config file from argument as it's pointing to default /var/chef/cookbooks
[2013-12-04 10:40:42 -0500] daxroc1: *Chef::Config[:cookbook_path]
[2013-12-04 10:53:12 -0500] pcarrier: is a CLA necessary for trivial patches?
[2013-12-04 10:53:18 -0500] pcarrier: https://tickets.opscode.com/browse/COOK-4065
[2013-12-04 10:55:15 -0500] gregkare: I've read something about the CLA not being required anymore for trivial patches, can't find the source anymore though
[2013-12-04 10:55:33 -0500] pcarrier: henk_: you can have an only_if [has to build] for a ruby_block which notifies :stop, 'service[foo]', :immediately, builds, then notifies :start, 'service[foo]', :immediately
[2013-12-04 10:56:25 -0500] pcarrier: henk_: does this make sense?
[2013-12-04 10:57:10 -0500] pcarrier: (not that I've tried this in particular)
[2013-12-04 10:57:12 -0500] pcarrier: gregkare: thanks
[2013-12-04 10:57:13 -0500] henk_: well, i'll try and look it up. not so familiar with chef yet
[2013-12-04 10:57:51 -0500] pcarrier: henk_: also, if you want to leave your service untouched outside of that build process, declare it with action :nothing
[2013-12-04 10:58:14 -0500] pcarrier: then actions will only be taken through such notifications
[2013-12-04 10:58:56 -0500] henk_: pcarrier: thanks for the pointers. i'll look into the documentation. couldn't see a good answer online.
[2013-12-04 11:04:31 -0500] henk_: pcarrier: I've got it figured out. i check the version of a certain .DLL file and if it's different, then the windows services should stop, upgrade and start again
[2013-12-04 11:07:44 -0500] Takumo: Hi, I'm just getting started with chef, and I'm wondering how I upload a cookbook to hosted chef? I've tried `knife cookbook site download $COOKBOOK` , `tar xzf $COOKBOOK.tar.gz -C cookbooks` , `knife upload $COOKBOOK` but it doesn't work
[2013-12-04 11:08:28 -0500] workmad3: Takumo: is your ~/.chef/knife.rb config pointing at the hosted chef, yeah?
[2013-12-04 11:09:07 -0500] Takumo: yes, but it keeps stating that it can't find the cookbook
[2013-12-04 11:09:19 -0500] Takumo: I've added #{current_directory}/cookbooks to my cookbooks path
[2013-12-04 11:09:33 -0500] workmad3: so 'knife cookbook upload -o /path/to/cookbooks/directory cookbook_name'
[2013-12-04 11:09:37 -0500] Takumo: cookbook_path            ["#{current_dir}/../cookbooks", "#{current_dir}/cookbooks"]
[2013-12-04 11:09:41 -0500] Takumo: ah let's try
[2013-12-04 11:10:14 -0500] Takumo: "You must specify --all or at last one cookbook name"
[2013-12-04 11:10:38 -0500] Takumo: ah here we go!
[2013-12-04 11:11:09 -0500] workmad3: Takumo: you may also want to consider using berkshelf
[2013-12-04 11:11:32 -0500] workmad3: Takumo: as then you do 'berks upload' and it uploads the cookbooks in your Berksfile to your chef server
[2013-12-04 11:12:23 -0500] slicknick: so the default.rb file in the recipes dir -- thats not the only .rb file that can exist in a recipe, right ?
[2013-12-04 11:12:43 -0500] slicknick: curious to understand if you'd have more.. certain things only in the default
[2013-12-04 11:12:47 -0500] slicknick: specific other things in another rb
[2013-12-04 11:12:53 -0500] slicknick: and how the other rb gets called
[2013-12-04 11:13:15 -0500] workmad3: slicknick: no, you can have whatever you want there
[2013-12-04 11:13:24 -0500] workmad3: slicknick: each file in the recipes dir creates a new recipe in the cookbook
[2013-12-04 11:13:40 -0500] Takumo: workmad3: "Berkself" as in "ehmahgerd, berks" ?
[2013-12-04 11:13:43 -0500] workmad3: slicknick: which you can pull into the run list with 'cookbook_name:recipe_name'
[2013-12-04 11:13:47 -0500] workmad3: Takumo: yup :)
[2013-12-04 11:14:22 -0500] workmad3: slicknick: err, 'cookbook_name::recipe_name' sorry
[2013-12-04 11:14:26 -0500] slicknick: workmad3: cool, thanks
[2013-12-04 11:14:39 -0500] slicknick: apologies for the newb questions, and the many more to follow
[2013-12-04 11:15:18 -0500] workmad3: slicknick: https://learnchef.opscode.com/
[2013-12-04 11:16:06 -0500] slicknick: no doubt. i prefer dialogue if i can coerce people :P
[2013-12-04 11:22:04 -0500] zaargy: how do i override a hash at a different precedence level rather merge it?
[2013-12-04 11:26:30 -0500] zaargy: nm got it
[2013-12-04 11:26:59 -0500] slicknick: do share
[2013-12-04 11:27:44 -0500] stravze: any windows chef'ers out there
[2013-12-04 11:27:46 -0500] slicknick: i dont even know what that means but curious nonetheless
[2013-12-04 11:28:33 -0500] stravze: anyone uses Chef on windows  hosts
[2013-12-04 11:31:59 -0500] daxroc1: Hi folks , I'm trying to debug locally ( OSX 10.9, Chef 11 ) with chef-shell. I've configured a minimal chef_shell.rb in my cwd/.chef and launched chef-shell -c `pwd`/.chef/chef_shell.rb . When I switch to recipe_mode and include a recipe it fails with cannot find a resource for <cookbook> on mac_os_x  but If I manualy set the Chef::Config[:cookbook] with in the shell it can include ( well I get no errors ) and chef_run returns nil ? If some one could point
[2013-12-04 11:49:34 -0500] glen: baah. why data bag names are limiting dash and character?
[2013-12-04 11:49:34 -0500] glen: ERROR: Chef::Exceptions::InvalidDataBagItemID: Data Bag items must have an id matching /^[\-[:alnum:]_]+$/, you gave: "delfi-chef-ac2.delfi.lan"
[2013-12-04 11:50:19 -0500] glen: and dot
[2013-12-04 11:50:51 -0500] glen: i would like to have data bag item named user@fqdn, but seems '@' is not allowed and '.' as well
[2013-12-04 11:51:40 -0500] Takumo: I guess it's just trying to keep things simple and conventional
[2013-12-04 11:52:33 -0500] glen: if i have to circumvent the limitations replacing chars to something else, it's not going to be simple anymore!
[2013-12-04 11:54:14 -0500] Takumo: what's wrong with fqdn-user ?
[2013-12-04 11:54:21 -0500] Takumo: oh wait fqdn yes...
[2013-12-04 11:54:45 -0500] Takumo: #{fqdn.gsub('\W','-')} perhaps?
[2013-12-04 11:57:27 -0500] glen: /\W/ rather
[2013-12-04 11:59:13 -0500] maxmanders: Trying to use powershell_out mixin from the Powershell cookbook on Win2008R2; this defaults to Powershell 3 - can't figure out a way to use Powershell 2?
[2013-12-04 12:02:11 -0500] julienb: hello, it seems the new mixlib-shellout 1.3 broke the exitstatus method. It always returns nil for me. I've rolled back to mixlib-shellout 1.2 and it works fine. It broke my ark cookbook
[2013-12-04 12:02:24 -0500] julienb: anyone else with the same issue?
[2013-12-04 12:04:24 -0500] slicknick: shell out, with me tonight, shell out, with me oh ya
[2013-12-04 12:17:19 -0500] Takumo: Noob question, once I've created my role with its cookbooks etc, and attached it to a node, does that automatically get it set up, or do I have to do something to apply a role?
[2013-12-04 12:18:29 -0500] slicknick: upload!
[2013-12-04 12:18:51 -0500] Takumo: slicknick: ?
[2013-12-04 12:18:55 -0500] slicknick: knife cookbook upload Name-of-Cookbook
[2013-12-04 12:19:00 -0500] slicknick: i believe it is
[2013-12-04 12:19:31 -0500] Takumo: I've got the cookbooks uploaded, the role is visible in the management console, its attached to the node, but if I shell into the node, not seeing that these options have been applied...
[2013-12-04 12:19:41 -0500] slicknick: zaargy: so how do you override the hash?
[2013-12-04 12:20:42 -0500] slicknick: Takumo: has the chef-client run since you uploaded
[2013-12-04 12:21:19 -0500] Takumo: oh do I need to run chef-client on the server, or does knife bootstrap add a cronjob?
[2013-12-04 12:21:36 -0500] Takumo: aaah
[2013-12-04 12:22:08 -0500] slicknick: you tell me
[2013-12-04 12:27:40 -0500] brahman: Hi, any good primers on differences between chef and puppet and a possible migration from puppet towards chef?
[2013-12-04 12:30:55 -0500] stravze: anyone got any experience with the IIS cookbook ? want to know quickest way to create 100 virtual directorys
[2013-12-04 12:44:55 -0500] slicknick: Takumo: havnt bootstrapped ever :/
[2013-12-04 12:45:04 -0500] slicknick: what did you find in the cron entries
[2013-12-04 12:45:17 -0500] slicknick: rather, did you find anything
[2013-12-04 12:50:27 -0500] brahman: Hi,does anyone have a good primer on differences between chef and puppet and a possible migration from puppet towards chef caveats?
[2013-12-04 12:50:48 -0500] Takumo: nothing :S
[2013-12-04 12:55:22 -0500] _dumfries: brahman: use what works best, look at your current reason for wanting to migrate the make the case. I doubt you'll find a write up that is relevant to your desired to migrate.
[2013-12-04 12:56:19 -0500] shay-: hi, i want to use rundeck and chef. anyone knows how to get the nodes into rundeck? the chef plugin on their site seems to be not available anymore ...
[2013-12-04 12:56:33 -0500] glen: can i write data bag items from recipe?
[2013-12-04 12:56:41 -0500] glen: add and then write
[2013-12-04 13:02:24 -0500] Takumo: is there not a way to run chef-client as a daemon so it keeps in-sync with its roles?
[2013-12-04 13:03:05 -0500] brahman: _dumfries: thanks for that info. Do you have or know about any ressources concerning the main differences between the two Configuration Management systems?
[2013-12-04 13:03:47 -0500] brahman: I guess it's asking a lot, but an unbiased Puppet vs Chef discussion would be awesome...
[2013-12-04 13:04:12 -0500] _dumfries: brahman: They are simply different approaches to a similar problem, I'd suggest playing with them both. You'll get the most unbiased opinion that way :)
[2013-12-04 13:04:13 -0500] brahman: everytime I search in google I get flame war articles...
[2013-12-04 13:04:21 -0500] _dumfries: Yeah, best to avoid those.
[2013-12-04 13:04:35 -0500] brahman: cool, will set up a dev environment.
[2013-12-04 13:04:43 -0500] _dumfries: Nice one :)
[2013-12-04 13:04:51 -0500] brahman: Thanks for your help.
[2013-12-04 13:10:23 -0500] glen: damn. i tried to create databag item and save it from recipe. but i get error
[2013-12-04 13:10:24 -0500] glen: 137>> databag_item.save
[2013-12-04 13:10:28 -0500] glen: 403 "Forbidden"
[2013-12-04 13:11:05 -0500] glen: yet such thing is done here https://github.com/opscode-cookbooks/database/blob/master/recipes/ebs_volume.rb
[2013-12-04 13:17:03 -0500] slicknick: permissions
[2013-12-04 13:17:45 -0500] glen: yes, but how do i manage these
[2013-12-04 13:17:57 -0500] glen: don't see anything in knife databag edit
[2013-12-04 13:18:06 -0500] glen: nor i want to make node user as "admin"
[2013-12-04 13:18:27 -0500] glen: and database cookbook does not describe any special setup for databag it creates entries to https://github.com/opscode-cookbooks/database
[2013-12-04 13:18:31 -0500] slicknick: set perms in the recipe i think
[2013-12-04 13:18:38 -0500] slicknick: user doenst need to be admin
[2013-12-04 13:18:58 -0500] slicknick: various ways to provide non admin users access to the filesystem
[2013-12-04 13:19:01 -0500] glen: if i look the ebs_volume.rb recipe, i doesn't see any permission being set
[2013-12-04 13:19:22 -0500] glen: it's not filesystem, it's when it uploads data to chef server
[2013-12-04 13:19:55 -0500] slicknick: the 3rd it refers to what
[2013-12-04 13:19:56 -0500] slicknick: heh
[2013-12-04 13:19:59 -0500] slicknick: it being the node. facilitated by chef-client
[2013-12-04 13:20:01 -0500] slicknick: ?
[2013-12-04 13:20:11 -0500] glen: huh?
[2013-12-04 13:20:30 -0500] slicknick: its its it
[2013-12-04 13:20:36 -0500] slicknick: wtf is it
[2013-12-04 13:20:37 -0500] slicknick: heh
[2013-12-04 13:20:50 -0500] glen: i'm trying to crate data bag item, so i found this recipe actually doing the same: https://github.com/opscode-cookbooks/database/blob/master/recipes/ebs_volume.rb#L97
[2013-12-04 13:21:05 -0500] glen: but in my case code fails with 403 on line doing databag_item.save
[2013-12-04 13:21:48 -0500] slicknick: have you tried running that recipe ?
[2013-12-04 13:21:52 -0500] slicknick: the one you found
[2013-12-04 13:21:56 -0500] glen: no
[2013-12-04 13:22:02 -0500] slicknick: try it i bet the same thing happens
[2013-12-04 13:22:16 -0500] slicknick: oh wait
[2013-12-04 13:22:17 -0500] glen: but that cookbook is "official" it must work!
[2013-12-04 13:22:20 -0500] slicknick: forbidden thats apache
[2013-12-04 13:22:25 -0500] slicknick: or ngnix
[2013-12-04 13:22:29 -0500] glen: nginx really :D
[2013-12-04 13:22:30 -0500] slicknick: thats web server related
[2013-12-04 13:22:31 -0500] glen: yes
[2013-12-04 13:22:40 -0500] slicknick: #httpd
[2013-12-04 13:22:43 -0500] slicknick: heh
[2013-12-04 13:22:43 -0500] glen: that is when databag_item.save is done
[2013-12-04 13:22:50 -0500] glen: and it does PUT or something to chef-server
[2013-12-04 13:23:16 -0500] glen: yep. rest put
[2013-12-04 13:23:20 -0500] slicknick: so the server your attempting to PUT to says no way d00dy
[2013-12-04 13:23:34 -0500] glen: http://sprunge.us/JDTA
[2013-12-04 13:23:45 -0500] glen: yes! that's what i said!
[2013-12-04 13:23:52 -0500] slicknick: havent setup a box yet but go dig into the web conf
[2013-12-04 13:24:12 -0500] glen: so, i do not want to make my client node to became admin in chef-server to make that code to work
[2013-12-04 13:24:14 -0500] slicknick: check web server logs and chef logs
[2013-12-04 13:24:19 -0500] slicknick: not so fresh air break bbiab
[2013-12-04 13:25:01 -0500] glen: but then you said go chek permission for access to filesystem, and i tried to say it's chef-server forbidden nothing related to filesystem
[2013-12-04 13:25:11 -0500] glen: 15:17:03  slicknick> permissions
[2013-12-04 13:25:14 -0500] glen: 15:17:45  glen> yes, but how do i manage these
[2013-12-04 13:25:17 -0500] glen: 15:17:57  glen> don't see anything in knife databag edit
[2013-12-04 13:25:20 -0500] glen: 15:18:06  glen> nor i want to make node user as "admin"
[2013-12-04 13:25:42 -0500] juliancdunn: maybe you're hitting https://tickets.opscode.com/browse/CHEF-4435 ?
[2013-12-04 13:26:28 -0500] glen: no. if i made client of the machine as admin, the code ran fine
[2013-12-04 13:26:40 -0500] glen: via knife client edit chef-ac2.delfi.lan
[2013-12-04 13:27:48 -0500] glen: oh. damn. this is documented in that cookbook
[2013-12-04 13:28:01 -0500] glen: hwoops https://github.com/opscode-cookbooks/database#data-bags
[2013-12-04 13:36:18 -0500] slicknick: b00m
[2013-12-04 13:41:49 -0500] ___stefan: Hi everyone, Is it possible to remove an item from a nodes run_list in a chef recipe that is currently running on that node?
[2013-12-04 13:45:56 -0500] glen: hey
[2013-12-04 13:46:14 -0500] glen: i have disabled ohai passwd. plugin, is there way to get data for particular user anyway?
[2013-12-04 13:48:57 -0500] cpuguy83: ___stefan: You could certainly, in the recipe you want to remove, put in a check to see if it should run or not
[2013-12-04 13:49:06 -0500] cpuguy83: But I doubt you can actually remove it.
[2013-12-04 13:49:20 -0500] cpuguy83: Especially since it's non-deterministic
[2013-12-04 13:49:58 -0500] emachnic: Hey y'all, looking for some opinions on attribute usage. Overriding attributes in a wrapper cookbook, would using `default` be preferrable to `override`?
[2013-12-04 13:50:11 -0500] ___stefan: cpuguy83: I would just remove it after first successful run.
[2013-12-04 13:50:46 -0500] cpuguy83: ___stefan: The recipe really needs to be idempotent.  So you should be able to run it 100 times (N times) without having nasty side effects
[2013-12-04 13:50:56 -0500] emachnic: I personally like the use of override because the intent is a bit more explicit
[2013-12-04 13:51:06 -0500] ___stefan: cpuguy83: there is not way to edit the run list from within a recipe? I seem to be able to set and save node attributes.
[2013-12-04 13:51:31 -0500] cpuguy83: emachnic: I use default since I'm really just trying to change the cookbook to be want I want it to be, not necessarily override an attribute
[2013-12-04 13:51:59 -0500] cpuguy83: ___stefan: I'm sure you could make an API call to do so, but this is flat out the _wrong_ way to do it.
[2013-12-04 13:52:54 -0500] emachnic: cpuguy83: So use default to set them to what you want them to be in the attribute file and if you need that overridden in a recipe then use override?
[2013-12-04 13:53:16 -0500] cpuguy83: emachnic: Sounds about right
[2013-12-04 13:54:02 -0500] ___stefan: cpuguy83: yes that would be quite ugly. How do you deal with maintenance tasks? Like apt-get upgrade. I don't want that to run everytime chef runs. I would prefer to have a special cookbook I can add to a nodes run_list that runs and removes itself.
[2013-12-04 13:54:56 -0500] cpuguy83: ___stefan: You don't do apt-get upgrade from Chef.  Either handle updates manually or write recipes to manage actual package versions.
[2013-12-04 13:55:43 -0500] emachnic: cpuguy83: Thanks for the thoughts
[2013-12-04 13:56:35 -0500] ___stefan: cpuguy83: ok thanks
[2013-12-04 14:12:05 -0500] CPS: i'm having an issue with a private gem server, posted about it here http://stackoverflow.com/questions/20358966/ruby-server-responds-with-index-404s-everything-else
[2013-12-04 14:14:58 -0500] dereckt0m: hi there
[2013-12-04 14:16:06 -0500] dereckt0m: i'm trying to DL chef server *.deb 11.0.10 (http://www.opscode.com/chef/install/), response is a XML with explicit "denied"
[2013-12-04 14:16:11 -0500] dereckt0m: any ideas ?
[2013-12-04 14:18:23 -0500] rsmitty: I get it too. Looks like 11.0.8 works fine though.
[2013-12-04 14:18:33 -0500] rsmitty: I think it just hasn't been made public in S3
[2013-12-04 14:20:02 -0500] dereckt0m: rsmitty: thx for answer, i'll get the 11.0.8
[2013-12-04 14:22:46 -0500] duki: Hey guys - I'm trying to bootstrap a server using:  knife bootstrap windows winrm machine.domain.com -x domain\user -P <pass> -p 5985, and I keep getting this back: Network Error: No connection could be made because the target machine actively refused it.
[2013-12-04 14:23:20 -0500] duki: I created a new inbound rule on the server to allow all TCP traffic inbound on port 5985 and I still get that error
[2013-12-04 14:24:37 -0500] zaargy: have you tried running a regular winrm cmmand as that user?
[2013-12-04 14:25:05 -0500] duki: No, do you have an example command I could try?
[2013-12-04 14:25:11 -0500] cpuguy83: duki: WinRM is tricky
[2013-12-04 14:25:23 -0500] cpuguy83: Trixy little hobbit
[2013-12-04 14:26:12 -0500] cpuguy83: duki: Make sure you are allowing unencrypted traffic (if that's what you are doing), make sure your network profile is not set to public (WinRM will refuse any connection if the network profile is public)
[2013-12-04 14:26:38 -0500] duki: Unencrypted is allowed, and I'm on a domain network connection
[2013-12-04 14:26:56 -0500] duki: I got this working yesterday on another server - but now I can't figure out why this is blocked on the current server
[2013-12-04 14:27:28 -0500] cpuguy83: duki: You ran all the steps from the chef docs? winrm quickconfig, etc.?
[2013-12-04 14:28:01 -0500] duki: cpuguy83: yeah, unless I need to run those on the remote box also?
[2013-12-04 14:28:22 -0500] cpuguy83: Needs to be run on the box you are connecting to
[2013-12-04 14:29:19 -0500] duki: Hm, same problem
[2013-12-04 14:30:41 -0500] cpuguy83: duki: Did you run all the commands?
[2013-12-04 14:30:49 -0500] cpuguy83: winrm quickconfig -q
[2013-12-04 14:30:55 -0500] cpuguy83: winrm set winrm/config/winrs @{MaxMemoryPerShellMB="300"}
[2013-12-04 14:30:59 -0500] cpuguy83: winrm set winrm/config @{MaxTimeoutms="1800000"}
[2013-12-04 14:31:05 -0500] cpuguy83: winrm set winrm/config/service @{AllowUnencrypted="true"}
[2013-12-04 14:31:11 -0500] cpuguy83: winrm set winrm/config/service/auth @{Basic="true"}
[2013-12-04 14:31:32 -0500] duki: when I did quickconfig -q I got:  C:\Windows\system32>winrm quickconfig -q WinRM already is set up to receive requests on this machine. WSManFault     Message         ProviderFault             WSManFault                 Message = Unable to check the status of the firewall.  Error number:  -2147024894 0x80070002 The system cannot find the file specified.
[2013-12-04 14:33:32 -0500] duki: But other than that, yes everything else was run
[2013-12-04 14:34:36 -0500] cpuguy83: duki: What does this output: winrm get winrm/config
[2013-12-04 14:35:04 -0500] duki: C:\Windows\system32>winrm get winrm/config Config     MaxEnvelopeSizekb = 150     MaxTimeoutms = 1800000     MaxBatchItems = 32000     MaxProviderRequests = 4294967295     Client         NetworkDelayms = 5000         URLPrefix = wsman         AllowUnencrypted = true         Auth             Basic = true             Digest = true             Kerberos = true             Negotiate = true             Certificate = true             CredSSP = 
[2013-12-04 14:38:10 -0500] duki: couguy83: https://gist.github.com/anonymous/7788458
[2013-12-04 14:38:16 -0500] duki: cpuguy83:
[2013-12-04 14:38:50 -0500] cpuguy83: duki: And this is from the remote server?
[2013-12-04 14:38:54 -0500] duki: yes
[2013-12-04 14:39:10 -0500] cpuguy83: Can you telnet to 5985 on that server?
[2013-12-04 14:39:44 -0500] duki: Could not open connection to the host, on port 5958: Connect failed
[2013-12-04 14:39:59 -0500] cpuguy83: wrong port
[2013-12-04 14:40:18 -0500] duki: ah - either way, same message
[2013-12-04 14:40:45 -0500] cpuguy83: Sounds like a firewall issue
[2013-12-04 14:40:58 -0500] duki: I agree
[2013-12-04 14:41:06 -0500] duki: But I have everything wide open on that port =/
[2013-12-04 14:41:19 -0500] cpuguy83: Did you try disabling it just to test?
[2013-12-04 14:41:51 -0500] duki: actually, I just checked and it looks like it's off
[2013-12-04 14:41:56 -0500] cpuguy83: In case you are wondering, WinRM is garbage... Windows is garbage.
[2013-12-04 14:42:05 -0500] duki: :)
[2013-12-04 14:42:20 -0500] duki: For our production envs, there's no way around it sadly
[2013-12-04 14:42:47 -0500] cpuguy83: It may be easier to setup SSH on the servers and deal with that
[2013-12-04 14:53:01 -0500] mcnamarabrian: not sure whether this has been brought up or not but it looks like there are permission issues with http://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.10-1.ubuntu.12.04_amd64.deb.
[2013-12-04 15:06:28 -0500] s2r2: hi there! are there any pointers for using chef-server in an ipv6-only environment?
[2013-12-04 15:16:18 -0500] s2r2: is there any chance to get my hands on chef-server 11.2.0?
[2013-12-04 15:19:56 -0500] lewiz: If I have "a": { "b": { "c" } } in my environment config can I do: default['cookbook_name']['a'] = node['a'] and have it copy the whole subtree?  My attempt to do this has failed
[2013-12-04 15:22:07 -0500] s2r2: omnibus to the rescue building...
[2013-12-04 15:26:24 -0500] gyre007: Im running into some bizzare issue with chef-solo
[2013-12-04 15:26:39 -0500] gyre007: I have some execute resource at the end of the resource collection
[2013-12-04 15:26:50 -0500] gyre007: basically....it is supposed to query a database for something
[2013-12-04 15:26:55 -0500] gyre007: however
[2013-12-04 15:27:51 -0500] gyre007: it looks like notifications are fired literally straight after it so when the execute resource fires it can not connect to DB because hey notifications are firing and database is restarting
[2013-12-04 15:27:53 -0500] gyre007: basically
[2013-12-04 16:13:33 -0500] paulczar: the download link on chef website for 11.0.10 seems to be broken
[2013-12-04 16:13:34 -0500] paulczar: https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.10-1.ubuntu.12.04_amd64.deb
[2013-12-04 16:13:38 -0500] paulczar: gives 403 error
[2013-12-04 16:14:14 -0500] paulczar: from following the links @ http://www.opscode.com/chef/install/
[2013-12-04 16:15:05 -0500] mattray: btm: ^^
[2013-12-04 16:17:45 -0500] pwelch: re: chef server 11.0.10, getting the same here when trying to download the package
[2013-12-04 16:19:48 -0500] helfire: hey, anyone familiar with the application_java and application cookbooks? It works on vagrant/chef-solo, but when i move to openstack/chef-server i get an odd error durring deployment
[2013-12-04 16:20:02 -0500] helfire: [2013-12-04T10:11:15-06:00] FATAL: Errno::EINVAL: deploy_revision[xxx] (/var/chef/cache/cookbooks/application/providers/default.rb line 123) had an error: Errno::EINVAL: Invalid argument - /usr/share/tomcat7/webapps/current
[2013-12-04 16:21:14 -0500] mattray: paulczar: pwelch: should be fixed
[2013-12-04 16:23:47 -0500] paulczar: ya looks good
[2013-12-04 16:26:43 -0500] pwelch: mattray: thanks
[2013-12-04 16:27:02 -0500] pwelch: Now getting a "No version specified, and no candidate version available for chef-server_11.0.10-1.ubuntu.10.04_amd64.deb" in my chef-server cookbook. related or on my end?
[2013-12-04 16:28:11 -0500] gyre007: im puzzled
[2013-12-04 16:28:38 -0500] gyre007: can someone tell me WHY the following code FAILS chef run but when run manually it WORKS JUST FINE ? https://gist.github.com/milosgajdos83/8b30aeb00e2876afba37
[2013-12-04 16:28:50 -0500] gyre007: ive spent like 2 hours figuring this out...
[2013-12-04 16:28:55 -0500] gyre007: totally clueless...
[2013-12-04 16:29:41 -0500] gyre007: its a simple execute resource...
[2013-12-04 16:29:47 -0500] gyre007: no rocket science...
[2013-12-04 16:30:32 -0500] mattray: pwelch: try again?
[2013-12-04 16:32:36 -0500] divad: did you $ rm -rf /var/cache/chef; rm -rf /var/chef/
[2013-12-04 16:32:44 -0500] pwelch: mattray: sorry, seems to be on my end. I removed the cached files (most likely from the running it when the s3 was blocked)
[2013-12-04 16:32:44 -0500] bflad: I'd use the user attribute rather than sudo (personally)
[2013-12-04 16:32:50 -0500] pwelch: seems to be working now
[2013-12-04 16:40:24 -0500] chris613: gyre007: I see that you're running as vagrant, not as root. Does vagrant have NOPASSWD in the sudoers file, or was the password auth cache in your manual example?
[2013-12-04 16:40:34 -0500] chris613: I agree with bflad about the user attribute
[2013-12-04 16:41:00 -0500] gyre007: chris613: yeah Im using vagrant
[2013-12-04 16:41:07 -0500] gyre007: that makes it even more painful
[2013-12-04 16:41:22 -0500] gyre007: chef-soloe + utterly_slow_vagrant make me cry :)
[2013-12-04 16:42:11 -0500] gyre007: chris613: yeah vagrant has NO passwd
[2013-12-04 16:42:21 -0500] gyre007: as in sudoers
[2013-12-04 16:43:33 -0500] gyre007: when the chef run fails and I re-run chef-client, it succeeeds just fine
[2013-12-04 16:43:37 -0500] gyre007: totally weird
[2013-12-04 16:45:00 -0500] gyre007: what I simply DO NOT GET is why running this manually succeeds with NO problems and running in chef crashes big time....
[2013-12-04 16:45:07 -0500] gyre007: thats beyond me mmm
[2013-12-04 16:46:09 -0500] lewiz: Is it possible to subscribe to notifications from a definition?  If so, can anybody point me to docs as to how to raise events from the definition
[2013-12-04 16:46:30 -0500] cdrc: greetings... any input of how chef-client will behave in scenrio >>> a) chef-client configured for  periodic run of 1 sec (-i).. b) added cookbook "x" to run_list c) there is  chef-client run still in progress and run_list  is update for remove "x" and add "y"...... so, next periodic run will occur or it won't since chef-client is already running
[2013-12-04 16:47:35 -0500] ignatz: Hi all. Are there release notes for client 11.8.2?
[2013-12-04 16:47:36 -0500] gyre007: cdrc: this is transactional so you should expect the first run finish with the cookbook version already in place when the run was triggered
[2013-12-04 16:54:17 -0500] gabrtv: anyone else getting 503's from http://api.berkshelf.com/universe
[2013-12-04 16:56:19 -0500] cdrc: gyre007: is this cookbook version in reference to   "remove current cookbook and addd new cookbook to run_list" or revised cookbook  uploaded to chef-server
[2013-12-04 17:09:24 -0500] pwelch: are open source chef questions better here or in chef-hacking?
[2013-12-04 17:09:43 -0500] laurent\: here it's fine
[2013-12-04 17:10:08 -0500] pwelch: today is chef-server troubleshooting day for me =)
[2013-12-04 17:10:12 -0500] pwelch: Im getting "mkdir: cannot create directory `/var/lib/rabbitmq': Permission denied" in the logs
[2013-12-04 17:11:25 -0500] laurent\: /var/lib/rabbitmq ? what chef-server version are you running ?
[2013-12-04 17:12:19 -0500] pwelch: using the chef-server cookbook which is set to latest so 11.0.10
[2013-12-04 17:13:16 -0500] pwelch: it would be helpful if `chef-server-ctl help` printed the cher-server version
[2013-12-04 17:14:29 -0500] ignatz: does it work with --version ?
[2013-12-04 17:14:57 -0500] ptah: hey guys. I keep running into a chef fatal error installing a chef_gem within my cookbook. I have it declared in a recipe after including several of it's dependency cookbooks. it seems the load order is off because omitting the chef_gem call on the first run then adding it back seems to resolve the bug. anybody ever run into this issue?
[2013-12-04 17:15:06 -0500] pwelch: ignatz: no, but when I run chef-client on the chef-server it lists the package it is using so I now it is the latest
[2013-12-04 17:15:18 -0500] ignatz: ah okay
[2013-12-04 17:16:19 -0500] laurent\: in that case it should be in /var/opt/chef-server/rabbitmq rather than in /var/lib/rabbitmq ? no ?
[2013-12-04 17:16:34 -0500] pwelch: laurent\: I would think so but Im not sure why that is happening
[2013-12-04 17:23:34 -0500] CPS: ptah: you may be having a problem with chef's 2-pass execution
[2013-12-04 17:24:16 -0500] ptah: CPS: where can I read up on that?
[2013-12-04 17:25:42 -0500] CPS: this may help http://erik.hollensbe.org/2013/03/16/the-chef-resource-run-queue/
[2013-12-04 17:26:16 -0500] CPS: but more generally, i believe if you have a chef_gem resource and then "require 'gem'" below it outside of a chef resource, the require actually gets executed first
[2013-12-04 17:26:25 -0500] CPS: i could be wrong about this though
[2013-12-04 17:27:02 -0500] jbz: Cheers folks, n0b-ish chef/ruby question.  If I have an attribute which is an array of hashes, and I want to check if anything is in it before taking an action, what's the best way to do that?  Is there something akin to a .empty? method?  Relatedly, is it OK to put an array of hashes in an attribute, or should I be using the attribute namespacing directly?
[2013-12-04 17:29:10 -0500] pwelch: jbz: I would break it up into multiple attributes if possible
[2013-12-04 17:30:10 -0500] jbz: pwelch: hm.  ok.  How do I check if an attribute namespace is empty, then? Can I just test for nil against the top-level attribute of the space?
[2013-12-04 17:30:12 -0500] pwelch: since it is just ruby you have access to Ruby methods so if you want to check if an array or hash is empty you can call .empty?
[2013-12-04 17:30:32 -0500] pwelch: you could do `if node['foo']` do something end
[2013-12-04 17:30:44 -0500] pwelch: so if the node attribute is defined
[2013-12-04 17:30:48 -0500] jbz: ah
[2013-12-04 17:31:13 -0500] jbz: I had vague memories of being told that attributes didn't behave precisely like Ruby arrays/hashes and not to assume :-)
[2013-12-04 17:31:54 -0500] pwelch: or 'if !node['foo'].nil?' but that would be if you are creating default['foo'] = nil initially
[2013-12-04 17:32:24 -0500] ptah: CPS: that helps me debug this issue more. thanks
[2013-12-04 17:32:33 -0500] CPS: np
[2013-12-04 17:32:39 -0500] pwelch: jbz well they are a Mash so you can access them as a string or symbol. Not sure if thats what the person was talking about. so you can do node['foo'], node[:foo] or node.foo
[2013-12-04 17:39:50 -0500] jbz: pwelch: ah, I see.  Many thanks.
[2013-12-04 17:56:49 -0500] brimstone: i'm trying to get started with chef-solo via vagrant. what's the proper way to download a cookbook from the community site?
[2013-12-04 17:58:01 -0500] Guest25735: quick question..... I have a 10.08 chef server...and my cookbook chef-run fails because an override attribute that I give in the role is not being applied.. I have a check that hits a URL to see if it is active...(and the default url is deprecated)..any suggestions?
[2013-12-04 17:58:09 -0500] cyberswat: brimstone: https://github.com/berkshelf/vagrant-berkshelf and http://berkshelf.com/ imo
[2013-12-04 17:59:24 -0500] brimstone: oh so that's how berkshelf plays into this
[2013-12-04 18:00:22 -0500] brimstone: thanks cyberswat
[2013-12-04 18:03:00 -0500] helfire: application_java seems to be outdated/ignored
[2013-12-04 18:08:23 -0500] jchauncey: helfire: yeah we decided to just write our own provider to do java deploys
[2013-12-04 18:08:41 -0500] jchauncey: im hoping soon we can open source it
[2013-12-04 18:08:53 -0500] helfire: ya i'm almost at that point!
[2013-12-04 18:09:10 -0500] helfire: jchauncey: how generally do you go about it?
[2013-12-04 18:09:24 -0500] jchauncey: what do you mean?
[2013-12-04 18:09:48 -0500] helfire: i mean do you just copy wars into the webapps and use a template for your context?
[2013-12-04 18:10:16 -0500] jchauncey: no we use executable jars
[2013-12-04 18:10:29 -0500] jchauncey: we use jetty/netty for all of our apps
[2013-12-04 18:11:12 -0500] helfire: ahh, ya we looked at using the tomcat embeded runtime in our jars, but it doesnt look like many do that, or it's not well documented
[2013-12-04 18:11:40 -0500] jchauncey: so we download the jar from nexus and put it into a directory like /home/service-name/releases/123-abc23/service-name-123-abc23.jar
[2013-12-04 18:11:48 -0500] jchauncey: use jetty
[2013-12-04 18:12:23 -0500] jchauncey: then we use a custom LWRP to setup bluepill for that service
[2013-12-04 18:12:55 -0500] jchauncey: jetty is super fast and since you can bundle it with your app it makes it really easy to distribute and scale
[2013-12-04 18:13:06 -0500] jchauncey: netty is even better (if you dont need a servlet container)
[2013-12-04 18:13:43 -0500] helfire: ya, i'm in a huge org, moving from websphere to tomcat was a big move, not sure people are ready for another jump :0-
[2013-12-04 18:13:47 -0500] helfire: :)*
[2013-12-04 18:16:13 -0500] jchauncey: been there =)
[2013-12-04 18:16:23 -0500] jchauncey: being a rebel is sometimes a good thing
[2013-12-04 18:30:22 -0500] brimstone: cyberswat: i'm having problems getting vagrant and berkshelf to work, is this the right place to ask?
[2013-12-04 18:33:58 -0500] cyberswat: brimstone: I'm not going to be able to offer support, but I think you may get help here or in #berkshelf
[2013-12-04 18:35:06 -0500] cyberswat: brimstone: here's an example project if it helps figure anything out https://github.com/cyberswat/drupal-lamp/
[2013-12-04 18:37:45 -0500] brimstone: cyberswat: thanks!
[2013-12-04 18:49:35 -0500] CPS: does chef_gem work with geminabox?
[2013-12-04 18:56:49 -0500] nate`: so, fresh RHEL 6.5 AMI and this happens: http://pastebin.com/hSiw3MKN
[2013-12-04 18:57:09 -0500] nate`: Any idea as to what the failure could be?
[2013-12-04 19:00:06 -0500] nate`: Hrm, hostname failed it
[2013-12-04 19:11:27 -0500] nate`: lack of a valid hostname because I haven't set up zonify yet, bletch.
[2013-12-04 19:12:01 -0500] gswallow: can I haz Chef sticker?
[2013-12-04 19:29:49 -0500] pwelch: so building a new chef server with chef-server cookbook everything works fine. if I run chef-server-ctl restart and then tail the logs it has an issue connecting to AMQP
[2013-12-04 19:30:26 -0500] pwelch: env: ubuntu 10.04 chef-server package installed via cookbook: chef-server_11.0.10-1.ubuntu.10.04_amd64.deb
[2013-12-04 19:30:34 -0500] pwelch: anyone seen anything similar?
[2013-12-04 19:31:42 -0500] pwelch: actually I stand corrected it seems to just take awhile for rabbitmq to come up. weird...
[2013-12-04 19:33:09 -0500] brimstone: the community apache2 cookbook is telling me package[apache2] (apache2::default line 20) had an error: Chef::Exceptions::Package: No version specified, and no candidate version available for apache2
[2013-12-04 19:33:26 -0500] brimstone: could it be that i'm missing ohai?
[2013-12-04 19:43:00 -0500] benjohnson77: ohai chefs
[2013-12-04 19:43:37 -0500] benjohnson77: is there any convention to prevent some recipes from running on nodes.
[2013-12-04 19:44:31 -0500] benjohnson77: I put together a recipe together to manage a DMZ host, but I don't want any one to run that on another node
[2013-12-04 19:44:50 -0500] benjohnson77: stupid question ?
[2013-12-04 19:46:07 -0500] wdilly: benjohnson77, wouldnt you just append the nodes runlist?
[2013-12-04 19:47:51 -0500] benjohnson77: i am worried about someone running knife bootstrap and running recipes against the dmz or the dmz recipe against other nodes
[2013-12-04 19:48:45 -0500] gchristensen: benjohnson77: I have a few recipes which are no-op unless I manually set a node attribute of 'foo-recipe']['are-you-sure'] = 'yes'
[2013-12-04 19:49:36 -0500] gswallow: unless node.role?('role_name') do . end.
[2013-12-04 19:49:53 -0500] gswallow: or environment-specific run lists.
[2013-12-04 19:51:33 -0500] benjohnson77: thanks guys
[2013-12-04 19:52:36 -0500] jchauncey: yeah unfortunately chef assumes if you have the keys you can do almost anything
[2013-12-04 19:53:29 -0500] nate`: Is there an API call to create users through code?
[2013-12-04 19:53:30 -0500] benjohnson77: I had the role env solution, but I hadn't though to the attribute discount double check
[2013-12-04 19:53:54 -0500] gswallow: dahhhble check?
[2013-12-04 19:54:07 -0500] gswallow: can I haz Chef sticker?
[2013-12-04 19:54:23 -0500] benjohnson77: :) what gchristensen said
[2013-12-04 19:54:42 -0500] gchristensen: I'm not saying its the best way, but its a way :P
[2013-12-04 19:55:40 -0500] pwelch: nate`: http://docs.opscode.com/api_chef_server.html#users
[2013-12-04 19:56:36 -0500] pwelch: nate`: if you are using chef 11 i believe there is a `knife user create` command as well
[2013-12-04 19:57:14 -0500] jchauncey: i think one of the great things about chef is that since its just ruby you can probaby formulate all sorts of guards to make sure things are not run if you dont want them to
[2013-12-04 19:57:21 -0500] nate`: Well I want to query AWS IAM and automatically create and delete users and also base their privileges on their security policies.
[2013-12-04 19:57:40 -0500] pwelch: nate`: so you want to create users in AWS IAM?
[2013-12-04 19:57:49 -0500] pwelch: or use it as a base
[2013-12-04 19:58:33 -0500] pwelch: if you're hitting the aws IAM I would look at the fog gem. As for automating creating Chef Server Users, I have never done it but the server API might be a starting point
[2013-12-04 19:59:19 -0500] nate`: I'm already creating users in IAM by talking to an active directory.
[2013-12-04 19:59:52 -0500] martelo: hey guys, whats up
[2013-12-04 19:59:57 -0500] nick34342: I'm going thru the webinar.. but right from the beginning he's talking about a .chef folder..   well I used git to sync the chef-repository but there is no folder like that!!
[2013-12-04 20:00:04 -0500] nate`: Poll the A/D according to the security requirements, created a couple hundred IAM users, and I don't want to do that by hand on chef.
[2013-12-04 20:00:56 -0500] pwelch: nate`: I can for sure see the use case. I just haven't done it personally. Maybe someone else in here can give you more specifics. Sorry :/
[2013-12-04 20:00:58 -0500] nick34342: I posted my question in the learnchef chat room but there is nobody there
[2013-12-04 20:02:11 -0500] pwelch: nate`: but reading from the chef server api docs it looks like POST /users can create a user. the only problem is it will return the private and public keys so you still need to find a way to distribute those
[2013-12-04 20:02:59 -0500] nate`: I can take those out of the JSON object and create a temp file somewhere I suppose, though users can regenerate their private keys so I could care less about that ;)
[2013-12-04 20:04:17 -0500] nate`: Guess I'll send a few posts and get an idea.
[2013-12-04 20:05:17 -0500] gchristensen: nate`: I wouldn't store those keys at *all*, IMO
[2013-12-04 20:05:23 -0500] nate`: Too bad what ever I come up with I can't share :\  stupid NDA
[2013-12-04 20:05:47 -0500] jtran: what's the appropriate way to write a helper method to be used in a template erb file?   such as if i need to define a method to be used in that erb file.
[2013-12-04 20:18:20 -0500] coderanger: jtran: What kind of method?
[2013-12-04 20:19:46 -0500] coderanger: miah: lol linux 1.0
[2013-12-04 20:24:03 -0500] jtran: coderanger:  any really.
[2013-12-04 20:24:12 -0500] jtran: is it possible to expose custom methods in the erb?
[2013-12-04 20:27:56 -0500] jtran: nm i figured it out
[2013-12-04 20:28:26 -0500] jtran: module Extensions::Templates
[2013-12-04 20:30:16 -0500] coderanger: jtran: I mean you can call any Ruby code you want from erb
[2013-12-04 20:30:29 -0500] jtran: right, i figured it out thx
[2013-12-04 20:38:37 -0500] cparedes: hey guys: running into an issue with berkshelf 2.0.10 - i'm trying to run 'berks install' with git cookbook dependencies
[2013-12-04 20:38:40 -0500] cparedes: which themselves have git dependencies
[2013-12-04 20:38:53 -0500] cparedes: and am getting a downstream dep error: "Cookbook 'hostname-cookbook' not found in any of the default locations"
[2013-12-04 20:38:58 -0500] jtimberman: cparedes: yeah
[2013-12-04 20:39:01 -0500] cparedes: (hostname-cookbook being an internal git only cookbook)
[2013-12-04 20:39:08 -0500] cparedes: known issue?
[2013-12-04 20:39:10 -0500] jtimberman: cparedes: that's a thing
[2013-12-04 20:39:19 -0500] jtimberman: cparedes: i believe fixed in berkshelf 3 (beta still)
[2013-12-04 20:39:25 -0500] cparedes: ahh, cool
[2013-12-04 20:39:27 -0500] jtimberman: because it can't resolve transitive dependencies like that.
[2013-12-04 20:39:39 -0500] jtimberman: you may be able to declare the dependency cookbooks w/ a git location
[2013-12-04 20:40:12 -0500] cparedes: yikes. was hoping to avoid all that
[2013-12-04 20:41:17 -0500] jtimberman: yeah.
[2013-12-04 20:41:20 -0500] jtimberman: :|
[2013-12-04 20:41:35 -0500] cparedes: is this for all deps or is it just git dependencies for now?
[2013-12-04 20:41:52 -0500] gswallow: @jtimberman how can I haz Chef sticker? :)
[2013-12-04 20:42:00 -0500] c_t: ohai
[2013-12-04 20:42:07 -0500] gswallow: plz
[2013-12-04 20:45:15 -0500] cparedes: "building universe..."
[2013-12-04 20:45:17 -0500] cparedes: "building pie"
[2013-12-04 20:45:21 -0500] cparedes: i already like berkshelf 3
[2013-12-04 20:45:31 -0500] cparedes: (it didn't say the last thing though)
[2013-12-04 20:45:43 -0500] jbz: mmmm pie
[2013-12-04 20:51:09 -0500] jtimberman: gswallow: email your address to joshua@opscode.com :)
[2013-12-04 20:57:39 -0500] rhys: jtimberman: could I ask why the reprepro opscode cookbook includes build-essential by default?
[2013-12-04 21:04:45 -0500] jtimberman: rhys: i don't remember, that was aded over 3 years ago :)
[2013-12-04 21:05:35 -0500] rhys: no problem. it just sorta saddened me that my company has a thing of using hte community cookbooks as references, and we basically strip/modify them and then maintain them inhouse
[2013-12-04 21:05:38 -0500] gswallow: jtimberman: <3
[2013-12-04 21:05:57 -0500] rhys: mostly because of things like that.
[2013-12-04 21:06:06 -0500] brimstone: so, http://community.opscode.com/cookbooks/mysql actually doesn't work on debian. should i report this or try to fix it?
[2013-12-04 21:06:42 -0500] jtimberman: brimstone: report an issue in the COOK project, mysql component, at tickets.opscode.com
[2013-12-04 21:06:51 -0500] brimstone: jtimberman: thanks
[2013-12-04 21:07:11 -0500] jtimberman: you can try to fix it too, see the CONTRiBUTING file in the repo
[2013-12-04 21:07:14 -0500] jtimberman: for information on that
[2013-12-04 21:07:19 -0500] jtimberman: (how to contribute your fix)
[2013-12-04 21:07:22 -0500] jtimberman: thank you :D
[2013-12-04 21:07:45 -0500] brimstone: ok cool
[2013-12-04 21:13:23 -0500] jchauncey: rhys: i think most people do that which really sucks =\
[2013-12-04 21:15:37 -0500] coderanger: rhys: Does it actually include it, or just depend on it?
[2013-12-04 21:15:46 -0500] rhys: includes it
[2013-12-04 21:16:42 -0500] rhys: jchauncey: before using chef I used puppet pretty extensively. same exact problem, if anything worse because the lack of metadata with highlevel dependency information.
[2013-12-04 21:16:44 -0500] coderanger: Ahh, it also installs dpkg-dev and a bunch of other stuff
[2013-12-04 21:16:53 -0500] coderanger: it sets the machine up as both a repo server and a build env :-/
[2013-12-04 21:18:04 -0500] coderanger: At a minimum those should be separate recipes probably
[2013-12-04 21:18:57 -0500] rhys: i think i've narrowed it down to a really basic problem. if you try to promote the "config mgmt X makes things really easy to do" you have to integrate your cookbooks in a pretty tight fashion. letting a person with a basic goal of 'I want server X' get that quickly is cool. But if you want something to be widely used, its focus has to be narrow and atomic.
[2013-12-04 21:20:52 -0500] Lolindir: Using windows chef-solo log level :debug  Chef::Log.debug("DEBUGGING") does not get displayed?  Ideas?
[2013-12-04 21:21:53 -0500] coderanger: Lolindir: The command like argument to set the log level is "chef-solo -l debug"
[2013-12-04 21:22:07 -0500] coderanger: rhys: Its also a problem of making reusable cookbooks is really hard
[2013-12-04 21:22:17 -0500] coderanger: rhys: This is what I've spent the past while working on :)
[2013-12-04 21:23:08 -0500] rhys: coderanger: it is very hard.
[2013-12-04 21:23:24 -0500] Lolindir: wow such a simple oversight, thanks
[2013-12-04 21:24:03 -0500] coderanger: Lolindir: The "log_level :debug" thing is for the client.rb config file
[2013-12-04 21:24:08 -0500] coderanger: You can set it in either place
[2013-12-04 21:24:41 -0500] Lolindir: ah
[2013-12-04 21:24:49 -0500] coderanger: rhys: Go sign up on launch.poise.io if you want me to email you when the poise docs are up ;-)
[2013-12-04 21:25:28 -0500] rhys: sure.
[2013-12-04 21:31:47 -0500] rhys: "you can always make a library bigger, but you very rarely can make it smaller"
[2013-12-04 21:32:11 -0500] rhys: says the wise colleague.
[2013-12-04 21:33:26 -0500] Lolindir: coderanger: Can Chef::Log.info("#{new_resource.driver_name} already installed - nothing to do.") still be used to provide debugging info to the console?  I do not see this displayed during the run, however it is displayed for other recipies
[2013-12-04 21:33:55 -0500] coderanger: Depends on the context, but yes you can log stuff
[2013-12-04 21:34:02 -0500] coderanger: Can you pastebin the code in question?
[2013-12-04 21:35:47 -0500] Lolindir: coderanger: http://pastebin.com/jdvw0x7x
[2013-12-04 21:36:21 -0500] coderanger: Looks good to me
[2013-12-04 21:37:09 -0500] fveillette: i have an issue with windows_zipfile
[2013-12-04 21:37:15 -0500] fveillette: it's not install the last gem version of rubyzip
[2013-12-04 21:37:21 -0500] fveillette: and i don't understand why
[2013-12-04 21:40:48 -0500] rhys: tis there a good suggestion for a cookbook to distribute key files that can open encrypted databags
[2013-12-04 21:40:59 -0500] coderanger: rhys: FUNNY YOU SHOULD ASK
[2013-12-04 21:41:00 -0500] coderanger: :-)
[2013-12-04 21:41:06 -0500] coderanger: Do you use AWS?
[2013-12-04 21:41:50 -0500] fveillette: why nobody answer my question...
[2013-12-04 21:41:54 -0500] jbz: rhys: Uh, that sort of completely defeats the point of encrypted databags
[2013-12-04 21:42:06 -0500] coderanger: rhys: (just released a thing to handle this)
[2013-12-04 21:42:21 -0500] rhys: we're looking to handle aws
[2013-12-04 21:42:24 -0500] jbz: coderanger: where does it get the key from?
[2013-12-04 21:42:24 -0500] rhys: ohhhh realllyyyyy
[2013-12-04 21:42:30 -0500] coderanger: rhys: https://github.com/balanced-cookbooks/citadel
[2013-12-04 21:43:11 -0500] rhys: jbz: not.. quite. at least once, an admin needs to 'prime' or 'arm' the server with the cryptographic material that lets it do its job
[2013-12-04 21:43:14 -0500] Lolindir: coderanger: http://pastebin.com/4FXh0hKG
[2013-12-04 21:43:33 -0500] coderanger: fveillette: Windows users can be hard to find, personally I know little of that part of Chef
[2013-12-04 21:43:44 -0500] Lolindir: this is what gets displayed, it seems to skip all Chef::Log
[2013-12-04 21:44:00 -0500] coderanger: Lolindir: Whats your log level set to?
[2013-12-04 21:44:05 -0500] jbz: rhys: Yes, but the main point of encrypted databags, as far as I can tell (this is all IMO) is to ensure that private data isn't accessible via the chef-server.  IF you put the encrypted databag secret into a cookbook or attribute, then if the chef server is compromised, the secret is also availabl.
[2013-12-04 21:44:34 -0500] coderanger: Yeah, to be clear, citadel is a replacement for encrypted data bags, not somethign you would use in addition to it in theory
[2013-12-04 21:44:35 -0500] Lolindir: command is: chef-solo -l debug -j chef.json -s solo.rb
[2013-12-04 21:44:53 -0500] jbz: rhys: I had always assumed (again, I may be very wrong) that the encrypted data bag mechanism exists solely to separate the required security tokens so that  they're *not all in Chef*.
[2013-12-04 21:45:18 -0500] coderanger: jbz: It (mostly) exists so that if hosted chef has a security issue, your passwords aren't leaked
[2013-12-04 21:45:29 -0500] jbz: right
[2013-12-04 21:45:58 -0500] jbz: so distributing the encrypted DB secret via chef is contraindicated unless the chef-client is pulling it directly from a non-chef source, and isn't saving it in any way.
[2013-12-04 21:46:00 -0500] coderanger: Lolindir: Scroll up, the log data would be out of order compared to what you expect probably
[2013-12-04 21:46:09 -0500] rhys: jbz: non chef source
[2013-12-04 21:46:24 -0500] coderanger: jbz: Yep, hence citadel using S3 as the magical hand-wavey TTP
[2013-12-04 21:46:39 -0500] jbz: coderanger: rog, got it.
[2013-12-04 21:52:53 -0500] Lolindir: coderanger: found it, thanks again
[2013-12-04 21:53:30 -0500] coderanger: Lolindir: Its a long story, but when you use resources like that in an LWRP they aren't actually running directly there, you arej ust queing them up in the main resource collection
[2013-12-04 21:56:31 -0500] fak3r: so I have pound installed, I need to install apache with ssl.
[2013-12-04 21:57:05 -0500] fak3r: cookbook says apache will use 8080 and 8443, but during chef-client it install apache and ssl, then tries to start when it only knows about port 443, and dies b/c pound is already there
[2013-12-04 21:57:39 -0500] fak3r: how can I tell it not to use 443
[2013-12-04 21:58:22 -0500] rhys: one thing i notice is not a thing like with hiera in puppet, is that databags are just free floating. where i would make 1 or 2 databags per role, and then have the cookbooks automatically look there
[2013-12-04 22:03:11 -0500] coderanger: fak3r: I think there are node attrs for that
[2013-12-04 22:03:29 -0500] coderanger: rhys: Not sure what you are asking
[2013-12-04 22:03:44 -0500] rhys: it just seems odd to me that databags are just free floating
[2013-12-04 22:04:25 -0500] coderanger: Indeed, thats somewhat their definition
[2013-12-04 22:04:40 -0500] coderanger: If you wanted something non-free-floating, you probably shouldn't be using databags :)
[2013-12-04 22:06:18 -0500] rhys: i'd prefer to put into my cookbook attributes a default of 'databag_name' and if thats set higher up (like set in the role), then each item is "cookbookname-stuff"
[2013-12-04 22:07:08 -0500] coderanger: It sounds like you are trying to describe your infra in JSON instead of Ruby code
[2013-12-04 22:07:12 -0500] coderanger: Don't do that :P
[2013-12-04 22:07:29 -0500] rhys: that is _exactly_ what i am trying to do
[2013-12-04 22:08:02 -0500] rhys: ruby code has to be processed. there is no processing for data. its just data. what you see is what you get.
[2013-12-04 22:08:07 -0500] coderanger: JSON lacks the expressive power to describe just about anything complex
[2013-12-04 22:08:33 -0500] coderanger: It turns out real infra is rarely simple enough to be viewed in a fully declarative fashion
[2013-12-04 22:08:53 -0500] coderanger: But if thats what you want, why not use Puppet or Salt?
[2013-12-04 22:09:22 -0500] gregkare: How is Puppet just data?
[2013-12-04 22:09:45 -0500] coderanger: You could write a lossless converter from manifest files to JSON pretty easily
[2013-12-04 22:09:45 -0500] rhys: JSON is my knobs. just like in a nuclear control room, just because the people running it may be able to write the code as well, eventually they get a big control panel with a bunch of knobs.
[2013-12-04 22:10:10 -0500] coderanger: rhys: Sure, but its way out at the top level of use
[2013-12-04 22:10:10 -0500] rhys: Puppet tries to do it as code too. I was constantly taking modules and adjusting them to consume their configuration from hiera
[2013-12-04 22:10:19 -0500] rhys: top level of use?
[2013-12-04 22:10:24 -0500] coderanger: Lower-level library cookbooks shouldn't know or care about data bags
[2013-12-04 22:10:34 -0500] coderanger: they just expose resources
[2013-12-04 22:10:42 -0500] coderanger: (And maybe recipes if the person was lazy)
[2013-12-04 22:12:34 -0500] rhys: lower level stuff right. theres 3 levels i've found useful
[2013-12-04 22:12:54 -0500] rhys: the LWRP and similar low level configuration wrappers. wraps up gpp, apt, those things.
[2013-12-04 22:14:06 -0500] rhys: i stick those with logical stuff, like with this. reprepro configures a debian repository. i'm building it in such a way that i give it 1 JSON file with some signing/name/description data, and then create a JSON file per repo that i'm building 'squeeze/lenny/wheezy' etc, and thats it. i'm done, it runs off and builds it for me
[2013-12-04 22:14:12 -0500] coderanger: Basically you shouldn't have "per-cookbook" data bags because data bags shouldn't correspond to cookbooks, they should correspond to applications or other actual things you manage
[2013-12-04 22:14:25 -0500] rhys: databags -> roles.
[2013-12-04 22:14:55 -0500] rhys: each cookbook consumes its items from the databag of the role that calling it
[2013-12-04 22:15:06 -0500] coderanger: Yeah, don't do that
[2013-12-04 22:15:14 -0500] coderanger: Only use cookbooks at the top level of the stack
[2013-12-04 22:15:28 -0500] coderanger: your "knobs" need to get passed down the layers abstraction from the top
[2013-12-04 22:16:57 -0500] rhys: why bother with that complexity? you're essentially saying that cookbooks (community wise anyway) need to be all simple attribute driven libraries, and then i need to write wrapper cookbooks that consume my knobs and run the other cookbooks
[2013-12-04 22:17:20 -0500] coderanger: Basically, yeah
[2013-12-04 22:17:31 -0500] coderanger: because it creates stable abstractions
[2013-12-04 22:17:42 -0500] coderanger: something currently sorely lacking in the ops world
[2013-12-04 22:17:43 -0500] rhys: but then why have roles?
[2013-12-04 22:18:10 -0500] rhys: i agree with you in pricinple, its a matter of which ones.
[2013-12-04 22:18:16 -0500] coderanger: I don't really use roles anymore
[2013-12-04 22:18:24 -0500] coderanger: :-)
[2013-12-04 22:18:36 -0500] coderanger: When I do they are just alises for a single recipe
[2013-12-04 22:19:14 -0500] rhys: hrrrm.
[2013-12-04 22:19:50 -0500] rhys: roles aren't versioned. cookbooks are.
[2013-12-04 22:20:10 -0500] coderanger: Indeed
[2013-12-04 22:20:24 -0500] geggam: there went 45 minutes debugging becuase i had the wrong databag name
[2013-12-04 22:22:10 -0500] rhys: coderanger: i've seen that same argument in my searching on how to do things, but curious what opscode is going to do going forward. you obviously can't drop roles.
[2013-12-04 22:22:35 -0500] coderanger: rhys: I am (fortunately?) no longer particularly bounded by Opscode's plans :-)
[2013-12-04 22:23:19 -0500] coderanger: But my long-term goal with chef is to basically just use chef-server as an artifact repo and version solver for cookbooks
[2013-12-04 22:23:27 -0500] coderanger: thats it, no roles, no data bags, no search
[2013-12-04 22:23:35 -0500] coderanger: and not really any node data
[2013-12-04 22:23:45 -0500] coderanger: (other than node run list)
[2013-12-04 22:23:56 -0500] geggam: chef is a little complex to be used as git
[2013-12-04 22:28:05 -0500] rhys: coderanger: and im dead against making 'infrastructure as code'. because us, like every other company i have ever been in, has multiple levels. and when our techops group wants to change a setting somewhere, i don't want them digging in code
[2013-12-04 22:28:24 -0500] rhys: engineering does the code. the other side, the people who know considerably less, they get the levers/knobs/etc
[2013-12-04 22:28:33 -0500] coderanger: rhys: Sorry, I'm doing my best to make that PoV obsoltete
[2013-12-04 22:28:38 -0500] coderanger: You're all programmers now, deal with it :)
[2013-12-04 22:29:13 -0500] rhys: coderanger: I'm _fine_ with that, the problem is that I have to live in the rest of reality, and trust me, they are _not_ programmers
[2013-12-04 22:29:32 -0500] rhys: jesus dude you should see the guy they sent to us to train on 'this automation stuff'
[2013-12-04 22:29:34 -0500] coderanger: Some people are definitely going to have to learn a lot on both sides of the devops fence
[2013-12-04 22:30:03 -0500] coderanger: And I don't doubt that the tech I build will be so hostile to some world views that many will dismiss it out of hand
[2013-12-04 22:30:17 -0500] coderanger: thats already the case with Chef itself :-)
[2013-12-04 22:30:35 -0500] geggam: meh.... automate everything and give them a pager for when it doesnt work.. with monit nagios chef you shouldnt ever get out of bed unless EC2 is really broken
[2013-12-04 22:30:41 -0500] jchauncey: wrapper cookbooks are your friend =)
[2013-12-04 22:30:49 -0500] jchauncey: give them the knobs nad levers and lock the rest down
[2013-12-04 22:30:59 -0500] jchauncey: geggam: exactly
[2013-12-04 22:31:13 -0500] jchauncey: your developers should own their stacks and be responsible for when the go down
[2013-12-04 22:31:28 -0500] jchauncey: they probalby know more about what is actually happening in most cases than the ops guys
[2013-12-04 22:31:46 -0500] geggam: most developers need to learn ops ... most ops need to learn dev
[2013-12-04 22:31:54 -0500] geggam: which is why my salary is fat :)
[2013-12-04 22:31:56 -0500] rhys: ugh.
[2013-12-04 22:32:31 -0500] jchauncey: exactly =) look at cookbooks written by more traditional core ops and those written by software engineers
[2013-12-04 22:33:12 -0500] coderanger: Yep, the problem with the former is every keeps rewriting the same cookbooks over and over
[2013-12-04 22:33:31 -0500] geggam: my problem is eveyrone wants to make it so complex...
[2013-12-04 22:33:44 -0500] geggam: i simplify and make them all modular
[2013-12-04 22:34:02 -0500] geggam: 1 cookbook doesnt need to run the world
[2013-12-04 22:34:06 -0500] geggam: yes its cool when it does
[2013-12-04 22:34:19 -0500] coderanger: geggam: Yep, biggest thing I need to ween people off is using LWRPs, something I advocated for entirely too long :-(
[2013-12-04 22:34:40 -0500] rhys: ?
[2013-12-04 22:34:41 -0500] geggam: we all change...
[2013-12-04 22:34:54 -0500] geggam: then we yell at people on the lawn
[2013-12-04 22:34:58 -0500] geggam: life is clear
[2013-12-04 22:35:05 -0500] geggam: ima start yellin now
[2013-12-04 22:39:56 -0500] rhys: well i'll be damned. cfengine did something right
[2013-12-04 22:40:04 -0500] rhys: coderanger: are you familiar with cfengine3 ?
[2013-12-04 22:40:21 -0500] ericReeves: Why should LWRP's be avoided?
[2013-12-04 22:41:09 -0500] coderanger: rhys: Mildly, I used 2 back in the day and tried to learn 3, but never used it for anything
[2013-12-04 22:41:17 -0500] coderanger: ericReeves: No subclassing
[2013-12-04 22:41:58 -0500] holoway: coderanger: you can subclass, it's just not easy :)
[2013-12-04 22:42:12 -0500] holoway: (would actually be kind of easy to patch subclassing in, if oyu really wanted to)
[2013-12-04 22:42:14 -0500] coderanger: holoway: No, kallistec showed it can't be done safely in the general case
[2013-12-04 22:42:30 -0500] coderanger: holoway: josephholsten and I tried to get it to work for a while
[2013-12-04 22:42:37 -0500] holoway: huh - good times
[2013-12-04 22:42:42 -0500] coderanger: holoway: Theres a patch in jira somewhere
[2013-12-04 22:42:43 -0500] coderanger: :)
[2013-12-04 22:42:48 -0500] holoway: that's a pretty esoteric reason to avoid LWRPs, though
[2013-12-04 22:43:04 -0500] josephholsten: lol
[2013-12-04 22:43:06 -0500] coderanger: holoway: Less than you might think if you are writing a reusable cookbook
[2013-12-04 22:43:06 -0500] holoway: rhys: cfengine 3 does many things right
[2013-12-04 22:43:12 -0500] rhys: coderanger: we have it uses for 1 or 2 things, and the language itself is atrotious as the only way to describe dependencies or flow or really anything is to flip a bunch of boolean variables. so one 'promise' will set 'package_postgresql_version_installed' and then another promise will be "if package_postgresql_version_installed"
[2013-12-04 22:43:18 -0500] coderanger: ericReeves: https://github.com/balanced-cookbooks/jenkins/blob/master/libraries/jenkins_config.rb isn't that much more complex than an LWRP
[2013-12-04 22:43:33 -0500] josephholsten: yes, especially b/c the usecase where subclassing didn't work was also small
[2013-12-04 22:43:44 -0500] geggam: cfengine still depends on system c libs ...upgrade the wrong thing and enjoy that mess
[2013-12-04 22:44:09 -0500] rhys: geggam: because ruby verisoning is so much better lol
[2013-12-04 22:44:25 -0500] ericReeves: coderanger: Ahh, nice.  That's not bad.
[2013-12-04 22:44:28 -0500] geggam: embedded versioning means i can do everything to my system
[2013-12-04 22:44:34 -0500] geggam: and still recover
[2013-12-04 22:45:17 -0500] geggam: a system upgrade wont make 5000 machines all manual problems to fix ;)
[2013-12-04 22:45:18 -0500] coderanger: geggam: You could make an omnibus build of cfengine
[2013-12-04 22:45:24 -0500] coderanger: geggam: I would wager someone has by now
[2013-12-04 22:45:29 -0500] EricL: Is there a way in chef to get all tags that chef stores that matches a certain pattern?  Like "search 'tags:web-*'"
[2013-12-04 22:45:29 -0500] geggam: you could... im not gonna
[2013-12-04 22:45:41 -0500] rhys: but the principle behind policy center is that its a factory that should stick a machine together with data <-> code and it runs it
[2013-12-04 22:46:07 -0500] coderanger: EricL: Does that not work as is?
[2013-12-04 22:46:07 -0500] geggam: cfengine syntax is a pita
[2013-12-04 22:46:13 -0500] rhys: ^^ yup
[2013-12-04 22:46:25 -0500] EricL: coderanger: That gives me back a list of nodes, not a list of tags.
[2013-12-04 22:46:37 -0500] coderanger: EricL: Oh sure, you just need to parse the nodes then
[2013-12-04 22:46:46 -0500] coderanger: EricL: Thats just how search works, tags aren't an object
[2013-12-04 22:47:44 -0500] coderanger: holoway: Though to be fair to LWRPs I'm trying to make sure the Poise stuffs can work in them if you really don't think you need subclassing (even though you are probably wrong)
[2013-12-04 22:49:09 -0500] josephholsten: the main thing I've got against lwrps is that you aren't defining some declarative set of assertions
[2013-12-04 22:49:30 -0500] josephholsten: you're writing a class. with state. and encapsulation. and methods.
[2013-12-04 22:49:42 -0500] EricL: coderanger: Ok, thanks.
[2013-12-04 22:50:45 -0500] coderanger: josephholsten: Its a little of both as long as you are careful how you compose the lower level resources
[2013-12-04 22:50:52 -0500] josephholsten: things like gemfiles and rakefiles and recipes make sense as an internal ruby dsl. but defining the internals of resources just doesn't.
[2013-12-04 22:50:57 -0500] rhys: coderanger: you want real ruby code
[2013-12-04 22:51:05 -0500] rhys: coderanger: thats what all the subclassing is for right ?
[2013-12-04 22:51:20 -0500] coderanger: rhys: Its all real Ruby code, you just never noticed
[2013-12-04 22:51:25 -0500] josephholsten: my point is that: whether you want it or not, it _is_ real ruby code
[2013-12-04 22:51:36 -0500] coderanger: holoway is just that sneaky
[2013-12-04 22:51:48 -0500] rhys: i know that, but theres a definite difference between config mgmt code and normal programming code
[2013-12-04 22:52:06 -0500] rhys: its supposed to be simplier. and the _last_ thing i want to do is deal with inheritance in my cookbooks
[2013-12-04 22:52:32 -0500] kisoku: hrm. what's involved in upgrading a chef server from omnibus releases ?
[2013-12-04 22:52:35 -0500] coderanger: I don't know why you think it should be simple by nature
[2013-12-04 22:52:35 -0500] josephholsten: that's odd, you want to hand-roll the different configs of all your mysql systems?
[2013-12-04 22:52:44 -0500] kisoku: on ubuntu
[2013-12-04 22:52:48 -0500] kisoku: dpkg 0i and you're done ?
[2013-12-04 22:53:03 -0500] coderanger: Infrastructure isn't inherently simple, I wouldn't expect anything that models it to be simple either
[2013-12-04 22:53:04 -0500] kisoku: or is there some upgrade procedure that needs to followed ?
[2013-12-04 22:53:18 -0500] coderanger: kisoku: I think currently its just a package install
[2013-12-04 22:53:21 -0500] rhys: coderanger: yes, yes it is. :\
[2013-12-04 22:53:30 -0500] josephholsten: for services like that, I prefer to have a prototype cookbook with sane defaults, then have descendants which slightly tweak as needed
[2013-12-04 22:54:22 -0500] coderanger: rhys: yes what is?
[2013-12-04 22:55:22 -0500] josephholsten: rhys: I spent a decade as a dev because I wanted services to be that simple. turns out that many popular tools are irreducibly complex
[2013-12-04 22:55:44 -0500] josephholsten: for example anything with master-master replication.
[2013-12-04 22:55:55 -0500] cannonball: In the chef-shell client, I can 'run_chef' and have it do a full run.  Is there a way to tell it to run a specific recipe, even though no role or node run_list has that recipe configured for said node?
[2013-12-04 22:56:04 -0500] rhys: josephholsten: amusing metaphor considering irreducible complexity is a debunked theory.
[2013-12-04 22:56:04 -0500] geggam: bleh... master master with offsets set right usually work
[2013-12-04 22:56:49 -0500] geggam: want simple get into openbsd... ansible is nice and simple
[2013-12-04 22:56:59 -0500] josephholsten: rhys: you're in the p=np camp? also, this could get me into a rat hole.
[2013-12-04 22:57:33 -0500] rhys: josephholsten: i was referring to biology, but sure
[2013-12-04 22:58:09 -0500] miah: coderanger: =)
[2013-12-04 22:58:14 -0500] josephholsten: geggam: I was just recommending ansible to someone afraid of chef last night at seattle.rb
[2013-12-04 22:58:31 -0500] cannonball: So I guess what I'm trying to do is "in chef-shell, append one recipe to the run_list".
[2013-12-04 22:58:39 -0500] josephholsten: rhys: oh, not _that_ irreducible complexity. I'm so sorry.
[2013-12-04 22:58:57 -0500] rhys: thus the funny. :D
[2013-12-04 22:59:01 -0500] geggam: right tool for the right job... i use chef for big systems ... ansible / puppet for anything under 1000 .. watching saltstack to see what happens when it matures
[2013-12-04 22:59:53 -0500] rhys: so how do i set attributes for one cookbook from another cookbook?
[2013-12-04 22:59:58 -0500] josephholsten: I meant that it's not possible to hide certain kinds of infrastructure behind a fascade that simplifies the interface at all
[2013-12-04 23:00:10 -0500] miah: attributes are loaded at compile time, so its not about in one cookbook vs another
[2013-12-04 23:00:20 -0500] josephholsten: rhys: setting them is easy, occasionally load order is hard
[2013-12-04 23:00:54 -0500] coderanger: josephholsten: Load order was fixed in chef 10
[2013-12-04 23:00:58 -0500] josephholsten: just drop them into an attributes file (if you can), or do a node.set['key']='value'
[2013-12-04 23:01:22 -0500] coderanger: rhys: https://github.com/balanced-cookbooks/balanced-citadel/blob/master/attributes/default.rb#L20
[2013-12-04 23:01:26 -0500] coderanger: Its that easy :-)
[2013-12-04 23:03:56 -0500] josephholsten: coderanger: kinda. I've had an issue with the java cookbook where it gets loaded before my cookbook, so I can override its attributes, but since it's already evaluated the java attrs, its lines like default['java']['url'] = "http://foo/java-#{node['java']['version']}.tgz" don't do what I want
[2013-12-04 23:04:14 -0500] fveillette: i have an issue with windows_zipfile
[2013-12-04 23:04:17 -0500] fveillette: it's not install the last gem version of rubyzip
[2013-12-04 23:04:19 -0500] fveillette: why nobody answer my question...
[2013-12-04 23:04:22 -0500] fveillette: and i don't understand why
[2013-12-04 23:04:32 -0500] josephholsten: fveillette: ?
[2013-12-04 23:04:55 -0500] coderanger: josephholsten: Protip, https://github.com/balanced-cookbooks/ci/blob/master/libraries/ci_server.rb#L24
[2013-12-04 23:05:19 -0500] rhys: coderanger: but without a recipe, how does balanced-citadel include the citadel repository?
[2013-12-04 23:05:32 -0500] coderanger: josephholsten: But yeah, its a problem with the bulk of existing cookbooks
[2013-12-04 23:05:55 -0500] coderanger: rhys: You just mark your cookbooks as depending on citadel (well for me I would depend on balanced-citadel)
[2013-12-04 23:06:26 -0500] coderanger: rhys: All cookbooks in the dep tree get loaded
[2013-12-04 23:06:45 -0500] rhys: so that depends automatically puts citadel::default into the run list?
[2013-12-04 23:06:57 -0500] coderanger: No, it has no recipes
[2013-12-04 23:07:11 -0500] coderanger: Most of my cookbooks are just library files
[2013-12-04 23:08:00 -0500] coderanger: balanced-app depends on balanced-citadel, so having recipe[balanced-app] will pull in all the dependent cookbooks
[2013-12-04 23:09:48 -0500] rhys: so a cookbook will go 'include balanced-app' and all the other stuff gets included too ?
[2013-12-04 23:09:58 -0500] rhys: in the proper order up the chain ?
[2013-12-04 23:10:30 -0500] coderanger: Yep, load order is a topological sort
[2013-12-04 23:10:45 -0500] jidar: I'm getting 'convert nil into String (TypeError)' error when trying to create a cookbook with knife, I've rerun the knife configure -i, with no luck. I've also read some of the docs that suggest putting things like, chef_repo_path "." should help but I haven't seen that help. My ruby -v returns 1.9.3 and I'm using the /opt/chef/embedded/ruby that comes with the rest of the stuff
[2013-12-04 23:11:23 -0500] rhys: coderanger: got it
[2013-12-04 23:11:29 -0500] coderanger: rhys: and its "depends" instead of "include"
[2013-12-04 23:11:34 -0500] coderanger: but other than that :-)
[2013-12-04 23:11:35 -0500] jidar: I also have the 3 files in my .chef directory, which is inside the /home/ec2-user/chef-repo/ directory I created as part of the setup
[2013-12-04 23:13:40 -0500] jidar: oh and knife node list works fine
[2013-12-04 23:13:51 -0500] coderanger: jidar: Please pastebin the full traceback
[2013-12-04 23:14:55 -0500] jidar: http://pastebin.com/HeFqj8En
[2013-12-04 23:22:15 -0500] geggam: ugh... my radio station just said listen to us everywhere...listed all kinds of apps... internet streaming... and said "you can listen to us even on old school radio"
[2013-12-04 23:22:19 -0500] geggam: get off my lawn
[2013-12-04 23:24:25 -0500] kevinburke: Hello
[2013-12-04 23:24:26 -0500] rhys: coderanger: ahhh. so include is not even needed. "When the match exists, the server will include the dependency as part of the set of cookbooks that are sent to the node when the chef-client runs."
[2013-12-04 23:24:46 -0500] coderanger: rhys: You do need the depends line in your cookbook metadata
[2013-12-04 23:25:03 -0500] coderanger: rhys: If you are talking about include_recipe, then no, you don't need that unless you want to run recipe code
[2013-12-04 23:25:13 -0500] kevinburke: Sometimes while provisioning, chef shows diffs of the template that's being executed. But not when I run it with Vagrant. (I've checked that my VM is using Chef 11). Any ideas why this is?
[2013-12-04 23:26:36 -0500] kevinburke: Does it have to do with stdout being a TTY?
[2013-12-04 23:28:06 -0500] rhys: coderanger: what i'm meaning is that i create a cookbook "package_server" and it needs to be basically a shim between my databags and another cookbook "reprepro", does the package_server cookbook have to have its default recipe "include_recipe reprepro"
[2013-12-04 23:28:30 -0500] rhys: coderanger: OR will the cookbook just work if it has a metadata dependency on cookbook reprepro
[2013-12-04 23:28:40 -0500] coderanger: Yes, because in that case you want to run recipe code from the dependent cookbook
[2013-12-04 23:29:10 -0500] coderanger: everything other than recipes is loaded automatically since it is presumed to not have side effects
[2013-12-04 23:29:21 -0500] coderanger: whereas recipes (usually) have side effects :)
[2013-12-04 23:30:27 -0500] coderanger: rhys: As my cookbooks are basically just all libraries and attribute files, its all handled for me
[2013-12-04 23:34:11 -0500] josephholsten: coderanger: oh right. I need to actually start using lazy
[2013-12-04 23:35:38 -0500] jidar: where in the tits does the location for uploading recipes get generated from? Does the chef server send out a url that gets evald somewhere else?

[2013-12-25 01:33:31 -0500] tutitututu: Hi. I would need some help.  While using aws cookbook in chef solo, I am trying to create an EBS volume and then tag it. I need the volume-id for tagging. The volume-id is in this attribute: node['aws']['ebs_volume']['my_ebs_volume']['volume_id'], but I cannot use it in aws_resource_tag LWRP, because resource_tag resource has this: attribute :resource_id,  :kind_of => [ String, Array ], :regex => /(i|snap|vol)-[a-zA-Z0-9]+/ and it'
[2013-12-25 01:34:17 -0500] tutitututu: Happy christmas by the way
[2013-12-25 01:34:18 -0500] savant: whats the volume id?
[2013-12-25 01:35:08 -0500] tutitututu: it's the id of the newly created volume in AWS EBS
[2013-12-25 01:35:19 -0500] savant: right
[2013-12-25 01:35:24 -0500] savant: but what is the volume id
[2013-12-25 01:35:28 -0500] carmstrong: why does it not match the regex?
[2013-12-25 01:35:30 -0500] savant: does it not pass the regex?
[2013-12-25 01:35:31 -0500] savant: yeah
[2013-12-25 01:36:10 -0500] tutitututu: yes, it does not pass it. I think the regexp is evaluated at compile time, and at compile time, the volume_id is not available yet
[2013-12-25 01:36:24 -0500] savant: mmm makes sense
[2013-12-25 01:36:42 -0500] savant: why not pass in the volume id?
[2013-12-25 01:36:51 -0500] savant: i guess maybe idk what you're doing.
[2013-12-25 01:37:02 -0500] tutitututu: because I don't know it before it's created
[2013-12-25 01:37:30 -0500] tutitututu: I am calling two LWRPs: the first for created an EBS volume, the second to tag it
[2013-12-25 01:39:06 -0500] savant: so you are calling aws_ebs_volume
[2013-12-25 01:39:33 -0500] savant: and then aws_resource_tag
[2013-12-25 01:39:35 -0500] savant: ?
[2013-12-25 01:39:43 -0500] tutitututu: yes
[2013-12-25 01:39:56 -0500] tutitututu: ebs_volume does this:
[2013-12-25 01:40:21 -0500] tutitututu: node.set['aws']['ebs_volume'][new_resource.name]['volume_id'] = attached_volume[:aws_id]         node.save unless Chef::Config[:solo]
[2013-12-25 01:40:26 -0500] savant: doesnt setting the description on aws_ebs_volume set the name of the volume?
[2013-12-25 01:40:26 -0500] savant: or do you need a different tag?
[2013-12-25 01:40:33 -0500] tutitututu: I've checked and node['aws']['ebs_volume'][new_resource.name]['volume_id'] is available at runtime
[2013-12-25 01:40:33 -0500] savant: im not sure how i would structure this otherwise, unfortunately :(
[2013-12-25 01:41:08 -0500] tutitututu: I need to set some additional tags after the volume is created.
[2013-12-25 01:41:13 -0500] savant: oh
[2013-12-25 01:41:26 -0500] savant: can you use a ruby_block
[2013-12-25 01:41:32 -0500] savant: and just query using fog?
[2013-12-25 01:41:37 -0500] tutitututu: I am thinking to just use the AWS api to tag the volume, without the AWS LWRP
[2013-12-25 01:41:51 -0500] tutitututu: yes, that's what I was thinking to do.
[2013-12-25 01:42:12 -0500] tutitututu: But was hoping that there is a way to reuse some attributes from the previous LWRP
[2013-12-25 01:42:18 -0500] savant: mmm idk.
[2013-12-25 07:35:05 -0500] coderanger: There we go!
[2013-12-25 10:06:06 -0500] elad661: Hi, quick question (cause I couldn't find the answer to it anywhere else): is there a way to limit a certain user to a specific environment in opensource chef-server?
[2013-12-25 10:07:21 -0500] elad661: ideally I'd want to create an environment for each department and not let people from other departments touch stuff that don't belong to them
[2013-12-25 10:13:20 -0500] ranjib: elad661, u cant do that with opensource chef server
[2013-12-25 10:14:01 -0500] ranjib: it has binary authorization. admin (who can write stuff), non-admin (can read everything, but writes only about himself)
[2013-12-25 10:14:14 -0500] ranjib: generally users are admins
[2013-12-25 12:24:53 -0500] isbaran: hello, i've simple function that returns attributes of node, i can use it in recipes like "directory attr('x')" but when used in bash script (#{attr('x')}), instead of the attribute, i see 'x' only
[2013-12-25 12:27:43 -0500] isbaran: i got this from 'libraries' examples, here is the exact lines. http://pastebin.com/s4hn92YE
[2013-12-25 16:40:29 -0500] masterkorp: hello chefs
[2013-12-25 16:41:11 -0500] masterkorp: i am trying to converge a cookbook
[2013-12-25 16:41:17 -0500] masterkorp: with kitchen test
[2013-12-25 16:41:32 -0500] masterkorp: but kitchen can't seem to be able to ssh to the machines
[2013-12-25 16:41:34 -0500] masterkorp: http://pastebin.com/RsSaKVpi
[2013-12-25 16:41:42 -0500] masterkorp: kitchen login also fails
[2013-12-25 16:41:50 -0500] masterkorp: vagrants it self works fine
[2013-12-25 16:42:40 -0500] masterkorp: ssh vagrant@127.0.0.1 -p 2222
[2013-12-25 16:42:42 -0500] masterkorp: vagrant@127.0.0.1ssh: connect to host 127.0.0.1 port 2222: Connection refused
[2013-12-25 16:42:49 -0500] masterkorp: i get connection refused
[2013-12-25 16:43:13 -0500] masterkorp: even if I add the ssh key
[2013-12-25 17:41:05 -0500] coderanger: masterkorp: All that logic should be wrapped up inside kitchen-vagrant, it spawns the machines for you
[2013-12-25 18:29:49 -0500] masterkorp: Raboo: yeah
[2013-12-25 18:29:53 -0500] masterkorp: coderanger: oops
[2013-12-25 18:30:01 -0500] masterkorp: i solved the problem
[2013-12-25 18:30:13 -0500] masterkorp: i had to uninstall and reinstall all the vagrant plugins
[2013-12-25 21:21:12 -0500] the_lord: hello, I'm using knife-azure, the knife server create works ok, but in the bootstrap phase, it stalls
[2013-12-25 21:21:46 -0500] the_lord: it does some of the bootstrap though, because I can have access to the node in chef, but I don't know where it fails because I have no output

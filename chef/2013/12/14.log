[2013-12-14 00:00:32 -0500] werdnativ: coderanger: Yeah I saw that, I'll check it out. I'm sorta familiar with the approach of "application cookbooks" but still piecing it all together.
[2013-12-14 00:01:05 -0500] werdnativ: Is https://github.com/chef-workflow/chef-workflow worth looking at, or just another layer of complexity?
[2013-12-14 00:03:36 -0500] coderanger: Seems like overkill to me
[2013-12-14 00:03:53 -0500] coderanger: knife-essentials, berkshelf, vagrant, and test-kitchen is basically all I use
[2013-12-14 00:04:03 -0500] coderanger: and a metric ass-load of git :)
[2013-12-14 00:22:37 -0500] res0nat0r: Random question, but is there any tool out there that can diagram a chef workflow for me? I pass it cookbook::default, and that recipe has 10 include_recipe "other_cookbook::default", which has  'include_recipe another_cookbook::default' etc...
[2013-12-14 00:23:17 -0500] res0nat0r: And it will just show me a call tree of what is calling what so I can get an overview of the workflow for a recipe that has includes everywhere
[2013-12-14 00:25:06 -0500] alexbst: res0nat0r - I'd look at berkshelf.. but it is hardly a diagram engine
[2013-12-14 00:25:16 -0500] alexbst: it's more a dependency resolution system
[2013-12-14 00:25:34 -0500] res0nat0r: humm
[2013-12-14 00:26:20 -0500] res0nat0r: If it had some option just to display the dependency tree that would be perfect. I'm just inheriting a big chef codebase from a customer and I'm trying to get an overview of how complex their setup is since I just have an entry point and see stuff being called all over the place
[2013-12-14 00:28:59 -0500] coderanger: res0nat0r: I know I've seen something that spit out graphviz plots
[2013-12-14 00:29:26 -0500] res0nat0r: that would be awesome
[2013-12-14 00:30:17 -0500] coderanger: Just not sure from what >_<
[2013-12-14 00:30:26 -0500] coderanger: There is knife-dot, but that doesn't do cookbooks
[2013-12-14 00:30:56 -0500] res0nat0r: hummm
[2013-12-14 00:31:18 -0500] res0nat0r: http://miketheman.github.io/knife-role-spaghetti/
[2013-12-14 00:49:47 -0500] coderanger: res0nat0r: That looks like it :)
[2013-12-14 00:50:10 -0500] res0nat0r: sweet :)
[2013-12-14 00:50:32 -0500] res0nat0r: I actually have it installed and they are using roles, but i think it is giving me a decent overview of whats what so far, so that helps...
[2013-12-14 00:51:06 -0500] res0nat0r: Or I just installed it and have a graph already,..
[2013-12-14 01:07:28 -0500] Sauraus: Anyone have an idea what would these http://pastebin.com/3iU0mkzX test to fail for a server?
[2013-12-14 01:10:32 -0500] coderanger: Sauraus: Did all search-related endpoints fail?
[2013-12-14 01:10:38 -0500] coderanger: If so, might be that Solr is down
[2013-12-14 01:10:44 -0500] Sauraus: all services are up
[2013-12-14 01:11:25 -0500] Sauraus: clients passed just fine
[2013-12-14 01:11:31 -0500] Sauraus: environments are all failing
[2013-12-14 01:11:38 -0500] Sauraus: roles passed just fine
[2013-12-14 01:12:21 -0500] coderanger: None of those talk to Solr
[2013-12-14 01:12:24 -0500] coderanger: Only search does
[2013-12-14 01:13:28 -0500] Sauraus: weird...
[2013-12-14 01:13:40 -0500] Sauraus: run: chef-solr: (pid 8676) 20341s; run: log: (pid 966) 264082s
[2013-12-14 01:14:46 -0500] Sauraus: chef-server-ctl show-config, returns an empty "chef-solr": {}
[2013-12-14 01:15:26 -0500] Sauraus: I've also run into issue with rabbitmq
[2013-12-14 01:18:03 -0500] Sauraus: I keep seeing these in the rabbitmq log: =ERROR REPORT==== 6-Dec-2013::22:15:59 === exception on TCP connection <0.31766.1> from 127.0.0.1:41492 {channel0_error,starting,                 {amqp_error,access_refused,                             "AMQPLAIN login refused: user 'chef' - invalid credentials",                             'connection.start_ok'}}
[2013-12-14 01:18:33 -0500] Sauraus: It looks like the password is constantly going out of sync, it's set and then a few hours later we see the errors again
[2013-12-14 01:19:26 -0500] Sauraus: The issue looks a lot like this one: https://community.rackspace.com/products/f/45/t/1500
[2013-12-14 01:21:36 -0500] Sauraus: wget http://127.0.0.1:8983/solr on the chef server returns a 200
[2013-12-14 01:28:51 -0500] Sauraus: anyone? :)
[2013-12-14 01:29:54 -0500] Sauraus: And all the searches from the webGUI return NIL as well
[2013-12-14 02:27:23 -0500] queuetip: so i run something like: knife bootstrap -r 'role[lampstack]' -i identify.pem -x username --sudo ipaddress   .... but my question is, how do i run that against multiple boxes at the same time? seems kind of insane to have to bootstrap clients one at a time
[2013-12-14 03:43:55 -0500] patmaddox: I'm confused about run ordering...I've got a package "build-essential" resource with action :install, followed by a chef_gem with action :upgrade, but chef-client fails because it can't build the gem because make isn't installed
[2013-12-14 03:44:15 -0500] patmaddox: but I would have expected it to install build-essential first because I specified that first in the recipe
[2013-12-14 03:45:53 -0500] patmaddox: oh
[2013-12-14 03:46:11 -0500] patmaddox: chef_gem resource does the following: Runs its actions immediately, before convergence, allowing a gem to be used in a recipe immediately after it is installed
[2013-12-14 03:50:04 -0500] patmaddox: well what I want to do may be a little bit weird. vagrant comes with chef-client 10.x installed and I want to upgrade it to 11.x . Is there a way to tell chef-client to restart after I upgrade the gem to 11.x ?
[2013-12-14 06:46:05 -0500] Cope: coderanger: around?
[2013-12-14 06:46:15 -0500] coderanger: yahr, whats up
[2013-12-14 06:46:34 -0500] Cope: what are my options if I want to build an 'internal' community site
[2013-12-14 06:46:44 -0500] coderanger: Whats your goal
[2013-12-14 06:47:05 -0500] Cope: sharing of private cookbooks across a large organization
[2013-12-14 06:47:16 -0500] coderanger: are they using berkshelf already?
[2013-12-14 06:47:29 -0500] coderanger: Check out berkshelf-api
[2013-12-14 06:47:54 -0500] coderanger: Use either the github provider, or make a new OPC org or chef server and use that as the artifact repo
[2013-12-14 06:48:21 -0500] Cope: aha that looks lke just what i want
[2013-12-14 06:48:39 -0500] coderanger: Downside is that you need to use berkshelf 3
[2013-12-14 06:48:44 -0500] coderanger: which is currently in alpha I think
[2013-12-14 06:49:01 -0500] coderanger: but it seems to work well for me when I tried it briefly last week
[2013-12-14 06:49:07 -0500] Cope: s'ok we don't need this to be being used until new year, by which time i expect it'll be released
[2013-12-14 06:49:13 -0500] coderanger: Ahh yep
[2013-12-14 06:49:16 -0500] coderanger: Thats the way forward :)
[2013-12-14 06:49:47 -0500] coderanger: I would also not be surprised if someone ::cough::resetexistence::cough:: implements an artifactory/nexus plugin too
[2013-12-14 06:50:04 -0500] coderanger: which would be a little more formal than using a chef org as your distribution system
[2013-12-14 06:50:13 -0500] coderanger: same effect in the end though
[2013-12-14 06:52:08 -0500] Cope: i do want a web app too, which allows search of cookbooks, docs, ratings etc
[2013-12-14 06:52:21 -0500] Cope: i wondered if there's anything oss out there that does that
[2013-12-14 06:52:31 -0500] coderanger: Nope, I plan to write one though
[2013-12-14 06:52:35 -0500] Cope: i mean - we can write one.. right
[2013-12-14 06:52:50 -0500] coderanger: and Opscode said the new replacement for the community site will be FOSS
[2013-12-14 06:53:01 -0500] coderanger: I just want something that speaks to Github directly though
[2013-12-14 06:53:04 -0500] Cope: Opscode? Who are they? :troll:
[2013-12-14 06:53:28 -0500] coderanger: Until they change the name on github and a million other places, I'm using the Real Name
[2013-12-14 06:53:55 -0500] coderanger: http://getchef.com/online-master-agreement/
[2013-12-14 06:54:04 -0500] coderanger: I mean even their own contracts still state Opscide Inc
[2013-12-14 06:56:02 -0500] Cope: I don't know if I'd be able to open source a 'community' website if I built it... but I could contribute to one someone else makes
[2013-12-14 06:56:32 -0500] ranjib: seth vargo has one
[2013-12-14 06:56:36 -0500] Cope: so if you're thinking of making one any time soon, let me know
[2013-12-14 06:56:40 -0500] Cope: ranjib: orly?
[2013-12-14 06:56:42 -0500] ranjib: or i think its the official one..
[2013-12-14 06:56:56 -0500] ranjib: yeah.. they were showing it chef summit
[2013-12-14 06:57:16 -0500] ranjib: its in rails
[2013-12-14 06:58:04 -0500] ranjib: some one was talking about supporting metrics in metadata ...
[2013-12-14 06:58:11 -0500] ranjib: i think its name is supermarket
[2013-12-14 06:58:37 -0500] ranjib: https://github.com/opscode/supermarket
[2013-12-14 06:58:45 -0500] Cope: http://lists.opscode.com/sympa/arc/chef/2013-11/msg00201.html
[2013-12-14 07:04:42 -0500] coderanger: ranjib: It has nothing related to cookbooks so far
[2013-12-14 07:05:02 -0500] ranjib: really ? :-D
[2013-12-14 07:05:09 -0500] Cope: looks to be all about cla stuffs
[2013-12-14 07:05:12 -0500] coderanger: Yeah, Seth did CLA signing
[2013-12-14 07:05:22 -0500] coderanger: and then the rest is "the communities problem"
[2013-12-14 07:05:41 -0500] coderanger: and if I have to do all the work anyway, I'll just put it under my own brand
[2013-12-14 07:05:54 -0500] ranjib: :-/
[2013-12-14 07:06:11 -0500] ranjib: but if you are consultant u cant even do that :-D
[2013-12-14 07:06:22 -0500] coderanger: I'm not :)
[2013-12-14 07:06:38 -0500] ranjib: anyway.. i thought its gonna power the community site, hence.
[2013-12-14 07:06:51 -0500] ranjib: yeah but Cope , is a consultant :-D
[2013-12-14 07:06:57 -0500] ranjib: i was. now no more.
[2013-12-14 07:08:16 -0500] Cope: I seem to have rather annoyingly found myself working for an org that doesn't have a mature understanding abotu software and oss yet
[2013-12-14 08:38:37 -0500] michaelballantyn: Hey all. Should I expect repeated runs of chef to recreate templated files when nothing has changed?
[2013-12-14 08:39:23 -0500] michaelballantyn: Using littlechef / chef solo and the apache cookbook, for example, I get a log line like "INFO: template[/etc/apache2/ports.conf] updated content" every time.
[2013-12-14 08:44:18 -0500] ranjib: no. thats not right
[2013-12-14 08:44:30 -0500] ranjib: it should show the diff.. whats getting changed
[2013-12-14 08:44:50 -0500] ranjib: run it manually, chef sud use the doc formatter, which shows diff
[2013-12-14 08:45:14 -0500] michaelballantyn: Does it make a difference if I'm still on chef 10?
[2013-12-14 08:45:18 -0500] ranjib: michaelballantyn, the template has any time relates stuff?
[2013-12-14 08:45:29 -0500] ranjib: yeah . a lot :-)
[2013-12-14 08:46:32 -0500] michaelballantyn: No time related stuff.
[2013-12-14 08:46:59 -0500] michaelballantyn: So in chef 10 it might not diff?
[2013-12-14 08:48:40 -0500] ogzy: i created a cookbook when i try to add a sh script to the files directory i got error saying Nilclass and wron close function here is the default.rb, the file is under files/default/keystone http://dpaste.com/1504732/
[2013-12-14 08:48:41 -0500] ranjib: im not sure
[2013-12-14 08:48:48 -0500] ranjib: check chef-client --help
[2013-12-14 08:48:56 -0500] ranjib: does it have --force-logger ?
[2013-12-14 08:53:43 -0500] michaelballantyn: chef 11 yields the same behavior
[2013-12-14 08:57:31 -0500] michaelballantyn: manual run looks helpful - seeing the diff output. Thanks!
[2013-12-14 08:59:27 -0500] michaelballantyn: And...apache2::default removes Listen 443, apache2::mod_ssl adds it.
[2013-12-14 09:59:47 -0500] ogzy: i get ERROR: undefined method `close!' for nil:NilClass error at the chef-server web page when i try to click on the custom cookbook i created, it gives this error only if ia put a sh script under files directory, any idea?
[2013-12-14 10:52:35 -0500] jpoole: *yawn*
[2013-12-14 15:45:18 -0500] T5u: gaa does anyone know what this means? but service[elasticsearch] cannot be found in the resource collection
[2013-12-14 17:28:48 -0500] bluethundr: hey chefs.. building a new chef server in AWS and configuring the security groups. What ports will I need to leave open on the chef server?
[2013-12-14 17:30:35 -0500] mtm: 443 should be all you need.
[2013-12-14 17:30:56 -0500] bluethundr: mtm thank you
[2013-12-14 18:21:46 -0500] UnnamedUser: hello
[2013-12-14 18:25:11 -0500] UnnamedUser: i get error 'the following cookbooks are required by the client but don't exist on the server" "mysql" '. knife cookboot list said that server has mysql coobook. also, i don't understand why chef client search mysql cookbook. there is nothing in metadata
[2013-12-14 18:25:32 -0500] UnnamedUser: pokbpoks upload by berks
[2013-12-14 18:25:44 -0500] UnnamedUser: *cookbooks
[2013-12-14 18:28:20 -0500] UnnamedUser: if i set mysql cookbook in runlist , server again say that he haven't mysql cookbook
[2013-12-14 18:30:10 -0500] UnnamedUser: so question is wtf?
[2013-12-14 18:31:34 -0500] UnnamedUser: problem cookbok is role cookbook. and if i set runlist to all include_recipe, everything is ok and chf don't search mysql
[2013-12-14 18:36:38 -0500] UnnamedUser: any idea?
[2013-12-14 18:50:53 -0500] mtm: have you got a specific version of mysql set somewhere?
[2013-12-14 18:52:22 -0500] UnnamedUser: yeah, in project cookbook, but now i try only base role cookbook with no mysql in any includes. and only mysql cookbook in runlist also get error
[2013-12-14 19:02:38 -0500] mtm: So you set  run_list = "recipe[mysql::whatever]" and it still complains?
[2013-12-14 19:06:05 -0500] mtm: anyway...
[2013-12-14 19:07:46 -0500] mtm: i've put a gem up that provides knife shortcut commands: http://rubygems.org/gems/kknife
[2013-12-14 19:08:02 -0500] mtm: so k n e instead of knife node edit etc
[2013-12-14 19:08:56 -0500] mtm: It provides a k binary, then reduces all sub commands down to the shortest unambiguous command, or any substring in between.
[2013-12-14 19:09:25 -0500] mtm: it saves me a lot of typing, at least.
[2013-12-14 19:16:16 -0500] dark_dr4g0n: mtm  So you set run_list = "recipe[mysql::whatever]" and it still complains?
[2013-12-14 19:17:04 -0500] dark_dr4g0n: yes. recipe[mysql], recipe[mysql::client], recipe[mysql::server] and all - mysql cookbook doesn't exist
[2013-12-14 19:17:27 -0500] bluethundr: hey all chefs.. I just setup a new chef server node under ubuntu 12.04..  chef-server-ctl reconfigure seemed to go ok, but chef-server-ctl test did not
[2013-12-14 19:17:32 -0500] dark_dr4g0n: i'm relogin from UnnamedUser
[2013-12-14 19:17:45 -0500] bluethundr: could someone please have a look at this paste and offer an opinion?
[2013-12-14 19:18:08 -0500] bluethundr: http://pastebin.com/A88pQEX6
[2013-12-14 19:32:42 -0500] bluethundr: also I am getting a '502 bad gateway' error when I surf to the web interface of my new chef server
[2013-12-14 19:33:36 -0500] dark_dr4g0n: <bluethundr> , run again sudo chef-server-ctl reconfigure
[2013-12-14 19:37:56 -0500] dark_dr4g0n: hmmm. somehow my role base cookbook depends in old version mysql cookbook..

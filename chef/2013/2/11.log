[2013-02-11 00:23:25 -0500] sudonim: Anyone know how to install the Hstore extension on Postgres through chef?
[2013-02-11 00:36:34 -0500] jtnz: Is anyone around who can answer a question about chef_handler?
[2013-02-11 00:37:16 -0500] juliancdunn: jtnz: fire
[2013-02-11 00:38:39 -0500] jtnz: juliancdunn, Thanks. On this page: https://github.com/opscode-cookbooks/chef_handler it has the same example twice with a subtle difference, to make it work during compilation phase. Just wondering if I do the latter, do I need to do have it twice?
[2013-02-11 00:39:56 -0500] juliancdunn: I don't think so, but it would be easy to test
[2013-02-11 00:42:05 -0500] jtnz: juliancdunn, very true ;)
[2013-02-11 00:58:52 -0500] halcyonCorsair: is there a way I can easily query chef about what packages are installed on all my nodes?
[2013-02-11 01:01:10 -0500] allaire: Is it normal practice to have a site-cookbooks directory with a cookbook named something like "main", where you create your users, use other cookbooks LWRP, etc. ?
[2013-02-11 01:10:22 -0500] allaire: anyone? :)
[2013-02-11 01:10:28 -0500] juliancdunn: halcyonCorsair: not right now, no... people have used mcollective for stuff like that
[2013-02-11 01:11:05 -0500] juliancdunn: allaire: I don't recommend doing that, rather, making more cookbooks with smaller recipes in them
[2013-02-11 01:16:37 -0500] allaire: juliancdunn: what if I have a cookbook (ruby-build), and somewhere, I must use one of their LWRP to install the ruby version I want
[2013-02-11 01:16:45 -0500] allaire: where should I place this single command?
[2013-02-11 01:17:07 -0500] allaire: juliancdunn: it's literally one line
[2013-02-11 01:17:51 -0500] halcyonCorsair: this might be what I want: https://github.com/finnlabs/ohai-system_packages
[2013-02-11 01:17:58 -0500] juliancdunn: allaire: maybe a "system" cookbook with a one-line recipe?
[2013-02-11 01:18:28 -0500] juliancdunn: allaire: it also depends whether you're using said cookbook to support a (bespoke) application that might have other requirements
[2013-02-11 01:19:00 -0500] juliancdunn: if that were the case, I would use the library+application cookbook model - http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-02-11 01:20:46 -0500] juliancdunn: halcyonCorsair: that's a possibility but it only registers the package data within the node object, doesn't necessarily give you an easy way to query across your entire installation
[2013-02-11 01:28:52 -0500] halcyonCorsair: juliancdunn: i should be able to say: knife search node "system_packages_installed:apache2" right?
[2013-02-11 01:48:09 -0500] juliancdunn: halcyonCorsair: yes
[2013-02-11 02:04:52 -0500] allaire: juliancdunn: sorry, was AFK, thx for that link
[2013-02-11 02:54:55 -0500] miah: herp the derp
[2013-02-11 05:29:56 -0500] jhulten: Anyone else had problems with omnibus and using the chef_gem resource? It looks like the equivilent of ruby-devel is missing.
[2013-02-11 05:40:21 -0500] aruntomar: jhulten: what sort of problem. can you be a little more specific
[2013-02-11 05:40:44 -0500] jhulten: making fog. nokogiri to be specific.
[2013-02-11 05:41:13 -0500] jhulten: /opt/chef/embedded/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
[2013-02-11 05:41:15 -0500] jhulten: You have to install development tools first.
[2013-02-11 05:52:50 -0500] jhulten: Never mind. Figgured it out.
[2013-02-11 05:54:46 -0500] manimal: hey is there any "standard practices" for deployments using chef and whatevr hypervisors?  like how to assign ip addresses or hostnames, how to setup os installs with kickstarts/configs or use images, etc etc etc...i know how to do all that stuff im just wondering if theres a "best way" or preferred methodology
[2013-02-11 05:55:03 -0500] manimal: to linking it all togther
[2013-02-11 05:55:56 -0500] manimal: try tocontain as much within chef or chef is just one part in a series of calls and scripts?
[2013-02-11 06:06:20 -0500] jhulten: manimal: There is a chef provider for Razor which handles some of that 'first mile' stuff'
[2013-02-11 06:19:28 -0500] manimal: hmm thank you i'll look around.  i think i can do almost everything from ssh with xen, chef, and knife xapi but im not trying to reinvent the wheel you know? i always say theres gotta be something someone wrote somewhere i cant be the first doing this
[2013-02-11 06:37:58 -0500] Aparna: Can i execute SQL scripts/commands  using chef-solo?
[2013-02-11 06:38:12 -0500] Aparna: do we have any thing similar to ruby block or powershell block for SQL
[2013-02-11 06:39:42 -0500] Aparna: Any help on SQL and chef?
[2013-02-11 06:42:03 -0500] c_t: what are you trying to do exactly?
[2013-02-11 06:45:08 -0500] BryanWB__: ohai chefs!
[2013-02-11 06:45:31 -0500] Aparna: Can i execute SQL scripts/commands  using chef-solo?
[2013-02-11 06:45:34 -0500] c_t: ohai
[2013-02-11 06:45:39 -0500] Aparna: do we have any thing similar to ruby block or powershell block for SQL
[2013-02-11 06:45:54 -0500] c_t: Aparna: not directly that I'm aware of, although someone may correct me
[2013-02-11 06:46:04 -0500] c_t: Take a look at this though: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/server.rb#L195
[2013-02-11 06:46:18 -0500] c_t: that's how the mysql cookbook adds the privileges
[2013-02-11 06:46:20 -0500] BryanWB__: Aparna: u can
[2013-02-11 06:46:33 -0500] BryanWB__: c lwrps in database cookbook
[2013-02-11 06:46:41 -0500] c_t: ... but if there's an even easier way, that's fabulous
[2013-02-11 06:46:48 -0500] BryanWB__: probably in the docs.opscode.com somewhere
[2013-02-11 09:31:56 -0500] shay-: hi, can i use a global ruby variable in differen recipes? or is there another way?
[2013-02-11 09:47:50 -0500] zts: shay-: if it was a global variable, I'd imagine it would work - but that sounds like a terrible idea.  Consider setting attributes (for data that should persist between runs), or node.run_state (for data that's only relevant to this run)
[2013-02-11 09:52:23 -0500] shay-: the idea is i need information which is defined in a data bag, and if not calculated
[2013-02-11 09:52:54 -0500] shay-: but i dont want to execute the same code in every recipe
[2013-02-11 09:53:13 -0500] shay-: and its not a variable which is different per node
[2013-02-11 09:54:17 -0500] zts: if you're concerned about code duplication, you might be able to put the code into a library and use that from each (relevant) recipe
[2013-02-11 09:54:41 -0500] shay-: is there a documentation for that?
[2013-02-11 09:54:59 -0500] shay-: ok i got it
[2013-02-11 09:55:05 -0500] shay-: thank you i will try this
[2013-02-11 09:55:12 -0500] zts: no problem
[2013-02-11 09:57:24 -0500] shay-: another question, is there anywhere a example how i can check if the data bag x and the data bag item y exists?
[2013-02-11 10:02:40 -0500] zts: that is a good question - I think you might need use ruby exception handling (begin/rescue/end) to catch failure from missing items
[2013-02-11 10:02:55 -0500] zts: but I'm just heading into a meeting, so I can't get an example for you now
[2013-02-11 10:02:58 -0500] zts: sorry!
[2013-02-11 10:06:56 -0500] shay-: no problem i will get it working thanky
[2013-02-11 10:21:10 -0500] shay-: how can i access the node object in the library?
[2013-02-11 11:26:21 -0500] shay-: hi, i want to use libraries like described here: http://wiki.opscode.com/display/chef/Libraries, but how can i access data bags and the node object in this library?
[2013-02-11 11:30:23 -0500] fooJulb_: If your class extends Chef::Recipe, the node object should be available using @node
[2013-02-11 11:32:08 -0500] shay-: doesn't work: FATAL: NoMethodError: undefined method `fqdn' for nil:NilClass
[2013-02-11 11:42:02 -0500] a_a_g: in the server api, a POST to /data/DATA_BAG_NAME is documented to return a "409 conflict if the user already exists"
[2013-02-11 11:42:08 -0500] a_a_g: what user is this?
[2013-02-11 11:42:26 -0500] a_a_g: i'm looking at http://wiki.opscode.com/display/chef/Server+API#ServerAPI-DataBags
[2013-02-11 11:48:33 -0500] shay-: hi, i want to use libraries like described here: http://wiki.opscode.com/display/chef/Libraries, but how can i access data bags and the node object in this library?
[2013-02-11 11:57:58 -0500] mattt: i installed chef-server 11 w/ incorrect fqdn, and now i can't upload cookbooks using knife -- best way to change that ?
[2013-02-11 12:09:33 -0500] giorgian: Hi. I'm having problems manipulating data bags using the REST API (non-ruby client): it seems that when I post a json to /data with a key "action", that key gets suppressed.
[2013-02-11 12:30:22 -0500] emanuelez: is there a way to stub roles in chefspec?
[2013-02-11 12:37:38 -0500] halcyonCorsair: can anyone tell me if the attribute class method still exists in chef 11?
[2013-02-11 14:22:26 -0500] sraf: for the mysql::server cookbook, does setting the root password in the attributes file work?
[2013-02-11 14:22:37 -0500] sraf: default['mysql']['server_root_password']       = "my_password"
[2013-02-11 14:23:51 -0500] sraf: The readme says:
[2013-02-11 14:23:51 -0500] sraf: The following attributes are randomly generated passwords handled in the mysql::server recipe, using the OpenSSL cookbook's secure_password helper method. These are set using the set_unless node attribute method, which allows them to be easily overridden e.g. in a role.
[2013-02-11 14:23:51 -0500] sraf: node['mysql']['server_root_password'] - Set the server's root password
[2013-02-11 14:28:31 -0500] alexbst: Are there any documented clean ways to switch to omnibus on nodes that had chef-client installed non-omnibus way - i.e. in-situ ?
[2013-02-11 14:30:27 -0500] metawake: When using "application" cookbook (to be able to get app from git) I am getting "NoMethodError: undefined method `path' for Chef::Resource::Application". Where can I look for the cause of this?
[2013-02-11 14:30:55 -0500] metawake: (using Vagrant+Chef)
[2013-02-11 14:31:16 -0500] SplasPood: allaire: not sure about documented, but if you remove chef-client however it was previously installed, then just install the omnibus your existing configs should likely 'just work'
[2013-02-11 14:31:46 -0500] allaire: SplasPood: wuddup?
[2013-02-11 14:32:05 -0500] SplasPood: ahh
[2013-02-11 14:32:10 -0500] SplasPood: nick completion misfire :P
[2013-02-11 14:32:21 -0500] SplasPood: alexbst: that was for you
[2013-02-11 14:32:44 -0500] allaire: SplasPood: happens to the best of us
[2013-02-11 14:33:38 -0500] allaire: does chef always try to update your cookbooks when you re-run it ?
[2013-02-11 14:33:47 -0500] allaire: like run another sudo aptitude install git
[2013-02-11 14:33:59 -0500] allaire: does it depends on how each cookbook is done?
[2013-02-11 14:35:23 -0500] cpasmoi: depends on how you set this aptitude
[2013-02-11 14:36:51 -0500] giorgian: Hi, if I try to manipulate a data bag item using the REST API (non-standard non-ruby client), if the main JSON has an "action" key, it gets removed: https://gist.github.com/giorgian/4754737
[2013-02-11 14:37:37 -0500] giorgian: There's no mention of the "action" key being special on http://docs.opscode.com/api_chef_server_data_bag_name.html or http://docs.opscode.com/api_chef_server_data_bag_item.html
[2013-02-11 14:38:15 -0500] cpasmoi: allaire, for instance something like 'package node[:git][:package] do  action :install  version node[:git][:version]' won't run aptitude install git everytime (using apt LWRP)
[2013-02-11 14:38:23 -0500] alexbst: thanks SplasPood
[2013-02-11 14:38:26 -0500] alexbst: I am going to give it a go
[2013-02-11 14:38:29 -0500] giorgian: Should this be considered a bug or is it instead a well known, stable, "official" thing?
[2013-02-11 14:38:30 -0500] alexbst: like a hero
[2013-02-11 14:38:30 -0500] fooJBar: allaire: chef-client will get latest versions of your cookbooks from the server every time it runs. Resources inside recipes are generally idempotent though, so if a cookbook's recipe installed git, it will not re-run/update the git package every time it runs.
[2013-02-11 14:39:45 -0500] allaire: so if I don't specify a new version/source, it won't update
[2013-02-11 14:40:35 -0500] fooJBar: generally for package resources I don't think so
[2013-02-11 14:41:11 -0500] allaire: cpasmoi: does apt LWRP is the apt cookbook?
[2013-02-11 14:42:27 -0500] fooJBar: It's the resource provider
[2013-02-11 14:43:14 -0500] fooJBar: (apt LWRP is the Provider for the package resource on Ubuntu)
[2013-02-11 14:43:24 -0500] allaire: alright
[2013-02-11 14:43:35 -0500] allaire: apt cookbook is a different thing
[2013-02-11 14:43:41 -0500] fooJBar: indeed
[2013-02-11 14:43:46 -0500] allaire: it's just run aptitude update I think
[2013-02-11 14:45:46 -0500] fooJBar: Correct, the apt cookbook ensures apt-get update is run so your repo cache is up to date.
[2013-02-11 14:47:21 -0500] fooJBar: giorgian: does it also happen when uploading with Knife?
[2013-02-11 14:50:36 -0500] giorgian: fooJBar: no, it doesn't. knife sends the last piece of JSON here: https://gist.github.com/giorgian/4754737
[2013-02-11 14:50:52 -0500] fooJBar: I see, I'll try it here using curl
[2013-02-11 14:51:33 -0500] quellhorst: how could i check for the existence of a command before running some commands in chef
[2013-02-11 14:52:03 -0500] quellhorst: like `which rvm`
[2013-02-11 15:03:35 -0500] version2beta: Has anyone used the nginx_conf cookbook? I need to create a bunch of location blocks with roots in them under one conf file, but I'm not seeing how one does that.
[2013-02-11 15:06:42 -0500] pixie79: hi - what is the best action to take here - chef requires net-ssh (~> 2.2.2) when multi-ssh requires a greater version
[2013-02-11 15:21:04 -0500] geekbri: pixie79: http://tickets.opscode.com/browse/CHEF-3835?focusedCommentId=32148&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-32148
[2013-02-11 15:21:09 -0500] geekbri: pixie79: That worked for me.
[2013-02-11 15:21:15 -0500] pixie79: ok thanks
[2013-02-11 15:22:11 -0500] geekbri: pixie79: also, I think the issue might be resolved in chef 10.20.0
[2013-02-11 15:33:11 -0500] chris613: Quick question about conventions. Are the files in attributes/ generally meant to be for attributes defined by that cookbook, or is it also an appropriate place for overriding defaults?
[2013-02-11 15:33:22 -0500] chris613: From other cookbooks
[2013-02-11 15:35:23 -0500] ndemoor: hi
[2013-02-11 15:35:51 -0500] ndemoor: I have an error when running the chef-config recipe through chef-solo
[2013-02-11 15:35:54 -0500] ndemoor: Errno::EAFNOSUPPORT: Address family not supported by protocol - socket(2)
[2013-02-11 15:36:10 -0500] ndemoor: running chef manually does not pose a problem
[2013-02-11 15:36:53 -0500] ndemoor: stacktrace: http://pastebin.com/NsC2Am5d
[2013-02-11 15:37:17 -0500] ndemoor: anybody an idea what can be the issue here?
[2013-02-11 15:38:20 -0500] ndemoor: s|chef-config|chef-client
[2013-02-11 15:49:07 -0500] sraf: how do you reference the current cookbook name from a recipe?
[2013-02-11 15:59:21 -0500] fooJBar: giorgian: I reproduced the issue using CURL. The action key is indeed removed by the server.
[2013-02-11 15:59:39 -0500] giorgian: fooJBar: would you consider that a bug?
[2013-02-11 16:00:16 -0500] giorgian: or is rather "action" an undocumented reserved key?
[2013-02-11 16:00:20 -0500] fooJBar: Indeed as there is no mention of action being a special key.
[2013-02-11 16:01:07 -0500] fooJBar: What interesting is that knife uses a very different approach to posting data
[2013-02-11 16:02:24 -0500] jtimberman: sraf: there's a method, cookbook_name
[2013-02-11 16:02:42 -0500] jtimberman: sraf: it returns the name of the cookbook. likewise, there's a recipe_name method for the recipe name.
[2013-02-11 16:02:56 -0500] meineerde: fooJBar: action is at least in rails (and I think in merb too) used in the request routing on the server. Might be there are clashes
[2013-02-11 16:03:03 -0500] giorgian: fooJBar: indeed. But I cannot find an explanation of that, and don't know if I should consider knife's approach official. Also, I don't know which of the keys used by knife are mandatory
[2013-02-11 16:03:36 -0500] giorgian: meineerde: actually, I did some sniffing on a server, and that doesn't seem the case
[2013-02-11 16:04:11 -0500] lynxman: hi guys *wave* I've been having some issues lately about chef solr not handling properly all the metadata (dropping information as not enough memory), I've fixed it but I would want to know if any of you got monitoring for solr as it comes on the chef packages?
[2013-02-11 16:05:08 -0500] meineerde: giorgian: was just a thought... but if the param never reaches the server, there is something else odd
[2013-02-11 16:05:10 -0500] giorgian: meineerde: this is a piece of communication I intercepted on localhost: https://gist.github.com/giorgian/4754737#comment-771190
[2013-02-11 16:05:18 -0500] fooJBar: giorgian: I would rename your key from "action" to sth else and create an issue on the public JIRA so other people can find this and maybe one day they will update the docs or fix the issue.
[2013-02-11 16:06:06 -0500] giorgian: so I now have this hypothesis that "action" gets overridden by some chef component
[2013-02-11 16:06:36 -0500] fooJBar: Or consumed :P
[2013-02-11 16:08:46 -0500] meineerde: giorgian: fooJBar: just for the record, I have data bags with an action key and it worked fine
[2013-02-11 16:09:12 -0500] fooJBar: meineerde: we're posting the data to the REST endpoint, not using knife
[2013-02-11 16:09:20 -0500] meineerde: ah, okay.
[2013-02-11 16:09:24 -0500] giorgian: meineerde: yes, they work fine as long as you manipulate them with knife or the chef gem
[2013-02-11 16:09:26 -0500] fooJBar: knife behaves fine
[2013-02-11 16:09:49 -0500] meineerde: then I should probably just shut up, as I know too little of your conversation -_-"
[2013-02-11 16:10:23 -0500] giorgian: fooJBar: ok, I'll just use some synonym of "action" and open an issue on JIRA. Thank you for your assistance.
[2013-02-11 16:10:35 -0500] fooJBar: (hehe, the difference is that Knife encapsulates the raw data in a sub-json element called "raw-data", I will try emulating this with curl
[2013-02-11 16:10:59 -0500] fooJBar: Cheers giorgian meineerde
[2013-02-11 16:11:30 -0500] giorgian: fooJBar: I tried test on friday, just using {"id":"bar", "raw_data": {...}}, but that didn't work. I guess some other keys must be included along with the id on the main level of the JSON body
[2013-02-11 16:12:28 -0500] fooJBar: yes, I will first try by putting all the elements that knifes puts: name, json_class, chef_type, data_bag then remove them one by one
[2013-02-11 16:12:48 -0500] giorgian: fooJBar: please let me know what you find out
[2013-02-11 16:16:13 -0500] tolland: ive got some nodes appearing with empty run_lists even though they have bootstrapped, and run through at least once with an invocation like "chef-client -j /some/attributes  -o \"recipe[chef-client],role[base]
[2013-02-11 16:16:40 -0500] tolland: so does the client::config prvent the current run from writing back its completed run_list?
[2013-02-11 16:18:26 -0500] chris613: Is chef-client tollerant to really high values for -i (interval), like 604800 (7 days)?
[2013-02-11 16:20:52 -0500] gchristensen: chris613: I can't imagine why not, mine is up to a month on many of the machines (its all done manually currently)
[2013-02-11 16:21:38 -0500] chris613: gchristensen: As in you actually run the chef-client in daemon mode with -i 2592000   ?
[2013-02-11 16:21:46 -0500] gchristensen: no, I kid
[2013-02-11 16:22:13 -0500] gchristensen: but chef has no problem with being run infrequently, so I wouldn't imagine that the interval setting would have issues with it
[2013-02-11 16:29:30 -0500] fooJBar: giorgian: I can't make this work sorry... knife seems to use an undocumented method to upload the databag... Wiresharking shows that knife is using the REST endpoint in a way I cannot match up with the docs.
[2013-02-11 16:32:11 -0500] amccloud: any reason why my encrypted data bad item would be nil? https://gist.github.com/amccloud/7d7b7cf2507c6d3f8b14
[2013-02-11 16:32:30 -0500] giorgian: fooJBar: can you be more specific?
[2013-02-11 16:32:32 -0500] nevans: How do I *remove* entries from an array in the default attributes (set in the recipe attributes/default.rb)
[2013-02-11 16:45:58 -0500] pixie79: any ideas on this one? warning: rabbitmq: unable to open supervise/ok: file does not exist - The platform is Oracle 6.3 64bit and i have installed daemontools
[2013-02-11 16:48:34 -0500] fooJBar: giorgian: I made this work now... gimme a sec
[2013-02-11 16:52:01 -0500] fooJBar: giorgian: I emulated the knife commands. First do a POST on /data/NAME to create the item. Then Do a PUT on /data/NAME/ITEM with the following body: {"json_class":"Chef::DataBagItem","data_bag":"foo","raw_data":{"id":"bar","key":"value","action":"remove"}}
[2013-02-11 16:53:02 -0500] giorgian: fooJBar: wow, thanks. Doesn't just POSTing the body once work?
[2013-02-11 16:53:18 -0500] fooJBar: Not sure... a sec
[2013-02-11 16:54:01 -0500] fooJBar: Just doing a PUT fails, trying with one POST
[2013-02-11 16:55:36 -0500] till_: jtimberman: been trying to get my password reset to platform et all - now even my email to support@ bounces with, "an error occurred while processing your request"
[2013-02-11 16:56:58 -0500] jtimberman: till_: Is that using a form on the site to email support, the help system itself, or are you getting a bounce email reply with that?
[2013-02-11 16:57:06 -0500] fooJBar: giorgian: Yes, changing the PUT to /data/NAME/ITEM to a POST to /data/NAME works the same so you only need the one command. The needed JSON elements are:{"json_class":"Chef::DataBagItem","data_bag":"foo","raw_data":{"id":"bar","key":"value","action":"remove"}}
[2013-02-11 16:57:23 -0500] sraf: if i do a node.set['property'] from a recipe, and then do an "include_recipe", will the attribute be available in the included recipe?
[2013-02-11 16:57:47 -0500] giorgian: fooJBar: thank you very much for your help!
[2013-02-11 16:58:01 -0500] fooJBar: giorgian: one caveat is this approach was reversed engineered from Knife, so they might change the API under your feet without telling you :)
[2013-02-11 16:58:41 -0500] giorgian: fooJBar: of course; that's why I also wrote to the mailing list, hoping for some sort of an "official" answer
[2013-02-11 16:59:35 -0500] till_: jtimberman: i responded to an email from "Sean"
[2013-02-11 16:59:50 -0500] till_: and the error is in a bounce
[2013-02-11 16:59:53 -0500] till_: got it again
[2013-02-11 17:00:06 -0500] RJ2: is search(:node, "role:foo") guaranteed to always return results in the same order between runs?
[2013-02-11 17:02:01 -0500] jtimberman: till_: Sorry about that. Will see what we can do.
[2013-02-11 17:09:05 -0500] fooJBar: sraf: I assume you mean in the "including recipe". Regardless the answer is yes since node.set is setting the attribute as a default attribute, it is persisted on the node.
[2013-02-11 17:09:34 -0500] fooJBar: sraf: but I'd say the best way to check is trying it
[2013-02-11 17:12:14 -0500] fooJBar: sraf: by default I meant normal*
[2013-02-11 17:12:36 -0500] geekbri: sraf: You may have to do a node.save in that recipe if you want it to be available.  I'm not sure if it will be there if you dont.
[2013-02-11 17:12:42 -0500] geekbri: sraf: test and find out for sure though :)
[2013-02-11 17:13:41 -0500] meta_wake: Hi! Can someone help - trying to implement "application" cookbook with Chef/Vagrant, to be able to deploy from git and getting this error message: FATAL: NoMethodError: undefined method `path' for Chef::Resource::Application
[2013-02-11 17:14:38 -0500] meta_wake: obviously, "path" is an integral part of "application" recipe. if I comment it out, same message would be displayed for next attrib.
[2013-02-11 17:15:33 -0500] sraf: foojbar/geekbri: thanks, it didnt seem to work without the save
[2013-02-11 17:15:39 -0500] sraf: just trying it again with save
[2013-02-11 17:15:59 -0500] fooJBar: sraf,geekbri: glad to learn that
[2013-02-11 17:16:46 -0500] geekbri: sraf: I suspected as much.  I think the the node only gets saved after the run is completed. So what happens is, you "set" the attribute in the called recipe, then when the next recipe runs it calls the [] method which does a lookup.  It however merges the attributes from the node / roles / etc, but the new attribute isn't set on the node yet
[2013-02-11 17:16:50 -0500] dotslash: Does anyone have a good solution to pull .jars and .wars from a Nexus repository? I'm doing it with curl, but I want to make sure there isn't something obvious I'm overlooking.
[2013-02-11 17:17:01 -0500] geekbri: at least that what i _think_ the case is, its been a while since i've dug around in the chef client source.
[2013-02-11 17:17:30 -0500] amccloud: should knife data bag show --secret-file .chef/encrypted_data_bag_secret secrets dmcc show everything decrypted?
[2013-02-11 17:18:59 -0500] juliancdunn: amccloud: yes
[2013-02-11 17:19:37 -0500] amccloud: juliancdunn: Any reason why I would be seeing a base64 value?
[2013-02-11 17:24:20 -0500] zts: geekbri: it really shouldn't matter.  if you call node.set, the attribute has been set.  It hasn't been sent to the server, but that shouldn't affect compilation of further recipes in the run
[2013-02-11 17:24:33 -0500] geekbri: sraf: ^
[2013-02-11 17:24:55 -0500] zts: (so it's curious if it didn't appear to work without the node.save)
[2013-02-11 17:25:12 -0500] geekbri: zts: He is using include_recipe, dont know if that makes a difference
[2013-02-11 17:30:47 -0500] geekbri: sraf: don't leave us in suspense ;)
[2013-02-11 17:31:45 -0500] zts: geekbri: it shouldn't - I'd call it a bug if it did make a difference!
[2013-02-11 17:38:08 -0500] fooJBar: geekbri,zts: I don't believe this doesn't work... I'm actually going to test this...
[2013-02-11 17:38:55 -0500] geekbri: fooJBar: Make sure you report the results.  I was going to test it myself when I had time.  I just don't have the time :)
[2013-02-11 17:39:19 -0500] fooJBar: will do should only take a minute
[2013-02-11 17:40:52 -0500] fooJBar: It works
[2013-02-11 17:41:15 -0500] fooJBar: Setting attribute foo on node from an included recipe, the attribute is set to the right value in the enclising recipe
[2013-02-11 17:42:25 -0500] fooJBar: The caveat is that the attribute becomes visible after the include line
[2013-02-11 17:42:51 -0500] vegardx_: Under wheezy, I'm having issues with ruby throwing off all sorts off "cannot load such file"-errors.
[2013-02-11 17:43:50 -0500] vegardx_: Using the packages from opscode repo.
[2013-02-11 17:46:19 -0500] tolland: ive got a few cookbooks that do parent directory checks as a guard
[2013-02-11 17:46:28 -0500] tolland: like directory "/srv"
[2013-02-11 17:46:29 -0500] tolland: or
[2013-02-11 17:46:49 -0500] tolland: directory "/root/bin"
[2013-02-11 17:47:05 -0500] tolland: but these are throwing WARNings from the 2 cookbooks that have them in
[2013-02-11 17:48:13 -0500] sraf: anyone familiar with the mongodb cookbook?
[2013-02-11 17:51:35 -0500] manimal: this is on the opscode home page....Automating configuration management and provisioning.
[2013-02-11 17:52:03 -0500] manimal: what or how is provisioning handled, does it mean the apis and plugins for some of the hypervisors like xen?
[2013-02-11 17:52:14 -0500] juliancdunn: sraf: which one
[2013-02-11 17:52:21 -0500] manimal: or is there other provisioning tools to get a box up and running from baremetal from within chef
[2013-02-11 17:52:50 -0500] juliancdunn: manimal: you use the appropriate knife plugin to get up and running for the virtualization technology of choice
[2013-02-11 17:53:43 -0500] manimal: ya i got that running somewhere im missing a connection to the pieces trying to figure out how to handle hostnames and ips and what not to assign from within the framework
[2013-02-11 17:55:33 -0500] sraf: juliancdunn: this one https://github.com/edelight/chef-mongodb
[2013-02-11 17:55:59 -0500] sraf: specifically, i'm trying to call the mongodb_instance definition
[2013-02-11 17:56:01 -0500] kallistec: manimal: what we do is always set the node name to some random slug, e.g. in ec2 we do i-1a2b3c, then we have a cookbook change the hostname to primary-role-slug
[2013-02-11 17:56:14 -0500] kallistec: e.g., database-i-1a2b3c
[2013-02-11 17:56:32 -0500] kallistec: and we use dynect to setup CNAMEs
[2013-02-11 17:56:32 -0500] vegardx_: Is Debian totally unsupported in now a days?
[2013-02-11 17:56:35 -0500] sraf: but chef is complaining that it cant find the required template files in my cookbook
[2013-02-11 17:56:46 -0500] sraf: i think it might be related to this http://tickets.opscode.com/browse/CHEF-1490
[2013-02-11 17:57:17 -0500] sraf: but i may simply be calling it incorrectly
[2013-02-11 17:58:48 -0500] juliancdunn: sraf: it looks like that issue, yes
[2013-02-11 17:59:10 -0500] sraf: any idea how the mongodb_instance is expected to be called then?
[2013-02-11 17:59:39 -0500] sraf: the fact that the readme has a section on using it tells me i might be doing something wrong
[2013-02-11 18:00:13 -0500] juliancdunn: well, what we do is use the recipes directly from the cookbook
[2013-02-11 18:00:18 -0500] juliancdunn: those recipes invoke said definition
[2013-02-11 18:00:37 -0500] juliancdunn: the problem is that in the definition, "cookbook" is not set as an attribute of the "template" resource
[2013-02-11 18:00:45 -0500] juliancdunn: which precludes you from invoking the definitions from other cookbooks
[2013-02-11 18:00:56 -0500] manimal: kallistec hmm thanks, lemme wrap my head around this issue so i know what exactly to ask, am i to assume most server farms are using fqdn's with dynamic ips instead of static, that would remove some of my questions
[2013-02-11 18:02:46 -0500] sraf: ok i see. would i be able to directly set the attribute values in my recipe (e.g. mongodb[:dbpath]), and then simply call include_recipe "mongodb::default" ?
[2013-02-11 18:03:19 -0500] jtimberman: vegardx_: why would debian be unsupported?
[2013-02-11 18:06:22 -0500] geekbri: fooJBar: Makes sense that it only becomes available after the include_recipe line as that is when the code is actually run :)
[2013-02-11 18:12:20 -0500] wdpro_kevin: is the chef.run_status stored in the node data? Is there a way to do a knife search for it?
[2013-02-11 18:14:15 -0500] vegardx_: jtimberman: Because packages on both opscode mirror and debian is broken.
[2013-02-11 18:14:27 -0500] vegardx_: And have been for some time now.
[2013-02-11 18:28:28 -0500] vegardx_: jtimberman: More specifically, there seems that there are some issues with ruby 1.8 vs. 1.9.3
[2013-02-11 18:34:14 -0500] jtimberman: vegardx_: on apt.opscode.com, which package(s)? What version? what version of debian?
[2013-02-11 18:34:27 -0500] jtimberman: and broken how
[2013-02-11 18:39:15 -0500] c_t: from the scrollback, I think he said wheezy
[2013-02-11 18:39:20 -0500] c_t: or, possibly, she
[2013-02-11 18:40:51 -0500] doobeh: Just learning Chef Solo, when I set postgres::server I had to supply the password via the node['postgresql'][etc] syntax, I was wondering if actions (like adding addition users via the database cookbook) could be inacted purely by loading up the node? And if so, how might that look?
[2013-02-11 19:02:59 -0500] fromonesrc: having trouble uploading a new cookbook to community.opscode.com
[2013-02-11 19:03:12 -0500] fromonesrc: "Cookbook folder must match cookbook name"
[2013-02-11 19:03:32 -0500] fromonesrc: the folder matches the cookbook name
[2013-02-11 19:04:42 -0500] leifmadsen: or does it
[2013-02-11 19:05:29 -0500] c_t: fromonesrc: what does metadata.rb/.json say?
[2013-02-11 19:05:55 -0500] fromonesrc: "heroku-toolbelt"
[2013-02-11 19:06:14 -0500] c_t: and I trust that's the folder name?
[2013-02-11 19:06:32 -0500] fromonesrc: yes
[2013-02-11 19:06:57 -0500] fromonesrc: and the name of the tarball I'm trying to push up is heroku-toolbelt.tar.gz
[2013-02-11 19:07:10 -0500] vegardx_: jtimberman: wheezy, chef-server 0.10x. I do apt-get install chef-server, but I can get you the full list if you want.
[2013-02-11 19:09:52 -0500] jrohwedder: anyone know if there's a good way to set an attribute in a role to something stored in a data bag (regular or encrypted)
[2013-02-11 19:11:46 -0500] odyssey4me: I'm having some trouble with a search_file_replace regexp - the string concerned has a bracket '(' in it... and escaping the bracket is not helping... I'm still getting a "premature end of regular expression" error. Can anyone assist?
[2013-02-11 19:15:25 -0500] jtimberman: vegardx_: is the chef-server init script reporting that startup failed? are the merb processes running?
[2013-02-11 19:16:18 -0500] jwcarman: Does anyone have any existing ohai plugins written that I could lean on for my own work?  Anything on github?
[2013-02-11 19:20:27 -0500] geekbri: jwcarman: you should checkout the plugins that are built into ohai
[2013-02-11 19:20:43 -0500] geekbri: jwcarman: https://github.com/opscode/ohai/tree/master/lib/ohai/plugins
[2013-02-11 19:21:31 -0500] jwcarman: got it, looking now
[2013-02-11 19:21:35 -0500] c_t: hrm
[2013-02-11 19:22:01 -0500] vegardx_: jtimberman: The problem is that during install you get errors of missing files. Like, ohai.
[2013-02-11 19:22:21 -0500] c_t: anyone else ever get "FATAL: NoMethodError: undefined method `run_list' for nil:NilClass" when trying to bootstrap chef, no matter what is in the run list?
[2013-02-11 19:26:35 -0500] jwcarman: geekbri: is there any documentation on writing ohai plugins, on how I set up the attributes I want to set up?
[2013-02-11 19:28:41 -0500] geekbri: jwcarman: i don't knwo what the current status if of documentation for ohai plugins on the new docs site.  There is this very old page right here. http://wiki.opscode.com/display/chef/Writing+Ohai+Plugins
[2013-02-11 19:29:09 -0500] amccloud: any tips on passing a json file to --json-attributes with bootstrapping?
[2013-02-11 19:29:28 -0500] jwcarman: So, just typing 'orly "yeah, orly"' would set the attribute "orly" = "yeah, orly"?
[2013-02-11 19:30:00 -0500] jwcarman: What about multi-dimensional attributes like node[:foo][:bar] = "baz"
[2013-02-11 19:44:25 -0500] chris613: Quick question about conventions. Are the files in the attributes/ directory generally meant to be for attributes defined by that cookbook, or is it also an appropriate place for overriding defaults from other cookbooks?
[2013-02-11 19:44:28 -0500] doomviking: haha. xkcd is so awesome today
[2013-02-11 19:46:03 -0500] doomviking: chris613: ymmv, but I think that the attributes dir is only appropriate for setting that particular cookbooks defaults
[2013-02-11 19:47:16 -0500] chris613: doomviking: That's what I figured. I currently use it for overrides, but it seemed someone impure to me
[2013-02-11 19:47:26 -0500] chris613: *someHOW, not someONE
[2013-02-11 19:47:30 -0500] doomviking: I suppose you could set an attribute for another cookbook in there. seem like its asking for spaghetti, though
[2013-02-11 19:47:52 -0500] chris613: doomviking: Well it's either that or from my recipe, right? So it's spaghetti either way
[2013-02-11 19:48:07 -0500] doomviking: I override attributes in roles, as a rule
[2013-02-11 19:48:16 -0500] doomviking: but your pizza is not my pizza
[2013-02-11 19:48:22 -0500] chris613: doomviking: Right, that
[2013-02-11 19:48:56 -0500] chris613: That's essentially what I'm doing, but we don't use Roles proper to do anything due to the lack of versioning, so it just punts to a "super cookbook" 1:1 Roles:Supercookbooks
[2013-02-11 19:49:20 -0500] doomviking: gnarly
[2013-02-11 19:52:26 -0500] markba: Hi there. Been using Chef for a couple years, but have the strangest problem. For the past 1.5 hours or so, I'm seeing my chef-serverr send back empty run-lists to clients
[2013-02-11 19:52:32 -0500] markba: Verified with tcpdump.
[2013-02-11 19:53:30 -0500] c_t: markba: hmm, I'm having a very similar problem right now
[2013-02-11 19:53:57 -0500] markba: NoMethodError: undefined method `run_list' for nil:NilClass
[2013-02-11 19:53:58 -0500] markba: ?
[2013-02-11 19:54:06 -0500] c_t: yup
[2013-02-11 19:54:14 -0500] markba: It's the same chef-client version I've been using for a few days at least. Quite weird.
[2013-02-11 19:54:15 -0500] c_t: this with existing clients or trying to bootstrap?
[2013-02-11 19:54:32 -0500] markba: bootstrap
[2013-02-11 19:54:38 -0500] c_t: so far I've had it with bootstrapping, trying an existing client now
[2013-02-11 19:54:55 -0500] c_t: er, existing node
[2013-02-11 19:55:03 -0500] c_t: anyway, that's running just fine
[2013-02-11 19:55:13 -0500] c_t: but bootstrapping a new node blows up with that message
[2013-02-11 19:55:22 -0500] itchyouch: I was trying to install chef 11 with the omnibus installer rpm on a fresh host, but chef-server-ctl reconfigure fails.  It appears that chef-solr is constantly dying.  any ideas on this being a common bug?
[2013-02-11 19:57:07 -0500] markba: c_t: Which os?
[2013-02-11 19:57:08 -0500] itchyouch: it's the hostname
[2013-02-11 19:57:22 -0500] itchyouch: need to have the hostname resolve to a proper address. =P
[2013-02-11 19:57:26 -0500] markba: I've only tested on ubuntu 12.04 LTS.
[2013-02-11 19:58:20 -0500] c_t: markba: squeeze
[2013-02-11 19:58:34 -0500] geekbri: markba, c_t: Im having the same problem
[2013-02-11 19:58:44 -0500] markba: interesting. the gem version is the same.
[2013-02-11 19:58:56 -0500] markba: dependency version changed? like the net-ssh-multi bug last week?
[2013-02-11 19:59:00 -0500] geekbri: markba: Im having that same issue on ubuntu12.04 with chef 10.20.0
[2013-02-11 19:59:08 -0500] markba: hmm
[2013-02-11 19:59:12 -0500] c_t: I've tried both 10.20.0 and 11.2.0
[2013-02-11 19:59:17 -0500] c_t: blows up the same way
[2013-02-11 19:59:20 -0500] markba: yep
[2013-02-11 19:59:26 -0500] markba: running chef-client, from my chef-server works though.
[2013-02-11 19:59:41 -0500] markba: so that could speak to it being old ubuntu 12.04 install
[2013-02-11 19:59:43 -0500] markba: versus latest updates
[2013-02-11 20:01:03 -0500] geekbri: markba: just installed chef 10.16.6, works without a problem
[2013-02-11 20:01:12 -0500] markba: strange
[2013-02-11 20:01:31 -0500] geekbri: I had to manually install the gems for net-ssh, net-ssh-gateway, net-ssh-multi
[2013-02-11 20:01:37 -0500] geekbri: in order to do that of course.
[2013-02-11 20:02:37 -0500] btm: Opscode Chef code review, join: http://bit.ly/156Pb1F, watch: http://youtu.be/jp5GqSxnNnA #opschef
[2013-02-11 20:02:51 -0500] markba: found it.
[2013-02-11 20:02:58 -0500] c_t: ?
[2013-02-11 20:02:59 -0500] markba: http://rubygems.org/gems/json
[2013-02-11 20:03:03 -0500] markba: json, feb 11th
[2013-02-11 20:03:29 -0500] geekbri: markba: ah ha, so probably what happened is the newer versions of chef rely on a newer version of json
[2013-02-11 20:03:39 -0500] markba: that's the only recent dependency that's updated
[2013-02-11 20:03:42 -0500] markba: i just checked.
[2013-02-11 20:03:42 -0500] geekbri: markba: and so when starting a new instance, gets the new version of json, which goes kaboom
[2013-02-11 20:03:43 -0500] markba: dammit
[2013-02-11 20:03:46 -0500] markba: exactly
[2013-02-11 20:03:51 -0500] geekbri: which would make sense right, because the runlist is stored in json
[2013-02-11 20:03:55 -0500] geekbri: or at least parsed from it
[2013-02-11 20:03:57 -0500] markba: someone should file a bug...
[2013-02-11 20:04:01 -0500] markba: :P
[2013-02-11 20:04:16 -0500] geekbri: yeah
[2013-02-11 20:04:23 -0500] geekbri: i agree :P
[2013-02-11 20:04:45 -0500] geekbri: let me go produce the error again so I can file a bug
[2013-02-11 20:05:31 -0500] markba: cheer
[2013-02-11 20:05:33 -0500] markba: s*
[2013-02-11 20:09:39 -0500] markba: Well, I have to run. Thanks for confirming my bug, and I hope the JSON info helps!
[2013-02-11 20:10:57 -0500] itchyouch: curious if anyone is running multiple chef servers for redundancy?  Kind of in a active/standby configuration
[2013-02-11 20:15:58 -0500] jtimberman: vegardx_: I just set up a wheezy system with chef server and the packages from the opscode apt repository, chef-server-api is running (merb worker on port 4000), ohai returns a bunch of data and chef-client runs w/o issue.. can you provide more information about what is not working on your system, maybe gist output from the various command(s) you're trying?
[2013-02-11 20:16:33 -0500] amccloud: why isn't my new cookbook uploading to my chef server?
[2013-02-11 20:17:20 -0500] vegardx_: jtimberman: Hold on, I'll fetch it! :)
[2013-02-11 20:17:56 -0500] pignata: I've started seeing this when getting to the synching cookbooks phase of server creation: NoMethodError: undefined method `name' for #<Hash:0x7f9bc9ad23b8> -- working on figuring out what it is but just checking to see if this is a weird known opscode platform bug that's known to have started happening today
[2013-02-11 20:19:24 -0500] tolland: [2013-02-11T20:19:01+00:00] DEBUG: NoMethodError: undefined method `run_list' for nil:NilClass
[2013-02-11 20:19:24 -0500] geekbri: pignata: im filing a bug report as we speak
[2013-02-11 20:19:27 -0500] tolland: /usr/lib/ruby/gems/1.8/gems/chef-11.2.0/bin/../lib/chef/resource_reporter.rb:223:in `prepare_run_data'
[2013-02-11 20:19:36 -0500] tolland: odd place for that error
[2013-02-11 20:19:48 -0500] pignata: geekbri - thanks. I feel less crazy.
[2013-02-11 20:19:59 -0500] geekbri: pignata: its the new version of the Json gem which was released today
[2013-02-11 20:20:06 -0500] geekbri: 1.7.7 and chef's dep is ~>1.7.6
[2013-02-11 20:20:10 -0500] geekbri: apparently 1.7.7 breaks things
[2013-02-11 20:20:21 -0500] mshilling: is there a way to have chef stop monitoring a service on a single node?  the service is in a cookbook thats applied to a role, so I dont want to remove it from the role or remove the role from the node.  I'd just like to take one box and shut off the service for a month without chef touching it
[2013-02-11 20:20:41 -0500] pignata: ahhh. that makes sense.
[2013-02-11 20:22:47 -0500] chris613: mshilling: You can write a recipe that uses chef-rewind to override the action of your service resource, and then add that recipe to the run list on your special snowflake node
[2013-02-11 20:22:58 -0500] chris613: There might be an easier way I don't know about
[2013-02-11 20:22:58 -0500] coderanger: mshilling: we usually use node tags for that
[2013-02-11 20:23:00 -0500] geekbri: c_t, pignata: http://tickets.opscode.com/browse/CHEF-3863
[2013-02-11 20:23:20 -0500] coderanger: mshilling: in particular we have a no-monitor tag
[2013-02-11 20:23:32 -0500] coderanger: Just yanks the node from nagios configs
[2013-02-11 20:24:24 -0500] c_t: geekbri: awesome
[2013-02-11 20:27:55 -0500] geekbri: jtimberman: just FYI, new json gem totally broke stuff.  I filed a ticket. http://tickets.opscode.com/browse/CHEF-3863
[2013-02-11 20:28:42 -0500] mshilling: ahh so I tag the box (knife tag create node no_postfix), then in my postfix recipe I can use an if statement to tell it not to worry about the service on boxes with that tag?
[2013-02-11 20:29:37 -0500] tomdzk: geekbri: could it be because of this ? https://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-security/4_YvCpLzL58
[2013-02-11 20:30:06 -0500] geekbri: tomdzk: my guess is yes that is exactly it.
[2013-02-11 20:30:11 -0500] geekbri: thats a guess though
[2013-02-11 20:30:59 -0500] tomdzk: unfortunately they don't seem to grasp the concept of semver - this should prob. have been a 2.0 version of the json gem
[2013-02-11 20:31:02 -0500] geekbri: I added that to the ticket.
[2013-02-11 20:31:29 -0500] geekbri: tomdzk: I'm guessing in the authors mind they were thinking "security BUG FIX" so they were like
[2013-02-11 20:31:33 -0500] geekbri: oh bug fix, thats tiny version bump
[2013-02-11 20:31:44 -0500] geekbri: clearly, the author was wrong :)
[2013-02-11 20:32:17 -0500] tolland: so chef has final caught up with puppet,
[2013-02-11 20:32:26 -0500] tolland: several breaking deps changes in a weel ;-)
[2013-02-11 20:32:29 -0500] tolland: week
[2013-02-11 20:32:50 -0500] timsmith: I'm having an odd issue I've never seen before.  I deleted a node and then ran chef to reregister the node.  Now I'm getting FATAL: NoMethodError: undefined method `run_list' for nil:NilClass
[2013-02-11 20:33:30 -0500] tolland: timsmith: that!
[2013-02-11 20:33:41 -0500] tolland: is the deps change I am talking about
[2013-02-11 20:33:46 -0500] tolland: json 1.7.7
[2013-02-11 20:33:55 -0500] tomdzk: timsmith: http://tickets.opscode.com/browse/CHEF-3863
[2013-02-11 20:33:55 -0500] tolland: roll it back to 1.7.6 and it works fine
[2013-02-11 20:34:22 -0500] timsmith: this dep stuff is getting old pretty quick
[2013-02-11 20:34:28 -0500] geekbri: timsmith: correct.
[2013-02-11 20:34:49 -0500] geekbri: I mean its not like its all opscode fault
[2013-02-11 20:34:55 -0500] tomdzk: timsmith: that's why it's a different gem every week ;)
[2013-02-11 20:35:03 -0500] geekbri: json gem probably shouldn't roll out a breaking change as a tiny point release
[2013-02-11 20:35:09 -0500] timsmith: pin the world
[2013-02-11 20:35:15 -0500] geekbri: PIN ALL THE THINGS!
[2013-02-11 20:35:38 -0500] jtimberman: in case it was ever unclear why we had hard dependency on the json gem, here's an example :)
[2013-02-11 20:35:38 -0500] geekbri: well i submitted a merge request to limit the json gem to <=1.7.6 although thats only a temporary fix
[2013-02-11 20:35:53 -0500] jtimberman: 1.7.6 has a security vulneraability tough right?
[2013-02-11 20:35:59 -0500] geekbri: seems so
[2013-02-11 20:36:07 -0500] geekbri: I posted some speculation about that on the ticket but
[2013-02-11 20:36:16 -0500] geekbri: I have a monster headache and im trying to replace some servers when I found this bug so
[2013-02-11 20:36:21 -0500] tomdzk: jtimberman: yes, would be good to update json use as described in the linked discussion
[2013-02-11 20:36:22 -0500] geekbri: kinda dual wielding at the momen t:)
[2013-02-11 20:40:18 -0500] timsmith: well my node is running again. Thanks for the help everyone
[2013-02-11 20:53:20 -0500] deed02392: hi guys easy question - I've made some changes to a _copy_ of the community php-fpm cookbook
[2013-02-11 20:53:31 -0500] deed02392: I've verified those changes work etc, and want to help everyone else out with a pull request
[2013-02-11 20:53:48 -0500] deed02392: but i'm not sure how to do that. I've tried a git status in /cookbooks/php-fpm but that seems to be accounting for all of my chef stuff not just php-fpm
[2013-02-11 20:54:58 -0500] jtimberman: geekbri: timsmith we're talking about CHEF-3863 in code review right now btw.
[2013-02-11 20:55:18 -0500] geekbri: jtimberman: If i didn't have a blistering headache and was busy putting out fires i'd hop in :)
[2013-02-11 20:56:05 -0500] timsmith: jtimberman: link?
[2013-02-11 20:58:24 -0500] jtimberman: timsmith: btm tweetered the hangout/youtube links a bit ago
[2013-02-11 21:00:01 -0500] geekbri: timsmith: Opscode Chef code review, join: http://bit.ly/156Pb1F, watch: http://youtu.be/jp5GqSxnNnA #opschef
[2013-02-11 21:01:30 -0500] deed02392: anyone?
[2013-02-11 21:01:43 -0500] deed02392: i'm assuming for someone knowledgable with git this is simple
[2013-02-11 21:01:45 -0500] deed02392: i am new to it
[2013-02-11 21:02:39 -0500] Babar: deed02392: depends how big your changes are
[2013-02-11 21:02:52 -0500] deed02392: added a file, changed two
[2013-02-11 21:02:59 -0500] deed02392: Babar
[2013-02-11 21:03:17 -0500] Babar: 'cause the full way is to fork it, add your fork as a new remote, commit, push to your new remote, and then do a pull request with that
[2013-02-11 21:03:35 -0500] btm: Opscode cookbook code review: join: http://bit.ly/1286Zd8, watch: http://youtu.be/r5ApIPY8wH4 #opschef
[2013-02-11 21:04:19 -0500] deed02392: yeah I've been told that before but I don't know specific commands to make that happen Babar
[2013-02-11 21:04:30 -0500] deed02392: as I said, I had a go with git but it seems to want to just refer to all my cookbooks changes
[2013-02-11 21:04:50 -0500] deed02392: and all those terms you just said mean little to me
[2013-02-11 21:05:04 -0500] Babar: deed02392: just tell it the directory. if you need a walkthrough, that's going to be painful
[2013-02-11 21:05:13 -0500] deed02392: i want to help out the chef community but I don't want to spend too much time on that, is there not just a simple step by step on how to do this
[2013-02-11 21:06:11 -0500] tomdzk: deed02392: try git diff --no-prefix <cookbook folder>, does the output of that look right ?
[2013-02-11 21:06:34 -0500] Babar: the easiest: you go to github on the cookbook, you click: Fork. Then you have your own fork. You git clone that, then you rsync your modified dir (the old one) on top of it, then you git add * && git commit
[2013-02-11 21:06:48 -0500] Babar: just a git push & clicking on pull request away.
[2013-02-11 21:07:19 -0500] Babar: there might be easier ways with github's tools, but I never use those unless it's like a very small change
[2013-02-11 21:07:25 -0500] deed02392: hmm i get no output tomdzk
[2013-02-11 21:07:31 -0500] cschneid: trying to fix today's rails+json issue and chef 10.12.0 locks json as json (<= 1.6.1, >= 1.4.4).  Is that right to lock to less-than?
[2013-02-11 21:07:52 -0500] geekbri: cschneid: you should be able to do json <= 1.7.6
[2013-02-11 21:07:53 -0500] deed02392: hmm ok Babar, because of my unfamiliarity with git I've just been using knife to deal with cookbooks
[2013-02-11 21:08:03 -0500] geekbri: cschneid: although I only tested that as long as chef 10.16.6
[2013-02-11 21:08:06 -0500] deed02392: so I assume that's doing all the git pulling and what-not in the background
[2013-02-11 21:08:07 -0500] geekbri: long = low
[2013-02-11 21:08:16 -0500] deed02392: if I do a git pull manually will that confuse things in my chef-repos?
[2013-02-11 21:08:16 -0500] cschneid: geekbri: ahh, I wonder if we're just really old on chef then?  Ugh... hmm
[2013-02-11 21:08:34 -0500] geekbri: cschneid: 10.12 is fairly old.
[2013-02-11 21:08:35 -0500] deed02392: git seems like something that could get very messy if i'm not careful
[2013-02-11 21:08:42 -0500] tomdzk: deed02392: try what Babar said, copy your changed files into a separate git clone of the cookbook
[2013-02-11 21:08:45 -0500] cschneid: geekbri: if I go to 10.16, what will break on me
[2013-02-11 21:08:48 -0500] cschneid: or whatever is newer
[2013-02-11 21:09:10 -0500] geekbri: cschneid: that's a great question, i dont know.  For me 10.12 -> 10.16 broke a couple of our cookbooks. Although they were uncommon use cases I think
[2013-02-11 21:09:15 -0500] deed02392: somewhere not under my chef repos tomdzk ?
[2013-02-11 21:09:30 -0500] tomdzk: deed02392: yep, somewhere else entirely
[2013-02-11 21:09:30 -0500] geekbri: cschneid: the newest in the 10 series is 10.20, and chef 11 was released as well
[2013-02-11 21:09:35 -0500] cschneid: saw chef 11
[2013-02-11 21:09:36 -0500] deed02392: ok sounds good
[2013-02-11 21:09:44 -0500] cschneid: probably don't want to go up that path today for a security issue
[2013-02-11 21:09:49 -0500] deed02392: i'll try that now
[2013-02-11 21:09:53 -0500] tomdzk: deed02392: you fork the cookbook on github, then you clone it to somewhere on your machine
[2013-02-11 21:10:00 -0500] cschneid: but I'll bump it to newest chef 10.20, and run a test chef against a server and see what happens
[2013-02-11 21:10:03 -0500] cschneid: thanks
[2013-02-11 21:10:12 -0500] mshilling: coderanger:  the tag thing worked out perfectly.  thanks for that.
[2013-02-11 21:11:25 -0500] zooz: hi people
[2013-02-11 21:11:49 -0500] zooz: what is stored in postgresql db in chef 11 server/
[2013-02-11 21:11:53 -0500] zooz: ?*
[2013-02-11 21:14:37 -0500] deed02392: ok cool I've got a fork cloned
[2013-02-11 21:14:48 -0500] deed02392: what did oyu mean by rsyncing the files Babar ?
[2013-02-11 21:14:53 -0500] Kzim: hi
[2013-02-11 21:15:05 -0500] deed02392: I've used rsync before but just do a copy and it will overwrite everything?
[2013-02-11 21:15:20 -0500] deed02392: or does it offer some sort of smart diffing feature
[2013-02-11 21:15:27 -0500] Babar: yes. The idea is to copy over your "old" cookbook folder
[2013-02-11 21:15:37 -0500] deed02392: all right
[2013-02-11 21:16:06 -0500] Babar: so like: rsync -av /path/to/you/old/cookbook/ /path/to/your/new/one/
[2013-02-11 21:16:09 -0500] Kzim: i didn't catch how to override an array attributes and avoid merge or a last not mergin all the value of a list. any help please ?
[2013-02-11 21:18:31 -0500] rava: can't seem to get chef to reindex, though the server is up and hosts can run the chef-client and able to pull dat adown. running knife index rebuild gives me a server returned error message
[2013-02-11 21:19:39 -0500] rava: getting this in the server log: https://gist.github.com/anonymous/4757715
[2013-02-11 21:20:22 -0500] behemphi: Good day Chefs
[2013-02-11 21:20:36 -0500] rava: trying to rebuild the index because environment attributes don't seem to be applying to the node
[2013-02-11 21:20:43 -0500] behemphi: I am having trouble wrapping my head around only_if in this block:
[2013-02-11 21:20:44 -0500] behemphi:  24:   bash "Double Tap on microwave" do
[2013-02-11 21:20:44 -0500] behemphi:  25:     user "root"
[2013-02-11 21:20:45 -0500] behemphi:  26:     cwd "/tmp"
[2013-02-11 21:20:45 -0500] behemphi:  27:     code <<-EOH
[2013-02-11 21:20:45 -0500] behemphi:  28:       pkill -U microwave
[2013-02-11 21:20:45 -0500] behemphi:  29:     EOH
[2013-02-11 21:20:46 -0500] behemphi:  30:     only_if { `ps -ef | grep microwav[e]` }
[2013-02-11 21:20:46 -0500] behemphi:  31:   end
[2013-02-11 21:21:16 -0500] behemphi: I would think that would only run if the `ps -ef | grep microwav[e]` returns 0
[2013-02-11 21:21:23 -0500] behemphi: but that is not the case
[2013-02-11 21:21:27 -0500] behemphi: what am I missing?
[2013-02-11 21:21:52 -0500] rava: what's the exit status of that command?
[2013-02-11 21:22:31 -0500] leifmadsen: for me the value is 1 when nothing is returned
[2013-02-11 21:23:13 -0500] behemphi: correct
[2013-02-11 21:23:24 -0500] behemphi: sorry, thx @leifmadsen, that is right
[2013-02-11 21:23:43 -0500] behemphi: that expression returns 1 if grep returns nothing
[2013-02-11 21:24:01 -0500] rava: right, so the block won't execute
[2013-02-11 21:24:02 -0500] leifmadsen: right
[2013-02-11 21:24:03 -0500] behemphi: so that says (I think) if nothing is returned by grep, then do nothing
[2013-02-11 21:24:07 -0500] behemphi: but it is
[2013-02-11 21:24:08 -0500] rava: right
[2013-02-11 21:24:10 -0500] leifmadsen: maybe you want not_if
[2013-02-11 21:24:40 -0500] leifmadsen: (or perhaps a ! to inverse the value)
[2013-02-11 21:24:43 -0500] behemphi: I don't think so @leifmadsen but I did try
[2013-02-11 21:24:49 -0500] behemphi: however I do note this in the output
[2013-02-11 21:24:49 -0500] behemphi: bash("Double Tap on microwave") do
[2013-02-11 21:24:50 -0500] behemphi:   action "run"
[2013-02-11 21:24:50 -0500] behemphi:   retries 0
[2013-02-11 21:24:50 -0500] behemphi:   retry_delay 2
[2013-02-11 21:24:51 -0500] behemphi:   command "\"bash\"  \"/tmp/chef-script20130211-23723-16boiih\""
[2013-02-11 21:24:51 -0500] behemphi:   backup 5
[2013-02-11 21:24:51 -0500] behemphi:   cwd "/tmp"
[2013-02-11 21:24:52 -0500] behemphi:   returns 0
[2013-02-11 21:24:52 -0500] behemphi:   user "root"
[2013-02-11 21:24:52 -0500] behemphi:   code "      pkill -U microwave\n"
[2013-02-11 21:24:52 -0500] behemphi:   interpreter "bash"
[2013-02-11 21:24:53 -0500] behemphi:   cookbook_name "fm_one_time"
[2013-02-11 21:24:54 -0500] behemphi:   recipe_name "pre_2_4_100"
[2013-02-11 21:24:57 -0500] leifmadsen: behemphi: you should really use a pastebin
[2013-02-11 21:25:02 -0500] rava: behemphi: please use a gist?
[2013-02-11 21:25:12 -0500] leifmadsen: or that
[2013-02-11 21:25:18 -0500] behemphi: sorry about that
[2013-02-11 21:27:02 -0500] behemphi: Here it is @leifmadsen & @rava, again, sorry I know better!
[2013-02-11 21:27:03 -0500] behemphi: https://gist.github.com/behemphi/4757773
[2013-02-11 21:27:10 -0500] Babar: only_if { `ps -ef | grep microwav[e]` }  <-- this should be only_if "pgrep 'microwav[e]'"
[2013-02-11 21:27:10 -0500] mshilling: anyone know the knife search command to give all nodes with a tag set?
[2013-02-11 21:27:39 -0500] Babar: otherwise it's evaluated at compilation time. here it might not change much, but still.
[2013-02-11 21:27:42 -0500] behemphi: note line #32 of the gist where the only_if seems to become a comment
[2013-02-11 21:28:39 -0500] deed02392: hooray my pull request is pending!
[2013-02-11 21:28:42 -0500] deed02392: thanks Babar, tomdzk
[2013-02-11 21:28:52 -0500] tomdzk: deed02392: nice !
[2013-02-11 21:30:33 -0500] msch: is it possible to do chmod +X via the directory resource?
[2013-02-11 21:30:50 -0500] leifmadsen: you can use mode certainly
[2013-02-11 21:31:24 -0500] msch: leifmadsen: so i can just do director ".." do ; mode "u+X" ; end
[2013-02-11 21:31:25 -0500] msch: ?
[2013-02-11 21:31:34 -0500] msch: (and recursive true of course)
[2013-02-11 21:31:40 -0500] Babar: no.
[2013-02-11 21:31:46 -0500] leifmadsen: pretty sure you need to use an octal number
[2013-02-11 21:31:56 -0500] msch: then I can't do +X can I?
[2013-02-11 21:31:56 -0500] Babar: recursive is for directory creation. Nothing else.
[2013-02-11 21:32:07 -0500] leifmadsen: you could use an execute
[2013-02-11 21:32:10 -0500] msch: Babar: oh i thought it was for setting the mode too
[2013-02-11 21:32:14 -0500] Babar: you can ensure ONE directory has +X.
[2013-02-11 21:32:32 -0500] Babar: but it won't ensure that anything _below_ it has it
[2013-02-11 21:32:34 -0500] msch: ok yeah i'll go with the execute. i just dislike that I see it run on every chef run
[2013-02-11 21:32:42 -0500] Babar: recursive == mkdir -p
[2013-02-11 21:32:44 -0500] leifmadsen: right
[2013-02-11 21:32:55 -0500] msch: ah ok. got it
[2013-02-11 21:32:56 -0500] msch: thanks!
[2013-02-11 21:41:17 -0500] Kzim: what replace  !merge in chef 11 please
[2013-02-11 21:42:46 -0500] Amphibulus: Hi, I'm new to chef, I know we can edit attributes in json format, but when we see in cookbooks like in ruby like node.set, where do we use those  line and how I tell I want those attributes to be specific to a particular node?
[2013-02-11 21:43:16 -0500] bluepojo: Amphibulus: node.set is used in recipes
[2013-02-11 21:43:37 -0500] bluepojo: Amphibulus: so, if you calculate a value for a node attribute during a recipe run, you can set it to the node and node.save
[2013-02-11 21:44:18 -0500] Amphibulus: if I have node1 and node2 and I want to set different attributes, how I do in recipe?
[2013-02-11 21:44:56 -0500] bluepojo: the recipe will run on each node independently, so you'll have to calculate the value based on the information available on the node object.
[2013-02-11 21:45:07 -0500] bluepojo: however, if you are just trying to set 2 different values, just knife node edit
[2013-02-11 21:45:13 -0500] bluepojo: if they values are static
[2013-02-11 21:45:15 -0500] bluepojo: not dymanic
[2013-02-11 21:45:33 -0500] Amphibulus: ok, node object I have not play with that yet
[2013-02-11 21:45:47 -0500] bluepojo: I just mean "node" in recipes
[2013-02-11 21:45:54 -0500] bluepojo: like you call #set on node
[2013-02-11 21:45:56 -0500] Amphibulus: objects are in databags?
[2013-02-11 21:45:59 -0500] bluepojo: no
[2013-02-11 21:46:03 -0500] bluepojo: in a recipe
[2013-02-11 21:46:06 -0500] miah: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-02-11 21:46:07 -0500] bluepojo: you have an object called "node"
[2013-02-11 21:46:26 -0500] bluepojo: it has all of the information about the node and attributes it inherits from roles and environments
[2013-02-11 21:46:31 -0500] bluepojo: and default attributes
[2013-02-11 21:47:32 -0500] Amphibulus: if I want to set roles attributes in recipes, how to do so? so if I have 2 different roles we 2 set a static attributes
[2013-02-11 21:47:54 -0500] Amphibulus: *roles with 2
[2013-02-11 21:48:17 -0500] anthroprose: anyone know how I can get Chef11 to honor the run_command_stderr_timeout and run_command_stdout_timeout options in my boostrapping knife.rb?
[2013-02-11 21:51:01 -0500] Amphibulus: bluepojo, I think I got it, we have to set them in the roles folder
[2013-02-11 21:51:17 -0500] bluepojo: ah yeah, roles will serve that purpose
[2013-02-11 21:56:54 -0500] jubilo: So... if I install chef server 10.18.2, why would knife --version show Chef: 11.2.0 ?
[2013-02-11 21:57:46 -0500] jubilo: I'm noticing because trying to create a node and/or a client is throwing an error:
[2013-02-11 21:57:49 -0500] jubilo: ERROR: knife encountered an unexpected error
[2013-02-11 21:57:52 -0500] jubilo: This may be a bug in the 'client create' knife command or plugin
[2013-02-11 21:57:54 -0500] jubilo: Please collect the output of this command with the `-VV` option before filing a bug report.
[2013-02-11 21:57:58 -0500] jubilo: Exception: NoMethodError: undefined method `save' for #<Hash:0x7f182d417b10>
[2013-02-11 21:58:09 -0500] jubilo: and is it possible to install knife separately?
[2013-02-11 21:58:22 -0500] stoked: Having trouble with the iis cookbook
[2013-02-11 21:58:41 -0500] stoked: Seems like the eula spent get accepted properly
[2013-02-11 21:58:48 -0500] stoked: Doesn't
[2013-02-11 21:59:47 -0500] tomdzk: jubilo: are you running knife on the chef server or on some other machine ?
[2013-02-11 22:00:06 -0500] jubilo: at the moment I'm running it as a non-privileged user on the chef server.
[2013-02-11 22:00:40 -0500] jubilo: however, this has worked on another chef server a couple of weeks ago, so I'm not sure what's happening.
[2013-02-11 22:00:45 -0500] nroose: Hi.  New to chef.  Having a little confusion about fqdn.  If I do `ohai | grep fqdn` I get "fqdn": "test.x.local", but if I do `knife show test.x` I get "FQDN: test.x.com".  Can someone tell me how the FQDN gets set in knife and whether it matters?  Thanks!!!
[2013-02-11 22:00:46 -0500] tomdzk: jubilo: how did you install chef ?
[2013-02-11 22:01:34 -0500] jubilo: apt-get install chef chef-server-api chef-expander (using deb http://apt.opscode.com/ precise-0.10 main in
[2013-02-11 22:01:35 -0500] Kzim: is there a way to avoid array merge with default attributes please ?
[2013-02-11 22:01:37 -0500] jubilo: 1.  /etc/apt/sources.list.d/opscode.list 2. mkdir -p /etc/apt/trusted.gpg.d
[2013-02-11 22:01:39 -0500] jubilo: erm, sorry
[2013-02-11 22:01:41 -0500] jubilo: 1.  /etc/apt/sources.list.d/opscode.list 2. mkdir -p /etc/apt/trusted.gpg.d
[2013-02-11 22:01:45 -0500] jubilo:  /etc/apt/sources.list.d/opscode.list
[2013-02-11 22:02:27 -0500] tomdzk: jubilo: does 'gem list chef' show anything for the user you're running knife with ?
[2013-02-11 22:03:01 -0500] jubilo: *** LOCAL GEMS ***
[2013-02-11 22:03:02 -0500] jubilo: chef (11.2.0)
[2013-02-11 22:03:05 -0500] jubilo: yep, look at that
[2013-02-11 22:03:21 -0500] tomdzk: now there's your problem ;)
[2013-02-11 22:03:24 -0500] jubilo: indeed
[2013-02-11 22:03:34 -0500] jubilo: now what I can't figure out is how the chef gem is getting installed
[2013-02-11 22:03:50 -0500] jubilo: I was deliberately avoiding the gem install process in favor of apt-get
[2013-02-11 22:04:08 -0500] jubilo: unless there's something in apt-get that's using gem to install the server?
[2013-02-11 22:04:27 -0500] jubilo: and the real question: if I delete the gem is it going to completely screw the installation?
[2013-02-11 22:05:34 -0500] tomdzk: jubilo: I haven't used the debian package, but you could download the .deb file manually and have a look at it, e.g. on a debian/ubuntu machine use less, dpkg -c, and friends on it
[2013-02-11 22:06:22 -0500] jubilo: yeah, I'm thinking that might be the way
[2013-02-11 22:06:27 -0500] tomdzk: jubilo: you could also check the timestamps of the installations of the gem and chef-server to see if they were installed around the same time or not
[2013-02-11 22:07:00 -0500] steviep: howdy
[2013-02-11 22:07:13 -0500] steviep: in reference to this doc -- http://wiki.opscode.com/display/chef/Yum+Package+Resource
[2013-02-11 22:07:25 -0500] steviep: is there a way to tell yum which repository to use when using the package or yum_package command
[2013-02-11 22:07:40 -0500] jubilo: tomdzk: thanks
[2013-02-11 22:07:49 -0500] steviep: the docs would lead me to believe you can do it using the options attribute
[2013-02-11 22:07:59 -0500] steviep: but that doesn't appear to actually work
[2013-02-11 22:08:39 -0500] tomdzk: steviep: check out the yum cookbook: https://github.com/cookbooks/yum
[2013-02-11 22:09:10 -0500] steviep: so that lets you manage repositories
[2013-02-11 22:09:15 -0500] steviep: more so than packages?
[2013-02-11 22:09:37 -0500] tomdzk: steviep: you'd generally register additional repositories first (yum_repository) and then use yum_package (or package)
[2013-02-11 22:09:52 -0500] steviep: yeah, I have the repository registered, but I have it defaulted to disabled
[2013-02-11 22:10:05 -0500] steviep: and I just need to install a select few of packages from the repository
[2013-02-11 22:10:13 -0500] steviep: so I don't want to enable it, install, then disable it
[2013-02-11 22:10:23 -0500] steviep: when I would think you can just pass the argument to yum using yum_package
[2013-02-11 22:10:49 -0500] tomdzk: steviep: you could add the repo, install the package, then remove the repo ?
[2013-02-11 22:11:14 -0500] steviep: yeah... that's kinda hacky tho, because for a period the repository will be enabled for the system
[2013-02-11 22:11:17 -0500] nroose: Hey, can anyone tell me how to set fqdn and whether it matters?  Thanks!
[2013-02-11 22:12:40 -0500] tomdzk: steviep: you can always exec yum directly (yum --disablerepo, --enablerepo)
[2013-02-11 22:12:47 -0500] steviep: yeah that may be the ticket
[2013-02-11 22:12:57 -0500] steviep: the docs show you can pass the options attribute
[2013-02-11 22:12:59 -0500] steviep: " options   Add additional options to yum (eg: enable/disable repos, disable gpg checks) "
[2013-02-11 22:13:04 -0500] steviep: but that doesn't work I guess
[2013-02-11 22:13:24 -0500] Ed_: Chef 11 question. We've been using the chef-server cookbook on our chef 10 chef servers. Is there a similar cookbook for chef 11?
[2013-02-11 22:16:39 -0500] tomdzk: Ed_: it doesn't work for chef 11 ?
[2013-02-11 22:18:00 -0500] Ed_: tomdzk - the existing chef server cookbook default recipe wants to run maintenance on couchdb. There is no couchdb in chef 11 - so it breaks
[2013-02-11 22:19:34 -0500] tomdzk: Ed_: maybe try master of the cookbook (not 1.1.0) ?
[2013-02-11 22:21:34 -0500] Ed_: <tomdzk> Yup - you are correct. Thanks!
[2013-02-11 22:27:25 -0500] iverson0881: hmm
[2013-02-11 22:27:28 -0500] iverson0881: anyone seen this before?
[2013-02-11 22:27:35 -0500] iverson0881:  /var/lib/gems/1.9.1/gems/chef-11.2.0/lib/chef/knife.rb:560:in `delete_object': undefined method `destroy' for #<Hash:0x0000000287db40> (NoMethodError)
[2013-02-11 22:31:05 -0500] jtimberman: Ed_: to elaborate, the management of the chef server is primarily done with 'chef-server-ctl reconfigure' rather than running chef-client on it.
[2013-02-11 22:32:34 -0500] Ed_: <jtimberman> thanks for the update
[2013-02-11 22:32:39 -0500] tomdzk: jtimberman: having chef-server be a node in itself is useful however for running recipes on it, e.g. we use that for backup stuff
[2013-02-11 22:33:04 -0500] tomdzk: and monitoring
[2013-02-11 22:34:11 -0500] steviep: http://tickets.opscode.com/browse/CHEF-2427
[2013-02-11 22:34:22 -0500] steviep: looks like that might fix my --enablerepos/disablerepo thing
[2013-02-11 22:34:27 -0500] steviep: if I upgrade to 10.18+
[2013-02-11 22:37:27 -0500] jubilo: update on knife issues: the problem was installing the knife-rackspace gem, which installed the chef 11.2 gem.
[2013-02-11 22:38:00 -0500] jubilo: next step is to contact rackspace and see if i can force the version to downgrade, or something.
[2013-02-11 22:40:10 -0500] databus23: jtimberman: Are you already working on http://tickets.opscode.com/browse/COOK-2353 or is it worth looking into providing a pull request?
[2013-02-11 22:47:50 -0500] javmorin: I realize I am a bit of a broken record here, but is there any plans for an OHAI update in the near future? There is a 'fix provided' issue which is preventing me from being able to install the current omnibus distributions
[2013-02-11 22:49:17 -0500] jeremy_carroll: Anybody know the difference between Chef Private and Chef open Source? Could not find a link with the breakdown
[2013-02-11 22:52:27 -0500] timsmith: private chef is an opscode setup copy of Chef with additional goodies setup within your datacenter
[2013-02-11 22:52:52 -0500] jeremy_carroll: Does it have the exact same features as Open Source chef tho?
[2013-02-11 22:53:07 -0500] timsmith: it's more like hosted chef, but in your datacenter
[2013-02-11 22:53:14 -0500] timsmith: similar if not the same feature set
[2013-02-11 22:53:21 -0500] cwj: jeremy_carroll: the single biggest difference i am aware of is the access control lists
[2013-02-11 22:53:25 -0500] timsmith: so it would be more than open source chef
[2013-02-11 22:53:37 -0500] timsmith: you get the improved UI as well right?
[2013-02-11 22:53:39 -0500] cwj: jeremy_carroll:  http://wiki.opscode.com/display/chef/Hosted+Chef+Authorization
[2013-02-11 22:54:37 -0500] jeremy_carroll: cwj: Open Source chef have a UI? or is that only private / hosted chef? Is the authorization the only difference?
[2013-02-11 22:55:53 -0500] cwj: im not aware that the UI differs significantly between open source and private/hosted
[2013-02-11 22:56:03 -0500] cwj: but i do not rely on the UI
[2013-02-11 22:56:21 -0500] rava: looking for input on this: i've got a cookbook that installs a vendor's product that doesn't bundle a pkg it depends on, and i need to install 2 different versions of the vendor product, which uses different versions of the dependency. i have a cookbook to install the dependency, but am curious where style dictates to put the conditional and attributes to look for
[2013-02-11 22:56:47 -0500] jeremy_carroll: cwj: Cool. Thanks for the info.
[2013-02-11 22:58:16 -0500] DrVonNostren: is this the most up to date writeup for configuring chef workstation? http://wiki.opscode.com/display/chef/Workstation+Setup+for+CentOS%2C+Red+Hat%2C+Fedora
[2013-02-11 22:59:15 -0500] manimal_: dont quote me but from what i read hosted chef webui is different than open source webui and opensource webui might be deprecated??
[2013-02-11 23:00:40 -0500] rava: guess better way to put it, is it bad form to overwrite node attributes in a recipe?
[2013-02-11 23:06:31 -0500] mattray: manimal_: there's some concern about the level of support the open source webui gets, since we don't use it.
[2013-02-11 23:07:00 -0500] mattray: manimal_: "we" being Opscode. That said, the majority of folks have said they're very in favor of having it
[2013-02-11 23:07:01 -0500] tpot__: private chef has partial_search, which i don't believe is part of open source chef yet
[2013-02-11 23:07:09 -0500] mattray: tpot__: it's in Chef 11
[2013-02-11 23:07:17 -0500] tpot__: yay (-:
[2013-02-11 23:07:21 -0500] tpot__: because it rocks
[2013-02-11 23:08:11 -0500] mattray: javmorin: it keeps getting back-burnered by ruby and rails issues
[2013-02-11 23:09:03 -0500] tigerjon: :-P
[2013-02-11 23:09:22 -0500] mattray: tigerjon: hence the debate about deprecating webui.
[2013-02-11 23:09:27 -0500] javmorin: ah.. I see. I've been watching the ticket for the fix confirmation and had been starting to wonder if anyone was home :-)
[2013-02-11 23:09:44 -0500] mattray: javmorin: I want it too, all the openstack stuff is waiting on it
[2013-02-11 23:10:02 -0500] mattray: and hp
[2013-02-11 23:10:09 -0500] jmickle: ruby in general is a bad language plus the fact that its "interpreted" makes it not ideal
[2013-02-11 23:10:39 -0500] jmickle: Partly why and mat tray don't hate me for saying it.. but CFEngine is actually globs faster
[2013-02-11 23:10:41 -0500] javmorin: mattray: is there anything us contributors can help with?
[2013-02-11 23:11:03 -0500] jmickle: but i still V3 chef
[2013-02-11 23:11:07 -0500] jmickle: <3 *
[2013-02-11 23:11:09 -0500] mattray: jmickle: there are no "bad" languages, Ruby's just having some growing pains
[2013-02-11 23:11:28 -0500] Twirrim: clearly mattray hasn't used BrainFuck or Whitespace ;)
[2013-02-11 23:11:34 -0500] mattray: indeed I have
[2013-02-11 23:11:54 -0500] mattray: Twirrim: I worked with a guy who won the obfuscated Perl contest with a BrainFuck compiler
[2013-02-11 23:12:01 -0500] jmickle: mattray: agree with that point exactly me saying its a bad language is merely a "high level arrogance" as to not start a language war in here :-P
[2013-02-11 23:12:26 -0500] mattray: Twirrim: it compiled and ran as C, C++, Perl and Brainfuck, written in Perl
[2013-02-11 23:13:43 -0500] jmickle: ha, ohhhhh perl
[2013-02-11 23:13:54 -0500] Twirrim: mattray: impressive
[2013-02-11 23:14:09 -0500] ranjibd:  i miss perl. :-( .
[2013-02-11 23:14:17 -0500] jmickle: ranjibd: i dont. :-P
[2013-02-11 23:14:40 -0500] iverson0881: i started getting this today, haven't made any changes to my ruby/chef environment
[2013-02-11 23:14:41 -0500] iverson0881: http://pastebin.com/j7ciGqrS
[2013-02-11 23:14:53 -0500] iverson0881: this is with 10.20.0
[2013-02-11 23:15:05 -0500] iverson0881: i also tried on a separate server with 11.2.0, and i get the same error
[2013-02-11 23:15:21 -0500] mattray: Twirrim: actually it was Befunge
[2013-02-11 23:15:48 -0500] mattray: http://www.foo.be/docs/tpj/issues/vol4_3/tpj0403-0017.html
[2013-02-11 23:15:52 -0500] jmickle: hmmmmm using chef 10 is the role default attributes still take precedence over recipe defaults?
[2013-02-11 23:15:54 -0500] rafaelmagu: Trying to load the dynect gem: Gem::LoadError: can't activate mime-types-1.19, already activated mime-types-1.20.1
[2013-02-11 23:16:22 -0500] ashp: c_t: not to brainfuck?
[2013-02-11 23:16:40 -0500] c_t: INTERCAL has a COME FROM operator at least
[2013-02-11 23:16:53 -0500] jmickle: oh jeez, why not go to cobalt instead? :-P
[2013-02-11 23:17:10 -0500] c_t: Chef in Chef would be pretty awesome too
[2013-02-11 23:17:11 -0500] c_t: https://github.com/ctdk/chef_lang
[2013-02-11 23:18:12 -0500] tomdzk: iverson0881: http://tickets.opscode.com/browse/CHEF-3863
[2013-02-11 23:18:41 -0500] jmickle: hmm anyone know why putting default attributes in a role file would not be getting set properly?
[2013-02-11 23:18:52 -0500] jmickle: the recipe defaults are still kicking in for nagios
[2013-02-11 23:18:58 -0500] jmickle: trying to change the warning levels
[2013-02-11 23:21:46 -0500] gmcinnes: ohai chefs.
[2013-02-11 23:21:56 -0500] iverson0881: tomdzk: thank you. was banging my head.
[2013-02-11 23:22:04 -0500] gmcinnes: has anything changed in chef 11 that would cause my data bags to be encrypted by default?
[2013-02-11 23:22:28 -0500] gmcinnes: I'm doing "knife data bag from file apps foo_app.json"
[2013-02-11 23:23:08 -0500] gmcinnes: and the databag is appearing on the server with different json than is on my local host. And that json has an "encrypted_data" key
[2013-02-11 23:24:19 -0500] rafaelmagu: How do I prevent Chef bootstrap from installing chef-11 gem?
[2013-02-11 23:24:24 -0500] rafaelmagu: I'm using Chef 10.18
[2013-02-11 23:25:56 -0500] rava: can i wrap one of the directives in a resource block in a conditional?
[2013-02-11 23:26:05 -0500] david415: hi
[2013-02-11 23:26:12 -0500] david415: i got a quick chef question...
[2013-02-11 23:26:26 -0500] mattray: gmcinnes: was this upgraded? that's really odd. Just one item or the entire data bag?
[2013-02-11 23:26:37 -0500] mattray: rafaelmagu: you're using the gems template?
[2013-02-11 23:26:44 -0500] rafaelmagu: Yeah
[2013-02-11 23:26:48 -0500] rafaelmagu: A custom version of it
[2013-02-11 23:26:51 -0500] david415: trying to create an LWRP with default value set to node attribute
[2013-02-11 23:26:59 -0500] gmcinnes: mattray:  just one item.  I didn't upgrade anything locally, but I'm using hosted chef
[2013-02-11 23:27:01 -0500] mattray: rava: inside? http://docs.opscode.com/chef/resources.html#conditional-execution
[2013-02-11 23:27:09 -0500] mattray: rava: outside use ruby
[2013-02-11 23:27:09 -0500] david415: however 'node' is out of scope in the resources file
[2013-02-11 23:27:14 -0500] david415: miah: you there?
[2013-02-11 23:27:22 -0500] mattray: gmcinnes: ping Support@opscode, that's weird
[2013-02-11 23:27:23 -0500] rava: something like this: https://gist.github.com/bd-erik/4758593
[2013-02-11 23:27:30 -0500] rafaelmagu: mattray: using chef-full, actually
[2013-02-11 23:27:40 -0500] rafaelmagu: But I've customised it to set the hostname properly for my instances
[2013-02-11 23:28:13 -0500] david415: any ideas of how to get the node into the resources scope?
[2013-02-11 23:28:48 -0500] mattray: rava: I think you'll need 2 resources, with the logic on the outside
[2013-02-11 23:28:49 -0500] Babar: rava: not sure you can do it like that, but you can put the result in a variable, and use that variable in the creates
[2013-02-11 23:29:01 -0500] mattray: rava: or what Babar said
[2013-02-11 23:29:14 -0500] rava: Babar: ahah! simple solution ftw
[2013-02-11 23:29:46 -0500] mattray: rafaelmagu: when you bootstrap you can pass
[2013-02-11 23:29:47 -0500] mattray: --bootstrap-version VERSION  The version of Chef to install
[2013-02-11 23:29:48 -0500] miah: david415: sup
[2013-02-11 23:29:55 -0500] rafaelmagu: Hmm
[2013-02-11 23:30:01 -0500] david415: miah: yo!
[2013-02-11 23:30:02 -0500] mattray: rafaelmagu: and use 10.20.0
[2013-02-11 23:30:19 -0500] miah: lwrp's are run before convergence. so you can't set a default in the resources based on node attributes.
[2013-02-11 23:30:20 -0500] mattray: rafaelmagu: that'll pass to the install.sh properly
[2013-02-11 23:30:33 -0500] miah: you'll just have to set it to a sensible default and override it in your execution of the lwrp in a recipe.
[2013-02-11 23:30:48 -0500] rafaelmagu: But why is the chef-client version reporting 10.18 (as expected) but the gem installed says 11?
[2013-02-11 23:31:12 -0500] jmickle: http://pastebin.com/aeyUR6dD
[2013-02-11 23:31:13 -0500] mattray: rafaelmagu: are you pathing to gem properly?
[2013-02-11 23:31:17 -0500] jmickle: anyone tell me whats wrong with this?
[2013-02-11 23:31:19 -0500] david415: miah: it's a default attribute for the lwrp
[2013-02-11 23:31:23 -0500] miah: right
[2013-02-11 23:31:25 -0500] jmickle: the recipe is just not picking these up
[2013-02-11 23:31:29 -0500] miah: still, you can't use a node's attributes.
[2013-02-11 23:31:31 -0500] mattray: rafaelmagu: maybe /opt/chef is 10.18 and gem isn't from that path?
[2013-02-11 23:31:40 -0500] miah: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2013-02-11 23:31:42 -0500] miah: learn it. love it.
[2013-02-11 23:31:44 -0500] mattray: rafaelmagu: /opt/chef/embedded/bin/gem list
[2013-02-11 23:31:48 -0500] david415: miah: ok!
[2013-02-11 23:31:59 -0500] miah: load resources comes before load attributes
[2013-02-11 23:32:00 -0500] miah: see ?
[2013-02-11 23:32:03 -0500] rafaelmagu: Hmm
[2013-02-11 23:32:11 -0500] rafaelmagu: mattray: that shows gem is 10.18
[2013-02-11 23:32:12 -0500] jmickle: anyone?
[2013-02-11 23:32:19 -0500] mattray: rafaelmagu: which gem
[2013-02-11 23:32:31 -0500] mattray: rafaelmagu: actually run that command "which gem"
[2013-02-11 23:32:37 -0500] rafaelmagu: chef (10.18.2)
[2013-02-11 23:33:05 -0500] DrVonNostren: why is my validation.pem file not in /etc/chef ? Trying to setup knife here. Thanks.
[2013-02-11 23:33:06 -0500] rafaelmagu: But the stacktrace shows /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.2.0/
[2013-02-11 23:33:17 -0500] mattray: rafaelmagu: oh...
[2013-02-11 23:33:37 -0500] mattray: rafaelmagu: are you using the omnibus_updater cookbook?
[2013-02-11 23:33:58 -0500] rafaelmagu: I am, but the problem appears past that
[2013-02-11 23:34:05 -0500] rafaelmagu: When calling a dynect_rr resource
[2013-02-11 23:34:09 -0500] rafaelmagu: Provided by the dynect cookbook
[2013-02-11 23:34:11 -0500] david415: miah: yeah i see what you mean...
[2013-02-11 23:34:20 -0500] rafaelmagu: Which uses chef_gem resource to load the dynect_rest gem
[2013-02-11 23:34:20 -0500] jmickle: mattray: does anything look wrong with this ? http://pastebin.com/aeyUR6dD
[2013-02-11 23:34:31 -0500] coolj: DrVonNostren: i had to run chef-server-ctl cleanse yes ; chef-server-ctl reconfigure; then it was in /etc/chef-server/chef-validator.pem iirc
[2013-02-11 23:34:43 -0500] mattray: jmickle: is that ruby or json?
[2013-02-11 23:34:48 -0500] jmickle: json
[2013-02-11 23:34:58 -0500] rafaelmagu: mattray: http://pastebin.com/zMLJvC6u
[2013-02-11 23:35:15 -0500] jmickle: mattray: using a json role file, and it won't pick up these overrides for the recipe
[2013-02-11 23:35:17 -0500] miah: david415: you can set a default of nil or just something sensible. yes. you'll have to supply the right information when you invoke the lwrp. but you should be doing that anyway.
[2013-02-11 23:35:46 -0500] DrVonNostren: coolj, looks like they are already in the chef-server dir, the wiki says otherwise.
[2013-02-11 23:36:00 -0500] DrVonNostren: thanks
[2013-02-11 23:36:01 -0500] david415: ok. makes sense
[2013-02-11 23:36:05 -0500] david415: thanks miah!
[2013-02-11 23:36:21 -0500] miah: np
[2013-02-11 23:36:21 -0500] mattray: jmickle: knife node show FOO -a nagios doesn't have them? knife role show YOURROLE has it and it's been applied to the node?
[2013-02-11 23:37:03 -0500] jmickle: ERROR: knife encountered an unexpected error
[2013-02-11 23:37:03 -0500] jmickle: This may be a bug in the 'node show' knife command or plugin
[2013-02-11 23:37:05 -0500] jmickle: Please collect the output of this command with the `-VV` option before filing a bug report.
[2013-02-11 23:37:05 -0500] jmickle: Exception: NoMethodError: private method `split' called for nil:NilClass
[2013-02-11 23:37:08 -0500] crazysim: what is a good way to check and install ia32-libs on a 64 bit system?
[2013-02-11 23:37:11 -0500] gmcinnes: mattray: I liked the jira instance better than this new ticket system
[2013-02-11 23:37:37 -0500] jmickle: mattray: they show in knife role show but i can't do a -a on a node since i moved to hosted chef
[2013-02-11 23:38:02 -0500] mattray: jmickle: why not? that just shows a particular attribute on the node
[2013-02-11 23:38:27 -0500] jmickle: mattray: not sure since we did the update of the clients and with knife it spits out the error about it being a possible bug
[2013-02-11 23:39:08 -0500] mattray: jmickle: I'd say talk to support@opscode.com
[2013-02-11 23:39:53 -0500] jmickle: mattray: will do for that one, any idea about this attributes issue though
[2013-02-11 23:40:52 -0500] mattray: jmickle: I'd start with a fresh node, verify the role has the attributes on the server, then apply the role to a node. chef-client, then look for the applied attributes with -a
[2013-02-11 23:40:58 -0500] jmickle: mattray: it to return on 1 server using -a node['nagios']['checks']['load']['critical']
[2013-02-11 23:41:04 -0500] jmickle: mattray: node[nagios][checks][load][critical]:
[2013-02-11 23:41:12 -0500] jmickle: doesn't seem to be populating in there
[2013-02-11 23:41:19 -0500] mattray: jmickle: you don't use node
[2013-02-11 23:41:32 -0500] mattray: just say "knife node show FOO -a nagios"
[2013-02-11 23:41:35 -0500] jmickle: ah
[2013-02-11 23:41:45 -0500] mattray: and that'll show the nagios block of attributes
[2013-02-11 23:41:58 -0500] jmickle: ah that works
[2013-02-11 23:42:04 -0500] jmickle: yeah it shows the recipe's values
[2013-02-11 23:42:06 -0500] jmickle: and not my overrides
[2013-02-11 23:43:08 -0500] jmickle: mattray: could it be that my role file includes other role's in its run list?
[2013-02-11 23:43:40 -0500] mattray: jmickle: all the attributes from all the roles will get evaluated
[2013-02-11 23:43:48 -0500] mattray: all that are applied to the node that is
[2013-02-11 23:43:58 -0500] mattray: so it's possible that another role is overriding it?
[2013-02-11 23:44:27 -0500] jmickle: mattray: got it we only include 1 other role of a base_server but that has no overrides in it
[2013-02-11 23:44:47 -0500] mattray: jmickle: so -a is empty of what you're looking for?
[2013-02-11 23:44:56 -0500] mattray: jmickle: did you run chef-client after applying the role?
[2013-02-11 23:45:31 -0500] jmickle: mattray:  yes -a returns back with the recipe's default attributes not what i am trying to override this particular role to. I ran chef-client -o "recipe[nagios::client]" on the node
[2013-02-11 23:46:05 -0500] mattray: jmickle: ding ding ding
[2013-02-11 23:46:15 -0500] mattray: -o doesn't persist to the server
[2013-02-11 23:46:21 -0500] jmickle: mattray: let me guess the -o doesn't pick those up?
[2013-02-11 23:46:22 -0500] jmickle: doh
[2013-02-11 23:47:03 -0500] jmickle: mattray: i can't run the full package right now because that particular server's recipe will restart the process we are in the process of refactoring it is there a way to persist with the -o?
[2013-02-11 23:48:14 -0500] mattray: jmickle: remove the stuff you don't want to touch from the node's run list and put the nagios::client in?
[2013-02-11 23:48:31 -0500] jmickle: mattray: got it, thanks for the help i did not know -o did that
[2013-02-11 23:48:32 -0500] mattray: add the stuff being refactored back later?

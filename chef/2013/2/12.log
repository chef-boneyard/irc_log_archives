[2013-02-12 00:00:00 -0500] DrVonNostren: is the wiki writeup for configuring a workstation now obsolete? What should I follow? Thanks.
[2013-02-12 00:00:53 -0500] mattray: DrVonNostren: I'd start here: http://docs.opscode.com/
[2013-02-12 00:01:20 -0500] mattray: DrVonNostren: if something's wrong there, it gets fixed by our doc writer
[2013-02-12 00:01:40 -0500] DrVonNostren: mattray: thanks.
[2013-02-12 00:08:40 -0500] ieslick: I'm experiencing my first reboot since the chef 11 upgrade and my old scripts are now failing, crashing a production system after fail-over
[2013-02-12 00:08:51 -0500] ieslick: INFO: [inet6] no default interface, picking the first ipaddress Chef Client failed. 0 resources updated
[2013-02-12 00:09:15 -0500] ieslick: Any hints as to how to track down this error?  Is this an Ohai problem?
[2013-02-12 00:10:47 -0500] manimal_: DrVonNostren i got a chef 11 workstation up and running no problem i dont think theres much different between 10 and 11 except 11 is using http://chefserver instead of chefserver:4000 if you keep seeing errors connecting to xxxxx:4000 then your knife.rb is probably not config right
[2013-02-12 00:12:25 -0500] manimal_: actually i think that might be where the docs break if i recall the 11 docs for setting up a workstation dont mention to change the chefserver address to http format instead of xxxx:4000 either that or i missed it
[2013-02-12 00:12:41 -0500] ieslick: This is a client AWS machine using hosted chef, not a workstation
[2013-02-12 00:12:50 -0500] DrVonNostren: im all sorts of confused, but after installing it on my centos box, and running, sudo chef-server-ctl reconfigure, should I have the knife utility already? Because im getting unrecognized command... and this is asking me to use it: http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually#InstallingChefServerManually-ConfiguretheCommandLineClient
[2013-02-12 00:13:12 -0500] manimal_: DrVonNostrenno, chef-server doesnt install knife
[2013-02-12 00:14:02 -0500] manimal_: are you installing chef-server on the workstation instead of chef-client or are you trying to configure the server as a workstation also?
[2013-02-12 00:15:13 -0500] manimal_: if you are configuring a box to be a workstation and cant run knife from teh command line you probably installed chef-server when you meant to install chef-client?
[2013-02-12 00:15:32 -0500] jmickle: ieslick: looks like the client will pick between ipv6 and ipv4 are you sure your ipv4 adapter is running properly
[2013-02-12 00:15:36 -0500] DrVonNostren: im trying to get a working server, workstation, so i can begin learning the basics
[2013-02-12 00:15:51 -0500] manimal_: DrVonNostren: all on the same box or different vms for each
[2013-02-12 00:16:01 -0500] DrVonNostren: differnt vms for each
[2013-02-12 00:16:16 -0500] manimal_: ok, install chef-server on one box, run chef-server-ctl reconfigure and then leave that box alone
[2013-02-12 00:16:34 -0500] manimal_: then on a workstation install chef-client and follow docs to configure as workstation
[2013-02-12 00:16:36 -0500] mattray: DrVonNostren: if you're just learning, why not use a free account on opscode.com to save the hassle of setting up the server
[2013-02-12 00:16:44 -0500] ieslick: I have to figure out why my bootstrap code is auto-loading Chef 11 instead of 10
[2013-02-12 00:16:47 -0500] DrVonNostren: manimal, okay, i have done that however i copied some .pem files into a ~/chef directory
[2013-02-12 00:16:55 -0500] ieslick: Everything else is identical
[2013-02-12 00:17:03 -0500] DrVonNostren: err .chef
[2013-02-12 00:17:05 -0500] ieslick: AMI, OS, etc
[2013-02-12 00:17:25 -0500] mattray: ieslick: add bootstrap-version 10.20 if that's the version you want
[2013-02-12 00:18:06 -0500] DrVonNostren: mattray: I suppose thats a reasonable idea, but boss wants to do it in house
[2013-02-12 00:18:07 -0500] ieslick: Ah, this is probably a aws-cfn-bootstrap script issue
[2013-02-12 00:18:10 -0500] manimal_: mattray: i think hes having probs setting up a workstation and/or node, server setup is pretty straighforward
[2013-02-12 00:18:32 -0500] manimal_: im a newb too and i went through the same exact things hes going through a few days ago, exact same path
[2013-02-12 00:18:37 -0500] manimal_: problem is the docs
[2013-02-12 00:19:53 -0500] mattray: manimal_: we'd appreciate any feedback on the docs: https://github.com/opscode/chef-docs
[2013-02-12 00:19:59 -0500] DrVonNostren: yes, i thought I had finished setting up the server, and had moved on to the workstation, but then i got to working with the .pem files and was following this guide: http://wiki.opscode.com/display/chef/Workstation+Setup+for+CentOS%2C+Red+Hat%2C+Fedora
[2013-02-12 00:20:39 -0500] mattray: DrVonNostren: jtimberman published this yesterday: jtimberman.housepub.org/blog/2013/02/10/install-chef-11-server-on-centos-6/
[2013-02-12 00:20:48 -0500] DrVonNostren: the create configuration folder  section takes me here: http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually#InstallingChefServerManually-ConfiguretheCommandLineClient
[2013-02-12 00:21:05 -0500] mattray: DrVonNostren: sounds like we need to purge more from the wiki
[2013-02-12 00:21:10 -0500] mhalligan: Are there any alternate cookbooks for sensu that I might not have found yet, besides the one that Sonian put out?
[2013-02-12 00:21:49 -0500] manimal_: DrVonNostren: when you install chef-client on the workstation, you will run knife configure -i, it will ask you where the pem files are
[2013-02-12 00:21:54 -0500] DrVonNostren: mattray: and that is on the server config page, so i went ahead and went back to the sever and started playing with .pem files as i thought i had missed a step
[2013-02-12 00:22:06 -0500] mattray: mhalligan: portertech would be the one to bug
[2013-02-12 00:22:35 -0500] manimal_: DrVonNostren: once you install the server there is not much to do, other than copying the pem files out of the /etc/chef-server folder to somewhere you can access them because you will need to copy some to the workstation when setting up chef-client
[2013-02-12 00:22:42 -0500] portertech: mhalligan: sensu/sensu-chef + something like portertech/chef-monitor
[2013-02-12 00:23:16 -0500] manimal_: DrVonNostren: when you run knife configure -i on the workstation its gonna ask for the location of admin.pem and validation.pem (on server its called chef-validator.pem)
[2013-02-12 00:23:22 -0500] DrVonNostren: okay so the .pem files need to be copied over to workstations and clients?
[2013-02-12 00:23:29 -0500] DrVonNostren: from the server
[2013-02-12 00:23:30 -0500] manimal_: no just the workstation to set up knife
[2013-02-12 00:23:45 -0500] DrVonNostren: okay .pem files are only needed on the workstation! thansk.
[2013-02-12 00:23:47 -0500] manimal_: the client nodes you can bootstrap from workstation nothing to do on client other than install OS and enable SSH
[2013-02-12 00:24:53 -0500] manimal_: once you setup the workstation and server you are done, everything else is done from command line on workstation no need to do stuff on client nodes with pems and stuff
[2013-02-12 00:25:00 -0500] mhalligan: portertech: Thanks I'll play around. the sonian one is pretty obtuse, and I'm hacking through chef-monitor now, but so far no love getting it to run cleanly. some of the things like the cloud/private_ip determination aren't liking me much, and it something else vital seemed to have a cookbook requirement of chef-monitor to be named "monitoring" though monitor seems to be the correct cookbook name.
[2013-02-12 00:25:15 -0500] mhalligan: trying to make sure I'm doing the sane thing before diving into the empty swimming pool
[2013-02-12 00:25:32 -0500] miah: mhalligan: are you necromancing a irc thread?
[2013-02-12 00:25:35 -0500] mhalligan: btw, thanks, I really like the idea of meta cookbooks like this
[2013-02-12 00:25:48 -0500] DrVonNostren: so ehh, for setting up the workstation, i should follow this? http://docs.opscode.com/install.html
[2013-02-12 00:26:41 -0500] mhalligan: miah: ?
[2013-02-12 00:26:45 -0500] miah: nevermind
[2013-02-12 00:26:48 -0500] mattray: DrVonNostren: please do, and complain with issues or pull requests on https://github.com/opscode/chef-docs
[2013-02-12 00:26:52 -0500] miah: my brain is experiencing technical difficulties
[2013-02-12 00:27:04 -0500] mhalligan: 'k
[2013-02-12 00:27:28 -0500] manimal_: DrVonNostren sort of, most of those instructions apply but they are referring to hosted chef, you dont have ORGANIZATION-validator.pem and stuff
[2013-02-12 00:28:23 -0500] mhalligan: the sensu-community-plugins cookbook just seems silly, I feel it should just be a sensu::community_plugins recipe (so I'm writing one)
[2013-02-12 00:28:30 -0500] DrVonNostren: okay, i will come back if i have probs.
[2013-02-12 00:28:41 -0500] DrVonNostren: thanks.
[2013-02-12 00:30:08 -0500] DrVonNostren: is it okay and normal to have more than one workstation?
[2013-02-12 00:30:36 -0500] manimal_: it is ok, but not needed, the workstation is basically where you're gonna be running command line stuff from if you arent using the webui
[2013-02-12 00:30:53 -0500] manimal_: maybe you need only 1 workstation, maybe you have 3 employees each need a workstation
[2013-02-12 00:31:25 -0500] manimal_: but theres no need to do the workstatio setup on regular nodes
[2013-02-12 00:32:38 -0500] manimal_: i have a linux box i ssh into and use as a workstation and i also setup my windows box as a workstation i can use from dos prompt
[2013-02-12 00:36:11 -0500] DrVonNostren: we just have multiple people who would need to be able to use it, so im thinking would multiple workstations make sense, or would a shared "workstation" vm work best
[2013-02-12 00:37:42 -0500] manimal_: if everyone working in linux you can share a box everyone ssh's into but everyones desktop pc can also be a workstation
[2013-02-12 00:37:55 -0500] manimal_: thats all your call
[2013-02-12 00:38:36 -0500] manimal_: jsut remember if you're multiple ppl creating or editing cookbooks recipes etc you gotta manage it all
[2013-02-12 00:38:44 -0500] DrVonNostren: okay, once i understand the workings better perhaps i can make such a call
[2013-02-12 00:42:43 -0500] DrVonNostren: manimal_: where do i find the knife.rb file? http://docs.opscode.com/install_step_files_download.html
[2013-02-12 00:43:13 -0500] manimal_: dont worry about downloading that, knife.rb is going to get created when you run knife configure -i on the workstation
[2013-02-12 00:43:28 -0500] manimal_: its gonna ask you where to put it prolly wanna choose ~/.chef
[2013-02-12 00:43:48 -0500] manimal_: you'll want the pem files in that same folder
[2013-02-12 00:44:27 -0500] manimal_: if succesful you should be able to run "knife client list" after and see a list
[2013-02-12 00:44:35 -0500] DrVonNostren: okay so on my server i have admin.pem, chef-webui.pem, chef-validator.pem im guessing from that page i want admin.pem and chef-validator.pem
[2013-02-12 00:45:30 -0500] DrVonNostren: i just can rsync those files from my server over to my ~/.chef directory on my workstation?
[2013-02-12 00:45:33 -0500] manimal_: yup.  its also gonna ask you for a username and an existing admin name (admin)...knife configure will be creating a new user for the workstation
[2013-02-12 00:46:04 -0500] manimal_: whatever you gotta do to get a copy on the workstation in ~/.chef
[2013-02-12 00:47:16 -0500] DrVonNostren: manimal_: the client installer will ask this?
[2013-02-12 00:48:00 -0500] manimal_: hmm just install the client and run knife configure -i and you will see what im talking about
[2013-02-12 01:24:22 -0500] bluepojo: Anyone have an idea why this happens: https://gist.github.com/bluepojo/4759262
[2013-02-12 01:24:25 -0500] bluepojo: when running knife node search
[2013-02-12 01:24:28 -0500] bluepojo: I get an error
[2013-02-12 01:24:33 -0500] bluepojo: -VV doesn't give any additional output
[2013-02-12 01:39:02 -0500] DrVonNostren: hi, trying to setup a workstation and following this http://docs.opscode.com/install_step_files_move.html but i dont know where to find my knife.rb file!
[2013-02-12 01:42:15 -0500] tomdzk: DrVonNostren: did you run knife configure -i on your workstation ? that will generate the knife.rb file (usually as ~/.chef/knife.rb for the user you ran the command as)
[2013-02-12 01:43:06 -0500] DrVonNostren: no i didnt, this writeup never mentions to do that: http://docs.opscode.com/install.html
[2013-02-12 01:43:13 -0500] DrVonNostren: tomdzk: thanks.
[2013-02-12 01:44:08 -0500] tomdzk: DrVonNostren: not sure about those instructions, but there is a step in there: http://docs.opscode.com/install_step_directory_create.html
[2013-02-12 01:44:31 -0500] tomdzk: and the first step here: http://docs.opscode.com/install_step_files_move.html, talks about copying the knife.rb file into that folder
[2013-02-12 01:44:46 -0500] tomdzk: after downloading it from the chef server
[2013-02-12 01:44:59 -0500] DrVonNostren: yes, but it never says how to generate it.
[2013-02-12 01:45:44 -0500] tomdzk: it mentions ORGANIZATION-validator.pem so I'd assume this is for hosted chef/private chef
[2013-02-12 01:46:11 -0500] DrVonNostren: gotcha, im new, was told to bring up any lacking in the writeups, so yea
[2013-02-12 01:46:31 -0500] iverson08811: any luck on http://tickets.opscode.com/browse/CHEF-3863 ? seemed to be out of options here :(
[2013-02-12 01:46:48 -0500] DrVonNostren: tomdzk: but you got me on the write track, appreciated
[2013-02-12 01:48:04 -0500] cwj: anyone using notifications with an 'application' resource (e.g. via application_python or application_ruby)?
[2013-02-12 01:48:51 -0500] cwj: wondering if i will have to subscribe to the deploy resource the application lwrp creates
[2013-02-12 01:53:34 -0500] bluepojo: fwiw, my error went away when I downgraded from 10.20 to 10.18.2
[2013-02-12 01:58:03 -0500] version2beta: I'm a little stuck and confused. I have a simple vagrant+chef solo setup with a git resource referencing "master" and yet when I ssh into the box, it's always in the "deploy" branch, not the "master" branch. How do I change this?
[2013-02-12 01:58:13 -0500] iverson08811: but doesn't 10.18.2 have its own set of issues which is why i upgraded to 10.20.0, i think it was net-ssh
[2013-02-12 01:58:22 -0500] iverson08811: bluepojo: but doesn't 10.18.2 have its own set of issues which is why i upgraded to 10.20.0, i think it was net-ssh
[2013-02-12 01:58:32 -0500] bluepojo: hm, I don't know for sure
[2013-02-12 01:58:43 -0500] bluepojo: all I know is I was getting strange node search errors with knife
[2013-02-12 01:58:48 -0500] bluepojo: that disappeared when I downgraded
[2013-02-12 01:58:57 -0500] bluepojo: https://gist.github.com/bluepojo/4759262
[2013-02-12 02:01:41 -0500] DrVonNostren: Please enter the location of the existing admin's private key? is this the chef-validator.pem that came from the server?
[2013-02-12 02:02:36 -0500] manimal_: DrVonNostren that is the admin.pem
[2013-02-12 02:03:25 -0500] iverson08811: bluepojo: yup im getting the same errorsdestroying my world right now :(
[2013-02-12 02:04:13 -0500] tomdzk: DrVonNostren: admin client's private key is webui.pem and validation key is validation.pem - knife should tell you the default locations on the chef server in the brackets as default values for these
[2013-02-12 02:05:57 -0500] DrVonNostren: thanks manimal_ . tomdzk, it puts the existing admings private key as /etc/chef/admin.pem
[2013-02-12 02:06:17 -0500] DrVonNostren: is this the directory on the workstation? or on the server?
[2013-02-12 02:06:35 -0500] DrVonNostren: cause on my workstation /etc/chef/admin.pem doesnt exist
[2013-02-12 02:06:37 -0500] manimal_: DrVonNostren its the directory on the workstation make it ~/.chef
[2013-02-12 02:06:44 -0500] DrVonNostren: and thats where im configuring knife at the moment
[2013-02-12 02:06:55 -0500] manimal_: next time you run knife its gonna look in this directory for its config and stuff
[2013-02-12 02:07:21 -0500] manimal_: which is what you are creating now
[2013-02-12 02:07:57 -0500] tomdzk: DrVonNostren: put the two pem files in a folder somewhere where that user can find it, e.g. in ~/.chef, and then give knife the local paths to them
[2013-02-12 02:08:19 -0500] DrVonNostren: okay, i set the location for the knife.rb file as /root/chef-repo/.chef is that reasonable?
[2013-02-12 02:08:32 -0500] DrVonNostren: or should it have been ~/.chef
[2013-02-12 02:08:42 -0500] tomdzk: is chef-repo a git repository ?
[2013-02-12 02:08:50 -0500] DrVonNostren: yes
[2013-02-12 02:08:58 -0500] tomdzk: then you prob. don't want to do that
[2013-02-12 02:09:03 -0500] tomdzk: just put them in ~/.chef
[2013-02-12 02:09:11 -0500] DrVonNostren: okay thanks.
[2013-02-12 02:15:18 -0500] DrVonNostren: just out of curiosity, why does the chef server install call the .pem files  chef-webui.pem instead of admin.pem and same for the chef-validator.pem
[2013-02-12 02:15:51 -0500] version2beta: Can anyone explain why the git resource always leaves me in the "deploy" branch even if I use "reference 'master'"?
[2013-02-12 02:28:33 -0500] manimal_: DrVonNostren mine was admin.pem and chef-validator....i dont remember getting asked for webui one
[2013-02-12 03:04:57 -0500] tbenz9: Hi everyone, has anyone tried to tie chef 11 server to LDAP?
[2013-02-12 03:09:48 -0500] tbenz9: Has anyone here even tried Chef 11 yet?
[2013-02-12 03:16:21 -0500] tbenz9: Anyone... ?
[2013-02-12 03:17:25 -0500] manimal_: what do you mean by tried? i got it installed and added nodes and roles to machines and stuff 2 days ago no problems doing basic stuff
[2013-02-12 03:19:22 -0500] tbenz9: Good for you, I just got it installed today.
[2013-02-12 03:19:44 -0500] tbenz9: Do you know where the chef-server configurations belong?
[2013-02-12 03:20:07 -0500] tbenz9: Specifically, I'm trying to use LDAP to authenticate and I can't seem to be able to.
[2013-02-12 03:20:19 -0500] manimal_: umm the .rb and pem files and stuff will sit in /etc/chef-solo
[2013-02-12 03:20:25 -0500] manimal_: i mean /etc/chef-server sorry
[2013-02-12 03:21:17 -0500] tbenz9: Perfect, thats what I thought, and it's called chef-server.rb correct?
[2013-02-12 03:22:07 -0500] tbenz9: Whenever I put my config in there it fails on the "chef-server-ctl reconfigure" command
[2013-02-12 03:22:17 -0500] manimal_: dont put anything in there
[2013-02-12 03:22:32 -0500] manimal_: right after chef-server install just run chef-server-ctl
[2013-02-12 03:22:53 -0500] manimal_: it will make it just work and you're done i think then you just log into the webui and change the default password
[2013-02-12 03:23:29 -0500] manimal_: theres nothing much to do on chef server install but install it and run chef-server-ctl reconfigure i think
[2013-02-12 03:23:59 -0500] tbenz9: yup, we were able to do all that.  Now we are trying to use LDAP as our authentication method and the /etc/chef-server/chef-server.rb fails every time we add the ldap lines.
[2013-02-12 03:24:45 -0500] tbenz9: to clarify, we edit /etc/chef-server/chef-server.rb and when we run chef-server-ctl reconfigure again it fails.
[2013-02-12 03:25:14 -0500] manimal_: so chef server runs without your modifications?
[2013-02-12 03:25:20 -0500] tbenz9: yes
[2013-02-12 03:25:48 -0500] manimal_: and chef-server.rb didnt exist until you added it right?
[2013-02-12 03:26:02 -0500] tbenz9: correct
[2013-02-12 03:27:09 -0500] manimal_: other than saying its prolly syntax or something i cant help much more
[2013-02-12 03:27:46 -0500] tbenz9: Do you know if the chef 10 documentation for LDAP is the same as the chef 11 docs?
[2013-02-12 03:32:27 -0500] manimal_: dont know havent played with ldap in either
[2013-02-12 03:44:11 -0500] venturecommunist: is there a resource to switch users?
[2013-02-12 03:46:37 -0500] tbenz9: Could you evaluate on "switch users" like from the web-ui?
[2013-02-12 03:47:43 -0500] venturecommunist: i've never seen the web-ui
[2013-02-12 03:49:03 -0500] tbenz9: ok, so what do you mean "switch users"?
[2013-02-12 03:49:19 -0500] venturecommunist: i mean that if i install a version of node.js as root then that version is not available to other users
[2013-02-12 03:49:30 -0500] venturecommunist: so i have to be that user to install the correct version of node.js
[2013-02-12 03:49:44 -0500] venturecommunist: not to mention you're not supposed to install node.js as root
[2013-02-12 03:51:03 -0500] venturecommunist: same problem with ruby on rails
[2013-02-12 03:52:07 -0500] venturecommunist: no wait actually RoR didn't work like that
[2013-02-12 03:55:53 -0500] yfeldblum: was cookbook shadowing removed in chef-11?
[2013-02-12 03:59:57 -0500] halcyonCorsair: can anyone point me to a description of open source chef-11's api authentication/authorization scheme?
[2013-02-12 04:00:55 -0500] tbenz9: Sorry bud, I got to go and I have no idea how to solve your problem... best of luck though
[2013-02-12 04:20:10 -0500] allaire: action :upgrade in package install the package if it's not installed, correct?
[2013-02-12 04:20:48 -0500] allaire: it's not a direct correlation with aptitude upgrade, which does not install the package if not present
[2013-02-12 04:20:58 -0500] yfeldblum: how do you configure chef-server 11? i don't see any /etc/chef-server/chef-server.rb files
[2013-02-12 04:21:48 -0500] manimal_: are you doing a basic install or trying to do something special/advanced?
[2013-02-12 04:24:56 -0500] allaire: Anybody?
[2013-02-12 04:27:14 -0500] yfeldblum: manimal_, asking me?
[2013-02-12 04:27:34 -0500] manimal_: yfeldblum yes
[2013-02-12 04:27:52 -0500] yfeldblum: manimal_, ubuntu-latest, installed the chef-server-11 .deb, ran `chef-server-ctl reconfigure`
[2013-02-12 04:28:06 -0500] yfeldblum: manimal_, that's it so far
[2013-02-12 04:28:11 -0500] manimal_: you're done hehe
[2013-02-12 04:28:17 -0500] manimal_: server should be up and running
[2013-02-12 04:28:27 -0500] yfeldblum: manimal_, not yet - there's one config item that's wrong
[2013-02-12 04:28:45 -0500] manimal_: i just installed 11 like 2 days ago, didnt have to change anything
[2013-02-12 04:29:43 -0500] manimal_: other than iptables rule for the webui
[2013-02-12 04:29:50 -0500] yfeldblum: manimal_, i'm looking at /etc/chef-server/chef-server-running.json and it has a bookshelf vip that is a hostname rather than an ip address
[2013-02-12 04:29:56 -0500] yfeldblum: manimal_, i need it to be an ip address
[2013-02-12 04:32:05 -0500] manimal_: i think you need a hostname there
[2013-02-12 04:32:38 -0500] manimal_: instructions say somewhere you need dns set up
[2013-02-12 04:34:11 -0500] yfeldblum: manimal_, bah
[2013-02-12 04:34:29 -0500] manimal_: i just made an entry in hosts
[2013-02-12 04:34:35 -0500] yfeldblum: manimal_, anyway, what i need is to figure out how to configure chef-server 11
[2013-02-12 04:36:42 -0500] yfeldblum: manimal_, using /etc/hosts for this is not something i want to do
[2013-02-12 04:37:30 -0500] yfeldblum: manimal_, http://wiki.opscode.com/display/chef/Chef+11+Server+Preview
[2013-02-12 04:37:45 -0500] yfeldblum: Chef Server is configured through the /etc/chef-server/chef-server.rb file. Standalone single-server configurations do not require custom configuration and can use the default values for everything.
[2013-02-12 04:37:45 -0500] yfeldblum: TODO - document configuration values
[2013-02-12 05:06:13 -0500] petecheslock: yfeldblum: here are the options - if you use the chef-server cookbook to install and configure chef11 - https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-02-12 05:07:25 -0500] yfeldblum: petecheslock, awesome
[2013-02-12 05:07:39 -0500] petecheslock: and here's the relevant entry in the cookbook - https://github.com/opscode-cookbooks/chef-server/blob/master/attributes/default.rb#L27  <-
[2013-02-12 05:08:09 -0500] petecheslock: i just tested this out today in vagrant, and that cookbook comes up nice and clean - had no issues - now just messing around with the config options
[2013-02-12 05:10:08 -0500] yfeldblum: petecheslock, any idea if the docs that say to modify /etc/chef-server/chef-server.rb are up-to-date? and what to put in there corresponding to the attributes file you linked
[2013-02-12 05:12:05 -0500] petecheslock: i'm guessing they are, only because that cookbook says so - and it's pretty recent
[2013-02-12 05:13:09 -0500] petecheslock: as for what to put in there - haven't got that far yet to set a "tunable" to see how the template writes out.
[2013-02-12 05:25:38 -0500] manimal_: in the webui using the editor to add an override attribute how do construct what to put in there? im a newb i dont know the sytax i know that its node['apache']['listen_ports'] in the docs...do i just put ['apache']['listen_ports']
[2013-02-12 05:41:37 -0500] yfeldblum: success!
[2013-02-12 05:57:29 -0500] manimal_: if i use knife node edit to change an attribute will it reset when chef-client connects to server again?
[2013-02-12 05:59:14 -0500] Mithrandir: not unless it's set in the recipe
[2013-02-12 05:59:58 -0500] manimal_: i dont know the proper way to edit the attribute in the role using webui
[2013-02-12 06:00:29 -0500] manimal_: which is where i want to set the attribute...
[2013-02-12 06:07:01 -0500] manimal_: how far off is this? {"defaults":{},"overrides":{apache:listen_ports:[80,443]}}
[2013-02-12 06:07:59 -0500] Mithrandir: I don't use the web ui, so not sure.
[2013-02-12 06:08:38 -0500] Mithrandir: but it's probably something like: {"defaults":{},"overrides":{ "apache": { "listen_ports" : [ "80", "443" ] } }
[2013-02-12 06:08:39 -0500] manimal_: if im changing the default port, im trying to use an override correct?
[2013-02-12 06:08:47 -0500] Mithrandir: yes, that sounds reasonable
[2013-02-12 06:09:13 -0500] manimal_: can you edit the role from teh command line to add that override attribute?
[2013-02-12 06:09:23 -0500] manimal_: if you can then i can see how it shows up in the web ui
[2013-02-12 06:09:48 -0500] manimal_: once i can get over this hurdle i know how to handle attributes and overrides basically
[2013-02-12 06:10:44 -0500] Mithrandir: knife role edit $role
[2013-02-12 06:16:55 -0500] manimal_: thanks, somethings wrong with my syntax tho when i edit role from cli and save it doesnt reflect in webui
[2013-02-12 06:19:25 -0500] Mithrandir: then the save should fail.
[2013-02-12 06:19:58 -0500] manimal_: my mistake, i see the value changed, but when i run chef-client on the webserver the port is not changing
[2013-02-12 06:20:08 -0500] manimal_: sorry newb here
[2013-02-12 06:41:11 -0500] BryanWB__: ohai chefs!
[2013-02-12 06:41:28 -0500] manimal_: Mithrandir i think you were correct
[2013-02-12 06:42:02 -0500] manimal_: {"defaults":{},"overrides":{"apache":{"listen_ports":[80,443]}}}
[2013-02-12 06:47:07 -0500] Mithrandir: it's probably "80", not 80.
[2013-02-12 06:47:10 -0500] Mithrandir: but either might work.
[2013-02-12 06:48:29 -0500] manimal_: hmm i set default site enable to true without quotes and it worked but it prolly working because of what types they are
[2013-02-12 06:48:36 -0500] Mithrandir: hm, ok.
[2013-02-12 06:48:50 -0500] manimal_: i should use the quotes tho
[2013-02-12 06:48:51 -0500] Mithrandir: (it's json, json is nominally javascript, javascript doesn't have ints, just floats, so your 80 might not be 80, but 79.99999999999953 or somesuch)
[2013-02-12 06:49:14 -0500] manimal_: i will take your word for it as i am clueless :)
[2013-02-12 06:50:48 -0500] manimal_: i edited the role via CLI, and looked at the override attributes in the webui and it cleans up the values you dont see the extra quotes and brackets and stuff in the webui so being a beginner it threw me off being displayed differently
[2013-02-12 06:51:37 -0500] Mithrandir: that sounds a bit silly
[2013-02-12 06:51:46 -0500] Mithrandir: I don't like the web ui much. :-)
[2013-02-12 06:53:55 -0500] manimal_: so i got a webserver role, i got a client it got applied to , i got attributes down, now on that particular box i wanted to open up ports 80 and 443 in iptables so i tried the apache::iptables recipe but is failing and i read somewhere its prolly gonna get abanding to use some other method?
[2013-02-12 06:54:13 -0500] manimal_: abandoned*
[2013-02-12 07:05:48 -0500] manimal_: anyone awake using cookbook simple_iptables?
[2013-02-12 07:09:34 -0500] BryanWB__: Mithrandir: now i recall that your irc handle is far different from your real name :)
[2013-02-12 07:10:01 -0500] Mithrandir: BryanWB__: it is. :-)
[2013-02-12 07:10:05 -0500] BryanWB__: Mithrandir: really do want to do a podcast on systemd at some point, it would be great to have u on
[2013-02-12 07:10:12 -0500] Mithrandir: BryanWB__: thanks for the chat at fosdem. :-)
[2013-02-12 07:10:27 -0500] BryanWB__: Mithrandir: tk u, since u were super busy w/ debian machinations
[2013-02-12 07:10:35 -0500] Mithrandir: BryanWB__: sure, I've been out with a bit of a cough and such, but getting back into it again now.
[2013-02-12 07:17:12 -0500] c_t: "Your name is Mithrandir? Are you related to Jeff Mithrandir by any chance?"
[2013-02-12 07:17:42 -0500] Aparna: I can see windows_batch resource used in server.rb recipe of mysql cookbooks on opscode. Can anybody please guide on where to find that resource definition? I can not get that LWRP in windows cookbooks
[2013-02-12 07:22:14 -0500] Aparna: can anyone one please guide me on how to use windows_batch resource? and what cookbooks i need for using this ?
[2013-02-12 07:41:17 -0500] manimal_: anyone able to show me how to get cookbook simple_iptables to allow http port 80 and 443 on a box? cant figure it out new to this stuff
[2013-02-12 07:50:42 -0500] BryanWB__: jtimberman: node.override should go in a recipe and node.set, node.default in the attributes of a cookbook?
[2013-02-12 07:50:49 -0500] BryanWB__: trying to recall from last ffs hangout
[2013-02-12 07:58:36 -0500] specialsauce: BryanWB__, i don't think that's right is it? override set and default can all be done at different levels according to the precedence rules - http://wiki.opscode.com/display/chef/Attributes
[2013-02-12 07:59:27 -0500] BryanWB__: specialsauce: jtimberman said that overrides should be done in recipes/* in recent foodfight iirc
[2013-02-12 07:59:38 -0500] BryanWB__: as a practice not a rule
[2013-02-12 07:59:42 -0500] specialsauce: ah ok, sorry
[2013-02-12 07:59:53 -0500] BryanWB__: specialsauce: np, i am trying to figure this out myself :)
[2013-02-12 08:00:11 -0500] BryanWB__: i can't remember what he said about node.set
[2013-02-12 08:02:04 -0500] manimal_: so i figurd out how to set/override attributes in a role, but how do i use "lwrp's" in my recipe?  I dont understand....  "Include the recipe simple_iptables somewhere in your run list, then use the LWRPs simple_iptables_rule and simple_iptables_policy in your recipes."
[2013-02-12 08:02:30 -0500] manimal_: i have examples from the cookbook page showing 'code', where do i put this code?
[2013-02-12 08:04:19 -0500] manimal_: i added the simple_iptables cookbook to my role and it wiped out my iptables rules, im not exactly sure where to edit what to add a simple rule from the cookbook
[2013-02-12 08:51:52 -0500] Alex____: hello
[2013-02-12 08:52:04 -0500] Alex____: good morning
[2013-02-12 09:01:32 -0500] kernel_panik: Hey guys, I would like put in attributes/foo.rb  a case statement.. is possible know which recipe are running? I mean  " IF  the recipe Pizza is running use this attributes"
[2013-02-12 09:04:45 -0500] specialsauce: kernel_panik, not sure what the best pattern is but *one* pattern you could use would be to set a default attribute in foo.rb and then override it in your pizza recipe
[2013-02-12 09:04:51 -0500] specialsauce: i think that would have the effect you wanted
[2013-02-12 09:05:49 -0500] manimal_: well, from cli knife node show node actually shows recipes running on node
[2013-02-12 09:06:06 -0500] kernel_panik: yes ;)  thanks
[2013-02-12 09:06:07 -0500] manimal_: so somewhere the data is available
[2013-02-12 09:17:54 -0500] kesor: I had a working vagrant that installs a chef server via chef-solo and the chef-server::rubygems-install recipe. Now it stopped working with No such file or directory - /var/lib/gems/1.9.1/gems/chef-11.2.0/distro/debian/etc/default/chef-solr  how can I fix it?
[2013-02-12 09:46:44 -0500] kesor: I installed chef-server via the omnibus installer, on ubuntu 12.04 64bit. But where is the startup script, or which executable should I run to make it work?
[2013-02-12 09:47:09 -0500] mattt: mm
[2013-02-12 09:47:17 -0500] mattt: maybe you need a cookbook for it
[2013-02-12 09:47:37 -0500] manimal_: you ran install and it said installed, then did chef-server-ctl reconfigure?
[2013-02-12 09:47:55 -0500] kesor: so I should run chef-server-ctl as my first command?
[2013-02-12 09:48:03 -0500] kesor: ok, I'll try that ...
[2013-02-12 09:48:06 -0500] manimal_: right when it finishes installing it says it
[2013-02-12 09:48:21 -0500] mattt: i know the chef-client omnibus installer doesn't come w/ an init script, i had to use the chef-client cookbook to manage it properly
[2013-02-12 09:48:27 -0500] mattt: the same may apply to server installation
[2013-02-12 09:48:32 -0500] manimal_: "chef-server-ctl reconfigure"
[2013-02-12 09:48:48 -0500] kesor: hmm chef-server-ctl is some kind of daemontools thing or something   ?
[2013-02-12 09:48:48 -0500] manimal_: then it should be running and you should be able to verify by going to webui
[2013-02-12 09:49:07 -0500] kesor: manimal_: cool, thanks
[2013-02-12 09:50:12 -0500] manimal_: https://chefservername should bring up a login screen if its installed and running
[2013-02-12 09:51:01 -0500] manimal_: make sure firewall lets u browse to it
[2013-02-12 09:54:43 -0500] manimal_: has anyone used http://community.opscode.com/cookbooks/hosts_file i cant seem to figure out the attribute names to add
[2013-02-12 09:59:24 -0500] mattt: manimal_: nope, not me sorry
[2013-02-12 10:02:35 -0500] fonsan_: Hi, how do you guys work with chef repos in large teams? we currently have a shared github repo and upload stuff to the chef server and then push to git, there is an accident waiting to happen if two members are working in parallel with the repo. Is there a way to download the chef repo from the server and avoid git or the other way around with git hooks to chef
[2013-02-12 10:12:51 -0500] jonlives: fonsan_: this is what we do at Etsy: http://www.slideshare.net/mcdonnps/lessons-from-etsy-avoiding-kitchen-nightmares-chefconf-2012
[2013-02-12 10:20:05 -0500] zts: jonlives: I don't keep stats, but I reckon that slide deck (and the associated conference video) is my most frequently shared Chef resource outside the opscode wiki.  Well done, you lot (and thankyou for knife-spork :)
[2013-02-12 10:20:23 -0500] bilalcochin1: Knife upload fail. Please see, http://pastebin.com/tN1GV4Tx
[2013-02-12 10:21:08 -0500] jonlives: zts: I'll let patrick know, I'm sure he'll be very pleased to hear that!
[2013-02-12 10:26:00 -0500] zts: jonlives: good to share the love :)
[2013-02-12 10:28:25 -0500] Alex____: hey guys i have a simple question
[2013-02-12 10:29:10 -0500] Alex____: do i need to load a custom attributes file like attributes/bla.rb or will it be loaded for me?
[2013-02-12 10:29:38 -0500] fonsan_: jonlives: thanks!
[2013-02-12 10:29:50 -0500] jonlives: fonsan_: np :)
[2013-02-12 10:31:01 -0500] Alex____: somebody who can help me?
[2013-02-12 10:33:25 -0500] Alex____: ?
[2013-02-12 10:34:05 -0500] bilalcochin1: Anyone has idea about fixing knife upload issue http://pastebin.com/tN1GV4Tx
[2013-02-12 10:38:48 -0500] mattp: Alex____: The name of the file is important. Use default.rb or the name of the recipe in the cookbook. (assuming you're talking about attributes in cookbooks)
[2013-02-12 10:45:11 -0500] itwasntandy: win 23
[2013-02-12 10:45:14 -0500] itwasntandy: bah
[2013-02-12 10:45:16 -0500] itwasntandy: stupid keyboard
[2013-02-12 11:00:46 -0500] fooJBar: Alex, all attribute files in the cookbook will be loaded automatically.
[2013-02-12 11:10:36 -0500] sevgibson: anyone else seeing run_list_for method errors using chef 11.2.0?
[2013-02-12 11:21:14 -0500] null_route: Hi Guys! I'm having issues with Chef mounting my s3fs partitions. Specifically, I think the issue is in https://github.com/opscode/chef/blob/master/lib/chef/provider/mount/mount.rb line 84 . Why is mounted = FALSE, and not true?
[2013-02-12 11:35:07 -0500] mrhobbles: Howdy folks. Anyone know why I might have started getting a no_run_list error when attempting to deploy with Chef today?
[2013-02-12 11:35:19 -0500] mrhobbles: Haven't used it in a couple of days, but only just started getting it. Chef 10.
[2013-02-12 11:49:57 -0500] fooJBar: exit
[2013-02-12 11:51:13 -0500] sevgibson: mrhobbles: Seeing the same thing -- I believe the note attribute changes for 11.2.0 are causing the problems -- my client was 10, but the log file shows 11.2 is being used on the host I'm building "Starting Chef Client, version 11.2.0"
[2013-02-12 11:53:01 -0500] gokr: Anyone using remote_file for transferring files that actually reside in the cookbook file tree? This worked until... version 11. Now it wants a URI.
[2013-02-12 12:11:38 -0500] chaosdonkey: Hi! I'm getting the error "Error expanding the run_list:" while using chef-solo 10.20.0, but I haven't touched roles and cookbooks in ages
[2013-02-12 12:12:50 -0500] AikiLinux: hi , how can i clear a node attributes so it will "recreate" them on run time ?
[2013-02-12 12:14:29 -0500] sevgibson: chaosdonkey: in your log, does it show this? "Starting Chef Client, version xx.xx.xx", and what version does it show?  My bootstrap was using "gem install chef" so it is getting the latest version, which is not backward compatible.
[2013-02-12 12:15:36 -0500] chaosdonkey: sevgibson, I'm using chef-solo, not chef-client
[2013-02-12 12:16:29 -0500] sevgibson: my mistake
[2013-02-12 12:17:02 -0500] chaosdonkey: I'm not using chef 11 because it's not compatible with my cookbooks, so I'm using 10.20.0
[2013-02-12 12:18:26 -0500] sevgibson: I'm using chef-client, but I am seeing the same error, and I'm pretty sure it's because the chef being installed on my host is 11.2.0 -- latest version -- hence my suggestion.
[2013-02-12 12:18:28 -0500] zts: gokr: you'll want to use cookbook_file for that (that usage of remote_file was deprecated sometime in 10.x, though perhaps it didn't scream)
[2013-02-12 12:18:47 -0500] zts: chaosdonkey: that error is the result, but doesn't hint at what the source of the problem might be.  Please gist/pastebin the complete output
[2013-02-12 12:19:15 -0500] gokr: zts: Problem is that cookbook_file is "meant" for small files (?) and it also doesn't support checksum. But perhaps it does checksumming itself?
[2013-02-12 12:19:58 -0500] gokr: I was using checksum so that I wouldn't redownload the file every time.
[2013-02-12 12:20:06 -0500] zts: gokr: ooh, good question.  I believe that will be checksummed, but I'm not certain - past observation is that Chef is smart about only syncing the bits of a cookbook that have changed
[2013-02-12 12:21:30 -0500] gokr: Also, why is the "new" chef printing out the cookbook_file contents when running?
[2013-02-12 12:21:35 -0500] chaosdonkey: zts, http://pastebin.com/339csQVT
[2013-02-12 12:25:41 -0500] zts: chaosdonkey: interesting... that stack trace implies that you're somehow getting a Hash object when you should have a Chef::Role (or something).  I'm not sure how that can happen
[2013-02-12 12:26:32 -0500] zts: gokr: to be honest, I've not played with Chef 11 much yet - what does it look like?  I've seen some muttering that the default output formatter has changed, so possibly it's a consequence of that
[2013-02-12 12:26:35 -0500] zts: sorry to be vague
[2013-02-12 12:32:26 -0500] VolodymyrB: Hi, how to call 'notifies' even 'only_if' condition do not pass
[2013-02-12 12:32:29 -0500] VolodymyrB: ?
[2013-02-12 12:34:23 -0500] VolodymyrB: understand, just create one more block with not_if)
[2013-02-12 12:37:40 -0500] zts: VolodymyrB: notifies will only fire if the resource is updated - even if your 'only_if' passes, but no change is made, the notify won't fire
[2013-02-12 12:37:44 -0500] smith3v: Hi all
[2013-02-12 12:41:27 -0500] smith3v: Guys, any update when fix for CHEF-3863 would be available?
[2013-02-12 12:44:17 -0500] VolodymyrB: is it possible to create a clean block, that doing nothing, but check not_if/only_if condition and calls notify? or i have too execute fake command 'true'?
[2013-02-12 12:45:04 -0500] zts: VolodymyrB: if you want a resource to be notified every run, why use notify?  Why not just set the right action on the resource?
[2013-02-12 12:46:34 -0500] VolodymyrB: zts: I have to kill processes if already exists, update source from git and then start new
[2013-02-12 12:56:23 -0500] chaosdonkey: zts, this is the problem I'm having http://tickets.opscode.com/browse/CHEF-3863
[2013-02-12 12:56:53 -0500] chaosdonkey: apparently json gem has introduced a bug in version 1.7.7
[2013-02-12 13:15:48 -0500] dwradcliffe: chaosdonkey: lovely :(
[2013-02-12 13:24:17 -0500] kesor: chaosdonkey: wasnt json 1.7.7 released because of a security vulnerability yesterday?
[2013-02-12 13:29:21 -0500] itchyouch: Within a recipe, is there a quick method of figuring out which interface an IP lives on?
[2013-02-12 13:29:43 -0500] Alex___: he guys i have a question: when i want to use a template to overwrite /etc/hosts which is a symlink in solaris will it override the symlink or the file it is linkin to?
[2013-02-12 13:30:20 -0500] itchyouch: for example, interface=get_interface_from_ip ("1.2.3.4")
[2013-02-12 13:30:55 -0500] kesor: itchyouch: ohai network/interfaces/eth0/addresses?
[2013-02-12 13:32:02 -0500] itchyouch: kesor, trying to not loop through
[2013-02-12 13:32:26 -0500] itchyouch: it could be that the IP is bound on one of eth0/eth1/eth2/em0/em1, etc...
[2013-02-12 13:32:40 -0500] kesor: itchyouch: why not loop?
[2013-02-12 13:33:01 -0500] itchyouch: I suppose I will just need to loop through.  Seems like it should be relatively simple to write
[2013-02-12 13:33:27 -0500] itchyouch: kesor, lack of knowledge in ruby would really be the only reason to not loop through it.
[2013-02-12 13:38:52 -0500] kesor: node['network']['interfaces'].keys.reject { |k| not iface[k]['addresses'].keys.include?("127.0.0.1") }
[2013-02-12 13:38:56 -0500] kesor: itchyouch: ^^
[2013-02-12 13:39:09 -0500] kesor: oh, sorry, have a bug there :)
[2013-02-12 13:39:31 -0500] kesor: that "iface" should be node['network']['interfaces']
[2013-02-12 13:40:04 -0500] kesor: itchyouch: better -- node['network']['interfaces'].keys.reject { |k| not node['network']['interfaces'][k]['addresses'].keys.include?("127.0.0.1") }
[2013-02-12 13:40:38 -0500] itchyouch: thanks.
[2013-02-12 13:40:42 -0500] itchyouch: let me try that out
[2013-02-12 13:42:45 -0500] Philip__: Good morning, anyone seen this issue before? ...... Cannot find a resource for set_owner on ubuntu version 12.04
[2013-02-12 13:43:01 -0500] Philip__: It comes from processing a file block that creates an authorized_keys file
[2013-02-12 13:43:35 -0500] Philip__: Is there maybe an issue with this certain version of chef and ubuntu Precise?
[2013-02-12 13:44:00 -0500] geekbri: Philip__: can you gist the offending code?
[2013-02-12 13:44:31 -0500] Philip__: geekbri: sure, one sec
[2013-02-12 13:45:42 -0500] honza: hey everyone, i have a question about chef 11 which is breaking my app --- i keep getting "oMethodError: undefined method `run_list_for'" --- any ideas?
[2013-02-12 13:46:05 -0500] geekbri: honza: it could be that you are being hit by the json 1.7.7 bug
[2013-02-12 13:46:15 -0500] Philip__: geekbri: looks like its coming from here: set_owner unless @new_resource.owner.nil?
[2013-02-12 13:46:21 -0500] geekbri: honza: on the effected node you should try to uninstall the json 1.7.7 gem and install the json 1.7.6 gem and see if that fixes it
[2013-02-12 13:46:42 -0500] honza: geekbri: thanks, trying it now
[2013-02-12 13:46:54 -0500] geekbri: Philip__: could you gist the block of code :).  Whats happening is that its trying to call a chef resource named set_owner, when i suspect its a method you want to be calling
[2013-02-12 13:48:07 -0500] honza: geekbri: wow, that actually worked!  what a subtle bug, thanks a lot
[2013-02-12 13:48:32 -0500] geekbri: honza: http://tickets.opscode.com/browse/CHEF-3863
[2013-02-12 13:48:55 -0500] Alex___: he guys i have a question: when i want to use a template to overwrite /etc/hosts which is a symlink in solaris will it override the symlink or the file it is linkin to?
[2013-02-12 13:49:09 -0500] Philip__: geekbri: ah, well, its doing a class File < Chef::Provider, then def action_create and then it does a unless ::File.exists on the @new_resource.path
[2013-02-12 13:49:43 -0500] Philip__: and opens each user file, file by file and does set content, set_owner, set_group, etc... on the @new_resource
[2013-02-12 13:49:45 -0500] geekbri: Philip__: to be honest its going to be hard for me to really help much further without seeing actual chunks of code
[2013-02-12 13:50:35 -0500] Philip__: geekbri: yeah, i'm trying my best to not simply paste it in chat :). but give as much as I can...
[2013-02-12 13:50:45 -0500] Alex___: pastebin
[2013-02-12 13:50:45 -0500] geekbri: Philip__: just use gist.github.com
[2013-02-12 13:51:02 -0500] Alex___: also good
[2013-02-12 13:51:06 -0500] Philip__: geekbri: i sort of understand what you mean that i may be trying to call a chef resource instead of method
[2013-02-12 13:51:31 -0500] Alex___: is there somebody who can help me understanding the create action of a template
[2013-02-12 13:51:36 -0500] chaosdonkey: kesor, I don't know why they released json 1.7.7, I just know it breaks chef
[2013-02-12 13:52:25 -0500] geekbri: Philip__: resources are called through method_missing if i remember correctly.  If the method you are trying to call doesn't exist it's going to try to find a resource by that name.  If there is no resource by that name you will get the error you are getting.
[2013-02-12 13:52:40 -0500] Philip__: geekbri: ok, one moment
[2013-02-12 13:52:40 -0500] geekbri: chaosdonkey: https://groups.google.com/forum/?fromgroups=#!topic/rubyonrails-security/4_YvCpLzL58 possibly
[2013-02-12 13:53:03 -0500] Philip__: ah ok i gotcha. i didn't write this code but am tryign to fix it so that makes it even more difficult :)
[2013-02-12 13:53:24 -0500] chaosdonkey: geekbri, thanks
[2013-02-12 13:53:38 -0500] geekbri: Philip__: story of my life.
[2013-02-12 13:53:59 -0500] Philip__: geekbri: I think it is trying to use the resource from fileutils which is require djust above that chunk of code
[2013-02-12 13:54:27 -0500] Philip__: geekbri: it was also calling ftools which I had to comment out due to the fact that it is longer supported in newer versions of ruby as I understand...
[2013-02-12 13:54:47 -0500] Philip__: geekbri: I was under the impression that fileutils contained this method but maybe  that is the issue, that it is named differently or simply not there.
[2013-02-12 13:55:11 -0500] geekbri: Philip__: that would be my guess.  At least what I was hinting at, just without the code and seeing things I wasn't able to look too much further into it
[2013-02-12 13:55:43 -0500] Philip__: geekbri: totally understand... i'm also making sure I can legally paste the code :)... that gets a little sticky...
[2013-02-12 13:55:57 -0500] geekbri: Philip__: yes, i understand :)
[2013-02-12 13:56:19 -0500] Philip__: geekbri: I'll dig a bit at the fileutils vs ftools and see where I get and will report back... if I find i can paste some code I'll have at it.
[2013-02-12 13:56:25 -0500] Philip__: geekbri: thanks for your help!
[2013-02-12 13:56:30 -0500] geekbri: Philip__: np
[2013-02-12 14:00:13 -0500] cpasmoi: hi ! is there a chef way to install modjk or should I keep my old recipe ?
[2013-02-12 14:03:04 -0500] alex____: hello all
[2013-02-12 14:06:11 -0500] newbie_chef_: to fix the issue caused by the JSON 1.7.7 bug on an existing node, the previous version of the JSON gem can be be installed, however how can creating new instances be fixed?
[2013-02-12 14:06:59 -0500] newbie_chef_: evrytime we create an new insatnce it is using JSON 1.7.7 and it breaks....
[2013-02-12 14:08:06 -0500] geekbri: newbie_chef_: I currently have rolled back to version 10.16.6 of chef-client
[2013-02-12 14:08:57 -0500] newbie_chef_: geekbri: i am kind of new to Chef and AWS... i inherited the setup we have
[2013-02-12 14:08:59 -0500] geekbri: you could also temporarily fork chef client, change the requirements, and roll your own gem
[2013-02-12 14:09:09 -0500] geekbri: newbie_chef_: what version of chef client are you on
[2013-02-12 14:09:19 -0500] newbie_chef_: 11.0
[2013-02-12 14:09:41 -0500] geekbri: hrm I see.
[2013-02-12 14:10:11 -0500] geekbri: newbie_chef_: you could modify your bootstrap script to do what youre doing manually :)
[2013-02-12 14:11:10 -0500] newbie_chef_: geekbri: looking into my bootstrap script..
[2013-02-12 14:15:49 -0500] newbie_chef_: geekbri: bear with me... here is my setup.... we have a couple of servers that have a python wrapper script and use the knife cli to create instances...and  i havent been able to figure where and what i can change in the bootstrp process that would install JSON 1.7.6 and not 1.7.7
[2013-02-12 14:16:44 -0500] geekbri: Well even if you installed json 1.7.6 I think it would sitll try to install and use json1.7.7
[2013-02-12 14:17:01 -0500] geekbri: I'm actually not sure about that
[2013-02-12 14:17:11 -0500] newbie_chef_: geekbri: also it looks like the default gems from ubuntu12.04-gems are being used to create an new isntance...
[2013-02-12 14:17:16 -0500] geekbri: It's early and I'm not feeling well :)
[2013-02-12 14:17:20 -0500] jwitrick: anyone know where to find a windows msi for chef 10.20 ?
[2013-02-12 14:17:21 -0500] newbie_chef_: :)
[2013-02-12 14:18:20 -0500] petecheslock1: jwitrick: you can select the version you need and get the url from http://www.opscode.com/chef/install/
[2013-02-12 14:18:38 -0500] petecheslock1: for example:  https://opscode-omnitruck-release.s3.amazonaws.com/windows/2008r2/x86_64/chef-client-10.20.0-1.windows.msi
[2013-02-12 14:20:40 -0500] jwitrick: unfortunatly it does not have windows 7 :
[2013-02-12 14:21:00 -0500] kesor: "knife node edit" gives me an error, and I can't figure out where it is coming from -- can someone please help?   http://pastie.org/6129691
[2013-02-12 14:23:41 -0500] petecheslock1: kesor: do you have json 1.7.7 installed?
[2013-02-12 14:24:00 -0500] petecheslock1: i saw a similar error yesterday and removed 1.7.7 and install 1.7.6 and that seemed to solve it
[2013-02-12 14:24:12 -0500] petecheslock1: oh - wait, that might be a diff error
[2013-02-12 14:24:38 -0500] kesor: petecheslock1: installed where? workstation, server or client? :)
[2013-02-12 14:25:03 -0500] kesor: I ended up editing the node via the web-ui.
[2013-02-12 14:25:20 -0500] petecheslock: kesor: yea -was wondering on the node you were running the knife command on
[2013-02-12 14:26:59 -0500] kesor: have json 1.5.5, according to bundler.
[2013-02-12 14:28:57 -0500] geekbri: kesor: I was getting that error yesterday as well, not sure what it was related to
[2013-02-12 14:29:06 -0500] geekbri: It stopped happening so i didn't look into it further
[2013-02-12 14:29:29 -0500] kesor: any ideas how to trace its source?  get a trace stack dump somehow?
[2013-02-12 14:30:17 -0500] geekbri: Not sure, I probably would have injected some debugging statements into the knife plugin for that
[2013-02-12 14:30:26 -0500] petecheslock: yea - i seem to can replicate with chef 11.2.0 and json 1.7.7 - https://gist.github.com/petecheslock/222385328d699ec8e29c
[2013-02-12 14:31:03 -0500] petecheslock: kesor uninstall 1.5.5 and install 1.5.4
[2013-02-12 14:31:07 -0500] petecheslock: json gem that is
[2013-02-12 14:31:21 -0500] petecheslock: i'd bet that works - probably bug in chef related to the change in json for that security issue
[2013-02-12 14:31:24 -0500] pignata: UIs there a fix planned for this JSON gem stuff? I can't build new servers via Chef in the current state of the world.
[2013-02-12 14:31:31 -0500] pignata: Er, is, rather.
[2013-02-12 14:31:40 -0500] geekbri: I submitted a merge request that locks in the json version
[2013-02-12 14:31:54 -0500] geekbri: chances are they will just modify the chef source to deal with whatever the json change is, im not sure
[2013-02-12 14:31:59 -0500] geekbri: hopefully something happpens
[2013-02-12 14:32:09 -0500] kesor: geekbri: thing is, the pre-bumped json version has a serious security vulnerability. chef needs to be fixed.
[2013-02-12 14:32:17 -0500] geekbri: kesor: Yeah, i put that in the ticket :)
[2013-02-12 14:32:28 -0500] geekbri: kesor: its two different problems though
[2013-02-12 14:32:52 -0500] geekbri: I'd rather be able to install and run chef client with a json vulnerability right now
[2013-02-12 14:32:53 -0500] chris613: petecheslock: Is there a page about this problem? I'm wondering if it's causing some trouble I'm having with vagrant
[2013-02-12 14:32:59 -0500] geekbri: and have the fix come later in an upgrade that is recommended
[2013-02-12 14:33:09 -0500] kesor: yep, knife node edit works now with downgraded json.
[2013-02-12 14:37:11 -0500] geekbri: that makes sense :)
[2013-02-12 14:38:17 -0500] kesor: anyone knows if there is a cookbook that installs ruby's mkmf?
[2013-02-12 14:38:44 -0500] kesor: trying to use the opscode-cookbooks/unicorn, and it fails because mkmf is missing.
[2013-02-12 14:41:23 -0500] kesor: oh, recipe[ruby::1.9.1] works  so nvm.
[2013-02-12 14:55:30 -0500] VolodymyrB1: command with the ampersand ("command &") do not want run only via chef, can anybody help?
[2013-02-12 14:55:32 -0500] sevgibson: honza: pretty sure you'll find a "gem install chef" in your bootstrap.  This will install latest (11.2.0) -- which is likely not compatible with your cookbooks.  I'm having to specify "gem install chef -v 10.18.2" (since that is what I know works for my cookbooks).
[2013-02-12 14:56:09 -0500] newbie_chef_: geekbri: thanks for suggesting to modify the bootstrap config...
[2013-02-12 14:56:19 -0500] honza: sevgibson: not much luck with that approach here --- all the deps are all messed up and it won't even boot :(
[2013-02-12 14:56:20 -0500] geekbri: newbie_chef_: np.  Did it solve your problem?
[2013-02-12 14:56:27 -0500] newbie_chef_: geekbri: i made a change in there and it works now...
[2013-02-12 14:57:12 -0500] newbie_chef_: geekbri: i wasnt sure that the override will work but, it apprently it does...
[2013-02-12 14:59:16 -0500] VolodymyrB1: FIx: command run but closes
[2013-02-12 15:00:34 -0500] etcp: BTW, thanks to everyone here discussing JSON bugs earlier :) just saved me from another few hours of bashing my head against a brick wall!
[2013-02-12 15:00:49 -0500] itchyouch: just to make sure my google fu isnt out of day there aren't any chef 10 to chef 11 migration tools/writeups out yet, right?
[2013-02-12 15:00:51 -0500] etcp: "It was working yesterday, *why* isn't it working today?"
[2013-02-12 15:00:56 -0500] itchyouch: out of date*
[2013-02-12 15:03:39 -0500] honza: sevgibson: did you gem install chef --version 10.18.2 recently?  it just dies for me with "unable to resolve dependencies"
[2013-02-12 15:03:47 -0500] chris613: etcp: Is there a page the summarizes this?
[2013-02-12 15:04:34 -0500] etcp: chris613: I've not seen one (and not really looked) - I just changed my bootstrap file to explicitly install version 1.7.6 before installing chef
[2013-02-12 15:05:28 -0500] etcp: similar to the line I did for chef version < 11.0.0 a few days ago ;)
[2013-02-12 15:06:41 -0500] zts: honza: use 10.20.0
[2013-02-12 15:10:59 -0500] zooz: what should be correct permissions on /etc/chef folder?
[2013-02-12 15:11:31 -0500] matti: sevgibson: 10.20.0 works with latest net-ssh gem as dependency :)
[2013-02-12 15:13:47 -0500] honza: zts: that works, thanks
[2013-02-12 15:21:37 -0500] deed02392: when I do a knife cookbook upload foo --include-dependencies, I get an "# cookbooks uploaded ok but # failed"
[2013-02-12 15:21:42 -0500] deed02392: how do I determine which failed and why?
[2013-02-12 15:30:49 -0500] solvipa: Hi.  I might just be thick, but is there no way to check for the presence of a package(windows_feature, to be exact)?
[2013-02-12 15:31:34 -0500] solvipa: i.e., if feature is installed, do nothing.  Otherwise take some action.  I'm having a hard time figuring out how to find out wheather a feature is installed.
[2013-02-12 15:33:42 -0500] deed02392: solvipa, not sure about windows behaviour but you could work it out if you look at how the provider works for windows packages?
[2013-02-12 15:35:40 -0500] solvipa: deed02392: there's something defined there that's called 'installed?'.  I'm not sure how to ask it, however.
[2013-02-12 15:37:19 -0500] deed02392: solvipa, i would expect that nothing negative would happen if it's already installed and you called the install method
[2013-02-12 15:37:30 -0500] smallChange: So guys, upon installing chef server the .pem files i found were chef-validator.pem and chef-webui.pem. Now configuring a seperate VM as workstation "knife configure -i" is asking for the location of the existing admin's private key and the location of the validation key. Are those the keys the server install made? and which is which? Thank you!
[2013-02-12 15:38:22 -0500] solvipa: deed02392: Nope, it works just fine.  The issue is that I have to copy a large number of files from the chef host to the node that's performing the installtion.  I'd like to skip that copy if the feature is already installed.
[2013-02-12 15:39:32 -0500] solvipa: but if this is not straightforward, I'll leave it for now.  I'm sure this will be simple when I gain a little more experience w. chef. :)
[2013-02-12 15:42:19 -0500] deed02392: yea solvipa, i could only suggest reading the source and seeing what's happenin but probably someone here will have a much better idea if you stick about
[2013-02-12 15:42:40 -0500] metawake: Can someone suggest a solution for this. When using "application" cookbook with Chef+Berkshelf+Vagrant, Chef returns the following error: [2013-02-12T05:52:28-08:00] FATAL: NoMethodError: undefined method `path' for Chef::Resource::Application. Obviously, "path" attribute is an integral part of Application cookbook/
[2013-02-12 15:42:41 -0500] deed02392: i wonder if you could do something like package.installed? and that would give a true or false but i doubt it
[2013-02-12 15:51:20 -0500] solvipa: deed02392: yeah, that's what I thought.  if windows_feature('foo').installed? doesn't work however.  Thanks anyway. :)
[2013-02-12 15:56:35 -0500] itchyouch: anyone get a "ERROR: Client '' already exists" on setting up a brand new omnibus chef server installation?
[2013-02-12 15:56:47 -0500] itchyouch: when trying to create a new api client?
[2013-02-12 15:57:44 -0500] matti: itchyouch: You Sir have a ghost client ;p
[2013-02-12 15:57:56 -0500] itchyouch: meh?
[2013-02-12 15:57:58 -0500] matti: itchyouch: Run knife --exorcisom
[2013-02-12 15:58:05 -0500] matti: itchyouch: I am just joking ;]
[2013-02-12 15:58:25 -0500] itchyouch: and here I was just about to do a help to find exorcisom
[2013-02-12 15:58:41 -0500] kesor: anyone knows what is the type of "deploy_key" in the opscode application cookbook? file? string? cookbook_file?
[2013-02-12 15:59:00 -0500] matti: itchyouch: ;)
[2013-02-12 15:59:10 -0500] matti: itchyouch: Looks rathrer odd.
[2013-02-12 15:59:32 -0500] itchyouch: matti, thanks anyways
[2013-02-12 16:00:52 -0500] jtimberman: kesor: string
[2013-02-12 16:01:12 -0500] matti: itchyouch: Ask --> jtimberman
[2013-02-12 16:01:16 -0500] kesor: jtimberman: thanks!
[2013-02-12 16:01:21 -0500] matti: itchyouch: If he does not know, then we are all doomed.
[2013-02-12 16:01:25 -0500] jtimberman: heh
[2013-02-12 16:01:28 -0500] matti: Haha ;]
[2013-02-12 16:01:43 -0500] matti: jtimberman: ;)
[2013-02-12 16:02:07 -0500] jtimberman: itchyouch: are you running the knife configure -i command?
[2013-02-12 16:02:23 -0500] jtimberman: itchyouch: and did you install chef from a rubygem or an omnibus package
[2013-02-12 16:03:14 -0500] itchyouch: omnibus jtimberman
[2013-02-12 16:03:52 -0500] metawake: kesor, deploy key is a string from your ssh private key
[2013-02-12 16:04:01 -0500] kesor: metawake: yep, thanks.
[2013-02-12 16:04:07 -0500] itchyouch: The omnibus installer I guess created an "admin" user with an "admin.pem", so I configured a knife.rb using those values
[2013-02-12 16:05:35 -0500] jtimberman: itchyouch: yeah - i'd recommend creating a separate user for yourself longer-ish term.
[2013-02-12 16:05:50 -0500] jtimberman: anyway, can you rerun the knife command you tried with -VV
[2013-02-12 16:06:08 -0500] itchyouch: jitimberman, yea, I was trying to create my own user to use, but was failing on bootstrapping my own user
[2013-02-12 16:07:10 -0500] smallChange: hi, I have setup my own chef server, now im trying to setup my workstation, what is the client_key field in the knife.rb file? Which .pem file do I use here? Thanks.
[2013-02-12 16:07:48 -0500] kesor: I created a Vagrantfile that installs a chef-server v11.x via omnibus and creates the knife configuration and everything  comments are very very very much welcome (please) -- https://gist.github.com/kesor/4770945
[2013-02-12 16:08:29 -0500] itchyouch: jtimberman, it looks like with the chef 11 omnibus installer, I should specify the server as: httpS://<server>:443
[2013-02-12 16:08:41 -0500] itchyouch: rather than doing http://<server>  (implied port 80)
[2013-02-12 16:08:49 -0500] kesor: itchyouch: that is what I found
[2013-02-12 16:09:47 -0500] itchyouch: Thanks kesor.  looks like 11 has some slight differences
[2013-02-12 16:10:04 -0500] itchyouch: I was surprised when I ran a netstat -an  and didn't see anything listening on 4000 or 4040
[2013-02-12 16:10:08 -0500] kesor: itchyouch: checkout my vagrantfile it works and all
[2013-02-12 16:10:14 -0500] itchyouch: I don't recall seeing that in the breaking changes
[2013-02-12 16:11:34 -0500] itchyouch: kesor, so I haven't used vagrant at all, but have had some cursory information on it.  Do people usually define their complete infrastructure in vagrant, to be able to rebuild any node from scratch?
[2013-02-12 16:12:11 -0500] kesor: itchyouch: vagrant is just a very easy-to-use tool for automating VirtualBox machines, which are excellent for testing.
[2013-02-12 16:13:24 -0500] kesor: I made a presentation that shows how to use it, speakerdeck.com/devops/vagrant-cloud-your-laptop
[2013-02-12 16:16:41 -0500] itchyouch: Thanks, kesor
[2013-02-12 16:17:41 -0500] itchyouch: Here's something new.  Looks like there are keys associated with users.  But I guess for using knife, we still need to use the api client
[2013-02-12 16:17:45 -0500] Kzim: hi i'm trying to declare a service without init script by using restart_command but chef stop telling me that he don't find any init. any help please ?
[2013-02-12 16:20:26 -0500] kesor: itchyouch: knife is a client, it needs to have a client name and a client key. has nothing to do with chef users.
[2013-02-12 16:25:10 -0500] Kzim: nevermind :)
[2013-02-12 16:25:42 -0500] jtimberman: itchyouch: aye, yeah, nginx is in front of the chef server API :)
[2013-02-12 16:26:03 -0500] programmerq: so, I'm looking into encrypted data bags. We'd like to be able to store the encrypted data in our git repo so if our chef server goes away, we can still recover easily enough. Is there a good pattern for accomplishing this?
[2013-02-12 16:26:20 -0500] smallChange: Please help. On my workstation: "Response:  Failed to authenticate as 'root'. Ensure that your node_name and client key are correct." What .pem should I be using in this field in my knife.rb file?? I have tried all the .pem files from my server.
[2013-02-12 16:26:26 -0500] programmerq: it looks more like uploading an encrypted data bag is more of a one-shot-deal.
[2013-02-12 16:29:28 -0500] nlloyds2: Can anyone help me clarify the story for upgrading omnibus chef on an Ubuntu machine? I installed 10.16.6 through the omnibus installer and would like to upgrade to the latest 10 release (and later to 11.) apt-get upgrade doesn't show new versions so what is the recommended way to do this?
[2013-02-12 16:29:45 -0500] kallistec: smallChange: what have you done so far? Install Chef 11 server from omnibus pkg?
[2013-02-12 16:30:25 -0500] itchyouch: programmerq, afaik, the encryption happens post-upload and whatever is in your databags directory in your repo is cleartext
[2013-02-12 16:31:36 -0500] smallChange: i have two VMs. I installed chef server from here: http://www.opscode.com/chef/install/ seems to be working. On a second VM which i want to be my workstation i have installed chef-client  following these instructions: http://docs.opscode.com/install.html
[2013-02-12 16:32:40 -0500] smallChange: i ran knife configure -i and was unsure of which .pem files it wanted.... and now i am attempting "knife client list" on my workstation and getting: Response:  Failed to authenticate as 'root'. Ensure that your node_name and client key are correct.
[2013-02-12 16:33:09 -0500] smallChange: I copied over the .pem files i found on my server to my workstation and pointed knife.rb to those.
[2013-02-12 16:34:02 -0500] smallChange: when I run chef-client help I get thise error "Chef encountered an error attempting to create the client "chefworkstation"
[2013-02-12 16:35:22 -0500] smallChange: should i be using "chefworkstation" (myhostname) in my knife.rb as node_name?
[2013-02-12 16:37:04 -0500] jessicab: smallChange: nah, node_name is your user name in the chef server normally.. at least on hosted chef thats what it is
[2013-02-12 16:37:26 -0500] jessicab: then you point the client_key towards your user key.. and it all should just work
[2013-02-12 16:38:15 -0500] stPundit: hey guys i need to download some code from source control  (bitbucket or mercurial) from a chef recipe... could you point me in correct direction how would i do that?
[2013-02-12 16:39:53 -0500] nlloyds2: stPundit: The default providers for the scm resource are git and svn: http://docs.opscode.com/chef/resources.html#scm
[2013-02-12 16:40:00 -0500] smallChange: ahh im gettting somewhere, i had to create /etc/chef apparently chef cant create it, wtf?
[2013-02-12 16:40:00 -0500] databus23: Hi, I'm having a hard time executing an lwrp during compile time with "action :nothing" and "run_action(...)". Seems the subresources in the lwrp action aren't executed. Does somebody know if it should be possible to execute and lwrp action in that fashion?
[2013-02-12 16:41:11 -0500] nlloyds2: stPundit: For hg you can use https://github.com/opscode-cookbooks/mercurial and the mercurial provider like this example: https://github.com/opscode-cookbooks/mercurial#example
[2013-02-12 16:41:20 -0500] stPundit: nlloyds2 is it not possible to clone code from mercurial or bit bucket ?
[2013-02-12 16:41:39 -0500] nlloyds2: stPundit: It is, with the mercurial cookbook
[2013-02-12 16:41:55 -0500] jessicab: smallChange: you shouldnt need /etc/chef on your workstation btw.. thats only used for running chef-client, not knife commands
[2013-02-12 16:43:24 -0500] smallChange: jessicab: so what client_key do i use in my knife.rb file?
[2013-02-12 16:43:46 -0500] smallChange: where does that .pem come from or how do i generate it. knife does not want to authenticate to my server.
[2013-02-12 16:44:09 -0500] kesor: smallChange: "knife configure --intial", see example in https://gist.github.com/kesor/4770945
[2013-02-12 16:46:21 -0500] jessicab: smallChange: you probably need to do this stuff.. its just the key generated on the server http://wiki.opscode.com/display/chef/Installing+Chef+Server+Manually#InstallingChefServerManually-ConfiguretheCommandLineClient
[2013-02-12 16:47:03 -0500] gmcinnes: where's the best place to put a ticket now? the zendesk thing? Or jira?
[2013-02-12 16:47:37 -0500] nlloyds2: gmcinnes: http://tickets.opscode.com/secure/Dashboard.jspa I think
[2013-02-12 16:48:52 -0500] gmcinnes: thx
[2013-02-12 16:49:48 -0500] itchyouch: Seems like there's a couple of chef backup scripts out there.  I was using the knife server utility
[2013-02-12 16:50:23 -0500] smallChange: I need to have knife installed on my server?
[2013-02-12 16:50:55 -0500] itchyouch: smallChange, fnichol wrote a knife plugin called knife-server
[2013-02-12 16:51:05 -0500] itchyouch: to backup node, role, databag and environment data
[2013-02-12 16:51:10 -0500] deed02392: I've already got a data bag I created before, i've copied it into the new chef-repos/data_bags folder but knife doesn't seem to want to see it and upload it
[2013-02-12 16:51:20 -0500] nlloyds2: itchytouch smallChange I recently saw  https://github.com/Fotolia/knife-sharp
[2013-02-12 16:51:21 -0500] smallChange: hmm my server install created chef-validator.pem  chef-webui.pem
[2013-02-12 16:51:21 -0500] deed02392: is this because i didn't 'create' it yet in this new chef repos?
[2013-02-12 16:51:29 -0500] smallChange: which is slightly different name than that writeup
[2013-02-12 16:51:47 -0500] deed02392: there seems to be some mechanism in knife that means it doesn't really matter what's in the chef-repos directory, it has to be referenced somewhere else
[2013-02-12 16:51:52 -0500] deed02392: but i'm not sure what that is (git?)
[2013-02-12 16:52:33 -0500] itchyouch: deed02392: pretty sure you do something like this:  knife data bag from file data_bags/<databag>/<file>.json
[2013-02-12 16:53:11 -0500] deed02392: that just comes up with a usage output on data bags itchyouch
[2013-02-12 16:53:54 -0500] deed02392: itchyouch, I get no data bag 'foo' could be found please create it blah blah
[2013-02-12 16:53:55 -0500] wdpro_kevin: deed02392: also check your knife.rb is correctly configured
[2013-02-12 16:54:04 -0500] deed02392: but a directory of that exact name exists there
[2013-02-12 16:54:24 -0500] deed02392: correctly configured wdpro_kevin ?
[2013-02-12 16:54:37 -0500] smallChange: kesor: I tried knife configure --initla but got: Your private key could not be loaded from /etc/chef/admin.pem What should my admin.pem file be? Thanks...
[2013-02-12 16:55:00 -0500] kesor: smallChange: did you check my example? admin is not a client. chef-webui is a client.
[2013-02-12 16:55:44 -0500] wdpro_kevin: deed02392: make sure the paths in your knife.rb are correct (for one)
[2013-02-12 16:55:55 -0500] deed02392: they're correct
[2013-02-12 16:56:00 -0500] deed02392: no mention of data bags though
[2013-02-12 16:56:47 -0500] wdpro_kevin: I create a .chef dir inside my chefrepo and put my knife.rb, and pem files inside
[2013-02-12 16:57:17 -0500] wdpro_kevin: then ch into chef-repo and run my knife commands from there
[2013-02-12 16:57:30 -0500] wdpro_kevin: "cd into" that is
[2013-02-12 16:57:47 -0500] deed02392: yeah wdpro_kevin, my set up runs like but too
[2013-02-12 16:57:47 -0500] kesor: why "cd into"? don't you wish you could run these commands from the "outside" ?
[2013-02-12 16:58:00 -0500] deed02392: knife.rb is fine
[2013-02-12 16:58:12 -0500] wdpro_kevin: if you have multiple repos you need to have multiple knife.rb files
[2013-02-12 16:58:37 -0500] wdpro_kevin: so keeping them in the repo localizes the configs and pems
[2013-02-12 16:59:00 -0500] kesor: but you don't need to "cd into .chef" ...
[2013-02-12 16:59:07 -0500] nlloyds2: wdpro_kevin: I usually symlink /my/chef/repo/.chef => ~/.chef
[2013-02-12 16:59:26 -0500] nlloyds2: wdpro_kevin: Then you can run knife, et. al from anywhere
[2013-02-12 16:59:27 -0500] deed02392: he meant cd into the repos
[2013-02-12 16:59:29 -0500] deed02392: i.e. chef-repos
[2013-02-12 16:59:47 -0500] smallChange: kesor, okay i will read that site.
[2013-02-12 16:59:51 -0500] deed02392: i think it's because the data bag doesn't exist in hosted chef wdpro_kevin
[2013-02-12 17:00:00 -0500] deed02392: i just did a create on the data bag and it succeeded
[2013-02-12 17:00:01 -0500] wdpro_kevin: nlloyds2: I also have to deal with multiple organizations it get's messy
[2013-02-12 17:00:04 -0500] deed02392: even though that directory already exists
[2013-02-12 17:00:14 -0500] deed02392: how can i now add the data.json file that already exists in there to the data bag?
[2013-02-12 17:00:35 -0500] wdpro_kevin: what is the error you are getting?
[2013-02-12 17:01:22 -0500] nlloyds2: wdpro_kevin: Looks like https://github.com/Fotolia/knife-sharp lets you use multiple knife.rb files (haven't used it but saw it mentioned in ffs newsletter)
[2013-02-12 17:02:07 -0500] deed02392: i figured it out
[2013-02-12 17:02:11 -0500] deed02392: i have to do a data bag create
[2013-02-12 17:02:16 -0500] wdpro_kevin: nice love those foodfight guys
[2013-02-12 17:02:28 -0500] deed02392: then a data bag from file [bag i just created] [path to the .json file/item]
[2013-02-12 17:03:03 -0500] wdpro_kevin: deed02392: ah yeah, that's important! :) Good deal
[2013-02-12 17:03:33 -0500] wdpro_kevin: anyone know if you can do a knife search and see which nodes failed their chef_run?
[2013-02-12 17:04:24 -0500] deed02392: i was expecting the from file to create thet bag for me automatically :)
[2013-02-12 17:04:29 -0500] nlloyds2: wdpro_kevin: I think you can with the https://github.com/jgoulah/knife-lastrun handler
[2013-02-12 17:05:18 -0500] wdpro_kevin: does that save the last run back to the node? which then can be searched?
[2013-02-12 17:05:34 -0500] wdpro_kevin: or should I just RTFM? :)
[2013-02-12 17:06:38 -0500] nlloyds2: wdpro_kevin: Yeah I think it sets attributes on the node after the chef run
[2013-02-12 17:10:03 -0500] smallChange: kesor: cp /etc/chef-server/chef-validator.pem /vagrant/.chef/ im guessing you are installing knife on the same machine the server is running on? If I am not.. I just need to copy those files from one VM to the other.
[2013-02-12 17:10:37 -0500] kesor: smallChange: yep, i'm copying the files to the mount point of the virtualbox host system from inside the guest system (chef-server)
[2013-02-12 17:13:08 -0500] deed02392: hm two questions, why does chef choose to use apt-get instead of aptitude and why isn't there a proper notification for running an apt update (we have to put in a command line run i.e. apt-get update when i would normally use aptitude for everything)
[2013-02-12 17:13:41 -0500] deed02392: shouldn't apt-get update be auto triggered whenever you add a repos?
[2013-02-12 17:13:53 -0500] deed02392: is it right we should do this manually or add a notify?
[2013-02-12 17:14:26 -0500] nlloyds2: deed02392: It does do that if you use the apt cookbook: https://github.com/opscode-cookbooks/apt/blob/master/providers/repository.rb#L88-L129
[2013-02-12 17:14:26 -0500] deed02392: looking at the debug output, the default action for apt-get update is 'nothing' or something, so after adding a repos it seems chef considers to update and decides not to
[2013-02-12 17:15:01 -0500] nlloyds2: It's action :nothing but gets notified in some cases: https://github.com/opscode-cookbooks/apt/blob/master/providers/repository.rb#L123
[2013-02-12 17:15:42 -0500] deed02392: if new_resource.cache_rebuild
[2013-02-12 17:16:03 -0500] teukka: deed02392: there was a bug on some apt cookbook version that was fixed in 1.8.something
[2013-02-12 17:16:30 -0500] deed02392: well i'm using a very recent (last 1 week) install of chef
[2013-02-12 17:16:44 -0500] deed02392: my apt cookbook is 1.8.4
[2013-02-12 17:16:56 -0500] david_: Hi Guys,
[2013-02-12 17:17:05 -0500] teukka: deed02392: and aptitude is not guaranteed to be installed on all systems. apt is a required package
[2013-02-12 17:17:05 -0500] deed02392: how do I set the cache_rebuild thing :)
[2013-02-12 17:17:15 -0500] david_: Need some help on cookbook error
[2013-02-12 17:17:39 -0500] david_: could some please body help me out here
[2013-02-12 17:19:11 -0500] teukka: david_: I guess a bit more information about the problem is needed =)
[2013-02-12 17:19:37 -0500] david_: yes, i was expecting some reply
[2013-02-12 17:20:08 -0500] david_: could you please give me link for paste bin so that i can psate my information
[2013-02-12 17:20:57 -0500] nlloyds2: deed02392: I guess you can set cache_rebuild: true on the resource, but supposedly it's true by default: db/migrate/20101126213529_move_base_image_and_generated_image.rb
[2013-02-12 17:21:43 -0500] nlloyds2: david_: After you create something at http://pastebin.com/ it should give you a URL that you can use here.
[2013-02-12 17:21:46 -0500] teukka: deed02392: strange if apt-get update is not run after adding a repo. I thought there is actually now a bug that it is run even if the repo definition has not been changed
[2013-02-12 17:22:15 -0500] smallChange: What port is the chef server listening to by default? the workstation seems to think its 4000 but I am not seeing that port being listened on?
[2013-02-12 17:22:39 -0500] teukka: deed02392: do you include apt(::default) to your run_list? it runs apt-get update if it has not been run for some time
[2013-02-12 17:24:32 -0500] david_: ok, i've pasted my info there
[2013-02-12 17:24:33 -0500] david_: http://pastebin.com/kdBqxw4r
[2013-02-12 17:25:01 -0500] david_: where we see cookbook error while transferring some files from one node to another
[2013-02-12 17:25:25 -0500] david_: we are eagerly waiting for this problem to get resolved
[2013-02-12 17:25:34 -0500] stPundit: package "mercurial" do        action [:install]  end
[2013-02-12 17:26:01 -0500] stPundit: what does this statement do? I am confused
[2013-02-12 17:26:32 -0500] zooz: what is the most appropriate way to trigger a chef-client run while chef-client is running as a daemon?
[2013-02-12 17:26:35 -0500] c_t: installs mercurial
[2013-02-12 17:26:39 -0500] nlloyds2: stPundit: That installs the system-level mercurial package. So on debian it would do something like `apt-get install mercurial`
[2013-02-12 17:27:55 -0500] zts: zooz: I use 'pkill -USR1 chef-client'
[2013-02-12 17:28:12 -0500] zooz: yup, notice that in one of the init scripts
[2013-02-12 17:28:19 -0500] stPundit: nlloyds2 : thanks ,  how would it be different from http://community.opscode.com/cookbooks/mercurial ??
[2013-02-12 17:28:19 -0500] zooz: but I wonder if there is another way
[2013-02-12 17:28:30 -0500] itchyouch: Is chef-server 11 not available on rubygems yet?
[2013-02-12 17:28:36 -0500] itchyouch: oh wait it's not ruby.. durrrrr
[2013-02-12 17:29:42 -0500] david_: teukka - jus let me know if you find some ?
[2013-02-12 17:30:39 -0500] nlloyds2: stPundit: The default recipe (what you get if "recipe[mercurial]" is in your run list) does that (https://github.com/opscode-cookbooks/mercurial/blob/master/recipes/package.rb#L27) for you. The community site lets you search for the cookbooks but github has the latest versions
[2013-02-12 17:30:54 -0500] mattp: zooz: what's the problem with using pkill that you need a different way?
[2013-02-12 17:32:42 -0500] zooz: mattp, oh no, that's not a problem
[2013-02-12 17:32:47 -0500] zooz: I am just learning
[2013-02-12 17:33:30 -0500] zooz: I am packaging chef for fedora and writing systemd unit files etc, so was looking for ways to control chef-client daemon
[2013-02-12 17:33:32 -0500] zooz: that's all
[2013-02-12 17:35:23 -0500] teukka: david_: sorry, the recipe looks fine for me. are you using a recent chef release?
[2013-02-12 17:36:21 -0500] david_: i can see on the version detail
[2013-02-12 17:36:27 -0500] david_: give me 1 sec
[2013-02-12 17:37:23 -0500] david_: ok, this is the version what we are using Chef 0.10.8.3
[2013-02-12 17:39:51 -0500] teukka: david_: that's quite old. maybe it is a bug that has been fixed since. sorry, I'm not much of a help here
[2013-02-12 17:40:11 -0500] zts: david_: you need to downgrade your apt cookbook, or upgrade your chef - https://github.com/opscode-cookbooks/apt/commit/3a70fe057fa1a5511453dbb2731a9279f4f0ff3e
[2013-02-12 17:41:42 -0500] david_: oh, i see
[2013-02-12 17:41:44 -0500] teukka: zts: david_ seems to have a rpm based distro. I don't think he uses apt cookbook =)
[2013-02-12 17:42:16 -0500] zts: gah, ignore me
[2013-02-12 17:42:30 -0500] zts: that should've been for deed02392
[2013-02-12 17:42:45 -0500] david_: yes, what i do is to simply used chef server GUI and edit client nodes
[2013-02-12 17:42:46 -0500] zts: ...assuming he is also using an older chef client
[2013-02-12 17:43:08 -0500] david_: and then go client node and run "chef-client"
[2013-02-12 17:43:09 -0500] mconigliaro: has anyone seen this problem where rvm breaks the omnibus install of chef?
[2013-02-12 17:44:10 -0500] mconigliaro: basically if you're using rvm, the chef gem can't be found anymore
[2013-02-12 17:44:41 -0500] robbkidd: I'm having trouble spinning up a fresh Vagrant VM. I could bring this VM up from scratch last week with what I think are the same versions of chef-server and chef-client.
[2013-02-12 17:45:01 -0500] david_: which give me this error, i tried to google for it which says that you have to include that rp packages in that directory /files/default
[2013-02-12 17:45:13 -0500] david_: already did that but no luck
[2013-02-12 17:45:22 -0500] robbkidd: Trouble recorded https://gist.github.com/robbkidd/4771646 When chef-client runs for the first time = NoMethodError: undefined method `run_list_for' for #<Hash:0x7f94bfbcdbc0>
[2013-02-12 17:45:51 -0500] zooz: mattp, how do I reload the chef-client daemon? so it re-reads configuration etc?
[2013-02-12 17:46:12 -0500] robbkidd: chef-server on Ubuntu 12.04 installed with OpsCode APT repo packages. chef-client installed on node with bootstrap.
[2013-02-12 17:46:17 -0500] mconigliaro: oh wait, i think i see what i need to do...
[2013-02-12 17:47:18 -0500] pattersonc: has something changed with knife ssh? recently I started seeing this when trying to use it "FATAL: 2 nodes found, but does not have the required attribute to establish the connection. Try setting another attribute to open the connection using --attribute.
[2013-02-12 17:47:18 -0500] pattersonc: "
[2013-02-12 17:47:36 -0500] jrohwedder: robbkidd: not sure I can help but definitely seeing the same problem
[2013-02-12 17:47:58 -0500] pattersonc: what attribute is it referring to?
[2013-02-12 17:48:09 -0500] robbkidd: jrohwedder: Well, here's to solidarity!
[2013-02-12 17:48:20 -0500] jrohwedder: though, I'm to use knife-ec2 to bootstrap cloud servers
[2013-02-12 17:48:47 -0500] david_: teukka : could you please suggest some where could i find resolution ?
[2013-02-12 17:49:05 -0500] jrohwedder: so far tested w/ chef-client 11.2.0 and 10.20.0
[2013-02-12 17:49:44 -0500] teukka: david_: I would try with a more recent chef version
[2013-02-12 17:49:48 -0500] jrohwedder: it also seems to be recent, I launched servers successfully a couple days ago..
[2013-02-12 17:49:55 -0500] robbkidd: I get this error with chef-server 10.18.2, chef-client 10.20.0
[2013-02-12 17:50:13 -0500] jrohwedder: I'm using the hosted opscode chef-server
[2013-02-12 17:50:14 -0500] robbkidd: Yep. I was able to rebuild my Vagrant VMs late last week.
[2013-02-12 17:50:35 -0500] robbkidd: And I've got chef-server (open-source, self-host).
[2013-02-12 17:50:37 -0500] david_: do you have any work for update these in to some higher version
[2013-02-12 17:50:45 -0500] david_: could you please share it ?
[2013-02-12 17:50:55 -0500] david_: work plan*
[2013-02-12 17:51:13 -0500] kallistec: robbkidd: probably json gem issue. Omnibus install?
[2013-02-12 17:51:18 -0500] kallistec: or gems?
[2013-02-12 17:51:28 -0500] robbkidd: kallistec: Goood question.
[2013-02-12 17:52:03 -0500] kallistec: gem install will just break now, thanks to breaking change in json gem 1.7.6->1.7.7 :'(
[2013-02-12 17:52:28 -0500] codezombie: I keep coming back around to chef either via recommendation, or mention via software (vagrant)... However, I can't seem to find any reason for all the extra complexity over simple bash implementations of what you need to install. Can anyone explain to me why this exists, and why people keep recommending it?
[2013-02-12 17:52:30 -0500] kallistec: omnibus may get broken if you use chef_gem and it installs a new version of json gem somehow
[2013-02-12 17:52:34 -0500] jrohwedder: I'm definitely not using omnibus install
[2013-02-12 17:53:08 -0500] jrohwedder: is there a work-around? json 1.7.6 has a security vuln no?
[2013-02-12 17:53:24 -0500] kallistec: codezombie: tracks your changes over time. do you write your bash scripts so they can re-run over and over on the same box?
[2013-02-12 17:53:38 -0500] c_t: It was a bit gimpy, but I got it to work by doing knife bootstrap, going in and installing 1.7.6 and uninstalling 1.7.7
[2013-02-12 17:53:45 -0500] c_t: and then running chef-client normally
[2013-02-12 17:53:46 -0500] nlloyds2: codezombie: It can seem like overkill when you start out with a small number of servers, but once you have to manage multiple applications and servers it helps a bunch.
[2013-02-12 17:54:04 -0500] kallistec: jrohwedder: DoS vulnerability, limited exposure for client
[2013-02-12 17:54:14 -0500] kallistec: jrohwedder: Fix is in progress
[2013-02-12 17:54:21 -0500] codezombie: kallistec: Yep.
[2013-02-12 17:54:45 -0500] gmcinnes: codezombie: I personally like the fact that I can use the chef server to pull information about other machines into local configuration
[2013-02-12 17:54:45 -0500] codezombie: nlloyds2: Though, even the simplest thing like installing nginx, looking at the recipes are massive and way overcomplicated for such a simplistic task.
[2013-02-12 17:55:45 -0500] nlloyds2: codezombie: I wouldn't call installing nginx "the simplest thing", but adding "recipe[nginx]
[2013-02-12 17:55:51 -0500] c_t: codezombie: I've found that it's really handy once you have it set up
[2013-02-12 17:55:58 -0500] nlloyds2: to a run-list takes care of all the details for you
[2013-02-12 17:56:01 -0500] gmcinnes: codezombie: like, I can tell all my machines what the name of the mail server is. And I can change that all easily later.
[2013-02-12 17:56:14 -0500] c_t: even if you don't have hundreds of servers
[2013-02-12 17:56:30 -0500] c_t: the templating stuff for configuration files and whatnot is pretty handy too
[2013-02-12 17:57:43 -0500] robbkidd: kallistec: Gem install managed with a bundler Gemfile in our repo. Saw that we had pinned chef gem to ~> 10.16.4. Changed that to ~> 10.20.
[2013-02-12 17:58:01 -0500] gmcinnes: codezombie: going even further, I can use chef server's pki infrastructure to provide shared secrets to everywhere that needs it without having to manage it manually
[2013-02-12 17:58:27 -0500] gmcinnes: speaking of. Anyone use knife-file plugin and start having weirdness on chef 11?
[2013-02-12 17:58:28 -0500] jrohwedder: kallistec: thanks that helps. I think I might be able to adjust my bootstrap definition
[2013-02-12 17:58:49 -0500] pattersonc: knife ssh doesn't seem to be finding the attributes 'cloud' and 'public_hostname' it's looking for but they are there.
[2013-02-12 17:59:09 -0500] pattersonc: which results in the msg i posted before. this was working fine a few days ago
[2013-02-12 17:59:25 -0500] codezombie: gmcinnes: that's all great, but I just can't see value beyond managing a farm I suppose.
[2013-02-12 17:59:27 -0500] toioiz: codezombie the issue with deploy once and done, comes when it's time to upgrade a box, after 1, 5, or 10 people have worked on it 7 years down the road when noone remembers what the configuration should look like. Or heaven forbid a hard drive failure and it's someone's first week on call :)
[2013-02-12 17:59:42 -0500] codezombie: well, thanks for the info folks. I was just curious, I'll stick w/ bash, it definitely works well for me.
[2013-02-12 17:59:44 -0500] pattersonc: it awesome that I can't push new code right now
[2013-02-12 18:00:48 -0500] jtimberman: Cookbook authoring office hours starting now on Google+ Hangout: https://plus.google.com/hangouts/_/ebc362015213c8011090341a7e81fe67e644f9b0 ; YouTube Stream: http://youtu.be/tofbjjfWEm4
[2013-02-12 18:01:55 -0500] mattt: jtimberman: i'm watching you
[2013-02-12 18:07:39 -0500] jtimberman: mattt: do you have questions we can answer?
[2013-02-12 18:07:53 -0500] mattt: jtimberman: nah, was just looking to see what sorts of things are covered
[2013-02-12 18:07:54 -0500] mattt: but thanks
[2013-02-12 18:08:02 -0500] jtimberman: trying out a new thing :)
[2013-02-12 18:08:13 -0500] miah: so far its pretty quiet :P
[2013-02-12 18:08:49 -0500] mattt: i have a lot of questions, but i think they'd be better answered by reading the wiki/docs more :)
[2013-02-12 18:09:58 -0500] jtimberman: could be, or you could get live help :)
[2013-02-12 18:10:31 -0500] manimal_: i didnt know about the hangout till now, I'm rob in the hangout
[2013-02-12 18:10:39 -0500] jtimberman: :D
[2013-02-12 18:10:45 -0500] pattersonc: knife search returns node data containing both the cloud attribute and the public_hostname attribute yet knife ssh says this "2 nodes found, but does not have the required attribute to establish the connection. Try setting another attribute to open the connection using --attribute." I have looked at the source and I'm not really sure why this stopped workinganyone have any thoughts?
[2013-02-12 18:10:47 -0500] manimal_: is it just cookbook authoring or general chef stuff?
[2013-02-12 18:13:30 -0500] Urocyon: ack!  a gem update on my chef server may have lost me my database.  Can't authenticate to the server now can't get the webui to run.  Anyone run into this before?  Know how to rescue my data?
[2013-02-12 18:14:43 -0500] Urocyon: I've gone from chef 10.14 to 10.20
[2013-02-12 18:15:05 -0500] tjr9898: jtimberman:  I'm still struggling with ssh keys for a private bitbucket repo.  Not quite ready to have a dedicated git server
[2013-02-12 18:15:18 -0500] gmcinnes: ugh. rails 11 yak shave.
[2013-02-12 18:15:23 -0500] gmcinnes: kill me
[2013-02-12 18:15:34 -0500] c_t: I suggest painting the yak red
[2013-02-12 18:15:49 -0500] robbkidd: Surely you mean blue.
[2013-02-12 18:17:07 -0500] Urocyon: yak shedding
[2013-02-12 18:18:02 -0500] flzz: Urocyon: try to uninstall json 1.7.7 and install 1.7.6
[2013-02-12 18:18:13 -0500] jtimberman: manimal_: the intention was cookbook authoring, but if you have a general chef question I'm happy to cover that too
[2013-02-12 18:19:14 -0500] gmcinnes: hmm. weird. I see a difference between 10.16.6 and 10.20.0 in how it handles encrypted data bags. Is that expected?
[2013-02-12 18:19:18 -0500] miah: hrm. the runit cookbook doesnt set owner/group on the 'supervise' directory :/
[2013-02-12 18:19:28 -0500] miah: eg, /etc/sv/chef-client/supervise
[2013-02-12 18:19:28 -0500] Urocyon: fizz.  Giving that a try.
[2013-02-12 18:19:38 -0500] flzz: gmcinnes: yes to be forward compatible with Chef 11
[2013-02-12 18:19:55 -0500] gmcinnes: but backward compatible with 10.16.6? :)
[2013-02-12 18:20:00 -0500] flzz: yup
[2013-02-12 18:20:13 -0500] gmcinnes: this is going to be, erm, entertaining :)
[2013-02-12 18:20:39 -0500] flzz: yea its been an entertaining several weeks in the world of ruby
[2013-02-12 18:21:02 -0500] flzz: which is completely unrelated to the data bag stuff, but still :P
[2013-02-12 18:21:21 -0500] toioiz: question, are node attributes valid entries for use in remote_file locations? ie. can I call http://www.webserver.com/<%= node[fqdn] %>
[2013-02-12 18:21:36 -0500] gmcinnes: flzz: I'm looking at the "breaking changes in chef 11" but I'm not grokking it.  What am I supposed to do to get 10.20.0 to work?
[2013-02-12 18:21:37 -0500] robbkidd: Successfully installed chef-10.20.0 ; Starting Chef Client, version 11.2.0
[2013-02-12 18:21:43 -0500] robbkidd: Wha-wha-what?
[2013-02-12 18:23:03 -0500] robbkidd: I bootstrapped with --version 10.20.0, but now the chef-client running appears to be 11.2.0. Color me confused.
[2013-02-12 18:23:21 -0500] Urocyon: yay!  THank you fizz!  The json switch seems to have fixed me up.
[2013-02-12 18:23:28 -0500] flzz: gmcinnes: I'm not sure, it just worked for me when I upgraded
[2013-02-12 18:23:35 -0500] flzz: Urocyon: sweet :)
[2013-02-12 18:23:46 -0500] tomdzk: robbkidd: are you using knife-rackspace ?
[2013-02-12 18:23:51 -0500] gmcinnes: ah. off to my own hell then :)
[2013-02-12 18:24:01 -0500] flzz: sorry about that
[2013-02-12 18:24:02 -0500] robbkidd: tomdzk: Nope. All this is just on vagrant machines.
[2013-02-12 18:24:17 -0500] itchyouch: hey, if I do a backup & restore and I wanted to restore all the clients.  Can I just do a knife client edit <someclient> and set the public key manually?  Or do we need to regenerate all the keys on all the hosts?
[2013-02-12 18:24:30 -0500] zts: gmcinnes: taking a step back, what's the difference you are seeing?
[2013-02-12 18:24:45 -0500] gmcinnes: undefined method `decrypt_value' for Chef::EncryptedDataBagItem:Class
[2013-02-12 18:25:00 -0500] tomdzk: robbkidd: knife-rackspace has a dependency on chef 11.2.0 atm, there might be other knife plugins that do the same
[2013-02-12 18:25:01 -0500] gmcinnes: when using the knife-chef plugin
[2013-02-12 18:25:25 -0500] gmcinnes: knife-file, sorry
[2013-02-12 18:26:09 -0500] mkirk: Any chef-solr experts out there?
[2013-02-12 18:26:31 -0500] smallChange: what .pem files will i need to move from the server to my clients?
[2013-02-12 18:27:12 -0500] mkirk: I'm getting a 404 NOT_FOUND in when hitting http://solr:8983/solr/admin after upgrading to 10.18.2-1
[2013-02-12 18:28:53 -0500] mkirk: jetty is running and answering on the port.
[2013-02-12 18:29:12 -0500] mkirk: Requests are being logged in the request.log file.
[2013-02-12 18:29:33 -0500] mkirk: No results are returning from search and the admin page is 404
[2013-02-12 18:31:16 -0500] stoked: anyone using the community iis cookbook?
[2013-02-12 18:31:16 -0500] tomdzk: mkirk: maybe the solr webapp is not running ? check the error log file, maybe also restart the chef-solr service ?
[2013-02-12 18:31:40 -0500] stoked: can't seem to get it to work... think it's failing on accepting the eula with webpi
[2013-02-12 18:32:37 -0500] mkirk: tomdzk: I'ver restarted the service and the error log shows everythign is is fine...
[2013-02-12 18:32:39 -0500] c_t: sadly there is no "watch the kid for a few minutes and make him an English muffin" cookbook
[2013-02-12 18:32:40 -0500] mkirk: v
[2013-02-12 18:32:40 -0500] mkirk: Started SocketConnector@0.0.0.0:8983
[2013-02-12 18:33:09 -0500] mkirk: tomdzk: how can I check for the solr webapp?
[2013-02-12 18:33:53 -0500] pattersonc: so i think i found the issue if anyone cares
[2013-02-12 18:34:00 -0500] pattersonc: json 1.7.7 seems to break knife ssh
[2013-02-12 18:34:15 -0500] c_t: json 1.7.7 seems to be breaking everything
[2013-02-12 18:34:29 -0500] pattersonc: it's ruining my day
[2013-02-12 18:34:31 -0500] pattersonc: that's for sure
[2013-02-12 18:34:33 -0500] rava: is there anyway to fix this: Unable to create Chef::RunList::RunListItem from String:"recipe[]": must be recipe[] or role[] - (ArgumentError)
[2013-02-12 18:34:45 -0500] c_t: the word from on high is that a fix is being done, but downgrade to 1.7.6 for the time being
[2013-02-12 18:34:59 -0500] c_t: rava: ^^ that's for you too
[2013-02-12 18:35:12 -0500] tomdzk: mkirk: I think if it loads properly, there should be a /var/lib/chef/solr/jetty/work/Jetty_0_0_0_0_8983_solr.war__solr__* folder
[2013-02-12 18:35:16 -0500] c_t: er, or I think it is
[2013-02-12 18:35:30 -0500] rava: json gem downgrade?
[2013-02-12 18:35:41 -0500] tomdzk: pattersonc: see also http://tickets.opscode.com/browse/CHEF-3863
[2013-02-12 18:35:42 -0500] pattersonc: gem install json -v 1.7.6
[2013-02-12 18:35:42 -0500] c_t: rava: it's been breaking a lot of stuff
[2013-02-12 18:35:44 -0500] nlloyds2: rava: That's probably it
[2013-02-12 18:35:54 -0500] robbkidd: chef (~> 10.20) ruby depends on net-ssh (~> 2.6) ; berkshelf (>= 0) ruby depends on net-ssh (2.2.2)
[2013-02-12 18:35:56 -0500] robbkidd: Argh!
[2013-02-12 18:35:56 -0500] rava: i'm on 1.6.1 on this server
[2013-02-12 18:36:19 -0500] pattersonc: robbkidd - ran into that issue as well
[2013-02-12 18:36:21 -0500] c_t: what's the run list look like?
[2013-02-12 18:36:30 -0500] pattersonc: sandboxed chef into a rvm gemset
[2013-02-12 18:36:30 -0500] mkirk: tomdzk: I have /var/lib/chef/solr/solr-jetty/work/Jetty_0_0_0_0_8983_solr.war__solr__k1kf17
[2013-02-12 18:36:35 -0500] rava: c_t: this is from the server log
[2013-02-12 18:36:51 -0500] tomdzk: mkirk: and there should be stuff about the solr indexer in the error log
[2013-02-12 18:37:11 -0500] robbkidd: pattersonc: Did you get past it? Or are we still in solidarity territory?
[2013-02-12 18:37:44 -0500] c_t: rava: what does it look like in the role or node though?
[2013-02-12 18:37:46 -0500] pattersonc: yes.
[2013-02-12 18:38:05 -0500] pattersonc: is this on your server or local ?
[2013-02-12 18:38:07 -0500] rava: i'm not sure which node is getting this, let me dig again
[2013-02-12 18:38:26 -0500] c_t: the *node* has json 1.6.1, or the server does?
[2013-02-12 18:38:32 -0500] rava: server
[2013-02-12 18:38:34 -0500] mkirk: tomdzk: I'll see if I can enable better logging because there is nothing other than startup and shutdown info in the /var/log/chef/solr.log file
[2013-02-12 18:38:36 -0500] c_t: check the node
[2013-02-12 18:38:58 -0500] rava: all my nodes puke on my users cookbook and running knife index rebuild
[2013-02-12 18:39:14 -0500] robbkidd: pattersonc: Local workstation.
[2013-02-12 18:39:24 -0500] pattersonc: do you use rvm?
[2013-02-12 18:39:31 -0500] robbkidd: pattersonc: Yep.
[2013-02-12 18:39:33 -0500] mkirk: tomdzk: and this message: 6772 [btpool0-3] WARN org.mortbay.log - Aliased resource: file:/var/lib/chef/solr/solr-jetty/webapps/solr/admin/==file:/usr/share/solr/admin/
[2013-02-12 18:39:39 -0500] c_t: rava: sounds an awful lot like the json thing everyone's been suffering from
[2013-02-12 18:40:13 -0500] rava: c_t: yeah, i'm thinking the same. i'm looking at this error and i see it looking at ruby/1.8/json/common.rb 'parse' method
[2013-02-12 18:40:22 -0500] pattersonc: create a gemset and install chef gem
[2013-02-12 18:40:35 -0500] pattersonc: make sure chef is not isntalled in @global
[2013-02-12 18:40:40 -0500] pattersonc: if it is remove it
[2013-02-12 18:40:52 -0500] tomdzk: mkirk: I don't have that in my chef server logs, but then again I'm running an older version
[2013-02-12 18:41:00 -0500] rava: pattersonc: that advice for me?
[2013-02-12 18:41:24 -0500] mkirk: tomdzk: The warning come when I try the /solr/admin webui.
[2013-02-12 18:41:49 -0500] tomdzk: mkirk: does /usr/share/solr/admin exist ?
[2013-02-12 18:41:57 -0500] rava: i haven't updated any of the libs/clients/server. i'm confused how this suddenly came about. the last thing i mucked with was the pychef python module. could have been from playing with node attributes using it
[2013-02-12 18:42:24 -0500] pattersonc: rava: netssh issue?
[2013-02-12 18:42:29 -0500] mkirk: tomdzk: Yes, with about 30 files in it.
[2013-02-12 18:42:54 -0500] tomdzk: mkirk: and proper file ownership/permissions ?
[2013-02-12 18:42:55 -0500] rava: pattersonc: nay, seems to be the json string garbage
[2013-02-12 18:43:00 -0500] robbkidd: pattersonc: Already using a gemset. Should I create a new one?
[2013-02-12 18:43:02 -0500] mkirk: tomdzk: I feel like I'm missing a / somewhere in a config file.
[2013-02-12 18:43:12 -0500] mkirk: tomdzk: They are all owned by root...
[2013-02-12 18:43:21 -0500] pattersonc: robbkidd: what is the error msg?
[2013-02-12 18:43:22 -0500] mkirk: tomdzk: and 644
[2013-02-12 18:43:25 -0500] rava: pattersonc: was just that c_t and i were talking about the json gem and thought your stuff was related :)
[2013-02-12 18:43:27 -0500] ieslick: Anyone seen this error trying to load a simple roles.json file?  FATAL: NoMethodError: undefined method `run_list' for nil:NilClass
[2013-02-12 18:43:39 -0500] ieslick: I see the same thing on 11.2 and 10.20.0
[2013-02-12 18:43:45 -0500] tomdzk: mkirk: could be, maybe change the url to file:///usr/share/solr/admin
[2013-02-12 18:44:15 -0500] tomdzk: ieslick: http://tickets.opscode.com/browse/CHEF-3863
[2013-02-12 18:44:21 -0500] robbkidd: pattersonc: bundler cannot resolve the dependencies between chef (net-ssh ~> 2.6) and berkshelf (net-ssh = 2.2.2)
[2013-02-12 18:44:28 -0500] tomdzk: we should maybe add that ticket to the IRC greeting ?
[2013-02-12 18:44:29 -0500] ieslick: Only clue I have from debug printout of chef-client is "DEBUG: Re-raising exception: NoMethodError - undefined method `reset_defaults_and_overrides' for #<Hash:0x7f7c1b95f558>" printed in response to the initial GET to api.opscode (using hosted chef)
[2013-02-12 18:44:39 -0500] pattersonc: robbkidd: what version of chef gem is installed?
[2013-02-12 18:45:00 -0500] robbkidd: pattersonc: Currently 10.18.2. I'm trying to bump it to 10.20.0.
[2013-02-12 18:45:11 -0500] pattersonc: yes. do that. it should resolve the issue.
[2013-02-12 18:45:19 -0500] robbkidd: pattersonc: 10.20.0 requires net-ssh ~> 2.6
[2013-02-12 18:45:51 -0500] ieslick: @tomdzk  Thanks, couldn't find that last night
[2013-02-12 18:46:27 -0500] pattersonc: create a seperate gemset for chef 10.20
[2013-02-12 18:46:40 -0500] pattersonc: separate even
[2013-02-12 18:49:04 -0500] rava: c_t: upgrading that gem didn't help
[2013-02-12 18:49:27 -0500] rava: index rebuild still bails with a server error and that argument error exception is raised in the server log
[2013-02-12 18:49:50 -0500] c_t: rava: I meant that the nodes might have 1.7.7
[2013-02-12 18:49:57 -0500] c_t: and if they do they should downgrade to 1.7.6
[2013-02-12 18:50:16 -0500] toioiz: what is the best way to call a remote http file using the fqdn of a machine, ie. http://webserver.com/$fqdn right now I just have a bash code block doing a wget http://webserver.com/`hostname`, and I assume that is bad form
[2013-02-12 18:50:43 -0500] rava: they're all using the omnibus package which has json 1.7.6 embedded
[2013-02-12 18:51:10 -0500] c_t: hmm, I was having the same 1.7.7 trouble with omnibus yesterday
[2013-02-12 18:51:42 -0500] robbkidd: Argh! berkshelf 1.1.6 requires chef = 10.16.2 https://github.com/RiotGames/berkshelf/blob/v1.1.6/berkshelf.gemspec#L33
[2013-02-12 18:51:49 -0500] ivey: hey guys, we'll figure out a fix for berkshelf and chef 10.20 shortly
[2013-02-12 18:52:00 -0500] ivey: we;ve all been playing dependency whack-a-mole the past week
[2013-02-12 18:52:12 -0500] robbkidd: ivey: So you're saying I should stop thrashing about?
[2013-02-12 18:52:16 -0500] ivey: yes
[2013-02-12 18:52:54 -0500] nlloyds2: I think that's a 73X status https://github.com/joho/7XX-rfc
[2013-02-12 18:53:12 -0500] jmickle: agh hi riot games ;-)
[2013-02-12 18:53:22 -0500] ivey: jmickle:
[2013-02-12 18:53:23 -0500] digitallogic: have a question about json vs ruby roles if someone has a sec
[2013-02-12 18:53:24 -0500] ivey: hi!
[2013-02-12 18:53:27 -0500] jmickle: i can't get away from your recruiters :-P
[2013-02-12 18:53:37 -0500] ivey: haha well there's an easy solution
[2013-02-12 18:53:40 -0500] digitallogic: apparently the ruby file isn't stored on chef server?
[2013-02-12 18:53:40 -0500] jmickle: hehehe
[2013-02-12 18:53:48 -0500] cmceldowney: ivey: be nice. some people like roles
[2013-02-12 18:53:53 -0500] jmickle: hahaha
[2013-02-12 18:53:58 -0500] ivey: HAH i was talking to jmickle
[2013-02-12 18:54:10 -0500] ivey: for once i wash't badmouthing roles
[2013-02-12 18:54:13 -0500] jmickle: ha
[2013-02-12 18:54:24 -0500] cmceldowney: ivey: sure, sure, sure... your reputation precedes you.
[2013-02-12 18:54:26 -0500] cmceldowney: :)
[2013-02-12 18:55:40 -0500] digitallogic: I'm trying to compare my roles on chef-server to what's in git, but some of my roles are in ruby files
[2013-02-12 18:55:56 -0500] cmceldowney: anyone have any experience with resource/provider inheritance and how to set that up? Looking to create a generic deploy_revision setup that works for most sites, then allow client-specific overrides for different portions of the capistrano process, e.g. Client A needs special stuff done before_symlinks, but other than that needs exactly the same logic as Clients B-F
[2013-02-12 19:00:53 -0500] jmickle: ivey: did riot games upgrade chef client to 11?
[2013-02-12 19:01:17 -0500] ivey: not yet, afaik
[2013-02-12 19:01:21 -0500] jmickle: ah
[2013-02-12 19:01:24 -0500] ivey: we have lots of teams, so some people may have
[2013-02-12 19:02:36 -0500] jmickle: ah
[2013-02-12 19:03:12 -0500] tolland: hi
[2013-02-12 19:03:25 -0500] digitallogic: so is there a way I can locally take a chef role and convert it to json?
[2013-02-12 19:03:33 -0500] tolland: is there a work around to having directory resources with the same name in different cookbooks?
[2013-02-12 19:03:45 -0500] tolland: I mean to suppress the cloned attributes warnings?
[2013-02-12 19:04:35 -0500] cmceldowney: digitallogic: The Ruby->JSON mapping is super close. You should just be able to do it manually because the key names are identical: http://wiki.opscode.com/display/ChefCN/Roles
[2013-02-12 19:04:43 -0500] wdpro_kevin: digitallogic: I think you can upload the ruby and then export it as json
[2013-02-12 19:05:34 -0500] cmceldowney: digitallogic: actually, wdpro is right... just upload the role, then do this: "knife role show webhead -F json"
[2013-02-12 19:05:54 -0500] digitallogic: I'm trying to compare what's in my git repo to what's on the chef server isn't an option
[2013-02-12 19:06:02 -0500] digitallogic: it would pottentially overwrite what had been up there
[2013-02-12 19:06:57 -0500] digitallogic: *  to what's on the chef server, so that isn't an option
[2013-02-12 19:07:17 -0500] cmceldowney: digitallogic: the knife essentials has knife diff which suppsedly helps with this kind of local/server comparison, altough I will caveat and say that it's not worked at all for me. I'm tremendously dumb, though... so.. https://github.com/jkeiser/knife-essentials
[2013-02-12 19:07:23 -0500] wdpro_kevin: rename the role you are comparing before upload
[2013-02-12 19:07:56 -0500] digitallogic: cmceldowney: I'll take a look, thanks
[2013-02-12 19:08:20 -0500] cmceldowney: digitallogic: actually wdpro's suggestion makes a ton of sense and will get you there much quicker...
[2013-02-12 19:11:16 -0500] digitallogic: actually looks like knife-essentials has a similar problem, says I don't have a roles/MyRole.json though I've got a roles/MyRole.rb
[2013-02-12 19:11:41 -0500] digitallogic: I'm beginning to fear the answer is "don't use ruby for roles"
[2013-02-12 19:12:10 -0500] wdpro_kevin: digitallogic: (y)
[2013-02-12 19:12:57 -0500] digitallogic: that's ashame, I like leaving code comments describing attributes/run lists that aren't immediately obvious
[2013-02-12 19:13:11 -0500] digitallogic: which was the only reason I started using ruby for roles
[2013-02-12 19:13:24 -0500] cmceldowney: digitallogic: You can always add multiple _comment keys in your json. We do this for databags all the time.
[2013-02-12 19:13:57 -0500] Chris____: Hello, could someone point me to documentation to use LDAP login with chef server? I'm using version 10.18.2 installed on Debian via apt.
[2013-02-12 19:14:14 -0500] digitallogic: cmceldowney: thanks
[2013-02-12 19:17:31 -0500] rb1980: good morning, chefs
[2013-02-12 19:18:13 -0500] rb1980: I am wondering: is there a "fast" way to get the run_list on a node, without having to invoke a full chef run?
[2013-02-12 19:18:40 -0500] jmickle: knife node show FOO
[2013-02-12 19:18:43 -0500] rb1980: i need to "query" this from another script to see if a certain recipe is in the run_list on a node
[2013-02-12 19:18:55 -0500] jmickle: rb1980: knife node show FOO
[2013-02-12 19:19:03 -0500] manimal_: jtimberman: thank you thank you thank you for the hangout you helped me tons
[2013-02-12 19:19:03 -0500] rb1980: ok, assuming I don't have knife set up on all my nodes
[2013-02-12 19:19:10 -0500] jmickle: or if from another run list you can use search
[2013-02-12 19:19:40 -0500] rb1980: like maybe grep some file in /var/chef/cache?
[2013-02-12 19:19:52 -0500] rb1980: i need something very light weight
[2013-02-12 19:20:04 -0500] cmceldowney: rb1980: so this task is happening entirely outside chef's domain? not in context of a recipe?
[2013-02-12 19:20:10 -0500] rb1980: right
[2013-02-12 19:20:20 -0500] rb1980: out of band from chef
[2013-02-12 19:20:22 -0500] jmickle: oh yeah then knife node show is probably your best bet
[2013-02-12 19:20:30 -0500] cmceldowney: rb1980: but the script is triggered on a node that chef controls?
[2013-02-12 19:20:45 -0500] jmickle: or might be able to query your chef server for that info
[2013-02-12 19:20:56 -0500] wdpro_kevin: there are other chef api libs out there
[2013-02-12 19:21:38 -0500] wdpro_kevin: what language are you using to query?
[2013-02-12 19:21:43 -0500] rb1980: ok, i was hoping to avoid any kind of api call, hoping to keep it local
[2013-02-12 19:22:03 -0500] rb1980: i have not determined yet, but was hoping just to use bash shell script
[2013-02-12 19:22:23 -0500] ctracey: anyone have a working example of template partials?
[2013-02-12 19:22:25 -0500] cmceldowney: rb1980: Question stands: Did Chef configure this node that you're running on?
[2013-02-12 19:22:54 -0500] wdpro_kevin: rb1980: you only need to know about the server the script is running on?
[2013-02-12 19:23:00 -0500] cmceldowney: rb1980: If so, then you can just dump the node's run list during a chef run to a file somewhere that you can then refer to from command line. /var/foo/my_run_list.txt or whatever
[2013-02-12 19:23:02 -0500] wdpro_kevin: not any other nodes?
[2013-02-12 19:23:18 -0500] rb1980: yeah, ok that makes sense
[2013-02-12 19:23:29 -0500] tjr9898: is there a good tut for the users cookbook
[2013-02-12 19:23:41 -0500] rb1980: yes, chef is running on the node
[2013-02-12 19:23:48 -0500] rb1980: so that would work
[2013-02-12 19:25:15 -0500] rava: c_t: so i've got a dead node entry in my couch db somewhere that has this borked run list
[2013-02-12 19:25:28 -0500] rava: trying to delete the knode causes the knife client to puke with server error
[2013-02-12 19:25:30 -0500] tcrayford: Is hosted chef ok? I keep on getting permission errors when trying to view clients, and we haven't edited any permissions
[2013-02-12 19:27:10 -0500] rava: https://gist.github.com/bd-erik/4772571
[2013-02-12 19:27:48 -0500] rava: i'm wondering if restoring couchdb data from a few days ago when this node/client didn't exist that it would fix things
[2013-02-12 19:28:08 -0500] rava: but i'm not 100% on entirely what's stored in couchdb besides client key data and node run information
[2013-02-12 19:32:37 -0500] jkeiser: digitallogic: yeah, knife-essentials doesn't support .rb at the moment.  It's something I'd like to rectify eventually
[2013-02-12 19:41:24 -0500] mconigliaro: quick question for the opscode folks: i'm thinking about storing some extra data in my .json roles for an external non-chef application (specifically vagrant). is this a bad idea?
[2013-02-12 19:41:49 -0500] mconigliaro: i can't see how it would hurt anything, but i figured i'd ask
[2013-02-12 19:42:33 -0500] mconigliaro: i already know i can create additional keys in there and chef will just ignore them
[2013-02-12 19:46:42 -0500] gchristensen: jtimberman: your mac_os_x cookbook is a godsend right now :)
[2013-02-12 19:48:38 -0500] jtimberman: gchristensen: right on
[2013-02-12 19:48:48 -0500] jtimberman: manimal_: my pleasure! Glad to help out.
[2013-02-12 19:48:53 -0500] cwj: speaking of mac_os_x cookbook, i started mucking with it this past weekend. seems like settings with string-type values arent getting set
[2013-02-12 19:49:12 -0500] cwj: probably because they dont get '-string' passed as one of the flags
[2013-02-12 19:49:43 -0500] cwj: so maybe i'll have a PR for you soon jtimberman
[2013-02-12 19:50:20 -0500] digitallogic: jkeiser: for what it's worth I wrote a script to convert the ruby file to json https://gist.github.com/MarkRoddy/4772809
[2013-02-12 19:50:53 -0500] gchristensen: cwj: hrmm... interesting. I haven't gotten as far as actually implementing it yet. I'll be interested in your BR.
[2013-02-12 19:50:56 -0500] gchristensen: in your PR.
[2013-02-12 19:51:49 -0500] cwj: gchristensen: ok, for my part i would be interested in knowing whether or not you can reproduce my findings
[2013-02-12 19:52:04 -0500] gchristensen: when I get to that point, I'll give it a test for you :)
[2013-02-12 19:52:27 -0500] cwj: cheers :)
[2013-02-12 19:52:49 -0500] jtimberman: cwj: data types are hard, lets ride bikes.
[2013-02-12 19:53:04 -0500] cwj: jtimberman: yeah that was about where i got with a fix :)
[2013-02-12 19:53:05 -0500] makerbreakr: how do you guys monitor weblogs?
[2013-02-12 19:53:23 -0500] makerbreakr: ie, 1500 servers, running chef, what mechanism do you find the best
[2013-02-12 19:53:48 -0500] cmceldowney: makerbreaker: we're looking at migrating to logstash. right now it's ad hoc at best
[2013-02-12 19:53:50 -0500] kaerast: has anybody come up with a good way of enforcing a role/recipe can only be applied to a single node within an environment?  Or should I just use searches and custom code within recipes?
[2013-02-12 19:54:08 -0500] jtimberman: cwj: went bikeriding instead? Yeah. I should dust mine off, get it a tune-up...
[2013-02-12 19:54:35 -0500] cwj: mine is on the trainer, also gathering dust :/
[2013-02-12 19:54:39 -0500] c_t: drive up one of those high mountain passes that are conveniently located near you, jtimberman
[2013-02-12 19:54:52 -0500] cwj: if anyone wants to ride bikes during MWRC i am game :)
[2013-02-12 19:54:54 -0500] cmceldowney: kaerast: our approach has been to search for all nodes in the given environment w/ role, manually sort them, then if you're the first node in the results, you get the special treat.
[2013-02-12 19:55:01 -0500] c_t: there's one in particular in Colorado that's been making me drool
[2013-02-12 19:55:03 -0500] jtimberman: cwj: i'm not likely to bring my bike on a plane.
[2013-02-12 19:55:04 -0500] nlloyds2: makerbreakr: Depends what you mean by "monitor" logstash is great for pumping logs into graphite (where you can measure 500/400/200/etc) responses and error rates) and kibana is a decent UI for looking at them
[2013-02-12 19:55:06 -0500] kaerast: makerbreaker, that's an order of magnitude greater than the number of servers we manage - but different departments use Splunk, Logstash, and simple tails/greps
[2013-02-12 19:55:18 -0500] c_t: in a black zone according to the Dark Sky map, and about 12,000 feet up
[2013-02-12 19:55:21 -0500] c_t: looks *awesome*
[2013-02-12 19:55:24 -0500] kaerast: cmceldowney, that's roughly what I was going to use - just wondered if anybody had come up with anything nicer
[2013-02-12 19:55:26 -0500] cwj: jtimberman: bummer dude
[2013-02-12 19:55:54 -0500] makerbreakr: I have a weird use case, in that I need to find some mechanism, to get logs from these servers, over https
[2013-02-12 19:56:26 -0500] kaerast: https specifically, or just an encrypted transfer mechanism?
[2013-02-12 19:56:31 -0500] vegardx_: jtimberman: I fell a sleep yesterday, but the issue with Debian Wheezy and Chef 10.x: I just apt-get installed from opscode mirrors and now chef-server won't start.
[2013-02-12 19:56:37 -0500] makerbreakr: https specifically
[2013-02-12 19:56:40 -0500] nlloyds2: makerbreakr: logstash is really flexible, so that would be a good thing to start with
[2013-02-12 19:57:03 -0500] vegardx_: Is there an init-script to restart ALL services in the right order for chef?
[2013-02-12 19:57:13 -0500] makerbreakr: cool, looking at the docs now, thanks
[2013-02-12 19:57:32 -0500] nlloyds2: vegardx_: `sudo reboot` ;)
[2013-02-12 19:58:31 -0500] vegardx_: nlloyds2: Hehe, that's what I'm doing now when something seems to have put a gun to its head and pulled the trigger. Faster then figuring out what is down and manually restarting them.
[2013-02-12 19:59:14 -0500] vegardx_: If the webui crashes when you do /anything/. What could be the possible issues? Solr? Expander? RabbitMQ?
[2013-02-12 19:59:46 -0500] behemphi: Is anyone suddenly having trouble with knife-rackspace 0.6.3?  I am suddenly getting this error:  https://gist.github.com/behemphi/4772880
[2013-02-12 20:00:08 -0500] makerbreakr: vegardx_ ubuntu 11.04 by any chance?
[2013-02-12 20:00:54 -0500] vegardx_: Debian Wheezy
[2013-02-12 20:02:02 -0500] behemphi: I should probably mention that I can create a node and use knife bootstrap just fine
[2013-02-12 20:02:17 -0500] behemphi: *create a server and
[2013-02-12 20:02:18 -0500] vegardx_: makerbreakr: You have similar issues?
[2013-02-12 20:02:26 -0500] makerbreakr: ya, my webui kept breaking
[2013-02-12 20:03:08 -0500] makerbreakr:  sudo dpkg --force-depends -P chef-solr sudo apt-get install -f knife index rebuild -y.
[2013-02-12 20:03:16 -0500] makerbreakr: that typically fixed it
[2013-02-12 20:04:40 -0500] vegardx_: Well, I have no idea what is actually wrong.
[2013-02-12 20:04:50 -0500] vegardx_: But solr seems to be the issue, as it always is.
[2013-02-12 20:04:53 -0500] Mithrandir: a vegardx_
[2013-02-12 20:04:58 -0500] makerbreakr: ya, I never did actually figure out the root cause
[2013-02-12 20:05:07 -0500] makerbreakr: I upgraded to 12.04, reinstalled, and it all went away
[2013-02-12 20:05:56 -0500] vegardx_: Mithrandir: hm?
[2013-02-12 20:06:14 -0500] Mithrandir: vegardx_: just saying hi
[2013-02-12 20:06:19 -0500] Mithrandir: haven't seen you much in here before.
[2013-02-12 20:06:21 -0500] vegardx_: Ah, hi!
[2013-02-12 20:06:42 -0500] vegardx_: I'm usually lucky enoug that Kristian handles Chef :p
[2013-02-12 20:07:42 -0500] Mithrandir: :-)
[2013-02-12 20:10:42 -0500] mconigliaro: anyone (especially opscode employees) care to give me some feedback on this? http://community.opscode.com/questions/273
[2013-02-12 20:14:10 -0500] mattray: behemphi: looks like a dns issue
[2013-02-12 20:14:31 -0500] mattray: behemphi: at least, looking at where the code blows up
[2013-02-12 20:15:06 -0500] behemphi: So @mattray do you think this is a change at rackspace?  I am running the command from an OpenCloud server to create another opencloud server via the public IP
[2013-02-12 20:15:25 -0500] mattray: behemphi: ahhh, that could be the problem.
[2013-02-12 20:15:33 -0500] makerbreakr: i have run into this behemphi...give me a second
[2013-02-12 20:16:18 -0500] mattray: behemphi: I'd think you could use private-network, but the DNS thing might just have to go completely
[2013-02-12 20:16:30 -0500] behemphi: @mattray @makerbreaker I have been doing it that way for more than a year (using one cloud server to create another)
[2013-02-12 20:16:54 -0500] behemphi: sorry @mattray not sure what you mean by "go completely"
[2013-02-12 20:17:13 -0500] mattray: behemphi: stop bothering with DNS completely and just use IP addresses
[2013-02-12 20:17:16 -0500] behemphi: This was the command:  `knife rackspace server create -E 'prod_tiny' -r 'role[deployment-host]' -S merry -N merry -f 2`
[2013-02-12 20:17:34 -0500] mattray: behemphi: well, if it's a persistent new failure for Rackspace, please open a KNIFE ticket and we'll take a look
[2013-02-12 20:18:17 -0500] behemphi: I'll do that Matt I was thinking I'd be sure it wasn't me.  (Occam and his damn razor!)
[2013-02-12 20:18:32 -0500] behemphi: Hey @mattray will you also drop me the date and time for Chef Cafe?
[2013-02-12 20:19:01 -0500] kigster: is this a good place to ask questions?  We are having trouble today with chef 10.20, and parsing responses back from OpsCode
[2013-02-12 20:19:10 -0500] mattray: behemphi: since you're already running from source, try commenting out https://github.com/opscode/knife-rackspace/blob/master/lib/chef/knife/rackspace_server_create.rb#L196 and https://github.com/opscode/knife-rackspace/blob/master/lib/chef/knife/rackspace_server_create.rb#L227
[2013-02-12 20:19:13 -0500] kigster: getting this error: [2013-02-12T20:14:09+00:00] DEBUG: Re-raising exception: NoMethodError - undefined method `reset_defaults_and_overrides' for #<Hash:0x00000001b281c0> /opt/local/lib/ruby/gems/1.9.3/gems/chef-10.20.0/lib/chef/client.rb:251:in `build_node'
[2013-02-12 20:19:37 -0500] kigster: so looks like @node is not set as an object, but just a hash
[2013-02-12 20:19:40 -0500] mattray: behemphi: austinchefcafe.eventbrite.com
[2013-02-12 20:22:24 -0500] makerbreakr: why would a knife cookbook upload -a fail with a connection time out, but knife node list not?
[2013-02-12 20:23:18 -0500] mattray: makerbreaker: cookbook upload is going to chef server and s3?
[2013-02-12 20:23:29 -0500] mattray: makerbreaker: if you're using Hosted Chef
[2013-02-12 20:23:56 -0500] makerbreakr: sorry, forgot to specify, private chef
[2013-02-12 20:24:10 -0500] behemphi: @mattray did you still want me to list Chef Cafe as part of the meetup (I would be thrilled to!)
[2013-02-12 20:24:23 -0500] mattray: behemphi: yes please
[2013-02-12 20:24:32 -0500] behemphi: rockin' matt thx
[2013-02-12 20:24:33 -0500] mattray: behemphi: the more the merrier
[2013-02-12 20:27:31 -0500] makerbreakr: if all my systems are ubuntu, and a cookbook depends on yum, am I ok to delete the dependency from the metadata.rb?
[2013-02-12 20:27:56 -0500] leifmadsen: depends how the cookbook is built really....
[2013-02-12 20:28:11 -0500] leifmadsen: I'd just wrap it in a check for the type of system to only depend on it when a redhat based system
[2013-02-12 20:28:17 -0500] makerbreakr: k
[2013-02-12 20:28:38 -0500] btm: chef 11.4.0.rc.0 gem (only) is up for testing the JSON fix.
[2013-02-12 20:29:09 -0500] makerbreakr: https://gist.github.com/makerbreaker/4773094
[2013-02-12 20:29:39 -0500] makerbreakr: any idea why i would be getting this, but uploading an individual cookbook works
[2013-02-12 20:40:29 -0500] behemphi: @makerbreaker I just did that `knife cookbook upload -a` and it worked just peachy
[2013-02-12 20:41:42 -0500] jmickle: makerbreaker: hosted chef or private chef?
[2013-02-12 20:43:05 -0500] behemphi: I should say that is Hosted Chef for me
[2013-02-12 20:43:44 -0500] jmickle: behemphi: thats why i ask, this could be related to an issue with his server if its open source
[2013-02-12 20:43:50 -0500] behemphi: @mattray commenting out the two lines from above did the trick
[2013-02-12 20:44:14 -0500] mattray: behemphi: if you could open a ticket to capture that please I'd appreciate it
[2013-02-12 20:44:15 -0500] behemphi: yep @jmickle I am just trying to be helpful
[2013-02-12 20:44:28 -0500] behemphi: I will @mattray and thanks!
[2013-02-12 20:45:04 -0500] makerbreakr: private chef, it seems that there were too many cookbooks
[2013-02-12 20:45:19 -0500] makerbreakr: i upload them indivdually, and it worked, then reissued upload -a, and it worked
[2013-02-12 20:48:09 -0500] dwradcliffe: hey, what's the best way to iterate through a list of remote directories in a recipe?
[2013-02-12 20:48:59 -0500] miah: ruby has neat things like enumerators built in
[2013-02-12 20:48:59 -0500] makerbreakr: glob the directory, and for.each
[2013-02-12 20:51:08 -0500] jmickle: makerbreaker: interesting this may be a bug in knife related to ruby 1.9
[2013-02-12 20:51:27 -0500] jmickle: makerbreaker: the original version of knife was recommended to be on 1.8.7 I'm not sure if they have upgraded since
[2013-02-12 20:51:35 -0500] dwradcliffe: oh, right. thx miah makerbreakr
[2013-02-12 20:54:26 -0500] makerbreakr: could not find recipe user for cookbook rvm
[2013-02-12 20:57:49 -0500] Kzim: Hey is the chef 11 upgrade painfull ? :)
[2013-02-12 20:58:22 -0500] ptrstr: kzim: no..your cookbooks may not work though ;)(
[2013-02-12 20:58:39 -0500] gmcinnes: encrypted data bags might break :)
[2013-02-12 20:58:57 -0500] doomviking: ymmv
[2013-02-12 20:59:40 -0500] Kzim: i'm at the beginning have like 5 host and 5 cookbook so better be now i supose
[2013-02-12 21:00:06 -0500] ptrstr: jtimberman: kallistec: why would role.name not work anymore
[2013-02-12 21:00:10 -0500] makerbreakr: why woudl i be getting:  could not find recipe user for cookbook rvm
[2013-02-12 21:00:11 -0500] makerbreakr:  with the rvm cookbook:
[2013-02-12 21:00:11 -0500] ptrstr: e.g. config[:run_list].unshift("role[#{role.name}]")
[2013-02-12 21:00:21 -0500] makerbreakr: the cookbook user is upload to my private chef server
[2013-02-12 21:00:51 -0500] ptrstr: jtimberman: chef 10.20.0, i can't downgrade due to lovely net-ssh
[2013-02-12 21:00:59 -0500] teukka: btm: it seems that the omnibus installer only supports openSUSE 12.1 and even that only for chef 10. Will there be packages for chef 11 and opensuse 12.2?
[2013-02-12 21:04:06 -0500] btm: teukka: have you tried the 12.1 packages on 12.2?
[2013-02-12 21:05:14 -0500] btm: teukka: looks like there's a chef 11 package (it's the rhel 6 package).going to http://www.opscode.com/chef/install/ and filling out opensuse 12.1 and either arch populates 11.0 and 11.2 packages in the drop down
[2013-02-12 21:07:26 -0500] kallistec: ptrstr: https://tickets.opscode.com/browse/CHEF-3863 most likely
[2013-02-12 21:07:49 -0500] teukka: btm: yeah I just noticed those but didn't try them out. I was actually just checking a knife-solo issue. knife-solo uses install.sh and does not support downloading the package directly
[2013-02-12 21:09:03 -0500] teukka: btm: so install.sh *should* doenload the correct package for knife-solo bootstrapping to succeed. of course we can hack around it if needed...
[2013-02-12 21:09:48 -0500] ptrstr: kallistec: just great..i can't bootstrap anything lately
[2013-02-12 21:10:20 -0500] jubilo: sigh
[2013-02-12 21:10:20 -0500] btm: teukka: might be a knife-solo bug/feature. for instance, 'knife bootstrap' defaults to installing the same version of chef as you're running on your workstation.
[2013-02-12 21:11:42 -0500] teukka: btm: sorry, I'm mixing things. install.sh does the right thing but www.opscode.com/chef/download returns 404
[2013-02-12 21:12:28 -0500] btm: teukka: oh. right. take that URL and change 12.2 to 12.1 in it.
[2013-02-12 21:15:10 -0500] teukka: btm: yes I can do that manually but `knife solo prepare` runs install.sh and I don't think there is a way to override the url?
[2013-02-12 21:22:02 -0500] kgraham: hello, I am having this problem :  FATAL: NoMethodError: undefined method `run_list' for nil:NilClass
[2013-02-12 21:22:12 -0500] kgraham: when trying to register a new node, it only happens on new nodes
[2013-02-12 21:22:22 -0500] ptrstr: kgraham: same here
[2013-02-12 21:22:27 -0500] kgraham: orly
[2013-02-12 21:22:30 -0500] kgraham: interesting
[2013-02-12 21:22:36 -0500] kgraham: roles that exist are ok,
[2013-02-12 21:22:50 -0500] kgraham: i can't figure it out
[2013-02-12 21:23:04 -0500] kgraham: chef version is latest 10 series
[2013-02-12 21:23:16 -0500] kgraham: any ideas?
[2013-02-12 21:23:37 -0500] ptrstr: i tried downgrading json to 1.7.6..but then it fails on something else
[2013-02-12 21:23:55 -0500] ptrstr: see CHEF-3863
[2013-02-12 21:24:08 -0500] kgraham: ok
[2013-02-12 21:24:22 -0500] andreacampi: is this the same as posted on the mailing list, that had chefspec in the backtrace?
[2013-02-12 21:24:54 -0500] kgraham: moment, i'll check
[2013-02-12 21:25:08 -0500] kgraham: not familiar with the mailing list, should probably subscribe
[2013-02-12 21:25:23 -0500] ptrstr: i'm trying 11.4.0.rc.0  next
[2013-02-12 21:26:33 -0500] andreacampi: http://lists.opscode.com/sympa/arc/chef/2013-02/msg00213.html and replies
[2013-02-12 21:26:45 -0500] andreacampi: https://gist.github.com/anonymous/4771363
[2013-02-12 21:26:57 -0500] kgraham: well well, that fixed it thanks guys!
[2013-02-12 21:27:08 -0500] kgraham: thank you
[2013-02-12 21:27:21 -0500] kgraham: yes that is the same
[2013-02-12 21:31:49 -0500] Kzim: anyone have a good chef 11 upgrade doc ? :)
[2013-02-12 21:33:18 -0500] rava: anyone know how to get rid of a dead node/client that's raising an arguement error and 500 when running knife node|client delete ?
[2013-02-12 21:36:36 -0500] rava: this is what i'm seeing when running knife node delete <name>: https://gist.github.com/bd-erik/4772571
[2013-02-12 21:37:18 -0500] rava: from the server log: https://gist.github.com/bd-erik/4773605
[2013-02-12 21:37:46 -0500] jessicab: rava: you could try knife exec, itll probably spit out an error but it might still work anyways
[2013-02-12 21:37:57 -0500] aspiers: hi all, how is the supported platform list on the right hand side of http://wiki.opscode.com/display/chef/Installing+Chef+Server determined?
[2013-02-12 21:38:29 -0500] aspiers: it's slightly inaccurate because "SuSE (11.x)" is not a valid platform
[2013-02-12 21:38:41 -0500] aspiers: there's openSUSE, and SLES, but no "SuSE"
[2013-02-12 21:39:03 -0500] rava: jessicab: executes a ruby script?
[2013-02-12 21:41:13 -0500] jessicab: rava: yea, basically to delete it through the api.. something like this might work? knife exec -E 'puts api.delete("/nodes/NODE_NAME")'
[2013-02-12 21:42:19 -0500] rava: jessicab: no dice. wonder if i could use this to overwrite it's borked attribute maybe..?
[2013-02-12 21:42:48 -0500] jessicab: hm yea.. perhaps, but im not sure how youd send json back with that in an exec command
[2013-02-12 21:43:13 -0500] gchristensen: jtimberman: "The current version cannot handle plists or dictionaries." - looks like it does handle dicts.
[2013-02-12 21:49:21 -0500] makerbreakr: having some trouble with logstash: https://gist.github.com/makerbreaker/4773697
[2013-02-12 21:49:46 -0500] makerbreakr: I have a logserver_role created, when I run chef-client on the server that the role is applied to I get that error
[2013-02-12 21:50:00 -0500] rava: blargh, i can never get knife search to work
[2013-02-12 21:51:01 -0500] robbkidd: makerbreaker: Are you using the logstash cookbook?
[2013-02-12 21:51:20 -0500] makerbreakr: yes
[2013-02-12 21:51:21 -0500] teukka: btm: ok, thanks for your guidance. but do you think you could add openSUSE 12.2 to the list on opscode.com/chef/(install|download) ?
[2013-02-12 21:51:37 -0500] makerbreakr: I am following the directions here https://github.com/lusis/chef-logstash
[2013-02-12 21:51:42 -0500] makerbreakr: out of the box behaviour
[2013-02-12 21:52:27 -0500] robbkidd: makerbreaker: Looking ...
[2013-02-12 21:53:39 -0500] robbkidd: makerbreaker: Did you name your role "logstash_server" or "logserver"?
[2013-02-12 21:53:50 -0500] makerbreakr: logstash_server
[2013-02-12 21:54:06 -0500] rava: what's wrong with this search syntax?: knife search node "name:CI1TEST" ?
[2013-02-12 21:54:11 -0500] makerbreakr: should i change it to logserver?
[2013-02-12 21:54:12 -0500] rava: that node shows up in a knife node list
[2013-02-12 21:54:35 -0500] makerbreakr: rava, try fqdn:CI1TEST
[2013-02-12 21:54:52 -0500] rava: 0
[2013-02-12 21:55:26 -0500] rava: doing a show -Fj gives me an attribute of "name:CI1TEST" , i don't see why search  can't find it
[2013-02-12 21:55:27 -0500] robbkidd: makerbreaker: Nope. Yours is right. Looking through the recipes in the logstash cookbook.
[2013-02-12 21:57:24 -0500] brucelee_: hey in this recipe theres a line here 'runit_service "jira"' from here: https://github.com/opscode-cookbooks/jira/blob/master/recipes/default.rb
[2013-02-12 21:57:39 -0500] brucelee_: anyone know what that 'runit_service "jira"' line is doing?
[2013-02-12 21:57:47 -0500] rava: can't find a way to kill this fricking node, is run list information kept in couchdb?
[2013-02-12 21:57:49 -0500] brucelee_: i realize from thee top that it 'includes' 'runit'
[2013-02-12 21:58:13 -0500] rava: wondering if i can just restore couch to get rid of this node
[2013-02-12 21:58:20 -0500] rava: it's really messing with my server's mojo
[2013-02-12 21:58:37 -0500] manimal_: cant remove it from webui either?
[2013-02-12 21:58:40 -0500] rbwsam: Hi! I'm trying to bootstrap a server with chef 10.18.2 but it keeps updating gems so chef 11 is installed and my cookbooks are broken boostrap-verison 10.18.2 isn't working
[2013-02-12 21:59:24 -0500] gmcinnes: Anyone know if there is anything up with hosted chef? I suddenly started getting 401 "Unauthorized"
[2013-02-12 21:59:27 -0500] rbwsam: Is there any way to force knife bootstap to only install and use a version of chef?
[2013-02-12 21:59:31 -0500] rava: manimal_: server returns a 500
[2013-02-12 22:00:41 -0500] makerbreakr: robbkidd, can I not use my private chef server as the log_servedr?
[2013-02-12 22:01:14 -0500] async_io: pardon my ignorance as I unlurk here, but: is librarian-chef a reasonable way to handle managing what cookbooks one wants along with their dependencies?  If so, how do people who are using it that way handle building their own cookbooks?  Just :ref the git repo they're checked into?
[2013-02-12 22:01:31 -0500] robbkidd: makerbreakr: That doesn't appear to be the problem, but it would entail managing your private chef server with chef which is an area of meta I have not explored.
[2013-02-12 22:01:42 -0500] makerbreakr: hah
[2013-02-12 22:01:44 -0500] makerbreakr: i actually do that now
[2013-02-12 22:01:50 -0500] rava: any ideas on how to gank this node from chef?
[2013-02-12 22:02:00 -0500] maek: async_io: may I suggest http://berkshelf.com/
[2013-02-12 22:02:14 -0500] rava: or maybe a way i can manually set the value that's breaking?
[2013-02-12 22:02:25 -0500] async_io: make: yes you may :-)  Looking at it now
[2013-02-12 22:02:32 -0500] robbkidd: async_io: +1 to berkshelf, and yes, either is a recommended solution for using third-party cookbooks.
[2013-02-12 22:04:18 -0500] robbkidd: makerbreakr: Your error stems from the (apparent) fact that a resource (the link at log_stash::server.rb:71) is declaring a restart to a service that is not defined yet (not until line 137) https://github.com/lusis/chef-logstash/blob/master/recipes/server.rb
[2013-02-12 22:04:34 -0500] robbkidd: makerbreakr: Which confuses me as I was using this cookbook two weeks ago without this problem.
[2013-02-12 22:05:05 -0500] makerbreakr: logstash recipe
[2013-02-12 22:05:05 -0500] makerbreakr: 1 logstash::server recipe
[2013-02-12 22:05:05 -0500] makerbreakr: 2 logstash::kibana
[2013-02-12 22:05:24 -0500] makerbreakr: those are the 3 recpies, in that role (I tired with and without the logstash recipe)
[2013-02-12 22:06:02 -0500] anthroprose: can anyone help me with getting a chef bootstrap to recognize run_command_stderr_timeout, run_command_stdout_timeout in the bootstraper's knife.rb?
[2013-02-12 22:06:12 -0500] robbkidd: makerbreakr: You don't need the "logstash" recipe. That means "logstash::default" which is included in logstash::server https://github.com/lusis/chef-logstash/blob/master/recipes/server.rb#L12
[2013-02-12 22:06:22 -0500] gmcinnes: motherfuggler. How could my client just disappear from Hosted Chef?
[2013-02-12 22:06:23 -0500] makerbreakr: k
[2013-02-12 22:06:31 -0500] makerbreakr: hrm, why wouldnt the service not work
[2013-02-12 22:06:41 -0500] gmcinnes: this is a yak shave of stupid
[2013-02-12 22:07:30 -0500] rava: this is also failing in search: search(:node, "name:CI1TEST") ... , doesn't find anything
[2013-02-12 22:09:31 -0500] rava: is there a way I can just remove a node's entry in couchdb manually?
[2013-02-12 22:09:37 -0500] rava: without borking the rest of the server?
[2013-02-12 22:11:28 -0500] rava: bah, i can'
[2013-02-12 22:11:39 -0500] rava: can't interact with this node at all due to this issue
[2013-02-12 22:16:34 -0500] rava: blargh
[2013-02-12 22:16:48 -0500] rava: upgraded to chef-server 10.18.2-1 and still no dice on this node
[2013-02-12 22:17:47 -0500] brucelee_: i realize from thee top that it 'includes' 'runit'
[2013-02-12 22:17:50 -0500] brucelee_: hey in this recipe theres a line here 'runit_service "jira"' from here: https://github.com/opscode-cookbooks/jira/blob/master/recipes/default.rb
[2013-02-12 22:17:58 -0500] brucelee_: whats that line mean?
[2013-02-12 22:18:06 -0500] brucelee_: how do i find out what 'runit_service' is
[2013-02-12 22:18:17 -0500] brucelee_: i looked through the files in the ruinit cookbook and i cant find anything that defines runit_service
[2013-02-12 22:18:28 -0500] gchristensen: jtimberman: on your mac_os_x cookbook, particularly with the doc_preferences, it doesn't seem to be affecting the dock at all. any advice or thoughts on this? the settinsg simply aren't taking place.
[2013-02-12 22:19:01 -0500] cwj: gchristensen: i think if you do a run with debug-level you'll see what i was seeing
[2013-02-12 22:19:17 -0500] behemphi: I am using chef 10.16.2 omnibus on Hosted Chef.  Today I am nearly certain I have seen parts of recipes simply get skipped.  Here is an example I think makes this plain:  https://gist.github.com/behemphi/4773975
[2013-02-12 22:19:28 -0500] behemphi: Please tell me I am nuts and why
[2013-02-12 22:19:46 -0500] cwj: e.g. the 'defaults' command that is run tries to set a string value for a key, but the command doesnt have a -string
[2013-02-12 22:19:50 -0500] cwj: flag
[2013-02-12 22:22:48 -0500] gchristensen: in this case cwj they are booleans and they get set sort of, but I suppose in this case its not actually taking effect on the actual dock.
[2013-02-12 22:29:05 -0500] gchristensen: oy! I figured it out, cwj / jtimberman - I'm running it as sudo, but defaults write (even global) won't force all users to change the setting. should have guessed :)
[2013-02-12 22:30:38 -0500] cwj: oh ok
[2013-02-12 22:32:41 -0500] cwj: gchristensen: i did this for detecting the sudo user in homebrew cookbook https://github.com/needle-cookbooks/homebrew/commit/482c6db017223e7f1bce3cd588873ddc3bfc0b2d
[2013-02-12 22:32:57 -0500] gchristensen: oh nice
[2013-02-12 22:33:46 -0500] cwj: maybe the RunAs module i added should be turned into something included in Chef for use in cookbooks like homebrew and mac_os_x
[2013-02-12 22:34:54 -0500] halcyonCorsair: is there currently a best of breed redis cookbook?
[2013-02-12 22:44:18 -0500] solarce: cwj: runs for sudo on osx would be hawt
[2013-02-12 22:44:34 -0500] solarce: cwj: i use my non-daily admin user to toggle sudo for my daily user in the rare occurance i need it :)
[2013-02-12 22:45:13 -0500] cwj: wait this thing can have multiple users???
[2013-02-12 22:45:38 -0500] cwj: i might take a stab at it
[2013-02-12 22:51:03 -0500] rafaelmagu: Howdy chefs
[2013-02-12 22:51:20 -0500] rafaelmagu: Is there a way to force a recipe to run at the very end of a run?
[2013-02-12 22:51:33 -0500] rafaelmagu: Without relying on run_list ordering
[2013-02-12 22:51:52 -0500] rafaelmagu: The same way we can have something run during compile time?
[2013-02-12 22:52:28 -0500] rafaelmagu: I'm seeing a scenario where I have chef-client[service] recipe in my run_list using upstart as the init process
[2013-02-12 22:52:48 -0500] rafaelmagu: And init starts up a chef-client run while one is already running
[2013-02-12 22:53:13 -0500] rafaelmagu: Then I get lock file issue with APT trying to update at the same time, and my chef run fails
[2013-02-12 22:59:19 -0500] joemiller: looking for some ideas on an approach to implementing a simple flock-based mutex to serialize concurrent chef-solo runs on a set of resources. in this example the resources are containers (eg: /sites/web1, /sites/web2). multiple chef-solo's can be running at a time and they should not bother each other normally, but if two try to converge the same container i want to serialize that
[2013-02-12 22:59:25 -0500] joemiller: https://gist.github.com/joemiller/4774259
[2013-02-12 22:59:44 -0500] joemiller: the problem is I need to pass the File created in the acquire_lock() to the release_lock() at the end
[2013-02-12 23:03:59 -0500] smallChange: Excuse my noob question, but how do i generate a client.pem file? Attempting to "knife bootstrap" a node for the first time but i believe it is failing because of not having a client.pem (ive literally dont nothing to client other than setup ssh) Thanks.
[2013-02-12 23:07:12 -0500] dieselz1923: anyone see a bunch of "NoMethodError: undefined method `run_list_for' for #<Hash:0x00000002662298>" errors in the past week since the 11.2 release?
[2013-02-12 23:07:24 -0500] DrVonNostren: xcuse my noob question, but how do i generate a client.pem file? Attempting to "knife bootstrap" a node for the first time but i believe it is failing because of not having a client.pem (ive literally dont nothing to client other than setup ssh) Thanks.
[2013-02-12 23:10:12 -0500] cwj: DrVonNostren: the typical flow is that a validation certificate (usually called validation.pem) is uploaded to the client node during the bootstrap process. once chef is installed on the client node, chef-client uses the validation certificate to sign a request for a new client certificate (which is then stored as client.pem)
[2013-02-12 23:11:13 -0500] async_io: berkshelf usage question: is there any way to have a local .berkshelf in a project directory versus one in ~ ?
[2013-02-12 23:12:28 -0500] cwj: async_io: i think setting a value for BERKSHELF_PATH in your environment will override the default ~/.berkshelf
[2013-02-12 23:12:33 -0500] log1kal: Is there a way to wrap part of a recipe in an "only if running in chef-solo" block?
[2013-02-12 23:12:35 -0500] cwj: but i havent tried that myself
[2013-02-12 23:12:46 -0500] log1kal: dieselz1923: There's an issue with json 1.7.7 that's causing that issue
[2013-02-12 23:12:47 -0500] cwj: log1kal: if Chef::Config[:solo]
[2013-02-12 23:12:59 -0500] log1kal: cwj: You're a great human being. thanks.
[2013-02-12 23:13:08 -0500] cwj: np
[2013-02-12 23:13:20 -0500] manimal_: DrVonNostren are you running knife bootstrap from the workstation or the node you are adding?
[2013-02-12 23:13:50 -0500] justincampbell: async_io: cwj is correct https://github.com/RiotGames/berkshelf/blob/master/lib/berkshelf.rb#L82
[2013-02-12 23:13:54 -0500] DrVonNostren: manimal_: from the client, i belive i have found the issue, i hadnt added the chefserver to /etc/hosts :P
[2013-02-12 23:14:00 -0500] DrVonNostren: errr from the workstation
[2013-02-12 23:14:02 -0500] manimal_: ah yes
[2013-02-12 23:14:07 -0500] cwj: heres my berkshelf head scratcher. i am trying to move from librarian to berkshelf for managing our chef repo. my berksfile defines a git source for a cookbook called avahi, and i can run berks upload avahi'
[2013-02-12 23:14:29 -0500] cwj: but when i try to berks upload a cookbook which depends on avahi, it tells me "Cookbook 'avahi' not found in any of the default locations"
[2013-02-12 23:14:35 -0500] dieselz1923: log1kal: thank you!
[2013-02-12 23:15:35 -0500] justincampbell: cwj: and you've `berks install`-ed ?
[2013-02-12 23:15:55 -0500] cwj: i think so but i will run it now just to be sure
[2013-02-12 23:16:34 -0500] async_io: cwj: I'll look around there, but was hoping it'd be smart enough that if there's a .berkshelf directory in CWD that it would use that
[2013-02-12 23:16:53 -0500] log1kal: dieselz1923: more info: http://tickets.opscode.com/browse/CHEF-3863?focusedCommentId=32358&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel
[2013-02-12 23:16:55 -0500] async_io: so I don't have to do anything to work on different projects versus having to jack the BERKSHELF_PATH
[2013-02-12 23:17:03 -0500] justincampbell: async_io: i think the point is that you should only need one for all of your projects
[2013-02-12 23:17:17 -0500] justincampbell: your cookbooks are versioned, what does it matter if you have one shared on two projects?
[2013-02-12 23:17:18 -0500] cwj: that does seem to be the philosophy
[2013-02-12 23:17:28 -0500] async_io: justincampbell: different companies
[2013-02-12 23:17:28 -0500] cwj: so the cache can be used across different projects
[2013-02-12 23:17:37 -0500] justincampbell: async_io: ah
[2013-02-12 23:18:14 -0500] cwj: justincampbell: ran berks install and still seeing the same error
[2013-02-12 23:18:14 -0500] justincampbell: then i'd probably use something like an .env file in your client directory to switch BERKSHELF_PATH along with any other client-specific stuff you have going on
[2013-02-12 23:18:16 -0500] async_io: although this may push me to another thought which was actually laying down a separate vagrant vm as the knife/berkshelf deploy station
[2013-02-12 23:18:19 -0500] justincampbell: i use one for AWS keys and the like
[2013-02-12 23:20:16 -0500] async_io: justincampbell: excuse my ignorance, but does that require you to source .env when you change into the directory, or is that pulled in automatically?
[2013-02-12 23:20:23 -0500] halcyonCorsair: can anyone point me in the direction of an ohai plugin to gather rvm information? (if one exists)
[2013-02-12 23:20:52 -0500] kallistec: hey guys, btm just pushed 10.22.0.rc.0 to rubygems if y'all want to give it a spin. Fixes json borkage
[2013-02-12 23:26:03 -0500] justincampbell: async_io: https://github.com/kennethreitz/autoenv
[2013-02-12 23:26:07 -0500] justincampbell: there are some others too
[2013-02-12 23:26:41 -0500] cwj: thats neat
[2013-02-12 23:26:46 -0500] async_io: justincampbell: thanks
[2013-02-12 23:27:32 -0500] async_io: justincampbell: now I don't have to build that myself :-)
[2013-02-12 23:29:25 -0500] ptrstr: kallistec: testing 10.22.0.rc.1 on aws
[2013-02-12 23:29:41 -0500] kallistec: ptrstr: tyvm
[2013-02-12 23:31:15 -0500] ptrstr: rc.0 that is
[2013-02-12 23:32:18 -0500] ptrstr: kallistec: ugh a sec..our environment wants to install an older chef and ofcourse that fails in net-ssh
[2013-02-12 23:40:22 -0500] async_io: justincampbell: or cwj: do either of you think it would have value if berkshelf supported directory-level .berkshelf files without requiring .env/autoenv?
[2013-02-12 23:41:43 -0500] mwhooker: hi all. what's the best way to inspect the attributes of a node as they would appear during convergence? trying to use shef but node is totally empty of cookbook attributes
[2013-02-12 23:43:14 -0500] miah: mwhooker: you'll need to use shef to load the cookbooks and start the convergence. chef runs in intervals and 'shef' is essentially a new instance of the chef-client running on your node but its completely brain dead. like irb, it has no code loaded by default. you have to tell it what to do.
[2013-02-12 23:44:02 -0500] mwhooker: miah thanks, that clears some things up. I do run `include_recipe node.run_list.recipes.first`
[2013-02-12 23:44:35 -0500] miah: that isnt starting convergence though
[2013-02-12 23:44:36 -0500] mwhooker: but it can't seem to find my cookbook
[2013-02-12 23:44:49 -0500] ypaq: hey, i'm having an issue with bootstrapping chef-client on ubuntu
[2013-02-12 23:45:59 -0500] mwhooker: miah any idea how to verify the cookbook path and start convergence?
[2013-02-12 23:47:00 -0500] ypaq: i installed chef-client 10.20.0 (i used 10.14.0 before) which is ok. when the chef-client run starts i get an error: "Error expanding the run_list: Unexpected Error: oMethodError: undefined method `run_list_for' for #<Hash:0x7f3f1a6f2a88>"
[2013-02-12 23:47:51 -0500] ypaq: my node configs haven't changed since i used 10.14.0
[2013-02-12 23:49:19 -0500] ypaq: i use knife rackspace for bootstrapping
[2013-02-12 23:49:32 -0500] ypaq: do you think this is a knife issue?
[2013-02-12 23:49:36 -0500] ptrstr: kallistec: i can bootstrap again!
[2013-02-12 23:49:43 -0500] kallistec: ptrstr: rad
[2013-02-12 23:51:28 -0500] log1kal: ypaq: There's an issue with the most recent chef's using json 1.7.7 that causes that issue. More info : http://tickets.opscode.com/browse/CHEF-3863?focusedCommentId=32325&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel
[2013-02-12 23:52:06 -0500] ypaq: log1kal: thanks
[2013-02-12 23:52:19 -0500] cwj: async_io1: there is already a pull request for such a feature https://github.com/RiotGames/berkshelf/issues/166
[2013-02-12 23:52:22 -0500] log1kal: that's a bad way to put that. json 1.7.7 + chef has an issue, and chef naively requires 1.7.6
[2013-02-12 23:54:16 -0500] cwj: async_io1: well not the same, but similar
[2013-02-12 23:54:43 -0500] cwj: nm i guess your case isnt really subject to the same concerns
[2013-02-12 23:55:05 -0500] async_io1: cwj: yeah, my thought was a little simpler.  I was just going to look in CWD where berks was run for a .berkshelf, although I think instead what I might do is look if there's a .berkshelf in the directory where the Berkfile is
[2013-02-12 23:55:14 -0500] rava: anyone know how to get rid of a dead node that's raising Unable to create Chef::RunList::RunListItem from String ?
[2013-02-12 23:55:54 -0500] mconigliaro: hey guys, sorry to keep spamming the channel with this, but is there anyone who can give me some quick feedback on this idea i have? http://community.opscode.com/questions/273
[2013-02-12 23:56:00 -0500] async_io1: cwj: I already implemented the CWD version, am working on the .berkshelf-dir-is-sibling-of-Berkshelf version
[2013-02-12 23:59:34 -0500] rava: anyone know how to get rid of a dead node that's raising Unable to create Chef::RunList::RunListItem from String ?
[2013-02-12 23:59:58 -0500] rava: trying to run knife node delete on it kicks back a server error

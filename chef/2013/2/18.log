[2013-02-18 00:13:10 -0500] cstamas: hi
[2013-02-18 00:13:29 -0500] cstamas: on my new chef-server install I get javax.servlet.UnavailableException with solr
[2013-02-18 00:13:39 -0500] cstamas: this is debian with the official repo
[2013-02-18 00:13:50 -0500] cstamas: (wheezy)
[2013-02-18 00:50:43 -0500] jsxtanford: hi, anyone notice that cookbooks pulled down with 'knife cookbook site install' don't bring the test dir with them?  just wondering if I'm missing something (beside the test dir)...
[2013-02-18 01:18:34 -0500] mting923: Hi experts!
[2013-02-18 01:18:55 -0500] mting923: I have a quick question about sql_server cookbook
[2013-02-18 01:19:07 -0500] mting923: did anyone tried that on vagrant box?
[2013-02-18 01:19:18 -0500] mting923: I have issue even just include it in my recipe..
[2013-02-18 01:19:38 -0500] mting923: Error executing action `install` on resource 'windows_package[Microsoft SQL Server 2008 R2 Native Client]
[2013-02-18 01:19:58 -0500] mting923: anyone got the same error as me that is able to be resolved?
[2013-02-18 02:52:29 -0500] savant: Hi all
[2013-02-18 02:52:36 -0500] savant: is there a way for me to set resource-wide defaults?
[2013-02-18 02:53:04 -0500] savant: For example, I'd like to run all "execute" resources as a specific user, and only override where necessary
[2013-02-18 03:05:24 -0500] slestak: hrm, using knife bootstrap to setup a new vm, and the loglevel defined in my knife.rb on my management workstation does nto appear to be passing into the node for confguration.
[2013-02-18 03:05:49 -0500] slestak: 127.0.0.1 /usr/lib/ruby/gems/1.8/gems/mixlib-log-1.4.1/lib/mixlib/log.rb:97:in `level=': Log level must be one of :debug, :info, :warn, :error, or :fatal (ArgumentError)
[2013-02-18 03:06:35 -0500] slestak: log_level is most definitely :info, i am looking at it right now
[2013-02-18 03:07:10 -0500] rafaelmagu: Is there an easy way to find out the current node's Chef environment from within a recipe?
[2013-02-18 03:07:19 -0500] rafaelmagu: node['chef_environment'] doesn't work
[2013-02-18 03:07:28 -0500] rafaelmagu: Neither does node['environment']
[2013-02-18 03:13:20 -0500] slestak: i see in /etc/chef in teh vm, client.rb seems to be updated for the bootstrap, has my opscode organization in it, points to my pem
[2013-02-18 03:13:43 -0500] slestak: knife client list does not list this node though
[2013-02-18 03:16:08 -0500] slestak: looks like it might be related to mixlib-log, my client.rb is setting loglevl to :auto, and mixlib-log is saying it must be one of the standard log levels
[2013-02-18 03:21:00 -0500] slestak: well, the vm has mixlib-log 1.4.1 which is current
[2013-02-18 03:28:28 -0500] jtimberman: rafaelmagu: node.chef_environment
[2013-02-18 03:28:40 -0500] jtimberman: rafaelmagu: it's a method on the Chef::Node object, not an attribute.
[2013-02-18 03:28:43 -0500] rafaelmagu: Ahh, a method
[2013-02-18 03:28:45 -0500] rafaelmagu: Fair enough
[2013-02-18 03:28:46 -0500] rafaelmagu: Thanks
[2013-02-18 03:28:48 -0500] jtimberman: ya
[2013-02-18 03:29:23 -0500] jtimberman: Chef 11.4.0: http://rubydoc.info/gems/chef/Chef/Node
[2013-02-18 03:30:03 -0500] jtimberman: Chef 10.22.0: http://rubydoc.info/gems/chef/10.22.0/Chef/Node
[2013-02-18 03:30:18 -0500] jtimberman: (replace the 10.22.0 with a specific version if you want others, but i don't think it changed much)
[2013-02-18 03:31:03 -0500] rafaelmagu: Yup
[2013-02-18 03:31:05 -0500] rafaelmagu: Using 10.20
[2013-02-18 03:31:13 -0500] rafaelmagu: Fixed my recipe now
[2013-02-18 03:32:05 -0500] slestak: i think my problem is management console chef == 11.4 and node chef is early 10,
[2013-02-18 03:32:12 -0500] slestak: updating chef on node
[2013-02-18 03:35:24 -0500] slestak: that was it, works now
[2013-02-18 04:19:42 -0500] Glace: is there a way to have the omnibus setup on centos to check for chef-server.rb the first time it runs
[2013-02-18 04:19:50 -0500] Glace: it seems to only do it the second time and so on
[2013-02-18 04:21:16 -0500] spheromak: vagrant destroy
[2013-02-18 04:21:24 -0500] spheromak: woops
[2013-02-18 04:21:25 -0500] spheromak: :d
[2013-02-18 04:21:30 -0500] Glace: what lol
[2013-02-18 04:23:54 -0500] savant: what does the user flag for chef-solo do?
[2013-02-18 04:26:59 -0500] yfeldblum: Glace, what do you mean the "first time"? do you mean when installing the package? or do you mean the first time when you run `chef-server-ctl reconfigure`?
[2013-02-18 04:32:17 -0500] Glace: The first time I run chef-server-ctl reconfigure
[2013-02-18 04:39:34 -0500] Glace: nm, I got it to work
[2013-02-18 04:39:48 -0500] savant: halp
[2013-02-18 04:39:52 -0500] savant: someone halp
[2013-02-18 04:40:17 -0500] savant: idk what im doing
[2013-02-18 04:40:28 -0500] savant: what is the user flag on chef-solo
[2013-02-18 04:40:35 -0500] savant: googling does not help
[2013-02-18 04:40:37 -0500] savant: :(
[2013-02-18 04:41:17 -0500] yfeldblum: savant, https://github.com/opscode/chef/blob/10.24.0/chef/lib/chef/application/solo.rb#L69-L73
[2013-02-18 04:41:38 -0500] savant: Oh I see. But what does that actually mean?
[2013-02-18 04:42:59 -0500] yfeldblum: savant, https://github.com/opscode/chef/blob/10.24.0/chef/lib/chef/daemon.rb#L150-L184
[2013-02-18 04:43:04 -0500] savant: If I run chef-solo under sudo, does setting that flag to my current, non-root, user make all commands not set to run as root to be that user?
[2013-02-18 04:43:43 -0500] savant: Oh, so no. Interesting.
[2013-02-18 04:44:18 -0500] yfeldblum: savant, most publicly-available chef cookbooks assume that chef is running as root
[2013-02-18 04:44:29 -0500] savant: so im trying to provision my mac
[2013-02-18 04:44:48 -0500] savant: which means I do not get root by default, and I mostly don't need it, except in a handful of cases
[2013-02-18 04:45:12 -0500] savant: so I think maybe the best route is to monkeypatch execute, file, and template resources to set the user to my current user if not specified.
[2013-02-18 04:48:12 -0500] savant: yfeldblum: do you think thats a good idea to achieve what I would like to accomplish? or is there a better way?
[2013-02-18 04:48:30 -0500] jtimberman: savant: chef-*client* is commonly run as a daemon. while it is also most common to run as root, some environments may have a reason to run as a nonprivileged user.
[2013-02-18 04:48:53 -0500] jtimberman: It's there for a long running process, such as one started under sysv init, runit, etc.
[2013-02-18 04:49:20 -0500] jtimberman: chef-solo is probably more commonly invoked directly, via something like capistrano, fabric, or plain ol' login via ssh and run the command.
[2013-02-18 04:49:46 -0500] savant: jtimberman: Yeah, yfeldblumset me straight on the user flag. I'm a heavy chef-solo user, but had never seen or used that flag and wondered if it would solve my needs.
[2013-02-18 04:49:48 -0500] jtimberman: which means the 'user' option probably doesn't do much as you could log in as that user to run it.
[2013-02-18 04:49:58 -0500] jtimberman: depends on what your needs are.
[2013-02-18 04:50:05 -0500] jtimberman: are you planning to run solo as a daemon?
[2013-02-18 04:50:16 -0500] jtimberman: if so, it might
[2013-02-18 04:50:39 -0500] savant: no
[2013-02-18 04:50:45 -0500] savant: what I'd like to do is the following:
[2013-02-18 04:50:55 -0500] Glace: jtimberman: Do you know of any implementation that have been able to run chef-client as a deamon every x hours successfuly at large scale with a standard environment/roles workflow?
[2013-02-18 04:51:29 -0500] yfeldblum: jtimberman, the solo demon: http://tinyurl.com/a63ywv8
[2013-02-18 04:51:34 -0500] savant: I am provisioning my own macbook with chef-solo (ha) and have certain setup stuff that requires sudo permissions. Stuff like setting launchdaemons or setting the homebrew permissions properly
[2013-02-18 04:52:11 -0500] Glace: btw.. chef server 11 is MUCH faster :) I was running 10 on a medium with pain of slowness.. and now it runs like a charm with 11 on a small instance
[2013-02-18 04:52:37 -0500] jtimberman: savant: ah. well, i do similar, and i usually just put the sudo command i need in the resource where it's required.
[2013-02-18 04:52:44 -0500] savant: however, I don't normally need that, and usually use just the current logged in user. Since there isn't a good way to run a single command as root and set the password on cli, I'd like to run the entire thing as sudo. However, I will be manually specifying root/wheel user/group on things, and otherwise need it to default to savant/staff
[2013-02-18 04:52:46 -0500] jtimberman: and then run sudo -l before i run :)
[2013-02-18 04:52:58 -0500] savant: jtimberman: the sudo command?
[2013-02-18 04:53:20 -0500] jtimberman: yeah like, it depends on the specific thing
[2013-02-18 04:53:27 -0500] savant: as in use the chef-solo gem to run raw bash commands?
[2013-02-18 04:53:34 -0500] jtimberman: right
[2013-02-18 04:53:39 -0500] jtimberman: execute "sudo doathing"
[2013-02-18 04:53:39 -0500] savant: yuck.
[2013-02-18 04:53:46 -0500] spheromak: heh
[2013-02-18 04:53:53 -0500] jtimberman: well
[2013-02-18 04:53:56 -0500] savant: i'd like to use the regular resources though.
[2013-02-18 04:54:01 -0500] jtimberman: sure
[2013-02-18 04:54:01 -0500] savant: so like file and template
[2013-02-18 04:54:25 -0500] jtimberman: i have as little managed outside my home directory as possible.
[2013-02-18 04:54:45 -0500] jtimberman: there's some software i install that requires installing, e.g., a .pkg
[2013-02-18 04:54:51 -0500] savant: right.
[2013-02-18 04:55:10 -0500] jtimberman: Glace: i don't have exact numbers, but Cycle Computing had 10k clients connected to a single Chef Server.
[2013-02-18 04:55:27 -0500] Glace: jtimberman: Wow.. that is very impressive
[2013-02-18 04:55:35 -0500] jtimberman: Glace: my understanding is that the server to handle that kind of load with Chef 11 is "around 16-32G memory, 8-16 core CPU(s)"
[2013-02-18 04:55:53 -0500] Glace: well thats pretty good
[2013-02-18 04:56:01 -0500] savant: is there a way for me to use built-in resources under the root user and everything else under the logged in user?
[2013-02-18 04:56:12 -0500] Glace: we have 50 nodes so I am sure that my small instance should be good :0
[2013-02-18 04:56:28 -0500] X-Jester: Glace: i've seen crowbar do it with bluepill
[2013-02-18 04:56:45 -0500] jtimberman: savant: you can have the things that run commands with the execute and bash resources specify a user.
[2013-02-18 04:57:02 -0500] jtimberman: and specify the user/group on files they should own.
[2013-02-18 04:57:11 -0500] savant: well i'd like to avoid always specifying a user.
[2013-02-18 04:57:18 -0500] yfeldblum: jtimberman, so you switched away from a database written in erlang - because it wasn't suitably efficient - and switched the api code to erlang - because it was suitably efficient - ...
[2013-02-18 04:57:27 -0500] jtimberman: yfeldblum: heh.
[2013-02-18 04:58:06 -0500] Loadx: qq regarding providers. Can i import a provider from another cookbook? I want to use the providers and resources from the python cookbook but not use the provided recipes. Is this even possible or am i looking at this the wrng way?
[2013-02-18 04:58:13 -0500] jtimberman: yfeldblum: the underlying language of the database isn't the issue in that case. it was the performance characteristics and the behavior considerations made, compared to the kind of data and access we were using.
[2013-02-18 04:58:13 -0500] kk__: jtimberman: will you be at the next boulder devops meetup? ned suggested i check it out and id like to see opscode there
[2013-02-18 04:58:20 -0500] Glace: I am impressed in erlang in general
[2013-02-18 04:58:28 -0500] jtimberman: kk__: I plan to attend as many of those as possible :)
[2013-02-18 04:58:36 -0500] X-Jester: Loadx: you need a "depends <cookbook_name>" in the metadata.rb for the cookbook which will be using your provider
[2013-02-18 04:58:38 -0500] Glace: we are running ejabberd chat clusters and it is amazing the load you can get on 1 server
[2013-02-18 04:58:45 -0500] jtimberman: kk__: when is the next one scheduled
[2013-02-18 04:58:58 -0500] jtimberman: Loadx: Yes. set a dependency on that cookbook in your other cookbook.
[2013-02-18 04:59:06 -0500] yfeldblum: jtimberman, quite aware; however, i wanted to make an amusing point, even if that involved contorting the facts a little
[2013-02-18 04:59:25 -0500] jtimberman: Loadx: for example if you want to use the yum_repository resource in the yum cookbook in your cookbook, add depends "yum" to its metadata.rb.
[2013-02-18 04:59:26 -0500] kk__: jtimberman: Mon Mar 18, but I may not make it until the April 15 one, see: http://www.meetup.com/DevOps-Boulder/
[2013-02-18 04:59:32 -0500] Loadx: jtimberman, X-Jester: Thanks :)
[2013-02-18 05:00:11 -0500] Loadx: jtimberman: Ahh, so a depends isn't like an include_recipe
[2013-02-18 05:00:18 -0500] Loadx: no wonder i was screwing it up
[2013-02-18 05:00:32 -0500] X-Jester: Loadx: include_recipe would likely fail without a depends clause as well
[2013-02-18 05:00:47 -0500] savant: i guess im going to monkey patch the core
[2013-02-18 05:00:50 -0500] savant: yuck.
[2013-02-18 05:02:07 -0500] jtimberman: kk__: yeah, i'm planning to be at both
[2013-02-18 05:04:14 -0500] hippiehacker: jtimberman: is there a config option to chef-apply? I'm not finding it
[2013-02-18 05:05:11 -0500] kk__: jtimberman: cool, seeya there.
[2013-02-18 05:06:38 -0500] Loadx: Getting issues with converging now
[2013-02-18 05:09:54 -0500] jtimberman: hippiehacker: what kind of config option?
[2013-02-18 05:11:10 -0500] Loadx: http://codepad.org/SLRdMgZs
[2013-02-18 05:11:26 -0500] hippiehacker: jtimberman: https://gist.github.com/hh/4975238
[2013-02-18 05:12:48 -0500] hippiehacker: I'm trying to make it not use a Chef::Config[:file_cache_path] of '/var/chef/cache' among other things 8)
[2013-02-18 05:14:08 -0500] jtimberman: hippiehacker: oh, i don't think there's a config file for it.
[2013-02-18 05:14:25 -0500] jtimberman: hippiehacker: based on that gist, i think you may be better suited using a regular cookbook :)
[2013-02-18 05:17:33 -0500] huhongbo: is any standalone deb package for erchef
[2013-02-18 05:18:13 -0500] jtimberman: huhongbo: *just* erchef? not at this time.
[2013-02-18 05:18:32 -0500] spheromak: anyone have a quick workaround on CHEF-3853 ?  making it hell to run chef-server 11 under vagrant
[2013-02-18 05:19:48 -0500] jtimberman: spheromak: sudo vagrant up (not an answer) :)
[2013-02-18 05:19:58 -0500] spheromak: its not a great one (what im doing now_
[2013-02-18 05:20:04 -0500] spheromak: :D
[2013-02-18 05:20:07 -0500] jtimberman: spheromak: :-D
[2013-02-18 05:20:12 -0500] jtimberman: dat privileged port
[2013-02-18 05:20:27 -0500] jtimberman: localforward additional ports via ssh? :)
[2013-02-18 05:20:29 -0500] dougireton: I have always used RVM and installed the Chef gem on my Mac, but hippyhacker just installs the Chef Client Omnibus package instead of RVM. Pros and cons of using the Chef Client Omnibus package for Chef dev instead of RVM?
[2013-02-18 05:20:54 -0500] spheromak: omnichef is isolated
[2013-02-18 05:20:56 -0500] jtimberman: dougireton: pro: a single ruby environment if all you use ruby for on your mac is chef
[2013-02-18 05:21:03 -0500] huhongbo: jtimberman:I have install the ominibus chef server 11,and bundled with rabbitmq and postsql, I want to integrate some package for my own, my own package using rabbitmq and postsql
[2013-02-18 05:21:08 -0500] spheromak: your system management shouldn't be dependant on your system IMO
[2013-02-18 05:21:15 -0500] jtimberman: dougireton: con: requires sudo access to install (unless you chown /opt/chef)
[2013-02-18 05:21:28 -0500] dougireton: I have sudo, so that's fine
[2013-02-18 05:21:30 -0500] jtimberman: that is, sudo access to install additional gems
[2013-02-18 05:21:34 -0500] dougireton: oh
[2013-02-18 05:21:45 -0500] jtimberman: like, if you want to use knife plugins and the like that are gems.
[2013-02-18 05:21:51 -0500] dougireton: got it
[2013-02-18 05:22:16 -0500] jtimberman: huhongbo: yeah, we don't have a standalone package built right now.
[2013-02-18 05:22:51 -0500] jtimberman: the single package installer is built from our omnibus project, and you could dissemble it to build your own: https://github.com/opscode/omnibus-chef
[2013-02-18 05:23:03 -0500] jtimberman: https://github.com/opscode/omnibus-ruby is the main project. you'll need https://github.com/opscode/omnibus-software too
[2013-02-18 05:23:32 -0500] jtimberman: dougireton: so that con may not be a con :)
[2013-02-18 05:24:19 -0500] huhongbo: jtimberman:I have install the ominibus chef server 11,and bundled with rabbitmq and postsql, I want to integrate some package for my own, my own package using rabbitmq and postsql
[2013-02-18 05:27:01 -0500] dougireton: jtimberman: where do 3rd party gems get installed to if I use the Omnibus Chef client?
[2013-02-18 05:32:06 -0500] jtimberman: dougireton: /opt/chef/embedded/lib/ruby/gems/1.9.1
[2013-02-18 05:32:31 -0500] jtimberman: huhongbo: i don't know what the shape of your build process or package installation is, so I don't have a direct how to for that.
[2013-02-18 05:40:25 -0500] Loadx: perfect it's working :)
[2013-02-18 05:40:49 -0500] Loadx: People using vagrant whats your method for keeping VboxGuestAdditions and chef-client up to date?
[2013-02-18 05:44:56 -0500] dougireton: Another blog post (from late last week) on cookbook Patterns and Anti-Patterns: http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/
[2013-02-18 05:45:00 -0500] dougireton: Hope it's helpful
[2013-02-18 05:45:10 -0500] spheromak: onitbuss-updater cook for chef. haven't been updating guest addtitions often enough as i just been rebuilding the base box.
[2013-02-18 05:46:00 -0500] spheromak: hope we get versioned roles soon. so ll this stuff about role cookbooks becomes moot.
[2013-02-18 05:46:16 -0500] dougireton: yes, that would be great
[2013-02-18 05:46:24 -0500] spheromak: i don't consider the role stuff to be an ant-pattern outright. As its still usefull, but needs to be understood.
[2013-02-18 05:46:49 -0500] BryanWB__: ohai chefs!
[2013-02-18 05:47:12 -0500] dougireton: Hey BryanWB
[2013-02-18 05:47:22 -0500] dougireton: Welcome
[2013-02-18 05:48:16 -0500] BryanWB__: hey dougireton great blog post
[2013-02-18 05:48:54 -0500] dougireton: Thanks
[2013-02-18 05:48:59 -0500] dougireton: Glad it's been helpful
[2013-02-18 05:49:20 -0500] dougireton: We've learned from painful experience
[2013-02-18 05:49:26 -0500] BryanWB__: dougireton: um had u ever read my gangnam post?
[2013-02-18 05:49:49 -0500] dougireton: yeah, I'm sorry I didn't link to it.
[2013-02-18 05:49:59 -0500] dougireton: I'll update my post
[2013-02-18 05:50:22 -0500] BryanWB__: dougireton: np, i was hoping it had influenced u
[2013-02-18 05:53:21 -0500] dougireton: BryanWB: post updated. yes, your post was very influential in our thinking about cookbooks/roles
[2013-02-18 05:53:23 -0500] dougireton: :)
[2013-02-18 05:53:35 -0500] dougireton: http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-02-18 06:13:14 -0500] Loadx: Thanks for the help all. Peace
[2013-02-18 06:15:52 -0500] yfeldblum: jtimberman, any thoughts on resources whose names are derived from their contents? like files whose names are md5's of their contents? and modeling those as resources & providers?
[2013-02-18 06:26:35 -0500] yfeldblum: roles are data, not code; code should be versioned, not data (leaving aside MVCC etc)
[2013-02-18 06:28:13 -0500] spheromak: yfeldblum: tho the reasoning here is right.  unless you want people to encode roles with target environments or releases. the change effects everything.  and if you look at where people are going. they are using cookbooks precisely cause roles are not versioned. (and using cooks as roles)... I think thats a big indication that even tho theoretically yes they are data and shouldn't be versiosned. The users are running into is
[2013-02-18 06:28:43 -0500] spheromak: *versioned roles
[2013-02-18 06:29:01 -0500] spheromak: I think its more offensive that people are using "role cooks" than the idea of versioned roles :D
[2013-02-18 06:30:31 -0500] yfeldblum: spheromak, it's the difference between `methods_to_call = [:thing1, :thing2, :thing3] ; methods_to_call.each{|s| send s}` and `thing1 ; thing2 ; thing3`
[2013-02-18 06:30:51 -0500] spheromak: yfeldblum: but the reality is that people have a real issue.
[2013-02-18 06:30:52 -0500] yfeldblum: spheromak, the first corresponds to roles; the second to top-level cookbooks
[2013-02-18 06:31:01 -0500] spheromak: i can't change a role without effectin everything, and i ned to scope that.
[2013-02-18 06:31:09 -0500] spheromak: solution #1) naming roles
[2013-02-18 06:31:25 -0500] spheromak: and really roles arne't pure data
[2013-02-18 06:31:32 -0500] yfeldblum: spheromak, sure they are
[2013-02-18 06:31:38 -0500] spheromak: yes they are, but they aren't being consumed. they are orchistration
[2013-02-18 06:31:54 -0500] yfeldblum: spheromak, i can't tell what that means
[2013-02-18 06:33:18 -0500] spheromak: jsut saying that the role "data" isn't consumed in our recipes to generate output. its just declaritive. and if you need to make a safe change to the role you have to version or namespace your roles.  which way is better ?
[2013-02-18 06:34:14 -0500] yfeldblum: spheromak, the better way is to make some useful top-level cookbooks or a single top-level cookbook containing top-level recipes
[2013-02-18 06:34:22 -0500] spheromak: the reality is that its an issue. (managing role changes) and the community is getting behind a hack (role cookbooks) as a solution
[2013-02-18 06:34:41 -0500] spheromak: i disagree with that 100%
[2013-02-18 06:35:05 -0500] spheromak: if thats what we are going to do. why have roles at ll
[2013-02-18 06:35:08 -0500] spheromak: justy get rid of them
[2013-02-18 06:35:35 -0500] yfeldblum: spheromak, i'm saying it's not a hack at all
[2013-02-18 06:35:44 -0500] spheromak: and imo its as bad as saying we have attributes we don't need data bags. just make a cookbook with all your attributes in them
[2013-02-18 06:36:01 -0500] spheromak: especially in the case where i treat a cookbook change much more different than a role or bag change.
[2013-02-18 06:36:28 -0500] yfeldblum: spheromak, you know something is fit for a role when it won't change in the way that would give you grief
[2013-02-18 06:36:37 -0500] spheromak: yfeldblum: i know you are, and i am respectfully disagreeing.
[2013-02-18 06:37:13 -0500] spheromak: i do know this, but not everyone is. I don't use attribs in roles, and thus haven't been bitten nearly as bad as some people have.
[2013-02-18 06:37:25 -0500] spheromak: i should say  I don't often use attribs in roles.
[2013-02-18 06:38:10 -0500] spheromak: and my roles are verry static and declaritive. I am just saying that i don't agree with how the community is working around the issues with managing change in roles. (i.e. role cookbooks)
[2013-02-18 06:38:46 -0500] spheromak: when all of that could easily be rendered non-issue by simply uisng versions in roles
[2013-02-18 06:38:59 -0500] spheromak: and now theres no guessing when you should use a role vs a role cook ..
[2013-02-18 06:40:36 -0500] yfeldblum: spheromak, the thing i find odd is people mixing dev, test, qa, and prod on the same chef-server or hosted/private-chef organization
[2013-02-18 06:40:48 -0500] spheromak: well on same server isn't odd IMO
[2013-02-18 06:40:54 -0500] spheromak: why have environemnts then ?
[2013-02-18 06:41:10 -0500] spheromak: i think whats needed is a clear sort of way to layer these things ?
[2013-02-18 06:41:34 -0500] spheromak: and even if im on different servers I need to stage a rollout how do i do that for a role ?
[2013-02-18 06:41:42 -0500] spheromak: role is a binary change.
[2013-02-18 06:41:43 -0500] yfeldblum: spheromak, environments are useful for things like geographic placement - this server is in the useast environment, that server is in the uswest environment
[2013-02-18 06:41:53 -0500] spheromak: and i think people are wanting a way to make that a bit better
[2013-02-18 06:42:21 -0500] yfeldblum: spheromak, two infrastructures require two databases, and with chef-server that means two chef-servers, and with hosted/private-chef that means two organizations
[2013-02-18 06:42:59 -0500] yfeldblum: spheromak, that would typically solve the unversioned-roles problem
[2013-02-18 06:43:14 -0500] spheromak: and introduce a whole other management problem
[2013-02-18 06:43:20 -0500] spheromak: i've been there. running multiple servers
[2013-02-18 06:43:26 -0500] spheromak: running multiple environments
[2013-02-18 06:44:20 -0500] spheromak: was there when there weren't environemnts. been down all these paths.  IMO the simpl solution is to drop the theoretical objection to versioned roles and let it happen. with letting environemnts call role versions. then theres a nice layered hiarchy for how these thigs come together.
[2013-02-18 06:44:48 -0500] spheromak: and if you want to dev/stage/prod environemnts. or call then east/west w/e thats up to you.
[2013-02-18 06:46:55 -0500] spheromak: and in this case if you don't want versioned roles there no needfor you to even worry about it :)
[2013-02-18 06:47:16 -0500] yfeldblum: spheromak, we all run our non-chef-server applications in the way i describe: the dev install of our XYZ app has its own database, and the prod install of our XYZ app has its own separate database
[2013-02-18 06:47:36 -0500] spheromak: who is we-all ?
[2013-02-18 06:48:16 -0500] spheromak: yfeldblum: i did that as well pre-environments
[2013-02-18 06:48:40 -0500] yfeldblum: spheromak, i'm talking about rails apps, php apps, java apps, etc
[2013-02-18 06:49:11 -0500] spheromak: ok and chef isn't quite a web app
[2013-02-18 06:49:26 -0500] yfeldblum: spheromak, the dev and prod installs of your normal java app don't share a single database; one makes a separate database for each separate install
[2013-02-18 06:49:39 -0500] yfeldblum: spheromak, chef is as web-app as you can get :D
[2013-02-18 06:50:01 -0500] spheromak: what i mean is what we are oidnt with it isn't quite the same..
[2013-02-18 06:50:08 -0500] spheromak: so for instance. i have a razor server.
[2013-02-18 06:50:49 -0500] spheromak: and based on what network a box is in and the hardware configuration when it pxe's it gets a role and an envornment
[2013-02-18 06:51:07 -0500] spheromak: under your model. i now have to duplicate alot of infra to facilitate many chef servers
[2013-02-18 06:51:27 -0500] spheromak: I also have to do this in many datacenters.  (some resources are data center wide).
[2013-02-18 06:51:43 -0500] spheromak: also the dhcp/dns infra actaully services all environemnts
[2013-02-18 06:51:49 -0500] spheromak: not just one.
[2013-02-18 06:52:09 -0500] spheromak: so there are edges to this nice picture of perfectly separated environemnts of chef-servers.
[2013-02-18 06:52:53 -0500] spheromak: and now you reduce the power of search as well
[2013-02-18 06:53:20 -0500] spheromak: logical sepparation in this case should be sufficient
[2013-02-18 06:53:25 -0500] yfeldblum: spheromak, so have multiple chef-servers on the same host listening on different ports, and pxe boxes with a role, an environment, and a chef-server-url (where just the port is variable)
[2013-02-18 06:53:36 -0500] spheromak: especially between stage and production "environments"
[2013-02-18 06:54:01 -0500] yfeldblum: spheromak, why are production boxes getting search results with staging nodes in them?
[2013-02-18 06:54:14 -0500] spheromak: again im jsut saying now your pushing hte problem around and instead of fixing some issue *easily* by adding versions to roles. your saying increase your management workload by 3x
[2013-02-18 06:54:27 -0500] spheromak: yfeldblum: inventory  reporting
[2013-02-18 06:54:34 -0500] spheromak: other analytics
[2013-02-18 06:54:52 -0500] spheromak: most things are scoped to the environemtn the host is in, but somethings are scoped to a data center.
[2013-02-18 06:55:11 -0500] spheromak: we have many data centers each is serviced by single chef infra.  (sepparate servers)
[2013-02-18 06:55:23 -0500] spheromak: inside each datachenter are a number of discreete chef environemnts.
[2013-02-18 06:55:30 -0500] BryanWB__: any 0mq/ubuntu users around?
[2013-02-18 06:55:57 -0500] spheromak: one solution is to build 16 new chef servers as you have stated. but thats really alot of new infra that shouldd't be nessicary
[2013-02-18 06:56:13 -0500] BryanWB__: anyone who can tell me if zeromq >= 3.2* is in default ubuntu repos for ubuntu 11.10 and newer?
[2013-02-18 06:56:17 -0500] spheromak: all cause theres an objection to versioning roles ?
[2013-02-18 06:57:35 -0500] yfeldblum: spheromak, not at all; i'm suggesting this anyway, whether or not there are versioned roles, because i would suggest having these hard separations between infrastructures
[2013-02-18 06:57:44 -0500] spheromak: all im saying is thats alot of complexity to get around somehting that should be simple :)
[2013-02-18 06:58:08 -0500] yfeldblum: spheromak, this doesn't have anything to do with versioned or unversioned roles, except for (incidentally) solving that problem in most cases by pure luck
[2013-02-18 06:58:23 -0500] spheromak: yfeldblum: yep and in the past it became a pain to manage the synchronization and promotion between the servers.  thats better now with stuff like bershelf
[2013-02-18 06:59:22 -0500] spheromak: im not 100% against multiple servers. As i've stated we already run multiple servers. and our dev environemnt is sepparate
[2013-02-18 06:59:26 -0500] spheromak: but
[2013-02-18 06:59:33 -0500] spheromak: we have multiple production envornments
[2013-02-18 06:59:38 -0500] yfeldblum: spheromak, indeed, tooling is necessary
[2013-02-18 06:59:45 -0500] spheromak: and a change may need to go out to cluster a not b
[2013-02-18 07:00:49 -0500] spheromak: i.e. we need to do a rolling upgrade against many 1000's of machines.  so if that change include an adition to a role
[2013-02-18 07:01:39 -0500] spheromak: it makes it near impossible to do it how we would like. Instead we have to upgrade an entire datacenter.  Which we lived with for a while.   Again solved with  "role cookbooks" but could easily be solved with role versions.  < my point
[2013-02-18 07:02:14 -0500] spheromak: i see role cookbooks as a side effect, and a hack not a solution to the core problem.
[2013-02-18 07:03:05 -0500] spheromak: so like i said. we could just name our cooks to corrispond and do some knife exec foo to manipulate node run lists etc. (had to do that before).
[2013-02-18 07:03:45 -0500] spheromak: name our roles.. sorry getting late :P
[2013-02-18 07:04:50 -0500] spheromak: anyhow prob enough ranting for one night
[2013-02-18 07:05:00 -0500] BryanWB__: is there a way to determine the nickname for the ubuntu distro i am running w/out parsing /etc/issue?
[2013-02-18 07:05:08 -0500] BryanWB__: good night Seoul!
[2013-02-18 07:05:30 -0500] spheromak: heh actually home atm in Oregon.
[2013-02-18 07:05:38 -0500] BryanWB__: spheromak: also nice :)
[2013-02-18 07:05:39 -0500] spheromak: back to seoul in 2 weeks
[2013-02-18 07:23:31 -0500] zts: 06:39:44 spheromak the reality is that its an issue. (managing role changes) and the community is getting behind a hack (role cookbooks) as a solution
[2013-02-18 07:23:44 -0500] zts: ^^ My thoughts exactly
[2013-02-18 07:24:01 -0500] zts: spheromak++
[2013-02-18 10:05:22 -0500] cpasmoi: Hi ! Anyone using subversion cookbook here ?
[2013-02-18 10:05:45 -0500] kernelpanik: Hi guys!
[2013-02-18 10:06:58 -0500] cpasmoi: hi
[2013-02-18 10:11:31 -0500] kernel_panik: I'm using including the main  sudo recipe in my cookbook..work fine but if use chef version 11  I have "undefined method `[]' for nil:NilClass"... Seems that does not read the default attributes...in sudo/attributes/default there is default['authorization']['sudo']['include_sudoers_d']..  Any advices about it?
[2013-02-18 10:29:14 -0500] intinig: hi guys. Chef's embedded ruby has no iconv support, and that sucks for me since I was also using it to run rails apps. Is there a best practice regarding how to have chef have its own ruby and install another one to feed passenger?
[2013-02-18 10:33:31 -0500] wlll: intinig: we roll our own RUby packages and install them all to /opt/rubyx.x.x-pxxx
[2013-02-18 10:33:47 -0500] wlll: that way different apps can use different Ruby versions as needed
[2013-02-18 10:33:53 -0500] wlll: and chef uses whatever chef uses
[2013-02-18 10:58:28 -0500] denniswisnia: hey guys, https://github.com/opscode-cookbooks/sudo i want to use it but dont understand how i can define an default pattern for all nodes
[2013-02-18 11:00:27 -0500] matti: denniswisnia: I guess in a default / base role that you include everywhere.
[2013-02-18 11:00:44 -0500] denniswisnia: hum!
[2013-02-18 11:23:32 -0500] denniswisnia: ah, got it! :)
[2013-02-18 11:23:44 -0500] denniswisnia: is there any solution to set the hostname by chef?
[2013-02-18 11:24:06 -0500] denniswisnia: I want to create an VM and gave chef the "Nodename"
[2013-02-18 11:24:15 -0500] denniswisnia: whats the best practice?
[2013-02-18 11:42:38 -0500] denniswisnia: matti?
[2013-02-18 11:47:38 -0500] intinig: I have a recipe overriding this node.default[:languages][:ruby][:ruby_bin]
[2013-02-18 11:47:45 -0500] intinig: I mean, it's not overriding it's setting it
[2013-02-18 11:47:56 -0500] intinig: node.default[:languages][:ruby][:ruby_bin] = find_ruby
[2013-02-18 11:48:04 -0500] intinig: but chef seems to ignore it
[2013-02-18 11:48:13 -0500] intinig: that attribute's value is still the old one
[2013-02-18 11:49:33 -0500] zts: intinig: that is an automatic attribute - http://wiki.opscode.com/display/chef/Automatic+Attributes
[2013-02-18 11:50:20 -0500] intinig: yep
[2013-02-18 11:50:21 -0500] intinig: just saw it
[2013-02-18 11:50:24 -0500] intinig: that recipe is bogus
[2013-02-18 11:50:27 -0500] intinig: gonna fix it :)
[2013-02-18 11:52:12 -0500] intinig: you should never trust other people's recipes, that's the sad truth :(
[2013-02-18 12:07:10 -0500] BryanWB__: intinig: i guess it depends whose recipes, i definitely trust atomic-penguin's recipes
[2013-02-18 12:09:06 -0500] BryanWB__: does anyone have a working rvm cookbook? fnichol's chef-rvm is quite broken unfortunately :(
[2013-02-18 12:17:05 -0500] yruss972: Hi- can anyone help me with this: http://lists.opscode.com/sympa/arc/chef/2013-02/msg00379.html
[2013-02-18 12:24:16 -0500] yfeldblum: BryanWB__, broken in what way?
[2013-02-18 12:24:36 -0500] BryanWB__: yfeldblum: never successfully downloads the ruby tarball, hangs forever
[2013-02-18 12:26:35 -0500] f1gjam: hey guys I needed some help with test-kitchen, anyone about who can help me out?
[2013-02-18 12:28:09 -0500] alex___: hello all
[2013-02-18 12:29:03 -0500] yfeldblum: BryanWB__, i was running into that too
[2013-02-18 12:29:11 -0500] BryanWB__: yfeldblum: u got a fix?
[2013-02-18 12:29:27 -0500] BryanWB__: i have no desire to dive into the source code, i have too many other balls in the air atm
[2013-02-18 12:30:18 -0500] BryanWB__: yfeldblum: i am trying out RiotGames rbenv cookbook right now, hopefully that will work out
[2013-02-18 12:31:46 -0500] alex___: hey is it possible to merge attributes of a cookbook like : http://pastebin.com/mG11cYAe with attributes at node level?
[2013-02-18 12:32:50 -0500] yfeldblum: BryanWB__, well, that's what i happen to be working on at the moment
[2013-02-18 12:33:06 -0500] BryanWB__: yfeldblum: i hope u are successful :)
[2013-02-18 12:33:34 -0500] yfeldblum: BryanWB__, i wiped out RVM on that machine `. /etc/profile.d/rvm.sh ; rvm implode` and reran chef to install the latest version of RVM
[2013-02-18 12:33:48 -0500] yfeldblum: BryanWB__, it was an old old version of RVM that had been installed
[2013-02-18 12:34:01 -0500] BryanWB__: yfeldblum: that fixed it for u?
[2013-02-18 12:34:35 -0500] yfeldblum: BryanWB__, don't know yet
[2013-02-18 12:38:47 -0500] yfeldblum: BryanWB__, i'm in the middle of rewriting that whole section of my stuff, and that's not finished yet, so, don't know
[2013-02-18 12:39:06 -0500] alex___: does someone knows how to merge attributes?
[2013-02-18 12:44:37 -0500] alex___: does someone knows how to merge attributes?
[2013-02-18 12:48:03 -0500] GreatSUN: hi all
[2013-02-18 12:48:57 -0500] GreatSUN: someone alive in here?
[2013-02-18 12:52:44 -0500] mattt: GreatSUN: yep
[2013-02-18 12:52:51 -0500] GreatSUN: great
[2013-02-18 12:53:05 -0500] GreatSUN: I got a design question
[2013-02-18 12:53:14 -0500] GreatSUN: or a couple of
[2013-02-18 12:53:25 -0500] mattt: well, go ahead and ask
[2013-02-18 12:53:31 -0500] mattt: unlikely i can help anyway :)
[2013-02-18 12:53:43 -0500] GreatSUN: ok
[2013-02-18 12:54:50 -0500] GreatSUN: Form my point of view, "configurations" for software installations should primary be defined as attributes in attribute files
[2013-02-18 12:55:25 -0500] GreatSUN: if I have to support several default configurations like for mysql installations of 5.0, 5.1 and 5.5 for example
[2013-02-18 12:55:45 -0500] GreatSUN: I could implement settings per version in attributes and set them lateron in recipe
[2013-02-18 12:56:19 -0500] GreatSUN: according to the version set by the total environment (attributes of other cookbooks, roles etc.)
[2013-02-18 12:56:25 -0500] GreatSUN: or
[2013-02-18 12:56:40 -0500] GreatSUN: I could set up this stuff directly within the recipe
[2013-02-18 12:57:11 -0500] GreatSUN: from my history, I have been programming a lot and learned a lot about programming in common
[2013-02-18 12:57:37 -0500] GreatSUN: though I would place this stuff in attribbutes and choose it by version in recipe
[2013-02-18 12:58:04 -0500] GreatSUN: but is there some best practice stuff for chef environment onto this?
[2013-02-18 12:58:40 -0500] GreatSUN: (not caring about if it is the same or not)
[2013-02-18 13:01:34 -0500] GreatSUN: no one in here who can say something onto this?
[2013-02-18 13:02:06 -0500] alex___: i think not :/
[2013-02-18 13:02:39 -0500] alex___: btw you know how to merge attributes from a attribute file with attributes from the node?
[2013-02-18 13:03:37 -0500] GreatSUN: should be done automatically afaik
[2013-02-18 13:03:47 -0500] GreatSUN: matters on how you set 'em
[2013-02-18 13:04:16 -0500] GreatSUN: if you have a problem, please drop some nopaste link(s)
[2013-02-18 13:11:37 -0500] GreatSUN: ok, need to go
[2013-02-18 13:11:40 -0500] GreatSUN: see ya guys
[2013-02-18 13:18:50 -0500] yruss972: Hi- can anyone help me with setting/overriding node attributes: http://lists.opscode.com/sympa/arc/chef/2013-02/msg00379.html
[2013-02-18 13:20:39 -0500] zts: yruss972: personally, I think that sounds like a bug - if you haven't created a ticket for it, I would suggest that
[2013-02-18 13:20:58 -0500] yruss972: zts: ouch
[2013-02-18 13:20:59 -0500] zts: yruss972: also, it's still a little early for most of the USA people to be online here, so you might get more answers in a couple of hours
[2013-02-18 13:21:13 -0500] zts: yruss972: I guess you should be able to work around it easily enough though?
[2013-02-18 13:21:22 -0500] yruss972: thanks- you think downgrading chef will help?
[2013-02-18 13:21:38 -0500] yruss972: I haven't found any solutions (going on two days now)
[2013-02-18 13:21:56 -0500] zts: yruss972: if you can test it on 10.22.0, that would be good to know (since the attribute stuff changed significantly in version 11)
[2013-02-18 13:22:57 -0500] zts: yruss972: if you want to work around it, I would suggest making a copy of the whole hash (node.set['ipf_rules'][i]), changing the keys you care about, then saving the whole thing back to node.set['ipf_rules'][i]
[2013-02-18 13:23:19 -0500] yruss972: zts: I tried but didn't find a way to make the copy :?
[2013-02-18 13:23:20 -0500] alex___: i want to merge http://pastebin.com/mG11cYAe with :{"globalhostentries":[["10.2.13.103","soutbound01.tripolis.iw"]]}
[2013-02-18 13:23:40 -0500] alex___: but it will be overwriten each time
[2013-02-18 13:23:53 -0500] yruss972: zts: I saw something about .to_hash being broken in chef 11
[2013-02-18 13:24:10 -0500] yruss972: zts: I'll try to downgrade
[2013-02-18 13:25:28 -0500] zts: yruss972: hm - i'd just try something like:  rule = node['ipf_rules'][i]
[2013-02-18 13:25:56 -0500] zts: though I don't know that works for a fact - sorry to randomly speculate at you!
[2013-02-18 13:26:51 -0500] yruss972: zts: I tried that :)
[2013-02-18 13:28:31 -0500] yruss972: zts: ok- definitely a bug. Works like a charm in 10.22
[2013-02-18 13:29:00 -0500] yruss972: what a pita
[2013-02-18 13:29:37 -0500] zts: doh!
[2013-02-18 13:53:59 -0500] BryanWB__: hey, atomic-penguin when u get a free moment, i sent u a juicy pr for ur yumrepo cookbook
[2013-02-18 13:56:24 -0500] denniswisnia: Whats the best way to set the hostname of an node with chef?
[2013-02-18 14:03:07 -0500] alex___: i want to merge http://pastebin.com/mG11cYAe with :{"globalhostentries":[["10.2.13.103","soutbound01.tripolis.iw"]]}
[2013-02-18 14:03:10 -0500] alex___: but it will be overwriten each time
[2013-02-18 14:03:21 -0500] atomic-penguin: BryanWB__, Juicy huh?
[2013-02-18 14:06:20 -0500] BryanWB__: atomic-penguin: no not esp. juicy, just a new repo recipe for zeromq
[2013-02-18 14:21:51 -0500] yruss972: alex___: I had similar issues. I just downgraded chef to 10.22 and they went away
[2013-02-18 14:23:19 -0500] BryanWB__: andreacampi: i ran into some issues w/ fnichol's rvm cookbook and have switched to rbenv from RiotGames
[2013-02-18 14:23:29 -0500] BryanWB__: andreacampi: new version coming out in a few mins
[2013-02-18 14:23:42 -0500] andreacampi: cool, sounds good
[2013-02-18 14:23:50 -0500] andreacampi: I use rbenv as much as possible myself
[2013-02-18 14:24:03 -0500] andreacampi: I'll give it a try later, busy now :)
[2013-02-18 14:36:19 -0500] rawler_: I've been tearing my hair for several days, trying to get a basic rails-application up and running with vagrant, ruby 1.9.3 and chef.. I'll soon throw in the towel, but first; could someone PLEASE explain to me how this is possible? http://pastebin.com/aFR1x8Mw
[2013-02-18 14:37:26 -0500] rawler_: oh, using chef-solo btw, if that makes a difference..
[2013-02-18 14:40:26 -0500] alex___: yruss972 o oke but there must be a better solution?
[2013-02-18 14:41:52 -0500] zts: rawler_: not seeing any Chef involvement in that?  But the line erroring in your gemfile looks wacky - shouldn't it be this?: gem 'ruby-ldap', :require => 'ldap'
[2013-02-18 14:42:08 -0500] zts: rawler_: are you able to spin up that same code/gemfile outside vagrant by hand?
[2013-02-18 14:42:57 -0500] rawler_: zts: sure.. the require-line is ruby1.9-syntax?
[2013-02-18 14:44:20 -0500] rawler_: but, my real question, why is it seemingly NOT running the bundle command that is on PATH ?
[2013-02-18 14:45:37 -0500] rawler_: "/opt/vagrant_ruby/bin/bundle install" produces the exact same error as running just "bundle install", so I assume that is what is used, but HOW, if "which" says otherwise?
[2013-02-18 14:46:59 -0500] rawler_: hmm, strange.. logging out/in to the vagrant ssh-environment resolved the issue.. :S
[2013-02-18 14:47:00 -0500] zts: rawler_: ah right.  No idea, that is a bit mad.  Maybe someone else here will know, or perhaps someone in #vagrant will - given that it is broken for you interactively, I'd expect that fixing that will fix it for Chef too
[2013-02-18 14:57:39 -0500] gp5st: hello. how does one manage environments and roles from knife?  i can see how to create, but not how to upload or download them from the server
[2013-02-18 14:59:39 -0500] f1gjam: you would manage via json file
[2013-02-18 14:59:52 -0500] f1gjam: so create a json with whatever you want the role have
[2013-02-18 14:59:59 -0500] f1gjam: and use knife to upload
[2013-02-18 15:00:10 -0500] f1gjam: if the role already exists I believe it overwrites it
[2013-02-18 15:00:44 -0500] gp5st: how do i upload it though?
[2013-02-18 15:01:03 -0500] gp5st: that and sycing/downloading from the server is what i'm not seeing
[2013-02-18 15:02:05 -0500] gp5st: i only see the create, delete, show, edit, and list subcommands
[2013-02-18 15:12:50 -0500] f1gjam: the /etc/chef/client
[2013-02-18 15:12:58 -0500] f1gjam: files tells knife about the server
[2013-02-18 15:13:42 -0500] f1gjam: so when you do: knife environment  from file  </myEnv.json>
[2013-02-18 15:14:07 -0500] f1gjam: it will connect update/create/add your env
[2013-02-18 15:22:55 -0500] gondoi: so, with the new test-kitchen coming along, it probably wouldn't make sense to setup a cookbook repo to use test-kitchen with current master correct?
[2013-02-18 15:23:02 -0500] gondoi: or is 1.0 a ways out?
[2013-02-18 15:27:29 -0500] dcunited001_: hey guys, trying to install chef-server on a vm and running into some wierd errors
[2013-02-18 15:27:52 -0500] dcunited001_: installation went great, no errors or anything.  all services running.  rabbitmq, solr, etc, etc
[2013-02-18 15:28:12 -0500] dcunited001_: but i can't get the knife configuration up and running
[2013-02-18 15:29:03 -0500] dcunited001_: here's the knife configure script i'm trying to run
[2013-02-18 15:29:05 -0500] dcunited001_: https://github.com/dcunited001/vagrant_chef/blob/master/knife_configure.sh
[2013-02-18 15:29:54 -0500] dcunited001_: but i'm getting "ERROR: connection refused", but it's not immediately refusing the error, it takes about a second
[2013-02-18 15:30:40 -0500] dcunited001_: ERROR: Connection refused connecting to chefserver.vm:4000 for /users, retry 1/5 ... ERROR: Connection refused connecting to chefserver.vm:4000 for /users, retry 5/5 ERROR: Network Error: Connection refused - Connection refused connecting to chefserver.vm:4000 for /users, "giving up"
[2013-02-18 15:30:53 -0500] dcunited001_: that's the error text
[2013-02-18 15:31:20 -0500] dcunited001_: does that mean the authentication isn't working? that i need to find the correct "admin user"?
[2013-02-18 15:32:02 -0500] dcunited001_: does there need to be a corresponding user in linux for the admin.pem file?  should i use the chef_webui user as the admin user?
[2013-02-18 15:32:13 -0500] dcunited001_: i keep finding conflicting documentation on the opscode site
[2013-02-18 15:46:23 -0500] gp5st: ah, nvm, it automatically does
[2013-02-18 16:32:05 -0500] aruntomar: dcunited001_: http://www.linuxguy.in/how-to-install-and-configure-open-source-chef-server-11/
[2013-02-18 16:33:13 -0500] DrVonNostren: do i have to "sudo chef-server-ctl reconfigure" If I change my hostname. That appears to have BROKEN everything
[2013-02-18 16:33:39 -0500] DrVonNostren: despite having a correctly update /etc/hosts throughout enviro
[2013-02-18 16:34:19 -0500] aruntomar: DrVonNostren: if u install chef server 11, it takes the fqdn by default for all the url's , so guess, if you change it, it'll break stuff
[2013-02-18 16:34:48 -0500] aruntomar: DrVonNostren: try to reconfigure, but that might delete all the cookbooks, node etc as well
[2013-02-18 16:35:12 -0500] DrVonNostren: Arg, Okay. Thats all backed up with a git repo tho
[2013-02-18 16:35:39 -0500] aruntomar: ok, then try reconfiguring it
[2013-02-18 17:28:42 -0500] sfb: So I was creating a cookbook to install iceScrum but the WAR that is downloadable on their website is actually a zip file with the WAR inside of it.
[2013-02-18 17:29:04 -0500] sfb: Meaning strategy :java_remote_file isnt working for me. )=
[2013-02-18 17:30:21 -0500] sfb: I could use java_local_file but then I need to either use http_request to get it or bundle it in the files for the cookbook.
[2013-02-18 17:30:24 -0500] sfb: Is there a best practice?
[2013-02-18 17:30:56 -0500] miah: yes
[2013-02-18 17:31:16 -0500] miah: you should _always_ mirror remote files locally and get them from that rather than the original upstream site.
[2013-02-18 17:31:27 -0500] miah: you wouldn't want their website going down to fubar your deployments right?
[2013-02-18 17:31:41 -0500] sfb: Fair enough.
[2013-02-18 17:31:57 -0500] miah: with this in mind, you can download it and unzip it and present it via http as a war for your chef clients
[2013-02-18 17:32:23 -0500] sfb: Will do. That's a smarter solution.
[2013-02-18 17:38:08 -0500] teukka: but then you lose the ability to blame external sites for your deployment problems
[2013-02-18 17:38:43 -0500] dotslash: I've got a very weird problem: knife cookbook create nexus-file; knife cookbook upload nexus-file; always results in a 404 error. I can call it anything other than nexus_file or nexus-file. Any idea why?
[2013-02-18 17:39:00 -0500] gondoi: anyone here trying test-kitchen 1.0 out yet and have the net-scp dependency problem fixed?
[2013-02-18 17:40:24 -0500] ssd7: Happy President's Day to those in the U.S.
[2013-02-18 17:49:26 -0500] JoelMcCracken: i wish chef used gems =(
[2013-02-18 17:49:38 -0500] JoelMcCracken: all of the opscode cookbooks were distributed as gems, i mean
[2013-02-18 17:49:54 -0500] matti: JoelMcCracken: Why?
[2013-02-18 17:49:55 -0500] JoelMcCracken: would much prefer 'bundle' to hunting dependencies
[2013-02-18 17:50:14 -0500] matti: JoelMcCracken: There is an equivalent-ish for Chef
[2013-02-18 17:50:29 -0500] JoelMcCracken: oh, knife
[2013-02-18 17:50:32 -0500] JoelMcCracken: (right?)
[2013-02-18 17:50:34 -0500] matti: No.
[2013-02-18 17:50:38 -0500] JoelMcCracken: what is it
[2013-02-18 17:50:45 -0500] JoelMcCracken: I'm only using chef-solo,
[2013-02-18 17:50:47 -0500] matti: http://berkshelf.com/
[2013-02-18 17:51:00 -0500] JoelMcCracken: which makes learning some of this stuff more complicated
[2013-02-18 17:51:02 -0500] matti: JoelMcCracken: http://christian-trabold.de/librarian-chef-vs-berkshelf
[2013-02-18 17:51:23 -0500] JoelMcCracken: why not use bundler?
[2013-02-18 17:51:23 -0500] matti: JoelMcCracken: What you will find with Solo, is that you really need search and nodes.
[2013-02-18 17:51:36 -0500] matti: JoelMcCracken: Otherwise it is hard to work with cookbooks etc.
[2013-02-18 17:51:46 -0500] matti: s/cookbooks/data bags/
[2013-02-18 17:51:57 -0500] matti: JoelMcCracken: Different tool, different use case.
[2013-02-18 17:52:11 -0500] JoelMcCracken: is it because cookbooks need to be modified so much?
[2013-02-18 17:52:50 -0500] JoelMcCracken: matti: I'm only using chef for independent systems
[2013-02-18 17:53:16 -0500] JoelMcCracken: so search doesn't seem super useful
[2013-02-18 17:54:48 -0500] JoelMcCracken: cool, though. I will certainly check that out.
[2013-02-18 17:55:25 -0500] matti: JoelMcCracken: What I meant is for instance.
[2013-02-18 17:55:29 -0500] matti: JoelMcCracken: A ZooKeeper cluster.
[2013-02-18 17:55:37 -0500] matti: JoelMcCracken: Where each node has to have unique ID.
[2013-02-18 17:55:57 -0500] matti: JoelMcCracken: Now, how do you connect ID - to - host if you have no middle layer? Meaning, no nodes.
[2013-02-18 17:56:22 -0500] matti: JoelMcCracken: You have to abuse cookbooks and store something like IP address which you can identify on the server / machine side.
[2013-02-18 17:56:27 -0500] matti: JoelMcCracken: To apply appropriate ID.
[2013-02-18 17:56:38 -0500] matti: JoelMcCracken: And this can go ugly quickly.
[2013-02-18 17:56:40 -0500] zts: matti: there are plenty of use cases where that isn't required (or even particularly useful)
[2013-02-18 17:56:50 -0500] matti: zts: Of course.
[2013-02-18 17:57:13 -0500] matti: zts: But I am giving different example, what is your point?
[2013-02-18 17:57:47 -0500] zts: matti: well, to me, when you say "What you will find with Solo is that you really need search and nodes", I hear "You are going to have problems with the tool you have chosen"
[2013-02-18 17:58:01 -0500] matti: No.
[2013-02-18 17:58:04 -0500] zts: I am just saying that's not true.  It is, of course, wise to watch out that you aren't trying to use the tool in some way it's not suited
[2013-02-18 17:58:24 -0500] JoelMcCracken: that's how I interpreted it zts
[2013-02-18 17:58:29 -0500] JoelMcCracken: just sayin =)
[2013-02-18 17:58:49 -0500] matti: I may have worded it badly.
[2013-02-18 17:58:58 -0500] matti: But message was different ;]
[2013-02-18 17:59:50 -0500] JoelMcCracken: sure thing. Glad we are able to understand each other
[2013-02-18 18:00:20 -0500] matti: ;)
[2013-02-18 18:06:56 -0500] miah: cookbooks are not gems and most people writing cookbooks don't know the first thing about ruby or software development
[2013-02-18 18:07:00 -0500] dotslash: I've got a very weird problem: knife cookbook create nexus-file; knife cookbook upload nexus-file; always results in a 404 error. I can call it anything other than nexus_file or nexus-file. Any idea why?
[2013-02-18 18:07:07 -0500] miah: its good to keep that community separated from the rubygems community
[2013-02-18 18:07:15 -0500] miah: they solve totally different problems
[2013-02-18 18:07:21 -0500] miah: rubygems are libraries for writing ruby software
[2013-02-18 18:07:30 -0500] miah: cookbooks are libraries for doing systems management
[2013-02-18 18:08:38 -0500] miah: bundler has some advantages that i wish were present in chef, but i think we're a ways away from that still
[2013-02-18 18:08:40 -0500] yfeldblum: cookbooks are gems, like screwdrivers are not lawn chairs: they don't go in the same drawer
[2013-02-18 18:08:46 -0500] miah: yup
[2013-02-18 18:08:47 -0500] yfeldblum: cookbooks are *not* gems, like screwdrivers are not lawn chairs: they don't go in the same drawer
[2013-02-18 18:09:16 -0500] miah: you could sit on a screwdriver but it wouldn't be comfy
[2013-02-18 18:09:17 -0500] matti: Hey miah
[2013-02-18 18:09:21 -0500] miah: hi
[2013-02-18 18:09:26 -0500] matti: miah: Good summary of what cookbooks are. +1
[2013-02-18 18:09:56 -0500] miah: librarian and berkshelf both do a good job of handling the dependency issues and getting everything downloaded
[2013-02-18 18:11:34 -0500] miah: chef-solo works fine, but you eventually end up with all the issues that plauge capistrano
[2013-02-18 18:11:52 -0500] miah: plague even
[2013-02-18 18:12:07 -0500] jtimberman: another thing to keep in mind is that just because cookbooks are written in Ruby, it isn't necessarily required. it's a useful abstraction for the interface, but theory holds that they could be written in other languages.
[2013-02-18 18:12:12 -0500] miah: right
[2013-02-18 18:12:24 -0500] jtimberman: not that there's any support built in for other languages right now :)
[2013-02-18 18:12:26 -0500] miah: you can totally write cookbooks/recipes just using the provided resources and providers
[2013-02-18 18:12:32 -0500] mattupstate: anyone have any success setting up a rabbitmq cluster with the opscode rabbitmq cookbook? been trying to get it rollin with vagrant but no success yet
[2013-02-18 18:12:46 -0500] miah: jtimberman: i thought i saw something about somebody writing cookbooks in perl (or at least attempting to do so)
[2013-02-18 18:13:08 -0500] jtimberman: miah: yeah, Adam wrote a thing for that a long time ago.
[2013-02-18 18:13:12 -0500] Mithrandir: back in the dark ages, holoway did the groundwork to write them in perl.
[2013-02-18 18:13:13 -0500] jtimberman: proof of concept.
[2013-02-18 18:13:19 -0500] jtimberman: it works :)
[2013-02-18 18:13:27 -0500] Mithrandir: jtimberman: still?
[2013-02-18 18:13:32 -0500] jtimberman: Mithrandir: Probably?
[2013-02-18 18:13:46 -0500] jtimberman: I mean, it worked at the time :)
[2013-02-18 18:13:48 -0500] jtimberman: better?
[2013-02-18 18:14:05 -0500] yfeldblum: jtimberman, "in theory" anything is possible
[2013-02-18 18:14:19 -0500] Mithrandir: I would just have thought it would have bitrotted
[2013-02-18 18:14:20 -0500] yfeldblum: jtimberman, is there customer interest out there for non-ruby cookbooks?
[2013-02-18 18:14:25 -0500] Mithrandir: but I haven't actually ever tested it.
[2013-02-18 18:14:48 -0500] miah: https://metacpan.org/source/HOLOWAY/Chef-0.01/lib/Chef.pm
[2013-02-18 18:14:56 -0500] yfeldblum: jtimberman, because those customers are MISTAKEN
[2013-02-18 18:15:00 -0500] yfeldblum: jtimberman, :D
[2013-02-18 18:15:07 -0500] Mithrandir: I don't mind ruby-the-language so much, but the interpreter is crap.
[2013-02-18 18:15:20 -0500] miah: probably that =)
[2013-02-18 18:15:42 -0500] jtimberman: yeah, it might still work?
[2013-02-18 18:15:46 -0500] jtimberman: i don't know
[2013-02-18 18:15:50 -0500] miah: probably not
[2013-02-18 18:16:04 -0500] jtimberman: yfeldblum: we've had people more interested in running the agent as a non-Ruby client for system resource reasons.
[2013-02-18 18:16:17 -0500] miah: just stop using MRI
[2013-02-18 18:16:19 -0500] jtimberman: the recipe dsl in ruby is fine.
[2013-02-18 18:16:30 -0500] miah: push all your support into rubinus or jruby
[2013-02-18 18:16:39 -0500] jtimberman: jruby doesn't like fork :)
[2013-02-18 18:16:41 -0500] yfeldblum: Mithrandir, the crappy interpreter affects you when you're trying to write a blazing fast network daemon ... but if it's just shelling out 5,000 times to package managers and moving things around on disk 5,000 times, i wonder if the crappy interpreter matters all that much in comparison
[2013-02-18 18:16:47 -0500] dotslash: I've got a very weird problem: knife cookbook create nexus-file; knife cookbook upload nexus-file; always results in a 404 error. Anyone got a test system setup that they can try that to see if it is just me?
[2013-02-18 18:16:50 -0500] matti: Chef client in Go!
[2013-02-18 18:16:51 -0500] yfeldblum: jtimberman, jruby has no table manners
[2013-02-18 18:16:52 -0500] matti: \o/
[2013-02-18 18:17:08 -0500] laurent\: oh 'knife search node "ohai_time:[$(date +%s -d "40 minutes ago") TO NOW]"' doesn't work anymore, could it be related to the solr change ? (i'm asking here first, i've not looked yet) :)
[2013-02-18 18:17:09 -0500] Mithrandir: yfeldblum: it segfaults randomly.
[2013-02-18 18:17:11 -0500] jtimberman: yfeldblum: s/ruby/ava/
[2013-02-18 18:17:20 -0500] matti: Go all the things!
[2013-02-18 18:17:33 -0500] miah: i feel like the people that can pinpoint problems in/with MRI could also at least file bugs upstream
[2013-02-18 18:18:28 -0500] matti: miah: Haha
[2013-02-18 18:18:30 -0500] yfeldblum: Mithrandir, ideal recipes & resources are retryable, permitting chef to crash at any time without consequence
[2013-02-18 18:18:49 -0500] matti: miah: MRI is considered out of life by Ruby developers, so nobody would fix them.
[2013-02-18 18:18:59 -0500] Mithrandir: yfeldblum: sure, it segfaults _randomly_. So it runs fine 95% of the time, 5% of the time, it'll segfault, random VMs, random physical hosts.
[2013-02-18 18:18:59 -0500] miah: no it isnt
[2013-02-18 18:19:06 -0500] Mithrandir: or 1% or whatever.
[2013-02-18 18:19:07 -0500] miah: lots of people are still doing active mri dev
[2013-02-18 18:19:12 -0500] matti: miah: That's what you think ;)
[2013-02-18 18:19:34 -0500] miah: then what are people sinking their time into?
[2013-02-18 18:19:42 -0500] matti: miah: 2.0
[2013-02-18 18:19:52 -0500] miah: is 2.0 not considered mri anymore?
[2013-02-18 18:20:26 -0500] JoelMcCracken: it is
[2013-02-18 18:20:51 -0500] matti: Depends how do you understand MRI
[2013-02-18 18:21:03 -0500] miah: i pretty much see it as "its from ruby-lang.org, therefore its mri as Matz is leading that effort"
[2013-02-18 18:21:04 -0500] matti: MRI in most cases is considered to be 1.8.x branch
[2013-02-18 18:21:20 -0500] matti: YARV was the 1.9
[2013-02-18 18:21:27 -0500] miah: ah i see
[2013-02-18 18:21:46 -0500] matti: There is mruby where most of Matz's focus goes nowadays.
[2013-02-18 18:21:51 -0500] matti: And 2.0 is driven by community.
[2013-02-18 18:21:56 -0500] jtimberman: there was a good ruby rogues podcast episode with brixen about ruby implementations recently
[2013-02-18 18:21:56 -0500] JoelMcCracken: hmm?
[2013-02-18 18:22:15 -0500] JoelMcCracken: i wouldn't caracterize it that way at all
[2013-02-18 18:22:22 -0500] miah: jtimberman: ya. i listened on bart so i may have missed some pieces when the train hit 90+ decibels
[2013-02-18 18:22:22 -0500] matti: They are people working on backports to 1.8 of security patches etc.
[2013-02-18 18:22:24 -0500] jtimberman: http://rubyrogues.com/091-rr-the-ruby-design-process-with-brian-shirai/
[2013-02-18 18:22:45 -0500] matti: JoelMcCracken: I got a patch accepted for 2.0 to extend Ruby.
[2013-02-18 18:22:51 -0500] miah: nice
[2013-02-18 18:22:59 -0500] JoelMcCracken: very nice
[2013-02-18 18:23:05 -0500] JoelMcCracken: what does it do?
[2013-02-18 18:23:06 -0500] matti: JoelMcCracken: And the process is painful, and I had to learn all the arcana of what and who is doing what ;]
[2013-02-18 18:23:16 -0500] miah: i am not a confident enough programmer to delve into interpreter patches yet
[2013-02-18 18:23:49 -0500] JoelMcCracken: so do you mean that within the ruby-lang.org community, they refer to it this way?
[2013-02-18 18:24:09 -0500] JoelMcCracken: if so, interesting.
[2013-02-18 18:24:25 -0500] matti: JoelMcCracken: Adds support for lutimes.
[2013-02-18 18:24:31 -0500] matti: JoelMcCracken: On *nix.
[2013-02-18 18:24:45 -0500] matti: JoelMcCracken: I have almost ready solution for Win32
[2013-02-18 18:25:02 -0500] matti: JoelMcCracken: But I have WinAPI so maybe next .-release ;]
[2013-02-18 18:25:07 -0500] yfeldblum: matti, MRI used to be "Matz's Ruby Interpreter"; it now is "Matz's Ruby Implementation", which is a VM rather than an interpreter
[2013-02-18 18:25:21 -0500] JoelMcCracken: ic
[2013-02-18 18:25:22 -0500] JoelMcCracken: nice
[2013-02-18 18:25:32 -0500] yfeldblum: matti, YARV is not a Ruby implementation, but the VM subsystem inside MRI 1.9
[2013-02-18 18:26:07 -0500] matti: yfeldblum: I never said it was an implementation.
[2013-02-18 18:26:28 -0500] matti: yfeldblum: And you do not have to explain this to me.
[2013-02-18 18:28:13 -0500] matti: yfeldblum: Although, I do appreciate the effort :)
[2013-02-18 18:28:14 -0500] yfeldblum: jtimberman, any sage advice when it comes to custom resources whose names are driven by their content? e.g., a file whose name includes the checksum?
[2013-02-18 18:29:07 -0500] matti: s/I have/I hate/
[2013-02-18 18:29:10 -0500] matti: WinAPI...
[2013-02-18 18:29:46 -0500] matti: I still believe that we should re-write everything in Go.
[2013-02-18 18:29:47 -0500] matti: ;p
[2013-02-18 18:30:18 -0500] yfeldblum: matti, i'm going with "Haskellize everything"
[2013-02-18 18:30:24 -0500] JoelMcCracken: I'd prefer rust
[2013-02-18 18:30:29 -0500] matti: yfeldblum: Haha
[2013-02-18 18:30:37 -0500] JoelMcCracken: of course, I also really like ruby
[2013-02-18 18:30:45 -0500] matti: Rust is nice.
[2013-02-18 18:33:32 -0500] spox: does knife compat with erchef have a minimum version requirement?
[2013-02-18 18:39:29 -0500] mattupstate: any rabbitmq cookbook users out there?
[2013-02-18 18:41:14 -0500] matti: mattupstate: Haha
[2013-02-18 18:41:23 -0500] matti: mattupstate: You seem to have hard time ;p
[2013-02-18 18:43:04 -0500] mattupstate: i am
[2013-02-18 18:43:34 -0500] mattupstate: i feel like i'm just missing a small thing
[2013-02-18 18:44:43 -0500] matti: mattupstate: What does not work?
[2013-02-18 18:45:04 -0500] mattupstate: just been trying to cluster two VM's locally
[2013-02-18 18:45:16 -0500] matti: OK
[2013-02-18 18:45:19 -0500] mattupstate: and the configuration doesn't seem to work
[2013-02-18 18:45:32 -0500] matti: What are you seeing?
[2013-02-18 18:45:49 -0500] laurent\: pebcak issue solved
[2013-02-18 18:49:01 -0500] mattupstate: matti: using this Vagrantfile
[2013-02-18 18:49:04 -0500] mattupstate: https://gist.github.com/mattupstate/4979630
[2013-02-18 18:49:40 -0500] mattupstate: let met get the error(s)
[2013-02-18 18:58:21 -0500] mattupstate: matti: updated the gist with relevant files
[2013-02-18 19:05:58 -0500] Kzim: hi
[2013-02-18 19:06:22 -0500] matti: mattupstate: Try to get it working manually.
[2013-02-18 19:06:51 -0500] mattupstate: even after i just install rabbitmq via the cookbook and try the cluster configuration manually it says it can't find the nodes
[2013-02-18 19:07:07 -0500] mattupstate: even though i can get ping responses from them
[2013-02-18 19:10:23 -0500] matti: mattupstate: Are you using host network?
[2013-02-18 19:10:24 -0500] matti: Hm.
[2013-02-18 19:11:05 -0500] mattupstate: yup
[2013-02-18 19:12:52 -0500] matti: mattupstate: Stop both of them.
[2013-02-18 19:13:22 -0500] matti: mattupstate: Start one with rabbitmq-server -detached
[2013-02-18 19:13:29 -0500] matti: mattupstate: Do the same on the second one.
[2013-02-18 19:14:17 -0500] matti: mattupstate: Then, rabbitmqctl stop_app on second one.
[2013-02-18 19:14:42 -0500] matti: mattupstate: rabbitmqctl join_cluster --ram <data of the first one>
[2013-02-18 19:14:58 -0500] matti: mattupstate: Then start_app and cluster_status.
[2013-02-18 19:15:12 -0500] mattupstate: i can follow all manual instructions from the rabbitmq docs just fine but i want to know whats messed up about this cookbook
[2013-02-18 19:16:25 -0500] matti: Does it work manually?
[2013-02-18 19:16:31 -0500] matti: That is the point.
[2013-02-18 19:16:41 -0500] mattupstate: i'm set up a cluster manually
[2013-02-18 19:16:58 -0500] mattupstate: and i'd be interested in fixing this cookbook to make it work so i can automate
[2013-02-18 19:19:51 -0500] miah: fix it, submit a ticket, and include a link to your branch with the fixes
[2013-02-18 19:20:10 -0500] miah: hoping to do that myself quite soon. i've got a backlog of stuff i need to push upstream
[2013-02-18 19:21:35 -0500] zts: Mithrandir: are you also seeing segfaults on 1.9.x, or just 1.8.x?
[2013-02-18 19:22:54 -0500] Mithrandir: zts: 1.9.x
[2013-02-18 19:23:01 -0500] Mithrandir: whatever is in ubuntu 12.04
[2013-02-18 19:23:44 -0500] Mithrandir: I guess I'm seeing somewhere around 0.1% of the runs segfaulting or so.
[2013-02-18 19:24:00 -0500] Mithrandir: ~1/day, across 30-ish machines, run from cron once an hour
[2013-02-18 19:25:11 -0500] jtimberman: ruby 1.9.3-p0
[2013-02-18 19:25:16 -0500] jtimberman: is the 12.04 version
[2013-02-18 19:25:37 -0500] jtimberman: i imagine there's backports of security fixes, but probably not all improvements since p0 was released.
[2013-02-18 19:25:53 -0500] DrVonNostren: If I want to customize cookbooks downloaded from the community what is the process for doing so? Using "knife cookbook site install name", untarring it, and then simply editing the files manually,  how does "knife cookbook site install" tie in? Thanks
[2013-02-18 19:26:15 -0500] zts: Mithrandir: craptacular :(  I had similar grief on Centos with 1.8.7, but it stopped when we started rolling our own 1.9 packages
[2013-02-18 19:26:22 -0500] jtimberman: mattupstate: hey, so, mattray has been working on the rabbitmq cookbook. ping him when he's around tomorrow if you have further trouble w/ rabbitmq clustering, he might have an idea.
[2013-02-18 19:26:36 -0500] Kzim: Hello, i just installed chef 11 rpm and knife node list and everything work great exept, i can't upload any cookbook (Network Error: getaddrinfo: Name or service not known) any idea ?
[2013-02-18 19:26:40 -0500] mattupstate: jtimberman: roger that, thanks for the tip
[2013-02-18 19:27:14 -0500] DrVonNostren: Kzim: what does your knife.rb look like?
[2013-02-18 19:27:36 -0500] DrVonNostren: Kzim: is your chefserver in your /etc/hosts?
[2013-02-18 19:27:48 -0500] miah: DrVonNostren: man git
[2013-02-18 19:27:55 -0500] DrVonNostren: Kzim: have you changed your hostname since your ran chef-server-ctl reconfigure?
[2013-02-18 19:28:42 -0500] Mithrandir: jtimberman: yeah, the only thing I see from it is a mail a day or so, so I haven't been bothered enough to roll my own packages.
[2013-02-18 19:29:03 -0500] DrVonNostren: miah: perhaps you can elaborate
[2013-02-18 19:29:36 -0500] Kzim: DrVonNostren, not in the /etc/hosts but the dns answer well.
[2013-02-18 19:30:01 -0500] Kzim: DrVonNostren, didn't changed the hostname and i ll give you my knife.rb in a sec
[2013-02-18 19:31:27 -0500] DrVonNostren: while your at it, give the knife upload command the -VV option and paste that up as well.
[2013-02-18 19:31:35 -0500] DrVonNostren: Kzim: ^
[2013-02-18 19:32:18 -0500] zts: DrVonNostren: 'knife cookbook site install' does some stuff with git to make it easy to merge upstream changes with your own - see http://docs.opscode.com/knife_cookbook_site.html
[2013-02-18 19:32:40 -0500] Kzim: DrVonNostren, http://pastie.org/6216504
[2013-02-18 19:32:49 -0500] zts: DrVonNostren: if you're not storing your chef-repo in git, you probably don't want to be using it.  If you are - and particularly if you will need to make local customisations - it is pretty neat
[2013-02-18 19:33:47 -0500] mattupstate: oh my, there's a pull request for a clustering fix...
[2013-02-18 19:36:24 -0500] Kzim: DrVonNostren, okay i've found the problem is there an hold DNS that is still registered somewhere
[2013-02-18 19:36:42 -0500] Kzim: DrVonNostren, thanks !
[2013-02-18 19:37:34 -0500] DrVonNostren: zts, I am in fact using git (or plan on it) just testbedding at the moment. In my mind it is mostly a way to backup my cookbooks (I realize git is more than this) I imagine the time will come where I modify community cookbooks instead of writing my own. Im just curious what is happening when i type knife cookbook site install. Does that do the combined work of knife cookbook site download and tar with some additional git? How doe
[2013-02-18 19:38:07 -0500] DrVonNostren: ks
[2013-02-18 19:38:20 -0500] zts: DrVonNostren: your comment got cut off after "some additional git? how doe" - but yes, that's basically what's happening
[2013-02-18 19:39:27 -0500] Kzim: DrVonNostren, looks like the hostname on the server has changed after all can i make a reconfigure safely ?
[2013-02-18 19:39:47 -0500] zts: DrVonNostren: the idea is that when you run 'cookbook site install' for the same cookbook in the future, there will be enough information in git to figure out what's changed between the new version, and the one you already had
[2013-02-18 19:40:25 -0500] zts: DrVonNostren: it can then apply those changes on top of any changes you made yourself, and _hopefully_ you end up with something that looks just like if you got the latest copy and made the changes yourself :)
[2013-02-18 19:40:43 -0500] DrVonNostren: So why would anyone chose to knife cookbook site download cookbook name && tar cookbook name over using knife cookbook site install?
[2013-02-18 19:41:04 -0500] DrVonNostren: Kzim: glad you figured it out.
[2013-02-18 19:41:55 -0500] DrVonNostren: zts, i think i get it, git is smarter than i realized
[2013-02-18 19:41:56 -0500] zts: DrVonNostren: that's a good question - I'm not sure if there's any good reason not to use 'site install', if you're already using git.  I'd be interested to hear contrary opinions
[2013-02-18 19:42:29 -0500] zts: DrVonNostren: my best hypothesis would be that "site install" hides some of the details of what's going on, and you might want to have greater control/visibility of what's happening
[2013-02-18 19:45:03 -0500] Kzim: DrVonNostren, a reconfigure just worked great thanks a lot
[2013-02-18 19:46:15 -0500] DrVonNostren: zts, so lets say i have "site install example" I then change some stuff here and there, and the community cookbook releases a bunch of new stuff and i want to update it.  in order to merge the now updated cookbook on the site with my own modifications i just run the "site install" again and git should be smart enough to merge the changes with my setup.
[2013-02-18 19:46:33 -0500] DrVonNostren: zts, and if not, git has a conflict resolution mechanism..
[2013-02-18 19:48:05 -0500] zts: DrVonNostren: yup, that is exactly the theory.  However, there is a gotcha - by default, git won't "push" all the branches that 'site install' creates to your git server
[2013-02-18 19:48:19 -0500] DrVonNostren: Kzim: yes, chef seems to be very sensitive to things being all set in stone before running the reconfigure, but i suppose thats why its called reconfigure and not configure..
[2013-02-18 19:48:38 -0500] zts: DrVonNostren: that means that if you run "site install" in the same git repo as you first did, you're fine - but if someone else on your team does (or if you switched to another computer), you'd have trouble
[2013-02-18 19:49:07 -0500] zts: DrVonNostren: you can push the branches by hand, but I use this git config to do it automatically: https://gist.github.com/zts/4338458
[2013-02-18 19:49:48 -0500] zts: DrVonNostren: I'd heartily recommend trying it out to make sure you understand it, before you need to use the upgrade feature in anger
[2013-02-18 19:50:56 -0500] DrVonNostren: zts, why would it be a problem if someone else did it or if i switched to another computer?
[2013-02-18 19:51:12 -0500] f1gjam: hey guys, is it possible to chef cookbooks in vagrant etc.. without the need for chef-server? to be more specific I am using the mongodb-cookbook which is on github, and as part of the replica set recipe it needs a chef server to query
[2013-02-18 19:51:19 -0500] f1gjam: how would you do this with chef-solo
[2013-02-18 19:52:01 -0500] zts: DrVonNostren: when you're using git, you can have "local" branches that the server doesn't know about - and when you first run "site install", the branches it creates will be local
[2013-02-18 19:53:15 -0500] zts: DrVonNostren: unless you push them to the server, they won't be there when you need them (in the future, when running "site install" again)
[2013-02-18 19:54:21 -0500] DrVonNostren: zts, not sure if i am following, but when you say server here you mean opscodes public server where i branched my local copy from originally?
[2013-02-18 19:55:16 -0500] zts: DrVonNostren: hm, are you using github, and did you "fork" the repo?
[2013-02-18 19:56:09 -0500] DrVonNostren: i havent set anything up, i realize when i make a local copy originally branched from opscodes servers, i will then push the changes to my own top level repo (lets say github)
[2013-02-18 19:56:51 -0500] zts: DrVonNostren: ah right, so the "server" in my explanation is the thing that you're pushing to.  If you "fork" the repo on github, that will be the copy of the repo in your github user account (not in opscode's account)
[2013-02-18 19:56:53 -0500] DrVonNostren: however, im just trying to understand how i dont bork this setup when i want to integrate in the changes of the particular coookbook that i want to update
[2013-02-18 19:57:57 -0500] zts: definitely worth practicing :)  "site install" lets you specify an older version of a cookbook, so find something with a few versions, make some local changes, then try to install the latest version
[2013-02-18 19:58:21 -0500] zts: but do all that before you start using the repo in anger, so that you don't feel like you've lost much if you wipe it out and start again
[2013-02-18 20:01:17 -0500] zts: that's my advice anyway.  It's also worth noting that git lets you undo pretty much any change you make, so all isn't lost if something does go wrong - but it can be hard to figure out what to do until you've wrapped your head around it all
[2013-02-18 20:01:30 -0500] zts: and on that note, I have to head off.  Good luck!
[2013-02-18 20:04:19 -0500] DrVonNostren: zts, thank you
[2013-02-18 20:05:18 -0500] amccloud: chef-client keeps running on my servers and i'm not sure what's triggering it.
[2013-02-18 20:05:26 -0500] amccloud: It just so happens to be the machine with chef-server
[2013-02-18 20:05:46 -0500] amccloud: It's not a huge deal. I just want to understand what's going on.
[2013-02-18 20:13:45 -0500] jmartin: i feel like i must be doing something wrong, im attempting to bootstrap a server in a new chef 11 installation, and using knife bootstrap FQDN -r 'role[base]' and i am receiving the following error,  "The following cookbooks are required by the client but don't exist on the server: * roles"
[2013-02-18 20:14:09 -0500] DrVonNostren: amccloud: i think the chef-server is built ontop of the chef-client, and in fact the chef-client is used to install the additional server stuff, but i may be wrong
[2013-02-18 20:14:17 -0500] BryanWB: i have  this code in my attributes `default['logstash']['join_groups'] = []`    but inside my recipe w/ chef 11, node['logstash']['join_groups'] is nil rather than an empty array
[2013-02-18 20:14:43 -0500] BryanWB: w/ chef 10.x, it is an empty array
[2013-02-18 20:15:08 -0500] amccloud: DrVonNostren: I think you're correct. Now I just need to figure out how to stop auto provisioning.
[2013-02-18 20:50:22 -0500] ctracey: anyone else have issues with getting 405's with Chef11 server?
[2013-02-18 21:00:03 -0500] bofur: I have a not expected behavior I can not really understand: https://gist.github.com/jeremybaumont/c5cdbed5d297a2f4de28
[2013-02-18 21:04:22 -0500] bofur: I can "knife show" a node and found hostname key/value pair but I do not have result when I "knife search" it
[2013-02-18 21:21:34 -0500] kaerast: Is anybody around who's done any work on the file provider? I can't work out why it's reading the entire file in for a create action where no content is provided
[2013-02-18 21:21:51 -0500] kaerast: (this obviously takes quite some time for a file of several gigabytes)
[2013-02-18 21:22:12 -0500] kaerast: I raised a ticket for this earlier today - http://tickets.opscode.com/browse/CHEF-3899
[2013-02-18 21:24:01 -0500] kaerast: running chef-client with -W doesn't read in the entire file, so it's happening as part of the actual managing of it
[2013-02-18 21:29:36 -0500] alexKarp: I'm trying to install chef 11.0.6, and I keep hitting an error during the "execute[verify-system-status] action run" step
[2013-02-18 21:29:49 -0500] danryan: Is there updated documentation for configuring the first chef 11 user? Googles are failing me.
[2013-02-18 21:32:20 -0500] danryan: I'm getting this error when attempting to run `knife configure` on the chef server https://gist.github.com/danryan/4980952
[2013-02-18 21:33:29 -0500] danryan: Disregard; I changed the user from chef-webui to admin and all is well.
[2013-02-18 21:34:36 -0500] danryan: <aside> I wish there was a password flag for this new method
[2013-02-18 21:44:32 -0500] andreacampi: hey
[2013-02-18 21:45:59 -0500] andreacampi: I was wondering, a bunch of cookbooks now specify in their Cheffile 'test-kitchen', '<= 1.0.0'
[2013-02-18 21:46:31 -0500] andreacampi: why the '=' ? won't that cause 1.0.0 to be picked up as soon as it's out? that seems uhm counterintuitive to say the least
[2013-02-18 21:50:36 -0500] miah: less than or equal to
[2013-02-18 21:50:55 -0500] miah: it would cause 1.0.0 to be downloaded
[2013-02-18 21:51:22 -0500] miah: if you see that as a bug, file a ticket
[2013-02-18 22:18:14 -0500] sashimiblade: Hi, everyone!  I'm relatively new to chef (and ruby), and I just posted a question on SO about how to re-use my resources inside a ruby block, if you could check it out that would be awesome http://stackoverflow.com/questions/14946273/access-chef-resources-inside-ruby-block
[2013-02-18 22:18:15 -0500] sashimiblade: thanks!
[2013-02-18 22:22:54 -0500] ttw: Hye do some one now how to get the node name in a recipe ?
[2013-02-18 22:23:42 -0500] ttw: Im tryng to put it in a bash "code" block
[2013-02-18 22:26:33 -0500] ttw: sashimi im quit new to chef to but maybe you can try that :
[2013-02-18 22:26:34 -0500] ttw: bash "something" do   user "root"   cwd "/tmp"   code <<-EOH     python /path/to/script.py   EOH end
[2013-02-18 22:29:00 -0500] apollo13: hiho btm: are you around? coderanger said I should bug you
[2013-02-18 22:31:45 -0500] sashimiblade: @ttw I'm trying to use a template resource, but that would work, I think
[2013-02-18 22:34:59 -0500] miah: why are you using a ruby_block?
[2013-02-18 22:35:04 -0500] miah: you don't need to.
[2013-02-18 22:35:24 -0500] miah: ah, you're not using ruby_block
[2013-02-18 22:35:31 -0500] miah: just inside the application_ruby resource
[2013-02-18 22:36:33 -0500] miah: you can build the resource outside of your block, and assign it the action of :nothing
[2013-02-18 22:36:53 -0500] miah: then inside your block send that resource a notification of 'execute'
[2013-02-18 22:38:08 -0500] miah: ttw: node.fqdn
[2013-02-18 22:38:19 -0500] miah: or node.name
[2013-02-18 22:38:25 -0500] miah: depends on which data you want
[2013-02-18 22:40:19 -0500] ttw: thanks mia. actually it look like you have to make an environement variable to get in in your bash blok
[2013-02-18 22:41:19 -0500] sashimiblade: i guess I don't know the way to send a notification correctly, I put into the ruby block notifies :create, "template[etcetc]", :immediately and it threw an error
[2013-02-18 22:41:21 -0500] ttw: thats whats ive done and it works but it look weird ..
[2013-02-18 22:41:57 -0500] sashimiblade: that is, inside of the `before_migrate do` block
[2013-02-18 23:02:02 -0500] jtimberman: andreacampi: <= was a typo, should be <
[2013-02-18 23:02:03 -0500] miah: sashimiblade: you might have to do something like Chef::Resource::Notification.new('my_resource[derp]', :execute)
[2013-02-18 23:02:12 -0500] miah: you'll have to test and figure out the proper
[2013-02-18 23:02:41 -0500] sashimiblade: ok, let me try that, thank you
[2013-02-18 23:02:49 -0500] miah: https://github.com/opscode/chef/blob/master/lib/chef/resource.rb
[2013-02-18 23:02:51 -0500] miah: for more details
[2013-02-18 23:05:46 -0500] sbotman: within chef 11 the api port is 8000 and the webgui port is 9462 ... will this stay like this in the future?
[2013-02-18 23:06:16 -0500] miah: if it changes you can proxy
[2013-02-18 23:06:33 -0500] andreacampi: jtimberman: ah ok :)
[2013-02-18 23:06:43 -0500] sashimiblade: @miah DUDE that worked! Thank you! my code is now cleaner!
[2013-02-18 23:29:01 -0500] yfeldblum: sbotman, https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb#L118
[2013-02-18 23:29:09 -0500] yfeldblum: sbotman, no reason it will necessarily stay like that
[2013-02-18 23:29:45 -0500] yfeldblum: sbotman, that's looks like it's an internal (but tunable) part of the omnibus-built chef-server package, not part of the chef-server itself
[2013-02-18 23:37:48 -0500] q54321: Hello, I'm following the Fast Start Guide instructions to get started but am running into a problem, i.e. I cannot find knife.rb. I've downloaded validator.pem and my username.pem though.
[2013-02-18 23:39:25 -0500] miah: sashimiblade: np
[2013-02-18 23:40:23 -0500] abetterlie: I'm having problems with the bootstrap installer. Chef solo complains that the json is invalid, but I'm copying it directly off http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo
[2013-02-18 23:40:34 -0500] abetterlie: is there an rpm somewhere for 10.18?
[2013-02-18 23:40:55 -0500] abetterlie: jslint says the json is fine.

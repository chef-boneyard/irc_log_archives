[2013-02-09 00:09:37 -0500] Qapf: well this sucks. all the RBAC stuff that would allow me to allow the node to edit just the databag is for private chef and hosted chef only
[2013-02-09 00:10:05 -0500] Qapf: i either have to make each node an admin, which is bad
[2013-02-09 00:10:18 -0500] Qapf: or persist the value outside of chef.
[2013-02-09 00:11:55 -0500] programmerq: so, we're trying to do "knife node edit" on a node in our private chef. I add the "override" attribute in the json with some overrides. knife claims that the node is not updated and does not save the data.
[2013-02-09 00:12:08 -0500] programmerq: the format of the json in the override seems to work in another chef organization
[2013-02-09 00:12:38 -0500] programmerq: I'm wondering if there's some difference between the working and non-working nodes across the two orgs in the permission model
[2013-02-09 00:15:54 -0500] yfeldblum: programmerq, you can only edit normal-level attributes directly with `knife node edit`, IIRC
[2013-02-09 00:21:42 -0500] programmerq: yfeldblum: yeah, the knife node edit stuff was a red herring. the attributes are indeed getting saved when we do a knifo node from file, but our private chef takes kind of a long time before that stuff is available.
[2013-02-09 00:27:52 -0500] javmorin: anyone have experience overriding the ohai version in the omnibus packages?
[2013-02-09 00:28:06 -0500] amccloud: Anyway to pass a json file to knife bootstrap?
[2013-02-09 00:28:18 -0500] javmorin: I want to deploy chef 11, but the required version of ohai has an ec2 bug which breaks on a large number of my instances
[2013-02-09 00:28:30 -0500] amccloud: I have a handful of initial attributes that need to be set on a node.
[2013-02-09 00:28:43 -0500] javmorin: I've submitted a fix, but who knows if/when that will get merged into ohai proper
[2013-02-09 00:35:11 -0500] p_mc: Howdy.  Is there an node attribute that will tell me the version of the chef-client that it has installed?  I want to do a knife search to find outdated clients.
[2013-02-09 00:43:17 -0500] doomviking: p_mc: I usually do a knife ssh with a chef-client -v to find that
[2013-02-09 00:58:44 -0500] jtran: how do i get a listing of all the chef-server bootstrap files?  I need version 10 and used to install the latest but I see it's now on version 11.  http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz
[2013-02-09 02:08:50 -0500] joenuspl: I have chef-11.2.0-1.el5 talking to chef-server-11.0.2-1.el5 (both CentOS 5.8) and things are running slow. "Synchronizing Cookbooks:" is slow.  Looking at /var/log/chef/client.log, the "Storing updated cookbooks/XXX in the cache." are exactly 10 seconds apart.  At this rate it should finish in a fortnight...  Anyone else experiencing this?
[2013-02-09 03:43:16 -0500] gleam: one of my nodes refuses to pay attention to log_level (in client.rb) or -l (command line). it always logs at info level. won't switch to debug, won't switch to error. 10.18 on squeeze from the apt repo.
[2013-02-09 03:43:20 -0500] gleam: any clues?
[2013-02-09 04:02:56 -0500] ranjibd: gleam, -ldebug , what exactly you are passing?
[2013-02-09 04:04:04 -0500] gleam: if i run "chef-client -ldebug" (or -l debug, or whatever), with no other args, it runs successfully but at info level logging
[2013-02-09 04:04:17 -0500] gleam: if i use -lerror, same thing.
[2013-02-09 04:04:24 -0500] gleam: log_level is set to :error in client.rb
[2013-02-09 04:04:31 -0500] gleam: verbose_logging is set to false
[2013-02-09 04:05:01 -0500] gleam: same config on other nodes w/same chef version doesn't have this effect
[2013-02-09 04:12:33 -0500] juliancdunn: maybe some cookbook is messing with the log level?
[2013-02-09 04:13:21 -0500] gleam: the only cookbook it has that the others don't have is apt::cacher-ng
[2013-02-09 04:13:27 -0500] gleam: only recipe i should say
[2013-02-09 04:14:10 -0500] gleam: the others all have apt::cacher-client
[2013-02-09 04:14:59 -0500] gleam: and it starts doing info logging as soon as it initializes, not midway through teh run
[2013-02-09 04:16:35 -0500] juliancdunn: I'm out of ideas without actually poking around yr system :)
[2013-02-09 04:16:39 -0500] gleam: haha
[2013-02-09 04:16:41 -0500] gleam: yeah
[2013-02-09 04:42:26 -0500] manimal_: so i'm new to chef, and am having aaaaallllll kinds of fun installing chef-server on centos 6.3 haha
[2013-02-09 04:42:42 -0500] coderanger: manimal_: What issues are you seeing?
[2013-02-09 04:42:54 -0500] coderanger: Should just be an rpm install and then chef-server-ctl reconfigure
[2013-02-09 04:43:45 -0500] manimal_: got some net-ssh problems, just wiped the vm gonna run the rpm i downloaded from website for v11
[2013-02-09 04:44:26 -0500] manimal_: i was following directions for installing chef-server with chef-solo and then i tried the bootstrapper that was downloading latest versin and that was giving me erlang issues and and and
[2013-02-09 04:44:29 -0500] coderanger: Yeah, we had to do a fix release, net-ssh pushed out new versions the broke the universe
[2013-02-09 04:44:39 -0500] coderanger: and yeah, anything that isn't omnibus is Wrong
[2013-02-09 04:45:09 -0500] manimal_: so i was doing all this on 32 bit vm and then i finally said screw it lemme just grab the v11 rpm and it wants a 64 bit box
[2013-02-09 04:45:27 -0500] coderanger: It has only been a few days since release, so most guides are still about the older v10 server, and older install methods
[2013-02-09 04:45:58 -0500] manimal_: like i said, im new to chef, but ive learned a lot past day or 2 lol
[2013-02-09 04:46:10 -0500] gleam: coderanger, do you have any idea why chef-client would be ignoring log_level in config.rb and on the command line? it's always info no matter how i try to override it. not happening on other nodes w/the same setup
[2013-02-09 04:46:40 -0500] coderanger: gleam: In theory a cookbook could be overriding it I suppose, seems unlikely though
[2013-02-09 04:46:52 -0500] gleam: yeah, same cookbooks as on another node that doesn't do it
[2013-02-09 04:47:27 -0500] coderanger: I can't think of anything else off the top of my head, what version of chef?
[2013-02-09 04:47:41 -0500] gleam: 10.18 from the opscode repo, on squeeze
[2013-02-09 04:47:51 -0500] gleam: 10.18.2
[2013-02-09 04:49:05 -0500] coderanger: Hmm, yeah nothing obvious coming to mind
[2013-02-09 04:50:13 -0500] gleam: can you think of a good way to debug it?
[2013-02-09 04:51:12 -0500] coderanger: You can throw a puts in your config to see that it is being run and when
[2013-02-09 04:51:21 -0500] coderanger: maybe there is another config file overriding it somehow?
[2013-02-09 04:51:29 -0500] gleam: hmm
[2013-02-09 04:51:47 -0500] gleam: i ran chef-client through strace and saw it open+read /etc/chef/client.rb
[2013-02-09 04:52:03 -0500] coderanger: sounds convincing to me
[2013-02-09 04:52:25 -0500] coderanger: You could open up your migxlib-log install in the gems folder and throw some binding.pry in :)
[2013-02-09 04:52:28 -0500] coderanger: (if you gem install pry)
[2013-02-09 04:52:45 -0500] coderanger: that how I debug rails internals issues half the time
[2013-02-09 04:53:57 -0500] gleam: i'll take a look
[2013-02-09 04:54:42 -0500] coderanger: youll see a level= setter
[2013-02-09 04:54:51 -0500] coderanger: if you break in there you'll see each place setting the level
[2013-02-09 04:55:04 -0500] coderanger: find the evil one, or lack of setting, and bingo
[2013-02-09 05:03:14 -0500] manimal_: root
[2013-02-09 05:03:17 -0500] manimal_: lol
[2013-02-09 05:04:49 -0500] ryno: could anyone lend a hand with chef-solo?
[2013-02-09 05:05:08 -0500] gleam: huh. Ohai::Log
[2013-02-09 05:05:52 -0500] ryno: is that a yes? :)
[2013-02-09 05:05:53 -0500] gleam: and that did it. upgrading ohai solved that problem
[2013-02-09 05:05:53 -0500] gleam: neato
[2013-02-09 05:05:55 -0500] gleam: no, sorry
[2013-02-09 05:19:43 -0500] manimal_: ok i just installed chef 11 from rpm, is webui enabled by default? i cant seem to get to it
[2013-02-09 05:22:18 -0500] coderanger: manimal_: You mean the omnibus rpm?
[2013-02-09 05:25:24 -0500] manimal_: its the official one from chef website about 170 mb download
[2013-02-09 05:25:31 -0500] manimal_: i think i figured it out its using portmapper?
[2013-02-09 05:25:59 -0500] coderanger: portmapper?
[2013-02-09 05:26:42 -0500] manimal_: well, im on the vm i setup for the chef server, and i cant access webui from windows machine, but i installed lynx on chef vm and went to localhost:9462 and the login screen came up for chef
[2013-02-09 05:26:45 -0500] manimal_: but i have iptables off
[2013-02-09 05:30:07 -0500] josephholsten: ugh. switching from librarian to berks really teaches you about how dirty you've been in your chef repo.
[2013-02-09 05:39:16 -0500] miah: chef doesnt use portmapper.. its not a rpc service.
[2013-02-09 05:40:24 -0500] julienphalip: Hello. I was wondering, is there any way to override the content of a template that is rendered in a separate recipe?
[2013-02-09 05:40:58 -0500] julienphalip: The 'source' parameter seems to be relative to the recipe where it is rendered...
[2013-02-09 05:42:17 -0500] manimal_: wonder why i cant access the webui from another box....
[2013-02-09 05:42:32 -0500] coderanger: miah: Does anything other than nfs use it? or ever used it? :P
[2013-02-09 05:42:35 -0500] miah: manimal_: what type of networking are you using on your vpn?
[2013-02-09 05:42:48 -0500] coderanger: julienphalip: set the cookbook attribute
[2013-02-09 05:43:04 -0500] coderanger: julienphalip: Defaults to the cookbook the resource is in, but you can make it anything
[2013-02-09 05:43:25 -0500] manimal_: im not this is a virtual machien running centos 6.3 on my local windows box
[2013-02-09 05:44:07 -0500] julienphalip: coderanger: This is the one I'm trying to override in my custom app's recipe: https://github.com/opscode-cookbooks/varnish/blob/master/recipes/default.rb#L24
[2013-02-09 05:44:30 -0500] coderanger: julienphalip: cookbook node['varnish']['vcl_cookbook']
[2013-02-09 05:44:34 -0500] coderanger: set that too :)
[2013-02-09 05:45:06 -0500] cloudnull: coderanger - quick question, may have been asked before, if so sorry, does pychef work with chef 11 at this time?  to preface I have not tried it yet, but it just poped in my head so i thought i would ask.
[2013-02-09 05:45:07 -0500] miah: coderanger: yes. nis.
[2013-02-09 05:45:24 -0500] coderanger: miah: Oh god, I've tried to block yp* out of my mind
[2013-02-09 05:45:35 -0500] coderanger: cloudnull: Sure, the APIs didn't change
[2013-02-09 05:45:37 -0500] manimal_: i can ssh to the box from windows, iptables is off, minimal install of centos, fresh install of chef, can't access webui from another box, but if i access webui on localhost it works
[2013-02-09 05:45:53 -0500] coderanger: cloudnull: No support for the partial search in the nice Search class but you can make the underlying call yourself
[2013-02-09 05:45:57 -0500] miah: i bet you can access it from your local windows
[2013-02-09 05:46:25 -0500] miah: likely your vm is doing local networking on your windows system and not bridged networking which would allow other systems on your network to see it
[2013-02-09 05:46:44 -0500] manimal_: im on the windows box the vm lives on and cant access it but i can ssh to it
[2013-02-09 05:46:45 -0500] julienphalip: coderanger: Magic! Thanks :)
[2013-02-09 05:46:45 -0500] cloudnull: nice, will be toying around with that sometime in the coming week.  Side note, love pychef , awesome work!
[2013-02-09 05:46:50 -0500] coderanger: julienphalip: Guess I kicked off some good brain juice last night :D
[2013-02-09 05:47:07 -0500] miah: coderanger: me too. but i was still employed to admin it just 2 short years ago =)
[2013-02-09 05:47:10 -0500] manimal_: is webui "secured" by default do i have to somehow add an ip or something somewhere to the chef config?
[2013-02-09 05:47:26 -0500] coderanger: cloudnull: if you want to send me a patch for partial search, the pull req button will be waiting :)
[2013-02-09 05:48:00 -0500] julienphalip: coderanger: Most definitely. Hack days are the best for this sort of things :)
[2013-02-09 05:49:28 -0500] cloudnull: coderanger - roger that - give me a week should have something hacked together soon. :)
[2013-02-09 05:49:35 -0500] coderanger: Oy, getting the urge to make a tool to simplify running apt repos on S3
[2013-02-09 05:49:41 -0500] coderanger: Seems like there is nothing directly for this
[2013-02-09 05:49:54 -0500] coderanger: just "use reprepro or frieght locally and sync it up"
[2013-02-09 05:49:56 -0500] miah: coderanger: good idea
[2013-02-09 05:50:04 -0500] miah: it definitely needs to be done
[2013-02-09 05:50:16 -0500] coderanger: I just want to take a deb and make it disappear into the cloud
[2013-02-09 05:50:44 -0500] manimal_: lol one more day and i start playing with puppet i dont understand why i have so many tiny little issuesjust trying to get a demo install up
[2013-02-09 05:52:35 -0500] coderanger: manimal_: Check your VM networking, that sounds like the issue
[2013-02-09 05:53:19 -0500] manimal_: coderanger: i can ssh to the box no problem
[2013-02-09 05:53:53 -0500] coderanger: Yeah, but that might be explicit since they assume you wanted port 22
[2013-02-09 05:54:05 -0500] coderanger: I wouldn't take that as meaning all ports are forwarded correctly :)
[2013-02-09 05:54:17 -0500] coderanger: Does the api server port work?
[2013-02-09 05:56:27 -0500] manimal_: im using xen
[2013-02-09 05:56:54 -0500] coderanger: xen?
[2013-02-09 05:57:07 -0500] manimal_: for the vm's
[2013-02-09 05:57:16 -0500] manimal_: its not vmware or virtualbox
[2013-02-09 05:57:20 -0500] manimal_: i havent had to set any bridging
[2013-02-09 05:57:38 -0500] coderanger: I'm afraid I'm unfamiliar with that tool, so I can't provide specific stuffs
[2013-02-09 05:57:52 -0500] coderanger: if it works on the public IP inside the VM, then it sounds like a VM networking issue though
[2013-02-09 05:58:10 -0500] coderanger: Didn't actually know xen did stuff other than linux kernel virtualization :)
[2013-02-09 05:58:51 -0500] manimal_: well, the config file is /etc/chef-server/chef-servre-running.json right?
[2013-02-09 06:00:17 -0500] coderanger: That is the generated json given to chef-solo I think
[2013-02-09 06:00:31 -0500] coderanger: the actual config is the server.rb
[2013-02-09 06:00:33 -0500] manimal_: what in the heck...i just went to https://chefserver with no port and it worked
[2013-02-09 06:01:14 -0500] coderanger: Yes, what were you trying before?
[2013-02-09 06:01:23 -0500] manimal_: ive been looking for it on port 4040 cuz of chef 10 and when looking in the .json file i mentioned its listing port 9462 under webui section
[2013-02-09 06:01:35 -0500] coderanger: Ahh, yeah, that port is localhost only
[2013-02-09 06:01:43 -0500] coderanger: nginx routes between the various internal services :)
[2013-02-09 06:01:55 -0500] manimal_: but in chef 10 im pretty sure i accessed webui over 4040
[2013-02-09 06:01:56 -0500] coderanger: we tried to drastically clean things up from c10
[2013-02-09 06:02:00 -0500] coderanger: you did
[2013-02-09 06:02:04 -0500] manimal_: argh
[2013-02-09 06:02:04 -0500] coderanger: and that was silly :)
[2013-02-09 06:02:19 -0500] manimal_: i think the docs are my worst enemy right now being such a newb
[2013-02-09 06:02:45 -0500] coderanger: Is there somewhere in the docs that still mentions 4000 or 4040? we should nuke those ASAP
[2013-02-09 06:03:24 -0500] manimal_: no the problem is the website takes me in circles for docs for 10.x and the docs for 11 seem less detailed
[2013-02-09 06:03:37 -0500] coderanger: Are you looking at the wiki or the real docs?
[2013-02-09 06:03:59 -0500] manimal_: ive been looking at everything under the sun it feels like
[2013-02-09 06:04:16 -0500] coderanger: Looks like the server docs on docs.opscode.com are still pretty thin :(
[2013-02-09 06:04:29 -0500] coderanger: http://docs.opscode.com/config_rb_server.html is probably useful though
[2013-02-09 06:04:38 -0500] manimal_:  ok so where is this server.rb living now?
[2013-02-09 06:05:55 -0500] manimal_: cuz its not in /etc
[2013-02-09 06:42:08 -0500] miah: docs.opscode.com is definitely improving though. so much new stuff.
[2013-02-09 07:18:51 -0500] usiegj00: howdy ... anyone deploying golang + rackspace cloud servers?
[2013-02-09 07:18:58 -0500] usiegj00: love some cookbook pointers
[2013-02-09 07:53:42 -0500] dhruvbansal: I'm having trouble creating a runit service for one of my programs.  It's a compiled binary that daemonizes itself on launch.  I can modify some of its settings (PID file, &c.) via a config file but I can't stop it from daemonizing.  How can I get runit to manage this daemon?
[2013-02-09 07:55:24 -0500] coderanger: dhruvbansal: You cannot
[2013-02-09 07:55:32 -0500] coderanger: runit requires things to not fork
[2013-02-09 07:55:38 -0500] coderanger: You could use upstart though
[2013-02-09 07:56:23 -0500] dhruvbansal: coderanger: that's what i thought.
[2013-02-09 07:57:10 -0500] dhruvbansal: there's some functionality for making runit work nicely with an existing init script (which i have for this program)
[2013-02-09 07:57:13 -0500] dhruvbansal: http://smarden.org/runit/useinit.html
[2013-02-09 07:57:26 -0500] dhruvbansal: so maybe i'll try that -- thanks
[2013-02-09 08:21:47 -0500] coderanger: dhruvbansal: wait, no, stop
[2013-02-09 08:21:58 -0500] coderanger: That is nothing to do with initscripts like /etc/init.d
[2013-02-09 08:22:07 -0500] coderanger: that is for using runit as init, as in process id 1
[2013-02-09 08:22:18 -0500] coderanger: the thing that spawns everything as the system boots
[2013-02-09 08:22:25 -0500] coderanger: This is a very bad idea :)
[2013-02-09 08:22:27 -0500] dhruvbansal: coderanger: realized this a few mins ago....
[2013-02-09 08:22:28 -0500] dhruvbansal: hehe
[2013-02-09 09:15:53 -0500] manimal_: so when using webui and creating a new user, it gives me a new private key.  I put that into username.pem file on my windows box in location in knife.rb right?
[2013-02-09 09:16:26 -0500] manimal_: so where do i get validation.pem private key from? is it on the server and created when chef-server is installed?
[2013-02-09 09:21:13 -0500] manimal_: chefserver 11 seems to have different location for files they are not in /etc/chef
[2013-02-09 09:23:03 -0500] manimal_: i cant run knife client list from the workstation im trying to set up.  I keep getting connection refused for /clients
[2013-02-09 09:24:15 -0500] manimal_: i dont know how to figure out if its my knife.rb, my .pem files, or the api connection isnt working right
[2013-02-09 10:40:38 -0500] liku: Hi Folks! I'm trying to install chef-server 10 at Debian server using chef-solo and instructions from  http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo. But I'm getting an error during receiving gpg keys:
[2013-02-09 10:40:47 -0500] liku: gpg: requesting key 83EF826A from hkp server pgpkeys.mit.edu
[2013-02-09 10:40:47 -0500] liku: gpg: keyserver timed out
[2013-02-09 10:40:48 -0500] liku: gpg: keyserver receive failed: keyserver error
[2013-02-09 10:41:14 -0500] liku: maybe someone could help me to solve that issue? Thanks in advance!
[2013-02-09 12:00:59 -0500] tolland: I take it you can't append to a list in role attributes?
[2013-02-09 13:09:35 -0500] samwierema: Does anyone have experience with the Nagios cookbook? In particular, how I can remove a host which no longer exists
[2013-02-09 14:10:09 -0500] jsegura: Hi, anyone knows if it's possible to collect data from stdin (gets) from a knife plugin. I'm having issues with that
[2013-02-09 14:35:39 -0500] jsegura: I reply to myself: ui.ask("enter whatever")
[2013-02-09 16:44:02 -0500] MrBIOS: hi folks, anybody around?
[2013-02-09 16:44:54 -0500] MrBIOS: Any recommendations on any job boards for chef-specific talent?
[2013-02-09 16:45:22 -0500] MrBIOS: I work for a start-up in San Francisco, and we're looking for a junior sysadmin with some level of Chef experience
[2013-02-09 16:49:20 -0500] btm: MrBIOS: there's a linkedin group.
[2013-02-09 16:49:40 -0500] MrBIOS: btm: thanks, I just stumbled across that actually :)
[2013-02-09 16:50:03 -0500] MrBIOS: the quality of candidates we've been getting is sadly abysmal
[2013-02-09 16:50:06 -0500] MrBIOS: too many brogrammers
[2013-02-09 16:50:45 -0500] gchristensen: MrBIOS: would you mind a PM?
[2013-02-09 16:50:54 -0500] MrBIOS: not at all
[2013-02-09 16:51:28 -0500] btm: yeah, it's a pretty competitive market. my advice is to find a younger person who wants to hack on stuff, open source contributor type. Linux User Groups are sometimes a good place to look.
[2013-02-09 16:52:26 -0500] mattt: brogrammers!
[2013-02-09 16:53:36 -0500] msch: hi, got a newbie question. once i've set up a server using chef-solo, how do I manage software updates? especially of stuff like security updates in packages I don't really care for. e.g. libsomething-or-other that was installed as a dependency by e.g. bash. should i just have them install automatically?
[2013-02-09 16:59:25 -0500] btm: msch: its usually preferable to do that by hand (well, over knife ssh in groups, preprod first), lest a server upgrades packages in the middle of the night and goes down. an execute resource running 'apt-get upgrade' based on a timestamp file so it only happens once a day would work too.
[2013-02-09 17:00:15 -0500] msch: btm: ok thanks. ah knife can do ssh to all the servers and execute commands? that was what i was looking for
[2013-02-09 17:00:30 -0500] msch: btm: i was thinking i'd have to write recipes that match if package version == something then update etc etc
[2013-02-09 17:01:03 -0500] btm: msch: knife ssh *:* 'sudo apt-get update && sudo apt-get upgrade -y'
[2013-02-09 17:01:15 -0500] msch: btm: thanks again
[2013-02-09 17:01:52 -0500] gchristensen: msch: the only thing I'd caution against that, is *:* might cause all your XYZ-type servers to go offline at the same moment :)
[2013-02-09 17:02:07 -0500] msch: gchristensen: yeah i'm guessing there's a way to define server groups
[2013-02-09 17:02:56 -0500] btm: msch: knife ssh takes the same search query that 'knife search node' takes.
[2013-02-09 17:03:07 -0500] msch: cool
[2013-02-09 17:04:09 -0500] gchristensen: msch: also, I like to pass --concurrency to knife ssh to stagger the connections to one or two at a time for the first few times.
[2013-02-09 17:04:34 -0500] msch: gchristensen: we're only having 5 servers so far so that doesn't really matter :)
[2013-02-09 17:04:53 -0500] msch: gchristensen: i could still just ssh into them all and do stuff by hand... if i were masochistic
[2013-02-09 17:05:03 -0500] gchristensen: then I woulddefinitel set it to -C 1 and watch them each, since each one won't take too long.
[2013-02-09 17:05:11 -0500] msch: ah that does make sense
[2013-02-09 17:05:30 -0500] gchristensen: and without it, the server's output will all go into the same feed, and it'll be tough to read
[2013-02-09 17:16:08 -0500] msch: hm... just did a bundle update to get knife-solo 0.1.0 and now it complains that "ERROR: Your private key could not be loaded from /etc/chef/client.pem"
[2013-02-09 17:16:09 -0500] msch: any ideas>
[2013-02-09 17:16:10 -0500] msch: ?
[2013-02-09 17:20:37 -0500] teukka: msch: could you run the command with `-VV` option and pastebin he output? that is nothing knife-solo itself prints
[2013-02-09 17:21:11 -0500] msch: teukka: http://pastie.org/private/wwsmohvzzbzvbge0lsgcxg
[2013-02-09 17:22:52 -0500] teukka: msch: hm, what is the command you are executing?
[2013-02-09 17:23:00 -0500] msch: teukka: knife ssh -VV
[2013-02-09 17:24:50 -0500] teukka: ok, I don't think that has anything to do with knife-solo. but you need chef-server to use `knife ssh`
[2013-02-09 17:25:09 -0500] btm: msch: if you're using solo instead of the regular chef-client, you're choosing a different pattern. you don't have any search without a server, so you can't use knife ssh or knife search.
[2013-02-09 17:25:21 -0500] msch: btm: ah ok. thanks!
[2013-02-09 17:26:13 -0500] btm: msch: when you choose to use solo instead of chef, its up to you to get your cookbooks to all of your systems. knife-solo can help do that if solo is a pattern you prefer. I've only used it a few times, being one that believes much more in the server based use pattern.
[2013-02-09 17:26:45 -0500] teukka: msch: you have to ssh manually to the nodes. or use cookbooks that do what you want and run them with `knife solo cook` commands
[2013-02-09 17:26:49 -0500] msch: btm: well i heard bad things about chef server (and hosted chef) so i used knife-solo
[2013-02-09 17:26:56 -0500] msch: teukka: yeah knife solo cook works
[2013-02-09 17:28:21 -0500] teukka: msch: then the chef itself can be upgraded with calling `knife solo prepare`. note that currently it installs the latest release by default. not the one on work station
[2013-02-09 17:29:29 -0500] teukka: that will change in the future: https://github.com/matschaffer/knife-solo/issues/186
[2013-02-09 17:29:41 -0500] msch: teukka: cool
[2013-02-09 17:31:16 -0500] teukka: msch: but what were the bad things about chef-server you heard? IMHO you have to choose the right toolset based on the requirements
[2013-02-09 17:34:14 -0500] msch: teukka: just that it's crufty and strange.
[2013-02-09 17:41:04 -0500] teukka: c l2
[2013-02-09 17:41:22 -0500] teukka: oh, sorry for the noice =)
[2013-02-09 17:47:38 -0500] msch: ok next question :) i've got this recipe https://gist.github.com/MSch/ffa0fd23a0359f23d19f and there's now a 1.2.2 out. what are the steps to update my servers? just update the file name and have chef trigger the new install and that should be it, right?
[2013-02-09 17:58:15 -0500] robertd: Hi. I installed a chef server. It worked for a while. Now I can not upload cookbooks. Everything else works fine. I get a timeout exception. I pasted some log info here https://gist.github.com/robertdolca/4b4b19b0500da0a02f42 I do not know what to do. The log files do not help me.
[2013-02-09 17:58:30 -0500] robertd: Can anyone help me with an ideea?
[2013-02-09 17:59:58 -0500] teukka: msch: yes, and the checksum. but a recommended pattern is to extract all version numbers, urls, etc to attributes. that way they can be managed more flexible
[2013-02-09 18:00:13 -0500] msch: teukka: ok thanks yet again :)
[2013-02-09 18:05:51 -0500] msch: when i create a system user via chef it seems to count it's uid downwards from 999, not upwards from 100. is this a know bug/feature?
[2013-02-09 18:15:03 -0500] chip-: traceroute 216.81.59.173 :D
[2013-02-09 19:00:27 -0500] manimal_: hi.  newb here, i am so close to getting a chef server install working....
[2013-02-09 19:00:51 -0500] manimal_: on chef server doing knife client list, im getting connection refused connection to x.x.x.x:4000 for /clients
[2013-02-09 19:01:25 -0500] manimal_: same error doing same command from chef node i "installed" chef on
[2013-02-09 19:03:08 -0500] manimal_: i was having all kinds of probs on centos 6 and finally got passed all the other little issues, and got this this wall.  then i made 2 ubuntu vm's, installed a chef server and client/node and still getting the same problem
[2013-02-09 19:03:41 -0500] manimal_: im hoping my problem is all withing knife.rb and .pem files
[2013-02-09 19:04:07 -0500] manimal_: any advice to troubleshoot this?
[2013-02-09 19:04:47 -0500] kallistec: manimal_: did you install Chef 11 from omnibus pkg?
[2013-02-09 19:05:37 -0500] manimal_: install from pkgs on http://www.opscode.com/chef/install/
[2013-02-09 19:05:50 -0500] manimal_: same error using rpm or deb on centos or ubuntu
[2013-02-09 19:06:50 -0500] kallistec: manimal_: Chef 11 pkg has built-in LB, listens on 443
[2013-02-09 19:07:05 -0500] kallistec: https://localhost ought to work on that box
[2013-02-09 19:07:22 -0500] manimal_: i can get to the webui no problem
[2013-02-09 19:07:36 -0500] manimal_: i can add users cleints etc from the webui
[2013-02-09 19:07:57 -0500] manimal_: but i was following the docs and trying to do "knife client list" to check my config
[2013-02-09 19:07:58 -0500] kallistec: manimal_: try installing Chef 11.2 omnibus pkg from chef/install page, then run `knife configure -i`
[2013-02-09 19:08:28 -0500] kallistec: or, open your ~/.chef/knife.rb in $EDITOR and change chef_server_url to "https://localhost"
[2013-02-09 19:21:20 -0500] manimal_: kallistec: ok, im not getting connection refused so far, i am getting errors regarding pem files now and authenticating
[2013-02-09 19:22:49 -0500] kallistec: manimal_: what'd you do to get to where you are now? Do you have `node_name` set in your knife.rb? `validation_key` ?
[2013-02-09 19:23:36 -0500] manimal_: yeah node_name client_key validation_key all in there
[2013-02-09 19:24:29 -0500] kallistec: manimal_: try `knife client list -u admin -k /etc/chef-server/admin.pem` (probably needs root)
[2013-02-09 19:25:05 -0500] manimal_: i dont seem to have knife on my server hmm do i need to install chefserver AND chef packages on serverbox?
[2013-02-09 19:25:21 -0500] kallistec: manimal_: that's the best way to go.
[2013-02-09 19:25:44 -0500] manimal_: ok back in a few lol
[2013-02-09 19:25:52 -0500] kallistec: the server has a copy of the chef code but it's better to use the chef package separately
[2013-02-09 19:26:50 -0500] manimal_: i dont think i saw anywhere in the docs sayign install chefserver AND chef packages on same server box
[2013-02-09 19:27:13 -0500] manimal_: but then again between the official site and the wiki docs i been going in mad circles for 2 days
[2013-02-09 19:27:47 -0500] kallistec: manimal_: we're working to catch up on the docs for Chef 11. In general the wiki will cover Chef 10 and docs.opscode will cover Chef 11
[2013-02-09 19:30:54 -0500] manimal_: does /etc/chef-server/chef-validator = validator.pem im supposed to use?
[2013-02-09 19:32:08 -0500] kallistec: manimal_: is it an RSA key? I don't remember off hand.
[2013-02-09 19:32:38 -0500] manimal_: yes its just the filename changed from v10 to v11
[2013-02-09 19:32:51 -0500] manimal_: well
[2013-02-09 19:33:07 -0500] manimal_: i installed chef on the chefserver,configured knife to use https://localhost
[2013-02-09 19:33:12 -0500] kallistec: manimal_: FYI, the validator is like a guest account that you use with brand new nodes. They borrow the validator identity to create their own client and then never use the validator after that
[2013-02-09 19:33:45 -0500] manimal_: it asked me for password for new user, created it no errors, i went to webui and voila, a new node popped up
[2013-02-09 19:34:10 -0500] [locke]: how can i dynamically include attributes?
[2013-02-09 19:34:52 -0500] [locke]: i got my default one and if the os is distroX i want to include an attribute from attribute fileX
[2013-02-09 19:35:10 -0500] manimal_: kallistec: so now i have a working webui, and in that webui i have a node listed which is actually the chefserver, is the chefserver supposed to show up as a node as well?
[2013-02-09 19:36:14 -0500] msch: i use remote_file and notifies :run, "bash[compile_that_thing]", :immediately to download & install something. now i need to download 2 files before compiling. can i somehow specify that i want to notify bash[compile_that_thing] immediately but only after both remote_files have succeeded?
[2013-02-09 19:36:44 -0500] kallistec: manimal_: generally you want to manage the box running the server with Chef
[2013-02-09 19:39:17 -0500] manimal_: so i'd add the server node, then add roles to that node to be a chef server from the webui?
[2013-02-09 19:42:01 -0500] kallistec: manimal_: yeah, for starting out. after a while the webui isn't very efficient for workflow so you'll probably end up using knife more
[2013-02-09 19:45:41 -0500] manimal_: ok cool, deleted my ubuntu vms starting from scratch back on centos ill be back in a few minutes once i get to my next brick wall lol.  ive literally tried installing multiple versions of chef using multiple sources for docs over the last 3 days, ive learned a lot haha
[2013-02-09 19:46:20 -0500] manimal_: more importantly i learned go to the irc room
[2013-02-09 19:46:32 -0500] manimal_: :P
[2013-02-09 20:03:33 -0500] bougyman: can I 'notify' a resource that runs in another recipe?
[2013-02-09 20:04:16 -0500] bougyman: for instance, i'm in an application recipe, for an app I want to publish with lighttpd, so I need to send a notify to the lighttpd recipe's template to reparse the template
[2013-02-09 20:04:23 -0500] bougyman: or does this have to be an lwrp?
[2013-02-09 20:17:30 -0500] zts: bougyman: yes, you can just notify it
[2013-02-09 20:18:56 -0500] conradev: I am using the `application` LWRP to deploy my application, and it works great. However, when running in a Vagrant VM, I want to symlink a Vagrant shared directory, rather than fetch the code from SCM. This is functionality the `deploy_resource` LWRP does not provide. Is it possible to create a custom subclass of Chef::Provider::Deploy for use in my cookbook?
[2013-02-09 20:22:20 -0500] juliancdunn: conradev: maybe you could branch based on Ohai attributes for running in VirtualBox?
[2013-02-09 20:26:55 -0500] conradev: juliancdunn: I can, but I was hoping I could still use the application cookbook (That is where I embed my migrate/restart code)
[2013-02-09 20:27:58 -0500] manimal_: fresh install of centos, then fresh install of chefserver and chef 11.  reconfigure was run after chefserver install.  'knife configure -i' was run after and everything went through with no errors.  in my webui it created a 'user'.  how to i add the 'node'?
[2013-02-09 20:28:40 -0500] manimal_: i can run knife client list and it returns chef-validator and chef-webui correctly
[2013-02-09 21:02:34 -0500] kallistec: manimal_: so now you probably want to configure a separate host with Chef. maybe fire up a Vm and bootstrap it with "knife bootstrap"?
[2013-02-09 21:03:39 -0500] manimal_: kallistec i thought i had to add chefserver as a node as well...
[2013-02-09 21:03:54 -0500] kallistec: manimal_: long term you do, when it's in production
[2013-02-09 21:03:58 -0500] kallistec: it's not a requirement
[2013-02-09 21:04:32 -0500] kallistec: long term, you want as much of your infrastructure to be controlled via Chef as possible
[2013-02-09 21:06:41 -0500] manimal_: ok so once i install chef client on a fresh centos box, and then i run knife configure -i and get that whats the next step, bootstrap? or do i bootstrap right after client install
[2013-02-09 21:07:17 -0500] kallistec: manimal_: if you go the bootstrap route, you want a fresh box. bootstrap will ssh in and install chef
[2013-02-09 21:07:59 -0500] kallistec: this ought to cover it: http://wiki.opscode.com/display/chef/Client+Bootstrap+Fast+Start+Guide
[2013-02-09 21:08:05 -0500] kallistec: I gotta run, good luck
[2013-02-09 21:08:12 -0500] manimal_: haha thanks :) see ya later
[2013-02-09 22:05:55 -0500] gchristensen: wow! I just got a letter from OpsCode thanking me for my contribution, with two stickers. And hand-signed! *tries to figure out how he can contribute more*
[2013-02-09 22:09:42 -0500] mattt: heh, that is pretty sweet
[2013-02-09 22:11:41 -0500] manimal_: interesing during configuration, these .rb files arent fully configured.  im learning so much since i started messin with chef a few days ago hehe
[2013-02-09 22:24:32 -0500] sascha_d: so with all the love being shown to the runit cookbook, should I prefer that over the native redhat service manager? Any opinions?
[2013-02-09 22:35:07 -0500] manimal_: ooooooooooohhhhhhh i run knife bootstrap from the workstation, not the client im trying to add????
[2013-02-09 22:52:30 -0500] jtimberman: sascha_d: depends on how much you love writing init scripts for redhat.
[2013-02-09 22:52:39 -0500] sascha_d: well I don't
[2013-02-09 22:52:46 -0500] jtimberman: me either. i'd use runit :)
[2013-02-09 22:52:52 -0500] sascha_d: but I have a client partner sysadmin who may be a bit resistent
[2013-02-09 22:52:54 -0500] jtimberman: gchristensen: :-D
[2013-02-09 22:53:09 -0500] sascha_d: so I'm debating on whether to spend some capital on discussing it
[2013-02-09 22:53:22 -0500] jtimberman: is this sysadmin resistant because they prefer init scripts and the "Red Hat way" of doing services, or because they don't like runit specifically?
[2013-02-09 22:53:48 -0500] sascha_d: I wouldn't know if they dislike runit specifically.  I've just noticed a traditional attitude toward many things
[2013-02-09 22:53:54 -0500] jtimberman: they should read my blog post :)
[2013-02-09 22:54:03 -0500] jtimberman: ;)
[2013-02-09 22:54:51 -0500] sascha_d: right
[2013-02-09 22:55:15 -0500] sascha_d: on a tangent, Berkshelf didn't seem to pull down the test-kitchen folder which is where most of the tests are located
[2013-02-09 22:59:28 -0500] sascha_d: why does berkshelf hate tests?
[2013-02-09 23:01:12 -0500] jtimberman: sascha_d: from the community site?
[2013-02-09 23:01:20 -0500] sascha_d: yah
[2013-02-09 23:01:29 -0500] sascha_d: default installs at the moment
[2013-02-09 23:01:34 -0500] jtimberman: ya
[2013-02-09 23:01:35 -0500] jtimberman: that's a bug in the sit
[2013-02-09 23:01:37 -0500] jtimberman: site
[2013-02-09 23:01:39 -0500] jtimberman: so
[2013-02-09 23:01:40 -0500] sascha_d: I was just inspecting cookbooks to see if I needed to write any tests
[2013-02-09 23:01:55 -0500] sascha_d: and thought at first you'd been terribly slacky
[2013-02-09 23:02:11 -0500] sascha_d: ok, then. cool.  I'll figure something out.
[2013-02-09 23:02:20 -0500] jtimberman: like, using knife cookbook site share, it only uploads to the site the dirs in the cookbook that are in the cookbook loader (files templates recipes attributes libraries resources providers) and the TOP files.
[2013-02-09 23:02:36 -0500] jtimberman: unfortunately the only way to get the test kitchen goodness is to clone the repository
[2013-02-09 23:02:37 -0500] sascha_d: is that a bug to fix or intended to be that way?
[2013-02-09 23:04:02 -0500] jtimberman: a bug to fix.
[2013-02-09 23:04:07 -0500] jtimberman: because it annoys the crap out of me :)
[2013-02-09 23:04:15 -0500] jtimberman: one might argue though
[2013-02-09 23:04:41 -0500] jtimberman: that the "test" dir etc is for development only and not for people who just want to download and use a cookbook. like, if you install rubygems, you don't get the test dirs.
[2013-02-09 23:04:49 -0500] sascha_d: we could set a switch too
[2013-02-09 23:13:33 -0500] zts: hmpf, seems that I can't install test-kitchen with 10.20.0 or 11.2.0 due to gem version constraints
[2013-02-09 23:15:04 -0500] stoked: jtimberman: the default recipe in the iis cookbook should install iis right?
[2013-02-09 23:16:26 -0500] stoked: even with service action: nothing
[2013-02-09 23:20:33 -0500] jfotop: hi to all

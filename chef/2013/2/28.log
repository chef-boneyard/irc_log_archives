[2013-02-28 00:02:17 -0500] miah: =)
[2013-02-28 00:25:24 -0500] clifton: hi everyone, im using chef-solo + vagrant to boostrap a graphite box on centos, and i keep getting an error "no such file -- /../apache2_module_conf_generate.pl" -- the error in execution is literally 10 lines after the cookbook_file is defined -- and im using the official opscode recipe
[2013-02-28 00:26:15 -0500] clifton: permissions dont seem to be a problem and the cookbook_file method appears to be failing silently
[2013-02-28 00:35:21 -0500] jasonMcL: Hi all, I've got a chef-solo installation that I'm trying to debug. For one of my roles, the runlist contains the passenger_enterprise::nginx recipe, but for some reason I keep getting a CookbookNotFound exception because I'm missing the apache2 cookbook. Can anyone help me figure this out?
[2013-02-28 00:40:43 -0500] de_wo0ki:  jasonMcL - the issue is that the cookbook as written has a cookbook dependancy on both nginx and apache2 cookbooks.
[2013-02-28 00:41:26 -0500] de_wo0ki: Take a look at the metadata.rb file for the cookbook.
[2013-02-28 00:41:56 -0500] ebollens: It may not need both at the same time, but such dependencies are common among cookbooks.
[2013-02-28 00:43:23 -0500] jasonMcL: de_woOki - I guess I need to manually add the apache2 cookbook to my repo then.
[2013-02-28 00:43:38 -0500] de_wo0ki: THat is the safer option
[2013-02-28 00:44:06 -0500] jasonMcL: Thanks, I was worried that it was going to actually install apache on the server, but I guess it just needs the recipe to be present.
[2013-02-28 00:44:25 -0500] ebollens: Nope, it just needs the recipe to be present.
[2013-02-28 00:44:35 -0500] ebollens: In case you're running in an Apache environment.
[2013-02-28 00:45:25 -0500] jasonMcL: ok cool. Thanks a lot, I was really scratching my head there.
[2013-02-28 00:45:35 -0500] ebollens: Yeah, it surprised me at first too the way cookbooks do that.
[2013-02-28 00:45:47 -0500] de_wo0ki: Glad it helps.
[2013-02-28 00:53:48 -0500] log1kal: Anyone used the logstash community cookbook recently? I don't think subscribes :restart, [ "link[#{kibana_home}]" ] works as intended, but wondered if it's because I'm using old chef.
[2013-02-28 00:57:43 -0500] log1kal: Looks like it was tied to old chef, works correctly 10.24.0
[2013-02-28 01:00:09 -0500] miah: i looked at that code and thats why im writing a new one
[2013-02-28 01:00:28 -0500] log1kal: heh
[2013-02-28 01:00:30 -0500] miah: also, the kibana cookbook still installs the php version
[2013-02-28 01:00:46 -0500] log1kal: the kibana cookbook, not logstash::kibana?
[2013-02-28 01:01:21 -0500] miah: i gave up reviewing all the code of the logstash cookbook because after reading ::default I knew I wasn't going to use it
[2013-02-28 01:01:28 -0500] log1kal: heh
[2013-02-28 01:01:32 -0500] miah: the kibana cookbook linked off community
[2013-02-28 01:02:02 -0500] miah: but maybe i was looking at a different one
[2013-02-28 01:02:05 -0500] log1kal: I was looking at yours, but the lack of readme indicated to me it was in-progress (and your tweets)
[2013-02-28 01:02:18 -0500] miah: readme has been updated
[2013-02-28 01:02:21 -0500] miah: but its still very much WIP
[2013-02-28 01:02:55 -0500] miah: a few more days at least
[2013-02-28 01:03:13 -0500] miah: i need to build out the config stuff and thats going to be a bit more complicated than installing the agent
[2013-02-28 01:08:48 -0500] Loadx: Hi all, im trying to capture data into a node for auditing purposes..  so for example if i install a pip package "fabric" and dont specify a version I want to capture what version was installed by later executing something like pip freeze and grepping out the version.
[2013-02-28 01:09:35 -0500] Loadx: I've noticed though that capturing that data is happening too late, what owuld be ideal is to use something like notifies and run a block of ruby.
[2013-02-28 01:11:32 -0500] Loadx: is this possible? if i was to use something like execute[capture pip version]  I can't see a way to variablize what im grepping for.
[2013-02-28 01:18:33 -0500] miah: i would use a resource provider that has the ability to view the installed packages in pip and provide those details. you could also implement that with an ohai plugin.
[2013-02-28 01:20:13 -0500] Loadx: miah: I have a provider now and it knows what plaugin is being installed but it looks like it runs the grep too late
[2013-02-28 01:20:35 -0500] miah: fix it =)
[2013-02-28 01:20:57 -0500] Loadx: http://codepad.org/I8gUieS2
[2013-02-28 01:21:44 -0500] Loadx: it looks like freeze runs before the install
[2013-02-28 01:22:00 -0500] Loadx: which is why im thinking i should use something like notifies or subscribe
[2013-02-28 01:40:52 -0500] mattt: anyone have any crazy cool suggestions for keeping a directory in sync across a bunch of servers?  :)
[2013-02-28 02:00:04 -0500] Loadx: Boom fixed.. i should of read the docs earlier, sticking it in  a ruby block did the trick
[2013-02-28 02:32:39 -0500] shennyg: I have a chef-solo that works locally with Vagrant and isn't working when I do the same on an ec2 instance. I'm getting "Cannot find a resource for user_account on ubuntu version 12.04" I have the user cookbook available to chef-solo. How do I debug this?
[2013-02-28 02:34:37 -0500] Loadx: shennyg: you're just pushing the cookbook to the instance and running solo?
[2013-02-28 02:36:10 -0500] shennyg: Loadx: I'm using a scrip to upload the files. it started as this: https://github.com/wch/vagrant-ec2-r
[2013-02-28 02:36:47 -0500] shennyg: *script, a bash script: https://github.com/wch/vagrant-ec2-r/blob/master/setup.sh
[2013-02-28 02:41:11 -0500] Loadx: shennyg: and the instance has chef installed?
[2013-02-28 02:42:04 -0500] shennyg: Loadx: `chef-solo --version` Chef: 11.4.0
[2013-02-28 02:42:34 -0500] shennyg: something similar to this is run: https://github.com/wch/vagrant-ec2-r/blob/master/bootstrap.sh
[2013-02-28 02:44:16 -0500] Loadx: chel11 as i understood it is omnibus
[2013-02-28 02:44:22 -0500] Loadx: chef11*
[2013-02-28 02:47:18 -0500] Loadx: oh sorry.. wrong, thats only chef-server
[2013-02-28 02:47:28 -0500] shennyg: Loadx: I don't follow.
[2013-02-28 02:47:39 -0500] Loadx: shennyg: You should switch on the debug flags
[2013-02-28 02:47:47 -0500] shennyg: will do. thanks.
[2013-02-28 02:48:46 -0500] Loadx: chef-solo -l debug
[2013-02-28 02:53:10 -0500] log1kal: Anyone tried to use test-kitchen with travis-ci?
[2013-02-28 02:53:42 -0500] log1kal: finding cookbooks that have 'builds:pass' because they're running foodcritic with no failures is making me sad.
[2013-02-28 02:54:35 -0500] shennyg: Loadx: It says I have a compile error (line 8) in my recipe: https://gist.github.com/shennyg/716dddfe96babf43292d#file-default-rb-L8
[2013-02-28 02:57:29 -0500] shennyg: I also see under "Cookbooks to compile" is doesn't list the user cookbook.
[2013-02-28 02:59:37 -0500] log1kal: https://twitter.com/retr0h/status/237363474072752130 makes me think not
[2013-02-28 02:59:39 -0500] kallistec: shennyg: http://docs.opscode.com/breaking_changes_chef_11.html#non-recipe-file-evaluation-includes-dependencies
[2013-02-28 03:02:38 -0500] shennyg: looks like it's doing better this time. thanks kallistec & Loadx
[2013-02-28 03:11:32 -0500] Loadx: shennyg: you're welcome.
[2013-02-28 03:13:30 -0500] clintel: hi everyone. I've started to get unexpected "403 Forbidden" errors (from Hosted Chef) on individual file-related resources (e.g. cookbook_file and template), in the last couple of days.
[2013-02-28 03:14:13 -0500] clintel: this happens for files/recipes that I haven't touched for at least a week, and which have been working properly at least a dozen times over in that period
[2013-02-28 03:15:58 -0500] clintel: as I said, I'm using Hosted Chef, and chef-client 10.16.6. the stacktrace shows that (for a 'template' resource), it's getting to chef-10.16.6/lib/chef/cookbook/remote_file_vendor.rb:63 (get_filename method), and dies as it digs down into get_rest from rest.rb
[2013-02-28 03:16:37 -0500] clintel: the first time i had this problem, it was on a particular cookbook_file resource. at the time, i re-ran chef-client and it go over that problem
[2013-02-28 03:17:53 -0500] clintel: then, because i'm testing that this process works end-to-end (and it didn't), i rolled back the VM i was using (it's in VirtualBox and i went back to a snapshot just after bootstrap, and just before the first chef-client run), and ran chef-client again
[2013-02-28 03:18:13 -0500] clintel: this time it failed in the same way, i think in the same method, but for a different resource... a 'template' resource this time
[2013-02-28 03:18:14 -0500] Loadx: clintel: if you're using hosted chef it sounds like something you may have to resolve with the host.
[2013-02-28 03:18:35 -0500] Loadx: clintel: File a support ticket
[2013-02-28 03:18:49 -0500] clintel: i rolled back the VM again, and re-ran it, and this time it failed on the SAME resource, though that could be coincidence
[2013-02-28 03:19:18 -0500] clintel: ok, Loadx, i will do that. i had tried googling it and found others with what SEEM like to be the same (and different) manifestations of this error, so i wasn't sure if it was a known problem
[2013-02-28 03:21:12 -0500] Loadx: clintel: I dont have any personal experience with it. Someone else may chime in something though but its sounds pretty important its fixed and as far as i can tell if it's at the rest layer then its gotta be the host
[2013-02-28 03:25:21 -0500] clintel: cool, thanks Loadx
[2013-02-28 03:43:56 -0500] PapaSierra: i've recently upgraded from chef 10.10 to 10.18 and i'm getting loads of warnings. i'm seeing this: `node.set["key"] = "value"` # This and also (CHEF-3694) warnings
[2013-02-28 03:44:09 -0500] isotope: anyone around to help with a chef handler question?
[2013-02-28 03:56:59 -0500] PapaSierra: ok, so this is what i'm seeing http://tickets.opscode.com/browse/CHEF-3771
[2013-02-28 04:04:46 -0500] clintel: about 45mins ago, I started asking questions about "403 Forbidden" errors I was getting with Hosted Chef. i think i have a clue what the problem is... according to log timestamps, the time between the very first REST request sent out by chef-client, to the very last (failed) REST request, is about 60.3 mintues... this suggests I'm seeing a session timeout
[2013-02-28 04:05:58 -0500] clintel: is anyone aware an (authenticated Chef API) session lifetime of 1 hour? maybe deliberate, or maybe a bug?
[2013-02-28 04:07:02 -0500] quintonm: should chef-server-ctl test have failing tests after loading cookbooks, roles, environemnts, etc?
[2013-02-28 04:19:47 -0500] dbro: Hey everyone! I'm having trouble getting Chef's deploy resource to pull a custom branch
[2013-02-28 04:20:14 -0500] dbro: I'm using a git repository and specifying my branch name as the "revision" attribute
[2013-02-28 04:21:45 -0500] dbro: http://pastebin.com/PdqQqPjD
[2013-02-28 04:21:58 -0500] dbro: thanks all. Loving chef, and would much more if I could figure this out :)
[2013-02-28 04:23:37 -0500] dbro: I get HttpServerException 404, and deploy successfully pulls master if I specify "HEAD" as revision
[2013-02-28 04:28:30 -0500] quintonm: should chef-server-ctl test have failing tests after loading cookbooks, roles, environemnts, etc?  All tests passed immediately after installation.  I have started having odd problems with the client not being able to pull cookbook file resources. I ran the tests again and some started failing.
[2013-02-28 04:32:07 -0500] quintonm: The client is failing on cookbook_file resource with HTTPServerException: 403
[2013-02-28 04:48:41 -0500] julienphalip: Hello there. I'm having some issues running Chef on a CentOS box. I've pasted the traceback here: http://dpaste.org/7utEW/  Does anyone know how to handle this?
[2013-02-28 06:13:50 -0500] Loadx: how should i define a ruby block in  a provider that is accessible from all actions?
[2013-02-28 06:14:26 -0500] Loadx: tried sticking it in initialize but no joy there
[2013-02-28 06:45:15 -0500] halcyonCorsair: should I be able to update the _default environment from a json file?
[2013-02-28 06:46:44 -0500] julienphalip: ok nvm, I've upgraded to the latest version of chef and all is well.
[2013-02-28 07:50:31 -0500] miah: halcyonCorsair: you cannot modify the _default environment
[2013-02-28 07:50:54 -0500] miah: http://docs.opscode.com/essentials_environments.html
[2013-02-28 08:11:29 -0500] julienphalip: I think I'm facing this bug: http://tickets.opscode.com/browse/CHEF-3831
[2013-02-28 08:12:13 -0500] julienphalip: I've just upgraded from 10.16.2 to 11.4.0, and my recipes don't seem to be loaded correctly when provisioning a Vagrant box...
[2013-02-28 08:12:28 -0500] julienphalip: I get errors like "NameError: Cannot find a resource for python_pip on centos version 6.3"
[2013-02-28 08:13:04 -0500] julienphalip: Is there any plans to fix this? Are there any workarounds?
[2013-02-28 08:24:22 -0500] Philipp_: chef server complains about ERROR: No route matches {:action=>"new", :controller=>"databag_items", :databag_id=>nil}
[2013-02-28 08:24:30 -0500] Philipp_: is this a known bug?
[2013-02-28 09:04:24 -0500] josephholsten: there should be an award for merging abandoned forks with useful but almost trivial improvements
[2013-02-28 09:06:13 -0500] Philipp_: Anyone else having this problem? https://github.com/matschaffer/knife-solo/issues/214
[2013-02-28 09:13:52 -0500] fclausen: Hi All - can I use a regular "exit" in my recipes? This is to exit a recipe if something unexpected happens. Or is there another recommend way to stop recipe processing?
[2013-02-28 09:17:27 -0500] Nasko: Hey everyone! I've noticed that using chef.add_recipe "php" I don't end up with all PHP modules present in the recipes folder installed. Same goes for chef.add_recipe "apache2" - all modules are not installed. Do I have to explicitly specify each module in my Vagrantfile?
[2013-02-28 09:25:19 -0500] cheeseplus: Nasko: if you just run "apache2" or "php" then only the default recipe gets triggered
[2013-02-28 09:26:17 -0500] Nasko: cheeseplus, so each module I need, I'd have to specify like this: chef.add_recipe "php::module_gd" ?
[2013-02-28 09:26:19 -0500] cheeseplus: for other recipes that are part of the cookbook you'd run "apache2::mod"
[2013-02-28 09:26:33 -0500] cheeseplus: correct, assuming that the recipes line up to modules
[2013-02-28 09:26:59 -0500] Nasko: Yeah, i'm first inspecting the contents of the recipes folder :)
[2013-02-28 09:27:14 -0500] Nasko: okay, cheeseplus, thanks big time!
[2013-02-28 09:27:44 -0500] cheeseplus: Nasko: np
[2013-02-28 09:38:23 -0500] kesor: cookbook upload with --freeze in 11.4 throws an error when trying to re-upload the same version. why doesnt that error say that its because of the cookbook frozen state?
[2013-02-28 09:42:06 -0500] zts: kesor: what's the actual error?
[2013-02-28 09:43:59 -0500] kesor: zts: https://gist.github.com/kesor/5055546
[2013-02-28 09:45:26 -0500] kesor: zts: just added the verbose output to the gist
[2013-02-28 09:46:16 -0500] danryan: kesor:
[2013-02-28 09:46:16 -0500] danryan: INFO: HTTP Request Returned 409 Conflict: The cookbook rails_application at version 0.1.0 is frozen.
[2013-02-28 09:46:35 -0500] danryan: kesor: are you looking for something different?
[2013-02-28 09:46:49 -0500] kesor: danryan: it should appear in the non-verbose error message.
[2013-02-28 09:47:16 -0500] kesor: instead of "ERROR: knife encountered an unexpected error".
[2013-02-28 09:47:21 -0500] danryan: ah I see.
[2013-02-28 09:47:57 -0500] danryan: would probably be nice to know. You can always add a feature request at http://tickets.opscode.com/secure/Dashboard.jspa
[2013-02-28 09:48:31 -0500] zts: that's annoying
[2013-02-28 09:48:33 -0500] zts: https://tickets.opscode.com/browse/CHEF-3452
[2013-02-28 09:48:45 -0500] zts: ^^ that's a fix for that issue, but it doesn't appear to have been merged anywhere yet
[2013-02-28 09:49:18 -0500] zts: danryan: sadly, it's a regression - it used to do the right thing :(
[2013-02-28 09:49:37 -0500] danryan: hmmm I thought so :/
[2013-02-28 09:49:54 -0500] kesor: the knife code probably has the logic to do the right thing, but something change in the server-side?
[2013-02-28 09:50:29 -0500] zts: kesor: no, it was broken in the knife code when support was added for uploading multiple cookbooks in one go
[2013-02-28 09:50:55 -0500] zts: kesor: anyway, you might like to comment on that ticket to say that you've encountered the problem and look forward to the fix being merged :)
[2013-02-28 09:51:04 -0500] kesor: ok, cool :)
[2013-02-28 11:16:39 -0500] shamaz: hi, I want to compile the chef-docs downloaded from git (https://github.com/opscode/chef-docs) but when I run 'make all' I get a hole bunch of errors like this:
[2013-02-28 11:16:42 -0500] shamaz: includes_data_bag/includes_data_bag_search.rst:4: (SEVERE/4) Problems with "include" directive path: IOError: [Errno 2] No such file or directory: '../includes_data_bag/includes_data_bag.rst'
[2013-02-28 11:17:52 -0500] shamaz: when I take a look in that file I see a wrong relative path: '.. include:: ../../includes_data_bag/includes_data_bag.rst'
[2013-02-28 11:19:26 -0500] Ch00k: Hey guys! I'm trying to setup Open source Chef (a server and a workstation). I have the server installed as per http://docs.opscode.com/install_server_scenario_vm.html. Now I'm trying to setup the workstation (per http://docs.opscode.com/install_workstation.html),  but don't know where do I get the knife.rb and both pem files.
[2013-02-28 11:19:59 -0500] Ch00k: Do I understand it correctly that knife.rb should be generated by "knife generate"?
[2013-02-28 11:20:21 -0500] eyck: Ch00k: .pem files you get from your server, and knife.rb using for example: 'knife configure -i
[2013-02-28 11:21:07 -0500] Ch00k: eyck: where do I get poem's on the server?
[2013-02-28 11:21:21 -0500] Ch00k: *pem's
[2013-02-28 11:22:33 -0500] kesor: Ch00k: /etc/chef-server/ or /etc/chef/
[2013-02-28 11:23:45 -0500] Ch00k: ok, so knife configure asks "Please enter a name for the new user". Which user is that?
[2013-02-28 11:23:49 -0500] kesor: Ch00k: with the 11.4 server you get admin.pem right in there, so you don't need to create a new workstation client.
[2013-02-28 11:25:28 -0500] eyck: Ch00k: for workstation, you are the user, it will be created using validation.pem
[2013-02-28 11:25:40 -0500] aruntomar: Ch00k: http://www.linuxguy.in/how-to-configure-chef-workstation-with-chef-server-11/
[2013-02-28 11:27:15 -0500] Ch00k: aruntomar: thank, I'll try that
[2013-02-28 11:30:08 -0500] jakshi: Hello Chums! I installed chef-server, configured workstation. When I try to upload cookbook to my chef-server it tells me:
[2013-02-28 11:30:24 -0500] jakshi: Uploading simple_iptables [0.2.4]
[2013-02-28 11:30:24 -0500] jakshi: ERROR: Network Error: getaddrinfo: Name or service not known
[2013-02-28 11:30:50 -0500] jakshi: What does it mean? How to fix this?
[2013-02-28 11:31:13 -0500] Philipp_: jakshi the problem is the nginx hostname at your chef server
[2013-02-28 11:31:40 -0500] Philipp_: you have to make sure that you have configured a hostname and a fqdn with corresponding dns entries
[2013-02-28 11:32:01 -0500] jakshi: PHilipp_: Thank you for clue, how to fix this?
[2013-02-28 11:32:47 -0500] jakshi: s/how to dix this/DO you know how to fix this?/
[2013-02-28 11:33:17 -0500] Philipp_: I edited /etc/hosts and created dns entries
[2013-02-28 11:33:52 -0500] Philipp_: and I did rerun the chef-server-ctrl reconfigure command
[2013-02-28 11:34:01 -0500] jakshi: aha! I got it
[2013-02-28 11:34:13 -0500] jakshi: Thank you a lot for your advise
[2013-02-28 11:34:30 -0500] Ch00k: aruntomar: that's what I get trying to follow your guide http://pastebin.com/KNRn1K5k
[2013-02-28 11:35:43 -0500] Ch00k: aruntomar: I think I found the problem
[2013-02-28 11:36:57 -0500] aruntomar: it's https now and not port 4000
[2013-02-28 11:40:48 -0500] Ch00k: aruntomar: yep, it worked
[2013-02-28 11:40:50 -0500] Ch00k: thanks!
[2013-02-28 11:43:32 -0500] jakshi: Philipp_: I edited /etc/hosts, dns entries already created, hostname configured, I did chef-server-ctl reconfigure. still the same effect :( Do you know how to troubleshoot such issues?
[2013-02-28 11:44:24 -0500] aruntomar: Ch00k: i know it works, hence i wrote the blog :)
[2013-02-28 11:46:09 -0500] Philipp_: jakshi check the nginx config
[2013-02-28 11:46:14 -0500] Philipp_: what is the server_name?
[2013-02-28 11:48:44 -0500] jakshi: PHilipp_: chef.moonami.com
[2013-02-28 11:49:20 -0500] Philipp_: and what happens if you do a curl https://chef.moo...
[2013-02-28 11:49:26 -0500] Philipp_: from your workstation?
[2013-02-28 11:50:02 -0500] jakshi: jakshi@gehilfe:~/Dropbox/graphite_interactive/git-repos$ curl https://chef.moonami.com
[2013-02-28 11:50:03 -0500] jakshi: curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:
[2013-02-28 11:50:03 -0500] jakshi: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
[2013-02-28 11:50:03 -0500] jakshi: More details here: http://curl.haxx.se/docs/sslcerts.html
[2013-02-28 11:50:17 -0500] Philipp_: ok use -k
[2013-02-28 11:50:59 -0500] jakshi: jakshi@gehilfe:~/Dropbox/graphite_interactive/git-repos$ curl -k https://chef.moonami.com
[2013-02-28 11:51:01 -0500] jakshi: <html><body>You are being <a href="https://chef.moonami.com/users/login">redirected</a>.</body></html>
[2013-02-28 11:51:15 -0500] Philipp_: that looks fine
[2013-02-28 11:51:40 -0500] jakshi: yup, web interface is working
[2013-02-28 11:51:42 -0500] Philipp_: so the knife upload does not work maybe you can add -V to get some debug output
[2013-02-28 11:52:14 -0500] jakshi: I also can do knife client list without an errors
[2013-02-28 11:53:02 -0500] Philipp_: I added some debug output here /usr/lib/ruby/1.8/net/http.rb:560 and saw that the hostname was wrong
[2013-02-28 11:53:12 -0500] jakshi: it told that
[2013-02-28 11:53:15 -0500] jakshi: INFO: Uploading /home/jakshi/Dropbox/graphite_interactive/git-repos/moonami-chef-repo/cookbooks/simple_iptables/resources/rule.rb (checksum hex = 81309668e1d5923057f4c306ddf257fb) to https://chef:443/bookshelf/organization-00000000000000000000000000000000/checksum-81309668e1d5923057f4c306ddf257fb?AWSAccessKeyId=0a013ac39b6cf8d36fb2dfe5caac67f494488dc5&Expires=1362053223&Signature=QWiNOv7MN8RWu%2BtExuJE4lqtFbA%3D
[2013-02-28 11:53:26 -0500] Philipp_: that's the problem
[2013-02-28 11:53:33 -0500] Philipp_: chef is wrong...
[2013-02-28 11:53:45 -0500] Philipp_: there should be the fqdn instead of chef
[2013-02-28 11:53:52 -0500] jakshi: and a lot of similar messages. Yes, it try to upload to https://chef instead of https://chef.moonami.com
[2013-02-28 11:54:13 -0500] Philipp_: I solved it by reconfiguring and restarting the chef server
[2013-02-28 11:54:17 -0500] jakshi: hm, where's knife get this 'chef'?
[2013-02-28 11:54:24 -0500] Philipp_: from the server
[2013-02-28 11:54:51 -0500] Philipp_: the server hast to output hostname => chef , hostname -f => chef.moon....
[2013-02-28 11:54:52 -0500] jakshi: aha, I didn't restart the server
[2013-02-28 11:54:56 -0500] jakshi: trying
[2013-02-28 11:56:01 -0500] jakshi: hm my server output
[2013-02-28 11:56:27 -0500] jakshi: [root@chef nginx]# hostname
[2013-02-28 11:56:27 -0500] jakshi: chef.moonami.com
[2013-02-28 11:56:27 -0500] jakshi: [root@chef nginx]# hostname -f
[2013-02-28 11:56:28 -0500] jakshi: chef
[2013-02-28 11:56:36 -0500] Philipp_: that's the problem
[2013-02-28 11:56:46 -0500] Philipp_: /etc/hosts has to be in the right order
[2013-02-28 11:57:03 -0500] Philipp_: 1.2.3.4 chef.moon... chef
[2013-02-28 11:57:29 -0500] jakshi: thank you very much for tips, fixing
[2013-02-28 12:00:53 -0500] jakshi: Aha! it works. Thank you very much for help Philipp_, you're ginius!
[2013-02-28 12:01:08 -0500] jakshi: s/ginius/genius/
[2013-02-28 12:24:45 -0500] Ch00k: when I do 'chef cookbook create <name>' is the cookbook supposed to be created in my repository?
[2013-02-28 12:25:02 -0500] Ch00k: s/chef/knife
[2013-02-28 12:26:51 -0500] Ch00k: currently it creates cookbooks in /var/chef/cookbooks
[2013-02-28 12:32:07 -0500] Mekza: hey, anyone have tried to install chef 10 on wheezy from opscode repository ?
[2013-02-28 12:32:31 -0500] Mekza: knife configure -i returns "Exception: NoMethodError: undefined method `save' for #<Hash:0x7f40ec2e7820>"
[2013-02-28 12:33:30 -0500] vegardx_: I think the problem is with ruby-json, which breaks chef on wheezy.
[2013-02-28 12:34:06 -0500] vegardx_: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=701629
[2013-02-28 12:34:33 -0500] Mekza: vegardx_: facepalm :(
[2013-02-28 12:34:36 -0500] Mekza: vegardx_: btw, thx
[2013-02-28 12:39:07 -0500] haakond_: What's the recommended/a good way to handle attributes for scenarios like: for cookbook apache2, for platform ubuntu I want the attribute [:apache][:log_dir] to be something else than the cookbook's default attribute value. I could set custom attributes on a role, but then the attribute changes would be applied to all platforms, not the specific one. Changing the cookbook's attributes/default.rb is possible, but not optimal, since it creates merge conflic
[2013-02-28 12:39:29 -0500] Mekza: vegardx_: chef 10.22 fixes this bug, but not available in repository?
[2013-02-28 12:39:47 -0500] haakond_: Could I create a recipe which applies relevant attributes, and ensure it runs before the apache2 recipe(s)?
[2013-02-28 12:42:17 -0500] vegardx_: Mekza: this has nothing to do with chef, but with a dependency that has been changed which in turn breaks chef.
[2013-02-28 12:42:50 -0500] Philipp_: jakshi are you able to create databag items in the webui?
[2013-02-28 12:43:11 -0500] Mekza: vegardx_: haa ok
[2013-02-28 12:58:44 -0500] e100: vegardx_ / Mekza: 10.22.0 was released to fix the problem caused by the change in ruby json lib http://www.opscode.com/blog/2013/02/13/chef-client-11-4-0-10-22-0-released/
[2013-02-28 12:59:22 -0500] Mekza: e100: i downloaded and replaced https://raw.github.com/opscode/chef/834d814400a8a23ee8d865fa9d48e3f71895cd42/chef/lib/chef/json_compat.rb
[2013-02-28 13:00:10 -0500] vegardx_: e100: aha, cool
[2013-02-28 13:00:52 -0500] e100:  opscode has not updated the debian repositories at apt.opscode.com with 10.20.0, 10.22.0 or 10.24.0, this is causing lots of pain for those of us how installed using this repository on ubuntu and debian......
[2013-02-28 13:01:15 -0500] Mekza: ok
[2013-02-28 13:01:36 -0500] e100: Anyone know when/if apt.opscode.com will be updated?
[2013-02-28 13:02:33 -0500] Mekza: btw google wasn't relevant :(
[2013-02-28 13:03:23 -0500] geekbri: Question:  I monkey patched the Mash classes .to_hash function to be a recursive call, since if you call .to_hash on a mash in chef11, any nested objects are still immutable.  I'd like to submit this as a pull request to opscode.  I just don't know if i should modify the to_hash method to always be recursive or if i should call the method .to_hash_deeply
[2013-02-28 13:05:51 -0500] e100: Mekza: Have you tried uninstalling the debian packages for chef and doing a gem or omnibus install instead or just the json_compat.rb fix?
[2013-02-28 13:07:47 -0500] eyck: hmm,
[2013-02-28 13:10:15 -0500] Ch00k: is there any way to record the nodes' IP addresses instead of their hostnames?
[2013-02-28 13:10:30 -0500] Ch00k: by the Chef server I mean
[2013-02-28 13:12:23 -0500] eyck: it's recorded, and you can override the node name during registration
[2013-02-28 13:13:22 -0500] Mekza: e100: nope
[2013-02-28 13:13:33 -0500] Mekza: e100: just the json_compat.rb fix
[2013-02-28 13:13:54 -0500] f1gjam: hey guys
[2013-02-28 13:14:03 -0500] f1gjam: anyone here used exceptions handlers
[2013-02-28 13:16:17 -0500] a_a_g: f1gjam: yes
[2013-02-28 13:16:42 -0500] f1gjam: ok, so i am trying to create a handler for mongodb cookbook
[2013-02-28 13:16:43 -0500] f1gjam: basically
[2013-02-28 13:17:06 -0500] f1gjam: i want the chef run to happen again until it has a list of 3 nodes in the mongo config
[2013-02-28 13:17:15 -0500] f1gjam: is this something that is doable in handler
[2013-02-28 13:17:27 -0500] f1gjam: and I am assuming when writing handlers its just norml ruby?
[2013-02-28 13:18:15 -0500] a_a_g: a handler is run inside the chef-client process
[2013-02-28 13:18:18 -0500] Ch00k: if I have a node already bootstrapped and I change the node's hostname, how do I re-bootstrap this node?
[2013-02-28 13:18:52 -0500] f1gjam: a_a_g, so it can't do anything not he client itself
[2013-02-28 13:18:52 -0500] a_a_g: Ch00k: fqdn or public_hostname?
[2013-02-28 13:19:05 -0500] Ch00k: a_a_g: fqdn
[2013-02-28 13:19:22 -0500] f1gjam: *on
[2013-02-28 13:19:27 -0500] Ch00k: a_a_g: the one that chef records
[2013-02-28 13:20:00 -0500] a_a_g: Ch00k: do you want to bootstrap it again or just run chef-client on it?
[2013-02-28 13:20:25 -0500] Ch00k: a_a_g: I was affected by this: http://serverfault.com/questions/353158/why-does-chef-list-my-node-name-as-localhost I fixed the hostname, now I want to re-boostrap the node with new fqdn
[2013-02-28 13:20:26 -0500] f1gjam: a_a_g, basically if I am understanding you correctly, the chef_handlers are more for the chef-client process, its not like i could kick off another chef-client run if the current failed (because of xyz)
[2013-02-28 13:20:55 -0500] gyre007: is there any way how I can tell Chef to use certain version of cookbook if I have multiple versions available on the Chef server ?
[2013-02-28 13:21:02 -0500] gyre007: or is Chef picking the latest one by default ?
[2013-02-28 13:21:30 -0500] a_a_g: f1gjam: technically you could using ruby `` or equivalent. the earlier one wont finish though
[2013-02-28 13:21:38 -0500] f1gjam: ok
[2013-02-28 13:21:40 -0500] f1gjam: so not a good idea
[2013-02-28 13:21:45 -0500] f1gjam: :) thanks a_a_g
[2013-02-28 13:21:47 -0500] a_a_g: gyre007: you can lock it in the environment
[2013-02-28 13:23:14 -0500] a_a_g: f1gjam: yeah. what i do is i use the handler to print out "action messages" to the chef logs. from wherever i trigger the chef-client run, I parse the logs and decide whether i have to act again
[2013-02-28 13:23:17 -0500] gyre007: you mean freeze a_a_g
[2013-02-28 13:23:30 -0500] gyre007: that doesnt solve what I'm after I'm afraid
[2013-02-28 13:23:31 -0500] f1gjam: ok i see
[2013-02-28 13:23:34 -0500] gyre007: that prevents uploads...
[2013-02-28 13:23:46 -0500] gyre007: of cookbooks with different version than the frozen one...
[2013-02-28 13:24:08 -0500] a_a_g: gyre007: no, in the environment, you can specify cookbook versions.
[2013-02-28 13:24:09 -0500] a_a_g: cookbook_versions({
[2013-02-28 13:24:09 -0500] gyre007: I need a way how to tell Chef which cookbook version to use when I have multiple ones uploaded...
[2013-02-28 13:24:09 -0500] a_a_g:   "apache2"                 => "= 1.1.4",
[2013-02-28 13:24:29 -0500] gyre007: any link to docs ?
[2013-02-28 13:24:37 -0500] jakshi: Philipp_: no, it shows me: ERROR: No route matches {:action=>"new", :controller=>"databag_items", :databag_id=>nil}
[2013-02-28 13:24:47 -0500] jakshi: PHilipp_: 500 Internal Server Error :(
[2013-02-28 13:25:05 -0500] gyre007: arrgh I see now
[2013-02-28 13:25:06 -0500] a_a_g: http://wiki.opscode.com/display/chef/Environments#Environments-TheRubyDSL
[2013-02-28 13:25:12 -0500] jakshi: Philipp_: but if it works with knife data bag upload from file I will not mind
[2013-02-28 13:25:14 -0500] gyre007: yeah just checking it out..
[2013-02-28 13:26:43 -0500] e100: Mekza: I am running debian wheezy, after installing the latest updates and breaking chef-client, I uninstalled the chef packages and installed chef 10.24.0 using gem, no errors.  commands I used: sudo aptitude remove chef libnet-ssh2-ruby libnet-ssh2-ruby1.8 && sudo apt-get install rubygems && sudo gem install chef -v 10.24.0 --no-ri --no-rdoc
[2013-02-28 13:28:27 -0500] Mithrandir: I just uploaded fixed packages to Debian, so they should hit unstable in the next few hours
[2013-02-28 13:28:33 -0500] Mithrandir: and hopefully wheezy within a couple of days.
[2013-02-28 13:31:53 -0500] jakshi: Philipp_: I checked, knife data bag from file works as exepected. so it's only web-ui issue
[2013-02-28 13:34:01 -0500] e100: Mithrandir: Glad to see Debian is getting updated, I've been using apt.opscode.com packages which have not been updated since 10.18.2
[2013-02-28 13:34:29 -0500] Mithrandir: I doubt I'll have time to update those before going on holidays.
[2013-02-28 13:34:31 -0500] Mithrandir: but maybe.
[2013-02-28 13:36:07 -0500] e100: Would be greatly appreciated
[2013-02-28 13:37:57 -0500] geekbri: Anybody from opscode have an opinion on the matter of recursively copying mash's in chef 11 so that they are mutable? http://tickets.opscode.com/browse/CHEF-3953
[2013-02-28 13:38:01 -0500] geekbri: I submitted a pull request
[2013-02-28 13:42:12 -0500] Philipp_: jakshi please vote for http://tickets.opscode.com/browse/CHEF-3952
[2013-02-28 13:42:34 -0500] Philipp_: and https://secure.servicemail24.de/Redirect/tickets.opscode.com/browse/CHEF-3951
[2013-02-28 13:45:18 -0500] teukka: geekbri: have you signed the CLA? http://wiki.opscode.com/display/chef/How+to+Contribute
[2013-02-28 13:45:24 -0500] geekbri: teukka: I have
[2013-02-28 13:45:37 -0500] geekbri: teukka: I've had pull requests accepted before.  I just have to write a unit test for this bad boy
[2013-02-28 13:46:12 -0500] teukka: geekbri: ok, then mark the jira ticked as "fix provided" so that it will be reviewed
[2013-02-28 13:46:23 -0500] geekbri: teukka: gotcha, forgot that step ;)
[2013-02-28 13:46:36 -0500] geekbri: ill do that once i finish the unit test
[2013-02-28 13:47:12 -0500] Philipp_: jakshi does the search function in the webui works for you?
[2013-02-28 13:49:13 -0500] jakshi: Philipp_: I just voted to both tickets
[2013-02-28 13:53:12 -0500] jakshi: @Philipp_: unfortuantely I just begin to fill up my chef-server, there only several roles/cookbooks, so not much to search. if I don't enter anything in search field - it shows all. if I'm entering some value in search field - it doesn't show anything. May be I do it wrong way?
[2013-02-28 13:53:46 -0500] Philipp_: I have a bunch of databags the search function doesn't find any thing specific
[2013-02-28 13:53:50 -0500] Philipp_: only "all"
[2013-02-28 13:53:56 -0500] Philipp_: seems like another bug
[2013-02-28 13:54:31 -0500] Philipp_: How does opscode provide enterprise support having such obvious errors?
[2013-02-28 13:56:32 -0500] jakshi: Philipp_: I think that web-ui is haveing lesser priority than working using CLI. Probably opscode doesn't recommend Chef 11 to their clients yet. Actually I don't know, but I suppose this is how matters stand
[2013-02-28 14:00:34 -0500] Philipp_: jakshi have you managed to run chef-client?
[2013-02-28 14:00:52 -0500] Philipp_: I put the validator.pem file to the client
[2013-02-28 14:01:04 -0500] Philipp_: but it says FATAL: OpenSSL::PKey::RSAError: private key needed.
[2013-02-28 14:02:36 -0500] jakshi: Philipp_: no, I didn't I plan to setup some VM to test how's chef-client runs
[2013-02-28 14:08:22 -0500] Flex: using capistrano-chef, trying to get it to pull back the node name and not the eth0 address of the box, can anyone tell me whats wrong with this? https://gist.github.com/310e523ceed8f0395605
[2013-02-28 14:21:52 -0500] Philipp_: What is wrong here? Client key /etc/chef/client.pem is not present - registering ... OpenSSL::PKey::RSAError: private key needed.
[2013-02-28 14:23:41 -0500] matschaffer: Philipp_: maybe missing the validation pem?
[2013-02-28 14:24:50 -0500] Philipp_: I downloaded the validation file from the server and stored it here /etc/chef/validation.pem
[2013-02-28 14:25:32 -0500] Philipp_: the validation key is only a public key isn't it?
[2013-02-28 14:27:37 -0500] tduffield: the validation key is your private key to validate yourself against the Chef Server.
[2013-02-28 14:27:53 -0500] trilitheus: if I want to check if a node has a certain role within a recipe, do I have to do search or can I just do if role('server_role')?
[2013-02-28 14:30:36 -0500] trilitheus: S'ok,. I think I should be doing "if node['role']['server_role']"
[2013-02-28 14:32:48 -0500] AikiLinux: Is it possible to define specific host attributes on the databag ?
[2013-02-28 14:33:58 -0500] tduffield: AikiLinux: what kind of attributes are you thinking? Normally databags are not used for host specific items
[2013-02-28 14:34:12 -0500] tduffield: trilitheus: what is your use case? what are you trying to check for?
[2013-02-28 14:40:31 -0500] trilitheus: hi tduffield, the server role is ntpserver so just want to basically say, if this node has a role of ntpserver {do some stuff}
[2013-02-28 14:42:02 -0500] tduffield: trilitheus: so you have a recipe part of a 3rd cookbook being applied to a node. In that recipe you want to check if the node run_list contains "ntpserver"?
[2013-02-28 14:42:13 -0500] tduffield: trilitheus: that sounds like a job for Chef search
[2013-02-28 14:43:26 -0500] zts: it's a job for chef search if you want to find another node that has that role
[2013-02-28 14:43:28 -0500] trilitheus: tduffield, either the run list of the role attribute, probably the run list
[2013-02-28 14:43:50 -0500] zts: if you want to check whether _this_ node has a role in its expanded runlist, use node.roles.include?('role_name')
[2013-02-28 14:44:14 -0500] zts: although you shouldn't need to use that very often.  If you want nodes with that role to do something, put it in the role's run list
[2013-02-28 14:44:35 -0500] trilitheus: zts, yes, I have an ntp recipe that is wasn;t really worth splitting into server and client so I've just checking if it has the ntpserver role to do a little extra within the same recipe
[2013-02-28 14:44:43 -0500] trilitheus: zts, that's exactly what I meant, cheers
[2013-02-28 14:45:14 -0500] zts: trilitheus: I'd argue that splitting it into two recipes (or three, for a common part, server, client) is much clearer than branching in the recipe
[2013-02-28 14:45:17 -0500] r3vamp: trilitheus: should really be split up then, even for a small amount of work.
[2013-02-28 14:45:19 -0500] zts: trilitheus: but at the end of the day, whatever works for you :)
[2013-02-28 14:45:20 -0500] trilitheus: but you're right, I'm gpoing to split into server and client and add the serv
[2013-02-28 14:45:28 -0500] trilitheus: :) :)
[2013-02-28 14:45:31 -0500] r3vamp: trilitheus: :)
[2013-02-28 14:45:34 -0500] haakond_: What's the recommended/a good way to handle attributes for scenarios like: for cookbook apache2, for platform ubuntu I want the attribute [:apache][:log_dir] to be something else than the cookbook's default attribute value. I could set custom attributes on a role, but then the attribute changes would be applied to all platforms, not the specific one. Changing the cookbook's attributes/default.rb is possible, but not optimal, since it creates merge conflic
[2013-02-28 14:45:57 -0500] geekbri: What day is the chef open source ticket view again?
[2013-02-28 14:46:30 -0500] cwj: i think there was one held yesterday
[2013-02-28 14:51:57 -0500] Philipp_: anyone using open source chef 11.x webui?
[2013-02-28 14:52:39 -0500] geekbri: damn, that means its not till next week huh
[2013-02-28 14:54:26 -0500] gamafranco: hi
[2013-02-28 14:54:54 -0500] gamafranco: I have a problem creating a user with password already set. It's asking for ruby-shadow.
[2013-02-28 14:55:21 -0500] gamafranco: what's the best way to set user passwords? I'm doing it via a data-bag
[2013-02-28 14:58:59 -0500] gamafranco: pong?
[2013-02-28 14:59:12 -0500] geekbri: encrypted data bag?
[2013-02-28 14:59:35 -0500] gamafranco: hm. the data-bag is a plain text json file
[2013-02-28 14:59:45 -0500] geekbri: yeah thats why i was saying use an encrypted data bag :)
[2013-02-28 14:59:48 -0500] Philipp_: gamafranco only store hashes
[2013-02-28 14:59:49 -0500] gamafranco: the password in there is the hash, to be placed on the shadow file
[2013-02-28 15:00:02 -0500] geekbri: oh ok you've already got the hash
[2013-02-28 15:00:03 -0500] gamafranco: right
[2013-02-28 15:00:05 -0500] Philipp_: so no need for plain text passwords
[2013-02-28 15:00:15 -0500] gamafranco: no. the problem is the ruby-shadow-gem
[2013-02-28 15:00:25 -0500] nacer: hi chef 11 seem to ingore my formatter option any way to solve this ?
[2013-02-28 15:00:50 -0500] gamafranco: the second time the recipe is executed, the user is already on the system. so chef, tries to compare the hashes and fails because ruby-shadow is not installed
[2013-02-28 15:01:20 -0500] gamafranco: and there's no good recipe to install ruby-shadow. at least not that I bumped in to
[2013-02-28 15:01:25 -0500] gamafranco: so, how is everyone dealing with this?
[2013-02-28 15:02:56 -0500] gamafranco: Philipp_: how do you create users on your recipes?
[2013-02-28 15:03:23 -0500] zts: gamafranco: depending on how you've installed chef, you either want to install the system package that supplies the ruby-shadow gem, or you want to use the chef_gem resource to install the gem
[2013-02-28 15:03:52 -0500] zts: gamafranco: if you install using the omnibus installer, the gem should already be present
[2013-02-28 15:06:59 -0500] Philipp_: gamafranco I have a databag called users
[2013-02-28 15:07:03 -0500] Philipp_: with all users as items
[2013-02-28 15:07:08 -0500] gamafranco: omnibus installer?
[2013-02-28 15:07:10 -0500] Philipp_: my recipe does a search
[2013-02-28 15:07:30 -0500] zts: gamafranco: the one you'll get if you follow the instructions here: http://www.opscode.com/chef/install/
[2013-02-28 15:07:43 -0500] Philipp_: http://pastebin.com/349Xw5cV
[2013-02-28 15:08:43 -0500] gamafranco: currently I'm testing on vagrant
[2013-02-28 15:10:34 -0500] gamafranco: Philipp_: thanks for the paste bin. it's not setting passwords
[2013-02-28 15:10:35 -0500] gamafranco: ok
[2013-02-28 15:10:44 -0500] gamafranco: thanks, I'll the check the omnibus install
[2013-02-28 15:11:08 -0500] nacer: !help
[2013-02-28 15:11:35 -0500] zts: gamafranco: that's certainly the easiest way.  Just found this gist which shows how you might do it with chef_gem: https://gist.github.com/lewg/3018413
[2013-02-28 15:11:56 -0500] gamafranco: let me try that one
[2013-02-28 15:12:07 -0500] gamafranco: because, vagrant already has chef installed
[2013-02-28 15:12:21 -0500] gamafranco: don't wan't to mingle with the default install
[2013-02-28 15:15:22 -0500] gamafranco: zts, thanks so much. that worked
[2013-02-28 15:23:15 -0500] zts: no problem
[2013-02-28 15:32:25 -0500] RJ2: what's the best way to add a macro/simple function for use in various cookbooks? i basically want to wrap up a fairly complex call to search(), since i dont want to repeat the query
[2013-02-28 15:32:50 -0500] awgross: RJ2: I would stick it in a library function and have it patch itself in to chef recipe
[2013-02-28 15:32:52 -0500] RJ2: i just want to be able to say my_search() in other recipes
[2013-02-28 15:33:11 -0500] awgross: then just include that cookbook in the metadata.rb file and it will get loaded
[2013-02-28 15:33:17 -0500] geekbri: awgross, RJ2: Just make sure that you have that cookbook first in the run list :)
[2013-02-28 15:33:26 -0500] geekbri: or that.
[2013-02-28 15:33:31 -0500] RJ2: ah, include in the metadata - thanks
[2013-02-28 15:56:06 -0500] morete: hello all
[2013-02-28 15:56:24 -0500] awgross: hey
[2013-02-28 15:56:37 -0500] morete: I'd like to know if I could upgrade couchdb to 1.1.1 while running chef-server 0.10.8
[2013-02-28 15:56:37 -0500] r3vamp: Is it possible to specify the run_list of chef solo within solo.rb?
[2013-02-28 15:56:52 -0500] morete: does anybody know if that's possible?
[2013-02-28 15:59:30 -0500] c00p: Has anyone successfully got Chef Server 11 to run on non standard ports for HTTP and HTTPS
[2013-02-28 15:59:37 -0500] c00p: Mine just seems to not want to
[2013-02-28 16:01:16 -0500] c00p: also - does 11.6.0 not stop - seems chef-server-ctl stop does not work for me on centos 6
[2013-02-28 16:01:52 -0500] morete: c00p: I do nginx on port 80 and stunnel on 443 then I set logging and a reverse proxy
[2013-02-28 16:02:03 -0500] morete: think you can do the same for any version, right?
[2013-02-28 16:02:36 -0500] c00p: I have apache running, serving pages - want chef on 81/444 or what ever port
[2013-02-28 16:02:37 -0500] c00p: OR
[2013-02-28 16:03:04 -0500] c00p: I guess I could reconfigure nginx to forward everything but chef.cooperlees.com to apache ...
[2013-02-28 16:03:36 -0500] c00p: trying to work out what's easier to confgire - ment to be able to just make a chef-server.rb and reconfigure uses those settings but no such luck at the moment
[2013-02-28 16:03:49 -0500] c00p: just erased the rpm - Will give it another go from the start
[2013-02-28 16:05:05 -0500] r3vamp: c00p: Take a look a thttp://tickets.opscode.com/browse/CHEF-3853
[2013-02-28 16:05:18 -0500] r3vamp: c00p: Changing the nginx ports is currently bugged
[2013-02-28 16:05:31 -0500] c00p: epic fail imo.
[2013-02-28 16:08:00 -0500] gkarekinian: I don't understand the syntax we're supposed to use in Chef 11 to add elements to a node attribute that's an Array
[2013-02-28 16:10:37 -0500] morete: Does anybody know if it is possible to run chef-server 0.10.8 with couchdb to 1.1.1 or 1.2.1?
[2013-02-28 16:13:22 -0500] awgross: gkarekinian: can you give an example?
[2013-02-28 16:13:45 -0500] gkarekinian: awgross: I used stuff like this in Chef 10:
[2013-02-28 16:14:01 -0500] gkarekinian: node['backup']['rsync_directories'] <<  '/some/dir'
[2013-02-28 16:14:36 -0500] gkarekinian: I tried using node.normal instead but it seems the collection is immutable then
[2013-02-28 16:15:06 -0500] awgross: gkarekinian: is this in the attributes file?
[2013-02-28 16:15:10 -0500] c00p: gkarekinian: node.set maybe
[2013-02-28 16:15:15 -0500] gkarekinian: Oops, forgot to mention it's in a recipe
[2013-02-28 16:15:29 -0500] awgross: ahh k, try node.set as c00p suggested
[2013-02-28 16:15:41 -0500] c00p: Wonder if there is an apache module where I can say anything trying to talk to chef.cooperlees.com forward to port 81/444
[2013-02-28 16:16:10 -0500] c00p: Chef 11 is more strict on correct precedence or what ever Adam went on about at a talk a couple of weeks ago :)
[2013-02-28 16:17:08 -0500] gkarekinian: Yes but the part that's unclear is how it's supposed to be done with push and << now
[2013-02-28 16:17:11 -0500] gkarekinian: FATAL: NoMethodError: Undefined node attribute or method `<<' on `node'. To set an attribute, use `<<=value' instead.
[2013-02-28 16:17:22 -0500] gkarekinian: Same result with node.set or node.default
[2013-02-28 16:17:29 -0500] c00p: dam
[2013-02-28 16:17:43 -0500] maek: c00p: mod_proxy?
[2013-02-28 16:18:02 -0500] c00p: yeah going to take a look :)
[2013-02-28 16:18:06 -0500] gkarekinian: I'm not supposed to just use an assignment and it's going to merge the array, am I?
[2013-02-28 16:18:51 -0500] gkarekinian: Oh well, in this specific case I can just cheat because my array's only getting one thing in it for now
[2013-02-28 16:19:38 -0500] gkarekinian: Or maybe we're supposed to do the merge ourself now?
[2013-02-28 16:21:17 -0500] gkarekinian: I'm doing it in Ruby, that seems weird though:
[2013-02-28 16:21:21 -0500] gkarekinian: >> h = ['lala']
[2013-02-28 16:21:22 -0500] gkarekinian: => ["lala"]
[2013-02-28 16:21:23 -0500] gkarekinian: >> h  = h << 'test'
[2013-02-28 16:21:24 -0500] gkarekinian: => ["lala", "test"]
[2013-02-28 16:22:08 -0500] gkarekinian: So:
[2013-02-28 16:22:21 -0500] gkarekinian: node.set['backup']['rsync_directories'] = node['backup']['rsync_directories'] << '/my_extra_dir'
[2013-02-28 16:22:32 -0500] gkarekinian: And of course that fucked up Colloquy
[2013-02-28 16:24:05 -0500] gkarekinian: Ahaha shit, can't do that because node['backup']['rsync_directories'] has no precedence set so it's immutable
[2013-02-28 16:24:14 -0500] gkarekinian: There has to be a way
[2013-02-28 16:24:50 -0500] gkarekinian: Fuck it, I'm using #to_a on it, this is getting insane
[2013-02-28 16:26:13 -0500] gkarekinian: So unless someone has a better way I'm doing it like this:
[2013-02-28 16:26:23 -0500] gkarekinian: node.set['backup']['rsync_directories'] = node['backup']['rsync_directories'].to_a << '/my/other/dir'
[2013-02-28 16:26:25 -0500] tduffield: gkarekinian: you can try doing a test on the value to see if its nil and proceed accordingly
[2013-02-28 16:27:04 -0500] gkarekinian: Yeah but I mean, this used to be so easy in earlier versions, and the document talking about breaking changes in Chef 11 doesn't mention this part
[2013-02-28 16:27:22 -0500] tduffield: gkarekinian: I get this same behavior in 10
[2013-02-28 16:27:47 -0500] ggolin: hello all
[2013-02-28 16:29:35 -0500] ggolin: looking at app/db cookbooks. the db::master recipe searches :apps - what is that object?
[2013-02-28 16:29:43 -0500] ggolin: (line 30)
[2013-02-28 16:30:49 -0500] gkarekinian: :apps is a Symbol, it's kind of like a string but it's unique
[2013-02-28 16:31:07 -0500] ggolin: oh its a databag as per line 39
[2013-02-28 16:31:35 -0500] ggolin: so.. the apps cookbook deprecates databags but the db cookbook still uses them?
[2013-02-28 16:32:04 -0500] ggolin: and the db cookbook references the apps cookbook documentation in that regard. the app cb doc says databags are no longer in use.
[2013-02-28 16:32:18 -0500] ggolin: this, naturally, causes a bit of a dissonance :)
[2013-02-28 16:32:21 -0500] ggolin: halp?
[2013-02-28 16:33:30 -0500] mattupstate: how does one evaluate the exit code of a command in a recipe?
[2013-02-28 16:33:44 -0500] ggolin: how do you mean?
[2013-02-28 16:33:56 -0500] mattupstate: i want to know if a command exists, basically
[2013-02-28 16:34:02 -0500] mattupstate: it should exit with 1
[2013-02-28 16:34:16 -0500] mattupstate: whereas the exit code is 127 if the command does not exist
[2013-02-28 16:34:17 -0500] ggolin: in what context are you using this? the execute resource?
[2013-02-28 16:34:36 -0500] mattupstate: i'm not using it yet
[2013-02-28 16:34:44 -0500] gkarekinian: Exiting with 1 when things are good is pretty weird
[2013-02-28 16:34:45 -0500] ggolin: ok what are you *trying* to do?
[2013-02-28 16:34:52 -0500] mattupstate: no, its not good
[2013-02-28 16:34:55 -0500] mattupstate: but its what i expect
[2013-02-28 16:35:00 -0500] gkarekinian: Oh
[2013-02-28 16:35:08 -0500] mattupstate: because it will exit with 1 if the command is there and i just don't pass any flags/params
[2013-02-28 16:35:34 -0500] mattupstate: basiclally i'm installing from source and i want to recompile if the version specified is different than what exists
[2013-02-28 16:35:48 -0500] mattupstate: and the first step is to know if the command is installed
[2013-02-28 16:36:39 -0500] ggolin: mattupstate, i suggest you read the 'execute' resource documentation from start to finish, and the meta parameter documentation from start to finish
[2013-02-28 16:37:01 -0500] mattupstate: got it
[2013-02-28 16:37:02 -0500] mattupstate: thanks
[2013-02-28 16:37:03 -0500] Liquid--: sounds like you want to use a not_if statement in your execute block
[2013-02-28 16:38:34 -0500] Liquid--: write the condition in such a way that it checks for whether or not the version is current.
[2013-02-28 16:38:35 -0500] c00p: If you delete the chef 11 users, but forget groups the recipe fails ...
[2013-02-28 16:38:46 -0500] c00p: useradd -s '/bin/sh' -d '/var/opt/chef-server/postgresql' -r opscode-pgsql - Winges about the group still being there
[2013-02-28 16:38:49 -0500] c00p: fyi
[2013-02-28 16:40:00 -0500] ggolin: schisamo, when you have a minute, can you please answer the app/db cookbook question?
[2013-02-28 16:45:50 -0500] zerokarm1left: chef+vagrant noob here, trying to get a bare bones node going with application_python and the celery resource is oddly complaining about the mysql gem missing
[2013-02-28 16:47:40 -0500] DrVonNostren: Can anyone help me determine why I get "Error executing action `create` on resource 'user[chef_server]'" when i try to run sudo chef-server-ctl reconfigure ? using 11.06
[2013-02-28 16:47:49 -0500] DrVonNostren: rhel6
[2013-02-28 16:48:57 -0500] maek: zerokarm1left: https://github.com/clifferson/celery_cookbook some not quite finished celery thing ive been working on. fwiw. application_python might be better fit
[2013-02-28 16:49:22 -0500] maek: I intend to add supervisord support in the next few days
[2013-02-28 16:54:04 -0500] c00p: yay - Listening on non default port
[2013-02-28 16:54:13 -0500] c00p: will work on a workaround with mod proxy tonight maybe :)
[2013-02-28 16:54:34 -0500] spheromak: c00p: see if you can upload cooks
[2013-02-28 16:54:53 -0500] spheromak: c00p: sorry mis type
[2013-02-28 16:57:44 -0500] r3vamp: spheromak: Yah, that was the problem I had. c00p: also try to do a chef-server-ctl test
[2013-02-28 16:58:49 -0500] ggolin: what does this do? (app['database_master_role'] & node.run_list.roles).each do |dbm_role|
[2013-02-28 16:58:58 -0500] ggolin: that ampersand throws me off.
[2013-02-28 16:59:29 -0500] ggolin: if app['database_master_role'] is set to a string then i get a nomethod error & for a string
[2013-02-28 16:59:50 -0500] ggolin: if app['database_master_role'] is set to true i get a nomethod error each for a true object
[2013-02-28 17:00:15 -0500] spheromak: r3vamp: yea i thought he was talking about moving chef-server 11 to a non default port. Issues with inter service redirects will prevent bookshelf from honoring that high port.
[2013-02-28 17:00:39 -0500] r3vamp: spheromak: Yup, I just figured that out yesterday.
[2013-02-28 17:00:47 -0500] zerokarm1left: maek: thanks, i'll take a look
[2013-02-28 17:01:09 -0500] maek: zerokarm1left: might be a rabbit hole, just saying thats how I did it
[2013-02-28 17:01:10 -0500] spheromak: r3vamp: in my vagrant envs i resorted to iptables/ipfw redirects :\
[2013-02-28 17:01:30 -0500] r3vamp: spheromak: I just moved away from chef-server entirely... 0.o
[2013-02-28 17:01:36 -0500] maek: zerokarm1left: for a dev box it will just start the workers via an execute
[2013-02-28 17:02:24 -0500] zerokarm1left: maek: i'd like to take a stab at getting application_python to work, I just can't tell atm if I'm using Chef incorrectly or if there's a bug in application_python
[2013-02-28 17:02:38 -0500] spheromak: r3vamp: well i think you give up quite a bit of nice functionality when you do that but to each his own :D
[2013-02-28 17:02:51 -0500] maek: zerokarm1left: gist the error?
[2013-02-28 17:03:01 -0500] maek: usually the 'missing mysql gem' is an info
[2013-02-28 17:03:05 -0500] maek: or something in a cookbook is requiring it
[2013-02-28 17:03:30 -0500] zerokarm1left: yea, i'm confused why a python stack requires a rubygem
[2013-02-28 17:03:36 -0500] r3vamp: spheromak: No search =(
[2013-02-28 17:03:57 -0500] maek: zerokarm1left: that ruby gem is needed by I assume the mysql cookbook to do something with mysql
[2013-02-28 17:04:03 -0500] maek: assuming the stack is using mysql
[2013-02-28 17:04:11 -0500] maek: that gem is how chef does some magic with mysq, like grants etc
[2013-02-28 17:08:58 -0500] faustroll: zerokarm1left: what maek said. mysql gem is required by one of your recipes
[2013-02-28 17:09:11 -0500] zerokarmaleft: http://gist.github.com/zerokarmaleft/5058290 is my Vagrantfile
[2013-02-28 17:12:41 -0500] maek: zerokarmaleft: is that the rogue logo? :D
[2013-02-28 17:12:55 -0500] maek: so one of those recipes is asking for mysql
[2013-02-28 17:13:01 -0500] maek: Id bet its application_python
[2013-02-28 17:13:06 -0500] maek: or one of the recipes it uses
[2013-02-28 17:14:00 -0500] zerokarmaleft: if that's the case, shouldn't it get pulled in automatically?
[2013-02-28 17:15:09 -0500] faustroll: zerokarmaleft: ideally, yes I'd like to see that behavior
[2013-02-28 17:16:22 -0500] faustroll: zerokarmaleft: take a look at application_python?
[2013-02-28 17:16:40 -0500] zerokarmaleft: maek: yes, it is the rogue logo...for lack of anything better to use for my gravatar however many years ago i created it heh
[2013-02-28 17:24:50 -0500] c00p: spheromak: That's the goal :)
[2013-02-28 17:25:01 -0500] c00p: r3vamp: ok :)
[2013-02-28 17:26:13 -0500] c00p: If it work will write a cookbook to mode apache :)
[2013-02-28 17:26:16 -0500] c00p: *works
[2013-02-28 17:26:22 -0500] c00p: *mod
[2013-02-28 17:26:28 -0500] c00p: wow - So much fail this morning
[2013-02-28 17:33:23 -0500] asdbla: hi, how do I print out overriden attributes with knife exec?
[2013-02-28 17:35:03 -0500] asdbla:  knife exec -E 'search(:node, "name:nodename") {|n| puts "#{n.name} #{n.ipaddress}  #{n.letssay.thisis.overriden.attribute}"}'
[2013-02-28 17:35:21 -0500] asdbla: but it dosen't work this way ...
[2013-02-28 17:36:03 -0500] countdigi: asdbla: can u just do a knife node show <nodename> --long? that will have all the data from the last run
[2013-02-28 17:36:27 -0500] countdigi: not sure thats the most elegant - just shooting from the hip
[2013-02-28 17:36:33 -0500] asdbla: i know what it does
[2013-02-28 17:37:03 -0500] asdbla: my question is how can i exactly print out that overriden attribute with knife exec?
[2013-02-28 17:37:48 -0500] asdbla: "#{n.name} #{n.ipaddress} these two work, but overriden attribute does not
[2013-02-28 17:38:11 -0500] countdigi: so u get the normal/default attribute value?
[2013-02-28 17:38:18 -0500] asdbla: yes
[2013-02-28 17:40:31 -0500] asdbla: any ideas ? :)
[2013-02-28 17:42:12 -0500] countdigi: i notice a syntax of n.override_attrs at http://wiki.opscode.com/display/chef/Knife+Exec
[2013-02-28 17:42:34 -0500] countdigi: is that what u prepend? like n.override_attrs.somekey
[2013-02-28 17:43:28 -0500] zts: asdbla: if you do 'knife node show <nodename> -l', do you see the attributes you're expecting in the "Override Attributes" section?
[2013-02-28 17:44:14 -0500] asdbla: zts, yes
[2013-02-28 17:48:54 -0500] asdbla: countdigi, tried that, {n.override_attrs} will list all override attributes, but callling one specific is not working
[2013-02-28 17:49:09 -0500] balgarath: so how do you get around "Enter your password to install the bundled RubyGems to your system" in a recipe? anyway to automate this by storing password in an encrypted databag?
[2013-02-28 17:49:53 -0500] maek: balgarath: is chef-client/solo not running as root?
[2013-02-28 17:50:06 -0500] asdbla: how do i call specific attributes, for example, n.override_attrs.attribute1.attribute2
[2013-02-28 17:52:36 -0500] JETS: oh hai
[2013-02-28 18:10:13 -0500] j^2: anyone have a good tutorial on using shef ?
[2013-02-28 18:10:22 -0500] j^2: or article?
[2013-02-28 18:16:00 -0500] faustroll: j^2: in what capacity?
[2013-02-28 18:16:39 -0500] j^2: any really
[2013-02-28 18:18:17 -0500] faustroll: j^2 my way into almost any new thing is through tests, and testing tools
[2013-02-28 18:18:24 -0500] faustroll: ymmv
[2013-02-28 18:18:28 -0500] j^2: ah
[2013-02-28 18:18:30 -0500] j^2: ok cool
[2013-02-28 18:18:38 -0500] ggolin: j^2, what are you trying to do?
[2013-02-28 18:18:54 -0500] j^2: http://wiki.opscode.com/display/chef/Shef
[2013-02-28 18:19:06 -0500] faustroll: j^2: have a ruby background?
[2013-02-28 18:19:08 -0500] j^2: i was hoping for more
[2013-02-28 18:19:11 -0500] j^2: here and there yeah
[2013-02-28 18:20:27 -0500] ggolin: heh remind me again why node[:chef_environment] is nil
[2013-02-28 18:20:40 -0500] faustroll: are u using shef to learn chef?
[2013-02-28 18:21:02 -0500] j^2: faustroll: nope, i just was looking for any more information thats all
[2013-02-28 18:22:01 -0500] helllen: hi
[2013-02-28 18:22:28 -0500] helllen: someone know a doc explain the communication process between chef-client and chef-server ??
[2013-02-28 18:23:20 -0500] faustroll: j^2: oh, some folks use it for playing with chef, or for debugging, but I prefer tests for both
[2013-02-28 18:23:48 -0500] j^2: helllen: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2013-02-28 18:24:02 -0500] j^2: faustroll: ahh cool
[2013-02-28 18:24:54 -0500] faustroll: j^2: think of it as just another REPL?
[2013-02-28 18:25:12 -0500] j^2: ahhhhh
[2013-02-28 18:25:24 -0500] morete: if anyone else wonders if it is possible to run chef-server 0.10.8 with couchdb 1.1.1, answer is yes.
[2013-02-28 18:25:34 -0500] morete: bye!
[2013-02-28 18:25:37 -0500] helllen: thanks
[2013-02-28 18:33:50 -0500] fabio_: hello, there is a way to perform a apt-get update only with a new ppa or something?
[2013-02-28 18:34:00 -0500] fabio_: chef-client always does apt-get update
[2013-02-28 18:34:44 -0500] awgross: fabio_: you can have it notify an execute block that does the update
[2013-02-28 18:35:01 -0500] awgross: just declare the execute block initially with "action :nothing"
[2013-02-28 18:35:15 -0500] awgross: then after you install the new PPA, have it notify
[2013-02-28 18:37:53 -0500] lsmag: hello
[2013-02-28 18:38:00 -0500] lsmag: I'm testing chef with Vagrant
[2013-02-28 18:38:10 -0500] lsmag: using centOS 6.x
[2013-02-28 18:38:52 -0500] lsmag: but when I try to install apache, it fails... it's networking (or proxy) problem, can someone help me? https://gist.github.com/lsmagalhaes/5058996
[2013-02-28 18:44:16 -0500] ggolin: this app cookbook is driving me crazy :(
[2013-02-28 19:04:11 -0500] littleidea: I like putting some attributes in roles
[2013-02-28 19:05:12 -0500] DrVonNostren: guys i just installed the RPM of chef server 11.06 and am attempting chef-server-ctl reconfigure but am getting the following error: Error executing action `create` on resource 'user[chef_server]' here is the full output Thanks for any help.
[2013-02-28 19:05:25 -0500] DrVonNostren: http://fpaste.org/eNJE/
[2013-02-28 19:06:01 -0500] gleam: sounds like there's already a user named chef_server
[2013-02-28 19:06:31 -0500] jtoft: run the command `useradd -s '/bin/sh' -d '/opt/chef-server/embedded' -r chef_server`
[2013-02-28 19:06:34 -0500] jtoft: see what it outputs
[2013-02-28 19:06:35 -0500] gleam: that's what error 4 is
[2013-02-28 19:07:06 -0500] DrVonNostren: useradd: Can't get unique system UID (no more available UIDs) useradd: can't create user
[2013-02-28 19:07:20 -0500] DrVonNostren: okay okay, this is a brand new install, what the hey
[2013-02-28 19:07:38 -0500] DrVonNostren: thanks for the help
[2013-02-28 19:07:40 -0500] gleam: all uids between 100 and 999 are used?
[2013-02-28 19:08:01 -0500] gleam: or SYS_UID_MAX in /etc/login.defs is low
[2013-02-28 19:08:39 -0500] DrVonNostren: UID_MAX                 60000
[2013-02-28 19:08:45 -0500] gleam: then i got nothing
[2013-02-28 19:08:45 -0500] DrVonNostren: the only user on this new system is root....
[2013-02-28 19:09:23 -0500] Eulipi0n: ive got one cookbook where i keep seeing "undefined method `keys' for Array..."  is there a way to tell chef its an array, not a hash?
[2013-02-28 19:11:06 -0500] littleidea: Eulipi0n: the problem is you have something that wants a hash
[2013-02-28 19:13:17 -0500] Eulipi0n: littleidea: http://pastebin.com/ixAUWxup
[2013-02-28 19:13:43 -0500] Eulipi0n: it works in the ruby shell
[2013-02-28 19:14:58 -0500] DrVonNostren: glean my login.defs doesnt even have a sys_uid_max
[2013-02-28 19:15:26 -0500] DrVonNostren: uncharted territory for me here. but I guess is hould put those values in
[2013-02-28 19:15:43 -0500] littleidea: Eulipi0n: what is 'works'? look in the stack trace for where the keys is called. Some thing is expecting a different data structure.
[2013-02-28 19:16:00 -0500] DrVonNostren: gleam: ^^
[2013-02-28 19:16:32 -0500] littleidea: Eulipi0n: if you don't have it sorted in a while, I'll help help, I have to fix up some stuff for a bit.
[2013-02-28 19:25:01 -0500] Eulipi0n: littleidea: thanks, id appreciate the help when you've got a chance
[2013-02-28 19:29:46 -0500] ggolin: DrVonNostren, is selinux enabled?
[2013-02-28 19:29:57 -0500] ggolin: ls /selinux
[2013-02-28 19:43:59 -0500] chip-: Anybody have a favorite cross-platform way of handling linux host firewalls? Looking at these cookbooks: iptables, simple_iptables, firewall, ufw, afw, none are satisfying. AFW is closest in theory but I'm having difficulty getting it running.
[2013-02-28 19:44:36 -0500] znDuff: "cross-platform", but "linux" only?
[2013-02-28 19:44:58 -0500] faustrol1: znDuff: cross distro
[2013-02-28 19:45:36 -0500] chip-: Okay, cross-distro.
[2013-02-28 19:46:11 -0500] faustrol1: chip: I guess this not the place or the time to complain about ubuntu?
[2013-02-28 19:49:11 -0500] chip-: faustrol1: Choice of distro is out of my hands, yes. The project requirement is support for both CentOS 5.8 and Ubuntu 12.04 LTS support.
[2013-02-28 19:50:06 -0500] chip-: And I'm porting in an existing, fairly complex firewall config that doesn't fit nicely inside the lines of simple_iptables
[2013-02-28 19:51:23 -0500] faustrol1: chip: I had a hunch as much
[2013-02-28 19:51:25 -0500] chip-: Probably going to have to go bespoke, but was hoping for something I could put a wrapper around.
[2013-02-28 19:52:06 -0500] faustrol1: chip: I have some nice iptables firewall configs that I don't use on ubuntu
[2013-02-28 19:52:43 -0500] znDuff: chip-: See https://github.com/Tippr/tippr-public-cookbooks/tree/master/shorewall
[2013-02-28 19:52:59 -0500] znDuff: chip-: If it has the flexibility you need, I expect that adding Ubuntu support will be considerably easier than starting from scratch.
[2013-02-28 19:53:26 -0500] faustrol1: znDuff: I'm going to look at this myself. thanks
[2013-02-28 19:53:43 -0500] chip-: znDuff: This has promise.
[2013-02-28 19:54:56 -0500] chip-: Thanks.
[2013-02-28 19:56:56 -0500] chip-: znDuff: Do you keep the version on the cookbook site synced, or should I point Berks at the github repo?
[2013-02-28 19:57:12 -0500] chip-: Well, 2 years ago. Guess it's moot.
[2013-02-28 20:00:40 -0500] znDuff: chip-: Just so -- and I haven't been at Tippr for quite some time.
[2013-02-28 20:00:54 -0500] chip-: Yeah, I'm going to do the UNTHINKABLE and actually just fork it. :)
[2013-02-28 20:05:33 -0500] FarmKing: surely you've all already seen today's Parse blog post, but just in case you missed the awesomeness -> http://blog.parse.com/2013/02/28/working-with-hostnames-in-a-dynamically-scaled-environment/
[2013-02-28 20:17:10 -0500] drgage: hi, i'm learning about encrypted data bags. want to use them for users of http auth stuff like munin and icinga. but i'm unclear on the best way to proceed - do i encrypt the whole user data bag item, or do i make a separate item just for the passwd string? is there a standard way to handle this scenario?
[2013-02-28 20:27:34 -0500] bluszcz: hey, during starting of chef server i am getting STDOUT: warning: rabbitmq: unable to open supervise/ok:   - i am kind of lost, using ps I see rabbit process running, it seems kind of supervisor problem - i read that it happens on amazon / oracle linux (there is a bug report), but this is ubuntu box - chef server 11.06
[2013-02-28 20:40:30 -0500] halfamind: Hi #chef. I'm using AWS OpsWorks to run my Rails app with Unicorn. My app expects a bunch of configuration in the ENV
[2013-02-28 20:41:12 -0500] halfamind: Is the easiest way to accomplish this to export these variables in the deploy user's .bash_profile? Or is there something less messy?
[2013-02-28 20:44:52 -0500] znDuff: halfamind: Different OS distributions have their own conventions in terms of setting global environment.
[2013-02-28 20:45:04 -0500] znDuff: halfamind: I'd start with asking your distro's channel.
[2013-02-28 20:45:15 -0500] znDuff: ...whatever they prefer can be pretty easily modeled.-
[2013-02-28 20:46:56 -0500] halfamind: znDuff: Thanks. This is on Amazon linux, for what it's worth (I'm sticking with the defaults so far).
[2013-02-28 20:47:20 -0500] znDuff: halfamind: 'fraid I don't know what their distro looks like, so I can't give local advice for it.
[2013-02-28 20:47:20 -0500] FarmKing: is there a syntax for adding to attributes?  node.default['packages'] += 'pkg1','pkg2'
[2013-02-28 20:50:50 -0500] halfamind: znDuff: Amazon linux is a centos variant, I believe.
[2013-02-28 20:51:14 -0500] znDuff: FarmKing: If I remember correctly, which isn't guaranteed, it's node.default['packages'] << ['pkg1', 'pkg2']
[2013-02-28 20:51:55 -0500] FarmKing: I wonder if that syntax is still valid with the new attributes stuff
[2013-02-28 20:51:58 -0500] FarmKing: thanks
[2013-02-28 20:52:28 -0500] znDuff: FarmKing: ...though you want to be sure it actually _is_ at the default level, if you're going to be appending there.
[2013-02-28 20:52:43 -0500] FarmKing: thanks
[2013-02-28 21:02:05 -0500] geekbri_: override vs default, override replaces it, if they are on the same level default and default it appends to the array
[2013-02-28 21:02:15 -0500] geekbri_: at least, i think thats the question thats being asked
[2013-02-28 21:13:36 -0500] isotope: anyone available to help with the email handler
[2013-02-28 21:14:04 -0500] isotope: I think I implimented it correct based on the docs but its still failing
[2013-02-28 21:15:05 -0500] isotope: most things in chef are straight forward
[2013-02-28 21:33:26 -0500] Death_Syn: good talk, jtimberman
[2013-02-28 21:34:48 -0500] littleidea: I'm confused...
[2013-02-28 21:34:49 -0500] littleidea: https://gist.github.com/littleidea/2a08063c8ede6e7ae0f1
[2013-02-28 21:34:59 -0500] littleidea: same json
[2013-02-28 21:35:10 -0500] littleidea: on one data bag it makes it fine
[2013-02-28 21:35:21 -0500] littleidea: on the other it blows up
[2013-02-28 21:37:48 -0500] littleidea: figured it out...
[2013-02-28 21:38:07 -0500] littleidea: on 'create' you only put the 'raw'
[2013-02-28 21:46:13 -0500] benP_: How would I import a cookbook/library into an interactive chef-shell session? In particular, I want to play with a block of code with partial_search.
[2013-02-28 21:47:20 -0500] benP_: In my cookbook I get it by just requiring it in the metadata, which I don't think I can do in chef-shell.
[2013-02-28 22:06:40 -0500] qhartman: getting this error on first chef-run when trying to bootstrap a centos 6 box with chef 10.24: https://gist.github.com/qhartman/5060530
[2013-02-28 22:06:49 -0500] qhartman: Any thoughts? I'm at a loss.
[2013-02-28 22:08:55 -0500] fauncybillups: How often does chef server (11.4) update its index?
[2013-02-28 22:09:43 -0500] blackstar257: @qhartman: how did you install it
[2013-02-28 22:09:47 -0500] znDuff: fauncybillups: traditionally, content is added to a queue as soon as it's changed, and the index update process works off that queue as soon as and long as it's non-empty.
[2013-02-28 22:09:56 -0500] josephholsten: fauncybillups: as data is inserted. it goes through a queue though, since indexing can get backed up
[2013-02-28 22:10:13 -0500] qhartman: blackstar257, gems
[2013-02-28 22:10:24 -0500] fauncybillups: znDuff, josephholsten: thanks!.. is there any way for me to tell if indexing is backed up?
[2013-02-28 22:10:56 -0500] fauncybillups: e.g. how many items are in that queue?
[2013-02-28 22:11:07 -0500] josephholsten: there was chef-expanderctl in chef 10
[2013-02-28 22:11:35 -0500] znDuff: *nod* -- there've been tools for that traditionally, and I'm sure they still exist, but I don't know Chef 0.11.
[2013-02-28 22:12:41 -0500] blackstar257: im not too familiar with 10.24 i just got my setup working using 11.4.0
[2013-02-28 22:13:44 -0500] josephholsten: I really need to find a few hours and migrate up
[2013-02-28 22:22:44 -0500] concertman: Hey guys. how do you check if a node has a role during a chef-client run?  I'm currently running node.role?("apache") but that doesn't seem to be doing it.
[2013-02-28 22:23:17 -0500] cpasmoi: perhaps better check an attribute given by the role ?
[2013-02-28 22:24:36 -0500] FarmKing: if I set a default attribute in a recipe as django_apps = [], would folks expect this to work? default_attributes "django_apps" << { 'thing1' => 'thing2',}
[2013-02-28 22:26:32 -0500] concertman: cpasmoi I'll give that a try.
[2013-02-28 22:33:52 -0500] Rift137: Hello, new to chef and wondering if anyone knows where in a cookbook I should include environment variables or if that should be done else where. So for instance, I have two apps, development and production, and I need to use chef to tell each app which environment it should be running in.
[2013-02-28 22:44:12 -0500] masterkorp: Rift137: http://i.imgur.com/jiPMSEV.gif
[2013-02-28 22:51:30 -0500] shennyg: Rift137: I don't use them but I think you can start here: http://docs.opscode.com/essentials_environments.html
[2013-02-28 22:56:37 -0500] Rift137: shennyg: Thanks
[2013-02-28 23:21:53 -0500] DrVonNostren: what is my USER.pem file for my chef workstation??? docs say nothing about where to find or generate thiis
[2013-02-28 23:22:04 -0500] DrVonNostren: using private chef
[2013-02-28 23:31:34 -0500] log1kal: concertman: if node.run_list.include?("role/recipename") is how I check for items in the runlist
[2013-02-28 23:32:00 -0500] concertman: log1kal: nice thanks!
[2013-02-28 23:32:01 -0500] tilgovi: anyone been playing with opsworks much? I'm having trouble with simple things and wondering if it's because I'm a chef n00b or opsworks is just too beta
[2013-02-28 23:32:04 -0500] log1kal: :)
[2013-02-28 23:32:53 -0500] tilgovi: it seems /etc/chef/client.pem doesn't exist on opsworks and my failure log says one of my recipes is failing because it tries to read that
[2013-02-28 23:33:24 -0500] yfeldblum: https://twitter.com/yfeldblum/status/307271975087251457
[2013-02-28 23:39:47 -0500] DrVonNostren: seriously the documentation on the .pem files is a joke
[2013-02-28 23:52:54 -0500] freq47: I am looking at chef to process/manipulate files on a regular basis, is chef the best candidate, would like to stick to ruby
[2013-02-28 23:54:00 -0500] znDuff: freq47: "process/manipulate files on a regular basis" is a pretty vague description of what you're actually trying to do.
[2013-02-28 23:54:38 -0500] freq47: Well, I am wanting to monitor log files
[2013-02-28 23:55:00 -0500] freq47: Modify csv that get uploaded
[2013-02-28 23:55:14 -0500] znDuff: So far, this is sounding like "not a good use case for Chef".
[2013-02-28 23:55:15 -0500] freq47: Convert them to other file formats
[2013-02-28 23:55:39 -0500] faustrol1: znDuff: i process/manipulate files on a regular basis
[2013-02-28 23:56:21 -0500] freq47: So is chef just a server config util?
[2013-02-28 23:56:28 -0500] chip-: Chef is a configuration management platform.
[2013-02-28 23:56:41 -0500] freq47: Which still makes it great
[2013-02-28 23:56:45 -0500] chip-: If you're looking to do log manipulation / aggregation, perhaps you'd like to give Logstash a poke
[2013-02-28 23:57:00 -0500] freq47: Ok
[2013-02-28 23:57:18 -0500] chip-: It's in Ruby (although it's packaged as Java and runs in jruby)
[2013-02-28 23:57:36 -0500] chip-: Might want to listen to the most recent episode of Food Fight podcast, which discusses Logstash at length
[2013-02-28 23:57:41 -0500] freq47: I am just trying to consolidate
[2013-02-28 23:58:06 -0500] freq47: I have crowns jobs everywhere
[2013-02-28 23:58:18 -0500] freq47: awk scripts
[2013-02-28 23:58:31 -0500] freq47: Filemon
[2013-02-28 23:58:47 -0500] freq47: Etc... just a mess
[2013-02-28 23:59:22 -0500] freq47: Crowns should be cron, sorry phone
[2013-02-28 23:59:37 -0500] znDuff: freq47: Chef can help you manage that mess. :)

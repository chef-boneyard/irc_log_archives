[2013-02-27 00:01:56 -0500] miah: kisoku: certainly possible. I haven't really gone through the erchef code and libraries yet
[2013-02-27 00:06:25 -0500] awgross: correction miah, there is a second bug causing non-chef server machines to template themselves
[2013-02-27 00:06:47 -0500] miah: doh
[2013-02-27 00:28:03 -0500] awgross: scratch that miah, the chef_server location is a new attribute that they template into client.rb by default now, my bad for not seeing it before.
[2013-02-27 00:39:14 -0500] Loadx: is it possible to shorten this?
[2013-02-27 00:39:14 -0500] Loadx:   if attrs.has_key?("user")
[2013-02-27 00:39:15 -0500] Loadx: owner attrs["user"]
[2013-02-27 00:39:15 -0500] Loadx:    end
[2013-02-27 00:39:39 -0500] Loadx: im not sure if the defualt are nil or empty strings etc
[2013-02-27 00:39:52 -0500] ebollens: You can make it a one-liner as:
[2013-02-27 00:39:53 -0500] ebollens: owner attrs["user"] if attrs.has_key?("user")
[2013-02-27 00:39:59 -0500] Loadx: perfect, thank :)
[2013-02-27 00:40:03 -0500] Loadx: thanks even
[2013-02-27 00:40:31 -0500] ebollens: Generally, probably better not to assume types.
[2013-02-27 00:42:01 -0500] miah: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-02-27 00:43:26 -0500] Loadx: I just get sick of writing end :P spoiled by python
[2013-02-27 00:44:03 -0500] sascha_d: hey chefs, why I am I seeing "already initialized" messages all over with new chef? INFO: CronD light-weight resource already initialized -- overriding!
[2013-02-27 00:48:43 -0500] miah: sascha_d: these? https://gist.github.com/danielsdeleo/30a8719901eca6545488
[2013-02-27 00:49:41 -0500] log1kal: Are there issues switching between node[:superman] and node["superman"] ?
[2013-02-27 00:50:23 -0500] faustroll: log1kal: are those not the same?
[2013-02-27 00:51:04 -0500] miah: :superman is a symbol and "superman" is a string
[2013-02-27 00:51:31 -0500] miah: i dont recall if the attributes system does something to.. unify everything
[2013-02-27 00:51:48 -0500] miah: but i try to stick with either 'strings' or node.attribute.method.chaining
[2013-02-27 00:51:59 -0500] miah: i find the method.chaining style easier on the eyes and fingers
[2013-02-27 00:52:02 -0500] faustroll: miah: lol of course they are. but they will be treated as same by hash, no/
[2013-02-27 00:52:06 -0500] faustroll: no?
[2013-02-27 00:52:41 -0500] sascha_d: @miah no, it's this: INFO: CronD light-weight resource already initialized -- overriding! this is especially disconcerting when cron is just a rider cookbook that was required for the actual cookbook I'm installing
[2013-02-27 00:52:53 -0500] sascha_d: @miah not a huge deal for me, but this will alarm casual users
[2013-02-27 00:52:53 -0500] miah: hash sees :herp and 'herp' as different.
[2013-02-27 00:53:04 -0500] miah: ah
[2013-02-27 00:53:08 -0500] ebollens: faustroll: depends on if you use .with_indiferent_access
[2013-02-27 00:53:23 -0500] log1kal: verdict: shef doesnt have an issue
[2013-02-27 00:53:31 -0500] log1kal: irb gives me two different hashes
[2013-02-27 00:53:35 -0500] miah: chef uses mash internally too
[2013-02-27 00:53:51 -0500] miah: but i still dont recall the correct answer to this question =)
[2013-02-27 00:53:53 -0500] log1kal: this explains an issue I was having
[2013-02-27 00:54:28 -0500] log1kal: when knifing up environments, make sure you're consistent :)
[2013-02-27 00:54:45 -0500] miah: yup
[2013-02-27 00:55:04 -0500] miah: coding style enforcement helps
[2013-02-27 00:55:21 -0500] log1kal: we're migrating from :superman to 'superman'
[2013-02-27 00:56:53 -0500] log1kal: at some point, half my env attrs went missing because of that.
[2013-02-27 00:57:00 -0500] log1kal: So yes, enforce style!
[2013-02-27 01:00:27 -0500] faustroll: log1kal: and your style choice is? symbol over string?
[2013-02-27 01:00:36 -0500] log1kal: we're moving to 'superman'
[2013-02-27 01:01:05 -0500] faustroll: log1kal: and reason is?
[2013-02-27 01:01:26 -0500] log1kal: I see it in most of the community cookbooks
[2013-02-27 01:01:53 -0500] faustroll: log1kal: consistency
[2013-02-27 01:02:17 -0500] log1kal: Yeah, especially when not being consistent caused the issue I was just conversing about :)
[2013-02-27 01:09:07 -0500] faustroll: I have a question
[2013-02-27 01:09:13 -0500] faustroll: prolly obvious
[2013-02-27 01:09:43 -0500] faustroll: looks like if I am going to create a postgres test database on the fly i should use the database cookbook?
[2013-02-27 01:10:12 -0500] faustroll: have not looked at that cookbook yet
[2013-02-27 01:12:15 -0500] miah: yup
[2013-02-27 01:12:26 -0500] miah: i havent used the pgsql side of that, but the mysql side works pretty well
[2013-02-27 01:13:19 -0500] faustroll: miah: u mean u have used the database cookbook? with mysql as underlying db?
[2013-02-27 01:13:26 -0500] miah: yes
[2013-02-27 01:13:34 -0500] miah: i use it to manage db users mostly
[2013-02-27 01:13:48 -0500] miah: since im currently using RDS
[2013-02-27 01:14:02 -0500] faustroll: miah: it should just be an abstraction then
[2013-02-27 01:14:08 -0500] miah: i dont really have to 'create the database'. at least, not in the way that the database cookbook doe sit.
[2013-02-27 01:14:11 -0500] miah: yup
[2013-02-27 01:14:37 -0500] faustroll: i need to create a test db and populate it. I could just use bash to call some postgres utils i suppose
[2013-02-27 01:15:06 -0500] faustroll: i'm creating some test scenarios for a replication recipe
[2013-02-27 01:15:11 -0500] faustroll: hmmm
[2013-02-27 01:18:42 -0500] faustroll: miah: i looked at the redis cookbook. I did not see tests.
[2013-02-27 01:19:22 -0500] faustroll: miah: I saw that you are using test-kitchen 1.0. is there a branch with tests?
[2013-02-27 01:22:05 -0500] miah: the tests are here: https://github.com/miah/chef-redis/tree/master/test/integration
[2013-02-27 01:22:17 -0500] miah: they're not standard ruby tests.
[2013-02-27 01:23:02 -0500] faustroll: miah: thanks, I see the minitest default_test as well
[2013-02-27 01:23:07 -0500] miah: you can see what gets executed here
[2013-02-27 01:23:07 -0500] miah: https://github.com/miah/chef-redis/blob/master/.jamie.yml
[2013-02-27 01:23:36 -0500] miah: definitely more tests to add
[2013-02-27 01:28:07 -0500] faustroll: miah: first time I've seen bats bash tests. interesting
[2013-02-27 01:28:20 -0500] miah: yup
[2013-02-27 01:36:58 -0500] Loadx: need some help structuring a set of cookbooks
[2013-02-27 01:37:28 -0500] Loadx: im trying to make a bunch of generic wrapper cookbooks and then use these to do something specific to their customer
[2013-02-27 01:37:54 -0500] Loadx: I'm not sure if im looking at this the right way.. but im thinking in the environment have this: http://codepad.org/tRZ9DEAC
[2013-02-27 01:39:47 -0500] Loadx: im fearing im lumping too much into one area
[2013-02-27 01:50:01 -0500] Loadx: maybe i should think of it more like each app should be its own cookbook
[2013-02-27 01:51:38 -0500] ebollens: I'm actually having a similar debate right now over how to do this. Initially, I put together a recipe to install an app, but then questions arose like whether it would be the web root or a subdirectory - and now I've moved to using definitions for these and then recipes that implement the definitions in more reasonable ways. I would say, if it's a different app, though, probably deserves a different cookbook, but I'm no expert.
[2013-02-27 01:54:40 -0500] Loadx: ebollens: yeah the variables im dealing with are quite large
[2013-02-27 01:55:40 -0500] Loadx: ebollens: that sounds like what im contemplating though
[2013-02-27 01:59:57 -0500] doomviking: http://devopsreactions.tumblr.com/
[2013-02-27 02:00:27 -0500] faustroll: ebollens: I see the cookbook abstraction as a namespace around which to organize
[2013-02-27 02:01:01 -0500] faustroll: so, if the applications are similar enough, then perhaps yes, same cookbook?
[2013-02-27 02:01:38 -0500] ebollens: faustroll: The direction I've chosen right now is to create cookbooks for each application, with recipes that allow you to set up either a dedicated or sub-directory variant of the application, using attributes to define where you want it to go in the case of a sub-directoried one.
[2013-02-27 02:02:06 -0500] ebollens: They're not particular close to each other in terms of implementation, at least in my case. Supporting a pretty heterogenous environment of applications.
[2013-02-27 02:02:39 -0500] Loadx: ebollens: likewise
[2013-02-27 02:02:48 -0500] faustroll: ebollens: I think I see.
[2013-02-27 02:03:51 -0500] faustroll: ebollens: you are using the cookbook abstraction to divide and conquer the complexity?
[2013-02-27 02:04:20 -0500] ebollens: Yep, that's exactly it
[2013-02-27 02:04:31 -0500] ryduh: hey there, how can i downgrade a chef client
[2013-02-27 02:04:56 -0500] ebollens: I've got multiple cookbook directories to separate underlying service stuff from applications themselves, so there's no issue from an organizational perspective of having each app have its own cookbook. The recipes for an app then handle app variation.
[2013-02-27 02:05:28 -0500] ebollens: I'm a newbie with Chef, though. We're currently working on migrating over from a certain other DSL-based tool because the deterministic, ordered execution model of Chef and the fact it's pure Ruby is far more understandable to our developers, who we're working to get using these tools directly.
[2013-02-27 02:05:57 -0500] faustroll: ebollens: what is the other tool?
[2013-02-27 02:06:15 -0500] Loadx: We're using chef mostly to keep environments sync'd
[2013-02-27 02:06:26 -0500] ebollens: Puppet.
[2013-02-27 02:07:12 -0500] faustroll: ebollens: is not Puppet mostly ruby as well?
[2013-02-27 02:07:32 -0500] Loadx: when it comes to deploying production apps.. we provision with chef with very minimal config then just install out app from apt.
[2013-02-27 02:07:52 -0500] Loadx: so the dev environments are mostly where the chef magic happens
[2013-02-27 02:08:47 -0500] ebollens: Yes, but it's manifests are based on custom DSL, not straight out of Ruby. It's manifest approach using a dependency graph is also not necessarily conducive to the mental model of our developers. It was causing a lot of difficulties in our particular case, and after getting a good chance to talk to the OpsCode folks at SCALE11x, I was pretty convinced that this would work better. It's been really easy to get going and organize things.
[2013-02-27 02:09:24 -0500] faustroll: Loadx: I'm digging on the testing tools in Chef. I'm writing a complex set of recipes and I'm using testing to drive the development.
[2013-02-27 02:10:08 -0500] faustroll: ebollens: I find Chef more tractable as well.
[2013-02-27 02:10:42 -0500] Loadx: YEah as far as the generics in chef go, its well rounded
[2013-02-27 02:10:55 -0500] jeremyolliver: Has anyone used OpsWorks yet?
[2013-02-27 02:10:55 -0500] ebollens: The generics in Chef do feel much more rolled out.
[2013-02-27 02:11:20 -0500] Loadx: Its just fitting specific use cases into it that sometimes throws me
[2013-02-27 02:11:23 -0500] faustroll: ebollens: and I like using minitest and spec testing to drive the development of my cookbooks.
[2013-02-27 02:11:46 -0500] ebollens: I'm not bashing on either though. They're both outstanding tools in the right environments.
[2013-02-27 02:11:56 -0500] ebollens: Just depends on what fits best for the culture of the shop.
[2013-02-27 02:12:24 -0500] Loadx: I should probably look into the testing side more :P
[2013-02-27 02:12:47 -0500] faustroll: ebollens: Yes. but it woud be ok to bash puppet in #chef. ;)
[2013-02-27 02:13:02 -0500] Loadx: atm im just running over vagrant and if it doesnt go as planned i look throug hthe dbeug logs
[2013-02-27 02:13:02 -0500] jeremyolliver: Haha, but not productive ;)
[2013-02-27 02:13:07 -0500] Loadx: then destroy and re-up
[2013-02-27 02:13:29 -0500] jeremyolliver: Loadx me too, works well enough for now
[2013-02-27 02:13:46 -0500] faustroll: Loadx: using tests helps design
[2013-02-27 02:14:30 -0500] Loadx: faustroll: I absolutely agree, with all over code im there 100%
[2013-02-27 02:14:41 -0500] Loadx: i just havent made the time for it yet
[2013-02-27 02:14:55 -0500] faustroll: Loadx: try out test-kitchen 0.7 . you will get the logs to stdout on fail
[2013-02-27 02:15:14 -0500] ebollens: Got to get a feel for things before you move to TDD, but honestly, TDD is great for config managmenet stuff.
[2013-02-27 02:15:32 -0500] Loadx: yeah we do TDD on everythign else
[2013-02-27 02:16:35 -0500] faustroll: Loadx: time needed is just: bundle exec kitchen init
[2013-02-27 02:16:53 -0500] Loadx: faustroll: I need tests also right?
[2013-02-27 02:17:06 -0500] faustroll: Loadx: not at all!
[2013-02-27 02:17:17 -0500] Loadx: faustroll: So it just monitors the run?
[2013-02-27 02:17:38 -0500] Loadx: ill read the docs
[2013-02-27 02:18:30 -0500] faustroll: Loadx: first time it runs your default recipe straight out of the box, without tests
[2013-02-27 02:19:07 -0500] faustroll: Loadx: you can then create configs to run more complex scenarios
[2013-02-27 02:19:43 -0500] faustroll: Loadx: but a simple kitchen init and then kitchen test in your cookbook gets you started
[2013-02-27 02:20:26 -0500] Loadx: yeah juist read the docs
[2013-02-27 02:20:31 -0500] Loadx: good benefits even without tests
[2013-02-27 02:20:43 -0500] Loadx: linting would be nice
[2013-02-27 02:20:56 -0500] faustroll: Loadx: tl;dr on the docs. Just try a kitchen init on a cookbook you are working on and then a kitchen test
[2013-02-27 02:21:42 -0500] Loadx: faustroll: does this work for a solo perspective?
[2013-02-27 02:21:47 -0500] Loadx: from*
[2013-02-27 02:21:50 -0500] faustroll: Loadx: linting, foodcritic, and vagrant run with output to stdout
[2013-02-27 02:21:57 -0500] faustroll: yes
[2013-02-27 02:22:09 -0500] Loadx: faustroll:  a few of my cookbooks look for nodes etc
[2013-02-27 02:22:39 -0500] faustroll: Loadx: You can make it as complicated as you want I think
[2013-02-27 02:22:42 -0500] Loadx: faustroll: like the django ones will specificly look for the db server and create the correct db configs
[2013-02-27 02:23:11 -0500] Loadx: I'll check it out and see how it goes
[2013-02-27 02:23:18 -0500] faustroll: I'm working on a custom cookbook right now, so I'm not working with nodes just yet
[2013-02-27 02:23:28 -0500] jollydev: Hello all
[2013-02-27 02:23:30 -0500] faustroll: I'll try that when I get there
[2013-02-27 02:23:59 -0500] brax4444: Thanks
[2013-02-27 02:24:43 -0500] jollydev: I seem to have screwed up my chef-server install and I'm at my whits end on how to get it working again
[2013-02-27 02:24:56 -0500] jollydev: I had been running 10.4
[2013-02-27 02:25:32 -0500] faustroll: Loadx: happy trails and happy testing
[2013-02-27 02:25:33 -0500] jollydev: and I accidentally did a gem update
[2013-02-27 02:25:57 -0500] jollydev: I now have 10.4 versions of everything installed now
[2013-02-27 02:26:12 -0500] jollydev: but chef can't connect to rabbitmq,
[2013-02-27 02:26:17 -0500] jeremyolliver: Oh god what. AWS OpsWorks uses chef version chef-0.9.15.3
[2013-02-27 02:27:10 -0500] jeremyolliver: It looks really nice, but I don't think I want to backport cookbooks to support an older version like that
[2013-02-27 02:27:41 -0500] jollydev: and rabbitmq is complaining about bad headers which seems to be related to amqp version, but I've made sure I have an old enough version
[2013-02-27 02:28:03 -0500] jollydev: any ideas how I can troubleshoot it further?
[2013-02-27 02:28:27 -0500] jeremyolliver: jollydev: Which version did you upgrade from?
[2013-02-27 02:29:42 -0500] jollydev: I accidently upgraded to chef-server 10.24 from 10.4 and chef to 11.4
[2013-02-27 02:30:35 -0500] jollydev: speaking of that, what version of the chef-server goes with chef 10.4? I just released that the numbers aren't always the same
[2013-02-27 02:33:21 -0500] jeremyolliver: you updated your client to 11.4?
[2013-02-27 02:33:26 -0500] jeremyolliver: client should be easy enough to roll back
[2013-02-27 02:34:07 -0500] jeremyolliver: I wouldn't have thought that updating server from 10.4 to 10.24 would be such a big jump
[2013-02-27 02:34:47 -0500] jeremyolliver: I've got my self-hosted on 10.24 running fine
[2013-02-27 02:39:05 -0500] jollydev: http://sprunge.us/WcPi
[2013-02-27 02:39:13 -0500] jollydev: thats all the versions I have installed now
[2013-02-27 02:40:17 -0500] jollydev: the error in the chef log is:
[2013-02-27 02:40:18 -0500] jollydev: [Tue, 26 Feb 2013 21:39:48 -0500] ERROR: Disconnected from the AMQP Broker (RabbitMQ) [Tue, 26 Feb 2013 21:39:48 -0500] INFO: Attempting to reconnect to the AMQP broker [Tue, 26 Feb 2013 21:39:48 -0500] FATAL: Connection to rabbitmq refused. Check your rabbitmq configuration and chef's amqp* settings
[2013-02-27 02:40:36 -0500] jeremyolliver: jollydev: Is rabbitmq running?
[2013-02-27 02:40:51 -0500] jollydev: yeah
[2013-02-27 02:41:05 -0500] jeremyolliver: jollydev: Also, there's an amqp password that gets set in /etc/chef/server.rb that could have been reset
[2013-02-27 02:41:31 -0500] jeremyolliver: either that file might have changed, or if you accidentally removed & re-installed ampq it might have that password anymore
[2013-02-27 02:41:38 -0500] jeremyolliver: *not have
[2013-02-27 02:42:44 -0500] jeremyolliver: jollydev: Note that several of the releases of chef-server especially recent ones have been for security updates
[2013-02-27 02:43:13 -0500] jeremyolliver: jollydev: I'd recommend getting on chef-server 10.24.0 as soon as feasible
[2013-02-27 02:46:52 -0500] jollydev: changing the password now just to be sure
[2013-02-27 02:48:10 -0500] jollydev: weird part is the rabbitmq log complains:
[2013-02-27 02:48:35 -0500] jollydev: =ERROR REPORT==== 26-Feb-2013::21:20:22 === exception on TCP connection <0.1663.0> from 127.0.0.1:32772 {bad_header,<<65,77,81,80,0,0,9,1>>}
[2013-02-27 02:48:48 -0500] jollydev: then it closes the connection
[2013-02-27 02:49:23 -0500] jollydev: which this page makes it seem that it's because of version miss matches:
[2013-02-27 02:49:24 -0500] jollydev: http://rubydoc.info/github/ruby-amqp/amqp/master/file/docs/RabbitMQVersions.textile
[2013-02-27 02:53:27 -0500] jollydev: still not working....
[2013-02-27 02:53:33 -0500] jollydev: I have no idea what it could be
[2013-02-27 05:42:16 -0500] Drewzar: Will the git resource not not :sync a repo if the destination dir isn't empty or isn't a new sub dir?
[2013-02-27 05:42:48 -0500] taec: Is there any easy way to figure out where a node attribute came from? (chef 10.x) - even as high level as this came frmo a databag or from a role?
[2013-02-27 05:43:32 -0500] Drewzar: You can log it to the chef run.
[2013-02-27 05:44:20 -0500] Drewzar: http://wiki.opscode.com/display/chef/Resources#Resources-Log
[2013-02-27 05:44:28 -0500] taec: Doesn't that presuppose that you know where it's being set? :)
[2013-02-27 05:45:00 -0500] Drewzar: haha yeah, sorry read that wrong.
[2013-02-27 05:45:40 -0500] Drewzar: I guess it would depend on what the attribute is.
[2013-02-27 05:46:01 -0500] miah: attributes are merged based on precedence
[2013-02-27 05:47:23 -0500] miah: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/ & http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2013-02-27 05:47:43 -0500] miah: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_persistence.html
[2013-02-27 05:48:30 -0500] taec: miah: I'm not sure that's helping me figure out where the attribute came from once it's there unless I'm missing something
[2013-02-27 05:49:34 -0500] miah: im not sure there is going to be any historical record of that
[2013-02-27 05:50:06 -0500] miah: its either a automatic attribute, something defined via node.set, or merged in through environments/roles/cookbook attributes.
[2013-02-27 05:50:51 -0500] taec: Unfortunately, that's a large corpus of things to check
[2013-02-27 05:51:01 -0500] taec: but sounds like that's what I need to do
[2013-02-27 05:52:48 -0500] taec: Even if there was some way of downloading the whole kit and kaboodle and I could grep through it would be useful.
[2013-02-27 05:54:25 -0500] Drewzar: DEBUG: git[/opt/icinga/libexec] checkout destination /opt/icinga/libexec already exists or is a non-empty directory <---any clean way around this?
[2013-02-27 05:56:08 -0500] Drewzar: checkout to another location and link in to /opt/icinga/libexec ?
[2013-02-27 05:59:29 -0500] miah: ya. this is why it can be an anti-pattern to use 'node.set'. i try to restrict my attribute settings in roles/environments to override only, and only set 'default' in cookbooks
[2013-02-27 05:59:39 -0500] miah: that makes it a bit easier to map out how your attributes will end up
[2013-02-27 06:00:13 -0500] miah: everybody has their own methods though =)
[2013-02-27 06:00:41 -0500] miah: if you make it part of your procedure to note attribute changes you'll end up with that documentation
[2013-02-27 06:00:48 -0500] miah: maybe make it part of your deployment process
[2013-02-27 06:03:09 -0500] taec: I'm pretty sure this is either being set in a data_bag or in a role
[2013-02-27 06:03:44 -0500] taec: It doesn't look like we're using node.set anywhere. unfortunately, there are a few data bags to go through, including environment specific ones and quite a few roles to go through also.
[2013-02-27 06:43:05 -0500] log1kal: hrmm
[2013-02-27 06:43:45 -0500] log1kal: anyone got a quick way to programmatically get all of a nodes attributes via knife?
[2013-02-27 06:44:20 -0500] log1kal: knife node show nodename -l -f j gives me... everything
[2013-02-27 06:48:45 -0500] log1kal: derp. knife node show nodename -a node -f j
[2013-02-27 06:52:44 -0500] rb1980: hi chefs, anyone up at this hour?
[2013-02-27 06:52:55 -0500] rb1980: I have a quick question on cookbook_file
[2013-02-27 06:53:47 -0500] rb1980: can I create an arbitrary dir under <cookbook>/file/foo
[2013-02-27 06:54:01 -0500] rb1980: and refer to files in there in the source line like:
[2013-02-27 06:54:07 -0500] rb1980: source "foo/somefile"
[2013-02-27 07:01:58 -0500] silk: file/default/foo
[2013-02-27 07:05:00 -0500] silk: default can be replaced with role and nmode specific matches as per http://docs.opscode.com/essentials_cookbook_files_specificity.html
[2013-02-27 07:05:28 -0500] silk: sorry not role, platform
[2013-02-27 07:06:10 -0500] rb1980: ah, so has to be under the file specifity rules still, eg default. got it
[2013-02-27 07:13:13 -0500] rb1980: thanks
[2013-02-27 08:30:38 -0500] alex___: good morning
[2013-02-27 08:32:02 -0500] woltage: alex___: morning
[2013-02-27 08:55:34 -0500] alex___: is it possible to check if a group already exists?
[2013-02-27 08:57:35 -0500] alex___: group provider has a var called @group_exists but the resource doesn't
[2013-02-27 09:01:45 -0500] woltage: alex___: only_if 'groups |grep "group" -q'
[2013-02-27 09:02:05 -0500] alex___: as a command
[2013-02-27 09:02:07 -0500] alex___: o oke
[2013-02-27 09:02:18 -0500] alex___: yeah thats also a possibility
[2013-02-27 09:02:47 -0500] alex___: only one problem
[2013-02-27 09:02:49 -0500] woltage: alex___: don't know if there is abstractable version :)
[2013-02-27 09:03:06 -0500] alex___: when i type groups
[2013-02-27 09:03:19 -0500] woltage: cat /etc/groups work too
[2013-02-27 09:03:19 -0500] alex___: are are missing a few
[2013-02-27 09:03:35 -0500] woltage: s/groups/group/
[2013-02-27 09:03:54 -0500] alex___: what?
[2013-02-27 09:04:01 -0500] alex___: thats stille a command?
[2013-02-27 09:04:15 -0500] woltage: now s/groups/group/ means replace ;)
[2013-02-27 09:04:35 -0500] woltage: only_if 'cat /etc/group |grep "group" -q'
[2013-02-27 09:04:37 -0500] alex___: o
[2013-02-27 09:04:38 -0500] alex___: no
[2013-02-27 09:04:49 -0500] alex___: i ment that is i type group in command
[2013-02-27 09:05:01 -0500] alex___: i am missing the group i have created
[2013-02-27 09:05:10 -0500] alex___: it is not vissible there in solaris
[2013-02-27 09:05:35 -0500] alex___: only see these :root bin daemon sys adm disk wheel
[2013-02-27 09:05:46 -0500] woltage: Ok, ei don't know about solaris. But I think there is group file somewhere?
[2013-02-27 09:06:25 -0500] alex___: yeah shout be
[2013-02-27 09:06:28 -0500] alex___: :P
[2013-02-27 09:06:33 -0500] woltage: groups show only users, groups. My bad :)
[2013-02-27 09:06:55 -0500] alex___: what is this doing: group_info = Etc.getgrnam(@new_resource.group_name)
[2013-02-27 09:07:05 -0500] alex___: o oke
[2013-02-27 09:07:14 -0500] alex___: yeah i want al groups :P
[2013-02-27 09:07:24 -0500] woltage: just use /etc/group?
[2013-02-27 09:08:14 -0500] woltage: "The file /etc/group file holds group information." from Solaris manual.
[2013-02-27 09:08:37 -0500] alex___: getent group
[2013-02-27 09:08:42 -0500] alex___: that was it
[2013-02-27 09:09:00 -0500] woltage: :)
[2013-02-27 09:09:18 -0500] alex___: that also gives you ldap groups
[2013-02-27 09:09:33 -0500] woltage: ok, never used.
[2013-02-27 09:10:01 -0500] woltage: This is why I love Unix systems. Everyday you learn somethign new :)
[2013-02-27 09:10:08 -0500] alex___: heheheheh
[2013-02-27 09:10:19 -0500] alex___: i just asked it at the guy behind me
[2013-02-27 09:10:32 -0500] alex___: getent also returns ldap groups
[2013-02-27 09:11:09 -0500] woltage: not working @ OSX :(
[2013-02-27 09:11:26 -0500] alex___: ah to bad :P
[2013-02-27 09:11:35 -0500] alex___: linux and solaris works just fine
[2013-02-27 09:11:39 -0500] zts: alex___: taking a step back, why do you want to check if a group already exists?
[2013-02-27 09:11:54 -0500] woltage: Yeah, tried at RHEL and that is working corretly
[2013-02-27 09:11:57 -0500] alex___: not really the group
[2013-02-27 09:12:04 -0500] alex___: but more the gid
[2013-02-27 09:12:35 -0500] alex___: if it already exists in my system with another name i want to use another gid
[2013-02-27 09:13:37 -0500] zts: alex___: ah I see - so you have a gid you'd prefer to use, but you have not yet been able to standardise gid's across all systems, so for some you would like to use the next available gid instead?
[2013-02-27 09:14:01 -0500] alex___: yes indeed
[2013-02-27 09:14:09 -0500] alex___: we just started using chef
[2013-02-27 09:14:20 -0500] alex___: and we are implementing it in little steps
[2013-02-27 09:15:19 -0500] zts: understood, and renumbering things is a big job
[2013-02-27 09:15:38 -0500] zts: (of course, the more things you create with the wrong id's, the bigger the job gets :)
[2013-02-27 09:15:44 -0500] alex___: hehehehe i guess so also little bit new in that world :P
[2013-02-27 09:15:51 -0500] zts: you can look at node['etc']['group'] to see what groups are already on the system
[2013-02-27 09:15:53 -0500] alex___: also true
[2013-02-27 09:16:03 -0500] alex___: ah oke
[2013-02-27 09:16:05 -0500] alex___: ohai data?
[2013-02-27 09:16:06 -0500] zts: let me see how to search that by gid
[2013-02-27 09:16:08 -0500] zts: yeah
[2013-02-27 09:18:33 -0500] alex___: humm i think i am going to change my way
[2013-02-27 09:18:51 -0500] alex___: i am going to check if it already exists which is fine
[2013-02-27 09:19:10 -0500] alex___: but if it doesn't but gid is already taken give an error
[2013-02-27 09:19:11 -0500] zts: okay, if you did want to check for just the gid, this works: node['etc']['group'].select {|k,v| v['gid'] == 113 }
[2013-02-27 09:19:30 -0500] alex___: ah thanks
[2013-02-27 09:19:33 -0500] zts: if a group with gid 113 exists, that will be returned by that - if not, it will return []
[2013-02-27 09:19:43 -0500] alex___: still have to check so i will use it :)
[2013-02-27 09:20:06 -0500] alex___: return an empty array?
[2013-02-27 09:21:13 -0500] zts: yeah, if you make it this it will return nil instead: node['etc']['group'].select {|k,v| v['gid'] == 113 }.nil
[2013-02-27 09:21:39 -0500] alex___: ah oke
[2013-02-27 09:21:46 -0500] alex___: also new to ruby
[2013-02-27 09:21:56 -0500] alex___: xD
[2013-02-27 09:21:59 -0500] zts: Ruby's select method on hashs (Hash#select) runs a bit of code for each item in the hash, and returns you all the items where that code was true
[2013-02-27 09:22:20 -0500] zts: so if two groups on your system had gid 113, they would both be returned by the first call
[2013-02-27 09:22:25 -0500] alex___: o i can read it
[2013-02-27 09:22:34 -0500] alex___: but dont yet think ruby
[2013-02-27 09:22:35 -0500] alex___: :P
[2013-02-27 09:22:41 -0500] zts: yeah, it takes time :)
[2013-02-27 09:23:05 -0500] alex___: started using it two weeks ago so :P
[2013-02-27 09:23:28 -0500] alex___: i think i am on the good way
[2013-02-27 09:26:34 -0500] alex___: NoMethodError: undefined method `nil' for []:Array
[2013-02-27 09:27:44 -0500] alex___: .empty?
[2013-02-27 09:32:33 -0500] alex___: .any? will do :P
[2013-02-27 09:50:03 -0500] Belieber: hi, what is this called? http://bpaste.net/show/4oKBZkF6RyVsxA6DlL2w/
[2013-02-27 09:50:15 -0500] Belieber: it doesn't look like a function since it doesn't use def
[2013-02-27 09:50:25 -0500] Belieber: I don't know much ruby
[2013-02-27 09:50:41 -0500] denniswisnia: hey guys, which way you choose for the HTTPS Webui for chef?
[2013-02-27 09:50:50 -0500] denniswisnia: and which ports are needed open on the chef-server?
[2013-02-27 09:50:58 -0500] denniswisnia: to enable a firewall
[2013-02-27 09:52:38 -0500] zuazo: Belieber: a template resource, usgin Chef DSL
[2013-02-27 10:47:08 -0500] zts: alex___: ah yes, sorry!
[2013-02-27 12:42:46 -0500] martha: hi.  does anyone have any sizing recommendation for setting up a chef server?
[2013-02-27 12:46:02 -0500] kechagia: martha: I usually use 5gb / and 1-2gb memory. (+ additional space for e.g. tar.gz files you want to store there)
[2013-02-27 12:46:32 -0500] martha: kechagia:  how many cpus?
[2013-02-27 12:47:30 -0500] kechagia: I use 2, but I guess 1 would also work quite well.
[2013-02-27 12:47:34 -0500] kechagia: (2 cores)
[2013-02-27 12:47:42 -0500] kechagia: in total
[2013-02-27 12:48:13 -0500] kechagia: if you have hunderts of machines and ssl, you might scale it up a little
[2013-02-27 12:50:25 -0500] aruntomar: hi! any ideas how can i provision and bootstrap instances on aws vpc. i was able to provision the servers via knife ec2 server create <options> but it could ssh and bootstrap it, as they only had pvt. ip.
[2013-02-27 12:50:54 -0500] kechagia: nacer: chef-client and chef-server. rubygems (for chef-server) is still 0.10 and the apt repositories too. I find it quite inconvenient to only have dpkg's because it makes automatic upgrades so hard. I also would kinda feel better, if i could use the systems postgres/couchdb/jre, instead of the bundled one.
[2013-02-27 12:51:06 -0500] aruntomar: "/s/could/could not/"
[2013-02-27 12:53:04 -0500] kechagia: I feel like the repositories are not very well maintained, as for quantal-0.10 there's still unupdated dependencies (several ruby-libs are now available in the ubuntu repos, and they conflict with the opscode ones)
[2013-02-27 13:15:06 -0500] geekbri: Anybody here using the ulimits cookbook from the community site?  Is it any good?
[2013-02-27 14:14:23 -0500] threesome: When I install chef-client using "curl -L https://www.opscode.com/chef/install.sh | sudo bash" as on their website, why do I get chef-client 10.16.4 rather than the latest 11.4.0?
[2013-02-27 14:19:34 -0500] drrk: Hi all, i'm looking at doing some migration work, is there anythign I need to be aware of if I have both chef-client and chef-solo runnign on the same machine, but not effetcign the same files?
[2013-02-27 14:20:55 -0500] sabooky: Quick question. What is the best way to handle multi-step tasks that involve creation of a temp file in an idempotent way? For example: generate .property file, run command passing in property file.
[2013-02-27 14:21:31 -0500] sabooky: I can wrap the two resource calls in an "if" statement, but wondering if that's the recommended approach
[2013-02-27 14:22:30 -0500] sabooky: In my case it's not just one temp file.. it's many (scripting websphere install/configure)..
[2013-02-27 14:22:50 -0500] geekbri: Is there a way to include a resource from another cookbook without calling include_recipe on the default recipe for that cookbook?
[2013-02-27 14:24:13 -0500] sabooky: geekbri: try marking the other cookbook as a dependency in the metadata.rb
[2013-02-27 14:24:31 -0500] geekbri: sabooky: I did, I used recommends, but it still didn't seem to work as i expected.
[2013-02-27 14:27:29 -0500] sabooky: geekbri: try 'depends'
[2013-02-27 14:27:39 -0500] sabooky: geekbri: not sure it makes a diff, but worth a shot
[2013-02-27 14:27:46 -0500] geekbri: Yeah i'll give it a shot and see what happens
[2013-02-27 14:28:19 -0500] sabooky: geekbri: http://docs.opscode.com/config_rb_metadata.html
[2013-02-27 14:29:09 -0500] geekbri: Yeah it looks like depends is needed whenever the an LWR is used from another cookbook
[2013-02-27 14:29:38 -0500] geekbri: which is a bit odd, because it seems like you could recommend something but not require it.
[2013-02-27 14:32:07 -0500] iartarisi: hi! Shouldn't dependant cookbooks guarantee that a service is running? i.e. if I'm depending on the mysql cookbook and then try to run a mysql command, should I check in my own recipe that a mysql server is running and start it otherwise?
[2013-02-27 14:33:08 -0500] geekbri: iartarisi: Sounds like your cookbook should call out to the mysql service resource and set its actions to :start and :enable maybe :)
[2013-02-27 14:33:31 -0500] geekbri: iartarisi: or alternatively, include the recipe in the mysql cookbook that does that
[2013-02-27 14:35:35 -0500] iartarisi: geekbri: ah, you mean include_recipe "mysql::server". That's better, thanks!
[2013-02-27 14:38:27 -0500] geekbri: iartarisi: indeedy do :)
[2013-02-27 14:38:29 -0500] Leitz: What's the knife command to dump the environment file in json format?
[2013-02-27 14:38:31 -0500] geekbri: I should have just specifically said that
[2013-02-27 14:39:16 -0500] geekbri: Leitz: knife environment show <env_name> -Fj
[2013-02-27 14:45:00 -0500] Leitz: geekbri, thanks! I mis-typed; needed the node's information, but your command works with "node <node>"
[2013-02-27 14:45:31 -0500] geekbri: -Fj will work as a formatter for all the "show" commands
[2013-02-27 14:49:00 -0500] c0ff33: good morning
[2013-02-27 14:49:40 -0500] c0ff33: rabbitmq appears to lose my chef user on reboot. seems odd. I then add the chef user back in via the command line and it gets removed on the next reboot. thoughts?
[2013-02-27 15:29:08 -0500] dotslash: I'm getting a lot of Cannot allocate memory issues with Chef Client 11 that I didn't get before with 10. Is the memory usage that different?
[2013-02-27 15:30:10 -0500] dotslash: Particularly using the package command on RH.
[2013-02-27 15:37:15 -0500] dotslash: Chef Client seems to be using over 1 gig. Is that normal?
[2013-02-27 15:41:55 -0500] gamafranco: hi
[2013-02-27 15:42:30 -0500] gamafranco: I want to add a user to the sudoers from within a recipe
[2013-02-27 15:43:09 -0500] gamafranco: what's the best way to achieve this?
[2013-02-27 15:43:24 -0500] geekbri: gamafranco: should be able to use this cookbook: http://community.opscode.com/cookbooks/sudo
[2013-02-27 15:45:09 -0500] tduffield: gamafranco: I will second geekbri's recommendation
[2013-02-27 15:45:31 -0500] geekbri: I am using the cookbook and it's worked fine for me.
[2013-02-27 15:46:02 -0500] gamafranco: geekbri: thanks. The examples in there show to do it from a role. I'm not sure how to do it from a recipe.
[2013-02-27 15:46:23 -0500] gamafranco: geekbri: you've done it from a role or recipe?
[2013-02-27 15:46:41 -0500] bibhu: i am getting the folowing error --> * service[tomcat]: unable to locate the init.d script
[2013-02-27 15:46:47 -0500] bibhu: can someone help me
[2013-02-27 15:47:16 -0500] bibhu: i am trying to add tomcat as service
[2013-02-27 15:47:21 -0500] geekbri: gamafranco: Oh sorry, yes I do it from a role file. My memory is faulty on the specifics of that cookbook, but if they expose a resource for it then you shoudl be able to do it from a CB
[2013-02-27 15:47:47 -0500] gamafranco: geekbri: you're right. let me dig into that code. thanks
[2013-02-27 15:48:56 -0500] geekbri: gamafranco: so you should be able to "depends" on the sudo cookbook, then do something similar to their default.rb recipe.   https://github.com/opscode-cookbooks/sudo/blob/master/recipes/default.rb
[2013-02-27 15:49:48 -0500] r3vamp: I'm working with chef server 11, and I managed to change the nginx ssl port to 8443 (from the default 443). However, when uploading cookbooks through knife it still tries to upload through the 443 port. Does anyone know why this is? Is there an attribute I need to set that I'm not? More on this issue: http://tickets.opscode.com/browse/CHEF-3853
[2013-02-27 15:51:16 -0500] dotslash: r3vamp: Assuming you changed your knife.rb to use new port?
[2013-02-27 15:51:30 -0500] r3vamp: dotslash: Yeah my other knife commands work fine
[2013-02-27 15:51:43 -0500] znDuff: Heh -- coworker next to me has that exact same issue
[2013-02-27 15:51:48 -0500] znDuff: (and for some reason I can't reproduce it).
[2013-02-27 15:55:12 -0500] j^2: running the nagios cookbook, it seems i'm getting "NRPE: Unable to read output" on my clients, useally due to sudo or something but that seems to check out. Any advice?
[2013-02-27 15:55:55 -0500] judd7: any changes to the Report Handler stuff from Chef 10 to Chef 11?
[2013-02-27 15:56:03 -0500] judd7: Still need the chef_handler cookbook?
[2013-02-27 15:56:05 -0500] fooJBar: r3vamp: I remember reading about this, the bottom line was that changing the nginx SSL port attribute is not properly propagating to all the right places yet. So you're stuck with 443 afaik.
[2013-02-27 15:58:35 -0500] dotslash: I get "had an error: Errno::ENOMEM: Cannot allocate memory - fork(2)" when ever I try to do something with package on a machine that has 2 Gigs of ram or less. Didn't seem to be a problem until I upgraded to Chef 11. Any ideas?
[2013-02-27 15:59:06 -0500] gamafranco: geekbri: going to try,thanks
[2013-02-27 15:59:43 -0500] fooJBar: r3vamp: see similar issues http://tickets.opscode.com/browse/CHEF-3849
[2013-02-27 16:00:14 -0500] r3vamp: fooJBar: Aye, I've seen this. Was just wondering if anyone here had found a solution and hadn't yet posted it on any of the issues
[2013-02-27 16:00:27 -0500] r3vamp: fooJBar: Thanks anyways
[2013-02-27 16:38:50 -0500] faustroll: jtimberman: I understand you are the test-kitchen 0.7 expert?
[2013-02-27 16:39:22 -0500] faustroll: jtimberman: are you using test-kitchen only for testing solo runs?
[2013-02-27 16:40:20 -0500] faustroll: jtimberman: How are you testing Hosted Chef in an analogous way? or are you?
[2013-02-27 16:41:37 -0500] faustroll: what are the test setups that folks are using for Hosted Chef?
[2013-02-27 16:41:44 -0500] j^2: so the nagios build defaults to 3.2.0; what's the best way to get it updated?
[2013-02-27 16:42:04 -0500] j^2: i dont see a "creates" in the source_server.rb file....
[2013-02-27 16:42:37 -0500] j^2: schisamo: ping :)
[2013-02-27 16:44:39 -0500] faustroll: schisamo: is test-kitchen 1.0 better afforded for full Hosted Chef testing?
[2013-02-27 16:48:02 -0500] aruntomar: dotslash: i saw the same error, but at the time my system had 512 mb ram. but chef server 11 installed and started, but i was not able to get the web interface. after that i upgraded my instance to 1 gb ram, and now everything is running smoothly.
[2013-02-27 16:49:35 -0500] dotslash: aruntomar: I'm seeing this just on the client. The server is running fine.  I'm getting it with  Ec2 instances of t1.micro and m1.small. It seems to work if I go larger than that, but I need to be able to use chef with the small instances too.
[2013-02-27 16:50:38 -0500] aruntomar: dotslash: k, give me a min, i'm bootstrapping few instances on aws primarily m1.small, will let you know shortly.
[2013-02-27 16:51:32 -0500] dotslash: aruntomar: Thanks. I can install chef-client, but I can't seem to run any recipe that uses the package command.
[2013-02-27 16:53:54 -0500] dotslash: well can't run without the memory error.
[2013-02-27 16:55:38 -0500] ghatak1: Hi, I stared to get Response:  Invalid signature for user or client  error on my system. It was working till yesterday. Today I am getting this error. Key has not changed, what could be wrong ?
[2013-02-27 16:55:46 -0500] znDuff: dotslash: Just out of curiosity -- know which package provider is in use on your system?
[2013-02-27 16:56:34 -0500] dotslash: znDuff: It is Redhat, so I'm assuming RPM or Yum. Is there a way to tell exactly what Chef is trying to use under the covers?
[2013-02-27 16:58:25 -0500] faustroll: znDuff: it will be using yum, i think
[2013-02-27 16:59:03 -0500] faustroll: dotslash: how are you testing this?
[2013-02-27 17:00:42 -0500] dotslash: faustroll: Simple recipe that  just installs an rpm
[2013-02-27 17:00:58 -0500] dotslash: faustroll: removes some rpms and installs one.
[2013-02-27 17:02:33 -0500] dotslash: faustroll: Here is what we are doing http://pastebin.com/3J7rKCzZ
[2013-02-27 17:03:04 -0500] schisamo: faustroll: not sure I follow. TK 1.0's sweet spot is testing indvidual cookbooks in isolation across 1..n platforms. REALLY nice for library cookbook maintainers.
[2013-02-27 17:03:12 -0500] dotslash: faustroll: It always fails when installing the package and it usually fails while trying to remove the packages
[2013-02-27 17:04:03 -0500] faustroll: schisamo: I see, I think
[2013-02-27 17:04:49 -0500] faustroll: schisamo: I am using test-kitchen to develop a cookbook, and am finding it useful
[2013-02-27 17:05:55 -0500] faustroll: schisamo: My next task is going to be cleaning up and testing a Hosted Chef infrastructure
[2013-02-27 17:06:18 -0500] schisamo: faustroll: awesome! you will have to thank fnichol for all his awesome work!
[2013-02-27 17:06:59 -0500] faustroll: schisamo: I'm wondering how people are testing their full, company-wide Chef setups
[2013-02-27 17:07:45 -0500] schisamo: faustroll: I think more than you think!  especially companies like Riot Games /cc ivey reset
[2013-02-27 17:07:56 -0500] faustroll: schisamo: Indeed, re: awesome work. I'm really impressed with all your work.
[2013-02-27 17:08:27 -0500] schisamo: faustroll: really you end up testing each cookbook in isolation...then you can feel confident things will work as expected when you integrate multiple cookbooks together.
[2013-02-27 17:09:04 -0500] schisamo: faustroll: just to be clear it isn't all my work :)  I am just an outspoken consumer of the community's great tools!
[2013-02-27 17:09:12 -0500] faustroll: schisamo: yes, the isolation makes sense. Part of the testing ethos.
[2013-02-27 17:09:58 -0500] faustroll: schisamo: don't worry. I've been hacking open source software for ages. We are standing on each others shoulders
[2013-02-27 17:10:25 -0500] faustroll: schisamo: your whole group deserves praise
[2013-02-27 17:12:17 -0500] yruss972: Hi- I'm having a strange problem. chef-solo is not seeing all of the data bag items on a newly provisioned server. Other servers pulling the same git repository are having no problems. Any ideas?
[2013-02-27 17:14:56 -0500] jtimberman: faustroll: re testing a multi-node infrastructure with a Chef Server, I'd probably use environments and then actually launch [vm, instance, whatever] systems that use the chef server.
[2013-02-27 17:15:26 -0500] jtimberman: faustroll: test kitchen is primarily used for "does this cookbook work in isolation well enough that i can rely on it to behave itself when i compose something else with it"
[2013-02-27 17:18:06 -0500] vegardx_: So, chef starts, and it works, but the init-scripts says it fails to start. The process is spawned and running.
[2013-02-27 17:18:10 -0500] faustroll: jtimberman: thanks. that makes immediate sense. And I am using it that way now to develop a solid custom cookbook
[2013-02-27 17:20:15 -0500] faustroll: jtimberman: my next task will be to audit/test a company wide multi-node Hosted Chef infrastructure
[2013-02-27 17:22:30 -0500] faustroll: jtimberman: I'm looking for thoughts on best practices, well trodden paths that integration test and entire multi-node setup with environments
[2013-02-27 17:23:11 -0500] faustroll: jtimberman: the infrastructure is in place. It sorely needs some auditing and testing however.
[2013-02-27 17:24:20 -0500] faustroll: dotslash: sounds like flaky ec2 behavior?
[2013-02-27 17:25:23 -0500] faustroll: dotslash: if it is that indeterministic?
[2013-02-27 17:26:35 -0500] jtimberman: faustroll: not much in the way of best practices, but you might look into chef-workflow - http://github.com/chef-workflow
[2013-02-27 17:26:51 -0500] faustroll: jtimberman: thanks. will check it out now
[2013-02-27 17:28:27 -0500] dotslash: faustroll: well it always runs out of memory if doing something with the packagesjust at different points.
[2013-02-27 17:31:52 -0500] faustroll: dotslash: that sounds so annoying.
[2013-02-27 17:32:48 -0500] threetee: Since we're talking about testing, I'm curious about how you all approach local testing and development. My team operates several Chef deployments for various projects. The chef developers all develop on their local workstations using vagrant VMs to test cookbooks. Currently we're (ab)using Hosted Chef organizations to give each developer a sandboxed chef server to use when testing cookbooks, but devs have been complaining about 
[2013-02-27 17:33:09 -0500] threetee: sorry for wall of text btw, that ended up being longer than I thought
[2013-02-27 17:33:30 -0500] faustroll: jtimberman: that looks like a good direction to go. re: chef-workflow
[2013-02-27 17:33:31 -0500] geekbri: threetee: fnichols has a nice little utility for easily creating and destroy chef servers if i remember correctly.  Don't know if it does chef11 yet
[2013-02-27 17:33:46 -0500] geekbri: threetee: https://github.com/fnichol/knife-server
[2013-02-27 17:34:47 -0500] threetee: geekbri: thanks, I'll check that out
[2013-02-27 17:35:19 -0500] faustroll: threetee: let's chat more about testing. :)
[2013-02-27 17:35:54 -0500] faustroll: geekbri: thanks as well. am checking it/
[2013-02-27 17:36:09 -0500] threetee: faustroll: sure thing, sounds like we are at similar points in our rollout
[2013-02-27 17:36:21 -0500] faustroll: so, who is using git-workflow?
[2013-02-27 17:36:21 -0500] geekbri: testing?  Isn't that what your customers do for free? ;)
[2013-02-27 17:36:35 -0500] threetee: indeed :)
[2013-02-27 17:36:42 -0500] zts: geekbri: no no, that's monitoring
[2013-02-27 17:36:46 -0500] faustroll: geekbri: yes. that too
[2013-02-27 17:37:08 -0500] geekbri: zts: so why am i paying pagerduty ?!?1
[2013-02-27 17:37:08 -0500] threetee: faustroll: we are using hubflow (http://datasift.github.com/gitflow/)
[2013-02-27 17:37:55 -0500] threetee: we were using git-flow, but hubflow makes it even easier
[2013-02-27 17:38:20 -0500] threetee: and I also discovered recently that it works equally well with gitlab
[2013-02-27 17:38:57 -0500] faustroll: threetee: lol. I meant chef-workflow. need coffee. ;)
[2013-02-27 17:39:04 -0500] geekbri: spork is another popular workflow app for cookbook development and what not
[2013-02-27 17:39:13 -0500] faustroll: who is using chef-workflow?
[2013-02-27 17:39:22 -0500] geekbri: i haven't looked at chef-workflow, totally unfamiliar with it
[2013-02-27 17:40:05 -0500] faustroll: geekbri: jtimberman just pointed it out to me. I'm going to try it.
[2013-02-27 17:40:22 -0500] geekbri: one could argue he knows a think or two about chef :)
[2013-02-27 17:40:30 -0500] geekbri: s/think/thing
[2013-02-27 17:40:50 -0500] threetee: faustroll: I've gone through the chef-workflow hassle-free trial (https://github.com/chef-workflow/chef-workflow/wiki/hassle-free-trial)
[2013-02-27 17:40:57 -0500] faustroll: jtimberman: chef-workflow users? are you one of them?
[2013-02-27 17:41:10 -0500] faustroll: threetee: I saw that. lol
[2013-02-27 17:41:19 -0500] faustroll: threetee: and your assessment?
[2013-02-27 17:41:34 -0500] threetee: it did what it says it does, but when I began to integrate it into my actual chef deploys I ran into all kinds of gem dependency issues
[2013-02-27 17:41:49 -0500] threetee: we are using Chef 11 and bundler
[2013-02-27 17:42:09 -0500] threetee: to be fair, that's not the only bit of software that I've had gem dependency issues with
[2013-02-27 17:42:34 -0500] threetee: a huge problem for me right now is that I can't use bundler to install chef 11.4.0 and berkshelf together
[2013-02-27 17:43:16 -0500] threetee: chef 11.0.0 is the most recent chef gem version that will install happily with berkshelf, and there are all kinds of problems with knife in that version
[2013-02-27 17:43:49 -0500] jtimberman: faustroll: i haven't used it
[2013-02-27 17:44:26 -0500] threetee: and adding vagrant to the picture brings an entirely new set of dependency conflicts :(
[2013-02-27 17:44:45 -0500] threetee: it's a mess
[2013-02-27 17:45:07 -0500] threetee: actually, I'm wondering if anyone has worked around that and gotten chef 11.4.0 and berkshelf to coexist when using bundler
[2013-02-27 17:48:52 -0500] faustroll: jtimberman: thanks
[2013-02-27 17:50:25 -0500] threetee: faustroll: sorry, I went off on a tangent theremy assessment was that chef-workflow seems to be a good tool for doing what I want to do, which is to use jenkins to spin up a set of VMs with arbitrary roles so I can do integration/functional testing on a fully-provisioned environment
[2013-02-27 17:50:43 -0500] threetee: once I can get past the gem dependency issues, I'll roll it into our production workflow
[2013-02-27 17:51:16 -0500] faustroll: threetee: makes sense. I found the tangent interesting as well.
[2013-02-27 17:51:48 -0500] threetee: yeah I'm really frustrated with gem dependency issues right now
[2013-02-27 17:52:16 -0500] faustroll: threetee: I'm not there yet, but I appreciate the heads up re: berkshelf, knife, chef 11.4
[2013-02-27 17:53:23 -0500] justincampbell: fwiw, berkshelf is removing its dependency on chef very shortly /cc faustroll threetee
[2013-02-27 17:53:33 -0500] faustroll: threetee: gem dependencies issues in the tools we are using to solve dependency and other issues on deployments
[2013-02-27 17:54:22 -0500] threetee: justincampbell: excellent, I've gathered from github that it was moving in that direction
[2013-02-27 17:54:23 -0500] justincampbell: version 1.2.0.rc1 removes it
[2013-02-27 17:54:29 -0500] justincampbell: install with --pre
[2013-02-27 17:54:40 -0500] justincampbell: or set dep in gemfile to 1.2.0.rc1
[2013-02-27 17:54:47 -0500] threetee: jcampbell: awesome, will try that today
[2013-02-27 17:55:41 -0500] threetee: faustroll: on the testing front, at the moment we're writing unit tests on all of our in-house cookbooks with rspec/chefspec, and some functional tests with minitest. I'm playing with cucumber-chef a bit for functional tests as well.
[2013-02-27 17:57:10 -0500] faustroll: threetee: yes. I'm using chefspec and minitest with test-kitchen for cookbook dev.
[2013-02-27 17:57:47 -0500] faustroll: threetee: I have not gone to cuc yet.
[2013-02-27 17:58:10 -0500] threetee: faustroll: we also use test-kitchen on in-house cookbooks
[2013-02-27 17:58:28 -0500] threetee: which implies foodcritic for linting, and knife cookbook test for syntax testing
[2013-02-27 17:59:08 -0500] faustroll: yes
[2013-02-27 18:01:10 -0500] threetee: faustroll: for integration testing of an entire repo, we don't have that automated yet, but as I mentioned earlier, we're looking towards chef-workflow to help with that. for now, we rely on local developer testing via vagrant VMs, more testing when the changes get integrated into dev, and formal QA on stage/prod
[2013-02-27 18:01:57 -0500] threetee: I'll be very happy once we get automated integration testing into place though
[2013-02-27 18:03:16 -0500] faustroll: threetee: thanks. makes sense. yes. I will make this company very happy when I set up some measure of automated integration testing of complex scenarios
[2013-02-27 18:03:26 -0500] maek: jtimberman: sorry to be a pest. In the openssl cookbook https://github.com/opscode-cookbooks/openssl/commit/7f5b84a942f015191ade6badf65a49f1fe7b05b1 this commit is 4 months old but community still has a version with no name in the metadata. Anyway to get that updated?
[2013-02-27 18:16:05 -0500] aob: Hello chefs
[2013-02-27 18:16:16 -0500] freezey: he may have a question
[2013-02-27 18:16:17 -0500] freezey: lets see
[2013-02-27 18:16:48 -0500] aob: I'm trying to make a roux sauce...
[2013-02-27 18:17:01 -0500] aob: freezey: can you help?
[2013-02-27 18:17:10 -0500] freezey: nah i cant cook
[2013-02-27 18:17:11 -0500] freezey: lol
[2013-02-27 18:17:20 -0500] aob: srsly - I have a question yes
[2013-02-27 18:17:27 -0500] freezey: shoooooot
[2013-02-27 18:17:28 -0500] aob: about the windows_registry lwrp
[2013-02-27 18:17:48 -0500] freezey: i cant help that
[2013-02-27 18:17:48 -0500] freezey: lol
[2013-02-27 18:17:56 -0500] aob: So.. I'm trying to set capslock as control on windows
[2013-02-27 18:18:04 -0500] aob: I've found teh correct registry setting
[2013-02-27 18:18:09 -0500] doomviking: roux requires patience. much patience.
[2013-02-27 18:18:11 -0500] aob: and I've set it manually, and it works
[2013-02-27 18:18:44 -0500] aob: however, it seems like the setting required is a binary value (but as hexadecimal)
[2013-02-27 18:19:32 -0500] aob: and the binary type in the lwrp seems to convert as the wrong value
[2013-02-27 18:21:47 -0500] aob: The value I need (in the registration entry file) is "Scancode Map"=hex:00,00,00,00,00,00,00,00,02,00,00,00,1d,00,3a,00,00,00,00,00
[2013-02-27 18:23:40 -0500] aob: my resource is: http://dpaste.com/1005394/
[2013-02-27 18:28:00 -0500] mgalkiewicz: can anybody take a look at http://tickets.opscode.com/browse/CHEF-3917?
[2013-02-27 18:29:18 -0500] robbkidd: I'm still getting chef v10.18.2 from apt.opscode.com packages. Am I missing the 10.20/22/24 releases somehow?
[2013-02-27 18:32:09 -0500] makerbreakr: does anyone have any  readingrecommendations on deploy mechanisms
[2013-02-27 18:32:30 -0500] makerbreakr: currently, I have recipes to config a server, but I use capistarano to deploy after I write my code, to a specific machine
[2013-02-27 18:33:02 -0500] tduffield: makerbreakr: http://foodfightshow.org/2013/01/application-deployment.html
[2013-02-27 18:33:35 -0500] makerbreakr: perfect thanks
[2013-02-27 18:33:46 -0500] makerbreakr: im not in love with the push mechansim
[2013-02-27 18:33:49 -0500] tduffield: makerbreakr: yw
[2013-02-27 18:33:50 -0500] makerbreakr: was curious if a pull was better
[2013-02-27 18:34:41 -0500] tduffield: makerbreakr: This podcast goes over that. TL;DR is its all about preference and what you are looking to get out of it
[2013-02-27 18:36:43 -0500] EJC: hi all - is there a good demo explaining how to use --user-data with the ec2 plugin?
[2013-02-27 18:36:55 -0500] EJC: I'm struggling to get that to do anything reasonable :-/
[2013-02-27 18:40:03 -0500] robbkidd: Is there an announcement somewhere that Ubuntu packages for chef > 10.18.2 will not be available? Are there any "So, you installed chef server with Ubuntu packages. Here's what you need to do to upgrade." resources?
[2013-02-27 18:45:53 -0500] miah: i just use the omnibus installer and omnibus_updater cookbook
[2013-02-27 18:45:57 -0500] znDuff: robbkidd: They're available right now.
[2013-02-27 18:46:09 -0500] miah: erp. chef-server
[2013-02-27 18:46:19 -0500] miah: i think somebody wrote something about that recently
[2013-02-27 18:46:33 -0500] znDuff: robbkidd: ie. https://opscode-omnitruck-release.s3.amazonaws.com/ubuntu/11.04/x86_64/chef_11.4.0-1.ubuntu.11.04_amd64.deb
[2013-02-27 18:46:58 -0500] znDuff: robbkidd: ...and counterpart, https://opscode-omnitruck-release.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.6-1.ubuntu.12.04_amd64.deb
[2013-02-27 18:47:41 -0500] robbkidd: I'd like to first bring my chef-server to 10.24 so I can spin up new VMs. I'm currently getting bit by the net-ssh issues with 10.18.
[2013-02-27 18:48:01 -0500] robbkidd: Once past that, I can deal with upgrading to 11.
[2013-02-27 18:48:46 -0500] miah: if you can test your upgrade before doing it i'd do that
[2013-02-27 18:49:40 -0500] robbkidd: I can do some with Vagrant machines. But taking on the upgrade to 11 test today adds another yak to the shaving I'm doing just trying to get a new chef-managed VM spun up.
[2013-02-27 18:50:44 -0500] robbkidd: Was so pleased to do "apt-get upgrade" and get upgrades to Chef 10.
[2013-02-27 18:51:54 -0500] Flex: hi guys, struggling with some ruby/chef trying to use capistrano-chef working nicely but passing back node name and not the node's ip but im doing it wrong :/
[2013-02-27 18:52:08 -0500] Flex: anybody tell me whats wrong with this? https://gist.github.com/41fb85a7bb1391271260
[2013-02-27 18:56:22 -0500] Flex: using this https://github.com/cramerdev/capistrano-chef but the example isn't working
[2013-02-27 19:03:47 -0500] MrBIOS: anybody have any recommendations on how to enforce a particular rpm be installed (via yum)?
[2013-02-27 19:04:02 -0500] MrBIOS: should I be using the rpm or yum cookbook for this purpose?
[2013-02-27 19:04:13 -0500] jtimberman: MrBIOS: package "packagename"
[2013-02-27 19:05:34 -0500] MrBIOS: got it, thanks
[2013-02-27 19:09:02 -0500] maek: jtimberman: again, sorry to bug. did you see my question re openssl metadata.rb name setting?
[2013-02-27 19:21:26 -0500] EJC: so has anyone used the --user-data option to the ec2 knife plugin?
[2013-02-27 19:23:08 -0500] MarkS: hi - i am trying to use the tomcat cookbook - http://community.opscode.com/cookbooks/tomcat - and it fails with Exec: apt-get -q -y install tomcat6=6.0.24-2ubuntu1.10 returned 100, expected 0
[2013-02-27 19:23:23 -0500] Flex: anyone using capistrano-chef??
[2013-02-27 19:23:27 -0500] MarkS: how does it know to install tomcat6.0.24?
[2013-02-27 19:26:52 -0500] aob: MarkS: look at the cookbook.  I don't see any attributes specifying the version, so that must be whatever is in your apt repo.
[2013-02-27 19:27:15 -0500] MarkS: thank you, i looked at the cookbook and it didn't see a version
[2013-02-27 19:27:32 -0500] aob: right; so what does apt-cache show tomcat6 give you?
[2013-02-27 19:28:04 -0500] faustroll:  Flex: I just looked at it. have not used it, yet. looks relatively straightforward?
[2013-02-27 19:28:22 -0500] MarkS: i guess i don't understand how it forms apt-get command - isn't it putting 6.0.24 in the command, i don't know where that comes from since it isn't in the cookbook
[2013-02-27 19:29:43 -0500] Flex: faustroll: should be but I can't even get the example he has used to work..https://gist.github.com/a2611b2194cefe89377b , gets me tried to create Proc object without a block (ArgumentError)
[2013-02-27 19:30:01 -0500] aob: MarkS: apt returns 100 under lots of circumstances.  You need to find out what the problem is.  Try running apt-cache show on the machine; or even apt-get install and see what the problem is.
[2013-02-27 19:30:29 -0500] faustroll: Flex: I did not like the formatting of that example
[2013-02-27 19:30:44 -0500] MarkS: thank you, i will try, sorry, i am not very experienced with unix
[2013-02-27 19:30:46 -0500] Flex: faustroll: I actually want something like this: https://gist.github.com/41fb85a7bb1391271260
[2013-02-27 19:31:12 -0500] aob: MarkS: no worries; i feel your pain! I'm just learning windows.
[2013-02-27 19:31:30 -0500] faustroll: Flex: try replacing the do/end in with Proc.new{}?
[2013-02-27 19:32:06 -0500] Flex: will give it a go, thx
[2013-02-27 19:32:39 -0500] sascha_d: Hi Chefs, I'm suddenly getting 500 errors trying to upload cookbooks to my open source chef server 11.04. I can list cookbooks and delete nodes, so it's not a perms problem at all. I've restarted my chef stuff, but not really sure where to start troubleshooting with the chef 11 apparatus
[2013-02-27 19:34:53 -0500] paulmooring: sascha_d: generally starting with the nginx log and following the upstream to another log is the best method
[2013-02-27 19:35:01 -0500] paulmooring: that sounds like a bookshelf issue
[2013-02-27 19:35:11 -0500] sascha_d: @paulmooring yeah I've looked at it and it didn't tell me anything the first 5 times
[2013-02-27 19:35:22 -0500] sascha_d: this time however, I notice that I appear to have a 10.16 client sending stuf
[2013-02-27 19:35:31 -0500] sascha_d: which is not what should be happening
[2013-02-27 19:35:55 -0500] paulmooring: sascha_d: as in you don't see any logging or you don't see any 500s in the log?
[2013-02-27 19:36:15 -0500] faustroll: Flex: let me know how using {} works out. certainly more readable to my mental parser. ;)
[2013-02-27 19:36:36 -0500] sascha_d: I can see the 500's I just don't see any good info. However, the 10.16 client is the problem probably? I have 11 installed too, but it's been wonky with my berkshelf
[2013-02-27 19:36:54 -0500] Flex: will do ;)
[2013-02-27 19:36:56 -0500] robbkidd: Sooo  installing the Chef 11 .deb does not bring over my Chef 10 data. Haven't been able to find any docs on migrating from 10 to 11.
[2013-02-27 19:37:35 -0500] paulmooring: sascha_d: I wouldn't think the 10.16 client is the problem, what was the upstream that returned the 500?
[2013-02-27 19:37:53 -0500] faustroll: Flex: canonical example is: Proc.new {|a, *b| b.collect {|i| i*a }}
[2013-02-27 19:38:09 -0500] sascha_d: @paulmooring bookshelf
[2013-02-27 19:38:13 -0500] justify_: With chef server installed on port-forwarded vm, which gem do I install on the client to get 'knife configure' working? Followed the documentation for Ubuntu all the way.
[2013-02-27 19:38:49 -0500] sascha_d: ERROR: Server returned error for https://chefserver.com/sandboxes/0000000000004a6f1252a34e6b2513aa, retrying 1/5 in 4s
[2013-02-27 19:39:24 -0500] sascha_d: I was going to try and enable debug on the server
[2013-02-27 19:39:48 -0500] sascha_d: @paulmooring but when I looked at the online docs, I thought it said to use /etc/chef/chef-server.rb and I could not find that file
[2013-02-27 19:40:17 -0500] paulmooring: sascha_d: that should be correct, how did you configure it?
[2013-02-27 19:40:36 -0500] sascha_d: @paulmooring rpm -i chef.....rpm
[2013-02-27 19:41:02 -0500] paulmooring: sascha_d: you probably just need to create the chef-server.rb file
[2013-02-27 19:41:08 -0500] apsoto: I'm seeing a problem where chef-client is not running anymore after I installed chef-rvm.  I'm not seeing any docs on the recipe about making that work, anyone seen that and fixed it?
[2013-02-27 19:41:08 -0500] paulmooring: sounds like you're on all default settings
[2013-02-27 19:41:24 -0500] sascha_d: @paulmooring oh, ok. I figured it would be created so I haven't really touched anything yet
[2013-02-27 19:41:41 -0500] sascha_d: I have a presentation on this in about 20 minutes so I'm not actually making any changes until after that :)
[2013-02-27 19:41:58 -0500] sascha_d: I can still search and list cookbooks and knife status and stuff, so don't want to break anything
[2013-02-27 19:42:03 -0500] paulmooring: sascha_d: if you need help later feel free to ping me
[2013-02-27 19:42:37 -0500] faustroll: Flex: using do/end within arguments passed to a method is not best, imo. good time for {}
[2013-02-27 19:42:44 -0500] apsoto: Here's a gist of the error I see: https://gist.github.com/apsoto/5051014
[2013-02-27 19:43:23 -0500] littleidea: how are cool kids running chef-client on RHEL/Centos these days?
[2013-02-27 19:43:56 -0500] apsoto: how do you get the bootstrapped chef to be 'recognized' after rvm installed system-wide via chef-rvm cookbook?
[2013-02-27 19:44:05 -0500] skout: probably a stupid question, but is berkshelf becoming standard, similar to rubygems, or am I just stuck reading the same repos too much?
[2013-02-27 19:44:06 -0500] tduffield: littleidea: *raises hand*
[2013-02-27 19:44:38 -0500] robbkidd: littleidea: Are cool kids running RHEL/CentOS?
[2013-02-27 19:44:46 -0500] justincampbell: skout: berkshelf is more akin to bundler, and opscode community site is like rubygems
[2013-02-27 19:44:48 -0500] apsoto: heh
[2013-02-27 19:44:48 -0500] sascha_d: littleidea we are running rh
[2013-02-27 19:45:24 -0500] sascha_d: we bootstrap via pxe and set up the config files/rpm as part of post, create an initial boot json file and pass in a role that contains the chef-client cookbook
[2013-02-27 19:45:41 -0500] littleidea: robbkidd: the coolest kids are running some version of Illumos
[2013-02-27 19:46:08 -0500] robbkidd: littleidea: They were thick-framed glasses and plaid fedoras, too, don't they?
[2013-02-27 19:46:18 -0500] robbkidd: s/were/wear/
[2013-02-27 19:46:23 -0500] skout: justincampbell: danke, after getting my feet wet, I am beginning to see that I really did some silly things.  will be rebuilding my work from yesterday it seems.
[2013-02-27 19:46:26 -0500] littleidea: what I'm really asking is how people manage the chef-client process
[2013-02-27 19:46:45 -0500] sascha_d: @littleidea the chef-client cookbook allows you to specify cron or daemon
[2013-02-27 19:46:52 -0500] sascha_d: and sets it up for you as a service
[2013-02-27 19:47:15 -0500] littleidea: sascha_d: but which door should one choose
[2013-02-27 19:47:27 -0500] sascha_d: I don't think it matters. I like services better myself
[2013-02-27 19:47:58 -0500] apsoto: sorry, asking again: how do you get the bootstrapped chef to be 'recognized' after rvm installed system-wide via chef-rvm cookbook?  install chef gems in global gemset?
[2013-02-27 19:48:01 -0500] sascha_d: service used to be the default. Cron was born when the red hat service  setup was buggy
[2013-02-27 19:49:49 -0500] robbkidd: Where can I find Chef 10 to 11 migration docs? Google can only find me "Install a new Chef 11 server" stuff.
[2013-02-27 19:53:46 -0500] geekbri: yfeldblum: for some reason my librarian-chef is checking out the wrong tag.  Any clue how i can debug this?  I've got it set to a :ref of 1.4.1 and it keeps checking out 1.4.0
[2013-02-27 19:53:57 -0500] j^2: robbkidd: they are still writing the process
[2013-02-27 19:54:06 -0500] j^2: if you want to migrate it's by hand right now
[2013-02-27 19:54:15 -0500] robbkidd: Fun.
[2013-02-27 19:54:48 -0500] j^2: i got lucky i only had one issue with my cookbooks, so i was able to rebuild with chef11 pretty easily
[2013-02-27 19:55:16 -0500] robbkidd: It might come to that.
[2013-02-27 19:55:29 -0500] chip-: robbkidd: You could try spinning up a Chef 11 server next to your Chef 10 server, and then using this process: http://wiki.opscode.com/display/chef/Migrating+to+Hosted+Chef+from+an+Open+Source+Chef+Server+implementation
[2013-02-27 19:55:35 -0500] chip-: disclaimer: haven't done it myself.
[2013-02-27 19:55:58 -0500] robbkidd: Hey, it's more data to work with. Thanks!
[2013-02-27 19:56:01 -0500] log1kal: I wrote a thing on testing your cookbooks with Chef11, but it doesn't include anything about moving your server to chef 11
[2013-02-27 19:56:08 -0500] log1kal: http://logikal.is/blog/2013/02/26/testing-chef-11-with-vagrant/
[2013-02-27 19:56:23 -0500] geekbri: yfeldblum: nevermind, fixed it
[2013-02-27 19:57:02 -0500] matticulous: trying to run a recipe on a smartos box. it uses the gem_package resource the the gem being installed compiles native extensions. i have build-essential and pkgin added to a base role which is added to the run list first. the chef run fails with an error about failing to build the gem native extension. it looks like it can't find make (sh: line 1: make: not found). however, if a ssh into the machine and type 'make', it provides output. any tips on what i am
[2013-02-27 19:57:02 -0500] matticulous: missing?
[2013-02-27 19:57:20 -0500] j^2: anyone use the nagios cookbook here? my plugins arent being distrubuted with the files/ directory :(
[2013-02-27 19:58:55 -0500] j^2: Adding New Plugin Scripts
[2013-02-27 19:59:01 -0500] j^2: in the quickstart doesnt seem to work
[2013-02-27 20:00:24 -0500] miah: i suspect the quickstart is vastly out of date
[2013-02-27 20:00:40 -0500] j^2: yeah it's starting to feel like that
[2013-02-27 20:00:52 -0500] j^2: but i thought the files/ diretory always get distrubited
[2013-02-27 20:01:08 -0500] miah: only when you use 'cookbook_file'
[2013-02-27 20:01:18 -0500] j^2: oh
[2013-02-27 20:02:13 -0500] matticulous: some sort of environment option or something that i need to pass? path?
[2013-02-27 20:02:28 -0500] chip-: robbkidd: this just now showed up in Twitter stream too: https://twitter.com/mariusducea/status/306854074853253120
[2013-02-27 20:03:00 -0500] robbkidd: Oooo.
[2013-02-27 20:03:07 -0500] robbkidd: I'm OK with that, too.
[2013-02-27 20:03:08 -0500] btm: @opscode chef code review, join: http://bit.ly/VaknKw watch: http://youtu.be/8pOd8NzmKIY
[2013-02-27 20:03:18 -0500] robbkidd: Thanks chip-
[2013-02-27 20:05:09 -0500] benregn: using chef_solo to provision postgres but my :pg_hba never is applied in Vagrant - leaving me with the default pg_hba.conf file which is not very helpful :)
[2013-02-27 20:08:11 -0500] robbkidd: "gem install knife-backup" -- Isn't everything moving away from gems? I'm so confused about where to gem install knife plugins with an omnibus install.
[2013-02-27 20:12:21 -0500] e100: Will apt.opscode.com be updated with 10.24.0 or do we need to use an alternate method to upgrade?
[2013-02-27 20:14:26 -0500] robbkidd: Hahaha
[2013-02-27 20:19:25 -0500] timsmith: can you override cookbook version constrains on the node or in the role
[2013-02-27 20:19:33 -0500] timsmith: to get a higher version than an environment sets?
[2013-02-27 20:20:42 -0500] c0ff33: i think the deb package for chef might be screwed up
[2013-02-27 20:22:11 -0500] robbkidd: c0ff33: What makes you say that?
[2013-02-27 20:22:36 -0500] faustroll: benregn: any errors on debug
[2013-02-27 20:22:37 -0500] c0ff33: the download says it is for 11.0.6 but it appears to install 11.0.4
[2013-02-27 20:22:40 -0500] faustroll: ?
[2013-02-27 20:23:30 -0500] benregn: faustroll: how would I go about debugging that? (I'm very new at this stuff)
[2013-02-27 20:25:08 -0500] faustroll: benregn: you could try using test-kitchen. bundle exec kitchen test gives verbose output by default
[2013-02-27 20:25:12 -0500] c0ff33: robbkidd how should i confirm the version
[2013-02-27 20:26:01 -0500] faustroll: benregn: and it uses vagrant
[2013-02-27 20:28:00 -0500] helomee: Hi, is there a way I can install chef without an internet connection on Ubuntu
[2013-02-27 20:28:12 -0500] helomee: looking in the net didn't help
[2013-02-27 20:28:27 -0500] aob: helomee: you could download the .deb file and move it over via a usb key
[2013-02-27 20:28:50 -0500] helomee: did that. it needs umpteen dependencies, which aren't there
[2013-02-27 20:29:06 -0500] aob: helomee: erm.... which deb file
[2013-02-27 20:29:28 -0500] helomee: this is the deb file I wanted to install chef_10.18.2-2_all.deb
[2013-02-27 20:29:31 -0500] benregn: faustroll: I get "bundler: command not found: kitchen"
[2013-02-27 20:29:32 -0500] c0ff33: helomee it is probably somehow possible to install it without internet but would it just be easier to find some way of connecting the box?
[2013-02-27 20:29:35 -0500] aob: helomee: the omnibus installer .deb packages all the dependencies in one deb
[2013-02-27 20:30:42 -0500] c0ff33: i am having trouble installing the latest chef even with internet :(
[2013-02-27 20:30:52 -0500] someara: use omnibus
[2013-02-27 20:31:00 -0500] c0ff33: is that this? http://www.opscode.com/chef/install/
[2013-02-27 20:31:11 -0500] helomee: its behind a firewall, and its a bigger company. so there is noway they're connecting it to the internet. we have a mirrored repository, to which I can add more packages, but that is not connected to the internet too. so it'll be a pain if I have to do that
[2013-02-27 20:31:15 -0500] faustroll: benregn: you need to add gem "test-kitchen" to your Gemfile
[2013-02-27 20:31:32 -0500] someara: yep. and http://www.opscode.com/chef/instal.sh is a script that will download the correct package for your platorm
[2013-02-27 20:31:40 -0500] benregn: faustroll: of course :P
[2013-02-27 20:32:05 -0500] c0ff33: well i thought it was pretty simple that i am using 12.04 so there was only 11.0.4 and 11.0.6 listed
[2013-02-27 20:32:09 -0500] faustroll: benregn: see https://github.com/opscode/test-kitchen
[2013-02-27 20:32:11 -0500] someara: helomee download the omnibus installers from the internet and host them behind your firewall
[2013-02-27 20:32:24 -0500] c0ff33: i downloaded the 11.0.6 but it says that it is installing 11.0.4
[2013-02-27 20:32:58 -0500] c0ff33: previously I had used apt-get install chef-server per the documentation pages so I could check the version with chef-server -v but that no longer works...
[2013-02-27 20:33:06 -0500] faustroll: benregn: after bundle update: in your cookbook do a bundle exec kithen init
[2013-02-27 20:33:11 -0500] c0ff33: chef-server-ctl does not appear to have an option to check the version...
[2013-02-27 20:34:00 -0500] someara: 11.04 is the ubuntu version, not the chef-server version
[2013-02-27 20:34:22 -0500] someara: 11.0.4 and 11.0.6 are the chef-server versions in the drop box
[2013-02-27 20:34:40 -0500] helomee: thanks aob, someara
[2013-02-27 20:35:10 -0500] c0ff33: um, i think you might be confused someara - http://img221.imageshack.us/img221/5474/picturexj.png
[2013-02-27 20:35:30 -0500] c0ff33: http://img7.imageshack.us/img7/8104/screenshot20130227at335.png
[2013-02-27 20:36:20 -0500] someara: and that deb installs 11.0.4?
[2013-02-27 20:36:28 -0500] faustroll: benregn: s/kithen/kitchen/
[2013-02-27 20:36:29 -0500] c0ff33: appaerently
[2013-02-27 20:36:32 -0500] someara: swird
[2013-02-27 20:36:37 -0500] someara: er, weird.
[2013-02-27 20:36:38 -0500] c0ff33: how do i confirm?
[2013-02-27 20:37:47 -0500] someara:  /opt/chef/embedded/bin/gem list chef
[2013-02-27 20:39:29 -0500] benregn: faustroll: it seem like I'm not able to install test-kitchen https://github.com/opscode/test-kitchen/pull/23
[2013-02-27 20:39:43 -0500] benregn: I also get "Bundler could not find compatible versions for gem "mixlib-cli":......."
[2013-02-27 20:41:11 -0500] spheromak: yea love that i dea. failure callbacks
[2013-02-27 20:41:16 -0500] spheromak: ack .
[2013-02-27 20:42:33 -0500] miah: syn ack .
[2013-02-27 20:44:35 -0500] faustroll: benregn: there is this: gem 'test-kitchen', :git => "git://github.com/opscode/test-kitchen.git", :branch => '1.0'
[2013-02-27 20:45:18 -0500] faustroll: benregn: this may be overkill for your problem just now
[2013-02-27 20:46:17 -0500] faustroll: in 1.0 you'll want to clear out that kitchen.yml to one platform to simplify it
[2013-02-27 20:46:41 -0500] faustroll: for your test case
[2013-02-27 20:47:09 -0500] benregn: faustroll: ok, now it installed
[2013-02-27 20:47:40 -0500] benregn: faustroll: where exactly was I supposed to run "bundle exec kithen init"?
[2013-02-27 20:48:58 -0500] faustroll: benregn: in your cookbook
[2013-02-27 20:49:33 -0500] faustroll: or you can change your chef.log_level in your vagrant config
[2013-02-27 20:49:49 -0500] faustroll: if you don't want to go with test-kitchen just now
[2013-02-27 20:50:06 -0500] faustroll: test-kitchen is worth a try though
[2013-02-27 20:50:20 -0500] benregn: faustroll: just to confirm, you mean the folder with all the cookbooks (/cookbooks/) or?
[2013-02-27 20:51:10 -0500] faustroll: benregn: I'm doing it in an individual cookbook, or a wrapper cookbook
[2013-02-27 20:54:50 -0500] matticulous: someara: you are a smartos guy, right? (basing this on your pkgin cookbook) if so, can you help with a gem_package issue on smartos? can't compile native extensions.
[2013-02-27 20:57:57 -0500] gamafranco: hi
[2013-02-27 20:58:07 -0500] gamafranco: I bet I'm not the first one, and I won't be the last
[2013-02-27 20:58:09 -0500] gamafranco: "You must have ruby-shadow installed for password support!"
[2013-02-27 20:58:18 -0500] gamafranco: what's the best recipe to fix this?
[2013-02-27 20:59:20 -0500] gamafranco: There are several chef-ruby-shadow cookbooks on github, that don't fork from each other
[2013-02-27 20:59:44 -0500] gamafranco: if anyone has used any, what's the best one?
[2013-02-27 21:00:02 -0500] btm: @opscode cookbook code review: join: http://bit.ly/15jlppt watch: http://youtu.be/ZdJa5AIKAB8
[2013-02-27 21:01:01 -0500] gamafranco: ahaha
[2013-02-27 21:01:12 -0500] gamafranco: I was hoping this to be a common issue
[2013-02-27 21:01:20 -0500] gamafranco: how is everyone setting user passwordS?
[2013-02-27 21:03:34 -0500] gamafranco: pong?
[2013-02-27 21:03:36 -0500] gamafranco: anyone here?
[2013-02-27 21:04:52 -0500] log1kal: I am here, but don't have any answers for you.
[2013-02-27 21:04:59 -0500] matticulous: haven't had to use any of them yet. otherwise i'd pipe up.
[2013-02-27 21:05:13 -0500] cheeseplus: gamafranco: there is the users cookbook which I've used for ssh keys but it does passwords as well
[2013-02-27 21:05:52 -0500] gamafranco: I'm using chef-user, but if I use "password node", I need ruby shadow
[2013-02-27 21:06:40 -0500] gamafranco: chef-user is good for ssh keys too. cheeseplus is this one you're using?
[2013-02-27 21:06:56 -0500] panque: gamafranco: i use http://docs.opscode.com/chef/resources.html#user but i suspect that using data bags is a better approach
[2013-02-27 21:08:51 -0500] ranman: hey guys if I have hosted chef how can I make a bootstrap use my local recipes instead of the remote ones?
[2013-02-27 21:11:02 -0500] cheeseplus: gamafranco: I've used both
[2013-02-27 21:11:23 -0500] cheeseplus: right now my passwords are from LDAP so I only care about distributing keys
[2013-02-27 21:12:31 -0500] gamafranco: panque, cheeseplus thanks for the inputs
[2013-02-27 21:12:32 -0500] geekbri: so to_hash isn't a deep conversion, which means that if you use .to_hash on node, only the top level objects are converted and any nested attributes remain as immutable arrays and immutable mashes
[2013-02-27 21:12:34 -0500] geekbri: thats not so fun.
[2013-02-27 21:12:39 -0500] gamafranco: I'll evaluate this offline
[2013-02-27 21:12:55 -0500] gamafranco: thanks
[2013-02-27 21:16:05 -0500] Flex: faustroll: no dice :(
[2013-02-27 21:20:33 -0500] faustroll: Flex: same or different error?
[2013-02-27 21:21:52 -0500] Flex: faustroll: dev.rb:3:in `[]': can't convert String into Integer (TypeError)
[2013-02-27 21:22:14 -0500] Flex: https://gist.github.com/5597b635f3e16dc7c43f
[2013-02-27 21:22:27 -0500] faustroll: Flex: lol. at least new error
[2013-02-27 21:22:48 -0500] Flex: :D
[2013-02-27 21:24:31 -0500] Flex: balls.
[2013-02-27 21:25:40 -0500] jtimberman: maek: saw it
[2013-02-27 21:25:50 -0500] jtimberman: maek: i'm at an airport waiting for a flight
[2013-02-27 21:26:04 -0500] jtimberman: catching up on all the emails :)
[2013-02-27 21:26:11 -0500] Mithrandir: it's a jtimberman
[2013-02-27 21:26:56 -0500] maek: jtimberman: Thanks! sorry to double ping.
[2013-02-27 21:28:05 -0500] jtimberman: Mithrandir: ohai
[2013-02-27 21:28:32 -0500] Mithrandir: jtimberman: I started crossfit-ing.  It's hard.
[2013-02-27 21:29:14 -0500] faustroll: Flex: looks like you might need this in your Proc.new{|n| n["network"]
[2013-02-27 21:30:05 -0500] Flex: lol faustroll, i dont even want network, just want the node name to show in the deploy and not the box's internal IP address. Was just using his example as I couldnt get mine working either :(
[2013-02-27 21:30:24 -0500] jtimberman: Mithrandir: Right on! Yes it is.
[2013-02-27 21:30:40 -0500] geekbri: Burpees are the cause and the solution to all of lifes problems
[2013-02-27 21:30:53 -0500] faustroll: Flex: lol. well if we want to dup the example?
[2013-02-27 21:31:10 -0500] Flex: :)
[2013-02-27 21:32:11 -0500] faustroll: Flex: if we want to dup the example, we want to use some arbitrary |val|
[2013-02-27 21:32:19 -0500] Flex: faustroll: dev.rb:3:in `block in load': undefined method `[]' for nil:NilClass (NoMethodError)
[2013-02-27 21:32:20 -0500] Flex: bugger
[2013-02-27 21:32:31 -0500] Flex: np dude, will figure it out tomorrow
[2013-02-27 21:32:38 -0500] Flex: thank you for the help though ;)
[2013-02-27 21:32:58 -0500] Flex: i you figure it out let me know! :P
[2013-02-27 21:33:01 -0500] c0ff33: someara: u still here? i supposedly installed the 11.06 package but i can't confirm
[2013-02-27 21:33:07 -0500] c0ff33: if i run "/opt/chef-server/embedded/bin/gem list" i get:
[2013-02-27 21:33:12 -0500] faustroll: Flex: what help? If I helped you laugh, then good
[2013-02-27 21:33:30 -0500] Flex: cry inside a little
[2013-02-27 21:33:31 -0500] Flex: :)
[2013-02-27 21:33:32 -0500] c0ff33: http://img405.imageshack.us/img405/9817/picturedv.png
[2013-02-27 21:34:00 -0500] c0ff33: so i guess "chef" is at 11.04 but how can i check the "chef-server" version ?
[2013-02-27 21:34:53 -0500] aob: ranman: still there?
[2013-02-27 21:36:02 -0500] faustroll: Flex: the parser is as confused as we are. too many hash o hash keys makes for a frustrating read/parse
[2013-02-27 21:36:08 -0500] jtimberman: c0ff33: chef client is 11.4.0. chef server is 11.0.6.
[2013-02-27 21:36:35 -0500] faustroll: Flex: I'm great at cryin.
[2013-02-27 21:36:51 -0500] jtimberman: c0ff33: it's shipped as a full stack package, dpkg -l chef-server or rpm -qi chef-server will have the version
[2013-02-27 21:37:06 -0500] c0ff33: jtimberman - roger that but how do you confirm versions. nm let me try those commands
[2013-02-27 21:37:16 -0500] faustroll: Flex: the idea of taking a break and coming back to it later: winning
[2013-02-27 21:37:20 -0500] jtimberman: c0ff33: and you can get more version information from the file /opt/chef-server/version-manifest.txt
[2013-02-27 21:37:33 -0500] Flex: faustroll: aye :)
[2013-02-27 21:38:12 -0500] c0ff33: is rpm installed with the deb package?
[2013-02-27 21:39:13 -0500] c0ff33: also, jtimberman, if I want to install knife on the chef server do I need to do /opt/chef-server/embedded/bin/gem install knife ?
[2013-02-27 21:39:15 -0500] jcrosby: Hello all. Is there a current standard for using knife with a repository shared by a team? All of the docs seem to indicate using a knife.rb file and pems in the .chef directory. This seems like something that shouldn't be checked into git, and something that will vary for each person on the team. Are there docs covering this?
[2013-02-27 21:40:07 -0500] c0ff33: jcrosby you can set up multiple workstation clients for your team members if you want them to be able to manage chef
[2013-02-27 21:40:29 -0500] c0ff33: jcrosby absolutely keep them pem's out of version control
[2013-02-27 21:40:35 -0500] yfeldblum: geekbri, apologies for not responding more quickly, but glad to hear you've got it working
[2013-02-27 21:40:35 -0500] robbkidd: jcrosby: I don't know about docs, but we keep a knife.rb.example checked in and gitignore the actual knife.rb and .pem files.
[2013-02-27 21:40:46 -0500] geekbri: yfeldblum: thanks, it was user error on my part :)
[2013-02-27 21:41:49 -0500] c0ff33: does anyone know the right way to install knife on a chef-server box setup with the deb package?
[2013-02-27 21:43:04 -0500] jcrosby: Thanks c0ff33 and robbkidd. Perhaps the best way to add someone to the team would be to have something in the README for the project that points to the sign up form for chef server, with instructions to update the example, plus add their pems.
[2013-02-27 21:43:34 -0500] robbkidd: jcrosby: That's about what we do, yep.
[2013-02-27 21:43:40 -0500] jcrosby: cool
[2013-02-27 21:44:55 -0500] jtimberman: c0ff33: chef-server includes an embedded chef client used by the chef-server-ctl program for some of its commands (like reconfigure)
[2013-02-27 21:45:26 -0500] jtimberman: c0ff33: knife comes with chef client. you could also install it separately with the chef client package from opscode.com/chef/install
[2013-02-27 21:45:44 -0500] cpasmoi: hum, I'd like to know where a bin file is, in a recipe. E.G the result of `which my_bin` would be great. Is it possible ?
[2013-02-27 21:46:49 -0500] cpasmoi: I don't think the system("which my_bin" > /tmp/my_bin.path") and File.open ("tmp/my_bin.path") is clean
[2013-02-27 21:47:19 -0500] cpasmoi: Although, the bin I'm looking for has or will be installed with another chef cookbook
[2013-02-27 21:48:35 -0500] ranman: aob: I am back, reading the history now
[2013-02-27 21:49:00 -0500] c0ff33: jtimberman - having trouble figuring out how to run "knife"
[2013-02-27 21:49:13 -0500] ranman: aob: ah, yes -- you know how I can use the local recipes instead of the remote ones?
[2013-02-27 21:49:33 -0500] c0ff33: nevermind - apparenlty it is /opt/chef-server/embedded/bin/knife
[2013-02-27 21:49:37 -0500] maek: c0ff33: on linux/mac? do you have the 'chef' gem installed?
[2013-02-27 21:49:43 -0500] maek: oh :(
[2013-02-27 21:49:46 -0500] maek: easy fix :D
[2013-02-27 21:49:53 -0500] maek: you should actually install the knife gem imo
[2013-02-27 21:50:08 -0500] c0ff33: make apparently it is installed as an embedded gem
[2013-02-27 21:50:51 -0500] c0ff33: jtimberman can probably confirm this. but i don't understand if i should maybe add that directory to my path or symlink it to /usr/local/bin/knife ...
[2013-02-27 21:50:53 -0500] maek: c0ff33: thats for the omnibus installed chef server or client. its a fixed ruby version and gem and isnt managed by any system/ruby things
[2013-02-27 21:51:09 -0500] jtimberman: maek: s/gem/chef client package/
[2013-02-27 21:51:38 -0500] maek: jtimberman: good point sir :D
[2013-02-27 21:52:03 -0500] c0ff33: jtimberman - when and how do chef and knife get upgraded on the chef-server with the omni installed version?
[2013-02-27 21:53:12 -0500] jtimberman: c0ff33: when the server team that is maintaining chef server's releases updates it; it gets new packages built.
[2013-02-27 21:53:37 -0500] c0ff33: jtimberman - will running apt-get update && apt-get upgrade cause it to be upgraded then?
[2013-02-27 21:54:02 -0500] c0ff33: (when it is available?)
[2013-02-27 22:06:17 -0500] threesome: When I install chef-client using "curl -L https://www.opscode.com/chef/install.sh | sudo bash" as on their website, why do I get chef-client 10.16.4 rather than the latest 11.4.0?
[2013-02-27 22:36:30 -0500] blackstar257: What is the best way to get data from a SQL database and use those results to populate a template
[2013-02-27 22:36:38 -0500] ranman: ping aob
[2013-02-27 22:37:01 -0500] kryptek: Response timed out
[2013-02-27 22:37:05 -0500] ranman: :P
[2013-02-27 22:37:10 -0500] kryptek: :)
[2013-02-27 22:37:24 -0500] ranman: hey guys if I have hosted chef how can I make a bootstrap use my local recipes instead of the remote ones?
[2013-02-27 22:37:39 -0500] kryptek: use shef
[2013-02-27 22:38:27 -0500] j^2: kryptek: do you have a good link/tutoral on shef?
[2013-02-27 22:38:47 -0500] kryptek: Unfortunately, I wiped out all my Chrome bookmarks a few weeks ago :(
[2013-02-27 22:38:59 -0500] kryptek: I'd look up two things:  Shef and Vagrant w/ Chef
[2013-02-27 22:39:05 -0500] j^2: kk
[2013-02-27 22:39:22 -0500] kryptek: You can use Vagrant with hosted and local cookbooks to bootstrap a VM
[2013-02-27 22:43:37 -0500] j^2: grrrrr
[2013-02-27 22:43:37 -0500] amccloud: Does anyone have chef-client and chef-server running on the same machine? Basically connected to itself.
[2013-02-27 22:43:45 -0500] j^2: nagios isnt checking my chef server anymore :(
[2013-02-27 22:44:03 -0500] j^2: how do i force a check to get the machine to re-write the hosts.cfg?
[2013-02-27 23:00:19 -0500] j^2: ggrrr
[2013-02-27 23:00:24 -0500] j^2: i guess i'll attack it tomorrow :(
[2013-02-27 23:00:28 -0500] miah: rerun chef-client?
[2013-02-27 23:00:36 -0500] j^2: nothing :(
[2013-02-27 23:00:37 -0500] j^2: didnt work
[2013-02-27 23:01:04 -0500] j^2:   * template[/etc/nagios3/conf.d/hosts.cfg] action create[2013-02-27T22:46:00+00:00] INFO: Processing template[/etc/nagios3/conf.d/hosts.cfg] action create (nagios::server line 28)
[2013-02-27 23:01:07 -0500] j^2:  (up to date)
[2013-02-27 23:30:41 -0500] rep0st: so. knife bootstrap --distro chef-full requires an internet connection. I'm currently VLAN'd off from the interwebz. Any suggestions on how to bootstrap via omnibus installer without the interwebz and proxy servers?
[2013-02-27 23:41:23 -0500] fujin: rep0st: download the package from somewhere that has the internet, make it available behind your VLAN segment
[2013-02-27 23:41:45 -0500] fujin: you could host it on your workstation with a simple http server and reverse-SSH-tunnel back to it, too, I guess.
[2013-02-27 23:42:00 -0500] rep0st: heh tricky
[2013-02-27 23:42:02 -0500] rep0st: i could do that
[2013-02-27 23:42:36 -0500] fujin: rep0st: you could modify the chef-full template and specify that with --distro as well. like, scp the dpkg/rpm/.... over.
[2013-02-27 23:43:10 -0500] rep0st: fujin: that leads me to my next question. where is that chef-full template? that's dependent on where i installed chef right?
[2013-02-27 23:44:52 -0500] rep0st: fujin: nvm i found it. My head is telling me i need to go home already.
[2013-02-27 23:44:56 -0500] rep0st: fujin: thank you for your help
[2013-02-27 23:45:19 -0500] fujin: rep0st: np, good luck!
[2013-02-27 23:52:19 -0500] log1kal: miah: this might be in my top10 commit logs ever "its a me. miah!"
[2013-02-27 23:52:27 -0500] log1kal: I lol'd.

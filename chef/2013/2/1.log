[2013-02-01 00:17:06 -0500] cheeseplus: anyone using LDAP and chef in conjunction to manage users?
[2013-02-01 00:18:05 -0500] cheeseplus: I need LDAP for VPN support but would like chef managing the keys and am finding that an elegant solution is more complicated than expected
[2013-02-01 00:26:53 -0500] mattp: cheeseplus: yes, I do. Though not quite in the same way that you've described.
[2013-02-01 00:27:17 -0500] cheeseplus: interested in how you have them interacting
[2013-02-01 00:30:20 -0500] mattp: first major difference: we don't yet have a VPN (but it's something I've been pondering) - at the moment it's just webapps.  We do that by having a databag entry for each app, and there's an attribute in that indicating which securty policy to use. (e.g. employees, client-one, client-two etc)
[2013-02-01 00:31:07 -0500] mattp: the rule for deploying web apps then looks at the databag, finds the appropriate applicate and then writes the apache config using the correct auth template
[2013-02-01 00:31:39 -0500] cheeseplus: interesting
[2013-02-01 00:32:20 -0500] mattp: employees, clients, etc are distinguished by their path in the ldap tree, though that's not a chef-ism of course.
[2013-02-01 00:38:09 -0500] cheeseplus: mattp: do you have to shell out in the recipe to figure out where they are in LDAP?
[2013-02-01 00:38:46 -0500] cheeseplus: that is my current sticking point, ever solution I seem to come across requires shelling out to talk to LDAP and that makes me a sad panda
[2013-02-01 00:39:50 -0500] josephholsten: does anyone think the chef 11 server is ready to deploy in my environment?
[2013-02-01 00:40:18 -0500] josephholsten: I haven't started looking for install & migration docs yet
[2013-02-01 00:47:52 -0500] gene: hi all. I'm probably missing something basic but how do you install a knife plugin on an omnibus chef installation? ( http://tickets.opscode.com/browse/KNIFE-228 )
[2013-02-01 00:48:20 -0500] gene: doing a gem install of a knife plugin understandably pulls down the whole chef stack in gems and installs it along with the plugin
[2013-02-01 00:49:54 -0500] mattp: cheeseplus: no, I have the recipe write an apache config stanza which references the group, and then when a user auths, apache will do the LDAP lookup for you and allow/deny based on that.
[2013-02-01 00:50:26 -0500] cheeseplus: gotcha, thanks!
[2013-02-01 00:50:54 -0500] mattp: np.
[2013-02-01 00:56:04 -0500] gene: I notice jtimberman talks about using knife gem install on his blog which may be what I'm looking for
[2013-02-01 00:56:24 -0500] gene: though I am stuck a bit with a chicken egg problem on how to install the "knife gem" plugin to install plugins
[2013-02-01 00:56:53 -0500] gene: I guess I could manually clone the repo into my .chef/plugins dir but it seems like this can't be the intended way to install a plugin
[2013-02-01 01:00:10 -0500] miah: gene: chef_gem on that host
[2013-02-01 01:00:31 -0500] miah: eg, chef_gem in a recipe that installs whatever you want to the omnibus
[2013-02-01 01:00:41 -0500] gene: ahh ok that would work
[2013-02-01 01:01:11 -0500] miah: you could also manually use the 'gem' command inside the omnibus, but then why are you using chef? =)
[2013-02-01 01:01:25 -0500] gene: true
[2013-02-01 01:01:33 -0500] gene: hmm ok I can get chef-solo running on it (it's just my desktop and supposed to be a knife workstation) and then use that to install the plugin
[2013-02-01 01:01:45 -0500] miah: cool
[2013-02-01 01:02:09 -0500] gene: I suspect the knife plugins readmes should be updated since in the modern paradigm (post omnibus) the method described doesn't work
[2013-02-01 01:02:23 -0500] gene: anyhow, I'll try the chef_gem resource, thanks miah
[2013-02-01 01:02:37 -0500] miah: np
[2013-02-01 01:21:44 -0500] josephholsten: is there an official chef 11 migration guide?
[2013-02-01 01:25:28 -0500] timsmith: I believe it was mentioned that tools and guides weren't done yet
[2013-02-01 01:25:42 -0500] timsmith: at least that's the impression I got at the Seattle Chef users group
[2013-02-01 01:30:44 -0500] aboudreault: If I have some files (locally or in the recipes itself) that I need to deploy on the machine via.. what should I use?
[2013-02-01 01:31:40 -0500] josephholsten: so who do I need to talk to to help write the chef 11 migration guide
[2013-02-01 01:32:10 -0500] occupant: err, wat? if you've defined a cookbook_file resource, you just need to put it in the files/default directory in the cookbook.
[2013-02-01 01:34:50 -0500] aboudreault: occupant, that's probably what I'm looking for...... googling cookbook_file
[2013-02-01 01:35:54 -0500] occupant: http://docs.opscode.com/chef/resources.html has many, many examples of difference resources and what you can do with them
[2013-02-01 01:36:04 -0500] occupant: different!
[2013-02-01 01:37:23 -0500] aboudreault: thanks
[2013-02-01 01:46:07 -0500] ddilinger: if you need to update the firewall on a remote machine after booting a new machine, whats the idiomatic way to do that?  it seems would need to mark the nodes in such a way can use search(:node, '...'), then trigger chef-client on the remote machine?
[2013-02-01 01:54:47 -0500] ddilinger: i'd rather not do a full convergence though, just update and reload /etc/iptables.up-rules.  in a classical script would probably just ssh into the remote machine, append to it with >>, and use iptables-restore
[2013-02-01 01:55:08 -0500] miah: ddilinger: learn to use templates
[2013-02-01 01:55:22 -0500] ddilinger: but i can use templates, which is where search() would come in
[2013-02-01 01:55:31 -0500] ddilinger: i added about how i would classicaly do it because noone responded
[2013-02-01 01:55:36 -0500] ddilinger: i thought maybe noone knows what i mean
[2013-02-01 01:56:09 -0500] ddilinger: the question is how to trigger the remote convergence?  or better how to trigger a single template run on remote machines after booting a machine
[2013-02-01 01:56:24 -0500] miah: you dont really 'trigger'. chef runs on a interval
[2013-02-01 01:56:34 -0500] ddilinger: so, when i boot a new machine, how do i start using it?
[2013-02-01 01:56:37 -0500] ddilinger: it has to update the remote firewall
[2013-02-01 01:56:47 -0500] ddilinger: not it personally, but an admin in the classical case
[2013-02-01 01:56:48 -0500] miah: hopefully your interval is low =)
[2013-02-01 01:57:02 -0500] josephholsten: ddilinger: any time you say, "I'd rather not do a full convergence," you'll make us suspicious
[2013-02-01 01:57:39 -0500] ddilinger: josephholsten: i suppose its because i dont yet fully understand how convergence happens,  i know it doesnt literally just re-run all the recipes, but i dont fully understand what happens
[2013-02-01 01:58:17 -0500] ddilinger: josephholsten: so saying 'not full convergence' just means 'the only thing i care about is this one template in this one recipe'
[2013-02-01 01:58:25 -0500] ddilinger: i suppose whatever else it does shouldnt happen, because it should already be converged
[2013-02-01 01:58:43 -0500] miah: ddilinger: http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run
[2013-02-01 01:59:30 -0500] miah: orchaestration is hard, especially since chef doesn't have a push model
[2013-02-01 02:03:56 -0500] jb_: ddilinger: you could've a seperate chef-client with --override-runlist set to your firewall-role
[2013-02-01 02:04:32 -0500] jb_: ddilinger: maybe with some shorter interval then the regular chef-client
[2013-02-01 02:05:43 -0500] jb_: or, if you want to do it only once, just use --override-runlist together with --once
[2013-02-01 02:05:56 -0500] ddilinger: jb_: hmm, good info thanks!
[2013-02-01 02:10:09 -0500] josephholsten: that's not good
[2013-02-01 02:10:27 -0500] ddilinger: could also say 'orchestration is hard' is not good ;)
[2013-02-01 02:10:42 -0500] josephholsten: `knife cookbook download foo` is saying "ERROR: EOFError: end of file reached"
[2013-02-01 02:12:38 -0500] josephholsten: it's clearly on the chef server in /var/cache/chef/cookbooks/
[2013-02-01 02:14:19 -0500] jb_: ddilinger: you're welcome. interesting read von partial run lists: http://code.chrisroberts.org/blog/2012/05/09/cooking-up-partial-run-lists-with-chef/
[2013-02-01 02:14:24 -0500] jb_: s,von,on,
[2013-02-01 02:16:10 -0500] jb_: josephholsten: what does the DEBUG say?
[2013-02-01 02:16:39 -0500] josephholsten: this is knife, so there is no -l debug
[2013-02-01 02:17:03 -0500] josephholsten: but I'm trying to  restart the server with -l deug
[2013-02-01 02:17:28 -0500] jb_: -VV?
[2013-02-01 02:19:00 -0500] jb_: josephholsten: there's the commandline-argument -VV for max verbosity
[2013-02-01 02:19:08 -0500] jb_: josephholsten: outputs DEBUG as well
[2013-02-01 02:19:21 -0500] josephholsten_: I learn something new every day
[2013-02-01 02:19:23 -0500] josephholsten_: DEBUG: Sending HTTP Request via GET to chef0001.int.simplymeasured.com:4000/cookbooks/ack
[2013-02-01 02:19:42 -0500] josephholsten_: wtf keyboard
[2013-02-01 02:20:13 -0500] josephholsten_: /lib/ruby/1.9.1/net/http.rb:762:in `initialize': Error connecting to http://chef0001.int.simplymeasured.com:4000/cookbooks/ack - Operation timed out - connect(2) (Errno::ETIMEDOUT)
[2013-02-01 02:21:16 -0500] jb_: hum..
[2013-02-01 02:21:29 -0500] josephholsten: actually, that might have been from my net disconnect
[2013-02-01 02:21:37 -0500] jb_: and the endpoint is reachable from your machine?
[2013-02-01 02:21:37 -0500] jb_: ye..
[2013-02-01 02:21:39 -0500] jb_: :)
[2013-02-01 02:22:41 -0500] josephholsten: and I'm waiting for gist to load.
[2013-02-01 02:24:39 -0500] josephholsten: and I can't hit pastie.org either
[2013-02-01 02:24:47 -0500] josephholsten: fml
[2013-02-01 02:25:52 -0500] josephholsten: ok, here's the two interesting lines:
[2013-02-01 02:25:54 -0500] josephholsten: DEBUG: Sending HTTP Request via GET to chef0001.int.simplymeasured.com:4000/cookbooks/ack/1.0.0/files/60805fda6cc9d17e0f47326a00fbe50e
[2013-02-01 02:26:22 -0500] josephholsten: .../lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock': end of file reached (EOFError)
[2013-02-01 02:26:55 -0500] jb_: telnet host port to make sure?
[2013-02-01 02:27:37 -0500] josephholsten: `knife cookbook show ack` works just fine
[2013-02-01 02:29:27 -0500] jb_: would make sure anyway
[2013-02-01 02:30:36 -0500] josephholsten: yeah, curling it works fine
[2013-02-01 02:32:09 -0500] josephholsten: and someone is screwing with my work internet connection also. because I don't have enough moving parts while I try to debug this.
[2013-02-01 02:35:30 -0500] josephholsten: yeah, something's very wrong with how chef-server-api is responding to these: Params: {"controller"=>"cookbooks", "cookbook_name"=>"iptables", "checksum"=>"a3e990017614802c9df7e93ff12f5775", "action"=>"show_file", "cookbook_version"=>"0.10.0"}
[2013-02-01 02:37:46 -0500] josephholsten: wtf. why does server.rb accept an array for cookbook path
[2013-02-01 04:12:50 -0500] coderanger: josephholsten: Multiple cookbook folders
[2013-02-01 04:12:56 -0500] coderanger: for example, when using librarian
[2013-02-01 04:13:09 -0500] josephholsten: server.rb
[2013-02-01 04:13:25 -0500] josephholsten: I have apparently ruined my chef server
[2013-02-01 04:13:51 -0500] josephholsten: this is unmeasurably exciting. I can no longer download any cookbook files.
[2013-02-01 04:14:17 -0500] coderanger: Yeah, but it is the same underlying config layer :)
[2013-02-01 04:14:27 -0500] coderanger: Just don't do that on a server ;-)
[2013-02-01 04:14:38 -0500] josephholsten: um. yeah.
[2013-02-01 04:14:53 -0500] kallistec: josephholsten: for downloads, the chef application passes the filename to the server, which then streams the file
[2013-02-01 04:15:04 -0500] kallistec: which is why you don't get errors out of chef
[2013-02-01 04:15:32 -0500] kallistec: as for the cookbook_path, that config setting hasn't been relevant to the server since Chef 0.9
[2013-02-01 04:15:41 -0500] josephholsten: I tried knife cookbook upload -a, but the server seems to think I don't actually need to upload all those files.
[2013-02-01 04:15:42 -0500] kallistec: everything is in the checksums directory
[2013-02-01 04:16:19 -0500] kallistec: josephholsten: yes the server tracks the available checksums in the database
[2013-02-01 04:16:48 -0500] josephholsten: couch seems to think it's seen the checksum, but the checksums dir got nuked in a very poorly executed upgrade
[2013-02-01 04:16:51 -0500] kallistec: if you want a nuke-n-pave style solution, do a bulk delete --purge
[2013-02-01 04:18:22 -0500] josephholsten: how's this look?
[2013-02-01 04:18:23 -0500] josephholsten: knife cookbook list | awk '{print $1}' | xargs -L1 knife cookbook delete -ya --purge
[2013-02-01 04:18:40 -0500] kallistec: yeah, that should work
[2013-02-01 04:18:56 -0500] josephholsten: hello shotgun
[2013-02-01 04:19:14 -0500] josephholsten: anyway, I'm apparently going to be rebuilding my chef server soon
[2013-02-01 04:19:20 -0500] kallistec: there's also knife cookbook bulk delete
[2013-02-01 04:19:27 -0500] kallistec: which does all that for you
[2013-02-01 04:19:39 -0500] josephholsten: oh neat
[2013-02-01 04:19:57 -0500] kallistec: bbl
[2013-02-01 04:20:01 -0500] kallistec: good luck
[2013-02-01 04:20:07 -0500] josephholsten: do you have a work-in-progress chef 11 migration doc?
[2013-02-01 04:20:13 -0500] josephholsten: oh. night.
[2013-02-01 04:22:52 -0500] josephholsten: this is why god invented hosted chef.
[2013-02-01 05:32:48 -0500] parshap: node
[2013-02-01 06:42:48 -0500] admin247: Hi
[2013-02-01 08:40:45 -0500] so_chef: Is there a way to use ChefSpec with Berkshelf,  I am getting  Chef::Exceptions::CookbookNotFound for recipes that are included as part of Berkshelf
[2013-02-01 09:18:19 -0500] epta: Could someone please comment http://serverfault.com/questions/474472/assigning-default-attributes-at-a-time ?
[2013-02-01 10:05:05 -0500] ljandrew_: I've often wondered that myself epta
[2013-02-01 10:27:27 -0500] f1gjam: hey guys, anyone here using the community chef-mongodb cookbook?
[2013-02-01 10:27:28 -0500] f1gjam: i am having trouble with the replicaset configuration
[2013-02-01 10:30:47 -0500] chaos: hi
[2013-02-01 10:39:58 -0500] chaos: I'm trying to share some helpers between various cookbooks, is there any proper way to do this?
[2013-02-01 10:40:14 -0500] chaos: i'll need it definitions and providers
[2013-02-01 11:11:09 -0500] Afterglow: chaos: you should be able to write your definitions and providers in your cookbook then when you want to use them declare that cookbook in the depends of the metadata then just use them as cookbook_provider or cookbook_definition the docs on the site are fairly complete you could also see an example of a provider in say the yum cookbook with yum_repository or yum_key
[2013-02-01 11:12:19 -0500] Afterglow: if you write a provider bar in cookbook foo to use it elsewhere just add 'depends foo' into the metadata.rb and call it as foo_bar in your recipe
[2013-02-01 11:12:49 -0500] Afterglow: http://docs.opscode.com/essentials_cookbook_lwrp.html
[2013-02-01 11:14:53 -0500] chaos: Afterglow, but i want to write helper as class/module with methods, and use it across different cookbooks, is it bad approach?
[2013-02-01 11:16:12 -0500] Afterglow: what is the helper for?
[2013-02-01 11:16:23 -0500] mh`: chef
[2013-02-01 11:17:38 -0500] chaos: it's for extracting data about installed packages
[2013-02-01 11:18:00 -0500] chaos: hmm maybe i should use provider/definition
[2013-02-01 11:18:15 -0500] Afterglow: if you want some information about packages installed on a node you could consider using ohai plugin
[2013-02-01 11:18:25 -0500] Afterglow: if one doesn't already do whatever you need
[2013-02-01 11:18:56 -0500] chaos: i found ohai-system_packages plugin
[2013-02-01 11:19:50 -0500] chaos: i found it after i wrote my question, i'm checking if it helps
[2013-02-01 11:19:54 -0500] Afterglow: yes I think in this case ohai is probably the correct approach, in general if you want to surface information about a node then ohai is the way to go, providers/definitions are for taking actions e.g. changing something
[2013-02-01 11:20:41 -0500] Afterglow: ohai plugins are fairly easy to write and distribute so hopefully you can solve your problem that way either with ohai-system_packages or something similar
[2013-02-01 11:20:45 -0500] chaos: thing is, i want to check if package was uninstalled during chef run, and probably i'll have to force ohai to reload, but it looks doable
[2013-02-01 11:21:36 -0500] chaos: anyway thanks for directions ;-)
[2013-02-01 11:24:38 -0500] Afterglow: I don't know if handlers would help you with that, i'm not sure how you'd get the list of uninstalled packages without fiddling with the package provider to make it keep a list
[2013-02-01 11:25:26 -0500] Afterglow: I suppose if you have the list at the beginning of the run you could compare it with a list at the end with a handler, not sure
[2013-02-01 11:42:12 -0500] tibra: hey! I'm new to chef, running chef-solo my postgres recipe looks for its template file in templates/debian/postgresql.conf.erb and I was wondering why it wouldn't take the files directly from templates/*.conf.erb?
[2013-02-01 11:46:55 -0500] lewisp: yo, is it possible to nest attributes in an encrypted data bag for environment specific values? as in the example on the environments page on the wiki. on my chef-client run I get the error: FATAL: NoMethodError: undefined method `unpack' for #<Hash:0x000000028e5dd0>
[2013-02-01 11:48:37 -0500] Afterglow: tibra: default templates go in templates/default/ not just in templates/
[2013-02-01 11:49:27 -0500] tibra: Afterglow: ahh...of course!! how stupid...thx!
[2013-02-01 11:58:02 -0500] alff: guys, question about theory
[2013-02-01 11:58:57 -0500] alff: we have in recipe template which notificate restart service with delayed timing
[2013-02-01 11:59:11 -0500] jwcarman: If I have two different cookbooks in my run list access a data bag, will the data bag's contents be downloaded twice?
[2013-02-01 11:59:19 -0500] jwcarman: or is there some form of caching?
[2013-02-01 12:00:42 -0500] Afterglow: jwcarman: according to the docs "Note that each time you use data_bag_item in a recipe, Chef makes an API call to the server to load the item."
[2013-02-01 12:00:58 -0500] alff: also a little bit later we call that service with action restart and immediately timing
[2013-02-01 12:00:59 -0500] jwcarman: oops, rtfm?
[2013-02-01 12:01:10 -0500] Afterglow: http://wiki.opscode.com/display/chef/Data+Bags :)
[2013-02-01 12:01:14 -0500] jwcarman: Afterglow: thanks, man
[2013-02-01 12:01:58 -0500] alff: does this service restart anyway in conversion time by template notify?
[2013-02-01 12:19:48 -0500] jwcarman: Anybody know if berkshelf can spit out a "tree" of all the cookbook dependencies?
[2013-02-01 12:21:16 -0500] jwcarman: I know it will spit out a list, but can I get it to traverse the cookbooks and print all their dependencies (and theirs, and so on, and so on, and so on...)
[2013-02-01 13:32:02 -0500] ara_: Hi all. I have problem using knife ssh. On my server I can do something like this 'ssh sshuser@myhost.example.com'. But when I do the following: knife ssh "role:test" "echo test" -x sshuser -P sshpassword i get the error message 'WARNING: Failed to connect to node[myhost.example.com] -- Net::SSH::AuthenticationFailed: myhost.example.com'. Any suggestions?
[2013-02-01 13:44:48 -0500] mattt: ara_: i tried a knife ssh yesterday, worked fine
[2013-02-01 13:45:10 -0500] mattt: ara_: sure you don't have myhost.example.com on a non-standard port ?
[2013-02-01 13:50:32 -0500] ara_: mattt: myhost.example.com is on port 22
[2013-02-01 13:51:28 -0500] mattt: ara_: \_o_/
[2013-02-01 13:55:00 -0500] renchap: https://github.com/Fotolia/knife-sharp
[2013-02-01 13:55:16 -0500] renchap: home-made tool for our chef workflow, if it can be useful for some of you
[2013-02-01 13:55:36 -0500] jwcarman: Very cool, renchap!
[2013-02-01 13:55:54 -0500] jwcarman: Thanks for sharing with the community
[2013-02-01 13:58:22 -0500] pixie79: hi all - I am writing a new cookbook for an internal app of ours however it says i have a syntax error when i try to upload 'unexpected $end' and lists the last line of the file - i have no idea where the error is and dont see anything obvious - is there any good tool to help check the syntax and tell me where the real error is?
[2013-02-01 13:59:37 -0500] jwcarman: pixie79: do you use an IDE?
[2013-02-01 13:59:56 -0500] pixie79: no vim
[2013-02-01 13:59:57 -0500] mattt: i know you can test a cookbook prior to uploading, but i doubt that'll tell you anything you don't already know
[2013-02-01 14:00:00 -0500] jwcarman: pixie79: what type of file is it?  Recipe?
[2013-02-01 14:00:07 -0500] pixie79: yes recipe
[2013-02-01 14:00:21 -0500] pixie79: it is only a few lines long hence my confusion
[2013-02-01 14:00:28 -0500] jwcarman: pixie79: do you have an extraneous "end" in there?
[2013-02-01 14:00:30 -0500] mattt: pixie79: can you paste it?  or sensitive ?
[2013-02-01 14:00:34 -0500] jwcarman: gist?
[2013-02-01 14:00:35 -0500] mattt: sounds like extra end :)
[2013-02-01 14:00:36 -0500] pixie79: although i am doing a ruby File.exists?check
[2013-02-01 14:00:54 -0500] jwcarman: can you anonymize the code to protect the innocent and share it with us?
[2013-02-01 14:00:59 -0500] jwcarman: :)
[2013-02-01 14:01:28 -0500] pixie79: https://gist.github.com/4691460
[2013-02-01 14:01:58 -0500] mattt: oh
[2013-02-01 14:02:11 -0500] pixie79: not enough to worry about anonomze
[2013-02-01 14:02:25 -0500] mattt: that if/do looks odd
[2013-02-01 14:03:05 -0500] jwcarman: no "do" needed for if
[2013-02-01 14:03:12 -0500] jwcarman: Get rid of that do
[2013-02-01 14:03:15 -0500] pixie79: ok
[2013-02-01 14:03:47 -0500] jwcarman: test it before you try to upload, too
[2013-02-01 14:03:50 -0500] jwcarman: faster feedback
[2013-02-01 14:03:53 -0500] pixie79: thanks that sorts the upload
[2013-02-01 14:04:02 -0500] pixie79: how do i do that ?
[2013-02-01 14:04:17 -0500] jwcarman: I think it's knife test?  Let me look
[2013-02-01 14:04:17 -0500] mattt: is it cleaner to use a not_if than that wrapping if statement?
[2013-02-01 14:04:27 -0500] mattt: knife cookbook test i think
[2013-02-01 14:04:32 -0500] jwcarman: that's not it
[2013-02-01 14:04:37 -0500] pixie79: arh ok
[2013-02-01 14:04:53 -0500] jwcarman: I think matt's got it
[2013-02-01 14:04:56 -0500] jwcarman: knife cookbook test
[2013-02-01 14:05:02 -0500] mattt: knife cookbook test <cookbook name>
[2013-02-01 14:05:17 -0500] jwcarman: Yeah, using the not_if would read better
[2013-02-01 14:05:21 -0500] mattt: pixie79: http://wiki.opscode.com/display/chef/Resources -- have a look at not_if / only_if
[2013-02-01 14:05:25 -0500] jwcarman: or only_if
[2013-02-01 14:05:29 -0500] jwcarman: in your case
[2013-02-01 14:06:03 -0500] jwcarman: ^5s matt back
[2013-02-01 14:06:17 -0500] pixie79: ok
[2013-02-01 14:15:53 -0500] eolamey: does anyone know if using an LWRP inside the action definition of another LWRP is supported?
[2013-02-01 14:19:15 -0500] tibra: I use chef-solo, say I clone one of opscodes cookbook into my cookbooks folder and add it to the run list, everytime I try to run a cloned cookbook it get Chef::Exceptions::CookbookNotFound: Cookbook _name_ not found. my self-written cookbooks do work. what am I doing wrong?
[2013-02-01 14:33:49 -0500] tibra: or is it not possible to clone cookbooks and use them in the run list? do i have to use knife for that?
[2013-02-01 14:38:05 -0500] pixie79: how should i be requiring that another cookbook is installed as a dependency before this one? ( i know order is set by the order they are specified but i just want to checked it is there) - i have tried 'include_recipe authconfig' but i guess that is wrong as it is a cookbook
[2013-02-01 14:39:31 -0500] pixie79: or should i have done include_recipie authconfig::default ?
[2013-02-01 14:39:54 -0500] jwcarman: you have to include the recipe.  default would work I'd think
[2013-02-01 14:40:02 -0500] renchap: win 139
[2013-02-01 14:40:07 -0500] pixie79: ok
[2013-02-01 14:41:06 -0500] tibra: related to pixie79 's question: is the `depends "somecookbook"`in the metadata.rb critical or just for information?
[2013-02-01 14:45:32 -0500] pixie79: nope that seems to give me cant find resource authconfig still, i wonder if tibra question is the correct one ?
[2013-02-01 14:46:16 -0500] jwcarman: Do you have it in your chef server?
[2013-02-01 14:46:21 -0500] jwcarman: If not, I'd check out berkshelf
[2013-02-01 14:47:07 -0500] pixie79: it is there and pulled down
[2013-02-01 14:49:03 -0500] jwcarman: Do you have a gist?
[2013-02-01 14:49:56 -0500] jwcarman: What operating system?
[2013-02-01 14:50:01 -0500] pcn: ohai chefs
[2013-02-01 14:51:48 -0500] pcn: If I want to copy a reference to a place in the node mash manipulate it, and have those changes refleced in the node, do I need to do a Mash.new to preserve the type?
[2013-02-01 15:18:57 -0500] vanheerj: hi there
[2013-02-01 15:25:40 -0500] Afterglow: tibra: depends in the metadata tells chef-client to make sure it downloads the cookbook from server because it is required somewhere
[2013-02-01 15:26:08 -0500] Afterglow: e.g. because you want to use some provider from it
[2013-02-01 15:26:55 -0500] Afterglow: http://wiki.opscode.com/display/chef/Metadata#Metadata-depends
[2013-02-01 15:27:03 -0500] ieldib: hey everybody
[2013-02-01 15:27:35 -0500] ieldib: i am having an issue with chef,   followed the quickstart guide,  webui and everything works, i can see my nodes/client however i see no cookbooks in the webui
[2013-02-01 15:27:39 -0500] ieldib: even though i've done a knife site install
[2013-02-01 15:27:55 -0500] ieldib: i tried to edit a node using knife and added a cookbook::recipe to a run_list
[2013-02-01 15:28:00 -0500] ieldib: it just shows up but its never applied
[2013-02-01 15:28:58 -0500] Afterglow: ieldib: afair knife cookbook site install will just copy the cookbook to your local system then you would need to knife cookbook upload it to the server
[2013-02-01 15:29:52 -0500] ieldib: ahh
[2013-02-01 15:31:11 -0500] ieldib: Afterglow, i don't see the knife command to apply a cookbook to a role/environment
[2013-02-01 15:31:15 -0500] ieldib: or to a specific node anywhere
[2013-02-01 15:31:36 -0500] Afterglow: knife node edit the node and insert the recipe into the run_list likewise for a role
[2013-02-01 15:31:37 -0500] ieldib: i can find a ton of info on getting cookbooks from the repo and creating my own
[2013-02-01 15:31:45 -0500] ieldib: ahh like i have already done
[2013-02-01 15:32:14 -0500] spox: there is also `knife node run_list` command
[2013-02-01 15:32:26 -0500] spox: you can add/remove items from a nodes run list
[2013-02-01 15:32:33 -0500] spox: without needing to muck in the json
[2013-02-01 15:32:38 -0500] Afterglow: that I didn't know :)
[2013-02-01 15:32:59 -0500] ieldib: awesome, thanks guys
[2013-02-01 15:33:43 -0500] Afterglow: ieldib: when chef-client runs the second line or so should display the run list it is using if you need to confirm
[2013-02-01 15:34:12 -0500] ieldib: is there anyway i can run it now
[2013-02-01 15:34:30 -0500] ieldib: cool
[2013-02-01 15:34:38 -0500] ieldib: i just run chef-client status and i can see it processing
[2013-02-01 15:34:40 -0500] ieldib: :)
[2013-02-01 15:50:26 -0500] pixie79: is there an arch type check so i can tell if the platform is 32bit or 64bit in my recipe ?
[2013-02-01 15:50:53 -0500] jwcarman: pixie79: sounds like an Ohai thing
[2013-02-01 15:52:10 -0500] spox: pixie79: node[:kernel][:machine]
[2013-02-01 15:52:34 -0500] pixie79: ok thanks
[2013-02-01 15:52:38 -0500] mattray: knife node show os-9820733022882316 -a kernel.machine
[2013-02-01 15:53:05 -0500] mattray: I wonder how consistent that is between platforms?
[2013-02-01 15:53:15 -0500] mattray: (not that you probably have to care about it too much)
[2013-02-01 15:55:30 -0500] pixie79: hm that gave me a blank answer
[2013-02-01 15:55:52 -0500] pixie79: it is linux - testing on vagrant with oel6.3 at the moment from an apple osx host
[2013-02-01 15:56:30 -0500] pixie79: so i did 'knife node show localhost -a kernel.machine'
[2013-02-01 16:10:19 -0500] siXy: hi.  after rebuilding a busted chef server and reimporting the cookbooks, databags, roles, nodes, environments, etc I get a json parse error on all chef-client runs: http://fpaste.org/FoD9/
[2013-02-01 16:10:20 -0500] BleakLife: question regarding ohai and hints,  i tweaked the knife-linode gem to set Chef::Config[:knife][:hints]['linode'] just before running bootstrap on the new server.  I thought that meant the hints would end up in /etc/chef/ohai/hints/ but nothing is there?  where do these values end up?
[2013-02-01 16:11:01 -0500] BleakLife: i need it because linode has the wierd setup where they give you a private ip, tell you about it when creating the server by api,  but then dont set it up on the machine
[2013-02-01 16:11:14 -0500] BleakLife: so i have to pass the private ip in via hint so it can be configured
[2013-02-01 16:11:39 -0500] Afterglow: siXy: on the line indicated on the very last part there is no double quote right at the end of the line
[2013-02-01 16:12:34 -0500] siXy: Afterglow: right - but I've no idea where that json is coming from
[2013-02-01 16:12:53 -0500] siXy: it's not anywhere in the recipe itself
[2013-02-01 16:14:41 -0500] Afterglow: not sure then, if you have all your stuff as files from the import try searching them all for the checksum or something that should be pretty unique
[2013-02-01 16:15:01 -0500] BleakLife: perhaps I cant acces the hints directly?  do i need to create an ohai plugin perhaps?
[2013-02-01 16:16:24 -0500] siXy: the file that it's talking about is a very simple template that's not been changed in ages and worked fine before
[2013-02-01 16:17:35 -0500] siXy: if I curl the URL, I get a bad request error
[2013-02-01 16:23:08 -0500] BleakLife: so on closer review of the ohai-6.16.0 gem, it seems the hints really should end up in /etc/chef/ohai/hints/  i  cant figure out any other possible thing ... so what am i doing wrong?  is setting Chef::Config[:knife][:hints]['linode'] the wrong thing to do?  do i have to do something in addition to setting the hint for it to be saved?  really not finding any docs on hints
[2013-02-01 16:24:45 -0500] siXy: what generates the JSON for each cookbook that starts: '{"specificity":"default","name":...?
[2013-02-01 16:24:53 -0500] siXy: because that part just seems totally broken
[2013-02-01 16:29:22 -0500] BleakLife: siXy: seems we are both having a ton of luck this morning :(
[2013-02-01 16:29:59 -0500] BleakLife: my next step is sadly just boot and destroy instances in virtualbox untill i can guess at how this is supposed to work ...
[2013-02-01 16:33:37 -0500] pcn: siXy there is a merge that happens between different places where node data is defined
[2013-02-01 16:34:09 -0500] kallistec: siXy: this is probably related to a change on your server. What distro?
[2013-02-01 16:34:16 -0500] pcn: the node itself is a Mash type that includes data from existing node data on the server, data that's discovered, data that's defined in defalt sections in cookbooks, etc.
[2013-02-01 16:34:24 -0500] siXy: kallistec: RHEL 6
[2013-02-01 16:34:27 -0500] kallistec: siXy: and how'd you install?
[2013-02-01 16:34:52 -0500] siXy: kallistec: RPMs, largely selfbuilt
[2013-02-01 16:35:13 -0500] pcn: siXy start here: http://wiki.opscode.com/display/chef/Attributes then follow the links to the new docs which should help clarify where the data is coming from
[2013-02-01 16:35:32 -0500] siXy: the rubygem-json RPM is a fairly old version - I could potentially update it
[2013-02-01 16:35:39 -0500] kallistec: siXy: this reminds me of an issue with the JSON gem from a year ago or more where...
[2013-02-01 16:35:47 -0500] kallistec: heh
[2013-02-01 16:36:01 -0500] kallistec: siXy: try that for sure
[2013-02-01 16:36:39 -0500] kallistec: pcn: I'm pretty sure the borked JSON is generated server side when asking for the cookbooks for the run
[2013-02-01 16:37:13 -0500] pcn: You're probably right, I'm just getting to the docs for the source of what's coming from where.  Hopefully I didn't confuse anyone
[2013-02-01 16:38:16 -0500] kallistec: pcn: no worries. I'm 90% sure this is a json gem bug that is fixed in newer versions
[2013-02-01 16:40:45 -0500] siXy: of course the downside of using RPMs is that it takes a little longer to build the update & deploy it...
[2013-02-01 17:02:08 -0500] ttgb: When should I be included recipes through include_recipe rather than just specifying them on the roles run list?
[2013-02-01 17:16:01 -0500] BleakLife: ttgb: good question, i'm curious too :)
[2013-02-01 17:16:39 -0500] ttgb: Seems like it's something that might have some logical separation that I'm not aware of
[2013-02-01 17:16:49 -0500] bakins: ttgb: I think roles are evil - but that's a much larger discussion ;)
[2013-02-01 17:17:02 -0500] bakins: so I only ever use include_recipe
[2013-02-01 17:17:22 -0500] BleakLife: bakins: so in your case,  you pretty much assign one recipe and that pulls in everything else?
[2013-02-01 17:17:50 -0500] ttgb: bakins: My head hurts from reading about reusable cookbooks and how roles are evil, so I've quickly forgot all that....
[2013-02-01 17:19:18 -0500] bakins: BleakLife: yes
[2013-02-01 17:19:48 -0500] bakins: ttgb: all philosophy aside, don't depend on other stuff being in run list - if you need it for your cookbook, then depend on it and include it
[2013-02-01 17:22:02 -0500] ttgb: I have what I've interpreted to be a slightly unorthodox Chef setup, where I'm essentially using a single server to serve multiple small sites (one site = one server = one cookbook = one role). Everything I read makes me feel like this is awful but it works well, except for the fact it feels messy.
[2013-02-01 17:22:43 -0500] cassianoleal: I'm getting "ERROR: ArgumentError: invalid byte sequence in UTF-8" when doing a knife bootstrap. no idea why. anyone's got any pointers?
[2013-02-01 17:27:13 -0500] jtimberman: bakins: yeah, i think that's a bug we'll want to get fixed at some point, you can do template "/etc/sv/foo/run" tho as a workaroudn :)
[2013-02-01 17:27:24 -0500] bakins: jtimberman: boo :P
[2013-02-01 17:27:28 -0500] jtimberman: and have it notifies :restart,
[2013-02-01 17:27:47 -0500] bakins: I figured - want me to log a ticket or you just gonna add it to mental list?
[2013-02-01 17:28:03 -0500] jtimberman: ticket please
[2013-02-01 17:28:15 -0500] bakins: k - If i remember after this meeting ;)
[2013-02-01 17:28:58 -0500] ttgb: bakins: If you only use include_recipe and think roles are evil, where do you override attributes on the (third-party?) included cookbooks?
[2013-02-01 17:29:17 -0500] bakins: node.set[blah]
[2013-02-01 17:29:59 -0500] ttgb: In your application cookbook attributes?
[2013-02-01 17:30:10 -0500] bakins: FWIW, I'm a recent convert to this way of thinking, so I'm not an expert. it is very nice to do full roll outs and rollbacks - including metadata
[2013-02-01 17:30:22 -0500] bakins: yes, or in the recipe of 'wrapper'
[2013-02-01 17:31:17 -0500] ttgb: Makes sense but feels a little dirty to put something in a cookbooks attributes that has no bearing on the functionality of the recipes in it.
[2013-02-01 17:32:12 -0500] josephholsten: ttgb: typically those things go in an 'application' cookbook
[2013-02-01 17:32:32 -0500] josephholsten: because they have bearing on the application.
[2013-02-01 17:33:27 -0500] cassianoleal: I'm unable to bootstrap any new nodes because i'm getting "ERROR: ArgumentError: invalid byte sequence in UTF-8" when running knife bootstrap. Does anyone have any idea what I could do to either fix it or investigate? I'm clueless...
[2013-02-01 17:33:49 -0500] siXy: which version of rubygem-json *should* I be using with current chef?
[2013-02-01 17:34:38 -0500] josephholsten: cassianoleal: sounds like you're running under 1.9 without a LANG environment variable.
[2013-02-01 17:35:24 -0500] josephholsten: try `export LANG=en_US.UTF-8`
[2013-02-01 17:36:09 -0500] cassianoleal: josephholsten: no dice same problem.
[2013-02-01 17:36:29 -0500] josephholsten: siXy: looks like I'm using json 1.5.4
[2013-02-01 17:36:49 -0500] josephholsten: cassianoleal: is the error happening on your local machine or on the machine you're bootstrapping
[2013-02-01 17:37:45 -0500] cassianoleal: josephholsten: on my workstation
[2013-02-01 17:41:13 -0500] cassianoleal: josephholsten: besides, it used to work just fine I bootstrapped a node a couple of days ago, and I have no clue as to what could have changed...
[2013-02-01 17:42:23 -0500] siXy: josephholsten: thanks
[2013-02-01 17:42:40 -0500] deed02392: how should I install PHP extensions through chef?
[2013-02-01 17:43:02 -0500] deed02392: i'm not sure if I should modify the community php cookbook
[2013-02-01 17:43:08 -0500] cassianoleal: josephholsten: could this have anything to do with my problem? http://henrik.nyh.se/octopress/2008/03/irb-readline/ I'm lost...
[2013-02-01 17:49:46 -0500] mattupstate: having trouble with a recipe that supposed to run apt-get update after it adds a new repository, but it seems as if it won't run immediately after
[2013-02-01 17:50:08 -0500] mattupstate: currently have the build-essential default recipe in the run list as well with compiletime=true
[2013-02-01 17:50:17 -0500] mattupstate: which runs apt-get update
[2013-02-01 17:51:23 -0500] mattupstate: if i ssh into the box after the failed chef-client run and do sudo apt-get update the package thats trying to get installed appears and i can install it
[2013-02-01 17:55:50 -0500] timsmith: what version of chef
[2013-02-01 17:55:56 -0500] timsmith: there were some notifies bugs a while back
[2013-02-01 17:56:51 -0500] tomdzk: mattupstate: you can try adding a 'notifies :run, resources(:execute => "apt-get-update"), :immediately' to your apt_repository section, esp. for older apt cookbook versions
[2013-02-01 17:57:56 -0500] mattupstate: 10.14.4
[2013-02-01 17:58:08 -0500] wamilton: anyone have an opinion on when it's appropriate to use include_recipe vs. putting a recipe in the run list, i.e. to guarantee that the system is in the right state for the recipe to run?
[2013-02-01 17:58:18 -0500] mattupstate: just realized i have a rather old version of the apt cookbook as well
[2013-02-01 17:59:49 -0500] tomdzk: mattupstate: you should use version 1.7.0 of the apt cookbook, newer versions require a more recent chef version
[2013-02-01 18:01:54 -0500] tomdzk: wamilton: include_recipe gives you more fine grained control (as it doesn't have to be at the top of the file), and more explicitly states the dependency; I'd use include_recipe if the recipe doesn't work without the dependency
[2013-02-01 18:03:35 -0500] wamilton: tomdzk: ok, but all that does is configure resources a certain way, right? it doesn't actually guarantee that a package resource from the included recipe actually gets evaluated before my resource that needed that done, right?
[2013-02-01 18:04:09 -0500] tomdzk: wamilton: right, include_recipe runs the included recipe, it won't execute any resources from the cookbook
[2013-02-01 18:05:10 -0500] tomdzk: wamilton: but if the included recipe has a package ... call, then that will get executed
[2013-02-01 18:05:10 -0500] wamilton: tomdzk: so in that case is there any merit in using the resources() method to force them to run, or should I solve it by creating a role?
[2013-02-01 18:06:18 -0500] tomdzk: wamilton: include_recipe should execute the included recipe in the same way as a recipe[...] in the role would
[2013-02-01 18:11:08 -0500] wamilton: tomdzk: good to know... I literally had to do this: https://gist.github.com/4693011
[2013-02-01 18:12:19 -0500] wamilton: tomdzk: so I guess my question is, would I have had to do that or used subscribe/notify even if I had the git::default recipe in the run list ahead of my recipe?
[2013-02-01 18:15:27 -0500] tomdzk: wamilton: if you need the recipe to run, I'd probably use include_recipe -  using subscribe makes assumptions about what that recipe does which might change in future versions
[2013-02-01 18:15:59 -0500] cassianoleal: josephholsten: found the problem with the invalid byte seq in UTF-8  my local validation key had been corrupted. replacing it solved the problem...
[2013-02-01 18:24:54 -0500] KarlHungus: party people. why do roles/data bags/environments make me so stabby? are there some good patterns for using them in a team environment with a dcvs like git?
[2013-02-01 18:25:21 -0500] KarlHungus: holoway has a few comments and a repo for implementing git hooks to keep things in sync
[2013-02-01 18:26:21 -0500] KarlHungus: has anyone adopted that workflow with any succcess?
[2013-02-01 18:27:19 -0500] c_t: I keep my roles, data bags, and environments in git, and it works fine
[2013-02-01 18:27:32 -0500] c_t: then again, only two people update them, so coodinating's pretty easy
[2013-02-01 18:28:29 -0500] doomviking: I just yell at people for not committing their shit
[2013-02-01 18:28:31 -0500] KarlHungus: yes, we use git as well for the repo, but the trusth for those files isn't in git, its on the chef server. so if a user runs a knife command to update the environment (for example) without a git pull, it breaks
[2013-02-01 18:28:51 -0500] doomviking: works great
[2013-02-01 18:28:55 -0500] KarlHungus: or someone will update the env and not push the changes until a while alter when their feature is done
[2013-02-01 18:29:24 -0500] KarlHungus: doomviking: yeah. i'd rather build processes and tools than resorting to making feel like they did something wrong because communication is sucking
[2013-02-01 18:29:40 -0500] KarlHungus: point taken, though. thats sort of where we currently are...
[2013-02-01 18:30:02 -0500] doomviking: then "committing their shit" becomes part of the process :)
[2013-02-01 18:30:19 -0500] c_t: yeah, this might be a case where software can only do so much
[2013-02-01 18:31:06 -0500] KarlHungus: hmm. so, thats probably not true. i have more than a few ideas on how to solve this, but i'd rather fish around here before spouting off some half0baked untested nonsense :P
[2013-02-01 18:31:32 -0500] josephholsten: KarlHungus: check out knife spork. it's got a git plugin.
[2013-02-01 18:31:49 -0500] KarlHungus: its certainly a tool problem. git is distributed, but the usage pattern is more like svn w/ chef, since you have a central hub that holds the truth
[2013-02-01 18:32:01 -0500] KarlHungus: josephholsten: yup. spork is great. thanks, etsy and sethvargo!
[2013-02-01 18:32:47 -0500] KarlHungus: josephholsten: but it doesn't prevent people from uploading envs/roles/bags to chef server before pushing those changes to git
[2013-02-01 18:33:02 -0500] josephholsten: what I really want is to have a git push run a jenkins job to upload everything that changed.
[2013-02-01 18:33:17 -0500] KarlHungus: josephholsten: yes. that was on my list of ideas ;) we do that with cookbooks already
[2013-02-01 18:33:42 -0500] josephholsten: I've got something like that, but it prevents be from using spork because my script uploads all cookbooks.
[2013-02-01 18:33:42 -0500] sethvargo: josephholsten KarlHungus you can even write your own plugins if u want
[2013-02-01 18:34:54 -0500] josephholsten: I'd basically like a rake task that uploads everything that is changed, so the frozen cookbooks only break when someone checks in changes without bumping
[2013-02-01 18:35:51 -0500] josephholsten: I know that chef server doesn't even accept uploads for files it already has a matching checksum for.
[2013-02-01 18:36:06 -0500] josephholsten: so the pieces are all there, I just don't know how to glue them together yet
[2013-02-01 18:36:09 -0500] miah: knife-spork
[2013-02-01 18:36:22 -0500] KarlHungus: josephholsten: https://gist.github.com/4597109
[2013-02-01 18:36:25 -0500] miah: https://github.com/jonlives/knife-spork
[2013-02-01 18:37:24 -0500] josephholsten: nice
[2013-02-01 18:37:53 -0500] wamilton: we literally just use a post-receive hook in gitolite...
[2013-02-01 18:38:11 -0500] KarlHungus: wamilton: bah. this is github :P
[2013-02-01 18:38:37 -0500] wamilton: KarlHungus: even easier then, right?
[2013-02-01 18:39:06 -0500] KarlHungus: not at all
[2013-02-01 18:39:23 -0500] KarlHungus: my chef is not publically reachable
[2013-02-01 18:39:39 -0500] josephholsten: I've got to figure out how I want to expose my jenkins hook to github
[2013-02-01 18:39:47 -0500] josephholsten: it's just polling today
[2013-02-01 18:40:01 -0500] KarlHungus: but, i think jenkins jobs for chef_roles, chef_environments, and chef_data_bags will do the trick nicely
[2013-02-01 18:40:51 -0500] wamilton: josephholsten: https://help.github.com/articles/post-receive-hooks
[2013-02-01 18:42:17 -0500] josephholsten: yes. that doesn't help when your jenkins is inside a vpn. which is why I need to figure out how to /expose/ my jenkins hook endpoint to github.
[2013-02-01 18:57:53 -0500] KarlHungus: hrm. one flaw with using jenkins to handle data bags is encrypted data bags :(
[2013-02-01 18:58:50 -0500] mstyne: afternoon all
[2013-02-01 18:59:25 -0500] mstyne: are any of you folks aware of a utility to profile a chef-client run
[2013-02-01 18:59:32 -0500] mstyne: to determine which processes take the longest
[2013-02-01 19:00:16 -0500] mstyne: now that I have things working(tm) i'd like to get them to work faster
[2013-02-01 19:08:04 -0500] r3vamp: has anyone tried having multiple instances of chef_server on one machine?
[2013-02-01 19:08:23 -0500] KarlHungus: i have using freebsd jails
[2013-02-01 19:09:00 -0500] r3vamp: Googling freebsd jails...
[2013-02-01 19:09:04 -0500] chris613: I recently used a clever one-liner to show me all of the cookbooks and their versions that are cached on a node. I can't seem to find the command again, though. Does anyone know a way?
[2013-02-01 19:09:30 -0500] chris613: For bonus points, I remember reading that some node attribute holds a list of every recipe (or cookbook?) that was EVER executed on the node. Does that exist?
[2013-02-01 19:10:37 -0500] tomdzk: r3vamp: we were talking about that yesterday, check the end of http://community.opscode.com/chat/chef/2013-01-31
[2013-02-01 19:11:13 -0500] r3vamp: Thanks tomdzk , reading it now
[2013-02-01 19:12:01 -0500] r3vamp: chris613: try looking at: http://rubydoc.info/gems/chef/Chef/Node
[2013-02-01 19:12:39 -0500] bemu: Does anyone have a contact at penguin computing? It is ridiculous how difficult it is to buy gear from them.
[2013-02-01 19:12:53 -0500] chris613: r3vamp: Alright, this could lead me in the right direction
[2013-02-01 19:20:38 -0500] deed02392: knife is telling me I have uncommitted changes but I've done a knife cookbook upload --all
[2013-02-01 19:22:17 -0500] josephholsten: deed02392: are you using git? perhaps it's talking about there?
[2013-02-01 19:30:59 -0500] chris613: I'm looking for a way to access the list of every recipe that is executed in a run. Not the "expanded run list", but all of the recipes that this list "include_recipe"'s as well.
[2013-02-01 19:32:56 -0500] tomdzk: chris613: try 'node.run_list.expand(environment).recipes' (if using chef server)
[2013-02-01 19:33:21 -0500] chris613: tomdzk: Will give it a shot, thanks
[2013-02-01 19:33:22 -0500] tomdzk: chris613: not sure though if this includes include_recipe
[2013-02-01 19:33:46 -0500] chris613: tomdzk: the worst thing is that I know I've done this before, I just can't find my notes about it :P
[2013-02-01 19:39:09 -0500] chris613: tomdzk: FYI, that does not list things that are "included", it only shows the expanded run list.
[2013-02-01 20:12:15 -0500] martinisoft: Anyone here familiar with dependency resolution with Berkshelf?
[2013-02-01 20:15:25 -0500] kindsol: a bit
[2013-02-01 20:15:38 -0500] kindsol: martinisoft: ^^
[2013-02-01 20:15:40 -0500] martinisoft: having a namespace conflict with cookbook dependencies
[2013-02-01 20:16:00 -0500] kindsol: can you post error?
[2013-02-01 20:16:17 -0500] martinisoft: not so much an error, just the wrong cookbook being pulled
[2013-02-01 20:16:29 -0500] martinisoft: instead of pulling from another referenced cookbook, its going from the opscode site
[2013-02-01 20:16:36 -0500] martinisoft: is there a way to tell berkshelf otherwise?
[2013-02-01 20:21:27 -0500] martinisoft: I have the proper cookbook referenced in the Berksfile
[2013-02-01 20:21:36 -0500] martinisoft: but its ignoring it during dependency resolution
[2013-02-01 20:21:43 -0500] martinisoft: so im not sure if its deferring to something else
[2013-02-01 20:28:47 -0500] kindsol: can you post your Berksfile?
[2013-02-01 20:33:40 -0500] spox: martinisoft: you specifying a cookbook when you upload?
[2013-02-01 20:34:14 -0500] martinisoft: spox: yup I am
[2013-02-01 20:34:49 -0500] spox: martinisoft: https://github.com/RiotGames/berkshelf/commit/4f5b1e00c2bed897a089a7ef6aba8a813c77efc0
[2013-02-01 20:34:51 -0500] martinisoft: this cookbook depends on a cookbook on github, but there is an identically named one on the opscode site, so its picking that one before going with the github referenced one in the berksfile
[2013-02-01 20:34:52 -0500] spox: that's the fix
[2013-02-01 20:34:59 -0500] spox: hasn't been released yet
[2013-02-01 20:35:11 -0500] martinisoft: ah
[2013-02-01 20:35:16 -0500] martinisoft: go figure :D
[2013-02-01 20:35:23 -0500] martinisoft: thanks spox :)
[2013-02-01 20:35:28 -0500] spox: martinisoft: sure :)
[2013-02-01 20:35:32 -0500] mmorris: is there an omnibus 10.18.x ubuntu 10.04 vm available from Opscode? I have the 10.14.4
[2013-02-01 20:35:38 -0500] martinisoft: hope a new release is cut soon, I know rubygems is still in read-only mode for now
[2013-02-01 20:35:50 -0500] martinisoft: mmorris: see their bento project
[2013-02-01 20:36:01 -0500] martinisoft: think its opscode/bento on github
[2013-02-01 20:36:11 -0500] martinisoft: they linked to new omnibus VMs
[2013-02-01 20:37:50 -0500] mmorris: martinisof: thnaks!
[2013-02-01 20:49:29 -0500] tspauld98: hi there  I've been googling for guidance but I can't find an answer on whether it's advisable to have a single client installed on multiple nodes
[2013-02-01 20:49:49 -0500] tspauld98: is there a community perspective on this question?
[2013-02-01 20:50:58 -0500] chris613: tspauld98: Sounds sketchy to me, but I can't tell you offhand why it's bad
[2013-02-01 20:51:54 -0500] tspauld98: I did find a comment on the opscode wiki that having a single client for multiple nodes "was not a feature of Chef"  but that is counter to the documentation
[2013-02-01 20:52:38 -0500] tspauld98: although the documentation doesn't seem to elaborate on HOW to have a single client installed on multiple nodes
[2013-02-01 20:52:50 -0500] miah: i typically give each node its own unique client. and dedicate unique clients to one off scripts that need to pull details from chef.
[2013-02-01 20:53:29 -0500] tspauld98: so miah, that means you have more clients than nodes in that case?  wow, ok  I didn't think of that
[2013-02-01 20:54:29 -0500] tspauld98: so client is really an "identity" to the chef server  in the same way a username/password combination is to a web application?
[2013-02-01 21:02:25 -0500] btm: @opscode cookbook code review. join: http://bit.ly/YJozmB watch: http://youtu.be/OrdLRq0HGR4 #opschef
[2013-02-01 21:03:01 -0500] btm: tspauld98: client is authentication and authorization. node is a data store.
[2013-02-01 21:03:27 -0500] tspauld98: thanks, btm, that helps  I'll plan accordingly
[2013-02-01 21:06:44 -0500] deed02392: josephholsten, well I cloned the chef repos to begin with
[2013-02-01 21:06:51 -0500] deed02392: but I don't understand why it's complaining about it when all I want to do is a cookbook site install
[2013-02-01 21:06:57 -0500] deed02392: it never mentioned this before when I'd done that
[2013-02-01 21:07:28 -0500] deed02392: it just says I have uncommitted changes
[2013-02-01 21:07:32 -0500] deed02392: but where am I supposed to be committing them
[2013-02-01 21:34:59 -0500] ranjibd: deed02392, cookbook install will download the cookbook, create a vendor branch, add the downloaded cookbook there, merge it back to your current branch
[2013-02-01 21:35:38 -0500] ranjibd: so, before you invoke site install, do a git status, and check you have any thing staged
[2013-02-01 21:40:41 -0500] jchap: Hello folks - Hoping someone might be able to help out with an issue using the only_if condition on a script in a recipe.
[2013-02-01 21:41:01 -0500] ranjibd: jchap, shoot
[2013-02-01 21:43:39 -0500] jchap: So, I have the following:
[2013-02-01 21:43:53 -0500] jchap: bash "delete_files" do   user "root"   cwd "/path/to/files"   code <<-EOH     rm files*   EOH   only_if "ls files*" end
[2013-02-01 21:43:58 -0500] jchap: Obviously, formatted much nicer
[2013-02-01 21:45:05 -0500] jchap: The problem is, the only_if never seems to allow it to run, even when the 'ls' command returns a 0 exit code
[2013-02-01 21:45:21 -0500] jchap: I tried this with the file resource before, but it doesn't seem to accept wildcards that I can tell
[2013-02-01 22:04:54 -0500] ranjibd: jchap, did you tried the directory resource ?
[2013-02-01 22:05:21 -0500] ranjibd: also if you mean the files starting with  /path/to/files
[2013-02-01 22:06:05 -0500] ranjibd: you can use the Dir['/path/to/files/*'].each { |f| file f {action :delete }}
[2013-02-01 22:06:40 -0500] ranjibd: jchap, but these assumes that  you have the list of the files available during compile tinme
[2013-02-01 22:07:06 -0500] jchap: The files are unknown, unfortunately
[2013-02-01 22:07:22 -0500] jchap: We only know what they start with.
[2013-02-01 22:28:04 -0500] ranjibd: jchap, you can try that Dir[/path/*] construct, it will work for files that are not created by the chef run itself, you dont have to know their name before hand
[2013-02-01 22:28:30 -0500] jchap: Ok, thanks.  I'll give it a shot.
[2013-02-01 22:41:00 -0500] greenmoss: anyone had luck using the openldap community cookbook with berkshelf?
[2013-02-01 22:50:26 -0500] timsmith: that cookbook needs some love in general
[2013-02-01 22:51:25 -0500] greenmoss: it's kind of confusing
[2013-02-01 22:51:55 -0500] greenmoss: "If installing for the first time, the initial directory needs to be created"
[2013-02-01 22:52:01 -0500] greenmoss: which directory?
[2013-02-01 22:52:08 -0500] greenmoss: oh well, reading code...
[2013-02-01 22:53:38 -0500] ranjibd: greenmoss, installing what ?
[2013-02-01 22:53:55 -0500] greenmoss: openldap community cookbook
[2013-02-01 22:54:23 -0500] greenmoss: as a connector in a another berkshelf-adapted cookbook
[2013-02-01 22:54:45 -0500] greenmoss: s/connector in/auth backend for/
[2013-02-01 22:55:00 -0500] ranjibd: hmm
[2013-02-01 22:55:17 -0500] greenmoss: no worries, I'll just read the code
[2013-02-01 22:55:27 -0500] greenmoss: I thought someone might have an example somewhere, is all
[2013-02-01 23:01:24 -0500] deed02392: i'm trying to figure out how I'm supposed to use application to deploy my PHP webapp
[2013-02-01 23:04:52 -0500] mkirk: Any ideas why I'm seeing "WARN: This recipe uses search. Chef Solo does not support search."
[2013-02-01 23:04:59 -0500] mkirk: I'm not running solo...
[2013-02-01 23:06:19 -0500] mkirk: For some reason, Chef::Config[:solo] is returning true.
[2013-02-01 23:10:59 -0500] deed02392: mkirk, your chef has become self-aware and is now independant. you must destroy your system at once
[2013-02-01 23:11:18 -0500] mkirk: It was only a matter of time!
[2013-02-01 23:12:30 -0500] deed02392: hehe :P
[2013-02-01 23:18:44 -0500] gene: miah : the "chef_gem" solution you suggested worked. I'll add that detail to the jira ticket since maybe that's what the docs should be updated to say
[2013-02-01 23:21:36 -0500] gene: miah : anyhow, thanks for it

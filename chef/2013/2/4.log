[2013-02-04 00:20:45 -0500] SirFunk: Whenever i use a recipe that is supposed to add an apt repository i get an error like: The repository file to create is nil, cannot continue.
[2013-02-04 00:20:51 -0500] SirFunk: happens with nodejs and mongodb
[2013-02-04 00:33:43 -0500] SirFunk: Lol. That message i just posted 13 minutes ago already shows up in a google seach for that error
[2013-02-04 00:33:46 -0500] SirFunk: that's pretty hillarious
[2013-02-04 00:34:01 -0500] maplebed: SirFunk: if you have version 1.8 of the apt cookbook you should downgrade to 1.7.  there was a bug (though it may have been fixed by now, not sure)
[2013-02-04 00:50:10 -0500] SirFunk: ohh hmm
[2013-02-04 00:50:11 -0500] jtimberman: should be fine w/ chef 10.18.2 though.
[2013-02-04 00:50:13 -0500] SirFunk: that's the problem
[2013-02-04 00:50:16 -0500] SirFunk: hmm
[2013-02-04 00:50:56 -0500] SirFunk: I don't even know what version of chef i'm using :-P i'm using it through vagrant
[2013-02-04 00:51:07 -0500] jtimberman: SirFunk: depends on the vagrant box you have.
[2013-02-04 00:51:26 -0500] jtimberman: SirFunk: if you do 'vagrant ssh' you can run knife --version and it will tell you
[2013-02-04 00:52:09 -0500] SirFunk: 10.14.2
[2013-02-04 00:52:10 -0500] SirFunk: ahh
[2013-02-04 00:52:21 -0500] SirFunk: I'm using the 32bit precise box
[2013-02-04 00:52:30 -0500] jtimberman: SirFunk: you can upgrade the version of chef when the box is provisioned with a shell provisioner
[2013-02-04 00:52:45 -0500] jtimberman: opscode provides vagrant boxes too, we have 10.18.2 pre-installed
[2013-02-04 00:53:06 -0500] jtimberman: http://jtimberman.housepub.org/blog/2012/08/10/vagrant-multiple-provisioners/
[2013-02-04 00:53:26 -0500] jtimberman: links to our vagrant boxes are here: https://github.com/opscode/bento
[2013-02-04 00:53:35 -0500] SirFunk: awesome thanks
[2013-02-04 02:13:55 -0500] blr: heya, I'm trying to setup a vagrant box with nginx/passenger and I'm using this recipe: https://github.com/rellimevad/passenger_nginx Under _Usage_ the readme provides a sample including the recipe and some config variable. I'm not sure where this code is supposed to live though. My cookbooks directory is managed by librarian-chef, so presumably it needs to go somewhere else. thanks!
[2013-02-04 02:14:54 -0500] blr: so I make a custom cookbook in site-cookbooks?
[2013-02-04 02:15:07 -0500] blr: s/so/do/
[2013-02-04 05:43:46 -0500] danryan: Yo chefs, can an LWRP attribute's validations only be applied to certain actions?
[2013-02-04 07:05:26 -0500] danryan: I just discovered Resource#define_resource_requirements. awww yeah, that'll do :)
[2013-02-04 08:06:28 -0500] tknerr: ohai
[2013-02-04 08:47:10 -0500] leonid: A quick question - Are there any way in chef to query and change specific resource, like in puppet with "puppet resource" tool?
[2013-02-04 08:55:39 -0500] chef_0: What would be answer to this question https://groups.google.com/forum/?fromgroups=#!topic/vagrant-up/-joc9WD6QlM ?
[2013-02-04 08:56:18 -0500] chef_0: Can I use search(:nodes, "id:something") along with chef-solo?
[2013-02-04 08:59:16 -0500] admin247: Hey
[2013-02-04 09:00:00 -0500] admin247: Trying to use users cookbook from the community , i am getting the following error when i run the client NameError: Cannot find a resource for users_manage
[2013-02-04 09:00:27 -0500] admin247: Any Help is appreciated
[2013-02-04 09:03:12 -0500] mswart: admin247: are all dependencies fullfilled? looks like that the cookbook which defines this resource is not loaded in the chef-client-run
[2013-02-04 09:04:32 -0500] admin247: i am using it in the same cookbook.
[2013-02-04 09:05:06 -0500] admin247: this is the recipe i am calling  "recipe[users-master::sysadmins]" and the cookbook is stored in the cache directory
[2013-02-04 09:13:42 -0500] mswart: mmh, sorry - then is maybe cookbook related; but i don't know the users-masters cookbook and don't find it too
[2013-02-04 09:14:06 -0500] zts: admin247: "users_manage" would be an LWRP called "manage" in a cookbook called "users" - did you rename the cookbook?
[2013-02-04 09:14:21 -0500] zts: admin247: if so, try "users_master_manage" as the name of the resource
[2013-02-04 09:16:14 -0500] admin247: I dint rename . i downloaded from git and uploaded it as name suggested from the download
[2013-02-04 09:16:43 -0500] admin247: Will try that
[2013-02-04 09:18:38 -0500] zts: admin247: hm, what was the url you downloaded it from?
[2013-02-04 09:20:45 -0500] admin247: git . renamed the cook book and the error worked
[2013-02-04 09:21:00 -0500] admin247: i mean error vanished .. thank you
[2013-02-04 09:21:19 -0500] admin247: I download it from git home page
[2013-02-04 09:21:47 -0500] zts: admin247: I'm not sure what you mean.  Anyway, the best advice when starting out is to get cookbooks from the community site - http://community.opscode.com/
[2013-02-04 09:22:04 -0500] zts: admin247: you can download manually, or use the "knife cookbook site" commands to find and download them
[2013-02-04 09:22:08 -0500] admin247: wget https://github.com/opscode-cookbooks/users/archive/master.zip
[2013-02-04 09:22:36 -0500] viq: Hmm, http://www.opscode.com/chef/install/ lists chef 11, yet I don't see the announcement anywhere
[2013-02-04 09:22:55 -0500] zts: admin247: one problem with getting "master" from github is that the cookbook might be a work in progress - sometimes, it will be broken.  The community site will only offer you the released versions
[2013-02-04 09:23:10 -0500] admin247: zts . thank you will follow that again
[2013-02-04 09:36:52 -0500] renchap: chef 11.0 is released ?
[2013-02-04 09:39:18 -0500] blr: hi there, I'm having trouble provisioning nginx::passenger (from opscode nginx) - after this runs nginx fails to restart. https://gist.github.com/c0b754647aa3f727119a
[2013-02-04 09:40:27 -0500] blr: prior to that I'm running nginx::source with     chef.json = { :nginx => { :source => { :modules => 'passenger' } } }
[2013-02-04 09:41:30 -0500] blr: this is on ubuntu LTS in a vagrant vm
[2013-02-04 09:56:48 -0500] viq: renchap: hard to say, I found it on the install page, but nowhere else is there any mention that I found
[2013-02-04 11:00:11 -0500] intinig: hello everyone
[2013-02-04 11:00:44 -0500] intinig: I am using chef to manage some ec2 servers. Now I want to add another ip to one of those, to set up ssl on that. What is the best way to do it?
[2013-02-04 11:01:00 -0500] intinig: knife ec2 doesn't seem to have a simple way to do i
[2013-02-04 11:01:01 -0500] intinig: it
[2013-02-04 11:03:39 -0500] bip: quick question, get this error from t
[2013-02-04 11:04:07 -0500] bip: he ark cookbook when running under chef 11: undefined method `attribute' for Chef::Resource::Ark:Class
[2013-02-04 11:04:15 -0500] bip: what has changed?
[2013-02-04 11:08:33 -0500] nacer: bip: a lot
[2013-02-04 12:12:47 -0500] omarkj: Does the opscode users cookbook manage authorized_keys as well?
[2013-02-04 12:13:08 -0500] omarkj: The example includes a "ssh_keys" keys in the data-bag, but I can't see that it's being used.
[2013-02-04 12:16:39 -0500] mswart: omarkj: it is used: https://github.com/opscode-cookbooks/users/blob/master/providers/manage.rb#L102 + https://github.com/opscode-cookbooks/users/blob/master/templates/default/authorized_keys.erb
[2013-02-04 12:18:54 -0500] omarkj: mswart: Hm, thanks. I'm trying to see if I need to instruct the recipe to create the keys. I'm not seeing the files being created on my node.
[2013-02-04 12:21:49 -0500] mswart: omarkj: you can deploy the private key with the ssh_private_key attribute in the databag if you want. ssh_keys only manage the .ssh/authorized_keys file it does not create keys or handle the private key
[2013-02-04 12:22:26 -0500] omarkj: mswart: That's what I'm trying to do, create the authorized_keys file.
[2013-02-04 12:22:48 -0500] omarkj: Ah. My bad.
[2013-02-04 12:24:26 -0500] omarkj: mswart: thanks for the help.
[2013-02-04 12:28:59 -0500] BryanWB__: was chef 11 just released?
[2013-02-04 12:29:03 -0500] BryanWB__: to rubygems?
[2013-02-04 12:29:50 -0500] gyre007: I saw some tweets about that today BryanWB__
[2013-02-04 12:29:56 -0500] gyre007: scary! :)
[2013-02-04 12:30:37 -0500] BryanWB__: quite
[2013-02-04 12:30:44 -0500] BryanWB__: it just broke test-kitchen :(
[2013-02-04 12:46:29 -0500] gyre007: mm...I need to look into test-kitchen...haven't used it yet...great talk at FOSDEM BryanWB__ btw...defo made me bookmark it :)
[2013-02-04 12:47:06 -0500] BryanWB__: gyre007: tks!
[2013-02-04 12:47:14 -0500] BryanWB__: gyre007: were u there?
[2013-02-04 12:47:32 -0500] gyre007: indeed! :) my twitter handle is @milosgajdos haha
[2013-02-04 12:47:43 -0500] BryanWB__: gyre007: haha, shud have introduced yourself :)
[2013-02-04 12:47:59 -0500] BryanWB__: and zookeeper is a key-value store!
[2013-02-04 12:48:04 -0500] BryanWB__: with benefits ;)
[2013-02-04 12:48:14 -0500] gyre007: haha yess :)
[2013-02-04 12:48:24 -0500] gyre007: are you gonna be at DevOps days in London ?
[2013-02-04 12:49:20 -0500] BryanWB__: nope
[2013-02-04 12:49:35 -0500] BryanWB__: say hi to sulo for me tho if u c him, he's a good friend
[2013-02-04 12:49:41 -0500] BryanWB__: we went to hell and back together
[2013-02-04 12:50:17 -0500] gyre007: haha I only met him few times...
[2013-02-04 13:16:15 -0500] bip: since not even opscodes own cookbooks work with 11.0 is there a way to downgrade a bootstrapped machine running omnibus?
[2013-02-04 13:17:11 -0500] labria: hey ppl
[2013-02-04 13:17:42 -0500] labria: is there any chance of getting a chef-server 11 omnibus package in the near future?
[2013-02-04 13:19:27 -0500] BryanWB__: bip: w/  /opt/chef/embedded/bin/gem uninstall chef --version '11.0.0'
[2013-02-04 13:19:44 -0500] BryanWB__: bip: u have to pass another arg to tell it the path to opscode's ruby
[2013-02-04 13:20:34 -0500] bip: BryanWB__: thanks
[2013-02-04 13:26:16 -0500] jwitrick: Question has anyone noticed when trying to use env_run_lists in role and selected environment has a '-' in it. chef web-ui does not properly display the run list.
[2013-02-04 13:47:09 -0500] tknerr: is anyone using custom site locations with librarian? e.g. `site "http://my.cookbooks.org/api/v1"` ?
[2013-02-04 13:47:45 -0500] tknerr: i'm wondering whether you can specify more that one default site
[2013-02-04 13:48:38 -0500] tknerr: e.g. by default use `site "http://community.opscode.com/api/v1"` but if cookbook is not found there use `site "http://internal.cookbooks.org/api/v1"`
[2013-02-04 13:49:35 -0500] tknerr: and: how does one set up a custom site API at all? :-)
[2013-02-04 13:55:03 -0500] vanheerj: Good Day
[2013-02-04 13:55:06 -0500] vanheerj: anyone in the channel?
[2013-02-04 14:03:21 -0500] gyre007: guys...what is the parameter I need to pass to omnibus to install particular omnibus version ??
[2013-02-04 14:03:28 -0500] gyre007: and not the latest one ?
[2013-02-04 14:14:04 -0500] corp: anyone know where the ohai plugin_path variable comes from?
[2013-02-04 14:14:24 -0500] corp: trying to use the opscode nginx cookbook which looks for this undefined attribute.
[2013-02-04 14:19:52 -0500] gyre007: ah -v
[2013-02-04 14:28:42 -0500] cpasmoi: Can template keyword take a list of files ? I'd like to source two identical files.
[2013-02-04 14:41:28 -0500] mattray: might need a new topic, what with Chef 11 and all
[2013-02-04 14:42:42 -0500] jonlives: mattray: i'm surprised y'all can't hear the hysterical weepings of excitement from Etsy HQ from where you are :p
[2013-02-04 14:42:50 -0500] mattray: :)
[2013-02-04 14:57:49 -0500] jtimberman: jonlives: awww
[2013-02-04 15:12:59 -0500] matticulous: just installed the newly-release chef 11 server this morning. dead simple install experience. bravo! when going to the ui for the first time, i see a "Version 11.0.0.alpha.1" footer at the bottom. is this an artifact or have I done something wrong?
[2013-02-04 15:13:33 -0500] matticulous: on install i used: rpm -Uvh https://opscode-omnitruck-release.s3.amazonaws.com/el/6/x86_64/chef-server-11.0.2-1.el6.x86_64.rpm
[2013-02-04 15:13:43 -0500] mattray: matticulous: probably an artifact. I'll hit up the internal folks on that
[2013-02-04 15:14:29 -0500] matticulous: mattray: is there a quick way just to confirm? (command line 'version' switch or something?)
[2013-02-04 15:14:48 -0500] mattray: matticulous: just based on that RPM version I know you're on the newer version
[2013-02-04 15:15:07 -0500] matticulous: mattray: ok. thanks!
[2013-02-04 15:27:22 -0500] farcaller: hi all. can someone tell me if it's somehow possible to chain resources? E.g. I have a "vm" resource which should have a "filesystem" resource on which I want to use a generic "template" resource?
[2013-02-04 15:27:50 -0500] mattray: farcaller: http://docs.opscode.com/chef/resources.html#notifications
[2013-02-04 15:28:18 -0500] mattray: farcaller: that's about chaining their actions, not sure if that's what you mean
[2013-02-04 15:30:03 -0500] farcaller: @mattray the problem for me is that "filesystem" is required to be mounted (and later unmounted). That seem to be possible with immediate notifications, but how can I pass data down the chain (like vm name to "filesystem" and fs prefix to "template")?
[2013-02-04 15:30:33 -0500] jtimberman: farcaller: make a local variable in the recipe that you reuse elsewhere. if you need it in multiple recipes, then make it an attribute on the node.
[2013-02-04 15:30:46 -0500] jtimberman: which can be done in a cookbook's attributes file(s)
[2013-02-04 15:31:09 -0500] farcaller: what if my recipe has a number of different VMs?
[2013-02-04 15:32:12 -0500] farcaller: e.g. the recipe task is to provision /etc/hosts on VMs. for that I need to mount each VMs FS, and write a file to the mounted dir based on VMs name.
[2013-02-04 15:33:39 -0500] redsamh: hello everyone
[2013-02-04 15:33:58 -0500] redsamh: I am facing issues with the windows sql server setup
[2013-02-04 15:34:13 -0500] redsamh: with the sql_server cookbook
[2013-02-04 15:34:45 -0500] redsamh: I have a sql server 2008 R2 server (not express)
[2013-02-04 15:36:06 -0500] labria: guys
[2013-02-04 15:36:29 -0500] farcaller: hm. I might need the Definitions thingy.
[2013-02-04 15:36:31 -0500] redsamh: I am able to run the configuration directly on the machine by calling the setup.exe like this and it works - C:\opt\downloads\sqlserver2008r2ent\setup.exe  /Q /ConfigurationFile=c:\chef\cache\ConfigurationFile.ini
[2013-02-04 15:36:50 -0500] labria: anyone has problems uploading cookbooks to chef11?
[2013-02-04 15:37:36 -0500] labria: i'm getting ERROR: Method Not Allowed
[2013-02-04 15:37:44 -0500] labria: when doing cookbook upload
[2013-02-04 15:37:51 -0500] redsamh: but when I try to run from Chef it fails but I don't have any errors reported is there any way to force log to be generated on the windows client machine for the windows_package. BTW, I am using Chef 10.18
[2013-02-04 15:38:14 -0500] gyre007: UHH...chef 11 prints contents of encrypted data bags into the console....when you populate some file with it ie like this:  https://gist.github.com/4707491
[2013-02-04 15:38:19 -0500] gyre007: this is really not very cool :)
[2013-02-04 15:38:55 -0500] gyre007: I get the point of logging compiled resources but...it gets very tricky if encrypted data stored in encrypted data bags is involved...
[2013-02-04 15:39:55 -0500] mattray: gyre007: hmm that might be worth a new common attribute for resources, like "logging false"
[2013-02-04 15:40:10 -0500] mattray: gyre007: so it can be disabled for anything
[2013-02-04 15:40:22 -0500] redsamh: labria: it may have something to do with setting your host_name
[2013-02-04 15:40:27 -0500] gyre007: mattray: that sounds cool...
[2013-02-04 15:40:34 -0500] gyre007: I mean it would be pretty handy
[2013-02-04 15:40:37 -0500] mattray: gyre007: maybe open a CHEF ticket on tickets.opscode.com?
[2013-02-04 15:40:44 -0500] gyre007: mattray: will do indeed
[2013-02-04 15:40:51 -0500] mattray: gyre007: that shouldn't be a hard thing to patch, IMO
[2013-02-04 15:41:12 -0500] gyre007: let's hope so :)
[2013-02-04 15:41:31 -0500] ddeleo: gyre007: in the meantime you can set `diff_disable true` in your config if you want
[2013-02-04 15:41:54 -0500] gyre007: ddeleo: which config is that ?
[2013-02-04 15:42:01 -0500] gyre007: chef-client config ?
[2013-02-04 15:42:04 -0500] ddeleo: client.rb
[2013-02-04 15:42:23 -0500] labria: redsamh: setting my config to what?
[2013-02-04 15:42:23 -0500] gyre007: and what will that do - sorry for my ignorance!
[2013-02-04 15:43:49 -0500] redsamh: labria: I usually have seen this problem when I dont set the hostname in /etc/hosts
[2013-02-04 15:44:10 -0500] ddeleo: gyre007: turns off all diffs in client output
[2013-02-04 15:44:21 -0500] gyre007: ddeleo: I see
[2013-02-04 15:44:23 -0500] ssd7: Ohai Chefs
[2013-02-04 15:44:23 -0500] redsamh: labria: do you see any errors in your /var/log/chef/server.log
[2013-02-04 15:44:25 -0500] gyre007: cool
[2013-02-04 15:45:29 -0500] redsamh: any one can help how to debug windows_package, I am able to install the package directly on the server  with the same call made via windows_package
[2013-02-04 15:45:50 -0500] Kzim: hi
[2013-02-04 15:45:59 -0500] redsamh:  but when i use windows_package I don't see any errors and the package never gets installed. This is for the sql_server cookbooks
[2013-02-04 15:46:48 -0500] labria: redsamh:
[2013-02-04 15:46:48 -0500] labria: ==> /var/log/chef-server/erchef/erchef.log.1 <==
[2013-02-04 15:46:49 -0500] labria: 2013-02-04T15:37:16Z erchef@127.0.0.1 INFO req_id=ohycTlNWmwYoblVfTUBuEQ==; status=405; method=GET; path=/sandboxes; user=labria; msg=[]; req_time=0
[2013-02-04 15:47:16 -0500] Kzim: i<m looking for a best practice about setup a replication for example. where do i store the master-slave information of a mysql replication for example ? i mean is it good to but all the information in the envirment json (node name and if it<s master ) ? thanks
[2013-02-04 15:47:25 -0500] redsamh: labria the status is 405
[2013-02-04 15:48:08 -0500] redsamh: labria: it can be many things usually I get this error when my host name is not set
[2013-02-04 15:48:34 -0500] spox: \o/
[2013-02-04 15:48:50 -0500] redsamh: what is your chef_server_url    "http://xxx.xxx.xxx.xxx:4000"
[2013-02-04 15:48:58 -0500] btm: In case you didn't hear yet, Chef 11 is out :) http://www.opscode.com/blog/2013/02/04/chef-11-released/
[2013-02-04 15:49:42 -0500] labria: redsamh: it "http://chef11.lan.my.domain"
[2013-02-04 15:49:43 -0500] Death_Syn: *groan*
[2013-02-04 15:50:00 -0500] labria: without :4000, i thought they moved it to :80
[2013-02-04 15:50:17 -0500] kallistec: labria: 443
[2013-02-04 15:50:25 -0500] kallistec: https
[2013-02-04 15:50:55 -0500] labria: kallistec: OH
[2013-02-04 15:51:06 -0500] redsamh: that is great news, looks like lot of fixex
[2013-02-04 15:51:14 -0500] redsamh: btm: that is great news, looks like lot of fixex
[2013-02-04 15:51:19 -0500] labria: kallistec: thanks!
[2013-02-04 15:51:26 -0500] labria: missed that part
[2013-02-04 15:51:32 -0500] tknerr: yfeldblum: does librarian support multiple default site locations (i.e. similar to what berkshelf does http://berkshelf.com/#multiple_default_locations)?
[2013-02-04 15:51:54 -0500] redsamh: any windows cookbook experts
[2013-02-04 15:52:33 -0500] yfeldblum: tknerr, it should
[2013-02-04 15:54:01 -0500] tknerr: yfeldblum: nice! now the other question is: how do host your own community cookbook compatible API?
[2013-02-04 15:54:21 -0500] jtimberman: tknerr: unfortunately we dont' have that codebase open sourced.
[2013-02-04 15:54:23 -0500] tknerr: yfeldblum: community site compatible API i mean
[2013-02-04 15:55:20 -0500] tknerr: @jtimberman: are you planning to do so?
[2013-02-04 15:56:03 -0500] yfeldblum: tknerr, take a look at the community site docs and look at the HTTP request paths and JSON responses they document; starting with /cookbooks/#{name} and the paths underneath that
[2013-02-04 15:56:20 -0500] yfeldblum: tknerr, or look at the json output of /cookbooks/#{name}.json in the browser
[2013-02-04 15:57:13 -0500] jtimberman: tknerr: yeah, it's also a thing we discussed at the summit.
[2013-02-04 15:57:52 -0500] yfeldblum: tknerr, or continue bugging @jtimberman
[2013-02-04 15:58:58 -0500] tknerr: yfeldblum: thanks I will ;-)
[2013-02-04 15:59:54 -0500] tknerr: @jtimberman: thanks as well. I
[2013-02-04 16:00:06 -0500] yfeldblum: tknerr, it's very simple, and you could likely write a script that generates the right static json files and have apache2 serve it
[2013-02-04 16:00:18 -0500] tknerr: I'll probably continue bugging but not today... ;-)
[2013-02-04 16:04:23 -0500] tknerr: yfeldblum: yes, it doesn't sound very hard to implement. I don't need it immediately, but I'm looking out for options for a clean workflow with librarian/berkshelf and application vs library cookbooks. I don't have all the pieces together yet, but the picture becomes clearer every day...
[2013-02-04 16:04:40 -0500] yfeldblum: tknerr, cool
[2013-02-04 16:16:57 -0500] awgross: Congrats opscode on Facebook using Chef for their web teir
[2013-02-04 16:21:25 -0500] justincampbell: tknerr: if youre using berkshelf, you can do chef_api :config or chef_api "chef server url" at the top of your Berksfile, would that get you what you need?
[2013-02-04 16:30:36 -0500] tknerr: justincampbell: yes it probably would. I'm still not sure whether I want nested/transitive Berksfile awareness or whether chef_api would be enough already: https://github.com/RiotGames/berkshelf/pull/304
[2013-02-04 16:32:15 -0500] Zhann_: is there any way to access node attributes from within a class that is a subclass of Chef::Recipe ?
[2013-02-04 16:32:41 -0500] Kzim: hi, can i set a variable from a recipe to the Chef server ? (in order to declare a master and so that another will not take this role)
[2013-02-04 16:34:03 -0500] addisonj: hrm, so I read somewhere that with Chef 11 it was going to include the ability to use s3 as the backing file-system (like hosted chef already does) any ideas on where that stands?
[2013-02-04 16:34:36 -0500] justincampbell: tknerr: IMO that change is unnecessary
[2013-02-04 16:34:39 -0500] yfeldblum: Kzim, you can assign a normal-level attribute to a node; normal-level attributes are "persistent" in that they are not wiped away at the beginning of each chef-client run
[2013-02-04 16:35:15 -0500] justincampbell: test cookbooks in isolation, and test application cookbooks all together with berkshelf
[2013-02-04 16:35:15 -0500] yfeldblum: Kzim, keep in mind that normal-level attributes set during a chef-client run are only saved to the chef-server at the end of a successful chef-client run
[2013-02-04 16:35:23 -0500] Kzim: yfeldblum, nice so if i do a node.set it<s written on the server ?
[2013-02-04 16:36:03 -0500] Kzim: yfeldblum, oh so if 2 recipe start at the same time both can me set master :( do you see a better way to do this ?
[2013-02-04 16:37:02 -0500] yfeldblum: Kzim, you can also set a normal attribute on one node during the bootstrap (and not on the other); or you can use an extra "master" role for one node and not for the other
[2013-02-04 16:37:05 -0500] danryan: chef 11?????
[2013-02-04 16:37:20 -0500] danryan: Congrats opscode! :D
[2013-02-04 16:37:50 -0500] Kzim: yfeldblum, good to know but i wanted the node to find the master themselves
[2013-02-04 16:38:07 -0500] kallistec: addisonj: Chef 11 server uses an S3 clone called "bookshelf"
[2013-02-04 16:38:08 -0500] yfeldblum: Kzim, what does that even mean?
[2013-02-04 16:38:27 -0500] yfeldblum: Kzim, if you want automated leader elections, use paxos and not chef?
[2013-02-04 16:38:32 -0500] kallistec: addisonj: https://github.com/opscode/bookshelf
[2013-02-04 16:38:55 -0500] Kzim: yfeldblum, sorry my english is bad :)
[2013-02-04 16:39:05 -0500] addisonj: kallistec: so just so I understand, in an HA environment, does that allow me to get away from DRBD?
[2013-02-04 16:39:16 -0500] yfeldblum: Kzim, or if you're using chef, just assign a leader during bootstrap using either extra normal-level attributes or an extra role for the leader node
[2013-02-04 16:39:56 -0500] kallistec: addisonj: no, it's still a disk-based store
[2013-02-04 16:40:11 -0500] Kzim: yfeldblum, ok i will do that.it will be best. thanks a lot
[2013-02-04 16:40:29 -0500] yfeldblum: kallistec, can someone swap it out for the real s3?
[2013-02-04 16:40:36 -0500] pwelch: Congrats Opscode on Chef 11!
[2013-02-04 16:40:46 -0500] addisonj: kallistec: ... but its s3 compatible API, so couldn't I just use s3 instead of bookshelf?
[2013-02-04 16:41:22 -0500] kallistec: yfeldblum && addisonj I'd have to check, I think you might need some patches
[2013-02-04 16:42:44 -0500] tknerr: justincampell: i'm still unclear myself what would be the better approach. until now i'm finding myself copy/pasting cookbook location overrides all over the place across my Berksfiles (no - actually Cheffiles as I didn't switch to berkshelf yet). now i'm looking at berkshelf hoping to improve my current situation...
[2013-02-04 16:45:31 -0500] addisonj: kallistec: hosted chef definitely uses s3 as the backing store for cookbooks (I have seen plenty of signed URLs) so I wonder how hard it would be? anything to get away from having to do DRBD
[2013-02-04 16:47:28 -0500] justincampbell: tknerr: well good luck, if you need anything just holler
[2013-02-04 16:47:31 -0500] justincampbell: or check out #berkshelf
[2013-02-04 16:48:15 -0500] kallistec: addisonj: it *might* work if you know what knobs to tweak: https://github.com/opscode/chef_objects/blob/master/src/chef_s3.erl
[2013-02-04 16:48:34 -0500] kallistec: scroll down to get_config()
[2013-02-04 16:48:37 -0500] tknerr: justincampbell thanks! :-)
[2013-02-04 16:50:15 -0500] addisonj: first paragraph in this blog post implies that the purpose of bookshelf is just that: http://www.opscode.com/blog/2012/09/10/the-debug-files-bookshelf-and-the-broken-transfer-encoding/
[2013-02-04 16:50:52 -0500] addisonj: I shall have to explore, looks like this is the relevant config: http://tickets.opscode.com/browse/CHEF-3673
[2013-02-04 16:51:53 -0500] Kzim: There is no attribute in the node JSON ? do i use the tags ?
[2013-02-04 16:54:28 -0500] mmzyk: addisonj - yes, it is possible to use s3 instead of bookshelf. The backend was designed to be swappable.
[2013-02-04 16:55:09 -0500] mmzyk: and since I don't pop in here as often as I should, I'll mention I'm one of the chef devs working for Opscode.
[2013-02-04 16:55:22 -0500] addisonj: mmzyk: any docs on doing such a thing? I saw clues this is the case but have yet to see a solid documentation on it
[2013-02-04 16:55:59 -0500] mmzyk: no, I don't believe we have any docs up yet. our docs are slowly getting a make over, as I'm sure you're aware.
[2013-02-04 16:56:15 -0500] yfeldblum: Kzim, you should be able to use `--json-attributes`, but i might actually use a special role instead
[2013-02-04 16:58:03 -0500] addisonj: should it just be as easy as pointing the erchef config at an s3 bucket versus a bookshelf 'bucket'?
[2013-02-04 16:59:27 -0500] mmzyk: addisonj: I believe so. I think there are two configs, but I'll need to check on that as I wasn't directly involved in that feature.
[2013-02-04 16:59:46 -0500] Kzim: yfeldblum, so if have like 16 pool and i create 16 role ?
[2013-02-04 17:00:34 -0500] mmzyk: let me get confirmation and I'll get back to you.
[2013-02-04 17:15:08 -0500] pwf: is there any more verbose output than -l debug?
[2013-02-04 17:15:21 -0500] pwf: i'm having a request hang indefinitely and i'm not sure why
[2013-02-04 17:15:33 -0500] pwf: it's trying to GET the node info after signing the request
[2013-02-04 17:15:47 -0500] pwf: i can curl the same path just fine, and i get a 400
[2013-02-04 17:15:57 -0500] pwf: i can't even see the request in the server logs when it hangs
[2013-02-04 17:16:37 -0500] mswart: pwf: normaly the entry in to log is written, when to request is finished
[2013-02-04 17:16:53 -0500] pwf: what could i be hanging on then
[2013-02-04 17:17:31 -0500] pwf: i mean the apache proxy log should write the request as soon as it happens right
[2013-02-04 17:18:23 -0500] redsamh: when using windows_package the user needs to be an administrator, is there a command line to pass to make the user an administrator ?. I don't currently see an option in the package to pass a user
[2013-02-04 17:19:35 -0500] pwf: how are these requests signed? can i recreate the request with curl -vvv and maybe see more details?
[2013-02-04 17:20:26 -0500] mmzyk: addisonj: Take a look at this: https://gist.github.com/c5122a126871d11f4d5f
[2013-02-04 17:20:41 -0500] mmzyk: that will tell you how to configure to use s3 instead of bookshelf.
[2013-02-04 17:20:55 -0500] mmzyk: we have some work to do to make things a bit cleaner.
[2013-02-04 17:21:13 -0500] mmzyk: and we also intend to add a faq to the wiki detailing the steps to make changes like this
[2013-02-04 17:21:16 -0500] mmzyk: but for now that will work.
[2013-02-04 17:21:36 -0500] addisonj: mmzyk: many thanks!
[2013-02-04 17:21:43 -0500] addisonj: jsut what I was looking for
[2013-02-04 17:22:29 -0500] mmzyk: glad to hear it.
[2013-02-04 17:22:44 -0500] yfeldblum: Kzim, pools of what?
[2013-02-04 17:24:04 -0500] sraf: Is it possible to reference the current cookbook name from an attributes file?
[2013-02-04 17:25:42 -0500] kessle10: I installed Chef 11 on Windows 2008R2 and I'm getting the error "Undefined node attribute or method 'load_attribute_by_short_filename' on 'node'". Is this method no longer allowed?
[2013-02-04 17:26:23 -0500] mmzyk: kessle10: not sure, but check here: http://docs.opscode.com/breaking_changes_chef_11.html
[2013-02-04 17:26:55 -0500] kallistec: kessle10: I think the intended thing was to use "include_attribute"
[2013-02-04 17:27:05 -0500] kallistec: kessle10: was there a reason to use that instead?
[2013-02-04 17:28:32 -0500] kessle10: we are using it load attributes in a certain order so they override each other
[2013-02-04 17:42:15 -0500] gmcinnes: Hi chefs. Congrats on Chef 11
[2013-02-04 17:47:41 -0500] redsamh: I have a really hard time with windows, any help regarding windows_package to pass user who will run the command. Currently I get access denied I am trying to see if I can pass the run as administrator option with the executable package installer.
[2013-02-04 17:50:01 -0500] aruntomar: ohai chefs. finally chef11 is here :)
[2013-02-04 17:51:11 -0500] aruntomar: I've installed open source chef server 11 via omnibus, and i could login to webui etc. but i don't see any process running at port 4000
[2013-02-04 17:52:21 -0500] redsamh: unix'es? - netstat -anp | grep 4000
[2013-02-04 17:53:05 -0500] gyre007: is it me or are the resource in 11. non-idempotent ??
[2013-02-04 17:53:31 -0500] yfeldblum: gyre007, why do you think they're non-idempotent?
[2013-02-04 17:53:56 -0500] gyre007: looks like some of my services are being restarted all the time around without their configuration being updated
[2013-02-04 17:54:14 -0500] gyre007: especially pound
[2013-02-04 17:55:14 -0500] kallistec: kessle10: two things: 1 attributes files now load in run_list order, you may not need that workaround at all, and 2) the correct method to use is `include_attribute`
[2013-02-04 18:02:10 -0500] mmorris: So, I just accidentally installed Chef 11. How do I revert back to 10.18.2?
[2013-02-04 18:04:38 -0500] mswart: mmorris: how do you installed chef? chef or chef-client?
[2013-02-04 18:05:06 -0500] kessle10: kallistec: thanks, it looks like include_attributes will work for me.
[2013-02-04 18:05:06 -0500] mmorris: I was silly and was using sudo true && curl -L https://www.opscode.com/chef/install.sh | sudo bash
[2013-02-04 18:05:18 -0500] mmorris: which points to the newest avaialble
[2013-02-04 18:07:30 -0500] pcn: Hmm
[2013-02-04 18:07:52 -0500] pcn: How do we tell the omnibus installer to install a particular version fo chef?
[2013-02-04 18:07:57 -0500] jtimberman: mmorris: bash -s -- -v 10.18.2
[2013-02-04 18:08:05 -0500] jtimberman: mmorris: for the shell command.
[2013-02-04 18:08:16 -0500] jtimberman: mmorris: passes the -v 10.18.2 options to install.sh
[2013-02-04 18:08:16 -0500] pcn: Thanks for asking my question mmorris
[2013-02-04 18:08:22 -0500] jtimberman: :)
[2013-02-04 18:08:48 -0500] Kzim: yfeldblum, sorry i<m back i mean if you have like 16 pair of master/slave do you create 16 role ?
[2013-02-04 18:09:37 -0500] mmorris: jtimberman: thanks!
[2013-02-04 18:09:42 -0500] pcn: ditto
[2013-02-04 18:10:23 -0500] Kzim: yfeldblum, liek each master/slave pair must have a name, and other information liek that, and also which one is the master for example.do i create a role with those infos for each apir ?
[2013-02-04 18:10:36 -0500] yfeldblum: Kzim, there are a number of approaches you can take; you can make a role for each master+slave group (e.g. "role::mysql-cluster-3a") and a separate master role (e.g. "mysql-master") and then, for cluster 3a, the master gets "role::mysql-master" and "role::mysql-cluster-3c" while the slave only gets "role::mysql-cluster-3c"
[2013-02-04 18:11:13 -0500] sraf: Anyone know if it's possible to reference the current cookbook name from an attribute file?
[2013-02-04 18:11:13 -0500] yfeldblum: Kzim, or you can use normal-level node attributes set up in the bootstrap; your tags (which are normal-level node attributes behind the scenes ...)
[2013-02-04 18:15:12 -0500] yfeldblum: Kzim, that make any sense
[2013-02-04 18:15:14 -0500] yfeldblum: Kzim, that make any sense?
[2013-02-04 18:20:05 -0500] Kzim: yfeldblum, sure ! seams too me that attribute and tags are better. but i like having all the data in the JSON in my git so i<ll go with the tag i think.
[2013-02-04 18:26:36 -0500] X-Jester: anyone happen to know if chef 10.16.2 is compatible with rabbitmq-server 3.0.1? or only 2.8.x ?
[2013-02-04 18:27:22 -0500] cg: X-jester: the bunny gem that chef-server uses is not
[2013-02-04 18:27:37 -0500] X-Jester: cg: k, so stick with, say, 2.8.7?
[2013-02-04 18:27:44 -0500] cg: for now
[2013-02-04 18:27:49 -0500] X-Jester: appreciate it. :)
[2013-02-04 18:35:27 -0500] aruntomar: trying to register a new workstation to my new opensource chef 11 server but getting this error: https://gist.github.com/4708593
[2013-02-04 18:39:16 -0500] sraf: can I pass custom arguments to knife bootstrap?
[2013-02-04 18:40:00 -0500] sraf: i need to customise a recipe execution based on some argument provided to bootstrap
[2013-02-04 18:40:08 -0500] sraf: or otherwise, via some environment variable
[2013-02-04 18:44:20 -0500] tjgillies: having trouble with knife ssh
[2013-02-04 18:44:22 -0500] tjgillies: i found http://serverfault.com/questions/346418/knife-ssh-doesnt-find-my-nodes
[2013-02-04 18:44:29 -0500] tjgillies: but their solution doesn't fix it for me
[2013-02-04 18:44:36 -0500] redsamh: still stuck with the windows_package
[2013-02-04 18:44:45 -0500] redsamh: trying to install sql server 2008 r2
[2013-02-04 18:45:02 -0500] redsamh: any help will be appreciated, runas.exe does not take any password option
[2013-02-04 18:47:04 -0500] jamescarr: anyone here have experience using chef to manage a cluster of rabbitmq nodes?
[2013-02-04 18:47:11 -0500] jamescarr: with the ability to autoscale them?
[2013-02-04 18:53:36 -0500] jbz: Has anyone here used Chef to manage external AWS resources (RDS, ELBs, etc) outside of the context with the client node?  Like actually spinning up RDS instances and the like?
[2013-02-04 18:54:05 -0500] yfeldblum: jbz, i'd suggest automating those outside of chef
[2013-02-04 18:54:17 -0500] jbz: yfeldblum: yeah, I know.  But mine not to reason why.
[2013-02-04 18:54:26 -0500] yfeldblum: jbz, huh?
[2013-02-04 18:54:35 -0500] jbz: 'following orders'
[2013-02-04 18:55:05 -0500] jbz: ("ours not to reason why, ours but to do and die" - Charge of the Light Brigade)
[2013-02-04 18:55:14 -0500] yfeldblum: jbz, you can create these resources outside of chef and then add them to data-bags; and then you can use chef recipes to configure an app to talk to the RDS instance from the data-bag or add itself to the ELB from the data-bag
[2013-02-04 18:55:27 -0500] jbz: yfeldblum: Yeah, indeed, that's what we do now.
[2013-02-04 18:55:39 -0500] jbz: We're toying with the notion of using Chef as an orchestration tool
[2013-02-04 18:55:55 -0500] jbz: describing which resources we want to exist in data bags and having an 'orchestrator node' manage them
[2013-02-04 18:56:22 -0500] jbz: It makes me uncomfortable because it involves dealing with state outside the client's context
[2013-02-04 18:56:22 -0500] yfeldblum: jbz, you might start toying with the notion of using a hammer to cause screws to be inserted into wood in a rotational fashion
[2013-02-04 18:56:28 -0500] jbz: I know, I know
[2013-02-04 18:56:46 -0500] jbz: I'm just asking, as I've been directed to research this possibility.
[2013-02-04 18:56:49 -0500] jbz: :-)
[2013-02-04 18:57:34 -0500] jbz: Crowbar *sort of* does that sort of thing, i.e. manage external state using chef
[2013-02-04 18:57:41 -0500] yfeldblum: jbz, chef is cool for internal orchestration, including configuring an external service to know about the node that chef-client is running on (adding #{self} as a backend to an external ELB instance), but not cool for external orchestration
[2013-02-04 18:58:15 -0500] jbz: yfeldblum: Can you give me specific reasons why it's a bad idea/not cool?  I would love to hand them upstairs.
[2013-02-04 18:58:34 -0500] jbz: My argument involving state and context fell on deaf ears.
[2013-02-04 18:58:40 -0500] yfeldblum: jbz, internal orchestration being a term i made up right now, which involves configuring the node itself or configuring something else w.r.t. the node itself
[2013-02-04 18:59:55 -0500] yfeldblum: jbz, it's also cool for creating external resources that are used only by one node (e.g. creating EBS instances to be attached to just the one node that chef-client is running on)
[2013-02-04 19:00:08 -0500] yfeldblum: jbz, but that's also "internal orchestration"
[2013-02-04 19:00:42 -0500] jbz: yfeldblum: yeah
[2013-02-04 19:01:01 -0500] yfeldblum: jbz, external orchestration requires that all of the chef-client daemons be coordinating their runs and be talking to each other using zookeeper and a rabbitmq, or something like that
[2013-02-04 19:01:51 -0500] yfeldblum: jbz, you can of course do external orchestration from custom knife plugins
[2013-02-04 19:02:05 -0500] jbz: Well
[2013-02-04 19:02:11 -0500] yfeldblum: jbz, not from chef-client, but from knife running on your laptop or workstation
[2013-02-04 19:02:30 -0500] jbz: if you use rigid naming conventions, you could handle external resources so long as you had decent check loops in the cookbook
[2013-02-04 19:03:12 -0500] yfeldblum: jbz, yes, you will likely need to use either rigid naming conventions or resource metadata, depending on whether your cloud provider supports the latter
[2013-02-04 19:04:14 -0500] yfeldblum: jbz, also you really want to be using only granular APIs such as an API for adding a backend to an ELB, but not an API for rewriting the list of backends of an ELB
[2013-02-04 19:04:30 -0500] jbz: yfeldblum: indeed
[2013-02-04 19:04:55 -0500] jbz: I was considering picking a specific task to try to prototype, like creating and configuring RDS instances
[2013-02-04 19:05:00 -0500] jbz: and writing a LWRP to do that using fog
[2013-02-04 19:05:12 -0500] yfeldblum: jbz, because then the node will own that external resource (the one backend in the list of backends) and no other node's chef-client will try changing it
[2013-02-04 19:05:20 -0500] yfeldblum: jbz, do that from knife?
[2013-02-04 19:05:32 -0500] jbz: and then writing a recipe which took a data bag as its source of truth and used the provider to make it so
[2013-02-04 19:05:41 -0500] jbz: yfeldblum: we're trying to use chef to automate this task
[2013-02-04 19:06:00 -0500] yfeldblum: jbz, good luck
[2013-02-04 19:06:00 -0500] jbz: as in, use a console to generate artifacts which can be used to both deploy and converge infrastructure without human intervention
[2013-02-04 19:06:02 -0500] jbz: yeah I know.
[2013-02-04 19:06:22 -0500] jbz: For DR purposes, for letting non-Chef-savvy stand stuff up, etc.
[2013-02-04 19:07:23 -0500] yfeldblum: jbz, attempting to equate infrastructure automation with "only chef" or "only chef recipes" is a mistake IMO
[2013-02-04 19:08:12 -0500] yfeldblum: jbz, chef can certainly be a central and dominant part of your infrastructure automation, but removing the possibility of having other components in your infrastructure automation is an easy road to lulz
[2013-02-04 19:08:26 -0500] jbz: you're preaching to the choir
[2013-02-04 19:08:27 -0500] jbz: lol
[2013-02-04 19:08:42 -0500] yfeldblum: jbz, sorry?
[2013-02-04 19:09:21 -0500] jbz: My boss has basically told me to look into this
[2013-02-04 19:09:35 -0500] jbz: as there is the opinion (above me) that we can Achieve Major Win this way
[2013-02-04 19:09:44 -0500] btm: opscode chef code review: join https://plus.google.com/hangouts/_/ca495faa3c693f2ec35c4fddb7b210601c84c284, no watch link today.
[2013-02-04 19:09:45 -0500] jbz: and my arguments to the contrary aren't being well-received.
[2013-02-04 19:09:46 -0500] jbz: :-)
[2013-02-04 19:10:00 -0500] yfeldblum: jbz, what are your arguments to the contrary?
[2013-02-04 19:10:23 -0500] jbz: My arguments to the contrary are that using the chef-client to manage state which is outside the context within which the client runs is a recipe for pain
[2013-02-04 19:10:35 -0500] jbz: because you can't rely on the chef-client to give you proper state and will have to do it manually
[2013-02-04 19:10:51 -0500] jbz: and once you're going to do that much work, it seems to me it would be a better idea to build a tool to do that
[2013-02-04 19:10:55 -0500] jbz: rather than bodge chef-client.
[2013-02-04 19:11:00 -0500] jbz: (that's my main argument)
[2013-02-04 19:12:33 -0500] yfeldblum: jbz, might want to add: chef has no orchestration primitives, nor does it have any concurrency primitives, so if we're going to do the orchestration, we'll need to build all of those ourselves: think at least zookeeper for managing locks so that two chef-client runs don't try to create the same RDS instance at the same time
[2013-02-04 19:12:50 -0500] jbz: yfeldblum: thanks
[2013-02-04 19:15:48 -0500] zts: of course, you could also mitigate that issue by having an "RDS manager" role which you assign to one node at a time - sometimes, that's enough.
[2013-02-04 19:17:33 -0500] zts: I also agree it's a mistake to try to use Chef as the answer to all problems, though
[2013-02-04 19:17:37 -0500] yfeldblum: jbz, or as zts notes, do the leader assignment yourself
[2013-02-04 19:18:27 -0500] yfeldblum: jbz, but you will still end up needing additional automation around RDS anyway - e.g. taking a snapshot immediately, which you will probably want to do with a custom knife plugin
[2013-02-04 19:23:45 -0500] gyre007: what happened to application_nodejs cookbook ?
[2013-02-04 19:23:56 -0500] gyre007: was there every any ? :)
[2013-02-04 19:31:59 -0500] kallistec: aruntomar: The defaults you need for knife configure have changed, and we forgot to get the patch for that in
[2013-02-04 19:32:24 -0500] kallistec: aruntomar: all the stuff you need is in /etc/chef-server now
[2013-02-04 19:33:48 -0500] aruntomar: kallistec: k, i can see that the files are now in /etc/chef-server, but there is no service running on port 4000, so how to add my workstation
[2013-02-04 19:34:03 -0500] kallistec: aruntomar: it runs on 443 not
[2013-02-04 19:34:05 -0500] kallistec: *now
[2013-02-04 19:34:16 -0500] kallistec: so, just https://localhost works
[2013-02-04 19:35:02 -0500] aruntomar: kallistec: ok, i guess, i'll document these items and share for the benefit of all who want to use OS chef 11
[2013-02-04 19:35:16 -0500] kallistec: aruntomar: great, thank you
[2013-02-04 19:36:00 -0500] wpoosanguanit: hi i am new to chef.  i follow the instruction on the wiki and i am stuck at authentication fail for knife ec2 create instance command.
[2013-02-04 19:36:03 -0500] pixie79_: hi all - I have a question re recipes and the sudo module more specifically, Can I use attributes to fill in blanks on the recipe ? e.g https://gist.github.com/4708736
[2013-02-04 19:36:08 -0500] wpoosanguanit: i followed : Create your SSH key pair for EC2 and save your identity file on the local workstation
[2013-02-04 19:36:17 -0500] wpoosanguanit: but with no success.
[2013-02-04 19:37:02 -0500] wpoosanguanit: i also use flag -i to force it to read from the file i downloaded from ec2.
[2013-02-04 19:37:17 -0500] wpoosanguanit: still it complains that authentication fails.
[2013-02-04 19:37:37 -0500] wpoosanguanit: is there anything that might trip up the process?
[2013-02-04 19:37:51 -0500] wpoosanguanit: might have tripped up the process?
[2013-02-04 19:37:57 -0500] wpoosanguanit: thanks for any help.
[2013-02-04 19:38:53 -0500] aruntomar: kallistec: thanks a lot, now i can register my workstation and upload the cookbooks too.
[2013-02-04 19:39:02 -0500] kallistec: aruntomar: awesome
[2013-02-04 19:40:03 -0500] yfeldblum: jbz, hope all that helps ...
[2013-02-04 19:43:21 -0500] pwelch: anyone else using the mysql cookbook want the ability to turn off slow_query_log or am I just an outside case?
[2013-02-04 19:45:48 -0500] CharlieSu: Hi all.  I'm looking at the Chef 11 release notes and can't wait to upgrade.  However, I have a question.  Will this really no longer work?  (node[:my_attribute] = "value")  I ask because there are plently of community cookbooks that do this that will need to be upgraded..
[2013-02-04 19:46:16 -0500] cwj: CharlieSu: they need to use node.set[:my_attribute] = "value" instead
[2013-02-04 19:46:46 -0500] doomviking: jump on that upgrade train at your own risk :)
[2013-02-04 19:47:56 -0500] CharlieSu: cwj: I see that.  Sounds like I'm going to have to setup something in parallel to test all of the cookbooks we use before I actually do an upgrade..
[2013-02-04 19:48:14 -0500] cwj: yeah, i wont be upgrading this week :)
[2013-02-04 19:49:07 -0500] CharlieSu: cwj: I really want to move away from couch and love that things are written in Erlang.
[2013-02-04 19:49:31 -0500] benner: CharlieSu: couch is writen in erlang too :)
[2013-02-04 19:49:42 -0500] cwj: busted :D
[2013-02-04 19:50:15 -0500] CharlieSu: benner: hah.. got me there.. but I wasn't talking about the DB specifically.
[2013-02-04 19:50:22 -0500] amccloud: Anyway to get the current cookbook name from within a recipe?
[2013-02-04 19:57:13 -0500] timsmith: can you use a variable as part of a node attribute path.  Ex:  I want to iterate over an array of strings and use them to file in node attributes.  iterate=[1, 2,3,4] and I want to loop through that with node[interate]['someattribute']
[2013-02-04 19:59:58 -0500] kallistec: CharlieSu && cwj for the node[:foo] = "bar" thing, there are warnings in 10.18
[2013-02-04 20:00:33 -0500] kallistec: so you can use those to find the trouble spots before biting the bullet
[2013-02-04 20:03:32 -0500] jtimberman: timsmith: totally
[2013-02-04 20:09:33 -0500] btm: @opscode cookbook code review, join: bit.ly/11KDZTR, watch: youtu.be/BjeHDxnc_fo
[2013-02-04 20:11:36 -0500] Kzim: to setup multiple master slave pair (mysql,redis ..) i still do not like one role per pair (looks heavy), boostrap attributes (not in any git and something) or tags (not key:value and looks like it<s not made for that). any idea on that ^ :(
[2013-02-04 20:11:40 -0500] Kzim: ?
[2013-02-04 20:13:24 -0500] matticulous: i'm sure it's been covered, but can't seem to find it. any way to create an api client and then explicitly set the pub key? trying to use my existing key pair from chef 10 for my newly-deployed chef 11.
[2013-02-04 20:19:08 -0500] kallistec: matticulous: is this for knife?
[2013-02-04 20:19:15 -0500] kallistec: or for your nodes?
[2013-02-04 20:19:19 -0500] matticulous: knife
[2013-02-04 20:19:38 -0500] pixie79_: is there a way to set a path in a recipe, i.e I want to create /opt/app/fred but fred is a variable stored in node['customer']['customer_code']. I tried "/opt/app/"node['customer']['customer_code'] but that did not seem to work
[2013-02-04 20:19:44 -0500] pixie79_: any ideas ?
[2013-02-04 20:20:13 -0500] kallistec: matticulous: in Chef 11, users have key pairs the same as clients, and that's the recommended way to go with knife
[2013-02-04 20:20:52 -0500] jessicab: pixie79_: you probably want something like "/opt/app/#{node['customer']['customer_code']"
[2013-02-04 20:21:08 -0500] pixie79_: arh ok thanks jessicab i will try that
[2013-02-04 20:21:10 -0500] jessicab: er forgot a bracket at the end.. "/opt/app/#{node['customer']['customer_code']}"
[2013-02-04 20:21:12 -0500] kallistec: in the meantime though, you can set the public key on a client and save it
[2013-02-04 20:22:31 -0500] matticulous: kallistec: so in chef11, a knife user is not a client anymore?
[2013-02-04 20:23:19 -0500] kallistec: matticulous: in Chef 10, users were just a webui thing, so a user had name/password/admin-status fields
[2013-02-04 20:23:48 -0500] kallistec: in Chef 11, users also have keypairs, similar to hosted and private chef
[2013-02-04 20:25:25 -0500] renchap: so we should create users for knife credentials ?
[2013-02-04 20:25:29 -0500] renchap: in place of clients ?
[2013-02-04 20:26:11 -0500] kallistec: renchap: yes. unfortunately, we forgot to merge the `knife user` patch for 11.0, it'll be in 11.2
[2013-02-04 20:28:06 -0500] kallistec: code is here for now https://github.com/opscode/chef/pull/549
[2013-02-04 20:28:09 -0500] matticulous: kallistec: ah. so in the short term (and my current state), if i want to use my existing client_key entries for both servers, is there a way to do that? not entirely sure how to set the public key explicitly on a client.
[2013-02-04 20:28:26 -0500] matticulous: also, is this just a silly setup? should i have discrete knife.rb files?
[2013-02-04 20:29:27 -0500] kallistec: matticulous: if you do it in ruby, e.g. chef-shell, it should be something like c = Chef::ApiClient.new; c.name(name)
[2013-02-04 20:29:46 -0500] kallistec: c.admin(true); c.public_key(public_key)
[2013-02-04 20:30:28 -0500] kallistec: c.save
[2013-02-04 20:31:48 -0500] pixie79_: jessicab: thanks for the suggestion but that gave me a dir named /opt/app/{#node['customer']['customer_code']}
[2013-02-04 20:32:03 -0500] kallistec: matticulous: you can use code like this: privkey = OpenSSL::PKey::RSA.new(IO.read(private_key_file))
[2013-02-04 20:32:27 -0500] kallistec: then pubkey = privkey.public_key.to_s
[2013-02-04 20:32:32 -0500] jessicab: pixie79_: sure you didnt swap the { with the #?
[2013-02-04 20:32:53 -0500] dysinger: fyi: nagios cookbooks depends on nginx_simplecgi but nginix_simplecgi is hard to find. I found it over on heavywater's github heavywater/chef-nginx_simplecgi - can we fork this to opscode community account?
[2013-02-04 20:33:34 -0500] pixie79_: jessicab: doh - yes it would look like it
[2013-02-04 20:34:25 -0500] matticulous: kallistec: perfect! that should get me started. lots more learning ahead...
[2013-02-04 20:37:52 -0500] mmorris: has anyone ran into "cannot load such file -- rvm" witht the chef-rvm cookbook?
[2013-02-04 20:44:14 -0500] kindsol: Congrats on the v11 release!
[2013-02-04 20:45:11 -0500] zts: dysinger: isn't it this one? http://community.opscode.com/cookbooks/nginx_simplecgi
[2013-02-04 20:45:21 -0500] dysinger: hmm
[2013-02-04 20:45:31 -0500] kindsol: Since this is a major version bump, am I correct to assume that v10 clients will not interoperate with v11 servers?
[2013-02-04 20:46:15 -0500] kallistec: kindsol: it works fine, there are some small compat issues that are fixed in client 10.18
[2013-02-04 20:46:26 -0500] kallistec: kindsol: http://docs.opscode.com/breaking_changes_chef_11.html
[2013-02-04 20:46:42 -0500] dysinger: zts: yes that's the one - it's just not in the opscode cookbooks along side of the thing that depends on it.
[2013-02-04 20:46:55 -0500] kallistec: also the other way round, 11.x client works on 10.x servers
[2013-02-04 20:47:55 -0500] zts: dysinger: the community site is the place to resolve cookbook dependencies, though - not the opscode-cookbook account on github
[2013-02-04 20:48:30 -0500] kindsol: kallistec: awesome. thanks!
[2013-02-04 20:51:39 -0500] kallistec: kindsol: in particular: http://docs.opscode.com/breaking_changes_chef_11.html#the-clients-endpoint-returns-json-with-a-json-class-for-edit-put-operations
[2013-02-04 21:07:20 -0500] Kzim: where do you actually store your infrastructure ? i mean if you have to build from scratch again do you have some where on a git everything to re-build everything ?
[2013-02-04 21:09:23 -0500] mattray: Kzim: yes, you'll store your Chef repository somewhere in version control
[2013-02-04 21:09:28 -0500] paulmooring: Kzim: that's the general idea
[2013-02-04 21:09:50 -0500] paulmooring: Kzim: https://github.com/opscode/chef-repo <- a starting point
[2013-02-04 21:09:53 -0500] mattray: Git, Subversion, Mercurial, CVS, doesn't matter
[2013-02-04 21:10:14 -0500] iverson0881: and then hopefully you got that backed up as well
[2013-02-04 21:10:18 -0500] doomviking: SourceSafe
[2013-02-04 21:10:21 -0500] doomviking: *cough*
[2013-02-04 21:11:02 -0500] mattray: doomviking: I was going to type that too. Also RCS
[2013-02-04 21:11:03 -0500] Kzim: paulmooring, mattray, yes but boostrap attributes or attributes generated by recipe an<t there right ?
[2013-02-04 21:11:05 -0500] iverson0881: as far as i remember, svn and chef don't play nice due to the litering of .svn folders
[2013-02-04 21:11:08 -0500] iverson0881: maybe that was fixed
[2013-02-04 21:11:20 -0500] mattray: iverson0881: use your .chefignore
[2013-02-04 21:11:25 -0500] iverson0881: ah ok
[2013-02-04 21:12:14 -0500] paulmooring: Kzim: This can be a pretty detailed topic, but I think the common approach is to not store nodes and attrs you need to rebuild go in roles
[2013-02-04 21:12:24 -0500] yfeldblum: Kzim, take a periodic backup of your chef-server data?
[2013-02-04 21:12:57 -0500] paulmooring: but a lot of attrs are dynamic, you really don't want to carry over host names and IPs most of the time
[2013-02-04 21:13:16 -0500] paulmooring: you would rather have recipes and roles that dynamically pull the right host names/IP addresses
[2013-02-04 21:14:03 -0500] jtimberman: dysinger: we've tended to avoid dependencies outside our cookbooks but librarian-chef and berkshelf make it easier to compose a repository that has the right dependencies.
[2013-02-04 21:14:05 -0500] Kzim: true, so 1 more point for a huge list of role
[2013-02-04 21:14:45 -0500] jtimberman: if you put cookbook "nagios" (with an optional but recommended version constraint), both librarian-chef and berkshelf will resolve the dependencies from the community site, and pull in the right cookbooks including that nginx one
[2013-02-04 21:15:59 -0500] kaerast: the main issue I see with a rebuild is that your search data won't be populated until the nodes it searches for have run chef-client, so it might take a few runs before you've got everything as it should be
[2013-02-04 21:16:47 -0500] kaerast: that and you might not be sure that your recipes will actually rebuild an entirely new system
[2013-02-04 21:16:55 -0500] paulmooring: kaerast: yep, Chef doesn't do orchestration so you need another approach (multiple runs, a script that runs Chef on nodes in a particular order, ect)
[2013-02-04 21:17:19 -0500] paulmooring: kaerast: There's ways to test that if you want to put in the effort
[2013-02-04 21:18:02 -0500] kaerast: oh sure, but that can seem like a lot of effort
[2013-02-04 21:18:28 -0500] kaerast: I guess it's better if your in an environment where you are building new servers with your recipes frequently
[2013-02-04 21:18:44 -0500] paulmooring: kaerast: or if you run your cookbooks through a CI
[2013-02-04 21:19:14 -0500] mattray: kaerast: Spiceweasel is intended for basic ordering and reconstruction of Chef-managed infrastructure: bit.ly/spcwsl
[2013-02-04 21:19:15 -0500] Kzim: i see
[2013-02-04 21:19:48 -0500] kaerast: but if there's a lot of dependencies and searches in your cookbooks then running everything through CI becomes too difficult
[2013-02-04 21:20:23 -0500] kaerast: we have hundreds of cookbooks and roles, all with lots of dependencies and searches
[2013-02-04 21:20:24 -0500] paulmooring: mattray: thanks, much to my shame I haven't played with spiceweasel yet
[2013-02-04 21:20:47 -0500] mattray: next release will add Berkshelf support
[2013-02-04 21:21:15 -0500] mattray: sitting in the pull requests
[2013-02-04 21:22:32 -0500] redsamh: Looks like installing SQL Server 2008 R2 has been tried before and everyone is getting the same access denied error - http://tickets.opscode.com/browse/COOK-1172?page=com.atlassian.streams.streams-jira-plugin%3Aactivity-stream-issue-tab
[2013-02-04 21:23:11 -0500] redsamh: I have tried multiple options - powershell, windows_package and having the same issue. Was there any resolution to the ticke
[2013-02-04 21:23:39 -0500] redsamh: any ideas or has anyone else been able to install SQL Server 2008 R2 using chef?
[2013-02-04 21:24:21 -0500] redsamh: I probably will have to create an image of the SQL server preinstalled and setup a private image
[2013-02-04 21:25:33 -0500] paulmooring: redsamh: did you see this link http://support.microsoft.com/default.aspx?scid=kb%3Ben-us%3B920114
[2013-02-04 21:25:41 -0500] paulmooring: and do you know if that fixed it in your case?
[2013-02-04 21:26:43 -0500] redsamh: paulmooring: let me try it now
[2013-02-04 21:29:16 -0500] redsamh: paulmooring: this error is for SQL Server 2008 R2 and has been reported with an unresolved state. The fix mentioned by Microsoft is for 2005 but I am still giving it a try if I can find the folders correctly
[2013-02-04 21:30:13 -0500] paulmooring: redsamh: That shouldn't be a difficult fix in the cookbook if you can confirm you have the same issue
[2013-02-04 21:30:26 -0500] jhowarth: Is it possible to turn off the chef-client daemon through the chef-client cookbook?
[2013-02-04 21:30:34 -0500] jhowarth: I do not want to run in daemon mode.
[2013-02-04 21:31:04 -0500] redsamh: no it is not the same error
[2013-02-04 21:31:08 -0500] ivey: jhowarth: set node.chef_client.init_style to "nahgahdoih" or some other nonsense
[2013-02-04 21:31:18 -0500] ivey: should skip the service initialization
[2013-02-04 21:31:18 -0500] redsamh: paulmooring: give me a second let me put it on pastebin
[2013-02-04 21:31:58 -0500] jhowarth: ty ivey
[2013-02-04 21:32:19 -0500] ivey: jhowarth:
[2013-02-04 21:32:24 -0500] ivey: my pleasure
[2013-02-04 21:34:15 -0500] redsamh: paulmooring: no it is not the same - http://pastebin.com/4z5tjNQG
[2013-02-04 21:34:35 -0500] redsamh:             Message:
[2013-02-04 21:34:36 -0500] redsamh:                         Access is denied.
[2013-02-04 21:35:19 -0500] redsamh: paulmooring: this has been reported and unresolved (in the above link: http://tickets.opscode.com/browse/COOK-1172?page=com.atlassian.streams.streams-jira-plugin%3Aactivity-stream-issue-tab)
[2013-02-04 21:35:33 -0500] redsamh: I tried using Powershell and windows_package
[2013-02-04 21:36:27 -0500] redsamh: paulmooring: I can however run the command directly on the server and it works. So it hsa to do with permissions or the user executing the command (that is why I switched to powershell)
[2013-02-04 21:45:59 -0500] tigerjon: HI, I am trying to migrate from private chef to hosted chef, I am using the script provided on the site to bootstrap wit hthe new certs but the client names are going in with FQDN
[2013-02-04 21:46:13 -0500] tigerjon: is there an easy way to get node_name from the bootstrap to place into client.rb
[2013-02-04 21:46:22 -0500] tigerjon: echo "node_name \"<%= @config[:chef_node_name] %>\"" >> /etc/chef/client.rb doesn't seem to work
[2013-02-04 22:10:39 -0500] javmorin: I just bumped some ec2 instances to (omnibus) chef 11.0.0 and it seems that the bundled ohai has a loop problem
[2013-02-04 22:11:57 -0500] javmorin: it seems to be looping in the ec2_metadata mixin
[2013-02-04 22:13:28 -0500] javmorin: also seems to be sucking up memory while doing so (not surprisingly)
[2013-02-04 22:13:33 -0500] javmorin: any suggestions?
[2013-02-04 22:19:01 -0500] mattray: javmorin: you have an example? Like knife node show NODE -a ec2?
[2013-02-04 22:19:07 -0500] mattray: perhaps a gist?
[2013-02-04 22:19:38 -0500] javmorin: mattray: I was just working on that
[2013-02-04 22:19:48 -0500] _josh: is anyone else having trouble with the ark cookbook since the chef11 release? I'm getting the following: undefined method `attribute' for Chef::Resource::Ark:Class
[2013-02-04 22:20:05 -0500] mattray: javmorin: thanks.
[2013-02-04 22:20:06 -0500] javmorin: I am able to reproduce running ohai directly, if I give it a few seconds, then break
[2013-02-04 22:26:18 -0500] ssd7: _josh: Can you post a gist of the full error?
[2013-02-04 22:27:22 -0500] _josh: https://gist.github.com/3b4ad55a6c7e0f592cad
[2013-02-04 22:27:37 -0500] _josh: i think it doesn't use the new attribute syntax yet, maybe
[2013-02-04 22:28:14 -0500] SplasPood: When using value_for_platform, say I wanted something for only 5.X revisions of centos (as an example) ..  is there a better way than doing this?
[2013-02-04 22:28:17 -0500] SplasPood:     %w(5.0 5.1 5.2 5.3 5.4 5.5 5.6 5.7 5.8) => %w(php53 php53-devel php53-cli php-pear),
[2013-02-04 22:28:47 -0500] SplasPood: I guess I could not use value_for_platform and instead write my own logic
[2013-02-04 22:30:45 -0500] javmorin: mattray: Here is a gist of an interrupted ohai run https://gist.github.com/3a389d633d3ac308e130
[2013-02-04 22:31:45 -0500] javmorin: it seems to loop forever. I noticed it as several of my instances (all c1.mediums) started running out of memory and the chef-client process was > 900MB
[2013-02-04 22:33:11 -0500] mattray: javmorin: if you could open a ticket, btm and ssd can get it verified and prioritized to get fixed
[2013-02-04 22:33:47 -0500] mattray: javmorin: also, any additional AWS-specific details would be appreciated
[2013-02-04 22:34:17 -0500] javmorin: will open a ticket now
[2013-02-04 22:35:26 -0500] javmorin: should I put it under the ohai project, since that seems to be the root of the issue?
[2013-02-04 22:36:23 -0500] mattray: yes please
[2013-02-04 22:39:47 -0500] javmorin: this is interesting.. it appears to be happening on multiple 64bit instances, but I just tried a 32bit instance and ohai runs there just fine
[2013-02-04 22:41:19 -0500] javmorin: red herring,, I found a 64bit instance that does run
[2013-02-04 22:47:48 -0500] epta: How can I run number of shell commands in specific dir and return back?
[2013-02-04 22:49:51 -0500] bluepojo: schisamo: Any word on hubot cookbook being open sourced? :D
[2013-02-04 22:50:16 -0500] schisamo: bluepojo: on my list...in the middle of all things Chef 11 Server ATM.
[2013-02-04 22:50:22 -0500] bluepojo: no sweat
[2013-02-04 22:50:24 -0500] bluepojo: ty
[2013-02-04 22:50:55 -0500] schisamo: np...I should have more time later this week as we aren't shipping any major versions of Chef next week :)
[2013-02-04 22:55:26 -0500] bluepojo: thanks
[2013-02-04 22:56:20 -0500] javmorin: mattray: OHAI-441 has been added
[2013-02-04 22:58:16 -0500] c_t: For about ten minutes earlier this afternoon I started digging around to see if I had the login handy to be able to download the hobbyist VMS stuff and see if I could get chef running on there
[2013-02-04 22:58:32 -0500] c_t: slapped myself back into sense after about 10 minutes of digging though
[2013-02-04 23:00:04 -0500] bergelmir: does anyone have a working example how to send data via http put request? i am currently using http_request but i am not getting any data.
[2013-02-04 23:03:02 -0500] SplasPood: c_t: wait... chef for OpenVMS??!?
[2013-02-04 23:03:33 -0500] c_t: SplasPood: looks like it could conceivably work
[2013-02-04 23:03:52 -0500] c_t: the normal ruby for VMS is 1.8.2, but jruby seems to work under VMS
[2013-02-04 23:04:04 -0500] SplasPood: c_t: hah... I should update my membership and get new media and fire up the VAX :P
[2013-02-04 23:04:34 -0500] c_t: SplasPood: it looks like you can even download it now instead of having to shell out $30 for a CD
[2013-02-04 23:04:39 -0500] SplasPood: c_t: iirc the 'membership' fee only covered 1yr
[2013-02-04 23:04:55 -0500] SplasPood: c_t: and the last time I played with it had to be a good 6 yrs ago
[2013-02-04 23:04:56 -0500] c_t: yeah, but you can re-up your license for $0
[2013-02-04 23:05:04 -0500] SplasPood: oh yea?  maybe I'll poke
[2013-02-04 23:05:23 -0500] c_t: I used ot have Alpha media, but the alpha motherboard I got for free never booted
[2013-02-04 23:05:33 -0500] c_t: then someone drove through my house & the CD was a casualty
[2013-02-04 23:05:36 -0500] SplasPood: I've got a bunch of alphas that don't work for one reason or another
[2013-02-04 23:05:50 -0500] SplasPood: but the vaxstation still works great :P
[2013-02-04 23:06:07 -0500] c_t: I saw a vaxstation case up at Boeing Surplus when that was a thing
[2013-02-04 23:06:14 -0500] c_t: nothing inside though
[2013-02-04 23:06:35 -0500] bergelmir: ok, http_request works fine :) found my mistake
[2013-02-04 23:07:17 -0500] c_t: SplasPood: For the hell of it, once I got chef up and running under Debian/390
[2013-02-04 23:07:37 -0500] c_t: wasn't much to it, except it had to be done from sources
[2013-02-04 23:08:37 -0500] epta: How can I rewrite http://pastebin.com/raw.php?i=8gHEg5z3 in recipe?
[2013-02-04 23:08:38 -0500] SplasPood: c_t: Never had the pleasure of mucking around with much 390 stuff
[2013-02-04 23:08:55 -0500] epta: I wanna run number of shell commands in specific dir and return back
[2013-02-04 23:09:01 -0500] SplasPood: epta: you can use a 'bash' resource
[2013-02-04 23:09:14 -0500] SplasPood: epta: example in the resources doc should cover ya
[2013-02-04 23:09:20 -0500] c_t: SplasPood: miracle of Hercules
[2013-02-04 23:09:53 -0500] c_t: presumably it would work fine with the other Linuxes creeping around on s/390 etc.
[2013-02-04 23:10:00 -0500] epta: SplasPood: should I do `cd dir' and `cd -' manually?
[2013-02-04 23:10:50 -0500] SplasPood: epta: there's a 'cwd' param to the resource
[2013-02-04 23:10:59 -0500] SplasPood: epta: that'll put you in a dir before running the commands
[2013-02-04 23:11:29 -0500] epta: Nice
[2013-02-04 23:11:41 -0500] epta: So what I need is execute provider?
[2013-02-04 23:11:54 -0500] SplasPood: epta: I forget if that's exactly the same thing, but yes
[2013-02-04 23:12:34 -0500] SplasPood: epta: hrm
[2013-02-04 23:13:05 -0500] SplasPood: epta: I do this in one of my things... http://pastebin.com/WJbP7Ged
[2013-02-04 23:13:19 -0500] epta: Nice
[2013-02-04 23:16:12 -0500] epta: Where can I get full list of opscodes environment variables? I've notice ENV['HOME'] here http://technology.customink.com/blog/2012/05/28/provision-your-laptop-with-chef-part-1/ and interesting about rest of them
[2013-02-04 23:17:01 -0500] mattray: epta: the environment variables are whatever you define
[2013-02-04 23:17:11 -0500] mattray: in your .bash_profile or wherever
[2013-02-04 23:17:23 -0500] mattray: you access them with ENV['FOO']
[2013-02-04 23:17:43 -0500] ptrstr: mattray: we use node.current_normal.delete("")..what happened to that method in chef11
[2013-02-04 23:18:39 -0500] mattray: kallistec: ^^?
[2013-02-04 23:20:44 -0500] kallistec: ptrstr: wow, that was some serious internal implementation stuff
[2013-02-04 23:22:35 -0500] ptrstr: kallistec: heh..it's used to clean out attributes that are then reloaded from a databag
[2013-02-04 23:23:19 -0500] kallistec: ptrstr: you can probably do just node.normal.delete
[2013-02-04 23:23:32 -0500] kallistec: was there a reason that didn't work before?
[2013-02-04 23:23:36 -0500] kallistec: it should have...
[2013-02-04 23:24:01 -0500] ptrstr: kallistec: the other one i ran into is in the sensu cookbook: libraries/json_file.rb
[2013-02-04 23:24:37 -0500] ptrstr: kallistec: undefined method `attribute' for Chef::Resource::JsonFile:Class
[2013-02-04 23:24:55 -0500] ptrstr: kallistec: i don't remember..i'll check into node.normal_delete
[2013-02-04 23:26:20 -0500] epta: Is there some library for shell routines like ln -sf? Or it's better to call them with execute or bash?
[2013-02-04 23:27:59 -0500] kallistec: epta: there's a link resource, use that
[2013-02-04 23:29:13 -0500] SplasPood: epta: You could call Chef::Log.info(ENV.inspect) and it would log the contents of the ENV at runtime..
[2013-02-04 23:29:36 -0500] epta: Exactly
[2013-02-04 23:29:52 -0500] SplasPood: epta: re what kallistec said.. always try and find yourself a resource that fits the bill first before resorting to execute and the like..
[2013-02-04 23:31:26 -0500] yfeldblum: https://twitter.com/yfeldblum/status/298569432140222465 - Unicorn's handling of TERM vs QUIT: backwards?
[2013-02-04 23:37:15 -0500] bougyman: hrm
[2013-02-04 23:37:18 -0500] bougyman: i'm getting Exception `Errno::EAGAIN' at /opt/chef/embedded/lib/ruby/1.9.1/net/protocol.rb:141 - Resource temporarily unavailable - read would block
[2013-02-04 23:37:20 -0500] bougyman: Exception `Errno::EAGAIN' at /opt/chef/embedded/lib/ruby/1.9.1/net/protocol.rb:141 - Resource temporarily unavailable - read would block
[2013-02-04 23:37:24 -0500] bougyman: over and over constantly when I try to run chef-clieent.
[2013-02-04 23:37:50 -0500] bougyman: it never returns from 'using first ip address', just hangs. i exported -d to RUBYOPT to see what was happening and the above just constantly scrolls.
[2013-02-04 23:38:40 -0500] bougyman: chef 10.18.2
[2013-02-04 23:41:07 -0500] bougyman: seems a lot of stuff is missing in /etc/ohai
[2013-02-04 23:41:15 -0500] bougyman: check /etc/ohai on another box?
[2013-02-04 23:42:05 -0500] bougyman: nope, those are the same 3 files on the other boxes.
[2013-02-04 23:42:32 -0500] DeadZen: heh
[2013-02-04 23:42:37 -0500] DeadZen: what is 33.4% of one internet
[2013-02-04 23:56:23 -0500] c_t: exit
[2013-02-04 23:56:25 -0500] c_t: gah

[2013-02-05 00:03:43 -0500] magoo: i need to see if the current node has a particular role assigned. I'm using this but I think it's not reporting the roles correctly
[2013-02-05 00:03:51 -0500] magoo: if node.roles.grep(/blah/)
[2013-02-05 00:06:01 -0500] ranjibd: magoo, try node.roles.include?( 'blah')
[2013-02-05 00:06:25 -0500] ranjibd: magoo, if theres no node matching blah, then grep will return an empty
[2013-02-05 00:06:43 -0500] ranjibd: so you might want.. unless node.roles.grep(/blah/).empty?
[2013-02-05 00:07:02 -0500] ranjibd: empty array i mean,
[2013-02-05 00:07:06 -0500] magoo: ranjibd: thanks, i just realized that i should have appended .empty on the end
[2013-02-05 00:07:10 -0500] magoo: your way is cleaner though
[2013-02-05 00:07:37 -0500] ranjibd: include? will work if you know the exact name,
[2013-02-05 00:07:47 -0500] mpatel: Anyone here observed chef-solo create multiple <defunct> zombie processes after each run?
[2013-02-05 00:08:04 -0500] magoo: i do so i'll go that route
[2013-02-05 00:09:00 -0500] magoo: thanks ranjibd, that works
[2013-02-05 00:21:23 -0500] beandip: Is anyone here using the edelight mongodb cookbook in a vagrant ?
[2013-02-05 00:21:42 -0500] beandip: I can't get it to load.  I run into ArgumentError exceptions
[2013-02-05 00:25:36 -0500] zpatten: Chef Gurus: Will Chef 11.x server debian packages be limited to only 64-bit archs?  I've noticed you don't have any i386 deb packages available via "omnitruck" yet.
[2013-02-05 00:26:16 -0500] javmorin: zpatten: I am in the same boat, as my chef server is a 32bit machine as well
[2013-02-05 00:27:26 -0500] zpatten: javmorin: Ya my work chef-servers are all 32-bit too; and I was tweaking some bits in Cucumber-Chef to bring it in line with the new chef bits and that's when I discovered no i386 deb packages.
[2013-02-05 00:29:49 -0500] zpatten: Anyways was just curious if someone knows if those will be ultimately available or not
[2013-02-05 00:31:09 -0500] zpatten: Since anyone using cucumber-chef will be yelling at me when they can't get 11.x on their i386 test lab; just wanted to have an answer for those people...
[2013-02-05 00:35:29 -0500] magoo: trying to do a search inside of a new library I defined. How can i access the search function inside of the library?
[2013-02-05 00:37:14 -0500] timsmith: here's a data bag search example
[2013-02-05 00:37:15 -0500] timsmith: https://github.com/opscode-cookbooks/nagios/blob/jtimberman/v4/libraries/data_bag_helper.rb
[2013-02-05 00:41:07 -0500] Rudd-XXX: I have a problem.  Recipe B after recipe A depends on user created in recipe A (homedir = node[:etc][:passwd][user][:dir]) but at the time Recipe B is compiled, "user" variable does not reference any user in the ohai data.
[2013-02-05 00:41:23 -0500] Rudd-XXX: I did not expect recipe B to be compiled until after recipe A had run
[2013-02-05 00:41:25 -0500] Rudd-XXX: ideas?
[2013-02-05 00:46:47 -0500] Rudd-XXX: hello?
[2013-02-05 00:46:54 -0500] Rudd-XXX: anyone there?
[2013-02-05 00:48:53 -0500] cheeseplus: Rudd-XXX: include recipe A in recipe B?
[2013-02-05 00:48:59 -0500] magoo: thanks timsmith
[2013-02-05 00:54:00 -0500] Rudd-XXX: cheeseplus, they are orthogonal
[2013-02-05 00:54:11 -0500] Rudd-XXX: and that would still not fix the problem
[2013-02-05 00:54:39 -0500] Rudd-XXX: as the evaluation of homedir line would still happen before the user is created
[2013-02-05 00:57:17 -0500] Rudd-XXX: this does not work either:
[2013-02-05 00:57:17 -0500] Rudd-XXX: ruby_block "createsshdir" do
[2013-02-05 00:57:17 -0500] Rudd-XXX:   block do
[2013-02-05 00:57:18 -0500] Rudd-XXX:   # create SSH key pair for the artifacts manager
[2013-02-05 00:57:18 -0500] Rudd-XXX:     homedir = node[:etc][:passwd][user][:dir]
[2013-02-05 00:57:18 -0500] Rudd-XXX:     d = directory homedir + "/.ssh" do
[2013-02-05 00:57:18 -0500] Rudd-XXX:       owner user
[2013-02-05 00:57:21 -0500] Rudd-XXX:       mode "0700"
[2013-02-05 00:57:23 -0500] Rudd-XXX:     end
[2013-02-05 00:57:25 -0500] Rudd-XXX:     d.run_action(:create)
[2013-02-05 00:57:27 -0500] Rudd-XXX:   end
[2013-02-05 00:57:29 -0500] Rudd-XXX: end
[2013-02-05 00:57:34 -0500] chrisftw: Just 499 members?  oh so close. :)
[2013-02-05 00:57:36 -0500] Rudd-XXX: it says that directory is not a method
[2013-02-05 00:57:55 -0500] Rudd-XXX: undefined method `directory' for Chef::Resource::RubyBlock
[2013-02-05 00:58:07 -0500] Rudd-XXX: how do I create a particular resource in that context?
[2013-02-05 01:00:05 -0500] chrisftw: Rudd-XXX: I came in after the fact - but why is this in a ruby_block?  What part requires that block?  (I am a chef beginner)
[2013-02-05 01:00:26 -0500] Rudd-XXX: the code inside the block MUST be evaluated during convergence phase
[2013-02-05 01:03:40 -0500] chrisftw: I might have an easier problem.  One of my services is restarting in my default recipe before the application recipe makes the config file required for the restart.  How do I make the restart dependent  on the config file being created?
[2013-02-05 01:03:43 -0500] Rudd-XXX: hello?
[2013-02-05 01:04:31 -0500] chrisftw: Sorry Rudd-XXX I am a beginner.  I would try to setup d (the variable) before the block, and access it inside the block.
[2013-02-05 01:04:52 -0500] Rudd-XXX: I can't because the variable comes from ohai data that isn't there until a previous recipe has run
[2013-02-05 01:06:02 -0500] chrisftw: Is directory a class method on an object?  Maybe it would work with the full namespace?
[2013-02-05 01:22:06 -0500] yvonne_: @Rudd-XXX, could you force a reload of the ohai data when recipe A has run?
[2013-02-05 01:22:19 -0500] Rudd-XXX: i did
[2013-02-05 01:22:21 -0500] Rudd-XXX: does not matter
[2013-02-05 01:22:31 -0500] Rudd-XXX: because the problem is at compile time, not at converge time
[2013-02-05 01:22:52 -0500] Rudd-XXX: how do I make this work:
[2013-02-05 01:22:53 -0500] Rudd-XXX: ruby_block "createsshdir" do
[2013-02-05 01:22:53 -0500] Rudd-XXX:   block do
[2013-02-05 01:22:53 -0500] Rudd-XXX:   # create SSH key pair for the artifacts manager
[2013-02-05 01:22:54 -0500] Rudd-XXX:     homedir = node[:etc][:passwd][user][:dir]
[2013-02-05 01:22:54 -0500] Rudd-XXX:     r = Chef::Resource::Directory.new(homedir + "/.ssh")
[2013-02-05 01:22:55 -0500] Rudd-XXX:     r.owner user
[2013-02-05 01:22:57 -0500] Rudd-XXX:     r.mode "0700"
[2013-02-05 01:22:59 -0500] Rudd-XXX:     r.run_action(:create)
[2013-02-05 01:23:01 -0500] Rudd-XXX:   end
[2013-02-05 01:23:03 -0500] Rudd-XXX: end
[2013-02-05 01:23:07 -0500] Rudd-XXX: it bombs out with an error saying something about events nilclass
[2013-02-05 01:23:18 -0500] Rudd-XXX: undefined method `events' for nil:NilClass
[2013-02-05 01:29:15 -0500] clintel: hi everyone. i've noticed that, having given a rating for a cookbook on the opscode community site, the README has now disappeared from the 'Details' tab. is there a proper way to report this to Opscode?
[2013-02-05 01:33:40 -0500] clintel: is there anyone active in this channel?
[2013-02-05 01:40:31 -0500] javmorin: any opscode admins about? I just trying resolving a re-opened task in Jira, and I think I may have done the wrong thing
[2013-02-05 01:40:45 -0500] javmorin: or opscode devs
[2013-02-05 01:41:09 -0500] javmorin: someone who knows the expected Jira workflow for opscode :-/
[2013-02-05 01:44:14 -0500] clintel: it looks like everyone is asleep at the moment. i've been here for 20mins and not seen any activity
[2013-02-05 01:44:35 -0500] clintel: i was going to ask about how to get involved in contributing to others' cookbooks on the Opscode Community
[2013-02-05 01:46:16 -0500] clintel: don't suppose you know, javmorin? i've never contributed to any projects in github repos, before, but i'd like to start. there are a few cookbooks in their infancy that i think i could add to
[2013-02-05 01:47:19 -0500] javmorin: what I do know is that if it's an opscode repo/project, you need to sign a contribution agreement
[2013-02-05 01:47:38 -0500] javmorin: pretty bog standard (a process they adapted from the Apache Foundation iirc)
[2013-02-05 01:47:59 -0500] clintel: ok, i'll see if i can find that, then. cheers :)
[2013-02-05 01:48:00 -0500] javmorin: as for other non-opscode cookbooks, I believe that is up to the individual developer of those projects
[2013-02-05 01:48:20 -0500] javmorin: most will have "how to contribute" bits on their github repos
[2013-02-05 01:49:05 -0500] jtimberman: How to contribute: http://wiki.opscode.com/display/chef/How+to+Contribute
[2013-02-05 01:49:23 -0500] jtimberman: That is for opscode maintained projects, including cookbooks. Additionally there's a link to the cookbook specific pages
[2013-02-05 01:49:36 -0500] jtimberman: http://wiki.opscode.com/display/chef/How+to+Contribute+to+Opscode+Cookbooks
[2013-02-05 01:49:46 -0500] javmorin: jtimberman: thanks.. was just about to post that very link :-)
[2013-02-05 01:49:50 -0500] jtimberman: Opscode only maintains ~135 cookbokos on the community site. The rest are individual authors
[2013-02-05 01:49:57 -0500] jtimberman: who have their own contribution guidelines/requirements
[2013-02-05 01:50:35 -0500] javmorin: jtimberman: could you answer my earlier question about my submitted fix (more specifically about Jira)
[2013-02-05 01:51:25 -0500] javmorin: I had contributed a fix a while back, but the ticket was reopened as a spec for the fix was requested.. I just submitted a new version, but I think I closed the ticket wrong
[2013-02-05 01:52:10 -0500] javmorin: http://tickets.opscode.com/browse/CHEF-2760 is the ticket in question
[2013-02-05 01:53:02 -0500] jtimberman: javmorin: i reopened
[2013-02-05 01:53:13 -0500] jtimberman: javmorin: click 'fix provided' if your pull request / commit is linked
[2013-02-05 01:53:39 -0500] javmorin: ok.. got it I had done that first, but it didn't give me a 'comment' box (no prompting at all)
[2013-02-05 01:54:13 -0500] javmorin: thanks for the assist
[2013-02-05 01:54:26 -0500] javmorin: now I know better for the next time
[2013-02-05 02:04:27 -0500] magoo: ok, really odd problem here. I've got a call to search returning an array that includes the node i want, but also, a 0 and a 1
[2013-02-05 02:04:30 -0500] clintel: thanks for your help guys. sorry, i was out of the office for a bit. i will see if i can get started with contributing
[2013-02-05 02:05:50 -0500] igor47_: my cookbooks are broken with chef 11... is there a recursive to_hash method? or, how do i recursively convert an attribute into a ruby hash?
[2013-02-05 02:07:46 -0500] magoo: just looked at the search class, it looks like search returns an array with the first element being the array of nodes
[2013-02-05 02:08:29 -0500] igor47: i'm going to use a hack, like JSON.parse(node.my_attribute.to_json) because without it, i get nested immutable attributes under the top level
[2013-02-05 02:32:08 -0500] clintel: is there are preferred action to take when part of a recipe is not supported on a given platform? i.e. in a "case node['platform']", my "else" should do what...? just, perhaps: Chef::Log.error("Can't configure the widget on #{node['platform']}, sorry!"); raise "Platform not supported"
[2013-02-05 02:32:39 -0500] jtimberman: clintel: thats an option. depends on if its fatal enough to abort the entire chef run, or if it's okay to just skip the recipe and continue.
[2013-02-05 02:32:46 -0500] jtimberman: if you just want to skip, use return
[2013-02-05 02:41:15 -0500] clintel: ok, thanks JT
[2013-02-05 02:57:56 -0500] Lrrr: I'm having problems with the Gitorious cookbook... it seems some command should be executed ruby instead of the embedded Ruby and I don't really know how to do that
[2013-02-05 03:18:30 -0500] pwf: what's the preferred way to check if a data bag has a certain key
[2013-02-05 03:19:34 -0500] jtimberman: pwf: mydater = data_bag_item(:daterbag, "thingy") ; mydater.has_key?("key")
[2013-02-05 03:20:05 -0500] pwf: that assumes 'thingy' exists, right?
[2013-02-05 03:20:14 -0500] pwf: i want to check for the existence of 'thingy', not 'key'
[2013-02-05 03:20:22 -0500] jtimberman: thingy would be the data bag item
[2013-02-05 03:21:49 -0500] pwf: how do i check for the existence of an item then?
[2013-02-05 03:22:52 -0500] pwf: like if my node has a 'vhost' attribute, i want to check my 'secrets' data bag for an item corresponding to the vhost, and then use the ssl cert from that databag if it exists, and create a self signed one if it doesn't
[2013-02-05 03:23:07 -0500] jtimberman: there's an example here: https://github.com/opscode-cookbooks/nagios/blob/jtimberman/v4/libraries/data_bag_helper.rb
[2013-02-05 03:23:18 -0500] jtimberman: where it will iterate through all the bags and search each one for the specified query.
[2013-02-05 03:23:57 -0500] pwf: ergh... there's a way to just ask a single data bag if it has a certain item right?
[2013-02-05 03:24:01 -0500] pwf: i guess i should just use the source
[2013-02-05 03:26:50 -0500] pwf: ergh... still not clear on how to do this. i guess a search is for me...
[2013-02-05 03:27:02 -0500] jtimberman: something like
[2013-02-05 03:27:03 -0500] jtimberman: secret = data_bag('secret')
[2013-02-05 03:27:03 -0500] jtimberman: secret.each {|k| generate_key unless data_bag_item('secrets', k)['ssl_cert']}
[2013-02-05 03:27:05 -0500] pwf: and i should stop using 'ergh', it's not a word
[2013-02-05 04:58:22 -0500] jberanek: I'm seeing problems with the install.sh script for Chef Omnibus. Is anyone else seeing issues?
[2013-02-05 05:00:40 -0500] jberanek: (Doesn't seem to be picking up the version or machine architecture to download the appropriate file on Ubuntu 12.04)
[2013-02-05 05:05:07 -0500] cheeseprocedure: @jberanek for what it's worth, the manual installation (via dpkg -i [installer].pkg) is a breeze
[2013-02-05 05:05:51 -0500] jberanek: Understood, and have done it that path, just bringing it up in case I'm dealing with some weird environmental issue or the omnibus script is broken
[2013-02-05 05:06:13 -0500] cheeseprocedure: gotcha
[2013-02-05 06:43:50 -0500] chefic: I am hitting an issue with apt cookbook, he repository file to create is nil, cannot continue
[2013-02-05 06:46:07 -0500] chefic: The repository file to create is nil, cannot continue  (https://github.com/DataDog/chef-datadog/issues/41) , Help Help
[2013-02-05 07:15:20 -0500] chefic: There is yet another issue for someone to look at for apt cookbook  + nodejs
[2013-02-05 07:15:23 -0500] chefic: https://github.com/mdxp/nodejs-cookbook/issues/26
[2013-02-05 07:52:48 -0500] kallistec: igor47: #dup
[2013-02-05 08:36:47 -0500] ttgb: Been banging my head against this error for a while: Cannot find a resource for mysql_database_user on ubuntu version 12.04 - tried all the usual solutions
[2013-02-05 09:35:10 -0500] poseid: hmm.. how would I start using berkshelf to setup a VM with postgres?
[2013-02-05 09:39:06 -0500] poseid: when I start here:  http://berkshelf.com/
[2013-02-05 09:39:52 -0500] poseid: and run berks install, cookbooks are downloaded into /cookbooks...
[2013-02-05 09:40:21 -0500] poseid: so far so good... but now, how do I start writing a cookbook in e.g. site-cookbooks?
[2013-02-05 10:23:02 -0500] sraf: anyone know if its possible to pass custom arguments to knife bootstrap?
[2013-02-05 10:23:11 -0500] sraf: i need to customise a recipe execution based on some argument provided to bootstrap
[2013-02-05 10:23:20 -0500] sraf: or otherwise, via some environment variable
[2013-02-05 10:23:39 -0500] mattt: can't you feed it json ?
[2013-02-05 10:24:27 -0500] maruq: was going to suggest the same -j flag
[2013-02-05 10:25:27 -0500] sraf: yep - i saw that, dont quite understand where those arguments go.. can i access the json vars from my recipes?
[2013-02-05 10:27:01 -0500] maruq: I believe they should become available via node["foo"]["bar"]
[2013-02-05 10:28:25 -0500] sraf: ok thanks - will give it a go. Also - if I export some environment variables before running bootstrap, can the recipe access those?
[2013-02-05 10:28:38 -0500] sraf: ENV[...] didnt seem to work
[2013-02-05 10:32:49 -0500] Sean_: Hi, it's any one using Ubuntu 10.04 with newest chef 10.18.0-1 and seeing a lot of warning message?
[2013-02-05 10:32:56 -0500] Sean_: Error message: Node attributes are read-only when you do not specify which precedence level to set. To set an attribute use code like `node.default["key"] = "value"'
[2013-02-05 10:33:15 -0500] Sean_: And I am unable to downgrade chef from 10.18.0-1 to 10.16.2-1 via apt-get.
[2013-02-05 10:37:02 -0500] maruq: @sraf not sure what you mean system environment variables or chef environment variables?
[2013-02-05 10:38:14 -0500] maruq: sraf, not tried with system ones. if you use chef env vars, then they should be accessible through node["foo"]["bar"] (provided node was booted in correct env)
[2013-02-05 10:47:12 -0500] sraf: ok - thanks maruq
[2013-02-05 10:47:17 -0500] sraf: will have a play with json
[2013-02-05 10:52:36 -0500] maruq: sraf: no worries, good luck ;)
[2013-02-05 11:17:10 -0500] trilitheus: Hola - is the "supports" option in cookbooks metadata honoured?  The old wiki says it is not yet in use but this message is no longer shown in the new docs.opcode site
[2013-02-05 11:17:28 -0500] trilitheus: however, testing this by applying a cookbook with a "supports 'ubuntu'" to a RHEL node, the cookbook applies and is attempted to be run
[2013-02-05 11:53:48 -0500] intinig: ncrypted data bag (I get this error OpenSSL::Cipher::CipherError)
[2013-02-05 11:53:53 -0500] intinig: I was saying :)
[2013-02-05 11:54:02 -0500] intinig: I have a problem accessing an encrypted data bag
[2013-02-05 11:54:06 -0500] intinig: I get that error OpenSSL::Cipher::CipherError
[2013-02-05 11:54:18 -0500] intinig: Is it somehow related to the version of chef-client I am using?
[2013-02-05 11:54:32 -0500] intinig: If so, what is the easiest way to upgrade my chef client?
[2013-02-05 11:59:47 -0500] null_route: jonlives: Hi Jon - are you around?
[2013-02-05 12:00:22 -0500] jonlives: null_route: hey
[2013-02-05 12:00:52 -0500] null_route: Hi jon - It's mike - I'm trying to bring up spork on ruby1.8
[2013-02-05 12:01:28 -0500] null_route: I currently don't have a place where I can test it on ruby1.9 -
[2013-02-05 12:01:41 -0500] null_route: so I'm curious what next step I shoudlt ake
[2013-02-05 12:01:45 -0500] null_route: should take*
[2013-02-05 12:02:10 -0500] jonlives: null_route: could you post the gists I asked for in the comment please? will have a look at them :)
[2013-02-05 12:02:21 -0500] null_route: https://gist.github.com/tewner/01ab9e5d13b3a2792c8f
[2013-02-05 12:02:27 -0500] jonlives: but as I said, I haven't been supporting ruby 1.8 for a while so no promises ;)
[2013-02-05 12:02:41 -0500] null_route: I understand -
[2013-02-05 12:02:58 -0500] null_route: I have ruby1.8 on my windows machine, and I'll have the other guys install 1.9 -
[2013-02-05 12:03:03 -0500] jonlives: yeah there's def something weird going on there - spork version latest?
[2013-02-05 12:03:05 -0500] null_route: woops - I have 1.9
[2013-02-05 12:03:21 -0500] null_route: yes - newest spork - that is, I just ran gem install knife-spork
[2013-02-05 12:03:25 -0500] jonlives: null_route: you using the latest spork?
[2013-02-05 12:03:29 -0500] jonlives: ah ok cool
[2013-02-05 12:03:40 -0500] null_route: I mean - I ran that this morning
[2013-02-05 12:03:53 -0500] null_route: (wow, im' not being succinct today)
[2013-02-05 12:03:58 -0500] jonlives: hege
[2013-02-05 12:04:00 -0500] jonlives: *hehe
[2013-02-05 12:04:28 -0500] jonlives: the actual config file looks fine, but it looks like the config hash is being munged.
[2013-02-05 12:04:31 -0500] null_route: We're kinda' new to Chef, and I'm in charge of putting together a workflow - I'm able to tell the guys to use ruby1.9 on their workstations
[2013-02-05 12:05:03 -0500] jonlives: null_route: maybe worth setting up rvm on your workstation and trying out 1.9
[2013-02-05 12:05:10 -0500] null_route: ...but the ChefServer itself  is running 1.8, and I'm not sure I want to mess with that too much
[2013-02-05 12:05:36 -0500] null_route: jonlives: on our workstations, it works great, 'cause we have ruby1.9
[2013-02-05 12:05:39 -0500] null_route: :-)
[2013-02-05 12:05:48 -0500] jonlives: ah good stuff, that's something at least
[2013-02-05 12:05:54 -0500] null_route: yeah
[2013-02-05 12:06:06 -0500] null_route: ...and we're not completely stuck
[2013-02-05 12:06:12 -0500] jonlives: ruby 1.9's been out since 2007 and 1.8 is totally deprecated
[2013-02-05 12:06:37 -0500] null_route: it's just that during initial developement of our cookbooks, we're working on the chef server itself
[2013-02-05 12:06:46 -0500] null_route: I can also just tell people not to work on the chef server
[2013-02-05 12:06:52 -0500] null_route: ...that's an option.
[2013-02-05 12:06:53 -0500] jonlives: null_route: you running the chef server on 1.8??
[2013-02-05 12:07:10 -0500] jonlives: if so, I'd recommend against that
[2013-02-05 12:07:24 -0500] null_route: That's what following the opscode install instructions on a clean AWS ubuntu image gives :-(
[2013-02-05 12:07:37 -0500] intinig: ok, after upgrading chef-client
[2013-02-05 12:07:40 -0500] intinig: I now get this error
[2013-02-05 12:07:46 -0500] intinig: 79.125.61.76 [2013-02-05T12:04:44+00:00] FATAL: Chef::EncryptedDataBagItem::DecryptionFailure: Error decrypting data bag value: 'bad decrypt'. Most likely the provided key is incorrect
[2013-02-05 12:08:29 -0500] jonlives: null_route: notwithstanding, I'd reeeeeally recommend upgrading to ruby 1.9.3 - there should be packages for it in the Ubuntu repo I'd assume
[2013-02-05 12:08:37 -0500] intinig: I am pretty sure I am using the correct key
[2013-02-05 12:08:46 -0500] intinig: sorry regarding the pasted ip :)
[2013-02-05 12:09:16 -0500] null_route: jonlives: There are - but it's REALLY intrusive, and it's currently _the_ chef server - What I'm seeing is that I may be better off re-installing it from scratch.
[2013-02-05 12:09:44 -0500] null_route: I'd rather not _start_ this project with a frankenstein of an environment
[2013-02-05 12:09:48 -0500] jonlives: null_route: 1.8 is so old now I'd recommend it if at all possible
[2013-02-05 12:09:58 -0500] null_route: I'll try to push that.
[2013-02-05 12:10:35 -0500] jonlives: null_route: cool :)
[2013-02-05 12:10:44 -0500] jonlives: lemme know if you have any other issues :)
[2013-02-05 12:11:09 -0500] null_route: thank you for your time, jonlives !
[2013-02-05 12:11:25 -0500] jonlives: null_route: no problem, glad to (sorta) help :)
[2013-02-05 12:28:41 -0500] null_route: jonlives: Yep - Fresh install of ubuntu 12.04.2 LTS installs ruby1.8 when running "apt-get install chef chef-server-api chef-expander" with the opscode repository
[2013-02-05 12:28:58 -0500] jonlives: null_route: bleh
[2013-02-05 12:29:07 -0500] jonlives: you should be able to upgrade ruby after that tho
[2013-02-05 12:29:19 -0500] null_route: and "apt-get install ruby1.9" fails
[2013-02-05 12:30:14 -0500] null_route: https://gist.github.com/tewner/a3da592ea8d36edae658
[2013-02-05 12:30:18 -0500] jonlives: null_route: try this instead: http://www.opscode.com/chef/install/
[2013-02-05 12:30:25 -0500] jonlives: it's the new omnibus installer
[2013-02-05 12:30:38 -0500] null_route: taht'll give me v10 or v11?
[2013-02-05 12:31:58 -0500] jonlives: null_route: not sure, it'll tell you which version it's installing tho
[2013-02-05 12:32:23 -0500] jonlives: null_route: if you download the script, you can set the version command line arg
[2013-02-05 12:32:44 -0500] null_route: cool
[2013-02-05 12:33:16 -0500] null_route: Will the omnibus _for Enterprise Linux_ install rabbit/couch/etc ?
[2013-02-05 12:36:26 -0500] jonlives: null_route: iirc yes
[2013-02-05 12:37:19 -0500] null_route: cool
[2013-02-05 12:38:09 -0500] null_route: jonlives: how much should I trust 11.0.4 ?
[2013-02-05 12:39:48 -0500] jonlives: null_route: it was only released yesterday, we haven't upgraded to it yet at Etsy
[2013-02-05 12:39:55 -0500] null_route: kk
[2013-02-05 12:40:41 -0500] null_route: did this omnibus installer just chef-solo my machine?
[2013-02-05 12:41:04 -0500] null_route: that's cool
[2013-02-05 12:41:17 -0500] jonlives: it's all self contained too
[2013-02-05 12:41:23 -0500] jonlives: self contained ruby etc etc
[2013-02-05 12:42:19 -0500] null_route: Error executing action `run` on resource 'execute[verify-system-status]'
[2013-02-05 12:42:50 -0500] null_route: :-(
[2013-02-05 12:43:26 -0500] null_route: hmmm -
[2013-02-05 12:43:32 -0500] null_route: perhaps a Security Group problem
[2013-02-05 12:44:15 -0500] null_route: root@ip-10-128-28-11:~# curl -sf http://localhost:8000/_status root@ip-10-128-28-11:~# echo $? 22
[2013-02-05 12:45:47 -0500] null_route: anyway - I'm gonna' try the installer for v10 on CentOS -
[2013-02-05 12:45:54 -0500] null_route: I'll be back in a bit
[2013-02-05 13:02:41 -0500] intinig: can I reference another attribute in the override_attributes section of a role?
[2013-02-05 13:08:48 -0500] null_route: CentOS install fails as node['languages']['ruby']['gems_dir'] is nil
[2013-02-05 13:09:02 -0500] Houdini: Am I right, that this is not valid: notifies :restart, "deploy_revision[#{app_root}]" because of deploy_revision has no action restart?
[2013-02-05 13:09:36 -0500] null_route: nevermind - I'll figure that out :-)
[2013-02-05 13:22:39 -0500] tknerr: ohai chefs!
[2013-02-05 13:22:52 -0500] julienberard: hi there, I'm using chef-solo to install my chef-server instances. It seems to fail following the upgrade to chef to 11.0
[2013-02-05 13:22:55 -0500] tknerr: are there bento baseboxes for chef 11 already?
[2013-02-05 13:23:50 -0500] julienberard: the chef-solo recipe for chef-server is trying to install chef-server-api 11.0 which is not on rubygems(10.18.2). Should I report it somewhere?
[2013-02-05 13:28:22 -0500] julienberard: I can see the wiki has been updated today
[2013-02-05 13:28:25 -0500] julienberard: that is fine
[2013-02-05 14:21:23 -0500] gyre007: if I use not_if attribute in the resource and also notifies attribute will the notified resource be executed if the not_if returns 0 ? I mean if the resource will not be converged in the Chef run will it still notify other resources ?
[2013-02-05 14:21:49 -0500] Denis_: hi
[2013-02-05 14:21:57 -0500] Denis_: just installed chef-server 11
[2013-02-05 14:22:07 -0500] Denis_: and created databag
[2013-02-05 14:22:32 -0500] Denis_: but when I trying to add item I'm getting ERROR: No route matches {:action=>"new", :controller=>"databag_items", :databag_id=>nil}
[2013-02-05 14:30:36 -0500] null_route: I'm having a hard time installing chef 10.18 using the omnibus installer
[2013-02-05 14:30:42 -0500] null_route: things like
[2013-02-05 14:30:53 -0500] null_route: package "zlib-devel" do
[2013-02-05 14:30:58 -0500] null_route: doesn't recognize that I'm on Centos
[2013-02-05 14:31:43 -0500] kamabe: has anyone ever experienced a problem with the deep merge of attributes in chef not working if you override an attribute using a string instead of a symbol when the default was set using a symbol? for example, if i have a default attribute like this: default[:test][:my_attribute] = "blah" and then in a role-cookbook i override it like this: node["test"]["my_attribute"] = "bleh" it won't work.
[2013-02-05 14:32:06 -0500] kamabe: the same happens the opposite way as well, using a symbol when the default was set using string notation
[2013-02-05 14:32:46 -0500] kamabe: i didn't have this problem when i was using plain roles, so it makes me wonder if the deep merge is different within an actual recipe
[2013-02-05 14:40:40 -0500] null_route: This ombibus installer is QUITE annoying
[2013-02-05 14:40:48 -0500] null_route: it went and made the following symlink:
[2013-02-05 14:40:49 -0500] null_route: lrwxrwxrwx 1 root root 18 Feb  5 14:35 /usr/sbin/chef-solr -> /usr/bin/chef-solr
[2013-02-05 14:41:08 -0500] null_route: instead of /opt/chef/embedded/bin/chef-solr , perhaps?
[2013-02-05 14:59:37 -0500] trilitheus: Does anyone know if the "supports" option in cookbooks metadata honoured?  The old wiki says it is not yet in use but this message is no longer shown in the new docs.opcode site
[2013-02-05 14:59:41 -0500] trilitheus: however, testing this by applying a cookbook with a "supports 'ubuntu'" to a RHEL node, the cookbook applies and is attempted to be run
[2013-02-05 15:00:09 -0500] trilitheus: which suggests it isn;t yet used (10.16 BTW)
[2013-02-05 15:03:41 -0500] poseid: anyone know where/how to start with berkshelf?
[2013-02-05 15:03:53 -0500] justincampbell: poseid: berkshelf.com
[2013-02-05 15:04:09 -0500] kindsol_: http://vialstudios.com/guide-authoring-cookbooks.html
[2013-02-05 15:04:21 -0500] kindsol_: This is a great tutorial to get the workflow
[2013-02-05 15:04:41 -0500] poseid: e.g. I want to use a postgres cookbook, which is ok, but now I want to add postgres users, etc for which i probably need a site-cookbook
[2013-02-05 15:05:55 -0500] poseid:  ok, but I want to use a directory /cookbooks and /site-cookbooks for the application stuff... is this how it's done?
[2013-02-05 15:06:21 -0500] f1gjam: hey guys, is there a way I can pass ohai node['hostname'] to a node definition as an attribute
[2013-02-05 15:06:44 -0500] poseid: and another thing that confuses me is a Vagrantfile within a cookbook... cookbooks not having a Vagrantfile
[2013-02-05 15:07:38 -0500] f1gjam: basically the recipe wants me to define a unique name for shard and so it makes sense just naming it after the hostname
[2013-02-05 15:07:48 -0500] f1gjam: is that possible
[2013-02-05 15:13:33 -0500] f1gjam: anyone think of any other way of doing this?
[2013-02-05 15:17:12 -0500] trilitheus: f1gjam, shard = node['ohai']['nodename']?
[2013-02-05 15:17:43 -0500] f1gjam: so replace this
[2013-02-05 15:17:44 -0500] f1gjam: "shard_name": "node['hostname']",
[2013-02-05 15:17:54 -0500] trilitheus: or similar?
[2013-02-05 15:17:58 -0500] f1gjam: with "shard_name": node['ohai']['nodename'],
[2013-02-05 15:18:06 -0500] f1gjam: in the json
[2013-02-05 15:18:29 -0500] trilitheus: not sure nodename gets populated actually.... within ohai
[2013-02-05 15:18:44 -0500] ivey: poseid: did you figure it out or still confused?
[2013-02-05 15:19:30 -0500] Denis_: when I'm trying to add item to databag I'm getting ERROR: No route matches {:action=>"new", :controller=>"databag_items", :databag_id=>nil}
[2013-02-05 15:19:31 -0500] f1gjam: trilitheus, ill use hostname
[2013-02-05 15:19:40 -0500] trilitheus: I think the variable would still be hostname though
[2013-02-05 15:19:45 -0500] f1gjam: as thats what the docs say, however I wasn't sure if i could use ohai
[2013-02-05 15:19:48 -0500] f1gjam: in json
[2013-02-05 15:20:47 -0500] trilitheus: f1gjam, neither am i sorry - pretty new to this
[2013-02-05 15:21:12 -0500] f1gjam: oh :(
[2013-02-05 15:21:21 -0500] f1gjam: no experts here??
[2013-02-05 15:23:02 -0500] trilitheus: f1gjam, where are you adding that snippet?  Can you not set it within a recipe?
[2013-02-05 15:23:31 -0500] trilitheus: with node.set?
[2013-02-05 15:23:50 -0500] f1gjam: so
[2013-02-05 15:24:02 -0500] f1gjam: I'm passing it in a json as firstboot
[2013-02-05 15:24:16 -0500] f1gjam: so basically registering a node and defining what should be applied to it
[2013-02-05 15:25:20 -0500] trilitheus: OK, are you using chef-solo or chef-server?
[2013-02-05 15:26:43 -0500] poseid: ivey: hmm.. actually I am still confused... I know somewhat how librarian-chef works... dependencies in Cheffile go into --> /cookbooks , I can switch between site-cookbooks and library cookbooks there
[2013-02-05 15:26:59 -0500] ivey: so, Berkshelf uses a different model
[2013-02-05 15:27:42 -0500] ivey: by default, all downloaded deps from all cookbooks go in ~/.berkshelf, and the vagrant plugin knows where to find them
[2013-02-05 15:27:52 -0500] trilitheus: f1gjam, so you are using a portable piece of json to pass to -j on chef-client first run?  not sure you can do it in the raw json, but can you not pass a run list with a recipe and set it in the recipe?
[2013-02-05 15:28:30 -0500] ivey: if you really need to put them into ./cookbooks you can use the --path on berks install  but we've found that to be unnecessary most of the time
[2013-02-05 15:29:14 -0500] trilitheus: f1gjam, -j {'run_list':'recipe[somethingtosetshardname]'}
[2013-02-05 15:29:49 -0500] poseid: ivey: aahh .. ok, I see this now:  ~/.berkshelf/cookbooks/
[2013-02-05 15:30:23 -0500] ivey: poseid: berkshelf treats cookbooks more like software projects. you don't have a git repo called "Code" with all your apps in it, checked into 1 directory, right? so you don't need a chef-repo + site-cookbooks, you just need the thing you're working on now, plus any dependencies
[2013-02-05 15:31:07 -0500] poseid: ok, I see... and when I do berks cookbook foo
[2013-02-05 15:31:33 -0500] poseid: and I want to release foo... how would I do that?
[2013-02-05 15:31:49 -0500] poseid: release everything in the project folder where /foo is a subfolder?
[2013-02-05 15:31:57 -0500] ivey: release as inupload to chef server? or push to community?
[2013-02-05 15:33:03 -0500] poseid: yes, as in knife upload cookbook
[2013-02-05 15:33:09 -0500] ivey: berks upload
[2013-02-05 15:33:16 -0500] ivey: will upload the cookbook and dependencies
[2013-02-05 15:33:33 -0500] poseid: oh, ok.. sounds good...
[2013-02-05 15:33:45 -0500] f1gjam: trilitheus, one sec had to go afk
[2013-02-05 15:33:54 -0500] ivey: yeah it's pretty awesome, especially if you have a CI server pushing to chef for you
[2013-02-05 15:34:10 -0500] poseid: and when I use it in another project, foo-cookbook would go into .berkshelf
[2013-02-05 15:34:19 -0500] ivey: yeah
[2013-02-05 15:34:45 -0500] ivey: and in the other cookbook, you could point at the checked out copy via :path, or just get it from the chef server
[2013-02-05 15:34:50 -0500] poseid: ok, interesting
[2013-02-05 15:35:11 -0500] ivey: it changes you from working on "cookbooks" to working on "a cookbook"
[2013-02-05 15:35:18 -0500] jwilf: speaking of CI - anyone here have experience of CircleCI? we are considering trying it out
[2013-02-05 15:36:40 -0500] f1gjam: I'm using the chef client on the first run after that chef server is used
[2013-02-05 15:39:59 -0500] trilitheus: so could you not write a shardnaming recipe - it would set the attribute on the node on your first run?
[2013-02-05 16:05:33 -0500] sraf: is it possible to reference the current cookbook name from an attribute file?
[2013-02-05 16:11:12 -0500] jwcarman: Suppose I have a recipe that uses a data bag as a source of data.  Will changes in the data bag cause Chef to know that it needs to converge that node on the next Chef run?
[2013-02-05 16:13:09 -0500] magoo: isn't there a chef interpreter that I can interactively test code in?
[2013-02-05 16:13:14 -0500] magoo: can't remember what it's called
[2013-02-05 16:13:45 -0500] kallistec: magoo: in Chef 11, we renamed it to "chef-shell" original name is shef
[2013-02-05 16:14:17 -0500] magoo: thanks, that's what i was thinking of
[2013-02-05 16:15:17 -0500] jwcarman: Or, does Chef even have the smarts to know that things don't need to be done if nothing has changed?
[2013-02-05 16:16:14 -0500] magoo: jwcarman: your recipe will always pull the new values upon chef run. Then you can have the template resource notify a service it needs to restart, etc
[2013-02-05 16:16:53 -0500] jwcarman: magoo: so Chef doesn't try to figure out whether or not it needs to run based on system state vs. what's in the old system state, it always runs each resource/provider?
[2013-02-05 16:17:05 -0500] kallistec: jwcarman: yeah, comes down to the resources you create. If you're using these values in templates or whatever, files are only updated if content changes
[2013-02-05 16:17:35 -0500] magoo: jwcarman: no, the runs are defined in interval or done manually
[2013-02-05 16:17:43 -0500] kallistec: the decision about whether or not to modify something happens at the privider level
[2013-02-05 16:17:55 -0500] magoo: some people have chef run every 30 minutes; my team runs it manually when we've updated something
[2013-02-05 16:21:05 -0500] jwcarman: @kallistec, magoo: okay, cool.  Wanted to make sure stuff would happen if we use data bags.
[2013-02-05 16:22:25 -0500] siezer: jwcarman the recipes run on the edges, so every resource is evaluated against the *current* real state, not some cached representation of how-it-was-last-time
[2013-02-05 16:22:49 -0500] siezer: each resource being convergent, it usually takes no action to fix the system
[2013-02-05 16:23:07 -0500] magoo: kallistec: i want to use shef to debug a particular recipe but I'm not very clear on setting breakpoints. Is there a better example than the opscode wiki?
[2013-02-05 16:23:15 -0500] jwcarman: siezer: I know that.  I was under the wrong impression that Chef actually made the decision of whether or not to even run the recipe based on previous system state vs. current system state
[2013-02-05 16:23:26 -0500] siezer: ah. nope.
[2013-02-05 16:24:36 -0500] kallistec: magoo: nope, I think that's it
[2013-02-05 16:24:40 -0500] jwcarman: siezer: I could have sworn I read that somewhere, but then again I'm somewhat new to this stuff.  Could have been reading into it a bit, trying to take in all the information too quickly :)
[2013-02-05 16:28:29 -0500] r3vamp: Hey guys! Quick question: I'm using knife cookbook upload --freeze -E integration, however how can I roll back the changes using knife commands only (trying to see if it's possible).
[2013-02-05 16:29:19 -0500] r3vamp: So currently the integration environment has cookbook 1.0.2, and I upload 1.0.3, but I decide I want to roll back to 1.0.2. Is there a way to do this without having to reupload the cookbook?
[2013-02-05 16:30:18 -0500] cwj: r3vamp: knife environment edit foo
[2013-02-05 16:30:22 -0500] cwj: set the cookbook version to 1.0.2
[2013-02-05 16:30:29 -0500] cwj: (for that environment)
[2013-02-05 16:31:38 -0500] petenerd: Can someone help with with a Chef Windows question?  I'm trying to use "Notifies" to restart a service, when a template file is changed, but I can't seem to get it to work.
[2013-02-05 16:31:39 -0500] r3vamp: mmm, this is all going to be done via a script (upload new version, if it blows up, regress to previous version)
[2013-02-05 16:31:48 -0500] r3vamp: cwj: Not sure if I can use the edit command
[2013-02-05 16:32:05 -0500] cwj: r3vamp: then use the api to retrieve the environment, modify it and send it back
[2013-02-05 16:32:14 -0500] magoo: kallistec: thanks for all the help; one last question. If i connect as a client to my chef server with chef on my local laptop and include a recipe for a runthrough, it won't actually execute the commands will it?
[2013-02-05 16:33:02 -0500] r3vamp: cwj: Yes that'll work, thanks cwj
[2013-02-05 16:34:32 -0500] kallistec: magoo: yes, it does. I haven't tried using it with whyrun, so I don't know if that's an option
[2013-02-05 16:37:49 -0500] magoo: ok, thanks
[2013-02-05 16:38:39 -0500] geekbri: I'm using ohai 6.16.0, I've created a /etc/chef/ohai/hints/ec2.json file, but ohai isn't populating the ec2 node attributes at all.  Has anybody run into this before?
[2013-02-05 16:39:54 -0500] magoo: i ran into that just the other day ... have you tied running ohai manually and looking at the output?
[2013-02-05 16:41:12 -0500] geekbri: magoo: yeah thats what im doing.  it looks like the ec2 section is blank, and the "cloud" section has a bunch of nulls
[2013-02-05 16:41:28 -0500] magoo: are you in vpc?
[2013-02-05 16:43:30 -0500] geekbri: magoo: This particular instance is not in VPC
[2013-02-05 16:44:18 -0500] magoo: i'm not sure then... from what i read, the new ohai is supposed to pull non-vpc data even without touching the hint file
[2013-02-05 16:44:55 -0500] geekbri: magoo: yeah, it works fine on almost all other of my instances.
[2013-02-05 16:45:22 -0500] geekbri: looks like im going to have to dig through the ohai code
[2013-02-05 16:45:42 -0500] magoo: good luck
[2013-02-05 16:46:00 -0500] geekbri: thanks.
[2013-02-05 16:49:44 -0500] magoo: wow, i'm in love with shef <3
[2013-02-05 16:51:02 -0500] c_t: ohai
[2013-02-05 16:55:03 -0500] mattray: magoo: that's chef-shell in Chef 11 :)
[2013-02-05 16:55:54 -0500] magoo: looking forward to the upgrade :)
[2013-02-05 16:57:47 -0500] magoo: mattray: is it possible to set a break in a recipe that already exists? (in the chef-shell)
[2013-02-05 16:58:11 -0500] mattray: magoo: yeah, somewhere there's a pry/shef howto
[2013-02-05 16:59:47 -0500] mattray: and you can do the whole chef-client run within shef
[2013-02-05 17:01:11 -0500] mattray: magoo: lots of good stuff here: http://wiki.opscode.com/display/chef/Shef
[2013-02-05 17:01:12 -0500] magoo: i'm doing that part now... i think pry is the ticket
[2013-02-05 17:06:10 -0500] geekbri: magoo: looks like this might be my problem :X    [2013-02-05T16:59:04+00:00] DEBUG: Plugin ec2 threw exception #<SystemStackError: stack level too deep> /usr/lib/ruby/gems/1.9.2/gems/ohai-6.16.0/lib/ohai/mixin/from_file.rb:29
[2013-02-05 17:06:31 -0500] queso: If I have two cookbooks that each install a PHP app, and both basically do the same thing but for some names and locations, how can I abstract away the similarities?  Can I write my own "resource" that will do this?
[2013-02-05 17:06:33 -0500] magoo: wth?
[2013-02-05 17:06:37 -0500] jwitrick: why cant I use the '@cookbook_name' attribute with in templates/attribute files ?
[2013-02-05 17:11:06 -0500] chris613: What's the easiest way to find the chef-client version from within a report handler?
[2013-02-05 17:14:22 -0500] maruq: chris613: node['chef_packages']['chef']['version']
[2013-02-05 17:14:56 -0500] chris613: maruq: Thanks, not sure how I missed that.
[2013-02-05 17:15:06 -0500] maruq: chris613: no worries ;)
[2013-02-05 17:19:42 -0500] geekbri: magoo: looks like reverting to ohai 6.14.0 fixes the problem.  I found a opscode ticket for it.   http://tickets.opscode.com/browse/OHAI-434?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel
[2013-02-05 17:21:36 -0500] magoo: geekbri: nice! glad it worked out
[2013-02-05 17:21:47 -0500] geekbri: magoo: hopefully they fix that on in 6.18 ;)
[2013-02-05 17:22:36 -0500] kallistec: I wrote some words about Chef 11: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-02-05 17:25:12 -0500] geekbri: Just saw that on the twitter feed, I'll have to check it out
[2013-02-05 17:31:13 -0500] trilitheus: queso, Is there any attribute or tag that would differentiate between which recipe the niodes would get?
[2013-02-05 17:31:58 -0500] trilitheus: cuz then u could just do it with a simple if tagged?(type1)
[2013-02-05 17:32:07 -0500] trilitheus: use this value
[2013-02-05 17:54:02 -0500] magoo: was to_str defined for node objects only recently?
[2013-02-05 17:55:18 -0500] cwj: to_s ?
[2013-02-05 17:55:50 -0500] magoo: i'm gonna pastebin, 1 sec
[2013-02-05 17:59:58 -0500] magoo: i'm using this from various nginx recipes: http://pastebin.com/7V1DvprY
[2013-02-05 18:00:11 -0500] magoo: in dev, it works fine and prints the nodes that will be in the upstream
[2013-02-05 18:00:24 -0500] magoo: in staging, i get this:
[2013-02-05 18:00:24 -0500] magoo: chef > upstream_nodes[0].to_str
[2013-02-05 18:00:25 -0500] magoo: ArgumentError: Attribute to_str is not defined!
[2013-02-05 18:01:20 -0500] cwj: try upstream_nodes[0].class.name in both environments, ensure they are both the same class
[2013-02-05 18:12:44 -0500] timsmith: In Chef 10 when an attribute is overridden in role is that override present at the time the attributes file is evaluated.  It seems like it's not.  I have an if statement in the attributes file that doesn't seem to see the overridden value
[2013-02-05 18:20:34 -0500] magoo: cwj: both of type Chef::Node
[2013-02-05 18:20:50 -0500] joevandyk: I know a company who's looking to move away from the current provider onto ec2. Probably should use chef. e-commerce site with mysql. Any companies/individuals who could help them with getting the initial setup?
[2013-02-05 18:21:05 -0500] joevandyk: err, move away from their current provider and onto ec2
[2013-02-05 18:33:09 -0500] sabooky: Hi, quick question... How do you extend/modify an exiting cookbook? "require" it? Lets say I have a "tomcat" cookbook, but now I want my "my_application" cookbook to borrow/expand on some elements from "tomcat" cookbook
[2013-02-05 18:35:01 -0500] miah: fork, submit fixes
[2013-02-05 18:35:11 -0500] miah: or
[2013-02-05 18:35:17 -0500] miah: writ your own
[2013-02-05 18:35:37 -0500] miah: most cookbooks aren't written in a really reusable way
[2013-02-05 18:35:56 -0500] jtimberman: miah: :(
[2013-02-05 18:36:03 -0500] sabooky: miah: Yeah, this is a case where both cookbooks are custom made
[2013-02-05 18:36:04 -0500] timsmith: Fix them
[2013-02-05 18:36:13 -0500] miah: timsmith: we all try =)
[2013-02-05 18:36:25 -0500] miah: sabooky: what elements do you need from the tomcat cookbook?
[2013-02-05 18:36:27 -0500] sabooky: So trying to reate a good generic_parent_cookbook   inherits_from_parent cookbook
[2013-02-05 18:36:51 -0500] sabooky: I was using it as an example. The actual thing I'm doing is webphere and application
[2013-02-05 18:37:07 -0500] sabooky: the websphere cookbook has a lot of generic definitions and tools that one can leverage
[2013-02-05 18:37:18 -0500] miah: cool
[2013-02-05 18:37:36 -0500] sabooky: I can require 'websphere' and then use stuff from there.. but I'm wondering if this is the "proper" approach
[2013-02-05 18:37:59 -0500] miah: it really depends on how the cookbook was written and what parts of you want to use
[2013-02-05 18:38:18 -0500] miah: you can probably just 'depends websphere' in your metadata.rb and use the ieces you want
[2013-02-05 18:38:51 -0500] miah: but if its all buried in recipes/<random>.rb then you'll need to 'include_recipe foo' in your recipes
[2013-02-05 18:39:12 -0500] miah: if its proper provider / resource stuff you can extend it like you do other ruby code
[2013-02-05 18:39:29 -0500] sabooky: miah: is that the case for lwrp too?
[2013-02-05 18:39:36 -0500] miah: afaik, but unsure.
[2013-02-05 18:40:25 -0500] miah: the lwrp should create a standard r/p objects so it should be fine
[2013-02-05 18:40:44 -0500] miah: but i dont think many cookbooks are extending other cookbooks in that fashion
[2013-02-05 18:41:07 -0500] miah: aka monkey patching existing cookbooks
[2013-02-05 18:51:42 -0500] f1gjam: trilitheus, i realised i didn't need it in the end, as the shard for replica set has to be a single name :)
[2013-02-05 18:51:46 -0500] f1gjam: thanks for the help
[2013-02-05 18:54:12 -0500] jkyle: where can I find a list of variables available in a custom bootstrap, e.g. bootstrap_version_string
[2013-02-05 18:56:03 -0500] beandip: Hey all,
[2013-02-05 18:56:17 -0500] beandip: anyone using the edelite mongodb cookbook?
[2013-02-05 18:56:35 -0500] beandip: I'm having issues getting a vagrant box to load the cookbook properly
[2013-02-05 18:57:42 -0500] beandip: This is what I encounter: http://pastebin.com/X7x5UdJW
[2013-02-05 18:58:13 -0500] beandip: ArgumentError: wrong number of arguments (1 for 2)
[2013-02-05 18:58:24 -0500] beandip: not sure why
[2013-02-05 19:03:02 -0500] dysinger: at one point a year+ ago I had graphviz output from cb deps
[2013-02-05 19:03:10 -0500] dysinger: I can't find it now.  anyone?
[2013-02-05 19:03:49 -0500] dysinger: nm I found it
[2013-02-05 19:08:34 -0500] epta: sethvargo: there is a typo `knife.rp' in http://technology.customink.com/blog/2012/05/28/provision-your-laptop-with-chef-part-1/
[2013-02-05 19:09:27 -0500] sethvargo: epta: I don't work for customink anymore, so I don't have permissions to update that, but thanks for point it out. Might want to ping webops (at) customink
[2013-02-05 19:17:46 -0500] benlangfeld: A quick question about cookbook gem dependencies. Is it permissible to use #chef_gem in a library, such as here: https://github.com/edelight/chef-solo-search/blob/master/libraries/parser.rb Treetop's removal from v11 broke this.
[2013-02-05 19:19:16 -0500] epta: sethvargo: also, in part about configuring local machine with dotfiles there should be some words about roles ( http://technology.customink.com/blog/2012/07/30/provision-your-laptop-with-chef-part-2/ )
[2013-02-05 19:19:38 -0500] epta: It's sound more logical to use role instead of recipe including other recipes, right?
[2013-02-05 19:20:27 -0500] epta: And what for should I upload cookbook if I update only local machine?
[2013-02-05 19:21:17 -0500] sethvargo: epta: that's a better discussion to have with reset. I personally prefer included recipes instead of roles. And you need to upload the cookbook to the chef server so your local machine can download it. In that post, I used chef-hosted, not chef-solo. If you were using chef-solo, you could do everything locally
[2013-02-05 19:24:05 -0500] benlangfeld: It seems that because libraries are loaded before recipes, it is impossible for a library to depend on anything not previously installed by chef core, is that correct?
[2013-02-05 19:28:34 -0500] benlangfeld: Can anyone give some guidance on this? https://github.com/edelight/chef-solo-search/issues/17
[2013-02-05 19:32:06 -0500] magoo: cwj: do you have any ideas given that they are of the same type?
[2013-02-05 19:33:09 -0500] cwj: magoo: i dunno, i always use #to_s instead of #to_str, and often use #inspect when i am interrogating objects interactively
[2013-02-05 19:34:19 -0500] magoo: cwj: the st_str is inherently called, maybe I should just specify to_s?
[2013-02-05 19:36:16 -0500] tduffield: java cookbook - redhat 6.3 - "set alternatives" fails for bin cmds that don't exist in /usr/bin. Is java supposed to create these? If not, where are they supposed to be coming from?
[2013-02-05 19:38:11 -0500] tduffield: also, node.set -- how do you add items to attributes that are arrays?
[2013-02-05 19:39:08 -0500] cwj: tduffield: #push  or #<<
[2013-02-05 19:41:09 -0500] mting: Hi There
[2013-02-05 19:41:10 -0500] Qapf: hey. http://pastebin.com/dCw9T5ST when I try to use these three attribute declarations to build a URL and then call node['crowd']['jurl'] i only get http://cdn.mysql.com/Downloads/Connector-J/ and the tarball name doesn't get appended and I don't understand why :(
[2013-02-05 19:41:30 -0500] tduffield: cwj: when I do 'node.set['attribute'] << "suprise" i get some weird hash thing where "<<" is the key and "surprise" is the value
[2013-02-05 19:41:53 -0500] cwj: orly
[2013-02-05 19:42:23 -0500] mting: I would like to ask a simple question.
[2013-02-05 19:42:30 -0500] mting: Since we have chef 11.0.0 released
[2013-02-05 19:42:51 -0500] mting: do I need to get in each node and upgrade the chef client?
[2013-02-05 19:43:04 -0500] cwj: tduffield: fwiw https://gist.github.com/cwjohnston/4717035
[2013-02-05 19:43:41 -0500] doomviking: there should be a name for that little feeling of upgrade fear
[2013-02-05 19:45:13 -0500] cwj: mting: probably
[2013-02-05 19:46:15 -0500] EJC: hi all - I seem to be missing something - how do you reference the node name and environment in a chef recipe?
[2013-02-05 19:46:39 -0500] EJC: I thought you could have <%=chef.environment%> or <%=node.name%.
[2013-02-05 19:46:42 -0500] cwj: mting: how one upgrades all or a set of ones nodes is going to be dictated by how it was installed, e.g. from distro packages, from gem, from omnibus. but if you use chef-client/server you could use knife to make it happen across many nodes at once.
[2013-02-05 19:46:49 -0500] cwj: EJC: node.chef_environment
[2013-02-05 19:46:54 -0500] cwj: its a method, not an attribute
[2013-02-05 19:47:17 -0500] EJC: cwj - same applied to the name?  <%= node.name %>
[2013-02-05 19:48:21 -0500] cwj: node.name is also a method yes
[2013-02-05 19:48:34 -0500] EJC: hmmm
[2013-02-05 19:48:50 -0500] EJC: and this really works inside a template - IE - it will be expanded?
[2013-02-05 19:49:02 -0500] EJC: I think I had something like chef.environment or something else then
[2013-02-05 19:49:18 -0500] EJC: then when that didn't work, I went to this:
[2013-02-05 19:49:23 -0500] EJC: http://stackoverflow.com/questions/7781624/node-name-in-chef-template
[2013-02-05 19:50:31 -0500] EJC: yeah, I think I had node.chef_environment originally and node.name which neither worked...., lemmie double check...
[2013-02-05 19:51:35 -0500] erratic: hey anyone here use percona?
[2013-02-05 19:53:24 -0500] Phibs: with Chef 11, are recipes still ruby based or erlang ?
[2013-02-05 19:54:11 -0500] benlangfeld: ruby
[2013-02-05 19:54:18 -0500] benlangfeld: erlang is just in the chef-server for the API
[2013-02-05 19:54:26 -0500] Phibs: gotcha, so performance ++ on the server end
[2013-02-05 19:54:42 -0500] benlangfeld: can you imagine how ugly an erlang-based recipe would be?
[2013-02-05 19:54:48 -0500] Phibs: yes.
[2013-02-05 19:54:53 -0500] Phibs: that's why I was asking lol
[2013-02-05 19:55:13 -0500] Phibs: tempting to switch from puppet, puppet's server runs like crap.
[2013-02-05 19:55:26 -0500] benlangfeld: Anyone know how to install an old version of chef? This doesn't work:
[2013-02-05 19:55:26 -0500] benlangfeld: curl -L http://www.opscode.com/chef/install.sh | bash -v 10.18.0
[2013-02-05 19:56:10 -0500] jtimberman: benlangfeld: bash -s -- -v 10.18.2
[2013-02-05 19:56:17 -0500] jtimberman: or .0 :)
[2013-02-05 19:56:22 -0500] benlangfeld: thanks
[2013-02-05 19:56:31 -0500] benlangfeld: 10.18.2 was the last before 11?
[2013-02-05 19:56:59 -0500] mattray: benlangfeld: yup
[2013-02-05 19:57:12 -0500] RobertD: I updated to chef 16 and I have an issue with ark cookbook 'FATAL: NoMethodError: undefined method `attribute' for Chef::Resource::Ark:Class'. http://bit.ly/YRu2b6 Any idea what can be the issue?
[2013-02-05 19:57:20 -0500] benlangfeld: Unfortunately 11 busted chef-solo-search and doesn't appear to provide any way to solve it: https://github.com/edelight/chef-solo-search/issues/17
[2013-02-05 19:57:38 -0500] benlangfeld: Seems like non-chef-core library dependencies are impossible to specify.
[2013-02-05 19:58:23 -0500] pcn: Ohai chefs
[2013-02-05 19:58:35 -0500] pcn: I've got a question about the nagios::apache recipe
[2013-02-05 19:58:43 -0500] deed02392: I've set up an nginx cookbook to install it the way I need it to run my web app, but now I'm making a cookbook for deploying my app etc. should I include the nginx cookbook? or duplicate all the code that sets up nginx and put it in my app cookbook?
[2013-02-05 19:59:06 -0500] benlangfeld: depend on the nginx cookbook
[2013-02-05 19:59:34 -0500] pcn: I've updated the template to allow me to use kerberos negotiation.  However, even though the cookbook has a conditional reload, it doesn't seem like the apache server is being reloaded after the conf file is updated, so I end up having to do a manual restart which I would like to avoid.
[2013-02-05 19:59:40 -0500] pcn: Has anyone dealt with this?
[2013-02-05 20:00:58 -0500] bencaron: pcn: do you use a service resource?
[2013-02-05 20:01:04 -0500] spox: benlangfeld: what about dealing with it in the default recipe?
[2013-02-05 20:01:39 -0500] benlangfeld: spox: The library is loaded before the recipe is compiled, so that's not possible.
[2013-02-05 20:01:57 -0500] spox: benlangfeld: possible if you're crafty
[2013-02-05 20:01:58 -0500] spox: :)
[2013-02-05 20:02:05 -0500] benlangfeld: spox: How?
[2013-02-05 20:02:07 -0500] spox: benlangfeld: i'll send a pull req later this afternoon
[2013-02-05 20:02:24 -0500] pcn: bencaron: using the default cookbook, I'm not sure if there's an apache service resource.  taht's a good question. let me check
[2013-02-05 20:02:28 -0500] benlangfeld: spox: Thanks!
[2013-02-05 20:02:52 -0500] EJC: cwj: just triple checking - I can have <%= node.name %> in a template file and chef will expand that - correct?
[2013-02-05 20:03:08 -0500] bencaron: pcn: you are adding a vhost or some apache config in your own cookbook?
[2013-02-05 20:03:33 -0500] bencaron: pcn: then, you should define a service resource for apache and send a notification
[2013-02-05 20:04:00 -0500] bencaron: you might be able to send it to the service defined by the orig. recipe, not sure
[2013-02-05 20:05:01 -0500] pcn: bencaron: this is the community nagios cookbook, and the community apache2 cookbook.  nagios includes apache2, and apache2 defins a service
[2013-02-05 20:05:48 -0500] bencaron: pcn: i'm not sure if you can reuse the service as defined there
[2013-02-05 20:06:01 -0500] bencaron: but you sure can redefine one in your recipes
[2013-02-05 20:06:19 -0500] bencaron: and then, send a notification to it after your conf file changes
[2013-02-05 20:06:47 -0500] bencaron: pcn: my favorite page in the wiki: http://wiki.opscode.com/display/chef/Resources
[2013-02-05 20:06:55 -0500] pcn: bencaron are you suggesting I'm running into http://tickets.opscode.com/browse/CHEF-3694
[2013-02-05 20:07:57 -0500] bencaron: pcn: hum, u might. was not aware of this
[2013-02-05 20:08:17 -0500] bencaron: thinking about it, sending a notification to the apache service should work
[2013-02-05 20:09:14 -0500] pcn: I'm confused in this case; I'm not defining a new apache2 resource since include_recipe shouldon't do anything if the recipe's already been loaded, right?
[2013-02-05 20:09:30 -0500] pcn: But the error messages say: Cloning resource attributes for service[apache2] from prior resource (CHEF-3694)
[2013-02-05 20:09:45 -0500] pcn: Now I've got no idea what is supposed to happen
[2013-02-05 20:10:29 -0500] epta: Could someone please review my first cookbook https://github.com/dmalikov/smackage-cookbook ?
[2013-02-05 20:11:19 -0500] pcn: I'm using 10.18.2, in theory the spurrious errors have been resolved already
[2013-02-05 20:11:29 -0500] mting: @ cwj,  thanks. We are using Chef for windows, so I bet I need to get in each to update ... or use knife to update them then
[2013-02-05 20:14:31 -0500] deed02392: what about it does it depend on benlangfeld ?
[2013-02-05 20:14:55 -0500] benlangfeld: deed02392: chef-solo-search uses treetop for its parser
[2013-02-05 20:15:21 -0500] cwj: EJC: in my experience, yes. try it and see :)
[2013-02-05 20:24:36 -0500] EJC: cwj yep - totally worked
[2013-02-05 20:24:53 -0500] EJC: not sure wtf happened which sent me down this rageoverflow witch hunt
[2013-02-05 20:26:19 -0500] cwj: so many yaks :)
[2013-02-05 20:27:26 -0500] EJC: my arms are tired
[2013-02-05 20:27:36 -0500] EJC: maybe I'll try to yak shave with some fire next time
[2013-02-05 20:28:16 -0500] jtimberman: EJC: and if it doesn't work, at least you have scrumptious yak steak?
[2013-02-05 20:29:25 -0500] EJC: jtimberman: possibly, but fire applied to a yak is best done from a distance
[2013-02-05 20:29:47 -0500] jtimberman: aye, they're pretty hairy.
[2013-02-05 20:36:18 -0500] pcn: OK, super-weird, but the CHEF-3694 message I'm seeing in my logs is relating to the service being defined 2x in the default recipe in the apache2 cookbook
[2013-02-05 20:37:22 -0500] pcn: The first defines the service in terms of platform-specific support, and defines the action as :enable.
[2013-02-05 20:37:37 -0500] pcn: The second one does no extra definition, just defines the action as :start
[2013-02-05 20:39:19 -0500] techminer: ohai chefs  So I'm trying to use application_ruby cookbook to setup a Rails app.  This is not installing Ruby as a dependency so I guess I need another cookbook to do that first.  Any suggestions for the best way to use Chef to install Ruby?  I tried an RVM cookbook but couldn't get that to work 100%.
[2013-02-05 20:39:50 -0500] benlangfeld: techminer: I use rbenv-chef: https://github.com/fnichol/chef-rbenv
[2013-02-05 20:42:02 -0500] techminer: benlangfeld:  Looks similar to rvm.same github user tooworks better than the RVM cookbook?
[2013-02-05 20:43:00 -0500] benlangfeld: techminer: The RVM cookbook works fine too. Unfortunately, I can't get it to do a binary install, so havn't bothered switching yet.
[2013-02-05 20:43:34 -0500] poolpog: cheffers?
[2013-02-05 20:44:02 -0500] poolpog: ok, so, I am using the "cron" resource and getting an error when I set the "user" attribute to a valid user other than root
[2013-02-05 20:44:14 -0500] poolpog: but
[2013-02-05 20:44:23 -0500] poolpog: it doesn't really tell me what the error is
[2013-02-05 20:44:40 -0500] poolpog: I only know because when I take out the "user" atribute, the error goes away
[2013-02-05 20:44:47 -0500] cwj: poolpog: add -l debug to your chef run
[2013-02-05 20:44:51 -0500] poolpog: ok
[2013-02-05 20:44:52 -0500] poolpog: thanks
[2013-02-05 20:44:57 -0500] cwj: you will get a poopload of additional output
[2013-02-05 20:45:04 -0500] poolpog: can I do that like: "chef-client -l debug"
[2013-02-05 20:45:08 -0500] cwj: yep
[2013-02-05 20:45:11 -0500] poolpog: poopload! I
[2013-02-05 20:45:11 -0500] cwj: thats the ticket
[2013-02-05 20:45:15 -0500] poolpog: m all about pooploads
[2013-02-05 20:45:23 -0500] poolpog: I'm*
[2013-02-05 20:45:31 -0500] drev1: are there instructions available for uninstalling the Chef ominbus package? is it as simple as deleting /opt/chef?
[2013-02-05 20:46:18 -0500] poolpog: wow, cwj , you weren't kidding
[2013-02-05 20:47:31 -0500] cwj: yes it is very verbose
[2013-02-05 20:48:02 -0500] benP_: @drev1, can't you just do an rpm -e if you came from the omnibus?
[2013-02-05 20:48:11 -0500] benP_: Or the dpkg equivalent?
[2013-02-05 20:48:50 -0500] poolpog: ugh, except, not helpful. verbose about a lot of things, but not the thing I wanted verbosity on
[2013-02-05 20:49:10 -0500] drev1: benP_: I think you are correct; my mistake
[2013-02-05 20:49:36 -0500] poolpog: what does this mean? "Error updating state of run_restore_batch as www data, exit: 1"  NOTE: "run_restore_batch as www data" is the name of the cron resource I declared
[2013-02-05 20:50:07 -0500] poolpog: so error is really "Error updating state of THING, exit: 1"
[2013-02-05 20:50:27 -0500] poolpog: "updating state"? why would the user attribute give that error?
[2013-02-05 20:51:19 -0500] Qapf: Hey, anyone have a moment for a question about attributes and how they work?
[2013-02-05 20:52:24 -0500] cwj: poolpog: well from that paste it sounds like your user is 'www data' and maybe it should be 'www-data' ?
[2013-02-05 20:52:55 -0500] poolpog: yeah, i see what you mean but, no that's just a label. The user really is "www-data"
[2013-02-05 20:52:56 -0500] Qapf: http://pastebin.com/dCw9T5ST i have these three lines, and jurl does not function and i don't really understand why.
[2013-02-05 20:54:13 -0500] pcn: Have you tested to see what that inerpoloates to?
[2013-02-05 20:54:14 -0500] poolpog: aha! I figured it out
[2013-02-05 20:54:24 -0500] poolpog: You (www-data) are not allowed to use this program (crontab)
[2013-02-05 20:54:29 -0500] poolpog: thanks peeps
[2013-02-05 20:54:41 -0500] Qapf: pcn,  i get http://cdn.mysql.com/Downloads/Connector-J/, so #{node['crowd']['jtarball']} is not getting in there
[2013-02-05 20:55:01 -0500] pcn: Qapf yes do that in the recipe when you have node data
[2013-02-05 20:55:15 -0500] Qapf: ?
[2013-02-05 20:55:23 -0500] Qapf: i don't quite follow
[2013-02-05 20:56:30 -0500] cwj: Qapf: when attributes are loaded from your attributes file, there is no node object, so node = nil
[2013-02-05 20:57:09 -0500] Qapf: cwj, ahh, so referring to attributes in the way i'm doing doesn't really work out
[2013-02-05 20:57:14 -0500] cwj: yep
[2013-02-05 20:57:42 -0500] cwj: so like pcn said, you want to do that kind of concatenation or interpolation in the recipe itself
[2013-02-05 20:57:43 -0500] Qapf: is there a different pattern to achieve the same end? or is this simply one of those "don't do that, work it out in the recipe instead"
[2013-02-05 20:57:49 -0500] Qapf: ahh
[2013-02-05 20:58:22 -0500] Qapf: thank you
[2013-02-05 20:58:27 -0500] Qapf: makes sense now.
[2013-02-05 20:58:27 -0500] cwj: similar constraints apply to roles and environments, fwiw
[2013-02-05 21:01:54 -0500] Qapf: cwj, thanks for the heads up. would a tool like foodcritic help me with other gotcha's like this? its on my to do list to set up and I'm wondering if I shouldn't do that now.
[2013-02-05 21:05:08 -0500] cwj: Qapf: its my understanding that you could catch some things like that with foodcritic, even if it meant writing your own rule for it
[2013-02-05 21:14:48 -0500] rayrod2030: oh hero chefs
[2013-02-05 21:16:11 -0500] rayrod2030: is there an easy way to list all active managed chef nodes across all organizations?
[2013-02-05 21:16:22 -0500] rayrod2030: or extract a report with them?
[2013-02-05 21:17:37 -0500] queso: How do I read the contents of a file on a node into a Ruby variable to be used later in a cookbook?
[2013-02-05 21:18:09 -0500] benlangfeld: foo = File.read('/some/path')
[2013-02-05 21:18:16 -0500] queso: benlangfeld: Thank you
[2013-02-05 21:24:18 -0500] queso: Is there a way to tell the git resource to pull?
[2013-02-05 21:24:52 -0500] queso: It has checked out the branch from a previous run but doesn't pull on subsequent runs.
[2013-02-05 21:28:05 -0500] jtimberman: action :sync ?
[2013-02-05 21:28:11 -0500] jtimberman: iirc
[2013-02-05 21:30:39 -0500] AikiLinux|home: Hello
[2013-02-05 21:30:51 -0500] queso: jtimberman: You would think that, but it doesn't update if it already exists.
[2013-02-05 21:31:04 -0500] AikiLinux|home: Is there a way to control the configuration of firefox via chef ?
[2013-02-05 21:31:37 -0500] AikiLinux|home: I am trying to create a vm that brings up firefox with 3 tabs open and want to automate this via chef
[2013-02-05 21:31:50 -0500] kallistec: queso: it checks `git ls-remote REMOTE REF` vs. `git rev-parse REF`
[2013-02-05 21:32:04 -0500] kallistec: if those match you don't need to pull
[2013-02-05 21:36:30 -0500] queso: kallistec: Okay. It looks like something I did isn't working right..
[2013-02-05 21:37:53 -0500] mhalligan: Does anyone know of a logstash cookbook that installs kibana-ruby rather than php?
[2013-02-05 22:04:47 -0500] queso: So Chef much check if all files exist when starting to run that are referenced with File.read().. but one of these files is created earlier in my cookbook, so how can I get the contents of that file later in the chef run?
[2013-02-05 22:04:52 -0500] queso: s/much/must/
[2013-02-05 22:08:35 -0500] mattt: is there an official jenkins cookbook ?
[2013-02-05 22:09:30 -0500] jtimberman: mattt: to my knowledge the jenkins project doesn't publish one
[2013-02-05 22:09:35 -0500] jtimberman: :)
[2013-02-05 22:09:50 -0500] mattt: jtimberman: how about you guys then :)
[2013-02-05 22:10:28 -0500] jtimberman: heavywater software just transferred maintenance to us the other day actually
[2013-02-05 22:10:33 -0500] jtimberman: schisamo has been working on getting it ready to release as a 1.0
[2013-02-05 22:11:24 -0500] mattt: jtimberman: very cool
[2013-02-05 22:11:44 -0500] senilegenius: hi all. we're using chef-solo for our deployment and something has broken since chef 11.0 has come outi don't have any of the details yet, but something about a dependancy on the erlang cookbook.
[2013-02-05 22:11:50 -0500] mattt: i'll hold off on using one of these random cookbooks then
[2013-02-05 22:12:08 -0500] senilegenius: anybody seeing any issues with chef-solo on 11.0?
[2013-02-05 22:12:10 -0500] dqlaptop: can anyone recommend a way to install rvm with chef solo?
[2013-02-05 22:13:08 -0500] mattt: dqlaptop: i don't use rvm, but did notice that rvm is available via apt on a stock ubuntu 12.04 instance
[2013-02-05 22:13:21 -0500] dqlaptop: or ... how should i convert this into json https://gist.github.com/quellhorst/5e03ea141419d8df5918
[2013-02-05 22:13:36 -0500] dqlaptop: i think that is my main problem, is how i'm writing the json
[2013-02-05 22:14:26 -0500] dqlaptop: mattt: interesting. maybe i'll try installing rvm that way
[2013-02-05 22:14:34 -0500] dqlaptop: mattt: do you know if that is a system wide rvm?
[2013-02-05 22:14:48 -0500] mattt: dqlaptop: no idea, i'm not familiar w/ rvm ..
[2013-02-05 22:14:53 -0500] dqlaptop: right now i'm trying to run this with chef solo https://github.com/fnichol/chef-rvm
[2013-02-05 22:14:55 -0500] jtimberman: senilegenius: do you have a specific issue?
[2013-02-05 22:15:35 -0500] senilegenius: jtimberman: seclet me see if my peer saved some of the error output (hopefully!)
[2013-02-05 22:17:08 -0500] mattt: dqlaptop: yeah, sorry, just had a look at that cookbook but there's a lot going on and i'd need to try it to be able to help you
[2013-02-05 22:18:12 -0500] EvilLord: Hello all.
[2013-02-05 22:18:25 -0500] EvilLord: SO, I have this issue  with a LWRP i'm working on
[2013-02-05 22:18:34 -0500] dqlaptop: mattt: yeah, been over a year since i used chef and a lot has changed for me too
[2013-02-05 22:18:47 -0500] EvilLord: well more specifically with the way it seems to not be properly processing templates
[2013-02-05 22:18:49 -0500] queso: http://dpaste.com/910679/  How do I reference /srv/apps/my_app/dependency_lib.version ?  This fails because Chef says the file doesn't exist.  It never gets to the git commands.
[2013-02-05 22:18:59 -0500] EvilLord: 1 sec let me  hit the pastebin
[2013-02-05 22:20:57 -0500] EvilLord: so http://pastebin.com/raw.php?i=AS5h4fHP
[2013-02-05 22:21:07 -0500] EvilLord: only happens when I call the template via the LWRP
[2013-02-05 22:21:15 -0500] EvilLord: it works fine via the recipe
[2013-02-05 22:21:41 -0500] EvilLord: as in a standard recipe that    just calls template "foobar" do ...
[2013-02-05 22:21:53 -0500] EvilLord: yet when called by the lwrp i get that
[2013-02-05 22:22:15 -0500] EvilLord: 1 sec I'll paste over the  stacktrace.json
[2013-02-05 22:24:14 -0500] EvilLord: err .out ...  sorry http://pastebin.com/raw.php?i=AdBTHMTT
[2013-02-05 22:25:04 -0500] EvilLord: but yeah that's the gist of the issue
[2013-02-05 22:31:10 -0500] senilegenius: jtimberman: sorry. i'm not getting enough information to be helpful. i'll need to repeat the issue and then see what is going on.
[2013-02-05 22:32:40 -0500] senilegenius: jtimberman: should 11.0 be available here: http://apt.opscode.com/ ? (i use rhel but my coworker who is having the issue uses ubuntu, so i'm not sure how the chef repos are set up for ubuntu)
[2013-02-05 22:34:28 -0500] EvilLord: so to make this a tiny bit easier to read the issue : http://pastebin.com/raw.php?i=AdBTHMTT  and it only occurs when invoked via the LWRP  the same template file processes properly when called via a recipe
[2013-02-05 22:34:39 -0500] EvilLord: here is the stack trace illustrating the line it chokes on
[2013-02-05 22:34:49 -0500] EvilLord:  http://pastebin.com/raw.php?i=AdBTHMTT
[2013-02-05 22:34:54 -0500] EvilLord: err
[2013-02-05 22:35:21 -0500] EvilLord: sorry  so that link is stack-trace
[2013-02-05 22:35:37 -0500] EvilLord: http://pastebin.com/raw.php?i=AS5h4fHP is the  error returned by checf http://pastebin.com/raw.php?i=AS5h4fHP
[2013-02-05 22:37:19 -0500] EvilLord:  tomcat_tss/resources/default.rb  contains attribute :shutdown_port, :kind_of => Integer, :default => 8005
[2013-02-05 22:37:32 -0500] EvilLord: so what  is going on  why doesn't this process?
[2013-02-05 22:42:57 -0500] HarvesterOfBeer: hai! Will removing the /opt/chef directory (and any local dotfiles) be a complete removal of a chef omnibus install? Need to wipe clean for v11 install
[2013-02-05 22:45:21 -0500] jtimberman: senthilr: we don't have packages for the apt repo (yet?) - btm responded to a mailing list query about that last night though.
[2013-02-05 22:48:42 -0500] senthilr: jtimberman: did I ask for it ?
[2013-02-05 22:48:46 -0500] senthilr: sorry, don't remember
[2013-02-05 22:56:06 -0500] jtimberman: senthilr: sorry, i typed sen and hit tab
[2013-02-05 22:56:10 -0500] mattt: would it be a bad idea to install foodcritic using chef gem?
[2013-02-05 22:56:13 -0500] EvilLord: i take it no one has any idea either :-(
[2013-02-05 22:56:28 -0500] jtimberman: senthilr: senilegenius is who i was trying to reply
[2013-02-05 22:56:28 -0500] mattt: or to be more precise, is it bad to use that ruby install for 'other bits and pieces'
[2013-02-05 22:59:57 -0500] senthilr: jtimberman: no worries
[2013-02-05 23:10:04 -0500] cheeseplus: if I need a chef gem in a provider, what is the magic I need for it to work as just a "chef_gem gemhere" doesn't do the trick
[2013-02-05 23:10:57 -0500] brucelee: so i got hosted chef working with a workstation server that has knife/git installed, and its also working with my aws account :P now im trying to learn how to write recipes. Where's a good place to learn all the ruby syntax? im not even sure what to google, can we call it "chef library for ruby"?
[2013-02-05 23:11:22 -0500] brucelee: i know chef incorporated its own keywords to the ruby programming language, like package, template, etc. Know this just from looking at some sample recipes
[2013-02-05 23:11:34 -0500] ranjibd: cheeseplus, is it a lwrp ?
[2013-02-05 23:11:40 -0500] brucelee: can anyone link me a good place to start
[2013-02-05 23:11:53 -0500] cheeseplus: ranjibd: it is indeed
[2013-02-05 23:11:56 -0500] ranjibd: brucelee, those are not key words, thet are methods
[2013-02-05 23:12:26 -0500] ranjibd: brucelee, chef call them resources http://wiki.opscode.com/display/chef/Resources
[2013-02-05 23:12:32 -0500] brucelee: hmm ok
[2013-02-05 23:12:38 -0500] brucelee: i thought those are 'types'
[2013-02-05 23:12:39 -0500] ranjibd: brucelee, the top right corner has a list of them
[2013-02-05 23:12:46 -0500] brucelee: like how in other programming langauges, int is a type, long, etc
[2013-02-05 23:12:51 -0500] brucelee: ranjibd: thanks
[2013-02-05 23:12:53 -0500] jan0232: Chef 11.0.0 Server is using erlang, right? so it's basically a total rewrite with a similar API?
[2013-02-05 23:12:56 -0500] ranjibd: brucelee, yes, they are resource types,
[2013-02-05 23:13:35 -0500] cheeseplus: jan0232: pretty much
[2013-02-05 23:13:39 -0500] ranjibd: jan0232, pretty much
[2013-02-05 23:13:42 -0500] jan0232: is chef-client still ruby?
[2013-02-05 23:13:46 -0500] ranjibd: yes
[2013-02-05 23:13:55 -0500] jan0232: and chef-solo is also still available right?
[2013-02-05 23:13:58 -0500] ranjibd: yes
[2013-02-05 23:14:03 -0500] jan0232: ok good, thx :)
[2013-02-05 23:14:07 -0500] ranjibd: welcome
[2013-02-05 23:14:52 -0500] jan0232: the install process seems really easy, too.. still the same, just a simple omnibus installi should give that chef 11 a try :)
[2013-02-05 23:22:40 -0500] cheeseplus: ranjibd: did you have a tip on how to get that gem working in the provider?
[2013-02-05 23:23:55 -0500] ranjibd: cheeseplus, they should work as it is
[2013-02-05 23:23:55 -0500] ranjibd: https://github.com/opscode-cookbooks/nagios/blob/master/providers/nrpecheck.rb
[2013-02-05 23:24:02 -0500] jtimberman: cheeseplus: don't break eye contact, i hear.
[2013-02-05 23:24:25 -0500] cheeseplus: jtimberman: of course not ;)
[2013-02-05 23:26:55 -0500] whack: what would cause a template not to update a file if it exists on the system already?
[2013-02-05 23:27:35 -0500] pcn: whack if the rendered file checsummed the same as the existing file
[2013-02-05 23:27:39 -0500] ranjibd: whack, action, and checksum
[2013-02-05 23:27:56 -0500] whack: pcn: checksum is unlikely to be the same, I have no action set.
[2013-02-05 23:28:33 -0500] ranjibd: whack, default action for template is :create, and that should worl
[2013-02-05 23:28:33 -0500] pcn: So you have a file, and a template should replace this file because it would be different, but it's not?
[2013-02-05 23:28:55 -0500] whack: pcn: correct, working on gathering an example I can pastebin
[2013-02-05 23:29:14 -0500] ranjibd: whack, the log says its processing the template[/path/to/file] ?
[2013-02-05 23:29:15 -0500] pcn: Quick question: if you move the file aside, does a subsequent chef run create the correct file?
[2013-02-05 23:29:22 -0500] ranjibd: pcn, yes
[2013-02-05 23:29:37 -0500] whack: pcn: yes
[2013-02-05 23:29:52 -0500] ranjibd: the one that is rewritten is also backed up. you can roll back that also. (reverse)
[2013-02-05 23:30:04 -0500] pcn: OK, and if you modify that rendered file by hand, do your changes get removed?
[2013-02-05 23:30:18 -0500] whack: Here's the example: http://pastebin.com/5F7TVVpz
[2013-02-05 23:30:42 -0500] whack: showing chef-client not changing it if it exists, but moving it out of the way and it gets the correct change.
[2013-02-05 23:31:06 -0500] whack: http://pastebin.com/mTzDj8fw is my template resource definition
[2013-02-05 23:31:55 -0500] ranjibd: whack, is it a symlink ?
[2013-02-05 23:32:03 -0500] ranjibd: cant think of anything..
[2013-02-05 23:32:03 -0500] whack: nope
[2013-02-05 23:32:09 -0500] ranjibd: should work
[2013-02-05 23:32:17 -0500] pcn: whack what version of chef?
[2013-02-05 23:33:05 -0500] whack: 10.18.0
[2013-02-05 23:33:22 -0500] ranjibd: theres a create_if_missing action, which should behave like this, not the default one.
[2013-02-05 23:33:51 -0500] whack: if it helps, if I modify the file, chef replaces it
[2013-02-05 23:33:53 -0500] ranjibd: whack, try specifying the action explicitly (not sure though if this will fix it)
[2013-02-05 23:33:55 -0500] whack: just not if I give it a new template.
[2013-02-05 23:34:31 -0500] ranjibd: whack, can you share the recipe?
[2013-02-05 23:35:09 -0500] jtimberman: whack: the one on the system already is different from the one rendered by chef?
[2013-02-05 23:35:17 -0500] whack: I'm confused, sometimes it chagnes it, sometimes it doesn't. So confused
[2013-02-05 23:35:44 -0500] whack: jtimberman: what I've observed so far is that: manual change, chef fixes. Template change, chef doesn't fix unless the file is gone.
[2013-02-05 23:36:38 -0500] whack: recipe - http://pastebin.com/aDHzvJZL
[2013-02-05 23:36:58 -0500] whack: I have no idea what's going on, now if I change the template, sometimes it obeys it
[2013-02-05 23:37:03 -0500] glennpratt: for my own edification, I'm trying to find what make Chef::Log::fatal!()[http://docs.opscode.com/essentials_cookbook_recipes_handlers_and_logs.html] work and I can't find it. https://github.com/opscode/chef/blob/master/lib/chef/log.rb https://github.com/opscode/mixlib-log/blob/master/lib/mixlib/log.rb
[2013-02-05 23:37:41 -0500] whack: workflow is edit cookbokok, spork bump, spork upload, chef-client --once.
[2013-02-05 23:37:43 -0500] pcn: whack this rings a bell - I'm wondering if the file's checksum matches a saved checksum, actions are bypassed?
[2013-02-05 23:37:58 -0500] whack: pcn: maybe, at least I Know how to work around it now
[2013-02-05 23:38:30 -0500] pcn: I recall asking about this, but I don't think that the prior checksum is save and re-used without re-rendering the template.
[2013-02-05 23:39:34 -0500] whack: there it goes again, not working
[2013-02-05 23:40:14 -0500] whack: I'll see if I can find it knowingly ignoring it in the logs.
[2013-02-05 23:40:30 -0500] whack: [2013-02-05T23:40:07+00:00] WARN: Cloning resource attributes for template[/etc/hapr
[2013-02-05 23:40:33 -0500] whack: oxy/haproxy.cfg] from prior resource (CHEF-3694)
[2013-02-05 23:40:36 -0500] whack: tmux fail.
[2013-02-05 23:41:12 -0500] jtimberman: whack: run chef with -l debug for maximum terminal text fill rate (and for more information of course) if you haven't.
[2013-02-05 23:41:37 -0500] whack: ok, so /var/chef/cache has the *old* template.
[2013-02-05 23:41:57 -0500] whack: which explains why despite it having the correct version of the cookbook in metadata.rb
[2013-02-05 23:42:51 -0500] pcn: If you use knife to download the cookbook do you see the right version?
[2013-02-05 23:43:00 -0500] whack: I don't know what that means.
[2013-02-05 23:46:27 -0500] whack: pcn: if I download the cookbook it has the correct template.
[2013-02-05 23:46:35 -0500] beandip: Wow, a ton of cookbooks are broken with the changes to Chef 11
[2013-02-05 23:46:47 -0500] beandip: including, suprisingly, tomcat cookbook and others
[2013-02-05 23:46:48 -0500] whack: if I blow away /var/chef/cache it still doesn't work :\
[2013-02-05 23:46:53 -0500] whack: I'm so confused.
[2013-02-05 23:48:24 -0500] whack: ok, if I blow away /var/chef/cache and run chef-client --once, it downloads the right version (per metdata.rb) of the cookbook, but the whole templates/ directory in that cookbook is missing.
[2013-02-05 23:49:11 -0500] ranjibd: whack, sounds very strange,
[2013-02-05 23:49:16 -0500] whack: yeah it's pretty awesome :\
[2013-02-05 23:49:31 -0500] pcn: Uh-oh
[2013-02-05 23:49:48 -0500] ranjibd: is knife-spork doing something funny ?
[2013-02-05 23:50:15 -0500] whack: ranjibd: 'knife cookbook download mything' downloads it correctly with the templates directory.
[2013-02-05 23:50:18 -0500] pcn: Are you pinning versions of your cookbook?  Or do you need to get the opscode staff involved?
[2013-02-05 23:51:07 -0500] whack: pcn: chef-client fetches version 0.1.43 of this cookbook with the templates directory missing. 'knife cookbook download blah' downloads the same version *with* the templates directory correct.
[2013-02-05 23:51:08 -0500] ranjibd: whack, such a brainfuck!
[2013-02-05 23:51:19 -0500] whack: I am ever so confused.
[2013-02-05 23:51:32 -0500] pcn: Bump the version, re-upload, see if the behavior changes
[2013-02-05 23:52:38 -0500] whack: pcn: same behavior
[2013-02-05 23:53:25 -0500] whack: trying to delete this cookbook and trying again
[2013-02-05 23:53:47 -0500] justinhj: Having a problem with chef-solo, knife
[2013-02-05 23:53:58 -0500] justinhj: I can deploy to a node no problem
[2013-02-05 23:54:13 -0500] justinhj: but deploying to a different node with the same config is failing with cookbook not found
[2013-02-05 23:54:38 -0500] justinhj: Chef::Exceptions::CookbookNotFound: Cookbook xml not found. If you're loading xml from another cookbook, make sure you configure the dependency in your metadata
[2013-02-05 23:56:20 -0500] pcn: justinhj how are you getting your cookbooks onto the different node?
[2013-02-05 23:56:28 -0500] EnriqueCadalso: hello, I am having this error when trying to use http://community.opscode.com/cookbooks/logstash cookbook. Recipe Compile Error in /srv/chef/file_store/cookbooks/ark/libraries/resource_ark.rb NoMethodError undefined method `attribute' for Chef::Resource::Ark:Class
[2013-02-05 23:56:43 -0500] jtimberman: EnriqueCadalso: are you using Chef 11?
[2013-02-05 23:57:02 -0500] whack: well, thanks for the help folks even if we couldn't figure out what is going on :)
[2013-02-05 23:57:29 -0500] jtimberman: whack: is it still not behaving as expected?
[2013-02-05 23:57:33 -0500] whack: jtimberman: nope
[2013-02-05 23:57:47 -0500] whack: bulk deleted, pushed another version, rerun chef-client, still has the wrong template.
[2013-02-05 23:58:02 -0500] jtimberman: whack: is the *template* wrong, or is the rendered content wrong?
[2013-02-05 23:58:25 -0500] EnriqueCadalso: @jimberman: I am not sure, I installed chef using http://wiki.opscode.com/display/chef/Fast+Start+Guide. I am using a vagrant box.
[2013-02-05 23:58:34 -0500] whack: jtimberman: best I can tell, it doesn't even download the template
[2013-02-05 23:58:36 -0500] EnriqueCadalso: I am new on chef
[2013-02-05 23:58:57 -0500] doomviking: EnriqueCadalso: jtimberman: yeah thats chef 11
[2013-02-05 23:59:06 -0500] jtimberman: EnriqueCadalso: if you do 'vagrant ssh' and once logged in, "knife -v"
[2013-02-05 23:59:22 -0500] whack: jtimberman: the behavior I observe is that /etc/haproxy/haproxy.cfg is not being updated when I change the template in the cookbook, bump, upload, and run chef-client
[2013-02-05 23:59:54 -0500] EnriqueCadalso: vagrant@logstash-test-debian-6:~$ knife -v
[2013-02-05 23:59:56 -0500] EnriqueCadalso: Chef: 11.0.0

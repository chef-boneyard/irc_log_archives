[2013-02-06 00:00:23 -0500] jtimberman: EnriqueCadalso: apparently this: http://tickets.opscode.com/browse/COOK-2335
[2013-02-06 00:01:52 -0500] EnriqueCadalso: Ok, I will try it. Thanks a lot.
[2013-02-06 00:04:03 -0500] justinhj: pcn> I did   knife solo prepare user@node1
[2013-02-06 00:04:06 -0500] justinhj: and same for node2
[2013-02-06 00:04:11 -0500] justinhj: node1 works but not 2
[2013-02-06 00:06:54 -0500] pcn: According to http://matschaffer.github.com/knife-solo/ you need to either do "prepare" and "cook" or use "bootstrap"
[2013-02-06 00:07:21 -0500] justinhj: sorry i did do the cook afterwards
[2013-02-06 00:07:44 -0500] justinhj:  knife solo cook user@node
[2013-02-06 00:08:00 -0500] MartinCleaver: jtimberman: for EnriqueCadalso 's question, Avishai Ish-Shalom wrote on COOK-2335 that "extending LWRPBase works, required adding self.resource_name = "Ark" to the class definition as well."
[2013-02-06 00:08:09 -0500] MartinCleaver: how would we apply this?
[2013-02-06 00:08:10 -0500] MartinCleaver: a
[2013-02-06 00:08:11 -0500] MartinCleaver: nd w
[2013-02-06 00:08:28 -0500] MartinCleaver: and would we have fewer issues using Chef 10 instead?
[2013-02-06 00:08:56 -0500] MartinCleaver: Better to avoid the bleeding edge if there are other problems
[2013-02-06 00:08:59 -0500] MartinCleaver: ?
[2013-02-06 00:12:22 -0500] pcn: justinhj at this point you need to look at the nodes, see if knife-solo copied over the cookbooks that you need, and figure out what's different between ths systems.
[2013-02-06 00:13:30 -0500] justinhj: they both have the same cookbooks, i've checked that. are there any other configs i can look at?
[2013-02-06 00:13:42 -0500] justinhj: default cookbook directory or something?
[2013-02-06 00:17:01 -0500] ahammond: I inherited a custom plugin that uses Shef. I see that it has been replaced with chef-shell. How do I update the custom plugin to work with this? https://gist.github.com/ahammond/4719039
[2013-02-06 00:51:12 -0500] mting: hi
[2013-02-06 00:51:33 -0500] mting: are there any good suggestion / cookbook for windows firewall configuration?
[2013-02-06 00:55:24 -0500] ahammond: mting: I'm not a windows guy, but github may have something for you.
[2013-02-06 00:56:19 -0500] HarvesterOfBeer: mting: this may help -- http://www.ikickass.com/shortthoughts/managewindows2003and2008firewallruleswithchef
[2013-02-06 00:56:42 -0500] HarvesterOfBeer: haven't used it, but may be worth a try
[2013-02-06 01:00:26 -0500] ahammond: so I gem installed chef 11 today. can't chef anything now since the Shef -> chef-shell stuff broke one of our custom plugins. Anyone know of _any_ docs on how to support this migration? I'm searching but not finding anything.
[2013-02-06 01:00:57 -0500] c_t: ahammond: maybe make a link?
[2013-02-06 01:01:32 -0500] miah: ahammond: stacktrace of it not working?
[2013-02-06 01:01:50 -0500] ahammond: https://gist.github.com/ahammond/4719039
[2013-02-06 01:02:06 -0500] dqlaptop: asked a few hours ago, but can anyone recommend which cookbook to use for rvm?
[2013-02-06 01:02:35 -0500] ahammond: dqlaptop: https://github.com/fnichol/chef-rvm
[2013-02-06 01:02:40 -0500] ahammond: dqlaptop: hands down.
[2013-02-06 01:03:32 -0500] miah: probably start by changing Shef to Shell
[2013-02-06 01:03:36 -0500] miah: see what that gets you..
[2013-02-06 01:03:37 -0500] dqlaptop: ahammond: ok, coll that is the one i was trying to get working
[2013-02-06 01:04:06 -0500] ahammond: miah: ok, I'll give that a shot
[2013-02-06 01:04:55 -0500] dqlaptop: ahammond: ever happen to use it with chef solo?
[2013-02-06 01:05:27 -0500] ahammond: dqlaptop: nope sorry
[2013-02-06 01:08:51 -0500] ahammond: miah: oh my god, that fixed it. thanks man!
[2013-02-06 01:10:21 -0500] miah: np
[2013-02-06 01:10:55 -0500] dqlaptop: ahammond: how do you configure it?
[2013-02-06 01:17:23 -0500] otterley: what does it take to do an actual restore of Chef data from one server to another?
[2013-02-06 01:17:31 -0500] otterley: it seems that doing a CouchDB dump/restore is not enough
[2013-02-06 01:17:43 -0500] otterley: I even copied the signing certificates to no avail
[2013-02-06 01:18:02 -0500] otterley: I can't seem to authenticate myself to the restored Chef server using my validation key
[2013-02-06 01:18:25 -0500] otterley: what am I missing?
[2013-02-06 01:18:46 -0500] miah: validation keys are easily thrown away and regenerated
[2013-02-06 01:19:07 -0500] miah: make sure your validation key matches the one found on your chef server in /etc/chef
[2013-02-06 01:19:08 -0500] otterley: maybe, but I'd prefer not to regenerate client data for every node
[2013-02-06 01:19:17 -0500] miah: client key != validation key
[2013-02-06 01:19:36 -0500] miah: validation key is a key used temporarily to grant access / privilege to create a client key
[2013-02-06 01:19:59 -0500] otterley: right, but I don't want to regenerate all client keys
[2013-02-06 01:20:12 -0500] miah: validation key isn't tied to client keys
[2013-02-06 01:20:28 -0500] otterley:  /etc/chef/validation.pem matches as well
[2013-02-06 01:20:29 -0500] miah: not being able to use your original validation key does not mean your client keys are fubar
[2013-02-06 01:21:35 -0500] miah: see if your client keys are ok. if so. shutdown your chef server. rm your /etc/chef validation.pem and restart the server. it will regenerate a validation key.
[2013-02-06 01:21:37 -0500] tomdzk: otterley: https://gist.github.com/tomdz/4719383
[2013-02-06 01:21:44 -0500] otterley: never mind, I feel like an ass
[2013-02-06 01:21:51 -0500] otterley: la la la
[2013-02-06 01:22:19 -0500] otterley: I copied the wrong .pem file into my homedir, I copied ~/.chef/valiation.pem and not ~/.chef/$USER.pem
[2013-02-06 01:22:31 -0500] miah: =)
[2013-02-06 01:23:09 -0500] miah: no worries. ill wear it tomorrow or later today
[2013-02-06 01:37:16 -0500] mpatel: I am trying to implement my own LWRP and I keep getting "FATAL: NameError: Cannot find a resource for *insert_resource_name*".
[2013-02-06 01:39:17 -0500] mpatel: I have a cookbook with the resources and providers directories each with their respective default.rb files and I issue an 'include_recipe' before I try to use the new resource.
[2013-02-06 01:41:17 -0500] mpatel: I have found many online resources and have read through them all and tried all the suggestions but still no results.  Any help or guidance would be appreciated.
[2013-02-06 01:41:47 -0500] kallistec: mpatel: the cookbook name gets prepended to LWRP resource name
[2013-02-06 01:42:09 -0500] kallistec: e.g., "ark" in the java cookbook becomes "java_ark"
[2013-02-06 01:42:19 -0500] mpatel: That's correct.   I am already doing this.
[2013-02-06 01:42:26 -0500] mpatel: That's why this is puzzling to me.
[2013-02-06 01:42:44 -0500] kallistec: mpatel: running chef with -l debug will give you a deluge, but it will tell you somewhere in there what it's naming the resource
[2013-02-06 01:43:38 -0500] mpatel: I am running with log_level set to :debug already.   Does the -l debug accomplish the same task?
[2013-02-06 01:43:49 -0500] kallistec: mpatel: yeah
[2013-02-06 01:43:54 -0500] kallistec: look for this line:
[2013-02-06 01:43:55 -0500] kallistec:         Chef::Log.debug("Loaded contents of #{filename} into a resource named #{rname} defined in Chef::Resource::#{class_name}")
[2013-02-06 01:44:22 -0500] kallistec: (the message emitted by that line)
[2013-02-06 01:48:01 -0500] X-Jester: mpatel: does your cookbook have a depends 'LWRP recipe name' in metadata.rb?
[2013-02-06 01:48:31 -0500] mpatel: x-jester:  it does not have a depends clause in the metadata
[2013-02-06 01:48:36 -0500] mpatel: let me try that.
[2013-02-06 01:49:18 -0500] X-Jester: and make sure you re-upload the cookbook, i am sorry if that's obvious, it isn't meant condescending
[2013-02-06 01:50:48 -0500] X-Jester: if you have a depends statement in metadata.rb, you most likely don't need to include_recipe for your LWRP either
[2013-02-06 01:50:49 -0500] mpatel: x-jester: not condescending at all.  i am actually using chef-solo on the box itself for the moment.
[2013-02-06 01:50:54 -0500] X-Jester: k
[2013-02-06 01:54:46 -0500] mpatel: hmm...still not working.  maybe if i describe my setup more clearly, someone might be able to give me a clue.  i am sure my problem is in not naming something correctly or not having the right parameters set somewhere.  Here is what I have:
[2013-02-06 01:55:37 -0500] mpatel: I have a cookbook named buildpack with buildpack/resources/s3.rb   and buildpack/providers/s3.rb  and recipes/s3.rb and recipes/default.rb.
[2013-02-06 01:55:57 -0500] mpatel: In another cookbook, I want to use the resource buildpack_s3
[2013-02-06 01:56:34 -0500] mpatel: I have tried to 'include_recipe "buildpack"' as well as 'include_recipe "buildpack::s3"',  with no success
[2013-02-06 01:57:11 -0500] mpatel: Even removed the include_recpies and added the depends clause in the metadata .
[2013-02-06 01:57:46 -0500] mpatel: The error I get is a ruby exception: NameError - Cannot find a resource for buildpack_s3 on fedora version 17
[2013-02-06 02:02:05 -0500] X-Jester: mpatel: ruby version?
[2013-02-06 02:03:06 -0500] mpatel: ruby 1.9.3p286 as installed by the Omnibus installer.
[2013-02-06 02:06:12 -0500] miah: mpatel: you need to 'depends buildpack' in your metadata
[2013-02-06 02:06:35 -0500] miah: more correctly: depends 'buildpack'
[2013-02-06 02:06:39 -0500] mpatel: RESOLVED!  Thanks everyone.  It turns out I was putting the depends clause in the wrong cookbook.  When I looked at the debug logs more closely I noticed that the cookbook with the LWRP wasn't being compiled.  After correcting this oversight, I received the log message that kallistec referred to.
[2013-02-06 02:06:43 -0500] X-Jester: oh
[2013-02-06 02:06:49 -0500] X-Jester: mpatel: i told you it was metadata :P
[2013-02-06 02:06:52 -0500] occupant: hmph, I have a new system that's grabbing a version of a template that is NOT the one on the server. Anyone able to point me in the direction of WTF might be wrong?
[2013-02-06 02:06:58 -0500] X-Jester: glad you got it worked out :)
[2013-02-06 02:07:12 -0500] X-Jester: occupant: do you have two versions of the same cookbook installed?
[2013-02-06 02:07:44 -0500] occupant: X-Jester:  nope
[2013-02-06 02:08:00 -0500] X-Jester: occupant: did you re-upload the cookbook after changing the template?
[2013-02-06 02:08:22 -0500] occupant: X-Jester:  I'm using hosted chef, looking at the template via web UI, and it's correct there.
[2013-02-06 02:08:59 -0500] X-Jester: occupant: is the recipe correctly pointing at the right source file in the template block?
[2013-02-06 02:11:16 -0500] occupant: X-Jester:  Yup, there's only one file like this in templates.
[2013-02-06 02:11:45 -0500] occupant: this seems really simple and the fact that it isn't... is puzzling.
[2013-02-06 02:12:07 -0500] X-Jester: occupant: does the template .erb in the client node's cache (/var/chef) match the one on the server?
[2013-02-06 02:15:57 -0500] occupant: X-Jester:  agh, I didn't think this file already existed when a new server was spun up. something is causing it not to be overwritten then - and I know this recipe has been working for a couple of months without problem.
[2013-02-06 02:16:11 -0500] occupant: anyway, at least I know what the actual problem is now
[2013-02-06 02:16:23 -0500] X-Jester: i take it the client cache still has the out-of-date file?
[2013-02-06 02:16:50 -0500] occupant: no, there was nothing in cache. because no file was ever pulled - the one I'm looking at was baked into the image, but I didn't think that it had been baked
[2013-02-06 02:16:57 -0500] X-Jester: oh, roger
[2013-02-06 02:48:18 -0500] bougyman: on chef 10.18.2 still. is there a way to duplicate a chef-client run from shef?
[2013-02-06 02:48:36 -0500] bougyman: shef -z still gives the same issues I had before.. doesn't load any role or cookbook attributes.
[2013-02-06 02:54:49 -0500] ssd7: bougyman: Hrmm.  I thought that fix got into 10.18.2.  Let me look.
[2013-02-06 02:57:39 -0500] ssd7: bougyman: So, you can probably put this in your config file to monkeypatch 10.18.2: https://github.com/stevendanna/knife-hacks/blob/master/shef/client_session_fix.rb
[2013-02-06 03:04:30 -0500] bougyman: ssd7: got it, thanks
[2013-02-06 06:19:10 -0500] MikeTLive: is there a single reference point for all the required RPM to install and use chef-server on a fresh install RHEL 6 system that is NOT direct connect to the internet or having proxy access to download on demand? ? So far it looks like a lost cause.
[2013-02-06 06:21:36 -0500] siezer: MikeTLive sure
[2013-02-06 06:21:53 -0500] siezer: just wget "http://www.opscode.com/chef/download-server?p=el&pv=6&m=x86_64&v=latest&prerelease=false&nightlies=false"
[2013-02-06 06:22:14 -0500] siezer: and host the resulting RPM on your own internal yum repo
[2013-02-06 06:23:46 -0500] coderanger: Strawpoll: What folder do people use for service users' homedirs when there isn't really much obvios?
[2013-02-06 06:23:51 -0500] coderanger: I guess I could use /etc/haproxy?
[2013-02-06 06:23:55 -0500] coderanger: Better than nothing
[2013-02-06 06:24:10 -0500] jtimberman: coderanger: /home/user? :P
[2013-02-06 06:24:31 -0500] coderanger: jtimberman: Would just be not found? Seems like / would be better in that case
[2013-02-06 06:24:32 -0500] coderanger: or /tmp
[2013-02-06 06:25:19 -0500] siezer: whats a folder
[2013-02-06 06:29:47 -0500] MikeTLive: siezer: thanks! pulling that down now.  what about the various dependencies for various ruby gems etc?
[2013-02-06 06:29:57 -0500] siezer: its all in the rpm
[2013-02-06 06:30:30 -0500] MikeTLive: SWEET!
[2013-02-06 06:30:53 -0500] siezer: rpm -qil chef-server | wc -l
[2013-02-06 06:30:53 -0500] siezer: 30164
[2013-02-06 06:31:20 -0500] siezer: bed time. later!
[2013-02-06 06:31:49 -0500] MikeTLive: thank you sir!.
[2013-02-06 06:34:19 -0500] MikeTLive: is there an equivalent chef-client single RPM ?
[2013-02-06 08:18:15 -0500] v1nc3ntlaw: Hello! I'm test my chef cookbooks and run_list on vagrant ubuntu 12.04 everything is fine. But when I use capinstrano deploy cookbooks to my debian 6 server run chef-solo things failed. This is error log https://gist.github.com/v1nc3ntlaw/e7a1cd732cc2f9f11402 Any suggestion?
[2013-02-06 08:20:29 -0500] jedi4ever: wondering if there is an elegant way to tell people a certain attribute of a cookbook is deprecated - I'm trying to unify 3 different statsd-cookbooks
[2013-02-06 08:28:14 -0500] coderanger: For review if people want to take a look: https://github.com/coderanger/psf-chef/commit/f7096b188786faf3032f5de7a2b5277f41fc0b39 first stab at a new HAProxy cookbook
[2013-02-06 08:28:18 -0500] coderanger: miah: ^^
[2013-02-06 08:37:16 -0500] jtimberman: coderanger: where's the search bits? :)
[2013-02-06 08:40:36 -0500] coderanger: jtimberman: In your application cookbook where they belong :D
[2013-02-06 08:40:37 -0500] coderanger: I'll probably add a simple.rb recipe or something
[2013-02-06 08:40:38 -0500] coderanger: that makes a very basic frontend and backend based on a role search
[2013-02-06 08:40:38 -0500] coderanger: but the plumbing is all generic-ized
[2013-02-06 08:40:39 -0500] coderanger: I guess thats called app_lb in the existing opscode one
[2013-02-06 08:57:56 -0500] jedi4ever: I'm installing a cookbook and it breaks on converge_by - is this is chef/core directive? from what version is this supported?
[2013-02-06 09:04:45 -0500] coderanger: jedi4ever: Is it one of the application cookbooks?
[2013-02-06 09:05:19 -0500] jedi4ever: the chef_logstash_handler to output chef run logs directly to logstash
[2013-02-06 09:05:48 -0500] jedi4ever: tried to  upgraded to chef 11.0 in my vagrant - but now all is broken :(
[2013-02-06 09:06:00 -0500] coderanger: Yeah, a lot of those internals changed
[2013-02-06 10:09:51 -0500] trilitheus: is there a way to access a cookbooks metadata from a recipe to check if the OS/Platform is supported by the recipe?  I.e. don;t allow a cookbook with a supports "ubuntu" to run on a RHEL box
[2013-02-06 10:24:13 -0500] jakshi: Hello Chums
[2013-02-06 10:24:29 -0500] jakshi: I wonder what is the memory/CPU requirements for chef-server?
[2013-02-06 10:25:29 -0500] jakshi: May be somebody has experience with installing chef-server, so could tell the estimation of resource consumption?
[2013-02-06 10:27:28 -0500] wlll: jakshi: I'm running chef-server on a 1GB Memory Ubuntu VMWare VM, I've not looked at the CPU requirements, but it doesn't seem to make the fans on the host spin.
[2013-02-06 10:27:47 -0500] wlll: That said, I heard chef 11 reduces the CPU requirements considerably and I've not tried that yet
[2013-02-06 10:34:58 -0500] jakshi: I more concerned about memory requirements
[2013-02-06 10:35:26 -0500] jakshi: for example will it work on 512 MB memory? (some rackspace host)
[2013-02-06 10:35:40 -0500] jakshi: s/some/ours/
[2013-02-06 10:35:59 -0500] jakshi: Thank you for answer will
[2013-02-06 10:36:55 -0500] bugoff: we run it on a dedicated server with 1024mb ram, and it currently has 22mb free and 251 cached. So i wouldn't go much lower
[2013-02-06 10:37:33 -0500] jonlives: jakshi: it depends on what loda you plan to put on it, too
[2013-02-06 10:37:43 -0500] jakshi: thank you for your recommendation bugoff
[2013-02-06 10:37:45 -0500] jonlives: if you're running ten clients? maybe.
[2013-02-06 10:37:49 -0500] jonlives: 1000? no.
[2013-02-06 10:37:57 -0500] jakshi: 10-20 clients for now
[2013-02-06 10:38:26 -0500] jonlives: jakshi: you might just about manage, but I'd throw at least a gig at it as bugoff recommended
[2013-02-06 10:39:20 -0500] jakshi: jonlives: got it.
[2013-02-06 10:39:24 -0500] jakshi: Thank you Chaps, it's much more clearly for me now :)
[2013-02-06 10:40:01 -0500] jonlives: memory is the main resource requirement for chef
[2013-02-06 10:40:07 -0500] EKK: Hello, I'm having an issue with knife prepare
[2013-02-06 10:41:19 -0500] EKK: oh nvm for now, it was just my collaborator messing up
[2013-02-06 10:57:50 -0500] odyssey4me: jakshi - the thing to be aware of is the disk space for couchdb
[2013-02-06 10:58:28 -0500] odyssey4me: jakshi - be sure to run a regular maintenance routine to compress the db, and make sure there's enough space
[2013-02-06 10:59:02 -0500] odyssey4me: jakshi - the space needed will depend on how many nodes you have and how many changes you make
[2013-02-06 10:59:52 -0500] wlll: If you're using the new release that shouldn't be a problem, it doesn't use couch.
[2013-02-06 11:16:43 -0500] viq: What the hell? When I'm trying to synchronize repo http://yum.opscode.com/el/6/x86_64/ the newest version I'm getting is 10.16.2-1
[2013-02-06 11:19:38 -0500] emilien: Hello everyone, I've just installed chef 11.0 on ubuntu server and am encountering an error 405 when trying to upload the getting started cookbooks
[2013-02-06 11:19:48 -0500] emilien: Could anyone point me in the right direction ?
[2013-02-06 11:20:34 -0500] emilien:  status=405; method=GET; path=/sandboxes; in the erchef.log file
[2013-02-06 11:50:09 -0500] hron84: Hi! I starting to learn chef, but I ran into an error. I following http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo to install chef server, but it says me "undefined method full_name for nil:NilClass" when it tries install a gem package
[2013-02-06 11:50:17 -0500] hron84: I running it on ruby 1.9.3
[2013-02-06 11:50:28 -0500] hron84: I found some google result for it, but without any answer
[2013-02-06 11:50:34 -0500] hron84: is this a known problem?
[2013-02-06 12:03:44 -0500] jakshi: odyssey4me: Thank you for advice, I'll setup some monitoring
[2013-02-06 12:11:55 -0500] MartinCleaver: jtimberman  EnriqueCadalso - is http://tickets.opscode.com/browse/COOK-2335#comment-32116 a workable solution?
[2013-02-06 12:12:12 -0500] MartinCleaver: (to the Chef 11 Ark resource problem)
[2013-02-06 12:35:00 -0500] emilien: anyone know why I get this Uploading getting-started [0.4.0] ERROR: Method Not Allowed Response:  when doing a knife cookbook upload getting started ?
[2013-02-06 12:35:31 -0500] emilien: running a fresh install of chef 11 on ubuntu
[2013-02-06 12:38:14 -0500] matti: emilien: Try 10.18.x
[2013-02-06 12:39:34 -0500] emilien: of chef you mean ?
[2013-02-06 12:40:02 -0500] matti: Yes.
[2013-02-06 12:40:11 -0500] matti: I reverted back to 10.
[2013-02-06 12:40:16 -0500] matti: Too many things do not work.
[2013-02-06 12:40:28 -0500] emilien: My install of 10 was working fine
[2013-02-06 12:40:44 -0500] matti: There you go.
[2013-02-06 12:41:29 -0500] emilien: :)
[2013-02-06 12:41:41 -0500] MartinCleaver: likewise http://community.opscode.com/chat/chef#id-283991
[2013-02-06 12:42:39 -0500] emilien: I just wanted to make sure I didn't do something wrong
[2013-02-06 12:44:32 -0500] matti: emilien: Nah. Its the software vendors. Usually releasing things that are not backward compatible or just broken :)
[2013-02-06 13:00:44 -0500] railsraider: hi i am trying to do a search for all nodes that have munin attribute, for some reason all nodes in my chef are returned
[2013-02-06 13:00:56 -0500] railsraider: the query is from the cookbook of munin
[2013-02-06 13:01:03 -0500] railsraider: search(:node, "munin:[* TO *] AND chef_environment:#{node.chef_environment}")
[2013-02-06 13:01:15 -0500] railsraider: how can i fix that
[2013-02-06 13:39:47 -0500] ipalaus: anyone using vagrant and chef? i have downloaded some recipies but I don't find how I can configure some parameters withotu having to touch the chef's recipie files. it should be a way of doing it but how? thanks in advance!
[2013-02-06 13:46:15 -0500] gyre007: ipalaus: check out chef.json Vagrant param...
[2013-02-06 13:46:23 -0500] ipalaus: gyre007 thanks!
[2013-02-06 13:54:24 -0500] cnf: hi
[2013-02-06 13:54:30 -0500] cnf: how do i copy a file with chef?
[2013-02-06 13:56:34 -0500] specialsauce: cnf: from where to where?
[2013-02-06 13:57:04 -0500] cnf: specialsauce: uhm, from file1 to file2
[2013-02-06 13:57:27 -0500] cnf: or /etc/somefile to /vagrant/somefile to be more specific
[2013-02-06 13:57:41 -0500] specialsauce: so local on client to local on client?
[2013-02-06 13:57:49 -0500] cnf: yep
[2013-02-06 13:58:03 -0500] cnf: chef-solo on vagrant
[2013-02-06 13:58:09 -0500] specialsauce: cnf: that isn't idempotent so it doesn't fit nicely with chef's model really
[2013-02-06 13:58:30 -0500] cnf: plausible, but i still want to do it
[2013-02-06 13:58:48 -0500] specialsauce: ok, so i don't know the "proper" way to do it but there's nothing to stop you using the execute resource to do it
[2013-02-06 13:58:49 -0500] cnf: unless you can figure out a nicer way to get a file onto a 2nd vagrant instance
[2013-02-06 13:59:18 -0500] specialsauce: cnf: probably if yu explain the exact thing you are trying to achieve, there is a better way
[2013-02-06 14:00:36 -0500] cnf: i'm setting up a test env for ceph, and it needs to generate a key file on the server, which you need on the client
[2013-02-06 14:02:46 -0500] cnf: specialsauce: it's a silly corner case, but still :P
[2013-02-06 14:06:58 -0500] specialsauce: cnf: not sure what ceph is but can you not have chef generate the file on both server and client from a common data bag or similar?
[2013-02-06 14:07:08 -0500] specialsauce: that would be a better pattern than generating it one place and copying it, if possible
[2013-02-06 14:08:30 -0500] ianmatthew: if the server is chef controlled, store the key as node data and search for it on the client run
[2013-02-06 14:10:32 -0500] cnf: chef-solo
[2013-02-06 14:11:48 -0500] cnf: and both "server" and "client" are part of a multi-vm vagrant instance
[2013-02-06 14:12:18 -0500] cnf: but i guess i could just put a key in a templace... it's a test anyway
[2013-02-06 14:20:38 -0500] cnf: hmm
[2013-02-06 14:20:42 -0500] cnf: no, so that doesn't work
[2013-02-06 14:20:44 -0500] cnf: crap
[2013-02-06 14:21:10 -0500] cnf: specialsauce: the command that makes the keyfile does a bunch of other setup as well
[2013-02-06 14:22:41 -0500] specialsauce: cnf: ok, so i'd just split it so that it was two parts, one which could go on client too or something
[2013-02-06 14:25:23 -0500] pixie79: hi all - i am trying to extend the users cookbook to be able to transfer to a server a users private ssh key retrieved from and encrypted data_bag, what i have seems to 90% work and a file gets created however it is empty and does not have the contents in it of the databag field which it should - any ideas ? https://gist.github.com/pixie79/4722794
[2013-02-06 14:28:03 -0500] pixie79: is there a way to print debug statements in the provider so that i can see if it has the correct data ?
[2013-02-06 14:30:57 -0500] cwj: pixie79: you can use a log resource, or you can call Chef::Log.debug
[2013-02-06 14:31:32 -0500] cwj: Chef::Log.debug('zomg foo contained: ' + foo.inspect)
[2013-02-06 14:32:43 -0500] pixie79: actually i just called STDERR.puts which told me that I do have the data from the correct record assigned to key_id_dsa, so it would look like the issue is somewhere between line 13 exporting the variable to the template and the template itself - any ideas
[2013-02-06 14:34:26 -0500] cwj: <% @ssh_id_key -%>
[2013-02-06 14:34:32 -0500] cwj: should be
[2013-02-06 14:34:34 -0500] cwj: <%= @ssh_id_key -%>
[2013-02-06 14:34:40 -0500] pixie79: arh - thanks
[2013-02-06 14:34:54 -0500] cwj: you bet
[2013-02-06 14:35:17 -0500] nmische: i'm testing some cookbooks on chef solo, is there a way to query or see the node attributes after the chef solo run?
[2013-02-06 14:36:40 -0500] cwj: nmische: well i suppose there may be a way to output the node object to a chef handler
[2013-02-06 14:37:00 -0500] nmische: or is the node.json updated on disk?
[2013-02-06 14:37:01 -0500] cwj: but it would probably be less work to use chef-shell (shef)
[2013-02-06 14:37:26 -0500] nmische: ok, been meaning to look into chef-shell, will give it a go
[2013-02-06 14:45:34 -0500] deeke: Best Practices questions
[2013-02-06 14:45:35 -0500] deeke: Use Data bag or Attribute?
[2013-02-06 14:45:36 -0500] pixie79: ok well that has my key print but it has screwed the line formatting, i put the key in the record as one long line broken with line breaks set to \\n as \n should be a new line? '\n' by itself though is rejected by the json passer on upload
[2013-02-06 14:45:36 -0500] deeke: I want to structure data for a configuration file so that it retrieves the template variables for the
[2013-02-06 14:45:37 -0500] deeke: #{Continent}_#{Area}#_#{AvailableZone}
[2013-02-06 14:45:40 -0500] deeke:  Is it best practices to store the data in data bags or attributes?
[2013-02-06 14:45:40 -0500] deeke: For instance, I could have a role that corresponds to the #{Contient}_#{Area}#_#{AvailableZone}
[2013-02-06 14:45:41 -0500] deeke: or I could store that information in a
[2013-02-06 14:45:42 -0500] deeke: data bag that stores the same information.
[2013-02-06 14:46:04 -0500] pixie79: any ideas on the correct way to get my data bag to respect the new line ?
[2013-02-06 14:51:45 -0500] matti: pixie79: Can you assemble an array from JSON adding new line during the assembly in a template, or something?
[2013-02-06 14:51:49 -0500] matti: deeke: Depends for what ;]
[2013-02-06 14:52:26 -0500] matti: pixie79: Otherwise you have to escape \n as \\n
[2013-02-06 14:53:18 -0500] cnf: specialsauce: split what?
[2013-02-06 14:53:19 -0500] pixie79: matti: the template is currently printing the line as one long line including the '\n', to get the data bag to accept it i had to store it as '\\n' as '\n' gets rejected
[2013-02-06 14:53:29 -0500] cnf: it's one command
[2013-02-06 14:54:05 -0500] pixie79: so i think somewhere the extra '\' is being striped on the way back but it is then now respecting the presence of the remaining '\n'
[2013-02-06 14:56:09 -0500] deeke: @matti Is there a best practice that says use data bags if you doing x or attributes for y/
[2013-02-06 14:56:14 -0500] matti: pixie79: You can throw a p there in the recipe where you use data bag to see what is inside.
[2013-02-06 14:56:56 -0500] matti: deeke: I always use attributes on the recipe / cookbook level, so I can overwrite them on the Role / Node level etc.
[2013-02-06 14:57:04 -0500] leifmadsen: +1
[2013-02-06 14:57:18 -0500] leifmadsen: I keep cookbook agnostic data in data bags
[2013-02-06 14:57:25 -0500] matti: deeke: And data bags to store data that cookbook needs to share, or that has to be unique ot something.
[2013-02-06 14:57:28 -0500] matti: leifmadsen: +1
[2013-02-06 14:57:39 -0500] matti: deeke: Is a separation of concerns.
[2013-02-06 14:57:58 -0500] matti: deeke: Separate your external data from the actual cookbook.
[2013-02-06 14:57:59 -0500] leifmadsen: it's basically a level of scope
[2013-02-06 14:58:04 -0500] matti: Indeed.
[2013-02-06 14:59:51 -0500] deeke: @leifmadsen and @matti thanks.
[2013-02-06 15:00:27 -0500] matti: ;]
[2013-02-06 15:00:28 -0500] gyre007: anyone knows where is Berkshelf installing dependency cookbooks in Vagrant ?
[2013-02-06 15:04:34 -0500] queso: http://dpaste.com/hold/910679/  Chef is supposed to create the file in the first "git" block that it later (in line 11) complains about not existing.  The file is part of the my_app.git repository and describes the hash the dependency needs to be installed at.  Help? :)
[2013-02-06 15:06:00 -0500] gyre007: ah ~/.berkshelf/cookbooks/ ;)
[2013-02-06 15:08:30 -0500] matti: queso: Chain them.
[2013-02-06 15:08:37 -0500] pixie79: it would appear this is the answer - `cat id_dsa | sed s/$/\\\\n/ | tr -d '\n'` then drop the last \n and paste the result in to the json file
[2013-02-06 15:08:38 -0500] matti: queso: Make the first one call the second one.
[2013-02-06 15:08:43 -0500] cnf: so, i'm back to "how do i copy files in chef" ^^;
[2013-02-06 15:09:10 -0500] matti: pixie79: Can you distribute your key as static file?
[2013-02-06 15:09:42 -0500] pixie79: no - it needs to be encrypted
[2013-02-06 15:10:06 -0500] matti: pixie79: There is another way to solve this.
[2013-02-06 15:10:12 -0500] matti: pixie79: Make it Base64 encoded.
[2013-02-06 15:10:34 -0500] matti: pixie79: You'd have to write code to encode/decode it though.
[2013-02-06 15:10:37 -0500] ttgb: Does chef load attributes from cookbooks that aren't in my run list?
[2013-02-06 15:10:56 -0500] matti: ttgb: It should load automatic ones from e.g. Ohai.
[2013-02-06 15:11:12 -0500] queso: matti: So, put lines 9-15 between lines 6 and 7?
[2013-02-06 15:11:38 -0500] matti: queso: No.
[2013-02-06 15:11:49 -0500] matti: queso: Make the first one notify the other.
[2013-02-06 15:11:52 -0500] ttgb: matti: I'm running in to a problem testing out a cookbook where it seems to be seeing a value set on an attribute in a completely unrelated cookbook that shouldn't be running.
[2013-02-06 15:12:04 -0500] queso: matti: I have no idea how to do that..
[2013-02-06 15:12:31 -0500] matti: ttgb: Is it possible that it got included somewhere? Or from a Role?
[2013-02-06 15:12:43 -0500] matti: queso: Not sure if that would work for git resource.
[2013-02-06 15:13:18 -0500] matti: queso: Put action :nothing in the second one.
[2013-02-06 15:13:36 -0500] ttgb: matti: Trying to trace it now, is there something I can run to see all the cookbooks that have been included for a run, or just a dump of all the attributes? (Using chef-solo for testing here)
[2013-02-06 15:14:03 -0500] matti: queso: And in the first one do: notifies :run, 'git[/srv/apps/my_app/dependency_lib]'
[2013-02-06 15:14:20 -0500] queso: matti: I will try that, thank you.
[2013-02-06 15:14:37 -0500] matti: queso: You can also technically solve this with making first git run at compile-time, or making it a ruby-block where things will run sequentailly.
[2013-02-06 15:14:51 -0500] matti: ttgb: --debug might help.
[2013-02-06 15:15:06 -0500] matti: ttgb: Or, you may try to drop-to-pry/irb, or use shef.
[2013-02-06 15:15:07 -0500] queso: matti: I am confused because I thought everything ran sequentially anyway.
[2013-02-06 15:15:15 -0500] matti: queso: Not always.
[2013-02-06 15:15:31 -0500] queso: matti: Is using the notifications as you suggested the "right way" to fix this problem?
[2013-02-06 15:15:39 -0500] queso: matti: Have I structured my recipe wrong?
[2013-02-06 15:15:47 -0500] matti: queso: It is "a way".
[2013-02-06 15:15:53 -0500] queso: matti: :)
[2013-02-06 15:16:01 -0500] matti: queso: No. Its a general problem with resource dependencies.
[2013-02-06 15:16:14 -0500] matti: queso: I often chain resources if I need them to run in a specific order.
[2013-02-06 15:16:23 -0500] matti: queso: Like e.g. installing a package etc.
[2013-02-06 15:16:32 -0500] queso: matti: Chain them by notifications like this?
[2013-02-06 15:16:50 -0500] matti: Yes.
[2013-02-06 15:17:30 -0500] matti: queso: Try it. It might work for you.
[2013-02-06 15:18:49 -0500] queso: matti: Even with action :nothing it is erroring out because the file doesn't exist.
[2013-02-06 15:19:43 -0500] matti: Is it?
[2013-02-06 15:19:54 -0500] matti: Which one?
[2013-02-06 15:20:07 -0500] queso: matti: The dependency call.
[2013-02-06 15:20:16 -0500] queso: matti: The dependency git call.
[2013-02-06 15:20:18 -0500] queso: (block)
[2013-02-06 15:20:22 -0500] queso: I don't know what it's called.
[2013-02-06 15:20:47 -0500] queso: matti: I added action :nothing between lines 14 and 15.
[2013-02-06 15:21:24 -0500] emilien: This is probably a silly question but can someone explain how this kind of line in a recipe is executed : notifies :run, resources(:execute => "Configure Hostname"), :immediately
[2013-02-06 15:21:28 -0500] matti: queso: I do hope that git resource handles actions, it should.
[2013-02-06 15:23:13 -0500] queso: matti: http://docs.opscode.com/resource_scm.html#actions
[2013-02-06 15:23:54 -0500] matti: queso: So, the first git must finish for the other to have the file in File.read?
[2013-02-06 15:24:42 -0500] queso: matti: Right.
[2013-02-06 15:26:23 -0500] matti: queso: You can try to get first run during compilation time.
[2013-02-06 15:26:53 -0500] matti: queso: git .. end.run_action(:checkout)
[2013-02-06 15:27:13 -0500] matti: queso: With action :nothing inside the git ... end block.
[2013-02-06 15:27:23 -0500] ttgb: It's definitely not including this cookbook, just seems to be loading the attributes/default.rb for every cookbook whether I'm actually running it or not
[2013-02-06 15:29:43 -0500] queso: matti: But what if other things have to happen before the first git block? :/
[2013-02-06 15:31:55 -0500] trilitheus: hi - trying to pull a data bag item based on a nodes fqdn - but the databag item is of the format node_domain_name whereas the actual fqdn is node.domain.name so I'm trying to do
[2013-02-06 15:32:20 -0500] matti: queso: Than it is a problem a little ;]
[2013-02-06 15:32:23 -0500] trilitheus: bagitem = node['name'].gsub(".","_")
[2013-02-06 15:34:02 -0500] queso: matti: Is there a way to tell something to run last?
[2013-02-06 15:34:04 -0500] matti: trilitheus: You mean _ to .
[2013-02-06 15:34:22 -0500] matti: queso: Hm, no idea ;/ I don't think so.
[2013-02-06 15:34:39 -0500] trilitheus: matti, I want to change the dots to an underscore
[2013-02-06 15:35:11 -0500] matti: trilitheus: Right. .tr('.', '_')
[2013-02-06 15:35:22 -0500] matti: trilitheus: Same as gsub.
[2013-02-06 15:35:47 -0500] trilitheus: yeah
[2013-02-06 15:35:54 -0500] queso: matti: Throwing the version in an attribute saved in the cookbook seems... very wrong.
[2013-02-06 15:36:41 -0500] queso: matti: Although . . I guess I could use git submodules . . that's essentially the behavior I'm mimicking.
[2013-02-06 15:37:02 -0500] zts: emilien: if the resource containing that "notifies" line changes the system, it will invoke the :run action on an execute resource called "Configure Hostname"
[2013-02-06 15:37:14 -0500] zts: emilien: more examples here, although the explanation is a bit lacking: http://docs.opscode.com/resource_common_notifications.html
[2013-02-06 15:37:34 -0500] emilien: it complains that it doesn't fine the Configure Hostame resource
[2013-02-06 15:37:35 -0500] trilitheus: matti, I amm getting undefined method 'gsub' so I think that means I'm pulling the fqdn off wrong annd trying to gsub on a nil valie
[2013-02-06 15:38:42 -0500] zts: ttgb: Chef will load all attributes files for all cookbooks it knows about - for chef-client, that means things in the expanded run list or included by metadata 'depends'.
[2013-02-06 15:39:11 -0500] zts: emilien: okay, that means it expects you to have an execute resource called "Configure Hostname" somewhere, and you don't
[2013-02-06 15:39:32 -0500] ttgb: zts: The cookbook this is loading from is not in any run list or depended - it just exists in the cookbook directory.
[2013-02-06 15:39:50 -0500] zts: emilien: also, with that syntax, it means that it expects that resource to have already been declared before the resource that contains that line
[2013-02-06 15:39:54 -0500] zts: ttgb: chef-solo?
[2013-02-06 15:40:04 -0500] ttgb: zts: Yeah
[2013-02-06 15:40:36 -0500] zts: ttgb: I wouldn't be shocked if that's expected behaviour, but I don't use chef-solo enough to know myself
[2013-02-06 15:41:17 -0500] zts: ttgb: what is the problem it's causing you?
[2013-02-06 15:41:20 -0500] ttgb: zts: I'm only using it locally + Vagrant to test the cookbook. Odd that behaviour differs between the two.
[2013-02-06 15:41:43 -0500] queso: matti: Anyway, thanks for your help. :)
[2013-02-06 15:42:54 -0500] matti: trilitheus: Oh, right.
[2013-02-06 15:42:59 -0500] matti: trilitheus: Throw an if there.
[2013-02-06 15:43:01 -0500] ttgb: zts: I have a new cookbook where I have something along the lines of set[:foo][:bar] = "abc" in attributes/default.rb. I also have another cookbook which is unrelated to the new one and not included in this run where I have set[:foo][:baz] = "abc" in its attributes file. On running the new cookbook, the 'foo' list contains both bar and baz.
[2013-02-06 15:43:18 -0500] matti: trilitheus: if x[''] and !x[''].empty? ...
[2013-02-06 15:44:32 -0500] emilien: zts: inside my default recipe I should have an execute resource named "configure hostname" with action: nothing right ?
[2013-02-06 15:45:26 -0500] zts: ttgb: okay, and what problem does that then create?  (having both those things present)
[2013-02-06 15:46:05 -0500] zts: emilien: It depends - you might want that resource to execute on every run.  Or, you might want it to do nothing unless notified - in which case, "action :nothing" is what you want
[2013-02-06 15:46:31 -0500] ttgb: zts: In this particular case it's trying to find users on the system and create an authorized_keys file for each one in the foo list. The 'baz' user doesn't exist on the system the new cookbook is running on so that throws an error.
[2013-02-06 15:47:22 -0500] emilien: zts: I'm trying to follow this  http://www.onepwr.org/2012/04/26/chef-recipe-to-setup-up-a-new-nodes-fqdn-hostname-etc-properly/ ... without success as you can see :)
[2013-02-06 15:47:29 -0500] ttgb: That's not really my concern - I can obviously just reset the value of the foo attribute before I set any values on it, just worried that if I don't understand the issue it's going to cause a problem somewhere down the line.
[2013-02-06 15:48:21 -0500] emilien: I'm guessing that if the file /etc/hostname does not contain the node.name then it will trigger the notify which would launch the Configure Hostname action
[2013-02-06 15:48:24 -0500] zts: ttgb: A less obfuscated example might be easier to comment on :)  But do you know that node['etc']['passwd'] will contain all of the users on the machine?
[2013-02-06 15:50:06 -0500] pcn: OK, I'm back to my questins about the nagios cookbook from yesterday.  This is a lot weirder now, though.
[2013-02-06 15:50:43 -0500] ttgb: Sorry - I basically have a data bag of our developers public keys, and an authorized_keys cookbook that reads the 'authorized_keys' attribute on the node which maps a username on the machine to a set of developer names, then it just builds an authorized_keys file using a search through the data bag.
[2013-02-06 15:51:08 -0500] pcn: My goal is as follows: Launch nagios with apache.  Have the virtualhost configured to auth using gssapi negotiation based on a setting in the environment json.
[2013-02-06 15:51:24 -0500] pcn: This all works.  When I look at the filesystem, I see the correct configuration, the correct modules, etc.
[2013-02-06 15:51:44 -0500] pcn: What does happen at the end of the recipe, though, is that the /etc/apache2/conf.d/nagios3.conf is deleted.
[2013-02-06 15:52:06 -0500] pcn: This file no longer exists on the filesystem.  I see that the server appears to have re-started.
[2013-02-06 15:52:31 -0500] pcn: However, when I do a gcore and dump the memory of the apache2 process, I clearly see that conf file in memory.
[2013-02-06 15:52:34 -0500] ttgb: But considering another example, maybe I have node[:mysql][:server_root_password] set in a couple of cookbooks and Chef decides to load all the attributes regardless, how do I know which one its used? What if I forget to set the attribute on a new cookbook, it will just fall back to some other one somewhere...
[2013-02-06 15:53:31 -0500] pixie79: any ideas why node['fqdn'] would resolve to nothing ?
[2013-02-06 15:55:18 -0500] zts: ttgb: well, nothing stops you from trying to set node[:mysql][:server_root_password] in multiple cookbooks, but that doesn't make it a good idea
[2013-02-06 15:56:02 -0500] zts: ttgb: Attributes are surprisingly complex, but the way that they're resolved (what's loaded, what its precedence is, etc) is reasonably well documented - http://wiki.opscode.com/display/chef/Cookbook+Attributes
[2013-02-06 15:56:12 -0500] zts: though I found it difficult to wrap my head around it to start with
[2013-02-06 15:56:38 -0500] trilitheus: matti, yeah, I just picked the wrong attribute - used node['fqdn'] instead and test with not_if <blah>.nil
[2013-02-06 15:56:45 -0500] queso: matti: Okay, things work just great with using a git submodule instead. :)
[2013-02-06 15:56:51 -0500] ttgb: zts: The main question I'm trying to answer that those docs don't make too clear is; Are attributes/*.rb files loaded even if the cookbook isn't in the extended run list?
[2013-02-06 15:57:32 -0500] sunil_: hey guys, if I have an attribute set for a package in an environment and also the same attribute in a role, which one will take precedence?
[2013-02-06 15:58:33 -0500] zts: ttgb: if the cookbook is available to the chef run, its attributes will be loaded.  If you're using chef-client, that either means extended run list, or 'depends' in metadata - for chef-solo, it appears to be "present in the cookbooks directory"
[2013-02-06 15:58:51 -0500] zts: I'm basing the latter on jtimberman's comment here: http://stackoverflow.com/a/9676887
[2013-02-06 16:01:10 -0500] zts: ttgb: I agree with you that that distinction is a bit odd - I can understand what it happens, but it's not very user-friendly
[2013-02-06 16:01:16 -0500] zts: would be good to change it in the future
[2013-02-06 16:01:59 -0500] ttgb: zts: Yeah I did come across that - OK at least I can plan around that.
[2013-02-06 16:02:27 -0500] pixie79: how do i set or override node['fqdn']
[2013-02-06 16:04:22 -0500] kamabe: can anyone look at this and see if they know why chef seems to be doing weird things with attribute overrides within a wrapper cookbook? there is a description at the top. https://gist.github.com/kamabe/c6820661fa320dbdb9be
[2013-02-06 16:04:39 -0500] zts: pixie79: node['fqdn'] is set by ohai - so that means ohai can't work out your fqdn
[2013-02-06 16:05:53 -0500] zts: pixie79: http://docs.opscode.com/ohai_automatic_attributes.html
[2013-02-06 16:06:18 -0500] pixie79: yep it would appear to be missing if i just run ohai on the host
[2013-02-06 16:08:02 -0500] zts: emilien: that page you link (on onepwr.org) is definitely missing some details
[2013-02-06 16:08:54 -0500] emilien: That's what I thought based on what you said ... thanks
[2013-02-06 16:13:37 -0500] dlite: Hey all - Chef noob here with a question. I'm creating a Chef recipe that (1) installs a Ruby gem w/an executable (2) Creates a Cron Job to run the gem's executable. I need the full path to the executable for the Cron job, but that path could vary (/usr/bin/, /usr/local/bin, etc.). After using gem_package to install the gem, is there a preferred way do determine the path using something like `which`?
[2013-02-06 16:29:42 -0500] databus23: Hi everybody! Any chance an experienced runit cookbook user is around?
[2013-02-06 16:30:50 -0500] mattray: jtimberman: I think he means you
[2013-02-06 16:32:26 -0500] databus23: I'm diddling around with the latest runit cookbook 1.0.2 and wondering how changes to the run template are picked up. It seems to me once the service is enabled it totally skipss the template not picking up and changes done to the sv-service_name-run.erb template.
[2013-02-06 16:32:53 -0500] jtimberman: databus23: its an bug.
[2013-02-06 16:33:46 -0500] databus23: Ok. So whats the suggested workaround. Manually deleting the /etc/service symlink to trigger the update?
[2013-02-06 16:34:41 -0500] jtimberman: i'd make a template "/etc/sv/FOO/run" resource
[2013-02-06 16:34:53 -0500] jtimberman: where FOO is your runit service's name
[2013-02-06 16:35:33 -0500] jtimberman: ticket is here: http://tickets.opscode.com/browse/COOK-2353
[2013-02-06 16:35:39 -0500] jtimberman: unresolved.
[2013-02-06 16:37:17 -0500] laurent\: dlite: https://github.com/opscode/chef/blob/master/distro/debian/etc/init.d/chef-client#L18
[2013-02-06 16:38:23 -0500] FarmKing: Is there a way to call a recipe twice in the run list with different attributes each time?
[2013-02-06 16:39:11 -0500] databus23: jtimberman: thanks
[2013-02-06 16:40:51 -0500] kamabe: has anyone else observed a problem overriding attributes like this one? https://gist.github.com/kamabe/c6820661fa320dbdb9be
[2013-02-06 16:48:11 -0500] databus23: jtimberman: One other about the runit cookbook: What you you think about aadding run_template_name paramater for the provider? I want to configure multiple instances of the same services which all could reuse the same template.
[2013-02-06 16:55:18 -0500] awgross: is it possible to have the omnibus installer install a specific version of chef?
[2013-02-06 16:56:00 -0500] ttgb: awgross: Specify -v when running it, e.g install.sh -v 10.18.2-2
[2013-02-06 16:56:10 -0500] awgross: ahh -v
[2013-02-06 16:56:19 -0500] awgross: thanks ttgb
[2013-02-06 16:56:25 -0500] ttgb: awgross: no problem
[2013-02-06 16:57:55 -0500] ghaase: \wc
[2013-02-06 16:59:54 -0500] awgross: is it possible to pass that version in when using the recommended truee && curl opscode-url | bash   syntax?
[2013-02-06 17:03:52 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:04:26 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:04:28 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:04:29 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:04:29 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:04:29 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:04:29 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:04:36 -0500] jtimberman: mrhobbles: whoa now
[2013-02-06 17:04:37 -0500] jtimberman: :)
[2013-02-06 17:04:45 -0500] tomdzk: cat on the keyboard ?
[2013-02-06 17:04:59 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:05:00 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:05:00 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:05:00 -0500] mrhobbles: Hey guys, currently having a problem running chef on some new servers. Seems net-ssh-multi has been updated to use a new version of net-ssh which conflicts with the one that Chef wants. Anyone else having this issue?
[2013-02-06 17:05:20 -0500] renchap: wtf is this spam ?
[2013-02-06 17:05:30 -0500] awgross: prob some weird bug
[2013-02-06 17:05:31 -0500] bougyman: mrhobbles: yes, was just about to ask about that issue, hopefully you haven't soured the milk for me.
[2013-02-06 17:05:32 -0500] mrhobbles: Oops, sorry for spam. >.<
[2013-02-06 17:05:35 -0500] awgross: but I have the smae issue
[2013-02-06 17:05:38 -0500] chaosdonkey: me too
[2013-02-06 17:05:41 -0500] jkeiser: It may be morse code
[2013-02-06 17:05:50 -0500] awgross: if you try to install chef from a gem, you get this error
[2013-02-06 17:05:58 -0500] chaosdonkey:     Unable to resolve dependencies: chef requires net-ssh (~> 2.2.2); net-ssh-multi requires net-ssh (>= 2.6.4); net-ssh-gateway requires net-ssh (>= 2.6.4)
[2013-02-06 17:05:59 -0500] awgross: atm I am trying to work around by installing using omnibus
[2013-02-06 17:06:00 -0500] Drewzar: Yeah we just hit this error
[2013-02-06 17:06:04 -0500] bougyman: just started this morning around 9am my time
[2013-02-06 17:06:11 -0500] chaosdonkey: you can temporarily use --ignore-dependencies
[2013-02-06 17:06:11 -0500] bougyman: ~ two hours ago
[2013-02-06 17:06:14 -0500] mrhobbles: My client didn't update the screen properly, seems I posted it multiple times. Sorry bout that...
[2013-02-06 17:06:18 -0500] Drewzar: If you install/update net-ssh using gem, you can then get around it.
[2013-02-06 17:06:26 -0500] bougyman: Drewzar: didn't work for me
[2013-02-06 17:06:33 -0500] Drewzar: Hrm, worked for us
[2013-02-06 17:06:35 -0500] bougyman: chef-client won't start without net-ssh-2.2.2
[2013-02-06 17:06:39 -0500] chaosdonkey: there is a conflict of dependencies
[2013-02-06 17:06:43 -0500] bougyman: so if I uninstall it, no chef-client
[2013-02-06 17:06:51 -0500] bougyman: if it's installed, conflicting net-ssh versions
[2013-02-06 17:07:03 -0500] Drewzar: bougyman: Yup you're right
[2013-02-06 17:07:11 -0500] Drewzar: We were able to install
[2013-02-06 17:07:16 -0500] Drewzar: but we can't run the client
[2013-02-06 17:07:29 -0500] awgross: fun with ruby dependencies
[2013-02-06 17:07:29 -0500] chaosdonkey: there are two ways to fix it. either someone fixes the conflict in the gem repo or we ignore the dependencies
[2013-02-06 17:07:31 -0500] jtimberman: those having chef-client + net-ssh issues, are you installing the chef gem? or using omnibus-packaged chef?
[2013-02-06 17:07:37 -0500] garrettux: chef gem
[2013-02-06 17:07:38 -0500] Drewzar: chef gem
[2013-02-06 17:07:40 -0500] awgross: gem
[2013-02-06 17:07:45 -0500] chaosdonkey: same
[2013-02-06 17:07:55 -0500] bougyman: jtimberman: ombnibus
[2013-02-06 17:07:57 -0500] itwasntandy: jtimberman: think we had it on an omnibus'd chef
[2013-02-06 17:08:08 -0500] awgross: omnibus install fine for me, i havent tried to run it though
[2013-02-06 17:08:12 -0500] awgross: installed*
[2013-02-06 17:08:15 -0500] bougyman: yes, it installs fine
[2013-02-06 17:08:17 -0500] bougyman: doesn't run.
[2013-02-06 17:08:19 -0500] awgross: ok
[2013-02-06 17:08:22 -0500] bougyman: not on 10.18.2, anyway
[2013-02-06 17:08:36 -0500] bougyman: haven't tried 11
[2013-02-06 17:08:41 -0500] awgross: why even bother specifying versions with semver, if it fails anyways
[2013-02-06 17:09:50 -0500] chaosdonkey: I think that the problem is a sort of triangular dependency. A depends on B, B depends on C and A depends on C
[2013-02-06 17:09:56 -0500] bougyman: yep
[2013-02-06 17:10:09 -0500] chaosdonkey: and the rules don't match
[2013-02-06 17:10:30 -0500] chaosdonkey: A is chef, B is net-ssh, C is net-ssh-multi
[2013-02-06 17:11:04 -0500] bougyman: it's net-scp 1.0.5 that's demanding the newer 2.6.4 net-ssh
[2013-02-06 17:11:10 -0500] bougyman: and chef demanding net-ssh 2.2.2
[2013-02-06 17:11:33 -0500] chaosdonkey: but also net-ssh-multi 1.1.0, which requires net-ssh 2.6.4
[2013-02-06 17:11:34 -0500] bougyman: so 2.2.2 activates first, and net-scp 1.0.5 can't activate.
[2013-02-06 17:11:47 -0500] bougyman: both, then.
[2013-02-06 17:14:47 -0500] pcn: Quick question - if I want to bail on the remainder of a recipe without erroring, what call should I make?
[2013-02-06 17:14:50 -0500] ttgb: zts: Just saw this in the latest blog post about attributes in Chef 11: "This means that chef-solo will now only load cookbooks that are directly in the run_list or reachable via the dependency chain."
[2013-02-06 17:15:20 -0500] pcn: Just a "return" or is there a Chef::<something> that does this/
[2013-02-06 17:16:28 -0500] chaosdonkey: so apparently rubygems does not prevent dependency loops
[2013-02-06 17:16:52 -0500] FarmKing: chaosdonkey: what's the likelyhood that someone is going to fix the conflict in the gem repo in the next hour or two?  I could just go to lunch.
[2013-02-06 17:18:16 -0500] jkyle: will the *.deb packages for 11 gracefully upgrade chef 10?
[2013-02-06 17:18:19 -0500] jkyle: server
[2013-02-06 17:18:39 -0500] chaosdonkey: FarmKing, I have no idea :( I would rather use --ignore-dependencies for the time being and wait for someone to fix it.
[2013-02-06 17:18:55 -0500] bougyman: chaosdonkey: where would you use that?
[2013-02-06 17:19:05 -0500] bougyman: i'm digging into our bootstrap stuff to find out where exactly i'd put that.
[2013-02-06 17:19:15 -0500] bougyman: again, i'm using omnibus
[2013-02-06 17:19:15 -0500] chaosdonkey: argument of gem install
[2013-02-06 17:19:21 -0500] bougyman: right... not gem installing here.
[2013-02-06 17:19:36 -0500] btm: jkyle: different databases, no. we will be releasing migration tools in the future.
[2013-02-06 17:21:24 -0500] jkyle: I've noticed the :remove action on user resources causes chef-client to fail if the user doesn't exist (this is in the opscode chef-user cookbook). Is this intended behavior?
[2013-02-06 17:21:36 -0500] FarmKing: chaosdonkey: :-\ OK.  Thanks
[2013-02-06 17:22:20 -0500] clayg: having some trouble installing?  new net-ssh-gateway version?  Unable to resolve dependencies: chef requires net-ssh (~> 2.2.2); net-ssh-multi requires net-ssh (>= 2.6.4); net-ssh-gateway requires net-ssh (>= 2.6.4)
[2013-02-06 17:22:31 -0500] glennpratt: for my own edification, I'm trying to find what make Chef::Log::fatal!()[http://docs.opscode.com/essentials_cookbook_recipes_handlers_and_logs.html] work and I can't find it. Anyone know? https://github.com/opscode/chef/blob/master/lib/chef/log.rb https://github.com/opscode/mixlib-log/blob/master/lib/mixlib/log.rb
[2013-02-06 17:22:54 -0500] AikiLinux: Is there a way to pass a dynamic range of variables to a template ?
[2013-02-06 17:22:57 -0500] glennpratt: IE, what makes it stop the run, I don't see a special case for it
[2013-02-06 17:23:02 -0500] zts: ttgb: oh, cool!  I haven't read that post yet, but that's a nice improvement.
[2013-02-06 17:23:08 -0500] AikiLinux: i mean one time ti can be 2 and the next it can be 3
[2013-02-06 17:30:17 -0500] alexbst: any chef users having an issue with net-ssh and net-ssh-gateway dependencies in bootstrapping ?
[2013-02-06 17:30:32 -0500] alexbst: ec2-54-242-135-153.compute-1.amazonaws.com
[2013-02-06 17:30:42 -0500] alexbst: ERROR: While executing gem ... (Gem::DependencyError) Unable to resolve dependencies: net-ssh-multi requires net-ssh (>= 1.99.2); chef requires net-ssh (~> 2.1.3); net-ssh-gateway requires net-ssh (>= 2.6.4) even
[2013-02-06 17:31:27 -0500] joemiller: msf: ping. jtimberman tells me you run chef on openbsd. i don't see an omnibus build, so i'm assuming you just use ruby19 + gem-installed chef?
[2013-02-06 17:31:47 -0500] jessicab: alexbst: heh i noticed that this morning too.. i made it so the new versions of net-ssh and net-ssh-gateway were uninstalled.. so just net-ssh version 2.2.2 and net-ssh-gateway 1.1.0 were installed, and now its working fine.. perhaps that might help ya too?
[2013-02-06 17:31:50 -0500] bougyman: alexbst: being worked on
[2013-02-06 17:32:14 -0500] bougyman: jessicab: with an omnibus install?
[2013-02-06 17:32:23 -0500] petecheslock1: msf: joemiller - I've been messing around trying to build omnibus on freebsd - (as mentioned in the mailing list)
[2013-02-06 17:32:29 -0500] petecheslock1: it's not been easy
[2013-02-06 17:32:39 -0500] jessicab: bougyman: yep, its a omnibus install.. gems are installed to the embedded gem
[2013-02-06 17:32:58 -0500] alexbst: bougyman - are you .. opscode ?
[2013-02-06 17:33:06 -0500] joemiller: petecheslock: yeah, i am not surprised
[2013-02-06 17:33:21 -0500] joemiller: petecheslock: just a lot of little compilation issues with various libs (ncurses i saw), etc ?
[2013-02-06 17:33:22 -0500] clayg: alexbst: yes I'm having that problem
[2013-02-06 17:34:12 -0500] bougyman: alexbst: i'm not.
[2013-02-06 17:34:36 -0500] bougyman: jessicab: i tried that earlier and it would not work.
[2013-02-06 17:34:37 -0500] petecheslock: joemiller: yup - i had gotten past ncurses with 8.2, but tried again later on a new image and somehow got stuck on it again.  libedit was the next one after ncurses i had been dealing with
[2013-02-06 17:34:40 -0500] clayg: jessicab: I installed net-ssh 2.2.2 (and net-ssh-gateway 1.1.0) but I still got an error when net-ssh-multi got pulled in...
[2013-02-06 17:34:47 -0500] bougyman: chef 10.18.2 wants net-ssh 2.6.4
[2013-02-06 17:34:48 -0500] petecheslock: going to try again on 9.1
[2013-02-06 17:35:17 -0500] jessicab: bougyman: weird.. im also on 10.18.2
[2013-02-06 17:35:46 -0500] petecheslock: a bottle of scotch for anyone who can get omnibus built on free/open bsd. :D
[2013-02-06 17:36:11 -0500] jessicab: these are chefs deps btw - https://github.com/opscode/chef/blob/master/chef.gemspec#L25
[2013-02-06 17:36:23 -0500] c_t: this would be the whole libedit thing, I take it?
[2013-02-06 17:36:25 -0500] joemiller: petecheslock: what kind of scotch?
[2013-02-06 17:36:55 -0500] c_t: ... and if I had read 2 inches higher, I would have seen that
[2013-02-06 17:36:56 -0500] petecheslock: joemiller: what are you drinking nowadays?
[2013-02-06 17:37:31 -0500] clayg: is chef-10.16.4 unforgivingly old?
[2013-02-06 17:37:45 -0500] joemiller: petecheslock: i've actually been making manhattans more than drinking straight whiskey. so a lot of rye, in that case
[2013-02-06 17:37:47 -0500] c_t: petecheslock: This is, presumably, something you've already tried
[2013-02-06 17:37:50 -0500] alexbst: clayg - where I am working we're still 90% on 10.14 :)
[2013-02-06 17:37:54 -0500] joemiller: petecheslock: although we did get some interesting stuff here at the office.
[2013-02-06 17:37:54 -0500] c_t: but does libedit built out of ports?
[2013-02-06 17:38:12 -0500] joemiller: petecheslock: some local stuff. forget the name, but it's distilled from Racer5 IPA (unaged/clear)
[2013-02-06 17:38:28 -0500] joemiller: petecheslock: 99 proof but amazingly smooth. and a great taste from the racer5
[2013-02-06 17:38:47 -0500] petecheslock: c_t: yea - libedit was the most recent thing - and yea i think it was built out of ports.   i need to get more time to try the omnibus build again to see where the state is at
[2013-02-06 17:39:01 -0500] petecheslock: i had forked a branch from https://github.com/someara/omnibus-software/tree/CHEF-2576 to work on locally
[2013-02-06 17:39:11 -0500] c_t: I mean does it successfully build in ports?
[2013-02-06 17:39:29 -0500] c_t: I remember seeing stuff on the mailing list about this
[2013-02-06 17:39:30 -0500] jtimberman: I wrote a quick explanation of what happened with the net-ssh and chef dependency here: http://jtimberman.housepub.org/blog/2013/02/06/chef-and-net-ssh-dependency-broken/
[2013-02-06 17:40:12 -0500] c_t: the only freebsd box I have handy though is a) running 6.something and b) the router seems to be messed up & not forwarding ssh traffic anyway
[2013-02-06 17:40:19 -0500] c_t: so it's not really handy
[2013-02-06 17:40:43 -0500] petecheslock: c_t: yea - pretty sure libedit builds fine from ports
[2013-02-06 17:40:59 -0500] petecheslock: give me a cpl days to get my 9.1 freebsd vm up to try again
[2013-02-06 17:41:42 -0500] clayg: I'm having a heck of a time finding a version of net-ssh-multi that I can pull in that doesn't automatically install net-ssh v2.6.5 ???
[2013-02-06 17:42:10 -0500] timsmith: jtimberman: Any chance we're going to see 10.18.4 with a fix for the dependency
[2013-02-06 17:42:38 -0500] c_t: keep meaning to get said box upgraded (it's down at an old workplace), but we also want to get the box itself upgraded
[2013-02-06 17:42:50 -0500] c_t: so I've been putting it off for, erm, years.
[2013-02-06 17:43:10 -0500] jtimberman: timsmith: We're working out a solution
[2013-02-06 17:43:20 -0500] timsmith: cool
[2013-02-06 17:43:41 -0500] timsmith: I was just about to push 10.18.2 to the rest of my production systems via gem.  Didn't really work out like I expected
[2013-02-06 17:44:53 -0500] c_t: jtimberman: if you upgraded octopress, the "Status updating..." thing on your github repos on the sidebar would at last be fixed
[2013-02-06 17:45:23 -0500] garrettux: I upgraded all of production to 10.18.2 like 10 minutes before the net-ssh stuff happened.. got lucky on that one ;)
[2013-02-06 17:46:24 -0500] jtimberman: c_t: indeed.
[2013-02-06 17:46:30 -0500] jtimberman: garrettux: #winning
[2013-02-06 17:46:50 -0500] garrettux: lol
[2013-02-06 17:51:36 -0500] btm: we're working on a release to fix the gem dep issues. stay tuned.
[2013-02-06 17:51:59 -0500] timsmith: thanks btm
[2013-02-06 17:52:32 -0500] timsmith: I'm glad my autoscale nodes are debs
[2013-02-06 17:53:13 -0500] teukka: jtimberman: the ticket links in your blog post are not links =)
[2013-02-06 17:53:20 -0500] awgross: thanks btm
[2013-02-06 17:53:56 -0500] mattray: jtimberman: and now I've been bit by net-ssh
[2013-02-06 17:54:04 -0500] mattray: trying ton install knife-ec2
[2013-02-06 17:55:11 -0500] jkyle: I've been trying to think of a way to do a chef client upgrade that won't blow stuff up too much
[2013-02-06 17:57:07 -0500] awgross: mattray: haha i had jsut installed knife-ec2 and was making sure I could launch my existing machine types, then i got hit by it.  So confused for a while
[2013-02-06 17:57:25 -0500] mattray: awgross: I did a gem install net-ssh-gateway 1.1.0
[2013-02-06 17:57:31 -0500] mattray: awgross: and then it went through
[2013-02-06 17:57:58 -0500] failshell: wow where was i for the last 2 years. i missed gem_package...
[2013-02-06 17:59:20 -0500] mattray: awgross: oh wait, back to the failing
[2013-02-06 17:59:22 -0500] btm: opscode/11-stable branch needs to be tested for an gem issues.
[2013-02-06 18:12:16 -0500] clayg: mattray: awgross: I have net-ssh 2.2.2 and net-ssh-gateway 1.1.0 but I still can't install because net-ssh-multi always seems to want net-ssh 2.6.5 no matter what version I install :\
[2013-02-06 18:12:29 -0500] mattray: clayg: we're working on a fix right now
[2013-02-06 18:14:28 -0500] barnold: question for experts:  Has anyone run into Gem::DependencyError when installing chef on ubuntu?
[2013-02-06 18:15:53 -0500] btm: barnold: yes. A number of gems were recently released with dependencies that are causing problems. we should have an 11.0.2 version of the chef-client out shortly, and then a 10.x thereafter.
[2013-02-06 18:16:09 -0500] barnold: I installed net-ssh-2.6.5, but when I try to install chef, I get Unable to resolve dependencies: chef requires net-ssh (~> 2.2.2)
[2013-02-06 18:16:13 -0500] awgross: jtimberman: your blog post says to use omnibus for install to avoid the net-ssh issue.  I agree that the install works but is it confirmed that it will perform a run?  I know bougyman had issues running chef from omnibus installs.
[2013-02-06 18:16:18 -0500] awgross: barnold: they are working on it
[2013-02-06 18:16:28 -0500] awgross: barnold: was introduced a few hours ago when a new version of net-ssh was run
[2013-02-06 18:16:30 -0500] barnold: awwwww, thanks
[2013-02-06 18:16:33 -0500] awgross: barnold: http://jtimberman.housepub.org/blog/2013/02/06/chef-and-net-ssh-dependency-broken/
[2013-02-06 18:19:25 -0500] jtimberman: updated the post at the top
[2013-02-06 18:20:47 -0500] queso: I'm trying to install Chef 11 Server using the RPM on a vanilla CentOS 6 install and this is what I get: http://dpaste.com/911649/
[2013-02-06 18:23:01 -0500] cg1: queso: i ran into this as well. make sure dns is correct for that host
[2013-02-06 18:23:20 -0500] cg1: or add an entry in the hosts files
[2013-02-06 18:23:32 -0500] queso: cg1: Ah, I bet that's it. Thank you.
[2013-02-06 18:24:02 -0500] jtimberman: queso cg1: can you open a CHEF ticket about that?
[2013-02-06 18:24:45 -0500] queso: jtimberman: Sure, testing to make sure that's the fix first.
[2013-02-06 18:25:02 -0500] coderanger: jtimberman: dwradcliffe just pointed out that in the new runit provider, the service isn't restarted when the script files change, bug?
[2013-02-06 18:25:31 -0500] ExxKA: All of a sudden I cannot install chef on my nodes using rubygems, are anyone else having a similar problem? It fails on dependencies with net-ssh
[2013-02-06 18:25:38 -0500] awgross: ExxKA: http://jtimberman.housepub.org/blog/2013/02/06/chef-and-net-ssh-dependency-broken/
[2013-02-06 18:25:44 -0500] awgross: yes, its widespread
[2013-02-06 18:25:50 -0500] jtimberman: queso: cool, thanks
[2013-02-06 18:25:54 -0500] dwradcliffe: coderanger: actually the script doesn't even update
[2013-02-06 18:25:54 -0500] ExxKA: Thank you awgross
[2013-02-06 18:26:02 -0500] dwradcliffe: coderanger: really two bugs
[2013-02-06 18:26:09 -0500] ExxKA: awgross, Is there an ETA on a fix?
[2013-02-06 18:26:20 -0500] queso: jtimberman: You're welcome
[2013-02-06 18:26:45 -0500] coderanger: dwradcliffe: No, the template resource should kick in correctly
[2013-02-06 18:26:46 -0500] coderanger: It just doesn't restart the service
[2013-02-06 18:26:55 -0500] jtimberman: If youre having trouble w/ chef due to net-ssh dependency, read this for why (were getting a release ASAP to fix) http://jtimberman.housepub.org/blog/2013/02/06/chef-and-net-ssh-dependency-broken/
[2013-02-06 18:27:29 -0500] ExxKA: Thank you jtimberman
[2013-02-06 18:28:02 -0500] ExxKA: I think I will call it a day, there is not much I can do to help with this problem
[2013-02-06 18:28:12 -0500] ExxKA: Good luck with the fix guys!
[2013-02-06 18:28:38 -0500] queso: jtimberman: Where do I submit a ticket? Should I create an account?
[2013-02-06 18:32:17 -0500] coderanger: queso: tickets.opscode.com
[2013-02-06 18:32:48 -0500] dwradcliffe: coderanger: http://tickets.opscode.com/browse/COOK-2353
[2013-02-06 18:33:05 -0500] coderanger: Ahh
[2013-02-06 18:33:12 -0500] coderanger: Yeah, I can see that
[2013-02-06 18:41:28 -0500] gene_: any recommendation on ec2 instance specs for chef server 11? can't find any mention of hardware requirements for chef server 11 on the wiki
[2013-02-06 18:44:05 -0500] j2d3: reading the logs it looks like people are aware of and working on a fix for the gem dependency problem. yay! the problem itself is SCARY, though, because servers bootstrapping themselves up via cloud-formation - in the way I have it set up - cannot come online - cannot bootstrap.
[2013-02-06 18:46:32 -0500] chaosdonkey: jtimberman, I think that if you change the chef dependency from net-ssh-multi ~> 1.1.0 to net-ssh-multi ~> 1.1 it will fix the issue
[2013-02-06 18:47:45 -0500] chaosdonkey: alternatively, if net-ssh-multi admins make a new version 1.1.0, clone of 1.1, it should fix it as well
[2013-02-06 18:47:50 -0500] chaosdonkey: hope this helps
[2013-02-06 18:49:19 -0500] jtimberman: queso: were you able to make a ticket?
[2013-02-06 18:49:30 -0500] jtimberman: chaosdonkey: ya we're working on releasing a fix. :)
[2013-02-06 18:53:12 -0500] queso: jtimberman: http://tickets.opscode.com/browse/CHEF-3837
[2013-02-06 18:53:26 -0500] chaosdonkey: I meant "from net-ssh-multi ~> 1.1.0 to to net-ssh-multi = 1.1"
[2013-02-06 18:56:18 -0500] toioiz: Hi there, question, I had created a basic motd cookbook and uploaded it to the chef box, and it worked fine, but the results weren't what I was expecting, so I went back and changed some of the text (no programming involved) and tried to re-upload it, and now I'm getting "ERROR: TypeError: can't convert Symbol into Integer"
[2013-02-06 18:57:07 -0500] jtimberman: queso: thanks - we may have some followup questions which will probably be comments on the ticket
[2013-02-06 18:57:25 -0500] btm: 11.2.0.rc.1 is up on rubygems, please 'gem install --pre' if you're having gem dependency issues.
[2013-02-06 18:57:27 -0500] queso: jtimberman: Sure, no problem.
[2013-02-06 18:57:55 -0500] cg1: btm: what about 10.x versions of the gem
[2013-02-06 18:58:24 -0500] btm: cg1: that'll come next.
[2013-02-06 18:58:34 -0500] cg1: cool
[2013-02-06 18:58:54 -0500] koblas: having a problem installing chef (it used to work) - the net-ssh ~> 2.2.2 dependancy specifically .. I can't appear to install any 2.2 version of net-ssh.
[2013-02-06 19:00:11 -0500] jtimberman: koblas: Yes, known issue, we're working on getting gems released to fix it. 11.2.0.rc.1 is up on rubygems.org, gem install --pre to install it
[2013-02-06 19:00:31 -0500] koblas: thanks.
[2013-02-06 19:03:50 -0500] flzz: Will the net-ssh fix be release for the 10.18 version of chef?
[2013-02-06 19:11:15 -0500] jtimberman: flzz: yes
[2013-02-06 19:11:30 -0500] jtimberman: flzz: we don't have an eta right now, working on getting 11 done
[2013-02-06 19:11:41 -0500] flzz: k, thanks
[2013-02-06 19:18:43 -0500] toioiz: my thoughts were that it was a ruby syntax error, but ruby -c *; ruby -c */*; ruby -c */*/* all come back 'syntax OK'
[2013-02-06 19:19:46 -0500] superbenk: Isn't it better to fix 10 due to the wider install base?
[2013-02-06 19:19:52 -0500] kallistec: toioiz: need more context. basic issue is that you have an array, and you think it's a hash, so you're doing array[:foo]
[2013-02-06 19:21:23 -0500] tolland: ha!
[2013-02-06 19:21:26 -0500] tolland: so its not just me
[2013-02-06 19:21:48 -0500] alexbst: :-)
[2013-02-06 19:21:50 -0500] toioiz: so, troubleshooting it, I've emptied each of the .rb files in recipies and templates to 0 bytes, and it still errored.
[2013-02-06 19:22:00 -0500] tolland: whats the work around to get a 10.x.x chef installed through gems?
[2013-02-06 19:22:02 -0500] tolland: yes
[2013-02-06 19:22:09 -0500] superbenk: manually install net-ssh
[2013-02-06 19:22:23 -0500] superbenk: 'gem install net-ssh' fixes it
[2013-02-06 19:22:30 -0500] tolland: so i have 2.2.2 conflicting with 2.65
[2013-02-06 19:22:52 -0500] Drewzar: superbenk: That will work to install chef.
[2013-02-06 19:22:55 -0500] Drewzar: Have you tried running it?
[2013-02-06 19:22:56 -0500] tolland: this is a cfn template, so theres no manual about it
[2013-02-06 19:23:09 -0500] alexbst: +1 Drewzar - indeed ;)
[2013-02-06 19:23:12 -0500] superbenk: It's working for me to get my Vagrant Chef server up with 10.18
[2013-02-06 19:23:37 -0500] Drewzar: ah, you're installing the server :P
[2013-02-06 19:24:02 -0500] Drewzar: the chef-client doesn't like it if you just upgrade net-ssh
[2013-02-06 19:24:31 -0500] superbenk: Ah, the client isn't presenting me with the problems
[2013-02-06 19:25:03 -0500] Drewzar: I guess you got a good install before the gem update
[2013-02-06 19:25:11 -0500] Drewzar: of the client, that is.
[2013-02-06 19:27:27 -0500] superbenk: Ya, that makes sense.  The client is installed as part of the base box, we're not bootstrapping
[2013-02-06 19:27:32 -0500] superbenk:  in Vagrant
[2013-02-06 19:32:38 -0500] miah: *cough* https://github.com/mitchellh/vagrant/issues/1355
[2013-02-06 19:33:59 -0500] woodwardjd: hi - chef n00b here.  knife bootstrap 10.211.55.23 -x jdw5 --sudu -d ubuntu12.04-gems    fails with:   Unable to resolve dependencies: net-ssh-gateway requires net-ssh (>= 2.6.5); chef requires net-ssh (~> 2.2.2); net-ssh-multi requires net-ssh (>= 2.6.5)
[2013-02-06 19:34:08 -0500] c_t: they're working on it
[2013-02-06 19:34:15 -0500] woodwardjd: googling didn't serve me well, so I figured I'd ask here if it was a known issue
[2013-02-06 19:34:23 -0500] woodwardjd: if it isn't I'll dig more deeply
[2013-02-06 19:34:33 -0500] otterley: woodwardjd, you need to upload the dependent cookbooks
[2013-02-06 19:34:44 -0500] otterley: i.e. net-ssh >= 2.6.5
[2013-02-06 19:34:50 -0500] kallistec: woodwardjd: known issue
[2013-02-06 19:35:03 -0500] kallistec: otterley: he's getting a failure in the gem install step
[2013-02-06 19:35:04 -0500] doomviking: oh dear
[2013-02-06 19:35:11 -0500] otterley: ah
[2013-02-06 19:35:12 -0500] flzz: http://jtimberman.housepub.org/blog/2013/02/06/chef-and-net-ssh-dependency-broken/
[2013-02-06 19:35:42 -0500] woodwardjd: thanks otterley kallistec fizz !
[2013-02-06 19:35:50 -0500] rjgonza: I am trying to install the ark cookbook from opscode and I am getting this error: Recipe Compile Error in /var/chef/cache/cookbooks/ark/libraries/resource_ark.rb
[2013-02-06 19:36:28 -0500] rjgonza: any idea where I can get more info on why this is crashing
[2013-02-06 19:36:36 -0500] rjgonza: only thing I have is from the chef stack trace
[2013-02-06 19:36:36 -0500] rjgonza: [2013-02-06T14:26:47-05:00] FATAL: NoMethodError: undefined method `attribute' for Chef::Resource::Ark:Class
[2013-02-06 19:37:18 -0500] gene: any recommendation on ec2 instance specs for chef server 11? can't find any mention of hardware requirements for chef server 11 on the wiki
[2013-02-06 19:41:48 -0500] rjgonza: has anyone had issues install the ark cookbook on cent os 5.7 hosts?
[2013-02-06 19:42:03 -0500] miah: gene: its more about, how many clients you have etc
[2013-02-06 19:42:38 -0500] miah: a m1.small will probably work fine. but if you have 10000's of clients you'll want to size accordingly.
[2013-02-06 19:42:59 -0500] mikeg: hey.  does anyone have a quick fix for the net-ssh issue happening today during client install?
[2013-02-06 19:43:05 -0500] miah: a m1.medium would probably be best really
[2013-02-06 19:43:20 -0500] miah: mikeg: yes. use bundler.
[2013-02-06 19:43:33 -0500] miah: quit installing to system rubygems. its a bad practice.
[2013-02-06 19:43:37 -0500] gene: miah : good point. and I'll start with those 2 sizes
[2013-02-06 19:43:39 -0500] gene: thanks
[2013-02-06 19:43:54 -0500] otterley: what's the matter with using system rubygems?
[2013-02-06 19:44:03 -0500] otterley: assuming your Chef server is dedicated to the task
[2013-02-06 19:44:29 -0500] miah: thats fine. but _manage_ your dependencies
[2013-02-06 19:44:36 -0500] gene: miah : hah! you're an islander (alameda) me too =)
[2013-02-06 19:44:38 -0500] miah: make sure you version lock things
[2013-02-06 19:44:44 -0500] miah: gene: awesome =)
[2013-02-06 19:44:46 -0500] queso: After installing the Chef 11 Server RPM and configuring it, how do I enable the webui?  The wiki instructions are out of date now.
[2013-02-06 19:45:02 -0500] miah: i dont know many hax0rs on alameda
[2013-02-06 19:45:06 -0500] mikeg: yeah.   we're working on that.  have internal gems server.  just haven't worked out the details
[2013-02-06 19:45:15 -0500] gene: miah : nor do I
[2013-02-06 19:45:20 -0500] otterley: I think it's up to the gems to manage their own dependencies, and for gem authors to honor semantic versioning correctly
[2013-02-06 19:45:45 -0500] miah: a pal of mine lives here too and he does devopsy stuff at heroku
[2013-02-06 19:46:14 -0500] miah: otterley: putting alot of faith in people to do shit right
[2013-02-06 19:46:21 -0500] otterley: fair point
[2013-02-06 19:46:37 -0500] miah: if people did things correctly we wouldnt have jobs
[2013-02-06 19:46:46 -0500] awgross: haha
[2013-02-06 19:46:59 -0500] miah: 'this software is bug free and setup is a cinch'
[2013-02-06 19:47:01 -0500] gene: miah : a handful of ex-fellow Ask.com folks live on the island
[2013-02-06 19:47:13 -0500] miah: gene: interesting. we should have a meetup
[2013-02-06 19:47:25 -0500] gene: indeed
[2013-02-06 19:47:47 -0500] miah: im @miah_ on the twitts and miah at chia-pet.org
[2013-02-06 19:48:32 -0500] miah: im currently at war with the Influenza
[2013-02-06 19:48:54 -0500] doomviking: the death flu. maybe I should leave the room.
[2013-02-06 19:49:20 -0500] miah: lol
[2013-02-06 19:49:50 -0500] miah: well. i have a fully loaded tamiflu. my shots are hitting the targets. the fight is going well.
[2013-02-06 19:50:23 -0500] mattupstate: coderanger: how reliable would you say PyChef is?
[2013-02-06 19:50:26 -0500] gene: I've somehow avoided the plague so far through this nationwide epidemic
[2013-02-06 19:50:39 -0500] doomviking: I had a flu shot. got it anyway. went nuclear with antibiotics. it sucked, to put it mildly.
[2013-02-06 19:50:52 -0500] timsmith: just lock yourself in a home office and you'll be set
[2013-02-06 19:50:59 -0500] miah: yup. thats what i've done.
[2013-02-06 19:51:12 -0500] miah: mattupstate: i know a few people who are running pychef reliably.
[2013-02-06 19:51:13 -0500] otterley: does anyone know how to shoot a chef server's cookbook cache in the head?
[2013-02-06 19:51:19 -0500] otterley: I'm able to upload cookbooks but not download them
[2013-02-06 19:51:36 -0500] mattupstate: miah: thats good to hear
[2013-02-06 19:52:34 -0500] miah: doomviking: ya. the flu this year.. its horribad. sickest i've been since pneumonia in 2nd grade =)
[2013-02-06 19:53:22 -0500] doomviking: miah: we have next year to look forward to. if we're not all dead. there, thats a happy thought!
[2013-02-06 19:53:46 -0500] leifmadsen: friend of mine got the flu in Brussells while there for FOSDEM
[2013-02-06 19:53:49 -0500] leifmadsen: was in the hospital for 3 days
[2013-02-06 19:55:04 -0500] doomviking: miah: I'm sure you've been flooded with several thousand people telling you their "cures". I found that to get tiresome pretty fast.
[2013-02-06 19:55:19 -0500] miah: ah. no. not really. i just got http://en.wikipedia.org/wiki/Tamiflu
[2013-02-06 19:55:26 -0500] miah: leifmadsen: ouch damn :(
[2013-02-06 19:55:51 -0500] doomviking: oh well then let me unleash my facebook friends list on you
[2013-02-06 19:57:24 -0500] jkyle: nyone have a workaround for this guy yet => http://tickets.opscode.com/browse/CHEF-3835
[2013-02-06 19:57:31 -0500] otterley: ack!  the default omnibus installer now installs Chef 11
[2013-02-06 19:57:44 -0500] miah: doomviking: friends dont let friends facebook
[2013-02-06 19:57:48 -0500] otterley: is there a way to get the last Chef 10 release?
[2013-02-06 19:58:03 -0500] doomviking: miah: yeah yeah :)
[2013-02-06 19:58:14 -0500] awgross: otterley: you can pass -v to the script
[2013-02-06 19:58:26 -0500] awgross: otterley: just means you cant pip it directly to bash it all
[2013-02-06 20:00:38 -0500] jtimberman: jkyle: gem install chef --pre
[2013-02-06 20:00:43 -0500] toioiz: ok, maybe I'm about this the wrong way, if I want a recipe to load something like /mnt/nfs/<%= node.name %> into another file (say /tmp/checkname), what would be the best way to do that? Currently I'm trying to use either File.read or contents (straight ruby) into a .erb template
[2013-02-06 20:00:47 -0500] miah: this is why i version lock my chef. i use omnibus_updater and don't update client until stuff is known stable.
[2013-02-06 20:00:48 -0500] jtimberman: jkyle: we're working to get that released.
[2013-02-06 20:01:10 -0500] miah: but also not using my own chef server at the moment (but i have) so i feel your pain.
[2013-02-06 20:01:30 -0500] jtimberman: miah: even with omnibus, if you install something that depends on chef into the omnibus package's ruby environment, it tries to resolve the dependency and bombs.
[2013-02-06 20:01:31 -0500] coderanger: mattupstate: In terms of what?
[2013-02-06 20:01:47 -0500] miah: jtimberman: interesting :/
[2013-02-06 20:01:48 -0500] coderanger: mattupstate: Its a library, it does what it says it does :)
[2013-02-06 20:01:49 -0500] jtimberman: e.g., I ran into this with installing minitest-chef-handler
[2013-02-06 20:01:59 -0500] otterley: @jtimberman, are you aware of a way I can debug why I'm getting random unexpected EOFs while downloading cookbooks from Chef server?
[2013-02-06 20:02:17 -0500] miah: jtimberman: ouch. do you version lock minitest-chef-handler? =)
[2013-02-06 20:02:27 -0500] miah: or does it not matter?
[2013-02-06 20:02:29 -0500] teukka: awgross, otterley: yes you can: curl -L https://www.opscode.com/chef/install.sh | bash -s -- -v 10.18.2
[2013-02-06 20:02:33 -0500] tolland: so the omni installer is broke as well?
[2013-02-06 20:02:33 -0500] jtimberman: miah: doesn't matter.
[2013-02-06 20:02:35 -0500] heathsnow: :S anyone aware of issue with using knife with --bootstrap-version option?  Always just seems to grab the lastest version.
[2013-02-06 20:02:36 -0500] miah: damn
[2013-02-06 20:02:43 -0500] mattupstate: coderanger: very well then! ;-)
[2013-02-06 20:02:43 -0500] miah: well. im sure yall will have a fix out soon.
[2013-02-06 20:02:49 -0500] otterley: teukka, thanks, I figured it out
[2013-02-06 20:02:50 -0500] jtimberman: tolland: it's fine if you don't install a gem that depends on chef < 11.2
[2013-02-06 20:03:08 -0500] coderanger: mattupstate: The only bit that can be flaky is the autoconfigure system
[2013-02-06 20:03:20 -0500] mattupstate: coderanger: just seems it hasn't seen any updates in a little while so I was curious if there's anything I should know before using it
[2013-02-06 20:03:21 -0500] jtimberman: Yes, we're working on a Chef 11.2.0 release. RC is up if you want to move forward. If you're still staying on Chef 10, we'll have that as soon a we can.
[2013-02-06 20:03:25 -0500] awgross: teukka: awesome
[2013-02-06 20:03:41 -0500] miah: ya. im still on 10.8.something.
[2013-02-06 20:03:47 -0500] coderanger: mattupstate: It tries to parse your knife.rb via regex, and if that fails it tries shelling out to Ruby to dump it as JSON
[2013-02-06 20:03:51 -0500] miah: i havent moved to 11 beause i havent tested all cookbooks
[2013-02-06 20:04:52 -0500] mattupstate: coderanger: i'm successfully using the autoconfigure right now
[2013-02-06 20:05:40 -0500] jkyle: jtimberman: --pre would install the 11.x right?
[2013-02-06 20:05:45 -0500] jtimberman: jkyle: yes
[2013-02-06 20:05:57 -0500] jtimberman: if you're trying to get Chef 10, please wait.
[2013-02-06 20:05:59 -0500] jkyle: hm, I'm still on 10.18
[2013-02-06 20:06:03 -0500] jkyle: k
[2013-02-06 20:06:04 -0500] jtimberman: Sorry about the delay on this.
[2013-02-06 20:06:33 -0500] miah: jtimberman: ya'll are working hard and kicking ass. no need to be sorry :
[2013-02-06 20:06:34 -0500] miah: :P
[2013-02-06 20:06:38 -0500] jtimberman: We want to test thoroughly to make sure this doesn't present further issues.
[2013-02-06 20:06:41 -0500] jtimberman: :)
[2013-02-06 20:07:03 -0500] amccloud: Are we talking about the net-ssh dependency issue here?
[2013-02-06 20:07:09 -0500] jtimberman: amccloud: Yes.
[2013-02-06 20:07:41 -0500] queso: What am I supposed to do after freshly installing the Chef 11 Server RPM and reconfiguring it?
[2013-02-06 20:09:26 -0500] heathsnow: It seems like the windows bootstrap only grabs the latest chef-client?  Anyone familiar with this issue?  Think I'll submit a ticket if not.
[2013-02-06 20:11:21 -0500] jkyle: is there a plugin or configuration for knife to work with hosts behind a proxy? I'm doing it now with ssh_config proxycommand aliases, but it prevents me from being able to use knife ssh on hosts
[2013-02-06 20:12:22 -0500] benblack: anyone from opscode around?
[2013-02-06 20:12:40 -0500] awgross: jkyle:  there is an :ssh_gateway config parameter, unsure if it is from knife-ec2 or just plain knife
[2013-02-06 20:13:59 -0500] awgross: benblack:  i thnk all of the room mods are from opscode
[2013-02-06 20:14:05 -0500] jkyle: awgross: thanks for the keyword (https://github.com/opscode/chef/pull/33)
[2013-02-06 20:14:36 -0500] awgross: np jkyle
[2013-02-06 20:14:50 -0500] benblack: awgross: they aren't, but what i need is someone from opscode who is present
[2013-02-06 20:15:36 -0500] benblack: mattray: are you awake?
[2013-02-06 20:15:45 -0500] gene: miah : thanks again. I'm ( https://plus.google.com/107983849162024127268/about ). Maybe catch you at Lucky 13 sometime
[2013-02-06 20:15:46 -0500] awgross: benblack: hes pretty busy but jtimberman has been dropping updates into the channel recently
[2013-02-06 20:16:11 -0500] mikeg: jtimberman: will the patch make it down to 10.12.0 clients or are we SOL?  We've been talking about upgrade.  are we going to have to do it at gun point?  we're blocked from deploying right now
[2013-02-06 20:16:16 -0500] mattray: benblack: what's up?
[2013-02-06 20:16:38 -0500] benblack: password reset on opscode site always failing for me
[2013-02-06 20:16:51 -0500] benblack: i get the reset email, follow link, enter new password, get error page
[2013-02-06 20:16:57 -0500] benblack: which means i can't open an issue on it
[2013-02-06 20:17:18 -0500] mattray: benblack: gotcha. I'll ping support. What's your username?
[2013-02-06 20:17:33 -0500] benblack: bb
[2013-02-06 20:18:50 -0500] jtimberman: mikeg: i don't know to what extent we'll backport the change, if the 11.2 version is an indication, i believe it will be done as v10.20. btm's working on the release for 11 right now, but maybe he can add some words later.
[2013-02-06 20:19:05 -0500] mattray: benblack: support's looking into it
[2013-02-06 20:19:12 -0500] benblack: mattray: thanks!
[2013-02-06 20:19:33 -0500] mattray: mikeg: does 10.12->10.18 make more sense than a patch to 10.12?
[2013-02-06 20:19:37 -0500] jtimberman: benblack: Is your query / issue with regard to net-ssh gem dependency preventing Chef gem installation?
[2013-02-06 20:20:03 -0500] mikeg: ok.  seems the fix is just to lock chef in with     net-ssh-multi => 1.1.0 instead of net-ssh-multi ~> 1.1.0
[2013-02-06 20:20:28 -0500] mikeg: yes.  hate doing it under these conditions but we'll do what we have to to fix the issue
[2013-02-06 20:20:58 -0500] mikeg: We're looking to modify the 10.12.0 gem ourselves.  just don't know if what I said above about net-ssh-multi will resolve the issue
[2013-02-06 20:21:00 -0500] awgross: jtimberman: it wasnt, mattray got benblack straightened
[2013-02-06 20:21:12 -0500] benblack: jtimberman: no
[2013-02-06 20:23:09 -0500] bcg62: anyone using supervisor to manage services? I cant seam to get the lwrp's from the supervisor cookbook to work
[2013-02-06 20:23:29 -0500] mikeg: sorry.  net-ssh-gateway, not multi.
[2013-02-06 20:27:16 -0500] jtimberman: ok :)
[2013-02-06 20:27:27 -0500] awgross: when using chef-omnibus is it still valid to have a chef run update its version using the chef_gem method?
[2013-02-06 20:30:33 -0500] mattray: Chef 11.2.0 gem up on Rubygems
[2013-02-06 20:41:03 -0500] igor47: can someone please answer this question: http://stackoverflow.com/questions/14738364/chef-11-any-way-to-turn-attributes-into-a-ruby-hash
[2013-02-06 20:41:15 -0500] zachallett: is there a way to re-register a node to a new chef server that has the same exact chef environment without needing to rebootstrap the servers?/
[2013-02-06 20:41:21 -0500] igor47: i'll love you forever and mail you beer
[2013-02-06 20:42:22 -0500] jkyle: k, so playing around with knife --ssh-gateway, I'm trying to replicate the behavior of this ssh_config file: https://gist.github.com/jameskyle/4725590. got examples in the gist of what I tried and the failure message
[2013-02-06 20:42:56 -0500] seanhorn1: benblack: Ok, thanks. Checking it out Wrong chan before
[2013-02-06 20:44:29 -0500] otterley: what's weird is that even if I manually loaded the net-ssh* gems with specific versions, gem automatically tries to upgrade them and fails the version constraints
[2013-02-06 20:44:31 -0500] btm: igor47: you'll find more help on the mailing list: lists.opscode.com/sympa/info/chef
[2013-02-06 20:44:38 -0500] otterley: i.e., gem is dumb
[2013-02-06 20:44:58 -0500] benblack: seanhorn1: thanks
[2013-02-06 20:50:38 -0500] btm: the net-ssh folks are actively uploading gems and yanking ones they uploaded a bit ago.
[2013-02-06 20:50:50 -0500] dwradcliffe: https://github.com/net-ssh/net-ssh/issues/80#issuecomment-13204303
[2013-02-06 20:54:12 -0500] igor47: btm: thanks, subscribed and posted
[2013-02-06 20:55:31 -0500] benblack: seanhorn1: i am dropping off for a while, please email me at the address on my account if there are any updates. thanks!
[2013-02-06 20:57:30 -0500] fromonesrc: what is the current workaround for the net-ssh problem?
[2013-02-06 21:00:11 -0500] jtimberman: fromonesrc: we've released chef 11.2.0 to rubygems, omnibus packages will be coming available after they finish building.
[2013-02-06 21:00:36 -0500] jtimberman: fromonesrc: there's an RC of chef 10.18.4.rc.1 (gem install chef --pre --version 10.18.4.rc.1)
[2013-02-06 21:00:37 -0500] fromonesrc: weird, I just pulled 11.2 and was still seeing net-ssh errors
[2013-02-06 21:00:42 -0500] jtimberman: what errors?
[2013-02-06 21:01:05 -0500] jtimberman: remove any net-ssh* gems and reinstall chef gem?
[2013-02-06 21:01:37 -0500] fromonesrc: ec2-184-73-137-167.compute-1.amazonaws.com ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
[2013-02-06 21:01:37 -0500] fromonesrc: ec2-184-73-137-167.compute-1.amazonaws.com     bad response Not Found 404 (http://production.cf.rubygems.org/gems/net-ssh-multi-1.2.0.gem)
[2013-02-06 21:02:07 -0500] btm: fromonesrc: that's because rubygems.org is effed, not because of dependencies.
[2013-02-06 21:02:36 -0500] btm: fromonesrc: I've seen that too. some of the cloudfront systems are good, others are broken.
[2013-02-06 21:03:14 -0500] jtimberman: I was able to install Chef 11.2.0 on a system w 0 gems: https://gist.github.com/jtimberman/9900a44675cd41ca8d1b
[2013-02-06 21:05:44 -0500] btm: recipe[wordpress] ran fine on 10.18.4.rc.1, testing a server build out now.
[2013-02-06 21:05:54 -0500] alexbst: https://www.youtube.com/watch?v=sY_Yf4zz-yo
[2013-02-06 21:07:46 -0500] mting923: Hi there
[2013-02-06 21:08:02 -0500] mting923: Anyone know how to use Chef to install datadog on Windows servers (2008 R2) ?
[2013-02-06 21:08:18 -0500] mting923: I found the datadog cookbook is only work for Linux?
[2013-02-06 21:10:29 -0500] werdnativ: Anyone using librarian, does it depend on a certain version of rubygems?
[2013-02-06 21:10:38 -0500] werdnativ: I'm getting this error: https://gist.github.com/avit/31c17e891fccb1c49a98
[2013-02-06 21:11:11 -0500] werdnativ: it hits here: https://github.com/applicationsonline/librarian/blob/master/lib/librarian/dependency.rb#L10
[2013-02-06 21:12:09 -0500] werdnativ: looks like it's passing my Cheffile into Gem::Requirement, not sure how that's supposed to work...
[2013-02-06 21:24:54 -0500] njero: hey all, I am having an issue after upgrading to 11.2. I keep getting "Cannot find a resource for autoconf_install on ubuntu version 10.04". The lwrp is there and was working in earlier versions. Is this common?
[2013-02-06 21:25:22 -0500] jtimberman: njero: are you using chef-solo, and what was your previous version?
[2013-02-06 21:26:00 -0500] njero: yeah, I was using chef-solo. I have tried multiple previous but it works well if I use anything < 11.0
[2013-02-06 21:26:07 -0500] njero: thanks jtimberman
[2013-02-06 21:26:57 -0500] jtimberman: njero: in the cookbook where you're using 'autoconf_install', you'll need to set a dependency on 'autoconf' in the metadata.
[2013-02-06 21:27:04 -0500] njero: a
[2013-02-06 21:27:06 -0500] njero: *ah
[2013-02-06 21:27:07 -0500] jtimberman: or put the autoconf recipe in your run list
[2013-02-06 21:27:16 -0500] jtimberman: the reason is because of the load ordering that chef does in v11
[2013-02-06 21:28:20 -0500] njero: that makes a lot of sense... I am also seeing that I don't have a supports os in the metadata of that lwrp
[2013-02-06 21:33:54 -0500] btm: 10.18.4.rc.2 increases em-http-requests + eventmachine for chef-expander. pushing to rubygems.org now for testing.
[2013-02-06 21:34:05 -0500] btm: njero: supports is not a required field by chef.
[2013-02-06 21:34:20 -0500] btm: njero: it is currently a documentation field.
[2013-02-06 21:34:29 -0500] matti: btm: gen install chef for 10.18.2 fails with net-ssh-* family gems dependencies.
[2013-02-06 21:34:52 -0500] matti: btm: We require net-ssh 2.2.2 for 10.18.2, but net-ssh-gateway/multi is trying to pull 2.6.5
[2013-02-06 21:34:59 -0500] matti: btm: And everything explodes.
[2013-02-06 21:35:00 -0500] btm: matti: correct, that is why we're releasing 10.18.4
[2013-02-06 21:35:04 -0500] matti: Ah.
[2013-02-06 21:35:19 -0500] matti: I just turn all Gems for 10.18.2 into Debian packages ;d
[2013-02-06 21:35:24 -0500] matti: And you are pushing .4 ;p
[2013-02-06 21:35:28 -0500] matti: WHYY hahaha
[2013-02-06 21:36:30 -0500] derks: Can anyone tell me how to properly do a query like this: "knife search node 'chef_environment:staging AND role[app_server]'"
[2013-02-06 21:36:34 -0500] njero: btm: yeah I ran into the ssh problem and followed this set http://stackoverflow.com/a/14738173/700536
[2013-02-06 21:36:35 -0500] cllvelo: sounds like the net-ssh dependency was fixed and pushed to rubygems.org
[2013-02-06 21:36:37 -0500] derks: I get an error doing that
[2013-02-06 21:36:48 -0500] matti: cllvelo: Yeah.
[2013-02-06 21:38:16 -0500] otterley: is there a "knife client from file" equivalent?
[2013-02-06 21:38:20 -0500] derks: anyone?
[2013-02-06 21:38:53 -0500] danryan: derks: 'chef_environment:staging AND role:app_server'
[2013-02-06 21:39:51 -0500] btm: 10.18.4.rc.2 up for testing.
[2013-02-06 21:39:51 -0500] derks: nice
[2013-02-06 21:39:56 -0500] derks: danryan
[2013-02-06 21:39:57 -0500] josh-k: hey guys
[2013-02-06 21:40:18 -0500] danryan: derks: that work for you?
[2013-02-06 21:40:28 -0500] josh-k: i just had a question question
[2013-02-06 21:40:54 -0500] josh-k: when you do an include_recipe inside another recipe, does that also load the default attributes for that included recipe?
[2013-02-06 21:41:27 -0500] otterley: josh-k, yes
[2013-02-06 21:41:28 -0500] awgross: josh-k the attributes get loaded when chef is loading all the required dependencies (by reading the metadata.rb)
[2013-02-06 21:41:54 -0500] btm: josh-k: on chef 11, you want to make the cookbook a dependency of the other cookbook in the metadata. that will load the attributes before the depending cookbook.
[2013-02-06 21:42:02 -0500] derks: danryan, yeah... that worked.  thanks
[2013-02-06 21:42:22 -0500] danryan: derks: sweet, I can never remember if it's 'role' or 'roles' :)
[2013-02-06 21:42:28 -0500] josh-k: otterley: awgross: btm: thanks
[2013-02-06 21:42:37 -0500] josh-k: btm: ah, ok, this is a recent change in 11 then
[2013-02-06 21:43:15 -0500] derks: danryan, is there also a way I can tell those nodes to run chef from the search query?  Like, the result of that query, I want those nodes to run chef-client
[2013-02-06 21:43:18 -0500] btm: josh-k: the dependency requirement in 11 came from the new ordered loading of cookbook segments, whereas before 11 it was a bit random.
[2013-02-06 21:43:28 -0500] otterley: derks, wait, what?
[2013-02-06 21:43:35 -0500] josh-k: btm: so what if i have a recipe which isn't a requirment for all recipes within a group (eg. mysql) but is for one of the recipes
[2013-02-06 21:43:45 -0500] btm: derks: knife ssh QUERY sudo chef-client
[2013-02-06 21:43:52 -0500] danryan: derks: ^
[2013-02-06 21:44:07 -0500] josh-k: btm: eg. we have server and server_on_ramfs, ramfs recipe is only a requirement for server_on_ramfs
[2013-02-06 21:44:32 -0500] btm: josh-k: uh, server_on_ramfs should dpened on ramfs?
[2013-02-06 21:44:38 -0500] otterley: I ask again: is there a way to reimport chef client data from files?
[2013-02-06 21:45:03 -0500] btm: josh-k: I'm not sure what your asking. Chef 11 loads cookbooks in run_list order, but will load dependencies before the cookbooks that depend on them.
[2013-02-06 21:45:28 -0500] njero: jtimberman: adding the depends and the dependencies node in the json didn't help. Still get the error
[2013-02-06 21:45:34 -0500] josh-k: btm: sorry, i know this is a bit vague
[2013-02-06 21:45:45 -0500] josh-k: btm: we have a set of recipes for mysql
[2013-02-06 21:45:45 -0500] derks: danryan, brm: I think that would work except that it seems to use the node name, not the FQDN to ssh?
[2013-02-06 21:46:11 -0500] danryan: derks:     -a, --attribute ATTR             The attribute to use for opening the connection - default depends on the context
[2013-02-06 21:46:23 -0500] josh-k: btm: one being 'server' and another being 'server_on_ramfs' which uses server and a ramfs recipe
[2013-02-06 21:46:27 -0500] danryan: derks: from `knife ssh --help`
[2013-02-06 21:46:42 -0500] derks: danryan, fuck yeah!  that did it
[2013-02-06 21:46:52 -0500] danryan: derks: :D
[2013-02-06 21:47:12 -0500] pwelch: so is everyone mainly using the opscode users cookbook for user management?
[2013-02-06 21:47:26 -0500] pwelch: just curious if thats the popular one of if people are using something else
[2013-02-06 21:47:26 -0500] josh-k: btm: i was just wondering if i should add 'ramfs' as a 'depends' on in the mysql metadata file, or if there is a way to make it specifc to mysql/recipes/server_on_ramfs only
[2013-02-06 21:48:14 -0500] btm: josh-k: oh, recipes, no, it is a cookbook based dependency, not recipe based. it has to be in there if you plan on using a recipe which uses it.
[2013-02-06 21:48:24 -0500] njero: jtimberman: this is the stacktrace if it helps at all https://gist.github.com/jeffrafter/e187da2a708bc997b3d7
[2013-02-06 21:49:28 -0500] josh-k: btm: ok, awesome to know, thanks for the help :)
[2013-02-06 21:50:27 -0500] btm: some day we'd like to add support for dependencies to switch on platforms though.
[2013-02-06 21:51:03 -0500] njero: btm: did you see the problem I was talking with jtimberman about?
[2013-02-06 21:51:34 -0500] btm: njero: no
[2013-02-06 21:52:30 -0500] balgarath: trying to get knife-rackspace to work...did a gem install, put credentials in knife.rb...any knife rackspace command gives me:  /usr/local/lib/ruby/1.9.1/rubygems.rb:238:in `activate': can't activate net-ssh (>= 2.6.5, runtime) for ["net-ssh-gateway-1.1.2", "net-ssh-multi-1.1", "chef-11.0.0"], already activated net-ssh-2.2.2 for ["chef-11.0.0"] (Gem::LoadError)
[2013-02-06 21:52:44 -0500] balgarath: google hasn't been any help(yet). any of you ran into this problem?
[2013-02-06 21:52:47 -0500] njero: btm: in 11.2 (not in < 11) using chef-solo I get a new error loading an lwrp (autoconf_install) inside of my imagemagick recipe: https://gist.github.com/jeffrafter/e187da2a708bc997b3d7
[2013-02-06 21:53:46 -0500] njero: btm: I added a depends "autoconf" and a dependencies node in the metadata for imagemagick cookbook. But it didn't help
[2013-02-06 21:54:25 -0500] jkyle: I've been checking back periodically on the status of the net-ssh bug, maybe that could be put in the topic? seems to be dominating discussions :)
[2013-02-06 21:54:42 -0500] njero: jkyle: a new gem was just pushed to rubygems
[2013-02-06 21:54:49 -0500] jkyle: 11.x or 10.18.x?
[2013-02-06 21:55:03 -0500] njero: 10.18.4
[2013-02-06 21:55:06 -0500] njero: I think
[2013-02-06 21:55:09 -0500] njero: but it might be .rc2
[2013-02-06 21:55:10 -0500] jkyle: awesome, let me check it out
[2013-02-06 21:55:17 -0500] njero: btm just commented on it
[2013-02-06 21:55:21 -0500] e-vad: running into a bit of a headache on 11.x - Chef encountered an error attempting to create the client "ubuntu" / [2013-02-06T13:51:05-08:00] FATAL: OpenSSL::PKey::RSAError: private key needed.
[2013-02-06 21:55:39 -0500] mattray: e-vad: gist?
[2013-02-06 21:55:53 -0500] btm: njero: 10.x doesn't use the same load order. are you using 'include_attribute' ?
[2013-02-06 21:55:56 -0500] e-vad: tis the first chef-client run, validation.pem is in /etc/chef/
[2013-02-06 21:56:13 -0500] e-vad: owned by root/root w/ 744 perms
[2013-02-06 21:56:14 -0500] njero: btm, I am not... I can give that a shot
[2013-02-06 21:56:17 -0500] e-vad: client.rb points at it
[2013-02-06 21:56:24 -0500] e-vad: mattray: per the twitter convo
[2013-02-06 21:56:29 -0500] mattray: yeah
[2013-02-06 21:57:50 -0500] e-vad: so, server and client installed just fine, copied validation.pem down to /etc/chef/ and then attempted to run chef-client to generate the client.pem stuffs, that's the first bit it gives me... let me find one of those paste services
[2013-02-06 21:57:54 -0500] mattray: could you double check that it's the right validation key?
[2013-02-06 21:58:04 -0500] mattray: md5 it?
[2013-02-06 21:58:05 -0500] jkyle: 10.18 stil at 10.18.2
[2013-02-06 21:58:53 -0500] balgarath: sweet, gem installing the newest chef gets rid of net-ssh problems
[2013-02-06 21:59:06 -0500] otterley: isn't Omnibus chef supposed to install ruby-shadow?
[2013-02-06 21:59:08 -0500] e-vad: mattray: http://pastebin.com/hBzCdU5U
[2013-02-06 22:00:32 -0500] mattray: e-vad: that's typically from a corrupted validation.pem
[2013-02-06 22:01:01 -0500] e-vad: mattray: ... hrmm, it was copy/pasta from the server window... where else might one find/download said file?
[2013-02-06 22:01:20 -0500] mattray: it's on the server itself
[2013-02-06 22:01:36 -0500] mattray: copy and paste is a frequent cause of issues
[2013-02-06 22:02:31 -0500] petenerd: Can someone point me to some Chef Windows resources?  I'm having trouble with "notifies" to restart services and can't seem to get it to work.
[2013-02-06 22:03:07 -0500] jkyle: ah, looks like 10.18.2 is fixed
[2013-02-06 22:03:45 -0500] njero: jkyle: a fresh install is still broken
[2013-02-06 22:04:04 -0500] njero: jkyle: you can do this though http://stackoverflow.com/a/14738173/700536
[2013-02-06 22:04:45 -0500] btm: 10.20.0 is now up with gem dependency fixes.
[2013-02-06 22:05:05 -0500] StormSilver: btm: Woohoo!!!
[2013-02-06 22:05:09 -0500] e-vad: on the server itself you say...
[2013-02-06 22:06:16 -0500] cllvelo: @jkyle @njero  that has been my experience:
[2013-02-06 22:06:17 -0500] cllvelo:   freshly installing 10.18.2 still fails, but the work-around from StackOverflow seems to be working
[2013-02-06 22:06:29 -0500] njero: yeah same
[2013-02-06 22:06:47 -0500] njero: cllvelo, jkyle: see 10.20.0
[2013-02-06 22:06:50 -0500] jtimberman: cllvelo: it'll be 10.18.4, not 10.18.2
[2013-02-06 22:07:11 -0500] jrclouda: What happened today?
[2013-02-06 22:07:40 -0500] bougyman: net-ssh blew up
[2013-02-06 22:07:46 -0500] Drewzar: net-ssh gems well
[2013-02-06 22:07:52 -0500] jtimberman: jrclouda: http://tickets.opscode.com/browse/CHEF-3835 - summary here: http://jtimberman.housepub.org/blog/2013/02/06/chef-and-net-ssh-dependency-broken/
[2013-02-06 22:08:06 -0500] bougyman: oh
[2013-02-06 22:08:19 -0500] bougyman: i still have too many things pulling in 2.6.4, cllvelo
[2013-02-06 22:08:31 -0500] jrclouda: perfect, that's what bit me, thank you jtimberman
[2013-02-06 22:08:33 -0500] bougyman: we use a lot of extra chef gems
[2013-02-06 22:08:54 -0500] bougyman: i guess we do ignore deps on them, because they are all happily installed next to each other.
[2013-02-06 22:08:56 -0500] e-vad: hrmm... it doesn't seem they got created into /etc/chef during the install, also not finding chef-server on the system... perhaps i broke something else :-\
[2013-02-06 22:08:59 -0500] cllvelo: @Jtimberman  thanks for the blog link
[2013-02-06 22:09:01 -0500] bougyman: when chef launches, they all conflict.
[2013-02-06 22:10:28 -0500] fromonesrc: net-ssh-multi is resolving for me now https://rubygems.org/downloads/net-ssh-multi-1.2.0.gem
[2013-02-06 22:13:17 -0500] jforce: `echo -e "source :rubygems\ngem 'chef'" > Gemfile && bundle`  that'll get you up and running if you've been bitten by the net-ssh dependency problem. :)
[2013-02-06 22:17:05 -0500] josh-k: btm: chef 11 is a lot more strict on its cookbook checks, is there a way to dial it down a bit? it seems we have issues galore right now but i would prefer to fix them later :)
[2013-02-06 22:17:24 -0500] btm: josh-k: what do you mean cookbook checks?
[2013-02-06 22:18:12 -0500] josh-k: well, chef 11 is giving me ImmutableAttributeModification errors in places I have never had them before
[2013-02-06 22:18:36 -0500] josh-k: is there a way to use chef 10 behaviour where it wouldn't care?
[2013-02-06 22:18:43 -0500] jtimberman: josh-k: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-02-06 22:19:23 -0500] josh-k: thanks jtimberman
[2013-02-06 22:20:52 -0500] josh-k: jtimberman: the riak cookbook we are using uses node.riak.delete(:bitcask) which causes that error to be throw, what would be the preferred syntax?
[2013-02-06 22:22:32 -0500] btm: josh-k: when chef 11 throws attribute errors, it's not a warning. its an error. if you don't want to fix them you need to downgrade.
[2013-02-06 22:23:06 -0500] e-vad: mattray: it seems said things are not created when i run the omnibus installer. I'll give it another shot when I get home, however
[2013-02-06 22:23:14 -0500] josh-k: btm: can't downgrade due to net-ssh and net-scp and net-ssh-multi screwing up their dep versions
[2013-02-06 22:23:40 -0500] mattray: e-vad: good luck, feel free to hop back in here
[2013-02-06 22:24:21 -0500] StormSilver: btm: 10.20.0 worked great for me on a fresh install
[2013-02-06 22:24:51 -0500] e-vad: will do, thanks for the help so far.
[2013-02-06 22:25:32 -0500] jkyle: njero: thanks
[2013-02-06 22:25:53 -0500] josh-k: btm: so what should node.riak.delete(:bitcask) change to in this case? just node.riak.bitcask = nil ?
[2013-02-06 22:26:36 -0500] jtimberman: josh-k: node.set['riak'].delete('bitcask')
[2013-02-06 22:26:51 -0500] josh-k: ahhh, ok, awesome, thank you :)
[2013-02-06 22:26:54 -0500] otterley: node['riak'] doesn't work anymore?
[2013-02-06 22:27:25 -0500] brucejdavis: Hello world.
[2013-02-06 22:27:26 -0500] jtimberman: otterley: not to modify the attribute.
[2013-02-06 22:27:33 -0500] otterley: but to reference it
[2013-02-06 22:27:38 -0500] jtimberman: to reference yes
[2013-02-06 22:27:41 -0500] otterley: ah, ok
[2013-02-06 22:27:47 -0500] jtimberman: node['riak'], node[:riak] and node.riak all still work.
[2013-02-06 22:27:55 -0500] otterley: anyone who used node['foo'] = 'bar' in a recipe was an idiot anyway
[2013-02-06 22:27:58 -0500] jtimberman: though the first is the prettiest bikeshed color
[2013-02-06 22:28:22 -0500] brucejdavis: I need help with pulling attribute values out of a role where that attribute is set
[2013-02-06 22:28:27 -0500] brucejdavis: from within a recipe
[2013-02-06 22:28:45 -0500] brucejdavis: Then add these attribute values to an array
[2013-02-06 22:28:53 -0500] jtimberman: otterley: it's fairly common pattern though, because that's how you'd do a normal ruby hash.
[2013-02-06 22:29:21 -0500] brucejdavis: is it possible to search all roles for the attributes and pull the attribute values?
[2013-02-06 22:29:36 -0500] otterley: jtimberman, but then it leads to surprising behavior because such syntax would have overridden any defaults set in the nodes and roles
[2013-02-06 22:29:46 -0500] otterley: I banished its use here months ago
[2013-02-06 22:30:05 -0500] pignata: hi - i notice this ticket has been dormant for a while (https://tickets.opscode.com/browse/CHEF-3525) -- is there a plan to release an installer update for Ubuntus 12.10 and 13.04?
[2013-02-06 22:30:11 -0500] jtimberman: otterley: good plan :)
[2013-02-06 22:30:36 -0500] otterley: jtimberman, it's good that Chef 11 enforces it now
[2013-02-06 22:30:47 -0500] jtimberman: :)
[2013-02-06 22:31:42 -0500] otterley: is it possible to replace Chef server's public keys for clients?
[2013-02-06 22:31:57 -0500] otterley: I can't seem to get it to work even by doing a knife client edit and putting a new key in.  it basically ignores it
[2013-02-06 22:32:54 -0500] otterley: I'm going to be incredibly stabby if I can't restore my clients
[2013-02-06 22:56:39 -0500] brucejdavis: Is it possible to search all roles for an attributes and get the attribute values from within a recipe, then add these attribute values to an array?
[2013-02-06 23:09:09 -0500] pignata: Ah, I see, I can specify a different distribution.
[2013-02-06 23:27:10 -0500] woodwardjd: me again - chef n00b - ok to ask here for specific support question?  it involves two recipes that seem to be executed out of expected order
[2013-02-06 23:30:30 -0500] mi_wood:  anyone know where I can find a chef-server bootstrap tar for an earlier release (chef 10)?
[2013-02-06 23:30:59 -0500] mi_wood: it looks like "latest" points to the new 11 release
[2013-02-06 23:38:34 -0500] btm: mi_wood: the bootstrap directions on the wiki and the tarball there are for Chef 0.10 only.
[2013-02-06 23:38:51 -0500] btm: mi_wood: make sure you don't use chef-solo from chef-11 to run it.
[2013-02-06 23:41:05 -0500] ryduh: I'm using knife to manage cookbooks and I installed the redis cookbook from the opscode site with knife cookbook site install redis but it needs metachef which is throwing syntax errors. i want to switch to a github redis cookbook so I need to delete my current redis cookbook. i'm using chef solo and not the server. how can i remove the cookbook that knife added?
[2013-02-06 23:41:57 -0500] mi_wood: btm: thanks, my other machines have solo 10.12. didn't realize this one was up to date
[2013-02-06 23:46:02 -0500] ryduh: any ideas?
[2013-02-06 23:47:52 -0500] jkyle: I'm trying to get a list of all clients that haven't been upgraded to 10.20.0
[2013-02-06 23:48:11 -0500] jkyle: this is my query => "NOT chef_packages_chef_version:10.20.0", but this is returning clients whose chef_packages.chef.version attribute is 10.20.0
[2013-02-06 23:48:17 -0500] jkyle: as well as those that are not
[2013-02-06 23:48:35 -0500] shennyg: I'm running librarian-chef & vagrant + ec2 and wanted to see if there is a good way to automatically swap between local and cloud environments. here is my Cheffile: https://gist.github.com/shennyg/8fd15998454d2f692a9e I alternate between commenting them out depending on what I'm trying to run(vagrant locally or ec2 via the github repo). Does anyone do
[2013-02-06 23:48:35 -0500] shennyg: anything similar?
[2013-02-06 23:49:04 -0500] jkyle: shennyg: knife-block
[2013-02-06 23:50:06 -0500] ryduh: shennyg: i moved my chef config from my vagrant file into a dna.json file
[2013-02-06 23:50:34 -0500] ryduh: i kept my local chef config in the vagrant file and merged it with the dna.json
[2013-02-06 23:50:45 -0500] ryduh: i have an additional recipe for my local stuff
[2013-02-06 23:50:45 -0500] btm: jkyle: have you run chef-client on the systems you upgraded to 10.20.0 to force a node.save?
[2013-02-06 23:53:51 -0500] bougyman: hrm
[2013-02-06 23:54:05 -0500] woodwardjd: are the recipes in a run_list on a node applied 0, 1, 2, ...  or  ... 2, 1, 0
[2013-02-06 23:54:08 -0500] bougyman: i have an omnibus chef (10.18.2) that's having the pg problem.
[2013-02-06 23:54:11 -0500] bougyman: is there a workaround?
[2013-02-06 23:54:19 -0500] bougyman: on ubuntu 12.04
[2013-02-06 23:55:15 -0500] woodwardjd: I have a test node with just two things in the run_list   recipe[build-essential]   and   recipe[postgresql::ruby].      when listed with b-e first,  p::r runs first, and when p::r is in slot 0, b-e runs first (manually running chef-client with debug logging, inspecting INFO: Processing lines)
[2013-02-06 23:55:34 -0500] jkyle: btm: should have, my command included a chef-client run and I just did a restart chef-client for the upstart job
[2013-02-06 23:57:29 -0500] shennyg: jkyle: thanks. that may work I will look into it.
[2013-02-06 23:57:53 -0500] shennyg: I'm more looking to see if there is any conditional syntax for a Cheffile.
[2013-02-06 23:58:35 -0500] shennyg: ryduh: I used to do separate recipes for local/cloud but I'm trying this out now and am almost there.
[2013-02-06 23:58:36 -0500] btm: jkyle: usually that stuff is that it hasn't gone through solr yet.

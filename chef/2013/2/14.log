[2013-02-14 00:06:20 -0500] desktophero: run list updated ... what's the default time for the runlist to be evaluated on the chef client - for follow up action? 30 minutes? less?
[2013-02-14 00:07:01 -0500] log1kal: Isn't it on next chef-client run?
[2013-02-14 00:07:13 -0500] log1kal: (which shoud be configured on your own interval)
[2013-02-14 00:07:38 -0500] doomviking: if its automated at all
[2013-02-14 00:08:29 -0500] desktophero: hmmm
[2013-02-14 00:09:04 -0500] desktophero: back to the wiki then ... "automating" the chef-client run. cron?
[2013-02-14 00:16:21 -0500] desktophero: oh ... default interval = 1800 seconds for chef client. Dropping that in client.rb
[2013-02-14 00:32:30 -0500] otterley: hey jtimberman, there's a bug in the runit cookbook - if the run or log/run templates change, the cookbook doesn't apply them if the file already exists
[2013-02-14 00:35:16 -0500] hippiehacker: josephholsten: avoided the pki madness by creating a databagitem_key databag with the symetric key encrypted to the public keys of all the nodes/clients returned from the search
[2013-02-14 00:35:17 -0500] drgage: is runit the official process supervisor for chef? i was surprised to see that the memcached cookbook requires it.
[2013-02-14 00:35:36 -0500] otterley: I wouldn't call it "official" ...
[2013-02-14 00:35:44 -0500] hippiehacker: https://gist.github.com/hh/4949041 # dynamically creating symetric keys for encrypted data bag used based on node searches
[2013-02-14 00:47:51 -0500] cwj: hippiehacker: very interesting, thank you
[2013-02-14 00:59:28 -0500] miah: its not official, but lots of things use it.
[2013-02-14 00:59:40 -0500] miah: ideally it should be optional and user selected.
[2013-02-14 00:59:44 -0500] miah: making assumptions is bad.
[2013-02-14 01:19:33 -0500] mconigliaro: anyone want to give me some feedback on my latest crazy idea? :-) http://community.opscode.com/questions/275
[2013-02-14 01:26:46 -0500] jinb: Is there a quick command to lookup the chef's version?
[2013-02-14 01:38:31 -0500] jtimberman: drgage: it's my preferred process supervision system.
[2013-02-14 01:38:41 -0500] jtimberman: it's dead simple :)
[2013-02-14 01:39:12 -0500] jtimberman: the bit about the run scripts in the runit_service rsource is a known bug.
[2013-02-14 01:39:43 -0500] jtimberman: http://tickets.opscode.com/browse/COOK-2353
[2013-02-14 02:00:39 -0500] drgage: jtimberman: ok, good to know. i'd wondered which to pick between runit upstart monit god forever daemontools etc etc, so your preference will likely influence my decision.
[2013-02-14 02:01:20 -0500] jtimberman: drgage: http://jtimberman.housepub.org/blog/2012/12/29/process-supervision-solved-problem/
[2013-02-14 02:01:29 -0500] jtimberman: my "dissertation" on the subject :)
[2013-02-14 02:01:47 -0500] drgage: awesome :)
[2013-02-14 02:07:53 -0500] desktophero: ty for the link @jtimberman
[2013-02-14 02:14:27 -0500] josephholsten: I still don't understand why fedora & ubuntu like upstart/systemd over runit/s6
[2013-02-14 02:24:59 -0500] jtimberman: josephholsten: me either
[2013-02-14 02:40:42 -0500] josephholsten: this is terrible
[2013-02-14 02:41:28 -0500] josephholsten: this server requires each replica to have a key set up for replication
[2013-02-14 02:42:29 -0500] josephholsten: I can have the master prepare keys for every replica, either via node or data bag discovery. but there's no sane way to push those keys back into chef.
[2013-02-14 02:46:22 -0500] jtimberman: josephholsten: can you IO.read that key and stick it in a data bag in the recipe?
[2013-02-14 02:46:53 -0500] josephholsten: pretty sure the node's client requires the admin bit on for that
[2013-02-14 02:47:24 -0500] josephholsten: that's what I'm doing atm, but I want this to be reusable. and I feel uncomfortable encouraging strangers to do that.
[2013-02-14 02:48:06 -0500] josephholsten: https://github.com/josephholsten/ipa_server_cookbook/blob/master/recipes/default.rb#L28
[2013-02-14 02:53:08 -0500] jtimberman: yeah, it does require admin for that in the open source chef server
[2013-02-14 03:07:29 -0500] spencerowen: Hey All, has anyone tried chef 11 on mac os x 10.8? I'm getting an error when I run knife client list
[2013-02-14 03:08:16 -0500] coderanger: spencerowen: Can you be more specific about the error?
[2013-02-14 03:08:17 -0500] ranjibd: spencerowen, chef minor version and error ?
[2013-02-14 03:08:47 -0500] spencerowen: knife chef list > /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-authentication-1.3.0/lib/mixlib/authentication/signedheaderauth.rb:120:in `canonical_path': undefined method `gsub' for nil:NilClass (NoMethodError)
[2013-02-14 03:09:13 -0500] spencerowen: knife -v -> 11.4.0
[2013-02-14 03:10:33 -0500] coderanger: Without actually checking the code, look if your knife.rb has any rogue null values
[2013-02-14 03:14:50 -0500] jtimberman: knife from chef 11.4.0 on os x 10.8 is working for me.
[2013-02-14 03:15:40 -0500] coderanger: jtimberman: Got a few to chat about LWRPs?
[2013-02-14 03:16:04 -0500] coderanger: Need input on my slowly evolving LWRP-the-world style :)
[2013-02-14 03:18:33 -0500] jtimberman: coderanger: i'm on teh hipchats
[2013-02-14 03:18:38 -0500] coderanger: I'm not :P
[2013-02-14 03:18:46 -0500] jtimberman: well i'm also on irc. :P
[2013-02-14 03:19:06 -0500] coderanger: Refusing to login there until I'm officially not on vacation
[2013-02-14 03:19:08 -0500] coderanger: :)
[2013-02-14 03:19:12 -0500] jtimberman: haha
[2013-02-14 03:19:22 -0500] jtimberman: i'm horrible at that, as btm often reminds me :)
[2013-02-14 03:19:33 -0500] coderanger: I didn't even open my laptop for a few days
[2013-02-14 03:19:34 -0500] coderanger: madness
[2013-02-14 03:19:48 -0500] jtimberman: "Dude, it's a holiday/you're on vacation!" "So are you!" "...."
[2013-02-14 03:19:50 -0500] jtimberman: anyway
[2013-02-14 03:20:56 -0500] coderanger: So here is my style question, for the "system install LWRP" (eg. haproxy::default, instead of haproxy::section) do you think it should do stuff like creating service users and auxiliary folders
[2013-02-14 03:21:09 -0500] coderanger: I've been kind of doing that so far, but I think I'm changing my mind
[2013-02-14 03:21:26 -0500] coderanger: that the LWRP shouldn't make users/groups, but that the default recipe that invokes it should
[2013-02-14 03:21:41 -0500] jtimberman: yeah, do that in the recipe.
[2013-02-14 03:22:00 -0500] coderanger: But it should make things like the /etc folder and other things that are critical to operation
[2013-02-14 03:22:08 -0500] jtimberman: like, if you look at my runit_service resource (not an LWRP, but this holds the same)
[2013-02-14 03:22:15 -0500] coderanger: but not, for example, the chroot folder for stud, you should make that yourself
[2013-02-14 03:22:17 -0500] jtimberman: there's per-user service support
[2013-02-14 03:22:27 -0500] jtimberman: the user is created in a recipe though
[2013-02-14 03:22:32 -0500] jtimberman: yeah
[2013-02-14 03:22:40 -0500] jtimberman: the lwrp doesn't know what you want to use.
[2013-02-14 03:22:52 -0500] jtimberman: and trying to accommodate that makes it really unwieldly imo
[2013-02-14 03:22:54 -0500] coderanger: This means if you don't want to use the default recipe, you have to copy-pasta a bit more, but I think I'm okay with that
[2013-02-14 03:23:11 -0500] jtimberman: some folks are okay with repeating themselves.
[2013-02-14 03:23:24 -0500] jtimberman: i mean look at the haproxy::default vs haproxy::app_lb recipes ;)
[2013-02-14 03:23:40 -0500] coderanger: yeah well I'm fixing that ;-)
[2013-02-14 03:23:44 -0500] jtimberman: sure
[2013-02-14 03:23:51 -0500] jtimberman: does your lwrp do a search if desired?
[2013-02-14 03:24:02 -0500] coderanger: No, that would be recipe level stuffs
[2013-02-14 03:24:07 -0500] jtimberman: word
[2013-02-14 03:24:12 -0500] jtimberman: i can dig it
[2013-02-14 03:24:35 -0500] coderanger: app_lb would be include_recipe haproxy; haproxy_section do variables whatevers => search() end
[2013-02-14 03:26:19 -0500] coderanger: Okay, I'll try out rebuilding some of my LWRP-based cookbooks this way and see how I like it style-wise :)
[2013-02-14 03:58:18 -0500] miah: i think installing the application, stting up services: should be a lwrp.
[2013-02-14 03:59:18 -0500] ev0ldave1: i think it is time to go add ipkg and openwrt to ohai and package resource
[2013-02-14 03:59:31 -0500] miah: ev0ldave1: excelltn. please do
[2013-02-14 03:59:45 -0500] ev0ldave1: sick of updating 4 devices by hand for mesh
[2013-02-14 03:59:54 -0500] miah: coderanger: stud should be a separate cookbook, and you should be able to pass an argument to the RP to enable chroot.
[2013-02-14 04:21:28 -0500] [locke]: anyone familiar with HA settings?
[2013-02-14 04:22:19 -0500] jtimberman: [locke]: in chef 11 server?
[2013-02-14 04:22:31 -0500] [locke]: yes
[2013-02-14 04:22:34 -0500] jtimberman: [locke]: we're working on getting those documented and blogged about.
[2013-02-14 04:23:05 -0500] [locke]: so, assuming i configure postgresql for master-master
[2013-02-14 04:23:15 -0500] [locke]: and use drbd for the bookshelf folder
[2013-02-14 04:23:31 -0500] [locke]: does it mean i got 2 identical server in async mode?
[2013-02-14 04:24:02 -0500] [locke]: client using same validation public key?
[2013-02-14 04:26:39 -0500] [locke]: jtimberman?
[2013-02-14 04:33:28 -0500] jtimberman: [locke]: i can't speak for sure, i haven't done that w/ chef server myself.
[2013-02-14 04:33:46 -0500] jtimberman: [locke]: you should post the question on the chef mailing list
[2013-02-14 04:38:42 -0500] [locke]: jtimberman: got some drafts of documents?
[2013-02-14 04:38:50 -0500] [locke]: i need to do this anyways, might as well test
[2013-02-14 04:42:08 -0500] jtimberman: [locke]: i don't, sorry. it'll be on the docs.opscode.com site and posted on the blog.
[2013-02-14 04:50:33 -0500] ssd7: Ohai all.
[2013-02-14 04:52:16 -0500] jtimberman: ssd7: ohayyyyyy
[2013-02-14 04:53:19 -0500] jtimberman: ssd7: true story, building infrastructure with chef is pretty fun.
[2013-02-14 04:54:31 -0500] ssd7: :) Yup.
[2013-02-14 05:22:20 -0500] fitram: Hi
[2013-02-14 05:22:44 -0500] fitram: may i know where i can find how to delete an organization in hosted chef?
[2013-02-14 05:23:40 -0500] jtimberman: fitram: you'll need to contact Opscode support.
[2013-02-14 05:23:42 -0500] jtimberman: support@opscode.com
[2013-02-14 05:24:03 -0500] jtimberman: just stop using it and switch to your new one for now, and they'll let you know when its done.
[2013-02-14 05:24:14 -0500] fitram: thanks a lot :)
[2013-02-14 05:24:19 -0500] josephholsten: I HATE MULTI NODE ORCHESTRATION
[2013-02-14 05:25:12 -0500] josephholsten: I swear, server developers must never actually install their code.
[2013-02-14 05:25:28 -0500] jtimberman: josephholsten: unsolved problems
[2013-02-14 05:26:42 -0500] josephholsten: seriously tho, the freeipa replica installer cannot actually use its own autoconfiguration
[2013-02-14 05:27:24 -0500] josephholsten: why is ldap so hard. it is older than I am.
[2013-02-14 05:38:30 -0500] silk: Whats hard about it?
[2013-02-14 05:41:12 -0500] josephholsten: installation. allowing users to change their own passwords.
[2013-02-14 05:43:36 -0500] josephholsten: throwing up a poc install is easy. but setting up integration with dns, nfs, krb5, enabling replication.
[2013-02-14 05:44:01 -0500] silk: I was going to suggest using openLDAP and syncrepl
[2013-02-14 05:44:12 -0500] josephholsten: it's embarrassing that active directory is so much better than existing tools.
[2013-02-14 05:44:53 -0500] silk: but I didnt need to integrate DNS or Kerberos with ldap
[2013-02-14 05:47:28 -0500] jtimberman: josephholsten: AD is MS's killer app. Office is just a side effect.
[2013-02-14 05:47:33 -0500] jtimberman: :)
[2013-02-14 05:47:41 -0500] josephholsten: well, soonish the ipa_server cookbook will be able to auto configure replicas
[2013-02-14 05:47:51 -0500] jtimberman: that is to say, I don't think that Office is as much sway in orgs now as AD.
[2013-02-14 05:47:55 -0500] josephholsten: but I am so angry at this project
[2013-02-14 05:48:18 -0500] josephholsten: you say to the guy who's company is essentially excel as a service
[2013-02-14 05:49:28 -0500] josephholsten: oh, do you know if that ohai root_group plugin patch got reviewed again?
[2013-02-14 05:49:48 -0500] josephholsten: http://tickets.opscode.com/browse/OHAI-428
[2013-02-14 05:50:33 -0500] jtimberman: It wasn't yet. We've had quite a kerfuffle with these RubyGems updates requiring new releases of all the things.
[2013-02-14 05:51:02 -0500] josephholsten: I've noticed. keep fighting the good fight.
[2013-02-14 05:52:25 -0500] josephholsten: the actual implementation is an adorable 8 lines, with ~100 lines of unit tests and I still barely trust it.
[2013-02-14 05:52:51 -0500] jtimberman: the root_group thing?
[2013-02-14 05:53:00 -0500] jtimberman: testing ohai is pretty hard.
[2013-02-14 05:53:12 -0500] jtimberman: because you basically have to mock unix for the output of everything.
[2013-02-14 05:54:41 -0500] josephholsten: oh I did that testing: https://github.com/josephholsten/ohai/commit/36b623a035af4aad94759dc27c2ed11924162d00
[2013-02-14 05:55:04 -0500] jtimberman: And thank you for that!
[2013-02-14 05:55:27 -0500] josephholsten: but I'd like people to actually verify that what I'm mocking is actually what real systems do. or something like that.
[2013-02-14 05:55:56 -0500] josephholsten: this is going to clean up nearly every cross platform cookbook, so it can't be crap.
[2013-02-14 05:56:22 -0500] jtimberman: :)
[2013-02-14 05:57:46 -0500] josephholsten: you ever stop to think of how many machines are running some odd line of code you thought up at 2am?
[2013-02-14 05:58:34 -0500] josephholsten: you guys are literally changing the world.
[2013-02-14 05:58:37 -0500] jtimberman: josephholsten: :D
[2013-02-14 06:29:22 -0500] null_route: Hi guys - I've been breaking me head on a recipe  - I want to run a template on the results of a complex search(), but I'm not sure how to go about it.
[2013-02-14 06:29:36 -0500] null_route: THe original code is at: https://gist.github.com/tewner/b6e04af06d96d8a0872e
[2013-02-14 06:31:05 -0500] null_route: I"m trying to convert that node{:tags].each into one search()
[2013-02-14 06:31:20 -0500] null_route: ...or figure out how to concatinate the results of each search into one array
[2013-02-14 06:35:55 -0500] spheromak: you can use AND in your search if you know the set of roles you want to search for
[2013-02-14 06:36:10 -0500] spheromak: guess im not understanding how you wnt to reduce that ?
[2013-02-14 06:36:25 -0500] null_route: I want to search my data bag for each tag
[2013-02-14 06:36:46 -0500] null_route: I want to cycle through my data bag, and see if a field in the tadata bag matches one of the node's tags
[2013-02-14 06:37:07 -0500] spheromak: and its many tags
[2013-02-14 06:37:11 -0500] spheromak: and one bag right ?
[2013-02-14 06:37:16 -0500] null_route: yeah
[2013-02-14 06:37:21 -0500] spheromak: so just setup your search string and execute 1 search with OR/AND
[2013-02-14 06:37:44 -0500] null_route: do you have an example?
[2013-02-14 06:38:34 -0500] null_route: (I'm not sure I understand your suggestion_
[2013-02-14 06:38:56 -0500] null_route: you mean, cycle through my tags, and join them into one string separated by OR ?
[2013-02-14 06:39:05 -0500] null_route: then search on that?
[2013-02-14 06:39:34 -0500] spheromak: yea one min ill add a comment
[2013-02-14 06:39:58 -0500] null_route: (perhaps something like node[:tags].join(" OR ")
[2013-02-14 06:42:07 -0500] spheromak: yup
[2013-02-14 06:42:11 -0500] spheromak: added a comment on your gist
[2013-02-14 06:43:33 -0500] null_route: cool - 1sec
[2013-02-14 06:44:21 -0500] null_route: that's a LOT cleaner than mine (attached: untested and probably doesn't work)
[2013-02-14 06:45:01 -0500] spheromak: yea i forgot to put in search = tags....
[2013-02-14 06:45:03 -0500] spheromak: but yea
[2013-02-14 06:45:10 -0500] null_route: Thanks, spheromak  - I'll try your idea!
[2013-02-14 06:45:41 -0500] spheromak: there fixed the comment for actual functional code (tho not tested) :D
[2013-02-14 06:46:18 -0500] null_route: you rock!
[2013-02-14 06:54:10 -0500] null_route: spheromak: works wonderfully - just needed to add parentheses around the  search_tags (before the AND statement) -
[2013-02-14 06:54:10 -0500] null_route: thank you!
[2013-02-14 06:54:19 -0500] spheromak: np
[2013-02-14 07:29:56 -0500] BryanWB__: halcyonCorsair: nice refactor!
[2013-02-14 07:30:03 -0500] BryanWB__: have u run the tests?
[2013-02-14 07:30:28 -0500] halcyonCorsair: BryanWB__: I did on vagrant....um, like I commented I think there is still one failure from the opscode new stuff
[2013-02-14 07:30:52 -0500] BryanWB__: alright i will figure it out
[2013-02-14 07:31:10 -0500] BryanWB__: halcyonCorsair: tks for doing this
[2013-02-14 07:31:32 -0500] halcyonCorsair: I think at that point I had to move on back to my original purpose of a logstash and elasticsearch cluster on ec2 :)
[2013-02-14 07:32:30 -0500] halcyonCorsair: BryanWB__: np.  actually, I've been having a lot of pain in the last couple of days around chef vs knife vs cookbook mismatches and expectations
[2013-02-14 07:33:13 -0500] halcyonCorsair: was wondering if the foodfightshow has taken on the issue re: transitioning, chef 11 cookbook readiness, etc
[2013-02-14 07:33:34 -0500] halcyonCorsair: (i'm a few episodes behind, so i may not have heard about it yet)
[2013-02-14 07:35:03 -0500] BryanWB__: halcyonCorsair: next week actually
[2013-02-14 07:35:19 -0500] BryanWB__: halcyonCorsair: and ur questions would me most welcome as i haven't even started the transition myself
[2013-02-14 07:35:48 -0500] BryanWB__: halcyonCorsair: https://github.com/foodfight/showz/blob/master/scripts/episode-x-chef-11.md
[2013-02-14 07:35:57 -0500] BryanWB__: pls add to the script if u get a chance
[2013-02-14 07:39:30 -0500] halcyonCorsair: BryanWB__: will do
[2013-02-14 07:41:13 -0500] halcyonCorsair: BryanWB__: I see you already have "What is NOT included in Open Source Chef?", but I would very much like to hear more detail around security/authorization in particular, and if that has changed for open source chef between 10 & 11
[2013-02-14 07:41:28 -0500] BryanWB__: halcyonCorsair: y me too
[2013-02-14 07:52:47 -0500] halcyonCorsair: BryanWB__: gotta run, but I'll definitely take a look later
[2013-02-14 07:53:33 -0500] halcyonCorsair: really looking forward to watching your logstash episode as I'm in the middle of logstash stuff, so it's super timely
[2013-02-14 07:55:34 -0500] BryanWB__: gr8!
[2013-02-14 07:58:51 -0500] BryanWB__: is anyone else having a problem w/ rubygems.org right now?
[2013-02-14 08:00:10 -0500] TheSerapher: hey everyone
[2013-02-14 08:00:18 -0500] TheSerapher: I am having some weird issues with knife status / show node
[2013-02-14 08:00:53 -0500] TheSerapher: I am running Chef-Server 11.0.4 on Ubuntu, my client is currently 11.4.0 and the chef-client on the Nodes themselves is 11.2.0
[2013-02-14 08:01:14 -0500] TheSerapher: knife status reports this: 1 minute  ago, i-98c26fd2, , role[base], role[jetty-user-auth-server]., debian 6.0.6.
[2013-02-14 08:01:41 -0500] TheSerapher: while other, older nodes that were installed using Chef-Client 10.16.2 show as: 0 minutes ago, gloomy-navy-mandroid.platform.production.bigpoint.net, gloomy-navy-mandroid.platform.production.bigpoint.net, 192.168.0.62, , role[base]., debian 6.0.6.
[2013-02-14 08:01:58 -0500] TheSerapher: note that my newly added nodes in Amazon are missing the IP address?
[2013-02-14 08:02:37 -0500] TheSerapher: also knife node show <NODE> --long does not return the entire node information anymore :(
[2013-02-14 08:02:48 -0500] TheSerapher: any hints on what's going on would be appreciated :)
[2013-02-14 08:12:39 -0500] TheSerapher: Too early I guess, SysAdmins are usually still asleep :P
[2013-02-14 08:14:40 -0500] epta: Is there a way to update cookbook via knife reliably? I.e. if there is 0.5.2 version of cookbook X on chef-server and I do `knife cookbook upload X' with version 0.4.1, I wanna remove 0.5.2 version from chef-server to make 0.4.1 an oldest one
[2013-02-14 08:31:09 -0500] josephholsten: epta: you should look into environments and cookbook_versions http://docs.opscode.com/essentials_environments_formats.html
[2013-02-14 08:32:21 -0500] epta: josephholsten: is there a way to do that automatically without writing constraints manually?
[2013-02-14 08:32:33 -0500] josephholsten: but no, there's no atomic switch with just knife
[2013-02-14 08:33:37 -0500] josephholsten: your chef-clients should only grab the newest cookbook that fits constraints
[2013-02-14 08:34:44 -0500] epta: That is not about chef clients
[2013-02-14 08:35:01 -0500] epta: Chef-clients does not uploading cookbooks
[2013-02-14 08:36:01 -0500] epta: What I want is remove all older versions with `knife cookbook upload'
[2013-02-14 08:51:28 -0500] epta: Where can I found knife sources repo?
[2013-02-14 08:52:17 -0500] epta: epta: git://github.com/opscode/chef.git
[2013-02-14 09:34:23 -0500] koderde: I'm missing chef 10.20 and 10.22 in the apt repo. Anyone knows something about it?
[2013-02-14 09:40:12 -0500] emanuelez: i use chef server but i would like chef solo for testing with vagrant and berkshelf. i would also like tu ise the roles defined in my chef server, but by roles folder in chef-repo is empty to i cannot use that in vagrant. is there an easy solution i'm not aware of?
[2013-02-14 09:40:50 -0500] helllen: helllo
[2013-02-14 09:41:32 -0500] helllen: I am having problems with version 10.20 and /etc/chef/webui.pem
[2013-02-14 09:41:48 -0500] helllen: it says it is not valid and failed to authenticate
[2013-02-14 09:42:46 -0500] helllen: who generate this  /etc/chef/webui.pem file ?
[2013-02-14 09:43:55 -0500] mattt: the web interface me thinks :P
[2013-02-14 09:44:52 -0500] helllen: I have started servers and it is created (I haven't created myself)  why it says it is not valid?
[2013-02-14 09:44:58 -0500] helllen: and how can I generate it again
[2013-02-14 09:45:37 -0500] zts: emanuelez: if you want to use chef solo, you'll need to download the roles from your chef server (you might be able to use 'knife role show <role> -Fj').
[2013-02-14 09:46:05 -0500] emanuelez: zts: ah cool. was not aware of those options
[2013-02-14 09:46:08 -0500] zts: helllen: if /etc/chef/webui.pem is missing, but /etc/chef/validation.pem is there, the chef-server-webui will create a new webui.pem when it starts up
[2013-02-14 09:47:44 -0500] helllen: /etc/chef/validation.pem and /etc/chef/webui.pem both exists
[2013-02-14 09:47:58 -0500] emanuelez: something like knife role show base -Fj > base.js
[2013-02-14 09:48:33 -0500] emanuelez: can knife also validate only with validation.pem? i never got that to work properly
[2013-02-14 09:55:52 -0500] moogblob: q
[2013-02-14 09:56:22 -0500] pixie79: the chef server rpm - states a version of Enterprise Linux or Ubuntu, which flavor is considered enterprise linux, as I see it does not work on Oracle 6.3 which is a clone of RHEL 6.3
[2013-02-14 09:57:25 -0500] mattt: pixie79: doesn't work on oracle linux?
[2013-02-14 09:58:12 -0500] pixie79: the install of chef-server fails as it could not start the services - there is no daemontools for RHEL - even if i manually add that package first it still fails
[2013-02-14 10:00:55 -0500] mattt: pixie79: not sure, only tried chef on centos (as far as EL goes), and it works fine
[2013-02-14 10:09:46 -0500] pixie79: mattt ok thanks
[2013-02-14 10:09:59 -0500] mattt: pixie79: i'm going to test it on rhel in a sec, don't have access to oracle linux
[2013-02-14 10:10:02 -0500] pixie79: i didnt think there wad that much of a difference
[2013-02-14 10:10:10 -0500] pixie79: s/wad/was
[2013-02-14 10:10:52 -0500] mattt: me neither
[2013-02-14 10:12:00 -0500] mattt: pixie79: sorry, just realized i've not installed the server itself on centos, just client
[2013-02-14 10:12:11 -0500] pixie79: lol ok
[2013-02-14 10:12:12 -0500] mattt: and you're right, on RHEL it's not starting up any services
[2013-02-14 10:12:15 -0500] mattt: says it installed fine tho
[2013-02-14 10:12:19 -0500] pixie79: client works fine one OEL as well
[2013-02-14 10:13:49 -0500] TheSerapher: hmm
[2013-02-14 10:13:57 -0500] mattt: pixie79: on my ubuntu chef server i have a chef-server-ctl command, don't see that here
[2013-02-14 10:14:05 -0500] TheSerapher: knife search node "role:redis-server" -Fj -m {   "results": 1,   "rows": [     {       "host.domain": {         "run_list": [           "role[base]",           "role[redis-server]"         ]       }     }   ] }
[2013-02-14 10:14:16 -0500] TheSerapher: why does knife search not return the normal attributes when using -m ?
[2013-02-14 10:17:33 -0500] mattt: pixie79: something didn't take, probably best to ignore me :P
[2013-02-14 10:17:44 -0500] pixie79: :)
[2013-02-14 10:18:19 -0500] pixie79: i am going to try and download centos and see if it works there
[2013-02-14 10:20:04 -0500] mattt: installing the RPM on RHEL now and running the reconfigure job, seems to be doing stuff
[2013-02-14 10:21:04 -0500] mattt: yeah, everything's running
[2013-02-14 10:21:48 -0500] mattt: and can log into webui
[2013-02-14 10:21:51 -0500] mattt: so seems OK to me
[2013-02-14 10:35:58 -0500] mattt: I have no idea what to do with yy
[2013-02-14 10:35:59 -0500] mattt: Just say Y or N, please.
[2013-02-14 10:36:11 -0500] mattt: knife's quite aggressive :P
[2013-02-14 10:39:27 -0500] emanuelez: can i see when the last run was executed on a node?
[2013-02-14 10:40:01 -0500] jonlives: emanuelez: try this :) https://github.com/jgoulah/knife-lastrun
[2013-02-14 10:45:29 -0500] emanuelez: jonlives: do i have to add that snippet to the client.rb of every client? :-S
[2013-02-14 10:50:19 -0500] mattt: emanuelez: install the knife plugin
[2013-02-14 10:50:33 -0500] mattt: and then jam that stuff into the client.rb file
[2013-02-14 10:51:15 -0500] emanuelez: mattt: the client.rb on the machine where knife is installed on?
[2013-02-14 10:51:49 -0500] jonlives: emanuelez: you'll need to install the knife-lastrun gem on each box and then add the snippet from the readme to the client.rb on all your clients
[2013-02-14 10:52:54 -0500] emanuelez: jonlives: i see. how about knife status? doesn't that show when a client last checked in the browser?
[2013-02-14 10:53:26 -0500] mattt: doesn't look it :(
[2013-02-14 10:54:02 -0500] jonlives: emanuelez: that doesn't give you a very specific time, just "3 days ago" or similar
[2013-02-14 10:54:48 -0500] emanuelez: ok. that's good enough for me now. a config file has been changing since the last run happened.
[2013-02-14 10:55:08 -0500] mattt: i don't even see that w/ show
[2013-02-14 10:55:16 -0500] jonlives: emanuelez: oh fair enough then - you can also see the same info as knife status gives you in the webui
[2013-02-14 10:55:24 -0500] jonlives: mattt: knife status, not knife show
[2013-02-14 10:57:06 -0500] jonlives: mattt: http://docs.opscode.com/knife_status.html
[2013-02-14 10:57:33 -0500] mattt: jonlives: yeah, just tried it, never used that before :)
[2013-02-14 10:57:35 -0500] mattt: pretty handy
[2013-02-14 11:03:25 -0500] emanuelez: well... apparently knife status is lying to me. /var/log/chef/client.log tells me that chef-client runs every 30 minutes
[2013-02-14 11:04:31 -0500] emanuelez: ok. knife status only records when a client does a node.save operation
[2013-02-14 11:12:39 -0500] zts: emanuelez: yes, though clients call node.save when the run completes successfully - so 'knife status' shows you the last time the node completed a run
[2013-02-14 11:13:09 -0500] emanuelez: zts: then is the something wrong with my setup?
[2013-02-14 11:14:17 -0500] zts: emanuelez: you could check your chef client log to confirm that the run did not have an exception
[2013-02-14 11:14:40 -0500] zts: emanuelez: in that case, Chef will have (potentially) updated some things on your system, but not reached the point where it calls node.save
[2013-02-14 11:14:54 -0500] emanuelez: it did have an exception. it's the error i'm trying to figure out
[2013-02-14 11:17:05 -0500] emanuelez: knife node show myclient -a nginx.multi_accept nginx.multi_accept:  on
[2013-02-14 11:17:22 -0500] emanuelez: and then that renders to false in the erb file :-S
[2013-02-14 11:19:02 -0500] zts: emanuelez: can you gist/pastebin the error from your chef log?  (as well as the template resource and the relevant part of your erb, if you're certain that's the problem)
[2013-02-14 11:26:13 -0500] emanuelez: zts: here: http://pastebin.com/3uUG9Cyg
[2013-02-14 11:28:17 -0500] threescoops: Is there anyway to deal with roles on a per-environment basis? The baked in environments is mostly around cookbook versioning if I'm using it right. Any patterns/hacks/workarounds/tips to deal with a role varying across versions would be welcome.
[2013-02-14 11:28:53 -0500] threescoops: s/across versions/across environments/' # sorry, thinking about versioned roles whilst typing that, I guess.
[2013-02-14 11:29:06 -0500] emanuelez: zts: it looks like somethign wrong is going on between the nginx cookbook and the nginx_ssl_proxy cookbook
[2013-02-14 11:29:39 -0500] zts: emanuelez: hm, that does all look sensible!  Can you add a line to your recipe, just before the template resource, to dump the value of that variable? eg:  Chef::Log.info("multi_accept is: #{node[:nginx][:multi_accept]}")
[2013-02-14 11:30:00 -0500] zts: ah
[2013-02-14 11:31:28 -0500] zts: threescoops: I don't think there's a good answer to that problem at the moment.  Some people seem to be moving towards using cookbooks as roles (lots of include_recipe) so they can version them, but that has its own drawbacks
[2013-02-14 11:33:17 -0500] tknerr: knife-ec2 doesn't work with chef, does it?
[2013-02-14 11:33:46 -0500] threescoops: zts: ah well :( Thought it was worth asking.
[2013-02-14 11:34:32 -0500] emanuelez: zts: i think i nailed the problem. nginx_ssl_proxy (which uses the variable as a string) includes nginx (which uses the valiable as a boolean)
[2013-02-14 11:36:17 -0500] zts: emanuelez: Sounds like you found it!  How unfortunate
[2013-02-14 11:37:13 -0500] zts: threescoops: yeah, I'm not sure if there's any plans for changing that.  I imagine it'll be a topic of discussion at ChefConf
[2013-02-14 11:38:00 -0500] zts: threescoops: to be fair, the major drawback of "role cookbooks" seems to be that you no longer have a useful expanded run list saved back to the chef server.  If you're not currently relying on that, it's probably worth exploring the approach
[2013-02-14 11:38:48 -0500] emanuelez: zts: nginx sets the attribute from "on" to false -> nginx writes the nginx.conf file -> nginx_ssl_proxy writes nginx.conf again (but with the wrong value) -> exception occurs -> no node.save happens -> the value in the node attribute is still the right one
[2013-02-14 11:39:22 -0500] threescoops: zts: I came across http://wiki.opscode.com/display/chef/Infrastructure+Proposal just now which touches on versioning roles
[2013-02-14 11:40:00 -0500] zts: tknerr: how do you mean?
[2013-02-14 11:40:02 -0500] tknerr: zts, threescoops: if you have an idea how to fix that drawback of "role" or "application" cookbooks let me know :-)
[2013-02-14 11:40:15 -0500] threescoops: zts: I'm guessing by its age it's not a priority
[2013-02-14 11:40:34 -0500] tknerr: zts: from the readme it looks like knife-ec2 expects a chef server exists
[2013-02-14 11:41:04 -0500] zts: threescoops: I wonder whether that turned into environments (which aren't mentioned anywhere on the page)
[2013-02-14 11:41:28 -0500] zts: tknerr: ah, so your question is whether you can use knife-ec2 to bootstrap a server with chef-solo?
[2013-02-14 11:41:47 -0500] jimcrofty: Hi all. If I set node attributes from within a custom provider should that attribute be visible immeditately within the recipe calling the provider? Doesn't seem to be, it's only visible on subsequent client runs.
[2013-02-14 11:42:07 -0500] tknerr: zts: yes, thats the actual question :-)
[2013-02-14 11:43:10 -0500] zts: tknerr: gotcha.  Well, knife-ec2 just uses "knife bootstrap" once the instance is created - maybe you could use a custom bootstrap template to use chef-solo instead
[2013-02-14 11:43:40 -0500] zts: tknerr: however, at the moment it only needs to create a few short plaintext files on the new instance.  If you need to upload a tarball of cookbooks (for example), that's probably not good enough
[2013-02-14 11:44:45 -0500] zts: jimcrofty: if you're setting attributes in a provider, that will only happen during the "converge" phase.  It should be visible to other providers invoked later in the run, but it won't be visible to your recipe code (as that will already have run)
[2013-02-14 11:44:47 -0500] tknerr: zts: thanks, but i think i'm going with knife-solo for now, this will take care of rsyncing the cookbooks etc
[2013-02-14 11:44:55 -0500] zts: tknerr: probably a better fit for the time being
[2013-02-14 11:45:57 -0500] tknerr: zts, threescoops: as for the role cookbooks: i don't think that introducing versioning for roles goes far enough. imho there's more to an "application cookbook" than just the versioning aspect
[2013-02-14 11:46:32 -0500] tknerr: here's what i was just typing for internal documentation and arguments pro application cookbooks:
[2013-02-14 11:46:46 -0500] tknerr:  * they can be properly versioned and dependency managed (in contrast to roles)
[2013-02-14 11:46:51 -0500] tknerr:  * they lock down dependency versions in their `metadata.rb` thus make the installation robust and reliable
[2013-02-14 11:46:57 -0500] tknerr:  * they hide all the glue code (and configuration inderdependencies) when assembling multiple cookbooks
[2013-02-14 11:47:03 -0500] tknerr:  * they set sensible configuration defaults and expose only the minimum necessary configuration to the user
[2013-02-14 11:47:08 -0500] threescoops: tknerr: I don't really want/like the idea of "role cookbooks", roles as they are seem fine, but the lack of ability to change a role and promote it through environments is frustrating
[2013-02-14 11:47:09 -0500] tknerr:  * they document how to use/administer the application in their README
[2013-02-14 11:48:08 -0500] tknerr: threescoops: yes, there seems to be a lots of pro's and con's for "role cookbooks"
[2013-02-14 11:48:26 -0500] alexbst: http://rapgenius.com/James-somers-herokus-ugly-secret-lyrics <- fun read
[2013-02-14 11:48:59 -0500] threescoops: We use cookbooks in a pretty standard way, then use roles to aggregate cookbooks and other roles for servers that serve a given role in the infrastructure
[2013-02-14 11:49:30 -0500] tknerr: threescoops: the above are my 5 cents to the pros, but the very very very big con is that you lose the expanded run_list :-(
[2013-02-14 11:51:14 -0500] tknerr: threescoops: btw: do you lock down the dependency versions anywhere? if so, which is the place where you do this currently? afaik this can be done in the environments only, but not in the roles, can ot?
[2013-02-14 11:51:20 -0500] tknerr: ot=it
[2013-02-14 11:52:05 -0500] zts: I'd rather not lock versions in my roles, because that's what my environments are for - and my gut feeling is that expressing version constraints in half a dozen places is likely to lead to dependency resolution problems
[2013-02-14 11:52:17 -0500] zts: although I could just be imagining a problem where none exists
[2013-02-14 11:52:22 -0500] threescoops: tknerr: we control cookbook versions in environments (and the code in git, if that counts)
[2013-02-14 11:52:29 -0500] teukka: tknerr: if you want to use knife-ec2 to use knife-solo take a look of this: https://gist.github.com/tmatilai/4559333
[2013-02-14 11:52:57 -0500] zts: anyway, point is that Chef gives us many different ways to build out our configuration.  I think that roles should be versioned, but that doesn't mean I would never find a use for a "Role Cookbook"
[2013-02-14 11:53:19 -0500] tknerr: teukka: thanks!
[2013-02-14 11:53:20 -0500] teukka: tknerr: I had an earlier poc to monkey patch knife-ec2 directly, too: https://gist.github.com/tmatilai/4194666
[2013-02-14 11:54:07 -0500] pixie79: mattt yep works fine by the looks of it on centos - but for some reason not on oel - oh well as least i have it working now
[2013-02-14 11:54:35 -0500] mattt: pixie79: who uses oel anyway?
[2013-02-14 11:54:36 -0500] mattt: err :)
[2013-02-14 11:56:07 -0500] tknerr: zts, threescoops: i would be happy as well if:
[2013-02-14 11:56:22 -0500] tknerr: zts, threescoops: roles could be versioned
[2013-02-14 11:56:36 -0500] pixie79: lol I tend to :)
[2013-02-14 11:56:41 -0500] tknerr: zts, threescoops: and i could define cookbook version constraints in the roles (want to lock down transitive cookbook dependencies as well)
[2013-02-14 11:56:53 -0500] tknerr: zts, threescoops: and in the environments i would specify the role versions rather than cookbook versions
[2013-02-14 11:57:36 -0500] tknerr: zts, threescoops: but as you said, there are many ways and this would just be what feels most natural to me
[2013-02-14 11:58:34 -0500] zts: tknerr: yeah, and I think having many ways is good :)
[2013-02-14 11:59:20 -0500] tknerr: zts: ack - you just need to find the right way for you which is not always easy ;-)
[2013-02-14 12:00:23 -0500] zts: too true!
[2013-02-14 12:06:58 -0500] nkrinner: #chef-hacking
[2013-02-14 12:30:35 -0500] anoopl: Hi
[2013-02-14 12:31:22 -0500] anoopl: I get this error with chef 10.16.4
[2013-02-14 12:31:23 -0500] anoopl:  Unable to resolve dependencies: net-ssh-multi requires net-ssh (>= 2.1.4); chef requires net-ssh (~> 2.2.2); net-ssh-gateway requires net-ssh (>= 2.6.5)
[2013-02-14 13:10:50 -0500] anoopl: can some one share a bootstrap example to fix this issue
[2013-02-14 13:13:00 -0500] zts: anoopl: upgrade to chef 10.22.0
[2013-02-14 13:13:35 -0500] zts: 10.20.0 fixed the problem with net-ssh depdendencies, but then there was a problem with json gem versions.  10.22.0 fixed that one too
[2013-02-14 13:16:00 -0500] anoopl: Thanks zts:
[2013-02-14 13:16:04 -0500] anoopl: let me try that
[2013-02-14 13:23:07 -0500] stephenking: hi
[2013-02-14 13:23:16 -0500] stephenking: it feels like my knife gets broken once per week these days :-(
[2013-02-14 13:23:36 -0500] stephenking: I'm encountering knife/core/generic_presenter.rb:153:in `name_or_id_for': undefined method `[]' for nil:NilClass (NoMethodError) when doing knife ssh
[2013-02-14 13:23:45 -0500] stephenking: is that a somehow known problem?
[2013-02-14 13:24:00 -0500] stephenking: (with chef 11.4.0)
[2013-02-14 13:24:12 -0500] stephenking: and I think I uninstalled all knife plugins
[2013-02-14 13:30:37 -0500] stephenking: the error occurs in this line: https://github.com/opscode/chef/blob/master/lib/chef/knife/core/generic_presenter.rb#L153
[2013-02-14 13:31:53 -0500] stephenking: and the calls come from net-ssh-multi-1.1 - so has this sth. to do with the recent net-ssh releases?
[2013-02-14 13:32:03 -0500] stephenking: (or version incompatibilities)
[2013-02-14 13:37:17 -0500] emilien: Hello, I seem to have an issue with solr on my chef server. The process is present and listen for incoming connections however I always get HTTP 503 in return. In the solr.log file I see the following error : [main] WARN org.mortbay.log - EXCEPTION java.lang.ClassNotFoundException: org.apache.solr.servlet.SolrDispatchFilter
[2013-02-14 13:38:13 -0500] emilien: I'm running OpenJDK Runtime Environment (IcedTea7 2.3.4) (7u9-2.3.4-0ubuntu1.12.10.1) but couldn't find if it's supported by solr or not
[2013-02-14 13:40:09 -0500] matti: Guys.
[2013-02-14 13:40:27 -0500] matti: In the /etc/chef-server/chef-server.rb, how do I set notification email?
[2013-02-14 13:40:51 -0500] matti: It one of the most top-level ones from https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-02-14 13:41:09 -0500] matti: And if I just set it, then it break with nilClass.
[2013-02-14 13:51:57 -0500] BryanWB__: is Xabier Zuazo around/
[2013-02-14 13:51:58 -0500] BryanWB__: ?
[2013-02-14 13:55:08 -0500] alex____: is it possible to create a baseline os with chef in any way?
[2013-02-14 13:55:28 -0500] stephenking: what do you mean with baseline os?
[2013-02-14 13:55:31 -0500] alex____: like creating a vm or zone or something
[2013-02-14 13:55:47 -0500] stephenking: there are plugins for knife to spin up vms in ec2 or openstack etc
[2013-02-14 13:55:53 -0500] BryanWB__: alex____: c veewee
[2013-02-14 13:56:18 -0500] stephenking: yes.. and veewee helps you to build the images
[2013-02-14 13:56:19 -0500] alex____: i want to be able to create zones where i need to specify a few parameters and that it runs
[2013-02-14 13:57:20 -0500] alex____: that works for solaris zone?
[2013-02-14 13:57:25 -0500] alex____: zones *?
[2013-02-14 13:58:05 -0500] stephenking: you can use/write a cookbook that creates a new zone and configurs it
[2013-02-14 13:58:56 -0500] stephenking: maybe sth like this: http://wix.io/2012/07/22/chef-on-solaris/
[2013-02-14 13:59:57 -0500] alex____: yeah i already found that post
[2013-02-14 13:59:59 -0500] alex____: but
[2013-02-14 14:00:00 -0500] matti: It seems, that overriding setting in chef-server.rb is broken.
[2013-02-14 14:00:06 -0500] matti: "command": "java -Xmx991M -Xms991M-Djava.net.preferIPv4Stack=true ..."
[2013-02-14 14:00:17 -0500] matti: I'd rather expect this not to be concatenated.
[2013-02-14 14:00:31 -0500] alex____: but than i have to create a new recipe each time i want to start a new zone
[2013-02-14 14:00:35 -0500] zts: alex____: have you looked at http://community.opscode.com/cookbooks/zone ?
[2013-02-14 14:00:43 -0500] alex____: yes
[2013-02-14 14:00:50 -0500] zts: ah, mentions the same thing
[2013-02-14 14:00:54 -0500] alex____: in combination with the zones
[2013-02-14 14:01:03 -0500] alex____: ?
[2013-02-14 14:01:10 -0500] zts: if you care about provisioning lots of zones, I would suggest writing one recipe which loads a databag, and then turns each one into a zone resource
[2013-02-14 14:01:13 -0500] alex____: what did i mention
[2013-02-14 14:01:37 -0500] zts: not you, sorry, I meant that the blog post stephenking linked (which you have seen) refers to that cookbook/lwrp
[2013-02-14 14:01:39 -0500] alex____: yeah i already thougt of that indeed
[2013-02-14 14:01:49 -0500] alex____: o oke
[2013-02-14 14:02:09 -0500] alex____: but data bag are global
[2013-02-14 14:02:12 -0500] alex____: and
[2013-02-14 14:02:31 -0500] alex____: were do i keep passwords
[2013-02-14 14:02:41 -0500] alex____: and other sensitive stuff
[2013-02-14 14:02:50 -0500] matti: /opt/chef-server/embedded/lib/ruby/gems/1.9.1/gems/omnibus-ctl-0.0.5/lib/omnibus-ctl.rb:358:in `run': undefined method `int' for #<Omnibus::Ctl:0x00000001f59028> (NoMethodError)
[2013-02-14 14:02:53 -0500] matti: Meh
[2013-02-14 14:03:33 -0500] matti: jtimberman: Please fix ;d
[2013-02-14 14:03:39 -0500] matti: btm: Or you ;d
[2013-02-14 14:04:16 -0500] alex____: but isnt it also possible to use node specific attributes
[2013-02-14 14:04:36 -0500] stephenking: yes, you could add them to your data bag
[2013-02-14 14:04:41 -0500] alex____: and can they be read by the globalzone?
[2013-02-14 14:04:43 -0500] stephenking: and then iterate over it in your custom cookbook
[2013-02-14 14:04:51 -0500] alex____: uhhuh
[2013-02-14 14:05:02 -0500] stephenking: yes, data bags can afaik be read from everywhere. however it's not clear to me what you mean with globalzone
[2013-02-14 14:05:06 -0500] alex____: but can a databag be zone specific?
[2013-02-14 14:05:08 -0500] stephenking: you can use encrypted data bags
[2013-02-14 14:05:22 -0500] alex____: ah oke
[2013-02-14 14:05:27 -0500] stephenking: no, you add one entry on a data bag per zone
[2013-02-14 14:05:36 -0500] alex____: solaris globalzone
[2013-02-14 14:05:45 -0500] stephenking: don't know, what this is ;)
[2013-02-14 14:05:52 -0500] alex____: o oke
[2013-02-14 14:06:00 -0500] alex____: well it doesnt really matter :P
[2013-02-14 14:06:03 -0500] alex____: uhm
[2013-02-14 14:06:18 -0500] alex____: the encrypted version could be an idea
[2013-02-14 14:06:31 -0500] stephenking: I'd suggest that you just use that cookbook to create couple of zones.. maybe that makes few things more clear
[2013-02-14 14:06:50 -0500] stephenking: and instead of statically writing down all the zones to be created, you can read that information from a data bag
[2013-02-14 14:06:54 -0500] alex____: than i can supply the decryption to the zone and globalzone
[2013-02-14 14:07:18 -0500] alex____: yeah true
[2013-02-14 14:07:29 -0500] alex____: i think i gonna do something like this
[2013-02-14 14:07:42 -0500] stephenking: decryption happens where chef-client needs the information. so if you configure all the zones on the host machine, data gets encrypted there
[2013-02-14 14:08:35 -0500] alex____: create a databag with all zones in it encrypted/not encrypted and make a recipe which will be able to create new zones if he find a non existing zon in the databag
[2013-02-14 14:09:15 -0500] stephenking: you don't have to care of the non existing problem
[2013-02-14 14:09:22 -0500] stephenking: the zone LWRP does that for you
[2013-02-14 14:09:33 -0500] alex____: so if i put encrypted data in a data bag for a node, the node itself cannot read it?
[2013-02-14 14:10:02 -0500] alex____: i put it in at the global server
[2013-02-14 14:10:18 -0500] alex____: but the node needs that info later on
[2013-02-14 14:10:31 -0500] stephenking: if the global server configurs the zones (and decrypts it), you don't have to decrypt it inside the zone
[2013-02-14 14:10:45 -0500] alex____: uhm
[2013-02-14 14:10:46 -0500] stephenking: http://docs.opscode.com/essentials_data_bags_encrypt.html
[2013-02-14 14:10:50 -0500] alex____: problem is:
[2013-02-14 14:10:53 -0500] stephenking: btw you don't have to encrypt things on your own
[2013-02-14 14:11:07 -0500] alex____: i need some variables in the zone it self
[2013-02-14 14:11:24 -0500] alex____: which i want to provide during installation of a zone
[2013-02-14 14:11:50 -0500] zts: alex____: maybe you could have your chef-client (in the global zone) drop some files into the zone's filesystem.  Or maybe you want to run chef-client inside every zone, not just the global zone
[2013-02-14 14:11:52 -0500] alex____: but no other nodes may have access to these variables
[2013-02-14 14:11:54 -0500] stephenking: probably two data bags? one encrypted for the passwords and one, which can be read everywhere
[2013-02-14 14:12:07 -0500] zts: alex____: in the second case, if you want to read the encrypted databags, you will need the encrypted databag secret inside the non-global zone
[2013-02-14 14:12:29 -0500] zts: alex____: you can use different secrets for different databags, if there are some things that you don't want some nodes to be able to decrypt
[2013-02-14 14:13:09 -0500] alex____: o so there is a possibility to let 2 nodes decrypt a databag?
[2013-02-14 14:13:19 -0500] stephenking: zts: one thing for curiosity: can a node read all attributes of all other nodes? I guess not, but I'm not even sure
[2013-02-14 14:13:25 -0500] stephenking: yes, if they know the secret
[2013-02-14 14:13:41 -0500] zts: alex____: sure - any node with the secret key can decrypt it, so it's up to you which nodes can do it
[2013-02-14 14:14:10 -0500] zts: stephenking: it depends, but yes by default.  Open Source chef server - every node can see all the saved attributes of every other node.  On Hosted/Private chef, you can use ACLs to limit things somewhat
[2013-02-14 14:14:26 -0500] stephenking: nice to know, thanks zts
[2013-02-14 14:14:31 -0500] zts: I haven't used that feature much, though, so I'm not sure how it interacts with search (for example)
[2013-02-14 14:14:37 -0500] zts: no problem
[2013-02-14 14:16:24 -0500] alex____: ah hah
[2013-02-14 14:16:35 -0500] alex____: well thanks for helping me out
[2013-02-14 14:16:48 -0500] alex____: i am going to think this truw
[2013-02-14 14:17:04 -0500] alex____: and btw sorry for my therrible english
[2013-02-14 14:17:05 -0500] alex____:  :P
[2013-02-14 14:17:44 -0500] stephenking: you're welcome.. and don't worry. was well comprehensible
[2013-02-14 14:19:01 -0500] laurent\: Re-raising exception: NoMethodError - undefined method `reset_defaults_and_overrides' for #<Hash:0x7fdc2ddb10d0>
[2013-02-14 14:19:04 -0500] laurent\: /var/lib/gems/1.8/gems/chef-10.20.0/bin/../lib/chef/client.rb:251:in `build_node'
[2013-02-14 14:19:21 -0500] laurent\: hmm that's something i never had
[2013-02-14 14:20:07 -0500] laurent\: specialsauce: looks like you encountered this issue several months ago, any clue ? :)
[2013-02-14 14:20:16 -0500] specialsauce: eh? wah?
[2013-02-14 14:20:47 -0500] laurent\: http://community.opscode.com/chat/chef/2012-06-13#id-134533 :)
[2013-02-14 14:21:10 -0500] zts: laurent\: sounds suspiciously like the json gem issue - can you confirm you are _not_ using version 1.7.7 of the gem on that host?
[2013-02-14 14:21:20 -0500] zts: laurent\: if so, either downgrade to 1.7.6, or upgrade chef to 10.22.0
[2013-02-14 14:21:28 -0500] laurent\: json (1.7.7)
[2013-02-14 14:21:33 -0500] laurent\: ok good one.
[2013-02-14 14:22:06 -0500] laurent\: specialsauce: sorry :) nn :)
[2013-02-14 14:22:11 -0500] laurent\: zts: thanks
[2013-02-14 14:22:44 -0500] zts: no problem
[2013-02-14 14:23:20 -0500] zts: alex____: your english is fine :)  Let me know how it works, when you try - I miss using Solaris :)
[2013-02-14 14:23:53 -0500] alex____: well offcourse i will write about it and place it here
[2013-02-14 14:24:24 -0500] zts: thankyou!
[2013-02-14 14:25:06 -0500] alex____: no thank you ;)
[2013-02-14 14:39:08 -0500] matticulous: is there a config file for the bookshelf portion of chef server 11? i have a joyent client trying to do a run against an on-prem chef 11 server. the server name is an internal dns name (thus not resolvable by the joyent client). i have changed the nginx config to reflect the external name, but i still get an error ("https://[internal server addr]/bookshelf/organization-00000000000000000000000000000000/checksum") when trying to do a run. is there another co
[2013-02-14 14:39:09 -0500] matticulous: area?
[2013-02-14 15:02:11 -0500] matticulous: can anyone help me understand the places where the server name in chef 11 is used and configured?
[2013-02-14 15:09:47 -0500] matti: matticulous: What do you mean by name?
[2013-02-14 15:09:51 -0500] matti: matticulous: You mean the DNS?
[2013-02-14 15:10:02 -0500] matti: matticulous: Or the fqdn in URLs?
[2013-02-14 15:10:32 -0500] matticulous: matti: yessir. i have a joyent client trying to do a run against an on-prem chef 11 server. the server name is an internal dns name (thus not resolvable by the joyent client). i have changed the nginx config to reflect the external name, but i still get an error ("https://[internal server addr]/bookshelf/organization-00000000000000000000000000000000/checksum") when trying to do a run.
[2013-02-14 15:10:52 -0500] jackl0phty: @BrianWB is BrianWB around? I need to set configure option at compile time with ark cookbook. Is that the autoconf_opts? something like autoconf_opts [ '--enable-linux-caps' ] perhaps?
[2013-02-14 15:11:26 -0500] matti: matticulous: How did you install it?
[2013-02-14 15:11:44 -0500] matticulous: using the rpm install on centos-6
[2013-02-14 15:11:57 -0500] matticulous: matti: i assume you meant the server?
[2013-02-14 15:12:03 -0500] matti: matticulous: Yeah.
[2013-02-14 15:12:03 -0500] pixie79: any ideas where to reconfigure postgres for the prebuilt rpm of chef-server - i am getting the following error stopping postgres starting If the request size is already small, it's possible that it is less than your kernel's SHMMIN parameter, in which case raising the request size or reconfiguring SHMMIN is called for
[2013-02-14 15:12:09 -0500] matti: I am not sure what RPM does.
[2013-02-14 15:12:29 -0500] matti: matticulous: Was this a Omnibus package?
[2013-02-14 15:12:37 -0500] matticulous: matti: yes.
[2013-02-14 15:12:42 -0500] matti: matticulous: Oh, cool.
[2013-02-14 15:13:12 -0500] matti: matticulous: In this case you can override any of the attributes that chef-server cookbook uses.
[2013-02-14 15:13:28 -0500] matti: matticulous: And this can be done in /etc/chef-server/chef-server.rb
[2013-02-14 15:14:19 -0500] matti: matticulous: Mind you, you have to do node.set['chef_server'] ...
[2013-02-14 15:14:33 -0500] matti: matticulous: Pick whichever you want: https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-02-14 15:15:13 -0500] matti: matticulous: Put them into the aforementioned file.
[2013-02-14 15:15:25 -0500] matticulous: matti:  i don't find that file on the server itself.
[2013-02-14 15:15:25 -0500] matti: matticulous: And re-run reconfigure upon stopping services etc.
[2013-02-14 15:15:33 -0500] matti: matticulous: It is not there.
[2013-02-14 15:15:39 -0500] matticulous: matti: oh
[2013-02-14 15:15:53 -0500] matti: matticulous: I was just doing similar thing to change Solr options.
[2013-02-14 15:18:25 -0500] matti: pixie79: Read what I just told matticulous
[2013-02-14 15:18:33 -0500] matti: ;]
[2013-02-14 15:18:40 -0500] pixie79: :) ok
[2013-02-14 15:18:45 -0500] matticulous: matti: ok, so in this case i need to upload the chef-server cookbook first? sorrystill learning ropes.
[2013-02-14 15:18:53 -0500] matti: No, no.
[2013-02-14 15:19:15 -0500] pixie79: got it
[2013-02-14 15:19:16 -0500] matti: matticulous: I gave you the cookbook as it shows you all the knobs ;d
[2013-02-14 15:19:17 -0500] pixie79: thanks
[2013-02-14 15:19:55 -0500] matticulous: matti: ah. so just create the chef-server.rb file using the settings that I care about? is that right?
[2013-02-14 15:19:57 -0500] matti: matticulous: You have to pick your knob / attribute e.g. notification_email and drop it in the /etc/chef-server/chef-server.rb
[2013-02-14 15:20:27 -0500] matti: matticulous: As: node.set['notification_email'] = 'adam@opscode.com' -- so he gets all the errors ;p
[2013-02-14 15:21:03 -0500] matti: matticulous: And then re-run reconfigure for all the templates / software to be re-rendered / re-started / whatnot.
[2013-02-14 15:21:06 -0500] matti: pixie79: ;]
[2013-02-14 15:21:38 -0500] matti: [ I hope it makes sense ]
[2013-02-14 15:21:53 -0500] matticulous: matti: it does. giving it a shot now...
[2013-02-14 15:22:36 -0500] matti: I guess these...
[2013-02-14 15:22:37 -0500] matti: default['chef_server']['nginx']['server_name'] = node['fqdn']
[2013-02-14 15:22:37 -0500] matti: default['chef_server']['nginx']['url'] = "https://#{node['fqdn']}"
[2013-02-14 15:23:26 -0500] matticulous: i'm assuming i'll need to do the default['chef_server']['bookshelf']['vip'] = node['fqdn'] setting too since it ref's fqdn?
[2013-02-14 15:24:15 -0500] matti: Not sure if it would make a difference.
[2013-02-14 15:24:22 -0500] laurent\: merb : chef-server (api) : worker (port 4000) ~ Unsupported `json_class` type 'Chef::Checksum' - (JSON::ParserError)
[2013-02-14 15:24:25 -0500] laurent\: /var/lib/gems/1.9.1/gems/chef-10.22.0/lib/chef/json_compat.rb:139:in `class_for_json_class'
[2013-02-14 15:24:28 -0500] laurent\: \o/
[2013-02-14 15:24:29 -0500] laurent\: not my day
[2013-02-14 15:24:33 -0500] matti: I mean, it is rather localised.
[2013-02-14 15:24:40 -0500] matticulous: matti: just wondering since it seemed like a bookshelf-related error
[2013-02-14 15:24:41 -0500] matti: laurent\: Known issue.
[2013-02-14 15:25:02 -0500] matti: laurent\: Downgrade json gem to 1.7.6 or get Chef 10.22.0 or 11.4.0 with 1.7.7
[2013-02-14 15:25:28 -0500] matti: matticulous: Try one thing at the time -- I personally don't know ;/
[2013-02-14 15:25:28 -0500] laurent\: it's with 10.22.0 and json 1.7.6
[2013-02-14 15:25:38 -0500] matti: laurent\: Upgrade to 1.7.7 then
[2013-02-14 15:25:42 -0500] matti: laurent\: json gem
[2013-02-14 15:25:55 -0500] laurent\: that's what i'm doing :)
[2013-02-14 15:25:59 -0500] matti: :>
[2013-02-14 15:26:39 -0500] matticulous: so, when i set them in the .rb file, i do node.set['nginx']['url'] = whatever, right? rather than the default['chef_server']['nginx'] syntax.
[2013-02-14 15:26:46 -0500] matti: Yeah
[2013-02-14 15:26:49 -0500] laurent\: f*ck
[2013-02-14 15:27:00 -0500] laurent\: next step: downgrading both chef-server and json...
[2013-02-14 15:27:10 -0500] matti: The nginx['url'] = '' does not seem to be working.
[2013-02-14 15:27:20 -0500] matti: laurent\: Still broken?
[2013-02-14 15:27:39 -0500] chris613: matti: Nope that node.set is at that "normal" level, whereas default[] is at the default level.
[2013-02-14 15:27:53 -0500] matti: chris613: I know.
[2013-02-14 15:27:56 -0500] laurent\: matti: it is
[2013-02-14 15:28:13 -0500] matti: chris613: node.set was the only one that worked for me.
[2013-02-14 15:28:25 -0500] laurent\: matti: that logs from a chef-server (not a chef client)
[2013-02-14 15:29:03 -0500] matti: laurent\: Bugger.
[2013-02-14 15:30:05 -0500] matti: chris613: I will double check.
[2013-02-14 15:31:55 -0500] matticulous: matti: hmmmm.the reconfigure isn't using what I spec'd in the chef-server.rb file
[2013-02-14 15:32:37 -0500] matti: matticulous: You may have to do cleanse -- not sure though.
[2013-02-14 15:33:04 -0500] matti: matticulous: This does not seem to be documented anywhere, I just got it by Googling and trying it out.
[2013-02-14 15:33:12 -0500] matticulous: matti: ok
[2013-02-14 15:33:50 -0500] gondoi: btm, jtimberman: are there seperate docs for private chef?
[2013-02-14 15:34:01 -0500] gondoi: or are they the same as hosted chef api?
[2013-02-14 15:36:14 -0500] BryanWB__: is there a cookbook for zeromq?
[2013-02-14 15:36:47 -0500] matti: matticulous: OK. use node.default
[2013-02-14 15:37:09 -0500] matti: chris613: It works. I probably did something wrong last time. Thanks!
[2013-02-14 15:41:38 -0500] matticulous: matti: switched to that. still not applying correctly in the nginx.conf. i've tried "node.default['nginx']['server_name'] = "chef.knotice.com"" and node.default['chef_server']['nginx']['server_name'] = "chef.knotice.com"
[2013-02-14 15:42:38 -0500] matti: matticulous: Did you tried to do cleanse beforehand?
[2013-02-14 15:42:45 -0500] matti: matticulous: Wroks for me.
[2013-02-14 15:42:52 -0500] jackl0phty: @BryanWB__ I need to set option to configure script at compile time using ark cookbook. Is that autoconf_opts? Something like autoconf_opts [ '--enable-linux-caps' ]?
[2013-02-14 15:43:25 -0500] matticulous: matti: nope. was worried about the "destruction" message. doing it now.
[2013-02-14 15:43:45 -0500] matti: matticulous: If you dont have anything then you will loose nothing
[2013-02-14 15:43:46 -0500] matticulous: its just config info correct? not client data or anythign?
[2013-02-14 15:44:19 -0500] matti: matticulous: The chef-server.rb? Yes, just server.
[2013-02-14 15:44:37 -0500] matticulous: matti: i meant the stuff that the cleanse is nuking.
[2013-02-14 15:44:52 -0500] matti: matticulous: Oh, not sure, entirely.
[2013-02-14 15:45:04 -0500] matticulous: matti: one way to find out. :)
[2013-02-14 15:45:16 -0500] matticulous: matti: fire in the hole
[2013-02-14 15:45:24 -0500] matti: Yay.
[2013-02-14 15:48:17 -0500] matti: matticulous: ..and?
[2013-02-14 15:48:18 -0500] matti: ;d
[2013-02-14 15:48:34 -0500] matti: matticulous: You've left me with hell of a cliffhanger.
[2013-02-14 15:48:46 -0500] matticulous: matti: re-creating chef-server.rb since it was nuked too
[2013-02-14 15:48:56 -0500] matti: Hm
[2013-02-14 15:49:04 -0500] matti: Yeah, it does that -- configuration it is.
[2013-02-14 15:51:15 -0500] matticulous: matti: all svcs are disabled...
[2013-02-14 15:51:52 -0500] matti: matticulous: Bugger.
[2013-02-14 15:51:52 -0500] matti: ;/
[2013-02-14 15:52:28 -0500] matti: matticulous: fqdn is also used in lb there.
[2013-02-14 15:52:39 -0500] matti: matticulous: I am not sure which ones you have to change.
[2013-02-14 15:52:52 -0500] matti: matticulous: It is a pain, rather this thing.
[2013-02-14 15:54:19 -0500] matticulous: did a reconfigure.they are back up, but I can't log in.
[2013-02-14 15:55:13 -0500] matticulous: matti: so that was an important lesson. :)
[2013-02-14 15:55:19 -0500] matticulous: it took it to defaults.
[2013-02-14 15:55:33 -0500] matticulous: matti: users and clients wiped.
[2013-02-14 15:55:49 -0500] matti: matticulous: ;/
[2013-02-14 15:55:59 -0500] matti: matticulous: Sorry it did not work as I was hoping.
[2013-02-14 15:56:19 -0500] matti: matticulous: As I said, I myself was doing figuring out with this.
[2013-02-14 15:56:20 -0500] matticulous: matti: no sweat. all part of learning
[2013-02-14 15:56:52 -0500] matti: matticulous: Your issues sadly is still unresolved ;/
[2013-02-14 16:03:41 -0500] BryanWB__: jackl0phty: erm, maybe, i haven't looked in a while
[2013-02-14 16:06:49 -0500] gondoi: is there a way via an api or other to create an organization in private chef?
[2013-02-14 16:07:02 -0500] gondoi: I'm not seeing it in any docs
[2013-02-14 16:08:21 -0500] jtimberman: gondoi: http://private-chef-docs.opscode.com/
[2013-02-14 16:10:00 -0500] jackl0phty: @BryanWB ok thanks. I'm working on a syslog-ng cookbook and need to install from source
[2013-02-14 16:11:20 -0500] jackl0phty: @BryanWB  never mind dude. got it working! peace
[2013-02-14 16:13:08 -0500] zts: jtimberman: are there any public docs talking about new Private Chef features like "push client runs" and activity reporting?
[2013-02-14 16:13:27 -0500] gondoi: jtimberman: thanks
[2013-02-14 16:13:44 -0500] jtimberman: zts: no
[2013-02-14 16:13:48 -0500] gondoi: jtimberman: what about a way to create orgs couldn't find it there if it exists at all
[2013-02-14 16:13:56 -0500] gondoi: via api that is
[2013-02-14 16:14:00 -0500] zts: jtimberman: is there going to be, or is it a "talk to sales" kind of thing?
[2013-02-14 16:15:17 -0500] jtimberman: gondoi: through the API, i'm not sure, there *is* an API for it but I've not used it.
[2013-02-14 16:16:28 -0500] matti: jtimberman: Can you help matticulous
[2013-02-14 16:16:31 -0500] jtimberman: gondoi: maybe the orgmapper tool can be helpful, i think i saw it on the private chef doc page.
[2013-02-14 16:17:00 -0500] matti: jtimberman: It would actually help many people if you would have a spare moment to write about how to tweak Chef Server from Omnibus.
[2013-02-14 16:17:09 -0500] matti: jtimberman: Thanks in advance ;]
[2013-02-14 16:17:29 -0500] jtimberman: the docs are being updated for the new configuration file and how to change settings.
[2013-02-14 16:17:46 -0500] BryanWB__: is there a recipe to configure and debian repo for zeromq?
[2013-02-14 16:17:54 -0500] matti: jtimberman: OK.
[2013-02-14 16:18:20 -0500] matti: jtimberman: My -ctl does not know how to handle int, plus show-config shows different things to chef-server-running.json
[2013-02-14 16:18:30 -0500] matti: jtimberman: Might be an issue.
[2013-02-14 16:19:20 -0500] Joel: just want to make sure I'm not missing it, there's no way using this recipe to add additional users, correct? http://community.opscode.com/cookbooks/mysql
[2013-02-14 16:21:00 -0500] Joel: looks like I might want to grab this to manage db users: http://community.opscode.com/cookbooks/database
[2013-02-14 16:22:20 -0500] jtimberman: matti: yeah i don't knwo much about the internals of the config. we're working on getting in depth blog posts up
[2013-02-14 16:23:23 -0500] jackl0phty: @BryanWB__ you going to ChefConf dude? just submitted my paper work **cross fingers**.
[2013-02-14 16:23:33 -0500] BryanWB__: jackl0phty: yeah!
[2013-02-14 16:23:39 -0500] BryanWB__: jackl0phty: will be gr8 to see u there
[2013-02-14 16:23:51 -0500] BryanWB__: i also hope atomic-penguin  can make it
[2013-02-14 16:24:21 -0500] jackl0phty: @BryanWB__ awesome. yea he's going. let's drink a few and hack on some test kitchen!
[2013-02-14 16:24:25 -0500] matti: jtimberman: Ack, thanks ;]
[2013-02-14 16:24:31 -0500] BryanWB__: jackl0phty: definitely!
[2013-02-14 16:24:47 -0500] matti: jtimberman: BTW, please add -ctl version ;]
[2013-02-14 16:25:50 -0500] jackl0phty: @BryanWB__ awesome!
[2013-02-14 16:26:05 -0500] matticulous: matti: yep, so at this point, just have a "stock" chef 11 server with no clients, users, etc.
[2013-02-14 16:26:30 -0500] matti: matticulous: With the fqdn issue?
[2013-02-14 16:26:50 -0500] matticulous: jtimberman: as ref'd by matti, just looking to get some guidance on the recommended way to change config of the chef server without mod'ing things like nginx directly.
[2013-02-14 16:27:01 -0500] matti: mconigliaro: jtimberman might be able to help, a bit.
[2013-02-14 16:27:06 -0500] matticulous: matti: correct. sorry for the hiatus. :)
[2013-02-14 16:27:12 -0500] matti: matticulous: No problem.
[2013-02-14 16:27:19 -0500] matti: matticulous: Sorry for not being able to help ;/
[2013-02-14 16:27:24 -0500] mconigliaro: help a bit with what?
[2013-02-14 16:27:36 -0500] matti: mconigliaro: Sorry, wrong TAB.
[2013-02-14 16:27:40 -0500] matti: ;d
[2013-02-14 16:27:43 -0500] mconigliaro: oops!
[2013-02-14 16:28:13 -0500] matticulous: matti: not at all. you've been very helpful. just like home ownership and assorted hobbies, sometimes the quickest path to learning is destruction. ;) all in the name of learning.
[2013-02-14 16:28:41 -0500] jtimberman: matticulous: the config file is /etc/chef-server/chef-server.rb
[2013-02-14 16:29:25 -0500] matti: jtimberman: We did that.
[2013-02-14 16:29:27 -0500] jtimberman: the settings are in the cookbook embedded in the chef server package. here's a handy url to the same file you'd have in the package: https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-02-14 16:29:29 -0500] matti: jtimberman: It broke everything.
[2013-02-14 16:29:38 -0500] matticulous: jtimberman: that's what i was editing, but after editing and doing a chef-server-ctl reconfigure, it didn't look like the configs were updating.
[2013-02-14 16:29:40 -0500] matti: jtimberman: When he changed fqdn.
[2013-02-14 16:31:50 -0500] atomic-penguin: BryanWB__, I booked yesterday
[2013-02-14 16:32:01 -0500] BryanWB__: atomic-penguin: awesome!
[2013-02-14 16:35:57 -0500] matticulous: jtimberman: is node.default['chef_server']['nginx']['server_name'] =  the correct way to specify the overridden attribs in chef-server.rb? or should it look differently?
[2013-02-14 16:36:47 -0500] jtimberman: matticulous: nginx['server_name'] = 'foo'
[2013-02-14 16:37:09 -0500] jtimberman: the config file is a Mixlib::Config DSL just like knife.rb, client.rb
[2013-02-14 16:37:17 -0500] jtimberman: not a cookbook attributes file.
[2013-02-14 16:38:31 -0500] matti: jtimberman: For me it did not work with other than nginx attributes.
[2013-02-14 16:38:39 -0500] matti: jtimberman: I had to do node.default.
[2013-02-14 16:38:47 -0500] matti: jtimberman: Or, I would get nilClass exception.
[2013-02-14 16:39:01 -0500] yfeldblum: matti, the way jtimberman said is what worked for me
[2013-02-14 16:39:23 -0500] matti: yfeldblum: It works of nginx for me too.
[2013-02-14 16:39:43 -0500] matti: yfeldblum: But I have different things I have changed, and others did not work with it.
[2013-02-14 16:40:04 -0500] matti: yfeldblum: Plus, try to set notification_email that way.
[2013-02-14 16:41:18 -0500] matti: yfeldblum: That having said, I spent entire morning today doing trial-and-error trying to get it to where I wanted it to be.
[2013-02-14 16:41:28 -0500] matti: yfeldblum: And it did worked using node.default
[2013-02-14 16:41:55 -0500] matti: yfeldblum: I might be doing it wrong anyway.
[2013-02-14 16:42:38 -0500] matti: jtimberman: java_ops need extra space at the end when concatenating with hard-coded / guessed ones, otherwise it will break.
[2013-02-14 17:04:02 -0500] JoelMcCracken: ah chef makes me feel like such a noob
[2013-02-14 17:04:15 -0500] btm: gondoi: there are separate docs available for private chef.
[2013-02-14 17:07:01 -0500] matti: btm: Hey dude.
[2013-02-14 17:07:14 -0500] matti: btm: People still complain about the JSON buggy.
[2013-02-14 17:07:30 -0500] matti: btm: Is it possible that it might not be fixed?
[2013-02-14 17:07:34 -0500] JoelMcCracken: I just don't get how I am an experienced ruby developer and have had decent experience doing server administration stuff, but find it so confusing
[2013-02-14 17:07:49 -0500] JoelMcCracken: is there documentaiton besides the new wiki and the old wiki?
[2013-02-14 17:09:56 -0500] JoelMcCracken: or do people mostly figure it out via help on irc? or what?
[2013-02-14 17:10:04 -0500] JoelMcCracken: it seems like the community is pretty large
[2013-02-14 17:19:19 -0500] zts: JoelMcCracken: the learning curve can be a bit rough.  If you haven't already, I'd suggest starting your reading with http://wiki.opscode.com/display/chef/Anatomy+of+a+Chef+Run and  http://wiki.opscode.com/display/chef/A+Can+of+Condensed+Chef+Documentation
[2013-02-14 17:20:10 -0500] zts: JoelMcCracken: the mailing list and IRC are both good for help - particularly if you've got a particular goal in mind, but you're having trouble achieving it
[2013-02-14 17:20:38 -0500] JoelMcCracken: yeah.
[2013-02-14 17:21:12 -0500] JoelMcCracken: whenever I try to do something new, I try to avoid asking "noob" questions on irc
[2013-02-14 17:22:46 -0500] zts: Yeah, I feel the same way - but don't worry about asking if you're feeling stuck.  When you're getting starting with Chef, sometimes one explanation is all it takes for a bunch of docs to start making sense
[2013-02-14 17:23:19 -0500] zts: so long as you take the answers and run with them (do more reading, try things out for yourself), nobody will mind a few 'noob' questions.  We've all been there :)
[2013-02-14 17:31:09 -0500] r3vamp: How do I disable chef-client from auto-running after a specific interval. I've tried setting the attributes interval/splay to nil and that just makes it run all the time...
[2013-02-14 17:33:17 -0500] gchristensen: r3vamp: why not just stop the service which is running it?
[2013-02-14 17:33:36 -0500] gondoi: in chef 11 in regards to run locking what does the second runner do when it sees there is an instance already running?
[2013-02-14 17:33:38 -0500] gondoi: just bail?
[2013-02-14 17:33:59 -0500] r3vamp: gchristensen: Yea..why don't I  do that...lol...
[2013-02-14 17:34:24 -0500] fromonesrc: encrypted data bags on vagrant anyone dealt with this?
[2013-02-14 17:34:33 -0500] btm: matti: is there a bug report?
[2013-02-14 17:35:05 -0500] btm: gondoi: you know, I tested it and I can't remember if it just exists or pauses and tries again.
[2013-02-14 17:35:30 -0500] gondoi: lol
[2013-02-14 17:35:39 -0500] btm: gondoi: [2013-02-14T09:35:30-08:00] INFO: Chef client  is running, will wait for it to finish and then run.
[2013-02-14 17:37:17 -0500] gondoi: awesome! thanks btm that is exciting news not sure how I overlooked that feature
[2013-02-14 17:37:33 -0500] yfeldblum: is chef 11 client backcompat with chef 10 server?
[2013-02-14 17:37:55 -0500] gondoi: seems like I saw mention somewhere about push, in that the chef-server can push updates to the client?
[2013-02-14 17:37:59 -0500] gondoi: or is that just crazy talk?
[2013-02-14 17:38:42 -0500] yfeldblum: jtimberman, is chef 11 client backcompat with chef 10 server?
[2013-02-14 17:39:18 -0500] endzyme: yfeldblum: http://wiki.opscode.com/display/chef/Breaking+Changes+in+Chef+11
[2013-02-14 17:41:21 -0500] gchristensen: anyone used https://github.com/fnichol/chef-rvm with vagrant and chef-solo? it doesn't seem to be restoring the ruby environment for the chef-solo wrapper properly, and any insight would be helpful.
[2013-02-14 17:41:30 -0500] yfeldblum: endzyme, i don't see any explicit mention one way or the other
[2013-02-14 17:42:03 -0500] yfeldblum: endzyme, i.e. i'm looking for a positive confirmation, not the lack of negative confirmations
[2013-02-14 17:42:03 -0500] gondoi: gchristensen: you need to set the attribute for the correct path
[2013-02-14 17:42:07 -0500] gondoi: to chef
[2013-02-14 17:42:35 -0500] endzyme: yfeldblum: ah i see - sorry i couldn't help you out
[2013-02-14 17:43:19 -0500] gchristensen: yeah, so I updated it from /opt/vagrant_ruby/bin/chef-solo to /var/lib/gems/1.8/gems/chef-10.14.4/bin/chef-solo - but it doesn't seem to be doing the trick. Or are you suggesting I need to update a different path?
[2013-02-14 17:43:22 -0500] gondoi: also, rvm puts itself in the path first now so that was causing me issues if you setup rvm for the vagrant user directly
[2013-02-14 17:44:37 -0500] gondoi: gchristensen: https://github.com/fnichol/chef-rvm/blob/master/attributes/vagrant.rb#L22-L23
[2013-02-14 17:44:58 -0500] gchristensen: right, those are the paths I updated
[2013-02-14 17:45:11 -0500] gondoi: oh okay
[2013-02-14 17:45:41 -0500] gondoi: the deal is that, that template updates /usr/bin/chef-[solo|client]
[2013-02-14 17:45:48 -0500] JoelMcCracken: what is '@new_resource' logically?
[2013-02-14 17:45:51 -0500] gondoi: but /usr/bin is towards the end of the path
[2013-02-14 17:46:01 -0500] JoelMcCracken: it seems special
[2013-02-14 17:46:12 -0500] gondoi: and rvm will set ~/.rvm at the beginning of the path and if you are installing chef there, it will run that
[2013-02-14 17:46:25 -0500] gchristensen: gondoi: https://gist.github.com/grahamc/03a5eda20c20323aa4ea this is the output of it
[2013-02-14 17:46:28 -0500] gchristensen: ahh okay
[2013-02-14 17:46:53 -0500] gondoi: my work with it has been updating the chef on there with omnibus instead of a gem
[2013-02-14 17:46:59 -0500] gchristensen: adding /usr/bin/ fixed that up. thank you
[2013-02-14 17:47:38 -0500] gondoi: gchristensen: awesome
[2013-02-14 17:51:59 -0500] btm: gondoi: OPC has a new 'push client run' feature. It was mostly mentioned in press releases so far and won't be in the open source server.
[2013-02-14 17:52:31 -0500] btm: yfeldblum: a chef 11 client should run against a chef 10 server.
[2013-02-14 17:52:39 -0500] yfeldblum: btm, ty
[2013-02-14 17:54:04 -0500] gondoi: is there any way to see from the chef server to see when the last successful run on a node was or perhaps when the last save was performed from the client?
[2013-02-14 17:54:59 -0500] btm: gondoi: ohai_time attribute. I think the webui and/or 'knife status' will display it, but 'knife node show FOO -a ohai_time should work.
[2013-02-14 17:55:27 -0500] gondoi: is that the timestamp of when ohai ran?
[2013-02-14 17:55:42 -0500] gondoi: or when it reported back to save the attributes on teh server?
[2013-02-14 17:56:35 -0500] btm: gondoi: when ohai run during the last run that successfully saved to the server. (date --date '@OHAI_TIME')
[2013-02-14 17:59:13 -0500] gondoi: cool thanks btm
[2013-02-14 18:17:43 -0500] JoelMcCracken: are the opscode-cookbooks basically intended to be modified by the users to suit their needs?
[2013-02-14 18:18:04 -0500] JoelMcCracken: or, are they inteded to be generic, should avoid being modified, etc
[2013-02-14 18:19:46 -0500] matticulous: matti: jtimberman: with your help i got back right where i needed to be! was able to override nginx configs (server_name, url, ssl certs, etc). the main one that i need to also change was bookshelf['vip']. now able to do a successful chef client run. thanks again!
[2013-02-14 18:21:32 -0500] gondoi: btm: is there any kind of runtime attribute? I was thinking of creating a cookbook that would create an attribute like ohai, but have it at the end of the run_list, but the problem with that is that i would still need to wait for delayed actions
[2013-02-14 18:21:35 -0500] JoelMcCracken: i'm also interested in *why* they are that way, also
[2013-02-14 18:21:58 -0500] gondoi: btm: or perhaps could a handler tack on an attribute to the node?
[2013-02-14 18:22:13 -0500] jtimberman: JoelMcCracken: there's diverging opinions and workflows based around those opinions.
[2013-02-14 18:22:42 -0500] jtimberman: JoelMcCracken: the *idea* is taht you shouldn't have to modify anything but attributes to change the behavior to suit your environment.
[2013-02-14 18:22:53 -0500] jtimberman: and you can write your own cookbooks to use / modify around them.
[2013-02-14 18:23:00 -0500] JoelMcCracken: but that is not the case, in practice?
[2013-02-14 18:25:01 -0500] jtimberman: it depends )
[2013-02-14 18:25:09 -0500] matti: matticulous: How did you do it in the end?
[2013-02-14 18:25:10 -0500] jtimberman: on which cookbooks, and what your platform is
[2013-02-14 18:25:20 -0500] jtimberman: and how much you agree with the assumptions/opinions of the specific cookbooks.
[2013-02-14 18:25:30 -0500] jtimberman: like I totally agree with them, since I wrote many of them :)
[2013-02-14 18:26:33 -0500] matti: matticulous: Using set.default, or just xxx[''] ?
[2013-02-14 18:27:02 -0500] JoelMcCracken: =)
[2013-02-14 18:28:01 -0500] jtimberman: matticulous: cool
[2013-02-14 18:28:02 -0500] JoelMcCracken: jtimberman: i like them, don't get me wrong =)
[2013-02-14 18:28:12 -0500] jtimberman: JoelMcCracken: Sure.
[2013-02-14 18:28:18 -0500] jtimberman: I mean, my opinions aren't shared by all.
[2013-02-14 18:28:31 -0500] JoelMcCracken: suppperrr glad for the existence of chef, and would love to contribute to it eventually
[2013-02-14 18:28:34 -0500] jtimberman: though you should totally use runit instead of systemd/upstart/init.d ;)
[2013-02-14 18:28:48 -0500] jtimberman: and debian style config for nginx/apache
[2013-02-14 18:28:59 -0500] JoelMcCracken: ha
[2013-02-14 18:34:13 -0500] pabst^: im confused about something... everytime I look at a readme for a cookbook it describes the using a recipe in a role, and it shows something like default_attributes( ... ) however, when I use knife to edit a role, it is more like "default_attributes": { ... } what am I doing wrong?? Its something simple and stupid I am sure
[2013-02-14 18:34:45 -0500] JoelMcCracken: the first is ruby, the second is json
[2013-02-14 18:34:48 -0500] doomviking: json vs ruby, perhaps
[2013-02-14 18:34:51 -0500] doomviking: yeah
[2013-02-14 18:35:15 -0500] jtimberman: yup
[2013-02-14 18:35:44 -0500] jtimberman: pabst^: you can create roles with a Ruby DSL. This is converted by knife into JSON data when it is uploaded on the server.
[2013-02-14 18:36:41 -0500] jtimberman: the ruby DSL for roles: 1, requires less fields be filled out. 2, is somewhat simpler syntax for many folks. 3, allows you to use ruby in the role to shortcut repetition
[2013-02-14 18:37:01 -0500] pabst^: jtimberman: is there a way to have use the Ruby DSL by default? Because what I am seeing is the json correct?
[2013-02-14 18:37:22 -0500] pabst^: i.e. if I edit an existing role by using knife role edit <role>
[2013-02-14 18:41:55 -0500] pabst^: ah. can't use ruby dsl with knife apparently
[2013-02-14 18:42:17 -0500] pabst^: so is there a way I can pull all of the role files down from the server in ruby dsl format?
[2013-02-14 18:43:01 -0500] pabst^: or should I just learn to convert ruby dsl to json in my head :)
[2013-02-14 18:43:12 -0500] JoelMcCracken: jtimberman: can you explain the rationale behind https://github.com/opscode-cookbooks/application_php/blob/master/templates/default/php.conf.erb line #1, which ties 'application_php' to being on port 8080?
[2013-02-14 18:43:22 -0500] JoelMcCracken: pabst^: that's what I do
[2013-02-14 18:43:35 -0500] matti: jtimberman: There should be one for Nodes too.
[2013-02-14 18:44:05 -0500] matti: matticulous: I still want to know which approach you have ended up choosing ;]
[2013-02-14 18:45:02 -0500] pabst^: JoelMcCracken: convert the ruby dsl to json in your head? I don't mind doing this, just need to learn how to do it :)
[2013-02-14 18:45:17 -0500] JoelMcCracken: I also had had to modify cookbooks/apache2/templates/default/apache2.conf.erb  get I assume that since this is a virtual host,
[2013-02-14 18:45:42 -0500] pabst^: shouldn't be too hard
[2013-02-14 18:45:45 -0500] JoelMcCracken: I also had had to modify cookbooks/apache2/templates/default/apache2.conf.erb to include 'NameVirtualHost'
[2013-02-14 18:46:08 -0500] JoelMcCracken: sure, shouldn't be
[2013-02-14 18:47:07 -0500] JoelMcCracken: pabst^: do you have an example?
[2013-02-14 18:48:14 -0500] pabst^: JoelMcCracken: I am actually looking at the opscode site now to get a feel for it, doesn't look difficult at all, just going to be a matter of making it a practice
[2013-02-14 18:48:34 -0500] pabst^: JoelMcCracken: Think I have it though. Will know in a minute!
[2013-02-14 18:48:40 -0500] JoelMcCracken: cool
[2013-02-14 18:48:58 -0500] JoelMcCracken: getting lunch myself
[2013-02-14 18:49:38 -0500] pabst^: Yup! Whee!!
[2013-02-14 18:51:19 -0500] matticulous: matti: i ended up just adding nginx['server_name'], nginx['url'], nginx['ssl_certificate'], nginx['ssl_certificate_key'}, and bookshelf['vip'] to the chef-server.rb. and re-ran chef-server-ctl configure.
[2013-02-14 18:51:29 -0500] pabst^: chef is my valentine
[2013-02-14 18:51:36 -0500] pabst^: ssshhhh don't tell my wife
[2013-02-14 18:51:52 -0500] matticulous: after that, the chef client run worked great on my remote client
[2013-02-14 18:52:35 -0500] matti: pabst^: LOL
[2013-02-14 18:52:49 -0500] mshilling: hello.  we have about 350 chef clients and now I want to start using environments for our prod/dev/qa boxes.  (I inherited this system).  Is there a way to batch add the environment to a group of boxes?  or a one liner I can use within a script with knife?
[2013-02-14 18:53:08 -0500] matti: matticulous: I need to test this. I am sure something has failed for me without set.default .... ;/
[2013-02-14 18:56:18 -0500] pabst^: mshilling: just be happy you didn't inherit a puppet environment where everything goes straight to production. No git branching, nothing, you commit it goes to production. </end rant>
[2013-02-14 18:56:44 -0500] mattray: mshilling: play around with this:
[2013-02-14 18:56:45 -0500] mattray: knife exec -E 'nodes.transform(:all) { |n| n.chef_environment("production") }'
[2013-02-14 18:57:19 -0500] mattray: mshilling: that moves them all into production, you should be able to build a filter of some sort
[2013-02-14 18:57:26 -0500] mattray: mshilling: knife exec is your friend
[2013-02-14 18:57:44 -0500] mattray: http://docs.opscode.com/knife_exec.html
[2013-02-14 18:57:44 -0500] doomviking: pabst^: that is what I found when I got to my current company. massaged it for a couple of months until I decided to tear it out.
[2013-02-14 18:58:35 -0500] pabst^: doomviking: I tried tearing it out, client refused and forced me to work with their crappy puppet crap, so when I built my own test environment so I made sure I wasn't impacting production, they decided to terminate the contract. I am sueing them now.
[2013-02-14 18:58:39 -0500] mshilling: mattray, thanks.  I can work with that
[2013-02-14 18:59:02 -0500] doomviking: ouch
[2013-02-14 18:59:56 -0500] pabst^: Why hire a consultant if your just going to ignore them? Something I have never understood. Especially when your reasoning for hiring said consultant was to make things right.
[2013-02-14 19:00:57 -0500] miah: ^^^^
[2013-02-14 19:01:24 -0500] miah: in my short consulting career thats exactly what i experienced
[2013-02-14 19:01:54 -0500] btm: gondoi: http://wiki.opscode.com/display/chef/Exception+and+Report+Handlers
[2013-02-14 19:02:01 -0500] pabst^: Its ridiculously frustrating. I can understanding having some basic differences and working to meet in the middle
[2013-02-14 19:02:14 -0500] pabst^: but that wasn't the case here, they were looking for more of a staff aug than a consultant
[2013-02-14 19:02:25 -0500] gondoi: btm: heh yeah i think i may have something figured out
[2013-02-14 19:03:58 -0500] pabst^: What is worse, they provided a Time and Materials contract, refused my statement of work based contract, so I am about to outright eviscerate them in court for breaching the contract by not paying an invoice and failure to properly terminate the contract.
[2013-02-14 19:04:49 -0500] doomviking: what a giant pita
[2013-02-14 19:05:07 -0500] miah: pabst^: good luck, and its awesome that you stuck to your standards.
[2013-02-14 19:05:15 -0500] pabst^: Yeah, will be the last time I do a time and materials contract like that
[2013-02-14 19:05:21 -0500] pabst^: miah: thanks
[2013-02-14 19:23:09 -0500] drvonnostren: I hate to be the bimbo, but if all of your work is done via knife on the workstation and all cookbooks live on the worstation as well, what is the purpose of the server?
[2013-02-14 19:26:36 -0500] mattt: drvonnostren: you want your nodes connecting to your workstation?  :)
[2013-02-14 19:28:27 -0500] drvonnostren: sure, if my workstation is actually a vm sitting in the cloud that i SSH to, but i get your point, flexibility in segreagating functions
[2013-02-14 19:29:15 -0500] miah: not to mention.. its your workstation. a workstation != production server.
[2013-02-14 19:29:33 -0500] mattt: drvonnostren: but there's nothing stopping you from having your "workstation" be on the server, that will obviously work
[2013-02-14 19:29:50 -0500] miah: hopefully you're managing your workstation with chef at least :P
[2013-02-14 19:30:27 -0500] mattt: drvonnostren: you can run knife from the server, i actually do that for my personal stuff
[2013-02-14 19:30:54 -0500] miah: you can run knife from anywhere that has access to your server (or hosted chef) and has your client key.
[2013-02-14 19:31:08 -0500] miah: i use knife on myh workstation, but my workstation is not my server.
[2013-02-14 19:31:18 -0500] mattt: miah: well why not!
[2013-02-14 19:32:17 -0500] miah: because my workstation isn't always on, and its  configuration and stability is not guarenteed.
[2013-02-14 19:34:35 -0500] pabst^: man SugarCRM is mind numbing
[2013-02-14 19:34:51 -0500] mattt: how do you reset admin password on chef-server 11 ?
[2013-02-14 19:41:53 -0500] gchristensen: man, using chef to setup ruby seems to be breaking my brain
[2013-02-14 19:42:04 -0500] miah: gchristensen: elaborate?
[2013-02-14 19:43:16 -0500] gchristensen: well specifically I'm using chef solo and vagrant, and hoping to use rvm. I'm using omnibus, but everything I'm doing seems to break Chef in one way or another.
[2013-02-14 19:43:27 -0500] gchristensen: I wish I had details for you now, I probably need to rewind and give it another shot.
[2013-02-14 19:45:09 -0500] miah: are you using chef-rvm (https://github.com/fnichol/chef-rvm)
[2013-02-14 19:46:05 -0500] gchristensen: yeah, I started using rvm::system, then system_install, and the ::vagrant one too. now I'm experimenting with just the user_install one (the least invasive version.)
[2013-02-14 19:46:24 -0500] gchristensen: I've used Chef a lot for non-ruby stuff, so I didn't expect to hit so many barriers
[2013-02-14 19:46:25 -0500] miah: rvm::system is pretty much a guarenteed way to fuck things up
[2013-02-14 19:47:01 -0500] miah: not saying fnichol messed things up. but its easy to fubar your entire ruby setup with that
[2013-02-14 19:47:01 -0500] doomviking: I'm glad you said that miah. I went down that rabbit hole last week. run dont walk.
[2013-02-14 19:47:08 -0500] mattt: that moment when your hardcover book arrives and the first thing you read is that it's available under creative commons license
[2013-02-14 19:47:09 -0500] miah: stick to user_install
[2013-02-14 19:47:39 -0500] gchristensen: miah: good to know :P it still doesn't really play nicely with vagrant, but I'm making a touch more progress.
[2013-02-14 19:47:49 -0500] sjansen: I'm seeing a really strange bug after switching from gem-based knife 10.20 to omnibus 10.20/10.22: encrypted data bag values disappear if they contain "\n" unless they also contain "---"
[2013-02-14 19:47:54 -0500] sjansen: Is that a known issue?
[2013-02-14 19:48:14 -0500] miah: gchristensen: i know the chef-rvm cookbook works fine with vagrant =)
[2013-02-14 19:49:50 -0500] gchristensen: maybe I messed it up :)
[2013-02-14 19:50:18 -0500] mconigliaro: gchristensen: vagrant breaks if you set the default ruby to something other than 'system'
[2013-02-14 19:50:38 -0500] mconigliaro: (the chef gems probably don't exist under other rubies)
[2013-02-14 19:51:42 -0500] mconigliaro: not sure if that's your problem, but it bit me once
[2013-02-14 19:51:53 -0500] gchristensen: ah I know I was doing that at one point, but I'm not doing that now.
[2013-02-14 19:53:32 -0500] gchristensen: I'll try and get my head back on straight and formalize a real question :)
[2013-02-14 19:53:35 -0500] gchristensen: thank you for all the help!
[2013-02-14 19:58:23 -0500] miah: good luck =)
[2013-02-14 19:59:42 -0500] joonas: gchristensen: heh, your experience resembles mine :P
[2013-02-14 19:59:51 -0500] joonas: breaking my brain with that
[2013-02-14 20:00:23 -0500] mshilling: anyone good with knife exec?
[2013-02-14 20:00:24 -0500] gchristensen: joonas: did you end up finding a simple solution? :)
[2013-02-14 20:00:42 -0500] joonas: gchristensen: not really :)
[2013-02-14 20:01:04 -0500] joonas: I don't remember what I ended up doing, but I don't remember it being simple or elegant :P
[2013-02-14 20:01:06 -0500] gchristensen: I'm *nearly* to the point that I just need to get stuff done, and will do it manually then snapshot the box.
[2013-02-14 20:01:34 -0500] mshilling: having trouble with knife exec, setting my environment :  https://gist.github.com/anonymous/4955881
[2013-02-14 20:03:55 -0500] kgraham: what's the best way to use chef to install rails/rvm (1.9.3)/passenger on amazon/fedora linux
[2013-02-14 20:04:09 -0500] kgraham: i've tried several methods but all fail because of dependencies or incompatible cookbooks
[2013-02-14 20:06:37 -0500] drvonnostren: can anyone help me troubleshoot why i cannot upload cookbooks to my server using knife? I am able to bootstrap nodes but get this error with "knife cookbook upload apache2" : /opt/chef/embedded/lib/ruby/1.9.1/net/http.rb:762:in `initialize': Connection refused - connect(2) (Errno::ECONNREFUSED)
[2013-02-14 20:07:02 -0500] kgraham: is it trying to connect to your localhost?
[2013-02-14 20:09:48 -0500] drvonnostren: my knife.rb has this defined: chef_server_url          'https://chefserver:443'
[2013-02-14 20:10:21 -0500] drvonnostren: with the appropraite entry in /etc/hosts
[2013-02-14 20:10:39 -0500] gchristensen: mconigliaro: out of curiosity, how did you install base gems in the RVM, like... bundler? :P
[2013-02-14 20:11:10 -0500] gchristensen: also, these vagrant VMs are running 10.14.2 - should I manually upgrade this? or is this some'thing people just deal with?
[2013-02-14 20:11:30 -0500] mconigliaro: base gems?
[2013-02-14 20:12:01 -0500] mconigliaro: honestly, you should think about creating your own base boxes
[2013-02-14 20:12:12 -0500] mconigliaro: then you have full control of that sort of stuff
[2013-02-14 20:12:14 -0500] gchristensen: ah
[2013-02-14 20:12:28 -0500] gchristensen: I'm fine with that. I didn't know it was actually recommended to be done
[2013-02-14 20:12:30 -0500] mconigliaro: bbl, meeting :-/
[2013-02-14 20:12:36 -0500] gchristensen: see you, thanks for the push.
[2013-02-14 20:18:56 -0500] mshilling: anyone know how I would replace the :all in this statement to do something like a grep (I need to check the node name for a string of characters)  :   knife exec -E 'nodes.transform(:all) ...
[2013-02-14 20:26:58 -0500] rafaelmagu: What's the best way to run chef-client only on nodes that haven't checked in for X hours?
[2013-02-14 20:39:00 -0500] user___: I'm setting an node attribute durring run time, and then attempting to query through knife, but it's not returning the node (0 results)  the attribute='Some_command_complete'...is there something wrong with my knife command?   knife search node "some_command_complete:*"
[2013-02-14 20:40:13 -0500] ashp: Quick random question:  does the chef ecosystem have anything like mcollective/fabric/etc for deployment type tasks or is capistrano or mcollective just used commonly?
[2013-02-14 20:41:01 -0500] qhartman: a lot of people use capistrano w/ chef
[2013-02-14 20:41:44 -0500] ashp: Ah ok, just wondering as I was talking to a friend about chef vs puppet and they use mcollective and I wasn't sure if chef had a preferred tool.
[2013-02-14 20:43:01 -0500] qhartman: I personally jsut use"knife ssh"
[2013-02-14 20:43:26 -0500] qhartman: and very rarely "knife exec"
[2013-02-14 20:43:52 -0500] qhartman: it really depends on what exactly you need to do, and what you are already familiar with
[2013-02-14 20:44:47 -0500] qhartman: Chef is generally a lot more open ended than puppet, so the "preferred tool" will vary a lot depending on who you talk to
[2013-02-14 20:47:33 -0500] drvonnostren: Why is my chef server unreachable by knife after rebooting? I issued this command upon reboot and it appears to have luanched everything sucessfully: chef-server-ctl start
[2013-02-14 20:48:02 -0500] drvonnostren: it is pingable...
[2013-02-14 20:48:24 -0500] qhartman: is port 4000 listening?
[2013-02-14 20:48:38 -0500] drvonnostren: [root@chefworkstation ~]# knife node list ERROR: Errno::EHOSTUNREACH: No route to host - connect(2)
[2013-02-14 20:48:49 -0500] drvonnostren: i have it setup on 443...
[2013-02-14 20:49:31 -0500] mshilling: 443 for the web, but what about the api
[2013-02-14 20:49:48 -0500] mdellabitta: any devs on? i'd like to report a security vulnerability.
[2013-02-14 20:50:32 -0500] drvonnostren: well iptables if off chef server is started
[2013-02-14 20:52:04 -0500] drvonnostren: netstat -an doesnt show anything listening on 4000
[2013-02-14 20:52:13 -0500] kderr: Hi all. Using knife 10 to administer chef 11 -- should I expect this to fail miserably?
[2013-02-14 20:53:30 -0500] kderr: I'm trying to upload some cookbooks and I'm a bit confused as to why something so simple seems to be breaking.
[2013-02-14 20:53:48 -0500] MrBIOS: get used to it :P
[2013-02-14 20:53:52 -0500] kderr: haha
[2013-02-14 20:55:48 -0500] kderr: Seriously though. How many folks are actually using/trusting chef-server 11/
[2013-02-14 20:57:53 -0500] drvonnostren: mshilling: i had definted chef_server_url          'https://chefserver:443' in my knife.rb file and this had been working before the reboot.
[2013-02-14 20:58:12 -0500] qhartman: not this guy. Not until Opscode puts out a migration guide and someone else has bled all over it.
[2013-02-14 20:58:53 -0500] mattt: qhartman: haha
[2013-02-14 20:59:16 -0500] kderr: qhartman: Does rubygems-install work for chef 10 again? that's the only reason I started trying, because they broke my chef 10 deployment.
[2013-02-14 20:59:36 -0500] qhartman: kderr, yeah, use version 10.22.0 and you should be good
[2013-02-14 20:59:46 -0500] miah: no reason not to test on your own and write that migration guide
[2013-02-14 20:59:52 -0500] kderr: qhartman: Roger, dodger.
[2013-02-14 20:59:56 -0500] mattray: anyone know how to colorize output from Chef::Log.warn?
[2013-02-14 20:59:59 -0500] qhartman: either specify it in your bootstrap command, or upgrade your workstation to it so it uses that version automatically.
[2013-02-14 21:00:41 -0500] qhartman: miah, I'm already buried with projects. No need to borrow trouble.
[2013-02-14 21:01:28 -0500] qhartman: we spend enough time out on the bleeding edge already
[2013-02-14 21:01:44 -0500] qhartman: SO.... MUCH... BLOOD....
[2013-02-14 21:02:01 -0500] mshilling: quick question.  When I put a node into an environment via the chef_environment attribute, why does it show up both in the environment I set it to, plus NONE, when I check the drop down in webui?
[2013-02-14 21:04:13 -0500] dotslash: When I try to upload a recipe using knife, I'm seeing: /opt/chef/embedded/lib/ruby/1.9.1/net/http.rb:2632:in `error!': 404 "Not Found" (Net::HTTPServerException)
[2013-02-14 21:04:22 -0500] dotslash: Any ideas? Some recipes work others don't.
[2013-02-14 21:04:28 -0500] Majost: What is the easiest way to cause an 'apt-get upgrade -y ' when bootstrapping a system?
[2013-02-14 21:04:55 -0500] Majost: I was hoping that the apt cookbook would have a recipe for this -- but it doesn't seem to be the case.
[2013-02-14 21:04:58 -0500] dotslash: Majost: You could put it in the bootstrap template.
[2013-02-14 21:05:00 -0500] kderr: qhartman: How do you lock the rubygems-install recipe to a chef version, anyway?
[2013-02-14 21:05:11 -0500] Majost: bootstrap template?
[2013-02-14 21:05:52 -0500] dotslash: Majost: http://wiki.opscode.com/display/chef/Custom+Knife+Bootstrap+Script
[2013-02-14 21:06:11 -0500] dotslash: Majost: There may be a better way, but that would let you do it during the bootstrap before anything is installed.
[2013-02-14 21:06:50 -0500] Majost: huh
[2013-02-14 21:06:51 -0500] Majost: thanks
[2013-02-14 21:06:53 -0500] Majost: =)
[2013-02-14 21:07:27 -0500] mattt: dotslash: handy
[2013-02-14 21:08:55 -0500] log1kal: this is tangentially related to chef: Anyway to have chef-solo default to debug inside a vagrant?
[2013-02-14 21:09:04 -0500] qhartman: kderr, I just use "knife bootstrap" and either specify the version on the command-line, or the easier method, upgrade my workstation (with "gem install chef -v 10.22.0" for example) and then do a "plain" knife bootstrap command. I don't know any other method. Sorry
[2013-02-14 21:09:22 -0500] log1kal: not showing "skipped due to not_if" during vagrant provisioning is killing me
[2013-02-14 21:10:22 -0500] teukka: log1kal: chef.log_level = :debug
[2013-02-14 21:10:44 -0500] log1kal: teukka: you're currently my favorite human. Thanks!
[2013-02-14 21:10:54 -0500] teukka: log1kal: np =)
[2013-02-14 21:14:46 -0500] teukka: log1kal: how do you know I'm not a bot?
[2013-02-14 21:15:22 -0500] log1kal: I was going to say something like you or your programmer(s) is/are my favorite humans
[2013-02-14 21:15:33 -0500] log1kal: but what if you were coded by another piece of code?
[2013-02-14 21:16:09 -0500] log1kal: I'll just go with "Thanks!" then :)
[2013-02-14 21:16:37 -0500] matti: Favourite human?
[2013-02-14 21:16:39 -0500] matti: LOL
[2013-02-14 21:16:43 -0500] matti: Sounds like owning a pet.
[2013-02-14 21:17:20 -0500] matti: log1kal: Don't forget to feed teukka ;p And walk him twice a day.
[2013-02-14 21:17:29 -0500] dotslash: When I try to upload a recipe using knife, I'm seeing: /opt/chef/embedded/lib/ruby/1.9.1/net/http.rb:2632:in `error!': 404 "Not Found" (Net::HTTPServerException)
[2013-02-14 21:23:01 -0500] mshilling: I think I figured out my other issue, but does anyone know a way to do a knife search node where a variable is not set? (chef_environment is blank)
[2013-02-14 21:24:24 -0500] chris613: Is there a quick and easy way for me to set the run_list of all hosts to a particular value?
[2013-02-14 21:25:25 -0500] matti: chris613: Via a role?
[2013-02-14 21:26:52 -0500] qhartman: dotslash, usually when I get a 404 connecting to the chef server with knife (or chef client) it's a result of an authentication failure because the client is not setup correctly.
[2013-02-14 21:28:21 -0500] chris613: matti: That begs the question since a role is a run_list item
[2013-02-14 21:28:40 -0500] chris613: I really just want to set the run_list to empty on all my nodes, and then to "base" on a subset of them
[2013-02-14 21:28:51 -0500] chris613: I'm removing legacy cruft and starting "fresh" with a well tested base
[2013-02-14 21:28:55 -0500] matti: Ah.
[2013-02-14 21:29:01 -0500] matti: I did something like that.
[2013-02-14 21:29:09 -0500] matti: A dummy recipe from a dummy cookbook.
[2013-02-14 21:29:21 -0500] matti: With removed ites from run_list on a host in compile time.
[2013-02-14 21:29:39 -0500] qhartman: chris613, you can probably do that with a  knife exec
[2013-02-14 21:29:46 -0500] chris613: Hmm, I have a couple solutions in mind that are better than that.
[2013-02-14 21:29:51 -0500] chris613: qhartman: Yes, that's what I'm hoping
[2013-02-14 21:30:01 -0500] chris613: just looking for hints on where to start
[2013-02-14 21:30:17 -0500] matti: I was using solo, so no knife exec ;d
[2013-02-14 21:30:55 -0500] qhartman: Totally untested and probably wrong from the top of my head: knife exec -E 'nodes.transform(:all) { |n| n.run_list("") }
[2013-02-14 21:32:33 -0500] chris613: qhartman: Thank you! I had just sortof found my way to the knife exec page. This looks exactly like what I'm looking for.
[2013-02-14 21:33:17 -0500] qhartman: chris613, sure thing. In case you haven't found it, the latest docs are http://docs.opscode.com/knife_exec.html
[2013-02-14 21:33:18 -0500] chris613: qhartman: What's the diference between node.all do |n|.....  and nodes.transform(:all) ??
[2013-02-14 21:34:01 -0500] matti: qhartman: You might need .delete { true } or something, as run_list is an arrya.
[2013-02-14 21:34:03 -0500] qhartman: chris613, I don't think there is one, that's just the idiom I've used successfully
[2013-02-14 21:34:19 -0500] chris613: okay. I'll try it out and report back the successful command for the chatlog
[2013-02-14 21:34:19 -0500] qhartman: matti, yes, good point
[2013-02-14 21:34:44 -0500] matti: :>
[2013-02-14 21:35:21 -0500] qhartman: If something in the docs contradicts me, please for the love of god follow the docs. The odds of them being more right than me is very very high.
[2013-02-14 21:35:43 -0500] chris613: Would a n.save() be required? I've never been clear on when it is and when it isn't
[2013-02-14 21:36:18 -0500] qhartman: chris613, I don't think so. Since knife exec runs like a chef-client run, having it just finish cleanly should have it save
[2013-02-14 21:36:35 -0500] qhartman: (again, not sure as I just started using knife exec myself)
[2013-02-14 21:38:46 -0500] drvonnostren: after installing chef-server 11 nothing appears to be listening on port 4000, whats up?
[2013-02-14 21:40:39 -0500] matti: drvonnostren: chef-server-ctl test
[2013-02-14 21:40:52 -0500] matti: drvonnostren: If this passes, then nothing to worry about.
[2013-02-14 21:41:24 -0500] kderr: ARGH. I still can't make the !@#$ing rubygems-install work. Now it's blowing up when it installs the chef-server-api gem. Is anyone in here confident this stuff actually works?
[2013-02-14 21:42:17 -0500] drvonnostren: matti: it passed, perhps you can shed some light on why knife (on a seperate machine) doesnt want to upload cookbooks to the server
[2013-02-14 21:43:02 -0500] matti: drvonnostren: netstat -antp shows nothing?
[2013-02-14 21:43:12 -0500] matti: drvonnostren: Firewall? Not sure.
[2013-02-14 21:43:28 -0500] drvonnostren: not on 4000 it doesnt
[2013-02-14 21:43:41 -0500] drvonnostren: my knife.rb uses 443
[2013-02-14 21:43:48 -0500] drvonnostren: and i can get a node list
[2013-02-14 21:43:56 -0500] drvonnostren: but i cannot push cookbooks
[2013-02-14 21:44:15 -0500] matti: Weird.
[2013-02-14 21:44:16 -0500] drvonnostren: heres an output of it all: http://fpaste.org/YWEQ/
[2013-02-14 21:44:17 -0500] matti: Let me see my 11
[2013-02-14 21:45:10 -0500] kderr: drvonnostren: I'm having the *same exact* problem. So if you fix that, please PM me!
[2013-02-14 21:46:42 -0500] matti: drvonnostren: Nothing on 4000.
[2013-02-14 21:46:45 -0500] user___: running command= knife node show NODE -Fj    returns: {  "normal": {    "some_command_complete": true,  }}   to query for "some_command_complete" should just be this, right? : knife search node "some_command_complete:*"  i get no hits returned
[2013-02-14 21:47:59 -0500] chris613: For the record, this is what I used to wipe out my run_list across all nodes: knife exec -E 'nodes.all {|n| n.run_list([]); n.save()}'     the n.save() may not be necesarry, but it worked
[2013-02-14 21:49:28 -0500] drvonnostren: matti: iptables and selinux disabled everywhere
[2013-02-14 21:49:32 -0500] qhartman: chris613, cool, thanks.
[2013-02-14 21:52:46 -0500] chris613: qhartman: is .transform() a chef thing or a ruby thing? I'm trying to find a reference that explains exactly what I can do with it.
[2013-02-14 21:53:22 -0500] drvonnostren: kderr: its ridiculous. I am looking in nettop and it attempts to use port 443 which is the same port it uses when i type "knife node list"
[2013-02-14 21:54:10 -0500] kderr: drvonnostren: I think it expects to have nginx listening on SSL/443. But I can't make nginx work, either, because it keeps redirecting me to an address that's nonsensical. Have you tried configuring knife with either :80 or https://<host>:443/ ?
[2013-02-14 21:55:24 -0500] drvonnostren: kderr: im already doing the ladder
[2013-02-14 21:55:32 -0500] drvonnostren: err latter
[2013-02-14 21:55:34 -0500] drvonnostren: ?
[2013-02-14 21:55:51 -0500] kderr: drvonnostren: Have you tried just specifying https:// in the knife.rb? I thought about trying that.
[2013-02-14 21:56:14 -0500] drvonnostren: no because i can communicate with the server in other ways
[2013-02-14 21:56:31 -0500] matti: Hm, I have the same problem ;d
[2013-02-14 21:56:36 -0500] drvonnostren: such as knife node list... so it seems i am able to correctly communicate, to me it seems something else is afoot
[2013-02-14 21:57:07 -0500] kderr: drvonnostren: Yeah, that's where I'm at.
[2013-02-14 21:57:23 -0500] josephholsten: drvonnostren: mind repeating your problem?
[2013-02-14 21:57:27 -0500] qhartman: chris613, not sure what you're referring to. the only .transform() I know of is a method on YAML objects.  http://yaml4r.sourceforge.net/doc/page/parsing_yaml_documents.htm
[2013-02-14 21:57:29 -0500] drvonnostren: my knife.rb has : chef_server_url'https://chefserver:443'
[2013-02-14 21:57:37 -0500] matti: -ctl test works as it is via lo.
[2013-02-14 21:58:27 -0500] kderr: drvonnostren: Are you also pursuing 11 only because they broke the shit out of the install process for 10?
[2013-02-14 21:59:15 -0500] drvonnostren: YES!!!!! Honestly, ive never dealt with anything so convuluted (honestly if it wasnt for my boss I would have abandoned days ago)
[2013-02-14 21:59:38 -0500] chris613: qhartman: Thank you! I've been poring over the various references trying to find this
[2013-02-14 21:59:40 -0500] kderr: drvonnostren: Aight, so, between the two of us we should be able to get this done, maybe. Kind of.
[2013-02-14 22:00:37 -0500] drvonnostren: kderr: what is your error when you try to upload cookbooks
[2013-02-14 22:00:54 -0500] kderr: drvonnostren: Same as yours. I've been trying to get 10 working again because I gave up. But it's still busted.
[2013-02-14 22:01:09 -0500] qhartman: chris613, np. Glad I could help
[2013-02-14 22:01:31 -0500] kderr: drvonnostren: Are you using chef-client/knife 10 or 11?
[2013-02-14 22:01:51 -0500] drvonnostren: kderr: im using 11 everywhere
[2013-02-14 22:02:00 -0500] kderr: drvonnostren: /me nods
[2013-02-14 22:02:11 -0500] josephholsten: drvonnostren, kderr: have you confirmed bookshelf is operating correctly?
[2013-02-14 22:02:58 -0500] kderr: josephholsten: how do I do that?
[2013-02-14 22:03:03 -0500] matti: josephholsten: test --all passes.
[2013-02-14 22:03:11 -0500] matti: josephholsten: Yet, same problem as kderr and drvonnostren
[2013-02-14 22:03:21 -0500] drvonnostren: josephholsten: honestly i dont even know what that is yet.
[2013-02-14 22:03:32 -0500] josephholsten: https://github.com/opscode/bookshelf
[2013-02-14 22:04:19 -0500] kderr: why does the first sentence of this talk about s3? lol.
[2013-02-14 22:04:46 -0500] matti: josephholsten: http://pastebin.com/U9zpAL3h
[2013-02-14 22:04:51 -0500] josephholsten: it's the cookbook store. they use s3 in hosted chef.
[2013-02-14 22:05:16 -0500] matti: josephholsten: lo
[2013-02-14 22:05:28 -0500] matti: josephholsten: lo == localost, I mean. Is that expected?
[2013-02-14 22:05:30 -0500] iverson0881: yeah having errors uploading here as well
[2013-02-14 22:05:37 -0500] iverson0881: INFO: HTTP Request Returned 400 Bad Request: You didn't pass me a valid object!
[2013-02-14 22:05:45 -0500] iverson0881: when running knife cookbook upload $cookbook_Name
[2013-02-14 22:05:46 -0500] kderr: josephholsten: I'm running a local S3-compatible stack already. Can I just point my chef-servers at that?
[2013-02-14 22:05:51 -0500] kderr: josephholsten: <lightbulb>
[2013-02-14 22:05:52 -0500] iverson0881: using hosted chef
[2013-02-14 22:06:19 -0500] iverson0881: or i get: ERROR: JSON::ParserError: Unsupported `json_class` type 'Symbol'
[2013-02-14 22:06:24 -0500] josephholsten: I'm not sure, bookshelf might only need to be available to erchef on localhost
[2013-02-14 22:06:34 -0500] iverson0881: ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux], Chef: 11.4.0
[2013-02-14 22:06:40 -0500] spox: ohai chef 11 people that are having problems with uploading stuffs
[2013-02-14 22:06:50 -0500] iverson0881: :(
[2013-02-14 22:06:52 -0500] spox: you have to update a few different settings when you bootstrap erchef
[2013-02-14 22:06:57 -0500] drvonnostren: I am really new to chef and got my cookbook using this method: knife cookbook site download apache2
[2013-02-14 22:07:02 -0500] spox: to get nginx and everything else to behave properly
[2013-02-14 22:07:15 -0500] spox: but,
[2013-02-14 22:07:18 -0500] spox: good news everyon!
[2013-02-14 22:07:20 -0500] spox: http://community.opscode.com/cookbooks/chef-server-populator
[2013-02-14 22:07:29 -0500] matti: LOL
[2013-02-14 22:07:44 -0500] spox: have a look at that. it has a nice attribute you can set when you're bootstrapping erchef so you can get at via ip address instead
[2013-02-14 22:07:49 -0500] spox: and all can be right with the world
[2013-02-14 22:08:10 -0500] kderr: spox: /me facepalms
[2013-02-14 22:08:30 -0500] matti: Wait a minute.
[2013-02-14 22:08:36 -0500] matti: So, what is broken actually?
[2013-02-14 22:08:52 -0500] spox: the actual chef-server cookbook uses fqdn in various places, not just nginx
[2013-02-14 22:08:56 -0500] spox: so if you don't change all of them
[2013-02-14 22:09:03 -0500] spox: you will get redirect to the fqdn regardless
[2013-02-14 22:09:12 -0500] spox: but only for certain things
[2013-02-14 22:09:22 -0500] spox: which makes it super annoying when you see it working, then failing :P
[2013-02-14 22:09:26 -0500] josephholsten: oh my
[2013-02-14 22:09:38 -0500] matti: Borked then.
[2013-02-14 22:09:42 -0500] matti: It should be a bug.
[2013-02-14 22:09:53 -0500] josephholsten: yeah, this is cute: https://github.com/hw-cookbooks/chef-server-populator/blob/master/recipes/default.rb#L1
[2013-02-14 22:10:19 -0500] kderr: spox: So, basically, it's just an issue of making sure node[:fqdn] is actually meaningful?
[2013-02-14 22:10:35 -0500] kderr: spox (when you run chef-solo)
[2013-02-14 22:10:39 -0500] spox: kderr: either that, or override the correct attributes to return what you expect
[2013-02-14 22:10:54 -0500] spox: (those attributes being what josephholsten just linked to)
[2013-02-14 22:11:01 -0500] kderr: spox: yep
[2013-02-14 22:11:31 -0500] kderr: eff em ell
[2013-02-14 22:13:34 -0500] matti: https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-02-14 22:15:46 -0500] matti: spox: I have fqdn set everywhere, and it fails.
[2013-02-14 22:16:08 -0500] spox: matti: eh?
[2013-02-14 22:16:23 -0500] matti: spox: I am not sure what is broken there? Why is fqdn bad?
[2013-02-14 22:16:38 -0500] spox: matti: it's only bad if the fqdn isn't resolvable
[2013-02-14 22:16:49 -0500] kderr: In my case, the fqdn *is* resoluble and it still did not work
[2013-02-14 22:16:50 -0500] kderr: so
[2013-02-14 22:16:52 -0500] kderr: I don't think this is my problem.
[2013-02-14 22:17:12 -0500] matti: It is resolvable.
[2013-02-14 22:17:15 -0500] kderr: But I'm going to try this whole default['chef_server']['nginx']['enable_non_ssl'] = false
[2013-02-14 22:17:21 -0500] kderr: I'm going to set that to true.
[2013-02-14 22:17:26 -0500] matti: Its a proper IN A and has in-addr.arpa. too
[2013-02-14 22:17:30 -0500] spox: kderr: was it spitting out a redirect to http://chefserver?
[2013-02-14 22:17:43 -0500] kderr: I think it was spitting out a redirect to 443 and knife wasn't following it
[2013-02-14 22:17:46 -0500] kderr: but, I'm not sure.
[2013-02-14 22:18:05 -0500] kderr: Actually. The first thing I'm going to do is try running this chef-server-populator
[2013-02-14 22:19:06 -0500] iverson0881: is hosted chef just completely borked for everyone?
[2013-02-14 22:19:33 -0500] matti: iverson0881: They were some people complaining before.
[2013-02-14 22:19:34 -0500] kderr: iverson0881: No. It's not really the same shit. Different db backend. No bookshelf (apparently).
[2013-02-14 22:19:54 -0500] kderr: iverson0881: Hosted chef has been running erchef for quite awhile now.
[2013-02-14 22:20:20 -0500] user___: sorry to spam this, but one more time :)...why would this return the my node, and the attribute/value pair:  knife search node "name:A*" -a testnodeattribute, but this NOT return the node I used in the first query?  knife search node "testnodeattribute:*"
[2013-02-14 22:20:39 -0500] iverson0881: kderr: i can't seem to upload cookbooks and i believe one of my cookbooks is now in a half uploaded state
[2013-02-14 22:20:59 -0500] kderr: iverson0881: yeah, 4 of us in here are having that problem.
[2013-02-14 22:21:18 -0500] iverson0881: kderr: well, fuck. any workarounds right now?
[2013-02-14 22:21:23 -0500] kderr: iverson0881: and we're going to try this: https://github.com/hw-cookbooks/chef-server-populator/
[2013-02-14 22:21:24 -0500] kderr: haha
[2013-02-14 22:22:07 -0500] miah:  ther are occasionally api timeouts. popularity is somethings overwhelming.
[2013-02-14 22:22:11 -0500] iverson0881: kderr: so basically hosted chef is down right now, effectively?
[2013-02-14 22:22:14 -0500] miah: just try again and it will probably work
[2013-02-14 22:22:28 -0500] iverson0881: been trying the last hour
[2013-02-14 22:22:30 -0500] miah: because i used hosted chef and its working fine for me
[2013-02-14 22:22:49 -0500] iverson0881: been having a bad experience since this whole json mess
[2013-02-14 22:22:51 -0500] jtimberman: seems to be working for me.
[2013-02-14 22:23:14 -0500] iverson0881: tried 10.22.0 and 11.4.0
[2013-02-14 22:23:16 -0500] iverson0881: with json 1.7.7
[2013-02-14 22:23:52 -0500] jtimberman: Support is the best point of contact for assistance with Hosted Chef. support@opscode.com or http://www.opscode.com/support/
[2013-02-14 22:24:11 -0500] Majost: Does anyone here use the maven provider for retrieving/deploying stuff?
[2013-02-14 22:24:34 -0500] josephholsten: Majost: we're trying to switch to it
[2013-02-14 22:24:48 -0500] Majost: I seem to be encountering a bug -- but It might be me doing something stupid
[2013-02-14 22:24:49 -0500] kderr: jtimberman: there's a few of us in here having issues with open source chef-server 11. Installing it and then things mostly working but not being able to upload cookbooks.
[2013-02-14 22:25:06 -0500] kderr: jtimberman: I'm going to try using this (https://github.com/hw-cookbooks/chef-server-populator/) next.
[2013-02-14 22:25:29 -0500] Majost: josephholsten: it seems to barf if I dont specify stuff like classifier, due to a string nill concatenation
[2013-02-14 22:25:57 -0500] kderr: jtimberman: Here's the error http://fpaste.org/YWEQ/
[2013-02-14 22:25:59 -0500] Majost: kderr: I know you.
[2013-02-14 22:26:07 -0500] kderr: Majost: Do you?
[2013-02-14 22:26:23 -0500] kderr: HA
[2013-02-14 22:26:36 -0500] kderr: Hi, ryan.
[2013-02-14 22:27:16 -0500] Majost: kderr: we should talk in a few weeks about pushing for enterprise.
[2013-02-14 22:27:16 -0500] josephholsten: Majost: looks like that's recently fixed: https://github.com/opscode-cookbooks/maven/blob/master/providers/default.rb#L29
[2013-02-14 22:27:56 -0500] josephholsten: https://github.com/opscode-cookbooks/maven/commit/2fbd85d87d6470b58c8a1f4df532a071a16f94c1
[2013-02-14 22:28:00 -0500] Majost: ahh
[2013-02-14 22:29:08 -0500] Majost: josephholsten: any gotchas you have seen, which I might want to know about?
[2013-02-14 22:29:10 -0500] jtimberman: should be released in v0.14.0 :)
[2013-02-14 22:29:30 -0500] jtimberman: kderr: you need to have an FQDN that resolves to the right IP.
[2013-02-14 22:29:50 -0500] jtimberman: either make an /etc/hosts entry or set it up in DNS
[2013-02-14 22:31:35 -0500] drvonnostren: jtimberman: if i put the ip address in my knife.rb it doesnt make a difference.
[2013-02-14 22:32:34 -0500] josephholsten: Majost: we hacked up the cookbook until we saw those patches to add classifier support. I don't think we had any other issues.
[2013-02-14 22:33:22 -0500] kderr: jtimberman: I've got a hosts entry. Still have the same issue.
[2013-02-14 22:33:51 -0500] miah: likely nsswitch.conf isn't doing the right thing :P
[2013-02-14 22:35:58 -0500] matti: jtimberman: I have the same problem as them, IP / host resolves both ways fine.
[2013-02-14 22:36:00 -0500] jtimberman: you can get more information from the knife command with -VV
[2013-02-14 22:39:36 -0500] doomviking: nsswitch.conf. the horror.
[2013-02-14 22:40:24 -0500] kderr: jtimberman: Did that. I remember it not helping. There was some HTTP output in there that showed that it stored things just fine, but then failed on a request to /sandboxes (not a particular one) or something.
[2013-02-14 22:40:56 -0500] josephholsten: aww http://twitamore.com/opscode
[2013-02-14 22:41:33 -0500] jtimberman: kderr: it sets more verbose output
[2013-02-14 22:41:50 -0500] jtimberman: the URI for the failed request is important
[2013-02-14 22:42:24 -0500] kderr: jtimberman: I'll paste bin it in a sec.
[2013-02-14 22:45:01 -0500] miah: according to that site, jtimberman is my valentine
[2013-02-14 22:45:11 -0500] kderr: jtimberman: Okay. Magic. It works. errrr, thanks.
[2013-02-14 22:46:38 -0500] Majost: josephholsten: How are you constructing your URI to your repos?  http://server/??????
[2013-02-14 22:48:42 -0500] jtimberman: miah: aww
[2013-02-14 23:18:55 -0500] kderr: Now i'm getting 403 Forbidden when clients try to come up and use chef-validator.pem
[2013-02-14 23:20:18 -0500] kderr: "Your validation client is not authorized to create the client for this node (HTTP 403)."
[2013-02-14 23:42:37 -0500] doomviking: ah chefconf, here I come.
[2013-02-14 23:43:53 -0500] svs_bbi: hello, I was wondering how to generate a json file from a certain environment. I am using the template resource to create my .json file from an erb file that has the line <%= JSON.pretty_generate (node[:online_framework][:framework]) %> but when I run chef on my node, the json file is not properly formatted
[2013-02-14 23:44:15 -0500] svs_bbi: it is missing the : next to each object
[2013-02-14 23:44:21 -0500] Majost: Is there an API call to force a client run on a node?
[2013-02-14 23:46:34 -0500] CaptTofu: hi all!
[2013-02-14 23:47:21 -0500] p_mc: hello all.  Is there a way to see the effective attributes on a node once you apply roles, enviros, etc.
[2013-02-14 23:47:38 -0500] CaptTofu: question for those who might know: How could I have a value in a data bag that could be interpolated? Say for instance I have a data bag with commands I use to build an icinga commands.cfg and I have something like (pseudo code)
[2013-02-14 23:47:59 -0500] CaptTofu: "command": "#{path}/executable"
[2013-02-14 23:48:17 -0500] CaptTofu: is there a way to do something like that?
[2013-02-14 23:48:40 -0500] miah: #{path} wont be interpolated in the databag. it would have to be interpolated on the client
[2013-02-14 23:49:01 -0500] miah: you could just as easily just store "command": "executable" and your template could include the #{path}
[2013-02-14 23:49:51 -0500] miah: but you could probably also use %Q()
[2013-02-14 23:49:53 -0500] miah: http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals
[2013-02-14 23:52:30 -0500] kderr: Anyone know how to make chef 11's indexer update more frequently?
[2013-02-14 23:55:29 -0500] p_mc: I should clarify.  Is there a way to see what the effective value of an attribute would be without doing a chef run?  Like is there some knife command that will show me the value of an attribute once its converged?
[2013-02-14 23:56:32 -0500] CaptTofu: miah: I know it wouldn't and that was more pseudo code of what I was hoping for
[2013-02-14 23:59:13 -0500] fly9: anyone familiar with nginx source install with modules? trying to install nginx with geoip and I'm not sure how to call the proper recipes in order to ensure it (re)compiles with geoip

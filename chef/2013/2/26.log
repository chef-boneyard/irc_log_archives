[2013-02-26 00:03:25 -0500] miah: fix bugs when you see them
[2013-02-26 00:03:40 -0500] miah: at the very least, report them
[2013-02-26 00:10:05 -0500] jforce: ohai! anybody have any experience upgrading chef server from 0.10.x to 11.x? I have rtfg, but I can't find any tips. I'm hoping this signifies that it's trivial. :)
[2013-02-26 00:10:08 -0500] version2beta: question: if I want to use not_if to cover a bunch of blocks, can I wrap it all in another do ... end?
[2013-02-26 00:13:16 -0500] qhartman: since upgrading to 10.24 I've started getting some first-run failures on recipes that I was not before. I've found in every case so far that if I put an explicit node.save right before the point it fails it solves the problem. Is anyone else seeing this? This seems like a kinda hackish solution....
[2013-02-26 00:14:37 -0500] allaire: miah: But sometimes the WARN seems to be normal!
[2013-02-26 00:15:00 -0500] miah: allaire: :/ in that case maybe the cookbook needs to be updated to warn more appropriate?
[2013-02-26 00:15:07 -0500] allaire: miah: Mostly when I deal with gem install
[2013-02-26 00:15:12 -0500] allaire: yeah maybe
[2013-02-26 00:16:04 -0500] allaire: miah: http://d.pr/i/nC9
[2013-02-26 00:16:10 -0500] allaire: that's an exemple
[2013-02-26 00:16:36 -0500] miah: ya. the resource cloning thing is fun
[2013-02-26 00:16:45 -0500] allaire: miah: happens to you too?
[2013-02-26 00:16:51 -0500] miah: yes
[2013-02-26 00:16:54 -0500] miah: until cookbooks are cleaned up
[2013-02-26 00:17:14 -0500] miah: https://gist.github.com/danielsdeleo/30a8719901eca6545488
[2013-02-26 00:17:17 -0500] miah: check that
[2013-02-26 00:17:19 -0500] allaire: So you don't see anything wrong in the SS I just show you
[2013-02-26 00:17:52 -0500] miah: nothing wrong per say
[2013-02-26 00:18:18 -0500] allaire: Will leave it like that then!
[2013-02-26 00:18:48 -0500] allaire: This whole chef setup was long too setup, but now it pays off !
[2013-02-26 00:18:50 -0500] miah: but do read that gist =)
[2013-02-26 00:18:52 -0500] miah: yup
[2013-02-26 00:19:41 -0500] allaire: I have left my nginx config in my apps, handled Capistrano
[2013-02-26 00:19:51 -0500] allaire: don't know if that's the way to go...
[2013-02-26 00:20:18 -0500] allaire: I didn't put any app specific stuff in my chef setup, except database creation
[2013-02-26 00:20:43 -0500] allaire: create database user role + assign to a new db freshly created
[2013-02-26 00:21:20 -0500] allaire: miah: Do you handle everything in Chef?
[2013-02-26 00:21:22 -0500] miah: yes
[2013-02-26 00:21:28 -0500] miah: capistrano might as well be a dead project
[2013-02-26 00:21:38 -0500] allaire: what do you mean?
[2013-02-26 00:22:12 -0500] miah: do people still manage the capistrano code, or is it growing stagnent? last i checked.. it had some flies hovering over it
[2013-02-26 00:22:24 -0500] miah: plus capistrano basically reimplements alot of what chef does already
[2013-02-26 00:22:32 -0500] miah: you can deploy software using the deploy resource.
[2013-02-26 00:23:18 -0500] allaire: I'm on chef solo
[2013-02-26 00:23:26 -0500] allaire: so that might be easier to mix chef + capistrano
[2013-02-26 00:23:35 -0500] miah: i gues
[2013-02-26 00:23:57 -0500] miah: it totally depends on your use case
[2013-02-26 00:24:00 -0500] log1kal: my company also does everything via chef
[2013-02-26 00:24:10 -0500] miah: i found that the deploy resource works well enough that i can just use that and skip capistrano completely
[2013-02-26 00:24:22 -0500] log1kal: if I want my application to always look a certain way, I certainly want the underlying system to always look a certain way
[2013-02-26 00:25:09 -0500] allaire: log1kal: Chef server, not solo, right?
[2013-02-26 00:25:12 -0500] miah: log1kal: yup.
[2013-02-26 00:25:24 -0500] log1kal: we use server and solo, actually
[2013-02-26 00:25:33 -0500] miah: you can use the deploy resource with solo
[2013-02-26 00:25:43 -0500] log1kal: one for local development, where we build the app from local repos, and one where we deploy from pre-made packages
[2013-02-26 00:25:51 -0500] log1kal: (deploy is for server)
[2013-02-26 00:26:02 -0500] allaire: Is it easy to setup? Cause capistrano was really easy to work with
[2013-02-26 00:26:16 -0500] miah: http://docs.opscode.com/resource_deploy.html
[2013-02-26 00:26:19 -0500] log1kal: ^
[2013-02-26 00:26:44 -0500] log1kal: I don't use the deploy resource (because I didn't know it existed when we started chef), but I imagine it's pretty simple
[2013-02-26 00:27:05 -0500] allaire: wow, docs.opscode > wiki.opscode
[2013-02-26 00:27:05 -0500] allaire: lol
[2013-02-26 00:27:52 -0500] miah: in some ways yes. the docs site is coming along well. but there are still some details on the wiki that aren't on the docs site.
[2013-02-26 00:28:08 -0500] miah: and in some cases i just _know_ where the info is on the wiki and not on the docs site =)
[2013-02-26 00:29:00 -0500] allaire: no search bar in the docs site tho
[2013-02-26 00:29:19 -0500] miah: there is. upper right.
[2013-02-26 00:29:28 -0500] miah: http://docs.opscode.com/search.html
[2013-02-26 00:29:29 -0500] miah: =)
[2013-02-26 00:29:48 -0500] allaire: duh -_-
[2013-02-26 00:30:13 -0500] miah: we all make mistakes
[2013-02-26 00:31:20 -0500] allaire: Is it bad practice to have password or md5'ed password directly in the node file? I know there is data bags but I'm afraid that with chef-solo that's not an option
[2013-02-26 00:32:16 -0500] allaire: Sorry for asking lots of questions, I'm validating stuff once my setup is mostly done!
[2013-02-26 00:32:32 -0500] miah: its fine if thats how you manage authentication. i personally just use ssh keypairs.
[2013-02-26 00:32:47 -0500] till_: allaire: use keypairs or node.json
[2013-02-26 00:33:08 -0500] allaire: you put your ssh-key directly in the node.json file?
[2013-02-26 00:33:20 -0500] allaire: pub key
[2013-02-26 00:34:08 -0500] allaire: but sometimes you don't have any choices to use passwords (aka database password)
[2013-02-26 00:34:52 -0500] miah: database stuff i use databags
[2013-02-26 00:35:08 -0500] miah: but i dont 'solo' either.
[2013-02-26 00:35:51 -0500] allaire: alright thx
[2013-02-26 00:36:24 -0500] allaire: Anyway, if people get access to my  private chef git repo, I'm screwed anyway
[2013-02-26 00:36:53 -0500] miah: indeed
[2013-02-26 00:37:05 -0500] miah: once they can deploy code to your servers its over
[2013-02-26 00:37:11 -0500] allaire: I'm using http://matschaffer.github.com/knife-solo/ and looks like they have some support for databag
[2013-02-26 00:37:14 -0500] allaire: will investiguate!
[2013-02-26 00:38:30 -0500] miah: cool. good luck.
[2013-02-26 00:42:52 -0500] jkyle: how is a client object bound to a node object? If I were to manually create a node via knife node from file, how is that coupled to a client?
[2013-02-26 00:51:46 -0500] spencerowen: I've got 100 users that all manage their own virtual machines. Currently they all manually install programs that could easily be replaced with cookbooks once we get the chef server up. Does that mean that I need to create 100 users in the chef web gui and copy over all of their keys? Or am I going about this all wrong?
[2013-02-26 00:53:36 -0500] miah: you could just use a databag per user with their customised list of applications
[2013-02-26 00:56:15 -0500] Belieber: hi guys
[2013-02-26 00:56:36 -0500] Belieber: what does this error mean? "Cannot find a resource for apt_repository on debian version 6.0.6"
[2013-02-26 00:56:50 -0500] spencerowen: could chef server be tied to ldap?
[2013-02-26 00:58:45 -0500] Loadx: Belieber: are you including the apt cookbook?
[2013-02-26 00:58:58 -0500] Belieber: Loadx, what do you mean?
[2013-02-26 01:00:10 -0500] Loadx: Belieber: To use apt_repository you need the apt cookbook
[2013-02-26 01:02:41 -0500] Belieber: Loadx, oh, lemme try.
[2013-02-26 01:03:07 -0500] mz2_: i've configured the chef cookbook paths for a chef-server in server.rb , checked the paths are correct, but it's not finding them
[2013-02-26 01:03:24 -0500] mz2_: do i need to somehow manually reset some caches?
[2013-02-26 01:04:29 -0500] jtimberman: Belieber: the best way to do that is make sure that the apt cookbook is a dependency of the cookbook where you're using apt_repository
[2013-02-26 01:06:17 -0500] ptrstr: jtimberman: does chef client 10.24 have a memory leak
[2013-02-26 01:07:35 -0500] ptrstr: jtimberman: seeing 1gb used by client since last night..just wondering if it's a known issue
[2013-02-26 01:08:59 -0500] jtimberman: ptrstr: dunno
[2013-02-26 01:09:08 -0500] jtimberman: ptrstr: you can add --fork to the daemon startup
[2013-02-26 01:09:20 -0500] jtimberman: and that should dramatically reduce overall memory consumption of the running daemon.
[2013-02-26 01:11:03 -0500] ptrstr: does that fork each run?
[2013-02-26 01:12:48 -0500] Belieber: yey, it works now, thanks.
[2013-02-26 01:14:02 -0500] jtimberman: ptrstr: yes
[2013-02-26 01:16:19 -0500] spencerowen: So does anyone else create a user in chef for every user in the company? (or use a databag)
[2013-02-26 01:16:28 -0500] jsq: Hi all -- hoping someone can help me with a Knife/bootstrapping question.  I want to specify the configuration for my nodes in .json files and load them with 'knife node from file'.  However, it seems that whenever I load a node from a file and then go and bootstrap the node, the run list that I specified in the .json file is cleared.  After bootstrapping the node, if I inspect the node, its run list is empty, even though it had a non-emp
[2013-02-26 01:16:47 -0500] jsq: I am running the newest version of Chef Server and using the Chef 11.04 gem
[2013-02-26 01:17:09 -0500] ptrstr: jtimberman: looks like a good idea..i'll try it. thanks
[2013-02-26 01:17:42 -0500] jtimberman: jsq: knife bootstrap writes out a json file that is used as the initial node's attributes and run list.
[2013-02-26 01:18:22 -0500] jsq: Ok.  So there's no way to specify in advance (other than passing a run list to the 'knife bootstrap' command) the configuration of a node prior to bootstrapping?
[2013-02-26 01:24:20 -0500] jtimberman: jsq: there's an option to knife bootstrap:
[2013-02-26 01:24:21 -0500] jtimberman:     -j JSON_ATTRIBS,                 A JSON string to be added to the first run of chef-client
[2013-02-26 01:24:41 -0500] jtimberman: knife bootstrap -j "`cat nodes/mynode.json`" maybe
[2013-02-26 01:24:42 -0500] jtimberman: :)
[2013-02-26 01:26:31 -0500] jsq: jtimberman: Thanks for your help (and your blog... and all your cookbooks :))
[2013-02-26 01:41:04 -0500] ssd7: spencerowen: Re your earlier question.  Currently LDAP integration with the Chef Server is a Private Chef feature but not yet an open souce feature.
[2013-02-26 01:41:39 -0500] spencerowen: ssd7 thanks, that is good to know, i had a hard time finding resources on that
[2013-02-26 01:49:05 -0500] spencerowen: ssd7 So how do I segregate users in a company? QA needs different cookbooks and nodes than the Developers. Would I give them different chef servers, separate "Environments", or simply groups?
[2013-02-26 02:06:36 -0500] threetee: kind of a vague question, but does anyone know why knife cookbook upload would try to POST cookbook files to localhost:443 instead of to the chef server that's specified in knife.rb?
[2013-02-26 02:12:24 -0500] threetee: it makes an initial GET request to /cookbooks?num_versions=all, and then it makes a POST to /sandboxes on the correct chef server, but then it tries to upload all the cookbook files to https://localhost:443/bookshelf/organization<etc>
[2013-02-26 02:13:06 -0500] threetee: btw, this is happening on a self-hosted chef server; on a hosted chef org it works properly
[2013-02-26 02:13:41 -0500] threetee: I have several self-hosted chef servers, and only two exhibit this behavior, the rest also work properly
[2013-02-26 02:14:19 -0500] threetee: all servers are Centos running RPM version of Chef 11.4 or 11.6
[2013-02-26 02:18:30 -0500] threetee: I mean, 11.0.4 or 11.0.6
[2013-02-26 02:18:46 -0500] threetee: actually, I just realized that the problem servers are both running chef server 11.0.6, while the working ones are all 11.0.4
[2013-02-26 02:18:47 -0500] threetee: hmm
[2013-02-26 02:22:02 -0500] spheromak: threetee: https://gist.github.com/spheromak/5017833  try using a /etc/chef-server/server.rb like that, (change to your servers fqdn) and run chef-server-ctl reconfigure
[2013-02-26 02:23:17 -0500] threetee: spheromak: thanks, I'll try that. I did have to set nginx['url'] and nginx['server_name'] already on these servers, since they're in the cloud and have bogus hostnames
[2013-02-26 02:23:40 -0500] spheromak: yea its bookshelf tho for the cookbook stuff
[2013-02-26 02:24:31 -0500] zach: Greetings gents, I am having this issue on a new install with debian wheezy, https://p.6core.net/p/nFisovzA17MAHnFQz3wKyMJi -- has anyone ran into this previously?
[2013-02-26 02:26:43 -0500] threetee: spheromak: excellent, that worked great!
[2013-02-26 03:09:31 -0500] zach: Looks like the issue I am hitting is the same as CHEF-3668 (http://tickets.opscode.com/browse/CHEF-3668) - super
[2013-02-26 03:13:40 -0500] amfred: Hi all.  I wonder if you can help me with something.  I need a good Chef cookbook from the Opscode site that: runs on RHEL 6.2, only requires the basic RHEL RPMs and chef-solo (not chef server or ohai or 5 other recipes), and does something interesting I can show on a demo, preferably over SSH.  MySQL is a good example, because I can show that MySQL is running at the command line after the convergance, but I need another one.  Does anyone 
[2013-02-26 03:15:30 -0500] amfred: VNC seemed like a good idea, but doesn't seem to actually work... Google Chrome has too many prereqs... apt and yum are just boring...
[2013-02-26 03:21:14 -0500] amfred: Crickets...
[2013-02-26 03:25:36 -0500] Belieber: gotta learn how to code Ruby :D
[2013-02-26 03:26:32 -0500] amfred: The *point* is to have a demo showing how you can do amazing things with little to no coding.
[2013-02-26 03:26:55 -0500] amfred: Trying apache....
[2013-02-26 03:38:08 -0500] Loadx: apache and deploy code to the node
[2013-02-26 03:38:27 -0500] Loadx: so apache + some sort of application stack .. deploy code from github
[2013-02-26 03:38:53 -0500] Loadx: for extra pizaz make apache have 2 virtualhosts with 2 different app configurations
[2013-02-26 03:43:01 -0500] ayn: quick question: does the deploy resource make sure migration is run on only one node if I have multiple nodes? also do other nodes wait for migration to finish before they deploy? what's the best practice for database migration when you have multiple nodes running the application?
[2013-02-26 03:50:53 -0500] jtimberman: amfred: fail2ban's latest release now works on RHEL :)
[2013-02-26 03:51:29 -0500] jtimberman: ayn: no its up to you to control which system runs migrations.
[2013-02-26 03:52:04 -0500] jtimberman: ayn: i set a 'run migrations' attribute to true and apply that on a node, and have it set it to false when it's done.
[2013-02-26 03:52:07 -0500] ayn: jtimberman: I see, so I will add some tagging and untagging and waiting type things around migration
[2013-02-26 03:53:19 -0500] ayn: jtimberman: yeah, that's kindda what I have in mind, but i was wondering if it handles that already, i guess it doesn't
[2013-02-26 04:10:35 -0500] amfred: Hm... I think I can probably get apache working, although the array variables [ ... ] are messing with things
[2013-02-26 04:13:31 -0500] Loadx: amfred: array variables? attributes?
[2013-02-26 04:20:10 -0500] amfred: Let me show you:
[2013-02-26 04:21:04 -0500] amfred: apache_default_modules => ["status", "alias", "auth_basic", "authn_file", "authz_default", "authz_groupfile", "authz_host", "authz_user", "autoindex", "dir", "env", "mime", "negotiation", "setenvif"]
[2013-02-26 04:22:14 -0500] Loadx: whcih cookbook?
[2013-02-26 04:22:23 -0500] amfred: attributes that take an array as a value are messing with my code
[2013-02-26 04:22:25 -0500] Loadx: i dont have that in the apache2 cookbook
[2013-02-26 04:23:15 -0500] amfred: Ahhhh
[2013-02-26 04:23:32 -0500] amfred: attribute "apache/default_modules",
[2013-02-26 04:23:33 -0500] amfred:   :display_name => "Apache Default Modules",
[2013-02-26 04:23:33 -0500] amfred:   :description => "Default modules to enable via recipes",
[2013-02-26 04:23:33 -0500] amfred:   :default => "status alias auth_basic authn_file authz_default authz_groupfile authz_host authz_user autoindex dir env mime negotiation setenvif"
[2013-02-26 04:23:35 -0500] amfred: haha
[2013-02-26 04:23:47 -0500] amfred: attribute "apache/default_modules",
[2013-02-26 04:23:47 -0500] amfred:   display_name => "Apache Default Modules",
[2013-02-26 04:23:47 -0500] amfred:   description => "Default modules to enable via recipes",
[2013-02-26 04:23:48 -0500] amfred:   default => "status alias auth_basic authn_file authz_default authz_groupfile authz_host authz_user autoindex dir env mime negotiation setenvif"
[2013-02-26 04:24:55 -0500] Loadx: k i see it
[2013-02-26 04:25:00 -0500] amfred: *this* is a long story.  So in the metadata, it's just a list delimited by spaces.  In the recipe itself, it's an array...
[2013-02-26 04:26:09 -0500] amfred: For the moment, I'm just not going to try to configure that one.  Heh.
[2013-02-26 04:26:37 -0500] amfred: I don't want to explain the long story.
[2013-02-26 04:26:47 -0500] Loadx: i can see the problem myself now
[2013-02-26 04:28:42 -0500] Loadx: if you look in attributes/default.rb
[2013-02-26 04:28:47 -0500] Loadx: youll see it's an array
[2013-02-26 04:28:54 -0500] amfred: Yeah, I was looking in there
[2013-02-26 04:29:07 -0500] Loadx: the recipe itself uses an each
[2013-02-26 04:29:17 -0500] Loadx: so the metadata is misleading
[2013-02-26 04:29:25 -0500] amfred: *nod*
[2013-02-26 04:29:34 -0500] Loadx: however its just metadata
[2013-02-26 04:29:39 -0500] Loadx: *shurgs*
[2013-02-26 04:29:47 -0500] Loadx: *shrugs* even
[2013-02-26 04:29:53 -0500] amfred: heh
[2013-02-26 04:30:37 -0500] Loadx: needs to be DRY. like suck those attributes from the file itself
[2013-02-26 04:31:42 -0500] amfred: I'm trying to do some processing with the attributes.  That's the short version of my long story.
[2013-02-26 04:32:16 -0500] amfred: I'm sure there's a way to do this, but it's not something I'm likely to fix at midnight.
[2013-02-26 04:32:42 -0500] Loadx: yeah dunno if i can help with out the long story :P
[2013-02-26 04:32:52 -0500] amfred: Time to try the next recipe...
[2013-02-26 04:38:18 -0500] jtimberman: yeah so
[2013-02-26 04:38:35 -0500] jtimberman: the metadata.rb files aren't always updated for the attributes that are available in the cookbook
[2013-02-26 04:38:49 -0500] jtimberman: sorry about that.
[2013-02-26 04:39:14 -0500] jtimberman: if one of our cookbooks has attributes documented in teh readme, those are updated and more accurate than the metadata.
[2013-02-26 04:39:30 -0500] Loadx: why not just remove it from the metadata?
[2013-02-26 04:40:28 -0500] jtimberman: because really, i want to document that stuff in the metadata rather than the readme.
[2013-02-26 04:40:47 -0500] jtimberman: and i don't want to remove it, then go back and re-add it :)
[2013-02-26 04:40:57 -0500] Loadx: hmm
[2013-02-26 04:41:04 -0500] Loadx: need a super parser :P
[2013-02-26 04:41:53 -0500] jtimberman: :)
[2013-02-26 04:42:26 -0500] Loadx: so in your opnion metadata should supersede a readme?
[2013-02-26 04:42:26 -0500] jtimberman: the advantage to moving them to the metadata is that is machine parsable whereas the readme isn't.
[2013-02-26 04:42:37 -0500] jtimberman: in a perfect world.
[2013-02-26 04:42:44 -0500] Loadx: generate readme from metadata
[2013-02-26 04:42:49 -0500] Loadx: and bobs your uncle
[2013-02-26 04:42:52 -0500] jtimberman: heh
[2013-02-26 04:43:01 -0500] jtimberman: the readmes shouldn't be autogenerated documentation.
[2013-02-26 04:43:08 -0500] jtimberman: they should have a smaller set of information
[2013-02-26 04:43:49 -0500] jtimberman: and point to a location that has richer documentation for more complex topics such as definitions/lwrps, data bags, use cases etc.
[2013-02-26 04:44:14 -0500] Loadx: yeah fair enough
[2013-02-26 04:44:23 -0500] Loadx: its not as dry as it could be though
[2013-02-26 04:44:35 -0500] Loadx: but i see your point
[2013-02-26 04:44:48 -0500] jtimberman: being DRY with documentation is *really* hard. :)
[2013-02-26 04:45:30 -0500] Loadx: hmm sorta
[2013-02-26 04:45:58 -0500] Loadx: i would argue if you had a  format like.. a resource  had to have a comment after each item
[2013-02-26 04:46:12 -0500] Loadx: then you could slowly piece together a data format that could translate ot a readme
[2013-02-26 04:46:27 -0500] Loadx: again.. super parser
[2013-02-26 04:47:42 -0500] Loadx: and realisticly i dont think it's so bad if you generated something similar to api documentation
[2013-02-26 04:55:51 -0500] amfred: FATAL: NameError: wrong constant name PlatformFamily?
[2013-02-26 04:55:51 -0500] amfred: Gah
[2013-02-26 04:56:50 -0500] Loadx: which cookbook?
[2013-02-26 04:57:45 -0500] amfred: apache2
[2013-02-26 04:58:09 -0500] amfred: BTW, I could definitely deal with parsing the metadata... but I have found that those are often not updated.
[2013-02-26 04:58:13 -0500] Loadx: not by my grep
[2013-02-26 04:58:30 -0500] Loadx: platform_family
[2013-02-26 04:58:30 -0500] amfred: Let me see... I used knife to get it...
[2013-02-26 04:58:54 -0500] amfred: Something must convert platform_family to PlatformFamily
[2013-02-26 05:00:39 -0500] amfred: I see some related bugs, like this  http://tickets.opscode.com/browse/CHEF-2454
[2013-02-26 05:02:26 -0500] amfred: Chef auto-generates the class name of all the LWRPs
[2013-02-26 05:03:03 -0500] jtimberman: amfred: what version of chef do you have?
[2013-02-26 05:03:20 -0500] jtimberman: and ohai
[2013-02-26 05:03:47 -0500] amfred: http://comments.gmane.org/gmane.comp.sysutils.chef.user/2844
[2013-02-26 05:03:50 -0500] amfred: Let me check...
[2013-02-26 05:03:58 -0500] amfred: It could be a version mismatch
[2013-02-26 05:04:20 -0500] jtimberman: need chef 0.10.10 and ohai 0.6.10 for using platform_family.
[2013-02-26 05:05:24 -0500] amfred: chef 0.10.8   Yep, that's the problem
[2013-02-26 05:06:06 -0500] jtimberman: amfred: is this a vagrant basebox?
[2013-02-26 05:07:16 -0500] amfred: Nope.  I'm bootstrapping chef onto a private cloud which can't depend on network connectivity to the Internet... so we have a version of chef packaged up that we copy and install
[2013-02-26 05:07:34 -0500] amfred: Otherwise I'd use the new installer
[2013-02-26 05:08:01 -0500] jtimberman: you can use the installer, just not the curl | bash part.
[2013-02-26 05:08:10 -0500] jtimberman: it just downloads the right package and installs it.
[2013-02-26 05:08:23 -0500] amfred: Yeah.... sigh
[2013-02-26 05:08:24 -0500] jtimberman: you can get the right package for your platform from opscode.com/chef/install
[2013-02-26 05:09:16 -0500] amfred: Last time I did this it was painful to find all of the right versions of the dependencies
[2013-02-26 05:09:51 -0500] amfred: Darned recipes, using the latest features...
[2013-02-26 05:09:55 -0500] amfred: How dare they
[2013-02-26 05:15:11 -0500] c_t: ohai, chefs
[2013-02-26 05:15:23 -0500] jtimberman: amfred: :)
[2013-02-26 05:21:21 -0500] jbyck: hello. can anyone tell me why i might be getting a 403 error when creating a template.
[2013-02-26 05:21:44 -0500] jbyck: chef server on ec2. v 11.4
[2013-02-26 05:22:07 -0500] jbyck:  (/var/chef/cache/cookbooks/application/providers/default.rb line 122) had an error: Net::HTTPServerException: template[/etc/unicorn/app.rb] (/var/chef/cache/cookbooks/unicorn/definitions/unicorn_config.rb line 38) had an error: Net::HTTPServerException: 403 "Forbidden"
[2013-02-26 05:43:34 -0500] amfred: Maybe it's because unicorns are imaginary.  ;-)  Are you actually using HTTP around line 38?
[2013-02-26 05:46:12 -0500] jbyck: :) . i'm using the unicorn cookbook.  https://github.com/opscode-cookbooks/unicorn/blob/master/definitions/unicorn_config.rb
[2013-02-26 06:12:03 -0500] amfred: jbyck: sorry, I have to sleep!  But: http://www.checkupdown.com/status/E403.html
[2013-02-26 06:17:39 -0500] jtimberman: jbyck: are you using opscode hosted chef?
[2013-02-26 06:18:17 -0500] jbyck: No. Open source chef server
[2013-02-26 06:18:58 -0500] jtimberman: rerun chef with -l debug
[2013-02-26 06:19:18 -0500] jtimberman: it should show the http request it was making that caused the 403
[2013-02-26 06:20:18 -0500] jbyck: ok i'll try that
[2013-02-26 06:44:12 -0500] danryan: jbyck: huh, came here to ask about the same issue.
[2013-02-26 06:45:47 -0500] danryan: jtimberman: jbyck: I'm seeing 403s for things that don't appear to be (or should be) making HTTP requests https://gist.github.com/danryan/027a28664f01cee3e372
[2013-02-26 06:46:14 -0500] danryan: seems the 403 is actually from hitting bookshelf?
[2013-02-26 06:47:16 -0500] jbyck: I get the 403 when bootstrapping (w/ knife ec2).
[2013-02-26 06:47:40 -0500] jbyck: running chef-client on the server, after the first faillure, runs successfully
[2013-02-26 06:47:56 -0500] danryan: ^ same here
[2013-02-26 06:48:50 -0500] danryan: jbyck: I get it with just `knife bootstrap`. Might be something there.
[2013-02-26 06:56:06 -0500] jbyck: i dont know. im not sure how to get the debug output with knife bootstrap.
[2013-02-26 07:00:17 -0500] danryan: jbyck: come to think of it, I'm *only* seeing it on EC2. I don't use knife-ec2, but a `knife bootstrap` makes that error pop up only on my EC2 instances.
[2013-02-26 07:00:37 -0500] danryan: I tried to duplicate it with vagrant but could not
[2013-02-26 07:02:46 -0500] jbyck: same
[2013-02-26 07:13:03 -0500] danryan: jbyck: can you gist the contents of your template?
[2013-02-26 07:15:57 -0500] jbyck: im just using opscode cookbooks. unicorn provider in application_ruby: https://github.com/opscode-cookbooks/application_ruby/blob/master/providers/unicorn.rb
[2013-02-26 07:16:17 -0500] jbyck: which uses unicorn definition in unicorn cookbook: https://github.com/opscode-cookbooks/unicorn/blob/master/definitions/unicorn_config.rb
[2013-02-26 07:18:56 -0500] jbyck: failed run data: https://gist.github.com/jbyck/022daf7e0db143b9b55e
[2013-02-26 07:20:03 -0500] jbyck: sorry. public link: https://gist.github.com/jbyck/5036615
[2013-02-26 07:24:55 -0500] danryan: Ok, I think it's happening when a recipe calls a template that's outside of the current cookbook scope
[2013-02-26 07:29:38 -0500] jbyck: hmm. you are using chef 11?
[2013-02-26 07:29:40 -0500] danryan: https://github.com/opscode/chef/blob/11-stable/lib/chef/cookbook/remote_file_vendor.rb#L59-L70
[2013-02-26 07:29:46 -0500] danryan: jbyck: sure am
[2013-02-26 07:30:35 -0500] danryan: "This will also execute if there is no current checksum."
[2013-02-26 07:30:49 -0500] danryan: for instance, on a fresh bootstrap.
[2013-02-26 07:30:50 -0500] danryan: hm.
[2013-02-26 07:32:06 -0500] jbyck: yup.
[2013-02-26 07:35:31 -0500] Philipp_: Why does chef-solo complains about that? Chef::Exceptions::PrivateKeyMissing: I cannot read /etc/chef/client.pem
[2013-02-26 07:36:04 -0500] Philipp_: I try to use chef 11.4.0 with chef-solo-search
[2013-02-26 07:38:37 -0500] josephholsten: Philipp_: that sounds like a bug
[2013-02-26 08:06:12 -0500] kisoku: is there anywhere I can see how attributes behave now
[2013-02-26 08:06:32 -0500] kisoku: ie. if I set them from a recipe, do arrays and hashed still accumulate
[2013-02-26 08:06:42 -0500] kisoku: or does set overwrite the contents ?
[2013-02-26 08:16:22 -0500] miah: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-02-26 08:32:10 -0500] kisoku: I take it that is not in effect in chef 10.24 ?
[2013-02-26 08:33:44 -0500] kisoku: is it just me or is docs.opscode.com hugely lacking in documentation on attributes ?
[2013-02-26 08:40:23 -0500] alex___: kisoku i do also prefer the wiki
[2013-02-26 08:40:56 -0500] alex___: btw is there someone who could tell me what this does : cookbook new_resource.cookbook
[2013-02-26 08:41:03 -0500] alex___: inside template var
[2013-02-26 08:45:44 -0500] alex___: never mind
[2013-02-26 09:50:44 -0500] poseid: how could I specify the git location of a metadata include_recipe ?
[2013-02-26 09:51:01 -0500] poseid: I mean the git location of a dependency in metadata.rb
[2013-02-26 09:54:12 -0500] kisoku: are you using a cookbook manager like librarian or berkshelf ?
[2013-02-26 09:54:15 -0500] kisoku: or whisk ?
[2013-02-26 09:55:20 -0500] poseid: yes, berkshelf... I found some hint in the wiki: This will require a cookbook with a matching name and version number to exist on the server
[2013-02-26 09:55:31 -0500] poseid: so, I include it in Berkshelf, with git set
[2013-02-26 09:56:55 -0500] kisoku: yes
[2013-02-26 10:16:14 -0500] GreatSUN: hi all
[2013-02-26 10:16:45 -0500] GreatSUN: can someone tell me please, if it is possible to install package which is between two versions?
[2013-02-26 10:17:06 -0500] GreatSUN: I saw it is possible with yum_package to install a package with version >=
[2013-02-26 10:17:36 -0500] GreatSUN: but for mysql I would need support for version 5.1 while there are also 5.5 packages in the repo
[2013-02-26 10:18:22 -0500] GreatSUN: though yum_package "mysql-server >= 5.1.58-1" will not work out properly
[2013-02-26 10:19:34 -0500] GreatSUN: afaik
[2013-02-26 10:25:19 -0500] poseid: anyone has experience with using rbenv or rvm cookbooks?
[2013-02-26 10:25:50 -0500] poseid: I keep having problems that the chef-solo gem disapears after a conversion
[2013-02-26 10:59:47 -0500] alex___: hey is it possible to add myself to the sudoers file instead of completely rewrite it like the cookbook does?
[2013-02-26 12:15:05 -0500] Guest26944: anyone know how to use shef to see where a resource was defined?
[2013-02-26 12:28:40 -0500] alex___: when creating a file with template resource and a specific mode like 440 wil it create a 644 file first or will it directly create it as 440
[2013-02-26 12:28:43 -0500] alex___: ?
[2013-02-26 12:31:15 -0500] woltage: Hi! Can i somehow override parent cookbooks provider?
[2013-02-26 12:33:05 -0500] alex___: what you mean?
[2013-02-26 12:33:21 -0500] alex___: overide a function of a other cookbook?
[2013-02-26 12:35:16 -0500] woltage: Yeah, example I have users cookbook, which have manage provider (http://tinyurl.com/7uzuz69) and i want override it in my own overrided-users cookbook with custom modifications.
[2013-02-26 12:40:50 -0500] alex___: why dont you just edit the cookbook?
[2013-02-26 12:41:56 -0500] alex___: but there is an option that you can specify another provider
[2013-02-26 12:42:12 -0500] woltage: Because it's generic one, so it's easier update my own provider.
[2013-02-26 12:43:31 -0500] alex___: well i think you need to do that
[2013-02-26 12:43:47 -0500] woltage: alex___: ok, let's see. What google says about replacing with another provider.
[2013-02-26 12:43:47 -0500] alex___: i strugeld with the same cookbook
[2013-02-26 12:43:56 -0500] alex___: and i made my own now
[2013-02-26 12:44:53 -0500] alex___: at least you have to define your own resource
[2013-02-26 12:49:24 -0500] alex___: anyone who can explain template resource
[2013-02-26 12:49:28 -0500] alex___: ?
[2013-02-26 12:49:35 -0500] alex___: the steps it takes?
[2013-02-26 12:52:18 -0500] alex___: i need to set a user in sudoers file or in a file in the sudoers.d directory
[2013-02-26 12:52:48 -0500] alex___: but inside the directory it is not allowed to have files other than 440
[2013-02-26 12:54:17 -0500] rcmorano: alex___: you can also set file permissions for the file with template resource
[2013-02-26 12:54:42 -0500] rcmorano: what's the prob?
[2013-02-26 12:56:58 -0500] alex___: yes i know
[2013-02-26 12:57:07 -0500] alex___: but what i want to know is this
[2013-02-26 12:57:28 -0500] alex___: when i create a file using template with mode 440
[2013-02-26 12:58:06 -0500] alex___: will it create a file directly with 440 or will it first create the file -> edit it -> chmod it
[2013-02-26 12:58:53 -0500] GreatSUN: hey guys
[2013-02-26 12:59:03 -0500] alex___: i need it to do the first one
[2013-02-26 12:59:05 -0500] alex___: :P
[2013-02-26 12:59:15 -0500] alex___: know what i mean?
[2013-02-26 12:59:37 -0500] GreatSUN: if I need to install a package from repo but the package fails due to wrong set of dependencies
[2013-02-26 12:59:44 -0500] GreatSUN: is there a possibility to do so?
[2013-02-26 13:00:45 -0500] GreatSUN: alex___: the parsing is done before it is written when you use template
[2013-02-26 13:04:59 -0500] _patrik: Hello
[2013-02-26 13:06:20 -0500] _patrik: I've made some changes in the application_ruby cookbook, filled out the legal stuff, created an issue in JIRA and a pull request at GitHub. I haven't got any feedback from anywhere tho, and I'm wondering if I'm missing something, or if I should just wait a bit longer
[2013-02-26 13:06:36 -0500] _patrik: The JIRA issue is at http://tickets.opscode.com/browse/COOK-2448
[2013-02-26 13:07:39 -0500] rcmorano: alex___: perms are set once file is copied to final the path
[2013-02-26 13:07:42 -0500] rcmorano: -the
[2013-02-26 13:10:03 -0500] rcmorano: but shouldnt be any problem with sudo since the process is already running as root and perms are changed inmediately once the file is in "dest_path"
[2013-02-26 13:11:06 -0500] rcmorano: GreatSUN: if there is a problem with depends, there is no magic to fix it
[2013-02-26 13:11:51 -0500] rcmorano: nor even using the pkg system directly (well, you can modify the binary pkg to remove the non satisfacible depends)
[2013-02-26 13:13:58 -0500] alex___: rcmorano: i read this http://www.peppertop.com/blog/?p=1015 thats why i asked it would give problems that way
[2013-02-26 13:16:02 -0500] rcmorano: alex___: yeah, manually creating stuff in there is a bad practice since you need sudo to operate with those files and sudo will get broken if you doesn't set perms correctly
[2013-02-26 13:16:33 -0500] rcmorano: if you doesn't have 'root' account enabled, you'll lose sudo perms hehe
[2013-02-26 13:16:52 -0500] rcmorano: but since chef will 'cp' and then 'chmod' as root and not using sudo, shouldn't be a prob
[2013-02-26 13:17:01 -0500] zts: alex___: that is a really good question, and looking at the code it appears that the file is created, filled with content, and then permissions updated
[2013-02-26 13:17:37 -0500] zts: alex___: I agree with rcmorano that it's _unlikely_ to be a practical problem in the way described by that post - but it still seems a bit wrong
[2013-02-26 13:17:40 -0500] rcmorano: zts: i thought that it should be better to chmod first
[2013-02-26 13:17:57 -0500] rcmorano: but it should work for alex___
[2013-02-26 13:18:48 -0500] zts: rcmorano: agreed, it would be better to update permissions then fill content (so that you aren't potentially leaking data if Chef crashes between the two operations), or just creating the file with the desired permissions in the first place
[2013-02-26 13:19:50 -0500] zts: I may be misreading the code, but here it is for anyone interested: https://github.com/opscode/chef/blob/master/lib/chef/provider/file.rb#L225-L230
[2013-02-26 13:20:09 -0500] alex___: i would prefer creating the file set permissions and after that replace it to the folder
[2013-02-26 13:20:41 -0500] rcmorano: zts: i took a look at code aswell: https://github.com/opscode/chef/blob/master/lib/chef/provider/template.rb#L51
[2013-02-26 13:23:48 -0500] zts: rcmorano: oh, interesting.  I had foolishly assumed that the template provider would delgate to the file provider
[2013-02-26 13:24:10 -0500] rcmorano: zts: kinda hehe
[2013-02-26 13:24:16 -0500] alex___: but oke if everything works oke there will be no problem but if chef crashes between placing the file and chmod it i woul have a problem?
[2013-02-26 13:24:50 -0500] rcmorano: i didnt dig into it, but i guess that "access_controls.set_all!" is from 'file.rb'
[2013-02-26 13:25:09 -0500] rcmorano: alex___: yes, sudo will get broken
[2013-02-26 13:25:14 -0500] rcmorano: but chances are minimal
[2013-02-26 13:25:28 -0500] rcmorano: if file is placed, probably will be "chmodded" too
[2013-02-26 13:26:05 -0500] zts: alex___: the other thing to consider is what permissions will be on the file by default - maybe they are conservative enough that sudo is happy (I'm not sure)
[2013-02-26 13:26:07 -0500] alex___: ahha oke
[2013-02-26 13:26:10 -0500] rcmorano: anyway, that's not a good point to defend ("chances are minimal")
[2013-02-26 13:26:13 -0500] rcmorano: hehe
[2013-02-26 13:26:18 -0500] zts: that will depend on the umask of the chef process
[2013-02-26 13:26:47 -0500] someara: just log into your boxes as root like god intended
[2013-02-26 13:27:01 -0500] alex___: i do not permit root login
[2013-02-26 13:27:12 -0500] someara: =)
[2013-02-26 13:27:18 -0500] alex___: :P
[2013-02-26 13:27:27 -0500] alex___: thats the problem
[2013-02-26 13:28:28 -0500] alex___: but isn't it possible to create a file somewhere and copy it with chef?
[2013-02-26 13:28:43 -0500] alex___: that could work aswell right?
[2013-02-26 13:29:26 -0500] rcmorano: alex___: sure, you can create the template some elsewhere, chmod it and then move it to its final dest
[2013-02-26 13:29:29 -0500] rcmorano: hehe
[2013-02-26 13:31:14 -0500] alex___: oke
[2013-02-26 13:31:24 -0500] zts: alex___: you could, but it'd suck in a different set of ways.  I'd suggest either mailing the mailing list, or opening a ticket against the sudo cookbook (COOK project on tickets.opscode.com) pointing out the concern
[2013-02-26 13:31:50 -0500] zts: (it should probably be changed in Chef proper, not the cookbook, but I'd put the ticket on the cookbook anyway)
[2013-02-26 13:32:23 -0500] alex___: o oke so where can i do that and my english is not as good as yours :P
[2013-02-26 13:32:39 -0500] zts: I'd personally just go ahead and use it as-is, though - the chances of a problem occurring are very small
[2013-02-26 13:33:18 -0500] rcmorano: me too
[2013-02-26 13:33:59 -0500] zts: your English is fine :)  tickets are http://tickets.opscode.com or you can join the mailing list here - http://lists.opscode.com/sympa
[2013-02-26 13:34:41 -0500] alex___: humm tickets looks nicer
[2013-02-26 13:34:55 -0500] alex___: maillist would send me updates?
[2013-02-26 13:35:33 -0500] alex___: under what project should i post it?
[2013-02-26 13:37:51 -0500] zts: the COOK project - that gets used for all of the cookbooks that opscode maintains
[2013-02-26 13:39:08 -0500] alex___: i dont see that one :P
[2013-02-26 13:39:17 -0500] alex___: i see chef cookbook
[2013-02-26 13:39:55 -0500] zts: yeah, that one - http://tickets.opscode.com/browse/COOK
[2013-02-26 13:42:50 -0500] e100: Is there a reason that apt.opscode.com has not been updated with 10.24.0?
[2013-02-26 13:48:53 -0500] alex___: http://tickets.opscode.com/browse/COOK-2485 this is good?
[2013-02-26 13:51:57 -0500] woltage: Can't find how i replace that provider :(
[2013-02-26 13:52:10 -0500] woltage: Any help, with that?
[2013-02-26 13:55:36 -0500] zts: alex___: nice one - I have added a comment to the ticket pointing out the code, too
[2013-02-26 13:58:51 -0500] zts: woltage: there is no easy way to replace an LWRP.  If it's possible at all, you will need to write some complex ruby
[2013-02-26 13:59:00 -0500] nacer: hey hey
[2013-02-26 13:59:21 -0500] zts: woltage: I'm not sure why you want to, though.  If you are replacing the 'manage' LWRP, aren't you already throwing away most of what's in the 'users' cookbook?
[2013-02-26 13:59:24 -0500] nacer: can we still use the log_level settings in chef 11 ?
[2013-02-26 13:59:38 -0500] nacer: i mean in my client.rb config file
[2013-02-26 14:00:14 -0500] kechagia: hey opscode: will you update the apt.opscode.com repos to contain chef-0.11 too anytime soon?
[2013-02-26 14:01:10 -0500] woltage: zts: I'm not throwing it away. I'm just extending it with SElinux patch.
[2013-02-26 14:01:45 -0500] ezotrank: Good day. What best solution to make some action before run chef_gem?
[2013-02-26 14:03:13 -0500] cwj: ezotrank: http://wiki.opscode.com/display/chef/Evaluate+and+Run+Resources+at+Compile+Time
[2013-02-26 14:03:57 -0500] zts: woltage: okay, you want to re-open the ruby class and stick more code into it?  Or...?
[2013-02-26 14:04:07 -0500] zts: woltage: anyway, that would be a good thing to have in the upstream cookbook.
[2013-02-26 14:04:09 -0500] nacer: kechagia: chef  client ?
[2013-02-26 14:04:14 -0500] ezotrank: cwj: thx
[2013-02-26 14:04:33 -0500] woltage: zts: yeah, meaby it's easier just fork it and send pull request.
[2013-02-26 14:05:09 -0500] woltage: zts: but yeah, that was in my mind. reopen that class or method and stick more code into it.
[2013-02-26 14:07:20 -0500] zts: woltage: I suspect you'd need to add code into the middle of a method... is that possible?  (I'm not that awesome with ruby)
[2013-02-26 14:07:58 -0500] woltage: zts: uno momento I made my changes and commit it.
[2013-02-26 14:07:58 -0500] zts: woltage: but yes, in the case of a feature that would be useful to lots of people, it'd be great to send the change upstream (if you're allowed to sign the opscode contributor agreement)
[2013-02-26 14:10:18 -0500] woltage: zts: https://github.com/woltage/users/commit/9a8957e513683ed890c2d3a6a07c0fdaeef463a4 tiny commit :)
[2013-02-26 14:11:02 -0500] zts: woltage: nice!
[2013-02-26 14:12:13 -0500] woltage: And now pull request sended, don't know if opscode people are merging them from Github.
[2013-02-26 14:12:21 -0500] poseid: when trying to install nginx, I get :package[curl-dev] (nginx::passenger line 38) had an error: Chef::Exceptions::Package: No version specified,
[2013-02-26 14:14:36 -0500] zts: woltage: you'll need to make them a ticket on tickets.opscode.com too (They've said they will eventually look at pull requests, but so far they just focus on things with tickets - and there are many)
[2013-02-26 14:14:45 -0500] zts: woltage: there are some notes here: http://wiki.opscode.com/display/chef/How+to+Contribute+to+Opscode+Cookbooks
[2013-02-26 14:15:04 -0500] poseid: ok, looks like this issue: https://github.com/opscode-cookbooks/nginx/pull/70
[2013-02-26 14:15:41 -0500] woltage: zts: Ok, thanks a lot. I will read wiki, when I have time :)
[2013-02-26 14:15:59 -0500] zts: woltage: no problem, I know how you feel :)  Thankyou for contributing!
[2013-02-26 14:25:51 -0500] proofek: hello everybody, I've got a quick question, as I am having problem (of not understanding I guess) LWRPs.
[2013-02-26 14:25:58 -0500] proofek: Trying to use https://github.com/opscode-cookbooks/php
[2013-02-26 14:26:35 -0500] proofek: and its providers, specifically php_pear_channel and php_pear
[2013-02-26 14:26:51 -0500] proofek: got this Vagrantfile - https://gist.github.com/anonymous/5038703
[2013-02-26 14:27:04 -0500] proofek: but it complains it doesn't recognise php_pear_channel
[2013-02-26 14:27:08 -0500] proofek: what am I missing?
[2013-02-26 14:33:18 -0500] jtimberman: proofek: You need to create a new cookbook that you're going to use the php_pear_channel resource in.
[2013-02-26 14:34:06 -0500] jtimberman: proofek: resources are written in recipes, which go in cookbooks. the vagrantfile simply tells vagrant what recipes to add to the node it is bringing up
[2013-02-26 14:34:13 -0500] someara: proofek LWRP == "Custom Types"
[2013-02-26 14:34:44 -0500] someara: so instead of file, dir, user cron, etc. you'd have a thing of type "php_pear_channel"
[2013-02-26 14:36:10 -0500] someara: proofek you don't put chef types in your Vagrantfile. Vagrant only spins up the box and is responsible for provising chef-client a run_list
[2013-02-26 14:37:02 -0500] proofek: thanks guys, just done that, works like a charm
[2013-02-26 15:55:36 -0500] bluethundr: hello chef. I just tried to gem install chef-client onto a centos 5.8 node and for some reason when I run chef-client I get a ruby error
[2013-02-26 15:55:37 -0500] bluethundr: http://paste.jokefire.com/index.php/view/42956464
[2013-02-26 15:56:01 -0500] bluethundr: I was just wondering if anyone had any clue as to why this was happening and how to correct it?
[2013-02-26 15:56:42 -0500] jrclouda: try gem install format
[2013-02-26 15:57:28 -0500] bluethundr: jrclouda: will do thanks for the suggestion
[2013-02-26 15:58:09 -0500] bluethundr: just did that.. no difference
[2013-02-26 15:59:11 -0500] bluethundr: http://paste.jokefire.com/index.php/view/37028342
[2013-02-26 15:59:18 -0500] zts: bluethundr: maybe you don't have the rubygems package installed.  If you're using the ruby that is shipped with Centos 5.8, though, you will probably have a bad time
[2013-02-26 15:59:36 -0500] zts: bluethundr: better to use the omnibus / "chef-full" packages for chef
[2013-02-26 15:59:37 -0500] bluethundr: hmm interesting point
[2013-02-26 16:00:06 -0500] bluethundr: chef-full is a gem instsall? or a yum install?
[2013-02-26 16:00:30 -0500] bluethundr: I've heard of ombibus but I am not acquainted with it
[2013-02-26 16:02:28 -0500] bluethundr: reading up on it tho now
[2013-02-26 16:02:28 -0500] bluethundr: http://www.opscode.com/blog/2012/06/29/omnibus-chef-packaging/
[2013-02-26 16:02:33 -0500] bluethundr: really gotta get this working today
[2013-02-26 16:04:56 -0500] halfamind: Hi #chef. I'm running into issues using community cookbooks on Amazon Linux, since its platform isn't recognized. Is there a hack around this?
[2013-02-26 16:05:05 -0500] halfamind: Should I just give up and switch to Ubuntu, or are there good Amazon Linux cookbooks out there (e.g., for imagemagick)?
[2013-02-26 16:05:45 -0500] zts: bluethundr: http://www.opscode.com/chef/install/
[2013-02-26 16:06:14 -0500] bluethundr: zts: very nice! thank you
[2013-02-26 16:08:40 -0500] TriangleIL1: Anyone know if there is a tutorial for setting up chef-server on EC2 using EBS for backing the data?
[2013-02-26 16:19:22 -0500] tduffield: I'm running into an issue where when I run 'chef-client' manually from the command line it will complete the chef run without errors but wont exist cleanly. Any idea what is wrong / how to fix it?
[2013-02-26 16:19:28 -0500] tduffield: *exit
[2013-02-26 16:19:42 -0500] qhartman: TriangleIL1, If you instantiate your server as one that uses EBS storage and then just follow a normal tutorial, your data will be on EBS as a matter of course.
[2013-02-26 16:20:14 -0500] TriangleIL1: excellent, thanks!  So I don't need to mount my EBS drive and map the folders in any way I take it?
[2013-02-26 16:20:26 -0500] qhartman: tduffield, put someof the output in a gist or pastebin for ppl to look at, there's really no way to know what's up with that much info
[2013-02-26 16:21:00 -0500] qhartman: TriangleIL1, not if you use an EBS-based instance. If you use a default instance that installs on the instance storage you would.
[2013-02-26 16:21:20 -0500] TriangleIL1: perfect, thanks!
[2013-02-26 16:21:30 -0500] qhartman: The way I work in AWS I very rarely use instance storage because for us durability is more important that IO perforamnce
[2013-02-26 16:25:11 -0500] eyck: is this normal: Creating initial API user...
[2013-02-26 16:25:11 -0500] eyck: /usr/lib/ruby/vendor_ruby/chef/knife/client_create.rb:59:in `run': undefined method `save' for #<Hash:0x00000000c3a190> (NoMethodError)
[2013-02-26 16:26:06 -0500] vegardx_: eyck: chefk ruby-json on debian bug reports
[2013-02-26 16:26:13 -0500] vegardx_: It's been borked as of 25 of february.
[2013-02-26 16:26:20 -0500] knuckolls: qhartman: i used to only use ebs-backed instances. then ebs froze up across the board a few times. now i use it as needed. :)
[2013-02-26 16:26:30 -0500] Joel: is there a way to log something as debug from my recipe?
[2013-02-26 16:26:43 -0500] vegardx_: Downgrade ruby-json-1.7.3-3 to ruby-json-1.7.3-2
[2013-02-26 16:26:48 -0500] eyck: vegardx_: thnx.
[2013-02-26 16:26:52 -0500] vegardx_: err
[2013-02-26 16:26:55 -0500] vegardx_: mind that
[2013-02-26 16:27:02 -0500] vegardx_: This might be another error.
[2013-02-26 16:27:18 -0500] vegardx_: I jumped to conclusion a little too early.
[2013-02-26 16:27:20 -0500] qhartman: knuckolls, yeah, I've had a couple instances of EBS having some indigestion, but since I moved out of the Virginia data center that has happened waaaaaay less, and it's never lasted more than a few seconds.
[2013-02-26 16:27:26 -0500] vegardx_: What system and configuration are you on, eyck?
[2013-02-26 16:27:31 -0500] version2beta: Anyone know why a bash script (psql #{db} < #{db.sql}) might die for a 500MB file but not the smaller ones? I'm on vagrant, chef-solo, and it's taking less than the default 3600 seconds before dying.
[2013-02-26 16:28:08 -0500] knuckolls: qhartman: ebs is likely more resilient after the few major outages they had, but i learned my lesson. i'm responsible for my availability. lots of times i could live with having instance stores w/ an attached EBS drive that I rsync data to via cron
[2013-02-26 16:28:14 -0500] knuckolls: and snap that ebs.
[2013-02-26 16:28:20 -0500] eyck: vegardx_: debian wheezy, chef 10.12.0-2
[2013-02-26 16:28:32 -0500] qhartman: Joel, http://docs.opscode.com/resource_log.html
[2013-02-26 16:28:39 -0500] knuckolls: if the business is cool with that kind of durability, then it's a win to give me availability
[2013-02-26 16:28:49 -0500] Joel: qhartman: thanks
[2013-02-26 16:29:06 -0500] tduffield: Here is the Gist output to the issues i'm having with the chef-client not exiting cleanly: https://gist.github.com/tduffield/5039783
[2013-02-26 16:29:07 -0500] vegardx_: eyck: aha, then downgrade to ruby-json 1.7.3-2
[2013-02-26 16:29:42 -0500] vegardx_: eyck: http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=701629
[2013-02-26 16:30:08 -0500] version2beta: cccccccvllbnhvkkbtvjvubffrftlehinclnceinfjib
[2013-02-26 16:30:32 -0500] qhartman: knuckolls, yeah, that's probably a better practice in a lot of ways, but it's still a tradeoff. In particular for us, the time it would take to change how we operate. We had an opposite instance where someone was storing important DB data files on instance storage. It took awhile to figure out where the DB went after the machine had to be stopped for a hardware migration....
[2013-02-26 16:32:17 -0500] qhartman: tduffield, if you break a chef process it will always consider the run a failure. What happens if you let the run finish?
[2013-02-26 16:32:54 -0500] Flex: hey guys, using the chef backup script provided on opscode to backup nodes/data_bags/roles from hosted chef. what would be the best way to also backup environments?
[2013-02-26 16:32:58 -0500] knuckolls: qhartman: yeah aws storage options are all a wild tradeoff. i too learned my lesson the hard way with instance storage after losing a bit of non-critial data when an instance died and never came back. that could have been a disaster. i tend to opt for stateful services having streaming backups to s3 via wal-e w/ postgres or to rely on a cluster db these days.
[2013-02-26 16:33:03 -0500] knuckolls: anyway yeah, tradeoffs :)
[2013-02-26 16:33:06 -0500] qhartman: tduffield, are you using any custom report handlers?
[2013-02-26 16:33:59 -0500] qhartman: knuckolls, yeah, "tradeoffs" is probably the best single word to use when working with AWS.... :D
[2013-02-26 16:34:16 -0500] eyck: vegardx_: better, thank you :)
[2013-02-26 16:34:42 -0500] vegardx_: eyck: Goodie :)
[2013-02-26 16:35:00 -0500] tduffield: qhartman, I am not using any custom report handlers and if I let the chef run finish it will just hang.
[2013-02-26 16:35:13 -0500] proofek: guys, I am getting another error with the php cookbook
[2013-02-26 16:35:14 -0500] proofek: [2013-02-26T16:16:32+00:00] FATAL: NameError: php_pear[PHP_CodeSniffer] (proofek::default line 12) had an error: NameError: Cannot find a resource for converge_by on ubuntu version 12.10
[2013-02-26 16:35:30 -0500] proofek: my recipe is simple
[2013-02-26 16:35:58 -0500] qhartman: tduffield, for how long? If I were to take a WAG, it looks like the final node save operation is having trouble. IF you let it sit until it returns on it's own, does it give a message about a timeout or anything?
[2013-02-26 16:36:17 -0500] tduffield: proofek, i've run into a similar issue with the java cookbook. my fix was to update chef-client
[2013-02-26 16:36:26 -0500] proofek: https://gist.github.com/proofek/5039915
[2013-02-26 16:36:37 -0500] proofek: on the vm?
[2013-02-26 16:37:02 -0500] tduffield: qhartman, i dont know. sometimes it takes awhile :/ I'll try again in a screen
[2013-02-26 16:37:07 -0500] proofek: tduffield: on the vm with apt?
[2013-02-26 16:38:18 -0500] qhartman: tduffield, yeah, let it go until it returns on it's own. That's the only way to know what's up. Maybe run with elevated logging (-l debug) will reveal some info too. If you are running your own chef-server check the logs there during the run and see if anything seems amiss.
[2013-02-26 16:38:37 -0500] tduffield: proofek, on the VM that is throwing the error. You should update it with whatever tool works best but make sure that if you are not already running Chef11 you will need to force a 10.X install
[2013-02-26 16:40:33 -0500] proofek: vagrant@quantal64:~$ chef-client --version
[2013-02-26 16:40:33 -0500] proofek: Chef: 10.12.0
[2013-02-26 16:41:10 -0500] proofek: i just wonder how was it installed in the first place...
[2013-02-26 16:41:34 -0500] __chrisf__: I have a question about using Chef to partially bake a Windows Server AMI with base configuration that can then be further bootstrapped using CloudFormations and another Chef role as part of auto healing / auto scaling How would the fact that a server registers itself as a Node and Client with the Chef Server impact this? Won't the server used as the AMI result in many instances of the same Node/Client to the Chef Server?
[2013-02-26 16:42:29 -0500] amccloud: I don't know why. But I can seem to get the chef-client process going on my machine that has chef installed.
[2013-02-26 16:43:26 -0500] qhartman: proofek, if you do a "gem search chef" and it returns "local gems" you probably have a gem-based install
[2013-02-26 16:43:54 -0500] qhartman: proofek, to update that do a "gem install chef -v 10.24.0" to get the latest (or nearly latest) 10.x version
[2013-02-26 16:44:05 -0500] tduffield: qhartman, I found the issue. For 10.18.2 if you have 'interval' set in client.rb it will put a wait at the end of a manual chef run. https://gist.github.com/tduffield/5039987
[2013-02-26 16:44:21 -0500] qhartman: tduffield, aha, good find
[2013-02-26 16:44:44 -0500] proofek: qhartman: tduffield: it was apt
[2013-02-26 16:44:52 -0500] proofek: and it's at the latest version
[2013-02-26 16:45:05 -0500] proofek: vagrant@quantal64:~$ sudo apt-get upgrade chef
[2013-02-26 16:45:05 -0500] proofek: Reading package lists... Done
[2013-02-26 16:45:05 -0500] proofek: Building dependency tree
[2013-02-26 16:45:05 -0500] proofek: Reading state information... Done
[2013-02-26 16:45:05 -0500] proofek: 0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
[2013-02-26 16:45:19 -0500] qhartman: proofek, did you do an update immediately before that?
[2013-02-26 16:45:40 -0500] qhartman: If you are using the opscode repos, you certainly should have a newer version than that.
[2013-02-26 16:45:49 -0500] qhartman: 10.12 is quite old
[2013-02-26 16:46:06 -0500] proofek: good point!
[2013-02-26 16:46:16 -0500] proofek: uprading now
[2013-02-26 16:46:35 -0500] version2beta: I have a bash execution block that dies with "Killed" but no stack trace. The script is in an each loop and it works on other elements. It works outside of chef too. Any ideas how to troubleshoot?
[2013-02-26 16:47:04 -0500] proofek: now I need to make it happen when I create the vm, any hints? (bearing in mind I have started learning about vagrant and chef about 2 hours ago :D)
[2013-02-26 16:47:54 -0500] qhartman: proofek, I don't use vagrant, but in general when you bootstrap the VM you should be able to add an update and upgrade to the bootstrap process to make that happen
[2013-02-26 16:48:19 -0500] qhartman: proofek, You also might be able to start with an upgraded VM image, then you don't need to worry about it.
[2013-02-26 16:49:09 -0500] qhartman: version2beta, gist your bash script if you can so we can see it. You can add some "echo" statements to it to give you an idea of what's up.
[2013-02-26 16:49:18 -0500] proofek: qhartman: that's true
[2013-02-26 16:49:51 -0500] qhartman: proofek, I use gem-based installations, and I specify the version of chef to bootstrap when I start the instance.
[2013-02-26 16:50:11 -0500] proofek: damn, it's still
[2013-02-26 16:50:11 -0500] proofek: vagrant@quantal64:~$ chef-client -version
[2013-02-26 16:50:12 -0500] proofek: Chef: 10.12.0
[2013-02-26 16:50:14 -0500] qhartman: proofek, since you're using apt you can't do exactly that, but conceptually something similar should be possible.
[2013-02-26 16:50:30 -0500] proofek: so will have use gems to upgrade
[2013-02-26 16:51:10 -0500] awgross: sethvargo: pull request submitted to your swap cookbook
[2013-02-26 16:51:47 -0500] sethvargo: awgross: looking now. will provide feedback/merge after lunch
[2013-02-26 16:52:01 -0500] awgross: cool
[2013-02-26 16:52:15 -0500] solarce: __chrisf__: delete client.pem before you bake the ami
[2013-02-26 16:54:28 -0500] version2beta: qhartman, https://gist.github.com/Version2beta/5040063
[2013-02-26 16:55:57 -0500] __chrisf__: solarce: thank you it's that straight forward as to cause Chef Client to attempt to register if no client.pem is found?
[2013-02-26 16:56:37 -0500] qhartman: version2beta, try removing / raising the timeout. Just a WAG, but I'm wondering if that is triggering it and that's why it's getting killed. Also try running chef-client with "-l debug" to get more verbose output. That may reveal the problem.
[2013-02-26 16:57:28 -0500] version2beta: qhartman, I put it in there just in case my default timeout was somehow not 3600 seconds (1 hour). It dies about a minute into the second SQL file.
[2013-02-26 16:58:01 -0500] version2beta: qhartman, I'm on Chef solo under Vagrant. I don't suppose you know how to tell it to be verbose?
[2013-02-26 16:58:10 -0500] qhartman: version2beta, hmm. If you have it skip that file what happend?
[2013-02-26 16:58:22 -0500] qhartman: version2beta, I don't, sorry, I don't use solo.
[2013-02-26 16:58:26 -0500] version2beta: qhartman, No issues at all, everything works happy.
[2013-02-26 16:58:43 -0500] version2beta: qhartman, That SQL file is about a half a gig. The others are about a tenth.
[2013-02-26 16:59:16 -0500] qhartman: version2beta, then I would think that the root of the problem would have something to do with that file. And you said if you load it by hand it works ok?
[2013-02-26 17:00:56 -0500] solarce: __chrisf__: as long as it has the validator pem yes
[2013-02-26 17:00:59 -0500] version2beta: qhartman, yeah, at the shell it loads fine. Takes about 6 minutes. No errors. The odd thing is this: when it dies, it just says "bash: line 2: [PID] Killed"
[2013-02-26 17:01:23 -0500] version2beta: qhartman, so someone is probably killing it, but I don't understand where that is happening.
[2013-02-26 17:02:00 -0500] qhartman: version2beta, yeah, that looks like a shell-level killing, not a ruby one
[2013-02-26 17:02:37 -0500] version2beta: qhartman, but of course I'm provisioning a new box and there's nothing but chef-solo running.
[2013-02-26 17:02:47 -0500] qhartman: version2beta, oh! you're connecting as a particular user, is protgres limiting the size of the query that user can do? When you load it by hand are you using the postgres "root" user?
[2013-02-26 17:03:09 -0500] qhartman: version2beta, see if there is anything useful in the postgres logs
[2013-02-26 17:03:40 -0500] version2beta: qhartman, yes, the user is postgres when I do it by hand. but I believe chef is running the bash script as user postgres too.
[2013-02-26 17:04:10 -0500] qhartman: version2beta, it is, but in your connection statement above, it looks like you are doing the pg connection as a different user.
[2013-02-26 17:04:41 -0500] version2beta: qhartman, I don't think so, same user postgres.
[2013-02-26 17:05:02 -0500] qhartman: version2beta, and in fact, I don't think you really need that, unless it's a solo-specific thing. your bash script by itself should do all the work needed if run as the postgres user
[2013-02-26 17:05:24 -0500] qhartman: it looks like you are creating a connection, then not doing anything with it
[2013-02-26 17:05:41 -0500] version2beta: qhartman, I'm using the database cookbook to create the databases. Might not be necessary, true.
[2013-02-26 17:06:04 -0500] r3vamp: https://github.com/opscode-cookbooks/chef-server#attributes Does someone have an example of how to use the configuration attribute? I'm trying to change the port that NGINX listens on.
[2013-02-26 17:06:13 -0500] version2beta: qhartman, here, I have an idea. There's a lot of text returned from the psql statement. Every insert is returning a confirmation. I wonder if Chef just doesn't know what to do with several megabytes of data returned?
[2013-02-26 17:06:57 -0500] qhartman: version2beta, could be, but that seems a stretch. worth trying though.
[2013-02-26 17:08:15 -0500] version2beta: qhartman, okay, piping output to /dev/null 2>&1. I'll know in a minute or so.
[2013-02-26 17:08:19 -0500] qhartman: r3vamp, you probably want to use an override attribute. search for that on docs.opscode.com
[2013-02-26 17:10:13 -0500] r3vamp: qhartman: Aye, I'm familiar with that. I'm just a bit confused on how to get chef-server-ctl reconfigure to set the port to what I want (which I thought was through the attribute configuration in chef-server.rb)
[2013-02-26 17:11:19 -0500] jtimberman: r3vamp: the attributes are defined here: https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-02-26 17:11:50 -0500] jtimberman: r3vamp: you would define them in the /etc/chef-server/chef-server.rb  like this: user['username']
[2013-02-26 17:12:04 -0500] jtimberman: er, user['username'] = "not-chef-server-but-my-preferredusername"
[2013-02-26 17:12:59 -0500] r3vamp: jtimberman: so would I add the following to chef-server.rb: overrride['chef_server]['nginx']['non_ssl_port'] = someport
[2013-02-26 17:13:12 -0500] matti: jtimberman: How does one change notification_email there?
[2013-02-26 17:13:19 -0500] jtimberman: or nginx['url'] = "https://chefy.example.com"
[2013-02-26 17:13:21 -0500] jtimberman: matti: i don't think it works yet.
[2013-02-26 17:13:28 -0500] matti: jtimberman: Oh right.
[2013-02-26 17:13:31 -0500] matti: :)
[2013-02-26 17:13:54 -0500] jtimberman: r3vamp: chef-server.rb is not an attributes file, it's a mixlib-config file.
[2013-02-26 17:14:01 -0500] version2beta: qhartman, it seems to be working now. If it finishes I'll submit a bug report.
[2013-02-26 17:14:01 -0500] jtimberman: r3vamp: the settings are namespaced under chef_server.
[2013-02-26 17:14:07 -0500] r3vamp: jtimberman: ahhh ok
[2013-02-26 17:14:20 -0500] jtimberman: r3vamp: so you'd use nginx['non_ssl_port'] = 3700
[2013-02-26 17:14:22 -0500] jtimberman: or whatever port
[2013-02-26 17:14:26 -0500] qhartman: version2beta, cool
[2013-02-26 17:14:42 -0500] r3vamp: jtimberman: thanks buddy!
[2013-02-26 17:15:14 -0500] Joel: jtimberman: I'm having a bitch of a time, I have passwords in a yaml file which get checked out of svn that I want to pass into a database resource, etc. What's the best way to do this and not get bit by two pass?
[2013-02-26 17:15:32 -0500] version2beta: qhartman, it finished successfully. Thank you for your help.
[2013-02-26 17:15:49 -0500] qhartman: version2beta, awesome. My pleasure.
[2013-02-26 17:17:37 -0500] cpasmoi: how can I unset an attribute that will be affected/created by a role in the runlist ?
[2013-02-26 17:17:44 -0500] jtimberman: Joel: is the yaml file checkout of SVN by Chef?
[2013-02-26 17:17:55 -0500] Joel: jtimberman: yes.
[2013-02-26 17:18:25 -0500] jl_: I'm having a bit of trouble applying fujin's example library.
[2013-02-26 17:18:28 -0500] jtimberman: Joel: I'd use a ruby_block resource to load the YAML file.
[2013-02-26 17:18:59 -0500] jl_: the syntax description for libraries uses Mixins
[2013-02-26 17:19:04 -0500] Joel: jtimberman: I've been trying to do that, but I'm having a heck of a time getting the values out of the ruby block back into another non-ruby block, in this case to set passwords for mysql users, etc.
[2013-02-26 17:19:11 -0500] jl_: however, then there are some inheritance-based examples
[2013-02-26 17:19:16 -0500] cpasmoi: I mean, my role "yoda-try" has in its json file "role[yoda" which contains "sysconfig": {  "network": { "path_network_scripts": [... and so on] } }
[2013-02-26 17:19:21 -0500] jl_: and then Fujin's example, which I like b/c it uses a namespace
[2013-02-26 17:19:38 -0500] cpasmoi: and I don't want theses attributes (from sysconfig)
[2013-02-26 17:19:39 -0500] jl_: but I seem to be only able to get the Mixin version working
[2013-02-26 17:19:52 -0500] jl_: all the others generate "undefined method" errors.
[2013-02-26 17:19:52 -0500] jl_: :(
[2013-02-26 17:19:58 -0500] jtimberman: cpasmoi: node.set['sysconfig']['network'].delete("path_network_scripts")
[2013-02-26 17:20:12 -0500] cpasmoi: oh ! in the json ?
[2013-02-26 17:20:18 -0500] cpasmoi: well, i guess not
[2013-02-26 17:21:00 -0500] jl_: I've read the chapters on Classes and on Modules in the Pickaxe book. I'm still stumped as to how to simply use a method in my recipes that I've defined and be able to explicitly use it as <module_name>.<method_name>
[2013-02-26 17:21:08 -0500] jl_: any one have any advice
[2013-02-26 17:21:09 -0500] jl_: ?
[2013-02-26 17:21:20 -0500] safdar: hi I have problem with opscode account .. when I select client .. it says I dont have permissions on my account .. any idea?
[2013-02-26 17:21:23 -0500] jl_: :`(
[2013-02-26 17:24:33 -0500] jl_: seems like this should be simple?
[2013-02-26 17:24:50 -0500] jl_: anyone with library writing experience care to throw out some pointers?
[2013-02-26 17:24:59 -0500] jtimberman: cpasmoi: sorry - put that in a recipe
[2013-02-26 17:25:36 -0500] awgross: jl_: usually you have to include it in Chef::Recipe explicitly
[2013-02-26 17:26:12 -0500] jl_: awgross: I am trying to do that.
[2013-02-26 17:26:44 -0500] karmi: jl_: post some code, generally you just define a method in a module and then include this module into Chef::Recipe, Chef::Resource, etc
[2013-02-26 17:27:08 -0500] karmi: jl_: But the prefferred way is probably to create a Chef *definition*
[2013-02-26 17:27:10 -0500] jl_: karmi: ok, that I got to work
[2013-02-26 17:27:12 -0500] awgross: jl_: https://gist.github.com/andrewgross/5040353
[2013-02-26 17:27:36 -0500] jl_: awgross: yes, that works
[2013-02-26 17:28:01 -0500] awgross: ok
[2013-02-26 17:28:17 -0500] cpasmoi: ok, thanks jtimberman. I guess I'll put another attribute to be checked by the recipe so that it won't use the attribute (here, it won't config a virtual interface).
[2013-02-26 17:28:18 -0500] jl_: what I want is when I use the method I defined in the recipe for it to be prefixed with the namespace explicitly. Is that silly for some reason? (I'm a ruby n00b..)
[2013-02-26 17:28:25 -0500] awgross: karmi: can you you over what you mean by Chef Definition?
[2013-02-26 17:28:43 -0500] karmi: jl_: something like http://pastie.org/6342636
[2013-02-26 17:29:12 -0500] karmi: awgross: http://docs.opscode.com/essentials_cookbook_definitions.html
[2013-02-26 17:29:45 -0500] jl_: karmi: oh, that's cool. I didn't know you could "send" includes like that. Good to know.
[2013-02-26 17:30:19 -0500] karmi: jl_: yes, but generally, you just `include` the module into Chef classes and can use those methods
[2013-02-26 17:30:45 -0500] jl_: hrm, so is there any way to get, in the recipe a syntax of method invocation that explicitly ties the namespace to the method?
[2013-02-26 17:30:47 -0500] karmi: jl_: but really, a definition is what's more preffered (though I myself also wrote regular Ruby methods instead in many cases)
[2013-02-26 17:31:05 -0500] karmi: jl_: what do you mean by "namespace"?
[2013-02-26 17:31:19 -0500] jl_: karmi: why is a definition preferred? The page makes it sound like those are just resources strung together, no?
[2013-02-26 17:32:06 -0500] jl_: karmi: module MyNameSpace .... end  // code: ... MyNameSpace.method_one() ...
[2013-02-26 17:32:41 -0500] jl_: so that the module name is used explicitly in the method call?
[2013-02-26 17:33:00 -0500] jl_: rather than mixing in to Chef::Recipe and then having just the 'dangling' method names?
[2013-02-26 17:33:31 -0500] karmi: jl_: Preffered >Hard to say, it is my impression that it's the way how to extend Chef, maybe Chef guys will shed some light on it for you .)
[2013-02-26 17:34:09 -0500] jl_: I mean, obviously I can just name the method with a prefix that is unique and meaningful, but then that seems a bit silly when there is good namespace support in Ruby already
[2013-02-26 17:34:40 -0500] karmi: jl_: ah, OK, so you wanna invoke the method like `MyInnerNamespace.mymethod`?
[2013-02-26 17:34:55 -0500] jl_: karmi: exactly! yes.. how??
[2013-02-26 17:34:58 -0500] karmi: jl_: either use `module_method`, or add `extend self` into the module
[2013-02-26 17:35:14 -0500] karmi: jl_: Second is/sounds more magical, but is preferred :)
[2013-02-26 17:35:20 -0500] jl_: extend self..
[2013-02-26 17:35:21 -0500] jl_: hmm.
[2013-02-26 17:35:21 -0500] karmi: jl_: (In Ruby, generally)
[2013-02-26 17:35:24 -0500] jl_: okay, will look that up.
[2013-02-26 17:35:43 -0500] karmi: jl_: `extend` will bring the methods from a module into the receiver, but as *class* methods
[2013-02-26 17:35:55 -0500] jl_: aahhh
[2013-02-26 17:35:58 -0500] karmi: jl_: `include` will create *instance*methods
[2013-02-26 17:36:05 -0500] jl_: that's what I've been looking for.
[2013-02-26 17:36:27 -0500] jl_: awesome.
[2013-02-26 17:36:28 -0500] karmi: so `extend self`  effectively means: "bring the methods defined in myself into myself as class methods"
[2013-02-26 17:36:47 -0500] jl_: ok, cool cool.
[2013-02-26 17:36:50 -0500] jl_: going to try that.
[2013-02-26 17:37:02 -0500] jl_: karmi, awgross: thank you!
[2013-02-26 17:38:01 -0500] karmi: jl_: yw!
[2013-02-26 17:38:50 -0500] matti: https://play.google.com/store/apps/details?id=com.softwarebakery.drivedroid
[2013-02-26 17:38:52 -0500] matti: Way cool.
[2013-02-26 17:39:16 -0500] jl_: awesome. that worked.
[2013-02-26 17:39:22 -0500] jl_: thx a bunch.
[2013-02-26 17:39:33 -0500] j^2: i'm having troube with the nagios cookbook --> https://gist.github.com/85f04684248f1308d0a8
[2013-02-26 17:39:49 -0500] j^2: right now it should only be looking at itself...
[2013-02-26 17:39:55 -0500] j^2: not sure why it's nil :(
[2013-02-26 17:40:41 -0500] matti: j^2: What is in your template?
[2013-02-26 17:41:22 -0500] j^2: matti: https://gist.github.com/809c61aef206c7b7c82b
[2013-02-26 17:41:25 -0500] j^2: default..
[2013-02-26 17:41:57 -0500] matti: %25?
[2013-02-26 17:42:02 -0500] matti: :D
[2013-02-26 17:42:10 -0500] j^2: shit, that's the gist parser
[2013-02-26 17:42:13 -0500] j^2: ignore those
[2013-02-26 17:42:15 -0500] matti: I know.
[2013-02-26 17:42:25 -0500] j^2: :D
[2013-02-26 17:42:58 -0500] Joel: jtimberman: thoughts on how to scope back variables from the ruby block back into the recipe name space?
[2013-02-26 17:42:58 -0500] matti: Hmm...
[2013-02-26 17:43:36 -0500] j^2: matti: yeah, not sure where to go :(, i think it's the last thing i have to do to get nagios working
[2013-02-26 17:43:48 -0500] matti: j^2: Client or single?
[2013-02-26 17:43:53 -0500] matti: s/single/solo/
[2013-02-26 17:43:57 -0500] j^2: i thought about just ripping out the template, but it's the hosts.cfg...kinda need that one
[2013-02-26 17:43:59 -0500] j^2: client
[2013-02-26 17:44:43 -0500] matti: j^2: You can find out where in the template it fails.
[2013-02-26 17:45:14 -0500] j^2: matti: ?
[2013-02-26 17:45:23 -0500] matti: j^2: Do something like p or pp @nodes in a template, you should get content of @nodes.
[2013-02-26 17:45:38 -0500] matti: j^2: And you can see which hash / mash element is missing.
[2013-02-26 17:45:52 -0500] j^2: ahh
[2013-02-26 17:46:03 -0500] Joel: jtimberman: ahh, I'm confusing a script with a block.
[2013-02-26 17:46:21 -0500] matti: j^2: http://stevendanna.github.com/blog/2012/01/28/shef-debugging-tips-1/
[2013-02-26 17:46:50 -0500] j^2: matti: thanks :D
[2013-02-26 17:48:40 -0500] matti: j^2: The key is to find out what you get inside.
[2013-02-26 18:00:06 -0500] benP_: Does anyone have an example of including templates in templates? I've got a looong config file I want to break up into smaller .erbs.
[2013-02-26 18:01:28 -0500] jtimberman: Starting #opschef Cookbook office hours, bring your questions! Hangout: http://t.co/JwiutaZx5Y - Livestream: http://t.co/VZBofnRNcq
[2013-02-26 18:02:30 -0500] version2beta: jtimberman, there are Tuesday office hours??
[2013-02-26 18:08:19 -0500] erikbeta: if I'm trying to make an API request to the search endpoint, what's the proper format for a search query? When I try something like /search/nodes?q=os:linux I just get a 404 in response but knife search nodes 'os:linux' returns results
[2013-02-26 18:11:59 -0500] alexbst: I've got a few nodes that have /var/chef/cache/checksums/ fill to the brim (maxed out the inodes)
[2013-02-26 18:12:17 -0500] alexbst: is there any limitter in chef to stop that happening ?
[2013-02-26 18:12:39 -0500] alexbst: and yes I should find the cause, but I've got higher-priority tasks atm.
[2013-02-26 18:16:27 -0500] matti: alexbst: Interesting problem.
[2013-02-26 18:16:43 -0500] matti: alexbst: Write cleaner cookbook or cronjob, I guess.
[2013-02-26 18:18:19 -0500] alexbst: this is on 10.16.4, didn't show up on 0.10.4
[2013-02-26 18:24:02 -0500] alexbst: matti - it is all /var/chef/cache/checksums/chef-file--tmp-chef-rendered-template(HASH)
[2013-02-26 18:24:06 -0500] alexbst: and similar
[2013-02-26 18:24:13 -0500] matti: Yeah.
[2013-02-26 18:24:34 -0500] matti: It uses this tag files to track changes in underlying resources i.e. files.
[2013-02-26 18:28:08 -0500] blublublub: is there a way to download cookbooks from community.opscode.com via a simple shell command?
[2013-02-26 18:37:03 -0500] knuckolls: blubblubblub: https://github.com/applicationsonline/librarian might help
[2013-02-26 18:41:34 -0500] Joel: jtimberman: pretty neat, except the requirement for a g+ account.
[2013-02-26 18:43:23 -0500] jtimberman: bluethundr: knife cookbook site download NAME
[2013-02-26 18:43:25 -0500] secondfish: hi all
[2013-02-26 18:43:26 -0500] jtimberman: Joel: :-)
[2013-02-26 18:44:34 -0500] Joel: Can anyone recommend a sample cookbook I can look at that pulls values from some external source and makes them available throughout the cookbook? Looking for an example of how to make the first pass happy, while getting data in the second pass and making it available
[2013-02-26 18:54:09 -0500] moos3: is there a way to check if a rpm is installed and tell chef to skip it
[2013-02-26 18:54:13 -0500] madh888: hi does chef client 11.4 work with server 10?
[2013-02-26 18:59:08 -0500] juliancdunn: moos3: there's no need, Chef is idempotent
[2013-02-26 18:59:27 -0500] matti: madh888: The other way around it does. not sure in your case.
[2013-02-26 19:01:31 -0500] moos3: juliancdunn the issue i have is i only want services to start or restart on installation not every time that chef runs
[2013-02-26 19:06:37 -0500] yfeldblum: Joel, fetching data should nearly always be done in the "compile" phase (first pass?)
[2013-02-26 19:07:00 -0500] Joel: yfeldblum: can't in this case, trying to fetch data out of a yml file that comes down as part of a svn co
[2013-02-26 19:08:22 -0500] yfeldblum: Joel, you can do it in a provider with liberal use of intelligent recipe_eval (in chef-11 or, in chef-10, see https://gist.github.com/yfeldblum/d85be145f3ff824ccc07)
[2013-02-26 19:10:04 -0500] Joel: yfeldblum: that's some serious greek :P
[2013-02-26 19:11:55 -0500] yfeldblum: Joel, what data do you need from the yml file?
[2013-02-26 19:12:24 -0500] Joel: yfeldblum: I'm deploying a rails app, and I want to suck the passwords out of the rails app yml file, and pass them into various other calls through out the recipe.
[2013-02-26 19:12:55 -0500] Joel: yfeldblum: for example, when I use the database cookbook to add users, I'd love to pass in the value from the yaml file, instead of having to add it to an encrypted databag, and having two places to change passwords
[2013-02-26 19:12:58 -0500] btm: moos3: specify your service resource with 'action :nothing' and use a notification on the package resource to notify the server resource with a :start action.
[2013-02-26 19:13:34 -0500] yfeldblum: Joel, (putting aside the weird "suck" metaphor) i would suggest not having passwords in the application repo in the first place
[2013-02-26 19:13:56 -0500] Joel: yfeldblum: different discussion entirely.
[2013-02-26 19:14:52 -0500] yfeldblum: Joel, because the chef model is to stamp the configuration on top of your application, not interactively query your application to find out the configuration
[2013-02-26 19:15:00 -0500] Joel: I can define a structure at compile time that matches the yaml structure, but I can't seem to populate that structure at run time
[2013-02-26 19:15:25 -0500] yfeldblum: Joel, in the chef model, chef knows the database password up-front, and stamps that password into the config/database.yml and when creating the database
[2013-02-26 19:16:16 -0500] chmy: I am seeing an error when registering a node to hosted chef "HTTP Request Returned 409 Conflict: Client already exists." for an amazon ec2 instance where we use the public dns name of an ec2 instance for the node name. We just spun up the ec2 instance and I am wondering, if someone else had already registered the node with the same name in another hosted chef account would we see that error or
[2013-02-26 19:16:16 -0500] chmy: should I be looking somewhere else?
[2013-02-26 19:16:17 -0500] Joel: Now I'm just trying to find some way to populate that compile time structure.
[2013-02-26 19:16:59 -0500] yfeldblum: Joel, you are very likely succeeding at populating the yaml structure at "run time" (or, convergence) ... but you are declaring all the resources and assigning all their attributes at "compile time" ("execution time" or the *real* "run time")
[2013-02-26 19:17:37 -0500] doomviking: dont give me any of your internal service error, api.opscode.com.
[2013-02-26 19:17:38 -0500] Joel: yfeldblum: isn't there some way to delay assigning to the blank values? I've tried playing with the notifies stuff, but that doesn't seem to do what I think
[2013-02-26 19:17:43 -0500] haakond_: chmy: I'm experiencing problems with Hosted Chef as well now, as we speak
[2013-02-26 19:17:47 -0500] yfeldblum: Joel, what you seem to be up against is the very core of how chef works
[2013-02-26 19:17:57 -0500] svs_bbi: hello, does someone know how to access my nodes' ip addresses using search in a recipe? I am using search(:node, 'role:online') in my recipe and obtain an array of nodes with this role; however, I just want to obtain their ip addresses rather than their names. Is there something that I need to add to my recipe?
[2013-02-26 19:18:16 -0500] moos3: btm you have documatoin or example of that
[2013-02-26 19:18:41 -0500] yfeldblum: Joel, chef works as follows: Step 1) figure out what the whole configuration shall be, and declare resources and assign their attributes; Step 2) converge the server to look like the resources declared in step 1
[2013-02-26 19:19:26 -0500] Joel: yfeldblum: right, and I want to take a different configuration action based on what the server looks like in step 2.
[2013-02-26 19:20:20 -0500] yfeldblum: Joel, you're going to need to either 1) rethink your approach or 2) go deep into custom resources & providers & intelligent recipe-eval (chef-11 or my gist)
[2013-02-26 19:20:22 -0500] haakond_: chmy: is it working for you now?
[2013-02-26 19:20:38 -0500] Joel: yfeldblum: I don't think this is that radical of an idea, or not_if, etc. wouldn't exist.
[2013-02-26 19:20:53 -0500] chmy: checking
[2013-02-26 19:21:12 -0500] Joel: yfeldblum: there are plenty of scenarios where things in step 1 don't happen based on things encountered in step 2
[2013-02-26 19:21:32 -0500] yfeldblum: Joel, not_if is designed so that you can make non-idempotent resources (such as script or ruby_block resources) idempotent
[2013-02-26 19:22:19 -0500] yfeldblum: Joel, not_if is designed for convergence style of configuration-management, for the feedback-loop/interactive style
[2013-02-26 19:22:52 -0500] main: Are there books out there written about Chef? Google doesn't help much here (results are related to cooking)
[2013-02-26 19:23:14 -0500] Joel: main did you add opscode to your query?
[2013-02-26 19:23:18 -0500] btm: moos3: see third code block example: http://wiki.opscode.com/display/chef/Resources#Resources-Notifications
[2013-02-26 19:23:27 -0500] doomviking: svs_bbi: I was trying to figure that out the other day, and failed miserably.
[2013-02-26 19:23:32 -0500] yfeldblum: Joel, what i'm trying to say is that you're trying to use chef in a way it's explicitly designed *against*
[2013-02-26 19:24:09 -0500] moos3: btm thanks
[2013-02-26 19:24:33 -0500] awgross: main: I dont recall any recent ones, although some were certain in the works.  Also namespace your searches with "chef Opscode"
[2013-02-26 19:24:38 -0500] Joel: yfeldblum: well at this point I'm just evaluating, and not interested in trying to get PHB's to change policy and infrastructure, so I have no work around, except asking users to plug these values into a recipe before running (dangerous) or making them do manual bits after the fact.
[2013-02-26 19:24:54 -0500] Joel: just shocked there isn't more flexability.
[2013-02-26 19:25:10 -0500] yfeldblum: Joel, there is plenty of flexibility, but you've decided (or someone else has decided) not to use it
[2013-02-26 19:25:51 -0500] Joel: yfeldblum: if by plenty of flexibility you mean go back and change our entire deploy process and password management, sure... that's flexible...  :P
[2013-02-26 19:26:04 -0500] main: Joel and awgross, thanks for the tip I didn't think of that, but just tried it and it looks like there are no books (at least that I could find). Real shame, because I'm looking for something that will explain things more in depth and slowly than blogs and the Opscode wiki
[2013-02-26 19:26:05 -0500] Joel: brb while I re-tool 10+ webapps..
[2013-02-26 19:26:21 -0500] Joel: main: yeah, I find the wiki visually eye killing.
[2013-02-26 19:26:35 -0500] Joel: main: it's like someone got paid to make it difficult to read/follwo :P
[2013-02-26 19:27:02 -0500] yfeldblum: Joel, chef is designed as a convergent tool; if your deployment process is anti-convergent and you want to keep it that way, then yeah, you may want a different tool ...
[2013-02-26 19:27:24 -0500] main: I guess that leads to my next question. What do you recommend for learning Chef as a beginner? The wiki is still over my head. Any particular tutorials or lessons you could suggest?
[2013-02-26 19:27:32 -0500] Joel: yfeldblum: I think you missed the part where I'm just evaluating how this will work for us, for a demo I'm not re-tooling a process.
[2013-02-26 19:27:33 -0500] awgross: main: most parts of the wiki are for reference once you already have enough info to start teaching yourself, trying to think of a good source
[2013-02-26 19:28:09 -0500] yfeldblum: Joel, so do the demo with the password in a data-bag item too
[2013-02-26 19:28:22 -0500] main: I mean the wiki makes sense on a theoretical level, like when I'm reading it I say "Ok so environments, recipes, bla bla bla, makes perfect sense". Then when it comes time to saying "Ok let me try something now" I just stare at my screen with a dumb look on my face
[2013-02-26 19:28:26 -0500] svs_bbi: doomviking: I just figured it out, apparently nodes have a whole JSON structure that defines them. Inside this they have their ip address explicitly documented under the section ipaddress. So if clients is the array of node names you can do #{clients[0][:ipaddress]} and it will return the ip address of that node.
[2013-02-26 19:28:34 -0500] Joel: yfeldblum: I'll probably just do it hard coded in the recipe, but still, yuck.
[2013-02-26 19:29:14 -0500] Joel: still shocked at the lack of flexibility
[2013-02-26 19:29:28 -0500] doomviking: svs_bbi: I knew I was having a brain fart.
[2013-02-26 19:29:32 -0500] chmy: Main, I started by signing up for the free training from here
[2013-02-26 19:29:34 -0500] chmy: http://www.opscode.com/training/
[2013-02-26 19:29:36 -0500] main: awgross: I agree, wiki would be great for reference once I have some practical knowledge. The problem is getting how to get some practical experience with Chef so things make sense
[2013-02-26 19:29:36 -0500] Joel: main: there have for pay classes :P
[2013-02-26 19:29:44 -0500] Joel: main $$$
[2013-02-26 19:29:49 -0500] awgross: main: yeah that will happen, trying to remember what i used to learn the first few steps besides just looking at other peoples stuff
[2013-02-26 19:29:59 -0500] yfeldblum: main, yeah, that's what i felt too
[2013-02-26 19:30:19 -0500] doomviking: svs_bbi: maybe gets a little more complicated if its an ec2 instance, with the public/private interfaces, etc
[2013-02-26 19:30:27 -0500] yfeldblum: main, but you can ping me and i can try to explain things in English if you like :D
[2013-02-26 19:30:53 -0500] chmy: Main: but truth is I just finished the 3 day training course lastweek and things are not starting to click. I guess it depened on how you learn. If self pased train as you go is your style give the free trainign a shot its pretty good. For me the 3 day course was worth the $$ to have focused training and ask questions
[2013-02-26 19:30:59 -0500] main: yfeldblum: That would be wonderful, I will take you up on that!
[2013-02-26 19:32:40 -0500] main: chmy: Which is the free training you refer to?
[2013-02-26 19:32:46 -0500] j^2: jtimberman: thanks again for your help today!
[2013-02-26 19:33:08 -0500] benP_: main, I did a one day training thing and here's how they taught us: sign up for an ec2 micro instance (or make a VM), sign up for chef hosted, and then start using cookbooks. We used nagios, ntp, sudo as good, early cookbooks.
[2013-02-26 19:33:12 -0500] chmy: main: go to http://www.opscode.com/training/ and on the top right of the page click regisgter for open training
[2013-02-26 19:33:59 -0500] yfeldblum: benP_, that's the way i'd go too, although i'm not sure the nagios cookbook is a good opener
[2013-02-26 19:34:23 -0500] svs_bbi: doomviking: yeah for sure. I am not using ec2 instances right now so I have not looked into that in much depth.
[2013-02-26 19:35:02 -0500] benP_: We actually used an older version that was a little simpler, and we mostly used it because you just have to put the recipe into the role and it "just worked"
[2013-02-26 19:37:00 -0500] benP_: the nagios cookbook does have a certain amount of "wow factor" in terms of how little you have to do to get it to work well.
[2013-02-26 19:38:32 -0500] main: benP_: Interesting ideas, are all the 3 cookbooks you refer to available on the official Opscode github, or elsewhere?
[2013-02-26 19:38:53 -0500] main: chmy: Oh great, I didn't notice that Open Training link before, have signed up for it!
[2013-02-26 19:40:20 -0500] benP_: Use the command "knife cookbook site download <COOKBOOK>". That automatically gets it from the cookbook site.
[2013-02-26 19:45:22 -0500] main: benP_: What is the source of cookbooks that come from that command? The 'cookbook site' you refer to, is that https://github.com/opscode-cookbooks? If I run "knife cookbook site download COOKBOOK" where COOKBOOK doesn't appear in the opscode-cookbooks repository, the command will fail?
[2013-02-26 19:45:42 -0500] genesispr: hello; I am trying out chef on windows... chef reports WARN: chef-client doesn't have administrator privileges on node
[2013-02-26 19:45:56 -0500] genesispr: how can I make it have admin privs?
[2013-02-26 19:46:55 -0500] benP_: genesispr: if you're running it by going into cmd and typing in "chef-client," just right click on "cmd" and pick "run as administrator."
[2013-02-26 19:47:35 -0500] benP_: main: they're all from http://community.opscode.com/
[2013-02-26 19:48:26 -0500] genesispr: benP_: right... cool on my local machine, but suppose i want to run it remotely using winrm or something?
[2013-02-26 19:48:46 -0500] yfeldblum: main, community.opscode.com
[2013-02-26 19:49:13 -0500] yfeldblum: main, the recent releases are tagged in git; if you're getting them from git, only use the tagged releases
[2013-02-26 19:50:44 -0500] benP_: genesispr: you can create an administrator account on your domain and pass that in using the -x and -P flags.
[2013-02-26 19:51:40 -0500] main: yfeldblum, at http://community.opscode.com/search?query= there are ~830 results (10 results per page and 83 pages), and at https://github.com/opscode-cookbooks there are 137 public repos. The other 700 or so cookbooks on community.opscode.com come from people? Like I could upload my own cookbook, or is there some quality control that goes into what goes up there?
[2013-02-26 19:52:01 -0500] genesispr: benP_: ok... my account does have an admin flag, but i guess from the desktop it assumes I'm dangerous, so I need to explicitly say run as admin
[2013-02-26 19:52:19 -0500] genesispr: anyone got any idea how to do that from emacs? I'm running knife within eshell
[2013-02-26 19:52:54 -0500] yfeldblum: main, yes, they come from people; the community site is a place for anybody to share their cookbook creations; there's no gatekeeper
[2013-02-26 19:58:36 -0500] main: What do you suggest is the best way to get help when it comes to Chef? I'm brand new to IRC, so what is the difference between using IRC versus posting on a forum or using a mailing list or whatever? What are the different ways that people can get help with Chef questions, and what are the most commonly used or recommended? (e.g. any forums worth posting on, etc, or is IRC the way to go?)
[2013-02-26 20:00:50 -0500] kamabe: has anyone ever experienced node.override not actually setting any override attributes? i have a recipe in which i am overriding an attribute from another cookbook. when i use the node.set syntax, it works fine, but using node.override does nothing.
[2013-02-26 20:07:21 -0500] main: benP_, I 'Followed' the cookbooks you suggested and a few more on the community site, do you know where I can see the cookbooks I've followed? I thought it'd be a convenient way to refer back to cookbooks I'd like to try
[2013-02-26 20:07:55 -0500] benP_: main, sorry, I've never followed a cookbook. I'm not sure.
[2013-02-26 20:13:38 -0500] awgross: main: IRC is probably the best place for help with simpler questions
[2013-02-26 20:14:02 -0500] awgross: main: if you are having more complex issues use the mailing lists, AFAIK there are no forums per say, alothugh there are a few scatter StackOverflow posts
[2013-02-26 20:14:50 -0500] awgross: main: for IRC, just post your question and hope someone picks it up, once you are in a convo with them just make sure to keep using the name in it so its easy for them to track.  Thats about it.
[2013-02-26 20:15:59 -0500] a_a_g: kamabe: i'm not sure about this, but it could be that node.set is executed only during recipe compile and execution time, wheras default, override, etc. are valid while reading attribute files
[2013-02-26 20:16:06 -0500] a_a_g: again, not sure, just a hunch
[2013-02-26 20:17:19 -0500] kamabe: a_a_g: thanks, i actually think i'm having a problem like this http://lists.opscode.com/sympa/arc/chef/2011-08/msg00112.html  when i did i knife node show on the node, it showed the correct attributes. it's apparently a bug in shef. now i just know not to use it to debug attribute overrides anymore
[2013-02-26 20:17:41 -0500] benP_: Has anyone ever nested templates before? I wanted to split up a config file into a few templates but can't find an example.
[2013-02-26 20:19:31 -0500] main: benP_, no prob
[2013-02-26 20:19:54 -0500] yfeldblum: benP_, chef-11 includes the template partials feature - https://github.com/danielsdeleo/partials
[2013-02-26 20:20:10 -0500] main: awgross, sounds great, thanks
[2013-02-26 20:21:09 -0500] benP__: yfeldblum, this is exactly what I was looking for. Thank you so much!
[2013-02-26 20:22:34 -0500] eyck: hmm, i seem to be having problems with init.d/chef-client script, it seems to think that chef-client is not running, because: + '[' ruby '!=' chef-client ']'
[2013-02-26 20:26:48 -0500] awgross: eyck: I think that is from is looking for chef-client in the process list and taking the first word (it normally runs as ruby /usr/bin/chef-client -options) and trying to match that against 'chef-client'. I think I remember someone else having a similar issue.  Check the cookbook on github and see if it got fixed in a new version
[2013-02-26 20:32:13 -0500] riddley_cfd: When I try to use my LWRP with chef-solo 10.16.4 in a loop, the first values stick to subsequent runs... how can I fix/work around this ?
[2013-02-26 20:39:30 -0500] znDuff: There's a bit of a doc discrepancy at http://docs.opscode.com/chef/install_server.html -- specifies sudo as needed for shelf-server-ctl reconfigure but not chef-server-ctl test, but failing to use it in the latter case doesn't work so well: /opt/chef-server/embedded/service/chef-pedant/lib/pedant/config.rb:34:in `from_argv': Configuration file '/var/opt/chef-server/chef-pedant/etc/pedant_config.rb' not found! (RuntimeError)
[2013-02-26 20:42:55 -0500] awgross: riddley_cfd: the LWRP's are identified by their name attribute, you should have something changing that for each iternation of the loop otherwise it will keep referencing the same one
[2013-02-26 20:44:09 -0500] riddley_cfd: awgross: if my cookbook is called a and my lwrp is called b and I do: a_b "thingy" do ; attribute1 "string"; attribute2 "otherstring" ; end   shouldn't 'thingy' be the name?
[2013-02-26 20:44:36 -0500] riddley_cfd: more specifically new_resource.name
[2013-02-26 20:45:26 -0500] znDuff: As of 0.11, where are initial values for /etc/chef/validation.pem, admin.pem, &c. set? I'm used to those being created automatically by the server on startup, but that doesn't appear to be the case.
[2013-02-26 20:46:09 -0500] riddley_cfd: it seems to work on the first one, but if I do this: %w{thingy bobo jojo}.each do |myname| ; a_b myname do ; attribute1 "string" ; attribute2 othervariable ; end I get a name of "thingy" every time. awgross
[2013-02-26 20:46:12 -0500] awgross: riddley_cfd: https://gist.github.com/andrewgross/5042007 similar to this
[2013-02-26 20:46:19 -0500] yfeldblum: riddley_cfd, what do you mean by "runs"?
[2013-02-26 20:47:50 -0500] riddley_cfd: yfeldblum: I don't see where I used that word, can you give me more context?
[2013-02-26 20:48:10 -0500] yfeldblum: riddley_cfd, " the first values stick to subsequent runs"
[2013-02-26 20:48:41 -0500] riddley_cfd: awgross: that's very similar to what I'm doing, but I'm passing in variables and each time through the loop, the variables are all set to the values from the first iteration
[2013-02-26 20:49:18 -0500] riddley_cfd: yfeldblum: sorry "subsequent iterations through the loop"
[2013-02-26 20:49:46 -0500] znDuff: ...hrm; somehow managed to not even get a validator client during install.
[2013-02-26 20:49:50 -0500] yfeldblum: riddley_cfd, can you show the code? otherwise it's hard to debug
[2013-02-26 20:49:55 -0500] riddley_cfd: sure
[2013-02-26 20:54:29 -0500] riddley_cfd: yfeldblum: awgross: https://gist.github.com/riddley/2d53e001c75f7936ee6b
[2013-02-26 20:57:16 -0500] awgross: riddley_cfd: pretty sure it is because of this script[create cert]
[2013-02-26 20:57:39 -0500] awgross: inside your lwrp, rename the script block to something like
[2013-02-26 20:57:40 -0500] riddley_cfd: oh, that has to be unique!
[2013-02-26 20:57:44 -0500] riddley_cfd: I get it now
[2013-02-26 20:57:46 -0500] riddley_cfd: thanks
[2013-02-26 20:57:56 -0500] awgross: yep, try it out and make sure it works
[2013-02-26 20:58:08 -0500] yfeldblum: riddley_cfd, or use chef-11's recipe_eval or my https://gist.github.com/yfeldblum/d85be145f3ff824ccc07
[2013-02-26 20:58:30 -0500] riddley_cfd: I can't use chef 11. Thanks awgross and yfeldblum
[2013-02-26 21:01:36 -0500] riddley_cfd: that was it. Thanks again awgross.
[2013-02-26 21:06:00 -0500] halfamind: Hi #chef. I have a repo-organization question. Say you have a code repo with associated chef recipes...
[2013-02-26 21:06:36 -0500] halfamind: We use `staging` and `production` branches to mark when code is deployed to their respective environments.
[2013-02-26 21:06:59 -0500] halfamind: Would you embed the associated recipes in the repo, so that the configuration and code changes are in sync?
[2013-02-26 21:07:35 -0500] halfamind: If not, how do you ensure your production deploy recipe isn't applying configuration relevant to a staging environment (and vice versa)?
[2013-02-26 21:08:47 -0500] leifmadsen: well we use separate environment files to control some of that, and then create release branches and remove what we don't want to use
[2013-02-26 21:08:57 -0500] leifmadsen: in terms of non-chef code, that is controlled from different repos
[2013-02-26 21:09:02 -0500] log1kal: halfamind: we keep our chef and code repos separate. we make sure that each environment has the right code by using cookbook version constraints per environments
[2013-02-26 21:09:10 -0500] leifmadsen: log1kal: +1
[2013-02-26 21:09:39 -0500] leifmadsen: we use the deploy resources to get what we need, then "pin" versions to specific releases of cookbooks so that when we do our production chef stuff, it always installs the same versions of things
[2013-02-26 21:09:53 -0500] log1kal: that does mean that roles are a thing we don't use
[2013-02-26 21:10:28 -0500] halfamind: log1kal, leifmadsen: I hadn't heard of that. Could you point me to docs on cookbook version constraints? Are they meta-data, or just SHA/branch-based references?
[2013-02-26 21:10:34 -0500] leifmadsen: we use roles to trigger a "top level cookbook" , and that contains the versions of things we want to pin. When we do a git branch into releases/1.0.0 for example, we'll then modify the cookbooks in that branch, change the versions we need to pin to, then merge to master
[2013-02-26 21:10:47 -0500] leifmadsen: halfamind: it's just metadata.rb
[2013-02-26 21:11:00 -0500] leifmadsen: lots of docs on it at docs.opscode.com
[2013-02-26 21:11:21 -0500] log1kal: http://docs.opscode.com/essentials_cookbook_versions_constraints.html
[2013-02-26 21:12:01 -0500] leifmadsen: if I am deploying code from somewhere else, I create release branches in those repos and access them from my chef cookbooks, again pinning versions where it makes sense
[2013-02-26 21:12:16 -0500] leifmadsen: in development I just tell it to grab the latest of whatever I need so things are always latest
[2013-02-26 21:12:23 -0500] halfamind: Thanks.So that's a manual process when changes occur to the cookbook repo? I was hoping to leverage our already-automated deploy flow to just bundle the config changes along with them.
[2013-02-26 21:12:26 -0500] log1kal: leifmadsen: do you have any code/apps that need to built prior to deploy?
[2013-02-26 21:12:40 -0500] leifmadsen: log1kal: only a couple of RPMs
[2013-02-26 21:12:50 -0500] log1kal: rgr
[2013-02-26 21:12:52 -0500] leifmadsen: the rest is configuration data
[2013-02-26 21:13:02 -0500] leifmadsen: but versions are easily controlled via data bags or cookbook attributes
[2013-02-26 21:14:01 -0500] log1kal: halfamind: http://docs.opscode.com/essentials_environments_formats.html has the syntax to constrain versions in environment files
[2013-02-26 21:14:25 -0500] log1kal: cookbook_versions is what you're looking for
[2013-02-26 21:17:59 -0500] halfamind: log1kal: I see. I'm still itching for a way to automate this. I'm surprised more projects don't embed the cookbooks so they can change in sync with the dependent code.
[2013-02-26 21:18:39 -0500] log1kal: It's something we're thinking about actually
[2013-02-26 21:18:54 -0500] log1kal: moving to chef-solo completely, and embedding chef with the code
[2013-02-26 21:19:29 -0500] DanR_e: Another problem with a single 'cookbooks' store on workstation or server:
[2013-02-26 21:19:31 -0500] DanR_e: I want to add python/django cookbooks to my workstation and hosted chef server, but my attempt fails with an error (see below).
[2013-02-26 21:19:32 -0500] DanR_e: dan@dan-D620:~/Devel/learn_chef/chef-repo$ knife cookbook site install -D application_python
[2013-02-26 21:19:34 -0500] DanR_e: Installing application_python to /var/chef/cookbooks
[2013-02-26 21:19:35 -0500] DanR_e: Checking out the master branch.
[2013-02-26 21:19:37 -0500] DanR_e: ERROR: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'
[2013-02-26 21:19:38 -0500] DanR_e: ---- Begin output of git checkout master ----
[2013-02-26 21:19:40 -0500] DanR_e: STDOUT: Aborting
[2013-02-26 21:19:41 -0500] DanR_e: STDERR: error: The following untracked working tree files would be overwritten by checkout:
[2013-02-26 21:19:43 -0500] DanR_e: apache2/.gitignore
[2013-02-26 21:19:45 -0500] DanR_e: apache2/CHANGELOG.md
[2013-02-26 21:19:46 -0500] DanR_e:         .  .  .   .   (lots more apache2 modules, which are already in the apache2 cookbooks)
[2013-02-26 21:19:47 -0500] DanR_e: What's going on here?  Seems to fail due to confict between application_python cookbook's inclusion of apache2 and existing apache2,
[2013-02-26 21:19:49 -0500] DanR_e:  but what's the cure?  Can I restrict checkout to only the tools that are non-overlapping?  Can I have cookbooks for a) a LAMP server, and b) a Django app server?  How?
[2013-02-26 21:20:00 -0500] doomviking: pasting into channel not recommended
[2013-02-26 21:21:14 -0500] halfamind: log1kal: I'm using embedded cookbooks and some home-grown rake tasks with chef-solo on one project. It works well, but I'm itching to move to something like AWS OpsWorks (which demands a dedicated cookbooks repo or a zip file of a repo).
[2013-02-26 21:21:55 -0500] log1kal: couldnt part of your automated flow either update that repo, or create that zip file?
[2013-02-26 21:24:07 -0500] leifmadsen: I think my workflow doesn't match the same thing, because it seems counter intuitive to me to do that :)
[2013-02-26 21:24:29 -0500] leifmadsen: we do have some configuration files (templates) in different repos that get checked out, then used via template with the 'local true' setting
[2013-02-26 21:24:34 -0500] halfamind: log1kal: Yeah, I'm considering exactly that kind of process, but looking to replace it with something more standard if it's out there.
[2013-02-26 21:24:38 -0500] maplebed: jtimberman: thanks for writing http://jtimberman.housepub.org/blog/2012/12/29/process-supervision-solved-problem/.  It's a good read, and now I understand why suddenly we have a mix of monit and runit in our cluster.
[2013-02-26 21:25:11 -0500] maplebed: (sorry if it's slightly OT for this channel)
[2013-02-26 21:28:28 -0500] log1kal: leifmadsen: I was figuring if you have a single repo, and your automation includes testing both code and config, when it passed, why not zip up the chef folder and put it somewhere opsworks can grab it
[2013-02-26 21:28:38 -0500] charity: is there a way to create ec2 tags from within a recipe?  not using knife ec2 server create -T ?
[2013-02-26 21:29:09 -0500] log1kal: charity: https://github.com/opscode-cookbooks/aws resource_tag
[2013-02-26 21:29:34 -0500] charity: thanks!
[2013-02-26 21:29:37 -0500] log1kal: :)
[2013-02-26 21:29:39 -0500] leifmadsen: log1kal: possibly... I guess for my process I spin up a VM, do some testing for deploy, or in the case of the RPMs, test and have it create the RPMs via mock, sign them, and update the repo (which is outside of chef)
[2013-02-26 21:29:46 -0500] leifmadsen: I also don't use AWS
[2013-02-26 21:30:09 -0500] log1kal: Ah, my suggestion was geared at halfamind's use of opsworks
[2013-02-26 21:30:45 -0500] leifmadsen: aye
[2013-02-26 21:30:55 -0500] leifmadsen: different work flows call for different solutions :)
[2013-02-26 21:31:01 -0500] log1kal: :)
[2013-02-26 21:31:02 -0500] halfamind: Yes, thanks leifmadsen, log1kal. At the moment it looks like opsworks expects the zip to be of a repo of cookbooks, but I'll figure this out.
[2013-02-26 21:31:12 -0500] leifmadsen: for me, the biggest issue I'm having is trying to figure out the best way to "version" our sql schemas and seed data
[2013-02-26 21:31:33 -0500] leifmadsen: because we don't really have applications that manage that data
[2013-02-26 21:31:58 -0500] leifmadsen: I could probably create RPMs or some other such things that would execute a script or whatnot... but it almost makes just as much sense to have it in chef at that point
[2013-02-26 21:32:03 -0500] leifmadsen: using the database cookbook or whatever
[2013-02-26 21:32:21 -0500] leifmadsen: or to have something that the chef cookbook can just use with the package resource or something... not sure
[2013-02-26 21:35:27 -0500] amccloud_: back
[2013-02-26 21:36:02 -0500] version2beta: jtimberman, thanks for taking a look at my Jira ticket. Can you tell me how to get into the Cookbook office hours? I didn't know there was such a session.
[2013-02-26 21:46:17 -0500] jtimberman: version2beta: i tweet the link and post it in here when it's about to start.
[2013-02-26 21:46:28 -0500] jtimberman: version2beta: but the tentative schedule is every Tuesday at 11am Mountain time.
[2013-02-26 21:46:38 -0500] jtimberman: barring travel or travesty ;)
[2013-02-26 21:46:46 -0500] version2beta: jtimberman, so there's no signup like the thursday office hours?
[2013-02-26 21:46:58 -0500] jtimberman: nothing that formal yet
[2013-02-26 21:47:19 -0500] version2beta: jtimberman, Got it. Thank you. I will definitely be attending.
[2013-02-26 21:47:25 -0500] jtimberman: right on
[2013-02-26 21:47:32 -0500] version2beta: I almost did today, just had another commitment.
[2013-02-26 21:50:25 -0500] dotslash: Trying to switch recipes to install java over to using the package commands in Chef. Seems to be using a lot more memory. Is this typical?
[2013-02-26 21:52:41 -0500] dotslash: A lot more = can't run it on a tiny aws instance like I could before.
[2013-02-26 21:54:29 -0500] gkarekinian: t1.micro? Haven't tried it in a long time, are you running Chef 11?
[2013-02-26 21:56:26 -0500] StormSilver: So are system packages deprecated in favor of the omnibus installer for Chef Server 11?
[2013-02-26 21:56:57 -0500] izet: hi I am looking for Nathan Harvey
[2013-02-26 21:57:07 -0500] StormSilver: I was using the excellent knife-server gem by fnichol, but it appears that apt.opscode.com only contains packages up to 10.18
[2013-02-26 21:57:36 -0500] izet: does anyone have his email?
[2013-02-26 22:04:35 -0500] dotslash: gkarekinian: yes chef 11.
[2013-02-26 22:05:15 -0500] dotslash: gkarekinian: and yes t1.tiny
[2013-02-26 22:22:32 -0500] faustroll: any test-kitchen ~< 1.0 users/developers in irc right now?
[2013-02-26 22:22:52 -0500] faustroll: I'd like to run multiple vms on same platform with different names
[2013-02-26 22:23:04 -0500] faustroll: I'm going to try this using a vagrantfile
[2013-02-26 22:23:17 -0500] faustroll: any advice?
[2013-02-26 22:23:47 -0500] faustroll: i see that test-kitchen already creates multiple vms
[2013-02-26 22:23:54 -0500] faustroll: but only one per platform
[2013-02-26 22:23:59 -0500] sethvargo: faustroll: schisamo?
[2013-02-26 22:24:00 -0500] leifmadsen: config.vm.customize [ "modifyvm", :id, "--name", "foobar.cool.com" ]
[2013-02-26 22:24:39 -0500] faustroll: :leifmadsen I like it
[2013-02-26 22:25:15 -0500] faustroll: :sethvargo schisamo?
[2013-02-26 22:25:45 -0500] sethvargo: I was responding to your tk > 1.0 question
[2013-02-26 22:25:50 -0500] sethvargo: faustroll: ^
[2013-02-26 22:27:13 -0500] schisamo: faustroll: so this commit shows a minimal set of files you can add to a CB to make it TK 1.0.0-alpha.0 ready: https://github.com/opscode-cookbooks/python/commit/3e1595992c9086babfa4cbe553dd64582f1ded55
[2013-02-26 22:27:28 -0500] schisamo: it uses a special vagrantfile ATM...
[2013-02-26 22:27:36 -0500] schisamo: one that is bascially generated in memory
[2013-02-26 22:28:22 -0500] schisamo: faustroll: you should be able to have 1..n platforms and 1..n suites and TK will compute a target for every platform-suite combo.
[2013-02-26 22:29:16 -0500] schisamo: faustroll: my hubot cookbook also has a fully formed example with some documentation: https://github.com/schisamo-cookbooks/hubot#testing
[2013-02-26 22:29:23 -0500] faustroll: :shisamo my mistake. I meant to type test-kitchen less than 1.0
[2013-02-26 22:29:37 -0500] schisamo: haha...you need jtimberman for that :)
[2013-02-26 22:29:53 -0500] schisamo: faustroll: although I will say TK < 1.0 is really stable
[2013-02-26 22:30:22 -0500] faustroll: :shisamo i tried tk 1.0 yesterday and had some odd config issues and I had to get back to work!
[2013-02-26 22:31:07 -0500] faustroll: :schisamo i did not find the yml config that easy to edit/read
[2013-02-26 22:31:49 -0500] faustroll: :schisamo yml can produce confusion
[2013-02-26 22:31:52 -0500] rafaelmagu: Is there a way to change the verbosity level of the knife bootstrap through a command line argument?
[2013-02-26 22:35:10 -0500] leifmadsen: jtimberman: I'm probably going to be submitting a gerrit cookbook upstream at some point in the next day or two. For that, do I just create a ticket as normal and a pull request?
[2013-02-26 22:35:15 -0500] rep0st: oHai guys. Was wondering if anybody has experience in having a shared chef workstation among multiple people and how well that worked out.
[2013-02-26 22:35:33 -0500] leifmadsen: rep0st: works fine when you use vagrant and separate VMs :)
[2013-02-26 22:35:39 -0500] faustroll: :schisamo am looking at your hubot cookbook right now, nice work
[2013-02-26 22:35:47 -0500] leifmadsen: each dev gets their own chef server, and their vms connect to that server
[2013-02-26 22:35:59 -0500] faustroll: schisamo: am looking at your hubot cookbook right now, nice work
[2013-02-26 22:36:46 -0500] rep0st: leifmadsen: thing is it's not devs. I'm trying to argue that 5 sysadmins should have their own workstation VMs instead of sharing one workstation.
[2013-02-26 22:36:57 -0500] leifmadsen: agreed
[2013-02-26 22:36:57 -0500] schisamo: faustroll: thx!
[2013-02-26 22:37:21 -0500] faustroll: schisamo: was also saying that I find the yml config in tk 1.0 to be a little unwieldy
[2013-02-26 22:37:21 -0500] leifmadsen: rep0st: I don't even get how you would share to be honest, unless each is signing out time on the server
[2013-02-26 22:37:23 -0500] rep0st: leifmadsen: so that we can spin up VMs in our environment. I'm trying to come up with arguments against a shared workstation
[2013-02-26 22:37:42 -0500] leifmadsen: you're going to run into conflicts, and people stepping on each other when you share it like that
[2013-02-26 22:37:43 -0500] log1kal: rep0st: why... would they need workstation vms?
[2013-02-26 22:37:53 -0500] leifmadsen: unless I'm not understanding what you're actually doing
[2013-02-26 22:38:19 -0500] rep0st: log1kal: for reasons leifmadsen suggested above your comment.
[2013-02-26 22:38:21 -0500] leifmadsen: if you just mean to run knife commands, that can be done on one workstation via home dirs
[2013-02-26 22:38:27 -0500] schisamo: faustroll: feel free to join the config bikeshedding here https://github.com/opscode/test-kitchen/issues/40 :)
[2013-02-26 22:39:00 -0500] log1kal: I'm wondering why they would need any number of workstation VMs, instead of whatever system they have for normal work?
[2013-02-26 22:39:33 -0500] kaiyou: (simply manifesting some public enthusiasm as I am getting my first production-grade installation up and running, CHEF ROCKS, THX FOLKS :)
[2013-02-26 22:39:58 -0500] rep0st: log1kal: because of VLAN restrictions and for redundancy reasons.
[2013-02-26 22:40:03 -0500] log1kal: Ah.
[2013-02-26 22:40:27 -0500] log1kal: Well, if everyone has their own home directories and users, I don't see an issue with sharing a workstation VM
[2013-02-26 22:40:40 -0500] log1kal: unless you're going to run into resource contention testing with vagrants or whatnot
[2013-02-26 22:40:44 -0500] rep0st: leifmadsen: so you're saying everybody uses /usr/bin/knife
[2013-02-26 22:40:51 -0500] leifmadsen: yes?
[2013-02-26 22:41:14 -0500] leifmadsen: rep0st: each person has their own knife configs, so you can certainly just home them and have the same binary
[2013-02-26 22:41:36 -0500] leifmadsen: if you're talking development and shared chef server, then no, don't do that
[2013-02-26 22:42:11 -0500] leifmadsen: log1kal: +1
[2013-02-26 22:42:25 -0500] rep0st: leifmadsen: no, no development. just a server that's in the proper VLAN in order to bootstrap nodes via knife
[2013-02-26 22:42:35 -0500] leifmadsen: oh then a single machine is fine
[2013-02-26 22:42:52 -0500] leifmadsen: just create separate home directories and configurations for knife in ~/.chef/
[2013-02-26 22:43:00 -0500] leifmadsen: pretty sure that's where I remember that going
[2013-02-26 22:43:03 -0500] leifmadsen: haven't setup knife in a while :)
[2013-02-26 22:43:10 -0500] log1kal: leifmadsen: +1
[2013-02-26 22:43:22 -0500] rep0st: yea
[2013-02-26 22:43:24 -0500] rep0st: hm
[2013-02-26 22:43:33 -0500] rep0st: maybe i can have that workstation under config management.
[2013-02-26 22:43:39 -0500] leifmadsen: and you should
[2013-02-26 22:43:43 -0500] log1kal: rep0st: we set up an 'emergency' knife box here. everyone has their own users/homes. It works nicely
[2013-02-26 22:43:56 -0500] rep0st: log1kal: that's what we're setting up
[2013-02-26 22:44:09 -0500] rep0st: log1kal: if you're saying it works for you..then i suppose it isn't such a terrible idea
[2013-02-26 22:44:25 -0500] rep0st: leifmadsen: agreed.
[2013-02-26 22:44:34 -0500] rep0st: It's refreshing to have affirmation
[2013-02-26 22:44:38 -0500] log1kal: I mean... it works like any other application that's only installed once, but has multiple users
[2013-02-26 22:44:49 -0500] leifmadsen: :)
[2013-02-26 22:45:19 -0500] rep0st: log1kal: i was worried about someone 'accidently' screwing something up. like upgrading to a bleeding edge version of ruby
[2013-02-26 22:45:55 -0500] leifmadsen: don't give them root access
[2013-02-26 22:46:14 -0500] leifmadsen: although installing ruby locally is certainly possible via rvm
[2013-02-26 22:46:30 -0500] leifmadsen: I usually tell people what not to do, and if they do it, tell them to fix their mistake
[2013-02-26 22:46:38 -0500] rep0st: leifmadsen: impossible. it's either no one has it or everybody has it.
[2013-02-26 22:46:43 -0500] erikbeta: does anyone have an example of updating a node's attributes via API call? I can't seem to get the call to work, it just returns 500s
[2013-02-26 22:46:46 -0500] rep0st: leifmadsen: i do suppose it comes down to policy then
[2013-02-26 22:47:47 -0500] log1kal: trust your sysadmins?
[2013-02-26 22:47:57 -0500] log1kal: :)
[2013-02-26 22:48:07 -0500] log1kal: we all install via RVM, and gems
[2013-02-26 22:48:15 -0500] log1kal: so we manage our own environments
[2013-02-26 22:48:41 -0500] faustroll: schisamo: lol. interesting discussion
[2013-02-26 22:48:55 -0500] rep0st: log1kal: point taken
[2013-02-26 22:49:03 -0500] rep0st: log1kal: i guess i do have to stop being so cynical
[2013-02-26 22:49:13 -0500] faustroll: schisamo: I'm going to clone and run tests on your hubot cookbook now
[2013-02-26 22:49:40 -0500] log1kal: using rvm (or rbenv) allows us to test bleeding-edge with gemsets, and go back to stable for production
[2013-02-26 22:50:54 -0500] rep0st: log1kal: i'll look into that thanks for the suggestion.
[2013-02-26 22:51:14 -0500] log1kal: enjoy!
[2013-02-26 22:51:22 -0500] log1kal: come back and let us know what you ended with
[2013-02-26 22:51:46 -0500] rep0st: will do
[2013-02-26 22:51:50 -0500] rep0st: i'll be lurking for awhile.
[2013-02-26 22:51:58 -0500] rep0st: finally got traction on rolling out chef enterprise wide
[2013-02-26 22:52:11 -0500] rep0st: it took somebody showing off puppet to finally get movement.
[2013-02-26 23:02:31 -0500] awgross: ruby makes me cry inside.  https://gist.github.com/andrewgross/5043186
[2013-02-26 23:03:01 -0500] awgross: jtimberman: expect a pull request to the chef-client cookbook soon, cuz system() seems to be broken
[2013-02-26 23:05:24 -0500] erikbeta: awgross: that only happens on ubuntu from what I've been able to tell, it works on freebsd and os x, its a really strange problem to have
[2013-02-26 23:06:03 -0500] miah: thats a interesting one
[2013-02-26 23:06:09 -0500] awgross: ruby makes me want to become an alcoholic sometimes
[2013-02-26 23:06:15 -0500] awgross: its the &
[2013-02-26 23:06:19 -0500] awgross: if you remove it
[2013-02-26 23:06:22 -0500] awgross: or escape it with a slash
[2013-02-26 23:06:27 -0500] awgross: it returns properly
[2013-02-26 23:06:51 -0500] miah: ah.
[2013-02-26 23:10:02 -0500] awgross: seems to pervade all of the ruby shell command shortcuts ``, %x[] as well
[2013-02-26 23:12:11 -0500] miah: dealing with the shell via system is almost always a meeting with disaster
[2013-02-26 23:12:20 -0500] awgross: indeed
[2013-02-26 23:12:43 -0500] awgross: unforunately its in the chef-client opscode cookbook
[2013-02-26 23:12:46 -0500] awgross: ill have to patch it
[2013-02-26 23:25:21 -0500] miah: ya :/
[2013-02-26 23:25:30 -0500] miah: fix please. mhalligan was dealing with that bug the other day.
[2013-02-26 23:29:03 -0500] faustroll: jtimberman: any tips on running multiple vm host_only scenarios in test-kitchen stable?
[2013-02-26 23:31:55 -0500] faustroll: jtimberman: it may be wiser to go to test-kitchen 1.0 for complex vm setup testing?
[2013-02-26 23:31:57 -0500] skout: I must be missing something. on the opscode apache2 cookbook, how does apache2-mpm-worker get installed on debian/ubuntu distro's? I see the settings for mpm-worker, but no logic to use mpm-worker over mpm-prefork.  Should I just manually change the default['apache']['package'] to point to apache2-mpm-worker.  TIA
[2013-02-26 23:32:52 -0500] faustroll: skout: is this a one-off?
[2013-02-26 23:33:18 -0500] skout: ideally no. :)
[2013-02-26 23:33:47 -0500] skout: but yes I am just beginning to build a role and migrate our servers to chef.
[2013-02-26 23:33:50 -0500] faustroll: skout: I understand that many use a wrapper cookbook to customize the community cookbooks.
[2013-02-26 23:35:14 -0500] faustroll: skout: I gather that that approach keeps your customizations as your responsibility.
[2013-02-26 23:36:15 -0500] faustroll: skout: or, you can patch the community cookbook in an intelligent way and intiate a pull request
[2013-02-26 23:36:47 -0500] skout: faustroll: thanks might do that since I have been adding other modules as well.
[2013-02-26 23:36:59 -0500] faustroll: skout: especially if this option is something that other ubuntu users will want
[2013-02-26 23:38:44 -0500] awgross: miah: jtimberman http://tickets.opscode.com/browse/COOK-2492
[2013-02-26 23:40:54 -0500] faustroll: faustroll: was testing test-kitchen 0.7 with complex multiple vm vagrant style config and no joy
[2013-02-26 23:41:09 -0500] faustroll: lol.
[2013-02-26 23:42:24 -0500] faustroll: i tried creating multiple vms using vagrant config in test-kitchen 0.7
[2013-02-26 23:43:20 -0500] faustroll: looks like it launched only one vm per platform
[2013-02-26 23:44:34 -0500] faustroll: schisamo: am prolly going to migrate to test-kitchen 1.0
[2013-02-26 23:50:15 -0500] jtimberman: faustroll: test kitchen is intended for single system testing, not multi-node.
[2013-02-26 23:51:02 -0500] jtimberman: faustroll: if you're looking for a multi-node testing tool, perhaps chef-workflow or cucumber-chef
[2013-02-26 23:55:29 -0500] kisoku: does open source chef 11 have organizations ?
[2013-02-26 23:56:01 -0500] miah: i suspect it lacks organizations and acl's
[2013-02-26 23:56:14 -0500] miah: but i haven't looked or heard an answer on that.
[2013-02-26 23:56:23 -0500] kisoku: I vaguely remember someone mentioning that would be open sourced with chef 11
[2013-02-26 23:56:29 -0500] kisoku: maybe btm ?
[2013-02-26 23:56:45 -0500] kisoku: then again it was probably when we were drinking in setallt
[2013-02-26 23:56:47 -0500] kisoku: seattle
[2013-02-26 23:57:39 -0500] awgross: miah: another reason to fix that bug, the run fails but not before it rewrites your client.rb to look for the chef server on localhost:4000
[2013-02-26 23:58:07 -0500] awgross: currently sed'ing a large number of machines
[2013-02-26 23:59:28 -0500] brax4444: Google is not helping me find a guide to using rackup as an Upstart service in Chef. Any suggestions?

[2013-02-20 00:05:35 -0500] kesor: hmm trying to remember that tool that generates licenses .
[2013-02-20 00:06:29 -0500] kesor: lice!
[2013-02-20 00:09:11 -0500] kesor: flaccid: here you go, https://github.com/kesor/amazon-queries enjoy!
[2013-02-20 00:10:18 -0500] flaccid: kesor: coolio, thanks!
[2013-02-20 00:14:22 -0500] k0rupted: hey my ruby is pretty week... I'm trying to add a nic only if a attribute exists/is set... anyone be able to point me in the right track?
[2013-02-20 00:14:26 -0500] k0rupted:     not_if { unless node[:network][:storageipaddress].nil? }
[2013-02-20 00:14:37 -0500] k0rupted: but... not quite working
[2013-02-20 00:15:05 -0500] kesor: k0rupted: not_if + unless  my head spins trying to understand the logic
[2013-02-20 00:15:43 -0500] kesor: k0rupted: how about     only_if { node[:].nil? }
[2013-02-20 00:16:18 -0500] k0rupted: thats where I was before till I drifted to whatever the heck I pasted
[2013-02-20 00:16:24 -0500] k0rupted: but yeah I think its just 5pm
[2013-02-20 00:17:06 -0500] kesor: k0rupted: actually, from what you wrote in words you want the opposite  resources should work only_if you dont have the address yet, right?
[2013-02-20 00:18:30 -0500] k0rupted: no oposit... I only want it to work if I have the address set
[2013-02-20 00:18:59 -0500] k0rupted: I want it to skip if I dont have a "storageipaddress" node attribute set
[2013-02-20 00:19:03 -0500] kesor: ok, so -- only_if { address exists }
[2013-02-20 00:19:09 -0500] k0rupted: correct
[2013-02-20 00:19:57 -0500] kesor: only_if { not node[:network][:storageipaddress].empty? }
[2013-02-20 00:20:44 -0500] kesor: assuming not empty is same as exists
[2013-02-20 00:20:56 -0500] k0rupted: why does the googles reference .nil? everywhere?
[2013-02-20 00:22:02 -0500] kesor: http://stackoverflow.com/questions/885414/a-concise-explanation-of-nil-v-empty-v-blank-in-ruby-on-rails
[2013-02-20 00:23:10 -0500] kesor: probably .nil? is better in your case, assuming you have node[:network] defined. or else it will raise an exception about trying to do  nil[:storageipaddress] which is illegal.
[2013-02-20 00:35:41 -0500] meatballhat: is cross-organization communication (sanely/easily) possible in the context of a chef-client run?
[2013-02-20 00:58:07 -0500] mhalligan: Hrm. It appears that the omnibus installer doesn't actually create a chef user, which is required when using the chef-client cookbook. Am I missing something that should make this automatic, or should I have a recipe creating this user?
[2013-02-20 00:59:59 -0500] mhalligan: funny because tests in the cookbook actually look to see if the user exists
[2013-02-20 01:01:05 -0500] miah: i dont think the chef user is required unless you're running chef-server
[2013-02-20 01:01:10 -0500] miah: because chef-client runs as root
[2013-02-20 01:02:17 -0500] mhalligan: that's what I thought
[2013-02-20 01:02:23 -0500] mhalligan: but the chef-client cookbook wants it to exist
[2013-02-20 01:03:42 -0500] miah: in which recipe?
[2013-02-20 01:05:38 -0500] miah: i can't find any such code in the chef-client cookbook in any of its recipes or libraries
[2013-02-20 01:07:44 -0500] redsamh: I am trying to bootstrap a new instance and wanted to make the client an admin automatically, any way to do that, since I am not able to run any cookbooks that contain databag saves
[2013-02-20 01:09:55 -0500] mhalligan: miah: seems to be test/kitchen/cookbooks/chef-client_test/recipes/cook-2169-chef.rb
[2013-02-20 01:12:11 -0500] miah: thats a test
[2013-02-20 01:12:43 -0500] miah: its not code that gets executed when running chef-client cookbook. only when running it through test-kitchen
[2013-02-20 01:15:35 -0500] mhalligan: hrm I'll dig through the stacktrace then. something wants that user to exist
[2013-02-20 01:15:47 -0500] miah: give me more details and i can assist
[2013-02-20 01:17:15 -0500] mhalligan: https://gist.github.com/anonymous/4991846 ist the stacktrace
[2013-02-20 01:17:54 -0500] mhalligan: something strange in the service recipe: but line 38 of that recipe doesn't seem to be related to anything
[2013-02-20 01:18:07 -0500] mhalligan: that's within some windows check to figure out paths
[2013-02-20 01:18:45 -0500] mhalligan: oh hrm I guess I don't really care about running the chef client as a service.
[2013-02-20 01:18:51 -0500] miah: directory[/var/run/chef]
[2013-02-20 01:18:55 -0500] miah: where is that being defined?
[2013-02-20 01:20:21 -0500] miah: i can't help but feel like you're not using https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/service.rb
[2013-02-20 01:20:38 -0500] mhalligan: I'm just using chef-client::config
[2013-02-20 01:20:52 -0500] mhalligan: and the offending line is in libraries/helpers.rb
[2013-02-20 01:21:02 -0500] mhalligan: where it sets the owner of /var/run/chef to be the chef user
[2013-02-20 01:21:18 -0500] mhalligan: which doesn't make any sense when using the omnibus package
[2013-02-20 01:22:03 -0500] miah: https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/service.rb
[2013-02-20 01:22:42 -0500] miah: are you running this on a chef-server ?
[2013-02-20 01:22:46 -0500] mhalligan: no
[2013-02-20 01:22:51 -0500] mhalligan: I use hosted chef
[2013-02-20 01:22:58 -0500] mhalligan: I'm only including chef::config
[2013-02-20 01:23:01 -0500] mhalligan: err chef-client::config
[2013-02-20 01:23:34 -0500] miah: then this might be fubar
[2013-02-20 01:23:35 -0500] miah: https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/service.rb
[2013-02-20 01:23:49 -0500] miah: is chef-server or chef-server-ctl in your path?
[2013-02-20 01:24:25 -0500] mhalligan: whose path at this point? root?
[2013-02-20 01:24:30 -0500] miah: sure
[2013-02-20 01:24:36 -0500] miah: chef-client runs as root
[2013-02-20 01:24:40 -0500] mhalligan: nope
[2013-02-20 01:24:41 -0500] miah: https://github.com/opscode-cookbooks/chef-client/blob/master/libraries/helpers.rb#L29
[2013-02-20 01:24:44 -0500] miah: look here
[2013-02-20 01:24:54 -0500] mhalligan: chef-client and chef-soo are the only chef binaries in its' path
[2013-02-20 01:25:08 -0500] miah: its trying to determine if you are a chef-server, and if so. it sets the ownership of the run_path to 'chef'
[2013-02-20 01:25:09 -0500] mhalligan: Yeah, I don't use the chef-server recipe anywhere
[2013-02-20 01:25:15 -0500] miah: https://github.com/opscode-cookbooks/chef-client/blob/master/libraries/helpers.rb#L45
[2013-02-20 01:25:20 -0500] miah: i didnt say recipe
[2013-02-20 01:25:32 -0500] miah: if the omnibus install includes chef-server and its in your path thats causing the problem
[2013-02-20 01:25:52 -0500] miah: its 3 or's. the first checks for recipe, the others check for those binaries being in your path
[2013-02-20 01:26:04 -0500] mhalligan: the binary doesn't exist on the server
[2013-02-20 01:26:10 -0500] mhalligan: err on any of the clients I mean
[2013-02-20 01:26:15 -0500] mhalligan: neither chef-server or chef-server-ctl
[2013-02-20 01:27:17 -0500] miah: this commit is probably fubar
[2013-02-20 01:27:18 -0500] miah: https://github.com/opscode-cookbooks/chef-client/commit/6791091e2c9b416bc774bb1760921cd70a108b0b
[2013-02-20 01:27:36 -0500] miah: at the very least. it has fucked up spacing and needs to be slapped
[2013-02-20 01:28:36 -0500] miah: i haven't seen this error pop up, but i'm not running the latest cookbook
[2013-02-20 01:28:48 -0500] mhalligan: oh which chef-server &> /dev/null returns 1
[2013-02-20 01:29:03 -0500] miah: thats fine
[2013-02-20 01:29:23 -0500] mhalligan: right. hrm.
[2013-02-20 01:31:33 -0500] mhalligan: that code seems fine.. if not windows then test  for either the existence of that recipe,  the chef-server binary or chef-server-ctl
[2013-02-20 01:31:38 -0500] mhalligan: so it should return 1
[2013-02-20 01:32:25 -0500] miah: look in /opt/opscode/chef or whatever the path is and verify those files don't exist
[2013-02-20 01:32:32 -0500] miah: chef's path might be slightly different than your own
[2013-02-20 01:32:41 -0500] mhalligan: I already did a find / -name chef-server
[2013-02-20 01:32:43 -0500] mhalligan: and the other 2 binaries
[2013-02-20 01:32:45 -0500] mhalligan: nothing
[2013-02-20 01:32:47 -0500] miah: ok
[2013-02-20 01:33:07 -0500] clintel: hey guys, I'm confused by how a 'service' resource determines whether the respective service has a "status" check.
[2013-02-20 01:33:43 -0500] clintel: i have a service on ubuntu (/etc/init.d/openvpn), and it DOES have a "status" command which works, but my chef-client debug log reports: service[openvpn] falling back to process table inspection
[2013-02-20 01:33:51 -0500] miah: clintel: it doesnt determine that. it only uses 'status' if you tell it that it has it.
[2013-02-20 01:34:17 -0500] miah: http://docs.opscode.com/resource_service.html
[2013-02-20 01:34:18 -0500] miah: read
[2013-02-20 01:34:27 -0500] mhalligan: this is yak shaving, I'm going to table it until I get other shit working.
[2013-02-20 01:34:37 -0500] clintel: miah: ahh, thanks. i think i may have missed that crucial bit from code i grabbed elsewhere
[2013-02-20 01:34:55 -0500] mhalligan: I need to add a decision tree to anything I spend time on with community cookbooks: "Are you shaving a yak? If so, stop working on this and do something productive instead"
[2013-02-20 01:35:12 -0500] miah: i think yak shaving generally happens within 5 minutes of using a community cookbook
[2013-02-20 01:35:17 -0500] miah: 'oh shit this doesnt actually work'
[2013-02-20 01:35:24 -0500] mhalligan: except for yours
[2013-02-20 01:35:32 -0500] mhalligan: in fact, yours seem to be the only exceptions so far
[2013-02-20 01:35:37 -0500] miah: ive found plenty of bugs in mine :P
[2013-02-20 01:36:01 -0500] miah: anyways. i need to go to bart and go home and decompress
[2013-02-20 01:36:07 -0500] miah: stupid lonely day in the office.
[2013-02-20 01:36:11 -0500] mhalligan: I think I've done a pull request or two on one of yours, but never a "oh crap, this doesn't work, time to spend 20 hours on this crap"
[2013-02-20 01:36:11 -0500] miah: solo ops is exhausting
[2013-02-20 01:36:22 -0500] miah: ya
[2013-02-20 01:36:24 -0500] miah: definitely =)
[2013-02-20 01:36:46 -0500] mhalligan: miah: aye. that's why I'm glad to have quit my day job. 8 months of being promised I could hire a counterpart next month
[2013-02-20 01:37:17 -0500] mhalligan: have fun!
[2013-02-20 01:44:28 -0500] ypaq: hey, i'm having a problem with decrypting data bags
[2013-02-20 01:45:02 -0500] doomviking: dont lose the key
[2013-02-20 01:45:33 -0500] ypaq: the key is there, i've checked in /etc/chef/encrypted_data_bag_secret
[2013-02-20 01:45:54 -0500] ypaq: i can use the key to decrypt the data bag with knife
[2013-02-20 01:46:19 -0500] ypaq: the chef run fails with Chef::EncryptedDataBagItem::DecryptionFailure
[2013-02-20 01:47:17 -0500] ypaq: on this line: vault = Chef::EncryptedDataBagItem.load("vault", "password")
[2013-02-20 01:47:40 -0500] ypaq: this is extremly frustrating because this used to work
[2013-02-20 01:48:00 -0500] ypaq: the only thing i've changed is my chef version
[2013-02-20 01:48:08 -0500] ypaq: to 10.24.0
[2013-02-20 01:48:41 -0500] doomviking: have you dropped it back to 10.22.0 or something to check that?
[2013-02-20 01:49:35 -0500] ypaq: no, but the version I used was 10.14.0 and i promise it worked
[2013-02-20 01:49:54 -0500] ypaq: i needed to update because of the ruby madness
[2013-02-20 01:51:15 -0500] doomviking: I'm using 10.22.0 across my stuff at the moment. maybe test that version?
[2013-02-20 01:51:24 -0500] ypaq: i did.. same
[2013-02-20 01:51:53 -0500] ypaq: started with 10.22.0 now 10.24.0, neither work
[2013-02-20 01:52:28 -0500] ypaq: does anyone know if there were changes to data bags recently?
[2013-02-20 01:52:48 -0500] ypaq: 10.24.0 is only 3 days older than 10.22.0
[2013-02-20 01:52:55 -0500] ypaq: younger
[2013-02-20 01:53:03 -0500] timsmith: 24 wouldn't impact that
[2013-02-20 01:53:13 -0500] timsmith: between 14 and 22 the JSON gem was updated
[2013-02-20 01:55:33 -0500] doomviking: ypaq: did you try nuking the data bag and putting it back in?
[2013-02-20 01:55:42 -0500] ypaq: multiple times
[2013-02-20 01:55:53 -0500] ypaq: even with different keys
[2013-02-20 01:56:08 -0500] doomviking: yeah, no idea.
[2013-02-20 01:56:17 -0500] ypaq: thanks, though
[2013-02-20 01:58:13 -0500] ypaq: did the server api change for data bags?
[2013-02-20 04:50:31 -0500] halcyonCorsair: COMMUNITY -- cookbook names with hyphens or underscores? What say you?
[2013-02-20 04:56:46 -0500] raygunsix: i've always been a hyphen man
[2013-02-20 05:01:29 -0500] redsamh: any nice folks out there know the answer for: "I am trying to bootstrap a new instance and wanted to make the client an admin automatically, any way to do that, since I am not able to run any cookbooks that contain databag saves
[2013-02-20 05:01:29 -0500] redsamh: "
[2013-02-20 05:22:58 -0500] juliancdunn: halcyonCorsair: actually I try to avoid both, for naming consistency with LWRPs
[2013-02-20 05:55:03 -0500] spheromak: redsamh: you would probably have to make the client outside of the chef-run with knife and then copy the .pem and setup the /etc/chef/client.rb to poitn at it (With the right client name)
[2013-02-20 06:29:50 -0500] log1kal: Did platform names change?
[2013-02-20 06:30:14 -0500] log1kal: I've had a few recipes tell me that "ubuntu" is an unrecognized platform.
[2013-02-20 07:21:14 -0500] GreatSUN: good morning
[2013-02-20 07:57:39 -0500] GreatSUN: hey guys
[2013-02-20 07:57:59 -0500] GreatSUN: does someone of you know, if I can use a custom method within attribute-files?
[2013-02-20 08:12:50 -0500] flaccid: GreatSUN: you can do ruby in there if you want
[2013-02-20 08:13:53 -0500] GreatSUN: flaccid: so I can load custom class and use method
[2013-02-20 08:13:54 -0500] GreatSUN: thanks
[2013-02-20 08:37:42 -0500] denniswisnia: why you use chef and not puppet?
[2013-02-20 08:37:53 -0500] denniswisnia: ask for an blog entry that I wrote about.
[2013-02-20 08:55:06 -0500] denniswisnia: here it is: http://dennis-wisnia.de/wordpress/2013/02/37876/
[2013-02-20 08:59:14 -0500] kesor: "knife configure --init" was automatable in 11.2, but now in 11.4 it does some user creating thing and its no longer automatable  Y LIKE THIS?
[2013-02-20 09:56:06 -0500] alex___: is it possible to insert multiple variables into a definition
[2013-02-20 09:56:07 -0500] alex___: ?
[2013-02-20 10:12:11 -0500] GreatSUN: alex___: what do you mean? can you give kind of an example?
[2013-02-20 10:12:47 -0500] GreatSUN: can someone tell me, if I find an error in attributes I can not continue to work with within a recipe, how I can stop execution?
[2013-02-20 10:13:20 -0500] GreatSUN: with Chef::Log.error("error") I can only drop the message
[2013-02-20 10:14:24 -0500] GreatSUN: just as usual within ruby (exit 1) ?
[2013-02-20 10:29:21 -0500] zts: GreatSUN: do you want to abort the entire Chef run, or just skip the rest of the recipe?
[2013-02-20 10:29:48 -0500] zts: GreatSUN: http://stackoverflow.com/questions/14290397/how-do-you-abort-end-a-chef-run
[2013-02-20 10:32:48 -0500] GreatSUN: zts: yeah, the entire run, cause someone has to fix something then
[2013-02-20 10:33:22 -0500] GreatSUN: zts: so I should do it with Chef::Application.fatal!()
[2013-02-20 10:33:39 -0500] GreatSUN: will change that in recipe then. right now I am using exit 1
[2013-02-20 10:35:28 -0500] zts: yup
[2013-02-20 10:42:04 -0500] edannenbe: when i try to start the webui i get in `to_specs': Could not find sass (~> 3.1.11) , however sass 3.2.5 is installed, any ideas?
[2013-02-20 10:42:17 -0500] edannenbe: chef-server-api is running fine
[2013-02-20 10:51:30 -0500] edannenbe: kk, downgrading to sass 3.1.20 did they trick
[2013-02-20 10:51:33 -0500] edannenbe: the*
[2013-02-20 10:54:41 -0500] stPundit: hey guys how do i enquire who is the user at node from chef
[2013-02-20 10:55:03 -0500] zts: edannenbe: "~> 3.1.11" means "between 3.1.11 and 3.1.19"
[2013-02-20 10:55:07 -0500] zts: gah, sorry
[2013-02-20 10:55:14 -0500] zts: "between 3.1.11 and 3.1.99"
[2013-02-20 10:55:58 -0500] edannenbe: zts, i see, thanks, not really familiar with ruby
[2013-02-20 10:56:36 -0500] zts: edannenbe: here you go - http://docs.opscode.com/essentials_cookbook_versions_constraints.html
[2013-02-20 11:19:57 -0500] alex___: how can i see keys inside a databag?
[2013-02-20 11:20:28 -0500] alex___: users_secret = Chef::EncryptedDataBagItem.load_secret("#{node[:keys][:users][:secretkey]}")
[2013-02-20 11:20:31 -0500] alex___: userdata = Chef::EncryptedDataBagItem.load(node['hostname'], "users", users_secret)
[2013-02-20 11:20:34 -0500] alex___: log "#{userdata.keys}"
[2013-02-20 11:20:48 -0500] alex___: last one doesnt work
[2013-02-20 11:22:52 -0500] alex___: got it
[2013-02-20 11:22:55 -0500] alex___: never mind
[2013-02-20 11:24:57 -0500] zts: alex___: what was the answer?
[2013-02-20 11:37:01 -0500] avishai: hi
[2013-02-20 11:37:18 -0500] avishai: i need help debugging a weird problem
[2013-02-20 11:37:45 -0500] avishai: it seems chef 10.24.0 leaks memory
[2013-02-20 11:37:56 -0500] avishai: or possibly something i load with it
[2013-02-20 11:38:18 -0500] avishai: after using heap_dump
[2013-02-20 12:42:44 -0500] rohrer: is there any way to freeze all of the cookbooks that have already been uploaded to a server?
[2013-02-20 12:53:45 -0500] poorguy: hello i'm trying to install postgresql using chef-solo however it shows "FATAL: You must set node['postgresql']['password']['postgres'] in chef-solo mode. For more information, see https://github.com/opscode-cookbooks/postgresql#chef-solo-note" here's my json: http://paste.debian.net/235913/ I dont know what i'm doing wrong.
[2013-02-20 12:58:15 -0500] matti: poorguy: I'd recommend using Ruby DSL for roles.
[2013-02-20 12:58:20 -0500] matti: poorguy: So much more cleaner.
[2013-02-20 12:58:20 -0500] matti: ;]
[2013-02-20 12:59:47 -0500] poorguy: matti: could you show me an example?
[2013-02-20 13:00:24 -0500] matti: http://wiki.opscode.com/display/chef/Roles
[2013-02-20 13:00:32 -0500] matti: "The Ruby DSL
[2013-02-20 13:00:35 -0500] matti: "
[2013-02-20 13:06:25 -0500] baumer: I've just stepped down to ruby 1.8.7 and uninstalled and re-installed chef chefserver and rabbitmq as well as removed the directory, but I still get a fail on some of the set up with little info or logs to say what actually failed, can someone look at my pastie and help to what actually happened? http://pastie.org/6239612
[2013-02-20 13:07:44 -0500] matti: poorguy: So, it does this: https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/server.rb#L34
[2013-02-20 13:08:18 -0500] matti: poorguy: Can you set it in default_attributes section?
[2013-02-20 13:08:34 -0500] poorguy: let me try thanks
[2013-02-20 13:09:07 -0500] matti: I do wonder.
[2013-02-20 13:09:59 -0500] poorguy: same :(
[2013-02-20 13:11:01 -0500] baumer: On startup I'm getting a jetty log produced - but empty, same for expander and merb logs,
[2013-02-20 13:11:35 -0500] matti: baumer: Question -- would it be possible for you to use Omnibus server package?
[2013-02-20 13:12:10 -0500] matti: poorguy: Can you do an experiment?
[2013-02-20 13:12:29 -0500] matti: poorguy: Instead of a role, override it in a normal run_list JSON blob.
[2013-02-20 13:40:54 -0500] jedi4ever: is there a REST api call to query the ohai information on chef-server ?
[2013-02-20 13:43:45 -0500] zts: jedi4ever: it should be returned with the rest of the node data, if you GET /nodes/<node>
[2013-02-20 13:44:02 -0500] jedi4ever: thx zts
[2013-02-20 13:44:07 -0500] zts: np
[2013-02-20 13:47:16 -0500] Philipp_: is chef-solo working using version 11.?
[2013-02-20 13:47:28 -0500] Philipp_: I get errors like this FATAL: Chef::Exceptions::PrivateKeyMissing: I cannot read /etc/chef/client.pem, which you told me to use to sign requests!
[2013-02-20 13:49:44 -0500] zts: Philipp_: it should be working in general.  Can you gist/pastebin more logs showing where the problem occurs?  Did the same cookbooks/configuration work for you on a previous release of chef-solo?
[2013-02-20 13:51:10 -0500] Philipp_: zts take a look http://pastebin.com/xZZCnYx2
[2013-02-20 13:54:24 -0500] zts: Philipp_: thankyou - I see that cookbook uses search, which doesn't work (out of the box) with chef-solo.
[2013-02-20 13:54:58 -0500] zts: Philipp_: I see the chef-solo-search cookbook has very recently been updated with support for Chef 11, so that might help you - https://github.com/edelight/chef-solo-search
[2013-02-20 14:14:03 -0500] Philipp_: zts thanks I will try this out any chance that this function will be included in the next chef release?
[2013-02-20 14:18:00 -0500] poorguy: matti: dsl saved my day thanks :D
[2013-02-20 14:44:00 -0500] yruss972: Hi- how do people chmod -R a directory in chef? It seems the directory resource doesn't work :(
[2013-02-20 14:44:19 -0500] _JamieD_: when bootstrapping a server with knife it's installing ruby 1.8 globally which is causing problems as our rails app is using ruby 1.9 but it's not always picked up, for instance capistrano is trying to use ruby 1.8. Is there a way I can set an alternative path to install chef's ruby using knife bootstrap?
[2013-02-20 14:46:00 -0500] zts: Philipp_: actually, there is a thread on the chef mailing list right now about possible improvements to chef-solo
[2013-02-20 14:46:22 -0500] zts: Philipp_: hopefully it will be added in a future chef release, but probably not the next one
[2013-02-20 14:46:48 -0500] laurent\: pretty there's an old ticket about resuming notifications in case of errors, but i can't seem to find it, does that ring a bell ?
[2013-02-20 14:47:50 -0500] zts: laurent\: there is a relevant change in Chef 11 - http://docs.opscode.com/breaking_changes_chef_11.html#delayed-notifications-changes
[2013-02-20 14:47:56 -0500] zts: laurent\: is that what you had in mind?
[2013-02-20 14:49:23 -0500] laurent\: zts: yep, thanks again for this quick and precise answer ! :)
[2013-02-20 14:50:17 -0500] zts: laurent\: no problem :)
[2013-02-20 14:51:16 -0500] laurent\: i'm not yet ready to upgrade my oss chef server to 11 tho.
[2013-02-20 14:54:44 -0500] zts: yeah, I would not rush that upgrade
[2013-02-20 14:54:49 -0500] laurent\: gosh, i've got too much work on my side to keep up with chef progressions. :)
[2013-02-20 14:58:17 -0500] stPundit: hey guys,can you please point me how to download a zip file and then unzip that to a dir from a chef recipe
[2013-02-20 15:00:18 -0500] laurent\: i'll do it sooner a later, atm everything (solr, couch, rabbit, chef) run on the same host, i've be planning on reinstalling everything in a HA setup for several months but i haven't had time to complete that yet :-(
[2013-02-20 15:01:02 -0500] leifmadsen: stPundit: use the remote_file and execute resources
[2013-02-20 15:01:54 -0500] vegardx_: laurent\: how will splitting them out on different hosts make it HA?
[2013-02-20 15:01:54 -0500] MrBIOS: mornin folks
[2013-02-20 15:02:18 -0500] MrBIOS: anyone have any suggestions on how to go about distributing a custom .bashrc for a particular user?
[2013-02-20 15:02:26 -0500] MrBIOS: can I easily set an attribute in a data bag?
[2013-02-20 15:03:23 -0500] laurent\: vegardx_: oh i guess i wasn't clear enough, i imply that i would split everything on a lot on dedicated hosts
[2013-02-20 15:04:25 -0500] laurent\: (HA using only one host doesn't make sense to me)
[2013-02-20 15:04:46 -0500] vegardx_: Neither does splitting all services out on different hosts. Won't make it any more HA.
[2013-02-20 15:05:14 -0500] laurent\: sure, but that's definitely a good start :)
[2013-02-20 15:05:25 -0500] vegardx_: I can't really see why.
[2013-02-20 15:05:57 -0500] vegardx_: It makes everything more complex, and suddenly you have to factor in network problems.
[2013-02-20 15:09:52 -0500] stPundit: <leifmadsen> thanks
[2013-02-20 15:11:24 -0500] stPundit: also how could I find which is <home_dir> from chef recipe?
[2013-02-20 15:15:48 -0500] laurent\: vegardx_: complexity is not really an issue here. i already run a lot of resources with corosync/pacemaker, it's just a matter of running a lot of simple tasks in a setup that can be quite complex :) (not complicated tho) (that's already what we're doing with chef, init ? ;-))
[2013-02-20 15:16:12 -0500] laurent\: network is obviously critical
[2013-02-20 15:20:56 -0500] Philipp_: zts the mailinglist doesn't mention that features like databags worked before
[2013-02-20 15:21:44 -0500] Philipp_: in my opinion this is an important information... features should not get lost during an upgrade
[2013-02-20 15:27:45 -0500] fclausen: hello all, I would like to call the Apache2 cookbook's "web_app" definition from another "wrapper" recipe which configures company specific Apache items so as to leave the main Apache2 cookbook "clean" and easy to update. I have added `depends "apache2"` to metadata.rb  in the wrapper cookbook but chef seems to think that I am trying to define a template. How can I best call definitions from other recipes? (chef client is version 11 on rhel 5. Chef serve
[2013-02-20 15:27:47 -0500] fclausen: r is version 11 on RHEL 6)
[2013-02-20 15:29:43 -0500] zts: Philipp_: erm, databags still work in chef-solo 11?
[2013-02-20 15:29:53 -0500] zts: (don't they?)
[2013-02-20 15:30:16 -0500] zts: Philipp_: the reason for your error is not that you are using databags, but that you are using search
[2013-02-20 15:35:24 -0500] Philipp_: zts yes but search was working before as well
[2013-02-20 15:37:49 -0500] patcon: jtimberman: hey! is there a thread somewhere about the discussion to split out veewee definitions into bento? re: https://github.com/jedi4ever/veewee/issues/385
[2013-02-20 15:42:57 -0500] jtimberman: patcon: i don't have the full backstory.
[2013-02-20 15:43:12 -0500] jtimberman: patcon: I know that they started out from the definitions that tim dysinger created here: https://github.com/dysinger/basebox
[2013-02-20 15:43:24 -0500] jtimberman: and we adopted the layout for them when we created the bento repo.
[2013-02-20 15:44:53 -0500] patcon: jtimberman: gotcha! Thanks? Is there someone else who might have point on that project, and know whether merging with veewee or cooperating for puppet support would be an option?
[2013-02-20 15:45:16 -0500] patcon: *thanks(non-interrogative)
[2013-02-20 15:45:49 -0500] buysse: kclear
[2013-02-20 15:48:36 -0500] jtimberman: patcon: schisamo worked directly with it more recently.
[2013-02-20 15:49:26 -0500] qhartman: gem search chef
[2013-02-20 15:49:41 -0500] qhartman: oops, r/w (it's early) :D
[2013-02-20 15:51:03 -0500] patcon: awesome. thanks JT
[2013-02-20 15:56:47 -0500] jedi4ever: patcon: jtimberman if you'd like to discuss bentoo/veewee a bit - https://plus.google.com/hangouts/_/32bbe34c4602594749f4c8a8fc2ed24a67f37317?authuser=0&hl=en
[2013-02-20 15:59:09 -0500] schisamo: jedi4ever: joined the hangout
[2013-02-20 15:59:12 -0500] schisamo: YUNO SPEAK
[2013-02-20 16:02:58 -0500] magoo: i'm probably being thick but why is this not doubling the value assigned?
[2013-02-20 16:03:15 -0500] magoo: default[:api][:starman_workers] = 5 < cpu[:total]*2 ? 5 : cpu[:total]*2
[2013-02-20 16:03:44 -0500] magoo: in this case, I have an 8 core box... so i should end up with 16 assigned
[2013-02-20 16:04:05 -0500] magoo: maybe some parens are necessary?
[2013-02-20 16:04:46 -0500] qhartman: I just upgraded my chef server to 10.22.0. Everything seems normal in the webui, but when I try to do a "knife search node 'name:foo'", I get "ERROR: Server returned error for http://...." Any insights?
[2013-02-20 16:10:42 -0500] jtimberman: jedi4ever: can't at the moment
[2013-02-20 16:16:44 -0500] edannenbe: qhartman, have the same issue, cookbook upload also doesn't seem to work in 10.22.0.. try 10.24.0 i guess
[2013-02-20 16:17:58 -0500] qhartman: edannenbe, seriously, another one already? have you gotten things to actually work with 10.24.0?
[2013-02-20 16:18:25 -0500] qhartman: aha, I got it going
[2013-02-20 16:18:45 -0500] qhartman: turns out my solr was unhappy about not not being able to write to a log file and that was causing it to silently fail
[2013-02-20 16:18:59 -0500] qhartman: nuked the log file and restart solr, and it's working again
[2013-02-20 16:19:12 -0500] edannenbe: qhartman, http://community.opscode.com/chat/chef/2013-02-15 for the upload issue
[2013-02-20 16:19:27 -0500] richleland: can you do nested recipes like sites::somesite::app
[2013-02-20 16:19:40 -0500] richleland: I thought I had done that in the past, but it's been a while since I've chef'd
[2013-02-20 16:20:06 -0500] richleland: or does everything just have to be in the recipe folder like sites::somesite_app
[2013-02-20 16:21:20 -0500] qhartman: edannenbe, yeah, just tried to upload a cookbook, and I got fail as well. apparently can't get /sandboxes? Looks like the pastes referred to in that IRC log are expired, so I'm not seeing much info.
[2013-02-20 16:22:22 -0500] edannenbe: qhartman, i had the /sandbox too for a bit, but now it fails with Unsupported `json_class` type 'Chef::Checksum' - (JSON::ParserError)
[2013-02-20 16:22:25 -0500] MrBIOS: anyone have any suggestions on how to go about distributing a custom .bashrc for a particular user?
[2013-02-20 16:22:27 -0500] MrBIOS: can I easily set an attribute in a data bag?
[2013-02-20 16:24:10 -0500] edannenbe: qhartman, according to the irc log it's fixed with 10.24.0.. i prolly gonna wait a week or so before i try again, took me all day to set 10.22.0 up for very little value :/
[2013-02-20 16:24:11 -0500] qhartman: edannenbe, yeah, I just got to that in the server log
[2013-02-20 16:24:31 -0500] qhartman: edannenbe, well, I have to get this going ASAP, so I'm going for it....
[2013-02-20 16:25:05 -0500] edannenbe: gl
[2013-02-20 16:28:45 -0500] qhartman: edannenbe, ty. And thanks for the pointers
[2013-02-20 16:30:57 -0500] geekbri: Anybody here well versed in chef-solo-search?  I'm trying to call chef search from inside a module I have in my libraries directory.  I can't seem to use chef-solo-search however because it looks like that module isn't mixed in to my module in my library
[2013-02-20 16:31:34 -0500] chris613: If I have chef-client running as a daemon, is there a way to kick it and tell it to run now instead of waiting out it's interval?
[2013-02-20 16:32:27 -0500] qhartman: chris613, I don't run chef in daemon mode, but I would guess that if you restarted it, it would kick a run immediately
[2013-02-20 16:32:36 -0500] juliancdunn: chris613: you can also run chef-client --once
[2013-02-20 16:32:52 -0500] qhartman: gem search chef
[2013-02-20 16:32:58 -0500] qhartman: argh, that's twice...
[2013-02-20 16:34:52 -0500] laurent\: chris613: kill -1 $(</var/run/chef/client.pid)
[2013-02-20 16:35:11 -0500] laurent\: hmm
[2013-02-20 16:35:16 -0500] laurent\: no, SIGUSR1
[2013-02-20 16:36:06 -0500] chris613: Restarting the initscript seems to do it, I just wan't being patient enough for my splay value I think
[2013-02-20 16:42:04 -0500] qhartman: well, upgrading to 10.24 on both the server and client has not fixed the cookbook upload problem for me. All this breakage recently is really frustrating....
[2013-02-20 16:42:42 -0500] qhartman: argh, nm looks like the server didn't restart correctly, it's still actually running 10.22
[2013-02-20 16:44:43 -0500] qhartman: sweet, had to kill -9 the old process, but running 10.24 on the server did fix the cookbook upload (JSON parse error) problem for me.
[2013-02-20 16:45:56 -0500] laurent\: qhartman: i also encountered this issue, i'm running 10.24 on both the server and workstation. on the server 10.24 is the only available version. (and all chef server processes were thoroughly restarted)
[2013-02-20 16:48:30 -0500] qhartman: laurent\, after I got up to 10.24 on everything and rebuilt the solr index I seem to be back to 100% functionality
[2013-02-20 16:48:44 -0500] qhartman: I'm still testing some stuff, but the obvious breakage is gone
[2013-02-20 16:48:54 -0500] qhartman: hopefully won't have to upgrade this stuff again for awhile
[2013-02-20 16:52:22 -0500] jedi4ever: schisamo: patcon thanks for the chat
[2013-02-20 16:52:48 -0500] schisamo: jedi4ever: np! glad to help.
[2013-02-20 17:00:38 -0500] geekbri: Looking at the source of chef-client, it looks to me like libraries loaded by one cookbook, should be available by cookbooks further down in the run list.  Can anybody confirm this?
[2013-02-20 17:02:10 -0500] sascha_d: hi chefs, does the omnitruck collection have package repo info? We are wondering if we can point directly at it with yum.
[2013-02-20 17:02:18 -0500] patcon_: jedi4ever schisamo: thanks!
[2013-02-20 17:02:33 -0500] qhartman: geekbri, yes, that is correct. At least by my understanding and the observed behavior.
[2013-02-20 17:02:43 -0500] geekbri: qhartman: thanks, just wanted a sanity check :)
[2013-02-20 17:04:14 -0500] schisamo: sascha_d: unfortunatley not yet...you will have to import packages into your own repo.
[2013-02-20 17:04:24 -0500] schisamo: sascha_d: that is on our radar though.
[2013-02-20 17:04:30 -0500] sascha_d: that's what I thought. Just checking :)
[2013-02-20 17:04:35 -0500] c_t: ohai you chefs
[2013-02-20 17:07:05 -0500] qhartman: geekbri, that said, anything you know you need should be explicitly included in the recipe that needs it, don't want to have non-obvious dependencies.
[2013-02-20 17:08:21 -0500] geekbri: qhartman: yeah, mine is just for a dev scenario.  I'm trying to use chef-solo-search so i can dev something that uses search. I however have a library I wrote myself that relies on search, and for some reason my library doesn't have the chef-solo-search module mixed in
[2013-02-20 17:08:30 -0500] geekbri: Trying to figure out why / how to work around it :)
[2013-02-20 17:09:03 -0500] qhartman: geekbri, gotcha. Sorry I can't be of more help there, I don't use solo at all, and I know the search functionality there is a lot different than standard chef
[2013-02-20 17:09:30 -0500] geekbri: Yeah, I don't mind that its not as full featured. I'm just trying to figure out how to get that method mixed into my library ;)
[2013-02-20 17:10:06 -0500] jtimberman: geekbri: have you seen fnichol's searchef repo?
[2013-02-20 17:10:21 -0500] geekbri: jtimberman: I have not, im guessing its something perhaps I should look at?
[2013-02-20 17:11:01 -0500] geekbri: jtimberman: thanks.  found it on github, i'll take a peak
[2013-02-20 17:12:46 -0500] r5s|jbarney: g'morning. is there a way to return the parent objects of a json search? I have subnets listed by zone in a databag. I want to match the subnet to the node to find the zone.
[2013-02-20 17:13:45 -0500] geekbri: jtimberman: this looks nice and useful.  Question though, is there a way to make sure a module from another cookbook is mixed into a class you've got inside of another CB's library director?
[2013-02-20 17:23:12 -0500] kwbock: has anyone encountered "uninitialized constant Chef::Recipe::Opscode" when running the mysql recipe from the opscode-cookbooks repo
[2013-02-20 17:34:04 -0500] n3llyb0y: I'm using chef-solo and attempting to notfy a service defined in cookbook 'a' from cookbook 'b'. I have cookbook 'a' as a depend in the cookbook 'b' metadata but it doesn't appear as if the service in question is responding. Should it "just work" or do I need to import the other cookbook somehow?
[2013-02-20 17:37:25 -0500] redsamh: <spheromak>: not sure if you are around but I am trying to do $ knife client edit -d SRVRMACHINE < /tmp/SRVRMACHINE-Admin.json and I get "Object unchanged, not saving"
[2013-02-20 17:38:00 -0500] redsamh: anyone else who has faced the issue with "knife client edit -d SRVRMACHINE" and getting the Object unchanged
[2013-02-20 17:38:41 -0500] redsamh: I am passing it the complete JSON with only the admin attribute changed from "admin": true to   "admin": false
[2013-02-20 17:44:26 -0500] directhex: there's no suggestion on http://wiki.opscode.com/display/chef/Server+API#ServerAPI-/nodes/NODE_NAME of what an http 400 response on a PUT might mean
[2013-02-20 17:45:22 -0500] zv470: Hi, I'm wondering will there be chef11 for 32bit Ubuntu? Probably been asked before but I couldn't find the answer with google.
[2013-02-20 17:45:45 -0500] zv470: I mean... Chef 11 server 32bit
[2013-02-20 17:56:56 -0500] redsamh: anyone know how to fix the "Object unchanged, not saving" error. I dont get any errors and I am not sure how to make it work while editing a client using "knife client edit -d"
[2013-02-20 17:57:01 -0500] redsamh: Here is what I see when I do a verbose output: http://pastebin.com/CNyj0Biw
[2013-02-20 18:04:41 -0500] smdahlen: is there a best practice for cleaning up / removing resources provisioned by chef? e.g. a seperate recipe?
[2013-02-20 18:05:14 -0500] matti: smdahlen: Usually.
[2013-02-20 18:05:50 -0500] matti: smdahlen: People would have "undo" or "remove", or "delete" (whatever floats your boat) that removes everything and tryies to restore to previous state.
[2013-02-20 18:06:11 -0500] matti: smdahlen: And often in the recipe they will remove said recipe from the run list in the end.
[2013-02-20 18:06:33 -0500] matti: smdahlen: But, if you have a lot of cruft then it might be fun exercise to write such removal recipe.
[2013-02-20 18:06:49 -0500] matti: smdahlen: I recommend you package everything nicely -- it does help when you need to remove / rollback.
[2013-02-20 18:07:13 -0500] smdahlen: ok, thanks for the advice.
[2013-02-20 18:08:10 -0500] matti: smdahlen: That having said -- Chef does not have concept of "purging" of resources that are not managed like Puppet.
[2013-02-20 18:08:18 -0500] matti: [ Unless it does, and I don't know about it ]
[2013-02-20 18:08:55 -0500] fly9: when I use the git resource I get the deploy branch and whatever reference I requested, but a git fetch won't pull remote branches. Can I configure the resource to allow me to fetch properly?
[2013-02-20 18:09:03 -0500] smdahlen: matti: I haven't come across anything in chef like puppet's management of purging.
[2013-02-20 18:09:16 -0500] matti: Yep.
[2013-02-20 18:10:23 -0500] solarce: matti: smdahlen: remote_directory has a purge option, but that's all I've seen
[2013-02-20 18:11:16 -0500] matti: Oh, good to know.
[2013-02-20 18:11:20 -0500] matti: Thanks :)
[2013-02-20 18:17:35 -0500] lazyPower-Work: I'm having some issues getting my workstation bootstrapped with chef and homebrew for configuration management. Could someone direct me how to run chef-client on a workstation and have that interface with brew as a non-root user? i see nothing in the README
[2013-02-20 18:18:27 -0500] lazyPower-Work: https://github.com/opscode-cookbooks/homebrew -- when using that cookbook, any package i attempt to install refuses to run since brew will cowardly refuse to sudo brew install.
[2013-02-20 18:19:02 -0500] c_t: take a look at the pivotal-workstation stuff on github
[2013-02-20 18:19:07 -0500] c_t: lemme find the URL real quick
[2013-02-20 18:19:24 -0500] c_t: https://github.com/pivotal/pivotal_workstation
[2013-02-20 18:19:38 -0500] c_t: that uses brew, and uses brew to install as non-root
[2013-02-20 18:19:42 -0500] lazyPower-Work: :O
[2013-02-20 18:19:55 -0500] lazyPower-Work: studying - thank you.
[2013-02-20 18:20:38 -0500] smdahlen: lazyPower-Work: working on a similar setup now... I run chef-solo as myself after bootstrapping my mac with chef/rbenv
[2013-02-20 18:21:05 -0500] smdahlen: about to commit shortly.. i'll share the url.
[2013-02-20 18:24:40 -0500] smdahlen: lazyPower-Work: check out https://github.com/smdahlen/mac-bootstrap -- it uses berkshelf for cookbook dependency management
[2013-02-20 18:27:13 -0500] smdahlen: haven't fully decided whether I will bootstrap homebrew in the bash script or leave that in my workstation-cookbook
[2013-02-20 18:27:19 -0500] lazyPower-Work: Thats outside of my experience level, i'm just getting started on workstation management. Using private-chef-server and some cookbooks i whipped up that rely on apt, are working pretty well.
[2013-02-20 18:27:51 -0500] lazyPower-Work: i'm bootstrapping with a bash script to pull the xcode CLI tools, and chef-gem. Then drop in homebrew as the user and execute chef-client... but this seems to be a bad idea since it hijacks root
[2013-02-20 18:27:55 -0500] lazyPower-Work: *runs as root
[2013-02-20 18:30:02 -0500] mhalligan: Is anyone using the monitor meta cookbook for managing Sensu?
[2013-02-20 18:30:45 -0500] mhalligan: I've been struggling with getting any of the sensu cookbooks to work
[2013-02-20 18:31:07 -0500] mhalligan: mainly due to a lack of documentation/understanding of order dependency.
[2013-02-20 18:31:45 -0500] smdahlen: lazyPower-Work: another option is to use this homebrew cookbook: https://github.com/Govan/homebrew/ -- it allows you to configure a run_as attribute for homebrew
[2013-02-20 18:31:57 -0500] mhalligan: I keep running into dependencies that aren't described anywhere.. like monitor::master is expecting to be able to find :sensu_checks databags or objects, but without any examples.. frustrating because I would expect monitor::master to just setup a sensu server that does nothing
[2013-02-20 18:32:10 -0500] mhalligan: and then to add configurations as I go along
[2013-02-20 18:32:43 -0500] mhalligan: so I'm trying to figure out what others are using, whether they're calling the sensu cookbooks directly, using the monitoring meta-recipe, or giving up and just writing their own cookbooks
[2013-02-20 18:33:21 -0500] lazyPower-Work: smdahlen: this looks like its right up the alley of what i'm trying to do. Thanks for the reference!
[2013-02-20 18:38:20 -0500] lazyPower-Work: smdahlen: correct me if i'm wrong, i just need to set this as an attribute in the runlist correct?  node["homebrew"]["run_as"] = "leftbrained"
[2013-02-20 18:38:41 -0500] smdahlen: that's correct.
[2013-02-20 18:38:43 -0500] lazyPower-Work: { "homebrew" : { "run_as" : "leftbrained" } }
[2013-02-20 18:39:08 -0500] lazyPower-Work: really confuses me how much we swap between ruby and json -- syntax sugar n'at
[2013-02-20 18:39:44 -0500] kyleb: mhalligan: i would recommend you jump over to #sensu and ask i know portertech and others are normally around to help
[2013-02-20 18:40:36 -0500] portertech: mhalligan: please head over to #sensu, all will be explained :)
[2013-02-20 18:40:51 -0500] mhalligan: portertech: done, thanks
[2013-02-20 18:46:39 -0500] doomviking: oh hey charity
[2013-02-20 18:47:04 -0500] directhex: hmph
[2013-02-20 18:48:00 -0500] directhex: i have a node behind NAT which runs to completion if i have the -W flag, and times out without it. it gets to the point  "DEBUG: Sending HTTP Request via PUT to chefserverhostname:443/nodes/nodehostname" which with -W is a no-op, and without -W hangs for 15 minutes before throwing a timeout error
[2013-02-20 18:51:45 -0500] directhex: and i know in the general case that i can PUT fine to that host - if i use knife as nodehostname, then i can edit nodehostname and it works there
[2013-02-20 18:57:50 -0500] beandip: Anyone using the tomcat cookbook?
[2013-02-20 18:58:02 -0500] beandip: How do I enable SSL with the opscode tomcat cookbook?
[2013-02-20 19:02:25 -0500] kyleb: is there a way to create/update a databag from within a recipe?
[2013-02-20 19:03:33 -0500] tesmar: hi all, I am new to chef. When I want to create a repo for my chef cookbooks and I want to get a cookbook from github, should I use cookbook site install? I tried that but it doesn't create a git submodule. What if I want to get the latest from their master later?
[2013-02-20 19:04:43 -0500] lazyPower-Work: tesmar: look into knife-cookbook
[2013-02-20 19:04:54 -0500] lazyPower-Work: knife-github rather
[2013-02-20 19:04:55 -0500] tesmar: ok
[2013-02-20 19:04:57 -0500] lazyPower-Work: wow i need to go to bed
[2013-02-20 19:05:00 -0500] tesmar: knife-github?
[2013-02-20 19:05:03 -0500] richleland: tesmar I highly recommend librarian
[2013-02-20 19:05:04 -0500] lazyPower-Work: yep
[2013-02-20 19:05:09 -0500] tesmar: ok will do
[2013-02-20 19:05:16 -0500] tesmar: richleland: ok I'll look into it
[2013-02-20 19:05:22 -0500] geekbri: For reasons unknown sometimes the community site doesn't like my readme.md.  Other times it displays without an error at all.  Not sure what the issue is
[2013-02-20 19:05:48 -0500] richleland: tesmar https://github.com/applicationsonline/librarian
[2013-02-20 19:05:56 -0500] chip-: tesmar: Berkshelf too
[2013-02-20 19:06:03 -0500] chip-: tesmar: Although it doesn't support Chef 11 yet
[2013-02-20 19:06:29 -0500] tesmar: chef 11?
[2013-02-20 19:06:36 -0500] tesmar: I'm new so I don't know too much about that
[2013-02-20 19:06:52 -0500] chip-: tesmar: Are you familiar with Bundler?
[2013-02-20 19:07:03 -0500] tesmar: chip-:  yes
[2013-02-20 19:07:14 -0500] tesmar: what I mean is that I don't know about chef 11 vs others
[2013-02-20 19:07:19 -0500] chip-: tesmar: Berkshelf is bundler for Chef. Exactly that.
[2013-02-20 19:07:23 -0500] chip-: berkshelf.com
[2013-02-20 19:08:38 -0500] smdahlen: i second the recco for berkshelf
[2013-02-20 19:08:43 -0500] chip-: tesmar: This blog posts talks about some good patterns: http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/
[2013-02-20 19:09:13 -0500] chip-: tesmar: Anyway, the only downside to Berkshelf is that the currently-shipping version of Chef is 11.4.0, and Berkshelf is still tied to 10.16.2 for now.
[2013-02-20 19:09:45 -0500] qhartman: There's also 10.24.0, would berkshelf work with that?
[2013-02-20 19:09:54 -0500] tesmar: what are the differences between librarian and berkshelf?
[2013-02-20 19:09:55 -0500] richleland: curious - haven't used berkshelf before - what's the advantage over librarian?
[2013-02-20 19:11:53 -0500] miah: does more things
[2013-02-20 19:12:01 -0500] miah: more bundler likeish
[2013-02-20 19:12:05 -0500] miah: has shiny wheels
[2013-02-20 19:12:32 -0500] justincampbell: rims*
[2013-02-20 19:12:55 -0500] jtimberman: berkshelf has a pinned version requirement iirc
[2013-02-20 19:13:44 -0500] mting923: Hi all, I bet I am the first one that is trying to use Chef to install SQL Server... but I am kind of surprise that I can't find much help on the web and here..
[2013-02-20 19:13:54 -0500] mting923: do u guys have any suggestion that I can get more help on this?
[2013-02-20 19:16:11 -0500] tesmar: jtimberman: will try it out
[2013-02-20 19:16:15 -0500] tesmar: thanks for the tip
[2013-02-20 19:16:45 -0500] lazyPower-Work: mting923: In this case, I'd probably use one of the Sequel Server setup manifests and run that via system exec. -- mind you this may not be the proper way to accomplish what you're trying to do with chef - but it makes sense in my head
[2013-02-20 19:17:51 -0500] mattupstate: is there a way to bootstrap an ec2 instance with knife after it has booted up? knife ec2 server create started a server but it failed to find the instance ID because AWS's system didn't have it registered quick enough
[2013-02-20 19:18:05 -0500] juliancdunn: mattupstate: you can just "knife bootstrap" from that point on
[2013-02-20 19:18:55 -0500] mattupstate: ah
[2013-02-20 19:18:56 -0500] mattupstate: duh
[2013-02-20 19:18:57 -0500] mattupstate: sorry
[2013-02-20 19:20:34 -0500] miah: jtimberman: you can pin versions in berkshelf, but you don't have to. you can track 'master'
[2013-02-20 19:21:04 -0500] miah: people should be pinning versions in environments though
[2013-02-20 19:23:31 -0500] lazyPower-Work: smdahlen: am i missing something? Its got to be something simple i'm missing:   https://gist.github.com/chuckbutler/5bd344f50e12adffc252
[2013-02-20 19:23:43 -0500] lazyPower-Work: if you have a moment, ofcourse.
[2013-02-20 19:25:45 -0500] juliancdunn: anyone know if Opscode is taking over the "jenkins" cookbook from heavywater? I thought I heard a rumor to that effect
[2013-02-20 19:32:01 -0500] schisamo: juliancdunn: yes we are https://github.com/opscode-cookbooks/jenkins
[2013-02-20 19:32:04 -0500] smdahlen: lazyPower-Work: to be honest, looks ok to me -- I backed away from that approach so didn't dig further.
[2013-02-20 19:32:08 -0500] schisamo: preparing a 1.0 release
[2013-02-20 19:32:25 -0500] schisamo: juliancdunn: I want to add chefspec and test kitchen coverage before we release 1.0.0
[2013-02-20 19:32:28 -0500] smdahlen: lazyPower-Work: did the install of homebrew go ok? looks like it.
[2013-02-20 19:32:50 -0500] mting923: lazyPower-Work: thanks.. this is kind of what I trying to do but I found it needs too much time on doing that was thinking if there any other shortcut...
[2013-02-20 19:33:23 -0500] mting923: still surprise how hot is chef but no one provide enough resource on the www
[2013-02-20 19:33:27 -0500] juliancdunn: schisamo: cool, thanks!
[2013-02-20 19:36:04 -0500] greenhat: Just installed chef with gem install chef and tried to run my cookbooks with chef-solo and got "Cookbook chef_gem" not found. I've never seen that error before.
[2013-02-20 19:36:35 -0500] lazyPower-Work: smdahlen:  you know what -- it was a cached cookbook
[2013-02-20 19:36:45 -0500] lazyPower-Work: just got it to complete correct. paydirt.
[2013-02-20 19:38:23 -0500] schisamo: juliancdunn: full details about the move here https://github.com/heavywater/chef-jenkins/issues/23
[2013-02-20 19:38:46 -0500] smdahlen: lazyPower-Work: very nice. what was the issue?
[2013-02-20 19:39:52 -0500] lazyPower-Work: smdahlen: the copy of homebrew from opscode is a few versions ahead of the cookbook you linked
[2013-02-20 19:41:00 -0500] redsamh: hmmm no luck so far on this, anyone know how to make this work - I am trying to do $ knife client edit -d SRVRMACHINE < /tmp/SRVRMACHINE-Admin.json and I get "Object unchanged, not saving"  and the verbose output: http://pastebin.com/CNyj0Biw
[2013-02-20 19:41:07 -0500] juliancdunn: schisamo: that's great, thanks. suggestion for the node recipes: search based on Chef role rather than by fqdn
[2013-02-20 19:45:45 -0500] geekbri: anybody here one with the force on chef-solo-search?  Brief glance at the source indicates it doesn't support using "roles" in a node search.  Can anybody confirm?
[2013-02-20 19:48:42 -0500] juliancdunn: redsamh: this might not be related, but are you trying to edit a client versus a node object?
[2013-02-20 19:49:02 -0500] lazyPower-Work: *the homebrew cookbook
[2013-02-20 19:49:12 -0500] KB: KJB
[2013-02-20 19:49:26 -0500] redsamh: I am trying to edit a client
[2013-02-20 19:49:26 -0500] mhalligan: miah: Any tips for speeding up berks install?
[2013-02-20 19:49:38 -0500] redsamh: juliacdunn: I am trying to edit a client
[2013-02-20 19:50:31 -0500] KB: HI folks, I have a new chef 11 install, client is working file I can knife my around most things just fine. I am having trouble with the upload cookbook portion. Essentially getting a "Network error".
[2013-02-20 19:50:38 -0500] KB: Actual error is "knife cookbook upload ohai Uploading ohai         [1.1.8] /opt/chef/embedded/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError)"
[2013-02-20 19:51:32 -0500] redsamh: juliacdunn: I have seen mentions of the confusion with the node but when I do a knife client list I see the client listed
[2013-02-20 19:51:39 -0500] KB: things like knife "knife client list: admin-workstation chef-validator chef-webui" work just fine
[2013-02-20 19:51:49 -0500] juliancdunn: redsamh: ah ok... I don't know off the top of my head what's wrong then
[2013-02-20 19:53:02 -0500] redsamh: KB: is this with reference to my issue? I am able to do a show and see the admin: false. I want to change that to true
[2013-02-20 19:53:13 -0500] redsamh: julancdunn: thanks for trying :)
[2013-02-20 20:00:16 -0500] ypaq: hey, i have a question around the "generic + wrapper" cookbook pattern.
[2013-02-20 20:01:06 -0500] yfeldblum: ypaq, ask away
[2013-02-20 20:01:14 -0500] ypaq: on it.. ;)
[2013-02-20 20:02:08 -0500] ypaq: my situation is the following: i have git repo with cookbooks folder for generic cookbooks and site-cookbooks folder for my stuff. most of the generic cookbooks come from github somehow and were copied into the my repo.
[2013-02-20 20:02:48 -0500] ypaq: which sucks because i lack the most recent versions of the github cookbooks
[2013-02-20 20:02:50 -0500] btm: @opscode Chef Code Review: join: http://bit.ly/Zs4emc no watch link, apparently youtube is in maintenance mode. #opschef
[2013-02-20 20:03:16 -0500] greenhat: Works now. I had to download and include the chef_gem cookbook with my other cookbooks for chef 11.4.0 to work. Is that new?
[2013-02-20 20:03:43 -0500] ypaq: is there a way to define the github repositories and pull the most recent versions automatically?
[2013-02-20 20:04:10 -0500] ypaq: like a maven or rebar approach?
[2013-02-20 20:04:51 -0500] ypaq: just read this (i know it's puppet but the ideas apply for chef as well) http://somethingsinistral.net/blog/git-submodules-are-probably-not-the-answer/
[2013-02-20 20:05:15 -0500] yfeldblum: ypaq, i wrote librarian-chef for such cases, and the folks at riotgames wrote berkshelf
[2013-02-20 20:05:18 -0500] ypaq: he talks about git submodules
[2013-02-20 20:05:26 -0500] ypaq: ahah
[2013-02-20 20:05:36 -0500] yfeldblum: ypaq, librarian-chef is here: https://github.com/applicationsonline/librarian
[2013-02-20 20:05:38 -0500] geekbri: librarian or berkshelf are a much better solution that submodules.
[2013-02-20 20:05:53 -0500] ypaq: ok.. which one's better ;)
[2013-02-20 20:06:00 -0500] yfeldblum: ypaq, i like mine better
[2013-02-20 20:06:03 -0500] yfeldblum: ypaq, does that help?
[2013-02-20 20:06:05 -0500] ypaq: of course :)
[2013-02-20 20:06:26 -0500] yfeldblum: ypaq, but i'd recommend giving each one a test drive
[2013-02-20 20:07:16 -0500] ypaq: thanks
[2013-02-20 20:11:48 -0500] mrflip: so I'm getting the "Cloning resource attributes for foo from prior resource (CHEF-3694)" warning.
[2013-02-20 20:12:28 -0500] mrflip: which is caused by places where I define a resource foo and then later try to say something else interesting about it
[2013-02-20 20:12:44 -0500] mrflip: my question is, in the cases where I WANT to do that,
[2013-02-20 20:13:18 -0500] mrflip: how do I retrieve a resource once I've defined it?
[2013-02-20 20:13:33 -0500] miah: use the resource_collection
[2013-02-20 20:14:16 -0500] mrflip: is that a "front door" -- or am I rooting around inside a semi-private thing
[2013-02-20 20:14:34 -0500] mrflip: ie. is this going to make a cookbook look much hairier,
[2013-02-20 20:18:07 -0500] miah: depends on if you write cookbooks that live in /recipes or /libraries =)
[2013-02-20 20:18:29 -0500] yfeldblum: mrflip, resource("file[/path/to/example/file]").instance_exec do ... mode "0600" ... end
[2013-02-20 20:18:58 -0500] yfeldblum: mrflip, r = resource("file[/path/to/example/file]") ; r.mode "0600"
[2013-02-20 20:19:07 -0500] mrflip: ok that's not too offensive
[2013-02-20 20:19:31 -0500] yfeldblum: mrflip, hmmm the method is either #resource or #resources; don't recall which
[2013-02-20 20:19:44 -0500] mrflip: I'll have to do something to mask if the thing doesn't exist yet
[2013-02-20 20:20:53 -0500] jtimberman: miah: i meant that berkshelf has a pinned version of chef
[2013-02-20 20:21:30 -0500] mrflip: if you'd like a use case: we have a users cookbook that lets you a) define groups to make, and b) create users, putting them in the right groups. I don't want to demand that you always add the second to the first. So it refers to say 'group("databases")' in the groups part, and then later says things about that when we make a daemon in the databases group
[2013-02-20 20:21:44 -0500] qhartman: I have a similar question about all those CHEF-3694 errors. There are some cases in my code where that it pointing out something that we legitimately shouldn't be doing, but I'm sure there are some where it's benign, and fixing it will likely be costly. Is there a way to suppress those?
[2013-02-20 20:21:57 -0500] miah: jtimberman: oh
[2013-02-20 20:22:56 -0500] allaire: jtimberman: Sorry, just sent you a tweet, forgot about the IRC channel support, duh -_-
[2013-02-20 20:23:55 -0500] allaire: Anybody has issues with the Database cookbook and chef solo? I get this error: https://gist.github.com/allaire/475260210b170986e20f
[2013-02-20 20:24:05 -0500] jtimberman: allaire: :-)
[2013-02-20 20:24:42 -0500] allaire: Database cookbook call postgresql::ruby, but ruby isn't installed on the machine yet...
[2013-02-20 20:24:43 -0500] geekbri: qhartman: I'm basically in the same situation.  99% of my warnings are where its benign
[2013-02-20 20:24:48 -0500] jtimberman: allaire: doesn't look like build-essential package was installed
[2013-02-20 20:25:02 -0500] geekbri: qhartman: I suppose I could go through and change everything to retrieve the resource from the resource collection and call the methods on it.
[2013-02-20 20:25:08 -0500] geekbri: instead of using the DSL.  That's just gonna be a huge pain :)
[2013-02-20 20:25:29 -0500] yfeldblum: mrflip, if  r = resource("file[/path/to/example/file]") rescue nil ; r.mode "0600" ; end
[2013-02-20 20:25:31 -0500] qhartman: geekbri, yeah, that's my assessment as well.
[2013-02-20 20:25:47 -0500] allaire: jtimberman: it is in my /cookbooks, not in my run list, should I add it?
[2013-02-20 20:26:21 -0500] allaire: I'm using Chef solo using knife solo
[2013-02-20 20:26:37 -0500] mrflip: @geekbri @qhartman go comment saying so on http://tickets.opscode.com/browse/CHEF-3694
[2013-02-20 20:26:53 -0500] jtimberman: allaire: it should get included via postgresql::ruby
[2013-02-20 20:26:58 -0500] qhartman: mrflip, good idea
[2013-02-20 20:28:12 -0500] allaire: jtimberman: That's what I thought, trying with it in my run_list just to see...
[2013-02-20 20:33:18 -0500] allaire: jtimberman: No dice, same error :(
[2013-02-20 20:33:42 -0500] allaire: I'm really out of ideas
[2013-02-20 20:34:20 -0500] serge_: Is there any way to manage the cookbook version a node uses via the opscode console?
[2013-02-20 20:35:01 -0500] timsmith: you can pin the cookbooks used by environment
[2013-02-20 20:35:09 -0500] timsmith: and then stick systems in an environment
[2013-02-20 20:35:18 -0500] timsmith: so you can have dev using bleeding edge and production using stable
[2013-02-20 20:35:20 -0500] joel: Error executing action `create` on resource 'mysql_database - Am I missing a lib?
[2013-02-20 20:35:47 -0500] allaire: jtimberman: I'M using omnibus
[2013-02-20 20:35:59 -0500] allaire: and I see # Still here, must be omnibus. Lets make this thing install!
[2013-02-20 20:36:46 -0500] serge_: @timsmith, thanks!
[2013-02-20 20:36:51 -0500] allaire: Make is not installed on my vps
[2013-02-20 20:37:28 -0500] jtimberman: allaire: what platform are you using?
[2013-02-20 20:37:58 -0500] lazyPower-Work: should i ignore the packages on the OPSCODE community site in leu of packages in github or is that just crazy talk?
[2013-02-20 20:38:04 -0500] allaire: @jtimberman Welcome to Ubuntu 12.10 (GNU/Linux 3.5.0-17-generic i686)
[2013-02-20 20:38:25 -0500] lazyPower-Work: allaire: you'll need the build-essential package(s)
[2013-02-20 20:38:36 -0500] lazyPower-Work: package "build-essential" do   action :install end
[2013-02-20 20:39:16 -0500] allaire: lazyPower-Work: Where should I add it?
[2013-02-20 20:39:23 -0500] allaire: I get the error when packages are precompiling
[2013-02-20 20:39:30 -0500] allaire: cookbooks*
[2013-02-20 20:39:34 -0500] lazyPower-Work: I stuck it in a recipe all on its own. its listed directly after my apt recipe.
[2013-02-20 20:41:14 -0500] allaire: lazyPower-Work: ok let me try that
[2013-02-20 20:41:29 -0500] allaire: I'll add it up my my personal "system" recipe
[2013-02-20 20:44:16 -0500] allaire: lazyPower-Work: I'm out of luck, I get the error before it can't even get to my personal recipe
[2013-02-20 20:44:25 -0500] allaire: it can*
[2013-02-20 20:44:30 -0500] lazyPower-Work: right, so list it higher up in your run_list
[2013-02-20 20:44:35 -0500] jtimberman: allaire: what version of build-essential cookbook do you have?
[2013-02-20 20:44:52 -0500] allaire: lazyPower-Work: It's already on top
[2013-02-20 20:44:56 -0500] allaire: right after apt
[2013-02-20 20:44:56 -0500] lazyPower-Work: o....
[2013-02-20 20:45:01 -0500] lazyPower-Work: bizarre
[2013-02-20 20:45:14 -0500] allaire: @jtimberman: ## v1.3.4:
[2013-02-20 20:45:19 -0500] jtimberman: chef_gem installs the gem during the compile phase because presumably if you want to install it under chef's ruby environment you want to use it in the same chef run.
[2013-02-20 20:45:47 -0500] KarlHungus: hrm. maybe someone can save me some googling. how can i get the cookbook name from inside a recipe?
[2013-02-20 20:45:50 -0500] jtimberman: so the build-essential package has to be installed at compile time
[2013-02-20 20:45:58 -0500] jtimberman: KarlHungus: cookbook_name
[2013-02-20 20:46:06 -0500] jtimberman: KarlHungus: its a method in the Chef Recipe DSL.
[2013-02-20 20:46:34 -0500] jtimberman: http://docs.opscode.com/chef/dsl_recipe.html
[2013-02-20 20:46:41 -0500] siris: quick question: what would be the best way so search for nodes on a Chef Server that have empty run lists?
[2013-02-20 20:46:51 -0500] jtimberman: DOH, the dsl page doesn't have that method documented.
[2013-02-20 20:47:07 -0500] KarlHungus: jtimberman: fascinating. i can't believe i've not run into this before
[2013-02-20 20:47:11 -0500] KarlHungus: ty!
[2013-02-20 20:47:22 -0500] jtimberman: KarlHungus: there's also recipe_name
[2013-02-20 20:48:10 -0500] allaire: @jtimberman: So I won't be able to put the aptitude install build-essential in chef?
[2013-02-20 20:50:24 -0500] redsamh: i have tried all things but still no luck, any nice folks out here know the answer. to fix the "Object unchanged, not saving" error. I dont get any errors and I am not sure how to make it work while editing a client using "knife client edit -d"
[2013-02-20 20:50:24 -0500] redsamh: Here is what I see when I do a verbose output: http://pastebin.com/CNyj0Biw
[2013-02-20 20:50:44 -0500] allaire: Ok worked #1 when I manually did aptitude install build-essential before running chef
[2013-02-20 20:50:50 -0500] redsamh: sorry having to repeat but I am all out of luck and the only way that I have is to go in and manually change it on the webui
[2013-02-20 20:50:57 -0500] redsamh: it defeats the purpose :(
[2013-02-20 20:57:07 -0500] allaire: jtimberman: If you have an idea on how I could include the installation of build-essential in chef for the compile phase, I'm all ears :)
[2013-02-20 20:59:13 -0500] joel: Error executing action `create` on resource 'mysql_database - I get this when trying to create a database using the database cookbook, thoughts?
[2013-02-20 21:02:06 -0500] btm: @opscode Cookbook Code Review: join http://bit.ly/XpOSsi (youtube is still broken, no way to watch) #opschef
[2013-02-20 21:05:30 -0500] Virunga: The default chef-server-webui is in rails or merb now?
[2013-02-20 21:06:27 -0500] lazyPower-Work: still shows a merb 500 error page (if you're running open-chef) so i'm going to say merb
[2013-02-20 21:06:59 -0500] mhalligan: hrm, is anyone using miah's graphite cookbook? I'm not having any luck setting the admin password
[2013-02-20 21:07:00 -0500] Virunga: Good, thank you lazyPower-Work
[2013-02-20 21:10:37 -0500] miah: hi
[2013-02-20 21:11:00 -0500] miah: its sha1
[2013-02-20 21:12:22 -0500] mhalligan: I understand that
[2013-02-20 21:12:43 -0500] mhalligan: I've finally figured out how to generate one, but that doesn't seem to do anything on re-running chef-client
[2013-02-20 21:13:06 -0500] mhalligan: I wonder if I just use manage.py to change the password if running chef-client will undo that?
[2013-02-20 21:13:34 -0500] miah: mhalligan: https://docs.djangoproject.com/en/dev/topics/auth/passwords/
[2013-02-20 21:14:29 -0500] mhalligan: I'm not trying to be a jerk, I've just lost an hour on this and I shouldn't have to write code to generate a password. really.
[2013-02-20 21:14:35 -0500] tomdzk: hey all, what do people use to create/edit encrypted data bags without involving the chef server ?
[2013-02-20 21:15:42 -0500] kallistec: redsamh: what change are you trying to make?
[2013-02-20 21:15:44 -0500] kallistec: if you'
[2013-02-20 21:15:50 -0500] miah: https://groups.google.com/forum/?fromgroups=#!topic/django-users/JDgCh8Khd3M
[2013-02-20 21:15:52 -0500] miah: has more details
[2013-02-20 21:16:00 -0500] miah: mhalligan: you do really though
[2013-02-20 21:16:07 -0500] kallistec: ...if you're adding fields that aren't part of an object's json format, they're ignored
[2013-02-20 21:16:10 -0500] gkarekinian: Omnibus' Ruby (from at least Chef 11.4.0 and 10.24.0) doesn't know where the CA file is (so you can't easily use net/https), does someone know if it's a known issue?
[2013-02-20 21:16:32 -0500] miah: gkarekinian: tickets.opscode.com
[2013-02-20 21:16:42 -0500] mhalligan: tried that, that code seems to not actually work
[2013-02-20 21:17:15 -0500] gkarekinian: Yeah, searching for stuff like https and ssl can be a hassle though, that's why I asked here before :)
[2013-02-20 21:17:28 -0500] mhalligan: hrm ok. I guess I have to ctrl-c out of that after I paste.
[2013-02-20 21:17:36 -0500] redsamh: kallistec: as soon as I have completed bootstrap I need that node to be an admin so any recipes that i execute on that node containing databag manipulations can work. right now they all have the 403
[2013-02-20 21:18:07 -0500] gkarekinian: Found it, http://tickets.opscode.com/browse/CHEF-2840
[2013-02-20 21:18:08 -0500] mhalligan: I'm setting [:graphite][:db][:admin_password] in my graphite server role, and going so far as rm -rf /opt/graphite && chef-client
[2013-02-20 21:18:21 -0500] mhalligan: when I run manage.py dumpdata there's nothing referring to the password anymore
[2013-02-20 21:18:24 -0500] redsamh: kallistec: there is no way on bootstrap that I can pass any information to make admin true
[2013-02-20 21:19:13 -0500] kallistec: redsamh: the validator is restricted from creating admin clients, because then it would effectively be an admin
[2013-02-20 21:20:26 -0500] redsamh: kallistec - yes bootstrap into an admin may not be a possibility but I was hoping atleast I could use a backend task to run " knife client edit -d SRVRMACHINE < /tmp/SRVRMACHINE-Admin.json" and set admin to true
[2013-02-20 21:20:39 -0500] miah: i'll write a password generator for it and embedd it in the cookbook. just haven't had a round to it :P
[2013-02-20 21:20:52 -0500] mhalligan: ok, it looks like I can just run manage.py createsuperuser manually and it doesn't get stomped on when I run chef-client. good enough for me. I'll dig into getting this working via chef next week I guess.
[2013-02-20 21:20:53 -0500] redsamh: kallistec - periodically for some clients with specific roles to be admins
[2013-02-20 21:22:37 -0500] kallistec: redsamh: probably knife exec is your best bet
[2013-02-20 21:23:26 -0500] redsamh: kallistec: how would I change the client to be an admin? Can I pass it the same json or something I am not thinking and you know
[2013-02-20 21:23:26 -0500] kallistec: the -d flag disables editing entirely, it doesn't switch editing to use stdin
[2013-02-20 21:24:50 -0500] redsamh: hmmm.. looking passing a script with a databage containing the contents of the client json?
[2013-02-20 21:25:05 -0500] kallistec: redsamh: knife exec -E 'clients.transform("role:foo") {|c| c.admin(true) }'
[2013-02-20 21:25:41 -0500] kallistec: redsamh: if you run chef-shell and then `help :clients` it documents the API helpers
[2013-02-20 21:25:52 -0500] kallistec: which are available to knife exec
[2013-02-20 21:26:11 -0500] kallistec: there's an example which is almost exactly what you're asking for
[2013-02-20 21:26:31 -0500] yfeldblum: miah, `openssl rand -hex 16` <--- wrote your password generator for you
[2013-02-20 21:26:51 -0500] yfeldblum: miah, or SecureRandom.hex(16)
[2013-02-20 21:27:01 -0500] yfeldblum: :D
[2013-02-20 21:27:29 -0500] redsamh: tell me :-p~~
[2013-02-20 21:28:35 -0500] redsamh: kallistec - yay got it
[2013-02-20 21:29:25 -0500] redsamh: redsamh - looks like I was very focussed in the wrong place, this is great
[2013-02-20 21:30:12 -0500] redsamh: kallistec - looks like I was very focussed in the wrong place, this is great. Thanks very much, let me take a break now and if I could buy you a beer I would. You never know ;)
[2013-02-20 21:30:13 -0500] AckZ: hey all I've been using the apache2 cookbook, but the line within template "apache2.conf" that sets the path uses node['platform_family'] seems to be returning nil for some reason on ubuntu 10.04 any ideas what would be happening there?
[2013-02-20 21:32:42 -0500] ZBP: Hi there.  Does anyone have any idea how to get chef-server running on ubuntu 12.10?
[2013-02-20 21:32:55 -0500] kallistec: redsamh: np. FWIW, I think it would be worthwhile to improve knife commands to work better with pipes and shell redirects, but we're pretty busy at opscode so that's probably something someone would have to contribute as a patch
[2013-02-20 21:33:08 -0500] ZBP: not supported
[2013-02-20 21:33:08 -0500] ZBP: ?
[2013-02-20 21:33:54 -0500] miah: yfeldblum: not quite what i need :P
[2013-02-20 21:34:03 -0500] chip-: ZBP: Exactly like this, only substitute in Ubuntu 12.10 where necessary. http://jtimberman.housepub.org/blog/2013/02/10/install-chef-11-server-on-centos-6/
[2013-02-20 21:35:05 -0500] chip-: Make sure hostname -f returns a valid fqdn before you start.
[2013-02-20 21:37:44 -0500] redsamh: kallistec: yes I am hoping to have a cookbook to backup chef and will probably send that in for review when done
[2013-02-20 21:37:57 -0500] redsamh: kallistec - thanks again ;) and ttyl
[2013-02-20 21:42:51 -0500] balgarath: anyone know how to fix this?
[2013-02-20 21:42:52 -0500] balgarath: $ echo $EDITOR
[2013-02-20 21:42:52 -0500] balgarath: pico
[2013-02-20 21:42:52 -0500] balgarath: $ knife data bag create --secret-file config/data_bag_key  config production
[2013-02-20 21:42:53 -0500] balgarath: ERROR: RuntimeError: Please set EDITOR environment variable
[2013-02-20 21:43:26 -0500] balgarath: besides the fact im using pico instead of vim? lol I have to type EDITOR=pico in front of every edit command
[2013-02-20 21:45:40 -0500] BenP_: Does it work if you use vim instead of pico?
[2013-02-20 21:45:55 -0500] doomviking: ew
[2013-02-20 21:46:20 -0500] BenP_: (troubleshooting step, not an "eff you, pico")
[2013-02-20 21:46:49 -0500] balgarath: no, doesn't work when I change it to vim
[2013-02-20 21:47:40 -0500] tomdzk: balgarath: how did you set EDITOR ?
[2013-02-20 21:48:27 -0500] balgarath: EDITOR=pico at the bottom of .bashrc - I just changed it to vim via command line
[2013-02-20 21:48:44 -0500] tomdzk: balgarath: add an 'export ' in front of that
[2013-02-20 21:49:13 -0500] miah: is pico even included these days or is it just a symlink to nano?
[2013-02-20 21:49:46 -0500] balgarath: symlink.
[2013-02-20 21:49:48 -0500] doomviking: I think its the latter
[2013-02-20 21:50:01 -0500] tomdzk: balgarath: and then re-source the .bashrc file
[2013-02-20 21:50:05 -0500] balgarath: most people I know that use it type namo
[2013-02-20 21:50:35 -0500] balgarath: @tomdzk that did it, thanks!
[2013-02-20 21:50:43 -0500] doomviking: how much do I miss the vi vs emacs wars...not much.
[2013-02-20 21:52:00 -0500] miah: doomviking: bike shedding is fun for the whole family
[2013-02-20 21:52:43 -0500] tomdzk: yak shedding, the sport of the future
[2013-02-20 21:52:59 -0500] miah: oh i cant wait!
[2013-02-20 21:55:42 -0500] doomviking: miah: ah. Parkinson's law of triviality.
[2013-02-20 21:56:50 -0500] doomviking: vi won, anyway
[2013-02-20 21:58:33 -0500] miah: vi faught the war and the.. war won.
[2013-02-20 21:59:01 -0500] balgarath: lol
[2013-02-20 21:59:11 -0500] doomviking: heh
[2013-02-20 22:06:42 -0500] BenP_: Is anyone else having problems installing knife-windows from the v11 omnibus gem command? It keeps spitting out a long list of dependencies when I try to install it (and I'm not overriding the default to resolve dependencies)
[2013-02-20 22:11:01 -0500] Toger: when doing a knife ec2 server create, if there is any problem during the bootstrap process (such as a failed external dependency), node data never gets reported back to the chef server. This makes it difficult to recover since data like the instance id and FQDN haven't been populated yet. Is  there any way to have this data sent once before the runlist is executed?
[2013-02-20 22:11:48 -0500] Toger: along the lines of having the client-registration step also do a basic node-data upload?
[2013-02-20 22:13:53 -0500] miah: make sure your chef cookbooks/roles/environments work before rolling out servers
[2013-02-20 22:16:41 -0500] log1kal: Anyone have some good resources for writing tests for cookbooks?
[2013-02-20 22:17:15 -0500] log1kal: I was mucking with the tomcat cookbook last night, and realized test-kitchen was something I needed for my org cookbooks.
[2013-02-20 22:18:28 -0500] jtimberman: log1kal: not a *lot* yet, we'll have more to say about test kitchen coming soon along with the "1.0" release that we're working on.
[2013-02-20 22:18:35 -0500] log1kal: Perfect.
[2013-02-20 22:18:54 -0500] log1kal: I'll get to grokking what tests there are so far, then
[2013-02-20 22:18:57 -0500] jtimberman: log1kal: There's some blog posts floating around about it.
[2013-02-20 22:19:14 -0500] miah: log1kal: go look at fnichols github and look through his cookbooks
[2013-02-20 22:19:18 -0500] jtimberman: log1kal: If you want to see a well tested cookbook, 1.0+ of Opscode's runit cookbook is comprehensive
[2013-02-20 22:19:20 -0500] miah: he has jamie / test-kitchen set up on most of them
[2013-02-20 22:19:22 -0500] log1kal: Some jerk called "America's Test Kitchen" keeps muddying my google results.
[2013-02-20 22:19:27 -0500] jtimberman: https://github.com/opscode-cookbooks/runit
[2013-02-20 22:19:33 -0500] jtimberman: Yeah, fnichol's got some great test coverage too
[2013-02-20 22:19:36 -0500] miah: https://github.com/miah/chef-redis
[2013-02-20 22:19:40 -0500] miah: also has tests
[2013-02-20 22:19:44 -0500] jtimberman: :D
[2013-02-20 22:19:47 -0500] log1kal: Thanks, guys!
[2013-02-20 22:20:27 -0500] miah: im writing tests for my collectd cookbook at the moment too, but i dont think i've pushed anything up yet.
[2013-02-20 22:23:17 -0500] Toger: log1kal: well for example, anything that references mirrors.fedoraproject.org right now will fail.
[2013-02-20 22:23:19 -0500] gkarekinian: Puppet users probably always get creepy puppeteering results
[2013-02-20 22:23:24 -0500] Toger: err miah, rather.
[2013-02-20 22:23:32 -0500] miah: Toger: you should locally mirror software that you require
[2013-02-20 22:23:54 -0500] miah: relying on external 3rd parties can be problematic
[2013-02-20 22:24:30 -0500] miah: minimizing problems during integration/deployment should be part of your task list
[2013-02-20 22:26:10 -0500] timsmith: miah: Is your collectd cookbook Bryan's fork?
[2013-02-20 22:26:18 -0500] miah: maybe?
[2013-02-20 22:26:25 -0500] timsmith: just curious
[2013-02-20 22:26:34 -0500] timsmith: he has the good fork right now
[2013-02-20 22:26:36 -0500] miah: we both forked from the same place
[2013-02-20 22:26:41 -0500] miah: good in what way?
[2013-02-20 22:26:56 -0500] timsmith: there's a lot of forks of that cookbook
[2013-02-20 22:26:57 -0500] timsmith: tons
[2013-02-20 22:27:01 -0500] timsmith: too many
[2013-02-20 22:27:05 -0500] miah: i have lwrp's
[2013-02-20 22:27:11 -0500] miah: and tests
[2013-02-20 22:27:38 -0500] timsmith: nice
[2013-02-20 22:27:46 -0500] timsmith: the lwrp was something I was going to write
[2013-02-20 22:27:50 -0500] timsmith: I'll have to check that out
[2013-02-20 22:27:51 -0500] miah: and stuff like build from source
[2013-02-20 22:27:53 -0500] miah: please do
[2013-02-20 22:33:15 -0500] log1kal: Gah. <3 test-kitchen.
[2013-02-20 22:33:22 -0500] log1kal: I've been cookbooking blind.
[2013-02-20 22:34:11 -0500] miah: ya. i did that a bunch. or spin up ec2 nodes and deploy, pray, deploy, pray.
[2013-02-20 22:34:21 -0500] miah: much easier now =)
[2013-02-20 22:35:16 -0500] doomviking: come on. live on the edge.
[2013-02-20 22:35:34 -0500] miah: been there. done that.
[2013-02-20 22:42:57 -0500] notanumber: Hey all.  I'm pretty new to Chef, but trying to use it with Vagrant.  Not clear how to get Python 3.3 installed in my VM.  If I use the python recipe, it doesn't seem to pickup my version number.  My Vagrantfile: http://dpaste.com/957342/
[2013-02-20 22:43:21 -0500] notanumber: If I just do the straight `config.vm.provision :shell, :inline => "sudo apt-get -y install python3"` it works though.
[2013-02-20 22:45:17 -0500] jikbag: I notice there is a listing for a "Chef Cookbook Authoring with Bento, Vagrant, and Berkshelf" workshop on eventbrite.com set for March 2nd. Is this going to be the same workshop that will be offered at #ChefConf 2013?
[2013-02-20 22:45:31 -0500] jikbag: https://www.eventbrite.com/event/5502199226/es2005/?rank=1
[2013-02-20 22:45:38 -0500] jikbag: http://chefconf.opscode.com/program/
[2013-02-20 22:47:07 -0500] log1kal: notanumber: does it work if you wrap 3.3 in quotes?
[2013-02-20 22:47:14 -0500] paigeat: if nodes stop checking in for a long time, do they get exluded from run_lists or extended run_lists when a chef-client finally tries to run?
[2013-02-20 22:47:42 -0500] paigeat: I cant remember
[2013-02-20 22:48:10 -0500] paigeat: my boss wants to shut off chef-client "when we don't need it"
[2013-02-20 22:48:16 -0500] paigeat: which ...
[2013-02-20 22:48:37 -0500] ryduh: What's the best supervisord cookbook?
[2013-02-20 22:48:47 -0500] paigeat: ryduh: I think runit
[2013-02-20 22:49:20 -0500] notanumber: log1kal: Nope.  Still not installing it.
[2013-02-20 22:50:24 -0500] paigeat: sorry lemme rephrase that question
[2013-02-20 22:50:46 -0500] ryduh: paigeat: are you saying, don't use supervisord and use runit instead?
[2013-02-20 22:50:55 -0500] paigeat: do nodes get excluded from search results when searching by run_list items if they haven't checked in for a certain period of time
[2013-02-20 22:51:17 -0500] paigeat: ryduh: sorry I am not saying that at all
[2013-02-20 22:51:24 -0500] paigeat: I didn't even know about supervisord
[2013-02-20 22:51:30 -0500] paigeat: but I assumed thats what you meant
[2013-02-20 22:51:31 -0500] paigeat: lol
[2013-02-20 22:51:51 -0500] ryduh: ;)
[2013-02-20 22:53:19 -0500] BenP_: @notanumber: I see that the default attribute is a full, 3-part version number ('2.7.1') and that there's no flat version '3.3' in the python ftp. Try using 3.3.0 (in quotes) in your vagrantfile.
[2013-02-20 22:54:03 -0500] BenP_: "version" => "3.3.0"
[2013-02-20 22:56:15 -0500] log1kal: when using test-kitchen, if I have a local cookbook dependency, do I edit the Cheffile at tests/kitchen/.kitchen/Cheffile?
[2013-02-20 22:56:46 -0500] log1kal: http://lists.opscode.com/sympa/arc/chef/2012-12/msg00137.html appears to indicate differently, but that would leave me with two Cheffiles
[2013-02-20 22:57:25 -0500] notanumber: BenP_: Didn't seem to work either...
[2013-02-20 22:58:01 -0500] btm: paigeat: the age of the last checkin (ohai_time) does not affect the search indexes.
[2013-02-20 23:05:43 -0500] rava: hey guys, is chef::shellout supposed to be capturing a time/date stamp in the stdout attribute?
[2013-02-20 23:06:11 -0500] rava: or is there an attribute i'm missing that will only have the output from a sed command?
[2013-02-20 23:06:18 -0500] rava: without the timestamp
[2013-02-20 23:07:02 -0500] BenP_: notanumber: looks like the default recipe uses your package manager (apt-get for your precice pangolin install) which probably doesn't have python 3.3. Try setting the "install_method" attribute to "source"
[2013-02-20 23:08:12 -0500] algofoogle: hi everyone. i have a recipe which invokes multiple resources, per each item a set of items -- i.e. in a loop. i would prefer to Chef::Log.info() each of those items before the resources, as a way to track when each is actually being executed on the client. if i do this in-line, all i get is the log-lines being output at compile-time. i figured instead i could put the Chef::Log.info() into a ruby_block. is that the right approach?
[2013-02-20 23:08:22 -0500] rava: error output from client run: https://gist.github.com/bd-erik/5000534
[2013-02-20 23:09:33 -0500] donovan: any trick for configuring default install of erchef for clients not on localhost
[2013-02-20 23:10:15 -0500] notanumber: BenP_: Is there any real advantage to doing it this way rather than just the `config.vm.provision :shell, :inline => "sudo apt-get -y install python3"` way?
[2013-02-20 23:10:19 -0500] donovan: I tried using the IP of 0.0.0.0, and the actual IP of server, but all I get are: Connection reset by peer errors with any chef-client run
[2013-02-20 23:11:12 -0500] BenP_: It's more culinary if you use the cookbook :)
[2013-02-20 23:11:51 -0500] algofoogle: if i had to write my intended code in one line, as a (hard-to-read) example:   %w(foo bar).each { |item|  ruby_block { block { Chef::Log.info("Doing #{item}") } };  package item; service item { action :start } }
[2013-02-20 23:11:53 -0500] notanumber: Fair enough.  I'm crazy new at this whole Vagrant/Chef thing.
[2013-02-20 23:12:18 -0500] rava: anyone else getting a date/time stamp in their shellout.stdout attribute?
[2013-02-20 23:12:25 -0500] notanumber: BenP_: Source seems to the working.  It look like it grabbed the right package.
[2013-02-20 23:12:42 -0500] BenP_: Bingo. Awesome.
[2013-02-20 23:12:55 -0500] notanumber: Doh.  Looks like it needs build-essentials, I'm guessing.  Make failed.
[2013-02-20 23:13:51 -0500] notanumber: Maybe I should just give up an use Python 2.7 for this project.  Wouldn't have thought 3 would be so hard. heh.
[2013-02-20 23:14:21 -0500] notanumber: Trying to use the newest and greatest tools for this project.
[2013-02-20 23:14:27 -0500] notanumber: Might be over stepping it.
[2013-02-20 23:15:13 -0500] BenP_: You could also edit the python cookbook. In recipes/package.rb, it hard codes the package name "python" and "python-dev." If you change those to "python3" and "python3-dev" you might pick up those apt packages.
[2013-02-20 23:16:36 -0500] notanumber: Yeah, I thought about that, but was afraid to touch it.  I know virtually no Ruby.
[2013-02-20 23:17:04 -0500] notanumber: Seems simple enough though.
[2013-02-20 23:17:11 -0500] rava:  this is the offending code: https://gist.github.com/bd-erik/5000607
[2013-02-20 23:17:34 -0500] BenP__: You don't really need to know ruby. You need to know just enough ruby for chef: http://docs.opscode.com/just_enough_ruby_for_chef.html
[2013-02-20 23:17:49 -0500] notanumber: Oooh.  This is a good link.  Thanks for that.
[2013-02-20 23:18:18 -0500] j^2: notanumber: I'd suggest watching the opscode tutorials too, i learned alot from them
[2013-02-20 23:18:31 -0500] j^2: and the wiki ;)
[2013-02-20 23:19:25 -0500] notanumber: j^2: Thanks.
[2013-02-20 23:20:01 -0500] notanumber: I'm also trying to wrap my head around the best way to make use of Vagrant, Chef, and Fabric so I can continue to deploy to something like dotCloud.
[2013-02-20 23:20:54 -0500] notanumber: I'm thinking I'll use Vagrant w/ Chef to setup my VM to use nginx, postgresql, and python.  Everything else setup via Fabric.
[2013-02-20 23:21:44 -0500] notanumber: Looks like install build-essential and setting the install method to source worked.
[2013-02-20 23:23:22 -0500] rava: tried the same with the mixlib::shellout command and i still get that stupid time stamp at the end
[2013-02-20 23:24:06 -0500] BenP__: Now kill your VM and do another vagrant up to make sure you did it right, NaN :D
[2013-02-20 23:24:11 -0500] rava: bah, found the
[2013-02-20 23:28:26 -0500] rava: note: when shelling out to run sed, double escape your backslashes >.>
[2013-02-20 23:29:59 -0500] notanumber: Doh, after rebuilding it complains it's missing setuptools.
[2013-02-20 23:30:35 -0500] notanumber: The pip and virtualenv install bits failed, looks like.
[2013-02-20 23:33:50 -0500] kbennett: Hi, all.  I'm just starting with chef. Should I add the .chef and client-config directories to my git repo?
[2013-02-20 23:34:01 -0500] kbennett: Are their contents global to all managed clients?
[2013-02-20 23:34:11 -0500] donovan: anyone know how to disable reporting in chef 11
[2013-02-20 23:34:20 -0500] donovan: The URL scheme doesn't work
[2013-02-20 23:34:56 -0500] mattray: kbennett: it's possible that if you put .chef in your git repo, you may expose passwords or credentials
[2013-02-20 23:35:06 -0500] mattray: you can get around that by using environment variables
[2013-02-20 23:35:21 -0500] kbennett: Ok, so I don't git add those dirs then, right?
[2013-02-20 23:35:25 -0500] kbennett: THey'll be untracked.
[2013-02-20 23:35:27 -0500] kbennett: by git.
[2013-02-20 23:35:28 -0500] mattray: kbennett: https://github.com/mattray/openstack-chef-repo/blob/master/.chef/knife.rb
[2013-02-20 23:35:44 -0500] mattray: kbennett: correct
[2013-02-20 23:36:06 -0500] mattray: I have a ~/.creds file that gets sourced in my .bashrc
[2013-02-20 23:36:20 -0500] mattray: so that's my only untracked file
[2013-02-20 23:37:51 -0500] kbennett: So you do put the .pem files in the git repo?
[2013-02-20 23:38:00 -0500] trobrock: miah: hey
[2013-02-20 23:38:15 -0500] miah: hullo
[2013-02-20 23:38:52 -0500] miah: are you kitchening in your chef-repo, or in a cookbook repo?
[2013-02-20 23:39:37 -0500] trobrock: chef-repo, was under the impression it would work both ways. I want to be able to test server config for a full stack, something that installs multiple cookbooks
[2013-02-20 23:40:32 -0500] mattray: kbennett: nope
[2013-02-20 23:40:33 -0500] miah: it probably will work that way with some massaging. i'm currently only using it on a per cookbook basis.
[2013-02-20 23:40:45 -0500] miah: but the configuration allows you to pull in multiple cookbooks because it integrates with Berkshelf
[2013-02-20 23:40:47 -0500] mattray: kbennett: unless you have a private repo that you trust
[2013-02-20 23:41:15 -0500] trobrock: miah: ok, guess I could just use it at a cookbook level until the gem versions catch up
[2013-02-20 23:41:30 -0500] miah: make sure to file a ticket
[2013-02-20 23:41:43 -0500] miah: because it probably should work that way
[2013-02-20 23:41:46 -0500] trobrock: yea will do thanks for clearing up the confusion
[2013-02-20 23:41:56 -0500] miah: but i dont know that any of us are testing it that way
[2013-02-20 23:42:04 -0500] miah: sure thing. anytime
[2013-02-20 23:42:33 -0500] kbennett: mattray: Thanks.  Is the usual procedure to git clone the opscode chef-repo and then change the remote to point to my private git repo account?
[2013-02-20 23:43:13 -0500] mattray: kbennett: yup
[2013-02-20 23:43:32 -0500] mattray: kbennett: just 'rm -rf .git' right out
[2013-02-20 23:43:45 -0500] mattray: you won't track opscode's version and you don't care about our history
[2013-02-20 23:44:10 -0500] miah: git remote add / git remote remove
[2013-02-20 23:44:11 -0500] miah: :P
[2013-02-20 23:44:37 -0500] kbennett: mattray: But I'll want to keep my own history, right?  So I do a new git init after removing opscode's .git?
[2013-02-20 23:44:38 -0500] mattray: miah: sure, but won't the .git still keep history
[2013-02-20 23:44:40 -0500] miah: or just mkdir the directory structure yourself. there isn't really anything special in the chef-repository
[2013-02-20 23:44:44 -0500] mattray: kbennett: yes
[2013-02-20 23:44:48 -0500] allaire: Any methods to install some package before Chef tries to install gem at compile phase?
[2013-02-20 23:44:51 -0500] mattray: miah: very true
[2013-02-20 23:45:13 -0500] mattray: allaire: the mysql cookbook does that
[2013-02-20 23:45:21 -0500] miah: suprised nobody has added a chef-repository generator to knife
[2013-02-20 23:45:30 -0500] mattray: miah: I think I've seen that
[2013-02-20 23:45:38 -0500] mattray: knife repo create or somesuch
[2013-02-20 23:45:45 -0500] miah: ah =)
[2013-02-20 23:45:50 -0500] miah: figures rule 34
[2013-02-20 23:46:06 -0500] mattray: but yeah, it's really just a directory with a .chef and whatever else you want/need
[2013-02-20 23:46:08 -0500] allaire: mattray: I have an issue with the database cookbook, it tries to install the pg gem before my ruby environment is setup
[2013-02-20 23:46:36 -0500] miah: allaire: reorder your runlist
[2013-02-20 23:46:38 -0500] mattray: allaire: I think the mysql cookbook had that same issue and fixed it, but I thought postgres had been updated the same way
[2013-02-20 23:46:48 -0500] allaire: miah: that a compile phase problem
[2013-02-20 23:46:59 -0500] allaire: mattray: https://github.com/opscode-cookbooks/postgresql/blob/master/recipes/ruby.rb#L44
[2013-02-20 23:47:01 -0500] allaire: I hit that line
[2013-02-20 23:47:14 -0500] allaire: thing is, make is not installed, cause I don't have build-essential installed
[2013-02-20 23:47:32 -0500] mattray: yeah, maybe that dep is missing?
[2013-02-20 23:47:33 -0500] allaire: even if I have a recipe with package "build-essential" at the top of my run list, it fails
[2013-02-20 23:47:35 -0500] lazyPower-Work: allaire: still cant get build-essential installed?
[2013-02-20 23:48:00 -0500] miah: allaire: there is a flag for build-essential to make sure it happens at compile-time
[2013-02-20 23:48:06 -0500] lazyPower-Work: allaire: is your apt-repository updating as its supposed to? I know that on AWS VM's when you first deploy them you need your apt recipe at the top to run apt-get update first.
[2013-02-20 23:48:18 -0500] miah: flag/attribute
[2013-02-20 23:48:21 -0500] mattray: allaire: miah: it's missing from the depends of the metadata.rb for postgres
[2013-02-20 23:48:33 -0500] miah: ah. file ticket / pr :P
[2013-02-20 23:48:42 -0500] mattray: gotta run, later folks
[2013-02-20 23:48:55 -0500] allaire: lazyPower-Work: Well, I've been in/out, but basically, I got it to work by manually installing build-essential before running my chef install
[2013-02-20 23:49:12 -0500] lazyPower-Work: chef-solo or hosted/private/open-chef?
[2013-02-20 23:49:17 -0500] allaire: chef-solo
[2013-02-20 23:49:20 -0500] allaire: with knife solo
[2013-02-20 23:49:39 -0500] lazyPower-Work: Can i take a look at your build config?
[2013-02-20 23:50:00 -0500] allaire: my node file?
[2013-02-20 23:50:09 -0500] lazyPower-Work: yep
[2013-02-20 23:50:16 -0500] lazyPower-Work: if you dont have sensitive data in it
[2013-02-20 23:50:41 -0500] notanumber: Ah, I see why it fails.  The other recipes, pip and virtualenv, both expect /usr/local/bin/python to exist afterwards.  Python 3's interpreter is called python3.
[2013-02-20 23:50:51 -0500] allaire: lazyPower-Work: https://gist.github.com/allaire/1cf26bf78b8734c67c83
[2013-02-20 23:51:14 -0500] allaire: lazyPower-Work: lodgem:: are my cookbooks, where I call various resources
[2013-02-20 23:52:08 -0500] lazyPower-Work: recipe postgresql::server the one thats failing out? I'd scroll up and look but i'm on irssi, and haven't figuredo ut how to page up on my air.
[2013-02-20 23:52:57 -0500] allaire: lazyPower-Work: "recipe[database::postgresql]" is
[2013-02-20 23:53:08 -0500] allaire: lazyPower-Work: cause it asks for postgresql::ruby
[2013-02-20 23:54:05 -0500] log1kal: lazyPower-Work: fn-shift-up if you're using screen + irssi
[2013-02-20 23:54:08 -0500] miah: lazyPower-Work: fn + up/down arror keys
[2013-02-20 23:54:25 -0500] lazyPower-Work: right on, Thank you.
[2013-02-20 23:55:04 -0500] allaire: but like mattray said, depends "build-essential" is missing in the metadata.rb
[2013-02-20 23:55:06 -0500] allaire: would that fix it?
[2013-02-20 23:55:22 -0500] lazyPower-Work: hang on i'm still mulling this over
[2013-02-20 23:55:34 -0500] allaire: mysql cookbook has it
[2013-02-20 23:56:07 -0500] miah: allaire: yes
[2013-02-20 23:56:19 -0500] lazyPower-Work: i see ruby_build -- you should use chef_gem and fetch the pg gem, as well as have build-essential listed in your node config.
[2013-02-20 23:56:35 -0500] lazyPower-Work: thats where I think it needs to go. ymmv
[2013-02-20 23:56:55 -0500] allaire: miah: care to explain a bit more :)
[2013-02-20 23:57:13 -0500] allaire: how is it essential, since I use chef solo and build-essential is in my /cookbooks
[2013-02-20 23:57:40 -0500] miah: without a depends, chef doesnt know that it actually requires it to be installed before that cookbook executes
[2013-02-20 23:58:14 -0500] allaire: oh, so it's needed for dependencies ordering/loading
[2013-02-20 23:58:17 -0500] miah: yes
[2013-02-20 23:58:24 -0500] allaire: there's the problem then!
[2013-02-20 23:58:30 -0500] lazyPower-Work: zing!

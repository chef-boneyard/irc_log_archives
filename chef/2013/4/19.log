[2013-04-19 00:58:51 -0400] df11: in a template stanza, i set variables.  later inside the same template stanza i have a simple 'if' check that works, and then i call variables.merge with a new variable and an overwriting variable.  is this not possible?
[2013-04-19 01:01:06 -0400] df11: paste: http://pastebin.com/tcVRyDWf
[2013-04-19 01:11:28 -0400] df11: ah, forgot an '!', woops
[2013-04-19 01:19:59 -0400] gyre007: how can I tell vagrant to run chef_solo provisioner in debug mode ?
[2013-04-19 01:23:34 -0400] juliancdunn: gyre007: chef.log_level = :debug
[2013-04-19 01:25:04 -0400] gyre007: juliancdunn: cheers
[2013-04-19 01:25:18 -0400] gyre007: damn...I'm trying to use apt cookbook's LWRP
[2013-04-19 01:25:25 -0400] gyre007: but i seem to be missing something...
[2013-04-19 01:25:27 -0400] log1kal: I wish that was in the default vagrant file, and just commented out
[2013-04-19 01:26:28 -0400] gyre007: but I'm getting damn error which I'm not sure why https://gist.github.com/milosgajdos83/5417477
[2013-04-19 01:26:31 -0400] gyre007: recipe is simple
[2013-04-19 01:26:37 -0400] gyre007: log1kal: yeah
[2013-04-19 01:26:39 -0400] gyre007: I agree
[2013-04-19 01:26:48 -0400] gyre007: anyone uses apt LWRP ?
[2013-04-19 01:27:05 -0400] gyre007: I just followed the examples in readme....but I must've missed something...
[2013-04-19 01:27:18 -0400] gyre007: it work in previous version of apt cookbook
[2013-04-19 01:32:27 -0400] gyre007: arrrghhhh
[2013-04-19 01:38:44 -0400] gyre007: arrgh in case anyone's interested :) https://github.com/mdxp/nodejs-cookbook/issues/26
[2013-04-19 01:43:00 -0400] juliancdunn: so are you running an old Chef?
[2013-04-19 02:09:27 -0400] franzaz: it doesn't look like "keep_releases" attribute is documented on http://docs.opscode.com/resource_deploy.html.  Should it be?  Or is it deprecated?
[2013-04-19 02:11:58 -0400] juliancdunn: probably just an oversight, I still see it in the code
[2013-04-19 03:42:45 -0400] chmy: I am using the community rabbitmq cookbook and I have also created a rabbit-wrapper cookbook for my own changes. I am trying to override the default attributes specifically default['rabbitmq']['cluster'] = false in rabbitmq/attributes/default.rb , I am trying to do so by putting override['rabbitmq']['cluster'] = true in rabbitmq-wrapper/attributes/default.rb, But for the life of me I can not get
[2013-04-19 03:42:45 -0400] chmy: it to work, anyone have a pointer to what I am missing? rabbitmq-wrapper/recipies/default.rb also has include_recipe 'rabbitmq'. Can an attribute not be over-riden like that?
[2013-04-19 06:02:04 -0400] stormerider: hm, question-- is there a way to get the ec2 public hostname via knife node list, or do i need to do a search?
[2013-04-19 06:13:14 -0400] stormerider: nevermind, found how to do it with search
[2013-04-19 06:13:20 -0400] ranjibd: stormerider: you cant get that with list
[2013-04-19 06:13:23 -0400] ranjibd: show or search
[2013-04-19 06:13:24 -0400] ranjibd: yeah
[2013-04-19 06:13:26 -0400] ranjibd: -a
[2013-04-19 06:43:48 -0400] rene_: Hi folks.
[2013-04-19 06:44:13 -0400] rene_: I have one question: Where can I order some Chef stickers?
[2013-04-19 07:05:44 -0400] stormerider: that's actually a good line of questioning... does opscode do tshirts?
[2013-04-19 07:06:18 -0400] Mithrandir: I have opscode/chef t-shirts.
[2013-04-19 07:06:39 -0400] Mithrandir: (not for sale.  In my closet)
[2013-04-19 07:09:11 -0400] Mithrandir: I've gotten it from the opscode people at confs, so if you go to one and find them, you'll get t-shirts.
[2013-04-19 07:09:15 -0400] Mithrandir: and swag
[2013-04-19 07:09:58 -0400] stormerider: aha. been meaning to check out one of their seminars up in seattle some time
[2013-04-19 07:10:42 -0400] stormerider: since im down in olympia and my work is in seattle, makes sense to visit them at their hq some time
[2013-04-19 07:14:08 -0400] gad0lin: how can i use  startup script, in  knife cook solo --startup-script , can I pass bash script with exports ?
[2013-04-19 07:14:32 -0400] gad0lin: at least that is what i understand -  The startup script on the remote server containing variable definitions
[2013-04-19 07:18:39 -0400] nebrera: Hi
[2013-04-19 07:19:39 -0400] gad0lin: Hola
[2013-04-19 07:20:21 -0400] nebrera: I have several templates files use notify
[2013-04-19 07:20:29 -0400] nebrera: I have notify delayed
[2013-04-19 07:20:39 -0400] nebrera: the problem is I have for example
[2013-04-19 07:20:52 -0400] nebrera: template A -> notify restart service S
[2013-04-19 07:21:05 -0400] nebrera: template B -> notify restart service S
[2013-04-19 07:21:24 -0400] nebrera: the problem is if both files has changed it restart the service S twice
[2013-04-19 07:21:31 -0400] nebrera: could I avoid this ?
[2013-04-19 07:23:26 -0400] skroon: hi
[2013-04-19 07:23:48 -0400] nebrera: <gad0lin>, are you spanish ?
[2013-04-19 07:28:08 -0400] gad0lin: nebrera: nop
[2013-04-19 07:33:58 -0400] gad0lin: nebrera: i would expect that there will be one restart
[2013-04-19 07:41:37 -0400] nebrera: ahm
[2013-04-19 08:53:21 -0400] dimka: How can I check that recipes, templates and roles syntax is valid?
[2013-04-19 08:53:44 -0400] dimka: How can I check that there are no unused variables in recipes and templates?
[2013-04-19 08:55:29 -0400] mattt: dimka: knife cookbook test
[2013-04-19 08:57:43 -0400] dimka: mattt: if don't show unused variables that I passed from recipe to template
[2013-04-19 08:57:50 -0400] dimka: s/if/it/
[2013-04-19 08:58:18 -0400] mattt: dimka: maybe foodcritic will show that?
[2013-04-19 08:59:29 -0400] dimka: Yep
[2013-04-19 09:04:00 -0400] dimka: foodcritic said `Prefer new notification syntax`
[2013-04-19 09:04:04 -0400] dimka: What is it all about?
[2013-04-19 09:05:16 -0400] flaccid: dimka: check the notification resource in docs and update your code
[2013-04-19 09:16:08 -0400] jcm_img: omnibus installer question; after using the "curl|sudo bash" install method, and then using the /opt/chef gem binary to install knife-windows, I'm getting this message:
[2013-04-19 09:16:13 -0400] jcm_img: FATAL: Cannot find sub command for: 'windows'; The windows commands were moved to plugins in Chef 0.10; You can install the plugin with `(sudo) gem install knife-windows
[2013-04-19 09:16:15 -0400] jcm_img: is this a known problem when using the omnibus installer (and is there a fix)?
[2013-04-19 09:16:21 -0400] jcm_img: (centos 6.4)
[2013-04-19 09:17:04 -0400] jcm_img: I'm using the /opt/chef gem binary as there is no other ruby on the machine; it's a minimal server install
[2013-04-19 09:25:34 -0400] nebrera: helllo
[2013-04-19 09:25:47 -0400] nebrera: I execute:   search(:node, "roles:XXXX")
[2013-04-19 09:26:21 -0400] nebrera: first time chef-client connects to chef-server I get 0 nodes but the current node has role XXXX
[2013-04-19 09:26:56 -0400] nebrera: probably the first time the node is not created
[2013-04-19 09:27:12 -0400] nebrera: and the client it is so it create it automatically
[2013-04-19 09:35:57 -0400] laurent\: nebrera: afair "roles" and "recipes" are expanded by the client
[2013-04-19 09:36:33 -0400] alex_: how can help me with this : chef-client: cannot find/execute "chef-client" in ISA subdirectories
[2013-04-19 09:50:00 -0400] laurent\: alex_: is that solaris ? i would search for '"cannot find/execute" "in ISA subdirectories"'
[2013-04-19 11:16:08 -0400] skroon: hi
[2013-04-19 11:19:07 -0400] skroon: I really have to say that the documentation pages, are not too well formatted. It's a bit hard to find a clear point where to begin, or even to look things up
[2013-04-19 11:26:30 -0400] zts: skroon: I'm sure the Opscode folks would welcome suggestions to improve the docs - you're only new to them once, so fresh feedback is always valuable
[2013-04-19 11:26:50 -0400] zts: skroon: I'd suggest beginning with the links in the "Getting Started" section
[2013-04-19 11:27:17 -0400] zts: skroon: you can open tickets about the docs themselves here: https://github.com/opscode/chef-docs/issues  (not sure whether there are other ways of giving feedback)
[2013-04-19 11:29:02 -0400] skroon: zts: ok, thanks
[2013-04-19 11:30:15 -0400] skroon: zts: also what happens is, on the wiki, you click on the menu, and you get brought to a complete new page, losing the navigation bar :)
[2013-04-19 11:46:52 -0400] zts: skroon: for docs, you probably want to be looking at http://docs.opscode.com
[2013-04-19 11:58:11 -0400] siXy: how can I recreate the chef-validator and admin clients?
[2013-04-19 12:50:58 -0400] simplesi: hi folks. Does anyone have experience of creating a ci workflow for your chef cookbooks?
[2013-04-19 12:51:05 -0400] simplesi: I'm aware of chef-jenkins (https://github.com/mdxp/chef-jenkins), but am trying to work out how to fit this in with tools like spork, and freezing cookbook versions so people don't accidentally screw up production.
[2013-04-19 13:12:18 -0400] alex_: laurent it is indeed
[2013-04-19 13:26:33 -0400] benjohnson77: hi all
[2013-04-19 13:26:50 -0400] benjohnson77: can some one help me with a chef solot question
[2013-04-19 13:28:34 -0400] benjohnson77: I created a box with this node file {"run_list":["recipe[runit]","recipe[nginx::source]","recipe[nginx::passenger]"]}
[2013-04-19 13:29:02 -0400] benjohnson77: this completed sucesfully
[2013-04-19 13:29:23 -0400] benjohnson77: but now ngnix is not running when I hit the servers IP
[2013-04-19 13:30:11 -0400] benjohnson77: I know is early ... can anyone help
[2013-04-19 13:39:30 -0400] c0ff33: jtimberman - thanks for the tip about berkshelf - it is working great
[2013-04-19 13:39:57 -0400] adamjk-dev: anyone having issues with berkshelf ?
[2013-04-19 13:40:01 -0400] adamjk-dev: and vagrant 1.2.x
[2013-04-19 13:40:08 -0400] adamjk-dev: I am getting fiber stack errors
[2013-04-19 13:40:24 -0400] c0ff33: im using it w/o vagrant
[2013-04-19 13:40:58 -0400] adamjk-dev: oh really?
[2013-04-19 13:41:01 -0400] adamjk-dev: how so
[2013-04-19 13:42:51 -0400] c0ff33: adamjk-dev - i just didnt set up vagrant
[2013-04-19 13:42:55 -0400] c0ff33: i am just using berkshelf
[2013-04-19 13:43:04 -0400] c0ff33: my instances are on ec2
[2013-04-19 13:43:09 -0400] c0ff33: (boxes)
[2013-04-19 13:43:42 -0400] adamjk-dev: I see
[2013-04-19 13:43:46 -0400] c0ff33: im probably doing it wrong
[2013-04-19 13:43:50 -0400] c0ff33: but it is working for me
[2013-04-19 13:43:55 -0400] adamjk-dev: well, I can do a berks install.... and pull cookbooks from my local Chef 11 server.....
[2013-04-19 13:43:58 -0400] adamjk-dev: but when I do a vagrant up
[2013-04-19 13:43:59 -0400] adamjk-dev: it fails
[2013-04-19 13:44:04 -0400] adamjk-dev: with fiber stack errors
[2013-04-19 13:44:39 -0400] c0ff33: sorry i haven't got that far yet. i am looking forward to using vagrant tho
[2013-04-19 13:44:48 -0400] c0ff33: can u use vagrant w/o berkshelf?
[2013-04-19 13:45:29 -0400] adamjk-dev: of course
[2013-04-19 13:45:44 -0400] adamjk-dev: i am just trying to keep running examples of using chef-solo (with berkshelf) and chef-client
[2013-04-19 13:45:56 -0400] adamjk-dev: u can use vagrant with any provisioner
[2013-04-19 13:46:02 -0400] adamjk-dev: chef solo and chef client are two of which
[2013-04-19 13:49:13 -0400] c0ff33: i guess i was asking if vagrant worked for u w/o chef - i.e. are the fiber stack errors coming from chef or vagrant
[2013-04-19 13:50:06 -0400] c0ff33: can anyone tell me if I can add things to the run list of my chef-server via the '/etc/chef-server/chef-server.rb' file? What is the syntax?
[2013-04-19 13:51:13 -0400] dickymoo: Hey has anyone had experience of Windows environment variables not being refreshed during cookbook execution?
[2013-04-19 13:52:56 -0400] adamjk-dev: c0ff33: oh, yeah I beleve vagrant is working without chef
[2013-04-19 13:53:11 -0400] adamjk-dev: c0ff33: vagrant and chef work with chef client as well... but when I use berkshelf it all breaks up
[2013-04-19 13:53:44 -0400] c0ff33: the only problems i've had with berkshelf so far is the cookbooks not having the "name" set in the metadata.rb
[2013-04-19 13:53:51 -0400] c0ff33: but that wasn't a fiber stack error
[2013-04-19 13:53:56 -0400] timruffles: would anyone point me in the direction of some docs that'd explain why my templates aren't updating? knife solo + runit , no change I make to my .erb files results in the file being update
[2013-04-19 13:54:23 -0400] c0ff33: adamjk-dev - are you running your own chef server or using hosted?
[2013-04-19 13:54:43 -0400] adamjk-dev: c0ff33: my own chef server
[2013-04-19 13:55:28 -0400] c0ff33: adamjk-dev do you have your chef-server apply any cookbooks or recipes (run list stuff) to itself?
[2013-04-19 13:56:00 -0400] adamjk-dev: c0ff33: I am not sure what you mean exactly, but the chef-server does not run cookbooks on itself
[2013-04-19 13:56:44 -0400] c0ff33: well i am using the users / sysadmins  cookbook on many boxes and i just want it to run on the chef-server too but im not sure how to do that
[2013-04-19 13:57:20 -0400] teukka: timruffles: add `-VV` (yes, two Vs) option to get all the debug output
[2013-04-19 13:58:28 -0400] adamjk-dev: c0ff33: ah, I see..... you ought to be able to run chef solo on the chef-server I think
[2013-04-19 13:58:38 -0400] adamjk-dev: adamjk-dev: and point to local cookbooks path etc.
[2013-04-19 13:58:47 -0400] c0ff33: oh thats interesting
[2013-04-19 13:58:57 -0400] timruffles: teukka: thanks
[2013-04-19 13:59:28 -0400] c0ff33: hmm i havent used chef-solo before. kind of wrote it off. but it looks like that might work
[2013-04-19 14:00:37 -0400] adamjk-dev: c0ff33: I am thinking it will in fact
[2013-04-19 14:00:45 -0400] adamjk-dev: c0ff33: dont quote me on it though
[2013-04-19 14:01:00 -0400] c0ff33: it really seems odd though because chef-server can already reconfigure itself...
[2013-04-19 14:05:18 -0400] simplesi: Does anyone have experience of using a Continuous Integration / Release workflow with chef cookbook deployment?
[2013-04-19 14:06:35 -0400] adamjk-dev: c0ff33: yah im not sure of the best approach myself
[2013-04-19 14:06:45 -0400] c0ff33: i think ur right about the chef-solo thing
[2013-04-19 14:06:52 -0400] c0ff33: i was just reading up on this https://github.com/opscode-cookbooks/chef-server
[2013-04-19 14:07:07 -0400] c0ff33: and it says the fastest way to get up and running is to do chef-solo first then omnibus chef-server
[2013-04-19 14:07:11 -0400] c0ff33: i just did step 2 tho
[2013-04-19 14:07:38 -0400] c0ff33: adamjk-dev do you know where the cookbooks folder is on chef-server omnibus?
[2013-04-19 14:09:01 -0400] adamjk-dev: c0ff33: yeah, I was working on using hte chef-server cookbook myself
[2013-04-19 14:09:12 -0400] adamjk-dev: c0ff33: no I am not sure, sorry
[2013-04-19 14:09:15 -0400] c0ff33: ok thx
[2013-04-19 14:09:25 -0400] adamjk-dev: c0ff33: https://github.com/opscode-cookbooks/chef-server#demo-chef-server-with-vagrant-and-berkshelf
[2013-04-19 14:09:34 -0400] adamjk-dev: c0ff33: (hence why I am having problems with berkshelf)
[2013-04-19 14:09:44 -0400] c0ff33: yeah i saw that :)
[2013-04-19 15:16:03 -0400] magoo: I've upgraded our staging chef server to the latest version and I very often get Net::HTTPServerException: 403 "Forbidden" on a couple of our templates. Subsequent provisions always move past the error. Has anyone else ran into this?
[2013-04-19 15:16:36 -0400] magoo: This issue does not exist on our production chef server < 11.x
[2013-04-19 15:24:13 -0400] spox: magoo: how long is your chef run?
[2013-04-19 15:26:26 -0400] magoo: spox: loooooooooong
[2013-04-19 15:27:08 -0400] spox: magoo: i tracked the issue down last week. hoping i'll have time to be able to apply a fix today
[2013-04-19 15:27:17 -0400] spox: expire header is set for 15 minutes
[2013-04-19 15:27:25 -0400] spox: so anything more and you get 403s after
[2013-04-19 15:31:42 -0400] magoo: spox: glad to hear that! our provision often takes longer than that
[2013-04-19 15:44:21 -0400] ranman: hey guys where do the platform strings for value_for_platform come from?
[2013-04-19 16:05:34 -0400] adnichols: have other folks found that using chef-rewind appears to change the order of execution in the run_list? The recipe I'm using it in appears to run before any others, despite being toward the end of the run_list
[2013-04-19 16:06:40 -0400] adnichols: I may be inappropriately attributing this to chef-rewind, but it's the main diff between this one recipe and others that are executing in the correct order
[2013-04-19 16:11:03 -0400] a13x212: is ubuntu a valid platform_family?
[2013-04-19 16:13:34 -0400] gleam: i don't think so, i think it falls into debian
[2013-04-19 16:18:54 -0400] ryker: anyone know if it's OK to use more than one 'not_if' line in a resource definition?
[2013-04-19 16:19:19 -0400] gyre007: ivey: you about ?
[2013-04-19 17:04:04 -0400] a13x212: trying to do this:
[2013-04-19 17:04:09 -0400] a13x212: if platform?("redhat", "centos") and version == 5
[2013-04-19 17:04:09 -0400] a13x212:         print "### hello ###"
[2013-04-19 17:26:35 -0400] eliklein: berkshelf question: has anyone run into an issue where you get a cookbook not found error when trying to vagrant up to test a cookbook that relies on a local cookbook? (ie. not found on the opscode community site)
[2013-04-19 17:26:49 -0400] eliklein: s/relies/depends
[2013-04-19 17:31:28 -0400] maek: do environment level cookbook locks take priority over metadata.rb dependencies?
[2013-04-19 17:32:30 -0400] j^2: maek: i believe so
[2013-04-19 17:32:40 -0400] maek: j^2: ty
[2013-04-19 17:48:41 -0400] jtimberman: eliklein: cookbook "bananas", :path => "/path/to/bananas"
[2013-04-19 17:49:45 -0400] miah: mmm bananas
[2013-04-19 17:50:26 -0400] maek: OT but have to share this as its the only thing I can thing about when some says bananas http://www.thekitchn.com/how-to-make-creamy-ice-cream-w-93414 its amazing!
[2013-04-19 17:51:10 -0400] Toger: Did the rundeck/chef plugin move? the google results for github all 404.
[2013-04-19 17:52:26 -0400] gad0lin: ohai, I am a bit lost, I have magic CHEF_ENV system variable, now I really wish to have it visible on the cloud server which I want to configure with knife solo cook, but surprise, surprise its not visible. Depending on the CHEF_ENV I select role path in solo.rb, so its kinda important
[2013-04-19 17:53:12 -0400] gad0lin: e.g. role_path  "/tmp/chef-solo/roles/#{ENV['CHEF_ENV'].split("-").first}"
[2013-04-19 17:54:25 -0400] gad0lin: I have feeling that it worked like that in the past
[2013-04-19 18:01:36 -0400] therobot: I'm having problems trying to start chef-server. The process starts, the init script outputs the pidfile and then suddenly the process dies. There is no output on the logs, and I think permissions on /var/run/chef and /var/log/chef are fine. Any clues on what I can investigate?
[2013-04-19 18:02:52 -0400] gad0lin: therobot: what version you are running?
[2013-04-19 18:03:20 -0400] therobot: 10.18.2
[2013-04-19 18:05:21 -0400] gad0lin: therobot: I would start with simple steps: df -hs, netstat -nlp
[2013-04-19 18:09:55 -0400] teukka: gad0lin: knife-solo does not set any environment variables on the node. you can do it yourself but it requires configuring the sshd on the node to accept them. and your client to pass them
[2013-04-19 18:11:33 -0400] teukka: gad0lin: fyi, the next release (v0.3.0) will generate the solo.rb and not use the local one, so you should maybe think of an alternative workflow anyway...
[2013-04-19 18:12:18 -0400] teukka: gad0lin: in the future you only set local paths. similar to vagrant for example
[2013-04-19 18:13:10 -0400] teukka: gad0lin: but as soon as chef-solo supports environments (the ticket is reviewed I think), knife-solo will add support to it
[2013-04-19 18:14:34 -0400] kindsol: from the mailing list: https://rubygems.org/gems/yard-chef
[2013-04-19 18:14:47 -0400] kindsol: some example document generated from the rightscale_cookbooks:
[2013-04-19 18:14:47 -0400] kindsol: http://yard-chef.s3.amazonaws.com/rightscale_cookbooks/20130418/index.html
[2013-04-19 18:15:20 -0400] a13x212: what is the correct way of doing: if platform?("redhat", "centos") and version == 5
[2013-04-19 18:16:53 -0400] siezer: a13x212 https://github.com/someara/chef-workstation-cookbook/blob/master/attributes/default.rb#L57
[2013-04-19 18:22:38 -0400] gad0lin: teukka: thx!
[2013-04-19 18:25:58 -0400] a13x212: siezer, i tried if platform == "centos" then
[2013-04-19 18:26:09 -0400] a13x212: still gives me an error
[2013-04-19 18:26:23 -0400] a13x212: Cannot find a resource for platform on centos version 5.6
[2013-04-19 18:38:15 -0400] a13x212: this worked: if node['platform_family'] == "rhel"
[2013-04-19 19:00:37 -0400] c0ff33: I'm confused: can I set run_list items in the environment configuration?
[2013-04-19 19:02:15 -0400] c0ff33: or maybe i set role in the environment ?
[2013-04-19 19:02:45 -0400] adnichols: c0ff33 you can set environment specific run_lists in roles I believe
[2013-04-19 19:03:06 -0400] c0ff33: what about setting default run lists in envrionments?
[2013-04-19 19:03:42 -0400] adnichols: c0ff33 don't believe environments have the ability to define a run_list
[2013-04-19 19:03:50 -0400] c0ff33: got it - thanks
[2013-04-19 19:06:13 -0400] Kzim: Hello, what would be the best practice, store cluster informations in a data bag or in an environment variable ?
[2013-04-19 19:07:05 -0400] gchristensen: Kzim: you mean an environment variable like a shell var?
[2013-04-19 19:07:27 -0400] gchristensen: at any rate, I'd go databag :)
[2013-04-19 19:09:56 -0400] adnichols: Kzim I went environment attributes for that (for now) - my logic was that I have to use environments to decide which data bag to use - so I may as well just use the natural attribute precidence
[2013-04-19 19:10:10 -0400] adnichols: plus I can trivially override on individual hosts as necessary
[2013-04-19 19:10:33 -0400] Kzim: Yeah i agree but i 'm scared of the huuuuuuge environment json :)
[2013-04-19 19:11:52 -0400] adnichols: go big or go home.. I guess :)
[2013-04-19 19:16:13 -0400] Kzim: lol k thx :)
[2013-04-19 19:26:00 -0400] c0ff33: i don't get how to configure nagios to use openid with a google account
[2013-04-19 19:26:29 -0400] c0ff33: i have it working with an old version of the openid but the new cookbook is giving me some trouble
[2013-04-19 19:31:27 -0400] c0ff33: before i was using 'ax-openid' but now just 'openid' and not having any luck with it
[2013-04-19 19:42:51 -0400] subsume: i read and i read and i read and i have no fucking idea what kind of chef setup i need
[2013-04-19 19:43:00 -0400] techminer: Can there be multiple "only_if" conditions in a block?
[2013-04-19 19:43:15 -0400] subsume: what is chef solo good for if you turn off the chef client?
[2013-04-19 19:44:20 -0400] behemphi: subsume: intial config
[2013-04-19 19:44:22 -0400] behemphi: think bakery
[2013-04-19 19:44:46 -0400] subsume: aka provisioning?
[2013-04-19 19:44:55 -0400] subsume: from a chef workstation?
[2013-04-19 19:44:55 -0400] behemphi: http://perfcap.blogspot.com/2012/03/ops-devops-and-noops-at-netflix.html
[2013-04-19 19:45:37 -0400] subsume: believe me i've been parsing 10 page documents for a few hours now
[2013-04-19 19:45:41 -0400] subsume: i just need some quick context answers
[2013-04-19 19:46:08 -0400] subsume: i need to answer "shoulds"
[2013-04-19 19:46:19 -0400] behemphi: ask away
[2013-04-19 19:46:29 -0400] subsume: i've got a project with 2 webheads, 1 db, a cache server, etc. i want to manage deployments using chef
[2013-04-19 19:46:31 -0400] nlloyds: techminer: There can only be one only_if, but a single only_if can have multiple conditions (like with this && that)
[2013-04-19 19:46:46 -0400] subsume: deployments typically mean, update the code on the webheads, run some scripts and restart
[2013-04-19 19:46:47 -0400] techminer: nlloyds.ok
[2013-04-19 19:47:16 -0400] behemphi: that is exactly what I do @subsume but for 56 copies of the app over 150 machines
[2013-04-19 19:47:24 -0400] behemphi: I use Hosted chef
[2013-04-19 19:47:34 -0400] subsume: i don't really want to pay any monthly fee for now
[2013-04-19 19:47:36 -0400] behemphi: and chef 10.24 (for now)
[2013-04-19 19:48:14 -0400] subsume: i'm sick of using fabric but its so far way easier to grasp
[2013-04-19 19:48:15 -0400] behemphi: If you keep your node count =< 5 you are set with hosted chef
[2013-04-19 19:48:46 -0400] subsume: i am not gonna slap down 120 bux until i can actually use this thing
[2013-04-19 19:49:15 -0400] subsume: oh, its free for 5 nodes or less
[2013-04-19 19:49:26 -0400] behemphi: yep
[2013-04-19 19:49:32 -0400] spicy: you can also host the open source server yourself until/if you are ready to move to hosted
[2013-04-19 19:49:57 -0400] bleekman: hey - trying the couchdb cookbook on Ubuntu 12.04, says I need yum but that is not a Ubuntu thing
[2013-04-19 19:50:03 -0400] Mithrandir: (or just stay on the free server if you prefer that, it works fine for lots of us)
[2013-04-19 19:50:06 -0400] spicy: yep
[2013-04-19 19:50:40 -0400] subsume: okay
[2013-04-19 19:50:45 -0400] behemphi: In contrast to @spicy I would say I don't want to spend n hours (n > 10 say) setting up a chef server when I can pay $7 per node past 5.
[2013-04-19 19:50:58 -0400] behemphi: b/c I want to focus on getting my app live and making me $$
[2013-04-19 19:51:09 -0400] spicy: yep, both approaches are totally legit
[2013-04-19 19:51:10 -0400] behemphi: I am not saying I am right, just offering a reason I did not go that way
[2013-04-19 19:51:23 -0400] spicy: depends on your requirements and situation
[2013-04-19 19:51:24 -0400] nlloyds: bleekman: It might have a yum cookbook as a dependency, but it doesn't necessarily use yum at all.
[2013-04-19 19:51:26 -0400] Mithrandir: EPID and EBID and all that.
[2013-04-19 19:52:05 -0400] subsume: Okay cool
[2013-04-19 19:52:50 -0400] subsume: I just don't even really know where to go next
[2013-04-19 19:52:55 -0400] behemphi: today, yes, but if you are building for the future then not so much
[2013-04-19 19:53:01 -0400] behemphi: when you caching server becomes a cluster
[2013-04-19 19:53:09 -0400] behemphi: and you need HA on your data store
[2013-04-19 19:53:15 -0400] behemphi: and you decide to move from apache to nginx
[2013-04-19 19:53:17 -0400] behemphi: and and and
[2013-04-19 19:53:18 -0400] nlloyds: bleekman: Yes. The dependencies are defined in the metadata.rb for each cookbook.
[2013-04-19 19:53:42 -0400] behemphi: It woudl be pretty simple to stand up a system as a one off
[2013-04-19 19:53:57 -0400] behemphi: it is _maintaining_ the system that is where Chef shines IMO
[2013-04-19 19:53:57 -0400] nlloyds: bleekman: So if you have a cookbook that works on ubuntu and red hat it might depend on both the apt and yum cookbooks, though it only actually uses resources from one of them.
[2013-04-19 19:54:03 -0400] subsume: I already broke up with apache =)
[2013-04-19 19:54:21 -0400] behemphi: We just Dear John-ed them a month ago :-)
[2013-04-19 19:54:53 -0400] subsume: so this whole thing is centric around one project, i've seen people just host a git repo called 'chef' which i guess manages their nodes
[2013-04-19 19:55:09 -0400] bleekman: @nlloyds OK I'll go get it. Just seems with the case statements in Chef one could avoid this
[2013-04-19 19:55:51 -0400] subsume: can i really do this all from the web interface?
[2013-04-19 19:59:00 -0400] subsume: What are Environments?
[2013-04-19 19:59:28 -0400] behemphi: for me they are dev, staging and production
[2013-04-19 19:59:40 -0400] behemphi: and represent collections of nodes for the purpose
[2013-04-19 19:59:42 -0400] subsume: okay. i only need production really
[2013-04-19 19:59:52 -0400] gchristensen: woo ... that is exciting
[2013-04-19 20:00:22 -0400] subsume: i created 3 roles, www, webcache, db
[2013-04-19 20:05:27 -0400] subsume: i think i want to just create new nodes
[2013-04-19 20:05:34 -0400] subsume: and leave the past behind
[2013-04-19 20:05:43 -0400] subsume: anyway i don't get this shit at all.
[2013-04-19 20:17:44 -0400] adnichols: subsume I've felt the same in the past - the remedy is to spend some time to understand it. If you don't see value in doing that right now then it's probably just going to be frustrating to no end
[2013-04-19 20:18:09 -0400] subsume: eh its just hard to piece together the best practices
[2013-04-19 20:18:14 -0400] adnichols: otoh, there are some good docs that explain things - just lots of things to understand
[2013-04-19 20:18:17 -0400] adnichols: yes, I agree
[2013-04-19 20:18:24 -0400] subsume: now i'm garnering i guess i should clone the chef-repo and start building out from there?
[2013-04-19 20:18:32 -0400] adnichols: yep
[2013-04-19 20:18:44 -0400] subsume: you think this path would be better beaten
[2013-04-19 20:19:09 -0400] adnichols: I guess my expectations differ having used other tools
[2013-04-19 20:19:31 -0400] bleekman: oh, sorry
[2013-04-19 20:19:32 -0400] bleekman: exit
[2013-04-19 20:26:31 -0400] doomviking: the chef "ah ha!" moment is priceless
[2013-04-19 20:27:58 -0400] gchristensen: doomviking: it changed my life, of sorts :)
[2013-04-19 20:30:33 -0400] doomviking: no doubt about that
[2013-04-19 20:31:01 -0400] subsume: do I just copy clones of cookbooks around the internet into my repo?
[2013-04-19 20:31:22 -0400] siezer: subsume use berkshelf for that
[2013-04-19 20:31:26 -0400] adnichols: subsume that's the least preferable option - look at librarian-chef or berkshelf
[2013-04-19 20:31:26 -0400] gchristensen: subsume: check into tools like Librarian-chef and Berkshelf
[2013-04-19 20:32:07 -0400] doomviking: yeah, dont do that like I did :)
[2013-04-19 20:34:42 -0400] chefnoobie: hi
[2013-04-19 20:35:24 -0400] chefnoobie: was wondering how folks are dealing w/ networking equiptment, if at all w/ chef?
[2013-04-19 20:37:28 -0400] |rt|: anyone here have any experience using the group resource with freebsd?
[2013-04-19 20:38:49 -0400] qhartman: chefnoobie, Not that I'm aware of. Not really what it's designed for. You could theoretically use it as a source of truth for a management server though, and use it to push config changes. I worked at University once that used CFEngine that way to manage networking stuff.
[2013-04-19 20:39:53 -0400] |rt|: Here's what I'm currently seeing.  My cookbook works fine on Linux but on FreeBSD it's creating the groups but not assigning any users to the group.
[2013-04-19 20:39:54 -0400] qhartman: I know a lot of owrk is being done in this space with puppet though
[2013-04-19 20:40:08 -0400] chefnoobie: i figured as much, haven't seen any other deployments of chef to compare. thanks for the info qhartman
[2013-04-19 20:41:03 -0400] qhartman: chefnoobie, sure thing. It would be an interesting project to make a cookbook for doing such work though
[2013-04-19 20:41:05 -0400] yfeldblum: chefnoobie, deploying/configuring network equipment? or deploying/configuring servers that have to know about the network equipment?
[2013-04-19 20:41:57 -0400] chefnoobie: actually in the process of migrating from puppet to chef
[2013-04-19 20:42:16 -0400] |rt|: chefnoobie: that's something that we'll need to figure out here at work as well eventually
[2013-04-19 20:42:20 -0400] chefnoobie: but was just curious on how others were handling the networking equipment
[2013-04-19 20:42:36 -0400] behemphi: @chefnoobie there _has_ to be a Swedish Chef joke in that somewhere!
[2013-04-19 20:42:42 -0400] Kzim: can i trigger a notify when a file content change please
[2013-04-19 20:42:48 -0400] chefnoobie: lol
[2013-04-19 20:43:57 -0400] |rt|: chefnoobie: one idea that's been tossed around here is to use expect scripts
[2013-04-19 20:44:24 -0400] chefnoobie: interesting
[2013-04-19 20:45:04 -0400] nlloyds: Kzim: You can use notifications with file resources, so, if you're managing the file or template with a recipe then yes.
[2013-04-19 20:45:17 -0400] |rt|: chefnoobie: but we are a ways off from having to deal with the networking bits in our deployment of chef
[2013-04-19 20:45:29 -0400] chefnoobie: gotcha
[2013-04-19 20:46:03 -0400] |rt|: chefnoobie: I'm hoping to find some people who have been doing that at chefconf to see what solutions others have come up with
[2013-04-19 20:46:32 -0400] chefnoobie: ah coming soon in SF April
[2013-04-19 20:46:40 -0400] |rt|: it's next week
[2013-04-19 20:46:56 -0400] |rt|: but even Juniper's Puppet integration is a bit weak
[2013-04-19 20:47:11 -0400] |rt|: it currently only supports very basic port configuration
[2013-04-19 20:47:57 -0400] |rt|: our configurations are heavy on routing and filters here
[2013-04-19 20:54:10 -0400] pwf: so encrypted data bags... if someone gets into my server they don't get the secrets right?
[2013-04-19 20:54:27 -0400] pwf: but if they're in my server can't they just add a recipe to a machine that makes it upload the data bag key somewhere?
[2013-04-19 20:55:14 -0400] jstallard: the data bag key shouldn't be deployed using chef, I'd think
[2013-04-19 20:55:43 -0400] pwf: but i mean it needs to be on the clients right?
[2013-04-19 20:55:58 -0400] jstallard: the ones that need it, yeah
[2013-04-19 20:56:05 -0400] pwf: and if they have the server they can just configure it to tell the clients to upload their key to the attacker's server somewhere
[2013-04-19 20:56:15 -0400] jstallard: but if it's in a cookbook, that all clients can access, what's the point?
[2013-04-19 20:57:28 -0400] pwf: if someone compromises my chef server, how can my encrypted data bags be safe if the attacker can just make the clients upload their data bag key by adding a recipe telling them to do that?
[2013-04-19 20:58:04 -0400] jstallard: oh, I see what you're saying. yeah, I think you're right
[2013-04-19 20:58:45 -0400] siezer: pwf that's why you have to manage your databag secrets out of band of chef
[2013-04-19 20:59:21 -0400] siezer: and yes, if they compromise your server, they can get at the secrets.
[2013-04-19 20:59:21 -0400] jstallard: siezer: his point is that if the chef server is compromised, it could simply add a recipe to the run list of a node that has the key installed that makes that node upload the key somewhere
[2013-04-19 20:59:42 -0400] siezer: ~>
[2013-04-19 21:00:05 -0400] pwf: say i compromise a chef server, and grep the code for any recipes that access an encrypted data bag. in the very next line, i ask that very same recipe to upload the data bag key that's in memory to me
[2013-04-19 21:00:18 -0400] pwf: wait 30 minutes, profit
[2013-04-19 21:01:17 -0400] siezer: indeed they could
[2013-04-19 21:01:21 -0400] subsume: so it seems like hosted chef doesn't play nice aka has no connection to github chef repo
[2013-04-19 21:01:25 -0400] subsume: and no hooks either
[2013-04-19 21:01:51 -0400] siezer: chef-server is an artifact repository and publishing platform (for your cookbooks)
[2013-04-19 21:02:08 -0400] siezer: with an authentication system and an indexer / search API
[2013-04-19 21:03:03 -0400] siezer: so check out stuff out of git, "build" an artifact, and install it into chef-server
[2013-04-19 21:03:23 -0400] siezer: or svn, or cvs, or perforce, or whatever
[2013-04-19 21:04:22 -0400] |rt|: I would say that you have to protect your chef server as a critical part of your infrastructure....just like any repos that you own.  But why would any IP that's not part of your network be able to access your chef server.
[2013-04-19 21:04:37 -0400] Kzim: can i trigger a notify when a file content change please ?
[2013-04-19 21:05:48 -0400] nlloyds: subsume: If you fork opscode's chef-repo, it has rake tasks (run rake -T to see a list) to help upload things to the chef server. Those are mostly wrappers around knife commands, which you use to interact with the chef server
[2013-04-19 21:05:49 -0400] siezer: Kzim of course... just put notifies, :action 'resource_type[resource_name]' as a parameter on your file/template resource
[2013-04-19 21:06:28 -0400] Kzim: it's not a template or a cookbook_file :( it's just a value on a file that is not managed by chef :(
[2013-04-19 21:08:00 -0400] Kzim: siezer, is that possible ?
[2013-04-19 21:08:21 -0400] siezer: nope, it'll need to be managed by chef
[2013-04-19 21:08:37 -0400] siezer: what do you mean "value on a file"
[2013-04-19 21:11:59 -0400] Kzim: i have a version number in a text file. if this version change i need to notify a deploy and a restart
[2013-04-19 21:12:25 -0400] siezer: you'll have to manage the file with chef
[2013-04-19 21:13:17 -0400] ivey: you could read the contents of the file in a ruby_block and compare to an attribute to detect changes
[2013-04-19 21:13:34 -0400] ivey: but you're going the long way around to solve whatever root problem you're trying to solve
[2013-04-19 21:14:01 -0400] |rt|: I'd just keep a copy of the md5 sum and mtime in a file in /tmp and trigger something to happen anytime that changes
[2013-04-19 21:14:23 -0400] |rt|: or in an attribute
[2013-04-19 21:14:43 -0400] |rt|: would probably be a better place to keep the mtime and md5
[2013-04-19 21:15:10 -0400] Kzim: in a node attribute ?
[2013-04-19 21:15:13 -0400] Kzim: why not
[2013-04-19 21:15:26 -0400] |rt|: if chef doesn't care about the entire contents of the file i wouldn't store the whole file in the node attributes....could be heavy
[2013-04-19 21:15:53 -0400] |rt|: md5 and mtime should be enough
[2013-04-19 21:16:08 -0400] Kzim: |rt|, i see. also can a definition trigger a notify ?
[2013-04-19 21:16:16 -0400] Kzim: i'll do that
[2013-04-19 21:16:38 -0400] |rt|: I've been using Chef for a month now so not sure about triggering a notify
[2013-04-19 21:16:41 -0400] |rt|: not had to do that yet
[2013-04-19 21:19:38 -0400] nebrera_: helllo
[2013-04-19 21:20:25 -0400] nebrera_: I have two nodes. how could I see which one was registered before into chef-server in my recipie ?
[2013-04-19 21:21:11 -0400] Kzim: |rt|, thank you
[2013-04-19 21:21:18 -0400] subsume: i got knifes
[2013-04-19 21:22:53 -0400] chefnoobie: what's the purpose to see that it's registered previously, nebrera?
[2013-04-19 21:27:12 -0400] gchristensen: when I use "role:database-slave OR role:database-trail" in a recipe it only returns nodes of the database-trail role, however when I search for that on the commandline with knife, it returns both types. Any suggestions?
[2013-04-19 21:28:05 -0400] nlloyds: gchristensen: Are those roles directly in the run list or nested somewhere?
[2013-04-19 21:28:20 -0400] gchristensen: directly in the run list
[2013-04-19 21:29:27 -0400] nlloyds: gchristensen: what happens if you use "roles" rather than "role"? I always use "roles", because they behave a little differently.
[2013-04-19 21:29:46 -0400] gchristensen: roles:database-slave OR roles:database-trail?
[2013-04-19 21:29:55 -0400] nlloyds: right
[2013-04-19 21:30:21 -0400] gchristensen: let's find out :)
[2013-04-19 21:31:59 -0400] nlloyds: gchristensen: though search in a recipe and knife search node should return the same results, but it's worth a shot I suppose.
[2013-04-19 21:32:49 -0400] gchristensen: nlloyds: that doesn't seem to have any effect
[2013-04-19 21:32:57 -0400] nlloyds: hnn
[2013-04-19 21:32:59 -0400] nlloyds: hmm
[2013-04-19 21:33:11 -0400] Kzim: can i push a notifie somewhere in a definition and then grab it anywhere else to restart a service please ?
[2013-04-19 21:33:58 -0400] subsume: When the docs on knife-linode say "knife[:linode_api_key] = "Your Linode API Key""
[2013-04-19 21:34:09 -0400] subsume: do they really mean add an entry in knife.rb that's literally:
[2013-04-19 21:34:12 -0400] subsume: linide_api_key = "somekey"
[2013-04-19 21:34:28 -0400] subsume: or is the previous one literally correct
[2013-04-19 21:34:36 -0400] nlloyds: subsume: The previous.
[2013-04-19 21:35:01 -0400] gchristensen: nlloyds: roles vs. role return the same nodes on the commandline, however different results on the server
[2013-04-19 21:35:48 -0400] subsume: this business isn't working
[2013-04-19 21:37:02 -0400] nlloyds: gchristensen: strange.
[2013-04-19 21:37:42 -0400] cjerdonek: question: is there a way to get a list of the OS's available for the opscode quick-start? https://learnchef.opscode.com/quickstart/converge/
[2013-04-19 21:37:52 -0400] gchristensen: nlloyds: I agree :P
[2013-04-19 21:37:56 -0400] siezer: remember that you're searching json documents (node objects) that are indexed by chef-server.
[2013-04-19 21:38:27 -0400] siezer: when chef-client sucessfully finishes a run, it will update its like of "roles" in that field of the node object
[2013-04-19 21:39:02 -0400] siezer: I like a pattern of setting a tag or a namespaced node attribute from a recipe and searching for that, rather than for roles, personally
[2013-04-19 21:39:46 -0400] nebrera_: chefnoobie, I do need to know what node was registered previously because I need to assign an index to each valuye
[2013-04-19 21:39:52 -0400] nebrera_: to each node sorr
[2013-04-19 21:39:55 -0400] nebrera_: sorry
[2013-04-19 21:40:15 -0400] nlloyds: cjerdonek: I think the quick start is only meant to be done with the info provided, but you can use chef with many OSs
[2013-04-19 21:40:34 -0400] nebrera_: and I set the index for the hostname for example the order can totally change when I add one node to the cluster
[2013-04-19 21:40:43 -0400] nlloyds: cjerdonek: However, there should be a way to find a list of base boxes, muse a sec
[2013-04-19 21:40:48 -0400] nlloyds: just a sec
[2013-04-19 21:41:42 -0400] cjerdonek: thanks nlloyds. though i just found this: http://wiki.opscode.com/pages/viewpage.action?pageId=16089127
[2013-04-19 21:41:59 -0400] cjerdonek: it says, "Opscode is no longer maintaining Vagrant boxes as we do not widely use Vagrant internally. You can use the following instructions to build your own Vagrant boxes with the latest version of Chef installed using Veewee."
[2013-04-19 21:42:08 -0400] nlloyds: cjerdonek: You might also want to try https://github.com/schisamo/vagrant-omnibus , which will let you have chef installed on any box
[2013-04-19 21:42:59 -0400] nlloyds: cjerdonek: There are also some on https://github.com/opscode/bento#current-baseboxes , but I don't think they are being updated
[2013-04-19 21:43:28 -0400] cjerdonek: thx. one more question: for local development, is there any reason not to create a corresponding node on hosted opscode?
[2013-04-19 21:44:11 -0400] cjerdonek: that doesn't seem to be done in the quick-start
[2013-04-19 21:44:12 -0400] siezer: what the
[2013-04-19 21:44:15 -0400] nlloyds: cjerdonek: If you're bootstrapping vagrant with the chef-client provider, it will create a node on the chef server
[2013-04-19 21:44:20 -0400] siezer: we totally use it internally
[2013-04-19 21:44:28 -0400] cjerdonek: i see, thanks
[2013-04-19 21:44:50 -0400] siezer: https://github.com/opscode/bento
[2013-04-19 21:44:52 -0400] behemphi: Dear Jesse Robbins, can we ahve some of these at ChefConf:  https://pbs.twimg.com/media/BIPr6mdCIAAymNm.jpg:large
[2013-04-19 21:44:58 -0400] nlloyds: cjerdonek: Also note that the info on wiki.opscode.com is likely out of date or wrong
[2013-04-19 21:45:13 -0400] behemphi: Yours Truly, Boyd
[2013-04-19 21:45:25 -0400] cjerdonek: okay, i'll make a note of that
[2013-04-19 21:46:18 -0400] nlloyds: siezer: The bento boxes work fine, but jtimberman was on here the other day talking about vagrant-omnibus, and, the bento boxes only have 11.2, so, obviously they aren't 100% up to date.
[2013-04-19 21:47:03 -0400] siezer: yea
[2013-04-19 21:47:36 -0400] siezer: so basically the future of vagrant boxes are to let the vendors supply plugins for their product
[2013-04-19 21:47:48 -0400] siezer: so no puppet/chef/whatever baked in
[2013-04-19 21:48:33 -0400] siezer: makes sense with cloud providers... AWS/Joyent/Rackspace/whatever
[2013-04-19 21:48:33 -0400] nlloyds: siezer: I think that might be the case.
[2013-04-19 21:49:08 -0400] siezer: so you'd want to use the Canonical provided Ubuntu AMI, the Centos provided centos AMI, the Opscode provided Vagrant plugin, etc
[2013-04-19 21:49:21 -0400] gansbrest: hi. I'm playing around with knife ec2 plugin and was wondering if there is a way to create multiple machines simultaneously ?
[2013-04-19 21:49:56 -0400] siezer: gansbrest multiple knife commands in a text file... cat file | parallel
[2013-04-19 21:50:06 -0400] siezer: or spiceweasel | parallel
[2013-04-19 21:52:27 -0400] nlloyds: siezer: is parallel part of moreutils?
[2013-04-19 21:57:40 -0400] Kzim: can i set a global variable that can be read from the next recipe ?
[2013-04-19 21:58:06 -0400] gansbrest: and if I need output I just do cat file | parallel > file.out  ?
[2013-04-19 21:58:25 -0400] nlloyds: Kzim: No, but you can set an attribute, which would be a better idea.
[2013-04-19 21:59:19 -0400] Kzim: nlloyds, it will stick on the node :(
[2013-04-19 22:00:03 -0400] Kzim: nlloyds, i just want my definition the tell a recipe to restart a service. can definition return some value ?
[2013-04-19 22:01:28 -0400] nebrera_: <chefnoobie>, is possible to detect the registered time ?
[2013-04-19 22:02:31 -0400] nlloyds: Kzim: Not sure about that, but there might be better ways to accomplish what you're trying to do.
[2013-04-19 22:02:45 -0400] gchristensen: nlloyds: I figured it out: the nagios cookbook was adding AND chef_environment:... to my query, messing up the boolean logic
[2013-04-19 22:03:10 -0400] subsume: I feel like I am missing something here: https://github.com/opscode/knife-linode
[2013-04-19 22:03:20 -0400] subsume: I can successfully grab a list of my servers using my key on the command line
[2013-04-19 22:03:35 -0400] Kzim: nlloyds, i'm sure of it but how :(
[2013-04-19 22:03:37 -0400] nlloyds: gchristensen: ah, makes sense. That wouldn't happen if you set the multiple environments attribute, right?
[2013-04-19 22:03:51 -0400] subsume: adding knife[':linode_api_key'] = "Asdfasdfasdfasdf" to my knife.rb gives me an error ERROR: You did not provided a valid 'Linode API Key' value.
[2013-04-19 22:04:13 -0400] subsume: derp
[2013-04-19 22:04:15 -0400] subsume: single quotes fail
[2013-04-19 22:04:43 -0400] nlloyds: Kzim: What is it you're trying to do?
[2013-04-19 22:06:37 -0400] Kzim: nlloyds, i have a definition that deploy (dl and unzip) a package. this definition check if the version is new before. i would like to restart the service after the new package is deployed. but it could be any services. so i wanted the definition to throw a signal or something so that the recipe that call this definition can restart the service
[2013-04-19 22:06:46 -0400] Kzim: i'm ot sure this was clear :)
[2013-04-19 22:06:51 -0400] gchristensen: nlloyds: correct, but also wrapping my query with () fixed it (something, I suspect the cookbook should already be doing.0
[2013-04-19 22:08:57 -0400] nlloyds: Kzim: Can you do a `notifies :restart, 'service[my_service]'` on the resource that you want to make the service restart?
[2013-04-19 22:09:45 -0400] Kzim: nlloyds, notifies has to be in a template for something no ? i can just send a notifies like that yes ?
[2013-04-19 22:11:37 -0400] nlloyds: Kzim: notifies works in any resource. You can think of a definition as a collection of resources, so you can't do a notify directly on the definition (I don't think), but you can do it on any resource within the definition
[2013-04-19 22:14:47 -0400] jmickle: Hey guys getting 502's on api
[2013-04-19 22:15:07 -0400] jmickle: actually on knife upload sorry
[2013-04-19 22:16:28 -0400] Kzim: nlloyds, thank i'm trying it !
[2013-04-19 22:20:51 -0400] Kzim: nlloyds, i pass "service[myinit]" to my definition and do a notifies :restart, params[:callback], :delayed but this doesn't work :(
[2013-04-19 22:21:38 -0400] nlloyds: Kzim: In which resource are you doing the notifies?
[2013-04-19 22:22:16 -0400] Kzim: file
[2013-04-19 22:22:25 -0400] Kzim: nlloyds, when i delete a file at the end
[2013-04-19 22:22:28 -0400] jmickle: ERROR: bad gateway
[2013-04-19 22:22:30 -0400] jmickle: Response: <html>
[2013-04-19 22:22:30 -0400] jmickle: <head><title>502 Bad Gateway</title></head>
[2013-04-19 22:22:31 -0400] jmickle: <body bgcolor="white">
[2013-04-19 22:22:33 -0400] jmickle: <center><h1>502 Bad Gateway</h1></center>
[2013-04-19 22:22:34 -0400] jmickle: <hr><center>nginx</center>
[2013-04-19 22:22:35 -0400] jmickle: </body>
[2013-04-19 22:22:36 -0400] jmickle: </html>
[2013-04-19 22:23:10 -0400] nlloyds: Kzim: Can you gist or paste bin the code?
[2013-04-19 22:23:46 -0400] nlloyds: jmickle: Not seeing anything on status.opscode.com. You could try tweeting or emailing opscode to let them know in case nobody from there has seen it on the chat yet.
[2013-04-19 22:23:55 -0400] nlloyds: jmickle: hosted chef, right?
[2013-04-19 22:24:00 -0400] jmickle: yep
[2013-04-19 22:24:01 -0400] Kzim: nlloyds, hold on , on a remote_file resource it work
[2013-04-19 22:24:53 -0400] Kzim: nlloyds, everything work great ! thanks !
[2013-04-19 22:25:41 -0400] nlloyds: Kzim: no prob
[2013-04-19 22:47:01 -0400] paigeat_: the slick, dazzling vaneer of the 1980s
[2013-04-19 22:49:25 -0400] coderanger: Hosted Chef is seeing an increased error rate, status post should be up now-ish
[2013-04-19 22:49:53 -0400] navid_: Anyone know how I can use omnibus installer to install an older version of chef-client. 11.4.0 seems to have a memory leak
[2013-04-19 22:50:02 -0400] nlloyds: jmickle: Nice work ;)
[2013-04-19 22:50:11 -0400] flaccid: navid_: use the -v option with the script
[2013-04-19 22:50:34 -0400] jmickle: nlloyds: what you mean?
[2013-04-19 22:50:38 -0400] navid_: thanks. know how I can find out what the latest version of 10.x is?
[2013-04-19 22:50:57 -0400] flaccid: navid_: goto the download page on the site which will show list in dropdown
[2013-04-19 22:51:20 -0400] nlloyds: jmickle: You came in here reporting the problem and it's now been acknowledged and is being worked on.
[2013-04-19 22:51:40 -0400] jmickle: nlloyds: haha well this is an ongoing problem lately :( I just hope we can resolve them we are starting to get 502's every couple hours lately
[2013-04-19 22:52:06 -0400] flaccid: navid_: i made this from that https://github.com/flaccid/cookbooks/blob/master/cookbooks/chef/metadata.rb#L20 but i don't know if its up to date atm..
[2013-04-19 22:52:21 -0400] jmickle: has anyone made the switch from hosted chef -> private chef?
[2013-04-19 22:58:33 -0400] nlloyds: jmickle: Have you been talking to opscode support about your problems? If it's happening to you it could be affecting others as well.
[2013-04-19 22:59:56 -0400] jmickle: nlloyds: yeah I've been in contact with them
[2013-04-19 23:03:47 -0400] raggi: hwo do you get a backtrace out of knife?
[2013-04-19 23:03:50 -0400] raggi: (a full backtrace)
[2013-04-19 23:04:12 -0400] navid_: flaccid: thanks
[2013-04-19 23:09:53 -0400] coderanger: jmickle: OHC should be back on track
[2013-04-19 23:10:11 -0400] jmickle: thank you

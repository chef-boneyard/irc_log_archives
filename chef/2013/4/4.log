[2013-04-04 00:01:21 -0400] anthroprose: anyone know why my chef-solo is leaving defunct zombie around processes like it's actually the armageddon?
[2013-04-04 00:01:37 -0400] anthroprose: it's essentially forcing a restart *every* chef-solo run
[2013-04-04 00:35:44 -0400] context: hi. im learning chef and reading stuff on nathenharvey.com ; trying to run the omnibus-updater recipe it fails to generate a stringto get a file. and im using the opscode-ubuntu-12.04
[2013-04-04 00:37:12 -0400] zts: context: is it this error? https://github.com/hw-cookbooks/omnibus_updater/issues/15
[2013-04-04 00:37:37 -0400] context: yes
[2013-04-04 00:37:52 -0400] context: haha should have checked tickets :
[2013-04-04 00:37:53 -0400] context: :x
[2013-04-04 00:38:05 -0400] zts: context: I only know because that got me the other day :)
[2013-04-04 00:39:02 -0400] context: thnx
[2013-04-04 00:46:15 -0400] context: zts: thank you
[2013-04-04 00:47:17 -0400] zts: context: you're welcome!
[2013-04-04 01:01:40 -0400] context: is it natural for cookbooks to just not work
[2013-04-04 01:02:09 -0400] context: now mongodb dont work
[2013-04-04 01:04:06 -0400] yfeldblum: context, of course
[2013-04-04 01:05:14 -0400] yfeldblum: context, especially since the mongodb cookbooks seem rather complex and make many assumptions which probably don't really hold in many cases
[2013-04-04 01:07:29 -0400] context: yeah found ticket involving it
[2013-04-04 01:07:48 -0400] context: mongodb recipe doesnt support notifies in chef 11.x
[2013-04-04 01:20:36 -0400] context: so i guess a lot of getting the perfect  cookbook is a lot of trial and error
[2013-04-04 01:23:26 -0400] yfeldblum: context, or normal programming
[2013-04-04 01:23:43 -0400] context: that too i guess
[2013-04-04 01:24:11 -0400] context: yfeldblum: i am new but its almost 'whats the point of the community cookbooks' if none work :X
[2013-04-04 01:24:24 -0400] context: thay maybe partial blame is on vagrant
[2013-04-04 01:24:32 -0400] context: i seem to be getting a little further now i think
[2013-04-04 01:24:47 -0400] yfeldblum: context, primarily: as examples
[2013-04-04 01:24:58 -0400] yfeldblum: context, secondarily: many of them will work, especially the simpler ones
[2013-04-04 01:25:13 -0400] context: gotcha
[2013-04-04 01:27:50 -0400] context: and the stacktrace makes /no/ sense :x
[2013-04-04 01:29:35 -0400] context: yfeldblum: is there a way to run a single recipe in chef on a machine locally (its setup on hosted chef)
[2013-04-04 01:30:10 -0400] yfeldblum: contempt, you can use chef-shell to do that, or so i'm told
[2013-04-04 01:30:53 -0400] cwj: maybe chef-apply if you are on chef 11
[2013-04-04 01:30:58 -0400] cwj: havent tried it myself
[2013-04-04 01:31:07 -0400] yfeldblum: context, many people test their recipes in vagrant
[2013-04-04 01:34:04 -0400] context: yeah thats what im doing, im getting a http forbidden request 403 crap
[2013-04-04 01:34:18 -0400] context: which isn't relating to any specific recipe i dont think
[2013-04-04 01:35:28 -0400] context: ok i was right it is /not/ apart of any specific recipe
[2013-04-04 01:36:20 -0400] context: apparently its in update_node
[2013-04-04 01:36:31 -0400] context: node trying to update itself with hosted-chef
[2013-04-04 01:39:59 -0400] basic`: i'm having trouble getting my chef_handler to only act as an exception handler and not as a report handler anyone know how to do this?
[2013-04-04 01:40:42 -0400] basic`: http://pastebin.osuosl.org/1600/
[2013-04-04 01:41:01 -0400] basic`: obviously I'm doing this wrong, but what part?
[2013-04-04 01:44:18 -0400] context: think i had issues in permissions on hosted-chef
[2013-04-04 01:46:03 -0400] context: kk. chef is pretty awesome
[2013-04-04 02:10:02 -0400] Spight: It is.
[2013-04-04 02:10:40 -0400] basic`: anyone know how to fix my mail handler issue?
[2013-04-04 02:17:14 -0400] basic`: ah-ha
[2013-04-04 02:17:15 -0400] basic`: supports :exception => true, :report => false
[2013-04-04 02:17:23 -0400] basic`: didn't see that documented
[2013-04-04 02:28:44 -0400] Ogilvyone: Hello
[2013-04-04 02:32:17 -0400] dillyjay: Best practice for installing a program in the path? Execute \ command "[install cmd] && mv #{thing} $PATH" \ end.       ?
[2013-04-04 02:46:41 -0400] silk: it seems that Chef::RunContext.new() now (somewhere between 10.8 and 10.22) requires 3 arguments rather than 2, is there some documentation somewhere regarding the change?
[2013-04-04 03:43:34 -0400] denken: https://github.com/fnichol/chef-user#-usage ... so, where exactly is node['users'] supposed to be defined?
[2013-04-04 03:43:38 -0400] denken: its not clear from reading that
[2013-04-04 03:46:29 -0400] evxd_: denken: you define node['users'] yourself in the node attributes
[2013-04-04 03:50:18 -0400] denken: i take that to mean in the role's attributes that are assigned to whatever node
[2013-04-04 03:51:21 -0400] evxd_: denken: you can assign attributes in a number of ways, via the role is certainly one
[2013-04-04 03:51:42 -0400] denken: interesting
[2013-04-04 03:56:35 -0400] Ogilvyone: I'm looking for a way to create image (EBS AMI) using chef...is there any way to do it?
[2013-04-04 03:57:06 -0400] evxd_: Ogilvyone: not sure about Chef, but have you looked at something like veewee?
[2013-04-04 04:05:01 -0400] Ogilvyone: do you have a very good tutorial for a beginner?
[2013-04-04 04:53:30 -0400] maek: anyone know what to look for chef chef-expanderctl queue-depth is backed up? solr and rabbit appear to be running fine. expander.log is empty
[2013-04-04 04:55:35 -0400] maek: hrm
[2013-04-04 04:55:39 -0400] maek: restarting expander ftw
[2013-04-04 05:36:13 -0400] c_t: uh-oh, BryanWB is here
[2013-04-04 05:36:19 -0400] c_t: must be getting close to bedtime
[2013-04-04 05:36:23 -0400] BryanWB: yup :)
[2013-04-04 05:36:28 -0400] BryanWB: sup sup chefs!
[2013-04-04 05:38:37 -0400] c_t: BryanWB: had my first fun with bento earlier today
[2013-04-04 05:41:43 -0400] maek: whats bento?
[2013-04-04 05:44:13 -0400] c_t: thing for building vagrant boxes
[2013-04-04 05:46:20 -0400] maek: like a wrapper for veewee?
[2013-04-04 05:46:22 -0400] maek: c_t: ty
[2013-04-04 07:20:02 -0400] Bhanu_: Hello
[2013-04-04 09:22:47 -0400] bigmyx1: I am installing the new management workstation, after installing chef gem I get this error while running knife :
[2013-04-04 09:24:22 -0400] bigmyx1: v
[2013-04-04 09:24:23 -0400] bigmyx1: https://gist.github.com/anonymous/5309019
[2013-04-04 09:24:32 -0400] bigmyx1: any ideas  ?
[2013-04-04 09:27:20 -0400] bigmyx1: trying to get cucumber-chef running, but the JSON dependancies getting me freakout
[2013-04-04 09:33:12 -0400] Sgoettschkes: Hi, does anybody has any suggestions/articles/blogs about bootstraping chef on a set-up production server?
[2013-04-04 09:36:26 -0400] Sgoettschkes: I have set up chef-server with a few clients, everythings working fine. Now I am thinking about using chef for our production server also, but I'm a bit worried because everything is set up
[2013-04-04 09:36:37 -0400] Sgoettschkes: Basically I don't know if it's a good idea to do it
[2013-04-04 09:50:57 -0400] pikesley: Dude
[2013-04-04 09:51:04 -0400] pikesley: Start small
[2013-04-04 09:51:17 -0400] pikesley: Put a single config file or something in the hands of Chef
[2013-04-04 09:51:21 -0400] pikesley: On that node
[2013-04-04 09:51:36 -0400] pikesley: It *is* a good idea
[2013-04-04 09:51:40 -0400] pikesley: But also terrifying
[2013-04-04 09:52:47 -0400] dunc: :)
[2013-04-04 09:53:38 -0400] zytta: Silly question: I have installed 11.6 server via the omnibus installer. How do I get 'knife' back to configure it properly? :)
[2013-04-04 09:54:34 -0400] zytta: I already have a 10.18.2 server up and running, this is a newly created machine where I am trying to get 11.6 up and running- so I can get all my recipes to work with 11.x
[2013-04-04 10:33:12 -0400] bigmyx: any cucumber-chef users out there ?
[2013-04-04 10:37:30 -0400] bigmyx: just trying to get started with it, hope it will worth it, up till now I user vagrant doing the manual tests with chef ...
[2013-04-04 10:38:00 -0400] bigmyx: any feedback about it ?
[2013-04-04 10:38:13 -0400] pikesley: 3.0 is coming out RSN
[2013-04-04 10:38:19 -0400] pikesley: I'm still on 2.1
[2013-04-04 10:38:40 -0400] bigmyx: oh  will take a look
[2013-04-04 10:39:14 -0400] bigmyx: using it for a long time  ?
[2013-04-04 10:39:46 -0400] pikesley: ~ a year
[2013-04-04 10:40:28 -0400] bigmyx: wow
[2013-04-04 10:40:30 -0400] bigmyx: great
[2013-04-04 10:40:42 -0400] bigmyx: assume u happy with it ?
[2013-04-04 10:41:00 -0400] bigmyx: are there any other lib like this  ?
[2013-04-04 10:42:08 -0400] pikesley: maybe
[2013-04-04 10:42:12 -0400] pikesley: https://github.com/Atalanta/cucumber-chef/pulls/pikesley?direction=desc&page=1&sort=created&state=closed <- is me
[2013-04-04 10:44:56 -0400] bigmyx: Oh man, I just was reading your post about JSON dependancies !
[2013-04-04 10:45:06 -0400] bigmyx: damn it was really boring ...
[2013-04-04 10:45:22 -0400] bigmyx: I mean JSON issue
[2013-04-04 10:47:51 -0400] bigmyx: nice work !
[2013-04-04 10:49:31 -0400] bigmyx: will you be in the upcoming ChefConf ?
[2013-04-04 10:51:33 -0400] pikesley: Doubt it
[2013-04-04 10:51:39 -0400] pikesley: Unless they're coming to London...
[2013-04-04 10:55:43 -0400] chef651: is that any document regardin to nagious clint side  nrpe manage by chef cookbook....
[2013-04-04 10:57:15 -0400] bigmyx: chef651: is that what you mean : http://community.opscode.com/cookbooks/nagios
[2013-04-04 11:02:00 -0400] chef651: <bigmyx> thanks
[2013-04-04 11:11:38 -0400] Mez: Ok, so I have a bit of a recipe that'll allow us to use a secure password while bootstrapping something with chef-solo, for intent to be used with chef-server (I'm acaully bootstrapping chef-server).  How can I make it reusable (so that I'm not copy pasting a large block in multiple places)
[2013-04-04 11:12:01 -0400] Mez: https://gist.github.com/Mezzle/5113620ca7fcce2da8a7
[2013-04-04 11:17:22 -0400] matti: Mez: Define?
[2013-04-04 11:17:26 -0400] matti: Mez: LWRP
[2013-04-04 11:18:53 -0400] Mez: matti: not sure of what you're asking ?
[2013-04-04 11:20:15 -0400] Mez: oh, yes. a Definition. wtf am I thinking
[2013-04-04 11:21:03 -0400] Mez: What exactly is the difference between a definition and a LWRP ?
[2013-04-04 11:56:02 -0400] Tho_DD: hi...is there a chef client for windows in 64bit version? especially with ruby in 64bit ?
[2013-04-04 12:03:55 -0400] zts: Mez: a definition is like a macro - where you use one in a recipe, you can imagine it being replaced by the contents of the definition
[2013-04-04 12:05:07 -0400] zts: Mez: LWRPs are proper resources and providers, and behave much like the built-in ones (like file and package)
[2013-04-04 12:08:17 -0400] Mez: So, definitions don't work like the built-in ones?
[2013-04-04 12:12:51 -0400] Mez: Ok, so next... how do I make it so a chef-client run can update a data_bag ?
[2013-04-04 12:13:05 -0400] Mez: Does the client need to be an admin?
[2013-04-04 12:13:13 -0400] Mithrandir: yes
[2013-04-04 12:13:21 -0400] Mithrandir: or acl on hosted/private chef
[2013-04-04 12:14:19 -0400] Mez: ohai Mithrandir - VERY long time no speak :)
[2013-04-04 12:14:56 -0400] Mez: and actaully, it doesn't matter. I shouldn't need to put the validation.pem into a data bag anyway :)
[2013-04-04 12:41:17 -0400] knyppeldynan: I'm going crazy here. Trying to rewrite a recipe to work with chef 11. It complains on 'node.riak.delete(:bitcask)', and I can't figure otu what to replace it with.
[2013-04-04 12:43:33 -0400] knyppeldynan: all the examples I find use set, but as far as I've understood this, I want to delete an attribute from a node. (Yes, complete chef-newbie here.)
[2013-04-04 12:51:53 -0400] trilitheus: is anyone using git with application cookbook?  Trying to get the deploy to work from a remote repository through a proxy
[2013-04-04 12:52:35 -0400] trilitheus: I've done a Mixlib::Shellout to set global https.proxy but I think It's trying to deploy before that is set or not picking it up for some reason
[2013-04-04 13:03:03 -0400] railsraider: how do i include a new attributes file from the same recipe?
[2013-04-04 13:03:10 -0400] railsraider: i mean the same cookbook
[2013-04-04 13:06:27 -0400] railsraider: i assume include_attribute
[2013-04-04 13:38:09 -0400] zts: railsraider: I believe all of a cookbook's attributes file are loaded automatically, but you can use include_attribute if you need to ensure they are loaded in a particular order
[2013-04-04 13:39:55 -0400] railsraider: is it possible to do action [:delete, :create] for directory resource?
[2013-04-04 13:40:54 -0400] zts: try it and see
[2013-04-04 13:49:15 -0400] yfeldblum: railsraider, yes; but why?
[2013-04-04 13:50:04 -0400] railsraider: cause i want to delete all the hosts files in the hosts folder for nagios and pull the active hosts y search
[2013-04-04 13:50:16 -0400] railsraider: so essentially delete the folder create it fresh
[2013-04-04 13:50:22 -0400] yfeldblum: railsraider, on every run?
[2013-04-04 13:50:41 -0400] railsraider: yes, i dont run the chef-client everytime
[2013-04-04 13:51:02 -0400] railsraider: but when i do i want to make the hosts in nagios automated by search of chef
[2013-04-04 13:51:26 -0400] railsraider: so if i delete a host i go by what chef search find
[2013-04-04 13:51:40 -0400] railsraider: why? do you have another idea?
[2013-04-04 13:51:48 -0400] railsraider: i'll be happy to hear it
[2013-04-04 13:55:26 -0400] dfrey: anyone know why "knife environment from file production.rb" produces the error "ERROR: ArgumentError: wrong number of arguments (1 for 2)"? I've found that code format mentioned multiple times in the docs
[2013-04-04 13:55:47 -0400] yfeldblum: railsraider, you could manage all the chef-discovered hosts in a single file and simply rewrite the file on each chef-client run
[2013-04-04 13:56:25 -0400] railsraider: like a template?
[2013-04-04 13:57:30 -0400] yfeldblum: railsraider, yes
[2013-04-04 13:58:29 -0400] railsraider: ok, i think my orignal idea was to split them into files so that i'll have a script that delete the file, node  and client from chef, then restart nagios
[2013-04-04 14:03:18 -0400] zts: railsraider: I'm not currently using it myself, but I wrote this to solve that problem: https://github.com/zts/chef-cookbook-managed_directory
[2013-04-04 14:04:17 -0400] railsraider: thanks zts
[2013-04-04 14:04:24 -0400] visit0r: I have a question about attribute files
[2013-04-04 14:04:38 -0400] visit0r: is it possible to only have some load from a cookbook when certain recipes in that cookbook are run?
[2013-04-04 14:04:38 -0400] zts: and it was also for nagios.  Can't remember why I went down that road instead of creating a single file, though
[2013-04-04 14:04:51 -0400] visit0r: for instance, a client/server model
[2013-04-04 14:04:57 -0400] visit0r: if you had a recipe for client and one for server
[2013-04-04 14:05:03 -0400] visit0r: and an attributes file for the client and server
[2013-04-04 14:05:17 -0400] visit0r: is it possible to have the client attributes load only when the client recipe is run?
[2013-04-04 14:05:29 -0400] visit0r: and the server attributes file load only when the server recipe is run?
[2013-04-04 14:06:03 -0400] yfeldblum: visit0r, no
[2013-04-04 14:06:16 -0400] visit0r: hm, ok
[2013-04-04 14:06:27 -0400] visit0r: yfeldblum: have you looked at the Jenkins opscode cookbook?
[2013-04-04 14:06:33 -0400] visit0r: it has an attributes file for server and node
[2013-04-04 14:06:47 -0400] visit0r: and each sets a host name = node['fqdn']
[2013-04-04 14:06:50 -0400] yfeldblum: *all* the attributes files in *all* the cookbooks (in chef-solo) or *all* the resolved cookbooks (in chef-client) are loaded before any recipes are loaded
[2013-04-04 14:07:00 -0400] visit0r: so, I don't understand how the node and server set different fqdn's
[2013-04-04 14:07:09 -0400] yfeldblum: visit0r, i haven't
[2013-04-04 14:07:13 -0400] visit0r: hm
[2013-04-04 14:07:17 -0400] geekbri: visit0r: node['fqdn'] is an ohai automatic attribute
[2013-04-04 14:07:21 -0400] visit0r: yfeldblum: yah, that is what is confusing me
[2013-04-04 14:07:28 -0400] visit0r: right, I understand that
[2013-04-04 14:07:36 -0400] geekbri: well it will be different for each server its run on :)
[2013-04-04 14:07:43 -0400] visit0r: right
[2013-04-04 14:07:49 -0400] visit0r: but if both attribute files are loaded
[2013-04-04 14:07:53 -0400] visit0r: fqdn will be set for both
[2013-04-04 14:08:07 -0400] visit0r: so if the node runs, it will see the server fqdn (as an attribute) to be its own fqdn
[2013-04-04 14:08:10 -0400] visit0r: which doesn't seem right
[2013-04-04 14:08:10 -0400] geekbri: but only one recipe runs on each server?
[2013-04-04 14:08:18 -0400] visit0r: correct, lets say
[2013-04-04 14:08:29 -0400] geekbri: i mean i haven't looked at the cookbook mind you
[2013-04-04 14:08:31 -0400] visit0r: but all attribute files would be loaded, as stated earlier
[2013-04-04 14:08:35 -0400] visit0r: right right
[2013-04-04 14:08:38 -0400] visit0r: its not a huge one
[2013-04-04 14:08:59 -0400] geekbri: all attributes file are loaded, in alphabetical order i believe
[2013-04-04 14:09:11 -0400] visit0r: https://github.com/opscode-cookbooks/jenkins/blob/master/recipes/node_ssh.rb
[2013-04-04 14:09:14 -0400] visit0r: i believe you are correct
[2013-04-04 14:09:30 -0400] visit0r: I dont understand from that recipe (at the top of it)
[2013-04-04 14:09:36 -0400] visit0r: how it gets the right public key from the server
[2013-04-04 14:09:38 -0400] geekbri: which lines?
[2013-04-04 14:09:39 -0400] visit0r: I want to do the same thing
[2013-04-04 14:09:54 -0400] visit0r: lines 25-34
[2013-04-04 14:09:59 -0400] visit0r: I have a client/server install
[2013-04-04 14:10:07 -0400] visit0r: and want to share the servers SSH public key with the client
[2013-04-04 14:10:10 -0400] visit0r: so it can automatically SSH in
[2013-04-04 14:10:30 -0400] visit0r: and wanted to set a node attribute on the server, so the cliente can search for that node and retrive that attribute
[2013-04-04 14:10:38 -0400] geekbri: looks like the server is set in the node attributes, i assume in a role file
[2013-04-04 14:10:41 -0400] visit0r: and store the servers SSH public key into the client's authorized_keys file
[2013-04-04 14:11:13 -0400] visit0r: hmmm... you think?
[2013-04-04 14:11:26 -0400] geekbri: well i mean look at lines 27 and 28
[2013-04-04 14:11:37 -0400] visit0r: I just need my client to know which host to search for so he can retrieve that attribute
[2013-04-04 14:12:22 -0400] visit0r: currently, I was sharing the hostname of the server via the Vagrantfile
[2013-04-04 14:12:30 -0400] visit0r: by passing in JSON attributes
[2013-04-04 14:12:39 -0400] visit0r: but that seems messy
[2013-04-04 14:14:20 -0400] billyoung: visit0r: have you looked at databags for the sshkeys and tags for the node? that may help
[2013-04-04 14:15:04 -0400] visit0r: yeah
[2013-04-04 14:15:14 -0400] visit0r: i am getting rid of a solution to store the SSH key in a databag
[2013-04-04 14:15:25 -0400] visit0r: that requires admin client access, but using node attributes does not
[2013-04-04 14:15:40 -0400] visit0r: tags I havent spent much time on
[2013-04-04 14:25:18 -0400] w6fu: A couple of weeks ago I found some nice knife command to download my entire chef envoronment to .json files, and for the life of me can't remember what it was...
[2013-04-04 14:26:05 -0400] visit0r: knife download?
[2013-04-04 14:26:18 -0400] visit0r: gets cookbooks, environments, roles, nodes, clients
[2013-04-04 14:26:27 -0400] w6fu: I thougt so, but that seems to not download to .json
[2013-04-04 14:31:46 -0400] w6fu: ah, some options in knife.rb http://www.opscode.com/blog/2013/03/12/5106/
[2013-04-04 14:32:58 -0400] Kzim: hello does knife-backup is the best way to backup a chef-server 11 ?
[2013-04-04 14:49:41 -0400] basic`: i'm using omnibus and hitting issues with ruby shadow gem not working for user passwords.  According to my research this gem should already be included in the omnibus install. https://github.com/opscode/omnibus-software/blob/master/config/software/chef.rb#L118
[2013-04-04 14:55:31 -0400] basic`: here's the error i got during the run: http://pastebin.osuosl.org/1603/
[2013-04-04 14:57:20 -0400] visit0r: w6fu: you might be able to specify todownload to json format
[2013-04-04 14:57:39 -0400] visit0r: w6fu: as a flag/param to the knife download command
[2013-04-04 14:57:59 -0400] basic`: i see this was resolved though, yet i still hit the problem: http://tickets.opscode.com/browse/CHEF-2848
[2013-04-04 14:58:18 -0400] basic`: i'm running 11.0.6 on the server
[2013-04-04 15:00:03 -0400] KarlHungus: basic`: is ruby-shadown in the /opt/chef lib dir?
[2013-04-04 15:00:30 -0400] basic`: KarlHungus: it's not, but shouldn't the omni install have failed?
[2013-04-04 15:01:15 -0400] KarlHungus: no, the install just unpacks the build artifact
[2013-04-04 15:01:22 -0400] basic`: hmm
[2013-04-04 15:01:49 -0400] KarlHungus: imoh, the build should have failed, but i dont think there is a health check outside of scanning the resulting files with ldd for external deps
[2013-04-04 15:01:50 -0400] basic`: and to install it i need the Developmental Tools yum group enabled
[2013-04-04 15:02:12 -0400] KarlHungus: where did you get the omnibus package?
[2013-04-04 15:02:15 -0400] basic`: s3
[2013-04-04 15:02:18 -0400] basic`: the official one
[2013-04-04 15:03:17 -0400] KarlHungus: and nothign in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/  for ruby-shadow?
[2013-04-04 15:04:13 -0400] basic`: yeah it wasn't there
[2013-04-04 15:04:25 -0400] basic`: i just manually installed it with chef_gem
[2013-04-04 15:04:33 -0400] KarlHungus: odd
[2013-04-04 15:04:42 -0400] basic`: i think it's because the build tools weren't installed
[2013-04-04 15:04:46 -0400] basic`: so how could it have built itself?
[2013-04-04 15:05:01 -0400] basic`: default centos w/o gcc, etc.
[2013-04-04 15:05:19 -0400] KarlHungus: omnibus doesnt build anything
[2013-04-04 15:05:22 -0400] basic`: hmm
[2013-04-04 15:05:31 -0400] KarlHungus: its prebuilt and linked to its own set of deps
[2013-04-04 15:08:54 -0400] basic`: KarlHungus: hmm, that's odd
[2013-04-04 15:09:13 -0400] basic`: it looks like it does a gem install
[2013-04-04 15:09:23 -0400] basic`: if you look at the github url i pasted
[2013-04-04 15:09:44 -0400] basic`: which would fail if things were missing on the system
[2013-04-04 15:09:53 -0400] KarlHungus: basic`: let spin a ubuntu omnibus build really quick and look for you
[2013-04-04 15:09:55 -0400] basic`: but this is just their internal build system that runs the code?
[2013-04-04 15:10:00 -0400] dfrey: can knife bootstrap install chef-client on a vm?
[2013-04-04 15:10:02 -0400] basic`: KarlHungus: i'm using centos
[2013-04-04 15:10:12 -0400] basic`: 6.4
[2013-04-04 15:10:18 -0400] KarlHungus: centos. bah. i dont have those isos handly
[2013-04-04 15:10:21 -0400] basic`: but it shouldn't make a difference i wouldn't thing
[2013-04-04 15:10:21 -0400] KarlHungus: handy*
[2013-04-04 15:10:25 -0400] basic`: think*
[2013-04-04 15:10:27 -0400] basic`: hehe :)
[2013-04-04 15:11:13 -0400] dfrey: i feel like it definitely does, but how does knife know not to make the machine its client, just the vm running on it
[2013-04-04 15:11:24 -0400] basic`: probably should've gone with ubuntu, would have saved coderanger from some annoying hacks getting put in place on our images ;)
[2013-04-04 15:11:33 -0400] w6fu: visit0r: thank you
[2013-04-04 15:12:32 -0400] basic`: dfrey: i dont think i follow your question
[2013-04-04 15:12:33 -0400] KarlHungus: basic`: doesnt matter to me. i'm all freebsd, just happen to have some ubuntu vms in the build system
[2013-04-04 15:12:39 -0400] visit0r: basic`: of course, it worked then?
[2013-04-04 15:13:02 -0400] basic`: visit0r: ?
[2013-04-04 15:15:23 -0400] dfrey: basic: i want to install a chef-client on a machine remotely. i want to install it on a vm running on that machine. how do i specify that?
[2013-04-04 15:15:25 -0400] basic`: visit0r: i manually installed the gem and the development tools (gcc, libs, etc.) so that the gem would build properly, and now it works
[2013-04-04 15:15:48 -0400] basic`: dfrey: does the vm listen on a different ssh port?
[2013-04-04 15:15:55 -0400] basic`: or ip all together?
[2013-04-04 15:16:28 -0400] basic`: on your workstation have a look at 'knife help bootstrap'
[2013-04-04 15:16:56 -0400] KarlHungus: basic`: i just ran a omnibus chef build for 11.4.0 and can confirm that it does bundle ruby-shadow
[2013-04-04 15:17:08 -0400] basic`: KarlHungus: hmm, maybe it's a bug with the centos build then
[2013-04-04 15:17:10 -0400] KarlHungus: basic`: have you tried the latest 11.4.0?
[2013-04-04 15:17:25 -0400] basic`: i used whatever the latest omnibus installer is
[2013-04-04 15:17:29 -0400] basic`: as of yesterday
[2013-04-04 15:17:33 -0400] basic`: i thought it was 11.0.6?
[2013-04-04 15:17:44 -0400] gleam: their version numbers are weird
[2013-04-04 15:17:51 -0400] dfrey: basic: ah its connecting with ssh. ill just forward the port then. thank you!
[2013-04-04 15:17:52 -0400] KarlHungus: i dont know. i have to build 100% of the crap i run
[2013-04-04 15:17:54 -0400] KarlHungus: :(
[2013-04-04 15:18:10 -0400] basic`: dfrey: you're welcome!
[2013-04-04 15:18:23 -0400] basic`: KarlHungus: hah, well it's not a *huge* deal I was just surprised to error out there
[2013-04-04 15:18:39 -0400] basic`: and i was able to fix it manually during our debugging, so all is well
[2013-04-04 15:19:15 -0400] KarlHungus: basic`: so, 11.4.0 is the latest stable. the omnibus install from http://www.opscode.com/chef/install/ should be installing 11.4.0_1
[2013-04-04 15:20:23 -0400] basic`: KarlHungus: oh yeah, for the client I am running 11.4.0_1
[2013-04-04 15:20:31 -0400] basic`: KarlHungus: for the server it's running 11.0.6
[2013-04-04 15:23:13 -0400] railsraider: in chef 11, would doing this from a recipe node.normal.my_attribute_2 = "value" will save it to the node?
[2013-04-04 15:23:21 -0400] visit0r: does anyone know if you can search for tags?
[2013-04-04 15:23:31 -0400] KarlHungus: basic`: oh, and you're just missing ruby-shadow on the server?
[2013-04-04 15:24:07 -0400] KarlHungus: basic`: fwiw, i have a chef 11 server that i'm demo'ing, built from the knife-server plugin, and it also did not include ruby-shadow
[2013-04-04 15:24:32 -0400] basic`: well the chef-11 client has /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/ruby-shadow-2.1.4/
[2013-04-04 15:24:33 -0400] basic`: hmm
[2013-04-04 15:24:57 -0400] gleam: visit0r: sure. it's part of node
[2013-04-04 15:24:58 -0400] basic`: ohhh, maybe it's knife server bootstrap that caused the issue?
[2013-04-04 15:25:04 -0400] gleam: search it like any other attrib
[2013-04-04 15:25:12 -0400] visit0r: gleam: ah, I see that now, thanks
[2013-04-04 15:25:52 -0400] basic`: KarlHungus: i'm super early on in our build out i've basically been using the server as the first chef node to get out bootstrap process ironed out
[2013-04-04 15:26:11 -0400] basic`: KarlHungus: i'll try building another VM out today and will let you know if ruby-shadow works
[2013-04-04 15:26:21 -0400] railsraider: how do i set normal attributes from a recipe in chef 11 does node.set = value good enough?
[2013-04-04 15:26:50 -0400] gleam: yes
[2013-04-04 15:26:53 -0400] basic`: thanks for your help KarlHungus, greatly appreciated.
[2013-04-04 15:26:54 -0400] gleam: node.set[whatever]
[2013-04-04 15:26:59 -0400] gleam: or node.normal
[2013-04-04 15:27:21 -0400] basic`: KarlHungus: looking at the server omnibus/omnitruck rpm there is *not* a ruby shadow gem included
[2013-04-04 15:27:25 -0400] basic`: so i bet that's the issue
[2013-04-04 15:27:29 -0400] KarlHungus: basic`: i think it will. i suspect chef-server should install that gem too and it simply isnt in the omnibus scripts for chef server
[2013-04-04 15:32:11 -0400] context: anyone have an example of how you go about updating your load balancer if you add a new app-server instance to your cluster
[2013-04-04 15:32:26 -0400] context: is there anyway to automate that or have to 'force' the update to your load balancer ?
[2013-04-04 15:32:48 -0400] context: all the examples i see show bringing your appservers up then the load balancer[s]
[2013-04-04 15:34:12 -0400] railsraider: can someone please help me with this http://pastebin.com/GF0ywSXg i want to set normal attribute on the node
[2013-04-04 15:34:18 -0400] KarlHungus: context: typically, you'll define the load balancers config file as a resource (template, probbly)
[2013-04-04 15:34:20 -0400] yfeldblum: railsraider, why?
[2013-04-04 15:34:38 -0400] KarlHungus: context: then you'll have that template notify the load balancer service resources restart action
[2013-04-04 15:34:46 -0400] railsraider: yfeldblum: i need a way to pull hosts dynamically
[2013-04-04 15:34:52 -0400] railsraider: for nagios
[2013-04-04 15:34:59 -0400] KarlHungus: when the file is templated, use chef search to loacate all app nodes in the cluster and write that to the config
[2013-04-04 15:35:33 -0400] KarlHungus: railsraider: something like search(:node, 'chef_environment:production AND role:my_app_server')
[2013-04-04 15:35:48 -0400] KarlHungus: err. roles, probably, not role since you'll want the expanded role list
[2013-04-04 15:36:07 -0400] railsraider: KarlHungus: right now (previous chef server had) hosts = search(:node, "icinga:host_groups", "X_CHEF_id_CHEF_X asc")
[2013-04-04 15:36:33 -0400] railsraider: because roles are often being override in the run list and thus loosing attributes
[2013-04-04 15:37:22 -0400] KarlHungus: crap. i was responding to context. sorry. i havent fought through attribute precendence changes in chef 11 yet
[2013-04-04 15:37:23 -0400] railsraider: so my previous chef server (hosted chef) had each node manually edited with the node attributes in the normal section for the host_groups
[2013-04-04 15:38:15 -0400] railsraider: now i have my own chef 11 server and i need a smart way to dynamically create hosts in nagios
[2013-04-04 15:38:54 -0400] railsraider: one that will create the host groups fro nagios on chef run
[2013-04-04 15:39:18 -0400] railsraider: yfeldblum im out of ideas :(
[2013-04-04 15:40:18 -0400] yfeldblum: railsraider, your paste is messed up
[2013-04-04 15:40:33 -0400] railsraider: i'll repaste
[2013-04-04 15:40:46 -0400] yfeldblum: railsraider, no i can see it; it's the content that is wrong
[2013-04-04 15:40:48 -0400] visit0r: hmm.... you can't use tag() in a ruby_block ?
[2013-04-04 15:40:56 -0400] yfeldblum: visit0r, no, and there's no reason to
[2013-04-04 15:41:13 -0400] visit0r: fair enough, there is no need to I presume
[2013-04-04 15:41:20 -0400] visit0r: just threw it in there testing some other stuff
[2013-04-04 15:41:27 -0400] visit0r: since logging order is preserved as such
[2013-04-04 15:41:50 -0400] yfeldblum: visit0r, you should only modify the node data at recipe compile time, and never at converge time (which is when ruby_block blocks are executed)
[2013-04-04 15:42:17 -0400] visit0r: yfeldblum: gotcha, sounds like a good rule to live by
[2013-04-04 15:42:19 -0400] visit0r: thanks
[2013-04-04 15:42:25 -0400] Kzim: hi, is there a good practice to run chef-client on a chef11 server ?
[2013-04-04 15:44:04 -0400] railsraider: yfeldblum: what's the right way of doing what i was trying to do
[2013-04-04 15:45:00 -0400] yfeldblum: railsraider, do you know what "node.icinga.host_groups.nil?" does?
[2013-04-04 15:45:12 -0400] yfeldblum: railsraider, and why it doesn't work with "node.set['icinga']['host_groups'] = []"?
[2013-04-04 15:45:39 -0400] yfeldblum: railsraider, do you know why recipes should typically never set normal-level attributes?
[2013-04-04 15:45:46 -0400] railsraider: no
[2013-04-04 15:46:39 -0400] railsraider: i wanted to check if node.icinga.host_groups is not set  and set it to an array
[2013-04-04 15:47:23 -0400] yfeldblum: railsraider, do you understand that "node.icinga.host_groups" and "node.set['icinga']['host_groups']" refer to different things?
[2013-04-04 15:47:24 -0400] railsraider: i have no idea why it should never set normal attributes by a recipe
[2013-04-04 15:47:37 -0400] railsraider: really?
[2013-04-04 15:47:41 -0400] yfeldblum: railsraider, because normal-level attributes are intended for sysadmins from their workstations
[2013-04-04 15:48:18 -0400] railsraider: so i need to do it one by one with node ediut?
[2013-04-04 15:48:35 -0400] railsraider: there goes my weekend
[2013-04-04 15:48:36 -0400] yfeldblum: railsraider, HOW
[2013-04-04 15:48:42 -0400] railsraider: knife node edit
[2013-04-04 15:48:47 -0400] yfeldblum: railsraider, no, use default-level attributes
[2013-04-04 15:49:43 -0400] railsraider: yfeldblum: how do i make sure the values will stick to node attributes and not get removed with the next chef run override
[2013-04-04 15:50:37 -0400] yfeldblum: railsraider, on the next chef run, your recipe ADDS THEM AGAIN
[2013-04-04 15:51:32 -0400] railsraider: ok then theres no need for the hosts = search(:node, "icinga:host_groups", "X_CHEF_id_CHEF_X asc")
[2013-04-04 16:00:10 -0400] context: karlhungus: yeah but im saying say i have 1 lb, 2 app... im getting high load so i need to add an app, and 'refresh' the lb so it knows of the new app server
[2013-04-04 16:01:43 -0400] KarlHungus: context: chef lets you do eventual convergence, and is not ideally suited to orchestration like that
[2013-04-04 16:02:15 -0400] KarlHungus: context: you'd add the app node, let it converge so its 'ready', then the lb would converge in the future and add the new app node
[2013-04-04 16:02:17 -0400] context: karlhungus: ok, so if i did do that id have to like manually force the lb to refresh its config recipe or something
[2013-04-04 16:02:35 -0400] KarlHungus: there are things coming to let you push config runs to clients, but its not available yet
[2013-04-04 16:02:52 -0400] KarlHungus: if you had an api to the lb, the app node could call out to it during the chef run
[2013-04-04 16:04:07 -0400] KarlHungus: or you could script the node addtion process, so that you 1. launch instance 2. bootstrap instance 3. apply app server role and converge instance. 4. use knife to trigger a chef run on the lb's
[2013-04-04 16:06:48 -0400] jtimberman: context: generally what folks do is have a recipe on the lb that searches for the nodes its going to "balance"e from the chef server and render those out in the configuration
[2013-04-04 16:07:22 -0400] jtimberman: context: the other thing you can do if the load balancer  supports it, is hit an API endpoint on the lb software to automatically register new nodes with it.
[2013-04-04 16:08:06 -0400] jtimberman: but other than elastic lb in aws, or f5's, i don't know off hand what other kinds of load balancers support that (does haproxy?I don't know)
[2013-04-04 16:08:41 -0400] cheeseplus: jtimberman: the haproxy one does a search for nodes with a role iirc
[2013-04-04 16:08:55 -0400] cheeseplus: haven't played with it but it looks like it does
[2013-04-04 16:12:15 -0400] jtimberman: cheeseplus: i know the haproxy cookbook does it with chsearch
[2013-04-04 16:12:33 -0400] jtimberman: i don't know if haproxy itself makes that available through the admin interface
[2013-04-04 16:13:47 -0400] cheeseplus: jtimberman: ah, that I don't know
[2013-04-04 16:17:56 -0400] acts_as_coder: Can anyone shed some light on the current expected behavior of the Opscode nginx community cookbook for specifying a version to build from source? I've read through http://tickets.opscode.com/browse/COOK-1495, looked at the cookbooks source, and at the various pull requests for the issue but I'm having trouble sorting out what the current state of the community cookbook is.
[2013-04-04 16:19:04 -0400] acts_as_coder: in particular  it appears I'm having a problem that others are having which is that I'm unable to override the node['nginx']['source']['version'] value
[2013-04-04 16:20:15 -0400] gondoi: i have updated a cookbook to version 1.1.1 on the chef-server, but the client keeps caching 1.1.0 instead
[2013-04-04 16:20:27 -0400] gondoi: anyone know where this restriction would be happening?
[2013-04-04 16:22:12 -0400] cwj: gondoi: is the client node in an environment which is locked to 1.1.0?
[2013-04-04 16:23:18 -0400] gondoi: cwj: no it's not locked in the env
[2013-04-04 16:23:44 -0400] cwj: and you see version 1.1.1 when you run 'knife cookbook show foo' ?
[2013-04-04 16:24:01 -0400] gondoi: yes is see both
[2013-04-04 16:24:11 -0400] gondoi: s/is see/i see/
[2013-04-04 16:26:32 -0400] cwj: sounds like weird
[2013-04-04 16:26:37 -0400] gondoi: ha
[2013-04-04 16:26:38 -0400] gondoi: yes
[2013-04-04 16:31:27 -0400] gamafranco: hi
[2013-04-04 16:32:32 -0400] mvisich: my knife boot straps are not using chefs most current version.... it defaults to like 10.something when it should be 11.something. Is there a change on the server i need to make?
[2013-04-04 16:33:46 -0400] cwj: mvisich: in my experience your knife bootstrap commands will install whatever version of chef matches the version of knife you are using to execute the bootstrap
[2013-04-04 16:34:00 -0400] cwj: so maybe you need to upgrade chef on your local machine
[2013-04-04 16:34:07 -0400] mvisich: ahhh awesome thanks!
[2013-04-04 16:34:08 -0400] jordane: mvisich: ^, and make sure you're not installing a set version in your bootstrap template either
[2013-04-04 16:34:18 -0400] mvisich: yep yep thanks
[2013-04-04 16:34:51 -0400] jordane: you could also try the --bootstrap-version argument
[2013-04-04 16:36:19 -0400] Tho_DD_: hi...is there a chef client for windows in 64bit version? especially with ruby in 64bit ? :-)
[2013-04-04 16:37:25 -0400] Tho_DD_: I have trouble starting 64bit processes through windows functions...eg. windows_batch
[2013-04-04 16:41:39 -0400] xorti: hello
[2013-04-04 16:42:11 -0400] xorti: is there any cookbook / recipe that allows me to set virtual hosts
[2013-04-04 16:42:17 -0400] xorti: using chef-solo?
[2013-04-04 16:42:39 -0400] xorti: without the need to cook a custom cookbook?
[2013-04-04 16:42:55 -0400] xorti: apache2 cookbook has the web_app definition
[2013-04-04 16:43:13 -0400] xorti: but I would like to use it "on the fly"
[2013-04-04 16:43:17 -0400] xorti: like a recipe
[2013-04-04 16:46:13 -0400] visit0r: does anyone know the syntax to substitute a parameter into a call to search() in a recipe?
[2013-04-04 16:46:24 -0400] visit0r: I want to parameterize my search based on an attribute
[2013-04-04 16:46:51 -0400] visit0r: search(:node, "<attribute_name>:#{<param_value>}")
[2013-04-04 16:47:57 -0400] vovan: hey guys
[2013-04-04 16:48:13 -0400] c_t: visit0r: huh, that doesn't work?
[2013-04-04 16:48:28 -0400] vovan: i got a problem with using knife ec2 server create and also knife bootstrap with with --ssh-gateway option
[2013-04-04 16:48:33 -0400] randomautomator: question about setting up a attribute override in a role file
[2013-04-04 16:48:44 -0400] randomautomator: i have something like this: :cluster => "#{node.chef_environment}_logstash"
[2013-04-04 16:48:54 -0400] randomautomator: but when i upload the role file i get an error
[2013-04-04 16:49:02 -0400] randomautomator: `from_file': undefined local variable or method `node' for role
[2013-04-04 16:49:04 -0400] vovan: it always asks me for a password for the gateway and never accepts a key
[2013-04-04 16:49:04 -0400] jtimberman: Tho_DD_: the default msi should be fine?
[2013-04-04 16:49:17 -0400] gondoi: cwj: weird it ended up being the version constraint in the cookbook :(
[2013-04-04 16:49:27 -0400] jtimberman: as it should be x86_64 anyway
[2013-04-04 16:49:31 -0400] randomautomator: am i not able to assign node data in a role file?
[2013-04-04 16:49:33 -0400] c_t: visit0r: I have search(:foo,"bar_thing:#{node[:moo][:baz]}") do |d| ... working fine
[2013-04-04 16:49:35 -0400] gondoi: i had said python ~> 1.1 and 1.2 was avail
[2013-04-04 16:49:36 -0400] jtimberman: http://www.opscode.com/chef/install/
[2013-04-04 16:49:55 -0400] gondoi: but client didn't like that so it said I needed to use an older version of the cookbook
[2013-04-04 16:50:10 -0400] visit0r: c_t: I will try it again
[2013-04-04 16:50:23 -0400] c_t: vovan: are you including -i <key path>?
[2013-04-04 16:50:40 -0400] context: so where is the proper place to do 'overrides' for a recipe, environments ?
[2013-04-04 16:51:01 -0400] context: or the node i guess
[2013-04-04 16:51:04 -0400] vovan: c_t: yes i am
[2013-04-04 16:51:05 -0400] context: or roles
[2013-04-04 16:51:08 -0400] visit0r: c_t: I had single quotes in there, instead of double quotes for the string
[2013-04-04 16:51:29 -0400] techminer: ohai chefs.I'm following the opscode blog post about migrating from 10 to 11.  I am at the last step where I 'knife upload /" and I get this.
[2013-04-04 16:51:48 -0400] techminer: ERROR: Network Error: getaddrinfo: nodename nor servname provided, or not known/Users/mrm114/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: nodename nor servname provided, or not known (SocketError)
[2013-04-04 16:52:17 -0400] vovan: c_t: knife bootstrap 10.0.0.82 -i ~/.ssh/id_rsa -G 172.30.3.1 -N test-vpc -s http://chef:4000 -d rhel6-rbel -x root -E vpc -r "role[base],role[vpc]"
[2013-04-04 16:52:37 -0400] Tho_DD_: jtimberman in what version? in 10.5. i have only a ruby 32bit inside
[2013-04-04 16:53:21 -0400] vovan: c_t: and i get Bootstrapping Chef on 10.0.0.82
[2013-04-04 16:53:26 -0400] vovan: c_t: Enter the password for root@172.30.3.1:
[2013-04-04 16:53:34 -0400] c_t: hmm
[2013-04-04 16:53:44 -0400] vovan: c_t: but when I just ssh with the same key as root - works fine
[2013-04-04 16:54:17 -0400] jordane: vovan: is it an issue with ~ being interpreted differently?
[2013-04-04 16:54:38 -0400] jordane: vovan: i'd try using the full path instead of ~
[2013-04-04 16:54:48 -0400] vovan: i tried everything i was in .ssh and used directly id_rsa
[2013-04-04 16:54:56 -0400] vovan: same thing
[2013-04-04 16:56:07 -0400] vovan: i need this gateway thing
[2013-04-04 16:56:22 -0400] vovan: because im setting this up in the amazon vpc
[2013-04-04 16:56:47 -0400] vovan: knife ec2 server create in the vpc works even worse
[2013-04-04 16:57:07 -0400] jordane: vovan: does adding -V tell you anything useful?
[2013-04-04 16:57:10 -0400] vovan: it tries to ssh to to the box before its even up and then times out and fails
[2013-04-04 16:57:49 -0400] c_t: huh
[2013-04-04 16:58:05 -0400] vovan: DEBUG: Using configuration from /var/lib/jenkins/.chef/load-knife.rb
[2013-04-04 16:58:05 -0400] vovan: DEBUG: Looking for bootstrap template in /usr/lib/ruby/gems/1.8/gems/chef-10.24.0/lib/chef/knife/bootstrap
[2013-04-04 16:58:08 -0400] vovan: DEBUG: Looking for bootstrap template in /var/lib/jenkins/.chef/bootstrap
[2013-04-04 16:58:10 -0400] c_t: I took a different tack with regards to setting up chef servers inside the VPC and set up a VPN
[2013-04-04 16:58:11 -0400] vovan: DEBUG: Found bootstrap template in /var/lib/jenkins/.chef/bootstrap
[2013-04-04 16:58:13 -0400] vovan: Bootstrapping Chef on 10.0.0.82
[2013-04-04 16:58:16 -0400] vovan: Enter the password for root@172.30.3.1:
[2013-04-04 16:58:25 -0400] c_t: never mucked with the ssh gateway way of doing it
[2013-04-04 16:58:41 -0400] c_t: I suppose the obvious question is to ask if that's a working key for 172.30.3.1
[2013-04-04 16:59:02 -0400] vovan: when i ssh with that key to 3.1 as root
[2013-04-04 16:59:04 -0400] Tho_DD_: is there a chef-client with x64 ruby? problem is if you use x86 and start processes, it always chooses the 32bit versions from syswow64
[2013-04-04 16:59:05 -0400] vovan: works flawlessly
[2013-04-04 16:59:15 -0400] context: why doesn't knife node edit let me edit anything besides the run list
[2013-04-04 16:59:15 -0400] Tho_DD_: same for registry and so on...
[2013-04-04 16:59:37 -0400] jordane: vovan: do you have anything special in your ssh config for that ip?
[2013-04-04 17:00:55 -0400] vovan: jordane: nothing special
[2013-04-04 17:02:09 -0400] vovan: context: run knife node edit nodename -a
[2013-04-04 17:02:40 -0400] jrclouda: How can I use knife to search for a role that is inherited from a nother role?
[2013-04-04 17:03:22 -0400] jrclouda: nvm
[2013-04-04 17:03:23 -0400] jrclouda: foudn it
[2013-04-04 17:04:08 -0400] jordane: vovan: anything special if you set log_level :debug ?
[2013-04-04 17:04:13 -0400] Tho_DD_: is there a chef-client with x64 ruby? problem is if you use x86 and start processes, it always chooses the 32bit versions from syswow64, cause a lot of problems
[2013-04-04 17:05:09 -0400] context: chef is written in ruby isnt it? it shouldnt matter what ruby you are using
[2013-04-04 17:05:26 -0400] Tho_DD_: yes but knife uses ruby
[2013-04-04 17:05:44 -0400] Tho_DD_: so knife windows actions are executed with this 32bit stuff
[2013-04-04 17:05:57 -0400] vovan: jordane: let me try
[2013-04-04 17:06:59 -0400] tolland: I noticed that I am seeing both /var/cache/chef/chef-client-running.pid and /var/chef/cache/chef-client-running.pid on some ubuntu boxes
[2013-04-04 17:07:25 -0400] motns: I'm trying to test two different configurations (same platform, different attributes) of my cookbook using test kitchen. I saw that you can define different cucumber features for each configuration via tagging - is there something similar for minitest?
[2013-04-04 17:10:23 -0400] Tho_DD_: if you apply your cookbooks youre always in the 32bit processes, e.g if you use https://github.com/opscode-cookbooks/windows
[2013-04-04 17:11:29 -0400] context: my nodes fail to save their own data :(
[2013-04-04 17:11:58 -0400] vovan: jordane: yeah nothing in debug mode
[2013-04-04 17:14:26 -0400] c_t: vovan: I'm looking at something
[2013-04-04 17:15:55 -0400] matti: Mez: Sorry, I fallen asleep ;]
[2013-04-04 17:16:00 -0400] matti: Mez: I work US hours ;p
[2013-04-04 17:16:09 -0400] matti: Mez: To stalk jtimberman ;p
[2013-04-04 17:16:18 -0400] c_t: vovan: I could be reading it wrong, but I'm not entirely certain the ssh gateway uses the identity file
[2013-04-04 17:18:19 -0400] eliklein: anyone had a problem recently where it takes AGES to cache cookbooks in a vagrant system the first time?
[2013-04-04 17:18:37 -0400] eliklein: doesn't matter if i use hosted chef, local chef server or chef solo..
[2013-04-04 17:18:40 -0400] c_t: vovan: https://github.com/opscode/chef/blob/master/lib/chef/knife/ssh.rb#L117
[2013-04-04 17:19:48 -0400] timsmith: anyone out there using chef to automate BIOS configs?
[2013-04-04 17:20:58 -0400] vovan: c_t: hmmmm....yeah doesnt look like it from the code
[2013-04-04 17:23:55 -0400] context: damn chef why not give me the output of the command that failed :(
[2013-04-04 17:24:58 -0400] hatchetation: i'm trying to troubleshoot an issue with Berkshelf / the community cookbook API -- not really familliar enough with the desired behavior to tell what's up
[2013-04-04 17:25:41 -0400] hatchetation: Berksfile specifies "site :opscode", which I thought would use the community API.
[2013-04-04 17:26:19 -0400] hatchetation: however, specifying cookbooks (eg chef-client, or cron) isn't reaching the latest version. eg http://community.opscode.com/cookbooks/cron
[2013-04-04 17:26:52 -0400] hatchetation: would expect 1.2.2. Getting 1.0.4, which is a problem because it doesn't have the cron_d LWRP. any ideas?
[2013-04-04 17:27:21 -0400] kindsol: hatchetation: can you post a link to your berksfile, metadata.rb and the berks output?
[2013-04-04 17:27:42 -0400] hatchetation: kindsol: surely. just a sec
[2013-04-04 17:34:19 -0400] vovan: c_t: yeah that sucks
[2013-04-04 17:34:49 -0400] c_t: vovan: I would either bite the bullet and set a password, or set up the ssh tunnel beforehand
[2013-04-04 17:39:06 -0400] hatchetation: kindsol: https://gist.github.com/hatchetation/5312394
[2013-04-04 17:39:42 -0400] hatchetation: I cropped the Berksfile quite a bit, but that's the only mention of chef-client or cron
[2013-04-04 17:40:56 -0400] vovan: c_t: yeah that's not what i wanted but oh well :) i might try to setup the vpn in the vpc and manage it that way
[2013-04-04 17:41:04 -0400] vovan: c_t: gotta think about it.
[2013-04-04 17:41:07 -0400] c_t: that's what I did, fwiw
[2013-04-04 17:41:12 -0400] hatchetation: also, I'm using berkshelf 1.3.1
[2013-04-04 17:41:17 -0400] vovan: thanks a lot
[2013-04-04 17:41:21 -0400] c_t: (the vpn)
[2013-04-04 17:41:31 -0400] vovan: i also submitted a ticket in jira for this :)
[2013-04-04 17:41:53 -0400] vovan: maybe someone will make it work with a key. hehe.
[2013-04-04 17:42:06 -0400] vovan: c_t: thanks!
[2013-04-04 17:42:51 -0400] vovan: c_t: while you're here and you already did this with vpn. does the vpc do both site-to-site and remote access vpn
[2013-04-04 17:43:05 -0400] sanguisdex: would I make a custom cookbook if I wanted to make a template for /etc/adduser.conf?
[2013-04-04 17:43:14 -0400] vovan: i'm just in the middle of setting this up and just starting out with all of the vpc stuff
[2013-04-04 17:43:17 -0400] c_t: I set up OpenVPN rather than the Amazon vpn stuff
[2013-04-04 17:43:43 -0400] vovan: so you had a box with elastic ip and openvpn on it
[2013-04-04 17:43:50 -0400] c_t: yeah
[2013-04-04 17:43:59 -0400] c_t: stuck it on the nat box that normally comes with a VPC
[2013-04-04 17:44:09 -0400] vovan: aha
[2013-04-04 17:44:11 -0400] vovan: got it
[2013-04-04 17:44:31 -0400] c_t: didn't to site-to-site, but I'm sure it would work fine
[2013-04-04 17:44:33 -0400] gamafranco: is there a reason for the client not to update a cookbook, if it was pushed to the server a few minutes ago?
[2013-04-04 17:45:52 -0400] vovan: c_t: alright thanks
[2013-04-04 17:47:42 -0400] kindsol: hatchetation: works for me.  maybe wipe out your Berksfile.lock file and try again.
[2013-04-04 17:48:05 -0400] hatchetation: kindsol: tried that, but think I solved it... had to remove cron from the berkshelf cache
[2013-04-04 17:48:14 -0400] hatchetation: otherwise it wouldn't even hit the network at all
[2013-04-04 17:48:34 -0400] kindsol: that seems like a bug
[2013-04-04 17:48:40 -0400] hatchetation: yeah.
[2013-04-04 17:49:43 -0400] hatchetation: I know there have been a bunch of caching / optimization changes in berkshelf lately. Whole project seems a bit unstable
[2013-04-04 17:50:33 -0400] hatchetation: spent a few hours characterizing problems with the Berksfile.lock before I was informed it was a well-known issue that the .lock file was broken. :/
[2013-04-04 17:53:45 -0400] kindsol: works fine with v1.2.1
[2013-04-04 17:58:41 -0400] kindsol: hatchetation:  http://pastie.org/7317417
[2013-04-04 17:59:35 -0400] kindsol: so I guess it is a new "feature" in 1.3
[2013-04-04 17:59:46 -0400] hatchetation: interesting. I bet you're right
[2013-04-04 18:02:57 -0400] kindsol: hatchetation: would you mind opening a new ticket on this?
[2013-04-04 18:03:15 -0400] hatchetation: nope. I'll get one in momentarily
[2013-04-04 18:03:49 -0400] kindsol: hatchetation: awesome!  you rock!!
[2013-04-04 18:05:55 -0400] hatchetation: kindsol: np. looking at the v1.3.1..HEAD changelog, it looks like there have been some changes in the cache logic, maybe some freezing fixes too. (!) will make sure it's still broken
[2013-04-04 18:09:33 -0400] RayS: having a bit of issues installing php modules, I'm doing php_pear "curl" do but it can't find the curl module (same with some other modules)
[2013-04-04 18:15:24 -0400] doomviking: php5-curl installed?
[2013-04-04 18:15:32 -0400] doomviking: perhaps
[2013-04-04 18:18:13 -0400] cjs226: I'm experiencing an issue with Chef 11 not installing packages in the order of the recipe causing the run to fail:  https://gist.github.com/cjs226/5312737
[2013-04-04 18:19:32 -0400] jessicab: cjs226: chef_gem installs during compile time btw, youd want to add run_action most likely to the package blocks
[2013-04-04 18:19:54 -0400] jessicab: cjs226: http://docs.opscode.com/resource_common_compile.html
[2013-04-04 18:20:18 -0400] cjs226: jessicab: ah, thanks!
[2013-04-04 18:24:25 -0400] RayS: doomviking so I shouldn't install via the php_pear command ?
[2013-04-04 18:24:48 -0400] RayS: you use to install via php::module_curl
[2013-04-04 18:25:00 -0400] RayS: which still technically works but the docs say its depreciated
[2013-04-04 18:25:24 -0400] doomviking: well I'd just install the php5-curl package. ymmv
[2013-04-04 18:27:55 -0400] sanguisdex: where would I tak additional pear channels/libs that I want to install on to my php cookbook?
[2013-04-04 18:58:29 -0400] sanguisdex:  this work list http://pastebin.com/VwLYZcYR is failing with this error "package[mysql-client] (mysql::client line 46) had an error: Chef::Exceptions::Package: No version specified" where I lean to debug this?
[2013-04-04 18:59:09 -0400] Holos: Hi, I just setup a new Ubuntu 12.04 LTS server, with postgresql on it, and started postgres. I downloaded Chef 11.0.6 via wget and installed with dpkg -i, after installing my chef-server-ctl reconfigure is erroring on postgresql, saying it's down, and should be up.. but it is up.
[2013-04-04 19:03:18 -0400] Holos: Oh. chef 11 uses its own pg instance, stopping the existing on fixed that
[2013-04-04 19:03:27 -0400] context: now my chef cant install /anything/ :(
[2013-04-04 19:04:34 -0400] context: nm fixed that. but now i get overriding AptPreference
[2013-04-04 19:04:48 -0400] chrisballinger: Hey do you guys deploy your application code using Chef?
[2013-04-04 19:05:07 -0400] chrisballinger: We found that running chef-client every time to update our app code didn't really make sense
[2013-04-04 19:05:39 -0400] chrisballinger: And was potentially dangerous if we were working on some cookbooks at the same time
[2013-04-04 19:13:27 -0400] cheeseplus: chrisballinger: to avoid the last problem you can version constrain cookbooks for environments
[2013-04-04 19:14:45 -0400] chrisballinger: hmmm but that doesnt solve the problem that it takes like 4 minutes to update just our application code
[2013-04-04 19:15:19 -0400] sanguisdex: how do I debug the no candidate version of PACKAGE error?
[2013-04-04 19:15:23 -0400] cheeseplus: certainly not - I don't deploy webapps with Chef so I don't personally have a solution for that
[2013-04-04 19:15:55 -0400] cheeseplus: I know some people just knife exec to deploy
[2013-04-04 19:15:58 -0400] chrisballinger: yeah, i think we are going to stop using chef to deploy our stuff
[2013-04-04 19:16:00 -0400] cheeseplus: but I couldn't recommend that
[2013-04-04 19:16:16 -0400] chrisballinger: and just use git
[2013-04-04 19:27:38 -0400] murphy_slaw: seeing an issue with data missing from the node index in chef 0.10.4
[2013-04-04 19:29:52 -0400] murphy_slaw: for example https://gist.github.com/murphy-slaw/5313407
[2013-04-04 19:35:28 -0400] murphy_slaw: I've done a knife index rebuild and the problem is still there
[2013-04-04 19:47:11 -0400] sanguisdex: it seems that every cookbook from opscodes repos that I use on a ubntu 12.04 box from rackspace returnssome error about missing a version number. build-essential, mysql::cleint, php5-cgi.  but I don't know how to get support, what questions should I ask where should I ask? both here and #learnchef leave me w/o any response. I figre I am asking the wrong questions, but don't know where to start
[2013-04-04 19:47:16 -0400] sanguisdex: </rant>
[2013-04-04 19:48:47 -0400] tomdzk: sanguisdex: can you put the stacktrace you get on https://gist.github.com and post the link here ?
[2013-04-04 19:49:18 -0400] chrisballinger: why does postgres store it's password in plaintext on the node?
[2013-04-04 19:50:44 -0400] Ash: chrisballinger: plaintext is more secure
[2013-04-04 19:50:58 -0400] Ash: just ask cwj
[2013-04-04 19:51:26 -0400] jtimberman: sanguisdex: missing a version number where? like, package installation fails because the package isn't available?
[2013-04-04 19:51:41 -0400] bigoldrock: HI folks. I'm trying to make the case with my boss that we are pushing too much of our config management into OS packages. ... so we're going to pretend I'm one of "those" guys
[2013-04-04 19:51:48 -0400] jtimberman: sanguisdex: like this: [2013-04-04T19:07:45+00:00] FATAL: Chef::Exceptions::Exec: package[emacs23-nox] (emacs::default line 22) had an error: Chef::Exceptions::Exec: apt-get -q -y install emacs23-nox=23.3+1-1ubuntu9.1 returned 100, expected 0
[2013-04-04 19:52:09 -0400] bigoldrock: why do we need chef? Why not just package everything? EG. custom java package, custom nginx, etc.
[2013-04-04 19:52:52 -0400] c_t: not spending a shitton of time making custom packages if you don't need to has a certain appeal, I'd think
[2013-04-04 19:52:54 -0400] alop: bigoldrock: packages don't enforce, your configs can be hand-edited after installation and you might not be made aware of that change
[2013-04-04 19:52:55 -0400] sanguisdex: tomdzk: https://gist.github.com/sanguis/5313605 thanks for taking a look
[2013-04-04 19:53:15 -0400] jtimberman: sanguisdex: chances are you need to update the apt cache on your system. include opscode's apt cookbook default recipe in your node's run list to fix that.
[2013-04-04 19:53:19 -0400] alop: bigoldrock: plus, chef and puppet do much more than just manage config
[2013-04-04 19:54:18 -0400] alop: bigoldrock: Services should be running? stoped and restarted, etc. Don't know which server is running what service? Just ask chef...
[2013-04-04 19:54:34 -0400] bigoldrock: okay ... (still pretending) I'm Mr Director, what else can it do?
[2013-04-04 19:55:47 -0400] alop: bigoldrock: here's an example, we have a service that scales horizontally based on the number of nodes running a service Adding a new node, when it checks in to chef, every other node now knows about the additional resource and adjusts accordingly
[2013-04-04 19:56:05 -0400] bigoldrock: we have scripts that track which services run where. It's one big flat text file with a list of hosts in the env and services EG:        Larry: nginx, openldap   , curly: memcached, jetty
[2013-04-04 19:56:38 -0400] ponyofdeath: is it possible to do an default run list per environment?
[2013-04-04 19:57:51 -0400] alop: bigoldrock: understood, scripts were a great solution for the time chef is deterministic ( do your scripts handle exceptions or failures?) also, chef is idempotent (will running your scripts multiple times have adverse effect?)
[2013-04-04 19:57:56 -0400] bigoldrock: ah ha, alop that's something that "Mr Director" finds impressive, "every other node now knows about the additional resource and adjusts accordingly"
[2013-04-04 19:58:05 -0400] alop: :)
[2013-04-04 19:58:27 -0400] doomviking: ponyofdeath: check out env_run_lists()
[2013-04-04 19:58:48 -0400] bigoldrock: *cough* sure, no adverse effects to running them over and over
[2013-04-04 19:58:57 -0400] alop: I think the best feature, bigoldrock, is that lots of the work has already been done by the community. So instead of rolling custom packages, you can get pretty much everything you need from community cookbooks
[2013-04-04 19:59:30 -0400] alop: (in best Jason Lee voice) I think the audience will agree with me on that one...
[2013-04-04 19:59:49 -0400] bigoldrock: I like that too alop
[2013-04-04 20:00:51 -0400] alop: bigoldrock: my team has about 10 people on it, and we manage like 8 datacenters with chef
[2013-04-04 20:01:30 -0400] sanguisdex: jtimberman: boom apt saves the day
[2013-04-04 20:01:39 -0400] jtimberman: sanguisdex: :)
[2013-04-04 20:01:41 -0400] sanguisdex: jtimberman: thanks
[2013-04-04 20:01:56 -0400] sanguisdex: is there a karma bot in here or anything?
[2013-04-04 20:02:05 -0400] jtimberman: not currently.
[2013-04-04 20:02:26 -0400] murphy_slaw: can anyone explain this search weirdness: https://gist.github.com/murphy-slaw/5313407
[2013-04-04 20:02:26 -0400] jtimberman: our bawt was broken and is offline.
[2013-04-04 20:03:05 -0400] bigoldrock: alop, so you're saying chef scales well with minimal work and high return. Perfect for a company that is growing quickly eh?
[2013-04-04 20:03:06 -0400] sanguisdex: jtimberman: than I can't give you a propper ++
[2013-04-04 20:03:37 -0400] alop: murphy_slaw: try 'knife search node 'cluster_name:Search'
[2013-04-04 20:03:48 -0400] bigoldrock: any examples with manhours or something that is easy for "Mr Director" to equate with $ ?
[2013-04-04 20:04:21 -0400] alop: bigoldrock: I assume you've seen http://www.opscode.com/testimonials/
[2013-04-04 20:04:44 -0400] murphy_slaw: alop: weird, that works. but ganglia_cluster_name: works for other clusters :-/
[2013-04-04 20:04:45 -0400] jtimberman: sanguisdex: it's cool, come to ChefConf for a hug :)
[2013-04-04 20:04:53 -0400] bigoldrock: ah ha, closing in for the kill. Alright, I'll check it out. Thanks a lot
[2013-04-04 20:04:58 -0400] jtimberman: unless you're not into hugs, then a high 5
[2013-04-04 20:04:59 -0400] jforest: I am a huge fan fo chef-solo right now
[2013-04-04 20:05:06 -0400] jforest: if anyone else is using it on aws I'd love to know
[2013-04-04 20:05:11 -0400] jforest: it's rocking and rolling for me
[2013-04-04 20:05:54 -0400] jordane: jforest: I know some people who have been using littlechef lately. It has been working pretty well.
[2013-04-04 20:06:11 -0400] jforest: what is littlechef?
[2013-04-04 20:06:15 -0400] jforest: I need to do more research
[2013-04-04 20:06:43 -0400] jordane: jforest: essentially a fabric wrapper to make chef-solo nicer
[2013-04-04 20:06:58 -0400] jordane: jforest: https://github.com/tobami/littlechef
[2013-04-04 20:07:26 -0400] jordane: it adds back a few nice things like data bag search
[2013-04-04 20:07:58 -0400] murphy_slaw: alop: oh, i'm wrong, that doesn't work. it works for clusters where ganglia_cluster_name is working but not for the Search cluster
[2013-04-04 20:08:52 -0400] jforest: ahh, we have just sort of rolled our own stuff
[2013-04-04 20:09:22 -0400] alop: murphy_slaw: from what I see in the gist, it looks like you're setting node['ganglia']['cluster_name'] = "Search" - and looking for "ganglia_cluster_name"
[2013-04-04 20:09:32 -0400] jordane: jforest: yeah, there are lots of ways to do it
[2013-04-04 20:10:01 -0400] murphy_slaw: alop: chef merges multipart keys into a single index key with underscores
[2013-04-04 20:10:21 -0400] alop: ah, I did not know htat
[2013-04-04 20:10:25 -0400] alop: well then
[2013-04-04 20:12:04 -0400] murphy_slaw: i would think it was busted because the underscore in the field name was confusing it, except, as i said, it's working fine for other nodes in other clusters
[2013-04-04 20:13:02 -0400] alop: murphy_slaw: that actually makes some sense
[2013-04-04 20:13:12 -0400] cwj: murphy_slaw: are you running your own chef server and is it possible some thing is broken between solr and the indexer?
[2013-04-04 20:13:50 -0400] murphy_slaw: i am running my own chef server
[2013-04-04 20:14:10 -0400] murphy_slaw: i've done a full index rebuild, but the issue remains
[2013-04-04 20:14:36 -0400] cwj: i dont run my own, so i am somewhat out of touch with how to diagnose solr/indexer problems, but thats what it smells like to me
[2013-04-04 20:14:40 -0400] murphy_slaw: if something was happening between, say, chef-expander and solr, what would i be looking for
[2013-04-04 20:15:03 -0400] cwj: maybe restart expander
[2013-04-04 20:19:01 -0400] gansbrest: hi. What's the best way to get to the templates folder in the recipe. I want to create small loop which will go through template files in particular dir and use template recourse inside the loop
[2013-04-04 20:19:25 -0400] alop: %w I think
[2013-04-04 20:19:31 -0400] gansbrest: template logic is doing some OS checks seems like to choose correct template folder
[2013-04-04 20:23:35 -0400] cwj: yeah you can vary the template by platform or hostname, but i've never seen a recipe that got a list of all the templates in the cookbook. not sure how you'd do that.
[2013-04-04 20:24:57 -0400] gansbrest: is there url for chef internals documentation?
[2013-04-04 20:25:14 -0400] Liquid--: any body have experience with the chef-composer-master cookbook?
[2013-04-04 20:26:26 -0400] cwj: gansbrest: http://docs.opscode.com/resource_template.html discusses the file specificity for templates and cookbook_files
[2013-04-04 20:26:34 -0400] cwj: gansbrest: otherwise the source is at https://github.com/opscode/chef/
[2013-04-04 20:26:45 -0400] gansbrest: thanks cwj
[2013-04-04 20:28:28 -0400] cwj: gansbrest: https://github.com/opscode/chef/blob/master/lib/chef/provider/template_finder.rb looks relevant to your interests
[2013-04-04 20:28:35 -0400] cwj: hth :)
[2013-04-04 20:33:31 -0400] gansbrest: yes, seems like it
[2013-04-04 20:39:19 -0400] revattar: I have a jenkins CI project that is pushing a war file to an S3 bucket.  I'm wanting to deploy the lastest war file from that bucket to my tomcat boxes if it is newer than the currently deployed war file.
[2013-04-04 20:39:34 -0400] revattar: is this supported by the application cookbook?
[2013-04-04 20:40:58 -0400] yfeldblum: revattar, why?
[2013-04-04 20:41:57 -0400] revattar: what do you mean why?
[2013-04-04 20:42:26 -0400] dfrey_: Is there a way to tell chef not to clone resource attributes? I'm getting this error msg: WARN: Cloning resource attributes for service[nginx] from prior resource (CHEF-3694)
[2013-04-04 20:42:28 -0400] revattar: so I can get the lastest war deployed automagically if the CI build is successful
[2013-04-04 20:43:46 -0400] sanguisdex: so after installin mysql with a cookbookhow do I get the root password?
[2013-04-04 20:43:53 -0400] cwj: revattar: you could write a recipe that uses application_java and does the bucket checking, but i think a more common pattern would be to have jenkins tell your machines to run chef after the war is uploaded
[2013-04-04 20:44:11 -0400] yfeldblum: revattar, why are you asking about the application cookbook?
[2013-04-04 20:59:21 -0400] revattar: Well, I guess a better question would be what CI/CD strategies others are using with jenkins/gradle/chef
[2013-04-04 21:00:19 -0400] cloder_: revattar, we do a TON of chef/jenkins stuff
[2013-04-04 21:00:24 -0400] cloder_: quite successfully :)
[2013-04-04 21:01:55 -0400] revattar: cloder_: I'd love to pick your brain then
[2013-04-04 21:02:05 -0400] cloder_: sure. Shoot me an email
[2013-04-04 21:02:07 -0400] cloder_: chad@rapid7.com
[2013-04-04 21:02:24 -0400] tomdzk: cloder_: any chance of a blog post ? :)
[2013-04-04 21:03:02 -0400] revattar: tomdzk: I'll do a writeup as I work through my setup with cloder_
[2013-04-04 21:03:13 -0400] tomdzk: sweet
[2013-04-04 21:03:37 -0400] cloder_: tomdzk, sure. anything in particular you are interested in?
[2013-04-04 21:05:23 -0400] tomdzk: cloder_: I'd love some good writeups of concrete examples of what people do with as much technical detail as they are willing to give
[2013-04-04 21:06:10 -0400] cloder_: tomdzk, sure. Can you shoot me an email to chad@rapid7.com and I'll hit you back when I've got something
[2013-04-04 21:06:25 -0400] tomdzk: cloder_: soumds good
[2013-04-04 21:09:39 -0400] Drewzar: Anyone use NOT in their searches?
[2013-04-04 21:10:48 -0400] cwj: Drewzar: sure
[2013-04-04 21:11:22 -0400] cwj: knife search node 'roles:foo AND NOT ec2_placement_availability_zone:us-east*'
[2013-04-04 21:12:42 -0400] Kzim: hello can i pass variable to a include_recipe please ?
[2013-04-04 21:12:52 -0400] miah: no. recipes are not methods.
[2013-04-04 21:13:05 -0400] Kzim: i have to make a definition ?
[2013-04-04 21:13:06 -0400] Drewzar: cwj: Thanks
[2013-04-04 21:13:14 -0400] ranjibd: Kzim: lwrp
[2013-04-04 21:13:15 -0400] Drewzar: We just found a problem with our private chef vs hosted
[2013-04-04 21:13:16 -0400] miah: include_recipe "foo_#{ var }"
[2013-04-04 21:13:18 -0400] miah: is possible though
[2013-04-04 21:13:21 -0400] Kzim: i tried to set a variable before call include and it doesn't work
[2013-04-04 21:13:45 -0400] Kzim: miah, no i really need a variable :(
[2013-04-04 21:14:55 -0400] miah: then set the variable as a node attribute, create a definition, or a resource.
[2013-04-04 21:15:14 -0400] Kzim: k thanks a lot
[2013-04-04 21:16:30 -0400] xrl: So I'm learning the ropes with chef-solo/knife and I wanted to bootstrap a new system with Ruby 2.0.0-p0 using a custom template. The problem is that omnibus is self-installing and failing
[2013-04-04 21:16:45 -0400] xrl: I'm using digital ocean and their 32bit Ubuntu 12.10 image
[2013-04-04 21:17:52 -0400] ranjibd: xrl: your workstation from where you are invoking the  bootstrapping is on 2.0?
[2013-04-04 21:18:30 -0400] xrl: ranjibd: yes
[2013-04-04 21:18:44 -0400] xrl: here's the knife command and template file I'm trying to use: https://gist.github.com/xrl/e9f91e8abf5dc01f65b2
[2013-04-04 21:18:49 -0400] ranjibd: u can install chef with omnibus and then use rvm or rbenv cookbook to install a system wide 2.0 ruby
[2013-04-04 21:19:16 -0400] xrl: ranjibd: I was thinking of install ruby from scratch... I might be tempted to try rbenv tho
[2013-04-04 21:19:32 -0400] ranjibd: what error you are getting ? even in your route  you should be able to install chef with 2.0 using a custom bootstrap template
[2013-04-04 21:20:47 -0400] xrl: ranjibd: I'll run the command again and post the error in a gist
[2013-04-04 21:20:57 -0400] xrl: that'll take a few moments
[2013-04-04 21:24:27 -0400] xrl: huh, looks like it's working again. I had tried this two nights ago and it was failing. false alarm?
[2013-04-04 21:24:34 -0400] xrl: well, omnibus installed at least
[2013-04-04 21:24:51 -0400] xrl: how does omnibus avoiding collisions with the system ruby?
[2013-04-04 21:26:46 -0400] kklimonda: it installs everything in /opt/chef/embedded/
[2013-04-04 21:31:04 -0400] xrl: OK, I did get the error again: https://gist.github.com/xrl/e9f91e8abf5dc01f65b2
[2013-04-04 21:36:39 -0400] xrl: I used the chef install page to get the dpkg manually (http://www.opscode.com/chef/install/) and it installed just fine. it must be further on in the bootstrapping process where it fails
[2013-04-04 21:42:39 -0400] helllen: hi
[2013-04-04 21:43:02 -0400] helllen: I would like to add a data bag with a field with multiple lines
[2013-04-04 21:43:07 -0400] helllen: how could I do it?
[2013-04-04 21:43:23 -0400] helllen: because knife doesn't accept the json
[2013-04-04 21:45:06 -0400] cwj: helllen: try slapping in \n where the line endings would be
[2013-04-04 21:45:20 -0400] cwj: thats how i store ssl certs in data bags
[2013-04-04 21:45:28 -0400] helllen: ok
[2013-04-04 21:45:30 -0400] helllen: thanks
[2013-04-04 21:45:33 -0400] jed2: JSON's cool with that as a format? I've had issues in the past
[2013-04-04 21:45:55 -0400] jed2: maybe tools, not the format
[2013-04-04 21:46:36 -0400] cwj: not familiar enough with the format spec, but ive yet to have a problem with it
[2013-04-04 21:46:38 -0400] cloder_: tomdzk: are you going to chef conf?
[2013-04-04 21:46:46 -0400] spox: yeah, you need to replace with \n
[2013-04-04 21:47:09 -0400] spox: puts File.read('/path/to/file').inspect
[2013-04-04 21:47:12 -0400] spox: copy and paste
[2013-04-04 21:47:14 -0400] cwj: often use jshon to check my json, so at least ruby and python implementations think it is ok
[2013-04-04 21:47:27 -0400] spox: or, build in ruby hash and to_json it
[2013-04-04 21:52:16 -0400] tomdzk: cloder_: yep
[2013-04-04 21:52:20 -0400] cloder_: ah cool
[2013-04-04 21:52:23 -0400] cloder_: like i said, shoot me an email
[2013-04-04 21:52:30 -0400] cloder_: our main chef/jenkins guru might be going also
[2013-04-04 21:52:34 -0400] cloder_: we can definitely catch up over beer
[2013-04-04 21:56:05 -0400] randomautomator: hey guys can someone tell me if i'm able to assign the following in a role file?
[2013-04-04 21:56:05 -0400] randomautomator: http://pastebin.com/ZLVYdS3W
[2013-04-04 21:56:30 -0400] randomautomator: trying to put #{node.chef_envrionment} in a role file
[2013-04-04 21:56:42 -0400] randomautomator: but it errors out saying local variable not assigned
[2013-04-04 21:57:04 -0400] randomautomator: or is that not a kosher thing to do?
[2013-04-04 21:57:53 -0400] yfeldblum: randomautomator, not kosher
[2013-04-04 21:58:22 -0400] randomautomator: ok so where should i be able to assign that kind of information? do i have to do it in the cookbook attribute file?
[2013-04-04 21:58:32 -0400] randomautomator: or is there anyway i can override it with a node variable assignment?
[2013-04-04 21:59:38 -0400] miah: you can modify the node, and properly set its environment
[2013-04-04 22:00:08 -0400] yfeldblum: randomautomator, you assign the environment when you bootstrap the node with `knife boostrap $NODE --environment $ENV` or `knife $CLOUD server create --environment $ENV --node-name $NAME`
[2013-04-04 22:00:23 -0400] randomautomator: yeah... but i'm not trying to assign an environment
[2013-04-04 22:00:26 -0400] yfeldblum: randomautomator, and you can also change the node after-the-fact with `knife node edit $NODE`
[2013-04-04 22:00:47 -0400] randomautomator: i want the name of the environment the node is assigned to so i can use it as a naming scheme for a cookbook
[2013-04-04 22:01:11 -0400] yfeldblum: randomautomator, also roles have *zero* knowledge of the nodes whose run-lists they will be included in
[2013-04-04 22:01:17 -0400] miah: then put that data in the cookbook. it doesnt need to be in a role.
[2013-04-04 22:01:22 -0400] yfeldblum: randomautomator, they are *static data*
[2013-04-04 22:01:46 -0400] yfeldblum: randomautomator, if they are in ruby, then `knife role from file ...` reads the role and uploads *static json data* to the chef-server
[2013-04-04 22:01:48 -0400] rep0st1: randomautomator: role files are pretty dumb
[2013-04-04 22:02:11 -0400] randomautomator: ok so i can't do any variable information in role files in other words
[2013-04-04 22:03:07 -0400] yfeldblum: randomautomator, correct
[2013-04-04 22:03:15 -0400] randomautomator: ok that's all i needed to know
[2013-04-04 22:28:36 -0400] basic`: i'm using vagrant to do a chef_client deploy, it successfully adds itself as a node and client and begins a chef run
[2013-04-04 22:29:00 -0400] basic`: but the chef run takes about 10 minutes doing 'INFO: Storing updated cookbooks/.../ in the cache'?
[2013-04-04 22:29:37 -0400] basic`: that doesn't seem normal, or is that standard for the first run of chef from the server?  Other production servers only take about 10 seconds each run
[2013-04-04 22:42:38 -0400] Eiam: is there a general practice regarding committing cookbooks to the repo?
[2013-04-04 22:43:14 -0400] Eiam: I just got started with vagrant + chef our site-cookbooks are in the repo, but when I brought vagrant up I got like 986 files added to cookbooks/xxxx
[2013-04-04 22:43:21 -0400] Eiam: do people just .gitignore those?
[2013-04-04 22:43:42 -0400] fujin: Yes, usually cookbooks folder is gitignored
[2013-04-04 22:43:53 -0400] Eiam: because its machine specific?
[2013-04-04 22:43:57 -0400] fujin: Eiam: it'll generally be automatically resolved & populated by a tool like berkshelf or librarian
[2013-04-04 22:44:12 -0400] Eiam: yes this is librarian-chef
[2013-04-04 22:44:19 -0400] Eiam: but I'm not sure what yo mean by automatically resolved
[2013-04-04 22:44:22 -0400] Eiam: the files are definitey there
[2013-04-04 22:44:56 -0400] fujin: so librarian will have pulled in all of the deps and added them to that cookbooks folder
[2013-04-04 22:45:12 -0400] Eiam: right, which is why there are so many files
[2013-04-04 22:45:39 -0400] Eiam: err well except for this wth
[2013-04-04 22:45:42 -0400] jed2: how do people handle custom cookbooks in that scenario?
[2013-04-04 22:45:46 -0400] Eiam:  tmp/librarian/cache
[2013-04-04 22:45:53 -0400] Eiam: jed2: shouldn't thye be in site-cookbooks then?
[2013-04-04 22:46:02 -0400] jed2: right, I'm asking how berkshelf and site-cookbooks interact
[2013-04-04 22:46:07 -0400] Eiam: is that just trash that should be deleted?
[2013-04-04 22:46:43 -0400] basic`: http://pastebin.osuosl.org/1612/ -- this is only about 5 minutes worth
[2013-04-04 22:46:56 -0400] basic`: is this amount of time normal?
[2013-04-04 22:47:00 -0400] fujin: jed2: I wrote something the other day that walks the site-cookbooks directory (In the Cheffile, or Berksfile) and adds those as cookboks.
[2013-04-04 22:47:09 -0400] fujin: jed2: so you don't have to store any of the upstream stuff in your repo at all.
[2013-04-04 22:47:38 -0400] jed2: okay, so site-cookbooks is your customs, they declare dependencies, then you add those to berkshelf which manages ~/.berkshelf and uploads yours + vendor dependencies for you?
[2013-04-04 22:47:53 -0400] jed2: I'm not using this workflow, and since I'm just deploying chef for the first time, this sounds interesting
[2013-04-04 22:48:00 -0400] fujin: yip
[2013-04-04 22:48:15 -0400] jed2: that does sound better
[2013-04-04 22:48:19 -0400] fujin: I specify all the known upstream ones that aren't dependencies of anything in my site-cookbooks in the Berksfile explicitly (there aren't many of these, but like, private git repos?)
[2013-04-04 22:48:45 -0400] jed2: our chef usage is 90% internal cookbooks, 10% open-source ones, so a workflow cognizant of that is appealing
[2013-04-04 22:48:46 -0400] fujin: then like I said, map through the site-cookbooks with a glob looking for metadata & add cookbooks with the 'path => 'site-cookbooks/foo' options.
[2013-04-04 22:49:08 -0400] greenmoss: anyone using minitest-chef-handler?
[2013-04-04 22:49:13 -0400] jed2: fujin: interesting, thanks
[2013-04-04 22:49:19 -0400] fujin: Feels really nice, works great with test-kitchen & kitchen-vagrant as well.
[2013-04-04 22:49:23 -0400] greenmoss: I can't figure out how to get automatic test detection to work
[2013-04-04 22:49:24 -0400] fujin: If you get stuck I can provide a berksfile to look at
[2013-04-04 22:49:31 -0400] jed2: appreciated
[2013-04-04 22:49:34 -0400] greenmoss: always "WARN: No tests found"
[2013-04-04 22:49:58 -0400] basic`: anyone have ideas about why my chef-client provision step with vagrant is taking so long?
[2013-04-04 22:50:12 -0400] greenmoss: I've put in $CB_ROOT/files/default/test
[2013-04-04 22:50:14 -0400] spox: basic`: because you have a slow connection to the chef-server
[2013-04-04 22:50:20 -0400] basic`: gigabit?
[2013-04-04 22:50:27 -0400] greenmoss: $CB_ROOT/cookbooks/$CB_NAME/tests
[2013-04-04 22:50:35 -0400] greenmoss: $CB_ROOT/tests
[2013-04-04 22:50:37 -0400] basic`: unless my laptop stopped working properly...
[2013-04-04 22:50:38 -0400] greenmoss: nothing seems to work
[2013-04-04 22:50:57 -0400] fujin: jed2: https://gist.github.com/fujin/5315080
[2013-04-04 22:50:59 -0400] fujin: HTH
[2013-04-04 22:51:39 -0400] spox: greenmoss: minitest-chef-handler tests are discovered in files/default/tests/minitest
[2013-04-04 22:51:53 -0400] greenmoss: spox: yeah that's where I put them
[2013-04-04 22:52:11 -0400] basic`: hmm, not quite gigabit but i'm pushing around 4095KB/s to the speakeasy speed test
[2013-04-04 22:52:15 -0400] spox: is it in your runlist?
[2013-04-04 22:52:24 -0400] basic`: spox: any other ideas?
[2013-04-04 22:52:31 -0400] greenmoss: spox: files/default/tests/minitest/default_test.rb
[2013-04-04 22:52:48 -0400] greenmoss: spox: yeah I see it running
[2013-04-04 22:53:00 -0400] greenmoss: in my run-list: 'minitest-handler'
[2013-04-04 22:53:10 -0400] spox: greenmoss: there was a bug recently, are you up to date on your version?
[2013-04-04 22:53:19 -0400] greenmoss: in log output: "Run List expands to [su-chef::default, minitest-handler]"
[2013-04-04 22:53:50 -0400] spox: basic`: it checksums and pulls files individually. so if you are traversing the intarwebs for them, it can be a little slow
[2013-04-04 22:54:02 -0400] greenmoss: I'm on 0.0.9
[2013-04-04 22:54:11 -0400] greenmoss: hmm
[2013-04-04 22:54:41 -0400] basic`: spox: we're talking like 20 minutes slow though
[2013-04-04 22:54:50 -0400] basic`: and i have gigabit to the server
[2013-04-04 22:55:13 -0400] greenmoss: wow, that is really old
[2013-04-04 22:55:28 -0400] greenmoss: I don't even understand how it got installed... guess that's my next step
[2013-04-04 22:58:35 -0400] basic`: spox: yep you were right, bad network driver with vbox
[2013-04-04 22:58:42 -0400] basic`: thanks :)
[2013-04-04 22:58:48 -0400] spox: sure
[2013-04-04 23:05:35 -0400] qhartman_: I have a recipe setup that sets up new yum repos and then cleans and rebuilds the package cache, but any package resources that get evaluated during the run try to run later with bad package versions
[2013-04-04 23:05:44 -0400] qhartman_: anyone come up with a solution to this?
[2013-04-04 23:05:52 -0400] qhartman_: It's killing my deployment efficiency
[2013-04-04 23:06:37 -0400] jordane: qhartman_: you can force a package to install during the compilation phase
[2013-04-04 23:07:06 -0400] jordane: qhartman_: take a look at http://docs.opscode.com/resource_common_compile.html
[2013-04-04 23:07:40 -0400] jordane: qhartman_: or do you mean you're getting issues with conflicting packages in different repos after using new repos?
[2013-04-04 23:08:24 -0400] qhartman_: so my runs basically look like this:
[2013-04-04 23:08:47 -0400] qhartman_: 1- update package cache (immediately, using the pattern you link to)
[2013-04-04 23:09:29 -0400] qhartman_: 2- Some time later, do a bunch of stuff to clean out default repos, add custom ones, then update cache again (this update only happens if the repos changed)
[2013-04-04 23:09:40 -0400] qhartman_: 3- Install packages
[2013-04-04 23:10:13 -0400] qhartman_: Since the package resources that are defined all over the cookbooks get compiled between steps 1 and 2, when it gets to step 3 they all fail
[2013-04-04 23:10:31 -0400] qhartman_: because those repos / package versions aren't actually available any more
[2013-04-04 23:10:35 -0400] jordane: Ah. I believe you want to make sure you install repos before the packages are seen in the compilation phase. iirc the compilation phase sets up packages to install, it figures all that out during the compilation stage, and runs it all during the run stage
[2013-04-04 23:10:45 -0400] qhartman_: right
[2013-04-04 23:11:03 -0400] jordane: I.E you should 1) update cache 2) install repos immediately, 3)compile phase for packages 4) run phase for packages
[2013-04-04 23:11:22 -0400] jordane: You can achieve this by making sure 1 and 2 a) run during compilation phase, and b) are at the top of your run list
[2013-04-04 23:11:32 -0400] qhartman_: right
[2013-04-04 23:11:55 -0400] qhartman_: ok, thanks for the sanity check. It's starting to sound I'm goign to need to write an LWRP to make this happen in a sane way
[2013-04-04 23:12:06 -0400] qhartman_: unless something like the APT cookbook already exists for centos?
[2013-04-04 23:12:18 -0400] qhartman_: I hadn't thought to look for something like that until now
[2013-04-04 23:12:31 -0400] jordane: there is a yum cookbook http://community.opscode.com/cookbooks/yum
[2013-04-04 23:12:38 -0400] qhartman_: cool
[2013-04-04 23:12:42 -0400] jordane: I only run debian/ubuntu though, so I have no experience
[2013-04-04 23:12:49 -0400] jordane: It will probably do what you want in the right order though.
[2013-04-04 23:12:53 -0400] qhartman_: Yeah, I usually do too
[2013-04-04 23:13:10 -0400] qhartman_: one of my clients runs centos though and we have to support them as a result
[2013-04-04 23:13:19 -0400] jordane: Ah, cool. Hope that yum cookbook works for you.
[2013-04-04 23:13:25 -0400] jordane: Sorry I misunderstood your question at first :\
[2013-04-04 23:13:28 -0400] qhartman_: no worries
[2013-04-04 23:13:33 -0400] qhartman_: I appreciate the pointers
[2013-04-04 23:37:25 -0400] hdee: hi everyone
[2013-04-04 23:38:15 -0400] hdee: any chef experts around?
[2013-04-04 23:39:35 -0400] doomviking: beware "experts"
[2013-04-04 23:43:11 -0400] doomviking: but throw your question out anyway
[2013-04-04 23:45:00 -0400] yfeldblum: hdee, there's nobody around here with 5+ years of chef experience; but if you're ok with another metric for judging expertise, you may as well just ask
[2013-04-04 23:46:49 -0400] hdee: so i'm still trying some things... basically i'm setting up my first chef install, working through everything... trying to bootstrap a server... i'm  using amazon vpc though so i'm tryign to get bootstrap to work through a proxy server tso it can download files externally from chef
[2013-04-04 23:47:35 -0400] hdee: the issue i'm having though is after pulling files from external soruce, it goes to access the chef server internally and it's messed up... i'm debugging on the proxy side but i was wondering if i could just have chef client not use proxy for connecto to chef-server
[2013-04-04 23:48:21 -0400] hdee: i saw something about using knife[:bootstrap_no_proxy] setting, tried it but didn't help
[2013-04-04 23:50:47 -0400] yfeldblum: hdee, you may want to learn chef, mess around, experiment some, etc., with a simpler model
[2013-04-04 23:51:08 -0400] yfeldblum: hdee, non-vpc, throwaway servers that you don't need tight security on and that are ok on the public non-vpc cloud
[2013-04-04 23:51:54 -0400] tomdzk: vagrant is very useful for learning chef
[2013-04-04 23:58:01 -0400] jed2: hdee: if you use --bootstrap-proxy, knife bootstrap also configures your chef server communication with the same proxy
[2013-04-04 23:58:06 -0400] maplebed: when writing a LWRP, in the provider, I'm using a template.
[2013-04-04 23:58:12 -0400] jed2: I did not develop a suitable workaround and ended up using alternative means
[2013-04-04 23:58:16 -0400] maplebed: by default, it will will look in the calling cookbook's template dir for the file
[2013-04-04 23:58:24 -0400] maplebed: but i want to look in the cookbook providing the resource.
[2013-04-04 23:58:37 -0400] maplebed: I know I can use the 'cookbook' option to template with my cookbook's name
[2013-04-04 23:58:41 -0400] yfeldblum: maplebed, then set the `cookbook` attribute
[2013-04-04 23:58:51 -0400] maplebed: but I want to say "this cookbook" instead of saying "my-cookobok-name"
[2013-04-04 23:58:55 -0400] maplebed: is that possible?
[2013-04-04 23:59:08 -0400] yfeldblum: maplebed, or don't use sub-resources inside providers
[2013-04-04 23:59:27 -0400] yfeldblum: maplebed, or if you want to use sub-resources inside providers, make sure you're using inline-recipes or recipe_eval
[2013-04-04 23:59:42 -0400] maplebed: I don't know what that means.  :(

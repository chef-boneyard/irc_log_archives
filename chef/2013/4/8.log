[2013-04-08 00:24:22 -0400] dkador: hey folks - I've been running open source chef for the last year or so with few problems, but looking to get more advanced and throw vagrant + berkshelf into the mix.  anybody have a good resource on running berkshelf + vagrant + chef-server?
[2013-04-08 00:24:47 -0400] justincampbell: dkador: berkshelf.com has a good getting started tutorial
[2013-04-08 00:25:45 -0400] dkador: yeah, ran through that.  pretty good for getting started w/ chef-solo.  not super useful for getting the integration with the actual chef-server going.  been having some problems when switching from solo to server.
[2013-04-08 00:26:02 -0400] pipework: Hm, didn't know riot games opensauced.
[2013-04-08 00:27:40 -0400] justincampbell: pipework: we're trying to as much as possible
[2013-04-08 00:27:40 -0400] justincampbell: dkador: what kinds of problems?
[2013-04-08 00:27:49 -0400] pipework: justincampbell: You're a rioter?
[2013-04-08 00:27:58 -0400] justincampbell: pipework: yeah
[2013-04-08 00:28:09 -0400] pipework: justincampbell: Do you actively use ruby there?
[2013-04-08 00:28:24 -0400] justincampbell: pipework: yeah , for devops stuff and some internal tooling
[2013-04-08 00:28:27 -0400] justincampbell: depends on the team
[2013-04-08 00:28:39 -0400] pipework: justincampbell: Hm. That's cool stuff.
[2013-04-08 00:28:53 -0400] justincampbell: some teams prefer jvm languages, and i think we have some php and python stuff somewhre
[2013-04-08 00:29:18 -0400] pipework: justincampbell: I'm a polyglot devop myself.
[2013-04-08 00:29:53 -0400] justincampbell: pipework: im exploring a bunch
[2013-04-08 00:29:57 -0400] justincampbell: id like to do more clojure
[2013-04-08 00:30:12 -0400] pipework: justincampbell: That's the one I'm learning this year.
[2013-04-08 00:30:23 -0400] pipework: I learn at least one a year.
[2013-04-08 00:30:36 -0400] dkador: justincampbell: things like uploading new cookbooks and dealing with dependency conflict hell.  also would love to read up on how people are managing their various environments with berkshelf + vagrant + chef-server (dev vs staging vs prod)
[2013-04-08 00:30:38 -0400] justincampbell: pipework: do you test clojure and if so what library do you use
[2013-04-08 00:31:06 -0400] pipework: justincampbell: I have had people suggest a couple to me, but I haven't gotten to dig deep. I can find them, one minute.
[2013-04-08 00:31:45 -0400] justincampbell: dkador: the berkshelf team is pretty big on versioning. internally we have jenkins upload a new cookbook version with every successful build
[2013-04-08 00:31:58 -0400] justincampbell: dkador: pin cookbook versions in chef-server environments
[2013-04-08 00:32:17 -0400] justincampbell: then its easy to test locally with vagrant, and upgrade staging/prod when youre ready
[2013-04-08 00:32:36 -0400] justincampbell: the berkshelf default is going to be, if its not already, to freeze cookbooks on upload
[2013-04-08 00:32:50 -0400] justincampbell: so you cant overwrite a version
[2013-04-08 00:33:01 -0400] justincampbell: dkador: is that the version/dependency issues you were mentioning?
[2013-04-08 00:33:06 -0400] dkador: hmm, maybe that's what's going on.  some of the errors aren't the clearest.
[2013-04-08 00:33:24 -0400] justincampbell: dkador: if you gist a log we can take a look
[2013-04-08 00:33:39 -0400] dkador: cool, let me see if I can get that going.
[2013-04-08 00:34:13 -0400] dkador: have you guys ever written up your deployment process?  I'd love to read about how you handle things.
[2013-04-08 00:34:30 -0400] dkador: especially with respect to what conventions you all use for versioning/envs
[2013-04-08 00:35:08 -0400] justincampbell: hmm
[2013-04-08 00:35:32 -0400] justincampbell: dkador: theres this http://www.slideshare.net/resetexistence/the-berkshelf-way
[2013-04-08 00:36:39 -0400] dkador: cool, let me read through this.
[2013-04-08 00:36:49 -0400] dkador: in the mean time, here's a gist: https://gist.github.com/af78055fa37f37dde686
[2013-04-08 00:36:58 -0400] dkador: I /think/ this is because I have a different version of the git cookbook on my server
[2013-04-08 00:37:17 -0400] dkador: let me know if you want the output with debug info included
[2013-04-08 00:39:17 -0400] justincampbell: dkador: thats a bug in this project https://github.com/RiotGames/ridley
[2013-04-08 00:39:45 -0400] justincampbell: can you put gem 'ridley', github: 'RiotGames/ridley' in your gemfile, and then bundle update, and try again
[2013-04-08 00:39:58 -0400] dkador: oh cool, you guys forked ridley?  nice.
[2013-04-08 00:40:08 -0400] dkador: no, wait.  it's just yours. :P
[2013-04-08 00:40:16 -0400] justincampbell: dkador: no, the guy that wrote it works there, we just moved it to the riot org
[2013-04-08 00:40:19 -0400] justincampbell: :)
[2013-04-08 00:40:25 -0400] dkador: yeah, got it. duh. ;)
[2013-04-08 00:40:34 -0400] dkador: where are you guys located, btw?
[2013-04-08 00:41:18 -0400] pipework: Space
[2013-04-08 00:43:02 -0400] justincampbell: dkador: few offices, main one is in santa monica, ca
[2013-04-08 00:44:33 -0400] dkador: ah, cool. was hoping you'd have somebody in san francisco so I could buy one of you a drink ;)
[2013-04-08 00:45:09 -0400] justincampbell: dkador: not currently but a few of us will be there for chefconf :)
[2013-04-08 00:45:17 -0400] dkador: awesome.
[2013-04-08 00:45:17 -0400] justincampbell: my first time there personally
[2013-04-08 00:45:27 -0400] justincampbell: im hoping to go on a burrito tour
[2013-04-08 00:45:34 -0400] justincampbell: i hear mission is the spot
[2013-04-08 00:46:05 -0400] justincampbell: dkador: where do you work?
[2013-04-08 00:46:31 -0400] dkador: ooh, if you've never been there are a ton of spots you should hit.
[2013-04-08 00:46:49 -0400] dkador: I co-founded a startup called Keen IO a little over a year go
[2013-04-08 00:46:55 -0400] dkador: we're on the west side of the city
[2013-04-08 00:47:07 -0400] justincampbell: commander keen?
[2013-04-08 00:47:30 -0400] joonas: dkador: oh, that techstars company?
[2013-04-08 00:47:44 -0400] joonas: or am I thinking different keen
[2013-04-08 00:48:28 -0400] dkador: just like commander keen ;)
[2013-04-08 00:48:34 -0400] dkador: joonas: yep, that's us!
[2013-04-08 00:48:59 -0400] justincampbell: gogo inflight doesnt like your wesite for some reason
[2013-04-08 00:49:01 -0400] justincampbell: oh there we go
[2013-04-08 00:49:11 -0400] justincampbell: dkador: is this comparable to librato?
[2013-04-08 00:49:47 -0400] dkador: justincampbell: there are definite similarities
[2013-04-08 00:49:54 -0400] justincampbell: ive been messing with them the past few days
[2013-04-08 00:49:56 -0400] justincampbell: on a personal project
[2013-04-08 00:50:22 -0400] justincampbell: im afraid of instrumenting my background jobs though because we do 50k of them a day
[2013-04-08 00:50:23 -0400] justincampbell: but id like to know how long they take
[2013-04-08 00:50:40 -0400] dkador: oh, you should definitely be instrumenting those
[2013-04-08 00:50:48 -0400] dkador: we can handle 50k events a day with no problems
[2013-04-08 00:51:32 -0400] justincampbell: dkador: out of curiousity, what do you use for your ingestion endpoints?
[2013-04-08 00:51:35 -0400] justincampbell: language/framework
[2013-04-08 00:51:49 -0400] dkador: python/tornado
[2013-04-08 00:51:56 -0400] justincampbell: cool
[2013-04-08 00:53:03 -0400] dkador: yeah, it's fun stuff. came from a JVM background for a number of years so this is a nice change of pace.
[2013-04-08 00:53:36 -0400] joonas: dkador: cool, I think I met you guys in Boulder this past summer :)
[2013-04-08 00:54:12 -0400] dkador: I switched my gemfile to what you suggested.  looks like I need to clean up some dependencies: https://gist.github.com/9cf72428b232c00d162e
[2013-04-08 00:54:22 -0400] dkador: I just love dealing with nokogiri ;)
[2013-04-08 00:54:50 -0400] dkador: joonas: oh, really?  small world. :)  who are you with?
[2013-04-08 00:56:48 -0400] joonas: dkador: I was with a different company at the time, I'm with DigitalOcean now :)
[2013-04-08 00:56:57 -0400] justincampbell: joonas: <3 <3 <3
[2013-04-08 00:57:08 -0400] dkador: ah cool, digital ocean is great.
[2013-04-08 00:57:17 -0400] joonas: justincampbell: hey
[2013-04-08 00:57:51 -0400] justincampbell: joonas: i run my personal jenkins inside on digital ocean
[2013-04-08 00:57:59 -0400] justincampbell: and youre my backup plan if heroku dies
[2013-04-08 00:58:19 -0400] joonas: ha :)
[2013-04-08 00:58:22 -0400] joonas: glad to hear
[2013-04-08 00:59:21 -0400] justincampbell: joonas: theyre in nyc right? everyone onsite or remote?
[2013-04-08 00:59:47 -0400] joonas: justincampbell: we're in NYC yes
[2013-04-08 00:59:51 -0400] joonas: onsite
[2013-04-08 01:00:49 -0400] joonas: well, we've some support that are remote
[2013-04-08 01:07:24 -0400] dkador: headed off for now.  thanks for your help, justin.  I'm sure I'll be back later to bother you.
[2013-04-08 01:07:50 -0400] justincampbell: dkador: ha k, dont hesitate to open an issue on ridley or berkshelf repos, even if its just a question
[2013-04-08 01:07:54 -0400] justincampbell: also theres a room #berkshelf
[2013-04-08 06:54:54 -0400] dn: I would like to use chef for deployment, but I wonder how you 'sync' the deployment on the machines. Since they all poll at different times for changes it looks like we have to ensure that the old & new version will work together - is that right?
[2013-04-08 06:56:12 -0400] Mithrandir: yes
[2013-04-08 07:43:34 -0400] smith3v: Hi guys
[2013-04-08 07:58:31 -0400] BryanWB: is there a knife-lxc?
[2013-04-08 07:59:05 -0400] BryanWB: jespada, hey buddy!
[2013-04-08 10:09:00 -0400] Gue______: hi, I'm looking for for a Chef Windows expert to consult for a day or two with our startup - does anyone have any recommendations?
[2013-04-08 10:13:36 -0400] Gue______: Give me a shout if you know someone, thanks
[2013-04-08 10:14:24 -0400] specialsauce: Gue______, not a recommendation (not used them) but if you're in the uk what about dtosolutions.com?
[2013-04-08 10:14:40 -0400] Gue______: thanks I'll check them out
[2013-04-08 10:52:24 -0400] railsraider: Hi, im lookng for a way to refactor my attributes, they quickly becoming unreadable in my nagios cookbook , is there a more concise way to define attributes like a tree?
[2013-04-08 11:04:05 -0400] specialsauce: railsraider: we wrote some code of our own to support an "*.ini" style format, much easier - we hit the same issue you are doing
[2013-04-08 11:04:33 -0400] railsraider: specialsauce: i'd love to see an example
[2013-04-08 11:05:06 -0400] railsraider: all my nagios plugins are set via attributes, and so it quickly becomes over 1000 lines in attribute files
[2013-04-08 11:05:19 -0400] railsraider: i want a cleaner way to create the attributes
[2013-04-08 11:05:27 -0400] specialsauce: railsraider - drop me an email and i'll try and get something to you - dan at wesuckatcomputers dot com
[2013-04-08 11:05:32 -0400] railsraider: love it if i can do a straight hash
[2013-04-08 11:05:42 -0400] railsraider: thanks
[2013-04-08 11:08:26 -0400] shay-: Hi, I am using chef for automatin installation and it's realy great. But what do you recommend for updating? I mean you have to disabled the service on loadbalancer, make sure only one side of the cluster is down and so on. In my understanding this is better done with a script. What is best practise?
[2013-04-08 11:11:15 -0400] railsraider: shay-:  what are you trying to update?
[2013-04-08 11:12:23 -0400] shay-: in my case its some company internal software
[2013-04-08 11:13:11 -0400] railsraider: describe better what you want to do, cause its unclear
[2013-04-08 11:15:19 -0400] n0xie: maybe take a look at sentry
[2013-04-08 11:15:56 -0400] n0xie: wrong channel
[2013-04-08 11:19:06 -0400] shay-: but actually its just disavble one side of the cluster in loadbalancer, update rpm, sync some config files via ssh, start the service, wait until its started, enable in loadbalancer, and then same for second side
[2013-04-08 11:22:56 -0400] railsraider: shay-:  load balancer, is it haproxy?
[2013-04-08 11:24:01 -0400] railsraider: if you are using haproxy > 1.3 you can use echo with socat  to enable disbale the lb and you can do it ion a script block
[2013-04-08 11:27:27 -0400] shay-: i think the problem is not the enable disable itself but the timing when to do what
[2013-04-08 11:29:25 -0400] shay-: because it runs every 30 minutes or something; how should it know if it can update itself or the second side is down now? I also have dependencies between client and server, so the client is only allowed to update if the server is already updated and fetch some config files
[2013-04-08 11:31:08 -0400] shay-: maybe with some attributes so it can check if the oder side is down and so on, but I think it gets quite complex
[2013-04-08 11:39:06 -0400] railsraider: shay-:  sorry but im not inside your head and can't see the whole picture,  what service, what load balancer, does it have api to query status,
[2013-04-08 11:40:09 -0400] railsraider: does anyone know if there's a way to do something similar to definition or library for attributes?
[2013-04-08 11:40:39 -0400] railsraider: i'd like to refactor the attributes of a huge attributes  file
[2013-04-08 11:45:47 -0400] Flexa: hi guys - in a recipe what does 'service "apache"' do on its own?
[2013-04-08 11:46:23 -0400] Flexa: such as here : https://github.com/lusis/chef-logstash/blob/master/recipes/kibana.rb
[2013-04-08 11:46:38 -0400] nebrera: helllo
[2013-04-08 11:46:48 -0400] nebrera: I am getting error "HTTP Request Returned 404 Not Found: Cannot load data bag certs item "
[2013-04-08 11:46:58 -0400] nebrera: this is because the databag is still not there
[2013-04-08 11:47:25 -0400] nebrera: I would like to do something different depends of if it has the databag or not
[2013-04-08 11:50:27 -0400] nebrera: I am using:    Chef::DataBagItem.load("example_databag", "dg-item")
[2013-04-08 11:50:40 -0400] nebrera: and the databag item is not created yet
[2013-04-08 11:51:01 -0400] nebrera: I have put last command between:   begin and rescue block
[2013-04-08 11:51:09 -0400] nebrera: but still the exception is thrown
[2013-04-08 12:00:34 -0400] railsraider: nebrera: do a search, if the results of the search are not empty its there. then you can do you logic
[2013-04-08 12:01:47 -0400] railsraider: guys what's the recommended way to deal with huge attribute files? should i split them into smaller chunks, should i rethink the way of implementing them?
[2013-04-08 12:02:48 -0400] railsraider: i have nagios cookbook, with a loop over all attributes of check_graphite and based on that i create the plug template
[2013-04-08 12:03:03 -0400] railsraider: these is quickly becoming a huge attribute file
[2013-04-08 12:03:34 -0400] railsraider: i wanted to have the option of setting a plugin via attribute
[2013-04-08 12:05:54 -0400] nebrera: I see
[2013-04-08 12:05:55 -0400] nebrera: thanks
[2013-04-08 12:19:41 -0400] nebrera: <railsraider> it worked, thanks
[2013-04-08 12:19:47 -0400] railsraider: great
[2013-04-08 12:27:37 -0400] gp5st: anyone use the deploy resource with svn? is there a nice way to checkout a tag?
[2013-04-08 12:28:43 -0400] tomduckering: Hi folks - I'm trying to work out the neatest way to configure a monitoring agent for some of my apps. Apps are nicely catered for with a resource/provider. It's possible for there to be more than one app deployed on a given machine. The problem comes with the monitoring we've got which needs to be configured in one file. So I'm wondering if I can have my "app" providers notify and provide config data to another recipe which
[2013-04-08 12:28:44 -0400] tomduckering: will configure the monitoring.
[2013-04-08 12:29:42 -0400] tomduckering: I'm not sure if there's an existing chef idiom that would help me cater for this situation.
[2013-04-08 13:07:31 -0400] zrankfappa: anyone here used opensource chef server with openstack?
[2013-04-08 13:12:46 -0400] zrankfappa: nobody?
[2013-04-08 13:21:27 -0400] visit0r: I would give it a little time
[2013-04-08 13:21:42 -0400] visit0r: the channel seems most active later on
[2013-04-08 13:21:48 -0400] visit0r: still a little early I am thinking
[2013-04-08 13:30:57 -0400] visit0r: but there is a training at ChefConf 2013 on it
[2013-04-08 13:31:01 -0400] visit0r: so I imagine people have :)
[2013-04-08 13:31:13 -0400] pikesley: zrankfappa: what's the context here?
[2013-04-08 13:44:35 -0400] marlonb: Hello everyone.
[2013-04-08 13:46:32 -0400] marlonb: Workflow question:  I like to use search() in recipes for finding specific nodes for settings.  However, when I'm running all this stuff on laptop using vagrant I don't want to be pulling the memcached servers for our development environment.  Is creating a personal environment a sane way to deal with this?
[2013-04-08 13:47:03 -0400] marlonb: this way a search would limit the node to just my environment...finding only the memcached servers that are on my laptop.
[2013-04-08 14:11:44 -0400] willejs: when using the chef-client -j JSON_ATTRIBS option, it sets the supplied attributes at override level, for that run only, and they are reset on next run?
[2013-04-08 14:15:29 -0400] jespada: Hi BryanWB .. how r u, congrats for the new gig :)
[2013-04-08 14:17:23 -0400] jespada: BryanWB, I was wondering which cookbook to use(regarding cassandra).. or is recommended by the community..found this: https://github.com/michaelklishin/cassandra-chef-cookbook  and the one from infochi
[2013-04-08 14:17:56 -0400] BryanWB: jespada, tks dude i will check that out
[2013-04-08 14:18:01 -0400] BryanWB: new gig, is busssy!
[2013-04-08 14:20:56 -0400] jespada: BryanWB, I need to play with chef + cassandra, need to find time.. but I'll use that one as a base.. if u came up with better stuff as usual ;) pls do let me know
[2013-04-08 14:31:40 -0400] BryanWB: jespada, will do, cassandra is pretty rad so far
[2013-04-08 14:33:53 -0400] zrankfappa: hey guys, hopefully a quick one
[2013-04-08 14:34:19 -0400] zrankfappa: with knife openstack pluggin, what is the syntax for --distro?
[2013-04-08 14:35:20 -0400] zrankfappa: i've tried --distro=ubuntu --distro=ubuntu12.04-gems.erb --distro=ubuntu12.04
[2013-04-08 14:52:14 -0400] zrankfappa: nvm got it :)
[2013-04-08 14:52:22 -0400] zrankfappa: anyone alive in here?
[2013-04-08 14:53:27 -0400] drrk: No, i'm dead
[2013-04-08 14:55:10 -0400] cwj: zrankfappa: i dont use knife openstack myself, but from quick read of the source I infer that it is using the same bootstrap templates that ship with knife itself https://github.com/opscode/chef/tree/master/lib/chef/knife/bootstrap
[2013-04-08 15:14:49 -0400] zrankfappa: cool thanks
[2013-04-08 15:15:08 -0400] zrankfappa: i'm able to build openstack nodes using chef,but it's failing right at the end syncronzing cookbooks
[2013-04-08 15:16:04 -0400] zrankfappa: would really appreciate some help trying to fix this last hurdle
[2013-04-08 15:16:09 -0400] zrankfappa: well, hopefully the last hurdle
[2013-04-08 15:16:43 -0400] zrankfappa: bombs out with this ....  FATAL: TypeError: can't convert Net::ReadAdapter into String
[2013-04-08 15:16:58 -0400] zrankfappa:  Error Syncing Cookbooks:
[2013-04-08 15:17:30 -0400] zrankfappa: it claims to dump stacktrace out to a file that does'nt exist
[2013-04-08 15:17:44 -0400] zrankfappa: i'm running the command with -VV
[2013-04-08 15:19:46 -0400] zrankfappa: cwj?
[2013-04-08 15:21:37 -0400] cwj: zrankfappa: pastebin/gist your stacktrace
[2013-04-08 15:23:04 -0400] zrankfappa: kk
[2013-04-08 15:23:17 -0400] zrankfappa: I thought it wasn't generating one, I guess the stacktrace is on hte actual node not the workstation
[2013-04-08 15:23:21 -0400] zrankfappa: 1 sec i'll grab it
[2013-04-08 15:28:41 -0400] zrankfappa: http://pastebin.com/T9vM4fjE
[2013-04-08 15:38:12 -0400] yfeldblum: anyone using docker yet?
[2013-04-08 15:39:07 -0400] bharghav9: Hi OpsCoders...Can anyone suggest me on best practices with respect to exceptional handling. How should I deal with an exception(one which can't recover, one which I can recover)....Can anyone share their experiences?
[2013-04-08 15:41:51 -0400] behemphi: @bharghav9 I recently used a begin/rescue so that I could search for a data bag that was not necessarily there
[2013-04-08 15:42:41 -0400] yfeldblum: behemphi, you can use `Chef::DataBag.list.include?("my-data-bag-name")` to test whether a data-bag named "my-data-bag-name" exists
[2013-04-08 15:43:10 -0400] behemphi: yfeldblum I should have said data_bag_item
[2013-04-08 15:43:29 -0400] zrankfappa: cwj any thoughts?
[2013-04-08 15:43:45 -0400] yfeldblum: bharghav9, be more specific?
[2013-04-08 15:44:02 -0400] behemphi: But I did not know about that method!
[2013-04-08 15:47:20 -0400] bharghav9: Thanks yfeldblum...for response
[2013-04-08 15:47:45 -0400] behemphi: @bharghav9 here is my code https://gist.github.com/behemphi/5337841
[2013-04-08 15:48:05 -0400] bharghav9: For example....I want to create a user from chef recipe...but that user already exist ...so I want to log an error explaining the reason and exit from chef
[2013-04-08 15:48:16 -0400] behemphi: though I will dig a bit on the Chef::DataBag object to see if I can clean it up (thx @yfeldblum)
[2013-04-08 15:48:17 -0400] bharghav9: Thanks Behemphi...
[2013-04-08 15:48:27 -0400] bharghav9: I will look into it...
[2013-04-08 15:48:50 -0400] yfeldblum: bharghav9, the "Chef Way" is a little bit different
[2013-04-08 15:49:11 -0400] yfeldblum: bharghav9, in the Chef Way, you first check if the user exists, and if the user doesn't exist, then you create the user
[2013-04-08 15:49:34 -0400] yfeldblum: bharghav9, but if the user already exists, then you just skip that step
[2013-04-08 15:50:10 -0400] zrankfappa: guys, my bootstrap is failing at 'syncronizing cookbooks' with teh following stacktrace, please can anyone help? http://pastebin.com/T9vM4fjE
[2013-04-08 15:53:33 -0400] bharghav9: ohh ok...but in my scenario...I don't want to proceed....I want to exit...so just want to learn best practices for experts....the example might not be apt for this scenario... but generally "What should I do...if I get an exception"...so the best way to Ruby "rescue" blog...log the error and exit?
[2013-04-08 15:53:40 -0400] pb56673: Anyone got any insight on cookbook development in opscode? Ideally I want to extend http://community.opscode.com/cookbooks/unbound though it's provided by opscode there isn't a github repo or any jira presence and I'd rather not run my own fork
[2013-04-08 15:55:51 -0400] yfeldblum: bharghav9, if a recipe raises an exception, chef will log the exception and quit (you don't have to do it)
[2013-04-08 15:59:18 -0400] bharghav9: ohh..Thanks "yfeldblum"....but isn't it best practice to catch the exception...Log additional error message in addition to exception message?.. I am just starting to write my recipes...and I want to start learning about best practices..while I am new..:-)
[2013-04-08 16:00:18 -0400] yfeldblum: bharghav9, no, it's not a best practice to do that; some people do that sometimes when there's a specific reason to do it; but in general, you only rescue exceptions that you can *handle*; if you can't handle it, don't rescue it
[2013-04-08 16:03:46 -0400] zrankfappa: anyone? please I'm a broken man
[2013-04-08 16:10:12 -0400] bharghav9: Thanks "yfeldblum"......so basically I can catch exception in "rescue" blog..write log as per our company standards and then raise the exception again back...Is this Ok...
[2013-04-08 16:10:44 -0400] yfeldblum: bharghav9, you *can* do that; most people would not see any real reason to do that, though
[2013-04-08 16:12:57 -0400] Mez: zrankfappa: looks like there's some trouble syncing your cookbooks - anything showing up in the server logs?
[2013-04-08 16:15:06 -0400] zrankfappa: nope, strangly they are empty
[2013-04-08 16:16:58 -0400] zrankfappa: any ideas?
[2013-04-08 16:17:13 -0400] bharghav9: Thanks Yfeldblum for your advice on this.....
[2013-04-08 16:29:12 -0400] zrankfappa: can anyone suggest another channel that might have people able to help with this?
[2013-04-08 16:29:17 -0400] zrankfappa: is it more code related?
[2013-04-08 16:38:47 -0400] techminer1: I'm using 'knife bootstrap' to add a new node to Chef.  Where does the /etc/chef/validation.pem file come from, because knife bootstrap tries to add the node and is complaining "Failed to authenticate to the chef server (http 401)."
[2013-04-08 16:38:54 -0400] techminer1: Chef 11.4.0
[2013-04-08 16:39:31 -0400] zrankfappa: at last!
[2013-04-08 16:39:36 -0400] zrankfappa: someone using knife bootstrap :)
[2013-04-08 16:39:51 -0400] zrankfappa: teh validation.pem comes from the /etc/chef-server dir
[2013-04-08 16:40:13 -0400] makerbreakr: damn it, zrankfappa, I ran into your problem awhile back
[2013-04-08 16:40:16 -0400] makerbreakr: i cant find how i fixed it
[2013-04-08 16:40:27 -0400] makerbreakr: it has something to do with the ruby version though
[2013-04-08 16:40:43 -0400] zrankfappa: on the workstatinon, server or client?
[2013-04-08 16:40:44 -0400] rep0st: chef 11.4 seems to be happier with ruby 1.9.1
[2013-04-08 16:40:53 -0400] makerbreakr: the node
[2013-04-08 16:41:01 -0400] techminer1: I'm running 'knife bootstrap' from my workstation
[2013-04-08 16:41:39 -0400] rep0st: techminer1: i've usually just grabbed it from the chef-server in /etc/chef-server and copied it to my workstation
[2013-04-08 16:41:42 -0400] teukka: techminer1: it is configured with `validation_key` in your knife configuration
[2013-04-08 16:42:06 -0400] zrankfappa: I'm using ...
[2013-04-08 16:42:31 -0400] teukka: techminer1: default is /etc/chef/validation.pem which is probably not correct in your workstation
[2013-04-08 16:42:56 -0400] zrankfappa: i'm trying to mate you mine but irc isnt letting me paste it
[2013-04-08 16:43:07 -0400] zrankfappa: I'll do you a quick pastebin, one sec
[2013-04-08 16:43:14 -0400] zrankfappa: i'll put comments in it
[2013-04-08 16:43:20 -0400] techminer1: teukka: validation_key           '/Users/matt/.chef/chef-validator.pem'
[2013-04-08 16:44:31 -0400] techminer1: knife bootstrap adds it to the new node as /etc/chef/valication.pem
[2013-04-08 16:44:40 -0400] adnichols: Someone have a good reference for using a custom template to override a template in a 3rd party cookbook? Trying to build my own recipe that just allows me to use my own template vs. the one in the existing cookbook
[2013-04-08 16:44:43 -0400] techminer1: validation.pem
[2013-04-08 16:46:13 -0400] teukka: techminer1: did you copy it originally from the chef server? That is how it should work, so there must be something wrong with the key
[2013-04-08 16:46:51 -0400] behemphi: @adnichols Not sure if I understand you, but if you cookbook runs _after_ the 3rd party cookbook it will simply overwrite the exsting file with that of your template
[2013-04-08 16:47:22 -0400] adnichols: @behemphi ok, so if I just re-define the template resource it'll overwrite - that makes sense
[2013-04-08 16:47:57 -0400] techminer1: I compared the chef-validator.pem on my workstation to the validation.pem file on the new node and they are the same.and they match /etc/chef-server/chef-validator.pem on my chef server.  Does the file name have to be the same?
[2013-04-08 16:48:08 -0400] adnichols: would be nicer if I could just modify the template source - that's all I'm trying to do
[2013-04-08 16:48:47 -0400] geekbri: adnichols: you can use the "cookbook" attribute of the template resource to tell it which cookbook to take the template from.  It defaults to the current cookbook if its nil
[2013-04-08 16:50:30 -0400] adnichols: @geekbri ok, but can I modify that attribute outside of editing the original cookbook?
[2013-04-08 16:50:34 -0400] gmr: I've got an issue where a cookbook works for everything but actually starting the service at the end, I receive no errors, and if I start the service manually (centos 6.4) it works just fine... are there any suggestions to how I can track down why it's not starting as expected? (Other services start just fine)
[2013-04-08 16:51:04 -0400] geekbri: adnichols: no, not really.
[2013-04-08 16:51:27 -0400] geekbri: adnichols: best case scenario you get the cookbook maintainer to accept a patch that reads the 'cookbook' attribute value from an attribute that you can set
[2013-04-08 16:51:36 -0400] adnichols: @geekbri ok :), I could just modify the original template - trying to avoid forking or something like that
[2013-04-08 16:51:38 -0400] geekbri: Well i mean there may be other ways of handling this, that seems the most straight forward to me.
[2013-04-08 16:51:56 -0400] zrankfappa: @teukka http://pastebin.com/9kHzKAmX
[2013-04-08 16:51:59 -0400] geekbri: well if you modify the template which is in the cookbook isn't that forking it :)
[2013-04-08 16:52:09 -0400] adnichols: I thought there was a  way to do this - just can't find a reference to it
[2013-04-08 16:52:10 -0400] zrankfappa: addeda few comments, let me know if it's enough
[2013-04-08 16:52:39 -0400] pb56673: adnichols: https://github.com/bryanwb/chef-rewind
[2013-04-08 16:52:45 -0400] ryker: hi everyone. I'm wondering.  If I specify an attribute in a role that is an array of strings, is the order of the strings in the array guaranteed to be the same when I use that attribute in a recipe? Specifically, if I use join on the array?
[2013-04-08 16:53:24 -0400] adnichols: @pb56673 ah hah, that looks like what I'm after - thanks!
[2013-04-08 16:53:34 -0400] ranjibd: ryker: yes
[2013-04-08 16:53:50 -0400] pb56673: adnichols: Have a look at the source, so simple but so nice.
[2013-04-08 16:54:08 -0400] pb56673: nice might equal useful in this case.
[2013-04-08 16:54:17 -0400] zrankfappa: now we got some fresh blood, reposting my question, My bootstrap fails loading recipes right at the end of server build and load, paste of error here http://pastebin.com/T9vM4fjE
[2013-04-08 16:54:41 -0400] zrankfappa: cookbook syncing error
[2013-04-08 16:55:01 -0400] ranjibd: ryker: they can be merged by chef at times.. so if you are declaring them at multiple places.. take a look at chef attribute deep merging docs
[2013-04-08 16:57:37 -0400] teukka: zrankfappa: I think you meant that to techminer1 =)
[2013-04-08 16:57:49 -0400] zrankfappa: ah yes
[2013-04-08 16:59:02 -0400] ryker: ranjibd: that's what I thought. thx.  I'm not declaring it in multiple places. Must be something else going on.
[2013-04-08 17:00:51 -0400] ranjibd: spit out the array before using it using Chef::Log.info(array)
[2013-04-08 17:01:22 -0400] ranjibd: also , you can use chef-shell -z on that node and check out that attribute's value directly
[2013-04-08 17:05:32 -0400] ryker: ranjibd: didn't even think of that.  thx. I'll try shef.
[2013-04-08 17:05:58 -0400] ranjibd: shef is known as chef-shell as of chef 11
[2013-04-08 17:10:02 -0400] ryker: ranjibd: i'm slow to upgrade. :)
[2013-04-08 17:17:44 -0400] techminer1: Is there a way to recreate the chef-validator.pem on the server?  I wonder if the file doesn't match what's in the database?
[2013-04-08 17:18:12 -0400] techminer1: Or a way to regenerate the chef-validator.pem from what chef-server has in it's database?
[2013-04-08 17:20:48 -0400] ranjibd: techminer1: yes.. both are possible..
[2013-04-08 17:20:59 -0400] ranjibd: are you on chef 10 or chef 11
[2013-04-08 17:21:31 -0400] techminer1: chef 11
[2013-04-08 17:21:48 -0400] ranjibd: chef 11 allows you to directly create validator client .. by specifying the  pub key
[2013-04-08 17:22:07 -0400] ranjibd: theres a special flag, that you have to turn on
[2013-04-08 17:22:18 -0400] techminer1: Ok.
[2013-04-08 17:23:12 -0400] ranjibd: techminer1: do you have an admin client ?
[2013-04-08 17:23:22 -0400] techminer1: All my old clients are still connecting fine.but I see they have a /etc/chef/client.pem..that doesn't match the /etc/chef-server/chef-validator.pem on the server.
[2013-04-08 17:23:34 -0400] techminer1: yes I have an admin client that is working
[2013-04-08 17:25:37 -0400] ranjibd: techminer1: that should not match anyway
[2013-04-08 17:26:21 -0400] ranjibd: validation.pem is a special cert which is used only during the registration (i.e. when the node runs chef for the first time), otherwise each client has their own unique key
[2013-04-08 17:26:27 -0400] ranjibd: i.e. client.pem
[2013-04-08 17:26:32 -0400] techminer1: OK
[2013-04-08 17:27:11 -0400] techminer1: I have the old validation PEM file from my old CHEF10 server..I wonder if putting that on the new node would make it work?
[2013-04-08 17:29:25 -0400] techminer1: ranjibd:  yes.the old chef10 validation.pem works.  But that doesn't match the /etc/chef-server/chef-validator.pem file on my new Chef11 server.  So the server has the right one in the DB and the wrong one in the file?
[2013-04-08 17:30:14 -0400] ranjibd: if all the chef nodes have a working client.pem then dont worry about the validation.pem file.. it wont be used
[2013-04-08 17:30:25 -0400] ranjibd: u need it only if you plan to reregister them
[2013-04-08 17:31:30 -0400] techminer1: I can just copy the CHEF10 pem file to /etc/chef-server/chef-validator.pem on my CHEF11 server.and then clean up my admin workstations copy too.  This has to work.I add new nodes all the time.
[2013-04-08 17:37:45 -0400] kindsol: Ohai!  How many folks are using brian berry's chef-rewind gem? for making minor edits to community cookbooks? https://github.com/bryanwb/chef-rewind
[2013-04-08 17:38:17 -0400] kindsol: Seems like a great way to go!
[2013-04-08 17:38:55 -0400] kindsol: allows me to customize community cookbooks, but still have a simple way to get updates from upstream
[2013-04-08 17:39:09 -0400] kindsol: Is there a different "best practice" that I should look into?
[2013-04-08 17:39:37 -0400] techminer1: ranjibd:  That was it.  Using my old validation.pem file solved my problem.  I must have missed a step when upgrading to Chef11.  The pem file and DB apparently didn't match up on my new Chef11 server so I was copying a bad chef-validator.pem to my new nodes.
[2013-04-08 17:41:01 -0400] ranjibd: kindsol: i do the same.. maintain the community cookbooks using berks, and accommodate customization via wrapper-cookbooiks containing chef-rewind .
[2013-04-08 17:41:51 -0400] ranjibd: but i prefer to customize via attributes, if refactoring needed, do the fork-pull request github workflow
[2013-04-08 17:42:10 -0400] ranjibd: and till then point berkshelf to my fork
[2013-04-08 17:42:44 -0400] gleam: what's the difference between that and doing resources("user[postgres]").home '/var/lib/pgsql/9.2'?
[2013-04-08 17:43:46 -0400] kindsol: ranjibd: right on.  thanks for the response.  the "wrapper" pattern, seems a lot better than forking for custom stuff.  Yeah, still need to fork if you are going to contribute the change back.
[2013-04-08 17:46:26 -0400] ranjibd: kindsol: often times, wrapper cookbooks also means the original cookbook needs some refactoring.. if the customization is generic enough
[2013-04-08 17:46:33 -0400] kindsol: ranjibd: for customizing with attributes do I understand that you correctly: you are saying that if you have to use the wrapper pattern, you will look for a way to contribute a refactor to the upstream cookbook so using chef-rewind will not be necessary?
[2013-04-08 17:46:54 -0400] ranjibd: yes
[2013-04-08 17:46:55 -0400] kindsol: yep
[2013-04-08 17:46:58 -0400] kindsol: :)
[2013-04-08 17:47:07 -0400] kindsol: make perfect sense
[2013-04-08 17:47:14 -0400] kindsol: s/make/makes/
[2013-04-08 17:47:26 -0400] ranjibd: yo me its much easy to understand a cookbook its recipe and its customizations via attributes
[2013-04-08 17:48:02 -0400] ranjibd: but if you start rewinding or monkey patching.. i have to look at multiple places to understand whats it doing ..
[2013-04-08 17:48:06 -0400] rep0st: ranjibd: +1
[2013-04-08 17:48:26 -0400] kindsol: true
[2013-04-08 17:48:34 -0400] kindsol: that is a good point
[2013-04-08 17:48:49 -0400] ranjibd: i prefer to adhere to certain conventions for such cases, like all wrapper cookbooks should be prefixed with organization. like foo-nginx
[2013-04-08 17:48:52 -0400] ranjibd: etc
[2013-04-08 17:49:39 -0400] kindsol: ah yeah. Gangnam style! http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-04-08 17:49:46 -0400] rep0st: ranjibd: agreed. Cookbooks shouldn't really ever change. The change should happen where you input data. Where that data gets inputted has to be a standard set by the organization, whether it be roles or chef_environments
[2013-04-08 17:51:05 -0400] visit0r: can someone help me with an error around not being able to load 'berkshelf/vagrant' from my Vagrantfile
[2013-04-08 17:51:07 -0400] visit0r: ?
[2013-04-08 17:51:27 -0400] visit0r: I have a Gemfile which lists gem 'berkshelf'
[2013-04-08 17:52:01 -0400] visit0r: and at the top of my Vagrantfile I have: "require berkshelf/vagrant"
[2013-04-08 17:52:04 -0400] visit0r: and I do a bundle install
[2013-04-08 17:52:11 -0400] visit0r: and then try bundle exec vagrant up
[2013-04-08 17:52:14 -0400] visit0r: or, a vagrant up
[2013-04-08 17:52:15 -0400] ivey: which vagrant?
[2013-04-08 17:52:17 -0400] visit0r: both error out
[2013-04-08 17:52:35 -0400] ranjibd: visit0r: vagrant, berkshelf versions?
[2013-04-08 17:52:45 -0400] visit0r: which vagrant: '~/.rvm/gems/ruby-1.9.3-p392/bin/vagrant'
[2013-04-08 17:52:48 -0400] ivey: if vagrant 1.1, it needs the berkshelf-vagrant plugin installed inside it, it's not bundle exec anymore
[2013-04-08 17:52:48 -0400] kindsol: visit0r: I had some issues when I upgraded to vagrant 1.1
[2013-04-08 17:53:03 -0400] visit0r: vagrant (1.0.7)
[2013-04-08 17:53:18 -0400] visit0r: berkshelf (1.3.1, 1.1.6)
[2013-04-08 17:53:22 -0400] ivey: gist me the error?
[2013-04-08 17:53:26 -0400] ivey: er us
[2013-04-08 17:53:43 -0400] kindsol: berkshelf 1.3 might be your problem
[2013-04-08 17:53:49 -0400] visit0r: Vagrantfile:1:in 'require': cannot load such file -- berkshelf/vagrant (LoadError)
[2013-04-08 17:53:56 -0400] visit0r: oh you think?
[2013-04-08 17:53:57 -0400] kindsol: I use this for my older Vagrantfiles
[2013-04-08 17:53:58 -0400] kindsol: gem 'berkshelf', '~> 1.2.1'
[2013-04-08 17:53:59 -0400] kindsol: gem 'vagrant', '~> 1.0.7'
[2013-04-08 17:54:06 -0400] visit0r: I was following the Gemfile and such from the latest opscode cookbooks
[2013-04-08 17:54:15 -0400] visit0r: that makes sense
[2013-04-08 17:54:19 -0400] visit0r: since my previous Gemfiles worked
[2013-04-08 17:54:34 -0400] visit0r: when I did gem 'berkshelf', ~> 1.1.6
[2013-04-08 17:54:48 -0400] visit0r: but, I brought down the latest 'runit' and 'jenkins' cookbooks from opscode
[2013-04-08 17:54:54 -0400] visit0r: and their Gemfiles were removing that dependency
[2013-04-08 17:55:00 -0400] visit0r: and just using gem 'berkshelf'
[2013-04-08 17:55:04 -0400] visit0r: which downloaded 1.3.1
[2013-04-08 17:55:56 -0400] visit0r: well thanks guys
[2013-04-08 17:56:07 -0400] visit0r: I will just roll back the need to an older version of berkshelf
[2013-04-08 17:56:41 -0400] kindsol: kindsol: yeah, seems like things are at a transition point.  I probably just need to bite the bullet and upgrade all my projects to the newer stuff.  But since I can't afford to yet, I have things pinned back to the past.
[2013-04-08 17:58:58 -0400] visit0r: yeah
[2013-04-08 17:59:00 -0400] visit0r: im in a mix-mode
[2013-04-08 17:59:04 -0400] visit0r: lol
[2013-04-08 17:59:18 -0400] visit0r: and I keep trying to follow the latest patters in the opscode cookbooks where and when it makes sense
[2013-04-08 17:59:25 -0400] visit0r: but this is one instance where it broke
[2013-04-08 18:03:18 -0400] doomviking: is this supposed to work: only_if { node.chef_environment == "dev"}
[2013-04-08 18:03:32 -0400] doomviking: because 10.24.0 just barfed at me
[2013-04-08 18:04:18 -0400] doomviking: where barfed = bork
[2013-04-08 18:04:24 -0400] ranjibd: doomviking: should work
[2013-04-08 18:04:32 -0400] ranjibd: doomviking: chef solo ?
[2013-04-08 18:05:48 -0400] doomviking: chef-server 11
[2013-04-08 18:06:16 -0400] doomviking: 11.0.6
[2013-04-08 18:06:21 -0400] doomviking: with 10.24.0 client
[2013-04-08 18:11:50 -0400] doomviking: I'm gonna crank on it a little bit more
[2013-04-08 18:14:57 -0400] doomviking: oh its nothing to do with that. my dev instances dont load munin::client, so cant access the munin_plugin resource.
[2013-04-08 18:15:06 -0400] doomviking: which has the conditional
[2013-04-08 18:15:24 -0400] doomviking: I should know how to read stack traces by now ;)
[2013-04-08 18:20:04 -0400] gyre008: does anyone here poll Rackspace API for stuff like Load Balanacer stuff ? ie sticking load balancer's IP into some configuration file ?
[2013-04-08 18:20:16 -0400] gyre008: if so what library are you guys using for this ? ie gem ...
[2013-04-08 18:27:04 -0400] kryptek: Can someone here tell me what the best way would be to access node attributes in a library file?
[2013-04-08 18:27:22 -0400] yfeldblum: kryptek, pass the node in as an argument
[2013-04-08 18:27:39 -0400] awgross: ^
[2013-04-08 18:27:40 -0400] kryptek: figured; that's what I did.. just wanted to make sure it was the 'right' way hehe
[2013-04-08 18:28:03 -0400] kryptek: thanks a lot
[2013-04-08 18:29:33 -0400] visit0r: do we know where the best practices are listed?
[2013-04-08 18:29:40 -0400] visit0r: for cookbook development etc.?
[2013-04-08 18:29:52 -0400] visit0r: or has anyone started a comprehensive list
[2013-04-08 18:30:18 -0400] visit0r: if such a thing exists, that is
[2013-04-08 18:30:52 -0400] geekbri: sounds like you just nominated yourself!
[2013-04-08 18:30:58 -0400] visit0r: :)
[2013-04-08 18:31:00 -0400] visit0r: i would be glad to
[2013-04-08 18:31:04 -0400] visit0r: if I were qualified for it
[2013-04-08 18:31:14 -0400] visit0r: I started an internal Wiki for it
[2013-04-08 18:31:25 -0400] visit0r: but I heard about Chef about 7 weeks ago
[2013-04-08 18:32:47 -0400] geekbri: Well I think you're qualified.  Also you don't have to provide all the data, just a place for people to submit and vote on it
[2013-04-08 18:33:06 -0400] zrankfappa: very simple question, i have a role called webserver, to install teh packages to my node what is the correct command?
[2013-04-08 18:33:10 -0400] visit0r: yeah
[2013-04-08 18:33:13 -0400] visit0r: that's what we need
[2013-04-08 18:33:18 -0400] zrankfappa: I'm trying knife node run_list add web01 role[webserver]
[2013-04-08 18:33:23 -0400] visit0r: opscode should open up some webspace for it :)
[2013-04-08 18:33:25 -0400] visit0r: a wiki page
[2013-04-08 18:33:40 -0400] zrankfappa: but that just outputs web01:
[2013-04-08 18:33:40 -0400] zrankfappa:   run_list: recipe[roles]
[2013-04-08 18:33:49 -0400] awgross: visit0r: you can send pull requests to their docs, they are OS
[2013-04-08 18:34:06 -0400] visit0r: awgross: point taken
[2013-04-08 18:34:10 -0400] visit0r: im also new to OS
[2013-04-08 18:34:13 -0400] visit0r: :)
[2013-04-08 18:34:17 -0400] zrankfappa: anyone?
[2013-04-08 18:34:18 -0400] awgross: hehe np
[2013-04-08 18:34:22 -0400] visit0r: i worked in completely closed source before
[2013-04-08 18:34:26 -0400] geekbri: welcome friend!
[2013-04-08 18:34:28 -0400] visit0r: but u guys are right
[2013-04-08 18:34:32 -0400] visit0r: thanks
[2013-04-08 18:34:38 -0400] visit0r: its pretty cool thus far
[2013-04-08 18:34:41 -0400] visit0r: to have a community
[2013-04-08 18:34:47 -0400] visit0r: to ping questions off of in real-time
[2013-04-08 18:34:52 -0400] visit0r: unheard of in previous line of work
[2013-04-08 18:35:08 -0400] visit0r: let me see about getting an open best practices page opened up
[2013-04-08 18:38:07 -0400] visit0r: so, is docs.opscode.com OS?
[2013-04-08 18:38:10 -0400] visit0r: I can update that?
[2013-04-08 18:38:57 -0400] teukka: gh docs.opscode.com
[2013-04-08 18:39:23 -0400] visit0r: ?
[2013-04-08 18:40:30 -0400] teukka: visit0r: sorry, wrong window. but here is the source for the page: https://github.com/opscode/chef-docs
[2013-04-08 18:40:59 -0400] teukka: well, s/page/site/
[2013-04-08 18:41:21 -0400] visit0r: teukka: hehe, gotcha, and I see now, gh meaning github... interesting
[2013-04-08 18:41:40 -0400] bharghav9: Hi Opscoders....does opscode have an API just like Java API...I mean for example ...how do I find all methods on "Chef::Log" class..definitely I can create instance of "Chef::Log" and do "public_methods" but is there good to way to get details about methods available on class and description about the methods
[2013-04-08 18:42:25 -0400] zrankfappa: ah, was just missing the quotes, thanks all
[2013-04-08 18:42:36 -0400] teukka: visit0r: yeah, a key for a custom search ;) but didn't work in this case :(
[2013-04-08 18:42:42 -0400] bougyman: bharghav9: ri
[2013-04-08 18:42:50 -0400] visit0r: teukka: Ah, fair enough
[2013-04-08 18:45:21 -0400] bharghav9: Thanks bougyman...I had disabled this while installing chef
[2013-04-08 18:45:30 -0400] bharghav9: let me install only ri...and see
[2013-04-08 18:45:37 -0400] bharghav9: Thanks for your suggestion
[2013-04-08 18:52:35 -0400] visit0r: teukka: ok, so... I need to create an account for the OS ticket tracking system? http://wiki.opscode.com/display/chef/How+to+Contribute
[2013-04-08 18:55:00 -0400] teukka: visit0r: you don't need it for the docs. only for chef and opscode cookbook contributions
[2013-04-08 18:55:10 -0400] teukka: visit0r: https://github.com/opscode/chef-docs/blob/master/CONTRIBUTING
[2013-04-08 18:59:55 -0400] btm: @opscode #opschef Code Review, join: http://bit.ly/10Mkhc7, watch: http://youtu.be/FJeGe1fhgrQ
[2013-04-08 19:00:36 -0400] zrankfappa: sry for asking yet another simple question but I'm not finding a clear example, after running knife node run_list add web01 "role[webserver]", how do I then start the services on the remote node
[2013-04-08 19:01:01 -0400] zrankfappa: I'm assuming I can do it without a reboot
[2013-04-08 19:01:35 -0400] visit0r: zrankfappa: http://docs.opscode.com/resource_service.html
[2013-04-08 19:01:49 -0400] zrankfappa: thanks
[2013-04-08 19:03:41 -0400] zrankfappa: hmmm, that link does not cover it, I'm talking about using knife to install and startup the service
[2013-04-08 19:03:54 -0400] zrankfappa: to a machine that is already running and a role that i've already created
[2013-04-08 19:04:18 -0400] visit0r: zrankfappa: I don't know that knife can start a service
[2013-04-08 19:04:36 -0400] zrankfappa: o.o
[2013-04-08 19:04:45 -0400] visit0r: zrankfappa: well, is a recipe within the role creating the service?
[2013-04-08 19:04:55 -0400] visit0r: zrankfappa: or is it an existing service?
[2013-04-08 19:05:03 -0400] zrankfappa: i created a role and added nginx
[2013-04-08 19:05:04 -0400] egon: zrankfappa: but, if you add a role, one of those cookbooks should start the service
[2013-04-08 19:05:07 -0400] zrankfappa: with some other bits
[2013-04-08 19:05:16 -0400] zrankfappa: i've applied the role with
[2013-04-08 19:05:24 -0400] zrankfappa: knife node run_list add web01 "role[webserver]"
[2013-04-08 19:05:25 -0400] egon: so it should be a client run to do it.
[2013-04-08 19:05:37 -0400] zrankfappa: how do you do a client run?
[2013-04-08 19:05:43 -0400] egon: chef-client
[2013-04-08 19:06:38 -0400] visit0r: right
[2013-04-08 19:07:18 -0400] zrankfappa: i can do that remotely?
[2013-04-08 19:07:21 -0400] chip-: zrankfappa: If you want to start a client run, you'll need to initiate it on the node itself. Chef Server is not currently capable of triggering client runs remotely.
[2013-04-08 19:07:34 -0400] zrankfappa: dang
[2013-04-08 19:07:36 -0400] zrankfappa: ok thanks
[2013-04-08 19:08:01 -0400] chip-: zrankfappa: You can send a running client daemon a sigUSR1 to trigger a run right now, or restart the daemon, or if not demonized trigger the client run by hand.
[2013-04-08 19:08:13 -0400] chip-: zrankfappa: Also check out the knife ssh command.
[2013-04-08 19:09:11 -0400] zrankfappa: ok
[2013-04-08 19:09:25 -0400] zrankfappa: thanks, I guess I was searching for something that didn't exist
[2013-04-08 19:09:36 -0400] zrankfappa: that explains why I couldn't find it :)
[2013-04-08 19:09:59 -0400] egon: well, couldn't you do a knife ssh command?
[2013-04-08 19:10:28 -0400] egon: knife ssh "node:NODENAME" sudo chef-client
[2013-04-08 19:10:45 -0400] zrankfappa: trying now
[2013-04-08 19:11:47 -0400] zrankfappa: liek this knife ssh "node:web01" sudo chef-client ?
[2013-04-08 19:12:22 -0400] egon: try that.. the thing in quotes is a search criteria
[2013-04-08 19:12:29 -0400] egon: so it'll depend on what things are called.
[2013-04-08 19:13:17 -0400] zrankfappa: aye, i got a FATAL: No nodes returned from search!
[2013-04-08 19:13:47 -0400] zrankfappa: knife node list
[2013-04-08 19:13:48 -0400] zrankfappa: chef-svr01
[2013-04-08 19:13:48 -0400] zrankfappa: chef-wsc01
[2013-04-08 19:13:48 -0400] zrankfappa: web01
[2013-04-08 19:13:58 -0400] zrankfappa: it's also listed in client list
[2013-04-08 19:14:22 -0400] zrankfappa: i'm using the opensource chef server btw
[2013-04-08 19:21:29 -0400] zrankfappa: gtg for a while, thanks all
[2013-04-08 19:39:35 -0400] egon: oh.. damn zrankfappa
[2013-04-08 19:39:53 -0400] egon: oh.. damn zrankfappa's gone.. it should be knife ssh "node name:NODENAME" sudo chef-client
[2013-04-08 19:40:22 -0400] ev0ldave: egon: doh, he just left #openstack too, ha
[2013-04-08 19:40:27 -0400] greenmoss: has anyone ever tried allowing local (non-chef) admins on a node to set chef attributes for that node?
[2013-04-08 19:41:30 -0400] adamjk-dev: so, where should I add a new page for 'Best Practices'?
[2013-04-08 19:41:36 -0400] adamjk-dev: http://wiki.opscode.com/display/chef/Developers ?
[2013-04-08 19:41:39 -0400] BryanWB: i need some serious vagabond + kitchen-lxc assistance
[2013-04-08 19:47:26 -0400] behemphi: Is that b/c you are up past your bedtime BryanWB?
[2013-04-08 19:47:28 -0400] behemphi: :-)
[2013-04-08 19:47:46 -0400] BryanWB: behemphi, i should totally be asleep by now
[2013-04-08 19:48:04 -0400] BryanWB: behemphi, new job has me more and more inclined to austin time :)
[2013-04-08 19:48:25 -0400] behemphi: where are you?
[2013-04-08 19:48:31 -0400] BryanWB: behemphi, still in Rome
[2013-04-08 19:48:38 -0400] behemphi: #jealous
[2013-04-08 19:48:38 -0400] BryanWB: but boss is in austin
[2013-04-08 19:48:47 -0400] BryanWB: i am #jealous of austin life
[2013-04-08 19:48:49 -0400] behemphi: what company @bryanwb?
[2013-04-08 19:48:56 -0400] BryanWB: cycle computing
[2013-04-08 19:49:20 -0400] behemphi: wow man!  Congrats.  PRime gig!
[2013-04-08 20:05:11 -0400] btm: @opscode cookbooks code review, join: http://bit.ly/14SjH0P watch: http://youtu.be/YELIpdZ5xk8 #opschef
[2013-04-08 20:05:43 -0400] awgross: does anyone have some good examples of HWRP that arent in the main chef codebase?
[2013-04-08 20:07:12 -0400] awgross: specifically the provider part, i think i have a handle on resources
[2013-04-08 20:08:55 -0400] greenmoss: HWRP? Google fails me
[2013-04-08 20:09:25 -0400] gleam: lwrp you mean?
[2013-04-08 20:09:45 -0400] awgross: hehe the opposite of LWRP
[2013-04-08 20:09:56 -0400] awgross: i want to make a provider in pure ruby, not using the shortcut syntax
[2013-04-08 20:10:03 -0400] awgross: heavy weight resource provider so to speak
[2013-04-08 20:11:18 -0400] teukka: awgross: in a cookbook? at least runit has one: https://github.com/opscode-cookbooks/runit/tree/master/libraries
[2013-04-08 20:11:52 -0400] awgross: its a start, why is it in the libraries dir?
[2013-04-08 20:11:58 -0400] teukka: awgross: but why the ones in the chef codebase are not accepted?
[2013-04-08 20:12:21 -0400] awgross: they are good, i just want to make sure im not forgetting something
[2013-04-08 20:12:39 -0400] teukka: awgross: it is pure ruby code, so it has to be in a library in a cookbook
[2013-04-08 20:12:48 -0400] awgross: k
[2013-04-08 20:17:57 -0400] iragsdale: Anybody have any experience using the application_ruby recipe from https://github.com/opscode-cookbooks/application_ruby? I'm trying to use it by creating a dependent recipe that calls as described in the read me, and I just keep getting "undefined method `new' for #<Hash:0x00000002a89ba0>"
[2013-04-08 20:18:34 -0400] iragsdale: When I show debug output I see:
[2013-04-08 20:18:36 -0400] iragsdale: [2013-04-08T20:11:03+00:00] DEBUG: Trying to load application resource application_default for default [2013-04-08T20:11:03+00:00] DEBUG: Trying to load application resource application_ruby_default for default [2013-04-08T20:11:03+00:00] DEBUG: Trying to load application resource default for default
[2013-04-08 20:19:09 -0400] yfeldblum: awgross, why an example of, specifically, one that's not in the main chef codebase?
[2013-04-08 20:20:02 -0400] awgross: yfeldblum: so i can cross reference make sure I am getting the right imports etc
[2013-04-08 20:20:17 -0400] awgross: yfeldblum: more precaution than an explicit need
[2013-04-08 20:28:12 -0400] log1kal: I'm trying to use https://github.com/kisoku/chef-handler-mail via LWRP. If my runlist contains a recipe that doesn't exist, my chef_handlers don't get called. How can I ensure that my LWRP-called handler gets executed in this kind of situation?
[2013-04-08 20:29:32 -0400] log1kal: Can I not use the chef_handler LWRP in this kind of situation? It looks like the check for good recipes happens before the chef_handler resource is even available
[2013-04-08 20:30:04 -0400] iragsdale: Does anybody else find chef unbelievably frustrating to debug when things don't work correctly right off the bat? Error messages are opaque and the crashes come from deep within the chef source
[2013-04-08 20:39:18 -0400] adnichols: @iragsdale "unbelievably"? No frustrating? yes at times
[2013-04-08 20:39:44 -0400] adnichols: Tho coming from puppet I'm used to it
[2013-04-08 20:39:46 -0400] erratic: http://open.spotify.com/track/5Muk08hnvAKtf0MDHqIq5j
[2013-04-08 20:42:57 -0400] awgross: there wouldnt happen to be a tutorial on writing HWRP would there?
[2013-04-08 20:43:12 -0400] awgross: if not, ill document my journey somewhere
[2013-04-08 20:43:30 -0400] greenmoss: @iragsdale the chef error logs have been getting better and better IMHO
[2013-04-08 20:43:32 -0400] iragsdale: so I figured out my problem. I had a typo in my recipe where I tried to get a value from default[:app][:user] instead of node.default[:app][:user]. No indication at all that the error could be there, lots of stacktraces pointing completely different places. It seems like the only effective debugging for a chef recipe is trial & error - randomly change different attributes till things work. :/
[2013-04-08 20:44:18 -0400] iragsdale: Any tips for debugging recipes? At least Vagrant makes them easy to run relatively quickly.
[2013-04-08 20:44:43 -0400] log1kal: I find running foodcritic at least picks up my silliest mistakes
[2013-04-08 20:44:50 -0400] log1kal: knife cookbook test, too
[2013-04-08 20:45:22 -0400] greenmoss: gist the error; sometimes it's so verbose that it's hard to pick out the relevant part
[2013-04-08 20:45:37 -0400] log1kal: also, if you're getting a value from a node, you probably don't want to specify that you want the default. you may want one that's overridden, no?
[2013-04-08 20:45:51 -0400] log1kal: so just node[:app][:user]
[2013-04-08 20:59:45 -0400] jblaine: How does one force a recipe's code to run at compile-time?
[2013-04-08 21:04:24 -0400] greenmoss: jblain: file "blahblah" do \ action :nothing \ end.run_action(:create)
[2013-04-08 21:06:01 -0400] iragsdale: ah, foodcritic looks cool. Will try that out for sure. Definitely didn't mean to specify the default, that was part of the bad copy & paste.
[2013-04-08 21:15:48 -0400] egon: iragsdale: etsy has some good rules for foodcritic, too...
[2013-04-08 21:26:46 -0400] jblaine: greenmoss: Thank you!
[2013-04-08 21:36:37 -0400] holoway: hi guys :)
[2013-04-08 21:36:40 -0400] holoway: (and girls)
[2013-04-08 21:40:48 -0400] sascha_d: https://gist.github.com/sbates/9b2da83c0cf67fdf6ce3
[2013-04-08 21:41:11 -0400] kindsol: holoway: hey now!  Looking forward to chefconf!
[2013-04-08 21:41:12 -0400] erratic: god its so quiet today.
[2013-04-08 21:41:43 -0400] sascha_d: oops, didn't mean to paste that here
[2013-04-08 21:42:01 -0400] thehar: haha
[2013-04-08 21:49:40 -0400] erratic: I need to get rid of my cat
[2013-04-08 21:49:44 -0400] erratic: she pisses me off
[2013-04-08 21:51:51 -0400] dani3113: aww what's she been doing?
[2013-04-08 22:04:06 -0400] masterkorp:  erratic get a dog
[2013-04-08 22:04:29 -0400] erratic: my cat wants to be eaten
[2013-04-08 22:06:11 -0400] holoway:  /win 4
[2013-04-08 22:06:13 -0400] holoway: ha!
[2013-04-08 22:06:45 -0400] holoway: kindsol: baba booey
[2013-04-08 22:15:05 -0400] RJ2: i'm writing a wrapper cookbook for postgres, and setting node.override[:postgresql][:version] = "9.2", but that seems to be ignored, and 9.1 is used, which is assigned using "default" in https://github.com/opscode-cookbooks/postgresql/blob/master/attributes/default.rb
[2013-04-08 22:15:47 -0400] RJ2: ie, the postgresql.config.<param> options that contain the version string for the config file all use 9.1
[2013-04-08 22:16:30 -0400] RJ2: my wrapper is basically, set the version with override in my attributes file, then include_recipe postgresql::server. what have i missed?
[2013-04-08 22:17:05 -0400] RJ2: (i'm also configuring the pitti ppa for 9.2, setting the package list, etc.. but that doesn't matter, the version isn't set correctly in the config file)
[2013-04-08 22:18:25 -0400] wdilly: can i host my own internal chef repository so bootstrapped nodes download the chef-client from my own server rather than whenever its getting it now? looking to improve my bootstrap times (slow network)
[2013-04-08 22:19:08 -0400] cheeseplus: wdilly: you can just change the bootstrap templates
[2013-04-08 22:19:34 -0400] wdilly: cheeseplus: can you elaborate a bit
[2013-04-08 22:19:41 -0400] RJ2: in other words, https://github.com/opscode-cookbooks/postgresql/blob/master/attributes/default.rb#L143 if i've set override[:postgresql][:version] = "9.2" in the wrapper cookbook that includes postgresql, why is that config entry still using "9.1"
[2013-04-08 22:19:53 -0400] wdilly: cheeseplus: what files should i be modifying?
[2013-04-08 22:20:17 -0400] cheeseplus: wdilly: http://docs.opscode.com/knife_bootstrap.html
[2013-04-08 22:20:24 -0400] cheeseplus: the template.erb files
[2013-04-08 22:20:37 -0400] greenmoss: can libraries be invoked from LWRPs?
[2013-04-08 22:22:39 -0400] wdilly: cheeseplus: thanks
[2013-04-08 22:22:51 -0400] cheeseplus:  wdilly: you can create a ~/.chef/bootstrap/ folder, create or copy/edit a bootstrap erb in there to pull the omnibus or what have you from an arbitrary location
[2013-04-08 22:23:08 -0400] cheeseplus: since it's mostly just bash
[2013-04-08 22:26:10 -0400] jed2: anybody ever seen this right out of the box with berkshelf?
[2013-04-08 22:26:23 -0400] jed2: `rescue in parse': Can't convert Symbol into String. (TypeError)
[2013-04-08 22:26:36 -0400] jed2: stack begins in berkshelf at: community_rest.rb:54:in `initialize'
[2013-04-08 22:26:47 -0400] jed2: can't berks install, can't berks, don't do anything except berks configure
[2013-04-08 22:26:53 -0400] jed2: that line is building a URI from a constant in the file
[2013-04-08 22:29:23 -0400] ivey: jed2: can you gist me the full stack trace please, plus a .berks/config.json if you have one.
[2013-04-08 22:30:54 -0400] jed2: ivey: https://gist.github.com/jedsmith/5341124
[2013-04-08 22:31:59 -0400] ivey: jed2: chef_server_url is the right URL I assume?
[2013-04-08 22:32:02 -0400] jed2: yes
[2013-04-08 22:32:14 -0400] ivey: can i see the berksfile?
[2013-04-08 22:33:03 -0400] jed2: added to gist
[2013-04-08 22:33:47 -0400] ivey: what do you expect "site :foursquare" to do?
[2013-04-08 22:34:21 -0400] jed2: apparently not what I expected
[2013-04-08 22:34:32 -0400] ivey: heh
[2013-04-08 22:34:35 -0400] jed2: oh. okay, I didn't scroll far enough to default locations
[2013-04-08 22:34:42 -0400] ivey: so :opscode is a magic sym there
[2013-04-08 22:34:54 -0400] ivey: means "http://cookbooks.opscode.com/api/v1/cookbooks"
[2013-04-08 22:34:54 -0400] jed2: doesn't help I'm learning ruby just for chef
[2013-04-08 22:35:06 -0400] jed2: durp, thanks
[2013-04-08 22:35:14 -0400] jed2: perhaps that could error better?
[2013-04-08 22:35:23 -0400] ivey: yeah i am making a notr
[2013-04-08 22:35:26 -0400] jed2: thanks :)
[2013-04-08 23:20:28 -0400] holoway:  /win 4
[2013-04-08 23:21:03 -0400] jed_: you win!
[2013-04-08 23:22:21 -0400] holoway: jed_: I win something, for sure
[2013-04-08 23:22:59 -0400] jed_: I use HISTCONTROL to drop leading spaced commands, too, so I do that on occasion
[2013-04-08 23:35:20 -0400] jblaine: RJ2: Are you sure you uploaded the latest version of your wrapper cookbook?
[2013-04-08 23:36:49 -0400] flaccid: hmm, strange question, but is there a way to have stdout from a resource get logged/printed in the chef run?
[2013-04-08 23:37:07 -0400] jblaine: RJ2: I don't know if it matters, but it's not :version
[2013-04-08 23:37:14 -0400] jblaine: RJ2: Just version (not a symbol)
[2013-04-08 23:37:46 -0400] jblaine: flaccid: I believe just set --log_level to 'debug'
[2013-04-08 23:37:55 -0400] jblaine: flaccid: chef-client option
[2013-04-08 23:38:08 -0400] flaccid: jblaine: kk, this is chef-solo; i will try
[2013-04-08 23:38:51 -0400] dkador: wondering if somebody can help me w/ some berkshelf / chef questions.  I'm testing things out here.  put a fresh install of chef-server on a new ubuntu 12.04 box, then setup my mac laptop as a client.  confirmed I could use knife successfully to manage the server.  set up berkshelf with a tiny test cookbook that does basically nothing.  when I run "berks upload" I get this: https://gist.github.com/9253075220c798414ea5  any ideas?
[2013-04-08 23:39:11 -0400] flaccid: dkador: #berkshelf
[2013-04-08 23:39:28 -0400] dkador: flaccid: fair enough, thanks.
[2013-04-08 23:44:10 -0400] wdilly: what is the appropriate way to handle installing a package that promps with a "taskel" style interface? notable libnss-ldap. Can i feed this interface answers? It appears overwriting the config file the interface generates for me is not doing the trick... thanks

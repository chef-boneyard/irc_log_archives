[2013-04-17 00:00:15 -0400] jameson_: that you could use to stop a service..
[2013-04-17 00:10:21 -0400] barefoot: okay, different question, how does everyone not running a chef server encrypt data bag files?
[2013-04-17 00:12:37 -0400] jameson_: barefoot: if you are on AWS you can use IAM/Instance role based file access
[2013-04-17 00:12:51 -0400] jameson_: and store the file encrypted on S3
[2013-04-17 00:14:17 -0400] barefoot: no, figured it out. getting diff results on mac vs linux
[2013-04-17 00:15:58 -0400] stormerider: having some trouble with chef-solr under chef 10 giving me java errors... https://gist.github.com/stormerider/9bd232ad5e566515f383 -- any ideas what's going wrong? banging my head against this for a while and not sure what the issue is.
[2013-04-17 00:30:10 -0400] flaccid: https://github.com/opscode-cookbooks/application_php/blob/master/README.md or any application cookbook really. i'm so confused - local_settings_file and settings_template, that is sweet, but you seem to only be able to export variables to the template under the database block. or do i do other ones so i don't have to put them under the db block?
[2013-04-17 00:34:21 -0400] david415: i love berkshelf!
[2013-04-17 00:35:56 -0400] flaccid: i heart librarian hehe
[2013-04-17 00:36:20 -0400] flaccid: i guess not many people active today for a range of reasons :(
[2013-04-17 00:36:29 -0400] flaccid: coderanger: be great if you came alive :)
[2013-04-17 00:45:39 -0400] stormerider: ok, i just took a clean node running quantal on it, and installed chef-solr 10.18.0-1 via the apt repo, and got the same java error as before.
[2013-04-17 00:55:09 -0400] ivey: david415: Berkshelf loves you too, man
[2013-04-17 00:55:25 -0400] crackmac: anyone know how to do a knife search for an empty run_list?
[2013-04-17 01:29:02 -0400] Death_Syn: grr, no 32-bit chef 11 server omnibus :(
[2013-04-17 01:33:44 -0400] stormerider: yeah, the omnibus packages are probably a pain to compile and test so trimming an architecture probably saves them a lot of time
[2013-04-17 01:34:17 -0400] david415: ivey: ;-)
[2013-04-17 01:34:25 -0400] flaccid: sif 32bit
[2013-04-17 01:37:04 -0400] jtimberman: Death_Syn: erm, why 32 bit? :)
[2013-04-17 01:37:49 -0400] Death_Syn: because i only need to care about 15 nodes, and will be running my chef-server in a 1GB ram VM
[2013-04-17 01:39:08 -0400] Death_Syn: 64-bit will be wasting a lot of ram, i fear :(
[2013-04-17 01:39:14 -0400] flaccid: jtimberman: sorry to bug, but you wouldn't be able to help with the application cookbook question i had above?
[2013-04-17 01:39:14 -0400] KarlHungus: how would i append items to this in a recipe in chef 11?
[2013-04-17 01:39:15 -0400] KarlHungus: https://github.com/opscode-cookbooks/postgresql/blob/master/attributes/default.rb#L175-L180
[2013-04-17 01:39:25 -0400] KarlHungus: the node['postgresql']['pg_hba'] array
[2013-04-17 01:39:35 -0400] jforce: Is there a way to get helper methods in providers and recipes without monkey patching Chef::Recipe? Feels bad.
[2013-04-17 01:40:50 -0400] KarlHungus: jforce: in your recipe, :Chef::Recipe.send(:include, LoadBalancer::Helper)
[2013-04-17 01:41:54 -0400] jforce: KarlHungus: thanks! But, that looks like it still monkey patches ::Chef::Recipe, so it's permanently carrying LoadBalancer::Helper for the rest of the run, right?
[2013-04-17 01:41:54 -0400] jtimberman: flaccid: dunno offhand
[2013-04-17 01:42:04 -0400] Death_Syn: gonna try 64-bit
[2013-04-17 01:42:20 -0400] flaccid: jtimberman: np
[2013-04-17 01:43:32 -0400] stormerider: Death_Syn: if you're running a VM, might as well switch to a x64 system for the setup. easier than otherwise if you dont have anything else already set up on the vm
[2013-04-17 01:43:38 -0400] KarlHungus: jforce: you know... i'm not really sure
[2013-04-17 01:43:47 -0400] Death_Syn: this is also my chef11 experiment (using it during my exodus from linode of my personal stuff, so I can master the differences between 10 and 11 before moving dayjob resources)
[2013-04-17 01:43:53 -0400] Death_Syn: stormerider: yeah, that's what i've done
[2013-04-17 01:48:59 -0400] jforce: KarlHungus: monkey patching via `libraries/*.rb` really is The Chef Way. But, unless you're actually building a DSL (not using one), I would steer clear of it. This is a design disagreement that I have with Chef. I'll just roll with it, though. When in Chef::Rome...
[2013-04-17 01:49:21 -0400] jforce: Thanks anyway. :)
[2013-04-17 01:49:53 -0400] KarlHungus: jforce: how else you would implement that in ruby?
[2013-04-17 01:50:06 -0400] KarlHungus: for my own curiosity
[2013-04-17 01:51:52 -0400] jforce: Build each Recipe as its own Class and provide functionality for defining methods on it. Hell, just let me do a def method_name; end right in my recipe if it's a very localized helper.
[2013-04-17 01:52:52 -0400] jforce: but everything happens in the Recipe class, so you would pollute it with method declarations. Monkey patching with libraries/ is no better.
[2013-04-17 01:53:04 -0400] KarlHungus: i see
[2013-04-17 01:53:25 -0400] jforce: I would use metaprogramming to instantiate a new class for every Recipe, then you could do whatever you wanted without contaminating the rest of your chef run.
[2013-04-17 01:54:05 -0400] jforce: so instead of my Recipe being Chef::Recipe (or whatever), it would be Chef::ApacheRecipe.
[2013-04-17 01:55:45 -0400] jtimberman: jforce: you can totally just write a method in your recipe w/ def methodname
[2013-04-17 01:56:15 -0400] jforce: jtimberman: really? I could have sworn that didn't work. I could definitely be wrong.
[2013-04-17 01:56:48 -0400] jforce: jtimberman: I also considered define_method. Am I defining a singleton in an instance of Recipe? Or am I adding a method to the Recipe class?
[2013-04-17 01:57:08 -0400] jtimberman: not sure :)
[2013-04-17 01:57:18 -0400] jtimberman: kallistec would be the best to ask if he's around
[2013-04-17 01:57:55 -0400] jforce: I can play with it with a debugger.
[2013-04-17 01:58:52 -0400] jtimberman: /usr/bin/chef-shell :)
[2013-04-17 01:59:20 -0400] jforce: def method_name works in a provider, which is my immediate use case. :)
[2013-04-17 01:59:39 -0400] KarlHungus: yeah. definitely works in a provider
[2013-04-17 01:59:45 -0400] KarlHungus: providers have their own classes as well
[2013-04-17 01:59:50 -0400] KarlHungus: well, the resource does
[2013-04-17 02:03:38 -0400] jforce: in a provider, the method gets defined on the generated class, in my case pp method(:inline_gemfile?) produces `#<Method: Chef::Provider::RubyVersion#inline_gemfile?>`
[2013-04-17 02:03:46 -0400] jforce: so that's cool.
[2013-04-17 02:04:25 -0400] jforce: thanks KarlHungus and jtimberman! I got where I wanted to go, and no monkey patching.
[2013-04-17 02:04:59 -0400] KarlHungus: jforce: look at the application and application_* cookbook LWRPs
[2013-04-17 02:05:02 -0400] yfeldblum: or the obviously ruby way: make a normal ruby module in your libraries/, and extend that module in your recipe
[2013-04-17 02:05:12 -0400] KarlHungus: they are a great example of what i suspect you're looking to do ;)
[2013-04-17 02:05:39 -0400] yfeldblum: jtimberman, the recipe code is instance-eval'd, with the instance being a separate instance of Chef::Recipe
[2013-04-17 02:06:09 -0400] jforce: thanks yfeldblum
[2013-04-17 02:06:19 -0400] yfeldblum: jtimberman, from that `self = instance-of-Chef::Recipe` context, `extend MyCookbook::MyModule` will add the methods to just the one instance
[2013-04-17 02:06:42 -0400] yfeldblum: jtimberman, jforce, https://github.com/opscode/chef/blob/11.4.0/lib/chef/cookbook_version.rb#L339-L346
[2013-04-17 02:07:15 -0400] jforce: yfeldblum: excellent! thanks
[2013-04-17 02:08:50 -0400] jforce: yfeldblum: how would you namespace a module of helpers for a recipe in your cookbook? My first thought is Chef::MyCookbook::Helpers
[2013-04-17 02:09:42 -0400] yfeldblum: jforce, for a cookbook named "foo_bar" and a recipe named "baz", i might use FooBarCookbook::BazRecipeHelper
[2013-04-17 02:09:57 -0400] jforce: yfeldblum: looks good to me. thanks :)
[2013-04-17 02:10:41 -0400] yfeldblum: jforce, that naming style seems to me to be very clear, even if it's verbose
[2013-04-17 02:11:00 -0400] jforce: I prefer to err on the side of clarity. :)
[2013-04-17 02:14:24 -0400] stormerider: so, question. for chef 10, what version is supported for Ubuntu 12.10 and what method should be used to install it?
[2013-04-17 02:16:38 -0400] flaccid_: stormerider: just follow the download wizard on the website
[2013-04-17 02:16:57 -0400] flaccid_: latest is generally recommended for any distro
[2013-04-17 02:16:59 -0400] stormerider: flaccid_: er, for chef 10 server, i should say.
[2013-04-17 02:17:12 -0400] flaccid_: same thing i think
[2013-04-17 02:17:39 -0400] stormerider: the wizard only shows 11 for the server i believe
[2013-04-17 02:17:58 -0400] KarlHungus: do you need chef 10 server for some reason?
[2013-04-17 02:18:35 -0400] brianm: I am trying to use the opscode database cookbook to create a mysql user which can connect from anywhere
[2013-04-17 02:18:36 -0400] stormerider: yes, to fix my old server for right-now usage until i can tweak the new 11 server to work the way i want
[2013-04-17 02:18:40 -0400] brianm: but canot seem to sort it
[2013-04-17 02:19:06 -0400] stormerider: ever since i upgraded to quantal, chef-solr has been all borked up.
[2013-04-17 02:20:51 -0400] yfeldblum: jtimberman, what would case: FATAL: Errno::ENOENT: deploy[/srv/foo-bar] (foo-bar::app line 1000) had an error: Errno::ENOENT: No such file or directory - git ls-remote git@github.com:org/app 1.2.3
[2013-04-17 02:22:23 -0400] stormerider: basically the same issue as seen on http://tickets.opscode.com/browse/CHEF-4077
[2013-04-17 02:26:42 -0400] jtimberman: yfeldblum: I always have to go spelunking for things in the chef code base :)
[2013-04-17 02:27:03 -0400] stormerider: yfeldblum: that looks to me like it wasnt able to find git, off the top of my head
[2013-04-17 02:27:28 -0400] yfeldblum: stormerider, intuition!!!
[2013-04-17 02:27:29 -0400] stormerider: try /usr/bin/git, maybe?
[2013-04-17 02:27:49 -0400] yfeldblum: stormerider, i was trying everything but that, so thanks
[2013-04-17 02:28:07 -0400] jtimberman: package "git"
[2013-04-17 02:28:09 -0400] jtimberman: :)
[2013-04-17 02:28:17 -0400] nathenharvey1: Opscode Meetup is being hosted via hangout tonight - https://plus.google.com/hangouts/_/1daf90bdaf46dd3b81e4811b0765198b432e6ac2#
[2013-04-17 02:28:27 -0400] flaccid_: yeah the application cookbook nor the deploy resource install or depend on git
[2013-04-17 02:28:49 -0400] stormerider: yfeldblum: np, hope that helps
[2013-04-17 02:30:20 -0400] yfeldblum: how to avoid: "action deployThe authenticity of host 'github.com (204.232.175.90)' can't be established." and the interactive question if you want to add it?
[2013-04-17 02:31:44 -0400] stormerider: deploy an .ssh/known_hosts file (or add the github hash to it)?
[2013-04-17 02:32:08 -0400] stormerider: or if you're doing RO access you can probably access github over https instead of ssh
[2013-04-17 02:32:32 -0400] stormerider: (although i think some git clients have issues with their ssl certificate...)
[2013-04-17 02:37:51 -0400] stormerider: gah, the ruby-yajl / libyajl-ruby issue is still there for quantal
[2013-04-17 02:51:13 -0400] Death_Syn: hmm, when i try to run knife configure -i, i can't connect to the chef server on port 4000
[2013-04-17 02:51:22 -0400] Death_Syn: i look there, and ther'es nothing listening on port 4000 on any IP
[2013-04-17 02:51:35 -0400] Death_Syn: all services appear to be running in /opt/chef-server/service
[2013-04-17 02:51:44 -0400] Death_Syn: what am I missing?
[2013-04-17 02:52:56 -0400] jtimberman: Death_Syn: use https, port 443. eg, https://your.chef.server.example.com
[2013-04-17 02:53:17 -0400] Death_Syn: aye
[2013-04-17 02:53:20 -0400] Death_Syn: trying it out
[2013-04-17 02:54:10 -0400] Death_Syn: worked
[2013-04-17 02:54:11 -0400] Death_Syn: thanks
[2013-04-17 02:55:49 -0400] joonas: I don't think jtimberman is never on
[2013-04-17 02:55:52 -0400] joonas: never not on*
[2013-04-17 02:55:58 -0400] joonas: I see you day and night here
[2013-04-17 02:56:07 -0400] Death_Syn: eh, he does take breaks to give talks at conferences :P
[2013-04-17 02:56:44 -0400] joonas: like once in a blue moon
[2013-04-17 02:57:45 -0400] Litex: Woo!  ChefConf!
[2013-04-17 03:01:03 -0400] jtimberman: joonas: i run a ZNC bouncer on a system on my DSL connection.
[2013-04-17 03:01:55 -0400] joonas: jtimberman: I meant that I see you talking here ;)
[2013-04-17 03:01:58 -0400] joonas: all the time :)
[2013-04-17 03:02:35 -0400] joonas: which isn't to say that's a bad thing
[2013-04-17 03:07:21 -0400] elejia: Hallo kids
[2013-04-17 03:07:29 -0400] joonas: hmm
[2013-04-17 03:07:42 -0400] joonas: if I wanted to make knife plugins
[2013-04-17 03:07:45 -0400] jtimberman: joonas: oh, well, that too :)
[2013-04-17 03:07:48 -0400] joonas: am I limited to using apache 2 licensing?
[2013-04-17 03:08:00 -0400] jtimberman: joonas: you can use any license you want for code you write :)
[2013-04-17 03:08:07 -0400] joonas: right
[2013-04-17 03:08:10 -0400] joonas: gotcha :)
[2013-04-17 03:08:18 -0400] jtimberman: joonas: *opscode* uses apache2 for all our open source code.
[2013-04-17 03:08:31 -0400] jtimberman: i've seen plugins licensed mit, bsd, and others.
[2013-04-17 03:08:43 -0400] joonas: jtimberman: makes sene
[2013-04-17 03:08:45 -0400] joonas: sense*
[2013-04-17 03:08:50 -0400] elejia: The plugins my company writes we don't actually share, sadly :(
[2013-04-17 03:09:09 -0400] elejia: "cultural differences" one might say
[2013-04-17 03:09:17 -0400] joonas: I work for a cloud provider :)
[2013-04-17 03:09:26 -0400] joonas: so it's in our interest to share them ;)
[2013-04-17 03:10:03 -0400] jtimberman: :D!
[2013-04-17 03:10:06 -0400] stormerider: reminds me, i should find out what my new employer feels about open-sourcing utilitarian stuff
[2013-04-17 03:10:11 -0400] elejia: Absolutely.
[2013-04-17 03:10:14 -0400] jtimberman: we love when cloud providers write the plugin(s) for their cloud :)
[2013-04-17 03:10:34 -0400] joonas: jtimberman: someone has already written one for ours, but I think I might want to write another one just to get a feel for things
[2013-04-17 03:11:04 -0400] elejia: we're still in the dark ages, trying to figure out how to promote cookbooks through environments *sigh*
[2013-04-17 03:14:02 -0400] stormerider: jtimberman: question, since you're usually the person in the know. chef 10 server on quantal, what's the "right" way to get it running? i verified that both CHEF-3668 and CHEF-4077 affect a clean Quantal install via the apt repos (4077 being the one currently borking my server post-quantal upgrade)
[2013-04-17 03:15:25 -0400] jtimberman: stormerider: Perhaps this is an opportunity to get Chef 11 server going? :)
[2013-04-17 03:15:46 -0400] jtimberman: These should work on quantal though: jtimberman.housepub.org/blog/2012/11/17/install-chef-10-server-on-ubuntu-with-ruby-1-dot-9/
[2013-04-17 03:17:55 -0400] stormerider: jtimberman: ive got an 11 migration server in the works, but configuring that is another separate question :)
[2013-04-17 03:18:18 -0400] franzaz: new to ruby and chef.  in my cookbooks/<custom-cb>/attributes/default.rb file, should I define attributes as 1) default.apache.dir =, 2) default["apache"]["dir"] = or 3) default[:apache][:dir] =?
[2013-04-17 03:18:25 -0400] jtimberman: franzaz: 2
[2013-04-17 03:18:47 -0400] franzaz: short answer as to why?
[2013-04-17 03:19:04 -0400] franzaz: because it's the right way to do it :)
[2013-04-17 03:19:20 -0400] franzaz: if no short answer, no need to reply
[2013-04-17 03:19:24 -0400] alisdair: i have a recipe where remote_file succeeds but then the next command fails to find the created file, any idea what's going on?
[2013-04-17 03:19:25 -0400] alisdair: https://gist.github.com/talentdeficit/5401504
[2013-04-17 03:19:29 -0400] jtimberman: reasons: a) they're converted to strings anyway, so the "benefits" of symbols is moot, b) other cookbook authors might create attributes like ['foo-bar'] which means you can't use the chained methods.
[2013-04-17 03:19:41 -0400] jtimberman: thats the sum of reasons for it.
[2013-04-17 03:19:48 -0400] franzaz: wonderful, thanks
[2013-04-17 03:21:46 -0400] franzaz: any reason to use node.default["apache"]["dir"] over default["apache"]["dir"]?  I don't see where that attribute definition would ever be out of context for a node.
[2013-04-17 03:21:49 -0400] stormerider: jtimberman: the chef 11 issue is that i use port 80 for other stuff on the new server, so i was looking to push it to a different port. i have my chef-server.rb here: https://gist.github.com/stormerider/2d189b444b01af75f08b Problem being that the login page for some reason redirects over to https://<fqdn> without port 8443. im guessing im missing a setting somewhere, but not sure where.
[2013-04-17 03:26:59 -0400] franzaz: any chef-client debug output alisdair?
[2013-04-17 03:27:25 -0400] alisdair: franzaz: i'm using chef-solo, i can give you output from that tho
[2013-04-17 03:27:40 -0400] franzaz: i'm not much of a chef stud
[2013-04-17 03:28:42 -0400] alisdair: https://gist.github.com/talentdeficit/5401574
[2013-04-17 03:28:49 -0400] franzaz: but just on the surface, if the file is large, maybe it hasn't fully completed downloading to cache dir before kick off the tar xf immediately?
[2013-04-17 03:30:15 -0400] stormerider: btw, CHEF-4077 should be marked as Chef 10, not Chef 11...
[2013-04-17 03:30:33 -0400] alisdair: i think i may have figured it out
[2013-04-17 03:30:37 -0400] alisdair: thanks for looking though
[2013-04-17 03:30:37 -0400] elejia: @franzaz - i've noticed there is a timing delay at times, have you tried a ... i think it's 'notifies'?
[2013-04-17 03:31:27 -0400] franzaz: that may be for alisdair elejia
[2013-04-17 03:31:44 -0400] franzaz: i'm looking for why to use node.default vs default in attribute defns
[2013-04-17 03:31:57 -0400] elejia: ah sorry franzaz, yes that's for alisdair
[2013-04-17 03:32:32 -0400] franzaz: can you answer the former? :)
[2013-04-17 03:32:49 -0400] franzaz: must have to do with context
[2013-04-17 03:33:20 -0400] elejia: nope, sorry. :)
[2013-04-17 03:34:02 -0400] elejia: i had a suspicion it was something to do with node vs cookbook "scope" if you will.
[2013-04-17 03:34:05 -0400] elejia: *have
[2013-04-17 03:34:32 -0400] elejia: but i would not at all say i'm an expert.
[2013-04-17 03:34:37 -0400] franzaz: scope is a better defn than context - yep
[2013-04-17 03:35:01 -0400] franzaz: oh well, i'll try default for now and narrow down to node.default if/when i need to
[2013-04-17 03:36:08 -0400] elejia: I could be very wrong, but if you're looking for a 'node' anyhting attribute, it's essentially an override for whatever you've set up in most anything else (cookbook, databag, etc)
[2013-04-17 03:37:44 -0400] elejia: @franzaz, have you (or anyone else) worked with promotion of cookbooks through sets of 100s of nodes at a time?
[2013-04-17 03:39:32 -0400] franzaz: lord have mercy no - i'm trying to get this to work on one node - but when you figure it out elejia, I'll need to tap you for that :)
[2013-04-17 03:41:04 -0400] elejia: lol feel free. i'm working with a set of 100 nonproduction + 300 production ( + the other 1900 to come) nodes at the moment.
[2013-04-17 03:41:26 -0400] franzaz: nice
[2013-04-17 03:41:49 -0400] franzaz: start small and expand :)
[2013-04-17 03:42:04 -0400] elejia: trying to get promotion, automation, and integration with our dev teams ironed out at the moment
[2013-04-17 03:49:38 -0400] pizzahead: is chef-server-running.json meant to be modified or is that build dynamically at start?
[2013-04-17 03:56:52 -0400] pizzahead: n/m I see now
[2013-04-17 04:01:08 -0400] dc:  /window close
[2013-04-17 04:07:56 -0400] stormerider: if i already have couchdb installed on a system and then bootstrap chef-server via chef-solo, will it use that one or will it install a new one like the omnibus installs do?
[2013-04-17 04:10:30 -0400] chef-newbie: I'm trying to learn Chef and I'm having lots of trouble understanding notifications... What does `:actions` do for `notifies` and `subscribes`?
[2013-04-17 04:11:05 -0400] chef-newbie: The documentation page has `notifies :run, "execute[test-nagios-config]"`, where `run` is the action and `subscribes :reload, resources("template[/tmp/somefile]"), :immediately`, where reload is the action.
[2013-04-17 04:11:05 -0400] chef-newbie: The only problem is that I don't see any connection between them, so how are they linked or how do they work? Like some cookbooks in the examples just has "notifies :run" and there's nothing else in that cookbook that subscribes to run, so what is the use of that?
[2013-04-17 04:31:49 -0400] stormerider: chef-newbie: which page?
[2013-04-17 04:32:30 -0400] chef-newbie: stormerider: this one http://docs.opscode.com/resource_common_notifications.html
[2013-04-17 04:33:51 -0400] spheromak: chef-newbie: actions are the actions a resource supports.
[2013-04-17 04:34:07 -0400] spheromak: so when you notify a resorce your telling it what action to take
[2013-04-17 04:34:17 -0400] stormerider: chef-newbie: so the easiest way i can explain it is to look at the notify immediately section. you'll see that the action on the execute is set to :nothing, which allows you to define what should be done, but it doesn't actually fire off.
[2013-04-17 04:34:46 -0400] stormerider: then in the template, you send a notify to it, which then triggers it to fire
[2013-04-17 04:36:30 -0400] spheromak: your not subscribing to run
[2013-04-17 04:36:41 -0400] spheromak: your subscribing to a resource and telling it to run
[2013-04-17 04:36:52 -0400] spheromak: well subscribes is different
[2013-04-17 04:37:37 -0400] stormerider: right, with subscribing, the linking is done by specifying the resource in the subscribe line
[2013-04-17 04:38:47 -0400] spheromak: given resource a, and resource b. a supports :run,:stop,:restart  and resource b subscribes to a
[2013-04-17 04:38:51 -0400] stormerider: it's one of those things that is a little weird until you start using it a bit and then it makes perfect sense. i'd suggest taking a look at how some of the common cookbooks out there handle their recipes and you can see some of the interactions between things.
[2013-04-17 04:39:47 -0400] spheromak: wen you sa in resource b :run, "resource[a]" you're saying you want this resouce "b" to take action :run. when a has been "updated"
[2013-04-17 04:40:07 -0400] spheromak: *subscribes :run, "resource[a]"
[2013-04-17 04:40:23 -0400] spheromak: i actually think notifications makes more sense than trying to udner stand subscribe initially
[2013-04-17 04:40:32 -0400] spheromak: and usualy use that when teaching people this stuff
[2013-04-17 04:40:54 -0400] chef-newbie: woah, thank you so much! that makes so much more sense now
[2013-04-17 04:41:00 -0400] spheromak: file "foo"  notifies :restart, "service[bar]"
[2013-04-17 04:41:27 -0400] spheromak: which is more readable. if this file "foo" takes action, then fire off the restart action in service bar
[2013-04-17 04:41:41 -0400] spheromak: chef-newbie: cool
[2013-04-17 04:41:57 -0400] stormerider: *nod* notifies vs subscribe is basically push vs pull, at least in my mind
[2013-04-17 04:42:02 -0400] spheromak: yeap
[2013-04-17 04:42:55 -0400] spheromak: and your signalling action the resource not triggering on that action
[2013-04-17 04:43:07 -0400] spheromak: which has been a confusion i've seen people have on the subscribes syntax
[2013-04-17 04:43:41 -0400] chef-newbie: thanks so much once again stormerider and spheromak ~ i'd spent a few hours trying to understand it without success
[2013-04-17 04:44:57 -0400] chef-newbie: i'm finding the whole wiki for chef and berkshelf really difficult to grasp, and there aren't any complete examples that link all the concepts together, but i'm trying
[2013-04-17 04:45:15 -0400] chris6131: spheromak: I always use notifies and have never used subscribe. I guess the use case is when the recipe that controlls the changing resource won't know who else needs to be notified.
[2013-04-17 04:46:03 -0400] stormerider: happy to help :) i still havent dabbled with anything besides knife or chef, im not even sure what berkshelf and librarian actually do :) was looking at vagrant earlier, might play with that since it supports virtualbox
[2013-04-17 04:46:17 -0400] spheromak: chris6131: same here i generally reason about notifies much better, but i've had situations where subscribes makes more sense.
[2013-04-17 04:46:31 -0400] spheromak: chef-newbie: much of the wiki is depricated, and not everything is on docs.opscode.com
[2013-04-17 04:46:44 -0400] spheromak: I think the berkchef.com docs are also a bit behind the current sate
[2013-04-17 04:47:04 -0400] spheromak: all f these things have just undergone quite a bit of change, and the dust is settling
[2013-04-17 04:47:41 -0400] spheromak: chef-newbie: i can help with any questions around berkshelf and the  tieing together of things
[2013-04-17 04:47:59 -0400] chef-newbie: is this because of the switch to erlang or is it usually like this?
[2013-04-17 04:48:30 -0400] chris6131: spheromak: The typical case is a config file that notifies it's respective service when changed. I think this is clearer than a subscribes in that case. But perhaps a use case for subscribes is like a common config file that many services might read from, so each would subscribe instead of having to modify the recipe that owns the common config file
[2013-04-17 04:49:59 -0400] stormerider: aha, the non-standard port issue i had with chef 11 has been addressed in the newest beta. mailing list++ :)
[2013-04-17 05:08:41 -0400] spheromak: stormerider: yea im testing that as we speak
[2013-04-17 05:12:07 -0400] lzrar: Hi all.. :)
[2013-04-17 05:12:38 -0400] lzrar: If someone can give me insight that would be great.. I'm using the rbenv cookbook but I'm having issues where it doesn't look like it's installed
[2013-04-17 05:15:25 -0400] lzrar: is there a way to rerun everything from the begining as if it's a new VM
[2013-04-17 05:15:31 -0400] lzrar: or state
[2013-04-17 05:20:21 -0400] coderanger: flaccid_: Whats up?
[2013-04-17 05:31:34 -0400] gad0lin: does chef-server should work behind http_proxy? I am using master version and get timeouts http://pastebin.com/CiXyt4ki
[2013-04-17 05:38:17 -0400] stormerider: spheromak: working good for me :)
[2013-04-17 05:39:09 -0400] stormerider: if i can figure out how to get the validator from chef 10 working in 11 then i may just say screw it and migrate
[2013-04-17 05:44:45 -0400] coderanger: stormerider: Nothing related to that changed AFAIK
[2013-04-17 05:49:46 -0400] stormerider: nod, im not sure if i was doing something wrong before, but now that i have things back in a sane state i can give it another go.
[2013-04-17 06:02:30 -0400] stormerider: so i guess my question regarding that is, is it possible to specify the private key for a client? im mostly seeing options to edit the other fields and regenerate the key, not load it from a specified file.
[2013-04-17 06:07:46 -0400] stormerider: or does the chef server only store the public key? im getting a bit foggy this late in the night
[2013-04-17 06:08:32 -0400] ev0ldave: chef does not store the private key
[2013-04-17 06:09:25 -0400] stormerider: thanks.
[2013-04-17 06:10:15 -0400] ev0ldave: did you lose the private key?
[2013-04-17 06:11:04 -0400] stormerider: no, just trying to poke a client into being able to use the same private validator key with the new chef 11 server that i used with chef 10, so i dont have to go through and update every AMI I use
[2013-04-17 06:11:32 -0400] ev0ldave: did you use knife-essentials to move everything over from 10?
[2013-04-17 06:11:44 -0400] ev0ldave: that should grab all public keys and put them in 11
[2013-04-17 06:15:49 -0400] stormerider: yeah. it's getting a 401 though. is there anything specific that should be in the JSON for the validator key, or is it a generic client?
[2013-04-17 06:16:08 -0400] stormerider: (the new client im trying to register is getting the 401, that is)
[2013-04-17 06:17:10 -0400] ev0ldave: do your other nodes work fine?
[2013-04-17 06:17:28 -0400] ev0ldave: you could just regen the validator.pem at that point and use the new one moving forward
[2013-04-17 06:18:26 -0400] stormerider: that's what im trying to avoid, i have a bunch of AMIs that I'd have to update, I'd really rather not. and right now the only node that's using 11 is my workstation config.
[2013-04-17 06:19:22 -0400] ev0ldave: ah, i see
[2013-04-17 06:19:55 -0400] ev0ldave: you should really slip that validation in through meta so you dont get locked like this :)
[2013-04-17 06:20:07 -0400] ev0ldave: sorry, i know that's not what you're looking for
[2013-04-17 06:22:10 -0400] stormerider: well, we're using ElasticBeanstalk for a lot of our instances, which makes it a bit hard to pass userdata. i could download the key from S3, I guess, but that seems somewhat of an overkill for this.
[2013-04-17 06:22:52 -0400] ev0ldave: i'm not entirely sure where the public keys are stored in 11 since couch is gone, haven't ripped into it that much
[2013-04-17 06:25:22 -0400] ev0ldave: ah, that's right postgres
[2013-04-17 06:34:20 -0400] ev0ldave: stormerider:  sudo -u opscode-pgsql  /opt/chef-server/embedded/bin/psql opscode_chef
[2013-04-17 06:34:27 -0400] ev0ldave: that will connect you to the sqldb
[2013-04-17 06:43:12 -0400] ev0ldave: select * from clients where name='chef-validator';
[2013-04-17 06:43:28 -0400] ev0ldave: you can add your public key there in the public_key collumn
[2013-04-17 06:45:40 -0400] stormerider: nod, that seems to be showing the same thing as knife client show -Fj chef-validator. guess im going to have to dig around and see why the server is tossing the 401 at me when trying to register.
[2013-04-17 06:47:37 -0400] gad0lin: I am fighting with http_proxy and installation of chef-server, I put http_proxy, https_proxy, ENV['http_proxy'], ENV['https_proxy'] in solo.rb but i still get timeouts on remote_file :/ any hint?
[2013-04-17 06:51:23 -0400] stormerider: which part of the chef 11 server handles registration, erchef?
[2013-04-17 06:56:09 -0400] ssd7: stormerider: As in client registration on bootstrap?  Yes, those API calls go to erchef; however, the "backend" services are also involved.
[2013-04-17 07:01:10 -0400] stormerider: ssd7: where can i dig into for more information as to why the registration failed?
[2013-04-17 07:01:40 -0400] stormerider: tailing /var/log/chef-server/erchef/current didnt show anything when i kicked off chef-client on the node
[2013-04-17 07:19:35 -0400] stormerider: ah, it's logged in erchef.log.1. msg=bad_sig.
[2013-04-17 08:09:54 -0400] stormerider: so i'm trying to use the python_pip LWRP. i did "include_recipe 'python'", "include_recipe 'python::pip'", but when i do a chef-client run, it doesn't pull down the python cookbook. what am i missing to get the cookbook into part of the runlist?
[2013-04-17 08:11:09 -0400] flaccid_: stormerider: just depend on the python cookbook and ensure its uploaded to your chef server?
[2013-04-17 08:11:40 -0400] flaccid_: depends is in metadata but maybe you are just missing the cookbook on the server
[2013-04-17 08:42:17 -0400] bigbigbang: hi did someone already use the phpmyadmin cookbook ? it seem that it provide it with php-fpm and i'm not aware with this; how do i connect to phpmyadmin once chef-client has run ?
[2013-04-17 08:48:36 -0400] stormerider: flaccid_: thanks, that did the trick.
[2013-04-17 08:59:48 -0400] pellis: hey guys.
[2013-04-17 09:00:03 -0400] pellis: can I search for a node in a role file? for some reason using 'search' doesn't work
[2013-04-17 09:17:42 -0400] flaccid_: stormerider: sweet
[2013-04-17 09:45:08 -0400] vilts: pellis: I don't quite understand what and how do you want to search?
[2013-04-17 09:45:32 -0400] pellis: vilts: well lets take a practical example
[2013-04-17 09:45:41 -0400] pellis: let's say I have a role for a web server
[2013-04-17 09:45:54 -0400] pellis: in that role I have a service that needs memcached
[2013-04-17 09:46:39 -0400] pellis: so within the role file, I set up attributes via override_attributes, and when I want to override the default memcached IP, i want to search for a node that perform a role of memcached and set it there
[2013-04-17 09:46:57 -0400] pellis: so I try to call 'search(:node ...)' within the rolefile, but looks like this api isn't available
[2013-04-17 09:48:22 -0400] pellis: so to summarize: a "web server" for me is something that holds the recipes for apache, memcached, and so on. after I specify the runlist I tweak the attributes of each recipe within the role file. there are instances where I need to pull values (like IP addresses) from Chef server
[2013-04-17 09:50:04 -0400] pellis: vilts: does that make sense?
[2013-04-17 10:13:27 -0400] zaargy: passing a custom knife bootstrap template on ec2 via user data? is that sensible? is there a better way?
[2013-04-17 10:14:04 -0400] zts: pellis: no, you can't do that
[2013-04-17 10:15:16 -0400] pellis: zts: so how can one do such a thing?
[2013-04-17 10:15:26 -0400] zts: pellis: the reason is that roles get turned into json to be sent to the Chef server, so any ruby code (if you're using the ruby DSL) will be run long before the node sees it
[2013-04-17 10:15:30 -0400] pellis: hardcode the IP in the role?
[2013-04-17 10:15:30 -0400] zts: pellis: you would need to do that in a recipe
[2013-04-17 10:15:53 -0400] pellis: yikes. so I need to create my own "pellis-webserver" recipe?
[2013-04-17 10:15:58 -0400] zts: pellis: one pattern people use is to have an attribute on the role that defines what to search for, and then search for that in the recipe
[2013-04-17 10:16:16 -0400] pellis: ah. then i wonder if there's a generic recipe that does search
[2013-04-17 10:19:21 -0400] intinig: hello all
[2013-04-17 10:20:04 -0400] intinig: is there a way to hide a command I execute in a chef recipe? I have a password stored in an encrypted databag and that password is used on a commandline invocation, but it gets displayed during the chef-run
[2013-04-17 10:20:12 -0400] intinig: and I'd love for that not to happen
[2013-04-17 10:20:36 -0400] intinig: https://gist.github.com/5403254
[2013-04-17 10:25:32 -0400] zts: pellis: also, don't be turned off from writing your own recipes, that's entirely normal and to be expected
[2013-04-17 10:26:06 -0400] pellis: zts: yup, i've written recipes before. when doing roles, i like to just compose things and not write recipes that are just for roles
[2013-04-17 10:26:23 -0400] pellis: but i get what you mean
[2013-04-17 10:27:06 -0400] zts: intinig: are you using something like the script/execute resource to run the command?  If so, perhaps put the password as an environment variable
[2013-04-17 10:29:29 -0400] zts: pellis: yeah, understood.  I'd note that many in the Chef community seem to be ignoring roles in favour of "role cookbooks"/"wrapper cookbooks"; while I find that a little distasteful, ready access to search is one benefit to that approach
[2013-04-17 10:30:42 -0400] zts: pellis: if you'd otherwise have to use a role + a cookbook/recipe to compose the necessary bits, perhaps a wrapper cookbook is an appropriate solution to consider
[2013-04-17 10:31:21 -0400] pellis: yep
[2013-04-17 11:01:38 -0400] BryanWB: can i put ruby inline in my .kitchen.yml?
[2013-04-17 11:03:36 -0400] BryanWB: yup i can
[2013-04-17 11:28:36 -0400] smt: Is there any knife  command to run chef-client for mac-osx?
[2013-04-17 11:44:31 -0400] gyre007: I noticed the following pull request https://github.com/opscode-cookbooks/runit/pull/11 which is transforming runit from definition to LWRP
[2013-04-17 11:44:50 -0400] gyre007: but when I navigate to https://github.com/opscode-cookbooks/runit there is no track of LWRP
[2013-04-17 11:44:58 -0400] gyre007: have I gone blind ? :)
[2013-04-17 11:45:11 -0400] gyre007: damn...its in libraries
[2013-04-17 11:45:22 -0400] gyre007: is it because of test-kitchen
[2013-04-17 11:45:24 -0400] gyre007: ?
[2013-04-17 11:53:12 -0400] zts: gyre007: it's a heavyweight RP, not an LWRP
[2013-04-17 11:54:07 -0400] zts: gyre007: probably done that way because it subclasses Chef::Resource::Service - I seem to recall you can't do that in an LWRP (yet)
[2013-04-17 11:58:17 -0400] gyre007: yeah I see...interesting stuff zts
[2013-04-17 11:59:12 -0400] gyre007: I have a q...when I have LWRP which consists of multiple subresources (like templates and files etc) and if those subresources notify other resources from withing LWRP will those notifications be propagated properly ?
[2013-04-17 12:05:43 -0400] zts: gyre007: Good question, I think that should just work with Chef 10, with Chef 11 it depends on whether you are using the inline resources mode for your LWRP
[2013-04-17 12:06:33 -0400] zts: gyre007: here is the note about Chef 11: http://docs.opscode.com/breaking_changes_chef_11.html#inline-compile-mode-for-lightweight-resources
[2013-04-17 12:06:40 -0400] gyre007: I found an interesting blog post on this kind of stuff zts http://realityforge.org/code/2012/07/17/lwrp-notify-on-changed-resources.html
[2013-04-17 12:07:44 -0400] zts: gyre007: yeah, I believe the pattern in that blog post is what "inline resources" does
[2013-04-17 12:08:28 -0400] zts: gyre007: if you just want a subresource to notify when it has changed, I don't think you need that.  If you want the LWRP to notify when any of the subresources have changed, then you do
[2013-04-17 12:08:34 -0400] zts: that's how I understand it, anyway
[2013-04-17 12:13:11 -0400] gyre007: I see..
[2013-04-17 12:13:22 -0400] gyre007: yeah it makes sense zts
[2013-04-17 12:15:19 -0400] hmarr: I'm trying to understand how to write a whyrun compatible lwrp
[2013-04-17 12:15:49 -0400] hmarr: it seems like only things you want to run on a real run should be put in converge_by
[2013-04-17 12:16:33 -0400] hmarr: but looking at some existing cookbooks, it looks like everything (including code that checks if an action should be taken) is dumped in converge_by blocks
[2013-04-17 12:16:35 -0400] hmarr: e.g. https://github.com/opscode-cookbooks/aws/blob/master/providers/elastic_lb.rb
[2013-04-17 12:17:58 -0400] hmarr: is there any reason why lines 5 & 6, 17 & 18, etc, aren't outside the converge_by block?
[2013-04-17 13:52:19 -0400] heathsnow: has anyone run into the following:  executing 'sudo chef-client' fails with 'Log level must be one of :debug, :info, :warn, :error, or :fatal (ArgumentError)'.
[2013-04-17 13:52:47 -0400] heathsnow: The result is I have to run it with the '-l info' option...but I shouldn't have to....perhaps the version, 10.18.2, has some sort of issue?
[2013-04-17 13:54:49 -0400] nlloyds: heathsnow: I think I might have seen this, give me a sec
[2013-04-17 13:57:15 -0400] nlloyds: Here we go: http://tickets.opscode.com/browse/CHEF-3698
[2013-04-17 13:58:54 -0400] nlloyds: heathsnow: If you're using server 10 you should make sure you're using 10 client as well to avoid this I think.
[2013-04-17 13:59:55 -0400] heathsnow: ah..thanks nlloyds.  I'm using Hosted Chef.
[2013-04-17 14:00:42 -0400] heathsnow: nlloyds: do you know how I would execute the bootstrap then?
[2013-04-17 14:01:40 -0400] heathsnow: currently I'm executing: knife bootstrap SERVER -E 'ENVIRONMENT' -r 'ROLES' --bootstrap-version 10.18.2 -x USERNAME -P PASSWORD --sudo
[2013-04-17 14:01:42 -0400] nlloyds: heathsnow: Any reason you're using 10.18.2?
[2013-04-17 14:02:20 -0400] heathsnow: nlloyds: all my production nodes are 10.18.2.  Not planning on upgrading them until after ChefConf
[2013-04-17 14:02:44 -0400] heathsnow: Perhaps now is a good time to test it though :P
[2013-04-17 14:03:34 -0400] heathsnow: Think I'll rebootstrap my test machine and see if all my problems dissappear :)
[2013-04-17 14:03:38 -0400] nlloyds: heathsnow: Which version do you get on your local machine with `gem list chef`?
[2013-04-17 14:04:08 -0400] nlloyds: heathsnow: (the one you're running knife from)
[2013-04-17 14:04:20 -0400] heathsnow: nlloyds:  chef (11.4.0, 11.2.0, 10.18.2, 10.16.2, 10.14.4)
[2013-04-17 14:04:33 -0400] heathsnow: i'm much more loose with my workstation
[2013-04-17 14:04:46 -0400] nlloyds: heathsnow: `gem uninstall chef` and remove everything that's not 10.18.2 and it should work.
[2013-04-17 14:05:06 -0400] heathsnow: nlloyds: I'll give that a shot now....thanks a bunch :)
[2013-04-17 14:06:31 -0400] nlloyds: heathsnow: no prob. It's getting the log level that it's putting in the bootstrap script from the chef gem it's using there. Since 10.18 can't understand it it fails. Remove the Chef 11 gem locally and it won't do that.
[2013-04-17 14:44:17 -0400] aszeszo: hi all, i am new to chef and started playing with recipes using chef-solo
[2013-04-17 14:44:49 -0400] aszeszo: i would like to print variable values to stdout or to the log file but don't know how
[2013-04-17 14:45:03 -0400] aszeszo: for printf-like debugging
[2013-04-17 14:46:10 -0400] laurent\: Chef::Log.info("message") or the Log provider
[2013-04-17 14:46:27 -0400] laurent\: http://docs.opscode.com/resource_log.html
[2013-04-17 14:50:24 -0400] aszeszo: laurent\: great stuff, will try it now
[2013-04-17 15:34:33 -0400] lojak: Within a role, the recipes are run in order. If I have a list of roles, do those necessarily run in order as well?
[2013-04-17 15:38:25 -0400] c0ff33: i am setting up my own chef server and i dont understand the best way to manage cookbooks - say i want to install the nagios cookbook - is there a "knife cookbook install" command that gets the latest version or do I need to find where it lives, git clone it, then upload it?
[2013-04-17 15:38:44 -0400] AikiLinux: Hello , how can i tell chef to check if an rpm is installed, and if not , install it ?
[2013-04-17 15:40:25 -0400] jtimberman: AikiLinux: chef's package resource does that automatically.
[2013-04-17 15:40:30 -0400] jtimberman: AikiLinux: package "mypackage"
[2013-04-17 15:40:48 -0400] jtimberman: AikiLinux: it will use the underlying package manager on the system to determine if it is installed, and attempt to install it.
[2013-04-17 15:40:55 -0400] zts: lojak: the answer is probably yes, but it depends what you mean.  If your run list is "Recipe A, Role A, Recipe B", and Role A's run list is "Recipe C, Recipe D", the order the recipes will be compiled is "A, C, D, B"
[2013-04-17 15:40:56 -0400] jtimberman: e.g. on RHEL platforms, it will use yum.
[2013-04-17 15:41:19 -0400] c0ff33: where is the guide showing how to download and manage cookbooks?
[2013-04-17 15:42:18 -0400] jtimberman: lojak: Yes. Chef expands the run lists of all the roles included on the node to get a single list of recipes to apply.
[2013-04-17 15:42:33 -0400] jtimberman: lojak: and it expands those in the order they are specified on the node.
[2013-04-17 15:43:11 -0400] jtimberman: c0ff33: there's a number of workflows out there. many people are now using a dependency manager like berkshelf or librarian for retrieving the cookbooks.
[2013-04-17 15:43:50 -0400] c0ff33: jtimberman: have your written a blog post on those?
[2013-04-17 15:44:04 -0400] jtimberman: c0ff33: i've written a blog post about berkshelf.
[2013-04-17 15:44:13 -0400] jtimberman: but my post isn't a guide.
[2013-04-17 15:44:19 -0400] jtimberman: per se :)
[2013-04-17 15:44:21 -0400] c0ff33: lol
[2013-04-17 15:44:25 -0400] lojak: so, in my example, I had a role with the run list "Role A, Role B" and Role A had the run list "Recipe build-essential, Recipe blah", then Role B had the run list "Recipe depends-on-build-essential"
[2013-04-17 15:44:36 -0400] rteabeault_: The dmg_package lwrp creates other resources for the install action.  So if you try to run the resource in the compile phase with a run_action(:install) it does not seem to also run those other resources that are created.  How can you get the run_action to also run the other resources that are created by a lwrp?
[2013-04-17 15:44:36 -0400] lojak: and that would fail, unless I added build-essential to the top of Recipe B as well
[2013-04-17 15:45:46 -0400] jtimberman: c0ff33: Historically, Opscode isn't prescriptive about workflow because we don't know the culture of your team or what implementation of Chef you're using, or how you develop cookbooks.
[2013-04-17 15:46:41 -0400] c0ff33: jtimberman - i understand, but getting up and running w chef has been quite painful for us. we just want to use some of the basic existing cookbooks and keep them up to date on our own chef-server
[2013-04-17 15:47:13 -0400] jtimberman: c0ff33: use berkshelf :)
[2013-04-17 15:47:52 -0400] c0ff33: and there used to be a tender support app, then there is confluence / wiki, now there is other documentation, chef went from being apt-get installed to a standalone omnibus package...
[2013-04-17 15:48:03 -0400] jtimberman: wow, tender went away awhile ago :)
[2013-04-17 15:48:05 -0400] c0ff33: thanks :) i will give it a try
[2013-04-17 15:48:13 -0400] c0ff33: yeah we've been at this for a while
[2013-04-17 15:48:56 -0400] rteabeault_: So is this possible?  Any ideas?
[2013-04-17 15:52:28 -0400] zts: rteabeault_: I'm not certain, but imagine that would work if you change the LWRP to use inline compilation mode - http://docs.opscode.com/breaking_changes_chef_11.html#inline-compile-mode-for-lightweight-resources
[2013-04-17 15:54:08 -0400] rteabeault_: zts: Thanks, I will take a look at that
[2013-04-17 15:56:07 -0400] c0ff33: jtimberman: can't find that blog entry you mentioned - http://www.opscode.com/blog/?s=berkshelf
[2013-04-17 15:57:03 -0400] jtimberman: I didn't write it on the opscode blog. :) jtimberman.housepub.org/blog/2012/11/19/chef-repository-berkshelf-conversion/
[2013-04-17 15:57:44 -0400] jtimberman: because when people see something like that on the "opscode blog", they think "opscode says I must use this to be supported" or something like that :)
[2013-04-17 15:57:59 -0400] c0ff33: i see
[2013-04-17 15:58:00 -0400] jtimberman: "This is the official mandate from the mountain top"
[2013-04-17 15:58:04 -0400] c0ff33: right
[2013-04-17 15:58:04 -0400] jtimberman: Noooooooo.
[2013-04-17 15:58:12 -0400] c0ff33: can i use berkshelf without vagrant?
[2013-04-17 16:00:01 -0400] jtimberman: sure
[2013-04-17 16:01:14 -0400] jmartin: jtimberman: ever thought of crafting a recommended workflow cookbook?
[2013-04-17 16:01:46 -0400] c0ff33: what does "Install the cookbooks you specified in the Berksfile and their dependencies" mean ?
[2013-04-17 16:02:02 -0400] yfeldblum: jtimberman, whereas when people see something like that on jtimberman's block, they think "what a crank - i better do the opposite of what he says"?
[2013-04-17 16:02:11 -0400] yfeldblum: blog*
[2013-04-17 16:02:16 -0400] jtimberman: yfeldblum: just you ;)
[2013-04-17 16:02:22 -0400] c0ff33: i dont see any info about how to setup a Berksfile :(
[2013-04-17 16:02:30 -0400] jtimberman: c0ff33: berks init
[2013-04-17 16:02:36 -0400] jtimberman: http://www.berkshelf.com
[2013-04-17 16:02:42 -0400] c0ff33: yeah im trying to follow that guide
[2013-04-17 16:03:03 -0400] jakshi: Hello All!
[2013-04-17 16:03:54 -0400] jakshi: I have unusual case. I setup default attributes then override them in role. but, they don't overrides, they merged :(
[2013-04-17 16:04:27 -0400] jakshi: May be anybody knows - how to enforce attribute to be overrided?
[2013-04-17 16:09:40 -0400] c0ff33: jtimberman: if i am using berkshelf do i need to edit the cookbook_path in my knife config to include both ~/cookbooks and ~/.berkshelf/cookbooks ?
[2013-04-17 16:10:48 -0400] jtimberman: c0ff33: no, you use berks upload to upload cookbooks specified in the Berksfile.
[2013-04-17 16:11:02 -0400] c0ff33: interesting
[2013-04-17 16:11:06 -0400] jtimberman: if you still have cookbooks in ~/cookbooks or some other path, you still use knife cookbook upload.
[2013-04-17 16:11:29 -0400] c0ff33: so i should remove all of the standard cookbooks from ~/cookbooks and just put my custom cookbooks in there?
[2013-04-17 16:11:36 -0400] jtimberman: it's recommended by the berkshelf authors that you move those cookbooks to their own repositories or otherwise keep track of them in the Berksfile.
[2013-04-17 16:11:37 -0400] c0ff33: (i know i know workflow question)
[2013-04-17 16:12:02 -0400] c0ff33: which cookbooks are "those" ?
[2013-04-17 16:12:15 -0400] jtimberman: yours?
[2013-04-17 16:12:18 -0400] jtimberman: like, the ones you write
[2013-04-17 16:12:19 -0400] sparr: I am going to use cobbler to deploy centos and a chef client to a physical server. I then want chef on that server to install a bunch of OS packaged. Later chef will be instructed to upgrade some of those packages, but it might be doing so from a chef-solo instance with all the package files in a local repository (or just a local filesystem). Are there any guidelines for that sort of environment?
[2013-04-17 16:12:25 -0400] c0ff33: ok got it
[2013-04-17 16:12:34 -0400] jtimberman: any cookbooks you're getting from the community site should be in the berksfile.
[2013-04-17 16:12:42 -0400] c0ff33: cool
[2013-04-17 16:13:00 -0400] c0ff33: still don't understand one thing: is it recommended to edit community cookbooks - like keeping your own branch of those or not?
[2013-04-17 16:13:02 -0400] thehar: morning
[2013-04-17 16:13:16 -0400] c0ff33: because i think i saw in the documentation somewhere that method...
[2013-04-17 16:13:29 -0400] jtimberman: if you need to, sure
[2013-04-17 16:13:36 -0400] jtimberman: then you'd effectively fork them.
[2013-04-17 16:13:36 -0400] c0ff33: i mean i try to avoid it
[2013-04-17 16:13:40 -0400] jtimberman: totally :)
[2013-04-17 16:13:53 -0400] jtimberman: but sometimes, i write bugs and you want to fix that :D
[2013-04-17 16:13:59 -0400] c0ff33: lol
[2013-04-17 16:14:16 -0400] c0ff33: so i have my own "devtools" cookbook
[2013-04-17 16:14:35 -0400] c0ff33: should that go in ~/cookbooks or in the ~/.berkshelf/cookbooks folder?
[2013-04-17 16:14:35 -0400] kindsol: c0ff33: here is a blog post I like about "wrapping" community cookbooks instead of forking them. http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-04-17 16:14:52 -0400] jakshi: Does somebody knows how to prevent chef from merging attributes?
[2013-04-17 16:14:59 -0400] c0ff33: yeah i just came across that thanks
[2013-04-17 16:15:10 -0400] kindsol: of course if your edits are generic enough, you should fork and contribute them back by way of a pull request
[2013-04-17 16:16:18 -0400] c0ff33: sorry to dwell on this - but where do i put my own cookbooks if i am using berkshelf?
[2013-04-17 16:16:40 -0400] kindsol: c0ff33: also, if you want to keep all your custom cookbooks in the same repository you still can do that with Berkshelf.  Look at the rel: key in the berkshelf docs
[2013-04-17 16:16:59 -0400] kindsol: that's what I do
[2013-04-17 16:17:19 -0400] c0ff33: hmm thanks kindsol
[2013-04-17 16:17:38 -0400] kindsol: only the cookbooks that I contribute to the community (or plan to) do I place in their own repo
[2013-04-17 16:17:50 -0400] jakshi: c0ff33 somewhere on the disk, then upload them to git repository, then specify these git respositories in Berksfile, then berks upload will upload them
[2013-04-17 16:18:04 -0400] kindsol: my custom ones (that no one wants) are all in on monolithic repo
[2013-04-17 16:18:12 -0400] kindsol: s/on/one
[2013-04-17 16:18:13 -0400] c0ff33: jakshi - interesting. that makes sense
[2013-04-17 16:18:49 -0400] c0ff33: thansk jakshi
[2013-04-17 16:19:29 -0400] gad0lin: is node[:fqdn] defined in chef solo? It looks to me that now,  I am runnig chef-server cookbook from master, and it has  default['chef-server']['api_fqdn'] = node['fqdn'], which api_fqdn to empty value
[2013-04-17 16:19:33 -0400] gad0lin: ?
[2013-04-17 16:20:13 -0400] jakshi: Does anybody knows how to force chef not merge attributes?
[2013-04-17 16:22:40 -0400] gad0lin: shef -s show nil for node['fqdn']
[2013-04-17 16:23:43 -0400] gad0lin: I want to set it external domain name, or external ip, can I do that on the role level?
[2013-04-17 16:25:05 -0400] therobot: Hi, I'm using the nginx opscode cookbook, specifically the source recipe. I want to recompile nginx to a higher version but I haven't found specific instructions on how to do it. What is the preferred way to do this kind of update?
[2013-04-17 16:27:01 -0400] tacahiroy: 2
[2013-04-17 16:27:02 -0400] tacahiroy: 1
[2013-04-17 16:27:11 -0400] tacahiroy: oops - sorry
[2013-04-17 16:29:43 -0400] nlloyds: therobot: You would want to override['nginx']['version'] = 'the version you want' in a you cookbook's attributes or role
[2013-04-17 16:30:51 -0400] dfrey: has anyone received the following error installing with pip? ImportError: No module named pkg_resources
[2013-04-17 16:30:52 -0400] therobot: nlloyds: Then I'm doing something wrong, because that's precisely what I did, overriding the version in a role, to no avail.
[2013-04-17 16:31:42 -0400] nlloyds: therobot: does it show the right attribute with `knife node show your-node-name -a nginx`?
[2013-04-17 16:32:04 -0400] therobot: nlloyds: no, it shows the former version number
[2013-04-17 16:32:44 -0400] nlloyds: therobot: Have you successfully run chef-client on the node, with that role in the run list?
[2013-04-17 16:33:06 -0400] therobot: nlloyds: yes, twice actually
[2013-04-17 16:33:38 -0400] nlloyds: hmm. Can you `knife node edit` the node to update it?
[2013-04-17 16:33:52 -0400] therobot: I will try
[2013-04-17 16:34:29 -0400] holojorge: therobot: are you using override_attributes or default_attributes?
[2013-04-17 16:34:43 -0400] nlloyds: It's also make sure it shows up with in `knife role show`
[2013-04-17 16:36:13 -0400] holojorge: therobot: in the mysql cookbook I had the same behavior if I was using default_attributes in a role. So I changed to override_attributes and it solved the problem.
[2013-04-17 16:36:23 -0400] therobot: the required "nginx": { "version" : "1.2.3" }  override attributes appear when using `knife role show`
[2013-04-17 16:36:58 -0400] therobot: I can't update this atrribute when editing the node, it does not appear
[2013-04-17 16:37:58 -0400] nlloyds: therobot: It might if you do `knife node edit node-name -a`
[2013-04-17 16:39:32 -0400] adamjk-dev: is anyone using berkshelf v1.4.0 and their own site to download cookbooks
[2013-04-17 16:39:53 -0400] adamjk-dev: for instance, not using the site :opscode, but instead using chef_api "<yourlocalchefserver>"
[2013-04-17 16:40:01 -0400] therobot: nlloyds: good, when running this command the version I set with the role override appears, but when doing `knife node show` the old one shows up
[2013-04-17 16:41:47 -0400] rayrod2030: anyone running chef with vcloud director?
[2013-04-17 16:42:01 -0400] rayrod2030: or doing any heavy api driven automation with vcloud director?
[2013-04-17 16:43:54 -0400] nlloyds: therobot: You might want to try deleting the attributes in the knife node edit, then running chef-client again.
[2013-04-17 16:48:34 -0400] therobot: nlloyds: It did not worked, actually the old version number is set again.  I'm using an old version of the cookbook 1.0.2
[2013-04-17 16:49:04 -0400] lightpriest_: should I use @new_resource or new_resource in LWRP? I'm seeing mixed examples on various cookbooks
[2013-04-17 16:50:53 -0400] nlloyds: therobot: Ahh, that's probably your problem. I'm guessing there was a bug in the version you are using that causes attributes to get set incorrectly.
[2013-04-17 16:51:40 -0400] therobot: good, I will try updating the cookbook
[2013-04-17 16:51:48 -0400] therobot: thanks a lot for your help nlloyds
[2013-04-17 16:52:08 -0400] nlloyds: therobot: No prob. I was pulling my hair out over a similar problem on an older cookbook just yesterday.
[2013-04-17 17:14:29 -0400] smoak: if i declare variables in a base recipe and use include_recipe 'base' in a new recipe, are those variables in the base recipe supposed to be available to the new recipe?
[2013-04-17 17:15:32 -0400] nlloyds: smoak: If they are local variables in that recipe, then no. You would probably want to use default attributes for that.
[2013-04-17 17:16:08 -0400] smoak: ah gotcha thanks
[2013-04-17 17:53:03 -0400] directionless: I have a chef server (v10). Sometime in the last day, "knife node list" started timing out. I also can no longer visit the web interface. I feel a little dumb, but I'm not sure how to start debugging this. My server appears to be running it's chef processes, I don't see much in the logs. help?
[2013-04-17 18:14:44 -0400] directionless: Ah ha. Just some weird network routing issue
[2013-04-17 18:18:45 -0400] david415: i noticed that sometimes Berkshelf doesn't put the version numbers in the Berksfile.lock
[2013-04-17 18:18:51 -0400] david415: anyone know why that is?
[2013-04-17 18:20:31 -0400] smoak: is there a way to set default attributes for chef-solo? im passing chef-solo a json file with { "default_attributes": "test": { "my_attribute": "1" }, "run_list": "myrecipe" } but the value of node[:test][:my_attribute] is nil
[2013-04-17 18:30:43 -0400] mbf: hey all.  my chef server moved (and changed versions) and i'm trying to update my workstation
[2013-04-17 18:31:17 -0400] smoak: ah i figured it out, any node attributes should be set at the top level, ie: { "test_attribute": "1", "run_list": "myrecipe" } and then you can refer to it as node[:test_attribute] within the recipe
[2013-04-17 18:31:37 -0400] mbf: i got a new user.pem as well as a new validator.pem
[2013-04-17 18:32:06 -0400] mbf: and udpated the references in my knife.rb
[2013-04-17 18:32:09 -0400] mbf: ERROR: You authenticated successfully to https://chef.jirafe.net as mbf but you are not authorized for this action Response:  You are not allowed to take this action.
[2013-04-17 18:32:46 -0400] mbf: is the response to  "knife client list"
[2013-04-17 18:36:12 -0400] KarlHungus: so. is there a way to give a node write access to a specific data bag yet?
[2013-04-17 18:38:19 -0400] smoak: now next question, if i include a recipe (via include_recipe 'recipe') it's looking for template files under templates/default instead of templates/<recipe_name>, why is that?
[2013-04-17 18:38:48 -0400] KarlHungus: smoak: in the docs... http://docs.opscode.com/essentials_cookbook_templates_location_specificity.html
[2013-04-17 18:39:48 -0400] smoak: ah ok, this is the key sentence here: "Templates are not split up into different directories by a recipe."
[2013-04-17 18:39:54 -0400] smoak: thanks KarlHungus
[2013-04-17 18:40:40 -0400] KarlHungus: smoak: there is a directive yoou can pass to the template resource that will let you specify the cookbook name to search in for the template
[2013-04-17 18:40:47 -0400] KarlHungus: s/directive/attribute/
[2013-04-17 18:42:14 -0400] smoak: hmm, i think i can live with just using the default folder though, unless that attribute is easy :P
[2013-04-17 18:43:27 -0400] KarlHungus: smoak: i mean that you can create a recipe call foo, put a template in it, then from recipe bar you can reference that template by telling the template resource to look in foo for the file
[2013-04-17 18:46:10 -0400] smoak: ah cool thanks for the info, i think i can use the path attribute
[2013-04-17 18:47:47 -0400] KarlHungus: hmm, even with the hosted chef ACL's it seems i cannot set per data bag access
[2013-04-17 18:48:29 -0400] KarlHungus: thats kind of a bummer :(
[2013-04-17 18:49:57 -0400] tomdzk: KarlHungus: maybe encrypted data bags would help ? only give that node the key
[2013-04-17 18:52:34 -0400] KarlHungus: tomdzk: the issue is that i don't want to give the node admin to all objects
[2013-04-17 18:54:28 -0400] tomdzk: KarlHungus: not quite sure I understand, you want it to have access to only specific data bags ? you can have separate encryption keys for individual data bag items that you then pass in to the Chef::EncryptedDataBagItem.load call
[2013-04-17 18:55:37 -0400] KarlHungus: yes. i have a certificates data bag. its encrypted. a node identifies the hostname it needs a cert for and refernces the bag. if it isnt found and the node is !prod, then it should self-sign a cert and store it
[2013-04-17 18:56:27 -0400] KarlHungus: so, i want the node to have read access to *, and create (not update) access to only data_bags/certificates/
[2013-04-17 18:57:02 -0400] jackery: I recently upgraded to chef 11 and keep getting this error when trying to add a user:
[2013-04-17 18:57:02 -0400] jackery: ERROR: Failed to authenticate to https://chef.ask.com as admin with key /etc/chef/admin.pem
[2013-04-17 18:57:02 -0400] jackery: Response:  Invalid signature for user or client 'admin'
[2013-04-17 18:57:13 -0400] jackery: Any ideas what I could be doing incorrectly?
[2013-04-17 18:57:21 -0400] tomdzk: KarlHungus: ah yes, encrypted data bags are useless for distinguishing read vs. write access
[2013-04-17 18:58:45 -0400] KarlHungus: jackery: please review the chef 11 migration blog post, http://www.opscode.com/blog/2013/03/12/5106/
[2013-04-17 19:00:55 -0400] jackery: KarlHungus: Followed it :(
[2013-04-17 19:00:57 -0400] jackery: no dice
[2013-04-17 19:01:05 -0400] jackery: no common problems that users encounter?
[2013-04-17 19:01:44 -0400] KarlHungus: jackery: even the step on the admin client?
[2013-04-17 19:02:10 -0400] KarlHungus: step 4.2?
[2013-04-17 19:02:21 -0400] jackery: "If you have knife clients that use the admin key, you can either copy the new admin.pem to those client workstations, or you can make them work silently by replacing the Chef 11 admin's key with the old one. NOTE: if you don't have knife clients or are able to get the new pem over to knife workstations easily, I would skip the following section and just remove clients/admin.json."
[2013-04-17 19:02:26 -0400] jackery: I was trying to create new users
[2013-04-17 19:02:31 -0400] jackery: I'll give this method a shot and see if it works.
[2013-04-17 19:05:22 -0400] jackery: I'm thinking one of our users may have messed up the admin keypair. Is the public portion of the admin key stored on the chef server anywhere?
[2013-04-17 19:12:23 -0400] jackery: or is there a way to generate a new admin key/pair? knife user edit isn't saving my change.
[2013-04-17 19:12:30 -0400] log1kal: Anyone know if there's somewhere I can buy the "whipping up awesome" chef stickers?
[2013-04-17 19:12:37 -0400] lojak: is it possible to specify the ordering of pg_hba attributes for the postgresql cookbook?
[2013-04-17 19:12:51 -0400] log1kal: Switching jobs and can't take my laptop with the sticker on it with me :(
[2013-04-17 19:14:10 -0400] zts: KarlHungus: re: data bag ACLs in hosted chef, I'm not using it, but I'm sure I tested it in the past.  What's the problem?
[2013-04-17 19:14:14 -0400] nlloyds: lojak: It looks like they are specified as an array, so they would be ordered by default (see https://github.com/opscode-cookbooks/postgresql/blob/master/templates/default/pg_hba.conf.erb#L25-L35 )
[2013-04-17 19:14:22 -0400] KarlHungus: lojak: oh, please submit a pull req to get rid of that stupid array
[2013-04-17 19:14:28 -0400] KarlHungus: arrays are horrid for attributes
[2013-04-17 19:14:30 -0400] zts: oh cright, create but not update
[2013-04-17 19:14:34 -0400] zts: s/cright/create/
[2013-04-17 19:14:39 -0400] KarlHungus: zts: yeah. :/
[2013-04-17 19:14:41 -0400] jtimberman: KarlHungus: :(
[2013-04-17 19:14:51 -0400] jtimberman: log1kal: going to chefconf?
[2013-04-17 19:15:06 -0400] KarlHungus: i'm open source server anyhow. i'll solve it another way ;)
[2013-04-17 19:15:37 -0400] zts: KarlHungus: Yeah, I've generally been in the same boat :)
[2013-04-17 19:15:43 -0400] KarlHungus: jtimberman: i fought that dang array for too long last night. htf do you maintain a sane order when merging arrays at different precendence levels?
[2013-04-17 19:15:44 -0400] nlloyds: lojak: You would just need to override the postgresql.pg_hba attribute and put them in the order you want: https://github.com/opscode-cookbooks/postgresql/blob/master/attributes/default.rb#L175-L180
[2013-04-17 19:16:17 -0400] log1kal: jtimberman: no, sadly. I couldn't swing the ticket and lodging on my own :(
[2013-04-17 19:16:21 -0400] zts: KarlHungus: relatedly, I'll have a blog post about that use case (sort of) in the next couple of days
[2013-04-17 19:16:53 -0400] lojak: nlloyds: so, I'd add all of those values in the order I want to "overrides" instead of adding just the line I want to "defaults"?
[2013-04-17 19:17:08 -0400] nlloyds: KarlHungus: What would be a better way to specify those pg_hba attributes?
[2013-04-17 19:17:11 -0400] KarlHungus: fwiw, i ended up doing this https://gist.github.com/jssjr/1ac67eba91a00b9679b2
[2013-04-17 19:17:16 -0400] nlloyds: lojak: Yes
[2013-04-17 19:17:17 -0400] zts: KarlHungus: using http://community.opscode.com/cookbooks/x509 - it doesn't solve the problem of distributing private keys for certs though
[2013-04-17 19:17:29 -0400] KarlHungus: zts: yeah. i need to move to a CA based scheme
[2013-04-17 19:17:49 -0400] KarlHungus: zts: but this affects the https://github.com/jssjr/chef-tarsnap cookbook/plugin i released too
[2013-04-17 19:17:57 -0400] KarlHungus: i have to file myself an issue for that actually =)
[2013-04-17 19:18:01 -0400] zts: KarlHungus: gotcha :)
[2013-04-17 19:19:57 -0400] KarlHungus: nlloyds: i dont know. it was 3am and i gave up trying to figure out a better structure
[2013-04-17 19:20:18 -0400] KarlHungus: see how ugly that gist is? thats definitely some 6 beer deep early morning code...
[2013-04-17 19:20:53 -0400] nlloyds: :)
[2013-04-17 19:21:16 -0400] KarlHungus: arrays aren't it though ;) attributes act like hashes, not arrays
[2013-04-17 19:22:05 -0400] masterkorp: hello does knife works with net-ssh-multi-1.2.0
[2013-04-17 19:22:15 -0400] masterkorp: ?
[2013-04-17 19:22:26 -0400] masterkorp: /usr/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Could not find 'net-ssh-multi' (~> 1.1.0) - did find: [net-ssh-multi-1.2.0] (Gem::LoadError)
[2013-04-17 19:22:31 -0400] masterkorp: its bitching :(
[2013-04-17 19:22:49 -0400] KarlHungus: masterkorp: pessimistic greater than means no ;)
[2013-04-17 19:23:06 -0400] KarlHungus: only 1.1.(0-n)
[2013-04-17 19:23:35 -0400] masterkorp: awww :(
[2013-04-17 19:24:56 -0400] Guest73271: we run our own chef server on AWS, if we move to Hosted Chef, will OpsCode assit the migration?
[2013-04-17 19:25:25 -0400] jtimberman: Guest73271: email support@opscode.com
[2013-04-17 19:25:35 -0400] Guest73271: thx!
[2013-04-17 19:27:54 -0400] adamjk-dev: does anyone use berkshelf with chef solo and chef server 11?
[2013-04-17 19:28:08 -0400] adamjk-dev: and use chef_api to access cookbooks on a local server (not using site :opscode etc.)?
[2013-04-17 19:28:38 -0400] adamjk-dev: ridley is refusing to connect when trying to get cookbooks from my local server
[2013-04-17 19:29:21 -0400] adamjk-dev: [Berkshelf] Updating Vagrant's berkshelf: '/home/vagrant/.berkshelf/vagrant/berkshelf-20130417-15184-7e9ivd'
[2013-04-17 19:29:22 -0400] adamjk-dev: Ridley::Connection crashed!
[2013-04-17 19:29:22 -0400] adamjk-dev: Faraday::Error::ConnectionFailed: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
[2013-04-17 19:29:35 -0400] david415: can the Berksfile.lock be reliably used to determine the version of a cookbook that has be placed in the berkshelf?
[2013-04-17 19:30:02 -0400] dougnukem: are there directions or build scripts that explain how to use omnibus-chef to build a debian package of the chef client, I've got to the point where I am using the omnibus-1.0 branch and the vagrant ubuntu-12.04 but I've had to do some manual steps so far such as running "berks install --path cookbooks" to ensure the cookbooks were available for vagrant provisioning
[2013-04-17 19:30:22 -0400] dougnukem: In the end I'm trying to build a forked version of chef (so I also need to point it to a different git repo when it's building)
[2013-04-17 19:31:38 -0400] dougnukem: I think I was able to override the chef git repo it was building from by creating a config/software/chef.rb with a source :git => "git://github.com/dimerica-industries/chef"
[2013-04-17 19:32:37 -0400] dougnukem: but I ran into some weirdness where the actual "chef" debian package produced contained the forked version of chef but under /opt/chef/embedded/lib/gems/1.9.1/gems/chef-11.0.0.alpha1
[2013-04-17 19:45:05 -0400] zts: dougnukem: assuming your fork has the version 11.0.0.alpha1, that's where I'd expect it (through an omnibus install)
[2013-04-17 20:04:56 -0400] dougnukem: @zts, you're right that that's the version I wanted but the "final" version that was located at /opt/chef/bin/chef-solo -v said 11.4.0
[2013-04-17 20:13:59 -0400] jameson_: can attributes/default.rb not be static?
[2013-04-17 20:14:22 -0400] jameson_: doing if/then/for etc inside attribute is discouraged?
[2013-04-17 20:21:35 -0400] barefoot: is Mash > Hash for ruby?
[2013-04-17 20:21:45 -0400] barefoot: err s/ruby/chef
[2013-04-17 20:25:15 -0400] nlloyds: barefoot: A mash is like a hash but with some built-in conveniences.
[2013-04-17 20:26:22 -0400] nlloyds: See https://github.com/opscode/chef/blob/master/lib/chef/mash.rb
[2013-04-17 20:39:17 -0400] doomviking: yawn
[2013-04-17 21:03:23 -0400] jed_: I'm writing an autoprovisioner and I'd like the tail end of it to allow the user to reset his (temporary) password after configuring Knife. rather than operate against the Chef API, is there a way to automate knife? from the --help, it seems completely designed interactively. is there a way I can feed 'knife user edit' stdin and have it work? piping to knife doesn't seem to work, and I don't see a -f - or equivalent
[2013-04-17 21:05:41 -0400] jed_: I basically just need '{"password": "foo"}' | knife user edit $USER, noninteractively, or I need to patch pychef to open up access to users; debating which one is least resistance
[2013-04-17 21:07:29 -0400] lojak: so, I was working on deploying an application when I started getting the following error: "[2013-04-17T21:05:42+00:00] ERROR: NoMethodError: Undefined method or attribute `ipaddress' on `node'"
[2013-04-17 21:07:39 -0400] lojak: not quite sure what would have caused it (it seemed random), or how to fix
[2013-04-17 21:10:56 -0400] shanlar: does anyone know where the doc is on using databag from within a recipe?
[2013-04-17 21:11:09 -0400] shanlar: need to save info from a node into a databag
[2013-04-17 21:12:55 -0400] lojak: I've run "sudo ohai ipaddress" which seems to output an ip address
[2013-04-17 21:16:49 -0400] gleam: http://docs.opscode.com/essentials_data_bags_use_recipe.html
[2013-04-17 21:17:28 -0400] heathsnow_: Has anyone had any luck clustering rabbitmq nodes using the rabbitmq cookbook?  I just keep getting the error:  mnesia could not connect to any disc nodes
[2013-04-17 21:25:34 -0400] monokrome: Does anyone know how I can get the path to the virtualenv directory from inside of my recipe using application_python?
[2013-04-17 21:25:52 -0400] monokrome: I tried accessing new_resource.virtualenv like the application_python recipe does, but it says that new_resource isn't found
[2013-04-17 21:26:08 -0400] monokrome: No resource found for new_resource. Tried application_new_resource, application_python_new_resource, new_resource
[2013-04-17 21:42:40 -0400] miah: new_resource isn't for use inside 'recipes'
[2013-04-17 21:46:51 -0400] marshally: is there a way to get a list of the exact commands chef is executing? my googlings on this issue are inconclusive
[2013-04-17 21:54:27 -0400] heathsnow_: marshally: does executing 'chef-client -l debug' not provide enough information?
[2013-04-17 21:55:37 -0400] marshally: heathsnow_: when i run in "-l debug" and then execute those commands by hand, they complete successfully
[2013-04-17 21:55:51 -0400] marshally: so i think the environment is not getting initialized correctly or something
[2013-04-17 21:56:12 -0400] marshally: in particular, i'm using deploy_revision resource to set up some svn repos  (ick, i know)
[2013-04-17 21:56:33 -0400] marshally: and using the SVN_SSH env variable to force some behavior, but this is not being honored
[2013-04-17 22:06:28 -0400] miah: uh. depends on if you're using 'execute' alot. my chef recipes live mostly in ruby code.. so how would i dump the list of 'commands being executed' other than to profile my chef run.
[2013-04-17 22:13:23 -0400] david415: is there a way to use berkshelf with environment cookbook_versions?
[2013-04-17 22:14:32 -0400] david415: i just did some stuff with the berkshelf api... to integrate it into our release/deploy script...
[2013-04-17 22:14:52 -0400] miah: i doubt it
[2013-04-17 22:15:02 -0400] miah: jamey seems kind of boneheaded about using environments / roles
[2013-04-17 22:15:31 -0400] miah: but, so long as you upload and dont remove older versions of cookbooks you _might_ be safe.
[2013-04-17 22:15:38 -0400] david415: but really what we think we want is to get berkshelf to only update cookbooks which we saw we want to update AND the dependencies of those cookbooks which may have been updated
[2013-04-17 22:15:52 -0400] david415: s/saw/say/
[2013-04-17 22:16:00 -0400] miah: you could just subvert berkshelf for updating cookbooks on your chef server and tie that into your CI after tests are run on that specific cookbook
[2013-04-17 22:16:16 -0400] miah: eg, dont make 'upload all the cookbooks' a run. make 'upload _this_ cookbook now that it has passed our tests'
[2013-04-17 22:16:27 -0400] miah: and thus, don't use berkshelf for ci =)
[2013-04-17 22:18:03 -0400] david415: yeah we currently use gerrit and jenkins... so i'll only be deploying cookbooks that i know work
[2013-04-17 22:18:13 -0400] miah: cool
[2013-04-17 22:18:35 -0400] david415: however we'd like to have our git repos contain many more changes than what we actually release
[2013-04-17 22:18:44 -0400] david415: and therefore have our environments pin the versions
[2013-04-17 22:18:59 -0400] david415: but i really do not want berkshelf to update all the cookbooks
[2013-04-17 22:19:13 -0400] david415: it should only update the deps for the cookbook i am deploying
[2013-04-17 22:19:55 -0400] miah: ya
[2013-04-17 22:21:15 -0400] david415: i get the impression this is NOT how other people utilize berkshelf
[2013-04-17 22:21:24 -0400] david415: in fact i think it may not be possible to use berkshelf in this way
[2013-04-17 22:21:54 -0400] miah: i think _very few_ people using chef have thought about proper CI for their cookbooks
[2013-04-17 22:21:58 -0400] allan_wind: Is there a way to restore a template automatically?  I am deploying a config file, and I want to not update it to the new version if it contains a syntax error.  What is doc'ed is to execute a syntax on template change which means you end up with an error the first time, and future deploys works fine
[2013-04-17 22:22:24 -0400] miah: don't generate erroneous config files =)
[2013-04-17 22:22:57 -0400] spox: david415: so you want the versions of cookbooks to load to change depending on what environment you are specifying
[2013-04-17 22:23:00 -0400] spox: ?
[2013-04-17 22:23:24 -0400] allan_wind: miah: what i had was deploy to something.new, then check this file and copy it to the actual location if good, but that means I have the .new file hanging around for no good reason other than to track when to reload a service
[2013-04-17 22:24:18 -0400] miah: spox: you can already do that, with environments.
[2013-04-17 22:24:43 -0400] david415: spox: i want berkshelf to only deploy the cookbook i am deploying AND it's dependencies. the rest of the cookbooks should remain as the environment specifies.
[2013-04-17 22:24:50 -0400] spox: miah: i was meaning more the berkshelf dependency resolution bits
[2013-04-17 22:24:52 -0400] david415: i am becoming more familiar with the berkshelf api...
[2013-04-17 22:24:56 -0400] david415: and...
[2013-04-17 22:25:33 -0400] spox: david415: so specify the cookbooks you want to upload?
[2013-04-17 22:25:37 -0400] david415: i can now get my release script to update the environments file after doing a: berks install
[2013-04-17 22:26:00 -0400] miah: you can use berkshelf to upload a single cookbook yes. im not sure if it gathers the depenencies and uploads them at that time though.
[2013-04-17 22:26:06 -0400] david415: spox: well no... er not just that but also upload all the deps that need to be uploaded
[2013-04-17 22:26:12 -0400] spox: right
[2013-04-17 22:26:17 -0400] spox: so, it's supposed to do that
[2013-04-17 22:26:23 -0400] spox: but it mangles the dependencies
[2013-04-17 22:26:43 -0400] spox: https://github.com/chrisroberts/berkshelf_ext/blob/master/lib/berkshelf_ext/dependency_chains.rb
[2013-04-17 22:26:49 -0400] david415: well it can potentially fuck my environment...
[2013-04-17 22:27:01 -0400] david415: ok i will take a look at that in a minute
[2013-04-17 22:27:43 -0400] david415: because berkshelf is like: oh you've got changes in ALL the cookbooks. let me update those for you.
[2013-04-17 22:27:59 -0400] david415: but no... i want to pin versions via the environment
[2013-04-17 22:28:23 -0400] miah: you can also 'freeze' the cookbooks on upload
[2013-04-17 22:28:29 -0400] spox: +1
[2013-04-17 22:28:35 -0400] david415: hmmm
[2013-04-17 22:28:38 -0400] miah: so long as the cookbook version _changes_ it should prevent overwriting a specific version
[2013-04-17 22:28:55 -0400] david415: aha that might be what i'm looking for
[2013-04-17 22:28:56 -0400] miah: you can still get past it by 'force', but its a step in the right direction
[2013-04-17 22:29:03 -0400] david415: ya
[2013-04-17 22:29:37 -0400] miah: i dont see anything on the berkshelf page about 'freeze'ing cookbooks, but i could be wrong.
[2013-04-17 22:29:40 -0400] zts: and indeed, berkshelf 1.4 freezes by default, and won't upload deps that are already on the server and frozen
[2013-04-17 22:29:45 -0400] miah: nice
[2013-04-17 22:29:47 -0400] kindsol: david415: wouldn't you just have a Berksfile in each of your cookbook dirs, then just `berks upload` from the directory of the cookbook that you want to update?
[2013-04-17 22:30:11 -0400] zts: miah: yeah, looks like the docs need an update (Jamie mentioned it in the announce mail to the chef list the other day)
[2013-04-17 22:30:26 -0400] miah: cool. mailing lists move too fast for me to keep up
[2013-04-17 22:30:39 -0400] kindsol: of course, the metadata of your cookbook would need to call out the dependency cookbook versions
[2013-04-17 22:30:50 -0400] david415: kindsol: no
[2013-04-17 22:30:53 -0400] zts: yeah... the more on top of mailing lists I am, the less productive work I'm actually getting done
[2013-04-17 22:31:04 -0400] miah: yup =)
[2013-04-17 22:32:57 -0400] kindsol: david415: is that because you want to cookbook manage versions via environments? or ??
[2013-04-17 22:33:30 -0400] david415: just a second... various people talking to me
[2013-04-17 22:37:14 -0400] david415: kindsol: yeeup i want my cookbook versions managed via environments
[2013-04-17 22:38:03 -0400] david415: that is why i use the berkshelf api to update the environments file after doing a: berks install
[2013-04-17 22:38:10 -0400] david415: maybe i should be doing a berks update
[2013-04-17 22:38:48 -0400] david415: nope
[2013-04-17 22:38:51 -0400] david415: hmm
[2013-04-17 22:38:51 -0400] kindsol: ah yeah.  I see the problem now.  Two different version managers da the house.
[2013-04-17 22:39:01 -0400] david415: yeah
[2013-04-17 22:39:14 -0400] david415: basically the author of berkshelf didn't think about environments
[2013-04-17 22:39:20 -0400] david415: perhaps
[2013-04-17 22:39:47 -0400] david415: AND he probably uses git differently than i do
[2013-04-17 22:40:00 -0400] gad0lin: david415: he is the enemy of roles and envs ;p
[2013-04-17 22:40:12 -0400] kindsol: hahaha
[2013-04-17 22:40:15 -0400] david415: i have git repos with many more changes than i would actually like to be released
[2013-04-17 22:41:10 -0400] justincampbell: david415: the author of berkshelf uses environments to manage our cookbook versions
[2013-04-17 22:41:19 -0400] maek: anyone have an ohai plugin to detect the joyent private and public interfaces?
[2013-04-17 22:41:50 -0400] justincampbell: and what do git branches have to do with it
[2013-04-17 22:43:31 -0400] miah: justincampbell: good to hear he doesn't hate all of chef ;)
[2013-04-17 22:45:42 -0400] david415: justincampbell: i did not mention git branches
[2013-04-17 22:46:04 -0400] justincampbell: david415: "i have git repos with many more changes than i would actually like to be released"
[2013-04-17 22:46:07 -0400] justincampbell: what does that mean then
[2013-04-17 22:46:12 -0400] david415: ok...
[2013-04-17 22:46:34 -0400] david415: it means that after i do a: berks install
[2013-04-17 22:47:08 -0400] david415: i can then use the berkshelf api to grab the new version numbers of each cookbook
[2013-04-17 22:47:16 -0400] david415: and use that to update my environments file
[2013-04-17 22:47:34 -0400] david415: the point being that i've got to update my environments file
[2013-04-17 22:48:30 -0400] david415: but berkshelf updates all the cookbooks instead of just the cookbook i'm releasing (and it's deps)
[2013-04-17 22:49:50 -0400] david415: however it's looking like "chef_api: :config" in my berksfile might do what i want
[2013-04-17 22:50:23 -0400] c0ff33: I am trying to run a chef server on amazon ec2. I can do "knife node list" and get a list of nodes but when I do "knife cookbook upload xxxx" I get the error: ERROR: Network Error: getaddrinfo: nodename nor servname provided, or not known
[2013-04-17 22:50:23 -0400] justincampbell: david415: if something is not behaving like you expected you should open an issue on the github repo
[2013-04-17 22:50:27 -0400] gad0lin: david415: what about -d switch ?
[2013-04-17 22:50:56 -0400] maek: c0ff33: chef 11?
[2013-04-17 22:51:08 -0400] c0ff33: yes omnibus
[2013-04-17 22:51:14 -0400] maek: I think thats the bookshelf
[2013-04-17 22:51:27 -0400] gad0lin: david415: ah.. mistake
[2013-04-17 22:51:30 -0400] maek: let me google for a second
[2013-04-17 22:51:36 -0400] c0ff33: In my knife configuration file I have the chef_server_url set as chef_server_url "https://ec2-12-34-56-78.compute-1.amazonaws.com"
[2013-04-17 22:51:43 -0400] c0ff33: and I get that the hostname on the box is different
[2013-04-17 22:52:23 -0400] c0ff33: i.e. hostname ip-10-99-99-99 - but am I supposed to specify that in my knife config somewhere? or is that even the problem?
[2013-04-17 22:52:44 -0400] c0ff33: maek i found about 3 tickets dealing with it
[2013-04-17 22:53:19 -0400] david415: god0lin: ya... -D, [--skip-dependencies]     # Do not upload dependencies
[2013-04-17 22:53:34 -0400] allan_wind: k, this seems like a reasonable pattern for syntax checks.  create a .bad template, check the .bad template and remove it if good, notify real template
[2013-04-17 22:53:59 -0400] maek: c0ff33: there is something up with dns, and you have to change the bookshelf url
[2013-04-17 22:54:31 -0400] c0ff33: in the knife config? Or if not where do I find it? I don't see bookshelf anywhere
[2013-04-17 22:55:10 -0400] maek: its the config file for chef11
[2013-04-17 22:55:16 -0400] maek: im trying to find the bit I changed
[2013-04-17 22:55:20 -0400] c0ff33: chef-server-running ?
[2013-04-17 22:55:47 -0400] c0ff33: I just did chef-server-ctl reconfigure which I thought would fix it
[2013-04-17 22:57:10 -0400] c0ff33: trying - https://github.com/Atalanta/cucumber-chef/issues/114
[2013-04-17 22:57:14 -0400] david415: justincampbell: right. i will do if i can find something amiss. right now it just seems like i am not using the tool as it was designed to be used!
[2013-04-17 22:57:21 -0400] maek: c0ff33: http://serverfault.com/questions/483957/chef-connection-refused-for-cookbook-upload
[2013-04-17 22:57:43 -0400] david415: justincampbell: i'm not even really using the cli; using the api directly...
[2013-04-17 22:57:49 -0400] c0ff33: make looks like we found similar solutions
[2013-04-17 22:57:52 -0400] maek: c0ff33: its the bookshelf vip
[2013-04-17 22:58:03 -0400] maek: then chef-server-ctl reconfigure
[2013-04-17 22:58:04 -0400] c0ff33: should i add all those lines ?
[2013-04-17 22:58:06 -0400] david415: basically its a graph database
[2013-04-17 22:58:13 -0400] maek: just the bookshelf vip i think
[2013-04-17 22:58:20 -0400] c0ff33: hmm
[2013-04-17 22:58:24 -0400] david415: and i need this graph database to tell me the dependencies of a thing
[2013-04-17 22:58:58 -0400] david415: how else can i be sure to properly update the environements file?
[2013-04-17 22:59:26 -0400] freezey: spork :)
[2013-04-17 22:59:39 -0400] maek: c0ff33: https://github.com/opscode/omnibus-chef/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb priceless
[2013-04-17 22:59:49 -0400] david415: i can't just update the environments file with the cookbook i'm releasing because it may have deps that need updating
[2013-04-17 23:00:06 -0400] david415: freezey: spork is so 1998
[2013-04-17 23:00:08 -0400] c0ff33: interesting
[2013-04-17 23:00:09 -0400] david415: ;-)
[2013-04-17 23:00:12 -0400] freezey: ppffttt
[2013-04-17 23:00:14 -0400] freezey: heh
[2013-04-17 23:00:21 -0400] freezey: i like the sporks
[2013-04-17 23:00:22 -0400] freezey: hehe
[2013-04-17 23:00:25 -0400] freezey: works for me
[2013-04-17 23:00:27 -0400] freezey: and the team
[2013-04-17 23:00:41 -0400] c0ff33: how do i check my chef server version?
[2013-04-17 23:01:00 -0400] david415: freezey: do you use environments?
[2013-04-17 23:01:14 -0400] maek: chef-server --version
[2013-04-17 23:01:20 -0400] freezey: david415: yep
[2013-04-17 23:01:39 -0400] freezey: david415: spork updates my env files after i touch a coobkook
[2013-04-17 23:01:42 -0400] freezey: and then i commit to git
[2013-04-17 23:01:46 -0400] c0ff33: im using the embedded version so i think im supposed to use chef-server-ctl ?
[2013-04-17 23:01:58 -0400] freezey: if your on linux
[2013-04-17 23:02:00 -0400] david415: freezey: ok well that's cool. so you manage your dependencies yourself?
[2013-04-17 23:02:02 -0400] freezey: just check to see whats installed
[2013-04-17 23:02:23 -0400] freezey: david415: dependencies in cookbooks?
[2013-04-17 23:02:35 -0400] freezey: david415: i make sure to have in metadata.rb
[2013-04-17 23:02:40 -0400] freezey: spork reminds you to do so
[2013-04-17 23:02:47 -0400] david415: i update stuff in git that i do not want to be deployed...
[2013-04-17 23:03:05 -0400] c0ff33: maek i dont have chef-server ... :(
[2013-04-17 23:03:08 -0400] maek: c0ff33: sure or your package manager list
[2013-04-17 23:03:13 -0400] freezey: yeah as i said
[2013-04-17 23:03:13 -0400] freezey: heh
[2013-04-17 23:03:16 -0400] david415: ;-)
[2013-04-17 23:03:21 -0400] freezey: c0ff33: you on linux i hope?
[2013-04-17 23:03:24 -0400] freezey: what flavor?
[2013-04-17 23:03:25 -0400] c0ff33: ubuntu
[2013-04-17 23:03:31 -0400] freezey: dpkg --list |grep -i chef
[2013-04-17 23:03:32 -0400] c0ff33: w omnibus installed chef
[2013-04-17 23:03:41 -0400] c0ff33: oh thats nice
[2013-04-17 23:03:44 -0400] freezey: yeah
[2013-04-17 23:03:45 -0400] freezey: nifty huh
[2013-04-17 23:03:49 -0400] c0ff33: oh yea
[2013-04-17 23:04:02 -0400] c0ff33: there are so many things that i am probably doing wrong
[2013-04-17 23:04:09 -0400] freezey: lol
[2013-04-17 23:04:11 -0400] freezey: maybe
[2013-04-17 23:04:17 -0400] maek: omnibus is really friendly
[2013-04-17 23:04:19 -0400] freezey: or instead of thinking about it like your doing it wrong
[2013-04-17 23:04:28 -0400] freezey: just think about it like your doing it your own way
[2013-04-17 23:04:29 -0400] freezey: heh
[2013-04-17 23:04:30 -0400] freezey: if it works
[2013-04-17 23:04:32 -0400] freezey: whatever
[2013-04-17 23:04:33 -0400] c0ff33: maek are you being sarcastic? its kinda hard to figure out
[2013-04-17 23:04:38 -0400] maek: no
[2013-04-17 23:04:42 -0400] maek: it is very friendly
[2013-04-17 23:04:42 -0400] c0ff33: if ur used to the other chef
[2013-04-17 23:04:48 -0400] maek: vs old chef-server installs
[2013-04-17 23:04:50 -0400] maek: 1 command
[2013-04-17 23:04:55 -0400] maek: if you have proper dns
[2013-04-17 23:04:55 -0400] c0ff33: lol thats true i guess
[2013-04-17 23:05:10 -0400] c0ff33: i still can't upload cookbooks tho
[2013-04-17 23:05:18 -0400] freezey: cant upload with knife?
[2013-04-17 23:05:20 -0400] c0ff33: im on 11.0.6
[2013-04-17 23:05:20 -0400] maek: did you change the bookshelf vip
[2013-04-17 23:05:21 -0400] c0ff33: yea
[2013-04-17 23:05:24 -0400] c0ff33: yea maek
[2013-04-17 23:05:28 -0400] maek: and chef-server-ctl reconfigure?
[2013-04-17 23:05:32 -0400] c0ff33: yep
[2013-04-17 23:05:38 -0400] maek: do the uploda -l debug
[2013-04-17 23:05:41 -0400] c0ff33: then i checked the chef-server-running.json
[2013-04-17 23:05:41 -0400] maek: and check the logs
[2013-04-17 23:06:03 -0400] c0ff33: unknown option -l
[2013-04-17 23:06:10 -0400] maek: really
[2013-04-17 23:06:15 -0400] maek: -VV
[2013-04-17 23:06:16 -0400] maek: sorry
[2013-04-17 23:06:21 -0400] maek: -l is chef-client
[2013-04-17 23:06:33 -0400] c0ff33: maybe -V
[2013-04-17 23:07:45 -0400] c0ff33: hmm what is this sandbox stuff?
[2013-04-17 23:08:15 -0400] maek: thats where cookbook files upload into
[2013-04-17 23:08:22 -0400] maek: I understand it very basically
[2013-04-17 23:08:28 -0400] maek: are you getting sandbox errors?
[2013-04-17 23:08:37 -0400] c0ff33: looks like I am getting redirected to:
[2013-04-17 23:08:38 -0400] c0ff33: http://com.amazonaws.compute-1.ec2-12-34-56-78:80/sandboxes/000000000000fb09f850c776c03acaf2
[2013-04-17 23:08:56 -0400] maek: is that your chef server?
[2013-04-17 23:09:08 -0400] c0ff33: it does a post:
[2013-04-17 23:09:09 -0400] c0ff33: Sending HTTP Request via POST to ec2-12-34-56-78.compute-1.amazonaws.com:443/sandboxes
[2013-04-17 23:09:20 -0400] c0ff33: that comes back with a 201 and a location:
[2013-04-17 23:09:27 -0400] c0ff33: that is sending it to that other url which does not resolve
[2013-04-17 23:09:30 -0400] c0ff33: obviously
[2013-04-17 23:09:34 -0400] c0ff33: the url is backwards or something?
[2013-04-17 23:09:50 -0400] maek: thats f'ed up
[2013-04-17 23:10:00 -0400] c0ff33: do i need to upgrade chef server from 11.0.6-1.ubuntu.12.04 ?
[2013-04-17 23:13:40 -0400] c0ff33: sorry about these difficult questions... :(
[2013-04-17 23:14:15 -0400] maek: c0ff33: not sure. I havent done it. I would assume if you got it from apt-get its fair to assume  you upgrade it that way
[2013-04-17 23:15:18 -0400] c0ff33: idk i downloaded the .deb package from - http://www.opscode.com/chef/install/
[2013-04-17 23:15:29 -0400] c0ff33: so i really have no idea how it is supposed to be upgraded
[2013-04-17 23:19:49 -0400] c0ff33: ok so i had to specify the whole server name ( ec2-12-34-56-78.compute-1.amazonaws.com ) as server_name in the chef-server.rb above the bookshelf setting. then it worked.
[2013-04-17 23:20:24 -0400] c0ff33: can i include code that executes or something to keep that up to date dynamically if it changes?
[2013-04-17 23:26:11 -0400] maek: c0ff33: assuming that box stays on it should be the same
[2013-04-17 23:26:17 -0400] maek: same with a fixed ip
[2013-04-17 23:26:34 -0400] c0ff33: true
[2013-04-17 23:26:50 -0400] c0ff33: u know just with cloud computing and everything i like stuff to just work automatically and not have to be hard coded
[2013-04-17 23:27:10 -0400] maek: hosted chef ;)
[2013-04-17 23:27:11 -0400] c0ff33: amazon does have the magic url for determining the dns name so why not use it
[2013-04-17 23:27:26 -0400] c0ff33: well i went over 5 nodes and so i can't pay the $125/mo
[2013-04-17 23:27:26 -0400] maek: you could make something that generrates that chef-server.rb on boot
[2013-04-17 23:27:34 -0400] c0ff33: thats true also
[2013-04-17 23:27:37 -0400] c0ff33: i thought about that
[2013-04-17 23:27:39 -0400] maek: and then reconfiugers if it cahnges
[2013-04-17 23:27:43 -0400] c0ff33: right
[2013-04-17 23:27:44 -0400] maek: a chef-solo template or something meta
[2013-04-17 23:27:49 -0400] c0ff33: but it just seems like something chef could do
[2013-04-17 23:28:35 -0400] maek: we have our chef servers checked into a chef server to manage the equivalent of that file for private chef
[2013-04-17 23:28:36 -0400] maek: but
[2013-04-17 23:28:44 -0400] maek: the 'main' chef server is static and doesnt change
[2013-04-17 23:29:02 -0400] c0ff33: hmm
[2013-04-17 23:29:24 -0400] c0ff33: the main chef server always uses chef-server.rb and chef-server-ctl reconfigure?
[2013-04-17 23:37:50 -0400] c0ff33: maek  im out. thanks for the help. thannk u freezey also.
[2013-04-17 23:37:58 -0400] freezey: no problem
[2013-04-17 23:38:18 -0400] meonkeys: anyone have a script that parses chef dependencies (role x uses role y and recipe z) and spits out DOT notation?
[2013-04-17 23:39:42 -0400] miah: meonkeys: https://github.com/miketheman/knife-role-spaghetti
[2013-04-17 23:40:09 -0400] meonkeys: miah: perfect! thank you
[2013-04-17 23:55:39 -0400] meonkeys: miah: do you know if that can run without Chef server?
[2013-04-17 23:56:03 -0400] meonkeys: I just keep getting "FATAL: No roles were found in role_path: /var/chef/roles" "FATAL: Ensure that your knife.rb has the correct path."
[2013-04-17 23:56:17 -0400] meonkeys: I've tried playing with my knife.rb, but it doesn't seem to have any effect.
[2013-04-17 23:57:16 -0400] Guest41866: I am running "chef solo prapare" command FROM an ubuntu 64 box against a Windows 2003 server. Here is my command:  knife solo prepare  Administrator@win2003server  -VV . I am getting the following error
[2013-04-17 23:57:23 -0400] Guest41866: ERROR: KnifeSolo::Bootstraps::OperatingSystemNotImplementedError: CYGWIN_NT-5.2 not implemented.  Feel free to add a bootstrap implementation in KnifeSolo::Bootstraps::CYGWIN_NT-5.2
[2013-04-17 23:57:48 -0400] Guest41866: Does this mean there us no implementation for Windows 2003 server?
[2013-04-17 23:58:45 -0400] Guest41866: The error message points to adding support in KnifeSolo::Bootstraps::CYGWIN_NT-5.2
[2013-04-17 23:59:18 -0400] Guest41866: Has anyone run into this issue ?

[2013-04-25 00:19:38 -0400] kevlar_: yo
[2013-04-25 00:20:18 -0400] kevlar_: having a problem with chef solo running locally, wondering if anyone had ideas
[2013-04-25 00:20:24 -0400] kevlar_: i get this error:
[2013-04-25 00:20:26 -0400] kevlar_: [2013-04-25T02:16:26+02:00] FATAL: SocketError: remote_file[/usr/src/beanstalkd-1.8.tar.gz] (beanstalkd::default line 31) had an error: SocketError: Error connecting to https://github.com/kr/beanstalkd/downloads/beanstalkd-1.8.tar.gz - getaddrinfo: Temporary failure in name resolution
[2013-04-25 00:20:50 -0400] kevlar_: but i can curl that file just fine, so not sure why chef is running into the getaddrinfo failure
[2013-04-25 00:27:22 -0400] monokrome: How do I set the roles path for knife?
[2013-04-25 00:27:49 -0400] monokrome: trying to fix "Error expanding the run_list" when creating a new node
[2013-04-25 03:21:34 -0400] monokrome: Where am I supposed to have the roles/myrole.rb files in my kitchen?
[2013-04-25 03:21:51 -0400] monokrome: I should explain that currently my roles are in /roles/web.rb for instance
[2013-04-25 03:21:55 -0400] monokrome: but not sure where they are supposed to be?
[2013-04-25 03:24:44 -0400] bluekelp: do any resource providers use/expose Chef::Util::FileEdit?
[2013-04-25 03:25:12 -0400] bluekelp: want to do a search/replace on a file that isn't (yet) a Chef template and prefer non bash/execute solutions
[2013-04-25 03:31:09 -0400] monokrome: IE, if I do
[2013-04-25 03:31:14 -0400] monokrome: knife role create web
[2013-04-25 03:31:16 -0400] monokrome: where does it go
[2013-04-25 03:35:59 -0400] bluekelp: monokrome: it lives on the server
[2013-04-25 03:36:40 -0400] bluekelp: i think it's a good practice to have all role and environment/etc definitions in your repo and some sort of script to "force" them to the server so you don't end up with something on the server that does not exist in git/SCM
[2013-04-25 03:37:33 -0400] bflad_: bluekelp: you mean like the line cookbook? http://community.opscode.com/cookbooks/line
[2013-04-25 03:37:43 -0400] bflad_: for your earlier question
[2013-04-25 03:37:59 -0400] bluekelp: bflad_: i'll check line out.  thanks
[2013-04-25 03:39:19 -0400] bluekelp: bflad_: do you know where it lives (source) on github or something?  for non-opscode CBs i prefer not to pull them directly so we can fork if necessary to patch/etc
[2013-04-25 03:40:24 -0400] bflad_: bluekelp: https://github.com/someara/line-cookbook
[2013-04-25 03:43:01 -0400] evxd: as jed_ mentioned earlier, a bunch of the s3 links are 404ing right now. including the download for 11.0.8 @ https://opscode-omnitruck-release.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.8-1.ubuntu.12.04_amd64.deb
[2013-04-25 03:44:01 -0400] evxd: just bumping :)
[2013-04-25 03:51:59 -0400] blueben: I must be crazy. Surely I've done this before.
[2013-04-25 03:52:20 -0400] blueben: I need to extend a cookbook by letting the user provide a template
[2013-04-25 03:52:28 -0400] blueben: but I can't find a single mechanism for doing so
[2013-04-25 03:53:06 -0400] blueben: There's really no template override?
[2013-04-25 03:53:15 -0400] zts: blueben: who is "the user" in this context, relative to you, and the author of the cookbook?
[2013-04-25 03:53:31 -0400] blueben: anyone who is not the author and downloads the cookbook
[2013-04-25 03:55:18 -0400] zts: blueben: one way is for the person consuming the cookbook to write a "wrapper" cookbook that contains their own template, and a recipe that uses chef-rewind (or the manual equivalent) to change the 'cookbook' parameter on the template resource
[2013-04-25 03:56:42 -0400] zts: blueben: or to put that differently, the template resource lets you specify which cookbook the template comes from, and there are ways of modifying a resource that has already been defined by another cookbook
[2013-04-25 03:56:57 -0400] zts: so you'd tend to put those two parts together
[2013-04-25 03:57:01 -0400] blueben: sounds complex and fragile?
[2013-04-25 03:58:16 -0400] zts: I guess.  If you're the author of the cookbook being re-used, you might be more creative with use of definitions and LWRPs to make some planned kinds of extension somewhat simpler
[2013-04-25 03:58:43 -0400] blueben: I was just going to say, I'll probably just write a definition
[2013-04-25 05:40:34 -0400] rava: hey guys, is there anyway to peel apart a converge to tell what's assigning attributes to a node?
[2013-04-25 05:40:49 -0400] rava: i've a role assigned to a node, but it's override attributes aren't being applied to the node
[2013-04-25 05:49:01 -0400] blueben: is it possible to modify an attribute from within a definition?
[2013-04-25 05:49:13 -0400] rava: ?
[2013-04-25 05:49:22 -0400] rava: you can modify attributes all over the place in chef
[2013-04-25 05:50:20 -0400] rava: this is so werid
[2013-04-25 05:50:23 -0400] rava: ~weird
[2013-04-25 05:50:46 -0400] rava: the node is getting most of the attributes defined in the role, except for 2 or 3
[2013-04-25 05:52:25 -0400] rava: attributes get reset at the very beginning of a chef-client run right?
[2013-04-25 05:52:40 -0400] rava: so even if a run puked, and left around some attributes, they'd be reset on the next run attempt?
[2013-04-25 06:16:40 -0400] rava: anyone alive? :)
[2013-04-25 06:23:34 -0400] rava: anyone know why a the web ui doesn't show a node's attributes that i can see from doing node.attribute in shef on the node?
[2013-04-25 06:25:22 -0400] Mithrandir: automatic vs set attributes, perhaps?
[2013-04-25 06:26:13 -0400] rava: but they'd still show up no?
[2013-04-25 06:26:25 -0400] rava: i mean ohai attributes show up, and they are all automatically populated
[2013-04-25 06:43:57 -0400] rava: what could possibly keep a node from having override attributes of a role aplied?
[2013-04-25 06:44:25 -0400] rava: it has the role, no doubt. it tries to run the recipe assigned ot the role, but it's puking because it's not pulling in all the attributes from the role
[2013-04-25 06:45:08 -0400] rava: this also makes no sense, since the role is in the run list for the node
[2013-04-25 06:45:16 -0400] rava: but the Roles attribute only shows one of them
[2013-04-25 07:11:21 -0400] rava: can anyone see why this role is failing?
[2013-04-25 07:11:23 -0400] rava: https://gist.github.com/anonymous/61d55e7147d0bd1542ab
[2013-04-25 07:12:07 -0400] rava: he attributes in this role aren't being applied to a node, nor are the env run list items showing up
[2013-04-25 07:30:30 -0400] NicolasG: hi everyone
[2013-04-25 07:31:18 -0400] rava: heya
[2013-04-25 07:31:24 -0400] rava: anyone around that uses the nagios cookbook?
[2013-04-25 07:31:48 -0400] NicolasG: quick question: I have completed the tutorial about getting started with chef, created an account and be able to bootstrap a instance with knife from my workstation
[2013-04-25 07:33:07 -0400] NicolasG: is there any limit about the numbers of servers I can manage with knife ? are there any alternatives to setup a chef server without paying any cost ?
[2013-04-25 07:34:07 -0400] rava: open source chef
[2013-04-25 07:34:21 -0400] rava: you can host your own chef server
[2013-04-25 07:34:26 -0400] rava: and then run as many nodes as you want
[2013-04-25 07:34:42 -0400] NicolasG: open source chef is not private chef ?
[2013-04-25 07:35:00 -0400] rava: right
[2013-04-25 07:35:26 -0400] rava: private chef is the supported, commercial version of chef-server
[2013-04-25 07:36:23 -0400] NicolasG: do you have any experience with Amazon OPSWorks ? does it have the same potentials with hosted chef or opensource chef ?
[2013-04-25 07:37:31 -0400] rava: pretty much
[2013-04-25 07:37:49 -0400] rava: i have yet to run into a recipe that doesn't work in both opsworks and oss chef
[2013-04-25 07:38:50 -0400] NicolasG: thanks rava, we are currently using RightScale to manage our servers and are in the process to migrate off RightScale using opsworks or oss chef
[2013-04-25 07:39:09 -0400] NicolasG: we did a big mistake by having all of our infrastructure code in bash scripts
[2013-04-25 07:39:21 -0400] rava: NicolasG: yes... i know your pain
[2013-04-25 07:39:41 -0400] NicolasG: and I'm currently looking on the best way to port everything to chef recipes
[2013-04-25 07:39:51 -0400] NicolasG: rava: ex-rightscale user ? :)
[2013-04-25 07:40:24 -0400] rava: NicolasG: nay, worse. we had our entire instance provisioning and management in shell script wrappers around the aws java cli tools
[2013-04-25 07:44:28 -0400] NicolasG: did you first learned Ruby to start writing recipes or you could start writing recipes without ruby ?
[2013-04-25 07:45:35 -0400] rava: you can, there's a chapter in the docs called "just enough ruby for chef"
[2013-04-25 07:46:15 -0400] rava: but you'll spend more time bashing your head against the wall without a decent understanding of iteration and messing around with strings in ruby
[2013-04-25 07:47:15 -0400] NicolasG: if you use opsworks you can't use knife can you ?
[2013-04-25 08:03:13 -0400] VadimT: Hello Guys!
[2013-04-25 08:03:32 -0400] VadimT: i am trying to send api request via knife
[2013-04-25 08:03:46 -0400] VadimT: knife exec -E 'puts api.get("/cookbooks/apache2/1.6.1")'
[2013-04-25 08:04:27 -0400] VadimT: and have answer
[2013-04-25 08:04:30 -0400] VadimT: #<Chef::CookbookVersion:0x000000013e7e10>
[2013-04-25 08:04:37 -0400] VadimT: somebody know what this?
[2013-04-25 08:11:51 -0400] VadimT: when i send request like knife exec -E 'puts api.get("/cookbooks")'
[2013-04-25 08:12:21 -0400] VadimT: it is working fine... when trying to do more specific i recieve strange answer
[2013-04-25 08:17:25 -0400] rava: VadimT: check the server logs
[2013-04-25 08:17:41 -0400] rava: what happens when you leave the version number off the url?
[2013-04-25 08:23:20 -0400] VadimT: knife exec -E 'puts api.get("/cookbooks/apache2")' - i have normal answer
[2013-04-25 08:28:36 -0400] pellis: hello
[2013-04-25 08:28:41 -0400] pellis: anyone know what the hell is metachef?
[2013-04-25 08:30:53 -0400] VadimT: 2rava at logs i see this 2013-04-25T08:28:53Z erchef@127.0.0.1 INFO req_id=fEp1moBO+s8JkMKMHlTCng==; status=200; method=GET; path=//cookbooks/apache2/1.6.1; user=vadim; msg=[]; req_time=19; rdbms_time=2; rdbms_count=3
[2013-04-25 08:31:01 -0400] VadimT: 2rava but this looks normal
[2013-04-25 08:50:37 -0400] adam_: how can I use the "template" resource to edit an existing template (on a second chef-client run, for example). It seems that the "template" resource has a "create_if_not_exists" default action to it - is that correct?
[2013-04-25 09:30:24 -0400] maxmanders: Hoping someone can help with some odd behaviour I've only recently started seeing when bootstrapping Windows 2008R2 instances in AWS with Chef...
[2013-04-25 09:30:29 -0400] maxmanders:          if node['platform'] == "windows"
[2013-04-25 09:30:31 -0400] maxmanders:            inherits true
[2013-04-25 09:30:33 -0400] maxmanders: -          owner 'BUILTIN\Administrators'
[2013-04-25 09:30:35 -0400] maxmanders: -          group 'BUILTIN\Administrators'
[2013-04-25 09:30:37 -0400] maxmanders: +          #owner 'BUILTIN\Administrators'
[2013-04-25 09:30:39 -0400] maxmanders: +          #group 'BUILTIN\Administrators'
[2013-04-25 09:31:22 -0400] maxmanders: That diff fixes an issue where a bootstrap bombs out with 'Win32:Error completed successfully' which is akin to a fatal error dialog box with no  message in it :-)  Any reason you can think of why setting ownership with this fully qualified user would just stop working>
[2013-04-25 09:32:34 -0400] jpluscplusm: IME the FOO\user refers to a machine called FOO; are you /sure/ "BUILTIN" means what you think it does?
[2013-04-25 09:33:01 -0400] jpluscplusm: could your new instances have changed the name they think they are, hence resolution of BUILTIN\anyone stops working?
[2013-04-25 09:34:04 -0400] maxmanders: from what I read here http://support.microsoft.com/kb/243330 BUILTIN resolves to the local machine name just want to use an administrator user/group that will be present whether the machine is connected to a domain or not.
[2013-04-25 09:35:00 -0400] maxmanders: I could be being mislead though ;-) I'll see if I can find an alternative user to put in place of BUILTIN\Administrators
[2013-04-25 09:35:27 -0400] jpluscplusm: that page does /not/ reference "BUILTIN\Administrators" however it does mention lots of other groups under builtin
[2013-04-25 09:36:23 -0400] maxmanders: I see what you mean, I think I've managed to do 2 + 2 = 5 by incorrectly inferring one thing from another when reading that!
[2013-04-25 09:36:44 -0400] jpluscplusm: it is referenced elsewhere online, however I'd take that page to be pretty canonical
[2013-04-25 09:37:43 -0400] maxmanders: Seeing plenty of references to that group searching Google, but oddly enough nothing that specifically defines it ;-) Indeed, I'll trust the MS KB rather than random forum posts ;-)
[2013-04-25 09:41:12 -0400] superbaloo: hi there
[2013-04-25 09:42:42 -0400] superbaloo: i'm unable to find the documentation for lwrp resources attributes in the docs.opscode.com
[2013-04-25 09:42:59 -0400] superbaloo: do someone have a pointer ?
[2013-04-25 09:43:21 -0400] superbaloo: (the :callbacks and :regexp attribute of resources/attribute)
[2013-04-25 09:45:24 -0400] superbaloo: ok found
[2013-04-25 09:54:13 -0400] skroon: hi all
[2013-04-25 10:15:19 -0400] VadimT: knife exec -E 'puts api.get("/cookbooks/ntp/1.3.2")' #<Chef::CookbookVersion:0x00000003569b88>
[2013-04-25 10:15:26 -0400] VadimT: anybody know what this?
[2013-04-25 10:16:19 -0400] superbaloo: this ?
[2013-04-25 10:16:53 -0400] superbaloo: you basically ask your knife to do a rest call (GET /cookbooks/ntp/1.3.2) onto your chef-server
[2013-04-25 10:17:05 -0400] VadimT: yeap
[2013-04-25 10:17:07 -0400] VadimT: but answer?
[2013-04-25 10:17:08 -0400] superbaloo: and knife parses the results and present you a nice ruby object
[2013-04-25 10:17:09 -0400] VadimT: #<Chef::CookbookVersion:0x00000003569b88>
[2013-04-25 10:17:20 -0400] VadimT: but i want json =)
[2013-04-25 10:17:33 -0400] VadimT: if i request just /cookbooks/ntp
[2013-04-25 10:17:36 -0400] VadimT: it works fine
[2013-04-25 10:17:52 -0400] VadimT: when trying to request more specific request it return me object
[2013-04-25 10:18:02 -0400] superbaloo: then .to_json on it
[2013-04-25 10:18:18 -0400] superbaloo: like  knife exec -E 'puts api.get("/cookbooks/ntp/1.3.2").to_json'
[2013-04-25 10:18:23 -0400] Beginner: Helloo..
[2013-04-25 10:18:39 -0400] Beginner: I am beginner
[2013-04-25 10:18:50 -0400] Beginner: I am looking to automate instance creation in AWS.
[2013-04-25 10:18:56 -0400] Beginner: Is it possible with chef
[2013-04-25 10:19:18 -0400] VadimT: <superbaloo> thank you!! it work now ))
[2013-04-25 10:19:29 -0400] VadimT: <superbaloo> but why documentation dont say about this nothing?
[2013-04-25 10:20:25 -0400] superbaloo: VadimT: no idea
[2013-04-25 10:20:45 -0400] superbaloo: but i'm sure you can document it and do a pull request :)
[2013-04-25 10:20:56 -0400] Beginner: Help!!!
[2013-04-25 10:21:10 -0400] VadimT: <superbaloo> anyway thx again.
[2013-04-25 10:29:04 -0400] NicolasG: Beginner: yes it is
[2013-04-25 10:29:06 -0400] kesor: I want to use cookbook_file with a "dynamic" name, something like File.join(Dir.home(node['rails']['owner']), '.gemrc'). But the user does not exist, and Dir.home() is throwing an ArgumentError. can I use a proc/lambda/whatever so that the code gets evaluated during the converge and not before?
[2013-04-25 10:29:32 -0400] NicolasG: Beginner: http://wiki.opscode.com/display/chef/EC2+Bootstrap+Fast+Start+Guide
[2013-04-25 10:59:00 -0400] Sachin__: Hi All
[2013-04-25 10:59:01 -0400] Sachin__: In a chef recipe if you deploy a git revision, how can I retrieve deployed sha1 so that it can be used for post deploy activity e.g. generate asset revision?
[2013-04-25 11:06:56 -0400] mattt: kesor: figure it out?
[2013-04-25 11:07:06 -0400] kesor: no, not really.
[2013-04-25 11:07:32 -0400] mattt: kesor: i had something similar, wanted to populate node attribute at run time not compile time
[2013-04-25 11:07:46 -0400] mattt: i wrapped what i was doing in a ruby block (executed at run time) and that seemed to work
[2013-04-25 11:08:46 -0400] kesor: mmm ok, thanks :)
[2013-04-25 11:12:49 -0400] skroon: is it easy to migrate from hosted chef server, to your own local chef-server ?
[2013-04-25 11:14:27 -0400] mattt: kesor: feels hackish, so let me know if you find another solution :)
[2013-04-25 11:14:55 -0400] kesor: I guess I could execute the user creation immediately, before waiting for conversion.
[2013-04-25 11:15:05 -0400] kesor: its a bit better, but also hackish :/
[2013-04-25 11:46:55 -0400] usecide: Hi, I'm looking for a bit of advice, what I want to accomplish is: list = process_list ,where process_list is either definition / lib. function etc which will process data_bag inside and return string with content based on data_bag; it will be used in a few places in different cookbooks (both recipies and templates). I've tried to use definition but it looks like I cannot access data_bag in definition also can definition return something? any sugesstions wh
[2013-04-25 11:46:55 -0400] usecide: ich component use to implement this?
[2013-04-25 11:47:01 -0400] nebrera: helllo
[2013-04-25 11:47:17 -0400] nebrera: where can I find the chef-server source code ?
[2013-04-25 11:58:21 -0400] adam_: nebrera: chef-server is made up of quite a few different components - you could start at the opscode repository on github https://github.com/opscode
[2013-04-25 12:13:40 -0400] alex_: can anybody explain why my block is executed while this statement has a return code of 0
[2013-04-25 12:13:53 -0400] nebrera: adam_, I am going to use chef-server on redhat
[2013-04-25 12:14:04 -0400] nebrera: the problem is the rpm includes erland postgres ....
[2013-04-25 12:14:05 -0400] alex_: not_if "(x=$(/usr/bin/grep \"nexus-oss.version\" /var/tmp/latestNexus | /usr/bin/cut -d\"=\" -f2); [ $x == \"#{node['nexus']['version']}\" ])"
[2013-04-25 12:14:14 -0400] nebrera: I want to use my own postgres and my own erlan
[2013-04-25 12:14:24 -0400] nebrera: what do you recommend me to start with ?
[2013-04-25 12:18:02 -0400] nebrera: probably Erchef ?
[2013-04-25 12:19:55 -0400] mswart: get anyone else invalid urls from http://www.opscode.com/chef/install/ for deb packages (404 not found)?
[2013-04-25 12:20:10 -0400] remil: alex_: not_if "egrep -q '^nexus-oss\.version[[:blank:]]*=[[:blank:]]*#{ruby_code}'"
[2013-04-25 12:20:18 -0400] remil: is this working ?
[2013-04-25 12:26:47 -0400] adam_: nebrera: when you install chef-server (through omnibus) there will be a config file "chef-server-running.json" where you can define which postgres settings you want. I don't have experience with installing chef-server on a server with an already existing postgres instance, but it seems like it should be possible with this config file
[2013-04-25 12:28:36 -0400] adam_: also, if you check http://docs.opscode.com/server_components.html you will see the components of a chef server
[2013-04-25 12:35:09 -0400] nebrera: ok thanks
[2013-04-25 12:37:03 -0400] nebrera: with new erchef don't we need chef-solr ?
[2013-04-25 12:37:17 -0400] nebrera: or chef-expander ?
[2013-04-25 12:51:00 -0400] pithagorians: hi all. does chef have same inventory functionality as puppet has?
[2013-04-25 12:51:43 -0400] pithagorians: i want to chose some cm, and comparing between puppet and chef
[2013-04-25 12:51:47 -0400] pithagorians: i like more chef
[2013-04-25 12:52:06 -0400] pithagorians: but not sure about some of it's possibilities
[2013-04-25 12:54:25 -0400] laurent\: pithagorians: yep it's done by a component called ohai http://docs.opscode.com/ohai.html
[2013-04-25 12:55:42 -0400] pithagorians: <laurent\> can i somehow store those properties?
[2013-04-25 12:56:32 -0400] laurent\: by default they are saved and indexed on the chef server
[2013-04-25 12:57:02 -0400] pithagorians: also, can i define some custom attributes?
[2013-04-25 12:57:19 -0400] laurent\: sure you can
[2013-04-25 12:57:30 -0400] laurent\: you can also have custom ohai plugins
[2013-04-25 12:57:53 -0400] pithagorians: <laurent\> would you please tell me how can i define them?
[2013-04-25 13:03:37 -0400] gnoll110: .r
[2013-04-25 13:04:18 -0400] laurent\: pithagorians: depends on what you want to achieve. they could be automatic attributes provided by ohai or attributes that you define in environment, roles or directly on the node. attributes can also be set in cookbooks. have you already had a look at docs.opscode.com ?
[2013-04-25 13:04:54 -0400] gnoll110: .r
[2013-04-25 13:06:37 -0400] laurent\: pretty sure opscode is looking forward to read comments on the documentation. especially from newcomers, so don't hesitate to do so ! :)
[2013-04-25 13:06:55 -0400] pithagorians: lets say i would like to be able to add an attribute called "customer" for all the servers will be managed with chef, and to be able to modify it accordingly
[2013-04-25 13:13:23 -0400] Azrael: if i rename a node, must i also generate a new chef keypair?
[2013-04-25 13:16:57 -0400] Glace: Hi, any chance that this JIRA can make it to 11.4.2? this seems to be affecting a lot of users: http://tickets.opscode.com/browse/CHEF-3045?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=34655#comment-34655
[2013-04-25 13:26:10 -0400] otravez: Hi - I am trying to do a "knife cookbook upload mycookbook" and I am getting errors: http://pastie.org/7717093
[2013-04-25 13:35:59 -0400] Sgoettschkes: quick question: Vagrant+chef solo worked well, now I updated chef to 11.4.4 and I'm getting "wrong number of arguments (2 for 1)" for my lwrp. Any idea on this?
[2013-04-25 13:38:59 -0400] adnichols: Sgoettschkes I'd need more context but maybe some attribute that used to have a value is now nil? The error should give you some sense of where there's a missing value
[2013-04-25 13:39:32 -0400] adam_: Sgoettschkes: have you referenced http://docs.opscode.com/breaking_changes_chef_11.html to see if they cover your problem?
[2013-04-25 13:40:10 -0400] Sgoettschkes: adnichols: http://pastebin.com/VTfJm4cG
[2013-04-25 13:40:43 -0400] Sgoettschkes: adam_: I had chef 11 running before, I guess the update was just to the next minor version
[2013-04-25 13:41:00 -0400] adam_: ah ha, then that page is irrelevant
[2013-04-25 13:42:07 -0400] adnichols: Sgoettschkes nothing pops out at me - I see where the error is but not sure why that behavior would have chnaged
[2013-04-25 13:42:42 -0400] Sgoettschkes: adnichols: I am also confused
[2013-04-25 13:43:52 -0400] adnichols: Sgoettschkes Is this you? http://tickets.opscode.com/browse/CHEF-4123
[2013-04-25 13:44:12 -0400] adnichols: looks very similar
[2013-04-25 13:45:01 -0400] adnichols: note the chef 11 related commit at the bottom
[2013-04-25 13:45:03 -0400] Sgoettschkes: no, I didn't open a ticket yet
[2013-04-25 13:45:22 -0400] adam_: the fixing commit was also just 20 hours ago
[2013-04-25 13:45:26 -0400] adnichols: right
[2013-04-25 13:45:49 -0400] willejs: hi, I'm having an issue with the redis cookbook by benjamin black, the runit_service refers to the run_state method which does not exist
[2013-04-25 13:46:15 -0400] nebrera: helllo again
[2013-04-25 13:46:17 -0400] nlloyds: willejs: I think that method may have been deprecated with Chef 11.
[2013-04-25 13:46:25 -0400] nebrera: why chef needs: s3_access_key_id ??
[2013-04-25 13:46:35 -0400] willejs: run_state     node[:redis][:server][:run_state] < the method is not in the runit cookbook library, and the attribute is not in the cookbook...
[2013-04-25 13:46:42 -0400] willejs: I'm running chef 10.16.2
[2013-04-25 13:47:35 -0400] nlloyds: willejs: oh, nm
[2013-04-25 13:48:24 -0400] willejs: can't understand what the runit run_state would be?
[2013-04-25 13:48:51 -0400] nlloyds: willejs: I think it's depending on an older version of the runit cookbook. So if we can find which version that is, you can use it.
[2013-04-25 13:48:55 -0400] Sgoettschkes: adnichols, adam_: I'm trying to run chef 11.4.0 to see if it works there
[2013-04-25 13:49:27 -0400] willejs: nlloyds: I've looked at the older versions of the runit cookbooks with no luck :(
[2013-04-25 13:49:41 -0400] willejs: I'm pretty sure your right though, i had one installed before and it worked...
[2013-04-25 13:50:01 -0400] willejs: but my server shows an older cookbook but its not correct
[2013-04-25 13:50:29 -0400] Sgoettschkes: adnichols: Ok, 11.4.0 works, 11.4.4 is broken for some reason. Is there any way I can install the current master or a more up-to-date version "easy" to see if the bugfix also fixed my bug or if I need to report it
[2013-04-25 13:50:44 -0400] nlloyds: willejs: I don't know if it's the right one, but this cookbook has a run_state: https://github.com/infochimps-labs/ironfan-pantry/tree/master/cookbooks/runit
[2013-04-25 13:50:48 -0400] adnichols: Sgoettschkes I'm sure there's a way - I'm not sure how
[2013-04-25 13:51:00 -0400] willejs: cheers nlloyds
[2013-04-25 13:55:14 -0400] willejs: nlloyds: your completely right. I for that cookbook and couldn't find it
[2013-04-25 13:55:23 -0400] willejs: depends should sort it out
[2013-04-25 13:56:07 -0400] masterkorp: I am thinking, how to add a role to the run_list only if platform is X ?
[2013-04-25 13:56:58 -0400] willejs: i think i should start using the redisio cookbook instead of the standard redis cookbook.
[2013-04-25 13:58:19 -0400] UForgotten: so no live streaming from chefconf eh?
[2013-04-25 13:58:37 -0400] adam_: Sgoettschkes: You would have to research into how chef server is built/installed, and then follow the same process with a new source (the latest branch with the fixing commit for your issue). If it's not an absolute must for you, I'd suggest waiting until a newer, stable version comes out and continuing with 11.4.0
[2013-04-25 13:58:47 -0400] UForgotten: willejs: we did our own redis cookbook, because the config is so simple you basically just have to template the redis.conf
[2013-04-25 13:59:11 -0400] nlloyds: UForgotten: There's a link but it doesn't look like anything's on there yet: http://new.livestream.com/accounts/271823/events/2039867
[2013-04-25 13:59:40 -0400] UForgotten: nlloyds: right, I've been watching that and no joy
[2013-04-25 13:59:50 -0400] Sgoettschkes: adam_: Ok, I thought maybe there was an easy way to install an up-to-date ruby gem.
[2013-04-25 14:00:03 -0400] nlloyds: UForgotten: The start time according to that would be 6:30AM Pacific, and I have my doubts about the accuracy of that :)
[2013-04-25 14:00:37 -0400] UForgotten: right, it should be starting when the west coast wakes up :)
[2013-04-25 14:01:38 -0400] nlloyds: UForgotten: I personally wouldn't want to watch a stream of hung over engineers getting out of bed and showering. ;)
[2013-04-25 14:04:02 -0400] zts: the welcome session doesn't start for another 90 minutes, so I wouldn't expect anything at all before that :)
[2013-04-25 14:04:13 -0400] masterkorp: any ideas
[2013-04-25 14:06:10 -0400] zts: masterkorp: yeah, that's not possible.  One option is to have a recipe which then does include_recipe if the platform is X
[2013-04-25 14:07:08 -0400] jwilf: what's the easiest way to update chef server 11.0.4 to 10.0.8?
[2013-04-25 14:08:54 -0400] masterkorp: zts: yeah, that would be the only option
[2013-04-25 14:09:17 -0400] nlloyds: jwilf: If you're running the omnibus install: back up, download the new deb/rpm/etc, install it, sudo chef-server-ctl reconfigure
[2013-04-25 14:09:40 -0400] jwilf: nlloyds: ok, thanks
[2013-04-25 14:09:45 -0400] zts: masterkorp: I can think of more ridiculous options :)  eg, chef environment == platform, and use environment run lists
[2013-04-25 14:09:47 -0400] jwilf: it would be good if opscode had a yum repo
[2013-04-25 14:10:05 -0400] nlloyds: jwilf: Assuming you mean 11.0.4 to 11.0.8
[2013-04-25 14:10:30 -0400] jwilf: nlloyds: yeah, actually i'm on 11.0.6
[2013-04-25 14:12:13 -0400] masterkorp: zts: maybe, or I will just run a knife regulary
[2013-04-25 14:13:59 -0400] willejs: argh redis cookbooks are a nightmare. are most people using the redisio cookbook?
[2013-04-25 14:14:00 -0400] zts: masterkorp: another option could be to have a recipe which adds the right role to the node's run list - I think that would only be picked up the following time chef-client runs, but maybe that's useful
[2013-04-25 14:15:53 -0400] nlloyds: willejs: I was using a fork of https://github.com/ctrabold/chef-redis about a year ago and it was OK. Not sure about 2.6 support.
[2013-04-25 14:16:42 -0400] nlloyds: willejs: You're right. Redis cookbooks are a good example of a problem with the cookbook ecosystem.
[2013-04-25 14:17:07 -0400] willejs: nlloyds: that one looks a little better than the community one
[2013-04-25 14:17:52 -0400] willejs: i will end up using the redisio one because i will soon need many installs of redis on many boxes...
[2013-04-25 14:19:08 -0400] willejs: I'm not the biggest fan of runit, and I was updating the graphite cookbook which required runit ~>1.0 and the redis cookbook uses a random ironfan cookbook
[2013-04-25 14:19:51 -0400] willejs: for runit. which caused a headache.
[2013-04-25 14:20:13 -0400] gchristensen: is there a way with testkitchen or the depends syntax to define it should be this rbenv: https://github.com/fnichol/chef-rbenv/ instead of the one on community?
[2013-04-25 14:20:40 -0400] nlloyds: willejs: jtimberman makes a good argument in favor of runit on this blog post: http://jtimberman.housepub.org/blog/2012/12/29/process-supervision-solved-problem/
[2013-04-25 14:22:09 -0400] richleland: best-practices question - does everyone generally use the chef-client and chef-server cookbooks?
[2013-04-25 14:26:59 -0400] nebrera: why chef needs: s3_access_key_id ??
[2013-04-25 14:27:30 -0400] nebrera: We do use S3 for other reasons and I don't know for what is using S3 chef ....
[2013-04-25 14:28:46 -0400] masterkorp: richleland: i do use
[2013-04-25 14:29:12 -0400] masterkorp: richleland: chef-client is speacilly handy for consistency
[2013-04-25 14:29:25 -0400] masterkorp: and stuff like removing the validator
[2013-04-25 14:29:56 -0400] richleland: masterkorp yeah - and recently I upgraded the chef server, would be real easy to re-point URL
[2013-04-25 14:30:01 -0400] richleland: for all the client
[2013-04-25 14:30:02 -0400] richleland: s
[2013-04-25 14:31:36 -0400] nlloyds: nebrera: Chef itself doesn't require any S3 info. It could be a cookbook or knife plugin or something like that. Where are you seeing this message?
[2013-04-25 14:33:16 -0400] masterkorp: richleland: even to keep chef version consistent
[2013-04-25 14:33:22 -0400] masterkorp: *chef-client
[2013-04-25 14:33:49 -0400] masterkorp: i had some trouble with some recipes failing on certain machines just because the chef-client was outdated
[2013-04-25 14:33:58 -0400] masterkorp: and it took me all to long to realize that
[2013-04-25 14:34:51 -0400] wmz: Hi, is it possible to tell a node or bunch nodes to run a specified cookbook version?
[2013-04-25 14:35:22 -0400] adnichols: wmz you can put them in an environment & then tell that environment to use a specific version
[2013-04-25 14:35:24 -0400] masterkorp: i wold prefer to keep that coode on the cookbook
[2013-04-25 14:35:36 -0400] wmz: thanks adnichols
[2013-04-25 14:35:38 -0400] masterkorp: just because you will probably forget that
[2013-04-25 14:35:39 -0400] masterkorp: i did
[2013-04-25 14:46:14 -0400] anentropic: omnibus installer doesn't work
[2013-04-25 14:46:21 -0400] anentropic: .......
[2013-04-25 14:46:21 -0400] anentropic: Thank you for installing Chef!
[2013-04-25 14:46:30 -0400] anentropic: $ chef-client -v
[2013-04-25 14:46:31 -0400] masterkorp: anentropic: nope
[2013-04-25 14:46:46 -0400] masterkorp: we thank you too :p
[2013-04-25 14:46:54 -0400] anentropic: $ chef-client -v
[2013-04-25 14:47:11 -0400] anentropic: hmm, don't know how to paste that
[2013-04-25 14:47:21 -0400] anentropic: Could not find chef (>= 0) amongst [activemodel-3.2.13, ac...
[2013-04-25 14:47:59 -0400] anentropic: "Thank you for installing Chef!" is what it says after installing, but doesn't seem to have worked
[2013-04-25 14:48:17 -0400] adnichols: anentropic did you have chef installed previous as a gem?
[2013-04-25 14:48:29 -0400] anentropic: probably
[2013-04-25 14:49:10 -0400] adnichols: you may have a 'binary' around looking for the gem in your gemset
[2013-04-25 14:50:57 -0400] anentropic: how do I start clean?
[2013-04-25 14:52:16 -0400] KarlHungus: anentropic: just remove whatever is in your path that should be
[2013-04-25 14:52:23 -0400] KarlHungus: shouldn't*
[2013-04-25 14:52:47 -0400] adnichols: anentropic start with 'which chef-client' and work from there
[2013-04-25 14:53:01 -0400] null_route: Hi Guys - We're having issues getting the http_request resource to work. Is tehre an issue with the documentation at http://docs.opscode.com/resource_http_request.html
[2013-04-25 14:53:09 -0400] null_route: for Send a POST request
[2013-04-25 14:53:10 -0400] null_route: ?
[2013-04-25 14:53:30 -0400] adnichols: anentropic ideally your chef-client should actually be a shell script that starts with : #!/opt/chef/embedded/bin/ruby
[2013-04-25 14:53:55 -0400] adnichols: in my case that's in /usr/bin/chef-client
[2013-04-25 14:53:59 -0400] null_route: I'm I really supposed to put the JSON message body _OUTSIDE_ of the block?
[2013-04-25 14:54:06 -0400] anentropic: I have a /usr/bin/chef-client
[2013-04-25 14:54:15 -0400] zachallett: can i use node['environment'] and any node['<attribute>'] inside a role?
[2013-04-25 14:54:28 -0400] adnichols: anentropic and if you head that file does the top look like what I put above?
[2013-04-25 14:54:48 -0400] adnichols: anentropic and if you which chef-client - is that the one that is being used?
[2013-04-25 14:54:59 -0400] anentropic: yes
[2013-04-25 14:55:18 -0400] anentropic: # The application 'chef' is installed as part of a gem, and
[2013-04-25 14:55:19 -0400] anentropic: # this file is here to facilitate running it.
[2013-04-25 14:56:50 -0400] juliancdunn: null_route: looks like a bug
[2013-04-25 14:57:26 -0400] adnichols: anentropic then I'm not sure - it sounds like it installed & assuming the shebang points to the right ruby it should work
[2013-04-25 14:57:31 -0400] null_route: OK - so I simply need to point "message" to JSON data
[2013-04-25 14:57:37 -0400] null_route: right?
[2013-04-25 14:57:44 -0400] juliancdunn: null_route: file a bug against opscode/chef-docs if you get a chance
[2013-04-25 14:57:50 -0400] juliancdunn: null_route: right, you just need to fill in that hash
[2013-04-25 14:57:55 -0400] anentropic: adnichols: maybe its wrong ruby
[2013-04-25 14:58:01 -0400] anentropic: I installed rvm at some point
[2013-04-25 14:58:06 -0400] adnichols: anentropic does that file start with #!/opt/chef/embedded/bin/ruby ?
[2013-04-25 14:58:11 -0400] anentropic: yes
[2013-04-25 14:58:13 -0400] gchristensen: is there an existing cookbook with a simple set of cucumber tests? I've followed the README.md on test-kitchen, but it isn't running my tests, I'd love a simple example to look at. thus far the ones I've found are fairly involved
[2013-04-25 14:58:20 -0400] adnichols: rvm shouldn't have an impact then
[2013-04-25 14:58:56 -0400] anentropic: hmm
[2013-04-25 14:59:20 -0400] anentropic: I'm on OSX
[2013-04-25 14:59:20 -0400] adnichols: anentropic if you think rvm is still around you could rvm implode to be sure
[2013-04-25 14:59:37 -0400] mattupstate: anyone have any tips on the nginx::passenger recipe? Its not clear to me how to use it
[2013-04-25 14:59:48 -0400] yfeldblum: gchristensen, why cucumber
[2013-04-25 14:59:49 -0400] adnichols: or if you are setting up a workstation - you could just abandon the omnibus installer and gem install instead
[2013-04-25 15:00:00 -0400] anentropic: adnichols: that sounds better
[2013-04-25 15:00:04 -0400] adnichols: anentropic on my osx systems I typically just gem install
[2013-04-25 15:00:29 -0400] gchristensen: yfeldblum: it is what I'm familiar with. I don't suppose I have strong feelings either way. I do everything TDD *except* chef, so I'm hoping to change that today :)
[2013-04-25 15:02:02 -0400] yfeldblum: gchristensen, it's just that cucumber is explicitly not a tdd tool; it works well for some types of tests, but not most
[2013-04-25 15:03:03 -0400] gchristensen: okay, I'm fine with using something else
[2013-04-25 15:04:00 -0400] anentropic: adnichols: gem install chef  worked a treat, thanks
[2013-04-25 15:04:32 -0400] gchristensen: yfeldblum: I'll give minitest a shot
[2013-04-25 15:07:30 -0400] yfeldblum: gchristensen, https://github.com/opscode-cookbooks/apache2/tree/master/test/features
[2013-04-25 15:07:51 -0400] gchristensen: yfeldblum: these are cucumber, though.
[2013-04-25 15:08:33 -0400] yfeldblum: gchristensen, it's an example of a suite of cookbook tests using test-kitchen
[2013-04-25 15:09:15 -0400] yfeldblum: gchristensen, no idea why they did it in gherkin; which CEO exactly is going to be reading the line "Then the expected environment variables will be present" and thinking to himself "yeah, that's the particular requirement i had in mind"
[2013-04-25 15:09:42 -0400] gchristensen: :)
[2013-04-25 15:10:20 -0400] yfeldblum: gchristensen, (i have nothing against either gherkin the language or cucumber the tool; i just find it strange that people misuse the tools and pat themselves on the back)
[2013-04-25 15:10:43 -0400] yfeldblum: gchristensen, like there's a checkbox on the spec sheet for "cucumber unit tests" or something
[2013-04-25 15:12:02 -0400] yfeldblum: gchristensen, but i assume it's simple enough to write cookbook tests in your favorite test framework, whether that's minitest, rspec, etc; add it to the Gemfile, add a spec_helper.rb, etc
[2013-04-25 15:12:25 -0400] gchristensen: got it
[2013-04-25 15:12:40 -0400] gchristensen: I'm not sure what the final straw was, but I managed to get a basic minitest test to run.
[2013-04-25 15:13:00 -0400] yfeldblum: gchristensen, awesome
[2013-04-25 15:13:30 -0400] gchristensen: are there any CI services I can use which will let me run vagrant inside their machine?
[2013-04-25 15:13:37 -0400] gchristensen: ie: to run these on
[2013-04-25 15:14:36 -0400] jfeldstein: Can somebody explain to me what KDURA (the morse code on the chefconf T-Shirt) means?
[2013-04-25 15:15:13 -0400] anentropic: trying to get knife search working
[2013-04-25 15:15:24 -0400] anentropic: `knife node list` returns all my nodes
[2013-04-25 15:15:38 -0400] anentropic: `knife search node name:*` returns 0
[2013-04-25 15:15:54 -0400] anentropic: knife index rebuild -y
[2013-04-25 15:15:54 -0400] anentropic: WARNING: 'knife index rebuild' has been removed for Chef 11+ servers.  It will continue to work for prior versions, however.
[2013-04-25 15:16:07 -0400] anentropic: ...but it did appear to rebuild the indexes anyoway
[2013-04-25 15:16:20 -0400] anentropic: "Chef::Node:        success"
[2013-04-25 15:18:16 -0400] masterkorp: anentropic: how about knife search node 'name:*'
[2013-04-25 15:18:34 -0400] anentropic: 0
[2013-04-25 15:18:53 -0400] anentropic: double, single or no quotes
[2013-04-25 15:19:41 -0400] masterkorp: i had that problem once
[2013-04-25 15:19:52 -0400] masterkorp: don't remember how i fixed iot
[2013-04-25 15:20:29 -0400] masterkorp: anentropic: do your collegues or other clients suffer from that  too ?
[2013-04-25 15:20:45 -0400] anentropic: yes, it's what I'm trying to fix at the moment
[2013-04-25 15:22:41 -0400] masterkorp: tried to remove your local chef cache ?
[2013-04-25 15:23:33 -0400] anentropic: masterkorp: it doesn't query the http api?
[2013-04-25 15:24:00 -0400] masterkorp: yeah
[2013-04-25 15:26:04 -0400] anentropic: I have restarted chef-colr on the chef server and reindexed
[2013-04-25 15:26:08 -0400] anentropic: chef-solr
[2013-04-25 15:26:20 -0400] UForgotten: cygoonda: perhaps it was unintentional.
[2013-04-25 15:27:48 -0400] cygoonda: Uforgotten: OK, I thought it was some inside joke. Maybe I'm the only guy old enough to think that is morse code
[2013-04-25 15:28:13 -0400] UForgotten: cygoonda: I'm watching the live stream and there is definitely morse-like stuff in the logo they keep showing but no idea what the relevance is.
[2013-04-25 15:28:36 -0400] anentropic: sounds like time for an acronym competition
[2013-04-25 15:29:10 -0400] cygoonda: :-)
[2013-04-25 15:30:18 -0400] null_route: is there a way to get to get the http_request resource NOT to url-escape my message?
[2013-04-25 15:30:30 -0400] null_route: I'm trying to send JSON, and it's escaping all of my quotes!
[2013-04-25 15:33:05 -0400] UForgotten: cygoonda: The slogan "Ops Code, Code Can" is what they're putting up in morse quickly during the animation.
[2013-04-25 15:34:04 -0400] UForgotten: Not sure what the KDURA in the logo is.
[2013-04-25 15:35:18 -0400] anentropic: null_route: LOL ...sorry
[2013-04-25 15:37:03 -0400] UForgotten: I'm loving the explicit gangsta music they're playing right now
[2013-04-25 15:37:36 -0400] UForgotten: that shit cray
[2013-04-25 15:38:41 -0400] null_route: anentropic: ?
[2013-04-25 15:39:22 -0400] anentropic: it made me laugh
[2013-04-25 15:39:24 -0400] null_route: We're trying to send some simple JSON, we're just doing trial-and-error to get it to send the JSON without escaping all of the "'s
[2013-04-25 15:39:46 -0400] anentropic: I am just a user too
[2013-04-25 15:39:56 -0400] null_route: url-escape was probably not what I meant :-)
[2013-04-25 15:43:48 -0400] VadimT: can i enable sending request to API server without authentication?
[2013-04-25 15:47:26 -0400] anentropic: nullroute: is this any help? http://stackoverflow.com/a/6551764/202168
[2013-04-25 15:47:58 -0400] coderanger: Reminder, streaming the chefconf keynote on chefconf.opscode.com
[2013-04-25 15:56:14 -0400] anentropic: re knife search...
[2013-04-25 15:56:24 -0400] anentropic: $ sudo chef-expanderctl node-status
[2013-04-25 15:56:24 -0400] anentropic: [Thu, 25 Apr 2013 15:59:00 +0000] WARN: You seem to have a legacy setting for solr_url: did you mean http://localhost:8983/solr ?
[2013-04-25 15:56:25 -0400] anentropic: Collecting status info from the cluster...
[2013-04-25 15:56:30 -0400] anentropic: (waits... nothing)
[2013-04-25 15:57:57 -0400] anentropic: $ sudo chef-expanderctl queue-status
[2013-04-25 15:57:57 -0400] anentropic: [Thu, 25 Apr 2013 16:01:04 +0000] WARN: You seem to have a legacy setting for solr_url: did you mean http://localhost:8983/solr ?
[2013-04-25 15:58:09 -0400] anentropic: "/usr/lib/ruby/1.8/qrack/client.rb:84:in `next_method': undefined method `payload' for nil:NilClass (NoMethodError)"
[2013-04-25 15:58:16 -0400] anentropic: hmm
[2013-04-25 16:01:27 -0400] anentropic: http://localhost:8983/solr is reachable
[2013-04-25 16:06:41 -0400] zackf: How do I move a ticket into "fix provided" status on tickets.opscode?
[2013-04-25 16:07:23 -0400] anentropic: I see queries in /var/log/chef/solr.log  when I search so it's reaching solr
[2013-04-25 16:07:31 -0400] gansbrest: hi. What's the best way to distribute databags encryption keys to multiple nodes. And update them in case there is a need to?
[2013-04-25 16:12:26 -0400] anentropic: on the chef server:
[2013-04-25 16:12:26 -0400] anentropic: $ tail -f /var/log/chef/client.log
[2013-04-25 16:12:27 -0400] anentropic: [Thu, 25 Apr 2013 15:12:17 +0000] INFO: *** Chef 10.14.2 ***
[2013-04-25 16:12:27 -0400] anentropic: [Thu, 25 Apr 2013 15:12:20 +0000] INFO: Client key /etc/chef/client.pem is not present - registering
[2013-04-25 16:12:27 -0400] anentropic: [Thu, 25 Apr 2013 15:12:20 +0000] ERROR: Net::HTTPServerException: 403 "Forbidden"
[2013-04-25 16:12:27 -0400] anentropic: [Thu, 25 Apr 2013 15:12:20 +0000] FATAL: Stacktrace dumped to /var/cache/chef/chef-stacktrace.out
[2013-04-25 16:12:37 -0400] anentropic: [Thu, 25 Apr 2013 15:12:20 +0000] ERROR: Sleeping for 1800 seconds before trying again
[2013-04-25 16:13:06 -0400] anentropic: what is significance of this?
[2013-04-25 16:13:22 -0400] stormerider: anentropic: that looks like it failed registration, usually either because solr is having issues or the validation PEM key is wrong.
[2013-04-25 16:13:45 -0400] zts: or because a client with the same name already exists
[2013-04-25 16:13:50 -0400] anentropic: what is client.log on the server recording?
[2013-04-25 16:14:26 -0400] anentropic: is this a problem with one of the nodes? or with the server?
[2013-04-25 16:14:38 -0400] zts: anentropic: that is a problem with chef-client running on the server
[2013-04-25 16:14:56 -0400] gchristensen: coderanger: are there going to be talks on implementing Omnibus for other tools?
[2013-04-25 16:14:57 -0400] anentropic: confusing! :)
[2013-04-25 16:15:17 -0400] coderanger: gchristensen: Not sure, check the conference program :)
[2013-04-25 16:15:37 -0400] gchristensen: I busted my ass for a couple days trying to make it work, and I just ended up feeling bad about myself when it didn't work :P
[2013-04-25 16:16:41 -0400] anentropic: zts: I have no  /etc/chef/client.pem  ... I have a  /etc/chef/validation.pem   doi I need both or is a config file pointing to the wrong one somewhere?
[2013-04-25 16:17:02 -0400] zackf: Can anyone help me in tickets.opscode flip the status of an issue to fix provided? My first time contributing.
[2013-04-25 16:17:25 -0400] paulmooring: zackf: do have you signed a cla?
[2013-04-25 16:17:29 -0400] zackf: yes
[2013-04-25 16:17:45 -0400] paulmooring: which ticket?
[2013-04-25 16:17:55 -0400] zackf: http://tickets.opscode.com/browse/KNIFE-269
[2013-04-25 16:18:25 -0400] paulmooring: done
[2013-04-25 16:18:35 -0400] zackf: Thanks a bunch!
[2013-04-25 16:18:37 -0400] paulmooring: also thanks for contributing!
[2013-04-25 16:18:38 -0400] zackf: Appreciate it
[2013-04-25 16:18:54 -0400] zackf: np!
[2013-04-25 16:19:29 -0400] zts: anentropic: on a chef-client node, you need the client.pem, but if you don't have one it will use the validation.pem to get one - the log you pasted (please use pastebin in future :) looks like it is trying to do that
[2013-04-25 16:19:57 -0400] zts: anentropic: newer version of chef-client have somewhat better reporting of the problems, or you ight find more details in the chef server logs
[2013-04-25 16:21:57 -0400] anentropic: zts: this is the client.log on my server though
[2013-04-25 16:22:44 -0400] zts: anentropic: yup, but you just happen to be running chef-client and the server on the same machine - chef-server itself doesn't apply chef recipes
[2013-04-25 16:23:01 -0400] anentropic: should I have chef-0client on there at all?
[2013-04-25 16:23:13 -0400] anentropic: it's not my workstation it's the actual chef server
[2013-04-25 16:23:21 -0400] anentropic: don't want client on there if not needed
[2013-04-25 16:24:11 -0400] zts: it's not required, but you might want to manage your chef server same as any other node
[2013-04-25 16:24:16 -0400] stormerider: whoa, the chef install page looks a bit different now
[2013-04-25 16:24:28 -0400] zts: and if you're using version 10 server, you'll almost certainly want to use the chef-server cookbook to compact couchdb etc
[2013-04-25 16:25:26 -0400] anentropic: I just want to get knife search working
[2013-04-25 16:40:03 -0400] anentropic: zts: I created a client.pem via `knife client create` and added to the server
[2013-04-25 16:40:04 -0400] j^2: i'd like to post a wiki on my opensource chef11 server, so like "https://chef.domain.com/wiki" any suggestion on where to put in in the filesystem?
[2013-04-25 16:40:28 -0400] anentropic: the "Client key /etc/chef/client.pem is not present - registering" message is gone but still the 403 error
[2013-04-25 16:40:36 -0400] j^2: i thought /var/opt/chef-server/nginx/html/ but that seems to be wrong
[2013-04-25 16:44:15 -0400] anentropic: I don't think I needed to create it at after all, the problem is in client communicating with http api server... in this case they are same machine :(
[2013-04-25 16:52:01 -0400] stormerider: anentropic: do you have the validation.pem file for the chef client to access?
[2013-04-25 16:52:56 -0400] anentropic: stormerider: ah I just found the problem, bad url for chef server in client.rb ...deleted the existing pem, restarted chef-client (twice) and now no errors coming in the client.log
[2013-04-25 16:53:36 -0400] anentropic: doesn't solve any of my problems with knife search though
[2013-04-25 16:54:37 -0400] anentropic: server is 10.14.2
[2013-04-25 16:55:33 -0400] stormerider: knife search relies on solr. what os is your server?
[2013-04-25 16:57:24 -0400] leifmadsen: I'm watching the ChefConf live stream, and the guy from FB is talking. Are these talks going to be available later? (I assume anyone who might know the answer to that is at the conference.... :))
[2013-04-25 16:58:06 -0400] anentropic: stormerider: ubuntu
[2013-04-25 16:58:11 -0400] anentropic: solr is running
[2013-04-25 16:58:12 -0400] stormerider: anentropic: quantal?
[2013-04-25 16:58:33 -0400] anentropic: I see 11.10
[2013-04-25 16:59:00 -0400] anentropic: I see entry added to solr logs when I search
[2013-04-25 16:59:02 -0400] stormerider: hm. not the issue i ran into, then. you'll need to look at the chef-solr logs and see what's going on, then.
[2013-04-25 16:59:08 -0400] anentropic: but not error
[2013-04-25 17:01:33 -0400] anentropic: this looks very similar http://tickets.opscode.com/browse/CHEF-2244
[2013-04-25 17:04:18 -0400] rava: hey guys, i'm having trouble getting a role's default and override attributes getting applied to a node
[2013-04-25 17:05:53 -0400] rava: weirdest part is that the attributes don't show at all if i do a knife node show NODE -a attr
[2013-04-25 17:06:26 -0400] rava: but if i go into shef as the node's client, and do node.attribute.attr, i see some of the values from the role
[2013-04-25 17:06:38 -0400] rava: but a few attributes are their default values
[2013-04-25 17:07:11 -0400] rava: i'm guessing the disconnect is because the chef-client execution pukes and leaves the node in some odd state ?
[2013-04-25 17:08:41 -0400] gchristensen: that graph on the % of CPU idle is incredible
[2013-04-25 17:15:45 -0400] rava: any ideas what else i can check for why role attributes aren't being applied to this node?
[2013-04-25 17:16:13 -0400] rava: i've tried deleting node, client, and role then reassigning everything. the role shows up just fine in the webui attribute and run list wise
[2013-04-25 17:20:53 -0400] directionless: I'm using LWRPs to creates files in a directory. Is there a good way to remove files that do not have an associated lwrp?
[2013-04-25 17:21:39 -0400] rava: this is the source of the role:
[2013-04-25 17:21:40 -0400] rava: https://gist.github.com/anonymous/e440201b926f1dd46ba9
[2013-04-25 17:23:25 -0400] zackf: rava:  what environment is the node in ?
[2013-04-25 17:23:35 -0400] rava: zackf: PROD
[2013-04-25 17:25:19 -0400] gchristensen: is the simplest way to upgrade a chef-client to run the omnibus installer again?
[2013-04-25 17:25:33 -0400] rava: this is also odd, the role it's assigned doesn't show up in the roles attribute in a knife show, but it does in the run list: https://gist.github.com/anonymous/d9d0105e0fc8b1b74227
[2013-04-25 17:33:12 -0400] dfrey: does chef-client look for a json file by default? if so, where does it look? i know it can be specified with -j
[2013-04-25 17:34:26 -0400] holoway: leifmadsen: yeah, they will
[2013-04-25 17:35:37 -0400] leifmadsen: holoway: awesome
[2013-04-25 17:37:11 -0400] ssd7: dfrey: It doesn't look anywhere by default AFAIK
[2013-04-25 17:38:09 -0400] dfrey: ssd7: ok, thanks
[2013-04-25 17:39:06 -0400] kevmo: I ran the following to update my chef server and chef-server-webui to chef-server-webui 10.24.4.  Everything ran successfully howewever when I log into the Chef Web UI it still shows version 10.18.2 at the bottom of the ui.  Is this a known issue, did I do something wrong, how can I verify I am running the right version?  Here is the command I used and have not had issues with in the past: "gem install chef chef-server chef-server-api chef-solr chef-s
[2013-04-25 17:39:07 -0400] kevmo: erver-webui --no-ri --no-rdoc"
[2013-04-25 17:39:22 -0400] sanguisdex: so I have a LEMP stack run list that I have setup and like, I would like to be be able to configure certain things like domain names with editing the role every time. I was thinking a shell script but I figure chef already has a system for this
[2013-04-25 17:39:25 -0400] sanguisdex: ?
[2013-04-25 17:40:58 -0400] curtis__: wondering if anyone has used chef to direct input to a python script using the getpass method
[2013-04-25 17:41:41 -0400] curtis__: I'm currently trying to use chef's popen method, defined in the Chef::Mixin::Command class
[2013-04-25 17:57:25 -0400] curtis__: CURIOUS IF ANYONE IS LISTENING OUT THERE...????
[2013-04-25 17:58:44 -0400] sanguisdex: curtis__: listening
[2013-04-25 17:58:48 -0400] sanguisdex: but not able to help
[2013-04-25 17:59:18 -0400] s2r2: getpass is interactive?
[2013-04-25 17:59:41 -0400] s2r2: i.e. you want to communicate with the user executing chef-client...?
[2013-04-25 18:02:07 -0400] bytheway: anyone know which track the stream is going to be following?
[2013-04-25 18:03:03 -0400] gchristensen: I want to follow all the tracks :(
[2013-04-25 18:03:28 -0400] bytheway: me too, but I'm grateful to have anything
[2013-04-25 18:03:34 -0400] evxd: does anyone know how to set the sandbox url? i'm overriding the nginx ssl port, and no matter what i set in chef-server.rb, it ends up trying to commit the sandbox to localhost:443. on 11.0.8
[2013-04-25 18:04:06 -0400] curtis__: I'm using chef to execute a python script I have no way of modifying.  That script uses getpass to prompt a user for a password, which it stores to connect to a database.  I need to used chef to pass the password as an attribute, thus removing the prompt in the middle of my chef run
[2013-04-25 18:32:06 -0400] vinomaster: Anyone from opscode able to explain what causes "ERROR: Errno::ECONNRESET: Connection reset by peer - SSL_connect" as a result of a knife configure -i?
[2013-04-25 18:39:51 -0400] nebrera_: I am having problems installing https://github.com/opscode/erchef
[2013-04-25 18:43:28 -0400] yfeldblum: vinomaster, i assume it means that a RST packet was delivered to your TCP stack - http://stackoverflow.com/questions/1434451/what-does-connection-reset-by-peer-mean
[2013-04-25 18:44:05 -0400] zts: vinomaster: perhaps you gave it the wrong chef server URL
[2013-04-25 18:45:08 -0400] vinomaster: zts: well that is my question. I tried http://myurl https://myurl as well as both of those with port 4000 all 4 options fail
[2013-04-25 18:45:41 -0400] vinomaster: zts: I am able to open browser of chef server at http:myurl and log in just fine
[2013-04-25 18:45:50 -0400] vinomaster: zts: BTW thanks for repsonding :-)
[2013-04-25 18:54:25 -0400] sfalcon_: nebrera_: I'd recommend the omnibus installer for Chef Server. If you want to take it for a test-drive, the chef-server cookbook is setup w/ Berkshelf and vagrant as well.
[2013-04-25 18:54:56 -0400] nebrera_: where can I find doc about this ?
[2013-04-25 18:55:08 -0400] nebrera_: I have found:  http://rrudi.bitbucket.org/blog/html/2012/10/16/make_erchef.html#
[2013-04-25 18:56:03 -0400] nebrera_: looks nice but it fails when I do exec:    escript bin/bootstrap-chef-server
[2013-04-25 18:56:09 -0400] sfalcon_: nebrera_: huh, don't think that could ever work
[2013-04-25 18:56:32 -0400] sfalcon_: nebrera_: http://www.opscode.com/chef/install/
[2013-04-25 18:56:59 -0400] sfalcon_: nebrera_: http://docs.opscode.com/chef/install_server.html
[2013-04-25 18:57:18 -0400] curtis__: I'm using chef to execute a python script I have no way of modifying.  That script uses getpass to prompt a user for a password, which it stores to connect to a database.  I need to used chef to pass the password as an attribute, thus removing the prompt in the middle of my chef run
[2013-04-25 18:57:32 -0400] curtis__: any suggestions?
[2013-04-25 18:58:08 -0400] nebrera_: the problem is first link install rpm with postgres and errand ....
[2013-04-25 18:58:14 -0400] nebrera_: but I do want to use mine
[2013-04-25 18:58:23 -0400] nebrera_: *erlang
[2013-04-25 19:00:17 -0400] sfalcon_: nebrera_: why? The omnibus installer takes care of all of the deps and is designed/tested together. Going to be a fair amount of effort to connect all the pieces one at a time.
[2013-04-25 19:00:56 -0400] nebrera_: the problem is I use into my system and I have riak for example for s3
[2013-04-25 19:01:02 -0400] nebrera_: and it use erlang
[2013-04-25 19:01:53 -0400] sfalcon_: nebrera_: the chef server install should be self-contained. you can install other things on the same box (e.g. erlang) without problem.
[2013-04-25 19:02:17 -0400] nebrera_: and for example I want to use external postgres
[2013-04-25 19:02:19 -0400] sfalcon_: Also, not sure if raikCS has enough feature set yet to be a drop-in replacement
[2013-04-25 19:02:36 -0400] nebrera_: why do I have to install postgres too
[2013-04-25 19:02:51 -0400] sfalcon_: nebrera_: even so, the way to start is to install w/ omnibus and then set your config to have pg be disabled.
[2013-04-25 19:03:37 -0400] nebrera_: and where is the doc about this omnibus ?
[2013-04-25 19:03:47 -0400] sfalcon_: linked above?
[2013-04-25 19:05:28 -0400] nebrera_: notp
[2013-04-25 19:05:30 -0400] nebrera_: nop
[2013-04-25 19:05:38 -0400] sfalcon_: nebrera_: http://docs.opscode.com/config_rb_chef_server.html
[2013-04-25 19:05:39 -0400] nebrera_: I have searched omnibus and not found
[2013-04-25 19:06:20 -0400] sfalcon_: Sorry "omnibus" may be too much of an internal name for main Chef Server install packages.
[2013-04-25 19:06:28 -0400] sfalcon_: Follow these: http://docs.opscode.com/chef/install_server.html
[2013-04-25 19:07:09 -0400] rava: anyone have some good steps to troubleshoot why a node isn't applying it's role's attributes?
[2013-04-25 19:07:43 -0400] nebrera_: ok
[2013-04-25 19:08:57 -0400] nebrera_: it says: This command will set up all of the required components, including Erchef, RabbitMQ, PostgreSQL, and all of the cookbooks that are used by chef-solo to maintain Chef Server 11.x
[2013-04-25 19:09:18 -0400] nebrera_: how do I avoid postgres or rabbitmq ?
[2013-04-25 19:09:47 -0400] sfalcon_: nebrera_: your use case is not the common one. You can provide a custom /etc/chef-server/chef-server.rb and disable components you don't want and wire-in alternative locations.
[2013-04-25 19:10:54 -0400] nebrera_: as difficult is install only erchef ?
[2013-04-25 19:11:07 -0400] nebrera_: are you chef developer ?
[2013-04-25 19:13:21 -0400] sfalcon_: nebrera_: yes, I work at Opscode and have been quite involved w/ erchef work.
[2013-04-25 19:13:49 -0400] nebrera_: and have you seen http://rrudi.bitbucket.org/blog/html/2012/10/16/make_erchef.html# ???
[2013-04-25 19:13:49 -0400] sfalcon_: I would very much encourage using the install package and tweaking its config as you need.
[2013-04-25 19:14:36 -0400] nebrera_: it looks it install exactly how I need
[2013-04-25 19:15:19 -0400] sfalcon_: nebrera_: not before today :) Hey if that somehow works for you, great. I don't think you will end up with a usable or maintainable install that way.
[2013-04-25 19:16:10 -0400] nebrera_: what is ./bin/bootstrap-chef-server used for ?
[2013-04-25 19:16:28 -0400] nebrera_: I mean erchef/bin/bootstrap-chef-server
[2013-04-25 19:19:58 -0400] nebrera_: actually the old style to install was easyer: gem install chef-server :-D
[2013-04-25 19:21:27 -0400] j^2: nebrera_: better imo now --> curl -L https://www.opscode.com/chef/install.sh | sudo bash && mkdir /etc/chef
[2013-04-25 19:21:34 -0400] j^2: ooh
[2013-04-25 19:21:36 -0400] j^2: opps
[2013-04-25 19:21:39 -0400] j^2: mis read
[2013-04-25 19:21:41 -0400] j^2: ;)
[2013-04-25 19:23:34 -0400] sfalcon_: sorry to hear that. But using an os package manager and running a single command doesn't seem that bad. Taking care of all of the required components and dependencies simplifies managing a chef server to a large degree. But I get that if you want to customize, then you now have a new piece of kit to learn (the omnibus config driven thing)
[2013-04-25 19:24:33 -0400] sfalcon_: But aside from the learning curve, it actually is all setup to do what you want I think. You can, via config, enable/disable any component and set config (e.g. vips) to point services at an external postgres, etc.
[2013-04-25 19:25:31 -0400] programmerq: I have to say I'm enjoying chefcon so far. :)
[2013-04-25 19:39:53 -0400] rava: nodes can have more than one role right?
[2013-04-25 19:40:09 -0400] kallistec: yep
[2013-04-25 19:40:37 -0400] rava: ah, it was just taking a while for chef to see it had new role, i've been having a devil of time with roles lately
[2013-04-25 19:40:58 -0400] cygoonda: Hi folks, just getting started with chef and trying to use it with my previously installed open source chef server
[2013-04-25 19:40:59 -0400] cygoonda: Knife is installed and works ok
[2013-04-25 19:41:01 -0400] cygoonda: I would like to download the entire repository
[2013-04-25 19:41:02 -0400] cygoonda: I get this:
[2013-04-25 19:41:03 -0400] cygoonda: prompt$ knife download /
[2013-04-25 19:41:03 -0400] cygoonda: ERROR: File var/chef is a directory while file var/chef is a regular file
[2013-04-25 19:42:11 -0400] chef_noob: How can I restart a service serially and not have it queues and restarted until the end of a chef-client run?
[2013-04-25 19:42:24 -0400] rava: when you have a role that defines empty environment run lists, can you still use the run_list attribute to specify a default run list for the role?
[2013-04-25 19:42:36 -0400] kallistec: chef_noob: there's an optional third argument to notifies that sets the timing
[2013-04-25 19:43:04 -0400] kallistec: notifies :restart, "service[name]", :immediately
[2013-04-25 19:43:45 -0400] chef_noob: kallistec:  so this wouldn't work:
[2013-04-25 19:43:49 -0400] chef_noob: service app do
[2013-04-25 19:43:58 -0400] chef_noob:    action [:restart]
[2013-04-25 19:43:58 -0400] chef_noob: end
[2013-04-25 19:44:14 -0400] kallistec: that works, it will restart the service every time chef runs though
[2013-04-25 19:44:20 -0400] chef_noob: ah
[2013-04-25 19:44:22 -0400] chef_noob: I see awesome
[2013-04-25 19:44:27 -0400] chef_noob: good deal, thanks!
[2013-04-25 19:47:21 -0400] rava: when you have a role that defines empty environment run lists, can you still use the run_list attribute to specify a default run list for the nodes assigned that role?
[2013-04-25 19:47:21 -0400] nebrera_: I am having problems with:  chef-server-ctl reconfigure
[2013-04-25 19:47:28 -0400] nebrera_: and rabbitmq
[2013-04-25 19:47:39 -0400] nebrera_: execute[/opt/chef-server/bin/chef-server-ctl start rabbitmq] action run but never starts
[2013-04-25 19:49:46 -0400] zachallett: i have noticed that using the users cookbook, v1.4.0, it appears to be removing the users under the sysadmins group and trying to readd them every chef-client run. why is this?
[2013-04-25 19:49:57 -0400] damian_: just found a fun bug with the newest release on windows.  It fixed the LWRP issue, but now i get this fun error
[2013-04-25 19:50:11 -0400] damian_: 23.20.140.178 [2013-04-25T19:34:30+00:00] FATAL: Chef::Exceptions::Win32APIError: template[C:/chef/install-datadog.bat] (datadog::dd-windows line 6) had an error: Chef::Exceptions::Win32APIError: The operation completed successfully.
[2013-04-25 19:50:11 -0400] damian_: 23.20.140.178 ---- Begin Win32 API output ----
[2013-04-25 19:50:12 -0400] damian_: 23.20.140.178 System Error Code: 0
[2013-04-25 19:50:13 -0400] damian_: 23.20.140.178 System Error Message: The operation completed successfully.
[2013-04-25 19:50:15 -0400] damian_: 23.20.140.178 ---- End Win32 API output ----
[2013-04-25 19:50:17 -0400] damian_: 23.20.140.178
[2013-04-25 19:50:28 -0400] damian_: same run list works fine with older versions of chef
[2013-04-25 19:51:25 -0400] nebrera_: this is the error: http://pastebin.com/XDzneZwY   , any idea
[2013-04-25 19:52:10 -0400] rava: apparently the run_list attribute on a role isn't picked up if the env_run_lists are empty
[2013-04-25 19:52:37 -0400] damian_: nebrera_: what happens when you run that same command manually on the host?
[2013-04-25 19:53:01 -0400] nebrera_: # /opt/chef-server/bin/chef-server-ctl start rabbitmq
[2013-04-25 19:53:09 -0400] nebrera_: warning: rabbitmq: unable to open supervise/ok: file does not exist
[2013-04-25 19:54:16 -0400] damian_: looks like rabbitmq isnt setup under supervise properly.  is it setup to be managed by supervise?
[2013-04-25 19:54:43 -0400] nebrera_: I don't know, how can I check it ?
[2013-04-25 19:56:37 -0400] rava: damnit.. shouldn't a node still have the proper attributes set by overrides in a role even if the client bails running half way through?
[2013-04-25 19:57:02 -0400] damian_: nebrera_: how did you install rabbitmq?  it might  be setup to just use an init script instead of supervise.
[2013-04-25 19:57:13 -0400] nebrera_: I am using your rpm
[2013-04-25 19:57:39 -0400] damian_: is there a rabbitmq script in /etc/init.d?
[2013-04-25 19:57:55 -0400] rava: i have a monitoring role on this node, and a node show -a nagios on it gives me the values i expect. they show up in the webui, but running shef on then ode itself, and checking the attribute, it still has the defaults!
[2013-04-25 19:58:00 -0400] damian_: also, who do you mean by "your".  I dont think I have ever released a rabbitmq package :p
[2013-04-25 19:59:11 -0400] magoo: rava: if it's the first chef run, it's likely that they won't be set
[2013-04-25 19:59:15 -0400] magoo: at least in my experience
[2013-04-25 19:59:19 -0400] nebrera_: I see
[2013-04-25 19:59:37 -0400] rava: magoo: but why does the chef-server see those attributes as set when querying the api?
[2013-04-25 20:00:03 -0400] rava: and hte node's run chef-client before with this role. all i've done was add recipes to the run list now
[2013-04-25 20:00:13 -0400] rava: none of which seem to override node attributes
[2013-04-25 20:00:22 -0400] nebrera_: there is
[2013-04-25 20:00:29 -0400] nebrera_: I will remove and check
[2013-04-25 20:00:45 -0400] damian_: nebrera_: dont remove that script.  I am guessing that its not setup to use supervise
[2013-04-25 20:00:49 -0400] damian_: which is not uncommon
[2013-04-25 20:00:58 -0400] rava: and aren't override attributes supposed to take priority in convergence over the defaults defined in a recipe?
[2013-04-25 20:01:03 -0400] damian_: just start rabbitmq by running '/etc/init.d/rabbitmq start'
[2013-04-25 20:01:31 -0400] nebrera_: but /etc/init.d/rabbitmq is not chef-server package
[2013-04-25 20:01:38 -0400] nebrera_: it is other package
[2013-04-25 20:02:17 -0400] nebrera_: if I do exec /etc/init.d/rabbitmq-server start        it starts correctly
[2013-04-25 20:02:32 -0400] rava: if i could just fix this damned attribute problem a 2 day issue would be solved >.>
[2013-04-25 20:02:42 -0400] nebrera_: http://pastebin.com/Qfsj1JLD
[2013-04-25 20:02:44 -0400] damian_: so whats the problem?  thats the proper way to start rabbitmq on your distro, dont try to use supervise
[2013-04-25 20:02:53 -0400] dfrey: how do i upload an environment file in ruby? it works for json but i need to use some variables
[2013-04-25 20:03:26 -0400] nebrera_: the problem is the install guide: http://docs.opscode.com/chef/install_server.html says me to execute
[2013-04-25 20:03:36 -0400] nebrera_: chef-server-ctl reconfigure
[2013-04-25 20:03:50 -0400] nebrera_: I exec this and tries to starts again rabbit mq
[2013-04-25 20:04:30 -0400] dfrey: knife environment from file dev.rb ERROR: ArgumentError: wrong number of arguments (1 for 2)
[2013-04-25 20:05:24 -0400] nebrera_: this is the complete output
[2013-04-25 20:05:25 -0400] nebrera_: http://pastebin.com/7qWjHWmw
[2013-04-25 20:05:34 -0400] rackCity: Would anyone have any suggestions on how to monitor networking equipment or if there's even a way to do this w/ chef?
[2013-04-25 20:05:59 -0400] rava: snmp and nagios cookbook?
[2013-04-25 20:06:49 -0400] rackCity: rava, is that how you guys are doing it?
[2013-04-25 20:07:27 -0400] rava: rackCity: i only have 1 switch i care about, the rest is in the cloud, but yeah. the nagios cookbook is easy to extend with service checks and the like
[2013-04-25 20:07:53 -0400] damian_: rackCity: That is how i have monitored networking equipment in the past.  depending on what you are using there are nagios plugins that will poll all the vital statistics
[2013-04-25 20:08:22 -0400] damian_: if you want bandwidth monitoring, i would suggest cacti to pull throughput on a per port basis
[2013-04-25 20:08:36 -0400] rackCity: rava/damian...nice, that's pretty much what i was looking for then :)
[2013-04-25 20:08:58 -0400] damian_: nebrera_: I think your best bet is to figure out how to make rabbitmq play nice with supervise
[2013-04-25 20:09:01 -0400] rava: rackCity: for network stuff, instead of setting up cacti (it's a pig..), take a look at boundary's service
[2013-04-25 20:09:07 -0400] rava: rackCity: they also have an easy to use cookbook
[2013-04-25 20:09:23 -0400] nebrera_: what is supervise ?
[2013-04-25 20:09:23 -0400] rackCity: easy to use?  i'm sold.
[2013-04-25 20:09:30 -0400] damian_: yea, cacti can be a bit much, but its great when people want pretty graphs :p
[2013-04-25 20:10:08 -0400] rava: pretty being severely subjective when it comes to cacti graphs :D
[2013-04-25 20:10:33 -0400] rava: can anyone help me out on trouble shooting why this node isn't applying it's role's ovveride attributes?
[2013-04-25 20:10:39 -0400] damian_: hehe, tru.  its my go to just because i know i can get a instance up with all devices in a couple hours
[2013-04-25 20:11:03 -0400] damian_: rava: what attributes are listed under that node when you look it up in the server
[2013-04-25 20:11:08 -0400] ctb: rackCity: if you already use graphite, look into using snmp->collectd->graphite
[2013-04-25 20:11:41 -0400] rackCity: yes we're currently using graphite
[2013-04-25 20:11:52 -0400] rava: this is what i get when i do a node show: https://gist.github.com/ravaa/0970cffc2193a125fc9e
[2013-04-25 20:13:03 -0400] rava: damian_: and then running shef -z on the node: https://gist.github.com/ravaa/78b509eba1886702d076
[2013-04-25 20:13:11 -0400] rava: the breaking one is that host_name_attribute
[2013-04-25 20:13:28 -0400] rava: there are some others, but that's the one that's breaking the rest of the recipe execution
[2013-04-25 20:14:04 -0400] rava: i'm boggled as to how this could be the case
[2013-04-25 20:14:49 -0400] ctb: rava: what about node.hostname?
[2013-04-25 20:15:15 -0400] ctb: though you said you're trying to override, n/m
[2013-04-25 20:15:21 -0400] damian_: what are you trying to accomplish?  just pull the hostname into a attribute?
[2013-04-25 20:15:38 -0400] nebrera_: at the end sfalcon_ you convince me but I still getting errors with rpm :-(
[2013-04-25 20:15:42 -0400] rava: no, what i'm trying to do is use the node.name attribute for the host_name portion in the template
[2013-04-25 20:16:13 -0400] rava: so i set it as an override on the role
[2013-04-25 20:16:30 -0400] rava: but i can't, for the life of me, figure out why the node isn't taking the role's attributes
[2013-04-25 20:16:56 -0400] damian_: how are you setting the override attribute in the role?
[2013-04-25 20:17:15 -0400] rava: role json definition:
[2013-04-25 20:17:39 -0400] rava: https://gist.github.com/ravaa/6e035cb1a2fe79c6c643
[2013-04-25 20:19:43 -0400] damian_: so you want host_name_attribute to be set to "name"?
[2013-04-25 20:19:46 -0400] rava: i've put that json through 2 different linters (json syntax errors are the bane of my existence when it comes to chef roles)
[2013-04-25 20:19:47 -0400] ctb: rava: perhaps override['nagios']['host_name_attribute'] = node['hostname'] in your recipe?
[2013-04-25 20:20:24 -0400] rava: let me double check, but i'm certain i dug around to make sure the nagios cookbook wasn't doing that
[2013-04-25 20:20:31 -0400] damian_: yea, the JSON is a pain.  I edit all my roles local in ruby the upload them
[2013-04-25 20:20:39 -0400] sfalcon_: nebrera_: oh no! I'm not going to be around for a bit, but if you can gather some details either other folks can help here or you can post the ML
[2013-04-25 20:20:57 -0400] bytheway: is there no chefconf stream for this afternoon?
[2013-04-25 20:21:00 -0400] rava: damian_: i'd really love it if the api would bitch and reject not 100% well formed json
[2013-04-25 20:21:26 -0400] rava: i've had it accept a role that was missing a }, showed the role as proper, but none of the run lists would apply or be seen
[2013-04-25 20:21:31 -0400] rava: helluva time debugging that...
[2013-04-25 20:21:59 -0400] ctb: rava: I find that `cat file.json | python -m json.tool` is handy for testing json correctness
[2013-04-25 20:22:09 -0400] damian_: rava: I would suggest using "knife role edit <role name>" and set your EDITOR to be something that can handle json
[2013-04-25 20:22:18 -0400] damian_: my emacs will tell me if something is malformed
[2013-04-25 20:22:59 -0400] rava: damian_: i recently moved to vim because my office is full of vim users, i'm going back to emacs once i can spend a day resetting it up
[2013-04-25 20:23:22 -0400] damian_: vim should do json formatting as well out of the box
[2013-04-25 20:23:44 -0400] rava: ya, but i'm now running like 4 different apps that i normally do all in emacs
[2013-04-25 20:24:05 -0400] rava: erc, gist, git, irb, etc..
[2013-04-25 20:24:17 -0400] damian_: hehe, yea i get shit from my coworkers for using emacs
[2013-04-25 20:24:22 -0400] zts: magit for the win
[2013-04-25 20:24:29 -0400] rava: zts: amen
[2013-04-25 20:25:59 -0400] rava: ctb: yeah, i'm not seeing node attributes being overridden anywhere
[2013-04-25 20:27:12 -0400] rava: is there anyway i can peel apart what's being layered in the convergence to see what's overriding my override ?
[2013-04-25 20:27:56 -0400] zts: rava: if you're on chef-client 11, you can use debug_value to see what's going on
[2013-04-25 20:28:14 -0400] zts: rava: see the debugging section on http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-04-25 20:28:25 -0400] zts: if you're on 10, I am not sure
[2013-04-25 20:28:27 -0400] rava: nay, 10.18.2 . i ran with -l debug but didn't see anything but confirmation that the client run is puking due to the attributes
[2013-04-25 20:29:19 -0400] zts: on that, you might have to resort to a bunch of Chef::Log statements in your attributes files and recipes, and noting when things change
[2013-04-25 20:29:56 -0400] rava: i wonder if just rewriting the role using the dsl instead of json would fix this. everytime i've had issues with roles it's been because of some hard to spot json syntax issue or attr name
[2013-04-25 20:30:40 -0400] rava: just hate that i can't figure out why the attributes aren't being seen during the chef-client run itself
[2013-04-25 20:30:57 -0400] rava: makes no sense if the api and web ui all show the right attributes on the node and the node itself doesn't see them
[2013-04-25 20:31:15 -0400] damian_: did you try blowing away the local chef cache?
[2013-04-25 20:31:22 -0400] damian_: i know thats screwed me multiple times
[2013-04-25 20:31:38 -0400] rava: ganking the cache folder?
[2013-04-25 20:32:19 -0400] damian_: yea, /var/cache/chef or /var/chef/cache depending on version
[2013-04-25 20:33:03 -0400] damian_: thats usually one of my first trouble shooting steps when it behaves odd
[2013-04-25 20:33:23 -0400] damian_: that and double checking that I actually uploaded the changes to roles/cookbooks/etc
[2013-04-25 20:33:36 -0400] damian_: uploading to github != uploading to chef
[2013-04-25 20:33:42 -0400] rava: heh
[2013-04-25 20:34:15 -0400] rava: i've done that, have a story i want to get to to make jenkins handle changes after i've pushed
[2013-04-25 20:34:22 -0400] rava: aaannnddd...no dice :(
[2013-04-25 20:34:49 -0400] rava: damn recipe worked exactly once on this node, and never worked again :/
[2013-04-25 20:35:21 -0400] damian_: did you happen to get updated to the newest version of chef?  Ive been fighting errors it introduced all week
[2013-04-25 20:35:39 -0400] rava: damian_: nope, server and client both sitting at 10.18
[2013-04-25 20:35:51 -0400] rava: i wish i had errors outside of the client run, then maybe i could troubleshoot intelligently >.>
[2013-04-25 20:36:03 -0400] rava: but nothing in the server logs indicates there's a problem
[2013-04-25 20:36:35 -0400] damian_: huh, i wish i could be more help, but i would have to see/understand more of your setup to be any help
[2013-04-25 20:37:31 -0400] rava: another odd thing is that the nodes do have a hostname attribute
[2013-04-25 20:37:44 -0400] rava: even if it ignores the attribute, it should still be able to pull in the node names
[2013-04-25 20:37:49 -0400] rava: ~hostnames
[2013-04-25 20:37:55 -0400] damian_: are you sure your calling the hostname attribute correctly?
[2013-04-25 20:38:50 -0400] rava: yes
[2013-04-25 20:39:15 -0400] rava: and i reviewed the recipe code as well
[2013-04-25 20:39:21 -0400] damian_: k, i just know it took me forever to figure out the right way in the past
[2013-04-25 20:39:30 -0400] rava: using the nagios cookbook?
[2013-04-25 20:39:31 -0400] damian_: i tend to just call node.name
[2013-04-25 20:39:52 -0400] damian_: nah, this was for a ejabberd setup as well as some other custom cookbooks ive put together
[2013-04-25 20:40:54 -0400] rava: joshua or schisamo are around?
[2013-04-25 20:45:09 -0400] Wynn: Has anyone been able to successfully do a knife download /cookbooks on a chef 11?
[2013-04-25 20:45:32 -0400] Wynn: I'm getting a ruby error:
[2013-04-25 20:45:33 -0400] Wynn: Created rvm/
[2013-04-25 20:45:33 -0400] Wynn: Created rvm/attributes/
[2013-04-25 20:45:33 -0400] Wynn: ERROR: Yajl::ParseError: lexical error: invalid char in json text.
[2013-04-25 20:45:34 -0400] Wynn:                                        # # Cookbook Name:: rvm # Attri
[2013-04-25 20:45:34 -0400] Wynn:                      (right here) ------^
[2013-04-25 20:46:01 -0400] Wynn: Sorry, that arrow is supposed to point to the space between the #'s
[2013-04-25 20:46:16 -0400] Wynn: I think this is a bug
[2013-04-25 20:46:28 -0400] kevmo: Try this again in case someone new is on.  I ran "sudo gem install chef chef-server chef-server-api chef-solr chef-server-webui --no-ri --no-rdoc" to update chef-server from 10.18.2 to 10.24.4.  Everything appears to have run successful however when I log into the Chef Web UI, the version number at the bottom of the screen still says 10.18.2.  Anyone seen this before?  Anything else need to be done other than the command above?  Thank you
[2013-04-25 20:48:06 -0400] Wynn: kevmo: Have you tried downloading the rpm via the opscode site?
[2013-04-25 20:48:06 -0400] Wynn: http://www.opscode.com/chef/install/
[2013-04-25 20:48:28 -0400] mhalligan: can someone with berksehelf understanding look at https://gist.github.com/mhalligan/5463016 and tell me what I'm doing wrong? I'm feeling dumb.
[2013-04-25 20:50:01 -0400] kevmo: Wynn:  No I have not done that.  Resistance to change...  Will it upgrade?  I don't really want to start over.
[2013-04-25 20:50:50 -0400] c0ff33: the omnibus installed fails on ubuntu 13.04 - is there some way that I can trick it into using the 12.10 installation besides manually editing the bootstrap file on the server?
[2013-04-25 20:51:02 -0400] c0ff33: I see that knife bootstrap has the -d DISTRO opption
[2013-04-25 20:52:28 -0400] nlloyds: c0ff33: The distro option chooses which bootstrap script you use (from https://github.com/opscode/chef/tree/master/lib/chef/knife/bootstrap or .chef/bootstrap)
[2013-04-25 20:55:02 -0400] nlloyds: c0ff33: Based on clicking around http://www.opscode.com/chef/install/ , it looks like the same deb package is used for Ubuntu >= 11.04. ( https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/11.04/x86_64/chef_11.4.4-1.ubuntu.11.04_amd64.deb )
[2013-04-25 20:55:06 -0400] c0ff33: nlloyds: my workstation is OS X with rbenv and the chef gem. just updated to 11.4.4. I don't see any .chef/bootstrap folder - can I pass knife the full URL you mentioned or do I need to put that new script in my .chef/bootstrap folder ?
[2013-04-25 20:55:49 -0400] c0ff33: nlloyds - the chef instsall package works fine for 13.04 but the bootstrap script was not working
[2013-04-25 20:56:05 -0400] nlloyds: c0ff33: the ones on the github link are installed with the chef gem, or you can create your own in .chef/bootstrap
[2013-04-25 20:56:43 -0400] c0ff33: you might have to spell out for me how i can use the thing from github with my workstation
[2013-04-25 20:57:46 -0400] nlloyds: c0ff33: just do --distro fedora13-gems (the name of the one you want to use without the .erb)
[2013-04-25 20:58:12 -0400] c0ff33: cool
[2013-04-25 20:58:19 -0400] nlloyds: c0ff33: But you probably won't need to do that. What's the error you're getting while attempting to bootstrap?
[2013-04-25 20:59:13 -0400] c0ff33: nlloyds: http://pastebin.com/zihF5QWu
[2013-04-25 20:59:29 -0400] c0ff33: it is because it is of the part 'p=ubuntu&pv=13.04'
[2013-04-25 20:59:39 -0400] c0ff33: if that is changed to 'p=ubuntu&pv=12.10' it works fine
[2013-04-25 21:00:12 -0400] c0ff33: nlloyds: basically on this page there is no 13 supported - http://www.opscode.com/chef/install/ ?
[2013-04-25 21:00:19 -0400] nlloyds: Right
[2013-04-25 21:00:29 -0400] c0ff33: http://img199.imageshack.us/img199/1407/screenshot20130425at500.png
[2013-04-25 21:02:57 -0400] kindsol: is there another irc specifically for #chefconf ?
[2013-04-25 21:03:28 -0400] kindsol: duh
[2013-04-25 21:03:34 -0400] kindsol: yeah that look like it
[2013-04-25 21:04:00 -0400] kindsol: stay tuned for more questions that I will answer for myself
[2013-04-25 21:04:36 -0400] nlloyds: c0ff33: Your best bet until that version is handled would be to copy that chef-full.rb and modifiy it to just download and install the right deb
[2013-04-25 21:04:53 -0400] rava: is there a way to inspect variables passed to a template?
[2013-04-25 21:05:00 -0400] rava: using shef or something?
[2013-04-25 21:11:33 -0400] thehar: I just wanna dance!
[2013-04-25 21:12:39 -0400] c0ff33: thanks nlloyds i got it working :)
[2013-04-25 21:13:48 -0400] aslan: hey guys... i thought the user resource would create the home directory by default. it seems its not doing that. should i do something with the "supports" directive?
[2013-04-25 21:15:01 -0400] freezey: http://docs.opscode.com/resource_user.html
[2013-04-25 21:15:05 -0400] freezey: default value for home directory is nil
[2013-04-25 21:15:35 -0400] freezey: default value is false
[2013-04-25 21:16:33 -0400] aslan: freezey: i did pas that this is the out put : useradd -p 'xxxx' -s '/bin/bash' -d '/home/mdigital' mdigital ----
[2013-04-25 21:16:56 -0400] freezey: code?
[2013-04-25 21:17:04 -0400] freezey: gist it
[2013-04-25 21:17:13 -0400] aslan: freezey: i did pass home "/home/mdigital"
[2013-04-25 21:17:29 -0400] freezey: you run the client in debug
[2013-04-25 21:17:32 -0400] freezey: to see if it executes the command?
[2013-04-25 21:17:37 -0400] freezey: chef-client -l debug
[2013-04-25 21:17:42 -0400] freezey: watch to see what it does
[2013-04-25 21:17:44 -0400] aslan: that was the debug output
[2013-04-25 21:18:02 -0400] freezey: and no error and no directory?
[2013-04-25 21:18:09 -0400] aslan: it does create the user i checked /etc/passwd
[2013-04-25 21:18:21 -0400] aslan: it looks like for some reason the -m wasn't passed
[2013-04-25 21:18:21 -0400] sniperd: aslan: you want supports {:manage_home => true}
[2013-04-25 21:18:31 -0400] freezey: yeah i had pasted him the doc before
[2013-04-25 21:18:38 -0400] sniperd: Its setting the users home directory, but not creating it.
[2013-04-25 21:18:43 -0400] freezey: aslan: yeah the doc states default is nil
[2013-04-25 21:18:48 -0400] freezey: or should i say false
[2013-04-25 21:18:56 -0400] aslan: sniperd: i did that and i got a syntax error
[2013-04-25 21:19:02 -0400] freezey: paste code
[2013-04-25 21:19:06 -0400] sniperd: aslan: then you have a syntax error :)
[2013-04-25 21:19:39 -0400] aslan: sniperd: FATAL: /vol/chef/site-cookbooks/milo/recipes/default.rb:41: syntax error, unexpected tASSOC, expecting '}'
[2013-04-25 21:19:46 -0400] freezey: paste
[2013-04-25 21:19:48 -0400] freezey: the code
[2013-04-25 21:19:52 -0400] freezey: heh
[2013-04-25 21:19:53 -0400] aslan: ok just a sec
[2013-04-25 21:19:54 -0400] freezey: k
[2013-04-25 21:21:54 -0400] sprack: I have a piece of ruby code in my recipe that fires a fail prior to the cookbook actually running. is there a way to sidestep this or should it be in a different part of the code so that its ignored properly until runtime: https://gist.github.com/sprack/5463257
[2013-04-25 21:22:14 -0400] aslan: freezey: here https://gist.github.com/Aslan/5463273
[2013-04-25 21:22:30 -0400] freezey: right
[2013-04-25 21:22:34 -0400] freezey: so where is line 41
[2013-04-25 21:22:37 -0400] freezey: can i see all of the code?
[2013-04-25 21:23:33 -0400] aslan: freezey: that would be line 5 in the gist
[2013-04-25 21:24:18 -0400] sniperd: remove the containing {}, just try supports :manage_home => true
[2013-04-25 21:24:45 -0400] aslan: sniperd: ok
[2013-04-25 21:25:07 -0400] aslan: lol... that worked
[2013-04-25 21:25:12 -0400] aslan: !!!
[2013-04-25 21:25:15 -0400] sniperd: sweet
[2013-04-25 21:25:27 -0400] freezey: there yah go
[2013-04-25 21:25:29 -0400] aslan: but why?
[2013-04-25 21:25:39 -0400] aslan: thanks guys
[2013-04-25 21:25:54 -0400] freezey: bug maybe?
[2013-04-25 21:25:55 -0400] freezey: i dunno
[2013-04-25 21:25:58 -0400] freezey: i saw a ticket opened about it
[2013-04-25 21:27:18 -0400] sniperd: Yeah, I suspect a bug, in theory it should support either way
[2013-04-25 21:28:22 -0400] mhalligan: is anyone with berkshelf clue around?
[2013-04-25 21:30:26 -0400] rava: exhaustively went through the recipes in this cookbook, 1 by 1, and it's definately just that the role attributes aren't being applied to the node
[2013-04-25 21:35:21 -0400] rava: so if in shef, on the node, if i do api.get('/nodes/NODE').nagios... i see the attributes i want
[2013-04-25 21:35:42 -0400] rava: how the hell aren't they being applied to the node?! is the cookbook's attribute files winning somehow?
[2013-04-25 21:39:40 -0400] sprack: how do I confine code in a recipe to only be evaluated at convergence?
[2013-04-25 21:44:16 -0400] zts: sprack: ruby code?  put it in a ruby_block resource
[2013-04-25 21:49:26 -0400] sprack: zts: that worked. awesome. thank you very much
[2013-04-25 21:49:34 -0400] Wynn:  Is anyone here running chef 11?
[2013-04-25 21:51:44 -0400] stormerider: huh, just saw an article about chef 11 mentioned on the LOPSA mailing list: http://blog.cyclecomputing.com/2013/02/built-to-scale-10600-instance-cyclecloud-cluster-39-core-years-of-science-4362.html
[2013-04-25 21:51:59 -0400] stormerider: very impressive, you folks :)
[2013-04-25 21:52:19 -0400] zts: sprack: you're welcome!
[2013-04-25 21:52:53 -0400] judd7: chefs showing up to LOPSA next weekend?
[2013-04-25 21:54:26 -0400] rava: so anyone know of a way to troubleshoot attribute application on a node in chef 10.18.2?
[2013-04-25 21:55:00 -0400] stormerider: Wynn: yes, im on 11
[2013-04-25 21:55:11 -0400] rava: because htis makes no fricking sense: https://gist.github.com/ravaa/e68a246b0602c2ad0648
[2013-04-25 21:55:50 -0400] Wynn: stormerider: have you been able to use the knife download tool on it?
[2013-04-25 21:56:20 -0400] Wynn: Like: "knife download /cookbooks/<your cookbook here>
[2013-04-25 21:56:43 -0400] Wynn: I'm getting this error: ERROR: Yajl::ParseError: lexical error: invalid string in json text.
[2013-04-25 21:56:57 -0400] Wynn: not sure if it's my envoironment or if it's a bug with chef
[2013-04-25 21:59:08 -0400] stormerider: i was able to do "knife download /roles" fine
[2013-04-25 22:00:46 -0400] Wynn: roles works for me
[2013-04-25 22:00:52 -0400] Wynn: but cookbooks are not
[2013-04-25 22:01:48 -0400] log1kal: miah: wtg at chefconf!
[2013-04-25 22:01:53 -0400] stormerider: ah, yeah, im seeing that, too.
[2013-04-25 22:02:30 -0400] Wynn: hmthat sounds like a bug to me
[2013-04-25 22:02:41 -0400] Wynn: funny thing is, it worked on my chef 10 server
[2013-04-25 22:02:58 -0400] Wynn: that's how I was able to migrate my many cookbooks
[2013-04-25 22:03:06 -0400] stormerider: *nod* likewise
[2013-04-25 22:04:00 -0400] stormerider: i dont tend to use download personally, though, since im the only ops person... it's always me pushing up, not pulling down :)
[2013-04-25 22:04:44 -0400] stormerider: 10 -> 11 was the only time ive used it before, i believe.
[2013-04-25 22:04:57 -0400] Wynn: yeah, me too
[2013-04-25 22:05:15 -0400] Wynn: im trying to figure out how to make a hot spare for the chef server though
[2013-04-25 22:05:40 -0400] Wynn: that's why I've been needing the knife download to work
[2013-04-25 22:05:56 -0400] Wynn: but now im running into this knife download bug
[2013-04-25 22:06:40 -0400] CharlieSu: Hi.  I'm using a brand new chef-server v.11.0.8 and I'm adding new admin users but once they login to try to change their passwords they're getting 403 when clicking on 'users' or 'edit account'.  Anyone else seeing this?
[2013-04-25 22:19:44 -0400] sfalcon_: CharlieSu: how did you add admin users?
[2013-04-25 22:19:53 -0400] CharlieSu: sfalcon: webui
[2013-04-25 22:20:25 -0400] CharlieSu: sfalcon: also, what is the difference between the client keypairs and user keypairs?  I'm not even sure what the user keypairs are for..
[2013-04-25 22:21:14 -0400] Wynn: stormerider: Do you mind confirming this bug with me?
[2013-04-25 22:21:14 -0400] Wynn: http://tickets.opscode.com/browse/CHEF-4131
[2013-04-25 22:22:32 -0400] sfalcon_: Wynn: can you add versions of client and server to that ticket when you get a chance? And perhaps an example cookbook from community site (or otherwise public) to give a concrete repro case
[2013-04-25 22:23:19 -0400] timsmith: anyone know what's new in chef 10.24.4
[2013-04-25 22:23:20 -0400] timsmith: ?
[2013-04-25 22:23:29 -0400] Wynn: sfalcon_: sure, I will do that now. Thanks
[2013-04-25 22:23:38 -0400] sfalcon_: Wynn: awesome, thanks
[2013-04-25 22:24:56 -0400] CharlieSu: timsmith: notably http://tickets.opscode.com/browse/CHEF-3432
[2013-04-25 22:25:11 -0400] rava: what could possible cause this? https://gist.github.com/ravaa/e68a246b0602c2ad0648
[2013-04-25 22:25:20 -0400] rava: node not having attributes but api saying it does
[2013-04-25 22:25:22 -0400] timsmith: something in that caused the ark cookbook for fail now
[2013-04-25 22:34:00 -0400] ssd7: timsmith: What is the most recent version where it was working?
[2013-04-25 22:34:23 -0400] timsmith: works fine when I revert to 10.24
[2013-04-25 22:34:33 -0400] ssd7: 10.24.0?
[2013-04-25 22:34:36 -0400] timsmith: yep
[2013-04-25 22:34:43 -0400] timsmith: I reverted and my new box ran fine
[2013-04-25 22:34:54 -0400] timsmith: my bootstrap script was just set to install a version less than 11
[2013-04-25 22:34:58 -0400] ssd7: So the big change that might affect it is the fix for the memory leak related to LWRPs
[2013-04-25 22:35:11 -0400] ssd7: Is the error a NameError about a missing constant?
[2013-04-25 22:35:18 -0400] timsmith: let me pull the error
[2013-04-25 22:36:37 -0400] timsmith: https://gist.github.com/tas50/5463801
[2013-04-25 22:37:23 -0400] CharlieSu: sfalcon_: any ideas on the 403's?
[2013-04-25 22:37:43 -0400] ssd7: timsmith: Ahh, I see. one sec. I think dan might have just fixed this.
[2013-04-25 22:38:20 -0400] ssd7: CHEF-4123
[2013-04-25 22:39:36 -0400] ssd7: Should work on the 10.26 beta I believe.
[2013-04-25 22:39:41 -0400] miah: log1kal: thanks =)
[2013-04-25 22:40:08 -0400] log1kal: :D
[2013-04-25 22:40:19 -0400] timsmith: so should I expect a 10.24.6 or 10.26?
[2013-04-25 22:40:38 -0400] ssd7: timsmith: I think 10.26 but I'll check.
[2013-04-25 22:42:24 -0400] doomviking: sorry for heckling so much, miah.
[2013-04-25 22:42:35 -0400] doomviking: I'm tarded and missed it.
[2013-04-25 22:43:33 -0400] miah: i was heckled?
[2013-04-25 22:43:39 -0400] ssd7: timsmith: 10.26 is where you can expect the fix.
[2013-04-25 22:43:59 -0400] miah: i think i did a good enough job of making a fool of myself that you didnt have to :P
[2013-04-25 22:44:26 -0400] ssd7: miah: Bah, your talk was good.
[2013-04-25 22:44:40 -0400] doomviking: yeah I was that guy in the back with the big #1 foam hand
[2013-04-25 22:45:17 -0400] miah: =)
[2013-04-25 22:45:34 -0400] miah: i didnt practice it enough, and the fullscreen stuff fubar'd my speakers notes which totally threw me off
[2013-04-25 22:45:47 -0400] miah: but, that was my first 'talk' really. so i learned a bunch and had fun.
[2013-04-25 22:45:53 -0400] doomviking: awesome
[2013-04-25 22:46:16 -0400] miah: ah. i didnt really see anybody since i had to crane my head to see the slides on the display :P
[2013-04-25 22:47:02 -0400] doomviking: word on the street is that you did well
[2013-04-25 22:47:56 -0400] miah: indeed
[2013-04-25 22:48:13 -0400] miah: now i need a coke and or redbull
[2013-04-25 22:48:29 -0400] sfalcon_: CharlieSu: sorry, not really. If you wouldn't mind filing a bug, I'll make sure some follow up happens. Might be interesting to see what you can by starting chef-shell and doing api.get("users") and then api.get("users/$USER") for one of the users you created.
[2013-04-25 22:48:55 -0400] doomviking: you party hard
[2013-04-25 22:51:34 -0400] miah: =)
[2013-04-25 22:54:13 -0400] shthap3ns: does anyone know if 'knife ssh "role:my_role" "some_command" -u USER -a ipaddress' differs in any way from 'ssh USER@ipaddress && some_command'? in the former i keep getting a "command not found" error, while the latter works.
[2013-04-25 22:55:20 -0400] doomviking: I'm the graybeard with the High on Fire hoodie, in case anybody is stalking.
[2013-04-25 22:55:28 -0400] rava: ARGH, chef's refusing to make any sense today :(
[2013-04-25 22:56:52 -0400] zts: shthap3ns: the latter would be running some_command on the machine that you're running ssh from
[2013-04-25 22:57:00 -0400] doomviking: shthap3ns: does the && in your command make sense to you?
[2013-04-25 22:57:06 -0400] zts: shthap3ns: you'd want to try "ssh user@ipaddress some_command"
[2013-04-25 22:57:16 -0400] shthap3ns: sorry, that's what i meant
[2013-04-25 22:57:24 -0400] shthap3ns: it's the former that doesn't work
[2013-04-25 22:58:33 -0400] doomviking: the former should work
[2013-04-25 22:59:16 -0400] shthap3ns: it doesn't though -- only if i ssh into it the command works
[2013-04-25 22:59:37 -0400] zts: shthap3ns: are you sure it's logging into the same server?
[2013-04-25 22:59:39 -0400] shthap3ns: i install RVM in my bootstrap file if that makes a difference
[2013-04-25 22:59:59 -0400] shthap3ns: yeah i'm sure...i only have one node with that role
[2013-04-25 23:00:00 -0400] silk: is the PATH the same?
[2013-04-25 23:00:09 -0400] zts: oh, and also -u is the API user, not the ssh user
[2013-04-25 23:00:17 -0400] shthap3ns: ah
[2013-04-25 23:00:18 -0400] rava: anyone know how i can fix this?
[2013-04-25 23:00:18 -0400] rava: https://gist.github.com/ravaa/a2b6fbf0bbf69b1eeb06
[2013-04-25 23:00:19 -0400] zts: so you probably mean "-x uSER"
[2013-04-25 23:00:19 -0400] silk: -x for ssh users
[2013-04-25 23:00:28 -0400] shthap3ns: oh wait
[2013-04-25 23:00:30 -0400] shthap3ns: i am using -x
[2013-04-25 23:00:34 -0400] shthap3ns: another typo sorry
[2013-04-25 23:00:44 -0400] rava: nvm, it just didn't like the puts
[2013-04-25 23:00:52 -0400] rava: the object returned didn't provide something puts likes
[2013-04-25 23:00:53 -0400] zts: sigh
[2013-04-25 23:01:08 -0400] doomviking: ...
[2013-04-25 23:01:10 -0400] shthap3ns: the funny thing is if i "echo $PATH" in my knife ssh command it returns with my local $PATH
[2013-04-25 23:01:45 -0400] rava: annnddd chef decides to make even less sense now:
[2013-04-25 23:01:46 -0400] rava: https://gist.github.com/ravaa/e509e5d7269a7135fcc9
[2013-04-25 23:01:48 -0400] zts: shthap3ns: that is because it is interpolated on the client side, not on the server
[2013-04-25 23:01:53 -0400] rava: node sees default attributes
[2013-04-25 23:01:57 -0400] rava: api says node doesn't have them
[2013-04-25 23:02:22 -0400] zts: shthap3ns: it's pretty much impossible to suggest what the problem might be, since we can't be sure exactly what commands you're running or what the output actually is - can you please pastebin what you're _actually_ running and seeing?
[2013-04-25 23:02:27 -0400] rava: ditto with the role
[2013-04-25 23:02:32 -0400] rava: W.T.F.
[2013-04-25 23:02:45 -0400] zts: shthap3ns: because in theory, it should work fine
[2013-04-25 23:02:46 -0400] shthap3ns: i'm running "rvmsudo chef-client"
[2013-04-25 23:03:01 -0400] doomviking: oh thats messy
[2013-04-25 23:03:17 -0400] rava: anyone have experience fixing messed up attribute associations and the like?
[2013-04-25 23:03:24 -0400] zts: shthap3ns: right, well see if you'd started with that I could've jumped right to the solution
[2013-04-25 23:03:39 -0400] shthap3ns: zts: sorry :)
[2013-04-25 23:03:47 -0400] zts: shthap3ns: or rather the cause, which is almost certainly that the "knife ssh" varient isn't running in a login shell, and the second one somehow is
[2013-04-25 23:04:20 -0400] doomviking: rvm on servers scares me.
[2013-04-25 23:04:20 -0400] rava: the damn node has the role in it's run_list, but not in the roles attribute
[2013-04-25 23:04:22 -0400] rava: ARGH
[2013-04-25 23:05:21 -0400] zts: rava: in case it's relevant, note that the roles attribute only updates when the chef run completes successfully (so between updating the run_list and finishing a successful run, "roles" and "recipes" may be stale)
[2013-04-25 23:05:40 -0400] rava: zts: that helps, thanks
[2013-04-25 23:05:44 -0400] shthap3ns: yeah that's what i figured,  is there a way to specify a login shell?
[2013-04-25 23:05:45 -0400] rava: one less thing to figure out
[2013-04-25 23:06:23 -0400] rava: default attributes in a role should take precedence over the defaults in a cookbook's attribute files right?
[2013-04-25 23:06:47 -0400] ssd7: rava: Yes
[2013-04-25 23:06:48 -0400] chef_noob: I'm able to change existing attributes for a node using transform, however I get an error when trying to add/set a new attribute here's what i'm trying to do:                                       knife exec -E 'nodes.transform("name:webserver01") {|n| n.set['location'] = ['nyc'] ; n.save }'
[2013-04-25 23:07:34 -0400] rava: i'm so stumped, i can't get this node to pick up the attributes defined in it's role
[2013-04-25 23:08:04 -0400] rava: deleted/reregistered client and node, deleted json version of the role definition and deleted the role from the server, rewrote it dsl and re uploaded it
[2013-04-25 23:08:13 -0400] rava: reassigned to the role, and still no dice
[2013-04-25 23:08:49 -0400] rackCity: doomviking: curious to why rvm scares u on servers.  rvm -- me no likey
[2013-04-25 23:09:08 -0400] silk: rava, I have had touble previously with attributes defined in a role
[2013-04-25 23:09:29 -0400] rava: anyone see a problem with this role definition that could explain it? https://gist.github.com/ravaa/7173429cb438c237d43c
[2013-04-25 23:09:32 -0400] adnichols: rava fwiw I typically use override attributes in roles
[2013-04-25 23:09:42 -0400] doomviking: rackCity: is it system-wide? is it by user? where does chef-client live? is it in a path? what controls it? I run, don't walk :)
[2013-04-25 23:10:20 -0400] shanlar: http://tickets.opscode.com/browse/KNIFE-151
[2013-04-25 23:10:28 -0400] shanlar: really? why is there no new_eip functionality
[2013-04-25 23:10:32 -0400] rackCity: i hear you doomviking, hear hear
[2013-04-25 23:10:51 -0400] shanlar: ridiculous i cant fire up a vpc instance and have it auto bind a new eip to it
[2013-04-25 23:10:54 -0400] doomviking: I see "rvmsudo" and I get the shivers
[2013-04-25 23:11:27 -0400] rackCity: lol
[2013-04-25 23:11:40 -0400] doomviking: now i want whiskey
[2013-04-25 23:12:21 -0400] rackCity: i figured a viking for more of a vodka type drink
[2013-04-25 23:13:02 -0400] rackCity: vodka, clear, like Nordic waters
[2013-04-25 23:15:08 -0400] rava: does the recipes attribute of a node also not get populated until after a successful run?
[2013-04-25 23:15:33 -0400] rava: think i finally fixed it
[2013-04-25 23:15:54 -0400] rava: just rewriting the definition using the dsl, and then using override attributes
[2013-04-25 23:16:21 -0400] rava: or not :?
[2013-04-25 23:16:55 -0400] rava: yah, not fixed, it's still not using the role attributes
[2013-04-25 23:16:59 -0400] rava: but the recipe's not puking
[2013-04-25 23:17:03 -0400] rava: shoot me now
[2013-04-25 23:25:53 -0400] chef_noob: is there a command line way to set a new attribute to a node?
[2013-04-25 23:30:43 -0400] gansbrest: hi. When I create encrypted data bag item with knife the created directly on the server, is there a way to save them to disc as well?
[2013-04-25 23:31:01 -0400] gansbrest: I would like to commit those to the repo since those are encrypted anyways
[2013-04-25 23:32:07 -0400] miah: you can do 'knife data bag show <foo>'
[2013-04-25 23:32:14 -0400] miah: and then just save that output to git or whatever
[2013-04-25 23:32:19 -0400] miah: but be aware that it will be encrypted
[2013-04-25 23:34:28 -0400] gansbrest: thanks, that works
[2013-04-25 23:36:10 -0400] rava: anyone use the nagios cookbook a lot?
[2013-04-25 23:37:14 -0400] rava: need some help figuring out why it's ignoring the node's nagios.host_name_attribute setting
[2013-04-25 23:48:41 -0400] rava: how can this recipe be pulling out a role that i deleted?

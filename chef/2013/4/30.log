[2013-04-30 00:00:41 -0400] raygunsix: maplebed: we solve this by having a line like this in our recipes -> secrets = Chef::Config[:solo] ? data_bag_item("fake_secrets", "item") : Chef::EncryptedDataBagItem.load('secrets', 'item')
[2013-04-30 00:01:12 -0400] raygunsix: not sure if there's a better way
[2013-04-30 00:01:28 -0400] maplebed: that looks like it'll work to me.  <3 ternary operators.
[2013-04-30 00:01:36 -0400] maplebed: thanks.
[2013-04-30 00:01:46 -0400] raygunsix: no problem!
[2013-04-30 00:01:49 -0400] log1kal: raygunsix: we pass a specific node attr in for our dev environments. Helps in case we ever actually want to switch to solo
[2013-04-30 00:02:07 -0400] log1kal: (and not use fake_secrets)
[2013-04-30 00:03:13 -0400] maplebed: log1kal: so it becomes secrets = node['amdev'] ? foo : bar instead of testing against chef['solo']?
[2013-04-30 00:03:19 -0400] log1kal: yeah
[2013-04-30 00:03:33 -0400] raygunsix: interesting
[2013-04-30 00:04:00 -0400] log1kal: we were seriously considering moving to solo, and didn't want to have to depend on solo == dev
[2013-04-30 00:04:30 -0400] raygunsix: we use solo for all dev much faster
[2013-04-30 00:05:13 -0400] josephholsten: raygunsix: until you shoot yourself in the face with some weird dependency issue
[2013-04-30 00:05:17 -0400] log1kal: right, we use solo for dev, but we were also going to use solo for prod
[2013-04-30 00:05:37 -0400] josephholsten: I entirely believe in solo for dev, but I'm so very very very angry right now.
[2013-04-30 00:06:10 -0400] ssd7_: josephholsten: Why so angry?
[2013-04-30 00:06:18 -0400] raygunsix: josephholsten: yeah- solo does add more complexity but we find the tradeoff to be worth it
[2013-04-30 00:07:17 -0400] subsume: how do i propagate my changes back to the server
[2013-04-30 00:07:25 -0400] josephholsten: ssd7_: well friday it was posts to /environments/.../cookbook_versions timing out, today it was https://gist.github.com/josephholsten/33043d5a867a7ee31b68
[2013-04-30 00:08:22 -0400] josephholsten: but I think I've figured out what's wrong. and with that done, I'll finally have one of our apps with a full test-kitchen, vagrant, berkshelf, application cookbook, continuous deploy workflow!
[2013-04-30 00:08:44 -0400] ivey: josephholsten: awesome
[2013-04-30 00:09:34 -0400] josephholsten: so I can feel like a cool kid for five minutes, then get back to real work
[2013-04-30 00:09:56 -0400] raygunsix: nice!
[2013-04-30 00:10:24 -0400] spicy: anyone using vagrant with the chef-client provisioner and encrypted databags? Tried setting the secret key path but the key SCP is failing and giving an error about permissions (not an issue locally, I've tried with chmod 777 on the key)
[2013-04-30 00:12:16 -0400] stormerider: what's the best way to manage SSL certificates for the JVM in chef?
[2013-04-30 00:14:02 -0400] alisdair: is there a wrapper/helper that gets you a user's home directory?
[2013-04-30 00:14:52 -0400] subsume: is there a good doc on deployments that isn't that normal doc on deployments?
[2013-04-30 00:26:08 -0400] josephholsten: it was all just application_ruby requiring runit ~> 1.0 and the client not having a helpful error message
[2013-04-30 00:28:08 -0400] juliancdunn: stormerider: you mean all the keytool crap?
[2013-04-30 00:29:46 -0400] juliancdunn: alisdair: how about just File.expand_path("~login")
[2013-04-30 00:49:04 -0400] mikeylikesit2: is there a way to get the STDOUT of an execute resource? e.g. i am trying to create a directory based on the output of command `svnversion`
[2013-04-30 00:49:10 -0400] mikeylikesit2: from within my chef cookbook
[2013-04-30 00:49:22 -0400] mikeylikesit2: i am expecting it to return a svn revision number like 962
[2013-04-30 00:50:46 -0400] mikeroth: does anyone have a cookbook example of how a resonse_file is used?
[2013-04-30 00:51:16 -0400] juliancdunn: mikeylikesit2: try using mixlib-shellout to handle that - https://github.com/opscode/mixlib-shellout
[2013-04-30 00:51:22 -0400] juliancdunn: it capture stdout for you
[2013-04-30 00:51:30 -0400] juliancdunn: s/capture/captures
[2013-04-30 00:51:31 -0400] stormerider: juliancdunn: found the java-management cookbook, thanks
[2013-04-30 01:31:33 -0400] markxnelson: hello chef people.  I have set up open source chef on a server and a node, I have the webui working, and I can see my node, client, etc. in the webui and in knife list... I have created a simple recipe - just to install a single package (this is my first time using chef) - and I added it to a run_list and a role to my node, and I am trying to deploy it on the node... but when I run chef_client on the node, it is telling me:  FATAL: Net::HTTPServerException
[2013-04-30 01:31:33 -0400] markxnelson: : 405 "Method Not Allowed" - would anyone be able to give me a hint of what to look for to fix this?
[2013-04-30 01:33:47 -0400] juliancdunn: markxnelson: maybe http versus https?
[2013-04-30 01:34:51 -0400] markxnelson: i put --server https://.....    and that seems to work!  thanks!
[2013-04-30 01:34:54 -0400] bluekelp: mikeylikesit2: sounds more like a shell script (parsing output and acting accordingly) than chef recipe
[2013-04-30 01:35:12 -0400] juliancdunn: markxnelson: you can also change it in /etc/chef/client.rb on the node
[2013-04-30 01:36:50 -0400] markxnelson: when i did knife bootstrap on the node, would it not have set it in the node's knife.rb for me?
[2013-04-30 01:37:22 -0400] juliancdunn: that's what I mean, I think there's a bug somewhere, but god forbid I can find it in our HipChat
[2013-04-30 01:37:32 -0400] juliancdunn: also, the bootstrap writes out client.rb... the knife.rb is just for your workstation
[2013-04-30 01:38:04 -0400] markxnelson: ah ok
[2013-04-30 01:38:08 -0400] markxnelson: i got it
[2013-04-30 01:38:48 -0400] markxnelson: ok, i am doing "knife ssh -m worker1 -x user -P pwd "chef-client --server https://server" on my workstation - and it seems to do the right thing... thanks!
[2013-04-30 01:41:16 -0400] juliancdunn: np
[2013-04-30 01:47:09 -0400] alisdair: can i use a value from attributes/default.rb in a lwrp?
[2013-04-30 01:47:29 -0400] alisdair: referencing it by 'node['foo']['bar']' doesn't seem to work
[2013-04-30 01:55:35 -0400] waiterjames: when  I  execute  chef-solo
[2013-04-30 01:55:53 -0400] waiterjames: cannot load such file -- mysql
[2013-04-30 01:56:00 -0400] waiterjames: this error  for  what?
[2013-04-30 01:56:15 -0400] waiterjames: Error executing action `create` on resource 'mysql_database[phpapp]'
[2013-04-30 01:59:01 -0400] juliancdunn: waiterjames: you need the mysql gem first
[2013-04-30 01:59:03 -0400] juliancdunn: read this: https://github.com/opscode-cookbooks/database#resourcesproviders
[2013-04-30 01:59:32 -0400] waiterjames: Really  appreciate~!
[2013-04-30 01:59:59 -0400] juliancdunn: alisdair: I've never had a problem like that
[2013-04-30 02:00:33 -0400] alisdair: i'm trying to use it in resources/foo.rb
[2013-04-30 02:00:47 -0400] alisdair: but it results in an error
[2013-04-30 02:01:02 -0400] jtimberman: alisdair: at the tiem the resources files are loaded, the attributes may not be available yet.
[2013-04-30 02:01:23 -0400] juliancdunn: alisdair: you can use them in your provider though
[2013-04-30 02:01:31 -0400] alisdair: jtimberman: ok, that's what i figured
[2013-04-30 02:01:39 -0400] alisdair: juliancdunn: ok, thanks!
[2013-04-30 02:05:21 -0400] waiterjames: how can I   mysql gem???
[2013-04-30 02:05:24 -0400] waiterjames: claer
[2013-04-30 02:05:30 -0400] waiterjames:  how can I   mysql gem???
[2013-04-30 02:52:25 -0400] waiterjames: FATAL: LoadError: mysql_database[phpapp] (phpapp::default line 24) had an error: LoadError: cannot load such file -- mysql
[2013-04-30 02:52:36 -0400] waiterjames: how  can I solve this problem ?
[2013-04-30 02:53:39 -0400] markxnelson: hi everyone - I have got a recipe that installs some software, by putting a file on the node and unzipping it to a particular location, now I need to update the .bash_profile to change the PATH - how can I do that?  I dont want to just replace it, I want to add to it...
[2013-04-30 02:55:40 -0400] wedtm: Is there any progmatic way of running chef-client on all/some nodes on-demand?
[2013-04-30 02:56:17 -0400] markxnelson: i am using knife ssh -m node1,node2,node3 "chef-client --server https://myserver" to do that
[2013-04-30 02:56:27 -0400] markxnelson: you can replace the list with a query
[2013-04-30 02:56:28 -0400] wedtm: ah
[2013-04-30 02:56:29 -0400] wedtm: Nice
[2013-04-30 02:56:33 -0400] wedtm: Thank you
[2013-04-30 02:56:36 -0400] markxnelson: yw
[2013-04-30 02:56:51 -0400] jtimberman: knife ssh "role:webserver" "sudo chef-client"
[2013-04-30 02:57:01 -0400] jtimberman: where role:webserver is a standard chef search query.
[2013-04-30 02:57:19 -0400] wedtm: markxnelson: You're trying to update the PATH in your .bash_profile?
[2013-04-30 02:57:23 -0400] markxnelson: yes
[2013-04-30 02:57:25 -0400] wedtm: jtimberman: thanks
[2013-04-30 02:57:34 -0400] wedtm: markxnelson: Is it templated already?
[2013-04-30 02:57:47 -0400] markxnelson: no, i have not touched it yet
[2013-04-30 02:57:53 -0400] markxnelson: it is just the one that came with linux
[2013-04-30 02:58:17 -0400] wedtm: I would use the template resource, just define it exactly the way you want it, chef will ensure it's synced.
[2013-04-30 02:58:27 -0400] wedtm: But that seems too easy, so I may be misunderstanding what your asking
[2013-04-30 02:58:37 -0400] markxnelson: ok i will check that out, thanks
[2013-04-30 02:58:53 -0400] markxnelson: i was wondering if there is a way to *update* a file - without having to replace the whole file..
[2013-04-30 02:59:03 -0400] wedtm: Ah
[2013-04-30 02:59:10 -0400] wedtm: You could slap it in GIT :)
[2013-04-30 02:59:30 -0400] markxnelson: i think a template is ok for what i am doing now anyway
[2013-04-30 02:59:45 -0400] markxnelson: i suppose i could write a script and use execute if i needed something more complex
[2013-04-30 03:03:58 -0400] wedtm: is it possible to run a specific recipe with knife?
[2013-04-30 03:04:31 -0400] wedtm: instead of running the entire suite, can I just ad-hoc call a recipe on a node?
[2013-04-30 03:05:01 -0400] spox: you can using -o with chef-client, but you need to be sure you understand fully the implications of what that will do
[2013-04-30 03:05:17 -0400] wedtm: I just want to re-compile ruby, it failed
[2013-04-30 03:05:25 -0400] wedtm: I just don't want all the other junk to run
[2013-04-30 03:05:35 -0400] spox: especially with respect to attribute overrides that may be defined elsewhere (like roles)
[2013-04-30 03:05:38 -0400] wedtm: I'm using ruby_build
[2013-04-30 03:05:43 -0400] wedtm: Ah
[2013-04-30 03:05:44 -0400] wedtm: gotcha
[2013-04-30 03:05:53 -0400] spox: wedtm: well, if things are idempotent, other things shouldn't be "running"
[2013-04-30 03:06:09 -0400] wedtm: They are failing as well, because ruby isn't installed properly yet
[2013-04-30 03:06:28 -0400] wedtm: so as I debug and work through it, I don't want to have them keep running and generating useless logs and alerts.
[2013-04-30 03:09:24 -0400] wedtm: How do I just ssh without a command? It seems to just close the connection if I leave it blanks
[2013-04-30 03:15:16 -0400] markxnelson: is there a limit on the size of file that I can include in a cookbook?
[2013-04-30 03:15:51 -0400] jtimberman: wedtm: you can use tmux or screen as the command and it will open tmux or screen with windows to each system.
[2013-04-30 03:15:54 -0400] jtimberman: markxnelson: no
[2013-04-30 03:15:58 -0400] jtimberman: markxnelson: but... be reasonable :)
[2013-04-30 03:16:47 -0400] markxnelson: so I have a zip file that is about 2gb, that I want to send to a node, then use execute to install it.. should I make it a file in my cookbook, or shoudl i just use another execute to scp it from a file server?
[2013-04-30 03:17:02 -0400] markxnelson: when I add it to the cookbook and try to upload, I get a broken pipe after a while..
[2013-04-30 03:18:24 -0400] whack: markxnelson: you could host it elsewhere and use remote_file  probably?
[2013-04-30 03:18:58 -0400] whack: markxnelson: no idea regarding the failed upload though; I've never tried uploading a cookbook with a 2gb file ;)
[2013-04-30 03:18:59 -0400] markxnelson: ok let me check that out thanks
[2013-04-30 03:20:42 -0400] jtimberman: markxnelson: what is your chef server?
[2013-04-30 03:21:39 -0400] markxnelson: it is linuxmint 14 (debian/ubuntu)
[2013-04-30 03:21:47 -0400] markxnelson: 64bit and etx4
[2013-04-30 03:21:50 -0400] jtimberman: open source?
[2013-04-30 03:21:55 -0400] markxnelson: yep
[2013-04-30 03:22:16 -0400] jtimberman: you should totally not put 2g files in cookbooks :)
[2013-04-30 03:22:27 -0400] jtimberman: especially if you check them into a source control system.
[2013-04-30 03:31:16 -0400] Guest11311: hello can anyone help out with a postgresql chef-run question?
[2013-04-30 03:32:53 -0400] spox: Guest11311: please just ask. if someone can help they will :)
[2013-04-30 03:33:14 -0400] Guest11311: @spox ah okay..
[2013-04-30 03:36:27 -0400] Guest11311: i can provide further specifics... but i am using the opscode postgresql cookbook wrapped within another cookbook that adds the apt_repo to install 9.2.# to ubuntu 10.4 -- the wrapper adds conf files via templates but i noticed postgres restarts the service everytime killing all connections and not allowing any connections again unless i manually restart - clearly i missed something in the conf files but not clear what...does anyone have idea on what it could
[2013-04-30 03:37:32 -0400] spox: are the conf files the pg configurations?
[2013-04-30 03:37:49 -0400] |rt|: when using a seperate git repo for each cookbook where should databags used by the cookbook go?
[2013-04-30 03:37:56 -0400] Guest11311: @spox yes
[2013-04-30 03:38:09 -0400] Guest11311: both postgres.conf and pg_hba.conf
[2013-04-30 03:38:36 -0400] spox: Guest11311: the pg cookbook will write those files. if you are writing them in a wrapper cookbook, then on every chef run, the pg cookbook will write changes, then your cookbook will write changes
[2013-04-30 03:38:39 -0400] cactus_0: is rpm_package know to be broken in chef solo 11.4.0?
[2013-04-30 03:38:45 -0400] cactus_0: *known
[2013-04-30 03:38:51 -0400] spox: since this means that the file changes every run, it will always trigger a restart to the service
[2013-04-30 03:39:33 -0400] spox: |rt|: generally a 'chef-repo' style repository that holds everything else, roles, environments, data bags, etc
[2013-04-30 03:39:37 -0400] vaskas: hey guys, do you know of any third party implementations of the community website api?
[2013-04-30 03:40:02 -0400] Guest11311: @spox -- can this be prevented by then just setting attrs in my wrapper?
[2013-04-30 03:40:14 -0400] |rt|: spox: yeah I was thinking that I'd set one up for databags but I like your idea better
[2013-04-30 03:40:16 -0400] markxnelson: looks like you can :)
[2013-04-30 03:40:31 -0400] spox: Guest11311: better question might be why you are not using the pg cookbook to configure your files
[2013-04-30 03:40:39 -0400] |rt|: spox: any suggestions on how to best use databags with berkshelf?
[2013-04-30 03:41:10 -0400] spox: |rt|: i generally just use it for handling cookbooks, knife for data bags
[2013-04-30 03:41:28 -0400] spox: if you'd like to just use knife all around, librarian-chef would be what you want
[2013-04-30 03:42:12 -0400] |rt|: spox but if you're using vagrant-berkshelf it uses chef_solo but I don't think it has a databags directory setup by default......hmm I think the lighbulb just went off
[2013-04-30 03:42:33 -0400] |rt|: I should be able to tweak the VagrantFile to include a databags shared folder
[2013-04-30 03:42:44 -0400] spox: yep
[2013-04-30 03:43:03 -0400] |rt|: no one says it has to be in the same directory as the cookbook that I'm trying to use Berkshelf with
[2013-04-30 03:43:09 -0400] Guest11311: @spox -- sorry if this is a stupid question but i don't understand...i tho't best practice was to wrap the community cook and then apply any app specific attrs or configuration settings within my own cook that simply includes the community cook -- did i get that wrong?
[2013-04-30 03:43:22 -0400] |rt|: sometimes you just need to talk things out hehe
[2013-04-30 03:43:25 -0400] |rt|: thanks spox
[2013-04-30 03:43:42 -0400] spox: Guest11311: that's correct in cases where you need to extend or change how an upstream cookbook may behave
[2013-04-30 03:43:55 -0400] spox: but the pg cookbook uses attribute driven configuration for the conf files
[2013-04-30 03:44:09 -0400] spox: so you should be able to apply your confs using attribute overrides
[2013-04-30 03:44:13 -0400] spox: |rt|: sure :)
[2013-04-30 03:45:40 -0400] Guest11311: @spox...gotcha...so just use attribute overrides and ditch the configuration templates because my template is basically just attribute overrides not a custom configuration
[2013-04-30 03:45:56 -0400] spox: Guest11311: yep :)
[2013-04-30 03:46:03 -0400] Guest11311: @spox thanks!
[2013-04-30 04:09:33 -0400] deadlyllama: I've got a shiny new Chef Server that won't let me upload cookbooks -- chef-server-ctl test fails, too
[2013-04-30 04:10:10 -0400] deadlyllama: any pointers on how to track down what's wrong would be appreciated.  sandbox uploads are failing.
[2013-04-30 04:11:01 -0400] spox: deadlyllama: some information around errors you are seeing and what you are doing would be helpful
[2013-04-30 04:11:14 -0400] deadlyllama: so I've got a newly installed Chef Server on CentOS
[2013-04-30 04:11:53 -0400] deadlyllama: when I run chef-server-ctl I get these failed tests: http://pastebin.com/ZvZrruiD
[2013-04-30 04:12:08 -0400] deadlyllama: all I have done with my chef server is change the admin password (and PEM), and create one user
[2013-04-30 04:12:17 -0400] deadlyllama: and try to upload cookbooks with knife, which fails :-(
[2013-04-30 04:13:13 -0400] deadlyllama: the one non-default-config thing I have is a bunch of FQDN and URL overrides in /etc/chef-server/chef-server.rb
[2013-04-30 04:13:34 -0400] spox: why don't you paste that file
[2013-04-30 04:14:23 -0400] deadlyllama: errors + config file: http://pastebin.com/DwgWrZp0
[2013-04-30 04:18:25 -0400] spox: deadlyllama: http://pastebin.com/neK5psWv
[2013-04-30 04:18:32 -0400] spox: updated the contents of that file at the end
[2013-04-30 04:18:40 -0400] spox: use that, do a chef-server-ctl reconfigure
[2013-04-30 04:18:43 -0400] spox: see if that clears it up
[2013-04-30 04:19:42 -0400] deadlyllama: shouldn't the bookshelf vip be a FQDN rather than a URL?
[2013-04-30 04:20:45 -0400] spox: indeed. my bad copying contents out
[2013-04-30 04:21:32 -0400] deadlyllama: test still fails with same errors.
[2013-04-30 04:33:24 -0400] tms: jtimberman: I am using one of your cookbook "sudo" on mac osx. The only question I have is that currently content of /etc/sudores is getting replaced by templates/default/sudoers.erb, is there any way to append /etc/sudoers ?
[2013-04-30 04:39:09 -0400] deadlyllama: spox: my bookshelf data folder has a bunch of files that look like they're from the cookbook uploads
[2013-04-30 04:39:33 -0400] deadlyllama: so wherever the failure is taking place, guess it must be after bookshelf writes those files out
[2013-04-30 04:40:59 -0400] deadlyllama: and erchef has a bunch of error logs with {aws_error,{socket error,{conn_failed,{error,nxdomain}}}}
[2013-04-30 04:41:31 -0400] deadlyllama: theory: something is screwy in the erchef configuration
[2013-04-30 04:48:31 -0400] deadlyllama: fixed.  added chef.01.xero.local to /etc/hosts, now everything is happy.  odd, because that name was in DNS and resolvable on that machine already.
[2013-04-30 04:49:03 -0400] deadlyllama: well, I can upload cookbooks anyway, chef-server-ctl test still has 3 failed tests, down from 4.
[2013-04-30 07:27:59 -0400] mmack: Hey all...
[2013-04-30 07:30:01 -0400] mmack: I have a question: I do an bundle install in a deploy block. And after the deploy block i want to execute a command with a gem that "bundle install" installs.... My problem is that the command fails with an "no such file to load - gemname". If i run vagrant provision another time it all works... How can i "reload" gems between the tasks?
[2013-04-30 07:44:20 -0400] silk: mmack: Gem.clearpaths
[2013-04-30 07:44:31 -0400] silk: Gem.clear_paths
[2013-04-30 07:44:42 -0400] silk: (the second, rather)
[2013-04-30 07:45:25 -0400] silk: followed by the require statement
[2013-04-30 07:50:52 -0400] mmack: ok thx
[2013-04-30 07:56:01 -0400] silk: https://gist.github.com/anonymous/5487248
[2013-04-30 08:20:35 -0400] kernel_panick: Hi guys! I have a problem w/ Ark =>  undefined method `attribute' for Chef::Resource::Ark:Class..  do u know the best practice in this case? use the last version of Ark?
[2013-04-30 08:23:15 -0400] s2r2: kernel_panick: using the latest from github (e.g. using berkshelf) does work
[2013-04-30 08:23:49 -0400] kernel_panick: but In some server I am still using the version 10.24.0 of chef, is not a problem?
[2013-04-30 08:39:59 -0400] pellis: hello
[2013-04-30 08:40:37 -0400] pellis: i'm looking to reassure myself regarding a directory layout for my entire servers infra with chef
[2013-04-30 08:41:18 -0400] pellis: from experience, it looks like the old opscode layout doesn't quite cut it, looking at chef antipatterns that are out there
[2013-04-30 08:42:02 -0400] pellis: for example, I have 2 "redis" cookbooks, they're completely different, one is opscode and one is another guy's cookbook, and they conflict
[2013-04-30 08:42:51 -0400] pellis: I'm now thinking of creating 'archetypes' for machines, for example 'appserver' and 'database-server'. an archetype would be a server with a collection of roles if need be
[2013-04-30 08:43:17 -0400] pellis: within each I would lay out the entire opscode repo layout (cookbooks, roles, etc)
[2013-04-30 08:43:25 -0400] pellis: anyone bumping into this?
[2013-04-30 08:56:06 -0400] zts: pellis: I'd personally work on having a single redis cookbook, instead of duplicating everything else
[2013-04-30 08:56:42 -0400] pellis: zts: but this is not even me. the redis cookbook is required by two different cookbooks, each wants its own one
[2013-04-30 08:57:04 -0400] pellis: zts: but I am trying to define to myself the problem in a better way
[2013-04-30 08:57:44 -0400] pellis: zts: I think what is obvious - I gave up copying or using git-submodule to put other people's cookbooks inside /cookbooks. I'm using either Berkshelf or librarian-chef
[2013-04-30 08:58:17 -0400] pellis: but now - this means I have a single Berksfile/Cheffile for the entire infrastructure ?
[2013-04-30 08:58:56 -0400] zts: pellis: sure, but that's the sort of thing I'd be fixing in my environment - either updating one cookbook to be happy with the other dependency, or otherwise solving the problem in a different way
[2013-04-30 08:59:16 -0400] zts: pellis: I'll grant that duplicating your Chef infrastructure counts as a way of solving the problem, it's just not one that I'd adopt :)
[2013-04-30 08:59:48 -0400] pellis: I understand
[2013-04-30 09:00:43 -0400] pellis: zts: so you keep a single Berks/Cheffile for the entire thing?
[2013-04-30 09:00:55 -0400] zts: as for Berkshelf, I'll have each cookbook in its own git repository, each with its own Berksfile, and then another Berksfile in my chef-repo repository
[2013-04-30 09:01:25 -0400] pellis: zts: so this makes your /cookbooks folder rather empty?
[2013-04-30 09:01:30 -0400] zts: correct
[2013-04-30 09:02:06 -0400] pellis: zts: and would you populate your Berksfile with every cookbook you know you're using? or do you use wrapper "role" cookbooks (which declare deps) ?
[2013-04-30 09:03:31 -0400] zts: pellis: the Berksfile lists every cookbook I'm directly using, but I leave berkshelf to figure out the dependencies beneath those
[2013-04-30 09:04:25 -0400] zts: pellis: roles or wrapper cookbooks sit alongside that
[2013-04-30 09:05:33 -0400] pellis: i understand, so that's quite similar to what I was doing in my first incarnation just without role cookbooks - I wasn't aware of this pattern
[2013-04-30 09:05:54 -0400] zts: pellis: possibly also worth noting that I generally deploy to client/server (just use solo for testing), so there might be other/better solutions in that environment
[2013-04-30 09:06:44 -0400] zts: pellis: bear in mind that roles or 'role cookbooks' just influence what cookbooks chef will load for a run - Berkshelf influences what cookbooks are available to be loaded
[2013-04-30 09:06:47 -0400] pellis: I must admit maintaining the one big Berkfile felt a bit dirty. It would become clear when I started dividing it into sections with comments like "this is for the statsd stack", and "this is for the mongodb stack" etc.
[2013-04-30 09:08:09 -0400] mancdaz: does anyone here use chef-rewind?
[2013-04-30 09:08:09 -0400] pellis: zts: are you also facing such a big Berksfile? some how it feels that I'm massaging this file all the time for each role I'm using
[2013-04-30 09:08:16 -0400] zts: one thing I'll note, I believe the Berkshelf docs (and intended use case) are all about using it inside your cookbook repo's, rather than your chef repo.
[2013-04-30 09:08:35 -0400] zts: I'm not sure whether that means that Riot address that problem in a different way, or just don't need to in their environment
[2013-04-30 09:08:58 -0400] zts: eg, if you've got CI updating your chef server with cookbooks as they're checked in, perhaps you can just assume that the chef server contains everything it needs to
[2013-04-30 09:09:03 -0400] pellis: zts: yes, I agree. I haven't found yet "real world" chef repo layout suggestions other than the opscode one - which doesn't really take into considerations things like berkshelf or librarian, and the newer patterns that emerged
[2013-04-30 09:09:42 -0400] pellis: zts: that approach is interesting, actually.
[2013-04-30 09:09:43 -0400] zts: pellis: if you haven't seen it, you might want to read jtimberman's' post on the subject: http://jtimberman.housepub.org/blog/2012/11/19/chef-repository-berkshelf-conversion/
[2013-04-30 09:10:16 -0400] pellis: zts: I haven't, looks very useful, thanks :)
[2013-04-30 09:11:20 -0400] pellis: zts: I better go try resolving the redis cookbook conflict before I continue the discussion, perhaps that is the major problem I'm facing
[2013-04-30 09:11:26 -0400] pellis: zts: thanks for the advice so far :)
[2013-04-30 09:12:02 -0400] zts: pellis: no problem, I'm not sure there's a single right answer to some of these questions, so it's fair to talk about it and feel your way forward
[2013-04-30 09:12:18 -0400] mosez: does the ubuntu chef server package work on debian wheezy too?
[2013-04-30 09:12:33 -0400] pbjorklund: I have a gem that I need to build from a github repo and get into the gems of my deploy user (under rbenv). Any tips on how to approach the problem?
[2013-04-30 09:12:34 -0400] zts: pellis: the redis case in particular is an example of a problem that doesn't currently have a good solution, in my opinion
[2013-04-30 10:54:05 -0400] pellis: what happens if I already have servers in production under role names, lets say 'appserv' and now I want to start tidying up and rename roles to 'projectname-appserv' for example?
[2013-04-30 11:00:08 -0400] PierreO: For those interested, I did a little guide to install OSS Chef 11 : https://coderwall.com/p/u6j6mq?i=1&p=1&q=&t%5B%5D=%21%21mine&t%5B%5D=%21%21bookmarks
[2013-04-30 11:00:12 -0400] PierreO: On debian
[2013-04-30 11:18:52 -0400] mosez: PierreO: is the experimentell package required on wheezy too?
[2013-04-30 11:19:43 -0400] maruq: hi guys
[2013-04-30 11:20:05 -0400] maruq: is there a quick knife plugin to give you a dependency tree of a role?
[2013-04-30 11:20:22 -0400] maruq: or some other method
[2013-04-30 11:20:38 -0400] PierreO: mosez : Yes, I tried with just the version of testing (wheezy) of libc6 but it didn't work
[2013-04-30 11:20:57 -0400] maruq: transitioning stuff from a chef-server to a chef-solo, and keep hitting the next cookbook in the chain
[2013-04-30 11:22:00 -0400] mosez: PierreO: ok... that does jtimberman not say yesterday :)
[2013-04-30 11:24:26 -0400] |rt|: maruq: berkshelf will auto fetch dependancies, if they are community cookbooks, some configuration of where to fetch things otherwise
[2013-04-30 11:25:08 -0400] jhotta: is there any docs for all ohai  item inventory list,  other than http://docs.opscode.com/ohai_automatic_attributes.html?
[2013-04-30 11:25:23 -0400] maruq: |rt|, I was using librarian-chef for my chef-server setup, but whoever coded this chef-solo implementation has done something funky
[2013-04-30 11:25:59 -0400] maruq: I want to try and grab a list of dependencies, so I can copy them to where this chef-solo needs them
[2013-04-30 11:28:46 -0400] |rt|: could do something like this I suppose in your cookbooks directory "for x in `find -name metadata.rb` do; grep depends $x; done"
[2013-04-30 11:29:25 -0400] |rt|: may need a .. there after the find and before the -name
[2013-04-30 11:29:30 -0400] |rt|: er a ./
[2013-04-30 11:29:37 -0400] |rt|: guess I should run it to check my syntax
[2013-04-30 11:30:55 -0400] |rt|: or x in `find ./ -name metadata.rb`; do grep depends $x; done
[2013-04-30 11:31:13 -0400] |rt|: missed the f in my cust and paste but that works
[2013-04-30 11:32:24 -0400] maruq: |rt|, yeah, that kind of thing, but I was after a recursive.
[2013-04-30 11:32:33 -0400] maruq: it's okay. I think I'm nearly there
[2013-04-30 11:32:48 -0400] |rt|: yeah that will only get the dependancies on what's in your cookbooks folder
[2013-04-30 11:32:58 -0400] |rt|: you would then have to pull in any dependancies and run it again
[2013-04-30 11:51:03 -0400] cburroughs: If I need to ensure a directory exists in a loop, and it's usually the same directory - what's the right way to avoid a lot of http://tickets.opscode.com/browse/CHEF-3694 messages?
[2013-04-30 11:51:43 -0400] cburroughs: Is there a way to check of a resource of the same name/type already exist?
[2013-04-30 12:29:08 -0400] mancdaz: Hi - anyone use the chef-rewind gem to edit already-declared resources?
[2013-04-30 12:29:30 -0400] mancdaz: just wondering if that is a sane way to patch the community cookbooks where resources are cloned
[2013-04-30 12:29:40 -0400] mancdaz: or if there is some larger 'fix' for that issue coming
[2013-04-30 12:32:12 -0400] gheegh: hey all.. i'm trying to set a few global environmental variables that would be picked upon subsequent shell launches.. by any upstart config
[2013-04-30 12:32:37 -0400] gheegh: i'm using magic_shell, but it doesn't seem to be picking up the environmental variables
[2013-04-30 12:34:18 -0400] gheegh: any thoughts on the best way to do this?
[2013-04-30 13:28:22 -0400] cburroughs: Is there a way to have a recipe run multiple times? in a single run list?
[2013-04-30 13:29:57 -0400] cburroughs: Right now the I have role base [create special user, drop ssh keys]  and role some-app [create app user, drop ssh keys].  But the ssh key recipie only runs the first time (when the app user does not yet exist)
[2013-04-30 13:31:37 -0400] adamjk-dev: generic question about services.... I am editing a template file (an init script for a service), and then enabling/starting that service.... how do people normally handle this?
[2013-04-30 13:31:57 -0400] adamjk-dev: I would think one would want to add a restart notifier from the template editing resource on the service
[2013-04-30 13:32:05 -0400] adamjk-dev: but then, you get an enable, a start, and a restart
[2013-04-30 13:32:10 -0400] adamjk-dev: right in a row for the service
[2013-04-30 13:42:47 -0400] kechagia: I'm still reluctant in using omnibus for setting up my new nodes. But apparently the apt repositories are abandoned. How can I keep the chef-dpkgs updated on the chef-clients when using omnibus?
[2013-04-30 13:45:11 -0400] gchristensen: kechagia: omnibus installs a dot-deb file, try inspecting the install shell script.
[2013-04-30 13:45:35 -0400] kechagia: I know. The question is, how can I keep it updated, as there's not repo anymore.
[2013-04-30 13:47:31 -0400] gchristensen: I see. I have a small enough infrastructure atm that I'm doing it manually by re-running the omnibus installer.
[2013-04-30 13:47:39 -0400] gchristensen: IIRC there is a cookbook to handle that.
[2013-04-30 13:50:01 -0400] kechagia: I'm a little sad, that the repos are abandoned. This is the way it's supposed to be :/
[2013-04-30 14:04:57 -0400] queso: Can you specify a cookbook version in a node's run list?
[2013-04-30 14:05:08 -0400] spox: queso: you can
[2013-04-30 14:05:35 -0400] spox: queso: http://docs.opscode.com/essentials_cookbook_versions.html#run-lists
[2013-04-30 14:05:42 -0400] queso: spox: Thank yoU!
[2013-04-30 14:14:48 -0400] cburroughs: I'm having trouble avoiding a cfengine like multi-run situation with creating users, and a cookbook that does some standard stuff for all users.  Is there a way to either have  recipe run multiple times, or force it to the end of the runlist (it's included in multiple roles)
[2013-04-30 14:19:09 -0400] Caez: hello, i have a problem with chef 11. I have to push in an attribute a new value, but i have  an error : Node attributes are read-only when you do not specify. My code is : node[:authorization].push("command"). Have you got a solution ( I can't use node.set[:authorization].push( , i have an error )
[2013-04-30 14:23:16 -0400] pellis: a question i just put on #sensu but is better here
[2013-04-30 14:23:45 -0400] pellis: why isn't people and organizations name thier cookbooks myname_cookbook and orgname_cookbook to create a poor mans' namespace?
[2013-04-30 14:24:38 -0400] gleam: they do
[2013-04-30 14:24:40 -0400] gleam: typically
[2013-04-30 14:26:18 -0400] pellis: just as an example trial, I have a Cheffile with 20 cookbook deps
[2013-04-30 14:26:23 -0400] pellis: none of them include a prefix
[2013-04-30 14:26:38 -0400] pellis: I don't think I ever bumped into one either
[2013-04-30 14:27:33 -0400] pellis: googling "chef cookbook namespacing" brings up nothing, which indicates there's no problem
[2013-04-30 14:27:42 -0400] gleam: i mean, people do it for their in-house cookbooks
[2013-04-30 14:28:00 -0400] gleam: orgname_apache2 as a wrapper for apache2
[2013-04-30 14:28:11 -0400] pellis: but you and I (and probably everyone that had more than a couple months with Chef) know that there's a problem of name collisions, which is solvable with a dangerious versioning constraints
[2013-04-30 14:28:41 -0400] pellis: well i'm kind of talking about 'library' cookbooks
[2013-04-30 14:29:52 -0400] cburroughs: http://tickets.opscode.com/browse/CHEF-1406 looked promising, but I have not managed to get it to work
[2013-04-30 14:34:30 -0400] geekbri: yfeldblum: Any idea why librarian chef is tossing me a "`block in tsort_each': topological sort failed: ["gcs", "sphinx"] (TSort::Cyclic)".  I mean I assume it means I have a cookbook that depends on a cookbook that also depends on it?
[2013-04-30 14:35:38 -0400] yfeldblum: geekbri, yeah that would be a cyclic dependency
[2013-04-30 14:36:04 -0400] geekbri: Thanks.  I'll sort that out
[2013-04-30 14:36:28 -0400] yfeldblum: geekbri, i probably should have the resolver check for those during the resolution process
[2013-04-30 14:37:00 -0400] cburroughs: https://wiki.opscode.com/pages/viewpage.action?pageId=27164715 seems to indicate that work aroun might not work in chef11 :-(
[2013-04-30 14:37:09 -0400] yfeldblum: geekbri, but it is a tricky algorithm
[2013-04-30 14:37:41 -0400] geekbri: yfeldblum: Yeah.  It would be nice if librarian had different verbosity levels.  sometimes when I'm trying to determine conflicts and stuff it can be hard to sort it out with all the git logging information as well
[2013-04-30 14:37:55 -0400] yfeldblum: geekbri, true
[2013-04-30 14:38:11 -0400] geekbri: I'd try to hack it up and send a pull request, but I just have no time :(
[2013-04-30 14:38:17 -0400] yfeldblum: geekbri, :D
[2013-04-30 14:41:05 -0400] aruntomar: anybody using chefspec, seems to be broken at the moment on ruby 2.0.0
[2013-04-30 14:41:58 -0400] juliancdunn: aruntomar: I think Chef is broken on Ruby 2.0.0
[2013-04-30 14:44:07 -0400] aruntomar: juliancdunn: k, i've not chef on 2.0.0, have been using omnibus, which is packaged with 1.9.3
[2013-04-30 14:45:05 -0400] vaskas: yfeldblum nice to catch you here! I discovered this github issue yesterday: https://github.com/applicationsonline/librarian/issues/73 - is it something that you are still going to implement?
[2013-04-30 14:46:23 -0400] yfeldblum: vaskas, yes, though i'd welcome PRs too
[2013-04-30 14:50:21 -0400] vaskas: yfeldblum the whole issue sounds a bit Berkshelf'y, especially items 2 and 3. IMHO, this is something beyond the scope of a dependency manager. Also, the whole idea of presenting cookbooks as gems worries me
[2013-04-30 14:51:20 -0400] yfeldblum: vaskas, Berkshelf is a bit Librariany
[2013-04-30 14:51:56 -0400] vaskas: yfeldblum it is
[2013-04-30 14:52:13 -0400] yfeldblum: vaskas, this is something Bundler does, and Librarian is designed with similar principles as Bundler's
[2013-04-30 14:52:26 -0400] vaskas: yfeldblum though i would say it's Rubygems'y while librarian reminds me of npm in a very good way
[2013-04-30 14:54:13 -0400] vaskas: yfeldblum I love the idea of having project cookbooks alongside site-cookbooks
[2013-04-30 14:55:24 -0400] yfeldblum: vaskas, at any rate the first item on the list is the only core item
[2013-04-30 14:55:56 -0400] yfeldblum: vaskas, making a new cookbook is surprisingly ... unhard ... with a single-line metadata.rb and an empty recipes/default.rb
[2013-04-30 14:57:45 -0400] vaskas: yfeldblum what do you think about the gemspec vs Gemfile issue? My problem with both librarian and berkshelf is that dependencies of dependencies can only be retrieved from the community website and not git or github
[2013-04-30 14:58:43 -0400] yfeldblum: vaskas, gemspec & metadata rightfully declare dependencies by name, which is an abstraction from declaring dependencies by direct reference to the source
[2013-04-30 14:59:24 -0400] yfeldblum: vaskas, you can declare an alternate default source in Gemfile or Cheffile from which transitive dependencies will be fetched
[2013-04-30 14:59:52 -0400] yfeldblum: vaskas, but, rightfully, that alternate default source should have the character of a package repository
[2013-04-30 15:00:45 -0400] yfeldblum: vaskas, e.g. you run your own copy of gemcutter to replace rubygems.org, and you can probably figure out how to generate an apache2/nginx static site to serve an alternative to the opscode community site
[2013-04-30 15:01:07 -0400] vaskas: yfeldblum alternate default source would only work for the first level of dependencies
[2013-04-30 15:01:29 -0400] vaskas: yfeldblum why do you think it should have a character of a package repository?
[2013-04-30 15:01:31 -0400] yfeldblum: vaskas, it works for all levels
[2013-04-30 15:02:32 -0400] yfeldblum: vaskas, because fundamentally this is about fetching production releases of third-party packaged ... and, on a case-by-case basis, substituting unreleased straight-from-git packages, but not as a policy
[2013-04-30 15:03:54 -0400] mosez: have somebody tried to install chef server on debian wheezy?
[2013-04-30 15:04:00 -0400] yfeldblum: vaskas, i'd be open to using git/github sort of as a package repository, in a sense, with tags in the /^v[\d.]+$/ format interpreted as releases
[2013-04-30 15:04:51 -0400] mosez: i'm getting this error while chef-server-ctl reconfigure http://pastie.org/7743363
[2013-04-30 15:04:55 -0400] yfeldblum: mosez, but the problem is that there's no dependencies metadata; a good package repository will provide the dependencies metadata as an API
[2013-04-30 15:04:58 -0400] vaskas: yfeldblum yes, yes, yes. That's what I'm thinking about. Git is powerful enough to handle production / development separation.
[2013-04-30 15:05:20 -0400] yfeldblum: vaskas, not that opscode provides it either
[2013-04-30 15:05:38 -0400] yfeldblum: vaskas, but they could, and git tags cannot
[2013-04-30 15:06:04 -0400] yfeldblum: vaskas, anyway that's a downside that we're already working around anyway, not a new downside
[2013-04-30 15:06:13 -0400] mosez: yfeldblum: that was for me? oO
[2013-04-30 15:06:26 -0400] yfeldblum: mosez, no
[2013-04-30 15:06:32 -0400] mosez: yfeldblum: ok
[2013-04-30 15:06:50 -0400] vaskas: yfeldblum sorry, what sort of dependencies metadata do you mean?
[2013-04-30 15:07:00 -0400] mosez: jtimberman: are you there? do you know how to solve the problem on debian wheezy?
[2013-04-30 15:08:38 -0400] yfeldblum: vaskas, like this: http://guides.rubygems.org/rubygems-org-api/#misc
[2013-04-30 15:09:15 -0400] yfeldblum: vaskas, of course the Marshal format in that example is a terribad choice
[2013-04-30 15:09:32 -0400] vaskas: yfeldblum yeah, they would have to be fetched from the repo
[2013-04-30 15:09:40 -0400] vaskas: yfeldblum also, private git/hub repositories are a perfect fit for corporate cookbooks which can't be uploaded in public.
[2013-04-30 15:10:22 -0400] vaskas: yfeldblum there's the same issue with ruby gems. The only solution is, as you mentioned, to fake rubygems.org or community.opscode.com
[2013-04-30 15:10:32 -0400] yfeldblum: vaskas, there needs to be an open-source app with the same API as the community cookbooks API, or a "static-site generator" which can generate a static site for apache2/nginx which effectively has the same API
[2013-04-30 15:10:44 -0400] yfeldblum: vaskas, but that's just called release engineering
[2013-04-30 15:11:16 -0400] yfeldblum: vaskas, many people build their own private packages and host them in a private packages repository, which all their servers add to the list of package sources
[2013-04-30 15:11:51 -0400] queso: How can I tell which cookbooks versions are frozen on the chef server?
[2013-04-30 15:12:54 -0400] yfeldblum: vaskas, a dependencies API would make Librarian-Chef much much faster and would allow Berkshelf to perform resolutions over the whole graph
[2013-04-30 15:13:35 -0400] yfeldblum: vaskas, RiotGames is considering building one in front of the Opscode Community Site
[2013-04-30 15:14:17 -0400] vaskas: yfeldblum yeah, good point on the private repo. Still, this issue wouldn't exist if there wasn't a semantic separation between Gemfile and gemspec dependencies
[2013-04-30 15:14:40 -0400] vaskas: yfeldblum e.g. npm makes no difference between the two
[2013-04-30 15:15:40 -0400] mosez: ok, that sucks... updated to wheezy and nothing works with chef server :(((
[2013-04-30 15:15:46 -0400] vaskas: yfeldblum I just feel that we're complicating the problem even further instead of addressing its root ;(
[2013-04-30 15:15:52 -0400] mosez: i think i've got to stick with ubuntu :(
[2013-04-30 15:16:40 -0400] gleam: i run chef server on wheezy
[2013-04-30 15:17:09 -0400] mosez: gleam: and no problems with https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.8-1.ubuntu.12.04_amd64.deb?
[2013-04-30 15:17:20 -0400] gleam: i use the 10.04 one
[2013-04-30 15:17:32 -0400] gleam: chef-server_11.0.8-1.ubuntu.10.04_amd64.deb
[2013-04-30 15:17:40 -0400] gleam: i haven't tried any others
[2013-04-30 15:17:52 -0400] gleam: but it works
[2013-04-30 15:18:39 -0400] cburroughs: For anyone following along, http://tickets.opscode.com/browse/CHEF-1406 does not seem to work with chef 11's run context changes
[2013-04-30 15:19:23 -0400] mosez: ok, the differences can not be so big... i will restore before the deb install and try out the 10.04
[2013-04-30 15:19:53 -0400] gleam: the only odd thing i noticed is that knife status doesn't work unless you change status.rb to use unix_time.round instead of unix_time.to_i
[2013-04-30 15:19:59 -0400] gleam: but that's it
[2013-04-30 15:20:57 -0400] mosez: ok, i can live with that :D
[2013-04-30 15:21:04 -0400] mosez: got to turn of irssi... bbl
[2013-04-30 15:21:37 -0400] zts: cburroughs: I'd personally be changing the recipe in question to a definition, rather than tricking Chef into repeatedly compiling a recipe
[2013-04-30 15:21:44 -0400] yfeldblum: vaskas, they serve completely different purposes
[2013-04-30 15:22:16 -0400] yfeldblum: vaskas, one issue would no longer exist, but many more would spring into being
[2013-04-30 15:25:49 -0400] mattt: what's the best way to override a resource so that i can change the action depending on a specific environment attribute being set ?
[2013-04-30 15:32:47 -0400] jtimberman: cwj: COOK-2796 merged
[2013-04-30 15:33:25 -0400] cwj: jtimberman: thanks, and sorry
[2013-04-30 15:36:24 -0400] cburroughs: zts, I'm sure there is another way but I was trying to avoid lots of cookbook forking.    I looked at libraries but not definitions.  I will check it out
[2013-04-30 15:37:41 -0400] Kzim: hi
[2013-04-30 15:38:04 -0400] Kzim: is there a way to dry run a cookbook version on a node check if everything is ok before upgrading ?
[2013-04-30 15:39:58 -0400] zts: cburroughs: well, definitions can be thought of as macros, and are the easiest way of having a group of resources that you want to declare multiple times with slightly different data
[2013-04-30 15:40:35 -0400] zts: cburroughs: but I've very rarely needed to do that with a third-party cookbook (just ones written in house), so your experience may vary
[2013-04-30 15:42:19 -0400] cheeseplus: Kzim: there is -why-run
[2013-04-30 15:43:33 -0400] cheeseplus: I'd suggest moving the testing into something like test-kitchen or something local though so you know it works before pushing to prod as dry-run/why-run scenarios can lie
[2013-04-30 15:45:04 -0400] Kzim: cheeseplus, can i force a cookbook version with dry-run ? i have a constraint on this env i want to check if it's ok to promote the cookbook also
[2013-04-30 15:45:45 -0400] cheeseplus: in that case it seems like you might be interested in using environments to pin cookbook versions
[2013-04-30 15:45:51 -0400] Kzim: cheeseplus, to test you setup a new vm, configure the cookbook with constraint and everything and then upgrade ? it's a very heavy process :(
[2013-04-30 15:46:00 -0400] cheeseplus: testing is important
[2013-04-30 15:46:23 -0400] Kzim: cheeseplus, i have a version constraint in my env and i want to check if i can raise the version ]
[2013-04-30 15:46:26 -0400] timsmith: hey Opscoders:  any word on the 10.26.0 release?
[2013-04-30 15:46:41 -0400] MrBIOS: hey guys, I'm having a problem loading a knife plug-in that I just installed via a gemgem list --local'
[2013-04-30 15:46:45 -0400] MrBIOS: shows it's installed
[2013-04-30 15:46:51 -0400] MrBIOS: do I need to add it to my knife config?
[2013-04-30 15:46:59 -0400] gleam: chef 11 omnibus?
[2013-04-30 15:47:12 -0400] gleam: it has its own ruby
[2013-04-30 15:47:20 -0400] Kzim: cheeseplus, you re right i'm looking for best practice since i do lots of change on cookbook and i'm not really sure about the integrity if i upgrade
[2013-04-30 15:47:21 -0400] cheeseplus: Kzim: when you say env, do you mean a chef environment?
[2013-04-30 15:47:29 -0400] Kzim: cheeseplus, yes
[2013-04-30 15:47:37 -0400] cheeseplus: just making sure ;)
[2013-04-30 15:48:25 -0400] cheeseplus: Kzim: test-kitchen simplifies most of this for you, it automatically spins up a vm does test and all that
[2013-04-30 15:48:31 -0400] MrBIOS: anyone? beuller?
[2013-04-30 15:48:55 -0400] cheeseplus: MrBIOS: did you install chef from the Omnibus installer
[2013-04-30 15:48:55 -0400] cheeseplus: ?
[2013-04-30 15:49:20 -0400] Kzim: cheeseplus, wow nice. i' ll check but i assume i still have to to a dry run at some point forcing the cookbook version over the environment constraint
[2013-04-30 15:49:20 -0400] MrBIOS: I don't recall
[2013-04-30 15:49:23 -0400] cheeseplus: if so then the chef is isolated with it's own ruby/gems
[2013-04-30 15:49:23 -0400] MrBIOS: I don't believe so, though
[2013-04-30 15:49:39 -0400] MrBIOS: where does opscode stick it? /opt?
[2013-04-30 15:50:10 -0400] cheeseplus: MrBIOS: if you use omnibus, it's normally pushed to /opt
[2013-04-30 15:50:18 -0400] MrBIOS: looks like I am, then
[2013-04-30 15:50:48 -0400] MrBIOS: I have /opt/chef/embedded
[2013-04-30 15:51:09 -0400] gleam: yeah so use /opt/chef/embedded/bin/gem install
[2013-04-30 15:51:11 -0400] gleam: or whatever hte path is
[2013-04-30 15:51:19 -0400] cheeseplus: yep
[2013-04-30 15:51:55 -0400] MrBIOS: so I presumably just need a symlink
[2013-04-30 15:52:19 -0400] cheeseplus: well you might not if you want to use your system ruby separately
[2013-04-30 15:52:27 -0400] cheeseplus: as in I wouldn't recommend it
[2013-04-30 15:53:19 -0400] MrBIOS: thanks, I installed via chef's gem
[2013-04-30 15:53:49 -0400] MrBIOS: hm, lovely, now I get "/opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- active_support/inflector (LoadError)" when I run knife
[2013-04-30 15:54:14 -0400] MrBIOS: thanks, opscode :)
[2013-04-30 15:54:58 -0400] cheeseplus: which knife-plugin is this?
[2013-04-30 15:55:11 -0400] MrBIOS: the knife-sl (SoftLayer) plug-in
[2013-04-30 15:55:19 -0400] MrBIOS: the knife-sl gem has one dependency, softlayer_api
[2013-04-30 15:55:36 -0400] MrBIOS: the gems appear to be properly installed, so I'm not sure what's up..some path issue no doubt
[2013-04-30 15:55:59 -0400] cheeseplus: did you nuke the system gems as well?
[2013-04-30 15:56:06 -0400] cheeseplus: gem uninstall knife-sl and such?
[2013-04-30 15:58:01 -0400] MrBIOS: I did
[2013-04-30 15:58:41 -0400] MrBIOS: I'm seeing totally sane and expected output from /opt/chef/embedded/bin/gem list --local
[2013-04-30 16:02:10 -0400] cheeseplus: MrBIOS: I'm getting the failure as well but I have other knife- plugins that work without issue
[2013-04-30 16:02:31 -0400] MrBIOS: damn, thanks for playing anyways
[2013-04-30 16:03:09 -0400] cheeseplus: not sure of the relative quality or currentness of that plugin
[2013-04-30 16:03:25 -0400] cheeseplus: trying to verify in an clean gem environment
[2013-04-30 16:04:01 -0400] gleam: looks to me like hte gem didn't declare its dependencies correctly
[2013-04-30 16:04:02 -0400] gleam: require 'active_support/inflector'
[2013-04-30 16:04:05 -0400] gleam: in sl_firewall_list.rb
[2013-04-30 16:04:13 -0400] MrBIOS: yep I see that
[2013-04-30 16:04:17 -0400] gleam: readline too
[2013-04-30 16:04:31 -0400] MrBIOS: lame :)
[2013-04-30 16:04:37 -0400] gleam: sounds like quality stuff
[2013-04-30 16:05:01 -0400] MrBIOS: time to fork on the Hub of Git
[2013-04-30 16:05:45 -0400] cheeseplus: well at least it isn't chef ;)
[2013-04-30 16:05:58 -0400] cheeseplus: switching rooms at this conference
[2013-04-30 16:10:04 -0400] jwilf: hey guyes i'm having an issue with knife essentials when i try to download...
[2013-04-30 16:10:21 -0400] jwilf: # knife download -c .chef/download.rb /
[2013-04-30 16:10:22 -0400] jwilf: /usr/local/rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
[2013-04-30 16:10:22 -0400] jwilf: It seems your ruby installation is missing psych (for YAML output).
[2013-04-30 16:10:23 -0400] jwilf: To eliminate this warning, please install libyaml and reinstall your ruby.
[2013-04-30 16:10:25 -0400] jwilf: ERROR: TypeError: can't convert nil into String
[2013-04-30 16:10:39 -0400] jwilf: its the can't convert nil into String i'm stuck on
[2013-04-30 16:10:54 -0400] jwilf: i'm not sure what nil its referring to?
[2013-04-30 16:11:13 -0400] vaskas: yfeldblum fyi, interesting read http://www.stovepipestudios.com/blog/2013/02/go-dependency-management.html
[2013-04-30 16:12:04 -0400] MrBIOS: @cheeseplus, hm, looks like the requires *are* actually there in lib/chef/knife/sl_base.rb
[2013-04-30 16:12:08 -0400] MrBIOS:           deps do
[2013-04-30 16:12:08 -0400] MrBIOS:             require 'softlayer_api'
[2013-04-30 16:12:10 -0400] MrBIOS:             require 'readline'
[2013-04-30 16:12:11 -0400] MrBIOS:             require 'chef/json_compat'
[2013-04-30 16:12:11 -0400] MrBIOS:           end
[2013-04-30 16:16:03 -0400] yfeldblum: vaskas, indeed; not a fan
[2013-04-30 16:16:24 -0400] mosez: is there currenlty any know bug within chef server install for ubuntu? i've installed ubuntu 10.04 now, and still get the same error as on debian wheezy oO
[2013-04-30 16:16:57 -0400] yfeldblum: vaskas, there is no abstraction layer (and therefore no ability to substitute implementations) and there is no ability to do controlled API migrations
[2013-04-30 16:18:21 -0400] yfeldblum: vaskas, detecting dependencies from source code is perfectly fine though, but possible only in certain languages and not others
[2013-04-30 16:18:58 -0400] yfeldblum: vaskas, at least without workarounds in the edge cases
[2013-04-30 16:19:18 -0400] mosez: ok, seems to be a problem on my virtual machine with pgsql and shared memory -.-
[2013-04-30 16:20:48 -0400] mosez: so i've got to fix the pgsql memory stuff or i cant use chef server -.-
[2013-04-30 16:20:50 -0400] yfeldblum: vaskas, in fact, rails' russion-doll view-caching architecture faces exactly this sort of problem, and was forced to require a specially-formatted comment in the edge cases
[2013-04-30 16:22:57 -0400] vaskas: yfeldblum they definitely have a problem with being able to use older versions. It would be a logical thing for them to add git tags support. I'm curious to see if Go Nuts takes off or the initial approach remains mainstream.
[2013-04-30 16:25:06 -0400] mosez: how should i remove that error with the omnibus deb packet??? http://pastie.org/7743803
[2013-04-30 16:25:52 -0400] vaskas: yfeldblum it happens when somebody tries to make his very specific solution generic
[2013-04-30 16:26:37 -0400] vaskas: yfeldblum and when it becomes apparent that it's not generic they call it omakase
[2013-04-30 16:26:57 -0400] mikeroth: Does anyone here have experience with working with a response_file or a seed file? I'm trying to do a package install and provide the responses it needs.
[2013-04-30 16:28:18 -0400] knuckolls: mikeroth: i did it exactly once
[2013-04-30 16:28:45 -0400] mikeroth: knuckolls: I'm looking here: https://github.com/opscode-cookbooks/mysql/blob/master/templates/default/mysql-server.seed.erb
[2013-04-30 16:29:00 -0400] knuckolls: but it wasn't too hard to do, i made the response file by hand and tested it on the machine w/ apt. the trick was to put it in the files section of the cookbook so it could use it i think
[2013-04-30 16:29:19 -0400] knuckolls: haha or not
[2013-04-30 16:29:31 -0400] knuckolls: you're just looking to emulate this?
[2013-04-30 16:29:39 -0400] mikeroth: yes
[2013-04-30 16:30:08 -0400] vaskas: alright there, until later
[2013-04-30 16:30:15 -0400] mikeroth: I'm not sure where he is getting "mysql-server/error_setting_password"
[2013-04-30 16:31:03 -0400] knuckolls: mikeroth: haha yeeah dang how did i figure this out before
[2013-04-30 16:31:23 -0400] knuckolls: there's a trick to figuring out what a package expects in a seed file
[2013-04-30 16:31:31 -0400] mikeroth: knuckolls: I know right, I thought there would be a simple example out there
[2013-04-30 16:31:42 -0400] knuckolls: mikeroth: i feel like i did it like this:
[2013-04-30 16:31:52 -0400] knuckolls: i installed the package by hand, and answered it's questions by hand
[2013-04-30 16:32:00 -0400] knuckolls: those questions get written out to somewhere on the filesystem by apt
[2013-04-30 16:32:14 -0400] knuckolls: with the keynames that you would then use in your seed file
[2013-04-30 16:32:54 -0400] mikeroth: so I would tail in the /etc directory
[2013-04-30 16:33:48 -0400] gleam: use this as a template: http://www.debian.org/releases/stable/example-preseed.txt and then use debconf-get-selections packagename
[2013-04-30 16:33:53 -0400] gleam: to get the variables+values you want
[2013-04-30 16:34:14 -0400] mikeroth: gleam: THANK YOU!!!!!
[2013-04-30 16:34:41 -0400] gleam: actually it's debconf-show now i think
[2013-04-30 16:35:13 -0400] knuckolls: awesome.
[2013-04-30 16:41:17 -0400] mikeroth: gleam: on this exmaple:https://github.com/opscode-cookbooks/mysql/blob/master/templates/default/mysql-server.seed.erb
[2013-04-30 16:41:45 -0400] mikeroth: gleam: why does he use mysql-server-5.0 and not d-i?
[2013-04-30 16:42:50 -0400] gleam: the sample i sent was for an os install
[2013-04-30 16:43:19 -0400] mikeroth: so I can use any variable?
[2013-04-30 16:44:11 -0400] gleam: the first field sould be the package you're configuring
[2013-04-30 16:44:17 -0400] gleam: at least that's my memory
[2013-04-30 16:44:26 -0400] gleam: if you install debconf-utils that provides debconf-get-selections
[2013-04-30 16:44:32 -0400] gleam: which is definitely teh better tool
[2013-04-30 16:44:43 -0400] mikeroth: ok thx
[2013-04-30 16:56:32 -0400] jtimberman: mikeroth: that seed file was originally written 3 LTS versions of ubuntu ago :)
[2013-04-30 17:11:02 -0400] mosez: is there a way to reduce shred_buffer for postgresql while chef-server-ctl reconfigure?
[2013-04-30 17:11:07 -0400] mosez: shared*
[2013-04-30 17:12:03 -0400] mosez: jtimberman?
[2013-04-30 17:19:16 -0400] mosez: ok, it seems to be possible... now i've got to find out how i can set this attributes BEFORE reconfigure :((( https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-04-30 17:20:46 -0400] mosez: 2gb ram seems to make problems with postgresql and so on... so i will reduce the buffer size
[2013-04-30 17:22:53 -0400] ziikutv: Hello, I am following a tutorial at gettingstartedwithdjango.com
[2013-04-30 17:23:34 -0400] ziikutv: they supply a zip file and when i do vagrant up, i get this error http://ideone.com/CSjmHW i talked to people at #vagrant and they said it is actually a chef error. Help :(
[2013-04-30 17:25:57 -0400] ziikutv: anyone
[2013-04-30 17:27:43 -0400] tomdzk: ziikutv: you could start with a blank VM (e.g. http://files.vagrantup.com/precise64.box), maybe their box has some issues
[2013-04-30 17:29:19 -0400] ziikutv: well i need that "box" (sorry i dont know most of this terminology) to follow the tutorial
[2013-04-30 17:29:49 -0400] ziikutv: is there a way i can look at what files/gem they are installing so that i can take a blank vm and install them manually?
[2013-04-30 17:30:39 -0400] troyready: Anyone out there using Ubuntu's Juju with Chef? I'm struggling to see any benefit in using it alongside Chef,and it doesn't seem to be in a position to replace Chef either
[2013-04-30 17:30:43 -0400] tomdzk: ziikutv: you could try installing chef into the VM yourself (avoiding theirs), e.g. by using https://github.com/schisamo/vagrant-omnibus
[2013-04-30 17:30:44 -0400] kindsol: ziikutv: this seems similar http://tickets.opscode.com/browse/CHEF-4123
[2013-04-30 17:30:54 -0400] troyready: Just curious if anyone else has reach the same conclusion, or if I m missing something
[2013-04-30 17:31:41 -0400] ziikutv: tomdzk: but i dont understand any of this
[2013-04-30 17:31:58 -0400] maplebed: troyready: in theory, juju is supposed to focus more on orchestration whereas chef is more about configuring individual machines, but my take on the temperature of the community agrees with your assessment.
[2013-04-30 17:32:34 -0400] tomdzk: ziikutv: it might be best if you hop onto the #django channel as it seems they provide the VM ?
[2013-04-30 17:33:19 -0400] tomdzk: ziikutv: from the log it looks like there is some problem with the chef setup in the VM (or the vagrant file)
[2013-04-30 17:33:39 -0400] kindsol: ziikutv: from that ticket it looks like the fix for your problem was just authored 6 days ago. https://github.com/opscode/chef/commit/451b7fb16fbc36b8a6391fec54474fc7d26f160c
[2013-04-30 17:34:10 -0400] troyready: maplebed, appreciate the thought. Nice to know that I'm not crazy (at least not this time, yet)
[2013-04-30 17:34:36 -0400] ziikutv: kindsol: what do i have to modify?
[2013-04-30 17:34:45 -0400] kindsol: ziikutv: you could probably add those changes to your Chef gem by hand
[2013-04-30 17:34:58 -0400] ziikutv: and where is that located
[2013-04-30 17:35:05 -0400] tomdzk: kindsol: the ticket talks about 10.24.4 though, and the VM uses 11.4.4 ?
[2013-04-30 17:35:37 -0400] kindsol: yeah the change was authored in the v11.x branch 6 days ago
[2013-04-30 17:37:57 -0400] tomdzk: kindsol: right, http://tickets.opscode.com/browse/CHEF-4127 is a duplicate
[2013-04-30 17:38:17 -0400] tomdzk: ziikutv, kindsol: maybe a downgrade to 11.4.2 (as suggested in the ticket) is the simplest option ?
[2013-04-30 17:38:29 -0400] kindsol: ziikutv: tomdzk's idea of using a bare box and the vagrant-omnibus project might work, or you can modify the chef gem in the box
[2013-04-30 17:38:46 -0400] kindsol: yep, sounds like downgrade is your best bet
[2013-04-30 17:38:55 -0400] kindsol: (or simplest)
[2013-04-30 17:39:04 -0400] ziikutv: kindsol: i cant seem to find the gem in the box
[2013-04-30 17:39:09 -0400] tomdzk: ziikutv: there should be a gem binary in /opt/vagrant_ruby/bin
[2013-04-30 17:40:29 -0400] kindsol: ziikutv: run `gem install gem edit` then `gem edit chef`
[2013-04-30 17:40:52 -0400] ziikutv: haha i was about to say i cant subl . in my vm yet
[2013-04-30 17:40:56 -0400] ziikutv: ty <3
[2013-04-30 17:41:02 -0400] kindsol: if the gem binary is in "/opt/vagrant_ruby/bin", you will need to supply the asb path to gem (i.e. /opt/vagrant_ruby/bin/gem )
[2013-04-30 17:41:22 -0400] kindsol: s/asb/abs/
[2013-04-30 17:41:43 -0400] ziikutv: there is no chef gem in there
[2013-04-30 17:41:55 -0400] ziikutv:   /opt/vagrant_ruby/bin
[2013-04-30 17:42:10 -0400] ziikutv: there is chef-shell chef-client chef-apply chef-solo
[2013-04-30 17:42:27 -0400] tomdzk: ziikutv: 'which gem'
[2013-04-30 17:42:39 -0400] kindsol: ziikutv: run run `/opt/vagrant_ruby/bin/gem install gem edit` then `/opt/vagrant_ruby/bin/gem edit chef`
[2013-04-30 17:42:39 -0400] tomdzk: ziikutv: /opt/vagrant_ruby/bin/gem for me
[2013-04-30 17:42:49 -0400] ziikutv: also i have chef (11.4.4, 10.14.2)
[2013-04-30 17:43:25 -0400] tomdzk: ziikutv: gem uninstall chef --version 11.4.4 && gem install chef --version 11.4.2 ?
[2013-04-30 17:43:27 -0400] kindsol: s/gem edit/gemedit/
[2013-04-30 17:43:56 -0400] shane_: upgraded to 11.4.4 client and am now seeing: ArgumentError: wrong number of arguments (2 for 1)
[2013-04-30 17:44:10 -0400] shane_: was previously on 11.4.0
[2013-04-30 17:44:17 -0400] tomdzk: shane_: http://tickets.opscode.com/browse/CHEF-4127 ?
[2013-04-30 17:44:23 -0400] kindsol: shane_:  http://tickets.opscode.com/browse/CHEF-4127
[2013-04-30 17:44:26 -0400] kindsol: hehe
[2013-04-30 17:44:35 -0400] ziikutv: kindsol: what did u mean by /gem edit/gemedit
[2013-04-30 17:44:43 -0400] shane_: yep thats the one
[2013-04-30 17:44:44 -0400] shane_: thanks
[2013-04-30 17:44:45 -0400] ziikutv: and btw i ran the command tom suggested
[2013-04-30 17:44:52 -0400] kindsol: shane_: to 11.4.2
[2013-04-30 17:45:21 -0400] shane_: hmm was trying to go 11.4.4 to fix a memory leak
[2013-04-30 17:45:48 -0400] kindsol: ziikutv: I meant to install gemedit, not gem edit.  if you are downgrading, forget about it.  that is only if you wanted apply the patch
[2013-04-30 17:46:12 -0400] kindsol: shane_: looks like there is a fix if you want to patch https://github.com/opscode/chef/commit/451b7fb16fbc36b8a6391fec54474fc7d26f160c
[2013-04-30 17:46:16 -0400] ziikutv: shit
[2013-04-30 17:46:24 -0400] ziikutv: i will upgrade again -_-
[2013-04-30 17:46:44 -0400] mosez: how got /etc/chef-server/chef-server.rb to look like? i want to change attributes for reconfigure -.-
[2013-04-30 17:49:09 -0400] shane_: can someone point me at a document for building my own chef rubygem so i can patch?
[2013-04-30 17:49:38 -0400] ziikutv: kindsol: I upgraded again and instaling gemedit.
[2013-04-30 17:49:52 -0400] tomdzk: shane_: clone from github and then 'rake build' maybe?
[2013-04-30 17:51:22 -0400] ziikutv: kindsol: http://ideone.com/WZn3m1
[2013-04-30 17:51:47 -0400] shane_: ok, looks easy enough
[2013-04-30 17:52:26 -0400] kindsol: ziikutv: gem edit chef
[2013-04-30 17:53:02 -0400] ziikutv: there is no chef there.
[2013-04-30 17:53:22 -0400] ziikutv: there is only chef-apply, chef-client, chef-shell, chef-solo,
[2013-04-30 17:53:25 -0400] kindsol: it is not in the bin dir, it is in the gem dir
[2013-04-30 17:53:45 -0400] kindsol: did you run `gem edit chef`?
[2013-04-30 17:53:58 -0400] ziikutv: yes
[2013-04-30 17:54:03 -0400] ziikutv: it just showed a bunch of ~ lines
[2013-04-30 17:54:11 -0400] ziikutv: and said "." is a directory
[2013-04-30 17:55:11 -0400] kindsol: if `/opt/vagrant_ruby/bin/gem edit chef` doesn't work for you, then you should look in to building your own gem like shane_ .
[2013-04-30 17:55:55 -0400] kindsol: gem edit should open up vi and allow you to drill down to lib/chef/resource.rb, where you can apply and test the patch
[2013-04-30 17:56:11 -0400] ziikutv: Opening the chef gem, version 11.4.4, with vi from /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-11.4.4
[2013-04-30 17:56:17 -0400] ziikutv: cant i open that with a text editor or something?
[2013-04-30 17:56:45 -0400] kindsol: failing that, just download the gem src, apply patch and `rake build` your own version of the gem
[2013-04-30 17:57:11 -0400] kindsol: ziikutv: yeah, that is what gem edit should have done
[2013-04-30 17:57:19 -0400] kindsol: open it directly with vi works too
[2013-04-30 17:57:29 -0400] jtimberman: mosez: http://docs.opscode.com/config_rb_chef_server.html
[2013-04-30 17:58:02 -0400] jtimberman: e.g. to change the postgresql shared buffers: postgresql['shared_buffers'] = valueyouwantasinteger
[2013-04-30 17:58:17 -0400] thehar: jtimberman: curious question for you. what do you commonly do with chef-client when it's eating memory?
[2013-04-30 17:58:30 -0400] shane_: second part of the patch fails on 11-stable clone
[2013-04-30 17:58:41 -0400] shane_: the lwrp_base.rb
[2013-04-30 17:58:52 -0400] mosez: jtimberman: thx
[2013-04-30 17:59:15 -0400] tomdzk: shane_: that patch should be in master already, you could try that
[2013-04-30 17:59:32 -0400] shane_: would rather run stable
[2013-04-30 18:01:14 -0400] tomdzk: shane_: you probably need to use the 11.4-patch branch and apply the patch there
[2013-04-30 18:04:56 -0400] ziikutv: kindsol: How do i do this with text editor? :S
[2013-04-30 18:05:33 -0400] shane_: tomdzk: worked like a champ, thanks
[2013-04-30 18:05:51 -0400] tomdzk: ziikutv: just build your own gem if you really want 11.4.4 + patch
[2013-04-30 18:05:53 -0400] cburroughs: zts, Several attemps at my first definition later, I got it working.  Thanks
[2013-04-30 18:06:01 -0400] shane_: gem built fine, building new rpm now
[2013-04-30 18:06:26 -0400] tomdzk: ziikutv: or stick with 11.4.2 for now
[2013-04-30 18:06:43 -0400] kindsol: +1
[2013-04-30 18:07:09 -0400] gzc: cool stuff on the devopsdays stream
[2013-04-30 18:07:15 -0400] gzc: man I need to play with zookeeper and/or corosync
[2013-04-30 18:08:54 -0400] Kzim: hello, can definition return a value ? perhaps definition isn't the best for what i want. i want to do a sort of GetMyCluster() whcich search in data bag and return a json to the cookbook
[2013-04-30 18:10:02 -0400] jtimberman: thehar: use --fork for the daemonized service.
[2013-04-30 18:10:31 -0400] thehar: i can't remember what version of chef-client that came in?
[2013-04-30 18:10:40 -0400] miah: Kzim: write a method and stick it in a library.
[2013-04-30 18:10:48 -0400] ziikutv: such a hassle
[2013-04-30 18:11:40 -0400] Kzim: miah, can i use stuff like data_bag_item in a library method ?
[2013-04-30 18:12:45 -0400] ziikutv: thanks guys
[2013-04-30 18:12:46 -0400] ziikutv: ill di
[2013-04-30 18:12:49 -0400] ziikutv: illl leave for now
[2013-04-30 18:15:00 -0400] miah: Kzim: ya. but you might have to do more ruby magic around that. i havent worked with db's too much in my lib's.
[2013-04-30 18:15:21 -0400] Kzim: miah, hum ok thanks
[2013-04-30 18:16:24 -0400] jtimberman: Kzim: take a look at opscode's nagios cookbook libraries, has a data bag helper
[2013-04-30 18:16:31 -0400] miah: look at https://github.com/opscode/chef/blob/master/lib/chef/mixin/language.rb for more details
[2013-04-30 18:16:38 -0400] miah: or that =)
[2013-04-30 18:18:24 -0400] miah: er, obviously my link is derp. i was looking at a super old tag of chef locally =)
[2013-04-30 18:18:34 -0400] miah: https://github.com/opscode/chef/blob/master/lib/chef/dsl/data_query.rb
[2013-04-30 18:18:39 -0400] miah: is propers
[2013-04-30 18:19:32 -0400] dfrey_: is there a way to tell chef not to collect a resource? its breaking because the resource is dependent on a previous resource running
[2013-04-30 18:20:48 -0400] Kzim: miah, well i'm not sure about the lib since i need access node and everything perhaps it's a bit heavy
[2013-04-30 18:20:49 -0400] miah: create the resource with the action of :nothing and then after your collection is built send them :create, run or whatever
[2013-04-30 18:22:06 -0400] Kzim: miah, but i just want tu return a json
[2013-04-30 18:23:16 -0400] Kzim: miah, if i require 'chef/data_query' , the link you send i could use data_bag_item no ?
[2013-04-30 18:24:42 -0400] dfrey__: does chef run resources before they are called in recipes?
[2013-04-30 18:26:29 -0400] miah: its a class, you'd still have to refer to it as such. that link i gave has a exact example.
[2013-04-30 18:26:39 -0400] miah: i'd avoid using anything provided by the dsl
[2013-04-30 18:27:01 -0400] miah: just because im not 100% sure how that is built out in the runtime
[2013-04-30 18:27:30 -0400] miah: but certainly feel free to experiment with it =)
[2013-04-30 18:27:33 -0400] cwj: dfrey__: chef processes recipes in two phases
[2013-04-30 18:27:36 -0400] cwj: dfrey__: http://docs.opscode.com/resource_common_compile.html
[2013-04-30 18:27:50 -0400] cwj: it compiles the resources and then executes them
[2013-04-30 18:28:10 -0400] miah: http://erik.hollensbe.org/2013/03/16/the-chef-resource-run-queue/
[2013-04-30 18:28:15 -0400] miah: is a great explaination of that topic actually
[2013-04-30 18:28:24 -0400] cwj: miah: nice, havent seen that one
[2013-04-30 18:28:46 -0400] dfrey__: cwj, miah: great, thanks for the links
[2013-04-30 18:28:49 -0400] queso: Can I use booleans in node attributes?  I think my "false" is being interpreted as true.
[2013-04-30 18:29:02 -0400] miah: dont quote false
[2013-04-30 18:29:12 -0400] miah: false != 'false'
[2013-04-30 18:29:24 -0400] miah: false is from FalseClass and 'false' is String
[2013-04-30 18:29:27 -0400] josephholsten: yay ruby!
[2013-04-30 18:30:14 -0400] queso: miah: Thanks. This might explain my problem. :)
[2013-04-30 18:30:36 -0400] josephholsten: anyone know if there's a single page that posts when all the code review hangouts are? I know there are some on monday and wednesday, but I always forget the times
[2013-04-30 18:32:28 -0400] Kzim: miah, thanks !
[2013-04-30 18:34:25 -0400] juliancdunn: josephholsten: http://wiki.opscode.com/display/chef/Code+Review
[2013-04-30 18:34:46 -0400] josephholsten: awesome, thanks
[2013-04-30 18:40:49 -0400] yfeldblum: josephholsten, "don't quote false" holds for all nonstupid languages
[2013-04-30 18:42:00 -0400] dfrey__: yfeldblum: which languages will interpret 'false' as false?
[2013-04-30 18:42:41 -0400] yfeldblum: dfrey__, coldfusion will
[2013-04-30 18:43:05 -0400] dfrey__: yfeldblum: oh, haha how odd
[2013-04-30 18:48:32 -0400] josephholsten: also tcl
[2013-04-30 19:07:35 -0400] dysinger: jtimberman: can I bug someone about this? https://github.com/opscode-cookbooks/maven/pull/18 there was an earlier one too https://github.com/opscode-cookbooks/maven/pull/15
[2013-04-30 19:13:04 -0400] mancdaz: to fix resource cloning in some of the opscode community cookbooks, can I submit a pull request that uses the chef-rewind gem to edit the resource instead?
[2013-04-30 19:13:15 -0400] mancdaz: if that's not the way, what is?
[2013-04-30 19:18:49 -0400] miah: please no
[2013-04-30 19:19:38 -0400] knuckolls: i'd say rewind is mostly for internal wrapper cookbooks, when you disagree about how something should work. if there's a problem with a community cookbook fork and patch it.
[2013-04-30 19:19:52 -0400] knuckolls: there are situations where i've just done a rewind just to get something working, then forked and fixed the cookbook
[2013-04-30 19:34:34 -0400] xerxas: Hi all
[2013-04-30 19:34:48 -0400] xerxas: I had a problem with a cron resource I could not understand
[2013-04-30 19:35:16 -0400] xerxas: I finally understood what was going on, the user specified wasn't existing on this system
[2013-04-30 19:35:55 -0400] xerxas: the error I had was "Error updating state of cron[name], exit: 1"
[2013-04-30 19:36:12 -0400] xerxas: its called from here: https://github.com/opscode/chef/blob/master/lib/chef/provider/cron.rb#L193,L202
[2013-04-30 19:36:21 -0400] xerxas: I think the message could have been a lot more informative
[2013-04-30 19:36:28 -0400] xerxas: should I report an issue about that ?
[2013-04-30 19:37:30 -0400] knuckolls: xerxas: couldn't hurt :)
[2013-04-30 19:37:59 -0400] knuckolls: i've gotten into a habit of looking at issues / pull requests first whenever i have a problem with an upstream cookbook
[2013-04-30 19:38:15 -0400] knuckolls: since i've wasted a lot of time in the past debugging things that others have fixed but aren't merged
[2013-04-30 19:38:24 -0400] xerxas: yes
[2013-04-30 19:38:29 -0400] xerxas: a lot of stuff isn't merged ;)
[2013-04-30 19:38:38 -0400] xerxas: or stays in discussion state
[2013-04-30 19:49:38 -0400] adamjk-dev: hello all,..... here comes a configuration management question for Chef.....     Right now we are following the chef-repo mentality for managing cookbooks etc. (https://github.com/opscode/chef-repo). But, we want to follow the one repo per cookbook and aren't sure what people do with spiceweasel and/or other tools to manage their chef servers then
[2013-04-30 19:50:18 -0400] adamjk-dev: Do people build a super-chef repo on top of all those other ones, such that you can rebuild your chef server on a whim from that super-repo?
[2013-04-30 19:52:22 -0400] yfeldblum: adamjk-dev, see librarian-chef and berkshelf
[2013-04-30 19:52:58 -0400] adamjk-dev: yfeldblum: we use berkshelf
[2013-04-30 19:53:14 -0400] adamjk-dev: yfeldblum: i should say, we played with berkshelf, and it doesnt play nice with chef-client right?
[2013-04-30 19:53:19 -0400] ivey: adamjk-dev: we don't have a super repo, we have a CI job for each cookbook that uploads it + dependencies
[2013-04-30 19:53:36 -0400] yfeldblum: adamjk-dev, librarian-chef and berkshelf hve nothing to do with chef-client
[2013-04-30 19:53:57 -0400] knuckolls: adamjk-dev: you can use berkshelf with the chef-client vagrant provisioner, if that's what you're curious about
[2013-04-30 19:54:38 -0400] yfeldblum: adamjk-dev, both tools are designed for use by the system administrator from his workstation, and do not get in-between the chef-client/chef-server
[2013-04-30 19:55:15 -0400] adamjk-dev: ivey: thanks, yeah we are just looking at our options as we lay out the new format for how we store all of this data
[2013-04-30 19:55:22 -0400] knuckolls: adamjk-dev: we have our cookbooks all broken out into individual repos, and a master git repo for holding environments, other config stuff like knife-whisk configs. knife-whisk is a better spiceweasel in my opinion, but i'm biased. we wrote it.
[2013-04-30 19:55:45 -0400] adamjk-dev: yfeldblum: thanks, yah I have just used berkshelf to run with chef-solo, but I see that it has commands to push cookbooks to a chef-server
[2013-04-30 19:56:35 -0400] knuckolls: adamjk-dev: ideally you'd turn off access to upload cookbooks to the chef-server via any user but jenkins and have your cookbooks follow a CI pipeline like any other kind of code
[2013-04-30 19:56:47 -0400] knuckolls: and test things locally that require a chef-server with a localhost vagrant chef-server
[2013-04-30 19:56:52 -0400] knuckolls: via knife-server
[2013-04-30 19:57:20 -0400] adamjk-dev: knuckolls: i will have to check out knife-whisk, we were having issues with spiceweasel
[2013-04-30 19:57:46 -0400] adamjk-dev: knuckolls: very helpful, thanks
[2013-04-30 19:57:50 -0400] knuckolls: np
[2013-04-30 19:58:30 -0400] adamjk-dev: very responsive people, thanks guys
[2013-04-30 19:59:21 -0400] knuckolls: adamjk-dev: if you end up using knife-whisk or wish it would do something that it doesn't do currently just open an issue or ask me here. :)
[2013-04-30 20:03:32 -0400] adamjk-dev: knuckolls: can do, thanks :)
[2013-04-30 20:11:43 -0400] jtimberman: dysinger: egad, they remove old versions?
[2013-04-30 20:12:04 -0400] dysinger: I don't know about pull req 15's complaint.
[2013-04-30 20:12:19 -0400] dysinger: I just wanted 3.0.5 & I had to remove 3.0.4 hard coded from the cb in the process.
[2013-04-30 20:12:29 -0400] dysinger: jtimberman: ^
[2013-04-30 20:17:46 -0400] jtimberman: dysinger: merged. thanks!
[2013-04-30 20:17:54 -0400] dysinger: awesome sauce
[2013-04-30 20:20:31 -0400] a13x212: is it possible to run indvidual cookbooks from a chef client
[2013-04-30 20:21:10 -0400] jtimberman: a13x212: yes, -o
[2013-04-30 20:24:44 -0400] tabolario: hey everyone, so i've seen this pattern in some form or another in various cookbooks now and this is how i decided to implement it:
[2013-04-30 20:24:45 -0400] tabolario: https://gist.github.com/tabolario/5491665
[2013-04-30 20:25:21 -0400] tabolario: (tldr; cascading the value of something from a node attribute/data bag/encrypted data bag)
[2013-04-30 20:25:54 -0400] tabolario: i generally use just the node attribute to set things in my vagrantfile, and then encrypted data bags in staging/production
[2013-04-30 20:26:48 -0400] tabolario: is this a good way to go about it or am i missing something..
[2013-04-30 20:27:32 -0400] a13x212: thanks jtimberman
[2013-04-30 20:28:01 -0400] yfeldblum: tabolario, not sure what "cascading" means in this context
[2013-04-30 20:28:31 -0400] tabolario: i probably used that term wrong hehe :) i mean first set the value from a node attribute, and then a data bag if one is specified
[2013-04-30 20:35:32 -0400] jmickle: hey guys api is giving 502's again
[2013-04-30 21:22:44 -0400] Kamikazemicrowav: ok I feel like this a really dumb question but not sure what the best practice is here... If I need to add something to user's home directory in my recipe I either have to "hardcode
[2013-04-30 21:23:12 -0400] Kamikazemicrowav: what the home directory location is going to be or look at node["etc"]["passwd"]["<USERNAME>"]["dir"]
[2013-04-30 21:23:27 -0400] miah: or use databags, or some other 3rd party cmdb
[2013-04-30 21:23:41 -0400] miah: or come up with a convention and standardize on it in your organization
[2013-04-30 21:23:54 -0400] Kamikazemicrowav: however, in the previous case that will fail on the first run because the user doesnt exist yet
[2013-04-30 21:24:06 -0400] miah: thus, use a convention in your organization
[2013-04-30 21:24:33 -0400] miah: this continues my speech on 'attributes are a smell'
[2013-04-30 21:24:36 -0400] Kamikazemicrowav: its less about the convention. Its more about what feels like hardcoding the home directory. I know im on linux so I know the user will be in /home
[2013-04-30 21:24:49 -0400] Kamikazemicrowav: but thats not the case if i want to do this on something like say "freebsd"
[2013-04-30 21:24:53 -0400] miah: so write code to do that if the user doesn't exist
[2013-04-30 21:25:08 -0400] miah: yes. chef allows you to write ruby. so do that?
[2013-04-30 21:25:23 -0400] miah: plenty of cookbook examples that have multiple case statements wrapping node['platform_family']
[2013-04-30 21:26:15 -0400] Kamikazemicrowav: well I guess thats my question. Is that the only solution? Seems silly to add those attributes to Ohai if I cant really even query them when I really need them :p
[2013-04-30 21:27:01 -0400] miah: no, writing code is the proper solution. attributes are simple data that you want to feed in as arguments to resources.
[2013-04-30 21:27:21 -0400] miah: ohai plugins could provide the 'home_dir' attribute if they were written to do so
[2013-04-30 21:27:23 -0400] Kamikazemicrowav: which is exactly what I'm wanting to do in this case :p
[2013-04-30 21:27:28 -0400] miah: but home_dir could vary on each organization
[2013-04-30 21:27:30 -0400] Kamikazemicrowav: case statements it is i guess
[2013-04-30 21:27:53 -0400] miah: write a resource / provider and swap out the provider depending on platform
[2013-04-30 21:28:25 -0400] miah: https://docs.google.com/presentation/d/1gQj_QNbzIecZQtbb4oVNMZKlPqiO1q6d08g5l8BqWOI/edit?usp=sharing
[2013-04-30 21:28:31 -0400] miah: pretty much what i talked about at chefconf last week
[2013-04-30 21:29:09 -0400] troyready: Anyone know if it's possible to have put a proxy server in front of a chef-server for clients to access? We're attempting that with nginx, which has mostly been fine, but cookbook downloads are failing for us now
[2013-04-30 21:29:57 -0400] troyready: Specifically, it looks like the "chef_server_url" directive is ignored for cookbooks downloading by the clients, and instead they try to connect directly to the chef server FQDN
[2013-04-30 21:32:08 -0400] alisdair: i'm having a permissions error with chef-solo, could someone maybe point me to what i'm doing wrong here: https://gist.github.com/talentdeficit/5492110
[2013-04-30 21:32:58 -0400] knuckolls: troyready: i bet you'll end up jumping into the source for chef-client to find the offending line before it's all said and done
[2013-04-30 21:33:11 -0400] knuckolls: i've found that's often the quickest way to get an answer like that.
[2013-04-30 21:33:23 -0400] knuckolls: ack is your best friend
[2013-04-30 21:34:02 -0400] knuckolls: alisdair: looks like you want to have a slash before home in your tar statement
[2013-04-30 21:34:45 -0400] alisdair: that was an editing error, it's there in the recipe
[2013-04-30 21:34:57 -0400] knuckolls: gist the error too?
[2013-04-30 21:35:03 -0400] alisdair: sure, one second
[2013-04-30 21:36:22 -0400] alisdair: https://gist.github.com/talentdeficit/5492137
[2013-04-30 21:37:10 -0400] alisdair: edited the initial gist too to contain the entire recipe
[2013-04-30 21:39:04 -0400] knuckolls: alisdair: i'm stumped too, but there's only one thing that sticks out and it's trivial and probably not the problem, but I usually align the EOH right below code <<-EOH
[2013-04-30 21:39:44 -0400] knuckolls: aside from that, this is the point when I'd usually hop on the box and attempt that command by hand
[2013-04-30 21:40:24 -0400] alisdair: it works fine when i ssh in
[2013-04-30 21:41:26 -0400] knuckolls: what about running that temp file that it created
[2013-04-30 21:41:28 -0400] knuckolls: if it still exists
[2013-04-30 21:41:52 -0400] knuckolls:  /tmp/chef-script20130430-1101-5eg2c4-0\
[2013-04-30 21:46:21 -0400] troyready: knuckolls, yeah, I was thinking the same -- appreciate the direction
[2013-04-30 21:50:07 -0400] troyready: FWIW for the logs and to answer my own question from our finding, our proxy issue was not setting the "bookshelf['url']" attribute in /etc/chef-server/chef-server.rb (http://docs.opscode.com/config_rb_chef_server.html)
[2013-04-30 21:53:29 -0400] Liquid--: anybody familiar with the nagios_services data bag? I'm using the users.json example from https://github.com/opscode-cookbooks/nagios/blob/master/examples/nagios_services/users.json -- However, this particular services is not working on any of my servers. It's giving me this error in nagios: CHECK_NRPE: Received 0 bytes from daemon. Check the remote server logs for error messages. Any ideas? /var/log/messages has nothing regarding
[2013-04-30 21:53:30 -0400] Liquid--:  this. :/
[2013-04-30 21:56:03 -0400] alisdair: knuckolls: it might actually have been the code alignment thing, i fixed that and it works now
[2013-04-30 21:56:11 -0400] knuckolls: alisdair: wow glad i said something
[2013-04-30 21:56:24 -0400] knuckolls: wild
[2013-04-30 21:56:32 -0400] knuckolls: anyway i'm out. glad that worked.
[2013-04-30 21:56:34 -0400] alisdair: glad i learned that now
[2013-04-30 21:56:38 -0400] alisdair: thanks for your help
[2013-04-30 21:56:42 -0400] knuckolls: np seeya
[2013-04-30 21:58:39 -0400] Kamikazemicrowav: Liquid--: I think I hit that before with NRPE and it was related to SSL but I cant remember what the problem/solution was
[2013-04-30 22:00:12 -0400] Liquid--: Kamikazemicrowav: hmm, well it's interesting because all of the other services are running and they all use check_nrpe
[2013-04-30 22:05:41 -0400] Kamikazemicrowav: Liquid--: I'm unfamiliar with the cookbook but I'm assuming you've either created the the command 'check_local_users' or it is already defined? On my centos box it looks like the command is part of the default install and is defined in objects/commands.cfg
[2013-04-30 22:10:41 -0400] Liquid--: Kamikazemicrowav: awesome thank you for that. I'm going to check and make sure that commands.cfg is being populated by the data bag that the nagios cookbook wants
[2013-04-30 22:11:15 -0400] murphy_slaw: I'm running into an issue where nodes lose their "fqdn" and "ipaddress" attributes seemingly at random
[2013-04-30 22:11:42 -0400] murphy_slaw: "ohai fqdn" and "ohai ipaddress" return the correct values when run from the command line
[2013-04-30 22:12:03 -0400] murphy_slaw: but every so often after a chef-client run, those attributes are empty
[2013-04-30 22:12:30 -0400] alexras: hi all. does anyone know how to get the script resource to run as a user with that user's environment? when I run with the 'user' attribute set to my user, the given environment is still root's. For context, I'm using chef to provision a vagrant VM
[2013-04-30 22:16:09 -0400] Kamikazemicrowav: Liquid--: Make sure its also part of the relevant NRPE configurations as well. Again, havent used the Opscode cookbook for nagios so not sure what it does
[2013-04-30 22:19:12 -0400] Liquid--: mmkay awesome, checking now.
[2013-04-30 22:21:07 -0400] monokrome: What is the way to tell all my nodes to update?
[2013-04-30 22:21:26 -0400] monokrome: to tell them to provision changes or whatnot
[2013-04-30 22:24:04 -0400] miah: monokrome: chef clients typically run on a set interval, and thats when they do their work.
[2013-04-30 22:26:16 -0400] kisoku: miah: ohai
[2013-04-30 22:27:20 -0400] miah: hi!
[2013-04-30 22:27:30 -0400] monokrome: miah: Well, isn't there a way to use knife to say "Update everything on staging"
[2013-04-30 22:27:40 -0400] miah: sure, knife ssh
[2013-04-30 22:27:47 -0400] gleam: yep
[2013-04-30 22:28:22 -0400] gleam: do note that your chef server might get angry if you tell 50+ nodes to run chef-client simultaneously
[2013-04-30 22:28:23 -0400] miah: you can tell chef-client to restart, start, HUP, or whatever. and force chef to run right now. but in general it runs on its interval
[2013-04-30 22:28:28 -0400] miah: indeed
[2013-04-30 22:28:30 -0400] gleam: (assuming you're hosting it yourself)
[2013-04-30 22:29:06 -0400] monokrome: you just do
[2013-04-30 22:29:16 -0400] monokrome: knife ssh "role:whatever" chef-client
[2013-04-30 22:29:18 -0400] monokrome: ?
[2013-04-30 22:29:19 -0400] gleam: yep
[2013-04-30 22:29:45 -0400] Andorbal: Ok, I guess I don't know how to use the internet, but does Opscode not have their hosted chef plans listed on their site anymore?  I can't find it for the life of me.
[2013-04-30 22:30:42 -0400] gleam: monokrome: so you could do knife ssh environment:staging chef-client
[2013-04-30 22:30:50 -0400] gleam: or whatever your environment is
[2013-04-30 22:36:44 -0400] miah: they just changed their site.. they used to have prices listed.
[2013-04-30 22:37:42 -0400] Andorbal: Ya, I remember seeing them, but I can't find them anywhere anymore.
[2013-04-30 22:39:30 -0400] miah: Andorbal: heres what you do. sign in to with your opscode account
[2013-04-30 22:39:32 -0400] miah: or create one
[2013-04-30 22:39:34 -0400] miah: (its free)
[2013-04-30 22:39:40 -0400] Andorbal: I've got one.
[2013-04-30 22:39:48 -0400] miah: then go into your organization and do 'account management'
[2013-04-30 22:39:52 -0400] miah: it should show the price plan
[2013-04-30 22:40:00 -0400] Andorbal: It says I have no organizations...
[2013-04-30 22:40:06 -0400] Andorbal: But I guess I can create a dummy one.
[2013-04-30 22:40:08 -0400] miah: yup
[2013-04-30 22:40:09 -0400] Andorbal: That's really crappy.
[2013-04-30 22:40:21 -0400] miah: you can create a organization for free that can host up to 5 nodes
[2013-04-30 22:41:04 -0400] miah: Andorbal: ya, please email support@opscode.com
[2013-04-30 22:42:04 -0400] Andorbal: Just found the page.
[2013-04-30 22:42:05 -0400] Andorbal: Thanks
[2013-04-30 22:44:06 -0400] miah: awesome
[2013-04-30 22:56:25 -0400] targs: hey all, I'm still new to chef, but I'm trying to run a "sudo chef-client" call on an aws instance that has no public DNS, an elastic IP, and 2 internal IPs. The ohai ipaddress attribute was autoset to one of the internal IPs and i'm getting "FATAL: 1 node found, but does not have the required attribute to establish the connection. Try setting another attribute to open the connection using --attribute." If i use the -a ipaddress flag, I 
[2013-04-30 22:58:49 -0400] targs: when i boostrapped the node, i used the elastic IP, which worked fine
[2013-04-30 23:05:41 -0400] silk: Is it correct to say that node.roles is an unordered list and node.run_list.roles is ordered list?
[2013-04-30 23:11:20 -0400] miah: its safe to say that you should never rely on array ordering
[2013-04-30 23:13:58 -0400] silk: so given that statement, how do you determine the run_list order?
[2013-04-30 23:22:08 -0400] miah: erik.hollensbe.org/2013/03/16/the-chef-resource-run-queue/
[2013-04-30 23:22:08 -0400] miah: =)
[2013-04-30 23:22:45 -0400] miah: https://github.com/opscode/chef/blob/master/lib/chef/run_list.rb
[2013-04-30 23:22:50 -0400] miah: is a great way to see how its being built
[2013-04-30 23:34:01 -0400] silk: yeah, I ended up looking in the code after asking the question
[2013-04-30 23:34:17 -0400] silk: but they are returning different data anyway
[2013-04-30 23:35:01 -0400] silk: and for this, im more interested in what is in the run_list, rather than the resource collection
[2013-04-30 23:38:10 -0400] silk: thanks for the link though
[2013-04-30 23:39:54 -0400] Otterley: I'm sure this has been raised here before, but it appears the Omnibus downloads page is broken
[2013-04-30 23:40:15 -0400] Otterley: https://opscode-omnitruck-release.s3.amazonaws.com/ubuntu/10.04/x86_64/chef-server_11.0.8-1.ubuntu.10.04_amd64.deb  yields a 404
[2013-04-30 23:40:46 -0400] miah: 11.0.8 is kinda old isnt it?
[2013-04-30 23:41:10 -0400] gleam: no, current revision
[2013-04-30 23:41:10 -0400] Otterley: for chef server? I think that's the latest
[2013-04-30 23:41:18 -0400] miah: i dont follow 11 much yet :P
[2013-04-30 23:41:28 -0400] gleam:  https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/10.04/x86_64/chef-server_11.0.8-1.ubuntu.10.04_amd64.deb
[2013-04-30 23:41:31 -0400] gleam: that url worked for me
[2013-04-30 23:41:33 -0400] gleam: in the past
[2013-04-30 23:41:53 -0400] Otterley: I was using the link generated by http://www.opscode.com/chef/install/
[2013-04-30 23:41:59 -0400] gleam: yeah i dunno what the story is there
[2013-04-30 23:42:03 -0400] gleam: but in case you need it
[2013-04-30 23:42:07 -0400] Otterley: thanks gleam
[2013-04-30 23:42:29 -0400] miah: https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/10.04/x86_64/chef-server_11.0.8-1.ubuntu.10.04_amd64.deb
[2013-04-30 23:42:32 -0400] miah: wfm
[2013-04-30 23:42:41 -0400] Otterley: that's a different url miah
[2013-04-30 23:42:44 -0400] gleam: it changed from omnitruck-release to omnibus-packages
[2013-04-30 23:42:54 -0400] gleam: apparently the site hasn't been updated
[2013-04-30 23:42:59 -0400] miah: http://www.opscode.com/chef/install/
[2013-04-30 23:43:04 -0400] miah: thats the url i just got from there
[2013-04-30 23:43:08 -0400] Otterley: weird.
[2013-04-30 23:43:24 -0400] Otterley: maybe it's in a server pool and one of them is out of date, handing out broken URLs
[2013-04-30 23:43:44 -0400] miah: always pull from a local mirror / artifact server =)
[2013-04-30 23:43:53 -0400] Otterley: what?
[2013-04-30 23:45:08 -0400] miah: don't rely on external or 3rd party sources for packages for your servers. download it once, and store it on something you host.
[2013-04-30 23:45:21 -0400] miah: then if something 'breaks' its something you can hopefully fix and not rely on some external entity
[2013-04-30 23:45:22 -0400] Otterley: what does that have to do with the price of crack in the hood?
[2013-04-30 23:46:14 -0400] silk: It ensures the quality of the crack
[2013-04-30 23:46:20 -0400] miah: ..
[2013-04-30 23:46:41 -0400] Otterley: what I mean is, it's totally unhelpful advice - assume a user who's getting started for the first time, or priming said repo
[2013-04-30 23:49:13 -0400] Otterley: on another subject - does anyone have any advice for profiling erchef performance?  My experience with erchef performance is not on the level with published numbers
[2013-04-30 23:49:40 -0400] Otterley: I've got a load average on the server > 2, yet I only have 350 nodes
[2013-04-30 23:51:20 -0400] miah: its unhelpful advice? eh. ok.
[2013-04-30 23:52:35 -0400] log1kal_: miah: we do exactly that.
[2013-04-30 23:52:54 -0400] log1kal_: days when pip or an apt mirror or github were down were... not good days.
[2013-04-30 23:53:06 -0400] Otterley: we do too, for many things.  as a general matter it's useful advice, but not here.
[2013-04-30 23:53:13 -0400] whack: any omnibus users here? Stumbling trying to get it working on a new project; seemed like this was as good a place as any to ask ;)
[2013-04-30 23:53:52 -0400] log1kal_: days when any of those were down AND we were autoscaling? that's normally someone getting woken up
[2013-04-30 23:55:44 -0400] Otterley: whack, I think most of use omnibus
[2013-04-30 23:55:51 -0400] miah: Otterley: i'll make sure to run things by you before i say them so kmnow whats useful and not to the channel.
[2013-04-30 23:55:51 -0400] Otterley: ^us
[2013-04-30 23:55:55 -0400] whack: I mean the project, not the omnibus builds of chef ;)
[2013-04-30 23:56:08 -0400] miah: whack: chef-hackers
[2013-04-30 23:56:16 -0400] miah: er, #chef-hackers
[2013-04-30 23:56:34 -0400] log1kal_: miah: in other news, I found your chefconf talk inspiring. hoping to implement some of that this month. Thanks for speaking!
[2013-04-30 23:56:42 -0400] whack: miah: that's empty (on freenode, anyway)
[2013-04-30 23:56:42 -0400] miah: log1kal_: awesome. thanks =)
[2013-04-30 23:56:55 -0400] miah: er
[2013-04-30 23:56:56 -0400] miah: freenode/#chef-hacking
[2013-04-30 23:57:00 -0400] miah: i guess its 'ing
[2013-04-30 23:57:17 -0400] miah: i should have asked Otterley :P
[2013-04-30 23:57:22 -0400] whack: miah: hah, thanks ;)
[2013-04-30 23:57:54 -0400] miah: a few people hacking on omnibus for their projects hang out there

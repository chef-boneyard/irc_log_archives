[2013-04-14 00:07:07 -0400] rbueno: btm Are you here ?
[2013-04-14 00:07:22 -0400] rbueno: coderanger you are here ?
[2013-04-14 00:47:54 -0400] KarlHungus: anyone used the application LWRP without deploying?
[2013-04-14 01:12:25 -0400] coderanger: rbueno: I am now, whats up
[2013-04-14 01:16:30 -0400] KarlHungus: well, that was easy. adding actions to an existing LRWP is cake
[2013-04-14 01:17:25 -0400] KarlHungus: shazaam. my app_server cookbook can implement additional methods on top of the application cookbook. ;)
[2013-04-14 01:17:49 -0400] KarlHungus: damn i love chef
[2013-04-14 05:45:04 -0400] erikh: is 33.33.33.10 some kind of in-joke or something? it's a /8 owned by the DoD.
[2013-04-14 05:47:01 -0400] joonas: means it's pretty safe to use :)
[2013-04-14 05:47:04 -0400] joonas: for your own purposes*
[2013-04-14 06:21:58 -0400] tolland: so i have this scenario, I intended to change the chef_client.interval to 1800 seconds, but I typoed it to 1 sec
[2013-04-14 06:22:25 -0400] tolland: so i run this; knife exec -E "nodes.find(:name => '*') {|n| n.set['chef_client']['1'] ; n.save}"
[2013-04-14 06:22:30 -0400] tolland: rather than 1800
[2013-04-14 06:22:56 -0400] tolland: but this has the result that the nodes are looping over the chef-client continuously, which is fine, at least I can push a change,
[2013-04-14 06:23:03 -0400] tolland: but setting the change to the nodes like so
[2013-04-14 06:23:11 -0400] tolland: knife exec -E "nodes.find(:name => '*') {|n| n.set['chef_client']['1800'] ; n.save}"
[2013-04-14 06:23:46 -0400] tolland: fails because the node is 95% of the time in a client run, and hence over writes the attribute set at the end of the run, and then just ignores the value
[2013-04-14 06:24:07 -0400] tolland: I presume I can set an over ride instead, or edit the node directly
[2013-04-14 06:24:21 -0400] tolland: what is the prefered solution to set an attribute "forcibly"?
[2013-04-14 06:31:13 -0400] tolland: oh i think i see another typo
[2013-04-14 09:05:09 -0400] josh_: hey guys, anyone know if there is already a nagios chef plugin to check ohai time? i.e. when boxes last checked in?
[2013-04-14 10:06:23 -0400] kesor: how do I override an attribute of nginx cookbook in a wrapper cookbook?
[2013-04-14 10:29:43 -0400] josh_: set in the role kesor
[2013-04-14 10:30:00 -0400] kesor: I don't want to use roles, there have no versions.
[2013-04-14 11:34:42 -0400] tolland: josh_: do you mean to run a script under the nrpe on the server?
[2013-04-14 11:34:54 -0400] josh_: yup
[2013-04-14 11:35:39 -0400] josh_: tolland, http://jtimberman.housepub.org/blog/2013/02/16/last-check-in-time-for-nodes/
[2013-04-14 11:35:50 -0400] josh_: like this, but in nrpe form :)
[2013-04-14 11:38:07 -0400] tolland: if you have a local chef server, or some designated box to use, I would wrap [ "$(knife status -H | grep wc -l)" -gt 0 ] && echo "do something if there are any unhealthy nodes"
[2013-04-14 11:38:14 -0400] tolland: in a nrpe
[2013-04-14 11:38:53 -0400] tolland: if you are using the nagios cookbook, its pretty trivial
[2013-04-14 11:39:53 -0400] tolland: there is a nagios cookbook that includes a recipe for pushing the percona nrpe scripts, which is a good starting point for deploying nrpe
[2013-04-14 11:41:36 -0400] tolland: the nagios cookbook also has a nagios_nrpecheck resource for running arbitrary commands
[2013-04-14 11:42:49 -0400] tolland: http://community.opscode.com/cookbooks/nagios/source#
[2013-04-14 11:43:06 -0400] tolland: checkout the nrpecheck.rb provider
[2013-04-14 11:44:20 -0400] josh_: eh?
[2013-04-14 11:44:34 -0400] josh_: yup I am using that cookbook with many nrpe checks at te moment
[2013-04-14 11:45:05 -0400] josh_: but I just wanted to know if there is already a nagios plugin ro report on any chef nodes that have not checked-in for X time
[2013-04-14 11:45:33 -0400] tolland: josh_: ah yes, I see I misread the question
[2013-04-14 11:45:47 -0400] josh_: np, probably badly worded :)
[2013-04-14 11:48:42 -0400] josh_: hmm
[2013-04-14 12:08:23 -0400] thasmo: Hello! Can I find an example of cookbooks used with a wrapper cookbook somewhere, preferably for chef-solo?
[2013-04-14 13:02:59 -0400] kreisys: hey could anyone please help me figure out why my erchef suddenly started failing authentication with rabbitmq? :(
[2013-04-14 13:11:56 -0400] TipiT1: where does knife pull the cookbook when I say: knife cookbook site download <name-of-the-cookbook> ? Is there a repo setting somewhere and can I add there another repos?!
[2013-04-14 13:14:52 -0400] zts: TipiT1: it comes from the cookbook site, http://community.opscode.com/cookbooks/
[2013-04-14 13:15:45 -0400] TipiT1: Yes, I found: "knife cookbook site show <cookbook>" but where does the configuration come from that it is exactly: github.com/opscode-cookbooks/
[2013-04-14 13:17:03 -0400] TipiT1: zts: Ok, I think I got it now!
[2013-04-14 13:17:35 -0400] vegardx: I'm having some strange problems where one chef node doesn't list any of its recipes when I run knife search. All the nodes are identical, down to hardware and packages installed.
[2013-04-14 13:17:57 -0400] zts: TipiT1: it's important to realise that it's not pointing to github, and the community site has many more cookbooks than what is in github.com/opscode-cookbooks/
[2013-04-14 13:18:22 -0400] zts: TipiT1: anyone can upload cookbooks to the community site, and "cookbook site" will then be able to install them
[2013-04-14 13:18:51 -0400] TipiT1: zts: Yes, thanks man. And I found this: http://docs.opscode.com/api_cookbooks_site.html
[2013-04-14 13:19:01 -0400] TipiT1: So knife is just using the API
[2013-04-14 13:19:03 -0400] boris317: If I want to "override" attributes from one cookbook in another do I have to set them using a higher precedence method? e.g I want to set default["python"["prefix_dir"] in my cookbook attributes file
[2013-04-14 13:19:17 -0400] zts: TipiT1: ah handy, I hadn't seen that page
[2013-04-14 13:19:36 -0400] TipiT1: zts: Exactly. And now I feel stupid. :D
[2013-04-14 13:19:39 -0400] boris317: where default["python"["prefix"] dir has already been set in the python cookbook
[2013-04-14 13:19:46 -0400] boris317: prefix_dir*
[2013-04-14 13:23:31 -0400] zts: boris317: I imagine that will do the right thing if you use include_attribute from your cookbook to ensure that the python cookbook's attributes were loaded first, but I'm not certain
[2013-04-14 13:24:00 -0400] zts: boris317: if your intention is to override that attribute, why do you want to use 'default' instead of 'override' ?
[2013-04-14 13:24:18 -0400] boris317: I guess I have no good reason aside from reading you should use default most of the time
[2013-04-14 13:24:45 -0400] boris317: I wanted other cookbooks to be able to include my recipe and also override the attributes
[2013-04-14 13:25:01 -0400] boris317: include my cookbook*
[2013-04-14 13:25:38 -0400] boris317: basically my cookbook python-source wraps python and overrides some attributes. It uses the python::source recipe to compile python with enabled-shared from source
[2013-04-14 13:26:33 -0400] boris317: So I for instance I set python version and prefix with "sane" defaults, but I'd like other cookbooks to be able to include mine (python-source) and select the python version they want to install
[2013-04-14 13:28:40 -0400] zts: understood - try it and see, I guess, but I'd expect that if you have multiple attribute declarations at the same precedence level, the last one will win
[2013-04-14 13:28:50 -0400] zts: Also have a look at http://docs.opscode.com/essentials_node_object_deep_merge.html
[2013-04-14 13:29:33 -0400] boris317: thanks ya. I was working as expected with vagrant+chef_solo but not working correct when I tried with my chef server
[2013-04-14 15:54:30 -0400] thasmo: Where can I find a changelog of chef?
[2013-04-14 16:43:15 -0400] countdigi: in chef 11 are clients supposed to talk to erchef process directly on port 8000 (seems thats the default for omnibus install) or through a different process?
[2013-04-14 16:45:26 -0400] TipiT: I just overrided my Apache conf-files with Chef so where does Chef store the previous files? I know it keeps the last five of every updated files but where exactly?
[2013-04-14 16:47:24 -0400] KarlHungus: TipiT: /var/chef/backup
[2013-04-14 16:47:40 -0400] KarlHungus: *usually*
[2013-04-14 16:54:15 -0400] TipiT: KarlHungus: Thanks for quick answer. Found it and learnt something. :)
[2013-04-14 16:54:29 -0400] TipiT: *Learned
[2013-04-14 19:03:16 -0400] kesor: how do I override nginx version for nginx cookbook in a wrapper cookbook so that it actually works?
[2013-04-14 19:06:05 -0400] zastaph: Does chef client work in Windows 7? seems http://wiki.opscode.com/display/chef/Installing+Chef+Client+and+Chef+Solo was moved
[2013-04-14 19:06:18 -0400] zastaph: and http://www.opscode.com/chef/install/ doesnt list Windows 7 in the dropdown only servers
[2013-04-14 19:26:30 -0400] kesor: what is the best practice, to build from source during a chef run, or to install packages that someone built? or is there a way for chef to build packages and upload them, so that other nodes can re-use the uploaded package?
[2013-04-14 19:42:04 -0400] yfeldblum: kesor, the more robust way is to build packages (not using chef), store them in your own package repository, and use chef to install the packages
[2013-04-14 19:42:30 -0400] kesor: yfeldblum: what about building packages using chef and uploading them to a repository?
[2013-04-14 19:43:56 -0400] kesor: as building packages is quite difficult and error prone imho. and its a good candidate for more automation.
[2013-04-14 19:46:01 -0400] kesor: actually, omnibus comes in mind when talking about packaging.
[2013-04-14 19:49:48 -0400] yfeldblum: kesor, no
[2013-04-14 19:50:13 -0400] yfeldblum: kesor, you can use omnibus, but omnibus is for building full-stack isolated packages, not for building normal packages
[2013-04-14 19:50:30 -0400] yfeldblum: kesor, you can certainly use automation when building packages; e.g., jenkins can build them
[2013-04-14 19:50:32 -0400] yfeldblum: kesor, but not chef
[2013-04-14 19:50:33 -0400] kesor: would you call nginx+passenger a built stack?
[2013-04-14 19:50:46 -0400] yfeldblum: kesor, no
[2013-04-14 19:53:20 -0400] yfeldblum: kesor, you can look at fpm
[2013-04-14 21:43:18 -0400] ekarlso: is there any guide for writing cookbooks ?
[2013-04-14 21:53:33 -0400] log1kal: https://learnchef.opscode.com/common-use-cases/ntp/ may be a good place to start
[2013-04-14 21:54:04 -0400] log1kal: that's a pretty barebones starter
[2013-04-14 21:54:40 -0400] log1kal: but the other two ("bash -> chef", "multi-node EC2") go a bit deeper
[2013-04-14 22:06:13 -0400] jmartin: all, im trying to append a line to a file and it seems my method does not respect that the line already exists (i.e. it adds the line on every run) the code is https://gist.github.com/anonymous/5384430
[2013-04-14 22:06:34 -0400] jmartin: ive verified with rubular that my regex should match the string, but it seems to ignore it :(
[2013-04-14 22:09:20 -0400] jmartin: is there a better way to do this sort of in file edit? I saw that it was being refactored but not until a future release

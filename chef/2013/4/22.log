[2013-04-22 00:38:56 -0400] flaccid: anyone know if its possible with the application cookbooks to deploy a remote tarball for the app instead of version control repository?
[2013-04-22 00:41:40 -0400] ssd7: flaccid: Not that I know of, but I think that would be a great feature.  You might get close using the ark cookbook.
[2013-04-22 00:53:03 -0400] flaccid: ssd7: thanks y0, i'll keep it in mind
[2013-04-22 00:53:49 -0400] flaccid: ssd7: i just did this as a quick way https://github.com/flaccid/cookbooks/blob/master/cookbooks/concrete5/recipes/archive.rb
[2013-04-22 04:54:43 -0400] flaccid: with the template resource, is it possible to send variables that are in say @database['foo'] ?
[2013-04-22 04:55:17 -0400] flaccid: so like variables({ :database['foo'] => 'bar' }) ?
[2013-04-22 05:03:36 -0400] aruntomar: flaccid: i believe you want to use instance variables in templates, right?
[2013-04-22 05:04:29 -0400] flaccid: aruntomar: well the application_php cookbook creates @database['foo'] from the database sub-resource, but it doesn't support deploy by a remote url zip archive, so i have to do template resource myself
[2013-04-22 05:05:05 -0400] flaccid: i would like to be able to do variables option in template resource so template consumes placeholders such as <%= @database['image_upload_crop_size_limit'] %>
[2013-04-22 05:06:46 -0400] aruntomar: flaccid: yes, you can use instance variables in the templates. and you need to pass those variables via the recipe
[2013-04-22 05:07:35 -0400] aruntomar: flaccid: http://docs.opscode.com/essentials_cookbook_templates_variables.html
[2013-04-22 05:09:40 -0400] flaccid:  aruntomar thats what i am doing but i don't know the syntax for when its not a variable but an array or whatever it is,sorry i'm not a ruby guy
[2013-04-22 05:10:16 -0400] flaccid: aruntomar: so the example <%= @x_men %> in the template of mine its <%= @foo['x_men'] %>
[2013-04-22 05:10:43 -0400] flaccid: so how do i express that in the template resource variables?
[2013-04-22 05:19:14 -0400] aruntomar: flaccid: http://docs.opscode.com/essentials_cookbook_templates_requirements.html
[2013-04-22 05:19:59 -0400] flaccid: aruntomar: doesn't solve it
[2013-04-22 05:20:06 -0400] aruntomar: flaccid: in the link given note that :sudoers_users => node[:authorization][:sudo][:users] is taking an array
[2013-04-22 05:20:44 -0400] flaccid: aruntomar: it will still be @sudoers_users in the tempalte
[2013-04-22 05:20:47 -0400] flaccid: i need it like https://github.com/opscode-cookbooks/application_php/blob/master/README.md#usage
[2013-04-22 05:24:35 -0400] flaccid: i.e. <%= @database['quorum']
[2013-04-22 05:24:48 -0400] flaccid: not <%= @quorum
[2013-04-22 05:26:22 -0400] aruntomar: flaccid: yes, so here @database is the variable name, which is a hash
[2013-04-22 05:27:03 -0400] aruntomar: flaccid: and that @database is being passed internally by the LWRP in the cookbook
[2013-04-22 05:27:31 -0400] aruntomar: flaccid: https://github.com/opscode-cookbooks/application_php/blob/master/providers/cakephp.rb
[2013-04-22 05:29:22 -0400] aruntomar: flaccid: so if you are not overriding your templates or creating a custom template,then just using the LWRP should be enough, it'll internally pass that variable to the template.
[2013-04-22 05:42:30 -0400] flaccid: aruntomar: can you give me an example of the use in the template resource because i'm so confused atm..
[2013-04-22 05:48:57 -0400] aruntomar: flaccid: can you paste the code in gist, so that i can help you with what you are trying to do
[2013-04-22 05:55:45 -0400] flaccid: aruntomar: sure one sec
[2013-04-22 05:56:38 -0400] flaccid: aruntomar: this is the template i'd like to use https://github.com/flaccid/cookbooks/blob/master/cookbooks/concrete5/templates/default/site.php.erb
[2013-04-22 05:57:13 -0400] flaccid: aruntomar: this is what i am using now instead of @database coz i can't do it https://github.com/flaccid/cookbooks/blob/master/cookbooks/concrete5/recipes/configure.rb
[2013-04-22 05:57:47 -0400] flaccid: i'd rather share the template than have two different ones https://github.com/flaccid/cookbooks/tree/master/cookbooks/concrete5/templates/default
[2013-04-22 06:09:14 -0400] flaccid: i wonder if i can do application resource without deploy. i will give it a try
[2013-04-22 06:14:00 -0400] aruntomar: flaccid: so what happens when you try to use it as given in the example usage in https://github.com/opscode-cookbooks/application_php/blob/master/README.md
[2013-04-22 06:14:39 -0400] flaccid: aruntomar: that works fine, but i am not using the application resource here, i'm using the template resource because it does not support a deploy of a tarball
[2013-04-22 06:15:53 -0400] flaccid: i guess you can say i'm trying to avoid having to write what the application cookbook doesn't do
[2013-04-22 06:18:28 -0400] aruntomar: flaccid: so if the application resource does not support deploy of tarball, then most likely you'll have to write your own or modify the existing functionality and send a pull request to the authors.
[2013-04-22 06:18:53 -0400] flaccid: aruntomar: i am aware of that, but thats not what i'm trying to achieve here
[2013-04-22 06:19:14 -0400] flaccid: [14:54] <flaccid> with the template resource, is it possible to send variables that are in say @database['foo'] ?
[2013-04-22 06:19:15 -0400] flaccid: [14:55] <flaccid> so like variables({ :database['foo'] => 'bar' }) ?
[2013-04-22 06:26:32 -0400] aruntomar: flaccid: ok, in your template use this <code> variables ({:database => database_hash } ) </code> , here :database is a symbol that will be used in erb template as @database['some key '], assuming that the "database_hash" assigned is a hash.
[2013-04-22 07:10:50 -0400] _rup: hey all I am trying mount a mac filesystem  on a mac, i have done as mentioned in the docs here http://docs.opscode.com/resource_mount.html, but I cannot mount successfully. The issue is if I do sudo mount <mount command> it doesnot work, but doing it through just mount <mount command >  works fine
[2013-04-22 07:12:02 -0400] _rup: I don't want to use sudo here as chef-client does everything as a root .Is there a option to change the user ?
[2013-04-22 07:25:46 -0400] flaccid: aruntomar: thanks very much i will give it a whirl!
[2013-04-22 08:18:13 -0400] blitz_: hey, is there any workaround for Chef 11.4 to run without net-ssh 2.1.4?
[2013-04-22 08:18:33 -0400] blitz_: and use just net-ssh 2.6.7
[2013-04-22 08:22:28 -0400] ssd7: blitz_: Hrmm.  Looking at the gemspec 2.6.7 should be fine
[2013-04-22 08:22:31 -0400] ssd7:   s.add_dependency "net-ssh", "~> 2.6"
[2013-04-22 08:23:55 -0400] blitz_: running ruby says Could not find net-ssh (~> 2.1.4) amongst [...] net-ssh 2.6.7 [...]
[2013-04-22 08:34:11 -0400] blitz_: if I install net-ssh 2.1.4, I get this error "Unable to activate chef-11.4.0, because net-ssh-2.1.4 conflicts with net-ssh (~> 2.6) (Gem::LoadError)"
[2013-04-22 09:55:22 -0400] kechagia: remote_file seems to always use /tmp as a temporary directory, no matter what file_cache_path is set to. Is there a way to make it download to a different path? /tmp is not big enough to hold some of the files that I need temporarily. I worked around it using execute and wget, but foodcritic is judging me, so I'm looking for a "cleaner" approach.
[2013-04-22 10:19:08 -0400] gokr: I wonder why chef 11 is spewing out so much stuff when I do my chef run...
[2013-04-22 10:24:02 -0400] zts: gokr: noise?  If so, probably the change to default output mentioned here http://www.opscode.com/blog/2013/02/06/chef-11-in-depth-client-improvements/
[2013-04-22 10:25:16 -0400] zts: gokr: and if that's the case, running chef with --force-logger will probably give the old output back
[2013-04-22 10:25:19 -0400] gokr: Yeah, but I get completely confused by the information on that page.
[2013-04-22 10:25:28 -0400] gokr: Aha, so... ok.
[2013-04-22 10:25:36 -0400] zts: yeah, reading it now it occurs to me it might make more sense when you already know what the story is :/
[2013-04-22 10:25:58 -0400] gokr: So earlier I "only" got syslog output?
[2013-04-22 10:27:45 -0400] zts: so there are two kinds of output, the log output, and the "formatter" output - in Chef 11, the formatter output became enabled by default (prior to that, you had to select it)
[2013-04-22 10:28:27 -0400] gokr: And since I am using knife ec2 server create etc ... is there a way to "turn it off" in the client.rb file?
[2013-04-22 10:28:46 -0400] gokr: (no --force-logger option to knife ec2 I think)
[2013-04-22 10:29:01 -0400] gokr: But I have already hacked my own template so I can mess with client.rb.
[2013-04-22 10:29:03 -0400] zts: I was just trying to work that out, actually
[2013-04-22 10:29:26 -0400] gokr: I copied the chef-full template and threw in some "sed magic" at the end.
[2013-04-22 10:29:44 -0400] gokr: I did this last week to turn log_level to :info instead of :auto.
[2013-04-22 10:31:12 -0400] zts: so you can set the formatter in client.rb, and using command-line options "chef-client -l info -F null" gives me the old behaviour
[2013-04-22 10:31:27 -0400] zts: but setting formatter to :null in client.rb doesn't seem to have the same effect
[2013-04-22 10:31:50 -0400] zts: so I'm not sure about that one
[2013-04-22 10:31:54 -0400] gokr: Hmm.
[2013-04-22 10:41:42 -0400] gokr: zts: I can't see that client.rb supports anything called "formatter"?
[2013-04-22 10:46:30 -0400] gokr: Mmm, force_logger perhaps
[2013-04-22 10:46:57 -0400] zts: I notice it's not on the docs page for client.rb, though the code looks like it should work (I found the reference here: https://github.com/andreacampi/nyan-cat-chef-formatter/
[2013-04-22 10:47:15 -0400] zts: force_logger also looks like it should do the job, but doesn't seem to work for me
[2013-04-22 10:47:35 -0400] siXy: the docs for chef 11 are close to non-existent :/
[2013-04-22 10:49:01 -0400] MerlinDMC: anyone already tried to automate mac appstore downloads via chef recipes?
[2013-04-22 10:54:26 -0400] aruntomar: siXy: what problem r u facing with chef 11?
[2013-04-22 10:55:23 -0400] gokr: I think siXy commented on our slight confusion over how to disable formatter output etc.
[2013-04-22 10:58:35 -0400] bjensen: Can I get chef solo to execute a task for me after it has run a knife solo prepare? I want it to copy over a ssh key for passwordless interaction
[2013-04-22 11:03:36 -0400] gokr: zts: Setting "force_logger true" and "log_level :info" in solo.rb worked for me.
[2013-04-22 11:04:25 -0400] zts: gokr: oh cool, I must have done something wrong when I tried.  Thankyou for reporting back!
[2013-04-22 11:04:45 -0400] gokr: No prob
[2013-04-22 11:16:38 -0400] gudmundur: is it possible to include a 3rd party resource provider in my own provider? for example including nginx_site?
[2013-04-22 11:33:08 -0400] gchristensen: gudmundur: yes that should be fine. depend on the nginx cookbook for it to be accessible.
[2013-04-22 11:36:05 -0400] new2chef: hello, is there a problem with wiki.opscode.com? I can't load the pages. Any other source you can recommend about chef where I can read about it (features, benefits, etc.)?
[2013-04-22 11:36:52 -0400] new2chef: oh, solved, finally loaded
[2013-04-22 12:30:57 -0400] adamr: Hi there, can anyone provide some resources to find out more about the default templates directory and how to customize it?
[2013-04-22 12:42:09 -0400] adamjk-dev: adamr: http://docs.opscode.com/essentials_cookbook_templates.html   http://docs.opscode.com/resource_template.html
[2013-04-22 12:48:52 -0400] Death_Syn: new2chef: i recommend checking out docs.opscode.com for current docs
[2013-04-22 12:49:24 -0400] adamr: adamjk-dev: thanks for that - the last one helps out a bit. Do you know of a best practice when you need to generate multiple templates within a recipe? I have ~10 templates in a folder, and I can write them out in an array and loop through it, but I'd prefer to use Dir.foreach
[2013-04-22 12:51:40 -0400] gchristensen: adamr: best practice is generally not to make your recipes "magic". they are documentation of what you want, so be explicit instead of implicit. ... that is my general feel for how #chef tends to lean anywho.
[2013-04-22 12:53:14 -0400] adamr: gchristensen: so it would be ok to sacrifice some "elegance" for better readbility and explict-ness - basically, add all the template file names to an array so that it is clear for the next one coming along which files are being generated with the given template block
[2013-04-22 12:53:39 -0400] gchristensen: adamr: exactly :)
[2013-04-22 12:54:12 -0400] adamr: gchristensen: in that case, I can keep my recipe as-is ^_^
[2013-04-22 13:10:21 -0400] adamjk-dev: yeah, I don't know much for the best practice at the moment
[2013-04-22 13:10:31 -0400] adamjk-dev: but what was said makes sense I presume
[2013-04-22 14:43:40 -0400] sanguisdex: where can I find a list of vagrant images that opscode puts out
[2013-04-22 14:45:54 -0400] nlloyds: sanguisdex: I don't think they are planning on maintaining their own in the future. You can use the https://github.com/schisamo/vagrant-omnibus plugin with any box, and there are some (with slightly older chef versions) linked to at https://github.com/opscode/bento
[2013-04-22 14:46:31 -0400] nlloyds: sanguisdex: Not sure what their official docs say on this.
[2013-04-22 14:46:40 -0400] sanguisdex: nlloyds: thanks :)
[2013-04-22 14:47:27 -0400] nlloyds: sanguisdex: jtimberman also recently released a vagrant cookbook for installing vagrant in vagrant plugins: http://community.opscode.com/cookbooks/vagrant
[2013-04-22 14:49:47 -0400] lojak: is there a chef recipe that handles ssl certificates?
[2013-04-22 14:50:05 -0400] lojak: cookbook*
[2013-04-22 14:52:03 -0400] barefoot: define handle?
[2013-04-22 14:53:11 -0400] lojak: that can either create a self signed certificate, or will take what I put in a databag and add it to the server
[2013-04-22 14:54:22 -0400] nlloyds: lojak: Looks like http://community.opscode.com/cookbooks/ssl can create them from data bags, but I've never used it.
[2013-04-22 14:55:16 -0400] nlloyds: lojak: From the opscode chef-repo you can do rake ssl_cert, to create a self-signed, which is handy
[2013-04-22 15:00:59 -0400] alex_: hi, is it possible to set a node variable when a command fails?
[2013-04-22 15:02:31 -0400] lojak: nlloyds: is there a way to push those certs to the chef server, or is that mainly just a utility function?
[2013-04-22 15:02:54 -0400] zts: lojak: there's also http://community.opscode.com/cookbooks/x509 although that's intended for use with your own CA (it creates self-signed certificates first, though)
[2013-04-22 15:03:15 -0400] nlloyds: lojak: I think it's just a handy thing. You'll have to manage them yourself or with an existing cookbook
[2013-04-22 15:03:46 -0400] lojak: well, it is handy
[2013-04-22 15:04:53 -0400] alex_: is it possible to notify a ruby block which sets a node variable?
[2013-04-22 15:04:59 -0400] lojak: alright, thanks a lot
[2013-04-22 15:15:00 -0400] leifmadsen: alex_: you can, but you need to use the lazy{} method
[2013-04-22 15:16:03 -0400] alex_: lazy?
[2013-04-22 15:16:12 -0400] leifmadsen: https://github.com/chrisroberts/cookbook-delayed_evaluator
[2013-04-22 15:16:40 -0400] alex_: i do now have ruby_block "set_jenkins_version" do
[2013-04-22 15:16:40 -0400] alex_:         block do
[2013-04-22 15:16:40 -0400] alex_:                 version = `cat /var/tmp/latestJenkins`
[2013-04-22 15:16:40 -0400] alex_:                 node['jenkins']['version'] = version
[2013-04-22 15:16:40 -0400] alex_:         end
[2013-04-22 15:16:42 -0400] alex_:         action :nothing
[2013-04-22 15:16:45 -0400] alex_:         supports :create => true
[2013-04-22 15:16:47 -0400] alex_: end
[2013-04-22 15:16:52 -0400] leifmadsen: alex_: you should be using pastebin or gist
[2013-04-22 15:17:03 -0400] alex_: but me node says version = true
[2013-04-22 15:17:05 -0400] alex_: o oke
[2013-04-22 15:17:06 -0400] leifmadsen: alex_: and yes, you need to use the link I posted to get access to the node attribute
[2013-04-22 15:17:09 -0400] alex_: sorry
[2013-04-22 15:17:28 -0400] alex_: the node attribute is set\
[2013-04-22 15:17:36 -0400] alex_: but with a wrong var
[2013-04-22 15:17:40 -0400] leifmadsen: I know
[2013-04-22 15:17:46 -0400] leifmadsen: hence why you need to use the stuff in the link I gave you
[2013-04-22 15:17:50 -0400] alex_: says true instead of 1.5.21
[2013-04-22 15:18:00 -0400] alex_: o oke
[2013-04-22 15:18:01 -0400] leifmadsen: look at the example on the link
[2013-04-22 15:18:07 -0400] leifmadsen: I wasn't posting links just for fun :)
[2013-04-22 15:20:14 -0400] |rt|: anyone know where the repo that includes the group resource is found in github?
[2013-04-22 15:20:35 -0400] alex_: that is not what i want
[2013-04-22 15:21:02 -0400] alex_: i dont care about my node version number in other pieces of the script
[2013-04-22 15:21:14 -0400] alex_: i only need to set is
[2013-04-22 15:21:18 -0400] alex_: it*
[2013-04-22 15:23:35 -0400] barefoot: alex_: could also make a ohai mod to get the version
[2013-04-22 15:24:28 -0400] |rt|: I think I found it https://github.com/opscode/chef/blob/master/lib/chef/resource/group.rb
[2013-04-22 15:24:56 -0400] alex_: no i want to set a version of a program i installed the version number is inside the file
[2013-04-22 15:26:07 -0400] barefoot: ah my bad
[2013-04-22 15:26:29 -0400] makerbreakr: what would be taking up the bulk of disk space in chef?
[2013-04-22 15:26:54 -0400] alex_: but is it possible to get the version number out of the file
[2013-04-22 15:27:00 -0400] alex_: and set it in a var
[2013-04-22 15:27:01 -0400] makerbreakr: i have a basic system, and its using almost 300G
[2013-04-22 15:27:13 -0400] gchristensen: good grief
[2013-04-22 15:27:22 -0400] alex_: makerbrea maybe backups?
[2013-04-22 15:27:22 -0400] makerbreakr: is there some way to purge not needed stuff?
[2013-04-22 15:27:53 -0400] alex_: what ever it is you are placing it :P
[2013-04-22 15:28:08 -0400] jtimberman: |rt|: correct, the "group" resource is part of core chef.
[2013-04-22 15:28:26 -0400] gchristensen: makerbreakr: can you identify what is taking up the disk space?
[2013-04-22 15:28:42 -0400] jtimberman: makerbreakr: is this on a chef server or a chef client?
[2013-04-22 15:29:07 -0400] |rt|: jtimberman: yeah trying to trouble shoot an issue with freebsd that I've run into
[2013-04-22 15:29:10 -0400] makerbreakr: chef server
[2013-04-22 15:29:14 -0400] jtimberman: makerbreakr: chef 10?
[2013-04-22 15:29:22 -0400] jtimberman: probably couchdb database needs compaction
[2013-04-22 15:29:30 -0400] makerbreakr: 10.18
[2013-04-22 15:29:38 -0400] jtimberman: yup. see this page: http://wiki.opscode.com/display/chef/CouchDB+Administration+for+Chef+Server
[2013-04-22 15:30:10 -0400] jtimberman: fwiw, no couchdb in Chef 11 :)
[2013-04-22 15:30:54 -0400] alex_: when comes chef 11?
[2013-04-22 15:31:02 -0400] jtimberman: alex_: it's been out since February.
[2013-04-22 15:31:07 -0400] alex_: ah oke
[2013-04-22 15:31:12 -0400] makerbreakr: jtimberman, that did not free up much
[2013-04-22 15:31:19 -0400] makerbreakr: about a gig
[2013-04-22 15:31:21 -0400] jtimberman: makerbreakr: did you compact the views?
[2013-04-22 15:31:36 -0400] jtimberman: are you putting large binary files in cookbooks? :)
[2013-04-22 15:31:47 -0400] alex_: i do some
[2013-04-22 15:31:50 -0400] alex_: why?
[2013-04-22 15:32:37 -0400] alex_: is it bad?
[2013-04-22 15:34:09 -0400] makerbreakr: jtimberman, my chef repo isnt that large
[2013-04-22 15:34:12 -0400] makerbreakr: 17392 bytes
[2013-04-22 15:34:18 -0400] makerbreakr: its all typical recipes
[2013-04-22 15:34:49 -0400] makerbreakr: https://gist.github.com/coderforhire/4ef79e19a32e00b83aec
[2013-04-22 15:35:05 -0400] makerbreakr: nothing seems to crazy large ither
[2013-04-22 15:36:13 -0400] jpluscplusm: makerbreakr: did you say 300 or 30 gig? I only see >handwave< 30 in that gist ...
[2013-04-22 15:36:19 -0400] makerbreakr: hrm, the compaction doesnt seem to be running now
[2013-04-22 15:36:36 -0400] jpluscplusm: if 30, drill on down further with the du and chase those 23 gig down
[2013-04-22 15:36:48 -0400] makerbreakr: hrm, the compaction just freed it all up
[2013-04-22 15:36:51 -0400] makerbreakr: i guess it took a bit
[2013-04-22 15:36:59 -0400] makerbreakr: went form 99% user down to 10%
[2013-04-22 15:37:02 -0400] makerbreakr: use*
[2013-04-22 15:37:16 -0400] makerbreakr: thanks!
[2013-04-22 15:37:31 -0400] makerbreakr: should I setup a cron job to run that, or will it do it automatically from now on
[2013-04-22 15:38:38 -0400] jtimberman: makerbreakr: it doesn't do it automatically.
[2013-04-22 15:39:11 -0400] jtimberman: but chef-server (1.1.0) (ckbk.it/chef-server) default recipe will
[2013-04-22 15:39:21 -0400] makerbreakr: cool, thanks
[2013-04-22 15:42:16 -0400] jtimberman: note that cookbook will at some point soonish be updated for Chef 11 (the source repository is), and we recommend upgrading.
[2013-04-22 15:42:43 -0400] jtimberman: fwiw, http://www.opscode.com/blog/2013/03/12/5106/
[2013-04-22 15:43:18 -0400] siezer: http://cdn.memegenerator.net/instances/400x/37184513.jpg
[2013-04-22 15:43:49 -0400] makerbreakr: cool thanks
[2013-04-22 15:43:57 -0400] jtimberman: siezer: lmao
[2013-04-22 15:44:27 -0400] siezer: =)=)
[2013-04-22 15:44:39 -0400] cwj: jtimberman: i have a recipe that installs a start handler via chef_handler lwrp, but it never fires because start handlers have already run. is it possible for me to have the recipe run the start handlers again?
[2013-04-22 15:44:58 -0400] aruntomar: jtimberman: the current firewall cookbook only supports ubuntu and uses ufw. what are the plans for centos or other linux those don't have ufw.
[2013-04-22 15:45:16 -0400] jtimberman: cwj: I've not used start handlers. seems like a thing that really should be prepared in the bootstrap though.
[2013-04-22 15:45:49 -0400] jtimberman: aruntomar: no roadmap/plans by opscode at this time for that cookbook, but i know it's a pain point.
[2013-04-22 15:46:28 -0400] cwj: someone else on my team tried to solve it by shoehorning stuff into a fork of the chef-client cookbook, an approach i am not liking
[2013-04-22 15:48:37 -0400] zts: oh wow, I didn't even know start handlers were a thing
[2013-04-22 15:50:23 -0400] cwj: afaict they are not really discussed in the documentation, probably because the code was contributed by someone outside opscode
[2013-04-22 15:51:12 -0400] gleam: that does seem to be the case
[2013-04-22 15:51:45 -0400] zts: yeah, I can find the ticket, but no other mention anywhere
[2013-04-22 15:52:18 -0400] alex_: can somebody tell me what i am doing wrong here:
[2013-04-22 15:52:23 -0400] alex_: not_if "echo \"#{node['jenkins']['version']}\" | diff - /var/tmp/latestJenkins"
[2013-04-22 15:53:14 -0400] alex_: it isnt skipping
[2013-04-22 15:54:34 -0400] cwj: the not_if is checking for the exit code ($?) of the command you specify, is that command returning the same thing for both success and failure?
[2013-04-22 15:55:20 -0400] alex_: $? should return 0 if they are both the same and 1 when they are not
[2013-04-22 15:55:22 -0400] alex_: [2013-04-22T17:49:14+02:00] INFO: Processing remote_file[/opt/tomcat-internal/webapps/jenkins.war] action create (devops::jenkins line 10)
[2013-04-22 15:55:25 -0400] alex_: 1c1
[2013-04-22 15:55:28 -0400] alex_: < 1.512
[2013-04-22 15:55:31 -0400] alex_: ---
[2013-04-22 15:55:33 -0400] alex_: > 1.512
[2013-04-22 15:56:10 -0400] gchristensen: alex_: if you run chef, and then run chef again, it changes it each time/ looks just like a whitespace issue or something.
[2013-04-22 16:03:03 -0400] dcrosta: what's the correct syntax for setting override attributes when doing `knife node edit` -- is it "override" as a top-level key?
[2013-04-22 16:05:46 -0400] nlloyds: dcrosta: Yes I think so.
[2013-04-22 16:07:15 -0400] dcrosta: nlloyds it doesnt appear to work -- says "Node not updated, skipping node save"
[2013-04-22 16:07:42 -0400] dcrosta: are override attributes not saved, perhaps?
[2013-04-22 16:08:06 -0400] nlloyds: dcrosta: What if you give it a `knife node edit -a node-name`
[2013-04-22 16:09:14 -0400] dcrosta: nlloyds ah, cool. thanks
[2013-04-22 16:31:16 -0400] djustin: I'm having difficulty bootstrapping a windows VM, where it is it's own DNS, and has no DNS suffix...I'm getting 401 errors on attempt to bootstrap.  The station is setup with winrm, regedits, and winrm setup (same steps allow me to bootstrap other vm's which are a part of a seperate DNS...also tried adding the computer to my hosts file, with no luck
[2013-04-22 16:31:38 -0400] djustin: any tips?
[2013-04-22 16:55:09 -0400] techminer: Is there a way to parse an XML file for a key-value from a Chef recipe?
[2013-04-22 16:57:09 -0400] siezer: techminer import an xmlparsing rubygem in the compilation phase, use it to spit resources on the collection
[2013-04-22 16:57:31 -0400] nlloyds: techminer: You should be able to use a chef_gem resource to get something like nokogiri
[2013-04-22 16:58:43 -0400] techminer: Nokogiri thenI've used that before.  So add a chef_gem resource to install nokogiri on the node.  Will that require ruby on the node..or does it just add it so chef can use it?
[2013-04-22 17:00:13 -0400] techminer: I'm reading the docs..it's just local to Chef it looks like...
[2013-04-22 17:00:24 -0400] nlloyds: techminer: Check out http://docs.opscode.com/resource_chef_gem.html . You should be able to chef_gem 'nokogiri'; require 'nokogiri'; Nokogiri::XML.open...
[2013-04-22 17:02:06 -0400] a13x212: i'm running a ruby_block as part of a cookbook, it doesn't seem to run on first attempt, on second attempt it works
[2013-04-22 17:19:37 -0400] kindsol: a13x212: bizarre.  can you post the ruby_block?
[2013-04-22 17:20:36 -0400] techminer: nlloyds:  or should I just use jtimberman's xml cookbook?  https://github.com/opscode-cookbooks/xml
[2013-04-22 17:34:24 -0400] gyre007: can I list ALL available chef omnibus versions ?
[2013-04-22 17:35:00 -0400] gyre007: I'd like see all available versions
[2013-04-22 17:35:35 -0400] nlloyds: techminer: That looks like a better idea. If you `include_recipe 'xml::ruby', it will ensure the dependencies are installed and then do `chef_gem 'nokogiri'` anyway. (according to https://github.com/opscode-cookbooks/xml/blob/master/recipes/ruby.rb )
[2013-04-22 17:36:45 -0400] nlloyds: gyre007: On http://www.opscode.com/chef/install/ select your platform and then look on the select box under "Downloads"
[2013-04-22 17:37:56 -0400] gyre007: nah
[2013-04-22 17:38:03 -0400] gyre007: I cant see all versions
[2013-04-22 17:38:14 -0400] gyre007: are those only stable versions or something ?
[2013-04-22 17:38:29 -0400] gyre007: because we are running 10.18.2 and i cant see it htere
[2013-04-22 17:39:47 -0400] nlloyds: gyre007: I see ["10.12.0-1", "10.14.0-1", "10.14.2-1", "10.14.4-1", "10.14.4-2", "10.16.0-1", "10.16.2-1", "10.16.4-1", "10.16.4-2", "10.16.6-1", "10.18.0-1", "10.18.2-1", "10.18.2-2", "10.20.0-1", "10.22.0-1", "10.24.0-1", "11.0.0-1", "11.2.0-1", "11.4.0-1"]
[2013-04-22 17:40:05 -0400] gyre007: mm i dont
[2013-04-22 17:40:22 -0400] nlloyds: If I pick Debian 6 i686, for example
[2013-04-22 17:40:39 -0400] nlloyds: gyre007: Which platform did you do?
[2013-04-22 17:41:10 -0400] gyre007: OS X
[2013-04-22 17:41:40 -0400] gyre007: basically I'd like to have chef-client version on our mac books same as on the chef server...not that it would matter but I HATE inconsistency
[2013-04-22 17:41:48 -0400] nlloyds: gyre007: This is what I'm seeing: http://is.gd/ABo4BV
[2013-04-22 17:42:26 -0400] gyre007: Sorry, we couldn't find the shortened URL you requested. The link you followed may be invalid, or an evil wizard may have cast a spell on our server
[2013-04-22 17:42:29 -0400] gyre007: mm
[2013-04-22 17:42:43 -0400] nlloyds: http://dl.dropboxusercontent.com/u/360364/Screenshots/Screen%20Shot%202013-04-22%20at%2012.41.30%20PM.png
[2013-04-22 17:43:47 -0400] gyre007: strange thats not what im seeing
[2013-04-22 17:44:19 -0400] nlloyds: gyre007: Weird. Well, any of those should work with the omnibus installer
[2013-04-22 17:44:33 -0400] gyre007: cool
[2013-04-22 17:45:31 -0400] techminer: nlloyds:  thanks.got it installed.now just have to figure out how to parse the value I'm looking for..but that's a Nokogiri problem  :)
[2013-04-22 17:47:46 -0400] gansbrest: hi. When I do 'knife cookbook upload cookbook' (following tutorial) - I'm getting /opt/chef/embedded/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: Name or service not known (SocketError)
[2013-04-22 17:49:45 -0400] nlloyds: gansbrest: Does `knife node list` do anything?
[2013-04-22 17:50:47 -0400] rayrod2030: anybody do any automation work with vcloud director?
[2013-04-22 17:50:50 -0400] gansbrest: yep, returns my chef-server hostname
[2013-04-22 17:51:47 -0400] nlloyds: gansbrest: Does running it with -VV provide anything useful?
[2013-04-22 17:54:10 -0400] gansbrest: Sending HTTP Request via GET to chef-server.mydomain.net:443/nodes
[2013-04-22 17:54:23 -0400] gansbrest: sounds right
[2013-04-22 17:55:06 -0400] gansbrest: all other knife commands seem to be working fine, I was able to create / delete instances and saw them in the admin UI on the server
[2013-04-22 17:55:52 -0400] gansbrest: mayb it's some how related with HTTPS ?
[2013-04-22 17:56:09 -0400] wassy121_: Hi there fellow chef folks.
[2013-04-22 17:56:29 -0400] gansbrest: I'm using chef 11.4
[2013-04-22 17:56:35 -0400] techminer: how do I print out a variable during my chef run..trying to debug some Nokogiri stuff and I need to see what the values are
[2013-04-22 17:56:40 -0400] vegardx: gansbrest: are you sure you're able to search on the chef server?
[2013-04-22 17:56:56 -0400] holoway: http://www.opscode.com/blog/2013/04/22/reflections-on-5-years-as-an-open-source-company/ < if you're interested in my pre-chef conf reflections
[2013-04-22 17:56:58 -0400] wassy121_: I am trying to accomplish something a little odd, and was wondering: how can I add a recipe at the very end the run list?  As in, I have roles that inherit from other roles, and I need this recipe to run last, no matter what
[2013-04-22 17:56:59 -0400] nlloyds: techminer: Chef::Log.info('something')
[2013-04-22 17:57:11 -0400] techminer: nlloyds.thanks again
[2013-04-22 17:57:40 -0400] mconigliaro: hey guys, any opinions on community cookbooks vs writing your own? http://www.quora.com/Chef-Configuration-Management-Software/Use-of-community-cookbooks-vs-writing-your-own
[2013-04-22 17:57:53 -0400] gansbrest: vegardx: I didn't try search since I was adding a killing machines, but I saw them in the nodes list
[2013-04-22 18:00:25 -0400] wassy121_: So, I've got this idea to run a recipe, that has in it a ruby block that executes post-compilation that adds a recipe to the end of the run_list and negotiates from there.  Good idea/bad idea?
[2013-04-22 18:03:59 -0400] jessicab1: mconigliaro: bryan berry has a good blog post on that subject if you havent seen it - http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-04-22 18:04:12 -0400] mconigliaro: ah yes, i did see this
[2013-04-22 18:04:28 -0400] mconigliaro: thanks
[2013-04-22 18:06:11 -0400] holoway: mconigliaro: I've seen what your saying as the most common thing - sometimes you can use a community cookbook, and if you can, awesome
[2013-04-22 18:06:32 -0400] holoway: mconigliaro: but most production environments that didn't start out just swallowing all the original authors assumptions can't
[2013-04-22 18:11:53 -0400] k0rupted: if I use the chef client cookbook delete validation key... I am able to delete the client out of chef right? That way I only have the nodes listed?
[2013-04-22 18:11:54 -0400] gansbrest: Interesting, the problem turned out to be related to the fact that there was no active nodes ( since I removed all of test ones). But I suppose I still should be able to upload cookbooks to the server even if there are no active nodes yet?
[2013-04-22 18:12:05 -0400] k0rupted: under clients*
[2013-04-22 18:14:00 -0400] gansbrest: oh, no, forget what I said - the problem is still with me when I do knife cookbook upload getting-started
[2013-04-22 18:14:12 -0400] gansbrest: (did install before and thought it worked)
[2013-04-22 18:14:44 -0400] gansbrest: knife cookbook upload getting-started
[2013-04-22 18:14:44 -0400] gansbrest: Uploading getting-started [0.4.0]
[2013-04-22 18:14:44 -0400] gansbrest: /opt/chef/embedded/lib/ruby/1.9.1/net/http.rb:762:in `initialize': getaddrinfo: Name or service not known (SocketError)
[2013-04-22 18:14:55 -0400] k0rupted: oh nm, answered my own question. ...
[2013-04-22 18:15:04 -0400] chefnoobie: Anyone using chef on (Cisco) networking devices?
[2013-04-22 18:15:35 -0400] k0rupted: do have another though... for adding other adminstrators ... what is better practice. to share the default/main validation.pem API key... or to create a new one per user?
[2013-04-22 18:17:20 -0400] nlloyds: gansbrest: Do you have any knife plugins installed? http://tickets.opscode.com/browse/KNIFE-181 mentions one.
[2013-04-22 18:17:35 -0400] gansbrest: ec2
[2013-04-22 18:41:57 -0400] cjerdonek: newbie question: when running 'knife bootstrap' to install chef on a local VM created with vagrant
[2013-04-22 18:42:21 -0400] cjerdonek: should 'knife bootstrap' be run from the chef-repo or from the project repo containing the Vagrantfile?
[2013-04-22 18:42:39 -0400] cjerdonek: i'm following the docs here: https://learnchef.opscode.com/quickstart/converge/
[2013-04-22 18:43:41 -0400] skarufue: hello. is there a way to have databags which cannot be read by every attached node? if not is it possible to get a interactive (shell) prompt kinda like the git provider does for username/password
[2013-04-22 18:44:56 -0400] siezer: skarufue nope. the best you could do is encrypt the databag with a key thats only disted to a nod (out of band of chef)
[2013-04-22 18:44:59 -0400] hikeit1: you could encrypt the data bags and only give the decryption key to specific nodes
[2013-04-22 18:47:21 -0400] skarufue: well that is kinda annoying. but I expected as much. since i have to attend the first chef run anyway. how does one write a prompt to ask for userinput in a recipe?
[2013-04-22 18:48:00 -0400] behemphi: Ohai Chefs.  I have a remote_file I want to get at (splunkstorm forwarder) but it is behind a login.  I don't see attributes for remote_file that allow me to authenticate to get at the file.  Anyone with some experience/suggestions on how to do this?
[2013-04-22 18:57:18 -0400] nlloyds: behemphi: If it's basic auth you should be able to do https://user:pass@host/...
[2013-04-22 19:00:13 -0400] failshell: do you guys know of a tool that could 'orchestrate' chef/deployments. by that  i mean, im pushing code in production, i have to comment a node in haproxy, run chef, wash, rinse, repeat. would be nice to have a deployment tool that could automate all that.
[2013-04-22 19:03:08 -0400] behemphi: @nlloyds no luck.  I am thinking about just including the forwarder file (all 4.8 meg of it) in the wrapper cookbook
[2013-04-22 19:03:19 -0400] behemphi: that seems like a rather large sledgehammer though
[2013-04-22 19:03:38 -0400] gleam: failshell: look into rundeck
[2013-04-22 19:04:38 -0400] failshell: gleam: thanks
[2013-04-22 19:05:14 -0400] nlloyds: behemphi: Yeah I've had to do that before but it stinks. Maybe you can ask splunk if they'll give you a direct link ore something.
[2013-04-22 19:05:52 -0400] behemphi: Bummer, but good to know.  Thx nlloyds
[2013-04-22 19:06:49 -0400] nlloyds: behemphi: You could try using the http_request resource I suppose, and get a cookie and so on, but it seems like a lot of work and probably would end badly.
[2013-04-22 19:07:58 -0400] behemphi: "end badly"  sounds like Monday!  I did not remember that resource, so it is worth fiddling with anyway.  Thanx nlloyds
[2013-04-22 19:08:11 -0400] nlloyds: :)
[2013-04-22 19:17:28 -0400] sanguisdex: how do I trouble shoot " Role lempBasic (included by 'top level') is in the runlist but does not exist" with chef-solo?
[2013-04-22 19:28:11 -0400] kallistec: Chef code review: https://plus.google.com/hangouts/_/e8fc288a69e158aee41de13cbd8e03636233eed5?authuser=0&hl=en
[2013-04-22 19:28:36 -0400] behemphi: @sanguisdex are you sure that is a role?  and if so is the case correct?
[2013-04-22 19:28:48 -0400] behemphi: I am not familiar with solo, but have been caught by that
[2013-04-22 19:37:30 -0400] pcn: failshell: last year there was a message to the mailing list from opscode asking for the community's use cases
[2013-04-22 19:38:06 -0400] pcn: failshell: it's sort of common to use search on node attributes and/or databags to do primitive formation of clusters, but it's hacky
[2013-04-22 19:43:30 -0400] failshell: pcn: yeah we use that, but that's not what i need
[2013-04-22 19:43:50 -0400] failshell: i need something the connects to the load balancer, remove a node from rotation, run chef on the node, test, reenable
[2013-04-22 19:43:55 -0400] failshell: wash, rinse, repeat
[2013-04-22 19:44:48 -0400] zts: failshell: you might want to look at things like mcollective and rundeck
[2013-04-22 19:45:05 -0400] pcn: failshell: got it.  If you have something you're happy with, please share.  It's been something I'd like to be able to do with minimal infrastructure additions
[2013-04-22 19:45:33 -0400] failshell: ill check mcollective, as its not Java
[2013-04-22 19:45:40 -0400] failshell: rundeck might be it too, but its JAva
[2013-04-22 19:45:42 -0400] failshell: :)
[2013-04-22 19:46:16 -0400] zts: mcollective's ruby, but it does depend on having a message broker
[2013-04-22 19:46:30 -0400] zts: most people use activemq, though I understand it'll also work with rabbitmq
[2013-04-22 19:46:36 -0400] log1kal: failshell: we use java as a frontend to fabric for that kind of task
[2013-04-22 19:46:38 -0400] failshell: eww activemq
[2013-04-22 19:46:40 -0400] log1kal: er
[2013-04-22 19:46:46 -0400] log1kal: rundeck, not java.
[2013-04-22 19:48:05 -0400] failshell: not going to spend too much time on this just yet though. our new F5 LBs are ordered. so need to wait to see how i can interact with it
[2013-04-22 19:49:41 -0400] pcn: failshell: if you can make your run list small, f5s give you a shell.  You can do ridiculous things with them, and a chef run in cron isn't out of the question.
[2013-04-22 19:50:39 -0400] pcn: In the past they have tended to be very sensitive to custom processes that consume cpu and memory, so using single runs out of cron would be pretty simple
[2013-04-22 19:51:35 -0400] pcn: E.g. in the past I've done custom perl scripts, python scripts to check the upness of infrastructure from a central server, they give you quagga and you can manipulate routing tables from the shell,e tc.
[2013-04-22 19:51:43 -0400] failshell: last I used F5s they were still running FreeBSD
[2013-04-22 19:51:53 -0400] failshell: so that's been a long long time :)
[2013-04-22 19:51:57 -0400] pcn: AFAIK they were never FreeBSD, but BSDi
[2013-04-22 19:52:00 -0400] chip-: failshell: Assuming you've seen https://devcentral.f5.com/tech-tips/articles/automating-web-app-deployments-with-opscode-chef-and-icontrol ?
[2013-04-22 19:52:54 -0400] failshell: yeah
[2013-04-22 19:55:31 -0400] CharlieSu: I'm running chef-client w/ the runit init_style, and I'm noticing that memory usage goes up over time.  Has anyone else ever experienced this?  https://gist.github.com/CharlieSu/fcbdab5ecbb361031efb
[2013-04-22 19:57:30 -0400] techminer: Can I capture the value of an execute block?  I want to run a system command, and then based on what is returned run another system command.
[2013-04-22 19:58:53 -0400] behemphi: @techminer why not do that in a single bash block?
[2013-04-22 20:00:53 -0400] techminer: behemphi: the script resource?
[2013-04-22 20:01:17 -0400] jtimberman: COOK code review Hangout: https://plus.google.com/hangouts/_/bf9ec2d39d5bf2a6b8b53d34b138616c6ad752a1 Livestream: http://youtu.be/qi7EEAt-uD0
[2013-04-22 20:02:45 -0400] nlloyds: techminer: you could to `command 'some_command > /path/to/some/file'` in the execute resource and then do something based on what's in /path/to/some/file
[2013-04-22 20:02:56 -0400] CharlieSu: As you can see, running 'sv d chef-client && sv u chef-client' frees up memory.  https://gist.github.com/CharlieSu/e627f0a4828714561a90
[2013-04-22 20:04:07 -0400] techminer: nlloyds:  ah I see, that would work.better than writing a short ruby_block to do it?
[2013-04-22 20:04:58 -0400] nlloyds: techminer: not sure if it would be better or not
[2013-04-22 20:05:31 -0400] behemphi: @techminer the script resource will do it.  Since I script in bash, it would be the bash resource for me.  Sorry for the confusion
[2013-04-22 20:08:28 -0400] jtimberman: cook review youtube stream on hold until other party members join :)
[2013-04-22 20:10:23 -0400] jackl0phty: awright see all you chefs at chefconf! Doing my happy dance.....gangnam style!
[2013-04-22 20:13:47 -0400] monokrome: Has anyone ran into this error using the application cookbook?
[2013-04-22 20:13:50 -0400] monokrome: error: cannot open .git/FETCH_HEAD: Permission denied
[2013-04-22 20:13:59 -0400] monokrome: I've set owner and group on everything to the same user/group
[2013-04-22 20:14:08 -0400] monokrome: So, it seems a bit confusing that I'd be getting a permission error
[2013-04-22 20:18:12 -0400] monokrome: Found the issue. Apparently this happens when you have multiple applications in the same machine that use the same git dependency in application_python.
[2013-04-22 20:18:24 -0400] monokrome: (as a requirement)
[2013-04-22 20:18:49 -0400] monokrome: the stuff in /tmp/ seems to be owned by root, and the second application fails because it can't read .git/FETCH_HEAD and tries to use the same tmp directory
[2013-04-22 20:21:56 -0400] jtimberman: COOK hangout was problematic, starting a new one
[2013-04-22 20:23:54 -0400] jtimberman: Lets try that again; COOK review hangout: http://t.co/2fXpi5VQdU ; livestream http://t.co/3KADorchts :)
[2013-04-22 20:24:34 -0400] awgross: anyone have a recommendation for the best way to get from SFO to the Hyatt?  Should there just be a conventient shuttle bus?
[2013-04-22 20:25:27 -0400] miah: bart
[2013-04-22 20:25:38 -0400] miah: sfo bart -> embaradero
[2013-04-22 20:25:45 -0400] miah: embarcadero even
[2013-04-22 20:25:49 -0400] awgross: ok
[2013-04-22 20:26:01 -0400] jed_: or uber, if you're fancy
[2013-04-22 20:26:27 -0400] awgross: haha
[2013-04-22 20:26:29 -0400] jed_: unless they followed through on that C&D
[2013-04-22 20:26:55 -0400] miah: i think uber from sfo would be around $60+
[2013-04-22 20:27:03 -0400] miah: typical cab ride costs around ~40
[2013-04-22 20:27:11 -0400] jed_: nah, I rode uber from 5th/clementina to dublin for $110
[2013-04-22 20:27:23 -0400] jed_: ah, they have a flat, nm
[2013-04-22 20:27:24 -0400] jed_: you're right
[2013-04-22 20:27:34 -0400] miah: airports typically do
[2013-04-22 20:27:36 -0400] jed_: nod
[2013-04-22 20:27:51 -0400] awgross: miah: its just a straight shot, no transfers?
[2013-04-22 20:27:54 -0400] jed_: yeah
[2013-04-22 20:27:58 -0400] miah: awgross: yup
[2013-04-22 20:28:04 -0400] miah: just head into the city
[2013-04-22 20:28:08 -0400] miah: its the last sf stop
[2013-04-22 20:28:22 -0400] awgross: cool, thanks
[2013-04-22 20:28:23 -0400] zpatten: embarcadero!
[2013-04-22 20:28:36 -0400] miah: http://www.visitingdc.com/images/san-francisco-bart-map.jpg
[2013-04-22 20:28:44 -0400] awgross: ive gotten spoiled by NYC and not needing a car.  Just discovered how much of a pain it is to reach SV area from SF
[2013-04-22 20:29:02 -0400] jed_: just peninsula/SFO, in the city is okay-ish
[2013-04-22 20:29:09 -0400] miah: ya. people who say 'sv' is in the SF area are so fucking high
[2013-04-22 20:29:43 -0400] jed_: new york's got intracity down pat, though, I'll give you that
[2013-04-22 20:29:47 -0400] miah: indeed
[2013-04-22 20:30:02 -0400] miah: caltrain here helps.. but its reliability is questionable
[2013-04-22 20:30:09 -0400] miah: and its _slow_
[2013-04-22 20:30:11 -0400] jed_: hits too many people
[2013-04-22 20:30:15 -0400] awgross: ...
[2013-04-22 20:30:18 -0400] miah: well.. too many people hit the train. :P
[2013-04-22 20:30:39 -0400] awgross: this just got dark
[2013-04-22 20:30:50 -0400] jed_: you get used to MUNI and caltrain killing people out here
[2013-04-22 20:30:55 -0400] jed_: I'm sure you're used to MTA hitting suiciders
[2013-04-22 20:31:10 -0400] jed_: but, nod, agreed
[2013-04-22 20:31:29 -0400] awgross: its relatively rare, certainly happens
[2013-04-22 20:31:34 -0400] awgross: but doesnt cause much disruption
[2013-04-22 20:31:50 -0400] miah: i think it happens at least once per week here.. or maybe once per month. its far too often.
[2013-04-22 20:31:56 -0400] awgross: people find other ways here I suppose
[2013-04-22 20:32:05 -0400] miah: people who ride caltrain daily are so used to it
[2013-04-22 20:32:13 -0400] jed_: BART's probably more comparable to MTA for that, caltrain crosses lots of roads and MUNI is right in the middle of the street for a lot of the metro lines
[2013-04-22 20:32:36 -0400] miah: i think muni also goes pretty slow compared to caltrain
[2013-04-22 20:32:49 -0400] jed_: yeah, in traffic, once it goes underground it's pretty solid
[2013-04-22 20:32:55 -0400] jed_: you definitely notice on like, the N
[2013-04-22 20:32:57 -0400] miah: i think muni is like.. ~35mp.. caltrain ~65mph
[2013-04-22 20:33:15 -0400] miah: ya. i rarely go west in the city.
[2013-04-22 20:33:21 -0400] miah: (these days)
[2013-04-22 20:33:28 -0400] miah: oh. i have a meeting. bbl
[2013-04-22 20:42:52 -0400] pwelch: has anyone had issues with nginx cookbook 1.4.0? it looks like it is calling runit reload before nginx is compiled on initial run
[2013-04-22 20:57:25 -0400] a13x212: i have a ruby_block that doesn't seem to run on the first attempt but works on second attempt, any ideas?
[2013-04-22 20:57:57 -0400] failshell: unmet condition?
[2013-04-22 20:58:03 -0400] jmartin: a13x212: gist?
[2013-04-22 21:01:50 -0400] a13x212: https://gist.github.com/a13x212/5438516
[2013-04-22 21:02:13 -0400] a13x212: failshell, it shouldn't depend on anything
[2013-04-22 21:33:44 -0400] |rt|: quick chef run question.  If I have a ohai reload as the first thing that happens for an action defined in a lwrp's rb file at what point does the new ohai data become available to the chef run?
[2013-04-22 21:35:55 -0400] |rt|: b/c here's what I'm seeing.  call :create action in my lwrp -> reload ohai -> loop through a bunch of databags using ohai data to do some stuff....the new ohai data is not available during the looping
[2013-04-22 21:36:33 -0400] |rt|: but if in my recipe that's calling the lwrp I do this reload ohai -> call :create action in my lwrp -> loop through a bunch of databags etc....this works
[2013-04-22 21:39:15 -0400] richleland: when using node.set do you have to use strings for the hash keys?
[2013-04-22 21:39:34 -0400] richleland: or should symbols work? :gunicorn vs. 'gunicorn'
[2013-04-22 21:44:26 -0400] benkay: hey y'all, where should I look for the code governing chef-server logging behavior?
[2013-04-22 21:48:23 -0400] simplesi: Hi folks. Any tips on bootstrapping windows nodes? Bootstrapping a fresh node is giving me "Failed to authenticate to the chef server (http 401)" despite the validation key being the same as one that locally gives me results from hosted chef when I run knife node list
[2013-04-22 21:53:15 -0400] CharlieSu: Anyone else running chef-client using runit?  I'd like to know if anyone else is seeing memory creep up over time.  https://gist.github.com/CharlieSu/fcbdab5ecbb361031efb
[2013-04-22 21:53:27 -0400] miah: do you use --fork?
[2013-04-22 21:53:47 -0400] miah: doesnt look like it.
[2013-04-22 21:54:40 -0400] CharlieSu: miah: I'm using the basic chef-client recipe.   It creates this file: https://gist.github.com/CharlieSu/83d3df45f3e9c459a4d7
[2013-04-22 21:55:22 -0400] jed_: CharlieSu: yeah, I had the same problem (assuming chef 11); miah suggested I try --fork which led to a fork bomb, so I switched to cron for now
[2013-04-22 21:55:36 -0400] jed_: until the fork bomb problem goes away (which I see switched to "Fix committed" this morning, if it is what I think it is)
[2013-04-22 21:56:05 -0400] kallistec: CharlieSu: http://tickets.opscode.com/browse/CHEF-3432 there will be a patch release shortly
[2013-04-22 21:56:08 -0400] CharlieSu: I'm not on Chef 11 yet. And the version of chef-client cookbook I'm  using is old.  1.2.0
[2013-04-22 21:56:15 -0400] kallistec: also for the fork issue
[2013-04-22 21:56:31 -0400] kallistec: fork issue is fixed on latest 10.x
[2013-04-22 21:56:49 -0400] jed_: kallistec: goodness, thank you
[2013-04-22 21:57:53 -0400] kallistec: if you want to give the rc a go: curl http://www.opscode.com/chef/metadata\?p\=ubuntu\&pv\=10.04\&m\=x86_64\&v\=latest\&prerelease\=true
[2013-04-22 21:58:01 -0400] CharlieSu: kallistec: These instances are running 10.24
[2013-04-22 21:58:32 -0400] kallistec: CharlieSu: yeah, so that version has the memory leak, I'm backporting a fix
[2013-04-22 21:58:59 -0400] jed_: was I right in my guess? was it the mishandling of the PID file that resulted in a fork bomb?
[2013-04-22 21:59:00 -0400] CharlieSu: kallistec: awesome!  Will that be 10.26 soon?
[2013-04-22 21:59:03 -0400] jed_: that was my best guess of events
[2013-04-22 21:59:13 -0400] kallistec: CharlieSu: 10.24.2
[2013-04-22 21:59:25 -0400] CharlieSu: cool.  thanks!  Any idea on an ETA?
[2013-04-22 22:01:16 -0400] chef_noob: Hello, I was wondering if someone could help me out.  I'm trying to create a cookbook that creates an /etc/hosts file and adds all the IPs and hosts that are common to the node's environment basically trying to bypass dns.  so far I have this in my recipe/template and its not working:
[2013-04-22 22:01:18 -0400] kallistec: not sure. today or tomorrow
[2013-04-22 22:01:18 -0400] chef_noob: http://sebsauvage.net/paste/?9a26480a844fd887#YNMjQcevUnUeQpZQbq2fF/e4s583X7vROXIU+xohzRo=
[2013-04-22 22:01:34 -0400] CharlieSu: kallistec: thanks for the update!
[2013-04-22 22:04:30 -0400] yfeldblum: kallistec, offering hope to the masses of the people?
[2013-04-22 22:05:17 -0400] log1kal: chef_noob: is your search returning anything? might want to add a log something like "found X hosts"
[2013-04-22 22:06:07 -0400] chef_noob: @log1kai good idea, let me try
[2013-04-22 22:07:16 -0400] kallistec: yfeldblum: gotta do something while running chef in a loop waiting for a bug to not repro
[2013-04-22 22:11:10 -0400] simplesi: anyone had experience of getting bootstrap errors on windows only? I get Failed to authenticate as xyz-validator. Ensure that your node_name and client key are correct - but they are correct, since they work for knife queries locally, and I can bootstrap linux nodes fine
[2013-04-22 22:11:31 -0400] chef_noob: @log1kai okay, so looks like the search is not returning results.  any idea what might be wrong with my syntax?
[2013-04-22 22:11:54 -0400] gleam: try #{node.chef_environment}
[2013-04-22 22:12:33 -0400] chef_noob: @gleam worked!  thanks!!
[2013-04-22 22:13:27 -0400] a13x212:  have a ruby_block that doesn't seem to run on the first attempt but works on second attempt, any ideas?
[2013-04-22 22:14:06 -0400] yfeldblum: kallistec, what's this bug?
[2013-04-22 22:14:46 -0400] kallistec: CHEF-3432 and http://tickets.opscode.com/browse/CHEF-3367
[2013-04-22 22:30:25 -0400] programmerq: we occasionally run into issues where we will knife cookbook upload a new version of our cookbook (during development, we don't always bump the version). basically, the new copy of the recipe clearly doesn't run.
[2013-04-22 22:30:36 -0400] programmerq: for example, we had one version of the recipe create a file, and then a refactor changed that
[2013-04-22 22:31:19 -0400] programmerq: the recipe in /var/chef/cache/cookbooks shows the new recipe
[2013-04-22 22:31:25 -0400] programmerq: the new recipe deletes the file
[2013-04-22 22:31:31 -0400] programmerq: but the chef-client output shows it being created
[2013-04-22 22:31:56 -0400] programmerq: what is the best place to start debugging why chef seems to have an old copy of the recipe?
[2013-04-22 22:35:14 -0400] benkay: wow, that's crazy, programmerq
[2013-04-22 22:35:24 -0400] benkay: i would be stumped too :D
[2013-04-22 22:41:32 -0400] miah: how long are you waiting between upload of new cookbook and chef client runs?
[2013-04-22 22:50:51 -0400] programmerq: miah: minutes
[2013-04-22 22:51:02 -0400] programmerq: we did notice that overnight it seems to kick in and just start working
[2013-04-22 22:51:15 -0400] programmerq: the most baffling part is the fact that we see the changes in /var/chef/cache/cookbooks
[2013-04-22 22:52:39 -0400] miah: are you running your own chef server?
[2013-04-22 22:54:46 -0400] programmerq: miah: we've seen the problem on both our open source and private chef servers
[2013-04-22 22:55:33 -0400] miah: are you monitoring your index queue?
[2013-04-22 22:55:42 -0400] programmerq: miah: no, what is that?
[2013-04-22 22:56:09 -0400] miah: http://wiki.opscode.com/display/chef/Chef+Indexer
[2013-04-22 22:56:27 -0400] miah: specifically the chef-expandctl stuffs
[2013-04-22 23:05:03 -0400] programmerq: miah: I'll talk to the people running our chef server and see if they can help.
[2013-04-22 23:05:05 -0400] programmerq: thanks!
[2013-04-22 23:05:18 -0400] jtnz: Hi, I have a problem where I have our most basic cookbook that does bits and pieces for our Nodes. The problem is, in the default recipe it installs some chef_gems like pony, but the library also requires it, which fails because the chef_gem resource hasn't run yet. Any ideas how I can get around this other than manually installing pony before running Chef?
[2013-04-22 23:06:34 -0400] jtnz: Or having another cookbook that doesn't have library and install the gem there...
[2013-04-22 23:10:39 -0400] awgross: jtnz: move the "require" statement inside the method to have it lazily loaded.  Install it with chef_gem
[2013-04-22 23:13:01 -0400] benkay: where is the chef-server log rotation handled? i think that it's shutting Solr down and not starting it back up again, but I need to verify this...
[2013-04-22 23:15:30 -0400] benkay: is Solr or Chef responsible for the solr logs?
[2013-04-22 23:17:40 -0400] jtnz: awgross, Yea, I'm having a hack around with various options
[2013-04-22 23:19:35 -0400] jtnz: awgross, Awesome, that got around it. Any negative side effects of this that I should be aware of?
[2013-04-22 23:19:44 -0400] jtnz: awgross, (not a ruby expert)
[2013-04-22 23:22:08 -0400] awgross: jtnz: not an expert, main issue in my mind is its just less clear where dependencies are
[2013-04-22 23:23:11 -0400] jtnz: awgross, meh, problem solved in my books :) Thanks

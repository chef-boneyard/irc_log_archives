[2013-04-02 00:02:20 -0400] eydaimon: is there a way to force chef to use /etc/init.d/script to start/stop a service?   I've tried various way of specifying provider, but it does not start the service anyway.
[2013-04-02 00:03:30 -0400] eydaimon: the host uses upstart for most stuff, but this particular script isn't compatible with upstart so I have to use the init.d sript
[2013-04-02 00:03:36 -0400] kallistec: stormerider: yeah, it will work fine. `knife client reregister` won't work
[2013-04-02 00:08:02 -0400] stormerider: yeah, i don't use that currently so im not worried about that :)
[2013-04-02 00:08:08 -0400] stormerider: kallistec: thanks :)
[2013-04-02 00:08:59 -0400] eydaimon: kallistec: any idea?
[2013-04-02 00:09:45 -0400] tomdzk: eydaimon: how about a upstart wrapper for the init.d script ?
[2013-04-02 00:10:32 -0400] eydaimon: tomdzk: upstart doesn't seem to do well with wrappers
[2013-04-02 00:10:58 -0400] eydaimon: tomdzk: suppose i can try it again
[2013-04-02 00:11:26 -0400] eydaimon: it's nginx, and nginx with certs with a password phrase are a pain
[2013-04-02 00:11:33 -0400] eydaimon: so I have wrappers to deal with that
[2013-04-02 00:11:36 -0400] eydaimon: upstart didn't seem to like it
[2013-04-02 00:11:37 -0400] tomdzk: eydaimon: I have at least one installed on my system, not sure if it is used though (/etc/init/rc.conf)
[2013-04-02 00:11:44 -0400] tomdzk: one wrapper, I mean
[2013-04-02 00:13:23 -0400] tomdzk: eydaimon: also, have you tried setting provider to Chef::Provider::Service::Init or Chef::Provider::Service::Init::Debian in your service section ?
[2013-04-02 00:16:01 -0400] eydaimon: yes
[2013-04-02 00:30:33 -0400] lg_: hi all
[2013-04-02 00:30:57 -0400] lg_: I'm sure this has been asked a lot of times but how can I delete an organization in hosted chef?
[2013-04-02 00:33:57 -0400] eydaimon: I read your question, but did not know the answer (just so you know someone is alive)
[2013-04-02 00:34:27 -0400] stuartrexking: How do I pass variables to the rails environment so that they can be used by the rails app as ENV['BLAH']. I am using rails LWRP with unicorn.
[2013-04-02 00:34:48 -0400] stuartrexking: I have tried setting the environment attribute on bot the application LWRP and the rails LWRP.
[2013-04-02 00:38:34 -0400] eydaimon: stuartrexking: those are simply environmental variables
[2013-04-02 00:38:52 -0400] eydaimon: stuartrexking: I think what you're really asking is how to get your environment to pass them on to rails
[2013-04-02 00:39:08 -0400] eydaimon: and possibly on the wrong channel
[2013-04-02 00:42:07 -0400] stuartrexking: eydaimon: "I think what you're really asking is how to get your environment to pass them on to rails"
[2013-04-02 00:42:16 -0400] stuartrexking: "How do I pass variables to the rails environment so that they can be used by the rails app as ENV['BLAH']. I am using rails LWRP with unicorn."
[2013-04-02 00:42:34 -0400] lg_: do I need to contact support somehow to get an organization deleted?
[2013-04-02 00:42:53 -0400] stuartrexking: Isn't that exactly the same thing? I have the variables, from a databag. They are used by the migration, but not when the service is started.
[2013-04-02 00:43:02 -0400] tomdzk: stuartrexking: the simplest might just be to adapt the unicorn resource to your own needs
[2013-04-02 00:43:52 -0400] stuartrexking: tomdzk: Sure, but surely this is a common problem to solve? I don't want to hack a solution is one exists. How do current chefs do this?
[2013-04-02 00:44:42 -0400] stuartrexking: I don't want to add keys, urls etc to my app config. I want to read them in from env variables. Surely this is best practice and something that is commonly addressed with chef / rails / unicorn.
[2013-04-02 00:45:41 -0400] eydaimon: stuartrexking: I wold have just asked how to set environmental variables instead of mixing in ruby and how you will access them there
[2013-04-02 00:46:09 -0400] stuartrexking: eydaimon: I am not sure how I could be more clear. Thanks anyway.
[2013-04-02 00:46:58 -0400] bharghav9: Hi
[2013-04-02 00:48:10 -0400] tomdzk: stuartrexking: the cookbook doesn't seem to support that atm, though it is easy to add (by adding -e options in sv-unicorn-run.erb)
[2013-04-02 00:48:43 -0400] bharghav9: I am trying to delete "node" and "client", while destroying the vagrant vm through "vagrant destroy"....I am getting this error "dependency.rb:247:in `to_specs': Could not find chef (>= 0) amongst "...has any one faced this error...?
[2013-04-02 00:49:39 -0400] petecheslock: bharghav9: depending on your version of vagrant you may need to install chef so vagrant can see it - either vagrant gem install chef or vagrant plugin install chef
[2013-04-02 00:49:42 -0400] stuartrexking: tomdzk: Ok. I had a look at the unicorn cookbook and that seemed like the solution. I prefer not to fork repos unless I need to. I will fork the repo and PR my change.
[2013-04-02 00:50:09 -0400] petecheslock: you can also check out this project - https://github.com/cassianoleal/vagrant-butcher
[2013-04-02 00:50:47 -0400] tomdzk: stuartrexking: that way we would all benefit :) also see http://wiki.opscode.com/display/chef/How+to+Contribute in case you haven't yet
[2013-04-02 00:52:00 -0400] bharghav9: Thanks Petecheslock...I guess I had installed Vagrant directly through mac installer from vagrant. My current version is "vagrant -v Vagrant version 1.0.5"..
[2013-04-02 00:52:14 -0400] bharghav9: I will try the commands you had provided...Thanks for your help.
[2013-04-02 00:53:06 -0400] petecheslock: bharghav9: no prb - you may want to upgrade to 1.0.7 mac installer package - but in that case use the vagrant gem install one - but i think the vagrant-butcher works also with 1.0.x
[2013-04-02 00:58:31 -0400] bharghav9: Excellent....Thanks Petecheslock...your solution worked..I had execute "vagrant gem install chef" on Vagrant "1.0.5" and it worked without any issue...
[2013-04-02 01:01:28 -0400] petecheslock: awesome
[2013-04-02 01:04:18 -0400] bharghav9: If you don't mind...can you explain the root cause of this issue....I had tried to debug the issue...by going through strack trace and executed the command Gem::Specification.all_names.join ", "...this command returned all "chef" gems.. so does this "vagrant" uses separate gems than the one use by RVM
[2013-04-02 01:06:28 -0400] petecheslock: they are in your ~/.vagrant.d/gems folder IIRC
[2013-04-02 01:06:43 -0400] maek: jtimberman: I think you tweeted about how to "override" a resource if you are including a community cookbook but want to change say an :action for a service. do you recall or am I crazy?
[2013-04-02 01:07:03 -0400] petecheslock: and - yes if you use the mac install package vagrant uses it's own ruby, gems and whatever gems in you install with vagrant gem or vagrant plugin
[2013-04-02 01:08:26 -0400] bharghav9: vagrant gem list :- display separate list...I had executed "vagrant gem install"...Thanks "Petecheslock"...now I understood root cause of the issue...
[2013-04-02 01:15:05 -0400] log1kal: maek: was it chef-rewind? https://github.com/bryanwb/chef-rewind
[2013-04-02 01:15:43 -0400] maek: log1kal: I would suspect yes
[2013-04-02 01:15:48 -0400] maek: as that looks like what I want
[2013-04-02 01:15:50 -0400] maek: log1kal: ty!
[2013-04-02 01:15:55 -0400] log1kal: no prob
[2013-04-02 02:29:00 -0400] freezey: anyone here using vagrant for their devs?
[2013-04-02 02:29:07 -0400] log1kal: Yup.
[2013-04-02 02:29:11 -0400] log1kal: <3 it.
[2013-04-02 02:29:12 -0400] awgross: yes
[2013-04-02 02:29:26 -0400] freezey: with chef-solo?
[2013-04-02 02:29:51 -0400] freezey: or having all the vagrant nodes contact chef-server?
[2013-04-02 02:30:06 -0400] log1kal: we use solo for vagrant, and server for ec2 envs
[2013-04-02 02:30:11 -0400] log1kal: same cookbooks
[2013-04-02 02:30:13 -0400] freezey: yeah
[2013-04-02 02:30:14 -0400] freezey: figured as much
[2013-04-02 02:30:36 -0400] log1kal: we wanted local, offline ability for devs, so that necessitated solo
[2013-04-02 02:30:36 -0400] freezey: what about sensitive information you dont want checked out on local devs laptops?
[2013-04-02 02:30:45 -0400] freezey: ssh keys
[2013-04-02 02:30:46 -0400] freezey: etc
[2013-04-02 02:30:55 -0400] awgross: databags
[2013-04-02 02:30:55 -0400] freezey: or you guys just have it all checked out anyway?
[2013-04-02 02:30:56 -0400] log1kal: there's no SSH keys involved in our config
[2013-04-02 02:31:04 -0400] freezey: databags of course
[2013-04-02 02:31:11 -0400] freezey: but if they arent encrypted
[2013-04-02 02:31:18 -0400] freezey: they can be seen
[2013-04-02 02:31:23 -0400] log1kal: actually no, we don't use databags much
[2013-04-02 02:31:26 -0400] awgross: so encrypt them?
[2013-04-02 02:31:35 -0400] freezey: passwords would still be in recipes no?
[2013-04-02 02:31:46 -0400] freezey: trying to figure out a good way to do this heh
[2013-04-02 02:31:47 -0400] awgross: why?
[2013-04-02 02:31:53 -0400] awgross: with encrypted DBs
[2013-04-02 02:31:57 -0400] awgross: and data you pull out of them
[2013-04-02 02:32:05 -0400] awgross: will never be unencrypted by chef on disk
[2013-04-02 02:32:06 -0400] awgross: only in memory
[2013-04-02 02:32:13 -0400] freezey: true true
[2013-04-02 02:32:15 -0400] freezey: hmm
[2013-04-02 02:32:18 -0400] freezey: probably literally the only way to do this
[2013-04-02 02:32:29 -0400] awgross: its better than hard coding
[2013-04-02 02:32:32 -0400] freezey: of course
[2013-04-02 02:32:34 -0400] awgross: for our AWS stuff
[2013-04-02 02:32:38 -0400] awgross: we are moving to IAM roles
[2013-04-02 02:32:48 -0400] freezey: but just wondering if there was a better way to not have your chef site checked out on a local devs machine
[2013-04-02 02:32:51 -0400] freezey: but there really isn't
[2013-04-02 02:33:21 -0400] awgross: what stuff is in your recipes that you cant move to Databags
[2013-04-02 02:33:44 -0400] freezey: nothing really
[2013-04-02 02:33:47 -0400] freezey: was just wondering
[2013-04-02 02:35:14 -0400] awgross: fair enough
[2013-04-02 02:36:20 -0400] freezey: trying to make this less wrk
[2013-04-02 02:36:21 -0400] freezey: heh
[2013-04-02 02:37:05 -0400] awgross: ic
[2013-04-02 02:41:15 -0400] schisamo:  hola everyone..just shipped my Opscode Hack Day projectvagrant-omnibus: https://github.com/schisamo/vagrant-omnibus
[2013-04-02 02:43:18 -0400] log1kal: schisamo: that... is happy making
[2013-04-02 02:43:42 -0400] schisamo: log1kal: works pefectly with provisonerless base boxes and cloud images :)
[2013-04-02 02:44:06 -0400] log1kal: You just made my life easier
[2013-04-02 02:44:09 -0400] log1kal: Thank you!
[2013-04-02 02:46:57 -0400] awgross: noice schisamo
[2013-04-02 02:47:10 -0400] awgross: was getting really tired of vagrant always trying to use ruby 1.8
[2013-04-02 02:47:35 -0400] joonas: interesting
[2013-04-02 03:07:26 -0400] Axsuul: How do I remove omnibus chef installer from ubuntu
[2013-04-02 03:08:58 -0400] awgross: remove /opt/chef/embedded?
[2013-04-02 03:09:05 -0400] awgross: or is it /opt/embedded/chef
[2013-04-02 03:09:10 -0400] awgross: thatll get the code
[2013-04-02 03:09:22 -0400] awgross: then ditch /var/chef, /var/log/chef, /etc/chef
[2013-04-02 03:11:10 -0400] Axsuul: awgross: hmm don't see /opt/chef or /opt/embedded :(
[2013-04-02 03:11:21 -0400] awgross: hmm unsure
[2013-04-02 03:11:30 -0400] awgross: do a `which chef-client`
[2013-04-02 03:11:50 -0400] awgross: and follow the symlink
[2013-04-02 03:12:13 -0400] Axsuul: thanks go tit
[2013-04-02 03:40:02 -0400] mh`: chef-client daemon leaks memory indefinitely
[2013-04-02 03:40:21 -0400] mh`: tips on how to debug/report this?
[2013-04-02 03:42:51 -0400] viedma: Hi! I'm getting a HTTPForbidden error when trying to upload ohai (v1.1.8) to chef-server using Berks.
[2013-04-02 03:43:36 -0400] viedma: I tried checking the permissions of the cookbook in opscode but I'm getting another error "Permission denied. You do not have permission to read the permissions on this cookbook."
[2013-04-02 03:43:45 -0400] mh`: yo dawg
[2013-04-02 04:01:17 -0400] flaccid: viedma: #berkshelf
[2013-04-02 04:02:07 -0400] jtimberman: mh`: use --fork for the chef-client daemon, or run via cron
[2013-04-02 04:02:19 -0400] mh`: i just used the cookbook
[2013-04-02 04:04:49 -0400] viedma: thanks
[2013-04-02 04:32:24 -0400] bharghav9: syn
[2013-04-02 05:05:30 -0400] stormerider: is there a way to import my chef 10 validation key into chef 11?
[2013-04-02 06:18:21 -0400] Axsuul: Has anyone used this chef-solo-cookbook before?
[2013-04-02 06:18:35 -0400] Axsuul: oops
[2013-04-02 06:18:38 -0400] Axsuul: chef-solo-search cookbook
[2013-04-02 06:19:12 -0400] Axsuul: Do I just use the cookbook as is? Still getting PrivateKeyError when trying to use chef solo
[2013-04-02 06:37:47 -0400] nebrera: helllo
[2013-04-02 06:38:03 -0400] nebrera: is chef compatible with last version of rabbitmq ?
[2013-04-02 06:38:24 -0400] nebrera: I am planning to update it and I would like to know if there is compatibility problems
[2013-04-02 07:41:31 -0400] jimjimovich: How much RAM does Chef Server 11 require to serve a small amount of machines (10-20)?
[2013-04-02 07:43:50 -0400] kesor: jimjimovich: I have a server with 1g and its enough
[2013-04-02 07:44:20 -0400] jimjimovich: kesor: cool. I was hoping to get away with 512 ... but it seems a bit unrealistic.
[2013-04-02 08:53:58 -0400] Axsuul: I'm getting a PrivateKeyMissing: I cannot read /etc/chef/client.pem for Chef 11.4.0 for Chef Solo. However, Chef 10.18.2 doesn't throw this error. Any thoughts? My run list is []
[2013-04-02 09:08:40 -0400] ProfFalken: morning all
[2013-04-02 09:09:09 -0400] Axsuul: morning
[2013-04-02 09:09:11 -0400] Axsuul: I'm getting a PrivateKeyMissing: I cannot read /etc/chef/client.pem for Chef 11.4.0 for Chef Solo. However, Chef 10.18.2 doesn't throw this error. Any thoughts? My run list is []
[2013-04-02 09:10:07 -0400] ProfFalken: I'm looking at having to install a custom gem into my chef embedded client environment using chef_gem - can I use a URL as the "source" attribute?
[2013-04-02 09:10:13 -0400] meineerde: Axsuul: are you running chef as root?
[2013-04-02 09:10:19 -0400] ProfFalken: Axsuul: you're running chef-solo as root or via sudo right?
[2013-04-02 09:10:24 -0400] ProfFalken: meineerde: lol, SNAP!
[2013-04-02 09:12:02 -0400] meineerde: ProfFalken: no, but you can use remote_file to download the gem into the file cache and then use notifications to install it using chef_gem.
[2013-04-02 09:12:38 -0400] ProfFalken: eurgh! That's nasty...
[2013-04-02 09:13:06 -0400] ProfFalken: oooh, hang on, I can specify the "options" to the gem command so I can give   Common Options:
[2013-04-02 09:13:08 -0400] meineerde: ProfFalken: remote_file with the action :nothing, run_action(...) stuff
[2013-04-02 09:13:09 -0400] ProfFalken:         --source URL                 Use URL as the remote source for gems
[2013-04-02 09:13:17 -0400] ProfFalken: :D
[2013-04-02 09:13:28 -0400] ProfFalken: meineerde: yah, but that's still an anti-pattern in my view
[2013-04-02 09:13:38 -0400] ProfFalken: especially if you've got 4K+ nodes...
[2013-04-02 09:14:12 -0400] meineerde: depends... If you use checksums, it will be even less resource intensive than usiong rubygems directly
[2013-04-02 09:14:13 -0400] Axsuul: ProfFalken, meineerde: should i be running as root?
[2013-04-02 09:14:21 -0400] Axsuul: what if user is part of sudo group
[2013-04-02 09:14:21 -0400] ProfFalken: Axsuul: yes
[2013-04-02 09:14:35 -0400] ProfFalken: the it should be "sudo chef-solo --args"
[2013-04-02 09:14:43 -0400] meineerde: ProfFalken: iirc --source expects a service similar to rubygems.org, not a URL to an actual gem
[2013-04-02 09:15:31 -0400] meineerde: Axsuul: depends.  most cookbooks implicitly expect to be run as root. if you don't run as root, you lose some flexibility and have to deal with permissions during the chef run
[2013-04-02 09:15:47 -0400] meineerde: (and you have to make sure your user can e.g. read the chef.pem)
[2013-04-02 09:16:06 -0400] ProfFalken: meineerde: really? crap.  OK, then I gues I need to be running my own rubgems mirror behind the firewall..
[2013-04-02 09:16:09 -0400] ProfFalken: thanks
[2013-04-02 09:16:24 -0400] Axsuul: Do you guys use littlechef? That's actualyl waht I'm using so I'm not sure if its running as sudo, eek
[2013-04-02 09:16:41 -0400] meineerde: ProfFalken: but as I said, using remote_file works fine too. and I don't think it's an antipattern
[2013-04-02 09:16:43 -0400] ProfFalken: Axsuul: nope, sorry, I use Chef-Client
[2013-04-02 09:17:34 -0400] ProfFalken: meineerde: except it means storing the gem in your cookbook and committing binary blobs to your VCS which makes me cry... ;)
[2013-04-02 09:17:58 -0400] meineerde: ProfFalken: you are confusung remote_file and cookbook_file
[2013-04-02 09:18:07 -0400] ProfFalken: meineerde: oh?
[2013-04-02 09:18:08 -0400] meineerde: ProfFalken: using remote_file you can download a file from any URL
[2013-04-02 09:18:18 -0400] ProfFalken: ah, ok, now that makes more sense :)
[2013-04-02 09:18:20 -0400] ProfFalken: sorry :D
[2013-04-02 09:18:38 -0400] ProfFalken: so it's a chef_gem with action :none
[2013-04-02 09:18:50 -0400] ProfFalken: and a remote_file with a notification
[2013-04-02 09:18:58 -0400] meineerde: and if you add the correct checksum to your recipe, chef won't even try to download the file if it has a proper one on the node already
[2013-04-02 09:20:26 -0400] ProfFalken: oh, that's nice...
[2013-04-02 09:22:28 -0400] meineerde: ProfFalken: let my quickly bring up an example...
[2013-04-02 09:22:40 -0400] ProfFalken: meineerde: that would be awesome
[2013-04-02 09:25:36 -0400] meineerde: ProfFalken: https://gist.github.com/meineerde/5291023
[2013-04-02 09:25:42 -0400] meineerde: something like this should do (not tested)
[2013-04-02 09:26:19 -0400] ProfFalken: meineerde: that's amazing, thanks, I'll play with it.
[2013-04-02 09:26:21 -0400] ProfFalken: :)
[2013-04-02 11:03:52 -0400] proppen: is there any way of knowing where an attribute was set? E.g. in a Role on an Environment
[2013-04-02 12:45:33 -0400] Mez_: proppen: Not generally, but you can figure it out from the run lists etc
[2013-04-02 13:01:57 -0400] kesor: I'm trying to use the passenger module in the opscode module, but it removes my installed ruby  has anyone seen that and has some kind of solution?
[2013-04-02 13:06:47 -0400] gyre007: I have come across the weirdest issue i Chef so far
[2013-04-02 13:07:05 -0400] gyre007: I'm trying to iterate through all servers ie through all nodes and call fqdn method on them
[2013-04-02 13:07:23 -0400] gyre007: yet when I hit one of them I get fqdn Attribute is not defined
[2013-04-02 13:07:36 -0400] gyre007: it goes fine on all other servers/nodes
[2013-04-02 13:07:45 -0400] gyre007: simple code from Shef console
[2013-04-02 13:07:51 -0400] gyre007: https://gist.github.com/anonymous/5292060
[2013-04-02 13:07:57 -0400] gyre007: I'm totally clueless hah
[2013-04-02 13:08:29 -0400] laurent\: it's just you have node(s) without a fqdn attribute
[2013-04-02 13:08:40 -0400] gyre007: no
[2013-04-02 13:08:44 -0400] gyre007: it shouldnt be
[2013-04-02 13:08:50 -0400] gyre007: fqdn is generated by ohai
[2013-04-02 13:08:55 -0400] laurent\: it is
[2013-04-02 13:08:59 -0400] gyre007: fqdn is ohai attr
[2013-04-02 13:09:03 -0400] gyre007: so ...
[2013-04-02 13:09:11 -0400] laurent\: for a node that hasn't run you won't get the fqdn attribute
[2013-04-02 13:09:24 -0400] gyre007: you mean which hasnt converged ?
[2013-04-02 13:09:40 -0400] gyre007: it did...I ran chef0client several times manually on that server...
[2013-04-02 13:10:21 -0400] gyre007: even when i log on Chef GUI I can see fqdn attribute defined...
[2013-04-02 13:10:24 -0400] gyre007: and saved
[2013-04-02 13:10:35 -0400] laurent\: oh
[2013-04-02 13:10:55 -0400] gyre007: really weird
[2013-04-02 13:11:02 -0400] gyre007: i just dont get t
[2013-04-02 13:11:08 -0400] Litex: Can that host resolve it's own fqdn?  hostname -f ?
[2013-04-02 13:11:13 -0400] Litex: *its
[2013-04-02 13:11:28 -0400] gyre007: yes
[2013-04-02 13:11:34 -0400] gyre007: just double checked
[2013-04-02 13:11:36 -0400] Litex: even weirder.
[2013-04-02 13:11:42 -0400] laurent\: might be related to CHEF-2346
[2013-04-02 13:11:44 -0400] gyre007: ill update the fist
[2013-04-02 13:11:46 -0400] gyre007: gist
[2013-04-02 13:12:45 -0400] gyre007: https://gist.github.com/milosgajdos83/5292098
[2013-04-02 13:13:23 -0400] laurent\: pretty sure it's related to CHEF-2346 now :-)
[2013-04-02 13:14:36 -0400] gyre007: jeez...need to check it out...
[2013-04-02 13:14:51 -0400] gyre007: youre saying it's Solr problem
[2013-04-02 13:14:59 -0400] laurent\: might be
[2013-04-02 13:15:03 -0400] gyre007: thats been open for ages...
[2013-04-02 13:15:09 -0400] gyre007: not sure thats the case mm
[2013-04-02 13:18:02 -0400] gyre007: but interesting is its not happening anywhere else..
[2013-04-02 13:18:06 -0400] gyre007: id assume it should
[2013-04-02 13:27:20 -0400] nvbasd: is it possible to bootstrap something with a bit of node-specific config, I tried -j '{"normal":{"mysql":{"server":{"server_id":15}}}}' - am I going in the right direction, is there any good documentation on it?
[2013-04-02 13:31:29 -0400] gyre007: this is nonsense...arrgh :)
[2013-04-02 13:40:06 -0400] gyre007: ah laurent\ Litex
[2013-04-02 13:40:10 -0400] gyre007: i found the problem
[2013-04-02 13:40:13 -0400] gyre007: basically...
[2013-04-02 13:40:27 -0400] gyre007: search is retuning a node which DOES NOT exist any more
[2013-04-02 13:40:36 -0400] gyre007: yet it is somehow stored and indexed on chef
[2013-04-02 13:42:37 -0400] gyre007: why would Chef search return node which does not exist...mm
[2013-04-02 13:43:12 -0400] Litex: Interesting..
[2013-04-02 13:43:48 -0400] Litex: Is the Solr indexing lagging?  Does it show up in k
[2013-04-02 13:43:51 -0400] Litex: 'knife node list' ?
[2013-04-02 13:44:00 -0400] gyre007: it doesnt come up in node list
[2013-04-02 13:44:13 -0400] gyre007: when I grep for that node in solr.log it doesnt find it
[2013-04-02 13:44:41 -0400] gyre007: https://gist.github.com/milosgajdos83/5292305
[2013-04-02 13:44:58 -0400] gyre007: its the node[backup] which does not exist...neither as a node nor as a client...
[2013-04-02 13:45:20 -0400] gyre007: the search query is search(:node, "*:*")
[2013-04-02 13:45:26 -0400] gyre007: basically all nodes
[2013-04-02 13:47:04 -0400] gyre007: hah!
[2013-04-02 13:47:10 -0400] gyre007: mystery revealed
[2013-04-02 13:47:30 -0400] gyre007: just found in the logs that one of our "geniuses" created a node via knife
[2013-04-02 13:47:49 -0400] gyre007: like...knife node from file...
[2013-04-02 13:47:54 -0400] gyre007: arrrrrrrghhhhh
[2013-04-02 13:48:01 -0400] gyre007: 1 hour of my life ill never get back :)
[2013-04-02 13:51:29 -0400] tanto: are there apt repos for chef 11?
[2013-04-02 14:00:01 -0400] iroller: Ohai Chefs. Is there any way to create read-only chef user in opensource Chef?
[2013-04-02 14:02:10 -0400] Mez_: iroller: I beleive any "client" that is not an "admin" is read-only ... or are you on about webui?
[2013-04-02 14:07:10 -0400] iroller: Mez_: oh, right. I was not sure clients do have access to all the knife commands
[2013-04-02 14:08:06 -0400] Mez: iroller: as far as I know they don't.  This is why the validator is not an admin, for example.  Not too sure what can be done with non-admin clients
[2013-04-02 14:08:25 -0400] Mez: http://docs.opscode.com/auth.html <-- might be worth a read
[2013-04-02 14:10:38 -0400] Mez: iroller: actually: http://docs.opscode.com/auth_authorization.html (scroll to the end)
[2013-04-02 14:17:06 -0400] TipiT: Hey guys, I am trying to begin using Chef by hosted Chef from opscode but I cant find the version they are using at the moment. How can I find that out?
[2013-04-02 14:17:25 -0400] mml: stupid question: why are none of my node attributes defined when ii run chef-client -o runlist?
[2013-04-02 14:18:26 -0400] Mez: mml: depends on where you're up to in the run list, and what attribute you're looking for
[2013-04-02 14:20:09 -0400] mml: mez: hmm, i think i get it. if the attribute is defined on a role, but the role isn't in the runlist, the attr won't exist
[2013-04-02 14:20:33 -0400] Mez: unless it's got an override or a default somewhere
[2013-04-02 14:38:19 -0400] cwj: TipiT: you should be able to use versions 10.x and 11.x with hosted chef. if you are just getting started with chef then I would suggest using the latest 11.x release which i believe is 11.4.0
[2013-04-02 14:39:50 -0400] swaite: hey folks, I have a curious error when running chef-client
[2013-04-02 14:39:51 -0400] swaite: `@1' is not allowed as an instance variable name
[2013-04-02 14:39:57 -0400] swaite: @1 is being pulled from a hash
[2013-04-02 14:40:07 -0400] swaite: {1=>"10000", 2=>"10020", 3=>"10040", 4=>"10060", 5=>"10080"}
[2013-04-02 14:40:19 -0400] swaite: chef-client compiles correctly, and then fails at run time
[2013-04-02 14:40:47 -0400] swaite: any idea why that value isn't allowed, and how I can correct it?
[2013-04-02 14:57:01 -0400] TipiT: cwj: Thanks for the reply. I am asking this because I am not sure which version the Opscode hosted chef server is. So if I use 11.x at my local environment, tools and the nodes it should be backward compatible what ever the Chef server is?
[2013-04-02 15:00:18 -0400] cwj: TipiT: the hosted chef stuff is based on 11.x but there are some features which are proprietary to opscode's hosted or private chef services, e.g. RBAC
[2013-04-02 15:00:39 -0400] cwj: so its not exactly the same as the open source chef-server per se
[2013-04-02 15:00:40 -0400] TipiT: cwj: Sorry, I think I am asking the same question. :D I mean to question: The tools are all backward compatible?
[2013-04-02 15:01:08 -0400] cwj: depends on the tool, but for the most part yes
[2013-04-02 15:01:33 -0400] TipiT: cwj: Ok, thank you. Thats all I wanted to hear.
[2013-04-02 15:12:29 -0400] joeheung: Hi, has anyone any experience with the opscode tomcat cookbook?
[2013-04-02 15:23:07 -0400] anveo: anyone use the rbenv/ruby_build cookbookes? I can't figure out how to update them so I can install a more recent ruby
[2013-04-02 15:25:11 -0400] siezer: anveo https://gist.github.com/someara/b4537a7be968fab38972
[2013-04-02 15:28:34 -0400] anveo: siezer the problem is I don't have an installer definition for 1.9.3-p392 because I'm guessing the ruby_build git repo (which it seems the rbenv cookbook uses) is out of date
[2013-04-02 15:29:41 -0400] joeheung: Hi guys, does anyone use the tomcat opscode cookbook with oracle?
[2013-04-02 15:32:07 -0400] fooJBar: anveo: did you try updating the ruby_build cookbook from site with knife?
[2013-04-02 15:32:57 -0400] anveo: fooJBar yes, I updated it to the latest
[2013-04-02 15:33:52 -0400] anveo: it looks like I can set update_strategy, I'm guessing sync might update it https://github.com/fnichol/chef-ruby_build/blob/master/recipes/default.rb#L56
[2013-04-02 15:35:45 -0400] fooJBar: anveo: I thought :sync was the default
[2013-04-02 15:37:05 -0400] fooJBar: anveo: you're right, it's set to "none" in attributes/default.rb
[2013-04-02 15:37:16 -0400] anveo: fooJBar apparently not, but I changed it and the ruby is compiling now!
[2013-04-02 15:37:21 -0400] fooJBar: anveo: gratz
[2013-04-02 15:44:40 -0400] Mez: What root folders does the WebUI use?
[2013-04-02 15:49:48 -0400] joeheung: Does anyone use the opscode tomcat cookbook?
[2013-04-02 15:55:06 -0400] tduffield: to anyone using the opscode rabbitmq cookbook: has anyone else run into the issue where running 'service rabbitmq status' as root fails with an 'Kernel Pid Terminated' error when there is a beam.smp process already running?
[2013-04-02 16:00:57 -0400] bharghav9: Hi...Just started learning chef....so I have queries on best practices
[2013-04-02 16:01:41 -0400] bharghav9: what should a 'recipe' contain?...for example I am writing 'apache' cookbook.. is it best practice to have one recipe of 'os' tasks, one for 'apache' tasks, one for 'security' etc
[2013-04-02 16:02:46 -0400] Mez: bharghav9: Generally a "recipe" is a "way of setting something up to do something"
[2013-04-02 16:03:06 -0400] Mez: So "Set up Apache to Server www.example.com"
[2013-04-02 16:03:57 -0400] Mez: For example, the cookbook chicken might contain the recipes "Fried" and "Roast".
[2013-04-02 16:05:51 -0400] bharghav9: Mez, Thanks for the response. So I think it makes sense to create different recipes  for "os", "apache" and "security" instead of bundling everything into one single recipe..
[2013-04-02 16:07:20 -0400] bharghav9: So my cookbook goal is to set up Apache....and OS recipe will perform all tasks to OS.... Apache recipe will perform tasks related to Apache...Security recipe will perform tasks to security....
[2013-04-02 16:07:57 -0400] awgross1: Is it possible to get a package to install early enough that it can be used to build native libs for a chef_gem block?
[2013-04-02 16:11:48 -0400] awgross1: nevermind, figured it out with the .run_action(:install)
[2013-04-02 16:11:56 -0400] awgross1: forgot about that
[2013-04-02 16:19:00 -0400] nebrera: helllo: is chef compatible with couchbase server ?
[2013-04-02 16:19:15 -0400] nebrera: couchbase is = couchdb + memcache
[2013-04-02 16:19:25 -0400] nebrera: ??
[2013-04-02 16:28:21 -0400] kesor: nebrera: no according to them.
[2013-04-02 16:28:53 -0400] kesor: nebrera: they just have a confusing name, but the product itself has very little in common with the community couchdb database.
[2013-04-02 16:35:36 -0400] joeheung: With ubuntu, apt-get install tomcat6 will install openjdk and tomcat. SInce the java cookbook is included in tomcat and is run first, default-java is set to oracle in my case, but then overwritten by openjdk
[2013-04-02 16:35:44 -0400] joeheung: Am I doing something wrong?
[2013-04-02 16:41:05 -0400] jessicab1: hm.. any ideas why executing /etc/init.d/service start works, but the service resource doesnt do anything? it seems like its just doing the same thing.. even adding a start_command to service did nothing
[2013-04-02 16:46:34 -0400] gmcinnes2: is there any way to increase the log level on knife bootstrap.  I'm getting this message "ERROR: TypeError: can't convert nil into String" but don't know why
[2013-04-02 16:53:37 -0400] Axsuul: If I had my attributes in "default_attributes" within a role for Chef 10, where do I put them now in Chef 11? I put them in "default" but my recipes don't seem to read it anymore
[2013-04-02 17:11:16 -0400] shillinm: is there a way to have a recipe check if another recipe is applied to a node then act accordingly?
[2013-04-02 17:15:19 -0400] timsmith: you can examine the run_list in the recipe
[2013-04-02 17:16:12 -0400] mshilling_: man that web client was flaky.  trying mirc.  if anyone answered my question from a minute ago, could you please do so again
[2013-04-02 17:17:04 -0400] cpasmoi: mshilling_, <tim-smith> you can examine the run_list in the recipe
[2013-04-02 17:17:24 -0400] mshilling_: thats cpasmoi.  tim-smith, do you have an example?
[2013-04-02 17:17:28 -0400] mshilling_: *thanks
[2013-04-02 17:18:21 -0400] cpasmoi: I added a '-' in the middle of the nick to avoid HL
[2013-04-02 17:18:44 -0400] mshilling_: gotcha
[2013-04-02 17:23:20 -0400] Axsuul: Anyone having problems with chef_gem 'pg'? Getting "Could not create Makefile due to some reason, probably lack of necessary libraries" although I have the latest build-essentials installed
[2013-04-02 17:23:49 -0400] awgross1: Axsuul: installed or just in the recipe
[2013-04-02 17:29:32 -0400] mshilling_: anyone have an example of how to examine the run list in a recipe?
[2013-04-02 17:29:51 -0400] whilp: mshilling_: take a look at `node.recipes` (the expanded run_list)
[2013-04-02 17:30:14 -0400] timsmith: if node.run_list.include?("role[some_role]")
[2013-04-02 17:31:45 -0400] mshilling_: timsmith: thanks
[2013-04-02 17:39:28 -0400] Axsuul: awgross1: nm figured it out, thanks
[2013-04-02 18:06:45 -0400] maek: anyone know where chef server 10 keeps the cookbook files on the actual chef-server?
[2013-04-02 18:12:28 -0400] timsmith: var/chef I believe
[2013-04-02 18:12:32 -0400] timsmith: somewhere in there
[2013-04-02 18:16:21 -0400] awgross1: miah: where is your chef-redis cookbook again?
[2013-04-02 18:18:10 -0400] miah: github.com/miah/chef-redis
[2013-04-02 18:18:16 -0400] tanto: what distro is recommended with chef
[2013-04-02 18:18:16 -0400] awgross1: i was looking at that
[2013-04-02 18:18:33 -0400] awgross1: looks like the recipes/ have changed, no longer using the _ style miah
[2013-04-02 18:18:41 -0400] c_t: chef will work with many a distro
[2013-04-02 18:18:50 -0400] tanto: i see no download for debian 6
[2013-04-02 18:18:55 -0400] tanto: only ubuntu and rhel
[2013-04-02 18:18:57 -0400] c_t: that said, my feeling is you'll probably have an easier time with ubuntu
[2013-04-02 18:19:01 -0400] tanto: for chef server 11
[2013-04-02 18:19:21 -0400] c_t: hmm, I use chef quite happily with debian 6
[2013-04-02 18:19:29 -0400] tanto: chef 10 ?
[2013-04-02 18:19:35 -0400] c_t: but that said I've never tried using chef serer
[2013-04-02 18:19:36 -0400] c_t: server
[2013-04-02 18:19:41 -0400] c_t: chef 11 client works fine with debian
[2013-04-02 18:19:46 -0400] tanto: i found debian packages in the chef repo for chef server 10
[2013-04-02 18:19:51 -0400] awgross1: miah: i last looked around a month ago, seems like there was a fair amount of dev on it, ill read through those
[2013-04-02 18:20:20 -0400] c_t: the ubuntu packages might work with debian though
[2013-04-02 18:20:31 -0400] miah: its primarily lwrp based now
[2013-04-02 18:20:38 -0400] awgross1: i see
[2013-04-02 18:21:36 -0400] c_t: tanto: I think the ubuntu package would probably work with debian
[2013-04-02 18:22:39 -0400] tanto: i guess we'll find out :)
[2013-04-02 18:23:35 -0400] mml: is there an attribute to set who to run the migrate command as for the deploy task?
[2013-04-02 18:23:42 -0400] c_t: After all, packages for one usually work with the other, except when they don't
[2013-04-02 18:24:06 -0400] mml: if there is, i'm not seeing it in the docs, and it seems to be running as root
[2013-04-02 18:25:11 -0400] c_t: deploy_revision lets you set user and group
[2013-04-02 18:26:46 -0400] tanto: c_t: looks like it's not going to work, at least easily.. /opt/chef-server/embedded/bin/ruby: /lib/libc.so.6: version `GLIBC_2.14' not found (required by /opt/chef-server/embedded/lib/libruby.so.1.9)
[2013-04-02 18:27:11 -0400] mml: hmm, saw that doesn't seem to afect migrate. i guess i'll poke around a bit more
[2013-04-02 18:29:12 -0400] siezer: tanto omnibus builds are "everything above libc"
[2013-04-02 18:30:09 -0400] c_t: siezer: Why no actual debian build for chef server 11 then?
[2013-04-02 18:32:40 -0400] tanto: why no repo like there is for 10 :/
[2013-04-02 18:33:00 -0400] tanto: you would think opscode would *want* people to install chef
[2013-04-02 18:35:18 -0400] tanto: are most people using chef 10 or 11?
[2013-04-02 18:39:05 -0400] bluekelp: tanto: opscode wants most people to pay for hosted chef
[2013-04-02 18:44:35 -0400] miah: basically, running your own chef server is a lot of work. it requires some dedication, and skills. hosted-chef is a much easier route should you find open source chef to be painful.
[2013-04-02 18:46:03 -0400] ranjibd: chef server 11 with omnibus installer made it little easier though
[2013-04-02 18:46:11 -0400] miah: definitely
[2013-04-02 18:46:31 -0400] gondoi: looking at a knife plugin and the knife class, I don't see how ui.info and ui.error is defined.
[2013-04-02 18:46:36 -0400] ranjibd: but it introduced some other maintainence pains
[2013-04-02 18:46:40 -0400] gondoi: anyone have any hints?
[2013-04-02 18:46:49 -0400] ranjibd: gondoi: knife/core/ui
[2013-04-02 18:47:01 -0400] blueben: chef is a non-trivial service
[2013-04-02 18:47:02 -0400] gondoi: actually what i mean is that i don't see how it determines stdout or stderr
[2013-04-02 18:47:30 -0400] gondoi: ahhh thanks ranjibd
[2013-04-02 18:47:32 -0400] miah: the proof that chef server is hard is in how many people run chef-solo ;)
[2013-04-02 18:48:26 -0400] siezer: use chef 11 and server. solo is dragons.
[2013-04-02 18:48:26 -0400] doomviking: maybe I'm just lucky, but chef server has JFW'd for me. Aside from the hostname/dns/fqdn thing.
[2013-04-02 18:48:48 -0400] tanto: what's so hard about running your own chef server ?
[2013-04-02 18:48:57 -0400] tanto: it seems pretty straight forward to me, just that the packages are a mess
[2013-04-02 18:49:04 -0400] ranjibd: gondoi: https://github.com/opscode/chef/blob/master/lib/chef/knife/core/ui.rb#L70
[2013-04-02 18:49:25 -0400] siezer: chef server below 11 was notoriously hard to setup because of all the moving parts, and couchdb being an odd fit
[2013-04-02 18:49:34 -0400] siezer: chef server 11 is beeknees and super easy
[2013-04-02 18:49:41 -0400] tanto: yeah the apt packages for 10 made that easy
[2013-04-02 18:49:44 -0400] ranjibd: tanto: 11 or 10? 10 was a nightmare ... couch had fucked us thoroughly
[2013-04-02 18:49:54 -0400] rep0st1: chef11 makes a non devops guy like me start spinning up and converging resources in a matter of a week
[2013-04-02 18:49:56 -0400] tanto: apt packages for 10 had me up and running in literally 5 minutes
[2013-04-02 18:49:57 -0400] ranjibd: disk io related issues mainly
[2013-04-02 18:50:21 -0400] tanto: then i discovered 11 was out and has some huge changes
[2013-04-02 18:50:34 -0400] tanto: seems like 11 is a waste of time for me so far though
[2013-04-02 18:50:36 -0400] blueben: tanto: chef is a non-trivial datastore, web service, and app layer serving thousands of requests per minute
[2013-04-02 18:50:51 -0400] miah: i think most peoples couchdb experience was learning about 'compaction'
[2013-04-02 18:50:52 -0400] blueben: that's why it isn't simple :)
[2013-04-02 18:51:06 -0400] tanto: i know what chef is, and i'm familiar with the individual parts like rabbitmq and couchdb
[2013-04-02 18:51:08 -0400] blueben: companies hire full time admins to manage less
[2013-04-02 18:51:26 -0400] gleam: there are debian packages for 11 client, just not in the opscode repo
[2013-04-02 18:51:36 -0400] gleam: there are ubuntu packages for 11 server that work on wheezy
[2013-04-02 18:51:38 -0400] ranjibd: miah: even after frequent compaction.. couch was in general way too disk hungry
[2013-04-02 18:51:39 -0400] tanto: i just wanted to play around with chef on my own personal boxes (chef hosted makes that impossible) and make some recipes
[2013-04-02 18:51:48 -0400] gleam: it really wasn't terribly difficult
[2013-04-02 18:52:08 -0400] tanto: so far it seems like the ubuntu 10.04 packages work on debian 6.0
[2013-04-02 18:52:12 -0400] miah: ranjibd: ya
[2013-04-02 18:52:31 -0400] miah: tanto: hosted chef is free for up to 5 nodes
[2013-04-02 18:52:34 -0400] blueben: eh? I use hosted chef for my personal servers
[2013-04-02 18:54:27 -0400] tanto: i have 9 permanent and create 4-10 for data processing
[2013-04-02 18:56:02 -0400] blueben: so it's not that hosted chef is impossible
[2013-04-02 18:56:13 -0400] blueben: just that your needs are greater than what is offered by the free account ;)
[2013-04-02 18:56:35 -0400] siezer: tanto git clone github/opscode-cookbooks/chef-server.git
[2013-04-02 18:57:04 -0400] siezer: edit the vagrant file and put in something like "chef-server.dev.lap" into the VM name and give it a 10. address
[2013-04-02 18:57:07 -0400] siezer: vagrant up
[2013-04-02 18:57:12 -0400] siezer: edit your /etc/hosts
[2013-04-02 18:57:13 -0400] siezer: done.
[2013-04-02 18:57:18 -0400] siezer: laptop local chef11 server
[2013-04-02 18:57:31 -0400] siezer: I accidently blew mine away earlier and had it back up in 5 mins
[2013-04-02 19:01:42 -0400] bbox: hi guys, i have an off-topic question ... for people that are working on enterprises and they have linux engineers that are deploying applications and offers support to developers ... how they are called ? devops ?
[2013-04-02 19:03:01 -0400] savant: operations engineers
[2013-04-02 19:03:06 -0400] savant: support
[2013-04-02 19:03:09 -0400] savant: greybeards
[2013-04-02 19:03:44 -0400] cwj: The Damned
[2013-04-02 19:03:51 -0400] cwj: jk, i love life
[2013-04-02 19:04:14 -0400] bbox: greyeards ?
[2013-04-02 19:04:37 -0400] savant: they are old and have grey beards
[2013-04-02 19:04:46 -0400] gleam: i am young and cleanshaven
[2013-04-02 19:04:49 -0400] gleam: :(
[2013-04-02 19:05:43 -0400] savant: lies
[2013-04-02 19:05:52 -0400] gleam: aw, ok, you caught me.
[2013-04-02 19:06:44 -0400] bbox: :) any other terms ?
[2013-04-02 19:07:10 -0400] doomviking: systems engineers. black magic practitioners. greybeards indeed.
[2013-04-02 19:07:16 -0400] savant: systems administrators
[2013-04-02 19:07:16 -0400] maplebed: release engineers
[2013-04-02 19:07:18 -0400] gleam: bofh?
[2013-04-02 19:07:21 -0400] savant: bofh
[2013-04-02 19:07:22 -0400] savant: yeah that
[2013-04-02 19:07:29 -0400] awgross1: i feel like there should be a gender neutral term to replace greybeards
[2013-04-02 19:07:42 -0400] savant: awgross1: girls can grow beards too!
[2013-04-02 19:07:44 -0400] gleam: "asshole who doesn't give me logins to production servers"
[2013-04-02 19:07:55 -0400] gleam: true story, my aunt has a grey beard
[2013-04-02 19:07:57 -0400] gleam: it's like a little goatee
[2013-04-02 19:08:04 -0400] awgross1: fair enough, but the connotation is different
[2013-04-02 19:08:06 -0400] savant: gleam: all my devs have root access on all boxes. am i doing it right yet?
[2013-04-02 19:08:13 -0400] blueben: I like SRE
[2013-04-02 19:08:33 -0400] blueben: which is usually Site Reliability Engineer, but I prefer Systems Reliability Engineer
[2013-04-02 19:08:38 -0400] cwj: SRE is ok, some days it feels more like Computer Janitor
[2013-04-02 19:09:06 -0400] gleam: yeah, twitter uses site reliability engineer
[2013-04-02 19:09:51 -0400] doomviking: glorified plumber
[2013-04-02 19:10:50 -0400] savant: Senior Release Engineer
[2013-04-02 19:10:59 -0400] savant: server spelunker
[2013-04-02 19:11:08 -0400] blueben: I consider release to be something different
[2013-04-02 19:11:29 -0400] blueben: involving management of the software lifecycle on the dev side
[2013-04-02 19:14:20 -0400] bbox: cwj: I heard SRE name too in some places
[2013-04-02 19:14:41 -0400] ranjibd: google uses SRE
[2013-04-02 19:15:37 -0400] andreaugusto: hey guys, I'm running a knife ssh and the chef-master(my hosting) is returning me 503(unavailable). Is it because it's a self hosted chef?
[2013-04-02 19:15:45 -0400] ranjibd: should be called a yak shaver
[2013-04-02 19:16:28 -0400] bbox: thanks for the info ... have a good day/evening
[2013-04-02 19:16:33 -0400] ranjibd: andreaugusto: run it with -VV and pastebin the output
[2013-04-02 19:16:48 -0400] andreaugusto: kk
[2013-04-02 19:19:23 -0400] wamcvey: I'm trying to get my new install of chef-server configured. I want the service to use a CNAME, so my plan is to tweak the config and run chef-server-ctl reconfigure. However, my system doesn't have a /etc/chef-server/chef-server.rb
[2013-04-02 19:19:23 -0400] wamcvey: I've run chef-server-ctl show-config  and I get a json doc emitted, but I can't tell where it's originating from.
[2013-04-02 19:21:52 -0400] KarlHungus: OH: "its still in the fun list"
[2013-04-02 19:22:53 -0400] andreaugusto: ranjibd: http://pastebin.com/q82iaW77
[2013-04-02 19:23:23 -0400] Visitor: Does anyone know if you can create a new node attribute via a recipe?
[2013-04-02 19:23:36 -0400] siezer: Visitor absolutely
[2013-04-02 19:23:37 -0400] Visitor: node.set['new_attribute'] = my new attribute""
[2013-04-02 19:23:42 -0400] gleam: just like that
[2013-04-02 19:23:49 -0400] gleam: minus the syntax error
[2013-04-02 19:24:05 -0400] Visitor: yeah ignore the typo please
[2013-04-02 19:24:06 -0400] siezer: that'd be it. that would specifically set a default level attribtue
[2013-04-02 19:24:20 -0400] gleam: wouldn't that set 'normal' rather than default?
[2013-04-02 19:24:23 -0400] Visitor: darnit, forgot to upload the cookbook
[2013-04-02 19:24:23 -0400] ranjibd: andreaugusto: what is the search query you are using
[2013-04-02 19:24:24 -0400] Visitor: no wonder
[2013-04-02 19:24:27 -0400] Visitor: thanks
[2013-04-02 19:24:33 -0400] siezer: er, sorry. normal is correct
[2013-04-02 19:24:39 -0400] Visitor: i have to figure out the search query in a second
[2013-04-02 19:24:49 -0400] andreaugusto: ranjibd: the name of the node
[2013-04-02 19:24:59 -0400] siezer: search(:node, "new_attribute:
[2013-04-02 19:25:01 -0400] ranjibd: i need the exact command
[2013-04-02 19:25:06 -0400] siezer: er
[2013-04-02 19:25:15 -0400] siezer: search(:node, "new_attribute:my new attribute"
[2013-04-02 19:25:25 -0400] ranjibd: knife ssh "name:xxx" should work..
[2013-04-02 19:25:38 -0400] Visitor: thanks siezer, i will give that a shot in a second
[2013-04-02 19:25:45 -0400] siezer: Visitor its convention to set them into a cookbook namespace unless you have a really good reason not to
[2013-04-02 19:26:11 -0400] Visitor: right, I didn't want someone to search for it unless it was truly theree
[2013-04-02 19:26:11 -0400] siezer: node.set['cookbook-name']['maybe-even-recipe-name']['foo'] = "bar"
[2013-04-02 19:26:27 -0400] Visitor: it is like a presence value, almost
[2013-04-02 19:26:38 -0400] siezer: I use them for that all the time
[2013-04-02 19:27:13 -0400] siezer: just be careful not to blow away a whole tree of hashes with the normal v default precedence / merging
[2013-04-02 19:27:26 -0400] andreaugusto: ranjibd: knife ssh "olympus" "sudo chef-client"
[2013-04-02 19:27:30 -0400] Visitor: hm, intereseting
[2013-04-02 19:27:38 -0400] ranjibd: andreaugusto: thats wrong
[2013-04-02 19:27:53 -0400] andreaugusto: ranjibd: please help me :)
[2013-04-02 19:28:12 -0400] ranjibd: it should be knife ssh "name:olympus" 'sudo chef-client'
[2013-04-02 19:28:16 -0400] andreaugusto: ah
[2013-04-02 19:28:23 -0400] andreaugusto: lemme test it
[2013-04-02 19:28:45 -0400] ranjibd: after ssh., u are supposed to pass a search query. A valid search query looks like "attribute:value"
[2013-04-02 19:28:49 -0400] wdilly: Guys, I am trying to write a non-default recipe, eucalyptus, I have created a folder under the templates directory "eucalyptus" which I want to distribute an alternative /etc/hosts I have modified the hosts.erb file in templates/eucalyptus to differ from templates/default in important ways, but in my recipe, it only wants to look in the default folder even if i specify  source "eucalyptus/hosts.erb" How can i get it to look in the righ
[2013-04-02 19:29:28 -0400] andreaugusto: ranjibd: understand. but i still am getting 503 Unavailable
[2013-04-02 19:29:35 -0400] ranjibd: wdilly: non-default folder are looked for platforms
[2013-04-02 19:30:02 -0400] ranjibd: so they can be ubuntu. centos etc. chef pick up those if available, otherwise falls back to default
[2013-04-02 19:30:27 -0400] andreaugusto: is it possible to run knife ssh on a self hosted chef? or is it only for paid chef?
[2013-04-02 19:30:36 -0400] ranjibd: are u sure `ohai platform` returns eucalyptus on those instances?
[2013-04-02 19:30:44 -0400] ranjibd: andreaugusto: yeah absolutely
[2013-04-02 19:30:51 -0400] siezer: andreaugusto the client can't tell what flavor of server its running
[2013-04-02 19:30:52 -0400] ranjibd: u dont run ssh on the chef server itself
[2013-04-02 19:31:07 -0400] Visitor: siezer: so what would the knife search command be?
[2013-04-02 19:31:11 -0400] ranjibd: it just search and returns the attribute
[2013-04-02 19:31:16 -0400] Visitor: knife search node 'new_attribute:'
[2013-04-02 19:31:16 -0400] siezer: oss chef, private chef, and hosted chef are all just blackbox api endpoints
[2013-04-02 19:31:24 -0400] wdilly: so the only way to break it up is by platform, you cant add folders into the templates dir?
[2013-04-02 19:31:27 -0400] ranjibd: the workstation from where you are invoking knife ssh does the actual ssh connections
[2013-04-02 19:31:57 -0400] siezer: Visitor workstation (or some controller node) -> knife ssh -> api query -> results.each do |ssh|
[2013-04-02 19:32:08 -0400] andreaugusto: siezer: kk
[2013-04-02 19:32:36 -0400] ranjibd: knfie ssh "query:value" -a attr1 , will search all nodes with query=value attribute , and give you their attr1 attributes value, which will be used to do the ssh connection,
[2013-04-02 19:33:19 -0400] ranjibd: e.g. 'knife ssh "*:*" -a ipaddress uptime' , will return all nodes ipaddess
[2013-04-02 19:33:29 -0400] ranjibd: and then run uptime command on all of them via sshg
[2013-04-02 19:33:47 -0400] ranjibd: wdilly: you can.
[2013-04-02 19:33:49 -0400] andreaugusto: ah, maybe is the chef version I'm running
[2013-04-02 19:33:55 -0400] andreaugusto: on the server
[2013-04-02 19:33:57 -0400] andreaugusto: *master
[2013-04-02 19:34:25 -0400] ranjibd: wdilly: if you want a separate source erb, you can just specify it on the template resource
[2013-04-02 19:35:04 -0400] wdilly: so just have a seperate file with the default directory?
[2013-04-02 19:35:29 -0400] ranjibd: template "/etc/foo" { src node.some.attribute+".erb" }, and drop relevent erbs in default
[2013-04-02 19:35:48 -0400] ranjibd: sorry... not src., should be source
[2013-04-02 19:36:47 -0400] wdilly: okay, if thats how it works thats how it works, i appreciate it, i think you should be able to have folders though can specify source "folder/file.erb" instead of attribute.file.erb
[2013-04-02 19:36:49 -0400] wdilly: but thats me
[2013-04-02 19:38:01 -0400] ranjibd: wdilly: you will you dynamically pick up the folder name ?
[2013-04-02 19:38:28 -0400] wdilly: no you specify the folder name in the source filed of the recipe
[2013-04-02 19:39:12 -0400] ranjibd: so u know them before hand.. if thats the case, subfolder are fine
[2013-04-02 19:39:51 -0400] wdilly: ranjibd: that currently is feasible?
[2013-04-02 19:40:35 -0400] ranjibd: not sure.. i have to look at it. but it that does not work.. u can always construct the path from Chef::Config[:file_cache_path]
[2013-04-02 19:40:43 -0400] ranjibd: but im sure there some shortcut
[2013-04-02 19:42:12 -0400] wdilly: cool ill poke around at it
[2013-04-02 19:42:13 -0400] wdilly: thanks
[2013-04-02 19:52:23 -0400] joeheung1: Hi, wondering if anyone uses the opscode tomcat cookbook?
[2013-04-02 19:53:17 -0400] ranjibd: may be BryanWB__
[2013-04-02 19:55:25 -0400] jessicab1: nah bryans is here - https://github.com/bryanwb/chef-tomcat
[2013-04-02 19:56:11 -0400] jessicab1: its slightly broken since dashes dont work with lwrps, but besides that his works nicely once you change the cookbook name.. havent messed around much with the normal community one
[2013-04-02 20:41:20 -0400] miramira: Hi everyone - ok - so Chef is very cool to do installation, but how about removing a role from a node or series of nodes - how is this done?
[2013-04-02 20:41:58 -0400] siezer: miramira first, removing a role will only stop managing the resources the recipes in that role were concerned about
[2013-04-02 20:42:00 -0400] miramira: Basically I have a ton of app servers (tomcats) and they can take any number of applications, and I am planning to assign them on the fly with a simple cookbook "webapps"
[2013-04-02 20:42:05 -0400] siezer: it will not unremove software, tc
[2013-04-02 20:42:11 -0400] miramira: That's right
[2013-04-02 20:42:15 -0400] miramira: I understand
[2013-04-02 20:42:26 -0400] doomviking: unremove
[2013-04-02 20:42:29 -0400] doomviking: heh.
[2013-04-02 20:42:30 -0400] siezer: but, to do it, you'd edit the role out of the top-level role
[2013-04-02 20:42:32 -0400] miramira: But I have a very dynamic environment,where many servers take apps as needed and they are removed from there.
[2013-04-02 20:42:36 -0400] siezer: or wrapper cookbook
[2013-04-02 20:42:48 -0400] miramira: I see
[2013-04-02 20:42:50 -0400] miramira: OK - I get it.
[2013-04-02 20:42:57 -0400] miramira: I see what to do now
[2013-04-02 20:43:14 -0400] siezer: miramira if you decide to play the "unintall" game, be careful about side effects
[2013-04-02 20:43:25 -0400] miramira: No there are no uninstall
[2013-04-02 20:43:30 -0400] siezer: best thing to do is rebuild a node from scratch if you can
[2013-04-02 20:43:38 -0400] miramira: In general every server has the "webapps" role (and cookbook)
[2013-04-02 20:43:43 -0400] miramira: This cookbook has all the webapps
[2013-04-02 20:43:47 -0400] siezer: word
[2013-04-02 20:43:52 -0400] bluekelp: there's also "knife node run_list remove <node> <entires>" but i've not used it
[2013-04-02 20:44:03 -0400] bluekelp: easier to automate than editing the nodes, if you're doing a lot of this, perhaps
[2013-04-02 20:44:29 -0400] miramira: Each node is assigned a JSON (attribute) that specifies which webapps (recipes within the cookbook) to enable.
[2013-04-02 20:44:29 -0400] siezer: generally speaking, humans should not be in the node object editing business
[2013-04-02 20:44:58 -0400] bluekelp: ideally humans aren't involved in any of this, but here we all are :)
[2013-04-02 20:45:08 -0400] miramira: So when I run the role, each node auto installs the assigned webapps
[2013-04-02 20:45:24 -0400] miramira: But the problem is to remove the webapps that no longer are assigned to a node
[2013-04-02 20:45:27 -0400] siezer: touche
[2013-04-02 20:45:29 -0400] miramira: Basically clean up.
[2013-04-02 20:45:34 -0400] kklimonda: hmm, how do I get a list of all nodes (or their IPs) in the recipe? I should probably use search() but I'm not sure how
[2013-04-02 20:45:43 -0400] miramira: Anyways - thanks.
[2013-04-02 20:45:49 -0400] siezer: np
[2013-04-02 20:45:51 -0400] bluekelp: your recipe will have to handle that - or you could add a "remove-app-x" recipe
[2013-04-02 20:46:01 -0400] siezer: kklimonda knife search "*:*" -a ipaddress
[2013-04-02 20:46:10 -0400] miramira: Yes - that is what I will do
[2013-04-02 20:46:17 -0400] siezer: search (:nodes, "*:*)
[2013-04-02 20:46:26 -0400] miramira: the webapps cookbook will also have a remove-notvalid-apps
[2013-04-02 20:46:39 -0400] miramira: That will go through the directory and remove all unmatched apps
[2013-04-02 20:46:45 -0400] miramira: That's good enough
[2013-04-02 20:47:15 -0400] miramira: * "removed-notassigned-apps"
[2013-04-02 20:47:17 -0400] siezer: miramira so long as you're careful about directory isolation and stuff you should be good. its when you start uninstalling packages with metadata and deps things get weird
[2013-04-02 20:47:41 -0400] miramira: Ah- right - nah - rpms are rare in this case
[2013-04-02 20:47:43 -0400] kklimonda: siezer: ah, it's :node, not :nodes I think
[2013-04-02 20:47:53 -0400] siezer: aha. mea culpa.
[2013-04-02 20:47:58 -0400] kklimonda: I've used :nodes and got a weird error
[2013-04-02 20:48:07 -0400] gchristensen: is there a way for me to append a recipe to a run list from within a recipe?
[2013-04-02 20:48:21 -0400] miah: include_recipe 'foo'
[2013-04-02 20:48:39 -0400] gchristensen: hrm.. okay. the chef-rbenv cookbook doesn't seem to accept that for some reason
[2013-04-02 20:50:47 -0400] miah: elaborate
[2013-04-02 20:51:33 -0400] siezer: woohoo! I think I just test-kitchened.
[2013-04-02 20:51:36 -0400] siezer: *cabbage patch*
[2013-04-02 20:51:59 -0400] miah: cool
[2013-04-02 20:52:06 -0400] miah: why do you only think you test-kitchened?
[2013-04-02 20:52:21 -0400] gchristensen: miah: at the top of my recipe I added 'include "ruby_build"', but when I run chef it outputs: WARN: ruby_build cookbook is missing. Please add to the run_list (Action will be skipped)
[2013-04-02 20:52:33 -0400] miah: not include, include_recipe
[2013-04-02 20:52:51 -0400] gchristensen: my mistake, that is what I did. I just typed the message wrong.
[2013-04-02 20:52:56 -0400] siezer: miah still converging
[2013-04-02 20:52:57 -0400] miah: also, make sure your cookbook has a 'depends' for that cookbook in its metadata.rb
[2013-04-02 20:53:07 -0400] gchristensen: it does that too
[2013-04-02 20:53:19 -0400] miah: make sure the cookbook is uploaded to your chef server =)
[2013-04-02 20:53:31 -0400] gchristensen: I'm running chef-solo only :)
[2013-04-02 20:53:43 -0400] gchristensen: and when I add it to the role's run list it works fine.
[2013-04-02 20:53:55 -0400] gchristensen: https://github.com/fnichol/chef-rbenv/blob/master/providers/ruby.rb#L85 is the check it is running
[2013-04-02 20:56:47 -0400] gchristensen: miah: thoughts? I don't want to have to manually add it to the run list of the servers.
[2013-04-02 20:57:22 -0400] miah: does the rbenv cookbook have ruby_build in its depends?
[2013-04-02 20:58:07 -0400] gchristensen: it recommends it, doesn't depend on it. the cookbook I'm developing has both rbenv and ruby_build in the depends
[2013-04-02 20:58:13 -0400] miah: and which version of chef are you dealing with it?
[2013-04-02 20:58:21 -0400] gchristensen: 11.4.0
[2013-04-02 20:58:39 -0400] miah: hrm. interesting. i have no idea.
[2013-04-02 20:58:47 -0400] anveo: personally I have ruby_build in my Cheffile
[2013-04-02 20:59:08 -0400] gchristensen: anveo: can you elaborate? I do too
[2013-04-02 21:00:22 -0400] anveo: gchristensen I guess I just meant for things to work I had to add ruby_build to my runlist
[2013-04-02 21:00:43 -0400] gchristensen: ahh
[2013-04-02 21:00:51 -0400] gchristensen: well I guess if I have to :(
[2013-04-02 21:02:31 -0400] anveo: you need ruby_build if you don't want to manage compiling/installing rubies by yourself
[2013-04-02 21:03:08 -0400] anveo: so if you are used to something like `rbenv install <version>`, you need ruby_build
[2013-04-02 21:03:31 -0400] gchristensen: I understand, I want to use ruby_build, but I didn't want to add it to the run list at the role lvel
[2013-04-02 21:03:43 -0400] gchristensen: I wanted my cookbook that uses to include it
[2013-04-02 21:04:24 -0400] anveo: I see, I misunderstood
[2013-04-02 21:11:13 -0400] ponyofdeath: hi, anyone know what I am doing wrong here http://paste.ubuntu.com/5671746 so i dont get an json syntax error on the => ?
[2013-04-02 21:15:47 -0400] gchristensen: out of curiosity, why does http://docs.opscode.com/resource_git.html specifically talka bout github? does it actually do github-specific stuff?
[2013-04-02 21:18:12 -0400] bluekelp: ponyofdeath: => isn't for json -- it's for the .rb style dicts.  replace => with : in json
[2013-04-02 21:21:29 -0400] ponyofdeath: got it thanks! bluekelp
[2013-04-02 21:23:01 -0400] Majost: is there a way to do a notifies only if a provider, in this case 'template' actually modifies a file?
[2013-04-02 21:23:05 -0400] gleam: gchristensen: i think it's a typo, since there's no "github version 1.6.5"
[2013-04-02 21:24:52 -0400] Majost: I seem to have an issue where nginx restarts on every chef-client even when the template provider doesn't actually push a new file
[2013-04-02 21:27:20 -0400] cwj: Majost: notifications only fire if chef updated a resource. perhaps you have two different recipes modifying some aspect of the same file, so it only looks like there hasn't been a change?
[2013-04-02 21:27:36 -0400] cwj: debug mode can help diagnose stuff like that
[2013-04-02 21:27:50 -0400] cwj: debug logging that is
[2013-04-02 21:28:09 -0400] Majost: cwj: not possible... the template call is the only place it is reference.
[2013-04-02 21:29:06 -0400] Majost: ahh
[2013-04-02 21:29:17 -0400] Majost: I think it might be a bug in the version of the nginx cookbook I am using
[2013-04-02 21:37:43 -0400] jchauncey: i want to edit a property on a node without using an editor. anyone have any ideas on how i might do this?
[2013-04-02 21:38:18 -0400] jchauncey: so indeed of doing knife node edit foo, i would like to do a knife node edit foo prop1.prop2.foo = bar
[2013-04-02 21:38:24 -0400] jchauncey: *instead
[2013-04-02 21:41:28 -0400] laurent\: jchauncey: knife exec -E 'nodes.transform("name:node_name") {|n| n["prop1"]["pro3"]["foo"]="bar"}'
[2013-04-02 21:43:09 -0400] jchauncey: hawt
[2013-04-02 21:44:22 -0400] jchauncey: thanks ill give it a try
[2013-04-02 21:44:37 -0400] laurent\: that will fail if n["prop1"]["pro3"] doesn't exist
[2013-04-02 21:46:02 -0400] laurent\: could also do; n=Chef::Node.load("node_name"); n["prop1"]["pro3"]["foo"]="bar"; n.save
[2013-04-02 21:46:41 -0400] laurent\: ever tried shef -z ? :)
[2013-04-02 21:48:16 -0400] laurent\: you don't need the -z option for that btw
[2013-04-02 21:48:19 -0400] laurent\: bll
[2013-04-02 21:48:22 -0400] laurent\: bbl
[2013-04-02 22:05:34 -0400] ponyofdeath: hi, how can I assign all the hosts into an role?
[2013-04-02 22:06:08 -0400] ponyofdeath: knifefor i in `knife node list`; do knife node run_list add $i role[ec_linux];done but did not do as intented
[2013-04-02 22:07:42 -0400] bluekelp: ponyofdeath: do you quote the role?  e.g. ....run_list add $i 'role[ec_linux]'
[2013-04-02 22:07:57 -0400] ponyofdeath: bluekelp: shit no let me try that
[2013-04-02 22:08:03 -0400] bluekelp: bash will interpret the [] in the cmdline and probably not what you expected
[2013-04-02 22:09:21 -0400] ponyofdeath: bluekelp: thanksrun_list:  [role[ec_linux]]
[2013-04-02 22:09:26 -0400] ponyofdeath: bluekelp: still nothing
[2013-04-02 22:10:23 -0400] bluekelp: do you mean nothing = it hasn't taken effect or it hasn't been added to the runlist?
[2013-04-02 22:10:31 -0400] ponyofdeath: [2013-04-02T22:08:32+00:00] INFO: Run List is [role[ec_linux]]
[2013-04-02 22:10:31 -0400] ponyofdeath: [2013-04-02T22:08:32+00:00] INFO: Run List expands to []
[2013-04-02 22:11:09 -0400] spox: knife role show ec_linux
[2013-04-02 22:11:15 -0400] spox: does it have anything defined in the run list?
[2013-04-02 22:11:42 -0400] ponyofdeath: spox: def does
[2013-04-02 22:15:53 -0400] doomviking: huh. how is it that "knife search node '*:*'" has more nodes than "knife node list"
[2013-04-02 22:16:51 -0400] doomviking: oh nevermind. environments.
[2013-04-02 22:17:59 -0400] doomviking: still kinda weird.
[2013-04-02 22:21:42 -0400] johnbender: long time chef user here, I'm using chef 11.4 and it appears that the default attributes file isn't being eval'd
[2013-04-02 22:21:57 -0400] johnbender: (neither is one of the resource definitions)
[2013-04-02 22:22:06 -0400] johnbender: in the opscode apache2 cookbook
[2013-04-02 22:22:16 -0400] johnbender: my google-fu has failed me
[2013-04-02 22:24:15 -0400] johnbender: that is, even dumping a `raise "foo"` into the file doesn't net me anything
[2013-04-02 22:25:11 -0400] bluekelp: johnbender: but the recipe otherwise runs fine?
[2013-04-02 22:26:13 -0400] johnbender: bluekelp: yes, it falls apart when compiling the mod_php recipe which creates a directory that relies on the node['apache
[2013-04-02 22:26:22 -0400] johnbender: ']['dir'] attribute
[2013-04-02 22:26:45 -0400] johnbender: bluekelp: the parent recipe requires the apt recipe before that which runs fun
[2013-04-02 22:27:09 -0400] nebrera__: hi again
[2013-04-02 22:27:24 -0400] johnbender: I can also dump a log statement in before the apache::mod_php5 require and that works as well
[2013-04-02 22:27:37 -0400] nebrera__: does new version 11 use postgres instead of couched ?
[2013-04-02 22:27:38 -0400] johnbender: bluekelp: so for that value of "fine" I would say yes
[2013-04-02 22:42:21 -0400] maplebed: Do any of you generate dsh groups from chef roles/environments? I tried a naive approach and it's way slow... wondering if anybody's done it in some fancy efficient way.
[2013-04-02 22:43:10 -0400] maplebed: (nave approach: for role in search(roles), for environment in search(env), create group for search(:node, "role and environment"))
[2013-04-02 22:46:22 -0400] eliklein: has anyone used a jenkins plugin that works directly with the chef api?
[2013-04-02 23:24:05 -0400] miramira: Here is a question
[2013-04-02 23:24:25 -0400] miramira: Can knife execute ssh "chef-client" using multiple threads?
[2013-04-02 23:24:32 -0400] miramira: Like "rundeck" does?
[2013-04-02 23:24:53 -0400] miramira: Or do I have to run from "rundeck" and issue a multithreaded "chef-client"?
[2013-04-02 23:29:37 -0400] bluekelp: knife ssh will, by default, run several simultaneous ssh sessions
[2013-04-02 23:29:54 -0400] bluekelp: the -C flag can specify how many concurrent sessions
[2013-04-02 23:34:51 -0400] acts_as_coder: anyone have a public example of configuring multiple sites using the Opscode community nginx cookbook?
[2013-04-02 23:36:12 -0400] juliancdunn: eliklein: we've been hacking around on something in JRuby, absolutely nowhere close to releasable though

[2013-04-16 00:00:41 -0400] pixlpushr: jameson_:  try using not_if { File.exists?("/path/to/file")  }
[2013-04-16 00:04:13 -0400] david415: i'm having trouble getting berkshelf to upload to my new chef11 server...
[2013-04-16 00:04:24 -0400] david415: uninformative error messages abound
[2013-04-16 00:04:41 -0400] david415: Celluloid::FiberStackError: stack level too deep (please see https://github.com/celluloid/celluloid/wiki/Fiber-stack-errors)
[2013-04-16 00:09:18 -0400] miah: fix your config =)
[2013-04-16 00:09:51 -0400] miah: it seems like you've got some recursive config issue
[2013-04-16 00:13:52 -0400] david415: hmm
[2013-04-16 00:13:55 -0400] bluekelp: has anyone successfully upgraded the ruby version clients use from 1.8 -> 1.9?  i haven't found much on the googles and we're running into cookbook issues b/c some assume 1.9
[2013-04-16 00:33:07 -0400] stuartrexking: miah: Thanks for the recommendation. That is the one I am considering using the most. Problem I have is that it is dependent on two non-opscode cookbooks I am not familiar with.
[2013-04-16 00:33:45 -0400] stuartrexking: miah: and they are not mentioned in the documentation.
[2013-04-16 00:34:09 -0400] miah: file a ticket, we'll update
[2013-04-16 00:34:15 -0400] miah: documentation is hard to keep up to date =)
[2013-04-16 00:35:22 -0400] stuartrexking: miah: Ok. I will. Could you point me to the stunnel and discover repos that are used by chef-redis?
[2013-04-16 00:36:56 -0400] stuartrexking: miah: There are a few of each!
[2013-04-16 00:38:11 -0400] stuartrexking: miah: I might just tear out the install_source recipe and put it in it's own cookbook. It's exactly what I need.
[2013-04-16 00:40:11 -0400] miah: feel free
[2013-04-16 00:42:59 -0400] stuartrexking: miah: Could you point me to those two dependencies? discover and stunnel?
[2013-04-16 00:43:19 -0400] miah: file a ticket, i think chris added them recently
[2013-04-16 00:43:26 -0400] miah: so im not aware at the moment
[2013-04-16 00:43:53 -0400] stuartrexking: Ok. Thanks.
[2013-04-16 00:44:29 -0400] miah: sorry i dont have a better answer =)
[2013-04-16 00:45:10 -0400] stuartrexking: That's ok. I will simply use an older version od the cookbook.
[2013-04-16 00:51:54 -0400] a13x212: i have a databag with two items, each item has 2 attributes
[2013-04-16 00:52:39 -0400] a13x212: when i do "print data_bag('unix_groups')", it gives me the two items i expect
[2013-04-16 00:54:10 -0400] a13x212: when i do print data_bag_item('unix_groups', 'item1'), it returns the item1 name, i'm expecting it to return the two attritbutes
[2013-04-16 01:14:48 -0400] monokrome: Are the "---BEGIN RSA PRIVATE KEY---" parts supposed to be included in deploy keys?
[2013-04-16 01:14:59 -0400] monokrome: with the application cookbook
[2013-04-16 01:18:35 -0400] david415: aha! chef11 server omnibus ruby is old and broken...
[2013-04-16 01:25:16 -0400] zero-1_: Hi, I'm using chef 11 and the opscode apt cookbook
[2013-04-16 01:25:46 -0400] zero-1_: and I'm trying to add a ppa repository however I keep getting "The repository file to create is nil, cannot continue."
[2013-04-16 01:28:04 -0400] zero-1: I don't know what that means, any advice?
[2013-04-16 01:28:41 -0400] zero-1: I don't know what that means, any advice?
[2013-04-16 01:29:07 -0400] ranjibd_: zero-1: pastebin?
[2013-04-16 01:29:45 -0400] ranjibd_: what resource you are using ? apt_repository?
[2013-04-16 01:30:17 -0400] zero-1: http://pastebin.com/smQMDVsg
[2013-04-16 01:31:33 -0400] zero-1_: yes apt_repository
[2013-04-16 01:32:45 -0400] zero-1_: sorry my connection is really bad :S
[2013-04-16 01:38:27 -0400] a13x212: anyone have a guide to data bags? i must be missing something
[2013-04-16 01:51:21 -0400] franzaz: can a n00b ask simple questions in this forum?
[2013-04-16 01:53:26 -0400] gchristensen: franzaz: only if said n00b actually asks said question
[2013-04-16 01:53:27 -0400] log1kal: this is the right place, franzaz!
[2013-04-16 01:53:33 -0400] franzaz: cool
[2013-04-16 01:57:35 -0400] franzaz: i intended to keep my runlist concise.  I added the run_list in a role and it called my custom cookbook.  In the default recipe of that cookbook, one thing I'd like to do is install nginx from source.  So I added include_recipe "yum::epel" and include_recipe "nginx::source".  I'm getting a cookbook not found error when i run chef-client and an 'ls of /var/cache/chef/cookbooks' shows those cookbooks haven't been downloaded from the chef server t
[2013-04-16 01:57:35 -0400] franzaz: o the node.  It appears I need to add them to my run list?
[2013-04-16 01:59:37 -0400] bluekelp: franzaz: if this is from your cookbook you need to indicate your cb depends on those others
[2013-04-16 01:59:47 -0400] bluekelp: in metadata.rb
[2013-04-16 02:11:59 -0400] franzaz: worked!  thanks bluekelp!
[2013-04-16 02:12:18 -0400] franzaz: onto my next error...
[2013-04-16 02:52:12 -0400] franzaz: what has precedence, the attributes, e.g. env_run_lists, default_attributes, and override_attributes, in role policies or environment policies, assuming a node is in both?
[2013-04-16 02:54:51 -0400] gleam: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2013-04-16 02:55:17 -0400] franzaz: gracias
[2013-04-16 03:14:01 -0400] Guest84995: Hello
[2013-04-16 03:14:27 -0400] Guest84995: I tried to update my cookbook, but i got this error: ERROR: Network Error: getaddrinfo: No such host is known.
[2013-04-16 03:14:34 -0400] Guest84995: help needed please
[2013-04-16 03:14:55 -0400] Guest84995: i have setup my chef server, i can see the webui, but can't connect
[2013-04-16 03:15:08 -0400] Guest84995: i have tried port 4000, and it's not working as well
[2013-04-16 03:16:04 -0400] monokrome: Since opscode doesn't use github issue tracking
[2013-04-16 03:16:08 -0400] monokrome: how can I post issues that I find?
[2013-04-16 03:16:24 -0400] monokrome: Oh, found it
[2013-04-16 03:17:53 -0400] Guest84995: Hello, I tried to update my cookbook, but i got this error: ERROR: Network Error: getaddrinfo: No such host is known.
[2013-04-16 03:18:40 -0400] peter2: Hello, I tried to update my cookbook, but i got this error: ERROR: Network Error: getaddrinfo: No such host is known.
[2013-04-16 03:23:36 -0400] jameson_: peter2: are you in a virtual box?
[2013-04-16 03:27:10 -0400] peter2: i'm in ec2 instances
[2013-04-16 03:27:17 -0400] peter2: jameson_: i'm in ec2 instances
[2013-04-16 03:28:11 -0400] bluekelp: peter2: you might need an /etc/hosts entry for the machine's ip
[2013-04-16 03:29:21 -0400] peter2: bluekelp: could you share any tutorial to do that please?
[2013-04-16 03:29:51 -0400] bluekelp: peter2: you'll need to know basic sys admining to use chef without being very dangerous
[2013-04-16 03:31:24 -0400] peter2: bluekelp: I wish I could learn slowly, I'm originally a programmer, our sys admin having a hard time to learn ruby. So I would need to learn chef in short time.
[2013-04-16 03:32:08 -0400] peter2: bluekelp: however the deadline to accomplish the tasks is very short, so any help is needed m(_ _)m
[2013-04-16 03:32:43 -0400] peter2: bluekelp: http://ternarylabs.com/2010/09/15/automatically-configure-hostname-for-new-ec2-instances/ is this what you're talking about?
[2013-04-16 03:33:32 -0400] bluekelp: peter2: i recommend you work with your sysadmin. i think he or she could help you figure out errors like the one you are having, and she/he will certainly know about /etc/hosts
[2013-04-16 03:34:19 -0400] peter2: bluekelp: he's not coming today T__T I wanna cry
[2013-04-16 03:34:20 -0400] bluekelp: that link, if all goes well, should create an /etc/hosts entry that you need, yes
[2013-04-16 03:34:39 -0400] bluekelp: peter2: i think you need to push back on your boss and either not use chef or get more time
[2013-04-16 03:34:59 -0400] peter2: blukelp: is that because chef need to have fqdn?
[2013-04-16 03:35:08 -0400] bluekelp: peter2: you're likely to break your boxes if you're not careful.  chef is a powerful tool and it does not come with many safeguards
[2013-04-16 03:36:12 -0400] bluekelp: peter2: i have not run into an explicit need for a resolving hostname for chef to run itself (though some things you'll try to setup using chef may).
[2013-04-16 03:36:19 -0400] peter2: bluekelp: i created a ec2 instances only for this purpose. so if i mess it up I'll just terminate it
[2013-04-16 03:36:56 -0400] peter2: bluekelp: I'm creating my own chef server with ec2, maybe that's why
[2013-04-16 03:37:23 -0400] peter2: bluekelp: that happen when i upload the cookbook using "knife cookbook upload apache2"
[2013-04-16 03:37:37 -0400] bluekelp: our chef server does not have an /etc/hosts and it works fine.  so maybe this is a different issue.  if you pastebin/gist the output i can take a look
[2013-04-16 03:38:11 -0400] jameson_: peter2: sounds like you didn't setup route 53 for dns
[2013-04-16 03:39:32 -0400] peter2: bluekelp: https://gist.github.com/anonymous/5393168
[2013-04-16 03:39:45 -0400] bluekelp: jameson_: ah right - we do have DNS resolution so /etc/hosts is moot in our case
[2013-04-16 03:39:48 -0400] peter2: jameson_: no i didn't...should i set it up?
[2013-04-16 03:40:22 -0400] bluekelp: peter2: yes
[2013-04-16 03:40:46 -0400] peter2: I will try it first, thank ya all
[2013-04-16 03:50:08 -0400] jameson_: peter2: yes.. if you are trying to get to the chef server with a Domain name, you need to add the entry to route 53
[2013-04-16 03:50:21 -0400] jameson_: unless you are trying to connect to the server via IP address
[2013-04-16 03:51:19 -0400] peter2: jameson_: i did try to connect using elastic ip though
[2013-04-16 03:51:31 -0400] jameson_: you either 1. don't have the dns setup, 2. didn't add the client/server to proper security groups so the ports aren't accessible 3. you are using the wrong ip/interface combo
[2013-04-16 03:51:41 -0400] jameson_: is the ip address the public ip?
[2013-04-16 03:51:50 -0400] peter2: jameson_: currently setting up route 53, ttl 5 mins
[2013-04-16 03:51:59 -0400] peter2: jameson_: yes
[2013-04-16 03:52:12 -0400] jameson_: I', not sure how it does it now, but i know before chef would return the ec2 internal ip and not the public ip
[2013-04-16 03:52:32 -0400] jameson_: and you had to fish into cloud...public_ips or something to get it
[2013-04-16 03:53:44 -0400] jtimberman: peter2: are you running 'knife cookbook upload' when yo uget that error?
[2013-04-16 03:54:20 -0400] jtimberman: what's your chef_server_url? can you resolve the FQDN from your system? if you rerun knife cookbook upload with -VV?
[2013-04-16 03:56:28 -0400] peter2: jtimberman: yes
[2013-04-16 03:56:37 -0400] peter2: i have setup the route 53
[2013-04-16 03:56:39 -0400] peter2: https://test.hector-demo.ogilvyone.com.sg
[2013-04-16 03:56:58 -0400] peter2: that's the url
[2013-04-16 03:57:08 -0400] peter2: i can resolve the FQDN from my system
[2013-04-16 03:57:14 -0400] peter2: -VV still return same error
[2013-04-16 03:57:44 -0400] jtimberman: is that an open source chef 11 server?
[2013-04-16 03:57:49 -0400] peter2: https://gist.github.com/anonymous/5393230
[2013-04-16 03:58:39 -0400] peter2: I'm using sudo rpm -Uvh https://opscode-omnitruck-release.s3.amazonaws.com/el/6/x86_64/chef-server-11.0.6-1.el6.x86_64.rpm to install
[2013-04-16 03:58:48 -0400] peter2: redhat machine
[2013-04-16 04:03:17 -0400] bluekelp: jtimberman: any tips on upgrading clients to ruby 1.9? some recipes found in the wild use new syntax but i can't find much on getting 1.9 on clients - let alone upgrading from 1.8
[2013-04-16 04:05:34 -0400] jtimberman: bluekelp: as in cookbook authors using {hash: "syntax"} like that?
[2013-04-16 04:05:56 -0400] bluekelp: default values for block args
[2013-04-16 04:07:21 -0400] bluekelp: mostly in metachef recipe it seems
[2013-04-16 04:07:45 -0400] jtimberman: peter2: the gist you pasted doesn't hve all the output from knife cookbook upload -VV
[2013-04-16 04:10:56 -0400] peter2: jtimberman: https://gist.github.com/anonymous/5393282
[2013-04-16 04:11:45 -0400] jtimberman: it's not able to resolve this: https://ip-10-136-130-79.a
[2013-04-16 04:11:55 -0400] jtimberman: er, cut off, but you can find that
[2013-04-16 04:12:19 -0400] jtimberman: Chef 11 server runs a service called "bookshelf" that handles cookbook uploading.
[2013-04-16 04:12:56 -0400] jtimberman: it will configure the service using the node's "fqdn" which by default on ec2 is the internal fqdn.
[2013-04-16 04:15:06 -0400] peter2: hmm so the error got nothing to do with fqdn?
[2013-04-16 04:15:57 -0400] jtimberman: it cannot resolve ip-10-136-130-79-ap-southeast-1.compute.internal
[2013-04-16 04:18:49 -0400] peter2: jtimberman: any idea to resolve this situation?
[2013-04-16 04:19:26 -0400] jtimberman: peter2: add an entry to /etc/hosts for that w/ the public IP?
[2013-04-16 04:20:24 -0400] peter2: jtimberman: so i will need to try http://ternarylabs.com/2010/09/15/automatically-configure-hostname-for-new-ec2-instances/ ?
[2013-04-16 04:20:56 -0400] jtimberman: no
[2013-04-16 04:21:00 -0400] jtimberman: on your local machine.
[2013-04-16 04:21:53 -0400] jtimberman: looks like you're on a windows system.
[2013-04-16 04:21:56 -0400] jtimberman: it'll be something like, c:\windows\system32\drivers\etc\hosts
[2013-04-16 04:22:14 -0400] jtimberman: i don't remember exactly off hand.
[2013-04-16 04:22:50 -0400] peter2: ah ic, okay, i will try it first
[2013-04-16 04:24:25 -0400] jameson_: -
[2013-04-16 04:24:59 -0400] bluekelp: jtimberman: is there a way to cleanly migrate a client to omnibus install if previously bootstrapped by knife?
[2013-04-16 04:28:49 -0400] jtimberman: bluekelp: you mean via a ruby+rubygems install like system packages?
[2013-04-16 04:29:32 -0400] bluekelp: jtimberman: yes. i bootstrapped the nodes with knife but that did r1.8. i'd like to go omnibus but not sure now to migrate over - if there are any catches, etc.
[2013-04-16 04:29:50 -0400] jtimberman: bluekelp: you'll probably want a custom bootstrap template
[2013-04-16 04:29:58 -0400] jtimberman: that cleans up the current installation
[2013-04-16 04:30:10 -0400] jtimberman: and installs via the omnibus full stack package
[2013-04-16 04:30:15 -0400] bluekelp: on my test node i had to manually kill /usr/local/bin/chef-client b/c it was left around after removing ruby system pkgs, etc.  still tracking it down, etc.
[2013-04-16 04:30:45 -0400] bluekelp: jtimberman: do you know of such a template? i don't know about bootstrap templates
[2013-04-16 04:33:37 -0400] jtimberman: http://docs.opscode.com/knife_bootstrap.html
[2013-04-16 04:35:09 -0400] jtimberman: sleep time :)
[2013-04-16 05:02:29 -0400] peter2: bluekelp: for adding the host is the format correct for [ipaddress] [url]?
[2013-04-16 05:22:50 -0400] bluekelp: peter2: yes.  but not a url, a hostname
[2013-04-16 05:23:34 -0400] peter2: bluekelp: is this my hostname? test.hector-demo.ogilvyone.com.sg
[2013-04-16 05:24:49 -0400] bluekelp: probably not - but add a line for that and another for ip-10-136-130-79-ap-southeast-1.compute.internal
[2013-04-16 05:25:19 -0400] bluekelp: both can have same IP in the hosts file, they'll just be aliases
[2013-04-16 05:26:44 -0400] bluekelp: i think the ip-XXXX version is the one that was failing to resolve though
[2013-04-16 05:41:00 -0400] peter2: i probably need to restart my workstation?
[2013-04-16 05:46:57 -0400] peter2: blukekelp: It's working!! thanks guys!
[2013-04-16 05:47:03 -0400] peter2: jtimberman: It's working!! thanks guys!
[2013-04-16 06:22:06 -0400] dominik: hi, i want to transfer some node specific binary files, can anyone tell me where to put them? Are Data-Bags the right place? I'm using Chef-solo
[2013-04-16 06:39:33 -0400] dominik: somebody here :D?
[2013-04-16 06:45:03 -0400] bluekelp: yup. don't know about binary data/files.  i don't think that dbs will work b/c they're json.  unless you want to get into encoding/decoding
[2013-04-16 06:45:38 -0400] bluekelp: why not pull from a remote file-system/web server?  the remote_file resource can do that
[2013-04-16 06:47:38 -0400] peter2: is it possible to use remote_file using ssh protocol?
[2013-04-16 06:47:52 -0400] peter2: bluekelp:is it possible to use remote_file using ssh protocol?
[2013-04-16 06:50:42 -0400] bluekelp: peter2: i don't know - don't think so. i use it for straight http.  assume https works
[2013-04-16 06:52:33 -0400] peter2: bluekelp: hmm in that case is there any way to transfer my file using ftp using chef?
[2013-04-16 06:54:36 -0400] bluekelp: you could use the execute (or is it command?) resource.  but that's hacky.  or roll your own inside chef.  oof. it's almost midnight.  use remote_file :) i think you'll be happier you did
[2013-04-16 06:58:31 -0400] peter2: problem with http protocol is they got no authentication, not sure if we allowed to do that haha
[2013-04-16 07:01:58 -0400] bluekelp: peter2: you *could* use a bash resource and use curl/scp/wget if all else failed but making it idempotent requires a little work
[2013-04-16 07:02:05 -0400] bluekelp: would be surprised if there isn't something out there
[2013-04-16 07:03:28 -0400] peter2: yep, scp would be my 2nd option
[2013-04-16 07:03:36 -0400] peter2: thanks for your help bluekelp
[2013-04-16 07:38:13 -0400] linuxboy_: hi
[2013-04-16 07:38:17 -0400] flaccid: looking at https://github.com/opscode-cookbooks/application_php#attribute-parameters for some reason i can't find where you set variables to output to the local_settings_file template, only the database block is available, is this a bug?
[2013-04-16 07:38:17 -0400] linuxboy_: I have an attribute question
[2013-04-16 07:39:41 -0400] linuxboy_: I have 2 cookbooks, cookbook a is included by cookbook b. The node includes the role b (and role b includes cookbook b). I expect attributes from cookbook b to be a higher priority, but that seems to not be the case. It keeps switching between cookbook a and cookbook b attributes.
[2013-04-16 07:40:11 -0400] linuxboy_: how do I ensure that cookbook b attributes are highest priority?
[2013-04-16 07:40:22 -0400] flaccid: you include recipes not cookbooks linuxboy_
[2013-04-16 07:41:14 -0400] linuxboy_: so attributes don't come along with it?
[2013-04-16 07:42:07 -0400] flaccid: linuxboy_: you may also be looking for http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-04-16 07:42:36 -0400] linuxboy_: flaccid: I've looked at both, neither describe my situation
[2013-04-16 07:42:41 -0400] flaccid: and also http://docs.opscode.com/essentials_cookbook_attribute_files_ordering.html
[2013-04-16 07:42:45 -0400] flaccid: which is linked to
[2013-04-16 07:42:52 -0400] flaccid: pretty sure its covered in all of the above
[2013-04-16 07:43:19 -0400] kisoku:  actually
[2013-04-16 07:43:29 -0400] kisoku: if you have recipe b including recipe a
[2013-04-16 07:43:46 -0400] linuxboy_: I'm doing that
[2013-04-16 07:43:48 -0400] kisoku: the ones from a will get loaded last
[2013-04-16 07:43:55 -0400] kisoku: and be the ones that take effect
[2013-04-16 07:43:59 -0400] linuxboy_: Oh
[2013-04-16 07:44:06 -0400] linuxboy_: that isn't happening
[2013-04-16 07:44:12 -0400] kisoku: mind you it's hard to say because you haven't actually shown us your code
[2013-04-16 07:44:13 -0400] linuxboy_: I sometimes get the one and sometimes the other
[2013-04-16 07:44:18 -0400] kisoku: that
[2013-04-16 07:44:22 -0400] kisoku: should not happen
[2013-04-16 07:44:23 -0400] flaccid: it still depends how attributes have been defined
[2013-04-16 07:44:32 -0400] kisoku: yyes
[2013-04-16 07:44:34 -0400] kisoku: like I sai
[2013-04-16 07:44:38 -0400] linuxboy_: they are all defined as default
[2013-04-16 07:44:41 -0400] linuxboy_: and are all strings
[2013-04-16 07:44:43 -0400] kisoku: you show us no code so it's impossible to guess
[2013-04-16 07:46:45 -0400] flaccid: maybe my question i can rephrase, how do i set variables for settings_template in teh application cookbook?
[2013-04-16 07:48:51 -0400] linuxboy_: http://pastebin.com/idePbC1y
[2013-04-16 07:48:59 -0400] linuxboy_: that is snippets of code showing the problem
[2013-04-16 07:49:32 -0400] linuxboy_: sometimes I get 3.0 and other times I get 2.1
[2013-04-16 07:50:45 -0400] kisoku: where ?
[2013-04-16 07:50:57 -0400] kisoku: describe what "get" means
[2013-04-16 07:51:05 -0400] kisoku: what is consuming that variable
[2013-04-16 07:51:15 -0400] kisoku: look
[2013-04-16 07:51:20 -0400] kisoku: the run list executes in order
[2013-04-16 07:51:21 -0400] linuxboy_: sometimes that variable is set to "3.0" other times it is set to "2.1"
[2013-04-16 07:51:27 -0400] kisoku: yeah
[2013-04-16 07:51:36 -0400] kisoku: because
[2013-04-16 07:51:50 -0400] kisoku: it's 3.0 during part of the compile phase of your chef run
[2013-04-16 07:52:03 -0400] kisoku: and then changes to 2.1 after you include the varnish cookbook
[2013-04-16 07:52:13 -0400] linuxboy_: ah
[2013-04-16 07:52:17 -0400] flaccid: tis not a good stack
[2013-04-16 07:52:24 -0400] linuxboy_: how should I change this?
[2013-04-16 07:52:30 -0400] linuxboy_: I expected hostingedge to override it
[2013-04-16 07:52:30 -0400] kisoku: the only way for you to ensure that the attribute you set in your cookbook wins
[2013-04-16 07:52:40 -0400] kisoku: is the put it at a higher level of priority
[2013-04-16 07:52:42 -0400] kisoku: ie.
[2013-04-16 07:52:42 -0400] flaccid: don't use attribute files in recipes to set node attributes
[2013-04-16 07:52:44 -0400] kisoku: normal
[2013-04-16 07:52:47 -0400] kisoku: or override
[2013-04-16 07:52:51 -0400] kisoku: ie.
[2013-04-16 07:52:57 -0400] linuxboy_: or in the role?
[2013-04-16 07:53:08 -0400] kisoku: node.set[:varnish][:version] = "3.0"
[2013-04-16 07:53:26 -0400] kisoku: or node.override[:varnish][:version] = "3.0"
[2013-04-16 07:53:29 -0400] kisoku: as it is
[2013-04-16 07:53:33 -0400] kisoku: you set one default
[2013-04-16 07:53:38 -0400] linuxboy_: node being the fqdn?
[2013-04-16 07:53:39 -0400] flaccid: which is covered in the links i pasted above if you really wanted to do it.
[2013-04-16 07:53:40 -0400] kisoku: and then it gets reset later
[2013-04-16 07:54:01 -0400] kisoku: sorry node. is the syntax you use if you set the attributes from within a recipe
[2013-04-16 07:54:06 -0400] kisoku: not an attribute file
[2013-04-16 07:54:47 -0400] kisoku: I strongly recommend you read anatomy of a chef run
[2013-04-16 07:54:58 -0400] linuxboy_: flaccid: can you show me where this is referenced in the docs you pointed out? I can't seem to find it
[2013-04-16 07:55:05 -0400] kisoku: http://docs.opscode.com/essentials_nodes_chef_run.html
[2013-04-16 07:55:57 -0400] spheromak: kisoku: when are you in SF  ?
[2013-04-16 07:56:05 -0400] kisoku: I arrive on saturday
[2013-04-16 07:56:12 -0400] kisoku: leave the following sunday
[2013-04-16 07:56:16 -0400] spheromak: sweet so you will be primed for conf time :)
[2013-04-16 07:56:16 -0400] kisoku: you going to be there ?
[2013-04-16 07:56:21 -0400] kisoku: yep :-)
[2013-04-16 07:56:31 -0400] spheromak: nah im in portland at ostack summit this week. will want the weekend with the wife :D
[2013-04-16 07:56:32 -0400] linuxboy_: flaccid: I found this: One approach is to set attributes at the same precedence level by setting attributes in a cookbooks attribute files, and then also setting the same default attributes (but with different values) using a role. The attributes set in the role will be deep merged on top of the attributes from the attribute file, and the attributes set by the role will take precedence over the attributes specified in the cookbooks attribute files.
[2013-04-16 07:56:44 -0400] kisoku: no I mean SF
[2013-04-16 07:56:49 -0400] kisoku: are you going to chefconf ?
[2013-04-16 07:56:58 -0400] linuxboy_: flaccid: which is different to what you suggested
[2013-04-16 07:57:19 -0400] spheromak: lyea i will be there
[2013-04-16 07:57:24 -0400] spheromak: but not till tues i think
[2013-04-16 07:57:29 -0400] flaccid: i dunno just set node['varnish']['version'] to what you want on the node itself, like its node.json
[2013-04-16 07:57:29 -0400] kisoku: cool
[2013-04-16 07:57:36 -0400] spheromak: linuxboy_: there is more than one way to do it
[2013-04-16 07:57:55 -0400] linuxboy_: flaccid: I still can't find this problem described in the documentation...
[2013-04-16 07:58:02 -0400] spheromak: and roles do have presedence when set at the same attrib level as a recipe
[2013-04-16 07:58:06 -0400] flaccid: neither can i
[2013-04-16 07:58:37 -0400] flaccid: where is documentation to set a node attribute value on a node ?
[2013-04-16 07:58:44 -0400] flaccid: i use chef solo with a node.json..
[2013-04-16 07:59:11 -0400] linuxboy_: 09:53 < flaccid> which is covered in the links i pasted above if you really wanted to do it.
[2013-04-16 07:59:24 -0400] flaccid: different thing dude
[2013-04-16 08:00:22 -0400] spheromak: linuxboy_: ther shoudl be a doc on attributes and presedence
[2013-04-16 08:00:33 -0400] linuxboy_: spheromak: there is: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2013-04-16 08:00:39 -0400] spheromak: so if you want your cook to win you need to set in your attributes file at "set" or at override.
[2013-04-16 08:00:56 -0400] linuxboy_: spheromak: but not on attribute presedence when including 2 cookbooks with the same default attributes
[2013-04-16 08:01:05 -0400] spheromak: ins an attributes file in your wrapper... or in the recipe you can set the attribute with node.set or node.override to ensure that wins
[2013-04-16 08:01:08 -0400] flaccid: my question is simply how you set a node attribute on a node with chef client/server
[2013-04-16 08:01:21 -0400] linuxboy_: flaccid: the .js file
[2013-04-16 08:01:23 -0400] spheromak: you can also set this in environment or role default_attributes and they shoudl win over the cookbook
[2013-04-16 08:01:38 -0400] flaccid: linuxboy_: yes the node.json
[2013-04-16 08:01:50 -0400] spheromak: linuxboy_: if you have 2 cooks that set at the same level you gonna have unexpected results
[2013-04-16 08:01:56 -0400] flaccid: but that seems manual to do if you run chef server
[2013-04-16 08:02:00 -0400] spheromak: and maybe variable depding on parse order which may not be guaranteed
[2013-04-16 08:02:02 -0400] linuxboy_: spheromak: the docs are unclear about that
[2013-04-16 08:02:06 -0400] spheromak: so one hass to set at a higher presedence
[2013-04-16 08:02:10 -0400] spheromak: well
[2013-04-16 08:02:15 -0400] spheromak: Im being clear about it :D
[2013-04-16 08:02:25 -0400] spheromak: there is not implicit ordering
[2013-04-16 08:02:40 -0400] spheromak: maybe there is, but man you def shouldn't expect there to be
[2013-04-16 08:02:44 -0400] linuxboy_: spheromak: you are, my issue is I come here coming for help and everyone shouts "YOU SHOULD READ THE DOCS" before listening to the problem, and the docs are unclear about this problem.
[2013-04-16 08:03:00 -0400] spheromak: get in the habit of ensuring your desired state by using the mechanisims provided to do so
[2013-04-16 08:03:17 -0400] spheromak: linuxboy_: and im trying to help :D
[2013-04-16 08:03:44 -0400] linuxboy_: spheromak: thank you, I appreciate it. And thanks for listening to the issue
[2013-04-16 08:03:47 -0400] spheromak: docs are unclear, but they also never state that there is guarantees about anythig in recipes set at the same presecedence node do they talk about ordering IIRC
[2013-04-16 08:03:59 -0400] spheromak: *nor
[2013-04-16 08:04:06 -0400] spheromak: not node.. damn muscle memory
[2013-04-16 08:04:11 -0400] flaccid: if you set the node attribute on the node itself, it doesn't take the default.
[2013-04-16 08:04:16 -0400] linuxboy_: spheromak: I think I'm going to move the attributes to the nod
[2013-04-16 08:04:17 -0400] linuxboy_: *node
[2013-04-16 08:04:22 -0400] spheromak: flaccid: if you set with .set
[2013-04-16 08:04:26 -0400] spheromak: or if you use json overrides
[2013-04-16 08:04:41 -0400] spheromak: which is basically the saem as using a role (from chefs perspective if i also remember that right)
[2013-04-16 08:04:49 -0400] spheromak: tho in chef 11 i haven't looked over the attribute code
[2013-04-16 08:04:50 -0400] flaccid: well best practice is using default[] so it gets set if the 'user' doesn't
[2013-04-16 08:05:10 -0400] spheromak: flaccid: defalt in your cook attribs, but if your doing a wrapper i say go balls out with set
[2013-04-16 08:05:19 -0400] spheromak: elaves room to use override in an environment
[2013-04-16 08:05:21 -0400] spheromak: if you ahve to
[2013-04-16 08:05:25 -0400] flaccid: i havnt used chef client/server for a long time so i have no idea how you set a node attribute on the node!
[2013-04-16 08:05:40 -0400] spheromak: well then you aren't the right person to answer it ;)
[2013-04-16 08:05:43 -0400] flaccid: i still do default in wrappers
[2013-04-16 08:05:52 -0400] spheromak: and overide with passed in json
[2013-04-16 08:05:53 -0400] flaccid: then someone freaken answer the basic question
[2013-04-16 08:05:59 -0400] spheromak: whats the basic ?
[2013-04-16 08:06:25 -0400] flaccid: how to set a node attribute on a node itself
[2013-04-16 08:06:40 -0400] kisoku: .set is an alias for normal
[2013-04-16 08:06:40 -0400] spheromak: linuxboy_: you gain little by doing that some people liek it, but i personally would use  set[:foo][:bar] in your wrapper cook (in attributes)
[2013-04-16 08:06:41 -0400] flaccid: like if you were to do it a node.json used by chef-solo
[2013-04-16 08:06:48 -0400] kisoku: normal > default
[2013-04-16 08:06:53 -0400] kisoku: override > normal
[2013-04-16 08:07:01 -0400] linuxboy_: spheromak: I'll look at set, never used it before
[2013-04-16 08:07:02 -0400] kisoku: if you want to override the default
[2013-04-16 08:07:02 -0400] spheromak: yea normal is the actual json key
[2013-04-16 08:07:05 -0400] kisoku: don't use default
[2013-04-16 08:07:12 -0400] kisoku: use normal or override!
[2013-04-16 08:07:16 -0400] kisoku: simple ?
[2013-04-16 08:07:31 -0400] flaccid: here is a wrapper cookbook doing it on the node for chef solo https://github.com/flaccid/cookbooks/tree/master/cookbooks/mediawiki_application#example-nodejson
[2013-04-16 08:07:31 -0400] spheromak: its there in the knife node show node.foo :D
[2013-04-16 08:07:38 -0400] spheromak: but you prob dont have this in solo
[2013-04-16 08:07:41 -0400] flaccid: all the cookbooks used by the wrapper are using default[]
[2013-04-16 08:07:44 -0400] flaccid: it works fine.
[2013-04-16 08:07:46 -0400] spheromak: i think you can dump the node data tho with a handler
[2013-04-16 08:08:00 -0400] spheromak: flaccid: might have guaranteed ordering on solo dunno
[2013-04-16 08:08:07 -0400] kisoku: just shove pry into the place where you want to inspect the node
[2013-04-16 08:08:09 -0400] linuxboy_: spheromak: where can I read about 'set'? searching for 'set' is hard :/
[2013-04-16 08:08:20 -0400] spheromak: linuxboy_: in the attribute pages
[2013-04-16 08:08:45 -0400] spheromak: kisoku: wereyou around in oth simle times of set[] and set_unless[] ?
[2013-04-16 08:08:46 -0400] spheromak: :D
[2013-04-16 08:08:59 -0400] spheromak: damn my net conn is mucking up here
[2013-04-16 08:09:34 -0400] spheromak: flaccid: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2013-04-16 08:09:57 -0400] flaccid: spheromak: i quoted that url initially.
[2013-04-16 08:10:10 -0400] spheromak: heh
[2013-04-16 08:10:13 -0400] spheromak: well it talks of normal
[2013-04-16 08:10:22 -0400] spheromak: i guess theres no bridge from set = normal
[2013-04-16 08:10:38 -0400] linuxboy_: spheromak: really? I looked through all of them
[2013-04-16 08:11:08 -0400] spheromak: linuxboy_:
[2013-04-16 08:11:09 -0400] spheromak: http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_methods.html
[2013-04-16 08:11:13 -0400] spheromak: has set
[2013-04-16 08:11:21 -0400] spheromak: its also called "normal" now aparently
[2013-04-16 08:11:26 -0400] linuxboy_: oh
[2013-04-16 08:11:29 -0400] spheromak: and im just an old fart with chef and still use "set"
[2013-04-16 08:11:32 -0400] linuxboy_: I was expecting something different
[2013-04-16 08:11:39 -0400] linuxboy_: I've used normal
[2013-04-16 08:11:41 -0400] linuxboy_: ok thanks
[2013-04-16 08:11:42 -0400] linuxboy_: ciao
[2013-04-16 08:11:50 -0400] kisoku: spheromak: yep
[2013-04-16 08:12:19 -0400] kisoku: btw. this is also aggravated by the fact that everything just changed again :-P
[2013-04-16 08:12:37 -0400] spheromak: sometimes when im learning folks attribs and this stack fo stuff I lament the old days (tho it had its own terrible probs)
[2013-04-16 08:12:46 -0400] spheromak: yea sorta
[2013-04-16 08:12:50 -0400] spheromak: For the better IMO
[2013-04-16 08:12:59 -0400] kisoku: one of these days I'm going to get on chef 11
[2013-04-16 08:13:00 -0400] spheromak: and attribute code under the hood was pretty nasty
[2013-04-16 08:13:01 -0400] kisoku: :-P
[2013-04-16 08:13:08 -0400] kisoku: not quite there yet
[2013-04-16 08:13:29 -0400] spheromak: ah yea i have the luxury of working on a non production(as of yet project) and moveing everything over was a piece of cake
[2013-04-16 08:13:42 -0400] spheromak: altho I think that the guys at my old gig did a migration with out much fuss
[2013-04-16 08:14:06 -0400] spheromak: kisoku: they used knife-backup
[2013-04-16 08:14:11 -0400] spheromak: i was just talking to em
[2013-04-16 08:14:21 -0400] kisoku: oh migrating the data isn't the problem
[2013-04-16 08:14:27 -0400] kisoku: it's the mess of cookbooks
[2013-04-16 08:14:33 -0400] spheromak: oh you got some incompat ?
[2013-04-16 08:14:35 -0400] kisoku: we have a lot of cookbooks
[2013-04-16 08:14:39 -0400] spheromak: yea
[2013-04-16 08:14:40 -0400] kisoku: uh
[2013-04-16 08:14:41 -0400] spheromak: sucks
[2013-04-16 08:14:44 -0400] kisoku: I don't know ?
[2013-04-16 08:14:48 -0400] kisoku: probably ?
[2013-04-16 08:14:55 -0400] kisoku: I have to sort through it
[2013-04-16 08:15:13 -0400] kisoku: in due time
[2013-04-16 08:15:19 -0400] kisoku: I have other prioriities
[2013-04-16 08:15:21 -0400] spheromak: I've been andating upstream and pull requests like mad for the new work. @mnst we had to buld so much of our own stuff as an early mover and we couldn't oss much of that...
[2013-04-16 08:15:41 -0400] kisoku: yeah
[2013-04-16 08:15:45 -0400] kisoku: I have the same problem
[2013-04-16 08:15:50 -0400] spheromak: and we were rhel
[2013-04-16 08:15:52 -0400] kisoku: still trying to cope with all the forks we did
[2013-04-16 08:15:56 -0400] spheromak: i think your in a similar boat ?
[2013-04-16 08:15:58 -0400] spheromak: yea
[2013-04-16 08:16:08 -0400] kisoku: slowly unwinging them
[2013-04-16 08:16:11 -0400] spheromak: yeap
[2013-04-16 08:16:13 -0400] kisoku: unwinding
[2013-04-16 08:16:17 -0400] spheromak: I did a heap of jsut throwing shit out
[2013-04-16 08:16:22 -0400] kisoku: same
[2013-04-16 08:16:28 -0400] spheromak: and using upstream, and wrappers
[2013-04-16 08:16:46 -0400] spheromak: and making PR's wher eit makes sense
[2013-04-16 08:16:57 -0400] spheromak: thats def a better usage pattern :D
[2013-04-16 08:17:03 -0400] spheromak: I still don't like the role cooks thing tho
[2013-04-16 08:17:16 -0400] spheromak: playing with it, but i never really laoded roles with attributes in the first place..
[2013-04-16 08:17:37 -0400] spheromak: and i like the separation of code from data
[2013-04-16 08:18:12 -0400] spheromak: feels all MVC-esque to me, and the role cooks violate that in my brain and it just feels wrong..
[2013-04-16 08:18:35 -0400] spheromak: anyhow i think its bedtime
[2013-04-16 08:19:32 -0400] kisoku: role ?
[2013-04-16 08:19:39 -0400] spheromak: stoked for chef conf. tho.. being at this openstack stuff just makes me want that
[2013-04-16 08:19:41 -0400] spheromak: uh
[2013-04-16 08:19:43 -0400] kisoku: roles are another thorn in my side
[2013-04-16 08:19:49 -0400] spheromak: the reality forge blog on role cooks and wrapper cooks
[2013-04-16 08:20:00 -0400] kisoku: yeah
[2013-04-16 08:20:16 -0400] kisoku: I'm still sorta on the dence about that
[2013-04-16 08:20:17 -0400] spheromak: you using heavy data loaded roles ?
[2013-04-16 08:20:19 -0400] kisoku: fence
[2013-04-16 08:20:28 -0400] kisoku: I have a lot of roles
[2013-04-16 08:20:29 -0400] spheromak: yea well i thin it will be moot in 12
[2013-04-16 08:20:32 -0400] kisoku: too many actually
[2013-04-16 08:20:37 -0400] kisoku: really ?
[2013-04-16 08:20:39 -0400] kisoku: how ?
[2013-04-16 08:20:54 -0400] spheromak: i think they will add versioning to roles
[2013-04-16 08:21:00 -0400] kisoku: oh god
[2013-04-16 08:21:01 -0400] spheromak: and that basically solves the major gripe
[2013-04-16 08:21:12 -0400] spheromak: with roles having data and not being verionable
[2013-04-16 08:21:17 -0400] kisoku: too many ways to do it
[2013-04-16 08:21:27 -0400] spheromak: which has driven people to use cookbooks as roles
[2013-04-16 08:21:34 -0400] spheromak: cause they can verision and dep on that
[2013-04-16 08:21:39 -0400] spheromak: which is reasonable from that perspective
[2013-04-16 08:22:01 -0400] spheromak: kisoku: i made this anology the other day, and im not 100% i was happy to do so "chef is the perl of cfg mgmnt"
[2013-04-16 08:22:14 -0400] spheromak: but it was apropriate
[2013-04-16 08:22:24 -0400] spheromak: and yea too many ways.
[2013-04-16 08:22:28 -0400] spheromak: but its also why i love it
[2013-04-16 08:22:59 -0400] spheromak: why do you have too many roles ?
[2013-04-16 08:23:08 -0400] spheromak: do you have web_foo_dev ?
[2013-04-16 08:23:09 -0400] spheromak: :D
[2013-04-16 08:25:53 -0400] kisoku: yeah
[2013-04-16 08:25:56 -0400] kisoku: shit like that
[2013-04-16 08:26:04 -0400] kisoku: too many of them
[2013-04-16 08:26:38 -0400] spheromak: hehe
[2013-04-16 08:26:40 -0400] spheromak: ouch
[2013-04-16 08:26:46 -0400] kisoku: yeah
[2013-04-16 08:26:53 -0400] kisoku: honestly
[2013-04-16 08:26:55 -0400] spheromak: I actually avoided tht in the early days cause it smelled bad
[2013-04-16 08:27:06 -0400] kisoku: I am starting to lean more towards the "role cookbook"
[2013-04-16 08:27:12 -0400] spheromak: yea ...
[2013-04-16 08:27:14 -0400] spheromak: :\
[2013-04-16 08:27:15 -0400] kisoku: at least you can test them
[2013-04-16 08:27:25 -0400] spheromak: you can test roles, but its more work
[2013-04-16 08:27:27 -0400] kisoku: test-kitchen is turning out to be nice
[2013-04-16 08:27:32 -0400] kisoku: yeah
[2013-04-16 08:27:50 -0400] kisoku: hoently having chef server around really complicates testing alot
[2013-04-16 08:27:57 -0400] spheromak: yea i need to talk to  fletcher.. i keep being either out in asia or at a conf, and no time to actually do something (or just really busy with work)
[2013-04-16 08:28:06 -0400] kisoku: I hear you
[2013-04-16 08:28:08 -0400] spheromak: I really want to get multi-vm support in ktichen
[2013-04-16 08:28:12 -0400] kisoku: being in the wrong TZ sucks
[2013-04-16 08:28:19 -0400] spheromak: kisoku: yea
[2013-04-16 08:28:32 -0400] kisoku: I kind of miss being in NA just for that
[2013-04-16 08:28:33 -0400] spheromak: I like working from the US on KST
[2013-04-16 08:28:35 -0400] kisoku: collaboration
[2013-04-16 08:28:44 -0400] spheromak: yea i did when i was out in seoul all the time
[2013-04-16 08:29:26 -0400] kisoku: unfortunately I not having very gfood luck convincing my wife to move back :-/
[2013-04-16 08:29:28 -0400] spheromak: kisoku: yes chef server is a monkey wrentch, i did some stuff here that i don't have in any repo and i should that is bootstrapping a chef server htne building out infras with spiceweasel and knife-vagrant
[2013-04-16 08:29:36 -0400] spheromak: which i gotota patch knife-vagrant for 1.1
[2013-04-16 08:29:46 -0400] kisoku: did you see knife-server ?
[2013-04-16 08:29:48 -0400] spheromak: this works out pretty damn good actually for spinning up a gregression
[2013-04-16 08:29:56 -0400] spheromak: yea at the time that wasn't working with chef11
[2013-04-16 08:29:57 -0400] spheromak: :D
[2013-04-16 08:30:03 -0400] kisoku: heh
[2013-04-16 08:31:01 -0400] spheromak: I just ahve som thor tasks and some chef-apply scripts :D and a vagrant-post cook with server/client recipes. that ties it all together.. I did a chef-sandbox thing which basically was the start of the work with spiceweasel building out infrastructures
[2013-04-16 08:31:34 -0400] spheromak: butusing this stuff to build dev openstack infra for our guys. so they can build out 4node 2node or (whatever topology) openstack infra on their laptops
[2013-04-16 08:31:55 -0400] spheromak: and i just plugged the same work into jeknins for doign regression, and would like to extend that into kitchen somehow
[2013-04-16 08:32:40 -0400] spheromak: or bascially throw it all away and do it in test-kitchen
[2013-04-16 08:32:41 -0400] spheromak: Ideally
[2013-04-16 08:34:32 -0400] kisoku: ah. you are doing openstack stuff ?
[2013-04-16 08:34:46 -0400] kisoku: I'm trying to get one built over here as well
[2013-04-16 08:35:04 -0400] spheromak: kisoku: yea im at openstack sumit :D
[2013-04-16 08:35:14 -0400] spheromak: we have production public cloud on cloudstack right now
[2013-04-16 08:35:22 -0400] spheromak: thats been running for .. 2.5 year ?
[2013-04-16 08:35:38 -0400] spheromak: and were also working on an openstack incubator project internally
[2013-04-16 08:37:12 -0400] shawnps_: spheromak: cool, how is the summit?
[2013-04-16 08:38:20 -0400] spheromak: shawnps_: too big if im being honest.
[2013-04-16 08:38:34 -0400] shawnps_: heh, i see
[2013-04-16 08:38:37 -0400] spheromak: heaps of comercial presentations, but there are good breakouts and i had some great discussions.
[2013-04-16 08:38:52 -0400] shawnps_: i wonder if any of my former rackspace coworkers are there
[2013-04-16 08:39:14 -0400] shawnps_: it's in oregon?
[2013-04-16 08:39:15 -0400] spheromak: there were a few there
[2013-04-16 08:39:18 -0400] spheromak: portland
[2013-04-16 08:39:21 -0400] spheromak: yea
[2013-04-16 08:39:29 -0400] spheromak: my old home
[2013-04-16 08:39:33 -0400] shawnps_: oh nice
[2013-04-16 08:39:38 -0400] shawnps_: i always wanted to visit when i was in CA
[2013-04-16 08:39:58 -0400] shawnps_: possibly too late now that i'm 5,000 miles away in east asia
[2013-04-16 08:40:16 -0400] shawnps_: i guess i can always just watch portlandia and pretend :P
[2013-04-16 08:41:39 -0400] spheromak: where you at ?
[2013-04-16 08:42:02 -0400] shawnps_: tokyo
[2013-04-16 08:42:28 -0400] kisoku:  oh nice
[2013-04-16 08:42:32 -0400] kisoku: I'm also in japan
[2013-04-16 08:42:41 -0400] shawnps_: kisoku: i noticed your nick looked japanese heh
[2013-04-16 08:42:42 -0400] spheromak: sweet i've only stopped by there on my way to korea and thailand
[2013-04-16 08:42:49 -0400] shawnps_: ah i wanna visit those places
[2013-04-16 08:43:01 -0400] spheromak: def hit up thailand
[2013-04-16 08:43:01 -0400] shawnps_: kisoku: any chef events over here?
[2013-04-16 08:43:24 -0400] shawnps_: spheromak: korea not so much? haha
[2013-04-16 08:43:25 -0400] spheromak: and seoul is pretty sweet as well but different thing altogether
[2013-04-16 08:43:29 -0400] spheromak: hehe
[2013-04-16 08:43:44 -0400] spheromak: honestly i've seen more of thailand than korea.
[2013-04-16 08:43:49 -0400] shawnps_: kisoku: ah you're not necessarily tokyo eh
[2013-04-16 08:43:55 -0400] spheromak: but i've spent more time in seoul
[2013-04-16 08:43:58 -0400] shawnps_: eh?* heh
[2013-04-16 08:44:08 -0400] shawnps_: spheromak: what do you like about thailand?
[2013-04-16 08:44:13 -0400] shawnps_: is the food cheap?
[2013-04-16 08:44:24 -0400] shawnps_: i find food to be cheaper in tokyo than san francisco actually
[2013-04-16 08:44:25 -0400] spheromak: shawnps_: in thailand or seoul ?
[2013-04-16 08:44:31 -0400] shawnps_: thailand
[2013-04-16 08:44:34 -0400] spheromak: its generally cheaper in seoul than SF
[2013-04-16 08:44:41 -0400] spheromak: is def cheaper in thailand
[2013-04-16 08:44:42 -0400] spheromak: hehe
[2013-04-16 08:45:06 -0400] shawnps_: spheromak: wait do you work on sphero or is that just a coincidence?
[2013-04-16 08:45:08 -0400] spheromak: but like all things you can find some expensive foods whereever you are. I've had some damn expensive meals in seoul
[2013-04-16 08:45:16 -0400] spheromak: no
[2013-04-16 08:45:19 -0400] shawnps_: i like kimchi heh
[2013-04-16 08:45:23 -0400] spheromak: coincidence
[2013-04-16 08:45:26 -0400] shawnps_: ah okay
[2013-04-16 08:45:30 -0400] shawnps_: you're SF now or?
[2013-04-16 08:45:53 -0400] shawnps_: i went boston->sf->tokyo
[2013-04-16 08:46:11 -0400] shawnps_: i think i like boston the most if the winter wasn't so cold
[2013-04-16 08:46:30 -0400] spheromak: i live in southern oregon, work out of seoul. Used lived in SF from 97-2001, worked outta SF from 2001-20011..
[2013-04-16 08:46:40 -0400] shawnps_: ahhh i see i see
[2013-04-16 08:46:43 -0400] shawnps_: nice
[2013-04-16 08:47:01 -0400] kisoku: I live out in nara
[2013-04-16 08:47:08 -0400] kisoku: lived in tokyo for like 4 years
[2013-04-16 08:47:10 -0400] shawnps_: ahhh, i've been there twice
[2013-04-16 08:47:15 -0400] kisoku: my wife is from here
[2013-04-16 08:47:19 -0400] shawnps_: i see, nice
[2013-04-16 08:47:28 -0400] shawnps_: do you do independent work?
[2013-04-16 08:47:39 -0400] kisoku: no I work for qualcomm
[2013-04-16 08:47:44 -0400] shawnps_: i'm working at a startup called Gengo
[2013-04-16 08:47:47 -0400] shawnps_: ah cool
[2013-04-16 08:47:48 -0400] kisoku: work from home
[2013-04-16 08:48:01 -0400] shawnps_: do you like nara?
[2013-04-16 08:48:09 -0400] kisoku: it's quiet
[2013-04-16 08:48:10 -0400] shawnps_: i like tokyo but the trains are just ridiculous sometimes
[2013-04-16 08:48:23 -0400] kisoku: when I'm here I miss tokyo
[2013-04-16 08:48:27 -0400] kisoku: then I go to tokyo
[2013-04-16 08:48:28 -0400] shawnps_: actually on my line, the seats fold up so they can squeeze more people in
[2013-04-16 08:48:30 -0400] shawnps_: the Chuo line
[2013-04-16 08:48:35 -0400] kisoku: oh gos
[2013-04-16 08:48:37 -0400] kisoku: oh god
[2013-04-16 08:48:39 -0400] shawnps_: haha
[2013-04-16 08:48:44 -0400] kisoku: chuo rush hour is one of the worst
[2013-04-16 08:48:48 -0400] kisoku: actually
[2013-04-16 08:48:53 -0400] shawnps_: yeah, i try to stagger my timing a bit
[2013-04-16 08:48:56 -0400] kisoku: chuo last train heading out west is insanity
[2013-04-16 08:48:58 -0400] shawnps_: it's just madness
[2013-04-16 08:49:03 -0400] shawnps_: that's mine
[2013-04-16 08:49:08 -0400] shawnps_: i got that the other night in a drunken stupor
[2013-04-16 08:49:15 -0400] shawnps_: i thought my ribs were going to break
[2013-04-16 08:49:16 -0400] kisoku: I used to live out by musashi koganei
[2013-04-16 08:49:27 -0400] kisoku: nakano before that
[2013-04-16 08:49:28 -0400] spheromak: I've experienced similar in seoul, but i hear its worse in tokyo
[2013-04-16 08:49:30 -0400] shawnps_: oh wow
[2013-04-16 08:50:03 -0400] shawnps_: kisoku: i'm in suginami
[2013-04-16 08:50:09 -0400] spheromak: tightly packed sardines. with the condensation in the train turing the roof into rain.
[2013-04-16 08:50:18 -0400] shawnps_: haha
[2013-04-16 08:50:30 -0400] shawnps_: one thing i haven't gotten used to is the vastly different understanding of personal space here
[2013-04-16 08:50:38 -0400] shawnps_: i feel like i'm dodging bullets everytime i walk on the sidewalk
[2013-04-16 08:51:04 -0400] shawnps_: people bumping into me all over the place
[2013-04-16 08:51:21 -0400] gad0lin: ohai, is there any wrapper cookbook  for chef-solo to install chef server from rpm?
[2013-04-16 08:52:40 -0400] spheromak: gad0lin: the master branch of chef-server cookbook will install chef-server omni package
[2013-04-16 08:52:43 -0400] spheromak: from rpm IIRC
[2013-04-16 08:52:48 -0400] spheromak: and should work in chef-solo
[2013-04-16 08:52:57 -0400] spheromak: for a chef11 server
[2013-04-16 08:53:17 -0400] spheromak: shawnps_: its asia and thats omething you get used too
[2013-04-16 08:53:26 -0400] spheromak: shawnps_: how long you been out there ?
[2013-04-16 08:53:54 -0400] shawnps_: spheromak: about 2 months now
[2013-04-16 08:53:59 -0400] shawnps_: spheromak: i've been here 3 times prior to this though
[2013-04-16 08:54:01 -0400] shawnps_: this is my first time living here
[2013-04-16 08:54:09 -0400] shawnps_: the other times were short vacations
[2013-04-16 08:54:18 -0400] gad0lin: spheromak: great
[2013-04-16 08:54:19 -0400] spheromak: ah yea
[2013-04-16 08:54:41 -0400] shawnps_: i do think i'm gradually getting used to it
[2013-04-16 08:55:07 -0400] spheromak: gad0lin: you know where to get that yea? opscode-cookbooks/chef-server on github. I dunno if they ahve bumped the community cook on the site yet. I haven't looked in a while
[2013-04-16 08:55:09 -0400] shawnps_: but in my experience in america when someone bumps into you and doesn't apologize it's not a very good thing
[2013-04-16 08:55:23 -0400] shawnps_: they're mad about something usually :p
[2013-04-16 08:56:38 -0400] spheromak: shawnps_: man i was in seoul subway waiting to get to the office, and im sitting there tlaking with co-worker at the time. Hes a big white dude (as am i) and hes leaning on a pillar. This little old korean lady barrels around a corner and just runs right into his chest.. bounces off.. and does it again. Expecting he would move.. she got mad at him and walked around, but it was pure comedy when it happened.
[2013-04-16 08:56:57 -0400] shawnps_: ahaha
[2013-04-16 08:57:00 -0400] shawnps_: that's fantastic
[2013-04-16 08:57:42 -0400] kisoku: shawnps_: how ong have you been living there now ?
[2013-04-16 08:57:53 -0400] shawnps_: about 2 months now
[2013-04-16 08:58:01 -0400] kisoku: ah ok :-)
[2013-04-16 08:58:02 -0400] shawnps_: total time i've spent in japan is around 5-6 months
[2013-04-16 08:58:06 -0400] shawnps_: :)
[2013-04-16 08:58:17 -0400] shawnps_: you've been here for a while right?
[2013-04-16 08:58:22 -0400] kisoku: I cant hack tokyo anymore
[2013-04-16 08:58:25 -0400] shawnps_: how's your japanese?
[2013-04-16 08:58:26 -0400] kisoku: 7 years
[2013-04-16 08:58:31 -0400] shawnps_: cool
[2013-04-16 08:58:37 -0400] spheromak: 7 is a while.. you're officially asian now yea ?
[2013-04-16 08:58:38 -0400] kisoku: not as good as I would like
[2013-04-16 08:58:42 -0400] spheromak: :D
[2013-04-16 08:58:43 -0400] shawnps_: heh
[2013-04-16 08:58:45 -0400] kisoku: heh
[2013-04-16 08:59:00 -0400] kisoku: I could get permanent residency I think
[2013-04-16 08:59:05 -0400] shawnps_: yeah i think so
[2013-04-16 08:59:06 -0400] kisoku: not sure I want to
[2013-04-16 08:59:20 -0400] shawnps_: are you originally american?
[2013-04-16 08:59:30 -0400] kisoku: canadian
[2013-04-16 08:59:35 -0400] kisoku: from montreal
[2013-04-16 08:59:37 -0400] shawnps_: i think in japan they expect you to give up your other residency but
[2013-04-16 08:59:41 -0400] shawnps_: other countries don't care
[2013-04-16 08:59:58 -0400] shawnps_: so you can basically just not do it, from what i've heard
[2013-04-16 09:00:11 -0400] kisoku: yeah
[2013-04-16 09:01:35 -0400] spheromak: shawnps_: its that way in many places
[2013-04-16 09:01:40 -0400] shawnps_: i see
[2013-04-16 09:01:50 -0400] spheromak: jsut hat If you're a us citizen you still are subject to US tax law
[2013-04-16 09:01:54 -0400] shawnps_: right
[2013-04-16 09:01:55 -0400] spheromak: and facta banking
[2013-04-16 09:02:01 -0400] shawnps_: i'm curious about that
[2013-04-16 09:02:06 -0400] shawnps_: like how much taxes i'll be expected to pay
[2013-04-16 09:02:07 -0400] spheromak: tax law ?
[2013-04-16 09:02:09 -0400] spheromak: ah
[2013-04-16 09:02:15 -0400] shawnps_: i won't have any income from the US
[2013-04-16 09:02:23 -0400] shawnps_: so i don't really know heh
[2013-04-16 09:02:30 -0400] spheromak: its prety cut and dry, but the best thing to do is look up th treaties that are established between the 2 contries.
[2013-04-16 09:02:34 -0400] kisoku: ah
[2013-04-16 09:02:37 -0400] kisoku: taxes
[2013-04-16 09:02:48 -0400] spheromak: U.S. wont double tax so you have to show the IRS that you were taxed XX ammount in japan.
[2013-04-16 09:02:56 -0400] shawnps_: i see
[2013-04-16 09:03:02 -0400] spheromak: if your living abroad and working
[2013-04-16 09:03:06 -0400] spheromak: for 350days out of the year
[2013-04-16 09:03:12 -0400] shawnps_: ah okay
[2013-04-16 09:03:14 -0400] spheromak: you get a 90k deduction
[2013-04-16 09:03:19 -0400] kisoku: you working for a japanese company ?
[2013-04-16 09:03:19 -0400] spheromak: which is sweet
[2013-04-16 09:03:21 -0400] shawnps_: oh right i did hear this
[2013-04-16 09:03:33 -0400] shawnps_: kisoku: yup, Gengo
[2013-04-16 09:03:38 -0400] kisoku: ie paid in yen
[2013-04-16 09:03:41 -0400] shawnps_: yup
[2013-04-16 09:03:45 -0400] spheromak: also thats if your either on contracto r fulltime employed and your tax residence ins in that country. you qualify
[2013-04-16 09:03:52 -0400] kisoku: then your jappan taxes will be easy
[2013-04-16 09:04:01 -0400] kisoku: unless you hold stock in the us
[2013-04-16 09:04:03 -0400] shawnps_: kisoku: right, i've heard i basically don't have to do anything?
[2013-04-16 09:04:08 -0400] spheromak: kisoku: yea my korean tax is easy, my american not so much
[2013-04-16 09:04:08 -0400] shawnps_: no, haven't got any
[2013-04-16 09:04:19 -0400] shawnps_: it seems like they're already taking everything out in my paycheck each month
[2013-04-16 09:04:42 -0400] kisoku: you shouldn't have to do anything for the first couple of years
[2013-04-16 09:04:46 -0400] kisoku: however
[2013-04-16 09:04:58 -0400] spheromak: shawnps_: depending on how much your making the taxes on you rincome in japan + the deduction from living there. will basically work it so you don't pay much or anything at all
[2013-04-16 09:05:06 -0400] shawnps_: spheromak: ah, nice
[2013-04-16 09:05:14 -0400] kisoku: you should be aware that you get the "foreigner" discount for the first few years you live in japan
[2013-04-16 09:05:21 -0400] kisoku: the longer you stay
[2013-04-16 09:05:22 -0400] shawnps_: kisoku: oh yeah?
[2013-04-16 09:05:27 -0400] shawnps_: the more taxes you end up paying?
[2013-04-16 09:05:28 -0400] kisoku: your taxes will go up
[2013-04-16 09:05:32 -0400] kisoku: yeah
[2013-04-16 09:05:35 -0400] kisoku: after 5 years
[2013-04-16 09:05:42 -0400] kisoku: you will pay what everyone else pays :-P
[2013-04-16 09:05:49 -0400] kisoku: also
[2013-04-16 09:05:50 -0400] spheromak: so if your paying 10% in japan and your income tax in the US is say.. 24% you only pay the differentital in tax to the us, and iwth the big ass deduction you get you prob end up owning nothing
[2013-04-16 09:05:52 -0400] kisoku: first year is a trap
[2013-04-16 09:05:59 -0400] jastix: so Japan also has a special tax scheme for foreign workers
[2013-04-16 09:06:06 -0400] kisoku: because you don't pay municipal taxes
[2013-04-16 09:06:12 -0400] shawnps_: hmm i see
[2013-04-16 09:06:21 -0400] kisoku: your company may or may not be deducting municipal
[2013-04-16 09:06:25 -0400] kisoku: you should check
[2013-04-16 09:06:28 -0400] kisoku: if they are not
[2013-04-16 09:06:36 -0400] spheromak: kisoku: interesting I actually pay more tax in korea I belive than koreans cause im forieng
[2013-04-16 09:06:41 -0400] kisoku: you will get a nice letter in the mail just after new years
[2013-04-16 09:06:44 -0400] spheromak: shit can't spell that .. should prob passout
[2013-04-16 09:06:46 -0400] kisoku: asking for 10% of your income
[2013-04-16 09:07:01 -0400] kisoku: so watch out for that
[2013-04-16 09:07:03 -0400] shawnps_: kisoku: jeeeez
[2013-04-16 09:07:11 -0400] kisoku: was a bit of a surprise the first time it happened
[2013-04-16 09:07:12 -0400] spheromak: kisoku:  im sure its verry polite
[2013-04-16 09:07:13 -0400] spheromak: hahah
[2013-04-16 09:07:39 -0400] shawnps_: kisoku: the other thing that is a bit unfortunate is getting an apartment
[2013-04-16 09:07:53 -0400] shawnps_: i did end up getting a nice place, but the fees are exorbitant
[2013-04-16 09:08:24 -0400] shawnps_: but hey at least my bath talks
[2013-04-16 09:08:37 -0400] kisoku: yeah
[2013-04-16 09:08:52 -0400] kisoku: the key money thing shits me
[2013-04-16 09:09:01 -0400] shawnps_: right?
[2013-04-16 09:09:01 -0400] BryanWB: is there any way to use chef 11 + berkshelf + vagrant + test-kitchen?
[2013-04-16 09:09:05 -0400] shawnps_: then you have to do it all over again when the contract is up
[2013-04-16 09:09:07 -0400] BryanWB: this thing is an utter mess
[2013-04-16 09:09:09 -0400] spheromak: do they do "cheonse" in japan ? (dont know the japaneese word for it)
[2013-04-16 09:09:14 -0400] kisoku: so, I live in buildings owned /managed by UR
[2013-04-16 09:09:21 -0400] shawnps_: spheromak: what's the original language?
[2013-04-16 09:09:24 -0400] spheromak: BryanWB: didn't jtimberman post that about
[2013-04-16 09:09:34 -0400] spheromak: shawnps_: thats korean in english (hangul)
[2013-04-16 09:09:47 -0400] shawnps_: ooh okay
[2013-04-16 09:09:47 -0400] kisoku: UR buildings == no key money
[2013-04-16 09:09:53 -0400] shawnps_: kisoku: what's UR?
[2013-04-16 09:10:25 -0400] BryanWB: spheromak, he did but it's not working for me
[2013-04-16 09:10:30 -0400] spheromak: BryanWB: is that not using chef11 clients
[2013-04-16 09:10:46 -0400] spheromak: BryanWB: i have what he posted working on my jenkins envrionemtn but not on my osx workstation
[2013-04-16 09:10:55 -0400] spheromak: I was chalking the latter up to some vagrant fuckage
[2013-04-16 09:11:04 -0400] spheromak: haven't had time to really dig into it
[2013-04-16 09:11:23 -0400] spheromak: BryanWB: what problems are you runnign into ?
[2013-04-16 09:11:25 -0400] kisoku: http://www.ur-net.go.jp/sitemap/english.html
[2013-04-16 09:11:39 -0400] kisoku: public housing
[2013-04-16 09:12:15 -0400] kisoku: they have some pretty nice buildings
[2013-04-16 09:12:18 -0400] kisoku: avoid the older ones
[2013-04-16 09:12:33 -0400] kisoku: the newer ones are more expensive and sometimes full
[2013-04-16 09:12:36 -0400] kisoku: but nice
[2013-04-16 09:12:45 -0400] kisoku: and you don't have to do the whole bribe/key money thing
[2013-04-16 09:13:06 -0400] kisoku: and you can self-guarantee if you have enough income and have been working for more than 6 months in japan
[2013-04-16 09:13:12 -0400] kisoku: err
[2013-04-16 09:13:18 -0400] kisoku: more than 6 months at the same job
[2013-04-16 09:13:26 -0400] gad0lin: BryanWB: I have been playing with bluepill and eventually it worked (to some degree as test fails)
[2013-04-16 09:13:48 -0400] BryanWB: gad0lin, what does your Vagrantfile look like?
[2013-04-16 09:14:06 -0400] gad0lin: BryanWB: I am using bluepill from master
[2013-04-16 09:14:21 -0400] BryanWB: gad0lin, i don't c vagranfile there
[2013-04-16 09:15:29 -0400] spheromak: BryanWB: theres no vagrantfile
[2013-04-16 09:15:39 -0400] spheromak: as the kitchen-vagrant generates
[2013-04-16 09:15:42 -0400] shawnps_: kisoku: ahh, interesting
[2013-04-16 09:15:53 -0400] shawnps_: self-guarantee sounds nice
[2013-04-16 09:16:35 -0400] gad0lin: BryanWB: last commit removed it https://github.com/opscode-cookbooks/bluepill/commit/a006d7ff31f0ec2d99648eb762eec916b2e0d5e3
[2013-04-16 09:16:53 -0400] spheromak: kisoku: shawnps_ the cheonse system is where you pay a large ammount up front for the rent.
[2013-04-16 09:17:46 -0400] spheromak: BryanWB: yea remove the gemfile and vagrant look at the test/build.sh that hes got there which sets the gems up
[2013-04-16 09:18:03 -0400] spheromak: BryanWB: i actualy change it a lil bit cause i still ahve some vagrant 1.0  stuff
[2013-04-16 09:18:08 -0400] shawnps_: spheromak: sounds exactly like what i did :)
[2013-04-16 09:18:21 -0400] BryanWB: spheromak, we really have to move to lxc and remove all the vagrant stuf
[2013-04-16 09:18:25 -0400] BryanWB: uff
[2013-04-16 09:18:42 -0400] spheromak: https://github.com/cloudware-cookbooks/ktc-jenkins/blob/testing/test/build.sh
[2013-04-16 09:18:52 -0400] spheromak: Well i need osx to have lxc
[2013-04-16 09:18:54 -0400] spheromak: hahaha
[2013-04-16 09:19:09 -0400] spheromak: Or i need to find some damn good laptop to drop arch on as a workstation
[2013-04-16 09:19:09 -0400] BryanWB: spheromak, u can run it inside a vm
[2013-04-16 09:19:09 -0400] spheromak: :D
[2013-04-16 09:19:14 -0400] spheromak: yea
[2013-04-16 09:19:17 -0400] spheromak: I rather just run linux
[2013-04-16 09:19:21 -0400] spheromak: and vm out osx
[2013-04-16 09:19:41 -0400] spheromak: I use nothing that used to compell me to run osx anymore
[2013-04-16 09:20:14 -0400] spheromak: Tho i understand why they did this in 1.1
[2013-04-16 09:20:20 -0400] spheromak: it really fucked up alot of my stuff
[2013-04-16 09:20:29 -0400] spheromak: and has cause me terrible ammounts of work
[2013-04-16 09:20:29 -0400] spheromak: hehe
[2013-04-16 09:20:57 -0400] spheromak: ugh
[2013-04-16 09:21:37 -0400] BryanWB: i understand mitchellh's reasons, it is just causing me a lot of pain
[2013-04-16 09:21:43 -0400] spheromak: line 22 should use the COOK_DIR
[2013-04-16 09:21:54 -0400] spheromak: if you looked at my version of the buld/sh
[2013-04-16 09:22:21 -0400] spheromak: BryanWB: yeap I need to get lxc shit working
[2013-04-16 09:22:29 -0400] spheromak: prob not till after chef conf tho
[2013-04-16 09:22:36 -0400] BryanWB: or at chefconf :)
[2013-04-16 09:22:42 -0400] spheromak: vbery possibly
[2013-04-16 09:22:48 -0400] BryanWB: i may spend much of next Wed. working on it
[2013-04-16 09:22:51 -0400] BryanWB: at chefconf
[2013-04-16 09:22:56 -0400] spheromak: can have a lets play with kitchen-lxc session
[2013-04-16 09:23:04 -0400] BryanWB: if ur there can join me in making fun of kisoku :)
[2013-04-16 09:23:12 -0400] spheromak: soudns good
[2013-04-16 09:23:27 -0400] spheromak: wiat i like that guy..as long as its good humored fun.. :D
[2013-04-16 09:23:45 -0400] BryanWB:  very good-humored :)
[2013-04-16 09:23:57 -0400] spheromak: ill buy em a beer afterward maybe
[2013-04-16 09:24:51 -0400] spheromak: also I'e been talking a bit here at ostack summit about the continuous distro or un-distro.. got more cook ideas and i would like to maybe try to get something rolling on that at some point
[2013-04-16 09:24:58 -0400] spheromak: *cool
[2013-04-16 09:25:07 -0400] BryanWB: when i try to do `vagrant plugin install `
[2013-04-16 09:25:17 -0400] spheromak: you using rvm ?
[2013-04-16 09:25:20 -0400] BryanWB: plugin option doesn't exist, but `vagrant gem ` does
[2013-04-16 09:25:22 -0400] spheromak: orrbenv
[2013-04-16 09:25:30 -0400] spheromak: what version of vagrant
[2013-04-16 09:25:37 -0400] spheromak: early 1.1.  was vagrant gem
[2013-04-16 09:25:38 -0400] BryanWB: no, from the vagrant installer, 1.1.5
[2013-04-16 09:25:40 -0400] spheromak: then it changed iirc
[2013-04-16 09:25:47 -0400] BryanWB: maybe it changed back :)
[2013-04-16 09:27:24 -0400] spheromak: hrm
[2013-04-16 09:27:42 -0400] spheromak: /Applications/Vagrant/bin/vagrant plugin install berkshelf-vagrant
[2013-04-16 09:27:50 -0400] spheromak: jsut reinstalled on 1.1.5
[2013-04-16 09:28:59 -0400] spheromak: so thats cook
[2013-04-16 09:29:01 -0400] spheromak: cool
[2013-04-16 09:29:03 -0400] spheromak: https://gist.github.com/spheromak/5394638
[2013-04-16 09:30:39 -0400] spheromak: happend just now
[2013-04-16 09:30:42 -0400] spheromak: yay!
[2013-04-16 09:31:00 -0400] spheromak: have a good night asia and euro and assie peeps :D
[2013-04-16 09:31:09 -0400] spheromak: *aussie
[2013-04-16 09:31:33 -0400] BryanWB: good night spheromak!
[2013-04-16 09:37:59 -0400] s2r2: hmm... does the service resource start the service immediatly?
[2013-04-16 09:38:49 -0400] s2r2: I've got a resource that depends on the service running, so what's the right way to ensure the service is running when the other resource (execute) is ... uhm... executed?
[2013-04-16 09:51:27 -0400] flaccid: s2r2: notify :immediately ?
[2013-04-16 09:52:19 -0400] flaccid: actually in your case its more about why the service wouldn't be running. that should be covered in a service resource prior at the most
[2013-04-16 09:57:48 -0400] s2r2: so; in general, I can expect the service to be running when i declared the resource?
[2013-04-16 10:02:39 -0400] flaccid: you can set the action to start if its expected to not be started
[2013-04-16 10:16:15 -0400] Mez: Is anyone aware of a cookbook that'll setup LDAP PAM authentication ? My google-Fu isn't working
[2013-04-16 10:19:29 -0400] kisoku: hrm. I used a subset of the opscode openldap cookbook
[2013-04-16 10:19:41 -0400] kisoku: unfortunately it wants to do the whole nss_ldap thing
[2013-04-16 10:19:47 -0400] kisoku: which I didn't want
[2013-04-16 10:19:54 -0400] kisoku: but it's a good starting point
[2013-04-16 10:25:29 -0400] Mez: kisoku: I can write one myself - but I'm a stickler for not duplicating effort :)
[2013-04-16 10:33:49 -0400] zaargy: is there a good knife sprok video anywhere?
[2013-04-16 11:06:57 -0400] josh_: hey guys, I have a recipe that I want installed on _all_ my infrastructure (across different roles) except one specific role of nodes .... ideas?
[2013-04-16 11:08:17 -0400] josh_: jtimberman, any ideas? :P
[2013-04-16 11:10:25 -0400] josh_: to install on _all_ infrastructure we would normally add the package to a base role that gets inherited by all other roles
[2013-04-16 11:11:08 -0400] josh_: but we want a specific role to NOT install that package
[2013-04-16 11:13:51 -0400] Mez: josh: have the recipe check for the environment ?
[2013-04-16 11:14:34 -0400] Mez: e.g. https://gist.github.com/Mezzle/85e527abc727a538cb3a
[2013-04-16 11:14:55 -0400] josh_: we have typical environments prod,dev,test etc
[2013-04-16 11:15:12 -0400] josh_: so these boxes are mostly prod
[2013-04-16 11:15:47 -0400] Mez: josh_: sorry: misread slightly.  But either way - you can have the recipe check whether you've got a specific role and then exclude the package if you do
[2013-04-16 11:15:54 -0400] josh_: guess could create a new env just for these specific nodes
[2013-04-16 11:16:11 -0400] Mez: josh_: one sec
[2013-04-16 11:16:15 -0400] josh_: thx
[2013-04-16 11:18:19 -0400] Mez: https://gist.github.com/Mezzle/d8a7b28dd87c9fd654bf
[2013-04-16 11:19:00 -0400] josh_: hmm ok
[2013-04-16 11:19:17 -0400] josh_: thx Mez
[2013-04-16 11:19:20 -0400] josh_: makes sense
[2013-04-16 11:19:48 -0400] Mez: np
[2013-04-16 12:22:34 -0400] adamjk-dev: anyone deal with the FiberStackError
[2013-04-16 12:22:41 -0400] adamjk-dev: https://github.com/celluloid/celluloid/wiki/Fiber-stack-errors
[2013-04-16 12:38:38 -0400] s2r2: what would be a feasible way to have a recipe make a SOAP call (or a sequence of them, auth + method call)?
[2013-04-16 12:39:24 -0400] gchristensen: s2r2: you could write it using a ruby_block
[2013-04-16 12:40:11 -0400] s2r2: gchristensen: Using some framework?  Plain ruby?  I am a little clueless about how to make use of something like, say, Savon, in a recipe...
[2013-04-16 12:40:32 -0400] s2r2: oh, that's what chef_gem is for, right?
[2013-04-16 12:40:35 -0400] gchristensen: sure
[2013-04-16 12:40:51 -0400] gchristensen: or you could write the check-in script as a script in your preferred language and execute it from Chef
[2013-04-16 12:41:48 -0400] s2r2: hmm yes, actually what I'm trying to do is not that hard... getting curl to auth properly somehow would be the most lightweight option
[2013-04-16 12:41:51 -0400] s2r2: I guess
[2013-04-16 12:49:59 -0400] vilts: Interesting problem, when running chef-client with --fork option, the forked process deletes pidfile of master process and later on the stop/restart from init script fail. Anyone else run into this?
[2013-04-16 12:53:44 -0400] countdigi: vilts: have u considered monit?
[2013-04-16 12:54:21 -0400] countdigi: just curious and if u have a special requirement to fork every run or just keep chef-client under control
[2013-04-16 12:56:06 -0400] Steven__: hello, does anyone of you hapen to know if it is possible to make opensource Chefserver 11 listen to multiple URLs? in my case https://mychefserver and https://10.10.10.12
[2013-04-16 13:04:31 -0400] Steven__: anyone please? : does anyone of you hapen to know if it is possible to make opensource Chefserver 11 listen to multiple URLs? in my case https://mychefserver and https://10.10.10.12
[2013-04-16 13:07:03 -0400] vilts: countdigi, I use fork because chef-client leaks memory quite badly. Fork fixes this, but then there's the pidfile issue
[2013-04-16 13:07:37 -0400] vilts: and I actually found a ticket about this from last year - http://tickets.opscode.com/browse/CHEF-3537
[2013-04-16 13:20:08 -0400] josh_: hey guys
[2013-04-16 13:20:09 -0400] adamjk-dev: Steven__: do you mean just setting a hostname for the box?
[2013-04-16 13:20:13 -0400] josh_: trying to do something like this: https://gist.github.com/anonymous/df77ad1980745ea9944e
[2013-04-16 13:20:28 -0400] josh_: but it's only looking at my first role, not after the || or
[2013-04-16 13:20:32 -0400] josh_: any suggestions?
[2013-04-16 13:25:23 -0400] Steven__: hello adamjk-dev,
[2013-04-16 13:25:45 -0400] Steven__: my chef server is listening to multiple NICS.
[2013-04-16 13:25:54 -0400] adamjk-dev: Steven__: hey, it sounds like you just mean setting up a hostname
[2013-04-16 13:26:10 -0400] Steven__: one of the is my "BUILD" network, used to install the server
[2013-04-16 13:26:40 -0400] Steven__: on that build network i currently do not have nameresolving so in the past i just connected to chef on it's IP
[2013-04-16 13:26:53 -0400] Steven__: (buring the initial server instal)
[2013-04-16 13:27:22 -0400] Steven__: now with chef-11 I need to connect to the hostname defined in the NGNIX.URL setting
[2013-04-16 13:27:52 -0400] Steven__: so I was wondering i I can add the build network IP to it's list of accepted ULRS
[2013-04-16 13:28:27 -0400] adamjk-dev: Steven__: I am not sure, I just thought you were asking how to have your chef server resolve to a hostname
[2013-04-16 13:28:38 -0400] adamjk-dev: as well as an IP address
[2013-04-16 13:29:04 -0400] Steven__: no, I'm able to do that. but thanks for dropping in
[2013-04-16 13:29:04 -0400] vilts_: Steven, I set the nginx.url to be ipaddress and then it doesn't want to connect with name
[2013-04-16 13:29:30 -0400] adamjk-dev: Steven__: yeah. I mean, I think you can change the setting and restart the server or reconfigure it or something
[2013-04-16 13:29:37 -0400] Steven__: hello Vilts_, yes, that's my issue too.
[2013-04-16 13:30:36 -0400] Steven__: well, the chef server is running production so i'm not able to reconfigure (and restart it) for ewvery machine i'm installing.
[2013-04-16 13:31:08 -0400] Steven__: maybe it's the best to enable nameresolution in my build network.
[2013-04-16 13:33:14 -0400] josh_: anyone help with my issue? ^^^
[2013-04-16 13:33:49 -0400] adamjk-dev: Steven__: I would assume so if you can't restart the server etc.
[2013-04-16 13:34:25 -0400] Steven__: correct adamjk-dev
[2013-04-16 13:37:35 -0400] adamjk-dev: josh_: does your node include the dns_master role?
[2013-04-16 13:37:50 -0400] adamjk-dev: josh_: is it a 'short-circuit' OR statement?
[2013-04-16 13:38:37 -0400] josh_: I want to put ^^ in my base role, as I need it to run on all boxes, except dns_master and dns_slave
[2013-04-16 13:38:46 -0400] josh_: but || isn't working as I would like
[2013-04-16 13:38:51 -0400] josh_: (kinda expected really)
[2013-04-16 13:38:54 -0400] josh_: so how can I say
[2013-04-16 13:39:05 -0400] josh_: if its this role or this role, _dont_ install
[2013-04-16 13:39:32 -0400] adamjk-dev: if not ?
[2013-04-16 13:39:49 -0400] adamjk-dev: josh_: can't you use other conditionals like if not
[2013-04-16 13:40:11 -0400] Mez: josh_: https://gist.github.com/Mezzle/953625e66dfd839e1fe2
[2013-04-16 13:40:37 -0400] adamjk-dev: josh_: yeah, Mez is likely right, I don't know the syntax myself, but that OR doesn't look right in yours
[2013-04-16 13:40:51 -0400] josh_: Mez, that doesn't work
[2013-04-16 13:40:55 -0400] josh_: testing in shef anyway
[2013-04-16 13:41:27 -0400] josh_: chef > node.roles.include? 'dns_master' || node.roles.include? 'dns_slave'
[2013-04-16 13:41:27 -0400] josh_: SyntaxError: (irb):13: syntax error, unexpected tSTRING_BEG, expecting $end
[2013-04-16 13:42:56 -0400] Mez: https://gist.github.com/Mezzle/953625e66dfd839e1fe2 <-- sorry, you should be looking for intersection - my bad
[2013-04-16 13:43:18 -0400] Mez: (I typod in that too :(
[2013-04-16 13:43:34 -0400] Mez: it should be empty? not empty ?
[2013-04-16 13:43:56 -0400] josh_: you kind sir
[2013-04-16 13:43:59 -0400] josh_: are a legend
[2013-04-16 13:43:59 -0400] Mez: oh, and it's the wrong way round
[2013-04-16 13:44:01 -0400] josh_: :)
[2013-04-16 13:44:15 -0400] Mez: oh, no - it's the right way round
[2013-04-16 13:44:21 -0400] Mez: unless always confuses me
[2013-04-16 13:44:24 -0400] josh_: haha
[2013-04-16 13:44:26 -0400] josh_: me too :)
[2013-04-16 13:44:35 -0400] Mez: when combined with stuff like "empty"
[2013-04-16 13:44:36 -0400] josh_: i just change it in my head to if not
[2013-04-16 13:44:37 -0400] josh_: :]
[2013-04-16 13:44:49 -0400] josh_: thx Mez :]
[2013-04-16 13:44:56 -0400] Mez: josh_: I presume that worked then ?
[2013-04-16 13:45:16 -0400] josh_: yup
[2013-04-16 13:45:18 -0400] josh_: perfect
[2013-04-16 13:45:28 -0400] josh_: returned an emtpy array for non dns roles
[2013-04-16 13:45:38 -0400] josh_: and returned the role of is a dns node
[2013-04-16 13:45:42 -0400] josh_: perfect
[2013-04-16 13:46:41 -0400] Mez: Every time . I keep doing stuff like <%= random_var =>
[2013-04-16 13:46:43 -0400] Mez: :(
[2013-04-16 13:46:57 -0400] Mez: instead of %> at the end
[2013-04-16 13:47:32 -0400] josh_: hah :P
[2013-04-16 13:48:36 -0400] josh_: hmm no
[2013-04-16 13:48:40 -0400] josh_: it is the wrong way around
[2013-04-16 13:48:42 -0400] josh_: I think ....
[2013-04-16 13:48:46 -0400] josh_: lol
[2013-04-16 13:49:21 -0400] Mez: unless we don't have these roles in our roles list
[2013-04-16 13:49:29 -0400] Mez: so yeah, s/unless/if
[2013-04-16 13:50:05 -0400] johnkary: did anything change recently with getting the Vagrant mount path in a Chef cookbook? i was using node['project']['mount_path'] before but now my script is throwing errors...
[2013-04-16 13:50:25 -0400] josh_: ja Mez
[2013-04-16 13:50:28 -0400] josh_: perfect :)
[2013-04-16 13:50:28 -0400] Mez: johnkary: more a question for #vagrant
[2013-04-16 13:50:35 -0400] johnkary: ok thanks
[2013-04-16 13:50:49 -0400] BryanWB: how can i get omnibus-chef chef to use eth1 as node['ipaddress']  on vagrant?
[2013-04-16 13:53:28 -0400] nebrera: hi
[2013-04-16 13:53:37 -0400] nebrera: how could I set specific setfacl ?
[2013-04-16 13:54:02 -0400] brettlangdon: greetings, I am getting: "ERROR: knife search failed: Invalid signature for user or client" from a simple knife search, I have the knife.rb for my org, with the correct validator key and client key, anyone ever experience this?
[2013-04-16 13:54:23 -0400] nebrera: I mean in a recipie
[2013-04-16 14:00:15 -0400] gchristensen: if I have a cookbook named "foo-bar" and have a  LWRP inside it named do_baz, how would I call that LWRP from outside the cookbook?
[2013-04-16 14:02:24 -0400] zts: gchristensen: I believe that would be foo_bar_do_baz
[2013-04-16 14:03:06 -0400] gchristensen: ah! wonderful. thank you, zts  - I was worried I'd have to rename all my cookbooks to use underscores..
[2013-04-16 14:03:40 -0400] zts: gchristensen: yeah, I learned that one after renaming some cookbooks :)  To be fair, I haven't renamed them back, but I understand that should work
[2013-04-16 14:05:03 -0400] gchristensen: indeed it does! I appreciate it :)
[2013-04-16 14:06:22 -0400] zts: cool :)
[2013-04-16 14:06:24 -0400] gyre007: damn...how do I check is subkey in attributes exist ?
[2013-04-16 14:06:49 -0400] gyre007: I need to query environment attributes...I tried has_key? but realized that attribute as such is its own object...not just a hash...
[2013-04-16 14:06:51 -0400] gyre007: mm
[2013-04-16 14:07:10 -0400] gyre007: anyone idea ?
[2013-04-16 14:09:25 -0400] zts: gyre007: can you pastebin an example that you tried but doesn't work?
[2013-04-16 14:09:36 -0400] gyre007: indeed
[2013-04-16 14:11:55 -0400] gyre007: zts https://gist.github.com/milosgajdos83/5396222
[2013-04-16 14:12:23 -0400] gyre007: basically attrs is Node::Attribute object - not hash
[2013-04-16 14:12:51 -0400] gyre007: so has_Key? will not work on this...althoug...im thinking...shouldnt it be mash ? so hash methods should work...mm
[2013-04-16 14:13:12 -0400] gyre007: maybe the problem is that environment vars are not being read...
[2013-04-16 14:15:32 -0400] zts: gyre007: I think something liek this:  node["somekey"].attribute?("someotherkey")
[2013-04-16 14:15:40 -0400] countdigi: hey guys - i just wanted to say i recently started playign w/ chef-server omnibus install for 11 ... very very nice piece of work! bravo
[2013-04-16 14:15:43 -0400] gyre007: some_other_key is set in Environments file...and it looks like it's not populated whrn the recipe is run mm
[2013-04-16 14:16:37 -0400] zts: gyre007: if you are using Chef 11, you might want to look at debug_value http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-04-16 14:16:48 -0400] zts: gyre007: but environments are loaded before recipes are compiled
[2013-04-16 14:17:24 -0400] techminer1: Ohai Chefs.I need to do a recursive chmod on a directory structure.  All subdirs need to be 775 and all files need to be 664.  In the shell I can do this with something like 'find . -type f -print | xargs chmod 664'.  Is there a way to do that with Chef?
[2013-04-16 14:20:44 -0400] ranjibd: BryanWB: wassup ..
[2013-04-16 14:21:03 -0400] BryanWB: ranjibd, in fucking pain
[2013-04-16 14:21:16 -0400] ranjibd: the latest berkshelf-vagrant plugin should work with multi-vm setup
[2013-04-16 14:21:21 -0400] awgross: hey, I wrote up a short blog post on verifying a checksum on remote files for security reasons, if anyone has a few minutes I would love some feedback. http://loadedinthecloud.blogspot.com/2013/04/pragmatic-chef-verifying-remote-files.html
[2013-04-16 14:21:37 -0400] BryanWB: ranjibd, we need to elevate the lxc
[2013-04-16 14:21:39 -0400] ranjibd: i had to go through also.. was equally frustrated..
[2013-04-16 14:22:10 -0400] ranjibd: you wont be able to do many things with lxc (in fact in general with containers) .
[2013-04-16 14:22:20 -0400] ranjibd: but i agree.. containers are the way forward
[2013-04-16 14:22:40 -0400] gyre007: taht attribute? throws errorr zts...
[2013-04-16 14:22:49 -0400] gyre007: you cant do that on subkeys im guessing
[2013-04-16 14:22:50 -0400] spox: i dunno. i have run into very few things i haven't been able to do with containers
[2013-04-16 14:22:56 -0400] spox: at least, so far :)
[2013-04-16 14:23:08 -0400] gyre007: arrgh....nuts
[2013-04-16 14:24:02 -0400] ranjibd: i have run our private cloud with openvz , and also tried to use openstack lxc driver.. my pain was a mix of tooling related and container specific
[2013-04-16 14:24:18 -0400] zts: gyre007: seemed to work for me on 11.4 - eg, I tested with: node['omnibus_updater'].attribute?('version')
[2013-04-16 14:24:26 -0400] gyre007: 10.18 here
[2013-04-16 14:24:29 -0400] ranjibd: the fact that the time and other susbsystem is shared was at times painful.
[2013-04-16 14:24:30 -0400] zts: ah
[2013-04-16 14:24:59 -0400] ranjibd: all containers see the system's entire memory / cpu etc. not their own share.
[2013-04-16 14:25:25 -0400] gyre007: looks like this stuff doesn't work on 10.18
[2013-04-16 14:25:38 -0400] siXy: how can I extend file/template resources so that selinux contexts get set properly?
[2013-04-16 14:25:50 -0400] ranjibd: also the we had to go through individual cgroup settings to limit resources.. the tools didnt expose them,
[2013-04-16 14:26:10 -0400] siXy: up til now I've been patching chef to do this, but with chef 11 this has become much more inconvenient
[2013-04-16 14:26:15 -0400] ranjibd: i guess things gonna change over time..but they are definitely awesome
[2013-04-16 14:26:34 -0400] ranjibd: spox: how you enforce disquotas ?
[2013-04-16 14:26:50 -0400] ranjibd: *disk quotas
[2013-04-16 14:27:14 -0400] spox: ranjibd: depends on how you want to approach it, really
[2013-04-16 14:27:18 -0400] gyre007: looks like those  env attributes are just not being loaded...simples...when I try to print them out they are empty...
[2013-04-16 14:28:22 -0400] ranjibd: spox: we had to use different users for individual containers and then use standard diskquota. openvz provides these things out of the box.  too bad it was not merged to mainline
[2013-04-16 14:28:37 -0400] spox: ranjibd: two simple options off the top of my head: add restrictions to the container fstab
[2013-04-16 14:28:48 -0400] spox: give the container a vbd to use
[2013-04-16 14:28:50 -0400] gchristensen: is there any good documentation for making my LWRP support why-run?
[2013-04-16 14:29:01 -0400] spox: both will get you what you want
[2013-04-16 14:29:26 -0400] ranjibd: yeah the vbd option looks good
[2013-04-16 14:44:39 -0400] adamjk-dev: how are you guys bringing up a new chef server ?
[2013-04-16 14:44:43 -0400] adamjk-dev: using the chef-server cookbook?
[2013-04-16 14:44:45 -0400] adamjk-dev: or what
[2013-04-16 14:46:31 -0400] brettlangdon: greetings, I am getting: "ERROR: knife search failed: Invalid signature for user or client" from a simple knife search, I have the knife.rb for my org, with the correct validator key and client key, anyone ever experience this?
[2013-04-16 15:05:06 -0400] dfrey: has anyone here had problems running a source command with chef's execute resource?
[2013-04-16 15:06:39 -0400] techminer1: What "notify" to use in a git resource to run an execute block ONLY if the git resource was updated?  :run doesn't do it.. use :reload?
[2013-04-16 15:12:01 -0400] jstallard: dfrey: source is a shell built-in
[2013-04-16 15:13:04 -0400] dfrey: jstallard: yes, but does that mean chef cant run it in a shell? whenever i try to execute it, in this case to bring up a python virtualenv, it breaks
[2013-04-16 15:13:09 -0400] techminer1: Nevermind.it is :run.
[2013-04-16 15:13:40 -0400] jstallard: dfrey: I just found this: http://tickets.opscode.com/browse/CHEF-3785
[2013-04-16 15:14:28 -0400] dfrey: jstallard: great! thank you
[2013-04-16 15:14:47 -0400] jstallard: np. good luck
[2013-04-16 15:19:38 -0400] mshilling: anyone here?  I have an unusual question.  im trying to come up with logic in a recipe to determine if a machines hostname has an odd or even number in it.  usage:  if hostname is has odd number, mount this nfs filesystem.  if its even, mount a different fs.
[2013-04-16 15:27:31 -0400] siXy: how can I change the behaviour of the builtin cookbook_file and template providers?
[2013-04-16 15:28:09 -0400] siXy: currently they're pretty brain dead and create new files with the user_tmp_t context (presumably because noone who works for opscode knows what selinux is)
[2013-04-16 15:28:58 -0400] siXy: I used to directly patch the chef libraries, but this is harder with chef 11 than it was with chef 10
[2013-04-16 15:29:31 -0400] siXy: (partly because someone thought it would be funny to only ship binary RPMs and hide the SRPMs)
[2013-04-16 15:29:40 -0400] markp: looking for some direction on a cookbook that can deploy multiple instances of the same resources
[2013-04-16 15:40:33 -0400] behemphi: can you be a bit more specific markp?
[2013-04-16 15:41:06 -0400] geekbri: yfeldblum: for some reason when I add the "windows" cookbook to my cheffile then try to librarian install it barfs with `persist_resolution': undefined method `correct?' for nil:NilClass.  Ever seen that before?
[2013-04-16 15:41:43 -0400] yfeldblum: geekbri, what command did you run?
[2013-04-16 15:41:56 -0400] geekbri: librarian-chef clean, then librarian-chef install
[2013-04-16 15:42:15 -0400] geekbri: yfeldblum: works perfeclty fine without the windows entry.  I just did    cookbook 'windows',  '1.8.8'
[2013-04-16 15:43:20 -0400] yfeldblum: geekbri, what about running with --verbose?
[2013-04-16 15:43:50 -0400] geekbri: yfeldblum: ah ok, its because one cookbook is requiring an older version of the windows cookbook.
[2013-04-16 15:43:54 -0400] markp: i have one main cookbook with an prepackaged tomcat/solr install
[2013-04-16 15:43:56 -0400] geekbri: yfeldblum: i always forget about --verbose :)
[2013-04-16 15:44:38 -0400] geekbri: yfeldblum: [Librarian] Conflict between windows (= 1.8.8) <http://community.opscode.com/api/v1> and windows/1.3.4 <http://community.opscode.com/api/v1>  I assume thats' what that means ;)
[2013-04-16 15:44:47 -0400] yfeldblum: geekbri, yeah i was going to say it sounds like it couldn't find a resolution (but it should display a real message about it!)
[2013-04-16 15:45:03 -0400] markp: then i wish to use that cookbook to generate a multi-tenant solr environment with each instance of tomcat/solr/tenant configs
[2013-04-16 15:45:07 -0400] geekbri: yfeldblum: yeah it would be nice if the error was a little more clean, but had I thought to use --verbose i would have noticed it
[2013-04-16 15:45:33 -0400] markp: have attempted something by iterating over a list but the attributes are getting clobbered
[2013-04-16 15:45:49 -0400] yfeldblum: geekbri, librarian has a backtracking resolver, so it might find a conflict but then backtrack, try another resolution, and discover that the second try works
[2013-04-16 15:45:59 -0400] geekbri: ahhhh gotcha
[2013-04-16 15:46:16 -0400] yfeldblum: geekbri, so the conflict log messages are certainly a clue, but not definitive all by themselves
[2013-04-16 15:46:46 -0400] geekbri: All this because the darn java cookbook requires the windows cookbook >=O
[2013-04-16 15:46:55 -0400] techminer1: How do I add a new block of content to an existing file from a template?  I need to insert at a specific location in the fileabove the first <serverlet> tag.
[2013-04-16 15:47:05 -0400] techminer1: <servlet>
[2013-04-16 15:49:49 -0400] markp: any suggestions?
[2013-04-16 15:53:43 -0400] PierreO: Hi, maybe I'm wrong but I have the feeling that the open source Chef Server is less and less supported ( http://docs.opscode.com/chef/install_workstation.html for instance )
[2013-04-16 15:54:11 -0400] PierreO: I would like to contribute to the wiki, but I don't see any possibility for that
[2013-04-16 15:54:57 -0400] PierreO: Maybe you would like us (the community) to create our own documentation?
[2013-04-16 15:55:18 -0400] jtimberman: BryanWB__: did you get test kitchen 1.0 + vagrant 1.1 + chef 11 going?
[2013-04-16 15:56:33 -0400] cwj: PierreO: you can submit PRs against the docs.opscode.com source at https://github.com/opscode/chef-docs
[2013-04-16 15:56:58 -0400] simplesi: Can someone lend me a hand with stubbing out search using chefspec? The examples in the docs aren't working for me.
[2013-04-16 15:57:09 -0400] PierreO: Ah thanks cwj \o/
[2013-04-16 15:57:30 -0400] cwj: PierreO: np, be sure to check out https://github.com/opscode/chef-docs/blob/master/CONTRIBUTING
[2013-04-16 15:58:58 -0400] techminer1: How do I modify an existing config file to add a new block of text at a specific location in the file?
[2013-04-16 15:59:04 -0400] techminer1: Using a template...
[2013-04-16 16:01:41 -0400] techminer1: Nevermind.looks like that's not an accepted thing to do.instead just replace the whole file from the template....
[2013-04-16 16:05:06 -0400] simplesi: ... or failing that, a way to increase the logging verbosity in chefspec so I can see what it's actually doing?
[2013-04-16 16:19:02 -0400] BryanWB: anyone have .kitchen.yml w/ example ec2 config?
[2013-04-16 16:23:31 -0400] jtimberman: BryanWB__: I do.
[2013-04-16 16:23:49 -0400] BryanWB: jtimberman, a link would b rly,rly awesome
[2013-04-16 16:24:20 -0400] jtimberman: https://github.com/jtimberman/kitchen-1.0-skel/blob/master/kitchen.local.yml-ec2-example
[2013-04-16 16:24:23 -0400] jtimberman: was getting the link :)
[2013-04-16 16:24:36 -0400] BryanWB: jtimberman, sorry to rush u :p, tks homez
[2013-04-16 16:24:38 -0400] jtimberman: you may need to change the AMIs
[2013-04-16 16:24:43 -0400] jtimberman: np ;)
[2013-04-16 16:26:38 -0400] miketheman: can I load a databag item and shove that into a node's attributes at compile time?
[2013-04-16 16:29:25 -0400] kindsol: jtimberman: test-kitchen now supports Berkshelf? At least I see that in your skeleton Gemfile -- am I reading that right?
[2013-04-16 16:30:44 -0400] jtimberman: kindsol: 1.0-alpha does.
[2013-04-16 16:30:48 -0400] jtimberman: it's not "released" yet.
[2013-04-16 16:31:01 -0400] kindsol: suwheeet!
[2013-04-16 16:31:03 -0400] jtimberman: there's a pre release gem
[2013-04-16 16:31:25 -0400] jtimberman: http://jtimberman.housepub.org/blog/2013/03/19/anatomy-of-a-test-kitchen-1-dot-0-cookbook-part-1/
[2013-04-16 16:31:32 -0400] kindsol: I need to make some time to start playing with it!
[2013-04-16 16:36:58 -0400] miketheman: jtimberman: how the hell do I subvert node attributes during compile time from data bags?
[2013-04-16 16:37:20 -0400] btm: miketheman: use git *rimshot*
[2013-04-16 16:39:19 -0400] btm: miketheman: provided you're doing it in a recipe outside of a ruby_block, you should be able to set attributes just fine sourced from a data bag if you're on Chef 11.
[2013-04-16 16:40:01 -0400] jtimberman: miketheman: wat?
[2013-04-16 16:47:58 -0400] tmichael: trying to figure out why my json output is not pretty-printed when i use chef 11 client on my workstation.
[2013-04-16 16:48:03 -0400] tmichael: anything change?
[2013-04-16 16:48:21 -0400] tmichael: if i lock to chef 10 via bundler and try it works as expected
[2013-04-16 16:48:41 -0400] tmichael: tried forcing the format in knife.rb just in case default changed, but makes no difference
[2013-04-16 16:50:06 -0400] miketheman: btm: but if I have a recipe that installs stuff at compile time based on attributes usually passed in via a role, this doesn't seem to work
[2013-04-16 16:59:43 -0400] jackery: Anyone know of a good backup guide for Chef 11 server?
[2013-04-16 17:00:40 -0400] jtimberman: jackery: you can use knife-essentials (comes with chef 11) to download all the data via the API. or, on the chef server filesystem all the data is in /var/opt/chef-server
[2013-04-16 17:01:02 -0400] jtimberman: jackery: the cookbooks are stored as flat files by 'bookshelf' (an S3-alike service) and the rest of the data is in postgresql.
[2013-04-16 17:04:21 -0400] miketheman: btm, jtimberman: ok, I think I figured it out. I'm installing a handler at compile time that requires an attribute, so I have to reorder the run list so the recipe that loads the attribute from the databag executes before the handler.
[2013-04-16 17:06:39 -0400] drgonzo65: does a notification respect a conditional? i.e if i have a "notifies :run, "execute[resource_name]", :immediately" and an "only_if" condition in the target resource, does the notification execute the resource regardless of the conditional?
[2013-04-16 17:06:45 -0400] trco: Good morning (or, afternoon/evening depending). I am using the 2.0 version of the chef-server community cookbook, however I am getting an error as it runs. It is trying to download from an opscode url (http://www.opscode.com/chef/download-server?p=ubuntu&pv=12.04&m=i686&v=latest&prerelease=false&nightlies=false) but this doesn't seem to exist? Does anyone have a workaround for this issue?
[2013-04-16 17:09:15 -0400] bluekelp: drgonzo65: it should honor the conditional - i think i used something like that for our code deploy rules
[2013-04-16 17:09:29 -0400] trco: That URL, by the way, seems to be created by the cookbook. Obviously based on my system comfiguration and options in my json and such. The params seem right but nothing downloads. I tried it in a browser and it gives me a 404 there as well.
[2013-04-16 17:11:24 -0400] jakshi: Hello Chums, May be somebody knows, How to delete attribute on the node from commandline?
[2013-04-16 17:11:35 -0400] drgonzo65: bluekelp: it doesn't seem to be honoring it, that's why I asked. i have an execute resource that stops an upstart job only_if "status <jobname>", and that gets notified to run on a "initctl reload-configuration", yet it's running regardless of the only_if
[2013-04-16 17:12:52 -0400] gad0lin: jakshi: I am pretty sure knife exec can do this  http://dougireton.com/blog/2013/02/03/knife-tricks/
[2013-04-16 17:15:02 -0400] trco: Anybody help with the question above?
[2013-04-16 17:16:41 -0400] gad0lin: ohai guys, I am always using plain ruby on launched nodes, I wanted to use rvm as I need 1.9.3 and its pretty easy to install it through rvm. However after I use it chef client is not visible if dont switch to gemset. Otherwise knife cook fails. Is there one single step to fix it (https://gist.github.com/TylerRick/1961638) and make rvm ruby default so knife cook will work?
[2013-04-16 17:19:18 -0400] ulfr: howdy everyone
[2013-04-16 17:19:44 -0400] ulfr: is there a way to install chef11 from source ? the deb is 200MB and contains an entire operating system....
[2013-04-16 17:23:48 -0400] btm: ulfr: the source is here: github.com/opscode/erchef
[2013-04-16 17:23:57 -0400] btm: ulfr: it's possible but not recommended.
[2013-04-16 17:24:33 -0400] dyer: Hey guys, question Anyone know how to block in minitest to not run a test until services are actually started?  My app is a Java app so Chef may finish but the services are still coming up on the node
[2013-04-16 17:24:57 -0400] ulfr: thanks btm, I'll look at it
[2013-04-16 17:25:12 -0400] spox: execute("waiting for java services"){ command "sleep(10000000000000)" }
[2013-04-16 17:25:17 -0400] dyer: Is there a good way in minitest  to "wait" until some condition is met before running the testa and making the assertion ?
[2013-04-16 17:25:20 -0400] dyer: lol
[2013-04-16 17:25:34 -0400] dyer: 10000000000000 Your optimistic :)
[2013-04-16 17:26:07 -0400] btm: dyer: minitest is just ruby. figure out how to tell if your process is ready and you can write a loop to check and wait for that into the test.
[2013-04-16 17:26:25 -0400] dyer: yea, thats what I am doing now actually
[2013-04-16 17:26:40 -0400] dyer: Just figured I would ask real quick in here before I spent to much time on that approach
[2013-04-16 17:26:43 -0400] dyer: incase it was a bad plan
[2013-04-16 17:27:44 -0400] jakshi: Thank you gad0lin, I resolve my issue with knife node edit
[2013-04-16 17:32:45 -0400] trco: Good morning (or, afternoon/evening depending). I am using the 2.0 version of the chef-server community cookbook, however I am getting an error as it runs. It is trying to download from an opscode url (http://www.opscode.com/chef/download-server?p=ubuntu&pv=12.04&m=i686&v=latest&prerelease=false&nightlies=false) but this doesn't seem to exist? Does anyone have a workaround for this issue?
[2013-04-16 17:34:26 -0400] jackery: jtimberman: Thanks!
[2013-04-16 17:39:14 -0400] simplesi: hey folks - does anyone familiar with chefspec know if I can test for template resource creation (and variable completion)?
[2013-04-16 17:52:18 -0400] Kzim: hi
[2013-04-16 17:53:15 -0400] Kzim: Anyone know a good way to keep GIT and CHEF sync ? like a git hook or something ? just to be sure poeple doesn' t erase data bag if some forgot to pull-push
[2013-04-16 17:55:18 -0400] jakshi: Hello All, May be somebody knows, how to clear/delete attributes in code?
[2013-04-16 17:56:05 -0400] monokrome: Probably not very simple
[2013-04-16 18:00:23 -0400] monokrome: Data bag IDs can't be numbers, can they? :(
[2013-04-16 18:00:26 -0400] gad0lin: jakshi: take a look on ridley
[2013-04-16 18:01:53 -0400] jakshi: THank you gad0lin I'll
[2013-04-16 18:05:15 -0400] monokrome: I have a file named 1.json which is in the "deploy" databag
[2013-04-16 18:05:30 -0400] monokrome: The JSON has "id" set to 1, and another key called meta which has an object that I need
[2013-04-16 18:05:45 -0400] monokrome: but I get "data bag must be a Hash or a Mash"...
[2013-04-16 18:06:22 -0400] monokrome: I know that the JSON is properly formatted because I did
[2013-04-16 18:06:28 -0400] monokrome: %!python -m json.tool
[2013-04-16 18:06:33 -0400] monokrome: Any ideas?
[2013-04-16 18:14:23 -0400] adamjk-dev: anyone having fiber stack error when using berkshelf
[2013-04-16 18:14:23 -0400] adamjk-dev: ?
[2013-04-16 18:14:40 -0400] gad0lin: monokrome: should be ok, I checked implementation
[2013-04-16 18:14:41 -0400] adamjk-dev: https://github.com/celluloid/celluloid/wiki/Fiber-stack-errors
[2013-04-16 18:15:00 -0400] gad0lin: monokrome: VALID_ID = /^[\-[:alnum:]_]+$/
[2013-04-16 18:16:04 -0400] monokrome: hmm
[2013-04-16 18:16:09 -0400] monokrome: I renamed it to test.json
[2013-04-16 18:16:10 -0400] monokrome: still no luck
[2013-04-16 18:16:42 -0400] monokrome: :/
[2013-04-16 18:16:48 -0400] gad0lin: monokrome: but you have changed id?
[2013-04-16 18:17:50 -0400] monokrome: yeah
[2013-04-16 18:18:00 -0400] monokrome: I changed it all back now
[2013-04-16 18:21:19 -0400] xmltok: is node['memory']['total'] supposed to be in kilobytes? I have a vagrant VM that chef has node.memory.total at 3951752kB but free -m shows it with 365mb.
[2013-04-16 18:26:06 -0400] monokrome: JSON.parse reads the JSON properly
[2013-04-16 18:26:10 -0400] monokrome: the file is in 1.json
[2013-04-16 18:26:12 -0400] monokrome: the id is 1
[2013-04-16 18:26:27 -0400] monokrome: The file is deploy/1.json
[2013-04-16 18:26:42 -0400] monokrome: and I am doing: data_bag_item('deploy', '1') in my recipe
[2013-04-16 18:26:47 -0400] monokrome: Is this not correct/
[2013-04-16 18:26:49 -0400] monokrome: ?
[2013-04-16 18:31:27 -0400] freddie___: after upgrading to chef 11 on my clients, i am now seeing failed runs with random ENOMEM errors, is there a fix for this ?
[2013-04-16 18:33:42 -0400] trco: Ok, let me see if anyone knows the answer to this question: Is there a url that works for the download server? So something other than http://www.opscode.com/chef/download-server?
[2013-04-16 18:34:43 -0400] monokrome: trco: That's not a URL? O_o
[2013-04-16 18:36:34 -0400] jtimberman: trco: www.opscode.com/chef/install
[2013-04-16 18:36:47 -0400] jtimberman: There's a Chef Server tab.
[2013-04-16 18:48:45 -0400] magoo: does anyone know why the sysctl recipe tries to create 69-chef-static.conf despite not existing in the cookbook?
[2013-04-16 18:48:57 -0400] natacado: hey folks if i have a wrapper cookbook and want to change a prior compiled service notification from :restart to :reload, is there a reasonable way to do so?
[2013-04-16 18:50:30 -0400] spheromak: natacado: chef-rewind
[2013-04-16 18:51:27 -0400] spheromak: asuming its a resource in the wrapped cook
[2013-04-16 18:51:53 -0400] spheromak: you can also redefine the service if you want. but if you need it from the beginning of the run to be set that way you can use rewind
[2013-04-16 18:52:28 -0400] spheromak: if you only need to have it set post include of the wrapped cook then you can just define the service with the params you would like in your wrapper
[2013-04-16 19:03:18 -0400] david415: anyone run into the missing metadata.name problem with the opscode monit cookbook when uploading to opensource chef server with berkshelf?
[2013-04-16 19:03:51 -0400] david415: i mean... any cookbook that doesn't have a metadata.name cannot be uploaded with berkshelf
[2013-04-16 19:04:08 -0400] spox: david415: that is indeed the case
[2013-04-16 19:04:30 -0400] ivey: we're going to be making it so berkshelf will fallback to metadata.json but you should really get the cookbook to have a name in metadata.rb
[2013-04-16 19:04:32 -0400] david415: ok. right. and here's the github issue: https://github.com/RiotGames/berkshelf/issues/442
[2013-04-16 19:04:33 -0400] spox: maybe it was fixed in recent release? i haven't tried it out yet
[2013-04-16 19:04:56 -0400] david415: ivey: yeah i agree that cookbooks should have a metadata.name
[2013-04-16 19:05:05 -0400] ivey: oh wait that's a different issue
[2013-04-16 19:05:07 -0400] david415: spox: nope... not fixed
[2013-04-16 19:05:16 -0400] david415: ivey: huh?
[2013-04-16 19:05:30 -0400] ivey: i was thinking of the one where there was no metadata.rb
[2013-04-16 19:05:34 -0400] ivey: some cookbooks only have .json
[2013-04-16 19:07:29 -0400] david415: ah ok
[2013-04-16 19:09:26 -0400] troyready: I'm really scratching my head trying to figure out why our Windows nodes don't show up in searches (before I thought it was just hostname:* searches that was omitting them, but now a  role:foo search isn't returning them either)
[2013-04-16 19:09:28 -0400] david415: according to the docs http://docs.opscode.com/config_rb_metadata.html it seems like metadata.name doesn't HAVE to be specified
[2013-04-16 19:09:51 -0400] jtimberman: david415: it doens't
[2013-04-16 19:09:56 -0400] troyready: Anyone else ever experience anything similar? Any tips on how to dive deeper in to solr to troubleshoot?
[2013-04-16 19:10:01 -0400] david415: however if metadata.name is not specified then berkshelf will NOT upload to a open source chef-server
[2013-04-16 19:10:08 -0400] magoo: i've barely used chef-shell before.. what do i need to do to just run through my current run list and get a verbose output so I can see why i'm getting a nilclass error?
[2013-04-16 19:10:25 -0400] jtimberman: david415: we have a CHEF ticket to make it required, but that's a breaking change, so it would be Chef 12 since we didn't get it in time for Chef 11.
[2013-04-16 19:10:53 -0400] ivey: david415:
[2013-04-16 19:10:59 -0400] ivey: i suspect it's a ridley issue
[2013-04-16 19:11:09 -0400] ivey: since that's where the communication w/ chef happens
[2013-04-16 19:11:23 -0400] ivey: it's weird that it's different though, open source vs hosted
[2013-04-16 19:11:29 -0400] sascha_d: @troyready http://tickets.opscode.com/browse/CHEF-2346
[2013-04-16 19:11:55 -0400] sascha_d: increase the default maxFieldLength for solr
[2013-04-16 19:12:18 -0400] david415: jtimberman: ok. thanks for the info! that, to me means that i should in fact add a metadata.name!
[2013-04-16 19:13:24 -0400] troyready: sascha_d, thanks a million, will check on that now
[2013-04-16 19:14:27 -0400] aneto: I have a noob question, how would I go about rescuing from an exception?
[2013-04-16 19:15:00 -0400] dfrey: aneto:http://www.ruby-doc.org/docs/ProgrammingRuby/
[2013-04-16 19:24:54 -0400] dfrey: i dont believe the bash resource is running .bashrc when it is called. is there any way to change this?
[2013-04-16 19:26:57 -0400] ivey: david415: you should absolutely have a name in metatdata. whether it's required or not. :-)
[2013-04-16 19:27:10 -0400] ivey: but we still need to make berkshelf work if it's not there
[2013-04-16 19:27:36 -0400] david415: ivey: agreed
[2013-04-16 19:31:36 -0400] troyready: sascha_d: thanks again so much, that was exactly it
[2013-04-16 19:31:49 -0400] sascha_d: @troyready super! I'm glad it helped
[2013-04-16 19:36:16 -0400] trco: jtimberman: so the community cookbook for chef-server (https://github.com/opscode-cookbooks/chef-server) uses the http://www.opscode.com/chef/download-server url instead of http://www.opscode.com/chef/install. Should it use http://www.opscode.com/chef/install? I can change the cookbook and make a pull request if that is the case
[2013-04-16 19:37:57 -0400] adamjk-dev: does anyone do any remote debugging of a chef run?
[2013-04-16 19:38:04 -0400] adamjk-dev: through vagrant perhaps
[2013-04-16 19:38:19 -0400] adamjk-dev: or a convenient and nice way to step through recipes, maybe set breakpoints, etc.
[2013-04-16 19:38:34 -0400] miah: pry
[2013-04-16 19:46:30 -0400] jtimberman: trco: what is it you're trying to do?
[2013-04-16 19:47:41 -0400] magoo: has the syntax for chef-shell changes since it was shef?
[2013-04-16 19:47:53 -0400] magoo: i'm following the guide and it isn't working as expected
[2013-04-16 19:49:04 -0400] trco: jtimberman: I am trying to use the chef-server community cookbook (chef-server::default) to install chef server. However if fails with the error: INFO: Omnitruck download-server request: http://www.opscode.com/chef/download-server?p=ubuntu&pv=12.04&m=i686&v=latest&prerelease=false&nightlies=false ... Connection timed out - connect(2)
[2013-04-16 19:49:37 -0400] magoo: chef:recipe > include_recipe "nagios::server" => []
[2013-04-16 19:49:47 -0400] trco: jtimberman: When I try to go to that url in a browser I get a 404. I have checked over incantations of it and it never seems to work. It would see that you don't have a /chef/download-server
[2013-04-16 19:51:33 -0400] jtimberman: trco: i don't know, seems like a bug in the cookbook. i pinged schisamo who has been maintaining that.
[2013-04-16 19:52:09 -0400] dfrey: what is chef doing when it executes a command by a specific user? $HOME is still root
[2013-04-16 19:52:44 -0400] trco: jtimberman: thank you! My pair and I are willing to make a change to the cookbook and do a pull request... but we aren't sure where it should point. Hopefully schisamo can help! :)
[2013-04-16 19:53:40 -0400] schisamo: trco: we don't build 32-bit server packages
[2013-04-16 19:55:07 -0400] trco: schisamo: This isn't for a 32 bit server. The m=i686 is for 64 bit no?
[2013-04-16 19:58:11 -0400] leifmadsen: trco: which version?
[2013-04-16 19:59:21 -0400] schisamo: trco: i686 = 32-bit Intel x86 arch / x86_64 = 64-bit Intel x86 arch
[2013-04-16 20:01:24 -0400] trco: schisamo: A HA!!! Thank you... ok it's picking up the wrong version. Can we set that somewhere for the recipe to pick up?
[2013-04-16 20:03:10 -0400] schisamo: trco: we use node['kernel']['machine'] which is determined by ohai: https://github.com/opscode-cookbooks/chef-server/blob/master/libraries/omnitruck_client.rb#L27
[2013-04-16 20:03:31 -0400] schisamo: trco: basically Ohai/Chef thinks it is running on a 32 bit machine.
[2013-04-16 20:03:38 -0400] pwf: can i not override cookbook_files when including a recipe?
[2013-04-16 20:04:52 -0400] trco: schisamo: That is a bummer... hmmm this gives us a lot to go on to figure out the problem now. Thank you! We're sorry to take up your time on it but we were so stuck
[2013-04-16 20:05:05 -0400] schisamo: trco: np...glad to help!
[2013-04-16 20:05:13 -0400] miah: david415: not specifying metadata.name is just bad practice. just because its not required doesn't mean you shouldn't do it =)
[2013-04-16 20:08:51 -0400] david415: miah: ok ;-)
[2013-04-16 20:12:04 -0400] xerxas: Hi !
[2013-04-16 20:14:51 -0400] trco: Oh and jtimberman thank you as well!
[2013-04-16 20:20:21 -0400] magoo: can someone help me debug this... i'm losing way too much time on it http://pastebin.com/1Er33cTV
[2013-04-16 20:20:42 -0400] magoo: this is in production and has worked fine up until recently
[2013-04-16 20:21:25 -0400] jameson_: node or n is nil
[2013-04-16 20:22:00 -0400] matthewvermaak: line 26 n['cloud']['provider'] , preface with and !n['cloud'].nil? check
[2013-04-16 20:28:23 -0400] magoo: matthewvermaak: that's a good thought and perhaps the master cookbook needs to be patched... i'm going to try a knife search to see which node might fit that criteria first. Maybe i can address the node issue before I modify the cookbook
[2013-04-16 20:31:34 -0400] magoo: matthewvermaak: yeah, i found nodes with no cloud data populated... thanks for the tip
[2013-04-16 20:31:40 -0400] matthewvermaak: magoo: no problem
[2013-04-16 20:43:03 -0400] Wynn: anyone recently upgrade from chef 10 to chef 11?
[2013-04-16 20:43:31 -0400] Wynn: I was wondering about the "knife download " command
[2013-04-16 20:44:06 -0400] Wynn: it seems to be downloading my cookbooks  data_bags  environments  roles
[2013-04-16 20:44:15 -0400] Wynn: but not downloading the users and clients
[2013-04-16 20:50:05 -0400] miketheman: once having deleted a validation clinet from hosted chef, and re-creating it, what permissions does it need?
[2013-04-16 20:50:38 -0400] dkador: anybody have any recommendations on how to handle partitioning / formatting a drive w/ chef?  just use a script?
[2013-04-16 20:51:00 -0400] aneto: noob question again, if I use the aws cookbook to mount an ebs volume and it raises an exception because it's mounted to another node, how can I rescue and create a new ebs storage?
[2013-04-16 20:51:01 -0400] miah: miketheman: uh. your user needs read-privs? its only used during bootstrap and can be rm'd afterwards.
[2013-04-16 20:52:46 -0400] miketheman: miah: I think I meant "what hosted chef permissions / acl does the validator client need?"
[2013-04-16 20:53:21 -0400] miah: oh
[2013-04-16 20:53:31 -0400] miah: lets see
[2013-04-16 20:54:11 -0400] miketheman: miah: "Your validation client is not authorized to create the client for this node"
[2013-04-16 20:55:04 -0400] miah: miketheman: ya. i suspect it needs 'grant'
[2013-04-16 20:55:17 -0400] miah: but all the checkboxes are 'blank' on my hosted chef validator clients
[2013-04-16 20:55:30 -0400] miketheman: is it a member of the admins group or something?
[2013-04-16 20:55:36 -0400] miah: ah
[2013-04-16 20:55:38 -0400] miah: there we go
[2013-04-16 20:55:42 -0400] miah: go to edit permissions
[2013-04-16 20:55:47 -0400] miah: then click on edit permissions again =)
[2013-04-16 20:55:51 -0400] miah: give it create and list
[2013-04-16 20:56:01 -0400] miketheman: WAT
[2013-04-16 20:56:07 -0400] miah: ya. so.. uh.
[2013-04-16 20:56:15 -0400] miah: via the web interface. clients -> edit permissions
[2013-04-16 20:56:45 -0400] miah: if you click on 'edit permissions' after the client it takes you to a different permissions page
[2013-04-16 20:57:01 -0400] miah: seems like a workflow issue that should be corrected because wow thats confusing
[2013-04-16 20:57:27 -0400] miketheman: holy schmoley crapoley.
[2013-04-16 20:57:39 -0400] miah: eg, https://manage.opscode.com/clients/_acl != https://manage.opscode.com/clients/i-9e07abee/_acl
[2013-04-16 20:58:02 -0400] miah: the website doesnt make that obvious though
[2013-04-16 20:58:12 -0400] miah: anyways ya. 'create' and 'list' on your validator. =)
[2013-04-16 20:58:14 -0400] miketheman: wasn't their serious talk about a sexier web UI last year?
[2013-04-16 20:58:35 -0400] miah: talk is just that
[2013-04-16 20:58:53 -0400] miah: actions have much more value
[2013-04-16 20:59:19 -0400] miketheman: btw - got this as well: http://wiki.opscode.com/display/chef/Common+Errors#CommonErrors-401Unauthorized(usingvalidatorAPIclient)
[2013-04-16 20:59:19 -0400] behemphi: I was part of the beta for the new web UI
[2013-04-16 20:59:26 -0400] behemphi: it was shaping up well
[2013-04-16 20:59:44 -0400] behemphi: then it went dark around the time all the ruby/json security issues hit
[2013-04-16 20:59:45 -0400] miketheman: behemphi: yeah, go ahead and brag about it. :)
[2013-04-16 20:59:53 -0400] miah: oh fun
[2013-04-16 21:00:00 -0400] miketheman: miah: thanks a ton for pointing out that silly UX nightmare.
[2013-04-16 21:00:05 -0400] miah: np
[2013-04-16 21:00:08 -0400] behemphi: Lol, @miketheman I have the same one you do again
[2013-04-16 21:00:24 -0400] behemphi: the upside is I am pretty handy with knife :-)
[2013-04-16 21:00:34 -0400] miketheman: behemphi: AHA! Serves you right! You didn't share, so now you're stuck with mud like the rest of us. :)
[2013-04-16 21:00:54 -0400] behemphi: Your giving mud a bad name
[2013-04-16 21:01:07 -0400] behemphi: (wasn't that from a Bon Jovi song?)
[2013-04-16 21:01:19 -0400] miketheman: "your" vs "you're"
[2013-04-16 21:01:32 -0400] miketheman: I'm going to nitpick about that until I die. :)
[2013-04-16 21:02:09 -0400] matthewvermaak: along with an "alot" ?
[2013-04-16 21:02:25 -0400] miketheman: Alot () is a town and nagar panchayat in the Ratlam district of Madhya Pradesh, India..
[2013-04-16 21:02:25 -0400] behemphi: who's grammar is it :-)
[2013-04-16 21:02:36 -0400] jameson_: surprised my client can render that..
[2013-04-16 21:02:42 -0400] matthewvermaak: i like the http://hyperboleandahalf.blogspot.com/2010/04/alot-is-better-than-you-at-everything.html
[2013-04-16 21:03:08 -0400] jameson_: hypervoleandhalf hasn't been updated in a while :(
[2013-04-16 21:03:25 -0400] behemphi: I do admit to being frustrated that a Bon Jovi riff got trumped by a grammar lesson though!
[2013-04-16 21:03:49 -0400] miketheman: hehehehe
[2013-04-16 21:07:33 -0400] miketheman: miah: I'm back in business.
[2013-04-16 21:08:49 -0400] miah: =)
[2013-04-16 21:09:49 -0400] juliancdunn: miketheman: Johnny and I are writing up the NYC meetup details. Want us to just use your bio from ChefConf, or do you have another one?
[2013-04-16 21:10:21 -0400] miketheman: juliancdunn: um. what is my bio for chefconf?
[2013-04-16 21:10:28 -0400] miketheman: (it's probably wrong. :) )
[2013-04-16 21:10:38 -0400] juliancdunn: lol, I don't know, I haven't read it
[2013-04-16 21:10:54 -0400] juliancdunn: oh right... can you send me a revised one then? jdunn@opscode.com
[2013-04-16 21:11:09 -0400] miketheman: "Mike is the biggest winner of popsicles"
[2013-04-16 21:11:10 -0400] miketheman: done.
[2013-04-16 21:11:52 -0400] juliancdunn: hah
[2013-04-16 21:15:38 -0400] miketheman: juliancdunn: sent to you and nathenharvey
[2013-04-16 21:16:41 -0400] juliancdunn: miketheman: thanks
[2013-04-16 21:18:13 -0400] heathsnow: so what's wrong w/my setup if i attempt: knife bootstrap SERVER --bootstrap-version 10.18.2 -x USERNAME -P PASSWORD --sudo
[2013-04-16 21:18:29 -0400] heathsnow: and all I get is 'Bootstrapping Chef on SERVER'....then back to prompt
[2013-04-16 21:19:59 -0400] jameson_: doesn't bootstrap only install base chef?
[2013-04-16 21:20:25 -0400] btm: heathsnow: does 'ssh USERNAME@SERVER' work at that prompt?
[2013-04-16 21:22:35 -0400] heathsnow: yep, ssh works fine
[2013-04-16 21:23:04 -0400] pizzahead: replace SERVER with your fqdn or ip
[2013-04-16 21:23:04 -0400] miketheman: heathsnow: try dropping the -P PASSWORD and testing again
[2013-04-16 21:23:27 -0400] pizzahead: and if SERVER is generic for irc purposes, ignore me :)
[2013-04-16 21:24:01 -0400] jameson_: best way to share attribute between recipe without include_recipe, roles, or environments... definitions?
[2013-04-16 21:24:09 -0400] jameson_: or libraries?
[2013-04-16 21:24:13 -0400] heathsnow: dropping the '-P PASSWORD' fails with:  ERROR: Net::SSH::AuthenticationFailed: Administrator@SERVER
[2013-04-16 21:24:24 -0400] pizzahead: maybe run -V with your initial command?
[2013-04-16 21:24:51 -0400] heathsnow: ah, sec
[2013-04-16 21:25:09 -0400] heathsnow: success
[2013-04-16 21:25:34 -0400] pizzahead: it might have been working and just not showing you output
[2013-04-16 21:25:40 -0400] pizzahead: had it been on your node list?
[2013-04-16 21:26:53 -0400] heathsnow: well, now it bootstraps..but doesn't show the chef run :S
[2013-04-16 21:41:40 -0400] |rt|: Is there a good way to get a list of users on a node mid chef run?  I know Ohai populates node data but what if the first run is creating users and then I need to manage group membership on the same run....is the node attributes populated mid run or do I need to use the etc gem to create my own list?
[2013-04-16 21:43:46 -0400] gleam: |rt|: http://docs.opscode.com/resource_ohai.html
[2013-04-16 21:45:16 -0400] |rt|: gleam that looks like that would do the trick....so I can create my users and call the ohai resource then proceed with my group membership management
[2013-04-16 21:45:20 -0400] gleam: yep
[2013-04-16 21:45:45 -0400] |rt|: awesome thanks
[2013-04-16 21:46:49 -0400] btm: heathsnow: knife -V -V (two of them) should give you debugging output
[2013-04-16 21:48:50 -0400] aneto: noob question again, if I use the aws cookbook to mount an ebs volume and it raises an exception because it's mounted to another node, how can I rescue and create a new ebs storage?
[2013-04-16 21:53:29 -0400] ranjibd: abetterlie: wrap it in a begin rescue block
[2013-04-16 21:53:57 -0400] ranjibd: or check for the ebs before executing the resource..
[2013-04-16 21:54:57 -0400] nlloyds: aneto: Do you have a way to check if it's in that state? If so a not_if would probably be the best thing to do
[2013-04-16 21:56:31 -0400] shanlar: trying to use aws_ebs_volume, it fails to attach the volume because it is already in use. so i want to catch the exception and have it create a new volume when this happens.
[2013-04-16 21:57:17 -0400] shanlar: i wrapped aws_ebs_volume in a begin block and tried using rescue, but the rescue is never ran
[2013-04-16 21:58:08 -0400] shanlar: http://pastebin.mozilla.org/2311741
[2013-04-16 21:58:33 -0400] pizzahead: is there a way I can have chef server and client ignore fqdn's and just rely on IP?  I have chef server running on a private network without public ip's and on I added the host name to /etc/hosts which seemed to be fine when I deployed servers without recipes but now that I've modified the base role to include some recipes it looks like the new node tries to connect to the chef server fqdn , which it doesn't have in /etc/hosts , so DNS fails. The initial boots
[2013-04-16 21:58:46 -0400] pizzahead: trying to sync cookbooks.  The odd thing is it mentions chef_server_url and show's the IP
[2013-04-16 21:58:52 -0400] shanlar: nlloyds: any idea?
[2013-04-16 21:59:04 -0400] shanlar: or ranjibd?
[2013-04-16 22:01:33 -0400] ranjibd: shanlar: can u share the recipe ?
[2013-04-16 22:02:06 -0400] ranjibd: pizzahead: chef server 11?
[2013-04-16 22:02:37 -0400] pizzahead: ranjibd: yes
[2013-04-16 22:03:31 -0400] pizzahead: I'll paste a more detailed error in a second. I keep destroying instances and redeploying to the same IP without clearing out the ssh key in known_hosts....
[2013-04-16 22:03:40 -0400] ranjibd: pizzahead: http://docs.opscode.com/config_rb_chef_server.html
[2013-04-16 22:04:02 -0400] shanlar: ranjibd: http://pastebin.mozilla.org/2311742
[2013-04-16 22:06:31 -0400] ranjibd: shanlar: may be  because the actual aws api calls are happening on the execution phase.. hence the begin rescue block is not working
[2013-04-16 22:06:46 -0400] shanlar: ahh
[2013-04-16 22:07:01 -0400] ranjibd: if you just want to proceed , you can try `ignore_failure true`
[2013-04-16 22:07:12 -0400] pizzahead: ranjibd: thanks I'll take a look at the config
[2013-04-16 22:07:25 -0400] shanlar: can you point me in the direction of how to catch it in the execution phase?
[2013-04-16 22:07:37 -0400] ranjibd: but if you want to take a corrective action.. then check before defining the resource if the ebs volume is already attached or not
[2013-04-16 22:07:47 -0400] shanlar: normally just proceed would be fine, but i need to act on this failure and only if this failure happened
[2013-04-16 22:07:59 -0400] ranjibd: shanlar: i think you have to do it in the provider.. not in the recipe
[2013-04-16 22:07:59 -0400] nlloyds: shanlar: You might be able to rescue RuntimeError => e, but then you'd have to check if it's the right kind of error
[2013-04-16 22:08:00 -0400] shanlar: hmm yea that would work actually
[2013-04-16 22:09:30 -0400] pizzahead: ranjibd: I take it the bookshelf url is what I need to specify?  Do I need to restart chef server once I've added this file and setting?
[2013-04-16 22:09:33 -0400] shanlar: so you cant check if a provider executed successfully?
[2013-04-16 22:09:56 -0400] ranjibd: pizzahead: chef-server-ctl reconfigure
[2013-04-16 22:10:00 -0400] nlloyds: shanlar: You also might be able to `include Opscode::Aws::Ec2`, and then check like the provider does in a not_if: https://github.com/opscode-cookbooks/aws/blob/master/providers/ebs_volume.rb#L56 and https://github.com/opscode-cookbooks/aws/blob/master/providers/ebs_volume.rb#L56
[2013-04-16 22:10:44 -0400] ranjibd: those config changes will be propagated to embedded chef server component specific files.. somewhere in /opt/chef-server/embedded/service/etc/,,,
[2013-04-16 22:13:05 -0400] ranjibd: cant recall exactly.. but i had this exact issue.. and had to fix them manually .. till some one form opscode pointed me to the config file
[2013-04-16 22:13:19 -0400] ranjibd: current doc site is bit WIP
[2013-04-16 22:13:27 -0400] nlloyds: shanlar: You might be able to make a library with a helper to do something like not_if volume('my_volume_id').in_use?
[2013-04-16 22:16:23 -0400] shanlar: ok ill look into those options. thanks!
[2013-04-16 22:24:26 -0400] gad0lin: do you have advice on cookbook that installs arbitrary gem - http://community.opscode.com/cookbooks/gem_installer? I need to install treetop for chef solo search.
[2013-04-16 22:25:37 -0400] stormerider: playing around with chef 11, and ive set it to run non-ssl on 4000 and ssl on 8443 via the nginx settings in /etc/chef-server/chef-server.rb, but for some reason the login form/etc is trying to redirect folks over to https://servername instead of honoring the URL setting.
[2013-04-16 22:25:47 -0400] stormerider: im guessing i'm missing another config setting somewhere?
[2013-04-16 23:11:41 -0400] jwcarman: If I have a "notifies" in a template resource, that notification should only occur if the file actually changes, right?
[2013-04-16 23:13:53 -0400] natacado: spheromak: sorry, reviving a older conv. for earlier in the day i don't think chef-rewind would actually rewind notifications? When you add notifies :restart, "service[foo]" to a resource, it actually goes and modifies the run_context. I could add a new notifies to an existing resource this way, but not remove an existing one.
[2013-04-16 23:16:52 -0400] jwcarman: natacado: you answering my question?
[2013-04-16 23:17:45 -0400] natacado: jwcarman: sorry, not related. :-) i can answer your question though. Notifications should only fire if something was updated. For a file or template resource, that means the file changing.
[2013-04-16 23:17:50 -0400] jwcarman: or are we asking something very similar? :)
[2013-04-16 23:18:12 -0400] jwcarman: I am seeing a notification firing on every run.  For some reason, chef is thinking the file is changing on every run
[2013-04-16 23:19:55 -0400] jwcarman: I don't know why it would think it's updating every time.  Has anyone seen that before?
[2013-04-16 23:20:09 -0400] natacado: does the chef run log that the content updated?
[2013-04-16 23:20:16 -0400] jwcarman: It does
[2013-04-16 23:20:24 -0400] jwcarman: but, looking at the file, I don't see how it could
[2013-04-16 23:20:49 -0400] jwcarman: There's only one variable reference in that template and the value is always the same value in this case
[2013-04-16 23:21:25 -0400] natacado: perhaps you have two different resources updating the same file the first overwrites changes from the last chef run, the second overwriting the contents from earlier in the chef run?
[2013-04-16 23:21:58 -0400] natacado: check /var/chef/backup/... for older backup copies of the file, and see what changed
[2013-04-16 23:22:01 -0400] jwcarman: could be.  don't know how
[2013-04-16 23:22:21 -0400] jwcarman: dont' know if I have access to that directory
[2013-04-16 23:24:52 -0400] gad0lin: hmhm... will be there extra session on kitchen test during ChefCOnf, I saw some rumor on twitter?
[2013-04-16 23:54:16 -0400] grepory: is there some known, magical workaround for mixlib::cli not inheriting options from parent classes?
[2013-04-16 23:57:34 -0400] barefoot: what am I doing wrong with knife-file? http://bpaste.net/show/A06vaygIRGBwUV2eT7AI/
[2013-04-16 23:59:35 -0400] jameson_: anyone know what was the way to stop a service if it already running from service resource
[2013-04-16 23:59:58 -0400] jameson_: i could swear there was like a 'if_running' thing

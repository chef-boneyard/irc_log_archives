[2013-04-29 00:36:15 -0400] halfss: hi, in the erchef, a node could get informantion for all noedes,environment,roles? is this is ok?
[2013-04-29 00:39:02 -0400] j^2: hey all, anyone use https://github.com/btm/minitest-handler-cookbook ? i'm having trouble adding new testes?
[2013-04-29 00:39:06 -0400] j^2: tests*
[2013-04-29 00:39:51 -0400] bluekelp: j^2: that's forked from https://github.com/calavera/minitest-chef-handler
[2013-04-29 00:40:05 -0400] bluekelp: your repo hasn't been updated in a year.  perhaps a newer repo will work better for you
[2013-04-29 00:40:31 -0400] j^2: interesting, yeah i get the default_test.rb running, but as soon as i add a new file in it doesnt work :(
[2013-04-29 00:40:51 -0400] bluekelp: (i discovered the same when trying to figure which repo was authoritative)
[2013-04-29 00:41:06 -0400] j^2: bluekelp: lame, ok :(
[2013-04-29 00:41:50 -0400] halfss: in the erchef ,is there something can isolaiont the permissaiont by Organization in hosted chef?
[2013-04-29 00:42:24 -0400] halfss: permission
[2013-04-29 00:47:41 -0400] bluekelp: halfss: are you asking about segregating your nodes into clusters that cannot see each other?
[2013-04-29 00:48:05 -0400] halfss:  yes
[2013-04-29 00:48:18 -0400] halfss: sorry,my english is bad , :(
[2013-04-29 00:48:53 -0400] bluekelp: i am not aware of a way to do that. perhaps someone else is. you might need separate chef servers/hosted accounts for that.
[2013-04-29 00:49:37 -0400] halfss: in private chef i can you organization to segregating them? but i don't fand the api use to manage origanization
[2013-04-29 00:50:55 -0400] halfss: in erchef, when i create an user(not admin), and then i login wtih the new user, i can get all node,environment,etc
[2013-04-29 00:51:29 -0400] halfss: so the use could not separate nodes? i am wrang?
[2013-04-29 00:51:52 -0400] halfss: this question is puzzle me a long time?
[2013-04-29 00:54:21 -0400] bluekelp: i do not know how to do that in private chef or hosted. i do not know if it is possible.
[2013-04-29 00:57:15 -0400] halfss: in private chef, a node could not get infor of nodes in other organizaions,
[2013-04-29 01:02:31 -0400] bluekelp: i do not know how to setup organizations for private chef either. i think you need multiple private chef servers or multiple hosted chef organizations
[2013-04-29 01:03:20 -0400] bluekelp: if you ask again in 12-20 hours from now you will get answers from more people
[2013-04-29 01:03:30 -0400] bluekelp: there are not many people active in this channel now
[2013-04-29 01:03:33 -0400] coderanger: halfss: No, RBAC and multi-tenant orgs are not a feature of open-source chef
[2013-04-29 01:04:02 -0400] coderanger: The only access controls in OSC is the admin boolean on each client
[2013-04-29 01:04:15 -0400] bluekelp: there you have it :) you need multiple organizations (hosted) or servers (private)
[2013-04-29 01:04:35 -0400] halfss: this is so bad for me  :(
[2013-04-29 01:05:18 -0400] coderanger: Yep, thats the alternative with OSC, setup mutliple isolated server instances
[2013-04-29 01:05:30 -0400] coderanger: though if you got suitably complex they could share a lot of backend infra, etc
[2013-04-29 01:05:39 -0400] halfss: anothers quesations: in private chef, how to manage organization with api by python?
[2013-04-29 01:05:41 -0400] coderanger: That rabbit hole goes deep though
[2013-04-29 01:06:02 -0400] coderanger: halfss: The API isn't generally publicized, but contact support@opscode.com and they can give you some examples
[2013-04-29 01:06:20 -0400] coderanger: I don't have explicit support in pychef, but you can use the raw API access layer
[2013-04-29 01:06:52 -0400] halfss: thanks
[2013-04-29 01:09:16 -0400] halfss: add a limit : a node only could get information of itself, will be ok
[2013-04-29 01:10:13 -0400] bluekelp: halfss: chef-solo *might* work for a situation like that
[2013-04-29 01:10:43 -0400] halfss: thanks let me see
[2013-04-29 01:10:43 -0400] bluekelp: since there is no server, nodes cannot do much to each other.  but solo has other limitations that may not work for you
[2013-04-29 01:11:19 -0400] coderanger: solo would require you to replication the whole control backplane though
[2013-04-29 01:11:24 -0400] coderanger: definitely an advanced option
[2013-04-29 01:11:39 -0400] coderanger: That kind of setup is supported with hosted/private chef via RBAC
[2013-04-29 01:11:49 -0400] coderanger: (or anything you can think or more or less)
[2013-04-29 01:12:17 -0400] halfss: chef-solo is not ok for me
[2013-04-29 01:12:32 -0400] halfss: yes
[2013-04-29 01:14:03 -0400] bluekelp: coderanger: how do you mean rbac w/server setups? not sure i follow
[2013-04-29 01:14:57 -0400] coderanger: bluekelp: Via the ACL system in hosted/private chef you can lock things down such that a given node can't see any other node
[2013-04-29 01:16:03 -0400] bluekelp: i thought you just said OSC can't do that? :) if you url me i'll go rtfm
[2013-04-29 01:17:00 -0400] halfss: in private chef, a node could get another node's information which node's organizations is same
[2013-04-29 01:17:25 -0400] halfss: hi, is there any one know where erchef api code?
[2013-04-29 01:18:21 -0400] bluekelp: oh n/m. i interpreted "private chef" as a local/private chef server
[2013-04-29 01:19:28 -0400] halfss: :)
[2013-04-29 01:20:17 -0400] bluekelp: halfss: i think what you're trying to do is what private chef/hosted chef does. so the separate them you really want separate "organizations" even though you say you want them in the same org.
[2013-04-29 01:20:57 -0400] bluekelp: to* separate them.  sorry, i think you're going to have to either re-create the closed source portions or use separate orgs
[2013-04-29 01:25:17 -0400] halfss: :(  add a limit is not difficult in erchef, opscode should add this feautre , if a node is been hacked, all nodes is hacked tooo
[2013-04-29 01:26:06 -0400] halfss: a node  could get all node&environment&cookbook's information
[2013-04-29 01:26:39 -0400] halfss: is danger
[2013-04-29 01:54:16 -0400] williamherry: hi, I have a little, it seem chef-client get get all environment info, is this a security issue? there are many sensive info in environment
[2013-04-29 01:58:18 -0400] djwonk: I want to bootstrap a Chef Server from nothing. When I use `knife linode server create` it expects to know about an existing chef-server, right? Or not?
[2013-04-29 01:59:29 -0400] bluekelp: djwonk: it is probably trying to bootstrap the new node to know about the server, yes.
[2013-04-29 02:00:11 -0400] bluekelp: djwonk: there might be cmdline args to have it bootstrapped in solo mode but i'm not sure
[2013-04-29 02:00:13 -0400] djwonk: bluekelp: thanks. I'd like to make my own chef server on Linode with knife. How do I do that?
[2013-04-29 02:00:48 -0400] jed_: I'd launch the Linode by hand, use the chef-server Omnibus installer, then start it
[2013-04-29 02:00:57 -0400] jed_: then knife bootstrap the node as a client if you want to manage the server as a client
[2013-04-29 02:02:11 -0400] cwj: there's a knife plugin for bootstrapping new chef servers
[2013-04-29 02:02:13 -0400] cwj: http://fnichol.github.io/knife-server/
[2013-04-29 02:02:16 -0400] bluekelp: djwonk: you can't really bootstrap itself w/o using chef-solo or going manual. it's sort of a chicken/egg thing
[2013-04-29 02:03:20 -0400] jed_: culturally, I don't believe in managing the server with the configuration management system (gives you a way out if there's a catastrophic misconfiguration), so I'd vouch for manual on a server being born from nothing
[2013-04-29 02:03:32 -0400] bluekelp: cwj: i stand corrected.  very cool. wish we'd known about this when we started :)
[2013-04-29 02:03:59 -0400] cwj: its pretty great if you want to stand up new servers for testing
[2013-04-29 02:04:10 -0400] bluekelp: jed_: agree.  but a scripted/automated setup can bring in wisdom w/o manual 1, 2, 3, tutorials
[2013-04-29 02:04:22 -0400] jed_: eh, 11 omnibus was pretty easy
[2013-04-29 02:04:27 -0400] jed_: wget, rpm -ivh, service start
[2013-04-29 02:04:58 -0400] bluekelp: but by all means delete the server's chef node.  omnibus is also very good. we just moved all clients over to it. will do server once we have some breathing room
[2013-04-29 02:08:04 -0400] coderanger: chef 11 server uses solo internally for some logic
[2013-04-29 02:08:15 -0400] coderanger: but its happily minimal
[2013-04-29 02:15:06 -0400] bluekelp: can/should run_list ordering of recipes matter re: attributes (assuming one defaults, another overrides)?
[2013-04-29 02:19:51 -0400] cwj: bluekelp: per CHEF-2903, attribute load order was nondeterministic until chef 11
[2013-04-29 02:20:03 -0400] cwj: http://tickets.opscode.com/browse/CHEF-2903
[2013-04-29 02:34:31 -0400] savagecroc: hey.. i've been using my own homegrown chef style system for a number of years and it kinda works ok.. basically sets up a server, installs everything
[2013-04-29 02:34:37 -0400] savagecroc: and sets up 30 or so different apps
[2013-04-29 02:34:55 -0400] savagecroc: i.e. rake vm:setup SERVER=servername....
[2013-04-29 02:35:16 -0400] savagecroc: We want to start on a much larger project which is going to require many servers (we currently only run 15)
[2013-04-29 02:35:46 -0400] savagecroc: and also we want them to auto configure and join the cloud etc
[2013-04-29 02:36:07 -0400] savagecroc: can anyone give some details me their experience in switching their infrastructure over to chef
[2013-04-29 02:36:12 -0400] savagecroc: and the difference it's made
[2013-04-29 02:37:00 -0400] savagecroc: i.e. do you like the approach they have taken, is there anything you don't like.. is it easy to train new developers to write new recipies etc
[2013-04-29 02:40:21 -0400] djwonk: bluekelp: I've discovered that `knife linode server create .... --template-file /dev/null` is a nice way to get a minimal new machine booted
[2013-04-29 02:40:35 -0400] djwonk: then I can install chef-server on it
[2013-04-29 02:41:05 -0400] cwj: savagecroc: i havent any experience with other configuration management system, but learning chef and using it to develop infrastructure at my last job and my current one has probably been the best investment of time and effort i've made professionally
[2013-04-29 02:41:27 -0400] cwj: that said, the learning curve can be pretty steep
[2013-04-29 02:41:41 -0400] cwj: you might check out learnchef.com, which is a relatively new resource
[2013-04-29 02:41:47 -0400] savagecroc: cwj: yeah i've built my own deployment systems.. and reading through the chef documention
[2013-04-29 02:41:53 -0400] savagecroc: i found pretty heavy-going
[2013-04-29 02:41:59 -0400] savagecroc: like learning a new language almsot
[2013-04-29 02:43:07 -0400] savagecroc: in terms of deploying ruby applications
[2013-04-29 02:43:36 -0400] savagecroc: sorry like web-applications like ruby-on-rails i'm assuming you build your own
[2013-04-29 02:43:43 -0400] savagecroc: chef recipes to do the deployments
[2013-04-29 02:44:17 -0400] cwj: we use chef for both configuring systems and deploying applications
[2013-04-29 02:44:33 -0400] savagecroc: can you get it to automatically deploy all of your apps?
[2013-04-29 02:44:43 -0400] savagecroc: i.e. if you have 20 apps that you want on a particular server
[2013-04-29 02:45:26 -0400] cwj: sure, but theres more than one way to do it, so getting there will require some thinking about how the deployment should happen
[2013-04-29 02:46:11 -0400] cwj: we use a tool called dreadnot to initiate chef runs which deploy apps from git repos
[2013-04-29 02:46:26 -0400] cwj: some people run chef on an interval
[2013-04-29 02:46:52 -0400] cwj: so every 15 minutes (or whatever) the node might deploy a new version of the app, depending on how you set it up
[2013-04-29 02:48:03 -0400] savagecroc: hmm
[2013-04-29 02:48:09 -0400] savagecroc: we have a manual deployment at the moment
[2013-04-29 02:48:26 -0400] savagecroc: e.g. rake app:deploy APP=myapp STAGE=uat
[2013-04-29 02:48:34 -0400] savagecroc: https://gist.github.com/freedomfreddy/0b9595f385baf4593749 << and it's based of this configuration file
[2013-04-29 02:49:15 -0400] savagecroc: probably is some of the deployments
[2013-04-29 02:49:19 -0400] savagecroc: can be very very tricky
[2013-04-29 02:49:58 -0400] savagecroc: where as other apps, we can deploy to a particular node, and because of how the software is written it doesn't even matter if some nodes are running different versions of the software
[2013-04-29 02:55:13 -0400] cwj: looks like something that you could adapt to a cookbook using the application_ruby cookbook pattern, or something similar
[2013-04-29 02:55:42 -0400] savagecroc: i'll check it out
[2013-04-29 02:55:58 -0400] savagecroc: how long did it take you to get all you recipes in order and have everything setup?
[2013-04-29 03:01:12 -0400] cwj: not sure how to answer that, as it's a process of continuing improvement for us. i inherited some basic chef cookbooks for our products at my current gig, and already had some experience with chef from my last job
[2013-04-29 03:01:49 -0400] savagecroc: ahhh right
[2013-04-29 03:01:57 -0400] cwj: at my last job i had a month or so of difficult learning, in part because i had no experience with ruby
[2013-04-29 03:02:06 -0400] savagecroc: ah right
[2013-04-29 03:02:09 -0400] cwj: and because i was biting off more than i could readily chew
[2013-04-29 03:02:12 -0400] cwj: so start small
[2013-04-29 03:02:19 -0400] savagecroc: i'm thinking of hiring someone just for the server side of stuff
[2013-04-29 03:02:30 -0400] savagecroc: at the moment we've just been sharing the work
[2013-04-29 03:02:34 -0400] savagecroc: between the dev team
[2013-04-29 03:02:43 -0400] savagecroc: but managing the servers has been quite a big job
[2013-04-29 03:02:51 -0400] ssd7: Ohai Chefs
[2013-04-29 03:04:48 -0400] cwj: ohai!
[2013-04-29 03:05:04 -0400] coderanger: ssd7: Make it back home in one piece?
[2013-04-29 03:31:23 -0400] jeremyolliver: I have a question, what cookbook are people using to install mongodb? I'm having some issues with the main one on the community site, and it doesn't seem to have been maintained in a while
[2013-04-29 03:32:05 -0400] jeremyolliver: Or even, is anyone here installing mongodb via chef?
[2013-04-29 04:00:09 -0400] ssd7: coderanger: Yup :)
[2013-04-29 04:11:01 -0400] flaccid: been a while since i did a cookbook contrib, simple one http://tickets.opscode.com/browse/COOK-2820
[2013-04-29 04:12:42 -0400] jeremyolliver: Oh, you can specify the recipes it's used in like that? neat
[2013-04-29 04:13:17 -0400] c_t: ohai
[2013-04-29 05:02:16 -0400] ssd7: flaccid: Do you have a CLA signed?  Once you do you should be able to mark that ticket as "Fix Provided"
[2013-04-29 05:15:25 -0400] waiterjames: need help:~
[2013-04-29 05:15:31 -0400] waiterjames: hello~
[2013-04-29 05:15:52 -0400] waiterjames: my vm access the internet by proxy
[2013-04-29 05:16:37 -0400] waiterjames: when  I try to  " knife  cookbook  site download apache2"
[2013-04-29 05:16:47 -0400] waiterjames: It remind me "Network Error: Error connecting to http://cookbooks.opscode.com/api/v1/cookbooks?........"
[2013-04-29 05:16:56 -0400] waiterjames: How can I solve  this  problem
[2013-04-29 05:17:08 -0400] freezey: can you ping cookbooks.opscode.com?
[2013-04-29 05:17:28 -0400] waiterjames: I'm using the  squid proxy
[2013-04-29 05:17:46 -0400] waiterjames: in fact  I can not  ping  any point
[2013-04-29 05:17:56 -0400] waiterjames: but  I still can  using http
[2013-04-29 05:17:59 -0400] waiterjames: proxy
[2013-04-29 05:18:24 -0400] waiterjames: the  problem about  squid  configuration?
[2013-04-29 05:18:48 -0400] aruntomar: waiterjames: export HTTP_PROXY=[PROXY IP]:[PORT]
[2013-04-29 05:19:22 -0400] waiterjames: Yes I'm already do this :export HTTP_PROXY=[PROXY IP]:[PORT]
[2013-04-29 05:19:25 -0400] aruntomar: waiterjames: and if you want it to be persistent then put that in .bashrc, so that you don't have to type this again and again
[2013-04-29 05:19:49 -0400] waiterjames: and  I can  downlod  http information by wget   or  apt-get
[2013-04-29 05:20:13 -0400] waiterjames: But  for some reason
[2013-04-29 05:20:43 -0400] waiterjames: It seems that  the knife  cannot regronize  the  proxy
[2013-04-29 05:21:16 -0400] kyank: Anyone know why Chef 10.6.2 is no longer available in Rubygems?
[2013-04-29 05:21:51 -0400] kyank: Sorry, 10.16.2.
[2013-04-29 05:22:21 -0400] aruntomar: waiterjames: k, try this http://docs.opscode.com/config_rb_knife.html
[2013-04-29 05:23:04 -0400] aruntomar: waiterjames: set the http_proxy "ip: port" in knife.rb
[2013-04-29 05:23:20 -0400] waiterjames: wao~ awesome . It's just what  I' m really need~~
[2013-04-29 05:24:00 -0400] waiterjames: Thanks ~~
[2013-04-29 05:28:46 -0400] kyank: Actually seems to be an dependency issue.
[2013-04-29 05:28:47 -0400] kyank: ubuntu@ip-10-172-63-180:/tmp$ sudo gem install chef -v 10.16.2
[2013-04-29 05:28:47 -0400] kyank: ERROR:  While executing gem ... (Gem::DependencyError)
[2013-04-29 05:28:47 -0400] kyank:     Unable to resolve dependencies: net-ssh-multi requires net-ssh (>= 2.1.4); chef requires net-ssh (~> 2.2.2); net-ssh-gateway requires net-ssh (>= 2.6.5)
[2013-04-29 05:29:31 -0400] jeremyolliver: kyank: Yeah, bootstrapping an old chef version does not go smoothly sadly, the old bootstrap script doesn't specify versions of some things
[2013-04-29 05:30:10 -0400] kyank: jeremyolliver: Any suggestions, besides upgrading?
[2013-04-29 05:30:37 -0400] jeremyolliver: kyank: you can generally upgrade clients while keeping the chef server on the same version
[2013-04-29 05:31:12 -0400] jeremyolliver: 10.16.2 is still available on rubygems.org though?
[2013-04-29 05:31:17 -0400] kyank: Yeah it is.
[2013-04-29 05:31:31 -0400] kyank: Its just failing dependency checks as it installs.
[2013-04-29 05:31:43 -0400] jeremyolliver: what's the environment you're installing? from the pasted hostname I'm guessing AWS which means this is a chef node?
[2013-04-29 05:31:57 -0400] kyank: jeremyolliver: Correct.
[2013-04-29 05:32:08 -0400] kyank: Ubuntu Precise LTS on AWS.
[2013-04-29 05:32:32 -0400] jeremyolliver: Hmm, well you'll have to manually uninstall and install correct/compatible versions of those gems
[2013-04-29 05:32:38 -0400] kyank: My CloudFormation-managed cluster is trying to replace a bad node and failing because Chef wont install on the new node.
[2013-04-29 05:32:59 -0400] jeremyolliver: so next thing to do is to verify which gem/ruby install chef is using, and that depends on the bootstrap script
[2013-04-29 05:33:14 -0400] jeremyolliver: should be visible in the first shebang line of /usr/bin/chef-client
[2013-04-29 05:34:18 -0400] kyank: jeremyolliver: Once I get Chef installing again, you mean?
[2013-04-29 05:34:19 -0400] jeremyolliver: kyank: what is the first line of the /usr/bin/chef-client file?
[2013-04-29 05:34:52 -0400] jeremyolliver: Oh, right if it didn't get that far
[2013-04-29 05:35:00 -0400] kyank: :)
[2013-04-29 05:35:26 -0400] jeremyolliver: does /opt/chef/embedded/bin/gem exist? If not, I'm assuming it's installing to system ruby
[2013-04-29 05:36:02 -0400] jeremyolliver: if it does run "/opt/chef/embedded/bin/gem list" otherwise just "gem list"
[2013-04-29 05:37:04 -0400] jeremyolliver: you're going to have to check a bunch of dependencies on rubygems.org for older gem versions
[2013-04-29 05:38:31 -0400] jeremyolliver: e.g. current issue is net-ssh-gateway, so browsing https://rubygems.org/gems/net-ssh-gateway and then picking the next oldest version we see https://rubygems.org/gems/net-ssh-gateway/versions/1.1.0 which has a dependency which will be compatible with the net-ssh (~> 2.2.2) dependency
[2013-04-29 05:38:59 -0400] jeremyolliver: so you need to gem uninstall net-ssh-gateway and then "gem install net-ssh-gateway --version=1.1.0"
[2013-04-29 05:39:23 -0400] jeremyolliver: and continue the process (e.g. bootstrap again) and see if there's any more dependency issues
[2013-04-29 05:39:50 -0400] jeremyolliver: I had to do this recently for an old install still running chef 10.10
[2013-04-29 05:40:20 -0400] jeremyolliver: and I ended up copying the chef boostrap script for ubuntu that was packaged with the version of chef that I was on
[2013-04-29 05:41:02 -0400] jeremyolliver: and putting the copy within .chef/bootstrap/ubuntu-custom.erb (within my chef-repo)
[2013-04-29 05:42:08 -0400] jeremyolliver: and editing the install script to have specific versions e.g.: edit part to look like this: https://gist.github.com/jeremyolliver/5479892
[2013-04-29 05:42:36 -0400] jeremyolliver: those are actually probably the same version numbers you need if you want to successfully install that old chef-client version
[2013-04-29 05:43:01 -0400] jeremyolliver: you can specify to use your modified bootstrap script by using --distro=ubuntu-custom in the knife bootstrap command
[2013-04-29 05:43:36 -0400] jeremyolliver: kyank: As you can probably see from how complicated that was, I might well recommend simply upgrading the chef-client version :)
[2013-04-29 05:45:30 -0400] jeremyolliver: I've got to go now, but hopefully that helps
[2013-04-29 05:49:54 -0400] flaccid: ssd7: yes i do, i will try to change to Fix Provided
[2013-04-29 05:51:05 -0400] flaccid: ssd7: where do i change this sorry, i can't find
[2013-04-29 05:52:59 -0400] ssd7: flaccid: Hrm, it seems that your JIRA account doesn't have the correct permissions
[2013-04-29 05:53:32 -0400] ssd7: flaccid: Did you sign the CLA recently?
[2013-04-29 05:54:33 -0400] flaccid: ssd7: i signed it today, even though i have done it in the past with the email address for the jira
[2013-04-29 05:54:50 -0400] flaccid: i changed email, but the jira account should be using the original signed one long time ago
[2013-04-29 05:56:39 -0400] ssd7: flaccid: Ahh.  It'll probably be fixed up on Monday when the person who looks at incomming CLAs is in.  I'll make a note to check tomorrow.
[2013-04-29 05:57:00 -0400] smt: want to use sudo cookbook to run some commands as nopassword on osx. Can anyone help me in that ?
[2013-04-29 05:57:18 -0400] flaccid: ssd7: thank you kindly
[2013-04-29 05:57:33 -0400] flaccid: smt: whats teh problem with it
[2013-04-29 06:00:12 -0400] smt: flaccid: So I am bit confused in using this cookbook . Not getting proper doc. to how to use attributes . Also it does not support osx platform
[2013-04-29 06:00:50 -0400] flaccid: smt: the readme should have what you need. if it doesn't support os x properly, you can consider contribution to help with that
[2013-04-29 06:02:40 -0400] smt: flaccid: basically I want to run sudo chef-client command on mac osx without password
[2013-04-29 06:03:19 -0400] smt: flaccid: I am new to chef.
[2013-04-29 06:03:29 -0400] flaccid: smt: that really isn't anything to do with chef
[2013-04-29 06:03:39 -0400] flaccid: to do that on mac os x, you just need to be an admin
[2013-04-29 06:06:12 -0400] smt: flaccid: Is my approach right to use sudo cookbook ?
[2013-04-29 06:06:33 -0400] flaccid: smt: considering it doesn't support os x, no.
[2013-04-29 06:06:40 -0400] flaccid: smt: read what i said above. learn os x.
[2013-04-29 06:06:56 -0400] flaccid: i have a mac right next to me. i have admin. i am doing sudo with no password absolutely fine.
[2013-04-29 06:07:55 -0400] smt: flaccid: ok. thanks for the help.
[2013-04-29 06:08:08 -0400] flaccid: my pleasure
[2013-04-29 06:59:02 -0400] kyank: Anyone here familiar with bootstrapping Chef on EC2 with http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz ?
[2013-04-29 07:02:38 -0400] flaccid: kyank: is that someting provided by opscode?
[2013-04-29 07:03:35 -0400] kyank: flaccid: Yes, it is.
[2013-04-29 07:03:57 -0400] flaccid: kyank: whats the issue with it?
[2013-04-29 07:04:03 -0400] kyank: Its an archive of cookbooks designed to be run by Chef Solo to bootstrap a Chef Client or Chef Server installation.
[2013-04-29 07:04:07 -0400] flaccid: and can you refer the document
[2013-04-29 07:04:25 -0400] flaccid: i see
[2013-04-29 07:05:00 -0400] kyank: flaccid: Looks like it might be obsolete. http://wiki.opscode.com/display/chef/Installing+Chef+Server+using+Chef+Solo
[2013-04-29 07:05:24 -0400] flaccid: kyank: see if its on http://docs.opscode.com/
[2013-04-29 07:11:50 -0400] Cope: kyank: what are you trying to do?
[2013-04-29 07:11:57 -0400] Cope: oh sorry
[2013-04-29 07:12:04 -0400] Cope: flaccid: what are -you- trying to do?
[2013-04-29 07:12:16 -0400] Cope: no - right first time
[2013-04-29 07:12:23 -0400] flaccid: yeah i'm trying to drink a beer atm
[2013-04-29 07:13:11 -0400] kyank: kyank: My CloudFormation/Chef setup has broken. Looks like bootstrapping Chef 10.x on Ruby 1.8 is no longer working
[2013-04-29 07:13:25 -0400] kyank: Er, that was for Cope./
[2013-04-29 07:13:33 -0400] kyank: Still trying to figure it out.
[2013-04-29 07:13:47 -0400] flaccid: kyank: doesn't work, doesn't help
[2013-04-29 07:13:49 -0400] Cope: kyank: it's generally recommended to use Opscode's vendored packages.   They contain everything you need.
[2013-04-29 07:14:03 -0400] kyank: Yep, Im working on switching to installing Chef Client with apt.
[2013-04-29 07:14:03 -0400] Cope: http://opscode.com/chef/install
[2013-04-29 07:14:15 -0400] Cope: i wouldn't do that either
[2013-04-29 07:14:18 -0400] flaccid: omnibus works great
[2013-04-29 07:14:28 -0400] Cope: just use the Omnibus package
[2013-04-29 07:14:32 -0400] kyank: I need to script it with ClodFormation.
[2013-04-29 07:14:47 -0400] kyank: And I want to use Chef 10.x right now. Omnibus gives me 11.x.
[2013-04-29 07:14:56 -0400] flaccid: so, if you aint going to specify a problem, i'll assume there isn't one.
[2013-04-29 07:14:59 -0400] Cope: kyank: you can specify the version you need
[2013-04-29 07:15:08 -0400] Cope: kyank: you can also download the deb package for 10.x
[2013-04-29 07:15:13 -0400] flaccid: use -v 10.24.0
[2013-04-29 07:15:14 -0400] kyank: 10.24.4 is what Im going for.
[2013-04-29 07:15:18 -0400] flaccid: ^^
[2013-04-29 07:15:19 -0400] Cope: which contains everything and vendors it in /opt
[2013-04-29 07:16:15 -0400] kyank: Yeah, downloading the deb package might be my best bet.
[2013-04-29 07:17:29 -0400] kyank: flaccid: Where do I use -v 10.24.0 in the Omnibus install?
[2013-04-29 07:17:49 -0400] kyank: curl -L https://www.opscode.com/chef/install.sh | sudo bash -v 10.24.0
[2013-04-29 07:17:53 -0400] kyank: Is that what youre suggesting?
[2013-04-29 07:22:39 -0400] kyank: Once I have Chef installed, I want to use Chef Solo to install Chef-Client as a service. Are there current docs for that? Having trouble finding them.
[2013-04-29 07:30:24 -0400] Cope: kyank: there's a chef-client cookbook
[2013-04-29 07:30:49 -0400] kyank: Cope: Yes, Im just working through how best to get it onto my nodes.
[2013-04-29 07:31:37 -0400] kyank: Cope: http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz contains it, but its erroring on me with Chef 10.24.4 so I suspect its out of date.
[2013-04-29 07:35:51 -0400] kyank: I dont suppose anyone in here is using AWS CloudFormation to automate a chef-client install?
[2013-04-29 07:44:36 -0400] Cope: kyank: I have done before, but a long time ago
[2013-04-29 08:02:16 -0400] flaccid: kyank left, so can't really help now - obviously wrong.. 7] <kyank> curl -L https://www.opscode.com/chef/install.sh | sudo bash -v 10.24.0
[2013-04-29 08:20:16 -0400] nebrera: helllo
[2013-04-29 08:20:25 -0400] nebrera: I have installed blank centos
[2013-04-29 08:20:34 -0400] nebrera: and install chef-server ...rpm
[2013-04-29 08:20:37 -0400] nebrera: and I get this error
[2013-04-29 08:20:37 -0400] nebrera: http://pastebin.com/k3hLa3xR
[2013-04-29 08:41:38 -0400] GreatSUN: hi all
[2013-04-29 08:54:08 -0400] GreatSUN: can someone of you guys help me with a dependency problem on windows?
[2013-04-29 08:54:27 -0400] GreatSUN: on linux it seames to work
[2013-04-29 08:54:44 -0400] GreatSUN: I got a library from another cookbook which I am using
[2013-04-29 08:55:09 -0400] GreatSUN: dependency added to metadata.rb via depends "<cookbook>"
[2013-04-29 08:55:31 -0400] GreatSUN: on linux I can call the library, on windows it doesn't work out
[2013-04-29 08:56:19 -0400] kyank: Im working on upgrading from Chef 10.16 to 10.24, and Im getting this error with a lot of older cookbooks:
[2013-04-29 08:56:19 -0400] kyank: wrong number of arguments (2 for 1)
[2013-04-29 08:56:36 -0400] Cope: GreatSUN: details?
[2013-04-29 08:56:45 -0400] kyank: Known compatibility issue?
[2013-04-29 08:57:09 -0400] kyank: The error is happening in lib/chef/resource.rb line 734:
[2013-04-29 08:57:10 -0400] kyank: if Chef::Resource.const_defined?(class_name, false)
[2013-04-29 08:57:41 -0400] Cope: kyank: it would help if you pasted the full error, and told us which cookbooks and versions
[2013-04-29 08:58:36 -0400] woltage: Have someone tried chef-zero+Berkshelf? Can't upload any cookbooks to the zero with berkshefl. No problems with knife.
[2013-04-29 08:59:40 -0400] kyank: Cope: https://gist.github.com/sentience/5480507
[2013-04-29 09:00:06 -0400] GreatSUN: Cope: got it already :D
[2013-04-29 09:00:17 -0400] kyank: The cookbook thats erroring: https://github.com/opscode-cookbooks/dmg
[2013-04-29 09:00:41 -0400] GreatSUN: simple: if you are not able to type a simple word, leave it and don't disturb others :D
[2013-04-29 09:00:44 -0400] Cope: woltage: not tried it; but Berkshelf uses Ridley as its API client.  Could be that Ridley doesn't yet work with Chef zero
[2013-04-29 09:01:08 -0400] Cope: GreatSUN: hmm? you fixed it already?
[2013-04-29 09:02:32 -0400] woltage: Cope: must be. Ridley throws execptions, I think it can't handle the auth.
[2013-04-29 09:02:40 -0400] alex_: hey is it possible to use one command toe create a node with json and runlist
[2013-04-29 09:02:42 -0400] alex_: ?
[2013-04-29 09:03:04 -0400] alex_: like a bootstrap but without installing chef
[2013-04-29 09:04:11 -0400] kyank: Official Opscode DMG cookbook (latest version 1.1.0) is erroring out for me on Chef 10.24.4. "wrong number of arguments (2 for 1)" Full error: https://gist.github.com/sentience/5480507 Ideas?
[2013-04-29 09:05:18 -0400] Cope: alex_: from what perspective? you can do that with knife bootstrap, or chef-client takes json to give it a preliminary run list
[2013-04-29 09:05:35 -0400] Cope: kyank: sorry I don't have time to dig in - but good luck
[2013-04-29 09:06:02 -0400] kyank: Aha. Looks like a bug in Chef 10.24.4: http://tickets.opscode.com/browse/CHEF-4123
[2013-04-29 09:06:41 -0400] Cope: GreatSUN: not sure I understand - I'm just saying we'd be better able to help you if you gave details.  You haven't said which cookbook, which version, or given a paste of the actual error, so it's guesswork without that info.
[2013-04-29 09:06:48 -0400] GreatSUN: Cope: if you type the wrong name, it can't find it... you should be able to see it yourself instead of worrying others ;-)
[2013-04-29 09:07:08 -0400] Cope: GreatSUN: oh ok :)
[2013-04-29 09:07:32 -0400] Cope: GreatSUN: i thought I'd upset you with a curt one word "details?" reply :)
[2013-04-29 09:07:52 -0400] alex_: Cope i have chef installed on a zone but never run it yet now i want the first run to register himself and place the runlist and json
[2013-04-29 09:09:21 -0400] GreatSUN: Cope: nope... it was a simple misspelling error
[2013-04-29 09:09:31 -0400] Cope: alex_: ok :) so - chef-client takes a -j --json-attributes argument
[2013-04-29 09:09:35 -0400] GreatSUN: Cope: but I haven't seen it a couple of times
[2013-04-29 09:10:03 -0400] Cope: alex_: pass it a file with a json runlist, and you'll be there
[2013-04-29 09:11:09 -0400] nebrera: do I need to install more software dependency tu run chef-server ?
[2013-04-29 09:11:47 -0400] Cope: nebrera: if you use the omnibus chef server package, it includes everything you need
[2013-04-29 09:12:50 -0400] nebrera: I have installed chef-server-11.0.6-1.el6.x86_64
[2013-04-29 09:12:56 -0400] nebrera: and I get error
[2013-04-29 09:13:15 -0400] nebrera: http://pastebin.com/k3hLa3xR
[2013-04-29 09:13:35 -0400] nebrera: is this rpm omnibus chef server package
[2013-04-29 09:13:46 -0400] nebrera: ?
[2013-04-29 09:14:32 -0400] Cope: what happens when you run: curl -sf http://localhost:8000/_status
[2013-04-29 09:14:42 -0400] alex_: Cope ah oke and than it will be saved on the chef server asswel?
[2013-04-29 09:14:53 -0400] Cope: alex_: if the chef run completes without error
[2013-04-29 09:15:28 -0400] nebrera: nothing
[2013-04-29 09:15:35 -0400] nebrera: echo $? -> returns 22
[2013-04-29 09:15:42 -0400] Cope: we knew that from the error :)
[2013-04-29 09:15:50 -0400] Cope: so is anything listening on 8000?
[2013-04-29 09:16:17 -0400] nebrera: [root@centos-basic01 ~]# netstat --inet -apn |grep -i 8000   -> tcp        0      0 127.0.0.1:8000              0.0.0.0:*                   LISTEN      2354/beam.smp
[2013-04-29 09:16:24 -0400] nebrera: there is no firewall rules
[2013-04-29 09:17:31 -0400] Cope: nebrera: hmm - so there's an erlang process listening; but it's not responding
[2013-04-29 09:17:37 -0400] nebrera: yes
[2013-04-29 09:17:58 -0400] Cope: curious - afraid I have to dash now; hopefully someone else will be able to help meanwhile.
[2013-04-29 09:18:07 -0400] Cope: back in a bit
[2013-04-29 09:18:20 -0400] nebrera: I hope too
[2013-04-29 09:20:35 -0400] GreatSUN: ok guys
[2013-04-29 09:20:42 -0400] GreatSUN: now I have a real "problem"
[2013-04-29 09:21:16 -0400] GreatSUN: I am using directory provider to create directory on windows with recursive true and action create
[2013-04-29 09:21:26 -0400] GreatSUN: but it neither fails, nor creates the directory
[2013-04-29 09:21:30 -0400] GreatSUN: any idea why?
[2013-04-29 09:23:43 -0400] aruntomar: GreatSUN: which version of chef are you using?
[2013-04-29 09:26:03 -0400] GreatSUN: 10.12.0
[2013-04-29 09:26:09 -0400] GreatSUN: aruntomar:
[2013-04-29 09:31:58 -0400] aruntomar: GreatSUN: and you are using chef-solo or chef-server?
[2013-04-29 09:32:20 -0400] GreatSUN: chef-server atm
[2013-04-29 09:32:30 -0400] aruntomar: you should be able to run the chef-client in debug mode to get more information on why things are not working
[2013-04-29 09:32:35 -0400] aruntomar: chef-client -l debug
[2013-04-29 09:32:37 -0400] GreatSUN: aruntomar: is there some known bug?
[2013-04-29 09:32:48 -0400] GreatSUN: aruntomar: I did, but didn't see anything
[2013-04-29 09:33:00 -0400] aruntomar: GreatSUN: i don't work on windows node much, so i'm not aware of it
[2013-04-29 09:34:08 -0400] aruntomar: GreatSUN: upgrade your chef-client to the latest version https://opscode-omnibus-packages.s3.amazonaws.com/windows/2008r2/x86_64/chef-client-11.4.4-1.windows.msi
[2013-04-29 09:34:19 -0400] aruntomar: and then run it in debug mode
[2013-04-29 09:34:59 -0400] aruntomar: GreatSUN: chef-client version 11 and above, give very good information and debug output
[2013-04-29 09:47:59 -0400] GreatSUN: aruntomar: ok, I found the problem
[2013-04-29 09:48:16 -0400] aruntomar: GreatSUN: what was it
[2013-04-29 09:48:28 -0400] GreatSUN: it tries to download a file to a directory not existing
[2013-04-29 09:48:46 -0400] GreatSUN: even though the directory provider is called before in the script
[2013-04-29 09:49:07 -0400] GreatSUN: but it doesn't create the directory before
[2013-04-29 09:49:12 -0400] aruntomar: GreatSUN: k
[2013-04-29 09:49:29 -0400] GreatSUN: any idea how I can secure the directory provider gets called before the remote_file ?
[2013-04-29 09:49:39 -0400] Cope: GreatSUN: can you show us your recipe?
[2013-04-29 09:49:59 -0400] GreatSUN: it's not in the same state as before
[2013-04-29 09:50:03 -0400] GreatSUN: looks horrible atm
[2013-04-29 09:50:04 -0400] aruntomar: GreatSUN: well in chef sequence matters, so it's weird that if create directory is 1 and download file is 2, then it's downloading the file first.
[2013-04-29 09:50:28 -0400] GreatSUN: aruntomar: I had this kind of issues already
[2013-04-29 09:50:47 -0400] GreatSUN: aruntomar: it has to do with surrounding ruby-code
[2013-04-29 09:51:19 -0400] aruntomar: GreatSUN: use chef-shell, and try this particular R&D there
[2013-04-29 09:51:21 -0400] GreatSUN: but I don't know how to solve this without creating some new library or likewise
[2013-04-29 09:51:40 -0400] GreatSUN: aruntomar: never used chef-shell
[2013-04-29 09:51:49 -0400] Cope: GreatSUN: srsly we can't help if you don't show us the code! don't worry if it's horrible - we've all written and/or got horrible code :)
[2013-04-29 09:52:04 -0400] GreatSUN: Cope: kk
[2013-04-29 09:52:24 -0400] GreatSUN: Cope: I will extract the problematic part of it
[2013-04-29 09:52:27 -0400] Cope: okay
[2013-04-29 09:53:02 -0400] aruntomar: GreatSUN: chef-shell is basically a modified irb for chef
[2013-04-29 09:53:27 -0400] aruntomar: GreatSUN: you could use it something like this: https://gist.github.com/aruntomar/5480702
[2013-04-29 09:56:17 -0400] GreatSUN: http://nopaste.info/78e6f2b343.html
[2013-04-29 09:56:24 -0400] GreatSUN: thats the code that fails
[2013-04-29 09:59:01 -0400] GreatSUN: Cope. aruntomar: do you see anything that I am doing wrong there?
[2013-04-29 10:00:54 -0400] aruntomar: GreatSUN: please paste the output of chef run
[2013-04-29 10:09:34 -0400] GreatSUN: oh well
[2013-04-29 10:09:40 -0400] GreatSUN: I found the problem
[2013-04-29 10:10:42 -0400] GreatSUN: I have some Ruby-Code working with Gem::Package
[2013-04-29 10:10:49 -0400] GreatSUN: this is executed before the providers
[2013-04-29 10:10:57 -0400] GreatSUN: and results in a file not found
[2013-04-29 10:11:30 -0400] aruntomar: GreatSUN: cool
[2013-04-29 10:18:57 -0400] Cope: GreatSUN: i had a feeling it'd be somethng like that :)
[2013-04-29 10:58:57 -0400] nebrera_: helllo someone could help me with chef-server omnibus build ?
[2013-04-29 11:13:48 -0400] PierreO: Hi nebrera_ maybe :) I'm working on this right now also :)
[2013-04-29 11:14:23 -0400] nebrera_: have you executed?:  bin/omnibus build project chef-server
[2013-04-29 11:14:47 -0400] nebrera_: I am getting error fetching pcre but the link is broken
[2013-04-29 11:15:03 -0400] PierreO: Hum.. First, from what I understand, there is no more omnibus thing with chef-server : http://docs.opscode.com/install_server.html
[2013-04-29 11:15:25 -0400] PierreO: (At least for the version 11)
[2013-04-29 11:15:38 -0400] nebrera_: https://github.com/opscode/omnibus-chef-server#readme
[2013-04-29 11:18:26 -0400] PierreO: I'm afraid I can't help then sorry..
[2013-04-29 11:18:46 -0400] nebrera_: what are you working with ?
[2013-04-29 11:21:01 -0400] PierreO: the doc I sent to you earlier : http://docs.opscode.com/install_server.html
[2013-04-29 11:22:21 -0400] PierreO: I didn't know this method, and It seems interesting too :)
[2013-04-29 11:23:19 -0400] nebrera_: are you using the rpm ?
[2013-04-29 11:29:31 -0400] nebrera_: did you get error with verify-system-status ?
[2013-04-29 11:30:17 -0400] PierreO: I'm using the deb, on debian and everything is working :)
[2013-04-29 11:31:11 -0400] nebrera_: do you have created /etc/chef directory ?
[2013-04-29 11:31:29 -0400] PierreO: I hacked a bit to make the ubuntu package working in debian, but it's fine now (I want to update the doc to share my progress)
[2013-04-29 11:31:45 -0400] PierreO: I don't have to create one, it is created by the package
[2013-04-29 11:31:56 -0400] nebrera_: and what does it have in ?
[2013-04-29 11:32:01 -0400] PierreO: nothing
[2013-04-29 11:32:02 -0400] nebrera_: mine is empty
[2013-04-29 11:32:33 -0400] nebrera_: is port 4000 open ?
[2013-04-29 11:32:46 -0400] nebrera_: netstat --inet -apn --inet6 |grep 4000
[2013-04-29 11:32:50 -0400] nebrera_: mine is empty tooo
[2013-04-29 11:33:01 -0400] PierreO: Then, as specified in the doc (http://docs.opscode.com/install_workstation.html) you should run : knife configure --initial
[2013-04-29 11:33:29 -0400] PierreO: in the version 11, I think (not sure yet) that the 4000 and 4040 are not use anymore
[2013-04-29 11:33:32 -0400] PierreO: just https
[2013-04-29 11:34:22 -0400] PierreO: yeah well, sorry, knife configure initial will not populate your /etc/chef, but rather your ~/.chef
[2013-04-29 11:38:39 -0400] nebrera_: what is the https port ?
[2013-04-29 11:49:29 -0400] GreatSUN: ok
[2013-04-29 11:49:46 -0400] GreatSUN: again something I don't understand...
[2013-04-29 11:50:03 -0400] GreatSUN: hopefully again minimal problem like I had them a couple of times now
[2013-04-29 11:50:17 -0400] GreatSUN: I have to extract some tar.gz file on windows
[2013-04-29 11:50:57 -0400] GreatSUN: solution I found was using tarreader, zlib::gzipreader and create directory/files via ruby-commands
[2013-04-29 11:51:35 -0400] GreatSUN: it works until some point... then it tells me, that it does not have permission
[2013-04-29 11:53:31 -0400] GreatSUN: is there anyone that had such an error before or has another/better solution for me?
[2013-04-29 11:54:25 -0400] PierreO: nebrera_ the default 443, but you don't have to specify it
[2013-04-29 12:10:38 -0400] nebrera_: the problem is knife.rb has -> chef_server_url          'http://localhost:4000'
[2013-04-29 12:11:43 -0400] PierreO: yes, this is the default (even in chef 11, I understand why), but you can/have to change it!
[2013-04-29 12:11:58 -0400] PierreO: *I don't understand
[2013-04-29 12:13:39 -0400] nebrera_: change to which value ?
[2013-04-29 12:15:35 -0400] s2r2: Hmm anybody else experience problems with apache2::mod_{headers,expires,rewrite}?  It seems like nothing happens
[2013-04-29 12:20:27 -0400] masterkorp: hello chefs
[2013-04-29 12:24:38 -0400] fclausen: hello all, what is the best way of printing debug output from a recipe while testing? Right now I am just using "puts" which does not blend well with the rest of the output
[2013-04-29 12:28:16 -0400] laurent\: is there a way to detect an data bag entry is encrypted ?
[2013-04-29 12:29:00 -0400] Katafalkas: anyone had any problems installing chef server on ec2 ubuntu 12.04 instance ?
[2013-04-29 12:29:30 -0400] laurent\: chef > Chef::DataBagItem.methods.grep(/encrypt/) => []
[2013-04-29 12:30:11 -0400] jschneiderhan: fclausen: you can use Chef::Log.debug("message") and run chef with the --log_level debug flag
[2013-04-29 12:40:14 -0400] GreatSUN: looks like extraction is not working correct within windows for tar.gz files
[2013-04-29 12:40:45 -0400] GreatSUN: at least not with tarreader, zlib::gzipreader
[2013-04-29 12:43:50 -0400] GreatSUN: can anyone tell me how to extract tar.gz within windows without problems?
[2013-04-29 12:46:39 -0400] glenbot: I'm trying to autogenerate a key with tarsnap CLI using expect. The script works fine running it manually from the shell, but when chef runs it, it creates a 0 byte key file. Here is the snippet http://dpaste.org/ubyvm/ -- I feel like I am not quoting something correctly
[2013-04-29 12:46:58 -0400] Cope: GreatSUN: you should have gnu tar as part of chef, if you used the omnibus package
[2013-04-29 12:49:45 -0400] countdigi: fclausen: Chef::Log.debug("foo") is one way
[2013-04-29 12:50:40 -0400] countdigi: ah missed jschneiderhan line above :-)
[2013-04-29 12:55:29 -0400] GreatSUN: Cope: do you know how I could find out, if it is part?
[2013-04-29 13:00:26 -0400] Cope: GreatSUN: it is; so if you installed Chef from omnibus, you have gnu tar
[2013-04-29 13:03:45 -0400] atyz: Hi all. I'm new to working with chef-server and chef. I'm trying to setup chef server and as a result i found this http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/. However after installing it I'm unable to find the chef-server webui
[2013-04-29 13:04:15 -0400] atyz: am i missing something?
[2013-04-29 13:07:33 -0400] adamjk-dev: atyz: where did you install the server?
[2013-04-29 13:07:41 -0400] adamjk-dev: atyz: https://localhost
[2013-04-29 13:08:47 -0400] atyz: adamjk-dev: i installed it on an ec2 instance - i have opened all the ports
[2013-04-29 13:08:59 -0400] atyz: i have a FQDN setup
[2013-04-29 13:09:27 -0400] adamjk-dev: atyz: well, Chef server 11 just uses the standard HTTPS port
[2013-04-29 13:09:41 -0400] adamjk-dev: so: https://<FQDN>
[2013-04-29 13:09:44 -0400] atyz: ahh that verywell might be it
[2013-04-29 13:10:19 -0400] atyz: unfortunately i just nuked the installation to try something else. I'll try it with that again
[2013-04-29 13:10:48 -0400] adamjk-dev: atyz: yeah, that should work fine
[2013-04-29 13:15:10 -0400] GreatSUN: Cope: it is there, thanks a lot
[2013-04-29 13:15:23 -0400] jwitrick: Is there a way in the metadata file to specify the location of a cookbook identified by 'depends' ?
[2013-04-29 13:15:58 -0400] glenbot: when chef runs the "bash" resource does it create a temp file that it runs? I see execute "bash"  "/tmp/chef-script20130429-22401-1wc8glk" in the logs and im running watch to see if it creates a file and removes it but I can't seem to snag it, is it using a "/tmp" relative to a chef directory?
[2013-04-29 13:16:23 -0400] atyz: adamjk-dev: i forgot to say thank you :)
[2013-04-29 13:17:50 -0400] adamjk-dev: atyz: Oh, sure thing. thanks
[2013-04-29 13:17:58 -0400] PierreO: nebrera_ change it to : https://localhost (or https://FQDN )
[2013-04-29 13:18:50 -0400] Cope: jwitrick: what do you mean by location?
[2013-04-29 13:19:40 -0400] jwitrick: Cope: I have a bunch of internal cookbooks and I have them in my metadata file, but when I run the 'berks' command i get an error saying cannot find the specified cookbook
[2013-04-29 13:19:54 -0400] Cope: PierreO: really? erchef listens on 8000 - nginx handles the ssl termination and proxies it.
[2013-04-29 13:22:54 -0400] jwitrick: Cope: nm. The workaround is to manually specify the cookbook in the Berkshelf file with the git path.
[2013-04-29 13:42:25 -0400] masterkorp: Guys do you know any cookbook to set and install knife ?
[2013-04-29 14:00:05 -0400] fclausen: countdigi: thanks for your logging answer above - got distraced and missed it
[2013-04-29 14:00:13 -0400] fclausen: * distracted
[2013-04-29 14:00:39 -0400] fclausen: jschneiderhan: also thanks for the logging tip
[2013-04-29 14:10:07 -0400] geekbri: So uh, I am pretty sure that the opscode website is all jacked up for account management
[2013-04-29 14:10:16 -0400] geekbri: At least my experience with chrome has been unpleasant :)
[2013-04-29 14:11:53 -0400] masterkorp: damm i can't find it
[2013-04-29 14:32:55 -0400] et1337: Could someone take a look at this StackOverflow question regarding a weird RSA issue? I'm stumped. http://stackoverflow.com/questions/16245429/chef-server-generating-bad-public-keys
[2013-04-29 14:54:11 -0400] tenori: hey everyone - I don't suppose anyone on here is successfully using knife-azure to create windows vms?
[2013-04-29 14:55:50 -0400] awgross: i think most of the Chef's are still recovering from ChefConf
[2013-04-29 14:56:08 -0400] coderanger: Confirmed that Monday mornings are eeeevil
[2013-04-29 14:56:45 -0400] awgross: haha
[2013-04-29 14:56:53 -0400] coderanger: Also the json gem
[2013-04-29 14:57:04 -0400] awgross: im pretty sure nathan harvey is going to sleep for a week
[2013-04-29 14:57:18 -0400] awgross: we maay have also gotten him pretty drunk on Sat. night
[2013-04-29 14:57:28 -0400] Katafalkas: Hey, I am new to chef and to Ruby. Going through the quick start tutorial. There is a Common Use Cases section on "Multi-Node EC2", It is asking to add a Gemfile. How do I do that ? and where should it go ?
[2013-04-29 15:00:44 -0400] awgross: Katafalkas: it should go in you local chef stuff
[2013-04-29 15:00:52 -0400] awgross: inside chef-repo
[2013-04-29 15:01:24 -0400] awgross: same thing with the "Berksfile" it wants you to create after that
[2013-04-29 15:01:25 -0400] Katafalkas: awgross: in the chef-repo root dir ?
[2013-04-29 15:01:25 -0400] Katafalkas: u mean
[2013-04-29 15:01:39 -0400] awgross: Katafalkas: yes
[2013-04-29 15:01:50 -0400] awgross: after you did the git clone, you should have a chef-repo directory
[2013-04-29 15:02:09 -0400] awgross: inside of that you want to create a new file and name it Gemfile, and put those things in the file
[2013-04-29 15:02:24 -0400] Katafalkas: awgross: cheers
[2013-04-29 15:02:27 -0400] Katafalkas: <3
[2013-04-29 15:02:31 -0400] awgross: np
[2013-04-29 15:03:51 -0400] coderanger: Is there any way to see why bundler thinks it needs a particular gem?
[2013-04-29 15:04:07 -0400] coderanger: KEeps trying to pull in json-1.6.1 which won't compile on ruby2
[2013-04-29 15:04:09 -0400] coderanger: >_<
[2013-04-29 15:05:54 -0400] glenbot: i resolved my previous questions -- http://dpaste.org/IOO0d/ -- I was missing 'expect eof'
[2013-04-29 15:06:41 -0400] aruntomar: hi! when i delete an ec2 instance using "knife ec2 server delete <server id>" the ebs volume for that instance is not deleted, and we keep getting billed/charged for the same. Has anyone else noticed this event or can someone confirm it.
[2013-04-29 15:07:52 -0400] leifmadsen: I think I noticed that too
[2013-04-29 15:07:57 -0400] leifmadsen: had to go back through and delete them manually
[2013-04-29 15:08:11 -0400] leifmadsen: but it's been several months since I did that
[2013-04-29 15:08:16 -0400] leifmadsen: new job doesn't use EC2
[2013-04-29 15:10:11 -0400] awgross: aruntomar: is it the base EBS volume, or attached ones
[2013-04-29 15:10:24 -0400] aruntomar: leifmadsen: thanks
[2013-04-29 15:10:30 -0400] aruntomar: awgross: base ebs volumes
[2013-04-29 15:10:46 -0400] awgross: aruntomar: interesting, submit a bug report perhaps?
[2013-04-29 15:11:38 -0400] aruntomar: awgross: i'm testing it again, and will certainly submit the bug report, and that's why i wanted to confirm from the community, if they have noticed the same thing.
[2013-04-29 15:11:55 -0400] zts: aruntomar: did you create the instance using "knife ec2 server create", or some other way?
[2013-04-29 15:12:12 -0400] aruntomar: zts: knife ec2 server create
[2013-04-29 15:14:38 -0400] zts: aruntomar: there is a "--ebs-no-delete-on-term" option, but the default should be to delete the volume - I'm pretty sure it used to work, but it has been a while since I've used it
[2013-04-29 15:15:19 -0400] zts: aruntomar: definitely worth submitting a bug report if that's not working as expected though
[2013-04-29 15:16:55 -0400] aruntomar: zts: sure
[2013-04-29 15:17:27 -0400] zts: (especially since I think I will be using that again in the near future :)
[2013-04-29 15:18:59 -0400] directionless: Hi folks, I'm trying create a directory of files that's controlled by chef. I'm trying to find a suitable idiom to handle deleting the ones that don't have current resources. I'm playing with the managed_directory cookbook (hi zts), but it seems to be triggering a cleaning *before* the other resources are delcared
[2013-04-29 15:19:33 -0400] directionless: Is there a better idiom for this, or is there a way to defer the run of managed_directory's cleaning till later?
[2013-04-29 15:20:23 -0400] aruntomar: zts: actually, inspite of deleting all the ec2 instances from my test account, i was still getting billed. then i checked the bill and it mentioned ebs usage and then found from the aws console that all those ebs volumes were lying there and i was getting charged for it. at that time i was using chef 10. now i'm on chef11 so, trying to confirm the same before submitting the bug report.
[2013-04-29 15:21:31 -0400] zts: aruntomar: it'll be the version of the knife-ec2 gem that matters, as the issue is whether or not the "delete on termination" option is set when the volume is created
[2013-04-29 15:21:35 -0400] skarufue: hello. is there a good provider to parse config files (Yaml) found on a node. and make their values available in a chef run?
[2013-04-29 15:22:04 -0400] zts: aruntomar: but worth confirming it with the latest version of knife-ec2, for sure
[2013-04-29 15:23:51 -0400] zts: directionless: hrm, managed_directory should just run at the point it appears in the run list (it doesn't force action during the compile phase life chef_gem, for example)
[2013-04-29 15:24:25 -0400] zts: directionless: are the resources in question declared in recipes, or by LWRPs?  I can imagine the latter case might cause a problem
[2013-04-29 15:25:06 -0400] directionless: zts: declared by LWRPs, in a variety of cookbooks. It seems like delaying the cleaning run would probably work, though chef's support for that seems weak
[2013-04-29 15:26:36 -0400] Katafalkas: Hey, Is there some nice tutorial on chef cookbooks for people without prior knowledge of Ruby ? I am going through the official opscode documentation, but none of them seem to have a beguiners approach to cookbooks
[2013-04-29 15:27:19 -0400] zts: directionless: yeah, if you make sure it's the last recipe on your run list (or, at least, comes after any LWRPs), then that should be okay - unless the LWRPs use "inline compile" mode, in which case it might not see the resources at all :(
[2013-04-29 15:28:08 -0400] zts: directionless: I should probably rework managed_directory to do the cleanup in a handler (and use have an LWRP/definition for capturing the requirements)
[2013-04-29 15:29:16 -0400] directionless: zts: Ah ha. I think I found a sneaky way. create a noop resource that delay notifies managed_directory. https://gist.github.com/directionless/5482355
[2013-04-29 15:29:52 -0400] directionless: Well, maybe not. logging looks right, but my files aren't actually deleted.
[2013-04-29 15:30:46 -0400] jonlives: Katafalkas: http://docs.opscode.com/just_enough_ruby_for_chef.html
[2013-04-29 15:31:57 -0400] Katafalkas: jonlives: hey, I saw that one. So essentially I should easily be able to create my own cookbooks just by reading that ?
[2013-04-29 15:32:25 -0400] jonlives: Katafalkas: not strictly, but that teaches you the basic ruby syntax.
[2013-04-29 15:32:59 -0400] jonlives: Katafalkas: if the docs (http://docs.opscode.com/chef_overview_cookbooks.html) are a bit much, it might be worth downloading a cookbook from the community site and having a look through it to see how it works
[2013-04-29 15:33:08 -0400] jonlives: by looking up the resources etc in the docs
[2013-04-29 15:33:16 -0400] Katafalkas: ok
[2013-04-29 15:33:42 -0400] jonlives: Katafalkas: http://docs.opscode.com/resource.html gives you most of the basic resources you'd use in your cookbooks
[2013-04-29 15:35:04 -0400] zts: directionless: the delayed notification sounds like it should work, actually.  I'm a bit brain fried at the moment (just got back to London from ChefConf), but could you create an issue for it on github if it's not working?  I'll have a look at it tomorrow
[2013-04-29 15:35:44 -0400] jonlives: Katafalkas: http://community.opscode.com/cookbooks/zsh is a very simple one to install zsh, might be worth starting there :)
[2013-04-29 15:36:25 -0400] directionless: zts: The delayed notification seems like a clean idea. I'm not sure why it doesn't work, it logs the file deletion, but the file remains. I'll open an issue.
[2013-04-29 15:36:46 -0400] Katafalkas: jonlives: ok. I ll give it a go :) what ide would you suggest for chef ? i saw there was a vim plugin ... but I wanna try something else .. sublime ?
[2013-04-29 15:37:24 -0400] jonlives: Katafalkas: anything with ruby syntax highlighting, basically - my personal preference is Rubymine http://www.jetbrains.com/ruby/ but there is also a chef plugin for TextMate.
[2013-04-29 15:37:28 -0400] zts: directionless: thankyou!
[2013-04-29 15:37:41 -0400] Katafalkas: ok. cheers
[2013-04-29 15:38:00 -0400] directionless: zts: I wish chef had a clean idiom for this. but your cookbook seems like the nicest way so far. So thank you :)
[2013-04-29 15:38:24 -0400] chefuser: Hi there! Can I use "ark" to download artifacts from S3 repo? I'm not sure what URL should I use to download from S3.
[2013-04-29 15:38:36 -0400] jonlives: Katafalkas: praau ;)
[2013-04-29 15:39:07 -0400] Katafalkas: jonlives: <3
[2013-04-29 15:40:38 -0400] zts: directionless: you're welcome!  I created it as an experiment to play with the idea, though I'm still not entirely sure what the right solution is.  At ChefConf, Facebook (and others) took the approach of just collecting data across recipes (using attributes, or definitions, or whatever), then having a single bit of code that would turn the accumulated attributes into the right resources
[2013-04-29 15:41:54 -0400] zts: directionless: I've used that pattern before too, and it's another good one to explore.  I'm not in love with it either, but it's less magic than managed_directory
[2013-04-29 15:42:21 -0400] directionless: zts: There's a similar idiom in some of the ataritech cookbooks -- you can have a resource define a template, and catch the ResourceNotFound error (e.g.: https://github.com/actblue/cookbooks-ataritech/blob/master/collectd/definitions/collectd_plugin.rb) But, that's not compatable with LWRPs
[2013-04-29 15:42:48 -0400] directionless: zts: Yeah, I've done the collect data and then generate once approach. IMO there's just no good answer here
[2013-04-29 15:45:15 -0400] directionless: zts: https://github.com/zts/chef-cookbook-managed_directory/issues/1 has my delayed example, and the odd problem I'm seeing
[2013-04-29 15:49:36 -0400] jtimberman: Katafalkas: http://learnchef.com
[2013-04-29 15:50:57 -0400] zts: directionless: thanks, I'll play around with that and see what I can figure out :)
[2013-04-29 15:51:02 -0400] siXy: zts: managed_directory is still maintained then?  I've been wondering if it was worthwhile submitting patches for some of the more annoying bugs
[2013-04-29 15:52:12 -0400] jonlives: jtimberman: damn, didn't know about that!
[2013-04-29 15:52:51 -0400] skarufue: well my previous question: (is there a good provider to parse config files (Yaml) found on a node. and make their values available in a chef run?) could also be rewritten as. what do you people use to make sensitive data only available on one node? if you now say distribute different decrytion keys to nodes + databags. how do you get the decrytion keys onto your node?
[2013-04-29 15:53:13 -0400] Katafalkas: jtimberman: its ok for the setup and usage stuff, but not much on how to actually write cookbooks
[2013-04-29 15:53:24 -0400] siXy: zts: as long as there's no requirement to sign the CLA, I can submit patches to fix things like handling directories if there is a trailing slash
[2013-04-29 15:54:34 -0400] psec: hi all!  wanted to get your feedback on IronFan https://github.com/infochimps-labs/ironfan
[2013-04-29 15:56:06 -0400] queso: I have used a role to manage the cookbook dependencies/run-list for installing an app (and have an app cookbook).  I have read this is the wrong way to do this.  What is the right way to manage dependencies?  Should they be completely maintained by adding them to the cookbook metadata?
[2013-04-29 15:56:22 -0400] zts: siXy: No CLA required as it's not maintained by Opscode, so feel free to send PRs - patches are most welcome!
[2013-04-29 15:57:15 -0400] siXy: okay, I'll try to spare a few mins to clean up & submit our various patches later this week.  cheers.
[2013-04-29 16:00:42 -0400] zts: siXy: thankyou!  If it's a pain to tease out your fixes, logging the issues would also give me a nudge to sort things out myself :)
[2013-04-29 16:00:53 -0400] drrk: siXy: and they woud not be able to use any of them in the private chef code
[2013-04-29 16:01:38 -0400] siXy: drrk: sure they would, as long as they had a reasonable licence requirement.
[2013-04-29 16:02:07 -0400] siXy: MIT/BSD/Apache would all be fine, GPL2 might be okay too
[2013-04-29 16:02:50 -0400] drrk: okay, so they could use them after gettign a lawyer to check each variation of license that soeone put on the patch, and not use any that didn't come witha  license
[2013-04-29 16:03:06 -0400] drrk: the CLA just makes it easier, adn it's not exactly hard to fill it in
[2013-04-29 16:05:41 -0400] siXy: drrk: really no.  They just have a requirement that you have to licence your code under one of a short list of permissable licences.  That list could be just one or two licences.  This is how most opensource projects manage it, and why most decent companies don't attempt to do a copyright grab of everything that's submitted
[2013-04-29 16:06:31 -0400] drrk: I think copyright grab is quite common actually
[2013-04-29 16:07:01 -0400] pcn: ohai chefs
[2013-04-29 16:07:20 -0400] siXy: precisely zero of the projects we as a company contribute code back to do this.  there's a very good reason why this is true.
[2013-04-29 16:07:42 -0400] pcn: I'm working on the python cookbook's pip provider, and I was wondering if there is a function to compare semantic-like version strings"
[2013-04-29 16:07:44 -0400] pcn: ?
[2013-04-29 16:09:15 -0400] aruntomar: zts: i've checked it this time on multiple regions. the ebs volumes are getting deleted. when i create an instance i'm getting this info "Root Device Delete on Terminate: true". may be in the last ami that i chose, i might be false, b'cas of which the ebs volumes were lying around. but anyways, i'll keep an eye on it.
[2013-04-29 16:09:34 -0400] pcarrier: hey! I'd like to perform an operation "after everything else", for all nodes. is there some equivalent to appending a recipe to all roles' run_list?
[2013-04-29 16:10:05 -0400] jtimberman: siXy: We have a pretty clear explanation about why we chose the Apache license, and why we require a CLA for contributions. http://www.opscode.com/blog/2009/08/11/why-we-chose-the-apache-license/
[2013-04-29 16:10:19 -0400] queso: Do clients have a default file_cache_path set?
[2013-04-29 16:10:25 -0400] sabooky: If I have a default attribute that is an array. Is there a way for me to override that array (not append to it) through json?
[2013-04-29 16:11:13 -0400] pcn: pcarrier: do you mean something reporting-like, e.g. the kind of thing that handlers are used for?
[2013-04-29 16:11:39 -0400] pcarrier: pcn: it could be something that does a few last actions, for example
[2013-04-29 16:12:46 -0400] queso: Where is documentation on how to write your own LWRP?
[2013-04-29 16:12:49 -0400] pcarrier: pcn: it could declare resources, or stop ruby's tracer if you want to start tracing somewhere but didn't know when to stop, or indeed process the node information really anything a recipe could do, whereas reporters seem a bit restricted
[2013-04-29 16:13:10 -0400] pcarrier: pcn: well, for the kind of usages I might want from such a recipe
[2013-04-29 16:13:21 -0400] ssd7_: siXy: Also, for the record, you keep your copyright. It is a License agreement, not a copyright assignment.
[2013-04-29 16:14:04 -0400] aruntomar: jtimberman: quite sometime back, there was a "open training material" provided by opscode, there were pdf's and html presentation on chef fundamentals etc. What is want to ask is, Can i use those slides/presentations while giving trainings?
[2013-04-29 16:14:16 -0400] jtimberman: aruntomar: You totally can!
[2013-04-29 16:14:22 -0400] jtimberman: aruntomar: they're Creative Commons licensed.
[2013-04-29 16:15:25 -0400] aruntomar: jtimberman: actually i want to use them for corporate trainings.
[2013-04-29 16:15:32 -0400] siXy: jtimberman: the licence is fine, and the CLA is up to you.  But we internally maintain fixes for quite a few of the open issues in chef, however I won't be able to submit them currently.
[2013-04-29 16:16:41 -0400] aruntomar: jtimberman: so i thought it would be better to check with you guys first, so that we don't have a misunderstanding later on.
[2013-04-29 16:17:24 -0400] pcn: pcarrier: I think what you want isn't report handlers  It does seem like what you want is to use notifications so that e.g. if you start a tracer, you'd notify the script to stop your tracing, and that would be deferred until the end of the run
[2013-04-29 16:18:12 -0400] pcarrier: pcn: just to be sure, there's no way to alert the run_list on a larger scope that roles?
[2013-04-29 16:18:17 -0400] pcarrier: alter
[2013-04-29 16:21:32 -0400] pcn: dysinger: morning
[2013-04-29 16:21:52 -0400] pcn: pcarrier: I haven't done that, but you can monkey around with the internals pretty extensively
[2013-04-29 16:21:57 -0400] aruntomar: jtimberman: are there any plans on a suggested approach or best practices for developing chef recipes from opscode say TDD methodology chefspec, foodcritic, fauxhai etc.
[2013-04-29 16:22:09 -0400] dysinger: pcn: :)
[2013-04-29 16:22:10 -0400] pcn: pcarrier: but I don't think that you have to do that in order to get cleanup
[2013-04-29 16:22:29 -0400] jtimberman: aruntomar: awesome, i don't think there's any issue w/ that.
[2013-04-29 16:22:34 -0400] jtimberman: aruntomar: "sort of" :)
[2013-04-29 16:23:07 -0400] jtimberman: aruntomar: we're still ironing out some of that, with the changes to test kitchen and the advent of other tools, we haven't updated internal documentation, but that's something I plan to do soon
[2013-04-29 16:25:20 -0400] justincampbell: is there a way i can get a list of nodes grouped by env
[2013-04-29 16:25:24 -0400] justincampbell: knife node list ...
[2013-04-29 16:26:39 -0400] sabooky: quick question, when setting the default value to an array in an attributes file. Is there a way for a user to override that array, rather than append to it (deep merge)?
[2013-04-29 16:27:00 -0400] aruntomar: jtimberman: it's not an issue. sometimes having too many choices results in confusion. so, i believe that if something is suggested as a best practice from the primary project founders, that's really helpful and can drive the community towards certain direction. eg: lots of official cookbooks use symbols in attributes, but foodcritic suggests using string. there is chefspec and chef minitest for unit testing, and cucumber-chef for integration testing.
[2013-04-29 16:29:36 -0400] aruntomar: jtimberman:  like existing eg: for newbies everyone most probably would be cloning the http://github.com/opscode/chef-repo.git and then using. a similar workflow for advanced users might be really helpful.
[2013-04-29 16:31:46 -0400] jtimberman: aruntomar: workflow is something we haven't been prescriptive of in the past
[2013-04-29 16:34:35 -0400] aruntomar: jtimberman: ok
[2013-04-29 16:38:32 -0400] c_t: ohai, chefs
[2013-04-29 16:51:59 -0400] organicveggie: Just uploaded two cookbooks to the Opscode Community Cookbooks section. How do I add a link to the homepage of the cookbooks?
[2013-04-29 16:56:14 -0400] pcn: So is there a function in the Chef codebase somewhere to compare version numbers?
[2013-04-29 16:58:43 -0400] awgross: pcn: probs, try setting up an invalid version constraint like "> 2.0", "< 1.0"
[2013-04-29 16:58:46 -0400] awgross: and see where it breaks
[2013-04-29 17:04:48 -0400] mosez: hi
[2013-04-29 17:05:13 -0400] mosez: is chef server installed by packages on ubunut still running with ruby 1.8?
[2013-04-29 17:05:30 -0400] mosez: or installed on debian stable?
[2013-04-29 17:05:52 -0400] jtimberman: organicveggie: you need to do that from the cookbook's pages on the community site.
[2013-04-29 17:05:59 -0400] skarufue: mosez: omnibus
[2013-04-29 17:06:14 -0400] jtimberman: pcn: there's a version constraint class in Chef that can do versino comparisons
[2013-04-29 17:06:54 -0400] jtimberman: i have slides about them here: https://speakerdeck.com/jtimberman/5-things-you-didnt-know-about-chef
[2013-04-29 17:07:24 -0400] jtimberman: mosez: use the omnibus chef server package, http://www.opscode.com/chef/install -> Chef SErver tab.
[2013-04-29 17:07:59 -0400] organicveggie: jtimberman: I'm an idiot. I was logged out from the Opscode Community site. I see the link now. Thanks!
[2013-04-29 17:08:21 -0400] jtimberman: pcn: starts at slide 13
[2013-04-29 17:08:29 -0400] jtimberman: organicveggie: I do that all the time :)
[2013-04-29 17:09:37 -0400] TrinitronX: Anyone know how a node's Rackspace Instance ID could be used in a recipe?
[2013-04-29 17:09:57 -0400] gchristensen: you mean how to access teh instance id?
[2013-04-29 17:10:02 -0400] TrinitronX: yes
[2013-04-29 17:10:08 -0400] jmartin: jtimberman: could you point me to a status page for the latest test-kitchen info? i know you guys are integrating jaime-ci code and such recently, just wanted to follow along
[2013-04-29 17:10:19 -0400] TrinitronX: (I found node['ec2']['instance_id'] on Amazon nodes, but no similar attribute for rackspace
[2013-04-29 17:12:09 -0400] jtimberman: jmartin: the jamie-ci code is 100% moved over to github.com/opscode/test-kitchen, under the '1.0' branch. that branch will become master this week.
[2013-04-29 17:12:23 -0400] jtimberman: there isn't a status page other than the git repo :)
[2013-04-29 17:12:31 -0400] jmartin: ah, didnt know if you guys had a JIRA or anything for it
[2013-04-29 17:12:33 -0400] jmartin: thx
[2013-04-29 17:12:34 -0400] jtimberman: follow fnichol on github
[2013-04-29 17:12:46 -0400] jtimberman: we're using github issues for it for now
[2013-04-29 17:17:23 -0400] jmartin: jtimberman: ah thx,  cant wait til its master so i can try to use jenkins to fire it off for all of our cookbooks heh
[2013-04-29 17:23:33 -0400] aruntomar: jtimberman: most of your training events happen in the US, logical as you are based there. but are there any plans to come to India?
[2013-04-29 17:26:31 -0400] jtimberman: jmartin: you can install the prerelease gem (1.0.0.alpha.5 iirc is the latest) and get cooking :)
[2013-04-29 17:26:41 -0400] jtimberman: aruntomar: we have a training partner in India.
[2013-04-29 17:27:04 -0400] jtimberman: aruntomar: If you want to sync up more formally about that, please email training@opscode.com
[2013-04-29 17:28:48 -0400] aruntomar: jtimberman: i would be really interested in becoming a training partner :)
[2013-04-29 17:41:08 -0400] damian__: I just updated ticket 14508, but my email got bounced again.  Can you guys take a look for me?
[2013-04-29 17:42:06 -0400] damian__: I brought this issue up multiple times and it still has not been addressed
[2013-04-29 17:45:08 -0400] awgross: damian__: can you give a link to the ticket?  CHEF-14508 doesnt exist
[2013-04-29 17:45:42 -0400] damian__: https://www.opscode.com/support/tickets/14508
[2013-04-29 17:46:06 -0400] damian__: its a support ticket under our hosted chef account.  ssd7 has been working with me on this
[2013-04-29 17:46:17 -0400] awgross: ahh i see, nevermind then
[2013-04-29 17:46:42 -0400] damian__: more fun with the newest version under windows :)
[2013-04-29 17:52:23 -0400] ssd7: damian__: I'll get someone to look into your user account some more as it seems my attempts to fix it didn't work.  But I got your stacktrace and we are looking at it further
[2013-04-29 17:52:36 -0400] damian__: thanks
[2013-04-29 17:56:37 -0400] mosez: jtimberman: but on the server install tab is only ubuntu and enterprise linux :(
[2013-04-29 18:05:01 -0400] jtimberman: mosez: ubuntu package will install fine on debian
[2013-04-29 18:06:15 -0400] mosez: jtimberman: ah, ok. and ruby is integrated into the debian package on /opt/chef?
[2013-04-29 18:06:22 -0400] jtimberman: mosez: yup
[2013-04-29 18:06:27 -0400] jtimberman: chef-server is installed in /opt/chef-server
[2013-04-29 18:06:28 -0400] mosez: nice :)
[2013-04-29 18:06:36 -0400] jtimberman: has ruby 1.9.3-p3something.
[2013-04-29 18:30:15 -0400] queso: How can I create a boolean attribute in a cookbook's metadata.rb?
[2013-04-29 18:43:22 -0400] UForgotten: is there a good way to debug json / data bags on the command line in chef-solo?
[2013-04-29 18:45:20 -0400] HarvesterOfBeer: Howdy. Can encrypted databags be decrypted in a recipe using a string for the password rather than a path to a local file?
[2013-04-29 18:46:49 -0400] queso: How do I get the attributes that I've put in a cookbook's metadata.rb to show up on the node for editing?
[2013-04-29 18:47:37 -0400] bluekelp: queso: those default/override attrs aren't actually set/persisted on the node (for editing in knife/etc) outside of the chef run
[2013-04-29 18:48:06 -0400] queso: bluekelp: Can't I set node values on the Chef server?
[2013-04-29 18:48:26 -0400] bluekelp: you can do "node.set['foo'] = 'bar'" then "node.save" if you need some attrs persisted on the node
[2013-04-29 18:48:53 -0400] adnichols: queso you don't typically set attributes in metadata.rb though - you typically set that under attributes/default.rb
[2013-04-29 18:49:08 -0400] queso: What are the attributes in metadata.rb for then?
[2013-04-29 18:49:09 -0400] bluekelp: but by default they're only good as long as the chef run if you "node.default[foo]=bar" in a recipe - not persisted to the node
[2013-04-29 18:49:22 -0400] adnichols: queso that is metadata about your cookbook
[2013-04-29 18:49:30 -0400] adnichols: queso version, dependencies, etc
[2013-04-29 18:49:50 -0400] queso: So if I have a cookbook that let's you set an attribute for the ssl cert that's going to be installed and used by apache, where's the right place to declare which SSL cert to use?
[2013-04-29 18:49:55 -0400] bluekelp: there is usually an attributes/default.rb file in the cookbook for attrs
[2013-04-29 18:50:36 -0400] queso: I was using a role before. But I think that's the wrong way to do it because it's a per-node setting.
[2013-04-29 18:50:56 -0400] dfrey_: i install a package and then run it with `npm -g bin` immediately after, but chef is complaining that it returns nil during resource collection. anyway around this?
[2013-04-29 18:51:07 -0400] adnichols: queso A role is a perfectly good way to override attributes if you want the same attribute across multiple hosts (any host where you apply the role)
[2013-04-29 18:51:10 -0400] kindsol: queso: setting the attributes in the metadata is useful if you want to display/set your inputs in some sort of web UI
[2013-04-29 18:51:17 -0400] queso: Like, I want to be able to put the cookbook on the node's run-list and then set an attribute before running.
[2013-04-29 18:52:03 -0400] queso: kindsol: I've added this particular attribute to metadata.rb, but it's not showing as editable in the webui for the node.
[2013-04-29 18:52:20 -0400] queso: Or am I supposed to use knife to set that?
[2013-04-29 18:53:36 -0400] kindsol: queso: AFAIK, setting inputs is not supported in chef server UI.  you should use a role or a wrapper cookbook
[2013-04-29 18:54:51 -0400] adnichols: queso have you read this? http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-04-29 18:54:56 -0400] queso: I have a cookbook that installs an app.  But for one instance I want it to use a test-self-generated ssl cert. For the other node, I want it to be production as use our wildcard cert. I should have three cookbooks then? A my_app cookbook, and a prod_my_app cookbook and a test_my_app cookbook?
[2013-04-29 18:55:55 -0400] adnichols: queso - there are lots of ways to accomplish that, you can set the different values on each node, you can put each node in a different environment and set those attributes in the environment, you could have 3 different roles you use, you could also use 3 different wrapper recipes
[2013-04-29 18:56:23 -0400] queso: adnichols: How do I set differrent values on each node?
[2013-04-29 18:56:25 -0400] adnichols: queso You could start with one and change later if you find it's not working
[2013-04-29 18:56:29 -0400] adnichols: knife node edit
[2013-04-29 18:56:45 -0400] queso: adnichols: And that persists between runs?
[2013-04-29 18:56:56 -0400] adnichols: queso if you set the "normal" attribute type
[2013-04-29 18:57:13 -0400] bluekelp: queso: it sounds like you want "groups" of nodes to either be in prod or use a self-signed.  that sounds like an environment or role attribute to me
[2013-04-29 18:57:26 -0400] adnichols: queso it's valuable to read about and understand how attributes work - there are lots of variants
[2013-04-29 18:57:49 -0400] bluekelp: if you put the attribute on the node directly you'll have to manage each node that way - instead of updating the role/environment and it taking effect on al those nodes at once
[2013-04-29 18:57:58 -0400] gswallow01: I have a really stupid question.  You know how some environment manifests are in json while some are in plain ruby?
[2013-04-29 18:58:04 -0400] gswallow01: How do you create the ruby files?
[2013-04-29 18:58:23 -0400] queso: Having separate production and testing cookbooks sounds like overkill, just to set a few attributes, but it does have the benefit of making it easier to provision a node without having to set any attributes on the node.
[2013-04-29 18:58:29 -0400] tlr00: Question: I am trying to decide whether to use Environments for attribute overrides for each cookbook, or to use roles to manage that. The other option was to actually manage all attributes on a cookbook by cookbook basis and then via role control environment attributes - Thus leaving only Git Tags as the only attributes to override in "environments"... Curious to know some personal preferences of folks...
[2013-04-29 18:58:31 -0400] shane_: anyone else seeing random ENOMEM errors on clients with less than 2gb ram after upgrading to chef 11.x ?
[2013-04-29 18:58:37 -0400] adnichols: queso you don't have to have separate cookbooks
[2013-04-29 18:58:55 -0400] bluekelp: gswallow01: the ruby files are just a DSL that ends up json anyway.  cleaner syntax sometimes.  just create the files and use knife to push to server
[2013-04-29 18:59:10 -0400] adnichols: queso attributes are managed independent of cookbooks through environments, roles & attributes set on the node directly
[2013-04-29 18:59:23 -0400] bluekelp: queso: right. have one cookbook that uses the attribute - attrs set in role/environment
[2013-04-29 18:59:24 -0400] adnichols: queso they can *also* be set in cookbooks if you choose / need to do it that way
[2013-04-29 19:00:10 -0400] kindsol: queso: can't you can also send down custom attributes when you provision each server?  For example see the --json option for `knife ec2 server create --help`
[2013-04-29 19:00:40 -0400] kindsol: "A JSON string to be added to the first run of chef-client"
[2013-04-29 19:00:51 -0400] queso: That would work too.
[2013-04-29 19:01:17 -0400] queso: Okay, thanks for your help guys, I think my options are clearer now. I think I'll either set attributes on nodes or create wrapper cookbooks.
[2013-04-29 19:01:24 -0400] kindsol: definitely don't create multiple cookbooks
[2013-04-29 19:01:59 -0400] adnichols: queso read about roles & environments - may help you realize what the best option is
[2013-04-29 19:02:16 -0400] queso: adnichols: yes, I understand.
[2013-04-29 19:02:36 -0400] queso: But I have been told it's better to have a separate Chef Server for each environment and to actually not use environments.
[2013-04-29 19:03:14 -0400] adnichols: queso ok - I'm sure there are situations where that's true, but why?
[2013-04-29 19:03:20 -0400] bluekelp: environments can be useful.  separating your nodes between different servers can also cause headaches b/c we can't query all your infra at once, e.g.
[2013-04-29 19:04:07 -0400] bluekelp: environments are *still* useful in that case b/c they can be used to lock down cookbook versions allowed on nodes - helps with release management and a cookbook development workflow
[2013-04-29 19:04:08 -0400] adnichols: you also have to keep your cookbooks in sync across servers, attributes, etc sounds like a nightmare for a few servers
[2013-04-29 19:04:56 -0400] queso: In this case, there is a single app that will only be running on two servers: a production server and a testing server.
[2013-04-29 19:05:13 -0400] adnichols: queso that sounds like a perfect case for environments
[2013-04-29 19:05:32 -0400] adnichols: heck, you could even just have a few roles at that scale
[2013-04-29 19:05:37 -0400] queso: It does. Maybe I'll try that.
[2013-04-29 19:07:32 -0400] jdar: Can someone interpret an error message for me? I'm new and beating my head against an error in a java cookbook (4 hrs and counting):
[2013-04-29 19:07:35 -0400] jdar: recipes/openjdk.rb:93:in `from_file' . NoMethodError `run_action' for "ruby_block[update-java-alternatives]":String . it looks like that ruby_block is defined right above it.
[2013-04-29 19:09:53 -0400] queso: Thanks again, guys.
[2013-04-29 19:12:06 -0400] kallistec: open source code review (chef core) starting now: https://plus.google.com/hangouts/_/b1814a762c2f796e7c92b62cc657c0d4723988d7?authuser=0&hl=en if you'd like to join
[2013-04-29 19:13:22 -0400] kallistec: youtube link: http://youtu.be/1usjXKbxLw8
[2013-04-29 19:14:31 -0400] dfrey_: does anyone know how to postpone resource collection?
[2013-04-29 19:23:51 -0400] miah: postpone resource collection? what are you trying to do?
[2013-04-29 19:30:32 -0400] gheegh: hey all.. quick question.. I can't find where I can select a list of files and delete them.. basically.. i'm trying to wipe out upstart config files before i recreate them.. how do I do that?
[2013-04-29 19:31:41 -0400] jassinpainAgain: gheegh, from my exp you need to use the file resource and the delete action
[2013-04-29 19:31:59 -0400] jassinpainAgain: but you really want to be careful with that our you will delete and recreate every run
[2013-04-29 19:32:33 -0400] gheegh: any thoughts on how to better manage upstart?
[2013-04-29 19:33:04 -0400] miah: Use templates to manage init-scripts =)
[2013-04-29 19:34:04 -0400] miah: also, if its something you really care about, don't 'overwrite' or 'mask' the init-script included with your package. create a new one with a different name that manages your application. just incase future package updates fubar something.
[2013-04-29 19:34:08 -0400] jassinpainAgain: so maybe do a notify to a action that will create a lock file until you remove it later ... not idea but workable
[2013-04-29 19:34:08 -0400] jassinpainAgain: why do you need to delete them, might be the better question, doesnt the ... ^^
[2013-04-29 19:34:12 -0400] miah: but you shoiuld have testing around all that honestly
[2013-04-29 19:34:52 -0400] gheegh: yeah.. ok
[2013-04-29 19:35:01 -0400] miah: certainly disable the service that is probably started by default with your package, but ya. doing a delete and create on each run is going to be painful unless you want your app to restart ever ~15 minutes
[2013-04-29 19:35:05 -0400] gheegh: great.. thanks. gives me some ideas of directions to go.
[2013-04-29 20:06:30 -0400] queso: When using include_recipe in a cookbook recipe, doesn't the included recipe run?
[2013-04-29 20:08:07 -0400] damian__: queso: it should run inline with the cookbook, so if ityou put it at the top, it will run the other recipe first
[2013-04-29 20:08:13 -0400] bjensen: ssd7_: hey mate, did you get a chance to test out the runit services recipe?
[2013-04-29 20:08:23 -0400] damian__: you also need to add the depends into the metadata.rb file
[2013-04-29 20:08:53 -0400] queso: damian__: Okay, thanks
[2013-04-29 20:11:00 -0400] queso: How do I clear my cookbook cache from a node to make sure it's getting the latest version?
[2013-04-29 20:12:09 -0400] jtimberman: COOK code review, watch: http://youtu.be/yhINzCNpkXc join: https://plus.google.com/hangouts/_/b73dd951c4d7e3183a4082feade8b3429761f7ed
[2013-04-29 20:15:20 -0400] queso: Figured it out. Thanks :)
[2013-04-29 20:30:13 -0400] log1kal: queso: rm -rf /var/chef/cache/cookbooks (for the IRC logging bot)
[2013-04-29 20:31:12 -0400] migrane: hello everyone ... quick question ... if I create a server with knife rackspace server create and pass --json-attributes how does this json need to be formatted and how do I then access these attributes in a recipe ? say if I want to pass the following {"color":"red","shape":"circle"} ??
[2013-04-29 20:32:54 -0400] josephholsten: migrane: you should be able to access that via node['color']
[2013-04-29 20:34:22 -0400] josephholsten: ugh, I'm getting timeouts for posts to /environments/staging/cookbook_versions
[2013-04-29 20:35:14 -0400] migrane: josephholsten: so as long as I don't override any of the default attributes I should be good ... and just to make sure i would be passing it as --json-attributes '{"color":"red","shape":"circle"}' in other words enclosed in single quotes ... correct ?
[2013-04-29 20:35:37 -0400] josephholsten: that really depends on your shell, but that should work
[2013-04-29 20:36:01 -0400] migrane: josephholsten: thanks will give that a try
[2013-04-29 20:36:29 -0400] wedtm: I'm having an issue running an update on a node with a basic role. It appears that the cron cookbook is choking, but I'm too new to Chef to tell: http://hastebin.com/betipigeto.vbs
[2013-04-29 20:38:59 -0400] wedtm: Anyone?
[2013-04-29 20:40:59 -0400] yfeldblum: wedtm, that particular code (line 58 in your haste) is ruby-1.9 specific
[2013-04-29 20:42:23 -0400] wedtm: Sorry if anyone responded, my internet dropped out.
[2013-04-29 20:42:26 -0400] wedtm: I'm having an issue running an update on a node with a basic role. It appears that the cron cookbook is choking, but I'm too new to Chef to tell: http://hastebin.com/betipigeto.vbs
[2013-04-29 20:42:50 -0400] yfeldblum: wedtm, that particular code (line 58 in your haste) is ruby-1.9 specific
[2013-04-29 20:43:10 -0400] wedtm: Oh?
[2013-04-29 20:43:14 -0400] yfeldblum: wedtm, it was introduced between chef-11.4.0 and chef-11.4.4, so it's a very recent regression - https://github.com/opscode/chef/compare/11.4.0...11.4.4#diff-50
[2013-04-29 20:43:26 -0400] yfeldblum: jtimberman, ^
[2013-04-29 20:43:26 -0400] wedtm: Ah!
[2013-04-29 20:43:40 -0400] wedtm: What would be your recommended solution for me?
[2013-04-29 20:44:10 -0400] yfeldblum: wedtm, install chef using the full-stack installer, which installs ruby-1.9 into an isolated directory alongside chef, rather than installing the chef gem into the system rubygems
[2013-04-29 20:44:27 -0400] yfeldblum: wedtm, http://www.opscode.com/chef/install/
[2013-04-29 20:44:30 -0400] wedtm: Ah, I just used knife ec2 to bootstrap an ec2 instance.
[2013-04-29 20:45:34 -0400] yfeldblum: wedtm, which version of chef are you using on your workstation?
[2013-04-29 20:45:53 -0400] wedtm: 11.4.4
[2013-04-29 20:46:23 -0400] yfeldblum: wedtm, you should be able to use `--distro chef-full` in the terminal (when creating a *new* server)
[2013-04-29 20:46:34 -0400] wedtm: Awesome, I'll do that.
[2013-04-29 20:46:38 -0400] wedtm: Thank you very much!
[2013-04-29 20:46:40 -0400] yfeldblum: wedtm, you can also use `knife[:distro] ||= 'chef-full'` in your .chef/knife.rb
[2013-04-29 20:47:18 -0400] yfeldblum: wedtm, that will make it so you don't have to specify `--distro chef-full` in the terminal every time you create a server
[2013-04-29 20:48:11 -0400] jessicab1: chef-full should be the default, as long as you dont specify a template file or distro
[2013-04-29 20:48:38 -0400] wedtm: and that installs 1.9 by default, correct?
[2013-04-29 20:50:09 -0400] yfeldblum: wedtm, yes, it installs a separate copy of ruby-1.9 somewhere deep inside /opt/chef, and which doesn't override or otherwise alter the ruby that is already installed on the system (if one is installed) and which is not added to PATH either
[2013-04-29 20:50:22 -0400] wedtm: Perfect
[2013-04-29 20:56:24 -0400] wedtm: yfeldblum: That worked! Thank you very much.
[2013-04-29 20:56:45 -0400] yfeldblum: wedtm, cheers
[2013-04-29 21:01:54 -0400] StormSilver: Is it possible to get the result of all the merged attributes for a node from a Chef::Search::Query?
[2013-04-29 21:02:53 -0400] StormSilver: The result right now is just giving me node-level overridden attributes and no cookbook-level defaults.
[2013-04-29 21:06:12 -0400] knuckolls: hosted chef slow for anyone else? 502 bad gateways?
[2013-04-29 21:07:14 -0400] josephholsten: any erlang folks around want to help me debug timeouts in my /environments/.../cookbook_versions requests?
[2013-04-29 21:11:40 -0400] yfeldblum: StormSilver, it's giving you what was stored in the chef-server the last time that chef-client ran on that node
[2013-04-29 21:13:07 -0400] StormSilver: yfeldblum: Ahrmmmm.
[2013-04-29 21:23:58 -0400] wedtm: Which is the standard to use for deploying a rails app with chef: application_ruby or deploy
[2013-04-29 21:25:49 -0400] cwj: wedtm: application_ruby provides a pattern which uses a deploy resource as part of deploying a ruby/rails app
[2013-04-29 21:26:06 -0400] josephholsten: application_ruby is probably the most opinionated approach, deploy is slightly more flexible, and you can just use git if you really need
[2013-04-29 21:26:08 -0400] cwj: so building on the application_ruby pattern is going to handle more of the heavy lifting for you
[2013-04-29 21:26:20 -0400] wedtm: Gotcha, thanks :)
[2013-04-29 21:29:28 -0400] miah: application_ruby has several gotcha's because of its callback system..
[2013-04-29 21:29:40 -0400] miah: going the 'deploy' resource route may be easier and less frustrating
[2013-04-29 21:31:16 -0400] yfeldblum: wedtm, neither; jfyi application_ruby uses deploy under the hood; many people use one or the other (or both), but i wouldn't necessarily consider either a standard
[2013-04-29 21:31:39 -0400] nebrera: hello, has someone installed chef on a minimal cents installation
[2013-04-29 21:32:01 -0400] nebrera: I have installed on ubuntu server and chef-server 11 is installed ok
[2013-04-29 21:32:29 -0400] nebrera: but on centos minimal I get execute[verify-system-status] error
[2013-04-29 21:34:42 -0400] josephholsten: nebrera: think you could put together a gist of what you did and the full logs?
[2013-04-29 21:36:22 -0400] nebrera: I just install cents minimal
[2013-04-29 21:36:42 -0400] nebrera: and installed with the guide http://www.opscode.com/blog/2013/03/11/chef-11-server-up-and-running/
[2013-04-29 21:37:25 -0400] nebrera: and I get verify error:  http://pastebin.com/2scnKH2H
[2013-04-29 21:38:17 -0400] josephholsten: well erchef didn't seem to start properly, that's no fun.
[2013-04-29 21:38:58 -0400] nebrera: I installed on ubuntu and goes good but I need it on centos
[2013-04-29 21:39:00 -0400] josephholsten: you'll probably need to check its output, which may be in /var/log/chef-server/erchef/*
[2013-04-29 21:39:50 -0400] nebrera: the problem is it checks port 8000
[2013-04-29 21:40:12 -0400] josephholsten: yes, which is the port where the erchef server is supposed to bind to .
[2013-04-29 21:40:13 -0400] nebrera: I edited:  /opt/chef-server/embedded/cookbooks/chef-server/recipes/bootstrap.rb
[2013-04-29 21:40:25 -0400] nebrera: and disabled this check and now finish reconfigure
[2013-04-29 21:40:46 -0400] josephholsten: if you're not getting a proper response from :8000, then the chef server isn't going to be able to run properly.
[2013-04-29 21:41:41 -0400] nebrera: actually it is not running because nothing listen on port 443
[2013-04-29 21:41:46 -0400] nebrera: no nginx
[2013-04-29 21:41:53 -0400] nebrera: and on ubuntu it worked
[2013-04-29 21:41:57 -0400] nebrera: and listen on port 443
[2013-04-29 21:42:08 -0400] nebrera: are you chef developer ?
[2013-04-29 21:42:24 -0400] nebrera: do I have to install any package on minimal install ?
[2013-04-29 21:42:39 -0400] nebrera: did this guide use minimal cents install ?
[2013-04-29 21:42:47 -0400] nebrera: centos install
[2013-04-29 21:43:02 -0400] nebrera: or use the standard one with the DVDs
[2013-04-29 21:43:11 -0400] nebrera: probably it need a lib or a package
[2013-04-29 21:45:58 -0400] nebrera: more people has the same problem
[2013-04-29 21:45:59 -0400] nebrera: http://geekynotebook.orangeonthewall.com/install-chef-server-11-on-centos-6-minimal-installation/
[2013-04-29 21:46:35 -0400] nebrera: so I am not crazy :-D
[2013-04-29 21:48:08 -0400] revattar: Is anyone here using the opscode nginx cookbook under ubuntu?
[2013-04-29 21:48:36 -0400] revattar: I have nginx installing from the opscode cookbook which sets nginx up to run under runit
[2013-04-29 21:48:58 -0400] revattar: My problem is that sv down does not stop nginx although sv shows nginx in the down state
[2013-04-29 21:49:43 -0400] revattar: furthermore, running sv up nginx after that creates an issue where sv continuously tries starting nginx and failing because the current running ngix has already consumed the ports
[2013-04-29 21:49:59 -0400] trco: Howdy. So I have installed chef server 11 using the community cookbook (https://github.com/opscode-cookbooks/chef-server) using vagrant. I can't seem to get to the webui, anyone know how I can hit that? I have tried the http://<ip>:4000 and http://<ip>:8000
[2013-04-29 21:50:07 -0400] nebrera: someone found a solution
[2013-04-29 21:50:08 -0400] nebrera: http://www.grewe.ca/chef-server-11-centos-6-3/
[2013-04-29 21:51:25 -0400] MattJ: I have a role with an array attribute set (a list of packages). I need to remove some items from this array in one environment... any suggestions?
[2013-04-29 21:51:44 -0400] MattJ: As I understand from the docs, they get merged, which can only append new items
[2013-04-29 21:52:28 -0400] josephholsten: trco: web ui should be on https://...:443
[2013-04-29 21:52:47 -0400] rayrod2030: For all you berkshelf people.  Does the cookbook versioning that is defined in the berksfile also get reproduced at the chef server possibly through environment versioning or are those two worlds seperate?
[2013-04-29 21:53:08 -0400] miah: rayrod2030: two separate worlds, but similar functionality
[2013-04-29 21:53:46 -0400] ivey: rayrod2030: https://github.com/RiotGames/berkshelf/pull/473
[2013-04-29 21:54:12 -0400] ivey: not in yet but we'd love your feedbacxk
[2013-04-29 21:55:53 -0400] josephholsten: ivey: are those build failures new, or the same as upstream?
[2013-04-29 21:56:03 -0400] ivey: not sure
[2013-04-29 21:56:19 -0400] ivey: branch is a little stale. bluepojo may know.
[2013-04-29 21:56:48 -0400] trco: josephholsten: That also does not seem to be working :/ when I do a chef-server-ctl status it shows that the webui service is up.
[2013-04-29 21:56:55 -0400] organicveggie: Is there any good documentation on running a high-availability Chef server setup?
[2013-04-29 21:57:09 -0400] bluepojo: ivey josephholsten: as far as I can tell they're upstream failures.
[2013-04-29 21:57:26 -0400] bluepojo: but I'll have to confirm
[2013-04-29 21:57:27 -0400] josephholsten: organicveggie: the best I've seen was written for private chef
[2013-04-29 21:57:49 -0400] organicveggie: josephholsten: I don't suppose you have a link handy?
[2013-04-29 21:59:47 -0400] josephholsten: I don't, and can't seem to find it. but this is useful: http://wiki.opscode.com/display/chef/Scalability+and+High+Availability
[2013-04-29 22:01:24 -0400] organicveggie: Ahhh. Yes. Thanks. I was hoping it had gotten easier in the past 2 years. :(
[2013-04-29 22:02:15 -0400] miah: the underlying tech hasn't changed, so its the same.
[2013-04-29 22:02:48 -0400] miah: running chef server requires some level of complex system mastery.. turning that into a ha solution just ups the complexity
[2013-04-29 22:03:30 -0400] organicveggie: miah: It's more an issue that the generally accepted HA practices such as DRBD and Pacemaker/Corosync are not a great fit for EC2 instances.
[2013-04-29 22:03:45 -0400] organicveggie: AWS just makes life complicated. :)
[2013-04-29 22:04:34 -0400] miah: indeed
[2013-04-29 22:04:51 -0400] UForgotten: that's an understatement.
[2013-04-29 22:04:53 -0400] miah: i think a combination of physical hardware + ec2 is the way to go =)
[2013-04-29 22:05:17 -0400] miah: use ec2 for the elasticity that you need, but physical hardware for the elements that are consistent
[2013-04-29 22:05:21 -0400] UForgotten: you should try to only use ec2 for something you need to quickly crunch numbers and can be completely disposable/ephemeral.
[2013-04-29 22:05:30 -0400] organicveggie: miah: after two years of fighting with AWS for marginally acceptable I/O performance, we're coming around to the hybrid approach.
[2013-04-29 22:05:38 -0400] miah: yup
[2013-04-29 22:05:43 -0400] miah: i think thats what everybody is learning
[2013-04-29 22:06:03 -0400] organicveggie: <sarcasm>But I thought "The Cloud" solved all of my problems!</sarcasm>
[2013-04-29 22:08:51 -0400] yfeldblum: UForgotten, why?
[2013-04-29 22:09:45 -0400] wedtm: I've created a cookbook, and uploaded it to a private chef server. I've assigned it to the node,  but the node's not installing/running it. Any ideas?
[2013-04-29 22:10:08 -0400] revattar: wed does is show in the resolved list at the beginning of the chef run?
[2013-04-29 22:10:22 -0400] wedtm: No
[2013-04-29 22:10:37 -0400] wedtm: Ah
[2013-04-29 22:10:39 -0400] wedtm: there it is
[2013-04-29 22:10:40 -0400] wedtm: Thanks :)
[2013-04-29 22:12:40 -0400] doktrin: new to chef : I'm having trouble with a postgresql installation on CentOS - the postgres user is not being created, and the version is defaulting to 8.4 (which I understand is the version specified in the cookbook)
[2013-04-29 22:13:08 -0400] yfeldblum: organicveggie, what do you need HA for?
[2013-04-29 22:13:26 -0400] organicveggie: yfeldblum: :)
[2013-04-29 22:13:56 -0400] doktrin: however, I did specify a different version via a json param
[2013-04-29 22:13:57 -0400] yfeldblum: organicveggie, specifically in your chef-server; i can certainly understand needing HA for many of your applications
[2013-04-29 22:14:33 -0400] organicveggie: yfeldblum: We're entirely on AWS and we count on Chef server for launching instances. If we lose the Chef server, we can't launch instances.
[2013-04-29 22:15:45 -0400] yfeldblum: organicveggie, if you either keep the data on an EBS volume or take frequent backups and store the backups on S3, the worst that can happen is you need to restore the chef-server before launching any more instances
[2013-04-29 22:16:23 -0400] yfeldblum: organicveggie, is that actually a critical problem for your organization, or merely inconvenient?
[2013-04-29 22:16:24 -0400] organicveggie: yfeldblum: sure and meanwhile we still can't launch instances. we'd prefer not to have emergency server replacements.
[2013-04-29 22:16:40 -0400] organicveggie: yfeldblum: yes, we scale dynamically up and down with ASGs.
[2013-04-29 22:17:04 -0400] yfeldblum: (hammers and screws)
[2013-04-29 22:17:25 -0400] organicveggie: yfeldblum: it's a not a hammer/screw problem. it's a time constraint problem.
[2013-04-29 22:17:59 -0400] organicveggie: yfeldblum: changing how we manage instances and autoscaling is theoretically more time consuming than running Chef in a HA solution.
[2013-04-29 22:19:44 -0400] yfeldblum: organicveggie, Private Chef should be HA
[2013-04-29 22:20:29 -0400] yfeldblum: organicveggie, i believe it comes with docs, support, and automated installers
[2013-04-29 22:20:54 -0400] organicveggie: yfeldblum: Good point. When we started with Chef, Private Chef was cost prohibitive. That's definitely worth re-examining now.
[2013-04-29 22:21:04 -0400] organicveggie: (cost prohibitive for *us*)
[2013-04-29 22:22:20 -0400] yfeldblum: organicveggie, if you go the OSS route, the chef-server is a fairly standard collection of server types (db, queue, search index, object storage, web servers, and worker servers)
[2013-04-29 22:22:37 -0400] yfeldblum: organicveggie, assuming you can HAify each piece separately, you can HAify the whole thing
[2013-04-29 22:24:34 -0400] organicveggie: yfeldblum: Yes, I'm familiar with the current Chef architecture. We've been running our own Chef server for over 2 years. I was merely hoping that the documentation and thinking around Chef HA had improved.
[2013-04-29 22:29:31 -0400] miah: ya, i haven't really seen anything.
[2013-04-29 22:47:26 -0400] monokrome: Can someone help me understand environments
[2013-04-29 22:48:24 -0400] monokrome: I am confused by how I can separate data bags for different environments, and how to say "This node belogs to X environment" at the time of node creation.
[2013-04-29 22:48:50 -0400] monokrome: If I assign the environment to the node after it's built, then I would have no way of undoing the non-enviornment things on it
[2013-04-29 22:52:23 -0400] josephholsten: miah: re hybrid, who do you like for physical? one of the direct connect folks like datapipe? or just pick a colo
[2013-04-29 22:53:15 -0400] sethvargo: @monokrome what qs do you have about envs
[2013-04-29 22:54:03 -0400] monokrome: sethvargo: see my previous messages?
[2013-04-29 22:56:13 -0400] josephholsten: sethvargo1: anything I can do to help with the berks lockfile 2.0 work?
[2013-04-29 22:57:24 -0400] sethvargo1: @josephholsten its waiting review, but thx
[2013-04-29 22:58:58 -0400] subsume: I've got a bundle of files in a zip I'd like to include unzipped to a particular location on my chef managed servers
[2013-04-29 22:59:00 -0400] monokrome: sethvargo1: I don't get how I can assign an environment to a machine when I create it
[2013-04-29 22:59:04 -0400] subsume: how would i do that?
[2013-04-29 22:59:10 -0400] monokrome: or how I can make specific data bags for different environments
[2013-04-29 23:00:38 -0400] josephholsten: subsume: I'd just run unzip with an execute block, make sure you've got a not_if block to avoid doing it on every run
[2013-04-29 23:00:43 -0400] sethvargo1: @monokrome you assign a machine to an environment. There's multiple ways to do this. You can do it in the bootstrap with knife (usually environment ENV_NAME). You can use `knife node edit` to manually move the env too
[2013-04-29 23:00:44 -0400] miah: josephholsten: i dont really have any opinions for physical at the moment. i'm still largely in EC2, but its something i'm starting to explore
[2013-04-29 23:00:51 -0400] bluekelp: monokrome: put the data bag name in an attr tied to the env?
[2013-04-29 23:00:53 -0400] subsume: josephholsten: not if what?
[2013-04-29 23:01:06 -0400] miah: clearly, if you need really reliable and fast ec2 access then you'll want something that you can do network peering with
[2013-04-29 23:01:13 -0400] miah: eg http://aws.amazon.com/directconnect/
[2013-04-29 23:01:45 -0400] sethvargo1: @monokrome and for environment-specific data_bags, i would recommend using a nested key or something of that natures
[2013-04-29 23:01:49 -0400] wedtm: miah, do you happen to know of any dedicated hosts that provide EC2 direct connect?
[2013-04-29 23:01:49 -0400] subsume: josephholsten: also, where to keep the zip file in my chef repo?
[2013-04-29 23:01:51 -0400] miah: but i suspect you can get away with not doing directconnect too
[2013-04-29 23:01:59 -0400] miah: wedtm: i just pasted the list
[2013-04-29 23:02:13 -0400] josephholsten: miah: yeah, that's why we were considering datapipe for our hadoop cluster. ended up with rackspace, but not going with datapipe was a hard choice.
[2013-04-29 23:02:20 -0400] wedtm: That doesn't have any dedicated server providers though, just data centers.
[2013-04-29 23:02:43 -0400] miah: wedtm: yup. =)
[2013-04-29 23:02:48 -0400] wedtm: I have yet to find a provider who does, was hoping you might know of one :P
[2013-04-29 23:02:55 -0400] monokrome: sethvargo1: If I did that, how do I know the environment from my recipe?
[2013-04-29 23:02:57 -0400] josephholsten: wedtm: you probably want datapipe
[2013-04-29 23:03:08 -0400] Cheferouni: hello
[2013-04-29 23:03:09 -0400] miah: rackspace.. its a mess.
[2013-04-29 23:03:27 -0400] sethvargo1: @monokrome node.chef_env
[2013-04-29 23:03:33 -0400] sethvargo1: node.chef_environment*
[2013-04-29 23:03:51 -0400] monokrome: hmmmm okay
[2013-04-29 23:03:56 -0400] sethvargo1: @monokrome and in this case, you can't use node['chef_environment']. it's an actual method, not a node attribute
[2013-04-29 23:03:57 -0400] miah: i havent found a physical provider that makes me happy yet.
[2013-04-29 23:03:57 -0400] monokrome: Is there a way to set it at node creation?
[2013-04-29 23:04:02 -0400] monokrome: instead of after the node already exists?
[2013-04-29 23:04:09 -0400] monokrome: because my recipes should fail without it..
[2013-04-29 23:04:15 -0400] sethvargo1: @monokrome yea, like I said earlier, you can use the environment flag when bootstrapping
[2013-04-29 23:04:36 -0400] miah: your recipes can check to see if node.chef_environment.nil? and if so BOMB
[2013-04-29 23:04:36 -0400] monokrome: oh, interesting
[2013-04-29 23:04:39 -0400] monokrome: Thanks, sethvargo1 :}
[2013-04-29 23:04:40 -0400] sethvargo1: @monokrome so knife bootstrap 1.2.3.4 environment my_environment
[2013-04-29 23:04:43 -0400] monokrome: Sorry that I missed that earlier
[2013-04-29 23:04:51 -0400] miah: i think you can also use -E rather than -environment
[2013-04-29 23:04:56 -0400] doomviking: yup
[2013-04-29 23:05:05 -0400] josephholsten: subsume: you probably want to use the execute provider for unzip: http://docs.opscode.com/resource_execute.html
[2013-04-29 23:05:13 -0400] subsume: thanks
[2013-04-29 23:05:28 -0400] josephholsten: subsume: and cookbook_file for the zip: http://docs.opscode.com/resource_cookbook_file.html
[2013-04-29 23:05:44 -0400] shane_: i recently mounted all the relevant chef directories onto an external disk in order to setup DRBD to a passive secondary
[2013-04-29 23:05:53 -0400] shane_: we are now seeing this when uploading cookbooks: INFO: HTTP Request Returned 500 Internal Server Error: Invalid cross-device link - /var/cache/chef/sandboxes/
[2013-04-29 23:06:20 -0400] shane_: anyone else encountered this with a drbd setup ?
[2013-04-29 23:08:15 -0400] miah: is it trying to do hard-links across devices?
[2013-04-29 23:08:50 -0400] shane_: not sure what it does when you upload a cookbook, but we did mount all of the directories onto another disk drive
[2013-04-29 23:09:17 -0400] josephholsten: shane_: I assume you can stat and ls that file path?
[2013-04-29 23:09:31 -0400] shane_: yeah
[2013-04-29 23:10:03 -0400] shane_: it's mounted like this /chef/var/chef/cache on /var/cache/chef type none (rw,noexec,nosuid,nodev,bind)
[2013-04-29 23:11:48 -0400] josephholsten: oh, that's a chef 10 server
[2013-04-29 23:12:15 -0400] shane_: chef 10.24 and clients are 11
[2013-04-29 23:12:30 -0400] shane_: couldnt get the server to update and had to remove the 11 gem at the advice of someone here
[2013-04-29 23:12:37 -0400] cburroughs: I'm having trouble with debugging a package install error.  http://pastebin.com/3KFuGE19  Chef says it can't find the version, but unless I have a typo or something  yum sees it there
[2013-04-29 23:14:03 -0400] miah: how are you running 11.x clients on a 10.x server?
[2013-04-29 23:14:29 -0400] miah: i  didnt think that was a supported configuration.
[2013-04-29 23:14:31 -0400] josephholsten: miah: they work fine, oddly enough
[2013-04-29 23:14:37 -0400] miah: strange =)
[2013-04-29 23:14:47 -0400] shane_: heck if i know, 11 upgrade refuses to work on the machine for some reason though
[2013-04-29 23:14:54 -0400] shane_: had to remove the 11 gem
[2013-04-29 23:14:54 -0400] miah: :(
[2013-04-29 23:14:59 -0400] josephholsten: I was surprised when I accidentally updated my staging env and it didn't explode
[2013-04-29 23:15:03 -0400] miah: haha
[2013-04-29 23:15:20 -0400] shane_: guess i thought server and client were on 2 different branches or something
[2013-04-29 23:15:34 -0400] shane_: and the client 11 gem was screwing with the server
[2013-04-29 23:16:09 -0400] josephholsten: oh, you keep saying chef 11 gem.
[2013-04-29 23:16:39 -0400] josephholsten: which makes me wonder, why not omnibus?
[2013-04-29 23:17:57 -0400] josephholsten: shane_: are you adding HA to your chef 10 server?
[2013-04-29 23:18:06 -0400] shane_: attempting to yes
[2013-04-29 23:18:23 -0400] shane_: but now i cant seem to upload a cookbook due to the cross device stuff
[2013-04-29 23:19:02 -0400] josephholsten: because if you are, I'd encourage you to invest in migrating to chef 11. half the HA required for chef 11 is diff than chef 10
[2013-04-29 23:19:27 -0400] josephholsten: for example, this sandboxes thing is entirely replaced in chef 11
[2013-04-29 23:20:09 -0400] shane_: ah i see
[2013-04-29 23:20:43 -0400] josephholsten: admittedly, I'm still working out minor bugs with our chef 11 install. but they usually have easy work arounds or are stuff I should have been doing anyway
[2013-04-29 23:21:53 -0400] shane_: have you seen any ENOMEM errors on the 11 clients ?
[2013-04-29 23:22:05 -0400] shane_: noticed that ever since the client update they randomly throw that on chef runs
[2013-04-29 23:22:31 -0400] shane_: guess ill hold off on HA until we can get 11 up and running solid
[2013-04-29 23:22:51 -0400] josephholsten: shane_: are you running chef as a daemon?
[2013-04-29 23:23:02 -0400] shane_: on the clients yes
[2013-04-29 23:23:09 -0400] josephholsten: because you may just have a memory leak in one of your cookbooks
[2013-04-29 23:23:27 -0400] shane_: it did not do this on 10
[2013-04-29 23:24:00 -0400] ssd7_: shane_: Are you on the latest version of 11?  11.4.4
[2013-04-29 23:24:08 -0400] josephholsten: we switched to cron + splay for scheduling b/c chef would occasionally grow to 30GiB memory on our hadoop nodes
[2013-04-29 23:24:35 -0400] josephholsten: and I definitely had that problem in 10.x and 0.9
[2013-04-29 23:24:40 -0400] shane_: 11.4.0
[2013-04-29 23:25:46 -0400] ssd7_: shane_: Try upgrading, we fixed a serious memory leak in 11.4.4
[2013-04-29 23:25:54 -0400] shane_: ok will do
[2013-04-29 23:33:33 -0400] cburroughs: apparnalty in some cases the full version-release is required
[2013-04-29 23:34:00 -0400] cburroughs: which is the opposite of what I thought the error message was trying to say
[2013-04-29 23:55:24 -0400] subsume: Any chefs available for consultancy/hire? Trying to setup a 5 box production environment and I'd like some addt'l eyes
[2013-04-29 23:57:01 -0400] maplebed: Is it possible for vagrant + chef_solo to deal with recipes that get data from encrypted data bags?  I'd be happy with something that stubs in different data or something ilke that.

[2013-01-20 00:08:46 -0500] sascha_d: hi chefs
[2013-01-20 00:09:04 -0500] sascha_d: question about testing. Since I'm trying to write tests for cookbooks.
[2013-01-20 00:09:36 -0500] sascha_d: I"ma reading the minitest-chef-handler readme
[2013-01-20 00:10:14 -0500] sascha_d: and it's talking about Test Cases and Spec cases.  Are those functional and unit tests specifically?
[2013-01-20 00:10:20 -0500] sascha_d: Or is it just styling?
[2013-01-20 00:21:06 -0500] gebbione: hi, trying to add mcrypt from its specific recipe i found somewhere in the opscode site but it is not working for me
[2013-01-20 00:21:07 -0500] gebbione: https://github.com/bizmate/vagrant_demo/blob/master/cookbooks/php/recipes/module_mcrypt.rb
[2013-01-20 00:22:01 -0500] gebbione: i have added lines in the metadata.json and .rb one folder above to make sure the recipe is run but when i check the php_info it looks like it was not installed
[2013-01-20 00:22:12 -0500] gebbione: any suggestion what i might be missing
[2013-01-20 00:40:39 -0500] kderr: So. When can and when can you not use knife node edit to override an attribute?
[2013-01-20 00:49:05 -0500] sascha_d: @kderr, default and override attributes are remapped on every chef client run
[2013-01-20 00:49:24 -0500] sascha_d: so a knife edit will only last that long for those two types
[2013-01-20 00:50:13 -0500] sascha_d: ohai-generated attributes can never be overridden either
[2013-01-20 00:50:27 -0500] kderr: sascha_d: But I can set a "normal" attribute and expect that to persist?
[2013-01-20 00:50:34 -0500] kderr: sascha_d: As long as it isn't an ohai attr?
[2013-01-20 00:50:46 -0500] sascha_d: yes as long as nothing else is setting an override on top of it
[2013-01-20 00:50:52 -0500] sascha_d: http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence
[2013-01-20 00:50:57 -0500] sascha_d: this is the precedence list
[2013-01-20 00:58:04 -0500] gebbione: for some reason i cannot get mcrypt to install correctly, sometimes the mysql server fails to start and causes errors as in the log  any idea what i can do for both? http://pastebin.com/Prhqt0qc  my cookbooks etc are at https://github.com/bizmate/vagrant_demo/blob/master/cookbooks/php/recipes/module_mcrypt.rb
[2013-01-20 01:24:24 -0500] gebbione: hey WPsites do you know how i can add a recipe to install mcrypt or what i can do to have php install it withing my recipes
[2013-01-20 01:24:50 -0500] gebbione: errors i still have so far .. http://pastebin.com/Prhqt0qc  my cookbooks etc are at https://github.com/bizmate/vagrant_demo/blob/master/cookbooks/php/recipes/module_mcrypt.rb
[2013-01-20 01:26:07 -0500] WPsites: So you've tried to create a mcrypt recipe?
[2013-01-20 01:27:57 -0500] gebbione: i picked it from another repo
[2013-01-20 01:28:42 -0500] gebbione: still i don't get why i cannot just enable it within php.ini
[2013-01-20 01:29:18 -0500] gebbione: the server.rb in that cookbooks contains a reference to /configure  --with-mcrypt but
[2013-01-20 01:29:19 -0500] WPsites: would it be that simple on a normal php install?
[2013-01-20 01:29:22 -0500] gebbione: it is never installed
[2013-01-20 01:29:30 -0500] WPsites: I've never installed mcrypt
[2013-01-20 01:29:43 -0500] gebbione: i think so if compiled with php
[2013-01-20 01:30:34 -0500] WPsites: just do that then
[2013-01-20 01:31:31 -0500] WPsites: you could probably specify any mcrypt stuff in node['php']['directives']
[2013-01-20 01:33:22 -0500] WPsites: the apache cookbook is a strange one to me. the ini file template has hardly any room for configuration. I assume they just want you to use the php directives attribute
[2013-01-20 01:40:45 -0500] gebbione: in my attributes --with-mcrypt is specified but still it is not installed
[2013-01-20 01:40:46 -0500] gebbione: https://github.com/bizmate/vagrant_demo/blob/master/cookbooks/php/attributes/default.rb
[2013-01-20 01:43:57 -0500] WPsites: and you're definitely running the source recipe?
[2013-01-20 01:54:04 -0500] gebbione: well to be honest i have no complete understanding of chef, i have taken the recipes from another repo and trying to modify them so i can run the php server in a more consistent way than when using MAMP or XAMP
[2013-01-20 01:55:11 -0500] WPsites: Yes I know what you mean! I've been trying to get to grips with it over the last few weeks
[2013-01-20 01:56:14 -0500] WPsites: but I'f you're expecting those configure options to work you need to be using the php::source recipe
[2013-01-20 01:56:42 -0500] WPsites: otherwise you'll be installing php from package and you won't get any of that
[2013-01-20 01:59:54 -0500] WPsites: Compiling php from source takes ages, I would try to stick with package if possible
[2013-01-20 02:00:46 -0500] WPsites: On the php site it says you can install crypt with: sudo apt-get install php5-mcrypt
[2013-01-20 02:01:26 -0500] gebbione: yes which is what the recipe i included should do
[2013-01-20 02:01:46 -0500] WPsites: use your module_mcrypt, maybe change the action to install rather than upgrade
[2013-01-20 02:01:56 -0500] gebbione: but also if you look at the php attributes is should install php from package with mcrypt already
[2013-01-20 02:02:07 -0500] gebbione: yea tried that
[2013-01-20 02:03:12 -0500] WPsites: and included your [php::module_mcrypt] in your run list with your other modules?
[2013-01-20 02:03:46 -0500] gebbione: yes thats why in the error from the paste bin the recipe is run
[2013-01-20 02:05:29 -0500] WPsites: what OS?
[2013-01-20 02:07:25 -0500] gebbione: my machine is a mac
[2013-01-20 02:07:40 -0500] WPsites: the vagrant one
[2013-01-20 02:07:47 -0500] gebbione: ubuntu
[2013-01-20 02:08:40 -0500] WPsites: there may be something wrong with that mcrypt cookbook
[2013-01-20 02:08:51 -0500] WPsites: should the package being installed not be php5-mcrypt?
[2013-01-20 02:09:12 -0500] WPsites: I use ubuntu and the php packages always seem to be php5-whatever
[2013-01-20 02:10:05 -0500] WPsites: I would edit that mcrypt recipe and hard code that package name php5-mcrypt
[2013-01-20 02:11:03 -0500] gebbione: yea if u look at recipies
[2013-01-20 02:11:17 -0500] gebbione: the first if does not include ubuntu
[2013-01-20 02:11:35 -0500] gebbione: so i would expect the php5-mcrypt to be called during the install attempt
[2013-01-20 02:12:15 -0500] gebbione: going to check that
[2013-01-20 02:12:19 -0500] gebbione: good point
[2013-01-20 02:12:24 -0500] WPsites: Looking at the output it says php-mcrypt
[2013-01-20 02:12:30 -0500] gebbione: still the mysql one is weird
[2013-01-20 02:12:35 -0500] gebbione: sometimes it does not work
[2013-01-20 02:12:35 -0500] WPsites: lol
[2013-01-20 02:12:44 -0500] gebbione: as if the remote repository is down
[2013-01-20 02:12:50 -0500] WPsites: yeah likewise, sometimes things just don't work
[2013-01-20 02:12:53 -0500] gebbione: and makes my script fail during reload
[2013-01-20 02:13:23 -0500] WPsites: and then they are fine again. Bootstrapping a server seems to fail regular for me at the minute and then I run it again straight after with no problem.
[2013-01-20 02:13:33 -0500] WPsites: I thought you fixed mysql with removing the ip bind
[2013-01-20 02:18:04 -0500] WPsites: Funnily enough after speaking briefly with you earlier I then had a problem with mysql. It was because in one of my roles I had specified a dodgy bind address, to a host address of a vpn (from another setup) it caused the mysql server to play me right up. wouldn't start, restart, nothing. Fixed as soon as I removed the ip bind.
[2013-01-20 02:19:54 -0500] WPsites: Are you still trying to run this: https://github.com/bizmate/vagrant_demo/blob/master/roles/local.json
[2013-01-20 02:23:38 -0500] gebbione: that is running indeed
[2013-01-20 02:23:56 -0500] gebbione: it is part of the whole cookbook i think to specify overrides and stuff like this
[2013-01-20 02:35:24 -0500] gebbione: i wonder how i can see what the recipe does in the background
[2013-01-20 02:35:47 -0500] gebbione: php-mcrypt is a perfectly viable option when looking at yum search mcrypt
[2013-01-20 02:36:07 -0500] WPsites: oh ok
[2013-01-20 02:36:22 -0500] WPsites: I'd go on the server and just try run that command and you'll see exactly what it says
[2013-01-20 02:38:02 -0500] WPsites: you can get more info from chef if you run chef in debug mode. in chef-client you do "chef-client -l debug" god knows how you do that in chef solo
[2013-01-20 02:43:10 -0500] gebbione: also i wonder how to do that from vagrant
[2013-01-20 02:45:39 -0500] WPsites: see "chef.log_level = :debug" on this page for debug http://techportal.inviqa.com/2012/06/26/tips-for-vagrant-and-chef/
[2013-01-20 02:46:09 -0500] gebbione: btw i changed my cookbook to install php54-mcrypt and it works
[2013-01-20 02:46:19 -0500] gebbione: still the damn mysql error
[2013-01-20 02:46:28 -0500] gebbione: it really is annoying
[2013-01-20 02:46:31 -0500] WPsites: are you using that same json ?
[2013-01-20 02:46:42 -0500] WPsites: its got the ipaddress in there
[2013-01-20 02:46:46 -0500] gebbione: yes i m the owner of that project
[2013-01-20 02:47:07 -0500] gebbione: sure but there is no bind anymore
[2013-01-20 02:47:14 -0500] gebbione: so that should work right?
[2013-01-20 02:47:46 -0500] WPsites: yeah should do, should default to 0.0.0.0 I think. I would set it to that to be sure
[2013-01-20 02:47:48 -0500] gebbione: actually i m going to commit the mcrypt changes
[2013-01-20 02:48:20 -0500] gebbione: still the problem there is that for some reason it is not starting
[2013-01-20 02:48:32 -0500] gebbione: and the task after fails (the grants.sql import)
[2013-01-20 02:48:42 -0500] WPsites: id use "bind_address": "0.0.0.0",
[2013-01-20 02:48:50 -0500] WPsites: and not bind_ipaddress...
[2013-01-20 02:49:58 -0500] gebbione: that bind_ipaddress does nothing
[2013-01-20 02:50:05 -0500] gebbione: i put it there as  test
[2013-01-20 02:50:22 -0500] gebbione: the my.cfg take a value specified somewhere else
[2013-01-20 02:50:22 -0500] WPsites: yeah its wrong use "bind_address"
[2013-01-20 02:50:49 -0500] WPsites: I'd hard code it in the my.cnf just for now
[2013-01-20 02:50:57 -0500] WPsites: to discount that
[2013-01-20 02:51:33 -0500] WPsites: and I would maybe think about dropping the iptables stuff. Its only local dev, don't worry about the firewall while your trying to get things setup
[2013-01-20 02:51:55 -0500] WPsites: enable debugging to have better visibility as to what chef is doing
[2013-01-20 02:51:59 -0500] gebbione: reloading ...
[2013-01-20 02:52:02 -0500] WPsites: and good luck!
[2013-01-20 02:52:13 -0500] WPsites: I need to go to bed its 02:52am here
[2013-01-20 02:52:14 -0500] gebbione: btw
[2013-01-20 02:52:23 -0500] gebbione: does WP stands for word press ?
[2013-01-20 02:52:26 -0500] WPsites: yeah
[2013-01-20 02:52:41 -0500] WPsites: why?
[2013-01-20 02:53:05 -0500] gebbione: well that was the most obvious one i would have imagined
[2013-01-20 02:53:33 -0500] gebbione: it looks like the changes u told me might make it work
[2013-01-20 02:53:49 -0500] gebbione: the mysql error is disappeared
[2013-01-20 02:54:02 -0500] WPsites: sounds promising
[2013-01-20 02:54:25 -0500] gebbione: yes it works :)
[2013-01-20 02:54:27 -0500] gebbione: great
[2013-01-20 02:54:30 -0500] WPsites: cool
[2013-01-20 02:54:50 -0500] gebbione: finally after 3 days i can go back to some programming (unless i need some other modules)
[2013-01-20 02:54:50 -0500] WPsites: it really is brilliant when it works but its a pain to get it all working!
[2013-01-20 02:54:51 -0500] gebbione: cheers
[2013-01-20 02:55:16 -0500] WPsites: Duno if you're like me but I don't even know Ruby
[2013-01-20 02:55:24 -0500] WPsites: But I'm getting to grips with it slowly thanks to chef
[2013-01-20 02:55:37 -0500] WPsites: quite a learning curve theough
[2013-01-20 02:55:54 -0500] gebbione: it is very json based
[2013-01-20 02:56:14 -0500] gebbione: apart from other syntax parts that are not so difficult to follow
[2013-01-20 02:56:43 -0500] gebbione: but being 90% of the time on php obviously i don't have lots of confidence with it
[2013-01-20 02:56:52 -0500] WPsites: begin a php developer its hard for me to stop if.. then  then that all over the place
[2013-01-20 02:57:17 -0500] gebbione: where r u from
[2013-01-20 02:57:24 -0500] WPsites: Southport UK
[2013-01-20 02:57:25 -0500] gebbione: i m in the uk
[2013-01-20 02:57:45 -0500] WPsites: I assumed anyone on here at this time was US!
[2013-01-20 02:58:17 -0500] WPsites: where about in the UK?
[2013-01-20 02:58:22 -0500] gebbione: yea, well i m that kind of person that does not mind staying in on a sat with the snow that is out there
[2013-01-20 02:58:26 -0500] gebbione: london
[2013-01-20 02:58:58 -0500] WPsites: so your a PHP developer. Do you specialise in anything?
[2013-01-20 02:59:47 -0500] WPsites: freelance or employed?
[2013-01-20 02:59:55 -0500] gebbione: freelance
[2013-01-20 03:00:19 -0500] gebbione: codeigniter/kohana - agile TDD and some CI
[2013-01-20 03:01:05 -0500] WPsites: cool
[2013-01-20 03:01:18 -0500] gebbione: also play with zend/symfony but not huge commercial experience with it
[2013-01-20 03:01:38 -0500] gebbione: built some wordpress plugins
[2013-01-20 03:01:48 -0500] WPsites: Oh cool which ones?
[2013-01-20 03:01:54 -0500] gebbione: but personally don't really like wordpress so much
[2013-01-20 03:02:03 -0500] WPsites: any on the wp repo
[2013-01-20 03:02:09 -0500] gebbione: something custom for a client  nothing public
[2013-01-20 03:02:09 -0500] WPsites: It's all I do!
[2013-01-20 03:02:13 -0500] WPsites: oh ok
[2013-01-20 03:02:35 -0500] gebbione: it was something to connect to an IVR server i sell for voice integrations
[2013-01-20 03:02:45 -0500] gebbione: and show all the voice messages from clients
[2013-01-20 03:03:03 -0500] WPsites: sounds pretty cool
[2013-01-20 03:03:04 -0500] gebbione: but as they had wordpress i kind of had to built a little control panel for them
[2013-01-20 03:03:21 -0500] gebbione: not cheap
[2013-01-20 03:03:45 -0500] WPsites: lol. and you built the control panel in wordpress?
[2013-01-20 03:04:29 -0500] gebbione: yes, as a plugin so they could access it and check the messages, enable/disable sort them and so on
[2013-01-20 03:04:41 -0500] WPsites: cool
[2013-01-20 03:06:31 -0500] gebbione: well fixed one problem now i need to look at another one
[2013-01-20 03:06:41 -0500] gebbione: some file permission errors when running php
[2013-01-20 03:06:46 -0500] gebbione: this is never ending
[2013-01-20 03:07:10 -0500] WPsites: yeah like everything for me. It's one problem to the next then another.. then another..
[2013-01-20 03:07:34 -0500] WPsites: Seem to spend my life fixing problems
[2013-01-20 03:08:01 -0500] gebbione: well nothing wrong if u get good money for it :)
[2013-01-20 03:08:25 -0500] WPsites: not right now but if you get out of things what you put in I'm due a bloody big payout this time!
[2013-01-20 03:09:17 -0500] WPsites: right I'm off. good luck in your chef endeavours
[2013-01-20 03:21:56 -0500] amccloud: Has anyone else had issues with "getaddrinfo: Name or service not known" coming from hosted chef recently?
[2013-01-20 03:22:47 -0500] amccloud: Well it looks like s3-external-1.amazonaws.com
[2013-01-20 03:40:59 -0500] sascha_d: I've done all my reading. If I could just figure out if there's a diff between minitest::testcase and minitest::spec, I'd be in business
[2013-01-20 03:41:16 -0500] sascha_d: sorry, wrong window
[2013-01-20 07:06:03 -0500] whack: Should I expect a 20-30 second delay between adding a tag to a node and having that data available in search?
[2013-01-20 07:07:09 -0500] whack: because that's what I observe, having trouble finding other similar reports on the web
[2013-01-20 07:15:29 -0500] miah: whack: local chef or hosted?
[2013-01-20 07:15:40 -0500] miah: it all depends on how fast the data is indexed
[2013-01-20 07:15:40 -0500] whack: local/private
[2013-01-20 07:15:56 -0500] miah: you can tune your chef-expander if you're running chef 10.x, not sure about 11.
[2013-01-20 07:21:36 -0500] whack: miah: wondering why there's any meaningful delay at all
[2013-01-20 07:21:56 -0500] whack: though I suppose the correct answer is "chef-server is not a messaging tool"
[2013-01-20 07:25:41 -0500] coderanger: whack: Yes, there will be delay
[2013-01-20 07:25:44 -0500] miah: theres a delay just because solr isn't indexed automatically
[2013-01-20 07:25:47 -0500] coderanger: indexing goes via a queue
[2013-01-20 07:26:20 -0500] coderanger: search is eventually consistent :)
[2013-01-20 07:26:39 -0500] whack: coderanger: lame, only compounds my frustration :|
[2013-01-20 07:27:11 -0500] whack: still, good to know that is the expected behavior, not just me doing something wrong
[2013-01-20 07:27:14 -0500] coderanger: whack: You should know better than most what happens when you throw huge amounts of load at Solr ;-)
[2013-01-20 07:27:25 -0500] whack: huge? heh. This is a pretty idle chef server ;)
[2013-01-20 07:27:32 -0500] whack: at least as far as I can tell
[2013-01-20 07:27:47 -0500] whack: I don't pretend to know what happens after I type knife commands though ;)
[2013-01-20 07:28:08 -0500] miah: you could change expander to run more often
[2013-01-20 07:28:17 -0500] whack: miah: I don't know what that is, but I'll ask on monday.
[2013-01-20 07:28:23 -0500] whack: (ask the folks running the server)
[2013-01-20 07:28:37 -0500] miah: chef-expander is the process that sends the queued data to solr to be indexed
[2013-01-20 07:29:00 -0500] miah: http://wiki.opscode.com/display/chef/Chef+Indexer
[2013-01-20 07:29:32 -0500] coderanger: whack: There is an old hack somewhere to take the queue out of the loop by monkey patching, but probably not a good idea given the impending chef 11 server
[2013-01-20 07:29:47 -0500] whack: any docs on recommended cookbook workflows? My lame effort at 'upload all the cookbooks' is just netting me ruby errors inside knife.
[2013-01-20 07:30:22 -0500] miah: whack: take a look at berkshelf
[2013-01-20 07:30:29 -0500] miah: it will help with cookbook management
[2013-01-20 07:30:53 -0500] miah: erikh wrote a nice workflow tool too, but its big so not a quick undertaking https://github.com/chef-workflow
[2013-01-20 07:31:02 -0500] whack: basically I'm trying to reduce personal frustration with what appears to be a lengthy iteration cycle from "make cookbook change" to "see if it did what I think it should" being many steps
[2013-01-20 07:31:04 -0500] coderanger: All of the berkshelf
[2013-01-20 07:31:24 -0500] miah: write tests =)
[2013-01-20 07:31:42 -0500] coderanger: Also you might want to try https://github.com/adamhjk/chef-jenkins or similar
[2013-01-20 07:31:44 -0500] whack: miah: I don't even know what I'm doing, mostly attempting a 1000 monkeys with 1000 typewriters approach.
[2013-01-20 07:31:51 -0500] miah: awesome
[2013-01-20 07:32:15 -0500] whack: I desparately miss the agility I had with puppet (mainly because I knew the tool, vs not knowing chef at the moment)
[2013-01-20 07:32:21 -0500] miah: i have no doubt you'll figure it out in time. just ask the questions and we'll point you towards the clues.
[2013-01-20 07:32:35 -0500] miah: ya
[2013-01-20 07:32:47 -0500] miah: i did a bunch with puppet. but i know that if i looked at it know i'd be like 'uh wtf'
[2013-01-20 07:33:42 -0500] miah: http://projects.puppetlabs.com/issues/1853
[2013-01-20 07:33:47 -0500] miah: lol puppet 0.24.7
[2013-01-20 07:33:56 -0500] whack: hah
[2013-01-20 07:34:02 -0500] whack: lol pacman :(
[2013-01-20 07:34:24 -0500] miah: also my first ruby
[2013-01-20 07:34:34 -0500] whack: we have some strange things here at dreamhost
[2013-01-20 07:34:39 -0500] miah: ya?
[2013-01-20 07:34:40 -0500] whack: cookbooks for roles
[2013-01-20 07:34:45 -0500] whack: "runlist-<rolename>"
[2013-01-20 07:34:45 -0500] miah: ah ya
[2013-01-20 07:34:51 -0500] whack: I do not understand this madness.
[2013-01-20 07:34:56 -0500] miah: thats because there is a huge disagreement in how to manage role versions
[2013-01-20 07:35:05 -0500] miah: because roles don't inherently have versions
[2013-01-20 07:35:24 -0500] miah: what we mean by this is, if you add an attribute to a role it affects all environments
[2013-01-20 07:35:39 -0500] whack: still, the way we have it deployed here makes way more sense than whatever madhat crap heroku was doing
[2013-01-20 07:35:50 -0500] miah: so most people get confused with attributes and go 'it cant be done'
[2013-01-20 07:35:50 -0500] whack: heroku chef was dark and disturbing
[2013-01-20 07:35:59 -0500] miah: when the simple answer is 'override attributes in your environment'
[2013-01-20 07:36:05 -0500] whack: miah: nod, makes sense
[2013-01-20 07:36:22 -0500] miah: i never put overrides in roles, only environments.
[2013-01-20 07:36:26 -0500] miah: keeps things quite sane
[2013-01-20 07:36:54 -0500] miah: chef totally fits with 'more than one way to skin a yak'
[2013-01-20 07:37:04 -0500] miah: most shops do things a bit 'their way' with chef
[2013-01-20 07:37:44 -0500] whack: ditto for puppet
[2013-01-20 07:37:58 -0500] whack: or most tools I suppose ;)
[2013-01-20 07:38:03 -0500] whack: unopionionation ftw
[2013-01-20 07:39:20 -0500] whack: marvelous. chef-client is doing things.
[2013-01-20 07:39:33 -0500] miah: yay
[2013-01-20 07:40:42 -0500] whack: also need a smarter git cli to deal with one-repo-per-cookbook
[2013-01-20 07:42:56 -0500] miah: oh?
[2013-01-20 07:43:14 -0500] whack: well, vi cookbooks/thing/foo/bar, git commit $_ doesn't work ;)
[2013-01-20 07:44:26 -0500] miah: ah i suppose
[2013-01-20 07:54:55 -0500] whack: template scope is sooo confusing
[2013-01-20 07:55:58 -0500] whack: template 'variables' become ivars in the erb, right?
[2013-01-20 07:58:48 -0500] whack: and is it recommended to only use such variables, and not access 'node' directly?
[2013-01-20 08:01:48 -0500] miah: yes to both
[2013-01-20 11:30:23 -0500] josh-k: hey guys
[2013-01-20 11:31:06 -0500] josh-k: I was running a chef run and ran into "Attribute ipaddress is not defined!", i am a little stumped on how to fix this
[2013-01-20 11:31:16 -0500] josh-k: does anyone have any advice?
[2013-01-20 13:01:58 -0500] gebbione: morning
[2013-01-20 13:02:24 -0500] mcgin: Hello
[2013-01-20 13:02:46 -0500] mcgin: Wonder if anyone could assist me with troubleshooting a problem with Chef
[2013-01-20 13:02:54 -0500] mcgin: I'm a bit of a noob!
[2013-01-20 13:03:06 -0500] mcgin: Getting this error - http://paste.ubuntu.com/1551897/
[2013-01-20 13:03:50 -0500] mcgin: Doesn't seem to install the chef client on the node from what I can see
[2013-01-20 13:06:04 -0500] gebbione: the install.sh fails
[2013-01-20 13:06:13 -0500] gebbione: not sure why
[2013-01-20 13:07:58 -0500] mcgin: I see this in /tmp/stderr ->  http://paste.ubuntu.com/1551947/
[2013-01-20 13:08:14 -0500] mcgin: a 404 error which seems odd?
[2013-01-20 13:08:26 -0500] yann2: hello! I got a question regarding the APT cookbook. I want to use the apt_repository LWRP but without using the default recipe, as I do not want it to update or to install other packages. Can I still call the execute apt-get update afterwards, with the notify?
[2013-01-20 13:10:25 -0500] gebbione: can't you use something like yum or apt to install it without the install.sh?
[2013-01-20 13:11:59 -0500] mcgin: was just following a tutorial, so I guess so
[2013-01-20 13:13:53 -0500] mcgin: actually how would I do that, as it simply isn't bootstrapping chef on the node so I can't issue any installs can I?
[2013-01-20 13:23:55 -0500] mcgin: mmm, adding "--bootstrap-version 10.18.0" as a command line arg to knife solved it
[2013-01-20 13:25:47 -0500] yann2: I ll rephrase - is it possible to notify a resource from another cookbook?
[2013-01-20 13:31:04 -0500] wlll: I think I might be using knife search wrong, anyone got any ideas? https://gist.github.com/66722979a71506cbb7d7
[2013-01-20 13:31:30 -0500] wlll: s/knife search/search/
[2013-01-20 13:31:37 -0500] wlll: searching in recipes is broken too
[2013-01-20 13:36:49 -0500] zts: yann2: yes, a resource can notify any other resource (though I'm not sure how that relates to your first question?)
[2013-01-20 13:37:50 -0500] yann2: I want to notify execute[apt-get update] from the default recipe of apt, without having to include that recipe, and from a different cookbook
[2013-01-20 13:38:42 -0500] zts: yann2: sure, but you shouldn't have to do that to use the apt_repository LWRP?  It declares that resource in its provider anyway...
[2013-01-20 13:39:09 -0500] zts: (unless that doesn't actually work?)
[2013-01-20 13:39:46 -0500] zts: wlll: The way you're using it looks okay - check whether "knife status" is also broken?  If so, might be something wrong with search on your chef server
[2013-01-20 13:40:24 -0500] yann2: I can actually us ethe apt_repository LWRP without problem, but it fails to call apt-get update afterwards
[2013-01-20 13:41:15 -0500] yann2: tried, unsuccessfully, this - Cannot find a resource matching execute[apt-get update] (did you define it first?)
[2013-01-20 13:41:21 -0500] zts: mcgin: chef 10.18.2 was released a couple of days ago, so you might want to see if that bootstrap-version works instead (not sure why it would try to look for 10.18.1 though)
[2013-01-20 13:41:30 -0500] yann2: probably because its in a different cookbook / in a recipe not included
[2013-01-20 13:42:06 -0500] zts: yann2: what version of the apt cookbook are you using?
[2013-01-20 13:42:35 -0500] yann2: just cloned it - but remember, I call the lwrp without including the apt::default
[2013-01-20 13:43:48 -0500] zts: yann2: sure, but as I said above, the apt_repository provider declares execute[apt-get update] - you shouldn't need to have apt::default on your run_list for it to work, nor should you need to declare it anywhere else
[2013-01-20 13:45:22 -0500] zts: yann2: but anyway, I've seen a few people noting that apt_repository has failed to run the update, due to a recently-introduced bug in the cookbook.  Here's the issue, in case this is also the cause of your problem: https://github.com/opscode-cookbooks/apt/commit/4c70f1700b4cb4d61f88c611d552aa1d2f57ea61
[2013-01-20 13:45:55 -0500] zts: yann2: I'm not running on debian/ubuntu at the moment, so I'm not sure what the recommended workaround is, if that is indeed what's causing your problem
[2013-01-20 13:47:19 -0500] yann2: very interesting zts that might very well be it. What was the fix supposed to fix? Will I break more if I revert that patch? :)
[2013-01-20 13:48:04 -0500] yann2: maybe I should revert it and wait for a better patch in a couple of days?
[2013-01-20 13:49:45 -0500] zts: yann2: yeah, if it were me, I think I'd try winding back to an earlier version - I see in the comments on that commit, there's a link to another pull request which should fix it properly
[2013-01-20 13:50:10 -0500] zts: so as another option, you could try applying that to your copy
[2013-01-20 13:53:01 -0500] Glacee_: Anyone would be interested in a Ohai plugin that detected the cloudformation stack name that your instance is in and put it as an attributes?
[2013-01-20 13:53:24 -0500] yann2: zts, when did that patch break it - would you know the last veriosn that might sitll work?
[2013-01-20 13:54:16 -0500] zts: yann2: looks like 1.7.0 was the last version before that commit went in
[2013-01-20 13:54:45 -0500] yann2: I ll give it a try, thanks a lot
[2013-01-20 13:54:54 -0500] zts: yann2: no problem, hope that works
[2013-01-20 14:08:47 -0500] wlll: zts: knife status returned no output, code 0.
[2013-01-20 14:08:57 -0500] wlll: knife index rebuild completed OK too, still no results
[2013-01-20 14:17:59 -0500] yann2: zts, seems to, thanks
[2013-01-20 14:32:41 -0500] gebbione: i keep getting this problem, for some reason when i change mysql conf it all works but then it gets stuck again when i reload  http://pastebin.com/RwRgVwmQ any ideas?
[2013-01-20 14:37:14 -0500] gebbione: any clues why it might be happening?
[2013-01-20 15:18:03 -0500] zts: wlll: next step would be to look for problems on the chef server.  If chef-expander isn't running, that could cause the problem - other than that, check for errors in the logs
[2013-01-20 15:32:23 -0500] wlll: zts: I did some more digging: https://gist.github.com/fa4e677e4fa0ab020874
[2013-01-20 15:32:31 -0500] wlll: chef-expander is definitely running
[2013-01-20 15:33:03 -0500] wlll: The root of the problem *seems* to be the Chef::Exceptions::CouchDBNotFound exception
[2013-01-20 15:33:15 -0500] wlll: though the couch server is definitely receiving requests
[2013-01-20 15:45:33 -0500] wlll: Removing the rescue I get this exception:
[2013-01-20 15:45:34 -0500] wlll: merb : chef-server (api) : worker (port 4000) ~ Cannot find data_bag_item data_bag_item_apps_testapp in CouchDB! - (Chef::Exceptions::CouchDBNotFound)
[2013-01-20 15:46:18 -0500] wlll: It's true, I don't have a data_bag_item's database in my chef server
[2013-01-20 15:52:51 -0500] cheflevelramen: Hi, hope everyone is having a good weekend. Quick question. Anyone know how to delete a data bag item from a recipe? I know how to do it with knife, but I don't see any other way to do it
[2013-01-20 15:56:23 -0500] spox: DataBagItem.load('bag_name', 'item_name').destroy
[2013-01-20 15:56:30 -0500] spox: cheflevelramen: ^^
[2013-01-20 15:56:54 -0500] cheflevelramen: spox: Cool, thanks a lot. Couldn't find that in the documentation :)
[2013-01-20 15:57:24 -0500] spox: cheflevelramen: sure :)
[2013-01-20 18:28:34 -0500] version2beta: Can anyone recommend a good Jekyll cookbook? The Community cookbook by Mike Adolph has apache2 as a dependency, and that feels heavier than I want.
[2013-01-20 19:39:53 -0500] saas2013: hi, i have a problem with chef-client (1.8.2 both client & server). when running a chef-client returns with Error Syncing Cookbooks: unexpected Error: EOFError: end of file reached. Any ideas?
[2013-01-20 20:12:01 -0500] rhodee: Hey everyone. new chef user here. I was hoping to get insight into why I keep getting this error. ERROR: Fog::Compute::AWS::NotFound: The key pair 'fooBar.pem' does not exist. The key is located in .ssh, chmod 400 and I reference in knife.rb exactly as follows - knife[:aws_ssh_key_id] = "fooBar.pem"
[2013-01-20 20:12:45 -0500] rhodee: I am attempting to create an instance using knife-solo
[2013-01-20 20:53:13 -0500] wlll: saas2013: I had the same error, how many cookbooks do you have?
[2013-01-20 20:53:55 -0500] saas2013: wlll: ~46
[2013-01-20 20:54:12 -0500] wlll: I solved the problem buy doing: knife cookbook bulk delete  --purge '.+'
[2013-01-20 20:54:18 -0500] wlll: then re-uploading all my cookbooks
[2013-01-20 20:54:29 -0500] saas2013: i'll try
[2013-01-20 20:54:42 -0500] wlll: just deleting then re-adding them normally didn't work for me
[2013-01-20 20:54:45 -0500] wlll: needed the purge
[2013-01-20 20:54:53 -0500] saas2013: ok, i missed the purge
[2013-01-20 20:56:08 -0500] saas2013: wlll: great, just worked! thanks a lot
[2013-01-20 20:56:29 -0500] wlll: Glad to share, took me ages to work out :)
[2013-01-20 20:58:14 -0500] saas2013: wlll: woops, failing again
[2013-01-20 20:58:34 -0500] wlll: It worked for me the first time, but I did have to do it again later
[2013-01-20 20:58:48 -0500] wlll: It only happened twice though
[2013-01-20 20:58:56 -0500] saas2013: wlll: i was developing and testing a cookbook, added ssh_known_hosts...
[2013-01-20 20:59:25 -0500] wlll: try knife cookbook delete --purge cookbook_name to delete teh one cookbook
[2013-01-20 20:59:30 -0500] wlll: then re-upload just that one
[2013-01-20 21:04:09 -0500] saas2013: wlll: still trying...
[2013-01-20 21:05:35 -0500] saas2013: looks to me that there's some bug or syntax error in one of my last actions that produces chef to fail
[2013-01-20 21:06:24 -0500] saas2013: i will investigate a bit more with older repo commits
[2013-01-20 21:24:54 -0500] rudyl313: how do I increase the redirect limit in chef?
[2013-01-20 21:25:27 -0500] rudyl313: my remote_file resource is failing: FATAL: Chef::Exceptions::RedirectLimitExceeded
[2013-01-20 21:27:33 -0500] saas2013: wlll: your hint helped me solve the problem. i'm on the way to solve by adding one by one the cookbook till the one that breaks everything. thanks again
[2013-01-20 21:29:43 -0500] wlll: Happy to help :)
[2013-01-20 22:28:10 -0500] gyre007: is there any way how I can subscribe service to be notified if some directory content changes without having that directory defined as a resource ?
[2013-01-20 22:28:40 -0500] gyre007: or will just dummy remote_dir resource definition do ?
[2013-01-20 22:30:58 -0500] flaccid: hmm good question i guess you could always use only_if i guess to check the 'content changes' manually in the resource
[2013-01-20 22:31:15 -0500] flaccid: but i think thats a question for someone much more knowledgeable than me
[2013-01-20 22:52:32 -0500] dols: ok, I give. what's the current way to use the database::ebs_volume recipe?
[2013-01-20 22:53:52 -0500] flaccid: in a chef run i'd assume
[2013-01-20 22:54:57 -0500] dols: i mean, in connection with the application cookbook
[2013-01-20 22:55:22 -0500] flaccid: in connection?
[2013-01-20 22:55:40 -0500] dols: the recipe refers to an apps data bag that the application cookbook says is not supported
[2013-01-20 22:56:11 -0500] flaccid: link?
[2013-01-20 22:56:58 -0500] dols: https://github.com/opscode-cookbooks/database/blob/master/recipes/ebs_volume.rb#L50
[2013-01-20 23:00:15 -0500] flaccid: where does it say in application cookbook that this is not supported?
[2013-01-20 23:02:34 -0500] dols: the README, As of version 2.0.0 of this cookbook, the recipes using configuration stored in the apps data bag are fully deprecated and removed. Version 1.0.4 of this cookbook is the last release where these recipes were available.
[2013-01-20 23:03:20 -0500] flaccid: i see. i'm not sure if it doesn't say what it was deprecated in favour of
[2013-01-20 23:03:36 -0500] flaccid: hopefully someone here knows but it is sunday in US
[2013-01-20 23:06:14 -0500] flaccid: maybe database cookbook is yet to be updated
[2013-01-20 23:10:37 -0500] dols: yeah, I might need to go back to 1.0.4
[2013-01-20 23:19:47 -0500] WPsites: I'm trying to set the action of a resource but not as straight forward as   " action :create  " I want to add some logic in there.. ternary I suppose
[2013-01-20 23:20:29 -0500] WPsites: This does not work, but what will?     -      action {install_type=='symlink' ? :symlink_enable : :download}
[2013-01-20 23:51:00 -0500] gyre007: mm

[2013-01-07 00:49:09 -0500] kreedy: anyone else have issues with SSL verification when using the chef client / omnibus installed ruby? i end up needing to make a symlink from /opt/chef/embedded/ssl/certs to /etc/ssl/certs
[2013-01-07 00:50:48 -0500] kreedy: ahh. just saw CHEF-2840
[2013-01-07 01:26:11 -0500] amccloud: Is anyone else having issues with hosted chef right now? I'm getting sandbox errors 50% of the time when uploading cookbooks and a 404 error when running chef-client.
[2013-01-07 01:27:50 -0500] kreedy: I was seeing those sandbox errors yesterday as well. Always went away when retrying though.
[2013-01-07 01:28:59 -0500] amccloud: kreedy: Yea, on some cookbooks that happens and on others I have to retry a handful of times.
[2013-01-07 02:28:58 -0500] elskunk: is there a chef builtin way to edit a line within a config. file - to ensure say some config is disabled. e.g. in puppet i've used augeas but i'm new to chef and wondering if there are builtin mech. for this. can't find any doc. hinting this is possible. my alternative is to use straight up ruby to regex a file. just wondering if there is an easier "cleaner" method available? thanks.
[2013-01-07 02:30:09 -0500] jtimberman: elskunk: it is generally recommended that you manage a whole config file through a cookbook_file or template resource, rather than modifying single lines. however, Chef::Util::FileEdit exists for this capability. i wrote about it on sysadvent: http://sysadvent.blogspot.com/2012/12/day-24-twelve-things-you-didnt-know.html#item_2
[2013-01-07 02:32:38 -0500] elskunk: jtimberman, ok - will check it out, thanks
[2013-01-07 02:33:09 -0500] matti: All we need is Chef-Augeas bindings ;p
[2013-01-07 02:33:15 -0500] matti: AKA more headache ;p
[2013-01-07 05:00:58 -0500] mikehaas763: Hello. I'm wondering what the recommended way to install chef on debian is? I'm making a vagrant base box
[2013-01-07 05:16:07 -0500] aruntomar: mikehaas763: server or client?
[2013-01-07 05:16:50 -0500] aruntomar: mikehaas763: the simplest would be to use omnibus installer to install chef client on the machine/vm/instance.
[2013-01-07 06:23:58 -0500] coderanger: Anyone know of a decent Amanda cookbook?
[2013-01-07 06:35:03 -0500] coderanger: and/or should I be using something other than amanda?
[2013-01-07 09:26:40 -0500] zts: coderanger: Bacula may be worth a look, if you're unfamiliar with it (but I know nothing about cookbooks for either)
[2013-01-07 09:31:09 -0500] specialsauce_: I've used dirvish before as well, sometimes a better fit
[2013-01-07 10:59:43 -0500] MartinCleaver: From the node, in ssh, how can I show the node name? "chef-client -N" demand a parameter, but I'm trying to enquire not set it
[2013-01-07 11:04:20 -0500] laurent\: hostname -f
[2013-01-07 11:05:36 -0500] MartinCleaver: oh. Is a nodename the exact same thing as the hostname?
[2013-01-07 11:06:23 -0500] MartinCleaver: i.e. the fqdn
[2013-01-07 11:06:27 -0500] laurent\: it is
[2013-01-07 11:06:55 -0500] MartinCleaver: well, thanks. That explains a few things :)
[2013-01-07 11:07:36 -0500] laurent\: :)
[2013-01-07 11:12:19 -0500] zts: that's not strictly true
[2013-01-07 11:13:03 -0500] Mithrandir: it defaults to the fqdn
[2013-01-07 11:13:06 -0500] Mithrandir: it can be any string.
[2013-01-07 11:13:06 -0500] HapxD: Hello,
[2013-01-07 11:13:07 -0500] HapxD: "Within a Cookbook'sfilesortemplatesdirectories, you might find a directory structure like this:files/ (or templates/)host-foo.example.com ubuntu-8.04 ubuntu-8"
[2013-01-07 11:13:07 -0500] HapxD: How do I use x86 / i386 is that possible for multiple distro ?
[2013-01-07 11:16:16 -0500] MartinCleaver: zts, Mithrandir - then how do I show the node name from the node?
[2013-01-07 11:17:31 -0500] MartinCleaver: is it best to exclude .chef from my chef-repo (using .gitignore)?
[2013-01-07 11:21:04 -0500] zts: MartinCleaver: per Mithrandir (and laurent\), it'll be the FQDN by default.  If it's something other than the default, you can look in /etc/chef/client.rb
[2013-01-07 11:23:46 -0500] HapxD: Is Chef clever enough to only download the file for the distro needed ? or will it download all the distro's files ?
[2013-01-07 11:25:06 -0500] HapxD: oh it is- "Even though a cookbook may contain many files, only files that require an update are transferred from the Chef server to a chef-client."
[2013-01-07 11:26:35 -0500] HapxD: but seriously, I would like to know if it supports the architecture (x86 ,i386 etc) as part of the folder structure.
[2013-01-07 11:30:54 -0500] zts: HapxD: it does not
[2013-01-07 11:31:19 -0500] zts: HapxD: http://wiki.opscode.com/display/chef/File+Distribution <- describes what is supported today
[2013-01-07 11:31:34 -0500] MartinCleaver: ok, well the fqdn is reasonable. Now, say I want to set the fqdn I suppose I would use the "hostname" cookbook at http://community.opscode.com/cookbooks/hostname - how would I set this cookbook's set_fqdn attribute? In roles/rolename.rb like Example Precedence #3 in http://wiki.opscode.com/pages/viewpage.action?pageId=8257848 ?
[2013-01-07 11:31:54 -0500] MartinCleaver: Or should I set this in the manage.opscode.com gui?
[2013-01-07 11:32:01 -0500] MartinCleaver: (which doesn't seem to work)
[2013-01-07 11:35:07 -0500] HapxD: ok thanks
[2013-01-07 11:55:15 -0500] MartinCleaver: Or more generally, on what machine do I set attributes for a node? In the workstation? From the gui?
[2013-01-07 11:56:27 -0500] gyre007: how do you upgrade omnibus chef gem ?
[2013-01-07 11:56:39 -0500] gyre007: od you just need to run that curl command and restart chef-client ?
[2013-01-07 11:59:48 -0500] zts: gyre007: I haven't used it, but I've seen people pointing out http://community.opscode.com/cookbooks/omnibus_updater
[2013-01-07 12:01:08 -0500] zts: MartinCleaver: I tend to use "knife node edit" on the rare occasion that I need to set a node attribute, but I believe you should be able to do the same thing with the web interface
[2013-01-07 12:01:22 -0500] gyre007: looks interesting zts...ill have a look...although i'm thinking the re-installl or OVER-install should do too ..but ill defo check this one out
[2013-01-07 12:02:14 -0500] MartinCleaver: @jtimberman - Nathen mentioned http://www.youtube.com/watch?v=b2yVZDbEr9o&feature=plcp at 1:21:18 to put .chef into .gitignore - you might want to add that to https://github.com/opscode/chef-repo
[2013-01-07 12:04:14 -0500] MartinCleaver: (and I'd have written an Issue but Issues are switched off for chef-repo on github)
[2013-01-07 12:11:30 -0500] MartinCleaver: Assuming pem files should exist on my node, it looks like I've lost mine. Is there a quick way to push them from the workstation to the client? e.g. an scp?
[2013-01-07 12:16:21 -0500] gyre007: zts: it looks like rerunning the omnibus install does the job http://wiki.opscode.com/display/chef/Upgrading+Chef+0.10.x+to+the+newest+version+of+Chef
[2013-01-07 12:17:23 -0500] saravanan: hey i have some problem..... Errno::EINVAL: Invalid argument
[2013-01-07 12:17:33 -0500] saravanan: can anyone help me/../
[2013-01-07 12:25:14 -0500] mattp: saravanan: can you provide any context in a gist/pastebin?
[2013-01-07 12:26:15 -0500] zts: gyre007: ah, good to know!  Thankyou for the pointer
[2013-01-07 12:27:54 -0500] saravanan:  directory "/mnt/share" do    mode 0777    owner "root"    group "root"  end
[2013-01-07 12:28:19 -0500] saravanan: error on executing this line ..
[2013-01-07 13:09:51 -0500] WPsites: has anyone got any links to info on web hosts using chef? or anyone using chef to automatically spawn  new VM's automatically?
[2013-01-07 13:13:17 -0500] masterkorp: VROOOOOWWWWMMMM
[2013-01-07 13:48:36 -0500] bflad: Good morning! I was curious if anyone was doing anything to manage their system root passwords via Chef.
[2013-01-07 13:54:39 -0500] BryanWB__: bflad: fuck no
[2013-01-07 13:54:57 -0500] BryanWB__: bflad: i would love to know if there was actually a secure way to do that :)
[2013-01-07 13:54:59 -0500] cwj: disable root, manage sudo with chef
[2013-01-07 13:55:02 -0500] cwj: ta da
[2013-01-07 13:55:02 -0500] BryanWB__: w/ chef
[2013-01-07 13:55:12 -0500] BryanWB__: what cwj said
[2013-01-07 13:55:41 -0500] BryanWB__: cwj: what if a vm crashes?
[2013-01-07 13:56:03 -0500] BryanWB__: don't u want to boot from a rescue disk to fix partitions and see what went wrong?
[2013-01-07 13:56:07 -0500] bflad: thats what I'm concerned about
[2013-01-07 13:56:24 -0500] cwj: BryanWB__: we are in aws so thats a non-option
[2013-01-07 13:56:27 -0500] BryanWB__: i would prefer to disable root ssh logon
[2013-01-07 13:56:28 -0500] cwj: hasn't been a problem so far
[2013-01-07 13:56:28 -0500] bflad: I haven't needed a root password in 2 years, but on the very off chance I need to get into rescue mode
[2013-01-07 13:56:31 -0500] BryanWB__: but not disable the account
[2013-01-07 13:56:44 -0500] BryanWB__: i have needed rescue mode for disk failures
[2013-01-07 13:57:02 -0500] BryanWB__: and SAN implosions
[2013-01-07 13:57:21 -0500] bflad: If I could write to encrypted data bags, I would think it would be nice to randomly generate a password and save it in there
[2013-01-07 13:57:29 -0500] cwj: even when i was operating on baremetal, we'd just take the drive out and put it in another system
[2013-01-07 13:57:53 -0500] cwj: bflad: you need to store crypted passwords anyway, chef's user resource doesn't take plaintext passwords iirc
[2013-01-07 13:58:09 -0500] Mithrandir: bflad: yeah, been managing the system root passwd with chef for years.  Nothing magic there.
[2013-01-07 13:58:30 -0500] bflad: Mithrandir: via the users cookbook?
[2013-01-07 13:58:37 -0500] Mithrandir: no, just a user resource
[2013-01-07 13:58:58 -0500] cwj: i like the users cookbook for the user_manage lwrp
[2013-01-07 13:59:12 -0500] BryanWB__: encrypted databags aren't very secure
[2013-01-07 13:59:42 -0500] BryanWB__: cwj: not possible when the drive is on a san
[2013-01-07 13:59:51 -0500] bflad: anything is better than the "password scheme" I inherited :)
[2013-01-07 14:00:13 -0500] cwj: BryanWB__: you cant attach the LUN to another machine where you already have root?
[2013-01-07 14:00:29 -0500] cwj: sounds like a SAN't
[2013-01-07 14:00:40 -0500] BryanWB__: cwj: that would require getting the SAN admin involved, bad idea
[2013-01-07 14:00:51 -0500] cwj: ruh roh
[2013-01-07 14:00:59 -0500] BryanWB__: normally a good one though :)
[2013-01-07 14:01:59 -0500] bflad: Mithrandir: so are you using different crypted passwords for each user resource invocation or just sharing the password everywhere?
[2013-01-07 14:02:38 -0500] Mithrandir: a mix
[2013-01-07 14:02:54 -0500] Mithrandir: not that it matters, it's just a lookup table: node  hash
[2013-01-07 14:04:21 -0500] bflad: hmm. I sorta see what you're getting at. so every new node you need to add to the lookup table?
[2013-01-07 14:08:06 -0500] bflad: not an astonishing number by any means but I'm working with 87 nodes (and growing) I need to manage by myself
[2013-01-07 14:09:15 -0500] riceo: Hi, does anyone know if, with hosted chef, I need to create a new node somewhere on the opscode management site before trying to launch it via `knife bootstrap`?
[2013-01-07 14:09:20 -0500] riceo: I'm getting "Failed to authenticate as {NODE_FQDN}. Ensure that your node_name and client key are correct." when I try to bootstrap atm, which makes me think that node name isn't allowed.
[2013-01-07 14:10:13 -0500] cwj: bflad: i dont think Mithrandir is suggesting that you add each node to a hash. i believe he is reminding you that the node object itself is a hash of attributes
[2013-01-07 14:10:24 -0500] cwj: riceo: gist your command line and the error?
[2013-01-07 14:11:42 -0500] bflad: I'm just wondering how you get the plaintext password if you need it
[2013-01-07 14:13:22 -0500] cwj: there are a lot of encrypted password managers out there, e.g. keepassx, lastpass, 1password, etc
[2013-01-07 14:13:27 -0500] cwj: we use lastpass enterprise
[2013-01-07 14:14:01 -0500] riceo: cwj: Thanks: https://gist.github.com/4475270
[2013-01-07 14:14:45 -0500] bflad: we have a 1password file, but I would need a recipe to save information there then if its randomly generating passwords, otherwise I'd be sharing the same root password everywhere
[2013-01-07 14:14:55 -0500] rocket: is anyone using the chef-server cookbook?  that can help me with the ssl redirects etc?  I am trying to use a different port than 443
[2013-01-07 14:15:35 -0500] cwj: riceo: whats the timestamp on your /etc/chef/client.pem? any chance it predates the bootstrap you ran? e.g. an old client.pem is still hanging around
[2013-01-07 14:15:56 -0500] rocket: since it appears the rubygems method is now gone :(
[2013-01-07 14:16:39 -0500] cwj: bflad: if you want chef to generate a root password, set it for you everywhere, and write it down for you, all of that is possible
[2013-01-07 14:16:48 -0500] cwj: bflad: but you have to decide which compromises are ok
[2013-01-07 14:17:07 -0500] cwj: is it "ok" to write that random password down in plain text? probably not
[2013-01-07 14:17:23 -0500] cwj: ok, so where do you keep the secret that you use to decode that password?
[2013-01-07 14:17:34 -0500] riceo: cwj: Ah-hah! That was it. Deleted client.pem and it's run through without issue. Thanks a lot
[2013-01-07 14:17:41 -0500] cwj: is it a key you distribute to every node? etc etc
[2013-01-07 14:17:43 -0500] cwj: riceo: np
[2013-01-07 14:18:21 -0500] cwj: bflad: most direct implementation is probably to randomly generate a root password, store it in 1passwd
[2013-01-07 14:18:30 -0500] cwj: then generate the shadow password hash for that password
[2013-01-07 14:18:39 -0500] cwj: and distribute that hash to your nodes
[2013-01-07 14:18:47 -0500] cwj: e.g. store it in a data bag
[2013-01-07 14:19:21 -0500] cwj: users cookbook provides the user_manage lwrp for automating user account creation using the contents of a data bag
[2013-01-07 14:19:46 -0500] cwj: sky's the limit, but be careful which tradeoffs you use
[2013-01-07 14:19:52 -0500] cwj: er choose
[2013-01-07 14:23:43 -0500] arturhoo: Hi there! I am following the wiki on how to configure my chef architecture (open source server + workstations and clients), and I'm having trouble following it. I managed to install the chef server on a Ubuntu Server, and followed the "Create a Knife Client for Your Laptop/Desktop" steps on http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages
[2013-01-07 14:24:34 -0500] arturhoo: When I jumped to the next wiki entry "Workstation Setup" http://wiki.opscode.com/display/chef/Workstation+Setup, I was instructed to create a skeleton chef-repo dir
[2013-01-07 14:25:45 -0500] arturhoo: and create a new configuration folder. I already created one at `~/.chef`, and actually, the previous entry said "After you've created a chef repository, you'll want to configure it by editing knife.rb". Should I really have two different config folders?
[2013-01-07 14:26:14 -0500] arturhoo: One at my home dir and the other one inside the `chef-repo` folder?
[2013-01-07 14:26:45 -0500] cwj: arturhoo: when you run knife commands, knife will look for .chef in the current directory and recurse backward to ~ until finding one
[2013-01-07 14:26:47 -0500] cwj: so
[2013-01-07 14:26:56 -0500] cwj: if you have to manage multiple chef organizations
[2013-01-07 14:27:00 -0500] cwj: you might have multiple repos
[2013-01-07 14:27:14 -0500] cwj: and you might choose to keep a .chef/knife.rb in there
[2013-01-07 14:27:21 -0500] cwj: er in each reo
[2013-01-07 14:27:41 -0500] cwj: then you would need to be inside that repo when running knife commands in order to use that config
[2013-01-07 14:28:04 -0500] cwj: so no, you dont need both, but you might want one in your repo some day
[2013-01-07 14:28:16 -0500] arturhoo: I see... but when I try to execute `knife configure` inside my chef-repo folder (after creating the .chef dir) it tries to overwrite my `~/.chef/knife.rb` file.
[2013-01-07 14:28:45 -0500] arturhoo: Am I missing something?
[2013-01-07 14:28:58 -0500] cwj: that might be the default path for the configure sub-command
[2013-01-07 14:29:15 -0500] cwj: probably skip that step if your knife.rb is already created
[2013-01-07 14:30:21 -0500] cwj: if you already have a valid knife.rb, validation.pem and client pem, that should be all knife needs
[2013-01-07 14:30:48 -0500] arturhoo: It asks me to overwrite the ~/.chef/knife.rb file. I choose no it says: "You said no, so I'm done here."
[2013-01-07 14:31:36 -0500] arturhoo: I don't have the knife.rb inside my `.../chef-repo/.chef/` dir yet
[2013-01-07 14:32:11 -0500] cwj: what ive been trying to say is that you dont need both
[2013-01-07 14:33:16 -0500] arturhoo: I know... I got your point, and I right know I'd rather have a local .chef inside my repo folder.
[2013-01-07 14:33:46 -0500] arturhoo: And use that instead of the "global" `~/.chef/`
[2013-01-07 14:33:50 -0500] cwj: you could try using the -c flag to specify the path to the config file, but i dont know if the configure subcommand makes use of that flag
[2013-01-07 14:33:59 -0500] cwj: you can just mv ~/.chef ~/chef-repo/
[2013-01-07 14:34:17 -0500] cwj: if your knife.rb already works, no need to do a song and dance
[2013-01-07 14:35:05 -0500] arturhoo: I guess waht I am trying to say, above all, is that the wiki is inaccurate and lacks coherence across different pages (steps) of the chef-server guide.
[2013-01-07 14:35:51 -0500] cwj: yeah its kind of a mess
[2013-01-07 14:35:56 -0500] cwj: http://docs.opscode.com/ is the new docs site
[2013-01-07 14:36:01 -0500] cwj: its also a work in progress
[2013-01-07 14:37:34 -0500] arturhoo: Step 1 advocates the use of a global configuration (and reconfiguring it, without saying or pointing to how to do that, when you set up the chef-repo folder), and step 2 basically ignores that, telling us to create a local configuration with a command that doesn't work because of the global configuration created on the previous step.
[2013-01-07 14:37:42 -0500] arturhoo: I understand.
[2013-01-07 14:37:59 -0500] arturhoo: Thanks for the help cwj, it was of great help.
[2013-01-07 14:38:06 -0500] cwj: sure
[2013-01-07 14:38:18 -0500] cwj: np
[2013-01-07 14:48:00 -0500] Mez: anyone else having problems logging into manage.opscode.com ?
[2013-01-07 14:49:04 -0500] freerobby: Mez: It's been timing out for me all morning.
[2013-01-07 14:50:31 -0500] tesmar: hi all, using the database cookbook forces the mysql recipe to run in the compile phase. the problem is that I need a certain repo to be enabled for that recipe to install the correct mysql version. Any idea how to fix this?
[2013-01-07 14:54:25 -0500] kiddouk: Hej guys, I am having some trouble with rake install. It updates, upload the cookbooks but failed with a CHEF_SERVER_CONFIG unintialized. Any ideas ?
[2013-01-07 14:55:27 -0500] tesmar: does chef_gem cause this compile time behavior?
[2013-01-07 14:55:46 -0500] tesmar: if so, can I register my repo BEFORE the chef_gem run?
[2013-01-07 14:56:36 -0500] alexbst: anyone using hosted chef here ?
[2013-01-07 14:56:45 -0500] alexbst: is the console responding for you ?
[2013-01-07 14:58:26 -0500] cwj: alexbst: i am seeing errors uploading a data bag item, attempts to load manage.opscode.com seem to be timing out
[2013-01-07 14:58:46 -0500] alexbst: same
[2013-01-07 14:59:05 -0500] cwj: heheh
[2013-01-07 14:59:16 -0500] cwj: let us all bleet with one voice
[2013-01-07 14:59:22 -0500] alexbst: 'meh'
[2013-01-07 14:59:23 -0500] kiddouk: :-)
[2013-01-07 14:59:56 -0500] mattt: also having issues downloading cookbooks w/ knife
[2013-01-07 14:59:58 -0500] mattt: wonder if related
[2013-01-07 15:00:33 -0500] alexbst: node list, upload, downloading environment data, etc, all not working.
[2013-01-07 15:01:03 -0500] mattt: (not using hosted chef mind)
[2013-01-07 15:02:02 -0500] kiddouk: look like their stack is somewhat faulty.
[2013-01-07 15:03:40 -0500] bflad: as a point of reference, my nodes are reporting 5XX errors from Hosted Chef.
[2013-01-07 15:04:09 -0500] wjb: also getting errors uploading a data bag
[2013-01-07 15:04:53 -0500] mmittelstadt: ditto.
[2013-01-07 15:10:54 -0500] mattt: ooh, can install pip packages into a virtualenv w/ python cookbook
[2013-01-07 15:11:24 -0500] alexbst: they just updated the status. page
[2013-01-07 15:11:43 -0500] alexbst: to save you reading: Increased Error Rate For Hosted Chef API
[2013-01-07 15:11:45 -0500] alexbst: Mon Jan  7 15:09:07 UTC 2013 Since 1PM UTC ve been seeing service degradation on the hour. Increased 500 and slow responses. Investigation underwaywe
[2013-01-07 15:17:20 -0500] tesmar: how do I get a yum repo to install before ANYTHING lee happens on the system?
[2013-01-07 15:17:25 -0500] tesmar: *else
[2013-01-07 15:20:13 -0500] cwj: tesmar: you can do something like https://gist.github.com/4475751
[2013-01-07 15:20:37 -0500] tesmar: cwj: !!! thanks
[2013-01-07 15:20:50 -0500] zts: http://wiki.opscode.com/display/chef/Evaluate+and+Run+Resources+at+Compile+Time <- for more detail on cwj's suggestion
[2013-01-07 15:21:00 -0500] cwj: +1
[2013-01-07 15:23:41 -0500] geekbri: is the API down right now?
[2013-01-07 15:24:11 -0500] geekbri: oh nevermind, status page must have just got updated.
[2013-01-07 15:24:14 -0500] alexbst: geekbri it has been but it seems to be slowly recoverig
[2013-01-07 15:24:44 -0500] alexbst: at least a few of my recent api attempts have succeeded in the past few minutes
[2013-01-07 15:47:08 -0500] tesmar: zts: cwj I tried that and chef reports that it is installing, however it then proceeds to install the wrong mysql version. IF I ssh into the vagrant box, I see that the repo was not actually added, although the vagrant output reports that it was
[2013-01-07 15:47:14 -0500] tesmar: this is very strange
[2013-01-07 15:47:36 -0500] WPsites: if I use override-runlist option of chef-client is there a way to pass in some temporary data for those run list/recipes to access?
[2013-01-07 15:49:52 -0500] zts: tesmar: how are you checking whether the repo was added?
[2013-01-07 15:50:14 -0500] tesmar: zts: I sshd into the machine after chef reported it and checked /etc/repos.d
[2013-01-07 15:54:16 -0500] tesmar: why would it not put the file there, but report that it was installing it
[2013-01-07 15:54:45 -0500] tesmar: I know that it is not there also because the next step in the compile is to install mysql, and it grabs a wrong version from a wrong repo
[2013-01-07 15:55:44 -0500] tesmar: zts: https://gist.github.com/771200069097ebe62e82
[2013-01-07 15:55:56 -0500] tesmar: I want mysql 5.5 from remi, not 5.0 from defaults
[2013-01-07 15:56:03 -0500] tesmar: I even added that run_action twice
[2013-01-07 15:56:11 -0500] tesmar: once or twice, it does not work
[2013-01-07 16:02:52 -0500] tesmar: agh chef is so frustrating
[2013-01-07 16:04:19 -0500] zts: tesmar: and there is definitely no file /etc/yum.repos.d/remi.repo on your system?
[2013-01-07 16:04:37 -0500] zts: tesmar: if the logs appear to be lying, usually my next step is to use "-l debug" for more details about what's going on
[2013-01-07 16:04:42 -0500] tesmar: zts: yes, in fact later on it says "processing template"
[2013-01-07 16:04:56 -0500] tesmar: so I add the :add action, but the template processing is delayed?
[2013-01-07 16:05:05 -0500] tesmar: until after an old version of mysql is installed
[2013-01-07 16:05:12 -0500] geekbri: can you maybe pastebin the output of the chef run?
[2013-01-07 16:05:22 -0500] gchristensen: tesmar: "it get sbetter"
[2013-01-07 16:05:32 -0500] tesmar: geekbri: sure
[2013-01-07 16:06:12 -0500] tesmar: geekbri: https://gist.github.com/f7a24425ce77de600fb6
[2013-01-07 16:06:24 -0500] tesmar: gchristensen: thanks, I sure hope so :)
[2013-01-07 16:06:48 -0500] tesmar: gchristensen: I am trying to install the remi repo which has a newer mysql and php
[2013-01-07 16:07:02 -0500] tesmar: by the time I tell it to install php, the yum template has been processed
[2013-01-07 16:07:12 -0500] tesmar: so it installs the newer php, which relies on the newer mysql
[2013-01-07 16:07:24 -0500] tesmar: hence the error, and my attempt to load the remi yum repo first thing
[2013-01-07 16:07:39 -0500] zts: tesmar: at a guess (I don't have time to verify, sorry), the yum_repository resource is invoking other resources, which aren't being run at compile-time
[2013-01-07 16:08:00 -0500] tesmar: zts: ok, so I should change them to be invoked at compile time?
[2013-01-07 16:08:16 -0500] geekbri: tesmar: you could try giving it action nothing, then calling run_action(:add) on it right then and there
[2013-01-07 16:08:26 -0500] stuntmachine: Any word on when an omnibus installer will be available for 10.8? There's a hackish way to make 10.8 map to 10.7.2, but it's just that, hackish.
[2013-01-07 16:08:31 -0500] tesmar: geekbri: you mean on the template call?
[2013-01-07 16:08:35 -0500] zts: tesmar: so, some options... 1) follow that rabbit-hole deeper, patch yum_repository to make it do that.  2) ignore the yum_repository resource, use core resources to setup things the way they need to be (using the .run_action trick), or 3) converge in two steps
[2013-01-07 16:08:39 -0500] tesmar: so t = template do
[2013-01-07 16:08:43 -0500] geekbri: tesmar: can you gist the cookbook recipe this is happening in?
[2013-01-07 16:08:47 -0500] tesmar: sure
[2013-01-07 16:09:37 -0500] geekbri: tesmar: https://gist.github.com/f7a24425ce77de600fb6#file-gistfile1-txt-L36-L55
[2013-01-07 16:10:09 -0500] geekbri: tesmar: you can see there that its installing mysql before its doing the templates for the remi repo
[2013-01-07 16:10:10 -0500] geekbri: odd.
[2013-01-07 16:10:19 -0500] tesmar: geekbri: yes, the template is being processed later
[2013-01-07 16:10:44 -0500] tesmar: geekbri: it started happening after I added the database cookbook
[2013-01-07 16:11:11 -0500] zts: tesmar: to expand on the last point, I have sometimes settled on having a "base" role that I first apply to a new system (which sets up repos, locales, etc), then add further roles and run chef again
[2013-01-07 16:11:18 -0500] geekbri: ^
[2013-01-07 16:11:19 -0500] geekbri: I do that too
[2013-01-07 16:11:25 -0500] geekbri: It seems to me like maybe this
[2013-01-07 16:11:43 -0500] geekbri: "database" cookbook is running and doing this immediately instead of at execution time
[2013-01-07 16:12:17 -0500] geekbri: honestly i'd have to see the run list, and the different cookbook recipes to really know whats going on.
[2013-01-07 16:12:29 -0500] tesmar: geekbri: zts  2 chef runs?
[2013-01-07 16:12:40 -0500] tesmar: that makes sense I guess, but is kind of annoying :)
[2013-01-07 16:12:51 -0500] geekbri: No, not two chef runs
[2013-01-07 16:13:00 -0500] geekbri: not at all, to me anything that takes 2 chef runs is generally a failure :)
[2013-01-07 16:13:17 -0500] tesmar: geekbri: that's what zts said....
[2013-01-07 16:13:22 -0500] zts: tesmar: in contrast with geekbri, yes two runs is exactly what I'm saying
[2013-01-07 16:13:34 -0500] geekbri: Oh well, then I guess i disagree with him :)
[2013-01-07 16:13:35 -0500] tesmar: yeah, I think it is the chef_gem call that messes me up
[2013-01-07 16:13:47 -0500] geekbri: him/her
[2013-01-07 16:13:50 -0500] tesmar: it is the cookbook database, which includes mysql::client
[2013-01-07 16:14:21 -0500] zts: tesmar: the other thing to be doing is opening up tickets (in the COOK project) to record the way that the current cookbooks don't meet your use case
[2013-01-07 16:14:38 -0500] zts: tesmar: wanting to specify an alternate repo, to get newer packages, really shouldn't be too much to ask :)
[2013-01-07 16:15:09 -0500] tesmar: zts: sure thing
[2013-01-07 16:16:16 -0500] geekbri: What I meant earlier is that I have a base role that applies stuff across the board like repos, locales etc.  However i do have everything work in 1 run
[2013-01-07 16:16:39 -0500] geekbri: sometimes that doesn't indeed require a run_action method call.  Other times it just means making sure all resources are in the proper order and behaving properly :)
[2013-01-07 16:18:24 -0500] tesmar: geekbri: I think this is messing me up
[2013-01-07 16:18:25 -0500] tesmar: https://github.com/opscode-cookbooks/mysql/blob/master/recipes/ruby.rb
[2013-01-07 16:18:38 -0500] tesmar: I include a recipe in my db_master role which includes this file
[2013-01-07 16:19:06 -0500] geekbri: tesmar: that will force an apt-get update immediately.  It will also cause build-essential and mysql::client recipes to be run at that point
[2013-01-07 16:19:15 -0500] tesmar: geekbri: I am on centos
[2013-01-07 16:19:30 -0500] geekbri: right sorry, slipped my mind
[2013-01-07 16:19:56 -0500] tesmar: geekbri: hmm, that stinks as I need the database recipe to use commands like mysql_database
[2013-01-07 16:20:20 -0500] geekbri: what cookbook are you using to install your remi repo
[2013-01-07 16:20:35 -0500] tesmar: the yum cookbook
[2013-01-07 16:20:36 -0500] zts: it only runs apt-get update if you're on a debian(-derived) system
[2013-01-07 16:20:50 -0500] tesmar: I just copied epel recipe and modified it for remi
[2013-01-07 16:20:52 -0500] geekbri: yes, I just defaulted to thiking that was the case because thats the family of systems i run :P
[2013-01-07 16:20:59 -0500] tesmar: hehe
[2013-01-07 16:21:19 -0500] tesmar: geekbri: is there a way to force that template to run immediately?
[2013-01-07 16:21:24 -0500] geekbri: tesmar: yes.
[2013-01-07 16:21:35 -0500] geekbri: you can force any resource to run immediately using the .run_action method.
[2013-01-07 16:21:36 -0500] tesmar: it seems to run the remi yum thing first, but defers the template
[2013-01-07 16:21:42 -0500] tesmar: geekbri: I'll give it a try
[2013-01-07 16:21:51 -0500] tesmar: so for template .run_action(:add) ?
[2013-01-07 16:21:54 -0500] geekbri: Use it with care though.  It should be used when that is actually what you want to happen not just because you have a run list with out of order resources
[2013-01-07 16:22:17 -0500] geekbri: tesmar: yes that would work
[2013-01-07 16:22:26 -0500] tesmar: I'd use it with more care if this mysql::ruby wasn't forcing my hand
[2013-01-07 16:22:27 -0500] tesmar:  :)
[2013-01-07 16:23:17 -0500] geekbri: tesmar: isn't the action for a template :create ?
[2013-01-07 16:23:36 -0500] tesmar: geekbri: perhaps :)
[2013-01-07 16:23:44 -0500] tesmar: running vagrant again...
[2013-01-07 16:24:08 -0500] geekbri: if its a template resource it should probably be :create.  If you are calling the yum_repository resource it looks like it coudl be :add or :update
[2013-01-07 16:24:53 -0500] bougyman: masterkorp: ?
[2013-01-07 16:26:36 -0500] masterkorp: yes
[2013-01-07 16:26:43 -0500] masterkorp: hello
[2013-01-07 16:28:13 -0500] nomadwashere: I currently have a LWRP in cookbook 1 which gets a download URL and stores it in a variable. Can I use this LWRP in another cookbook and somehow get the value of that variable?
[2013-01-07 16:28:59 -0500] tesmar: geekbri: zts that seemed to have fixed it, now installing the proper mysql version!
[2013-01-07 16:35:38 -0500] paigeat: mayonaise slopped all over
[2013-01-07 16:37:34 -0500] geekbri: ?!
[2013-01-07 16:38:53 -0500] geekbri: nomadwashere: You can't do that.  Or at least even if you came up with a way to do that, you SHOUDLNT do that.  what exactly are you trying to accomplish?
[2013-01-07 16:41:34 -0500] nomadwashere: geekbri: So, I basically wrote a LWRP to get the link for my latest builds. I thought since this could be generic (could get link to latest builds for all projects) I could use it with other cookbooks to deploy. What's the better way/correct way to do this?
[2013-01-07 16:42:35 -0500] geekbri: That sounds to me like that something that should be in a gem or a library
[2013-01-07 16:42:48 -0500] geekbri: and LWRP is typically some repeatedly action you want to take that changes the system somehow
[2013-01-07 16:43:04 -0500] geekbri: like making sure a directory exists, or installing something
[2013-01-07 16:44:50 -0500] oddover: Hey guys. I think I found a bug...or I'm doing something wrong. Here's a pastebin with the details: http://pastebin.com/mrpTyyme
[2013-01-07 16:44:58 -0500] zts: nomadwashere: an ohai plugin would be a better fit than an LWRP
[2013-01-07 16:44:59 -0500] nomadwashere: new to chef/ruby. Point me to any good links I can read up on library or gem?
[2013-01-07 16:45:32 -0500] nomadwashere: thanks
[2013-01-07 16:46:42 -0500] geekbri: nomadwashere: what zts said is a very very good point.  I think an ohai plugin may be the way to go
[2013-01-07 16:47:15 -0500] geekbri: oddover: Was the device unmounted inbetween runs?
[2013-01-07 16:47:35 -0500] oddover: no
[2013-01-07 16:49:12 -0500] geekbri: oddover: I'm poking around in the provider to see if I notice anything thats not checking the status of pass
[2013-01-07 16:49:22 -0500] oddover: k
[2013-01-07 16:50:31 -0500] WPsites: im using --override-runlist to choose a single role I want to run and then passing some info to the node using --json-attributes which should also be temporary. But each time the json info gets added to the node. I've thought about creating a cookbook called temporary-attributes that will let me store attributes that will then be wiped out at the end of the run. Is there any other way I could deal with this?
[2013-01-07 16:51:35 -0500] WPsites: I just want a selective run of recipes and be able to pass some temporary info to the recipe
[2013-01-07 16:57:24 -0500] geekbri: oddover: What version of chef are you on?  Looking at the provider for mount in 10.16.4, it looks like it should be properly disabling the mount then enabling it again
[2013-01-07 17:00:50 -0500] oddover: Chef: 10.12.0
[2013-01-07 17:08:40 -0500] lehrblogger: hi, i'm trying to install python 2.6 from source using http://community.opscode.com/cookbooks/python on an ubuntu 12.04 image that also has python 2.7
[2013-01-07 17:08:54 -0500] lehrblogger: but it fails trying to run distribute_setup.py here (https://github.com/opscode-cookbooks/python/blob/master/recipes/pip.rb#L42) because it's missing the _sha256 module, which makes it sound like i'm missing some SSL libraries. but that import works fine on python 2.7 on the same machine.
[2013-01-07 17:09:11 -0500] lehrblogger: it seems from http://superuser.com/questions/520845/how-do-i-install-pip-virtualenv-python-2-6-and-python-2-7-on-ubuntu-12-04 that I could fix it by editing Modules/Setup before compiling, but that seems messy to automate. anyone have any suggestions?
[2013-01-07 17:13:00 -0500] kreedy: Hey this is crazy, but has anyone tried to run chef-client on an android device?
[2013-01-07 17:13:29 -0500] pwelch: kreedy: not that I know of but I was actually thinking about that the other day
[2013-01-07 17:13:44 -0500] pwelch: I know cfengine did a post on how they got it to run on an android device
[2013-01-07 17:13:51 -0500] kreedy: interesting
[2013-01-07 17:14:00 -0500] pwelch: you might be able to if you if moved it to jruby and make an android provider
[2013-01-07 17:14:08 -0500] pwelch: it would be a cool "just because" project
[2013-01-07 17:14:41 -0500] pwelch: I think its mostly proof of concept: http://cfengine.com/demos/cfengine-android
[2013-01-07 17:14:54 -0500] pwelch: but if cfengine can do it I bet there could be a way to do it with chef
[2013-01-07 17:15:40 -0500] oddover: geekbri: Any luck on finding anything else about the issue?
[2013-01-07 17:16:16 -0500] kreedy: thanks pwelch! i'll look into that. i actually might have a use case that is larger than a "just because" project, but it's pretty unique to our business
[2013-01-07 17:16:57 -0500] pwelch: if you end up making chef-client run on android hit me up on twitter @pwelch. I would be interested to see it
[2013-01-07 17:17:35 -0500] kreedy: will do
[2013-01-07 17:49:14 -0500] c_t:  , 
[2013-01-07 18:34:58 -0500] qhartman: chefs! How have you convinced management that it's a good idea to publicly release cookbooks you wrote? I just finished one that I think people would find valuable and I would like to release it, but mgmt here is generally against that.
[2013-01-07 18:35:35 -0500] qhartman: I have lots of experience convincing orgs to use OSS, but not release things as OSS.
[2013-01-07 18:36:50 -0500] chip-: "If our code is good, then our name gets out there as an organization that writes good code. If our code is VERY good, other people may QA it, and develop it further for us, for free."
[2013-01-07 18:39:38 -0500] qhartman: yeah, that's kinda what I was heading towards
[2013-01-07 18:40:34 -0500] mattray: "writing and sharing OSS is very attractive to some folks who might want to work here"
[2013-01-07 18:41:35 -0500] chip-: Generally when pitching a plan like that, I start with every negative I can think of.
[2013-01-07 18:41:38 -0500] chip-: For instance:
[2013-01-07 18:41:40 -0500] chip-: Possible negatives: If your competition has the same problem, you've just solved it for them.
[2013-01-07 18:41:51 -0500] chip-: upside: We now control the conversation around the solution to this problem.
[2013-01-07 18:42:04 -0500] c3vin: greetings all
[2013-01-07 18:42:20 -0500] c3vin: I'm building out a nagios server and would like to utilize chef recipe
[2013-01-07 18:42:39 -0500] c3vin: I do not have any existing infrastructure, so I'm building all from scratch
[2013-01-07 18:43:07 -0500] c3vin: what is best way to get started with chef w/o existing server or puppet?
[2013-01-07 18:43:17 -0500] c3vin: should I buildout chef server?
[2013-01-07 18:44:00 -0500] chip-: c3vin: If you just want to prototype, sign up for a free 5-node account on Hosted Chef.
[2013-01-07 18:44:19 -0500] chip-: Once you have an example up, then you can decide about where and how to build infrastructure.
[2013-01-07 18:44:27 -0500] c3vin: thanks chip-
[2013-01-07 18:45:22 -0500] lehrblogger: is there a list somewhere of the opscode base boxes? i need one with ubuntu and python 2.6.5
[2013-01-07 18:45:49 -0500] chip-: lehrblogger: https://github.com/opscode/bento
[2013-01-07 18:46:02 -0500] lehrblogger: ah, thanks!
[2013-01-07 18:48:14 -0500] jtimberman: lehrblogger: those base boxes are "default" installs, and have whatever the particular distributions include in their package repositories.
[2013-01-07 18:50:31 -0500] lehrblogger: jtimberman, ok, thanks. i was having issues installing python 2.6 from source, and it looks like ubuntu 10.04 will have it by default
[2013-01-07 18:50:49 -0500] lehrblogger: (and hopefully i only need python 2.6 temporarily to debug something else...)
[2013-01-07 19:03:41 -0500] ssd7: Code Review: https://plus.google.com/hangouts/_/e3b874853ef6d4e340da402f37de42b7efc9bd5b?authuser=0&hl=en#
[2013-01-07 19:10:18 -0500] lehrblogger: (i'll come back for the cookbook review)
[2013-01-07 19:17:45 -0500] pwelch: ssd7: is there a stream to youtube for the code review?
[2013-01-07 19:18:25 -0500] ssd7: pwelch: Unfortunately we were having some trouble getting it started and decided to move forward to not lose too much time.
[2013-01-07 19:18:53 -0500] pwelch: ssd7: gotcha thanks
[2013-01-07 19:26:56 -0500] BlackMaria: noob question for graphite/tasseo/chef    do I we also set the port in [tasseo][graphite_url] ?   ( is this the best place to ask? should I ask on graphite?) thnx
[2013-01-07 19:31:51 -0500] binjured: having some trouble getting `knife bootstrap` to work. it keeps telling me "Precondition failed" but there are no missing cookbooks.
[2013-01-07 19:32:12 -0500] binjured: e.g., when i do `knife bootstrap ... -r 'some_cookbook'`
[2013-01-07 19:32:52 -0500] spox: binjured: -r 'recipe[some_cookbook]' ?
[2013-01-07 19:33:04 -0500] binjured: spox: yes.
[2013-01-07 19:33:49 -0500] binjured: message is "Unable to satisfy constraints on cookbook artifact due to run list item (my_thing >= 0.0.0)"
[2013-01-07 19:34:14 -0500] binjured: it's complaining about "artifact ~> 0.10.7" which is clearly on the chef server.
[2013-01-07 19:38:55 -0500] WPsites: how can i turn an array into a json structure inside a recipe?
[2013-01-07 19:39:00 -0500] binjured: it would appear any recipe i pass to -r results in the same error.
[2013-01-07 19:40:44 -0500] binjured: and chef-client via my local vagrant VM works just fine :/
[2013-01-07 19:48:03 -0500] jonathanmickle: hi I have an array of values on an entry in an environment file that i need to plug into a template. Does anyone have an example of how to do this?
[2013-01-07 19:48:07 -0500] binjured: this is super weird. basically if i install all the dependencies manually, it works. but it seems unable to resolve them automatically.
[2013-01-07 19:49:23 -0500] mgalkiewicz: hello guys
[2013-01-07 19:49:59 -0500] mgalkiewicz: I am trying to recreate chef client by running chef-client without client.pem but with validation.pem
[2013-01-07 19:50:28 -0500] mgalkiewicz: I got error "There may already be a client named "n1c3.winniecloud.net""
[2013-01-07 19:50:45 -0500] mgalkiewicz: it is working fine with my old cluster with chef-server 10.16.4
[2013-01-07 19:51:12 -0500] mgalkiewicz: the client is just recreated and client.pem appears in /etc/chef
[2013-01-07 19:51:32 -0500] mgalkiewicz: why it may not work this way with recently installed chef from scratch?
[2013-01-07 20:01:25 -0500] mmorris: Hi all! does anyone know how to get encrypted data bags or node.chef_environment working in chef-solo?
[2013-01-07 20:04:48 -0500] lehrblogger: could someone send me the link to the cookbook review hangout when it's live? someone said they'd tweet the link, but i didn't have time to see who it was :)
[2013-01-07 20:05:48 -0500] nobody__: I recently started to try writing recipes. Atm I have a somewhat complicated task for the recipe: Download a f
[2013-01-07 20:06:09 -0500] nobody__: ..ile, if it changed, mount it (iso file), copy some things out, and unmount it
[2013-01-07 20:07:27 -0500] jtimberman: Opscode COOK code review Google+ Hangout: https://plus.google.com/hangouts/_/33ffd28eac014e7b6c32863489cea1c288bcaf59 Or live stream on YouTube: http://www.youtube.com/watch?v=ogw1xMjODdw
[2013-01-07 20:08:07 -0500] pwelch: Google Hangouts for code review is awesome. Thanks for putting those up.
[2013-01-07 20:08:11 -0500] nstielau1: Yeah
[2013-01-07 20:08:15 -0500] nobody__: does someone have any pointers or suggestions on the general aproach I should take on that issue or where I could read up about it? (I would like to have a definition/resource/something for the mount/&block/unmount thing because it is recurring in various places)
[2013-01-07 20:09:27 -0500] nstielau1: Wrote a blawg post about a security hole I created for myself with Chef.  Feedback appreciated here or in comments: http://dev.nuclearrooster.com/2013/01/07/chef-symlink-attack-vector/
[2013-01-07 20:10:53 -0500] railsraider: anyone got chef-solo-search to work with chef solo?
[2013-01-07 20:11:09 -0500] nobody__: nstielau1: template is probably insecure as well, I would guess
[2013-01-07 20:11:13 -0500] mgalkiewicz: looks like chef-validator has to be admin user
[2013-01-07 20:12:10 -0500] jonathanmickle: anyone know how to get the last attribute in an array in chef
[2013-01-07 20:12:13 -0500] nobody__: nstielau1: (I think about e.g. creating "/home/bob/documents/hi.txt" using template...)
[2013-01-07 20:12:14 -0500] jonathanmickle: ruby uses array.last
[2013-01-07 20:12:21 -0500] jonathanmickle: but its not coming as an undefined method
[2013-01-07 20:13:45 -0500] nobody__: nstielau1: the conclusion is right imho, fiddling with user data should best be done with reduced privileges
[2013-01-07 20:16:33 -0500] railsraider: jonathanmickle:  maybe its a hash ?
[2013-01-07 20:16:59 -0500] jonathanmickle: ah possible how do you get the end of a hash?
[2013-01-07 20:17:11 -0500] jonathanmickle: basically i need to add a comma after every line in the array except on the last one
[2013-01-07 20:17:13 -0500] railsraider: [:key]
[2013-01-07 20:17:15 -0500] jonathanmickle: as its a erlang config
[2013-01-07 20:17:40 -0500] jonathanmickle: <% @us_numbers.each do |number| -%> "<%= number %>"<%="," unless @us_numbers.last %><% end -%>
[2013-01-07 20:17:43 -0500] jonathanmickle: is how i was doing it
[2013-01-07 20:18:21 -0500] railsraider: unless @us_numbers.lst == number
[2013-01-07 20:18:49 -0500] railsraider: your condition is wrong
[2013-01-07 20:19:42 -0500] railsraider: <%= @us_numbers.last == number ? ',' :  number %>
[2013-01-07 20:21:31 -0500] railsraider: anyone using the chef solo search https://github.com/edelight/chef-solo-search i followed all the instructions and still chef-solo does not really utilize the library
[2013-01-07 20:22:19 -0500] maplebed: jonathanmickle: you can also use array.join(',') and it'll only put them in between values.
[2013-01-07 20:22:49 -0500] maplebed: eg a = ["a", "b", "c"], a.join(', ') => "a, b, c"
[2013-01-07 20:22:52 -0500] jonathanmickle: ah
[2013-01-07 20:23:25 -0500] jonathanmickle: what are the ?'s in ruby?
[2013-01-07 20:23:30 -0500] jonathanmickle: are they like conditionals
[2013-01-07 20:23:54 -0500] railsraider: ternary ( a short if)
[2013-01-07 20:24:07 -0500] maplebed: http://invisibleblocks.com/2007/06/11/rubys-other-ternary-operator/
[2013-01-07 20:24:42 -0500] mmorris: railsraider: is the reason you need to use chef-solo-search because you're running older than chef 10.4?
[2013-01-07 20:25:10 -0500] railsraider: 10.14.2
[2013-01-07 20:25:26 -0500] railsraider: maybe i need to upgrade
[2013-01-07 20:25:47 -0500] mmorris: no you shouldn't need chef-solo-search
[2013-01-07 20:25:54 -0500] mmorris: search was implemented in 10.4
[2013-01-07 20:26:02 -0500] agent462: jonathanmickle: if it's at the end of a method it is a method that returns true or false
[2013-01-07 20:26:17 -0500] jonathanmickle: ah thanks
[2013-01-07 20:26:26 -0500] jonathanmickle: the short if was the one i wasn't sure of
[2013-01-07 20:30:38 -0500] mmorris: railsraider: "Chef-solo-search is a cookbook library that adds data bag search powers to Chef Solo. Data bag support was added to Chef Solo by Chef 0.10.4."
[2013-01-07 20:30:55 -0500] railsraider: i just updated to 10.16
[2013-01-07 20:30:59 -0500] railsraider: still doesnt work
[2013-01-07 20:31:02 -0500] mmorris: maybe that means something different
[2013-01-07 20:31:15 -0500] mmorris: maybe data bag was added in 10.4 but not search
[2013-01-07 20:31:15 -0500] railsraider: i use shef -s -c /etc/chef/solo.rb
[2013-01-07 20:31:39 -0500] railsraider: then recipe toswitch ti recipe context
[2013-01-07 20:31:53 -0500] railsraider: then i do include_recipe "chef-solo-search"
[2013-01-07 20:31:59 -0500] railsraider: and when i do search(:users, "*:*")
[2013-01-07 20:32:13 -0500] jbz: Broad question here.  Does anyone have any recommendations/preferences for an infrastructure description language/engine?  Something like Ironfan but which uses JSON rather than a Ruby DSL, so that its scripts can be machine-managed?
[2013-01-07 20:32:18 -0500] railsraider: i get the usual annoying error Chef::Exceptions::PrivateKeyMissing: I cannot read /etc/chef/client.pem, which you told me to use to sign requests!
[2013-01-07 20:32:25 -0500] railsraider: which means the search is not working
[2013-01-07 20:32:28 -0500] mikeroth: does anyone know how to add a repo with the chef bootstrap file?
[2013-01-07 20:32:56 -0500] mmorris: haha I am actually trying to fix that myself right now
[2013-01-07 20:33:11 -0500] mikeroth: awesome
[2013-01-07 20:33:12 -0500] mmorris: does anybody know if data bag search is available in solo 10.4+???
[2013-01-07 20:33:30 -0500] mmorris: or is it just data bag functionality but not search
[2013-01-07 20:33:40 -0500] railsraider: it should work
[2013-01-07 20:34:22 -0500] railsraider: you can use the knife backup plugin to download all the nodes fom the chef server to json files
[2013-01-07 20:34:47 -0500] railsraider: mmoris its not the databag search that's available
[2013-01-07 20:34:54 -0500] railsraider: its the path to it
[2013-01-07 20:34:58 -0500] railsraider: in the ocnfig
[2013-01-07 20:35:05 -0500] railsraider: like roles and cookbook path
[2013-01-07 20:35:20 -0500] mmorris: i assume you've seen this? http://stackoverflow.com/questions/9882074/how-do-i-create-user-account-by-chef-solo
[2013-01-07 20:35:35 -0500] railsraider: the cookbook of chef-solo-search  is that
[2013-01-07 20:35:39 -0500] railsraider: yes
[2013-01-07 20:35:55 -0500] mmorris: ""Note that the "users" cookbook currently checks for Chef Solo and will not run if detected. This is part of an effort recently to pass linting check from foodcritic, per FC003. Version 1.1.2 of the users cookbook does not include this change (it is in the master branch)"
[2013-01-07 20:36:20 -0500] mmorris: is that related?
[2013-01-07 20:36:25 -0500] mmorris: you're searchin users?
[2013-01-07 20:37:18 -0500] dbryant: Does anyone know of a working example of a chef recipe which deploys a django app using the "application_python" and "application" cookbooks from community.opscode.com? I seem to be getting the following error "Chef::Exceptions::ValidationFailed: Option cookbook must be a kind of [String]!  You passed :vpnpki." while trying to deploy my django app.
[2013-01-07 20:37:43 -0500] mmorris: railsraider: yea i remember trying to get chef-solo-search working and I couldn't
[2013-01-07 20:38:00 -0500] railsraider: i have to get it working
[2013-01-07 20:38:24 -0500] mmorris: i think we're in the same boat
[2013-01-07 20:40:07 -0500] mmorris: i'll try again and see if I can get it working
[2013-01-07 20:40:50 -0500] mmorris: is the cookbook actually support to be called "dummy-"?
[2013-01-07 20:40:55 -0500] mmorris: i wish there was a better guide
[2013-01-07 20:44:55 -0500] railsraider: mmorris: no
[2013-01-07 20:45:03 -0500] railsraider: mmoris its working now
[2013-01-07 20:45:12 -0500] railsraider: download the whole cookbook as zip
[2013-01-07 20:45:18 -0500] railsraider: dont create it
[2013-01-07 20:45:28 -0500] railsraider: now  i get Chef::Exceptions::InvalidDataBagPath: Data bag path '/etc/chef/databags' is invalid
[2013-01-07 20:45:35 -0500] railsraider: which is great
[2013-01-07 20:45:49 -0500] railsraider: https://github.com/edelight/chef-solo-search
[2013-01-07 20:49:06 -0500] railsraider: yesssss its working now!
[2013-01-07 20:50:49 -0500] mmorris: haha i think we are doing things at the same time. my cookbook just passed too
[2013-01-07 20:50:53 -0500] mmorris: good work team
[2013-01-07 20:51:00 -0500] railsraider: :)
[2013-01-07 20:51:15 -0500] railsraider: did you add the cookbook to the runlist?
[2013-01-07 20:51:27 -0500] mmorris: the dummy one?
[2013-01-07 20:51:43 -0500] railsraider: yes
[2013-01-07 20:51:52 -0500] mmorris: i didn't
[2013-01-07 20:51:57 -0500] mmorris: it's in the cookbook path
[2013-01-07 20:52:03 -0500] mmorris: not the run list though..
[2013-01-07 20:52:03 -0500] mmorris: ship;d it be?
[2013-01-07 20:52:08 -0500] mmorris: should*
[2013-01-07 20:52:15 -0500] railsraider: checking...
[2013-01-07 20:52:28 -0500] railsraider: you're right
[2013-01-07 20:52:34 -0500] railsraider: doesnt need to be
[2013-01-07 20:52:38 -0500] mmorris: cool
[2013-01-07 20:52:42 -0500] railsraider: finally my runlist runs
[2013-01-07 20:52:50 -0500] railsraider: nice
[2013-01-07 20:53:35 -0500] wbednarski: Hi there! Anyone? http://stackoverflow.com/questions/14182515/vagrant-how-to-print-chefs-command-output-to-stdout
[2013-01-07 20:53:57 -0500] railsraider: mmorris: use this to get the nodes into databag http://wiki.opscode.com/display/chef/Migrating+to+Hosted+Chef+from+an+Open+Source+Chef+Server+implementation
[2013-01-07 20:54:23 -0500] mmorris: wbednarski: i'm trying to get chef reporting to stout too haha
[2013-01-07 20:54:29 -0500] mmorris: haven't looked into it too much yet though
[2013-01-07 20:54:40 -0500] railsraider: why?
[2013-01-07 20:54:59 -0500] railsraider: its saves the log to /var/chef/cache something
[2013-01-07 20:55:19 -0500] mmorris: I have stdout going to loggly
[2013-01-07 20:56:31 -0500] wbednarski: railsraider but how to redirect it to stdout?
[2013-01-07 20:57:15 -0500] wbednarski: I've tried chef.log_level = :debug but without success
[2013-01-07 20:57:27 -0500] wbednarski: (in Vagrantfile)
[2013-01-07 20:59:17 -0500] nobody__: I need to write a recipe to do the following: Download an iso image, Mount it, Copy some files out of it, and unmount it. Especially that mount/unmount part seems tricky to me because if it fails in between, it should of course still unmount the image. Any pointers on where I could start reading up about things like these?
[2013-01-07 21:00:04 -0500] pwelch: nobody__: Chef Doc in the Resources
[2013-01-07 21:00:42 -0500] pwelch: you could use something like remote_file, mount, execute a file move then unmount though depending on the ISO that would be a very long chef run
[2013-01-07 21:00:54 -0500] pwelch: not something you can do with a ruby script?
[2013-01-07 21:01:07 -0500] pwelch: or extract those files and then drop them off in your cookbook?
[2013-01-07 21:01:34 -0500] FarmKing: is there an opscode recipe already that I can use to iterate through a data bag and ensure that all named debian pacakges are installed?
[2013-01-07 21:02:03 -0500] FarmKing: I can build my own, but it seems like something that probably already exists
[2013-01-07 21:02:13 -0500] FarmKing: same for gems
[2013-01-07 21:03:01 -0500] pwelch: FarmKing: do you want a report or just to install them if they are missing?
[2013-01-07 21:03:16 -0500] FarmKing: just install if missing
[2013-01-07 21:04:30 -0500] binjured: i have a node that says it has an empty run list, but there is a recipe present when i go to the management interface.
[2013-01-07 21:04:32 -0500] pwelch: FarmKing: you could try checking the community.opscode.com site but that is something I think most people just use as their own cookbook. I would just make a "base_packages" cookbook that searches a databag or add them in as an array list
[2013-01-07 21:05:01 -0500] nobody__: pwelch: I am yet unsure about the execution model of a chef run so I am unsure how I should approach that ideally. What I would do in a script (I am no ruby expert either) would be something along the lines of http://pastebin.com/dRZ8PCid and then using this to do the actual task
[2013-01-07 21:05:30 -0500] FarmKing: pwelch: thanks.  that confirms what I was seeing, but wanted to be sure I hadn't missed something
[2013-01-07 21:06:05 -0500] nobody__: pwelch: but it seems that such an approch doesn't fit the execution model very well because the tasks are not actually executed while running through the script, but they are just collected at that point of execution, if I am not mistaken
[2013-01-07 21:06:06 -0500] toobulkeh: I have a question trying to migrate from librarian to Berkshelf with a local Vagrant VM. How do I include my recipes I use to use in the Vagrantfile using chef.add_recipe "apt"?
[2013-01-07 21:06:12 -0500] binjured: or, more specifically, the node (on manage.opscode.com) *has* a recipe list, which is deleted when i run chef-client ...
[2013-01-07 21:06:14 -0500] pwelch: nobody__: is this ISO constantly changing? if these are files are not getting updated often then I would just include them in your cookbook as a cookbook_file to drop off (if they are small enough) or store them somewhere and use remote_file resource
[2013-01-07 21:06:23 -0500] toobulkeh: Since I'm now using "require 'berkshelf/vagrant'" in my Vagrantfile
[2013-01-07 21:06:47 -0500] ivey: toobulkeh: berkshelf plugin will make everything available to the VM
[2013-01-07 21:07:04 -0500] toobulkeh: ivey: then how do I tell it which recipes to use on boot?
[2013-01-07 21:07:07 -0500] ivey: so you just add them to the run list like you would with any other chef provisioner
[2013-01-07 21:07:41 -0500] nobody__: pwelch: I already have the remote_file part somewhat figured out. I gave a checksum so it does not get loaded on every run
[2013-01-07 21:07:55 -0500] ivey: toobulkeh: using add_recipe
[2013-01-07 21:08:05 -0500] nobody__: pwelch: ideally, I would like to have a definition/resource/whatever that gets triggered when the remote file gets updated
[2013-01-07 21:08:13 -0500] toobulkeh: Hmmm, I must not be understanding my error then, let me check.. one second
[2013-01-07 21:08:42 -0500] pwelch: nobody__: downloading a large ISO seems a bit much (im assuming the ISO is large). is that a step you have to do?
[2013-01-07 21:08:52 -0500] tolland: so there seems to be a native "knife diff" command now?
[2013-01-07 21:08:58 -0500] nobody__: pwelch: though, thinking about it, I could use a script and call that via an execute resource which has action :nothing set and gets notified by the remote_file, couldn't I?
[2013-01-07 21:09:02 -0500] toobulkeh: ivey: do you know of a way to force Berkshelf to include the cookbooks in a relative directory instead of my home directory? Using the Vagrantfile?
[2013-01-07 21:09:26 -0500] pwelch: nobody__: with chef there are a few ways you could probably do it
[2013-01-07 21:09:58 -0500] nobody__: pwelch: maybe I am doing this the wrong way. What I am doing is writing a recipe for setting up a pxe server
[2013-01-07 21:10:10 -0500] nobody__: pwelch: which serves some live cd images for netboot
[2013-01-07 21:10:47 -0500] nobody__: pwelch: it will download those images only once on the first run and won't contact the server again, until I change the hashes in the remote_file
[2013-01-07 21:10:49 -0500] pwelch: I have not done that personally. However, the community site seems to have a few pxe servers: http://community.opscode.com/search?query=pxe&scope=home
[2013-01-07 21:11:33 -0500] ivey: toobulkeh: I don't, let me ask
[2013-01-07 21:11:39 -0500] nobody__: pwelch: I looked through that, it does not really provide what I need, as far as I see
[2013-01-07 21:11:48 -0500] toobulkeh: ivey: thanks
[2013-01-07 21:11:57 -0500] ivey: we don't vendor very often since you lose the benefits of the shared shelf.
[2013-01-07 21:12:18 -0500] pwelch: I know dell crowbar project does some of that stuff
[2013-01-07 21:12:32 -0500] pwelch: you could peak through their cookbooks and see how they are doing it
[2013-01-07 21:12:34 -0500] nobody__: pwelch: what I am currently using as a base for that setup is http://erpxe.com/
[2013-01-07 21:12:57 -0500] binjured: i'm not really clear on why chef-client would ignore (then delete) the run list of my node ...
[2013-01-07 21:13:09 -0500] jonathanmickle: pwelch i think your approaching it wrong
[2013-01-07 21:13:41 -0500] jonathanmickle: typically its done one of two ways but PXE is outside the scope of chef
[2013-01-07 21:13:57 -0500] pwelch: jonathanmickle: nobody__ is the one trying to do this.
[2013-01-07 21:14:08 -0500] pwelch: jonathanmickle: maybe you could tell him where to look
[2013-01-07 21:14:08 -0500] jonathanmickle: oops
[2013-01-07 21:14:20 -0500] jonathanmickle: yeah sorry
[2013-01-07 21:14:25 -0500] pwelch: or rather readjust his aim :)
[2013-01-07 21:14:28 -0500] pwelch: no worries
[2013-01-07 21:14:37 -0500] jonathanmickle: nobody__:  typically its done 1 of two ways, typically chef is outside the scope of your  pxe
[2013-01-07 21:15:03 -0500] toobulkeh: ivey: fair enough. Back on to the main question though, I'm using Berkshelf to pull the cookbook nodejs from github.com/mdxp/nodejs-cookbook, but keep getting an error on vagrant provision
[2013-01-07 21:15:05 -0500] jonathanmickle: nobody__: you can either setup a pxe server to serve backed images of your client with chef-client already set to run on startup
[2013-01-07 21:15:23 -0500] jonathanmickle: nobody__: or you can use a message queuing pattern to poll for when your basic server is setup and then ssh in and boot strap it
[2013-01-07 21:15:47 -0500] ivey: toobulkeh: there's not currently a way to make the plugin use vendoring. would have to skip the plugin, use berks install --path, and a relative cookbook path in Vagrantfile
[2013-01-07 21:15:48 -0500] nobody__: jonathanmickle: I think I didn't state my problem correctly, sorry for the confusion
[2013-01-07 21:16:12 -0500] jonathanmickle: restate it?
[2013-01-07 21:16:26 -0500] toobulkeh: ivey: might be a typo though :o) One second.... The recipe is keyed on the cookbook name which is created by Berkshelf, despite the cookbook name within the git repo I guess
[2013-01-07 21:16:35 -0500] nobody__: jonathanmickle: I am not building some huge provisioning setup where machines will boot via pxe and then contact a chef-server to be configured
[2013-01-07 21:16:36 -0500] toobulkeh: ivey: I was afraid of that. Oh well, worth a shot. Thanks!
[2013-01-07 21:17:05 -0500] ivey: toobulkeh: if it's something you think is worth adding, please open a ticketor better yet a pull request
[2013-01-07 21:17:06 -0500] jonathanmickle: nobody__: what exactly do you want to do then?
[2013-01-07 21:17:13 -0500] toobulkeh: ivey: Yep, it was a typo. Looks like berkshelf renames the cookbook... makes sense too. Sorry for bothering and thanks for the help!
[2013-01-07 21:17:27 -0500] toobulkeh: ivey: I'll look into doing it myself. Thanks!
[2013-01-07 21:17:31 -0500] nobody__: jonathanmickle: all I want to do is have a recipe which sets up a pxe server on a box that will users with various boot options like "install this" "install that" "run memtest"
[2013-01-07 21:17:52 -0500] binjured: what do i need to do to get chef-client to just use the node on the chef-server to determine its run list? can't find a way to keep `knife bootstrap` from wasting my run list.
[2013-01-07 21:18:26 -0500] jonathanmickle: nobody__: are you referring to building a template for the actual PXE server itself? or are you referring to the boot menu offered from a PXE server?
[2013-01-07 21:19:07 -0500] nobody__: jonathanmickle: what the default recipe currently does is setting up nfs, http and tftp which are required for the boot service
[2013-01-07 21:19:43 -0500] binjured: hmmm now every time i run chef-client it dies with a 404. spectacular.
[2013-01-07 21:20:07 -0500] nobody__: jonathanmickle: and then there are various additional recipes which prepare boot images which will show up in the boot menu a user of that pxe server will see
[2013-01-07 21:20:14 -0500] binjured: are there an opscode people here? 'cuz stuff appears to be down.
[2013-01-07 21:20:27 -0500] jonathanmickle: nobody__: on which end though? Its unclear if your referring to a client being PXE booted or a PXE server offering PXE boot sessions
[2013-01-07 21:20:52 -0500] nobody__: jonathanmickle: the chef part is to setup the pxe server and the images it serves
[2013-01-07 21:21:10 -0500] jonathanmickle: nobody__: ok so you are building a template to basically clone your PXE server got it
[2013-01-07 21:21:31 -0500] mattray: nobody__: somebody say pxe booting with Chef?
[2013-01-07 21:21:36 -0500] nobody__: jonathanmickle: yay, sorry if I made that confusing
[2013-01-07 21:22:10 -0500] jonathanmickle: nobody__: its ok, sometimes the small details help over chat to get to the right solution, ok so where are you stuck? trying to mount an ISO image?
[2013-01-07 21:23:12 -0500] nobody__: jonathanmickle: to prepare e.g. a grml image which users can boot via pxe, I need to fetch a grml iso and extract some files from it
[2013-01-07 21:23:19 -0500] jonathanmickle: brb meeting feel free to msg me
[2013-01-07 21:23:31 -0500] nobody__: jonathanmickle: okay ttyl
[2013-01-07 21:24:27 -0500] nobody__: mattray: @pxe: it's probably much less interesting than you think. The booted systems won't do anything with chef for now. It's only about setting up tftpd etc.
[2013-01-07 21:28:27 -0500] jonathanmickle: ok sorry nobody__
[2013-01-07 21:28:49 -0500] jonathanmickle: so really it sounds like you may have to write some recipes to just setup your configs
[2013-01-07 21:28:56 -0500] jonathanmickle: and download your iso's to a directory
[2013-01-07 21:29:14 -0500] binjured: geez this is super infuriating. `chef-client -o "recipe[chef-client::service]"' caches everything then dies with '404 Not Found' with no useful information in the traceback.
[2013-01-07 21:30:17 -0500] nobody__: jonathanmickle: what I would like to do is build a wrapper that mounts the iso image and in which I can add regular calls to resources. Would something like that even be possible?
[2013-01-07 21:30:30 -0500] jonathanmickle: sure
[2013-01-07 21:30:33 -0500] mattray: nobody__: the pxe_dust cookbook builds ubuntu and debian pxe booting
[2013-01-07 21:30:40 -0500] mattray: with Chef installed on them
[2013-01-07 21:31:03 -0500] mattray: via tftpd
[2013-01-07 21:31:15 -0500] jonathanmickle: i don't thick an existing recipe exists on the community to do exactly what you're looking for nobody, but you can build one
[2013-01-07 21:31:32 -0500] nobody__: mattray, jonathanmickle: maybe I should state the usecase of this so this makes it more clear what I want to do
[2013-01-07 21:31:33 -0500] jonathanmickle: also check out the cookbook mattray mentioned 'pxe_dust' it might serve as a good starting ground
[2013-01-07 21:32:00 -0500] jonathanmickle: yeah whats your use case?
[2013-01-07 21:32:38 -0500] nobody__: we have a hackerspace and at various points peolpe happen to have issues with their computers. and it is just nicer if you can do pxe boot and have an assorted selection of boot/diagnostic options instead of having to fiddle with a pile of cds/usb sticks
[2013-01-07 21:32:43 -0500] jtimberman: binjured: are you experiencing hosted chef issues?
[2013-01-07 21:33:31 -0500] mattray: nobody__: ahh, that is a variant uncovered. pxe_dust will manage bootstrapping mixed environments though
[2013-01-07 21:33:42 -0500] binjured: jtimberman: yep. streaming a download from s3, by the debug output.
[2013-01-07 21:33:43 -0500] mattray: but not via a console
[2013-01-07 21:33:58 -0500] jaimef: https://gist.github.com/292fa4c7f2f9146c0e16 is there a way to do this without this much code? specifically make helper functions available that hide node[:widget][:foobar] sort of stuff?
[2013-01-07 21:34:05 -0500] mattray: nobody__: but there is a tftpd cookbook already used by it
[2013-01-07 21:34:08 -0500] nomadwashere: What module does chef include for URI's? Was trying to figure out how the URI.read method worked but couldn't find the correct ruby module.
[2013-01-07 21:34:31 -0500] nobody__: mattray: I saw that tftp code, I am currently throwing out my tftp foo and replacing it with atftp
[2013-01-07 21:34:53 -0500] nobody__: mattray: all in all the pxe server already works, so I am at the stage of "adding images" which I would also die with recipes
[2013-01-07 21:35:02 -0500] Salve: Little help: How do I have chef create a directory for me?
[2013-01-07 21:35:07 -0500] jonathanmickle: yeah nobody__ that sounds like pxe_dust is the best approach
[2013-01-07 21:35:20 -0500] mattray: nobody__: pxe_dust uses a data bag to map mac addresses to images
[2013-01-07 21:35:40 -0500] mattray: might be a useful place to look
[2013-01-07 21:35:46 -0500] jonathanmickle: although i probably wouldn't use chef in that manner, it can be really slow and inefficient there in my opinion
[2013-01-07 21:35:50 -0500] mattray: even if it isn't a perfect fit
[2013-01-07 21:36:16 -0500] nobody__: jonathanmickle, mattray: I will have a look at it and see if that clears things up
[2013-01-07 21:36:34 -0500] jonathanmickle: nobody__: just a bit of advise how I've done that in the past
[2013-01-07 21:36:53 -0500] jonathanmickle: basically i used request-tracker as a ticketing system with asset-tracker module
[2013-01-07 21:37:25 -0500] jonathanmickle: and every asset had a boot value field so if i set the value to PXE->tools menu it would add the DHCP lease into kickstart
[2013-01-07 21:37:34 -0500] jonathanmickle: then the computer would get a dhcp session on next reboot for PXE
[2013-01-07 21:37:55 -0500] Salve: So, am I asking the wrong question?
[2013-01-07 21:37:56 -0500] jonathanmickle: only after i did the PXE functions and the system was live as a base image would i then use chef
[2013-01-07 21:38:11 -0500] jonathanmickle: salve: there is a directory resource
[2013-01-07 21:38:32 -0500] binjured: jtimberman: aside from that s3 404, i am seeing huge error rates for uploading cookbooks. had to try a dozen times to get a full upload through.
[2013-01-07 21:38:36 -0500] jonathanmickle: Salve: http://wiki.opscode.com/display/chef/Resources#Resources-Directory
[2013-01-07 21:38:50 -0500] Salve: jonathanmickle: awesome thank you
[2013-01-07 21:39:13 -0500] jonathanmickle: Salve: no problem, i suggest bookmarking that page and keeping it handy, its a great cheat sheet for a lot of functions
[2013-01-07 21:39:23 -0500] nobody__: jonathanmickle: thanks for that explanation. That is somewhat orthogonal to my problem. What I want the pxe server to do is replacing a stack of live-cds which are usually lost/outdated/broken. I don't even need the server to differ between hosts
[2013-01-07 21:40:14 -0500] jonathanmickle: nobody__: got it, yeah you will have to adjust to your needs for sure. was just giving food for thought. We replaced all cds etc etc with PXE images through kickstart
[2013-01-07 21:40:35 -0500] cheflevelramen: Hi all, quick question. How would I all call the 'notifies' from within 'block ... do' in a ruby_block resource?
[2013-01-07 21:40:35 -0500] jonathanmickle: nobody__:  only throwing that out there as it may be an easier way for you to solve the problem ;-)
[2013-01-07 21:44:07 -0500] jonathanmickle: cheflevelramen: i could be wrong but i think you should be butting it after your block end
[2013-01-07 21:44:48 -0500] jonathanmickle: putting*
[2013-01-07 21:44:49 -0500] cheflevelramen: jonathanmickle: Yea, that is the normal way to do it, but I'm trying to use it in an if else statement within the block end
[2013-01-07 21:45:04 -0500] jonathanmickle: cheflevelramen: ah yeah not sure, sorry never done that one
[2013-01-07 21:45:32 -0500] cheflevelramen: jonathanmickle: Other option I can think of is to set a node attribute from within the if else statement, and have a seperate ruby_block that runs depending on the state of that attribute
[2013-01-07 21:46:21 -0500] jonathanmickle: cheflevelramen: yeah that might work not fully sure, i know I've run into several problems like that in the past but solved each one uniquely
[2013-01-07 21:49:03 -0500] cheflevelramen: jonathanmickle: Thanks, I'll give it a shot
[2013-01-07 21:49:17 -0500] jonathanmickle: no worries, hang around someone else might have a better answer
[2013-01-07 22:01:33 -0500] nstielau1: nobody__:  thanks for the feedback.  Zoned out for a bit.  Since Template uses a 'mv' rather than a write, it actually does not follow symlinks.  That is dependent on the Provider implementation, but right now it is secure
[2013-01-07 22:06:00 -0500] nobody__: nstielau1: What happens if you use template "/home/bob/foo/passwd" and bob creates a symlink /home/bob/foo -> /etc ?
[2013-01-07 22:08:29 -0500] oddover: can anyone tell me when this issue will get addressed?: http://tickets.opscode.com/browse/CHEF-1967
[2013-01-07 22:20:25 -0500] jonathanmickle: does anyone else have a problem with chef-client randomly running on amazon ec2 when network readdressing occurs?
[2013-01-07 22:25:56 -0500] judd7: I'm using the apt cookbook.  How do I pass an http_proxy to it?
[2013-01-07 22:28:03 -0500] tmather: hi... is anyone out there?
[2013-01-07 22:29:07 -0500] judd7: I tried adding my http_proxy to /etc/profile - but apt didn't pick it up.
[2013-01-07 22:29:18 -0500] judd7: Must use /etc/apt/apt.conf.d?
[2013-01-07 22:31:43 -0500] tylergillies: is there a way to list ec2 servers by environment using knife? my google fu is failing me
[2013-01-07 22:31:58 -0500] tmather: quit
[2013-01-07 22:32:36 -0500] maplebed: tylergillies: maybe 'knife search node "chef_environment:staging"'
[2013-01-07 22:33:05 -0500] maplebed: (or whatever environment you're looking for)
[2013-01-07 22:33:18 -0500] tylergillies: no dice :(
[2013-01-07 22:33:18 -0500] cwj: tylergillies: knife search node 'chef_environment:foo AND ec2:*'
[2013-01-07 22:33:28 -0500] tylergillies: actuall
[2013-01-07 22:33:32 -0500] tylergillies: actually*
[2013-01-07 22:33:35 -0500] tylergillies: nevermind worked
[2013-01-07 22:33:47 -0500] tylergillies: maplebed: cwj: thanks :)
[2013-01-07 22:34:17 -0500] qhartman: so I've written an lwrp, and uploaded it to my server. is there anything I need to do to use it other than include it in the depends statement of the cookbook that includes it and stick an "include_recipe" somewhere before I try to use it?
[2013-01-07 22:35:20 -0500] qhartman: I tested it by using it in the default recipe of the cookbook that created it, and that worked fine, but now I'm getting "cannot find resource...." when trying to include it from another cookbook.
[2013-01-07 22:39:20 -0500] qhartman: derp, type-o killed me. pay no attention to the man hand-waving behind the curtain....
[2013-01-07 22:42:06 -0500] abetterlie: is there any way to stub out an environment in chef solo?
[2013-01-07 22:42:35 -0500] abetterlie: I have a recipe I'm using with chef-server that has a case statement that depends on an environment attribute
[2013-01-07 22:42:50 -0500] abetterlie: can I just dump that in the json or something?
[2013-01-07 22:51:19 -0500] mmorris: is it possible to set role paths in a Vagrantfile using "chef.role_path ="?
[2013-01-07 22:51:35 -0500] mmorris: i'm getting undefined method `role_path='
[2013-01-07 22:55:15 -0500] miah: mmorris: http://docs.vagrantup.com/v1/docs/provisioners/chef_server.html
[2013-01-07 22:55:30 -0500] miah: or http://docs.vagrantup.com/v1/docs/provisioners/chef_solo.html
[2013-01-07 22:57:00 -0500] mmorris: forgot the s in roles
[2013-01-07 22:57:01 -0500] mmorris: dur
[2013-01-07 22:59:05 -0500] spox: how an i force test kitchen to only a single platform (ubuntu 12.04) via the kitchenfile?
[2013-01-07 22:59:14 -0500] spox: to only run*
[2013-01-07 22:59:22 -0500] miah: test-kitchen --platform 'foo'
[2013-01-07 22:59:37 -0500] miah: or in the kitchenfile only specify that one platform, or exclude the others.
[2013-01-07 23:14:43 -0500] hakunin: anyone seen hoover_damm around?
[2013-01-07 23:49:21 -0500] mikeroth: how do you run chef-client in debug mode?
[2013-01-07 23:49:52 -0500] doomviking: -l debug
[2013-01-07 23:50:05 -0500] mikeroth: doomviking: cheers
[2013-01-07 23:55:46 -0500] kallen: somehow a node was created on our chef server with a blank name. "knife node list" returns an error due to that nil node. any idea how i can delete just that one nil node?
[2013-01-07 23:57:11 -0500] ranjibd: kallen, delte it in couch using the couch api directly.. do a local curl -X DELET
[2013-01-07 23:57:37 -0500] kallen: i don't know what the URI path would be. suggestions?

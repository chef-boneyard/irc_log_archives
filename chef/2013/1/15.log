[2013-01-15 00:00:50 -0500] kallistec: theerik_: right now you have to backup and restore at the couchdb level, so either the couchdb files or over HTTP using couch's API
[2013-01-15 00:01:30 -0500] oddover: atomic-penguin: what does /etc/cups/lpoptions do?
[2013-01-15 00:01:35 -0500] kallistec: in Chef 11, the backing store is postgres, so you can backup/restore at the postgres level, whcih is probably best
[2013-01-15 00:02:14 -0500] atomic-penguin: printer options
[2013-01-15 00:02:20 -0500] oddover: ok
[2013-01-15 00:02:29 -0500] atomic-penguin: You shouldn't need to replicate it on RHEL6
[2013-01-15 00:02:42 -0500] kallistec: but, if you have a copy of all your api clients (or a subset you care about) public+private keys (you can extract the public with some openssl mangling) you can create them via the API and set the public key field
[2013-01-15 00:02:54 -0500] atomic-penguin: It should be auto-propagated from the server on RHEL6, RHEL5 cups doesn't do that however
[2013-01-15 00:03:12 -0500] oddover: ok
[2013-01-15 00:14:13 -0500] djwonk: i'm trying to understand the different installation options for a Chef workstation on Mac OS X
[2013-01-15 00:14:15 -0500] djwonk: I see http://wiki.opscode.com/display/chef/Workstation+Setup+for+Mac+OS+X
[2013-01-15 00:14:32 -0500] djwonk: And I also see: http://www.opscode.com/chef/install/ which recommends `curl -L https://www.opscode.com/chef/install.sh | sudo bash`
[2013-01-15 00:14:39 -0500] djwonk: pros / cons?
[2013-01-15 00:16:20 -0500] flaccid: djwonk: i'd probably try them all out. os x is a bit of a moving object
[2013-01-15 00:18:52 -0500] djwonk: flaccid: ok, I'll try the omnibus first
[2013-01-15 00:20:09 -0500] flaccid: hopefully that is the best and currently works on your version of osx
[2013-01-15 00:25:42 -0500] jtimberman: djwonk: fwiw, i manage my workstation with Chef, using the omnibus installer, but i also do development with/on Chef, and have it under an rbenv setup
[2013-01-15 00:29:26 -0500] flaccid: i am on os x atm and remember just doing it native but i did have to stuff around a bit, not that i can recall what i had to do
[2013-01-15 00:37:58 -0500] djwonk: thanks, the omnibus installer didn't update my path, but other than that, it seems legit
[2013-01-15 00:38:12 -0500] djwonk: also, it didn't warn/inform me that I should
[2013-01-15 00:48:04 -0500] gyre008: IM about to upgrade chef server...will apt-get upgrade chef chef-expander chef-server chef-server-api chef-server-webui chef-solr do ? Has anyone done this ?
[2013-01-15 00:48:42 -0500] gyre008: I presumer I'll have to restart all services...
[2013-01-15 00:52:43 -0500] jeremyolliver: @gyre008 I don't think the latest updates have hit main ubuntu apt repositories yet
[2013-01-15 00:53:00 -0500] gyre008: I have the opscodes repo set up
[2013-01-15 00:53:35 -0500] jeremyolliver: well, that would have been easier than what I've just finished doing. I assume that will work for you then
[2013-01-15 00:54:08 -0500] gyre008: fingers crossed :)
[2013-01-15 00:54:58 -0500] jeremyolliver: I winded up switching from a package install to an install managed from the chef-server cookbook
[2013-01-15 00:55:22 -0500] jeremyolliver: but using opscode apt package would have been easier
[2013-01-15 00:56:08 -0500] gyre008: thats why we opted to go with opscode packages...less hassle...hopefully haha
[2013-01-15 00:56:32 -0500] gyre008: im going for it now...
[2013-01-15 00:58:34 -0500] gyre008: OH BOY
[2013-01-15 00:58:38 -0500] gyre008: upgrade fail
[2013-01-15 00:58:41 -0500] gyre008: as I suspected
[2013-01-15 01:00:53 -0500] gyre008: massive #fail ...https://gist.github.com/4535059
[2013-01-15 01:01:07 -0500] gyre008: anyone has come across this when upgrading chef ?
[2013-01-15 01:01:12 -0500] gyre008: from apt packages..
[2013-01-15 01:01:58 -0500] miah: hopefully you tested in dev instead of production.
[2013-01-15 01:02:19 -0500] gyre008: yeah
[2013-01-15 01:02:23 -0500] gyre008: this is in test
[2013-01-15 01:02:35 -0500] gyre008: haha im not crazy to go into prod haha
[2013-01-15 01:02:50 -0500] gyre008: nevertheless its a disapp to say the least arrgh
[2013-01-15 01:03:51 -0500] miah: =)
[2013-01-15 01:03:54 -0500] miah: definitely
[2013-01-15 01:06:03 -0500] gyre008: awesome
[2013-01-15 01:07:19 -0500] djwonk: hey chef guys, I'm pretty sure your omnibus installer fails if /opt does not already exist
[2013-01-15 01:07:26 -0500] djwonk: do I need to file a ticket?
[2013-01-15 01:14:52 -0500] flaccid: djwonk: give it a try i guess
[2013-01-15 01:14:57 -0500] flaccid: sounds valid to me
[2013-01-15 01:15:23 -0500] djwonk: i confirmed failure if /opt was missing
[2013-01-15 01:18:39 -0500] flaccid: lodge a bug
[2013-01-15 01:24:24 -0500] siezer: fujin you around?
[2013-01-15 01:24:53 -0500] fujin: siezer: yea sup
[2013-01-15 01:25:18 -0500] siezer: trying to find some rationale for this before I refactor it https://gist.github.com/0113393a937895ce5d97
[2013-01-15 01:25:45 -0500] siezer: its always firing on centos because of the failed test, so I went to the code block and proceeded to rub my chin
[2013-01-15 01:28:27 -0500] siezer: I've never seen a log resource test for a file that a package (action :nothing) drops off, then notifies it to install if its not there
[2013-01-15 01:31:38 -0500] djwonk: flaccid: what 'component' in JIRA corresponds to the omnibus installer you think?
[2013-01-15 01:31:50 -0500] djwonk: i'm guessing packages
[2013-01-15 01:32:33 -0500] djwonk: ticket created: http://tickets.opscode.com/browse/CHEF-3761
[2013-01-15 01:33:43 -0500] flaccid: no idea sorry
[2013-01-15 01:51:15 -0500] maplebed: anybody out there familiar with the squid cookbook off the community site?  I don't understand why I'm getting errors in my chef-client output instead of it getting caught by the begin/rescue bit here: https://github.com/mattray/squid-cookbook/blob/master/recipes/default.rb#L62-L71
[2013-01-15 01:51:38 -0500] maplebed: Instead I get a line "ERROR: Failed to list data bag items in data bag: "squid_urls""
[2013-01-15 01:52:03 -0500] maplebed: Can you not use begin/rescue in that way in a recipe or something?
[2013-01-15 01:54:24 -0500] maplebed: the nagios cookbook does it a little differently: https://github.com/opscode-cookbooks/nagios/blob/master/recipes/server.rb#L117-L127 - seems to work better. (the exception is successfully caught and the log.info successfully printed)
[2013-01-15 01:56:06 -0500] maplebed: huh.  quiet tonight.
[2013-01-15 01:59:12 -0500] siezer: maplebed here use this instead https://github.com/someara/squid-cookbook
[2013-01-15 01:59:34 -0500] siezer: sending the fixes upstream when I have a sec. running out the door. later.
[2013-01-15 01:59:35 -0500] maplebed: ehh..   I'm not really looking to replace the cookbook...
[2013-01-15 01:59:45 -0500] maplebed: oh, yours is a fork.
[2013-01-15 01:59:49 -0500] siezer: yep
[2013-01-15 01:59:50 -0500] maplebed: thanks.
[2013-01-15 02:01:53 -0500] maplebed: well, I see that you moved the data bag portion into a library function, but the code around the begin/rescue clause is unchanged.
[2013-01-15 02:02:08 -0500] maplebed: but you're probably afk already, and i don't want to keep you...  but if you're around tomorrow I may ask again.
[2013-01-15 02:11:09 -0500] siris: Hi there, I am trying to bootstrap the new Chef 11 server for testing but when loading the chef-server cookbook with chef-solo I am getting this download error: Could not locate chef-server package matching version 'latest' for node.
[2013-01-15 02:11:44 -0500] siris: does anyone have a direct link to the Chef 11 server omnibus package for Enterprise Linux 6 x86_64?
[2013-01-15 02:26:33 -0500] flaccid: siris: are you sure its even supported?
[2013-01-15 02:27:36 -0500] solarce: anyone have a motd cookbook that works nicely on amazon linux?
[2013-01-15 02:30:23 -0500] flaccid: solarce: did you try the community site and google?
[2013-01-15 02:30:56 -0500] solarce: flaccid: yup, the only thing that shows up is motd-tail which is ubuntu/debian
[2013-01-15 02:30:57 -0500] siris: flaccid: after looking at the cookbook omnitruck_client doesn't look like it. The default url is set to http://www.opscode.com/chef/download-server, which doesn't exist. Do you know if there are any pre-release versions of Chef 11 available for alpha/beta testing?
[2013-01-15 02:31:18 -0500] flaccid: solarce: you could enhance it and submit back via pull request
[2013-01-15 02:31:32 -0500] flaccid: siris: no idea sorry
[2013-01-15 02:33:11 -0500] solarce: flaccid: i'll see, from a brief scan of motd-tail the way it works is completely different from how update-motd works on amazon linux, I'm fine writing my own cookbook, i just wanted to avoid it if i could
[2013-01-15 02:33:38 -0500] flaccid: solarce: i don't imagine many people would be alive here from US atm
[2013-01-15 02:34:40 -0500] jeremyolliver: @siris It's probably not distributed, but you could always try building the latest source as a gem from https://github.com/opscode/chef
[2013-01-15 02:35:34 -0500] jeremyolliver: I wouldn't expect that to necessarily work off the bat given it's not being distributed
[2013-01-15 02:38:29 -0500] siris: jeremyolliver:  https://github.com/opscode/chef looks like a gemspec for the latest chef-client, not the latest chef-server. Just want to get a general idea on the status of Chef 11 and when the alpha/beta packages will be release for testing.
[2013-01-15 02:40:51 -0500] jeremyolliver: I haven't heard anything, though apparently a few chef 11 features are being sprinkled into hosted chef, which I'm not using myself
[2013-01-15 02:47:20 -0500] tomschlick: Hey everyone, im getting a precondition 412 error while playing wth chef. basically saying "Run list contains invalid items: no such cookbooks" any ideas?
[2013-01-15 02:47:56 -0500] tomschlick: it lists pretty much all of the cookbooks i have installed im guessing i missed a step and forgot to run a command but idk which it would be
[2013-01-15 02:48:29 -0500] siris: jeremyolliver: thanks for the insights
[2013-01-15 02:50:42 -0500] jeremyolliver: @tomschlick that sounds like you have a cookbook on your run list that isn't uploaded to your chef server
[2013-01-15 02:51:32 -0500] tomschlick: jeremyolliver: when i do knife cookbook upload --all i get this which stops the execution
[2013-01-15 02:51:39 -0500] tomschlick:    /cookbooks/metachef/definitions/kill_old_service.rb:5: syntax error, unexpected ')'
[2013-01-15 02:51:56 -0500] tomschlick: not sure how that could happen as i havent edited it all
[2013-01-15 02:54:48 -0500] jeremyolliver: @tomschlick In my experience that doesn't always do things in the right order, you may have to upload some manually till you get the dependecy order right
[2013-01-15 02:55:05 -0500] tomschlick: jeremyolliver: ok ill give that a shot, thanks
[2013-01-15 03:00:41 -0500] jeremyolliver: Ugh, I thought issues with omnibus install and pg gem were sorted out
[2013-01-15 03:01:18 -0500] jeremyolliver: oh wait, I've got my cookbook pinned to a version before that was fixed, nevermind
[2013-01-15 03:20:10 -0500] geo33: How to configure Chef in Centos6 ?? Can you explain how to configure both Server and client??? (am a bigener in Chef)...Please help me
[2013-01-15 03:25:45 -0500] flaccid: geo33: search the wiki for that, i don't think its supported very much but is possible
[2013-01-15 03:27:32 -0500] geo33: ok thanks
[2013-01-15 03:38:31 -0500] alex__: hi, need help.  When bootstrapping a node I'm unable to set the node environment.  I'm bootstrapping from ruby with:
[2013-01-15 03:38:34 -0500] alex__:     bootstrap = Chef::Knife::Bootstrap.new
[2013-01-15 03:38:35 -0500] alex__:     bootstrap.name_args = [server.instance.dns_name]
[2013-01-15 03:38:35 -0500] alex__:     ...
[2013-01-15 03:38:36 -0500] alex__:     bootstrap.config[:environment] = environment
[2013-01-15 03:38:38 -0500] alex__:     ...
[2013-01-15 03:38:40 -0500] alex__:     bootstrap.run()
[2013-01-15 03:39:06 -0500] alex__: my bootstrap template has <%= start_chef %>'
[2013-01-15 03:39:59 -0500] alex__: how can I set the environment from knife bootstrap code?  I'm on chef 10.12.0
[2013-01-15 03:46:02 -0500] cheflevelramen: Hi guys, another question. I'm using knife ec2 server create to provision instances. I have chef (and knife) set up on a server in Amazon. When I try to provision an instance in another amazon account, it fails.
[2013-01-15 03:46:45 -0500] cheflevelramen: The reason is because the security group is openning port 22 to my aws chef server. But knife uses the fqdn to ssh and provision instances
[2013-01-15 03:47:01 -0500] cheflevelramen: If I try sshing using the external ip of the new node, it works fine.
[2013-01-15 03:47:22 -0500] cheflevelramen: So, my quesiton is, can you configure knife to use external IP's rather than the aws fqdn?
[2013-01-15 04:01:48 -0500] gyre007: why is chef solot ignoring cookbook_file resources ?
[2013-01-15 04:03:09 -0500] gyre007: whenever I try to provision via chef-solo it looks like these files are not being created... https://gist.github.com/4535943
[2013-01-15 04:03:21 -0500] gyre007: even though they do exist in correct directory
[2013-01-15 04:03:23 -0500] gyre007: mm
[2013-01-15 04:05:36 -0500] gyre007: mystery
[2013-01-15 04:05:40 -0500] gyre007: I guess :)
[2013-01-15 04:05:43 -0500] gyre007: its a vagrant box
[2013-01-15 04:08:18 -0500] gyre007: anyone idea ?
[2013-01-15 04:09:11 -0500] gyre007: looks like that resource is being completely ignored...mm
[2013-01-15 04:11:29 -0500] gyre007: unless this is broken in vagrant/chef-solo...
[2013-01-15 04:11:30 -0500] gyre007: mm
[2013-01-15 04:24:19 -0500] tomschlick: anyone have a chef recipe for php 5.4 that i can look at? im trying to get away from the default opscode one (5.3.10) but havent found any good examples
[2013-01-15 04:24:49 -0500] flaccid: are you using a distro that actually provides php 5.4, tomschlick ?
[2013-01-15 04:25:42 -0500] tomschlick: flaccid: yes ubuntu but 12.04 so i have the dotdeb repo added but im not sure how to make it use that instead of the default php recipe
[2013-01-15 04:26:21 -0500] flaccid: i'm not familiar with dotdeb repo sorry
[2013-01-15 04:26:43 -0500] c_t: does it have a different name than the default php package?
[2013-01-15 04:27:24 -0500] tomschlick: basically its just a ppa so it would act exactly like it was native
[2013-01-15 04:27:54 -0500] tomschlick: im just not sure how to use that instead of the default php install of 5.3.10
[2013-01-15 04:38:39 -0500] flaccid: tomschlick: look at the recipe and see what package it installs. if the repo was set up prior then it should install it correctly.
[2013-01-15 04:44:06 -0500] zeriouz: How I can prepare chef in offline  mode (knife solo)?
[2013-01-15 05:21:31 -0500] Grummle: Can I use a file form cookbook/files as the source for a package install block?
[2013-01-15 05:27:24 -0500] Grummle: Can anyone hear me :(
[2013-01-15 05:33:48 -0500] yfeldblum: Grummle, you probably can, but i wouldn't recommend it
[2013-01-15 05:34:02 -0500] Grummle: reasoning?
[2013-01-15 05:49:40 -0500] wannatest: hello, can someone tell me if `should create_user user` is implemented in chefspec? i find docs saying it is but can't seem to make it work
[2013-01-15 05:50:18 -0500] wannatest: nor can I find examples of it working
[2013-01-15 09:44:47 -0500] cpasmoi: Hi there ! I'm using apache2 and mod_proxy with a custom cookbook.
[2013-01-15 09:45:27 -0500] cpasmoi: I'm willing to migrate to the apache2 official opscode cookbook but I don't see mod_jk recipe, only mod_proxy_ajp recipe
[2013-01-15 09:45:37 -0500] cpasmoi: should I create my own recipe ?
[2013-01-15 10:32:43 -0500] daxroc: Morning all
[2013-01-15 10:33:37 -0500] daxroc: Does anyone here use chef interfaceing with  openstack - vmware?
[2013-01-15 10:56:56 -0500] cpasmoi: nope
[2013-01-15 11:06:26 -0500] gyre007: does knife use Thor gem to execute the subcommands ??
[2013-01-15 11:39:53 -0500] maruq: hi guys, looking at mounting a RAID0 array on EC2, using ephemeral storage
[2013-01-15 11:40:20 -0500] maruq: I have it pretty much there, just need to write the mdadm.conf (easy) & call the update-initramfs -u
[2013-01-15 11:40:44 -0500] maruq: does anyone know how to safely call that update-initramfs -u, so that it doesn't run every time?
[2013-01-15 11:40:57 -0500] maruq: I guess best might be to do it as part of the mdadm block?
[2013-01-15 12:16:41 -0500] matti: mapop: You can.
[2013-01-15 12:16:43 -0500] matti: Ops.
[2013-01-15 12:16:49 -0500] matti: maruq: You can do that, yes.
[2013-01-15 12:17:34 -0500] maruq: matti: also just thought block with no action, then notify it from the mdadm block. that should only trigger on execution
[2013-01-15 12:17:42 -0500] matti: Yep.
[2013-01-15 12:17:46 -0500] matti: To chain resources.
[2013-01-15 12:17:56 -0500] maruq: sweet
[2013-01-15 12:17:57 -0500] matti: :)
[2013-01-15 12:32:21 -0500] frank_: all, i have a class Chef::Recipe::Foo in a library
[2013-01-15 12:32:34 -0500] frank_: how can I access node attributes from within a function in that class?
[2013-01-15 12:47:49 -0500] matti: frank_: Should be possible.
[2013-01-15 12:48:04 -0500] matti: frank_: You have to load them first IIRC.
[2013-01-15 12:50:49 -0500] frank_: and how would that work? can't seem to find an example
[2013-01-15 13:03:37 -0500] maddoc: Anybody that knows if it's easy to make the backup_export knife plugin skip autogenerated node attributes (i.e. ohai stuff)?
[2013-01-15 13:16:43 -0500] kernelPanik: Hi to all! I'm writing a cookbook that include recipes from another cookbook.. I override the attributes w/  set, for the template how can I do? with  "rewind"  , "edit" ?  do you have a link for documentation about it?
[2013-01-15 13:27:25 -0500] cassianoleal1: is there any way to tell Berkshelf not to upload every  single cookbook every time? :)
[2013-01-15 13:27:39 -0500] cassianoleal1: Each time I run 'vagrant provision' it takes ages!
[2013-01-15 13:38:30 -0500] Steven__: hello, is there a chef equivalent to the cf-engine "tydy" function?
[2013-01-15 13:39:46 -0500] Steven__: some background on cf-engine tidy: it's purpose is to delete files of a certain age
[2013-01-15 13:40:58 -0500] cpasmoi: Steven__, using tmpwatch ?
[2013-01-15 13:41:56 -0500] cpasmoi: I'm still not vere used to chef so I won't help you much, but deleting files of a certain age is the purpose of tmpwatch
[2013-01-15 13:43:32 -0500] Steven__: ok, but that's a unix/linux command, i was looking for a more generic solution that also works on windows.
[2013-01-15 13:44:12 -0500] Steven__: i was just wondering if chef had such function in it's standard toolkit.
[2013-01-15 13:44:31 -0500] Steven__: no pro, i will create a sched task for it.
[2013-01-15 13:44:39 -0500] Steven__: thanks for your replies
[2013-01-15 13:50:37 -0500] ddunlop: So I'm using chef with vagrant and trying to use remote_file but it is quietly failing without attempting to fetch the file
[2013-01-15 13:51:19 -0500] ddunlop: running chef-client in debug isn't giving any additional information
[2013-01-15 14:05:53 -0500] Unicron_: l
[2013-01-15 14:21:31 -0500] makerbreakr: if I have this in my default.rb "node_databag = data_bag_item('node_databags', node.fqdn)"
[2013-01-15 14:21:41 -0500] makerbreakr: can i not access node_databag from templates?
[2013-01-15 14:23:22 -0500] makerbreakr: woops nm
[2013-01-15 14:23:36 -0500] fabio: makerbreakr: use variables() on template resource
[2013-01-15 14:24:40 -0500] fabio: the last release of chef is broken
[2013-01-15 14:25:14 -0500] fabio: chef-client processo runing on daemon use ruby shebang
[2013-01-15 14:25:24 -0500] fabio: init does not work
[2013-01-15 14:25:45 -0500] fabio: ++ awk '/Name:/ {print $2}' /proc/17090/status
[2013-01-15 14:25:46 -0500] fabio: + cmd=ruby
[2013-01-15 14:25:46 -0500] fabio: + '[' ruby '!=' chef-client ']'
[2013-01-15 14:54:39 -0500] xerxas: I'm deploying each node with it's own client, and have different environements , I get this message: To access its cookbooks, a client needs to be able to read its environment and all of the cookbooks in its expanded run list.
[2013-01-15 14:55:06 -0500] xerxas: can I modify these permissions with knife ? also, I don't find how do I change those permissions on manage.opscode.com
[2013-01-15 14:55:42 -0500] xerxas: The clients seems to be able to read it's environement (not sure) I see the run_list
[2013-01-15 14:56:22 -0500] xerxas: the error is in this step: "Error Resolving Cookbooks for Run List:"
[2013-01-15 14:59:43 -0500] zts: xerxas: Click on 'Environments', click on your environment, then click on 'Permissions'
[2013-01-15 15:01:12 -0500] zts: xerxas: however, I'm pretty sure that the 'clients' group should have the necessary permissions on environments and cookbooks out of the box - if you haven't been fiddling around with permissions (or even if you have), might be worth asking opscode for support
[2013-01-15 15:04:10 -0500] xerxas: zts: yeah, that's what I think , I check my environments permissions, the "clients" group have read permissions
[2013-01-15 15:04:23 -0500] xerxas: zts: support is for paying clients, right ?
[2013-01-15 15:05:55 -0500] xerxas: zts: I added those clients to the environement, still have the same message ...
[2013-01-15 15:06:19 -0500] xerxas: I think the clients / node have access to this environment, just, not the cookbooks, is it possible ?
[2013-01-15 15:06:27 -0500] xerxas: zts:  don't know if you know it , but I'm using ironfan
[2013-01-15 15:06:33 -0500] xerxas: and I created my environement by hand
[2013-01-15 15:08:49 -0500] xerxas: zts: also, is this something doable via knife ?
[2013-01-15 15:12:20 -0500] Joel: I was asking about this yesterday, but I wanted to talk about it some more, is it safe to call capistrano from inside a chef recipe?
[2013-01-15 15:12:37 -0500] matti: Joel: People do it.
[2013-01-15 15:13:43 -0500] Joel: matti: I'm in a case where it's used on production servers, and I'm tasked with making an easy to pop out development environment, so I'd like to keep the technology the same across the board.
[2013-01-15 15:13:47 -0500] matti: Joel: But it is always better to use instrumentation tool to kick off deployment.
[2013-01-15 15:13:52 -0500] matti: Joel: Over using Chef.
[2013-01-15 15:14:21 -0500] zts: xerxas: I am sure paying clients get better support, but even the free tier for Hosted Chef can use the support process: http://www.opscode.com/support/
[2013-01-15 15:14:57 -0500] zts: xerxas: I haven't ever looked for a way to manage Hosted Chef ACLs using knife - maybe there's a plugin, but it's certainly not there by default
[2013-01-15 15:15:51 -0500] makerbreakr: can you use conditional statements in templates?
[2013-01-15 15:16:00 -0500] matti: Yes.
[2013-01-15 15:16:21 -0500] matti: <% if ... -%> ... <% else -%> ... <% end -%>
[2013-01-15 15:17:56 -0500] makerbreakr: why wouldnt this process correctly: https://gist.github.com/4539342
[2013-01-15 15:18:16 -0500] makerbreakr: I have tried node['multi_player'], and passing it through variables,
[2013-01-15 15:18:20 -0500] makerbreakr: @multi_player
[2013-01-15 15:18:47 -0500] makerbreakr: node_databag['multi_player'] is def 1
[2013-01-15 15:18:58 -0500] cpasmoi: I'm using apache2 and mod_jk with a custom cookbook.
[2013-01-15 15:19:08 -0500] cpasmoi: I'm willing to migrate to the apache2 official opscode cookbook but I don't see mod_jk recipe, only mod_proxy_ajp recipe
[2013-01-15 15:19:15 -0500] cpasmoi: should I create my own recipe ?
[2013-01-15 15:21:39 -0500] matti: makerbreakr: Your closing tag is wrong.
[2013-01-15 15:21:44 -0500] cassianoleal1: anyone using the bluepill cookbook with rvm?
[2013-01-15 15:21:49 -0500] matti: makerbreakr: Change %> to -%> for conditionals.
[2013-01-15 15:22:15 -0500] cassianoleal1: it always tries to find the bluepill executable in the wrong directory for me
[2013-01-15 15:22:45 -0500] PierreO: Hi! I want to hack on nginx recipe, and I have the feeling that the tests don't work?
[2013-01-15 15:22:59 -0500] failshell: hello. how do guys run interactive stuff like mysql_secure_installation
[2013-01-15 15:23:01 -0500] failshell: ?
[2013-01-15 15:23:11 -0500] matti: failshell: From Chef?
[2013-01-15 15:23:18 -0500] failshell: well yes ;p
[2013-01-15 15:23:21 -0500] PierreO: I wanted to hack nicely and make the tests pass before actually doing a pull request, but the tests don't pass before, what should I do?
[2013-01-15 15:23:29 -0500] matti: failshell: Unless there is an unattened mode, then we don't or we hack.
[2013-01-15 15:23:37 -0500] makerbreakr: matti, that doesnt seem to do the trick
[2013-01-15 15:23:51 -0500] matti: makerbreakr: :)
[2013-01-15 15:23:59 -0500] makerbreakr: if I put <% node['multi_player %> in the template, it prints one
[2013-01-15 15:24:07 -0500] makerbreakr: but the conditional just wont process correctly
[2013-01-15 15:24:07 -0500] failshell: matti: yeah, i feared that much
[2013-01-15 15:24:12 -0500] makerbreakr: prints 1 I should say
[2013-01-15 15:24:29 -0500] matti: makerbreakr: More or less exptected behaviour :)
[2013-01-15 15:24:42 -0500] matti: failshell: One second.
[2013-01-15 15:24:43 -0500] makerbreakr: ya, but the conditionals still are not working
[2013-01-15 15:24:46 -0500] makerbreakr: even with -%>
[2013-01-15 15:26:32 -0500] matti: failshell: Have a look at http://www.krautcomputing.com/blog/2012/08/22/how-to-install-and-secure-mysql-5-5-from-source-with-sprinkle/
[2013-01-15 15:26:41 -0500] xerxas: zts: found it, typo in my env, I'm so stupid ... :(
[2013-01-15 15:26:47 -0500] matti: makerbreakr: You have to have a boolean-ish value there.
[2013-01-15 15:27:48 -0500] makerbreakr: ie T /F or what?
[2013-01-15 15:27:52 -0500] makerbreakr: I was using 0/1
[2013-01-15 15:28:52 -0500] matti: 0 and/or 1 is not necessarily a boolean value in Ruby :)
[2013-01-15 15:29:14 -0500] matti: It is non-empty, yes. Which probably evaluates as true.
[2013-01-15 15:31:19 -0500] matti: makerbreakr: I have had a look at your Gist again, sorry.
[2013-01-15 15:31:40 -0500] matti: makerbreakr: Is node['multi_player'] value a string or numeric?
[2013-01-15 15:31:45 -0500] matti: makerbreakr: 1 != '1'
[2013-01-15 15:32:03 -0500] matti: makerbreakr: Also, you can use true and false in attributes.
[2013-01-15 15:32:31 -0500] matti: node.set['multi_player'] = true (JSON also has concept of true/false)
[2013-01-15 15:32:43 -0500] matti: And then if node['multi_player'] ...
[2013-01-15 15:35:29 -0500] makerbreakr: cool thanks, I was using capital TRUe
[2013-01-15 15:35:31 -0500] makerbreakr: TRUE*
[2013-01-15 15:35:36 -0500] makerbreakr: throwing it all off, all good now, thanks
[2013-01-15 15:36:09 -0500] matti: :)
[2013-01-15 15:44:52 -0500] cpasmoi: hum seems like apt cookbooks doesn't manage apt-pinning
[2013-01-15 15:49:11 -0500] teukka: cpasmoi: it does, but a bit restricted: https://github.com/opscode-cookbooks/apt#pinning-packages
[2013-01-15 15:50:18 -0500] cpasmoi: oh, didn't see that, thanks !
[2013-01-15 15:51:47 -0500] cpasmoi: well, that's strange, I was looking at https://github.com/opscode/cookbooks/tree/master/apt
[2013-01-15 15:52:19 -0500] siezer: ^ that repo is deprecated
[2013-01-15 15:52:45 -0500] cpasmoi: damn
[2013-01-15 15:52:52 -0500] cpasmoi: didn't know...
[2013-01-15 15:53:41 -0500] siezer: yea there's a big warning at the start of the readme, but github renders it at the bottom of the page, which is so long you'd have to scroll down to see it
[2013-01-15 15:53:56 -0500] siezer: probably after you've found and clicked on "apt" at the top
[2013-01-15 15:54:00 -0500] siezer: =)
[2013-01-15 16:03:04 -0500] Xiol_: Is it possible to set a nodes run_list from the node itself? I know you can pass the -j option to chef-client, but this doesn't persist over runs.
[2013-01-15 16:04:23 -0500] wassy121: Xiol_, the nodes generally aren't admin clients, so no.  This might result in people getting access to the box, then telling the chefmaster to give them some secret recipe that only secure nodes get
[2013-01-15 16:04:49 -0500] wassy121: I believe this is the case.  If it is possible, it might be done via shef
[2013-01-15 16:05:00 -0500] queso: When using the scm/git resource, it connects to my remote server using ssh to clone a repository and stops mid-script to ask if I want to continue connecting since the authenticity of the host can't be established.  (You know, like the first time you ssh to a machine.)  Is there a way to force yes on this?  Or should I add the being-connected-to-host's signature to the node's known_hosts manually?
[2013-01-15 16:05:34 -0500] Xiol_: Hmm, good point actually. We install stuff here using Cobbler, so I'm writing a kickstart to bootstrap chef-client at the end of the installation run, including converging for a set of roles passed in with -j. Guess I'll just have to set it in client.rb
[2013-01-15 16:07:18 -0500] wassy121: queso, you can write a git_ssh_wrapper , and have it set the ssh option to ignore keys in there.
[2013-01-15 16:08:09 -0500] wassy121: -o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no
[2013-01-15 16:10:07 -0500] queso: wassy121: I'm not sure how to write such a wrapper; is this what you're talking about?  http://rubysnips.wordpress.com/2012/03/19/how-to-generate-git-ssh-wrapper-to-be-used-with-chef/
[2013-01-15 16:10:28 -0500] wassy121: exactly
[2013-01-15 16:15:01 -0500] queso: wassy121: Great, thank you.
[2013-01-15 16:31:05 -0500] Joel: this might be a silly question, can you call chef recipes without using vagrant? like if I want to run them on my desktop?
[2013-01-15 16:31:20 -0500] whilp: Joel: chef-solo
[2013-01-15 16:31:29 -0500] whilp: (you can also run chef-client on your desktop, too)
[2013-01-15 16:32:16 -0500] ranjib_: Joel, absolutely , but remember this will modify your current desktop. Also chef needs to be run as root/sudo
[2013-01-15 16:34:08 -0500] ikaplun: #chef folks, i am having some trouble with a fairly simply chef recipe, running in a vagrant vm
[2013-01-15 16:34:11 -0500] knuckolls: Joel: i found this blog post to be helpful as far as that's concerned. http://vanderveer.be/blog/2013/01/02/automating-the-setup-of-my-perfect-developer-environment-on-osx-10-dot-8-mountain-lion/
[2013-01-15 16:34:33 -0500] ikaplun: the recipe just looks like this:
[2013-01-15 16:34:45 -0500] ikaplun: package "cmake" do
[2013-01-15 16:34:45 -0500] ikaplun:   action :install
[2013-01-15 16:34:45 -0500] ikaplun: end
[2013-01-15 16:34:50 -0500] Joel: knuckolls: thanks, that's basically exactly what I want to do.
[2013-01-15 16:35:02 -0500] Joel: ikaplun: thanks for the paste, welcome to 95'
[2013-01-15 16:35:03 -0500] ikaplun: in response i get: Errno::ENOENT: No such file or directory - yum -d0 -e0 -y install cmake-2.6.4-5.el5.4
[2013-01-15 16:35:11 -0500] ikaplun: thanks, Joel
[2013-01-15 16:39:18 -0500] knuckolls: ikaplun: can you run that yum command by hand as root?
[2013-01-15 16:39:25 -0500] ikaplun: yes, that works
[2013-01-15 16:39:39 -0500] knuckolls: are you running the chef-client as root?
[2013-01-15 16:40:34 -0500] ikaplun: knuckolls: no, i am running vagrant, with a chef-solo provisioner.
[2013-01-15 16:42:35 -0500] knuckolls: well the chef-solo provisioner should be running chef-client as root on the vm
[2013-01-15 16:43:22 -0500] knuckolls: there are peculiarities to your scenario that i might not be able to help with, but in your shoes i'd hop onto the vm, sudo su to root, and run shef -z to run some recipes by hand
[2013-01-15 16:43:50 -0500] knuckolls: i'm largely unfamiliar with vagrant & chef-solo, so i might not be the best to help
[2013-01-15 16:44:17 -0500] ikaplun: kncuckolls: that's a great tip, i will do that now. i was curious if the error message was meaningful to you - does it suggest a possible permissions error?
[2013-01-15 16:44:39 -0500] ikaplun: knuckolls: sorry about the misspelling :)
[2013-01-15 16:45:15 -0500] knuckolls: again i'm just inferring, because i'm not a rhel/centos guy. but in ubuntu-land i've had similar problems when i wasn't running chef-client as root
[2013-01-15 16:45:19 -0500] knuckolls: so i figure it's worth a shot
[2013-01-15 16:45:26 -0500] knuckolls: http://wiki.opscode.com/display/chef/Shef
[2013-01-15 16:45:31 -0500] knuckolls: that's worth reading.
[2013-01-15 16:45:35 -0500] ikaplun: great, thanks a lot!
[2013-01-15 16:45:40 -0500] cassianoleal1: AFAIK, chef-solo does not touch chef-client at all
[2013-01-15 16:46:07 -0500] cassianoleal1: and the Vagrant provisioner runs as root, so that shouldn't be a problem
[2013-01-15 16:46:20 -0500] knuckolls: see here's someone that is likely to be more helpful than I ;)
[2013-01-15 16:46:49 -0500] cassianoleal1: have you tried calling the yum cookbook along? (here I'm just guessing as I'm not a rhel/centos guy really) :)
[2013-01-15 16:47:45 -0500] cassianoleal1: knuckolls: you should probably be using vagrant as well, it's ridiculously useful! :)
[2013-01-15 16:48:15 -0500] mjolk: can someone recommend documentation or provide an example of a LWRP using arguments given to it by a recipe?
[2013-01-15 16:48:20 -0500] knuckolls: it's neglegence at this point. i've toyed with it quite a bit, but haven't institutionalized it into my workflow
[2013-01-15 16:48:23 -0500] mjolk: i have a recipe that calls a LWRP that uses a custom library
[2013-01-15 16:48:31 -0500] knuckolls: it'll be required at my new job so, vagrant ahoy!
[2013-01-15 16:48:53 -0500] cassianoleal1: I'm sure you'll never look back
[2013-01-15 16:49:36 -0500] ikaplun_: knuckolls: this seems like an interesting resource: http://jyates.github.com/2011/11/26/vagrant-chef-tips.html . looks like permissions are definitely the culprit.
[2013-01-15 16:50:39 -0500] knuckolls: ikaplun: i bet if you get vagrant to install chef-solo on the node, then you can get in there and run it by hand to remove some moving parts
[2013-01-15 17:00:16 -0500] RawProduce: is it advisable to always use chef client-server as opposed to stand-alone for servers?
[2013-01-15 17:00:31 -0500] RawProduce: I can't quite figure out what the benefit of it is
[2013-01-15 17:00:37 -0500] ikaplun: knuckolls: turns out it was a path issue - /usr/bin was not in the execution path. not sure why, but happy to have a fix. thanks for the help.
[2013-01-15 17:01:27 -0500] scalability-junk: hey I'm looking into chef and it seems pretty complex to achieve dynamic stuff, but one thing I haven't found is setting attributes or config values depending on vm sizes or server sizes.
[2013-01-15 17:02:09 -0500] scalability-junk: say memcache server deployed with 256mb ram should take 200mb ram and on a 5gb ram server it should use 4,9gb or so
[2013-01-15 17:02:23 -0500] scalability-junk: any docs about this? or don't i want to do that?
[2013-01-15 17:04:38 -0500] cwj: scalability-junk: you can use ruby in your recipe to detect the instance size etc, then set attributes values accordingly in the recipe
[2013-01-15 17:05:18 -0500] scalability-junk: cwj looking at the default cookbooks/recipes on github noone really does that, any reason?
[2013-01-15 17:06:45 -0500] cwj: scalability-junk: maybe they prefer to use roles? one could have roles like memcached_256mb and memcached_5g with static values
[2013-01-15 17:07:29 -0500] scalability-junk: cwj, ok roles are like flavors, recipes are minimal config workers and cookbooks combine the minimal things right?
[2013-01-15 17:08:36 -0500] cwj: yeah thats mostly right. you can very easily write a cookbook which includes a 3rd party's cookbook's recipe(s) and uses your own logic to set the attributes that the 3rd party recipe uses
[2013-01-15 17:10:09 -0500] cwj: resources are the real primitives, recipes can be as complex as you like
[2013-01-15 17:11:40 -0500] scalability-junk: damn that seems a lot more complicated than I imagined ;)
[2013-01-15 17:15:58 -0500] cwj: chef does have a pretty steep learning curve, but i have found it is rewarding if you stick it out
[2013-01-15 17:16:21 -0500] yatesy: +1
[2013-01-15 17:16:25 -0500] specialsauce: there's very much a third stage :-)
[2013-01-15 17:17:23 -0500] Xiol_: what does not_if actually test for? I've got a command that returns 0 (in $?) when run manually, but not_if refuses the run the rest of the command. ...or I am have a massive logic fail here
[2013-01-15 17:17:43 -0500] cassianoleal1: in Ruby, 0 is true as is any object apart from false or nil
[2013-01-15 17:18:03 -0500] zts: Xiol_: can you gist/pastebin the resource please?
[2013-01-15 17:18:09 -0500] Xiol_: then how do you use not_if correctly if commands always return integers?
[2013-01-15 17:18:22 -0500] Xiol_: in the return code.
[2013-01-15 17:18:27 -0500] Xiol_: or does it look at the command output?
[2013-01-15 17:19:25 -0500] cassianoleal1: you have to give some meaning to the integers using an if statement, or maybe a ternary operator
[2013-01-15 17:20:01 -0500] cassianoleal1: not_if command == 0 ? true : false
[2013-01-15 17:20:04 -0500] cassianoleal1: that might do it
[2013-01-15 17:20:08 -0500] zts: Xiol_: actually, I think you're having a logic fail there.  return code 0 on the shell is true, not_if true means don't converge the resource
[2013-01-15 17:20:49 -0500] Xiol_: zts: I suspected as much. Also just found the line in the documentation I've been missing... http://wiki.opscode.com/display/chef/Resources#Resources-ConditionalExecution
[2013-01-15 17:21:00 -0500] Xiol_: "Strings are executed as a shell command. The attribute is true if the command returns 0."
[2013-01-15 17:21:15 -0500] zts: aha
[2013-01-15 17:21:21 -0500] cassianoleal1: ah, so that resource already does the conversion. nice! :)
[2013-01-15 17:22:17 -0500] Xiol_: I think I'm mixing up the not_if and only_if meanings.
[2013-01-15 17:23:23 -0500] scalability-junk: is there any documentation on how to let allinone installs grow to multi node installs? not needed, but out of curiousity...
[2013-01-15 17:25:34 -0500] Xiol_: Actually no, I don't think it is working... Basically I'm trying to add an IP to a box, and I'm grepping the output of "ip a" to determine if i need to execute the add command or not. When the IP isn't on the box, grep returns an exit code of 1, which should be triggered by not_if ("not_if {false} indicates the action should always be performed")
[2013-01-15 17:25:36 -0500] cwj: scalability-junk: can you elaborate on your question?
[2013-01-15 17:26:15 -0500] scalability-junk: simply put: how to go from apache + mysql on one server to apache and mysql each on their own server?
[2013-01-15 17:28:47 -0500] cwj: scalability-junk: well pretend that you have a cookbook called my_awesome_app which aims to deploy the app, configure apache to run it and mysql to backend it. each logically distinct service should probably have its own recipe
[2013-01-15 17:29:03 -0500] cwj: i would suggest that the cookbook would have at least threee recipes, e.g. default.rb apache.rb and mysql.rb)
[2013-01-15 17:29:12 -0500] jkyle: I'm looking at the nagios cookbook and I see a reference to a node attribute called "cloud" in one of the templates. for example, node['cloud']['public_ipv4']. This looks like what I'd expect to see in openstack or ec2 metadata. What ohai plugin/support is providing that?
[2013-01-15 17:29:24 -0500] cwj: default.rb would deploy the app, maybe using the existing application cookbook pattern
[2013-01-15 17:29:38 -0500] cwj: apache.rb would use the existing apache cookbook to install and configure apache
[2013-01-15 17:29:44 -0500] Xiol_: http://pastebin.com/HYT0fR6a - here is my IP address provider. Logically that seems to make sense, no?
[2013-01-15 17:30:07 -0500] Xiol_: but the commands aren't being run because the not_if is being triggered not to run
[2013-01-15 17:30:07 -0500] cwj: mysql.rb would use the existing mysql and database cookbooks to install and configure mysql and ensure the required database exists
[2013-01-15 17:30:48 -0500] cwj: then when you are ready to split this out over multiple tiers, each tier is only running one or two of those recipes instead of all three
[2013-01-15 17:32:03 -0500] scalability-junk: cwj, but that would be sort of a manual approach with splitting the cookbook and adding the attributes with ip etc. to the database and so on?
[2013-01-15 17:32:29 -0500] cwj: scalability-junk: i would use search to find the database servers instead of manually specifying their IP addresses
[2013-01-15 17:32:44 -0500] scalability-junk: couldn't I have sort of roles ['apache','mysl'] -> ['apache'] and on the other server ['mysql']
[2013-01-15 17:33:00 -0500] scalability-junk: cwj, ah yeah perfect
[2013-01-15 17:33:06 -0500] cwj: yes, and your roles would include the relevant recipes from your cookbook in their run list
[2013-01-15 17:33:12 -0500] cwj: and you would use the role as a key to search on
[2013-01-15 17:33:48 -0500] scalability-junk: kk sounds good
[2013-01-15 17:34:17 -0500] scalability-junk: one thing I'm unsure about is the method.
[2013-01-15 17:34:24 -0500] scalability-junk: everything is pulling the configs right?
[2013-01-15 17:34:41 -0500] scalability-junk: so I specify on the server with chef-client which roles and the configs are pulled right?
[2013-01-15 17:35:15 -0500] rayrod2030: hey guys anybody passing specific chef versions to their omnibus installers?  I'm trying to lock in 0.10.4 in my case.
[2013-01-15 17:35:28 -0500] cwj: scalability-junk: what do you mean by "pulling configs"
[2013-01-15 17:35:58 -0500] scalability-junk: so when I wanna move 5 ['mysql'] to let's say ['memcached'] I would need to go to every server and specify the new role with chef-client, or am I mixing the setup with chef-solo ?
[2013-01-15 17:36:14 -0500] cwj: each node running chef-client has a node object (basically a hash of attributes and their values)
[2013-01-15 17:36:29 -0500] cwj: the node object is stored in the chef-server
[2013-01-15 17:36:56 -0500] cwj: when you want to change a node's run list, you would edit the run_list attribute of that node's object
[2013-01-15 17:37:11 -0500] cwj: i use the 'knife' command to do stuff like that
[2013-01-15 17:37:14 -0500] cwj: knife node edit foo
[2013-01-15 17:37:27 -0500] cwj: would return the node object for node foo to my $EDITOR
[2013-01-15 17:37:51 -0500] scalability-junk: ok so I could get all nodes in the server via knife and then pick the ones I want and change them to a new role for example...?
[2013-01-15 17:37:54 -0500] cwj: i make changes, when i save and exit the changes are checked for syntax and then pushed to the server
[2013-01-15 17:38:02 -0500] scalability-junk: cool
[2013-01-15 17:38:36 -0500] cwj: if you need to make changes to a lot of nodes at once, you can write scripts to do stuff like that for you
[2013-01-15 17:39:21 -0500] cwj: for example theres a gem called spice that makes interacting with the chef api pretty easy
[2013-01-15 17:40:07 -0500] cwj: or just write some bash for loops around knife commands, etc
[2013-01-15 17:40:25 -0500] scalability-junk: in the simplest sense I would have a .py script which gets all nodes with role ['mysql'] from one group then uses these nodes and changes the role to ['memcached'] -> all with chef server api
[2013-01-15 17:40:34 -0500] scalability-junk: ok cool
[2013-01-15 17:41:05 -0500] cwj: if you prefer python i think there is a module called pychef which helps with chef api interaction
[2013-01-15 17:41:10 -0500] scalability-junk: but no real gui for such things, such as I select these servers and do something with them? (no gui \o/ ) :
[2013-01-15 17:41:22 -0500] cwj: theres a webui for the api
[2013-01-15 17:41:26 -0500] scalability-junk: cwj, I love python yeah
[2013-01-15 17:41:43 -0500] cwj: i dont use the webui, so i cant really speak to ease of use etc
[2013-01-15 17:41:51 -0500] cwj: apparently some people do, but i dont see the point
[2013-01-15 17:41:55 -0500] scalability-junk: cwj, ah kk
[2013-01-15 17:42:47 -0500] dougireton: Ohai Chefs! New blog post up on Creating an LWRP - Part 3. Hope it's helpful. http://dougireton.com/blog/2013/01/13/creating-an-lwrp-part-3/
[2013-01-15 17:42:50 -0500] scalability-junk: cwj, thanks for your help, I got quite a few understanding issues crossed out now, now reading the docs again and then hopefully starting to migrate my first project to chef \o/
[2013-01-15 17:43:17 -0500] cwj: scalability-junk: glad i could help, here's to your success :)
[2013-01-15 17:44:00 -0500] Xiol_: dougireton: maybe you can tell me what's wrong with mine! http://pastebin.com/HYT0fR6a
[2013-01-15 17:45:10 -0500] dougireton: Xiol_: What issues are you seeing?
[2013-01-15 17:45:58 -0500] dougireton: Xiol_: have you tried with Debug logging turned on?
[2013-01-15 17:46:07 -0500] Xiol_: dougireton: The way I see it (unless I'm being stupid) is if the IP isn't already on the box (grep returns nonzero), the IP will be added. This doesn't happen however. If I test my grep manually it works as expected, and removing the not_if means the IP is added successfully
[2013-01-15 17:46:16 -0500] rayrod2030: has anyone successfully passed a version number to the omnibus installer script?
[2013-01-15 17:46:20 -0500] Xiol_: dougireton: Yep, doesn't show much more than info for that particular part of the run
[2013-01-15 17:48:19 -0500] dougireton: Xiol_: Maybe capture the result of grep 'inet'  and also the whole not_if command into variables and Chef::Log.debug it
[2013-01-15 17:49:03 -0500] cassianoleal1: anyone using the RVM cookbook?
[2013-01-15 17:49:13 -0500] dougireton: Xiol_: you may need to assign new_resource.ip_address to a local variable inside your :add action (before the execute block)
[2013-01-15 17:49:28 -0500] cassianoleal1: If so, what's the deal with root using the system ruby instead of the one set by rvm?
[2013-01-15 17:50:10 -0500] Xiol_: dougireton: I puts the constructed grep command out to stdout and it appears to be correct ("ip a | grep 10\.0\.0\.1" for example)
[2013-01-15 17:50:34 -0500] Xiol_: (Attempting to use Chef::Log caused an exception!)
[2013-01-15 17:51:13 -0500] zts: scalability-junk: for manipulating groups of nodes, you might also find 'knife exec' handy - http://wiki.opscode.com/display/chef/Knife+Exec
[2013-01-15 17:51:56 -0500] dougireton: Xiol_: but are you puts'ing out the grep command with the `new_resouce.ip_address` variable?
[2013-01-15 17:52:44 -0500] Xiol_: dougireton: yeah, that's what i meant sorry. e.g. I replaced "not_if" with "puts"
[2013-01-15 17:52:47 -0500] dougireton: Xiol_: I had issues with using the `new_resource` from my Provider inside another Resource type (in my case PowerShell)
[2013-01-15 17:52:48 -0500] scalability-junk: one thing I'm not clear about is the hierarchy: groups (projects?) -> roles (apache, mysql) -> cookbooks (whole service) -> recipes(parts of the service)?
[2013-01-15 17:52:55 -0500] scalability-junk: zts, thanks
[2013-01-15 17:54:14 -0500] Xiol_: dougireton: I've also had issues in the past when I tried to write another LWRP. I had to access @new_resource instead (as an instance variable, which goes against the docs). This time I can't do it that way. It's very inconsistent and I'm not sure what I did wrong that time!
[2013-01-15 17:54:34 -0500] Xiol_: not that I'm blaming Chef, I'm doing something wrong somehwere!
[2013-01-15 17:54:50 -0500] dougireton: xiol: I'm still figuring out @new_resource vs new_resource myself
[2013-01-15 18:06:46 -0500] makerbreakr: is it possible to remove a role from within a recipe?
[2013-01-15 18:07:20 -0500] makerbreakr: *remove the role from the ndoe
[2013-01-15 18:08:59 -0500] cassianoleal1: makerbreakr: This http://hectcastro.me/2012/03/31/running-chef-recipes-once.html talks about a recipe removing itself. Should apply to roles as well, but I haven't tested.
[2013-01-15 18:09:15 -0500] makerbreakr: ya, i have removed recipes just not roles
[2013-01-15 18:09:18 -0500] makerbreakr: ty
[2013-01-15 18:09:21 -0500] cassianoleal1: np
[2013-01-15 18:09:53 -0500] cassianoleal1: my guess is that you simply run node.run_list.remove("role[some_role]")
[2013-01-15 18:10:03 -0500] makerbreakr: going to try that now
[2013-01-15 18:10:32 -0500] makerbreakr: no, that didnt work
[2013-01-15 18:10:36 -0500] makerbreakr: attribute role not defined
[2013-01-15 18:11:10 -0500] makerbreakr: but may be because the roles is not assigned yet
[2013-01-15 18:11:22 -0500] cassianoleal1: yeah, that would be a problem! :)
[2013-01-15 18:12:59 -0500] makerbreakr: fyi,   block { node.run_list.remove("role[SETUP]") }
[2013-01-15 18:13:17 -0500] cassianoleal1: nice
[2013-01-15 18:37:08 -0500] sunil_: is there a way to manage environment specific run_lists without repeating the same content?  most of my environments share same kind of cookbooks with few differences..
[2013-01-15 18:38:02 -0500] tomdzk: sunil_: you can do that in roles
[2013-01-15 18:38:35 -0500] tomdzk: sunil_: http://wiki.opscode.com/display/chef/Roles#Roles-env_run_lists
[2013-01-15 18:38:45 -0500] sunil_: yes I have it in the role but list is super long..so kind of sucks to manage a long list for each environment within a role file..
[2013-01-15 18:39:15 -0500] mjolk: roles can include other roles
[2013-01-15 18:39:15 -0500] tomdzk: sunil_: it's a ruby file, and the run lists are arrays, so you can just use normal ruby array concatenation
[2013-01-15 18:39:56 -0500] sunil_: got it  that makes more sense tomdzk
[2013-01-15 18:40:33 -0500] cheflevelramen: Hi. Is there a way to make the ignore_failure resource be silent when there are errors? Right now I get quite a bit of error output, though it's ignored. Like to make that output go away
[2013-01-15 18:42:43 -0500] jhayden: Discovered by my security group today: http://your_chef_server_here:4000/aa?zlo=%3Cscript%3Ealert%281%29%3C/script%3E
[2013-01-15 18:43:04 -0500] jhayden: is this the same issue as CHEF-2264
[2013-01-15 18:45:26 -0500] deed02392: hi guys. I'm using hosted chef - I just assigned a cookbook/recipe to a node (the example ntp one) through the web interface, but as far as I can tell it hasn't done anything at all on the node
[2013-01-15 18:45:59 -0500] deed02392: no config file generated at least. can't see if the package has been installed - no logs i can see from the chef server interface?
[2013-01-15 18:46:07 -0500] jtimberman: deed02392: you need to run chef-client on the node.
[2013-01-15 18:46:30 -0500] deed02392: that's in the run list though
[2013-01-15 18:46:31 -0500] deed02392: i added the chef-client runlist item
[2013-01-15 18:46:37 -0500] WPsites: is there an easy way to merge attributes that could be in the node or set in a data bag?
[2013-01-15 18:46:38 -0500] deed02392: recipe, rather
[2013-01-15 18:47:01 -0500] jtimberman: deed02392: the node object on the chef server is just data about the node, it doesn't take any action on the node.
[2013-01-15 18:47:24 -0500] tomdzk: WPsites: https://github.com/hw-cookbooks/bag_config might be helpful
[2013-01-15 18:47:39 -0500] deed02392: ah really
[2013-01-15 18:47:40 -0500] deed02392: but the server is saying the node is 'checking in'
[2013-01-15 18:47:40 -0500] deed02392: so shouldn't it be processing it's new recipe when it sees that as it checks in
[2013-01-15 18:48:06 -0500] jtimberman: the server does not initiate any connection to the client.
[2013-01-15 18:48:17 -0500] jtimberman: its entirely pull based from the client's point of view.
[2013-01-15 18:49:12 -0500] tomdzk: deed02392: the run list on the chef server is equivalent to what the node is supposed to run, but the node itself decides when to update
[2013-01-15 18:49:24 -0500] deed02392: right, but I thought installing the recipe chef-client would have added a cron or someting to do that pulling automatically
[2013-01-15 18:49:59 -0500] jtimberman: deed02392: has chef run on the system with the chef-client service or cron recipe?
[2013-01-15 18:50:00 -0500] deed02392: okay. i've just run chef-client manually on the node and it's pulled the recipe and installed it
[2013-01-15 18:50:03 -0500] tomdzk: deed02392: it can do that, yes, but maybe you have a configuration problem
[2013-01-15 18:50:21 -0500] tomdzk: deed02392: right, chicken-and-egg problem :)
[2013-01-15 18:50:34 -0500] deed02392: i think jtimberman is right - might not have manually run chef-client after adding the chef-client recipe
[2013-01-15 18:50:43 -0500] deed02392: hehe
[2013-01-15 18:50:44 -0500] deed02392: indeed
[2013-01-15 18:51:09 -0500] deed02392: so in terms of troubleshooting invalid recipes etc
[2013-01-15 18:51:09 -0500] deed02392: we are to investigate that on logs stored locally relative to nodes?
[2013-01-15 18:51:23 -0500] deed02392: or will nodes feedback to the server any issues it encounters
[2013-01-15 18:51:44 -0500] deed02392: i see in the stdout of trying to install this example recipe i wrote there were fatal errors
[2013-01-15 18:52:09 -0500] jtimberman: http://docs.opscode.com/chef/essentials_handlers.html
[2013-01-15 18:52:19 -0500] deed02392: of course normalyl i wouldn't be watching nodes this closely (i hope) so where would I normally expect to realise issues?
[2013-01-15 18:53:26 -0500] tomdzk: deed02392: I think ohai has info about the recipes currently on the node (as opposed to what it is supposed to have, in the run_list)
[2013-01-15 18:53:47 -0500] tomdzk: deed02392: in your chef UI, go to nodes/<node name>, the recipes attribute should show that iirc
[2013-01-15 18:53:59 -0500] till_: hi
[2013-01-15 18:54:29 -0500] till_: i am trying to override something in an attribute file with 'chef.json' in vagrant. but instead of overriding it, it seems to merge it. any idea what goes wrong?
[2013-01-15 18:55:44 -0500] deed02392: ah yeah, well the recipes attribute shows a distinct lack of the recipe i assigned to it!
[2013-01-15 18:56:14 -0500] deed02392: jtimberman, so by default hosted chef doesn't provide some kind of fancy webgui to see the succesful run state of my cluster?
[2013-01-15 18:56:35 -0500] tomdzk: till_: I think vagrant's chef.json will only override default attributes, maybe normal too (haven't tried that) (http://wiki.opscode.com/display/chef/Attributes#Attributes-Precedence)
[2013-01-15 18:56:59 -0500] jtimberman: deed02392: not yet
[2013-01-15 18:58:31 -0500] till_: tomdzk: in my recipe, i am using default[]
[2013-01-15 18:58:34 -0500] deed02392: but at least with exception handling I can be instantly alerted to unfolding disaster
[2013-01-15 18:58:57 -0500] till_: when i add the json to my vagrantfile, what i have in the json gets merged (combined) with default[]
[2013-01-15 18:59:03 -0500] till_: when i expect to "replace" it
[2013-01-15 18:59:05 -0500] jtimberman: deed02392: yup. anything you can talk to through ruby can be used, so go nuts. :)
[2013-01-15 18:59:09 -0500] till_: is this normal?
[2013-01-15 18:59:34 -0500] tomdzk: deed02392: should be straightforward to write a nagios/sensu check that verifies the run_list against what's actually on the node and alerts after 30 min or whatever your chef-client cron interval is
[2013-01-15 18:59:50 -0500] tomdzk: till_: yep, that is normal
[2013-01-15 19:00:06 -0500] till_: tomdzk: is there a way to achieve what i am trying to achieve?
[2013-01-15 19:00:19 -0500] till_: should i use set_unless[] in my recipe's attribute file?
[2013-01-15 19:00:29 -0500] tomdzk: till_: if you specify defaults and then don't override them, then you'll get those values
[2013-01-15 19:00:59 -0500] maplebed: siezer: morning.  If you have time, I'd like to chat again about the squid cookbook
[2013-01-15 19:01:15 -0500] till_: yes, so i specified defaults in foo/attributes/default.rb - these work almost always. now in my vagrant, i am trying to override/replace them and that does not work.
[2013-01-15 19:01:31 -0500] tomdzk: till_: but a value in chef.json should override a default, unless you have an override elsewhere (e.g. a role)
[2013-01-15 19:01:52 -0500] till_: no roles
[2013-01-15 19:02:08 -0500] till_: i can't figure this out - it does not override, it combines
[2013-01-15 19:02:23 -0500] till_: https://github.com/till/easybib-cookbooks/blob/master/php-fpm/attributes/default.rb#L15 < these are my defaults
[2013-01-15 19:02:31 -0500] siezer: maplebed hi whats up
[2013-01-15 19:03:01 -0500] maplebed: so last night we were talking about exception catching, and reading through your cookbook I see the exception part is moved to a library but mostly unchanged.
[2013-01-15 19:03:10 -0500] maplebed: https://github.com/mattray/squid-cookbook/blob/master/recipes/default.rb#L62-L71 vs. https://github.com/someara/squid-cookbook/blob/master/libraries/default.rb#L4-L13
[2013-01-15 19:03:30 -0500] maplebed: does it successfully catch those exceptions in the library but not in a recipe?
[2013-01-15 19:03:58 -0500] siezer: it could catch them either way.... I just moved them into a library so that they're not cluttering up the main recipe
[2013-01-15 19:04:07 -0500] siezer: readability concerns, etc
[2013-01-15 19:04:14 -0500] till_: tomdzk: https://gist.github.com/4541073 < this is my chef.json
[2013-01-15 19:04:27 -0500] maplebed: my issue is that it seems like they're not getting caught because I'm still getting errors in the chef output.
[2013-01-15 19:04:37 -0500] siezer: do they not work? I haven't tried running it without the data bag yet...
[2013-01-15 19:04:38 -0500] siezer: ah
[2013-01-15 19:04:52 -0500] siezer: sec lemme look
[2013-01-15 19:05:07 -0500] tomdzk: till_: what do you expect to see ?
[2013-01-15 19:05:08 -0500] maplebed: I get an error "ERROR: Failed to list data bag items in data bag: "squid_urls""
[2013-01-15 19:05:24 -0500] maplebed: (and also with the other two data bags)
[2013-01-15 19:05:43 -0500] siezer: followed by an info  Chef::Log.info "no 'squid_hosts' data bag"
[2013-01-15 19:05:45 -0500] till_: tomdzk: i want only `php5-easybib` and `mysql-client` in the node["php-fpm"][:packages]
[2013-01-15 19:05:47 -0500] maplebed: yeah.
[2013-01-15 19:06:25 -0500] maplebed: https://gist.github.com/4541094 is the relevant section of the chef log output
[2013-01-15 19:06:29 -0500] siezer: those should be safe to ignore.. the begin/rescue block exists so that it doesn't stop the compilation of the resource collection
[2013-01-15 19:06:40 -0500] tomdzk: till_: I think this: default["php-fpm"][:packages] = { "graphviz" => nil, ... }
[2013-01-15 19:06:46 -0500] maplebed: they're cluttering up my cronmail.
[2013-01-15 19:06:46 -0500] tomdzk: is equivalent to default["php-fpm"][:packages][:graphviz] = nil
[2013-01-15 19:06:47 -0500] maplebed: :P
[2013-01-15 19:06:52 -0500] siezer: how to supress the errors so they don't show up as noise? I haven't investigated that yet =)
[2013-01-15 19:07:04 -0500] maplebed: :(
[2013-01-15 19:07:34 -0500] maplebed: The nagios cookbook doesn't seem to generate them; here's the relevant section: https://github.com/opscode-cookbooks/nagios/blob/master/recipes/server.rb#L117-L127
[2013-01-15 19:07:47 -0500] maplebed: The only thing I see they do different is catch a more specific exception.
[2013-01-15 19:07:49 -0500] siezer: maybe... try refactoring it to use search(:squid_hosts, "*:*").each ?
[2013-01-15 19:07:52 -0500] maplebed: which doesn't make sense that it would work...
[2013-01-15 19:08:09 -0500] maplebed: oh.  yeah, that's different too.
[2013-01-15 19:08:36 -0500] maplebed: ok, I'll give that a shot.
[2013-01-15 19:08:52 -0500] till_: tomdzk: hmm
[2013-01-15 19:08:57 -0500] till_: that is true
[2013-01-15 19:09:03 -0500] till_: but how would you adjust the json?
[2013-01-15 19:09:24 -0500] maplebed: siezer: one other thing - I left a comment on your github page noting a typo in the most recent commit to that repo.
[2013-01-15 19:09:29 -0500] siezer: k let me know if thats better. I still have a few little things to clean up before publishing the new version on the community site
[2013-01-15 19:09:47 -0500] siezer: *looks*
[2013-01-15 19:10:02 -0500] tomdzk: till_: it might be better to not use a hash for that attribute; e.g. use a string "graphviz,php5-easybib,..." that you parse in the recipe
[2013-01-15 19:10:47 -0500] tomdzk: till_: or alternatively you split this into two attributes, a packages one that is empty by default, and a default_packages attribute that is used iff the packages one is not set
[2013-01-15 19:11:02 -0500] till_: tomdzk: ah, maybe that is easier all together. i was going for 'package' => 'version'
[2013-01-15 19:11:10 -0500] till_: but hardly ever use version nowadays
[2013-01-15 19:11:19 -0500] till_: that is actually the best idea
[2013-01-15 19:11:22 -0500] till_: dumb it down
[2013-01-15 19:11:35 -0500] siezer: hrm, not seeing it.. link? I turned off all my github emails because *firehose*
[2013-01-15 19:11:45 -0500] tomdzk: till_: I would keep the versions, always a good idea to explicitly specify the versions of the packages you require, to avoid unexpected updates of packages that you don't control
[2013-01-15 19:11:58 -0500] maplebed: one sec.
[2013-01-15 19:13:13 -0500] maplebed: siezer: https://github.com/someara/squid-cookbook/commit/ed335caff33504a6151fcc5264f5dc5fa1dab01e just a typoed email address.
[2013-01-15 19:13:36 -0500] maplebed: in recipes/default.rb
[2013-01-15 19:14:49 -0500] till_: tomdzk: yeah, right now, we solved that issue by using multiple PPAs on launchpad
[2013-01-15 19:15:02 -0500] till_: since i discovered that a launchpad PPA only keeps the latest release around ;)
[2013-01-15 19:15:44 -0500] tomdzk: till_: yeah, don't know why they do that, standard ubuntu/debian repos can have multiple versions of the same package
[2013-01-15 19:16:14 -0500] till_: yeah, you cannot even give them money to fix it
[2013-01-15 19:16:31 -0500] till_: money just buys you private builds but i could really care less if anyone uses my packages
[2013-01-15 19:16:49 -0500] tomdzk: till_: yeah, we run our own apt repo for that reason (using apt-ftparchive)
[2013-01-15 19:17:58 -0500] till_: tomdzk: i am playing with the idea to combine sources with repropro, but what i am really after (re: launchpad) is the build farm.
[2013-01-15 19:18:14 -0500] tomdzk: till_: reprepro doesn't do multiple versions of a package either
[2013-01-15 19:19:14 -0500] till_: hrm
[2013-01-15 19:19:19 -0500] till_: good to know
[2013-01-15 19:19:31 -0500] till_: so you have your own buildfarm?
[2013-01-15 19:19:55 -0500] tomdzk: till_: fpm + jenkins
[2013-01-15 19:20:17 -0500] till_: hehe
[2013-01-15 19:20:33 -0500] till_: yeah, fpm is nice. so i guess you use chef to take care of all deps?
[2013-01-15 19:20:38 -0500] red5|ryan1: I have some IPs still in gossip for retired nodes. Is there a quick way to remove them if the boxes don't even exist anymore?
[2013-01-15 19:20:56 -0500] tomdzk: till_: chef and dpkg where appropriate
[2013-01-15 19:21:03 -0500] red5|ryan1: and wrong channel
[2013-01-15 19:21:04 -0500] red5|ryan1: woops
[2013-01-15 19:21:18 -0500] tomdzk: till_: apt, rather
[2013-01-15 19:22:30 -0500] till_: tomdzk: i didn't think that fpm created packages which would resolve their own debs? i thought a dpkg just 'errored' if something was missing and didn't install anything unless you told it to?
[2013-01-15 19:22:43 -0500] till_: debs = deps (freud)
[2013-01-15 19:22:44 -0500] till_: :)
[2013-01-15 19:24:23 -0500] tomdzk: till_: -d flag adds dependencies
[2013-01-15 19:24:38 -0500] tomdzk: till_: e.g. -d "foo = 1.2.3"
[2013-01-15 19:24:56 -0500] tomdzk: till_: use -d multiple times for multiple dependencies
[2013-01-15 19:25:23 -0500] till_: yeah, sorry, mis-understanding
[2013-01-15 19:25:28 -0500] till_: you have to do all this by hand
[2013-01-15 19:25:37 -0500] till_: vs. apt-get install foo and it does it on its own
[2013-01-15 19:26:06 -0500] tomdzk: till_: ? we use fpm with -d, and then apt_repository + package resources with apt provider, works fine
[2013-01-15 19:26:25 -0500] till_: oh wait
[2013-01-15 19:26:26 -0500] till_: wat
[2013-01-15 19:26:28 -0500] till_: :D
[2013-01-15 19:26:39 -0500] till_: interesting
[2013-01-15 19:26:41 -0500] till_: is this new?
[2013-01-15 19:29:03 -0500] tomdzk: till_: it's in there at least since march 2012 :)
[2013-01-15 19:32:22 -0500] till_: tomdzk: I had no idea, dpkg by itself always felt like rpm ;) - but i need to check this out. thanks!
[2013-01-15 19:32:36 -0500] till_: it's been a pretty long while since i looked at fpm, not sure if that long though
[2013-01-15 19:32:47 -0500] tomdzk: till_: yeah, dpkg doesn't do dependency resolution, you'll need to use apt
[2013-01-15 19:37:05 -0500] till_: tomdzk: wasn't aware that you could use what fpm produces with apt
[2013-01-15 19:37:14 -0500] till_: this helps a lot though
[2013-01-15 19:40:49 -0500] makerbreakr: how would you guys grep the manufacture of a video card?
[2013-01-15 19:43:58 -0500] cwj: is it in the node's dmi attributes?
[2013-01-15 19:44:45 -0500] makerbreakr: nah
[2013-01-15 19:45:12 -0500] makerbreakr: i think    lspci | grep "VGA compatable controller: MANUFACTURER"
[2013-01-15 19:45:13 -0500] tomdzk: makerbreakr: if it's linux, you can use lshw
[2013-01-15 19:45:14 -0500] makerbreakr: shoudl work
[2013-01-15 19:45:45 -0500] KarlHungus: makerbreakr: i told you this yeterday?
[2013-01-15 19:45:55 -0500] makerbreakr: ya, but the dmi didnt show it
[2013-01-15 19:45:59 -0500] KarlHungus: lspci for linux, pciconf for *bsd/solaris, or dmesg
[2013-01-15 19:46:27 -0500] makerbreakr: I just wanst sure if that was the beset way, since I hvae to grep for a string, that may change at some point
[2013-01-15 19:46:46 -0500] KarlHungus: yeah, lspci is a shitty tool
[2013-01-15 19:47:09 -0500] tomdzk: makerbreakr: on my linux box, lshw gives me:            *-display
[2013-01-15 19:47:09 -0500] tomdzk:                 description: VGA compatible controller
[2013-01-15 19:47:10 -0500] tomdzk:                 product: GF119 [GeForce GT 520]
[2013-01-15 19:47:10 -0500] tomdzk:                 vendor: NVIDIA Corporation
[2013-01-15 19:48:32 -0500] KarlHungus: makerbreakr: i dont know how back compat this is (since i'm on bsd) but i think lspci -mmvvv will dump a metric ton of crap. other options exist to filter as well
[2013-01-15 19:56:39 -0500] rwsu: hi, I'm trying to install the nova cookbook, but it fails because osops-utils couldn't be found, http://fpaste.org/cVHA/
[2013-01-15 19:56:41 -0500] rwsu: any ideas?
[2013-01-15 20:07:15 -0500] mattray: rwsu: you'll want to use Librarian, the Cheffile has the version of that to use
[2013-01-15 20:07:58 -0500] mattray: it's not on the Community site, it may be going away
[2013-01-15 20:10:15 -0500] bubu: hi guys - am using hosted chef, trying to restart the chef client but I get an ERROR: Net::HTTPServerException 401 Unauthorized .... any ideas?
[2013-01-15 20:17:29 -0500] Toger: I have chef w/several environments. I'm working on a new cookbook version that I want to be visible in only one environment.
[2013-01-15 20:17:38 -0500] Toger: Is there a way to do that w/o explicitly setting the version in all environments?
[2013-01-15 20:17:54 -0500] Toger: the environment is our cookbook testing env
[2013-01-15 20:25:39 -0500] littleidea: what can you tell me about encrypted data bags...
[2013-01-15 20:31:43 -0500] solarce: littleidea: they are encrytped
[2013-01-15 20:31:50 -0500] solarce: littleidea: and they are like a bag of holding
[2013-01-15 20:31:53 -0500] solarce: littleidea: for your data
[2013-01-15 20:32:05 -0500] littleidea: lmao
[2013-01-15 20:32:16 -0500] littleidea: solarce: do you use them?
[2013-01-15 20:32:23 -0500] solarce: littleidea: not yet
[2013-01-15 20:32:24 -0500] scalability-junk: solarce, haha nice one :P +1
[2013-01-15 20:33:29 -0500] littleidea: I'm specifically interested in some with opinions about what should go in them, and even more interested in how they then manage secrets.
[2013-01-15 20:33:53 -0500] littleidea: solarce: needed more gif
[2013-01-15 20:33:58 -0500] KarlHungus: i use them. i hate them, though
[2013-01-15 20:34:13 -0500] solarce: littleidea: http://i.imgur.com/1mQrV.gif
[2013-01-15 20:34:24 -0500] KarlHungus: they mean i need two data bags for any service
[2013-01-15 20:34:51 -0500] KarlHungus: one for config that should be exposed and mutable by 3rd parties using the data bag api, and one that holds secrets
[2013-01-15 20:36:13 -0500] KarlHungus: its also a bummer that its only a shared keyfile instead of full pki. though i completely understand the value of getting this sort of feature shipped then going back and adding the hard bits like pki
[2013-01-15 20:38:45 -0500] Mithrandir: I need to sit down and implement them right at some point.  But yeah, that'll be icky, or cause CPU load on the master or all.
[2013-01-15 20:40:50 -0500] littleidea: KarlHungus: so do you have some non-chef process to sync the secrets?
[2013-01-15 20:41:15 -0500] littleidea: KarlHungus: do you have different secrets for each dbag?
[2013-01-15 20:42:15 -0500] KarlHungus: littleidea: nope. secrets are sync'ed from a trusted user's workstation during bootstrap
[2013-01-15 20:43:14 -0500] littleidea: KarlHungus: seems like the most sensible thing
[2013-01-15 20:43:15 -0500] KarlHungus: i'll write a library for gpg or pki before i write kludges around the existing limitations
[2013-01-15 20:43:52 -0500] KarlHungus: the only real use i can see is that it obfuscates what is checked into git
[2013-01-15 20:45:04 -0500] KarlHungus: some additional thoughts. i use the convention that data bags that are named with a leading _ are encrypted
[2013-01-15 20:45:08 -0500] KarlHungus: so apps and _apps
[2013-01-15 20:45:48 -0500] KarlHungus: i would prefer to see this carried through into the data bag items themselves. so that a data bag can have specific fields encrypted
[2013-01-15 20:54:14 -0500] fabio: Hello! the last release broke init script :(
[2013-01-15 20:54:25 -0500] fabio: chef-client now running with shebang ruby
[2013-01-15 20:54:26 -0500] fabio: :P
[2013-01-15 20:57:41 -0500] maplebed: anybody here have rights to add 'squid' to the list of valid components in the opscode tickets jira?
[2013-01-15 20:58:32 -0500] dyer: Hey guys, what is the point of the attribute definitions in the metadata.rb?  Why for example would I want to go thru the trouble of defining them in a hash rather then just documenting them in my readme ?
[2013-01-15 20:58:51 -0500] miah: dyer: the metadata.rb serves as documentation for webui, etc.
[2013-01-15 20:59:25 -0500] miah: readme.md could be automatically generated from your code.
[2013-01-15 21:05:34 -0500] cwj: arent the pki bits already there via the api request signing keys?
[2013-01-15 21:19:47 -0500] Toger: I have chef w/several environments. I'm working on a new cookbook version that I want to be visible in only one environment.Is there a way to do that w/o explicitly setting the version in all environments? (ie just our cookbook testing environment)
[2013-01-15 21:21:15 -0500] Toger: I thought perhaps if I put it in at version 0.0.0, all the non-specific enviornments would skip over it. I'm not sure if thats the proper way though.
[2013-01-15 21:30:25 -0500] pwelch: can you deep merge node attributes with role attributes?
[2013-01-15 21:31:42 -0500] yfeldblum: pwelch, yes
[2013-01-15 21:32:15 -0500] yfeldblum: Toger, all cookbooks are available to all nodes in all environments unless you specify a version lock in the environment
[2013-01-15 21:32:35 -0500] pwelch: yfeldblum: thanks
[2013-01-15 21:33:06 -0500] Toger: yfeldblum: thx
[2013-01-15 21:37:22 -0500] jtimberman: maplebed: discussing with someara, will let you know
[2013-01-15 21:38:23 -0500] c_t: someara, or a particular ara?
[2013-01-15 21:40:47 -0500] ranman: Hi, if I've modified a cookbook and want to make sure one of my nodes gets the modified version what is the next step?
[2013-01-15 21:47:41 -0500] ranman: it's like a ghost town in here
[2013-01-15 21:48:30 -0500] tomdzk: ranman: chef server or chef solo ?
[2013-01-15 21:48:42 -0500] ranman: tomdzk: chef server
[2013-01-15 21:48:57 -0500] greenmoss: any rabbitmq cookbook users in here?
[2013-01-15 21:49:11 -0500] tomdzk: ranman: assuming the cookbook is on the chef server already, running chef-client on the node should be enough
[2013-01-15 21:49:30 -0500] ranman: but how do I get my modified version of the cookbook to the chef server ?
[2013-01-15 21:49:44 -0500] greenmoss: who use the rabbitmq_plugin provider?
[2013-01-15 21:49:51 -0500] tomdzk: ranman: knife cookbook upload <name> --include-dependencies
[2013-01-15 21:50:19 -0500] siezer: ranman bump the version number in metadata.rb make sure all the nodes that need the old one have that number pinned down in their environment definition, and then upload the new one
[2013-01-15 21:50:22 -0500] ranman: do I need to modify a metadata fle?
[2013-01-15 21:50:23 -0500] greenmoss: I submitted http://tickets.opscode.com/browse/COOK-2223 but maybe I'm missing something obvious
[2013-01-15 21:50:24 -0500] ranman: ok
[2013-01-15 21:50:42 -0500] ranman: a moment, thanks guys
[2013-01-15 21:50:53 -0500] siezer: think of chef-server as a publishing platform.. cookbooks are versioned artifacts (just like cpan, python, rubygems, etc)
[2013-01-15 21:51:23 -0500] siezer: chef-client will download the latest version of cookbook unless its told otherwise
[2013-01-15 21:51:28 -0500] siezer: via environments
[2013-01-15 21:52:13 -0500] ranman: it's fine if my other nodes are updated as well -- I'm trying to change the memory limit in the php cookbook
[2013-01-15 22:00:35 -0500] kaerast: greenmoss, it looks like rabbitmq-plugins gets put into /usr/sbin/rabbitmq-plugins according to http://packages.ubuntu.com/search?searchon=contents&keywords=rabbitmq-plugins&mode=exactfilename&suite=quantal&arch=any
[2013-01-15 22:01:11 -0500] kaerast: so it looks like it's just Precise Penguin with this problem
[2013-01-15 22:01:26 -0500] ranman: thanks was able to upload the new recipes
[2013-01-15 22:02:44 -0500] greenmoss: kaerest: good call
[2013-01-15 22:03:10 -0500] kaerast: greenmoss, another option would be to add a recipe which adds the official repo - http://www.rabbitmq.com/install-debian.html
[2013-01-15 22:03:37 -0500] greenmoss: I guess an Ubuntu precise workaround would involve creating a symlink into /usr/sbin then
[2013-01-15 22:05:27 -0500] greenmoss: kaerast: the rabbitmq recipe already pulls its packages from rabbitmq.com repos
[2013-01-15 22:05:45 -0500] greenmoss: oh wait, I see you have to set "use_apt" for it to work
[2013-01-15 22:06:12 -0500] greenmoss: presumably default[:rabbitmq][:use_apt] = true
[2013-01-15 22:06:27 -0500] greenmoss: maybe I'll try that real quick
[2013-01-15 22:07:51 -0500] kaerast: it looks like that will upgrade you from 2.7.1 to 3.0.1, don't know if that would be a problem for you
[2013-01-15 22:09:07 -0500] rayrod2030: how is everyone installing their application rubies?
[2013-01-15 22:09:26 -0500] greenmoss: kaerast, not a problem in this case, no
[2013-01-15 22:09:35 -0500] rayrod2030: when installing chef via omnibus
[2013-01-15 22:10:28 -0500] rwsu: anyone who has experience with spiceweasel, i'm not sure what this error means: http://fpaste.org/jc45/
[2013-01-15 22:10:34 -0500] tomdzk: rayrod2030: rvm or rbenv cookbook
[2013-01-15 22:14:04 -0500] maplebed: jtimberman: thanks.
[2013-01-15 22:20:31 -0500] maplebed: siezer: that change (getting the data bag via search) successfully suppressed the ERROR message.  https://github.com/mattray/squid-cookbook/pull/7  I tried to also submit a patch to the library file in your cookbook, but since I'd already forked mattray's cookbook and yours has the same name github got angry.
[2013-01-15 22:20:44 -0500] maplebed: I put a short diff in the comments to https://github.com/someara/squid-cookbook/commit/ed335caff33504a6151fcc5264f5dc5fa1dab01e instead.
[2013-01-15 22:21:24 -0500] maplebed: thanks for your help!
[2013-01-15 22:35:46 -0500] nomad: Question about the metadata.rb If I don't specify the version with the `depends` attribute, would it pick the latest version? (if there are more than one version present) I read in the chef-docs that default results in 0.0.0 >=
[2013-01-15 22:36:19 -0500] nomad: But doesn't specify if it would pick the latest version
[2013-01-15 22:44:53 -0500] cwj: in my experience it will pick the latest version allowed by the node's environment
[2013-01-15 22:48:12 -0500] halcyonCorsair: can someone explain where I need to update the client.rb for knife-lastrun (https://github.com/jgoulah/knife-lastrun)
[2013-01-15 22:49:30 -0500] cwj: looks like it is making use of exception and report handlers to gather the data it needs
[2013-01-15 22:50:06 -0500] cwj: theres a way to configure that in a recipe instead of modifying client.rb but i think it is dependent on the recipe running early on in the run list to be effective
[2013-01-15 22:51:36 -0500] sn0wb1rd: Is there a chef resource for extracting various archive files (zip, gz, tar)?
[2013-01-15 22:52:44 -0500] cwj: sn0wb1rd: maybe http://cookbooks.opscode.com/cookbooks/ark
[2013-01-15 22:54:20 -0500] sn0wb1rd: cwj: I was just looking at that. It looks like it does more than just extracting compressing...
[2013-01-15 22:54:55 -0500] cwj: it can do more, but the :put action will extract an archive to a specified path
[2013-01-15 22:54:59 -0500] cwj: or so it says on the tin
[2013-01-15 22:56:33 -0500] sn0wb1rd: Yeah.. right.. I don't seem to find what kind of archives it supports
[2013-01-15 22:57:39 -0500] cwj: https://github.com/opscode-cookbooks/ark/blob/master/libraries/provider_ark.rb#L233-L240
[2013-01-15 22:58:14 -0500] sn0wb1rd: great
[2013-01-15 22:58:21 -0500] halcyonCorsair: ah nevermind, I got it
[2013-01-15 23:03:47 -0500] fly9: anyone using python 2.7 / virtualenv and centos?
[2013-01-15 23:05:35 -0500] iverson0881: maybe im' just stupid (most likely), but why is it so hard to get an ip for a particular interface in chef? how are people accomplishing this?
[2013-01-15 23:06:11 -0500] programmerq: is there a clean way to run an arbitrary recipe based on whether an attribute is present? For example, I might have a splunk server I can use in my production and staging environment in my datacenter, but no splunk server in an integration environment out on AWS. I wouldn't want the roles to be different, but I wouldn't need to run my recipe to install the splunk forwarder if there is no splunk server defined
[2013-01-15 23:06:12 -0500] programmerq: in the attributes
[2013-01-15 23:06:30 -0500] programmerq: I think I'd just have to write my own recipe that conditionally does include_recipe, no?
[2013-01-15 23:07:05 -0500] tomdzk: programmerq: we use environments & roles for that
[2013-01-15 23:08:04 -0500] programmerq: makes sense
[2013-01-15 23:08:14 -0500] tomdzk: programmerq: e.g. http://wiki.opscode.com/display/chef/Roles#Roles-env_run_lists
[2013-01-15 23:08:51 -0500] programmerq: I guess a way to rephrase my question would be "does it make sense to have a given role behave differently per environment?"
[2013-01-15 23:09:07 -0500] programmerq: because I totally understand I could assigne roles different in my environments
[2013-01-15 23:09:10 -0500] maplebed: programmerq: I've got a few things that do something like https://gist.github.com/4543032
[2013-01-15 23:09:45 -0500] tomdzk: programmerq: it's the simplest way afaik - it keeps the recipes clean, you can always have 'mixin' recipes that do additional things
[2013-01-15 23:09:47 -0500] maplebed: in hopes that the memcache recipe will work regardless whether you have ganglia installed or not
[2013-01-15 23:13:39 -0500] cwj: iverson0881: the attributes under node['network]['interfaces']['eth0'] aren't useful to you?
[2013-01-15 23:14:31 -0500] iverson0881: cwj: oh hmm, maybe that's new? i was only aware of node['ipaddress']
[2013-01-15 23:15:43 -0500] cwj: not really new afaik, ohai does a bunch of network interface attribute discovery and then sets node['ipaddress'] with its best guess as to which IP address represents the primary interface
[2013-01-15 23:15:48 -0500] cwj: or at least thats my understanding
[2013-01-15 23:16:47 -0500] iverson0881: cwj: yup that's my understanding as well, unfortunately one of the cloud providers i use has both a public and private interface with the default gateway being attached to the public interface
[2013-01-15 23:17:16 -0500] cwj: iverson0881: if you havent looked at http://cookbooks.opscode.com/cookbooks/discovery
[2013-01-15 23:17:21 -0500] cwj: it might be relevant to your interests
[2013-01-15 23:17:51 -0500] cwj: i make use of it frequently, very handy
[2013-01-15 23:17:53 -0500] iverson0881: cwj: thanks I will take a look
[2013-01-15 23:30:09 -0500] iverson0881: cwj: do you happen to use the latest version of discovery? can't seem to get it to upload
[2013-01-15 23:30:56 -0500] cwj: looks like i am using 0.1.6
[2013-01-15 23:31:27 -0500] cwj: what happens when you attempt to upload it?
[2013-01-15 23:32:15 -0500] iverson0881: cwj: http://pastebin.com/sJCn2MQd
[2013-01-15 23:32:28 -0500] iverson0881: looks like the search.rb recipe is a bit new
[2013-01-15 23:41:35 -0500] iverson0881: cwj: yeah damn, i can't even get 0.1.6 to upload
[2013-01-15 23:41:58 -0500] iverson0881: different error
[2013-01-15 23:43:20 -0500] iverson0881: http://pastebin.com/raMjxWZs
[2013-01-15 23:46:50 -0500] cwj: i seem to recall that i encountered the same thing when i was using ruby 1.8.7
[2013-01-15 23:47:21 -0500] cwj: i think discovery has an unstated dependency on a newer ruby, 1.9-ish
[2013-01-15 23:52:27 -0500] iverson0881: cwj: that did it, bleh rubbbyyyy!!
[2013-01-15 23:52:29 -0500] iverson0881: thank you
[2013-01-15 23:53:11 -0500] cwj: you bet
[2013-01-15 23:53:40 -0500] cwj: maybe that will make the latest version of discovery uploadable also
[2013-01-15 23:53:49 -0500] iverson0881: yup, it did
[2013-01-15 23:54:01 -0500] cwj: nice

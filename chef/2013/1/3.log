[2013-01-03 00:10:26 -0500] mjolk2: how do i get the ip address of all my NICs from ohai for chef?  for one, it's http://pastebin.com/tSgKqKeR
[2013-01-03 00:10:49 -0500] mjolk2: but i tried looping over the ohai response, but i kept getting the full body of the interface
[2013-01-03 00:12:11 -0500] mjolk2: it's under node['network']['interfaces']$interfaces['addresses'][1]
[2013-01-03 00:12:22 -0500] mjolk2: i just don't know how to make it loop over the interfaces and just return the IP
[2013-01-03 00:13:20 -0500] aabes: in what context - a recipe?
[2013-01-03 00:13:36 -0500] mjolk2: yeah, the ## lines in the pastebin are the relevant files
[2013-01-03 00:14:13 -0500] mjolk2: i want to create a basic status page that dumps the interface, interface name into a status.html page
[2013-01-03 00:15:31 -0500] aabes: something like: node["network"]["interfaces"].each { |intf| puts "#{intf["addresses"][1] }
[2013-01-03 00:15:44 -0500] aabes: but instead of the puts, do something useful...
[2013-01-03 00:15:56 -0500] mjolk2: it actually just needs to display it
[2013-01-03 00:16:11 -0500] aabes: oh, you want it in the template.
[2013-01-03 00:16:12 -0500] mjolk2: trying that now
[2013-01-03 00:16:20 -0500] mjolk2: yeah
[2013-01-03 00:16:38 -0500] aabes: k. so, wrap the begining like with <%
[2013-01-03 00:16:42 -0500] mjolk2: wait, just dump it in the template entirely?
[2013-01-03 00:16:49 -0500] aabes: yea..
[2013-01-03 00:17:05 -0500] mjolk2: instead of pointing a variable to node['network']['interfaces'] and then iterating over that variable in the template?
[2013-01-03 00:17:08 -0500] aabes: <% node["network"]["interfaces"].each { |intf| %>
[2013-01-03 00:17:16 -0500] aabes: "#{intf["addresses"][1]
[2013-01-03 00:17:19 -0500] aabes: <% } %>
[2013-01-03 00:17:32 -0500] aabes: same diff....
[2013-01-03 00:17:43 -0500] mjolk2: i'm relatively new to chef, coming from puppet, so i'm trying to keep it as close in style to the opscode recipes that i've found
[2013-01-03 00:18:12 -0500] aabes: you can have a variable : :networks => node["networks"]
[2013-01-03 00:18:42 -0500] aabes: and then change the first line to: <% @networks["interfaces"].each { |intf| %>
[2013-01-03 00:18:59 -0500] aabes: or move things between what gets done in the recipe and what gets done in the template
[2013-01-03 00:19:49 -0500] JoelMcCracken: I'm trying to install a rails app with the application_ruby cookbook. For some reason, the apache LoadModule path is using the wrong gem versions, and so the passenger module is not being loaded
[2013-01-03 00:19:52 -0500] aabes: it matters more when there's high likelihood you can make something more generic by putting the little logic in the recipe, and generic stuff in the template
[2013-01-03 00:20:04 -0500] mjolk2: makes sense
[2013-01-03 00:20:08 -0500] JoelMcCracken: Is there a better way to specify which ruby to use?
[2013-01-03 00:24:36 -0500] mjolk2: thanks aabes
[2013-01-03 01:06:38 -0500] pedahzur: So, I'm trying to install a package on RHEL6.  I've specified the package name 'package' and the version as 2.2.2, (and as 2.2.2-1.xx2) but chef says it can't find it.  yum info package-2.2.2 and yum info package-2.2.2-1.xx2 shows the package information.  Ideas?
[2013-01-03 01:13:09 -0500] pedahzur: It tells me: `install_package': package: Version 2.2.2-1.xx2 of package not found. Did you specify both version and release? (version-release, e.g. 1.84-10.fc6) (ArgumentError)
[2013-01-03 01:13:22 -0500] pedahzur: Is that say I *should* or *shouldn't* specify both a version and release?
[2013-01-03 01:13:43 -0500] pedahzur: The example in the docs says I can, but either way (with or without the release) it still fails.
[2013-01-03 01:19:31 -0500] EJC: any chance Daniel DeLeo is in this room somewhere?
[2013-01-03 01:20:04 -0500] itwasntandy:  /who says kallistec is him
[2013-01-03 01:20:49 -0500] kallistec: you rang?
[2013-01-03 01:21:04 -0500] EJC: yessir - we've been talking about the "\n"'s on the mailing list
[2013-01-03 01:21:14 -0500] EJC: figured I'd come here so we could chat faster....
[2013-01-03 01:21:32 -0500] kallistec: EJC: yeah, can you gist your recipe code?
[2013-01-03 01:21:35 -0500] EJC: really trying to understand fully why we're JUST getting hit with this -
[2013-01-03 01:23:25 -0500] EJC: kallistec: https://gist.github.com/4440029
[2013-01-03 01:23:50 -0500] EJC: the issue - encrypted or not - the databag contents comes down with "\n"s in it instead of new lines.
[2013-01-03 01:24:00 -0500] EJC: locally, I have ruby 1.9.3
[2013-01-03 01:24:13 -0500] EJC: the target machine is using whatever comes as part of the bootstrapping process
[2013-01-03 01:24:33 -0500] EJC: which is likely less than 1.9.3
[2013-01-03 01:25:25 -0500] kallistec: EJC: just default bootstrap? That uses omnibus now, which has ruby 1.9.3
[2013-01-03 01:25:38 -0500] itwasntandy: EJC: out of interest why aren't you using omnibus to install/boostrap chef?
[2013-01-03 01:25:40 -0500] kallistec: in /opt/chef/embedded/bin
[2013-01-03 01:25:49 -0500] EJC: ok, cool so then the databags are written/created with 1.9.3 AND read with 1.9.3
[2013-01-03 01:26:30 -0500] EJC: itwasntandy: I am - we weren't because of some postgresql cookbook issue (which is resolved now - before we were specifying distribution to get around this)
[2013-01-03 01:26:58 -0500] itwasntandy: ah ok, then that should give you 1.9.3 as kallistec says.
[2013-01-03 01:27:55 -0500] kallistec: EJC: so what's in the content? "foo\nbar" ?
[2013-01-03 01:28:19 -0500] kallistec: can you show me a repro without your secret data?
[2013-01-03 01:30:05 -0500] EJC: in the databag or on the system?
[2013-01-03 01:30:58 -0500] kallistec: EJC: full thing with the data going in, file out
[2013-01-03 01:31:46 -0500] EJC: databag has a dataset which looks liike
[2013-01-03 01:31:50 -0500] EJC: "foo \n",
[2013-01-03 01:31:52 -0500] EJC: "bar \n",
[2013-01-03 01:31:54 -0500] EJC: "bat \n"
[2013-01-03 01:32:10 -0500] EJC: the actual file looks like:
[2013-01-03 01:32:14 -0500] EJC: "foo \n", "bar \n", "bat"
[2013-01-03 01:32:17 -0500] EJC: with quotes AND \n's....
[2013-01-03 01:34:03 -0500] EJC: and kallistec - dood - thanks man - I'm totally up against a wall with this stuff - I totally appreciate the help
[2013-01-03 01:34:22 -0500] kallistec: EJC: so the data is an array going in?
[2013-01-03 01:35:06 -0500] EJC: yes
[2013-01-03 01:35:30 -0500] EJC: "cert": [
[2013-01-03 01:35:32 -0500] EJC:     "-----BEGIN CERTIFICATE-----\n",
[2013-01-03 01:35:34 -0500] EJC:     "MIasdfsadfsadfasdfggasdgashgadfshdsfghdsfhdshFADCBoTELMAkGA1UEBhMC\n",
[2013-01-03 01:35:36 -0500] EJC:     "VVMxEDAOBgNVBAgTB1NldmVyYWwxETAPsfghdfghfdghdfghBAcTCExvY2FsaXR5MRQwEgYDVQQK\n",
[2013-01-03 01:35:38 -0500] EJC:     "EwtFdghdfghdfghdfg1UECxMKT3BlcmF0aW9uczEiMCAGA1UEAxMZY2Ft\n",
[2013-01-03 01:35:40 -0500] EJC:     "Y2kub3NdffghdfghdfghdfghMBwGCSqGSIb3DQEJARYPb3BzQGV4YW1w\n",
[2013-01-03 01:35:42 -0500] EJC:     "bGUuY29tMB4XDTEyMDgwODE1MjExNloXDTIyMDgwNjE1MjExNlowgaExCzAJBgNV\n",
[2013-01-03 01:35:44 -0500] EJC: sorry, that was another snippet....
[2013-01-03 01:36:06 -0500] kallistec: EJC: yeah, so call join on it
[2013-01-03 01:36:24 -0500] kallistec: basically you're doing
[2013-01-03 01:36:32 -0500] kallistec: "#{["foo \n", "bar \n", "baz \n"]}"
[2013-01-03 01:37:11 -0500] kallistec: if you pop this into irb:
[2013-01-03 01:37:12 -0500] kallistec: puts "#{["foo \n", "bar \n", "baz \n"].join}"
[2013-01-03 01:37:22 -0500] kallistec: you'll get what you want
[2013-01-03 01:37:39 -0500] kallistec: the difference is in how ruby 1.8 vs. 1.9 turns arrays into strings
[2013-01-03 01:38:26 -0500] EJC: ok, but I'm running 1.9.3 everywhere - so 1.9.X does this?
[2013-01-03 01:38:35 -0500] EJC: still - I'm left with the "\n"'s
[2013-01-03 01:39:00 -0500] EJC: also - just saw this locally trying to open up a databag item:
[2013-01-03 01:39:04 -0500] EJC: ERROR: knife encountered an unexpected error
[2013-01-03 01:39:06 -0500] EJC: This may be a bug in the 'data bag edit' knife command or plugin
[2013-01-03 01:39:13 -0500] EJC: Please collect the output of this command with the `-VV` option before filing a bug report.
[2013-01-03 01:39:13 -0500] EJC: Exception: NoMethodError: undefined method `unpack' for #<Array:0x000000017bff88>
[2013-01-03 01:39:17 -0500] EJC: I'm running 1.9.3 :-/
[2013-01-03 01:40:00 -0500] EJC: also - I don't want one big long string, I want each array item to be its own line in the file - it's for encrypting and delivering the certificate
[2013-01-03 01:44:43 -0500] kallistec: EJC: I'd say create the items without the \n in there
[2013-01-03 01:44:51 -0500] pedahzur: Any ideas about the version string not working? (I know, I'm interrupting)
[2013-01-03 01:45:16 -0500] EJC: but if you .join the array items, you wind up with one long string, right?
[2013-01-03 01:45:48 -0500] kallistec: EJC: you can pass an argument to .join, like %w{ foo bar baz}.join("\n")
[2013-01-03 01:46:16 -0500] EJC: again - I don't want one long string tho
[2013-01-03 01:46:56 -0500] EJC: kallistec: I need to preserve the newlines :-/
[2013-01-03 01:46:58 -0500] kallistec: pedahzur: version support in the yum provider is a bit over my head, I'd run chef with -l debug and see how your input is getting plugged in to various yum commands
[2013-01-03 01:47:35 -0500] kallistec: EJC: yeah, not sure how you're getting the double escaping
[2013-01-03 01:48:17 -0500] EJC: kallistec: yeah - I can't even open some encrypted databags now
[2013-01-03 01:48:20 -0500] EJC: lol
[2013-01-03 01:48:56 -0500] EJC: I've removed the databag usage entirely now - just delivering raw files for now
[2013-01-03 01:49:10 -0500] kallistec: EJC: I dunno, some double escaping or something going on
[2013-01-03 01:49:12 -0500] kallistec: chef:recipe > file "/tmp/test" do
[2013-01-03 01:49:13 -0500] kallistec: chef:recipe > content "foo\nbar\nbaz"
[2013-01-03 01:49:13 -0500] kallistec: chef:recipe ?> end
[2013-01-03 01:49:13 -0500] EJC: it's pretty freaky I can't even see the contents of the encrypted databags anymore....
[2013-01-03 01:49:23 -0500] kallistec: cat /tmp/test
[2013-01-03 01:49:24 -0500] kallistec: foo
[2013-01-03 01:49:24 -0500] kallistec: bar
[2013-01-03 01:49:24 -0500] kallistec: baz%
[2013-01-03 01:50:05 -0500] EJC: yeah - not sure man - again - all that really changed is using omnibus vs specifying the 12.04 distro
[2013-01-03 01:50:22 -0500] kallistec: I gotta run, but I'd suggest going back to the simplest thing, put the data directly in the recipe, then move it to a variable, then back to a data bag, then encrypted data bag
[2013-01-03 01:50:29 -0500] kallistec: check the result at each step
[2013-01-03 01:50:35 -0500] EJC: thanks man
[2013-01-03 01:50:38 -0500] EJC: I appreciate the help
[2013-01-03 01:50:49 -0500] pedahzur: kallistec: http://pastebin.com/bq6fhj2G  It sees the version/release, but only looks at the latest, even though there is an older version available for install (as confirmed by yum info).
[2013-01-03 01:56:48 -0500] pedahzur: If anyone comes across this later and has a solution: joshua@azariah.com
[2013-01-03 02:28:11 -0500] ober: https://gist.github.com/ed4566d91c9eb5d4c3eb is there a better way to use helper functions in the library without having to do this?
[2013-01-03 02:37:37 -0500] sn0wb1rd: Can someone point me to an example of implementing heavy weight resource provider for Chef?
[2013-01-03 02:39:01 -0500] tamouse__: sorry, i'm not quite sure what you mean?
[2013-01-03 02:39:08 -0500] tamouse__: github?
[2013-01-03 02:39:17 -0500] tamouse__: ubuntu?
[2013-01-03 02:41:33 -0500] jsegura_: Good morning all
[2013-01-03 02:49:47 -0500] chip-: sn0wb1rd: If you want an example of a full library implementation vs an lwrp, check out the ark cookbook.
[2013-01-03 02:50:50 -0500] sn0wb1rd: chip-: I'll take a look at this. Thanks.
[2013-01-03 02:52:04 -0500] sn0wb1rd: Is that a naming convention that the provider and resource file names should be prepended with provider and resource accordingly?
[2013-01-03 02:52:11 -0500] sn0wb1rd: chip-: ?
[2013-01-03 02:52:23 -0500] chip-: I do not know, sorry.
[2013-01-03 03:01:15 -0500] sn0wb1rd: tamouse__: I wanted to implement a real resource/provider in a custom cookbook in Chef.
[2013-01-03 03:12:07 -0500] mjolk2: is there a way to check if a chef resource exists and only display if that's the case? i want to catch exceptions like "Chef::Mixin::Template::TemplateError: undefined method `[]' for nil:NilClass" before they happen
[2013-01-03 03:12:21 -0500] mjolk2: <%= puts @ip_address if !@ip_address.nil? %>  is not doing the trick
[2013-01-03 03:14:04 -0500] mjolk2: nor does the ternary <%= @ip_address.nil? '0' : @ip_address %>
[2013-01-03 03:20:40 -0500] mathewpeterson: Hello. I'm running into a problem with the nagios recipe. For what ever reason, it's not adding the correct roles to the hostgroups option in hosts.conf. Any suggestions?
[2013-01-03 07:15:17 -0500] auser: hey all
[2013-01-03 07:16:31 -0500] specialsauce_: ohai!
[2013-01-03 07:16:49 -0500] auser: I've got a weird error that I can't seem to debug well enough to fix it anyway I'm using deploy_resource to deploy an app and inside of the execution blocks I'm using bundle and it works just fine. Inside a unicorn script, however I'm getting bundle command not found (and when I try it on the server) I'm confused as to why the environments would be different
[2013-01-03 07:17:03 -0500] auser: not using rvm specifically so I wouldn't run into this mess
[2013-01-03 07:17:04 -0500] auser: heh
[2013-01-03 07:19:33 -0500] auser: anyway, anyone else run into an error like this?
[2013-01-03 07:21:10 -0500] specialsauce_: not used bundler personally so can't offer much advice. if you're getting command not found on bundler though is it not as simple as making sure its either required/included (if you're calling it from ruby) or given full path rather than command name if its shelling out to call it?
[2013-01-03 07:22:19 -0500] auser: specialsauce_: I *am* in unicorn, but I'm confused as to why the environments would be different oh maybe it's the user that's different
[2013-01-03 07:22:22 -0500] auser: I'll check that out
[2013-01-03 07:23:12 -0500] auser: hm, nope
[2013-01-03 07:24:28 -0500] auser: thanks specialsauce_
[2013-01-03 07:29:46 -0500] k0rupted: I'm trying to figure out the best way to use attributes, I'd like to change the default["chef_client"]["server_url"] in the chef-client cookbook, so that if virtualization type = vbox use one thing, and if its something like vmware use another. So two questions what type of attribute is the virtualization vbox... default or normal? (dumb question?)... and is that where I would want to set that in my recipe?
[2013-01-03 07:31:54 -0500] k0rupted: https://gist.github.com/02bbc65aa922786c5e28
[2013-01-03 07:36:37 -0500] sn0wb1rd: Can I have sub-directories under "libraries"?
[2013-01-03 08:28:13 -0500] lehrblogger: anyone around? i'm stumped by something that should be relatively simple, and was working a minute ago
[2013-01-03 08:28:45 -0500] lehrblogger: on a vagrant VM, im trying to :create a handful of directories owned by the vagrant user
[2013-01-03 08:29:30 -0500] lehrblogger: and it runs fine, but when i run ls -la on their contents, i get a bunch of question marks
[2013-01-03 08:29:32 -0500] lehrblogger: -????????? ? ? ? ?            ? supervisord.conf
[2013-01-03 09:06:02 -0500] rajdeep: every time i am initiating a pull request from chef client i am getting the following message "INFO: HTTP Request Returned 404 Not Found: No routes match the request: /reports/nodes/chef1.example.com/runs". Can anyonebody tell me what this message means and what is it trying to do?"
[2013-01-03 09:08:37 -0500] bubuz: Hi guys - anyone used the heavywater gdash recipe???
[2013-01-03 09:11:59 -0500] emanuelez: is there any easy way to diff a file rendered by a template from its previous version to the current one?
[2013-01-03 09:57:04 -0500] iverson0881: any good way to do calculations within a template? so if say something like: <% node["db"]["memory-size"] / 1024 -%>
[2013-01-03 09:57:26 -0500] iverson0881: that doesn't appear to get evaulated properly
[2013-01-03 09:57:36 -0500] iverson0881: or am i just doing something wrong in basic ruby
[2013-01-03 10:15:09 -0500] BryanWB__: has anyone written a cookbook or recipe for apache mod_pagespeed
[2013-01-03 10:53:10 -0500] meineerde: iverson0881: this only works if the attribute is a numeric datatype, could be it is a string right now
[2013-01-03 10:53:36 -0500] meineerde: iverson0881: you could try something like <% node["db"]["memory-size"].to_i / 1024 -%>
[2013-01-03 10:54:08 -0500] meineerde: iverson0881: also, the result is not printed to the generated file righ now. for that, you have to use <%= blarfasel %>
[2013-01-03 10:54:26 -0500] meineerde: (notice the equals sign in the ERB tag)
[2013-01-03 10:56:57 -0500] meineerde: Bryanstein: shouldn't be much harder than install from package and then using the apache_module definition
[2013-01-03 10:57:09 -0500] meineerde: eh, meant BryanWB__ ...
[2013-01-03 10:57:18 -0500] BryanWB__: meineerde: prolly, will look at it
[2013-01-03 10:57:24 -0500] iverson0881: meineerde: hmm okay i'll check it out
[2013-01-03 10:57:42 -0500] iverson0881: meineerde: thank you
[2013-01-03 10:58:12 -0500] iverson0881: meineerde: blarfasel?
[2013-01-03 11:04:37 -0500] meineerde: iverson0881: or foobar if you prefer
[2013-01-03 11:10:38 -0500] iverson0881: meineerde: so that worked, thank you!
[2013-01-03 11:55:58 -0500] emanuelez: ehm... how do i enforce a specific version of ruby on a node?
[2013-01-03 11:56:28 -0500] willejs: use the ruby cookbook, and i guess its in its attributes?
[2013-01-03 11:56:53 -0500] willejs: hi, i need to merge two data bag items, however, i cannot use merge! as they are not hashes, how can i turn the items into hashes?
[2013-01-03 12:00:21 -0500] emanuelez: it is, but if i require to run the ruby cookbook in my recipe, then it would still be in the old version while running the ruby block that's giving me problems
[2013-01-03 12:04:01 -0500] willejs: oh your talking about upgrading the version of ruby that chef client is running upon?
[2013-01-03 12:11:29 -0500] emanuelez: willejs: yes
[2013-01-03 12:15:33 -0500] iverson0881: so im trying to do something like: <% if @CHEF_ENV != "ENV1" || @CHEF_ENV != "ENV2" || @CHEF_ENV != "ENV2" -%>
[2013-01-03 12:16:06 -0500] iverson0881: however it appears that this is evalulating to true, and goes right ahead, even though none of the CHEF_ENV don't match
[2013-01-03 12:16:22 -0500] iverson0881: however if i remove the 2nd and 3rd CHEF_ENV, it evaluates fine
[2013-01-03 12:16:52 -0500] iverson0881: i'm looking for i believe "or"
[2013-01-03 12:20:17 -0500] zts: iverson0881: I'd generally suggest putting that logic in your recipe, not your template.  But other than that, what you've written doesn't make a whole lot of sense...
[2013-01-03 12:21:06 -0500] zts: iverson0881: if @CHEF_ENV is not equal to "ENV1", the first expression will be true, and the second two will never be considered
[2013-01-03 12:22:05 -0500] iverson0881: zts: basically what I want is a few chef_environments I have, to not be considered for adding some additional config in a template, some replication info basically
[2013-01-03 12:23:15 -0500] zts: iverson0881: in that case, you want 'and', not 'or'.  But I'd recommend doing that in a recipe, use the result to set some variable (like 'enable_replication'), and then refer to that in your template instead
[2013-01-03 12:25:55 -0500] zts: iverson0881: the least change from your example is something like: <% if @CHEF_ENV != "ENV1" && @CHEF_ENV != "ENV2" -%>
[2013-01-03 12:26:18 -0500] iverson0881: zts: hmm okay i'll look into on how to do that
[2013-01-03 12:27:40 -0500] nateboom: any tips for Server returned error for http://localhost:4000/cookbooks/ark/0.0.16.  fresh server build, only a localhost client.  knife cookbook list indicates 2 cookbooks got uploaded.
[2013-01-03 12:31:05 -0500] nateboom: ha! ok, the chef server timeout  started when I installed the freeipa client.  it went away when I removed it.  still, SSO is kinda important.  anyone seen that?
[2013-01-03 13:05:45 -0500] nateboom: the problem seems to be that freeipa broke rabbitmq.  I'm taking it to those forums.   it might affect people here though
[2013-01-03 13:23:53 -0500] Unicron_: hi
[2013-01-03 13:24:25 -0500] Unicron_: using the database cookbook
[2013-01-03 13:24:33 -0500] Unicron_: have created a recipe to create mysql databases
[2013-01-03 13:24:40 -0500] Unicron_: and users
[2013-01-03 13:24:59 -0500] Unicron_: from a databag
[2013-01-03 13:25:23 -0500] Unicron_: mysql_database_user accepts an array as an input privileges
[2013-01-03 13:25:39 -0500] Unicron_: to* privileges like so
[2013-01-03 13:25:55 -0500] Unicron_: privileges [:insert,:delete]
[2013-01-03 13:26:09 -0500] Unicron_: privileges [:all] also is valid
[2013-01-03 13:26:29 -0500] Unicron_: but when I generate from databag, chef-client thinks it is not an array
[2013-01-03 13:27:20 -0500] Unicron_: if I manually put privileges [:all], the recipe runs fine
[2013-01-03 13:28:04 -0500] Unicron_: if I generate it, and log the result using Chef::Log.info("PRIVILEGES: " + privs)
[2013-01-03 13:28:15 -0500] Unicron_: This outputs:
[2013-01-03 13:29:06 -0500] Unicron_: INFO: PRIVILEGES: [:all]
[2013-01-03 13:29:31 -0500] Unicron_: so if I use
[2013-01-03 13:29:49 -0500] Unicron_: privileges privs in the recipe instead of privileges [:all]
[2013-01-03 13:30:01 -0500] Unicron_: I would expect the same result.
[2013-01-03 13:30:21 -0500] Unicron_: but I get the error:
[2013-01-03 13:30:40 -0500] Unicron_: Option privileges must be a kind of Array!  You passwd "[:all]".
[2013-01-03 13:30:48 -0500] Unicron_: s/passwd/passed/
[2013-01-03 13:31:15 -0500] Unicron_: any ideas?
[2013-01-03 13:36:37 -0500] meineerde: Unicron_: well, you passed a string with characters what kinda look like an array. but it is not an array
[2013-01-03 13:37:08 -0500] meineerde: so in your databag, you have to specify an array, not a string
[2013-01-03 13:47:55 -0500] Unicron_: meineerde, It is in the data bag as an array - and I build the privs variable from each item - I guess I need to build it differently - thanks for your answer - it makes sense and gives me a good pointer
[2013-01-03 13:52:36 -0500] Unicron_: meineerde, thanks for your help - called the data bag entry directly and it works perfectly
[2013-01-03 13:53:21 -0500] meineerde: you are welcome, sometimes these things are really not that obvious...
[2013-01-03 13:54:58 -0500] dvdcrn: I've been working on a fork of the postgresql cookbook and have architectural questions about my direction. Obviously, I'd like to contribute back to the upstream opscode-cookbooks/postgresql repo, so I think I should try to get input. Is this the best place?
[2013-01-03 13:59:34 -0500] meineerde: dvdcrn: here, or on the issue tracker, or on the weekly cookbook review hangouts.
[2013-01-03 13:59:36 -0500] meineerde: see http://wiki.opscode.com/display/chef/Code+Review
[2013-01-03 14:02:07 -0500] FarmKing: can someone direct me to an explanation of how templates work.  I don't see the templates in /var/chef/cache where I expected them and don't know how to troubleshoot this
[2013-01-03 14:03:21 -0500] meineerde: FarmKing: I'm sure you have read http://wiki.opscode.com/display/chef/Templates ?
[2013-01-03 14:03:45 -0500] FarmKing: aye
[2013-01-03 14:04:28 -0500] FarmKing: it claims that the templates are added to the cache from the server at first request
[2013-01-03 14:04:54 -0500] FarmKing: I can see the templates in my cookbook and have uploaded it to the server
[2013-01-03 14:05:11 -0500] meineerde: yeah (and you shouldn't mess with that cache at all)
[2013-01-03 14:05:15 -0500] FarmKing: however, when chef runs on the client, it can't find it
[2013-01-03 14:05:22 -0500] FarmKing: I'm getting LoadError
[2013-01-03 14:05:38 -0500] meineerde: FarmKing: have you put it into the correct dirctory of your cookbook
[2013-01-03 14:05:49 -0500] meineerde: e.g. templates/default/my_template.erb
[2013-01-03 14:06:07 -0500] FarmKing: aye
[2013-01-03 14:06:33 -0500] FarmKing: and, I'm trying to use someone else's cookbook to be sure that I didn't screw it up
[2013-01-03 14:07:19 -0500] FarmKing: https://github.com/Yipit/djangoquickstart-cookbook
[2013-01-03 14:07:46 -0500] meineerde: make sure you are dealing with the actual cookbook you think you are dealing with, i.e. make sure you use the right version and/or environment
[2013-01-03 14:07:46 -0500] FarmKing: using that, or using my own cookbooks, chef bails when it trys to process the first template
[2013-01-03 14:08:17 -0500] FarmKing: "version and/or environment" of what?
[2013-01-03 14:08:43 -0500] meineerde: FarmKing: you can define cookbook restrictions on the node and the environment.
[2013-01-03 14:09:03 -0500] meineerde: if you have multiple versions of a cookbook uploaded, it could be that the node uses another version than you think it does
[2013-01-03 14:09:10 -0500] FarmKing: ahhh
[2013-01-03 14:09:19 -0500] meineerde: FarmKing: also, are you running the client as root?
[2013-01-03 14:09:31 -0500] FarmKing: I'm sure that this is the only version of the cookbook
[2013-01-03 14:09:36 -0500] FarmKing: I've only uploaded it once
[2013-01-03 14:10:50 -0500] FarmKing: it's running as ubuntu through sudo rather than directly as root, but it seems to be able to do everything up to that point without trouble
[2013-01-03 14:11:06 -0500] FarmKing: installing pacakges etcetera
[2013-01-03 14:14:15 -0500] Unicron_: FarmKing, mine end up in /var/cache/chef not /var/chef/cache?
[2013-01-03 14:14:36 -0500] FarmKing: Unicron_: sorry.  that's what I meant
[2013-01-03 14:15:04 -0500] Unicron_: OK - you see the cookbooks themselves but the template directory is missing?
[2013-01-03 14:15:29 -0500] Unicron_: or the whole cookbook is missing?
[2013-01-03 14:15:50 -0500] FarmKing: I see the cookbooks, but the templates directory is missing
[2013-01-03 14:16:28 -0500] Unicron_: And what is exception in /var/log/chef/client.log?
[2013-01-03 14:17:00 -0500] mathewpeterson: Hello. I'm running into a problem with the nagios recipe. For what ever reason, it's not adding the correct roles to the hostgroups option in hosts.conf. Any suggestions?
[2013-01-03 14:18:19 -0500] FarmKing: Unicron_: I don't see a /var/log/chef directory
[2013-01-03 14:18:48 -0500] FarmKing: I see a stacktrace-out file though
[2013-01-03 14:19:41 -0500] FarmKing: Unicron_: does this help?
[2013-01-03 14:19:42 -0500] FarmKing: http://pastebin.com/kYfUSw02
[2013-01-03 14:20:29 -0500] Unicron_: maybe - let me give me a few mins
[2013-01-03 14:22:08 -0500] Unicron_: FarmKing, is that pastebin from the default recipe in the cookbook, or have you modified it?
[2013-01-03 14:22:25 -0500] FarmKing: no modifications
[2013-01-03 14:23:00 -0500] meineerde: FarmKing: there you have it
[2013-01-03 14:23:19 -0500] meineerde: FarmKing: the moneta gem was update a couple of days ago with a rather big rewrite.
[2013-01-03 14:23:25 -0500] meineerde: chef doesn't work with that.
[2013-01-03 14:23:31 -0500] FarmKing: oh!
[2013-01-03 14:23:35 -0500] meineerde: you need moneta < 0.7
[2013-01-03 14:23:50 -0500] FarmKing: how frustrating
[2013-01-03 14:24:15 -0500] FarmKing: and, how difficult for a beginner to try and understand
[2013-01-03 14:24:22 -0500] FarmKing: thanks for your help
[2013-01-03 14:26:12 -0500] zts: FarmKing: Chef 10.16.4 should ensure the right version is installed - http://www.opscode.com/blog/2012/12/26/chef-10-16-4-released/
[2013-01-03 14:28:45 -0500] helllen: helllo
[2013-01-03 14:28:58 -0500] helllen: I would like to reinstall server in other machine
[2013-01-03 14:29:13 -0500] helllen: how could I copy all public keys information ?
[2013-01-03 14:33:33 -0500] dvdcrn: My current work project is to distill my postgresql administration experience into chef cookbooks. Here's my project plan ...
[2013-01-03 14:33:37 -0500] dvdcrn: (1) I began (COOK-2051) by broadening cookbook support from debian to redhat platform families and from PostgreSQL-8.4 to PostgreSQL-9.X. In this, I continued the recent approach of using common files.
[2013-01-03 14:33:41 -0500] dvdcrn: (2) Compute attribute defaults to tune postgresql.conf to hardware resources detected by ohai.
[2013-01-03 14:33:44 -0500] dvdcrn: (3) Write recipes to manage postgresql group/login roles through data_bags, which will greatly help with multiple-server shops such as ours.
[2013-01-03 14:33:48 -0500] dvdcrn: (4) Further work might provide support for replication from a postgresql master server to a hot standby.
[2013-01-03 14:33:52 -0500] dvdcrn: Enhancement (3) leads to the architectural question: Would it be OK to introduce a dependency so that opscode-cookbooks/postgresql uses opscode-cookbooks/database resources? It provides a database_user resource that I need to implement my group/role recipes.
[2013-01-03 14:34:42 -0500] dvdcrn: If there is a better forum for discussing the opscode-cookbooks/postresql design, I'm all ears :)
[2013-01-03 14:39:25 -0500] dvdcrn: I should clarify the intent of my postgresql question: I am seeking advise on the "opscode way" to facilitate contributing back upstream to opscode-cookbooks/postgresql. I do understand postgresql very well and what I'm doing in my forked repo.
[2013-01-03 14:40:10 -0500] dvdcrn: That said, I'd be interested in collaborating with any postgresql experts out there.
[2013-01-03 14:45:56 -0500] larrywri1ht: If I needed to execute a Powershell script on Windows, what's the best way to do that? The script is in a file (it's an installer).
[2013-01-03 14:46:13 -0500] mattt: dvdcrn: there is a mailing list, wondering if that may be a better place to ask
[2013-01-03 14:46:17 -0500] larrywri1ht: Does the execute provider work on Windows?
[2013-01-03 14:46:21 -0500] mattt: dvdcrn: or hold off until more people are online :)
[2013-01-03 14:47:00 -0500] dvdcrn: I couldn't find a reference to the mailing list. (Maybe I need to include "mailing list" in a google search?)
[2013-01-03 14:47:34 -0500] mattt: dvdcrn: sec
[2013-01-03 14:47:50 -0500] mattt: dvdcrn: http://lists.opscode.com/sympa
[2013-01-03 14:48:07 -0500] mattt: dvdcrn: http://lists.opscode.com/sympa/lists/opensource more specifically
[2013-01-03 14:49:10 -0500] dvdcrn: mattt: Thanks. I'll figure out a good mailing list and post there. I'll also check back here later in the day.
[2013-01-03 14:49:41 -0500] mattt: dvdcrn: sounds good
[2013-01-03 14:52:15 -0500] makerbreakr: https://gist.github.com/4444002
[2013-01-03 14:52:26 -0500] makerbreakr: what am I doing wrong with this apt source?
[2013-01-03 14:52:59 -0500] makerbreakr: http://www.opera.com/support/kb/view/841/
[2013-01-03 14:55:10 -0500] mattt: makerbreakr: no non-free ?
[2013-01-03 14:55:13 -0500] Unicron_: hey meineerde, just wanted to run something by you as I noticed you have a fork of the chef-server cookbook
[2013-01-03 14:55:23 -0500] makerbreakr: mattt, I tried originally with no non-free
[2013-01-03 14:56:05 -0500] meineerde: Unicron_: yeah, but my changes were merged into upstream already
[2013-01-03 14:56:21 -0500] meineerde: Unicron_: but sure, shoot
[2013-01-03 14:56:27 -0500] Unicron_: in the default recipe, the conmpaction only runs if the disk_space is over 100_000_000
[2013-01-03 14:56:51 -0500] Unicron_: but couchdb returns diskspace without the underscores
[2013-01-03 14:57:15 -0500] mattt: makerbreakr: shouldn't distribution be stable and components non-free ?
[2013-01-03 14:57:22 -0500] meineerde: Unicron_: the unerscores are a special way in ruby to write more readable numbers in code
[2013-01-03 14:57:36 -0500] meineerde: Unicron_: so 100_000_000 == 100000000
[2013-01-03 14:58:01 -0500] Unicron_: meineerde, So it should evaluate correctly- prefect thanks
[2013-01-03 14:58:07 -0500] meineerde: ruby just ignores any underscores in literan numbers in code
[2013-01-03 14:58:28 -0500] makerbreakr: mattt, tried that too
[2013-01-03 14:58:41 -0500] makerbreakr: Im getting a malformed sources.list, but it looks good on the machine
[2013-01-03 14:58:56 -0500] Unicron_: there's a lot to take in when you are learning ruby at the same time as learning chef :)
[2013-01-03 14:59:18 -0500] Unicron_: and just enough ruby for chef - really isn't enough lol
[2013-01-03 15:00:02 -0500] makerbreakr: hrm...that is weird, I had used the google-chrome recipe and adapted it to opera
[2013-01-03 15:00:20 -0500] makerbreakr: it some how corrupted sources.d/google-chrome.list
[2013-01-03 15:05:11 -0500] mattt: makerbreakr: weird, so it's working now ?
[2013-01-03 15:05:17 -0500] makerbreakr: ya
[2013-01-03 15:05:28 -0500] makerbreakr: i just had to remove the google-chrome.list
[2013-01-03 15:05:30 -0500] mattt: did you have to change distributions/components ?
[2013-01-03 15:05:49 -0500] makerbreakr: no
[2013-01-03 15:06:34 -0500] mattt: sweet!
[2013-01-03 15:40:13 -0500] eka: is there a way to ignore errors on executeL
[2013-01-03 15:40:14 -0500] eka: ?
[2013-01-03 15:43:22 -0500] matschaffer: eka: you can set the `returns` attribute on the execute resource: http://docs.opscode.com/resource_execute.html
[2013-01-03 15:43:35 -0500] matschaffer: it takes an array of acceptable exit codes
[2013-01-03 15:44:10 -0500] eka: matschaffer: ok I see thanks
[2013-01-03 15:57:16 -0500] f1gjam: hey guys, is there a diagram floating around how Chef integrates with Jenkins to deploy recipes etc..
[2013-01-03 15:57:52 -0500] f1gjam: i am ideally looking for complete workflow from submission to version control -> jenkins - > testing (vagrant??) --> deploy
[2013-01-03 16:14:47 -0500] cheflevelramen: Can a recipe resource have both 'only_if' and 'not_if'?
[2013-01-03 16:17:18 -0500] meineerde: cheflevelramen: yes. https://github.com/opscode/chef/blob/master/lib/chef/resource.rb#L619-L640
[2013-01-03 16:18:22 -0500] cheflevelramen: meineerde: Cool, thanks
[2013-01-03 16:30:20 -0500] mathewpeterson: How do I change an ip address in chef for a client?
[2013-01-03 16:53:13 -0500] rcco: Hi
[2013-01-03 16:53:55 -0500] rcco: Can someone help with a question about overriding attributes in roles?
[2013-01-03 16:54:53 -0500] mathewpeterson: Depends what the question is.
[2013-01-03 16:55:59 -0500] rcco: I'm using the apache2 cookbook, and I'm experimenting with web apps. I am able to specify attribute values in the specific web app .rb file I've created. I cannot, however, override those web app attributes in a role, which I've applied to a node.
[2013-01-03 16:58:33 -0500] rcco: For example, in my web app recipe, I have a 'docroot' attribute. I want to know whether I can override that web app's 'docroot' attribute in the 'override_attributes' section of a role.
[2013-01-03 16:59:26 -0500] mathewpeterson: I've done something similar with default_attributes
[2013-01-03 16:59:32 -0500] rcco: Cool
[2013-01-03 17:00:34 -0500] rcco: I can easily override, say, 'default['apache']['log_dir'], within a role, but not a role's attribute.
[2013-01-03 17:00:51 -0500] rcco: sorry, I meant not a web app's attribute
[2013-01-03 17:01:18 -0500] mathewpeterson: Why not just create a recipe per web app
[2013-01-03 17:01:30 -0500] rcco: Yes, that was my plan B :)
[2013-01-03 17:01:53 -0500] zts: rcco: when you say "web app's attribute", what are you referring to?  (if you can gist/pastebin an example, that would be great)
[2013-01-03 17:02:34 -0500] rcco: OK, I'll pastebin an example and be back with the URL
[2013-01-03 17:02:35 -0500] rcco: BRB
[2013-01-03 17:06:42 -0500] rcco: http://pastebin.com/raw.php?i=rM3wmXwK
[2013-01-03 17:06:52 -0500] rcco: I hope that makes sense
[2013-01-03 17:07:51 -0500] zts: rcco: yup, spot on
[2013-01-03 17:07:58 -0500] rcco: Cool
[2013-01-03 17:09:01 -0500] rcco: Plan B would do the trick, but I'm curious about overrides in this context.
[2013-01-03 17:09:04 -0500] zts: rcco: so, the thing that you want to override is (somewhat confusingly) called a "resource attribute" - despite the name, they're not really related to node attributes, and there's no direct method to override them like that
[2013-01-03 17:09:21 -0500] rcco: Ah,
[2013-01-03 17:09:33 -0500] zts: rcco: the usual approach would be to use a node attribute as the value of the resource attribute, as you could then override the former
[2013-01-03 17:10:16 -0500] zts: does that make sense?
[2013-01-03 17:10:30 -0500] rcco: Override the node attribute with the resource attribute?
[2013-01-03 17:11:27 -0500] zts: so, in your example with the directory_index 'resource attribute', where you want the default to be "unwantedvalue", and to be able to override that from a role
[2013-01-03 17:11:58 -0500] zts: first step would be to create a regular attribute to store your default value (look in most cookbooks' attributes/default.rb for examples)
[2013-01-03 17:12:09 -0500] rcco: OK
[2013-01-03 17:12:20 -0500] zts: second step would be to change your web_app block to use node['my']['default']['attribute'] instead of "unwantedvalue"
[2013-01-03 17:12:40 -0500] zts: and then (optionally), third step is for your role to override ['my']['default']['attribute']
[2013-01-03 17:13:31 -0500] rcco: Ah, so I'd ultimately be overriding a default(.rb) attribute, rather than a web_app attribute.
[2013-01-03 17:13:37 -0500] zts: exactly
[2013-01-03 17:13:38 -0500] rcco: I'll give that a go!
[2013-01-03 17:13:42 -0500] rcco: Thanks zts
[2013-01-03 17:13:47 -0500] zts: no problem, good luck :)
[2013-01-03 17:53:33 -0500] lehrblogger: hey, i'm still running into that issue with question marks in the permissions in chef created directories
[2013-01-03 17:53:45 -0500] lehrblogger: it's probably something simple? but a night's sleep didnt make things any clearer :-/
[2013-01-03 17:53:45 -0500] lehrblogger: https://gist.github.com/4445336
[2013-01-03 17:58:01 -0500] leifmadsen: lehrblogger: oh I've seen that before... turned out to be a bad HD
[2013-01-03 17:58:15 -0500] leifmadsen: lehrblogger: had to reboot the machine and let fsck fix the disk
[2013-01-03 17:58:28 -0500] leifmadsen: it wasn't with chef that I saw it
[2013-01-03 17:58:48 -0500] lehrblogger: leifmadsen: ah, ok :-/
[2013-01-03 17:58:50 -0500] leifmadsen: lehrblogger: your mode should also be 00644 not just 0644
[2013-01-03 17:58:54 -0500] maplebed: lehrblogger: what happens when you run 'id' in the vagrant shell?  also 'sudo getent passwd vagrant' or 'grep vagrant /etc/passwd'
[2013-01-03 18:00:19 -0500] maplebed: oh yeah, and re: the 644 thing, http://tickets.opscode.com/browse/CHEF-174 for more detail.  but +1 should be either "0644" or 00644 (string vs. number)
[2013-01-03 18:00:20 -0500] lehrblogger: leifmadsen: i googled around a bit and found other people with bad harddrives or bad mounts of the shared folder.
[2013-01-03 18:00:29 -0500] lehrblogger: my host is OS X, and i ran disk utility (no permissions errors, but some disk errors), and was hoping that would fix it, but it didnt
[2013-01-03 18:00:57 -0500] lehrblogger: maplebed: vagrant@vagrant:~$ id
[2013-01-03 18:00:57 -0500] lehrblogger: uid=900(vagrant) gid=900(vagrant) groups=900(vagrant),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),108(lpadmin),109(sambashare)
[2013-01-03 18:01:28 -0500] lehrblogger: maplebed: vagrant@vagrant:~$ sudo getent passwd vagrant
[2013-01-03 18:01:28 -0500] lehrblogger: vagrant:x:900:900:vagrant,,,:/home/vagrant:/bin/bash
[2013-01-03 18:01:44 -0500] maplebed: (where I'm going with that is trying to make sure all the IDs match)
[2013-01-03 18:01:50 -0500] maplebed: so one more: ls -n (in the test dir)
[2013-01-03 18:02:03 -0500] maplebed: (shows numeric IDs)
[2013-01-03 18:02:09 -0500] lehrblogger: oh, thanks re the "0644" or 00644 (im still relatively new to chef)
[2013-01-03 18:02:11 -0500] maplebed: just making sure they're all 900.
[2013-01-03 18:03:00 -0500] lehrblogger: vagrant@vagrant:~$ ls -n test
[2013-01-03 18:03:01 -0500] lehrblogger: ls: cannot access test/subtest: Permission denied
[2013-01-03 18:03:01 -0500] lehrblogger: total 0
[2013-01-03 18:03:01 -0500] lehrblogger: d????????? ? ? ? ?            ? subtest
[2013-01-03 18:03:08 -0500] lehrblogger: vagrant@vagrant:~$ sudo ls -n test
[2013-01-03 18:03:08 -0500] lehrblogger: total 4
[2013-01-03 18:03:09 -0500] lehrblogger: drw-r--r-- 2 900 900 4096 Jan  3 17:49 subtest
[2013-01-03 18:03:09 -0500] lehrblogger: (couldnt cd into the test dir)
[2013-01-03 18:03:53 -0500] maplebed: huh.  yeah, could be a busted inode  (like leif-madson suggested) I suppose.  The UIDs all match, so that's not it.
[2013-01-03 18:04:15 -0500] maplebed: oh hey, you said this is osx, right?
[2013-01-03 18:04:20 -0500] lehrblogger: yeah
[2013-01-03 18:04:22 -0500] maplebed: I wonder if the extended attributes are biting you.
[2013-01-03 18:04:30 -0500] maplebed: (this is just more stabbing in the dark, btw.)
[2013-01-03 18:04:50 -0500] lehrblogger: oh? (that's fine)
[2013-01-03 18:05:02 -0500] maplebed: ls -@l will show you which files / dirs have extended attributes
[2013-01-03 18:05:31 -0500] wassy121: why are the directory attributes 644, not 755?
[2013-01-03 18:05:33 -0500] maplebed: ls -el will show the extended attributes
[2013-01-03 18:05:39 -0500] wassy121: the X bit allows cd into the directory
[2013-01-03 18:05:43 -0500] maplebed: heh...  +1 wassy121
[2013-01-03 18:05:46 -0500] maplebed: always the obvious.
[2013-01-03 18:05:48 -0500] maplebed: ::sigh::
[2013-01-03 18:06:33 -0500] wassy121: http://memegenerator.net/instance/24111566
[2013-01-03 18:07:01 -0500] lehrblogger: hm,
[2013-01-03 18:07:02 -0500] lehrblogger: Try `ls --help' for more information.
[2013-01-03 18:07:02 -0500] lehrblogger: vagrant@vagrant:~$ ls -@l
[2013-01-03 18:07:02 -0500] lehrblogger: ls: invalid option -- '@'
[2013-01-03 18:07:03 -0500] lehrblogger: vagrant@vagrant:~$ ls -el
[2013-01-03 18:07:03 -0500] lehrblogger: ls: invalid option -- 'e'
[2013-01-03 18:07:03 -0500] lehrblogger: Try `ls --help' for more information.
[2013-01-03 18:07:16 -0500] lehrblogger: im using the opscode-ubuntu-12.04
[2013-01-03 18:07:32 -0500] wassy121: lehrblogger, use mod 0755, it should solve the problem
[2013-01-03 18:07:46 -0500] lehrblogger: although, hmm, i repackaged it because i needed the 10.16.4, i think because of the moneta thing
[2013-01-03 18:08:20 -0500] lehrblogger: wassy121: ok, i'll try that, thanks. i didnt have a good reason for using 644 over 755, but why would it matter?
[2013-01-03 18:08:27 -0500] maplebed: lehrblogger: that tells me that maybe you're running linux in vagrant rather than osx?  but listen to wassy121; I'm leading you down the way too complicated path.
[2013-01-03 18:08:33 -0500] leifmadsen: <wassy121> the X bit allows cd into the directory
[2013-01-03 18:08:39 -0500] wassy121: the 1 bit, the x bit, is the "you can chdir() to this directory"
[2013-01-03 18:09:18 -0500] lehrblogger: oh, ok, that makes sense
[2013-01-03 18:10:16 -0500] maplebed: lehrblogger: http://content.hccfl.edu/pollock/aunix1/filepermissions.htm for more info about permissions
[2013-01-03 18:11:48 -0500] lehrblogger: ok, thanks
[2013-01-03 18:11:53 -0500] lehrblogger: it's re-provisioning
[2013-01-03 18:12:22 -0500] lehrblogger: my host is OS X 10.8.2, my guest should be ubuntu 12.04
[2013-01-03 18:14:24 -0500] lehrblogger: and that works :)
[2013-01-03 18:15:30 -0500] lehrblogger: thank you!
[2013-01-03 18:15:38 -0500] wassy121: :)  you're welcome
[2013-01-03 18:27:11 -0500] jwcarman: is there a way to tell Chef what the acceptable return codes are from a service stop/start?
[2013-01-03 18:28:50 -0500] X-Jester: hey, can anyone give me a clue how to invoke 'knife node run_list' from within ruby code by just requring chef gems?
[2013-01-03 18:29:05 -0500] X-Jester: specifically, i'd like to query the runlist, remove items from it, and add items to it, without dropping out to a shell
[2013-01-03 18:32:55 -0500] wassy121: jwcarman, not sure, maybe "returns" attribute?
[2013-01-03 18:33:13 -0500] binjured: anybody have an idea why `rake ssl_cert` would result in "undefined method `gsub' for nil:NilClass"?
[2013-01-03 18:33:40 -0500] jwcarman: wassy121: I don't see a returns attribute listed on the docs
[2013-01-03 18:34:04 -0500] wassy121: jwcarman, neither do I, was just pulling it from the execute resource
[2013-01-03 18:36:01 -0500] binjured: the traceback seems pretty useless too
[2013-01-03 18:37:37 -0500] binjured: ah, nm. didn't have the FQDN argument.
[2013-01-03 18:38:44 -0500] qhartman: I'm working on my first lwrp. The official docs are a little thin. Anyone have a pointers to something that is more complete, or a well-done lwrp I could use as a reference?
[2013-01-03 18:42:49 -0500] arturhoo: Chef newbie here, I am currently using chef-solo  and knife-solo to provision a VM, and managed to successfully use the Mysql cookbook and recipes to install mysql-server. Right now, I want to use the Database cookbook to create a database. Following the readme (and after googling for a while) I couldn't figure where call the providers from. Right now I have a role defined from where I set the run_list and the default_attributes.
[2013-01-03 18:43:07 -0500] arturhoo: Could someone please shine a light? Thank you in advance :)
[2013-01-03 18:43:58 -0500] lehrblogger: arturhoo: i think you want to write a new cookbook that's specific to your application
[2013-01-03 18:44:03 -0500] lehrblogger: and add that to the run list
[2013-01-03 18:44:39 -0500] lehrblogger: (i dont have answers to everyone else's questions, sorry)
[2013-01-03 18:46:20 -0500] lehrblogger: i've been using hosted chef so i dont know exactly what you should do, but does that illuminate anything?
[2013-01-03 18:46:28 -0500] arturhoo: lehrblogger: Thanks for the prompt reply, and where should the database cookbook be included?
[2013-01-03 18:47:34 -0500] arturhoo: I mean, I usually put vendor cookbook in the cookbooks dir, and simply list the recipes I want in the run_list method inside my a roles file.
[2013-01-03 18:48:23 -0500] arturhoo: But I will be using a provider from a Cookbook, so it is not so clear where I should or "require" those providers.
[2013-01-03 18:48:40 -0500] arturhoo: *where I should "require
[2013-01-03 18:49:10 -0500] X-Jester: anyone have some ideas on how i can correctly invoke Chef::Node.load() from a ruby script?
[2013-01-03 18:49:31 -0500] lehrblogger: i *think* it might be sufficient just to have it in the run list and/or specified as a dependency in your cookbook's metadata.rb file, but if not, i think you can put `include_recipe "database::mysql"` in your own cookbook
[2013-01-03 18:49:33 -0500] X-Jester: the objective is to query the node's runlist and modify it if desired from an external ruby script
[2013-01-03 18:51:30 -0500] arturhoo: I will try your suggestions and let you know ;)
[2013-01-03 18:51:36 -0500] lehrblogger: k :)
[2013-01-03 18:54:08 -0500] Cuthbertx: Anyone in here familiar with knife vsphere plugin, in regards to setting vlans?
[2013-01-03 18:57:14 -0500] dspp: is chef-repo designed primarily for chef server or can i also clone it for use with chef solo?
[2013-01-03 18:58:28 -0500] n00bie: How can I automate the response the a command that I execute
[2013-01-03 19:00:21 -0500] n00bie: no worries, the command had a "no-interaction" arg
[2013-01-03 19:00:37 -0500] n00bie: But still curious
[2013-01-03 19:09:55 -0500] dspp: is chef-repo designed primarily for chef server or can i also clone it for use with chef solo?
[2013-01-03 19:14:01 -0500] failshell: hello. im using an encrypted data bag to store users profiles. thing is, when i search in it, i can't get the data. is it possible to tell search to use the encryption key like we do for data bags in recipes?
[2013-01-03 19:18:31 -0500] jwcarman: what's the minitest way of checking for the existence of a user?
[2013-01-03 19:18:43 -0500] jwcarman: to assert that we created a user
[2013-01-03 19:20:44 -0500] mathewpeterson: Do all the files in a cookbook library get loaded even if no recipes are used?
[2013-01-03 19:22:14 -0500] chip-: jwcarman: This recipe will show you the kind of resources that minitest can verify: https://github.com/calavera/minitest-chef-handler/blob/master/examples/spec_examples/recipes/default.rb
[2013-01-03 19:22:21 -0500] chip-: jwcarman: This test will show you the tests for those resources: https://github.com/calavera/minitest-chef-handler/blob/master/examples/spec_examples/files/default/tests/minitest/example_test.rb
[2013-01-03 19:22:38 -0500] siezer: jwcarman you shouldn't have to do unit tests against core chef resource statements like that, since that would be a bug in chef. its better to make an integration test that tests that the aggregate resources achieve the desired effect. (service listening on a port)
[2013-01-03 19:22:41 -0500] siezer: however
[2013-01-03 19:22:44 -0500] siezer: this is how you do it
[2013-01-03 19:22:49 -0500] chip-: jwcarman: fwiw I understand that code-as-documentation is what they did with minitest, but man I wish they'd have written some docs.
[2013-01-03 19:22:50 -0500] siezer: https://github.com/someara/resource-tester-cookbook/blob/master/files/default/tests/minitest/default_test.rb
[2013-01-03 19:23:18 -0500] jwcarman: Those are chef-spec tests, are they not?
[2013-01-03 19:23:52 -0500] jwcarman: chip-: nevermind
[2013-01-03 19:24:59 -0500] dspp: is chef-repo designed primarily for chef server or can i also clone it for use with chef solo?
[2013-01-03 19:25:32 -0500] programmerq: so, when I do knife node from file, that makes it so that I can't access the ec2 attribute on the node until the next time chef runs. This makes it difficult since we're trying to find the ec2 public ip of the database server. is there a way to do knife node from file without completely erasing the node?
[2013-01-03 19:25:43 -0500] programmerq: the ec2 stuff is there from when the node had bootstrap run the first time
[2013-01-03 19:26:37 -0500] chip-: dspp: Chef-repo is an example structure for a Chef source code repository, it's useful for working with either chef servers or Chef solo.
[2013-01-03 19:26:59 -0500] chip-: dspp: Chef server works as an artifact repository for your cookbooks, and you don't get an artifact repo with solo.
[2013-01-03 19:28:53 -0500] xmltok: looks like chef-client leaks memory?
[2013-01-03 19:29:45 -0500] dspp: chip-: thanks a lot, i noticed some things that chef-repo includes like environments which arent supported in chef-solo, but i can treat just ignore that right?
[2013-01-03 19:29:57 -0500] dspp: but i can just ignore that*
[2013-01-03 19:30:34 -0500] chip-: Yep. Again, it's just a recommended structure for a source code repo, you can organize your source in any way you like. You don't even have to keep it in a repo, if you're feeling reckless / foolish. (Keep it in a repo.)
[2013-01-03 19:31:40 -0500] dspp: ok, understood, thanks
[2013-01-03 19:40:33 -0500] mjreed: So in Private Chef, how can I delete an organization?
[2013-01-03 19:41:15 -0500] cwj: mjreed: you need to contact support
[2013-01-03 19:41:18 -0500] cwj: e.g. via emai;
[2013-01-03 19:42:20 -0500] arturhoo: lehrblogger: putting `include_recipe "database::mysql"` in my cookbook worked, without the need for me to list the `database` cookbook as a dependency or add it to the run_list. That issued the install of the mysql gem in the provisioned machine (INFO: Processing chef_gem[mysql] action install (mysql::ruby line 36)). Even if I take that require out, Chef still magically knows about the existence of the provider.
[2013-01-03 19:43:37 -0500] mjreed: arturhoo: did you try it on a brand new node?  if you don't list it as a dependency, chef-client won't know to download that cookbook from the server.  Unless you depend on something else that depends on it, or have something else that depends on it in the run list.
[2013-01-03 19:44:07 -0500] mjreed: cwj: well, that's going to be annoying to test a mechanism for automated org creation, then..
[2013-01-03 19:44:40 -0500] arturhoo: mjreed: will test on a brand new node right now!
[2013-01-03 19:44:48 -0500] cwj: mjreed: its possible thats changed but i had to email them about deleting a node
[2013-01-03 19:44:50 -0500] cwj: er org
[2013-01-03 19:45:07 -0500] mjreed: on private chef?  not hosted?
[2013-01-03 19:45:15 -0500] cwj: mjreed: ah private chef
[2013-01-03 19:45:18 -0500] cwj: not sure there
[2013-01-03 19:46:41 -0500] cwj: arturhoo: if other cookbooks in your node's run list depend on the database cookbook, then your cookbook will be able to access LWRPs in the database cookbook without specifying it as a dependency. but when the cookbook that specifies the dependency is removed from your run list, your cookbook will have trouble accessing that LWRP.
[2013-01-03 19:46:55 -0500] cwj: arturhoo: ergo you should always specify cookbook dependencies
[2013-01-03 19:47:56 -0500] cwj: i.e. in your cookbook's metadata.rb
[2013-01-03 19:49:03 -0500] jwcarman: How do you issue a "stop service if it's running"
[2013-01-03 19:49:51 -0500] cwj: jwcarman: action :stop
[2013-01-03 19:50:10 -0500] cwj: if chef is able to determine the service is running, it will stop it
[2013-01-03 19:50:23 -0500] jwcarman: cwj: I figured it was smart enough to check to see if it was running
[2013-01-03 19:50:48 -0500] cwj: it usually is
[2013-01-03 19:51:03 -0500] cwj: what kind of service are you working with? e.g. init, upstart, etc
[2013-01-03 19:51:23 -0500] arturhoo: cwj: I see... well, I'm pretty sure no other cookbooks have it as a dependency. So mjreed's hint was probably right. I'll take this opportunity to ask you guys if there is a updated resource/repos/examples of chef-solo setups. The resources I found so far either are outdated or lack common patterns.
[2013-01-03 19:51:52 -0500] cwj: arturhoo: oh when you are using solo, all the cookbooks in the directory will be loaded
[2013-01-03 19:52:02 -0500] cwj: you should still specify those dependencies though
[2013-01-03 19:56:27 -0500] n00bie: anyone experienced with the Apace2 cookbook?
[2013-01-03 19:58:53 -0500] arturhoo: cwj: but then, another question. What is a good approach to know which dependencies I need o list? I mean, apparently, to use a Provider I need to require it, and list its cookbook as a dependency. But that cookbook might also have its dependencies. Should I list all of them recursively? E.g.: `database` cookbook depends on `mysql`, and `my custom cookbook` depends on `database` . Should I list both `database` and `mysql` or just `dat
[2013-01-03 19:59:51 -0500] cwj: arturhoo: in that case i believe it should be sufficient to depend on the database cookbook
[2013-01-03 20:00:11 -0500] mjreed: Ah, you can do it with REST. Cool.
[2013-01-03 20:01:06 -0500] arturhoo: Is there a specific code-paste site/tool I should use on this channel?
[2013-01-03 20:01:30 -0500] cwj: arturhoo: gist.github.com is popular
[2013-01-03 20:01:58 -0500] mjreed: doesn't really matter, arturhoo, as long as you don't paste directly into the room. :)
[2013-01-03 20:23:40 -0500] knuckolls: i think we're going to widen our net for hiring this posision. anyone know any specific places you've had success posting chef / devops / generalist job postings?
[2013-01-03 20:23:51 -0500] knuckolls: is it frowned upon on the mailing list?
[2013-01-03 20:24:33 -0500] UForgotten: theres usually posts on various linkedin groups for positions, may also want to try local lugs if youy dont want telecommute/relo.
[2013-01-03 20:24:48 -0500] knuckolls: relocation's on the table
[2013-01-03 20:24:55 -0500] knuckolls: local users groups are actively being engaged
[2013-01-03 20:25:00 -0500] UForgotten: where is this?
[2013-01-03 20:25:03 -0500] knuckolls: memphis
[2013-01-03 20:25:27 -0500] UForgotten: I know a guy in spring hill but he's super senior. and he uses puppet, not chef :)
[2013-01-03 20:25:28 -0500] knuckolls: linkedin groups is a good idea i hadn't considered as i don't use themheavily
[2013-01-03 20:25:53 -0500] elijah-mbp: knuckolls: ask in #nashdl, there are several puppet/chef folks around in there.
[2013-01-03 20:26:11 -0500] elijah-mbp: and that's at least in the same region.
[2013-01-03 20:26:34 -0500] knuckolls: i don't care what tools people use, i need a generalist that learns fast and works hard. i'm looking in the chef and devops community because those people tend to be solid generalists, teachers, architects, badasses
[2013-01-03 20:26:43 -0500] knuckolls: i'll hop in #nashdl, that's a good lead
[2013-01-03 20:27:36 -0500] knuckolls: uforgotten, if that guy is looking go ahead and pm me his information.
[2013-01-03 20:29:05 -0500] yeukhon: hey guys, is there a tutorial on how to use bento? i googled a lot and couldn't really find one. maybe i missed something. thanks
[2013-01-03 20:29:55 -0500] yeukhon: i mean like getting my own username. customizationm, basically
[2013-01-03 20:32:10 -0500] kallistec: knuckolls: FWIW, we've had people posting job opportunities on the ML in the past. It seems like as long as the actual person doing the hiring posts personally and infrequently, no one minds. IOWs be mindful to keep the value to the community a net positive.
[2013-01-03 20:32:54 -0500] knuckolls: thanks kallistec
[2013-01-03 20:34:45 -0500] UForgotten: knuckolls: PM me a link to a job desc, I can pass it on :)
[2013-01-03 20:35:32 -0500] knuckolls: https://workforpie.com/companies/mosaik-solutions/job/mosaik-solutions-architect-teacher-software-generalist-42/
[2013-01-03 20:35:38 -0500] knuckolls: i figure in here's good enough
[2013-01-03 20:35:41 -0500] knuckolls: thanks uforgotten
[2013-01-03 20:43:38 -0500] kreedy: People using the application_ruby cookbook: How are you handling the generation of application.yml? More specifically, where are you storing the configuration data to generate it: node attributes, data bags, the application's recipe, etc?
[2013-01-03 20:45:45 -0500] toobulkeh: is anyone familiar with the chef-rvm cookbook? I'm trying to install a rails dev environment on a vagrant VM using this cookbook, but I can't figure out how to customize it by adding my own default recipe
[2013-01-03 20:55:34 -0500] chewie71: Is it possible to use ohai variables in a role file?
[2013-01-03 20:55:47 -0500] derks: Hello, is there a proper way to migrate a chef client/node?  As in migrate the physical box to replace the exist one...  Right now I have to remove the client/node, and then run first boot on the new box
[2013-01-03 21:10:25 -0500] wdpro_kevin: derks: I think if the node name is going to be the same you can just remove the client from the server and when running chef-client on the new node it will register and automatically pick up the run_list from the previous node
[2013-01-03 21:19:15 -0500] mathewpeterson: Is there a way to change the ipaddress ohai grabs for a particular node?
[2013-01-03 21:34:34 -0500] ranjibd: mathewpeterson,  not easily
[2013-01-03 21:35:14 -0500] ranjibd: mathewpeterson, those are automatic attributes
[2013-01-03 21:35:38 -0500] mathewpeterson: ranjibd: It grabbed the wrong ipaddress as I have to eth devices.
[2013-01-03 21:35:49 -0500] mathewpeterson: two*
[2013-01-03 21:36:37 -0500] ranjibd: you can get the other interface details also using ohai
[2013-01-03 21:37:03 -0500] mathewpeterson: the chef node attribute "ipaddress" is not correct, how do I fix that
[2013-01-03 21:37:35 -0500] Cuthbertx: Anyone in here familiar with knife vsphere plugin, in regards to setting vlans?
[2013-01-03 21:37:51 -0500] laurent\: mathewpeterson: can you tell me a bit about your setup ?
[2013-01-03 21:38:05 -0500] laurent\: linux ?
[2013-01-03 21:38:37 -0500] mathewpeterson: laurent\: have two vm's (ubuntu, 12.04) chef-server and chef-client
[2013-01-03 21:39:45 -0500] mathewpeterson: laurent\: Each vm has two adapters, eth0 and eth1. The eth0 is a private lan and eth1 is natted through the host
[2013-01-03 21:40:55 -0500] OlegYch|h: hi
[2013-01-03 21:40:57 -0500] laurent\: mathewpeterson: what ipaddress gets reported by ohai ?
[2013-01-03 21:41:17 -0500] OlegYch|h: i'm getting a failure "cannot generate tempfile" trying to upload a cookbook http://pastebin.com/k6aRiDkb
[2013-01-03 21:41:30 -0500] OlegYch|h: i'm able to upload other cookbooks
[2013-01-03 21:41:42 -0500] OlegYch|h: was able to upload this one yesterday
[2013-01-03 21:42:11 -0500] mathewpeterson: laurent\: The correct range is 192.168.56.0/24, the ipaddress is a 10.0.2.15
[2013-01-03 21:43:48 -0500] laurent\: mathewpeterson: what ohai version and what virtualisation system are you using ?
[2013-01-03 21:44:15 -0500] mathewpeterson: 6.14.0 and virtualbox
[2013-01-03 21:44:24 -0500] laurent\: ok
[2013-01-03 21:44:56 -0500] laurent\: mathewpeterson: can you use a pastebin/gist to paste the result of "ip a l" "ip -d -s link", "ip route show" and "ohai network" please ?
[2013-01-03 21:45:22 -0500] mathewpeterson: laurent\: sure, give me a moment please
[2013-01-03 21:49:55 -0500] mathewpeterson: laurent\: https://gist.github.com/4447679
[2013-01-03 21:51:41 -0500] laurent\: mathewpeterson: ok thanks, would you be ok to give ohai 6.16.0.beta.2 a try ?
[2013-01-03 21:51:48 -0500] laurent\: (gem install --pre ohai)
[2013-01-03 21:52:04 -0500] mathewpeterson: laurent\: sure
[2013-01-03 21:52:49 -0500] laurent\: the default route is missing from your paste of "ip route show", but i can see in ohai's results it exists and uses eth1
[2013-01-03 21:54:17 -0500] mathewpeterson: laurent\: I've updated the gist.
[2013-01-03 21:54:32 -0500] laurent\: ok :)
[2013-01-03 21:54:33 -0500] mathewpeterson: laurent\: It appears that I don't have ruby or ruby gems installed?
[2013-01-03 21:54:48 -0500] laurent\: how have you installed chef and ohai ?
[2013-01-03 21:55:08 -0500] mathewpeterson: laurent\: bootstrap I believe
[2013-01-03 21:56:11 -0500] mathewpeterson: laurent\: knife bootstrap i believe
[2013-01-03 21:57:30 -0500] laurent\: the default bootstrap method seems to be using gems for ubuntu 12.04
[2013-01-03 21:58:39 -0500] laurent\: "ohai chef_packages" should give a hit
[2013-01-03 21:58:59 -0500] mathewpeterson: laurent\: This is a testing setup.. I could always just resin up the host..
[2013-01-03 21:59:04 -0500] mathewpeterson: respin*
[2013-01-03 22:01:36 -0500] laurent\: or dpkg -l ohai | or ls -l /opt/chef, i don't know :)
[2013-01-03 22:03:34 -0500] arturhoo: When running `knife cook` I see the output from the commands being run on the provisioned VM. I tried setting `log_level` to `:info` and `verbose_logging` to `nil` with no success. Any suggestions?
[2013-01-03 22:04:04 -0500] arturhoo: On how NOT to have those logged :)
[2013-01-03 22:04:54 -0500] mathewpeterson: laurent\: I've updated the gist
[2013-01-03 22:11:35 -0500] fritter63: hello, was wondering if there a way in minitest to check for the owner of a process? Can't seem to find anything....
[2013-01-03 22:15:01 -0500] laurent\: mathewpeterson: look like the omnibus tihngy, /opt/chef/embedded/bin/gem install --pre --no-ri --no-rdoc ohai should be ok to install ohai-6.16.0.beta.2.gem
[2013-01-03 22:16:19 -0500] mathewpeterson: laurent\: done.
[2013-01-03 22:16:34 -0500] laurent\: is "ohai ipaddress" any better ?
[2013-01-03 22:17:07 -0500] mathewpeterson: laurent\: nope
[2013-01-03 22:17:32 -0500] laurent\: :(
[2013-01-03 22:17:43 -0500] mathewpeterson: laurent\: I concur.
[2013-01-03 22:19:19 -0500] qhartman: Is there a fix for the moneta problem other than installing the old version by hand? I don't really want to switch to omnibus, but it's driving me nuts having stuff not bootstrap correctly....
[2013-01-03 22:20:02 -0500] miah: use bundler to manage your chef installation
[2013-01-03 22:20:11 -0500] laurent\: mathewpeterson: I've just read back, ipaddress is linked to the default_interface
[2013-01-03 22:20:23 -0500] ranjibd: fritter63, do you have the pid?
[2013-01-03 22:20:53 -0500] laurent\: mathewpeterson: what should ipaddress be 192.168.56.103 instead of 10.0.2.15 ?
[2013-01-03 22:20:57 -0500] qhartman: miah, as opposed to do a normal knife bootstrap? Oh hey, I wonder if I can just fix it in the bootstrap file....
[2013-01-03 22:21:10 -0500] MartinCleaver: Hi Is there a way to get knife to follow and get all dependencies?
[2013-01-03 22:21:13 -0500] jkyle: qhartman: moneta is fixed as of 10.16.4
[2013-01-03 22:21:26 -0500] qhartman: jkyle, super, thanks
[2013-01-03 22:21:31 -0500] jkyle: qhartman: or you just update your bootstrap to peg it at 0.6.0
[2013-01-03 22:21:42 -0500] laurent\: mathewpeterson: i meant, why should*
[2013-01-03 22:21:48 -0500] jkyle: if you can't upgrade, I mean
[2013-01-03 22:22:08 -0500] qhartman: jkyle, right. Might do that.
[2013-01-03 22:22:45 -0500] jkyle: qhartman: you'll need to 1. gem install chef 2. gem uninstall moneta 3. gem install moneta -v 0.6.0
[2013-01-03 22:23:17 -0500] jkyle: round about
[2013-01-03 22:23:28 -0500] mathewpeterson: laurent\: The idea was that I could have a private LAN where all internal service traffic gets passed around
[2013-01-03 22:23:40 -0500] qhartman: jkyle, makes sense. I'm at 10.12 and have been meaning to upgrade, but that will be a big project, relatively speaking
[2013-01-03 22:24:48 -0500] jkyle: qhartman: 10.12 -> 10.16 was smooth enough if you're using hosted
[2013-01-03 22:25:00 -0500] qhartman: jkyle, not, running our own server
[2013-01-03 22:25:08 -0500] mathewpeterson: laurent\: in production I would like to have a vpn between all of the servers
[2013-01-03 22:25:27 -0500] qhartman: jkyle, I'm sure the upgrade itself won't be a major production, but all the validation I have to do before I do it will be.
[2013-01-03 22:27:01 -0500] jkyle: I think there were some explosions on the server side, but fixable enough
[2013-01-03 22:27:24 -0500] qhartman: good to know
[2013-01-03 22:27:39 -0500] laurent\: this ipaddress attribute is a bit tricky :) I've always considered it to linked to the default_interface.
[2013-01-03 22:27:51 -0500] qhartman: I've often wondered what potential pitfalls there were if the server and client got out of sync
[2013-01-03 22:27:53 -0500] jkyle: validation? next you're going to tell me you have redundancy and failovers...what fun is that?
[2013-01-03 22:28:44 -0500] laurent\: mathewpeterson: i'm also using several network interfaces in my setups, but my main default route points to my private lan. I'm using source routing to make sure the public traffic goes thru the public lan
[2013-01-03 22:29:08 -0500] barnacles: Any ideas why when using the community MySQL cookbook, I run into a "GroupIDNotFound" error? It works when I provision a second time so I'm guessing it's a race condition.
[2013-01-03 22:29:09 -0500] mathewpeterson: laurent\: that sounds like black magic
[2013-01-03 22:29:25 -0500] laurent\: i don't mind i'm kind of black :)
[2013-01-03 22:30:28 -0500] mikeroth1: I have a question about bootstrap files
[2013-01-03 22:30:42 -0500] mikeroth1: how do you add a local repository in a bootstrap file?
[2013-01-03 22:31:54 -0500] mikeroth1: anyone?
[2013-01-03 22:32:25 -0500] laurent\: mathewpeterson: are you using proxies on you private lan to make sure your server can initiate connections (apt-get update) or are you expecting it to go thru the public iface ?
[2013-01-03 22:33:13 -0500] jkyle: mikeroth1: what os platform?
[2013-01-03 22:33:24 -0500] mathewpeterson: laurent\: I guess I'm just expecting it to work. No proxies.
[2013-01-03 22:34:24 -0500] jkyle: mikeroth1: bootstraps are just templated bash scripts. so you'd do it the same way you'd do it in bash, e.g. for debian => echo "source string" >> /etc/apt/sources.list.d/mysources.list
[2013-01-03 22:35:17 -0500] jkyle: mikeroth1: but it's best to keep bootstraps to a minimal and provision with roles/cookbooks. you could use the apt cookbook to add sources in a base role
[2013-01-03 22:35:46 -0500] laurent\: mathewpeterson: ok, if your fqdn resolves as an ip from the private lan why don't you use the fqdn attribute instead ?
[2013-01-03 22:36:46 -0500] mathewpeterson: laurent\: I'm not entirely sure.
[2013-01-03 22:38:24 -0500] mathewpeterson: laurent\: Mainly because I have no idea what I'm doing.
[2013-01-03 22:38:35 -0500] jkyle: mathewpeterson: that sounds like a dns issue rather than a localhost issue
[2013-01-03 22:39:01 -0500] jkyle: if I understand you want "local traffic over the private, otherwise over public interface"
[2013-01-03 22:39:28 -0500] mathewpeterson: jkyle: correct
[2013-01-03 22:40:19 -0500] jkyle: totally solvable by dns
[2013-01-03 22:41:05 -0500] jkyle: lan hosts resolve fqdn to private ip, wan hosts to public
[2013-01-03 22:42:07 -0500] FarmKing: I'm confused about how to register encrypted data bags with the server
[2013-01-03 22:42:28 -0500] FarmKing: after using knife to create them, how do I make them available to clients?
[2013-01-03 22:44:53 -0500] qhartman: I need a particular gem for the lwrp that I'm writing so in the default recipe in that cookbook I included a chef_gem line that is supposed to install it, but I'm still getting a loading failure on that gem from my lwrp file. Where should I define the chef_gem installation to make it work right?
[2013-01-03 22:45:38 -0500] qhartman: FarmKing, when you say "registered", do you mean you uiplaoded them?
[2013-01-03 22:46:13 -0500] qhartman: FarmKing, so if you look at them in the web UI you see them in their encrypted form?
[2013-01-03 22:46:22 -0500] FarmKing: qhartman: I guess that's what I'm asking.  After using knife data bag create, how do I upload them?
[2013-01-03 22:46:50 -0500] FarmKing: do I have to write them out as files and push those?
[2013-01-03 22:47:07 -0500] qhartman: That's what I do
[2013-01-03 22:47:29 -0500] qhartman: I assume you've looked at this: http://docs.opscode.com/essentials_data_bags_encrypt.html
[2013-01-03 22:47:50 -0500] FarmKing: I have
[2013-01-03 22:47:55 -0500] qhartman: FarmKing, I make sure everything is some kind of file saved in an SCM ( I use git) before it gets pushed into the chef server
[2013-01-03 22:48:14 -0500] FarmKing: I guess I assumed that knife was creating files somehow
[2013-01-03 22:48:19 -0500] laurent\: guys, what do expect node["ipaddress"] as returned by "ohai ipaddress" to be ? the ipaddress linked to the default_interface, the fqdn ip address as resolved by the node, or something else ?
[2013-01-03 22:50:13 -0500] qhartman: FarmKing, nope, unless you use the "from file...." syntax, it will just create stuff directly on the server
[2013-01-03 22:50:57 -0500] FarmKing: so, if it's already on the server, how do I reference it from the client?
[2013-01-03 22:51:21 -0500] mathewpeterson: FarmKing: you also need to upload the key to the client
[2013-01-03 22:51:59 -0500] mathewpeterson: FarmKing: to /etc/chef/encrypted_data_bag_secret I believe
[2013-01-03 22:52:06 -0500] qhartman: FarmKing, mathewpeterson : yes, that is also needed
[2013-01-03 22:52:45 -0500] qhartman: FarmKing, In general you use "foo = data_bag_item('bag_name',object)
[2013-01-03 22:53:03 -0500] FarmKing: ok.  I thought adding it to the knife.rb with encrypted_data_bag_secret '/path/to/your/data_bag_key' on my workstation was sufficient
[2013-01-03 22:53:26 -0500] FarmKing: then knife ec2 server XXX should be able to access it, right?
[2013-01-03 22:53:27 -0500] qhartman: http://docs.opscode.com/essentials_data_bags.html
[2013-01-03 22:53:44 -0500] FarmKing: I've been reading that several times through
[2013-01-03 22:54:04 -0500] qhartman: FarmKing, good good
[2013-01-03 22:54:56 -0500] FarmKing: I was hoping to bootstrap an ec2 instance without additionally scping the key to /etc/chef/....
[2013-01-03 22:55:14 -0500] FarmKing: As I read it, encrypted_data_bag_secret '/path/to/your/data_bag_key' in the knife.rb should allow that, right?
[2013-01-03 22:55:21 -0500] qhartman: FarmKing, To do that automatically I have setup a "Keystore" server that houses the keys for the various environments I use
[2013-01-03 22:55:23 -0500] FarmKing: or, did I miss simething?
[2013-01-03 22:55:48 -0500] FarmKing: like ldap?
[2013-01-03 22:55:53 -0500] qhartman: and part of my baseline recipe that runs before I use any encrypted bags is a section that scps the keys from that server to where they belong on the local host
[2013-01-03 22:56:16 -0500] knuckolls: encrypted_data_bag_secret "#{current_dir}/encrypted_data_bag_secret"
[2013-01-03 22:56:22 -0500] knuckolls: add that to your knife.rb on your localhost
[2013-01-03 22:56:25 -0500] knuckolls: and it'll copy it automatically
[2013-01-03 22:56:30 -0500] knuckolls: upon bootstrap
[2013-01-03 22:56:35 -0500] knuckolls: with knife ec2 server create
[2013-01-03 22:56:39 -0500] FarmKing: that's what I thought
[2013-01-03 22:56:47 -0500] knuckolls: it works, we use it heavily
[2013-01-03 22:57:02 -0500] qhartman: Didn't know about that
[2013-01-03 22:57:05 -0500] knuckolls: are you using chef-full bootstrap template?
[2013-01-03 22:57:12 -0500] FarmKing: I wonder what I'm doing wrong
[2013-01-03 22:57:19 -0500] FarmKing: getting o such file or directory - file not found '/etc/chef/encrypted_data_bag_secret' in the traceback
[2013-01-03 22:57:34 -0500] knuckolls: i keep the encrypted_data_bag_secret in the same folder as my knife.rb
[2013-01-03 22:57:58 -0500] stevemac_: hey all, got an issue with the java cookbook on centos 6.3
[2013-01-03 22:58:23 -0500] stevemac_: java_ark[jdk] (java::oracle line 59) had an error: NameError: Cannot find a resource for converge_by on centos version 6.3
[2013-01-03 22:58:38 -0500] knuckolls: FarmKing, qhartman: lines 38-46 of the chef-full bootstrap template do the work
[2013-01-03 22:58:39 -0500] knuckolls: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2013-01-03 22:59:42 -0500] FarmKing: knuckolls: thanks
[2013-01-03 23:00:00 -0500] FarmKing: I'll re-evaluate my assumptions, but it sounds like I understand what I *think* I'm doing
[2013-01-03 23:00:13 -0500] qhartman: knuckolls, interesting, I'm using the older gem-based bootstraps. May have to add that
[2013-01-03 23:00:21 -0500] mathewpeterson: Is it possible to load an encrypted bag from a role.rb file?
[2013-01-03 23:01:14 -0500] knuckolls: farmking, qhartman: you guys just happened to be talking about something i showed someone here in the office less than an hour ago, lol. only reason i know the exact lines in the codebase.
[2013-01-03 23:01:45 -0500] qhartman: knuckolls, a magician never reveals his secrets....
[2013-01-03 23:01:51 -0500] qhartman: :D
[2013-01-03 23:01:55 -0500] knuckolls: lesson learned
[2013-01-03 23:01:57 -0500] mmorris: I am sending logs from a server to loggly using syslog-ng and I am not seeing any chef related logs. Is syslog not the default log service for chef now? how do i set it up to be handled through syslog-ng?
[2013-01-03 23:03:43 -0500] jtran: anyone know why i would get 'Cannot update sandbox' errors when attempting to upload cookbooks to hosted chef?
[2013-01-03 23:03:44 -0500] jtran: http://paste.openstack.org/show/28803/
[2013-01-03 23:04:00 -0500] jtran: fwiw, this is not related to openstack.  just needed a pastebin
[2013-01-03 23:04:29 -0500] mikeroth1: jkyle: Ubuntu and this is how I'm adding the repo
[2013-01-03 23:04:43 -0500] mikeroth1: jkyle:[ -f /etc/apt/sources.list.d/site-source.list ] || echo "deb http://mirrors.site.com precise main" > /etc/apt/sources.list.d/site-source.list
[2013-01-03 23:05:32 -0500] maplebed: mikeroth1: any reason you're not using the apt LWRP?
[2013-01-03 23:06:26 -0500] mikeroth1: maplebed:  nope
[2013-01-03 23:07:25 -0500] senthilr: does chef have a problem with usernames that contains underscore
[2013-01-03 23:07:36 -0500] mathewpeterson: Is it possible to load an encrypted bag from a role.rb file?
[2013-01-03 23:08:15 -0500] knuckolls: mathewpeterson: i think i know what you're trying to do, but can you give me more context?
[2013-01-03 23:08:50 -0500] mathewpeterson: knuckolls: I'm trying to set a mysql_root_password attribute for my database role
[2013-01-03 23:09:21 -0500] knuckolls: i believe this will be different in chef 11, but you can't access other attributes within the roles
[2013-01-03 23:09:27 -0500] knuckolls: even encrypted databags
[2013-01-03 23:09:34 -0500] knuckolls: the node object isn't in scope there
[2013-01-03 23:09:52 -0500] qhartman: knuckolls, mathewpeterson , that is also my understanding
[2013-01-03 23:10:02 -0500] mathewpeterson: knuckolls: What's the best practice to do such a thing?
[2013-01-03 23:10:17 -0500] knuckolls: i'm still a little fuzzy on what you're trying to do, but let me take you through how i'd do it
[2013-01-03 23:10:26 -0500] maplebed: mikeroth1: take a look at http://wiki.opscode.com/display/chef/Opscode+LWRP+Resources
[2013-01-03 23:10:35 -0500] maplebed: the first one there - apt_repository
[2013-01-03 23:10:42 -0500] yfeldblum: mathewpeterson, the best practice is to do it from a recipe
[2013-01-03 23:10:58 -0500] yfeldblum: mathewpeterson, recipes are where your code go, including your code to fetch and decrypt a data-bag item
[2013-01-03 23:11:08 -0500] knuckolls: you have a mysql recipe, you have another cookbook that's going to make your specific customizations to mysql. within your custom recipe, do all the encrypted databag stuff and anything else you want
[2013-01-03 23:12:19 -0500] mathewpeterson: knuckolls: It just seems quite a bit out of the way to set the password.
[2013-01-03 23:12:34 -0500] qhartman: I would keep everything in one cookbook, and just have something in the role or environment that controlled which databag to grab the pw and maybe other settings out of.
[2013-01-03 23:13:01 -0500] knuckolls: my current philosophy is to use wrapper cookbooks, much like this link
[2013-01-03 23:13:02 -0500] knuckolls: http://devopsanywhere.blogspot.it/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-01-03 23:13:05 -0500] knuckolls: worth a read.
[2013-01-03 23:13:09 -0500] knuckolls: gotta head out, best of luck
[2013-01-03 23:13:37 -0500] mikeroth1: maplebed: I can add that in the bootstrap file?
[2013-01-03 23:14:11 -0500] derks: Hi, how do i reference 'chef_environment' inside a recipe?
[2013-01-03 23:14:21 -0500] derks: node[:chef_environment] doesn't seem to work
[2013-01-03 23:14:27 -0500] lehrblogger: derks: try node.chef_environment
[2013-01-03 23:14:27 -0500] yfeldblum: derks, node.chef_environment, but *not* node[:chef_environment]
[2013-01-03 23:14:51 -0500] derks: man, now i'm even more confused to why that would be the answer
[2013-01-03 23:14:54 -0500] derks: but thanks
[2013-01-03 23:15:36 -0500] yfeldblum: derks, because chef_environment is a property directly on the node, not on the node attributes (node-attributes are what have default/normal/override/automatic precendences)
[2013-01-03 23:15:50 -0500] derks: ah, ok.  that makes sense
[2013-01-03 23:16:29 -0500] yfeldblum: derks, your node data looks like this: {"chef_environment": "_default", "default_attributes": {...}, "normal_attributes": {...}, ..., "run_list": ["role[base]"]}
[2013-01-03 23:17:16 -0500] yfeldblum: derks, you can only get at the merged attributes using Node#[], not at the actual underlying node properties
[2013-01-03 23:17:20 -0500] maplebed: mikeroth1: oh, I misesd the bootstrap part.  No idea, sorry.  I'm not sure what's different during bootstrap.  I use that in my regular chef runs.
[2013-01-03 23:18:30 -0500] derks: yfeldblum, thanks for the help
[2013-01-03 23:23:30 -0500] mmorris: anyone have experience with syslog and chef?
[2013-01-03 23:33:29 -0500] OlegYch|h: can anyone please help, i can't upload cookbooks to my chef server
[2013-01-03 23:33:32 -0500] OlegYch|h: getting http://pastebin.com/k6aRiDkb
[2013-01-03 23:35:15 -0500] mjolk2: hosted chef?
[2013-01-03 23:35:56 -0500] mjolk2: oh nm ec2 ip
[2013-01-03 23:36:14 -0500] mjolk2: did you follow some guide? if so, link to it
[2013-01-03 23:37:23 -0500] OlegYch|h: it was working yesterday, but stopped after i restarted instance
[2013-01-03 23:37:47 -0500] mjolk2: check permissions on the directories
[2013-01-03 23:40:29 -0500] OlegYch|h: seems fine http://pastebin.com/KQYSPNff
[2013-01-03 23:41:00 -0500] mjolk2: is your webserver running as root?
[2013-01-03 23:41:09 -0500] mjolk2: does the chef-server write files as root?
[2013-01-03 23:41:11 -0500] mjolk2: if not
[2013-01-03 23:42:53 -0500] OlegYch|h: merb is running from chef user
[2013-01-03 23:43:10 -0500] OlegYch|h: but it was running like that from the very start
[2013-01-03 23:43:45 -0500] maplebed: stopping and starting the instance will change it's IP address; is there some check on that that's breaking things?
[2013-01-03 23:44:15 -0500] OlegYch|h: i've been starting\stopping it before a couple of times
[2013-01-03 23:44:45 -0500] OlegYch|h: the only issue i had was with rabbitmq
[2013-01-03 23:44:53 -0500] maplebed: (restart or stop/start?  the former keeps its address; the latter gets a new one)
[2013-01-03 23:44:59 -0500] OlegYch|h: and i have
[2013-01-03 23:44:59 -0500] OlegYch|h: rabbitmqctl add_vhost /chef
[2013-01-03 23:44:59 -0500] OlegYch|h: rabbitmqctl add_user chef chef
[2013-01-03 23:44:59 -0500] OlegYch|h: rabbitmqctl set_permissions -p /chef chef ".*" ".*" ".*"
[2013-01-03 23:45:03 -0500] OlegYch|h: to restore it
[2013-01-03 23:45:12 -0500] OlegYch|h: yes, start/stop
[2013-01-03 23:45:47 -0500] OlegYch|h: let me restart it once again..
[2013-01-03 23:49:27 -0500] OlegYch|h: still the same error..
[2013-01-03 23:54:30 -0500] OlegYch|h: maybe i need to cleanup it somehow?
[2013-01-03 23:56:00 -0500] OlegYch|h: sudo chmod -R 777 /usr/share/chef-server-api solved it...

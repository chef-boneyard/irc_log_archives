[2013-01-29 00:01:54 -0500] josephholsten_: anyone using jamie-ci with minitest?
[2013-01-29 00:04:33 -0500] tomdzk: Toger: it may be this instead: knife[:distro] = ... (similar to aws_access_key_id etc.)
[2013-01-29 00:04:58 -0500] Toger: I just tried that one and it defaulted to the gems-install, trying it bare now
[2013-01-29 00:11:18 -0500] mhalligan: Is there a version of the omnibus installer which works with Wheezy/Sid?
[2013-01-29 00:12:01 -0500] mhalligan: the distro packages require infinite yak shaving, and just curling install.sh fails
[2013-01-29 00:12:31 -0500] jkyle: I'm using the chef-client and chef-server cookbooks. is there a cookbook or option to upgrade the chef* gems and dependencies?
[2013-01-29 00:18:31 -0500] josephholsten_: jkyle: I use omnibus_updater https://github.com/hw-cookbooks/omnibus_updater
[2013-01-29 00:18:56 -0500] jtimberman: mhalligan: aka debian 'testing'?
[2013-01-29 00:19:10 -0500] jkyle: hm, I have existing deployments and a private chef server. it's an either or thing with omnibus eh?
[2013-01-29 00:19:27 -0500] josephholsten_: mhalligan: I'd not sure I've done anything with sid that doesn't resemble infinite yak shaving.
[2013-01-29 00:19:53 -0500] cheflevelramen: What's the correct way to use an lwrp of one cookbook in another?
[2013-01-29 00:22:00 -0500] cheflevelramen: Specifically, I want to use the AWS cookbook's lwrp in another cookbook I'm creating.
[2013-01-29 00:22:26 -0500] josephholsten_: it should just work?
[2013-01-29 00:22:33 -0500] Toger: I think you just have to put a depends statement in your cookbook metadata
[2013-01-29 00:23:14 -0500] josephholsten_: should be named aws_ebs_volume or similar
[2013-01-29 00:24:15 -0500] cheflevelramen: Oh okay. Thought you had to do something special. I'll give that a shot. I'll try using depends too if it doesn't work. Thanks
[2013-01-29 00:25:40 -0500] mhalligan: jtimberman: yeah, my current environment is a shitshow :(
[2013-01-29 00:26:28 -0500] mhalligan: joespholsten_: =~ /sid/debian/
[2013-01-29 00:27:19 -0500] jmickle: hi does anyone know of any way to be able to determine how many instances of a app are running across multiple nodes to increment a value in a config?
[2013-01-29 00:28:30 -0500] log1kal: jmickle: if your app is controlled by a unique role or recipe, you could do a knife search "roles:yourrole" and count the returns
[2013-01-29 00:28:43 -0500] log1kal: assuming that you remove the role from decommed or removed nodes
[2013-01-29 00:29:10 -0500] jmickle: yeah i thought about this, heres the catch its a node js app and we are deploying two instances per server
[2013-01-29 00:29:18 -0500] jmickle: and each app has to have a config value of SEVERNUM
[2013-01-29 00:29:28 -0500] jmickle: so 1,2 could be on same server
[2013-01-29 00:30:30 -0500] jmickle: and 3,4 on another
[2013-01-29 00:30:46 -0500] cheflevelramen: Oh okay. Thought you had to do something special. I'll give that a shot. I'll try using depends too if it doesn't work. Thanks
[2013-01-29 00:30:56 -0500] cheflevelramen: oops, mistyped :)
[2013-01-29 00:30:58 -0500] cheflevelramen: exit
[2013-01-29 00:31:07 -0500] jtimberman: mhalligan: the install.sh script hits an API service that spits out the URL to the right package based on parameters. you should be fine with: 'http://www.opscode.com/chef/download?p=debian&pv=6&m=x86_64&v=latest'
[2013-01-29 00:31:21 -0500] jtimberman: er, wget -O chef.deb 'http://www.opscode.com/chef/download?p=debian&pv=6&m=x86_64&v=latest'
[2013-01-29 00:31:39 -0500] jtimberman: of course change m=i386 if you have some weird 32 bit system floating aroudn :)
[2013-01-29 00:33:36 -0500] c_t: (not too surprisingly, there aren't prebuilt debs for chef for Debian/390 though)
[2013-01-29 00:47:52 -0500] johnz: Is it possible to bootstrap multiple nodes simultaneously from the same workstation?
[2013-01-29 00:48:50 -0500] miah: run knife multiple times
[2013-01-29 00:49:14 -0500] miah: make bootstrapping part of your provisioning process so you don't have to run knife bootstrap..
[2013-01-29 00:49:23 -0500] miah: eg. the answer to your question: yes
[2013-01-29 00:50:01 -0500] isotope: I have a question about templates but I"m not sure its a ruby or chef question
[2013-01-29 00:50:07 -0500] isotope: I have this if statement
[2013-01-29 00:50:08 -0500] miah: ask question
[2013-01-29 00:50:08 -0500] isotope: <% if node['branch'][node.chef_environment] == node['branch']['prod'] -%>
[2013-01-29 00:50:18 -0500] johnz: miah: thanks!
[2013-01-29 00:50:20 -0500] isotope: which works fine
[2013-01-29 00:50:38 -0500] isotope: but if I try to modify the string it doesn't work
[2013-01-29 00:51:08 -0500] miah: modify which string?
[2013-01-29 00:51:10 -0500] isotope: <% if node['branch'][node.chef_environment] == node['branch']['prod'].upcase -%>
[2013-01-29 00:51:21 -0500] isotope: <% if node['branch'][node.chef_environment] == node['branch']['prod'] -%>
[2013-01-29 00:51:56 -0500] miah: i dont think node has a 'upcase' method. but it does have a to_s.. so you could probably do .to_s.upcase
[2013-01-29 00:52:00 -0500] miah: i could be wrong though
[2013-01-29 00:52:24 -0500] isotope: Ah, yeah maybe it isn't being treated like a string
[2013-01-29 00:52:40 -0500] miah: right =)
[2013-01-29 00:53:09 -0500] miah: https://github.com/opscode/chef/blob/master/lib/chef/node.rb
[2013-01-29 00:54:52 -0500] isotope: miah that worked!
[2013-01-29 00:54:57 -0500] isotope: thanks a ton
[2013-01-29 00:55:20 -0500] isotope: I was confused because the value of node['branch']['prod'] is a string
[2013-01-29 00:57:45 -0500] fromonesrc: which opscode pricing tier makes the web management console fast?
[2013-01-29 00:59:28 -0500] segv: So, apparently the community repo from chef for ubuntu doesn't work with quantal atm?
[2013-01-29 01:01:14 -0500] segv: Who maintains those packages?
[2013-01-29 01:05:54 -0500] jubilo: how would I pull an environment variable and set it for use in a recipe?
[2013-01-29 01:06:34 -0500] _josh: has anybody used the "chef-mongodb" cookbook? it keeps hanging on "Processing service[mongodb] action start (mongodb::default line 141)"
[2013-01-29 01:06:38 -0500] jubilo: like, could I reference ENV['FOO'] and set that to the variable foo within a recipe and use it?
[2013-01-29 01:09:25 -0500] miah:  isotope node attributes like that are technically mash's
[2013-01-29 01:09:39 -0500] miah: and ya. can be confusing =)
[2013-01-29 01:14:46 -0500] jubilo: miah, not sure what that means, but thank you :)
[2013-01-29 01:25:56 -0500] segv: why hasn't your repo maintainer updated the opscode repo to have the latest 10.18.2 binaries that are there?
[2013-01-29 01:59:48 -0500] josephholsten_: anyone know how to actually do something with jamie verify?
[2013-01-29 02:04:08 -0500] jtimberman: segv: what do you mean?
[2013-01-29 02:04:32 -0500] jtimberman: https://gist.github.com/3b02256b2d4af0dc01d7
[2013-01-29 02:04:33 -0500] segv: nm
[2013-01-29 02:04:47 -0500] segv: its a package battle between opscode and ubuntus official packages ;D
[2013-01-29 02:04:51 -0500] jtimberman: ahhh.
[2013-01-29 02:04:58 -0500] segv: Ubuntu 12.10
[2013-01-29 02:04:59 -0500] jtimberman: mortal kombat!!!!!
[2013-01-29 02:05:02 -0500] segv: indeed.
[2013-01-29 02:05:07 -0500] segv: MORTAL PACKAGE BLOCK
[2013-01-29 02:05:10 -0500] segv: more like it
[2013-01-29 02:05:20 -0500] jtimberman: lol
[2013-01-29 02:05:27 -0500] jtimberman: mortal apt preferences for pinning?
[2013-01-29 02:05:32 -0500] jtimberman: :-|
[2013-01-29 02:05:32 -0500] segv: yes
[2013-01-29 02:05:40 -0500] jtimberman: pinning always makes my brain hurt
[2013-01-29 02:05:45 -0500] segv: yes it does :(
[2013-01-29 02:05:47 -0500] segv: but I has to do it.
[2013-01-29 02:07:34 -0500] jtimberman: http://jtimberman.housepub.org/blog/2012/12/13/cookbook-integration-testing-with-real-examples/
[2013-01-29 02:07:52 -0500] segv: Thanks for the link
[2013-01-29 02:07:58 -0500] jtimberman: TL;DR, Recipe: apt_test::lwrps section
[2013-01-29 02:08:10 -0500] segv: We need to impliment some more testing internally
[2013-01-29 02:10:52 -0500] jsegura: Morning all
[2013-01-29 02:18:11 -0500] josephholsten_: while we're talking testing, anyone know what I need to do to get tests into my jamie-ci setup?
[2013-01-29 02:19:13 -0500] josephholsten_: bats, minitest whatever
[2013-01-29 02:21:37 -0500] Majost: Is it possible to pin a cookbook version in a role?
[2013-01-29 02:23:14 -0500] Majost: and if so.. how?
[2013-01-29 02:25:27 -0500] bluepojo: Majost: you can specify which cookbook, but not which version
[2013-01-29 02:25:44 -0500] bluepojo: afaik
[2013-01-29 02:25:48 -0500] Majost: np
[2013-01-29 02:25:51 -0500] Majost: thanks
[2013-01-29 02:25:57 -0500] bluepojo: the version lock still has to be in the environment
[2013-01-29 02:26:05 -0500] Majost: ahhh
[2013-01-29 02:26:24 -0500] jtimberman: i seem to recall a feature that added version to the run list items
[2013-01-29 02:26:35 -0500] bluepojo: oh yeah?
[2013-01-29 02:28:45 -0500] josephholsten_: I remember being able to query the version for items in the run list, but I didn't know there was a way to set them
[2013-01-29 02:29:18 -0500] jtimberman: feature: http://tickets.opscode.com/browse/CHEF-1423
[2013-01-29 02:29:47 -0500] jtimberman: http://wiki.opscode.com/display/chef/Version+Constraints#VersionConstraints-CookbookVersionsinRunListItems
[2013-01-29 02:30:03 -0500] josephholsten_: awesome!
[2013-01-29 02:30:08 -0500] jtimberman: oh - it's also on the docs site http://docs.opscode.com/essentials_cookbook_versions_run_lists.html
[2013-01-29 02:41:08 -0500] aboudreault: I have added build-essential in my dependency section of metadata.json, should include_recipe "build-essential" work in my default.rb ?
[2013-01-29 02:42:12 -0500] josephholsten_: yes
[2013-01-29 02:42:25 -0500] aboudreault: emm
[2013-01-29 02:42:27 -0500] josephholsten_: also, you should switch from metadata.json to metadata.rb
[2013-01-29 02:42:38 -0500] aboudreault: json is deprecated?
[2013-01-29 02:43:05 -0500] josephholsten_: not exactly, but most people prefer ruby
[2013-01-29 02:43:23 -0500] aboudreault: ok, let me try that.
[2013-01-29 02:43:26 -0500] jtimberman: aboudreault: the json is generated from the .rb
[2013-01-29 02:43:45 -0500] jtimberman: aboudreault: and the .rb gives you: less syntax to worry about, and the handiness of Ruby :)
[2013-01-29 02:44:07 -0500] jtimberman: (with json there's "a lot" "more" "quotes" and "don't, forget, your, commas"
[2013-01-29 02:44:07 -0500] aboudreault: right. even if I don't know ruby ;)
[2013-01-29 02:44:31 -0500] chefer: Hi All, How do you guys do deployments in Chef/Puppet world , Do you use pull based deployment (with deploy resource) or use something like capistrano for push based deployment?
[2013-01-29 02:44:53 -0500] aboudreault: what's the url you usually download the cookbooks.tar.gz file?
[2013-01-29 02:45:33 -0500] josephholsten_: chefer: we (simplymeasured) use both. we're not quite comfortable doing database migrations with chef yet, so those deploys happen via cap or rundeck
[2013-01-29 02:46:04 -0500] jsegura: chefer: yesteday we had a foodfightshow dedicated to this
[2013-01-29 02:46:21 -0500] josephholsten_: aboudreault: I don't quite understand, could you rephrase?
[2013-01-29 02:46:31 -0500] jsegura: chefer: http://foodfightshow.org/2013/01/application-deployment.html
[2013-01-29 02:47:05 -0500] aboudreault: josephholsten_, I think the reason why it doesn't find build-essential is because it is not in my cookbook.tar.gz, which I download from vagrant site.
[2013-01-29 02:47:31 -0500] aboudreault: josephholsten_, you normally always download recipes manually?
[2013-01-29 02:47:44 -0500] josephholsten_: no.
[2013-01-29 02:48:30 -0500] josephholsten_: I use either chef-server (which I push the cookbooks too), or berkshelf + vagrant.
[2013-01-29 02:50:05 -0500] aboudreault: I see
[2013-01-29 02:50:24 -0500] josephholsten_: I'm sorry to throw all these things at you at once.
[2013-01-29 02:50:50 -0500] aboudreault: np ;)
[2013-01-29 02:50:52 -0500] josephholsten_: I remember how maddeningly frustrating it was to get things working the first time.
[2013-01-29 02:51:17 -0500] josephholsten_: are you running chef-solo?
[2013-01-29 02:51:22 -0500] aboudreault: I think that I'll just download the cookbook build-essential manually  in my cookbooks folder for now.
[2013-01-29 02:51:32 -0500] aboudreault: Yes, doing some test with vagrant + chef solo
[2013-01-29 02:52:03 -0500] josephholsten_: awesome. berkshelf will make your life easier.
[2013-01-29 02:52:22 -0500] josephholsten_: are you writing a single cookbook?
[2013-01-29 02:53:04 -0500] josephholsten_: if so, you should be able to follow along with http://berkshelf.com
[2013-01-29 02:53:25 -0500] aboudreault: Mostly yes, I want to create a single cookbook (or should I say recipe) to create a complete development environment for our software.
[2013-01-29 02:55:03 -0500] aboudreault: I worked perfectly with the cookbook installed in my path. (even without the metadata.rb)
[2013-01-29 02:55:12 -0500] josephholsten_: high level: create a cookbook, run `berks init` on it, cd into it and run `vagrant up`
[2013-01-29 02:55:20 -0500] aboudreault: I will read the berkshelf page tomorrow.
[2013-01-29 02:55:55 -0500] josephholsten_: it'll manage all your dependencies and make sure they get loaded into vagrant
[2013-01-29 02:56:40 -0500] aboudreault: josephholsten_, it uses the metadata.rb ?
[2013-01-29 02:57:20 -0500] josephholsten_: yes. by default, `berks install` will install all your dependencies
[2013-01-29 02:57:43 -0500] aboudreault: ok. cool. will give it a try
[2013-01-29 02:57:49 -0500] bluepojo: aboudreault: http://vialstudios.com/guide-authoring-cookbooks.html
[2013-01-29 02:57:56 -0500] aboudreault: josephholsten_, thanks for your time!
[2013-01-29 02:58:09 -0500] bluepojo: This is a guide based on how we write cookbooks with Berkshelf
[2013-01-29 02:58:26 -0500] bluepojo: Jamie, one of the other authors of Berkshelf, wrote it
[2013-01-29 02:58:44 -0500] aboudreault: bluepojo, excellent! That will be very useful.
[2013-01-29 02:59:07 -0500] josephholsten_: bluepojo: are you guys running jamie-ci now?
[2013-01-29 02:59:25 -0500] bluepojo: no, though we did laugh that Fletcher named it Jamie-CI
[2013-01-29 02:59:42 -0500] bluepojo: though he swears it wasn't named after our Jamie
[2013-01-29 02:59:56 -0500] samkottler: btm: hey, pm?
[2013-01-29 03:00:04 -0500] bluepojo: we will probably use it in the near future, tho, it looks good
[2013-01-29 03:00:15 -0500] josephholsten_: k, reset mentioned fnichol's project to me. it does play nice with berks
[2013-01-29 03:00:17 -0500] bluepojo: we'll see where it fits in
[2013-01-29 03:00:33 -0500] bluepojo: ah yeah
[2013-01-29 03:02:28 -0500] jtimberman: ya
[2013-01-29 03:02:30 -0500] jtimberman: good stuff :)
[2013-01-29 03:02:36 -0500] jtimberman: so is this: curl -L "https://www.opscode.com/chef/install.sh" | sudo bash -s -- -v 11.0.0.beta.1
[2013-01-29 03:02:47 -0500] josephholsten_: oooh.
[2013-01-29 03:02:53 -0500] bluepojo: ooooh
[2013-01-29 03:03:11 -0500] josephholsten_: I need to set up a local omnibus builder to play with some of this stuff.
[2013-01-29 03:05:04 -0500] jtimberman: btm just posted to the users list a bit ago about that being available
[2013-01-29 03:17:16 -0500] aboudreault: any ubuntu user here? trying the apt cookbook. and getting: The repository file to create is nil, cannot continue.
[2013-01-29 03:17:32 -0500] aboudreault: I took the example from the cookbooks page.
[2013-01-29 03:24:25 -0500] wassy121_: Hi chef friends!  Is there a good way to run exception handling off an Execute resource?
[2013-01-29 03:24:28 -0500] tomdzk: aboudreault: you have a gist ?
[2013-01-29 03:24:58 -0500] aboudreault: tomdzk, probably, If I have a github account?
[2013-01-29 03:25:33 -0500] tomdzk: aboudreault: don't need one, https://gist.github.com
[2013-01-29 03:27:04 -0500] aboudreault: tomdzk, https://gist.github.com/4661554
[2013-01-29 03:28:48 -0500] tomdzk: aboudreault: can you run this with debug (chef.log_level = :debug) ?
[2013-01-29 03:28:57 -0500] aboudreault: sure
[2013-01-29 03:30:34 -0500] aboudreault: tomdzk, https://gist.github.com/4661571
[2013-01-29 03:34:20 -0500] tomdzk: aboudreault: what is the version of your apt cookbook ?
[2013-01-29 03:34:35 -0500] aboudreault: latest one. from the site. 1.8.4
[2013-01-29 03:36:39 -0500] tomdzk: aboudreault: it looks like it couldn't create the /etc/apt/sources.list.d/ubuntugis-unstable.list file
[2013-01-29 03:37:25 -0500] aboudreault: yeah, that's what I've seen in the code.
[2013-01-29 03:37:43 -0500] aboudreault: tomdzk, gtg will try 1.8.2 tomorrow
[2013-01-29 03:38:24 -0500] tomdzk: aboudreault: check if it actually executed the recipe_eval section, e.g. whether it registered the key, cerated that list file etc.
[2013-01-29 04:09:36 -0500] atrius: anyone using chef with RVM? not using chef to deploy RVM, but using chef _under_ rvm
[2013-01-29 04:15:41 -0500] atrius: i've been trying to add paths to GEM_PATH to try and get RVM to use the system gems, but it seems to just ignore the setting
[2013-01-29 05:55:24 -0500] a_a_g: in the chef-client cookbook, if I set interval to nil, will it disable periodic runs of chef-client via the service?
[2013-01-29 06:56:10 -0500] benregn: hey, for some reason the postgres cookbook doesn't override the default pg_hba.conf. Using chef-solo in Vagrantfile
[2013-01-29 10:18:41 -0500] pixie79: hi all, I have been extending the authconfig cookbook and guess i have made a typo but i have no idea where, I am getting the error "exception": "ArgumentError: Attribute ldap is not defined!"
[2013-01-29 10:19:08 -0500] pixie79: is there a way to tell on what line of the recpie i am calling that argument so i can see what is missed
[2013-01-29 10:19:21 -0500] pixie79: as the word ldap appears many times in the authconfig cookbook
[2013-01-29 10:20:13 -0500] withnale: Is it possible to run chef over a tunnel...? when I run 'knife ssh node:host1 sudo chef-client' I get connection refused...
[2013-01-29 10:20:40 -0500] withnale: ... however when I do a knife tmux and sudo chef-client interactively it works.
[2013-01-29 10:21:08 -0500] withnale: (I've set up the necessary RemoteForward of port 4000 in my ssh config
[2013-01-29 10:34:34 -0500] daxroc: Morning all
[2013-01-29 10:35:58 -0500] daxroc: I'm failing to add a node to the server using knife configure -i, From what I can tell the server does create an entry in the clients list with the key but the key.pem is not created on the client
[2013-01-29 10:51:42 -0500] AikiLinux: for doing a conditional on a role,should the string be in single quotes or double ?
[2013-01-29 11:12:47 -0500] daxroc: Can anyone point me in the right direction, http://pastebin.ca/2308513 can't get the client to authenticate tho it does create an entry on the server ?
[2013-01-29 11:41:46 -0500] Afterglow: daxroc: try looking at the error from the servers end there should be logs there that will tell you what the error was
[2013-01-29 11:47:02 -0500] daxroc: Afterglow: validation.pem was empty ... can't take anything for granted :D
[2013-01-29 11:47:31 -0500] Afterglow: that would do it
[2013-01-29 11:47:49 -0500] daxroc: Is there a documented proceedure for recreating it
[2013-01-29 11:57:03 -0500] AikiLinux: can i determine a node's role in the run like this "if node['role'] == 'httpd' " ?
[2013-01-29 12:00:19 -0500] daxroc: Afterglow: any attempt on the web-ui gets an econrefused 500 now, not sure what way this server was installed.
[2013-01-29 12:02:53 -0500] pixie79: hi, does anyone use the recipe[user::databag]. I have created a databag with my users in, but i cant seem to workout how to get it to work, the users exists due to ldap, i just need their home dir's created along with their sshkeys, I have tried the following https://gist.github.com/4663746 but it is objecting to none['user']
[2013-01-29 12:03:23 -0500] pixie79: which i tried to create as a role so i can use it to create the same users on many nodes ?
[2013-01-29 12:03:44 -0500] pixie79: any ideas or suggestions as to my error ?
[2013-01-29 12:04:03 -0500] djsecilla: hi, can anyone pint me to some documentation about chef + nexus for java automatic deployment
[2013-01-29 12:04:48 -0500] djsecilla: pretty m,uch all the documentation I am finding refers to examples retrieving source code from a SCM repository
[2013-01-29 12:05:01 -0500] perfabio: hi, I'm having a problem with this file https://github.com/rcbops-cookbooks/glance/blob/master/providers/image.rb Anyone can help me understanding how @pass = new_resource.keystone_pass works. I'm using rackspace, I've updated admin's password but when I execute chef-client it's still using old password
[2013-01-29 12:18:31 -0500] perfabio: hi, I'm having a problem with this file https://github.com/rcbops-cookbooks/glance/blob/master/providers/image.rb Anyone can help me understanding how @pass = new_resource.keystone_pass works. I'm using rackspace, I've updated admin's password but when I execute chef-client it's still using old password
[2013-01-29 12:27:56 -0500] a_a_g: ec2-54-234-14-84.compute-1.amazonaws.com Could not retrieve mirrorlist http://repo.us-east-1.amazonaws.com/latest/main/mirror.list error was
[2013-01-29 12:27:57 -0500] a_a_g: ec2-54-234-14-84.compute-1.amazonaws.com 14: PYCURL ERROR 6 - "Couldn't resolve host 'repo.us-east-1.amazonaws.com'"
[2013-01-29 12:28:14 -0500] a_a_g: anyone else facing issues?
[2013-01-29 12:43:43 -0500] f1gjam: hey guys, I have a question, if I wanted to use a community cookbook, however I dont want to mess around with that cookbook and I want to leave it as it is and only use it like library in my own cookbook is that possible?? (btw I am new to chef)
[2013-01-29 12:46:04 -0500] daxroc: I'm a little unclear on how you manage the VC repository, do you use knife to manage it or can you use svn update to pull in all changes?
[2013-01-29 13:24:58 -0500] aboudreault: looks like the 1.8.4 version of the apt cookbook is broken, with the same definition, can't get it to work. just tried 1.8.0 works perfectly.
[2013-01-29 13:42:17 -0500] al-maisan: Hello there! Can I set an environment variable to let knife know the full path of the chef-repo directory?
[2013-01-29 14:16:32 -0500] aboudreault: anyone familiar with berkshelf?
[2013-01-29 14:17:07 -0500] aboudreault: not sure what I'm doing wrong there, but getting `require': cannot load such file -- berkshelf/vagrant (LoadError), on bundle exec vagrant up
[2013-01-29 14:34:36 -0500] chris__: No strictly a chef question : What's the best way to provision a windows laptop that contains all the sofware and configuration that an employee needs for their job?   Most of our employees use the same software (Thunderbird, Openvpn, Word).  Ideally It would only take a few minutes to create a windows laptop from scratch.
[2013-01-29 14:35:45 -0500] cwj: aboudreault: your Gemfile lists berkshelf?
[2013-01-29 14:36:38 -0500] aboudreault: cwj, I see this line yes. gem 'berkshelf'. In fact, berkshelf itself generated this Gemfile
[2013-01-29 14:37:50 -0500] cwj: what version of berkshelf is reported when you run 'bundle exec gem list | grep berkshelf' ?
[2013-01-29 14:41:06 -0500] pixie79: is there a cookbook that disables certain systems defaults - i am sure i remember seeing one but i cant think where, i.e auditd and selinux
[2013-01-29 14:48:13 -0500] fromonesrc: I have a directory of files I need to symlink after a recipe executes, what is a good way to go about this? ruby_block executes at convergence and plain ruby at compilation (which are both too early)
[2013-01-29 14:48:43 -0500] fromonesrc: I know of the link resource but I am looping through a directory's contents and linking each
[2013-01-29 14:51:48 -0500] aboudreault: cwj, 1.1.2
[2013-01-29 14:52:21 -0500] cwj: aboudreault: weird, that version should work
[2013-01-29 14:53:21 -0500] aboudreault: cwj, just tried sudo bundle exec vagrant up. It worked... but I shouldn't need sudo IIRC.
[2013-01-29 14:53:35 -0500] cwj: nope, no sudo required
[2013-01-29 14:54:52 -0500] cwj: maybe run bundle install again for good measure?
[2013-01-29 14:56:27 -0500] aboudreault: cwj, no luck.
[2013-01-29 14:57:03 -0500] cwj: weird
[2013-01-29 14:57:14 -0500] aboudreault: cwj, got it!
[2013-01-29 14:57:59 -0500] aboudreault: cwj, I removed my vagrant installation I did with the deb package.
[2013-01-29 14:58:02 -0500] aboudreault: and seems to work now
[2013-01-29 15:02:51 -0500] cwj: ah ok
[2013-01-29 15:03:06 -0500] aboudreault: not sure why it was in conflict... it was the same version
[2013-01-29 15:03:43 -0500] cwj: well the vagrant executable installed by the deb package probably couldn't find berkshelf in its path
[2013-01-29 15:05:08 -0500] aboudreault: cwj, possible. it works! nice. will be able to work on my cookbook :)
[2013-01-29 15:05:50 -0500] cwj: very good
[2013-01-29 15:06:52 -0500] zeroXten: stupid question, what is the best way of specifying a version when doing include_recipe? By using recipe[name@version] in the role? can it go after the recipe doing the include?
[2013-01-29 15:36:28 -0500] gondoi: mattray: you around yet?
[2013-01-29 15:38:26 -0500] gondoi: on knife plugins and knife in general, can someone tell my how the :proc parameter works in the options code?
[2013-01-29 15:38:29 -0500] cwj: zeroXten: im not aware of a way to do that, i think you'd need to depend on environments for cookbook version locking
[2013-01-29 15:38:39 -0500] gondoi: or point me in the right direction on some ruby docs to help explain it?
[2013-01-29 15:39:17 -0500] gondoi: for example: https://github.com/opscode/knife-openstack/blob/master/lib/chef/knife/openstack_base.rb#L42
[2013-01-29 15:40:07 -0500] cwj: zeroXten: because by the time chef gets to evaluating recipe code, it has already retrieved the versions its going to run from the chef server (or local disk)
[2013-01-29 15:59:38 -0500] mattray: gondoi: what's up?
[2013-01-29 16:00:11 -0500] gondoi: i'm trying to figure out this option flag business in the knife-openstack plugin
[2013-01-29 16:00:26 -0500] gondoi: i'm too weak in the ways of ruby to figure it out :(
[2013-01-29 16:00:46 -0500] zeroXten: thanks cwj
[2013-01-29 16:00:57 -0500] cwj: zeroXten: you bet
[2013-01-29 16:01:07 -0500] gondoi: i can't figure out how to make the variable a default value I set default => false, but in debug its empty or nil
[2013-01-29 16:01:26 -0500] gondoi: i finally think I figured out the proc business though
[2013-01-29 16:04:01 -0500] BryanWB__: ohai chefs!
[2013-01-29 16:06:01 -0500] cwj: ohai bryan
[2013-01-29 16:08:47 -0500] BryanWB__: cwj: ohai!
[2013-01-29 16:15:20 -0500] gondoi: mattray: if I don't pass the flag defined here, the default value is _not_ set
[2013-01-29 16:15:21 -0500] gondoi: https://gist.github.com/4665441
[2013-01-29 16:15:58 -0500] mattray: could you put that in a ticket and assign it to me?
[2013-01-29 16:16:20 -0500] gondoi: sure
[2013-01-29 16:20:41 -0500] gondoi: mattray: I don't see where I can assign it to you KNIFE-225
[2013-01-29 16:20:57 -0500] mattray: I'll do it then
[2013-01-29 16:23:15 -0500] gondoi: mattray: also created KNIFE-226, but I have working code for that
[2013-01-29 16:23:35 -0500] gondoi: should I just submit a pull request with [KNIFE-226] in the subject?
[2013-01-29 16:23:48 -0500] mattray: that works
[2013-01-29 16:24:04 -0500] mattray: I'm on knife-openstack stuff right now, so it's most likely I'll be the one fixing them
[2013-01-29 16:34:42 -0500] gondoi: okay
[2013-01-29 16:35:02 -0500] gondoi: mattray: i'm _this_ close to fixing the insecure one I just can't figure out the option business
[2013-01-29 16:35:24 -0500] gondoi: all the rest of the code is there
[2013-01-29 16:35:24 -0500] mattray: well, I'm still over in knife-hp cleaning up over there, so I'll let you know when I'm looking at it
[2013-01-29 16:37:07 -0500] a_a_g: at the enf of my converge, knife node show reports an empty runlist and roles list. but the converge is successful. any ideas why this might be happening?
[2013-01-29 16:37:26 -0500] withnale: Has anyone seen a problem where search does not respond to 'name:*' or 'platform:*' but can be seen with '*:*' ?
[2013-01-29 16:48:36 -0500] kryptek: Anybody else ever have problems with chef not being able to restart apache?  It keeps dying out when trying to restart it, saying the port is in use.  But at that point I can't even service stop httpd because the process is dead or something
[2013-01-29 16:48:47 -0500] kryptek: I'm force to manually killall httpd and then start httpd myself
[2013-01-29 16:51:58 -0500] behemphi: Ohai Chefs.  I have a role issue and would like to either ask your advice directly or have you point me to a place where I can read more about the problem:  I have a machine that is described by the role "console-server"  it contains several cookbooks pinned to version 2.4.9 of our stuff.  In dev, I am adding a new cookbook to the role called "python-celery".  The trouble is that if I add the cookbook to the role it will be appl
[2013-01-29 16:54:35 -0500] a_a_g: behemphi: create a noop version of the cookbook and pin other environments to that version. then add the working version to dev and then add it to the role
[2013-01-29 16:54:47 -0500] cheesepl_: behemphi: some of that was cut off but I'm thinking environments would be in order
[2013-01-29 16:55:46 -0500] behemphi: @cheesepl_   In dev, I am adding a new cookbook to the role called "python-celery". The trouble is that if I add the cookbook to the role it will be applied to my production servers before I would like it to be. What are some of the ways for dealing with this problem. I fear I have not conceptualized the use of roles properly. Thanks for the advice!!
[2013-01-29 16:55:53 -0500] behemphi: and thanks for the answers!
[2013-01-29 16:56:14 -0500] behemphi: is there a spiffy blog post somewhere out there on groovy ways to use roles?
[2013-01-29 16:56:18 -0500] cheesepl_: behemphi: that is exactly what environments are for
[2013-01-29 16:56:23 -0500] cheesepl_: use them in conjunction with roles
[2013-01-29 16:56:35 -0500] cheesepl_: environements pin cookbok versions
[2013-01-29 16:56:47 -0500] behemphi: So if I, in my env say python-celery==2.4.10
[2013-01-29 16:56:56 -0500] cheesepl_: http://fishnix.tumblr.com/post/20145901852/chef-environments-are-awesome
[2013-01-29 16:57:10 -0500] behemphi: but in the role the cookbook python-celery does not exist, won't the chef-client fail b/c it cannot find the cookbook?
[2013-01-29 16:57:52 -0500] cheesepl_: you will need to rearrange the data such that the pinning is done by the env, not the cookbook
[2013-01-29 16:58:49 -0500] a_a_g: behemphi: how do you differentiate your dev boxes from production?
[2013-01-29 16:59:12 -0500] a_a_g: do you have different environments?
[2013-01-29 16:59:18 -0500] behemphi: a_a_g is use the enviornments "dev" and "prod" to keep things simply
[2013-01-29 16:59:28 -0500] behemphi: and I set the cookbook versions in the envionrment
[2013-01-29 16:59:29 -0500] gchristensen: likewise, but I add in a third for staging
[2013-01-29 16:59:43 -0500] behemphi: but use roles to set the runlist for each kind of node in the environement
[2013-01-29 16:59:55 -0500] behemphi: one role for each "kind" (e.g. web-host, db-host)
[2013-01-29 16:59:59 -0500] cheesepl_: the roles can be common to multiple envs
[2013-01-29 17:00:14 -0500] a_a_g: ok, so as I said - create a version of the new cookboko with an empty default.rb. upload it. pin prod to that version. then create the required version and pin dev to it. then add it to the role
[2013-01-29 17:00:23 -0500] cheesepl_: so same role in different envs would get you different versions of a cookbook
[2013-01-29 17:00:48 -0500] behemphi: yes, indeed i have prod_tiny, prod_small, prod_large production enviroments so that i can set things liek apache settings/mysql settings based on size
[2013-01-29 17:01:05 -0500] behemphi: I was just trying to keep the question simplified :-)
[2013-01-29 17:01:48 -0500] a_a_g: empty default.rb and empty evironment file. a no-op version basically
[2013-01-29 17:02:47 -0500] a_a_g: behemphi: does that solve your problem?
[2013-01-29 17:02:51 -0500] behemphi: @cheesepl_ that is correct.  and the problem I am having a hard time wrapping my head around is the "no cookbook" version (nil case) if you will.  I thought of a_a_g solution but it felt a bit hackish to backport an empty cookbook like that.  However if that is the common way to do things, I am good with it
[2013-01-29 17:03:18 -0500] behemphi: I am with you totally a_a_g.  Am I beign to "pure" in thinking that is more a work around than a solution?
[2013-01-29 17:03:46 -0500] a_a_g: behemphi: i dont think its a common way, but i create noop versions for all cookbooks when i begin
[2013-01-29 17:04:09 -0500] a_a_g: adding a cookbook is the easy part, removing it later is worse. the no-op version helps a lot there
[2013-01-29 17:05:02 -0500] behemphi: hmm, that is a part of this I had not yet considered a_a_g.  Do you then use the version 0.0.0 to signify a no-op version?
[2013-01-29 17:07:06 -0500] a_a_g: yes, I use 0.0.0
[2013-01-29 17:07:17 -0500] behemphi: well spiffy!
[2013-01-29 17:07:38 -0500] behemphi: Thanks for the thoughts and the link @a_a_g & @cheesepl_
[2013-01-29 17:09:15 -0500] cheesepl_: a_a_g: I like that noop ida, may have to borrow ;)
[2013-01-29 17:37:04 -0500] awgross: any recommendations on a sysctl cookbook to use?  There are quite a few
[2013-01-29 17:37:16 -0500] awgross: unsure if the opscode one is best
[2013-01-29 17:41:20 -0500] awgross: opscode community site cookbook*
[2013-01-29 18:22:17 -0500] rava: hey guys, am i wrong in thinking omnibus chef installed knife should be using the libraries installed via the omnibus embedded gem command?
[2013-01-29 18:25:07 -0500] cwj: rava: it should, does 'which knife' point to the omnibus executable?
[2013-01-29 18:25:14 -0500] rava: yes
[2013-01-29 18:25:47 -0500] rava: but if i try to run the knife command to get a node list i'm getting unable to load file and require exceptions with paths to the system ruby install
[2013-01-29 18:26:29 -0500] cwj: even if you specify the full path to the omnibus knife executable?
[2013-01-29 18:26:55 -0500] rava: yes, and i haven't installed any chef packages outside of the omnibus library
[2013-01-29 18:27:08 -0500] rava: s/library/package/
[2013-01-29 18:28:25 -0500] rava: wondering if it's rbenv's fault
[2013-01-29 18:29:02 -0500] cwj: if you open the knife executable in an editor, what is the path to the ruby executable in the hashbang
[2013-01-29 18:29:44 -0500] rava: cwj: cleaning out all the variables, i had forgotten i had rbenv installed so going to clean that up and see where it gets me
[2013-01-29 18:29:44 -0500] cwj: should be #!/opt/chef/embedded/bin/ruby
[2013-01-29 18:30:19 -0500] cwj: i guess its possible that rbenv is involved somehow, but i use it myself and im not sure how that would be the case if the hashbang is correct
[2013-01-29 18:33:16 -0500] rava: cwj: the shebang has the right path, but it's still looking for the system 1.8 version of ruby..
[2013-01-29 18:33:25 -0500] wdpro_kevin: Anyone remember seeing a recent blog post or article about moving your cookbooks to separate git repos?
[2013-01-29 18:33:42 -0500] wdpro_kevin: I just saw it last week and now I can't find the link
[2013-01-29 18:34:04 -0500] cwj: wdpro_kevin: jtimberman wrote such an article http://jtimberman.housepub.org/blog/2012/11/19/chef-repository-berkshelf-conversion/
[2013-01-29 18:35:48 -0500] rava: cwj: http://pastebin.com/eeqFXz3f
[2013-01-29 18:36:49 -0500] wdpro_kevin: Thanks cwj. That might be it I remember something very specific. Maybe it was mentioned on foodfight
[2013-01-29 18:36:51 -0500] cwj: rava: and you're sure /usr/local/bin/knife is a symlink to /opt/chef/bin/knife
[2013-01-29 18:37:13 -0500] cwj: wdpro_kevin: no problem
[2013-01-29 18:38:39 -0500] rava: bah, looks like when i did some plugin installs knife got installed to the system and overwrote that guy. i got this now, thanks
[2013-01-29 18:38:52 -0500] cwj: np
[2013-01-29 18:38:53 -0500] wdpro_kevin: bingo. Thank you sethvargo: http://sethvargo.com/20130102/moving-to-individual-cookbooks/
[2013-01-29 18:41:13 -0500] rava: i really gotta remember to check and recheck my assumptions, that simple path issue ate up over 2 hours of "wtf" time
[2013-01-29 18:43:21 -0500] rava: \q
[2013-01-29 18:58:53 -0500] riceo: I've got a recipe that installs a few apt packages via the package resource, then calls the execute resource to a bash script for updating configuration (script is update-exim4.conf, in case anyone is familiar with it). The chef run always dies at the execute, stating the script doesn't exist, but it should be created once the packages have installed.
[2013-01-29 18:59:03 -0500] riceo: I think my problem is either the package installation is failing, or the execute resource is called before the package installation has finished. I can't see anything about package installation failures in the run log. The package isn't installed, but I'm not sure if this is because the chef run is being killed by the error.
[2013-01-29 18:59:04 -0500] riceo: Is it possible for an execute resource to be called before a package resource, out of sequence with the recipe file?
[2013-01-29 18:59:51 -0500] riceo: I can manually install the packages via apt, without issue.
[2013-01-29 19:01:08 -0500] josephholsten: riceo: that doesn't sound like a normal error from the execute resource. could you pastie/gist us that portion of the recipe?
[2013-01-29 19:01:33 -0500] occupant: if you exec a command that doesn't exist, that's what I would expect actually
[2013-01-29 19:02:31 -0500] josephholsten: it sounds like the error from a file or template resource
[2013-01-29 19:02:56 -0500] josephholsten: but either log output & the recipe would help
[2013-01-29 19:04:47 -0500] riceo: recipe: https://gist.github.com/f896dc61eadccb5ce0f5
[2013-01-29 19:04:50 -0500] riceo: run log: https://gist.github.com/d4207d4899f7755a1ea6
[2013-01-29 19:05:55 -0500] josephholsten: ah, I was wrong. I'd suggest you give the full path to update-exim4.conf
[2013-01-29 19:05:59 -0500] riceo: I went a bit overboard with the package definitions, for debugging ;)
[2013-01-29 19:06:13 -0500] riceo: it doesn't exist on the server
[2013-01-29 19:06:41 -0500] riceo: I'm just not sure if the installation is being killed by the error, or if it's erroring because the installation silently failed
[2013-01-29 19:07:24 -0500] riceo: it won't uninstall the packages on error, right?
[2013-01-29 19:07:39 -0500] josephholsten: ah. you're right. it isn't applying the package resources. Note line 76, there's no packages immediately before it
[2013-01-29 19:08:18 -0500] occupant: hm, how is it getting away without installing the packages? a case statement should break if it doesn't match anything
[2013-01-29 19:08:20 -0500] josephholsten: sounds like your platform isn't ubuntu or debian. which sounds odd.
[2013-01-29 19:08:38 -0500] riceo: I've tried removing the platform check
[2013-01-29 19:09:55 -0500] riceo: The run log gist I linked starts with "processing packages" for the exim packages
[2013-01-29 19:10:14 -0500] riceo: The sequence is pretty confusing
[2013-01-29 19:10:33 -0500] josephholsten: let me add a little exception handling
[2013-01-29 19:11:07 -0500] riceo: thanks!
[2013-01-29 19:11:42 -0500] josephholsten: try this, it should let us know what the platform is: https://gist.github.com/6b0978704425d9e807b9
[2013-01-29 19:15:52 -0500] occupant: is there a chef forum that people actually use unlike the opscode one?
[2013-01-29 19:16:10 -0500] iverson0881: IRC is probably the way to go
[2013-01-29 19:16:12 -0500] josephholsten: there's an opscode forum?
[2013-01-29 19:16:15 -0500] occupant: see!
[2013-01-29 19:16:55 -0500] occupant: it's a super-basic message board. default sort is by views, so the same stale topics stay at the top. and tons of people ask questions and hardly ever get a reply.
[2013-01-29 19:17:16 -0500] riceo: @josephholsten just tried that - it's definitely passing the when. Your message wasn't logged
[2013-01-29 19:17:48 -0500] josephholsten: hmm. that's insane.
[2013-01-29 19:18:02 -0500] kaerast: I started using test kitchen on a new cookbook today and can't work out where the simpletest files are supposed to go or how I make kitchen actually load them. The documentation isn't entirely clear
[2013-01-29 19:18:50 -0500] kaerast: if I've got a foo::bar recipe, where do I put my simpletest tests and how do I load them with test kitchen?
[2013-01-29 19:18:56 -0500] riceo: Seeing "[Tue, 29 Jan 2013 19:14:54 +0000] INFO: Processing package[exim4-base] action install (exim4-light::default line 25)" too
[2013-01-29 19:19:18 -0500] josephholsten: riceo: are you using chef server/client or solo?
[2013-01-29 19:19:23 -0500] riceo: server
[2013-01-29 19:19:29 -0500] riceo: hosted
[2013-01-29 19:19:56 -0500] tomdzk: riceo: could you run this with debug logging ?
[2013-01-29 19:20:24 -0500] josephholsten: riceo: oh, those are at the top. the execute is happening via notification. I see.
[2013-01-29 19:20:51 -0500] josephholsten: but you're saying the packages aren't installed after this run, right?
[2013-01-29 19:21:27 -0500] riceo: that's correct
[2013-01-29 19:21:35 -0500] tomdzk: riceo: what happens if you remove the "--force-yes" option from the package resources ? maybe you have a hidden apt error ?
[2013-01-29 19:22:16 -0500] riceo: tomdzk: I'll run with -V. I added the --force-yes as part of the debugging, but perhaps I've caused another problem. I'll try without them
[2013-01-29 19:26:00 -0500] riceo: heh, no change at all. -V didn't seem to log any further info
[2013-01-29 19:26:12 -0500] jtimberman: occupant: are you talking about the questions/ideas sections on the community site?
[2013-01-29 19:26:36 -0500] jtimberman: you should use the chef mailing list: lists.opscode.com :)
[2013-01-29 19:28:07 -0500] tomdzk: riceo: chef-client -l debug
[2013-01-29 19:28:18 -0500] riceo: ah, thanks
[2013-01-29 19:36:41 -0500] riceo: woah, ok. it looks like exim is being installed
[2013-01-29 19:36:46 -0500] riceo: then postfix is uninstalling exim :|
[2013-01-29 19:36:52 -0500] josephholsten: oh my.
[2013-01-29 19:38:20 -0500] riceo: and postfix is in apt package build-essential
[2013-01-29 19:38:40 -0500] riceo: ha, amazing. thanks for the help guys. I'm going to jump out of the window now. :)
[2013-01-29 19:40:59 -0500] makerbreakr: can i duplicate a databag item?
[2013-01-29 19:41:02 -0500] makerbreakr: via knife
[2013-01-29 19:43:51 -0500] PapaSierra_: i was told that php shouldn't be installed if php-fpm is to be installed because php-fpm includes php. assuming that's true, i removed the php cookbook from my runlist and added php5-fpm. aside from that nothing is different. however, now i'm getting this when i provision: http://www.hastebin.com/raw/yifogidevo
[2013-01-29 19:48:20 -0500] jtnz: Hi, does anyone know how I can access the node in a library? I've tried good ol' node and @node with no luck...
[2013-01-29 19:57:22 -0500] kallistec: jtnz: you have to pass it in
[2013-01-29 19:58:29 -0500] jtnz: kallistec, Ok, I thought that might be the case ;) Thanks
[2013-01-29 20:03:05 -0500] redsamh: hello
[2013-01-29 20:03:22 -0500] redsamh: i am doing a poc using chef and puppet for a client
[2013-01-29 20:03:28 -0500] gchristensen: I have a server with the role "foobar" and that role includes the "baz" role - is there a way to have searched for servers of the baz rule include the foobar role?
[2013-01-29 20:03:30 -0500] redsamh: having some issues with the 403 authorization
[2013-01-29 20:04:07 -0500] redsamh: tried solution with  - http://www.fidian.com/problems-only-tyler-has/opscode-chef-rabbitmq, http://lists.opscode.com/sympa/arc/chef/2012-08/msg00109.html, http://stackoverflow.com/questions/11870336/chef-client-connection-errors-after-executing-knife-bootstrap
[2013-01-29 20:04:10 -0500] redsamh: no luck so far
[2013-01-29 20:04:20 -0500] log1kal: gchristensen: knife search "roles:baz" ?
[2013-01-29 20:04:54 -0500] redsamh: in my server log I continue to see the line - merb : chef-server (api) : worker (port 4000) ~ You are not allowed to take this action. - (Merb::ControllerExceptions::Forbidden)
[2013-01-29 20:05:07 -0500] gchristensen: ah! I was searching role:web instead o6f roles:web. thank you for the 's' log1kal
[2013-01-29 20:05:10 -0500] redsamh: I am trying to save a data bag on the client node and the api is failing
[2013-01-29 20:05:12 -0500] log1kal: no prob :)
[2013-01-29 20:05:27 -0500] redsamh: is hacking the place for help on this one?
[2013-01-29 20:07:12 -0500] mattupstate: when did converge_by get added to chef?
[2013-01-29 20:07:59 -0500] mattupstate: getting some errors with some new-ish cookbooks and i'm guessing its not part of chef 10.12.0
[2013-01-29 20:16:04 -0500] cwj: mattupstate: its part of the whyrun functionality released in 10.14.0
[2013-01-29 20:19:53 -0500] mattupstate: cwj: ah
[2013-01-29 20:20:11 -0500] mattupstate: now this is where i'm cluelesswhy are my nodes using 10.12.0?
[2013-01-29 20:20:33 -0500] mattupstate: even brand new ones?
[2013-01-29 20:20:48 -0500] cwj: are you using knife bootstrap to install chef?
[2013-01-29 20:21:51 -0500] cwj: in my experience knife bootstrap will install the same version of chef on the target node that is being used to perform the bootstrap
[2013-01-29 20:21:52 -0500] redsamh: yes
[2013-01-29 20:22:07 -0500] mattupstate: knife ec2 server create...
[2013-01-29 20:22:25 -0500] cwj: same deal there
[2013-01-29 20:22:30 -0500] redsamh: here is the error that I get for the authorization error
[2013-01-29 20:22:32 -0500] redsamh: here it is http://pastebin.com/uwAZ3nqr
[2013-01-29 20:22:48 -0500] mattupstate: cwj: oh, i see
[2013-01-29 20:22:52 -0500] redsamh: these 2 lines:
[2013-01-29 20:22:53 -0500] redsamh: merb : chef-server (api) : worker (port 4000) ~ You are not allowed to take this action. - (Merb::ControllerExceptions::Forbidden)
[2013-01-29 20:22:53 -0500] redsamh: /usr/local/lib/ruby/gems/1.9.1/gems/chef-server-api-10.18.2/app/controllers/application.rb:68:in `is_admin'
[2013-01-29 20:23:07 -0500] mattupstate: cwj: so if my local version is 10.18 it will bootstrap 10.19
[2013-01-29 20:23:08 -0500] mattupstate: err
[2013-01-29 20:23:10 -0500] redsamh: does it mean the node or client should be an admin, I have set it to true as well. It still does not work
[2013-01-29 20:23:11 -0500] mattupstate: 10.18
[2013-01-29 20:23:52 -0500] cwj: mattupstate: thats been my experience yes
[2013-01-29 20:25:30 -0500] mattupstate: cwj: should i be scared about upgrading from 10.12 to 10.14+?
[2013-01-29 20:25:51 -0500] mattupstate: i just realized the box i deploy from is a little out of date compared to my laptop
[2013-01-29 20:26:01 -0500] cwj: mattupstate: i dont recall any real pain around that upgrade
[2013-01-29 20:26:29 -0500] timsmith: 10.12 -> 10.14 actually introduces some great functionality
[2013-01-29 20:26:39 -0500] mattupstate: right, i'm just reading about that
[2013-01-29 20:36:49 -0500] redsamh: solved
[2013-01-29 20:37:32 -0500] redsamh: just incase the issue, check box was checked and set as true but unchecking and rechecking fixed it. Not sure what but the node was not an admin
[2013-01-29 20:37:43 -0500] redsamh: even though check box was there.
[2013-01-29 20:41:35 -0500] dougireton: I need help with knife search syntax. I'm trying to get a list of nodes which use a particular recipe. `knife search node 'recipe[my_cookbook::my_recipe]'` doesn't work
[2013-01-29 20:44:52 -0500] qhartman: Somebody posted a link in here to an article about why roles are bad things (since they can't be versioned) a couple weeks ago, but I can't find it again. Anyone happen to have that?
[2013-01-29 20:50:22 -0500] tomdzk: dougireton: try 'recipes:my_cookbook\:\:my_recipe' (not the escaped colon characters in the recipe name)
[2013-01-29 20:51:08 -0500] log1kal: qhartman: There's been a few. http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html is one of my favorites.
[2013-01-29 20:51:14 -0500] chip-: knife search node "run_list:foo\['bar'\]" to search the run_list.
[2013-01-29 20:51:24 -0500] chip-: iirc
[2013-01-29 20:51:50 -0500] qhartman: log1kal, That's the one I was thinking of. Thanks!
[2013-01-29 20:51:56 -0500] log1kal: No prob :)
[2013-01-29 20:55:14 -0500] mattupstate: cwj: just tried firing up an instance from my local machine, which is running 10.18.2 and it still bootstrapped the node with 10.12.0
[2013-01-29 20:55:48 -0500] cwj: mattupstate: which AMI are you using?
[2013-01-29 20:56:26 -0500] mattupstate: oh
[2013-01-29 20:56:28 -0500] mattupstate: good call
[2013-01-29 20:56:42 -0500] mattupstate: i've been given an AMI that was pre-built by someone where i work
[2013-01-29 20:57:19 -0500] mattupstate: can guarantee they bootstrapped it with chef before making the image
[2013-01-29 20:57:24 -0500] mattupstate: and didn't wipe out chef
[2013-01-29 20:58:15 -0500] mattupstate: cwj: thanks for the tip
[2013-01-29 20:58:18 -0500] mattupstate: again
[2013-01-29 20:58:23 -0500] cwj: np
[2013-01-29 21:08:11 -0500] redsamh: is it possible to bootstrap a client as admin or does it have to be setup once the client is active
[2013-01-29 21:13:24 -0500] mdm_: hi folks
[2013-01-29 21:14:57 -0500] mdm_: i'm using chef with vagrant; what's the best way to configure mysql user accounts on the vm with chef?
[2013-01-29 21:15:23 -0500] chip-: mdm_: First, install the berkshelf gem to Chef's ruby context
[2013-01-29 21:15:32 -0500] chip-: It'll make your life happier
[2013-01-29 21:16:16 -0500] chip-: mdm_: After that, the mysql cookbook takes an attribute for the mysql root password, which can be passed in via your vagrantfile with the solo provisioner. That's generally good enough.
[2013-01-29 21:16:48 -0500] chip-: Any further users you should be using the database cookbook to setup after the run starts.
[2013-01-29 21:17:42 -0500] mdm_: that's what i want to do. i have the root user set up
[2013-01-29 21:20:56 -0500] redsamh: in the first-boot.json can we pass any parameters so that the new node that gets created is automatically an admin. I need this functionality to allow new nodes to modify the data bags
[2013-01-29 21:23:51 -0500] redsamh: what doe the option -u in knife bootstrap do?
[2013-01-29 21:24:41 -0500] bluepojo: is there a -u?
[2013-01-29 21:24:44 -0500] bluepojo: it's not in the docs
[2013-01-29 21:24:47 -0500] bluepojo: http://wiki.opscode.com/display/chef/Knife+Bootstrap
[2013-01-29 21:25:35 -0500] bluepojo: -u for general knife commands sets the API client username
[2013-01-29 21:25:42 -0500] bluepojo: I suppose that is passed down to bootstrap
[2013-01-29 21:26:44 -0500] redsamh:     -u, --user USER                  API Client Username
[2013-01-29 21:28:02 -0500] redsamh: yes no documentation, not really sure what happens with that. Does the node use that api client username
[2013-01-29 21:28:30 -0500] scott161803: can anyone tell me why I'm seeing NoMethodError: undefined method `chef_gem' on 10.12.0
[2013-01-29 21:30:45 -0500] redsamh: try using it in a recipe by itself and see if it works
[2013-01-29 21:30:55 -0500] aboudreault: tomdzk, FYI, it worked with apt 1.8.0, instead of 1.8.4.
[2013-01-29 21:31:14 -0500] hippiehacker: https://gist.github.com/4666847 having trouble using current berkshelf + vagrant-windows gems in a Gemfile... infinite recursion
[2013-01-29 21:31:15 -0500] tomdzk: aboudreault: did you file a bug against 1.8.4 ?
[2013-01-29 21:31:42 -0500] aboudreault: tomdzk, no, will check tonight to fill one.
[2013-01-29 21:31:47 -0500] tomdzk: cool
[2013-01-29 21:36:12 -0500] gchristensen: lexford@live.com
[2013-01-29 21:36:13 -0500] gchristensen: oops
[2013-01-29 21:50:11 -0500] scott161803: redsamh: I am usinh it in a brand new recipe
[2013-01-29 21:50:28 -0500] scott161803: d/usinh/using/
[2013-01-29 21:51:25 -0500] behrendsj: Should the "mount" resource keep creating a new mount for the same mount point on each chef-client run?
[2013-01-29 21:51:57 -0500] redsamh: worked for me but I am using the latest, it is not recognizing it. Is that the only resource that does not work?
[2013-01-29 21:51:59 -0500] behrendsj: Got a box that has the same nfs export mounted 1000+ times
[2013-01-29 21:53:02 -0500] scott161803: redsamh: OK, never mind.  I had it defined in my provider instead of a recipe
[2013-01-29 22:34:41 -0500] otterley: has anyone ever extended Ohai to provide users' ssh public keys?  I was thinking about extending :etc but I'm not sure how
[2013-01-29 23:09:21 -0500] hcastro: is there a way to clear an attribute that's an array so that overriding it doesn't contain the old elements?
[2013-01-29 23:15:55 -0500] DanR_e: I'm having lots of trouble getting chef to bootstrap raw server (raw  = Ubuntu 12.10 with no Ruby but working ssh both ways with chef server.
[2013-01-29 23:15:57 -0500] DanR_e: Here is the command and the error response.
[2013-01-29 23:15:59 -0500] DanR_e:     dan@dan-D620:~$ chef-server > knife configure -i
[2013-01-29 23:16:01 -0500] DanR_e:     /home/dan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': no such file to load -- merb-core (LoadError)
[2013-01-29 23:16:02 -0500] DanR_e: from /home/dan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
[2013-01-29 23:16:04 -0500] DanR_e: from /usr/sbin/chef-server:24:in `<main>'
[2013-01-29 23:16:05 -0500] DanR_e: dan@dan-D620:~$
[2013-01-29 23:16:07 -0500] DanR_e: Any suggestions?
[2013-01-29 23:20:04 -0500] otterley: DanR_e, yeah, don't use 12.10
[2013-01-29 23:20:22 -0500] otterley: and use omnibus Chef
[2013-01-29 23:20:30 -0500] otterley: rvm is evil etc.
[2013-01-29 23:20:48 -0500] bougyman: chef omnibus still conflict with pg?
[2013-01-29 23:21:03 -0500] spox: bougyman: no
[2013-01-29 23:21:04 -0500] josephholsten: I thought that bug was fixed
[2013-01-29 23:21:09 -0500] bougyman: cool
[2013-01-29 23:21:15 -0500] otterley: pg?
[2013-01-29 23:21:41 -0500] log1kal: in case anyone else is rewriting cookbooks, and wants to switch from node[:foo] to node["foo"], here's the regex I'm using: \[:([\w]*)\]

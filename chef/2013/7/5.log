[2013-07-05 00:07:54 -0400] coderanger: visof: I bet you have an extra ' somewhere
[2013-07-05 00:07:54 -0400] coderanger: What do your knife.rb look like?
[2013-07-05 00:09:11 -0400] visof: coderanger, moment
[2013-07-05 00:10:55 -0400] visof: coderanger, http://pastie.org/8111399
[2013-07-05 00:12:20 -0400] visof: coderanger, ?
[2013-07-05 00:12:55 -0400] coderanger: sec, my computer is being a tad slow
[2013-07-05 00:12:55 -0400] coderanger: probably because I'm deleting 150k emails
[2013-07-05 00:13:08 -0400] visof: ok
[2013-07-05 00:13:22 -0400] visof: it was working yesterday very good
[2013-07-05 00:13:34 -0400] visof: but i don't know what is the problem
[2013-07-05 00:14:03 -0400] coderanger: visof: What version of knife do you have installed?
[2013-07-05 00:14:23 -0400] visof: chef 11.4.4
[2013-07-05 00:16:16 -0400] coderanger: How did you reset your key when you changed it?
[2013-07-05 00:16:49 -0400] visof: from regenerate private key link from the web UI
[2013-07-05 00:18:14 -0400] visof: isn't it strange?
[2013-07-05 00:19:59 -0400] coderanger: Okay, that should be correct, but it isn't giving the usual error for an authz failure, that seems to be saying that sig itself is invalid
[2013-07-05 00:38:53 -0400] visof: coderanger, so what should i do?
[2013-07-05 02:06:10 -0400] stormerider: does knife support showing a role in ruby format?
[2013-07-05 02:06:23 -0400] scalp421: I dont think so stormerider
[2013-07-05 02:06:30 -0400] stormerider: ie, the ruby equivalent of knife role show blah -Fj
[2013-07-05 02:06:35 -0400] scalp421: json and yaml I believe
[2013-07-05 05:17:06 -0400] justizin: Anyone seen this from a cookbook dependent on openssl secure_password? : Cannot find a resource for secure_password on ubuntu version 12.04
[2013-07-05 05:17:15 -0400] justizin: i can't find any distro-specific code..
[2013-07-05 05:31:37 -0400] coderanger: justizin: Usually means the opensll cookbook isn't loading
[2013-07-05 05:31:47 -0400] justizin: hm.
[2013-07-05 05:32:36 -0400] justizin: started happening when i started using my fork of the wordpress cookbook, which was working before (i'm patching it to allow a non-localhost database, in this case RDS)
[2013-07-05 05:35:38 -0400] coderanger: Do you have depends 'openssl' in the metadata?
[2013-07-05 08:18:54 -0400] flaccid: my linux isn't in http://www.opscode.com/chef/install
[2013-07-05 08:19:03 -0400] flaccid: is there a direct omnibus installer d/l?
[2013-07-05 08:19:08 -0400] flaccid: i run archlinux
[2013-07-05 08:59:38 -0400] bigbigbang: Ohai ! Probably question without answer but who know ?? : Does someone know if it's possible to change the node type with the rabbitmq version provided with OSC 11.0.8 ?
[2013-07-05 09:05:14 -0400] lewiz1: what do people recommend for deploying users?  I see a number of different options but right now I'm leaning towards a recipe that just calls the user resource with inline values.  I'm only deploying about 10 users
[2013-07-05 09:27:29 -0400] daxroc: Morning all
[2013-07-05 09:27:52 -0400] daxroc: Is /opt/chef-server/embedded/ssl/certs/cacert.pem the certificate used for the webui?
[2013-07-05 09:27:53 -0400] bigbigbang: Is it possible to bypass the "60sec pause" when performing a chef-server-ctl cleanse ?
[2013-07-05 09:28:50 -0400] flaccid: lewiz: sounds good
[2013-07-05 09:29:04 -0400] bigbigbang: daxroc: the chef-webui certificate is in /etc/chef-server/    that what you wanted ?
[2013-07-05 09:30:34 -0400] bigbigbang: daxroc: web side, there is a certificate for nginx too , that's maybe the one you are speaking of , and there is a secret cookie too ..
[2013-07-05 09:31:12 -0400] lewiz: flaccid: cool, thanks.  just wanted to make sure it wasn't badly wrong to do it that way :)
[2013-07-05 09:31:50 -0400] daxroc: bigbigbang: Yeah that sounds more like it. I'm wanting to replace it with my copy ( Using vagrant here and it's getting nuked every reload )
[2013-07-05 09:33:36 -0400] daxroc: I would think it's the nginx one, and If there is one for the api?
[2013-07-05 09:41:09 -0400] mikebb: hi chef folks
[2013-07-05 09:41:23 -0400] mikebb: I have a "doh" question
[2013-07-05 09:42:42 -0400] mikebb: my understanding of "knife node run_list add" is that it gives a node a recipe (if that was what was added in the run list) - and then executes it - is that correct?
[2013-07-05 09:43:29 -0400] jonlives: mikebb: all but the last part. run_list add doesn't force a chef run
[2013-07-05 09:43:46 -0400] mikebb: jonlives: ahhhhhh, thanks!
[2013-07-05 09:43:51 -0400] jonlives: it literally just adds whatever you specify to the run_list to be executed whenever the next run kicks off
[2013-07-05 09:44:16 -0400] mikebb: jonlives: that makes sense - how do I force a run then?
[2013-07-05 09:44:30 -0400] jonlives: mikebb: on one machine or multiple?
[2013-07-05 09:44:35 -0400] jonlives: on one, you can do sudo chef-client --once
[2013-07-05 09:45:22 -0400] mikebb: jonlives: from my local workstation how would I phrase that? knife exec?
[2013-07-05 09:46:51 -0400] jonlives: mikebb: you just trying to run it on one remote machine?
[2013-07-05 09:47:00 -0400] mikebb: jonlives: yes
[2013-07-05 09:47:28 -0400] jonlives: mikebb: ssh machinename "sudo chef-client --once"
[2013-07-05 09:47:51 -0400] mikebb: jonlives: ahhh, so not using knife then right?
[2013-07-05 09:48:10 -0400] jonlives: mikebb: well you can if you want, no need to tho :p
[2013-07-05 09:49:34 -0400] jonlives: one of those cases where I prefer to keep the minimum number of moving parts between my computer, and the one running the command :p
[2013-07-05 09:49:35 -0400] mikebb: jonlives: great, that makes sense now, really appreciate that
[2013-07-05 09:49:52 -0400] jonlives: mikebb: np :) are you running chef client daemonized on the remote machine?
[2013-07-05 09:50:44 -0400] mikebb: jonlives: no idea, did a straight bootstrap
[2013-07-05 09:50:58 -0400] jonlives: mikebb: what os?
[2013-07-05 09:51:01 -0400] jonlives: debian / redhat?
[2013-07-05 09:51:05 -0400] mikebb: jonlives: ubuntu
[2013-07-05 09:51:37 -0400] jonlives: mikebb: check if you have an upstart service running for chef-client. if not, you can start it - out of the box, I think that'll cause a chef run every 30 mins.
[2013-07-05 09:51:41 -0400] jonlives: we actually run every 10.
[2013-07-05 09:52:26 -0400] mikebb: jonlives: great, thanks for that, 30s the default right?
[2013-07-05 09:52:35 -0400] jonlives: mikebb: 30 mins, not 30 s :p
[2013-07-05 09:52:56 -0400] mikebb: :/ errr, yep
[2013-07-05 09:53:29 -0400] jonlives: mikebb: yep 30 mins then. ideally you should be in a position where doing automatic runs isn't in any way scary :)
[2013-07-05 09:53:48 -0400] daxroc: Does chef still use couchdb for some tasks?
[2013-07-05 09:53:52 -0400] jonlives: you can even make the runs more frequent.
[2013-07-05 09:54:39 -0400] mikebb: jonlives: I can see there is a confidence level there - once you have the confidence to deploy a recipe and know you are good, that's a very nice place to be
[2013-07-05 09:55:09 -0400] jonlives: mikebb: absolutely - to get that confidence, it's worth looking into environments
[2013-07-05 09:55:27 -0400] jonlives: lets you pin groups of servers to a specific cookbook version, so they only get it once it'ss tested
[2013-07-05 09:55:58 -0400] jonlives: mikebb: http://www.slideshare.net/mcdonnps/lessons-from-etsy-avoiding-kitchen-nightmares-chefconf-2012 and http://www.slideshare.net/jonlives/michelin-starred-cooking-with-chef give a bunch more info on how we do it at Etsy
[2013-07-05 09:56:11 -0400] mikebb: jonlives: right - I've come from using chef-solo on Vagrant and wondered what they were about - that makes sense
[2013-07-05 09:56:47 -0400] jonlives: http://www.youtube.com/watch?v=nSnJCJiZDDU is the video of the talk for the first of those slides
[2013-07-05 09:57:41 -0400] mikebb: thanks jonlives one more question if okay
[2013-07-05 09:57:50 -0400] jonlives: mikebb: shoot :)
[2013-07-05 09:58:03 -0400] mikebb: do you use berkshelf or Librarian?
[2013-07-05 09:59:21 -0400] jonlives: mikebb: we don't at Etsy, but that's mainly because the way we use cookbooks doesn't map so well - I'd def recommend using one or the other for most use cases though :)
[2013-07-05 10:20:50 -0400] mikebb: thanks jonlives
[2013-07-05 10:21:12 -0400] jonlives: mikebb: np :)
[2013-07-05 10:58:33 -0400] mikebb: anyone using jenkins opscode package with chef?
[2013-07-05 10:58:52 -0400] PierreO: mikebb: yes
[2013-07-05 10:59:18 -0400] mikebb: Hi PierreO - on ubuntu I don't have a config file?
[2013-07-05 10:59:36 -0400] mikebb: should be in /var/lib/jenkins?
[2013-07-05 11:00:28 -0400] mikebb: did you get a config file out-the-box?
[2013-07-05 11:01:55 -0400] PierreO: I will not be a big help I think, do you mean "config.xml" ?
[2013-07-05 11:02:14 -0400] mikebb: PierreO: yes -
[2013-07-05 11:02:32 -0400] PierreO: for me it's there : /var/lib/jenkins/jenkins-data
[2013-07-05 11:03:01 -0400] mikebb: PierreO: okay, thanks - is that on ubuntu?
[2013-07-05 11:03:16 -0400] PierreO: and on my workflow, I put the one I backuped
[2013-07-05 11:03:28 -0400] PierreO: (it's not cooked then)
[2013-07-05 11:03:30 -0400] PierreO: on Gentoo
[2013-07-05 11:03:49 -0400] mikebb: okay, thanks PierreO
[2013-07-05 11:03:54 -0400] PierreO: Welcome :)
[2013-07-05 11:25:34 -0400] daxroc: If I set nginx['enable_non_ssl'] = true in /etc/chef-server/chef-server.rb and reconfigure I shouldn't be redirected to https anymore right ?
[2013-07-05 11:28:11 -0400] daxroc: Do I also need to update the url ?
[2013-07-05 11:38:28 -0400] daxroc1: I'm using v 11.0.8-1 and when I set nginx['enable_non_ssl'] = true and reconfigure I still get redirected to https is this correct, or a possible regression on ticket http://tickets.opscode.com/browse/CHEF-3999
[2013-07-05 11:57:56 -0400] daxroc1: Any suggestions
[2013-07-05 12:31:56 -0400] ddr_: hello. can anyone help me, how can I get unique id for each node in recipe and add this to attr? This is need for mysql installation.
[2013-07-05 12:32:33 -0400] behemphi: are you trying to insure the server_id is unique for replication
[2013-07-05 12:32:57 -0400] ddr_: yes, server_id
[2013-07-05 12:33:34 -0400] behemphi: hm, I am surprised that the cookbook doesn't take care of this
[2013-07-05 12:34:27 -0400] behemphi: that said, I suggest writing a simple funciton that hashes a few things (hostname, memory size, etc) that you can get from ohai into an int
[2013-07-05 12:46:25 -0400] flaccid: not sure what that has to do with the mysql cookbook
[2013-07-05 12:46:25 -0400] flaccid: i'm out
[2013-07-05 12:46:34 -0400] ddr_: well, a already wrote wrapper cookbook which create my.cnf with innodb_log_size _before_ install and start mysql. now i don't need login on each server when install mysql with custom logsize =)
[2013-07-05 12:46:34 -0400] ddr_: it seems, now i must create bycecycle with hashes =)
[2013-07-05 12:46:35 -0400] ddr_: * bicycle, of course
[2013-07-05 12:52:55 -0400] thom: ddr_: see how the percona cookbook does it - essentially, start from 0, write the value to a databag, increment per server
[2013-07-05 12:52:56 -0400] ddr_: hm, maybe just use ohai time for initial server_id?
[2013-07-05 13:23:19 -0400] maruq: um, maybe I can get away with passing "/config c:\blah\config.xml" as an option....
[2013-07-05 13:50:22 -0400] rBEL: hi there, i'm trying out a migration from Chef Server 10.X to 11.X, everything went smooth until uploading the data to the new chef server.. I'm getting internal server errors on "knife upload /"
[2013-07-05 13:50:43 -0400] rBEL: i've the impression it's caused by upload the actual cookbooks
[2013-07-05 13:50:56 -0400] rBEL: clients, roles, etc. are  uploaded correctly
[2013-07-05 13:51:07 -0400] rBEL: does anyone has an idea how to resolve this issue?
[2013-07-05 13:52:32 -0400] rBEL: it's throwing 500's on posting to /sandboxes
[2013-07-05 13:55:00 -0400] PierreO: rBEL, I had some issues with cookbooks that include a recipe, but it's not specified in the metadata file
[2013-07-05 13:55:11 -0400] PierreO: adding the "depends" solved the issue
[2013-07-05 13:55:16 -0400] PierreO: is it that?
[2013-07-05 13:56:31 -0400] rBEL: PierreO: i'm not able to see this in the log files, is it possible to make "chef-server-ctl tail" a bit more verbose?
[2013-07-05 13:56:54 -0400] PierreO: I don't know this
[2013-07-05 13:57:10 -0400] rBEL: and my knife upload / is throwing just "ERROR: Server returned error for https://chef.sandbox/sandboxes, retrying 1/5 in 3s"
[2013-07-05 13:58:40 -0400] PierreO: ok, I had another strange error (That I dirty fixed it) that it was my chef server, at one point was sending a bad fqdn to my chef client
[2013-07-05 13:58:52 -0400] PierreO: like https://chef.sandbox/sandboxes
[2013-07-05 13:59:15 -0400] PierreO: https://chef.sandbox/sandboxess
[2013-07-05 13:59:46 -0400] PierreO: grrrr : https://chef/sandboxes
[2013-07-05 13:59:53 -0400] PierreO: yes this :)
[2013-07-05 14:14:17 -0400] rBEL: PierreO: when i try to upload our apache cookbook it says it depends on the apt coobook but that it's not currently being uploaded and cannot be found on the server
[2013-07-05 14:14:40 -0400] rBEL: as far as I see the depencies are already in the metadata.rb
[2013-07-05 14:16:56 -0400] gchristensen: stormerider: have you had a moment to review that pull request?
[2013-07-05 14:19:15 -0400] PierreO: rBEL, ok, then I don't know :) it was my guess from my experience
[2013-07-05 15:24:14 -0400] maruq: PierreO: I think I've hit similar before, and just solved by manually uploading (knife cookbook upload foo) what it asked for
[2013-07-05 15:24:52 -0400] maruq: PierreO: I thought it was smart enough to resolve things if you did knife cookbook upload --all, but maybe not
[2013-07-05 15:26:17 -0400] PierreO: I used Berksfile for that ;)
[2013-07-05 15:48:28 -0400] Sleepy1: can anyone recommend an FTP cookbook
[2013-07-05 15:48:46 -0400] Sleepy1: this one (http://community.opscode.com/cookbooks/vsftpd) looks well out of date
[2013-07-05 15:50:55 -0400] Sleepy1: Any FTP cookbooks that people use?
[2013-07-05 15:51:18 -0400] aneto: I always just use sftp
[2013-07-05 15:51:46 -0400] Sleepy1: what cookbook do you use to set it up on your nodes?
[2013-07-05 15:52:22 -0400] aneto: sftp just uses your shell to to the transfers
[2013-07-05 15:52:37 -0400] aneto: are you using some kind of unix based os?
[2013-07-05 15:52:39 -0400] aneto: or windows
[2013-07-05 15:52:42 -0400] Sleepy1: https://github.com/TheSerapher/chef-vsftpd is the best I can find
[2013-07-05 15:52:52 -0400] Sleepy1: buntu and centos
[2013-07-05 15:53:37 -0400] aneto: not sure what kind of requirements you have, but I just use sftp with filezilla if you can ssh into the box you can sftp into it
[2013-07-05 15:55:29 -0400] Sleepy1: fair enough, i guess it;s time i moved away from vanilla ftp anyhow :)
[2013-07-05 16:02:37 -0400] gchristensen: scott adams is especially poignant today on the cloud: http://www.dilbert.com/dyn/str_strip/000000000/00000000/0000000/100000/80000/9000/400/189416/189416.strip.zoom.gif
[2013-07-05 16:22:16 -0400] gondoi: is anyone using custom paths for data_bags and secret file in test-kitchen?
[2013-07-05 16:33:03 -0400] tcate: Is there a way to have a template compiled during convergence instead of at the begining of a run?
[2013-07-05 16:35:22 -0400] gchristensen: tcate: sounds like you're doing something wrong
[2013-07-05 16:37:48 -0400] tcate: currently the default recipe creates a resource that provides a token. There's another recipe that installs an agent and needs to put that token in a config file. However using template it generates the config file before I can call the resource to get the token
[2013-07-05 16:43:11 -0400] aneto: can you gist the section?
[2013-07-05 16:46:44 -0400] tcate: https://github.com/rackspace-cookbooks/cookbook-cloudmonitoring/tree/master/recipes
[2013-07-05 16:46:51 -0400] tcate: it's the agent recipe in there
[2013-07-05 16:47:22 -0400] tcate: I picked this up about 75% done and have been trying to get everything completely working
[2013-07-05 17:23:15 -0400] awayne: Hello all
[2013-07-05 17:24:40 -0400] awayne: Maybe someone can help me untangle my brain a little.
[2013-07-05 17:25:21 -0400] awayne: I'm trying to see if I can use the deploy_revision resource on Windows. I know that it's not supported because symlink isn't supported on Windows.
[2013-07-05 17:26:05 -0400] awayne: So, I'm trying to see if I can create a new provider < Chef::Provider::Deploy::Revision which overrides the 4 symlink-related functions on the provider.
[2013-07-05 17:27:40 -0400] awayne: I'm trying to create this new provider in a new cookbook ('windeploy'). But, I'm obviously missing something.
[2013-07-05 17:28:45 -0400] awayne: If I create a test recipe which uses the existing deploy, it runs and finally throws an error that symlink isn't supported (expected).
[2013-07-05 17:29:28 -0400] awayne: If I set the provider attribute to be my new provider Chef::Provider::WindeployRevision, I get a 'Cannot find a resource for action_deploy on windows version 6.2.9200' error
[2013-07-05 17:31:14 -0400] awayne: Am I missing something obvious? Are typical Providers (non-LWRP) not supported in custom cookbooks? Is defining a new provider in another cookbook not supported?
[2013-07-05 17:41:53 -0400] awayne: Nevermind
[2013-07-05 17:46:58 -0400] awayne: I had placed the class definition inside a ruby file in the Providers folder. I moved the definition to the libraries folder and all is well.
[2013-07-05 17:57:55 -0400] pwnguin: is there a way to clear the chef cache on a node?
[2013-07-05 17:57:56 -0400] pwnguin:   Could not install requirement setuptools from https://pypi.python.org/packages/source/s/setuptools/setuptools-0.8.tar.gz#md5=ab5f2bbc67f0dbdfeb3075f14d0b029c (from supervisor) because of error HTTP Error 404: Not Found
[2013-07-05 17:58:07 -0400] pwnguin: it seems to have found a mispublished setuptools .8
[2013-07-05 17:59:41 -0400] pwnguin: ah, maybe it's just propagation
[2013-07-05 18:10:19 -0400] justizin: pwnguin: you can rm -rf /var/cache/chef/cookbooks/* for instance to clear the cookbook cache
[2013-07-05 18:10:44 -0400] justizin: sometimes it's a valid sanity measure
[2013-07-05 18:12:13 -0400] pwnguin: good to know, but that dir is completely empty
[2013-07-05 18:14:46 -0400] justizin: sometimes also /var/chef/cache/ ?
[2013-07-05 18:21:31 -0400] justizin: i think with omnibus it's /var/chef/cache
[2013-07-05 18:21:36 -0400] justizin: pwnguin:
[2013-07-05 18:22:09 -0400] pwnguin: there we go
[2013-07-05 18:22:22 -0400] justizin: not FHS, but probably has to do with colliding with previous installs or something :/
[2013-07-05 18:26:26 -0400] timsmith: is there going to be a cookbook review today?
[2013-07-05 18:26:58 -0400] gchristensen: thank you for your help on COOK-3282, timsmith. did I follow protocol correctly on that? (I hope o.)
[2013-07-05 18:27:10 -0400] timsmith: that was perfect
[2013-07-05 18:27:49 -0400] gchristensen: woohoo! I should write a blog post "how to navigate the opscode ticket submission protocol"
[2013-07-05 18:28:06 -0400] justizin: YES PLEASE
[2013-07-05 18:28:07 -0400] justizin: ;)
[2013-07-05 18:28:20 -0400] justizin: where to send beer and how much?
[2013-07-05 18:28:32 -0400] gchristensen: haha oh boy... I feel committed now.
[2013-07-05 18:29:24 -0400] justizin: :-P
[2013-07-05 18:29:28 -0400] btm: If the four steps on the wiki page are insufficient, it'd be good to know and update it. http://wiki.opscode.com/display/chef/How+to+Contribute
[2013-07-05 18:29:48 -0400] justizin: yah it's actually pretty clear, i have a PR in but i think it could be improved.  working on a change to wordpress cookbook right now.
[2013-07-05 18:29:55 -0400] justizin: because obviously i like being tortured.
[2013-07-05 18:30:12 -0400] timsmith: is there a way in github to have pull requests auto e-mail a response
[2013-07-05 18:30:29 -0400] justizin: jenkins will thumbsup PRs that pass a test suite
[2013-07-05 18:30:34 -0400] justizin: i think travis might also
[2013-07-05 18:30:49 -0400] justizin: (jenkins with a plugin that i don't fully have implemented yet ;d)
[2013-07-05 18:31:05 -0400] btm: timsmith: IIRC there used to be, but GH removed the feature and was all "the github way is the only way."
[2013-07-05 18:31:31 -0400] timsmith: bummer.  It would be nice to shoot an e-mail with the process link
[2013-07-05 18:31:37 -0400] gchristensen: btm: those steps are fine and clear, but finding them is more difficult. also, I thought the wiki was obsoleted by the docs.?
[2013-07-05 18:31:53 -0400] justizin: "What's that?!? You don't like something about Github? Too fucking bad we're in the kitchen doing shots, motherfuckers!"
[2013-07-05 18:32:17 -0400] btm: timsmith: we've talked a few times about leveraging the GH API to point people at the wiki page who are already into the github way. might happen soonish.
[2013-07-05 18:32:18 -0400] gchristensen: btm, timsmith: you could setup an account to watch all the repositories, and when it receives a PR notification, to reply to the email with the content. Github will take it and post it as a comment.
[2013-07-05 18:32:29 -0400] gchristensen: they have a very nice SMTP API :)
[2013-07-05 18:32:41 -0400] justizin: right, there are also some mobile apps that seem worth evaluation..
[2013-07-05 18:32:54 -0400] justizin: notify of PRs, commits to watched repos, interact with issues, etc..
[2013-07-05 18:33:09 -0400] gchristensen: GH seems like the most open-to-extension service I've ever used... I've never had a problem with them saying they're the one-true-way
[2013-07-05 18:34:26 -0400] justizin: they're rather limited on hooks
[2013-07-05 18:34:45 -0400] justizin: but i understand most of the reasons for that
[2013-07-05 18:34:57 -0400] justizin: i've been warming to it..
[2013-07-05 18:35:26 -0400] justizin: i got a little tired of people with like 3 years of coding experience asking me in e-mail interview requests if i had a github and if all my life's work was there ;d
[2013-07-05 18:36:11 -0400] daxroc: When chef is pushing updated cookbooks/recipes on convergence is there smart use of bandwidth ie we only transfer the delta ?
[2013-07-05 18:36:15 -0400] justizin: i just worry at times that the entire open-source community is becoming very reliant on a development process it hasn't entirely implemented..
[2013-07-05 18:36:30 -0400] justizin: i had a shitty experience supporting github enterprise, as well..
[2013-07-05 18:36:30 -0400] gchristensen: justizin: what process is that?
[2013-07-05 18:37:00 -0400] justizin: just all the PRs and the way it's integrated with things.. it's very nice but the focus on github means the open-source workalikes are not very heavily traveled..
[2013-07-05 18:37:01 -0400] btm: gchristensen: have you ever noticed you cannot turn off pull requests?
[2013-07-05 18:37:23 -0400] justizin: anyway, i always said when i was at bigger orgs that things like github are great when you are like <50, esp <30 people..
[2013-07-05 18:37:27 -0400] gchristensen: btm: I have noticed that
[2013-07-05 18:37:34 -0400] justizin: and that describes where i am now, so i'm just gonna keep on floatin' down the river awesome..
[2013-07-05 18:38:02 -0400] justizin: it sucks when you're a 7 person ops team in multiple countries with like 70 developers to support and something like github goes down.
[2013-07-05 18:38:04 -0400] gchristensen: btm: I suppose that is one way where it is in fact "the one trueway"
[2013-07-05 18:38:24 -0400] justizin: then everyone who was all "let's use github!" is all "why do we rely on this!? why did you let us do this?!? we shall burn your face with irons to mark you so that we never forget this event!"
[2013-07-05 18:38:52 -0400] gchristensen: justizin: that hurts people who don't know how git works. I add my coworkers as remotes all the time on my repos.
[2013-07-05 18:39:49 -0400] justizin: not sure i follow / connect the context
[2013-07-05 18:40:47 -0400] gchristensen: git is by nature decentralized, github going down is not necessarily a production-killer. you can setup anyone as a remote on your repository and push to them, or they can push to yours.
[2013-07-05 18:42:16 -0400] justizin: right, but when the workflow of an organization depends on it, all i'm sayin..
[2013-07-05 18:42:23 -0400] gchristensen: I realize that isn't a common workflow at this point, but it is fully supported. also, sending / receiving patches over SMTP is fulling supported :)
[2013-07-05 18:42:40 -0400] gchristensen: github *is* baked in too deeply. I agree with that.
[2013-07-05 18:45:23 -0400] justizin: but it's also great, so, yanno..
[2013-07-05 18:45:33 -0400] justizin: raise your hand if you said this about sourceforge ;)
[2013-07-05 18:49:47 -0400] daxroc: Does anyone know how hosted chef scale out the console? multiple servers with multiple workers I would think
[2013-07-05 18:50:04 -0400] gchristensen: the console?
[2013-07-05 18:50:14 -0400] daxroc: webui
[2013-07-05 18:50:42 -0400] gchristensen: webservers are very easy to scale. loadbalancer in front, multiple backends
[2013-07-05 18:56:15 -0400] miah: pretty sure they do some variance of haproxy -> nginx -> webui. but they might not be haproxy'ing.
[2013-07-05 18:56:50 -0400] daxroc: miah:  from my tests that works well
[2013-07-05 18:57:05 -0400] daxroc: and can also handle the api
[2013-07-05 18:57:41 -0400] daxroc: Testing with haproxy 1.5
[2013-07-05 18:58:06 -0400] miah: ya. i am a big haproxy fan. i've done a bunch with it.
[2013-07-05 18:58:28 -0400] miah: though often you don't need the 'nginx' part unless you actually are serving static content.
[2013-07-05 18:58:41 -0400] miah: it mostly just adds another constraint to your flow
[2013-07-05 20:03:06 -0400] btm: @opscode cookbook code review, join: https://plus.google.com/hangouts/_/99036320c0e24b15ef95e16d3ba2036e568ffaba watch: http://youtu.be/-CQx-5rQWGU
[2013-07-05 20:06:35 -0400] cwj: anyone else seeing problems with python cookbook and distribute 0.7.3?
[2013-07-05 20:06:53 -0400] cwj: i think it is bork
[2013-07-05 20:17:54 -0400] spicy: i need to define an attribute in a ruby block in a recipe, but anything that uses that attribute further in the recipe is using the value from compile time and not from the execution - what's the best way to get this working?
[2013-07-05 20:20:10 -0400] cwj: can you define the attribute outside the ruby block?
[2013-07-05 20:20:27 -0400] cwj: just hoist the code up into the recipe itself
[2013-07-05 20:24:23 -0400] spicy: yeah that'll probably work, thanks cwj :)
[2013-07-05 20:24:50 -0400] cwj: i only put ruby code into ruby blocks when i need it to run at execute time
[2013-07-05 20:26:38 -0400] spicy: will keep that in mind
[2013-07-05 20:39:43 -0400] sensu: So the other day I managed to set up a very minimal install of the 4 Sensu services w/ an SSH, Cron, redis, and rabbitmq checks. I was going to continue writing a recipe for my company when the dashboard showed "No keep-alive sent from client in over 180 seconds"
[2013-07-05 20:39:54 -0400] sensu: Which is odd because the server and client are 1 in the same.
[2013-07-05 20:40:34 -0400] sensu: And it's not as though I've done any edits to the VM since 2 days ago. I'm not sure why this issue would come up. Googling showed that some people saw 2 redis processes being run, but that's the case here.
[2013-07-05 20:41:03 -0400] sensu: that's not the case*
[2013-07-05 20:43:54 -0400] Kzim: hello i would like to understand where the ressource state are stored ? on the chef server ? in local ? in a json format somewhere ? thx
[2013-07-05 20:44:41 -0400] sensu: oh christ... wrong channel -_-
[2013-07-05 20:48:58 -0400] cwj: Kzim: resource state isn't stored per se. node attributes, which may reflect resource state, are stored on the chef server
[2013-07-05 20:49:08 -0400] cwj: Kzim: chef evaluates the state of resources at run time and takes the necessary action to realize the state declared by your run list
[2013-07-05 20:50:35 -0400] Kzim: i'm not sure to understand, so when i chef if resource exist Chef::Resource::CloudMagic.new(new_resource.name) it check on the node attributes ?
[2013-07-05 20:51:04 -0400] cwj: Kzim: the CloudMagic provider has to figure out for itself what the current state is
[2013-07-05 20:52:11 -0400] cwj: Kzim: take a look at the provider for Chef::Resource::Directory https://github.com/opscode/chef/blob/master/lib/chef/provider/directory.rb
[2013-07-05 20:53:51 -0400] cwj: it has load_current_resource method which gets current state of the directory, so that the provider can figure out what action, if any, is needed to realize the declared state
[2013-07-05 20:53:52 -0400] Kzim: i,m not sure i understand more. where in this file the resource get his state ?
[2013-07-05 20:54:39 -0400] Kzim: load_resource_attributes_from_file ?
[2013-07-05 20:55:34 -0400] Kzim: so there is to state. it just get some value at the first run ?
[2013-07-05 20:56:12 -0400] Kzim: there is no "state" kept somewhere i mean, no persistant data between runs
[2013-07-05 20:56:15 -0400] cwj: right
[2013-07-05 20:56:16 -0400] cwj: every time chef runs the resource providers individually determine the state of the resources they are managing
[2013-07-05 20:56:38 -0400] cwj: the only data that persists is node attributes saved to chef server (if you are using chef-client)
[2013-07-05 20:57:30 -0400] cwj: if chef saved the state of resources, and relied on that saved state to know what actions to take, someone could easily make a manual change which makes the saved state invalid
[2013-07-05 20:58:15 -0400] Kzim: okay, i tought that Provider would help me reduce the Chef run time by not analyze new data but i'm wrong. but it's good anyway i assume. it create a context
[2013-07-05 20:58:34 -0400] Kzim: yeah your right
[2013-07-05 20:58:54 -0400] cwj: if you wanted to write a provider which stored state in a known location, you could do that
[2013-07-05 20:59:10 -0400] cwj: but generally that is not how chef providers work
[2013-07-05 20:59:53 -0400] Kzim: no it's okay i want use Chef as it was designed :)
[2013-07-05 21:00:03 -0400] Kzim: thanks a lot for your explaination
[2013-07-05 21:01:02 -0400] cwj: no problem
[2013-07-05 21:08:34 -0400] Kthanid: Trying to bootstrap a new node, anyone know why I might be getting the following: "ERROR: Server returned error for https://api.opscode.com/organizations/<organization>/reports/nodes/<node-name>/runs"?
[2013-07-05 21:08:48 -0400] Kthanid: Was working fine last time I did this (fairly recently)
[2013-07-05 21:10:41 -0400] countdigi: just listened to the erlang chef episode... way cool :)
[2013-07-05 21:14:58 -0400] nathanmilford: Anyone tinkering around with the vagrant-chef-zero plugin?
[2013-07-05 21:16:39 -0400] timsmith: I'd love to know if someone has any experience with it.  It would make things a lot nicer
[2013-07-05 21:16:57 -0400] nathanmilford: yeah, im poking around with it
[2013-07-05 21:16:59 -0400] nathanmilford: or attempting to
[2013-07-05 21:17:06 -0400] nathanmilford: aaaand i may have figured it out
[2013-07-05 21:17:17 -0400] nathanmilford: wen you install the vagrant plugin
[2013-07-05 21:17:21 -0400] nathanmilford: it doesnt install the gem
[2013-07-05 21:18:07 -0400] nathanmilford: nothing
[2013-07-05 21:18:33 -0400] cwj: anyone using the supervisor cookbook? i just stepped into this yak: http://tickets.opscode.com/browse/COOK-3284
[2013-07-05 21:18:49 -0400] nathanmilford: gonn tryin installing it on the embedded ruby stack /opt/vagrant/embedded/bin/gem install chef-zero
[2013-07-05 21:18:57 -0400] timsmith: nathanmilford:  when you magically figure that all out a writeup would be super awesome
[2013-07-05 21:21:12 -0400] nathanmilford: it actually installs it into ~/.vagrant.d/gems/bin/chef-zero
[2013-07-05 21:22:11 -0400] countdigi: plugins are the way to go, but if not, it should only be a couple lines of ruby to hack it in the mean time
[2013-07-05 21:28:40 -0400] countdigi: what happens if u pass a totally bogus rest call to chef-zero? does it error or just not do anything? that was the one thing i was curious about - my initial readings indicated it just exited silently but figure that will (or has) probably changed?
[2013-07-05 21:30:41 -0400] whack: berkshelf question if anyone's familiar - I did a 'berks install' to install some dependencies, and my local cookbooks directory now has like.. only those cookbooks and it purged everything else.
[2013-07-05 21:31:35 -0400] whack: example before/after: https://gist.github.com/jordansissel/bef7a89787fb3a4944ee
[2013-07-05 21:31:57 -0400] whack: so my question is: is there a recovery option? Is there a way to download cookbooks from the chef server? I would much prefer not losing all this work :(
[2013-07-05 21:33:54 -0400] cwj: i believe 'knife cookbook download foo 0.1.0' will help you with recovering cookbooks from the chef server
[2013-07-05 21:34:48 -0400] whack: second question, is there a way to make berkshelf *not* do this thing that it just did that makes me want to flip tables and punch kittens?
[2013-07-05 21:36:51 -0400] cwj: mkdir another_directory_o_cookbooks ; berks install -p  another_directory_o_cookbooks
[2013-07-05 21:36:53 -0400] cwj: maybe?
[2013-07-05 21:39:28 -0400] tcate: I thought it usually hid its cookbooks away in ~/.berkshelf/cookbooks/
[2013-07-05 21:41:03 -0400] cwj:  i think thats the typical behavior for the more recent versions, not sure what version whack is using etc
[2013-07-05 21:44:01 -0400] drogoh: :o
[2013-07-05 21:44:05 -0400] drogoh: whack still uses irc
[2013-07-05 21:45:00 -0400] whack: drogoh: hah, still? I don't think I've had a client disconnected from IRC in more than 15 years ;)
[2013-07-05 21:45:10 -0400] whack: it's possible I"m not using berkshelf correctlyt hen
[2013-07-05 21:45:51 -0400] tcate: I generally make sure nothing but berkshelf is messing around in its cookbook directory, basically all or nothing
[2013-07-05 21:46:15 -0400] whack: tcate: I see...
[2013-07-05 21:46:26 -0400] whack: I was hoping to just have it pull in dependencies for me for a graphite cookbook I was fetching
[2013-07-05 21:46:42 -0400] drogoh: I have org_cookbooks and that's where all of my company-specific customization goes
[2013-07-05 21:46:48 -0400] drogoh: berkshelf seems to be okay with it
[2013-07-05 21:47:09 -0400] whack: we have one git repo for each cookbook we use (in house or community)
[2013-07-05 21:47:20 -0400] whack: so my cookbooks dir is gone now, going to try and script my way to recover and never use berkshelf again :(
[2013-07-05 21:51:38 -0400] cwj: not a fun time :(
[2013-07-05 21:51:40 -0400] drogoh: my berksfile has entries for community, github and my local git repo. also, knife cookbook download works for pulling from the server
[2013-07-05 22:02:52 -0400] cwj: coderanger: i am interested in hearing your thoughts on http://tickets.opscode.com/browse/COOK-3284 when you have a chance
[2013-07-05 22:33:11 -0400] axsuul: I'm getting this error about rsync when trying to cook a server using chef solo, has anyone seen this? https://gist.github.com/axsuul/6f0ef7631841f7116e49
[2013-07-05 22:33:20 -0400] axsuul: Happens at the very beginning
[2013-07-05 22:40:34 -0400] coderanger: cwj: "wait"
[2013-07-05 22:40:46 -0400] coderanger: cwj: pip 1.4 will be out either today or tomorrow
[2013-07-05 22:52:21 -0400] coderanger: cwj: Also I think you are wrong the distribute 0.7.3 and pip 1.3.1 are incompatible
[2013-07-05 22:52:37 -0400] coderanger: the original distirbute 0.7 was incompatible, which is why it was yanked from PyPI after about a day
[2013-07-05 23:19:10 -0400] cwj: coderanger: ok, thanks
[2013-07-05 23:19:25 -0400] cwj: i see your comments on https://github.com/pypa/pip/issues/1033 too
[2013-07-05 23:19:28 -0400] coderanger: :)
[2013-07-05 23:19:35 -0400] coderanger: Open source doing its thang
[2013-07-05 23:19:42 -0400] cwj: \m/
[2013-07-05 23:20:01 -0400] coderanger: Turns out to be handy that the people that work on this stuff all know each other
[2013-07-05 23:30:52 -0400] timsmith: curious if there's a reason why the apt cookbook isn't wrapped in a platform family check for debian
[2013-07-05 23:31:21 -0400] coderanger: timsmith: Mostly historical reasons, submit a patch :)
[2013-07-05 23:31:30 -0400] coderanger: (the cookbook predates that as a pattern)
[2013-07-05 23:31:42 -0400] timsmith: it would be nice to be able to be lazy and include it in a base role
[2013-07-05 23:31:50 -0400] timsmith: I'm sure I'm not the only lazy person

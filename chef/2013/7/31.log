[2013-07-31 00:00:01 -0400] shanlar: but it is available during the 2nd run
[2013-07-31 00:00:06 -0400] jtimberman: shanlar: depends? does the hostname command on the system work?
[2013-07-31 00:00:18 -0400] jtimberman: it may not be the hostname you thought it would be.
[2013-07-31 00:00:23 -0400] jtimberman: but every system should have a hostname :)
[2013-07-31 00:00:28 -0400] shanlar: yea
[2013-07-31 00:00:29 -0400] jtimberman: anyway, dinner time
[2013-07-31 00:00:37 -0400] shanlar: aws using bashton image
[2013-07-31 00:00:44 -0400] shanlar: definitely has a hostname out of the box
[2013-07-31 00:03:35 -0400] yfeldblum: `ls /path/to/dir/*.txt` prints a message to stderr if the directory is empty or has no .txt files in it; is there a switch to suppress that?
[2013-07-31 00:49:12 -0400] doomviking: 2> /dev/null
[2013-07-31 01:39:24 -0400] GreatSUN: Hi all
[2013-07-31 01:39:33 -0400] GreatSUN: I hope someone of you can help me
[2013-07-31 01:39:47 -0400] GreatSUN: I have a cookbook which contains libraries
[2013-07-31 01:40:39 -0400] GreatSUN: one library depends on another, so I am trying to include it with Chef::Recipe      include secondLib        end
[2013-07-31 01:40:52 -0400] GreatSUN: and then Chef::Resource ...
[2013-07-31 01:41:55 -0400] GreatSUN: but on one server this returns an error saying that Chef::Recipe::secondLibrary is not initialized
[2013-07-31 01:42:09 -0400] GreatSUN: any idea how I can fix that?
[2013-07-31 01:46:51 -0400] coderanger: GreatSUN: Lib files can't easily load each other
[2013-07-31 01:47:33 -0400] GreatSUN: coderanger: hmmm.... so what should I do though?
[2013-07-31 01:47:39 -0400] GreatSUN: any suggestions?
[2013-07-31 01:48:00 -0400] coderanger: GreatSUN: The old school solution, name your files so ascii sort matches load order
[2013-07-31 01:48:12 -0400] coderanger: _foo.rb will load first, ~foo.rb will load last
[2013-07-31 01:48:30 -0400] coderanger: Or use numbers 00_foo.rb 10_bar.rb, etc
[2013-07-31 01:48:46 -0400] GreatSUN: ok, if the order would be ok, why I get this error?
[2013-07-31 01:49:02 -0400] GreatSUN: could it be, that Chef::Recipe is not loaded?
[2013-07-31 01:49:16 -0400] coderanger: Because what you wrote isn't valid ruby syntax
[2013-07-31 01:49:18 -0400] GreatSUN: maybe I should check if Chef::Recipe is defined?
[2013-07-31 01:49:50 -0400] coderanger: If you found that snippet in our docs can you link me where, so I can remove it?
[2013-07-31 01:50:25 -0400] GreatSUN: there was just some documentation on how to make libraries available in contect of recipe and other resources
[2013-07-31 01:50:44 -0400] GreatSUN: and this was documented with that code
[2013-07-31 01:50:53 -0400] GreatSUN: I don't really know if it was in your docs
[2013-07-31 01:51:02 -0400] GreatSUN: it's some time ago
[2013-07-31 01:51:06 -0400] coderanger: Ahh, thats very different
[2013-07-31 01:51:34 -0400] GreatSUN: the libraries get called from chef-scope
[2013-07-31 01:51:49 -0400] coderanger: #include has nothind to do with file loading, which can be confusing if you are used to C-family languages
[2013-07-31 01:52:33 -0400] GreatSUN: it means to make some library methods available in class/module context
[2013-07-31 01:52:52 -0400] GreatSUN: at least that is what I think it was named like
[2013-07-31 01:53:42 -0400] GreatSUN: and as I said, on about 90% of the servers it is running properly
[2013-07-31 01:53:42 -0400] coderanger: Indeed, it takes a module object and adds it the class namespace
[2013-07-31 01:54:16 -0400] GreatSUN: and the library-files are all containing modules
[2013-07-31 01:54:49 -0400] GreatSUN: the point is, that I don't really understand two things:
[2013-07-31 01:54:57 -0400] GreatSUN: 1. why is it working on most of the machines
[2013-07-31 01:55:35 -0400] GreatSUN: 2. why is the error saying something about an uninitialized constant named Chef::Recipe::SecondLibModule ?
[2013-07-31 01:55:47 -0400] GreatSUN: coderanger: any ideas on that?
[2013-07-31 01:55:59 -0400] GreatSUN: or maybe already some workaround?
[2013-07-31 01:56:43 -0400] GreatSUN: the only thing I could think of is that either the lib-file is not loaded, so that it can'T find the Module
[2013-07-31 01:56:46 -0400] coderanger: GreatSUN: What version of Chef are you running?
[2013-07-31 01:56:59 -0400] GreatSUN: or that Chef::Recipe is not defined in that point of time
[2013-07-31 01:57:07 -0400] GreatSUN: coderanger: mostly 10.x
[2013-07-31 01:57:13 -0400] coderanger: Yeah, that would do it
[2013-07-31 01:57:19 -0400] GreatSUN: there are some 11.x, too
[2013-07-31 01:57:22 -0400] coderanger: Chef 10 didn't sort the libs before loading them AFAIK
[2013-07-31 01:57:32 -0400] coderanger: So you get raw directory order, which should be considered to be random
[2013-07-31 01:57:43 -0400] GreatSUN: oh dear...
[2013-07-31 01:57:44 -0400] coderanger: Basically don't use Chef 10 anymore ;-)
[2013-07-31 01:57:52 -0400] GreatSUN: coderanger: not possible :-(
[2013-07-31 01:57:58 -0400] GreatSUN: and... not my decision
[2013-07-31 01:58:10 -0400] coderanger: Then your only option involves running some lib files twice unfortunately
[2013-07-31 01:58:14 -0400] GreatSUN: I have to fix that stuff, so that it is going to work
[2013-07-31 01:58:22 -0400] coderanger: If you have libraries/one.rb and libraries/two.rb
[2013-07-31 01:58:44 -0400] coderanger: you can do "require File.expand_path('../one', __file__)"
[2013-07-31 01:58:53 -0400] coderanger: but one.rb will be executed twice
[2013-07-31 01:59:00 -0400] coderanger: so ensure that doesn't cause problems
[2013-07-31 01:59:35 -0400] GreatSUN: would it cause problems if a file in libraries containing a module is loaded twice?
[2013-07-31 02:00:02 -0400] GreatSUN: I guess normally it should either do nothing, issue a warning, or redifine it
[2013-07-31 02:00:12 -0400] GreatSUN: redefine
[2013-07-31 02:01:39 -0400] GreatSUN: coderanger: require File.expand_path('../secondLib', __file__) would load the secondLib.rb in same path as __file__?
[2013-07-31 02:01:46 -0400] GreatSUN: or should it be ./?
[2013-07-31 02:02:20 -0400] coderanger: It should be ..
[2013-07-31 02:02:32 -0400] coderanger: since that will basically be two.rb/../one.rb
[2013-07-31 02:02:36 -0400] coderanger: if that makes sense
[2013-07-31 02:02:49 -0400] GreatSUN: doesn't, but is kind of a logic
[2013-07-31 02:03:19 -0400] GreatSUN: coderanger: ever tried sth. like that?
[2013-07-31 02:03:24 -0400] GreatSUN: I mean this require?
[2013-07-31 02:03:33 -0400] GreatSUN: R00tp0w3r
[2013-07-31 02:03:40 -0400] GreatSUN: hehe
[2013-07-31 02:03:42 -0400] coderanger: Sure, it works
[2013-07-31 02:03:43 -0400] GreatSUN: wrong window
[2013-07-31 02:04:10 -0400] coderanger: Just has the unfortunate side effect of double-execution I mentioned
[2013-07-31 02:04:15 -0400] GreatSUN: my wife wanted password of local networks fileshare for her pics
[2013-07-31 02:04:16 -0400] GreatSUN: :D
[2013-07-31 02:09:55 -0400] GreatSUN: coderanger: do you think something like this could work: if !Required::Module.const_defined?("SecondModule") == false  require File.expand_path('../secondModule', __file)   end
[2013-07-31 02:10:48 -0400] coderanger: Thats more complex than the the guard condition needs to be, but sure
[2013-07-31 02:10:58 -0400] coderanger: Generally I just let the file run twice since it doesn't hurt anything
[2013-07-31 02:11:12 -0400] GreatSUN: just issues a warning though
[2013-07-31 02:11:26 -0400] GreatSUN: just thought it would be nicer ;-)
[2013-07-31 02:11:32 -0400] GreatSUN: but you are right
[2013-07-31 02:11:52 -0400] coderanger: Heh, you don't want to see the number of warnings printed from my normal cookbooks
[2013-07-31 02:13:19 -0400] GreatSUN: if you say it like this, surely not
[2013-07-31 02:13:41 -0400] GreatSUN: coderanger: but I could guess you don't want to see my debug output :D
[2013-07-31 02:14:10 -0400] coderanger: GreatSUN: I consider it I good day if chef-client isn't segfaulting
[2013-07-31 02:14:35 -0400] GreatSUN: coderanger: hmm... ok, you won
[2013-07-31 02:14:36 -0400] GreatSUN: :D
[2013-07-31 02:15:05 -0400] GreatSUN: never experienced that from my cookbooks
[2013-07-31 02:15:38 -0400] GreatSUN: I have been writing some helperutils to support work with different applications
[2013-07-31 02:16:05 -0400] GreatSUN: and also environments, like if you have a cookbook which just differs in small parts for windows and linux for example
[2013-07-31 02:16:59 -0400] GreatSUN: also I have a method in there which takes care of java processes which usually come up in background and you have to wait for some message to appear in logfile
[2013-07-31 02:17:32 -0400] GreatSUN: coderanger: btw... did you know ruby expect is not working properly in some cases?
[2013-07-31 02:18:13 -0400] GreatSUN: in my method to run runinteractive processes I had to reimplement sth. like expect
[2013-07-31 02:18:20 -0400] coderanger: Never used it
[2013-07-31 02:18:49 -0400] GreatSUN: I just experienced a problem with it when application was asking for a password
[2013-07-31 02:18:54 -0400] GreatSUN: and then again
[2013-07-31 02:19:26 -0400] GreatSUN: also PTY is not really safe to use
[2013-07-31 02:19:53 -0400] GreatSUN: btw. would someone of you guys be interested in some code to be contributed?
[2013-07-31 02:20:34 -0400] GreatSUN: then I would discuss that with the guys around me if this is ok
[2013-07-31 02:20:36 -0400] GreatSUN: ;-)
[2013-07-31 02:21:57 -0400] coderanger: I would just shell out to the normal tcl expect or a pyexpect script and force a new pty
[2013-07-31 02:26:23 -0400] timsmith: partial_search cookbook should work with hosted chef and chef 11.6 client right?
[2013-07-31 02:36:38 -0400] spheromak: timsmith, works on 11.6 afaik
[2013-07-31 02:36:45 -0400] spheromak: i.e. im using it on 11.4 and 11.6
[2013-07-31 02:37:26 -0400] timsmith: I'm getting an odd unauthorized error that I didn't get with chef 10
[2013-07-31 02:47:43 -0400] hvn: hi guy, I'm new to Chef, why does chef server does not support i686 version? I cannot find the reason anywhere. Thanks
[2013-07-31 02:49:47 -0400] coderanger: hvn: Because Solr itself can often use 2+GB of RAM is not more, no way a 32-bit server can handle running a chef-server instance
[2013-07-31 02:51:21 -0400] coderanger: hvn: Beyond that, can you even buy 32-bit server hardware anymore? I've not seen any in a long long time
[2013-07-31 02:52:38 -0400] coderanger: hvn: You are welcome to grab the omnibus configs and build the package yourself, will be very much unsupported though
[2013-07-31 02:53:02 -0400] hvn: @coderanger: ok, thanks
[2013-07-31 03:55:02 -0400] julienphalip: Hi there. I've got a project which contains recipes that rely on an old version of chef (0.10.8). So the first thing I do when provisioning a new VM is to install that version of Chef.
[2013-07-31 03:55:21 -0400] julienphalip: However, I'm now getting this error: Could not find a valid gem 'chef' (= 0.10.8) in any repository
[2013-07-31 03:55:42 -0400] julienphalip: Has that version been completely retired? Is it really not possible to install it any more?
[2013-07-31 03:57:14 -0400] julienphalip: It seems to be available here: http://rubygems.org/gems/chef/versions
[2013-07-31 03:57:40 -0400] julienphalip: Not sure what's going on... Any idea? I'm using Ubuntu 10.04.4 LTS by the way
[2013-07-31 04:02:28 -0400] coderanger: julienphalip: `gem install chef -v 0.10.8` just worked fine for me
[2013-07-31 04:03:33 -0400] julienphalip: coderanger: Hey :)
[2013-07-31 04:03:52 -0400] julienphalip: So, if I do "gem install chef -v 0.10.8", I get an error: Unable to resolve dependencies: chef requires net-ssh (~> 2.1.3)
[2013-07-31 04:04:35 -0400] julienphalip: After googling for that error I found a post somewhere (can't remember where) saying I should do this: gem install --pre chef -v 0.10.8
[2013-07-31 04:04:52 -0400] julienphalip: Not sure what the --pre means :)
[2013-07-31 04:05:17 -0400] julienphalip: And this is the command that's giving me the error "Could not find a valid gem 'chef' (= 0.10.8) in any repository"
[2013-07-31 04:05:25 -0400] coderanger: julienphalip: Sounds like you are trying to do this with bundler
[2013-07-31 04:06:18 -0400] julienphalip: coderanger: Hmmm, I'm not sure. I'm using the same recipes as before. The same recipes used to work fine. I haven't changed anything since the last time I run them (a few months ago)
[2013-07-31 04:06:34 -0400] coderanger: How are you doing the chef install?
[2013-07-31 04:07:11 -0400] julienphalip: Simply with gem install
[2013-07-31 04:07:52 -0400] julienphalip: I'm using this shell script: http://dpaste.com/1324155/
[2013-07-31 04:09:39 -0400] coderanger: julienphalip: http://hastebin.com/fobovijuvo.txt
[2013-07-31 04:11:23 -0400] julienphalip: coderanger: This is what I get: http://hastebin.com/raw/mevemoquni
[2013-07-31 04:11:57 -0400] coderanger: hmm, let me try with a really really blank ruby environment
[2013-07-31 04:12:28 -0400] julienphalip: According to 'gem list' I have these versions of net-ssh installed: (2.5.2, 2.2.2)
[2013-07-31 04:13:30 -0400] julienphalip: coderanger: I'm using this vagrant box: http://files.vagrantup.com/lucid32.box
[2013-07-31 04:14:21 -0400] coderanger: I apparently have net-ssh (2.2.2, 2.1.4) in my global gemset
[2013-07-31 04:14:22 -0400] coderanger: grrrr
[2013-07-31 04:14:26 -0400] coderanger: rvm is terrible
[2013-07-31 04:14:30 -0400] julienphalip: :(
[2013-07-31 04:15:29 -0400] coderanger: julienphalip: While I'm arguing with gems, can you try installing net-ssh -v 2.1.4
[2013-07-31 04:15:39 -0400] coderanger: Thats the version chef should be wanting
[2013-07-31 04:16:33 -0400] julienphalip: coderanger: Ok, I'm just rebuilding my box from scratch for good measure right now. Should just be a few mins
[2013-07-31 04:18:10 -0400] coderanger: heh, I have to redownload the lucid image for vagrant 1.2 apparently
[2013-07-31 04:21:10 -0400] julienphalip: Ok so starting from a fresh new box I'm still getting the chef requires net-ssh (~> 2.1.3) error
[2013-07-31 04:21:21 -0400] julienphalip: I'll try installing version 2.1.4 now
[2013-07-31 04:23:07 -0400] julienphalip: coderanger: bingo!
[2013-07-31 04:23:31 -0400] coderanger: So your version of gems is probably just old enough to be buggy
[2013-07-31 04:23:37 -0400] coderanger: and can't solve the deps correctly
[2013-07-31 04:24:48 -0400] julienphalip: Hmm, my python/pip recipe is now failing. I'm getting "Cannot create a file at /var/chef/cache/distribute_setup.py because the enclosing directory (/var/chef/cache) does not exist"
[2013-07-31 04:25:37 -0400] coderanger: Yeah, thats something normally handled by the installer AFAIK, but in a manual gem install you need to create it or do something that forces a file to get created
[2013-07-31 04:29:41 -0400] julienphalip: coderanger: Do you mean this is related to me manually install net-ssh?
[2013-07-31 04:29:56 -0400] coderanger: No, not related
[2013-07-31 04:30:01 -0400] coderanger: Just a Chef internals thing
[2013-07-31 04:30:16 -0400] coderanger: the cache folder is created on demand by things like cookbook_file
[2013-07-31 04:34:19 -0400] julienphalip: coderanger: I've done "mkdir -p /var/chef/cache" and the recipe is now proceeding normally
[2013-07-31 04:34:40 -0400] coderanger: julienphalip: You can do that or you can use a directory resource in Chef :)
[2013-07-31 04:35:03 -0400] julienphalip: Do you know why things might have stopped working? It used to work fine with the exact same recipes.
[2013-07-31 04:35:46 -0400] coderanger: Probably just an ordering thing
[2013-07-31 04:36:14 -0400] coderanger: and re: the install failing, I would guess something changed on rubygems.org that broke your gems
[2013-07-31 04:36:30 -0400] coderanger: lucid ships gems 1.6.2
[2013-07-31 04:37:42 -0400] coderanger: basically if you want to rely on very old stuff, it would be in your best interest to maintain your own base images
[2013-07-31 04:38:57 -0400] julienphalip: coderanger: In this particular case I was using the same base image (the official vagrant lucid32)
[2013-07-31 04:39:34 -0400] coderanger: I mean build your own image with chef installed already so you aren't reliant on a network service (rubygems.org)
[2013-07-31 04:39:50 -0400] julienphalip: Oh I see what you mean
[2013-07-31 04:40:45 -0400] julienphalip: Yes I agree. The fewer you rely on external services, the more stable your system gets.
[2013-07-31 04:44:11 -0400] coderanger: Yeah, it just matters more as you are using old stuff with a continually changing web service
[2013-07-31 05:33:09 -0400] julienphalip: coderanger: The recipes all work now. Thanks again for all your help :)
[2013-07-31 08:21:46 -0400] linuxboy: if I have an attribute file attributes/blah.rb, will it automatically get included if I run recipes/blah.rb?
[2013-07-31 08:23:45 -0400] Zhann: linuxboy: yes
[2013-07-31 08:24:41 -0400] linuxboy: Zhann: and only executing default.rb recipe will only import default.rb attributes?
[2013-07-31 08:24:51 -0400] linuxboy: Zhann: where in the documentation does it say this? I'm struggling to find it
[2013-07-31 08:50:12 -0400] AnthonyAtalanta: Hello all :) Could anybody help with chef omnibus for windows 2008?
[2013-07-31 09:24:24 -0400] linuxboy: Zhann: it looks like it includes all the attribute files
[2013-07-31 09:42:04 -0400] alxism: hi there, is there a way to access the name of the current recipe or cookbook?
[2013-07-31 09:42:40 -0400] alxism: it's not usual to have to set the cookbook name on an attribute to specify a template location.
[2013-07-31 09:42:58 -0400] alxism: like: set[:mongodb][:template_cookbook] = 'my_cookbook'
[2013-07-31 09:43:05 -0400] alxism: I feel bad hardcoding the name
[2013-07-31 09:43:33 -0400] alxism: is there something like:
[2013-07-31 09:43:34 -0400] alxism: set[:mongodb][:template_cookbook] = this.cookbook.name
[2013-07-31 09:43:35 -0400] alxism: ?
[2013-07-31 09:45:46 -0400] alxism: it seems like cookbook_name is what I'm looking for. will try
[2013-07-31 09:46:20 -0400] AikiLinux: Hello , how can i do a percent calculation on a number and get only the full number without the decimal point ?
[2013-07-31 09:51:18 -0400] alxism: (100/3.).floor
[2013-07-31 09:52:10 -0400] alxism: @AikiLinux (100.0/3).floor
[2013-07-31 09:57:57 -0400] AikiLinux: thanks
[2013-07-31 09:58:16 -0400] AikiLinux: i found that .round actually does what i need
[2013-07-31 11:19:22 -0400] dmorales: any idea about a working cassandra cookbook?
[2013-07-31 11:20:21 -0400] dmorales: i'm trying to put to work the community recipe, but without luck for now
[2013-07-31 12:30:09 -0400] ocholetras: hi guys
[2013-07-31 12:30:54 -0400] ocholetras: I whant to add users to the "allow_users" ssh attribute based on the roles applied to the machine
[2013-07-31 12:31:05 -0400] ocholetras: is this possible?
[2013-07-31 12:31:50 -0400] ocholetras: something like PATH=$PATH;/my/new/path
[2013-07-31 12:32:00 -0400] ocholetras: can i "conact" attributes instead of overwrite?
[2013-07-31 12:32:06 -0400] ocholetras: concat*
[2013-07-31 12:35:26 -0400] \du: hello
[2013-07-31 12:35:48 -0400] \du: there is any way to call to include_recipe on a custom provider ?
[2013-07-31 12:40:58 -0400] rBEL_: why would you that?
[2013-07-31 12:43:53 -0400] \du: uhm.. i am using opsworks and now instaling awstats with a recipe, that have a provider that do somethings and restart apache2
[2013-07-31 12:44:10 -0400] \du: and i am having problem with the notifies call
[2013-07-31 12:44:26 -0400] \du: notifies :restart, resources(:service => "apache2"
[2013-07-31 12:44:35 -0400] \du:   notifies :reload, "service[apache2]"
[2013-07-31 12:44:39 -0400] \du:   notifies :restart, "service[apache2]"
[2013-07-31 12:44:56 -0400] \du: don't work for me :1 so i see in the apache2 recipe how it do to restart the service
[2013-07-31 12:45:06 -0400] \du: and include apache2::services
[2013-07-31 12:45:10 -0400] \du: before the call to restart it
[2013-07-31 12:45:33 -0400] \du: https://github.com/aws/opsworks-cookbooks/blob/master-chef-11.4/mod_php5_apache2/recipes/php.rb#L3
[2013-07-31 12:45:42 -0400] \du: so i am trying to do something similar
[2013-07-31 12:48:54 -0400] rBEL_: this wont work in your provider
[2013-07-31 12:49:17 -0400] rBEL_: i think the problem is that the provider is not notifying that it s updated on it's action
[2013-07-31 12:49:41 -0400] rBEL_: check this and make it to send an update when the resource is updated
[2013-07-31 12:50:01 -0400] rBEL_: i'm sure if a service restart (or whatever) is defined in your recipe the service will restarted
[2013-07-31 12:51:01 -0400] \du: oh, no i added this recipe for awstats, https://github.com/fooforge/chef-cookbook_awstats/blob/master/providers/domain_statistics.rb
[2013-07-31 12:51:20 -0400] \du: see in the readme the ussage https://github.com/fooforge/chef-cookbook_awstats
[2013-07-31 12:51:39 -0400] \du: i create a recipe with this and work well, but i have problem with the provider that restart apache2
[2013-07-31 12:52:04 -0400] \du: do you say that better i delete it from there and delegate this action to my recipe where i use the provider like in the usage say?
[2013-07-31 12:52:34 -0400] \du: and not restart apache2 from inside the provider ?
[2013-07-31 12:54:55 -0400] rBEL_: your provider should not restart a service
[2013-07-31 12:55:14 -0400] rBEL_: the resource in the recipe should do that when it gets an update true on the resource..
[2013-07-31 12:57:10 -0400] rBEL_: on top of that, have you got apache2 because this cookbook depends on it
[2013-07-31 12:58:14 -0400] rBEL_: in the example you gave its doing what it should do
[2013-07-31 12:58:30 -0400] \du: yes i have apache2
[2013-07-31 12:58:56 -0400] \du: okey so i will delete the apache restart from there
[2013-07-31 12:59:24 -0400] \du: strange that i have this error: Cannot find a resource matching service[apache2] (did you define it first?)
[2013-07-31 12:59:38 -0400] rBEL_: https://github.com/fooforge/chef-cookbook_awstats/blob/master/providers/domain_statistics.rb
[2013-07-31 12:59:46 -0400] rBEL_: follow this
[2013-07-31 13:00:44 -0400] \du: thanks you rBEL_
[2013-07-31 13:00:47 -0400] rBEL_: there they are passing 'new_resource.updated_by_last_action(true)'
[2013-07-31 13:01:32 -0400] rBEL_: the resource in the recipe calling this will see this and will do a notify if it's true
[2013-07-31 13:02:54 -0400] \du: i am not sure about it
[2013-07-31 13:03:03 -0400] \du: check the resource https://github.com/fooforge/chef-cookbook_awstats/blob/master/resources/domain_statistics.rb
[2013-07-31 13:49:10 -0400] adamjk-dev: anyone know why Vagrant/chef blows up on this?
[2013-07-31 13:49:11 -0400] adamjk-dev: http://pastebin.com/PzNmpwQd
[2013-07-31 14:14:04 -0400] jmav: I'm trying to upload cookbook which I previously downloaded & installed in workstation in get error
[2013-07-31 14:14:18 -0400] jmav: Exception: NameError: uninitialized constant Chef::CookbookUploader::Queue
[2013-07-31 14:14:49 -0400] jmav: Using my locak chef server 11.0.8
[2013-07-31 14:35:07 -0400] adamjk-dev: hey all......
[2013-07-31 14:35:33 -0400] adamjk-dev: when you guys follow the role cookbook pattern, do you wrap that with an actual role? or just point to the blah_cookbook_role in runlists etc.?
[2013-07-31 14:35:51 -0400] adamjk-dev: is there any merit to wrap a role cookbook with an actual role that points to a runlist of the blah_cookbook_role?
[2013-07-31 14:43:28 -0400] bmcgee: how do i get chef to run apt-get update after i install a .deb?
[2013-07-31 14:45:18 -0400] bmcgee: think i found it
[2013-07-31 14:49:23 -0400] juliancdunn: adamjk-dev: I still wrap it with a role
[2013-07-31 14:49:33 -0400] juliancdunn: the role has one item in its run list
[2013-07-31 14:49:58 -0400] juliancdunn: reason being, it's easier to conceptualize a system as having a role rather than a set of recipes
[2013-07-31 14:52:01 -0400] adamjk-dev: juliancdunn: yeah.... that is what we had some of... and I wasn't sure of any benefit of having the roles
[2013-07-31 14:52:13 -0400] jmartin: juliancdunn: you create roles that only contain your role cookbooks?
[2013-07-31 14:52:16 -0400] adamjk-dev: juliancdunn: just seemed like another layer
[2013-07-31 14:52:30 -0400] adamjk-dev: juliancdunn: instead of just having run_list = blah_cookbook_role
[2013-07-31 14:53:12 -0400] juliancdunn: adamjk-dev: it's just a data modelling preference, I suppose
[2013-07-31 14:53:25 -0400] adamjk-dev: juliancdunn: right... I am not bashing it.... either works just fine
[2013-07-31 14:53:29 -0400] juliancdunn: jmartin: yes I do
[2013-07-31 14:53:49 -0400] juliancdunn: until we figure out whether we're going to implemented versioned roles in Chef, I think it's the best way
[2013-07-31 14:53:50 -0400] adamjk-dev: juliancdunn: I guess either you adopt that cookbooks that end in *_role are your roles.... or you have an actual Chef role that you can conceptualize
[2013-07-31 14:54:19 -0400] adamjk-dev: juliancdunn: either way they are functionally equivalient I guess... I just wondered of any benefits to a role over just a cookbook role if there were any
[2013-07-31 14:54:24 -0400] juliancdunn: adamjk-dev: I've always just had one cookbook called "roles" in which I put recipes, one for each role
[2013-07-31 14:54:46 -0400] adamjk-dev: juliancdunn: I saw that in your slides (chef antipatterns) and I recall from your talk at ChefConf 2013
[2013-07-31 14:54:47 -0400] juliancdunn: adamjk-dev: well, if you don't use the role data structure at all then you lose one whole "column" of attribute precedence
[2013-07-31 14:55:18 -0400] adamjk-dev: juliancdunn: hrm..... that is true I guess... and a good point
[2013-07-31 14:55:30 -0400] juliancdunn: and setting role attributes in the role itself rather than the cookbook makes it easier to understand
[2013-07-31 14:55:39 -0400] adamjk-dev: juliancdunn: but you wouldnt set attributes in the role itself as well as the role cookbook... that would seem bad
[2013-07-31 14:55:52 -0400] juliancdunn: no, I'd pick one or the other, for sure
[2013-07-31 14:55:58 -0400] adamjk-dev: juliancdunn: but you lose the versioning on the role... thats the whole point of the role cookbooks
[2013-07-31 14:56:26 -0400] juliancdunn: for me, the "versioning" of the role is more about versioning the run_list
[2013-07-31 14:56:37 -0400] adamjk-dev: juliancdunn: so that is why I was asking.... if you use role cookbooks.... you really "Shouldn't" set anything in the role itself... other than a pointer to the role cookbook.... so that everything is versioned in the cookbook
[2013-07-31 14:56:38 -0400] juliancdunn: the attributes are just data that are easy to roll back
[2013-07-31 14:56:53 -0400] adamjk-dev: juliancdunn: understandable...
[2013-07-31 14:57:25 -0400] juliancdunn: because there are so many other pieces of Chef that are mutating attribute data, I don't consider it enough of a benefit to recommend versioning that data with the role
[2013-07-31 14:57:26 -0400] adamjk-dev: juliancdunn: I guess I just want to version everything possible really...everything is stored in source control if you can
[2013-07-31 14:57:41 -0400] adamjk-dev: juliancdunn: Hrm.... I see your points
[2013-07-31 14:59:04 -0400] adamjk-dev: juliancdunn: well thanks for the discussion at least... i just wondered what others were doing (others who have been doing this longer than me haha)
[2013-07-31 14:59:06 -0400] juliancdunn: I still store my roles in version control despite all this
[2013-07-31 14:59:16 -0400] adamjk-dev: juliancdunn: haha nice
[2013-07-31 14:59:45 -0400] juliancdunn: that way if I screw something up [in attribute data], it's easy to roll back :-)
[2013-07-31 14:59:58 -0400] juliancdunn: run_list screwups == much harder to recover from :-P
[2013-07-31 15:00:21 -0400] adamjk-dev: juliancdunn: indeed, I can deal with that then.... makes sense
[2013-07-31 15:00:22 -0400] jmartin: juliancdunn: no way, just dispose of the server and rebuild :-P
[2013-07-31 15:01:10 -0400] juliancdunn: jmartin: lol... maybe one day we'll converge on a world when that's applicable to all situations :)
[2013-07-31 15:02:07 -0400] jmartin: juliancdunn: yeah i was being a bit tongue in cheek there, but the role cookbook pattern is one im a fan of, thanks for enlightening me on it through your talks
[2013-07-31 15:02:29 -0400] adamjk-dev: indeed
[2013-07-31 15:02:32 -0400] adamjk-dev: i like it a lot....
[2013-07-31 15:02:38 -0400] adamjk-dev: just want to adopt the BEST way possible
[2013-07-31 15:02:41 -0400] adamjk-dev: and stick with it
[2013-07-31 15:02:47 -0400] adamjk-dev: but it can still be used a few different ways
[2013-07-31 15:02:55 -0400] adamjk-dev: (role cookbooks, that is)
[2013-07-31 15:03:59 -0400] juliancdunn: sure, you're welcome jmartin
[2013-07-31 15:04:09 -0400] juliancdunn: adamjk-dev: yes, it can be used in a variety of different ways.
[2013-07-31 15:04:20 -0400] juliancdunn: Jamie Winsor will argue with me and say roles are garbage and never use them, but I'm not that extreme :-)
[2013-07-31 15:04:30 -0400] adamjk-dev: lol
[2013-07-31 15:06:52 -0400] jmav: I'm trying to upload cookbook which I previously downloaded & installed in workstation in get error
[2013-07-31 15:07:06 -0400] jmav: Exception: NameError: uninitialized constant Chef::CookbookUploader::Queue
[2013-07-31 15:07:16 -0400] jmav: Using my local chef server 11.0.8
[2013-07-31 15:15:29 -0400] bean: jmav: i'd make sure your gem version is correct.
[2013-07-31 15:35:17 -0400] jmav: beam: I'm using Ubuntu 12.04.2 LTS on both server & workstation
[2013-07-31 15:35:38 -0400] jmav: workstation uses gem 1.8.15 server is without
[2013-07-31 15:37:36 -0400] jmav: do ia need to install gem also on server
[2013-07-31 15:39:00 -0400] dgarstang: Anyone here using the knife google plugin?
[2013-07-31 15:40:44 -0400] Cope: and in other surveys, we have: is anyone here male, does anyone here like cinzano, and does anyone here lvoe the beegees
[2013-07-31 15:41:13 -0400] Cope: dgarstang: that is: if you have a question, let us know, and we'll help if we can ;)
[2013-07-31 15:43:53 -0400] dgarstang: Cope: Kk... every attempt to run a "knife google server create..." on standard google debian images (and our own custom ones) reports that the image can't be found. However, the same isn't the case for Redhat images. Those... are found...
[2013-07-31 15:45:00 -0400] Cope: curious
[2013-07-31 15:45:40 -0400] dgarstang: Cope: Very. We're in direct contact with the people at google cloud. No useful response from them yet
[2013-07-31 15:45:43 -0400] Cope: does google have a similar concept to availability zones? the ec2 plugin for example wil behave similarly if you are trying to use an image id for us-east in us-west
[2013-07-31 15:46:09 -0400] dgarstang: Cope: they have zones, but the images appear to be usable across multiple zones.
[2013-07-31 15:47:01 -0400] dgarstang: Cope: I don't know who the author is.... would it be opscode? Can I file a bug?
[2013-07-31 15:47:38 -0400] dgarstang: whoa, hang on http://tickets.opscode.com/browse/KNIFE-287
[2013-07-31 15:48:16 -0400] Cope: aha
[2013-07-31 15:48:18 -0400] Cope: good spot
[2013-07-31 15:48:31 -0400] dgarstang: Cope: took me a week. :(
[2013-07-31 15:48:52 -0400] zaargy: ranjibd did the google compute stuff i think
[2013-07-31 15:49:01 -0400] zaargy: he'll be on here later most probably
[2013-07-31 15:49:14 -0400] dgarstang: zaargy: Cool
[2013-07-31 15:50:12 -0400] Cope: the src is at https://github.com/opscode/knife-google
[2013-07-31 15:51:43 -0400] dgarstang: Cope: I'm trying to avoid reading ruby code. :)
[2013-07-31 15:52:52 -0400] gondoi: coderanger: ping
[2013-07-31 16:01:45 -0400] gchristensen: man... chef makes my life easier and that is awesome
[2013-07-31 16:05:03 -0400] lewiz: chef-bin in /opt/chef/bin is running /opt/chef/embedded/bin/ruby (1.9.1).  how can I ensure that ruby-shadow is available for that build of ruby?
[2013-07-31 16:05:41 -0400] lewiz: s/chef-bin/chef-client/g
[2013-07-31 16:05:42 -0400] gchristensen: lewiz: with the chef_gem "ruby-shadow" resource
[2013-07-31 16:05:56 -0400] lewiz: gchristensen: ahhhh!  I didn't realise there was a chef_gem!
[2013-07-31 16:06:00 -0400] lewiz: gchristensen: thanks!
[2013-07-31 16:06:00 -0400] gchristensen: indeed :)
[2013-07-31 16:06:19 -0400] gchristensen: I recommend you don't over-use it, I've managed to break chef with over-using it.
[2013-07-31 16:08:29 -0400] lewiz: gchristensen: that has indeed resolved my issue.  thanks - I think I just need it for that specific one
[2013-07-31 16:08:36 -0400] gchristensen: surely
[2013-07-31 16:20:46 -0400] aneto: I know this channel is not for runit, but my question is still relevant since I'm considering using the runit cookbook. I have been searching google for a while and can't figure  this out. So can someone that uses runit explain something to me?
[2013-07-31 16:21:34 -0400] d```: aneto: I'd suggest just asking your question instead of asking to ask.
[2013-07-31 16:25:32 -0400] aneto: sorry for asking to ask, how I understand it runit watches for a run script in a directory symlinked to its runsvdir. However if a program runs in the background it gets ran every second, unlike foreground processes
[2013-07-31 16:26:20 -0400] clayb: aneto; I've been using the Jenkins cookbook which uses runit.
[2013-07-31 16:27:11 -0400] clayb: I don't know what you mean by it runs every second? In the case of Jenkins, it only re-runs the run script when Jenkins dies
[2013-07-31 16:27:13 -0400] timsmith: anyone know what happens if chef tries to remount a mount that has open files on it.  Does it blow up the chef run?
[2013-07-31 16:29:07 -0400] aneto: yeah I'm just trying understand runits process for running the run script, if a process backgrounds whats to stop runit from trying to restart it every second
[2013-07-31 16:29:14 -0400] coderanger: gondoi: pong
[2013-07-31 16:29:45 -0400] aneto: so this will effect how I write my runit templates I have to account for process that don't always run in the foreground
[2013-07-31 16:29:58 -0400] zrankfrappa: hey all
[2013-07-31 16:30:34 -0400] dgarstang: I'm looking at http://docs.opscode.com/essentials_cookbook_attribute_files.html .... I don't quite understand how node specific attributes are set.... ?
[2013-07-31 16:30:51 -0400] zrankfrappa: quick noob question, do many/any of you use cloud-init in aws with knife to set things like using a web proxy for port 80/443 on new instances?
[2013-07-31 16:32:26 -0400] theCzar: Question: OK so I have an attribute set in my default.rb attributes file: "default['my_cookbook']['version'] = '2.0.3'".  Later in a recipe, so as to not have to type out the whole node['my_cookbook']['version'] reference I assign that to a variable 'version'.  However in my chef run I'm getting a "undefined method '[]' for Nil class' error on that assignment line.  In my experience this error usually comes up when for some reason the
[2013-07-31 16:32:26 -0400] theCzar:  attribute didn't get a value, any idea why this is happening?
[2013-07-31 16:33:36 -0400] theCzar: dgarstang: what are you confused about?
[2013-07-31 16:35:14 -0400] dgarstang: theCzar: how to set node specific attributes
[2013-07-31 16:42:34 -0400] theCzar: dgarstang: so the basic idea is that when you set various default values for attributes, they get overridden if your node or role has other attributes (you can see the level of precedence on that page, I think).  You can set node specific attributes by giving the chef client on the node other attributes in json format.  You can do that with `knife node edit` http://docs.opscode.com/knife_node.html#edit
[2013-07-31 16:44:23 -0400] theCzar: zrankfrappa: I don't, but then I don't use knife.  We're strictly a Caterer shop
[2013-07-31 16:46:39 -0400] dgarstang: theCzar: k...
[2013-07-31 16:47:29 -0400] gondoi: coderanger: I think I found it :D
[2013-07-31 16:48:02 -0400] timsmith: coderanger:  is the install.sh script used to install omnibus up on github somewhere?
[2013-07-31 16:48:14 -0400] gondoi: coderanger: https://github.com/opscode-cookbooks/supervisor/commit/2bc342cf929e8715096d9ada565b78a02666ed2c#commitcomment-3758479
[2013-07-31 16:49:03 -0400] dgarstang: theCzar: Hmm.... where can I find the json files for the nodes...?
[2013-07-31 16:49:28 -0400] theCzar: dgarstang: are you using Chef-Server?
[2013-07-31 16:49:34 -0400] dgarstang: theCzar: yes
[2013-07-31 16:49:57 -0400] theCzar: dgarstang: they're probably stored on there, if I remember right
[2013-07-31 16:50:17 -0400] theCzar: knife allows you to manipulate them from your workstation
[2013-07-31 16:50:23 -0400] zts: theCzar: got a link to Caterer?  It seems to advance the state of the art in un-googleable tools
[2013-07-31 16:50:29 -0400] dgarstang: theCzar: Yes, but like every other file in chef, I want to be able to edit the local copy on the workstation, so I can revision control them, like all other chef config.
[2013-07-31 16:54:19 -0400] theCzar: zts: Here you go: https://github.com/tylerflint/caterer  It's a tool we wrote because none of the existing tools matched our workflow/needs.  It's sort of like knife-solo only more Vagrant-like.  I wrote a prototype in python, but then tyler ported it over to Ruby and fleshed it out.  It's still undergoing a fair amount of development.
[2013-07-31 16:56:44 -0400] zts: theCzar: cool, thankyou - I'll keep an eye on it :)  That sounds like something I could have a use for
[2013-07-31 16:57:07 -0400] theCzar: zts: yeah we use it extensively here at PagodaBox
[2013-07-31 16:57:08 -0400] TrinitronX: is there an easy way to unset some persisting normal attributes for a set of nodes with knife?
[2013-07-31 16:59:43 -0400] zts: dgarstang: you can write the node out to json on your workstation, edit it, revision control it, and upload it again - but you can't prevent cookbooks using "node.set", which will add/update attributes on the node
[2013-07-31 17:00:19 -0400] juliancdunn: TrinitronX: try knife exec
[2013-07-31 17:00:34 -0400] juliancdunn: example: knife exec -E "nodes.transform(:all) {|n| n.normal['foo'].delete('bar') }"
[2013-07-31 17:00:48 -0400] juliancdunn: of course, ":all" will operate on everything, so be careful - you can pass a Solr query
[2013-07-31 17:00:58 -0400] zts: dgarstang: you could mitigate that with a process to compare the server and your repository, and by reviewing cookbooks to ensure they don't set node attributes (could probably even write a foodcritic rule for that)
[2013-07-31 17:03:06 -0400] TrinitronX: @juliancdunn: Wow, very powerful!  Can I pass a 'puts' or 'Chef::Log.info()' in the block to transform in order to see what the query will do before I run it on all nodes?
[2013-07-31 17:04:55 -0400] juliancdunn: TrinitronX: sure, it's just Ruby
[2013-07-31 17:05:07 -0400] dgarstang: zts: i wonder why nodes are treated differently to everything else?
[2013-07-31 17:05:09 -0400] theCzar: What's the best way to have a resource run only if one or both of two other resources run?  Notifies seems like the obvious answer, but I only want this resource to run once if either of the other two resources run.
[2013-07-31 17:05:48 -0400] juliancdunn: theCzar: the default delayed behavior will do that
[2013-07-31 17:05:55 -0400] timsmith: notify from 1 resource to another
[2013-07-31 17:05:57 -0400] timsmith: then use creates
[2013-07-31 17:06:08 -0400] timsmith: with something the resource execution would create
[2013-07-31 17:06:28 -0400] juliancdunn: otherwise, if you need :immediately, set a node attribute in the caller that the other two resources check as a not_if
[2013-07-31 17:08:11 -0400] theCzar: juliancdunn: cool
[2013-07-31 17:08:55 -0400] theCzar: juliancdunn: thanks for the info on delayed, I wasn't sure if that would just end up being called twice.  Although i'll probably go with the attribute approach
[2013-07-31 17:09:15 -0400] zts: dgarstang: they're arguably not (you don't need to store environments, or roles as files either) - the difference is that nodes have state, which can be modified during the chef run
[2013-07-31 17:09:16 -0400] juliancdunn: theCzar: delayed notifications are all queued to the end of the Chef run, so they only run once
[2013-07-31 17:09:27 -0400] juliancdunn: you can imagine making 15 Apache changes but you only want to reload apache once, for instance
[2013-07-31 17:09:34 -0400] zts: dgarstang: perhaps they're more similar to data bags - which can be updated in a chef run too
[2013-07-31 17:09:57 -0400] theCzar: juliancdunn: awesome
[2013-07-31 17:10:11 -0400] zts: dgarstang: what kind of data are you setting on the nodes, that you want to revision control?  (or is it a general philosophical issue?)
[2013-07-31 17:11:17 -0400] zts: actually, sorry, I have to go afk - I'm sure others in here can offer more advice
[2013-07-31 17:12:02 -0400] dgarstang: zts: general philosophical issue ..... don't understans why node state is handled differently.
[2013-07-31 17:13:50 -0400] ggolin: miah, you around by chance?
[2013-07-31 17:13:59 -0400] TrinitronX: @juliancdunn: Thanks for the help!  I haven't used knife exec yet
[2013-07-31 17:14:19 -0400] juliancdunn: TrinitronX: no problem! be careful :-)
[2013-07-31 17:14:55 -0400] TrinitronX: @juliancdunn: Yeah, knife exec seems quite powerful, and potentially dangerous if you don't know what you're doing
[2013-07-31 17:15:07 -0400] juliancdunn: TrinitronX: yup -- with great power comes great responsibility
[2013-07-31 17:15:50 -0400] dgarstang: I'm looking at http://community.opscode.com/cookbooks/sudo .... how would I translate those node attributes into default attributes specified in JSON?
[2013-07-31 17:16:25 -0400] TrinitronX: @juliancdunn: I suppose it might not be a bad idea to export all nodes as json before the knife exec to have a backup?
[2013-07-31 17:17:05 -0400] juliancdunn: could do that, or just try it on a subset of nodes you don't care about before you do that
[2013-07-31 17:17:17 -0400] TrinitronX: cool
[2013-07-31 17:20:26 -0400] ggolin: _really_ confused.
[2013-07-31 17:20:57 -0400] ggolin: i have a resource with three attributes, one of these always ends up as nil.
[2013-07-31 17:21:46 -0400] ggolin: the other two are passed in fine
[2013-07-31 17:27:01 -0400] ggolin: this doesnt make any sense.
[2013-07-31 17:27:47 -0400] troyready: dgarstang, not sure how to do exactly what you're asking.  I place our sudo attributes in environments & roles, which has worked well for us
[2013-07-31 17:30:39 -0400] dgarstang: troyready: actually, it's documented right there, sorry. But, looks like the cookbook can't handle passwordless su for one group, and not for another.
[2013-07-31 17:32:28 -0400] MrBIOS: hi folks...
[2013-07-31 17:32:39 -0400] troyready: dgarstang, Yeah, it's pretty limited. We use its LWRPs to manage sudoers.d files to get more granular control.
[2013-07-31 17:32:45 -0400] MrBIOS: quick question about erb templating with Chef. Can I do something like "<% if not node["environment"] == 'bar' -%>"
[2013-07-31 17:33:16 -0400] MrBIOS: or is there a better way?
[2013-07-31 17:34:43 -0400] cobby: Hello all.  I am trying to create a new provider/resource and when I try and call that resource in a recipe it tells me "Cannot find a resource for <new resource>" however, it is in side the providers and resource directory of the same cookbook.  I am unsure how to fix this name error :(
[2013-07-31 17:34:50 -0400] tabolario: MrBIOS: i would use attributes instead that you set via your environments
[2013-07-31 17:34:53 -0400] ggolin: MrBIOS, probably not the best idea to mix too much logic in there..
[2013-07-31 17:35:13 -0400] MrBIOS: agreed, I want to use attributes, long-term
[2013-07-31 17:35:20 -0400] MrBIOS: just trying to fix something now so I can go go-karting ;)
[2013-07-31 17:35:29 -0400] tabolario: MrBIOS: are you not using environments now to set environment-specific attrs?
[2013-07-31 17:35:34 -0400] ggolin: mr ah then do it. doo eeeeeet.
[2013-07-31 17:35:43 -0400] ggolin: yeah what he'd said.
[2013-07-31 17:35:48 -0400] dgarstang: troyready: don't see much of anything about lwrp's in those docs
[2013-07-31 17:35:49 -0400] MrBIOS: priorities, you know
[2013-07-31 17:35:58 -0400] MrBIOS: heh
[2013-07-31 17:36:07 -0400] troyready: dgarstang, https://github.com/opscode-cookbooks/sudo#lwrp
[2013-07-31 17:36:47 -0400] dgarstang: troyready: oh, moar better docs on github page
[2013-07-31 17:37:13 -0400] MrBIOS: tabolario, I fully inderstand that it's a shitty construct to be avoided, I'm just wondering if it's supposed to work or not :)
[2013-07-31 17:37:25 -0400] ggolin: it will
[2013-07-31 17:37:59 -0400] tabolario: oh yeah it certainly will
[2013-07-31 17:38:05 -0400] tabolario: use node.chef_environment though
[2013-07-31 17:39:04 -0400] tabolario: and i could also go into preferences for how to write that conditional but meh :)
[2013-07-31 17:39:05 -0400] troyready: dgarstang, I think it's technically the same readme (since pretty much every, if not every, opscode cookbook uses its Readme.md for its long description), but I like reading it *much* more on github
[2013-07-31 17:42:14 -0400] cobby: No ideas?
[2013-07-31 17:45:33 -0400] ggolin: cobby, how are you calling it?
[2013-07-31 17:45:45 -0400] aocole: i'm using remote_directory to copy a tree and set owner/group for everything. it seems that only the leaf directories are having their owner/group set correctly. All intermediate dirs are owned by root. any ideas?
[2013-07-31 17:45:48 -0400] cobby: Through a recipe.
[2013-07-31 17:46:15 -0400] cobby: <name of resource> "attribute name" do etc etc
[2013-07-31 17:47:57 -0400] cobby: @aocole recursive true
[2013-07-31 17:48:43 -0400] tabolario: cobby: are you calling it like "<name_of_cookbook>_<resource name>" or just "<resource_name>"?
[2013-07-31 17:48:58 -0400] cobby: its in the same cookbook
[2013-07-31 17:49:52 -0400] tabolario: i believe it still needs to be namespaced with the cookbook name (i could be totally wrong about that)
[2013-07-31 17:49:53 -0400] cobby: chef-repo/cookbooks/{providers,resources}/<name_of_resource>
[2013-07-31 17:50:06 -0400] cobby: that is where I have it placed
[2013-07-31 17:50:15 -0400] cobby: I just can't get it to work for some reason.
[2013-07-31 17:50:27 -0400] ggolin: do what tabolario says
[2013-07-31 17:50:36 -0400] tabolario: could you try calling it as <name_of_cookbook>_<resource name> once?
[2013-07-31 17:50:46 -0400] cobby: ooohhh.
[2013-07-31 17:50:48 -0400] cobby: :)
[2013-07-31 17:50:50 -0400] cobby: momento
[2013-07-31 17:51:14 -0400] tabolario: i can't imagine there would be a special kludge somewhere that let you drop the cookbook name ifyou're calling it from inside that cookbook
[2013-07-31 17:51:40 -0400] cobby:  /sigh.  noob mistake.  Thanks :)
[2013-07-31 17:51:52 -0400] aocole: cobby: thanks, looks like that was it. I find it pretty stupid that that isn't the default behavior
[2013-07-31 17:53:48 -0400] aocole: cobby: spoke too soon- that didn't fix the problem. it still looks like remote_directory does a mkdir -p and then only changes the owner/group on the leaf
[2013-07-31 17:54:07 -0400] cobby: yeah :(
[2013-07-31 17:55:43 -0400] joelnn: aocole: it applies the owner/permissions from the target directory down, doesn't it?
[2013-07-31 17:56:54 -0400] aocole: joelnn: not what i'm seeing. if it needs to create a file /foo/bar/baz.txt it will create /foo/bar and change the owner on that, but /foo has just also been created owned by root
[2013-07-31 17:57:26 -0400] aocole: and adding 'recursive true' didn't change the behavior
[2013-07-31 17:57:52 -0400] joelnn: and /foo is coming from your cookbook?
[2013-07-31 17:58:02 -0400] aocole: yeah, the whole tree is
[2013-07-31 17:58:06 -0400] timsmith: anyone ever get "invalid byte sequence in UTF-8" when using the dpkg provider
[2013-07-31 17:59:50 -0400] joelnn: aocole: thats indeed sort of surprising. I guess perhaps it is sometimes used to overlay files on existing directories, rather than create new directories
[2013-07-31 18:04:05 -0400] aocole: joelnn: cobby: looks like there is a bug for this issue: http://tickets.opscode.com/browse/CHEF-1327
[2013-07-31 18:05:48 -0400] joelnn: aocole: I see that as a bit different. it's clear to me that you might want to set the permissions from the  target directory, which could be /foo/bar/baz/, but I don't think you ever want to set perms below the target
[2013-07-31 18:06:35 -0400] joelnn: because you can't predict whether the directories below the target already exist, which means it would end up differing on whether the directory already exists or not, which is unpredictable
[2013-07-31 18:06:55 -0400] joelnn: hm I said that sort of redundantly
[2013-07-31 18:07:28 -0400] aocole: joelnn: well, in this case i'm copying a tree foo/ in to /tmp, and only leaf directories under foo are having their owner set correctly
[2013-07-31 18:08:07 -0400] aocole: ie, /tmp/foo/bar/baz/ would have its owner set, but /tmp/foo/bar/ is owned by root
[2013-07-31 18:08:20 -0400] joelnn: yeah thats weird.
[2013-07-31 18:08:31 -0400] joelnn: I guess you have to run a chown.
[2013-07-31 18:08:57 -0400] aocole: yeah, that's what i'm going to do, it's just very strange
[2013-07-31 18:11:19 -0400] joelnn: is there a good way to completely blow away all the node attributes from a certain attribute down? like if I have default["foo"]["bar"] = 1, and instead I want to have only node["foo"]["baz"] = 1 ?
[2013-07-31 18:12:06 -0400] joelnn: without knowing in advance that the default["foo"]["bar"] is there
[2013-07-31 18:13:19 -0400] TrinitronX: Anyone want to help me out with a more complex knife exec one-liner?    https://gist.github.com/6124503
[2013-07-31 18:13:55 -0400] aramus_: Hello, the service resource in chef stops running the service before it can actually run, what can I do to fix this?
[2013-07-31 18:14:56 -0400] Touqen: That sentence confuses me
[2013-07-31 18:15:46 -0400] aramus_: Okay, for some reason, the service resource does not properly run a specific service.
[2013-07-31 18:22:47 -0400] techminer: In the cookbook_file resource, does the create action only run if the destination file on the node is missing or different from the file in the cookbook?
[2013-07-31 18:23:13 -0400] techminer: If the file in the cookbook changes, I want it to update the node and then notify a process to restart.
[2013-07-31 18:27:24 -0400] jgood: Hey all, using open source chef-server here, how many nodes could the server handle in theory/practice?
[2013-07-31 18:28:24 -0400] jgood: I.E. how many does your company control with a single server
[2013-07-31 18:35:43 -0400] timsmith: jgood:  Look to the facebook talks to how many nodes chef 11 server can handle.  The answer is many thousands
[2013-07-31 18:36:12 -0400] jgood: timsmith: thanks, I'll check those out\
[2013-07-31 18:36:32 -0400] timsmith: if I remember correctly they have 10k clusters on a server
[2013-07-31 18:36:49 -0400] aslan: hi guys... i am using chef server 0.10 is it possible to upgrade couchdb to its latest version?
[2013-07-31 18:39:21 -0400] doomviking: IIRC FB has chef server clusters
[2013-07-31 18:43:40 -0400] doomviking: but I have between 50-100 at any given time.
[2013-07-31 19:19:20 -0400] troyready: The Facebook chef workflow is nuts. Loved the talk Phil gave at SCaLE this year -- so much to think on. Really opened my eyes to the crazy ways people can use Chef (their workflow looks so alien to mine, but they are solving dramatically different problems)
[2013-07-31 19:20:36 -0400] stormerider: Something I saw in the past was that a suggestion for low memory servers was to break apart the services so different pieces run on different boxes. Is that still viable under Chef 11, and if so, is there a guide to how to do so? Ideally, I want to shift some of the memory usage over to server_b but leave the CPU crunching on server_a.
[2013-07-31 19:21:22 -0400] tabolario: stormerider: I wonder if the omnibus package is parameterizable enough to do that
[2013-07-31 19:21:36 -0400] tabolario: i do know you can select individual components with it
[2013-07-31 19:22:00 -0400] tabolario: and i remember someone mentioning that omnibus is how they deploy private chef
[2013-07-31 19:38:31 -0400] HAPPYFUNBALL: yo
[2013-07-31 19:53:59 -0400] coderanger: stormerider: "not really"
[2013-07-31 19:54:04 -0400] coderanger: stormerider: I mean you can do it by hand
[2013-07-31 19:54:15 -0400] coderanger: stormerider: But OSC server doesn't include much help for multi-machine clusters
[2013-07-31 19:54:49 -0400] coderanger: stormerider: Just install chef-server on both machines, and update your chef-server.rb so they both point to a one of them for erchef and other for solr
[2013-07-31 19:56:16 -0400] stormerider: erchef is cpu-bound and solr is memory-bound, correct?
[2013-07-31 19:56:46 -0400] coderanger: To a first approximation, usually
[2013-07-31 19:57:01 -0400] coderanger: solr can easily become CPU bound if the rate of object changes increases
[2013-07-31 19:57:31 -0400] coderanger: Most DB-ish things eat both RAM and CPU :)
[2013-07-31 19:57:31 -0400] stormerider: if i point the solr config to server_b, will it still start solr on server_a, or will reconfigure realize it's not local and disable it?
[2013-07-31 19:57:48 -0400] coderanger: You would have to configure that, its easy though
[2013-07-31 19:57:57 -0400] coderanger: I think its just solr['enable'] = false or something
[2013-07-31 19:58:12 -0400] stormerider: cool, thanks.
[2013-07-31 20:01:45 -0400] HAPPYFUNBALL: what's the best way to search for installed RPMs in chef?
[2013-07-31 20:02:08 -0400] coderanger: HAPPYFUNBALL: You mean the package resource?
[2013-07-31 20:02:32 -0400] HAPPYFUNBALL: maybe. sec
[2013-07-31 20:03:32 -0400] HAPPYFUNBALL: well, how would I translate this command: rpm -qa | grep somename
[2013-07-31 20:04:25 -0400] coderanger: For what purpose?
[2013-07-31 20:04:41 -0400] coderanger: Usually that would be "package 'somename'" if you are trying to install it
[2013-07-31 20:05:04 -0400] HAPPYFUNBALL: I'm doing some validation stuff
[2013-07-31 20:05:32 -0400] HAPPYFUNBALL: I suppose I could just use a bash resource
[2013-07-31 20:05:34 -0400] siezer: HAPPYFUNBALL chef resources abstract that kind of thing for you
[2013-07-31 20:05:44 -0400] HAPPYFUNBALL: ok
[2013-07-31 20:05:51 -0400] HAPPYFUNBALL: so I'll assume these installed then
[2013-07-31 20:05:52 -0400] HAPPYFUNBALL: thanks
[2013-07-31 20:05:56 -0400] siezer: package foo { action :install }
[2013-07-31 20:06:11 -0400] siezer: will call rpm -qa | grep foo under the hood every chef-client run
[2013-07-31 20:06:22 -0400] siezer: to determine if it needs to run yum -y install foo or not
[2013-07-31 20:07:03 -0400] siezer: you're declaring that package foo should be installed
[2013-07-31 20:07:37 -0400] siezer: the whole point of chef is to create a DSL to abstract the procedural details away for each subject
[2013-07-31 20:07:51 -0400] siezer: aka resource
[2013-07-31 20:08:42 -0400] siezer: likewise with file, and its cousins cookbook_file, remote_file, etc.. checksums are calculated to determine if it needs to take action
[2013-07-31 20:09:34 -0400] siezer: chef-client takes exactly zero action during %99.9999999999999 of all runs
[2013-07-31 20:10:32 -0400] ssd7: COOK Review: https://plus.google.com/hangouts/_/896ab844625b24d9d3c25d1d1354d91ebf07a3ef?hl=en
[2013-07-31 20:50:12 -0400] Sauraus: What is the proper way to execute a 'uname -r' in a recipe?
[2013-07-31 20:50:54 -0400] d```: Sauraus: you can get the same information from ohai
[2013-07-31 20:50:56 -0400] jaimef: node[:data][:ohai]\
[2013-07-31 20:51:21 -0400] Sauraus: say that again without the emotes ;)
[2013-07-31 20:51:42 -0400] nyerup_: Can I check for the existence of a cookbook_file in a recipe?
[2013-07-31 20:52:01 -0400] nyerup_: Basically the question here: http://stackoverflow.com/questions/12571948
[2013-07-31 20:52:13 -0400] dgarstang: ranjibd: ping
[2013-07-31 20:52:18 -0400] d```: Sauraus: node['os_version']
[2013-07-31 20:52:19 -0400] dgarstang: Anyone here using the google knife plugin?
[2013-07-31 20:52:35 -0400] nyerup_: ignore_failure: true does the trick, but spews errors in the log.
[2013-07-31 20:54:45 -0400] siezer: nyerup_ I don't think there's a way to do that
[2013-07-31 20:54:53 -0400] nyerup_: siezer: :(
[2013-07-31 20:55:58 -0400] nyerup_: siezer: That second dude on stackoverflow talks about the resources method  I've looked into that a bit, but obviously I'm not able to catch its exceptions.
[2013-07-31 20:56:54 -0400] siezer: you're not checking for a resouce in the resouce_collection, you're checking for the existence of a source file that should be in the cookbook artifact source
[2013-07-31 20:57:36 -0400] nyerup_: siezer: I'm not sure I understand.
[2013-07-31 20:57:57 -0400] siezer: that'd be like a binary checking for the existence of a library its dynamically linked to
[2013-07-31 20:58:15 -0400] siezer: source "etc/cron.d/#{service}"
[2013-07-31 20:58:33 -0400] siezer: would be your_cookbook/files/whatever
[2013-07-31 20:58:39 -0400] siezer: on the chef-server
[2013-07-31 20:58:45 -0400] nyerup_: Yes.
[2013-07-31 20:58:55 -0400] siezer: the entire cookbook is downloaded, and the recipes are loaded
[2013-07-31 20:59:22 -0400] siezer: so it'd b looking for that file in the cookbook file cache
[2013-07-31 20:59:39 -0400] siezer: s/b/be/
[2013-07-31 20:59:40 -0400] nyerup_: Yes, that makes sense.
[2013-07-31 21:00:20 -0400] nyerup_: And that's not too far from what I expected, conceptually. I just hoped there was an alternative. :)
[2013-07-31 21:00:49 -0400] siezer: unfortunately, I can't think of a workaround other than being dilegent about making sure you have your source files populated
[2013-07-31 21:01:12 -0400] nyerup_: Okay. Thanks.
[2013-07-31 21:01:31 -0400] siezer: diligent even
[2013-07-31 21:09:14 -0400] siezer: has anyone reached a non-chef-repo (~/src/myface-cookbook), guard, chef-spec, chef-zero testing nirvana yet?
[2013-07-31 21:09:22 -0400] siezer: +berks
[2013-07-31 21:09:42 -0400] dgarstang: I don't know if ayone cares or not, but the google knife plugin is basically unusable. It refers to the v1beta14 api which has been deprecated by Google.
[2013-07-31 21:10:43 -0400] siezer: dgarstang can you report it at http://tickets.opscode.com/browse/KNIFE
[2013-07-31 21:12:34 -0400] siezer: reset do you chefspec
[2013-07-31 21:14:10 -0400] dgarstang: siezer: version pulldown.... nothing relevant.
[2013-07-31 21:14:48 -0400] reset: siezer: no, but I do think functional testing on cookbooks is useful
[2013-07-31 21:17:19 -0400] dgarstang: http://tickets.opscode.com/browse/KNIFE-352....
[2013-07-31 21:25:26 -0400] bmcgee: when i run 'berks upload' it doesn't seem to be overwriting the previous upload of my cookbook. The version on the chef server remains unchanged. Am i doing something wrong?
[2013-07-31 21:27:48 -0400] zaargy: anyone knife bootstrapping over winexe?
[2013-07-31 21:28:27 -0400] siezer: berks update
[2013-07-31 21:34:23 -0400] trilitheus_: anyone know if its possible to use svn_arguments within application cookbook application resource?
[2013-07-31 21:35:08 -0400] bmcgee: slezer: tried that, no effect
[2013-07-31 21:35:28 -0400] bmcgee: slezer: ended up bumping the version for now, but that's not a long term fix
[2013-07-31 21:36:48 -0400] dgarstang: Since knife google is broken, any other ideas for bootstrapping google compute instances?
[2013-07-31 21:37:58 -0400] jtimberman: dgarstang: launch them w/ googles tools/console/whatever one would do, and use knife bootstrap when they're up?
[2013-07-31 21:39:15 -0400] trilitheus_: looking in the application resource code it seems not
[2013-07-31 21:39:23 -0400] dgarstang: jtimberman: nah, gotta auotmate it
[2013-07-31 21:40:26 -0400] trilitheus_: jtimberman, thanks for the reply on twitter last week - i felt honoured :)
[2013-07-31 21:45:36 -0400] bmcgee: anyone got any ideas why bersk upload would fail to overwrite the previous upload of a cookbook?
[2013-07-31 21:45:48 -0400] bmcgee: i don't want to keep bumping the version
[2013-07-31 21:46:33 -0400] douglaswth: I think you need to use -f in that case
[2013-07-31 21:47:34 -0400] bmcgee: i'll give that a try
[2013-07-31 21:47:49 -0400] bmcgee: seems a little non-intuitive though...
[2013-07-31 21:48:08 -0400] trilitheus_: bmcgee, -f forces the upload if you have frozen it
[2013-07-31 21:48:35 -0400] bmcgee: how might I have frozen it? :)
[2013-07-31 21:49:11 -0400] trilitheus_: ignore me - i think im wrong
[2013-07-31 21:49:17 -0400] trilitheus_: quickly checks docs
[2013-07-31 21:50:01 -0400] tabolario: dgarstang: use Fog or something similar and bootstrap after that
[2013-07-31 21:50:27 -0400] trilitheus_: bmcgee, yes, if you have frozen it needs a force to overwrite, but if you;ve never frozen and no-one else has then -f will just force an upload even if files are identical
[2013-07-31 21:51:07 -0400] bmcgee: so how might i have inadvertedly frozen it?
[2013-07-31 21:52:52 -0400] trilitheus_: bmcgee, there is a switch on knife cookbook upload
[2013-07-31 21:52:55 -0400] trilitheus_: --freeze
[2013-07-31 21:53:02 -0400] trilitheus_: not sure if berkshelf has similar
[2013-07-31 21:53:06 -0400] bmcgee: i don't recall using that
[2013-07-31 21:53:15 -0400] bmcgee: meh, as long as this flag works
[2013-07-31 21:53:34 -0400] trilitheus_: does it?
[2013-07-31 21:53:54 -0400] bmcgee: no
[2013-07-31 21:54:05 -0400] bmcgee: doesn't do anything 'berks upload -f'
[2013-07-31 21:54:22 -0400] bmcgee: berks upload looks like it's overwriting but it doesn't
[2013-07-31 21:54:28 -0400] trilitheus_: how are you checking your cookbook once you have done berks upload?  gui or knife cookbook show?
[2013-07-31 21:54:33 -0400] bmcgee: looking at it through manage.opscode.com
[2013-07-31 21:54:49 -0400] bmcgee: also when i run it on a node it fails and outputs the source and i can see it's old
[2013-07-31 21:55:01 -0400] trilitheus_: is your berks upload using same environment as your looking at in the gui?
[2013-07-31 21:55:23 -0400] bmcgee: yup
[2013-07-31 21:55:36 -0400] bmcgee: i know because when i bump the version in the metadata it successfully pushes up the new version
[2013-07-31 21:55:57 -0400] trilitheus_: is your node pulling from that environment?
[2013-07-31 21:56:15 -0400] bmcgee: it's the only environment i have
[2013-07-31 21:56:21 -0400] bmcgee: and yes i'm pretty confident it is
[2013-07-31 21:56:38 -0400] bmcgee: again since when i bump the version and run on a node it reflects the changes
[2013-07-31 21:58:03 -0400] trilitheus_: ah - well I have had same sorta confusion at one point and it was because I was uploading to _default but had test/devel/production selected - worth a try
[2013-07-31 21:58:21 -0400] bmcgee: i'll have another crack tomorrow
[2013-07-31 21:58:25 -0400] bmcgee: finished for the night
[2013-07-31 21:58:28 -0400] bmcgee: l8r
[2013-07-31 21:59:19 -0400] Sauraus: ok I am going nuts in trying to get 'uname -r' / ohai node['os_version'] included in my recipy for kernel-devel package
[2013-07-31 21:59:27 -0400] trilitheus_: sometimes I think I'm helping but not sure if doing more harm
[2013-07-31 21:59:53 -0400] Sauraus: I have a ruby %w array with multiple packages one of these is kernel-devel
[2013-07-31 22:00:12 -0400] Sauraus: I need to append the os_version to that kernel-package such that I get the right one installed
[2013-07-31 22:00:28 -0400] Sauraus: And this clearly does not work:   kernel-devel-#{node['os_version']}
[2013-07-31 22:02:08 -0400] trilitheus_: try node.os_version?
[2013-07-31 22:07:04 -0400] Sauraus: @trilitheus node.os_version still no-go
[2013-07-31 22:07:17 -0400] kallistec: Sauraus: what happens instead?
[2013-07-31 22:07:37 -0400] Sauraus: node.os_version is not evaluated
[2013-07-31 22:07:53 -0400] Sauraus: i.e. stdout: 'package[kernel-devel-#{node.osversion}]'[0
[2013-07-31 22:08:06 -0400] Sauraus: whoops typo trying again
[2013-07-31 22:08:25 -0400] kallistec: Sauraus: this is in a %w{} array literal?
[2013-07-31 22:08:30 -0400] Sauraus: yes
[2013-07-31 22:08:39 -0400] Sauraus: %w[] to be precise
[2013-07-31 22:08:41 -0400] kallistec: I don't think that works
[2013-07-31 22:09:12 -0400] Sauraus: This would suggest it should: http://www.zenspider.com/Languages/Ruby/QuickRef.html#arrays
[2013-07-31 22:09:34 -0400] kallistec: Sauraus: it's a capital w
[2013-07-31 22:10:07 -0400] Sauraus: slaps forhead
[2013-07-31 22:11:04 -0400] Sauraus: that did the trick for the substitution
[2013-07-31 22:12:06 -0400] kallistec: Sauraus: cool. FWIW, %q and %Q work similarly IIRC
[2013-07-31 22:12:18 -0400] trilitheus_: did u still have node['os_version'] or node.os_version?
[2013-07-31 22:12:26 -0400] Sauraus: node.os_version
[2013-07-31 22:12:46 -0400] trilitheus_: good glad that worked
[2013-07-31 22:13:15 -0400] Sauraus: fixing up the build-essential cookbook
[2013-07-31 22:15:17 -0400] Sauraus: Any idea why if I run yum install on a package it finds the packages but when the command is run from chef it doesn't?
[2013-07-31 22:17:02 -0400] surge_: I have build-essential in my run list before another recipe that calls route53 (and tries to install the fog gem), but for some reason, chef attempts to install the chef gem first.
[2013-07-31 22:18:12 -0400] surge_: I know I can call FOO.run_action(:run) for execute blocks. Could I do the same to ensure build-essential comes before any gem installs?
[2013-07-31 22:19:58 -0400] trilitheus_: surge_, there is an attribute for build_essential to make sure it is run at compile_time
[2013-07-31 22:20:32 -0400] surge_: Awesome. ty
[2013-07-31 22:20:35 -0400] asharp: can i use the exit code of a bash command in a ruby if statement?
[2013-07-31 22:21:18 -0400] surge_: asharp: Should be able to. Although, I only used it in the context of success/fail
[2013-07-31 22:21:26 -0400] trilitheus_: default['build_essential']['compiletime']  = true
[2013-07-31 22:21:46 -0400] asharp: surge_: sounds good. how can i capture the exit code?
[2013-07-31 22:22:49 -0400] surge_: Are you just evaluating a true/false condition? Or do you want to do something else like a get "127" error?
[2013-07-31 22:23:16 -0400] asharp: surge_: just true/false.
[2013-07-31 22:24:12 -0400] surge_: easy as something like this: not_if "cat /etc/hostname | grep -q #{hostname_content}"
[2013-07-31 22:24:34 -0400] asharp: surge_: great thank you!
[2013-07-31 22:24:51 -0400] surge_: ^ within the context of a file stanza, but it should work just about anywhere
[2013-07-31 22:25:00 -0400] surge_: the resource used shouldn't matter
[2013-07-31 22:25:29 -0400] asharp: yeah i think that's available on all resources
[2013-07-31 22:33:18 -0400] surge_: Sauraus: Chef runs as sudo not sure that would affect your the list of yum repositories that you would see though. I have little experience with RHEL
[2013-07-31 22:33:26 -0400] Majost: Does fnichol drop in here from time to time?
[2013-07-31 22:34:04 -0400] Sauraus: sudo yum install kernel-devel-2.6.32-279.22.1.el6.x86_64 sees the package just fine
[2013-07-31 22:34:42 -0400] surge_: Not sure then...
[2013-07-31 22:35:03 -0400] surge_: maybe someone else who's more familiar w/ that family of linux can chime in.
[2013-07-31 22:39:31 -0400] trilitheus_: Sauraus, what error do you get? just package not found
[2013-07-31 22:39:40 -0400] Sauraus: exactly
[2013-07-31 22:39:53 -0400] Sauraus: Chef::Exceptions::Package[0m -------------------------[0m No version specified, and no candidate version available for kernel-devel-2.6.32-279.22.1.el6.x86_64[0m
[2013-07-31 22:40:34 -0400] Sauraus: yum install using sudo and su works fine on the box
[2013-07-31 22:41:13 -0400] Sauraus: Looks like what ever yum repo view chef-solo has doesn't include the 'scientificrepo' that is added when the box is built
[2013-07-31 22:45:21 -0400] trilitheus_: do you include yum cookbook?
[2013-07-31 22:48:43 -0400] trilitheus_: not entirely sure about yum - the apt cookbook makes sure cache is up to date etc...
[2013-07-31 22:49:09 -0400] Sauraus: yes the yum cookbook is included
[2013-07-31 22:49:59 -0400] Sauraus: how can I show the output of an execute provider? I add an execute 'yum repolist' action :run which should tell me what repos chef sees
[2013-07-31 22:50:09 -0400] trilitheus_: Sauraus, maybe - though this is just a thought - your package need to be called differntly
[2013-07-31 22:50:24 -0400] trilitheus_: the package resource would be kernel-devel and the version is an attribute
[2013-07-31 22:51:04 -0400] Sauraus: ok I can try that path
[2013-07-31 22:51:14 -0400] Sauraus: Makes the code ugly IMHO
[2013-07-31 22:51:22 -0400] miah: Majost: not often, but im sure he's on irc in other channels sometimes.
[2013-07-31 22:53:57 -0400] Sauraus: How can I increase the verbosity of the chef-solo output?
[2013-07-31 22:54:33 -0400] trilitheus_: how are you calling it?
[2013-07-31 22:54:42 -0400] trilitheus_: -l debug will give it on command line
[2013-07-31 22:55:33 -0400] Sauraus: Setting the version attribute fixes the problem :)
[2013-07-31 22:55:38 -0400] Sauraus: thanks for the help guys
[2013-07-31 22:55:52 -0400] trilitheus_: yw
[2013-07-31 22:56:14 -0400] Sauraus: Ah no :(
[2013-07-31 22:56:21 -0400] Sauraus: it ignores the version attribute :(
[2013-07-31 22:56:33 -0400] Sauraus: small screen font hid the error :(
[2013-07-31 22:56:56 -0400] trilitheus_: :(
[2013-07-31 22:58:11 -0400] trilitheus_: did you put the x86_64 on?
[2013-07-31 22:59:02 -0400] Sauraus: yes because os_version includes it
[2013-07-31 22:59:30 -0400] trilitheus_: try without
[2013-07-31 22:59:41 -0400] trilitheus_: that would get by attribute arch
[2013-07-31 23:00:46 -0400] trilitheus_: it's how the yum_package resource builds the package name up I think
[2013-07-31 23:08:35 -0400] dysinger: what's the upgrade path for 'You cannot render partials in this context' (2-level erb render that works fine in 11.4.4) ?
[2013-07-31 23:13:18 -0400] timothys_: Hi all, can someone help me with this problem related to attributes in chef-solo?  I've switched from chef 10 to 11 and somehow attributes i'm setting are not being picked up
[2013-07-31 23:13:19 -0400] timothys_: https://gist.github.com/tsabat/a8f27ae6ac7d1fd3b6f7
[2013-07-31 23:15:17 -0400] joe: hi I'm new to chef
[2013-07-31 23:17:51 -0400] joe: i have a recipe that install a package munin-node, it doesn't install i'm suspecting that it maybe that it has dependencies that is not yet installed on the system, is there anybody experience same problem?
[2013-07-31 23:20:09 -0400] timothysabat: hi Joe, there's also a #learnchef channel
[2013-07-31 23:21:04 -0400] timothysabat: but, in the meanwhile, can you link to a gist of your chef output?
[2013-07-31 23:22:50 -0400] joelnn: any love for http://tickets.opscode.com/browse/CHEF-4125, would be great to have
[2013-07-31 23:25:19 -0400] aslan: does chef-client work with ruby 2.0?
[2013-07-31 23:26:18 -0400] trilitheus_: Sauraus, any luck?
[2013-07-31 23:26:19 -0400] juliancdunn: aslan: 11.6.0 and up do
[2013-07-31 23:26:36 -0400] aslan: juliancdunn: how about 10.26?
[2013-07-31 23:26:40 -0400] juliancdunn: aslan: nope
[2013-07-31 23:26:57 -0400] aslan: juliancdunn: oh shoot so i have to maintin two versions :/
[2013-07-31 23:27:22 -0400] juliancdunn: aslan: or you could start migrating your recipes to 11.6
[2013-07-31 23:27:38 -0400] Sauraus: still stuck trilitheus
[2013-07-31 23:27:43 -0400] juliancdunn: which is probably a good idea anyway - Chef Client 11 has lots of nice new features
[2013-07-31 23:27:47 -0400] Sauraus: It's my Ruby skills that are killing me now
[2013-07-31 23:28:08 -0400] Sauraus: How do I injext the version attribute into this code:
[2013-07-31 23:28:09 -0400] Sauraus: r = package pkg do     action( node['build_essential']['compiletime'] ? :nothing : :install )   end    r.run_action(:install) if node['build_essential']['compiletime']
[2013-07-31 23:28:21 -0400] aslan: juliancdunn: i dont mind the chef client upgrade or the recipe upgrade. the chef server upgrade is going to produce a lot of work
[2013-07-31 23:28:38 -0400] joelnn: aslan: if you install chef omnibus, it comes with its own "embedded" version of ruby. don't know if that helps you out
[2013-07-31 23:28:45 -0400] juliancdunn: aslan: you can run different versions of the client and server
[2013-07-31 23:29:22 -0400] joelnn: client 11 runs against server 10?
[2013-07-31 23:29:28 -0400] aslan: juliancdunn: i have heard chef client 11 and chef server 10 dont go together
[2013-07-31 23:29:29 -0400] Sauraus: trilitheus_ https://gist.github.com/Sauraus/6127168
[2013-07-31 23:30:26 -0400] coderanger: aslan: That is correct
[2013-07-31 23:30:40 -0400] aslan: joelnn: not a big fan of omnibus. I like installing chef as a gem
[2013-07-31 23:30:49 -0400] aslan: its easer to see what is going on
[2013-07-31 23:30:54 -0400] coderanger: aslan: Most things should work though, not as big a deal as 9 -> 10
[2013-07-31 23:31:01 -0400] coderanger: (where it would 100% fail)
[2013-07-31 23:31:15 -0400] aslan: coderanger: is there a list of what doesn't work?
[2013-07-31 23:31:25 -0400] aslan: for instance if environments dont work i dont care
[2013-07-31 23:31:26 -0400] coderanger: aslan: partial search, users API
[2013-07-31 23:31:57 -0400] aslan: coderanger: haven't used any of those. what is user API?
[2013-07-31 23:32:21 -0400] coderanger: Works the same was as hosted users, basically instead of having a client for humans, you have a user
[2013-07-31 23:32:49 -0400] coderanger: Only matters if you are using chef users to drive config
[2013-07-31 23:33:35 -0400] aslan: coderanger: i dont think that would be an issue for me
[2013-07-31 23:34:07 -0400] joelnn: aslan: ok, I think we have completely different ideas on that :) I've decided I don't want to see what goes on with ruby/gem management.
[2013-07-31 23:34:09 -0400] coderanger: Indeed, would be very advanced usage, but nonetheless we still recommend server >= in general
[2013-07-31 23:35:55 -0400] coderanger: aslan: The client includes its version in the headers, so easier for a server to be backwards compatible where it can be nice and explicit
[2013-07-31 23:36:01 -0400] coderanger: whereas on the client you just have to guess
[2013-07-31 23:36:19 -0400] coderanger: (there isn't a full bi-di version negotiation going on)
[2013-07-31 23:36:37 -0400] aocole: /close
[2013-07-31 23:36:40 -0400] aocole: ha
[2013-07-31 23:37:06 -0400] trilitheus_: Sauraus, i am serious ruby noob but i think you would have to have pkg as a hash
[2013-07-31 23:37:21 -0400] aslan: its strange that chef-client gem would not work with ruby 2. do you guys know what fails?
[2013-07-31 23:38:22 -0400] trilitheus_: so pkg = {'kernel-devel' => '2.6.32...'}
[2013-07-31 23:38:34 -0400] aslan: coderanger: i think chef has reached a point where it can standardize the API that the client and the server use and make different versions at least one version past compatible
[2013-07-31 23:38:50 -0400] juliancdunn: aslan: there are a bunch of things, here's one: http://tickets.opscode.com/browse/CHEF-3935
[2013-07-31 23:39:11 -0400] coderanger: aslan: For existing APIs that is exactly what we do, the ones I mentioned are new APIs so they simply don't exist in 10
[2013-07-31 23:39:36 -0400] trilitheus_: then pkg.each { |key, value|
[2013-07-31 23:39:39 -0400] trilitheus_: stuff
[2013-07-31 23:39:40 -0400] trilitheus_: }
[2013-07-31 23:40:16 -0400] aslan: coderanger: so if i am happy with the features of 10 then not having those features on the server is fine right? those calls would not be made from a client 11 to a server 10?
[2013-07-31 23:40:55 -0400] juliancdunn: also a problem with rubygem/format but I don't remember the bug # off the top
[2013-07-31 23:41:01 -0400] coderanger: aslan: Unless your recipe code calls, them is correct
[2013-07-31 23:41:57 -0400] aslan: coderanger: yeah. i am keeping the recipe chef 10 compatible and not making any changes before i am ready for server upgrade
[2013-07-31 23:42:04 -0400] coderanger: aslan: But again, we don't test that configuration. Happy to fix things when possible, but you might be the first to find out if something doesn't work :)
[2013-07-31 23:42:23 -0400] aslan: coderanger: might give it a try at my QA env :)
[2013-07-31 23:42:27 -0400] coderanger: aslan: If you are happy with caveat emptor, then full speed ahead :)
[2013-07-31 23:42:28 -0400] aslan: juliancdunn: thanks
[2013-07-31 23:43:01 -0400] aslan: coderanger: i have no choice right now. the dev team needs ruby 2 desperately
[2013-07-31 23:43:22 -0400] coderanger: There are no words for how much I don't believe that statement
[2013-07-31 23:43:29 -0400] coderanger: I'm sure thats what they are saying though ;-)
[2013-07-31 23:43:54 -0400] aslan: coderanger: =))
[2013-07-31 23:43:59 -0400] aslan: you are right
[2013-07-31 23:44:36 -0400] coderanger: The joys of being ops, some days it is easier to just coddle us crazy devs :)
[2013-07-31 23:44:42 -0400] coderanger: Ask jtimberman about this some time
[2013-07-31 23:45:24 -0400] yfeldblum: why not run chef-10 on ruby-whatever, and run the app on ruby-2.0?
[2013-07-31 23:45:56 -0400] mannyt: coderanger: Truer words have never been spoken
[2013-07-31 23:46:31 -0400] aslan: coderanger: hahah.... for sure
[2013-07-31 23:48:49 -0400] Sauraus: Did OpsCode JIRA just go down?http://tickets.opscode.com/ gives 502 Bad Gateway... looks like a chef run went south... :D
[2013-07-31 23:49:42 -0400] coderanger: Sauraus: ops just emailed internally
[2013-07-31 23:49:44 -0400] coderanger: ETA 15m
[2013-07-31 23:49:53 -0400] Sauraus: ROFL
[2013-07-31 23:50:11 -0400] Sauraus: somebody messed up the cookbook eyh? :D
[2013-07-31 23:50:29 -0400] coderanger: More likely a power cord, I know they are racking new boxes today
[2013-07-31 23:50:34 -0400] cwj: https://twitter.com/opscode_status/status/362698898348847105
[2013-07-31 23:50:38 -0400] aslan: coderanger: oh i just remembered i had one question about couchdb. (until i am on chef server 10) i need to upgrade couchdb to a higher version. i got 0.10 out of the box and it has some bugs. specially when i run the compact task the delete process hangs and the file handles are not released. df would say the space is available. but then you look at lsof and see whole bunch of files from couchdb are being deleted and take a lot of space
[2013-07-31 23:50:44 -0400] cwj: they announced maintenance an hour ago
[2013-07-31 23:51:08 -0400] coderanger: Aww, partypooper :P
[2013-07-31 23:51:18 -0400] cwj: pewp
[2013-07-31 23:51:48 -0400] coderanger: aslan: I think we run some forked version of couch to fix that, I forget the details
[2013-07-31 23:52:21 -0400] coderanger: aslan: I've already purged most couch knowledge from my brain
[2013-07-31 23:52:22 -0400] Sauraus: And here I am wanting to file a showstopper bug in Chef:: Platform for os_version on rhel systems because it includes arch in the version string which is clearly very bad
[2013-07-31 23:52:23 -0400] aslan: coderanger: i was thinking of upgrading couchdb myself
[2013-07-31 23:54:12 -0400] coderanger: aslan: No idea what the ramifications of that are, sorry

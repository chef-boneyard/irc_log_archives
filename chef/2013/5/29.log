[2013-05-29 00:00:18 -0400] Kyle11: (and thats why they don't make them public etc)
[2013-05-29 00:02:40 -0400] stormerider_: well, first, think about whether or not you can use existing cookbooks to do what you want. and then generate a master cookbook for your organization that handles everything that can't be done in an already existing cookbook. imo. :)
[2013-05-29 00:03:28 -0400] stormerider_: my organization's cookbook is mostly fine-tuning tweaks, really, the heavy lifting is community cookbooks
[2013-05-29 00:04:15 -0400] gsymons-di: Otterley: try this: https://gist.github.com/gregsymons/5667058
[2013-05-29 00:04:22 -0400] gsymons-di: Otterley: I think that will work.
[2013-05-29 00:04:24 -0400] Kyle11: Right, I've done that and for example only added a few things to the fail2ban community cookbook.  I have the "base" cookbook for my company, but was wondering do I now make a "web server" company cookbook or have just a company cookbook that houses both the base and webserver
[2013-05-29 00:05:48 -0400] stormerider: imo, both
[2013-05-29 00:06:41 -0400] stormerider: that said, adding things to a community cookbook isn't a good idea. either fork it, and maintain your own fork / submit changes upstream, or create a wrapper cookbook to do things like override templates the way you want.
[2013-05-29 00:06:52 -0400] monokrome: Does anyone know how I can fix an issue where newly created clients don't have access to read templates? They get a 403 Forbidden?
[2013-05-29 00:07:27 -0400] Kyle11: I didn't fork it, I made a company-fail2ban one that does things that the community wouldn't want, and then wrap fail2ban with company-fail2ban
[2013-05-29 00:07:37 -0400] stormerider: perfect :)
[2013-05-29 00:08:02 -0400] stormerider: sounds like you're right on track IMO
[2013-05-29 00:08:04 -0400] Kyle11: But then I said, well should i throw this into company-base cookbook which I did
[2013-05-29 00:08:34 -0400] gmr: Hi there, I'm having an issue after using yum to update chef-server to 11.0.8 from 11.0.6, where it's giving me 500 errors when using knife to add nodes... What's the best way to troubleshoot what the problem could be?
[2013-05-29 00:09:28 -0400] Kyle11: Sounds like I should make a company cookbook and have a recipe for each type of service then?  I hate when you have to pick something when you know so little and could doom yourself for months to come heh
[2013-05-29 00:11:38 -0400] stormerider: i have a recipe for each node function, but if you go more granular that's fine. you dont really have to worry as much about refactoring if there is some overlap/divergence.
[2013-05-29 00:11:40 -0400] monokrome: Are templates not requested over nginx?
[2013-05-29 00:11:55 -0400] monokrome: from clients?
[2013-05-29 00:12:10 -0400] stormerider: that said, with attributes and such, it's really easy to make tweaks on the role level vs. the recipe level.
[2013-05-29 00:12:47 -0400] stormerider: the chef architecture, IMO, makes it pretty hard to paint yourself into a corner, unless you're working with really monolithic cookbooks
[2013-05-29 00:14:37 -0400] monokrome: stormerider: imo Chef is completely painted in a corner :(
[2013-05-29 00:15:06 -0400] monokrome: You get a corner of the corner :(
[2013-05-29 00:15:24 -0400] stormerider: yeah, id really have to disagree with you. but im also not working with vagrant and havent run into any of the bizzare stuff you have.
[2013-05-29 00:15:38 -0400] monokrome: I'm not working with Vagrant for the last few weeks
[2013-05-29 00:15:44 -0400] monokrome: I'm working with a chef master now
[2013-05-29 00:16:26 -0400] monokrome: I can deploy 3 recipes fine. They all use the supervisor cookbook. One of them fails because it gets a '403 Forbidden' on the supervisor main configuration file's template.
[2013-05-29 00:16:27 -0400] stormerider: as for templates, i believe they're served like everything else.
[2013-05-29 00:16:35 -0400] monokrome: That's a mess.
[2013-05-29 00:17:08 -0400] stormerider: gist?
[2013-05-29 00:17:49 -0400] monokrome: Another web server is creating now. Takes 30 minutes for me to reproduce the issue. :(
[2013-05-29 00:17:59 -0400] miah: does the configuration file actually exist in the cookbook?
[2013-05-29 00:18:21 -0400] stormerider: 30 minutes? *blink*
[2013-05-29 00:19:18 -0400] monokrome: miah: Yes, and other recipes use it. This same recipe works on Chef solo, but not on Chef master due to a 403 Forbidden response.
[2013-05-29 00:19:24 -0400] stormerider: why on earth does it take that long to spin up a new setup?
[2013-05-29 00:19:56 -0400] monokrome: Because it has to compile a bunch of things. I want the build server to do it, but it doesn't yet.
[2013-05-29 00:20:34 -0400] monokrome: compiling PIL and NodeJS is a painful process
[2013-05-29 00:20:51 -0400] stormerider: can't you snapshot it at a certain point and use chef to update the snapshot if needed?
[2013-05-29 00:21:01 -0400] monokrome: Also, it takes like 5 minutes for Rackspace to create a server.
[2013-05-29 00:21:24 -0400] monokrome: No, because running `chef-client` just goes "EVERYTHING SUCCEEDED" after the first failure
[2013-05-29 00:23:13 -0400] stormerider: i think you're conflating issues, but... in my setup, i have EC2 AMIs. I use Chef to manage the instances, and every so often after I've made changes via Chef, I build a new AMI from one of the existing instances. it doesn't mean that i can't update things further with chef, it just means that there's less that it has to do if there are no changes to the config.
[2013-05-29 00:23:40 -0400] monokrome: I agree with doing that, but right now we're setting up our first machines
[2013-05-29 00:23:50 -0400] monokrome: There's not much to do anyway
[2013-05-29 00:23:51 -0400] stormerider: i wouldnt want to go from base ubuntu -> configured node solely in Chef, just due to the run time involved. taking a snapshot partway helps lower the install time.
[2013-05-29 00:24:13 -0400] stormerider: so get PIL and NodeJS installed if they're taking a long time, take a snapshot, move on from there.
[2013-05-29 00:24:19 -0400] monokrome: I understand
[2013-05-29 00:24:37 -0400] monokrome: That's a separate problem on the roadmap that I'm not supposed to be working on right now
[2013-05-29 00:24:40 -0400] monokrome: :)
[2013-05-29 00:25:01 -0400] stormerider: if it's bogging down your current work, id rearrange the roadmap :)
[2013-05-29 00:25:20 -0400] stormerider: (disclaimer: im a team of one, though, so i have a lot of autonomy...)
[2013-05-29 00:25:58 -0400] monokrome: Well, it wouldn't be a problem if the Chef master wasn't completely unpredictable and not logging things on top of that. Also, not a team of one here.
[2013-05-29 00:26:20 -0400] stormerider: what chef server version?
[2013-05-29 00:26:53 -0400] monokrome: 11.x
[2013-05-29 00:26:58 -0400] monokrome: Client is also 11.x
[2013-05-29 00:27:31 -0400] stormerider: huh. the logs in 11.x server are... odd, but i havent seen them ignoring stuff.
[2013-05-29 00:28:27 -0400] monokrome: stormerider: nginx/error.log is empty and nginx/access.log has no 403 errors on anyhting except /clients/
[2013-05-29 00:28:43 -0400] monokrome: So, unless the templates are grabbed via something other than nginx then the logs are broken
[2013-05-29 00:28:44 -0400] stormerider: i'd use chef-server-ctl tail
[2013-05-29 00:29:13 -0400] monokrome: well that's neat
[2013-05-29 00:30:05 -0400] snowe2010: so I'm trying to figure out the maven cookbook. Does anyone here have a lot of experience with maven?
[2013-05-29 00:30:50 -0400] Barry_: Is anyone familiar with the Chef REST API?
[2013-05-29 00:30:53 -0400] stormerider: and if you dont see it coming in through there, then id check with wireshark/tcpdump to see if the client is actually talking to the server
[2013-05-29 00:31:36 -0400] gsymons-di: snowe2010: Enough that everytime I see a pom.xml I curl into a ball and cry... which isn't to say that much:)
[2013-05-29 00:31:49 -0400] monokrome: stormerider: If it's not talking to the server and reporting a 403 Forbidden then that's an issue by itself
[2013-05-29 00:32:01 -0400] snowe2010: haha I agree with that sentiment gsymons-di
[2013-05-29 00:32:06 -0400] stormerider: snowe2010: for all my sins, more than i would like to
[2013-05-29 00:32:13 -0400] stormerider: (not via chef, however)
[2013-05-29 00:32:32 -0400] snowe2010: I understand maven, but I'm having trouble moving it over to a vagrant box with chef.
[2013-05-29 00:32:36 -0400] Otterley: gsymons-di, try this on for size: https://gist.github.com/otterley/5667172
[2013-05-29 00:32:42 -0400] Barry_: I'm wondering if it's possible to trigger VM installs using the REST API
[2013-05-29 00:32:54 -0400] snowe2010: I've included the maven recipe in the vagrantfile, but past that I'm stuck
[2013-05-29 00:33:23 -0400] stormerider: monokrome: if it's talking to something else a 403 wouldnt necessarily be unsurprising
[2013-05-29 00:33:50 -0400] gsymons-di: Otterly: That looks even easier:) Should've guess there'd be something right on the node... I jumped down to Attribute without looking:)
[2013-05-29 00:34:00 -0400] monokrome: stormerider: Yeah, but it's saying that it got a 403 Forbidden trying to get a template from the master
[2013-05-29 00:34:09 -0400] monokrome: That's where the reported error it
[2013-05-29 00:34:10 -0400] monokrome: is*
[2013-05-29 00:34:18 -0400] monokrome: The template exists on the mater
[2013-05-29 00:34:20 -0400] monokrome: master*
[2013-05-29 00:34:58 -0400] snowe2010: so I'm actually trying to move services that are run on my computer over to the vagrant box. I include the chef recipe in the vagrantfile, and maven gets installed on the box, but it can't access any repository from there.
[2013-05-29 00:34:59 -0400] stormerider: got a gist handy?
[2013-05-29 00:35:14 -0400] snowe2010: give me a second and I will :)
[2013-05-29 00:35:37 -0400] stormerider: was directed at monokrome, sorry snowe2010-- i have no clue when it comes to vagrant (yet)
[2013-05-29 00:35:58 -0400] monokrome: stormerider: Node finished compiling now
[2013-05-29 00:35:59 -0400] snowe2010: oh darn ok :(
[2013-05-29 00:36:25 -0400] stormerider: snowe2010: but someone else might have an idea based on a gist, it's always handy to have extra details
[2013-05-29 00:36:26 -0400] monokrome: snowe2010: What kind of repositories can't it access? Your git repositories?
[2013-05-29 00:37:40 -0400] snowe2010: umm well here's a gist. http://pastebin.com/cQVA7Bw5
[2013-05-29 00:37:42 -0400] monokrome: snowe2010: If it's the repositories for a private SCM repository then you need to provide a deploy_key option most likely.
[2013-05-29 00:37:59 -0400] snowe2010: it seems that it can't find even the default maven repo
[2013-05-29 00:38:06 -0400] snowe2010: and I tried pinging the repo and it doesn't work
[2013-05-29 00:38:40 -0400] monokrome: snowe2010: Are you running chef-client as root?
[2013-05-29 00:39:00 -0400] monokrome: The errors like this are the first signs of trouble: Specified destination directory cannot be created: /usr/local/m2/repository/org/apache/maven/plugins/maven-compiler-plugin/2.0.2
[2013-05-29 00:39:12 -0400] snowe2010: monokrome, i thought it ran as root by default on vagrant?
[2013-05-29 00:39:29 -0400] snowe2010: oh hmm.
[2013-05-29 00:39:32 -0400] monokrome: It does, but I am not completely sure how your Vagrant setup works so just double checking
[2013-05-29 00:39:42 -0400] snowe2010: how do I check if I'm sudo or not?
[2013-05-29 00:39:57 -0400] snowe2010: can't always remember linux stuff. :\
[2013-05-29 00:40:15 -0400] monokrome: If you're using vagrant's chef-solo provisioner then you should be fine there
[2013-05-29 00:40:17 -0400] stormerider: snowe2010: `id`
[2013-05-29 00:40:23 -0400] stormerider: snowe2010: or `whoami`
[2013-05-29 00:40:46 -0400] snowe2010: well that just tells me I'm vagrant
[2013-05-29 00:40:56 -0400] snowe2010: and ok monokrome thank you.
[2013-05-29 00:40:59 -0400] snowe2010: thanks stormerider
[2013-05-29 00:42:20 -0400] snowe2010: ahh maybe it's because I'm trying to write my local repo to /m2/repo?
[2013-05-29 00:42:33 -0400] snowe2010: can I just arbitrarily write to the root area?
[2013-05-29 00:43:09 -0400] snowe2010: ah looks like I can't.
[2013-05-29 00:44:48 -0400] ryanfrantz: howdy fellow cheffers
[2013-05-29 00:44:52 -0400] ryanfrantz: er, chefs?
[2013-05-29 00:45:09 -0400] ryanfrantz: any good docs out there regarding tweaking the config for chef server 11?
[2013-05-29 00:45:20 -0400] ryanfrantz: the googles find me pages that say the docs are forthcoming
[2013-05-29 00:45:54 -0400] ryanfrantz: and to look for the relevant service attributes in various cookbooks
[2013-05-29 00:46:18 -0400] ryanfrantz: what's not clear is whether one needs to run `chef-server-ctl reconfigure` or simply restart the services
[2013-05-29 00:46:56 -0400] snowe2010: hmm so monokrome, if I install maven with the cookbook, what is the default local repo location?
[2013-05-29 00:55:43 -0400] snowe2010: hmm ok so I got it to the point where it's outputting this now.
[2013-05-29 00:55:44 -0400] snowe2010: http://pastebin.com/kZCWPpSi
[2013-05-29 00:56:12 -0400] monokrome: snowe2010: I don't know anything about Maven, I was just looking at your log.
[2013-05-29 00:56:54 -0400] snowe2010: oh :\ ok well thank you for the help. I wonder if there's a maven/chef/vagrant channel.
[2013-05-29 01:03:39 -0400] monokrome: stormerider: The issue is apparently intermittent, because the deploy worked that time.
[2013-05-29 01:04:38 -0400] stormerider: monokrome: odd.
[2013-05-29 01:05:29 -0400] stormerider: snowe2010: email the chef list, but im pretty sure monokrome is right and it's a permission issue.
[2013-05-29 01:05:57 -0400] monokrome: Hmm.. If I try to `knife ssh`, I get these `WARNING: Failed to connect to  -- SocketError: getaddrinfo: nodename nor servname provided, or not known`
[2013-05-29 01:06:07 -0400] monokrome: so I can't run chef-client on the nodes :(
[2013-05-29 01:06:58 -0400] monokrome: Apparently Chef isn't smart enough to use IP addresses?
[2013-05-29 01:08:34 -0400] stormerider: it tries its best, but you can use -a to set what attribute to use. for ec2 i do `knife ssh -a ec2.public_hostname`, for example
[2013-05-29 01:09:54 -0400] stormerider: you may also have a bogus node in your search results, which you can check via `knife search node <query>` and see what comes back
[2013-05-29 01:10:11 -0400] monokrome: Yeah, I know
[2013-05-29 01:10:14 -0400] monokrome: It finds the right nodes
[2013-05-29 01:10:19 -0400] monokrome: but it uses their FQDN isntead of their IP
[2013-05-29 01:10:46 -0400] stormerider: cloud-based nodes are often going to require massaging for knife ssh, imo
[2013-05-29 01:12:13 -0400] monokrome: why?
[2013-05-29 01:12:29 -0400] monokrome: Same issue after setting up DNS :(
[2013-05-29 01:13:17 -0400] monokrome: It's probably doing reverse DNS for security reasons :(
[2013-05-29 01:14:36 -0400] monokrome: Is there a way to do `knife ssh` by IP instead of FQDN?
[2013-05-29 01:16:51 -0400] snowe2010: sorry for the frequent drops. I'm having trouble with my network connection.
[2013-05-29 01:24:19 -0400] rafaelmagu: monokrome: knife ssh -a ipaddress
[2013-05-29 01:26:05 -0400] monokrome: FATAL: 1 node found, but does not have the required attribute to establish the connection. Try setting another attribute to open the connection using --attribute.
[2013-05-29 01:26:07 -0400] monokrome: What? O_o
[2013-05-29 01:26:36 -0400] rafaelmagu: May be ip_address
[2013-05-29 01:26:42 -0400] rafaelmagu: Not 100% on it
[2013-05-29 01:26:54 -0400] brucelee: hey, what are some ways to automate vm provisioning to the point where chef can take over in a VMWare environment?
[2013-05-29 01:27:35 -0400] monokrome: The attribute is ipaddress
[2013-05-29 01:28:42 -0400] monokrome: I have to run chef-master through knife ssh because I have to update the sudo config
[2013-05-29 01:28:55 -0400] monokrome: but I can't update the sudo config since my user isn't allowed to sudo
[2013-05-29 01:29:00 -0400] monokrome: :'(
[2013-05-29 01:29:25 -0400] monokrome: (and knife ssh isn't working?)
[2013-05-29 01:30:01 -0400] stormerider: if you can't ssh in, then you're not going to be able to knife ssh.
[2013-05-29 01:30:07 -0400] monokrome: Why?
[2013-05-29 01:30:21 -0400] monokrome: Oh
[2013-05-29 01:30:22 -0400] stormerider: because all knife ssh is, is a paralellized version of ssh.
[2013-05-29 01:30:33 -0400] monokrome: The chef master doesn't know the root credentials
[2013-05-29 01:30:38 -0400] monokrome: O_o
[2013-05-29 01:30:41 -0400] monokrome: I guess that makes sense
[2013-05-29 01:30:43 -0400] monokrome: well crap
[2013-05-29 01:32:07 -0400] stormerider: what is chef-master?
[2013-05-29 01:32:18 -0400] monokrome: what?
[2013-05-29 01:32:31 -0400] monokrome: I meant chef server
[2013-05-29 01:32:51 -0400] stormerider: oh, you mean running chef-client on the node?
[2013-05-29 01:33:13 -0400] stormerider: referring to "I have to run chef-master through knife ssh because I have to update the sudo config"
[2013-05-29 01:33:31 -0400] monokrome: yeah I meant chef-client there
[2013-05-29 01:33:33 -0400] monokrome: sorry
[2013-05-29 01:34:27 -0400] stormerider: i will point out that if the chef client is properly set up via cron or init, that updating the chef config will allow it to un-lock the instance, it might just take a while. default interval on the chef-client daemon is 30mins, not sure about cron (might have to manually specify that when selecting cron as a method, not sure, havent done that)
[2013-05-29 01:34:48 -0400] monokrome: stormerider: chef-client checks for updates every 30 minutes?
[2013-05-29 01:35:03 -0400] stormerider: if configured to run as a daemon, that's the default, yes.
[2013-05-29 01:35:37 -0400] monokrome: I got into the server as root
[2013-05-29 01:35:38 -0400] monokrome: woot
[2013-05-29 01:35:41 -0400] stormerider: i dont think the omnibus configures the daemon right away, i think you need to use the chef-client cookbook to add the init script.
[2013-05-29 01:35:57 -0400] monokrome: hmm
[2013-05-29 01:36:28 -0400] monokrome: Well, it's working now
[2013-05-29 01:36:30 -0400] monokrome: Hoooooray
[2013-05-29 01:36:32 -0400] monokrome: :D
[2013-05-29 01:59:03 -0400] banachtarski: How do I install chef workstation on an unsupported platform
[2013-05-29 01:59:51 -0400] banachtarski: for example, a linux that is not ubuntu/rhel/etc
[2013-05-29 02:01:58 -0400] jameson__: anyone had issues with berkshefl and metadata.rb?
[2013-05-29 02:02:08 -0400] jameson__: where default => false results in validationfailed?
[2013-05-29 02:05:02 -0400] jameson__: so strings only?
[2013-05-29 02:07:00 -0400] Grummle: what causes the validation failed?
[2013-05-29 02:07:46 -0400] monokrome: With application_python, do I need to pass a setting to tell Chef to ensure that the daemon runs if the server is rebooted
[2013-05-29 02:07:51 -0400] monokrome: ?
[2013-05-29 02:07:58 -0400] monokrome: nginx is running, but gunicorn never does
[2013-05-29 02:08:53 -0400] jameson__: Grummle: i set "default => false" in metadata.rb
[2013-05-29 02:09:06 -0400] jameson__: when I change it to "false" or nil, it passes
[2013-05-29 02:09:18 -0400] jameson__: the error was "uninitialized constant"
[2013-05-29 02:11:35 -0400] Grummle: I guess I'm not seeing the purpose of default=> false in the metadata.rb
[2013-05-29 02:16:48 -0400] Grummle: What are you trying to do with the defautl=> in the metadata.rb?
[2013-05-29 02:26:04 -0400] jameson__: I thought it was actually checking something
[2013-05-29 02:26:12 -0400] jameson__: I guess it just checks for the strings?
[2013-05-29 03:08:47 -0400] jameson__: anyone know the platform family for freebsd from ohai?
[2013-05-29 03:09:34 -0400] jameson__: *is
[2013-05-29 03:11:00 -0400] juliancdunn: jameson__: it's 'freebsd' :-)
[2013-05-29 03:36:36 -0400] jameson__: juliancdunn: finally getting around to fixing up the mongo cookbook :3
[2013-05-29 03:42:24 -0400] chaosmaker:  Hi all, am I missing something or does not exists any cookbook like the resolver cookbook but for windows?
[2013-05-29 03:43:12 -0400] jameson__: what's the difference between <% if ___ %> and <% if ___ -%>
[2013-05-29 03:43:23 -0400] jameson__: or is there no difference(as I can understand)
[2013-05-29 03:43:25 -0400] coderanger: jameson__: whitespace trimming
[2013-05-29 03:43:32 -0400] jameson__: ah
[2013-05-29 03:44:08 -0400] coderanger: jameson__: tl;dr if you use <%- -%> and the rest of the line is whitespace, the while line will be removed from the output
[2013-05-29 03:44:14 -0400] coderanger: (instead of being blank)
[2013-05-29 03:44:39 -0400] coderanger: Or you can use <% -%> if the < is the start of the line (no spaces before it)
[2013-05-29 03:45:58 -0400] jameson__: so <%- trims leading and -%> trims following white space?
[2013-05-29 03:46:52 -0400] jameson__: oh just folliwng -% is sufficient.
[2013-05-29 03:47:46 -0400] coderanger: yeah
[2013-05-29 04:57:34 -0400] brucelee: can chef configure the VMs using the Fdisk/lvm etc?
[2013-05-29 04:58:47 -0400] n1ko: chef can do pretty much anything you can do from cli
[2013-05-29 05:01:08 -0400] kenke: hi everyone, can someone please tell me that whether response_file can be used in centos/rhel OS?
[2013-05-29 05:04:27 -0400] brucelee: how would i be able to use chef to redetect hdd space, and then use fdisk to assign new space to new partition, add new partition to physical volume, etc...
[2013-05-29 05:06:53 -0400] coderanger: kenke: What response_file do you mean?
[2013-05-29 05:07:04 -0400] coderanger: brucelee: How would you do it by hand?
[2013-05-29 05:07:34 -0400] coderanger: brucelee: Probably something like piping commands to parted?
[2013-05-29 05:11:15 -0400] kenke: All I can find is response_file attribute of Package, and according to http://wiki.opscode.com/plugins/viewsource/viewpagesrc.action?pageId=30409769, it is " only supported on Debian and Ubuntu at this time"
[2013-05-29 05:13:30 -0400] coderanger: kenke: Unless Centos suddenly added debconf support, I don't see that being very useful
[2013-05-29 05:13:50 -0400] coderanger: I am not aware of any similar system used by RPM
[2013-05-29 05:14:15 -0400] coderanger: I also don't think I've ever seen an RPM prompt interactively, which makes it kind of not needed
[2013-05-29 05:14:41 -0400] coderanger: debconf preseeds exist for awful packages with open curses dialogs and ask interactive for config info
[2013-05-29 05:15:44 -0400] kenke: sure, so in centos/rhel, the silent installation could only be implemented when the software support this option, such as ' install xxx -response_file "abc" '
[2013-05-29 05:17:09 -0400] coderanger: What RPM are you installing that is non-silent?
[2013-05-29 05:17:29 -0400] coderanger: That is relatively rare in the RHEL world
[2013-05-29 06:06:58 -0400] BryanWB: anyone wired together serverspec w/ test-kitchen yet?
[2013-05-29 06:09:59 -0400] spox: mmmm, black boxes
[2013-05-29 06:22:36 -0400] spheromak: so BryanWB  / spox  you guys got vagabond/kitchen LXC working with cent6.4 template generators ?
[2013-05-29 06:23:00 -0400] BryanWB: spheromak iirc i did a while ago
[2013-05-29 06:23:05 -0400] spheromak: trying to track down how tose are being made with the underlying linux cook, and how i might be able to fix the url issues
[2013-05-29 06:23:13 -0400] BryanWB: but i haven't kept up on vagabond over last few weeks
[2013-05-29 06:23:15 -0400] spheromak: 6.3 was probably working, but the upstream packages have chnaged
[2013-05-29 06:23:26 -0400] BryanWB: ugh, dunno :(
[2013-05-29 06:23:32 -0400] BryanWB: spox: is the better person to ask
[2013-05-29 06:23:36 -0400] spheromak: yea :D
[2013-05-29 06:23:57 -0400] spheromak: I hsould open an issue. Im just not sure how its generating the values its passing into the lxc cook
[2013-05-29 06:24:20 -0400] spox: i got busy. i was going to release over the weekend :(
[2013-05-29 06:24:36 -0400] spox: but for the cent stuff, what's the issue you're hitting?
[2013-05-29 06:24:38 -0400] spheromak:  no worries Im using it fine, just don't have cent templates on this new jenkins box
[2013-05-29 06:24:40 -0400] spox: maybe it's something simple
[2013-05-29 06:24:44 -0400] spheromak: well
[2013-05-29 06:24:51 -0400] spheromak: lemem run an init and let you know
[2013-05-29 06:24:57 -0400] spheromak: Its wrong urls to the upstream
[2013-05-29 06:25:00 -0400] spheromak: they versioned
[2013-05-29 06:48:49 -0400] dyu: docs site is down?
[2013-05-29 06:50:47 -0400] dyu: it was a local network problem
[2013-05-29 06:50:48 -0400] dyu: sorry
[2013-05-29 07:54:25 -0400] airtonix: hi there, new to chef, ruby and so forth. big django user and I find ruby to be unpleasant. I have a few questions: 1. how to locally test aws opsworks recipes locally with vagrant (considering the stacks and layers data is missing locally) 2. are aws opsworks layers just chef roles? 3. has someone already created a nginx load balancher recipe ?
[2013-05-29 07:54:48 -0400] airtonix: *balancer
[2013-05-29 09:43:34 -0400] AhmedElGamil: What can cause 'knife cookbook site install' to stuck in an infinite loop ?
[2013-05-29 09:44:12 -0400] AhmedElGamil: I have it stuck between installing chef_handler and graphite_handler, it just keeps checking out them one after the other in an infinite loop ! :/
[2013-05-29 09:44:12 -0400] dyu: is this for the rvm cookbook?
[2013-05-29 09:45:22 -0400] AhmedElGamil: @dyu nah, just stuck between chef_handler and graphite_handler, you faced that before with the rvm cookbook ?
[2013-05-29 09:46:09 -0400] dyu: yup. it was a known issues n what was supposed to be the latest stable release. i just updated the code to use a newer version
[2013-05-29 09:47:14 -0400] AhmedElGamil: hmm, It seems to be pulling the latest version of those cookbooks
[2013-05-29 09:47:29 -0400] AhmedElGamil: @dyu so what was the root cause of this in case of the rvm cookbook ? missed up metadata ?
[2013-05-29 09:47:34 -0400] AhmedElGamil: s/missed/messed
[2013-05-29 09:48:49 -0400] dyu: user permissions
[2013-05-29 09:49:35 -0400] dyu: at least that's how i understand it
[2013-05-29 09:49:43 -0400] AhmedElGamil: wow, so basically the uploaded tarball had wrong permissions ..
[2013-05-29 09:49:56 -0400] AhmedElGamil: hmm, any trace of that ? was it mentioned in a github issue or something ?
[2013-05-29 09:50:02 -0400] dyu: much more complicated that that hehe https://github.com/wayneeseguin/rvm/issues/1280#issuecomment-9991017
[2013-05-29 09:50:11 -0400] dyu: *than that
[2013-05-29 09:50:51 -0400] AhmedElGamil: Great, I'll check it out
[2013-05-29 09:50:54 -0400] AhmedElGamil: Extra thanks @dyu
[2013-05-29 09:51:15 -0400] dyu: np, but not sure if it's relevant to your problam :-)
[2013-05-29 10:59:44 -0400] gigo1980: what is the best way to copy from my receipt (cookbook) to an location on the server
[2013-05-29 11:20:56 -0400] isbaran: gigo1980: see cookbook_file
[2013-05-29 11:24:54 -0400] AhmedElGamil: confused by site-cookbooks here
[2013-05-29 11:25:08 -0400] AhmedElGamil: So if i basically create site-cookbooks/attributes/defaults.rb
[2013-05-29 11:25:18 -0400] AhmedElGamil: it totally overrides cookbooks/attributes/defaults.rb ?
[2013-05-29 11:25:40 -0400] AhmedElGamil: or just merges with it .. overriding just the attributes that i put on site-cookbooks/attributes/defaults.rb ?
[2013-05-29 11:26:56 -0400] isbaran: AhmedElGamil: what is a site-cookbook ? you mean the ones from opscode-cookbooks ?
[2013-05-29 11:28:02 -0400] AhmedElGamil: isbaran: Nah, I mean the site-cookbooks dir that gets located within the chef repo .. that basically overrides some settings from the community cookbooks with the purpose of customization and stuff like that
[2013-05-29 11:28:18 -0400] AhmedElGamil: so your opscode-cookbooks goes into chef/cookbooks
[2013-05-29 11:28:40 -0400] AhmedElGamil: and you put files in chef/site-cookbooks to override attributes and add some new functions to the recipes ..
[2013-05-29 11:28:52 -0400] AhmedElGamil: it's a highly used pattern in the chef community AFAIK
[2013-05-29 11:30:03 -0400] isbaran: AhmedElGamil: i get your point, its name doesn't mean anything, you can call it my-cookbooks etc. that pattern is reusing cookbooks, so to override attributes, you'd set your attributes and include_recipe "original" at the end
[2013-05-29 11:30:40 -0400] AhmedElGamil: aha, got it, That's great
[2013-05-29 11:31:19 -0400] AhmedElGamil: At the end or at the beginning ? shouldn't putting the include_recipe in the end override my overrides ?! :)
[2013-05-29 11:31:52 -0400] workmad3: why are you creating a whole new cookbook to override attributes? :/
[2013-05-29 11:32:15 -0400] AhmedElGamil: Well, my chef repo gets a whole lot of mess when i update any cookbooks
[2013-05-29 11:32:25 -0400] AhmedElGamil: I have to manage merge conflicts and stuff like that
[2013-05-29 11:32:30 -0400] AhmedElGamil: And i got tired of that already
[2013-05-29 11:32:44 -0400] AhmedElGamil: so as far as my research got me, that can be solved using site-cookbooks
[2013-05-29 11:32:45 -0400] workmad3: yeah... why are you editing cookbooks at all to override attributes?
[2013-05-29 11:32:58 -0400] isbaran: AhmedElGamil: sorry beginning
[2013-05-29 11:33:01 -0400] AhmedElGamil: you mean i should override them in roles ?
[2013-05-29 11:33:07 -0400] AhmedElGamil: isbaran: Great, thanks man
[2013-05-29 11:33:13 -0400] workmad3: AhmedElGamil: in roles, in environments, on the node itself
[2013-05-29 11:33:25 -0400] workmad3: AhmedElGamil: the whole point of attributes is that you can change them without editing the cookbook
[2013-05-29 11:33:38 -0400] isbaran: workmad3: it gets messy and not flexible over time
[2013-05-29 11:33:40 -0400] isbaran: to use roles etc.
[2013-05-29 11:33:47 -0400] AhmedElGamil: workmad3: yeah yeah i do that for some cookbooks, it's just that in the case of this cookbook, i have to inject some custom recipes too
[2013-05-29 11:33:52 -0400] workmad3: isbaran: not as messy and inflexible as editing cookbooks :P
[2013-05-29 11:34:18 -0400] isbaran: workmad3: it gives you versioning which roles envs etc. doesnt have
[2013-05-29 11:34:31 -0400] isbaran: editing cookbooks is ok actually, not messy
[2013-05-29 11:34:54 -0400] drrk: isbaran: if you keep your role yaml in git you get versioning
[2013-05-29 11:35:22 -0400] isbaran: drrk: i mean version in chef server
[2013-05-29 11:36:06 -0400] drrk: I treat it as a webserver basically, no versioning, all the source kept in git with versioning
[2013-05-29 11:36:52 -0400] workmad3: isbaran: how about cookbook reuse? if you have to edit attributes in the cookbook, you can't have any variance pushed in to customise for a particular environment either
[2013-05-29 11:37:19 -0400] workmad3: isbaran: or do you suggest having an exponential explosion of cookbooks for each combination to override attributes?
[2013-05-29 11:37:57 -0400] isbaran: workmad3: i can keep my nodes in cookbook-0.1 for example and bump versions for testing, development etc.
[2013-05-29 11:38:13 -0400] isbaran: otherwise i get role-1 role-2
[2013-05-29 11:38:48 -0400] workmad3: hmm, just seems messier to me
[2013-05-29 11:39:24 -0400] isbaran: of course its ok if it suits you
[2013-05-29 11:40:02 -0400] isbaran: btw did you upgrade chef server from 10.x to 11
[2013-05-29 11:40:24 -0400] isbaran: i can't upload cookbooks :/
[2013-05-29 11:40:34 -0400] workmad3: did you upgrade your local knife too?
[2013-05-29 11:40:52 -0400] isbaran: i already use 11.4 on workstation
[2013-05-29 11:41:04 -0400] isbaran: i just updated roles but cookbook upload fails
[2013-05-29 11:41:21 -0400] workmad3: hmm... I've not done a server update recently tbh
[2013-05-29 11:41:37 -0400] workmad3: I've tended to blow the entire thing away and reinstall, then reimport everything from git
[2013-05-29 11:41:42 -0400] workmad3: had a couple of bad updates :)
[2013-05-29 11:42:03 -0400] isbaran: i think it is because of ec2 hostname, but setting it in chef-server.rb and reconfiguring didn't work either
[2013-05-29 12:19:15 -0400] Kzim: hi i want to set an attribute in the cookbook but node.default["apache"]["dir"]  does not seams to work and with node.set the attribute will be effective in the next Chef run
[2013-05-29 13:20:46 -0400] MattStratton: Hmm. I am getting this error: Chef::Exceptions::CookbookNotFound, but the apache2 cookbook is in my org. Suggestions?
[2013-05-29 13:22:16 -0400] isbaran: MattStratton: include_recipe "apache2"
[2013-05-29 13:22:38 -0400] MattStratton: yeah, i've got that, but I don't have depends "apache2" in the metadata. going to try that now.
[2013-05-29 13:22:50 -0400] spox: MattStratton: yeah, you need the depends
[2013-05-29 13:22:50 -0400] isbaran: yes that one also
[2013-05-29 13:23:00 -0400] spox: otherwise the cookbook won't be available locally on the node
[2013-05-29 13:28:04 -0400] isbaran: is chef server 11 using couchdb ?
[2013-05-29 13:30:10 -0400] adamjk-dev: isbaran: no, PostgreSQL
[2013-05-29 13:30:43 -0400] spox: isbaran: no
[2013-05-29 13:51:07 -0400] HAPPYFUNBALL_: hola hola
[2013-05-29 13:51:42 -0400] prefix: could someone suggest a good tutorial for using chef server with a handful of nodes + a workstation?
[2013-05-29 13:54:27 -0400] itsmebp: Hello, I am encountering a problem when I try to run chef-client. I'm getting:
[2013-05-29 13:54:29 -0400] itsmebp: Unable to satisfy goal constraint cookbook_name due to constraints on memcached, runit\n
[2013-05-29 13:54:45 -0400] itsmebp: Has anyone seen this before?
[2013-05-29 14:00:03 -0400] gchristensen: is it just me, or is the application / application_ruby cookbook so much magic, its almost not worth fighting?
[2013-05-29 14:07:30 -0400] cwj: gchristensen: i dont know application_ruby specifically, but refactoring around application_python enabled me to stop maintaining a couple of internal cookbooks
[2013-05-29 14:07:54 -0400] cwj: so for that reason it was worthwhile to me, and i got to contribute some bug fixes on it
[2013-05-29 14:07:59 -0400] gchristensen: I see
[2013-05-29 14:08:09 -0400] gchristensen: at this point its causing more grief than I think its saving me
[2013-05-29 14:08:12 -0400] cwj: what kind of problem are you having with application_ruby, maybe i can help?
[2013-05-29 14:08:17 -0400] gchristensen: I'll put together some pastes and ask a proper question :)
[2013-05-29 14:08:21 -0400] cwj: ok
[2013-05-29 14:09:00 -0400] chaosmaker: hi all, maybe I'm missing something, but does exists any resolver cookbook but for windows?
[2013-05-29 14:12:48 -0400] gchristensen: cwj: here is my output and a directory listing: https://gist.github.com/grahamc/b85a35629208fabebf98 -- it seems to be trying to symlink my database.yml (pre-migration configuration files) before even checking out the cached copy of the source
[2013-05-29 14:15:13 -0400] cwj: gchristensen: can you add your recipe to the gist
[2013-05-29 14:15:18 -0400] gchristensen: yep, I'm doing htat now
[2013-05-29 14:16:01 -0400] gchristensen: cwj: updated, let me know if I should provide more
[2013-05-29 14:18:22 -0400] cwj: looking
[2013-05-29 14:20:30 -0400] cassianoleal: I'm trying to bootstrap a node with "knife bootstrap -N node_name -E environment_name -x my_user -i ~/.ssh/id_dsa ec2-stuff.compute.amazonaws.com", but it doesn't seem to pick up the SSH key
[2013-05-29 14:20:48 -0400] cassianoleal: if I "ssh my_user@host -i ~/.ssh/id_dsa" I can log in just fine
[2013-05-29 14:20:51 -0400] cassianoleal: any ideas?
[2013-05-29 14:22:01 -0400] gchristensen: cwj: it worked at one point, but this is a brand new server (isn't that where the problems tend to get displayed?) and this is baffling me.
[2013-05-29 14:22:16 -0400] cwj: gchristensen: so it looks like application_ruby is trying to symlink_before_migrate even though you have tried to set that to an empty hash
[2013-05-29 14:23:43 -0400] gchristensen: cwj: thats the odd thing, it didn't used to make htose symlinks before even putting code on hte filesystem
[2013-05-29 14:24:57 -0400] cwj: according to https://github.com/opscode-cookbooks/application/blob/master/resources/default.rb#L51 the default should be an empty hash anyway
[2013-05-29 14:25:31 -0400] cwj: can you determine which versions of application and application_ruby you are using so we can ensure we're looking at the same source?
[2013-05-29 14:27:17 -0400] gchristensen: cwj: yes, please hold though, for a few moments.
[2013-05-29 14:30:30 -0400] isbaran: anyone using chef server 11.x on EC2 ?
[2013-05-29 14:30:45 -0400] cwj: but the question remains, why is symlink_before_migrate happening inside before_deploy
[2013-05-29 14:30:56 -0400] gchristensen: cwj: exactly :)
[2013-05-29 14:31:05 -0400] gchristensen: I wonder if I should blow up any sort of caching happening on the machine?
[2013-05-29 14:32:37 -0400] cassianoleal: found the problem with knife bootstrap. the "-i" parameter on the CLI has a lower precedence than knife[:identity_file] on knife.rb -- which is definitely not what I was expecting
[2013-05-29 14:32:48 -0400] cwj: cassianoleal: oh thats confusing
[2013-05-29 14:33:13 -0400] cassianoleal: cwj: yep.. once I commented out that line in knife.rb, it worked
[2013-05-29 14:33:25 -0400] gchristensen: oh damn... cwj: I had forgotten, I had deleted the cached copy (trying to resolve other, earlier issues). deleting /var/chef/cache/revision-deploys/myzippykid took care of it, and it re-cloned the repository.
[2013-05-29 14:33:29 -0400] wamilton: weird, you'd think most specific override would win...
[2013-05-29 14:33:32 -0400] cassianoleal: I'll have a look on the ticket system to see if that's already there, as it's definitely a bug in knife
[2013-05-29 14:33:40 -0400] cwj: gchristensen: on further review im not sure it is happening inside before_deploy, since https://gist.github.com/grahamc/b85a35629208fabebf98#file-run-log-L43 shows it is further along
[2013-05-29 14:33:47 -0400] wamilton: cassianoleal: were you specifying knife.rb with -c ?
[2013-05-29 14:34:04 -0400] cwj: gchristensen: oh huh
[2013-05-29 14:34:06 -0400] cassianoleal: wamilton: nope, it's in ~/.chef
[2013-05-29 14:34:34 -0400] gchristensen: cwj: looks like https://github.com/opscode/chef/blob/master/lib/chef/provider/deploy/revision.rb doesn't invalidate the cache properly or something :)
[2013-05-29 14:34:40 -0400] cwj: gchristensen: so perhaps chef thought that the desired revision was already deployed
[2013-05-29 14:34:50 -0400] gchristensen: indeed
[2013-05-29 14:35:22 -0400] wamilton: cwj, gchristensen: have you already dealt with the revision cache in /var/chef ?
[2013-05-29 14:35:30 -0400] cwj: i am thinking about starting to make use of the application lwrp 'force' parameter
[2013-05-29 14:35:47 -0400] cwj: since i dont like being unable to redeploy the same revision, for situations like this
[2013-05-29 14:36:10 -0400] cwj: wamilton: i think gchristensen just discovered that was the problem in his scenario
[2013-05-29 14:36:18 -0400] cwj: cache brustin'
[2013-05-29 14:37:04 -0400] cwj: bbl
[2013-05-29 14:37:23 -0400] gchristensen: wamilton: indeed that was my issue! is there a bug filed for that, do you know?
[2013-05-29 14:38:30 -0400] wamilton: gchristensen: where would the bug be? that's just how deploy works... are you saying application is using deploy wrong?
[2013-05-29 14:39:40 -0400] wamilton: gchristensen: I've not looked at the docs recently for deploy, but in the old wiki there was a paragraph dedicated to retrying a deploy-by-revision by clearing the chef cache and the deploy target dir
[2013-05-29 14:40:09 -0400] gchristensen: what may be wrong is not perfectly clear to me, but it is clear to me it is wrong :P I completely deleted the directories which were being deployed to, it seems to me that the correct behavior would be to say "oh, the deployed code is missing, bust cache."
[2013-05-29 14:40:16 -0400] mutombo: hi guys
[2013-05-29 14:40:30 -0400] mutombo: im a bit at a loss with glassfish, i cant get this recipe working: https://github.com/realityforge/chef-glassfish#glassfishattribute_driven_domain
[2013-05-29 14:41:04 -0400] mutombo: this i smy current role, but i cant get it working: http://pastebin.com/LQFS9EpR
[2013-05-29 14:42:19 -0400] gchristensen: wamilton: does that seem like intended behavior to you? (ie: am I just crazy?)
[2013-05-29 14:43:15 -0400] wamilton: gchristensen: that's a fair point... I imagine that the idea is to allow a layer of interaction that isn't controlled by chef. ie, I'm just some dude who doesn't want that code deployed after all... so I don't want a deploy of the same revision. idk
[2013-05-29 14:44:07 -0400] wamilton: gchristensen: so far, I've had the best luck assuming that there's a reason for the existing design in the core resources/providers... admittedly I'm playing devil's advocate here
[2013-05-29 14:44:17 -0400] gchristensen: I can see that idea, to allow for someone to roll back a deployment with capistrano or something. my suggested logic is if the entire directory is flat out missing, the cache is busted
[2013-05-29 14:44:57 -0400] gchristensen: I don't *like* that idea, but I can see the point :P
[2013-05-29 14:47:36 -0400] wamilton: gchristensen: yeah, what you're saying also makes sense... I think your next course of action would be to open a Jira issue and at least get clarification on why it is how it is
[2013-05-29 14:48:08 -0400] wamilton: gchristensen: or buttonhole an opscode guy in this channel or live with it I guess...
[2013-05-29 14:49:47 -0400] gchristensen: wamilton: :P I plan on getting into Jira or something here as soon as I get this code deployed on theserver :P
[2013-05-29 14:52:06 -0400] wamilton: gchristensen: :P:P:P:P:P:P:P:P
[2013-05-29 14:54:27 -0400] prefix: could someone suggest a good tutorial for using chef server with a handful of nodes + a workstation?
[2013-05-29 14:56:05 -0400] sascha_d: @miah you round?
[2013-05-29 14:56:50 -0400] sascha_d: I'm struggling with the redis cookbook creating two conf files, one with a bind of 127.0.0.1 and one with a bind of 0.0.0.0 and the 127 address winning in /etc/redis.conf
[2013-05-29 14:57:56 -0400] sascha_d: I can't figure out how to get the 0.0.0.0 bind address to win this config fight
[2013-05-29 15:00:44 -0400] eponymi: hello, eponymi here with your daily dumb question. what's the difference between minitest-chef-handler and minitest-handler?
[2013-05-29 15:08:07 -0400] ermajn: how can I define source in my recepie from another cookbook ?
[2013-05-29 15:08:11 -0400] ermajn: is that even possible
[2013-05-29 15:08:42 -0400] wamilton: ermajn: depends on the resource -- template has an attribute for the cookbook
[2013-05-29 15:09:40 -0400] ermajn: i want to install some script from another cookbook, that is located in cookbook_name/files/default/plugins/
[2013-05-29 15:10:32 -0400] wamilton: ermajn: alternatively, I believe every configured resource ends up with a cookbook attribute, so you may be able to just change it by saying script = file 'path/to/blah' do ... end and then setting script.cookbook
[2013-05-29 15:10:51 -0400] wamilton: ermajn: try using the chef-shell
[2013-05-29 15:11:47 -0400] ermajn: wamilton, what do you mean by configured resource?
[2013-05-29 15:12:07 -0400] ermajn: file in my files/default/*
[2013-05-29 15:12:07 -0400] ermajn: ?
[2013-05-29 15:12:27 -0400] ermajn: it is not configured, it is just there, and from recepie.. i want to copy it into some location on my server
[2013-05-29 15:13:03 -0400] wamilton: ermajn: when you do resource_name 'name_attribute' do ... end you are configuring a resource
[2013-05-29 15:13:23 -0400] wamilton: ermajn: you are also implementing a recipe method to do it
[2013-05-29 15:13:33 -0400] wamilton: ermajn: that method returns the configured resource
[2013-05-29 15:14:17 -0400] wamilton: ermajn: so you just need to assign some variable to the return of that method by saying `myvar = resource 'blah' do ... end`
[2013-05-29 15:14:54 -0400] ermajn: wamilton, what is what I have now: #  cookbook_file "/etc/appname/plugins/#{default_plugin}" do
[2013-05-29 15:14:54 -0400] ermajn: #    source "plugins/#{default_plugin}"
[2013-05-29 15:14:54 -0400] ermajn: #    mode 0755
[2013-05-29 15:14:55 -0400] ermajn: #  end
[2013-05-29 15:15:28 -0400] ermajn: but source is not in plugin of my current cookbook, but in other installed cookbook
[2013-05-29 15:16:19 -0400] wamilton: ermajn: that resource has a cookbook attribute
[2013-05-29 15:16:32 -0400] wamilton: ermajn: just set it to the name of the cookbook whence you wish to source
[2013-05-29 15:16:36 -0400] ermajn: ahaa
[2013-05-29 15:16:36 -0400] ermajn: :D
[2013-05-29 15:17:36 -0400] ermajn: wamilton, thanks a lot!
[2013-05-29 15:17:37 -0400] ermajn: :-)
[2013-05-29 15:17:46 -0400] wamilton: ermajn: np
[2013-05-29 15:40:31 -0400] seubert: Could anyone tell me what the 'supports' keyword does functionally? (See: http://docs.opscode.com/essentials_cookbook_metadata.html)
[2013-05-29 15:40:50 -0400] seubert: I'm getting an error with Chef 11 on an older cookbook: Response: Invalid key 'mac_os_x,' for metadata.platforms
[2013-05-29 15:41:00 -0400] seubert: Wondering if I even need that line
[2013-05-29 15:58:36 -0400] cereal_bars: hey, I want to know if is there a way to find IP address of my eth1 and add it to /etc/hosts file? I've hosts recipe already running but it only works with IP address on eth0
[2013-05-29 16:04:09 -0400] ianco_: hrm, how do folks usually chattr a file
[2013-05-29 16:04:12 -0400] ianco_: bash block?
[2013-05-29 16:04:34 -0400] sprack: cereal_bars: ohai has that info
[2013-05-29 16:06:34 -0400] sprack: cereal_bars: network { interfaces { eth1 { addresses
[2013-05-29 16:06:53 -0400] awgross: Is it possible to access modules defined in a another cookbooks library 'without' dumping them into the Recipe/Resource/Provider Namespace?
[2013-05-29 16:07:35 -0400] awgross: At the moment, inside my helper library cookbook, I can access them with Yipit::Util.my_method(blah)
[2013-05-29 16:07:44 -0400] awgross: however, in another cookbook, this seems to not work
[2013-05-29 16:08:25 -0400] awgross: curious where Chef is hiding them after it reads the library files
[2013-05-29 16:26:31 -0400] rracterr: ok, I'm having the most annoying problem getting knife-windows installed on an ubuntu 12.04 server... ruby -v returns 1.9.3p0 and yet gem install knife-windows still bitches that gssapi requires ruby version >= 1.9.1.... anyone have thoughts on it?
[2013-05-29 16:28:01 -0400] chaosmaker: rracterr you can try to add /opt/chef/embedded/bin/ to your path and install the gem again
[2013-05-29 16:28:15 -0400] chaosmaker: in my case it was installing the gem on the system ruby and not working because of this
[2013-05-29 16:28:26 -0400] chaosmaker: after switching to use the gem on the embedded chef it worked fine
[2013-05-29 16:28:41 -0400] jtimberman: rracterr: gem env
[2013-05-29 16:28:48 -0400] jtimberman: will show you what version of ruby gem is going to use
[2013-05-29 16:29:32 -0400] rracterr: that helps, gem seems to think its version 1.8
[2013-05-29 16:31:32 -0400] chaosmaker: I've added it to the path of the user that will use knife, and after installed the knife-windows gem
[2013-05-29 16:32:10 -0400] chaosmaker: you still need to handle the dependecies on the system
[2013-05-29 16:32:25 -0400] chaosmaker: like build-essential libxslt-dev  libxml2-dev
[2013-05-29 16:34:56 -0400] jtimberman: rracterr: could be something awry with the update-alternatives on that system.
[2013-05-29 16:37:45 -0400] gabceb: Hi everybody, quick question. I am a Chef newbie and I am still getting my head around it.
[2013-05-29 16:37:45 -0400] gabceb: For my case I am deploying a server with nginx and nodes. I have gone thru installing knife, cookbooks and deploying to Vagrant with no problems (i am using Chef hosted).
[2013-05-29 16:37:46 -0400] gabceb: Now my question is, my nginx is still using the default conf file. How do I set a specific .conf for my node server. Should I add it to the nginx cookbook? If so what happens when I also need to deploy a Rails server on a different node that also uses nginx?
[2013-05-29 16:38:08 -0400] gabceb: nodes == nodejs (damm you autocorrect)
[2013-05-29 16:38:36 -0400] joenuspl: On chef-server 11.0.8, I am seeing sparodic {badrecord,chef_cookbook_version}  for  /environments/_default/cookbook_versions in the erchef log.  Any hints on tracking this down?
[2013-05-29 16:54:42 -0400] ryker: all of a sudden, i notice knife node edit is not displying right.  The json is all smashed together.  I'm using open source chef on my own server.  Confirmed it's not an editor problem.  10.26.0. anyone else ever have this issue?
[2013-05-29 16:57:22 -0400] jchauncey: Question about the ark cookbook and the cherry_pick action.  If you specify the creates attribute as someling like creates "bin/foobar" should the "bin" be included in the final path or should it just be foobar?
[2013-05-29 17:00:24 -0400] jchauncey: According to the documentation it seems that it should cherry pick the foobar file out of the archive and place it in the location of the path attribute.  So if the path attribute was set to say /usr/local then the final file would be /usr/local/foobar
[2013-05-29 17:05:08 -0400] djstunami: Ohai Chefs!
[2013-05-29 17:05:40 -0400] derks: Hello,  when I do a "knife search node 'role:myrole'" I am not getting results.  with some roles I am, others not (though i know there are nodes with that role)
[2013-05-29 17:05:51 -0400] djstunami: Is there any reason I couldn't install the chef client on the chef server in order to use knife directly on the server?
[2013-05-29 17:05:54 -0400] derks: i just ran "knife index rebuild"... no dice
[2013-05-29 17:06:21 -0400] derks: is there some other way to rebuild the search data?
[2013-05-29 17:07:11 -0400] derks: the server is chef 10.18.2
[2013-05-29 17:16:23 -0400] mwatson: I am able to bootstrap a node, and verify it shows up in the node and client list, I can also see the .pem files on the target node. However, when I try to run chef-client I get an error "Chef encountered an error attempting to load the node data for..."
[2013-05-29 17:16:45 -0400] mwatson: "Failed to authenticate to the chef server (http 401). "
[2013-05-29 17:17:08 -0400] derks: mwatson, I've noticed something like that.  try setting 'node_name' in /etc/chef/client.rb
[2013-05-29 17:17:14 -0400] derks: and then run chef-client
[2013-05-29 17:17:33 -0400] mwatson: will do, thanks
[2013-05-29 17:17:53 -0400] derks: in my experience, bootstrapping isn't setting the node_name that its using, so on the node it defaults to something else
[2013-05-29 17:18:26 -0400] mwatson: so do I need to change it on the local workstation, target node, or both?
[2013-05-29 17:19:06 -0400] derks: its already set in chef server (node/client)... if what I'm saying is right, you just need to set 'node_name' in /etc/chef/client.rb on the target node
[2013-05-29 17:19:08 -0400] mwatson: it's already defined on the local workstation
[2013-05-29 17:19:22 -0400] mwatson: ok I'll do that now
[2013-05-29 17:20:30 -0400] mwatson: still same error
[2013-05-29 17:21:22 -0400] mwatson: do I need to define the client_key as well?
[2013-05-29 17:33:06 -0400] countdigi: ohai - question about re-indexing - having some inconsitent searches lately - here is an example:
[2013-05-29 17:33:13 -0400] countdigi: $ knife exec -E 'search(:node, "monitoring_nagios_checks:* AND datacenter:rack").each { |n| puts n.name }' | grep -i imaging
[2013-05-29 17:33:17 -0400] countdigi: imaging
[2013-05-29 17:33:20 -0400] countdigi: $ ssh iad-ops02 'sudo /opt/chef-server/bin/chef-server-ctl reindex'
[2013-05-29 17:33:21 -0400] countdigi: Removing all index entries and reindexing everything...
[2013-05-29 17:33:28 -0400] countdigi: $ knife exec -E 'search(:node, "monitoring_nagios_checks:* AND datacenter:rack").each { |n| puts n.name }' | grep -i imaging # returns nothing
[2013-05-29 17:33:45 -0400] countdigi: which is what i wanted - that node does not have datacenter == 'rack'
[2013-05-29 17:33:58 -0400] derks: countdigi, I just noticed the same issue.  searching for 'role:myrole' returns nothing on newer roles/nodes
[2013-05-29 17:34:02 -0400] countdigi: my question is do u need to reindex on a periodic basis and what would get this out of sync?
[2013-05-29 17:34:26 -0400] countdigi: running chef-server-11.0.6-1.el6.x86_64
[2013-05-29 17:34:52 -0400] countdigi: derks: well sorry u are having it but glad its just not me - i know there is a higher version for me - what version u on?
[2013-05-29 17:35:50 -0400] derks: countdigi, the server is 10.18.2
[2013-05-29 17:36:16 -0400] derks: not sure what to do about it
[2013-05-29 17:38:45 -0400] Otterley: Opscode: does anyone know why the '-f' flag isn't the default on chef-client installs?
[2013-05-29 17:39:05 -0400] Otterley: it's not clear what optimization is worth the potential memleak tradeoff
[2013-05-29 17:40:51 -0400] eponymi: anyone use berkshelf and chefspec? i've encountered this (http://lists.opscode.com/sympa/arc/chef/2012-11/msg00383.html) issue where berkshelf causes "cookbook not found" errors when running rspec and was hoping someone could offer a fix.
[2013-05-29 17:49:25 -0400] monokrome: jtimberman: Hey. It seems like the opscode gunicorn cookbook doesn't tell gunicorn to start as a service on reboot. Is that accurate?
[2013-05-29 17:49:39 -0400] cwj: monokrome: yes, theres a bug about it
[2013-05-29 17:49:49 -0400] monokrome: Thanks, cwj
[2013-05-29 17:50:06 -0400] cwj: i think the concern is that if you set autostart true it will start gunicorn before the deploy is done
[2013-05-29 17:50:30 -0400] cwj: which i think is why the proposed fix remains unmerged
[2013-05-29 17:50:39 -0400] monokrome: You mean if you are using application_python?
[2013-05-29 17:50:54 -0400] monokrome: Any resource using it can notify gunicorn's service, right?
[2013-05-29 17:51:30 -0400] cwj: in theory yeah
[2013-05-29 17:51:42 -0400] cwj: i dont think the proposed fix tries to notify
[2013-05-29 17:51:49 -0400] cwj: i'd have to take another look at it
[2013-05-29 17:51:59 -0400] cwj: and yes i am thinking about it in terms of application_python cookbook
[2013-05-29 17:52:22 -0400] monokrome: Probably better to think of it in terms of being used by itself before worrying about how other cookbooks are going to use it, right?
[2013-05-29 17:53:11 -0400] cwj: yeah the bug i am thinking of is against application_python, not gunicorn
[2013-05-29 17:53:25 -0400] monokrome: Oh. I'm specifically asking about the gunicorn package.
[2013-05-29 17:54:55 -0400] cwj: doesnt seem like the gunicorn cookbook lwrps do anything in terms of service management
[2013-05-29 17:55:19 -0400] cwj: this is what application_python does
[2013-05-29 17:55:20 -0400] cwj: https://github.com/opscode-cookbooks/application_python/blob/master/providers/gunicorn.rb#L73-L90
[2013-05-29 17:55:21 -0400] monokrome: Yes
[2013-05-29 17:55:22 -0400] monokrome: That's the problem :)
[2013-05-29 17:57:14 -0400] monokrome: A bit of a hack there :(
[2013-05-29 18:01:34 -0400] monokrome: cwj: It seems like gunicorn should be handling the gunicorn service
[2013-05-29 18:01:38 -0400] monokrome: not application_python
[2013-05-29 18:02:02 -0400] cwj: im sure you're welcome to open a ticket about it
[2013-05-29 18:02:33 -0400] monokrome: yeah
[2013-05-29 18:02:34 -0400] cwj: im not sure its a bug, supervisor, bluepill and other cookbooks provide a means to manage services like gunicorn
[2013-05-29 18:02:39 -0400] monokrome: We'll probably have to send a pull request some time
[2013-05-29 18:02:54 -0400] knuckolls`: so, the place i used to work may have done some work to fix this stuff
[2013-05-29 18:03:02 -0400] knuckolls`: unsure if it was turned into a pull request or not
[2013-05-29 18:03:07 -0400] monokrome: O_o
[2013-05-29 18:03:22 -0400] knuckolls`: what exactly are you looking for? i'm just seeing the end of this conversation
[2013-05-29 18:05:19 -0400] monokrome: knuckolls`: I was just trying to figure out why application_python creates a gunicorn service instead of gunicorn.
[2013-05-29 18:06:39 -0400] knuckolls`: ah we ended up having to hack things around to get the gunicorn services to use a specific virtualenv
[2013-05-29 18:06:49 -0400] mattupstate: separation of concerns, i'd guess
[2013-05-29 18:07:00 -0400] knuckolls`: my opinion about the application cookbook and it's dependencies are that there are still some reasonably rough edges
[2013-05-29 18:07:05 -0400] mattupstate: no reason to assume in the gunicorn cookbook that you want to use supervisor
[2013-05-29 18:07:07 -0400] cwj: mattupstate: thats my take
[2013-05-29 18:07:24 -0400] cwj: im willing to accept that assumption when using application_python though
[2013-05-29 18:07:38 -0400] cwj: as it is already really opinionated
[2013-05-29 18:07:43 -0400] mattupstate: yeah, the application cookbooks are very opinionate
[2013-05-29 18:07:46 -0400] mattupstate: doh
[2013-05-29 18:07:49 -0400] monokrome: mattupstate: I never said anything about assuming
[2013-05-29 18:07:50 -0400] knuckolls`: i'm completely on board with that
[2013-05-29 18:08:00 -0400] knuckolls`: i was going to say that supervision should be kept out of the upstream library cookbooks
[2013-05-29 18:08:10 -0400] monokrome: But also no reason for someone to not use application_python, want to use gunicorn, and the gunicorn cookbook doesn't have a service
[2013-05-29 18:08:19 -0400] knuckolls`: and should just be done in wrappers
[2013-05-29 18:08:27 -0400] knuckolls`: but yeah the application stuff is quite opinionated
[2013-05-29 18:08:33 -0400] monokrome: What's the point of the gunicorn cookbook if it doesn't manage anything but installing gunicorn?
[2013-05-29 18:08:40 -0400] mattupstate: gunicorn itself isn't really a service oriented library
[2013-05-29 18:08:47 -0400] monokrome: Might as well just be part of application_python if it was just designed assuming you use that
[2013-05-29 18:09:45 -0400] mattupstate: gunicorn cookbook is handy for rendering gunicorn specific configuration files, which can often depend on the system gunicorn is running on
[2013-05-29 18:09:53 -0400] mattupstate: for instance, the amount of cores the CPU has
[2013-05-29 18:10:27 -0400] monokrome: Right.
[2013-05-29 18:11:02 -0400] mattupstate: the gunicorn and supervisor cookbooks alone are useful
[2013-05-29 18:11:09 -0400] mattupstate: even if you don't use the application cookbooks
[2013-05-29 18:11:56 -0400] mattupstate: unfortunately for me we don't deploy with git where i work, so i can't take advantage of them out of the box :(
[2013-05-29 18:12:09 -0400] mattupstate: so i kinda rolled my own
[2013-05-29 18:12:29 -0400] mattupstate: and that kinda sums up publicly available cookbooks in a nutshell ;
[2013-05-29 18:12:44 -0400] mattupstate: (imho)
[2013-05-29 18:22:24 -0400] jmickle: hey how do i add a custom SSL cert to chef 11 nginx?
[2013-05-29 18:23:54 -0400] dysinger: all of a sudden a bunch of our nodes are downloading all the cookbooks, running chef-client & exploding due to cookbooks missing in /var/chef/cache/cookbooks
[2013-05-29 18:24:44 -0400] dysinger: I was on 10.24.0 on these nodes.  I tried upgrading to 10.26.0 - same
[2013-05-29 18:24:54 -0400] dysinger: I removed all of /var/chef/* & tried again
[2013-05-29 18:24:55 -0400] dysinger: same
[2013-05-29 18:25:24 -0400] dysinger: this is chef-client & platform
[2013-05-29 18:25:38 -0400] dysinger: I asserted all my cookbooks were uploaded & up to date on platform
[2013-05-29 18:26:00 -0400] dysinger: with a knife cookbook upload -a
[2013-05-29 18:26:00 -0400] JasonG_: jmickle: i did it with the following in a wrapper cookbook recipe:
[2013-05-29 18:26:14 -0400] jmickle: ok thanks
[2013-05-29 18:26:29 -0400] JasonG_: node.override['chef-server']['configuration']['nginx']['ssl_certificate'] = '/etc/ssl/certs/cdx/cert.biz.crt'
[2013-05-29 18:26:29 -0400] JasonG_: node.override['chef-server']['configuration']['nginx']['ssl_certificate_key'] = '/etc/ssl/certs/cdx/cert.biz.key'
[2013-05-29 18:26:43 -0400] jmickle: awesome
[2013-05-29 18:26:45 -0400] jmickle: then do a reconfigure?
[2013-05-29 18:27:07 -0400] JasonG_: i honestly haven't tested it with a reconfig, it worked with a fresh install. sorry
[2013-05-29 18:27:20 -0400] jmickle: ok no problem thank you
[2013-05-29 18:27:24 -0400] JasonG_: that doesn't include putting the keys in place of course
[2013-05-29 18:27:34 -0400] JasonG_: sorry, not keys but vert files
[2013-05-29 18:27:36 -0400] JasonG_: cert files
[2013-05-29 18:28:14 -0400] jmickle: yeah i already did that thanks
[2013-05-29 18:28:30 -0400] jmickle: i added it manually to the nginx conf but was afraid of it getting overridden i think your override works
[2013-05-29 18:29:56 -0400] joenuspl: before I embark on this, has anyone already written logrotate configs for chef-server-11?
[2013-05-29 18:42:08 -0400] JasonG_: question: I'm having massive resource ordering problems when using roles -- its clearly not going in the order I specify in the run list. Yet another reason to avoid roles?
[2013-05-29 18:42:19 -0400] JasonG_: Chef 11, btw
[2013-05-29 18:45:58 -0400] paulmooring: JasonG_: Things are always executed in the order they're listed in the run_list
[2013-05-29 18:46:36 -0400] JasonG_: not in my case at least. this is while bootstrapping a node with knife and a single role
[2013-05-29 18:46:52 -0400] pwf: jtgiri_: did you ever solve your "Unsupported `json_class` type 'Chef::WebUIUser'" error?
[2013-05-29 18:47:01 -0400] pwf: found you asking about it in the #chef logs, but nobody ever responded to you :/
[2013-05-29 18:47:02 -0400] paulmooring: What makes you say it's not?
[2013-05-29 18:47:08 -0400] jtgiri_: Yeah
[2013-05-29 18:47:37 -0400] pwf: did you just delete that file from your downloaded stuff?
[2013-05-29 18:47:49 -0400] pwf: i think we still want to keep our webui key the same...
[2013-05-29 18:48:10 -0400] JasonG_: I have a "base" role (ntp, little stuff) and a build-essential recipe running before a mongo replica set recipe it tries to build the mongo stuff before it finishes with build-essential, which is needed so it breaks
[2013-05-29 18:48:12 -0400] JasonG_: run_list([ "role[base]", "recipe[build-essential]", "recipe[cdx-mongo-repl-qa]" ])
[2013-05-29 18:48:53 -0400] paulmooring: ah, so those recipes are probably running in the correct order but you're getting hit with compile vs execute phase
[2013-05-29 18:49:13 -0400] jtgiri_: member:pwf: thanks :) I think it was due to "validator": true for admin user, I removed admin.json and it worked fine
[2013-05-29 18:49:37 -0400] pwf: ok, i will give it a shot. thank you!
[2013-05-29 18:50:25 -0400] paulmooring: JasonG_: if it's the Opscode build-essential cookbook, try setting the node['build_essential']['compiletime'] attribute to true
[2013-05-29 18:50:52 -0400] JasonG_: paulmooring: interesting. I am using that cookbook, I'll give that a shot
[2013-05-29 18:51:21 -0400] JasonG_: thanks
[2013-05-29 18:51:25 -0400] paulmooring: also per your original statement, things are executed in the order they're listed in the role
[2013-05-29 18:51:35 -0400] paulmooring: and if the same recipe is listed twice, the first wins
[2013-05-29 18:53:11 -0400] jtgiri_: pwf: Just to let you know that I was having this issue when I was trying to import the backup from chef 10 to 11
[2013-05-29 18:53:58 -0400] awgross: Anyone here particularly familiar with how Chef loads libraries.  It seems like there is more magic than it wrapping Kernel.load
[2013-05-29 18:54:59 -0400] awgross: I define modules in a cookbook in library files
[2013-05-29 18:55:14 -0400] awgross: I am able to call those modules from inside the cookbook where they are defined
[2013-05-29 18:55:14 -0400] pwf: yeah, that's what we're doing... can't even find the file that it's doing this for though
[2013-05-29 18:55:35 -0400] awgross: however, when I call it from another cookbook, I can't see the modules
[2013-05-29 18:56:35 -0400] jtgiri_: pwf: tail the server logs while you are importing, you will get a clue on which file it's complaining about
[2013-05-29 18:56:53 -0400] jtgiri_: also you can try grep -ri validator *
[2013-05-29 18:56:55 -0400] awgross: there is no injection inside the libraries
[2013-05-29 18:59:02 -0400] awgross: may jsut punt this to the mailing list
[2013-05-29 19:00:35 -0400] geekbri: awgross: does the cookbook you are calling them from "depend" on the cookbook the libraries reside in?
[2013-05-29 19:01:02 -0400] awgross: geekbri: metadata all checks out
[2013-05-29 19:01:09 -0400] awgross: during debug, I can see the library get loaded
[2013-05-29 19:01:09 -0400] geekbri: hrm
[2013-05-29 19:01:27 -0400] awgross: i just cannot access the methods in the same way that I can when calling from the original cookbook
[2013-05-29 19:02:34 -0400] geekbri: any chance I can see the offending code bits?
[2013-05-29 19:02:35 -0400] pwf: we only have one thing with validator: true, and that's chef-validator
[2013-05-29 19:02:38 -0400] pwf: just the client, no users
[2013-05-29 19:03:47 -0400] geekbri: awgross: https://github.com/opscode/chef/blob/master/lib/chef/run_context/cookbook_compiler.rb#L175-L186
[2013-05-29 19:03:52 -0400] eponymi: so where does somebody open issues about cookbooks at opscode-cookbooks/[cookbook_name]?
[2013-05-29 19:04:05 -0400] bearrito: Anyone have experience with the application or application_python cookbooks?
[2013-05-29 19:04:07 -0400] geekbri: awgross: looks like it is indeed just called Kernel.load
[2013-05-29 19:04:09 -0400] eponymi: foodcritic is failing on my cookbook bc of apache2 cookbook
[2013-05-29 19:04:12 -0400] awgross: geekbri:  i was reading through that, they basically call Kernel.load
[2013-05-29 19:04:54 -0400] geekbri: awgross: I wish I could say I'm 100% positive, but I'm pretty sure I've loaded modules then called them before from other cookbooks that just "depends" on the cookbook that has the modules rb files
[2013-05-29 19:05:20 -0400] awgross: geekbri: Chef keeps complaining Chef::Recipe::MyModule namespace doesnt exist
[2013-05-29 19:05:29 -0400] awgross: it is forcing the recipe class
[2013-05-29 19:05:32 -0400] awgross: even when prefixed with ::
[2013-05-29 19:05:48 -0400] awgross: no problems calling the exact same way from the cookbook that contains the libraries
[2013-05-29 19:05:52 -0400] btm: @opscode #opschef code review, join: https://plus.google.com/hangouts/_/e6d5904d3dadfce1f5d65ec4a19e7f115dfd4326, watch: http://youtu.be/ZcBR6CzRJ1o
[2013-05-29 19:06:07 -0400] geekbri: You know who usually has good answers to questions like this?  yfeldblum usually does.  I see he's not around right now though :)
[2013-05-29 19:06:21 -0400] awgross: i think ill just punt to the mailing list
[2013-05-29 19:06:36 -0400] geekbri: Probably a good idea.  You could check out ObjectSpace as well
[2013-05-29 19:06:43 -0400] geekbri: to see if your module is indeed lurking in there.
[2013-05-29 19:06:44 -0400] awgross: i really dont want to have to crawl that
[2013-05-29 19:06:52 -0400] awgross: im more concerned
[2013-05-29 19:06:57 -0400] awgross: why there is different behavior
[2013-05-29 19:07:03 -0400] awgross: depending on where the library is located
[2013-05-29 19:10:05 -0400] jtgiri_: pwf: can you move that to different directory and then try to upload again ?
[2013-05-29 19:10:18 -0400] jtgiri_: chef-validator.json
[2013-05-29 19:10:52 -0400] pwf: i guess... so weird though that this article i'm looking at specifically mentions adding validator: true
[2013-05-29 19:10:59 -0400] pwf: http://www.opscode.com/blog/2013/03/12/5106/
[2013-05-29 19:13:02 -0400] jtgiri_: oh yeah thats the one followed , don't' move it :) you should tail chef server logs when you are uploading, it will tell you which user  is causing issue
[2013-05-29 19:14:11 -0400] ryker: I've read that Chef 10 clients will talk to a Chef 11 server.  I have all Chef 10 clients right now.  Some as old as 10.0.  Is there any reason for me not to upgrade my Chef server to 11.0.8?
[2013-05-29 19:14:15 -0400] seubert: jtgiri_: (i work with pwf) - I did tail the server logs and it didn't provide any useful information :/
[2013-05-29 19:14:32 -0400] seubert: jtgiri_: assuming I should be tailing the logs in erchef
[2013-05-29 19:15:27 -0400] awgross: well geekbri, running through ObjectSpace shows that the other cookbook is not actually loading the modules
[2013-05-29 19:15:41 -0400] jtgiri_: I tailed everything in that log directory */* ( kind of a brute force way, but i don't think erchef shows everything )
[2013-05-29 19:15:42 -0400] awgross: They are present in the recipe in the cookbook where the modules are defined
[2013-05-29 19:15:55 -0400] seubert: jtgiri_: will try that
[2013-05-29 19:17:00 -0400] awgross: interesting difference, when it lists the "cookbooks to compile", in the failing case it shows "helper_libraries" and in the successful case is shows :helper_libraries
[2013-05-29 19:17:06 -0400] awgross: i hate symbols
[2013-05-29 19:19:15 -0400] bearrito: Does the application or application_python cookbook enforce any structure on the repository where it fetches from?
[2013-05-29 19:20:32 -0400] awgross: nevermind, that doesn't seem to change anything, it uses a symbol when loaded via runlist, a string when loaded from dependency metadata
[2013-05-29 19:21:17 -0400] mattupstate: bearrito: no
[2013-05-29 19:22:19 -0400] bearrito: mattupstate, so if I have a django app in a repository that has a messed up structure how can I tell the application cookbook, where the root of the application is?
[2013-05-29 19:22:51 -0400] jtgiri_: seubert: did it show anything useful ? another possibility is that chef-validatitor already got uploaded, can you do knife client list to make sure thats not the case ?
[2013-05-29 19:24:00 -0400] mattupstate: bearrito: if its a repository it should all be in one folder, i don't see the problem
[2013-05-29 19:24:25 -0400] mattupstate: bearit
[2013-05-29 19:24:27 -0400] mattupstate: oops
[2013-05-29 19:24:35 -0400] bearrito: mattupstate, I agree it should be. But in this case it isn't, repo structure is borked
[2013-05-29 19:25:02 -0400] bearrito: meaning multiple apps in the same repo.
[2013-05-29 19:25:27 -0400] bearrito: I think you were saying the contents shouldn't matter. Is that right? I agree with you there
[2013-05-29 19:25:47 -0400] mattupstate: it might be tricky with django
[2013-05-29 19:25:56 -0400] mattupstate: but you can specify the restart command
[2013-05-29 19:26:32 -0400] mattupstate: and that can explicitly run one application in the repo
[2013-05-29 19:28:07 -0400] bearrito: I guess my question was how is chef going to figure out what to populate target 'path' attribute with. It seems to assume that the checked out repo is going to be cp'ed wholesale into the deploy path
[2013-05-29 19:29:18 -0400] bearrito: My repo structure looks like garbage/django1, garbage/django2, garbage/someflask. In my case I want to deploy only django2
[2013-05-29 19:29:48 -0400] mattupstate: it doesn't care about the apps in your repo
[2013-05-29 19:29:52 -0400] mattupstate: it only cares about the repo
[2013-05-29 19:30:16 -0400] mattupstate: the django provider might make some assumptions about your repo though
[2013-05-29 19:30:25 -0400] jmickle: argh my chef 11 server is giving a 500 internal server error
[2013-05-29 19:31:31 -0400] bearrito: mattupstate, looking at https://github.com/opscode-cookbooks/application_python it seems the repo has to correspond to the app and I can't have multiple apps in the same repo
[2013-05-29 19:31:54 -0400] mwatson: I can't get any resource to install, even cookbooks I downloaded from the site and did not modify. I always get the error "Error executing action `install` on resource 'package[apache2]',  No such file or directory - port installed apache2"
[2013-05-29 19:32:48 -0400] wamilton: mwatson: are you trying to provision a mac?
[2013-05-29 19:33:13 -0400] mwatson: my local workstation is a mac but the server and target node are CentOS
[2013-05-29 19:34:14 -0400] mattupstate: bearrito: i'm not seeing where the cookbook runs the application unless you have to use the gunicorn provider in addition to the django provider
[2013-05-29 19:35:19 -0400] mwatson: wamilton, and I can locally install any package with no problem
[2013-05-29 19:37:55 -0400] mwatson: having a mac as my local workstation shouldn't matter, right?
[2013-05-29 19:37:58 -0400] wamilton: mwatson: it looks to me as though chef is trying to use port (macports) to install on a system that is not a mac
[2013-05-29 19:38:51 -0400] mwatson: wamilton, good point. is there any solution to this other than not using a mac?
[2013-05-29 19:39:14 -0400] wamilton: mwatson: no, you're right, your workstation shouldn't matter... which implies that you've somehow borked something
[2013-05-29 19:41:01 -0400] mwatson: wamilton: I've already deleated, reinstalled, and reconfigured my entire set up once. The thing that confuses me is I'm only using one node so it's a pretty simple set up.
[2013-05-29 19:41:04 -0400] jmickle: failed to write: HTTP error writing: 400 "Bad Request"
[2013-05-29 19:41:22 -0400] jmickle: getting this when trying to run a knife upload
[2013-05-29 19:41:26 -0400] wamilton: mwatson: if you're only using one node, then that node is your mac...
[2013-05-29 19:41:31 -0400] jmickle: whenever it runs the put this is what my chef 11 server is returning
[2013-05-29 19:41:39 -0400] wamilton: mwatson: unless you're running chef-solo on your mac
[2013-05-29 19:43:03 -0400] mwatson: wamilton, I used knife bootstrap on an amazon machine and it created a node and client with the target computer's name
[2013-05-29 19:44:25 -0400] mwatson: wamilton: when I do knife node show on my only node it says the platform is centos
[2013-05-29 19:44:30 -0400] wamilton: mwatson: I see... unless there's something in your runlist or a dynamically loaded cookbook, chef should just detect the platform properly and know that it should use the correct package manager....
[2013-05-29 19:45:28 -0400] mwatson: wamilton: runlist is only "recipe[apache2]"
[2013-05-29 19:46:18 -0400] wamilton: mwatson: how did you run it on your mac?
[2013-05-29 19:47:00 -0400] mwatson: I uploaded the cookbook, and ran chef-client
[2013-05-29 19:49:41 -0400] wamilton: mwatson: so, in that case, your mac is a node, or chef-client wouldn't be able to do anything... if you've somehow only got one node in your organization, then I bet it says its a mac, and both your remote aws machine and your local are using the same node metadata
[2013-05-29 19:49:43 -0400] mwatson: wamilton: I uploaded the cookbook, and ran chef-client
[2013-05-29 19:49:53 -0400] jbz: jtimberman: Quick question, if you're about
[2013-05-29 19:49:54 -0400] mwatson: weird
[2013-05-29 19:50:10 -0400] wamilton: mwatson: are you on hosted chef or open source?
[2013-05-29 19:50:21 -0400] mwatson: wamilton: open source
[2013-05-29 19:51:00 -0400] wamilton: mwatson: hrmmm... you can try `knife node list` and `knife client list` and try getting a closer look at them with edit instead of list
[2013-05-29 19:51:39 -0400] mwatson: wamilton: I only have one node listed. and knife says the platform of it is centos
[2013-05-29 19:51:44 -0400] wamilton: mwatson: in theory, I'd think that ohai would run on the node and just realize what os it is and get it right regardless of any central policy stuff...
[2013-05-29 19:51:51 -0400] wamilton: mwatson: clients?
[2013-05-29 19:52:35 -0400] mwatson: wamilton: 3 clients: chef-validator, chef-webui, and the name of my target node
[2013-05-29 19:53:47 -0400] wamilton: mwatson: ok, I think we're talking past each other.... are you saying that with your organization set up this way you have run chef-client on your mac (not ssh'd into anything) and had it successfully provision your mac?
[2013-05-29 19:54:27 -0400] geekbri: awgross: that is interesting.  (Sorry stepped out for a minute or two)
[2013-05-29 19:54:50 -0400] geekbri: awgross: it could be that somebody just made a simple typo and there should be a symbol where there is a string.  Or that could be a total red herring
[2013-05-29 19:56:09 -0400] mwatson: wamilton: sorry, what do you mean by provision? I have chef-client running on my mac, an AWS machine running centOS and chef server, and another AWS mchine that I bootstrapped from my mac successfully but am not able to install packages through chef on
[2013-05-29 19:56:36 -0400] awgross: geekbri: pretty sure its a red herring, buried above is my comment that symbol vs string is determined by where you load it from (run list vs dependency metadata).  Swapping those around doesnt help
[2013-05-29 19:57:09 -0400] wamilton: mwatson: by 'provision' I mean "chef-client runs on the machine, talks to chef server, gets a run list, and executes it without error"
[2013-05-29 19:57:13 -0400] geekbri: awgross: just out of curiosity what version of chef are you on?
[2013-05-29 19:57:25 -0400] mwatson: wamilton: yes, I have successfully provisioned my mac
[2013-05-29 19:58:14 -0400] awgross: geekbri: 11.4.4
[2013-05-29 19:58:19 -0400] mwatson: wamilton: however, only with run lists that do not include recipes that install anything (which is the whole reason I want to use chef)
[2013-05-29 19:59:16 -0400] geekbri: awgross: you should try uninstall and doing 10.24 just to see if you get the same results.  My guess is that you will but I can only assume a lot of that code might have been touched since from chef 10 - chef 11 they made it so that the attributes from roles are available inside the attribute files
[2013-05-29 19:59:23 -0400] geekbri: so maybe somehow the run_context stuff was mucked with
[2013-05-29 19:59:41 -0400] geekbri: you could just look at the commit logs as well I guess.  A very non scientific statement by me.  More of a total stab in the dark
[2013-05-29 19:59:42 -0400] awgross: i can try it on a diff vagrant box in a sec
[2013-05-29 20:00:20 -0400] wamilton: mwatson: so, if you try to use a recipe that provisions stuff (like apache2) on your mac, then it fails with the exact error you pasted?
[2013-05-29 20:00:30 -0400] geekbri: I mean, I don't suspect that's really the issue.  It's a pretty easy lift though :)
[2013-05-29 20:01:09 -0400] wamilton: s/provisions/installs/
[2013-05-29 20:01:11 -0400] mwatson: wamilton: exactly, but it fails for any package I want to install
[2013-05-29 20:02:09 -0400] jmickle: chef11 is touchy with hostnames
[2013-05-29 20:04:12 -0400] awgross: geekbri: ok, i changed something and now it works, i dont know what that something was however.
[2013-05-29 20:04:34 -0400] geekbri: awgross: ok well, I guess that's good ;)
[2013-05-29 20:04:43 -0400] awgross: geekbri: good to know its possible, soemhow
[2013-05-29 20:05:23 -0400] btm: @opscode #opschef cookbook code review: join: https://plus.google.com/hangouts/_/4d99ba35e00d949c3df8e7f10c09fd19de2821d3, watch: http://youtu.be/rMLd6cQeODQ
[2013-05-29 20:05:31 -0400] geekbri: let me know when you narrow it down to what you changed that caused it to work / not work
[2013-05-29 20:05:46 -0400] mwatson: wamilton: when I run ohai locally on my target node, it thinks its a mac
[2013-05-29 20:05:57 -0400] jrclouda:  anyone have experience with configuring knife.rb for use with winrm?
[2013-05-29 20:06:04 -0400] wamilton: mwatson: that's freaky...
[2013-05-29 20:06:24 -0400] wamilton: mwatson: are you somehow giving it the omnibus for mac?
[2013-05-29 20:06:25 -0400] mwatson: wamilton: yes, especially because on my mac when I show the node it says its centos
[2013-05-29 20:06:35 -0400] wamilton: whoa!
[2013-05-29 20:07:48 -0400] mwatson: wamilton: I used the omnibus installer on for my mac
[2013-05-29 20:08:00 -0400] tos9: Hey. Are there any staff memebers about at the moment who're OK with a PM about a quick (new) account question?
[2013-05-29 20:11:08 -0400] tos9: (I'm covered. Thanks)
[2013-05-29 20:11:15 -0400] awgross: geekbri: figured it out
[2013-05-29 20:11:44 -0400] awgross: geekbri: for some reason, when knife uploads cookbooks, it doesnt recursively search directories, so it was uploading libraries/util.rb, but not libraries/util/*
[2013-05-29 20:12:33 -0400] mwatson: Does anyone have experience using a workstation with a different platform from nodes that want to bootstrap?
[2013-05-29 20:13:06 -0400] wamilton: mwatson: I think we all have experience with it (I do) but we've never seen your issue
[2013-05-29 20:13:48 -0400] wamilton: mwatson: i.e., almost everyone has a mac workstation and a linux node and I've never heard of this problem before
[2013-05-29 20:16:32 -0400] mwatson: wamilton: so you installed chef-client on your mac, installed chef-server locally (or ssh) on your linux server, and then was able to bootstrap a linux node with no additional steps?
[2013-05-29 20:17:00 -0400] eponymi: mwatson that sounds backwards from everything else you've said
[2013-05-29 20:18:16 -0400] monokrome: Does anyone know how I can get this to work? https://gist.github.com/monokrome/40069862a66dda2dee1b
[2013-05-29 20:18:28 -0400] spheromak: bryanWB last night you were talking about serverspec  are you working that in as an alternative to using the minitest handlers in a kitchen test ? (or thinking down these lines)
[2013-05-29 20:18:33 -0400] monokrome: I am trying to use the firewall cookbook to deny all connections that aren't frmo a specific address to a specific port
[2013-05-29 20:18:46 -0400] wamilton: mwatson: when you install chef, you get chef-client and chef-solo up in your path
[2013-05-29 20:18:54 -0400] BryanWB: spheromak: not really, just exploring
[2013-05-29 20:19:12 -0400] BryanWB: not entirely happy w/ minitest-handler
[2013-05-29 20:19:14 -0400] mwatson: wamilton: yes
[2013-05-29 20:19:24 -0400] spheromak: yea  me neither its alot of work to get up to a test
[2013-05-29 20:19:26 -0400] BryanWB: spheromak: it kind of sucks
[2013-05-29 20:19:26 -0400] spheromak:  IMO
[2013-05-29 20:19:37 -0400] wamilton: mwatson: omnibus does this by setting up a platform-specific jailed ruby with the necessary gems
[2013-05-29 20:20:04 -0400] spheromak: I like the idea of "serverspec"  specs in test/ and having that run against the provisioned box.
[2013-05-29 20:20:13 -0400] spheromak: I also like that i could turn those into tests on production
[2013-05-29 20:20:33 -0400] spheromak: bryanwb i hand't seen serverspec before you mentioned it, but It looks interesting
[2013-05-29 20:20:45 -0400] BryanWB: spheromak: yeah, it has a nice separation
[2013-05-29 20:20:57 -0400] spheromak: i like chefspec :D
[2013-05-29 20:21:07 -0400] BryanWB: i like chefspec too
[2013-05-29 20:21:20 -0400] BryanWB: and minitest just knows too much imo
[2013-05-29 20:21:34 -0400] wamilton: chefspec makes every tool that is less powerful than chef look really stupid and ungainly...
[2013-05-29 20:21:37 -0400] BryanWB: whereas serverspec is blissfully ignorant of your node object
[2013-05-29 20:22:01 -0400] BryanWB: which is a plus
[2013-05-29 20:22:10 -0400] spheromak: Agreed
[2013-05-29 20:22:24 -0400] mwatson: wamilton: I may just install chef-client on my target locally
[2013-05-29 20:22:25 -0400] spheromak: we want functional tests against the provisioned machine
[2013-05-29 20:22:32 -0400] mwatson: to see if that works
[2013-05-29 20:22:46 -0400] spheromak: well "integration" tests
[2013-05-29 20:22:46 -0400] spheromak: :D
[2013-05-29 20:23:20 -0400] wamilton: spheromak: so you'd use serverspec for "story bdd" ?
[2013-05-29 20:24:06 -0400] geekbri: awgross: ahhhhh
[2013-05-29 20:24:31 -0400] tomsthumb: hi guys, i'm getting an error that looks an awful lot like the one seen here: https://gist.github.com/btm/3796245 . my encrypted_data_bag_secret, client.pem, etc all seem to be good. ould anyone have a guess?
[2013-05-29 20:24:35 -0400] spheromak: wamilton  dunno if i would try to BDD this stuff, but I suppose it would make sense.
[2013-05-29 20:25:58 -0400] wamilton: spheromak: well, we don't have tools that actually create your recipes and lwrp's from the example, which would be the 'real' way to do it... but I think the half-assed way would probably work :)
[2013-05-29 20:27:22 -0400] sprack: this has probably been rehashed N^2 times, but what's the accepted way to update node['languages']['ruby'] after installing rbenv or rvm?
[2013-05-29 20:28:26 -0400] glennpratt: I've had a couple coworkers worry about chef-client code/cookbooks being revealed if a customer rooted a node, as opposed to puppet when most things remain on the master.  Has this topic been addressed or does anyone have thoughts on it?
[2013-05-29 20:29:10 -0400] wamilton: glennpratt: if you're rooted, your hosed... does it really matter if they can automate the hosing?
[2013-05-29 20:29:15 -0400] BryanWB: spheromak: btw, we intend to do an openstack show sometime soon, wanna join?
[2013-05-29 20:29:31 -0400] spheromak: sure
[2013-05-29 20:29:37 -0400] BryanWB: we need someone who can give some #realtalk
[2013-05-29 20:29:55 -0400] wamilton: glennpratt: or do they have some sort of IP issue, like their cookbooks are super secret?
[2013-05-29 20:30:09 -0400] spheromak: Can dow what i can :D  you gotta go watch the reiewatts  F**Sh**Stack song tho :D
[2013-05-29 20:30:19 -0400] spheromak: *reggiewatts
[2013-05-29 20:30:22 -0400] spheromak: bleh
[2013-05-29 20:30:28 -0400] BryanWB: spheromak: just don't talk about drowning small children :)
[2013-05-29 20:30:35 -0400] spheromak: HAHA
[2013-05-29 20:30:40 -0400] glennpratt: wamilton: like the cookbooks might reveal something or allow access to data from the server
[2013-05-29 20:30:49 -0400] BryanWB: gnight all
[2013-05-29 20:30:53 -0400] spheromak: BryanWB only if you ask Kisoku to join
[2013-05-29 20:31:01 -0400] spheromak: Latter Braynwb
[2013-05-29 20:31:10 -0400] BryanWB: spheromak: but does he know openstack?
[2013-05-29 20:31:12 -0400] spheromak: *Bryan
[2013-05-29 20:31:20 -0400] spheromak: no no I mean the drowning small children
[2013-05-29 20:31:23 -0400] BryanWB: haha
[2013-05-29 20:32:50 -0400] awgross: geekbri: https://github.com/opscode/chef/blob/master/lib/chef/cookbook/cookbook_version_loader.rb#L49
[2013-05-29 20:32:57 -0400] awgross: well that explains why it wasnt finding files recursively
[2013-05-29 20:33:06 -0400] awgross: or at least uploading them
[2013-05-29 20:33:31 -0400] awgross: y u no load_recursively
[2013-05-29 20:34:36 -0400] wamilton: glennpratt: the only discussion I've seen around this is 'rooted=hosed => don't get rooted' and 'use encrypted databags if it shouldn't be plaintext' ... neither of those are great answers to your question though
[2013-05-29 20:34:55 -0400] geekbri: awgross: I've run into a couple different things in the chef world that don't look recursively
[2013-05-29 20:35:07 -0400] glennpratt: wamilton: yeah, thanks though
[2013-05-29 20:35:10 -0400] wamilton: glennpratt: also, big thanks for the solo helper cookbook... I use it all the time on my vagrant boxen
[2013-05-29 20:35:14 -0400] geekbri: awgross: the expectation seems to be flat file lay out in many places
[2013-05-29 20:35:21 -0400] glennpratt: wamilton: really!
[2013-05-29 20:35:25 -0400] glennpratt: cool
[2013-05-29 20:35:44 -0400] geekbri: awgross: although oddly enough they have a function available to load it recursively.  Why they chose not to, I'm not really sure
[2013-05-29 20:35:46 -0400] aslan: hey guys... once in a while i get this epic fail alert : /usr/local/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:251:in `build_node': undefined method `reset_defaults_and_overrides' for #<Hash:0x00000003ce80f8> (NoMethodError)
[2013-05-29 20:35:47 -0400] awgross: geekbri: so much for standard ruby conventions and practices, like laying out files in a heirarchy
[2013-05-29 20:35:58 -0400] wamilton: glennpratt: yeah, I work at a drupal shop and I'm in the process of shifting everyone over to just sharing their docroot via nfs
[2013-05-29 20:36:10 -0400] awgross: geekbri: time to flatten my file structure
[2013-05-29 20:36:15 -0400] geekbri: awgross: :'(
[2013-05-29 20:36:26 -0400] awgross: ill open a bug report
[2013-05-29 20:36:28 -0400] geekbri: You could file a ticket and try to get it into review to see if they like it
[2013-05-29 20:36:29 -0400] glennpratt: wamilton: nice! another drupalist in ruby land
[2013-05-29 20:36:48 -0400] awgross: im not waiting a month to deploy my helper functions while it goes through review
[2013-05-29 20:36:51 -0400] geekbri: awgross: I suggest making the appropriate pull request as well and attaching it.  Otherwise your ticket will probably languish.  Then you can mark as "fix provided" :)
[2013-05-29 20:37:04 -0400] geekbri: Yeah I know the feeling.
[2013-05-29 20:37:07 -0400] awgross: geekbri: yep, ive played the contributions game before
[2013-05-29 20:37:12 -0400] geekbri: I've monkey patched a few things here and there for same reason :)
[2013-05-29 20:37:17 -0400] wamilton: glennpratt: yeah, you should ask Maksimize how he likes it... he's 10 feet away looking at some random code so he can't be too busy :)
[2013-05-29 20:37:31 -0400] glennpratt: haha, former coworker
[2013-05-29 20:37:42 -0400] glennpratt: wamilton: so I was at your talk then?
[2013-05-29 20:37:45 -0400] aslan: hey guys... once in a while i get this epic fail alert : /usr/local/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:251:in `build_node': undefined method `reset_defaults_and_overrides' for #<Hash:0x00000003ce80f8> (NoMethodError). i have tried removing the node from chef server and try everything all over again and it doesn't work
[2013-05-29 20:38:21 -0400] wamilton: glennpratt: in spirit at least... I had no idea who all was in the audience besides Nathen
[2013-05-29 20:38:38 -0400] wamilton: glennpratt: but yeah, I was the guy in the pink unicorn shirt
[2013-05-29 20:41:21 -0400] glennpratt: wamilton: let me know if solo helper needs any improvements... I haven't touched it in forever
[2013-05-29 20:42:32 -0400] aslan: Once in a while i get this epic fail alert : /usr/local/lib/ruby/gems/1.9.1/gems/chef-10.18.2/lib/chef/client.rb:251:in `build_node': undefined method `reset_defaults_and_overrides' for #<Hash:0x00000003ce80f8> (NoMethodError). i have tried removing the node from chef server and try everything all over again and it doesn't work. knife status -r shows the node but there are is no runlist. when i view the node with knife there is nothing in it.
[2013-05-29 20:43:25 -0400] mconigliaro: should i be able to see my custom ohai plugin output when i run ohai -d <path to plugins directory> ?
[2013-05-29 20:43:38 -0400] cjs226: with chef 11, is it possible to 'reuse' the validation.pem from another server?
[2013-05-29 20:43:51 -0400] gleam: yeah
[2013-05-29 20:48:02 -0400] cjs226: <gleam> how so?  I've tried replacing the existing chef-validator.pem then 'chef-server-ctl reconfigure', but no dice
[2013-05-29 20:49:07 -0400] cjs226: <gleam> i assume i should update chef-validator's keys, but not sure
[2013-05-29 20:53:11 -0400] caryp: are there any good blog posts about tweaking the resource_collection in the converge phase?
[2013-05-29 21:00:29 -0400] spheromak: btm Ill push a fix for the spelling error(s) on that openssl PR in like 30seconds if youre still in review I can't get on the hangout
[2013-05-29 21:03:43 -0400] ssd7: mconigliaro: Yes, but beware that there are some bugs related to not expanding the path, so ule the full path to the plugins directory
[2013-05-29 21:04:00 -0400] mconigliaro: ssd7: that is the full path
[2013-05-29 21:04:03 -0400] mconigliaro: and it doesn't work
[2013-05-29 21:04:37 -0400] mconigliaro: err, sorry, i am using the full path, but i guess not in the example i pasted
[2013-05-29 21:04:58 -0400] mconigliaro: but yeah, I've never seen the -d option work
[2013-05-29 21:05:05 -0400] pwf: has anyone seen this? http://tickets.opscode.com/browse/CHEF-3451
[2013-05-29 21:05:14 -0400] pwf: 'the problem resolved itself' doesn't seem to be happening in our case -_-
[2013-05-29 21:21:46 -0400] eponymi: anyone encountered the moneta 0.7.0 issue with travis when following this (http://nathenharvey.com/blog/2012/07/06/mvt-knife-test-and-travisci/)?
[2013-05-29 21:24:44 -0400] eponymi: i have specified a specific chef version in my gemfile, travis still unhappy
[2013-05-29 21:25:19 -0400] eponymi: also have specified moneta as 0.6.0 in gemfile
[2013-05-29 21:51:34 -0400] mconigliaro: ssd7: i figured it out...
[2013-05-29 21:51:42 -0400] mconigliaro: ohai -d /etc/chef/ohai_plugins works
[2013-05-29 21:51:45 -0400] mconigliaro: ohai -d /etc/chef/ohai_plugins/ does not
[2013-05-29 21:51:58 -0400] mconigliaro: trailing slash fucks it up. haha
[2013-05-29 21:52:03 -0400] mdevolving: hi, a question about cron resources
[2013-05-29 21:52:26 -0400] mdevolving: if i want a cron resource to be created when a node attribute is true but also removed when the attribute is false
[2013-05-29 21:52:32 -0400] mdevolving: how can i do this efficiently?
[2013-05-29 21:52:48 -0400] mdevolving: as in, using only_if and not_if instead of logic outside of the resource
[2013-05-29 21:53:28 -0400] mdevolving: or is this not as inefficient as i think?
[2013-05-29 21:53:58 -0400] adnichols: mdevolving I'm not sure that's what only_if/not_if are intended to achive, I'd use logic around the resource
[2013-05-29 21:54:20 -0400] mconigliaro: mdevolving: action node[:foo] ? 'create' : 'delete'
[2013-05-29 21:54:31 -0400] mconigliaro: something like that
[2013-05-29 21:54:37 -0400] mdevolving: mconigliaro: i'll try that, thanks
[2013-05-29 21:54:44 -0400] mconigliaro: its a pattern I've used a lot
[2013-05-29 21:55:08 -0400] mconigliaro: actually, that should be :create and :delete, but you get the idea
[2013-05-29 21:59:05 -0400] mdevolving: adnichols: it has to do with the difference between running recipes and compiling them
[2013-05-29 21:59:25 -0400] mdevolving: and the efficiency of not modifying the resource through outside logic
[2013-05-29 21:59:31 -0400] mdevolving: it caches better that way
[2013-05-29 21:59:38 -0400] mdevolving: runs faster
[2013-05-29 22:00:22 -0400] adnichols: mdevolving I understand, mconigliaro had a good pattern to follow - only_if/not_if don't provide the same function, that's all I was saying
[2013-05-29 22:00:45 -0400] mdevolving: o ok, you're right only_if/not_if aren't the same
[2013-05-29 22:01:06 -0400] mdevolving: err don't do the same thing.. you get what i mean :)
[2013-05-29 22:01:11 -0400] adnichols: I do
[2013-05-29 22:11:34 -0400] mdevolving: works a charm, thanks again mconigliaro
[2013-05-29 22:11:42 -0400] mconigliaro: mdevolving: np
[2013-05-29 22:28:12 -0400] zackf: Anyone run into 401 errors when using knife windows winrm?
[2013-05-29 22:28:32 -0400] zackf: I hop on the box and the validator is set properly and config as welll, but just throws 401.
[2013-05-29 22:46:04 -0400] gsymons-di: Anybody know if there's a way to notify something only if another notification hasn't already been queued?
[2013-05-29 22:46:11 -0400] gsymons-di:  Specifically, I have a service for which some configuration changes require a restart, but others only require a reload.
[2013-05-29 22:46:30 -0400] jmickle: found some sort of bug in chef 11
[2013-05-29 22:46:37 -0400] gsymons-di:  I've got a template for the config file that notifies reload if it changes, and then another, dummy config file that only contains the parameters that require a restart that notifies restart if it changes.
[2013-05-29 22:47:25 -0400] gsymons-di: I'd like to not do the reload if I've scheduled a restart... it doesn't really matter that much, it's really just the CDO talking.
[2013-05-29 22:49:01 -0400] jmickle: chef-client v10 connecting to a v11 server if chef-client fails the server is losing its environment configuration and dropping in _default
[2013-05-29 23:14:54 -0400] Afterglow: using omnibus installed chef and therefore not having a build environment generally installed on the server is there a way to install a gem that is required for the chef run to complete?
[2013-05-29 23:18:08 -0400] spox: Afterglow: chef_gem resource perhaps?
[2013-05-29 23:18:43 -0400] Afterglow: spox: will look thanks
[2013-05-29 23:19:17 -0400] Afterglow: hmm will try it see what happens
[2013-05-29 23:31:43 -0400] grobot: trying to understand inconsistent results btw debian6+chef-solo and precise64+vagrant (=chef-solo)
[2013-05-29 23:32:22 -0400] grobot: on the debian/chef-solo instance, "Cannot find a resource for mysql_database on debian version 6.0.6" and a php_pear channel install fail
[2013-05-29 23:32:28 -0400] grobot: on the vagrant instance, they both work
[2013-05-29 23:32:51 -0400] grobot: cookbook recipes etc are identical. nothing informative from log_level :debug. aie!
[2013-05-29 23:33:02 -0400] grobot: s/informative/meaningful to me/
[2013-05-29 23:34:07 -0400] grobot: gist of mysql_database "whatcha talkin bout willis" from debian - https://gist.github.com/xurizaemon/10f8107677aa40adb2ce
[2013-05-29 23:35:40 -0400] grobot: oh yes - and on the debian instance, it really does output to /${HOME} (literal)
[2013-05-29 23:35:46 -0400] grobot: which makes me suspect something is rotten
[2013-05-29 23:36:35 -0400] chaosmaker: zackf I had the same 401 problem, I need to put basic auth like the wiki page to make it work http://docs.opscode.com/plugin_knife_windows.html
[2013-05-29 23:36:52 -0400] chaosmaker: zackf on the Requirements anchor
[2013-05-29 23:37:14 -0400] zackf: hmmm I've done that
[2013-05-29 23:37:21 -0400] zackf: You were getting a 401 talking to the chef server?
[2013-05-29 23:37:40 -0400] chaosmaker: I'm getting a 401 talking to the winrm using http
[2013-05-29 23:38:02 -0400] zackf: after i boot up with knife-windows and it fails 401, I delete the client.pem that is in c:\chef and re-run chef-client and it works
[2013-05-29 23:38:52 -0400] chaosmaker: sorry, it's not the same behaviour
[2013-05-29 23:39:00 -0400] zackf: kk
[2013-05-29 23:39:04 -0400] zackf: I appreciate the help
[2013-05-29 23:39:32 -0400] chaosmaker: np
[2013-05-29 23:57:54 -0400] chaosmaker: anyone using the iis cookbook? anyone has any information on how to manage the ssl certificates for https websites?

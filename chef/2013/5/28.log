[2013-05-28 00:03:42 -0400] spicy: so, somewhat related then: it seems like I should manage chef-server.rb with a cookbook, but the chef-server cookbook only seems to do compacting - is there anything already written?
[2013-05-28 00:04:03 -0400] spicy: (or rather it also does other things but not for omnibus installs)
[2013-05-28 00:25:03 -0400] spicy: oh, i had an older version - ignore above :)
[2013-05-28 00:36:01 -0400] snowe2010: hey so I'm pretty new to chef, and I'm using vagrant to run some chef cookbooks and I'm having tons of trouble getting the oracle jdk 6 installed.
[2013-05-28 00:36:43 -0400] snowe2010: i'm getting some errors "executing action 'install' and "set alternative failed"
[2013-05-28 00:36:49 -0400] snowe2010: can anyone help?
[2013-05-28 00:39:41 -0400] cnk: pastie?
[2013-05-28 00:40:04 -0400] jeremyolliver: snowe2010: Are you setting the attribute to accept the license terms and conditions?
[2013-05-28 00:40:54 -0400] snowe2010: yes
[2013-05-28 00:41:18 -0400] snowe2010: should i copy and paste here?
[2013-05-28 00:41:45 -0400] cnk: no use one of the services - a gist or paste.org
[2013-05-28 00:42:35 -0400] snowe2010: http://pastebin.com/heLpeyna
[2013-05-28 00:43:47 -0400] cnk: and the error?
[2013-05-28 00:44:14 -0400] snowe2010: just a sec
[2013-05-28 00:44:38 -0400] snowe2010: http://pastebin.com/vL60bVgZ
[2013-05-28 00:46:44 -0400] snowe2010: I can't find anything to help me with this error :\
[2013-05-28 00:47:37 -0400] cnk: where did you get the cookbook?
[2013-05-28 00:47:48 -0400] cnk: from community.opscode?
[2013-05-28 00:47:57 -0400] snowe2010: knife cookbook site download java
[2013-05-28 00:48:23 -0400] snowe2010: which should download from the opscode cookbooks site correct?
[2013-05-28 00:48:56 -0400] snowe2010: it was giving me errors about the terms until I figured out how to set the json.
[2013-05-28 00:49:36 -0400] cnk: so looks like your error is coming from line 47 here: https://github.com/opscode-cookbooks/java/blob/master/providers/ark.rb
[2013-05-28 00:49:50 -0400] cnk: which is the part that checks that you could download the file from Oracle
[2013-05-28 00:50:04 -0400] snowe2010: yeah ok.. hmm so I'm not getting a connection?
[2013-05-28 00:50:42 -0400] snowe2010: or does the cookbook need to be updated to look at a different download path?
[2013-05-28 00:50:59 -0400] cnk: or perhaps not there but I am betting that the lisence terms stuff is what is the problem
[2013-05-28 00:51:53 -0400] snowe2010: darn..
[2013-05-28 00:54:31 -0400] snowe2010: so what alternatives do I have?
[2013-05-28 00:54:55 -0400] snowe2010: should I try running the curl located in the method "download_direct_from_oracle"?
[2013-05-28 00:57:08 -0400] cnk: I doubt that curl can prompt you to accept the license terms
[2013-05-28 00:57:28 -0400] snowe2010: well i think that the cookie is what is supposed to set that is it not?
[2013-05-28 00:57:52 -0400] cnk: might be. You can try it and see
[2013-05-28 00:58:07 -0400] snowe2010: i've got to figure out what goes into the variables first.
[2013-05-28 00:58:20 -0400] snowe2010: tracing this back is more difficult than I thought it would be
[2013-05-28 00:58:31 -0400] cnk: the chef docs for windows say you need to host the JDK files yourself - so another option is to download and then stuff the JDK somewhere for your own use
[2013-05-28 00:59:20 -0400] snowe2010: well i'm not trying to install on windows though. it should be doing this all in vagrant shouldn't it? or does vagrant run everything from windows?
[2013-05-28 01:00:54 -0400] cnk: no but apparently on windows you can't get the 'accept terms' stuff working so there is a workaround
[2013-05-28 01:01:29 -0400] cnk: so if that is your problem, the same workaround might be an efficient way to move forward
[2013-05-28 01:01:41 -0400] cnk: depends on what your goals and constraints are
[2013-05-28 01:03:08 -0400] snowe2010: ok.
[2013-05-28 01:21:11 -0400] josephholsten: anyone seen an example of using minitest with test-kitchen?
[2013-05-28 01:32:44 -0400] snowe2010: wish cnk would come back so I could tell him how I fixed it.
[2013-05-28 01:47:29 -0400] Qten: Hi All, i'm using the keepalived cookbook however having some issues trying to work out how to use the "virtual_router_ids" , not sure how to make it increment
[2013-05-28 03:33:53 -0400] kenke: hi all, can someone give me any clue of implementing silent installation using Chef? I have a software which have a bunch of questions which need to be answered during the installation
[2013-05-28 03:37:58 -0400] juliancdunn: kenke: what format does the package come in?
[2013-05-28 03:38:15 -0400] juliancdunn: the best is if the software can take a response file
[2013-05-28 03:38:22 -0400] juliancdunn: otherwise, maybe write an expect script :-/
[2013-05-28 03:39:37 -0400] kenke: unfortunately it can't, I am just be told that we have a big software coming through which have a bunch of questions need to ask
[2013-05-28 03:39:45 -0400] kenke: answer *
[2013-05-28 03:52:23 -0400] juliancdunn: that's pretty hard to automate unfortunately :-/
[2013-05-28 04:12:34 -0400] dyu: what recipe should come first? apt or build-essential?
[2013-05-28 04:25:58 -0400] jtimberman: dyu: i use apt first.
[2013-05-28 04:26:12 -0400] jtimberman: dyu: the purpose of it is primarily to ensure that your apt cache is updated
[2013-05-28 04:35:14 -0400] aruntomar: jtimberman: i'm using the php cookbook. i need to update the max file upload size, but the template that we have in cb has a hard coded value. so i guess, i'll have to use my own template for this. how to override the template file provided by cb, with my own template.
[2013-05-28 04:47:39 -0400] dyu: jtimberman: thanks!
[2013-05-28 04:54:08 -0400] jtimberman: aruntomar: i have an example in jtimberman.housepub.org/blog/2012/11/19/chef-repository-berkshelf-conversion/ -
[2013-05-28 04:54:33 -0400] jtimberman: resources("template[/etc/openvpn/server.conf]").cookbook "housepub-openvpn"
[2013-05-28 04:54:56 -0400] jtimberman: change the path and cookbook name as required for your cookbook.
[2013-05-28 04:56:00 -0400] brucelee: Is chef able to hook into VMware and create VMs and automate a complete install of the OS, it's apps and all configurations?
[2013-05-28 04:56:04 -0400] brucelee: or is that beyond the limitations of chef
[2013-05-28 04:58:03 -0400] aruntomar: jtimberman: thanks, i'll refer that.
[2013-05-28 04:58:28 -0400] jtimberman: brucelee: that's not really what the scope of chef is as a tool.
[2013-05-28 04:59:10 -0400] jtimberman: brucelee: chef is used after you already have an OS installed, or a VM/image otherwise running (e.g., launching a VM from a base image)
[2013-05-28 04:59:56 -0400] brucelee: ah ok, thats what i thought too
[2013-05-28 04:59:58 -0400] brucelee: just confirming
[2013-05-28 05:00:31 -0400] brucelee: so after creating the VM, setting up the OS, and enabling a network connection, only then will chef be able to do its job?
[2013-05-28 05:06:20 -0400] jtimberman: brucelee: generally speaking yeah. there are knife plugins that can interact with VM provisioning APIs / commands to automate those steps for you.
[2013-05-28 05:06:54 -0400] jtimberman: brucelee: there are also projects such as 'razor' that allow fully provisioning bare metal resources for that kind of thing.
[2013-05-28 05:08:14 -0400] brucelee: jtimberman: nice thanks
[2013-05-28 05:08:18 -0400] brucelee: jtimberman: ever heard of vagrant?
[2013-05-28 05:14:09 -0400] jtimberman: brucelee: yup, i use it all the time.
[2013-05-28 05:14:14 -0400] jtimberman: in fact, I'm using it *right now* :)
[2013-05-28 05:14:29 -0400] brucelee: nice
[2013-05-28 05:14:33 -0400] brucelee: jtimberman: you don't use vmware?
[2013-05-28 05:14:45 -0400] brucelee: jtimberman: the reason why i ask is i believe vagrant only works with virtualbox
[2013-05-28 05:15:18 -0400] brucelee: jtimberman: what are some tools you use to automate VM provisioning. I know chef works well with AWS EC2, but i'm trying to find some standard tools available to automate VM provisioning in the vmware space
[2013-05-28 05:16:39 -0400] pithagorians: hi all. i'm newbie in chef. i expect the "knife node run_list add node.local.com recipe[apache2]" command to install apache on node. but it doesn't. please help understand :)
[2013-05-28 05:17:47 -0400] shimo: vagrant has a (paid) vmware provider. but it doesn't build baseboxes for you
[2013-05-28 05:18:08 -0400] shimo: you could try veewee
[2013-05-28 05:18:17 -0400] brucelee: shimo: thanks ill look into that
[2013-05-28 05:18:35 -0400] jtimberman: brucelee: i use vmware fusion on my mac occasionally
[2013-05-28 05:18:54 -0400] jtimberman: vagrant works with vmware if you purchase the provider from Hashicorp
[2013-05-28 05:19:12 -0400] jtimberman: shimo said that i guess :)
[2013-05-28 05:19:25 -0400] jeremyolliver: vagrant 1.1 and up support other providers that is
[2013-05-28 05:19:29 -0400] jtimberman: pithagorians: you have to run chef after modifying the run list
[2013-05-28 05:21:03 -0400] pithagorians: jtimberman: how can i do it?
[2013-05-28 05:21:13 -0400] jeremyolliver: Hey, can anyone offer any insight into why the local variable of a helper function seems to be empty, but the function returns a result? https://gist.github.com/jeremyolliver/5654957
[2013-05-28 05:21:35 -0400] jeremyolliver: Log from the helper function shows a search result, then try logging in the recipe file, and it's an empty array...
[2013-05-28 05:21:52 -0400] jeremyolliver: I've done a workaround, but was very puzzled by this all yesterday
[2013-05-28 05:23:04 -0400] jtimberman: pithagorians: log into the node and run chef-client
[2013-05-28 05:23:29 -0400] jtimberman: pithagorians: you can also set chef-client up to run as a daemonized service, or a cron job (both automatable with the 'chef-client' cookbook by opscode)
[2013-05-28 05:23:58 -0400] pithagorians: wow, it works ! thx :)
[2013-05-28 06:32:28 -0400] dyu: i have a chicken-and-egg problem that i've largely forgotten about. chef uses ssh to go inside machines, but i have to install openssh-server on ubuntu so chef can install stuff. is there a way around this?
[2013-05-28 06:33:02 -0400] monokrome: Doesn't omnibus install SSH?
[2013-05-28 06:33:19 -0400] monokrome: er, I guess you need SSH to install omnibus so now
[2013-05-28 06:33:21 -0400] monokrome: no*
[2013-05-28 06:33:27 -0400] dyu: this is for the nodes
[2013-05-28 06:33:49 -0400] monokrome: Are you using your own hardware or a cloud?
[2013-05-28 06:34:04 -0400] dyu: own hardware
[2013-05-28 06:34:09 -0400] monokrome: ah
[2013-05-28 06:34:39 -0400] monokrome: Can you create a base image for the OS with SSH installed?
[2013-05-28 06:35:58 -0400] dyu: "can" in terms of company policy: yes. in terms of my own skills: no.
[2013-05-28 06:36:08 -0400] tolland: telnet
[2013-05-28 06:36:12 -0400] dyu: lol
[2013-05-28 06:36:13 -0400] dyu: haha
[2013-05-28 06:36:40 -0400] dyu: i guess it'll just have to be one of those things they'll do manually
[2013-05-28 06:37:10 -0400] tolland: dyu: so you have network access to the instance?
[2013-05-28 06:37:14 -0400] tolland: what services are running
[2013-05-28 06:37:30 -0400] dyu: yup
[2013-05-28 06:37:36 -0400] dyu: what do you mean by services?
[2013-05-28 06:37:53 -0400] tolland: unless you have some console-over-network befudgery, then you literally have to do it manually
[2013-05-28 06:38:00 -0400] dyu: i'm making a recipe for onboarding new hires
[2013-05-28 06:38:02 -0400] tolland: well, be locally present
[2013-05-28 06:38:35 -0400] tolland: you just have chef, and nothing else?
[2013-05-28 06:38:51 -0400] tolland: ie a pure node, with just chef-client, checking in regularly
[2013-05-28 06:39:00 -0400] dyu: yup
[2013-05-28 06:40:07 -0400] tolland: why you need ssh-server so "i have to install openssh-server on ubuntu so chef can install stuff"...?
[2013-05-28 06:40:55 -0400] monokrome: O_o
[2013-05-28 06:41:03 -0400] dyu: that completely went over my head
[2013-05-28 06:41:19 -0400] tolland: I didn't think a local openssh instance would be a dependency for a local chef-client to install packages, and resources etc
[2013-05-28 06:41:21 -0400] monokrome: stormerider: I finally figured out that issue from last week.
[2013-05-28 06:41:33 -0400] dyu: ahh
[2013-05-28 06:41:38 -0400] dyu: i think it is
[2013-05-28 06:41:51 -0400] monokrome: I'm not 100% sure what fixed it, but I think that it was mad that I was using HTTP:// as my URL. I changed it to HTTPS and it works?
[2013-05-28 06:41:57 -0400] tolland: but the chef-client runs thorugh with an empty run_list?
[2013-05-28 06:42:08 -0400] dyu: when i tried to bootstrap a new node that still didn't have openssh, it failed
[2013-05-28 06:42:16 -0400] tolland: ah, i see
[2013-05-28 06:42:20 -0400] dyu: i don't remember trying it with an empty run_list
[2013-05-28 06:42:35 -0400] tolland: so bootstrapping is before, the chef-client is running
[2013-05-28 06:42:46 -0400] tolland: so I can see that you would need it, but that's why its called bootstrapping
[2013-05-28 06:44:40 -0400] dyu: i'll just put a small snippet on the wiki that they can run before asking for their machine to be bootstrapped
[2013-05-28 07:01:46 -0400] flaccid: hmm how do i do an only_if if a node attribute which has an array is has stuff in the array? use .any?
[2013-05-28 07:04:21 -0400] flaccid: probably just set default=[] and it won't do anything in my .each
[2013-05-28 08:35:10 -0400] ermajn: hello, I have problem installing chef-server 11, I'm using ubuntu 12.04, and I have installation from http://opscode.com/chef/install
[2013-05-28 08:35:27 -0400] ermajn: chef-server-ctl status
[2013-05-28 08:35:41 -0400] ermajn: tells me that everything is ok, but nothing listens on port 4000
[2013-05-28 08:36:33 -0400] ermajn: all thing is really confusing, and chef-server 10 installation was a way better than this
[2013-05-28 09:38:16 -0400] dyu: what setting should i change in the cookbook so that nginx doesn't run automatically?
[2013-05-28 09:40:39 -0400] dyu: i'm installing via package
[2013-05-28 09:40:56 -0400] aruntomar: dyu: service "nginx" do action :disable, :stop end
[2013-05-28 09:41:28 -0400] dyu: no way to do these via attributes?
[2013-05-28 09:41:54 -0400] dyu: i've read the docs, but there doesn't seem to be an obvious one that i should change
[2013-05-28 09:42:23 -0400] flaccid: you usually just notify it to restart when needed
[2013-05-28 09:43:44 -0400] dyu: flaccid: we don't want it to start at boot by default because we have another script that controls nginx. (not my call. just following instructions.)
[2013-05-28 09:47:15 -0400] flaccid: dyu: you'd need to fork the cookbook and remove the start then
[2013-05-28 09:48:08 -0400] flaccid: it doesn't make sense to have two things managing the one piece of software, but yeah not your call. begs the question why chef for it then
[2013-05-28 09:48:59 -0400] dyu: flaccid: it's part of an onboarding cookbook for new hires
[2013-05-28 09:49:16 -0400] gigo1980: hi all, does anyone use the perona cookbook ?
[2013-05-28 10:25:06 -0400] flaccid: dyu: whats an onboarding cookbook?
[2013-05-28 10:25:50 -0400] dyu: it just automates the installation and configuration of the development machines for our new hires
[2013-05-28 10:26:00 -0400] dyu: our setup is complicated
[2013-05-28 10:26:21 -0400] dyu: example: that nginx thing being controlled by another script
[2013-05-28 10:27:59 -0400] ermajn: can someone tell me where chef-server binary is when chef is installed with new installer ?
[2013-05-28 10:28:54 -0400] thom__: gigo1980: the percona cookbook? yes
[2013-05-28 10:29:03 -0400] dyu: emajn: /usr/bin/chef-server-ctl
[2013-05-28 10:29:10 -0400] dyu: not sure if that's what you're looking for
[2013-05-28 10:29:25 -0400] ermajn: dyu, chef-server-ctl start does not make anything listen on 4000 port
[2013-05-28 10:30:26 -0400] dyu: was it running before?
[2013-05-28 10:31:41 -0400] dyu: try running `chef-server-ctl status` and `chef-server-ctl test` to get an idea of what might be wrong
[2013-05-28 10:33:04 -0400] ermajn: dyu, does this mean it is running or not: run: chef-server-webui: (pid 32767) 5s; run: log: (pid 26970) 8924s
[2013-05-28 10:33:20 -0400] ermajn: and every process is running (have its pid)
[2013-05-28 10:33:27 -0400] ermajn: man this is so unreadable
[2013-05-28 10:34:17 -0400] ermajn: test is passed
[2013-05-28 10:34:27 -0400] ermajn: but no daemon listening on 4000
[2013-05-28 10:34:54 -0400] siXy_: ermajn: chef 11 does not listen on that port anymore.  it uses 443 for the webui and the api.
[2013-05-28 10:39:47 -0400] kernel_panick: Hi to all! ;)
[2013-05-28 11:02:34 -0400] gigo1980: hi has anyone an woring percona cluster with chef. i have allready an manual setuped percona cluster. are there any hints on the receipts`
[2013-05-28 12:16:58 -0400] gyre007: how do I ADD user to existing group ? ie not when Im creating it...it already exists and I want to modify its group membership
[2013-05-28 12:17:38 -0400] kvs: gyre007: see the example at the bottom of http://docs.opscode.com/resource_group.html
[2013-05-28 13:14:08 -0400] simon__: Hello, Im having a hard time populating a template with a search for some reason.
[2013-05-28 13:14:15 -0400] simon__: found_nodes = search(:node, project['node_search'])
[2013-05-28 13:14:38 -0400] simon__: variables({:found_nodes => found_nodes}) when passing to the template
[2013-05-28 13:14:49 -0400] simon__: And in the template, just as debugging for now
[2013-05-28 13:14:49 -0400] simon__: <% @found_nodes.each do |found_node| -%>
[2013-05-28 13:14:50 -0400] simon__:    Yep
[2013-05-28 13:14:50 -0400] simon__:   <% end -%>
[2013-05-28 13:14:54 -0400] masterkorp: ok google is not being my friend
[2013-05-28 13:15:07 -0400] gchristensen: google is a cruel mistress
[2013-05-28 13:15:21 -0400] simon__: I would expect to see a lot of yep in my file after chef has run, but there is nothing. Pringint found_nodes shows all the nodes though!
[2013-05-28 13:15:25 -0400] masterkorp: when runing then runit cookbook I get this weird error on the chef-stacktrace
[2013-05-28 13:15:34 -0400] masterkorp: NameError: runit_service[chef-client] (chef-client::service line 187) had an error: NameError: Cannot find a resource for converge_by on redhat version 6.3
[2013-05-28 13:16:03 -0400] masterkorp: Chef: 10.12.0
[2013-05-28 13:16:26 -0400] masterkorp: is it that chef is way to outdated ?
[2013-05-28 13:17:26 -0400] masterkorp: any sugestions would be appreciated
[2013-05-28 13:27:35 -0400] geekbri: Has anybody at all had an issue with chef where on the initial chef-client run of a bootstrap your node isn't not in the correct environment?
[2013-05-28 13:30:21 -0400] jwilf: geekbri: you can pass --environment as an option to bootstrap
[2013-05-28 13:30:34 -0400] geekbri: jwilf: Yeah I dug through that.  I am doing that effectively
[2013-05-28 13:30:57 -0400] jwilf: geekbri: are you checking the node through the webui in chef 11?
[2013-05-28 13:31:28 -0400] geekbri: jwilf: I am not.  I have a cookbook that takes certain actions based upon environment and it wasn't doing that.  So I started outputting node.chef_environment and it was coming out wrong
[2013-05-28 13:31:59 -0400] jwilf: geekbri: ah ok, well i haven't seen that problem myself
[2013-05-28 13:32:00 -0400] geekbri: jwilf: I'm actually using knife ec2.  I dont' pass in --environment but I set my environment in my knife.rb.  After digging through the knife ec2 and knife bootstrap plugins that looks to be a fine way to do it
[2013-05-28 13:32:07 -0400] geekbri: It's killing me :)
[2013-05-28 13:32:35 -0400] geekbri: I suppose it's time to file a support ticket
[2013-05-28 13:32:38 -0400] jwilf: oh i always pass --environment when using knife ec2
[2013-05-28 13:33:06 -0400] masterkorp: updating chef-client did
[2013-05-28 13:34:06 -0400] geekbri: knife ec2 just grabs it's config[:environment] and passes it to knife bootstrap.  knife bootstrap just uses Chef::Config which should be grabbing the knife.rb config
[2013-05-28 13:34:22 -0400] geekbri: At least thats how it looks to me
[2013-05-28 13:34:38 -0400] jwilf: ok sounds like it could be a bug
[2013-05-28 13:34:52 -0400] geekbri: Hrmmm, well I still suspect it's something i'm doing wrong :)
[2013-05-28 13:35:02 -0400] geekbri: I won't discount the possibility of a bug though!
[2013-05-28 13:36:18 -0400] masterkorp: https://github.com/hw-cookbooks/omnibus_updater
[2013-05-28 13:41:36 -0400] ermajn: how to generate new validation.pem with chef 11.4.4
[2013-05-28 13:41:46 -0400] ermajn: and where should I expect it to appear
[2013-05-28 13:57:47 -0400] eponymi: hello. i'm getting started with testing but there seems to be a lot of divergent resources out there so i was hoping someone could help me understand
[2013-05-28 14:00:49 -0400] eponymi: first i want to make sure that i'm using the right tools, and that there is no redundancy between the tools i've chosen. what i've got is a list of 4 tools with the following responsibilities:
[2013-05-28 14:00:59 -0400] eponymi: 1. `knife cookbook test` to validate ruby
[2013-05-28 14:01:21 -0400] eponymi: 2. Foodcritic to lint the recipes and support "best practices" in the code
[2013-05-28 14:01:40 -0400] eponymi: 3. ChefSpec to test that the code will actually do what is expected without converging the node
[2013-05-28 14:02:15 -0400] eponymi: 4. TestKitchen to actually converge nodes and make sure that all resources and templates are properly installed/configured
[2013-05-28 14:03:26 -0400] Cope: eponymi: that's fine, if you're happy with an inside-out approach
[2013-05-28 14:03:37 -0400] Cope: and you'll get good value from that set of tools
[2013-05-28 14:04:16 -0400] eponymi: Cope: sorry, i am a noob, not sure what is meant by inside-out versus outside-in. what are some outside-in tools?
[2013-05-28 14:04:46 -0400] eponymi: and a specific question: is ChefSpec necessary, given that the minitest-handler supports "spec" style tests?
[2013-05-28 14:05:35 -0400] Cope: eponymi: oh, well, outside-in is an approach that starts with the highest level acceptance tests - how the code should behave for a stakeholder
[2013-05-28 14:05:53 -0400] Cope: eponymi: and then moves in, testing as you go
[2013-05-28 14:05:58 -0400] Cope: http://en.wikipedia.org/wiki/Behavior-driven_development
[2013-05-28 14:06:05 -0400] Cope: it's "an approach"
[2013-05-28 14:06:31 -0400] eponymi: ok, i get it; so cucumber would be an outside-in approach?
[2013-05-28 14:06:38 -0400] Cope: Chefspec - it's a different thing altogether
[2013-05-28 14:06:46 -0400] Cope: eponymi: yep, cucumber is often used for this sort of thing
[2013-05-28 14:07:03 -0400] Cope: but it's not mandated - you can use anything; but cucumber is popular
[2013-05-28 14:07:16 -0400] eponymi: that's what i thought re: Chefspec. would it be accurate to say that minitest only runs on converged nodes?
[2013-05-28 14:07:33 -0400] Cope: yes, that's fair
[2013-05-28 14:07:49 -0400] Cope: chefspec has independent value
[2013-05-28 14:08:37 -0400] Cope: it's *very* fast; and helps when you develop cookbooks on multiple platforms; it also helps catch dumb errors, and gets you thinking in a good frame of mind
[2013-05-28 14:08:43 -0400] Cope: only write the code you need :)
[2013-05-28 14:08:58 -0400] Cope: but, it's not really converging the node
[2013-05-28 14:09:09 -0400] Cope: which is why you want to use something post-converge
[2013-05-28 14:09:20 -0400] Cope: such as minitest handler, or something run by test kitchen
[2013-05-28 14:10:17 -0400] eponymi: and minitest-handler is just a component of test kitchen?
[2013-05-28 14:10:37 -0400] Cope: the true outside in stuff requires you to run your tests from somewhere external to the node you just converged - that's a bit trickier
[2013-05-28 14:10:53 -0400] Cope: minitest-handler can be run without test kitchen
[2013-05-28 14:11:18 -0400] Cope: it just uses chef's report handler functionality to run tests after the node converges, but still as part of the chef run
[2013-05-28 14:11:47 -0400] Cope: all you need to do is ensure you have the minitest-handler cookbook on your run list, and the write tests and put them in the correct place
[2013-05-28 14:11:54 -0400] Cope: then they get run at the end of the chef run
[2013-05-28 14:12:20 -0400] Cope: test kitchen has a plugin model - you can run all sorts of tests after the chef run has finished.
[2013-05-28 14:12:51 -0400] Cope: 'bats' is popular; there's minitest plugin but last time I looked it didn't have the matcher support of minitest-handler
[2013-05-28 14:14:34 -0400] eponymi: i knew minitest-handler was separate, but i thought it was integrated fully into test kitchen.
[2013-05-28 14:15:23 -0400] Cope: no; to make it work, you just need to ensure minitest-handler is on the run list
[2013-05-28 14:15:42 -0400] eponymi: ah, so the run list in .kitchen.yml if using test kitchen
[2013-05-28 14:19:37 -0400] eponymi: so why would one use test kitchen instead of just minutest handler?
[2013-05-28 14:20:37 -0400] Cope: well
[2013-05-28 14:20:53 -0400] Cope: firstly you might not want to write your post-converge tests in minitest
[2013-05-28 14:21:11 -0400] Cope: secondly you might want to reuse your tests as part of a monitoring function
[2013-05-28 14:21:41 -0400] Cope: thirdly you might have aesthetic issues with the hackery of the minitest-handler implementation
[2013-05-28 14:22:08 -0400] eponymi: oh, just that? :)
[2013-05-28 14:22:40 -0400] Cope: but most importantly - test kitchen makes it easy for you to run a bunch of tests on a bunch of platforms, and plug the results into CI
[2013-05-28 14:22:54 -0400] Cope: so if you care about that stuff, consider using test kitchen
[2013-05-28 14:25:02 -0400] Cope: but minitest-handler is a quick win - you can get it working in minutes
[2013-05-28 14:26:05 -0400] eponymi: ok, back to super noob questions. would a new minitest assertion be required to run a minutest to do something like verifying whether a database exists?
[2013-05-28 14:26:50 -0400] Cope: you make an assertion for whatever you want to verify
[2013-05-28 14:27:02 -0400] Cope: you might have several assertions in a single test
[2013-05-28 14:27:25 -0400] Cope: but if you can reason about it - if you can check against state and report whether the state is expected, you can assert that
[2013-05-28 14:27:29 -0400] eponymi: right, i just don't know if i'm understanding the assertions available by default
[2013-05-28 14:28:03 -0400] Cope: right - so off the top of my head, you'd need to wrap a test for the creation of a database in a script, unless you were doing something dumb like checking for a file
[2013-05-28 14:28:34 -0400] Cope: suppose you wanted to run show databases; and then filter out something - minitest doesn't have that built in.
[2013-05-28 14:28:39 -0400] Cope: you'd need to write a helper
[2013-05-28 14:28:58 -0400] Cope: or drop off a script that returns true/false and run that with assert_sh()
[2013-05-28 14:29:14 -0400] Cope: here, for example, you might find that test kitchen works for you
[2013-05-28 14:29:23 -0400] eponymi: so the resource_exists method from (https://github.com/calavera/minitest-chef-handler/blob/master/lib/minitest-chef-handler/assertions.rb) is only for default chef resources?
[2013-05-28 14:29:47 -0400] Cope: if you were a python dev, and could whack up a test script in miniutes, you might try to do that with test-kitchen
[2013-05-28 14:29:55 -0400] Cope: eponymi: exactly so - those resources come from chef
[2013-05-28 14:30:19 -0400] Cope: this is what i mean about the hacky implemention - you're taking advantage of the fact that you're still in teh context of a chef run
[2013-05-28 14:30:34 -0400] Cope: so you can use what chef knows about services, packages etc
[2013-05-28 14:30:56 -0400] Cope: by contrast, something truly post chef-run would need to do that independently
[2013-05-28 14:31:22 -0400] Cope: that's not really hacky - but it's not very pure - I'm not explaining this very well
[2013-05-28 14:31:39 -0400] eponymi: ahhh the helper; click :)
[2013-05-28 14:32:14 -0400] eponymi: you've helped me understand the usefulness of the tools for sure. i probably need to do some digging of my own to understand the details.
[2013-05-28 14:32:16 -0400] Cope: basically, if you want to be sure you're testing the real state of the server, there's a case for running that test entirely independently of the config management framework that is responsible for delivering machine state
[2013-05-28 14:33:17 -0400] Cope: right - back to writing :)))
[2013-05-28 14:40:31 -0400] techminer: I think I have a problem in my Chef 11 database.  We deleted the graphite cookbook, and then reimported it.  Now no matter what we do, nodes cannot find the cookbook.  knife node shows the graphite cookbook is on the server.
[2013-05-28 14:41:13 -0400] ssd7: techminer: Do you see the graphite cookbook when you do `knife cookbook list`
[2013-05-28 14:41:37 -0400] techminer: ssd7:  yes
[2013-05-28 14:41:41 -0400] techminer: on my workstation
[2013-05-28 14:44:29 -0400] techminer: ssd7:  I can "knife download graphite" on my ls
[2013-05-28 14:44:37 -0400] techminer: on my workstation
[2013-05-28 14:45:59 -0400] techminer: 'I should say knife cookbook download graphite'
[2013-05-28 14:54:28 -0400] stormerider: anyone seen an error like this? https://gist.github.com/anonymous/d1a2ab2e40a19d6a013a
[2013-05-28 15:01:19 -0400] prana: I'm seeing a lot of instances of chef-client blowing out memory (e.g. CHEF-3432 maybe). I have done a heap walk and see a lot of objects that seem to be kept around after a run completes. can anyone help me find a fix?
[2013-05-28 15:03:34 -0400] prana: fwiw, i am running 10.24.2
[2013-05-28 15:08:07 -0400] aruntomar: berks upload is crashing ruby . is anyone else facing this issue https://gist.github.com/aruntomar/5663431
[2013-05-28 15:10:17 -0400] awgross: is there a simple way to dump the node object during a run (to stdout or to a file?)
[2013-05-28 15:10:24 -0400] awgross: node.inspect is not giving much
[2013-05-28 15:10:49 -0400] awgross: trying to dump the info from a Vagrant run to use a fixture during tests
[2013-05-28 15:12:13 -0400] barefoot: awgross: Chef::Log ?
[2013-05-28 15:12:45 -0400] awgross: i can get logging to work
[2013-05-28 15:12:50 -0400] awgross: but when i run `node.inspect`
[2013-05-28 15:12:51 -0400] awgross: i just get
[2013-05-28 15:12:56 -0400] awgross: node[precise64]
[2013-05-28 15:13:20 -0400] stormerider: running into an error when doing berks upload: https://gist.github.com/anonymous/eabb5e886fe6e521dabe -- says there are invalid ruby files in the cookbook.
[2013-05-28 15:13:25 -0400] awgross: ahh
[2013-05-28 15:13:27 -0400] awgross: now i remember
[2013-05-28 15:13:30 -0400] awgross: node.to_hash
[2013-05-28 15:13:47 -0400] prana: for the curious, I added a comment to CHEF-3432 with my heap as an attachment.
[2013-05-28 15:13:49 -0400] awgross: thanks barefoot, helped me remember
[2013-05-28 15:14:56 -0400] barefoot: awgross: np, can knock out that type of help all day hehe
[2013-05-28 15:16:20 -0400] ermajn: hello, I'm having problem to upload cookbook via knife...
[2013-05-28 15:16:38 -0400] ermajn: I got this: knife cookbook upload cron        [1.2.2]
[2013-05-28 15:16:38 -0400] ermajn: ERROR: Network Error: Connection refused - connect(2)
[2013-05-28 15:16:48 -0400] ermajn: knife node list, works normally
[2013-05-28 15:16:52 -0400] ermajn: i have chef-server 11.4.4
[2013-05-28 15:17:14 -0400] ermajn: also I can access via web normaly from same host
[2013-05-28 15:17:15 -0400] fooJBar: ermajn: Are you using the https endopint to the chef server in knife.rb?
[2013-05-28 15:17:41 -0400] ermajn: chef_server_url          'http://hostname:88'
[2013-05-28 15:17:47 -0400] ermajn: fooJBar, so, not
[2013-05-28 15:17:58 -0400] fooJBar: Change that to https and remove the port
[2013-05-28 15:18:07 -0400] ermajn: fooJBar, I have disabled ssl
[2013-05-28 15:18:13 -0400] ermajn: on server side with
[2013-05-28 15:18:27 -0400] ermajn: nginx['enable_non_ssl'] = true
[2013-05-28 15:18:39 -0400] ermajn: also, I have configured port 88
[2013-05-28 15:18:50 -0400] ermajn: and it works normally via browser
[2013-05-28 15:19:12 -0400] fooJBar: ermajn: This shouldonly allow non SSL traffic, not disable ssl... I had problems with changing the SSL stuff
[2013-05-28 15:19:21 -0400] stormerider: what fooJBar said
[2013-05-28 15:20:58 -0400] ermajn: my server listens only on non ssl port (88)
[2013-05-28 15:21:11 -0400] ermajn: and.. it works only if I enter doman as above
[2013-05-28 15:21:13 -0400] ermajn: domain*
[2013-05-28 15:23:56 -0400] stormerider: any idea why berks upload would be telling me a cookbook has invalid ruby files in it? https://gist.github.com/anonymous/eabb5e886fe6e521dabe
[2013-05-28 15:26:01 -0400] ermajn: ok, when I went to default port (80)
[2013-05-28 15:26:05 -0400] ermajn: it look like it works
[2013-05-28 15:30:49 -0400] techminer: why would a node not pull the latest cookbook version off the chef-server?  I have updated the cookbook version to 0.1.21..the node insists on continuing to pull 0.1.18 even after I delete /var/cache/chef/cookbooks/COOKBOOKNAME
[2013-05-28 15:31:12 -0400] stormerider: if i point the cookbook away from my git rep, it works fine, but i havent changed specs/spec_helper.rb at all in my commits
[2013-05-28 15:31:23 -0400] stormerider: techminer: locked versioning in the environment?
[2013-05-28 15:32:10 -0400] techminer: I've never set thatbut maybe?  where would I find that?
[2013-05-28 15:33:33 -0400] stormerider: knife environment show <env>... look at the cookbook_versions
[2013-05-28 15:33:51 -0400] techminer: stormerider:  the only environment I have is "_default" and cookbook_versions is empty
[2013-05-28 15:34:23 -0400] stormerider: hm, not sure, then.
[2013-05-28 15:37:27 -0400] ismell: ello
[2013-05-28 15:37:42 -0400] ismell: does the omnibus installer have bash completion for ubuntu?
[2013-05-28 15:41:34 -0400] stormerider: ismell: don't believe so.
[2013-05-28 15:52:10 -0400] evxd: does anyone know if it's possible to use an external rabbitmq server with Chef Server 11?
[2013-05-28 15:53:00 -0400] ismell: thanks
[2013-05-28 15:53:12 -0400] evxd: i see that there are rabbitmq ip and port options in the chef-server.rb, but i'm not sure of their intended purpose
[2013-05-28 15:54:23 -0400] awgross: back again, still having trouble getting Vagrant to dump its node info in a form that i can use to create a node object for testing
[2013-05-28 15:54:29 -0400] awgross: when you dump the node info to a hash
[2013-05-28 15:54:43 -0400] awgross: it comes back different from what a Chef Search would return
[2013-05-28 15:55:23 -0400] awgross: and it does not make a complete node when using Chef::Node.json_create(v)
[2013-05-28 15:55:49 -0400] awgross: where v is the JSON loaded from what a vagrant run display when running node.to_hash.to_json
[2013-05-28 15:56:08 -0400] awgross: any ideas how to mock this out?
[2013-05-28 16:02:54 -0400] awgross: nm
[2013-05-28 16:02:55 -0400] awgross: figured it out
[2013-05-28 16:03:05 -0400] awgross: node.to_hash.to_json is different from node.to_json
[2013-05-28 16:09:45 -0400] ismell: does anyone have any examples of doing contra resources in a recipe?
[2013-05-28 16:30:41 -0400] pithagorians: how can i make the apt recipe do update and upgrade?
[2013-05-28 16:36:50 -0400] juliancdunn: ismell: you just write a recipe that does the opposite
[2013-05-28 16:37:05 -0400] juliancdunn: e.g. e.g. :remove versus :install, that sort of thing
[2013-05-28 16:47:18 -0400] ermajn: hello, after uploading cookbook.. when I select on chef web tool my cookbook I got error: undefined method `[]' for nil:NilClass
[2013-05-28 16:47:37 -0400] ermajn: I should see content of cookbook
[2013-05-28 16:47:41 -0400] barefoot: so, if you use env_run_list, is there a best practice for defining seperate attribute values for the envs?
[2013-05-28 16:52:10 -0400] ermajn: this is my exact problem, except I have chef 11.4.4: https://tickets.opscode.com/browse/CHEF-3273
[2013-05-28 16:52:31 -0400] mwatson: I keep getting the error "Error executing action `install` on resource 'package[apache2]' ... No such file or directory" even though I successfully installed and uploaded the apache2 cookbook using knife.
[2013-05-28 17:01:03 -0400] ermajn: nobody?!
[2013-05-28 17:02:15 -0400] shanlar: mwatson: paste your recipe
[2013-05-28 17:02:23 -0400] jchauncey: jtimberman: looks like the ark cookbook test kitchen tests are jacked up =\
[2013-05-28 17:02:45 -0400] jchauncey: Russ and myself are trying to fix an issue we submitted earlier but can't seem to get the tests to pass
[2013-05-28 17:04:30 -0400] ermajn: shanlar, you think my recepie is making problem?
[2013-05-28 17:05:16 -0400] shanlar: i was talking to mwatson, sorry not sure what your issue is
[2013-05-28 17:05:49 -0400] mwatson: package "apache2" do action :install end  service "apache2" do action [ :start, :enable ] end  cookbook_file "/var/www/index.html" do source "index.html" mode "0644" end
[2013-05-28 17:06:51 -0400] ermajn: this is my exact problem, except I have chef 11.4.4: https://tickets.opscode.com/browse/CHEF-3273
[2013-05-28 17:07:06 -0400] shanlar: did you try and manually install the package mwatson?
[2013-05-28 17:07:20 -0400] shanlar: through apt-get/yum on the box
[2013-05-28 17:09:33 -0400] mwatson: I will right now
[2013-05-28 17:12:22 -0400] mwatson: I'm using centOS and everything installs fine using "sudo yum install httpd"
[2013-05-28 17:15:52 -0400] shanlar: mwatson: you did install httpd
[2013-05-28 17:15:57 -0400] shanlar: but in your recipe you call it apache2
[2013-05-28 17:15:59 -0400] shanlar: thats your issue
[2013-05-28 17:17:24 -0400] shanlar: package 'httpd' do action :install end
[2013-05-28 17:18:12 -0400] mwatson: I thought that they were two names for the same thing. In the apache2 cookbook docs it states "provides a complete Debian/Ubuntu style Apache HTTPD configuration". The only apache2 package I know that works with yum is "httpd"
[2013-05-28 17:20:36 -0400] st_iron: hi
[2013-05-28 17:22:36 -0400] shanlar: ERROR: Server returned error for https://api.opscode.com/organizations/bah/sandboxes, retrying 1/5 in 4s
[2013-05-28 17:22:46 -0400] mwatson: I don't believe there is a "https" cookbook, or "apache2" yum package
[2013-05-28 17:22:47 -0400] shanlar: ugh i get this so many times throughout the day it is frustrating :(
[2013-05-28 17:22:51 -0400] mwatson: "httpd"
[2013-05-28 17:23:20 -0400] shanlar: what cookbook are you using?
[2013-05-28 17:23:52 -0400] mwatson: I was trying to use the cookbook located here: http://community.opscode.com/cookbooks/apache2
[2013-05-28 17:29:29 -0400] mwatson: I changed by cookbook to "yum_package "apache2" do package_name "httpd" action :install end" and I still get the error "Error executing action `install` on resource 'yum_package[apache2]' "
[2013-05-28 17:30:04 -0400] mwatson: even though "yum install httpd" works locally
[2013-05-28 17:34:56 -0400] techminer: chef-server-ctl test returning lots of errors.see the pastie  http://pastie.org/7975574  This server was working fine but I started to get some really odd problems in the last few days.  Finally went to the server to see what that test showed and as you can see I've got some problems somewhere.
[2013-05-28 17:35:20 -0400] techminer: What's the best way to clean this up?  Reinstall?
[2013-05-28 17:39:00 -0400] bbhoss: anyone have any experience running a chef server in a VPC with only a private interface? it always dies like this for me: https://gist.github.com/anonymous/58157a1da078d996ff8e
[2013-05-28 17:39:07 -0400] bbhoss: works fine with a normal instance
[2013-05-28 17:41:25 -0400] shanlar: mwatson: 'yum_package[apache2]' is equal to running 'yum install apache2'
[2013-05-28 17:41:54 -0400] shanlar: which centos doesnt have a package called apache2
[2013-05-28 17:42:49 -0400] novatech1: hello
[2013-05-28 17:43:28 -0400] Cope: shanlar: no centos has a package called apache2
[2013-05-28 17:43:56 -0400] mwatson: same error if I change my recipe to "package "httpd" do action :install end" or yum_package "httpd" do action :install end
[2013-05-28 17:45:21 -0400] Cope: mwatson: suggest writing a short recipe just to install httpd, and running with chef solo or chef apply with debug; or maybe try with chef-shell, so you can see what is happening
[2013-05-28 17:45:54 -0400] mwatson: ok
[2013-05-28 17:51:38 -0400] eponymi: is anyone using running chefspec tests on travis? i can't seem to find any examples
[2013-05-28 17:52:05 -0400] techminer: Is there a way to remove and reinstall chef-server 11 on Ubuntu.and keep the data intact?
[2013-05-28 17:56:32 -0400] jtimberman: jchauncey: think i found it
[2013-05-28 17:56:43 -0400] jtimberman: jchauncey: that is, if you're getting a no method on bin_path :)
[2013-05-28 18:00:00 -0400] atomic-penguin: eponymi, I don't see a travis badge on it, but it appears java CB has chefspec examples on github https://github.com/opscode-cookbooks/java/tree/master/spec
[2013-05-28 18:00:55 -0400] jtimberman: we're not running it in travis yet
[2013-05-28 18:01:40 -0400] eponymi: atomic-penguin right but i don't see how to get the tests to run in travis; there is no .travis.yml in that repo
[2013-05-28 18:02:03 -0400] eponymi: i see someone doing it here (https://github.com/mlafeldt/ps2dev-cookbook/blob/master/Rakefile) i think, but my ruby is not so good, so i don't really understand what's going on
[2013-05-28 18:03:41 -0400] eponymi: i've got linting and syntax (via foodcritic) on travis, but would really like to have spec in there as well
[2013-05-28 18:04:46 -0400] novatech1: when i run chef-solo on my windows 7 machine I get this error:
[2013-05-28 18:05:22 -0400] novatech1: FATAL: ArgumentError: Cannot find a version for node[loris]
[2013-05-28 18:05:47 -0400] mwatson: I am unable to install any packages, even using chef-solo. I currently have a recipe that is "package "subversion"" and I still get the error Error executing action `install` on resource 'package[subversion]'  No such file or directory - port installed subversion"
[2013-05-28 18:05:59 -0400] eponymi: jtimberman: test kitchen tests from bluepill 2.2.2 are failing on ubuntu 12.04
[2013-05-28 18:06:06 -0400] gleam: it sounds like it's using macports and you don't have macports setup
[2013-05-28 18:06:17 -0400] gleam: unless i'm on crack
[2013-05-28 18:06:19 -0400] eponymi: i only bring it up bc it was in http://jtimberman.housepub.org/blog/2013/03/19/anatomy-of-a-test-kitchen-1-dot-0-cookbook-part-1/
[2013-05-28 18:07:26 -0400] novatech1: ohai gives a null for os_version
[2013-05-28 18:07:41 -0400] atomic-penguin: eponymi, Pretty sure you just need a rake task for the chefspec, like here: https://github.com/opscode-cookbooks/ntp/blob/master/Rakefile
[2013-05-28 18:08:01 -0400] novatech1: ohai is 6.16.0, chef is 11.4.4
[2013-05-28 18:08:10 -0400] atomic-penguin: eponymi, then call that rake task in your travis.yml https://github.com/opscode-cookbooks/ntp/blob/master/.travis.yml
[2013-05-28 18:09:05 -0400] eponymi: atomic-penguin thanks, just what i was looking for
[2013-05-28 18:09:28 -0400] stormerider: jtimberman: thanks for that ruby fix in the nagios spec_helper.rb
[2013-05-28 18:10:46 -0400] novatech1: anyone got  clue why ohai returns null for os_version on my windows 7 machine? it's somewhat crippling :(
[2013-05-28 18:11:46 -0400] pithagorians: knife role create webserver gives me ERROR: RuntimeError: Please set EDITOR environment variable any idea why?
[2013-05-28 18:12:21 -0400] techminer: pithagorians "export EDITOR=vim"
[2013-05-28 18:12:24 -0400] eponymi: you haven't set the EDITOR environment variable?
[2013-05-28 18:12:27 -0400] miah: export EDITOR=$(which nano)
[2013-05-28 18:12:29 -0400] novatech1: could be a stab in the dark, but i reckon it might be because you haven't set your editor variable
[2013-05-28 18:12:31 -0400] miah: unless you know how to use vim =)
[2013-05-28 18:13:09 -0400] pithagorians: miah: thx, i'm very good with vim
[2013-05-28 18:13:33 -0400] mwatson: add EDITOR=$(which vi) ro your shell profile
[2013-05-28 18:13:38 -0400] mwatson: to*
[2013-05-28 18:13:49 -0400] mwatson: so you won't have to keep doing this
[2013-05-28 18:16:24 -0400] mwatson: no matter what resource I try to declare I get the same error that the package doesn't exist
[2013-05-28 18:16:29 -0400] cassianoleal: how do I dump the node's attributes to stdout in a recipe file?
[2013-05-28 18:16:47 -0400] novatech1: [System.Environment]::OSVersion.Version returns a sane result
[2013-05-28 18:16:54 -0400] novatech1: 6.1.7601.65536
[2013-05-28 18:17:19 -0400] novatech1: I'm really stuck here - I can't do a single thing because of this... anyone got any ideas?
[2013-05-28 18:18:19 -0400] ermajn: I stll can not figure out why my chef web shows me this:  undefined method `close!' for nil:NilClass
[2013-05-28 18:18:23 -0400] ermajn: when I select my cookbook
[2013-05-28 18:18:24 -0400] ermajn: :S
[2013-05-28 18:19:39 -0400] spheromak: cassianoleal you could Chef::Log.info node.to_json
[2013-05-28 18:22:12 -0400] cassianoleal: spheromak: thanks, that did it :)
[2013-05-28 18:23:42 -0400] novatech1: :( I picked chef because i was told windows support was good and the community was responsive and helpful
[2013-05-28 18:24:05 -0400] novatech1: seems windows support is non-existent if ohai can't even find an os version
[2013-05-28 18:24:13 -0400] itwasntandy: novatech1: did you install using omnibus installer?
[2013-05-28 18:24:15 -0400] novatech1: and no-one seems to be able to help :(
[2013-05-28 18:24:17 -0400] itwasntandy: or through some other method?
[2013-05-28 18:24:30 -0400] novatech1: I used the msi from the opscode site
[2013-05-28 18:24:31 -0400] jtimberman: eponymi: yeah, they are.
[2013-05-28 18:24:46 -0400] jtimberman: stormerider: sure thing
[2013-05-28 18:25:04 -0400] jtimberman: stormerider: i know people like their 'clean' syntax, but i really really hate the "ruby 1.9" hash syntax.
[2013-05-28 18:25:07 -0400] jtimberman: :)
[2013-05-28 18:25:17 -0400] stormerider: :)
[2013-05-28 18:25:17 -0400] jtimberman: I also dislike yaml, so
[2013-05-28 18:25:18 -0400] mwatson: I have been having much more trouble using windows than linux, but that is probably more my fault
[2013-05-28 18:25:37 -0400] miah: novatech1: uh. that is the OS version.
[2013-05-28 18:25:52 -0400] novatech1: miah - null is the os version
[2013-05-28 18:26:15 -0400] miah: http://www.windows-commandline.com/2009/01/find-windows-os-version-from-command.html
[2013-05-28 18:26:29 -0400] cassianoleal: spheromak: just for the record, node.debug_value can be combined with pp to print out a more readable form of the attributes, and helps find out exactly where each attribute is being set
[2013-05-28 18:26:41 -0400] miah: it finds the right version, maybe its not the information you're looking for though.
[2013-05-28 18:26:46 -0400] cassianoleal: found it now (:
[2013-05-28 18:26:53 -0400] jchauncey: jtimberman: that is one problem, but we are also getting other failures
[2013-05-28 18:27:01 -0400] novatech1: miah - it totally doesn't find the os version at all
[2013-05-28 18:27:12 -0400] novatech1: when i run ohai and look at os_version it gives null
[2013-05-28 18:27:17 -0400] miah: novatech1: oh i see
[2013-05-28 18:27:33 -0400] jchauncey: jtimberman: it looks like people are not running the test kitchen tests
[2013-05-28 18:27:36 -0400] novatech1: the version i showed was wat i extracted from powershell
[2013-05-28 18:27:39 -0400] miah: i personally havent used it on windows, but i suspect there will be a bug report about that issue at least. lets see.
[2013-05-28 18:27:52 -0400] eponymi: jtimberman is that supposed to be like a practical lesson in writing tests?
[2013-05-28 18:27:56 -0400] novatech1: i jut fired up a server 2008r2 machine - it works just fine
[2013-05-28 18:29:10 -0400] zenloop: Hey guys.  I want to install apache with the chef cookbook but do not want it to start after install (as I am running nginx which is already bound to port 80 and I do not want apache to actually start.  just to be installed).
[2013-05-28 18:30:03 -0400] techminer: Is there a way to resolve errors in the "chef-server-ctl test"?  Or just remove and reinstall?
[2013-05-28 18:30:39 -0400] miah: novatech1: take a look at http://tickets.opscode.com/browse/OHAI-273 and http://tickets.opscode.com/browse/OHAI-306
[2013-05-28 18:31:11 -0400] eponymi: zenloop: you could change the port attribute so that it started on a different port
[2013-05-28 18:31:15 -0400] miah: definitely file a ticket, support@opscode.com would probably also be a great place to get help. there are definitely other windows users in here too. but they are definitely in the minority. still opscode is doing a lot to support the windows platform. so dont give up =)
[2013-05-28 18:31:19 -0400] eponymi: or you could use a plain package resource
[2013-05-28 18:31:54 -0400] zenloop: is there a way to tell the package resource not to start the daemon automatically (this is a part of the dpk post install script I think).
[2013-05-28 18:32:30 -0400] miah: zenloop: you would have to supply a seed file
[2013-05-28 18:32:41 -0400] miah: and disable it that way.
[2013-05-28 18:33:05 -0400] zenloop: Thanks for the response. I am not familiar with seed files and packages.  Can you explain?
[2013-05-28 18:33:41 -0400] novatech1: miah: do i need to be a paying customer to raise a ticket?
[2013-05-28 18:33:45 -0400] miah: zenloop: take a look at http://docs.opscode.com/resource_package.html and the response_file argument. http://wiki.debian.org/DebianInstaller/Preseed
[2013-05-28 18:33:49 -0400] miah: novatech1: nope
[2013-05-28 18:43:01 -0400] magoo: I'm using the latest opscode node.js cookbook and i'm suddenly getting this in staging/prod [2013-05-28T18:42:11+00:00] FATAL: RuntimeError: apt_repository[node.js] (nodejs::install_from_package line 32) had an error: RuntimeError: The repository file to create is nil, cannot continue.
[2013-05-28 18:43:37 -0400] novatech1: miah - ok thanks
[2013-05-28 18:45:14 -0400] magoo: considering this blocks production code deploys, I will owe the person with the solution a beer of their choice ;)
[2013-05-28 18:48:19 -0400] miah: magoo: where did you get the nodejs cookbook>?
[2013-05-28 18:49:38 -0400] magoo: opscode download, version 1.1.2
[2013-05-28 18:49:49 -0400] miah: you mean community site?
[2013-05-28 18:49:53 -0400] magoo: yeah
[2013-05-28 18:50:01 -0400] jkeiser: FYI, new version of chef-zero and knife-essentials released (1.1).  This release implements "knife serve", allowing you to serve up your repository in chef-zero with a knife command.
[2013-05-28 18:50:07 -0400] jkeiser: (It serves from the disk, so edits you make to files in your repo will be automatically served up by chef-zero)
[2013-05-28 18:50:07 -0400] juliancdunn: novatech1: I'm running Ohai on a 2012 box and I see OS attributes...
[2013-05-28 18:50:44 -0400] novatech1: juliancdunn: yes - i see os attrs on server 2008 too; but not on my windows 7 machine
[2013-05-28 18:50:48 -0400] jkeiser: I have run it through all the paces, but this release changes the storage backend throughout, so please let me know if you see any issues
[2013-05-28 18:50:49 -0400] novatech1: freshly patched today
[2013-05-28 18:50:55 -0400] magoo: miah: the interesting thing is that it works fine in a vagrant VM in dev
[2013-05-28 18:51:06 -0400] magoo: Ubuntu 12.04 in dev and prod
[2013-05-28 18:51:18 -0400] juliancdunn: novatech1: weird. I don't have a W7 box to test though, only server platforms
[2013-05-28 18:51:36 -0400] miah: magoo: do you know where on the community site you found it? i cant help if i cant veiw the source code
[2013-05-28 18:52:00 -0400] Cope: novatech1: if I can find my windows 7 media, i'll whack an install in a test box and give it a try
[2013-05-28 18:52:04 -0400] magoo: http://community.opscode.com/cookbooks/nodejs
[2013-05-28 18:52:29 -0400] Cope: I have 20012 and 2008 machines in production working just fine - don't worry, Windows is very well supported
[2013-05-28 18:54:47 -0400] miah: magoo: magoo do you have this attribute defined? node['nodejs']['legacy_packages']
[2013-05-28 18:55:01 -0400] novatech1: i'm glad it's working for you - but i have windows 7 workstations i need to manage, and this isn't working; thanks for the reassurance tho
[2013-05-28 18:55:07 -0400] miah: seems like you'd need that set, otherwise repo ends up as nil and the apt_repository resource will fail with that error
[2013-05-28 18:55:54 -0400] miah: magoo: https://github.com/mdxp/nodejs-cookbook/blob/master/recipes/install_from_package.rb#L32
[2013-05-28 18:55:58 -0400] miah: for refernce
[2013-05-28 18:56:04 -0400] magoo: miah: I don't, and this was working before last night for whatever reason
[2013-05-28 18:56:13 -0400] magoo: but I'll change this and see if it works
[2013-05-28 18:56:23 -0400] Cope: novatech1: well, I have a windows 7 machine with chef running fine; so it seems likely you either have something weird on your system, or the latest patches have introduced a problem
[2013-05-28 18:56:56 -0400] miah: ya, its set as a default attribute in the cookbook with a value of false, so it should be ok. but why else would this be failing?
[2013-05-28 18:57:19 -0400] Cope: if you want to chase it down yourself, look at https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/windows/kernel.rb
[2013-05-28 18:57:22 -0400] miah: maybe if you have a more complete stacktrace you can gist/pastebin for further debug
[2013-05-28 18:57:33 -0400] Cope: the plugin calls WMI::Win32_OperatingSystem.find(:first)
[2013-05-28 18:57:50 -0400] Cope: you could try  that in pry/irb and see if you get silly data
[2013-05-28 19:00:29 -0400] miah: ooh. lunch is here. bbl.
[2013-05-28 19:02:31 -0400] miah: Cope: oh. but i doubt its lunch time where you are :P
[2013-05-28 19:02:51 -0400] miah: ooh. dinner time =)
[2013-05-28 19:03:08 -0400] miah: our lunch looks meh today. gonna go out and fetch food i guess.
[2013-05-28 19:03:59 -0400] Cope: miah: I'm excited about dinner happening v.soon
[2013-05-28 19:04:13 -0400] Cope: novatech1: so, os_version is just whatever kernel[:release] reports as
[2013-05-28 19:09:08 -0400] magoo: miah: tried to add the ppa manually
[2013-05-28 19:09:12 -0400] magoo: Cannot access PPA (https://launchpad.net/api/1.0/~chris-lea/+archive/node.js/ubuntu) to get PPA information, please check your internet connection.
[2013-05-28 19:09:27 -0400] magoo: yet I can talk out to other resources just fine
[2013-05-28 19:11:14 -0400] magoo: n/m, I used the wrong string there
[2013-05-28 19:15:10 -0400] stormerider: is a definition considered a resource?
[2013-05-28 19:22:58 -0400] jtimberman: stormerider: nope
[2013-05-28 19:23:05 -0400] Cope: novatech1: http://dpaste.com/1202776
[2013-05-28 19:25:53 -0400] sprack: is there a graceful workaround/bypass for the nginx cookbook jamming the ruby-dev package on?
[2013-05-28 19:26:19 -0400] stormerider: jtimberman: any ideas how i would go about overriding a template resource created via a definition? (specifically, using the nagios_conf definition) i tried both resources("template[/etc/nagios3/commands.cfg]").cookbook "lm-nagios" and resources("template[#{conf_dir}/#{params[:name]}.cfg]").cookbook "lm-nagios", both toss ruby errors at me
[2013-05-28 19:27:21 -0400] novatech1: http://dpaste.com/1202779/
[2013-05-28 19:27:51 -0400] monokrome: novatech1: Are you in Utah? O_O
[2013-05-28 19:28:18 -0400] novatech1: monokrome: no! why?
[2013-05-28 19:28:36 -0400] monokrome: Oh. I did some work for a company in Utah called NovaTech. So, just curious. :)
[2013-05-28 19:28:43 -0400] novatech1: ah okk :)
[2013-05-28 19:32:47 -0400] sprack: is it usually best to workaround those with a site-cookbook?
[2013-05-28 19:33:40 -0400] drgage: where can i download chef server 10.24.0?
[2013-05-28 19:34:22 -0400] novatech1: i need to head off for  a bit now... any thoughts on that paste most welcome
[2013-05-28 19:40:23 -0400] siezer: drgage you'd want to use this cookbook to set it up: https://github.com/opscode-cookbooks/chef-server/tree/chef10
[2013-05-28 19:42:33 -0400] miah: a definition is more of a abstract resource. its essentially the same as having a recipes/default.rb and then doing 'include_recipe "herp::default"' but it gives you a method for calling it and naming it.
[2013-05-28 19:42:55 -0400] miah: slightly more useful for creating unique instances of something where you are just reusing existing resources
[2013-05-28 19:43:28 -0400] cassianoleal: in test-kitchen 1.0, shouldn't the attributes in .kitchen.yml override all others?
[2013-05-28 19:43:29 -0400] miah: you could set a param on your definition to declare a variable where you are storing the cookbook detail
[2013-05-28 19:43:50 -0400] cassianoleal: I have a test that fails because the attribute set there is not overriding some set[] attributes in a recipe file
[2013-05-28 19:43:51 -0400] miah: the second choice looks fine, but its old style resource declaration
[2013-05-28 19:44:33 -0400] gigo1980: hi what cookbook do you use to write your own own config (vhosts) for nginx. any tutorial ?
[2013-05-28 19:45:24 -0400] gigo1980: or do you copy this files manual to an folder ? this might be also an solution for me
[2013-05-28 19:45:35 -0400] gabceb: Hi everybody
[2013-05-28 19:46:48 -0400] gabceb: after following quick start steps here -> https://learnchef.opscode.com/quickstart/chef-repo/. On step 5 i get ERROR: TypeError: wrong argument type nil (expected Fixnum)
[2013-05-28 19:47:03 -0400] gabceb: when i type `knife client list`
[2013-05-28 19:48:13 -0400] gabceb: actually nvm. i needed to execute it with sudo
[2013-05-28 20:02:51 -0400] sprack: holy crap. what attorney decided the rules for submitting a pull request for an opscode cookbook
[2013-05-28 20:03:14 -0400] jchauncey: why?
[2013-05-28 20:03:41 -0400] Kyle11: so i have a vagrant box (the default one from the vagranup.com tutorial).  The community cookbook tmux works on it, and its running chef 10.  When I vagrant ssh, upgrade the box to chef 11, the script then fails with   FATAL: NoMethodError: undefined method `[]' for nil:NilClass      on the line 19 of the default receipe  https://github.com/kylesloan/tmux/blob/master/recipes/default.rb : 19
[2013-05-28 20:07:00 -0400] sprack: jchauncey: have to create an account with opscode, make a ticket in the bug tracker, sign a CLA and then you can link a pull request
[2013-05-28 20:08:02 -0400] chris6131: Seems pretty standard
[2013-05-28 20:08:22 -0400] chris6131: Shot in the dark here, but is there an easy way to globally supress restart notifications for just one chef run?
[2013-05-28 20:08:38 -0400] sprack: kernel commits are easier
[2013-05-28 20:08:51 -0400] ismell: there is so many tools and practices to get my head around
[2013-05-28 20:09:11 -0400] chris6131: Like, I have 200 config files to which I have just added a "DO NOT EDIT" header to. I want to roll those out but I don't want Chef to restart all of my services due to config changes, since I know for sure they are just comments
[2013-05-28 20:09:47 -0400] siezer: sprack the bug tracker thing is just our workflow. the CLA is standard for f/oss projects
[2013-05-28 20:18:00 -0400] ignatz: I asked google to find "chef cookbook skel bash" and it asked if I meant "chef cookbook skull bash"
[2013-05-28 20:19:27 -0400] miah: hah
[2013-05-28 20:19:42 -0400] miah: baked bashed skull is my favorite dish
[2013-05-28 20:19:49 -0400] ignatz: mmm mm.
[2013-05-28 20:21:31 -0400] stormerider: how do you install berkshelf 2.0.0.beta? gem keeps telling me it cant find it
[2013-05-28 20:22:00 -0400] ivey: `gem install berkshelf --pre` should work
[2013-05-28 20:23:11 -0400] stormerider: aha, thanks. i tried `gem update berkshelf --pre` and that didnt.
[2013-05-28 20:23:24 -0400] stormerider: i keep forgetting you can have multiple versions of a gem installed at the same time
[2013-05-28 20:28:45 -0400] jchauncey: jtimberman: so we were able to fix all the failing tests for ark (test-kitchen tests that is) so we are creating individual issues for each failure and will submit pull requests
[2013-05-28 20:29:24 -0400] jroh: is there a way to use the deploy resource w/ no symlinking? I keep trying empty hashes or nil for symlinks and symlink_before_migrate but it's not listening to me
[2013-05-28 20:37:43 -0400] nebrera_: helllo
[2013-05-28 20:38:09 -0400] nebrera_: I have noticed one strange thing. The first time the node is executed on the chef-server
[2013-05-28 20:38:19 -0400] nebrera_: The Chef::Node.load
[2013-05-28 20:38:31 -0400] nebrera_: return the object but it has no roles method
[2013-05-28 20:38:34 -0400] nebrera_: why ?
[2013-05-28 20:38:51 -0400] pcn: ohai chefs
[2013-05-28 20:39:10 -0400] pcn: is there a best practice/right way to do things that can take an arbitrarily long time?
[2013-05-28 20:39:45 -0400] pcn: I'm dealing with databased restores as part of my cassandra spin-ups, and recently they've started to take longer than chef-solo wants to wait
[2013-05-28 20:41:31 -0400] jroh: nm.. apparently I just had the syntax wrong
[2013-05-28 20:45:26 -0400] jtimberman: jchauncey: huh.. after moving the bin_path local variable out of the ruby_block resource, test kitchen ran clean on my jenkins node.
[2013-05-28 20:46:12 -0400] jchauncey: jtimberman: huh we had 4 distinct failures
[2013-05-28 20:46:21 -0400] jchauncey: are you working off of master/
[2013-05-28 20:46:22 -0400] jchauncey: ?
[2013-05-28 20:48:53 -0400] pwf: question for the chef devs: why isn't this https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/chef-server/recipes/nginx.rb#L46 using this https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/chef-server/libraries/helper.rb#L36
[2013-05-28 20:49:04 -0400] pwf: the former is dying because that binary doesn't exist for some reason?
[2013-05-28 20:53:08 -0400] aslan: hey guys... i have updated a value ( passenger gem version) in my attributes. somehow it is not taking effect in the existing servers. the new gem version is not getting installed. Am i doing something wrong or is there something funky going on with attributes?
[2013-05-28 20:56:26 -0400] jtimberman: jchauncey: yeah, this revision: 78d200da25457bf40e9602f453b3b224cc2fbcd1
[2013-05-28 20:58:13 -0400] sprack: aslan: nginx { passenger { version
[2013-05-28 20:58:20 -0400] jchauncey: some of the things we fixed are already fixed in the refactor-lwrp branch but the tests do not pass on master without them
[2013-05-28 20:58:51 -0400] gigo1980: @sprack, do you setup nginx with chef ?
[2013-05-28 20:59:03 -0400] sprack: gigo1980: yes
[2013-05-28 20:59:08 -0400] aslan: sprack: the way i set it is default['passenger']['version']          = '4.0.2'
[2013-05-28 20:59:21 -0400] gigo1980: and do you also use upstream, for the proxy part ?
[2013-05-28 21:00:06 -0400] gigo1980: or how do you create your sites (vhost) files ?
[2013-05-28 21:00:08 -0400] sprack: gigo1980: i have with unicorn, but not with passenger
[2013-05-28 21:00:57 -0400] sprack: aslan; have you tried an override instead of default?
[2013-05-28 21:01:22 -0400] aslan: sparr: no. should i ? i mean is that the standard method?
[2013-05-28 21:01:30 -0400] sprack: aslan: for this I'm not wrapping, I'm just defining in the role
[2013-05-28 21:01:35 -0400] sparr: you mean sprack
[2013-05-28 21:02:18 -0400] aslan: darn auto complete ... :[
[2013-05-28 21:02:43 -0400] aslan: so what is the correct way of updating a value in attributes?
[2013-05-28 21:03:47 -0400] gigo1980: @sprack but what has unicor or passenger to do with nginx ?
[2013-05-28 21:04:00 -0400] sprack: aslan: I think the answer I get most from opscode on that, "no one right way, lots of wrong ones". either way works
[2013-05-28 21:05:01 -0400] aslan: lol... ok. now i remember why I never liked working with attributes. I rather dump everything in data bags and query it from there. the problem is this is an old cookbook and i dont have time to update it
[2013-05-28 21:05:54 -0400] sprack: gigo1980: i've only done a setup of an nginx upstream proxy for redirect using unicorn. if you're trying to use it as a full proxy/LB for your site I have not. using AWS ELB for that
[2013-05-28 21:13:04 -0400] sprack: gigo1980: looking at the recipe, it doesn't look like it has hooks for that feature. you'll have to make a wrapper cookbook that rewrites the nginx.conf.erb with the values you need
[2013-05-28 21:14:50 -0400] gigo1980: ok thx
[2013-05-28 21:21:56 -0400] drgage: haha
[2013-05-28 21:21:59 -0400] drgage: oops
[2013-05-28 21:49:24 -0400] stormerider: is the ruby_block resource something that you can override with .cookbook ?
[2013-05-28 21:57:07 -0400] juliancdunn: stormerider: yeah, but that wouldn't make any sense?
[2013-05-28 21:57:46 -0400] stormerider: well, specifically, im looking to disable the ruby_block[] resource from one cookbook in a wrapper cookbook.
[2013-05-28 21:58:24 -0400] juliancdunn: stormerider: oh, well you could presumably override the action to :nothing
[2013-05-28 21:58:35 -0400] stormerider: the java recipe has ruby_block[set-env-java-home] which is always flagged as being updated on each run, and im trying to get to 0 when nothing has changed
[2013-05-28 21:59:55 -0400] ranjib: stormerider, i did something like ...not_if {ENV['JAVA_HOME'] }
[2013-05-28 22:00:32 -0400] stormerider: for some reason it doesn't seem to be picking it up from /etc/profile.d/jdk.sh
[2013-05-28 22:00:34 -0400] juliancdunn: isn't that what master already has?
[2013-05-28 22:00:47 -0400] jtimberman: stormerider: i kind of dislike that whole scenario :)
[2013-05-28 22:00:52 -0400] jtimberman: like, why does Chef need the JAVA_HOME?
[2013-05-28 22:01:06 -0400] stormerider: jtimberman: i really agree.
[2013-05-28 22:01:09 -0400] jtimberman: except then if you want to do things with Java in a Chef run, you get sad.
[2013-05-28 22:01:49 -0400] stormerider: what i find more annoying is that instead of having that as a separate recipe you can use if you want, it gets shoehorned in via include_recipe on the installers
[2013-05-28 22:04:15 -0400] stormerider: so, i can either try to track down why chef-client doesn't see the environment variable in the first place, or refactor that part of the cookbook.
[2013-05-28 22:04:36 -0400] stormerider: or beat my head over why it isn't being seen when i try to override it *sigh*
[2013-05-28 22:04:47 -0400] stormerider: wrapper cookbooks are not turning out to be easy at all.
[2013-05-28 22:04:48 -0400] jtimberman: stormerider: chef-client probably isn't sourcing the jdk.sh
[2013-05-28 22:06:28 -0400] stormerider: probably, but im not sure why; using /bin/sh and /bin/bash, both seem to load it fine
[2013-05-28 22:08:22 -0400] Kyle11: Might be an environment issue for the user that is running chef sounds like something when I run a script by hand and then it fails in cron
[2013-05-28 22:10:05 -0400] bakins: still no smartos omnibus packages?
[2013-05-28 22:10:06 -0400] stormerider: chef-client is running as root.
[2013-05-28 22:10:40 -0400] jtimberman: bakins: not native packages, the 'solaris' makeself bin archive should work.
[2013-05-28 22:10:44 -0400] Kyle11: My scenario was running as root as well as was the cron
[2013-05-28 22:10:55 -0400] bakins: jtimberman: link?
[2013-05-28 22:11:03 -0400] bakins: install.sh didn't work...
[2013-05-28 22:12:25 -0400] jtimberman: bakins: might need the URL directly rather than the install.sh "magic"
[2013-05-28 22:12:37 -0400] bakins: yeah, if I click on version of chef, I get a direct link
[2013-05-28 22:12:45 -0400] bakins: I'm just lazy ;)
[2013-05-28 22:12:53 -0400] jtimberman: i played very briefly with the smartos vagrant box benr tweeted a couple weeks ago
[2013-05-28 22:13:02 -0400] jtimberman: the install.sh works on the latest omnios though :)
[2013-05-28 22:13:29 -0400] stormerider: im wondering if chef-client or ruby is trimming the environment variables
[2013-05-28 22:14:12 -0400] gleam: is this stuff from profile.d? i'm guessing chef isn't running with a login shell
[2013-05-28 22:14:54 -0400] stormerider: so echo $JAVA_HOME shows it, but irb "puts #{ENV['JAVA_HOME']}" does not.
[2013-05-28 22:15:29 -0400] bakins: hem, the direct link is a solaris package, not a bin archive it seems
[2013-05-28 22:17:29 -0400] dopacki: hi. trying to install community chef (11.4.4-2.ubuntu.11.04) on ubuntu 12.04LTS using the "quick install" script. dpkg -s shows the package installed, but chef-server-ctl is not on the disk..
[2013-05-28 22:17:45 -0400] dopacki: any suggestions?
[2013-05-28 22:21:00 -0400] gleam: sounds like your path didn't get changed to pick up /opt/chef-server/bin
[2013-05-28 22:21:31 -0400] dopacki: I see /opt/chef/bin, but no /opt/chef-server/bin
[2013-05-28 22:21:42 -0400] dopacki: ah.. I'm retarded
[2013-05-28 22:22:02 -0400] gleam: did you install the client?
[2013-05-28 22:22:11 -0400] gleam: instead of the server?
[2013-05-28 22:22:32 -0400] dopacki: yep. The instructions for installing the server take you to the client install, by default
[2013-05-28 22:22:45 -0400] gleam: whoops
[2013-05-28 22:22:51 -0400] dopacki: you have to notice the tab up top and select server
[2013-05-28 22:22:56 -0400] dopacki: doc fail
[2013-05-28 22:24:04 -0400] stormerider: blargh. berkshelf is telling me it cant connect to my chef server, but i can use knife and view the webui fine
[2013-05-28 22:31:58 -0400] jtimberman: monokrome: there's a :force_deploy action
[2013-05-28 22:35:20 -0400] jtimberman: stormerider: do you have ~/.berkshelf/config.json pointing somewhere incorrect?
[2013-05-28 22:38:12 -0400] stormerider: jtimberman: d'oh. so i had pointed my rake task at config/berks-config.json, and forgot to do so when i was running berks upload manually. that said, i have nginx for Chef pointed at a real SSL certificate, and the only thing in my berks-config.json is { ssl: { verify: false } } so im not sure why it's erroring...
[2013-05-28 22:47:14 -0400] stormerider: ah, it didn't like the certificate chain. once i added rapidssl to the ca bundle it works fine.
[2013-05-28 22:47:46 -0400] gkra: anybody here use rundeck?
[2013-05-28 22:56:31 -0400] stormerider: looked at it, never did do much with it though.
[2013-05-28 22:59:01 -0400] timsmith: I used it for a brief period of time
[2013-05-28 22:59:09 -0400] timsmith: there's some hacks to integrate it with your chef data
[2013-05-28 22:59:12 -0400] timsmith: but they don't work very well
[2013-05-28 23:02:37 -0400] stormerider: honestly, once i started using knife ssh, i didnt see the point :)
[2013-05-28 23:04:58 -0400] gsymons-di: \join #chefspec
[2013-05-28 23:05:14 -0400] gsymons-di: Hmmm... silly client, that was a command.
[2013-05-28 23:06:14 -0400] gkra: timsmith: yeah, we're running into the "hacks" and "dont' work very well" here...
[2013-05-28 23:07:00 -0400] timsmith: I had really high hopes and if someone added support within rundeck it would be awesome, but the hacks are really hacky
[2013-05-28 23:08:58 -0400] stormerider: hrm. chef_handler seems to always reload the handler per http://tickets.opscode.com/browse/COOK-620, which flags it as always being updated...
[2013-05-28 23:11:18 -0400] stormerider: seems like there should be a better way of handling this so it's not always flagged as updated. im just not sure exactly how at the moment.
[2013-05-28 23:17:32 -0400] gansbrest: hello. I noticed that template resource doesn't get executed when used inside LWRP. When I put it outside - works. I wonder where the problem is, since yum cookbook doesn't work on my rehl box because of it
[2013-05-28 23:20:41 -0400] ranjib: gansbrest,did you check whether the lwrp is getting executed?
[2013-05-28 23:20:50 -0400] gansbrest: yep, it does
[2013-05-28 23:21:24 -0400] gansbrest: here is the code
[2013-05-28 23:21:24 -0400] gansbrest: https://github.com/opscode-cookbooks/yum/blob/2.2.0/providers/repository.rb
[2013-05-28 23:23:12 -0400] gansbrest: if you look at the action :add section, it calls repo_config which then executes template a the very end. But that template resource is simply ignored for me.. I don't see it in the logs.. It just skips it
[2013-05-28 23:24:01 -0400] gansbrest: I was trying to put super simple template sample right into action :add section - same results, never executed
[2013-05-28 23:24:06 -0400] magoo: still getting this error from 1.1.2 community node.js cookbook: [2013-05-28T23:23:14+00:00] FATAL: RuntimeError: apt_repository[node.js] (nodejs::install_from_package line 32) had an error: RuntimeError: The repository file to create is nil, cannot continue.
[2013-05-28 23:24:12 -0400] magoo: no clue what's going on
[2013-05-28 23:24:25 -0400] magoo: ubuntu 12.04 in dev/staging/prod... only works in dev
[2013-05-28 23:25:09 -0400] ranjib: gansbrest, do you have the snippet of the recipe from where you are using the yum_repository resource?
[2013-05-28 23:25:41 -0400] monokrome: I'm running into a problem where sometimes my nodes will create fine, but other times they fail at random parts of the deploy process. They fail because the master gave a "403 Forbidden" error, but if I rerun the deploy - the error doesn't occur again. Has anyone else ran into similar problems?
[2013-05-28 23:26:08 -0400] gansbrest: ranjib: I just include it in my custom cookbook like this - include_recipe "yum::epel"
[2013-05-28 23:26:25 -0400] monokrome: We are using HTTPS, we have a legitimate certificate, all of these recipes work in chef solo, and they work unpredictably on a master depending on if the master randomly 403s or not.
[2013-05-28 23:26:45 -0400] gansbrest: ranjib: and here is yum::epel code https://github.com/opscode-cookbooks/yum/blob/2.2.0/recipes/epel.rb
[2013-05-28 23:27:50 -0400] isotope: is there a better to access a list of the nodes roles than having to use if node['roles'].include?
[2013-05-28 23:28:23 -0400] isotope: like in case statement
[2013-05-28 23:34:31 -0400] gsymons-di: Anybody ever see chefspec get confused and think it was running in Chef 10 instead of Chef 11?
[2013-05-28 23:44:25 -0400] jameson__: how do I know that test-kitchen completed without errors?
[2013-05-28 23:44:39 -0400] jameson__: exit code is 0 from test?
[2013-05-28 23:46:04 -0400] Otterley: Chef internals experts: I'm writing a test recipe, and I want to merge normal attributes in from a JSON file located on the node's local disk.  What might be a good way to do that inside a recipe?
[2013-05-28 23:47:46 -0400] monokrome: Anyone know why I'd get 403 forbidden on supervisord.conf?
[2013-05-28 23:48:07 -0400] monokrome: in the supervisor cookbook
[2013-05-28 23:48:27 -0400] monokrome: Doesn't make any sense
[2013-05-28 23:52:02 -0400] gsymons-di: Otterley:
[2013-05-28 23:58:54 -0400] gzc: Kyle11: one cookbook, multiple recipes :)
[2013-05-28 23:59:29 -0400] gzc: keep the configuration that is attribute-related in an environment that all nodes are in
[2013-05-28 23:59:56 -0400] Kyle11: Ok, is there an example of this somewhere?  Everyone keeps saying how these application cookbooks are not useful cause they are so specific to that company, but it would help me know how to start making my companies book

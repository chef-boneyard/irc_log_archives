[2013-05-22 00:00:07 -0400] silk: alisdair: gist?
[2013-05-22 00:01:41 -0400] alisdair: https://gist.github.com/talentdeficit/5624285
[2013-05-22 00:03:00 -0400] alisdair: i'll gist the output as soon as it finishes running too
[2013-05-22 00:03:42 -0400] a|i: cwj gzc  knife bootstrap works.
[2013-05-22 00:03:45 -0400] a|i: this is odd.
[2013-05-22 00:04:23 -0400] a|i: I didn't even give it a bootstrap file!
[2013-05-22 00:04:33 -0400] a|i: how does it find it automatically?
[2013-05-22 00:04:50 -0400] cwj: alisdair: i'd venture that your problem is because your resources are being redeclared with the same name
[2013-05-22 00:04:57 -0400] cwj:  bash "install_erlang" do
[2013-05-22 00:05:00 -0400] alisdair: oh
[2013-05-22 00:05:03 -0400] cwj: put a unique key in there
[2013-05-22 00:05:10 -0400] alisdair: so i need to put #{prefix} in the resource too?
[2013-05-22 00:05:13 -0400] cwj: yeah
[2013-05-22 00:05:18 -0400] alisdair: ok i'll try that thanks
[2013-05-22 00:05:19 -0400] cwj: something like that
[2013-05-22 00:25:40 -0400] josephholsten: anyone started using test-kitchen with the other vagrant providers like vagrant-rackspace or vagrant-aws?
[2013-05-22 00:29:25 -0400] stormerider: a|i: im going to guess that the knife ec2 create passed at least part of that information along the chain, perhaps via ec2 metadata
[2013-05-22 00:29:51 -0400] a|i: stormerider: well it never finishes the job.
[2013-05-22 00:30:27 -0400] stormerider: well, yes, but that's not saying that it didnt supply the information that you were wondering how knife bootstrap found :)
[2013-05-22 00:30:59 -0400] a|i: it's buggy.
[2013-05-22 00:31:13 -0400] stormerider: ie, it could have written bootstrap.json/first-boot.json but not installed chef. then you install chef via bootstrap and it loads the json file it finds.
[2013-05-22 00:31:58 -0400] stormerider: i havent tried knife ec2 since i migrated to chef 11, i havent really had a need to lately. ill try to keep an eye out for a reason to do so and see what happens.
[2013-05-22 00:54:56 -0400] thehar: yay whyrun bug
[2013-05-22 01:50:54 -0400] gkra: if I specify a role in a role run_list, does the role get added to the node, or just the role's defined recipes run?
[2013-05-22 01:51:03 -0400] gkra: i.e.,
[2013-05-22 01:51:12 -0400] gkra: run_list "role[somerole]"
[2013-05-22 01:54:02 -0400] bluekelp: the role is in the node's run_list so it's "part of" the node
[2013-05-22 01:54:26 -0400] bluekelp: run_lists can contain recipes and/or roles
[2013-05-22 02:03:37 -0400] gkra: hmm.
[2013-05-22 02:04:15 -0400] gkra: testing says that if a role's run_list contains another role, the other role isn't added to the node's "roles" metadata, but the included runlists are executed.
[2013-05-22 02:09:19 -0400] Blackavar: Chef meetup at Opscode hangout is starting momentarily.
[2013-05-22 02:10:00 -0400] Blackavar: ?to be clearer. Hangout for the Chef Meetup at Opscode.
[2013-05-22 02:10:20 -0400] josephholsten: ?
[2013-05-22 02:11:44 -0400] josephholsten: I thought that was the 28th
[2013-05-22 02:11:58 -0400] josephholsten: Blackavar: ^^
[2013-05-22 02:12:08 -0400] Blackavar: Is tonight.
[2013-05-22 02:12:39 -0400] Blackavar: Hangout is up, and they're tossing links around.
[2013-05-22 02:13:05 -0400] ssd7: https://plus.google.com/hangouts/_/65b9f591008dcbe609c6e82ba81f0977b471d570
[2013-05-22 02:13:14 -0400] ssd7: ^- Chef Meetup
[2013-05-22 02:13:31 -0400] gkra: is the only way to add a role to a node via knife?
[2013-05-22 02:13:40 -0400] gkra: or can it be done within a recipe?
[2013-05-22 02:15:27 -0400] ssd7: gkra: So, you can technically do it in  a recipe, but it probably won't do what you expect.  The best you can do is add the role to the run list and have it take effect on the next run.
[2013-05-22 02:18:37 -0400] Blackavar: josephholsten: Can always join the hangout, though.
[2013-05-22 02:25:27 -0400] gkra: ssd7: I want the role to be added to the node as metadata (so searches against the role will return a result)...
[2013-05-22 02:29:04 -0400] ssd7: gkra: If you add a role to the node's run_list with knife, it will be accessible via search
[2013-05-22 02:29:10 -0400] gkra: oh
[2013-05-22 02:29:57 -0400] gkra: well, if role_a's run_list specifies role_b, then if role_a is in the node's run list, after the next run, role_b will be there, too?
[2013-05-22 02:30:13 -0400] gkra: oh, hey, it will
[2013-05-22 02:30:15 -0400] gkra: yay testing
[2013-05-22 02:30:22 -0400] ssd7: :)
[2013-05-22 02:34:26 -0400] juliancdunn: sigh... Verizon 4G == awful. Give my regards to hh @ssd7
[2013-05-22 02:36:15 -0400] ssd7: juliancdunn: Will do
[2013-05-22 02:36:33 -0400] sunil_: hey guys, I install chef client 11.4 on a machine that already had 10.x version..it looks like 11.4 is going into /opt/chef/embeded while default /opt/chef/bin/chef-client is still reporting version 10.x...
[2013-05-22 02:36:45 -0400] sunil_: How can I make my workstation use 11.x?
[2013-05-22 02:37:08 -0400] sunil_: I can probably change the symlink but not sure if I'll get all the gems etc with it
[2013-05-22 02:46:04 -0400] dyu: newbie queston
[2013-05-22 02:46:05 -0400] dyu: i can't bootstrap a node(ubuntu lts) that doesn't have openssh-server installed
[2013-05-22 02:46:19 -0400] dyu: is there a way around this with chef or it's part of life?
[2013-05-22 02:48:58 -0400] bluekelp: sunil_: did you use the omnibus install for 11 (looks like it)?  you'll need to remove the other version manually.  on my systems i removed chef, ruby, etc. system packages and that worked (ubuntu 12.04)
[2013-05-22 02:49:19 -0400] sunil_: I think bootstrap is just executing a script, might be able to run it locally..
[2013-05-22 02:49:58 -0400] sunil_: I don't have to use the omnibus installed but i believe default install script from opscode installs it in omnibus..
[2013-05-22 02:50:12 -0400] sunil_: so you are saying I should manually mv the files out of the way? or rm them?
[2013-05-22 02:50:25 -0400] bluekelp: yeah that's default now.  and better.
[2013-05-22 02:50:51 -0400] bluekelp: sunil_: how was chef installed (10.x) originally?  i assume with system packages?  it'd be cleaner to use same mechanism to remove
[2013-05-22 02:51:10 -0400] bluekelp: manually removing just a few files will leave a lot lying around
[2013-05-22 02:51:29 -0400] sunil_: I had used the opscode installer a while back, I believe at that time it didn't use omnibus
[2013-05-22 02:52:06 -0400] sunil_: I can try doing gem uninstall of chef-client
[2013-05-22 02:53:04 -0400] bluekelp: the gem is probably just "chef" but yes, try that.  see if that removes the scripts that interfere.  it'll cleanup more than just removing those files
[2013-05-22 02:53:55 -0400] sunil_: yup it did that..now how do I make the system look for chef in /opt/chef/embeded?
[2013-05-22 02:55:41 -0400] sunil_: ah reinstall after removing did the trick
[2013-05-22 02:55:47 -0400] ssd7: The problem with Chef Meetups is I have too many opinionnnns
[2013-05-22 03:00:31 -0400] juliancdunn: what did you do now ssd7
[2013-05-22 03:00:58 -0400] paulmooring: ssd7: don't we all
[2013-05-22 03:01:58 -0400] ssd7: Oh, wasn't too bad. Part of me wishes these weren't in Opscode offfices so I could fully put my "opinion" hat on :)
[2013-05-22 03:02:49 -0400] juliancdunn: well I usually preface that with "this isn't what Opscode would want me to say, but..."
[2013-05-22 03:03:27 -0400] cg75: that can still get you in trouble
[2013-05-22 03:04:09 -0400] ssd7: In reality we have a culture where I don't have to think about it much.  The real issue is fighting my desire to talk too much
[2013-05-22 03:04:36 -0400] ssd7: and let other people have opinions
[2013-05-22 03:09:03 -0400] sunil_: @bluekelp so I was able to upgrade and installed knife etc..tried launching a new node with knife and its failing on chef-client install..
[2013-05-22 03:11:53 -0400] sunil_: am I missing a step here, it seems like right chef-client is installed locally to launch a new machine.
[2013-05-22 03:21:17 -0400] bluekelp: upgrade to 11?
[2013-05-22 03:22:05 -0400] bluekelp: i'm confused b/c to me, knife should be on your workstation and not the nodes.  chef-client does not launch nodes, it runs on them
[2013-05-22 03:26:55 -0400] paulmooring:  /quit
[2013-05-22 03:37:08 -0400] dyu: i'm getting the ubuntu11.-4 chef package when i bootstrap a 12.04 node
[2013-05-22 03:37:13 -0400] dyu: is this the expected behavior?
[2013-05-22 03:38:47 -0400] stormerider: yes.
[2013-05-22 03:39:44 -0400] stormerider: with everything being embedded in the omnibus packages they dont need to build separate packages for each release
[2013-05-22 03:40:10 -0400] stormerider: i think pre-11.04 has a different package but everything after that just uses that one
[2013-05-22 03:40:48 -0400] dyu: i see. thanks!
[2013-05-22 03:41:26 -0400] stormerider: np. confused me at first, too :)
[2013-05-22 03:41:49 -0400] stormerider: but i imagine that helps save them a lot of time come new releases, too, heh
[2013-05-22 03:42:35 -0400] teukka: mostly it depends on the libc version of the operating system
[2013-05-22 03:42:40 -0400] stormerider: im guessing at that point the only need to separate out release versions is probably for major changes like glibc versions and such
[2013-05-22 03:42:51 -0400] stormerider: *grin*
[2013-05-22 04:31:20 -0400] sathish: Hi guys I've finished all the screencasts in learnchef.opscode these things are straightforward for me, but how do I proceed to like provisioning a machine install packages etc?
[2013-05-22 04:33:05 -0400] flaccid: sathish: thats what cookbooks are for?
[2013-05-22 04:33:22 -0400] flaccid: you probably want to use knife if using chef server. should be in the docs
[2013-05-22 04:34:26 -0400] sathish: flaccid: That was simple thanks. Thanks :)
[2013-05-22 04:34:32 -0400] flaccid: kk np
[2013-05-22 05:22:47 -0400] kenke: hello, can someone please tell me whether template can be used in provider?
[2013-05-22 05:22:53 -0400] kenke: by *
[2013-05-22 05:24:06 -0400] coderanger: kenke: Not sure what you mean
[2013-05-22 05:25:02 -0400] kenke: hi ranger, can provider use template?
[2013-05-22 05:29:33 -0400] coderanger: Do you mean a lightweight provider?
[2013-05-22 05:30:02 -0400] coderanger: the LWP DSL has access to all resources, its the same DSL as used for recipe code
[2013-05-22 05:31:49 -0400] kenke: oh sry, yes a lightweight provider
[2013-05-22 05:35:03 -0400] coderanger: Then yes, it can use any resource just as you can in recipes
[2013-05-22 05:41:03 -0400] coderanger: kenke: Please pastebin your code
[2013-05-22 05:41:13 -0400] kenke: Hi ranger, when I used a template in a light weight provider, it just generated a blank file, but if I move this piece of code to recipe, it can generate the content
[2013-05-22 05:43:01 -0400] coderanger: ^^
[2013-05-22 05:43:04 -0400] coderanger: please pastebin
[2013-05-22 05:43:14 -0400] kenke: template "/log/syslog" do
[2013-05-22 05:43:23 -0400] kenke: owner "root"
[2013-05-22 05:43:30 -0400] kenke: group "root"
[2013-05-22 05:43:34 -0400] kenke: mode 00644
[2013-05-22 05:43:42 -0400] kenke: action :create
[2013-05-22 05:43:43 -0400] kenke: end
[2013-05-22 05:44:18 -0400] kenke: sorry ranger, what is pastebin?
[2013-05-22 05:45:37 -0400] coderanger: gist.github.com or similar
[2013-05-22 05:45:55 -0400] coderanger: Guessing you are unfamiliar with IRC, it is considered bad form to paste text into IRC
[2013-05-22 05:46:03 -0400] coderanger: since it generates a lot of channel noise
[2013-05-22 05:46:21 -0400] coderanger: So put your block of text up on a website and paste just the link to it
[2013-05-22 05:46:47 -0400] kenke: ok
[2013-05-22 05:47:10 -0400] flaccid: sidenote, /log isn't in LFS heh
[2013-05-22 05:48:45 -0400] flaccid: kenke: also i think you want to provide a source option http://docs.opscode.com/essentials_cookbook_templates.html
[2013-05-22 05:54:33 -0400] kenke_: Hi ranger, here is my code https://gist.github.com/anonymous/5625522
[2013-05-22 05:57:40 -0400] kenke_: If I use the template block in recipe, I can generate log files in the required format, but in light weight provider, just a blank file
[2013-05-22 06:02:41 -0400] coderanger: kenke_: So two things, you want to include which cookbook to draw the template file from, and that timestamp thing at the bottom looks wrong
[2013-05-22 06:02:55 -0400] coderanger: You shouldn't use a template and then also write to it on your own
[2013-05-22 06:03:13 -0400] coderanger: Also should be in a ruby_block so they resolve in the right order
[2013-05-22 06:05:19 -0400] kenke_: the template, and the provider belongs to the same cookbook...
[2013-05-22 06:05:59 -0400] kenke_: the same as default.rb , should I declare it in recipe?
[2013-05-22 06:09:14 -0400] coderanger: If its all the same, then its okay
[2013-05-22 06:09:54 -0400] coderanger: Just keep in mind that the template resource sees itself being used in the cookbook context of the final recipe, not where the LWRP is defined
[2013-05-22 06:13:04 -0400] kenke_: so if I try to reuse the method, the best way is to put it under library?
[2013-05-22 06:14:53 -0400] coderanger: LWRPs are the right way
[2013-05-22 06:14:58 -0400] coderanger: Just make sure you set them up right
[2013-05-22 06:15:14 -0400] coderanger: If you are mixing raw Ruby code with recipe DSL, you will usually confuse yourself
[2013-05-22 06:17:34 -0400] kenke_: you are right, once I comment out those ruby code, it works
[2013-05-22 06:17:37 -0400] kenke_: thanks ranger
[2013-05-22 07:11:36 -0400] stormerider: hrm. knife ssh is no longer working for me. keeps tossing me back to a usage error, on syntax that ive used before.
[2013-05-22 07:12:36 -0400] stormerider: oh, i wonder if this is related to the rvm knife script i had to futz with. hm.
[2013-05-22 07:26:26 -0400] helllen: I would like to configure chef-client with chef. How can I restart the service correctly ?
[2013-05-22 07:35:05 -0400] linuxboy: hello everybody
[2013-05-22 07:35:23 -0400] coolj: hi linuxboy
[2013-05-22 07:35:49 -0400] linuxboy: I'm using the chef-client cookbook to write out the client.rb config files. However it keeps setting the chef_server_url to http://localhost:4000/ and not to the URL of the server itself (this line of code: https://github.com/opscode-cookbooks/chef-client/blob/master/templates/default/client.rb.erb#L18)
[2013-05-22 07:36:08 -0400] linuxboy: can I fix this without setting node["chef_client"]["server_url"]?
[2013-05-22 07:41:06 -0400] stormerider: linuxboy: you should set that via a default role that gets applied to all of your clients, and then override it if you need to for specific nodes.
[2013-05-22 07:42:29 -0400] linuxboy: stormerider: should Chef::Config[:chef_server_url] end up being my chef-servers URL? at the moment it's giving me http://localhost:4000/
[2013-05-22 07:42:50 -0400] linuxboy: stormerider: I know I can set it manually with node["chef_client"]["server_url"], but I'd rather let it figure out where it lives (assuming it can do that)
[2013-05-22 07:43:13 -0400] Cope: helllen: not sure I understand your question... if you use the chef-client cookbook you have a range of options.
[2013-05-22 07:43:44 -0400] stormerider: linuxboy: so for example, i use a default role like so: https://gist.github.com/stormerider/5625902, that gets applied to every node.
[2013-05-22 07:44:03 -0400] stormerider: and no, the cookbook can't autodetect where your server is. how would it even begin to go about that?
[2013-05-22 07:44:26 -0400] linuxboy: stormerider: look at https://github.com/opscode-cookbooks/chef-client/blob/master/templates/default/client.rb.erb#L18
[2013-05-22 07:45:23 -0400] stormerider: i think that might be for chef-solo, im not sure.
[2013-05-22 07:49:01 -0400] helllen: the problem is if I restart the service it stops the client procedure
[2013-05-22 07:49:33 -0400] linuxboy: stormerider: aaah
[2013-05-22 07:50:02 -0400] stormerider: helllen: can you elaborate?
[2013-05-22 07:50:12 -0400] coolj: linuxboy: maybe setting nginx['server_name'] or nginx['url'] in /etc/chef-server/chef-server.rb on the server and running chef-server-ctl reconfigure would effect that (assuming you're running chef11 on the server)
[2013-05-22 07:50:41 -0400] coolj: not sure where it get Chef::Config[:chef_server_url] from
[2013-05-22 07:50:50 -0400] coolj: *gets
[2013-05-22 07:50:58 -0400] linuxboy: coolj: not running chef11 (yet)
[2013-05-22 07:50:59 -0400] stormerider: coolj: the client shouldnt be reading chef-server.rb though afaik
[2013-05-22 07:51:55 -0400] stormerider: in any case, another reason to have that kind of a central role is so that you can configure error/report handlers if you want, and apply it to all of the nodes.
[2013-05-22 07:52:01 -0400] helllen: I mean
[2013-05-22 07:52:14 -0400] helllen: I have chef-client connected to chef-server
[2013-05-22 07:52:27 -0400] helllen: I would like to configure client.rb file
[2013-05-22 07:52:52 -0400] helllen: I configure it and I have a notify of client.rb modification to restart chef-client
[2013-05-22 07:52:52 -0400] linuxboy: helllen: what is your original question?
[2013-05-22 07:52:55 -0400] linuxboy: we seem to be asking the same things
[2013-05-22 07:53:21 -0400] linuxboy: ls
[2013-05-22 07:53:24 -0400] helllen: I would like to restart chef-client when it finish processing all files
[2013-05-22 07:53:32 -0400] helllen: I mean processing all templates
[2013-05-22 07:54:02 -0400] linuxboy: helllen: so chef does already re-read the config: https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/config.rb#L88
[2013-05-22 07:54:07 -0400] stormerider: helllen: that's normal i believe, but if you want to customize when that fires you'd need to look into a delayed notification
[2013-05-22 07:59:36 -0400] helllen: you use reload_client_config
[2013-05-22 07:59:56 -0400] dyu: when i do a bootstrap, which version of the recipe is executed? the one uploaded to chef-server or my local copy with my changes in it?
[2013-05-22 08:00:00 -0400] helllen: interesting. I don't know what it does but it is interesting :-D
[2013-05-22 08:00:45 -0400] stormerider: dyu: the one on the chef server.
[2013-05-22 08:00:52 -0400] coolj: linuxboy: so i'm thinking you could use an override attribute in the environment to set the value of ["chef_client"]["server_url"] across all the nodes...
[2013-05-22 08:01:24 -0400] linuxboy: coolj: I can...
[2013-05-22 08:01:27 -0400] stormerider: coolj: interesting, hadnt thought about environment-based attributes. keep forgetting about those.
[2013-05-22 08:01:33 -0400] linuxboy: coolj: but can't chef figure out the server automatically?
[2013-05-22 08:02:10 -0400] dyu: another question. how do people go about code reviews when making recipes?
[2013-05-22 08:02:22 -0400] linuxboy: dyu: pull requests in github
[2013-05-22 08:02:25 -0400] dyu: do you keep a clone in your local network?
[2013-05-22 08:02:38 -0400] dyu: i mean code reviews inside the company
[2013-05-22 08:02:56 -0400] linuxboy: I branch my code, do some work, test in chef-solo, push back to github, do a pull request back into master
[2013-05-22 08:03:02 -0400] linuxboy: we use github at work
[2013-05-22 08:03:18 -0400] dyu: haha
[2013-05-22 08:03:27 -0400] dyu: we just use a local deploy of gerrit
[2013-05-22 08:03:38 -0400] dyu: but the flow is the same, i suppose
[2013-05-22 08:03:45 -0400] dyu: thanks, man
[2013-05-22 08:04:08 -0400] helllen: how can I specify the interval time at client.rb ???
[2013-05-22 08:04:14 -0400] linuxboy: sometimes I test in QA before I make the pull request
[2013-05-22 08:04:39 -0400] stormerider: dyu: alternatively you can do cookbook freezing with environments and have a test environment to test the new cookbook version
[2013-05-22 08:05:27 -0400] stormerider: im the only ops person in my region so i dont do codereviews, but ive done that for staging out tests
[2013-05-22 08:05:37 -0400] dyu: yeah
[2013-05-22 08:05:41 -0400] dyu: that's what i do
[2013-05-22 08:05:48 -0400] dyu: i'm also the only guy working on chef here
[2013-05-22 08:06:15 -0400] linuxboy: I'm the main chef guy
[2013-05-22 08:06:19 -0400] linuxboy: but everyone else does code reviews
[2013-05-22 08:06:27 -0400] linuxboy: (since they also work on it too)
[2013-05-22 08:06:31 -0400] stormerider: my company just got acquired recently but im the only ops person managing the pre-acquisition stuff at this point
[2013-05-22 08:07:00 -0400] helllen: I have an option interval
[2013-05-22 08:07:59 -0400] coolj: helllen: it's just a symbol in client.rb called 'interval'. iirc, it's in seconds
[2013-05-22 08:08:26 -0400] helllen: what does it have precedence the interval in config file or in -i option when I execute it
[2013-05-22 08:08:27 -0400] coolj: that should be it :)
[2013-05-22 08:09:08 -0400] coolj: helllen: i don't know the precedence
[2013-05-22 08:19:16 -0400] BryanWB: can i use knife-ec2 to attach an existing ebs volume to a new ec2 instance?
[2013-05-22 08:34:28 -0400] drrk: is there a way to see what cookbooks depend on a particular cookbook on the cumunity site?
[2013-05-22 08:34:58 -0400] drrk: specifically I want to see if anything depends on the users cookbook
[2013-05-22 08:36:56 -0400] stormerider: i dont think any depend on it, but some will look at the databag if it's present. but the community site is set up to display what dependencies a cookbook has, not what has it as a dependency
[2013-05-22 09:52:33 -0400] jasonsmr: hello chef server channel
[2013-05-22 09:53:00 -0400] jasonsmr: Question Is it difficult to create a chef solo cookbook for a program?
[2013-05-22 09:57:06 -0400] binamov: jasonsmr no
[2013-05-22 10:01:00 -0400] jasonsmr: I mean I see super simple example sof how to give a chef client a uploaded empty example cookbook and even how to upload said cookbook create a knife cookbook create program_name
[2013-05-22 10:02:27 -0400] binamov: jasonsmr yeah, it's totally doable
[2013-05-22 10:02:29 -0400] jasonsmr: Im confused.. I se several examples of this process and editing the various recipe/default.json and node.json and solo.rb and metadata.rm json....add etc
[2013-05-22 10:03:15 -0400] jasonsmr: where , I am confused is just about :: where is it that I need to put the program source files?
[2013-05-22 10:03:31 -0400] jasonsmr: thats what I don't get.
[2013-05-22 10:03:46 -0400] jasonsmr: kind of feel stupid.
[2013-05-22 10:03:58 -0400] binamov: ah
[2013-05-22 10:03:59 -0400] binamov: sec
[2013-05-22 10:04:05 -0400] jasonsmr: btw, never worked with ruby that much
[2013-05-22 10:04:36 -0400] binamov: jasonsmr i imagine you're talking windows?
[2013-05-22 10:04:50 -0400] jasonsmr: the program that Im trying to build is allready in the cookboops for opscode, but I want to add a few patches
[2013-05-22 10:04:56 -0400] jasonsmr: nope im in centos
[2013-05-22 10:05:06 -0400] jasonsmr: Im trying to build Drupal
[2013-05-22 10:05:23 -0400] jasonsmr: but it needs a patch, I think
[2013-05-22 10:05:26 -0400] binamov: http://docs.opscode.com/resource_cookbook_file.html
[2013-05-22 10:05:36 -0400] jasonsmr: thanks
[2013-05-22 10:06:12 -0400] binamov: but really with centos you want the file in a yum repo, so this http://docs.opscode.com/resource_yum.html
[2013-05-22 10:06:39 -0400] gkarekinian: I think he's talking about forking a cookbook
[2013-05-22 10:06:51 -0400] binamov: ahaha ok :)
[2013-05-22 10:07:25 -0400] binamov: i thought he was looking for COOKBOOK_NAME/files/default location...
[2013-05-22 10:10:09 -0400] jasonsmr: Im not sure what would be simply put easyer. the fork a current program? or build one?
[2013-05-22 10:11:07 -0400] jasonsmr: the patch is a downloadable file for the drupal program, but I wouldent really know exactly how to convince cheff to install it along with the default program when using the cookbook from a node?
[2013-05-22 10:11:51 -0400] binamov: jasonsmr there must be manual install instructions with the patch, just feed those with chef imho
[2013-05-22 10:12:32 -0400] jasonsmr: hmm
[2013-05-22 10:12:54 -0400] jasonsmr: yea its simple, just run a bash script named install.sh
[2013-05-22 10:13:03 -0400] jasonsmr: super simple.
[2013-05-22 10:13:13 -0400] binamov: you got it
[2013-05-22 10:13:35 -0400] jasonsmr: I guess Ill just have to tell chef to run it last thing no?
[2013-05-22 10:13:59 -0400] binamov: yeah follow the order you'd follow as a sysadmin
[2013-05-22 10:14:01 -0400] binamov: plus
[2013-05-22 10:14:16 -0400] binamov: you probably want a check for whether patch is already installed or not
[2013-05-22 10:14:38 -0400] binamov: so chef doesn't run the script every time you converge
[2013-05-22 10:15:24 -0400] jasonsmr: hmm,
[2013-05-22 10:15:48 -0400] jasonsmr: then I should create a seperate drupal branch?
[2013-05-22 10:16:18 -0400] binamov: no idea :)
[2013-05-22 10:17:02 -0400] jasonsmr: or a seperate recipe that does the patching ? or a seperate cookbook that does the patching.... seems like a simple recipe drupal::special_patch_01  would do?
[2013-05-22 10:17:41 -0400] jasonsmr: I have about 20 tabs open in chrome for this cookbook
[2013-05-22 10:18:54 -0400] jasonsmr: looks like it will help me http://docs.opscode.com/resource_cookbook_file.html thanks
[2013-05-22 11:49:27 -0400] jwilf: i'm getting loads of zombie procs from shell_out in the java cookbook, anyone seen that?
[2013-05-22 11:52:12 -0400] BryanWB: thom: u added a way to have global t-k settings, didn't you? is there a doc on that somewhere?
[2013-05-22 12:30:13 -0400] tinychaos: yo
[2013-05-22 12:30:27 -0400] tinychaos: getting this on standard deploys, which was working for months now
[2013-05-22 12:30:40 -0400] tinychaos: amazon ec2 box
[2013-05-22 12:31:42 -0400] tinychaos: here /usr/lob/ruby/1.8/net.protocol.rb:135 segmentation fault ruby 1.8.7
[2013-05-22 12:31:47 -0400] tinychaos: *lib
[2013-05-22 12:32:06 -0400] Cope: tinychaos: why on earth are you using ruby 1.8.7?
[2013-05-22 12:32:22 -0400] tinychaos: I believe that's the built in chef version
[2013-05-22 12:32:32 -0400] Cope: not since about 2008
[2013-05-22 12:33:18 -0400] Cope: are you using  the omnibus installer? if not, you should - it vendors ruby 1.9 for you, and should "just work"
[2013-05-22 12:33:25 -0400] Cope: see http://opscode.com/chef/install
[2013-05-22 12:34:36 -0400] tinychaos: I'll take a look thanks
[2013-05-22 12:34:45 -0400] tinychaos: it's just puzzling since it's been working fine for months
[2013-05-22 12:35:06 -0400] tinychaos: now it is scaling-up down because obviously the new instances are not healthy
[2013-05-22 12:58:56 -0400] tinychaos: well it kinda resolved itself
[2013-05-22 12:59:11 -0400] houst0n: Afternoon folks :)
[2013-05-22 12:59:23 -0400] tinychaos: transforming the whole deployment to use omnibus will take a while
[2013-05-22 12:59:27 -0400] tinychaos: but thanks for the tip
[2013-05-22 13:00:17 -0400] houst0n: I've got a reasonably hacky little recipt (there's some backtick stuff going on) which only seems to update an attribute when i login and run 'chef-client' - the chef-client service seems to ignore it. Any ideas wth is going on?
[2013-05-22 13:00:22 -0400] houst0n: recipe, even
[2013-05-22 13:00:43 -0400] houst0n: In return: beer, riches, your choice of woman etc
[2013-05-22 13:14:14 -0400] BryanWB: can i set the retries attribute of a resource? i see there is attr_accessor :retries  in Chef::Resource class
[2013-05-22 13:40:20 -0400] thom: BryanWB: basically, ~/.kitchen/config.yml ; stuff things in there
[2013-05-22 13:40:36 -0400] BryanWB: thom: nice!
[2013-05-22 13:41:13 -0400] thom: overrides both .kitchen.yml and .kitchen.local.yml
[2013-05-22 13:57:43 -0400] DaniG2k_: guys im trying to set up chef on a remote linux server
[2013-05-22 13:58:15 -0400] BryanWB: thom: tks for adding that!
[2013-05-22 13:58:15 -0400] DaniG2k_: I can't figure out where to get this knife.rb and *.pem files
[2013-05-22 13:58:23 -0400] DaniG2k_: @_@
[2013-05-22 13:58:25 -0400] DaniG2k_: any help?
[2013-05-22 13:58:32 -0400] thom: glad it's useful
[2013-05-22 13:59:26 -0400] atomic-penguin: DaniG2k_, http://docs.opscode.com/knife.html, maybe look at `knife configuration`
[2013-05-22 13:59:36 -0400] atomic-penguin: ...er `knife configure`
[2013-05-22 14:23:56 -0400] s2r2: stupid question: am I using knife-server to backup my stuff from the server or to backup all the stuff ON the server (i.e. running it on the server itself)
[2013-05-22 14:25:42 -0400] s2r2: ah, I see. I was missing --backup-dir.
[2013-05-22 14:51:18 -0400] jgoulah: how should i define data_bag_path for chef-shell? data_bag_path used to be a string in chef 10 and now it wants a hash or mash?
[2013-05-22 14:58:15 -0400] jgoulah: there is about zero documention on this
[2013-05-22 15:08:52 -0400] skarufue: hello. is there a way to make my recipies interactive. i.e. i want them to ask for a secret. i know about encrypted databags. but i want to have specific nodes to only be able to decrypt specific bags. so i want tto distribute the decryption key at my first chef-client run. manually from our locker/wallet
[2013-05-22 15:09:21 -0400] siezer: no
[2013-05-22 15:09:51 -0400] skarufue: well. the git provider asks for username/password
[2013-05-22 15:09:58 -0400] skarufue: so there is a way.
[2013-05-22 15:10:24 -0400] skarufue: its probably shellout and some bash magic
[2013-05-22 15:10:43 -0400] siezer: thats ruby shelling out to git, and the external process being interactive... you generally want to avoid that
[2013-05-22 15:10:58 -0400] siezer: you want to distribute your encrypted databag secret out of band of chef
[2013-05-22 15:11:11 -0400] skarufue: yes. thats what i am doing.
[2013-05-22 15:12:03 -0400] skarufue: i want to be asked by chef-client on the first run. WHat is secret?. that is out of band. since i can avoid having it sent beck to the chef-server
[2013-05-22 15:12:10 -0400] skarufue: but i can decrypt the databags
[2013-05-22 15:13:12 -0400] skarufue: i just dont feel like setting up rundeck just for key distribution
[2013-05-22 15:13:46 -0400] siezer: what would be answering the prompt from chef-client?
[2013-05-22 15:13:49 -0400] siezer: a human?
[2013-05-22 15:13:54 -0400] skarufue: yes.
[2013-05-22 15:14:08 -0400] skarufue: the same human that deploys initially.
[2013-05-22 15:14:36 -0400] siezer: how are you diong the bootstrap?
[2013-05-22 15:14:50 -0400] skarufue: knife bootstrap
[2013-05-22 15:15:03 -0400] siezer: why not just drop off a secret with the knife bootstrap?
[2013-05-22 15:16:06 -0400] skarufue: hm. i assume that would be possible. up till now i just knife-bootstrapped the lxc-default-image but i could do a individual bootstrap for every container i assume
[2013-05-22 15:16:55 -0400] siezer: there's a knife config setting
[2013-05-22 15:16:56 -0400] siezer: encrypted_data_bag_secret '/path/to/your/data_bag_key'
[2013-05-22 15:17:18 -0400] siezer: that way your human keeps the secret on the workstation node and doesn't have to do grey-matter intervention
[2013-05-22 15:19:13 -0400] siezer: key distribution is hard, but "have a brain recall a secret and enter it into the keyboard" is usually the last resort
[2013-05-22 15:19:45 -0400] skarufue: well i would prefer for none of our humans to have those secrets on their workstation nodes. but you have been helpfull enough already. ill figure something out
[2013-05-22 15:19:55 -0400] gswallow: I have a question:  I have two recipes in my runlist.  Both recipes declare a mongodb-10gen package.  The one recipe, mongodb::install, declares the package, and installs it unless dpkg -l | egrep '^(h|i)' returns true.  In the other recipe, mongodb::upgrade,  I just :upgrade the package.  Chef runs through the run list and then refuses to upgrade the package while in the mongodb::upgrade recipe, because it fails the test in mongodb::ins
[2013-05-22 15:20:33 -0400] skarufue: siezer: well we have a company wide wallet. so remembering isnt the problem...
[2013-05-22 15:20:38 -0400] Aaiiit1: Hi guys, I just wanted to bootstrap a vm.   as i understand, knife bootstrap can not complete, because it can not find the debian wheezy version of chef-client     Anybody know how to fix this?
[2013-05-22 15:20:58 -0400] Aaiiit1: Yeah, my vm is running debian wheezy
[2013-05-22 15:21:11 -0400] gkarekinian: If you don't want humans having the secret key on their workstation you can run the bootstrap command from a server, behind an API that the users would access
[2013-05-22 15:21:43 -0400] gkarekinian: Seems more logical than humans not having the key in their computer but typing it from memory or a piece of paper
[2013-05-22 15:22:41 -0400] sparr: I want to tell Chef "this client you've never seen before is going to connect soon. when it does, set its hostname to X and its IP to Y"... how might I go about that?
[2013-05-22 15:23:16 -0400] jstallard: sparr: how does it connect to the chef server if it doesn't already have an ip?
[2013-05-22 15:23:27 -0400] sparr: jstallard: it has a dhcp IP
[2013-05-22 15:23:44 -0400] sparr: I can identify the client by its MAC address, or the hostname it will have when it connects, or possibly some piece of unique information in a file somewhere on the client.
[2013-05-22 15:24:30 -0400] sparr: I'd like to be able to re-do this procedure in the future, after chef is already familiar with the client, to change its hostname and IP again
[2013-05-22 15:25:22 -0400] jstallard: if you have the DHCP infrastructure already, why not just use that to control the hostname and ip, then use chef to configure the dhcp server(s)?
[2013-05-22 15:28:08 -0400] Aaiiit1: Is there some list with all the supported chef-client for os'es and versions?
[2013-05-22 15:30:09 -0400] zen_: afternoon
[2013-05-22 15:30:44 -0400] siezer: there's a dropdown here http://www.opscode.com/chef/install/
[2013-05-22 15:31:23 -0400] siezer: those are the supported omnibus installs... but if you can get a modern ruby running, you can install from gems
[2013-05-22 15:31:24 -0400] zen_: i'm having some difficulty installing chef on a clean Ubuntu 12.04, using the latest chef deb
[2013-05-22 15:31:31 -0400] zen_: in 5 installs, it fails 100% of the time
[2013-05-22 15:32:00 -0400] zen_: always with this error:
[2013-05-22 15:32:08 -0400] zen_: Error executing action `run` on resource 'execute[/opt/chef-server/embedded/bin/chpst -u chef_server -U chef_server /opt/chef-server/embedded/bin/rabbitmqctl wait /var/opt/chef-server/rabbitmq/db/rabbit@localhost.pid]'
[2013-05-22 15:32:26 -0400] zen_: several days of searching haven't helped, so I've come cap in hand here for some advice or pointers
[2013-05-22 15:33:28 -0400] sparr: jstallard: the client will be moved to a network without dhcp
[2013-05-22 15:34:50 -0400] Aaiiit1: siezer:  thank you,   wheezy indeed not in that list yet ... yeah , I think i'll go back to debian 6,     I do not want to loose the bootstrap ability
[2013-05-22 15:37:14 -0400] siezer: you can try bootstrap -d ubuntu12.04-gems
[2013-05-22 15:37:27 -0400] siezer: https://github.com/opscode/chef/tree/master/lib/chef/knife/bootstrap
[2013-05-22 15:41:54 -0400] zen_: i guess chef 11 isn't supposed to be installed using the installer?
[2013-05-22 15:42:14 -0400] rayrod2030: so what's the best way to get windows nodes created/bootstraping chef and converging cookbooks with test-kitchen and vagrant?
[2013-05-22 15:44:24 -0400] jstallard: sparr: Well, I control hostnames on some nodes by using an attribute. You could just as easily use a data bag search, though, I suppose. Searching a data bag using the mac as the key to get the hostname, and presumably also the IP.
[2013-05-22 15:44:31 -0400] helllen: helllo
[2013-05-22 15:44:51 -0400] helllen: how can I send the logs to syslog in my chef-client ?
[2013-05-22 15:44:52 -0400] jstallard: Things will get tricky when it comes to the chef client key, though
[2013-05-22 15:44:55 -0400] sparr: an attribute sounds like it might be ideal
[2013-05-22 15:45:31 -0400] sparr: why would the chef client key be tricky? would it have to change when the hostname changes?
[2013-05-22 15:45:49 -0400] jstallard: I'm not 100% sure, but I believe it will
[2013-05-22 15:45:54 -0400] rracterr: Anyone here used ironfan?  Anyone recommend or hate it?
[2013-05-22 15:46:51 -0400] jstallard: I don't think it would have to if you overrode the chef.rb to identify that client with the chef server using some unique identifier you come up with other than the hostname or fqdn
[2013-05-22 15:47:18 -0400] jstallard: s/chef.rb/client.rb
[2013-05-22 15:47:50 -0400] jstallard: i.e. the node_name parameter in client.rb
[2013-05-22 15:48:48 -0400] programmerq: anyone know how to get 'knife configure -i' to talk to the chef server through a proxy? normally I just put my proxy configs in knife.rb, but I get a knife.rb by running knife configure -i
[2013-05-22 15:49:26 -0400] zen_: and now it's 100% failure 8 times in a row
[2013-05-22 15:51:37 -0400] ieldib: i am getting this error when trying to run a route53 recipe i have in place  , can anyone help ? LoadError: cannot load such file -- fog
[2013-05-22 15:52:34 -0400] stormerider: ieldib: there was a thread on that recently in the mailing list. i believe you need to specify an older fog version until they cut a new release.
[2013-05-22 15:53:05 -0400] ieldib: so on the node itself  ia m managing ruby + the fog gem both have to be installed ?
[2013-05-22 15:53:08 -0400] ieldib: or is this on the chef server itself ?
[2013-05-22 15:53:34 -0400] ieldib: stormerider can you point me int he right direction as i am not on the mailing list (but will be in a sec)
[2013-05-22 15:53:48 -0400] stormerider: let me see if i can find the archive
[2013-05-22 15:53:51 -0400] ieldib: ty
[2013-05-22 15:55:46 -0400] stormerider: "chef_gem "fog" {  version "1.10.1" }  should be sufficient."
[2013-05-22 15:56:27 -0400] stormerider: thread: http://lists.opscode.com/sympa/arc/chef/2013-05/msg00251.html
[2013-05-22 15:56:56 -0400] sparr: jstallard: specifying the node_name seems ideal
[2013-05-22 15:57:50 -0400] stormerider: sparr: chef client keys are not tied to the hostname, no
[2013-05-22 15:58:35 -0400] cburroughs: In open source chef what is the difference between admin and normal rights?  http://docs.opscode.com/auth_authorization.html#open-source-chef-server makes it sound like "read-nothing" with optional per node overrides
[2013-05-22 15:58:46 -0400] sparr: what is "validation_client_name"?
[2013-05-22 15:59:12 -0400] ieldib: ty stormerider
[2013-05-22 15:59:56 -0400] stormerider: whatever name your validator client has. the default setup name is chef-validator
[2013-05-22 16:00:51 -0400] sparr: if I store the hostname and IP that I want a client to have in attributes, is there a way the client can change that without also being set up as a workstation?
[2013-05-22 16:02:37 -0400] stormerider: a workstation is just how you administer the chef server, basically. (and with some knife plugins, deploy clients)
[2013-05-22 16:03:12 -0400] stormerider: if you have those attributes defined where a cookbook recipe will read them and act on them, then the client run should change the node to match those attributes.
[2013-05-22 16:04:13 -0400] ieldib: success,  thanks  again stormerider
[2013-05-22 16:04:20 -0400] sparr: right. now, I'm sitting in front of the client, and I want to change its hostname or IP
[2013-05-22 16:04:23 -0400] stormerider: setting aside knife ssh / chef-solo / vagrant / etc., the workstation never directly acts on the node; it tells the server how the node should configure itself.
[2013-05-22 16:04:31 -0400] sparr: and I want the chef server to know about that change
[2013-05-22 16:06:16 -0400] stormerider: so workflow-wise, you make the proposed change to attributes on your workstation, push the role/node/etc update to the chef server, and then rerun the client on the client to effect the changes.
[2013-05-22 16:08:20 -0400] stormerider: ieldib: np, glad that helped! was an obscure thread that caught my eye on the list, im glad i remembered it :)
[2013-05-22 16:15:10 -0400] sparr: stormerider: the client is not likely to have access to the chef server at the time the change needs to be made
[2013-05-22 16:15:57 -0400] stormerider: then im confused as to your scenario, can you elaborate?
[2013-05-22 16:27:45 -0400] helllen: how can I send the logs to syslog in my chef-client ?
[2013-05-22 16:30:41 -0400] adnichols: helllen https://gist.github.com/mrtazz/3616423 ?
[2013-05-22 16:31:20 -0400] adnichols: or peek at google - lots of other options
[2013-05-22 16:31:58 -0400] sparr: stormerider: I am going to use cobbler to install an OS and chef, then use chef to install additional services and do network configuration. then the machine goes offline, moves to another network, and does its job for a while. at some point someone sits in front of that machine and changes its configuration, OR we use knife to tell the chef server about a change and later the machine gets access
[2013-05-22 16:32:08 -0400] sparr: to the chef server again. I'd like those two scenarios to play nice with each other
[2013-05-22 16:32:57 -0400] ssd7: Ohai Chefs
[2013-05-22 16:33:15 -0400] stormerider: that's a bit beyond my forte but that sounds like chef-solo might make more sense there, then.
[2013-05-22 16:36:56 -0400] mrtazz: helllen: I use it in a recipe like this and it works great https://github.com/mrtazz/cookbooks/blob/master/cookbooks/chef-client/recipes/freebsd.rb
[2013-05-22 16:39:50 -0400] wralej: hi.. i'm debugging a cookbook which contains a debs directory.  the debs directory has two .deb files for dependencies of the main package being installed (storm cluster).. however, the recipe seems to do a 'package pkg do', which fails, because those packages aren't in ubuntu's repos.... how might i modify the recipe to install from the cookbook's debs directory (with dpkg)?
[2013-05-22 16:41:11 -0400] wralej: see line 27 @ https://github.com/tas50/Cookbooks/blob/master/storm/recipes/default.rb
[2013-05-22 16:41:58 -0400] gleam: cookbook_file and then package pkg do ... source pathhere .. end
[2013-05-22 16:43:42 -0400] wralej: thanks, looking that up
[2013-05-22 16:48:30 -0400] sparr: stormerider: we are going to use chef solo where possible, but using it to make the change in the first place would mean having knife installed on the client, right?
[2013-05-22 16:49:52 -0400] stormerider: well, in that scenario, you'd push from your workstation directly to the chef-solo node, if i understand correctly. i havent used solo so my knowledge is spotty.
[2013-05-22 16:50:32 -0400] sparr: a separate workstation won't be available
[2013-05-22 16:50:56 -0400] stormerider: how are your admins managing these systems? *blinks*
[2013-05-22 17:05:15 -0400] CaptainQuirk: Hi !
[2013-05-22 17:05:27 -0400] CaptainQuirk: I'm trying to change the default shell in one of my recipes
[2013-05-22 17:06:36 -0400] CaptainQuirk: I've tried several things
[2013-05-22 17:06:46 -0400] CaptainQuirk: the last one is here
[2013-05-22 17:06:47 -0400] CaptainQuirk: https://github.com/CaptainQuirk/.oh-my-chef/blob/master/cookbooks/zsh/recipes/default.rb
[2013-05-22 17:07:24 -0400] CaptainQuirk: I have a problem with the ENV['USER'] variable, which is of course  root  at the time of execution
[2013-05-22 17:07:43 -0400] CaptainQuirk: I would like it to be my current user
[2013-05-22 17:08:04 -0400] ssd7: CaptainQuirk: Depending on your OS, you can try node['current_user']
[2013-05-22 17:08:14 -0400] CaptainQuirk: ubuntu
[2013-05-22 17:08:23 -0400] CaptainQuirk: I'm on chef solol though
[2013-05-22 17:08:24 -0400] ssd7: On anything that implements getlogin() it should be the return value of getlogin()
[2013-05-22 17:10:30 -0400] CaptainQuirk: Will it work like variable substitution ?
[2013-05-22 17:11:43 -0400] ssd7: yup, you can directly replace ENV['USER']  with it
[2013-05-22 17:12:12 -0400] ssd7: If that doesn't work you might try the SUDO_USER environment variable
[2013-05-22 17:13:37 -0400] CaptainQuirk: I get a nasty error there ... Not related to what you advise I think
[2013-05-22 17:18:48 -0400] zen_: hello again
[2013-05-22 17:18:57 -0400] rava: greetings program
[2013-05-22 17:19:17 -0400] zen_: does anyone have an actual installation guide for chef? everythign i try - official guides, repository installs, standard sinstalls - every single time it fails completely
[2013-05-22 17:19:39 -0400] ssd7: zen_: The server or the client?
[2013-05-22 17:19:44 -0400] zen_: server
[2013-05-22 17:19:50 -0400] rava: zen_: what platform are you installing on?
[2013-05-22 17:19:54 -0400] zen_: 100% of installs fail
[2013-05-22 17:19:58 -0400] zen_: ubuntu 12.04
[2013-05-22 17:20:12 -0400] ssd7: Are you using the omnibus installer here: http://www.opscode.com/chef/install/
[2013-05-22 17:20:15 -0400] zen_: 12.04.2 LTS
[2013-05-22 17:20:22 -0400] zen_: tried that - failed 8 times in a row
[2013-05-22 17:20:39 -0400] ssd7: Can you post an example of the failure somewhere?
[2013-05-22 17:21:14 -0400] zen_: certainly
[2013-05-22 17:21:41 -0400] zen_: hmmm i shoudl be more precise in my language as well.
[2013-05-22 17:21:48 -0400] zen_: "install" works
[2013-05-22 17:21:50 -0400] zen_: "start" fails
[2013-05-22 17:22:28 -0400] zen_: if I use the Ubuntu repository files (chef chef-server) it fails to start and throws ruby dependecy errors everywhere
[2013-05-22 17:23:12 -0400] failshell: from the really weird bug department, i have this issue. my mysql cookbook works on a regular VM. in vagrant, it fails to start mysql. using /etc/init.d/mysqld start fails. but if i run bash -x /etc/init.d/mysqld start it works. anyone can think of something that would cause that? cause im really puzzled
[2013-05-22 17:23:12 -0400] ssd7: zen_: You'll definitely want to use the omnibus packages.  If you have an installation that isn't working I would be happy to help take a look about what might be up
[2013-05-22 17:23:13 -0400] zen_: if I use the .deb from opscode, it fails this way:
[2013-05-22 17:23:15 -0400] zen_: Error executing action `run` on resource 'execute[/opt/chef-server/embedded/bin/chpst -u chef_server -U chef_server /opt/chef-server/embedded/bin/rabbitmqctl wait /var/opt/chef-server/rabbitmq/db/rabbit@localhost.pid]'
[2013-05-22 17:23:26 -0400] zen_: and it fails that way every single time
[2013-05-22 17:23:35 -0400] geekbri: Anybody having issues with the chef api at the moment?
[2013-05-22 17:23:37 -0400] geekbri: its throwing 400 errors for me at the moment
[2013-05-22 17:25:21 -0400] zen_: and also
[2013-05-22 17:25:23 -0400] zen_: ---- Begin output of /opt/chef-server/embedded/bin/chpst -u chef_server -U chef_server /opt/chef-server/embedded/bin/rabbitmqctl wait /var/opt/chef-server/rabbitmq/db/rabbit@localhost.pid ---- STDOUT: Waiting for rabbit@localhost ... pid is 15929 ... STDERR: Error: process_not_running
[2013-05-22 17:26:05 -0400] zen_: using chef-server_11.0.8-1.ubuntu.12.04_amd64.deb
[2013-05-22 17:26:43 -0400] zen_: i've spent weeks on this now (literal weeks - I've been trying for 6 weeks or so on and off to get this installed)
[2013-05-22 17:26:51 -0400] ssd7: zen_: So, it looks like rabbitmq is having a problem starting up. Is anything listening on its port(5672) already perhaps?
[2013-05-22 17:27:05 -0400] zen_: not on 5672
[2013-05-22 17:27:12 -0400] zen_: rabbtmq-server runs, then stops, then runs, then stops
[2013-05-22 17:28:08 -0400] ssd7: Is it logging anything in /var/log/opscode/rabbitmq/?
[2013-05-22 17:28:40 -0400] zen_: no such file or directory
[2013-05-22 17:28:45 -0400] thatothermitch: hello all  I've been running into what appears to be a converge-time proxy problem with the opscode-cookbooks/chef-server
[2013-05-22 17:29:39 -0400] thatothermitch: specifically the omnitruck_client "redirect_target" failing to honor my proxy settings (in chef or the shell environment)  see https://github.com/opscode-cookbooks/chef-server/blob/master/libraries/omnitruck_client.rb#L48
[2013-05-22 17:29:48 -0400] zen_: $ tail /var/log/rabbitmq/startup_log Wed May 22 15:54:15 UTC 2013 - rabbitmq successfully started
[2013-05-22 17:30:07 -0400] ssd7: zen_: Hrm.  That isn't where it should be logging if you installed with the omnibus packages
[2013-05-22 17:30:23 -0400] ssd7: Do you have rabbit installed via the distribution packages as well
[2013-05-22 17:30:47 -0400] zen_: this was the starting point: $ wget https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.8-1.ubuntu.12.04_amd64.deb
[2013-05-22 17:31:04 -0400] zen_: no - i started with neither chef nor rabbit installed
[2013-05-22 17:32:37 -0400] ssd7: zen_: From the fact above though it definitely appears that either (1) rabbitmq is installed via system packages, or (2) the configuration for the omnibus installation is somehow pointed at the incorrect log file.
[2013-05-22 17:33:18 -0400] thatothermitch: were i to attempt a fix for the omnitruck_client proxy issue, would the chef-server cookbook be the appropriate place to address it?
[2013-05-22 17:33:44 -0400] ssd7: thatothermitch: Yes, I believe so
[2013-05-22 17:34:30 -0400] thatothermitch: great, i'll poke around and see if i can get a PR together
[2013-05-22 17:34:46 -0400] thatothermitch: thanks ssd7!
[2013-05-22 17:34:59 -0400] ssd7: thatothermitch: np
[2013-05-22 17:36:09 -0400] ssd7: zen_: So, it seems to me that we don't have a clear picture of the state of the system.  Where are you trying to install this? EC2?  If so, I'd be happy to try to reproduce it if you have the AMI you are using
[2013-05-22 17:37:07 -0400] zen_: ssd7: brand-new Ubunutu 12.04.2 cloud instance on Rackspace
[2013-05-22 17:38:49 -0400] ssd7: Mind posting to a gist or pastebin the output of ps auxww | grep rabbitmq?
[2013-05-22 17:40:06 -0400] rava: when are default values for resource attributes evaluated?
[2013-05-22 17:40:10 -0400] zen_: hmmm interesting
[2013-05-22 17:41:06 -0400] ssd7: rava: The simple answer is "compile time"
[2013-05-22 17:41:16 -0400] ssd7: the more complicated answer is "It depends becuase Ruby"
[2013-05-22 17:41:20 -0400] rava: lol
[2013-05-22 17:41:39 -0400] rava: ssd7: ok, i'm running into problems trying to set the default value for resource attributes using node attributes
[2013-05-22 17:41:52 -0400] zen_: ok, ps -auxww shows only the grep
[2013-05-22 17:42:05 -0400] rava: seems that if a successful run hasn't set that attribute previously, the resource won't see it
[2013-05-22 17:42:29 -0400] ssd7: rava: hrmm, would need to see the code probably to help.
[2013-05-22 17:43:04 -0400] zen_: ok, trying a clean install again
[2013-05-22 17:43:09 -0400] ssd7: zen_: Hrmm.  So you should also see various runsv processes related to rabbitmq
[2013-05-22 17:43:19 -0400] zen_: chef is not installed. rabbit is notinstalled (uincluding zero rabbit-related binaries)
[2013-05-22 17:43:27 -0400] rava: ssd7: https://gist.github.com/ravaa/4b1b486436fa7324df33
[2013-05-22 17:43:29 -0400] zen_: no rabbit services running
[2013-05-22 17:43:45 -0400] zen_: trying the installer again
[2013-05-22 17:44:02 -0400] ssd7: rava: ahh, is this in an LWRP?
[2013-05-22 17:44:09 -0400] rava: si
[2013-05-22 17:44:21 -0400] rava: and the error on convergence attempt: https://gist.github.com/ravaa/dc4692d9793890eff8b5
[2013-05-22 17:46:26 -0400] zen_: this looks better
[2013-05-22 17:46:35 -0400] rava: thinking the fast fix is to make it unrequired and set the value in the provider
[2013-05-22 17:46:36 -0400] zen_: and it worked
[2013-05-22 17:46:42 -0400] zen_: ssd7: thanks
[2013-05-22 17:46:51 -0400] zen_: ssd7: thanks - you gave me the pointer i needed
[2013-05-22 17:47:31 -0400] zen_: which was: kill everything to do with rabbit, delete everything to do with rabbit, then start again
[2013-05-22 17:47:45 -0400] sparr: stormerider: when the system is in the field, not connectable remotely, they visit it
[2013-05-22 17:48:13 -0400] ssd7: zen_: Glad to help!
[2013-05-22 17:48:17 -0400] sparr: I'm trying to reduce duplication of information and effort. If someone in the field changes the hostname of a server, I don't want chef to change it back next time that server is connected to a network where it can reach the chef server
[2013-05-22 17:48:33 -0400] dysinger: anyone no why I can't just run install.sh to get chef installed here on this dockerfile ?  It works if I install wget and pipe to bash.  what's the exit 5 all about when I run it directly?
[2013-05-22 17:48:33 -0400] sparr: and I don't want to need to change it in chef (pointlessly) at the same time as it's changed in the field
[2013-05-22 17:48:38 -0400] dysinger: link https://gist.github.com/dysinger/5629453
[2013-05-22 17:48:40 -0400] zen_: now time to try configuring a client
[2013-05-22 17:48:41 -0400] stormerider: im not sure what to suggest in that kind of scenario, sorry
[2013-05-22 17:48:41 -0400] zen_: thanks again
[2013-05-22 17:48:44 -0400] ssd7: rava: So, attribute files should be read before lwrps within a single cookbook
[2013-05-22 17:48:45 -0400] rava: just to make sure it wasn't a syntax thing, i tried with the node[][] syntax and no dice
[2013-05-22 17:48:58 -0400] iyp: chef-client is running its run list out of order. It reports "resolving cookbooks for run list: ["ldap::client", "bind::server"]" but then runs bind::server first.
[2013-05-22 17:49:06 -0400] iyp: Any idea on what could be causing this
[2013-05-22 17:49:07 -0400] iyp: ?
[2013-05-22 17:49:09 -0400] ssd7: but if you are trying to use attributes from one cookbook in an lwrp from another, it looks like you could definitely run into load-order problems
[2013-05-22 17:49:36 -0400] ssd7: iyp: Is ldap::client calling include_recipe anywhere?
[2013-05-22 17:49:44 -0400] rava: ssd7: but isn't the node.chef_client.* set of attributes set up with defaults even before any cookbooks execute?
[2013-05-22 17:50:02 -0400] ssd7: Or does bind::server use any compile time tricks that make it look like it is running first?
[2013-05-22 17:50:20 -0400] rava: going to see if include_attribute in the attributes file will fix it
[2013-05-22 17:50:23 -0400] iyp: ssd7: no include_recipe in ldap::client
[2013-05-22 17:50:37 -0400] iyp: also, no compile time tricks that I'm aware of in bind::server
[2013-05-22 17:51:13 -0400] iyp: the ldap cookbook does have a depends attribute in the metadata.rb
[2013-05-22 17:51:14 -0400] ssd7: iyp: Mind posting a chef-client log somewhere showing the issue?
[2013-05-22 17:51:18 -0400] iyp: sure
[2013-05-22 17:52:18 -0400] rava: nope, no dice
[2013-05-22 17:52:31 -0400] ssd7: rava: The chef_packages attributes are ohai attributes and should be loaded first, the chef_client attributes are loaded when we compile the recipes as they come from attribute files
[2013-05-22 17:52:42 -0400] sparr: stormerider: thanks, neither does anyone else. I'll keep working on a solution.
[2013-05-22 17:52:45 -0400] rava: ssd7: i see
[2013-05-22 17:53:02 -0400] stormerider: sparr: i would probably take that to the mailing list, actually
[2013-05-22 17:53:05 -0400] rava: ssd7: thanks for the clarification. attribute order = the source of madness
[2013-05-22 17:54:41 -0400] iyp: ssd7: failed-run json http://pastebin.com/ndyufB75
[2013-05-22 17:54:53 -0400] iyp: stacktrace http://pastebin.com/XbapAcsU
[2013-05-22 17:55:33 -0400] rava: ssd7: so is it fair to say that i should rely on node attributes when writing lwrp's in either the resource definition or provider definition?
[2013-05-22 17:55:56 -0400] iyp: It ultimately fails because it can't resolve the hostname for the LDAP server, but the reason it can't resolve this is because ldap::client doesn't run first
[2013-05-22 17:56:45 -0400] ssd7: rava: I tend to not use node attrs inside LWRPs. Not so much for this reason but just becuase I find it consfusing for users that some magical attribute can change the behavior
[2013-05-22 17:56:58 -0400] rava: ssd7: good point
[2013-05-22 17:57:00 -0400] ssd7: rava: only exception I make is ohai attributes
[2013-05-22 17:57:44 -0400] rava: there's enough magic as is. still trying to get the hang of writing lwrps in general, but finding it more useful than complicated recipes in wrapper cookbooks
[2013-05-22 17:58:16 -0400] ssd7: iyp: I could be wrong as it is hard to see from just the stack, but my guess is that this is a compile time error
[2013-05-22 17:58:36 -0400] awgross: hey chefs
[2013-05-22 17:58:40 -0400] iyp: ssd7: in what sense?
[2013-05-22 17:58:48 -0400] ssd7: so you need that hostname when compiling the bind::server recipe but it is being set at converge time of the ldap::client recipe
[2013-05-22 17:58:58 -0400] iyp: oh
[2013-05-22 17:59:08 -0400] iyp: huh
[2013-05-22 17:59:30 -0400] ssd7: iyp: The chef-client run has two phases.  The first phase we load the recipes, executing the ruby code inside of it to generate a resource collection.  The second phase runs through the resource collection and executes the actions on the resources
[2013-05-22 17:59:49 -0400] awgross: anyone experience an issue where they are unable to properly set `new_resource.updated_by_last_action()` in an LWRP?  Try to get the result of a template file changing, and using that to determine if the LWRP was updated.  Unfortunately this does not seem to work.
[2013-05-22 18:00:11 -0400] ssd7: Both of those phases happen in run_list order, but if you depend on stuff set in the converge phase during the compile phase you can run into issue
[2013-05-22 18:00:14 -0400] ssd7: s
[2013-05-22 18:00:34 -0400] iyp: ssd7: ok. so it's trying to resolve the address when it's compiling the resources?
[2013-05-22 18:00:49 -0400] iyp: gotchya
[2013-05-22 18:00:53 -0400] ssd7: iyp: Perhaps, I would need to see the cookbooks and/or a full run to be sure
[2013-05-22 18:01:23 -0400] iyp: What would be the best way to set up the hosts file / dns resoloution before any of this happens?
[2013-05-22 18:02:19 -0400] sparr: https://github.com/nickola/chef-hostname <-- in the example given at the bottom of this page, "set_fqdn" is an attribute, yes?
[2013-05-22 18:03:59 -0400] log1kal: sparr: looks like it to me
[2013-05-22 18:04:06 -0400] ssd7: awgross: That should work.  In Chef 11 you can often avoid it using the inline compile stuff in LWRPs
[2013-05-22 18:04:12 -0400] sparr: mostly unrelated question...
[2013-05-22 18:04:28 -0400] sparr: is there a way to get data from a chef_solo instance back into the chef server from which it was cloned?
[2013-05-22 18:05:33 -0400] awgross: ssd7: can you elaborate?  In the LWRP Ive tried doing t = template "blah.. then later doing new_resource.updated_by_last_action(t.updated_by_last_action?) but I never get changes
[2013-05-22 18:05:38 -0400] sparr: I have a chef server, and a chef client that's offline. I create a chef_solo environment, then use that on the client. I want the chef server to later know the new ohai results from the client.
[2013-05-22 18:07:51 -0400] ssd7: awgross: maybe   new_resource.updated_by_last_action(@repo_file.updated?)
[2013-05-22 18:07:58 -0400] ssd7: sorry, s/@repo_file/t/
[2013-05-22 18:08:08 -0400] awgross: ssd7: tried that as well, with and without instance vars, didnt seem to work
[2013-05-22 18:08:15 -0400] awgross: let me double check tho
[2013-05-22 18:08:17 -0400] ssd7: that is pulled from the apt cookbook which uses the same pattern
[2013-05-22 18:08:38 -0400] awgross: yeah i was looking at that
[2013-05-22 18:08:41 -0400] awgross: hence why i was confused
[2013-05-22 18:08:44 -0400] awgross: when it wasnt working
[2013-05-22 18:13:34 -0400] awgross: nope, no luck using the apt pattern
[2013-05-22 18:14:19 -0400] ssd7: Yeah, in general that pattern should work (although in Chef 11 you should prefer use_inline_resources instead) so it might be some subtle bug you are hitting
[2013-05-22 18:14:51 -0400] awgross: hmm, i tried in chef 10.18/10.24/11.4.4
[2013-05-22 18:14:57 -0400] awgross: seems odd it would have persisted so long
[2013-05-22 18:18:20 -0400] ssd7: Can I see the provider code you ahve?
[2013-05-22 18:18:39 -0400] zenloop: Hey guys, how do I block together a collection of commands/resources.  I only want to run them if a file exists so I think I can use only_if in the block of commands.
[2013-05-22 18:19:30 -0400] awgross: zenloop: normally people will have all but the first block be set with `action :nothing`, the first block will have the only_if guard and then ecah block will notify the next one in the chain
[2013-05-22 18:20:25 -0400] awgross: ssd7: do you have an example of use_inline_resources being used anywhere? I can find the docs on it but there are no code samples
[2013-05-22 18:21:31 -0400] sparr: I want to tell my chef server about a node's existence, and set an attribute for that node, before the first time the client on that node connects to the chef server. How?
[2013-05-22 18:22:23 -0400] gleam: add it with knife
[2013-05-22 18:22:42 -0400] gleam: or the webui i guess
[2013-05-22 18:23:10 -0400] sparr: knife client create ?
[2013-05-22 18:23:15 -0400] gleam: node create
[2013-05-22 18:23:22 -0400] sparr: sorry, thanks
[2013-05-22 18:23:25 -0400] gleam: np
[2013-05-22 18:24:04 -0400] awgross: ssd7: nevermind, managed to figure out the syntax
[2013-05-22 18:24:24 -0400] ssd7: awgross: ahh, cool
[2013-05-22 18:24:28 -0400] awgross: and it worked as well
[2013-05-22 18:24:29 -0400] awgross: thanks
[2013-05-22 18:24:39 -0400] awgross: now to migrate from 10.18.2 to 11.4.4 everywhere
[2013-05-22 18:25:39 -0400] sparr: so, I do `knife node create foobar`, then I do something on the server to foobar's runlist or attributes, then on a new machine I've got a client.rb with node_name="foobar" and a copy of the chef server's validation.pem, and that node is going to be able to connect to the chef server, identify itself as foobar, and get the appropriate run list and attributes?
[2013-05-22 18:26:00 -0400] bean__: why would you not just bootstrap the node
[2013-05-22 18:26:01 -0400] bean__: :)
[2013-05-22 18:26:15 -0400] bean__: assuming your server works how I think it should
[2013-05-22 18:26:41 -0400] magoo_: I am incredibly behind on hiring more team members to do more devops style work. I need to get better at interviewing for these rolse in general but I'd really appreciate any material on this subject? Does anyone have any basic tests that I could give candidates as a starting point?
[2013-05-22 18:26:55 -0400] sparr: I am creating a new physical server. I am putting an OS and chef on it, then letting chef install additional software and do system configuration (hostname, network, etc).
[2013-05-22 18:27:25 -0400] sparr: bean__: I don't know if/how bootstrap is relevant to what I'm doing
[2013-05-22 18:27:45 -0400] bean__: sparr: so, bootstrap should install chef for you, all it should need is SSH.
[2013-05-22 18:28:09 -0400] sparr: I am trying to eliminate manual steps from this process
[2013-05-22 18:29:58 -0400] sparr: right now where I'm at is that cobbler has installed centos and chef on a server, and then that server has been rebooted and connected to a network on which it can reach the chef server
[2013-05-22 18:30:10 -0400] bean__: sparr: this is what I use for setting up new servers: knife bootstrap server.name.com -x my_admin_user --sudo -r 'role[essentials]' it sets up everything and adds that role to the runlist.
[2013-05-22 18:30:14 -0400] sparr: I want the chef server to configure that box, including installing services, setting the network configuration and hostname, etc
[2013-05-22 18:30:55 -0400] bean__: the way you're wanting to do it would work -- but imo thats more steps.
[2013-05-22 18:31:46 -0400] sparr: your way requires a chef workstation, and someone to find out the server's ip address (which it got from dhcp) before they can tell that workstation how to connect to it
[2013-05-22 18:32:02 -0400] zenloop: awgriss: here is what I am trying to do: http://pastie.org/7944514
[2013-05-22 18:32:21 -0400] bean__: ah, valid, sparr. I just have my chef stuff set up on my workstation. which I figured most people did...
[2013-05-22 18:32:23 -0400] sparr: I don't want to need a chef workstation at all during this process. And I don't want someone to have to connect a keyboard and monitor to the server
[2013-05-22 18:32:38 -0400] sparr: it's not a matter of where the workstation is. I don't want a workstation at all.
[2013-05-22 18:32:40 -0400] bean__: the bootstrap connects over ssh.
[2013-05-22 18:32:50 -0400] sparr: sorry, let me be more clear
[2013-05-22 18:32:57 -0400] sparr: where you put "server.name.com"
[2013-05-22 18:33:16 -0400] sparr: THAT portion of the knife command requires information that would be gleaned from the server, its DHCP-assigned IP
[2013-05-22 18:33:23 -0400] bean__: ah,
[2013-05-22 18:33:50 -0400] sparr: once the machine has a hostname and a static IP, then I could use DNS
[2013-05-22 18:33:57 -0400] sparr: but I'm using chef to configure the hostname and static IP!
[2013-05-22 18:34:01 -0400] bean__: ah
[2013-05-22 18:34:16 -0400] sparr: because I don't want to have to type all that in twice (and the errors that might entail)
[2013-05-22 18:34:21 -0400] bean__: valid.
[2013-05-22 18:35:22 -0400] sparr: so, I've told my asset tracking system that this node exists. its name, hostname, IP configuration.
[2013-05-22 18:35:46 -0400] sparr: through some voodoo (scripts I haven't written yet), that information gets knife'd into the chef server as a new node
[2013-05-22 18:36:08 -0400] sparr: then the new server comes online, connects to the chef server, and says "hi, I'm node_name, what should I do?"
[2013-05-22 18:36:38 -0400] workmad3: sparr: the 'voodoo' is a bootstrap script that you execute through knife bootstrap
[2013-05-22 18:37:22 -0400] sparr: workmad3: did you miss what I just said to bean__?
[2013-05-22 18:37:41 -0400] sparr: bootstrap is not appropriate here, because I don't know the information required to tell knife how to connect to the new node
[2013-05-22 18:37:51 -0400] sparr: the node can connect to the chef server
[2013-05-22 18:37:54 -0400] workmad3: sparr: ah, fair enough
[2013-05-22 18:37:56 -0400] sparr: knife can connect to the chef server
[2013-05-22 18:37:56 -0400] workmad3: sparr: I did miss that
[2013-05-22 18:37:59 -0400] sparr: k
[2013-05-22 18:38:07 -0400] bean__: seems like a backwards workflow to me, but that's up to you :P
[2013-05-22 18:38:15 -0400] sparr: I hear that a lot
[2013-05-22 18:38:55 -0400] sparr: it seems like 99% of chef users are in virtualized environments, and 99% of that last 1% are in environments where their chef clients can always reach the chef server and have pre-chef configuration of many things
[2013-05-22 18:38:57 -0400] workmad3: sparr: of course, if you've added the info to the chef server, you could always use that to connect
[2013-05-22 18:39:02 -0400] sparr: I'm that remaining .01%
[2013-05-22 18:39:14 -0400] sparr: workmad3: use what to connect to what?
[2013-05-22 18:39:19 -0400] workmad3: sparr: the info in the chef server
[2013-05-22 18:39:23 -0400] workmad3: sparr: with a knife search
[2013-05-22 18:39:27 -0400] sparr: it doesn't have that info
[2013-05-22 18:39:36 -0400] thatothermitch: yet...
[2013-05-22 18:39:50 -0400] sparr: to get knife bootstrap to work, I need to give knife (somehow) an IP or hostname that will let it reach the new node
[2013-05-22 18:39:52 -0400] sparr: I don't know that
[2013-05-22 18:40:10 -0400] thatothermitch: sparr: you said it was in your asset tracking system? why not query that?
[2013-05-22 18:40:29 -0400] blueben: if the machine isn't online yet, why does it need to be in chef?
[2013-05-22 18:40:29 -0400] sparr: THAT isn't in the asset tracking system
[2013-05-22 18:41:03 -0400] thatothermitch: so, really, you don't have any information about how to communicate to the node?
[2013-05-22 18:41:56 -0400] sparr: correct
[2013-05-22 18:42:02 -0400] sparr: the node is being turned on for the second time
[2013-05-22 18:42:09 -0400] sparr: (first time is the PXE install of the OS and chef)
[2013-05-22 18:42:15 -0400] sparr: it gets a DHCP IP on our network
[2013-05-22 18:42:25 -0400] sparr: and then... that's where I'm at
[2013-05-22 18:42:53 -0400] blueben: so the machine boots with dhcp
[2013-05-22 18:42:59 -0400] sparr: yes
[2013-05-22 18:42:59 -0400] blueben: and it's already got a certificate
[2013-05-22 18:43:06 -0400] sparr: the validation.pem from the server?
[2013-05-22 18:43:08 -0400] workmad3: sparr: hmm, you could modify your install so that your first boot runs the chef-client
[2013-05-22 18:43:10 -0400] thatothermitch: so, why not piggy back on the PXE install step to 1) authorize the node by copying validation.pem, etc  then just invoke chef-client
[2013-05-22 18:43:16 -0400] blueben: and its own client certificate
[2013-05-22 18:43:29 -0400] thatothermitch: or install an init script to do it on next boot
[2013-05-22 18:43:34 -0400] sparr: workmad3: the first boot is in the wrong environment, it's in the centos installer, I can't "do" things from there without a LOT of additional work
[2013-05-22 18:43:35 -0400] thatothermitch: (or something similar)
[2013-05-22 18:43:48 -0400] _Spike_: Sounds like a job for a firstboot finish script.
[2013-05-22 18:43:54 -0400] sparr: blueben: it does not have a client certificate yet that I know of. I was under the impression that would be generated during the initial exchange with the server
[2013-05-22 18:43:56 -0400] workmad3: sparr: first boot after install
[2013-05-22 18:44:02 -0400] sparr: workmad3: that's the boot I'm on now
[2013-05-22 18:44:02 -0400] workmad3: sparr: not first boot into installer
[2013-05-22 18:44:12 -0400] sparr: so, yes, first boot after install
[2013-05-22 18:44:19 -0400] sparr: it gets an IP from DHCP, then it runs the chef client
[2013-05-22 18:44:21 -0400] _Spike_: %post in the kickstart
[2013-05-22 18:44:48 -0400] workmad3: sparr: and that's the wrong environment??
[2013-05-22 18:44:57 -0400] sparr: _Spike_: running software that wants to be run in the real installed environment, like the chef client, inside the installer, is a Bad Idea. I'd need to chroot, and probably do other environment gymnastics.
[2013-05-22 18:45:02 -0400] sparr: workmad3: no, that's the right environment
[2013-05-22 18:45:30 -0400] _Spike_: kickstart runs %post in chroot. Use that to copy a S99firstboot into /etc/rc3.d
[2013-05-22 18:45:30 -0400] sparr: workmad3: my first install into the installed environment does run the chef-client.
[2013-05-22 18:45:40 -0400] sparr: _Spike_: and then?
[2013-05-22 18:45:52 -0400] thatothermitch: reboot?
[2013-05-22 18:45:53 -0400] thatothermitch: lol
[2013-05-22 18:46:03 -0400] sparr: I don't know what _Spike_ is suggesting I put into that firstboot script
[2013-05-22 18:46:03 -0400] thatothermitch: the firstboot script will run next time?
[2013-05-22 18:46:11 -0400] workmad3: sparr: ok then... so your new node is connected to the chef server at that point, yes?
[2013-05-22 18:46:13 -0400] thatothermitch: what you need to do to complete the install
[2013-05-22 18:46:16 -0400] workmad3: sparr: so what's the problem? :/
[2013-05-22 18:46:16 -0400] sparr: workmad3: yes
[2013-05-22 18:46:26 -0400] thatothermitch: i.e. invoke chef-client
[2013-05-22 18:46:51 -0400] sparr: I've already got chef-client being invoked when the OS boots that first time
[2013-05-22 18:48:04 -0400] thatothermitch: so, chef is working for you then?
[2013-05-22 18:50:01 -0400] sparr: so, to rewind...
[2013-05-22 18:50:43 -0400] sparr: I'm trying to tell the chef server information about that new node. I want to use knife node create/edit. Some people here are suggesting I use knife bootstrap, before chef is installed on the new node, and we are all arguing about why that won't work.
[2013-05-22 18:51:05 -0400] workmad3: sparr: ah right... do you know the hostname of the new node in advance?
[2013-05-22 18:51:32 -0400] sparr: I know the hostname I want it to have. I *could* tell kickstart the hostname, and later tell chef the hostname, but I don't want the person doing the deployments to have to type it in twice, to avoid errors
[2013-05-22 18:51:47 -0400] sparr: so, in short, no. kickstart is going to give it a random hostname, and chef is going to fix it.
[2013-05-22 18:53:01 -0400] workmad3: sparr: hmm, that's problematic then :P
[2013-05-22 18:53:16 -0400] thatothermitch: yeah, this doesn't strike me as a chef issue at all, really
[2013-05-22 18:53:29 -0400] _Spike_: nope. Process problem.
[2013-05-22 18:53:50 -0400] sparr: right now we are duplicating a lot of effort, wasting a lot of time, and occasionally having information desyncs
[2013-05-22 18:54:05 -0400] sparr: where bob types in "foobar" for the hostname in one system, and a week later when the next step happens joe types in "foobaz"
[2013-05-22 18:54:19 -0400] thatothermitch: chef isn't going to be able to do much about that
[2013-05-22 18:54:26 -0400] sparr: sure it is. chef is going to let me only have it typed in once
[2013-05-22 18:54:44 -0400] sparr: I'm using chef to change the process to eliminate the bad parts of the process.
[2013-05-22 18:55:40 -0400] _Spike_: Put some automation in front of the process. Put the hostname in one place.
[2013-05-22 18:56:18 -0400] sparr: yeah, THAT is where process problems come into play
[2013-05-22 18:56:23 -0400] _Spike_: if your CMDB can't handle it, use a JSON or YAML file.
[2013-05-22 18:56:28 -0400] sparr: someone in charge says the PXE server can't be on the network
[2013-05-22 18:57:01 -0400] sparr: so there's no way to share info between chef and the OS installation process
[2013-05-22 18:57:31 -0400] sparr: so I can't completely eliminate duplication of information. I'm narrowing it down to a single field, the node_name
[2013-05-22 18:57:39 -0400] _Spike_: Can you get a system that can "talk" to both?
[2013-05-22 18:57:43 -0400] sparr: no
[2013-05-22 18:57:56 -0400] _Spike_: sucks to be you.
[2013-05-22 18:57:58 -0400] thatothermitch: sparr:  if all you're doing is trying to avoid errors, can you write a recipe that will abort the converge if you detect a discrepancy ?
[2013-05-22 18:57:58 -0400] sparr: yep
[2013-05-22 18:58:10 -0400] sparr: thatothermitch: converge?
[2013-05-22 18:58:14 -0400] thatothermitch: chef run?
[2013-05-22 18:58:24 -0400] thatothermitch: i.e. what happens when you invoke chef-client
[2013-05-22 18:59:29 -0400] sparr: yeah, that's where it gets really tricky, and where stormerider suggested I take my more complex concerns to the mailing list
[2013-05-22 18:59:58 -0400] sparr: I DO expect the hostname and network config to get changed outside of chef, and figuring out how to inform the chef server about that, or handle it gracefully otherwise, is going to drive me nuts
[2013-05-22 19:00:06 -0400] sparr: but that's part of my weird use case, not a chef problem
[2013-05-22 19:01:31 -0400] btm: @opscode #opschef code review; join: https://plus.google.com/hangouts/_/f629ed349382bfb29586f470137f7088678a40a9, watch: http://youtu.be/vCVlkIBC5ro
[2013-05-22 19:01:32 -0400] workmad3: sparr: well, that's not too difficult... just make sure the chef client config sets the node name, rather than letting the name default to the hostname
[2013-05-22 19:03:20 -0400] stormerider: guessing it's likely an ssh issue
[2013-05-22 19:03:49 -0400] stormerider: user running the git command doesnt have the host key cached, or failed verification or such
[2013-05-22 19:08:45 -0400] shane__: is everything pretty much localized to /opt/chef-server now on 11.x ?
[2013-05-22 19:11:18 -0400] ben_Rethink: I'm trying hosted chef can some one help me ... my frist goal is to provision a Solr server
[2013-05-22 19:11:42 -0400] ben_Rethink: I have all the cook books loaded but I don' have any nodes on my work station .
[2013-05-22 19:12:06 -0400] ben_Rethink: so how do i run the receipes
[2013-05-22 19:12:46 -0400] thatothermitch: is chef 10.x still available via the chef-server recipe ?
[2013-05-22 19:13:02 -0400] thatothermitch: i tried setting the version to "10.26.0" but it complains about not being able to find such a package
[2013-05-22 19:17:53 -0400] thatothermitch: is it possible to find out what omnibus package versions are available? (teach a man to fish!)
[2013-05-22 19:29:06 -0400] gswallow: can someone answer my question about automatic attributes?
[2013-05-22 19:29:30 -0400] gswallow: http://pastebin.com/fBqTTYdU
[2013-05-22 19:30:05 -0400] gswallow: That's from a chef handler.  Any idea how those automatic attributes are being set?
[2013-05-22 19:33:32 -0400] dsteen: @gswallow they are generated by ohai
[2013-05-22 19:33:43 -0400] gswallow: @dsteen any particular version?
[2013-05-22 19:34:22 -0400] dsteen: well, that namespace was created when chef was migrated from 0.8 to 0.9
[2013-05-22 19:36:22 -0400] dsteen: does anyone know if it's possible to create mixed encrypted / plain text data bags?
[2013-05-22 19:42:50 -0400] rayrod2030: anyone building server 2008 r2 baseboxes that work with vagrant?
[2013-05-22 19:43:15 -0400] rayrod2030: I've started down the path but I see veewee stopped supporing vagrant after they made the binary installer jump.
[2013-05-22 19:43:43 -0400] rayrod2030: or at least it seems to be a bit behind.
[2013-05-22 19:46:40 -0400] g_zilla: can anyone explain why on 90% of my servers, a certain mount works, but on some it says "blah is already mounted" and the chef run fails?
[2013-05-22 19:47:53 -0400] log1kal: g_zilla: sounds like an issue with idempotency ?
[2013-05-22 19:48:11 -0400] g_zilla: yeah, possibly.  what can I check?
[2013-05-22 19:48:28 -0400] log1kal: is blah already mounted?
[2013-05-22 19:48:48 -0400] log1kal: maybe shield the mount command in an only_if block.
[2013-05-22 19:49:37 -0400] g_zilla: yes, blah is already mounted (chef mounted it!) I have successfully shielded it just with a not_if, but I dont like that
[2013-05-22 19:51:24 -0400] g_zilla: hmm...my own comment got me thinking...maybe chef didnt mount it.  since I have "enable" in the recipe, its possible the OS mounted it now chef is unaware
[2013-05-22 19:51:40 -0400] g_zilla: quick unmount, and chef-client works fine.  subsequent runs work as well
[2013-05-22 19:51:59 -0400] g_zilla: thats a problem.  looks like im removing :enable from the recipe
[2013-05-22 19:52:26 -0400] pwf: what in god's name is this doing https://github.com/opscode-cookbooks/chef-server/blob/master/templates/default/chef-server.rb.erb
[2013-05-22 19:52:43 -0400] pwf: why is the link in this page broken https://github.com/opscode-cookbooks/chef-server/blob/master/attributes/default.rb
[2013-05-22 19:52:56 -0400] pwf: and why is it ~supposed~ to be linking to itself
[2013-05-22 19:53:05 -0400] pwf: even though the information it says it in itself isn't there
[2013-05-22 20:00:53 -0400] gkarekinian: Oh, they moved that
[2013-05-22 20:01:40 -0400] gkarekinian: I'm the one who added documentation to this attributes file but I didn't know they moved it to https://github.com/opscode/omnibus-chef-server
[2013-05-22 20:04:26 -0400] gkarekinian: So that should now link to https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-05-22 20:06:15 -0400] nicgrayson: is there a way to get guard to work with strainer? I want guard to run strainer test when a change is made
[2013-05-22 20:09:04 -0400] btm_: @opscode no #opschef cookbook review today. enjoy your time off @jtimberman!
[2013-05-22 20:12:50 -0400] pwf: cool, thank you gkarekinian
[2013-05-22 20:13:06 -0400] gkarekinian: Opened and ticket and will send a pull request to fix it
[2013-05-22 20:13:08 -0400] pwf: still confusing, as i overrode the nginx non-ssl port after installing, and it didn't seem to change
[2013-05-22 20:13:19 -0400] pwf: had to manually change it in the config file
[2013-05-22 20:13:31 -0400] pwf: not sure i like this better than the old method of installation
[2013-05-22 20:13:42 -0400] gkarekinian: Yeah it's pretty confusing, that's why I added some basic documentation when I had to do override some attributes
[2013-05-22 20:13:52 -0400] gkarekinian: Probably still needs more docs
[2013-05-22 20:14:24 -0400] pwf: oooh, we were overriding the configuration attribute
[2013-05-22 20:14:36 -0400] pwf: i'm sure the docs are somewhere, we were just looking at it backwards
[2013-05-22 20:14:43 -0400] pwf: if that link was right we would have found it i think
[2013-05-22 20:16:41 -0400] gkarekinian: Good
[2013-05-22 20:16:48 -0400] gkarekinian: http://tickets.opscode.com/browse/COOK-3028
[2013-05-22 20:17:42 -0400] pwf: many thanks!
[2013-05-22 20:31:16 -0400] eliklein: i don't suppose anyone knows why the rsyslog cookbook writes out a default ubuntu config to all platforms?
[2013-05-22 20:31:24 -0400] eliklein: (including rhel variants)
[2013-05-22 20:32:16 -0400] pwf: gkarekinian: so if we're using chef to install a chef server, could we just use the cookbook you linked me to instead of the one in opscode-cookbooks (which seems to be a wrapper for the other one...?)
[2013-05-22 20:32:26 -0400] pwf: i want to override some of the nginx templates
[2013-05-22 20:33:33 -0400] sprack: is there a native provider that calls restorecon for selinux?
[2013-05-22 20:33:35 -0400] gkarekinian: pwf: I don't know why things are done this way, sorry
[2013-05-22 20:33:58 -0400] ieldib: elikein,  why don't you adjust the centos/rhel template to your liking
[2013-05-22 20:35:44 -0400] pwf: ok. i'll give it a shot and see if it Just Works
[2013-05-22 20:40:12 -0400] gkarekinian: Oh by the way the tricky part is that the attributes in https://github.com/opscode-cookbooks/chef-server are node['chef-server'] but node['chef_server'] in https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/chef-server/attributes/default.rb
[2013-05-22 20:40:41 -0400] gkarekinian: So make sure you override with a dash, not an underscore...
[2013-05-22 20:42:12 -0400] pwf: yeah that's what that wacky file is doing that i first linked
[2013-05-22 20:42:24 -0400] seubert: oh hahaha
[2013-05-22 20:42:33 -0400] seubert: why
[2013-05-22 20:44:15 -0400] rava: keep getting nameerrors for an lwrp i'm writing: cannot find a resource for version on ubuntu version 11.10
[2013-05-22 20:44:22 -0400] rava: can't seem to find exactly which line is causing this to fail
[2013-05-22 20:56:27 -0400] rava: any reason an lwrp resource definition attribute would be raising a nilclass exception?
[2013-05-22 20:56:59 -0400] rava: the attribute's defined in the resource definition, but still seems ot want to throw that error
[2013-05-22 21:00:05 -0400] rava: the @new_resource is available when load_current_resource is called right?
[2013-05-22 21:11:34 -0400] rava: argh, i created an attr_accessor for a resource attribute, but now am getting wrong number of arguements for it
[2013-05-22 21:11:51 -0400] rava: shouldn't it be passed the value passed in when using the lwrp?
[2013-05-22 21:12:16 -0400] bdha: Is there a sane way for updating automatic attributes in ohai? (Need to ensure that fqdn is set to the chef nodename, not empty or something else.)
[2013-05-22 21:12:29 -0400] bdha: (hostname is set during the run, but I'd rather not have to run chef twice to get the proper hostname...)
[2013-05-22 21:14:05 -0400] siezer: bdha try the fqdn cookbook
[2013-05-22 21:14:42 -0400] rava: anyone about i can jam on lwrp writing with?
[2013-05-22 21:16:09 -0400] bdha: siezer: ah, reload_ohai. Looks useful. Thanks!
[2013-05-22 21:22:43 -0400] siezer: np
[2013-05-22 21:30:41 -0400] rava: reading the docs on custom lwrps, and it reads that when running in why_run supported mode: "does not include mapping each resource to a provider or configuring any part of the system."
[2013-05-22 21:30:51 -0400] rava: does that mean values passed ot the light weight resource aren't passed to providers?
[2013-05-22 21:47:14 -0400] nicgrayson: I'm trying to get chefspec to work on a wrapper for the nginx cookbook. Getting this error about an ohai attr. https://gist.github.com/nicgrayson/44e729f467f52246bd93
[2013-05-22 21:47:47 -0400] nicgrayson: i've tried doing node.set['ohai']['plugins'] but that doesn't seem to work
[2013-05-22 21:47:59 -0400] nicgrayson: any ideas?
[2013-05-22 21:51:08 -0400] juliancd1nn: nicgrayson: suspect it's not node['ohai'] that's nil but one of the config elements
[2013-05-22 21:51:21 -0400] juliancd1nn: are you fauxhai-ing out set of automatic attributes?
[2013-05-22 21:51:27 -0400] juliancd1nn: s/set/a set/
[2013-05-22 21:52:41 -0400] helllen_: helllo
[2013-05-22 21:52:54 -0400] helllen_: how do I log to syslog instead of local file ?
[2013-05-22 21:53:12 -0400] nicgrayson: juliancd1nn: i'm not fauxhaiing anything
[2013-05-22 21:53:27 -0400] nicgrayson: juliancd1nn: should i add them?
[2013-05-22 21:55:18 -0400] helllen_: it looks it has an option syslog
[2013-05-22 21:55:27 -0400] helllen_: but it doesn't work
[2013-05-22 21:56:48 -0400] nicgrayson: juliancd1nn: same error after adding ubuntu 12.04 via fauxhai-ing
[2013-05-22 22:00:20 -0400] juliancdunn: nicgrayson: probably need to mock out some of the config stuff, though I'm not sure how to do it myself
[2013-05-22 22:28:47 -0400] thatothermitch: I was poking at the chef-server cookbook ( i.e. https://github.com/opscode-cookbooks/chef-server ), where the readme says "The easiest way to get a Chef Server up and running is to install chef-solo (via the chef-client Omnibus packages) and bootstrap the system using this cookbook"
[2013-05-22 22:29:23 -0400] thatothermitch: this seem vary inconsistent w/ http://docs.opscode.com/install_server.html
[2013-05-22 22:29:33 -0400] thatothermitch: s/very/very/
[2013-05-22 22:33:13 -0400] bbhoss: Is anyone actually using chef server 11.0.8 on ec2? I can't even get it to install on Amazon Linux, or Ubuntu, it always fails with this error: https://gist.github.com/anonymous/e40e65364c8e10e66fed
[2013-05-22 22:35:03 -0400] moxford: Hihi.
[2013-05-22 22:35:13 -0400] thatothermitch: bbhoss: what happens when you run the curl command by hand?
[2013-05-22 22:35:32 -0400] moxford: With Chef11 having an Erlang core, does that mean that we can use an Erlang DSL instead of the Ruby DSL . (hoping yes!)
[2013-05-22 22:36:00 -0400] silk: curl exit code 22, corresponds to an HTTP status of >=400
[2013-05-22 22:36:16 -0400] bbhoss: thatothermitch: it just instantly completes, -vv shows a 500 error
[2013-05-22 22:36:17 -0400] thatothermitch: i would check which server you're actually connecting to
[2013-05-22 22:36:25 -0400] bbhoss: can't find any meaningful errors in the logs eitehr
[2013-05-22 22:36:39 -0400] thatothermitch: i had a similar issue w/ a proxy configuration
[2013-05-22 22:36:58 -0400] thatothermitch: not sure what you env looks like
[2013-05-22 22:37:08 -0400] thatothermitch: (mine was also a 404  so YMMV)
[2013-05-22 22:37:28 -0400] bbhoss: it's a brand new amazon linux instance, or an ubuntu instance
[2013-05-22 22:37:50 -0400] bbhoss: i had to add stuff to get it to recognize amazon linux as something that can do runit, but then I got the same error as ubuntu
[2013-05-22 22:37:54 -0400] thatothermitch: i confess that i'm not super familiar with EC2 or the specifics o the ubuntu AMIs
[2013-05-22 22:38:10 -0400] bbhoss: the only thing I can think of that is non-standard is that I have this setup in a VPC, and it doesn't have a public ip address
[2013-05-22 22:38:22 -0400] bbhoss: i wouldnt think that would matter though
[2013-05-22 22:38:42 -0400] thatothermitch: hopefully not!
[2013-05-22 22:38:43 -0400] bbhoss: i'll launch a normal instance and see then
[2013-05-22 22:38:51 -0400] dpollen: Hey does anyone know if it's possible to stop a service while running a command and then start it immediately after? Would one use callbacks?
[2013-05-22 22:49:32 -0400] bluekelp: dpollen: what do you mean "running a comment" ? you mean a chef resource or similar?
[2013-05-22 22:50:06 -0400] coderanger: bluekelp: service '...' do action :stop end; execute 'whatever'; service ... do action :start end
[2013-05-22 22:50:18 -0400] coderanger: Er sorry, for dpollen
[2013-05-22 22:56:55 -0400] damian_: anyone have experience with teh s3_file LWRP?  it doesnt seem to notify properly
[2013-05-22 22:59:24 -0400] coderanger: moxford: On the plus side, I'm in here too :)
[2013-05-22 22:59:33 -0400] moxford: hah
[2013-05-22 22:59:40 -0400] moxford: Gotcha
[2013-05-22 23:00:33 -0400] coderanger: damian_: Try https://github.com/lamont-granquist/s3_file
[2013-05-22 23:00:52 -0400] coderanger: damian_: One of our devs spent some time cleaning it up, not sure whats going to happen with the code
[2013-05-22 23:01:08 -0400] damian_: awesome, ill give that one a shot
[2013-05-22 23:03:11 -0400] bluekelp: do ruby_blocks' code have access to the libraries/*.rb of the cookbook?
[2013-05-22 23:03:35 -0400] coderanger: bluekelp: library files are loaded and run before any recipe code, so yes?
[2013-05-22 23:04:22 -0400] dpollen: @coderanger don't the 2 services of the same name clash?
[2013-05-22 23:04:49 -0400] coderanger: dpollen: 'no'
[2013-05-22 23:05:14 -0400] coderanger: dpollen: The exact semantics of duplicate resources with the name (type, name) are complex and usually awful
[2013-05-22 23:05:15 -0400] coderanger: :(
[2013-05-22 23:05:18 -0400] dpollen: @coderanger ah ok cheers!
[2013-05-22 23:05:40 -0400] coderanger: basically the second one creates a new entry in the resourcecollection, but inherits the previous one's internal state
[2013-05-22 23:05:51 -0400] damian_: @coderanger  NoMethodError: undefined method `use_etag' for Chef::Resource::RemoteFile
[2013-05-22 23:06:08 -0400] dpollen: @coderanger hmm because that's what I tried initially but it didn't seem to work difficult to tell for sure though
[2013-05-22 23:06:22 -0400] coderanger: damian_: What chef rev are you running? lamont's branch might assume something bleeding edge
[2013-05-22 23:06:50 -0400] damian_: owow, this host is old, running 10.16 heh
[2013-05-22 23:06:59 -0400] damian_: i should prolly update that.....
[2013-05-22 23:06:59 -0400] coderanger: damian_: definitely no go :)
[2013-05-22 23:07:46 -0400] coderanger: dpollen: The better answer is Chef isn't great at non-idempotent tasks, and something like that isn't really about state convergence
[2013-05-22 23:08:07 -0400] coderanger: dpollen: So you might want to hide it inside and LWRP or something so it 'looks convergent'
[2013-05-22 23:09:02 -0400] dpollen: coderanger: That's actually a pretty good idea. Essentially it's to conserve RAM so the commands are able to run. :|
[2013-05-22 23:10:39 -0400] damian_: coderanger: same error after updating to 11.4.4.  I am on hosted chef server, could that be a issue?
[2013-05-22 23:11:14 -0400] coderanger: damian_: Nah, might just be relying on something only changed in master, which would also explain why we haven't done anything with that code yet :)
[2013-05-22 23:11:23 -0400] coderanger: Might have let you on a wild goose chase,s orry
[2013-05-22 23:11:42 -0400] kenke: Hi all, is there a built-in dashboard function in chef? Really want to have a visual way to let clients know what is done on a specific node
[2013-05-22 23:11:59 -0400] dpollen: kenke: on the client or the server?
[2013-05-22 23:12:12 -0400] damian_: coderanger: no worries, it happens.  just annoying since the s3_file is *exactly* what i need to make something work heh
[2013-05-22 23:12:53 -0400] coderanger: kenke: There is in the new webui2 interface, however the reporting subsystem is in limited closed beta right now
[2013-05-22 23:13:24 -0400] coderanger: kenke: Check out the recording of Chris Brown's keynote from ChefConf 2013 to see a demo of it in action
[2013-05-22 23:13:56 -0400] kenke: that is a good news for me
[2013-05-22 23:14:31 -0400] coderanger: kenke: For the non-reporting/dashboard features, you can try out the live beta on https://preview.opscode.com/ too
[2013-05-22 23:17:45 -0400] stormerider: coderanger: ooo, that's shiny :)
[2013-05-22 23:17:57 -0400] kenke: the live beta looks awesome, I like it better
[2013-05-22 23:18:04 -0400] coderanger: stormerider: Thanky
[2013-05-22 23:18:28 -0400] coderanger: Be sure send feedback so we can make it even better, got a big bug-fix push coming next week hopefully :)
[2013-05-22 23:19:00 -0400] coderanger: (assuming I don't spend another few days battling bundler and git merge)
[2013-05-22 23:19:58 -0400] kenke: heh
[2013-05-22 23:20:25 -0400] stormerider: i need to sit down and actually do stuff with my hosted chef setup vs. spending all my chef time on my work config :)
[2013-05-22 23:20:25 -0400] stormerider: is that something that will trickle down into the OSE server or be just for hosted/private chef?
[2013-05-22 23:21:30 -0400] stormerider: router just rebooted, not sure if my question went through or not
[2013-05-22 23:22:07 -0400] coderanger: stormerider: Just OHC/OPC
[2013-05-22 23:22:17 -0400] stormerider: *nods*
[2013-05-22 23:22:41 -0400] coderanger: For new things like reporting and pushy, we will release the basic API primitives to the open-source codebase though
[2013-05-22 23:22:43 -0400] kenke: hi ranger, what is the best way to visualize the converge status or progress of node ?
[2013-05-22 23:23:05 -0400] coderanger: kenke: Currently your only real option is using reporting handlers at the start and end
[2013-05-22 23:23:24 -0400] coderanger: the new reporting system allows for much more fine-grained instrumentation though :)
[2013-05-22 23:49:10 -0400] aslan: hi guys... i have provider that has to run during resource collection step ... so in the recipe i set it to run with like e.run_action(:set)
[2013-05-22 23:50:15 -0400] aslan: it is running but i think it is still running in the same order as before
[2013-05-22 23:50:30 -0400] aslan: is there way to debug this?
[2013-05-22 23:50:59 -0400] thatothermitch: is :set the appropriate acton?
[2013-05-22 23:51:54 -0400] thatothermitch: also did you set action to :nothing in the resource block (to prevent it from running normally)?
[2013-05-22 23:52:18 -0400] aslan: thatothermitch: set is what i have defined in my provider
[2013-05-22 23:52:41 -0400] aslan: thatothermitch: i did set the action to :nothing in the resource block
[2013-05-22 23:52:55 -0400] thatothermitch: ok, well those were my two ideas sorry : /
[2013-05-22 23:53:53 -0400] coderanger: aslan: can you pastebin the code?
[2013-05-22 23:53:56 -0400] aslan: thatothermitch: thanks any ways. ... do you know how to debug this? i mean if i put logging statements would that show any thing?
[2013-05-22 23:54:02 -0400] aslan: coderanger: yeah sure
[2013-05-22 23:54:08 -0400] aslan: coderanger: give me a sec
[2013-05-22 23:54:27 -0400] thatothermitch: unfortunately not  i've tried to avoid that approach
[2013-05-22 23:56:02 -0400] aslan: coderanger: here it is https://gist.github.com/Aslan/5631854

[2013-05-02 00:00:06 -0400] eightbits: yfeldblum: Yes.  It is registered in DNS and resolves.
[2013-05-02 00:00:07 -0400] monokrome: or set attributes in a recipe?
[2013-05-02 00:01:00 -0400] yfeldblum: monokrome, you cannot, because roles are a thin ruby DSL atop *static data*
[2013-05-02 00:01:25 -0400] monokrome: yfeldblum: Then I guess that's what my "or" leads from then
[2013-05-02 00:01:43 -0400] yfeldblum: monokrome, you can set attributes in a recipe like this: `node.default["my_cookboo"]["my_recipe"]["my_attribute"] = something`
[2013-05-02 00:01:55 -0400] monokrome: hmm okay
[2013-05-02 00:01:57 -0400] monokrome: thanks :)
[2013-05-02 00:02:21 -0400] eightbits: spheromak - I'll try using the IP instead of hostname.
[2013-05-02 00:07:02 -0400] DaveStern: hrmm, further poking around the my.cnf as was suggested, I see "bind-address            = " which looks wrong
[2013-05-02 00:07:37 -0400] DaveStern: I'm not using any customizations, so it should be the default of "default['mysql']['bind_address']               = attribute?('cloud') ? cloud['local_ipv4'] : ipaddress", which should give me an IP address, right?
[2013-05-02 00:08:14 -0400] DaveStern: I could force that manually in the node and might if that fixes this, but why would the default not be giving me my IP address there?
[2013-05-02 00:09:58 -0400] Majost: yfeldblum: Does that work within the provider?
[2013-05-02 00:11:13 -0400] Majost: actually, I am beginning to realized its more like lines 19-29 on that library
[2013-05-02 00:13:36 -0400] wc-: I am trying to use the ufw cookbook and i am getting this error
[2013-05-02 00:13:37 -0400] wc-: Node attributes are read-only when you do not specify which precedence level to set. To set an attribute use code like `node.default["key"] = "value"'
[2013-05-02 00:13:53 -0400] wc-: it looks like it is a problem with the cookbook, not the override attributes i have set in my role?
[2013-05-02 00:14:16 -0400] wc-: any idea what this means?
[2013-05-02 00:14:58 -0400] wc-: the offending line is this: node['firewall']['state'] = new_state
[2013-05-02 00:16:07 -0400] Majost: is new_state a string?
[2013-05-02 00:16:16 -0400] wc-: ya looks like it
[2013-05-02 00:16:19 -0400] wc-: new_state = node['firewall']['rules'].to_s
[2013-05-02 00:16:49 -0400] mindlace: ok this is a basic q - how do I bootstrap a node "automatically"? i.e. as part of the standard deployment instead of via knife bootstrap
[2013-05-02 00:17:22 -0400] Majost: wc-: Are you trying to set new_state in your recipe and reference it in your role?
[2013-05-02 00:17:45 -0400] Majost: If that is the case, it wont work.
[2013-05-02 00:17:49 -0400] wc-: in my role i override the firewall rules
[2013-05-02 00:17:54 -0400] wc-: which is a dict i think
[2013-05-02 00:18:19 -0400] wc-: this is the first time im running it, it might not even have a state?
[2013-05-02 00:18:22 -0400] wc-: if ufw wasnt installed
[2013-05-02 00:18:24 -0400] Majost: right, but if the value you are trying to set in your role is not already expanded, it wont work.
[2013-05-02 00:18:26 -0400] wc-: just thinking outloud
[2013-05-02 00:19:22 -0400] Majost: you can define the value as a variable in the cookbook, but not in the role.
[2013-05-02 00:20:04 -0400] wc-: on a side note, is there an easier way to test this cookbook without uploading it and bootstrapping my server?
[2013-05-02 00:20:18 -0400] Majost: wc-: vagrant
[2013-05-02 00:20:58 -0400] Majost: you can use vagrant to bring up local VMs or linux containers to test against
[2013-05-02 00:21:15 -0400] Majost: though, I am having issues getting the lxc bits working personally.
[2013-05-02 00:21:47 -0400] rb1980: okay, in case anyone was following: my issue was resolved by explicitly defining provider Chef::Provider::Service::Upstart
[2013-05-02 00:21:48 -0400] wc-: definitely just blocked ssh on my server
[2013-05-02 00:21:50 -0400] wc-: woops
[2013-05-02 00:21:55 -0400] rb1980: which seems a little wonky, but whatever
[2013-05-02 00:21:57 -0400] Majost: heh
[2013-05-02 00:22:00 -0400] wc-: lol
[2013-05-02 00:22:12 -0400] wc-: which is exactly why i started playing with chef in the first place, now just blow it away and start again
[2013-05-02 00:22:15 -0400] Majost: you only need to do it once, and you learn to never do it again.
[2013-05-02 00:22:32 -0400] wc-: this is the 2nd time today
[2013-05-02 00:23:57 -0400] Majost: yfeldblum: the mysql example from the database cookbook just leads me to more questions. heh
[2013-05-02 00:24:34 -0400] Majost: yfeldblum: specifically, I don't see how the gem is actually installed in the block of code referenced.
[2013-05-02 00:25:53 -0400] Majost: yfeldblum: perhaps context of what I am doing might help: https://github.com/rhass/openssl/blob/key-mgmt/providers/ssl_keypair.rb
[2013-05-02 00:26:35 -0400] Majost: This doesn't actually work yet though, because chef_gem is not usable from within the provider
[2013-05-02 00:28:43 -0400] Majost: and chef_gem doesn't seem to have a mixin I can include
[2013-05-02 00:32:37 -0400] wc-: hmm bootstrap is bombing out when trying to create the client node now, a 403 forbidden error
[2013-05-02 00:32:42 -0400] wc-: my node list is empty
[2013-05-02 00:33:12 -0400] eightbits: I should also note that in this environment, I am using the VM as client, server, and workstation, so knife is running directly on the VM it is talking to.
[2013-05-02 00:33:26 -0400] wc-: oh there was a client with the same name, so i have to delete the node and client
[2013-05-02 00:34:20 -0400] wc-: it really is amazing to run chef for the first time on a new box with all my recipes, thanks for the help everyone
[2013-05-02 00:36:24 -0400] DaveStern:  for anyone who was paying attention, after a dinner break I did get mysql::server running, the key was to explicitly set "bind_address" on the node rather than trying to rely on the default attribute
[2013-05-02 00:37:18 -0400] DaveStern: I am not sure why the default didn't properly pick up an ipaddress, could that be because I'm doing a chef-solo thing here?
[2013-05-02 01:14:28 -0400] monokrome: What is the "right way" to access node attributes in my recipe?
[2013-05-02 01:15:15 -0400] monokrome: I see that there's a node.set['attribute'] = 'x'
[2013-05-02 01:15:20 -0400] monokrome: but don't see anything about how to get them
[2013-05-02 01:16:49 -0400] miah: node['attribute']
[2013-05-02 01:16:54 -0400] monokrome: I tried something like node['mysql']['x'] but it doesn't exist
[2013-05-02 01:17:00 -0400] monokrome: That's what I thought :(
[2013-05-02 01:17:26 -0400] miah: if you set attribute to 'x' then 'attribute' = x, but ['attribute']['x'] won't exist
[2013-05-02 01:17:40 -0400] miah: ['attribute'] will return 'x'
[2013-05-02 01:17:56 -0400] monokrome: I actually did
[2013-05-02 01:18:09 -0400] monokrome: node.default['mysql']['max_allowed_packets'] = '16M'
[2013-05-02 01:18:11 -0400] monokrome: for instance
[2013-05-02 01:18:13 -0400] monokrome: and later I want to use
[2013-05-02 01:18:21 -0400] monokrome: node['mysql']['max_allowed_packets']
[2013-05-02 01:18:49 -0400] monokrome: I set the node.default part in mycookbook/attributes/default.rb
[2013-05-02 01:25:06 -0400] Majost: miah: do you have some time to help me with an LWRP?
[2013-05-02 01:35:44 -0400] Majost: https://github.com/rhass/openssl/blob/COOK-847/providers/ssl_keypair.rb
[2013-05-02 01:35:56 -0400] Majost: just trying to figure the chef_gem part out
[2013-05-02 01:37:07 -0400] miah: i would <3 to help. i dont have time right this moment though.
[2013-05-02 01:37:13 -0400] Majost: np
[2013-05-02 01:37:16 -0400] miah: chef_gem makes everything difficult :/
[2013-05-02 01:37:20 -0400] Majost: heh
[2013-05-02 01:38:26 -0400] miah: what i would do is create a method that sets up a chef_gem resource
[2013-05-02 01:38:34 -0400] miah: and sets the action to :nothing
[2013-05-02 01:39:19 -0400] miah: and then send it a install, but make sure that this happens before the other stuff in your action_create
[2013-05-02 01:40:02 -0400] miah: its honestly easier if you deal with things without creating resources, but the whole point of chef is resources :P
[2013-05-02 01:40:15 -0400] Majost: well, the issue is the provider is entirely using methods in the certificate_authority gem
[2013-05-02 01:41:13 -0400] Majost: but I have a chicken and egg issue, where I can't use the gem until it is installed -- and the default recipe may not be invoked before the provider
[2013-05-02 01:41:22 -0400] Majost: unless I am wrong about that
[2013-05-02 01:43:29 -0400] miah: yup
[2013-05-02 01:43:50 -0400] miah: you need to manage the gem installation as part of your lwrp
[2013-05-02 01:43:54 -0400] miah: _not recipe_
[2013-05-02 01:44:01 -0400] Majost: yeah, thats what I thought
[2013-05-02 01:44:30 -0400] miah: i havent done too much in this area (rp's) with gems though
[2013-05-02 01:45:16 -0400] Majost: Is the chef-dev mailing list appropriate for this sort of inquiry?
[2013-05-02 01:46:47 -0400] miah: yes
[2013-05-02 02:01:18 -0400] monokrome: cookbooks/mycookbook/attributes/default.rb doesn't get applied by default?
[2013-05-02 02:01:28 -0400] monokrome: My node says it has no attributes and fails trying to access one
[2013-05-02 02:06:39 -0400] yfeldblum: Majost, the calling recipe is required to install the gem
[2013-05-02 02:18:29 -0400] rayrod2030: anybody deploying via chef with gradle?
[2013-05-02 02:42:33 -0400] basic`: i'm struggling with probably a simple chef concept
[2013-05-02 02:43:20 -0400] basic`: is the preferred way to define things like an nginx vhost to create or use an existing cookbook for the application you are deploying?  And use the nginx_site + template for the virtualhost in the application cookbook?
[2013-05-02 02:43:36 -0400] basic`: and then define things like the docroot and server_name in a role?
[2013-05-02 04:09:43 -0400] jtimberman: basic`: use nginx_site and the template in your own cookbok
[2013-05-02 04:10:48 -0400] basic`: jtimberman: would you put this in a cookbook per app, "base", or does it not really matter what cookbook it goes in as long as it's one of our own?
[2013-05-02 04:12:03 -0400] basic`: i went ahead and created one for the project, and created a recipe for "static" servers which includes the nginx template + site.  Does that seem sane?
[2013-05-02 04:14:18 -0400] basic`: so cookbooks/orvsdweb/recipes/static.rb
[2013-05-02 04:14:39 -0400] miah: i modified the application_nginx cookbook to take my templates =)
[2013-05-02 06:54:17 -0400] dkannan: crucially: hi. the chef cookbook you had demoed at chefconf - to lint ulimits. did you release it ?
[2013-05-02 06:58:44 -0400] NagaLakshmi: Hi
[2013-05-02 06:59:09 -0400] NagaLakshmi: I have a problem in using the knife commands as a startup command
[2013-05-02 08:17:28 -0400] dorongutman: hello, I'm learning vagrant and chef (solo), and I'm trying to setup a basic LAMP stack (ubuntu and php). however, I don't understand how I define the virtual host for apache2
[2013-05-02 08:18:01 -0400] dorongutman: where do I put the file with "web_app" definition (web_app "my_site" do .) and how do I configure vagrant to use that file ?
[2013-05-02 08:59:39 -0400] linuxboy: hi guys
[2013-05-02 08:59:54 -0400] linuxboy: I seem to have a problem where chef-client (in daemon mode) is forgetting the FQDN
[2013-05-02 09:00:11 -0400] linuxboy: the only solution seems to be restarting chef-client
[2013-05-02 09:00:15 -0400] linuxboy: does anyone know about this?
[2013-05-02 09:01:38 -0400] linuxboy: it seems to completely forget the FQDN, doesn't even make it blank
[2013-05-02 09:01:38 -0400] linuxboy: http://pastebin.com/U3DkdwEd
[2013-05-02 09:01:40 -0400] linuxboy: see server2
[2013-05-02 09:13:12 -0400] ishandwivedi: hello?
[2013-05-02 09:15:15 -0400] ishandwivedi: anyone here?
[2013-05-02 09:34:24 -0400] drrk: no, noone is here
[2013-05-02 09:45:31 -0400] ishandwivedi: I need help with Chef
[2013-05-02 09:45:40 -0400] ishandwivedi: Could anyone help me out with that?
[2013-05-02 09:48:06 -0400] flaccid: i need help with life
[2013-05-02 09:48:52 -0400] ishandwivedi: that's ok flaccid- I can help you out there :p
[2013-05-02 09:48:59 -0400] ishandwivedi: so long as you help me out with chef
[2013-05-02 09:49:22 -0400] flaccid: you won't get help by asking like that
[2013-05-02 09:49:37 -0400] ishandwivedi: .....well I did ask nicely :)
[2013-05-02 09:49:41 -0400] ishandwivedi: and I'm just kidding
[2013-05-02 09:49:56 -0400] flaccid: i guess you didn't get my point
[2013-05-02 09:50:00 -0400] ishandwivedi: anyways, if you have time and can help me out- it would be much appreciated
[2013-05-02 09:50:17 -0400] flaccid: don't ask to ask / be so vague
[2013-05-02 09:50:22 -0400] flaccid: simply be specific on what you need
[2013-05-02 09:50:58 -0400] ishandwivedi: I need help with basic understanding- my chef server is being used to deploy OpenStack components as I understand it
[2013-05-02 09:51:21 -0400] ishandwivedi: but what version of Compute/Controller is being deployed- how do I find that out? Grizzly/Folsom.. etc
[2013-05-02 09:51:52 -0400] ishandwivedi: Or is the version dependent on the git repositories I have stored in the Workstation node (As shown in the diagrams)
[2013-05-02 09:52:30 -0400] flaccid: sounds like you need openstack help
[2013-05-02 09:52:56 -0400] ishandwivedi: Have read up on OpenStack
[2013-05-02 09:52:58 -0400] ishandwivedi: need help with Chef
[2013-05-02 09:53:12 -0400] flaccid: still very vague if you think that is about chef
[2013-05-02 09:53:26 -0400] ishandwivedi: hmm
[2013-05-02 09:53:54 -0400] flaccid: time to clock off. good luck. #openstack
[2013-05-02 10:23:58 -0400] masterkorp: http://devopsreactions.tumblr.com/
[2013-05-02 10:40:32 -0400] nacer: hello World
[2013-05-02 10:41:03 -0400] nacer: they is a keynote on the future version of chef ?
[2013-05-02 10:41:07 -0400] Flexa: anyone know the status of this bug? causing me a headache! https://tickets.opscode.com/browse/COOK-2675
[2013-05-02 10:43:25 -0400] jonlives: Flexa: it looks to be unassigned with no comments, so I'm guessing progress isn't very far along.
[2013-05-02 10:43:41 -0400] Flexa: excellent
[2013-05-02 10:44:47 -0400] zts: saving the error as a word document is a good way to reduce the number of people who can look at it
[2013-05-02 10:45:01 -0400] zts: so a comment on the ticket with the plaintext version wouldn't hurt
[2013-05-02 10:46:12 -0400] pixie791: hi all
[2013-05-02 10:46:27 -0400] pixie791: does anyone know what the issue is here : ? FATAL: NoMethodError: undefined method `run_state' for Chef::Resource::RunitService
[2013-05-02 11:38:48 -0400] nejsum: Hi, has someone tried installing windows applications that needed a GUI/dialogs to install?
[2013-05-02 11:55:25 -0400] pxg: Hello, apologies if this is a n00b question but I couldn't find an answer googling. When I provision a new node how do I control which version of Chef client gets installed on a node?
[2013-05-02 11:55:58 -0400] pxg: I have provisioning errors with chef-client 11.4.4 but 11.4.0 works for me
[2013-05-02 12:29:32 -0400] teukka: pxg: assuming you are using `knife bootstrap` you can pass the wanted version with `--bootstrap-version`
[2013-05-02 12:30:09 -0400] teukka: pxg: `knife bootstrap -h` lists the options
[2013-05-02 12:30:21 -0400] pxg: Yes I am using bootstrap, thanks I had just been reading up about that.
[2013-05-02 12:44:49 -0400] MattJ: For the record, I managed to boil down the problem I've had the past two days that nobody here seems able to answer, to this simple recipe: http://serverfault.com/questions/504450/how-to-force-actions-on-up-to-date-resources-in-chef
[2013-05-02 12:52:59 -0400] michaelhart: Can I get chef-client to upgrade itself? I was modifying the chef client cookbook to do the upgrade (dpkg -i chef) which uninstalls 10.18 and installs whatever version I tell it to but then I realized I'm uninstalling the binary that's initiating the chef run
[2013-05-02 13:04:47 -0400] s2r2: michaelhart: does that matter?  It's run from memory, right?
[2013-05-02 13:05:34 -0400] michaelhart: I don't know, in the process of trying it. I _hope_ it's from memory, but was wondering if anyone has tried it. I've got >100 systems to upgrade, not keen on doing it manually.
[2013-05-02 13:22:50 -0400] teukka: michaelhart: check out omnibus_updater cookbook. works great
[2013-05-02 13:23:59 -0400] teukka: that installs the new package now as a last thing on the run
[2013-05-02 13:24:37 -0400] c0ff33: teukka - any tips for keeping your chef-server updated? i'm not sure that I understand the best way to do that
[2013-05-02 13:25:14 -0400] teukka: c0ff33: I've updated it only manually...
[2013-05-02 13:25:26 -0400] michaelhart: sweet, thank you, I hadn't seen that one before.
[2013-05-02 13:26:18 -0400] jwitrick: Is there a way to use the log resource within a ruby block resource
[2013-05-02 13:27:34 -0400] teukka: michaelhart: there seemed to be problems with the timing: https://github.com/hw-cookbooks/omnibus_updater/issues/10
[2013-05-02 13:28:11 -0400] michaelhart: lol funny that's what i was trying to avoid.
[2013-05-02 13:29:02 -0400] s2r2: Is it possible to tell minitest-chef-handler to ignore some cookbook's tests?  Using the "application/library cookbook"-pattern, some of the tests of the "library cookbook" have to fail...
[2013-05-02 13:30:15 -0400] teukka: jwitrick: should be possible via notifications. but can't you use Chef::Log.info etc. directly?
[2013-05-02 13:30:45 -0400] jwitrick: teukka: darn. Oh well I will figure out another way. thanks
[2013-05-02 13:33:13 -0400] yfeldblum: jwitrick, why are you using the log resource?
[2013-05-02 13:46:16 -0400] jwitrick: yfeldblum: so I have a lwrp that is essentially a while loop with a sleep. and I wanted a message to be logged each time the loop repeats
[2013-05-02 13:47:16 -0400] yfeldblum: jwitrick, that doesn't explain the log *resource* or trying to use it inside a ruby_block block
[2013-05-02 13:48:08 -0400] jwitrick: yfeldblum: Ok. I was simply wanting to log a message, and the log resource is the way to do it. correct ?
[2013-05-02 13:48:16 -0400] yfeldblum: jwitrick, no it's not
[2013-05-02 13:48:31 -0400] yfeldblum: jwitrick, the logger is the way to do it
[2013-05-02 13:48:45 -0400] yfeldblum: jwitrick, the logger is `Chef::Log`
[2013-05-02 13:50:03 -0400] jwitrick: hum. ok i wil look into that. thanks
[2013-05-02 13:50:51 -0400] yfeldblum: jwitrick, http://hastebin.com/womahuhivo.rb
[2013-05-02 13:52:12 -0400] jwitrick: yfeldblum: awesome that was just want i was looking for. thanks
[2013-05-02 13:53:54 -0400] Flexa: hey guys, can I use knife to show me what versions of chef all my infrastructure is running?
[2013-05-02 13:56:58 -0400] bflad: Flexa: http://dougireton.com/blog/2013/01/19/get-chef-clients-by-version/
[2013-05-02 13:57:13 -0400] Flexa: great thx bflad
[2013-05-02 13:57:23 -0400] Flexa: was going to knife ssh "name:*" "sudo chef-solo -v"
[2013-05-02 13:57:47 -0400] troessner: hey guys, i'm a little bit stuck right now. trying to get "sidekiq" to run on amazons opsworks i get:  Chef::Exceptions::CookbookNotFound - Cookbook sidekiq
[2013-05-02 13:57:59 -0400] troessner: the cookbook repo is public: https://github.com/HitFox/chef-recipes
[2013-05-02 13:58:09 -0400] troessner: and I followed the chef directory structure
[2013-05-02 13:58:20 -0400] troessner: any idea on how to troubleshoot this further?
[2013-05-02 13:58:56 -0400] troessner: in opswork i just added the repo url and "sidekiq::default" as a recipe
[2013-05-02 13:59:38 -0400] troessner: i assume I'm doing something wrong in chef, not in opswork, but unfortunately i have no idea
[2013-05-02 14:07:52 -0400] jwilf: hey guys in chef 11 webui, status page says 500 internal server error ERROR: cannot load such file -- tzinfo/definitions/Etc/UTC
[2013-05-02 14:08:05 -0400] jwilf: my server is on UTC
[2013-05-02 14:08:13 -0400] jwilf: i think this is a rails bug
[2013-05-02 14:12:04 -0400] Flexa: how are people upgrading chef versions in their infrastructure? shell loops with knife? :/
[2013-05-02 14:17:48 -0400] teukka: Flexa: check out omnibus_updater cookbook. seems to be faq of the day ;)
[2013-05-02 14:26:17 -0400] michaelhart: We all got back from #ChefConf and all want chef 11 :)
[2013-05-02 14:29:25 -0400] adamjk-dev: any foodcritic gurus here?
[2013-05-02 14:29:37 -0400] adamjk-dev: I am wondering why I am getting FC014 on the following code
[2013-05-02 14:29:42 -0400] adamjk-dev: ruby_block "Create project loader" do
[2013-05-02 14:29:42 -0400] adamjk-dev:   block do
[2013-05-02 14:29:43 -0400] adamjk-dev:     RundeckServer.create_project_loader
[2013-05-02 14:29:43 -0400] adamjk-dev:   end
[2013-05-02 14:29:43 -0400] adamjk-dev: end
[2013-05-02 14:29:56 -0400] adamjk-dev: it is only making 1 call to a library
[2013-05-02 14:41:22 -0400] woltage: Someone using berkshelf? How can I upgrade depency cookbooks I'm only getting chef-client version 2.2.0, but 2.2.2 is available.
[2013-05-02 14:48:13 -0400] george_: hi, i am unable to find a rpm for chef server 10 anywhere
[2013-05-02 14:48:39 -0400] george_: does opscode host chef server 10 downloads anywhere? can't find it on the omnibus s3
[2013-05-02 14:54:33 -0400] siezer: george_ you'd have to use the ubuntu packages, or install the stack from gems on rhel/centos
[2013-05-02 14:56:59 -0400] jpluscplusm: hey all - is there a page detailing where to get historic versions of the omnibus installer?
[2013-05-02 14:57:39 -0400] jpluscplusm: I don't want to document a process for our people which pulls in the latest release each time, for obvious reasons ...
[2013-05-02 14:58:11 -0400] george_: yes a page with historic versions of omnibus installers will be nice..
[2013-05-02 14:59:05 -0400] george_: thanks siezer, gems seems to be only option now.. i wanted something that would work with the chef-server cookbook though
[2013-05-02 14:59:27 -0400] wedtm: I'm switching from using the standard chef development method to Berkshelf. When I run `berks upload` I get `Ridley::Errors::HTTPBadRequest {"error":["Field 'metadata.name' invalid"]}` after almost every cookbook.
[2013-05-02 14:59:43 -0400] wedtm: This is due to `name <cookbook name>` not being present in the metadata.rb file
[2013-05-02 14:59:47 -0400] jpluscplusm: george_: can you interogate the omnibus S3?
[2013-05-02 15:00:10 -0400] wedtm: My question is, why is this and what is the accepted way to resolve it?
[2013-05-02 15:00:15 -0400] george_: I did, there is no listing for chef server 10
[2013-05-02 15:00:26 -0400] george_: only chef server 11 packages
[2013-05-02 15:00:47 -0400] jpluscplusm: k
[2013-05-02 15:00:49 -0400] siezer: george_ there are no omnibus chef10 packages
[2013-05-02 15:00:56 -0400] wedtm: Do I really have to fork and fix all of those cookbooks, or find alternative repos that have the fixes included? Why are the official chef ones not updated?
[2013-05-02 15:02:04 -0400] siezer: all the easy-to-install, supported, awesome-fun-time, full-stack stuff begins with chef 11.
[2013-05-02 15:02:22 -0400] siezer: wedtm yes you'll need to add a "name" attribute to any cookbooks you use with berkshelf.
[2013-05-02 15:02:57 -0400] wedtm: siezer, gotcha. How should I go about doing that, fork and modify, or find ones that are already modified?
[2013-05-02 15:03:01 -0400] siezer: the cookbooks on github/opscode-cookbooks should have the name attribute. if they dont its a bug
[2013-05-02 15:03:06 -0400] wedtm: Awesome
[2013-05-02 15:03:16 -0400] wedtm: So just supply the git: <repo name> option?
[2013-05-02 15:03:31 -0400] wedtm: If so, is there anyway to default to that?
[2013-05-02 15:03:56 -0400] siezer: berks discourages using git in the Berksfiles (even though you totally can)
[2013-05-02 15:04:12 -0400] wedtm: Oh, okay. I'd like to stay BP as much as possible.
[2013-05-02 15:04:25 -0400] siezer: better pattern is to fork, clone to local FS, edit, point berks at your /local/fs/path
[2013-05-02 15:04:35 -0400] wedtm: Gotcha
[2013-05-02 15:04:40 -0400] siezer: branch, update metadata, send PR
[2013-05-02 15:04:50 -0400] siezer: remove from Berksfile when changes are merged upstream
[2013-05-02 15:05:17 -0400] wedtm: Okay, however the defaults are all pointing to the old API location, not the github account, correct?
[2013-05-02 15:05:36 -0400] wedtm: For example, when using 'depends 'nginx'' in my metadata.rb file, berks upload fails
[2013-05-02 15:05:53 -0400] siezer: did you do a berks install first/
[2013-05-02 15:05:55 -0400] wedtm: but adding cookbook 'nginx', github: 'opscode-cookbooks/nginx' inmy Berksfile makes it work
[2013-05-02 15:06:08 -0400] siezer: weird
[2013-05-02 15:06:08 -0400] wedtm: Hrm
[2013-05-02 15:06:32 -0400] wedtm: Yeah, i installed before upload
[2013-05-02 15:06:52 -0400] wedtm: Uploading nginx (0.101.6) to: 'https://chef.aws.mcservers.org'
[2013-05-02 15:06:53 -0400] wedtm: Ridley::Errors::HTTPBadRequest {"error":["Field 'metadata.name' invalid"]}
[2013-05-02 15:07:14 -0400] siezer: looks like a bug in the nginx cookbook
[2013-05-02 15:07:21 -0400] siezer: sec lemme check it out
[2013-05-02 15:08:07 -0400] siezer: hrm nginx  "1.4.0" has a name attribute
[2013-05-02 15:08:26 -0400] wedtm: aye, I think the odd part is berks installs 1.4.0, and the default installs 0.101.6
[2013-05-02 15:08:29 -0400] siezer: def a berksbug then. try in #berkshelf where the rioters hang out =)
[2013-05-02 15:08:35 -0400] siezer: wait what
[2013-05-02 15:08:59 -0400] siezer: what do you mean "and the default installs 0.101.6
[2013-05-02 15:09:20 -0400] wedtm: just a second, let me get a hastebin for you
[2013-05-02 15:09:42 -0400] wedtm: http://hastebin.com/dogifexaco.bash
[2013-05-02 15:09:58 -0400] siezer: do you maybe have 0.101.6 in your berkshelf/cookbooks dir? there was a bug where it would refuse to grab the latest if there was already a version in the berkshelf
[2013-05-02 15:10:10 -0400] siezer: but I thought that was fixed. lemme look
[2013-05-02 15:10:53 -0400] wedtm: Aye, I do: http://ss.vim.ae/LSb9n.png
[2013-05-02 15:11:30 -0400] wedtm: I'm running Berkshelf 1.4.1
[2013-05-02 15:11:36 -0400] siezer: I think you're hitting this bug
[2013-05-02 15:12:13 -0400] siezer: they did a quazi-code chill around chef-conf to keep surprises to a minimum ... this may have gotten triaged to "fix later"
[2013-05-02 15:12:19 -0400] siezer: its its a known bug for sure
[2013-05-02 15:12:32 -0400] wedtm: Gotcha, it seems to have resolved by me putting the git in there.
[2013-05-02 15:12:44 -0400] wedtm: Let me see if clearing out my berkshelf directory and reinstalling works
[2013-05-02 15:13:06 -0400] siezer: if you don't need the old version of the cookbook in your berkshelf, just delete it and it should pick up the latest
[2013-05-02 15:15:33 -0400] wedtm: siezer: looks like that did it. I do remember doing a gem regenerate_binstubs earlier, perhaps the berks binary got updated from a previous version somehow.
[2013-05-02 15:23:45 -0400] Flexa: hey guys, how can I gsub something like node[ftp1] to five me just ftp1
[2013-05-02 15:24:04 -0400] yfeldblum: Flexa, wat
[2013-05-02 15:24:30 -0400] Flexa: 'node[ftp1]' is a string
[2013-05-02 15:24:39 -0400] Flexa: I want to gsub it so be just ftp1
[2013-05-02 15:25:51 -0400] yfeldblum: Flexa, ('node[ftp1]' =~ /\Anode\[(.+)\]\z/ && $1)
[2013-05-02 15:29:23 -0400] Flexa: yfeldblum: I need to do like
[2013-05-02 15:29:31 -0400] Flexa: nodes = Chef::Search::Query.new.search(:node,"name:*")[0]
[2013-05-02 15:29:42 -0400] Flexa: stripped_nodes = ('nodes' =~ /\Anode\[(.+)\]\z/ && $1) ? :)
[2013-05-02 15:30:16 -0400] yfeldblum: Flexa, then why did you ask for the other thing
[2013-05-02 15:30:26 -0400] Flexa: sorry it was an example
[2013-05-02 15:30:37 -0400] yfeldblum: Flexa, what are you trying to do?
[2013-05-02 15:30:41 -0400] yfeldblum: Flexa, in words, not in code
[2013-05-02 15:31:03 -0400] Flexa: get a list of my nodes and their chef version they are running
[2013-05-02 15:31:17 -0400] Flexa: ftp1 10.24.0
[2013-05-02 15:31:18 -0400] Flexa: for example
[2013-05-02 15:32:02 -0400] Flexa: https://gist.github.com/b65750157b302e0b7266
[2013-05-02 15:32:05 -0400] Flexa: got ^^ so far
[2013-05-02 15:34:12 -0400] yfeldblum: Flexa, versions = Chef::Search::Query.new.search(:node, "name:*")[0].map{|n| n["chef_packages"]["chef"]["version"]}
[2013-05-02 15:34:53 -0400] haylon: If I were running a cookbook, and troubleshooting a RHEL repo, got the correct repo, and now I am receiving an 'unexpected keyword_end' error in the recipe1 that point to a different recipe2. I didn't even touch recipe1.
[2013-05-02 15:36:06 -0400] Flexa: yfeldblum: thats great, thank you....but versions is just all the version then, and not the nodes associated with those versions
[2013-05-02 15:36:06 -0400] Flexa: :)
[2013-05-02 15:37:21 -0400] yfeldblum: Flexa, then change it
[2013-05-02 15:37:41 -0400] Flexa: yeah, thats the bit I can't do
[2013-05-02 15:37:42 -0400] Flexa: :)
[2013-05-02 15:39:14 -0400] yfeldblum: Flexa, http://hastebin.com/tegorakata.rb
[2013-05-02 15:39:58 -0400] Flexa: lol
[2013-05-02 15:40:05 -0400] Flexa: thought hastebin was a typo ;P
[2013-05-02 15:40:45 -0400] Flexa: dude, thats awesome
[2013-05-02 15:40:46 -0400] Flexa: :)
[2013-05-02 15:40:48 -0400] Flexa: thank you
[2013-05-02 15:45:41 -0400] jwitrick: anyone using chefspec. and use it to check the value of an attribute after a run ?
[2013-05-02 15:46:47 -0400] haylon: when doing case statements in a recipe that point to another recipe, one would use 'case node['platform']; when "redhat"; include_recipe "namOfCookbook::nameOfRecipe" '
[2013-05-02 15:47:07 -0400] haylon: or am I wrong? because I'm getting an error that says "unexpected keyword_end"
[2013-05-02 15:47:51 -0400] haylon: and the recipe worked just 30min before
[2013-05-02 15:49:57 -0400] jmara: haylon: yes but dont forget the "end" at the end
[2013-05-02 15:50:43 -0400] jmara: case node["platform"]; when "redhat"; include_recipe "foo::bar"; end
[2013-05-02 15:50:52 -0400] haylon: jmara: I have that 'when' statement in the middle of 2 other 'when' statements in the case block. there is an end at the end of the case block. do I need an 'end' at the end of each when statement?
[2013-05-02 15:51:30 -0400] jmara: nope just for the case
[2013-05-02 15:51:41 -0400] jmara: http://docs.opscode.com/chef/dsl_recipe.html#case-statements
[2013-05-02 15:53:35 -0400] haylon: jmara: here is the code I am using, and the chef-client run is telling me that its line 10 who is the culprit. http://pastebin.com/e7CcGyct
[2013-05-02 15:57:51 -0400] gansbrest: hello. I was wondering what's the way to separate recipes by context. Let say I need to build 2 redis machines, one master (context master ) and one slave ( slightly different config) - how would you define those node contexts ( master, slave ) if you have just roles and environments?
[2013-05-02 15:57:54 -0400] wkharold: bafflement, I'm trying to get the VIM Python IDE installed via chef-solo in a Vagrant box. Recipe is: http://pastie.org/7753580. The install.sh script grabs some git submodules and creates a bunch of symlinks. I see in pause for what seems like the appropriate amount of time in the Vagrant output. Sadly when I log in none of the links are there. I am probably missing something fundamental but I don't see it.
[2013-05-02 16:00:03 -0400] jmara: haylon: but it seems valid though
[2013-05-02 16:00:17 -0400] jmara: knife cookbook test doesn't complain
[2013-05-02 16:00:54 -0400] haylon: jmara: I know, thats why I want to put my fist through the laptop.  It was working not more htan now 50min ago.
[2013-05-02 16:01:46 -0400] haylon: jmara: I also made to check if the encoding of hte file was affecting it or not, so I made them all unix encoded.
[2013-05-02 16:02:11 -0400] jmara: haylon: did you try to bump the version?
[2013-05-02 16:02:18 -0400] haylon: jmara: The only thing I haven't tried is removing the whole cookbook,and loading it.
[2013-05-02 16:02:34 -0400] haylon: jmara: I'm not sure how ot bump the version wiht knife
[2013-05-02 16:04:25 -0400] jmara: haylon: what I mean is incrementing the version by 0.0.1 just in case the cookbook is stuck in the cache (or maybe check with vagrant with a vanilla redhat)
[2013-05-02 16:05:02 -0400] haylon: jmara: how do you increment the cookbook version?
[2013-05-02 16:05:37 -0400] jmara: haylon: update the metadata.rb and knife cookbook upload the recipe
[2013-05-02 16:06:45 -0400] haylon: jmara: ok, i'll try that.
[2013-05-02 16:06:47 -0400] haylon: than kyou
[2013-05-02 16:12:39 -0400] pwf: can anyone explain why chef search totally fails to find some of my nodes?
[2013-05-02 16:13:25 -0400] Flexa: pwf, seems strange, how are you searching?
[2013-05-02 16:13:47 -0400] Flexa: any ideas how I can do an omnibus update, if I am not using gem install chef?
[2013-05-02 16:14:56 -0400] pwf: like this Flexa http://hastebin.com/dewupuhulu.txt
[2013-05-02 16:15:16 -0400] pwf: it works fine for another node that's set up the exact same way
[2013-05-02 16:18:54 -0400] pwf: https://tickets.opscode.com/browse/CHEF-1205
[2013-05-02 16:19:03 -0400] pwf: so from what i'm reading, search is just basically broken
[2013-05-02 16:26:02 -0400] haylon: jmara: Incrementing the version number didn't help either. If i find anything I will post back here.
[2013-05-02 16:32:15 -0400] c_t: ohai, all chefs
[2013-05-02 16:39:00 -0400] cburroughs: I'm having a problem with search on chef-server that I am not sure how to debug.  I have two 11.0.8 servers with the same set of roles/data-bags etc.  On one of them search works fine.  On the other I don't get any results
[2013-05-02 16:39:07 -0400] cburroughs: $ knife search role 'name:*'
[2013-05-02 16:39:07 -0400] cburroughs: 0 items found
[2013-05-02 16:39:23 -0400] cburroughs: I've tried restarting the server, and rebuilding the index to no avail
[2013-05-02 16:41:26 -0400] dcnem: Hello all, I just ran into a problem loading my production nodes into Chef 11 to migrate them. Some of my nodes are large because they have over 1000 IP addresses. knife upload gives the error ERROR: nodes failed to create_child: Failure creating 'rbg16.atlis1.json': 413 "Request Entity Too Large". I tried changing the nginx configs but it didn't make a difference. Is there a way to accept very large nodes?
[2013-05-02 16:41:59 -0400] jpluscplusm: dcnem: what did you change inside nginx?
[2013-05-02 16:42:28 -0400] pxg: cburroughts: I have the same problem on my chef server, I'm yet to find a fix.
[2013-05-02 16:42:31 -0400] dcnem: client_max_body_size to 0 (docs say it turns it off)
[2013-05-02 16:42:54 -0400] jpluscplusm: are you positive it's in the correct config stanza?
[2013-05-02 16:43:12 -0400] jpluscplusm: i.e. not taking effect for different paths than your upload uses?
[2013-05-02 16:44:52 -0400] cburroughs: pxg, Found any work around?  It's werid that I have 3 severs with the same version and just one isn't working
[2013-05-02 16:45:44 -0400] dcnem: I'm 11.0.8 and changed it in both the chef_http* and put it in nginx.conf inthe http block for good measure. The value in chef_http* should be big enough. my node is about 2M and the prior value was 250M, so I don't know if nginx is the problem.
[2013-05-02 16:46:20 -0400] cburroughs: also, is there an upstream ticket that you know of?
[2013-05-02 16:47:19 -0400] pxg: cburroughs, not yet, I need to get some time to try and get to the bottom of the problem. It's not been a massive issue for me as I don't have that many servers on the same role but it is an annoyance.
[2013-05-02 16:48:06 -0400] cburroughs: Is it limited to roles?  I can't search anything so (for example) if chef-client were to run it would wipe out all of the ssh keys
[2013-05-02 16:48:40 -0400] pxg: For me it's not limited, I can't get the search to return anything
[2013-05-02 16:52:31 -0400] cburroughs: restarting and blowing away the solr data dir didn't seem to help :-/
[2013-05-02 16:53:20 -0400] dcnem: cburroughs: could this be the old solr maxFieldLength problem that plagued Chef 10? Try increasing it in /var/opt/chef-server/chef-solr/home/conf/solrconfig.xml bounce solr and reindex. (that worked in Chef 10)
[2013-05-02 16:53:31 -0400] cburroughs: oh wait now it did
[2013-05-02 16:54:12 -0400] pxg: cburroughs: it fixed your node search issue?
[2013-05-02 16:54:25 -0400] cburroughs: Something along the lines of: kill, rm -fr data, start, (still not working) reinidex , (not working), wait a while (works now)
[2013-05-02 16:54:32 -0400] jpluscplusm: dcnem: sounds like nginx wasn't the issue, perhaps
[2013-05-02 16:55:18 -0400] pxg: When I'm creating servers with knife ec2 how do I get it to create a server with a Root Device Type of EBS rather than data store?
[2013-05-02 16:55:28 -0400] MartinCleaver: hey, gem list says chef (10.24.0, 10.16.6, 10.16.2)
[2013-05-02 16:55:32 -0400] cburroughs: I have not idea if it will "stay" fixed as data changes though
[2013-05-02 16:55:50 -0400] MartinCleaver: but vagrant's using 11.4.4 - why?
[2013-05-02 16:55:59 -0400] cburroughs: <maxFieldLength>100000</maxFieldLength>  I certainly don't have role names that long
[2013-05-02 16:56:51 -0400] pxg: Here is my current command: knife ec2 server create -G 'Youtube Frames' -N 'youtube-cms-prod-3' --region=eu-west-1 --availability-zone eu-west-1a -f m1.large --ebs-no-delete-on-term -x ubuntu ~/.ssh/rbx.pem
[2013-05-02 16:57:55 -0400] dcnem: cburroughs: that's not for the role name but something with the size of the entire node object. We have very large node objects and have to keep increasing maxFieldLength so that solr will index them.
[2013-05-02 16:58:41 -0400] cburroughs: Do you recall if no items were indexed, or just the large ones?
[2013-05-02 17:05:01 -0400] mattray: Spiceweasel 2.2 is now available: bit.ly/spcwsl
[2013-05-02 17:06:10 -0400] c_t: Chef is a snowmobile racing across the tundra and then it suddenly flips over, pinning you underneath.
[2013-05-02 17:06:17 -0400] c_t: At night, the spiceweasels come.
[2013-05-02 17:07:10 -0400] sparr: mmm, spiceweasels
[2013-05-02 17:08:20 -0400] dcnem: cburroughs: I believe only the large ones were not indexed. We would have holes in our search results.
[2013-05-02 17:09:15 -0400] MattJ: Sorry for re-posting, I've been stuck on this (simple?) issue for days: http://serverfault.com/questions/504450/how-to-force-actions-on-up-to-date-resources-in-chef
[2013-05-02 17:09:42 -0400] MattJ: If anyone can suggest a more responsive support forum, please do... the opscode site says this is the best place
[2013-05-02 17:09:53 -0400] gleam: run the restart as an execute/shell resourc einstead
[2013-05-02 17:10:26 -0400] gleam: in this case it looks like maybe supervisor_service is broken
[2013-05-02 17:10:30 -0400] MattJ: Is that really the recommended solution? The provider already has an execute resource in it
[2013-05-02 17:10:39 -0400] gleam: but i dunno
[2013-05-02 17:11:08 -0400] MattJ: It's just so simple, I can't understand the problem: https://github.com/opscode-cookbooks/supervisor/blob/master/providers/service.rb#L62
[2013-05-02 17:11:15 -0400] gleam: yeah, i dunno
[2013-05-02 17:12:07 -0400] MattJ: I find so many introductions to Chef, but it sure does get frustrating when you hit specific issues and can't find an answer
[2013-05-02 17:12:40 -0400] MattJ: I'm just going to have to try rewriting the whole recipe again, and manage everything through execute resources directly (assuming they work)
[2013-05-02 17:13:43 -0400] josephholsten: MattJ: is the cookbook_file[/tmp/test.txt] resource being updated? I'd guess the notification isn't being fired
[2013-05-02 17:13:55 -0400] MattJ: josephholsten, yes, it is
[2013-05-02 17:14:25 -0400] MattJ: The log message I included there happens on the first run and whenever I update the file
[2013-05-02 17:16:45 -0400] josephholsten: MattJ: is the chef run completing? I notice that it's sending a delayed notification. does it also fail with an immediate notification?
[2013-05-02 17:17:04 -0400] MattJ: josephholsten, yes, it completes fine. Actually yes, :immediately works
[2013-05-02 17:17:20 -0400] MattJ: josephholsten, but then it doesn't do what I want, since there are other files that also need to be deployed first
[2013-05-02 17:18:25 -0400] lusis: so am I wrong in that windows systems have nothing under node['memory']?
[2013-05-02 17:19:10 -0400] mattray: lusis: ohai has been needing a release for months, check if master has it workign?
[2013-05-02 17:19:37 -0400] lusis: I'll take a poke. I can make it a platform conditional for now. It just happens to be used in an attribute file =/
[2013-05-02 17:20:46 -0400] lusis: bugger
[2013-05-02 17:20:50 -0400] lusis: don't see anything in master
[2013-05-02 17:20:54 -0400] lusis: welp
[2013-05-02 17:21:32 -0400] yfeldblum: MattJ, if you need to force an action on an up-to-date resource, that suggests there's a problem with your design
[2013-05-02 17:21:42 -0400] lusis: lemme see if the windows cookbook has it somewhere
[2013-05-02 17:21:47 -0400] lusis: I can drop an ohai plugin for now
[2013-05-02 17:21:56 -0400] MattJ: yfeldblum, then tell me what that problem is
[2013-05-02 17:22:01 -0400] MattJ: Kindly :)
[2013-05-02 17:22:44 -0400] yfeldblum: MattJ, also the :enable action for a service is documented here: http://docs.opscode.com/resource_service.html
[2013-05-02 17:22:47 -0400] MattJ: My example can't really get any simpler, and in my mind it looks like 1000 other examples I've seen that show how to use notify
[2013-05-02 17:22:50 -0400] dillyjay: dumb question, but i'm having a tough time finding an answer in docs/google. can you use YAML to define attributes?
[2013-05-02 17:23:00 -0400] yfeldblum: MattJ, the :enable action does not start the service
[2013-05-02 17:23:14 -0400] yfeldblum: MattJ, the :start action starts the service, but does not enable it
[2013-05-02 17:23:21 -0400] MattJ: yfeldblum, I understand, that is my desire. I need it to start after the templates are deployed
[2013-05-02 17:23:52 -0400] MattJ: (and restart when changed)
[2013-05-02 17:24:04 -0400] yfeldblum: MattJ, then put the template resources before the service resource
[2013-05-02 17:24:12 -0400] yfeldblum: MattJ, resources are converged in the order they are declared
[2013-05-02 17:24:27 -0400] cburroughs: I feel like I should point out that https://opscode-omnitruck-release.s3.amazonaws.com/el/5/x86_64/chef-server-11.0.8-1.el5.x86_64.rpm 404s
[2013-05-02 17:24:46 -0400] MattJ: yfeldblum, and then notify will work on the resource that hasn't been declared yet?
[2013-05-02 17:24:53 -0400] MattJ: I can quickly test now
[2013-05-02 17:24:57 -0400] yfeldblum: MattJ, yes
[2013-05-02 17:27:30 -0400] MattJ: yfeldblum, sadly reversing the order doesn't seem to help
[2013-05-02 17:27:50 -0400] MattJ: But now I'll try switching the action to :start
[2013-05-02 17:28:51 -0400] haylon: Back again with yet another chef question, or rather an RPM/zabbix question related to chef. Let me know if there is a different channel i should ask this. While running my 'chef-client' run, I get a 1 returned for a missing dependency. I am trying to install zabbix from a RPM, but now it is telling me that I require the 'zabbix' package and, when searching my repos for it, there is none. I cannot use public repos, I have to use my cor
[2013-05-02 17:30:02 -0400] haylon: The exact error message is " 'rpm -U /tmp/rhel5-zabbix-agent-2.0.6-1.el5.x86_64.rpm; error: failed dependancies: zabbix = 2.0.6-1.el5 is needed by zabbix-agent "
[2013-05-02 17:30:03 -0400] josephholsten: hmm, chef-rundeck disappeared from the interwebs
[2013-05-02 17:31:31 -0400] MattJ: yfeldblum, and that doesn't work either I'm afraid. It does execute the start action, but not the restart action
[2013-05-02 17:31:50 -0400] MattJ: when the templates are updated
[2013-05-02 17:32:07 -0400] MattJ: and 'start' when the service is already started is a noop
[2013-05-02 17:34:25 -0400] MattJ: Gah, and if I change the action to :restart it unconditionally restarts on every chef-client run
[2013-05-02 17:34:40 -0400] MattJ: Is the supervisor cookbook just buggy?
[2013-05-02 17:38:07 -0400] miah: probably
[2013-05-02 17:38:18 -0400] MattJ: Ok, after more experimentation that's my conclusion... looks like I'll just have to do it myself with execute resources - there's a bug in chef, the supervisor cookbook, or the documentation
[2013-05-02 17:38:31 -0400] miah: execute resource.. you're just adding more bugs :P
[2013-05-02 17:38:33 -0400] MattJ: I start to wish I'd just stuck to bash scripts for deployment
[2013-05-02 17:38:46 -0400] miah: bash scripts, now you have problems you dont know about
[2013-05-02 17:38:55 -0400] MattJ: I know bash's problems quite well actually :)
[2013-05-02 17:39:06 -0400] MattJ: Chef seems to have dozens more, in too many layers of abstraction
[2013-05-02 17:39:15 -0400] miah: its rare that people check return values or write tests for their bash scripts
[2013-05-02 17:39:25 -0400] MattJ: Well I guess I'm a rare person
[2013-05-02 17:39:27 -0400] miah: programming is all about layers of abstraction
[2013-05-02 17:39:45 -0400] MattJ: There is such a thing as "too many" though :)
[2013-05-02 17:39:49 -0400] miah: the problem with chef is that most of the people writing cookbooks are not programmers
[2013-05-02 17:39:59 -0400] MattJ: True
[2013-05-02 17:40:09 -0400] MattJ: and I wouldn't let them near my bash deployment scripts...
[2013-05-02 17:40:47 -0400] miah: =)
[2013-05-02 17:41:18 -0400] miah: a company i worked at a few years ago had everything managed via kickstart / jumpstart. they had a _single branch_ in subversion that everybody pushed code to without testing.
[2013-05-02 17:41:26 -0400] amccloud: morning
[2013-05-02 17:41:43 -0400] miah: all the post-inst code ran from that svn repo. guess how often i had to track people down because they didnt test code before they pushed it?
[2013-05-02 17:42:07 -0400] xmltok: my chef server is running pretty slow now, i have a few hundred nodes. should i try to tune anything or should i bite the bullet and upgrade from 10.14.4
[2013-05-02 17:42:10 -0400] MattJ: miah, at least it's relatively simple to understand when something goes wrong, revert the commit and you're done - and slap them for it
[2013-05-02 17:43:54 -0400] miah: MattJ: ya. but when you've waited 6 months for servers to get racked and now i have 2 weeks to get them setup dealing with additional stupid shit doesnt help
[2013-05-02 17:44:04 -0400] pcn: MattJ I hate to say this, but I'd generally thing of supervisor as a solution looking for a problem.  "Yay its python" isn't a good reason to not use runit or something else sane
[2013-05-02 17:44:40 -0400] joenuspl: @xmltok how many merbs are you running?  are you regularly compacting couchdb?
[2013-05-02 17:44:41 -0400] MattJ: pcn, I'm not a Python person, so believe me that wasn't the attitude for switching to it :)
[2013-05-02 17:45:33 -0400] MattJ: It *seemed* to be well supported by Chef, which was certainly one reason (the cookbook is an official opscode one)
[2013-05-02 17:46:11 -0400] MattJ: and it just seemed simple to use, with all the hooks and configurability we need
[2013-05-02 17:46:14 -0400] pcn: I'm used to runit - in a runit context I'd add an action that would send a signal to the processes I'm supervising to tell it to re-load config however it sees fit, then there isn't the same problem of re-starting all the time...
[2013-05-02 17:46:26 -0400] pcn: Do you have that option?
[2013-05-02 17:47:14 -0400] xmltok: joenuspl: 8 api merbs, couchdb should get compacted with each chef run on the node
[2013-05-02 17:47:16 -0400] MattJ: pcn, yes, actually the service in this case is a chat server... we can tell supervisor to use a special signal for stop/restart that will make the chat server shut down when no more conversations are active
[2013-05-02 17:47:23 -0400] xmltok: it looks like only one api merb is really using the cpu
[2013-05-02 17:47:28 -0400] miah: MattJ: the runit cookbook is quite good
[2013-05-02 17:47:42 -0400] xmltok: its on port 4000.. the others are on 4001/4002/etc, i guess they are not getting used?
[2013-05-02 17:47:47 -0400] MattJ: miah, I'm almost at the stage where I can't be bothered... but I'll take a look :)
[2013-05-02 17:47:49 -0400] yfeldblum: MattJ, seems to me that provider has problems of its own - https://github.com/opscode-cookbooks/supervisor/blob/master/providers/service.rb
[2013-05-02 17:48:11 -0400] xmltok: http://blog.jonliv.es/2012/03/13/scaling-chef-with-more-api-workers/ appears so
[2013-05-02 17:48:20 -0400] MattJ: yfeldblum, I've seen that, and it looks so simple... too simple? I'm really not so skilled at providers yet
[2013-05-02 17:48:41 -0400] MattJ: I certainly don't see why it won't restart when I use notifies :restart
[2013-05-02 17:49:13 -0400] miah: yfeldblum: ya.. that looks problematic
[2013-05-02 17:50:35 -0400] yfeldblum: MattJ, you may need to do it with your own execute resources
[2013-05-02 17:51:02 -0400] MattJ: Ok, that's all the push I need... shall do that now, thanks :)
[2013-05-02 17:55:52 -0400] MattJ: Is there maybe some specific bug I can file against the cookbook? So that I can not have to continue to move my deployment in the direction of bash scripts?
[2013-05-02 17:57:01 -0400] xmltok: joenuspl: thanks for the tip, i have apache load balancing the merbs now and i can see the other processes getting some work in. api seems a bit more responsive
[2013-05-02 17:57:14 -0400] joenuspl: xmltok: another thing to look at is the apache/nginx log fronting the chef merbs.   we discovered that the same data bag was being downloaded 39 times in one run.  some bad-style code was copied to various recipes.  fixing that helped a lot.
[2013-05-02 17:57:50 -0400] xmltok: ill check that out
[2013-05-02 17:58:21 -0400] miah: people should memoize databag results and just load them once..
[2013-05-02 17:58:37 -0400] joenuspl: yes!
[2013-05-02 17:58:48 -0400] miah: same for search()
[2013-05-02 17:59:05 -0400] miah: https://twitter.com/kantrn/status/241642459174682624
[2013-05-02 17:59:06 -0400] miah: =)
[2013-05-02 18:02:33 -0400] pcn: So chefs, I've got a pull request for the python provider for COOK-2843 (I just opened that).
[2013-05-02 18:02:42 -0400] pcn: How long does it usually take to get some feedback?
[2013-05-02 18:04:17 -0400] miah: the pull request isnt linked to the ticket
[2013-05-02 18:04:23 -0400] miah: it also isnt marked as resolved or anything
[2013-05-02 18:04:32 -0400] miah: http://wiki.opscode.com/display/chef/How+to+Contribute
[2013-05-02 18:04:35 -0400] miah: check that
[2013-05-02 18:05:12 -0400] miah: i know that btm_, jtimberman, and ssd7 do ticket reviews multiple times per week. i forget where you can find that schedule
[2013-05-02 18:05:24 -0400] miah: but if you meet all the stuff in HTC then it should happen pretty fast
[2013-05-02 18:05:55 -0400] kisoku: they just did the cookbook code review a few days ago
[2013-05-02 18:06:14 -0400] miah: ya
[2013-05-02 18:06:18 -0400] kisoku: if you want them to pay attention to your ticket then it probably helps to show up to the hangout they have
[2013-05-02 18:06:18 -0400] miah: on Monday
[2013-05-02 18:06:19 -0400] maplebed: it's usually mwf 2-3 Central, I think.
[2013-05-02 18:06:40 -0400] kisoku: I think's it's awesome they do that
[2013-05-02 18:06:47 -0400] kisoku: too bad I don't live in the right TZ
[2013-05-02 18:07:01 -0400] pcn: miah: thanks, I missed the last 2 steps
[2013-05-02 18:07:06 -0400] miah: pcn: sure thing.
[2013-05-02 18:07:23 -0400] pcn: it got lost creating the request, re-getting my jira account, etc.
[2013-05-02 18:07:40 -0400] miah: also, considering your name, attaching this photo may help ;) http://covers.openlibrary.org/w/id/6426615-M.jpg
[2013-05-02 18:07:57 -0400] chun: Hello
[2013-05-02 18:12:31 -0400] gansbrest: how can you set a tag on the node?
[2013-05-02 18:15:29 -0400] pcn: OK, I've clicked on the wrong buttons and I think I've messed up the workflow for COOK-2843, but I still don't see the option in the Jira UI for me to mark it as "fix provided"
[2013-05-02 18:16:07 -0400] miah: pcn: have you signed the CLA ?
[2013-05-02 18:16:28 -0400] pcn: Yep
[2013-05-02 18:26:02 -0400] bakins: if I have something that changes based on whether I'm running on chef < 11 or chef 11+, how do I check?  Any quick one liner?
[2013-05-02 18:26:04 -0400] xmltok: its still a bit slow but maybe that is normal, i have just under 1500 nodes now. i suppose that would create some load on the server
[2013-05-02 18:26:34 -0400] xmltok: at least api calls are no longer timing out
[2013-05-02 18:27:20 -0400] joenuspl: bakins: if Chef::VERSION !~ /^11\./
[2013-05-02 18:27:33 -0400] bakins: k, I figured :)
[2013-05-02 18:27:47 -0400] bakins: was wondering if there was something less regex-y
[2013-05-02 18:30:05 -0400] joenuspl: bakins: use that to set a node attribute
[2013-05-02 18:47:31 -0400] jblaine: jtimberman: de nada, I made some other small comments on "Major+" tickets, several got dropped in priority as they were clearly not "Major+" but were set that way by overzealous submitters
[2013-05-02 18:47:37 -0400] juliancdunn: bakins: you could also convert Chef::VERSION.split('.')[0] to an integer and make some comparisons that way
[2013-05-02 18:48:30 -0400] bakins: yeah I may do that
[2013-05-02 18:50:09 -0400] monokrome: When are attribute files loaded from a cookbook?
[2013-05-02 18:50:38 -0400] adamjk-dev: anyone a foodcritic guru?
[2013-05-02 18:50:46 -0400] adamjk-dev: FC014, how many lines does it look for to be too big?
[2013-05-02 18:50:56 -0400] adamjk-dev: https://github.com/acrmp/foodcritic/blob/master/lib/foodcritic/rules.rb#L172
[2013-05-02 18:52:10 -0400] adamjk-dev: foodcritic is throwing a FC014 on the following code: http://pastebin.com/haQwfxxb
[2013-05-02 18:52:12 -0400] adamjk-dev: I am so confused
[2013-05-02 18:53:09 -0400] miah: it doesnt, it just looks for ruby_block
[2013-05-02 18:53:28 -0400] miah: because you could just as easily add a library with a single method definition rather than a resource that executes a ruby method
[2013-05-02 18:55:34 -0400] adamjk-dev: ?
[2013-05-02 18:55:40 -0400] adamjk-dev: but it doesnt warn on the following code
[2013-05-02 18:56:50 -0400] adamjk-dev: http://pastebin.com/9fXg2Xwa
[2013-05-02 18:56:52 -0400] maplebed: Hi - in light of jtimberman's mail to the chef list this morning (re: test-kitchen etc) I wanted to try out a recommended "good" cookbook - zsh was on the list of suggestions.
[2013-05-02 18:57:12 -0400] maplebed: it's not working for me, and I'm wondering if it's pebcak or something that is acutally missing from the repo.
[2013-05-02 18:57:31 -0400] maplebed: the error I'm getting is 'Message: cannot load such file -- kitchen/vagrant'
[2013-05-02 18:57:47 -0400] maplebed: is there supposed to be a ktichen/ directory in the zsh repo or is that something I'm supposed to have on my system somewhere?
[2013-05-02 18:57:58 -0400] maplebed: working from https://github.com/opscode-cookbooks/zsh
[2013-05-02 18:57:59 -0400] adamjk-dev: miah: any reason why foodcritic doesnt warn on FC014 for the 2nd blob of code (from the opscode jenkins cookbook, server recipe)
[2013-05-02 18:58:46 -0400] josephholsten: maplebed: did you run `bundle install`? it sounds like you don't have the required gems
[2013-05-02 18:59:43 -0400] maplebed: I did run 'gem install test-kitchen', but not bundle install. I'll try that.
[2013-05-02 19:01:42 -0400] josephholsten: you'll need dev versions of test-kitchen and kitchen-vagrant
[2013-05-02 19:03:02 -0400] maplebed: what's the command I'm supposed to run to kick off a test run?  I've been using 'vagrant up' to get things started so far.
[2013-05-02 19:03:29 -0400] josephholsten: 'bundle exec kitchen test' should run end-to-end
[2013-05-02 19:03:57 -0400] bakins: anyone use a community cookbook site like thing for their private cookbooks? having all sorts of weirdness with using a cookbook org, git, and berks all at the same time
[2013-05-02 19:05:06 -0400] adamjk-dev: miah: did the second code poste make sense? as to why foodcritic does not warn on it?
[2013-05-02 19:08:26 -0400] maplebed: huh.  josephholsten looks like the version of vagrant/berkshelf I've been playing with is too new? https://gist.github.com/maplebed/5504568
[2013-05-02 19:08:37 -0400] maplebed: I'll try what it suggests and see what happens.
[2013-05-02 19:09:55 -0400] maplebed: no dice.
[2013-05-02 19:11:20 -0400] maplebed: hrm. well, I'm only using the zsh cookbook as a vehicle for learning about test-kitchen, so maybe I'll try a different one; see what happens.
[2013-05-02 19:16:14 -0400] miah: i dunno. i've started thinking that foodcritic is mostly pointless because recipe based cookbooks are mostly an anti-pattern
[2013-05-02 19:17:34 -0400] adamjk-dev: miah: I am confused....
[2013-05-02 19:17:46 -0400] adamjk-dev: miah: so you do not do any linting or sanity checks on the cookbook source?
[2013-05-02 19:17:55 -0400] miah: i have unit tests
[2013-05-02 19:17:57 -0400] adamjk-dev: gotta have recipes somewhere right?
[2013-05-02 19:18:07 -0400] adamjk-dev: yeah unit tests and linting are different imo
[2013-05-02 19:18:08 -0400] miah: i have recipes, but they tend to be quite tiny
[2013-05-02 19:18:12 -0400] adamjk-dev: gotcha
[2013-05-02 19:18:15 -0400] adamjk-dev: that is the nice way to go
[2013-05-02 19:18:27 -0400] miah: small amount of business logic that wraps a resource
[2013-05-02 19:18:28 -0400] adamjk-dev: unit tests show the functionality of the cookbook
[2013-05-02 19:18:31 -0400] adamjk-dev: linting keeps people in line
[2013-05-02 19:18:37 -0400] adamjk-dev: and following the same coding patterns
[2013-05-02 19:18:44 -0400] miah: ya, i just use 'tailor'
[2013-05-02 19:18:48 -0400] adamjk-dev: yah
[2013-05-02 19:18:53 -0400] adamjk-dev: i run tailor against library code
[2013-05-02 19:18:57 -0400] miah: and write pure ruby resource providers
[2013-05-02 19:18:57 -0400] adamjk-dev: foodcritic against the cookbooks
[2013-05-02 19:19:02 -0400] adamjk-dev: tailor against the library files
[2013-05-02 19:19:10 -0400] adamjk-dev: since chef recipes have their own DSL that tailor doesnt recognize
[2013-05-02 19:19:16 -0400] adamjk-dev: I see
[2013-05-02 19:19:27 -0400] adamjk-dev: yah... cuz tailor is not chef-aware.... but pure ruby it is
[2013-05-02 19:19:40 -0400] miah: right
[2013-05-02 19:19:46 -0400] adamjk-dev: interesting
[2013-05-02 19:19:50 -0400] adamjk-dev: i get ur point
[2013-05-02 19:19:53 -0400] adamjk-dev: just trying to set some bases
[2013-05-02 19:19:57 -0400] miah: ya
[2013-05-02 19:20:04 -0400] adamjk-dev: and i have no idea why foodcritic warns on one ruby block and not the other
[2013-05-02 19:20:08 -0400] adamjk-dev: its confusing
[2013-05-02 19:20:15 -0400] adamjk-dev: mine is actually shorter than the other ruby block
[2013-05-02 19:20:17 -0400] adamjk-dev: that doesnt warn
[2013-05-02 19:20:26 -0400] adamjk-dev: whatever
[2013-05-02 19:20:29 -0400] adamjk-dev: ive likely wasted enough time on it
[2013-05-02 19:21:12 -0400] adamjk-dev: thanks for the responses though
[2013-05-02 19:21:26 -0400] miah: ya
[2013-05-02 19:21:38 -0400] miah: ive found foodcritic to be helpful in some cases and annoying in others
[2013-05-02 19:21:48 -0400] miah: i also never use ruby_block
[2013-05-02 19:21:58 -0400] miah: because i'll just write a library with methods
[2013-05-02 19:22:59 -0400] adamjk-dev: i see
[2013-05-02 19:23:07 -0400] adamjk-dev: how do u enforce when the library call is invoked?
[2013-05-02 19:23:19 -0400] adamjk-dev: meaning... it was evaluated first in my recipe
[2013-05-02 19:23:40 -0400] adamjk-dev: so i surrounded the call to the library in a ruby block so it was appended to the resource queue in order
[2013-05-02 19:24:04 -0400] adamjk-dev: (to follow in order with all ofthe other resources)
[2013-05-02 19:33:39 -0400] drywheat: what is the best way to manage minor changes to site cookbooks? should i fork it on github and leverage that repo code?
[2013-05-02 19:33:47 -0400] drywheat: or is there a better way?
[2013-05-02 19:34:39 -0400] drywheat: it feels dirty to download the site cookbook, check it into my repo and change a single file.
[2013-05-02 19:38:59 -0400] adamjk-dev: drywheat: http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-05-02 19:39:27 -0400] adamjk-dev: drywheat: http://realityforge.org/code/2012/11/19/role-cookbooks-and-wrapper-cookbooks.html
[2013-05-02 19:39:29 -0400] adamjk-dev: wrappers
[2013-05-02 19:39:33 -0400] monokrome: Hi. I have a recipe in mycookbook/recipes/base.rb. I have attributes in mycookbook/attributes/base.rb. They have lines like `default['mysql']['server_root_password'] = 'blah'` but my node deployment fails saying that node['mysql']['server_root_password'] doesn't exist from the recip
[2013-05-02 19:39:35 -0400] monokrome: recipe*
[2013-05-02 19:39:37 -0400] monokrome: Any ideas?
[2013-05-02 19:39:47 -0400] adamjk-dev: that way you can leave the community cookbook untouched.... and u can keep ur changes in a wrapper cookbook
[2013-05-02 19:40:02 -0400] adamjk-dev: so you can merge in upstream changes (fixes to the original community cookbook) without trashing your changes
[2013-05-02 19:53:42 -0400] log1kal_: miah: do you have a "companion blog post" or something to your chefconf talk? The slides are helpful, but I'm having a hard time explaining to people, and would love to link them to your own thoughts about cookbook design.
[2013-05-02 19:55:02 -0400] miah: log1kal_: not yet
[2013-05-02 19:55:07 -0400] miah: working on it though =)
[2013-05-02 19:55:16 -0400] log1kal_: Awesome. Thanks!
[2013-05-02 19:55:18 -0400] miah: hopefully have something up by the end of the weekend
[2013-05-02 19:55:40 -0400] pcn: Does anyone remember who at the hackday did the knife EBS-backed AMI image creating?  I wanted to talk about how to create instance store AMIs with them
[2013-05-02 19:56:51 -0400] miah: guh. no i dont recall.
[2013-05-02 19:57:00 -0400] miah: i was pretty sleepy by hackday
[2013-05-02 20:01:09 -0400] cheeseplus: checking my notes to see if I wrote it down
[2013-05-02 20:07:33 -0400] jtimberman: jblaine: don't you have a CLA? if you do, you'll be in the jira-developers group and able to modify tickets.
[2013-05-02 20:08:02 -0400] jtimberman: maplebed: hm, might need to update that one. :)
[2013-05-02 20:08:16 -0400] jtimberman: ah yup, it has a gemfile and vagrantfile.
[2013-05-02 20:08:23 -0400] jtimberman: both of which aren't necessary anymore
[2013-05-02 20:09:14 -0400] jtimberman: maplebed: i've updated the master branch of the zsh cookbook.
[2013-05-02 20:10:14 -0400] eliklein: hola
[2013-05-02 20:27:01 -0400] adamjk-dev: can anyone explain foodcritic's FC014 to me?
[2013-05-02 20:27:10 -0400] adamjk-dev: https://github.com/acrmp/foodcritic/blob/master/lib/foodcritic/rules.rb#L172
[2013-05-02 20:27:23 -0400] adamjk-dev: what ruby block would make foodcritic warn on that?
[2013-05-02 20:30:34 -0400] mattray: adamjk-dev: not sure, but here's the wiki link which is more descriptive: http://acrmp.github.io/foodcritic/#FC014
[2013-05-02 20:31:02 -0400] kisoku: what is the right way to do platform type stuff in an attribute file now ?
[2013-05-02 20:31:10 -0400] jblaine: jtimberman: Yeah, CLA. I didn't see an option on the ticket to allow me to mark it as Won't Fix. Maybe I only see that when I "Close" (not a JIRA pro)
[2013-05-02 20:31:33 -0400] kisoku: I'm using this cookbook that does and "if platform?" construct that is not behaving at _all_
[2013-05-02 20:31:36 -0400] jtimberman: jblaine: yeah - has to be closed.
[2013-05-02 20:32:01 -0400] jtimberman: kisoku: chef 10 or 11?
[2013-05-02 20:32:12 -0400] kisoku: chef 10
[2013-05-02 20:32:24 -0400] jtimberman: kisoku: can't use the platform? predicate method in attributes files.
[2013-05-02 20:32:40 -0400] adamjk-dev: mattray: yeah, I ran across the Wiki link, that doesn't mean anything
[2013-05-02 20:32:52 -0400] kisoku: so what, case platform  instead ?
[2013-05-02 20:33:00 -0400] adamjk-dev: mattray: I basically have some cookbooks with longer ruby blocks defined in them that aren't causing FC014 warnings
[2013-05-02 20:33:15 -0400] adamjk-dev: mattray: but, my little 5 liner ruby block is causing the warning, I don't get it
[2013-05-02 20:33:21 -0400] kisoku: I really wish you guys would ship orward compatability cookbooks :-P
[2013-05-02 20:33:25 -0400] kisoku: forward
[2013-05-02 20:34:16 -0400] adamjk-dev: mattray: I basically have no clue as to why foodcritic is throwing that warning in some places, and not others (I figured it was due to lengthy ruby blocks or something)
[2013-05-02 20:34:27 -0400] monokrome: Is there any information anywhere on Chef's loading process for attributes?
[2013-05-02 20:34:53 -0400] monokrome: I'm following this document, and they still don't exist: http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-05-02 20:35:05 -0400] cwj: anyone know how to influence chef's log level when running test kitchen?
[2013-05-02 20:35:27 -0400] jtimberman: kisoku: ya
[2013-05-02 20:35:42 -0400] jtimberman: kisoku: have to use case node['platform']
[2013-05-02 20:37:08 -0400] mattray: adamjk-dev: I'm not familiar with the inner workings of foodcritic, sorry I'm not of much use. You can turn off warnings for particular rules if you want
[2013-05-02 20:37:18 -0400] miah: cwj: -l debug
[2013-05-02 20:37:28 -0400] kisoku: jtimberman: in an attribute file ?
[2013-05-02 20:37:29 -0400] kisoku: node ?
[2013-05-02 20:37:32 -0400] kisoku: really ?
[2013-05-02 20:37:41 -0400] dysinger: anyone in here got the new test kitchen working on ci builds on jenkins w/ lxc ?
[2013-05-02 20:37:45 -0400] miah: attributes files shouldn't include logic =)
[2013-05-02 20:37:51 -0400] adamjk-dev: mattray: yeah, me neither unfortunately.... its just looking at the abstract syntax tree of the ruby blocks and checking how many ancestors etc.... not the simplest stuff
[2013-05-02 20:38:07 -0400] cwj: miah: as a flag for kitchen execution?
[2013-05-02 20:38:14 -0400] adamjk-dev: mattray: yeah, I just don't get why some cause it and not others, since the warning clearly talks about how "long" it is.... non-intuitive and annoying to me
[2013-05-02 20:38:15 -0400] miah: cwj: yes
[2013-05-02 20:38:26 -0400] adamjk-dev: mattray: I saw how I could ignore certain warnings, thanks for the input and checking :)
[2013-05-02 20:38:35 -0400] atomic-penguin: adamjk-dev, http://acrmp.github.io/foodcritic/#FC014
[2013-05-02 20:38:48 -0400] cwj: miah: thanks :)
[2013-05-02 20:39:05 -0400] adamjk-dev: atomic-penguin: yeah, I have come across the wiki and the source for it.... just doesn't make snse
[2013-05-02 20:40:36 -0400] atomic-penguin: adamjk-dev, doh, didn't even see mattray already posted that
[2013-05-02 20:40:54 -0400] adamjk-dev: the problem is that his ruby block causes FC014: http://pastebin.com/cXyfMtKY    and this one does not: http://pastebin.com/FGpsPVyz
[2013-05-02 20:41:09 -0400] adamjk-dev: that this* ruby block causes
[2013-05-02 20:41:35 -0400] adamjk-dev: so it can't just be a warning for the length of a ruby block
[2013-05-02 20:41:39 -0400] adamjk-dev: is what I cannot figure out
[2013-05-02 20:41:54 -0400] adamjk-dev: because my ruby block is tiny
[2013-05-02 20:42:01 -0400] adamjk-dev: and longer ruby blocks don't always cause the warning
[2013-05-02 20:42:06 -0400] adamjk-dev: something else is being checked
[2013-05-02 20:42:52 -0400] jblaine: adamjk-dev: It's ruling on the AST
[2013-05-02 20:43:20 -0400] jblaine: adamjk-dev: Looks like a bug to me. The rule is not performing the check the way it is described.
[2013-05-02 20:43:22 -0400] adamjk-dev: jblaine: yeah, thats the first param of the function call
[2013-05-02 20:43:55 -0400] adamjk-dev: jblaine: I see, yeah I would say it is bugged for sure... I get mixed results all over cookbooks and their usage of ruby_blocks
[2013-05-02 20:44:46 -0400] adamjk-dev: I presume I can open an issue for it
[2013-05-02 20:44:52 -0400] adamjk-dev: just new to this... so if I am wrong
[2013-05-02 20:44:57 -0400] adamjk-dev: lol
[2013-05-02 20:45:16 -0400] atomic-penguin: adamjk-dev, gist your code examples, and open an issue https://github.com/acrmp/foodcritic/issues
[2013-05-02 20:45:35 -0400] adamjk-dev: atomic-penguin: will do, thanks
[2013-05-02 20:45:59 -0400] atomic-penguin: adamjk-dev, I would help you but I can't parse that FC rule
[2013-05-02 20:46:18 -0400] jtimberman: kisoku: don't *have* to use node['platform'], you *can* use platform, but you *should* use node['platform'] (there's a foodcritic rule for that)
[2013-05-02 20:46:20 -0400] atomic-penguin: adamjk-dev, probably a bug though with FC
[2013-05-02 20:46:28 -0400] adamjk-dev: atomic-penguin: no worries, I didn't want to dive into it myself....
[2013-05-02 20:46:28 -0400] jblaine: adamjk-dev: Easiest answer is to add a puts call in there to show the difference based on your blocks :)
[2013-05-02 20:46:43 -0400] jtimberman: dysinger: not yet.
[2013-05-02 20:46:44 -0400] adamjk-dev: jblaine: yeah.... I was half tempted to do that
[2013-05-02 20:46:56 -0400] jtimberman: dysinger: we had some discussion about tk 1 + lxc + jenkins earlier :)
[2013-05-02 20:48:25 -0400] jblaine: jtimberman: This sort of thing is frustrating. Not your fault, not blaming you, just saying. Re: What's the "preferred" way to do, for example, platform? or node['platform'] etc...
[2013-05-02 20:48:50 -0400] jblaine: jtimberman: So FC is the largely understood rulebook to go by?
[2013-05-02 20:49:02 -0400] jtimberman: jblaine: preferred is node['platform']. do that.
[2013-05-02 20:49:30 -0400] jtimberman: jblaine: oh - sorry - you mean #platform?() vs case node['platform']
[2013-05-02 20:50:15 -0400] jblaine: jtimberman: Okay. I just learned of platform? and platform_family? per the docs.opscode.com stuff last week, had always been doing tests on node['platform'] ... switched to the method lately, now you're telling me my new direction is in error :)
[2013-05-02 20:50:38 -0400] jblaine: or "not preferred" (not "in error")
[2013-05-02 20:51:16 -0400] jblaine: For as much freedom as everyone likes to do anything any way they want, a LOT of people want some structure and rules to go by (not just speaking of Chef)
[2013-05-02 20:51:35 -0400] jtimberman: jblaine: sorry for the confusion.
[2013-05-02 20:52:03 -0400] jtimberman: It is more idiomatic to use predicate methods where available if you need something simple.
[2013-05-02 20:52:16 -0400] jtimberman: if you have a bunch of different platforms to check, a case statement is better.
[2013-05-02 20:52:44 -0400] jtimberman: however, the platform predicates (#platform?, #platform_family?) won't work in attributes files in Chef 10.
[2013-05-02 20:52:53 -0400] jblaine: I see.
[2013-05-02 20:54:11 -0400] jblaine: So just always use node[... if one wants to pick one and only one way (for reduction of stuff to learn)
[2013-05-02 20:54:22 -0400] jblaine: jtimberman: Thanks
[2013-05-02 21:00:16 -0400] maplebed: jtimberman: thanks! I'll try it again.
[2013-05-02 21:52:53 -0400] monokrome: Does nobody know why "cookbooks/mycookbook/attributes/default.rb" isn't being loaded, so I don't have the value in "cookbooks/mycookbook/recipes/server.rb"?
[2013-05-02 21:54:35 -0400] troyready: Dumb question: is there any equivalent to the ufw cookbook for RHEL based servers? That is, a cookbook that would allow us to create iptables rules based on a node's attributes?
[2013-05-02 21:55:14 -0400] silk: monokrome: can you gist the relevant pieces?
[2013-05-02 21:55:39 -0400] monokrome: silk: Sure.
[2013-05-02 21:55:46 -0400] troyready: Seems like the existing firewall/iptables cookbooks are geared toward providing LWRPs for use in other recipes, without any capability for gathering them from node attributes
[2013-05-02 21:56:42 -0400] maplebed: jtimberman: taking into account your most recent push to the zsh repo, what should I run to set up the vagrant env and run the test-kitchen tests?  berks update? vagrant init? something different?
[2013-05-02 21:57:02 -0400] silk: +1
[2013-05-02 21:58:09 -0400] monokrome: silk: https://gist.github.com/monokrome/854ce291f15dba29ec0d
[2013-05-02 21:58:29 -0400] monokrome: Line 7 of worker.rb is the one that fails, because node['mysql']['server_root_password'] doesn't exist..
[2013-05-02 21:59:47 -0400] jtimberman: maplebed: "kitchen list"
[2013-05-02 21:59:54 -0400] maplebed: hm.  also, I see as the commet message 'convert to test kitchen 1.0 alpha', but 'gem install test-kitchen' gets me 0.7.0 and https://github.com/opscode/test-kitchen/blob/master/lib/test-kitchen/version.rb still shows 0.7.1.
[2013-05-02 22:00:23 -0400] jtimberman: see the TESTING.md i just pushed :)
[2013-05-02 22:00:25 -0400] maplebed: ah, sweet. trying kitchen <foo>
[2013-05-02 22:00:50 -0400] miah: monokrome: eh. im not sure you can do that databag stuff in your attributes file =)
[2013-05-02 22:01:15 -0400] miah: your attribute should specify a _default_ and then you can override that with your databag in a recipe
[2013-05-02 22:01:19 -0400] jtimberman: you should have kitchen gem installed in your "global" ruby environment, version 1.0.0.alpha.5 (gem install test-kitchen --pre; gem install kitchen-vagrant), and vagrant 1.2.1 with vagrant-berkshelf installed
[2013-05-02 22:01:38 -0400] monokrome: miah: Then where am I supposed to do it?!
[2013-05-02 22:01:46 -0400] miah: monokrome: in a recipe
[2013-05-02 22:01:53 -0400] jtimberman: maplebed: gotta run, bbiab.
[2013-05-02 22:01:57 -0400] maplebed: Ah.  I don't feel bad for not noticing the Testing.md.  (committed a minute ago)
[2013-05-02 22:02:00 -0400] monokrome: Why don't I get an error?
[2013-05-02 22:02:02 -0400] maplebed: tnx jtimberman
[2013-05-02 22:02:08 -0400] miah: i dont know
[2013-05-02 22:02:11 -0400] monokrome: it just tries the recipe, it never errors about the attributes
[2013-05-02 22:02:17 -0400] monokrome: I don't even think the attributes are being used
[2013-05-02 22:02:20 -0400] miah: right
[2013-05-02 22:02:27 -0400] miah: try doing what i said
[2013-05-02 22:02:30 -0400] monokrome: ok
[2013-05-02 22:02:34 -0400] miah: see how the results differ
[2013-05-02 22:02:34 -0400] monokrome: trying now
[2013-05-02 22:02:37 -0400] silk: monokrome, using chef 10 or 11?
[2013-05-02 22:03:11 -0400] miah: its my belief that attribute values in cookbooks should be insanely simple and 'default'ish. dont do magic.
[2013-05-02 22:03:15 -0400] miah: keep the magic in your recipes
[2013-05-02 22:03:16 -0400] silk: and as miah said, that seems a kinda fragile way to set a default attribute
[2013-05-02 22:03:58 -0400] monokrome: 10.18.2
[2013-05-02 22:04:37 -0400] Majost: Is there a doc somewhere which explains the order in which a cookbook is converged -- or is it alphabetical?
[2013-05-02 22:04:40 -0400] monokrome: override_attributes only exists in roles
[2013-05-02 22:04:46 -0400] monokrome: and data bags aren't allowed in roles
[2013-05-02 22:05:32 -0400] miah: http://docs.opscode.com/essentials_nodes_chef_run.html
[2013-05-02 22:05:44 -0400] miah: roles / environments should be seen as 'static' data
[2013-05-02 22:06:01 -0400] miah: but if they provide attributes, its up to convergence to determine their actual outcome.
[2013-05-02 22:06:29 -0400] miah: think of attributes as global variables
[2013-05-02 22:06:33 -0400] miah: the last one set is the one that matters
[2013-05-02 22:06:33 -0400] monokrome: It's trying with the attributes being set as
[2013-05-02 22:06:41 -0400] monokrome: node['mysql']['server_root_password'] = 'blah'
[2013-05-02 22:06:47 -0400] miah: right
[2013-05-02 22:06:47 -0400] monokrome: in the recipe now
[2013-05-02 22:09:27 -0400] sparr: I am doing an automated OS deployment with cobbler, including the chef omnibus package to get the chef client. During the deployment I need to configure the chef client to connect to my chef server. I think I need to put a client.rb with the server hostname and validation.pem on the client. Would it be reasonable or ill advised to put those files into a package to have my kickstart install?
[2013-05-02 22:09:51 -0400] doomviking: grumble grumble sudo rvm homebrew dev not following directions yak shaving
[2013-05-02 22:13:30 -0400] silk: sparr: i would probably not include the validation.pem in a package, as ideally you remove it after your client has registered
[2013-05-02 22:13:50 -0400] sparr: just two files, if one isn't going in a package the other probably shouldn't either
[2013-05-02 22:14:31 -0400] djustin: on a windows station, is it possible to add a client.rb param to help resolve the chefserver IP with it's name?  I'd like to get out of changing the host file, when the station is on a diff DNS than the chef server
[2013-05-02 22:14:39 -0400] maplebed: jtimberman: when you get back, https://github.com/opscode-cookbooks/zsh/pull/1 corrects (what I think is) a typo in TESTING.md. I can do the COOK dance if you like.
[2013-05-02 22:17:34 -0400] Majost: is there a pattern for detecting chef 10/11 for chef_gem?
[2013-05-02 22:18:42 -0400] monokrome: silk: So, now I just get this: Node attributes are read-only when you do not specify which precedence level to set. To set an attribute use code like `node.default["key"] = "value"'
[2013-05-02 22:20:24 -0400] monokrome: silk, miah: That's with this https://gist.github.com/monokrome/854ce291f15dba29ec0d
[2013-05-02 22:20:25 -0400] monokrome: :(
[2013-05-02 22:20:27 -0400] silk: Can you update your gist with what is currently in the file, and the output
[2013-05-02 22:20:32 -0400] silk: aah..
[2013-05-02 22:20:59 -0400] silk: that looks the same as before to me
[2013-05-02 22:21:10 -0400] monokrome: one moment
[2013-05-02 22:21:11 -0400] monokrome: github error
[2013-05-02 22:21:45 -0400] monokrome: https://gist.github.com/monokrome/854ce291f15dba29ec0d
[2013-05-02 22:24:02 -0400] Majost: eg: unless node['chef_packages']['chef']['version'].match('^11..*')                  depends 'chef_gem'
[2013-05-02 22:24:14 -0400] silk: use default or node.default
[2013-05-02 22:24:16 -0400] silk: instead of node
[2013-05-02 22:24:31 -0400] silk: in the assignment
[2013-05-02 22:24:46 -0400] monokrome: Doesn't that just break the whole idea of how I shouldn't be setting defaults to data bag items? :/
[2013-05-02 22:26:51 -0400] kallistec: monokrome: the error means what it says, the working equivalent of your code is node.set['mysql']['server_root_password'] = database_data[environment]['password']
[2013-05-02 22:27:07 -0400] monokrome: oh ok
[2013-05-02 22:27:13 -0400] kallistec: though in your case node.override may be the best choice
[2013-05-02 22:28:08 -0400] monokrome: okay, I'll try that :D
[2013-05-02 22:29:57 -0400] kallistec: monokrome: basic rule for chef 11 is that node["foo"]["bar"] is for reading, use node.default, node.set, node.override to set values
[2013-05-02 22:30:25 -0400] monokrome: kallistec: I'm using chef 10.x
[2013-05-02 22:31:29 -0400] Majost: kallistec: even in attributes files?
[2013-05-02 22:31:35 -0400] kallistec: monokrome: you sure?
[2013-05-02 22:31:44 -0400] monokrome: yes
[2013-05-02 22:31:57 -0400] monokrome: I SSH'd into the chef server and ran `chef-server --version`
[2013-05-02 22:32:02 -0400] kallistec: Majost: in attributes files it's the same thing, but the `node` part is (still) optional
[2013-05-02 22:32:17 -0400] monokrome: 10.18.2
[2013-05-02 22:33:36 -0400] kallistec: monokrome: there must be something more complicated going on then, ImmutableAttributeModification doesn't exist in 10.x
[2013-05-02 22:34:49 -0400] monokrome: kallistec: the clients might be bootstrapping on 11?
[2013-05-02 22:36:30 -0400] kallistec: monokrome: depends on how you're bootstrapping, did you roll your own bootstrap template?
[2013-05-02 22:36:41 -0400] monokrome: No, I am using `knife rackspace`
[2013-05-02 22:37:03 -0400] monokrome: It uses http://opscode.com/chef/install.sh
[2013-05-02 22:37:27 -0400] kallistec: monokrome: is it passing the -v option?
[2013-05-02 22:38:26 -0400] monokrome: kallistec: Is there a way to figure that out?
[2013-05-02 22:38:35 -0400] joenuspl: Question on FC033 Must the template be named .erb ?  I'm laying down a ruby file and substituting some values inside strings.  I want to be Foodcritic clean but I also like the `knife cookbook test` ruby syntax checks having it named .rb gives me.
[2013-05-02 22:38:48 -0400] kallistec: monokrome: what version is knife?
[2013-05-02 22:39:00 -0400] monokrome: 11.4.4 on my laptop
[2013-05-02 22:39:16 -0400] monokrome: 11.4.4 on the chef server
[2013-05-02 22:39:27 -0400] kallistec: monokrome: ah, that's why. So the bootstrap will default to the same version as you have for knife
[2013-05-02 22:39:40 -0400] kallistec: if you want a different one, it's --bootstrap-version
[2013-05-02 22:39:55 -0400] monokrome: but `chef-server --version` says "Chef Server (API) Version: 10.18.2"
[2013-05-02 22:40:18 -0400] monokrome: So maybe I am still using Chef 11, not completely sure.
[2013-05-02 22:40:26 -0400] monokrome: I don't mind Chef 11
[2013-05-02 22:40:42 -0400] monokrome: I just want to be able to use my encrypted data bags for my MySQL passwords. :/
[2013-05-02 22:41:35 -0400] kallistec: monokrome: what I'm saying is the install.sh script takes a -v VERSION argument, and unless you say otherwise, knife is going to use its own version for that `-v VERSION` bit
[2013-05-02 22:42:01 -0400] kallistec: e.g., if you downgrade knife to 10.18.2, knife will start installing that version when you bootstrap
[2013-05-02 22:42:09 -0400] monokrome: oic
[2013-05-02 22:42:26 -0400] monokrome: I don't understand why knife and chef would be a different version on my Ubuntu server.
[2013-05-02 22:42:38 -0400] monokrome: Maybe the API version is differnet?
[2013-05-02 22:43:11 -0400] kallistec: I don't know how much chef infrastructure you have, but there are some gotchas between chef 10 and 11: http://docs.opscode.com/breaking_changes_chef_11.html
[2013-05-02 22:44:08 -0400] kallistec: none of those are super serious, but as you've seen, some code that works on 10.x doesn't work on 11.x
[2013-05-02 22:44:20 -0400] monokrome: I'll make note of that
[2013-05-02 22:44:34 -0400] monokrome: but it seems like I should still be able to still deploy this machine fine? :/
[2013-05-02 22:45:09 -0400] kallistec: monokrome: yeah, if you want to keep your hosts on 10.18.2, use the `--bootstrap-version` option
[2013-05-02 22:47:26 -0400] djustin: chef 11 has some changes to encrypted databags
[2013-05-02 22:47:35 -0400] djustin: I ran across the same issue
[2013-05-02 22:47:42 -0400] djustin: let me find the page that explains it
[2013-05-02 22:49:16 -0400] djustin: http://docs.opscode.com/breaking_changes_chef_11.html#changes-for-data-bag-encryption
[2013-05-02 22:52:46 -0400] monokrome: kallistec: The real issue is that I set that to the data from my databag
[2013-05-02 22:52:50 -0400] monokrome: and it still thinks that it's null
[2013-05-02 22:52:57 -0400] monokrome: attributes are completely not working
[2013-05-02 22:53:17 -0400] Guest16046: Any idea on "Cannot find a resource for aws_ebs_raid on centos version 6.3"..
[2013-05-02 22:53:54 -0400] Guest16046: Running Chef 11.4.4
[2013-05-02 22:55:33 -0400] kallistec: monokrome: after you deployed the same recipe on 10.18.2?
[2013-05-02 22:56:06 -0400] organicveggie: Running Chef 0.9.14. Certain nodes aren't showing in search results when I search by roles that I *know* the node has. Any bright ideas?
[2013-05-02 22:56:19 -0400] kallistec: Guest16046: does aws_ebs_raid come from a LWRP? are you using chef-solo?
[2013-05-02 22:57:09 -0400] Guest16046: @kallistec using Chef-server, comes from opscode aws cookbook
[2013-05-02 22:57:40 -0400] kallistec: Guest16046: did you add the dependency to your metadata?
[2013-05-02 22:57:41 -0400] Guest16046: @kallistec: it is LWRP
[2013-05-02 22:58:33 -0400] Guest16046: @kallistec yes "depends 'aws'" is in metadata
[2013-05-02 22:59:48 -0400] kallistec: Guest16046: everything's up to date on the server? The aws cookbook is getting sync'd to the client?
[2013-05-02 23:00:55 -0400] Guest16046: @kallistec: include_recipe 'aws' is also there in code. Yes all in sync ran berks upload many times and relauched ec2.
[2013-05-02 23:02:11 -0400] kallistec: Guest16046: and if you look in /var/chef/cache/cookbooks, the aws cookbook is in there and the LWRP files are there?
[2013-05-02 23:04:30 -0400] Guest16046: @kallistec: you are right I see other resorce ebs_volume, elastic_ip but not ebs_raid...
[2013-05-02 23:05:01 -0400] kallistec: Guest16046: look at the metadata, maybe it's an old version?
[2013-05-02 23:05:57 -0400] monokrome: kallistec: Trying that, but not sure that it'll fix it.
[2013-05-02 23:09:14 -0400] tlr00: knife upload cookbook yum
[2013-05-02 23:09:14 -0400] tlr00: ERROR: Method Not Allowed
[2013-05-02 23:09:14 -0400] tlr00: Response:
[2013-05-02 23:09:15 -0400] tlr00: Question: Tried uploading a cookbook and received this error...
[2013-05-02 23:10:18 -0400] organicveggie: Chef 0.9.14. Is there any way to check the depth of the indexing queue in rabbitmq?
[2013-05-02 23:10:48 -0400] rava: i can't call .each on an attribute if it's empty without raising an error? would hope if it's an empty hash it the template would just not render anything?
[2013-05-02 23:13:16 -0400] kallistec: tlr00: check your chef_server_url, most likely you have http when it should be https
[2013-05-02 23:14:01 -0400] kallistec: rava: if you want that behavior, you need to check for nil first
[2013-05-02 23:14:42 -0400] kallistec: e.g., thing = node["foo"]["bar"] || {}
[2013-05-02 23:14:43 -0400] rava: doesn't seem to like this syntax: <% if node['partner_platform']['supervisord']['supervisorctl'] %>
[2013-05-02 23:15:36 -0400] kallistec: organicveggie: I forget the exact command, `chef-expanderctl help` will get you on the path
[2013-05-02 23:15:37 -0400] tlr00: kallistec: Great news, wasn't that - It had to do with the FQDN being changed after the install. I will need to reconfigure it - thanks for that.
[2013-05-02 23:16:12 -0400] organicveggie: kallistech: chef-expanderctl? Did that exist in Chef 0.9.14?
[2013-05-02 23:17:21 -0400] rava: if an attribute is set to an empty hash in a role definition, shouldn't it be referencable ?
[2013-05-02 23:17:34 -0400] rava: in an if check for nil?
[2013-05-02 23:20:11 -0400] kallistec: organicveggie: yes
[2013-05-02 23:20:14 -0400] rava: giving me undefined method errors for this line:  <% if not node['partner_platform']['supervisord']['supervisorctl'].nil? %>
[2013-05-02 23:20:37 -0400] kallistec: organicveggie: hrm, wait, actually, nope, it was 0.10.x
[2013-05-02 23:20:45 -0400] organicveggie: kallistec: :(
[2013-05-02 23:21:07 -0400] kallistec: there's a rabbitmqctl command to get the queue depth
[2013-05-02 23:21:12 -0400] Guest16046: @kallistec: Thanks for the help. berks was uploading 0.100.6 while ebs_raid was in 0.100.7. The new version fixed it. Super.
[2013-05-02 23:22:21 -0400] kallistec: Guest16046: cool :)
[2013-05-02 23:22:55 -0400] organicveggie: basically, i'm trying to track down why nodes aren't showing up in search results.
[2013-05-02 23:23:03 -0400] organicveggie: rabbitmqctl list_queues -p /chef name messages
[2013-05-02 23:23:08 -0400] organicveggie: Shows me that the queue is empty.
[2013-05-02 23:23:26 -0400] organicveggie: So the problem isn't that chef-solr-indexer is behind
[2013-05-02 23:23:55 -0400] monokrome: kallistec: That arg doesn't even work, I don't think? https://gist.github.com/monokrome/b66d750779a4eb2cbbb5
[2013-05-02 23:24:16 -0400] rava: anyone have input on why this syntax doesn't work?  <% if not node['partner_platform']['supervisord']['supervisorctl'].nil? %>
[2013-05-02 23:24:27 -0400] organicveggie: rava: any errors?
[2013-05-02 23:24:34 -0400] rava: method undefined
[2013-05-02 23:24:46 -0400] rava: Chef::Mixin::Template::TemplateError: undefined method `[]' for nil:NilClass
[2013-05-02 23:24:52 -0400] kallistec: rava: an intermediate value is returning nil there
[2013-05-02 23:25:09 -0400] organicveggie: rava: i agree with ballistic. one of if the elements in the hash is nil.
[2013-05-02 23:25:41 -0400] rava: i see the attributes in the role, the node isn't recording the attributes because the recipe keeps puking
[2013-05-02 23:27:14 -0400] kallistec: monokrome: ugh, Chef 11 has `log_level :auto` by default chef 10 doen't like that :\
[2013-05-02 23:27:21 -0400] rava: think i found it
[2013-05-02 23:27:22 -0400] monokrome: :(
[2013-05-02 23:27:34 -0400] rava: thanks, indentation lvl on the output of a role show through me off
[2013-05-02 23:27:40 -0400] monokrome: can I change it somehow?
[2013-05-02 23:35:53 -0400] basic`: alright I've gotta know.. how are people managing secondary and virtual network interfaces with chef and no dhcp?  I've seen one example that uses databags...
[2013-05-02 23:43:16 -0400] qhartman: I'm using the config / library pattern to override some attributes in a cookbook, but I'm finding that nested attributes are coming through unset if I don't explicitly set them in the config cookbook. Is that expected? Do I need to duplicate all the attributes and then only change the ones I'm interested in?
[2013-05-02 23:43:31 -0400] xmltok: ive got a default attribute set that appears as null from my recipe, but only on one node. i've tested the cookbook on two other nodes and they are able to access the attribute fine. any ideas of where else I can look? its default['x']['y'] in the attribute file and used as node['x']['y'] in the recipe
[2013-05-02 23:44:19 -0400] qhartman: xmltok, if you edit the node is it set to an empty string or nil there?
[2013-05-02 23:45:00 -0400] qhartman: if it is, that value will override any default values that are in the cookbooks
[2013-05-02 23:45:22 -0400] xmltok: ah, so a previous version of the cookbook could have dumped that in there and messed it up
[2013-05-02 23:45:43 -0400] qhartman: right
[2013-05-02 23:45:47 -0400] xmltok: there isn't the [x][y] but there is an [x][z]
[2013-05-02 23:46:20 -0400] qhartman: If the defaults are right, I would delete the whole tree and try again.
[2013-05-02 23:46:36 -0400] qhartman: the whole [x] tree, that is
[2013-05-02 23:46:53 -0400] xmltok: let me try that out
[2013-05-02 23:47:36 -0400] xmltok: that fixed it
[2013-05-02 23:47:48 -0400] xmltok: thanks, thats a huge help
[2013-05-02 23:47:50 -0400] qhartman: cool
[2013-05-02 23:47:52 -0400] qhartman: np
[2013-05-02 23:48:19 -0400] qhartman: It's a common thing to see if there is a spot in the cookbook where you are trying to test a value and accidenteally use "=" instead of "=="
[2013-05-02 23:48:51 -0400] qhartman: I think that's why they've deprecated the node[x]="foo" syntax in favor of the node.set[x]="foo" style
[2013-05-02 23:49:11 -0400] qhartman: makes it more explicit and prevents a simple mistake from having ugly trickle down
[2013-05-02 23:55:52 -0400] maplebed: Anybody know if you can (or how you can) specify a path to a data_bags directory when using test-kitchen? I see https://github.com/opscode/test-kitchen/pull/5 but that looks like it's no longer valid.
[2013-05-02 23:57:36 -0400] xmltok: qhartman: aha, i was wondering how it could have happened. i was worried that i wouldn't be able to use my attributes file to add new variables later without deleting the nodes attributes again

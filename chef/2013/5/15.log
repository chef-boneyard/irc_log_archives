[2013-05-15 00:01:21 -0400] ignatz: how is busser formed
[2013-05-15 00:01:27 -0400] ignatz: how fudge get minitest
[2013-05-15 00:01:48 -0400] cwj: ignatz: totally
[2013-05-15 00:02:08 -0400] cwj: maybe if i just destroy my vms and run it again it will magically work
[2013-05-15 00:07:03 -0400] GreatSUN: hey guys... can someone tell me how to move a directory at windows os?
[2013-05-15 00:07:15 -0400] GreatSUN: till now I tried to use FileUtils.mv
[2013-05-15 00:07:28 -0400] GreatSUN: but it looks like it doesnt do the job
[2013-05-15 00:07:32 -0400] GreatSUN: any ideas?
[2013-05-15 00:10:15 -0400] bluekelp_: so i'm back at my "meta-chef" layer quest where i want to test/assert things like the ordering of recipes in run_lists (matters for attrs) across all nodes - is there anything like this already?
[2013-05-15 00:40:25 -0400] GreatSUN: can I access nodes extended runlist in cookbooks attribute file as I do it in recipe?
[2013-05-15 00:40:47 -0400] bluepojo: GreatSUN: you should try it :D
[2013-05-15 00:40:55 -0400] GreatSUN: bluepojo: :-P
[2013-05-15 00:41:08 -0400] GreatSUN: that was not what I wanted to read
[2013-05-15 00:41:12 -0400] bluepojo: well
[2013-05-15 00:41:22 -0400] bluepojo: running a recipe is pretty quick
[2013-05-15 00:41:23 -0400] bluepojo: :D
[2013-05-15 00:44:28 -0400] GreatSUN: matters
[2013-05-15 00:44:36 -0400] GreatSUN: I am deep in work
[2013-05-15 00:44:54 -0400] GreatSUN: don't want to create a new cookbook now
[2013-05-15 00:51:06 -0400] bluepojo: you could also test it in chef-shell
[2013-05-15 00:51:07 -0400] bluepojo: on your node
[2013-05-15 00:51:15 -0400] bluepojo: which would not require you to create a new cookbook
[2013-05-15 00:51:27 -0400] bluepojo: I mean the short answer is: you have access to the node object in an attributes file
[2013-05-15 00:51:39 -0400] bluepojo: and the node object can tell you the run_list
[2013-05-15 00:51:42 -0400] bluepojo: but
[2013-05-15 00:51:54 -0400] bluepojo: chef-shell is a useful skill to have
[2013-05-15 00:51:55 -0400] bluepojo: :D
[2013-05-15 00:52:04 -0400] bluepojo: GreatSUN: ^
[2013-05-15 00:52:50 -0400] bluepojo: IRC as unit test is not generally very efficient
[2013-05-15 00:53:39 -0400] GreatSUN: attributes-file != recipe
[2013-05-15 00:54:13 -0400] bluepojo: did you miss the section in the chef-shell docs that says chef-shell can run in attribute_mode?
[2013-05-15 00:59:39 -0400] GreatSUN: bluepojo: looks like
[2013-05-15 00:59:40 -0400] GreatSUN: :D
[2013-05-15 00:59:42 -0400] GreatSUN: thanks
[2013-05-15 00:59:47 -0400] bluepojo: woot
[2013-05-15 00:59:55 -0400] GreatSUN: but I got a bigger problem atm
[2013-05-15 01:00:01 -0400] bluepojo: no fun
[2013-05-15 01:00:19 -0400] GreatSUN: bluepojo: yeah, really
[2013-05-15 01:00:25 -0400] GreatSUN: no fun
[2013-05-15 01:00:50 -0400] GreatSUN: I am working on my cookbooks to support windows
[2013-05-15 01:01:12 -0400] GreatSUN: but now it does download cookbook changes, but does not use them
[2013-05-15 01:01:22 -0400] GreatSUN: I see the right stuff in cache directory
[2013-05-15 01:01:35 -0400] GreatSUN: but the output is different
[2013-05-15 01:01:38 -0400] bluepojo: possibly is a dependency resolution issue
[2013-05-15 01:01:39 -0400] GreatSUN: any idea on that?
[2013-05-15 01:02:06 -0400] bluepojo: for instance: if the versions of your latest cookbook's dependencies are unresolvable
[2013-05-15 01:02:17 -0400] GreatSUN: I moved libraries from one cookbook to a new one
[2013-05-15 01:02:19 -0400] bluepojo: and you haven't locked your cookbook version in the environment, chef will happily roll back
[2013-05-15 01:02:22 -0400] GreatSUN: hmmm
[2013-05-15 01:02:24 -0400] bluepojo: so to trouble shoot this
[2013-05-15 01:02:30 -0400] GreatSUN: I will check
[2013-05-15 01:02:48 -0400] bluepojo: the first thing is to lock the version of the cookbook you see being rolled back in the environment
[2013-05-15 01:03:04 -0400] GreatSUN: how do I see that?
[2013-05-15 01:03:05 -0400] bluepojo: if cookbook A is using 0.1.0 but you know 0.2.0 is available
[2013-05-15 01:03:09 -0400] bluepojo: go into your environment
[2013-05-15 01:03:15 -0400] bluepojo: and set a: 0.2.0
[2013-05-15 01:03:18 -0400] bluepojo: in cookbook versions
[2013-05-15 01:03:32 -0400] GreatSUN: it is test system
[2013-05-15 01:03:33 -0400] bluepojo: if dependency resolution is the problem, you should see an error on your next chef-client issue
[2013-05-15 01:03:36 -0400] GreatSUN: private bar
[2013-05-15 01:03:46 -0400] bluepojo: s/issue/run
[2013-05-15 01:03:47 -0400] GreatSUN: uploading changes directly to chefserver
[2013-05-15 01:04:01 -0400] bluepojo: oh.
[2013-05-15 01:04:14 -0400] bluepojo: overwriting the same version?
[2013-05-15 01:04:16 -0400] bluepojo: of the cookbook?
[2013-05-15 01:04:23 -0400] bluepojo: in that case, try nuking your /var/chef/cache dir
[2013-05-15 01:04:39 -0400] bluepojo: the client is probably saying "I have that version already, don't need to download it"
[2013-05-15 01:05:21 -0400] GreatSUN: I did that already
[2013-05-15 01:05:23 -0400] bluepojo: or perhaps try incrementing the version of your cookbook
[2013-05-15 01:05:36 -0400] GreatSUN: and if I am looking in there it has the right version
[2013-05-15 01:05:57 -0400] GreatSUN: but since it is windows... it is C:\chef\cache
[2013-05-15 01:06:00 -0400] bluepojo: oh sure
[2013-05-15 01:06:04 -0400] bluepojo: same deal tho
[2013-05-15 01:06:28 -0400] bluepojo: in that case I'm less sure...
[2013-05-15 01:06:43 -0400] bluepojo: sometimes this happens when there are 2 similar sections of a cookbook... 1 is updated the other is not
[2013-05-15 01:06:51 -0400] bluepojo: and so it confuses people reading the logs
[2013-05-15 01:07:00 -0400] bluepojo: maybe take care to check line numbers in the error output
[2013-05-15 01:07:12 -0400] bluepojo: and confirm your cookbook does not contain that code
[2013-05-15 01:07:45 -0400] GreatSUN: bluepojo: there is no error output that might have some conclusion
[2013-05-15 01:07:58 -0400] bluepojo: or log output, if it's not erroring
[2013-05-15 01:08:01 -0400] GreatSUN: but if I change some debug output it doesn't arrive
[2013-05-15 01:08:19 -0400] bluepojo: debug output meaning Chef::Log.debug?
[2013-05-15 01:08:19 -0400] GreatSUN: maybe I should setup the host again
[2013-05-15 01:08:24 -0400] GreatSUN: yeah
[2013-05-15 01:08:30 -0400] bluepojo: is your log level set to info?
[2013-05-15 01:08:40 -0400] bluepojo: try running chef-client -ldebug
[2013-05-15 01:08:49 -0400] GreatSUN: that is what I am doing
[2013-05-15 01:08:51 -0400] bluepojo: ah ok
[2013-05-15 01:09:06 -0400] GreatSUN: but my changed debug output doesnt arrive at the chef log output
[2013-05-15 01:09:15 -0400] GreatSUN: but at the cache it arrive
[2013-05-15 01:09:17 -0400] GreatSUN: +s
[2013-05-15 01:09:30 -0400] bluepojo: not sure
[2013-05-15 01:11:36 -0400] GreatSUN: if you don't have another idea, I will destroy machine and create it from scratch now
[2013-05-15 01:13:43 -0400] Chef: hey I'm not sure I'm doing things right, but if I have a custom cookbook, and its attributes/default.rb specifies attributes for another cookbook (sysctl), how do I ensure that the other cookbook sees/uses those attributes?
[2013-05-15 01:14:45 -0400] Chef: I've got a cookbook/recipe where I'm disabling IPv6 on some nodes, and it's attributes/default.rb contains some default["sysctl"]["params"][] stuff, but the sysctl cookbook/recipe seems to be ignoring them, even though it's in the run list.
[2013-05-15 01:14:54 -0400] Chef: I feel like I'm missing something...
[2013-05-15 01:15:30 -0400] bluepojo: in a recipe, you should say node.set["sysctl"]["params"][...] = 'value' prior to calling include_recipe "sysctl::whateverecipe"
[2013-05-15 01:15:53 -0400] GreatSUN: bluepojo: wasn't that changed to node.normal ?
[2013-05-15 01:15:53 -0400] Chef: oh...
[2013-05-15 01:16:04 -0400] bluepojo: GreatSUN: probably
[2013-05-15 01:16:19 -0400] GreatSUN: bluepojo: I thought set was deprecated for recipe
[2013-05-15 01:16:32 -0400] Chef: so just having it in the attributes file isn't enough, *and* I need to include_recipe even though said recipe is in the node's run_list?
[2013-05-15 01:16:38 -0400] bluepojo: node["key"] = value was deprecated
[2013-05-15 01:16:41 -0400] bluepojo: I don't know that node.set was
[2013-05-15 01:16:49 -0400] bluepojo: node.set sets default level attrs
[2013-05-15 01:16:53 -0400] bluepojo: node.normal sets normal level
[2013-05-15 01:16:56 -0400] nicgrayson: Hey, what is the best way to add tests to a wrapper cookbook?
[2013-05-15 01:16:59 -0400] bluepojo: tho I haven't looked at it in a while
[2013-05-15 01:17:05 -0400] Chef: from the docs I've found so far, node.set is the same as node.normal
[2013-05-15 01:17:09 -0400] bluepojo: so it wouldn't surprise me if it's changed
[2013-05-15 01:17:13 -0400] bluepojo: ah ok
[2013-05-15 01:17:29 -0400] bluepojo: so set sets normal attrs then
[2013-05-15 01:17:34 -0400] Chef: so I need to move the sysctl stuff out of my attributes file and node.set them in the recipe itself...
[2013-05-15 01:17:35 -0400] bluepojo: in practice, they're overrides cause they run last
[2013-05-15 01:17:37 -0400] GreatSUN: Chef: I would first change my nick ;-)
[2013-05-15 01:17:45 -0400] bluepojo: Chef: yeah, that'll work
[2013-05-15 01:17:57 -0400] Chef: yeah, had this /nick for what feels like forever.
[2013-05-15 01:18:06 -0400] GreatSUN: Chef: in general you have to load other recipes than default if not directly loaded in runlist
[2013-05-15 01:19:13 -0400] GreatSUN: Chef: otherwise you have to have a look at the attributes in your recipes and go on according to them
[2013-05-15 01:19:27 -0400] GreatSUN: if you are running a chef < 11
[2013-05-15 01:19:44 -0400] GreatSUN: then there might be another issue if you use ruby code directly
[2013-05-15 01:20:05 -0400] GreatSUN: cause it is not 100% secure that attributes are all taken in there
[2013-05-15 01:20:05 -0400] Chef: no, trying to do things the "right" way :)
[2013-05-15 01:20:33 -0400] Chef: do i still need to include_recipe "sysctl" if it's already in the run_list?
[2013-05-15 01:21:08 -0400] bluepojo: if your cookbook needs to modify values before sysctl recipe is run, then you should remove it from your runlist and run it via include_recipe
[2013-05-15 01:21:21 -0400] bluepojo: otherwise you need to override those values in node attrs, role attrs, or environment attrs
[2013-05-15 01:21:33 -0400] Chef: hmm.
[2013-05-15 01:22:35 -0400] bluepojo: if your cookbook depends on sysctl, include_recipe is the right way to do it
[2013-05-15 01:22:37 -0400] GreatSUN: bluepojo: wish me luck
[2013-05-15 01:22:50 -0400] GreatSUN: I did a repo-sync now and uploaded recipes again
[2013-05-15 01:22:54 -0400] bluepojo: woot
[2013-05-15 01:23:22 -0400] bluepojo: if sysctl is 100% independent of your other cookbook, your overrides should go in the environment
[2013-05-15 01:23:27 -0400] bluepojo: or on the node
[2013-05-15 01:23:40 -0400] GreatSUN: nope, doesnt work
[2013-05-15 01:24:04 -0400] Chef: Okay, I think my life gets easier if I just move these attributes into our "base" role that every node gets...
[2013-05-15 01:24:08 -0400] bluepojo: another option is to make a wrapper cookbook which is like... my_sysctl, which sets values and calls include_recipe "sysctl"
[2013-05-15 01:24:14 -0400] bluepojo: yeah, that would work
[2013-05-15 01:24:41 -0400] GreatSUN: att/q bluepojo
[2013-05-15 01:24:56 -0400] GreatSUN: I hate typing with this keyboard
[2013-05-15 01:25:09 -0400] GreatSUN: my new ones arriving tomorrow
[2013-05-15 01:25:11 -0400] GreatSUN: eh
[2013-05-15 01:25:13 -0400] GreatSUN: today
[2013-05-15 01:25:13 -0400] bluepojo: hah
[2013-05-15 01:25:18 -0400] bluepojo: GreatSUN:
[2013-05-15 01:25:23 -0400] bluepojo: what if you knife cookbook download
[2013-05-15 01:25:30 -0400] bluepojo: does it have the correct code?
[2013-05-15 01:25:34 -0400] GreatSUN: yeah
[2013-05-15 01:25:38 -0400] bluepojo: cause
[2013-05-15 01:25:40 -0400] bluepojo: if you rebuilt the node
[2013-05-15 01:25:45 -0400] GreatSUN: I bet there is something shitty
[2013-05-15 01:25:46 -0400] bluepojo: that means it's getting the wrong code from the chef server
[2013-05-15 01:25:53 -0400] GreatSUN: but I don
[2013-05-15 01:26:02 -0400] GreatSUN: 't know what and how to find out
[2013-05-15 01:26:03 -0400] bluepojo: knife cookbook show yourcookbook
[2013-05-15 01:26:07 -0400] bluepojo: how many versions are available?
[2013-05-15 01:27:03 -0400] GreatSUN: 1.0.0 and 0.0.0
[2013-05-15 01:27:09 -0400] GreatSUN: and from the other
[2013-05-15 01:27:17 -0400] GreatSUN: 1.0.0 and 0.3.29
[2013-05-15 01:27:18 -0400] bluepojo: interesting...
[2013-05-15 01:27:25 -0400] bluepojo: is 1.0.0 the one with the correct code?
[2013-05-15 01:27:36 -0400] GreatSUN: should be
[2013-05-15 01:28:00 -0400] GreatSUN: btw.
[2013-05-15 01:28:30 -0400] GreatSUN: is there some definition what I need to have in a cookbook?
[2013-05-15 01:28:43 -0400] GreatSUN: cause I have metadata, readme and libraries
[2013-05-15 01:28:49 -0400] bluepojo: knife cookbook create yourcoookbook should generate the right files
[2013-05-15 01:29:05 -0400] bluepojo: I thing the bare minimum is metadata.rb and.. that might be it?
[2013-05-15 01:29:06 -0400] bluepojo: hah
[2013-05-15 01:29:08 -0400] bluepojo: not sure
[2013-05-15 01:29:08 -0400] GreatSUN: while it is just a library collection
[2013-05-15 01:31:21 -0400] bluepojo: I think I'd have to be able to see your chef server and node to be able to figure out what's going on
[2013-05-15 01:31:42 -0400] GreatSUN: bluepojo: teamviewer?
[2013-05-15 01:31:44 -0400] wamilton: anyone ever had chefspec fail to find the cookbook you're actually testing?
[2013-05-15 01:31:46 -0400] GreatSUN: :q
[2013-05-15 01:31:50 -0400] GreatSUN: argl
[2013-05-15 01:32:17 -0400] GreatSUN: two keyboards
[2013-05-15 01:32:20 -0400] GreatSUN: two computers
[2013-05-15 01:32:32 -0400] bluepojo: GreatSUN: think that's when I have to start charging consulting fees :P
[2013-05-15 01:32:34 -0400] GreatSUN: and a shitty old keyboard for the one not working anymore
[2013-05-15 01:32:43 -0400] GreatSUN: bluepojo: :-P
[2013-05-15 01:33:03 -0400] bluepojo: which is something I've done before
[2013-05-15 01:47:04 -0400] GreatSUN_: bluepojo: it works now...
[2013-05-15 01:47:10 -0400] bluepojo: how'd you fix it?
[2013-05-15 01:47:24 -0400] GreatSUN_: looks like on windows always a new version is needed
[2013-05-15 01:47:41 -0400] bluepojo: but
[2013-05-15 01:47:43 -0400] bluepojo: you rebuilt the box?
[2013-05-15 01:47:48 -0400] bluepojo: that wouldn't make sense to me
[2013-05-15 01:47:51 -0400] GreatSUN_: nope
[2013-05-15 01:47:58 -0400] GreatSUN_: i did not
[2013-05-15 01:48:00 -0400] bluepojo: oh ok
[2013-05-15 01:48:20 -0400] bluepojo: glad it got sorted ouyt
[2013-05-15 01:48:21 -0400] bluepojo: out
[2013-05-15 01:48:37 -0400] GreatSUN_: windows never will get my friend though
[2013-05-15 01:48:44 -0400] bluepojo: ugh, you're telling me
[2013-05-15 01:49:00 -0400] bluepojo: I still have nightmares of getting Berkshelf to work on Windows
[2013-05-15 01:49:35 -0400] bluepojo: the world would be a better place if windows became POSIX compliant :)
[2013-05-15 01:50:24 -0400] GreatSUN_: didnt you forget that microsoft defines the world?
[2013-05-15 01:51:04 -0400] bluepojo: something like 90% of servers are linux
[2013-05-15 01:53:45 -0400] bluepojo: that's a BS stat
[2013-05-15 01:53:53 -0400] bluepojo: but I'm sure I read it somewhere, so it's legit :D
[2013-05-15 01:54:21 -0400] leifmadsen: only 63% of all stats are made up
[2013-05-15 01:54:48 -0400] GreatSUN_: I dont care
[2013-05-15 01:54:57 -0400] GreatSUN_: real servers are linux/unix based
[2013-05-15 01:54:58 -0400] bluepojo: 32% linux, 35% windows, 30% unknown: http://en.wikipedia.org/wiki/Usage_share_of_operating_systems
[2013-05-15 01:55:05 -0400] GreatSUN_: others I dont care
[2013-05-15 01:55:14 -0400] bluepojo: I'll exercise my bias and say unknown = linux :)
[2013-05-15 01:55:26 -0400] GreatSUN_: unknown=unix
[2013-05-15 01:55:35 -0400] bluepojo: could be
[2013-05-15 01:55:41 -0400] bluepojo: solaris?
[2013-05-15 01:55:50 -0400] bluepojo: oh I see
[2013-05-15 01:55:56 -0400] bluepojo: that's under unix/unix-like header
[2013-05-15 01:56:23 -0400] bluepojo: so still... 2 linux servers for every 1 windows
[2013-05-15 01:56:35 -0400] bluepojo: linux/unix
[2013-05-15 01:56:37 -0400] bluepojo: *nix
[2013-05-15 01:57:58 -0400] GreatSUN_: now I see a newline in a recipe where there isnt any
[2013-05-15 01:58:19 -0400] GreatSUN_: wth!?
[2013-05-15 03:10:38 -0400] miah: ?
[2013-05-15 03:30:03 -0400] pcarrier_: hey! I have roles A, B, C,  whose run_list include a role D, and the role D's run_list includes E. can I exclude E from A?
[2013-05-15 03:30:59 -0400] pcarrier_: role D contains the "common" stuff, and is ran everywhere. I'd rather specify that I don't want E in a few places rather than have to specify I want it everywhere else
[2013-05-15 03:43:06 -0400] bluekelp_: you might be able to check a node attribute/role before an 'include_recipe' statement in your own recipe
[2013-05-15 03:43:45 -0400] bluekelp_: so have D's run_list include E everywhere but move the excluded stuff to another and have it skipped for those nodes and included elsewhere
[2013-05-15 04:06:33 -0400] SirFunk_: Do you guys keep your chef/vagrant stuff in the root of your projects and check it in to git?
[2013-05-15 04:07:25 -0400] gchristensen: SirFunk_: yes absolutely, that way its versioned with your project.
[2013-05-15 04:08:56 -0400] SirFunk_: yeah ok. It just seems like cookbooks would end up causing a lot of cruft if you update them
[2013-05-15 05:05:27 -0400] tigris_: hey guys, i found http://tickets.opscode.com/browse/CHEF-2936 which looks to be about attribute interpolation which i've been waiting for since i started using chef... i notice it looks to be implemented now but i wonder if someone can point me at some docs/examples on how to use it?
[2013-05-15 05:34:46 -0400] SirFunk_: anyone use renv in their chef setups? I can't seem to get it so that my vagrant user can install gems or anything by default
[2013-05-15 05:35:50 -0400] prana: rbenv?
[2013-05-15 05:38:05 -0400] SirFunk_: it's a ruby thing like rvm
[2013-05-15 05:44:49 -0400] mixandgo: hello, I'm getting this error and I don't really know why: http://pastie.org/pastes/7909947/text?key=rtppibpbvgcitl8vkp2rg
[2013-05-15 05:49:15 -0400] coderanger: mixandgo: From the manpage for groupmod 'specified group doesnt exist'
[2013-05-15 05:49:45 -0400] mixandgo: coderanger: actually I've ran it on the server and the group already exists, which is why it complains
[2013-05-15 05:49:53 -0400] mixandgo: cause it's not unique
[2013-05-15 05:50:09 -0400] mixandgo: so I guess the solution would be to pass -o to groupmod ?
[2013-05-15 05:51:05 -0400] tigris_: SirFunk_: i am using rbenv, there is a chef recipe for it
[2013-05-15 05:52:02 -0400] coderanger: mixandgo: https://github.com/opscode/chef/blob/master/lib/chef/provider/group/groupadd.rb is the relevant backing code
[2013-05-15 05:53:16 -0400] SirFunk_: tigris_: yes, i've gotten it to install rbenv and ruby. However even though myuser is in the rbenv group the install path for that ruby is chmodded 755 so that the user can't write gems to it
[2013-05-15 05:53:48 -0400] mixandgo: coderanger: I think this is the one https://github.com/opscode/chef/blob/master/lib/chef/provider/group/groupmod.rb
[2013-05-15 05:53:58 -0400] coderanger: No, it isn't
[2013-05-15 05:54:14 -0400] coderanger: I linked the correct one :)
[2013-05-15 05:54:15 -0400] tigris_: SirFunk_: which rbenv recipe are you using? i've only experience with the rbenv::user one, so rbenv was installed specifically for my user and not system wide
[2013-05-15 05:54:36 -0400] stormerider: i'm trying to set up a nagios server via chef and it looks like it's not creating a hostgroup for monitoring. ive got a role named monitoring, which it's applying to the server, but the hostgroup isn't created. any ideas whats wrong?
[2013-05-15 05:54:53 -0400] mixandgo: coderanger: I don't see anything about groupmod there
[2013-05-15 05:55:01 -0400] SirFunk_: tigris_: hmm. i was using the one from opscode
[2013-05-15 05:55:10 -0400] coderanger: mixandgo: https://github.com/opscode/chef/blob/master/lib/chef/provider/group/groupadd.rb#L56
[2013-05-15 05:55:45 -0400] coderanger: mixandgo: the ::Groupmod provider is for 'group mod' which is a NetBSD command :)
[2013-05-15 05:56:35 -0400] coderanger: mixandgo: The default group provider is ::Gpasswd, which inherits from ::Groupadd
[2013-05-15 05:56:37 -0400] mixandgo: coderanger: so, how can I override this to take the -o flag ? or should I ? I am not even sure why it's not there by default
[2013-05-15 05:57:35 -0400] coderanger: mixandgo: Thats why I pasted the relevant code, you would need to subclass the gpasswd provider and alter set_options
[2013-05-15 05:58:11 -0400] tigris_: SirFunk_: my apologies then... i have been using https://github.com/fnichol/chef-rbenv for reasons I can't remember
[2013-05-15 05:58:21 -0400] coderanger: Non-unique GIDs is a situation I can safely say I've never run in to before :)
[2013-05-15 05:58:52 -0400] mixandgo: coderanger: hence the reason why I question this... I am not doing anything special here...
[2013-05-15 05:59:03 -0400] mixandgo: I've just re-run my old code and I get that error
[2013-05-15 05:59:17 -0400] SirFunk_: tigris_: maybe the same reasons that are my problems with the one on opscode . I'll look into that one
[2013-05-15 06:00:08 -0400] coderanger: mixandgo: Yeah, if you leave off the GID it will work, thats just the normal use case
[2013-05-15 06:00:17 -0400] coderanger: mixandgo: I'll write up a bug report in a moment :)
[2013-05-15 06:00:24 -0400] mixandgo: thank you
[2013-05-15 06:00:25 -0400] miah: i've dealt with non-unique uid/gid's. nfs without nis.. it was fun =)
[2013-05-15 06:00:36 -0400] stormerider: ah, looks like it just took a while to update
[2013-05-15 06:00:38 -0400] coderanger: mixandgo: It should probably not be doing anything is the thing
[2013-05-15 06:00:59 -0400] coderanger: mixandgo: If the GID is correct, the bug is that chef is running groupmod at all
[2013-05-15 06:01:08 -0400] coderanger: miah: Only thing work is nfs with yp :)
[2013-05-15 06:02:04 -0400] coderanger: er, worse
[2013-05-15 06:02:07 -0400] coderanger: Too tired can't brain
[2013-05-15 06:03:43 -0400] miah: "netgroup maps have a maximum of 200 entries, or 1024 characters per line." was a fun one =)
[2013-05-15 06:32:30 -0400] Guest93: At the top of every irc channel
[2013-05-15 06:32:37 -0400] Guest93: Theres an aspie
[2013-05-15 06:33:02 -0400] Guest93: And that aspie is like a fly on the wall in the kitchen that you cant get rid of
[2013-05-15 06:33:14 -0400] Guest93: It gets rid of you
[2013-05-15 06:51:53 -0400] coderanger: Guest93: Can I help you?
[2013-05-15 06:52:19 -0400] coderanger: Please refrain from disparaging language while in here
[2013-05-15 07:26:59 -0400] mib_chef: Hello, does anyone know where knife will find its settings from if one deletes ~/.chef/knife.rb? I just moved it and it was able to still do a knife ec2 server list correctly. I need to talk to two different chef servers and thought I would create a symbolic link to knife.rb in ~/.chef which will change as required. However when there is no knife.rb also knife seems to work
[2013-05-15 07:28:08 -0400] stormerider: coderanger: thank you. (also, ugh, yp *shudder*)
[2013-05-15 07:28:21 -0400] mib_chef: Ignore the above question. It does not work if knife.rb is removed. My bad.
[2013-05-15 07:29:28 -0400] tolland: one of my remote guys is seeing failures to upload to hosted chef the cookbook files using a proxy, it appears the connection to s3 fails to use the proxy, but the api.opscode.com uses it correctly
[2013-05-15 08:38:05 -0400] admin0: hi .. i have chef-solo and crated some receipies .. how do I run it to remote server via ssh ?
[2013-05-15 08:38:39 -0400] admin0: doing knife node list returns ERROR: Your private key could not be loaded from /etc/chef/client.pem  ..
[2013-05-15 08:39:09 -0400] admin0: but i was not able to find anywhere how do I create this file on the workstation which i am using as development and test for chef-solo
[2013-05-15 08:55:06 -0400] denniswisnia: anyone using the application_nginx and can give me a kickstart with the SSL Cert?
[2013-05-15 09:04:03 -0400] helllen: helllo
[2013-05-15 09:04:23 -0400] helllen: how can I access to chef-server-webui ?
[2013-05-15 09:04:33 -0400] helllen: nginx is listenning on port 443
[2013-05-15 09:05:05 -0400] helllen: I try to access to https://ip with my browser but I get no response
[2013-05-15 09:28:15 -0400] aruntomar: helllen: r u using open source chef server?
[2013-05-15 09:29:34 -0400] aruntomar: helllen: u need to use http://fqdn will redirect automatically to https://fqdn
[2013-05-15 09:29:49 -0400] specialsauce: was someone looking for me? my irc client says i got pinged but its lost in scrollback
[2013-05-15 09:48:07 -0400] karlfreeman: It would appear that a `notifies` Is running even though there is a `only_if` preventing it from being ran. Is there a way to make `notifies` adhere to the `only_if`?
[2013-05-15 09:51:12 -0400] helllen: <aruntomar>, I have tried with fqdn and nothing
[2013-05-15 09:51:24 -0400] helllen: chef-server-webui doesn't appear
[2013-05-15 09:52:37 -0400] aruntomar: helllen: is your fqdn publicly resolvable
[2013-05-15 09:52:54 -0400] aruntomar: if not then make an entry in hosts file
[2013-05-15 09:53:39 -0400] helllen: I have added in my /etc/hosts
[2013-05-15 09:55:10 -0400] aruntomar: what's the server name in /var/opt/chef-server/nginx/etc/nginx.conf
[2013-05-15 09:56:47 -0400] helllen: localhost :-D
[2013-05-15 09:56:58 -0400] helllen: I will change it
[2013-05-15 09:57:08 -0400] karlfreeman: Would I be right in my thinking that a `notifies :restart, "service[foo]", :immediately` is ran regardless of `only_if`'s and `not_if`'s?
[2013-05-15 09:57:24 -0400] aruntomar: helllen: you need to change the fqdn of your system
[2013-05-15 09:57:43 -0400] aruntomar: helllen: then run chef-server-ctl reconfigure
[2013-05-15 09:58:22 -0400] aruntomar: helllen: that will change the nginx config automatically, you might have to restart the nginx service
[2013-05-15 10:00:07 -0400] helllen: can I change that file and restart only the nginx ?
[2013-05-15 10:01:28 -0400] aruntomar: helllen: it should also work
[2013-05-15 10:02:19 -0400] helllen: thanks
[2013-05-15 10:02:34 -0400] helllen: how it discriminate chef-server with chef-server-webui
[2013-05-15 10:02:35 -0400] helllen: ?
[2013-05-15 10:02:56 -0400] helllen: I mean into my chef-clients I have used https://<manager_ip>
[2013-05-15 10:02:59 -0400] helllen: and it worked
[2013-05-15 10:03:12 -0400] aruntomar: helllen: chef server is basically the api, webui uses the api to interact with it
[2013-05-15 10:03:33 -0400] helllen: yes I know but the are managed by nginx, isn't ?
[2013-05-15 10:04:28 -0400] aruntomar: helllen: check the upstream section in the nginx conf file
[2013-05-15 10:05:49 -0400] aruntomar: helllen: last section "location /" passes the request to erchef
[2013-05-15 10:07:48 -0400] helllen: worked, <aruntoma>
[2013-05-15 10:07:50 -0400] helllen: thanks a lot
[2013-05-15 10:10:22 -0400] aruntomar: helllen: :) welcome
[2013-05-15 10:19:10 -0400] helllen: aruntomar, chef-serverwebui is listening on 127.0.0.1:9462 
[2013-05-15 10:19:11 -0400] helllen: ?
[2013-05-15 10:19:18 -0400] helllen: and nginx redirect to this address ?
[2013-05-15 10:25:15 -0400] aruntomar: helllen: yes
[2013-05-15 10:30:32 -0400] helllen: is is strange because with apache normally it is not necessary for example
[2013-05-15 10:30:42 -0400] helllen: it doesn't need another server running
[2013-05-15 10:33:41 -0400] Caez: hello, I have a problem with chef 11. I have to push values in array (Attribute). What is the good method ? ( node[:authorization].push?("nagios  ALL=(ALL) NOPASSWD."). Thanks
[2013-05-15 11:00:17 -0400] helllen: <aruntomar>, I have noticed you use unicorn to starts chef-server
[2013-05-15 11:00:28 -0400] helllen: is not better passenger =
[2013-05-15 11:00:29 -0400] helllen: ?
[2013-05-15 11:06:23 -0400] aruntomar: helllen: unicorn is supposed to be much better than passenger
[2013-05-15 11:10:34 -0400] helllen: and compared with puma ?
[2013-05-15 11:28:36 -0400] aruntomar: helllen: haven't used puma, but heard/read good things about it also.
[2013-05-15 12:02:24 -0400] helllen: <aruntomar> thanks
[2013-05-15 12:02:44 -0400] helllen: why nginx use /version ?
[2013-05-15 12:03:02 -0400] helllen: I would like to delete it because anyone can see my chef-server version
[2013-05-15 12:03:14 -0400] helllen: and I don't want to show this to everybody
[2013-05-15 12:12:26 -0400] woltage: Java cookbook problems, anyone?
[2013-05-15 12:14:05 -0400] woltage: Some problems when chef tries to run update-java-alternatives.
[2013-05-15 12:14:42 -0400] woltage: Can someonen else confirm this with Centos?
[2013-05-15 13:34:33 -0400] bdha_: Should smartos_package actually work in Chef 11?
[2013-05-15 13:43:56 -0400] postwait: how do I ask chef server what recipes are being applied to a specific node?
[2013-05-15 13:44:14 -0400] postwait: run list can contain roles.. I need it completely resolved to recipes.
[2013-05-15 13:49:20 -0400] aruntomar: postwait: after you get the role name in the run_list, query the server for the recipes in the role ;)
[2013-05-15 13:49:47 -0400] postwait: hmm.. that's not overly efficient.. but okay.
[2013-05-15 13:50:32 -0400] postwait: Can roles contain roles?
[2013-05-15 13:53:21 -0400] nathenharvey: postwait: a role can be included in a role's run_list, yes
[2013-05-15 13:54:09 -0400] postwait: So I have recursively call the API to get a complete list of recipes?
[2013-05-15 13:54:42 -0400] nathenharvey: postwait: no, I don't think you'll have to
[2013-05-15 13:55:24 -0400] nathenharvey: for example `knife node show NODENAME` will show you the Roles applied and the full expanded list of Recipes
[2013-05-15 13:55:52 -0400] postwait: oh I don't see that in the node object. (just the run_list)
[2013-05-15 13:56:53 -0400] nathenharvey: you're trying to get at the list of recipes on a node from within a recipe?
[2013-05-15 13:57:22 -0400] postwait: no.. from the API on a non-participating node.
[2013-05-15 13:57:49 -0400] postwait: if knife show shows the fully-expanded recipe list, I just need to figure out what API calls it is making to do that.
[2013-05-15 13:58:08 -0400] postwait: but if my node has a runlist with role A, and role A has a runlist with role B, and role B....
[2013-05-15 13:58:08 -0400] gkarekinian: Recipes included inside other recipes (from the wrapper/policy cookbooks pattern) are confusing though, they're not displayed in the expanded run list
[2013-05-15 13:58:48 -0400] postwait: interesting.. is the run_list in the node already expanded?
[2013-05-15 13:58:58 -0400] postwait: i don't think my config here is complex enough to test that.
[2013-05-15 14:08:28 -0400] s2r2: hello #chef.  anyone else trying to use strainer stumbled upon this? Exception `TypeError' at /Users/me/.rvm/gems/ruby-1.9.3-p385/gems/strainer-2.0.0/lib/strainer/sandbox.rb:187 - can't dup NilClass
[2013-05-15 14:09:46 -0400] NaTx: hi all
[2013-05-15 14:10:17 -0400] NaTx: does anybody know how to get the admin users' key from a chef server 10.14???
[2013-05-15 14:14:21 -0400] postwait: so this doc: http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2013-05-15 14:14:29 -0400] postwait: has an Attribute Precedence section
[2013-05-15 14:15:46 -0400] postwait: when I pull a node via API are the bits listed in that (default, normal) are those "the attribute file" ?
[2013-05-15 14:15:49 -0400] senorchang: hi everyone, has anybody had success with decrypting encrypted data bags with chef-solo yet? When I try to access a property in an encrypted data bag, chef-solo throws out DecryptionFailure, but chef-client runs fine (they use the same key and the same data bag)
[2013-05-15 14:16:03 -0400] postwait: As I don't see the "node" listed in that precedence chart.
[2013-05-15 14:17:37 -0400] senorchang: When I try to log the data bag item, chef-solo and chef-client shows different results as well, as can be seen here: http://pastebin.com/UAM0pn3i For some reason chef-solo shows the decrypted properties but can't access them, while chef-client shows the encrypted properties and can access them
[2013-05-15 14:25:51 -0400] Joel: I believe it's possible to have vagrant pull recipes from chef hosted, does this sound correct?
[2013-05-15 14:26:43 -0400] haylon: When defining windows paths in a chef attributes files, the '\' character seems to disappear. is this because ruby sees it as an escape character and cuts it out? Then would I need to put a double '\\' to keep it in there?
[2013-05-15 14:33:22 -0400] AckZ: dumb question maybe, but how does one upgrade chef on a node that used the omnibus install?
[2013-05-15 14:34:04 -0400] nathenharvey: AckZ: check this cookbook - http://community.opscode.com/cookbooks/omnibus_updater
[2013-05-15 14:34:44 -0400] AckZ: nathenharvey: thanks :)
[2013-05-15 15:05:35 -0400] poolpog: hi
[2013-05-15 15:05:37 -0400] poolpog: I'm here
[2013-05-15 15:06:17 -0400] poolpog: quick question... I have a gem_package that is a cookbook_file... I want the package to :install only after the cookbook_file has been uploaded...
[2013-05-15 15:06:36 -0400] poolpog: so I used    "action :nothing"    on the gem_package
[2013-05-15 15:07:01 -0400] poolpog: and    "notifies  :install, "cookbook_file[name_of_thing]", :immediately"   on the cookbook_file
[2013-05-15 15:07:34 -0400] poolpog: however, the "notifies" rule seems to be not doing anything.  Do I need to put it in a certain order in the recipe?
[2013-05-15 15:08:13 -0400] gleam: it should notify gem_package[packagneame]
[2013-05-15 15:08:14 -0400] gleam: not cookbook_file
[2013-05-15 15:08:56 -0400] poolpog: Sorry! yes, typo -- it does notify that....   notifies :install, "gem_package[#{name_of_thing}]", :immediately
[2013-05-15 15:10:08 -0400] poolpog: so, when I change "action :nothing" to "action :install" inthe gem package, and leave out the "notifies :install...."
[2013-05-15 15:10:09 -0400] poolpog: it works
[2013-05-15 15:10:23 -0400] poolpog: however, I'm concerned that it is possible that it won't work
[2013-05-15 15:10:39 -0400] poolpog: should I not worry about that? i.e. this is something that will always work?
[2013-05-15 15:12:34 -0400] steveb: if i include_recipe in another recipe, but want to override some of the default attributes in the included recipe in this new one, what's the best way of doing that? override attribute or will just setting the default in the new recipe for that attribute override the included recipes defaults?
[2013-05-15 15:14:00 -0400] wildahunden: I'm getting an error with the subversion resource.  It runs svn info and gets the revision of the last change on the file.  It then issues an svn export -r8 which fails if that revision isn't the latest revision in the log.  If it's the latest, it works.  I have verified that the revision used is the correct revision for the last change on the file.
[2013-05-15 15:14:41 -0400] wildahunden: This is more likely an svn issue, but I thought I'd pass it along here in case anybody else has seen it.
[2013-05-15 15:29:48 -0400] sabooky: Quick question: When using chef-solo, it seems all attribute files are processed. So if I have a attributes/my_app.rb it gets loaded and override's my settings
[2013-05-15 15:30:46 -0400] sabooky: Basically, I was trying to do the approach of "library cookbook" + "application cookbook", but whenever I override attributes in my application cookbook.. it parses those regardless of whether or not I'm using said cookbook or attribute
[2013-05-15 15:31:11 -0400] sabooky: Is there any way to use chef-solo and not have it parse all attributes for all cookbooks, but rather the only ones I'm using.
[2013-05-15 15:32:58 -0400] haylon: Running into an issue with Windows Services. The recipe calls for the 'service "Zabbix Agent" do' but i receive this error. http://pastebin.com/FHWhejeZ any ideas on what I am doing wrong?
[2013-05-15 15:33:12 -0400] haylon: But
[2013-05-15 15:33:29 -0400] haylon: when I issue the command for zabbix to start via commandline, it starts up with out a problem
[2013-05-15 15:36:09 -0400] Cheeezit: attribute order on a resource does not matter, correct?
[2013-05-15 15:38:01 -0400] sethvargo: @s2r2 hey - i hear you're having problems with strainer?
[2013-05-15 15:40:53 -0400] s2r2: sethvargo: I'm probably just stupid or forgetting something
[2013-05-15 15:41:31 -0400] sethvargo: @s2r2 what's going on?
[2013-05-15 15:42:05 -0400] s2r2: sethvargo: "strainer test my-cookbook" gives http://pastie.org/7911920
[2013-05-15 15:42:07 -0400] ssd7: Cheeezit: shouldn't matter, correct
[2013-05-15 15:43:37 -0400] sethvargo: @s2r2 does ox exist in the cookbooks path? does it have a metadata.rb that has a name attribute?
[2013-05-15 15:45:58 -0400] s2r2: sethvargo: metadata.rb has the name attr; cookbooks path in knife's sense?  it's in cookbooks/ox from the cwd of the strainer test call
[2013-05-15 15:48:40 -0400] sethvargo: @s2r2 can you run `bundle exec strainer test debug` and gist the output?
[2013-05-15 15:51:16 -0400] s2r2: sethvargo: happily: https://gist.github.com/5585011
[2013-05-15 15:51:41 -0400] s2r2: (with bundle exec: https://gist.github.com/5585014 )
[2013-05-15 15:52:01 -0400] s2r2: oh I missed stderr; but that's the same as before
[2013-05-15 15:55:45 -0400] sethvargo: @s2r2 is there any way you can zip me that cookbook? or is it proprietary?
[2013-05-15 15:56:59 -0400] sethvargo: @s2r2 I think I know what's going on, I just need to trace it down and see why it's applying to this cookbook
[2013-05-15 15:57:22 -0400] s2r2: sethvargo: It happens with 'apache2', too, for me...
[2013-05-15 15:57:47 -0400] s2r2: (in cookbooks/, just next too the other one)
[2013-05-15 15:58:35 -0400] sethvargo: okay. ill use that
[2013-05-15 15:58:49 -0400] s2r2: (recent checkout of apache2,revision 8d9aba9)
[2013-05-15 16:01:23 -0400] sethvargo: @s2r2 I just clone apache2@8d9aba9 into my cookbooks/ directory and everything is working fine...
[2013-05-15 16:02:05 -0400] sethvargo: What does your chef repo look like?
[2013-05-15 16:02:22 -0400] s2r2: oh, cookbooks is a symlink... I should check that...
[2013-05-15 16:02:59 -0400] s2r2: hmm no didn't help
[2013-05-15 16:03:49 -0400] sethvargo: @s2r2 can you hop on a hangout real quick?
[2013-05-15 16:04:22 -0400] s2r2: yes, sure, 1 sec
[2013-05-15 16:04:30 -0400] sethvargo: @s2r2 https://plus.google.com/hangouts/_/39306c284a8aee998ebfeea23965f9d75403bcdb (and anyone else who wants to join)
[2013-05-15 16:08:25 -0400] kisoku: so. I have this bizarre behaviour with berkshelf where it seems to be preferring a cb on my local chef server over cbs from the community site while using test-kitchen
[2013-05-15 16:08:55 -0400] tinychaos42: hi
[2013-05-15 16:15:31 -0400] s2r2: gtg. sethvargo, thanks a lot (again) :)
[2013-05-15 16:22:16 -0400] nicgrayson: sethvargo: do you have an opinion on wrapper cookbook testing?
[2013-05-15 16:24:32 -0400] sethvargo: @nic
[2013-05-15 16:24:36 -0400] sethvargo: @nicgrayson what do you mean?
[2013-05-15 16:25:29 -0400] nicgrayson: so lets say i make companyname_java to wrap the opscode java cb so i can set attrs for version etc
[2013-05-15 16:26:01 -0400] nicgrayson: should i be testing the setting of those attrs or assume the upsteam tests are good?
[2013-05-15 16:26:52 -0400] nicgrayson: is there a way to port the upstream tests in?
[2013-05-15 16:27:01 -0400] sethvargo: you should write specs to make sure you're actually setting the attributes (think regression), but i dont see a need for integrations
[2013-05-15 16:27:25 -0400] nicgrayson: makes sense thanks
[2013-05-15 16:27:32 -0400] sethvargo: np
[2013-05-15 16:34:28 -0400] helllen: helllo again
[2013-05-15 16:34:35 -0400] helllen: what is bookshelf  used for ?
[2013-05-15 16:34:40 -0400] helllen: I cannot understand it
[2013-05-15 16:34:59 -0400] helllen: is is a s3 compatible API but I don't know why chef needs it
[2013-05-15 16:35:00 -0400] helllen: :-D
[2013-05-15 16:37:01 -0400] nd___: helllen: Maybe http://www.opscode.com/blog/chefconf-talks/the-berkshelf-way-jamie-winsor/ helps you with it
[2013-05-15 16:56:30 -0400] helllen: friki video :-D
[2013-05-15 17:10:39 -0400] coderanger: helllen: Thats how we start cookbook file data
[2013-05-15 17:21:47 -0400] flipture: Does anyone know about the best practices for chaining resources? I'd like to avoid the problem where resource 1 completes, calls resource 2 which failes, and resource 3 never gets called.
[2013-05-15 17:22:07 -0400] flipture: Then you run chef again and since resource 1 completed, it never retries resource 2,etc...
[2013-05-15 17:22:10 -0400] flipture: Thoughts?
[2013-05-15 17:22:12 -0400] zaargy: is there anything like the foreman for chef?
[2013-05-15 17:28:04 -0400] sabooky: is there any way to make chef-solo only load attribute files from used cookbooks instead of all attribute files?
[2013-05-15 17:40:56 -0400] shane_: if node.fqdn=="somenode.mydomain.com"
[2013-05-15 17:41:00 -0400] shane_: this is breaking in chef 11 now?
[2013-05-15 17:49:39 -0400] rava: anyone else using emacs for working on their recipes, and have funky indentation issues?
[2013-05-15 17:51:26 -0400] ryanisnan: I'm using the Postgresql and databases cookbooks to provision Postgres. I'm having a problem setting the encoding/locale however. I'm trying to set the encoding to UTF8, but I'm getting an error about not matching my locale en_US.
[2013-05-15 17:51:38 -0400] miah: moin
[2013-05-15 17:53:04 -0400] c_t: hail, miah
[2013-05-15 17:53:18 -0400] densone_: Any recommendations for a community cookbook that will install security patches on ubuntu.
[2013-05-15 17:54:16 -0400] bdha_: https://github.com/cookbooks/ossec ?
[2013-05-15 17:56:07 -0400] densone_: @bdha_ I am looking for something that will just update the security apt repo.
[2013-05-15 18:00:56 -0400] christop1e: Hi there, I'm trying to bootstrap chef on ubuntu13.04. That doesn't work out of the box, so I set the -d ubuntu12.10-gems flag. Is that the correct way to do it?
[2013-05-15 18:03:20 -0400] bluekelp_: anyone else use chef for "actions" on servers (like restarting services?) - i setup a simple tag based system for code deploys but not sure how far to push it. there's overlap with stuff like fabric but i like having fewer tools to remember syntax/quirks, etc.
[2013-05-15 18:03:46 -0400] matticulous: ryanisnan: isn't all of that set in the underlying attributes file (wrapped cookbook)? are you referring to lc_messages, etc.?
[2013-05-15 18:04:09 -0400] miah: bluekelp_: https://github.com/chrisroberts/flock_of_chefs
[2013-05-15 18:04:44 -0400] spheromak: miah how goes the lwrp of lwrps' work ?
[2013-05-15 18:05:10 -0400] miah: spheromak: =)
[2013-05-15 18:05:12 -0400] spheromak: or "cookbook interfaces" :D
[2013-05-15 18:05:23 -0400] spheromak: been thinking about it alot more since the conf
[2013-05-15 18:05:28 -0400] miah: https://github.com/miah/chef_logstash/blob/master/libraries/provider_logstash_instance.rb
[2013-05-15 18:05:31 -0400] miah: would love feedback
[2013-05-15 18:05:34 -0400] miah: =)
[2013-05-15 18:05:35 -0400] matticulous: can anyone tell me how to redefine an attribute as part of the chef run? use case is the postgresql cbi want the wrapped cb to run with the defined postgresql_dir, but then redefine as part of mine and re-run initdb.
[2013-05-15 18:05:44 -0400] spheromak: and if you're following the openstack-chef ML the need is raising it's head there.
[2013-05-15 18:06:05 -0400] miah: im the worst at following email
[2013-05-15 18:06:12 -0400] spheromak: also anyone know of a github hooks lwrp ?
[2013-05-15 18:06:27 -0400] spheromak: If not ill go ahead and turn my serice hook codes into an lwrp
[2013-05-15 18:06:28 -0400] miah: spheromak: im going to write one.
[2013-05-15 18:06:39 -0400] miah: likely not a lwrp though :P
[2013-05-15 18:06:42 -0400] spheromak: miah already have code. Just need to turn the classes into an lwrp
[2013-05-15 18:06:46 -0400] miah: ah awesome
[2013-05-15 18:07:02 -0400] bluekelp_: miah: thanks. looks interesting. specifically i'm wondering about "action" tags to do things like bounce services (remotely via "knife tag create n action-bounce" and a forced convergence if it's urgent)
[2013-05-15 18:07:30 -0400] miah: im not sure i would use tags for much honestly
[2013-05-15 18:07:38 -0400] miah: probably better to use zookeeper =)
[2013-05-15 18:07:52 -0400] bluekelp_: like i'm not sure if this really shouldn't be done with chef; pros - pretty much done, reuse tools; cons - not really chef's forte
[2013-05-15 18:08:15 -0400] spheromak: miah: re: logstash loking pretty nice. I will lok into it more.
[2013-05-15 18:08:17 -0400] miah: if chef-client didn't run on a interval it would be more suited
[2013-05-15 18:08:27 -0400] spheromak: indeed.
[2013-05-15 18:09:04 -0400] miah: should have a thread that checks in and does things if changes, but no reason it can't always be watching the state of files or accepting a push.
[2013-05-15 18:09:26 -0400] miah: its clearly in the pipe line
[2013-05-15 18:09:46 -0400] spheromak: miah can always go put some life into my chef-inotify hacks :D
[2013-05-15 18:10:38 -0400] miah: ya
[2013-05-15 18:10:50 -0400] spheromak: needs support on the server tho
[2013-05-15 18:10:56 -0400] spheromak: to get the full picture.
[2013-05-15 18:10:58 -0400] miah: i've been thinking about it alot, but not sure i want to learn ffi yet
[2013-05-15 18:14:29 -0400] spheromak: why would you need ffi ?
[2013-05-15 18:15:08 -0400] jtgiri_: hey guys, I am getting this error message when I try to do vagrant up :  Unknown configuration section 'berkshelf'. , I do have vagrant vagrant-berkshelf installed : sudo  vagrant plugin install vagrant-berkshelf Installing the 'vagrant-berkshelf' plugin. This can take a few minutes... Installed the plugin 'vagrant-berkshelf (1.2.0)'!
[2013-05-15 18:15:39 -0400] ivey: what version of vagrant?
[2013-05-15 18:16:39 -0400] jtgiri_: Vagrant version 1.2.1
[2013-05-15 18:17:19 -0400] spheromak: jtgiri_ make sure the vagrant you are invoking is the omni vagrant, and not a gem
[2013-05-15 18:17:33 -0400] spheromak: aso whats the Vagrant file look like ?
[2013-05-15 18:17:37 -0400] miah: https://github.com/nex3/rb-inotify
[2013-05-15 18:17:38 -0400] miah: =)
[2013-05-15 18:18:01 -0400] teukka: jtgiri_: are you using the V2 config?
[2013-05-15 18:18:09 -0400] miah: i havent looked at doing inotify any other way with ruby
[2013-05-15 18:18:21 -0400] jtgiri_: https://gist.github.com/anonymous/5586083 here is the vagrant file
[2013-05-15 18:18:22 -0400] miah: maybe there are easier ways
[2013-05-15 18:18:25 -0400] ivey: teukka: excellent question
[2013-05-15 18:18:39 -0400] jtgiri_: teukka: yes,
[2013-05-15 18:19:07 -0400] spheromak: miah yea but you don't need to know ffi to use it. have you looked at my hack to chef-client to do inotify ?
[2013-05-15 18:19:15 -0400] shane_: can anyone tell me what the equivalent of node.fqdn would be in chef 11 ?
[2013-05-15 18:19:17 -0400] ivey: jtgiri_: you did sudo vagrant plugin install, are you doing sudo vagrant up?
[2013-05-15 18:19:27 -0400] spheromak: miah https://github.com/spheromak/chef-inotify/blob/master/libraries
[2013-05-15 18:19:33 -0400] shane_: ive tried node.normal.fqdn and node.default.fqdn and none of them are working
[2013-05-15 18:19:40 -0400] ivey: if not it's possible you're getting a gem vagrant when you do up
[2013-05-15 18:20:06 -0400] ivey: can you do vagrant -v and make sure?
[2013-05-15 18:20:11 -0400] jtgiri_: ivey: sudo vagrant up gives the same error
[2013-05-15 18:20:24 -0400] jtgiri_: vagrant -v
[2013-05-15 18:20:25 -0400] jtgiri_: Failed to load the "vagrant-berkshelf" plugin. View logs for more details.
[2013-05-15 18:20:26 -0400] jtgiri_: Vagrant version 1.2.1
[2013-05-15 18:20:36 -0400] spheromak: there ya go :D
[2013-05-15 18:21:49 -0400] jtgiri_: ivey: I had to do sudo because without sudo install failed, I got some weird permission errors
[2013-05-15 18:22:12 -0400] spheromak: miah a better aproach may be to use guard/listen, this was just a quick hack proof of concept.
[2013-05-15 18:22:14 -0400] teukka: sudo might mess up the vagrant paths
[2013-05-15 18:22:54 -0400] miah: spheromak: interesting
[2013-05-15 18:23:05 -0400] ryanisnan: Sorry matticulous - internet cut out here.
[2013-05-15 18:23:44 -0400] spheromak: shane_  node[:fqdn] works for me https://gist.github.com/spheromak/5586126
[2013-05-15 18:23:45 -0400] jtgiri_: here is the error I get without sudo : https://gist.github.com/anonymous/433e65bbf9cf23c4b80d
[2013-05-15 18:24:27 -0400] spheromak: miah whats lacking in that is when a file changes in a cookbook with a cook upload it is not invalidated in the journal.
[2013-05-15 18:25:09 -0400] spheromak: so its not complete, and not really usable. But i tested it with "many" file counts > 100k  worked amazingly well :)
[2013-05-15 18:25:15 -0400] teukka: jtgiri_: space in the path and username?!
[2013-05-15 18:25:25 -0400] miah: spheromak: oh wow
[2013-05-15 18:25:41 -0400] miah: guh. i need to rebuild this linode. i get crazy lag sometimes.
[2013-05-15 18:25:48 -0400] ryanisnan: matticulous: I have a recipe that creates a DB, and I'm just trying to specify the encoding. Here's my snippet. http://cl.ly/image/472u2J2h0u0f
[2013-05-15 18:26:05 -0400] jtgiri_: teukka: yeah , restoring from time machine added a space, you think thats causing the issue ? works fine with sudo
[2013-05-15 18:27:01 -0400] ryanisnan: matticulous: here's the output http://cl.ly/image/2d2Q1I2t2u0c
[2013-05-15 18:28:02 -0400] teukka: jtgiri_: might be. you can also specify VAGRANT_HOME to use another path. the default is $HOME/.vagrant.d
[2013-05-15 18:28:33 -0400] jtgiri_: ok
[2013-05-15 18:29:07 -0400] teukka: but I can imagine many other problems on a unix with a space in $HOME =)
[2013-05-15 18:29:34 -0400] teukka: and/or in the user name
[2013-05-15 18:30:15 -0400] jtgiri_: Yeah i should fix it :)
[2013-05-15 18:34:17 -0400] jtgiri_: teukka: that was it, thanks for your help!
[2013-05-15 18:35:31 -0400] teukka: jtgiri_: np
[2013-05-15 18:39:43 -0400] kindsol: database cookbook is very ec2 centric, does anyone know of something that supports openstack or rackspace open cloud volumes?
[2013-05-15 18:41:41 -0400] whack: is knife bootstrap safe to do (in that it skips doing it) on a machine already bootstrapped?
[2013-05-15 18:42:21 -0400] bluekelp: is there a wildcard to delete tags from nodes?  i want to kill old tags (used to denote releases)
[2013-05-15 18:43:03 -0400] bluekelp: whack: bootstrapping the second time will fail (or brick the node) when it changes the client.pem in //etc/chef
[2013-05-15 18:43:18 -0400] whack: bluekelp: I'm rather looking for a brickless bootstrapping ;)
[2013-05-15 18:43:23 -0400] bluekelp: if you delete /etc/client.pem and re-bootstrap it'll work
[2013-05-15 18:43:35 -0400] ryanisnan: Does anybody have familiarity with the Postgresql cookbook and the database cookbook? I'm having a problem creating a database with UTF8 encoding. I'm getting an error about my locale (en_US) requiring LATIN1 encoding. I'm not sure how to specify the locale using these cookbooks.
[2013-05-15 18:43:46 -0400] whack: would prefer not deleting that; I suppose I can work around it by checking if that file exists prior to bootstrapping
[2013-05-15 18:43:49 -0400] bluekelp: i can't recall if it bricks (from the server's point of view) or just fails the second time
[2013-05-15 18:44:01 -0400] jmartin: whack: it doesnt brick it
[2013-05-15 18:44:04 -0400] bluekelp: the node will work just chef-client runs might fail
[2013-05-15 18:44:07 -0400] jmartin: i have to redo bootstraps all the time
[2013-05-15 18:44:09 -0400] whack: I want it to be a no-0op
[2013-05-15 18:44:33 -0400] whack: I have 1000 servers, want to bootstrap them all but skip ones already bootstrapped (on the idea that I don't want to find out mistakenly that 'knife bootstrap' a 2nd time is fatal)
[2013-05-15 18:47:13 -0400] jmartin: whack: i just reran knife bootstrap on a bootstrapped box
[2013-05-15 18:47:15 -0400] denken: https://gist.github.com/jlott/e8b069ed35372a61e072 why would that syntax work for the password, but not for the host?
[2013-05-15 18:47:22 -0400] jmartin: whack: it did nothing
[2013-05-15 18:47:57 -0400] jmartin: whack: https://gist.github.com/hugespoon/5586295
[2013-05-15 18:49:24 -0400] jmartin: it WILL re-run chef-client, but if you have that as a service already, should be no big deal
[2013-05-15 18:49:39 -0400] jmartin: and dont specify a run list
[2013-05-15 18:49:47 -0400] jmartin: at least as far as i can tell
[2013-05-15 18:49:53 -0400] whack: jmartin: nod, startign with empty run lists anyway for all new servers
[2013-05-15 18:49:57 -0400] teukka: whack: of course it depends on the bootstrap template you use. you can make your own that does what you want
[2013-05-15 18:50:15 -0400] jmartin: this is true, im just using omnibus
[2013-05-15 18:50:18 -0400] whack: just for safety I'm skipping servers with /etc/chef/client.pem already, easy enough
[2013-05-15 18:50:35 -0400] bluekelp: whack: why are you concerned about bootstrap failing and feel it's necessary to re-bootstrap?
[2013-05-15 18:51:08 -0400] jmartin: bluekelp: i think he just wants to avoid re-bootstrapping if it causes an issue because his node list can contain servers that have already been bootstrapped
[2013-05-15 18:51:15 -0400] whack: bluekelp: 95% of these servers need first-time bootstrapping, want to not screw-up the already-bootstrapped ones
[2013-05-15 18:51:18 -0400] whack: easy enough
[2013-05-15 18:51:23 -0400] whack: xargs -n1 sh -c 'timeout 10 ssh root@$1 "[ ! -f /etc/chef/client.pem ]" && knife bootstrap -x root $1' -
[2013-05-15 18:51:53 -0400] whack: or whatever ;)
[2013-05-15 18:52:08 -0400] jmartin: hah
[2013-05-15 19:13:28 -0400] btm:  Lots of internet problems today, Chef code review post-poned to same time tomorrow.
[2013-05-15 19:26:39 -0400] skarufue: hello. is there a way for the execute ressource to provide a tty to the command i run. i need it for screen.
[2013-05-15 19:29:46 -0400] sascha_d: This chef daemon bug has me at 500 servers needing their client restarted again
[2013-05-15 19:29:52 -0400] sascha_d: I thought it was in the 11.4.4 fix and now I am sad
[2013-05-15 19:35:19 -0400] davidneudorfer: hello
[2013-05-15 19:36:29 -0400] djustin: I'm bootstrapping a win7 vm...using the default of FQDN as the node name...after a few runs of knife winrm "chef-client", the node fails to connect to the server (because of case sensitivity of the FQDN)...is there an easy fix for this?
[2013-05-15 19:36:54 -0400] mjolk: why do you believe it to be case sensitivity at fault?
[2013-05-15 19:38:40 -0400] skarufue: hostnames are not case sensitiv imho
[2013-05-15 19:38:42 -0400] djustin: when I run the knife winrm, the node_name is output as fqdn, and it's all lower case, but on the chef server the fqdn is all upper
[2013-05-15 19:38:49 -0400] mjolk: yes
[2013-05-15 19:38:59 -0400] mjolk: go to your terminal.exe or whatever it's called on windows now
[2013-05-15 19:39:02 -0400] mjolk: and ping GOOGLE.COM
[2013-05-15 19:39:05 -0400] mjolk: and then ping google.com
[2013-05-15 19:41:48 -0400] mjolk: have you checked your logs?  [in other terms: capitalization is not your issue]
[2013-05-15 19:46:22 -0400] mjolk: djustin: ?
[2013-05-15 19:46:44 -0400] djustin: mjolk, yes, pinging doesn't matter
[2013-05-15 19:46:57 -0400] mjolk: you're missing the point
[2013-05-15 19:47:09 -0400] mjolk: FQDN can be lower/upper case
[2013-05-15 19:47:25 -0400] djustin: all i know, is eventually this occurs:   test05153 Failed to authenticate as 'test05153.mydomain.local'. Ensure that your node_name and client key are correct
[2013-05-15 19:47:40 -0400] djustin: the node_name and client key are not changing
[2013-05-15 19:48:04 -0400] skarufue: well could also be the network i think
[2013-05-15 19:48:10 -0400] mjolk: how's ntp where you are djustin ?
[2013-05-15 19:48:12 -0400] mjolk: nice and in sync?
[2013-05-15 19:48:23 -0400] mjolk: have multiple names for the same hosts?
[2013-05-15 19:48:24 -0400] skarufue: uhhh good point
[2013-05-15 19:49:05 -0400] mjolk: i know it's windows, but you can still google and self-service some things. i believe this is even in a FAQ on the official site
[2013-05-15 19:49:22 -0400] djustin: not sure about the ntp, only one vm with that name, only one node and client setup with that name on chef server
[2013-05-15 19:49:38 -0400] mjolk: cool, so look into ntp.
[2013-05-15 19:49:48 -0400] mjolk: it's _time_ you looked into it
[2013-05-15 19:58:16 -0400] mjolk: @djustin need help?
[2013-05-15 19:58:39 -0400] skarufue: i need help :-(
[2013-05-15 19:59:12 -0400] skarufue: is there a way for the execute ressource to provide a tty to the command i run. i need it for screen.
[2013-05-15 19:59:24 -0400] mjolk: explain
[2013-05-15 19:59:54 -0400] matticulous: ryanisnan: what is your current log level? error? are you using vagrant?
[2013-05-15 20:00:02 -0400] mjolk: are you doing something with some sociopathic cd takeover ruby wrapper?
[2013-05-15 20:00:54 -0400] mjolk: [e.g. rvm ]
[2013-05-15 20:01:03 -0400] mjolk: @skarufue
[2013-05-15 20:02:50 -0400] skarufue: no i have a rare webserver. and it doesnt daemonize well. so idecided to use screen :-(. to allow screen to start i need to make my (roots) tty available to screen so: chmod a+rw $(tty); screen -dmS thttpd /path/to/thttpd; chmod 0720 $(tty);
[2013-05-15 20:03:03 -0400] mjolk: what the fudge
[2013-05-15 20:03:20 -0400] mjolk: you can't run it using supervisor or upstart?
[2013-05-15 20:03:32 -0400] skarufue: hells no
[2013-05-15 20:03:35 -0400] mjolk: why
[2013-05-15 20:03:50 -0400] mjolk: acceptable answers don't include: "don't wanna"
[2013-05-15 20:04:00 -0400] skarufue: cause work?
[2013-05-15 20:04:06 -0400] mjolk: lol
[2013-05-15 20:04:17 -0400] mjolk: is this "rare web server" something you made for work?
[2013-05-15 20:04:34 -0400] gchristensen: is it aolserver? :)
[2013-05-15 20:04:35 -0400] skarufue: no it something lightweight which supports cli
[2013-05-15 20:04:37 -0400] timsmith: cookbook code review today?
[2013-05-15 20:04:44 -0400] skarufue: forget it i dont want to talk about it
[2013-05-15 20:04:51 -0400] skarufue: i am ashamed
[2013-05-15 20:05:00 -0400] mjolk: uhhh, i have a few lightweight web servers and i assure you that there's ways to get them to play nicely
[2013-05-15 20:05:10 -0400] mjolk: lightweight = ugly raw socket shamefests
[2013-05-15 20:05:22 -0400] mjolk: but huh thttpd wow
[2013-05-15 20:05:28 -0400] mjolk: here's your answer: shell out
[2013-05-15 20:05:40 -0400] djustin: oh crud...found my problem
[2013-05-15 20:05:43 -0400] mjolk: when it fails, remember that you're running thttpd in screen and react accordingly
[2013-05-15 20:06:05 -0400] djustin: a second client and node were created on the chef server
[2013-05-15 20:06:28 -0400] djustin: actually, only 2 nodes
[2013-05-15 20:06:56 -0400] mjolk: and @skarufue don't be ashamed
[2013-05-15 20:07:38 -0400] skarufue: k
[2013-05-15 20:07:53 -0400] mjolk: just be aware that thttpd isn't really well supported/accepted for a host of reasons.
[2013-05-15 20:08:02 -0400] mjolk: perhaps moving to nginx might be in your interests
[2013-05-15 20:08:40 -0400] mjolk: the cookbook for it is decent and you'll likely see better performance
[2013-05-15 20:10:46 -0400] mjolk: further, did the `execute "whatever" do command " chmod a+rw $(tty); screen -dmS thttpd /path/to/thttpd; chmod 0720 $(tty);" end end` pattern not work ?
[2013-05-15 20:10:48 -0400] skarufue: we have loads of nginxes its just that you can just throw raw cli at thttpd without having to worry about any headers. i couldnt make nginx behave the same way beacuase of buffering...
[2013-05-15 20:11:30 -0400] skarufue: no it didnt beacuase of. chmod ${is no a tty} doesnt work.
[2013-05-15 20:12:04 -0400] mjolk: ohhh, you need to get the current tty that chef's shell out is going in
[2013-05-15 20:12:04 -0400] skarufue: thats what $(tty) seems to return to chef
[2013-05-15 20:12:49 -0400] mjolk: what about $(`which tty`) ?
[2013-05-15 20:13:38 -0400] skarufue: well that would just return /usr/bin/tty wouldnt it?
[2013-05-15 20:13:55 -0400] mjolk: `which tty` == /dev/ttys010
[2013-05-15 20:14:19 -0400] skarufue: oh right
[2013-05-15 20:14:25 -0400] mjolk: it will run tty, which returns the current tty as a return value
[2013-05-15 20:14:39 -0400] skarufue: yes of course
[2013-05-15 20:14:47 -0400] xtristan: or to make it cleaner
[2013-05-15 20:14:55 -0400] xtristan: MYTTY=`which tty`.
[2013-05-15 20:15:18 -0400] Guest95575: so you can then just call $MYTTY instead of having the `which` child proc happen twice
[2013-05-15 20:17:00 -0400] skarufue: oh my it worked. thankz you guys. also ShellOut is usefull
[2013-05-15 20:17:14 -0400] _xtristan: well, you guys was just me changing names
[2013-05-15 20:17:20 -0400] _xtristan: but sure :)
[2013-05-15 20:17:47 -0400] _xtristan: shell out is what many ruby commands do at the end of the day.  i'd say don't overuse it, but it's ruby and lots of chef just shells out at the end of the day, sooooo....
[2013-05-15 20:17:48 -0400] skarufue: ha. why would you doi that it is way confusing
[2013-05-15 20:18:13 -0400] _xtristan: haha sorry, just realized that i was on my other nick, then my normal nickname didn't auth correctly to freenode
[2013-05-15 20:18:46 -0400] _xtristan: so heads up on this though @skarufue, if you're running a chef client, you're going to end up with lots of those processes over time
[2013-05-15 20:19:00 -0400] _xtristan: you likely want to run a not_if { some_condition }
[2013-05-15 20:19:25 -0400] _xtristan: even if it's as simple as you dropping a poor-man's lockfile on disk at the end of your shell out for screen
[2013-05-15 20:20:16 -0400] poolpog: hello nice people...
[2013-05-15 20:20:32 -0400] _xtristan: sure, don't say hi to me poolpog
[2013-05-15 20:20:39 -0400] skarufue: oh well i actually wrote the entire init script in shell and it handles its pids and locks allright. i was just quating the appropriate line to you.
[2013-05-15 20:20:51 -0400] _xtristan: oh cool
[2013-05-15 20:20:54 -0400] poolpog: this is a ruby *style* question. seems like an ok place to ask though. I see, sometimes, *two* underscores used to denote methods, symbols, var names, or whatever...
[2013-05-15 20:21:08 -0400] poolpog: is there a style guide reason to use TWO underscores?
[2013-05-15 20:21:23 -0400] poolpog: and I don't mean the magic variables like __FILE__ (is that in ruby?)
[2013-05-15 20:21:43 -0400] workmad3: poolpog: a) #ruby is a great place for that sort of question, and b) it's used for some internal methods that you should *never* override
[2013-05-15 20:21:44 -0400] poolpog: I mean arbitrary names of user-created vraiables,methods,symbols, whatever
[2013-05-15 20:22:12 -0400] _xtristan: poolpog: it's the convention for "plz don't touch, okay? i mean it .__."
[2013-05-15 20:23:17 -0400] _xtristan: and the underscores are there to reduce the likelihood that you'll collide into one on accident
[2013-05-15 20:23:45 -0400] ryanisnan: Does anybody with familiarity with the Postgresql cookbook and the database cookbook have a moment? I'm having a problem creating a database with UTF8 encoding. I'm getting an error about my locale (en_US) requiring LATIN1 encoding. I'm not sure how to specify the locale using these cookbooks.
[2013-05-15 20:24:02 -0400] ryanisnan: I'm provisioning a vagrant environment. The error is seen here: http://cl.ly/image/2N2P092K2D0l - It happens when I try to create a database in a recipe using the following code: http://cl.ly/image/381I0q2d140J
[2013-05-15 20:24:20 -0400] _xtristan: lol a screenshot of a text error
[2013-05-15 20:25:02 -0400] skarufue: that is your locale not configured right
[2013-05-15 20:25:16 -0400] _xtristan: haha skarufue "is it that you're doing something wrong?"
[2013-05-15 20:25:28 -0400] _xtristan: ryanisnan: you likely meant to go for en_US.utf-8 or whatever it is
[2013-05-15 20:25:29 -0400] ryanisnan: _xtristan: Cloud is too easy :P
[2013-05-15 20:25:39 -0400] skarufue: no
[2013-05-15 20:25:40 -0400] _xtristan: omg copy paste we're helping you don't be a butt
[2013-05-15 20:25:44 -0400] skarufue: heres what to do:
[2013-05-15 20:26:11 -0400] skarufue: http://pastebin.com/8M198QTK
[2013-05-15 20:26:16 -0400] skarufue: if on ubuntu that is
[2013-05-15 20:26:29 -0400] _xtristan: yes.en_US.UTF-8like i said
[2013-05-15 20:27:26 -0400] matticulous: ryanisnan: if you change the log level in the chef provision block in your Vagrantfile you can see what other attributes are being set by the provider (chef.log_level = :debug).
[2013-05-15 20:27:44 -0400] matticulous: ryanisnan: that will show you what things like LC_TYPE are being set to for the resource
[2013-05-15 20:28:51 -0400] ryanisnan: matticulous: Thanks - I'd been on info for so long, I forgot I could set that down 1 notch.
[2013-05-15 20:29:47 -0400] matticulous: ryanisnan: the database_postgresql provider specifically logs some relevant info to debug like the full create database statement.
[2013-05-15 20:29:49 -0400] ryanisnan: skarufue, _xtristan: thanks for that. I will try adding that to my cookbook.
[2013-05-15 20:35:29 -0400] ryanisnan: skarufue, _xtristan: I've added that bit about configuring/setting my locale to my recipe, but am still having the same output. http://dpaste.com/1163427/
[2013-05-15 20:37:28 -0400] skarufue: ryanisnan: what does locale say?
[2013-05-15 20:39:14 -0400] ryanisnan: skarufue: Looks like it has been set correctly http://dpaste.com/1163449/ :S
[2013-05-15 20:39:53 -0400] _xtristan: LANG
[2013-05-15 20:40:23 -0400] skarufue: no i recon lang is fine like so
[2013-05-15 20:41:23 -0400] _xtristan: one easy way to find out...
[2013-05-15 20:41:32 -0400] _xtristan: i thought it was inferred from it, but sure
[2013-05-15 20:42:15 -0400] skarufue: maybe you shall restart your postgres server
[2013-05-15 20:42:18 -0400] ryanisnan: I'm going to try to destroy/reprovision again.
[2013-05-15 20:42:59 -0400] skarufue: that will shure restart that pesky server
[2013-05-15 20:43:32 -0400] ryanisnan: skarufue: When in doubt, bring in the virtual bulldozer.
[2013-05-15 20:43:41 -0400] _xtristan: meh, it's a good idea
[2013-05-15 20:44:52 -0400] skarufue: ahaha. its funny beacause its a virtual machine.
[2013-05-15 20:48:46 -0400] poolpog: thanks everyone have a pleasant day
[2013-05-15 20:50:12 -0400] skarufue: also whyle i am all pumped up on plays on words. its a shame that cut is already such a common *nix binary. it would have been the better name for knife.
[2013-05-15 20:50:22 -0400] skarufue: and on this bombshell
[2013-05-15 20:50:28 -0400] skarufue: goodnight
[2013-05-15 20:53:38 -0400] _xtristan: ryanisnan: did it work?
[2013-05-15 20:54:02 -0400] ryanisnan: skarufue: Night - thanks for the help!
[2013-05-15 20:54:43 -0400] ryanisnan: _xtristan: Still waiting for this provisioning process to complete. git-core took aggress to download. It's bumping along fine now though, will tell you as soon as there's something.
[2013-05-15 20:54:51 -0400] ryanisnan: agggessss*
[2013-05-15 20:55:04 -0400] _xtristan: what did you change?
[2013-05-15 20:55:16 -0400] _xtristan: did you make the LANG, language changes?
[2013-05-15 20:55:28 -0400] _xtristan: also note in your output that LC_ALL isn't quoted
[2013-05-15 20:55:44 -0400] ryanisnan: I didn't, at skarufue's recommendation.
[2013-05-15 20:56:14 -0400] ryanisnan: Keep in mind, I'm only updating my locale settings by the script that he posted here: http://pastebin.com/8M198QTK
[2013-05-15 20:56:29 -0400] _xtristan: yeah
[2013-05-15 20:56:30 -0400] _xtristan: uhh
[2013-05-15 20:56:35 -0400] _xtristan: did you just copy and paste?
[2013-05-15 20:56:36 -0400] ryanisnan: I'm just restarting the server right now.
[2013-05-15 20:57:44 -0400] ryanisnan: Yeah, should that last line be "update-locale LC_ALL='en_US.UTF-8'" (with the en_US.UTF-8 string quoted?)
[2013-05-15 20:58:04 -0400] _xtristan: i believe you need to set language, pan, lc_all to "en_US.UTF-*"
[2013-05-15 20:58:09 -0400] _xtristan: UTF-*"
[2013-05-15 20:58:11 -0400] _xtristan: fff
[2013-05-15 20:58:14 -0400] _xtristan: UTF-8"
[2013-05-15 20:58:44 -0400] _xtristan: e.g. ENV['LANGUAGE'] = ENV['LANG'] = ENV['LC_ALL'] = "en_US.UTF-8"
[2013-05-15 21:10:26 -0400] _aeris_: ohai #chef !
[2013-05-15 21:10:55 -0400] _aeris_: i try to install chef-server 11 but replacing embedded nginx with already used apache
[2013-05-15 21:11:19 -0400] _aeris_: when i want to upload cookbook with knife, having
[2013-05-15 21:11:20 -0400] _aeris_: Cannot update sandbox 000000000000e4b486cb6c8095d7f975: the following checksums have not been uploaded: 372660d447d810315448c52149331a8d
[2013-05-15 21:11:26 -0400] _aeris_: any clue ?
[2013-05-15 21:12:11 -0400] _aeris_: (all is good with nginx, tracing packets with wireshark, the first diff is after PUT /sandboxes/000000000000e4b486cb6c8095d7f975 HTTP/1.1
[2013-05-15 21:13:48 -0400] makerbrakr: would a micro ec2 instance be enough to run chef-server/chef-webui, if it was just being used for learning purposes?
[2013-05-15 21:13:58 -0400] _xtristan: why not vagrant + locally
[2013-05-15 21:14:09 -0400] gleam: doesn't hosted chef still let ou have 5 nodes free?
[2013-05-15 21:14:16 -0400] doomviking: I wouldnt put that on a micro
[2013-05-15 21:14:26 -0400] doomviking: unless you've got time to kill
[2013-05-15 21:17:09 -0400] helllen_: helllo
[2013-05-15 21:17:30 -0400] helllen_: how do you run erchef into high availability mode
[2013-05-15 21:17:53 -0400] helllen_: I would like at least active/pasive but preferable active active
[2013-05-15 21:18:04 -0400] _xtristan: what have you tried
[2013-05-15 21:18:42 -0400] helllen_: I have two servers with services running
[2013-05-15 21:18:50 -0400] helllen_: the database is replicated with postgres
[2013-05-15 21:19:05 -0400] Cheeezit: id second vagrant + chef-solo for localized learning
[2013-05-15 21:19:12 -0400] Cheeezit: + berkshelf*
[2013-05-15 21:19:25 -0400] _xtristan: i still can't believe that tool is named berkshelf
[2013-05-15 21:19:30 -0400] _xtristan: such a terrible name
[2013-05-15 21:19:39 -0400] Cheeezit: well bookshelf was taken
[2013-05-15 21:19:44 -0400] Cheeezit: by the worldz
[2013-05-15 21:19:48 -0400] _xtristan: bookshelf-versioner
[2013-05-15 21:19:55 -0400] _xtristan: instead of ehrmergerd mermes
[2013-05-15 21:19:56 -0400] Cheeezit: kinda like googling for chef
[2013-05-15 21:20:09 -0400] Cheeezit: and not getting le cordon blue
[2013-05-15 21:20:19 -0400] helllen_: what happen if I load balance between different servers listening erchef with common postgres database ?
[2013-05-15 21:20:26 -0400] helllen_: is that possible ?
[2013-05-15 21:20:31 -0400] _xtristan: helllen_ content will get served?
[2013-05-15 21:20:31 -0400] ivey: I CERNT BERLERV U DERNT LERK DA NERM
[2013-05-15 21:20:50 -0400] _xtristan: yeah @ivey - my libraries and chef tools always have ZANY names too
[2013-05-15 21:20:55 -0400] _xtristan: like software-purpose
[2013-05-15 21:21:16 -0400] _xtristan: lmao xzhibit redirect loop detector lamo comedy!!!
[2013-05-15 21:21:59 -0400] helllen_: what do you mean with content will be served ?
[2013-05-15 21:22:03 -0400] helllen_: it should be
[2013-05-15 21:23:44 -0400] helllen_: I mean what happen if I have two servers with erchef accessing to the same database
[2013-05-15 21:23:45 -0400] helllen_: ?
[2013-05-15 21:23:46 -0400] _xtristan: you'll need to do something to share the cookbooks
[2013-05-15 21:24:00 -0400] helllen_: the cookbooks where are stored ?
[2013-05-15 21:24:50 -0400] helllen_: are not stored into postgres ?
[2013-05-15 21:25:19 -0400] _xtristan: looking into good docs for you
[2013-05-15 21:25:33 -0400] helllen_: thanks xtristan
[2013-05-15 21:25:36 -0400] _xtristan: np
[2013-05-15 21:26:28 -0400] _xtristan: in the mean time, as far as i remember, cookbooks are stored on disk
[2013-05-15 21:26:42 -0400] _xtristan: only the digests are put into the db
[2013-05-15 21:28:24 -0400] _xtristan: @helllen http://docs.opscode.com/_images/server_components.png
[2013-05-15 21:28:35 -0400] _xtristan: check this out : http://docs.opscode.com/chef_overview_server.html
[2013-05-15 21:30:01 -0400] helllen_: I see
[2013-05-15 21:30:26 -0400] helllen_: it would be interesting store them into s3 or any distributed filesystem
[2013-05-15 21:30:34 -0400] _xtristan: s3 is eventually consistent
[2013-05-15 21:30:46 -0400] _xtristan: that's a recipe for drinking yourself to death when amazon is a slow
[2013-05-15 21:30:51 -0400] helllen_: can be stored into s3 ?
[2013-05-15 21:30:59 -0400] _xtristan: s3 is eventually consistent
[2013-05-15 21:31:00 -0400] _xtristan: meaning
[2013-05-15 21:31:06 -0400] helllen_: I do use riak-cs
[2013-05-15 21:31:13 -0400] helllen_: have you ever heard about that ?
[2013-05-15 21:31:13 -0400] _xtristan: you 'put the file' in and eventually it will be available
[2013-05-15 21:31:33 -0400] _xtristan: i've heard of it, but that's irrelevant
[2013-05-15 21:32:02 -0400] helllen_: Bookshelf use s3
[2013-05-15 21:32:04 -0400] helllen_: isn't ?
[2013-05-15 21:32:06 -0400] _xtristan: do you understand why "eventually consistent" is bad for this?
[2013-05-15 21:32:51 -0400] helllen_: no I don't understand what do you mean
[2013-05-15 21:32:58 -0400] _xtristan: you give me a dollar
[2013-05-15 21:33:00 -0400] _xtristan: i take it
[2013-05-15 21:33:05 -0400] _xtristan: you ask for it in 30 seconds
[2013-05-15 21:33:07 -0400] _xtristan: i say i don't have it
[2013-05-15 21:33:14 -0400] _xtristan: you ask again in 3 minutes, i give it to you
[2013-05-15 21:33:25 -0400] _xtristan: you ask again in 10 seconds, i say i don't have it
[2013-05-15 21:33:41 -0400] _xtristan: e.g. it takes time for files to show up everywhere in s3
[2013-05-15 21:34:04 -0400] helllen_: :-D
[2013-05-15 21:34:06 -0400] helllen_: hahahah
[2013-05-15 21:34:09 -0400] helllen_: good example
[2013-05-15 21:35:48 -0400] _xtristan: so s3 is likely not fast enough if you're hitting load issues while trying to scale Chef "up"
[2013-05-15 21:35:57 -0400] helllen_: ok
[2013-05-15 21:36:18 -0400] helllen_: I have tried two erchef accessing the same database ip
[2013-05-15 21:36:23 -0400] helllen_: and knife node list
[2013-05-15 21:36:28 -0400] helllen_: return same values
[2013-05-15 21:36:43 -0400] _xtristan: as some servers will ask for a file that's in the postgres digests, but it won't be on disk
[2013-05-15 21:36:47 -0400] _xtristan: yeah
[2013-05-15 21:36:54 -0400] _xtristan: check out the links i sent you
[2013-05-15 21:37:03 -0400] _xtristan: you're exercising different parts of the system
[2013-05-15 21:37:49 -0400] helllen_: ok
[2013-05-15 21:37:58 -0400] helllen_: keep contact tomorrow when I see this pages
[2013-05-15 21:38:01 -0400] helllen_: thanks a lot
[2013-05-15 21:38:36 -0400] helllen_: do I have to give you a dollar :-D
[2013-05-15 21:38:37 -0400] helllen_: ?
[2013-05-15 21:39:04 -0400] helllen_: really thanks see you tomorrow
[2013-05-15 21:47:21 -0400] heathsnow: anyone happen to know what port rabbitmq requires to do clustering?
[2013-05-15 21:48:41 -0400] _xtristan: check your rabbitmq.config heathsnow
[2013-05-15 21:50:38 -0400] heathsnow: _xtristan it only lists the cluster_nodes and default_user, default_pass.  there must be a default port used since it's not specified.
[2013-05-15 21:51:25 -0400] _xtristan: netstat it
[2013-05-15 22:01:07 -0400] _xtristan: apt-get update idempotent behavior is makes me hate today
[2013-05-15 22:03:46 -0400] cwj: heathsnow: use netstat to figure out which port beam is listening on, i think
[2013-05-15 22:03:48 -0400] willejs: anyone know whats going on with the user provider requiring ruby shadow, and eroring out saying its not present from a fresh omnibus install?
[2013-05-15 22:08:54 -0400] heathsnow: cwj good idea, checking
[2013-05-15 22:10:41 -0400] bluekelp: is there a way to exclude un-specified cookbooks from an environment?
[2013-05-15 22:11:14 -0400] bluekelp: i can lock down (known) cookbooks but others are adding them and i want to exclude anything that hasn't been tested
[2013-05-15 22:25:35 -0400] basic`: "Cannot find a resource for openssl on debian 6.0.7" ?
[2013-05-15 22:36:20 -0400] stormerider: is there a way to search for an aws region along the lines of knife search node "ec2.placement_availability_zone:us-west-2*" ?
[2013-05-15 22:36:45 -0400] jmickle: I know this is the wrong place to ask but does anyone have any experience using the fabric module for python in here by chance? that i could sideline for a quick question?
[2013-05-15 22:37:09 -0400] stormerider: i see it in ohai and when i do knife node show -a ec2.placement_availability_zone but im having trouble converting that to a search query
[2013-05-15 22:38:38 -0400] stormerider: aha, i needed to convert it to ec2_, like so: knife search node "ec2_placement_availability_zone:us-west-2*"
[2013-05-15 22:47:37 -0400] gchristensen: when deploying a ruby application (with application_ruby) and unicorn, when runit sends a HUP to the service it creates a second sect of unicorn workers. I've documented it here: https://gist.github.com/grahamc/cb6a1ebce09430638aff - I stop the service, start it, HUP it, and then demonstrate the creation of the extra unicorns. Has anyone experienced this before? I'm running out of questions to ask.
[2013-05-15 23:19:53 -0400] doomviking: is that a zero-downtime feature
[2013-05-15 23:20:08 -0400] doomviking: or is that USR2
[2013-05-15 23:23:44 -0400] jtoft: Any idea why I am 0 items found when running: knife search node "roles:postgres_master" ? I can show knife node show prd-db1a and it shows role[postgres_master] in the runlist
[2013-05-15 23:24:15 -0400] jtoft: 10.16.2
[2013-05-15 23:37:43 -0400] jmickle: role?
[2013-05-15 23:38:12 -0400] jmickle: jtoft: roles is singular
[2013-05-15 23:38:27 -0400] jtoft: same problem
[2013-05-15 23:38:31 -0400] jmickle: jtoft: knife search node "role:postgres_master"
[2013-05-15 23:39:17 -0400] jtoft: roles is actually usable, supposed to extend the run_list
[2013-05-15 23:39:23 -0400] jtoft: both fail either way
[2013-05-15 23:40:08 -0400] jtoft: doing  knife search node "run_list:role\[postgres_master\]" also fails
[2013-05-15 23:40:40 -0400] jtoft: knife search node "roles:postgres" works properly for the base roles
[2013-05-15 23:40:48 -0400] jtoft: but maybe it's just the underscored items that fail
[2013-05-15 23:41:17 -0400] jtoft: Nope. Is there any way to find out if there's a bug indexing that node?
[2013-05-15 23:41:29 -0400] jtoft: it fails in search, but I can list it in attributes
[2013-05-15 23:41:40 -0400] jtoft: I think they're different stores, couch and solr
[2013-05-15 23:47:38 -0400] stormerider: under what conditions does the nagios cookbook determine which roles get added to the hostgroup list for a specific host?

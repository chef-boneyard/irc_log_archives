[2013-05-07 00:04:35 -0400] jmickle: miah multiple cookbooks that require multi run? what the shit
[2013-05-07 00:08:06 -0400] miah: i've seen it mostly on inhouse cookbooks, but a few community too. it really just depends on how well you account for the possibility of things going wrong
[2013-05-07 00:08:24 -0400] miah: and order of execution can play into that
[2013-05-07 00:10:34 -0400] jmickle: yeahhhhhhhhhhhh
[2013-05-07 00:42:25 -0400] ivey: i need some private chef help
[2013-05-07 00:42:45 -0400] ivey: maek normally bugs y'all for us but he's at dinner
[2013-05-07 00:45:44 -0400] reset: coderanger: hey you there?
[2013-05-07 00:45:49 -0400] coderanger: Yahr
[2013-05-07 00:45:50 -0400] ssd7: ivey: Hi, I think I just responded to your ticket.
[2013-05-07 00:45:54 -0400] ivey: kk
[2013-05-07 00:45:59 -0400] reset: nevermind!
[2013-05-07 00:46:00 -0400] coderanger: reset: Wazap?
[2013-05-07 00:46:08 -0400] reset: have an urgent issue here and really just needed to get in contact with somebody ;)
[2013-05-07 00:46:10 -0400] coderanger: Heh, always glad to help :)
[2013-05-07 00:46:13 -0400] reset: sorry for bugging you man
[2013-05-07 00:46:38 -0400] coderanger: No worries, ssd7 is probably better for support stuffs but I'm always happy to poke what I can :)
[2013-05-07 00:47:13 -0400] reset: we're on track now thanks dudes
[2013-05-07 01:06:12 -0400] Otterley: where can I find the release notes for Chef updates?
[2013-05-07 01:06:34 -0400] Otterley: there have been 2 minor updates since Chef 10.24.0 and I can't find release notes for 10.24.2 or 10.24.4
[2013-05-07 01:07:11 -0400] Otterley: CHANGELOG hasn't been updated since 0.8.12
[2013-05-07 01:24:12 -0400] coderanger: Otterley: Mailing list is probably your best bet
[2013-05-07 01:30:40 -0400] Otterley: @coderanger, any reason why it's not published?
[2013-05-07 01:32:06 -0400] coderanger: Otterley: It is published (ML and blog), I think the question you are asking is "Any reason it isn't archived in a single document?"
[2013-05-07 01:32:19 -0400] Otterley: I just looked for it on the blog
[2013-05-07 01:32:37 -0400] coderanger: http://www.opscode.com/blog/2013/04/25/chef-11-4-4-and-chef-10-24-4-released/
[2013-05-07 01:32:44 -0400] Otterley: but it's not tagged properly
[2013-05-07 01:32:46 -0400] coderanger: That would be the latest release :)
[2013-05-07 01:33:11 -0400] Otterley: click on "chef" on the right-hand nav and it doesn't show up
[2013-05-07 01:33:23 -0400] coderanger: We don't really use wordpress categories for much anymore
[2013-05-07 01:33:31 -0400] Otterley: nor does it show up under "announcements"
[2013-05-07 01:33:40 -0400] coderanger: The marketing folks are much more adept at using WP than we engineers :)
[2013-05-07 01:33:56 -0400] Otterley: or "release"
[2013-05-07 01:34:50 -0400] coderanger: Indeed, as I was saying, they are published but there isn't currently a good central archive of them :)
[2013-05-07 01:35:17 -0400] coderanger: We'll get there, just no one has had the cycles for it so far and our process for open source releases is evolving every day
[2013-05-07 01:49:38 -0400] gnusosa: Hi, I'm trying to do knife configure -i in Debian Wheezy and I get Exception: NoMethodError: undefined method `save' for #<Hash:0x7f967ddcb6b0>
[2013-05-07 01:49:56 -0400] gnusosa: following http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages
[2013-05-07 01:52:17 -0400] coderanger: gnusosa: Don't follow that anymore
[2013-05-07 01:52:33 -0400] coderanger: Use omnibus
[2013-05-07 01:52:41 -0400] coderanger: opscode.com/chef/install
[2013-05-07 01:52:50 -0400] gnusosa: thanks
[2013-05-07 01:52:57 -0400] gnusosa: I knew something was up
[2013-05-07 01:53:14 -0400] coderanger: Let me see if I remember how to make a deprecation warning in confluence
[2013-05-07 01:53:35 -0400] coderanger: Oh right, graphical editor only, raaaaage
[2013-05-07 01:57:58 -0400] coderanger: Updated :)
[2013-05-07 01:58:01 -0400] coderanger: thanks for the reminder
[2013-05-07 01:59:22 -0400] gnusosa: sweet
[2013-05-07 01:59:52 -0400] gnusosa: coderanger: The problem with omnibus is there is know chef-server for Debian Wheezy :(
[2013-05-07 02:00:25 -0400] gnusosa: s/know/no known/
[2013-05-07 02:00:44 -0400] coderanger: The deb6 version should work fine
[2013-05-07 02:00:49 -0400] coderanger: its all statically compiled anyway
[2013-05-07 02:01:36 -0400] gnusosa: chef-server?
[2013-05-07 02:02:23 -0400] coderanger: Oh right, server
[2013-05-07 02:02:30 -0400] coderanger: Well you can try the ubuntu deb
[2013-05-07 02:02:41 -0400] coderanger: As long as your libc version is close enough to have ABI compat, might work :)
[2013-05-07 02:02:48 -0400] jtimberman: coderanger: i made that a warning box ;)
[2013-05-07 02:03:24 -0400] coderanger: jtimberman: Thanks, I couldn't find the button :(
[2013-05-07 02:03:24 -0400] jtimberman: gnusosa: the ubuntu 12.04 package *should* work on debian 7.
[2013-05-07 02:03:34 -0400] jtimberman: coderanger: cmd-shift-A (macro browser)
[2013-05-07 02:03:37 -0400] gnusosa: Welp, I think I can install chef_11.4.4-2.debian.6.0.5_amd64.deb since what I want working correctly is knife, the server seems to be running.
[2013-05-07 02:03:43 -0400] coderanger: jtimberman: brb never remembering that ever
[2013-05-07 02:03:51 -0400] jtimberman: coderanger: right?
[2013-05-07 02:04:10 -0400] jtimberman: i don't love the rich text only in confluence 4.
[2013-05-07 02:04:54 -0400] coderanger: To a friend at atlassian immediately after trying to edit that: "Is it possible to get the home address of whomever wrote the confluence page editor so I can mail them some live bees?"
[2013-05-07 02:06:37 -0400] jtimberman: http://stream1.gifsoup.com/view1/1416886/oprah-s-bees-o.gif
[2013-05-07 02:06:53 -0400] jtimberman: just get that into their private hipchat channels and everyone's client will crash
[2013-05-07 02:07:21 -0400] coderanger: jtimberman: My IRC client can withstand the likes of you
[2013-05-07 02:07:33 -0400] jtimberman: coderanger: ;)
[2013-05-07 02:24:28 -0400] jasonsmr: hello chef solo channel
[2013-05-07 02:24:49 -0400] coderanger: Or something like that
[2013-05-07 02:25:30 -0400] enb201: Hey!
[2013-05-07 02:25:55 -0400] enb201: Anyone around that is familiar with tiered chef?
[2013-05-07 02:26:41 -0400] jtnz: Anyone know the syntax for "knife node search -a"? I'm trying to access a nested attribute but can't figure it out.
[2013-05-07 02:27:05 -0400] jasonsmr: Question I am attempting to run a recipe named opensips and Im getting this output >> http://sprunge.us/ZKiA
[2013-05-07 02:28:56 -0400] enb201: Have questions about scaling chef across multiple geo sites.
[2013-05-07 02:29:17 -0400] coderanger: enb201: What specifically are you trying to do that isn't working?
[2013-05-07 02:29:36 -0400] coderanger: enb201: Usual process is to keep the servers isolated by geo/DC
[2013-05-07 02:29:47 -0400] coderanger: jtnz: I think it is foo.bar.baz
[2013-05-07 02:30:20 -0400] jtnz: coderanger, FULL STOPS!!! Of course. Thank you
[2013-05-07 02:30:48 -0400] coderanger: jtnz: Makes total sense, the syntax we say to never use in recipes :)
[2013-05-07 02:31:04 -0400] jtnz: coderanger, lol
[2013-05-07 02:31:38 -0400] jtnz: coderanger, I was trying colons, escaped colons, double underscores, all sorts. Every _but_ full stops
[2013-05-07 04:01:05 -0400] densone: Hey folks. Wondering if someone can help me with a query against chef/solr
[2013-05-07 04:01:45 -0400] densone: if I run something like the following: nodes = query.search(:node, "chef_environment:production and role:db") ,  It returns more results that I want.
[2013-05-07 04:02:33 -0400] densone: It returns all nodes where chef_environment is production.
[2013-05-07 04:02:54 -0400] ssd7: densone: One possibility is if you have another attribute called "role" further down some other attribute hierarchy, such as node["foo"]["bar"]["role"] = "db"
[2013-05-07 04:02:56 -0400] densone: I was assuming it would filter for the db role also.
[2013-05-07 04:03:10 -0400] jtimberman: densone: s/and/AND/
[2013-05-07 04:03:15 -0400] ssd7: also, I belive and shold
[2013-05-07 04:03:17 -0400] jtimberman: it must be capitalized
[2013-05-07 04:03:20 -0400] ssd7: what jtimberman said :)
[2013-05-07 04:03:21 -0400] densone: jtimberman:  That throws an error
[2013-05-07 04:03:26 -0400] jtimberman: wat
[2013-05-07 04:03:32 -0400] densone: err
[2013-05-07 04:03:39 -0400] densone: actually. 1 sec
[2013-05-07 04:04:04 -0400] jtimberman: 'query.search'? What is query? the recipe should have just search()
[2013-05-07 04:05:49 -0400] densone: jtimberman: This is some ruby in a cap script I am writing.
[2013-05-07 04:05:56 -0400] densone: ok. I know what I was doing wrong.
[2013-05-07 04:06:12 -0400] densone: the db role is inherited
[2013-05-07 04:06:19 -0400] densone: So it was returning 0 results.
[2013-05-07 04:06:25 -0400] densone: So AND fixed it.
[2013-05-07 04:06:28 -0400] densone: Thanks man.
[2013-05-07 04:06:39 -0400] densone: That was driving me nuts.
[2013-05-07 04:06:41 -0400] jtimberman: ssd7: -----> Kitchen is finished. (108m56.41s)
[2013-05-07 04:06:46 -0400] jtimberman: densone: ah, ok.
[2013-05-07 04:06:55 -0400] jtimberman: cool :)
[2013-05-07 04:07:32 -0400] jtimberman: how many people would be heartbroken if we removed *::source, or rather, didn't put them into test-kitchen tests? :)
[2013-05-07 04:10:44 -0400] ssd7: Dude --parallel
[2013-05-07 04:11:14 -0400] jtimberman: ssd7: still: Chef Run complete in 784.686615501 seconds
[2013-05-07 04:11:24 -0400] ssd7: uff
[2013-05-07 04:11:44 -0400] jtimberman: (that's erlang::source)
[2013-05-07 04:11:51 -0400] rafaelmagu: How does one remove an attribute from Chef memory?
[2013-05-07 04:12:32 -0400] rafaelmagu: The redis recipe changed node.redis.config.listen_addr to node.redis.config.bind, but Shef still shows the old attr as part of the @current_normal hash
[2013-05-07 04:13:07 -0400] rafaelmagu: Now redis recipe crashes with "undefined method 'listen_addr'" because of that old attribute
[2013-05-07 04:13:17 -0400] juliancdunn: jtimberman: I wish we didn't have recipes that compiled things from source at all
[2013-05-07 04:13:24 -0400] juliancdunn: but that's probably a larger discussion :-)
[2013-05-07 04:14:01 -0400] jtimberman: juliancdunn: I wish more software developers provided package repositories or worked with distributions to a) make their software package friendly or b) packaged it themselves :)
[2013-05-07 04:14:07 -0400] juliancdunn: rafaelmagu: you might have to modify the node object by hand to remove the garbage
[2013-05-07 04:14:17 -0400] jtimberman: one of my favorite things about runit is that the author of runit also packaged it for Debian.
[2013-05-07 04:14:20 -0400] juliancdunn: jtimberman: +1
[2013-05-07 04:14:20 -0400] rafaelmagu: Hmm
[2013-05-07 04:14:24 -0400] ssd7: I think we should only maintain source recipes if that is the standard way of installing that piece of software
[2013-05-07 04:14:43 -0400] juliancdunn: jtimberman: you and your runit!
[2013-05-07 04:14:50 -0400] ssd7: rafaelmagu: Inside a recipe or using knife-exec you should be able to use node.delete("attr_name")
[2013-05-07 04:14:53 -0400] jtimberman: ssd7: standard, or "only"?
[2013-05-07 04:15:04 -0400] jtimberman: juliancdunn: runit is baked into all our server products too ;)
[2013-05-07 04:15:17 -0400] rafaelmagu: ssd7: does this work? node.delete("node.redis.config.listen_addr")
[2013-05-07 04:15:55 -0400] juliancdunn: people setting things at normal precedence unnecessarily was another antipattern that didn't make it into my talk :-(
[2013-05-07 04:17:04 -0400] ssd7: rafaelmagu: My hunch is node['redis']['config'].delete("listen_addr")
[2013-05-07 04:17:06 -0400] jtimberman: "Given the same input, Chef gives you the same output. The problem is getting the input the same."
[2013-05-07 04:17:25 -0400] ssd7: juliancdunn: Going to see more and more of that with wrapper cookbooks I think
[2013-05-07 04:17:29 -0400] rafaelmagu: ssd7: hah. Tested that just before you typed it
[2013-05-07 04:17:33 -0400] rafaelmagu: But thanks for the help
[2013-05-07 04:17:33 -0400] jtimberman: ssd7: for chef 11, need node.set
[2013-05-07 04:19:26 -0400] jtimberman: okay, fixed my graphite server, g'night all
[2013-05-07 04:20:40 -0400] rafaelmagu: Crap. listen_addr reappears when I try to run chef-client again
[2013-05-07 04:20:44 -0400] rafaelmagu: But I have no idea from where
[2013-05-07 04:20:47 -0400] rafaelmagu: :(
[2013-05-07 04:22:25 -0400] rafaelmagu: knife node edit it is
[2013-05-07 04:23:53 -0400] c_t: rafaelmagu: my guess would be either it's set on the node (thus your knife node edit) or an environment or role is setting it
[2013-05-07 04:24:09 -0400] rafaelmagu: After knife node edit <node>
[2013-05-07 04:24:12 -0400] rafaelmagu: Chef-client ran fine
[2013-05-07 04:24:18 -0400] rafaelmagu: So it  was definitely legacy
[2013-05-07 05:55:39 -0400] new2chef: greetings, in a recipe, i'm trying to assign a list to a variable and then iterate over it can't seem to get the syntax.  this is what i've tried:   groups = "webs", "apps", "dbs"  /  @groups.each do |group|.
[2013-05-07 05:56:22 -0400] new2chef: i've also tried a couple of other ways like [@groups].each do
[2013-05-07 05:57:10 -0400] coderanger: new2chef: groups = ['webs', 'apps', 'dbs']; groups.each do |group| ... end
[2013-05-07 05:57:26 -0400] new2chef: coderanger- I'll give that a shot, thanks!
[2013-05-07 05:58:59 -0400] coderanger: new2chef: Check out http://docs.opscode.com/just_enough_ruby_for_chef.html
[2013-05-07 05:59:32 -0400] coderanger: Though actually that doesn't mention Array#each, but it should :)
[2013-05-07 06:00:02 -0400] new2chef: :)  that's a great resource though, just bookmarked it
[2013-05-07 06:00:15 -0400] new2chef: btw, it worked, thanks coderanger!
[2013-05-07 06:01:24 -0400] coderanger: You can just search for 'ruby array' in your engine of choice to find lots of docs though
[2013-05-07 06:06:46 -0400] dchapdelaine: in Chef 11 is it still possible to delete an attribute from a node in a recipe?
[2013-05-07 06:08:49 -0400] coderanger: dchapdelaine: kinda, you could delete from each level individually, seems unwise though
[2013-05-07 06:09:01 -0400] coderanger: better to just shadow it at an override level with a null value
[2013-05-07 06:14:19 -0400] dchapdelaine: coderanger: ok thanks, I'll try the override
[2013-05-07 07:28:51 -0400] gigo1980: hi all, is it ok that i initial a node from an workstation which is not in the same network over the chef server? or is an direct connection required ?
[2013-05-07 07:56:32 -0400] bigbigbang: Hi , I would like to change chef-client installation directory, is there a way to do that ? (i would like it to be installed in /opt/chef/<version_number> )
[2013-05-07 08:11:42 -0400] Joel_re: hey, does chef abstract package names across linux distros?
[2013-05-07 08:12:23 -0400] Mithrandir: no
[2013-05-07 08:12:36 -0400] Mithrandir: you can have case statements, but there's nothing built-in.
[2013-05-07 08:13:21 -0400] Joel_re: ok
[2013-05-07 08:21:45 -0400] Mithrandir: it's bigger than that, since packages might be split across different lines on different distros.
[2013-05-07 08:21:56 -0400] Mithrandir: and it's a ton of work for not that much benefit, IMO
[2013-05-07 08:26:56 -0400] Joel_re: yeah
[2013-05-07 08:27:27 -0400] bigbigbang: is there a way to know the version number of chef-client ?
[2013-05-07 08:43:18 -0400] zts: bigbigbang: one way is to look at node['chef_packages']['chef']['version']
[2013-05-07 08:48:35 -0400] bigbigbang: zts: Thanks, but it's chef version number or (11.4.0)? what i would like it's chef-client version number i think something like (11.4.4-1)
[2013-05-07 08:49:22 -0400] zts: bigbigbang: that is the chef client version number.  Where are you seeing "11.4.4-1"?  That sounds more like a package version number?
[2013-05-07 08:50:49 -0400] zts: to be more precise, that node attribute the version of the chef gem, which is the version of chef-client, chef-solo, etc
[2013-05-07 08:51:03 -0400] zts: +is
[2013-05-07 08:51:17 -0400] bigbigbang: zts: ok i must confuse with package version number you'r right. thanks
[2013-05-07 08:55:39 -0400] skubriev: hello
[2013-05-07 09:02:24 -0400] skubriev: I have a Question about community cookbooks: When I must use community cookbooks and when i must create a custom cookbooks ? For example we using openldap server and libnss-ldapd. But community cookbook has libnss-ldap package for configuring. We don't want to use this old package because it outdated. We must create a custom cookbook ?
[2013-05-07 09:12:26 -0400] cpasmoi: skubriev, you can also change the community cookbook to fit your needs, if you think it'll be faster than creting your own cookbook
[2013-05-07 09:28:54 -0400] BryanWB: what's the difference b/w Chef::Mixin::ShelOut and Chef::Mixib::ShellOut?
[2013-05-07 09:32:58 -0400] yawn: having trouble applying the wordpress (http://community.opscode.com/cookbooks/wordpress) using vagrant & chef solo: http://pastebin.com/Jn6H8V4u
[2013-05-07 09:33:31 -0400] yawn: i tried switching chef client versions from the basebox default to current - different errors but no result
[2013-05-07 09:33:33 -0400] skubriev: I read about Library and Application strategy when creating cookbooks. What do you think in my situation i must create a whole cookbook with run-in at the openldap community cookbook or using for example chef-edit for it? And  what other ways there are to use some of community cookbooks in its recipes? May be you know good article about this &
[2013-05-07 09:33:36 -0400] skubriev: ?
[2013-05-07 09:33:49 -0400] yawn: simply a bug in a wordpress dependency or sth. else?
[2013-05-07 09:48:40 -0400] skubriev: How many users using chef-edit in his cookbooks and workplace
[2013-05-07 10:05:33 -0400] gigo1980: hi, does the chef workstation and the chef nodes have to be in the same network segment. when i try to make an inital bootstrap
[2013-05-07 10:06:41 -0400] maruq: gigo1980: not that I know of, as long as the ports are open, you should be good
[2013-05-07 10:14:54 -0400] skubriev: What to read about best practic using chef ?
[2013-05-07 10:19:07 -0400] jasonsmr: hello chef chanel
[2013-05-07 10:19:13 -0400] jasonsmr: anyone on?
[2013-05-07 10:19:43 -0400] jasonsmr: Question how do I find out what is in a chef recipe to do in order of completeion a manual install
[2013-05-07 10:27:26 -0400] alxism1: hi there
[2013-05-07 10:28:00 -0400] alxism1: i'm running chef-client with omnibus on a box where rvm is configured
[2013-05-07 10:28:48 -0400] alxism1: the chef-client fails with https://gist.github.com/alexism/5531696
[2013-05-07 10:29:33 -0400] alxism1: i cannot find a way to workaround the issue during instance startup
[2013-05-07 10:29:55 -0400] alxism1: sudo su -c 'chef-client' works fine
[2013-05-07 10:30:18 -0400] alxism1: but it does not work for instance startup since there's no tty
[2013-05-07 10:30:28 -0400] alxism1: any suggestions?
[2013-05-07 10:39:18 -0400] gigo1980:  knife bootstrap 192.168.4.20 -x enrico -P "**********" --sudo  < is it posible to bootstrap a linux when i am not in the 192.168.4 net and is also not routed from my workstation, chef server is in the 192.168.4.0
[2013-05-07 10:55:01 -0400] skubriev: chef-client must start by cron or manually when needed ?
[2013-05-07 10:57:11 -0400] jasonsmr: Hello , I am new to chef solo, having never used it befor
[2013-05-07 10:57:58 -0400] jasonsmr: Ibefore now that is, I have been using it here recently for a install of a system of packages and configuration file..
[2013-05-07 10:58:47 -0400] jasonsmr: However I have come across some errors while installing the package, and I have no Idea how to DEBUG this problem? or even where to begin
[2013-05-07 11:00:44 -0400] jasonsmr: I can look into the chef solo directory and see default.rb and .erb files in the template* directory and some .json file named metadata
[2013-05-07 11:01:20 -0400] jasonsmr: If someone could assist in helping manualy configure or somehow debug setup that would be greatly appreaceated
[2013-05-07 11:02:38 -0400] ctennis: what error jasonsmr?
[2013-05-07 11:04:25 -0400] jasonsmr: its a regex error regular expression installing and configuring opensips
[2013-05-07 11:05:38 -0400] jasonsmr: heres the log output >> http://sprunge.us/BJFG
[2013-05-07 11:07:56 -0400] jasonsmr: the command I run is:: chef-solo -j node.json -c solo.rb -l debug
[2013-05-07 11:08:34 -0400] jasonsmr: if I try and rerun I get an apache restart error, so I need to rerun the chef solo ./bootstrap.sh I have and restart
[2013-05-07 11:09:39 -0400] jasonsmr: ctennis , RegexError : >> Stack overflow in regexp matcher: /^(\S+) ([0-9]+) (\S+) (\S+) (\S+) \[(.*)\] ([i,a,r]) (\S+)$/
[2013-05-07 11:13:22 -0400] ctennis: jasonsmr can you put the larger context of the error somewhere, like gist.github.com?
[2013-05-07 11:15:19 -0400] jasonsmr: you mean error report it?
[2013-05-07 11:15:54 -0400] ctennis: well, that looks like a ruby bug to me, not particularly a chef bug
[2013-05-07 11:16:04 -0400] ctennis: just curious what was happening when that got shown
[2013-05-07 11:16:58 -0400] jasonsmr: hmm, well what would you like me to pasebin?
[2013-05-07 11:17:38 -0400] jasonsmr: seems like its just installing a package? I really don't know chef though
[2013-05-07 11:17:44 -0400] ctennis: do you know what code code/recipe seemed to cause the issue?
[2013-05-07 11:17:48 -0400] ctennis: looks like maybe in regards to using yum?
[2013-05-07 11:17:50 -0400] jasonsmr: yes
[2013-05-07 11:17:53 -0400] ctennis: for installing a package
[2013-05-07 11:18:21 -0400] jasonsmr: well I tried runningthe chef recipe both with that package preinstalled and uninstalled
[2013-05-07 11:18:27 -0400] jasonsmr: so I am not sure
[2013-05-07 11:18:35 -0400] ctennis: yeah, it looks like it's happening while reading the output of a yum command
[2013-05-07 11:18:42 -0400] jasonsmr: I think it helps* auto configure it too
[2013-05-07 11:18:48 -0400] jasonsmr: really... hm
[2013-05-07 11:19:02 -0400] jasonsmr: oh maybe the version numbering/
[2013-05-07 11:19:06 -0400] jasonsmr: I saw that
[2013-05-07 11:19:09 -0400] ctennis: if you can, rerun chef using "-l debug" to get the most debugging output possible, and then pastebin stuff around the error for more context
[2013-05-07 11:19:18 -0400] jasonsmr: but it reports the correct version
[2013-05-07 11:19:55 -0400] jasonsmr: okey lets see , oh! I do run with the -l debug switch
[2013-05-07 11:20:16 -0400] ctennis: in your recipe, when you call "package", what does that look like?
[2013-05-07 11:22:12 -0400] jasonsmr: lets look
[2013-05-07 11:25:50 -0400] jasonsmr: Im not sure what chef really does.. but there is a configuration ruby file: http://sprunge.us/QDQf
[2013-05-07 11:26:19 -0400] jasonsmr: seems like it sets simple editable configuration template
[2013-05-07 11:26:30 -0400] jasonsmr: and executes them somehow with cheff..
[2013-05-07 11:31:25 -0400] jasonsmr: heres a bit from a metafile.rb >> long_description IO.read(File.join(File.dirname(__FILE__), 'README.rdoc'))
[2013-05-07 11:31:38 -0400] jasonsmr: thats what this recipe does
[2013-05-07 11:33:33 -0400] bigmyx: hi all, good to see you again! does anyone know what "$" variables mean inside the recipe ? ($1, $2, etc) , thanks
[2013-05-07 11:39:45 -0400] ctennis: jasonsmr, it looks like a chef bug
[2013-05-07 11:40:15 -0400] ctennis: it may be an issue with ruby 1.8.7, and is something that's gone untested.
[2013-05-07 12:08:00 -0400] jasonsmr: ctennis , If i copy the install phrasing from another package and replace it in this errored on , I get a entirly diffrent error not in package opensips but rather in my Big_Couch.rb recipe error was >> Data Bag Items must contain a Hash or Mash!
[2013-05-07 12:08:19 -0400] jasonsmr: ctennis , would you suggest that I upgrade ruby?
[2013-05-07 12:11:50 -0400] jasonsmr: I am still using an olde version of ruby 1.8.7 not 1.9.2
[2013-05-07 12:25:48 -0400] gigo1980: i try to install an chef node from my workstation
[2013-05-07 12:25:57 -0400] gigo1980: everything seems to work
[2013-05-07 12:26:00 -0400] gigo1980: but
[2013-05-07 12:26:05 -0400] gigo1980: ATAL: OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol
[2013-05-07 12:26:09 -0400] gigo1980: i get this error
[2013-05-07 12:26:41 -0400] gigo1980: my chef server doesnt have an real certify
[2013-05-07 12:41:55 -0400] Guest83342: jasonsmr it's hard to say, but a newer version of ruby may not hurt, if that won't mess your machine up too much
[2013-05-07 13:03:29 -0400] lightpriest: is there a proper way to use test-kitchen (0.7) against a chef server?
[2013-05-07 13:15:49 -0400] countdigi: does anyone have a link to the bash testing framework that was mentioned in one of the recent foodfight shows, can't seem to find in in show notes
[2013-05-07 13:17:03 -0400] countdigi: ah - got the right google search finally :-) https://github.com/sstephenson/bats
[2013-05-07 13:21:41 -0400] gchristensen: the infrastructure I'm working with is large enough now to need to run chef-client automatically on a regular basis, but I'm worried about just flipping the switch to making it automatic. Is there anything written on the topic? recommended articles, etc?
[2013-05-07 13:33:52 -0400] Azrael: hey folks, i'm getting osd crashes with ceph cuttlefish like so:  http://pastebin.com/Bt3yWvfV
[2013-05-07 13:33:57 -0400] Azrael: sorry wrong chan
[2013-05-07 13:35:21 -0400] countdigi: gchristensen: not aware of anything offhand - do u have specific concerns? we run under monit and have it kill the client if it gets over X MB in size for more than a few cycles
[2013-05-07 13:36:30 -0400] gchristensen: ah! yes, I'm thinking specifically about: CI for cookbooks, best practices, tar pits to avoid, error reporting. not the actual process of running it automatically, but the culture and practices it demands
[2013-05-07 13:37:15 -0400] countdigi: good luck buddy! ;-)
[2013-05-07 13:37:40 -0400] gchristensen: haha, I've got my cowboy hat here somewhere... ah! *flips the switch*
[2013-05-07 13:38:20 -0400] countdigi: http://www.youtube.com/watch?v=h_IEfNklzW4
[2013-05-07 13:38:25 -0400] countdigi: this one looks interesting
[2013-05-07 13:40:07 -0400] gchristensen: countdigi: that might bewhat I need thank you for the link
[2013-05-07 13:47:35 -0400] haylon: If I were to try and do a general version, not a specific one of RHEL, say RHEL 5 and not 5.5 or 5.8, and then for RHEL 6. This case statement does not work: case node['platform'];  when "redhat" && node[:platform_version] == "6"
[2013-05-07 13:47:52 -0400] hiraedd:  /leave
[2013-05-07 13:49:26 -0400] jmartin: haylon: because platform version is probably 6.4 or something
[2013-05-07 13:49:38 -0400] o6uoq: ls -la
[2013-05-07 13:50:02 -0400] jmartin: haylon: just convert that to integer and use >= 6
[2013-05-07 13:50:16 -0400] haylon: jmartin: is there a way to just do the whole version 6 or version 5 and not the super specific versios?
[2013-05-07 13:51:51 -0400] countdigi: chef:recipe > puts node['platform_version'].to_i
[2013-05-07 13:51:51 -0400] countdigi: 6
[2013-05-07 13:52:38 -0400] lostnewbie: Hi, I had a question about chef_gem, I am using it to load the mysql gem, but it seems to load it before running the "apt" cookbook.  Should I be using something else?
[2013-05-07 13:52:59 -0400] haylon: countdigi: I just put that command in the target chef-client terminal? or put that in my recipe?
[2013-05-07 13:53:46 -0400] countdigi: in recipe - i was just showing u using chef-shell how to do it
[2013-05-07 13:54:04 -0400] countdigi: to_i = to_integer which truncates anything right of the period
[2013-05-07 13:55:07 -0400] countdigi: also if u are using newer chef i would suggest 'platform_family' and then test for rhel
[2013-05-07 13:55:10 -0400] countdigi: chef:recipe > puts node['platform_family']
[2013-05-07 13:55:13 -0400] countdigi: rhel
[2013-05-07 13:55:28 -0400] countdigi: actually i guess its a newer ohai that does that
[2013-05-07 13:56:15 -0400] rayrod2030: What's the current thinking on naming a cookbook starting with an integer?
[2013-05-07 13:56:17 -0400] rayrod2030: bad idea?
[2013-05-07 13:56:39 -0400] countdigi: trololo
[2013-05-07 14:01:06 -0400] haylon: countdigi: So, I'm assigning it to a variable; @RHEL_VERSION = node['platform_version'].to_i; Then I am just substituting it in the case statements like: case node['platform']; when "redhat" && @RHEL_VERSION
[2013-05-07 14:08:09 -0400] gchristensen: is Gene Kim in here ever?
[2013-05-07 14:12:38 -0400] haylon: jmartin: I'm assigning it to a variable; @RHEL_VERSION = node['platform_version'].to_i; Then I am just substituting it in the case statements like: case node['platform']; when "redhat" && @RHEL_VERSION; Does that look correct?
[2013-05-07 14:12:50 -0400] cwj: gchristensen: not to my knowledge, but i believe the channel is logged if you really wanted to find out
[2013-05-07 14:13:09 -0400] gchristensen: I'm not that worried. I just watched one of his talks, and I think it was the best I've seen yet.
[2013-05-07 14:13:34 -0400] cwj: he is a rather effective presenter
[2013-05-07 14:16:02 -0400] jmartin: haylon: why are you combining them? why not make it simpler and just use the case statement and then an if block within the case?
[2013-05-07 14:16:04 -0400] rayrod2030: GK killed it at a new york devops meetup recently.
[2013-05-07 14:16:11 -0400] jmartin: it will make it clearer for you
[2013-05-07 14:17:14 -0400] haylon: jmartin: I'm not sure what you mean. Do you have an example?
[2013-05-07 14:20:14 -0400] jmartin: haylon: https://gist.github.com/hugespoon/5532907
[2013-05-07 14:20:39 -0400] haylon: jmartin: Are you talking about putting a case in a case. when "redhat"; case @RHEL_VERSION; when @RHEL_VERSION == "6"; ?
[2013-05-07 14:21:29 -0400] jmartin: haylon: sure, you can use another case statement
[2013-05-07 14:21:44 -0400] jmartin: but you dont need to store it in another variable
[2013-05-07 14:21:52 -0400] haylon: jmartin: I'll try both ways. Thank you for the help.
[2013-05-07 14:27:16 -0400] BryanWB: does test-kitchen support windows yet?
[2013-05-07 14:31:00 -0400] HoundDog: hi all
[2013-05-07 14:31:22 -0400] HoundDog: i am trying to add the opscode mysql cookbook to our stack (for windows)
[2013-05-07 14:31:33 -0400] HoundDog: i am getting an exception
[2013-05-07 14:31:41 -0400] HoundDog: in the windows cookbook
[2013-05-07 14:31:57 -0400] HoundDog: and am clueless
[2013-05-07 14:32:00 -0400] HoundDog: about it
[2013-05-07 14:32:01 -0400] HoundDog: NoMethodError: env[PATH] (C line /projects/Tap/Workspace/workspace/trunk/chef/Build/workspace-management/SfxRoot/Chef/Chef/Cookbooks/windows/providers/path.rb) had an error: NoMethodError: undefined method `<<' for nil:NilClass
[2013-05-07 14:32:05 -0400] HoundDog: any ideas
[2013-05-07 14:32:09 -0400] HoundDog: ?
[2013-05-07 14:32:40 -0400] HoundDog: the only thing in here is an "action :add do" for "env "PATH" do"
[2013-05-07 14:35:00 -0400] thody: I just installed chef server using the instructions here http://docs.opscode.com/install_server.html on an AWS instance running Ubuntu 12.04 w/ an elastic IP. Install went well, but the server is running on the internal hostname. Not clear where I can change this config to run on the elastic IP. /etc/chef-server doesn't seem to contain the server.rb config I'm expecting.
[2013-05-07 14:41:37 -0400] jasonsmr: hello again channel, Wuestion what type of error is this a bash scripting error? >>>
[2013-05-07 14:41:41 -0400] jasonsmr: STDOUT: error: Couldn't fork %post(opensips-1.6.4-8.el6.x86_64): Cannot allocate memorySTDERR: Error in POSTIN scriptlet in rpm package opensips-1.6.4-8.el6.x86_64
[2013-05-07 14:43:06 -0400] daimonic: rpm package installation error, due to you running out of memory
[2013-05-07 14:47:59 -0400] zachallett: I'm running into extremely long initial chef runs on vagrant up. It is very slowly storing the updated cookbooks in cache. it times out about 4 times and i need to run vagrant reload for the process to continue. is there anyway to speed up this process? initial chef-client runs are very quick on my non-vagrant servers. i am running chef server 11 with chef client 11.4.4
[2013-05-07 14:51:38 -0400] GoodJob: Hey guys. I have downloaded manually cookbook for nginx::source, but when I run it, I got an error on /nginx/recipes/source.rb line28: nginx_url = node['nginx']['source']['url'], and first error is "ERROR: Running exception handlers"
[2013-05-07 14:51:56 -0400] adnichols: zachallett is it possible this is a basic problem like the local system not being able to resolve its own hostname - no entry in hosts?
[2013-05-07 14:52:10 -0400] adnichols: zachallett I've seen that type of problem slow things down substantially
[2013-05-07 14:54:25 -0400] zachallett: adnichols i get proper returns when running hostname on both my macbook and the vagrant box
[2013-05-07 14:54:54 -0400] thom: zachallett: we found we needed to ensure that we had "      "--natdnsproxy1", "off", " in the vm customization settings for vagrant on virtualbox
[2013-05-07 14:55:08 -0400] sunil__: I am running into this new error when trying to use route53 cookbook..anyone seen this before?
[2013-05-07 14:55:10 -0400] sunil__: Unable to activate fog-1.11.1, because json-1.5.4 conflicts with json (~> 1.7)
[2013-05-07 14:58:45 -0400] zachallett: thom: thank you very much, it is much quicker now :)
[2013-05-07 15:00:12 -0400] thom: cool
[2013-05-07 15:07:17 -0400] GoodJob: Guys, maybe someone could help me on this http://serverfault.com/questions/505679/cant-compile-nginxsource
[2013-05-07 15:12:18 -0400] gchristensen: I had a file resource deleting a file, and forgot to specify not to keep any backups. is there a way to have Chef remove that file from its backup? Is it a terrible idea to do bash ... code "rm /var/chef/backup/var/log/foobar.log.*" end? heh
[2013-05-07 15:13:14 -0400] jmartin: is there a way to force an ohai update in a recipe?
[2013-05-07 15:14:43 -0400] kallistec: jmartin: ohai resource
[2013-05-07 15:15:07 -0400] kallistec: http://docs.opscode.com/resource_ohai.html
[2013-05-07 15:15:24 -0400] jmartin: kallistec: ah thanks! didnt even realize
[2013-05-07 15:16:01 -0400] kallistec: GoodJob: add `depends "nginx"` to your other cookbook's metadata
[2013-05-07 15:16:02 -0400] adnichols: zachallett the issue I've seen isn't that hostname doesn't return a valid response - it's that the response from hostname isn't listed in /etc/hosts - but if it's working for you now then that's great
[2013-05-07 15:17:16 -0400] kallistec: GoodJob: http://docs.opscode.com/essentials_cookbook_metadata.html
[2013-05-07 15:17:23 -0400] adnichols: zachallett I'm guessing the natdnsproxy setting has the effect of causing DNS resolution failures to fail faster
[2013-05-07 15:17:39 -0400] kallistec: GoodJob: http://www.opscode.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2013-05-07 15:18:09 -0400] GoodJob: thanks
[2013-05-07 15:19:04 -0400] kallistec: GoodJob: last link was the wrong one, this is what I meant: http://docs.opscode.com/breaking_changes_chef_11.html#non-recipe-file-evaluation-includes-dependencies
[2013-05-07 15:19:33 -0400] GoodJob: ok, thanks!
[2013-05-07 15:19:54 -0400] prometheanfire: trying to use private chef and I keep on getting 404s on registering nodes... :(
[2013-05-07 15:20:24 -0400] prometheanfire: when trying to access /clients on the server
[2013-05-07 15:21:19 -0400] kallistec: prometheanfire: most likely reason is you are using http instead of https URL
[2013-05-07 15:22:44 -0400] kallistec: and http is set to redirect (this is the default IIRC), and chef (for now) follows non GET redirect with a GET
[2013-05-07 15:24:15 -0400] prometheanfire: when set to https still have the problem
[2013-05-07 15:37:35 -0400] kallistec: prometheanfire: support ticket is your best bet then, they'll get you sorted
[2013-05-07 15:40:09 -0400] doublerr: kallistec: we may have to. we were mostly interested to know if anyone else has run into this lately since this is a brand new install
[2013-05-07 15:42:23 -0400] kallistec: doublerr: can you reproduce the issue with, e.g. `knife client create` ?
[2013-05-07 15:45:21 -0400] doublerr: kallistec: no, both knife and the ui work just fine. chef-client runs are the problem. Also manually creating the client/nodes and adding the pem files helps but still dies checking in
[2013-05-07 15:46:17 -0400] kallistec: doublerr: try running chef with -l debug and look at the debug info for the http requests?
[2013-05-07 15:47:51 -0400] doublerr: kallistec: ya, have been on debug. the requests look fine but and redirects are happening as expected but just get back a 404 for either /clients or /nodes
[2013-05-07 15:48:22 -0400] kallistec: doublerr: yeah, you need to adjust your chef_server_url such that the redirects don't happen
[2013-05-07 15:49:39 -0400] kallistec: the redirect behavior is based on a misinterpretation of the http 1.0 RFC and wrong. Chef 11.6 is going to change following of non-GET redirects to an error for this reason
[2013-05-07 15:49:49 -0400] doublerr: kallistec: i've tried every combo. current have "https://privatechef11_url" which does resolve, etc
[2013-05-07 15:50:10 -0400] doublerr: kallistec: the actual url resolves I should say
[2013-05-07 15:51:10 -0400] kallistec: doublerr: hard for me to tell without looking at the real urls. Support will probably be able to figure it out pretty quickly
[2013-05-07 15:51:55 -0400] doublerr: kallistec: ya, it's probably something really silly
[2013-05-07 15:52:11 -0400] doublerr: kallistec: which kills me but here is debug: http://pastebin.com/pSrGFpSM
[2013-05-07 15:53:41 -0400] VadimT: hello all
[2013-05-07 15:55:31 -0400] VadimT: i want to override some attributes for node. I am trying to do this with knife raw -m PUT /nodes/nodename -i mytest
[2013-05-07 15:55:54 -0400] kallistec: doublerr: ah, you're missing the organizations part of the URL
[2013-05-07 15:56:22 -0400] kallistec: should be https://host/organizations/ORGNAME for chef_server_url
[2013-05-07 15:57:37 -0400] kallistec: VadimT: there's not a command in knife for patching attributes right now
[2013-05-07 15:59:24 -0400] doublerr: kallistec: that's it. thanks! i'm so used to open source chef
[2013-05-07 15:59:31 -0400] VadimT: <@kallistec> i am trying to do this via API
[2013-05-07 15:59:42 -0400] VadimT: <@kallistec> with knife raw i can send API request right?
[2013-05-07 16:00:35 -0400] kallistec: VadimT: at the HTTP level, the API only accepts full documents
[2013-05-07 16:01:27 -0400] kallistec: but yes, knife raw does do http requests to the api
[2013-05-07 16:02:48 -0400] VadimT: <@kallistec> but if i want to override just attributes i must send full json?
[2013-05-07 16:03:01 -0400] kallistec: VadimT: yes
[2013-05-07 16:05:47 -0400] riddochc: Got a question - I'm setting up chef solo with vagrant for a dev system, and have got some cookbooks up and running by including them in the run list, but it sounds like there's things those cookbooks set up lightweight resources for me to use.  Do I use the lightweight resources in custom cookbooks, or in the run list, or what?
[2013-05-07 16:06:36 -0400] VadimT: <@kallistec> no way to change just attributes?
[2013-05-07 16:07:13 -0400] kallistec: VadimT: nope, you need a round trip.
[2013-05-07 16:08:44 -0400] VadimT: <@kallistec> thx for help
[2013-05-07 16:15:51 -0400] bdemers: i'm a little confused with on how permissions are defined/granted on a chef server
[2013-05-07 16:16:11 -0400] s2r2_: Using spiceweasel, I just deleted every VM that `nova list` knows about? (using knife-openstack)
[2013-05-07 16:16:15 -0400] s2r2_: that can't be right.
[2013-05-07 16:16:23 -0400] bdemers: from one of my nodes, i'm adding/removing boxes (nodes/clients)
[2013-05-07 16:16:45 -0400] s2r2_: that's not "the infrastructure described in the manifest"
[2013-05-07 16:17:05 -0400] bdemers: box X can create new nodes, but not delete them, which permission do i need to grant ? and how ?
[2013-05-07 16:21:14 -0400] GoodJob: kallistec: I have read everything you gave, but still have no idea what to do... :)
[2013-05-07 16:22:34 -0400] kallistec: GoodJob: the cookbook that has the recipe that calls `include_recipe "nginx::source"` now depends on the nginx cookbook to function. You have to specify this dependency in the metadata.rb file
[2013-05-07 16:22:48 -0400] kallistec: with, e.g., `depends "nginx"`
[2013-05-07 16:49:30 -0400] j^2: i want to play with minitest-handler-cookbook, any suggetions on cookbooks to try to run against it?
[2013-05-07 16:49:31 -0400] GoodJob: kallistec, it works now! Thanks!!
[2013-05-07 17:02:00 -0400] magoo: can someone provide some guidance as to why the rsyslog cookbook creates a SHA1 on the filename for the statefile name for watch_files?
[2013-05-07 17:02:19 -0400] magoo: this results in a new statefile every time the cookbook runs
[2013-05-07 17:02:28 -0400] magoo: which seems to break things wonderfully
[2013-05-07 17:02:47 -0400] s2r2_: Given a VM that was known to a chef server but now has to be assigned to another one, what's the quickest way to get there?  I.e. put the validator key on the VM again and recreate a new client key... is there some knife trick for that?
[2013-05-07 17:03:40 -0400] magoo: s2r2_: delete the client.pem and put the new validator in place along with the new chef_server conf file
[2013-05-07 17:04:05 -0400] magoo: I'd also be curious if there's a knife shortcut/plugin for this
[2013-05-07 17:04:34 -0400] s2r2_: magoo: thank you
[2013-05-07 17:12:20 -0400] BryanWB: hello dear chefs, afaict test-kitchen does not support windows, is that correct?
[2013-05-07 17:13:06 -0400] kindsol: When I shutdown a Chef Client, is the typical workflow to then `knife node delete` and `knife client delete` from my workstation?
[2013-05-07 17:14:00 -0400] jblaine: kindsol: Yes
[2013-05-07 17:14:20 -0400] jblaine: kindsol: Assuming by 'shutdown' you mean de-provision/nuke
[2013-05-07 17:14:34 -0400] kindsol: yup
[2013-05-07 17:14:54 -0400] kindsol: jblaine: thx
[2013-05-07 17:17:24 -0400] BryanWB: dpetzel: my memory is rusty, r u using minitest-handler on windows?
[2013-05-07 17:17:34 -0400] s2r2_: kindsol: there's vagrant-butcher for that if you're in a vagrant setup.
[2013-05-07 17:17:51 -0400] s2r2_: (might work with other providers but I have not tested that)
[2013-05-07 17:17:57 -0400] kindsol: nodes don't have perms to delete themselves by default, how are most people autoscaling?  By setting up your autoscaling system as a Chef workstation?
[2013-05-07 17:18:25 -0400] kindsol: s2r2_: cool.  I'm just running the chef-solo provisioner there.
[2013-05-07 17:18:45 -0400] kindsol: but good to know
[2013-05-07 17:29:08 -0400] djustin: anyone know of any ways to create user profiles for windows?
[2013-05-07 17:29:17 -0400] djustin: they require initial login
[2013-05-07 17:30:34 -0400] rava: besides jenkins, is there any other framework that's popular for deploying changes to the chef server? i'm trying to get my team away from direct knife uploads
[2013-05-07 17:30:42 -0400] rava: and looking around for what's out there
[2013-05-07 17:31:08 -0400] magoo: jenkins works pretty well for us
[2013-05-07 17:32:12 -0400] magoo: rava: are you using git for version control?
[2013-05-07 17:32:16 -0400] rava: are you using a cookbook manager like berkshelf or the like?
[2013-05-07 17:32:19 -0400] rava: magoo: si
[2013-05-07 17:32:54 -0400] rava: there would be blood, otherwise
[2013-05-07 17:33:41 -0400] surge_: For whatever reason, the deploy resource is constantly updating the codebase even though I specify a revision. I thought it was specifically supposed to NOT do this. Would using deploy_revision fix that?
[2013-05-07 17:34:00 -0400] jtimberman: surge_: are you using "deploy" or "deploy_revision"
[2013-05-07 17:34:22 -0400] knuckolls: surge_: whyrun might shed light on what it's doing.
[2013-05-07 17:34:26 -0400] jtimberman: deploy_revision will use the reference you specify, deploy does a "timestamp" based deploy. capistrano style
[2013-05-07 17:34:33 -0400] surge_: deploy but the docs say that Chef will choose the best way of running the recipe
[2013-05-07 17:34:46 -0400] magoo: i don't use a cookbook manager atm... it's all in version control and I update cookbooks as needed. The cookbooks we modify are kept in site-cookbooks. We have jenkins poll our repo every minute or so and push out all the chef code when a change is made
[2013-05-07 17:35:27 -0400] magoo: you could just have a commit hook that posts to a simple app that would accomplish the same thing for you
[2013-05-07 17:35:43 -0400] magoo: but jenkins was very little work to get things moving
[2013-05-07 17:35:57 -0400] rava: yeah, i was leaning that way at first but trying to fight down my natural "NIH" tendancy :)
[2013-05-07 17:36:22 -0400] surge_: knuckolls: Where would I use that, in the chef-shell?
[2013-05-07 17:36:48 -0400] magoo: i need to revisit a cookbook manager. it's been quite some time since I looked at them. I was mostly unhappy with upstream cookbooks merging into master when I originally looked at it
[2013-05-07 17:36:57 -0400] knuckolls: surge_: hop on the node and run chef-client or solo by hand with the --why-run flag
[2013-05-07 17:37:00 -0400] magoo: i'm sure there are much better solutions now
[2013-05-07 17:37:21 -0400] knuckolls: magoo: everyone's beginning to rally around berkshelf for a reason. it's cookbook development easy mode
[2013-05-07 17:37:54 -0400] magoo: knuckolls: this needs to be a high priority for me... not having one has bitten me in the ass multiple times already
[2013-05-07 17:38:04 -0400] magoo: i'll check berkshelf out
[2013-05-07 17:39:16 -0400] knuckolls: magoo: the wrapper cookbook pattern and use of chef-rewind is also highly recommended
[2013-05-07 17:39:21 -0400] knuckolls: keeps you from forking upstream cookbooks
[2013-05-07 17:40:10 -0400] rava: i haven't heard of chef-rewind
[2013-05-07 17:40:25 -0400] magoo: knuckolls: yes! i've started looking at rewind for an upcoming project. Looks pretty sweet
[2013-05-07 17:40:26 -0400] rava: and by wrapper cookbook, do you mean application cb?
[2013-05-07 17:41:05 -0400] knuckolls: rava: http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2013-05-07 17:41:18 -0400] magoo: silly question... is the best practice to still put wrapped cookbooks in site-cookbooks and leave in-tact upstream cookbooks in the cookbooks folder?
[2013-05-07 17:41:31 -0400] rava: heh, i just tagged this in my "read it later" list last night
[2013-05-07 17:41:34 -0400] knuckolls: magoo: with berkshelf you keep all your cookbooks in their own separate repositories
[2013-05-07 17:41:56 -0400] ivey: magoo:
[2013-05-07 17:41:57 -0400] knuckolls: because they're just source code like any other code and should be released and tagged separately
[2013-05-07 17:42:22 -0400] magoo: oh lord, i can see that blowing up our git repo
[2013-05-07 17:42:29 -0400] ivey: magoo: we have a 'no cookbooks in the chef repo w/ same name as community cookbook' rule
[2013-05-07 17:42:36 -0400] ivey: so if we fork to edit it, we rename the cookbook
[2013-05-07 17:42:58 -0400] knuckolls: ivey: i've found that there are vey few reasons to fork a cookbook instead of wrapping it and rewinding it
[2013-05-07 17:43:02 -0400] knuckolls: personally
[2013-05-07 17:43:09 -0400] knuckolls: unless there's a real bug that needs to be fixed
[2013-05-07 17:43:12 -0400] magoo: this is all good feedback
[2013-05-07 17:43:12 -0400] rava: hmm, interesting... avoiding roles.. i've built my whole stack around them >.>
[2013-05-07 17:43:13 -0400] ivey: yeah usually we just fix the community cookbook
[2013-05-07 17:43:18 -0400] magoo: i'm growing behind
[2013-05-07 17:43:30 -0400] knuckolls: rava: we did roles heavily heavily heavily
[2013-05-07 17:43:34 -0400] knuckolls: at my previous gig
[2013-05-07 17:43:41 -0400] knuckolls: we moved to wrapper cookbooks
[2013-05-07 17:43:45 -0400] knuckolls: because of how much it started to hurt
[2013-05-07 17:43:58 -0400] magoo: but then a wrapper gets its own repo?
[2013-05-07 17:44:01 -0400] knuckolls: yes
[2013-05-07 17:44:11 -0400] rava: knuckolls: i can definitely see that
[2013-05-07 17:44:12 -0400] magoo: ok, making sure
[2013-05-07 17:44:30 -0400] rava: we're on aws and i've been bashing my head to write a good, automated AMI creation workflow
[2013-05-07 17:44:53 -0400] knuckolls: rava: godspeed. :) i never did it and had long bootstrap times
[2013-05-07 17:44:55 -0400] rava: since we follow the pattern of having an ami with all the core software installed, but disabled/enabled as neccessary depending on the role
[2013-05-07 17:44:57 -0400] magoo: why are you automating AMI creation? to speed up provision times?
[2013-05-07 17:45:02 -0400] rava: yeah
[2013-05-07 17:45:26 -0400] rava: i'm trying to move to having a jenkins job build new ami's on a weekly basis with security patches and all the happy jazz
[2013-05-07 17:45:39 -0400] magoo: sounds like a win
[2013-05-07 17:45:42 -0400] rava: make bootstrapping a matter of enabling services in the user-data file
[2013-05-07 17:45:47 -0400] knuckolls: emblogginate it when you're done rava :)
[2013-05-07 17:45:54 -0400] magoo: yes!
[2013-05-07 17:46:07 -0400] rava: totally thieving 'emblogginate'
[2013-05-07 17:46:48 -0400] rava: just need to buckle down a smooth work flow that doesn't have my ops team stomping on each other's changes
[2013-05-07 17:47:32 -0400] knuckolls: yep i think we're all learning that the hard way
[2013-05-07 17:47:45 -0400] knuckolls: best practices are emerging, sounds like you've already got jenkins so you're well on your way
[2013-05-07 17:48:05 -0400] knuckolls: anyway i've got to roll out and ship some code
[2013-05-07 17:48:14 -0400] rava: we have jenkins right now running like.. one test on an automated basis. i'm so hijacking it from the dev team :D
[2013-05-07 17:48:25 -0400] knuckolls: rava: as am i
[2013-05-07 17:48:36 -0400] knuckolls: or are we, i should say.
[2013-05-07 17:48:48 -0400] rava: heheh
[2013-05-07 17:50:57 -0400] bjensen: does anyone have any resource where I can learn how to use data bags with chef solo?
[2013-05-07 17:51:32 -0400] rava: http://docs.opscode.com/essentials_data_bags.html#with-chef-solo
[2013-05-07 18:07:26 -0400] adamjk-dev: can someone explain what knife cookbook test <cookbook> does?
[2013-05-07 18:08:32 -0400] adamjk-dev: I guess just syntax, in the .rb and .erb files
[2013-05-07 18:17:16 -0400] stormtrooperguy: hello... i'm having a wacky problem with using service vs. execute. if i try to do service "portal", action :start the app doesn't actually start. if i do execute "/etc/init.d/portal start" it works fine. any ideas what might be missing? (portal is an in house developed app so the init script could be wrong somehow)
[2013-05-07 18:19:51 -0400] knuckolls: stormtrooperguy: sometimes you have to set the "pattern" parameter so it can see whether or not the process is running in the process table. for example, does portal show up as the process name in `ps faux`?
[2013-05-07 18:19:56 -0400] jmickle: stormtrooperguy: do you have any actions that notify the service to actually start?
[2013-05-07 18:20:18 -0400] stormtrooperguy:  #service "portal" do #supports :start => true, :stop => true #action [:enable, :start] #end
[2013-05-07 18:20:40 -0400] adnichols: stormtrooperguy what OS?
[2013-05-07 18:20:46 -0400] knuckolls: stormtrooperguy: i've also seen some init.d scripts fork off a process and have it cleaned up when the chef-client ends because of process group problems.
[2013-05-07 18:20:49 -0400] stormtrooperguy: centos 6.4
[2013-05-07 18:21:07 -0400] stormtrooperguy: it's launching a tomcat application, so the actual process that shows up is java
[2013-05-07 18:21:07 -0400] adnichols: stormtrooperguy if you use 'service portal start' does that work correctly on the system?
[2013-05-07 18:21:14 -0400] stormtrooperguy: yeah, service portal start works
[2013-05-07 18:21:41 -0400] adnichols: ah tomcat.. fun.. I have the worst luck with tomcat & init scripts
[2013-05-07 18:21:55 -0400] stormtrooperguy: running "/etc/init.d/portal start" via execute works fine... it just makes foodcritic sad ;)
[2013-05-07 18:22:10 -0400] adnichols: as it should hrm
[2013-05-07 18:22:32 -0400] jwitrick: anyone using chefspec had to stub out a call to 'Chef::ShellOut' ?
[2013-05-07 18:23:15 -0400] adnichols: stormtrooperguy you could kick up the log level to debug and see if there's anything interesting there when it tries to start the service - not sure otherwise
[2013-05-07 18:23:21 -0400] stormtrooperguy: the tomcat init script is derived from the rhel standard one, but for our bundled application. it's not doing anything super-fancy, just mucking with catalina_base / users / etc...
[2013-05-07 18:23:32 -0400] stormtrooperguy: yeah, i'll try debug and see what happens.
[2013-05-07 18:24:46 -0400] adnichols: stormtrooperguy I wonder if there's some assumption made about the shell environment that isn't present when using the service resource
[2013-05-07 18:25:22 -0400] stormtrooperguy: hmmm... shell environment. that seems like a likely candidate
[2013-05-07 18:25:41 -0400] stormtrooperguy: chef-client thinks it's successful, so whatever it is doing is exiting cleanly :)
[2013-05-07 18:26:47 -0400] adnichols: does 'env' show anything internesting when you're a user on that system? Something that might get inherited via profile.d or something when running exec?
[2013-05-07 18:27:24 -0400] adnichols: you could also look to see if those failures to start are producing logged failures somewhere
[2013-05-07 18:27:40 -0400] adnichols:  like wherever tomcat stderr is logged
[2013-05-07 18:39:48 -0400] ryker: is there a way to get the differences between two versions of a cookbook from the chef server?
[2013-05-07 18:39:59 -0400] ryker: I assume I'd use knife diff, but I'm not sure of the syntax
[2013-05-07 18:46:52 -0400] troyready: Is there a good way to see what changes were merged into the chef-client for each version? I'm trying to find the best way to track down a regression we've encountered in the latest version's template resource.
[2013-05-07 18:49:42 -0400] bjensen: do any of you guys use ssh_known_hosts? when I use it I get this as my /etc/ssh/ssh_known_hosts file: http://pastie.org/7814547 my databag looks like this: http://pastie.org/7814554
[2013-05-07 18:50:41 -0400] bjensen: I have no idea why the first part of the entries are "|1|kyNcGjjdN/xaSELY3NE9lI5eS/0=|DzQ/jhY5R+knrdvF6K/de9pea/U=" when they should be github.com
[2013-05-07 18:52:33 -0400] jstallard: bjensen: HashKnownHosts is probably enabled in your /etc/ssh/ssh_config
[2013-05-07 18:59:02 -0400] bjensen: jstallard: I see but why doesnt ssh -T git@github.com work then?
[2013-05-07 18:59:12 -0400] bjensen: as in..it wants me to accept the cert
[2013-05-07 18:59:23 -0400] ooshlablu: hey guys, I'm trying to use the openldap cookbook and I'm wondering if someone can offer me some advice
[2013-05-07 19:00:01 -0400] ooshlablu: basically, the cookbook relies on searching the attribute openldap->slapd_type->master
[2013-05-07 19:00:11 -0400] jstallard: bjensen: that I'm not sure about. I'd suggest disabling the hashing so you can actually read the known_hosts file to make sense of it, then continue to debug from there
[2013-05-07 19:00:24 -0400] ooshlablu: but if I do a search for openldap_slap_type:master, it returns nothing
[2013-05-07 19:00:40 -0400] ooshlablu: the cookbook itself gets a 404 when it tries to run
[2013-05-07 19:00:56 -0400] ooshlablu: I'm wondering if anyone else has experienced this before
[2013-05-07 19:01:20 -0400] gleam: i use the ssh known hosts cookbook and don't have that problem
[2013-05-07 19:01:23 -0400] gleam: my file is unhashed
[2013-05-07 19:02:00 -0400] ryanfrantz: anyone got any pointers for someone that would like to compile support for nginx's stub_status module into the omnibus installer for chef-server?
[2013-05-07 19:02:59 -0400] ryanfrantz: i see this project: https://github.com/opscode/omnibus-chef-server
[2013-05-07 19:03:16 -0400] ryanfrantz: but it's not clear how the nginx build fits in
[2013-05-07 19:05:43 -0400] surge_: jtimberman: Oh, just saw your second message. Yeah, I don't need a timestamped based deploy. I just wanted a specific version pulled down once. Thanks!
[2013-05-07 19:06:55 -0400] surge_: knuckolls: Thanks for sharing that --why-run option. Will keep it in mind for the future.
[2013-05-07 19:07:38 -0400] rava: --why-run is my teddy bear
[2013-05-07 19:07:56 -0400] thehar: lmfao
[2013-05-07 19:08:38 -0400] rava: shef would be, if it would converge attributes the same wya the client does when executing on a node >.>
[2013-05-07 19:08:44 -0400] rava: so it's just a tease
[2013-05-07 19:08:46 -0400] ryanfrantz_: jtimberman: any recommendations? i'm looking to monitor nginx's health
[2013-05-07 19:10:05 -0400] ryanfrantz_: hmm, webchat.freenode.net seems to be buggering things up....
[2013-05-07 19:15:01 -0400] gad0lin_: ChefConf rocks, Just one nexus 4 from datadog - Congrats to @gad0lin, winner of a Nexus 4 in the @datadoghq #ChefConf 2013 raffle! :) :) :)
[2013-05-07 19:15:14 -0400] rava: gratz!
[2013-05-07 19:15:18 -0400] rava: i <3 nexus devices
[2013-05-07 19:16:14 -0400] gad0lin_: rava: :)
[2013-05-07 19:16:31 -0400] rava: android needs a chef-client
[2013-05-07 19:16:32 -0400] justizin: anyone seen an issue like this? https://gist.github.com/anonymous/5535322
[2013-05-07 19:16:47 -0400] justizin: rava: doesn't android just run ruby?
[2013-05-07 19:16:59 -0400] rava: justizin: darwin jvm
[2013-05-07 19:17:02 -0400] rava: on linux
[2013-05-07 19:17:09 -0400] rava: so it could if rooted, i guess
[2013-05-07 19:17:12 -0400] justizin: right, but it's on linux, you can have ruby, right?
[2013-05-07 19:17:13 -0400] justizin: right.
[2013-05-07 19:17:27 -0400] justizin: you would by nature have to root the device to put chef on it ;)
[2013-05-07 19:17:42 -0400] rava: but i honestly would rather have the client run with normal application privs
[2013-05-07 19:17:54 -0400] justizin: to do wha?
[2013-05-07 19:18:07 -0400] justizin: also, sure, you could do that as well, you'd just have to root to install ruby
[2013-05-07 19:18:09 -0400] rava: as to your gist, are you sure you have the right md5 library version ?
[2013-05-07 19:18:18 -0400] justizin: i'm not at all sure of that :)
[2013-05-07 19:18:29 -0400] justizin: i'm testing some recipes launched with knife ec2
[2013-05-07 19:18:46 -0400] rava: chances are you are missing a gem, or have the wrong version gem
[2013-05-07 19:18:55 -0400] justizin: and actually, i am totally confused because chef doesn't seem to be installed on the vm
[2013-05-07 19:19:01 -0400] justizin: there is no /opt
[2013-05-07 19:19:01 -0400] rava: lol
[2013-05-07 19:19:09 -0400] rava: if it was installed via gem, there wouldn't be
[2013-05-07 19:19:13 -0400] justizin: ahh
[2013-05-07 19:19:16 -0400] rava: well, depending on your distro
[2013-05-07 19:19:20 -0400] rava: the omnibus install goes to /opt
[2013-05-07 19:19:24 -0400] justizin: but the trace refers to /opt
[2013-05-07 19:19:35 -0400] rava: if it was installed via native package manager.. who knows
[2013-05-07 19:19:36 -0400] justizin: unless this error is happening in knife on my mac..
[2013-05-07 19:19:41 -0400] rava: if via gems, search the gem path
[2013-05-07 19:20:19 -0400] justizin: it's installed however knife ec2 does it? ;d
[2013-05-07 19:20:21 -0400] rava: can you gist the command?
[2013-05-07 19:20:37 -0400] justizin: sure
[2013-05-07 19:20:43 -0400] rava: and where is that cat being run on? localhost or the remote machine?
[2013-05-07 19:21:01 -0400] justizin: cat?
[2013-05-07 19:21:11 -0400] rava: "sudo cat /var/cache/chef/chef-stacktrace.out"
[2013-05-07 19:21:17 -0400] justizin: the remote machine
[2013-05-07 19:22:01 -0400] justizin: https://gist.github.com/bitmonk/5535371
[2013-05-07 19:22:06 -0400] justizin: is my knife cmd
[2013-05-07 19:22:36 -0400] justizin: brbz
[2013-05-07 19:22:55 -0400] mattray: Weird, ohai thinks my vm has 64 CPUs and 64 ram slots
[2013-05-07 19:23:02 -0400] rava: i'm guessing it's a fail on the remote machine then, since that's client output. if knife was puking, i think it would puke before it got to the point of running the client on the machine
[2013-05-07 19:23:14 -0400] rava: mattray: i want that guest machine! 0.0
[2013-05-07 19:23:20 -0400] rava: ~host
[2013-05-07 19:23:41 -0400] mattray: rava: just a bunch of junk
[2013-05-07 19:24:03 -0400] rava: heh, i'd just love to have a machine with 64 cpus
[2013-05-07 19:24:32 -0400] rava: dedicate a cpu for each server process, lol
[2013-05-07 19:29:00 -0400] justizin: rava: that's what i thought, so i'm super confused as to how i don't have an /opt on the ec2 instance ;d
[2013-05-07 19:29:18 -0400] rava: i think the knife ec2 stuff still uses gems for installation
[2013-05-07 19:29:35 -0400] justizin: mattray: twas good to see you the other day, it had been far too long :)
[2013-05-07 19:30:00 -0400] justizin: rava: but the trace output points at /opt/chef, right? i'm in a hall of mirrors here ;d
[2013-05-07 19:30:18 -0400] rava: justizin: ya, that's wonky
[2013-05-07 19:30:59 -0400] rava: it's more like inception. you think what you see is real..
[2013-05-07 19:31:04 -0400] justizin: right..
[2013-05-07 19:32:35 -0400] justizin: and regardless of /opt, there just doesn't seem to be a chef-client on the box
[2013-05-07 19:32:44 -0400] justizin: even after chef-client has done allll manner of stuff before encountering this error
[2013-05-07 19:33:14 -0400] justizin: this is after like setting up a firewall and installing harden and updating apt and etc.. etc..
[2013-05-07 19:33:27 -0400] justizin: maybe i should try a simpler run list with just one cookbook
[2013-05-07 19:33:53 -0400] rava: i always start with an empty run list
[2013-05-07 19:34:03 -0400] justizin: that works fine.
[2013-05-07 19:34:06 -0400] rava: just to make sure the node can register and all that jazz when i'm seeing issues
[2013-05-07 19:34:17 -0400] justizin: this md5 error comes out of nowhere, seemingly on a cookbook_file
[2013-05-07 19:35:36 -0400] rava: i'd say try what i jsut said, make sure that the node can register without an issue
[2013-05-07 19:35:43 -0400] rava: then start troubleshooting your way through the run list
[2013-05-07 19:36:45 -0400] justizin: yeah like i said, an empty run list is fine, the node definitely registers and when this error occurs, it has executed several recipes..
[2013-05-07 19:38:28 -0400] justizin: the trace says where it comes from, but that line is just a cookbook_file
[2013-05-07 19:39:05 -0400] justizin: rava: this is the actual block that seems to generate the error: https://gist.github.com/bitmonk/5535487
[2013-05-07 19:39:18 -0400] justizin: oh, it's using md5 to compare the existing file to the current output, duh
[2013-05-07 19:39:27 -0400] mattray: my complaint about ohai junk: http://tickets.opscode.com/browse/OHAI-464
[2013-05-07 19:39:41 -0400] rava: heh
[2013-05-07 19:40:08 -0400] justizin: btw, rava, if you want a box with lots of cores supermicro has like an 80-core xeon box with 1TB  of ram, if not bigger by now..
[2013-05-07 19:40:21 -0400] rava: ...
[2013-05-07 19:40:34 -0400] justizin: crucially had one a while back, but couldn't get varnish to exercise all the cores last i heard ;d
[2013-05-07 20:00:28 -0400] fearoffish: has the ability to search data bags been removed from attributes files?
[2013-05-07 20:00:33 -0400] fearoffish: since chef 10
[2013-05-07 20:01:02 -0400] fearoffish: I have an attribute file that pulls info from a data bag and it gives: Undefined node attribute or method `search' on `node'
[2013-05-07 20:01:43 -0400] riddochc: So, I've told vagrant a directory to find data bags for chef, and I'm having problems figuring out how to set default['postgresql']['version'] (in the postgresql cookbook) to "9.2"  Help please?
[2013-05-07 20:05:54 -0400] riddochc: I tried making just a postgresql.json file in my data bags directory, with { "id": "postgresql", "version": "9.2" } and that's not doing it.  Tried a postgresql directory with a version.json file... It's not clear how data bags map to attributes, or even how to test this (knife assumes a chef server) without doing a full vagrant provision.
[2013-05-07 20:09:36 -0400] log1kal: riddochc: databag items don't map to node variables unless you tell them to
[2013-05-07 20:10:40 -0400] log1kal: you may need to do something like "node['postgresql']['version'] = data_bag_item('postgresql', 'version')
[2013-05-07 20:10:48 -0400] riddochc: log1kal: Okay, then I'm asking the wrong question. How do I specify that I want postgresql 9.2 instead of 8.4, which it defaults to?
[2013-05-07 20:11:03 -0400] log1kal: http://docs.opscode.com/essentials_data_bags.html#load-with-recipe-dsl has more info
[2013-05-07 20:11:54 -0400] log1kal: if you're just testing something in solo with vagrant, I tend to use the chef.json in the Vagrantfile
[2013-05-07 20:12:22 -0400] log1kal: if this is something I'm going to be doing across dev and prod environments, I use environments
[2013-05-07 20:12:38 -0400] log1kal: (so that I can have different versiosn in dev and prod)
[2013-05-07 20:13:34 -0400] log1kal: let me see if I can drum up some better examples
[2013-05-07 20:15:41 -0400] riddochc: log1kal: Thanks, I suppose the chef.json in my Vagrantfile is probably what I'm looking for, in the short-term.
[2013-05-07 20:16:40 -0400] riddochc: log1kal: Though I figured that since the Vagrantfile offers a way to do chef.data_bags_path = ... that somehow that's what I should be using.  Maybe not.
[2013-05-07 20:17:12 -0400] log1kal: https://gist.github.com/logikal/5535751
[2013-05-07 20:17:58 -0400] log1kal: I consider databags a place to hold configs that are going to be the same in all environments. I'm not sure that's "correct", but it works for me
[2013-05-07 20:18:13 -0400] greenmoss: has anyone written resource or LWRP code to manually find the "source" for a template?
[2013-05-07 20:18:50 -0400] greenmoss: so for example: I want to invoke a template resource, but only if the source file exists
[2013-05-07 20:19:57 -0400] greenmoss: in the chef internals I see "TemplateFinder.new(run_context, cookbook_name, node)", but don't know where "run_context" comes from
[2013-05-07 20:20:06 -0400] greenmoss: or how to create it
[2013-05-07 20:20:19 -0400] riddochc: log1kal: Awesome, thanks.  Trying that now...
[2013-05-07 20:21:01 -0400] log1kal: actually, I think my environment example won't work in 11.
[2013-05-07 20:21:38 -0400] da3v_: jtimberman: I'm trying to use dmg_package with a local file copied to file_cache_path, and am getting "nil is not a valid `source` parameter for remote_file." Is this expected?
[2013-05-07 20:21:45 -0400] log1kal: yup, that'll choke.
[2013-05-07 20:21:50 -0400] log1kal: should be node.default
[2013-05-07 20:23:09 -0400] heathsnow: anyone familiar with the rabbitmq cookbook?  There's an attribute ['rabbitmq']['cluster_disk_nodes'] = [].  Readme says it's equal to node@host.  Is this equivalent to rabbit@MachineShortName?
[2013-05-07 20:23:37 -0400] riddochc: Oh, you're right! node.default.postgresql.version would be the fully qualified "path" I guess, then?
[2013-05-07 20:24:47 -0400] log1kal: yes, but it matters where you're setting that. (see http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html for more info)
[2013-05-07 20:27:20 -0400] log1kal: heathsnow: while it's likely that's true, it's not necessarily true at all times
[2013-05-07 20:27:47 -0400] riddochc: log1kal: Ok, that helps a lot. Thanks for the pointers.
[2013-05-07 20:27:57 -0400] log1kal: since the 'host' part of that can be an FQDN in some instances where the shortname isn't resolvable
[2013-05-07 20:28:08 -0400] log1kal: riddochc: no prob! good luck :)
[2013-05-07 20:29:21 -0400] log1kal: heathsnow: I say this because I ran into an issue clustering ejabberd, which is also erlang, and ran into a similar issue
[2013-05-07 20:48:29 -0400] riddochc: log1kal: It's still giving me 8.4.   My Vagrantfile has: chef.json = { "default" => { "postgresql" => { "version" => "9.2" }}}  (with a few newlines...)
[2013-05-07 20:54:14 -0400] riddochc: Aha! I can use default_attributes() in my role definition and that seems to work.
[2013-05-07 21:03:53 -0400] densone: quick question, What's the best way to set a node attribute for a specific host. having trouble with good on this.
[2013-05-07 21:04:16 -0400] densone: Is there a way in a role to set a node attribute for a specific host?
[2013-05-07 21:05:20 -0400] adnichols: densone knife node edit?
[2013-05-07 21:05:49 -0400] densone: adnichols:  I tried that and added under normal.
[2013-05-07 21:05:49 -0400] adnichols: densone roles don't really have per-host attributes
[2013-05-07 21:06:08 -0400] densone: Do I need to make an override section or something?
[2013-05-07 21:06:22 -0400] densone: It got wiped on the next chef run.
[2013-05-07 21:06:45 -0400] adnichols: densone If you set under 'normal' then it should persist
[2013-05-07 21:07:02 -0400] densone: adnichols: Trying again
[2013-05-07 21:07:02 -0400] adnichols: densone default and override, I believe, do not persist
[2013-05-07 21:08:48 -0400] densone: adnichols: hem this is why
[2013-05-07 21:08:49 -0400] densone: ^[[BNode not updated, skipping node save
[2013-05-07 21:09:12 -0400] adnichols: ah
[2013-05-07 21:09:38 -0400] densone: oh wait. It's in there.
[2013-05-07 21:09:44 -0400] densone: Just reordered .
[2013-05-07 21:09:46 -0400] densone: derp
[2013-05-07 21:18:05 -0400] xvrbx: any channel dedicated to integration testing of chef recipes?
[2013-05-07 21:18:19 -0400] cwj: anyone familiar with a way to check for running processes in minitest-chef tests?
[2013-05-07 21:19:41 -0400] xvrbx: oh minitest-chef... is that the tool you recommend for integration tests, cwj ?
[2013-05-07 21:20:15 -0400] cwj: xvrbx: well its what i am getting my feet wet with
[2013-05-07 21:20:26 -0400] cwj: test-kitchen + minitest
[2013-05-07 21:21:08 -0400] ponyofdeath: fis there a way to do search and replace on a file with chef?
[2013-05-07 21:21:17 -0400] xvrbx: good :) for now I'm far from getting my feet wet... I'd say I'm more towards getting my head hot :D
[2013-05-07 21:21:26 -0400] bdha: Anyone install chef-server omnibus on centos6 and run into /etc/chef-server not being populated with keys?
[2013-05-07 21:21:39 -0400] bdha: Secrets is there, but no pems.
[2013-05-07 21:23:51 -0400] bdha: argh. fqdn. derp.
[2013-05-07 21:34:21 -0400] sunil: I have a questions on how chef-client/omnibus manages gems vs installing fog directly into a system..if I am installing fog via knife (node launch command), will it use all the gems from omnibus chef installation? or will it install its own versions?
[2013-05-07 21:47:39 -0400] maplebed: I feel like I'm missing something obvious.  I'm trying to make the images dir and all its subdirs writable, but the recursive flag seems to be ignored.  Ideas? The effect of a chef run is that it sets the images directory, but sets everything belowe it to root/root mode 755.
[2013-05-07 21:47:41 -0400] maplebed: https://gist.github.com/maplebed/5536423
[2013-05-07 21:51:14 -0400] silk: maplebed: http://tickets.opscode.com/browse/CHEF-205 && http://tickets.opscode.com/browse/CHEF-1621
[2013-05-07 21:51:24 -0400] maplebed: I was just reading 1621...
[2013-05-07 21:51:50 -0400] maplebed: here's the thing though - not only does it not set the subdirs the way I want, but if I change them manually. it changes them *back*.
[2013-05-07 21:52:16 -0400] maplebed: that seems to conflict 1621, at least, which (as I read it) says "we'll just ignore them.)
[2013-05-07 21:55:47 -0400] maplebed: hm.  actually, I think it's not the directory that's setting them, but ark, which is creating the surrounding dir in the first place.
[2013-05-07 21:56:01 -0400] maplebed: I'll change it around so the images live elsewhere (which is better anyways)
[2013-05-07 21:57:24 -0400] maplebed: tnx.
[2013-05-07 21:58:25 -0400] Flyte: hi chaps
[2013-05-07 21:59:26 -0400] Flyte: I'm using 10.14.4 and cookbook_file doesn't trigger a delayed notification - does anyone know if this was a bug that got fixed in later versions?
[2013-05-07 22:08:16 -0400] sunil: Hey guys, what version of json gem should be installed by chef-client 11.4 omnibus installer?  It seems to be installing 1.5.4 for me..
[2013-05-07 22:10:41 -0400] silk: its what my installs show also
[2013-05-07 22:15:11 -0400] monokrome: Hey. Does anyone in here know why running `chef-client -c client.rb -j first-boot.json` would create an empty client.pem file?
[2013-05-07 22:16:36 -0400] gigo1980: hi, does anyone an good get started guide for begin with chef / so creating an writing cookbooks so step by step, and at the end you have an complex system?
[2013-05-07 22:16:45 -0400] gigo1980: so no isolatated snippets
[2013-05-07 22:17:29 -0400] gigo1980: and any books that will be good to start ?
[2013-05-07 22:18:10 -0400] silk: www.learnchef.com
[2013-05-07 22:26:34 -0400] justizin: hm, so, i'm still scratching my head as to how knife ec2 seems to bootstrap a chef env, there is no chef in /opt, no chef-client in normal path locations, and it can't be installed as a gem because rubygems isn't even installed. O.o
[2013-05-07 22:27:52 -0400] justizin: just haven't used this before.. hm.. there's a quickstart on the wiki.
[2013-05-07 22:30:30 -0400] silk: Did you read through the bootstrap files?
[2013-05-07 22:30:39 -0400] doomviking: must be magic
[2013-05-07 22:32:50 -0400] spheromak: it should be using the omni client
[2013-05-07 22:33:13 -0400] spheromak: what platform are you bootstraping ?
[2013-05-07 22:38:36 -0400] justizin: spheromak: ubuntu
[2013-05-07 22:38:48 -0400] justizin: silk: no, i'm about to go there.. thought i might find docs ;d
[2013-05-07 22:39:04 -0400] justizin: silk: you mean the actual code in knife-ec2 that does the jazz, or something else, by 'bootstrap files' ?
[2013-05-07 22:39:41 -0400] silk: something else, but it has been a while since I bootstrapped an ec2 node. one second please.
[2013-05-07 22:41:38 -0400] justizin: np, thanks for your input silk

[2013-05-17 00:07:34 -0400] ignatz: opscode's server is choking on me pretty bad. bad gateway bad gateway.
[2013-05-17 00:21:55 -0400] eph3meral: coderanger: what's the recommended way to install override_attributes in to roles dynamically with knife?
[2013-05-17 00:22:01 -0400] eph3meral: can I do such a thing?
[2013-05-17 00:22:13 -0400] coderanger: 'dynamically'?
[2013-05-17 00:22:24 -0400] eph3meral: like knife role edit foo -n node['foo']['bar']['baz'] = 'blah'
[2013-05-17 00:22:31 -0400] eph3meral: as opposed to
[2013-05-17 00:22:39 -0400] eph3meral: like knife role edit foo -e vim
[2013-05-17 00:22:44 -0400] eph3meral: s/like //
[2013-05-17 00:23:30 -0400] eph3meral: I'm not sure if such a syntax exists, or what it should/could/would look like I was just guessing with that whole node[ bit
[2013-05-17 00:24:20 -0400] eph3meral: coderanger: ^
[2013-05-17 00:25:07 -0400] eph3meral: coderanger: I can edit the overrides by hand, that's fine works quite nicely both with vim and through the web UI, but can I automate that?
[2013-05-17 00:25:29 -0400] eph3meral: or can I create a role file in the same way I create recipe files?
[2013-05-17 00:25:34 -0400] eph3meral: and put the config settings in there?
[2013-05-17 00:25:43 -0400] eph3meral: er, actually I guess in this instance, it would be environments
[2013-05-17 00:25:57 -0400] eph3meral: I was unable to get the override vars to "work" when using them on the role
[2013-05-17 00:26:12 -0400] eph3meral: only seems to take effect if/and/or/when I put overrides on the environment
[2013-05-17 00:27:53 -0400] eph3meral: also, related/incidentally I read somewhere (don't remember where) that I have to specify the environment while/when uploading the recipes?
[2013-05-17 00:27:55 -0400] eph3meral: is that true?
[2013-05-17 00:53:07 -0400] wamilton: if we go with the supposition that someone being able to compromise your node to the point that they can knife whatever, what's the point of keeping the secret key for data bags in a file as opposed to just in a data bag?
[2013-05-17 01:10:30 -0400] eph3meral: hmm, so I removed my myorg-validator from clients accidentally
[2013-05-17 01:10:34 -0400] eph3meral: how do I get that back
[2013-05-17 01:10:44 -0400] eph3meral: also, now when I try to regen my key it says organization not found
[2013-05-17 01:12:35 -0400] eph3meral: coderanger: Organization not found. (Error 32033)
[2013-05-17 01:12:40 -0400] eph3meral: any idea what's up with thtat?
[2013-05-17 01:29:13 -0400] eph3meral: ok solved that
[2013-05-17 02:00:50 -0400] rem_: Hi I'm trying to install chef 11.0.8 on a CentOS 5.8 box.  The chef-server-ctl reconfigure is failing with Ran curl -sf http://127.0.0.1:8000/_status returned 7
[2013-05-17 02:08:19 -0400] kenke: Ah ha, its only work with IE?
[2013-05-17 02:09:11 -0400] kenke: Hi all, I'm a chef newbie, could someone tell me is it possible to store a file in chef server and then deploy the file to the chef client?
[2013-05-17 02:10:09 -0400] coderanger: kenke: yes, look up the cookbook_file resource
[2013-05-17 02:11:37 -0400] kenke: ??
[2013-05-17 02:11:57 -0400] rem_: When I do chef-server-ctl status it shows all services are ok and but using netstat shows that nothing is listening on port 8000.  ps shows that erchef is running and the erchef current log file is empty.
[2013-05-17 02:15:03 -0400] rem_: @kenke This should get you started... http://docs.opscode.com/resource_cookbook_file.html
[2013-05-17 02:15:43 -0400] kenke: coderanger, should I use file or remote_file and where should I put the original files in the cookbook?
[2013-05-17 02:15:55 -0400] coderanger: kenke: You should cookbook_file
[2013-05-17 02:16:02 -0400] coderanger: file and remote_file are for different things
[2013-05-17 02:16:34 -0400] coderanger: file is for either files you want to manage permissions but not content, or if the content is created from Ruby code, remote_file is for downloading from an HTTP server
[2013-05-17 02:17:24 -0400] coderanger: Files are stored under the files/ folder, usually files/default/ since most people don't use the file-specificity system
[2013-05-17 02:18:54 -0400] kenke: thanks both of you, I found what I want
[2013-05-17 02:36:28 -0400] |rt|: has anyone else run into a chef run not completing cleanly with the omnibus-updater cookbook when the attribute default[:omnibus_updater][:kill_chef_on_upgrade] = true which is the default
[2013-05-17 02:37:16 -0400] |rt|: overriding that to false lets the chef run complete without error
[2013-05-17 02:42:32 -0400] |rt|: perhaps that's the intended affect of that attribute....but it interferes with mini_test and any other report handlers
[2013-05-17 02:52:53 -0400] bearrito: So I'm trying to learn to write LWRP. I've looked at a few examples, running into an issue.  My provider throws NameError: uninitialized constant Chef::Resource::MyRecipeMyResource inside of load_current_resource. The resource exists. Could there be any issue but a namespace one?
[2013-05-17 02:54:43 -0400] knuckolls: bearrito: sometimes when dealing with scoping problems I use ::MyRecipeMyResource instead of MyRecipeMyResource.
[2013-05-17 02:54:59 -0400] knuckolls: i'm unsure if that'll help in this context, but it's worth sharing
[2013-05-17 02:58:54 -0400] bearrito: knuckolls: I'm not exactlly following. I'm doing the following @current_resource = Chef::Resource::MyRecipeMyResource.new(new_resource.name). What are you suggesting?
[2013-05-17 03:01:39 -0400] |rt|: bearrito: what's the actual line that's causing that error?
[2013-05-17 03:02:06 -0400] bearrito: that is it above
[2013-05-17 03:02:53 -0400] |rt|: have you tried '@current_resource = new_resource.name'
[2013-05-17 03:03:29 -0400] bearrito: |rt| : I haven't. I'll give it a shot.
[2013-05-17 03:05:53 -0400] |rt|: you can think of the new_resource being like the "self" reference for a lwrp
[2013-05-17 03:07:59 -0400] |rt|: bearrito: any luck?
[2013-05-17 03:08:25 -0400] bearrito: |rt| No joy. I would still think I would need to new up the @current_resource. ( I only know just enough ruby for chef, so bear with me)
[2013-05-17 03:08:48 -0400] |rt|: why do you need @current_resource?
[2013-05-17 03:09:36 -0400] |rt|: <-- not a ruby programmer myself....but couldn't you just user new_resource.name anywhere in your code that you would be trying to user @current_resources
[2013-05-17 03:11:26 -0400] bearrito: |rt| No real reason that I know of. Most of the documentation/examples shows this usage. For instance https://github.com/opscode-cookbooks/samba/blob/master/providers/user.rb
[2013-05-17 03:16:42 -0400] |rt|: bearrito: yeah I'm having a hard time finding where the load_current_resource is getting called
[2013-05-17 03:19:11 -0400] |rt|: http://dougireton.com/blog/2013/01/07/creating-an-lwrp-part-2/ talks about that method
[2013-05-17 04:06:09 -0400] kenke: hi all, is it possible to control the execute order of recipes included in a role?
[2013-05-17 04:12:07 -0400] knuckolls: kenke: recipes will be run in the order they appear in the run_list
[2013-05-17 04:12:25 -0400] knuckolls: if you have a run list that's comprised of roles that contain the same recipe, it'll be run once the first time it's encountered
[2013-05-17 04:13:00 -0400] BryanWB_: yo chefs, is there a foodcritic rule or something automated out there that can check for chef 11 incompatibility in a recipe? specifically `node['foo'] = 'bar'`
[2013-05-17 04:16:32 -0400] knuckolls: BryanWB_: something like this? `ack "^node\[.*=.*$"`
[2013-05-17 04:16:56 -0400] knuckolls: not ruby, but gets the job done
[2013-05-17 04:27:03 -0400] BryanWB_: knuckolls: guess i will just have to do that :)
[2013-05-17 04:27:37 -0400] BryanWB_: knuckolls: been meaning to do that anyways
[2013-05-17 04:41:58 -0400] corehook: re
[2013-05-17 04:51:16 -0400] BryanWB_: knuckolls: k this seems to get the job done, tks    `ack "node\[.*\]\ ?(=|<<)[^=~].*$" . `
[2013-05-17 05:23:14 -0400] knuckolls: BryanWB_: ah look at all those edge cases.
[2013-05-17 05:23:30 -0400] knuckolls: good work. :)
[2013-05-17 05:23:38 -0400] BryanWB_: knuckolls: tks for introducting me to ack, nice tool
[2013-05-17 05:23:54 -0400] knuckolls: oh man
[2013-05-17 05:24:04 -0400] knuckolls: glad to have done that
[2013-05-17 05:24:14 -0400] knuckolls: i use ack every day now.
[2013-05-17 05:25:02 -0400] knuckolls: i've started just cloning the github repos for everything i use and acking before i google oftentimes
[2013-05-17 06:40:41 -0400] eph3meral: hmm, bummer, I was going to try using application_ruby but librarian says it's not found
[2013-05-17 06:40:55 -0400] stevenator: Can anyone give me advice on access the node object from a library file? I am running chef-solo and looking for something like Chef::Node[:foo]
[2013-05-17 06:46:03 -0400] stevenator: nvm found it in the docs
[2013-05-17 06:55:21 -0400] jameson1: test-kitchen 1.0 was released?
[2013-05-17 06:55:24 -0400] jameson1: or not..?
[2013-05-17 07:01:42 -0400] eph3meral: anyone have any idea why this might be happening "FATAL: NameError: No resource found for rails. Tried application_rails, rails" when trying to use the "application" cookbook along with application_ruby
[2013-05-17 08:35:36 -0400] shay-: hi i am trying to migrate to chef11, where can i find the bootstrap file for centos6?
[2013-05-17 08:40:07 -0400] odyssey4me: How does one change the order in which ohai loads its plugins? I'm trying to use https://gist.github.com/turtlebender/2050259 as a basis to override the automatic node's ipaddress attribute and it keeps croaking because it doesn't have the network attributes populated yet.
[2013-05-17 08:50:50 -0400] odyssey4me: Never mind - figured it out. :)
[2013-05-17 08:54:38 -0400] shay-: hi i am trying to migrate to chef11, where can i find the bootstrap file for centos6?
[2013-05-17 09:01:30 -0400] jameson1: shay-: http://www.opscode.com/chef/install/ ?
[2013-05-17 09:01:47 -0400] jameson1: for client anyways
[2013-05-17 09:02:02 -0400] jameson1: I just upgraded my client from 10.12 to 11.???
[2013-05-17 09:02:55 -0400] jameson1: also it says to push it just to bash..? I did "| sudo bash"
[2013-05-17 09:03:00 -0400] jameson1: I also have no idea what I am doing in CentOS
[2013-05-17 09:28:03 -0400] laurent\: chefconf videos are amazing !
[2013-05-17 09:28:29 -0400] laurent\: I feel really sad to be a lonely wolf chef here in france
[2013-05-17 09:28:45 -0400] shredder12: hi everyone. I've successfully installed chef-server on AWS Linux AMI. But I'm having trouble uploading cookbook. When I issue the upload command, "knife cookbook upload", I get the following error.
[2013-05-17 09:28:47 -0400] shredder12: http://pastebin.com/NEse5A40
[2013-05-17 09:28:55 -0400] shredder12: Any suggestion?
[2013-05-17 09:29:08 -0400] eph3meral: has anyone had much success with the deploy task? I can't seem to understand how to redploy
[2013-05-17 09:29:45 -0400] eph3meral: or rather, if I run chef-client a fter uploading the modded cookbook if something goes wrong during bootstrap
[2013-05-17 09:29:58 -0400] eph3meral: it doesn't seem to rerun some important commands
[2013-05-17 09:30:01 -0400] laurent\: you're getting a 403 Forbidden from a tomcat server ?
[2013-05-17 09:30:29 -0400] laurent\: is that the expected behavior ?
[2013-05-17 09:30:54 -0400] laurent\: i'm sure it's not, but are you supposed to talk to a tomcat server ?
[2013-05-17 09:35:21 -0400] jameson1: shredder12: I think your keys on the workstation is bad/wrong
[2013-05-17 09:35:34 -0400] jameson1: or on the server.
[2013-05-17 09:36:17 -0400] shay-: what can i do if chef-validator key is invalid after migration to chef 11?
[2013-05-17 09:38:36 -0400] shredder12: jameson1: I don't think so. "knife node list" returns a successfully bootstrapped node.
[2013-05-17 09:40:42 -0400] jameson1: shay-: I think you have to regenerate it for that client (e.g. it needs to be removed and then re-added), if you are running your own chef-server you have to create a chef 11 server and then switch following : http://www.opscode.com/blog/2013/03/12/5106/
[2013-05-17 09:41:39 -0400] jameson1: shredder12: are you hosted chef or private chef?
[2013-05-17 09:42:54 -0400] shay-: jameson1: i followed this instructions, but it seems to be a problem with tihs chef-validaotr, can i also delete this ?
[2013-05-17 09:43:13 -0400] shay-: jameson1: validator.pem is same like in chef1
[2013-05-17 09:43:14 -0400] shay-: 10
[2013-05-17 09:44:16 -0400] shredder12: jameson1: Private. Installed opensource chef-server on an AWS(Amazon Linux AMI)
[2013-05-17 09:44:57 -0400] jameson1: shay-: you set the validator to true?
[2013-05-17 09:45:06 -0400] jameson1: otherwise chef11 doesn't know that is the validator
[2013-05-17 09:46:20 -0400] jameson1: shredder12: the 403 is only when the .pem don't match
[2013-05-17 09:46:56 -0400] jameson1: shredder12: can you chef-client from the registered node/client ?
[2013-05-17 09:47:03 -0400] shredder12: jameson1: the how does knife bootstrap and node work?
[2013-05-17 09:47:06 -0400] shredder12: jameson1: checking...
[2013-05-17 09:47:12 -0400] jameson1: wait this is your
[2013-05-17 09:47:12 -0400] shay-: jameson1: i set thevalidator client in knife.rb
[2013-05-17 09:47:15 -0400] jameson1: workstation
[2013-05-17 09:49:02 -0400] shredder12: jameson1: same error. permission denied
[2013-05-17 09:50:21 -0400] jameson1: shay-: I was under the impression that chef-validator (even set in knife.rb) was required to be set on the server to be the "validator"
[2013-05-17 09:50:44 -0400] jameson1: shredder12: you can or can't do knife node list ?
[2013-05-17 09:51:17 -0400] shredder12: from the server, knife node list returns correct result.
[2013-05-17 09:51:22 -0400] shredder12: jameson1: ^
[2013-05-17 09:51:34 -0400] jameson1: but from you workstation it does not ?
[2013-05-17 09:51:39 -0400] shredder12: jameson1: but when I ran 'chef-client' from the bootstrapped node, it returned permission denied.
[2013-05-17 09:51:54 -0400] shredder12: workstation is chef-server for now. I was just testing it
[2013-05-17 09:52:32 -0400] jameson1: on the bootstrapped node
[2013-05-17 09:52:51 -0400] jameson1: does it have the /etc/chef/client.pem ?
[2013-05-17 09:54:43 -0400] shredder12: jameson1: yes
[2013-05-17 09:55:13 -0400] jameson1: so if the bootstrapped node can't chef-client, and your workstation can't knife cookbook upload
[2013-05-17 09:55:25 -0400] jameson1: the pems files are wrong on the clients
[2013-05-17 09:55:34 -0400] jameson1: or the one on the server has changed.
[2013-05-17 09:55:46 -0400] jameson1: not sure how or why, but that should be the only reason you get the 403s
[2013-05-17 09:56:00 -0400] jameson1: last time I ran into that on my workstation, I just got a new client.pem from the server.
[2013-05-17 09:56:15 -0400] shredder12: jameson1: i'll give it a try and get back to  you
[2013-05-17 09:57:01 -0400] jameson1: gl, :3 I'm off to sleep. the real gurus in the room might be able to help more when they wake up
[2013-05-17 09:57:53 -0400] shay-: how to create a new validation.pem?
[2013-05-17 10:00:44 -0400] shay-: jameson1: how to disable this validator?
[2013-05-17 10:00:59 -0400] jameson1: shay-: you have to copy over the one from the chef10 server, or in /etc/chef-server/
[2013-05-17 10:01:02 -0400] jameson1: on your server
[2013-05-17 10:01:21 -0400] jameson1: shay-: I think you have to have the validator :3
[2013-05-17 10:01:57 -0400] jameson1: oh wow 3am.
[2013-05-17 10:02:22 -0400] jameson1: real opscode people might be on in a few hours they should be able to help you better
[2013-05-17 10:17:30 -0400] serialsito: Hi
[2013-05-17 10:18:25 -0400] serialsito: Im trying to run chef-client with root user in a server but it freeze, the freeze line in debug mode is "[Fri, 17 May 2013 10:15:43 +0000] DEBUG: Loading plugin linux::filesystem"
[2013-05-17 10:18:59 -0400] serialsito: someone know this problem?
[2013-05-17 11:00:15 -0400] ermajn: hello, is it possible to get installed version of package installed by action :install
[2013-05-17 11:14:15 -0400] ShawnMcCool: a bit of a silly question, but I'm using chef-solo on many projects and i'm curious what an appropriate way to cache the dependencies that it installs might be, bringing up new machines takes quite a while
[2013-05-17 11:31:18 -0400] shay-: is there a good documentation about all the certificates chef is using in v11? I have real troubles with that after migrating and I need some help understanding that
[2013-05-17 11:31:38 -0400] corehook: guys
[2013-05-17 11:31:39 -0400] corehook: [17:31]dev@test:~$ chef-client -v
[2013-05-17 11:31:40 -0400] corehook: /opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find chef (>= 0) amongst
[2013-05-17 11:31:42 -0400] corehook: why ?
[2013-05-17 12:05:59 -0400] countdigi: run: which chef-client
[2013-05-17 12:06:09 -0400] countdigi: might be rvm getting in the way
[2013-05-17 12:07:27 -0400] countdigi: corehook: ^^
[2013-05-17 12:15:36 -0400] corehook: ^^
[2013-05-17 12:15:36 -0400] corehook: done
[2013-05-17 12:15:37 -0400] corehook: thx
[2013-05-17 12:16:37 -0400] countdigi: ur welcome - rvm - great when u know u are using it, confusing as heck when u don't :-)
[2013-05-17 12:17:56 -0400] maruq: countdigi: that basically sums up my day
[2013-05-17 12:18:34 -0400] maruq: trying to get test-kitchen + kitchen-vagrant setup to recover an old chef repo & see if things still work
[2013-05-17 12:19:03 -0400] maruq: home-brew / rvm / nokogiri / bundler = fun times!
[2013-05-17 12:19:19 -0400] countdigi: heh
[2013-05-17 12:19:32 -0400] maruq: sometimes it's just easier to rm -rf / ;)
[2013-05-17 12:21:39 -0400] maruq: Is there any way of telling where test-kitchen (pre)'s messages come from?
[2013-05-17 12:22:13 -0400] maruq: I've got a "Message: can't convert nil into String", coming from "/Users/markbate/.rvm/gems/ruby-1.9.3-p194/gems/test-kitchen-1.0.0.alpha.6/lib/kitchen/instance.rb:273:in `action'"
[2013-05-17 12:22:53 -0400] maruq: the backtrace looks to be from test-kitchen itself
[2013-05-17 12:23:14 -0400] maruq: I've got an empty run list & attributes, just trying to see how it works
[2013-05-17 12:27:32 -0400] countdigi: wanna gist the whole statcktrace? i'll take a look but never used test kitchen - if u are used to looking at stack traces and don't see obvious problem I'm probably I'm not going to help though :-)
[2013-05-17 12:27:54 -0400] countdigi: planning on trying it out soon though - looks like its really coming together
[2013-05-17 12:30:28 -0400] maruq: countdigi: https://gist.github.com/markbate/349580b80bdd4656dec8
[2013-05-17 12:31:03 -0400] maruq: yeah, I'm usually okay with the stack traces, but don't know test-kitchen much
[2013-05-17 12:31:10 -0400] maruq: other than reading the odd blog post
[2013-05-17 12:31:17 -0400] corehook: http://dpaste.org/avwFF/
[2013-05-17 12:31:21 -0400] corehook: look!!!
[2013-05-17 12:31:22 -0400] corehook: wtf ? :)
[2013-05-17 12:32:06 -0400] maruq: I'm roughly trying to follow jtimberman's blog posts
[2013-05-17 12:32:36 -0400] maruq: corehook: permissions try running as root?
[2013-05-17 12:32:43 -0400] corehook: from root normally
[2013-05-17 12:32:59 -0400] corehook: mb add rights to write to /var/chef/* ?
[2013-05-17 12:33:33 -0400] maruq: corehook: well, you may not have permission to do half the operations in your chef run if you're not sudo
[2013-05-17 12:38:06 -0400] countdigi: maruq: yeah nothing sticks out at me - i don't see any option for more extended debugging but not familiar as i said w/ test kitchen
[2013-05-17 12:39:36 -0400] maruq: countdigi: yeah, I was kind of at the same point. thanks for looking though
[2013-05-17 12:39:42 -0400] countdigi: np
[2013-05-17 12:45:05 -0400] s2r2: hmm I hear pretty little about partial_search on the interwebs although it seems to be rather nice... any reasons for that?
[2013-05-17 12:48:07 -0400] corehook: ERROR: Connection refused connecting to chef.om:4000 for /nodes/test, retry 2/5
[2013-05-17 12:48:09 -0400] corehook: :(
[2013-05-17 12:53:16 -0400] corehook: how to configure chif-client ?
[2013-05-17 12:53:20 -0400] corehook: pls give me link
[2013-05-17 12:54:22 -0400] countdigi: corehook: what version of chef server are u using and is it hosted? its probably /etc/chef/client.rb and your chef_url is not set correctly if i had to guess
[2013-05-17 12:56:57 -0400] corehook: [18:56]dev@test:/etc/chef$ cat client.rb|grep url
[2013-05-17 12:56:57 -0400] corehook: chef_server_url  'https://chef.om:4000'
[2013-05-17 12:56:57 -0400] corehook: [18:56]dev@test:/etc/chef$ chef-client -v
[2013-05-17 12:56:57 -0400] corehook: Chef: 11.4.4
[2013-05-17 12:56:57 -0400] corehook: [18:56]dev@test:/etc/chef$
[2013-05-17 12:57:07 -0400] corehook: where i can get client.pem ?
[2013-05-17 12:57:50 -0400] countdigi: where is the server running? the error is before the client.pem stage - try taking off :4000
[2013-05-17 12:58:09 -0400] countdigi: chef 11 server listens on port 443 by default (which is https://chef.om)
[2013-05-17 12:59:41 -0400] countdigi: u might have other problems after that :-) but thats the first one ;-)
[2013-05-17 13:21:56 -0400] maruq: I seem to be getting a vagrant issue with berkshelf (another project) conflicting with librarian (this project). https://gist.github.com/markbate/fe1339b9ab5bbffb2548 any ideas?
[2013-05-17 13:24:29 -0400] ivey: maruq: berkshelf is loading knife.rb which i am guessing loads librarian
[2013-05-17 13:24:34 -0400] ivey: do you have librarian installed?
[2013-05-17 13:24:52 -0400] maruq: ivey: yeah, I have librarian, need it for this project
[2013-05-17 13:25:00 -0400] maruq: don't necessarily need berkshelf
[2013-05-17 13:25:12 -0400] maruq: I'd prefer berkshelf, but it's a shared project
[2013-05-17 13:28:34 -0400] maruq: is there an easy way to remove berkshelf for now?
[2013-05-17 13:28:45 -0400] ivey: don't have a Berksfile
[2013-05-17 13:29:17 -0400] maruq: um, there is no Berksfile in this project
[2013-05-17 13:29:43 -0400] ivey: what version of vagrant-berkshelf do you have?
[2013-05-17 13:30:28 -0400] ivey: it shouldn't do anything if there's no Berksfile. could also set config.berkshelf.enabled = false in Vagrantfile
[2013-05-17 13:31:33 -0400] maruq: according to `gem list`, I don't have vagrant-berkshelf in this gemset
[2013-05-17 13:31:45 -0400] ivey: vagrant plugin list
[2013-05-17 13:32:01 -0400] ivey: vagrant-berkshelf doesn't go in Gemfile, it's a vagrant plugin
[2013-05-17 13:32:15 -0400] maruq: vagrant-berkshelf 1.2.0
[2013-05-17 13:32:54 -0400] AlainODea: I'm having a strange issue with knife-windows.  It can't download the chef installer.  It is trying https://www.opscode.com/chef/download?p=windows&pv=2008r2&m=i686, but that URL does not appear to be valid.  Has anyone experienced this?  Is there a known workaround?
[2013-05-17 13:33:29 -0400] ivey: maruq: try setting config.berkshelf.enabled = false
[2013-05-17 13:34:08 -0400] maruq: ivey: nope, still the same error
[2013-05-17 13:34:52 -0400] ivey: maruq: does knife.rb have a require librarian?
[2013-05-17 13:35:10 -0400] maruq: yup
[2013-05-17 13:35:25 -0400] ivey: try: vagrant plugin install librarian-chef
[2013-05-17 13:36:01 -0400] ivey: what's happening is vagrant-berkshelf is running in Vagrant's embedded ruby, and then is trying to read knife.rb, and then tries to load librarian, which isn't installed in Vagrant's embedded ruby
[2013-05-17 13:36:14 -0400] ivey: even though librarian isn't a vagrant plugin, you can install it
[2013-05-17 13:36:39 -0400] maruq: okay, cool
[2013-05-17 13:41:09 -0400] epocsquadron: ive switched to using berkshelf for my cookbook development and i love it so far, however i'm looking for a way to easily generate and distribute a cookbooks.tar.gz and accompanying set of roles to the other devs on my team (without installing rbenv, berkshelf, chef etc on their machines)
[2013-05-17 13:41:36 -0400] epocsquadron: anyone know of a good workflow for that, or am i stuck scripting myself a solution?
[2013-05-17 13:41:43 -0400] ivey: epocsquadron: `berks package` in master / 2.0.0 when it comes out, will do that for the cookbooks at least
[2013-05-17 13:42:26 -0400] kzim_: Hello, when you want to configure a Cluster, let's say mongo, the best practice would be to store the whole cluster config in a attribute of DB or to split every piece on each node ? thx
[2013-05-17 13:42:49 -0400] epocsquadron: ivey: thanks, ill look into that
[2013-05-17 13:46:25 -0400] adnichols: kzim_ I personally try to avoid having many attributes set on an individual node - prefer to have them in roles or environment attributes, but it definitely depends on your use case. No idea what kinds of cluster configs you are talking about
[2013-05-17 13:48:08 -0400] kzim_: adnichols, i have my cluster config in a data bag and it can get huge. i have all members with specific config like paths, ports etc ...
[2013-05-17 13:48:37 -0400] kzim_: the thing is i want use an orchestrator so if i want a new cluster i have to create the whole databag, it's kind of ugly
[2013-05-17 13:49:05 -0400] adnichols: yeah, moving some of that into a role/environment would reduce duplication maybe
[2013-05-17 13:49:21 -0400] adnichols: or multiple data bags
[2013-05-17 13:54:52 -0400] epocsquadron: vagrant users: is there a way to package up roles into a tarball and do something similar to recipe_url for cookbooks? The goal is to distribute a single vagrantfile to the team and have everything just work
[2013-05-17 13:55:17 -0400] kzim_: adnichols, perhaps yes thanks
[2013-05-17 13:55:34 -0400] kzim_: Anyone use SaltStack with Chef ?
[2013-05-17 14:15:21 -0400] AlainODea: Found it.  The %MACHINE_ARCH% is incorrectly set to i686.  It should be x86_64.  I should have a pull request later today with the fix :)
[2013-05-17 14:16:37 -0400] tjarvstrand: Hi all! Quick question: Is there a nice way to see if an input argument to a resource refers to the current node? Right now I'm using: if new_resource.name == node.fqdn or new_resource.name == node.ipaddress or new_resource.name == "127.0.0.1" or new_resource.name == "0.0.0.0"
[2013-05-17 14:16:49 -0400] tjarvstrand: but that feels pretty ugly to say the least
[2013-05-17 14:21:06 -0400] MartinCleaver: I found cucumber-chef, and its IRC channel, but there are very few people in it so I'm wondering how mainstream it is. What do you guys use for behaviour testing of your chef instances?
[2013-05-17 14:22:29 -0400] MartinCleaver: as described in http://www.cucumber-chef.org
[2013-05-17 14:30:21 -0400] gkarekinian: I'm playing with test-kitchen 1.0 (formerly jamie) right now and I'm loving it so far
[2013-05-17 14:46:15 -0400] paigeat: https://www.youtube.com/watch?v=4UzHnoSc8D0
[2013-05-17 15:07:45 -0400] epta: Is there some instrument to verify that there is no unused variables in recipe?
[2013-05-17 15:09:03 -0400] nicgrayson: Is there a way to intergrate guard with strainer? I can't use guard with berkshelf without something to make the cookbooks temp dir
[2013-05-17 15:19:24 -0400] bdemers: Can anyone think of a case that the mini-chef-handler is NOT enabled as a report handler ?
[2013-05-17 15:22:08 -0400] bdemers: my run list starts with: minitest-handler
[2013-05-17 15:26:07 -0400] jasonsmr: Allright, Question; what exactly is HA?
[2013-05-17 15:26:14 -0400] jasonsmr: I have a great example of code that I know is a HA cluster. however I also have a simmilur method of installation for a basic LAMP server that is not!
[2013-05-17 15:26:32 -0400] jasonsmr: correction , the installation method is exactly the same.
[2013-05-17 15:26:45 -0400] jasonsmr: Im using chef solo, but what is it that make the clustered HA version, well a true cluster, capable of working with other nodes simutaniously, working together and helping eachother when one is too ^^ busy(failover)?
[2013-05-17 15:27:10 -0400] mattray: jasonsmr: HA is in the eye of the beholder :)
[2013-05-17 15:27:19 -0400] jasonsmr: I really could use a point of view from someone whos worked with chef solo before..
[2013-05-17 15:27:28 -0400] jasonsmr: comparitivley, the single server install of my chef lamp server is very nice, it just doesnot allow for failover... just gets my creative juces flowing.
[2013-05-17 15:27:31 -0400] mattray: clusters and pairs are small-scale examples
[2013-05-17 15:28:02 -0400] sparr: jasonsmr: what does chef-solo have to do with a HA cluster?
[2013-05-17 15:28:36 -0400] jasonsmr: yes, like with failover for a pair..
[2013-05-17 15:29:22 -0400] jasonsmr: well I was thinking of what this AP that I worked with does with couchDB, but I wanted it for a much simpler apache server senerio , for a wordpress blogg ;P
[2013-05-17 15:30:21 -0400] jasonsmr: I just wanted to create a recipe mod rom this one>> http://gettingstartedwithchef.com/
[2013-05-17 15:30:40 -0400] jasonsmr: thats the best example of how to use chef solo^^ that I have come across
[2013-05-17 15:30:51 -0400] jasonsmr: sp/rom/from
[2013-05-17 15:31:22 -0400] makerbrakr: is anyone form opscode here?
[2013-05-17 15:31:44 -0400] cowsay: hi! i'm trying to run a test with minitest-handler - I've put my default_test.rb inside files/default/test/ and I have minitest-handler at the end of my run list - minitest-handler is running but not finding the test
[2013-05-17 15:32:02 -0400] makerbrakr: sascha_d, I just randomly followed you on twitter
[2013-05-17 15:32:03 -0400] makerbrakr: hah
[2013-05-17 15:37:27 -0400] jtimberman: makerbrakr: several people from opscode are here.
[2013-05-17 15:37:33 -0400] jtimberman: whether they're going to pipe up is another matter ;)
[2013-05-17 15:37:49 -0400] makerbrakr: do you mind if I PM you jtimberman?
[2013-05-17 15:38:16 -0400] jtimberman: makerbrakr: sure...
[2013-05-17 15:45:42 -0400] cowsay: jtimberman: can you help with minitest question above?
[2013-05-17 15:46:22 -0400] gchristensen: cowsay: where are you saving your test file? what is the full path, relative to your recipes?
[2013-05-17 15:49:31 -0400] cowsay: gchristensen - it's in ./files/default/test/default_test.rb relative to the cookbook root
[2013-05-17 15:49:34 -0400] jtimberman: cowsay: what version of the minitest handler cookbook do you have?
[2013-05-17 15:49:49 -0400] jtimberman: newer version use files/default/test, older version uses files/default/tests/minitest/
[2013-05-17 15:49:56 -0400] cowsay: 0.2.1
[2013-05-17 15:51:05 -0400] jasonsmr: anyone familure with HAProxy, can anwser this; what if*: doccumentation says that loadbalancing nodes have the same fqdn, what if they don't what if they have a CNAME with a pointer to two diffrent fqdn's? will it still work or is there an alternitive apache dns mechanic that Im going to mess up doing this?
[2013-05-17 15:59:17 -0400] knuckolls: jasonsmr: i'm intimately familiar with haproxy but i'm not following what you're suggesting. the haproxy backend can be set up to send traffic out to multiple downstream servers, either via dns or ip. within the backend you set the load balancing method: round robin, leastconn, etc. if you pass to a backend via dns instead of ip, whatever happens beyond haproxy is up to how dns responds.
[2013-05-17 16:34:34 -0400] adamjk-dev: am I missing something on the minitest directories? http://pastebin.com/NWxKhiDB
[2013-05-17 16:34:47 -0400] adamjk-dev: jtimberman: I saw your comment, but my test is not running yet
[2013-05-17 16:34:54 -0400] queso: I have chef-client runs failing seemingly randomly with 403 Forbidden errors (FATAL: Net::HTTPServerException) when creating files from cookbook templates. I say random because sometimes it works, sometimes it fails, and on different template calls.
[2013-05-17 16:35:34 -0400] spox: queso: are you running your own erchef instance?
[2013-05-17 16:35:40 -0400] queso: spox: Yes
[2013-05-17 16:35:47 -0400] spox: then i have the fix for you!
[2013-05-17 16:35:48 -0400] spox: :D
[2013-05-17 16:35:53 -0400] queso: spox: Awesome!
[2013-05-17 16:36:05 -0400] spox: in the /etc/chef-server/chef-server.rb file
[2013-05-17 16:36:06 -0400] spox: add:
[2013-05-17 16:36:20 -0400] spox: erchef['s3_url_ttl'] = 3600
[2013-05-17 16:36:29 -0400] spox: default is 15 minutes, so runs longer will hit errors
[2013-05-17 16:36:34 -0400] spox: that bumps it to an hour
[2013-05-17 16:36:42 -0400] spox: after you add that, chef-server-ctl reconfigure
[2013-05-17 16:37:26 -0400] queso: spox: Oh, that could be it -- this particular recipe does a ton of stuff.
[2013-05-17 16:37:33 -0400] queso: (takes a long time, I mean)
[2013-05-17 16:38:53 -0400] queso: spox: I don't have a /etc/chef-server/chef-server.rb file on my server, could it have another name?
[2013-05-17 16:39:28 -0400] spox: did you bootstrap it with the chef-server cookbook?
[2013-05-17 16:39:37 -0400] queso: spox: I used the RPM
[2013-05-17 16:39:54 -0400] spox: okay, chef-server cookbook might be what drops it off then
[2013-05-17 16:40:01 -0400] spox: just throw it in
[2013-05-17 16:40:09 -0400] queso: cool, thanks!
[2013-05-17 16:43:34 -0400] queso: I am going to test to make sure this is what it is. If so, I might file a bug, because a more useful error message would be helpful.
[2013-05-17 16:43:48 -0400] adamjk-dev: anyone have any suggestions as to why my minitest is not running?
[2013-05-17 16:43:52 -0400] adamjk-dev: I have a cookbook
[2013-05-17 16:43:56 -0400] adamjk-dev: and a test cookbook inside of it
[2013-05-17 16:44:05 -0400] adamjk-dev: http://pastebin.com/NWxKhiDB
[2013-05-17 16:48:13 -0400] stormerider: spox, queso: i believe that you dont get the chef-server.rb by default in some install methods but it is valid for customizing the config
[2013-05-17 16:48:55 -0400] spox: +1
[2013-05-17 16:51:01 -0400] queso: spox: http://tickets.opscode.com/browse/CHEF-3045  Looks like we're not the first to hit this.
[2013-05-17 16:51:37 -0400] spox: guess i'll throw the fix bit in there for reference
[2013-05-17 16:51:40 -0400] spox: queso: thanks for the link :)
[2013-05-17 16:52:34 -0400] queso: spox: Oh, my bet is the chef client authenticates and has permission to make requests to the server for the default first 5 minutes and assumes it gets everything it needs for the entire run.  Hence the permission error.
[2013-05-17 16:52:39 -0400] queso: spox: np, thank you.
[2013-05-17 17:10:03 -0400] MartinCleaver: gkarekinian: thanks - documentation for Test-Kitchen seems to be non-existent - any pointers?
[2013-05-17 17:19:48 -0400] queso: spox: No errors this run. That was definitely it. Thanks again.
[2013-05-17 17:19:57 -0400] spox: queso: sure :)
[2013-05-17 17:34:38 -0400] teukka: MartinCleaver: http://jtimberman.housepub.org/blog/2013/03/19/anatomy-of-a-test-kitchen-1-dot-0-cookbook-part-1/ (and part 2)
[2013-05-17 17:34:51 -0400] MartinCleaver: Thanks teukka
[2013-05-17 17:35:30 -0400] teukka: MartinCleaver: then examples can be found on some opscode cookbooks
[2013-05-17 17:36:05 -0400] MartinCleaver: I guess with Opscode behind them, its going to win over cucumber-chef (?)
[2013-05-17 17:37:08 -0400] knuckolls: MartinCleaver: there's a ton of momentum behind test-kitchen
[2013-05-17 17:39:25 -0400] mattray: MartinCleaver: test-kitchen can run cucumber-chef I believe
[2013-05-17 17:40:13 -0400] MartinCleaver: ok, now I am confused as to whether they (test-kitchen and cucumber-chef) overlap in scope
[2013-05-17 17:40:34 -0400] miah: the old test-kitchen did, i dont know about the new
[2013-05-17 17:41:17 -0400] miah: chef-workflow overlaps with cucumber-chef more
[2013-05-17 17:43:31 -0400] MartinCleaver: ok
[2013-05-17 17:43:43 -0400] MartinCleaver: cucumber-chef - can this be run without the use of AWS?
[2013-05-17 17:44:01 -0400] miah: good question. i dont know if Cope ever changed that
[2013-05-17 17:57:42 -0400] adamjk-dev: anyone have suggestions as to why minitest-handler would not be finding my tests?
[2013-05-17 17:57:45 -0400] adamjk-dev: I made use of
[2013-05-17 17:57:59 -0400] adamjk-dev: berks cookbook foo_test --chef-minitest
[2013-05-17 17:58:03 -0400] adamjk-dev: to create the skeleton cookbook
[2013-05-17 17:58:24 -0400] adamjk-dev: changed a Vagrantfile to make use of foo_test (which just wraps the recipes in foo)
[2013-05-17 17:58:48 -0400] ldk: I want to subclass or monkeypatch Chef::Provider::Service::Systemd in my cookbook... where should I put this code?
[2013-05-17 18:00:39 -0400] knuckolls: ldk, in a library perhaps
[2013-05-17 18:00:53 -0400] ldk: knuckolls: is providers/ appropriate?
[2013-05-17 18:00:55 -0400] ldk: It does work
[2013-05-17 18:15:57 -0400] timsmith: anyone know of a good example of a library that searches nodes and returns data
[2013-05-17 18:15:59 -0400] timsmith: ?
[2013-05-17 18:17:31 -0400] knuckolls: timsmith: https://github.com/lusis/chef-logstash/blob/master/recipes/server.rb
[2013-05-17 18:19:00 -0400] timsmith: thanks
[2013-05-17 18:20:21 -0400] timsmith: knuckolls:  I was hoping for something that did search within a library.  Something is way off in my syntax.  I have the recipe search down
[2013-05-17 18:21:06 -0400] miah: timsmith: gist your code?
[2013-05-17 18:21:21 -0400] knuckolls: ah
[2013-05-17 18:21:41 -0400] miah: ive done lots of stuff in libraries at this point =)
[2013-05-17 18:22:16 -0400] timsmith: library land is all new to me
[2013-05-17 18:22:30 -0400] timsmith: let me toss it up
[2013-05-17 18:23:01 -0400] gleam: this one does search in libraries/failover.rb: https://github.com/spheromak/dhcp-cook
[2013-05-17 18:23:14 -0400] adamjk-dev: anyone have suggestions as to why minitest-handler would not be finding my tests?
[2013-05-17 18:29:59 -0400] adamjk-dev: the minitest directory on the VM being provisioned is empty
[2013-05-17 18:30:02 -0400] adamjk-dev: for some reason
[2013-05-17 18:30:12 -0400] cwj: adamjk-dev: your tests are located in the cookbook under files/default/tests/minitest and are named recipe_test.rb ?
[2013-05-17 18:30:21 -0400] timsmith: based on that dhcp cookbook you can do a search in a library by just using search(whatever) vs. chef/search/query
[2013-05-17 18:30:24 -0400] cwj: $RECIPENAME_test.rb rather
[2013-05-17 18:30:47 -0400] adamjk-dev: ll test/cookbooks/rundeck_test/files/default/tests/minitest/
[2013-05-17 18:31:08 -0400] adamjk-dev: cwj: I only have a default_test.rb right now
[2013-05-17 18:31:47 -0400] adamjk-dev: cwj: my Vagrantfile adds the minitest-handler recipe, as well as the rundeck_test::<recipes>
[2013-05-17 18:32:07 -0400] adamjk-dev: but my Vagrantfile does not add (explicitly) the rundeck_test::default recipe
[2013-05-17 18:32:36 -0400] cwj: are your other recipes are doing include_recipe 'rundeck_test::default' ?
[2013-05-17 18:32:55 -0400] adamjk-dev: cwj: they are including rundeck::default
[2013-05-17 18:33:55 -0400] cwj: adamjk-dev: try having them include rundeck_test::default, even if that is just a blank recipe
[2013-05-17 18:34:08 -0400] adamjk-dev: cwj: do only tests exiplicitly called out in the run list get added?
[2013-05-17 18:34:41 -0400] adamjk-dev: cwj: I added a new test (to match a recipe on the run list) to see if that works
[2013-05-17 18:35:03 -0400] cwj: i think that is the case, i cant locate the relevant lines of code off hand
[2013-05-17 18:35:27 -0400] adamjk-dev: cwj: perhaps, I guess that would make sense, and I should see in a minute or two
[2013-05-17 18:36:13 -0400] KarlHungus: which rundeck cookbook is that?
[2013-05-17 18:36:23 -0400] KarlHungus: is there a community rundeck book?
[2013-05-17 18:36:30 -0400] KarlHungus: s/book/cookbook/?
[2013-05-17 18:39:09 -0400] adamjk-dev: cwj: darn, it did not find the new test (that matched the name of a recipe on the run list)
[2013-05-17 18:39:34 -0400] adamjk-dev: KarlHungus: this is not a public one I don't think, I am not sure where it started
[2013-05-17 18:39:36 -0400] cwj: recipename_test.rb right?
[2013-05-17 18:39:44 -0400] adamjk-dev: KarlHungus: I have adapted it to handle chef-rundeck gem etc.
[2013-05-17 18:40:17 -0400] KarlHungus: adamjk-dev: just curious since i'm implementing a rundeck cookbook right now as well
[2013-05-17 18:40:23 -0400] adamjk-dev: cwj: in rundeck_test/files/default/tests/minitest/install-server_test.rb
[2013-05-17 18:40:35 -0400] cwj: hrm
[2013-05-17 18:40:36 -0400] adamjk-dev: cwj: in Vagrantfile: chef.add_recipe("rundeck_test::install-server")
[2013-05-17 18:40:46 -0400] KarlHungus: adamjk-dev: is this somewhere i can fork?
[2013-05-17 18:40:55 -0400] cwj: here's what i believe to be the relevant code https://github.com/calavera/minitest-chef-handler/blob/master/lib/minitest-chef-handler/lookup.rb#L48-L52
[2013-05-17 18:41:03 -0400] adamjk-dev: KarlHungus: ah, nice. yeah I am not even sure where we started it out
[2013-05-17 18:41:14 -0400] KarlHungus: gotcha
[2013-05-17 18:42:04 -0400] adamjk-dev: KarlHungus: I wonder if I can post it up
[2013-05-17 18:42:14 -0400] adamjk-dev: cwj: right, it looks in those paths
[2013-05-17 18:42:21 -0400] KarlHungus: adamjk-dev: if you do i'll probably send you pull reqs for fbsd support
[2013-05-17 18:42:42 -0400] adamjk-dev: cwj: I had these cookbooks broken into two separate cookbooks (rundeck, and rundeck_test) and rundeck_test metadata.rb depends on rundeck
[2013-05-17 18:43:05 -0400] adamjk-dev: KarlHungus: ah I see, yeah im new to the company so I don't know their policies, but it is likely okay
[2013-05-17 18:43:38 -0400] failshell: once you go vagrant, you dont go back
[2013-05-17 18:44:03 -0400] adamjk-dev: cwj: yeah I just don't get it, I must be doing something stupid
[2013-05-17 18:44:13 -0400] strictlyb: anyone want to make some $ i need a 3day class on chef i specialize in puppet but have 3 days to get up tp speed as well
[2013-05-17 18:44:19 -0400] adamjk-dev: cwj: I even did a 'berks cookbook rundeck_test --chef-minitest' to get the skeleton
[2013-05-17 18:44:41 -0400] strictlyb: pm me if interested
[2013-05-17 18:46:55 -0400] adamjk-dev: cwj: thanks for your help though.... I will likely have to debug it or something
[2013-05-17 18:47:11 -0400] cwj: no problem, sorry i couldn't be more helpful
[2013-05-17 18:47:17 -0400] cwj: sounds like you are doing the right things to me :)
[2013-05-17 18:47:55 -0400] adamjk-dev: cwj: eh, I thought you were going to be right on the test name (with the recipe not showing up in the run list matching a test name directly)
[2013-05-17 18:48:12 -0400] adamjk-dev: cwj: have a good one
[2013-05-17 18:48:36 -0400] adamjk-dev: KarlHungus: I will let you know if I post up the cookbook, it needs polishing and tests added first :)
[2013-05-17 18:48:56 -0400] KarlHungus: adamjk-dev: ty =) cheers
[2013-05-17 18:49:16 -0400] adamjk-dev: KarlHungus: likewise
[2013-05-17 18:58:12 -0400] gkra: Hey, if I have an array of strings in an attribute, how do I use the file provider to put one element per line for the content? is it just as simple as:
[2013-05-17 18:58:20 -0400] gkra: content my_array
[2013-05-17 18:58:21 -0400] gkra: ?
[2013-05-17 18:58:51 -0400] curiousGeorge: Hello chef gurus
[2013-05-17 18:59:27 -0400] strictlyb: any gurus from nyc wanting to make some extra $ pm me
[2013-05-17 18:59:28 -0400] curiousGeorge: would anyone know of any outside services, that could monitor stuff like HTTP connections, server uptime, etc.?
[2013-05-17 18:59:37 -0400] curiousGeorge: app performance, etc.
[2013-05-17 18:59:39 -0400] strictlyb: pingdom
[2013-05-17 18:59:49 -0400] curiousGeorge: any others?
[2013-05-17 18:59:56 -0400] gkra: curiousGeorge: app dynamics, New Relic
[2013-05-17 18:59:57 -0400] strictlyb: uhm
[2013-05-17 19:00:01 -0400] strictlyb: yea
[2013-05-17 19:00:02 -0400] gkra: :P
[2013-05-17 19:00:02 -0400] matticulous: uptime
[2013-05-17 19:00:04 -0400] curiousGeorge: new relic is cool
[2013-05-17 19:00:08 -0400] curiousGeorge: ill check out app dynamics
[2013-05-17 19:00:09 -0400] gkra: if you have money
[2013-05-17 19:00:45 -0400] curiousGeorge: just as long as its not MY money :)
[2013-05-17 19:00:46 -0400] curiousGeorge: lol
[2013-05-17 19:24:38 -0400] stevenator: knuckolls: Did you figure out your need to load the Node object from a library? I am a newb and am having more or less the same issue?
[2013-05-17 19:26:10 -0400] knuckolls: stevenator: i've found that whatever you want in the libraries you've got to pass in via method parameters
[2013-05-17 19:26:30 -0400] knuckolls: it may be different in chef 11
[2013-05-17 19:26:52 -0400] knuckolls: i must have posted to the mailing list about this at one point yeah? i haven't thought about that in awhile.
[2013-05-17 19:27:23 -0400] stevenator: knuckolls: ok thanks
[2013-05-17 19:32:05 -0400] tehlers__: is there a more elegant way to make a silly config for couchbase
[2013-05-17 19:32:18 -0400] tehlers__: they require you to put the ip in a file to allow dns names in the config tool
[2013-05-17 19:32:23 -0400] tehlers__: so im going this:
[2013-05-17 19:32:28 -0400] tehlers__: execute "create ip file for couchbase" do
[2013-05-17 19:32:28 -0400] tehlers__:     command "`echo dig +short $(hostname  -f)` >> /opt/couchbase/var/lib/couchbase/ip_start && chown couchbase /opt/couchbase/var/lib/couchbase/ip_start"
[2013-05-17 19:32:28 -0400] tehlers__:     creates "/opt/couchbase/var/lib/couchbase/ip_start"
[2013-05-17 19:32:28 -0400] tehlers__: end
[2013-05-17 19:33:50 -0400] Mithrandir: file "/opt/couchbase/var/lib/couchbase/ip_start" do \nowner "couchbase"\ncontent node[:ipaddress]\nend ?
[2013-05-17 19:36:34 -0400] tehlers__: hmm yes that look allot more elegant
[2013-05-17 19:49:19 -0400] jameson__: what
[2013-05-17 19:49:54 -0400] jameson__: what would be the free-est way to distribute vagrant boxes..? dropbox?
[2013-05-17 19:51:25 -0400] knuckolls: you want to distribute them out to the world or just to your team?
[2013-05-17 19:57:08 -0400] jameson__: both.
[2013-05-17 19:57:15 -0400] jameson__: well this would be to the world.
[2013-05-17 19:57:25 -0400] jameson__: (e.g. I want to link them from my public git repo)
[2013-05-17 20:01:27 -0400] btm: @opscode Cookbook Code Review, join: https://plus.google.com/hangouts/_/74338750c7555a22a07fbc5e11fb008277aecf23 watch: http://youtu.be/QcJ8QVxfzls
[2013-05-17 20:12:57 -0400] btm: @opscode apparently @google #hangouts is broken, we're going to gotomeeting: https://www3.gotomeeting.com/join/304516814
[2013-05-17 20:20:43 -0400] nicgrayson: Is there a best practice for managing nginx site configs? cc miah
[2013-05-17 20:21:26 -0400] nicgrayson: right now i use a template and search through a list of databags but it seems fragile
[2013-05-17 20:29:53 -0400] jchauncey_: jtimberman: decided to not use the clouds api. Instead found someone that had converted mixliv::auth to clojure. So I just built mine on top of that.
[2013-05-17 20:30:12 -0400] jchauncey_: https://github.com/RallySoftware/clj-chef
[2013-05-17 20:39:44 -0400] tehlers__:  Environment="INSTALL_DONT_START_SERVER='1'"   how do i ensure yum_package gets this variable?
[2013-05-17 20:43:03 -0400] tehlers__:  Environment="INSTALL_DONT_START_SERVER='1'  ?
[2013-05-17 20:43:05 -0400] tehlers__: whoops
[2013-05-17 20:43:12 -0400] tehlers__: ENV['INSTALL_DONT_START_SERVER']='1'
[2013-05-17 21:01:06 -0400] BlackMaria: how does one install an older version of chef?    eg:  I have a recipe that I need to work and dont have the time to fix all of the old dependancies
[2013-05-17 21:01:34 -0400] doomviking: gem install chef --version=x.x.x
[2013-05-17 21:02:03 -0400] BlackMaria: Ah that was the next question how does one list available verisons?
[2013-05-17 21:02:19 -0400] doomviking: gem list chef
[2013-05-17 21:02:30 -0400] BlackMaria: doomviking thanks! ( ruby noob:)
[2013-05-17 21:02:37 -0400] BlackMaria: * I am that is
[2013-05-17 21:11:37 -0400] helllen_: is chef compatible with mysql or only with postgresql?
[2013-05-17 21:12:28 -0400] bdemers: helllen_:  is that a trick question ?
[2013-05-17 21:13:00 -0400] bdemers: chef is compatible with anything, provided you write a recipe for it
[2013-05-17 21:13:10 -0400] doomviking: heh
[2013-05-17 21:13:15 -0400] bdemers: but i know the community mysql works pretty well
[2013-05-17 21:13:23 -0400] bdemers: cookbook ^
[2013-05-17 21:13:43 -0400] helllen_: I mean opscode has postgres no mysql
[2013-05-17 21:13:57 -0400] helllen_: but I have checked and it looks it could use mysql
[2013-05-17 21:14:37 -0400] bdemers: http://community.opscode.com/cookbooks/mysql
[2013-05-17 21:14:41 -0400] bdemers: helllen_: ^
[2013-05-17 21:15:25 -0400] helllen_: I am using erchef
[2013-05-17 21:15:27 -0400] siezer___: we don't support mysql. postgres only.
[2013-05-17 21:25:08 -0400] helllen_: ok
[2013-05-17 21:25:15 -0400] helllen_: I am getting this error on logs:
[2013-05-17 21:25:16 -0400] helllen_: mode not changed: File.lchmod is unimplemented on this OS and Ruby version
[2013-05-17 21:25:27 -0400] helllen_: how can I solve it ?
[2013-05-17 21:26:50 -0400] jtimberman: jchauncey: ahh, cool. The Rally folks are pretty brilliant.
[2013-05-17 21:27:20 -0400] jtimberman: oh
[2013-05-17 21:27:21 -0400] jtimberman: DERP
[2013-05-17 21:27:27 -0400] thasmo: Hey there! Just found the gorgous Bento project on Github. I was wondering why e.g. the Ubuntu 13.04 base box, compared to the vagrant cloud image from Ubuntu itself, is 200 MiB larger. Any idea?
[2013-05-17 21:27:30 -0400] jtimberman: *you* Rally folks are pretty brilliant :)
[2013-05-17 21:27:42 -0400] jtimberman: I misread what you were saying.
[2013-05-17 21:27:49 -0400] jchauncey: yeah, think we are going to integrate our bot we built for flow dock to do some of our self service chef things
[2013-05-17 21:28:02 -0400] jtimberman: thasmo: the provisionerless one, or the one with chef installed?
[2013-05-17 21:28:09 -0400] jtimberman: jchauncey: Right on.
[2013-05-17 21:28:47 -0400] thasmo: jtimberman, the provisionerless one is about 500 MiB, compared to the Ubuntu cloud box, which is about 300 MiB with chef already installed.
[2013-05-17 21:28:54 -0400] siezer: I would kill somebody for a working wifi connection
[2013-05-17 21:29:01 -0400] siezer: (tableflip)
[2013-05-17 21:29:01 -0400] jtimberman: thasmo: dunno.
[2013-05-17 21:29:08 -0400] jtimberman: siezer: seems bad
[2013-05-17 21:30:11 -0400] thasmo: jtimberman,k :D
[2013-05-17 21:31:45 -0400] thasmo: Btw does anyone of you use VirtualBox on windows working with shared folders and noticed how slow they are? *cough*
[2013-05-17 21:53:38 -0400] jmickle: FATAL: Cannot find sub command for: 'download'
[2013-05-17 21:53:41 -0400] jmickle: am i tripping out
[2013-05-17 21:53:47 -0400] jmickle: or isn't knife download a command
[2013-05-17 21:57:15 -0400] jstallard: jmickle: knife cookbook download?
[2013-05-17 21:57:23 -0400] jmickle: i want to download the whole repo
[2013-05-17 21:57:26 -0400] jmickle: new work station
[2013-05-17 21:57:45 -0400] jstallard: ahh
[2013-05-17 21:58:00 -0400] knuckolls: jmickle, what repo.
[2013-05-17 21:58:09 -0400] jmickle: mine
[2013-05-17 21:58:15 -0400] jmickle: i want to download everyone from my chef server
[2013-05-17 21:58:19 -0400] jmickle: usually we issue a knife download
[2013-05-17 21:58:26 -0400] jmickle: but seems to not be working
[2013-05-17 21:58:31 -0400] jmickle: on 10.18.2
[2013-05-17 21:59:20 -0400] knuckolls: jmickle, knife download is a part of knife-essentials
[2013-05-17 21:59:25 -0400] jmickle: ah yeah i just installed that
[2013-05-17 21:59:26 -0400] jmickle: and it worked
[2013-05-17 21:59:29 -0400] jmickle: totally forgot
[2013-05-17 21:59:33 -0400] jmickle: i installed knife-ec2
[2013-05-17 21:59:34 -0400] jmickle: haha
[2013-05-17 21:59:36 -0400] knuckolls: :)
[2013-05-17 21:59:42 -0400] knuckolls: make a gemfile
[2013-05-17 21:59:57 -0400] knuckolls: so your whole team has the same tools and the same versions
[2013-05-17 22:00:10 -0400] knuckolls: bundle install from your chef repo would have done the trick
[2013-05-17 22:00:11 -0400] jmickle: well most of us use git
[2013-05-17 22:00:18 -0400] jmickle: I'm the only person who uses knife on the team
[2013-05-17 22:00:18 -0400] jmickle: hehe
[2013-05-17 22:02:21 -0400] jmickle: my team commits to git then the jenkins server does the real commits
[2013-05-17 22:04:25 -0400] knuckolls: that's the way to go
[2013-05-17 22:04:29 -0400] knuckolls: we'll be doing that shortly.
[2013-05-17 22:12:54 -0400] greyull: Someone tell me how I somehow magically removed all permissions from myself on this test organization I made
[2013-05-17 22:13:41 -0400] greyull: Or moreso: How do I resolve this issue.
[2013-05-17 22:22:39 -0400] coderanger: greyull: Email support@opscode.com, they can reset them for you
[2013-05-17 22:23:02 -0400] greyull: coderanger: I ended up making a spare organization, and I'm asking them to close the previous one. That should work too, right?
[2013-05-17 22:23:12 -0400] coderanger: Sure
[2013-05-17 22:23:21 -0400] greyull: They're just free testing organizations, since I'm just researching stuff right now.
[2013-05-17 22:48:04 -0400] programmerq: so, if my company has a CCLA, does that mean that I can contribute? Do I additionally need to fill out an individual CLA?
[2013-05-17 23:01:45 -0400] jasonsmr: hello all
[2013-05-17 23:02:12 -0400] jasonsmr: I wonder if anyone in the channel has knowledge of a up to date apache2 version 2.4?
[2013-05-17 23:02:17 -0400] jasonsmr: thanks for any help.
[2013-05-17 23:04:19 -0400] programmerq: jasonsmr: I think you'll need to elaborate on your question a bit.
[2013-05-17 23:06:59 -0400] jasonsmr: I was discussing over in the channel #httpd that a worker or threaded mpm compiled into the current apache2 version 2.2 would use significantly less ram
[2013-05-17 23:07:13 -0400] jasonsmr: Im in a AWS micro instance so my ears pirked up
[2013-05-17 23:07:23 -0400] jasonsmr: :P
[2013-05-17 23:08:09 -0400] jasonsmr: I tring to follow up with this in my case becaus of a project that I just completed used chefsolo and so will a new project I am currently on
[2013-05-17 23:08:42 -0400] jasonsmr: I was looking for a method to improve the installation of a better apache2 maybe version 2.4 with a threaded mpm
[2013-05-17 23:10:05 -0400] jasonsmr: unless were just going for shear compat._
[2013-05-17 23:12:26 -0400] ssd7: Ohai chefs
[2013-05-17 23:25:11 -0400] jasonsmr: hey
[2013-05-17 23:25:43 -0400] jtran: can someone clarify what does service action :enable do (ubuntu)
[2013-05-17 23:28:48 -0400] coderanger: jtran: Sets the service to start at boot, not sure which runlevels if those are even a thing any more
[2013-05-17 23:29:42 -0400] jtran: thx coderanger.   so i have a servcie gerrit that if i do a 'sudo service gerrit start ' , no hiccups.   i have service 'gerrit'  ; action [:enable, :start] ; end  .    i see chef-client says processting start gerrit.   however it never starts
[2013-05-17 23:29:56 -0400] jtran: any suggestions how to troubleshoot that?  i tried -l debug i don't see anything interesting
[2013-05-17 23:30:18 -0400] coderanger: What underlying service system is it using?
[2013-05-17 23:30:35 -0400] jtran: ubuntu.  wait i take it back i see something  '[2013-05-17T23:28:56+00:00] DEBUG: service[gerrit] already running - nothing to do
[2013-05-17 23:30:35 -0400] jtran: '
[2013-05-17 23:31:01 -0400] jtran: fudge.
[2013-05-17 23:31:16 -0400] jtran: it's probably doing a service gerrit 'status' right?  which this gerrit init script doesn't have
[2013-05-17 23:31:44 -0400] coderanger: Not by default
[2013-05-17 23:31:57 -0400] coderanger: unless you did supports :status => true
[2013-05-17 23:32:10 -0400] coderanger: By default it looks for a process named gerrit
[2013-05-17 23:32:29 -0400] jtran: aah ok
[2013-05-17 23:32:52 -0400] jtran: so i ned to modify 'pattern'.  got it.
[2013-05-17 23:32:53 -0400] jtran: thx!
[2013-05-17 23:34:48 -0400] jasonsmr: Question. I found an old recipe for apache mysql and php, Question is can I use this recipe and expect to have up to date versions of apache2 with mpm?
[2013-05-17 23:34:52 -0400] bobbywhodunit: i'm using the "user" cookbook with knife-solo and some encrypted data bags. i created them, and they get transferred to the server, and i can access non-encrypted values in the data bags from the recipes, but the encrypted values don't decrypt :(
[2013-05-17 23:35:22 -0400] jasonsmr: Also can I change the recipe to take out mysql and replace it with couchDB?
[2013-05-17 23:35:34 -0400] bobbywhodunit: in other words i get an error that it wont create a user because the data e.g. for the password, comment, group, etc. is encrypted and does not pass validation as a normal string. it shows the {"encrypted_data"=> ... object, instead.
[2013-05-17 23:36:24 -0400] bobbywhodunit: i see the user::databag recipe is trying to fetch the data using the data_bag_item resource. is that the normal way to access encrypted data bag items?
[2013-05-17 23:44:11 -0400] coderanger: bobbywhodunit: No, anything using encrypted bags must use that API specifically
[2013-05-17 23:44:27 -0400] coderanger: There is no way to know if a bag is encrypted or not just by looking at it
[2013-05-17 23:44:54 -0400] bluepojo: coderanger: in Chef 11, the data bag specifies the cypher
[2013-05-17 23:45:08 -0400] bluepojo: so if the data bag contains a cypher key, it's encrypted
[2013-05-17 23:45:37 -0400] coderanger: bluepojo: No, you can just put a key called cypher in a bag
[2013-05-17 23:45:44 -0400] bluepojo: why would you do that?
[2013-05-17 23:45:57 -0400] coderanger: I mean you can heavily infer that its encrypted, but there is no actual metadata flag for it
[2013-05-17 23:46:08 -0400] coderanger: so it would be 'probably' at best :)
[2013-05-17 23:46:18 -0400] coderanger: 'probably' isn't good in APIs ;-)
[2013-05-17 23:46:37 -0400] bluepojo: specifying the structure of a data bag is a requirement prior to using them in your cookbook
[2013-05-17 23:46:52 -0400] coderanger: Hmm?
[2013-05-17 23:46:56 -0400] bluepojo: like
[2013-05-17 23:46:59 -0400] bluepojo: you need to figure that out
[2013-05-17 23:47:00 -0400] bluepojo: in advance
[2013-05-17 23:47:01 -0400] bobbywhodunit: coderanger: oh so that must mean the user cookbook is expecting a non-encrypted data bag. ok
[2013-05-17 23:47:18 -0400] bluepojo: sure, you _can_ shoot yourself in the foot
[2013-05-17 23:47:20 -0400] bluepojo: but why would you?
[2013-05-17 23:47:23 -0400] coderanger: bluepojo: Sure, that is semantics though, chef only groks the data it has :)
[2013-05-17 23:47:37 -0400] coderanger: syntax vs semantics
[2013-05-17 23:47:37 -0400] bluepojo: chef is just a collection of primatives
[2013-05-17 23:47:40 -0400] bluepojo: don't use them stupidly
[2013-05-17 23:47:54 -0400] coderanger: Not saying we shouldn't add a metadata field for this, just that there isn't one
[2013-05-17 23:48:08 -0400] bluepojo: true enough
[2013-05-17 23:48:20 -0400] coderanger: bobbywhodunit: Yes
[2013-05-17 23:48:30 -0400] bluepojo: better solution: provide support for encrypted environment attributes
[2013-05-17 23:48:33 -0400] coderanger: bobbywhodunit: Encrypted bags don't make as much sense with solo anyway
[2013-05-17 23:48:51 -0400] bluepojo: and do away with 80% of the usecases for encrypted data bags
[2013-05-17 23:48:51 -0400] bluepojo: :D
[2013-05-17 23:48:54 -0400] coderanger: Also encrypted data bags are bad and you should stop using them because lol trust chains
[2013-05-17 23:49:14 -0400] bluepojo: where do you store your ssl certificate or data base password if not an encrypted data bag?
[2013-05-17 23:49:18 -0400] coderanger: but holoway gets mad when I say that :)
[2013-05-17 23:49:54 -0400] coderanger: bluepojo: Encrypted data bags primary purpose is to make sure you don't have to trust the security of the chef server storage
[2013-05-17 23:50:01 -0400] bluepojo: right
[2013-05-17 23:50:04 -0400] coderanger: bluepojo: Fortunately I don't have to doubt that :)
[2013-05-17 23:50:18 -0400] coderanger: <-- works for Opscode
[2013-05-17 23:50:34 -0400] bluepojo: well
[2013-05-17 23:50:55 -0400] bluepojo: just cause the chef server is secure
[2013-05-17 23:51:01 -0400] bluepojo: doesn't mean some supporting software on the box is also secure
[2013-05-17 23:51:12 -0400] bluepojo: your software doesn't have to be at fault for a breach to occur
[2013-05-17 23:51:43 -0400] coderanger: That part is moot, since it is decrypted in places it is used
[2013-05-17 23:51:53 -0400] coderanger: The only place that encrypted bags matter is the storage on the chef server
[2013-05-17 23:51:57 -0400] bluepojo: right
[2013-05-17 23:52:03 -0400] bluepojo: and I'm talking about compromising the chef server
[2013-05-17 23:52:05 -0400] coderanger: and _maybe_ if you are encrypting them in git, but thats awful
[2013-05-17 23:52:07 -0400] bluepojo: didn't mention nodes
[2013-05-17 23:52:09 -0400] bluepojo: oh god no
[2013-05-17 23:52:12 -0400] bluepojo: yes please don't
[2013-05-17 23:52:14 -0400] bluepojo: lol
[2013-05-17 23:52:14 -0400] coderanger: Yes, except the chef server is the nodes for me :)
[2013-05-17 23:52:32 -0400] coderanger: My nodes are hosted chef ;-)
[2013-05-17 23:52:41 -0400] bluepojo: does hosted chef deploy itself?
[2013-05-17 23:52:42 -0400] coderanger: So for my purposes, highly moot
[2013-05-17 23:52:46 -0400] coderanger: More or less
[2013-05-17 23:52:49 -0400] bluepojo: that's cool
[2013-05-17 23:52:52 -0400] bluepojo: but
[2013-05-17 23:52:57 -0400] bluepojo: when talking to people who are not yoyu
[2013-05-17 23:52:58 -0400] bluepojo: you
[2013-05-17 23:53:01 -0400] bluepojo: saying the point is moot
[2013-05-17 23:53:03 -0400] bluepojo: is misleading
[2013-05-17 23:53:12 -0400] bluepojo: cause you are unique
[2013-05-17 23:53:18 -0400] coderanger: Sure, but for example, using them with solo is basically always wrong
[2013-05-17 23:53:30 -0400] coderanger: since there is no storage on a server, so the primary point is moot
[2013-05-17 23:53:36 -0400] bluepojo: that is fair
[2013-05-17 23:53:44 -0400] coderanger: people just see 'encrypted' and think 'Oh, I should do more of that'
[2013-05-17 23:53:49 -0400] bluepojo: lol yueah
[2013-05-17 23:53:50 -0400] bluepojo: yeah
[2013-05-17 23:53:59 -0400] coderanger: without considering what trust and security promises our code actually makes
[2013-05-17 23:54:00 -0400] bluepojo: it also used to matter when people would run OSSChef over http
[2013-05-17 23:54:01 -0400] bluepojo: and not https
[2013-05-17 23:54:03 -0400] coderanger: which are very minimal, but strong
[2013-05-17 23:54:07 -0400] bluepojo: but that is less common
[2013-05-17 23:54:33 -0400] bluepojo: OSSChef used to have severe JSON truncation issues when being served over https
[2013-05-17 23:54:43 -0400] bluepojo: if the node object got too big, chef runs would just fail
[2013-05-17 23:54:47 -0400] bluepojo: so you had to run over http
[2013-05-17 23:54:52 -0400] bluepojo: which means you'd better use encrypted data bags
[2013-05-17 23:55:30 -0400] coderanger: Except if you are running over http, and you presume MITM, they can just change a cookbook in flight and root your box
[2013-05-17 23:56:02 -0400] coderanger: So while technically you did fix a security hole, your scenario presumes a few sliiiightly bigger issues
[2013-05-17 23:56:19 -0400] bluepojo: fair enouygh
[2013-05-17 23:56:20 -0400] bluepojo: enough
[2013-05-17 23:57:51 -0400] coderanger: Turns out building a distributed, paranoid settings layer is Hard, and people all to often think thats what encrypted bags are
[2013-05-17 23:58:21 -0400] coderanger: But yes, if you use hosted chef and want to store stuff without risking a transitive attack, they fix that quite well :)
[2013-05-17 23:58:48 -0400] ermajn: hello, I have attributes to set but only if my package version is newer. I have method that gives me package version, now.. what's best approach to conditions in attributes file ?
[2013-05-17 23:59:20 -0400] coderanger: ermajn: Can you pastebin an example?

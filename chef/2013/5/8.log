[2013-05-08 00:02:26 -0400] kallistec: zuhaib: re-run with -VV, gist error message
[2013-05-08 00:02:30 -0400] zuhaib: The clients are being created with no problem
[2013-05-08 00:02:32 -0400] zuhaib: ok thanks
[2013-05-08 00:02:45 -0400] flaccid: community api is 500 :(
[2013-05-08 00:03:20 -0400] justizin: ah-ha, so my wierd error with the md5 module had to do with chef being uninstalled, while it was running, before the md5 module had been imported.
[2013-05-08 00:03:21 -0400] justizin: shablagoo!
[2013-05-08 00:05:36 -0400] shanlar: the package resource, if you do action :upgrade it appears to ignore version?
[2013-05-08 00:05:56 -0400] ssd7: I believe community should be back up.
[2013-05-08 00:08:02 -0400] zuhaib: anyone and kallistec: https://gist.github.com/zsiddique/7d5c5f3740c487401b76 gist from the failed upload, I wonder if bookshelf is just offfline
[2013-05-08 00:08:43 -0400] da3v_: @jtimberman: I'm trying to use dmg_package with a local file copied to file_cache_path, and am getting "nil is not a valid `source` parameter for remote_file." Is this expected?
[2013-05-08 00:09:56 -0400] kallistec: zuhaib: everything except cookbooks are uploading okay?
[2013-05-08 00:10:04 -0400] zuhaib: clients go up fine
[2013-05-08 00:10:09 -0400] solvip: tickets.opscode.com out?
[2013-05-08 00:10:15 -0400] zuhaib: And then it starts the cookbooks and then timeouit
[2013-05-08 00:11:05 -0400] kallistec: zuhaib: do the upload destination URLs look correct?
[2013-05-08 00:12:13 -0400] zuhaib: you know what, re-reading it no.  Its using https://chef-ca-c1.hipchat.com:444 (nodes name) which is nto public.  I have hostfiled the IP to chef-11
[2013-05-08 00:12:13 -0400] kallistec: zuhaib: also, is there a firewall on your new chef-server box?
[2013-05-08 00:12:42 -0400] zuhaib: How did it get chef-ca-c1?  I am guessing chef is returning that
[2013-05-08 00:13:04 -0400] zuhaib: I am guessing this: default['chef_server']['bookshelf']['url'] = "https://#{node['fqdn']}"
[2013-05-08 00:13:11 -0400] kallistec: yeah, chef generates URLs from config rather than request headers now
[2013-05-08 00:13:27 -0400] kallistec: that looks about right (config snippet)
[2013-05-08 00:13:30 -0400] zuhaib: ok time to re-run chef-solo
[2013-05-08 00:13:57 -0400] zuhaib: anywhere else I should be updating as well?
[2013-05-08 00:17:04 -0400] kallistec: zuhaib: not that I can think of, I have less experience troubleshooting chef 11 than previous versions
[2013-05-08 00:17:25 -0400] zuhaib: same here. I can build up a chef 10 server in my sleep :P
[2013-05-08 00:55:51 -0400] aslan: hey guys... can chef client 11 work with chef server 10?
[2013-05-08 00:59:31 -0400] zuhaib: aslan: yeah, we are doing that currently (trying to get a chef 11 server box)
[2013-05-08 00:59:57 -0400] zuhaib: I can getting this error on cookbook uploads: https://gist.github.com/zsiddique/2e99f8a5dbc4a436b425
[2013-05-08 01:00:54 -0400] aslan: zuhaib: i am making a new ec2 ami. i just ran a gem install chef and it installed chef 11 on my clients. i have a chef 10 server and no time to move to 11. just wondering should i remove the new chef gem and use 10 on my clients
[2013-05-08 01:01:11 -0400] zuhaib: It should be fine, chef 11 client and talk to chef 10 servers
[2013-05-08 01:01:15 -0400] zuhaib: We are doing that in prod
[2013-05-08 01:01:20 -0400] zuhaib: we use the omnibus installer
[2013-05-08 01:03:28 -0400] aslan: zuhaib: didnt have a good experience with omnibus installer last time. i am still using chef solo to configure my client :/
[2013-05-08 01:20:59 -0400] kallistec: zuhaib: do you see anything relevant if you run chef-server-ctl tail ?
[2013-05-08 01:23:14 -0400] aslan: kallistec: hi there
[2013-05-08 01:23:19 -0400] kallistec: yo
[2013-05-08 01:23:42 -0400] aslan: kallistec: long time no talk.
[2013-05-08 01:23:52 -0400] flipture: exit
[2013-05-08 01:23:53 -0400] kallistec: yeah, how's it going?
[2013-05-08 01:24:08 -0400] aslan: kallistec: my chef server and clients are behaving
[2013-05-08 01:24:25 -0400] aslan: i was about to create a new ami so thought of moving the clients to 11 first
[2013-05-08 01:24:27 -0400] kallistec: good times
[2013-05-08 01:24:36 -0400] aslan: from what i heard it can work fine with server 10
[2013-05-08 01:24:45 -0400] kallistec: yep
[2013-05-08 01:25:07 -0400] aslan: how about the installation methods do you guys still make http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz
[2013-05-08 01:25:46 -0400] kallistec: aslan: to install a chef 10 server?
[2013-05-08 01:26:03 -0400] aslan: in my case it would be the client
[2013-05-08 01:26:13 -0400] aslan: kallistec: i have never used the omnibus method
[2013-05-08 01:27:38 -0400] kallistec: that bootstrap-latest tarball is just a set of recipes for chef-solo to build a chef 10.x server
[2013-05-08 01:27:57 -0400] kallistec: you still need to get chef client/solo first
[2013-05-08 01:28:09 -0400] kallistec: omnibus for clients is pretty rad
[2013-05-08 01:28:41 -0400] aslan: kallistec: is there a url for client installation
[2013-05-08 01:29:01 -0400] kallistec: web page here: http://www.opscode.com/chef/install/
[2013-05-08 01:29:21 -0400] kallistec: you can either click through the drop-downs to get a link to a package
[2013-05-08 01:29:38 -0400] aslan: cool thanks
[2013-05-08 01:29:43 -0400] aslan: doing that tomorrow
[2013-05-08 01:29:44 -0400] kallistec: or you can do the curl | sudo bash thing
[2013-05-08 01:29:58 -0400] aslan: kallistec: i like to get the runit working
[2013-05-08 01:30:44 -0400] kallistec: client package doesn't include runit, you'd have to use the runit cookbook to set it up after you get chef installed
[2013-05-08 01:31:06 -0400] aslan: it was easy with bootstrap :(
[2013-05-08 01:31:56 -0400] kallistec: the bootstrap tarball just has the regular runit cookbook from community site
[2013-05-08 01:32:41 -0400] aslan: never bothered to look into that cookbook.
[2013-05-08 01:32:45 -0400] aslan: time to learn :)
[2013-05-08 01:33:11 -0400] aslan: what do you use to manage your chef client process?
[2013-05-08 01:34:28 -0400] kallistec: we use runit for pretty much everything
[2013-05-08 01:34:38 -0400] kallistec: http://community.opscode.com/cookbooks/runit
[2013-05-08 01:35:35 -0400] aslan: kallistec: i like the fact that it is vey reliable
[2013-05-08 01:38:48 -0400] kallistec: yeah, runit rocks
[2013-05-08 01:38:59 -0400] kallistec: okay, gotta run
[2013-05-08 01:52:37 -0400] kisoku: coderanger: about ?
[2013-05-08 01:52:56 -0400] kisoku: a colleague was complaining about strange search results on the community site
[2013-05-08 01:53:07 -0400] coderanger: Yo
[2013-05-08 01:53:09 -0400] coderanger: Wasup
[2013-05-08 01:53:11 -0400] kisoku: searching for 'erlang' produced no results
[2013-05-08 01:53:28 -0400] kisoku: and I just reproduced that result
[2013-05-08 01:53:39 -0400] kisoku: thought I would throw you a FYI
[2013-05-08 02:15:28 -0400] coderanger: will look, thanky :)
[2013-05-08 02:23:06 -0400] c4milo: hey guys, is anybody familiar with AWS OpsWork or Chef 0.9?
[2013-05-08 02:24:33 -0400] coderanger: kisoku: Seems to be working
[2013-05-08 02:29:37 -0400] ssd7: Heads up for Hosted Chef users: http://status.opscode.com/post/49903588652/scheduled-maintenance-time-change
[2013-05-08 02:32:31 -0400] c4milo_: has anybody had problems running knife in OSX
[2013-05-08 02:32:37 -0400] c4milo_: ?
[2013-05-08 02:32:53 -0400] c4milo_: I'm running knife cookbook create blah and it does not generate anything :/
[2013-05-08 02:33:17 -0400] ssd7: c4milo_: I do that every day.  Mind trying the command with -VV and posting the output somewhere?
[2013-05-08 02:33:29 -0400] c4milo_: ssd7: sure
[2013-05-08 02:33:55 -0400] c4milo_: camilo@grinch-2 ~/Dropbox/Development/buglabs/chef-cookbooks (master) % knife cookbook create -VV haproxyWARNING: No knife configuration file found
[2013-05-08 02:33:56 -0400] c4milo_: ** Creating cookbook haproxy
[2013-05-08 02:33:56 -0400] c4milo_: ** Creating README for cookbook: haproxy
[2013-05-08 02:33:57 -0400] c4milo_: ** Creating CHANGELOG for cookbook: haproxy
[2013-05-08 02:33:59 -0400] c4milo_: ** Creating metadata for cookbook: haproxy
[2013-05-08 02:34:01 -0400] c4milo_: camilo@grinch-2 ~/Dropbox/Development/buglabs/chef-cookbooks (master) %
[2013-05-08 02:34:03 -0400] c4milo_: ssd7:
[2013-05-08 02:34:27 -0400] c4milo_: and it just didn't generate anything
[2013-05-08 02:34:54 -0400] ssd7: c4milo_: Next time use something like pastebin or gist. :)  So, the problem is you don't have a config file so it is likely placing the cookbook elsewhere
[2013-05-08 02:35:03 -0400] ssd7: as it makes it at the cookbook_path by default
[2013-05-08 02:35:15 -0400] c4milo_: ssd7: sorry, I usually use gist.github.com but you said paste it here :P
[2013-05-08 02:35:38 -0400] c4milo_: ssd7: never mind, I'm asleep, yeah, you are right, my bad
[2013-05-08 02:35:53 -0400] ssd7: so I'll bet that cookbook exists in /var/chef/cookbooks :)
[2013-05-08 02:36:10 -0400] c4milo_: ssd7: LOL, it does
[2013-05-08 02:36:22 -0400] c4milo_: ssd7: so, how do I configure it? knife configure?
[2013-05-08 02:37:08 -0400] c4milo_: ssd7: alright I got it, thanks man
[2013-05-08 02:37:19 -0400] ssd7: c4milo_: That should work.  If you are on Hosted Chef there is a link in the webui that lets you download a pregenerated config.
[2013-05-08 02:37:25 -0400] ssd7: cool, glad to help :)
[2013-05-08 02:40:01 -0400] silk: I note the recent post to the chef mailing list about tomorrow's outage change
[2013-05-08 02:40:21 -0400] silk: and that they dont generally get announced there, is there a mailing list that these outages are posted to?
[2013-05-08 02:45:44 -0400] juliancdunn: ssd7: we should update the /topic to point at CC 11.4.4!
[2013-05-08 02:46:19 -0400] ssd7: juliancdunn: Aha! Good point
[2013-05-08 02:49:15 -0400] c4milo_: ssd7: what's site-cookbooks for?
[2013-05-08 02:49:52 -0400] c4milo_: ssd7: I just installed knife-solo and it generates that folder but I don't understand its purpose. Sorry, I'm new with Chef, trying to migrate out of Puppet :)
[2013-05-08 02:51:52 -0400] ssd7: c4milo_: Mostly a feature that has been superceeded by other workflows.  Let me see if I can find a doc page on it.  But the gist is that it allows you to overlay certain files in a cookbook with your site-specific version.
[2013-05-08 02:52:06 -0400] ssd7: If you are just starting, I wouldn't use it.
[2013-05-08 02:52:46 -0400] c4milo_: ssd7: ok
[2013-05-08 02:53:14 -0400] c4milo_: ssd7: FWIW, I'm planning on using AWS Opswork
[2013-05-08 02:53:38 -0400] ssd7: silk: Re your earlier question.  We just started opscode-bug for critical bug announcements. I believe we will be doing the same thing for status messages but right now the best place to look is always status.opscode.com
[2013-05-08 02:54:26 -0400] silk: OK, slightly less friendly than a list though :)
[2013-05-08 02:55:34 -0400] ssd7: silk: Definitely agree :)
[2013-05-08 03:04:24 -0400] silk: I do love that there is a random post link however ;)
[2013-05-08 03:07:21 -0400] monokrome: wtf does this mean?
[2013-05-08 03:07:22 -0400] monokrome: Cannot find a resource for environment on ubuntu version 12.04
[2013-05-08 03:08:46 -0400] monokrome: never mind, found it >.<
[2013-05-08 03:08:47 -0400] evanlivingston: hi all
[2013-05-08 03:09:03 -0400] evanlivingston: I'm curious about the difference between chef-solo and knife
[2013-05-08 03:11:57 -0400] silk: chef-solo performs a serverless chef run, knife is a cmdline tool
[2013-05-08 03:12:20 -0400] silk: that you can use to manipulate objects, upload cookbooks perform searches etc
[2013-05-08 03:16:04 -0400] evanlivingston: I have a machine which was bootstrapped, and then chef-solo was used to install some recipes. Now I want to add and install another recipe but Im not sure how.
[2013-05-08 03:18:38 -0400] silk: you should be able to modify the run_list and rerun chef-solo
[2013-05-08 03:19:02 -0400] silk: well, repackage the cookbooks also, chef-solo is not something I have played with
[2013-05-08 03:19:28 -0400] knuckolls: depends on how it was run with chef-solo initially but you probably have a solo.json or something like that in /etc/chef
[2013-05-08 03:19:29 -0400] knuckolls: or /tmp
[2013-05-08 03:19:31 -0400] knuckolls: maybe.
[2013-05-08 03:19:36 -0400] knuckolls: or /var/cache/chef
[2013-05-08 03:19:50 -0400] knuckolls: anyway somewhere in there are the cookbooks that it was run with initially
[2013-05-08 03:20:08 -0400] knuckolls: and the run_list should be in the solo.json or it's equivalent wherever it is
[2013-05-08 03:20:26 -0400] evanlivingston: knuckolls: and I can just wget or git clone the cookbooks into the cookbook dir?
[2013-05-08 03:20:34 -0400] knuckolls: you'll need to find the cookbooks, add in your new one, and re-run chef-solo w/ the updated run_list
[2013-05-08 03:20:48 -0400] knuckolls: evanlivingston: yep, in solo getting the cookbooks on the node is up to you
[2013-05-08 03:21:04 -0400] evanlivingston: ah, I think that answers my questions. Thanks!
[2013-05-08 03:21:15 -0400] knuckolls: evanlivingston: np np. good luck!
[2013-05-08 04:19:53 -0400] monokrome: How can I check if Vundle exists?
[2013-05-08 04:19:59 -0400] monokrome: wrong room
[2013-05-08 04:26:20 -0400] prana: this may not be totally topical, but how do people configure jenkins to do gem/ruby builds? do you use rbenv? rvm?
[2013-05-08 04:29:34 -0400] zuhaib: well the docs for the chef10 to chef11 upgrade needs some updating/correcting but otherwise its not so painful
[2013-05-08 05:08:27 -0400] Khazix: what should be my not_if param to test if a directory exists?
[2013-05-08 05:23:16 -0400] silk: not_if { ::File.directory?("#{node.sites.config.sducms.basedir}/themes") }
[2013-05-08 05:23:37 -0400] silk: using an appropriate attribute / directory path
[2013-05-08 05:32:24 -0400] Khazix: silk, thanks mate!
[2013-05-08 06:49:56 -0400] LemSta: Hi. Attempting to install chef-11.4.4-2.el5.i686 on CentOS 5. The rpm installs happily and prints "Thank you for installing Chef!" but there is no chef-server-ctl under /opt/chef or anywhere else on the system I can find...
[2013-05-08 06:50:40 -0400] wolfeidau: LemSta: what does rpm -q chef --dump
[2013-05-08 06:50:43 -0400] wolfeidau: show
[2013-05-08 06:51:40 -0400] LemSta: A large list of files and attributes.
[2013-05-08 06:51:58 -0400] LemSta: rpm -q chef --dump | grep chef-server-ctl  doesn't return anything.
[2013-05-08 06:52:29 -0400] wolfeidau: LemSta: Ok well it isn't installed by that rpm, at least you know that now :)
[2013-05-08 06:53:02 -0400] LemSta: Similarly, I've downloaded almost all of the chef-11.*.el5.i686.rpm files and done a rpm -qlp chef*.rpm | grep chef-server-ctl and not found any instances of it..
[2013-05-08 06:53:24 -0400] LemSta: Do you know if it _should_ be installed by that rpm ? The instructions seem to indicate it should be present after that rpm is installed..
[2013-05-08 06:54:15 -0400] LemSta: Actually, please ignore me, as I've just realised I'm an idiot.
[2013-05-08 06:54:23 -0400] LemSta: Downloaded the clients, not the server.
[2013-05-08 07:07:22 -0400] TheSerapher: good morning everyone!
[2013-05-08 07:07:31 -0400] TheSerapher: I figured it would be time to check with some of you pros :D
[2013-05-08 07:08:05 -0400] TheSerapher: so I have been using Vagrant 1.2 for a while now which runs great, but currently I am stuck getting kitchen-vagrant installed so I can continue to use the awesome version that is 1.x
[2013-05-08 07:08:16 -0400] TheSerapher: sebgrewe@work-desktop:~$ vagrant plugin install kitchen-vagrant
[2013-05-08 07:08:16 -0400] TheSerapher: Installing the 'kitchen-vagrant' plugin. This can take a few minutes...
[2013-05-08 07:08:16 -0400] TheSerapher: /opt/vagrant/embedded/lib/ruby/1.9.1/rubygems/dependency_installer.rb:153:in `gather_dependencies': Unable to resolve dependencies: kitchen-vagrant requires test-kitchen (~> 1.0.0.alpha.2) (Gem::DependencyError)
[2013-05-08 07:08:21 -0400] TheSerapher: sebgrewe@work-desktop:~$ vagrant plugin install kitchen-vagrant --plugin-prerelease
[2013-05-08 07:08:21 -0400] TheSerapher: Installing the 'kitchen-vagrant --prerelease' plugin. This can take a few minutes...
[2013-05-08 07:08:21 -0400] TheSerapher: The plugin 'kitchen-vagrant' could not be found in local or remote
[2013-05-08 07:08:21 -0400] TheSerapher: repositories. Please check the name of the plugin and try again.
[2013-05-08 07:08:35 -0400] TheSerapher: anyone able to give me a hint on how to proceed ? :)
[2013-05-08 07:14:16 -0400] TheSerapher: oh seems I have missed this: Since the Vagrantfile is written out on disk, Vagrant needs absolutely no knowledge of Test Kitchen. So no Vagrant plugin gem is required.
[2013-05-08 07:14:39 -0400] TheSerapher: okay that's emberassing
[2013-05-08 07:14:56 -0400] TheSerapher: sorry for that RTFM question, gonna go back to it and see if I can make it work
[2013-05-08 07:22:09 -0400] helllen: helllo
[2013-05-08 07:22:32 -0400] helllen: I have installed chef-server-11.0.6-1.el6.x86_64 into centos-6.4
[2013-05-08 07:22:37 -0400] helllen: minimal installation
[2013-05-08 07:22:59 -0400] helllen: and I am having problems on reconfigure
[2013-05-08 07:23:02 -0400] helllen: execute[/opt/chef-server/bin/chef-server-ctl start rabbitmq] action run
[2013-05-08 07:23:11 -0400] helllen: get an error and stop the reconfigure
[2013-05-08 07:23:19 -0400] helllen: I have done the same in ubuntu and it works
[2013-05-08 07:23:45 -0400] helllen: is the package ready for centos really ?
[2013-05-08 07:23:48 -0400] ssd7: helllen: is qpidd installed and listening on rabbitmq's port?
[2013-05-08 07:24:04 -0400] helllen: what is qpidd ?
[2013-05-08 07:25:11 -0400] helllen: what is the listen port for rabbit ?
[2013-05-08 07:26:56 -0400] ssd7: helllen: Sorry, connection dropped
[2013-05-08 07:27:43 -0400] ssd7: helllen: What is the the output of: rpm -qa | grep qpid
[2013-05-08 07:28:29 -0400] helllen: none
[2013-05-08 07:28:35 -0400] helllen: not installed on centos-minimal
[2013-05-08 07:29:45 -0400] ssd7: Hrmm. Ok. What was the error message you recieved?
[2013-05-08 07:30:21 -0400] helllen: I will pastebin
[2013-05-08 07:30:23 -0400] helllen: sec
[2013-05-08 07:30:52 -0400] helllen: pastebin.com is not working
[2013-05-08 07:30:54 -0400] helllen: :-(
[2013-05-08 07:31:03 -0400] helllen: which one do you use ?
[2013-05-08 07:31:35 -0400] ssd7: gist.github.com is often useful
[2013-05-08 07:33:24 -0400] helllen: https://gist.github.com/anonymous/030bc19ea4485449d02d
[2013-05-08 07:34:28 -0400] ssd7: Hrm.  If you run reconfigure again do you get the same error?
[2013-05-08 07:34:35 -0400] helllen: yes
[2013-05-08 07:34:45 -0400] helllen: this is the 100 times I have executed :-D
[2013-05-08 07:35:16 -0400] helllen: when I execute:  /opt/chef-server/bin/chef-server-ctl start rabbitmq
[2013-05-08 07:35:16 -0400] ssd7: Is there anything in /var/log/chef-server/rabbitmq/current?
[2013-05-08 07:35:17 -0400] helllen: I get
[2013-05-08 07:35:21 -0400] helllen: warning: rabbitmq: unable to open supervise/ok: file does not exist
[2013-05-08 07:35:40 -0400] helllen: /var/log/chef-server/rabbitmq/current not found
[2013-05-08 07:36:40 -0400] ssd7: Does ps auxww | grep runsvdir yield any results?
[2013-05-08 07:37:02 -0400] helllen: #  ps auxww | grep runsvdir
[2013-05-08 07:37:07 -0400] helllen: root      2400  0.0  0.0 105300   880 pts/0    S+   11:36   0:00 grep runsvdir
[2013-05-08 07:37:15 -0400] helllen: only the grep
[2013-05-08 07:37:42 -0400] ssd7: Is this centos 6?
[2013-05-08 07:38:37 -0400] helllen: 6.4
[2013-05-08 07:39:21 -0400] ssd7: Hrmm. Is there an entry in /etc/inittab for runsvdir-start?
[2013-05-08 07:39:48 -0400] helllen: SV:123456:respawn:/opt/chef-server/embedded/bin/runsvdir-start
[2013-05-08 07:41:02 -0400] ssd7: Some background, chef-server uses runit as a service manager.  It appears that runsvdir isn't started
[2013-05-08 07:41:15 -0400] helllen: ssd7, I have executed
[2013-05-08 07:41:27 -0400] helllen: /opt/chef-server/embedded/bin/runsvdir-start into one terminal
[2013-05-08 07:41:43 -0400] helllen: and from other rexecute reconfigure and worked
[2013-05-08 07:42:19 -0400] ssd7: Yeah, so there is an option question of why it is using inittab there at all as I believe it should be using upstart on centos 6
[2013-05-08 07:42:46 -0400] helllen: I will check with my centos os experrt :-D (google)
[2013-05-08 07:43:39 -0400] ssd7: helllen: If you run /opt/chef-server/bin/ohai platform_version on that machine, what do you get?
[2013-05-08 07:44:20 -0400] helllen: file not found
[2013-05-08 07:44:59 -0400] ssd7: try /opt/chef-server/embedded/bin/ohai
[2013-05-08 07:49:02 -0400] helllen: /opt/chef-server/embedded/bin/ohai platform_version
[2013-05-08 07:49:11 -0400] helllen: gets different version than centos
[2013-05-08 07:49:13 -0400] helllen: because
[2013-05-08 07:49:26 -0400] helllen: we have modified:  /etc/centos-release
[2013-05-08 07:49:32 -0400] helllen: could be ralated ?
[2013-05-08 07:49:43 -0400] helllen: how could I force a platform ?
[2013-05-08 07:50:34 -0400] ssd7: helllen: Yeah, it relies and that information to choose the correct config for the given platform
[2013-05-08 07:50:48 -0400] helllen: mmmm
[2013-05-08 07:50:50 -0400] helllen: I see
[2013-05-08 07:51:07 -0400] helllen: how does it gets the platform
[2013-05-08 07:51:18 -0400] helllen: readed from /etc/centos-release ??
[2013-05-08 07:53:20 -0400] ssd7: helllen: I'd have to check the ohai code as it checks a number of sources, but one of them is definitely /etc/centos-release
[2013-05-08 07:55:02 -0400] helllen: does it check only at the reconfigure process
[2013-05-08 07:55:03 -0400] helllen: ?
[2013-05-08 07:55:35 -0400] ssd7: hrm, it looks like maybe not centos-release but redhat-release.  It'll use that any time reconfigure is run.
[2013-05-08 07:55:54 -0400] helllen: ok
[2013-05-08 07:56:05 -0400] helllen: I hae modified it and now I get 6.4
[2013-05-08 07:56:13 -0400] helllen: so it should be ok
[2013-05-08 07:56:24 -0400] ssd7: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/linux/platform.rb
[2013-05-08 07:56:32 -0400] ssd7: ^- in case you are interested
[2013-05-08 07:58:04 -0400] helllen: thanks
[2013-05-08 07:58:08 -0400] helllen: now it advance a lot
[2013-05-08 07:58:18 -0400] helllen: but I get new error :-D
[2013-05-08 07:58:19 -0400] helllen: https://gist.github.com/anonymous/e5f4dbabfcd76e312897
[2013-05-08 07:58:51 -0400] ssd7: Can you add the ouput of
[2013-05-08 07:58:54 -0400] ssd7: chef-server-ctl status
[2013-05-08 07:59:31 -0400] helllen: https://gist.github.com/anonymous/1f903491d82167845e1a
[2013-05-08 08:00:02 -0400] helllen: looks all services are ok
[2013-05-08 08:00:14 -0400] steve____: Hi, I use chef on virtual box with vagrant. while I want to upload cookbooks I got /opt/vagrant_ruby/lib/ruby/1.8/net/http.rb:560:in `initialize': getaddrinfo: Name or service not known (SocketError)
[2013-05-08 08:00:22 -0400] helllen: # netstat --inet -apn|grep 8000
[2013-05-08 08:00:27 -0400] helllen: tcp        0      0 127.0.0.1:8000              0.0.0.0:*                   LISTEN      13885/beam.smp
[2013-05-08 08:00:28 -0400] ssd7: It looks like solr is probably in a restart loop (it has been up 0 seconds)
[2013-05-08 08:00:34 -0400] ssd7: Is anything in /var/log/chef-server/chef-solr/current
[2013-05-08 08:00:52 -0400] helllen: yes
[2013-05-08 08:00:55 -0400] helllen: 2013-05-08_12:00:21.43739 Error: Exception thrown by the agent : java.net.MalformedURLException: Local host name unknown: java.net.UnknownHostException: rb-manager: rb-manager: Name or service not known
[2013-05-08 08:01:56 -0400] ssd7: helllen: Is your host name resolvable?  Might want to just throw it in /etc/hosts for now if not
[2013-05-08 08:02:35 -0400] helllen: it is on /etc/hosts
[2013-05-08 08:02:38 -0400] helllen: but I cannot ping
[2013-05-08 08:02:41 -0400] helllen: checking
[2013-05-08 08:02:45 -0400] helllen: let me check
[2013-05-08 08:04:45 -0400] helllen: solved
[2013-05-08 08:04:49 -0400] helllen: and reconfigure is fine
[2013-05-08 08:04:55 -0400] helllen: really thanks ssd7
[2013-05-08 08:05:07 -0400] ssd7: steve____: Need a bit more context on that one, but it looks like you probably can't talk to whatever is configured as your chef server
[2013-05-08 08:05:08 -0400] helllen: I would never have done alone :-D
[2013-05-08 08:05:16 -0400] ssd7: helllen: No problem, happy to help :)
[2013-05-08 08:05:53 -0400] steve____: I use one VM for the chef server and another one for the chef workstation.
[2013-05-08 08:06:22 -0400] steve____: I can use knif commands to show my node (on another vm) or ask the server ...
[2013-05-08 08:06:30 -0400] steve____: but upload didnt work
[2013-05-08 08:06:46 -0400] ssd7: steve____: If you add -VV to your command, you should get more verbose output
[2013-05-08 08:06:47 -0400] steve____: vagrant@chef-ws:~/chef-repo$ knife cookbook upload  -o ./cookbooks/ -a Uploading chef_handler [1.1.4] Uploading firefox      [1.0.6] Uploading java         [1.10.2] Uploading tomcat       [0.12.0] Uploading windows      [1.8.10] /opt/vagrant_ruby/lib/ruby/1.8/net/http.rb:560:in `initialize': getaddrinfo: Name or service not known (SocketError)         from /opt/vagrant_ruby/lib/ruby/1.8/net/http.rb:560:in `open'         from /opt/vagra
[2013-05-08 08:07:06 -0400] steve____: ok, i will try
[2013-05-08 08:07:16 -0400] ssd7: Is this Chef 11 server?  My guess is that the URL that is coming back to PUT the cookbooks to has a hostname that isn't resolvable in it for some reason
[2013-05-08 08:07:48 -0400] steve____: yes, it is cheff 11
[2013-05-08 08:08:10 -0400] steve____: maybe I need also setup /etc/hosts (like helllen)
[2013-05-08 08:08:11 -0400] steve____: ?
[2013-05-08 08:10:38 -0400] ssd7: steve____: That depends.  /etc/hosts is the fatest way probably, but it is also probably possible in your case to have Chef Server send back an IP rather than a hostname
[2013-05-08 08:11:34 -0400] steve____: after running with -VV it seems that http connects etc. worked well. The last line before tehe exec starts with INFO: Uploading /home/vagrant/chef-repo/cookbooks/windows/metadata.json ...
[2013-05-08 08:12:11 -0400] ssd7: steve____: Mind posting the full output to something like pastebin or gist?
[2013-05-08 08:16:31 -0400] steve____: ssd7: I put the log on http://goo.gl/kzOSG
[2013-05-08 08:17:26 -0400] ssd7: yeah, it looks like your host name for the chef server is "chef"
[2013-05-08 08:17:45 -0400] ssd7: so if that isn't resolvable from the client, that isn't going to work.
[2013-05-08 08:17:48 -0400] steve____: yes, correct
[2013-05-08 08:18:32 -0400] steve____: so I should use another one - I guess
[2013-05-08 08:18:42 -0400] ssd7: You can either make it a resolvable hostname
[2013-05-08 08:18:56 -0400] ssd7: or you can put something like this in your chef-server.rb config file
[2013-05-08 08:19:18 -0400] ssd7: bookshelf['url'] = "http://IPADDRSESS"
[2013-05-08 08:19:24 -0400] ssd7: and then run a reconfigure
[2013-05-08 08:20:21 -0400] steve____: ok. I will try. Will take some time. Appreciate your help and sorry for such newbie questions :-)
[2013-05-08 08:21:02 -0400] ssd7: steve____: Happy to help.  I'm gonna head out soon but hopefully you have enough to poke around a bit now.
[2013-05-08 08:21:49 -0400] steve____: Thx!
[2013-05-08 08:30:40 -0400] m4rcu5: im looking to keep my nodes in git, but im in need of some thoughts about it. Anyone else doing this, or are you just keeping roles and cookbooks in git?
[2013-05-08 08:30:43 -0400] steve____: ssd7: chef-server.rb configuration worked VERY WELL! Thanks for your great help!
[2013-05-08 08:32:14 -0400] kechagia: Is it possible to run an execute command in chef, displaying stdout in a way, that's not eating up all memory?
[2013-05-08 09:11:48 -0400] yawn: i'd like to modify a web app template installed by a recipe. what's the most straightforward way to do that (except forking)?
[2013-05-08 09:28:46 -0400] rnewson: I'm struggling to find why a chef node is not properly registered (or so it seems). Does anyone know how I can work backwards from the node name to the document id that should be in couchdb? chef 10.18.2
[2013-05-08 09:31:34 -0400] Janaka: hi, can somebody help me with the following questions I have please http://stackoverflow.com/questions/16425064/how-do-you-modularize-a-chef-recipe
[2013-05-08 09:33:25 -0400] Afterglow: Janaka: have you considered using a lwrp instead of the iis_site function? that seems like the correct approach to me - http://docs.opscode.com/lwrp.html
[2013-05-08 09:34:10 -0400] Afterglow: once you have created the lwrp you can call it from any recipe in the cookbook and if you set a depends in the metadata you can call it from other cookbooks as well
[2013-05-08 09:36:06 -0400] zts: Janaka: the closest Chef thing to what you're doing is the Definition - http://docs.opscode.com/essentials_cookbook_definitions.html
[2013-05-08 09:36:16 -0400] Afterglow:  rnewson if you turn the log level all the way up in the chef server it might be in the logs but i'm not really sure
[2013-05-08 09:36:25 -0400] zts: Janaka: as Afterglow says, LWRPs will also work - they're more powerful but more complex than definitions
[2013-05-08 09:36:52 -0400] rnewson: Afterglow: enh, rather not do that, but thanks. Seems getting the _id is quite hard. I can understand hiding it, but boy could I use it right now...
[2013-05-08 09:38:39 -0400] zts: Janaka: however, having a recipe per cluster of server is probably unnecessary - it's usually good to separate data (the mapping of sites to clusters) from code (the recipe managing the configuration)
[2013-05-08 09:39:59 -0400] zts: Janaka: so an arguably more Chef-fy approach would be to use data bags (or attributes) to hold the data, with a single recipe that figured out "what is the right list of sites on _this_ node"
[2013-05-08 09:42:48 -0400] Janaka: Thanks Afterglow and zts
[2013-05-08 09:43:42 -0400] Janaka: My initial thought was along the lines of data bags
[2013-05-08 09:45:56 -0400] Janaka: but I think I got lost in my thoughts / got distracted. So I can have a data bag per defined per cluster. Then may be use tags to label each cluster node? then in the recipe read from the data bag based on the tag on the node?
[2013-05-08 09:48:22 -0400] zts: Janaka: yup, that would work.  You could have one data bag, with a data bag item for each cluster containing the list of sites.  Or one data bag per cluster, with a data bag item for each site
[2013-05-08 09:49:32 -0400] zts: Janaka: or one data bag, one item for each site, with the items also containing a key to say which cluster it's assigned to.  You could then use search to retrieve only the items for this cluster
[2013-05-08 09:50:25 -0400] zts: Janaka: the best option depends on how you'll be managing the data, how it will change, etc.  But the hardest part is deciding how a node knows which cluster it's in :)
[2013-05-08 10:08:09 -0400] Janaka: zts: are tags the best way to label each node with the cluster it belongs to you think. A role feels half wrong as this is more an instance of a cluster rather that the class of cluster
[2013-05-08 10:13:38 -0400] zts: Janaka: on the face of it, tags are a good choice - however, few people seem to use them (including me, to be honest).
[2013-05-08 10:14:37 -0400] zts: Janaka: a common approach is to use an attribute - eg, node['myapp']['cluster'] - that you could set as a node attribute, or in a role (if that made sense)
[2013-05-08 10:19:38 -0400] Janaka: zts: sort of makes sense. But a node belongs to cluster001, custer002, clusterN. Therefore I cannot apply this from a role as the role will be 'Cluster' and be applied to all clusters. Or are you saying it's ok to have a role per cluster ?
[2013-05-08 10:21:04 -0400] Janaka: zts: also why aren't tags used that must. Or what's the advantage of attribute over tag?
[2013-05-08 10:22:33 -0400] zts: Janaka: a role per cluster might be unweildy with a lot of clusters, but it could work.  How many clusters do you need to deal with, and how frequently does membership change?  (node added to/removed from cluster)
[2013-05-08 10:23:41 -0400] zts: Janaka: tags just seem to be an overlooked feature - possibly the people getting a lot of use out of them don't talk about it, or don't have any issues :)
[2013-05-08 10:24:25 -0400] zts: I really should try out tags again, as I really can't remember well enough to tell you what the drawbacks are
[2013-05-08 10:26:33 -0400] Janaka: zts: at this point we have no idea how much change we will see. it's a new system we are building. My gutt feel is that there will not be a lot of change in terms of nodes being added and removed or new clusters being spun up for scaling. However depending on how often a EC2 instance blows up (not very often in the last 4 yrs of usage) or we screw up a depoy/config.
[2013-05-08 10:30:48 -0400] zts: Janaka: well, if you know what cluster a node will be in when you create it (and it won't change), you could set an attribute in the first run - or use ec2 userdata, or something like that
[2013-05-08 10:31:38 -0400] zts: Janaka: if you'll be managing the cluster membership/mapping manually, I'd probably go with one role per cluster as you can easily manage roles and run_lists either using knife and files in your chef-repo, or against the Chef server API (if you start to need to automate)
[2013-05-08 10:32:42 -0400] Janaka: zts: agreed. It has to be labelled when spun up.
[2013-05-08 10:32:50 -0400] Janaka: zts: thanks for your help
[2013-05-08 10:32:51 -0400] zts: Janaka: for the greatest flexibility or full automation, I'd lean towards data bags as they're easier to work with in that scenario
[2013-05-08 10:32:57 -0400] zts: no problem
[2013-05-08 10:33:09 -0400] zts: the good news is that it's not too hard to switch from one to another, should you find you need to :)
[2013-05-08 10:33:18 -0400] Janaka: zts:for the site list yes. data bags it is
[2013-05-08 10:33:24 -0400] zts: so start with the simplest thing that works for you today
[2013-05-08 10:39:10 -0400] Janaka: zts: we do need to trigger the website setup remotely from a cli and web interface. Choosing the use Chef to make apply the changes on the node. Therefore will need to call the API to push new website names into the data bag. Any dotNet and/or powershell client libraries you can point me at. Google hasn't given me much
[2013-05-08 10:42:21 -0400] Janaka: zts: btw looks like you cann't tag using chef-client but can set atrributes
[2013-05-08 10:48:53 -0400] zts: Janaka: hm, the docs suggest you can both tag and untag in recipes: http://docs.opscode.com/essentials_cookbook_recipes_tags.html
[2013-05-08 10:49:08 -0400] zts: doesn't that work?
[2013-05-08 11:03:28 -0400] sander^work: How does chef work to manage "complex systems"?.. I heard puppet can't do that.
[2013-05-08 11:03:51 -0400] Janaka: zts: but we can't store the data about which cluster a node belongs to in a recipe right. A cookbook and recipe is no supposed to be hard coded to nodes, correct? Therefore the node attribute or tag needs to be set from elsewhere when spun up such that the cookbook can apply and configure the respective sites
[2013-05-08 11:04:47 -0400] Janaka: I'd want to call chef-client and pass the cluster name to be set just like I do with the environment and the roles
[2013-05-08 11:05:17 -0400] Janaka: Teh thing (AWS CloudFormation) is the thing that know which cluster the node belongs to
[2013-05-08 11:05:19 -0400] zts: oh sorry, I misunderstood
[2013-05-08 11:06:18 -0400] zts: that's a shame, someone should add that as a command-line option
[2013-05-08 11:06:23 -0400] sander^work: Wondring how chef works when engineers have diffrent opinions about how things should be done.
[2013-05-08 11:08:50 -0400] Janaka: zts: yep, I think tag is more appropriate for me in this case but will have to use attribute
[2013-05-08 11:09:17 -0400] Janaka: zts: any ideas on the API question above?
[2013-05-08 11:10:29 -0400] zts: Janaka: re: dotNet or powershell libs?  I'm not sure sorry, I've got no experience with that.  I'd suggest either asking in here later in the day (when the folks in the USA are awake), or the mailing list
[2013-05-08 11:35:14 -0400] Janaka: zts: thanks
[2013-05-08 11:36:42 -0400] zts: you're welcome
[2013-05-08 12:44:13 -0400] geekbri: Fantastic.  So one of my nodes is throwing a 403 forbidden error.  The stack trace doesn't tell much.  I went to file a support ticket, but when I try to file a support ticket i get an nginx 405 Not Allowed error
[2013-05-08 12:44:15 -0400] geekbri: complete fail?
[2013-05-08 12:44:53 -0400] geekbri: Ok there we got.  Looks like the 405 error finally stopped
[2013-05-08 13:10:14 -0400] willejs: hi, whats the recommended procedure when upgrading chef client 10.18.x to 11.4.4?
[2013-05-08 13:10:35 -0400] willejs: is it worth doing yet considering I'm using a lot of community cookbooks?
[2013-05-08 13:11:33 -0400] geekbri: I would probably upgrade to 10.24.4 before 11.4.4
[2013-05-08 13:12:02 -0400] geekbri: Do you have a dev environment you can test with 11.4.4 ?
[2013-05-08 13:12:16 -0400] willejs: yeah can make one easily...
[2013-05-08 13:12:52 -0400] willejs: is the procedure upgrade the client in a dev environment, try a chef run, fix/upgrade cookbook, rinse and repeat?
[2013-05-08 13:20:26 -0400] helllen: <ssd7>, are you ?
[2013-05-08 13:20:47 -0400] helllen: it looks the system was ok but I have no serve listing on port 4000
[2013-05-08 13:23:20 -0400] helllen: I have erchef listening on port 47345
[2013-05-08 13:23:25 -0400] helllen: is that normal ?
[2013-05-08 13:31:46 -0400] Peek_: Can anyone tell me how to get an ohai plugin added to the community list?
[2013-05-08 13:43:53 -0400] Kzim: Hello, any one using SaltStack with Chef or any other Orchestror ? :) thanks
[2013-05-08 14:09:59 -0400] ssd7: helllen: In Chef 11 the port you want clients to point at is 443.  Nginx listens on 443, terminates SSL, and reverse proxies to erchef
[2013-05-08 14:31:18 -0400] VadimT: hello guys
[2013-05-08 14:31:34 -0400] VadimT: i am trying to override attributes in my nodes
[2013-05-08 14:32:09 -0400] VadimT: i am add recipe to run list and attributes to override
[2013-05-08 14:32:30 -0400] VadimT: but after chef-client running my recipe installed with default attributes
[2013-05-08 14:52:08 -0400] ssd7: VadimT: Did you add the override attribute directly to the node with knife node edit?
[2013-05-08 14:52:49 -0400] ssd7: VadimT: If so, that won't work.  You need to set it in a cookbook, role, or environment.
[2013-05-08 14:52:55 -0400] VadimT: <@ssd7> directly but with knife raw -m PUT PATH -i file
[2013-05-08 14:53:16 -0400] VadimT: but if i just want to change for one node?
[2013-05-08 14:53:24 -0400] VadimT: for example port for apache
[2013-05-08 14:53:50 -0400] ssd7: VadimT: Same issue as knife-edit I believe.  If you *really* want to change it for one node via node data you can set it at the "normal" level but not override
[2013-05-08 14:54:10 -0400] ssd7: however, typically when you find yourself doing something for 1 node, you might want to rething how you are doing it
[2013-05-08 14:56:29 -0400] VadimT: <@ssd7> what you mean normal level? set attributes at default section with my value? but i think they will be overriten by recipe
[2013-05-08 14:59:03 -0400] kernel_panick: Hi guys!  I am using "directory" resource for set the permission in recursive mode.. the is a way to be recursive but excluding a specific subdirectory ?
[2013-05-08 14:59:06 -0400] VadimT: "override":{"apache":{ "dir": "/etc/mydir","user": "myUser"}},"run_list":["recipe[apache2]"] - this is what i am trying to do
[2013-05-08 15:06:46 -0400] VadimT: 2ssd7 if i understand correctly need to try something like "normal":{"tags":[],"apache":{ "dir": "/etc/mydir","user": "myUser"}}
[2013-05-08 15:11:31 -0400] bean__: VadimT: default will override what is in the recipe
[2013-05-08 15:13:10 -0400] VadimT: <bean__> if i want to change several attributes during apache installation at my node where i must set attributes?
[2013-05-08 15:14:14 -0400] gchristensen: test-kitchen is using a box from opscode running chef 10.14. is this the expected default behavior?
[2013-05-08 15:14:27 -0400] jtimberman: gchristensen: maybe
[2013-05-08 15:15:00 -0400] jtimberman: gchristensen: which box? did you specify require_chef_omnibus in the .kitchen.yml?
[2013-05-08 15:15:40 -0400] gchristensen: jtimberman: you're a saint.
[2013-05-08 15:16:20 -0400] gchristensen: jtimberman: I had not, I hadn't thought about looking in to using omnibus, I was only looking for having it upgrade chef. that should do it. thank you
[2013-05-08 15:16:45 -0400] jtimberman: gchristensen: there's still a lot of tribal knowledge wrapped up in tk1.0
[2013-05-08 15:17:17 -0400] gchristensen: I've noticed :) every time I try and set up my own Cheffle for dependencies I have to google around until I find some mailing-list email
[2013-05-08 15:18:22 -0400] bean__: VadimT: i'd do it in defaults
[2013-05-08 15:26:34 -0400] cburroughs: I feel like I'm missing something obvious.  What's the right command to set a node's environment with knife?
[2013-05-08 15:26:49 -0400] rayrod2030: -E?
[2013-05-08 15:27:21 -0400] bean__: cburroughs: "knife node edit nodename?"
[2013-05-08 15:27:31 -0400] rayrod2030: -E environemtn_name or --environment environment_name
[2013-05-08 15:28:01 -0400] rayrod2030: sorry thought you meant on bootstrap
[2013-05-08 15:28:53 -0400] cburroughs: knife node edit nodename -E env just brings up a text editor
[2013-05-08 15:29:36 -0400] cburroughs: maybe to reprase, what's the right way to do it from cmd line args, not from manually editing a json file
[2013-05-08 15:29:37 -0400] zts: cburroughs: I use the knife-flip plugin -  https://github.com/jonlives/knife-flip
[2013-05-08 15:30:02 -0400] gswallow01: Can anyone here help out with a hosted chef question?  I'm new to hosted chef.
[2013-05-08 15:30:19 -0400] gswallow01: I'm logged into manage.opscode.com, and I see my account, or client.
[2013-05-08 15:30:24 -0400] gswallow01: I have full perms.
[2013-05-08 15:30:36 -0400] gswallow01: I just had our lead dev edit my client data and set admin: true
[2013-05-08 15:30:50 -0400] gswallow01: But I still can't edit / upload environments and the like.
[2013-05-08 15:30:55 -0400] cburroughs: zts, I was already using flip for 'flipping', I guess I didn't realize it could be used to change from _default as well
[2013-05-08 15:31:09 -0400] cburroughs: feels werid that it's not build in to knife the way changing runlists and such is
[2013-05-08 15:31:36 -0400] jonlives: that very weird feeling was why it got written in the first place :p
[2013-05-08 15:33:48 -0400] cburroughs: well, that will work.  Thanks
[2013-05-08 15:40:29 -0400] VadimT: <bean__> after chef-client runnint and apache installation they override to default
[2013-05-08 15:41:16 -0400] adnichols: Does anyone have a good primer for developers who are stepping into helping manage an existing chef installation using both Vagrant & chef-server? Trying to find something I can point folks to that'll get them up to speed on terminology and such w/out introducing them to the "chef setup" bits that are common in most stuff I find
[2013-05-08 15:41:20 -0400] bean__: VadimT: not unless you have different things in overrides,  the environment will override the recipe
[2013-05-08 15:42:11 -0400] jtimberman: adnichols: learnchef.com?
[2013-05-08 15:42:11 -0400] VadimT: <bean__> i was checked you advice now add recipe and several attributes to default
[2013-05-08 15:42:35 -0400] VadimT: <bean__> and run chef-client and apache was installed with default attributes
[2013-05-08 15:43:12 -0400] bean__: VadimT: read http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_precedence.html
[2013-05-08 15:43:30 -0400] bean__: VadimT: so is your recipe using default or override.
[2013-05-08 15:44:15 -0400] adnichols: @jtimberman yeah, that ones probably good for the common use cases section. I probably have expectations that are better suited by creating my own docs I guess
[2013-05-08 15:44:39 -0400] jtimberman: adnichols: if you have workflow topics specific to your environment, definitely.
[2013-05-08 15:46:01 -0400] VadimT: <bean__> for now my recipe used default...
[2013-05-08 15:46:01 -0400] adnichols: jtimberman I think it's more that I want them to focus on Vagrant + chef-solo vs. all the knife setup & repo setup
[2013-05-08 15:46:15 -0400] VadimT: <bean__> i already read this link =)
[2013-05-08 15:46:24 -0400] adnichols: jtimberman workflow, as far as they are concerned, is submit a PR - they are used to that
[2013-05-08 15:46:32 -0400] bean__: VadimT: okay, so you see that environment will override stuff in default on recpie, on that link?
[2013-05-08 15:50:37 -0400] VadimT: <bean__> and
[2013-05-08 15:50:46 -0400] RayS: getting "NoMethodError: undefined method `run_state' for Chef::Resource::RunitService" when trying to use vagrant, chef runs the cookbooks just fine on 'real' servers
[2013-05-08 15:51:00 -0400] gmcinnes: Hi guys: One of my hosted chef manage machines has changed IP.  How do I tell the chef server that?
[2013-05-08 15:51:21 -0400] bean__: VadimT: so, the environment will override if there are attributes defined
[2013-05-08 15:51:56 -0400] VadimT: your advice to set this attributes to environment
[2013-05-08 15:52:51 -0400] bean__: where are you setting it currently
[2013-05-08 15:52:55 -0400] bean__: i thought you were setting it in the env
[2013-05-08 15:53:34 -0400] VadimT: <bean__> i want to override several attributes for apache recipe for one node
[2013-05-08 15:53:44 -0400] bean__: then I would set them on the node level
[2013-05-08 15:53:58 -0400] VadimT: yeap
[2013-05-08 15:54:05 -0400] VadimT: but at which place?
[2013-05-08 15:57:09 -0400] ssd7: The only attributes set at the node level that are preserved are the "normal" level
[2013-05-08 15:57:16 -0400] ssd7: the others are completely reset at the beginning of the run
[2013-05-08 15:58:42 -0400] bean__: yeah, on a node it needs to be in normal
[2013-05-08 15:58:51 -0400] bean__: VadimT:
[2013-05-08 15:59:30 -0400] VadimT: ok thx you guys... i will try set at normal
[2013-05-08 16:00:47 -0400] wdpro_kevin: is there a separate IRC channel for test-kitchen questions?
[2013-05-08 16:01:26 -0400] rayrod2030: wdpro_kevin: Not that I know of.  Test-kitchen questions get answered in here pretty quick.
[2013-05-08 16:02:11 -0400] jtimberman: wdpro_kevin: not specifically, though #chef-hacking is a good place too.
[2013-05-08 16:03:04 -0400] wdpro_kevin: thanks joshua
[2013-05-08 16:03:09 -0400] rayrod2030: jtimberman: What opscode community cookbook would you say has the latest example of test-kitchen config and test coverage?  nginx?
[2013-05-08 16:05:50 -0400] jtimberman: rayrod2030: zsh
[2013-05-08 16:05:59 -0400] jtimberman: rayrod2030: uses bats for post-converge test
[2013-05-08 16:06:13 -0400] jtimberman: it's far more simple overall than nginx.
[2013-05-08 16:06:19 -0400] rayrod2030: was just looking at bats.  very cool.
[2013-05-08 16:06:23 -0400] jtimberman: nginx is cool, but E_TOOMANYSUITES
[2013-05-08 16:06:43 -0400] rayrod2030: I see apt has a few as well
[2013-05-08 16:08:01 -0400] jtimberman: yeah
[2013-05-08 16:08:14 -0400] jtimberman: nginx needs to be refactored.
[2013-05-08 16:09:08 -0400] jtimberman: after switching the zsh cookbook to use bats, i much prefer that approach than minitest, as it required 60 fewer lines of code to get the same test (do i have a 'zsh' command in my $PATH)
[2013-05-08 16:10:15 -0400] rayrod2030: yes bats seems perfect for that kind of stuff.  I'm working on a 12-factor app deployment cookbook that will probably end up with a few bats tests to confirm all the environment variables that are typically set.
[2013-05-08 16:10:41 -0400] rayrod2030: I see fnichol uses it for rbenv cookbook as well.
[2013-05-08 16:11:59 -0400] rayrod2030: Anybody else in here doing any chef based deployments with 12 factor compliant apps?
[2013-05-08 16:13:28 -0400] svparijs: Hey guys small question can you give me any pointers where to look for: ERROR: OpenSSL::SSL::SSLError: SSL_connect SYSCALL returned=5 errno=0 state=SSLv3 read server session ticket A
[2013-05-08 16:14:51 -0400] svparijs: I think its a misconfiguration somewhere but im not sure if its Chef related or environment related like a missing cert or something like that.
[2013-05-08 16:21:09 -0400] gchristensen: jtimberman: do you have documentation on the .kitchen.yml? I'm not turning anything up, and my copy-paste from existing projects doesn't seem to be doing the trick.
[2013-05-08 16:21:18 -0400] gchristensen: (specifically for the omnibus setting)
[2013-05-08 16:22:08 -0400] gswallow01: oh wow.  you can set permissions on individual objects in hosted chef?
[2013-05-08 16:22:40 -0400] gchristensen: gswallow01: you can. the only time I've used it, I wielded it irresponsibly and took hours to fix it :P
[2013-05-08 16:22:54 -0400] juliancdunn: gchristensen: TK's still in rapid development. I suspect the docs haven't been updated on the 1.0 branch
[2013-05-08 16:22:56 -0400] gswallow01: Yeah I'm not sure I like this.
[2013-05-08 16:23:05 -0400] artcurmudgeon: having an issue with trying to create a new node and data bag after deleting the old one. when I try to run chef-client I get errors saying client already exists, where else would I remove this from other than nodes and databag(I am using the web gui for this) or what else would work better?
[2013-05-08 16:23:28 -0400] gswallow01: artcurmudgeon: knife client delete x
[2013-05-08 16:23:37 -0400] gswallow01: then remove your client.pem and re-run chef-client
[2013-05-08 16:23:39 -0400] gchristensen: juliancdunn: do you have any good implementations of it, then? I don't need docs, just enough to get omnibus going.
[2013-05-08 16:25:15 -0400] juliancdunn: gchristensen: check out the .kitchen.yml in the opscode Java cookbook
[2013-05-08 16:25:55 -0400] gchristensen: can-do. thank you for the heads up
[2013-05-08 16:27:15 -0400] juliancdunn: np
[2013-05-08 16:31:20 -0400] artcurmudgeon: gswallow01: that did the trick, thank you!
[2013-05-08 16:34:20 -0400] jujupoker: Is there a way to check if a windows service exists using the service resource?
[2013-05-08 17:14:24 -0400] kindsol: kallistec: ping
[2013-05-08 17:14:33 -0400] kallistec: kindsol: yo
[2013-05-08 17:14:39 -0400] rayrod2030: yay or nay on naming a cookbook starting with a number?
[2013-05-08 17:15:01 -0400] sparr: rayrod2030: I have no idea, but if you have to ask, err on the side of caution
[2013-05-08 17:15:36 -0400] rayrod2030: sparr: pretty much the thinking that our team currently has but thought I'd ask just in case.
[2013-05-08 17:16:34 -0400] kindsol: kallistec: finally getting around to playing with deploy resource and application cookbook.  It is working great.  But I have a requirement to deploy code from tar balls in an object storage service (e.g. S3) so we don't depend on github being available.
[2013-05-08 17:18:31 -0400] kindsol: kindsol: any ideas how to do this?  Does adding a new type of SCM provider make sense?
[2013-05-08 17:18:43 -0400] kindsol: er, kallistec ^^
[2013-05-08 17:19:03 -0400] Janaka: hi, does any body know of any DotNet and/or powershell client libraries for the Chef API?
[2013-05-08 17:20:00 -0400] kallistec: kindsol: what kind of app is this?
[2013-05-08 17:20:38 -0400] kindsol: I actually have to support php, tomcat and rails application stacks
[2013-05-08 17:21:18 -0400] kallistec: kindsol: e.g., if you have a ruby app with bundler, then you need to make sure that you're not using git-based gems in the Gemfile or else all your work is for nothing
[2013-05-08 17:22:38 -0400] kindsol: kallistec: indeed.  we have our own mirror of ruby gems and pulling all gems from that or our own gem repo.
[2013-05-08 17:23:47 -0400] kallistec: kindsol: aside from those kinds of caveats, yeah, you can make a thing that looks like a SCM resource and use that. We did something like that with github's tarball api
[2013-05-08 17:25:17 -0400] kindsol: kallistec: do you think that is something worth contributing?
[2013-05-08 17:26:57 -0400] kallistec: kindsol: possibly. How generic would it be? Would others have to follow a strict convention for naming tarballs and such?
[2013-05-08 17:34:52 -0400] cwj: can someone take a peep at https://gist.github.com/cwjohnston/f469dbb61456eebc4932 and tell me why my helper methods arent available to minitest-chef-handler even though the module they should be in seems to be loaded?
[2013-05-08 17:35:04 -0400] kindsol: kallistec: good question.  I imagine one would specify a "bucket" and a tarball "prefix" (or partial filename string to match).  I am checking our implementation to see how things are sorted if there are multiple matches...
[2013-05-08 17:37:07 -0400] Janaka: cwj: i'm no expert, but should the function be defined as def self.database_exists?(config={}) in helper.rb
[2013-05-08 17:38:42 -0400] Janaka: cwj: I added a comment on the gist
[2013-05-08 17:38:48 -0400] cwj: Janaka: ah ok, i think you're on to something there
[2013-05-08 17:40:16 -0400] Janaka: cwj: I'm a newbie, but was looking at this the other day trying to modularize a recipe
[2013-05-08 17:44:11 -0400] kindsol: kallistec: looks like we would just to a natural sort on the matching multiple files, so the tarball naming convention would be fairly open.
[2013-05-08 17:44:55 -0400] kallistec: kindsol: for determining ordering of releases? What if you name them after git commit ids
[2013-05-08 17:49:38 -0400] ponyofdeath: hi, anyone can help me troubleshoot why this is not working http://paste.ubuntu.com/5645381
[2013-05-08 17:50:15 -0400] cwj: Janaka: prefixing method names with self. helped, thanks!
[2013-05-08 17:51:32 -0400] kindsol: yeah, if you want to be able to always grab the latest version,  the restriction is that there would need to be a natural sort order in your naming convention. (i.e. mycoolapp-<timestamp>-<sha>.tar) and then your deploy "prefix" would just be "mycoolapp".  If you wanted to deploy specific commit your "prefix" would be something more specific like "mycoolapp-<timestamp>-<sha>"
[2013-05-08 17:52:05 -0400] kindsol: :kallistec ^^
[2013-05-08 17:54:24 -0400] kindsol: kallistec: perhaps we should take this off-channel
[2013-05-08 17:55:45 -0400] kallistec: kindsol: if you mail to chef-dev list more people will be able to offer feedback
[2013-05-08 17:56:05 -0400] kindsol: will do thanks
[2013-05-08 17:56:08 -0400] paigeat: hey yall was just wondering if anybody knew why berkshelf when doing berks install the cookbooks that are fetched from git don't have their .git folders
[2013-05-08 17:56:20 -0400] paigeat: is there a way I can enable it
[2013-05-08 17:57:18 -0400] paigeat: I can understand not wanting to upload .git directories to the chef server with knife accidentally but I thought thats what .chefignore was fore
[2013-05-08 17:57:21 -0400] paigeat: for8
[2013-05-08 17:57:24 -0400] paigeat: god damn it I cant type
[2013-05-08 17:57:26 -0400] paigeat: for***
[2013-05-08 18:02:36 -0400] paigeat: https://github.com/RiotGames/berkshelf/issues/496
[2013-05-08 18:03:10 -0400] miah: berkshelf stores all the stuff it pulls into ~/.berkshelf
[2013-05-08 18:03:36 -0400] miah: though it doesnt store the .git stuff
[2013-05-08 18:04:01 -0400] miah: you could also just point to a local :path
[2013-05-08 18:04:16 -0400] miah: rather than pointing your Berksfile to a :git
[2013-05-08 18:04:47 -0400] troyready: ponyofdeath, for what it's worth, I have no idea.  I think the "chef" thing to do would be to covert it to a template, but I know how much of a non-answer that is
[2013-05-08 18:05:53 -0400] miah: ponyofdeath: use a template, or write ruby code to render the content of the file and pass it as the 'content' argument to the file resoruce
[2013-05-08 18:07:15 -0400] paigeat: miah: I have a special workflow
[2013-05-08 18:07:40 -0400] ponyofdeath: no way to do regex
[2013-05-08 18:07:51 -0400] paigeat: https://gist.github.com/paigeadele/662e4e8c99e10994f908
[2013-05-08 18:08:40 -0400] paigeat: I only use berkshelf for pulling in cookbooks atm
[2013-05-08 18:08:47 -0400] paigeat: thats pretty much all its good for
[2013-05-08 18:09:09 -0400] ponyofdeath: troyready, miah how do I ensure that ruby_block runs at the end of the policy?
[2013-05-08 18:09:29 -0400] paigeat: miah: also I need to point to git repos that I'm hosting publically because that is where I'm staging pull requests from to mainline
[2013-05-08 18:09:29 -0400] ponyofdeath: troyready, miah i think its executing before the ldap packages are installed
[2013-05-08 18:10:30 -0400] miah: ya, ruby_block is really not the way to do things
[2013-05-08 18:13:02 -0400] troyready: IIRC the ruby_block should be executed in the order it's listed in a recipe
[2013-05-08 18:13:23 -0400] troyready: So a package resource above it should get executed first
[2013-05-08 18:19:23 -0400] jujupoker: Is there a way to check if a windows service exists using the service resource?
[2013-05-08 18:32:33 -0400] coderanger: sascha_d: Grr, twitter spam prevention kicking in I think
[2013-05-08 18:32:46 -0400] coderanger: sascha_d: I use emails like noah+example.com{at}coderanger.net (except places that block +), if you use GMail it will also tag for you.
[2013-05-08 18:33:27 -0400] sascha_d: oh so if I something+ to my regular email, that will still make it though?
[2013-05-08 18:33:40 -0400] coderanger: On most servers, yes
[2013-05-08 18:33:46 -0400] sascha_d: neat. I had no idea
[2013-05-08 18:33:48 -0400] coderanger: Exchange is a notable exception
[2013-05-08 18:34:03 -0400] maplebed: qmail used to use - as the comment character instead.
[2013-05-08 18:34:17 -0400] coderanger: As a handy tip for gmail, it also removes all .s when routing
[2013-05-08 18:34:26 -0400] coderanger: so coderanger.......@gmail works
[2013-05-08 18:34:40 -0400] maplebed: but +1 comments in email addresses.  totally useful.
[2013-05-08 18:34:54 -0400] sascha_d: that is super
[2013-05-08 18:34:55 -0400] coderanger: Sometimes useful if you use gmail, are on a site that blocks +s, and need to register a second acct
[2013-05-08 18:35:28 -0400] coderanger: sascha_d: Also sites like mailinator are super useful if you just want to sign up once and never see anything ever again
[2013-05-08 18:35:41 -0400] coderanger: They issue randomized disposable addresses that will only work for a few hours
[2013-05-08 18:35:54 -0400] sascha_d: yeah I use mailinator
[2013-05-08 18:36:20 -0400] sascha_d: but there are some places I don't mind giving my email address to until I start getting invitation to php conferences
[2013-05-08 18:37:45 -0400] coderanger: Yep, I just use tagged addresses for everything out of habit now
[2013-05-08 18:43:16 -0400] nathanmilford: From within a ruby_block, is there a way to load any methods in my cookbook's libraries?
[2013-05-08 18:43:57 -0400] miah: you dont need to use ruby_block to execute library methods in a cookbook recipe.
[2013-05-08 18:44:33 -0400] nathanmilford: But if I want to use a ruby block for another reason (like eval something after convergence)
[2013-05-08 18:44:40 -0400] nathanmilford: and I wish to use a method i've written
[2013-05-08 18:44:48 -0400] miah: write a library style cookbook and ignore cookbook recipes
[2013-05-08 18:44:57 -0400] miah: and your life will be joyous
[2013-05-08 18:45:06 -0400] miah: =)
[2013-05-08 18:45:23 -0400] miah: recipes are simply for adding resources to the resource collection
[2013-05-08 18:53:29 -0400] Death_Syn: anyone know a good resource for building a gem server with chef?
[2013-05-08 18:53:40 -0400] Death_Syn: google seems to think i'm trying to build a chef-server with gems
[2013-05-08 18:54:35 -0400] Death_Syn: oh, https://github.com/opscode-cookbooks/gems looks like what i want
[2013-05-08 19:00:40 -0400] rayrod2030: will test-kitchen automatically run bats tests?
[2013-05-08 19:01:57 -0400] josephholsten: rayrod2030: yep!
[2013-05-08 19:02:21 -0400] josephholsten: eg https://github.com/fnichol/chef-rbenv
[2013-05-08 19:03:31 -0400] rayrod2030: I see what I did there.  I kitchen converged which I'm assuming doesn't kick off the test harnesses.
[2013-05-08 19:05:23 -0400] josephholsten: hmm, did I miss the code review link?
[2013-05-08 19:09:38 -0400] kallistec: Chef code review about to start: watch here: http://youtu.be/7aeOwjQ__4I or join us: https://plus.google.com/hangouts/_/8495792f33f036b0b328770ebd63256310c16d69?authuser=0&hl=en
[2013-05-08 19:10:14 -0400] flipture: Anyone sen anything like this when using the community java cookbook?
[2013-05-08 19:10:19 -0400] flipture: DEBUG: Re-raising exception: Chef::Exceptions::ValidationFailed - Option checksum's value 5391a86ac11dcd62849de2b354048d83881d2a94 does not match regular expression /^[a-zA-Z0-9]{64}$/
[2013-05-08 19:11:06 -0400] flipture: The cookbook is using java_ark to install the archive and its saying that the checksum for the archive doesn't match the regex. Looks like the regex comes from the mixin libs
[2013-05-08 19:13:52 -0400] flipture: From here: /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-10.24.0/lib/chef/mixin/params_validate.rb:196:in `_pv_regex'
[2013-05-08 19:15:10 -0400] flipture: And the checksum regex from the java cookbook... attribute :checksum, :regex => /^[a-zA-Z0-9]{64}$/, :default => nil
[2013-05-08 19:24:02 -0400] tlr00: Anyone run chef on centos 6.3
[2013-05-08 19:24:15 -0400] tlr00: and receive an EOF error: ATAL: EOFError: end of file reached
[2013-05-08 19:24:46 -0400] tlr00: Pretty funky since I made sure my cookbooks were not corrupted.
[2013-05-08 19:34:24 -0400] bhenerey: can anyone point me at working/current instructions for using test-kitchen?
[2013-05-08 19:35:17 -0400] bhenerey: seems changes in vagrant, and whether or not to use bundler force me down a path of being stuck with chef-10.18.0
[2013-05-08 19:41:28 -0400] djustin: anyone have a link to an FTP file pull example?  I have the ruby code to do it, but would rather use the http_request resource
[2013-05-08 19:48:50 -0400] zts: flipture: I ran into that the other day, but worked around it by just giving it a sha256 checksum (is it supposed to accept other kinds too?)
[2013-05-08 19:48:53 -0400] flipture: Regarding my issue above, looks liek the guys who wrote the java cookbook just added checksums that were 40 characers long instead ofthe required 64
[2013-05-08 19:48:57 -0400] flipture: yeah :) just found it...
[2013-05-08 19:49:16 -0400] flipture: zts: thanks. I'd just added 80212f7748c2671b89b6085000717c747851db004409dce3bb97f3a2aeb91cdd to my attributes...
[2013-05-08 19:49:23 -0400] flipture: i made a pull request
[2013-05-08 19:49:27 -0400] zts: cool :)
[2013-05-08 20:01:21 -0400] gswallow01: Ok, is there documentation on permissions, on Hosted Chef?
[2013-05-08 20:01:26 -0400] gswallow01: I'm just not getting it.
[2013-05-08 20:02:02 -0400] gswallow01: oh wait I see them
[2013-05-08 20:08:47 -0400] cmceldowney: is there any way to use chef-apply with a chef-server? e.g. I just want to do an ad hoc run-list on a node, but I still want that recipe to be able to use chef-server stuff (such as search, data bags, etc)
[2013-05-08 20:10:54 -0400] djustin: any reason why this step would take 5 minutes?  [2013-05-08T13:07:39-07:00] INFO: [inet6] no default interface, picking the first ipaddress
[2013-05-08 20:11:08 -0400] djustin: chef-client run
[2013-05-08 20:21:51 -0400] zts: cmceldowney: you might want chef-client's --override-runlist option instead of chef-apply
[2013-05-08 20:22:48 -0400] cmceldowney: zts: but doesn't that overwrite the run-list, as opposed to just running a one-time recipe
[2013-05-08 20:23:31 -0400] zts: cmceldowney: no, the run list is restored at the end of the run
[2013-05-08 20:25:05 -0400] cmceldowney: zts: I see, so --override-runlist is different than -o which replaces the run list with the current item?
[2013-05-08 20:27:21 -0400] zts: cmceldowney: no, they are the same.  It overrides the run list _for that run only_, it does not update the run list on the server, and subsequent chef-client runs (without -o) will use that
[2013-05-08 20:27:35 -0400] cmceldowney: zts: awesome. thanks!
[2013-05-08 20:27:47 -0400] zts: no problem :)
[2013-05-08 20:31:37 -0400] Otterley: djustin, run chef with the log level set to debug, that may help you identify the cause
[2013-05-08 20:41:51 -0400] shane_: is there a guide for updating chef-server 10.24 to 11.x ?
[2013-05-08 20:42:03 -0400] shane_: i've gem updated it but chef-server will not start, webui etc
[2013-05-08 20:42:21 -0400] shane_: looks like the only 11.4 gem is for "chef" and none of the chef-server ones got updated
[2013-05-08 20:44:46 -0400] prana: shane_: were you using the omnibus installer?
[2013-05-08 20:44:58 -0400] shane_: no, just gem update from cli
[2013-05-08 20:45:47 -0400] prana: shane_: chef-server is not implemented in ruby, so it may not be a gem.
[2013-05-08 20:45:50 -0400] gleam: i think chef server is only available from omnibus now
[2013-05-08 20:45:52 -0400] prana: (chef-server 11)
[2013-05-08 20:46:08 -0400] shane_: ugh, so how would i migrate all my data to the new install ?
[2013-05-08 20:46:32 -0400] gleam: knife server backup (....) && knife server restore
[2013-05-08 20:46:34 -0400] shane_: dump stuff to json and reimport?
[2013-05-08 20:46:37 -0400] gleam: and reupload all your cookbooks/recreate users
[2013-05-08 20:46:38 -0400] gleam: yep
[2013-05-08 20:47:09 -0400] shane_: any way to keep client.pem's intact?
[2013-05-08 20:47:51 -0400] gleam: that's a perfectly good question
[2013-05-08 20:47:53 -0400] gleam: and i don't know
[2013-05-08 20:48:49 -0400] gleam: i'd say use knife bootstrap to have them regenerate
[2013-05-08 20:49:20 -0400] gleam: this has an example bootstrap file: http://docs.opscode.com/chef/migrate_to_hosted.html
[2013-05-08 20:49:26 -0400] gleam: ("the migration template")
[2013-05-08 20:50:57 -0400] shanlar: https://gist.github.com/shanlar/ab77aeadee82a80933c4
[2013-05-08 20:51:18 -0400] shanlar: can anyone tell me how to make it so this attribute doesnt keep getting set on subsequent runs?
[2013-05-08 20:52:35 -0400] shane_: looks like you can change a key for a client via knife client edit ?
[2013-05-08 20:53:29 -0400] gleam: maybe, but i'd be inclined just to have the nodes re-register with the new server from scratch
[2013-05-08 20:53:58 -0400] zts: shane_: you probably want node.set, not node.default
[2013-05-08 20:54:09 -0400] nebrera: helllo
[2013-05-08 20:54:17 -0400] gleam: you want to base your random value on some static data
[2013-05-08 20:54:26 -0400] gleam: look at the chef client cookbook and see how it handles the splay calculationi
[2013-05-08 20:54:27 -0400] zts: shane_: node.default gets cleared at each run, node.set will be saved to the chef server
[2013-05-08 20:54:52 -0400] helllen_: hi
[2013-05-08 20:54:52 -0400] gleam: https://github.com/opscode-cookbooks/chef-client/blob/master/recipes/cron.rb
[2013-05-08 20:54:59 -0400] gleam: look from line 82 on
[2013-05-08 20:55:44 -0400] helllen_: I have installed chef-server into cents with my rpm and the test looks ok (70 test passed and 0 errors)
[2013-05-08 20:56:02 -0400] helllen_: the problem is there is no application listening on 4000 port
[2013-05-08 20:56:24 -0400] gleam: if it's chef 11 it should be listening on 443
[2013-05-08 20:57:04 -0400] miah: netstat -lnp|grep chef
[2013-05-08 20:57:05 -0400] miah: =)
[2013-05-08 20:57:59 -0400] helllen_: ahm
[2013-05-08 20:59:00 -0400] helllen_: oki doki
[2013-05-08 20:59:02 -0400] helllen_: works
[2013-05-08 20:59:46 -0400] helllen_: the problem is I wanted to use this server to have a webpage listening on port 443
[2013-05-08 20:59:50 -0400] helllen_: what should I do ?
[2013-05-08 21:00:05 -0400] miah: setup virtual hosts?
[2013-05-08 21:00:49 -0400] shanlar: ty zts
[2013-05-08 21:00:50 -0400] miah: add virtualized or additional network interfaces with additional ip's and bind things appropriately
[2013-05-08 21:04:50 -0400] zts: helllen_: there's some fixes in chef server 11.0.8 that will let you run it on different ports - see http://tickets.opscode.com/browse/CHEF-4029
[2013-05-08 21:04:58 -0400] helllen_: with the nginx ?
[2013-05-08 21:05:26 -0400] helllen_: is 11.08 available ?
[2013-05-08 21:09:48 -0400] helllen_: I don't mind use https but I want to use with other virtual host
[2013-05-08 21:10:06 -0400] Otterley: @shane_, there is a knife plugin that will do a complete migration including cookbooks and client keys
[2013-05-08 21:10:29 -0400] shane_: nice, what's that one called ?
[2013-05-08 21:10:34 -0400] helllen_: the problem is, can I modify nginx from embedded version ?
[2013-05-08 21:10:51 -0400] Otterley: @shane_ https://github.com/mdxp/knife-backup
[2013-05-08 21:11:09 -0400] Otterley: we used it without a hitch
[2013-05-08 21:12:58 -0400] shane_: i will check it out thank you
[2013-05-08 21:13:02 -0400] helllen_: and how do I have access to chef-server-webui ?
[2013-05-08 21:13:24 -0400] Otterley: @helllen_ what sort of modifications do you need?
[2013-05-08 21:13:42 -0400] helllen_: I would like to add a simple web page use chef api
[2013-05-08 21:13:45 -0400] helllen_: to manage it
[2013-05-08 21:14:05 -0400] Otterley: it may be easier to put a proxy in front of it than to muck with the guts
[2013-05-08 21:14:27 -0400] helllen_: like chef-server-webui but only with a form with the fields I have to modify easily
[2013-05-08 21:14:36 -0400] helllen_: interact with chef-server
[2013-05-08 21:17:36 -0400] helllen_: is that possible ?
[2013-05-08 21:17:42 -0400] helllen_: I wanted on 443 port
[2013-05-08 21:17:49 -0400] helllen_: actually I had it with last version
[2013-05-08 21:17:56 -0400] ermajn: hello, i have problem understanding chef server. I have installed open source version on one host, and I have client configured on other host... where I should have cookbook stored...
[2013-05-08 21:18:13 -0400] j^2: ermajn: on the workstation
[2013-05-08 21:18:21 -0400] j^2: one sec, here's a great video
[2013-05-08 21:18:52 -0400] ermajn: j^2: client == workstation ? So, every client have its own cookbook repo ?
[2013-05-08 21:19:03 -0400] j^2: http://www.confreaks.com/videos/2309-bigruby2013-testing-your-automation-ttd-for-chef-cookbooks
[2013-05-08 21:19:04 -0400] j^2: nope
[2013-05-08 21:19:15 -0400] ermajn: there is no way that they are centralized and I coose to use, for example.. one cookbook for 4 workstations ?
[2013-05-08 21:19:40 -0400] j^2: client/node =/= workstation, it _can_ be but they arent required
[2013-05-08 21:20:09 -0400] djustin: Otterly, found the issue...exception on transmitting windows::uptime to the chef server....stuck for what seems like a 240 second timeout
[2013-05-08 21:20:10 -0400] j^2: yep that's the beauty of chef
[2013-05-08 21:20:31 -0400] djustin: [2013-05-08T14:18:42-07:00] DEBUG: Plugin windows::uptime threw exception #<NoMethodError: undefined method `SystemUpTime' for nil:NilClass>
[2013-05-08 21:22:43 -0400] djustin: and look at that, the uptime is null on the my chef server url
[2013-05-08 21:22:48 -0400] ermajn: j^2: wait, server - client - workstation
[2013-05-08 21:22:53 -0400] ermajn: I have only two.. server and client
[2013-05-08 21:22:54 -0400] maplebed: When I include a cookbook::recipe in a runlist, are all attributes in the cookbook/attributes/* loaded or only attributes/default.rb?
[2013-05-08 21:22:55 -0400] ermajn: :-)
[2013-05-08 21:23:38 -0400] Kzim: Hi
[2013-05-08 21:23:49 -0400] nondescript1: greetings all
[2013-05-08 21:24:06 -0400] j^2: ermajn: so yah you can have a workstation client then
[2013-05-08 21:24:33 -0400] nondescript1: I've been playing with chef-server and wondering about the upgrade process.  On a minor upgrade, save 11.0.4 to 11.0.8, would it just be as simple as installing the new package and reconfiguring?
[2013-05-08 21:25:01 -0400] gleam: yes
[2013-05-08 21:25:41 -0400] Kzim: Anyone use an orchestrator to deplay for do maintenance on cluster handled by Chef ?
[2013-05-08 21:25:49 -0400] ermajn: j^2: look like your video explains it... thansk
[2013-05-08 21:26:10 -0400] j^2: :D
[2013-05-08 21:26:11 -0400] maplebed: I think http://docs.opscode.com/essentials_cookbook_attribute_files.html is telling me that all files under attributes/ will be loaded whenever any recipe in that cookbook is included.
[2013-05-08 21:26:32 -0400] nondescript1: cool - simple enough
[2013-05-08 21:29:18 -0400] apes: Is there a way to remove a recipe from a run_list?
[2013-05-08 21:29:20 -0400] eliklein: has anyone used test-kitchen with travis-ci?
[2013-05-08 21:29:41 -0400] j^2: apes: knife node remove run_list 'recipe[something]' node_name
[2013-05-08 21:30:23 -0400] eliklein: or any other cloud based CI system?
[2013-05-08 21:31:52 -0400] gchristensen: eliklein: I don't think you can virtualize inside their virtualization. I have a desktop next to me that I use.
[2013-05-08 21:32:48 -0400] eliklein: gchristensen: yeah, i suppose the alternative would be to simply run the cookbook and then run specs
[2013-05-08 21:33:42 -0400] bytheway: got a problem where I've got 2 recipes that set attributes, and then include another recipe that then uses those attributes to drive a configuration. both are including the same external recipe
[2013-05-08 21:34:28 -0400] bytheway: when I add both recipes to the run list, the recipe that actually does the work is included as part of the first recipe of the run list, but when the 2nd recipe includes it again, after setting up more attributes, chef says, "I've already seen that recip, skipping"
[2013-05-08 21:34:55 -0400] djustin: If a recipe is included more than once in a recipe, only the first inclusion will be processed and any subsequent inclusion will be ignored.
[2013-05-08 21:34:56 -0400] bytheway: so basically the attributes I'm setting up in the 2nd recipe are totally ignored
[2013-05-08 21:35:27 -0400] bytheway: right, I'm realizing that, and trying to figure out how to get around that problem and still do things resembling the "berkshelf way"
[2013-05-08 21:35:52 -0400] bytheway: setting attributes, including recipes, and still having all recipes be able to run by being included in a run list by themselves
[2013-05-08 21:41:25 -0400] Kzim: anyone using Ansible with chef ?
[2013-05-08 21:44:11 -0400] bytheway: maybe it makes the most sense to turn those attribute setting recipes into "private" recipes that another recipe includes before calling the external, library-style recipe
[2013-05-08 21:47:18 -0400] apes: j^2 Any way to remove a recipe added by a role during a chef run?
[2013-05-08 21:47:35 -0400] maplebed: bytheway: I may be off the track here, but when I see multiple things setting attributes that then are expected to go into a recipe, it makes me thing maybe the thing that's being set differenently in different places should be a LWRP insetad of attribute-driven.
[2013-05-08 21:47:41 -0400] bytheway: it is kind of too bad recipes are only looked at once. I can imagine times when I might need to run a recipe, do something, and then run it again
[2013-05-08 21:48:24 -0400] bytheway: for sure, lwrp might be the right answer.  Not wanting to overengineer too early at this point
[2013-05-08 21:49:08 -0400] bytheway: starting with recipes, then will pull into lwrp as needed
[2013-05-08 21:49:29 -0400] j^2: apes: can you explain that a little more?
[2013-05-08 21:49:44 -0400] rplevy: I updated some data bags using "from file". is there any way to see a diff of the change? or in general, logs showing chef changes?
[2013-05-08 21:50:06 -0400] maplebed: rplevy: data bags aren't versioned, so unless you have the old values somewhere else, no.
[2013-05-08 21:51:20 -0400] rplevy: maplebed: thanks
[2013-05-08 21:54:33 -0400] denken: i have yet to find a good answer to the 'how do i keep the chef server in sync with git' question
[2013-05-08 21:54:55 -0400] denken: mashing together rake tasks, knife plugins, and whatever else seems to be the best answer ive found so far
[2013-05-08 21:55:47 -0400] j^2: denken: i hear knife spork is great for it
[2013-05-08 21:55:49 -0400] j^2: specificly
[2013-05-08 21:55:57 -0400] j^2: https://github.com/jonlives/knife-spork
[2013-05-08 21:56:11 -0400] bytheway: best answer I've seen is only allow continuous deployment to push to the chef server
[2013-05-08 21:56:34 -0400] bytheway: so only things that are checked into git get pushed up, on checkin
[2013-05-08 21:56:49 -0400] maplebed: knife upload as a post-commit hook in git?
[2013-05-08 21:56:56 -0400] denken: bytheway: thats my general plan... but the 'how' of pushing those changes remains
[2013-05-08 21:57:05 -0400] denken: and what about objects on the server that have been removed from git?
[2013-05-08 21:57:24 -0400] aslan: hey guys is there a difference between installing chef client with gem install or omnibus method? if so what is it?
[2013-05-08 21:58:11 -0400] denken: aslan: afaik, gem install gives you an actual gem, where the omnibus installer puts everything in /opt
[2013-05-08 21:58:41 -0400] chris613: in my experience the omnibus package is more stable since you don't have to share gems with whatever your system/application requires
[2013-05-08 21:58:56 -0400] aslan: doesn't gem instal put the chef-client bin in the /usr/bin ?
[2013-05-08 21:59:26 -0400] denken: aslan: /usr/local/bin/ on my distro
[2013-05-08 21:59:37 -0400] chris613: aslan: Yes, and with omnibus that's a symlink: /usr/bin/chef-client -> /opt/chef/bin/chef-client
[2013-05-08 22:00:02 -0400] aslan: denken: other than putting stuff in different directories is there a architectural difference between two methods?
[2013-05-08 22:00:14 -0400] chris613: They should be functionally the same
[2013-05-08 22:00:21 -0400] denken: aslan: no, just operational differences
[2013-05-08 22:00:27 -0400] denken: see chris613's first comment
[2013-05-08 22:01:14 -0400] aslan: cool. so the end results is pretty much the same
[2013-05-08 22:01:20 -0400] denken: yep
[2013-05-08 22:01:27 -0400] aslan: i miss the bootstrap method
[2013-05-08 22:01:31 -0400] chris613: yeah, far fewwer headaches after migrating. Plus we use the handy-dandy omnibus_updater cookbook to manage upgrades; my experiences trying to co-ordinate that with gem installs were not good, but that was many versions ago
[2013-05-08 22:01:33 -0400] denken: personally, i'd use the omnibus installer unless there is a reason to diverge
[2013-05-08 22:01:48 -0400] aslan: it did setup my runit and all that
[2013-05-08 22:02:01 -0400] chris613: aslan: You can still bootstrap with omnibus, use "-d chef-full"
[2013-05-08 22:02:29 -0400] aslan: chris613: oh thats great ... do you have the link to any url that goes through the steps?
[2013-05-08 22:03:04 -0400] denken: erm... for me, knife bootstrap <ip> installs a .deb on ubuntu nodes
[2013-05-08 22:03:06 -0400] denken: fwiw
[2013-05-08 22:03:26 -0400] chris613: http://wiki.opscode.com/display/chef/Installing+Omnibus+Chef+Client+on+Linux+and+Mac  perhaps?
[2013-05-08 22:03:31 -0400] denken: im all chef 11 though, which might matter
[2013-05-08 22:03:49 -0400] chris613: denken: I think the default changeds from gems to omnibus in chef 11
[2013-05-08 22:04:13 -0400] aslan: from what i have read it looks like you can have chef client 11 talk to chef server 10, is that so?
[2013-05-08 22:04:44 -0400] denken: i would hope so... but i dont know for sure. ive never tried it.
[2013-05-08 22:08:14 -0400] ryker: aslan: yes, you can.
[2013-05-08 22:08:39 -0400] aslan: ryker: so they are fully compatible?
[2013-05-08 22:08:43 -0400] ryker: i'm doing it now to test and get my code ready for chef 11 for produciton
[2013-05-08 22:09:30 -0400] ryker: well, I assume you can't use the features of chef 11 server if you're using a chef 10 server, such as partial search
[2013-05-08 22:10:38 -0400] ryker: but you can work out all of the breaking changes, like the node.default not being the default when setting a node attribute
[2013-05-08 22:12:07 -0400] cwj: can anyone help me with how filters work with minitest-chef-handler? i am getting the impression that if i only want to run tests for a particular cookbook (i.e. skip tests from other cookbooks in the run list) i need to have a filter regex that matches only tests from that cookbook?
[2013-05-08 22:16:25 -0400] jtimberman: cwj: did you see my PR comment?
[2013-05-08 22:16:33 -0400] jtimberman: unrelated to your minitest question :)
[2013-05-08 22:17:16 -0400] cwj: i did not
[2013-05-08 22:17:34 -0400] cwj: i see it now
[2013-05-08 22:17:45 -0400] cwj: i think i tried calling it events and it did not work out
[2013-05-08 22:17:55 -0400] cwj: i can try again
[2013-05-08 22:19:48 -0400] jtimberman: hm
[2013-05-08 22:20:36 -0400] jtimberman: oh yeah, events isn't going to work
[2013-05-08 22:20:39 -0400] jtimberman: =#<Chef::Formatters::Outputter:0x007fc8acab3200 @out=#<IO:<STDOUT>>, @err=#<IO:<STDERR>>>>]>
[2013-05-08 22:20:49 -0400] jtimberman: er,
[2013-05-08 22:20:49 -0400] jtimberman: => #<Chef::EventDispatch::Dispatcher:0x007fc8acae1da8 @subscribers=[#<Chef::Formatters::NullFormatter:0x007fc8acab3228 @output=#<Chef::Formatters::Outputter:0x007fc8acab3200 @out=#<IO:<STDOUT>>, @err=#<IO:<STDERR>>>>]>
[2013-05-08 22:20:59 -0400] cwj: yeah that sounds familiar
[2013-05-08 22:21:08 -0400] jtimberman: how about enable_events
[2013-05-08 22:21:23 -0400] surge_: Is there a way of doing the following in a recipe: If current instance that chef is running on contains SomeRole, then do X ?
[2013-05-08 22:21:44 -0400] jtimberman: surge_: if node.roles.include?("somerole")
[2013-05-08 22:21:58 -0400] jtimberman: er, node['roles'].include?("somerole") :)
[2013-05-08 22:22:24 -0400] cwj: jtimberman: sold
[2013-05-08 22:22:31 -0400] jtimberman: cwj: <3
[2013-05-08 22:22:32 -0400] surge_: jtimberman: Wow, thanks for the quick response!
[2013-05-08 22:22:40 -0400] ryanisnan: Hey guys: Is there a way to have chef fetch a dependency for me automatically?
[2013-05-08 22:35:47 -0400] denken: ryanisnan: need some context on that... a dependency of what?
[2013-05-08 22:56:24 -0400] btm_: Chef 10.26.0 is out: http://www.opscode.com/blog/2013/05/08/chef-10-26-0-released/
[2013-05-08 23:04:42 -0400] ryanisnan: denken: I am using a recipe (redisio) in a Vagrant setup, but it is throwing a CookbookNotFound exception for one of the dependencies (ulimit). I don't use ulimit, and I'd rather not have to manually grab the recipe. Is there a way that the recipe can fetch its dependencies automatically?
[2013-05-08 23:05:26 -0400] maplebed: ryanisnan: berkshelf will do that for you.
[2013-05-08 23:11:17 -0400] ryanisnan: maplebed: Seems like a sledgehammer for a thumb tac, but I suppose it will do.
[2013-05-08 23:11:22 -0400] ryanisnan: Thanks!
[2013-05-08 23:28:28 -0400] revattar: Hello everyone.  I have an issue.  I have a wrapper cookbook that includes the tomcat cookbook.  in my wrapper I am replacing the server.xml for tomcat and creating a properties file for my tomcat application.  Both template resources notify tomcat restart.
[2013-05-08 23:28:45 -0400] revattar: tomcat is restarting on every single run of chef
[2013-05-08 23:29:06 -0400] revattar: I'd like a restart if something changes in the server.xml or properties file but not if nothing has changed
[2013-05-08 23:29:28 -0400] revattar: any advice on how to get this working properly?  I'm using the opscode tomcat cookbook
[2013-05-08 23:32:25 -0400] troyready: revattar, that sounds like the server.xml template is getting modified multiple times during the chef run
[2013-05-08 23:32:36 -0400] troyready: i.e, the resources are fighting against each other
[2013-05-08 23:33:30 -0400] troyready: I had a similar situation with one recipe adding a value to a template and another recipe taking it away. If those resources are set to notify a restart, then you'll get the behaviour you're describing
[2013-05-08 23:33:41 -0400] revattar: exactly
[2013-05-08 23:33:47 -0400] revattar: once by the damn tomcat cookbook
[2013-05-08 23:33:55 -0400] revattar: and then by my wrapper overwriting
[2013-05-08 23:34:13 -0400] revattar: I'd like to not have to fork off the opscode tomcat cookbook and continue to use the community cookbook
[2013-05-08 23:34:34 -0400] revattar: but there are things I need to put in that server.xml file
[2013-05-08 23:34:49 -0400] troyready: if the existing template used in it doesn't meet your needs, then I don't think you have an option
[2013-05-08 23:34:50 -0400] revattar: so I recall the resource in my cookbook to write it from the template in the wrapper cookbook
[2013-05-08 23:35:29 -0400] troyready: You'll definitely want to fork it, and see about getting your changes pulled into opscode's cookbook
[2013-05-08 23:38:15 -0400] revattar: is there really no other way to solve this?
[2013-05-08 23:41:04 -0400] benkay: so here's a crazy/silly thing
[2013-05-08 23:41:10 -0400] benkay: bootstrapped myself a node
[2013-05-08 23:41:12 -0400] revattar: ah, chef-rewind looks promising
[2013-05-08 23:41:20 -0400] benkay: deleted it with knife
[2013-05-08 23:42:08 -0400] benkay: now when i attempt to bootstrap that node chef sez "failed to authenticate" and it calls itself "web16", even though it's called web15.
[2013-05-08 23:42:11 -0400] benkay: watwatwat
[2013-05-08 23:43:53 -0400] troyready: Ha, wow, good find. Still seems a little 'gross', but sounds exactly like what you're looking for
[2013-05-08 23:44:01 -0400] mihasya: hmm if a LWRP requires a certain package to be installed, what is the correct place to put that? I'm trying to put package "foo" inside action :bar in the provider, but it seems to just get ignored.
[2013-05-08 23:58:00 -0400] mihasya: nobody? :\

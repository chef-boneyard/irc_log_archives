[2014-06-05 00:06:09 -0400] strictlyb: anyone here using knife-spork and slackchat
[2014-06-05 00:52:08 -0400] drag00n: Simple question
[2014-06-05 00:52:25 -0400] drag00n: Where does berkshelf store my cookboks when I run berks update
[2014-06-05 00:56:57 -0400] sarkis: i believe default is ~/.berks/cookbooks/
[2014-06-05 00:59:48 -0400] sarkis: sorry drag00n it's ~/.berkshelf/ if your on 3.x+
[2014-06-05 01:00:03 -0400] sarkis: or BERKSHELF_PATH
[2014-06-05 01:01:11 -0400] drag00n: Got it
[2014-06-05 01:01:17 -0400] drag00n: It was the second one
[2014-06-05 01:01:19 -0400] drag00n: thanks
[2014-06-05 01:49:25 -0400] robguttman: on chef server 10.22.0 - yes, i know its older - search is not returning all (or in some cases any) nodes with the queried attributes.  ive tried blowing away the solr index directory and knife index rebuild, but same bad results.  i can see at least one node with thsi attribute in the chefserver webui so i dont get it.  any ideas?
[2014-06-05 01:50:40 -0400] robguttman: this is an old ticket that describes this issue well: https://tickets.opscode.com/browse/CHEF-2244?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&focusedCommentId=50034#comment-50034
[2014-06-05 03:30:00 -0400] robguttman: this also sounds like it could be the cause: https://tickets.opscode.com/browse/CHEF-2346 - but changing maxFieldLength did nto work for me
[2014-06-05 03:42:23 -0400] bpcse: hello
[2014-06-05 03:42:46 -0400] bpcse: Hell friends
[2014-06-05 03:45:32 -0400] robguttman: yeah, feels like were in hell, friend :)
[2014-06-05 03:45:48 -0400] bpcse: I am going to build a security management tool which can collect security data like (Password length, logon server name  etc) from domain wide and store in a central db. could you please suggest which tool can i use
[2014-06-05 03:48:08 -0400] bpcse: @robguttman please suggest
[2014-06-05 03:55:29 -0400] gkra: hmm.
[2014-06-05 03:55:35 -0400] gkra: why does:
[2014-06-05 03:56:08 -0400] gkra: node.default['this']['is']['arry'] |= [ "another" "array" ]
[2014-06-05 03:56:31 -0400] gkra: work in chef-shell -z, but not in a recipe?
[2014-06-05 03:58:54 -0400] gkra: nevermind, i'm not actually including the right recipe! yay me.
[2014-06-05 04:01:26 -0400] nonrecursive: I'm having trouble logging into the Web UI after the initial installation of Chef Server, following the steps from the install page. The Web UI says the initial password should be p@ssw0rd1 , but that doesn't appear to be the case. Is there a recommended way of resetting the admin password?
[2014-06-05 04:13:29 -0400] digitalchild: nonrecursive: don't use the web ui on the open source chef
[2014-06-05 04:13:34 -0400] digitalchild: it will be removed in future versions
[2014-06-05 04:16:10 -0400] nonrecursive: digitalchild: Thank you.
[2014-06-05 04:16:56 -0400] digitalchild: better to learn the knife stuff !
[2014-06-05 04:17:15 -0400] digitalchild: im all very new to this so that's about as helpful as I can be!
[2014-06-05 05:23:01 -0400] digitalchild: is anyone using a community cookbook for vmware-tools ?
[2014-06-05 05:23:35 -0400] digitalchild: i have an old style standard cookbook that uses the vmware repo but I can't seem to get that to work in the berkshelf cookbook i have :/
[2014-06-05 06:04:54 -0400] digitalchild: I have a base role with 8 recipes in it, how would i move this into berkshelf ?
[2014-06-05 07:06:31 -0400] HontoNoRoger: hello
[2014-06-05 07:06:51 -0400] HontoNoRoger: I got a somewhat philosophical question: why is the knife tool inside the chef-client package? isn't it a workstation tool? normal nodes don't really need knife, right?
[2014-06-05 07:07:03 -0400] HontoNoRoger: wouldn't it make more sense to separate knife from the normal client package?
[2014-06-05 08:06:56 -0400] yml: [o__o]: ping
[2014-06-05 08:06:56 -0400] [o__o]: Are you in need of my services, yml?
[2014-06-05 08:09:30 -0400] storme_away: HontoNoRoger: in similar oddities of packaging, knife is in chef and chefdk packages (one would think just the latter), and chef-client is also in chef and chefdk (one would think just the former)
[2014-06-05 08:12:54 -0400] HontoNoRoger: storme_away: mhh indeed. confusing anyway.
[2014-06-05 09:41:20 -0400] bcave: hello
[2014-06-05 09:42:09 -0400] matti: Ohai
[2014-06-05 09:42:48 -0400] CJNE: hi
[2014-06-05 09:43:49 -0400] bcave: haha, Ohai  :)
[2014-06-05 09:43:56 -0400] matti: :)
[2014-06-05 09:44:38 -0400] CJNE: dashes or underscore in cookbook names? i like the look of dashes more than underscore but underscore works with symbols, any opinions?
[2014-06-05 09:44:45 -0400] bcave: I come with questions :p
[2014-06-05 09:45:19 -0400] bcave: We've been using chef using client/server (opscode hosted) for just over a year now. However, I am looking into masterless chef / chef solo now for some use-cases
[2014-06-05 09:46:09 -0400] bcave: I've been on the opscode site, and most of the tutorials are geared around using a chef server, was wondering if anyone had a guideline on migrating from client/server to solo
[2014-06-05 09:48:55 -0400] benatkin: CJNE: mixed dashes and underscores, obvi
[2014-06-05 09:49:06 -0400] CJNE: bcave, are you using berkshelf?
[2014-06-05 09:49:12 -0400] bcave: yep CJNE
[2014-06-05 09:49:18 -0400] bcave: and a handful of custom cookbooks
[2014-06-05 09:49:20 -0400] CJNE: benatkin, yeah, that's what i have :P
[2014-06-05 09:49:41 -0400] benatkin: https://github.com/fnichol/chef-ruby_build
[2014-06-05 09:49:58 -0400] benatkin: technically the cookbook name is ruby_build
[2014-06-05 09:50:45 -0400] bcave: I've been making good progress with refactoring, but I've just gotten to the data bags, and it seems that knife data bag management is dependent on a server
[2014-06-05 09:51:45 -0400] CJNE: bcave: ah, that's a good compromise :)
[2014-06-05 09:52:48 -0400] bcave: The approach I'd like to take with solo is to pre-package a repo for use with solo using a similar approach that chef-client does, where required cookbooks are resolved and a distribution package is built
[2014-06-05 09:52:48 -0400] CJNE: bcave, normal data bags can just be created and uploaded to the node
[2014-06-05 09:53:24 -0400] bcave: i guess the option of encrypted data bags becomes redundant, becuase the secret would have to be on the node and the data is never actually hosted anywhere
[2014-06-05 09:53:32 -0400] CJNE: yeah
[2014-06-05 09:55:09 -0400] bcave: is it possible to use a single chef repo heterogeneously? i.e. for both client/server and solo mode?
[2014-06-05 09:56:45 -0400] bcave: CJNE: why did you ask if I was using bundler? can that be used to create distributable repos?
[2014-06-05 09:57:29 -0400] CJNE: i'm still trying to move over to the berkshelf way so i have limited experience but i think this is one of the good parts of doing it this way, it works just as well with chef solo
[2014-06-05 09:57:52 -0400] CJNE: i asked about berkshelf, not bundler :)
[2014-06-05 09:59:53 -0400] bcave: hahaha, ok ye i see that. oops :o
[2014-06-05 10:01:41 -0400] bcave: when i first started with chef, I'd install site cookbooks into my local chef repo and make local modifications to them
[2014-06-05 10:01:50 -0400] CJNE: if you haven't heard of berkshelf, google "the berkshelf way", watch the video
[2014-06-05 10:02:35 -0400] bcave: trying to get to the point of using unmodified cookbooks that aren't checked into our chef repo
[2014-06-05 10:02:43 -0400] bcave: thanks, I'll check it out now
[2014-06-05 10:04:04 -0400] CJNE: prepare yourself for some learning in case you decide to go for it
[2014-06-05 10:10:10 -0400] bcave: hahaha - 6:20 - that's about me.
[2014-06-05 10:11:14 -0400] CJNE: yeah, that's what i'm trying to move away from now
[2014-06-05 10:12:21 -0400] CJNE: i have a
[2014-06-05 10:14:20 -0400] AikiLinux: can i specify action purge along side a create action on a remotre_dir ?
[2014-06-05 10:14:42 -0400] CJNE: i have a vision that i'll be able to be able to automatically create and deploy golden images using packer.. i can almost smell it now :)
[2014-06-05 10:18:22 -0400] CJNE: AikiLinux, there's a purge attribute
[2014-06-05 10:27:34 -0400] AikiLinux: yes, but when i do action :create_if_missing  and then purge true
[2014-06-05 10:27:48 -0400] AikiLinux: it complain and exit the run
[2014-06-05 10:43:24 -0400] bcave: just read up a bit on packer - is that similar to docker?
[2014-06-05 10:43:30 -0400] n1ko: nope
[2014-06-05 10:48:06 -0400] bcave: oh - you can deploy a pre-configured docker instance with packer
[2014-06-05 11:22:25 -0400] kraM: Hey guys. I've just updated chef-server (on Ubuntu Precise) to 11.1.0 and am now facing a problem where it seems like the following to me:
[2014-06-05 11:24:11 -0400] kraM: Node connects to chef-server. chef-server connects to localhost:8000 using SSL. Running curl versus loopback:8000 via SSL results in SSL protocol error. I am now searching for a place where I can/need/may configure - probably the bookshelf component - how to connect to erchef.
[2014-06-05 11:26:43 -0400] kraM: [2014-06-05T13:26:25+02:00] ERROR: Server returned error for https://localhost:8000/bookshelf/organization-00000000000000000000000000000000 ...
[2014-06-05 12:20:06 -0400] kraM: Seems like the MQ doesn't work (econnrefused).
[2014-06-05 12:25:45 -0400] kraM: True, but not the reason for the problem.
[2014-06-05 13:12:37 -0400] bcave: anyone here using spiceweasel?
[2014-06-05 13:14:10 -0400] srenatus: bcave: sometimes
[2014-06-05 13:19:24 -0400] bcave: for batching commands?
[2014-06-05 13:20:02 -0400] bcave: i use it with a manually managed file to synchronize my local kitchen to the chef server, as well as with some files for specific provisioning tasks (e.g. knife ec2 or knife cfn)
[2014-06-05 13:20:55 -0400] bcave: but I'm wondering if there's a way or perhaps another gem that can be used to package the repo for distribution?
[2014-06-05 13:21:41 -0400] srenatus: bcave: I think berks can do that
[2014-06-05 13:21:55 -0400] srenatus: bcave: spiceweasel supports berks, too
[2014-06-05 13:22:29 -0400] bcave: ah, ok
[2014-06-05 13:22:50 -0400] bcave: im looking at the berks commands, trying to figure out how to do that
[2014-06-05 13:23:10 -0400] bcave: perhaps with vendor or package commands?
[2014-06-05 13:28:09 -0400] bcave: ah, ok - that looks great. berks package.
[2014-06-05 13:35:32 -0400] srenatus: bcave: :)
[2014-06-05 13:50:02 -0400] r3dk1ng: Good Morning all
[2014-06-05 13:50:08 -0400] r3dk1ng: running into a strange issue
[2014-06-05 13:50:18 -0400] r3dk1ng: I need to do a remote install of an RPM package
[2014-06-05 13:50:36 -0400] kraM: Guys, I *really* need some help. Upgraded chef-server. Ubuntu Precise. From 11.0.6 to 11.1.0. When bootstrapping a node, client got messages like "ERROR: Server returned error for https://localhost:8000/bookshelf/..." Downgrade to 11.0.6, client gets "Error Syncing Cookbooks". 11.0.12, again "Error Syncing Cookbooks" even after `knife cookbook upload -a'. knife cookbook list is working fine. No usable information via chef-server-ctl tail, just requests logge
[2014-06-05 13:50:38 -0400] r3dk1ng: and I am following all of the best practice guides ou thtere
[2014-06-05 13:50:40 -0400] r3dk1ng: and it's not working
[2014-06-05 13:51:11 -0400] r3dk1ng: rpm_package "rubygem-aws-sdk-1.42.0-1.noarch.rpm" do
[2014-06-05 13:51:11 -0400] r3dk1ng:   source "http://yumserver.insidecompany.com
[2014-06-05 13:51:12 -0400] r3dk1ng: /rubygem-aws-sdk-1.42.0-1.noarch.rpm"
[2014-06-05 13:51:12 -0400] r3dk1ng:   options "--nodeps"
[2014-06-05 13:51:13 -0400] r3dk1ng:   action :nothing
[2014-06-05 13:51:14 -0400] r3dk1ng:   provider Chef::Provider::Package::Rpm
[2014-06-05 13:51:15 -0400] r3dk1ng: end.run_action(:install)
[2014-06-05 13:51:34 -0400] r3dk1ng: and chef-client run is giving me a package not found error
[2014-06-05 13:51:42 -0400] r3dk1ng: but I can wget the URL and it works
[2014-06-05 13:52:46 -0400] r3dk1ng: kraM: Sorry I don't know how to help, I am somewhat new to Chef.   To me, it sounds like you need to upgrade your chef client using the Omnibus installed.
[2014-06-05 13:52:52 -0400] r3dk1ng: installer
[2014-06-05 13:54:27 -0400] kraM: chef-client is 11.12.4, but from the logs and the information I'm able to find and my understanding about the API this doesn't sound like the reason for this issue.
[2014-06-05 13:55:02 -0400] kraM: It worked with 11.0.6 before the upgrade, and it doesn't work with any client version on any chef-server version after the upgrade.
[2014-06-05 13:55:38 -0400] r3dk1ng: kraM: Do you have any matching clients to your server version at all?
[2014-06-05 13:57:20 -0400] bttf: what does LWRP stand for ?
[2014-06-05 13:57:52 -0400] r3dk1ng: bttf: Light Weight Resource Provider... it's the crap in the /provider /resource sub-dirs under a cookbook
[2014-06-05 13:59:28 -0400] kraM: Why should they match? Current chef-server is 11.1.0, current chef-client is 11.12.2. Those versions do not need to match. The API version needs to match.
[2014-06-05 14:00:08 -0400] r3dk1ng: kraM: I am just curious... one would think if the client and server perfectly mathces, and you get an error, then there's a serious problem.
[2014-06-05 14:00:18 -0400] r3dk1ng: possibly bug
[2014-06-05 14:00:28 -0400] r3dk1ng: I am trying to help.load
[2014-06-05 14:00:32 -0400] kraM: Sure.
[2014-06-05 14:00:46 -0400] kraM: I appreciate any idea which doesn't come to my mind.
[2014-06-05 14:01:08 -0400] r3dk1ng: remove the node and then re-register it?
[2014-06-05 14:01:24 -0400] r3dk1ng: like I said, I am somewhat new to Chef...
[2014-06-05 14:02:27 -0400] kraM: Done multiple times.
[2014-06-05 14:02:41 -0400] kraM: No node in the infrastructure can synchronize cookbooks right now.
[2014-06-05 14:05:34 -0400] kraM: Went for chef-server 11.1.0 again. If everything is broken, than I'll try to get it running on current version.
[2014-06-05 14:06:10 -0400] CJNE: would help if i knew anything about running a chef server, hope it works out :)
[2014-06-05 14:12:17 -0400] kraM: What's really bugging me is a AWSAccessKeyId in the connect to localhost:8000 (erchef). I don't have aws, I don't want. I get this message:
[2014-06-05 14:12:20 -0400] kraM: [2014-06-05T16:08:04+02:00] ERROR: Server returned error for https://localhost:8000/bookshelf/organization-00000000000000000000000000000000/checksum-e5a114c1ceb70f8adbe0a2bf35acaf2c?AWSAccessKeyId=b0800fc1f9997c2ccfa87c83eba900d3427e04e9&Expires=1401978184&Signature=14vEVohZ0qbHsbI99QVI0LqX25Q%3D, retrying 1/5 in 4s
[2014-06-05 14:13:07 -0400] kraM: First: It seems, localhost:8000 doesn't speak SSL. Second: AWSAccessKeyId?
[2014-06-05 14:15:34 -0400] gleam: bookshelf is s3 compatible, and i'd guess bookshelf is the actual problem
[2014-06-05 14:16:11 -0400] gleam: what do the erchef logs show?
[2014-06-05 14:29:31 -0400] kraM: gleam: Nothing except GET requests for path=/nodes/<NODE-NAME>.
[2014-06-05 14:30:03 -0400] kraM: Earlier in the erchef logs I see crash reports like:
[2014-06-05 14:30:14 -0400] kraM: CRASH REPORT Process <0.129.0> with 0 neighbours exited with reason: bad argument in call to erlang:atom_to_list("sqerl") in pooler_sup:pool_sup_name/1 line 59 in gen_server:init_it/6 line 328
[2014-06-05 14:32:30 -0400] kraM: And another bad arg to pooler_sub, pool_sub_name.
[2014-06-05 14:34:20 -0400] trilitheus: Hi - getting gateway timeout to OSS chef server - I believe because of unresolvable cookbook dependencies
[2014-06-05 14:35:04 -0400] trilitheus: what is best way of tracing this?  I've used knife solve against the recipe_list and I can't see any version discrepencies
[2014-06-05 14:35:51 -0400] gondoi: which 'chef_gem' can I pass the version of "latest"?
[2014-06-05 14:36:09 -0400] gondoi: or is it 'nil' that will make it install the newest?
[2014-06-05 14:39:49 -0400] kraM: gleam: https://paste.xinu.at/03sa/ -- This is what I can see from `tail -f /var/log/chef-server/erchef/*' when deleting a node and bootstrapping it. Nothing interesting which MIGHT help ME to deal with this issue.
[2014-06-05 14:41:42 -0400] kraM: I tried to configure bookshelf['enable'] = false in /etc/chef/chef-server.rb with no success. Exact same issue.
[2014-06-05 14:44:01 -0400] kraM: Verified all components configuration like rmq, expander... As far as I know they all look good. I've no deeper insight in bookshelf.
[2014-06-05 14:47:51 -0400] gleam: where is that "server returned error for https://localhost:8000" coming from? chef-client or something else?
[2014-06-05 14:49:08 -0400] kraM: I see that in chef-client and believe that some kind of exception is caught in the code and a corresponding message brought back to the client.
[2014-06-05 14:50:00 -0400] kraM: In earlier versions of chef-server it seems that there was ONE try to syncronise the cookbooks and resulted in "Error Syncing Cookbooks".
[2014-06-05 14:50:26 -0400] kraM: Nothing in tail -f /var/log/chef-server/bookshelf/*.
[2014-06-05 15:01:00 -0400] r3dk1ng: is it possible to have combined conditional in a chef_recipe?  For example in an execute block... to do someting like:  nof_if fileA exists, AND only_if FileB exists?
[2014-06-05 15:01:45 -0400] kraM: Some proxy crap?
[2014-06-05 15:01:57 -0400] r3dk1ng: or to do a "not_if FileA exists or not_if FileB is missing"
[2014-06-05 15:02:08 -0400] r3dk1ng: ?
[2014-06-05 15:02:32 -0400] gyoza: you can use templates and use :create_if_missing?
[2014-06-05 15:02:35 -0400] r3dk1ng: I prefer and
[2014-06-05 15:02:43 -0400] r3dk1ng: hmm
[2014-06-05 15:02:53 -0400] gyoza: seems easier than logic
[2014-06-05 15:03:00 -0400] gyoza: imo
[2014-06-05 15:03:14 -0400] gyoza: you could maybe do an if
[2014-06-05 15:03:17 -0400] gyoza: then template
[2014-06-05 15:03:19 -0400] gyoza: create if missing
[2014-06-05 15:03:25 -0400] gyoza: 'i dont know though, im new to chef
[2014-06-05 15:03:31 -0400] r3dk1ng: yeah that won't work... sorry for not explaining myself better
[2014-06-05 15:03:39 -0400] gyoza: no problem, just trying to help:)
[2014-06-05 15:03:52 -0400] r3dk1ng: I can't go into the deatails of what I am doing due to security reasons
[2014-06-05 15:03:55 -0400] gyoza: you should rename yourself to y3ll0wking
[2014-06-05 15:03:58 -0400] someara: you can put as many guards on a resource as you want
[2014-06-05 15:04:00 -0400] gyoza: awww yea
[2014-06-05 15:04:02 -0400] someara: go nuts
[2014-06-05 15:04:18 -0400] someara: not_if { this }
[2014-06-05 15:04:19 -0400] r3dk1ng: funny
[2014-06-05 15:04:27 -0400] someara: only_if { that }
[2014-06-05 15:04:31 -0400] gyoza: you watch true detectiveS? its great
[2014-06-05 15:05:07 -0400] matti: only_and_only_if ;]
[2014-06-05 15:05:21 -0400] gyoza: that exists?
[2014-06-05 15:05:22 -0400] someara: https://github.com/someara/pki-cookbook/blob/master/providers/servercert.rb#L38-L41
[2014-06-05 15:05:24 -0400] r3dk1ng: @someara, I get that, but I need not_if AND only_if
[2014-06-05 15:05:25 -0400] someara: no
[2014-06-05 15:05:33 -0400] matti: gyoza: No ;]
[2014-06-05 15:05:42 -0400] someara: layer then up
[2014-06-05 15:05:46 -0400] someara: s/then/them/
[2014-06-05 15:06:03 -0400] r3dk1ng: layer?
[2014-06-05 15:06:06 -0400] matti: Fun: only_if_monday { }
[2014-06-05 15:06:06 -0400] matti: ;]
[2014-06-05 15:06:18 -0400] someara: put multiple guards on a resource
[2014-06-05 15:06:25 -0400] someara: they all have to pass for it to fire
[2014-06-05 15:06:38 -0400] r3dk1ng: yes someara, I get that.
[2014-06-05 15:06:45 -0400] matti: Ohai r3dk1ng
[2014-06-05 15:07:33 -0400] r3dk1ng: What I am saying is, On my resouce, I only need it to take action based on this... not if a package is installed via RPM, and only if a particlar directory does not already exist...
[2014-06-05 15:07:59 -0400] someara: so put a not_if guard and an only_if guard
[2014-06-05 15:08:34 -0400] kraM: Aaaand some tests with curl: https://paste.xinu.at/GXR0cZ/
[2014-06-05 15:09:04 -0400] r3dk1ng: @someara: I can do that, I can do that all day long.  BUT!!!  That would, and could... still introduce bad logic if I don't combine the NOT_IF and ONLY_IF with an "AND"
[2014-06-05 15:09:23 -0400] someara: https://gist.github.com/someara/8893f1242ff1975c6557
[2014-06-05 15:09:42 -0400] someara: all the guards are logically AND'd together anyway
[2014-06-05 15:09:49 -0400] r3dk1ng: they are?
[2014-06-05 15:09:51 -0400] someara: yep
[2014-06-05 15:09:53 -0400] someara: they all have to pass
[2014-06-05 15:10:40 -0400] r3dk1ng: okay... I did not know that
[2014-06-05 15:10:57 -0400] someara: and now you do =)
[2014-06-05 15:11:02 -0400] kraM: Can I configure erchef['s3_bucket'] to something which is NOT bookshelf, disable bookshelf, upload the cookbooks and be happy?
[2014-06-05 15:11:05 -0400] r3dk1ng: Thanks I appreciate it.
[2014-06-05 15:11:08 -0400] someara: no prob
[2014-06-05 15:12:40 -0400] r3dk1ng: someara: one quick last question... how can I do an only_if DIR does not exist?
[2014-06-05 15:12:42 -0400] someara: protip: "creates" is an easier to read than only_if { ::File.exist?('/some/file') }
[2014-06-05 15:14:39 -0400] someara: only_if { Dir.exist?('/some/dir') }
[2014-06-05 15:15:21 -0400] r3dk1ng: Thanks, you're great :)
[2014-06-05 15:17:01 -0400] bcave: cheers
[2014-06-05 15:17:10 -0400] hhoover: I'm trying to get chef-metal working on Rackspace's cloud. Here's my recipe: https://gist.github.com/hhoover/1c2518522b5e7818d4dc - I get "undefined method `[]' for nil:NilClass" on line 27. So my question is why does God hate me
[2014-06-05 15:17:23 -0400] r3dk1ng: someara... that's if the Dir exists... I mean if the Dir does NOT Exist...
[2014-06-05 15:17:45 -0400] someara: not_if { Dir.exist?('/some/dir') }
[2014-06-05 15:18:20 -0400] someara: bash may be easier for you to read
[2014-06-05 15:18:32 -0400] r3dk1ng: :)
[2014-06-05 15:18:36 -0400] someara: not_if "test -d /some/dir"
[2014-06-05 15:19:28 -0400] someara: only_if "echo 'things in quotes are evaluated by platforms default interpreter'"
[2014-06-05 15:19:38 -0400] r3dk1ng: gotcha
[2014-06-05 15:22:09 -0400] mikesplain: hhoover: I had a similar error yesterday
[2014-06-05 15:22:20 -0400] mikesplain: hhoover: took me a bit to debug
[2014-06-05 15:22:35 -0400] mikesplain: hhoover: But something like this ended up working for me on openstack: https://gist.github.com/mikesplain/0ec6337c28e14cd28ed4
[2014-06-05 15:22:36 -0400] hhoover: mikesplain go on... :-)
[2014-06-05 15:23:01 -0400] mikesplain: (I know it's sloppy)
[2014-06-05 15:23:13 -0400] mikesplain: but might give you a few things to try
[2014-06-05 15:26:05 -0400] hhoover: mikesplain thanks. I'll bang on it some more
[2014-06-05 15:29:50 -0400] gleam: kram, can you pastebin the output of chef-server-ctl show-config , sanitized if needed?
[2014-06-05 15:30:30 -0400] kraM: gleam: One second.
[2014-06-05 15:31:36 -0400] mikesplain: hhoover: good luck!
[2014-06-05 15:34:18 -0400] kraM: gleam: https://paste.xinu.at/hGngr/
[2014-06-05 15:35:29 -0400] kraM: Verified traffic with tcpdump and ngrep; don't think that I've a proxy issue.
[2014-06-05 15:38:11 -0400] chef959: Hey Guys, anyone know of a web portal someone has built to display knife search style information?  I looked into chef-kitchen but I'm really looking for something that will dynamically update periodically
[2014-06-05 15:38:48 -0400] kbarry: Kinda new to both linux and chef. I'm more familiar with LVM than with Non-LVM scenarios. In other words, I don't actually know how to setup a new disk not using LVM in linux. Now I am trying to use chef to configure a BareMetal box and am a little short finding what
[2014-06-05 15:38:52 -0400] chef959: and not just pull info from a node databag
[2014-06-05 15:38:59 -0400] gleam: try setting bookshelf['url'] = "http://127.0.0.1:4321" in /etc/chef-server/chef-server.rb and running chef-server-ctl reconfigure
[2014-06-05 15:39:00 -0400] kbarry: resources/tools might be needed to accomplish this.
[2014-06-05 15:40:04 -0400] kbarry: I see there is a "mount" cookbook. The 'lvm' cookbook i am used to using handles both setting up the drives, and getting the fstab entries configured.
[2014-06-05 15:40:27 -0400] kbarry: Someone mind pointing me in the right direction for handling non-lvm disk allocation w/ chef?
[2014-06-05 15:41:51 -0400] Chewi: kbarry: not sure what you mean by allocation here. if you're not using LVM then presumably you have bare disks of some kind under /dev. are they already partitioned?
[2014-06-05 15:42:14 -0400] kraM: gleam: I'm on it. Sounds reasonable!
[2014-06-05 15:44:09 -0400] kraM: gleam: Same issue :(
[2014-06-05 15:44:16 -0400] hhoover: mikesplain IT'S_HAPPENING.gif thanks again! Will revise gist with working recipe
[2014-06-05 15:44:26 -0400] mikesplain: hhoover: nice!!
[2014-06-05 15:44:37 -0400] mikesplain: what was it? compute_options?
[2014-06-05 15:44:48 -0400] gleam: the only stuff i see in yours that i don't see in mine are the bookshelf vip+enable settings
[2014-06-05 15:46:09 -0400] hhoover: yeah compute_options
[2014-06-05 15:46:21 -0400] hhoover: Now I have key problems, need some fog_key_pair stuffs
[2014-06-05 15:46:30 -0400] hhoover: but I'm moving again so... awesome
[2014-06-05 15:48:41 -0400] cschneid: Can somebody help with some cookbook refactoring?  We have an SOA setup with several rails apps who all get deployed in a very similar manner (with a few differences).  I'd like to abstract that out.  Options I see are: totally generic recipe + node attributes for custom stuff, LWRP, Definition, ???
[2014-06-05 15:49:04 -0400] cschneid: basically I want to remove all the duplicated code in the recipes and centralize
[2014-06-05 15:49:54 -0400] kraM: gleam: I thought I'd configure ['vip'] (why-ever, don't even know what vip stands for) to the DNS name of the service. I'll drop that. enable has histeric reasons, but I'll drop that too.
[2014-06-05 15:53:03 -0400] kraM: Makes no difference. gleam: Thanks a lot, even if unsuccessfull by now.
[2014-06-05 15:54:59 -0400] kraM: Something new. I cannot upload cookbooks anymore :)
[2014-06-05 16:04:12 -0400] kbarry: Chewi: Possibly not.  I'm making a recipe without actually having hardware to look at. Essentiall, we have the boxes working, done by hand, now i am making a recipe to "repeat"
[2014-06-05 16:05:48 -0400] Chewi: kbarry: okay so are these separate disks to the disk that the OS is running from? it sounds like you're not virtualising here, right?
[2014-06-05 16:10:57 -0400] behemphi: Any Rackers in the room?
[2014-06-05 16:12:14 -0400] behemphi: @paulczar got a problem for RS ubuntu mirror
[2014-06-05 16:12:16 -0400] behemphi: got a sec?
[2014-06-05 16:12:36 -0400] behemphi: click here: http://mirror.rackspace.com/ubuntu/
[2014-06-05 16:12:55 -0400] behemphi: then click on the Ubuntu link and see that it is recursive
[2014-06-05 16:13:20 -0400] behemphi: appears to break package updates and thus hoses chef runs
[2014-06-05 16:14:41 -0400] ickymettle: morning chefs ... quick one can any one point me at any resources (if they exist) with suggested approaches to writing tests for chef handlers ?
[2014-06-05 16:14:53 -0400] paulczar: lolwat!
[2014-06-05 16:15:12 -0400] paulczar: behemphi: on a cloud server ?    give me a flavor and location and Ill spin one up and test
[2014-06-05 16:15:27 -0400] mattsmith: so, I have a question for everyone. Where should I store my data bag secret key? In a cookbook seems silly but logical at the same time... where do you store yours?
[2014-06-05 16:15:42 -0400] trilitheus: mattsmith, seen chef-vault?
[2014-06-05 16:16:25 -0400] trilitheus: that negates the need for passing secret around
[2014-06-05 16:16:38 -0400] trilitheus: https://github.com/Nordstrom/chef-vault
[2014-06-05 16:16:50 -0400] trilitheus: http://jtimberman.housepub.org/blog/2013/09/10/managing-secrets-with-chef-vault/
[2014-06-05 16:17:16 -0400] paulczar: do you still need to rebuild the databags with chef-vault when you add a server that needs access ?
[2014-06-05 16:17:26 -0400] mattsmith: thanks, i'll check that out
[2014-06-05 16:17:32 -0400] trilitheus: paulczar, afaik yes
[2014-06-05 16:17:46 -0400] trilitheus: the chef-vault databag keys at least
[2014-06-05 16:18:10 -0400] paulczar: trilitheus: seen any examples of doing it automagically in cases where non-humans create servers and converge them ?
[2014-06-05 16:19:10 -0400] trilitheus: paulczar, no - - bit difficult as far as I can tell to bootstrap with a run list that requires chef-vault encrypted stuff is not ggreat
[2014-06-05 16:19:48 -0400] trilitheus: I think you;d have to do a bootstrap, get the knife vault update done against it then push the run list
[2014-06-05 16:21:57 -0400] trilitheus: swings and roundabouts and all that :)
[2014-06-05 16:23:35 -0400] keftes: if node.override is referencing an attribute that doesn't exist yet
[2014-06-05 16:23:42 -0400] keftes: it will just act like node.set - no?
[2014-06-05 16:33:03 -0400] drag00n: What is the best practice for adding the apt-coobook recipe to do an apt-get update before installing packages
[2014-06-05 16:33:38 -0400] drag00n: do I put it as a dependancy and just add include_recipe "apt" in my default.rb file?
[2014-06-05 16:33:51 -0400] keftes: can simply execute if you want
[2014-06-05 16:34:22 -0400] kbarry: Chewi: Yes. The first disk is running the OS, its configures/partitions, mounted, the whole shabang. I'm getting a little more information. Sorry for the delays ;)
[2014-06-05 16:35:58 -0400] gyre007: guys, I'm trying to create a file in some path on Windows machine but Chef no like http://pastebin.com/Qv4nkUDL
[2014-06-05 16:36:24 -0400] hhoover: drag00n: two lines - node.set['apt']['compile_time_update'] = true
[2014-06-05 16:36:26 -0400] gyre007: is this some kind of "Cygwinism" or is chef no like Win again
[2014-06-05 16:36:39 -0400] hhoover: then include_recipe 'apt'
[2014-06-05 16:36:45 -0400] gyre007: the parent directory clearly exists
[2014-06-05 16:36:55 -0400] Chewi: kbarry: if you just want a dumb data store then you could create a filesystem like ext4 directly on the disk without partitioning at all. I'm not sure I'd trust Chef with that responsibility though. but then you were using lvm cookbook so maybe you're okay with that. can't give you any specifics though, not done anything like that with Chef myself. maybe just run mkfs.ext4 and make damn sure you never run it again? ;)
[2014-06-05 16:37:18 -0400] gyre007: permissions are correct too
[2014-06-05 16:37:56 -0400] drag00n: hhoover: it seemed to work it I just depends "apt" in metadata then include_recipe "apt" in my default recipe as the first line
[2014-06-05 16:38:50 -0400] hhoover: drag00n cool, I just add the compile time in case dependencies need stuff
[2014-06-05 16:38:54 -0400] gyre007: http://pastebin.com/index/Qv4nkUDL
[2014-06-05 16:38:56 -0400] gyre007: mmm
[2014-06-05 16:42:01 -0400] gyoza: guys
[2014-06-05 16:42:12 -0400] gyoza: i got chef working w/ aws pullin my book
[2014-06-05 16:42:18 -0400] gyoza: ONE COMMAND
[2014-06-05 16:42:19 -0400] gyoza: SUCCESS
[2014-06-05 16:42:32 -0400] gyoza: i love this chef
[2014-06-05 16:42:33 -0400] gyoza: want to marry
[2014-06-05 16:47:43 -0400] sarkis: coderanger: do you know what the default behavior of creating users without specifying password is?
[2014-06-05 16:47:59 -0400] sarkis: coderanger: i mean what does chef do in this case?
[2014-06-05 16:50:14 -0400] kbarry: Chewi: Got some more information: We are using the following:
[2014-06-05 16:50:16 -0400] kbarry: parted /dev/sdi mklabel gpt && parted /dev/sdi mkpart ext2 0GB 999GB; mkfs.ext4 /dev/sdi1; vi /etc/fstab; mount -a
[2014-06-05 16:50:58 -0400] kbarry: I think the reason we are using parted is because of the size (I could be wrong),
[2014-06-05 16:54:27 -0400] bmhatfield: So, any information about when we can expect CCE-patched omnibus packages?
[2014-06-05 16:55:09 -0400] bmhatfield: er, CCS
[2014-06-05 17:04:37 -0400] whiteadam: What do you think the typical amount of "log events" a standard web server generates per day is?
[2014-06-05 17:09:19 -0400] ickymettle: whiteadam: is a function largely of the number of requests you're handling a day
[2014-06-05 17:09:44 -0400] whiteadam: ickymettle: Yeah I know, I'm just looking for a round number to do rough calculation.
[2014-06-05 17:10:15 -0400] whiteadam: ickymettle: Don't want to turn on a single AMQP and just have it explode :)
[2014-06-05 17:16:35 -0400] drag00n: what is the best way to replicate  this in my chef cookbook? should I just install the ruby gem or inherit with the passenger cookbook
[2014-06-05 17:16:40 -0400] drag00n: https://www.irccloud.com/pastebin/mnIAQZMT
[2014-06-05 17:27:10 -0400] medya_: when you use Vagrant with AWS ec2, do you stilll have to specify a box URL ? for example if I use a cent os ami on EC2 do I need to find a cent os box_url for Vagrantfile ?
[2014-06-05 17:30:56 -0400] drag00n: Think I am running into dep hell
[2014-06-05 17:31:54 -0400] whiteadam: SoftLayer support just told me that I can only use their service if I am a customer... Is that how commerce works now? I thought communism won.
[2014-06-05 17:39:13 -0400] jidar: medya_: it looks like you point it to a dummy file : https://github.com/mitchellh/vagrant-aws
[2014-06-05 17:39:14 -0400] cschneid: Can somebody help with some cookbook refactoring?  We have an SOA setup with several rails apps who all get deployed in a very similar manner (with a few differences).  I'd like to abstract that out.  Options I see are: totally generic recipe + node attributes for custom stuff, LWRP, Definition, ???
[2014-06-05 17:39:23 -0400] jidar: : $ vagrant box add dummy https://github.com/mitchellh/vagrant-aws/raw/master/dummy.box
[2014-06-05 17:39:51 -0400] medya_: okay thanks
[2014-06-05 17:39:57 -0400] sarkis: reading about hwrp's, why would i need to do this in the provider? http://tech.yipit.com/2013/05/09/advanced-chef-writing-heavy-weight-resource-providers-hwrp/
[2014-06-05 17:40:05 -0400] sarkis:   @current_resource.cloud(new_resource.cloud)
[2014-06-05 17:40:33 -0400] sarkis: and do i need to do that for all parameters which have defaults?
[2014-06-05 17:47:02 -0400] alexlindenlevy: Hi all from a vagrant node my `berks vendor <location>` command is failing with a timeout. Any idea what might be the issue?
[2014-06-05 18:15:39 -0400] alexlindenlevy: Chef appears to use branch deply as a default in Chef::Provider::Git how do I override this?
[2014-06-05 18:16:23 -0400] alexlindenlevy: i.e. the x264 mcookbook from opscode is failing for me
[2014-06-05 18:30:39 -0400] celhead1: howdy Chef'ers! I'm using chef 11.2.0 on ubuntu. I'm behind a proxy and remote_file calls don't use the HTTP_PROXY environment variable; setting http_proxy in /etc/chef/client.rb also doesn't work.  Anyone know how to get past this?
[2014-06-05 18:30:40 -0400] gleam: checkout_branch branchnamehere
[2014-06-05 18:32:06 -0400] keftes: i think your proxy should be in client.rb - but i havent had to deal with that
[2014-06-05 18:32:33 -0400] celhead1: it's supposed to be but it doesn't work
[2014-06-05 18:32:57 -0400] robbkidd: celhead1: Should def honor the environment variable. Just for kicks, export a lower-case version of http_proxy
[2014-06-05 18:33:28 -0400] robbkidd: I've had issues with other Ruby codebases expecting only the lowercase version.
[2014-06-05 18:34:41 -0400] celhead1: robbkidd, I've tried both HTTP_PROXY and http_proxy (exporting it in a recipe as ENV['HTTP ...); this works for gem_package/chef_gem, but not remote_file
[2014-06-05 18:34:59 -0400] robbkidd: Hmmm.
[2014-06-05 18:35:06 -0400] robbkidd: Investigating 11.2 code
[2014-06-05 18:35:36 -0400] robbkidd: It should really be set on a system, though, ja? To /etc/environment
[2014-06-05 18:36:08 -0400] celhead1: If I grep for the remote_file sources in 11.12 I see mentions of HTTP_PROXY when using ftp, but nothing explictly mentioning HTTP_PROXY
[2014-06-05 18:36:12 -0400] robbkidd: But there might be a chicken/egg issue there if you're writing out /etc/environment with chef.
[2014-06-05 18:36:27 -0400] celhead1: I haven't tried putting it into /etc/environment
[2014-06-05 18:36:41 -0400] celhead1: but, makes me wonder why gem_package would see it and not remote_file
[2014-06-05 18:37:02 -0400] robbkidd: That's the "UNIXy" way to declare environment variables for an entire system
[2014-06-05 18:37:13 -0400] robbkidd: Agreed.
[2014-06-05 18:39:08 -0400] celhead1: my server is down at the moment; when back up, I'll upgrade a client to 11.12 and see if it works. This isn't really a fix for me, since I can't make this kind of extreme change (this is going into a product) easily, but it will reveal if it was fixed.
[2014-06-05 18:39:21 -0400] robbkidd: Related: https://github.com/opscode/chef/pull/1459
[2014-06-05 18:40:01 -0400] robbkidd: Looks like a PR was closed for http_proxy being set for the environment when given in the chef config.
[2014-06-05 18:41:29 -0400] celhead1: chef config?  the file /etc/chef/client.rb?  What it apply to it as well?
[2014-06-05 18:41:35 -0400] robbkidd: Fix looks unreleased at the moment.
[2014-06-05 18:42:09 -0400] celhead1: suggests rather strongly, given that it was put in just a week ago, that this has been an issue for a while
[2014-06-05 18:42:12 -0400] celhead1: no?
[2014-06-05 18:42:20 -0400] robbkidd: Looks that way.
[2014-06-05 18:43:07 -0400] robbkidd: I've got a base recipe for my systems that set http_proxy in /etc/environment so that all may benefit from living inside less libertine environments.
[2014-06-05 18:43:29 -0400] celhead1: are you saying that remote_file works for you?
[2014-06-05 18:43:55 -0400] celhead1: i.e., proxying with remote_file?
[2014-06-05 18:44:01 -0400] robbkidd: Nnnnnot quite. At the moment my chef runs run, they do not live behind a proxy. It's complicated.
[2014-06-05 18:44:50 -0400] celhead1: dang
[2014-06-05 18:44:53 -0400] robbkidd: I package up what chef remote_file downloads with checksums, deploy that package and then remote_file dpesm
[2014-06-05 18:45:12 -0400] robbkidd: ... doesn't make further download attempts because checksums match.
[2014-06-05 18:45:20 -0400] robbkidd: But I understand your pain.
[2014-06-05 18:45:37 -0400] celhead1: hmm; that might work for me
[2014-06-05 18:46:28 -0400] robbkidd: celhead1: I did a talk on our slightly wacky chefing. http://youtu.be/fPy2_FtSIz0
[2014-06-05 18:46:34 -0400] celhead1: though I have lots of recipes to go through; do you have any ideas on how to determine what's actually been downloaded (i.e., in the log output? in the node?)
[2014-06-05 18:47:06 -0400] robbkidd: Do you depend on 3rd party cookbooks that are doing remote_files?
[2014-06-05 18:47:18 -0400] robbkidd: Or are all your cookbooks written in-house?
[2014-06-05 18:48:35 -0400] celhead1: hmm, robbkidd: it appears that you're doing something similar, i.e., I'm sending a product (chef server, other servers) into an environment that doesn't have internet connectivity (or at least won't open it).  I've got a proxy that I'd hoped would be able to cache everything that's being download (when run at my office).  Works great when the client respect the proxy.
[2014-06-05 18:48:45 -0400] celhead1: Yes, we have lots of 3rd party cookbooks
[2014-06-05 18:49:02 -0400] celhead1: My stuff, of course, I know how it's grabbing code
[2014-06-05 18:49:14 -0400] robbkidd: Then our pain is shared. Welcome, my kin.
[2014-06-05 18:49:47 -0400] celhead1: yes ;-)
[2014-06-05 18:50:03 -0400] celhead1: so, perhaps the only way to "inventory" what's being download is to a) read all the cookbooks (can be time consuming) or b) run chef-client -l debug and figure out from there ...
[2014-06-05 18:50:51 -0400] robbkidd: Watch the video, if you've got time. We basically have a flag that say whether chef is running with access to network resources or not. If has_network? == false, we ...{hangs head}... we monkeypatch remote_file to always return 'true' when asking if checksums match.
[2014-06-05 18:51:34 -0400] robbkidd: The hope is that all the remote_file resources are downloading to the chef cache. Then you have a cache you can trust. ... Well ... "trust"
[2014-06-05 18:52:07 -0400] celhead1: but rather than use a cache, you put all the code into cookbook/files/?
[2014-06-05 18:52:13 -0400] robbkidd: Caveat: the Chef, Inc. employees I ran that plan by responded with "Well, that's one way to do it." YMMV
[2014-06-05 18:52:38 -0400] celhead1: sounds like there's not going to be an easy way to do it
[2014-06-05 18:52:41 -0400] robbkidd: Nope. I put it all in the chef cache, then build my "installer" package to include that cache.
[2014-06-05 18:53:08 -0400] robbkidd: No. Community cookbook's assumption that the internet is available is a problem for us.
[2014-06-05 18:53:44 -0400] robbkidd: No. == Correct, there is no easy way.
[2014-06-05 18:54:20 -0400] celhead1: hmm, my chef-fu isn't strong enough to understand what you just said.  (Should I watch the video and it will answer the questions or) are you saying that, if I say, run chef-client on a node with the net that all the code used will wind up being in /var/chef/chef?
[2014-06-05 18:54:38 -0400] robbkidd: The package resource became a problem for us, too. We started deploying with an apt-cacher-ng server that is fed all the packages we use to act as an APT proxy during install.
[2014-06-05 18:54:52 -0400] celhead1: Yes, I'm also using apt-cacher-ng
[2014-06-05 18:54:55 -0400] celhead1: for ubuntu
[2014-06-05 18:55:07 -0400] celhead1: I have centos boxes too and am using polipo for those
[2014-06-05 18:55:22 -0400] celhead1: works great, again, when cookbook clients can use them ...
[2014-06-05 18:55:22 -0400] robbkidd: celhead1: Cool. Yea. Watch the video and hit me up with questions you've got.
[2014-06-05 18:55:27 -0400] chef959: Hey Guys, anyone know of a web portal someone has built to display knife search style information?  I looked into chef-kitchen but I'm really looking for something that will dynamically update periodically not just read from a nodes databag
[2014-06-05 18:55:43 -0400] robbkidd: celhead1: I'm @robbkidd on the Twitbox
[2014-06-05 18:55:49 -0400] robbkidd: ... if I'm not in here.
[2014-06-05 18:56:03 -0400] chef959: would rather not spend the time building something on my own if someone has already done it
[2014-06-05 18:56:05 -0400] celhead1: thanks, robbkidd (I'll have learn what twitbox is ;-)
[2014-06-05 18:56:13 -0400] robbkidd: Er, Twitter.
[2014-06-05 18:57:12 -0400] celhead1: ha
[2014-06-05 18:58:52 -0400] sarkis: what does chef use to connect to the client?
[2014-06-05 18:58:54 -0400] sarkis: SocketError: getaddrinfo: nodename nor servname provided, or not known
[2014-06-05 18:59:42 -0400] whiteadam: sarkis: I think you gotta do the -n name   or something
[2014-06-05 18:59:57 -0400] keftes: chef doesnt talk to the client - the client talks to chef
[2014-06-05 19:00:15 -0400] keftes: or somebody needs to educate me :)
[2014-06-05 19:00:26 -0400] sarkis: knife ssh i should have said
[2014-06-05 19:00:44 -0400] tcotav: that's pretty brilliant advertisement copy (unrelated.  sorry) - re: chef doesn't talk to the client...
[2014-06-05 19:00:46 -0400] sarkis: ok i see my issue
[2014-06-05 19:00:59 -0400] keftes: heh
[2014-06-05 19:10:19 -0400] coderanger: sarkis: Same as other tooling, it sets the hashed password to !
[2014-06-05 19:26:46 -0400] r3dk1ng: Is there anyway in a Chef recipe to ignore a failed "require <gemname>" statement?  Meaning let it run even if it fails?
[2014-06-05 19:27:39 -0400] mhenrixon: how am I supposed to get the whole certificate validation working? It doesn't matter than I download the certificates locally to the folder suggested it still fails
[2014-06-05 19:28:00 -0400] coderanger: r3dk1ng: begin require 'foo'; rescue LoadError; end
[2014-06-05 19:28:08 -0400] coderanger: r3dk1ng: I think its LoadError anyway
[2014-06-05 19:28:18 -0400] r3dk1ng: cool
[2014-06-05 19:28:22 -0400] r3dk1ng: thanks let me try that
[2014-06-05 19:28:23 -0400] coderanger: mhenrixon: This is with knife or chef?
[2014-06-05 19:28:26 -0400] mhenrixon: knife
[2014-06-05 19:28:32 -0400] mhenrixon: haven't worried about chef yet
[2014-06-05 19:28:48 -0400] coderanger: mhenrixon: What does your ssl_ca_file setting look like in knife.rb?
[2014-06-05 19:29:32 -0400] mhenrixon: huh? :)
[2014-06-05 19:30:01 -0400] mondo: in a recipe if I do include_recipe "myrecipe", how can I search for nodes with myrecipe?  If I do knife search node "recipies:myrecipe" it will not find nodes that have myrecipe included in another recipe
[2014-06-05 19:30:05 -0400] mhenrixon: coderanger: knife[:ssl_verify_mode] == :verify_peer
[2014-06-05 19:30:10 -0400] mhenrixon: that is the only thing I have in there
[2014-06-05 19:30:21 -0400] mondo: we've switched to all wrapper cookbooks which now makes searching via recipes difficult
[2014-06-05 19:30:33 -0400] coderanger: mhenrixon: I don't think you want that as a knife setting like that
[2014-06-05 19:30:34 -0400] mhenrixon: coderanger: https://gist.github.com/5e3231abecd7c3a77ebd
[2014-06-05 19:30:37 -0400] coderanger: mhenrixon: Its just a chef setting
[2014-06-05 19:31:00 -0400] whiteadam: coderanger: http://media.giphy.com/media/IgldBGDY6465O/giphy.gif
[2014-06-05 19:31:02 -0400] Otterley: mondo, I'd search for some other artifact left by the recipe, like a default node attribute
[2014-06-05 19:31:03 -0400] coderanger: mhenrixon: Add ssl_ca_file('/path/to/ca.pem')
[2014-06-05 19:31:23 -0400] coderanger: mondo: what version of chef are you using?
[2014-06-05 19:31:42 -0400] Otterley: mondo, for example, if you're implicitly including an apache recipe, you can look for apache-related attributes that would implicitly indicate its use
[2014-06-05 19:31:53 -0400] mondo: coderanger: 11.8.2
[2014-06-05 19:32:23 -0400] coderanger: mondo: If you upgrade to 11.10 or 11.12 it should work as you expect, include_recipe now updates node['recipes']
[2014-06-05 19:32:56 -0400] mondo: coderanger: oh ok great, thanks.  Otterley I'll use your suggestion for now.
[2014-06-05 19:58:12 -0400] r3dk1ng: I have a unique situation
[2014-06-05 19:58:51 -0400] r3dk1ng: I have to use custom Ruby Gems, that I have installed and turned into RPMs.   My recipe, installs them via RPM, and puts them into the /opt/chef/embedded/blah directory
[2014-06-05 19:58:52 -0400] r3dk1ng:  but after the recipe runs, and install the gems, my require statement blows up with a "not found" error
[2014-06-05 19:58:52 -0400] r3dk1ng: even though it's there, because if I run chef-client again, it works
[2014-06-05 19:58:53 -0400] r3dk1ng: I am trying to make it so I don't have to run chef-client twice
[2014-06-05 19:58:53 -0400] r3dk1ng:  got any ideas?
[2014-06-05 20:06:00 -0400] BryanWB: dear chefs, every once in a while chef-client encounters a random 403 error when trying to download a template file
[2014-06-05 20:06:30 -0400] BryanWB: this happens quite inconsistently but is quite annoying. Anyone seen this?
[2014-06-05 20:06:57 -0400] coderanger: r3dk1ng: Are you calling Gem.clear_paths after the install?
[2014-06-05 20:07:08 -0400] r3dk1ng: Nope I didn't know about that
[2014-06-05 20:07:12 -0400] r3dk1ng: how do I do that?
[2014-06-05 20:07:23 -0400] coderanger: BryanWB: Is this toward the end of a long run?
[2014-06-05 20:07:31 -0400] coderanger: r3dk1ng: Just add that code right above your require
[2014-06-05 20:07:38 -0400] r3dk1ng: Ok let me try
[2014-06-05 20:08:24 -0400] r3dk1ng: thanks - trying now
[2014-06-05 20:09:37 -0400] r3dk1ng: Dude you rock - it worked like a champ!!!
[2014-06-05 20:09:43 -0400] r3dk1ng: thanks so much!!!
[2014-06-05 20:09:46 -0400] coderanger: No prob
[2014-06-05 20:12:31 -0400] sarkis: coderanger: thanks
[2014-06-05 20:13:04 -0400] jerood: Hello, I'm looking for some help with vagrant/chef/berkshelf
[2014-06-05 20:13:14 -0400] coderanger: jerood: You're in the right place :)
[2014-06-05 20:13:20 -0400] jerood: Awesome.
[2014-06-05 20:13:37 -0400] sarkis: coderanger: question about berks-api, do you have yours set with the github backends pointed to your private repos or do you just berks upload when theres a new version of your private chef cookbook
[2014-06-05 20:13:46 -0400] jerood: I'm running into this: 'uninitialized constant Chef::Provider::Package::Apt' when trying to vagrant up.
[2014-06-05 20:15:50 -0400] coderanger: jerood: Please pastebin the full error
[2014-06-05 20:16:01 -0400] coderanger: sarkis: Just community site and chef-server
[2014-06-05 20:17:22 -0400] jerood: http://pastebin.com/S8kuzAmQ
[2014-06-05 20:18:03 -0400] coderanger: jerood: Hmm, looks like you ended up with chef 0.8 installed as a plugin somehow
[2014-06-05 20:18:08 -0400] coderanger: jerood: vagrant plugin uninstall chef
[2014-06-05 20:18:48 -0400] jerood: 11.12.4?
[2014-06-05 20:18:59 -0400] coderanger: jerood: Chef itself isn't a vagrant plugin at all
[2014-06-05 20:19:06 -0400] coderanger: jerood: vagrant just calls chef inside the VM
[2014-06-05 20:19:17 -0400] jerood: Right.
[2014-06-05 20:23:07 -0400] wdpro_kevin: boys I see lots of berks-api questions! and I'm going to pile on too
[2014-06-05 20:23:30 -0400] wdpro_kevin: I meant "boy!" not boys sorry ladies
[2014-06-05 20:23:42 -0400] wdpro_kevin: @anyone know of a simple web fe to chef server to proxy berks-api requests
[2014-06-05 20:23:51 -0400] wdpro_kevin: so we can server multiple chef orgs through one berks-api without having to distribute chef org keys to all
[2014-06-05 20:24:39 -0400] wdpro_kevin: I know Supermarket is suppose to fulfill this role but not sure if anything is available in the meantime
[2014-06-05 20:26:01 -0400] coderanger: wdpro_kevin: not sure what you mean
[2014-06-05 20:26:31 -0400] coderanger: You would have to setup multiple berks-api servers, you could put them all behind a single nginx though
[2014-06-05 20:26:42 -0400] coderanger: berks-api isn't multi-tennant though
[2014-06-05 20:26:59 -0400] Gilgamesh: hi guys... I am following the getting started tutorial and am having an issue... can anyone have a look? http://pastebin.com/ZySWvYPg
[2014-06-05 20:27:14 -0400] wdpro_kevin: yeah the issue is actually when berkshelf goes to retrieve the cookbook
[2014-06-05 20:27:35 -0400] Gilgamesh: the question I have is, how to make the recipe look for the apache2.conf file in the /etc/init.d directory instead of /etc/init
[2014-06-05 20:27:42 -0400] wdpro_kevin: if it resolves to a chef server endpoint then the user needs a client key
[2014-06-05 20:28:17 -0400] coderanger: wdpro_kevin: Yes, but those are set per-endpoint
[2014-06-05 20:28:25 -0400] wdpro_kevin: it doesn't behave like the cummunity berksapi endpoint
[2014-06-05 20:28:28 -0400] coderanger: wdpro_kevin: Oh, you mean on the client side
[2014-06-05 20:28:32 -0400] wdpro_kevin: yes
[2014-06-05 20:28:57 -0400] coderanger: wdpro_kevin: Yeah, thats not handled currently, you can't have a berks-api server with more than one chef-server endpoint unless they are hacked to use the same keys
[2014-06-05 20:29:22 -0400] coderanger: Gilgamesh: not sure thats a thing, you can't put upstart configs in init.d that I'm aware of
[2014-06-05 20:29:29 -0400] wdpro_kevin: we were thinking of a simple open web fe that would handle the request and keys
[2014-06-05 20:29:39 -0400] coderanger: Gilgamesh: init.d holds old-style sysv init scripts, init holds upstart configs
[2014-06-05 20:29:55 -0400] hhoover: another chef-metal question - I can spin up a new server but I get a '403 Forbidden' error when it tries to register as a client
[2014-06-05 20:30:00 -0400] coderanger: wdpro_kevin: You could use chef-zero, since that just ignores keys anyway
[2014-06-05 20:30:14 -0400] Gilgamesh: coderanger: and how to setup apache2 to start as a sysv script instead of upstart in chef?
[2014-06-05 20:30:23 -0400] wdpro_kevin: ah I think I likey
[2014-06-05 20:30:36 -0400] coderanger: Gilgamesh: What OS are you using? Most major debian services ship upstart configs now
[2014-06-05 20:30:46 -0400] Gilgamesh: coderanger: linux mint 17
[2014-06-05 20:31:07 -0400] coderanger: Gilgamesh: Yeah, thats debian family, so it ships with upstart configs
[2014-06-05 20:31:20 -0400] coderanger: Gilgamesh: You would have to write your own init scripts, which I suuuuper recommend not doing
[2014-06-05 20:34:00 -0400] Gilgamesh: coderanger: hmmm... any idea why the package installation didn't create the init script?
[2014-06-05 20:35:37 -0400] coderanger: Gilgamesh: Which ubuntu repos are you using? I'm not sure which version 17 is based on, guess 14.04?
[2014-06-05 20:36:36 -0400] chef534: need help with knife bootstrap validation error if anyone is around
[2014-06-05 20:36:51 -0400] Gilgamesh: coderanger: 14.04, that is correct
[2014-06-05 20:37:52 -0400] coderanger: Gilgamesh: Checking
[2014-06-05 20:37:57 -0400] coderanger: chef534: Please pastebin the errors
[2014-06-05 20:37:59 -0400] wdpro_kevin: (coderanger will not be overlooked for awesome chef next year)
[2014-06-05 20:38:05 -0400] chef534: @coderanger I am trying to bootstrap a new ubuntu node and I am getting the 404 forbidden on the client --- Chef encountered an error attempting to create the client
[2014-06-05 20:38:25 -0400] Gilgamesh: coderanger: it looks like to me that mint is still using sysv and not upstart... pid 1 is /sbin/init
[2014-06-05 20:39:18 -0400] coderanger: Gilgamesh: Ahh, that might do it then, just lock the provider perhaps
[2014-06-05 20:39:28 -0400] coderanger: Gilgamesh: in the service resource "provider Chef::Provider::Service::Init::Debian"
[2014-06-05 20:39:50 -0400] coderanger: chef534: Are you sure your validation key is correct on your workstation?
[2014-06-05 20:40:14 -0400] Gilgamesh: i'll try
[2014-06-05 20:40:16 -0400] chef534: @coderanger : pastebin : http://pastebin.com/nEEaCcmg
[2014-06-05 20:40:38 -0400] coderanger: chef534: Sounds like your validation key isn't correct
[2014-06-05 20:41:06 -0400] coderanger: chef534: Please check both of the things listed in "Possible Causes"
[2014-06-05 20:41:18 -0400] Gilgamesh: coderanger: that worked! thanks a lot ;)
[2014-06-05 20:41:19 -0400] chef534: @coderanger let me regenerate the validation key. thnkx
[2014-06-05 20:42:49 -0400] wfarr: schisamo: ping
[2014-06-05 20:44:06 -0400] Gilgamesh: pretty amaing to see it working :D i'll stick around :)
[2014-06-05 20:46:01 -0400] chef534: @coderanger : does the validator key needs to end in cer or pem? or does it matter?
[2014-06-05 20:46:54 -0400] coderanger: Doesn't matter, chef just passes it to OpenSSL::PKey.load or whatever its called
[2014-06-05 20:48:58 -0400] chef534: @coderanger : I've regenerate a new validator key and placed it on the client:/etc/chef directory but, knife still bombed with permission error.  is there a way to enable debug?  ran though all scenarios on "possible causes" already
[2014-06-05 20:49:19 -0400] coderanger: chef534: It ahs to be on your workstation, not the target
[2014-06-05 20:49:29 -0400] coderanger: chef534: knife bootstrap copies it over as part of the proces
[2014-06-05 20:49:55 -0400] drag00n: can anyone link to a walkthrough on deploying a rails app, running into a lot of opinionated posts
[2014-06-05 20:50:07 -0400] chef534: ok trying again
[2014-06-05 20:50:19 -0400] drag00n: I setup mysql, apache, passenger, ruby
[2014-06-05 20:50:29 -0400] coderanger: drag00n: Its not really a simple topic
[2014-06-05 20:50:39 -0400] coderanger: drag00n: If you want simple, use Heroku :)
[2014-06-05 20:51:23 -0400] drag00n: So there aren't any good guides?
[2014-06-05 20:51:46 -0400] coderanger: drag00n: None that I'm aware of, if you want to hire me to write one I would be happy to :)
[2014-06-05 20:52:20 -0400] coderanger: drag00n: If you want something super simple, the application_ruby cookbook might be an option, but its super crufty at this point, I need to rewrite them all
[2014-06-05 20:53:34 -0400] drag00n: I did notice that one
[2014-06-05 20:55:18 -0400] coderanger: drag00n: Application deploy is, as I said, an unfortunately complex topic, something I'm working to improve but there doesn't seem to be much support from the community so I can only move so quickly
[2014-06-05 20:55:51 -0400] drag00n: is leveraging this the way to go? http://docs.opscode.com/resource_deploy.html
[2014-06-05 20:56:31 -0400] drag00n: I've got all the infra
[2014-06-05 20:56:36 -0400] coderanger: drag00n: Nooooo
[2014-06-05 20:56:45 -0400] coderanger: drag00n: the deploy resource is terrible :-( Just use a git resource
[2014-06-05 20:57:06 -0400] coderanger: (thats a large part of the problem with the app* cookbooks, they are based on top of the deploy resource)
[2014-06-05 20:58:26 -0400] brint: coderanger: do you know who we can ping if we're having problems fetching the chef-client from s3?
[2014-06-05 20:58:40 -0400] coderanger: brint: Whats the problem?
[2014-06-05 20:59:05 -0400] gleam: coderanger: are you actually using poise-proxy in production? it seems to always think the resource has been modified and triggers apache to reload for me
[2014-06-05 20:59:40 -0400] coderanger: gleam: I don't have a production anymore since I'm a consultant
[2014-06-05 20:59:47 -0400] coderanger: gleam: But I would believe that
[2014-06-05 21:00:03 -0400] gleam: k
[2014-06-05 21:00:12 -0400] gleam: just making sure i wasn't crazy
[2014-06-05 21:01:11 -0400] pokerface: Hey... Anyone got a second? I'm having a real issue installing the apache2 cookbook. Keeps giving me this error "Error executing action `run` on resource 'execute[a2enmod authz_default]"
[2014-06-05 21:02:03 -0400] pokerface: I've updated the default attributes to not include that module since I don't need it at the moment. No matter what I do unless I update the opscode cookbook and delete it, it wont skip that module
[2014-06-05 21:03:07 -0400] coderanger: gleam: I can neither confirm nor deny ...
[2014-06-05 21:03:27 -0400] coderanger: pokerface: How did you update the default?
[2014-06-05 21:03:55 -0400] pokerface: knife role edit webapp
[2014-06-05 21:04:33 -0400] pokerface: In there I didnt include the module hoping that it will use these json configurations instead of the defaults
[2014-06-05 21:04:56 -0400] coderanger: pokerface: Did you set your new module list as a default or override?
[2014-06-05 21:04:59 -0400] coderanger: (it should be the latter)
[2014-06-05 21:05:07 -0400] pokerface: I've done both...
[2014-06-05 21:05:15 -0400] pokerface: I can show you a pastebin of my json?
[2014-06-05 21:05:27 -0400] coderanger: Surely
[2014-06-05 21:06:27 -0400] pokerface: Currently: http://pastebin.com/EQL6ak2X
[2014-06-05 21:07:16 -0400] pokerface: Previous: http://pastebin.com/Uh1FtLMs
[2014-06-05 21:07:38 -0400] pokerface: Neither of them is providing me with the correct results
[2014-06-05 21:08:14 -0400] coderanger: pokerface: Ahh, the / wouldn't do what I'm guessing you think it does
[2014-06-05 21:08:25 -0400] coderanger: pokerface: You need to actually nest the attributes
[2014-06-05 21:08:48 -0400] coderanger: pokerface: You're looking at the attributes in the metadata.rb I'm guessing
[2014-06-05 21:09:30 -0400] pokerface: Yes and copying them to the role attributes using knife but removing the module I do not need
[2014-06-05 21:09:40 -0400] coderanger: pokerface: What you want is "override_attributes": {"apache2": {"default_modules": ["one", "two", ]}}}
[2014-06-05 21:10:02 -0400] coderanger: pokerface: Yeah, ignore that data, it isn't actually used and its format has nothing to do with how you specify attributes
[2014-06-05 21:14:03 -0400] veron: Hi guys  is anyone familiar with test kitchen ?
[2014-06-05 21:14:34 -0400] veron: I'm trying to do a kitchen converge with chef_zero, but the image I'm using has chef 10 (instead of 11) installed
[2014-06-05 21:15:05 -0400] Majost: veron: whats the issue?
[2014-06-05 21:15:15 -0400] pokerface: Ok, so something like this? http://pastebin.com/XTZHtMzr
[2014-06-05 21:15:27 -0400] coderanger: veron: Fix your image?
[2014-06-05 21:15:34 -0400] veron: well the box comes up (I'm using official ubuntu-12.04), but fails because it tries to chef_client -z
[2014-06-05 21:15:38 -0400] wdpro_kevin: vernon: maybe add "require_chef_omnibus: latest" to the provisioner block of your kitchen.yml?
[2014-06-05 21:15:51 -0400] veron: ooh that's what I'm looking for wdpro_kevin thank you
[2014-06-05 21:15:54 -0400] coderanger: veron: It should be override, not default. and remove the recipes thing under the attributes
[2014-06-05 21:16:14 -0400] Majost: does anyone happen to know any way to get a zero instance for all  kitchen node to use?
[2014-06-05 21:16:31 -0400] Majost: instead of within the nodes themselves?
[2014-06-05 21:16:43 -0400] coderanger: Majost: No, there was code for that but I think its been removed
[2014-06-05 21:16:54 -0400] Majost: I want to be able to bring up a three tier app, and have node auto discover eachother via search
[2014-06-05 21:16:59 -0400] coderanger: Majost: the current chef_zero provisioner doesn't use chef_zero directly, it just runs chef-client with -z
[2014-06-05 21:17:07 -0400] Majost: yeah, I saw that
[2014-06-05 21:17:14 -0400] Majost: It burst my bubble really fast
[2014-06-05 21:17:15 -0400] coderanger: Majost: Multi-node testing is currently not something TK supports
[2014-06-05 21:17:16 -0400] Majost: heh
[2014-06-05 21:17:43 -0400] Majost: Unless someone decides to write a kitchen provisioner which does
[2014-06-05 21:17:45 -0400] veron: Majost, I attempted to do it, you can grab the node's json and manually inject it in the "nodes" directory
[2014-06-05 21:18:05 -0400] veron: and if you're using vagrant you can use private_network
[2014-06-05 21:18:05 -0400] Majost: veron: did it work?
[2014-06-05 21:18:08 -0400] veron: yes, they could talk to each other
[2014-06-05 21:18:12 -0400] Majost: huh
[2014-06-05 21:18:21 -0400] egn: hi, I'm trying to use the Chef gem as a client to my Chef Server to delete a node.  Can anyone direct me in the right direction?
[2014-06-05 21:18:24 -0400] coderanger: Majost: Yep
[2014-06-05 21:18:30 -0400] coderanger: Majost: Want to pay me to make one? ;-)
[2014-06-05 21:18:43 -0400] Majost: coderanger: hah
[2014-06-05 21:18:46 -0400] coderanger: egn: What languages are you most familiar with?
[2014-06-05 21:18:48 -0400] veron: just make a nodes directory  you can grab a node json that kitchen generates inside /tmp/kitchen/
[2014-06-05 21:18:50 -0400] egn: coderanger: Ruby
[2014-06-05 21:18:56 -0400] Majost: coderanger: I would love to -- all I need is money!
[2014-06-05 21:19:10 -0400] coderanger: egn: Use https://github.com/sethvargo/chef-api
[2014-06-05 21:19:48 -0400] egn: coderanger: Thanks.  P.S., If you're serious about paying you to do Chef work I might need you for a PaaS I'm making http://prelang.com
[2014-06-05 21:20:00 -0400] egn: coderanger: I've been trying to find somebody
[2014-06-05 21:20:16 -0400] egn: coderanger: erik@prelang.com
[2014-06-05 21:20:19 -0400] coderanger: egn: Sure, I do training and short-term consulting projects
[2014-06-05 21:20:31 -0400] egn: coderanger: Cool, can you shoot me an email?
[2014-06-05 21:20:58 -0400] veron: wdpro_kevin, thanks very much for that tip, it worked like a charm
[2014-06-05 21:21:10 -0400] wdpro_kevin: (y)
[2014-06-05 21:26:51 -0400] Majost: veron: Where were you grabbing the node data?
[2014-06-05 21:27:10 -0400] Majost: From where rather
[2014-06-05 21:29:30 -0400] pokerface: @coderanger: I can't for the life of me figure this out.
[2014-06-05 21:29:46 -0400] coderanger: pokerface: One sec
[2014-06-05 21:29:55 -0400] pokerface: No problem
[2014-06-05 21:35:42 -0400] coderanger: pokerface: http://hastebin.com/zazudotede.json
[2014-06-05 21:36:06 -0400] coderanger: pokerface: So note the that attribute is apache, not apach2 https://github.com/onehealth-cookbooks/apache2/blob/master/attributes/default.rb#L179
[2014-06-05 21:36:09 -0400] mjuszczak: coderanger: The application cookbook pattern has been working for us pretty well, but we've run into a snag.  We have an application cookbook called foo that depends on a user within our custom organization-base cookbook being created.  So in that case, cookbook foo depends on organization-base which is rather gigantic (it includes everything: users, firewall rules, etc.).  All just to create a user...
[2014-06-05 21:36:13 -0400] coderanger: pokerface: and make it override instead of default
[2014-06-05 21:36:48 -0400] coderanger: mjuszczak: Can you factor that out into its own cookbook?
[2014-06-05 21:37:04 -0400] mjuszczak: I know you've mentioned in the past that base cookbooks should potentially be split up into smaller cookbooks -- such as organization-users.  However, what are some other options?  I obviously don't want the foo cookbook creating that user because it gets created within the base cookbook, which I tend to add as part of the run list to production nodes.
[2014-06-05 21:37:30 -0400] mjuszczak: coderanger: So factor out the base cookbook into a base users cookbook, for instance?
[2014-06-05 21:37:41 -0400] coderanger: mjuszczak: Yep, and have both depend on it
[2014-06-05 21:37:54 -0400] coderanger: mjuszczak: include_recipe is debounced so if it is called twice thats fine
[2014-06-05 21:37:57 -0400] mjuszczak: the base cookbook and the application cookbook?
[2014-06-05 21:38:04 -0400] coderanger: so both recipes that need it should call include_recipe
[2014-06-05 21:38:05 -0400] coderanger: yep
[2014-06-05 21:38:10 -0400] mjuszczak: makes sense.
[2014-06-05 21:38:31 -0400] pokerface: @coderanger: Still tries to install that module I'm trying to skip.
[2014-06-05 21:38:53 -0400] coderanger: pokerface: if you run `knife role show linux-web` what do you see?
[2014-06-05 21:39:09 -0400] mjuszczak: thanks
[2014-06-05 21:39:10 -0400] pokerface: It didn't save, I just 're-saved' it and it worked!
[2014-06-05 21:39:26 -0400] pokerface: Awesome! Thanks coderanger
[2014-06-05 21:39:38 -0400] coderanger: pokerface: No prob
[2014-06-05 21:39:53 -0400] coderanger: mjuszczak: Just remember that cookbooks are cheap :)
[2014-06-05 21:40:11 -0400] coderanger: mjuszczak: Also an intermediary solution is to pull the shared stuff into a single recipe but still be in the base cookbook
[2014-06-05 21:40:34 -0400] pokerface: Do you have any sites with tutorials on how to setup apache with multiple vhosts? I think that would involve me creating my own cookbook and include the apache2 cookbook
[2014-06-05 21:40:44 -0400] coderanger: mjuszczak: That does mean you still need to transfer the files for all the dependencies of base, which is kind of annoying (oblig plug for kitchen-sync) but you can do the include_recipe as more granular
[2014-06-05 21:40:59 -0400] pokerface: I don't want to ask you or anyone how to do it since I still need to attempt it
[2014-06-05 21:41:15 -0400] coderanger: pokerface: I don't know of any, but its pretty simple
[2014-06-05 21:41:35 -0400] coderanger: pokerface: Make a cookbook for your application, in its metadata.rb add "depends 'apache2'"
[2014-06-05 21:41:50 -0400] coderanger: pokerface: And then inside that cookbook just add some templates that write to /etc/apache2/sites-enabled
[2014-06-05 21:42:05 -0400] pokerface: Awesome, thanks coderanger!
[2014-06-05 21:50:11 -0400] DandyPandy: Anyone know why I'm getting invalid argument on a directory resource when given the path "/home/<user>/.ssh" (substitute <user> with a real username)
[2014-06-05 21:52:19 -0400] anthonyacquanita: dandyPandy: do you have the top level /home/user directory created yet?
[2014-06-05 21:52:31 -0400] DandyPandy: anthonyacquanita: yes
[2014-06-05 21:52:51 -0400] DandyPandy: I originally had recursive set to true
[2014-06-05 21:55:25 -0400] anthonyacquanita: https://github.com/nickola/chef-ssh-keys/blob/master/recipes/default.rb -- seems simple enough
[2014-06-05 21:55:48 -0400] anthonyacquanita: what does chef debug run say?
[2014-06-05 21:56:02 -0400] DandyPandy: Invalid argument
[2014-06-05 21:56:06 -0400] DandyPandy: This is what I'm doing. https://gist.github.com/dgivens/ebd50179a9fba269cfed
[2014-06-05 21:57:39 -0400] sauraus: Is there a way to depend on cookbooks in metadata.rb that is conditional on running vagrant?
[2014-06-05 21:57:48 -0400] DandyPandy: anthonyacquanita: I just updated it with what chef is showing as the resource (some names have been changed to protect the identity of the innocent)
[2014-06-05 21:58:30 -0400] DandyPandy: sauraus: how about you put it in a group and exclude it when you upload it (assuming you're using berkshelf)
[2014-06-05 22:00:06 -0400] DandyPandy: sauraus: you may want to write a wrapper cookbook, though, that does the includes you need
[2014-06-05 22:00:51 -0400] DandyPandy: sauraus: assuming this is for testing, I will create a test/fixtures/cookbooks directory and put my test cookbooks in there and use that wrapper in my run_list instead of the cookbook directly
[2014-06-05 22:01:36 -0400] anthonyacquanita: mode 700 in cb to mode 448 during the run????
[2014-06-05 22:01:56 -0400] DandyPandy: wtf? good eye
[2014-06-05 22:03:18 -0400] DandyPandy: I'm putting mode in quotes, but I've never needed to do that before
[2014-06-05 22:03:54 -0400] DandyPandy: anthonyacquanita: that fixes mode, but still same error
[2014-06-05 22:04:09 -0400] DandyPandy: I've got to run, but I'll pick this back up tomorrow. Thanks for the help.
[2014-06-05 22:04:32 -0400] anthonyacquanita: run it in debug to see what cmd is throwing the error
[2014-06-05 23:21:17 -0400] maniacal: anyone know if a windows user can use knife ssh with an rsa key for auth?
[2014-06-05 23:21:34 -0400] maniacal: I don't see anything in the docs about passing a /path/to/key
[2014-06-05 23:21:49 -0400] maniacal: just works on osx and linux
[2014-06-05 23:27:20 -0400] coderanger: maniacal: Yes, knife ssh works the same on all platforms
[2014-06-05 23:28:16 -0400] maniacal: so my windows guys are going to have to create a .ssh folder in their home directory and add id_rsa there?
[2014-06-05 23:28:55 -0400] maniacal: I didn't have them try that but I will.
[2014-06-05 23:39:28 -0400] jidar: I have a feeling the .ssh directory, or the id_rsa file need to exist in some special directory, likely not $HOME
[2014-06-05 23:40:02 -0400] jamesgolick: is there a doc somewhere about workflows for releasing to the community cookbooks site?
[2014-06-05 23:40:15 -0400] jamesgolick: i assume the web UI for uploading a tarball isn't the only way?
[2014-06-05 23:40:49 -0400] sarkis: on the subject of knife ssh, can i have it search chef based on the node name, but use the ip to ssh?
[2014-06-05 23:44:01 -0400] sarkis: -a
[2014-06-05 23:44:03 -0400] sarkis: i found it :)
[2014-06-05 23:45:38 -0400] foom_: hey guys, is there a way to chef git checkout an existing branch without the checkout -b deploy part?
[2014-06-05 23:48:49 -0400] jamesgolick: ok nvm found it
[2014-06-05 23:49:10 -0400] coderanger: foom_: enable_checkout false
[2014-06-05 23:49:21 -0400] coderanger: jamesgolick: Check out the stove gem
[2014-06-05 23:53:40 -0400] jamesgolick: coderanger: oh nice - that's way better
[2014-06-05 23:54:57 -0400] sarkis: hmm maybe -a was not what i wanted
[2014-06-05 23:55:15 -0400] sarkis: is there some way to tell knife ssh use the servers IP?
[2014-06-05 23:55:26 -0400] sarkis: seems with -a i have to actually pass an ip.. rather than something like server.ip
[2014-06-05 23:56:47 -0400] sarkis: so that it knows for each server returned use the corresponding ip address?
[2014-06-05 23:56:54 -0400] anthonyacquanita: -a ipaddress
[2014-06-05 23:57:06 -0400] sarkis: ah great, is there a list of these anthonyacquanita
[2014-06-05 23:57:12 -0400] sarkis: or is it just ohai?
[2014-06-05 23:57:39 -0400] anthonyacquanita: it's ohai attr's
[2014-06-05 23:57:43 -0400] sarkis: got it!
[2014-06-05 23:57:45 -0400] sarkis: thanks!
[2014-06-05 23:59:44 -0400] foom_: coderanger: thanks for the tip imma try it out

[2014-06-09 00:55:50 -0400] jayeola: hi guys. what is the most likely source of this error? http://pastebin.com/eSWh8Ajb
[2014-06-09 01:51:42 -0400] MikeTLive: Oh mighty ChefDK packagers  :) can you take a look at the mac deploy, it steps on existing chef/ruby links that may exist in /usr/bin and it also links to things that are not there in the package. see above for details. I didnt see a buildscript anywhere so couldnt give try doing a patch.
[2014-06-09 01:53:34 -0400] MikeTLive: ideally. it doesnt put anything into /usr/bin and instead setting path and env to use /opt/chefdk/bin and creating required config in ~/.chefdk/whatnot would be enough. 
[2014-06-09 01:54:12 -0400] MikeTLive: i'm looking forward to experimenting with it tomorrow. :)
[2014-06-09 03:28:03 -0400] sarkis: is test kitchen the way to go now?
[2014-06-09 03:28:50 -0400] coalbe: sarkis: i dont have any context to your question, but generally yes
[2014-06-09 03:29:13 -0400] sarkis: coalbe: ive read articles that seem older which recommend berkshelf-vagrant
[2014-06-09 03:29:30 -0400] coalbe: they're two different things
[2014-06-09 03:29:31 -0400] sarkis: i thought at one point i did read that going forward berkshelf recommends use of test kitchen now instead?
[2014-06-09 03:29:59 -0400] sarkis: well yea, berkshelf-vagrant would be used say by test kitchen
[2014-06-09 03:30:21 -0400] sarkis: its more of the vagrant plugin where test kitchen is a suite which uses vagrant?
[2014-06-09 03:30:34 -0400] coalbe: sarkis: yes
[2014-06-09 03:30:57 -0400] coalbe: test-kitchen can use many things, including vagrant
[2014-06-09 03:31:03 -0400] coalbe: chef-zero is pretty neat
[2014-06-09 03:32:51 -0400] sarkis: hmm
[2014-06-09 03:33:05 -0400] sarkis: coalbe: so i have a berks-api setup..
[2014-06-09 03:33:49 -0400] sarkis: how would i tell test kitchen where to find the cookbooks, i guess berksfile handles that part
[2014-06-09 03:34:00 -0400] sarkis: berkshelf**
[2014-06-09 04:02:07 -0400] mkirk_: sarkis: What's the advantage of using your own berkshelf-api vs. just using api.berkshelf.com? So that you can add private cookbooks?
[2014-06-09 04:02:56 -0400] sarkis: mkirk_: correct, i connect my chef server up as an endpoint
[2014-06-09 04:03:15 -0400] sarkis: then i source my berkshelf-api before api.berkshelf.com
[2014-06-09 04:03:50 -0400] mkirk_: cool. In that case, I suspect test-kitchen would work just fine, provided you have your Berksfile referencing your endpoint.
[2014-06-09 04:04:09 -0400] sarkis: yea
[2014-06-09 06:15:08 -0400] rsumi: hey room, im getting the following error trying to install phing no matter which method i try with chef
[2014-06-09 06:15:09 -0400] rsumi: pear -d preferred_state=stable install -a pear.phing.info/phing-2.7.0 returned 0
[2014-06-09 06:15:19 -0400] rsumi: ^ thats the error being returned on the console
[2014-06-09 06:16:06 -0400] rsumi: oddly the software does install but i keep getting that error message which is breaking chef
[2014-06-09 06:36:46 -0400] CJNE: i'm looking for some advice regarding building golden images using packer/chef-solo that are going to be provisioned/maintained using chef-client. Is anyone doing that sort of thing? I'm currently trying to figure out how to handle data bags (encrypted and normal). Is it a bad idea for some reason?
[2014-06-09 08:23:23 -0400] ted_cr: hi, Chef newb here, trying to use the owncloud recipe on AWS, with our own custom Opsworks cookbook. I keep getting Mysql version cannot be satisfied. I suspect the Mysql recipe we have is clashing with the opscode one and yeilding the wrong version
[2014-06-09 09:50:35 -0400] coderanger: ted_cr: Possibly, if so you'll need to tweak the dependencies
[2014-06-09 09:51:22 -0400] ted_cr: coderanger, thanks - i am banging my head against this, trying Berskshelf to no avail as well
[2014-06-09 09:55:48 -0400] ted_cr: coderanger: when you say tweak the dependencies ... how exactly would you suggest doing that?
[2014-06-09 09:56:15 -0400] coderanger: ted_cr: Find the thing that depends on mysql and either alter the constraint to match your version numbers or remove it
[2014-06-09 09:56:44 -0400] coderanger: Look in the metadata.rb of the thing that depends on mysql, to be specific
[2014-06-09 09:57:13 -0400] coderanger: Doing mix-n-match with community cookbooks is usually not worth it for exactly this reason
[2014-06-09 09:57:28 -0400] coderanger: either you drink the kool aid or you do it all yourself, either is fine, but mixing them leads to pain
[2014-06-09 09:57:47 -0400] ted_cr: ok, thanks. that sounds about right, I got the feeling this was a square peg, round hole situation!
[2014-06-09 09:58:43 -0400] ted_cr: I suppose it is possible for me to adapt the existing community recipe perhaps?
[2014-06-09 09:59:00 -0400] coderanger: Not sure what you mean
[2014-06-09 09:59:59 -0400] ted_cr: I am attempting to use the opscode owncloud recipe as part of an AWS custom cookbook (forked from OpsWorks and adapted for our systems)
[2014-06-09 10:00:29 -0400] coderanger: Opscode has no such recipe
[2014-06-09 10:00:57 -0400] ted_cr: http://community.opscode.com/cookbooks/owncloud
[2014-06-09 10:01:15 -0400] coderanger: That isn't from Opscode, author is listed as a consulting firm from Spain
[2014-06-09 10:01:33 -0400] ted_cr: ah, i see - hence community
[2014-06-09 10:01:45 -0400] coderanger: The community site is just a publishing system, like rubygems or PyPI
[2014-06-09 10:01:54 -0400] ted_cr: gotit
[2014-06-09 10:22:49 -0400] zeroXten: is there a correct way to check whether a resource exists by name? e.g. I want a notifies :restart, "service[bleh]" only if service[bleh] has been defined somewhere else
[2014-06-09 10:27:43 -0400] coderanger: zeroXten: Not really, you can do it a few ways but its all a bit hacky
[2014-06-09 10:27:46 -0400] coderanger: zeroXten: Whats your use case?
[2014-06-09 10:27:58 -0400] coderanger: zeroXten: Might be easier to invert things if possible
[2014-06-09 10:42:47 -0400] zeroXten: coderanger: i've got a cookbook that provides a couple of resources and recipes. It is loosely coupled from another cookbook I haven't written. The idea is that you can use this cookbook by itself or in conjunction with the other cookbook. If by itself, then a file update wouldn't be able to send a notification to a reource defined in the other cookbook
[2014-06-09 10:43:19 -0400] coderanger: zeroXten: Check for the cookbook then
[2014-06-09 10:43:36 -0400] coderanger: notifies asdfasdf if node['recipes'].include?('asdfasdf')
[2014-06-09 10:44:00 -0400] coderanger: Or make a third cookbook that does the integration between the two disconnected bits
[2014-06-09 10:46:03 -0400] zeroXten: coderanger: ahh, that makes sense :) I was over complicating things. There already joined further up the hierarchy (ie an "application" cookbook would use the two library cookbooks)
[2014-06-09 10:49:44 -0400] smudgerdan: Morning
[2014-06-09 11:00:21 -0400] pank: When running "Knife configure -i" on Workstation I am getting error "ERROR: Failed to authenticate with key c:/chef/admin.pem. Response: Invalid signature for user or client 'admin'". Any clue whats wrong?
[2014-06-09 11:01:49 -0400] gauravarora: pank: i had the same problem, deleted the pem file and the client redownloaded it
[2014-06-09 11:11:15 -0400] smudgerdan: Hi guys, I am getting this error when the chef client tries to sync the files in the cookbooks: SSL_connect SYSCALL returned=5 errno=0 state=SSLv3 read finished A This is on Windows. Any ideas?
[2014-06-09 11:19:44 -0400] CJNE: is there any documentation for what is availble in Chef::Config or @config? Looking for a way to get the chef server url and use in a recipe
[2014-06-09 11:24:05 -0400] coderanger: CJNE: Chef::Config[:chef_server_url]
[2014-06-09 11:24:19 -0400] coderanger: CJNE: see chef/config.rb for the full list of keys
[2014-06-09 11:24:32 -0400] CJNE: thanks! is @config deprecated?
[2014-06-09 11:24:33 -0400] coderanger: smudgerdan: Fix your CA certs
[2014-06-09 11:24:48 -0400] coderanger: pank: Your API key is incorrect
[2014-06-09 11:26:17 -0400] coderanger: CJNE: I don't know where thats even still available, but yes, use the global instance
[2014-06-09 11:27:16 -0400] CJNE: OK, i googled and found lots of references to @config, thanks for the clarification
[2014-06-09 11:27:52 -0400] coderanger: CJNE: That was maybe a thing back in the 0.9 days, pretty sure it would just fail now :)
[2014-06-09 11:28:50 -0400] smudgerdan: strange it started breaking around the new release, will have a look thanks
[2014-06-09 11:30:47 -0400] coderanger: smudgerdan: Yes, Chef is migrating towards verified TLS
[2014-06-09 11:31:03 -0400] coderanger: smudgerdan: It has been printing warnings about this for several months :)
[2014-06-09 11:31:25 -0400] coderanger: smudgerdan: Previously the default was to not verify the TLS certificates, which is a pretty serious security issue
[2014-06-09 11:32:14 -0400] smudgerdan: Yes, sorry just we set and forget with automation.  As it was working no one was looking at the output =) live and learn
[2014-06-09 11:38:32 -0400] pank: coderanger: how do I fix API key?
[2014-06-09 11:39:32 -0400] coderanger: smudgerdan: You can re-disable the verification in your client.rb if its a blocker issue, but my security training requires I add a large dose of "caveat emptor"
[2014-06-09 11:40:06 -0400] coderanger: pank: Did you just setup your chef-server?
[2014-06-09 11:40:54 -0400] pank: yes
[2014-06-09 11:45:05 -0400] coderanger: pank: Where did you copy the admin.pem from?
[2014-06-09 12:04:29 -0400] pank: coderanger: from /etc/chef-server/admin.pem
[2014-06-09 12:05:57 -0400] coderanger: pank: Have you previously reset the admin key?
[2014-06-09 12:06:48 -0400] pank: When logging for first time, I checked the box "Regenerate Key"
[2014-06-09 12:08:48 -0400] coderanger: You need that key then
[2014-06-09 12:11:28 -0400] pank: coderanger: After regenerate, I have again copied admin.pem
[2014-06-09 12:11:35 -0400] pank: still same error
[2014-06-09 12:11:47 -0400] nebrera: hello
[2014-06-09 12:11:53 -0400] coderanger: pank: No, the admin.pem on the server is now useless, you need the private key it gave you in the interface
[2014-06-09 12:12:05 -0400] nebrera: I am having an issue with ohai
[2014-06-09 12:12:31 -0400] nebrera: I am usign ohai sintax version 6 but using ohai version 7
[2014-06-09 12:12:52 -0400] nebrera: I get a warning it will not be supported in the future
[2014-06-09 12:12:58 -0400] nebrera: but for now it is supported
[2014-06-09 12:13:07 -0400] pank: coderanger: so do I copy the private key in admin.pem?
[2014-06-09 12:13:25 -0400] coderanger: nebrera: That is correct
[2014-06-09 12:13:32 -0400] coderanger: pank: Yes
[2014-06-09 12:13:37 -0400] pank: and replace entire admin.pem content with the key?
[2014-06-09 12:14:25 -0400] coderanger: pank: Yes
[2014-06-09 12:18:43 -0400] nebrera: when the ohai parameters are loaded in ner version ?
[2014-06-09 12:19:19 -0400] nebrera: because I see first time chef-client run I get ohai values, but second runs (after interval) this ohai parameters are not loaded
[2014-06-09 12:19:53 -0400] nebrera: <coderanger>, do you have any idea what it could be happen this ?
[2014-06-09 12:21:04 -0400] nebrera: I get into logs:  INFO: Loading cookbooks [ ...... ]
[2014-06-09 12:21:21 -0400] nebrera: and later:
[2014-06-09 12:21:24 -0400] nebrera: INFO: ohai plugins will be at: /etc/chef/ohai_plugins
[2014-06-09 12:22:28 -0400] coderanger: nebrera: What are you seeing that makes you think ohai isn't loading for daemon runs?
[2014-06-09 12:23:17 -0400] nebrera: after loading cookbooks I have added a print of some variables
[2014-06-09 12:23:24 -0400] nebrera: and first time they have value
[2014-06-09 12:23:47 -0400] nebrera: second run (after elapsed the interval period) I get null value
[2014-06-09 12:23:58 -0400] pank: coderanger: Thanks a lot. It is resolved
[2014-06-09 12:23:58 -0400] nebrera: and thie variable is on ohai plugin
[2014-06-09 12:24:53 -0400] coderanger: nebrera: Please pastebin this code
[2014-06-09 12:25:09 -0400] nebrera: ok
[2014-06-09 12:25:11 -0400] nebrera: better :-D
[2014-06-09 12:25:19 -0400] nebrera: one sec
[2014-06-09 12:25:23 -0400] nebrera: preparing it
[2014-06-09 12:25:56 -0400] nebrera: this is for first run
[2014-06-09 12:26:02 -0400] nebrera: http://pastebin.com/C7PD0P42
[2014-06-09 12:26:15 -0400] nebrera: and you can see how all printed vars are true
[2014-06-09 12:26:24 -0400] nebrera: 1.- true
[2014-06-09 12:26:27 -0400] nebrera: 2.- true
[2014-06-09 12:26:27 -0400] nebrera: ...
[2014-06-09 12:27:28 -0400] nebrera: on second run
[2014-06-09 12:27:29 -0400] nebrera: http://pastebin.com/BNE30YaZ
[2014-06-09 12:28:10 -0400] nebrera: as you can see the variables are printed into different moments
[2014-06-09 12:28:31 -0400] nebrera: first time variables are after the ohai plugin is loaded
[2014-06-09 12:28:48 -0400] coderanger: please pastebin the actual code, both the recipe and what I presume is the custom ohai plugin
[2014-06-09 12:28:50 -0400] nebrera: and second time the variables are printed before the ohai plugin is loaded
[2014-06-09 12:29:04 -0400] nebrera: yes it is custom ohai plugin
[2014-06-09 12:29:29 -0400] nebrera: what code do you need
[2014-06-09 12:29:33 -0400] nebrera: ohai plugin ?
[2014-06-09 12:29:36 -0400] nebrera: it is so long
[2014-06-09 12:30:02 -0400] coderanger: The recipe would be a start, hard to tell much from just the output
[2014-06-09 12:30:21 -0400] nebrera: yes I know
[2014-06-09 12:30:41 -0400] nebrera: I paste bin the relevant part at recipie
[2014-06-09 12:30:43 -0400] nebrera: one sec
[2014-06-09 12:31:00 -0400] coderanger: Though actually
[2014-06-09 12:31:07 -0400] coderanger: the run lists are in different orders
[2014-06-09 12:31:12 -0400] coderanger: the second one is reversed
[2014-06-09 12:31:20 -0400] nebrera: I see
[2014-06-09 12:31:32 -0400] coderanger: which probably means your recipe dependencies are not sufficiently explicit
[2014-06-09 12:31:40 -0400] coderanger: so it was only working accidentally to start with
[2014-06-09 12:32:13 -0400] nebrera: but why it is ok at the first run
[2014-06-09 12:32:53 -0400] coderanger: Probably because whatever order is needed for things to work happens to be the case there
[2014-06-09 12:33:02 -0400] coderanger: How are you running chef in both cases
[2014-06-09 12:33:21 -0400] coderanger: It looks like  you are using -o
[2014-06-09 12:33:37 -0400] nebrera: I will check
[2014-06-09 12:34:05 -0400] nebrera: ruby /usr/bin/chef-client -c /etc/chef/client.rb --node-name bicho -j /etc/chef/role-sensor.json
[2014-06-09 12:34:06 -0400] coderanger: which has no effect on daemon runs AFAIK, so for the first run it probably uses that, and then uses the stored run list from the server for the rest
[2014-06-09 12:34:12 -0400] whiteadam: Anyone write a lot of Markdown on Mac? I'm looking for something to help me live-preview a little better... I hear Marked is good.
[2014-06-09 12:34:22 -0400] coderanger: Yeah, don't use the -j, that exists for bootstrapping _only_
[2014-06-09 12:34:36 -0400] coderanger: nebrera: and the node name should be set in the config file generally
[2014-06-09 12:34:44 -0400] coderanger: whiteadam: marked or mou
[2014-06-09 12:35:30 -0400] whiteadam: coderanger: Yeah, I have Mou. I'll have to play with it a bit more
[2014-06-09 12:35:31 -0400] coderanger: whiteadam: Neither have great support for all GFMD features though, so \_()_/
[2014-06-09 12:35:40 -0400] whiteadam: coderanger: boooo
[2014-06-09 12:36:28 -0400] coderanger: whiteadam: If you use sublime, there are some nice plugins to integrate with Marked that make it more workable
[2014-06-09 12:37:18 -0400] coderanger: whiteadam: Both haven't updated in 6+ months though
[2014-06-09 12:37:53 -0400] whiteadam: coderanger: Yeah, I noticed that. I don't really want to dish out a few bucks without knowing they'll update, cuz I'm cheap!
[2014-06-09 12:38:34 -0400] whiteadam: coderanger: Trying to figure out a Jekyll workflow to keep my docs nice and tidy... I might just make somethin that converts from MindManager to MarkDown or something.
[2014-06-09 12:39:55 -0400] CJNE: whiteadam: Marked is good for live preview :)
[2014-06-09 12:40:46 -0400] nebrera: how do I see the order stored for run list ?
[2014-06-09 12:41:03 -0400] nebrera: <coderanger>, in previous version it wasworking for me perfectly
[2014-06-09 12:41:33 -0400] coderanger: nebrera: knife node show
[2014-06-09 12:42:08 -0400] nebrera: yep the order is wrong
[2014-06-09 12:45:33 -0400] whiteadam: coderanger: I notice they have a newer version, but no dates on the changelog: http://marked2app.com/
[2014-06-09 12:46:27 -0400] coderanger: Huh, also the price is 4x
[2014-06-09 12:46:31 -0400] coderanger: Good to know though
[2014-06-09 12:47:38 -0400] coderanger: nebrera: In a perfect world, roles and recipes should all be encapsulated such that order of execution is irrelevant :)
[2014-06-09 12:47:56 -0400] coderanger: nebrera: or at least thats part of the idea behind a convergent, idempotent system
[2014-06-09 12:48:08 -0400] nebrera: my fault
[2014-06-09 12:48:14 -0400] nebrera: I think now it is solved
[2014-06-09 12:48:15 -0400] coderanger: In related news it is 6AM and I should probably go to bed now that the sun is up :)
[2014-06-09 12:48:24 -0400] whiteadam: coderanger: great job
[2014-06-09 12:48:29 -0400] nebrera: checking it
[2014-06-09 13:04:56 -0400] zeroXten: according to the docs, you can't have files/PLATFORM_FAMILY/bleh .. is that correct?
[2014-06-09 13:07:02 -0400] CJNE: zeroXten, never used it but it should look in files/platform_family/bleh first, to a test converge and point to a file that don't exist and it will tell you where it looked for it
[2014-06-09 13:09:53 -0400] zeroXten: yeah, just double checked.. it doesn't look at platform_family ... only platform-version, platform, default :(
[2014-06-09 13:10:01 -0400] zeroXten: kinda weird
[2014-06-09 13:12:38 -0400] zeroXten: monkey patch *all* the things
[2014-06-09 13:12:45 -0400] CJNE: aha, perhaps family isn't used much besides ubuntu/debian
[2014-06-09 13:12:54 -0400] zeroXten: rhel o_O
[2014-06-09 13:16:05 -0400] larryebaum: back
[2014-06-09 13:16:20 -0400] CJNE: ah, you mean distribution family
[2014-06-09 13:20:01 -0400] zeroXten: CJNE: well, chef calls it platform_family
[2014-06-09 13:22:08 -0400] CJNE: yeah, i guess you need to use that method in your recipe to select the corrct file
[2014-06-09 14:06:36 -0400] rootcho: guys, i need some help. I do not understand why the last variable is empty after execution
[2014-06-09 14:06:39 -0400] rootcho:                 @get_layername   = node[:opsworks][:instance][:layers].first                 @service         = @get_layername.split("_",3)[0,2].join("_")                 @system_swap     = #{node[:system][:swap]['#{@service}']}
[2014-06-09 14:06:46 -0400] rootcho:                 @get_layername   = node[:opsworks][:instance][:layers].first                 @service         = @get_layername.split("_",3)[0,2].join("_")                 @system_swap     = #{node[:system][:swap]['#{@service}']}
[2014-06-09 14:07:38 -0400] rootcho: @get_layername   = node[:opsworks][:instance][:layers].first
[2014-06-09 14:07:40 -0400] rootcho: @service         = @get_layername.split("_",3)[0,2].join("_")
[2014-06-09 14:07:50 -0400] rootcho: @system_swap     = #{node[:system][:swap]['#{@service}']}
[2014-06-09 14:08:55 -0400] coderanger: rootcho: Please use a pastebin
[2014-06-09 14:09:06 -0400] rootcho: sorry guys
[2014-06-09 14:10:28 -0400] rootcho: http://pastebin.com/DneUhwhu
[2014-06-09 14:10:32 -0400] rootcho: this is the pastebin link
[2014-06-09 14:10:49 -0400] rootcho: so my problem is with system_swap it's always empty
[2014-06-09 14:11:15 -0400] rootcho: and i can;t understand how can i fetch the correct value from the attributes
[2014-06-09 14:14:05 -0400] coderanger: rootcho: Where is that defined?
[2014-06-09 14:14:18 -0400] coderanger: and how does it get called
[2014-06-09 14:16:41 -0400] rootcho: the definition of default[:system][:swap]                         = { test_live1 => '16', ... }
[2014-06-09 14:16:53 -0400] coderanger: rootcho: Certainly setting instance variables like that is not common, nor is it recommended
[2014-06-09 14:16:54 -0400] rootcho: is in the cookbook attributes file
[2014-06-09 14:17:37 -0400] coderanger: rootcho: None of this should even compile
[2014-06-09 14:17:44 -0400] rootcho: well it does
[2014-06-09 14:18:06 -0400] coderanger: rootcho: Okay, so at a minimum that needs to be  { 'test_live1' => '16', ... }
[2014-06-09 14:18:25 -0400] rootcho: the ... are other values
[2014-06-09 14:18:40 -0400] coderanger: Yes, I mean yoy need quotes around the key
[2014-06-09 14:18:57 -0400] rootcho: right sorry i do have
[2014-06-09 14:19:00 -0400] coderanger: otherwise I guess the old method_missing hack kicks in and you get back nil
[2014-06-09 14:19:42 -0400] coderanger: Okay, next question is why you are defining a method in recipe code
[2014-06-09 14:20:01 -0400] rootcho: it is in a library because i can;t do it in a recipe
[2014-06-09 14:20:18 -0400] coderanger: In a library that definitely doesn't do what you hope it does :)
[2014-06-09 14:20:23 -0400] rootcho: indeed
[2014-06-09 14:20:42 -0400] coderanger: library files are just pure Ruby code, there is no magic #node method
[2014-06-09 14:20:54 -0400] coderanger: nor can you set instance variables when there is no instance
[2014-06-09 14:21:12 -0400] rootcho: ok but the first 2 variables show the proper output
[2014-06-09 14:21:21 -0400] rootcho: the 3rd one is empty
[2014-06-09 14:21:25 -0400] coderanger: rootcho: That shouldn't be possible
[2014-06-09 14:21:47 -0400] coderanger: rootcho: Please pastebin the full library code and the recipe calling it
[2014-06-09 14:24:50 -0400] rootcho: coderanger http://pastebin.com/x4ag32nT
[2014-06-09 14:25:12 -0400] rootcho: i do not claim it is correct, just trying to find the right way to do it
[2014-06-09 14:25:17 -0400] rootcho: and it is a test
[2014-06-09 14:25:35 -0400] coderanger: There we go, you're using it as a DSL extension
[2014-06-09 14:26:12 -0400] coderanger: rootcho: I get the feeling you aren't familiar with Ruby, what langs do you use?
[2014-06-09 14:26:40 -0400] rootcho: i'm not a ruby coder
[2014-06-09 14:26:52 -0400] coderanger: Yes, I got that much
[2014-06-09 14:27:04 -0400] rootcho: usually bash, rusty perl and C
[2014-06-09 14:27:34 -0400] coderanger: Okay, so the issue is that #{} in ruby isn't quite like ${} in bash
[2014-06-09 14:27:51 -0400] coderanger: specifically in Ruby you can only use #{}, called string interpolation, inside strings
[2014-06-09 14:28:01 -0400] coderanger: even more specifically, they have to be double-quote strings
[2014-06-09 14:28:23 -0400] coderanger: but # does double duty, it is also the comment character like in Bash, perl, and most other langs
[2014-06-09 14:28:33 -0400] coderanger: So @system_swap     = #{node[:system][:swap]['#{@service}']}
[2014-06-09 14:28:47 -0400] coderanger: That line isn't setting the variable to be a string value
[2014-06-09 14:29:12 -0400] coderanger: because that # isn't in double quotes, so thats a comment
[2014-06-09 14:29:41 -0400] coderanger: Same thing happens on the next line too
[2014-06-09 14:29:51 -0400] coderanger: and because the = creates an implicit line continuations
[2014-06-09 14:30:06 -0400] coderanger: that code is actually parsed as "@system_swap = puts()"
[2014-06-09 14:30:07 -0400] mjuszczak: I have a "myorg-openldap" cookbook which wraps around the upstream chef openldap cookbook.  I also have a "myorg-sssd" cookbook which wraps around the upstream sssd cookbook.  Individually, these cookbooks work great.  I can "kitchen test" them and it does what it needs to do... I can test connectivity on the openldap wrapper cookbook and I can test that, for instance, sssd is running in the sssd cookbook.
[2014-06-09 14:30:32 -0400] mjuszczak: My problem is -- I can't really spin up a server that has both sssd and openldap::server running on them so I can test that sssd can talk to openldap::server.  I guess this is kind of similar to the mysql::client and mysql::server scenario which usually appear in one cookbook... however, putting sssd and openldap in the same cookbook just because they "talk" to each other seems kind of weird.  I suppose I could have an authentication "application coo
[2014-06-09 14:30:37 -0400] coderanger: rootcho: Also for your purposes, "#{x}" == x, so just drop the string bits
[2014-06-09 14:31:31 -0400] coderanger: mjuszczak: Why can't you?
[2014-06-09 14:31:39 -0400] rootcho: coderanger thanks, will try :-)
[2014-06-09 14:32:03 -0400] coderanger: mjuszczak: Just put both in the run list in kitchen.yml
[2014-06-09 14:33:48 -0400] mjuszczak: coderanger: but that means I have to make one cookbook depend on the other or vice versa (IE: metadata.rb)
[2014-06-09 14:34:10 -0400] coderanger: mjuszczak: Nah, just put it in the berksfile
[2014-06-09 14:34:21 -0400] coderanger: mjuszczak: group(:test) do cookbook 'whatever' end
[2014-06-09 14:35:04 -0400] mjuszczak: oh!  Intriguing.  So if you were in my case, having myorg-openldap and myorg-sssd isn't so bad?  Also, where do you see the test to make sure sssd can connect to openldap living?  Inside the openldap cookbook or sssd cookbook?  I guess the latter.
[2014-06-09 14:35:36 -0400] coderanger: I have managed to purge most knowledge of openldap from my brain so I refused to have an opinion on that :)
[2014-06-09 14:35:57 -0400] mjuszczak: haha!   Don't like it?
[2014-06-09 14:36:00 -0400] coderanger: (fun fact, the first open source I ever released was a pure-scheme LDAP client lib)
[2014-06-09 14:36:11 -0400] mjuszczak: oh!  That's awesome.  Is it still out there somewhere?
[2014-06-09 14:36:38 -0400] coderanger: Maybe, I think SourceForge purged projects at one point but I've long since forgotten the login info
[2014-06-09 14:37:09 -0400] mjuszczak: Gotcha
[2014-06-09 14:38:30 -0400] mjuszczak: One more architecture question then and I think I'm good for a few weeks.  To get the SSSD thing working, I have to wrap chef-sssd (upstream cookbook) -- but nothing crazy, just setting attributes.  I also have to wrap chef-openssh (upstream) but again -- just setting attributes, maybe dropping one template into place.  As of now, I have an sssd cookbook for the sssd portion, but maybe this is getting overboard.  Might an auth cookbook be better, or 
[2014-06-09 14:40:11 -0400] coderanger: I don't know what sssd is, so again , I don't think I can comment
[2014-06-09 14:40:29 -0400] coderanger: also getting fairly loopy since I've been awake for ~20 hours
[2014-06-09 14:41:21 -0400] mjuszczak: sssd in the same as pam-ldap -- it's the client libraries to talk to openldap server
[2014-06-09 14:41:47 -0400] coderanger: Ahh, then yeah, or just put that in your base cookbook
[2014-06-09 14:43:28 -0400] mjuszczak: If it was just sssd, I'd say separate cookbook.  But the fact is, it needs a small change to ssh, and a tiny change to /etc/nsswitch.conf.  Seems weird to create three cookbooks for such small things.  So I'm thinking either an "auth" cookbook, or simply base::sssd, base::ssh, base::nsswitch
[2014-06-09 14:43:45 -0400] mjuszczak: If something only requires one resource like that, do you usually tend to just keep it as a recipe in base?
[2014-06-09 14:43:46 -0400] coderanger: Or just base::auth
[2014-06-09 14:43:52 -0400] mjuszczak: ah!  True
[2014-06-09 14:44:51 -0400] coderanger: But I also make whole cookbooks for single attribute overrides
[2014-06-09 14:44:53 -0400] coderanger: so :)
[2014-06-09 14:51:20 -0400] mhulan: hello, will chef-server-api (10.30.4) work with chef server 11.*?
[2014-06-09 14:53:45 -0400] coderanger: mhulan: I don't know what you mean
[2014-06-09 14:54:05 -0400] coderanger: mhulan: chef server 11 is a full replacement, chef-server-api was the old ruby implementation and is gone
[2014-06-09 14:54:14 -0400] mhulan: coderanger: is that compatible? I'd say based on version numbers that it could differ
[2014-06-09 14:54:25 -0400] mhulan: coderanger: so I have to install latest chef gem if I want to use chef API?
[2014-06-09 14:54:34 -0400] coderanger: mhulan: If you are asking about clients, yes, chef server 11 works with version 10 clients
[2014-06-09 14:54:56 -0400] mhulan: coderanger: no, I want to write some scripts that will comunicate with chef server API
[2014-06-09 14:55:04 -0400] mhulan: coderanger: so I'm looking for some lib that I could use
[2014-06-09 14:55:15 -0400] mhulan: basically some bindings
[2014-06-09 14:55:23 -0400] coderanger: mhulan: chef-api, pychef, jclouds-chef, what language are you using
[2014-06-09 14:55:46 -0400] coderanger: mhulan: chef-server-api is neither a language binding nor something you can use, its the old API service :)
[2014-06-09 14:56:27 -0400] mhulan: coderanger: ah, chef-api is what I'm looking for, thanks
[2014-06-09 14:56:46 -0400] coderanger: :-)
[2014-06-09 15:01:21 -0400] mjuszczak: coderanger: haha, interesting.  So how do you determine whether to go with a whole cookbook or just a recipe in a base?
[2014-06-09 15:01:43 -0400] mjuszczak: coderanger: Perhaps if it's something that might be called on by more than one cookbook, like mongodb?
[2014-06-09 15:01:50 -0400] coderanger: mjuszczak: I always make more cookbooks
[2014-06-09 15:02:41 -0400] coderanger: mjuszczak: The only time I have more than one recipe in a cookbook is for collective nouns
[2014-06-09 15:03:23 -0400] mjuszczak: interesting
[2014-06-09 15:03:31 -0400] mjuszczak: collective nouns...?
[2014-06-09 15:03:49 -0400] mjuszczak: coderanger: with that group (:test) in the bErksfile, how do I "reference" that?
[2014-06-09 15:03:57 -0400] coderanger: mjuszczak: ci::project-a, ci::project-b, etc
[2014-06-09 15:04:20 -0400] coderanger: mjuszczak: Works like groups in bundler, so all are enabled by default, can disable with --except
[2014-06-09 15:04:24 -0400] coderanger: so `berks upload -e test`
[2014-06-09 15:04:53 -0400] mjuszczak: awesome
[2014-06-09 15:09:10 -0400] mjuszczak: thanks coderanger! makes sense
[2014-06-09 15:10:33 -0400] medya: is there a way to delete a node from chef-server whenever you destroy the vagrant machine?
[2014-06-09 15:11:31 -0400] coderanger: medya: https://docs.vagrantup.com/v2/provisioning/chef_client.html cleanup section
[2014-06-09 15:12:01 -0400] medya: @coderanger thanks a lot :)
[2014-06-09 15:13:52 -0400] medya: @coderanger do you know the diffrence of chef.delete_client  and chef.delete_node  ?
[2014-06-09 15:14:15 -0400] medya: the documentation says set both to true, whats their diffrenece ? node and client ...
[2014-06-09 15:14:36 -0400] coderanger: medya: the node contains the actual node data, the client is the API authentication client
[2014-06-09 15:14:50 -0400] coderanger: medya: There is literally no reason you would set those to different values
[2014-06-09 15:15:15 -0400] medya: node data like what ? like reports of the past failures ?
[2014-06-09 15:16:11 -0400] medya: does that mean , if I set delete_node to false and set delete_client to true ? will it let me create the machine again with vagrant up and save the reports from past failures for that node?
[2014-06-09 15:17:02 -0400] drywheat: i am using an SSH gateway to access some nodes that are in a private subnet. i can execute SSH commands just fine (i.e. `knife ssh name:<query> -G user@my.gateway.com 'uptime'`) but trying to multiplex a terminal fails
[2014-06-09 15:17:25 -0400] drywheat: in other words, i can't use the gateway to execute `tmux' or `screen' against nodes
[2014-06-09 15:18:06 -0400] drywheat: is there something i'm missing here?
[2014-06-09 15:20:20 -0400] medya: @coderanger after I set the delete_client and delete_node to true, I get this error for vagrant destory : """ Cleaning up the 'node' for Chef failed. The stdout and chef is not part of the bundle. Add it to Gemfile. (Gem::LoadError)"""
[2014-06-09 15:20:24 -0400] sanguisdex: I have a cent box that I need to be able to boot strap to the chefserver, but it would be best if I could start the boot strapping from inside the box and nnot from my local running knife-bootstrap
[2014-06-09 15:20:35 -0400] sanguisdex: is there a best practice for that
[2014-06-09 15:20:53 -0400] coderanger: medya: Fix that ;-)
[2014-06-09 15:21:08 -0400] coderanger: sanguisdex: Define "inside the box"?
[2014-06-09 15:21:30 -0400] coderanger: sanguisdex: By definition bootstrapping usually means the box doesn't yet exist
[2014-06-09 15:21:35 -0400] medya: haha okay, seems to be an open issue ticket for it ;)
[2014-06-09 15:22:07 -0400] sanguisdex: coderanger: ahhh I probably have the wrong term.
[2014-06-09 15:23:10 -0400] coderanger: medya: easiest fix is probably `vagrant plugin install chef`
[2014-06-09 15:23:18 -0400] sanguisdex: I have two bare metal boxes that are behind some pretty strict firewalls. I would like the setup chef-client on the machines first and then ping the chef server, as an outgoing process from that box
[2014-06-09 15:23:22 -0400] coderanger: medya: Or you can go crazy mode and run vagrant from bundler
[2014-06-09 15:23:37 -0400] sanguisdex: what info do I need to setup the chef client for that?
[2014-06-09 15:23:38 -0400] coderanger: sanguisdex: Just build it in to your OS image
[2014-06-09 15:23:46 -0400] medya: what does vagrant plugin install chef does?
[2014-06-09 15:23:47 -0400] coderanger: sanguisdex: How do you get the OS on the boxes?
[2014-06-09 15:24:04 -0400] coderanger: medya: Installs chef into the vagrant ruby environment
[2014-06-09 15:24:05 -0400] sanguisdex: other sysadmins have build the base installs
[2014-06-09 15:24:26 -0400] sanguisdex: I am installing the webserver stack via chef
[2014-06-09 15:24:41 -0400] medya: so it will not use the local chef ? whats the advantage of that ?
[2014-06-09 15:25:57 -0400] coderanger: sanguisdex: I mean you need to have something initiate the process, either its the imaging system or your workstation or something else
[2014-06-09 15:26:02 -0400] coderanger: medya: ::jazzhands::
[2014-06-09 15:26:17 -0400] coderanger: medya: Vagrant uses an isolated ruby install because it makes packaging easier
[2014-06-09 15:26:27 -0400] coderanger: medya: So you need to install chef in to that
[2014-06-09 15:28:30 -0400] sanguisdex: coderanger: some one else is provideing me with shell access to a clean install of cent, I need to then get chef-client to a point where I can connect to chef-server (hosted chef) to define an new node and process the runlist
[2014-06-09 15:28:42 -0400] coderanger: sanguisdex: use knife bootstrap
[2014-06-09 15:32:24 -0400] sanguisdex: coderanger: maybe I am just ignorant but to clarify, should I use knife boostrap when logged into the machine that I want to become a node? or should I run it from my work station. will it it shell into the target node, and connect to the hosted chef server from there?
[2014-06-09 15:33:06 -0400] mattstratton: the latter
[2014-06-09 15:33:22 -0400] mattstratton: you run knife bootstrap from any machine you want (usually a workstation)
[2014-06-09 15:33:58 -0400] mkirk_: sanguisdex: you run knife from your local machine, it connects to the remote and sets it up to run chef using minimal tools that should be installed on any machine.
[2014-06-09 15:34:16 -0400] mkirk_: sanguisdex: http://docs.opscode.com/knife_bootstrap.html
[2014-06-09 15:35:49 -0400] cheeseplus: mattstratton: fun q: how do you bootstrap a workstation that is also a client? (or how to bootstrap the bootstrapper)
[2014-06-09 15:35:54 -0400] medya: @coderanger, can a node get attributes of another node ? like can a cookbook in node1 find an attribute in node2 ? for example let say node 1 is a load balancer and wants the ips of node 2 and node 3?
[2014-06-09 15:36:13 -0400] cheeseplus: I was playing around recently and couldn't find instructions (I know how to do it manually ofc)
[2014-06-09 15:36:59 -0400] sanguisdex: mkirk_: coderanger great!, I was just not aware of the workflow of bootstrap. thanks!
[2014-06-09 15:37:14 -0400] cheeseplus: medya: I'd not rely on attributes like that, instead I'd use a databag or something else to pull these attributes from
[2014-06-09 15:37:44 -0400] cheeseplus: attributes as reported by the chef-server may not always reflect reality
[2014-06-09 15:37:57 -0400] mattstratton: @cheesplus but that's the common use of search, right? find all servers with role "webserver" and have the haproxy add them to its pool
[2014-06-09 15:38:06 -0400] mattstratton: <--- cannot spell @cheeseplus's name
[2014-06-09 15:38:35 -0400] cheeseplus: mattstratton: it is but I'd not rely on it
[2014-06-09 15:38:37 -0400] medya: how would you store that in databag ? can nodes set their own ip addresses in the databag ? and later the loadbalancer ask for databag item 1 and 2 and so on ?
[2014-06-09 15:38:59 -0400] medya: I thought u can put data in databag only on server
[2014-06-09 15:39:05 -0400] medya: and nodes can not put stuff in databag, right?
[2014-06-09 15:39:14 -0400] workmad3: medya: updating databags from recipe runs requires nodes to have admin privileges on the server
[2014-06-09 15:39:39 -0400] workmad3: medya: it also opens a potential distributed race condition up in your infrastructure
[2014-06-09 15:39:47 -0400] mattstratton: also, you can get into trouble w/ databags if you use environments. there are workarounds, but if you aren't paying attention, you can get your stuff confused
[2014-06-09 15:39:49 -0400] cheeseplus: medya: not saying you can't do it the other way but it can be brittle (anecdotally)
[2014-06-09 15:39:55 -0400] medya: imagine  I create 2 nodes in aws, I dont know their ips, then I wanna add those ips to the load balancer...how do I make the nodes to put their ips in the loadbalancers?
[2014-06-09 15:39:56 -0400] mattstratton: although if you don't use environments, then it doesn't matter
[2014-06-09 15:40:14 -0400] workmad3: medya: use searches
[2014-06-09 15:40:22 -0400] cheeseplus: my advanced level recommendation is using something external like etcd or serf or zookeeper
[2014-06-09 15:40:26 -0400] medya: workmad3, how
[2014-06-09 15:40:30 -0400] dex: hey
[2014-06-09 15:40:35 -0400] dex: i got a serious problem
[2014-06-09 15:40:37 -0400] medya: like each node search for a specific node name ?
[2014-06-09 15:40:42 -0400] workmad3: medya: search(:node, "some search string")
[2014-06-09 15:40:47 -0400] Guest99878: my 127.0.0.1 redirects to https://hostname
[2014-06-09 15:40:58 -0400] Guest99878: how can i access my /var/www again?
[2014-06-09 15:41:02 -0400] medya: then I can get their ips ?
[2014-06-09 15:41:04 -0400] Guest99878: i wasted my time a ton
[2014-06-09 15:41:14 -0400] medya: so a node can search for other nodes and then get their ips ?
[2014-06-09 15:41:16 -0400] Guest99878: please help me ?
[2014-06-09 15:41:21 -0400] workmad3: medya: e.g. if they both use the same recipe - search(:node, "recipes:foobar")... or (my preference), tag servers and then 'search(:node, "tags:foobar")'
[2014-06-09 15:41:33 -0400] workmad3: medya: node can search for other nodes and then access any node data on them
[2014-06-09 15:41:46 -0400] Guest99878: 127.0.0.1 redirects to https://hostname/user/login
[2014-06-09 15:41:59 -0400] Guest99878: I have to solve this problem to start my work again
[2014-06-09 15:42:00 -0400] medya: so you put the search command in the recipe?
[2014-06-09 15:42:06 -0400] Guest99878: anyone here?
[2014-06-09 15:42:09 -0400] Guest99878: can help me?
[2014-06-09 15:42:15 -0400] cheeseplus: Guest99878: you've not really provided anything helpful for us to start helping
[2014-06-09 15:42:16 -0400] workmad3: medya: the search returns an array of nodes matching the search (you can also do partial searches where the search returns only the attributes you specify, not everything)
[2014-06-09 15:42:20 -0400] mattstratton: @medya take a look at the community cookbook for haproxy for an example
[2014-06-09 15:42:41 -0400] Guest99878: cheeseplus
[2014-06-09 15:42:47 -0400] Guest99878: I installed chef-11
[2014-06-09 15:42:55 -0400] Guest99878: and followed instruction
[2014-06-09 15:43:06 -0400] cheeseplus: chef 11 server or client?
[2014-06-09 15:43:26 -0400] workmad3: medya: http://docs.opscode.com/essentials_search.html
[2014-06-09 15:43:28 -0400] Guest99878: suddenly my 127.0.0.1 are not accessible since chef snatches me to https://hostname/user/login
[2014-06-09 15:43:42 -0400] Guest99878: server and client both on my computer
[2014-06-09 15:44:09 -0400] Guest99878: and apache doesn't restart since chef installed
[2014-06-09 15:45:39 -0400] cheeseplus: Guest99878: chef server doesn't use apache, it uses nginx by default
[2014-06-09 15:45:49 -0400] cheeseplus: so perhaps you've got them fighting over ports?
[2014-06-09 15:46:08 -0400] cheeseplus: also is chef broken or something else broken after you installed chef? (that isn't clear)
[2014-06-09 15:46:16 -0400] Guest99878: yeah i know
[2014-06-09 15:46:21 -0400] Guest99878: but in my computer
[2014-06-09 15:46:27 -0400] Guest99878: nginx is not installed
[2014-06-09 15:46:33 -0400] Guest99878: then how did they change my redirect rule?
[2014-06-09 15:46:58 -0400] cheeseplus: Guest99878: sorry there is still a ton of context missing so it's hard for me to point to an answer
[2014-06-09 15:47:09 -0400] cheeseplus: what instructions did you follow?
[2014-06-09 15:47:26 -0400] Guest99878: does installation change your localhost to chef login page?
[2014-06-09 15:47:54 -0400] Guest99878: http://www.getchef.com/blog/2013/03/11/chef-11-server-up-and-running/
[2014-06-09 15:48:02 -0400] medya: fantnastic, thanks @workmad3
[2014-06-09 15:48:27 -0400] workmad3: Guest99878: the chef server omnibus package has an embedded nginx
[2014-06-09 15:48:36 -0400] aujt74: At a guess it sure sounds like the embedded nginx in chef-server and apache fighting over ports. Guest99878: try sudo chef-server-ctl stop and then restart apache
[2014-06-09 15:48:57 -0400] Guest99878: aha
[2014-06-09 15:48:59 -0400] Guest99878: yes
[2014-06-09 15:49:06 -0400] Guest99878: so i uninstalled all the package
[2014-06-09 15:49:17 -0400] mattstratton: @cheeseplus with your "bootstrap the bootstrapper" question...if you have knife already running locally, you have chef-client installed, so you should be able to just configure client.rb and execute chef-client?
[2014-06-09 15:49:22 -0400] cheeseplus: Guest99878: it does install nginx embedded tho
[2014-06-09 15:49:52 -0400] cheeseplus: mattstratton: no client configured to server tho
[2014-06-09 15:49:54 -0400] Guest99878: and still redirects to it
[2014-06-09 15:50:26 -0400] Guest99878: and when i restart apache
[2014-06-09 15:50:41 -0400] Guest99878: it just hangs at "....waiting" line
[2014-06-09 15:51:21 -0400] mattstratton: @cheeseplus if you define /etc/chef/client.rb and then use the -K flag on chef-client (for the validation key) it shoudl work
[2014-06-09 15:51:32 -0400] mattstratton: but that might be the manual version you are talking about :)
[2014-06-09 15:51:59 -0400] cheeseplus: mattstratton: was mostly a thought exercise to see what others did ;)
[2014-06-09 15:52:04 -0400] cheeseplus: but yea that is how I do it
[2014-06-09 15:52:15 -0400] Guest99878: if I uninstalled every chef related program , should it work?
[2014-06-09 15:52:19 -0400] mattstratton: I don't know about others, but that's how I would do it. whcih might be an indicator that you shouldn't :)
[2014-06-09 15:52:21 -0400] cheeseplus: Guest99878: anything in the apache logs?
[2014-06-09 15:52:36 -0400] cheeseplus: it does really sound like a port battle
[2014-06-09 15:53:31 -0400] Guest99878: caught SIGTERM shutting down
[2014-06-09 15:53:39 -0400] Guest99878: what is SIGTERM
[2014-06-09 15:54:34 -0400] mkirk_: It means something told your program to quit.
[2014-06-09 15:54:51 -0400] mkirk_: It's a pretty generic thing.
[2014-06-09 15:54:59 -0400] nico__: this is a pretty good explanation of what sigterm is
[2014-06-09 15:54:59 -0400] nico__: http://major.io/2010/03/18/sigterm-vs-sigkill/
[2014-06-09 15:55:10 -0400] Guest99878: thank you
[2014-06-09 15:55:15 -0400] nico__: loking for an assist pushing a renewed domain cert
[2014-06-09 15:55:25 -0400] Guest99878: let me figure out which cause sigterm then
[2014-06-09 15:56:06 -0400] Guest99878: i really have no idea why chef-11 mess up with my localhost
[2014-06-09 15:56:10 -0400] nico__: worried that since the chef server uses the expired one, the clients won't connect to the new server
[2014-06-09 15:56:24 -0400] nico__: looking for an assist on how to handle this gracefully
[2014-06-09 15:57:08 -0400] anthonyacquanita: Guest99878:  chef messed up your localhost becuase you told it to.  You installed chef which installed ngix which conflicted with apache.
[2014-06-09 15:57:36 -0400] Guest99878: yeah
[2014-06-09 15:57:41 -0400] anthonyacquanita: You need to set your box back to the way it was before and either install chef on another box or change the ports chef uses
[2014-06-09 15:57:47 -0400] Guest99878: newbie had to watch out for the consequences
[2014-06-09 15:57:59 -0400] Guest99878: I uninstalled all the chef thing
[2014-06-09 15:58:10 -0400] anthonyacquanita: ps -ef and see what is running... even if you uninstalled chef it may still be running
[2014-06-09 15:58:14 -0400] Guest99878: isn't it supposed to solve the problem?
[2014-06-09 15:58:22 -0400] Guest99878: i rebooted 3 times
[2014-06-09 15:58:25 -0400] Guest99878: that's awesome
[2014-06-09 15:58:39 -0400] anthonyacquanita: ps -ef | grep chef
[2014-06-09 15:58:54 -0400] anthonyacquanita: netstat -na | grep LIST
[2014-06-09 15:59:59 -0400] Guest99878: ps -ef gave me back that chef is still in the list
[2014-06-09 16:01:08 -0400] Guest99878: geki  4637  2467  0 01:00 pts/1    00:00:00 grep --color=auto chef
[2014-06-09 16:01:09 -0400] cheeseplus: kill -9 PID
[2014-06-09 16:01:25 -0400] cheeseplus: oh that is just grep alerting on itself
[2014-06-09 16:02:00 -0400] Guest99878: aha
[2014-06-09 16:02:31 -0400] Guest99878: ERROR: garbage process ID "PID".
[2014-06-09 16:02:35 -0400] Guest99878: that's what returns
[2014-06-09 16:02:37 -0400] drywheat: does anyone use an ssh gateway to access their nodes?
[2014-06-09 16:02:52 -0400] cheeseplus: Guest99878: PID isn't an actual thing you want to kill
[2014-06-09 16:03:02 -0400] cheeseplus: PID is the process ID of whatever you'd like to kil
[2014-06-09 16:03:06 -0400] Guest99878: aha
[2014-06-09 16:03:12 -0400] Guest99878: i thought -9 was the pid
[2014-06-09 16:03:14 -0400] cheeseplus: it seems like chef isn't running any longer
[2014-06-09 16:03:27 -0400] Guest99878: then it must be
[2014-06-09 16:03:35 -0400] Guest99878: nginx embedded modified the rule
[2014-06-09 16:03:47 -0400] Guest99878: i suppose?
[2014-06-09 16:04:07 -0400] anthonyacquanita: what is happening again?  You say http://localhost sends you to some chef server?
[2014-06-09 16:04:22 -0400] nico__: what is the expected behavior when the cert on the chef server is expired?
[2014-06-09 16:04:26 -0400] nico__: I would think that the clients won't connect?
[2014-06-09 16:04:35 -0400] cheeseplus: nginx woud be serving up the page or redirect if it is started
[2014-06-09 16:05:00 -0400] cheeseplus: Guest99878: I doubt it modified your apache redirects, it's just that apache isn't active cause nginx was using the ports
[2014-06-09 16:05:04 -0400] Guest99878: now it just redirects to https://hostname
[2014-06-09 16:05:06 -0400] cheeseplus: (is what it sounds like still)
[2014-06-09 16:05:08 -0400] Guest99878: and page error
[2014-06-09 16:05:27 -0400] cheeseplus: Guest99878: the error page, does it give you any version information?
[2014-06-09 16:05:36 -0400] Guest99878: no
[2014-06-09 16:05:38 -0400] Guest99878: default
[2014-06-09 16:05:42 -0400] Guest99878: this page is not available
[2014-06-09 16:05:46 -0400] Guest99878: like no server is running
[2014-06-09 16:06:37 -0400] Guest99878: I even uninstalled and reinstalled apache2
[2014-06-09 16:07:10 -0400] Guest99878: i just can't simply let my browser address to 127.0.0.1 since it always redirects me to https://hostname
[2014-06-09 16:07:16 -0400] Guest99878: even httpS
[2014-06-09 16:07:54 -0400] nico__: it seems that I am able to run chef-client on a node and it runs correctly...  so I guess I was wrong re: expected behavior
[2014-06-09 16:08:04 -0400] anthonyacquanita: ps -ef|grep -v grep | grep nginx
[2014-06-09 16:08:09 -0400] anthonyacquanita: is nginx running still?
[2014-06-09 16:08:25 -0400] Guest99878: no
[2014-06-09 16:08:25 -0400] nico__: I think this means I can use chef to disseminate my new root certificate by updating the file that contains the cert?
[2014-06-09 16:08:47 -0400] cheeseplus: Guest99878: is there anything in /etc/hosts ?
[2014-06-09 16:08:51 -0400] anthonyacquanita: so what is redirecting you?  what is listening on port 80 on localhost?
[2014-06-09 16:09:07 -0400] Guest99878: 127.0.0.1 localhost
[2014-06-09 16:09:14 -0400] Guest99878: 127.0.1.1 hostname
[2014-06-09 16:09:33 -0400] Guest99878: and #the following lines are desirable for IPv6 capable hosts stuff
[2014-06-09 16:09:42 -0400] nico__: but I don't know enough about ldap to know if I need to change anything, or if just replacing the file with the new one and running the client is enough?  Obviously I don't want to break anything, as our ldap is used across the board for domain authentictions
[2014-06-09 16:10:51 -0400] cheeseplus: Guest99878: well that seems to indicate that 127.0.0.1 will map to "hostname"
[2014-06-09 16:11:05 -0400] cheeseplus: Guest99878: and if apache isn't listening on that name that would explain it
[2014-06-09 16:11:05 -0400] Guest99878: yeah
[2014-06-09 16:11:09 -0400] Guest99878: suddenly
[2014-06-09 16:11:20 -0400] Guest99878: now it works!
[2014-06-09 16:11:22 -0400] Guest99878: thanks guys
[2014-06-09 16:11:31 -0400] Guest99878: i just deleted s from https://hostname
[2014-06-09 16:11:44 -0400] Guest99878: i still don't know why they appended s to http
[2014-06-09 16:11:55 -0400] cheeseplus: they are two different things
[2014-06-09 16:11:55 -0400] Guest99878: and it redirects me to /var/www
[2014-06-09 16:11:59 -0400] cheeseplus: one is secured
[2014-06-09 16:12:02 -0400] cheeseplus: the other isn't
[2014-06-09 16:12:09 -0400] cheeseplus: also different ports
[2014-06-09 16:12:15 -0400] Guest99878: yes?
[2014-06-09 16:12:24 -0400] cheeseplus: http (typically 80), https (typically 443)
[2014-06-09 16:12:31 -0400] Guest99878: yeah
[2014-06-09 16:12:36 -0400] cheeseplus: so the s is very relevant
[2014-06-09 16:13:23 -0400] medya: if I want to execute a command with sudo in a chef recipe do I have to include sudo recipe? or what do I need to do exactly?
[2014-06-09 16:13:36 -0400] Guest99878: I still have no idea if it's not in /etc/hosts where can it change my localhost to https://hostname?
[2014-06-09 16:14:16 -0400] Guest99878: thank you guys i have to go back to work
[2014-06-09 16:16:05 -0400] cheeseplus: medya: unless you've got some specialized setup, chef-client has root access
[2014-06-09 16:16:22 -0400] cheeseplus: so just execute commands without sudo
[2014-06-09 16:16:58 -0400] medya: great thanks, do you guys by chance now a good cookbook for jboss  ? I see several cookbooks most of them very outdated and not working
[2014-06-09 16:17:26 -0400] cheeseplus: no idea wrt to jboss cookbooks
[2014-06-09 16:33:27 -0400] drywheat: how can you force a pseudo-tty using `knife ssh'?
[2014-06-09 16:40:05 -0400] medya: when you write a wrapper can you make the cookbook u are wrapping not do execute something ? let say the cookbook has a Bash ...resource that runs a bash script, can you make a wrapper and make that bash script not be executed?
[2014-06-09 16:43:49 -0400] medya: or let me ask my question better, can you override an "execute" block of a cookbook in a warpper?
[2014-06-09 16:43:55 -0400] medya: wrapper*
[2014-06-09 16:50:06 -0400] sarkis: so does the attributes file get processed after environments?
[2014-06-09 16:52:32 -0400] mivok: medya: yes. I'd start by looking at something like https://github.com/bryanwb/chef-rewind or https://sethvargo.com/changing-chef-resources-at-runtime/. Those don't delete the resource, but you could change the action to :nothing.
[2014-06-09 16:53:05 -0400] sarkis: i'm looking at the attribute precedence list, not sure how this is processed though, does #1 have precedence or #15
[2014-06-09 16:53:09 -0400] medya: great thanks
[2014-06-09 17:04:35 -0400] stensonb: @sarkis - #1 is the "lowest" precedence...so if you have an attribute defined at any higher level, the value set at that higher level will be used.
[2014-06-09 17:07:50 -0400] Zenigor: i am having troubles using kitchen-openstack with my local openstack infrastructure. Unfortunately the stack trace isn't being overly helpful. Please see https://gist.github.com/zhallett/e479b35aef35436615a2, any help would be much apprecaited
[2014-06-09 17:14:21 -0400] sarkis: stensonb: t y
[2014-06-09 17:18:19 -0400] tcotav: qah
[2014-06-09 17:27:03 -0400] jblancett: is it possible to get the new webui thats on hosted chef in a self hosted chef environment?
[2014-06-09 17:30:12 -0400] sarkis: hmmmm, i have a little issue... say i only wanted to specify 1 key/value pair of a hash and leave the rest in tact, that's not possible to do is it?
[2014-06-09 17:31:02 -0400] sarkis: i.e. http://fishnix.tumblr.com/post/20145901852/chef-environments-are-awesome
[2014-06-09 17:31:21 -0400] sarkis: wouldn't that reset apache2 hash?
[2014-06-09 17:32:06 -0400] jblancett: I don't believe it would
[2014-06-09 17:32:07 -0400] sarkis: even though it only specifies prefork, does it replace all keys under apache2 with jsut prefork
[2014-06-09 17:32:18 -0400] sarkis: hmm ok, let me try it i gues
[2014-06-09 17:32:20 -0400] jblancett: try it and see ;)
[2014-06-09 17:32:23 -0400] sarkis: ya
[2014-06-09 17:44:10 -0400] NeckBeardPrince: Decided to get into Chef as well as Puppet and was wondering if my current in home environment is suited for home use. I have a server at home running Promox with a VM for Chef Server and I have 2 Chef Node VMs running as well one is Apache and one is MySQL. But wondering what is the best way to do the workstation, could I just use my laptop as the workstation or could I create a small vm to act as the workstation.
[2014-06-09 17:46:20 -0400] jblancett: NeckBeardPrince: I'm not sure this is the usual method but what I do is keep my workstation config in my chef-repo so its the same on every machine its checked out on
[2014-06-09 17:47:26 -0400] NeckBeardPrince: That's not a bad idea, I know my setup isn't the norm but for someone wanting to learn just wondering if it's an okay setup and that things should work.
[2014-06-09 17:48:24 -0400] jblancett: I would configure your workstation on whatever system you're developing cookbooks on
[2014-06-09 17:49:14 -0400] NeckBeardPrince: Okay, so either I could use my laptop or even use a vm,  okay great. Thanks
[2014-06-09 17:58:20 -0400] chris613: Is there any way to make uploads to my chef server atomic? I periodically upload all the cookbooks, environments, roles, etc from a git repo, but I'm worried about what could happen if a client hits it mid-way though the uploads
[2014-06-09 18:04:17 -0400] shlant: hey all. If the recommended way to handle cookbooks is in there own repo, where would data bags go?
[2014-06-09 18:04:57 -0400] mikesplain: shlant: our team has a separate "metadata" repo as we call it, we store data bags, roles and environments there.
[2014-06-09 18:05:07 -0400] stensonb: +1 mikesplain
[2014-06-09 18:05:32 -0400] markp: hello chefs!
[2014-06-09 18:05:39 -0400] Otterley: +1 mikesplain
[2014-06-09 18:06:04 -0400] markp: anyone have any idea what this error on windows berks upload would mean ....
[2014-06-09 18:06:05 -0400] markp: Ridley::Errors::HTTPBadRequest: {"error":["Bad checksums!"]}
[2014-06-09 18:06:09 -0400] Otterley: our chef-repo repo has our nodes/data bags/roles/environments in it.  basically everything but the cookbooks
[2014-06-09 18:06:32 -0400] Otterley: it's a challenge to keep Chef in sync with the repo, that's our biggest difficulty with a distributed team
[2014-06-09 18:07:07 -0400] mikesplain: Otterley: We've moved to even automating releases of that repo, only Jenkins uploads that repo, whenever PR's get merged into master
[2014-06-09 18:07:17 -0400] Otterley: we have put some Rake tasks in our repo that we want admins to use instead of knife itself, so that we can detect git drift, but it's challenging
[2014-06-09 18:07:23 -0400] mikesplain: Nice
[2014-06-09 18:07:53 -0400] Otterley: mikesplain, what tests can you run that would make CI safe with metadata?
[2014-06-09 18:08:02 -0400] Otterley: sounds risky to me
[2014-06-09 18:09:14 -0400] mikesplain: Otterley: I didn't write that part so I'm not positive, I think it does knife test on them to just do a simple lint test. These are human approved PR's so we take on the risk but gain the automation and audit trail
[2014-06-09 18:09:33 -0400] Otterley: yeah, that's probably the best you can do.
[2014-06-09 18:09:53 -0400] mikesplain: Yeah it solves our problem... we were just worried 2 people would push environment changes... jenkins solves that for now at least
[2014-06-09 18:09:54 -0400] Otterley: I'm hearing that others are having success with it so I'll chat with my team about it.
[2014-06-09 18:10:40 -0400] Otterley: The other issue is that if someone runs knife directly, I'm not sure we have an adequate audit trail so that we can take action against the offender
[2014-06-09 18:11:20 -0400] Otterley: unless there's been recent movement in this area by Chef server...
[2014-06-09 18:29:49 -0400] sarkis: so when i open up my chef-server webui, i see that there is a dropdown for Environment at the top?
[2014-06-09 18:29:53 -0400] sarkis: what's that for?
[2014-06-09 18:30:18 -0400] mikesplain: sarkis: it will limit what you see in the rest of the ui to versions and cookbook specified in that environment
[2014-06-09 18:30:36 -0400] sarkis: oh i see
[2014-06-09 18:30:38 -0400] sarkis: thanks
[2014-06-09 18:30:40 -0400] mikesplain: np
[2014-06-09 18:31:27 -0400] Otterley: sarkis, we use environments to bind cookbook versions to nodes
[2014-06-09 18:31:39 -0400] mikesplain: +1 Otterley
[2014-06-09 18:32:51 -0400] sarkis: how do you do that/
[2014-06-09 18:34:53 -0400] Otterley: sarkis, you assign an environment to a node, then in that environment, you populate the cookbook_versions attribute
[2014-06-09 18:35:21 -0400] Otterley: for example, we have production and various testing environments; then we promote environments to production once we're satisfied that the cookbook updates are working
[2014-06-09 18:35:46 -0400] Otterley: "environment" is poorly named IMO; an artifact of history
[2014-06-09 18:36:30 -0400] Otterley: at our site, assigning node attributes to environments is strictly forbidden; you have to use roles for that
[2014-06-09 18:37:21 -0400] mikesplain: Yeah we do that too... minus the roles, we avoid roles
[2014-06-09 18:37:47 -0400] Otterley: so we have roles named env_* that contain node attributes specific to the "environment" (data center, production vs. non production etc)
[2014-06-09 18:38:22 -0400] Otterley: what do you use to assign common attributes to nodes, mikesplain ?
[2014-06-09 18:39:11 -0400] mikesplain: Otterley: We use environments for that... our environments are are like prod1, stg1, qa1, etc. and each contains cookbook versions and attributes specific to each
[2014-06-09 18:39:51 -0400] Otterley: ok, we use roles for that; the only thing we use Environments (big-E) for is cookbook version pinning
[2014-06-09 18:40:17 -0400] mikesplain: We plan to move some out of our cookbooks into attribute cookbooks / into environment cookbooks (the berks apply methodology)
[2014-06-09 18:40:35 -0400] mikesplain: Right pretty much the same, just different preferences :)
[2014-06-09 18:40:47 -0400] Otterley: our role conventions are hg_* (host group); dc_* (datacenter); pod_* (pod; something within a datacenter); env_* (environment); feature_* (feature, rarely used)
[2014-06-09 18:40:57 -0400] Otterley: we get nice dimensionality this way
[2014-06-09 18:40:58 -0400] nico__: where do I need to put my ssl cert for the chef-server-webui if I have just renewed it?
[2014-06-09 18:41:06 -0400] nico__: *where on my chef server
[2014-06-09 18:41:17 -0400] mikesplain: Otterley: Ahh nice, I like that
[2014-06-09 18:41:35 -0400] Otterley: mikesplain, only hg_* and feature_* can have run_lists in them; the rest are attribute-only roles
[2014-06-09 18:42:59 -0400] nico__: looks like .opt/chef-server/embedded/ssl
[2014-06-09 18:43:00 -0400] nico__: ?
[2014-06-09 18:43:09 -0400] mikesplain: Otterley: ahh nice
[2014-06-09 18:43:16 -0400] nico__: *that's /opt/chef-server/embedded/ssl/cert.pem
[2014-06-09 18:43:26 -0400] nico__: ls
[2014-06-09 18:43:30 -0400] nico__: lmao wrong window
[2014-06-09 18:43:37 -0400] mikesplain: nico__: sorry never done that, we terminate ssl at the LB level
[2014-06-09 18:44:32 -0400] nico__: I'm just trying to get the web ui to stop complaining about an expired cert. I just renewed it this morning
[2014-06-09 18:48:28 -0400] jblancett: nico__: have a look inside /var/opt/chef-server/nginx/etc/chef_https_lb.conf
[2014-06-09 18:48:49 -0400] jblancett: should have paths to your .crt and .key files
[2014-06-09 19:01:23 -0400] jblancett: what does it take, if its even doable, to get the new webui on opscode hosted chef on self hosted open source chef?
[2014-06-09 19:01:25 -0400] aslan_: hey guys. I need a little bit of help with this omnibus method. So if i want to have my clinets use runsv to manage the chef-client process how can i do that?
[2014-06-09 19:02:18 -0400] drywheat: aslan_: look at the chef-client cookbook. it may have the recipe you need.
[2014-06-09 19:05:56 -0400] nico__: jblancett: awesome - this looks like the file I need.  thanks!
[2014-06-09 19:13:25 -0400] r3dk1ng: Ok I have a question
[2014-06-09 19:15:01 -0400] shlant: coderanger: is there a way to use citadel with deployer cookbook as it required data bags? or is there a better way?
[2014-06-09 19:15:29 -0400] r3dk1ng: I need to set a node attribute to a node that stays persistant from a recipe.  For example, let's say I want to automatically provision a disk in AWS to an instance.... I want to set a node attribue to the chef-node stating the volume now exists so that when a new chef-client runs, it won't re-provision more space... what's a way I can do this by setting a persistant node attribue to the node?
[2014-06-09 19:26:00 -0400] shlant: r3dk1ng: once you set an attribute it won't get overwritten unless you set it again somewhere else
[2014-06-09 19:26:10 -0400] r3dk1ng: ok
[2014-06-09 19:26:22 -0400] r3dk1ng: I got it... sorry... have a headache today...
[2014-06-09 19:26:29 -0400] shlant: haha no worries
[2014-06-09 19:30:35 -0400] Otterley: r3dk1ng, this doesn't sound resistant to problems with Chef
[2014-06-09 19:31:02 -0400] Otterley: IMO the source of truth should EC2 itself, not Chef.
[2014-06-09 19:31:56 -0400] r3dk1ng: Otterley: thanks... but I just figured out what I needed and what I needed is working.
[2014-06-09 19:32:56 -0400] Otterley: as long as you understand the risks...
[2014-06-09 19:34:36 -0400] r3dk1ng: what risks are you referring to?
[2014-06-09 19:37:26 -0400] Otterley: someone reloads a node into your Chef server.  your attribute could be blown away.
[2014-06-09 19:38:01 -0400] r3dk1ng: well duh, that would be bad for anyone :)
[2014-06-09 19:38:22 -0400] Otterley: right, but you can engineer something that's resistant to that.
[2014-06-09 19:38:32 -0400] Otterley: (or I would if I were in your shoes)
[2014-06-09 19:38:39 -0400] r3dk1ng: ?
[2014-06-09 19:39:35 -0400] r3dk1ng: and what would you suggest? :)
[2014-06-09 19:43:05 -0400] Otterley: in your specific example you want to know whether a disk has been provisioned to an instance.  you could query the AWS API for that, and it would be trustworthy regardless of Chef state.
[2014-06-09 19:43:46 -0400] r3dk1ng: Do you have an experience with the aws_sdk?
[2014-06-09 19:43:53 -0400] r3dk1ng: That is what I am using
[2014-06-09 19:45:04 -0400] Otterley: Yes, but I can't engineer a complete solution for you here.
[2014-06-09 19:45:13 -0400] Otterley: Just trying to point you in the right direction.
[2014-06-09 19:45:42 -0400] r3dk1ng: Who asked you to engineer a solution?  I just asked if you had experience with it.
[2014-06-09 19:46:10 -0400] Otterley: I do.
[2014-06-09 19:46:35 -0400] mivok: r3dk1ng: you may also want to look at the aws cookbook: https://github.com/opscode-cookbooks/aws - the ebs_volume resource looks to do what you want (not create a volume if it's already there)
[2014-06-09 19:46:46 -0400] Otterley: mivok, +1
[2014-06-09 19:47:32 -0400] r3dk1ng: mivok: the aws cookbook is using an old depreciated rightscale ruby gem.   I am using it already as a reference, but I am builing my own cookbook using aws-sdk.
[2014-06-09 19:48:01 -0400] r3dk1ng: but I will check it out again mivok
[2014-06-09 19:48:11 -0400] r3dk1ng: I thought all it did was to consult a node attribute
[2014-06-09 19:48:26 -0400] Otterley: if it works, I wouldn't shun it because of the underlying libraries it uses
[2014-06-09 19:48:44 -0400] mivok: I think it does just use node attributes
[2014-06-09 19:49:11 -0400] r3dk1ng: yeah, that's what I remember too
[2014-06-09 19:49:24 -0400] anthonyacquanita: any good jmeter or load testing cookbooks out their.  Not much in the community marketplace
[2014-06-09 19:50:48 -0400] mivok: r3dk1ng: it looks like it just does node.set['aws'][...] = 'vol-12345', which hopefully answers your original question.
[2014-06-09 19:51:09 -0400] Otterley: mivok, then it's also susceptible to the same problem
[2014-06-09 19:51:11 -0400] mivok: oh, and node.save unless Chef::Config[:solo]
[2014-06-09 19:53:34 -0400] Otterley: mivok, it calls node.save mid-run? yeouch.  https://github.com/acrmp/foodcritic/issues/235
[2014-06-09 19:54:19 -0400] r3dk1ng: I think I might build my EBS volume assignment, management recipe a bit differently.  I want it to take options suchs as 'Volume Name', Tag Name, etc.... with all of that, I can query the API through aws-sdk and check for existance... as well as attachment status...   that would add extra layers of protection.
[2014-06-09 19:55:21 -0400] Otterley: this sounds like the perfect case for LWRPs r3dk1ng
[2014-06-09 19:56:01 -0400] r3dk1ng: Otter: I know, I have Light Weigh Resource Providers already for my ELB stuff
[2014-06-09 19:56:48 -0400] r3dk1ng: I always build a recipe first, and then break it into LWRPs if they get complex and need options, etc...
[2014-06-09 19:57:09 -0400] r3dk1ng: but until I work out the logic, I use a single recipe
[2014-06-09 20:12:45 -0400] turtle_: When I run my recipe it keeps failing to compile because I have this line in my chef recipe - require 'net/scp' . Does someone know the solution to this?
[2014-06-09 20:12:58 -0400] mivok: ls
[2014-06-09 20:13:03 -0400] mivok: ahem
[2014-06-09 20:13:25 -0400] postwait: .
[2014-06-09 20:13:25 -0400] postwait: ..
[2014-06-09 20:13:30 -0400] postwait: .confession
[2014-06-09 20:14:13 -0400] mivok: with output like that the question is... do you read or quickly delete?
[2014-06-09 20:16:10 -0400] juliancdunn: dd if=/dev/zero of=/dev/sda bs=1k
[2014-06-09 20:17:04 -0400] gasfads: reposting from #learnchef, since this chat seems more active...
[2014-06-09 20:17:47 -0400] gasfads: hello. i am getting started setting up a chef server. i have set up a chef server, chef client, and workstation
[2014-06-09 20:17:52 -0400] gasfads: working my way through this: http://gettingstartedwithchef.com/introducing-chef-server.html
[2014-06-09 20:18:01 -0400] gasfads: i'm trying to customize some recipies, and i get the following error: [2014-06-09T20:04:31+00:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2014-06-09 20:18:08 -0400] gasfads: this file [/var/chef/cache/chef-stacktrace.out] does not exist on any of the 3 environments
[2014-06-09 20:18:14 -0400] gasfads: which environment is it supposed to live on, so that i can investigate further?
[2014-06-09 20:22:53 -0400] mivok: It will be on the server you're running chef on, or the server you just created if you're running something like knife ec2 server create.
[2014-06-09 20:25:01 -0400] gasfads: oh. it's on the client server. it didn't seem to be there the first time i checked.
[2014-06-09 20:25:03 -0400] gasfads: thanks!
[2014-06-09 20:25:07 -0400] doug1: How do I set the chef environment when running via kitchen?
[2014-06-09 20:30:26 -0400] doug1: How do I set the chef environment when running via kitchen?
[2014-06-09 20:45:17 -0400] aslan_: hey guys. I need a little bit of help with this omnibus method. So if i want to have my nodes use runsv to manage the chef-client process how can i do that?
[2014-06-09 20:48:07 -0400] doomviki1g: https://github.com/opscode-cookbooks/chef-client
[2014-06-09 20:55:38 -0400] aslan_: what does omnibus exactly install?
[2014-06-09 20:56:02 -0400] someara:  /opt/chef
[2014-06-09 20:56:26 -0400] someara: you can query the package too, with rpm -qilp or dpkg -L
[2014-06-09 20:58:43 -0400] gyoza: suppp guyzzz
[2014-06-09 21:03:02 -0400] mjuszczak: Is there something with scope I should be concerned about?  I have "default.rb" which includes auth.rb, and within auth.rb I'm doing: "include openssh".  Yet chef client is flaking saying no openssh resource available, even though I see it being uploaded by berks
[2014-06-09 21:03:38 -0400] stormerider: mjuszczak: shouldnt it be include_recipe?
[2014-06-09 21:05:04 -0400] mjuszczak: Gah!
[2014-06-09 21:05:07 -0400] mjuszczak: typo on my end
[2014-06-09 21:05:09 -0400] aslan_: how do you install chef on ubuntu 14.04?
[2014-06-09 21:05:22 -0400] mjuszczak: Switching between puppet and chef continuously <--- bad idea
[2014-06-09 21:05:50 -0400] mjuszczak: thank you
[2014-06-09 21:07:58 -0400] sarkis: hey guys so when knife ssh executes a command it's using the -a ssh_attr i gave it (ip address) to display the output
[2014-06-09 21:08:09 -0400] sarkis: is there someway to use a certain ssh_attr but display another?
[2014-06-09 21:10:10 -0400] mjuszczak: hrm, same error: No resource, method, or local variable named `openssh' for `Chef::Recipe "auth"'
[2014-06-09 21:10:22 -0400] mjuszczak: after doing: include_recipe openssh
[2014-06-09 21:12:30 -0400] sarkis: nvm i solved it by doing it in the command: 'echo "$(hostname) - $(uname -a)"'
[2014-06-09 21:15:54 -0400] a13x212: i'm running into an issue with chef resource git where it fails because the RSA key fingerprint hasn't been accepted yet
[2014-06-09 21:22:46 -0400] juliancdunn: mjuszczak: did you put 'openssh' in quotes?
[2014-06-09 21:27:42 -0400] Doc_X: does the omnibus chef-client installer include an init.d script or similar service definition?
[2014-06-09 21:28:59 -0400] stormerider: Doc_X: iirc no, you need to use the chef-client cookbook to deploy those
[2014-06-09 21:29:31 -0400] CJNE: there's a chef-client cookbook that does, afaik the installer just installs chef client
[2014-06-09 21:30:03 -0400] CJNE: anyone knows what's up with bitbucket?
[2014-06-09 21:30:18 -0400] Doc_X: thanks for the info stormerider and CJNE. seems like a less than optimal design decision, but c'est la vie
[2014-06-09 21:30:19 -0400] stormerider: CJNE: http://status.bitbucket.org/
[2014-06-09 21:30:58 -0400] CJNE: ouch, thanks :)
[2014-06-09 21:44:28 -0400] CJNE: bitbucket is up again now :)
[2014-06-09 22:44:44 -0400] gyoza: anybody here watching halt and catch fire?
[2014-06-09 22:45:02 -0400] gyoza: its so gooood
[2014-06-09 22:48:56 -0400] shlant: gyoza: hmmm looks interesting
[2014-06-09 22:49:22 -0400] sarkis: i this the recommended way to get chef-client daemon going? including this recipe? https://github.com/opscode-cookbooks/chef-client#recipes
[2014-06-09 23:07:15 -0400] CJNE: dunno if it's the best way, i do it that way at least
[2014-06-09 23:09:18 -0400] jtimberman: sarkis: yes, that's the recommended-by-Chef way.
[2014-06-09 23:09:27 -0400] jtimberman: and we use it in prod too :)
[2014-06-09 23:09:42 -0400] sarkis: awesome, thanks
[2014-06-09 23:12:45 -0400] sarkis: it looks like the rbenv cookbook added some vars in normal:
[2014-06-09 23:12:48 -0400] sarkis: is that normal???
[2014-06-09 23:12:53 -0400] sarkis: jtimberman: ^^^^
[2014-06-09 23:13:31 -0400] sarkis: i see things like "normal": { "rbenv": { "root": "/usr/local/renv" } , i am sure i didn't put these here
[2014-06-09 23:13:40 -0400] sarkis: thats in my node on chef-server
[2014-06-09 23:19:13 -0400] jtimberman: i would have to read the code of whichever rbenv cookbook you're using to know for sure.
[2014-06-09 23:19:25 -0400] jtimberman: i've used fnichols
[2014-06-09 23:19:35 -0400] jtimberman: but i treat it as kind of opaque
[2014-06-09 23:19:52 -0400] c_t: I've never noticed normal attributes to be anything particularly worrisome
[2014-06-09 23:19:52 -0400] sarkis: ya, i'm going to dig in
[2014-06-09 23:20:05 -0400] sarkis: c_t: it's more like ocd
[2014-06-09 23:20:39 -0400] sarkis: or i guess i just want to know why they are putting this stuff here, if theres a better way, i'd like to save the headache of tracking this down to clean up...
[2014-06-09 23:21:17 -0400] c_t: as I recall, normal attributes are usually set by the cookbook in question
[2014-06-09 23:21:28 -0400] sarkis: ya checking it out
[2014-06-09 23:21:36 -0400] c_t: but as jtimberman said it's a little opaque
[2014-06-09 23:23:36 -0400] sarkis: yea, the cookbook is definitely putting them there, so that's not some sort of best practice it seems
[2014-06-09 23:23:50 -0400] sarkis: https://github.com/RiotGames/rbenv-cookbook
[2014-06-09 23:27:00 -0400] sarkis: interesting, from the chef docs: At the conclusion of the chef-client run, all default, override, and automatic attributes disappear, leaving only a collection of normal attributes that will persist until the next chef-client run.
[2014-06-09 23:27:21 -0400] sarkis: http://docs.opscode.com/essentials_cookbook_recipes.html#attribute-persistence
[2014-06-09 23:27:26 -0400] sarkis: is that what i am experiencing?
[2014-06-09 23:40:02 -0400] CJNE: if i'm running chef-client for the first time on a node with a customized client.rb (containing a node_name that has been looked up at runtime), that then includes chef-client::config which overwrites my client.rb, will node_name persist in that new version? Docs says it takes it from Chef::Config, will my initial client.rb populate that?
[2014-06-09 23:55:29 -0400] chance: with the apache community cookbook, how does one pass in extra variables to the web_app lwrp?
[2014-06-09 23:56:00 -0400] chance: with template, you just use the variables( :foo => "bar" ) but i am unable to do anything of the sort with web_app

[2014-06-25 00:10:56 -0400] ec999: hi, I'm trying to write an only_if statement in my recipe, so that if the user doesn't exist, create the user.  if it does, don't do anything/update.  It seems to be able to create user, but I don't understand why it will update user, when the user exists.
[2014-06-25 00:11:32 -0400] ec999: Here's my statement, only_if "grep -v ^user_data['id'] /etc/passwd"
[2014-06-25 00:11:56 -0400] coderanger: ec999: That should be #{user_data['id']}
[2014-06-25 00:12:17 -0400] coderanger: Otherwise you are literally searching for "user_data['id']" which most likely doesn't exist :)
[2014-06-25 00:14:11 -0400] ec999: coderanger:  I updated my recipe, it's still doing it
[2014-06-25 00:14:23 -0400] ec999: ... i'm pulling my hair now
[2014-06-25 00:15:05 -0400] coderanger: ec999: Hmm, so grep returns 0 if the string is found
[2014-06-25 00:15:09 -0400] coderanger: so shouldn't that be not_if?
[2014-06-25 00:15:12 -0400] coderanger: (I think at least)
[2014-06-25 00:15:25 -0400] coderanger: Oh, except you have -v
[2014-06-25 00:16:00 -0400] coderanger: Hmm, I don't think -v is what you want
[2014-06-25 00:16:08 -0400] coderanger: that is a match inversion
[2014-06-25 00:16:19 -0400] coderanger: so it would only return non-zero if all lines match the username
[2014-06-25 00:16:50 -0400] coderanger: I think you interpreted the -v as a "not" operation on the return code, which it isn't
[2014-06-25 00:17:30 -0400] ec999: you're right
[2014-06-25 00:21:05 -0400] ec999: will need to test it later, thanks
[2014-06-25 00:41:15 -0400] shlant: coderanger: If I wanted to install a specific chef version with packer, what would the install_command look like?
[2014-06-25 00:41:23 -0400] shlant: 11.4.0 for isntance
[2014-06-25 00:41:51 -0400] coderanger: shlant: curl whatever | sudo bash -- -v 11.4.0
[2014-06-25 00:41:52 -0400] coderanger: I think
[2014-06-25 00:42:25 -0400] coderanger: the install.sh script takes a -v option to set the version to use (if not present you just get latest)
[2014-06-25 00:43:27 -0400] shlant: coderanger: alright, thanks
[2014-06-25 01:08:53 -0400] shlant: coderanger: any reason why I would be suddenly getting uninitialized constant Chef::HTTP with citadel?
[2014-06-25 01:08:54 -0400] shlant: https://github.com/balanced-cookbooks/citadel/blob/master/libraries/s3_file.rb#L54
[2014-06-25 01:09:02 -0400] shlant: was working before
[2014-06-25 02:15:16 -0400] IWishICouldCook: I'm having a strange problem with Chef (Opensource).  I am running it in Amazon EC2.  Postgresql data and the bookshelf directory are on a persistent EBS volume.  Everything else is baked into the AMI and therefore, changes are deleted on termination
[2014-06-25 02:15:57 -0400] IWishICouldCook: After terminating / starting the chef server, searching some databags in recipes seems to be yielding no results
[2014-06-25 02:16:26 -0400] IWishICouldCook: (but I can see these databags and their contents in the depriciated chef web ui)
[2014-06-25 02:16:51 -0400] IWishICouldCook: I can fix this by running the knife command to upload those exact same data bags again (or "update" them).
[2014-06-25 02:16:59 -0400] IWishICouldCook: After this, it all works again until the next termination
[2014-06-25 02:17:47 -0400] IWishICouldCook: Now, I was having an issue last month whereby my bookshelf directory was on the AMI (delete on termination) and the postgresql was persistent.  This was leading to 404 errors downloading new recipes as the DB was out of sync with the filesystem.
[2014-06-25 02:18:16 -0400] IWishICouldCook: Is there anything else like this I need to worry about for databags?  I assumed they were stored in the postgresql database and therefore would be properly persistent.
[2014-06-25 02:18:37 -0400] IWishICouldCook: Any ideas?
[2014-06-25 02:27:53 -0400] leifmadsen: evening all, it has been a while since I've used chef, and I appear rusty. I'm trying to check if an attribute is set in a template, and I can't remember how to do that
[2014-06-25 02:27:57 -0400] leifmadsen: I'm using Chef 11 client and server
[2014-06-25 03:01:33 -0400] d4c7: hello fellow chefs, anyone know how to disable the auto-attached/added to fstab ephemeral with ubuntu default amis using knife ec2 server create?
[2014-06-25 03:15:57 -0400] coderanger: shlant: chef is too old
[2014-06-25 04:31:03 -0400] spheromak: :P
[2014-06-25 04:58:16 -0400] ICantCook: Anyone able to help me with my issue?  After terminating / starting the chef server, recipes can't search some databags any more.  The contents of the databags appear in the web console, but recipes fail to run.  I'm running Opensource Chef.
[2014-06-25 04:58:43 -0400] ICantCook: I am able to work around the problem for now.  I exported all the databags to files and then ran
[2014-06-25 04:58:59 -0400] ICantCook: for i in $(ls |grep json)
[2014-06-25 04:59:00 -0400] ICantCook: do
[2014-06-25 04:59:15 -0400] ICantCook: knife data bag from file databag_name $i
[2014-06-25 04:59:16 -0400] ICantCook: done
[2014-06-25 04:59:54 -0400] ICantCook: After this, the cookbooks run fine, until I next terminate / start the chef server
[2014-06-25 05:00:03 -0400] ICantCook: any idea why this might be?
[2014-06-25 05:39:00 -0400] digitalchild: why are you typing middle ?
[2014-06-25 06:04:07 -0400] ICantCook: I like the look of the character
[2014-06-25 07:51:58 -0400] dwisnia_: hey guys, any way to send all chef server messages to an syslog?
[2014-06-25 09:02:18 -0400] bcave: ohai
[2014-06-25 09:02:58 -0400] bcave: i have a question about attribute precedence ...
[2014-06-25 09:04:35 -0400] bcave: if I have attributes set in a cookbook, and then run the recipe via a role that doesn't set the attribute, if I execute knife bootstrap with attributes set via the -j parameter, should the attributes provided override the defaults?
[2014-06-25 09:07:57 -0400] bcave: ah, never mind - wasn't working as expected i was mis-referencing the attribute
[2014-06-25 09:15:08 -0400] srenatus: bcave: in chef-shell, you can access the following that sometimes helps when you wonder where node[foo][bar] comes from: node.attributes.debug_value('foo', 'bar')
[2014-06-25 09:15:24 -0400] srenatus: bcave: the shell probably doesn't take -J (no idea), but anyways
[2014-06-25 09:52:18 -0400] coderanger: dwisnia: No, or at least not without heavy modification. You could use something like logstash or heka to read the files in and write them out to syslog I guess.
[2014-06-25 09:53:07 -0400] coderanger: bcave: -j is just setting node data, and only "normal" level attributes can be set in node data, so it should be higher than default but below override
[2014-06-25 09:57:42 -0400] dwisnia: coderanger: oh, okay - i try logstash now ;)
[2014-06-25 10:50:50 -0400] bcave: thanks coderanger
[2014-06-25 10:51:04 -0400] bcave: i really need to set up a proper chef testing environment
[2014-06-25 10:51:11 -0400] bcave: test kitchen with vagrant or something
[2014-06-25 10:51:35 -0400] bcave: i'm currently pushing to the chef server and provisioning in ec2 *groan*
[2014-06-25 10:52:08 -0400] n1ko: that sounds like a pretty slow workflow for testing
[2014-06-25 10:52:21 -0400] bcave: very
[2014-06-25 10:53:02 -0400] n1ko: vagrant + chef-zero setup takes like 5minutes
[2014-06-25 10:53:42 -0400] bcave: it's pretty straight forward ?
[2014-06-25 10:58:14 -0400] n1ko: yeah, and plenty of help can be found with google
[2014-06-25 10:58:25 -0400] n1ko: i also suggest getting knife block
[2014-06-25 10:58:41 -0400] n1ko: so you can switch easily between the chef servers
[2014-06-25 11:06:26 -0400] bcave: ah, ok. almost enough time to set it up while i do a test run :p
[2014-06-25 11:07:16 -0400] bcave: quick question for the lazy... how is the chef config delivered to the box, via the config.vm.provision?
[2014-06-25 11:07:39 -0400] bcave: i.e. all the cookbooks will be syncd to the box transparently, i'm assuming
[2014-06-25 11:32:44 -0400] bcave: never mind, playing around with it now
[2014-06-25 11:35:27 -0400] rsavage: In Chef... how do you get a cookbook's template to inherit a variable from a recipe?
[2014-06-25 11:39:42 -0400] srenatus: rsavage: inherit? you're supposed to pass a hash to the variables() method of your template resource...
[2014-06-25 11:40:02 -0400] srenatus: rsavage: that makes stuff more transparent than some implicit kind of inheritance...
[2014-06-25 11:40:22 -0400] rsavage: srenatus.. makes sense?  do you have an example?
[2014-06-25 11:41:18 -0400] srenatus: rsavage: scroll down here, http://docs.opscode.com/resource_template.html
[2014-06-25 11:41:53 -0400] rsavage: So I have node['someting'] = "string" in my recipe, and the template file I use has info = '<% node['something'] %>, and all I end up with is info = ''
[2014-06-25 11:44:27 -0400] coderanger: rsavage: You need to use <%= to output a variable in Erb
[2014-06-25 11:44:31 -0400] srenatus: <%= node[...] %>
[2014-06-25 11:44:36 -0400] srenatus: :)
[2014-06-25 11:44:53 -0400] coderanger: rsavage: <% is for non-output code like conditionals and loops
[2014-06-25 11:45:05 -0400] rsavage: doh!
[2014-06-25 11:45:07 -0400] rsavage: thanks
[2014-06-25 11:45:38 -0400] rsavage: face-palm
[2014-06-25 11:45:53 -0400] coderanger: rsavage: Also it is highly recommended you not use node attrs like that directly in a template
[2014-06-25 11:46:10 -0400] coderanger: rsavage: It makes data flow much harder to follow and leads to maintenance frustration
[2014-06-25 11:46:46 -0400] rsavage: coderanger, I know... this is just POC stuff I am working on
[2014-06-25 11:55:24 -0400] whiteadam: coderanger's night shift is over
[2014-06-25 12:00:12 -0400] bcave: best time to code
[2014-06-25 12:00:20 -0400] bcave: graveyard shift
[2014-06-25 12:01:27 -0400] bcave: with chef, how could you deal with slow service initializing and dependencies on that service?
[2014-06-25 12:01:43 -0400] bcave: e.g. i have a service definition that starts a service and notifies an execution on that service.
[2014-06-25 12:02:11 -0400] bcave: however, the service sometimes takes a while to come up. a hard-coded sleep is an ugly way of working around it...
[2014-06-25 12:02:57 -0400] bcave: i'm thinking of overwriting the service init script's start method to use a loop with a netstat or something
[2014-06-25 12:03:42 -0400] bcave: any other ideas?
[2014-06-25 12:04:06 -0400] whiteadam: i'll have an idea after a few more cups of coffee
[2014-06-25 12:04:23 -0400] bcave: good idea, i'm long overdue too :p. Good morning by the way.
[2014-06-25 12:05:24 -0400] whiteadam: I took some allergy medicine before bed, so I'm in a serious haze
[2014-06-25 12:08:24 -0400] trojanskis: hey ppl. is it possible to delete the databag item from recipe ? what I wanna do is. if there is a "remove" flag for user then delete it not only from server ( userdel ) but also from chef-server's database.
[2014-06-25 12:09:28 -0400] whiteadam: trojanskis: So, like, he's got an admin account on the server and you want to delete that too, in one swoop?
[2014-06-25 12:10:11 -0400] trojanskis: whiteadam: I just want to cleanup databag from chef-server bc it's not gonna be used anymore, and I don't want to keep that
[2014-06-25 12:10:30 -0400] whiteadam: ohh, I see. I'm not sure... I'm sure it's possible though
[2014-06-25 12:13:29 -0400] bcave: ok, seem to have a solution that works well. http://upstart.ubuntu.com/wiki/JobScripts - post-start script with nc
[2014-06-25 12:21:41 -0400] ambientsound: can anyone provide a good example on how to do network interface configuration on an infrastructure with 100+ nodes?
[2014-06-25 12:24:31 -0400] ambientsound: i'd like to be able to configure a DNS and DHCP server as well, using the same configuration hash
[2014-06-25 12:24:45 -0400] ambientsound: has anyone done this or should I invent the wheel? :-P
[2014-06-25 12:43:36 -0400] whiteadam: ambientsound: You might have to invent the wheel on that one.
[2014-06-25 12:43:57 -0400] whiteadam: ambientsound: Sounds like you want an infrastructure in a box :)
[2014-06-25 12:43:59 -0400] ambientsound: whiteadam: I guess it's too site specific.
[2014-06-25 12:44:06 -0400] ambientsound: hell, why not?
[2014-06-25 13:14:13 -0400] srenatus: bcave: did you go with the nc call in the upstart script now?  (Just wondering about the same issue somewhere else)
[2014-06-25 13:15:21 -0400] srenatus: bcave: something like this might be an alternative: https://gist.github.com/voxeosupport/1712985
[2014-06-25 13:25:04 -0400] EricL_: Can someone explain to me how to fix thsi issue? http://pastie.org/9322931
[2014-06-25 13:25:54 -0400] EricL_: I have the ubuntu::default recipe running first to replace the sources.list, but the convergence seems to ignore that on first run.  Then I have to run the recipe manually to update the sources.list so the bootstrap can finish.
[2014-06-25 13:26:11 -0400] EricL_: This seems to me to be a bug of sorts, but I am not sure what sort.
[2014-06-25 13:29:25 -0400] bcave: yeah, i did srenatus
[2014-06-25 13:30:17 -0400] bcave: while ! nc -q0 localhost <%= servicePort %> </dev/null >/dev/null 2>&1; do sleep 1; done
[2014-06-25 13:31:46 -0400] bcave: thanks for the link - that's the sort of approach i originally had in mind - doing it with a bash / execute (or ruby now) in chef.
[2014-06-25 13:32:25 -0400] bcave: for this service though, I think it makes sense to have it in upstart though
[2014-06-25 13:36:11 -0400] srenatus: bcave: I agree, upstart seems to be the right place for that, imho.  it's just hard when you can't rely on upstart being everywhere... I still hope for pleaserun to fix that. ;)
[2014-06-25 13:37:14 -0400] bcave: EricL: I haven't used the ubuntu cookbook, but seen a similar issue. The apt default recipe fixed similar issues for me
[2014-06-25 13:37:40 -0400] EricL: I have the apt default recipe running immediately after the ubuntu recipe.
[2014-06-25 13:37:52 -0400] EricL: The problem is, I think, that it never actually makes it to those recipes.
[2014-06-25 13:38:03 -0400] bcave: oh - i see ubuntu does run apt
[2014-06-25 13:38:04 -0400] EricL: It feel slike it's failing before the recipes actually run.
[2014-06-25 13:38:17 -0400] bcave: during the configuration phase
[2014-06-25 13:38:29 -0400] EricL: Yes.
[2014-06-25 13:40:10 -0400] bcave: r.run_action(:install)
[2014-06-25 13:40:34 -0400] bcave: that maps the install of build essential into configuration phase
[2014-06-25 13:40:55 -0400] bcave: so it's executed before convergence where the apt updates happen
[2014-06-25 13:41:19 -0400] EricL: Right.
[2014-06-25 13:41:20 -0400] bcave: In /var/chef/cache/cookbooks/build-essential/recipes/debian.rb L 43 - i think that might be related to the issue
[2014-06-25 13:41:27 -0400] EricL: Any idea how to get around that?
[2014-06-25 13:42:05 -0400] EricL: Other than roll a new AMI that has a usable sources.list?
[2014-06-25 13:42:42 -0400] bcave: i used a workaround
[2014-06-25 13:43:43 -0400] EricL: What's that?
[2014-06-25 13:43:47 -0400] bcave: https://gist.github.com/brettcave/70d13cfaa58d6ef160e1
[2014-06-25 13:44:01 -0400] bcave: force an apt-get update in configuration phase
[2014-06-25 13:44:26 -0400] EricL: But I need the ubuntu recipe to run PRIOR to that otherwise the apt-get update will fail.
[2014-06-25 13:44:42 -0400] EricL: That's why I have the ubuntu::default recipe running first.
[2014-06-25 13:45:33 -0400] EricL: And where do you put that code snippet to make it run in the configuration phase?
[2014-06-25 13:45:45 -0400] bcave: where ever
[2014-06-25 13:45:56 -0400] bcave: you assign the resource to a variable
[2014-06-25 13:46:09 -0400] bcave: and then a.run_aciton :run will be done during configuration
[2014-06-25 13:46:34 -0400] bcave: i have a cookbook::pre that has it in
[2014-06-25 13:46:53 -0400] bcave: my role's run list has cookbook::pre then other stuff
[2014-06-25 13:47:37 -0400] bcave: i think i got that apt-get bash command from the apt cookbook, so I found what the apt cookbook did during an update, and recreated it manually in the wrapper recipe.
[2014-06-25 13:48:03 -0400] bcave: and moved it from convergence to config
[2014-06-25 13:48:25 -0400] EricL: Can I have a recipe run during config?
[2014-06-25 13:48:35 -0400] EricL: Because that's basically all I need to happen to fix this issue.
[2014-06-25 13:49:52 -0400] bcave: here's the chef client process http://docs.opscode.com/essentials_nodes_chef_run.html
[2014-06-25 13:50:25 -0400] bcave: i was referring to "configuration phase" its actually "compile resource collection"
[2014-06-25 13:51:26 -0400] bcave: each action specified in each recipe is identified before any Ruby code within a recipe is evaluated.
[2014-06-25 13:54:43 -0400] EricL: Ok, so there is no way to do what I'm trying to do?
[2014-06-25 13:54:55 -0400] bcave: ah - wait. just looking at the build essential recipe...
[2014-06-25 13:55:19 -0400] bcave: try setting node[:build_essential][:compiletime] to false
[2014-06-25 13:56:14 -0400] bcave: it looks like build_essential recipe will then be executed during converge phase as per the run_list of the role
[2014-06-25 13:57:28 -0400] EricL: I thought that breaks other stuff and that was bad juju.
[2014-06-25 13:57:46 -0400] froolie: Hey all. I'm getting this error from my recipe run : ERROR: remote_file[Download Tarball] (mycookbook::default line 50) had an error: Chef::Exceptions::EnclosingDirectoryDoesNotExist: Parent directory [/opt/mycompany/apps does not exist.
[2014-06-25 13:57:56 -0400] bcave: have a look at the debian recipe, it actually runs an apt-get update using a similar approach to that gist, there's some conditions regaring update-success-stamp files
[2014-06-25 13:57:57 -0400] froolie: however the first resource in my cookbook is a directory resource
[2014-06-25 13:58:09 -0400] froolie: and logging in to the server the dir structure is clearly there
[2014-06-25 13:58:54 -0400] froolie: Also, the remote_file resource throwing this error message doesn
[2014-06-25 13:59:03 -0400] bcave: froolie:  is that a full paste of the error - there looks like there's a floating "[" in there
[2014-06-25 13:59:06 -0400] EricL: bcave: Ok, let me give some of this a try and see how ti works out.
[2014-06-25 13:59:08 -0400] froolie: 't even reference that directory, so I'm not sure why it cares
[2014-06-25 13:59:11 -0400] EricL: Thansk for the help.
[2014-06-25 13:59:15 -0400] froolie: okay, will do
[2014-06-25 13:59:20 -0400] bcave: np, hope you come right
[2014-06-25 13:59:38 -0400] EricL: Me too.  I hate not being able to auto-launch machines.
[2014-06-25 14:00:29 -0400] bcave: i'm actually right in the middle of refactoring from a Prep->Register AMI -> Launch approach to single launch right now for some of our resources
[2014-06-25 14:00:33 -0400] bcave: i feel your pain :)
[2014-06-25 14:01:03 -0400] EricL: Actually, that immeidatley didn't work.
[2014-06-25 14:01:14 -0400] bcave: setting the attribute?
[2014-06-25 14:01:14 -0400] EricL: There are a few other things that rely on compiletime being true apparently.
[2014-06-25 14:01:25 -0400] froolie: bcave: this is the full error after a chef run http://pastebin.com/NzwB6pNy
[2014-06-25 14:01:32 -0400] EricL: All things that are in the compile phase.
[2014-06-25 14:01:42 -0400] bcave: ah ok. Did you try the approach I had in the gist?
[2014-06-25 14:02:24 -0400] EricL: Nope.
[2014-06-25 14:02:28 -0400] froolie: ohhhhhh
[2014-06-25 14:02:31 -0400] EricL: But that can't work.
[2014-06-25 14:02:33 -0400] bcave: foolie: path
[2014-06-25 14:02:42 -0400] bcave: don't put the []'s in the ""
[2014-06-25 14:02:50 -0400] EricL: The thing that is failing is that apt-get update doesn't work.
[2014-06-25 14:03:02 -0400] EricL: All you are doing in the gist is forcing an apt-get update to attempt to run earlier.
[2014-06-25 14:03:24 -0400] bcave: TIAS
[2014-06-25 14:03:31 -0400] EricL: I need to replace the sources.list file *first* and then right the apt-get update.
[2014-06-25 14:03:35 -0400] bcave: the apt-get update runs
[2014-06-25 14:03:41 -0400] bcave: its the package install that fails
[2014-06-25 14:03:55 -0400] EricL: Because apt-get has incorrect sources.
[2014-06-25 14:04:03 -0400] EricL: s/apt-get/apt/
[2014-06-25 14:04:14 -0400] EricL: I need to correct the apt sources so the package can properly install.
[2014-06-25 14:04:18 -0400] froolie: bcave: it should look like this "#{node[:mycookbook][:download_dir]}/#{node[:mycookbook][:package]}" ?
[2014-06-25 14:08:05 -0400] mondo: does knife not look for its config in ~/.chef on osx?
[2014-06-25 14:08:06 -0400] froolie: bcave: thanks. That did the trick. Appreciate it.
[2014-06-25 14:08:43 -0400] bcave: are the sources updated by the ubuntu cookbook?
[2014-06-25 14:09:16 -0400] bcave: like I said - i had exactly the same error doing something similar to what you are, and I was able to fix it by forcing an apt-get update
[2014-06-25 14:09:28 -0400] bcave: in my own recipe
[2014-06-25 14:09:34 -0400] bcave: no prob froolie
[2014-06-25 14:10:22 -0400] bcave: EricL: try it, shouldn't take you more than 5 minutes to give it a run, give it a shot and see
[2014-06-25 14:10:54 -0400] bcave: put that in a recipe that's included first in teh role's run_list
[2014-06-25 14:11:45 -0400] EricL: Yes, the sources are updated by Ubuntu.
[2014-06-25 14:12:17 -0400] EricL: I'm in the process of trying your suggestion right now.
[2014-06-25 14:14:38 -0400] EricL: A few slight modifications required, but it appears as though it worked.
[2014-06-25 14:14:50 -0400] EricL: Let me just try it on a fresh machine now to be sure.
[2014-06-25 14:15:39 -0400] srenatus: mondo: are you sure that there's no other .chef between your `pwd` and ~ ?
[2014-06-25 14:23:02 -0400] mondo: srenatus it was a broken symlink with my knife.rb
[2014-06-25 14:25:24 -0400] EricL: bcave: Thanks, it worked.
[2014-06-25 14:26:31 -0400] srenatus: mondo: ah, ok
[2014-06-25 14:32:56 -0400] bcave: glad to hear EricL
[2014-06-25 14:33:32 -0400] bcave: I'm off, cheers all.
[2014-06-25 14:34:42 -0400] savant: is there a way to configure where chef logs go?
[2014-06-25 14:34:57 -0400] srenatus:  /etc/chef/client.rb
[2014-06-25 14:35:13 -0400] savant: i mean like use an adapter to send them to, say, a redis queue
[2014-06-25 14:35:24 -0400] savant: basically i want to ship chef runs to logstash
[2014-06-25 14:35:46 -0400] savant: or a broker somewhere - in my case redis - where i will then ingest the logs
[2014-06-25 14:36:00 -0400] savant: then i can notify hipchat when a pass is done with a link to the logs within a web ui
[2014-06-25 14:36:12 -0400] srenatus: hmm... so you might want really want a report handler?  I guess pushing the report.json to logstash is quite useful, containing lots of data in logstash'queriable form...
[2014-06-25 14:36:29 -0400] savant: i want every log line from the run
[2014-06-25 14:36:34 -0400] savant: not just the report handler info
[2014-06-25 14:36:38 -0400] savant: not sure if thats possible?
[2014-06-25 14:36:51 -0400] savant: when chef runs, i'd create a unique id
[2014-06-25 14:36:59 -0400] savant: and that would be passed to whatever log handler there is
[2014-06-25 14:37:17 -0400] savant: the log handler would send every log line to stdout as well as to redis in json form (with other info)
[2014-06-25 14:37:43 -0400] savant: the hipchat report handler i have would notify hipchat that the run is done, it's status, number of modified resources, and a url for logs
[2014-06-25 14:37:55 -0400] kennon: @savant - maybe look at this? https://github.com/lusis/logstash_handler
[2014-06-25 14:38:27 -0400] savant: thats not for individual log lines though
[2014-06-25 14:39:17 -0400] srenatus: what's in a log that goes beyond the events...? this looks quite nice IMHO https://github.com/lusis/logstash_handler/blob/master/files/default/logstash_handler.rb
[2014-06-25 14:39:28 -0400] srenatus: ok, Chef::Log.* calls.
[2014-06-25 14:39:31 -0400] savant: yes
[2014-06-25 14:39:45 -0400] savant: like the entire log output
[2014-06-25 14:39:48 -0400] savant: all of it
[2014-06-25 14:46:03 -0400] gyoza: HELLO
[2014-06-25 14:53:03 -0400] whiteadam: HAI
[2014-06-25 14:55:54 -0400] matti: gyoza: 500 Error unknown remote host.
[2014-06-25 14:56:02 -0400] matti: whiteadam: Ohai
[2014-06-25 14:57:52 -0400] chiefsucker: I want to install Chef on a second very small network that will have less than 5 nodes. Is there any difference in functionality between the self-hosted enterprise and the open source version? Their site is kind of obscure, I dont know what they mean by Enhanced Management Console or "Push" Command and Control Client Runs**.
[2014-06-25 14:59:13 -0400] srenatus: savant: I guess there're not many options beside writing to a file then: https://github.com/opscode/chef/blob/master/lib/chef/monologger.rb  Chef::Log doesn't know anything else.
[2014-06-25 14:59:21 -0400] chiefsucker: And Ive read that the Chef Enterprise version for Ubuntu 11.x works nicely on Debian Wheezy, but the welcome mail has only a download link for Ubuntu 12.x which throws some errors, because of the older libc on wheezy. Do you know the easiest way to install Chef on Debian?
[2014-06-25 14:59:41 -0400] srenatus: savant: I still think that pushing the events as json, too, would make sense... allowing better queries etc.
[2014-06-25 15:01:36 -0400] savant: srenatus: what you're saying is I should monkey patch that to hell
[2014-06-25 15:03:49 -0400] savant: i guess i have a weekend project
[2014-06-25 15:10:15 -0400] cheeseplus: chiefsucker: you get some extra features in enterprise, one of them being "push jobs" http://docs.opscode.com/push_jobs.html
[2014-06-25 15:11:10 -0400] cheeseplus: chiefsucker: chef also has packages for a variety of distros available here - http://www.getchef.com/chef/install/
[2014-06-25 15:14:48 -0400] chiefsucker: cheeseplus: But the linked packages are the open source versions or am I wrong?
[2014-06-25 15:15:59 -0400] chiefsucker: push jobs sounds nice, but Im not sure this is relevant with such a small network of less than 5 nodes.
[2014-06-25 15:16:05 -0400] cheeseplus: well only the server side has an enterprise version
[2014-06-25 15:16:24 -0400] cheeseplus: if you only have < 5 you can use Hosted Chef for free
[2014-06-25 15:16:37 -0400] cheeseplus: and punt on running your own Chef server
[2014-06-25 15:17:23 -0400] chiefsucker: I need to run it in private network.
[2014-06-25 15:17:33 -0400] workmad3: chiefsucker: no outside access?
[2014-06-25 15:17:46 -0400] chiefsucker: VPN
[2014-06-25 15:18:16 -0400] workmad3: chiefsucker: as long as the nodes can call out to the hosted server, using hosted shouldn't be a problem, afaik
[2014-06-25 15:18:33 -0400] chiefsucker: workmad3: Ah, OK. I thought that the server also has to reach the nodes.
[2014-06-25 15:18:53 -0400] workmad3: chiefsucker: I guess you might have issues with the push jobs... not looked at them tbh (I run with my own chef server, open-source chef doesn't have push jobs yet)
[2014-06-25 15:19:24 -0400] chiefsucker: workmad3: Will I miss something else when using the open source server? Im a total Chef noob and just getting started.
[2014-06-25 15:19:27 -0400] workmad3: chiefsucker: normal chef runs are always initiated from the node though... they call out to the server :)
[2014-06-25 15:20:39 -0400] workmad3: chiefsucker: open source server lacks push jobs, has more primitive users and access control lists, and lacks some more advanced reporting features from client runs... probably some other bits I don't know about too
[2014-06-25 15:20:59 -0400] workmad3: chiefsucker: nothing that stops you using chef, just some bits that make the hosted version nicer :)
[2014-06-25 15:23:16 -0400] chiefsucker: workmad3: There will be only one user ;) I can run chef-client with regular cron jobs for such a small amount of nodes, the reporting is interesting, though.
[2014-06-25 15:23:20 -0400] cheeseplus: chiefsucker: you won't miss a thing you wouldn't otherwise know about ;)
[2014-06-25 15:24:02 -0400] chiefsucker: Thanks so much. Ill probably go with the open source version for myself. It should be enough.
[2014-06-25 15:24:07 -0400] cheeseplus: chiefsucker: push jobs are neat and the RBAC is useful but otherwise it's not going to affect 90% of your chef work unless you specfically leveraged the features
[2014-06-25 15:24:17 -0400] chiefsucker: Im really glad that youre such a wonderful community.
[2014-06-25 15:24:30 -0400] cheeseplus: and it's all additive as well, not like you miss out on something in OS
[2014-06-25 15:24:39 -0400] cheeseplus: chiefsucker: we are too <3
[2014-06-25 15:25:13 -0400] chiefsucker: I hope that Ill gain enough knowledge to be also part of it. Im really fascinated by Chef.
[2014-06-25 15:25:59 -0400] cheeseplus: chiefsucker: http://learn.getchef.com/ is a good start
[2014-06-25 15:26:16 -0400] cheeseplus: chiefsucker: and for more advanced level stuff - http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-06-25 15:26:30 -0400] chiefsucker: cheeseplus: Thanks, Ill arleady took a look at both links, I also watched all the YouTube videos.
[2014-06-25 15:26:52 -0400] chiefsucker: The Berkshelf way is something I still try to wrap my head around. Theres so much information in the beginning, that Im overwhelmed.
[2014-06-25 15:26:53 -0400] cheeseplus: well they you're well prepared to get started
[2014-06-25 15:27:11 -0400] cheeseplus: there is a learning curve but it's gotten way better ;)
[2014-06-25 15:30:29 -0400] chiefsucker: Is private-chef-ctl the open source equivalent of chef-server-ctl?
[2014-06-25 15:31:23 -0400] ChrissKO: I guys... I have the next stupid problem... I like to have a random number in a variable which I like to use in two bash scrips executed in two "code" sections in a recipe.
[2014-06-25 15:31:40 -0400] whiteadam: mmm rand
[2014-06-25 15:31:47 -0400] ChrissKO: ?
[2014-06-25 15:31:56 -0400] whiteadam: Was there a question?
[2014-06-25 15:32:11 -0400] whiteadam: You just want a random number?
[2014-06-25 15:32:18 -0400] ChrissKO: Yes... sorry... what do you mean with "mmm rand"?
[2014-06-25 15:32:31 -0400] whiteadam: rand is ruby for a random number
[2014-06-25 15:33:28 -0400] whiteadam: Do this on the command line: ruby -e "puts rand"
[2014-06-25 15:33:39 -0400] humy: why is it that when i execute ". ~/.bash_profile" in chef, the file isn't being reloaded?
[2014-06-25 15:33:41 -0400] workmad3: ChrissKO: if you need the number to be generated in a secure way, there's also 'SecureRandom.random_number'
[2014-06-25 15:33:43 -0400] ChrissKO: Well, yes, the idea is to backup some files in a recipe, do some normal work and but the files back in place. So I like to store the files in a directory in /tmp/random_number/ to make sure that I do not collidate with existing files.
[2014-06-25 15:34:28 -0400] whiteadam: ChrissKO: You could use something like Time.now
[2014-06-25 15:34:36 -0400] workmad3: ChrissKO: or Dir.mktmpdir
[2014-06-25 15:35:12 -0400] workmad3: ChrissKO: http://ruby-doc.org/stdlib-1.9.3/libdoc/tmpdir/rdoc/Dir.html
[2014-06-25 15:35:19 -0400] ChrissKO: The Dir.mktmldir sounds familiar from the unix command. :)
[2014-06-25 15:36:40 -0400] whiteadam: Vyatta vRouter training.. so boring
[2014-06-25 15:36:46 -0400] ChrissKO: I will get back the name on standard out on linux, so I can add it easy into a variable, how can I do something like that in ruby/recipe?
[2014-06-25 15:37:13 -0400] workmad3: ChrissKO: the doc page gives you examples in normal ruby
[2014-06-25 15:37:40 -0400] workmad3: ChrissKO: if you do your work in a ruby_block, then it should be pretty much identical
[2014-06-25 15:37:59 -0400] workmad3: ChrissKO: otherwise you'll need to be careful with the compile/converge difference in chef
[2014-06-25 15:38:07 -0400] freerobby: Hi, Can somebody help me with a problem? I am creating a resource chain via notifications; however if one of the resources doesn't run (say because it is up to date), it will not notify the next resource in the chain. Is there any way to ensure the notification is always sent even if a resource does not run, or any viable workaround for this?
[2014-06-25 15:38:21 -0400] ChrissKO: And this variable will be available later in the recipe?
[2014-06-25 15:39:48 -0400] workmad3: freerobby: it sounds like you should probably just be using resources normally, not using notifications... notifications are entirely around the idea of notifying another resource when a resource changes
[2014-06-25 15:40:19 -0400] workmad3: freerobby: if a resource should just always be run, then put them in the order they should run in a recipe ;)
[2014-06-25 15:42:36 -0400] freerobby: workmad3: that's what i do when things are wholly my own. in this case the problem is that i need to trigger it via a resource in another recipe. imagine some other recipe runs resource a and then resource b; i need to run a bunch of stuff in between them.
[2014-06-25 15:44:04 -0400] workmad3: freerobby: that's the point I fork and rewrite the recipe
[2014-06-25 15:48:19 -0400] chiefsucker: I cant reconfigure Chef after installing the deb package :( No such file or directory - initctl status chef-server-runsvdir
[2014-06-25 15:51:56 -0400] chiefsucker: Meeh, I probably shouldnt use Debian Wheezy.
[2014-06-25 16:00:54 -0400] freerobby: workmad3: Yeah. Just annoying because we have other cookbooks that use the original version, then we don't have a single canonical cookbook, etc.
[2014-06-25 16:03:18 -0400] gleam: i'm running chef-server on wheezy w/out issue
[2014-06-25 16:17:39 -0400] jarsever: I have a cookbook that installs multiple products.  I have separated the attributes and recipes.  I am separating the templates into subfolders but there are some templates that need to be shared with all of the recipes.  Where would you put those... the 'default' folder?
[2014-06-25 17:06:46 -0400] bougyman: what's the proper way to use a resource/provider from another cookbook?
[2014-06-25 17:06:59 -0400] bougyman: trying to make a wrapper cookbook which uses the resources in the zookeeper cookbook.
[2014-06-25 17:10:04 -0400] someara: its not a "wrapper", its just depending on it.... put "depends zookeeper" in your metadata.rb and it will load all the libraries and resources when chef-client starts
[2014-06-25 17:11:00 -0400] bougyman: that's what I thought
[2014-06-25 17:11:04 -0400] bougyman: but it's not doing so.
[2014-06-25 17:11:28 -0400] bougyman: got the "wrapper" nomenclature from cookbooks
[2014-06-25 17:11:34 -0400] bougyman: er from http://www.getchef.com/blog/2013/12/03/doing-wrapper-cookbooks-right/
[2014-06-25 17:11:52 -0400] someara: what zookeeper cookbook are you using?
[2014-06-25 17:12:00 -0400] bougyman: the SimpleFinance one
[2014-06-25 17:12:08 -0400] bougyman: https://github.com/SimpleFinance/chef-zookeeper
[2014-06-25 17:14:05 -0400] someara: here's an example of yum-epel depending on yum to get access to yum_repository https://github.com/opscode-cookbooks/yum-epel/blob/master/metadata.rb#L9
[2014-06-25 17:14:22 -0400] bougyman: same as what I have in my zk_cluster/metadata.rb
[2014-06-25 17:14:31 -0400] bougyman: with depends "zookeeper"
[2014-06-25 17:14:47 -0400] whiteadam: Do you get a failure message?
[2014-06-25 17:14:58 -0400] bougyman: yes. no resource nor method named 'zookeeper'
[2014-06-25 17:15:35 -0400] bougyman: i'm trying a workaround now, just setting node.override[:zookeeper][:config] then include_recipe "zookeeper:default"
[2014-06-25 17:15:45 -0400] bougyman: instead of trying to use the resources in my zk_cluster cookbook.
[2014-06-25 17:16:26 -0400] someara: thats really weird... it should totally be working. what version of chef are you on?
[2014-06-25 17:17:33 -0400] sanguisdex: how can I pipe my all connections made by chef clieht through a proxy?
[2014-06-25 17:18:37 -0400] bougyman: someara: found the issue.
[2014-06-25 17:18:58 -0400] bougyman: the zookeeper cookbook chef-server had was different from the one I thought it was.
[2014-06-25 17:19:04 -0400] whiteadam: sanguisdex: Just chef-client or all connections?
[2014-06-25 17:19:09 -0400] bougyman: uploading a new zookeeper cookbook fixed it.
[2014-06-25 17:19:16 -0400] bougyman: whew, thought I was going crazy there for a sec
[2014-06-25 17:19:53 -0400] sanguisdex: whiteadam: all connections made by the cleint, when it grabs the cooksbooks ect
[2014-06-25 17:20:28 -0400] whiteadam: sanguisdex: http://docs.opscode.com/config_rb_client.html  It's under settings, all the proxy info
[2014-06-25 17:21:06 -0400] sanguisdex: thanks whiteadam
[2014-06-25 17:30:04 -0400] prometheanfire: what do you think the average turn around time is to opscode-cookbooks?
[2014-06-25 17:30:14 -0400] prometheanfire: for pull requests
[2014-06-25 17:30:37 -0400] whiteadam: prometheanfire: I think they do a review every day or so. They announce it in here when they do.
[2014-06-25 17:31:26 -0400] prometheanfire: I see outstanding pull requests open for very extended lengths of time and it worries me, don't want to maintain a for forever....
[2014-06-25 17:31:52 -0400] whiteadam: Maybe they're not approved or they don't contain the proper code/structure
[2014-06-25 17:32:29 -0400] prometheanfire: https://github.com/opscode-cookbooks/varnish/pull/10
[2014-06-25 17:32:39 -0400] prometheanfire: no feedback when asked
[2014-06-25 17:32:57 -0400] savant: prometheanfire: that happens a lot in my experience
[2014-06-25 17:33:05 -0400] savant: happened quite a bit in the mysql cookbook
[2014-06-25 17:33:15 -0400] savant: basically you gotta bug someone constantly
[2014-06-25 17:33:34 -0400] savant: what worked for me is complaining on twitter, then someone from chef emailed me and then the pr was merged the following week.
[2014-06-25 17:33:46 -0400] prometheanfire: ya, that
[2014-06-25 17:33:48 -0400] prometheanfire: 'bah
[2014-06-25 17:33:54 -0400] savant: they do two pr merge windows a week
[2014-06-25 17:33:55 -0400] prometheanfire: ya, that's what I'm worried about
[2014-06-25 17:33:58 -0400] whiteadam: It is open source... you know how it goes.
[2014-06-25 17:33:59 -0400] savant: tuesday/thursday i think
[2014-06-25 17:34:05 -0400] savant: yeah its OS
[2014-06-25 17:34:12 -0400] savant: i mean i have ~100 prs open to my own repos
[2014-06-25 17:34:17 -0400] savant: doesnt help that I have ~100 repos.
[2014-06-25 17:34:26 -0400] prometheanfire: whiteadam: well, it varries, some open source stuff people get on top of :P
[2014-06-25 17:34:49 -0400] whiteadam: heh, yeah, but I would say more are NOT on top of it than are
[2014-06-25 17:34:52 -0400] someara: sorry about PRs.... we've been busy trying to get supermarket out and transition off JIRA
[2014-06-25 17:35:00 -0400] savant: i still find it a bit funny that the opscode-cookbooks - which I assume are official - don't have someone from chef working on them as their day-job
[2014-06-25 17:35:09 -0400] savant: which makes sense in terms of them offloading some repos
[2014-06-25 17:35:09 -0400] someara: we have to manually check every PR for a CLA right now
[2014-06-25 17:35:13 -0400] savant: and the supermarket thing
[2014-06-25 17:35:21 -0400] savant: programming is hard.
[2014-06-25 17:35:26 -0400] whiteadam: amen
[2014-06-25 17:35:30 -0400] someara: actually they do have somebody working on them as they day-job
[2014-06-25 17:35:33 -0400] someara: that'd be me
[2014-06-25 17:35:35 -0400] prometheanfire: someara: I'm looking for a contact at opscode to talk with some stuff about (merge process and the like) :P
[2014-06-25 17:35:41 -0400] whiteadam: I wish there was a way to take over repos on github after a certain amount of time.
[2014-06-25 17:35:56 -0400] prometheanfire: our team is looking to do a ton of upstream pull reqs
[2014-06-25 17:36:06 -0400] someara: we're aware of the pain and are actively fixing it
[2014-06-25 17:36:19 -0400] prometheanfire: whiteadam: same, timezone-ii for instance, I've tried to email the guy......
[2014-06-25 17:36:54 -0400] whiteadam: prometheanfire: Yeah, it's like, I can fork it, but then getting the word out that there's a new one takes a long time.
[2014-06-25 17:37:04 -0400] prometheanfire: yep
[2014-06-25 17:37:06 -0400] savant: prometheanfire: at the end of the day, especially for OS, its hard to be on top of everything
[2014-06-25 17:37:21 -0400] prometheanfire: savant: I do agree :P
[2014-06-25 17:37:36 -0400] savant: we all have day jobs
[2014-06-25 17:37:49 -0400] savant: i scaled back my os stuff since i kinda need to pay rent
[2014-06-25 17:37:51 -0400] savant: :(
[2014-06-25 17:38:30 -0400] tejaycar: Hey folk.  quick chef-zero question
[2014-06-25 17:39:14 -0400] tejaycar: Is there any way to pre-load chef-zero?  ie, put cookbooks, roles, etc in a directory and have chef-zero pick them up at startup?
[2014-06-25 17:39:40 -0400] jkeiser: tejaycar: chef local mode.  knife --local-mode and chef-client --local-mode will do that
[2014-06-25 17:40:24 -0400] jkeiser: tejaycar: in the next chef (11.14 is due Real Soon Now I believe) you can also say "knife serve" to get it to permanently serve the data up
[2014-06-25 17:40:39 -0400] tejaycar: very cool, but not quite what I need
[2014-06-25 17:40:53 -0400] jkeiser: tejaycar: though, local mode is a little different from what you describe: not only will it preload, it will write stuff out to disk when PUT/POST/DELETE happen.
[2014-06-25 17:40:54 -0400] tejaycar: I'm having trouble with vagrant-chef-zero
[2014-06-25 17:41:18 -0400] tejaycar: I'm looking to have a local chef-zero instance running that my vagrant nodes can hit
[2014-06-25 17:41:31 -0400] tejaycar: so a chef local won't do the trick, unless I'm missing something
[2014-06-25 17:41:33 -0400] jkeiser: tejaycar: you can preload chef-zero by doing knife upload / just after starting it up
[2014-06-25 17:41:42 -0400] jkeiser: Well, knife serve will do what you want, I think
[2014-06-25 17:41:58 -0400] jkeiser: Starts up a chef-zero pointed at your chef-repo, and leaves it up, and tells you the URL
[2014-06-25 17:42:03 -0400] tejaycar: Very cool.
[2014-06-25 17:42:29 -0400] tejaycar: So, under the covers, is that just  uploading everything to chef-zero on startup?
[2014-06-25 17:42:42 -0400] tejaycar: or is there a way to get chef-zero to natively read it?
[2014-06-25 17:42:54 -0400] jkeiser: tejaycar: no, chef-zero is actually using the disk as its store instead of memory in that case
[2014-06-25 17:43:17 -0400] jkeiser: tejaycar: when you do a GET /roles/blah, it looks for roles/blah.json on disk right then and there
[2014-06-25 17:43:23 -0400] tejaycar: ok, that's what I figured.  So no way to do it with chef-zero alone.
[2014-06-25 17:43:47 -0400] tejaycar: But I can do it with just the built in knife as soon as 11.14 is released?
[2014-06-25 17:44:06 -0400] jkeiser: Right.  The actual backend store is ChefFS, which is a part of chef (used for knife upload and download as well)
[2014-06-25 17:44:08 -0400] jkeiser: yeah
[2014-06-25 17:44:13 -0400] jkeiser: or you can gem install chef --pre
[2014-06-25 17:44:20 -0400] jkeiser: and that should get you the knife serve version
[2014-06-25 17:44:30 -0400] tejaycar: Thanks jkeiser.  You're a huge help.
[2014-06-25 17:44:32 -0400] jkeiser: chefdk might have an 11.14 prerelease, I'm not sure about that
[2014-06-25 17:44:32 -0400] jkeiser: np
[2014-06-25 17:44:44 -0400] tejaycar: I think I'll stick with solo for now, and then add the knife serve option when it's formally released.
[2014-06-25 17:45:11 -0400] tejaycar: No way to get chefdk installed with a Gemfile, right?
[2014-06-25 17:46:20 -0400] jkeiser: I don't believe so, but I'm not the best person to ask, that's really kind of a low-confidence guess on my part
[2014-06-25 17:46:52 -0400] tejaycar: NP, I looked moderately hard.  So I'm pretty sure you're right.  Thanks for the help, and have a great day.
[2014-06-25 18:22:01 -0400] jmreicha: Hey guys, having trouble getting a custom service I'm working on to restart - hopefully it's something easy.  I have a gist of the code here - https://gist.github.com/jmreicha/2b88a4ef08a540aa23a6
[2014-06-25 18:22:37 -0400] squaresurf: I think you need to define the service before the template.
[2014-06-25 18:23:26 -0400] jmreicha: squaresurf: I will give that a try
[2014-06-25 18:23:30 -0400] jmreicha: be back in a sec
[2014-06-25 18:29:34 -0400] froolie: I have a series of notifies. My http_request notifies a remote_file resource which notifies a bash resource. The first two resources have action :nothing. Does the last resource, the bash one, need to have action :run or should it also be action :nothing?
[2014-06-25 18:30:07 -0400] froolie: I ask because when I run the recipe multiple times the bash resource seems to be doing its thing over again, whereas the others say up-to-date because there's nothing to change
[2014-06-25 18:34:33 -0400] jmreicha: squaresurf: hm, same result
[2014-06-25 18:35:16 -0400] squaresurf: can you pastebin your errors?
[2014-06-25 18:35:17 -0400] jmreicha: It looks like it is hitting the action start and then exits, I can't see why it's not hitting the restart :/
[2014-06-25 18:35:39 -0400] squaresurf: froolie: when do you want the bash resource to run?
[2014-06-25 18:36:15 -0400] froolie: squaresoft: only if the remote_file resource actually downloads something new
[2014-06-25 18:36:31 -0400] froolie: I think I may be back to guards again...was just looking at that page
[2014-06-25 18:36:48 -0400] squaresurf: ah, then the bash resource should be action nothing.
[2014-06-25 18:36:55 -0400] froolie: oh, is it that simple?
[2014-06-25 18:37:03 -0400] jmreicha: squaresurf: sure - https://gist.github.com/jmreicha/2b88a4ef08a540aa23a6
[2014-06-25 18:37:11 -0400] squaresurf: yeah, action run will always run.
[2014-06-25 18:37:37 -0400] squaresurf: Although all actions can't be nothing unless you call one of them somewhere.
[2014-06-25 18:37:52 -0400] squaresurf: The first in the chain should probably not be nothing or have something call it.
[2014-06-25 18:39:37 -0400] eft: Hello everyone, I'm trying to write a template file that has the following : logfilepath="<%=node['test']['db']['logpath']%>/<%=['test']['db']['logfilename']%>" (i tried a lot of variation of this) and I get can't convert string to int because I guess of the /.
[2014-06-25 18:39:46 -0400] froolie: squaresoft: got it. Thanks! My http_request has a run action which then calls the others.
[2014-06-25 18:40:19 -0400] squaresurf: froolie: great :)
[2014-06-25 18:41:19 -0400] squaresurf: eft: <%=['test']['db']['logfilename']%> should be <%=node['test']['db']['logfilename']%>
[2014-06-25 18:41:54 -0400] eft: haaaaaaaaaaaaa
[2014-06-25 18:41:58 -0400] squaresurf: jmreicha: at the end it says the template has not changed, so it doesn't notify the service to restart.
[2014-06-25 18:42:25 -0400] eft: can't believe I didn't see that I reread it 150 time
[2014-06-25 18:42:28 -0400] eft: I'll test. thanks !
[2014-06-25 18:42:54 -0400] squaresurf: sure thing :)
[2014-06-25 18:45:48 -0400] eft: squaresurf: of course it works...thank you I could have wasted a couple more hour on this focusing on that / :)
[2014-06-25 18:46:08 -0400] jmreicha: squaresure: Ah, good catch
[2014-06-25 18:46:25 -0400] squaresurf: eft: Glad to hear you're on your way. I've lost days to mistakes like that :)
[2014-06-25 18:46:50 -0400] squaresurf: Thats why I like to have a vim callback on save to lint my source files.
[2014-06-25 18:46:59 -0400] squaresurf: It catches syntax errors quickly.
[2014-06-25 18:48:39 -0400] eft: squaresurf: would you mind explaining a little on this ?
[2014-06-25 18:49:06 -0400] squaresurf: What editor do you use?
[2014-06-25 18:49:43 -0400] eft: vim
[2014-06-25 18:50:54 -0400] squaresurf: https://github.com/squaresurf/vim-castle/blob/master/home/.vimrc#L183
[2014-06-25 18:51:08 -0400] philax: is there some fancy footwork one needs to do to install the knife-windows gem after installing the chefdk?  running a bootstrap with -VV indicates that knife simply doesn't recognize the gem in /opt/chef/embedded...  .bash_profile has the /opt/chef/embedded... etc path.
[2014-06-25 18:51:17 -0400] squaresurf: eft: Not sure if there is a good example of that for erb though.
[2014-06-25 18:51:33 -0400] squaresurf: eft: Whenever I save a ruby file it checks the syntax for me.
[2014-06-25 18:52:37 -0400] binamov: philax i believe w chefdk it's "chef gem install foo"
[2014-06-25 18:53:08 -0400] eft: I'll look into this thanks again
[2014-06-25 18:53:09 -0400] binamov: as opposed to "/opt/chef/embedded/bin/gem install foo" in pre-DK
[2014-06-25 18:56:38 -0400] philax: Thank you so much!!
[2014-06-25 19:01:00 -0400] btm: @chef Chef Office Hours (formerly Code Review): Join: https://plus.google.com/hangouts/_/hoaevent/AP36tYcu3o_6HZYkdxeWcj0GPB70inCOCgf9hGmJI_8LAYhn_NkGug watch: http://youtu.be/n3H0HU3JWaI
[2014-06-25 19:02:47 -0400] whiteadam: Office hours while I'm learning about DynamoDB noooo
[2014-06-25 19:06:12 -0400] jmreicha: squaresurf: How would I force a template to be evaluated every time, even if it doesn't get updated or change?
[2014-06-25 19:07:53 -0400] jmreicha: Hm, well I guess that doesn't necessarily make sense but I created the template before I needed to have it be restarted
[2014-06-25 19:21:35 -0400] coderanger: jmreicha: If using action :create (which is the default) it is evaluated every time already
[2014-06-25 19:22:44 -0400] jmreicha: @coderanger: well I don't have it defined, I'll give that a shot
[2014-06-25 19:23:42 -0400] matti: squaresurf: Is that you talking on the call?
[2014-06-25 19:25:51 -0400] squaresurf: matti: yeah :)
[2014-06-25 19:26:30 -0400] jmreicha: @coderanger:  Still getting this - template[/etc/logstash-forwarder] action create (up to date)
[2014-06-25 19:26:48 -0400] coderanger: jmreicha: Did the content of the rendered template change?
[2014-06-25 19:27:01 -0400] matti: squaresurf: I would stub if you only check for whether the correct result is yielded.
[2014-06-25 19:27:17 -0400] jmreicha: Since it isn't changing, I don't think it is hitting the restart?
[2014-06-25 19:27:34 -0400] jmreicha: @coderanger: not changing
[2014-06-25 19:27:36 -0400] matti: squaresurf: If you need to check if the logic holds water, then you might want to fake exception and test for whether it was handled.
[2014-06-25 19:28:18 -0400] coderanger: jmreicha: Yes, thats how notifications work
[2014-06-25 19:28:31 -0400] squaresurf: matti: it was suggested that I mock raise an exception.
[2014-06-25 19:28:39 -0400] coderanger: jmreicha: Notifications fire when the resource is "updated", though that means slightly different things in each resource
[2014-06-25 19:28:48 -0400] squaresurf: matti: is that what you mean?
[2014-06-25 19:28:49 -0400] matti: squaresurf: I would not rely on real DNS server to do anything. And you may get weird results i.e. DNS resolution can block (it's generally blocking unless client handless it in a non-blocking manner) for X causing weirdness.
[2014-06-25 19:28:51 -0400] coderanger: jmreicha: for templates, they fire when the content of the rendered file changes
[2014-06-25 19:28:59 -0400] matti: squaresurf: Yeah.
[2014-06-25 19:29:20 -0400] matti: s/X/X seconds/
[2014-06-25 19:29:27 -0400] jmreicha: got it, I will remember for next time
[2014-06-25 19:29:46 -0400] matti: squaresurf: But I am really on the call to see if btm will by accident type his root password ;p
[2014-06-25 19:29:49 -0400] matti: squaresurf: ;D
[2014-06-25 19:30:02 -0400] matti: squaresurf: Well, watching ;p
[2014-06-25 19:33:17 -0400] whiteadam: coderanger woke up early
[2014-06-25 19:34:38 -0400] jmreicha: @coderanger: Ah, I see now, I made a change and the restart took.  Thanks!
[2014-06-25 19:34:45 -0400] whiteadam: matti: What time is it where you are?
[2014-06-25 19:36:27 -0400] tier: can anybody recommend some good material on writing your own LWRPs? I've read doug ireton's blog post from last year and that made things much clearer. Any other good ones I have yet to stumble across?
[2014-06-25 19:37:19 -0400] coderanger: tier: I do training and consulting on such things :-)
[2014-06-25 19:38:26 -0400] squaresurf: matti: should I write a test for both exceptions? Resolv::ResolvTimeout and Resolv::ResolvError?
[2014-06-25 19:38:38 -0400] tier: coderanger: i'm amazed you find the time for that
[2014-06-25 19:38:52 -0400] matti: whiteadam: 8:38pm
[2014-06-25 19:38:53 -0400] whiteadam: coderanger: Does it cost a living wage? :)
[2014-06-25 19:39:07 -0400] whiteadam: matti: Are you in the Canary Islands?
[2014-06-25 19:39:21 -0400] matti: whiteadam: I wish.
[2014-06-25 19:39:23 -0400] matti: whiteadam: London
[2014-06-25 19:39:26 -0400] whiteadam: psh, me too
[2014-06-25 19:39:31 -0400] matti: London?
[2014-06-25 19:39:34 -0400] coderanger: whiteadam: Given that I have no other income stream with which to not go broke, by definition yes?
[2014-06-25 19:39:36 -0400] matti: Or you wish?
[2014-06-25 19:39:38 -0400] whiteadam: nah, canary
[2014-06-25 19:39:41 -0400] matti: ahah
[2014-06-25 19:39:44 -0400] whiteadam: coderanger: lol
[2014-06-25 19:39:58 -0400] coderanger: tier: Sleep is overrates
[2014-06-25 19:39:59 -0400] matti: squaresurf: Depends. You can have one test that has two cases to assert on both.
[2014-06-25 19:40:12 -0400] matti: squaresurf: Or two separate tests with their distinct assertions.
[2014-06-25 19:40:16 -0400] whiteadam: matti: I thought London was +7 from me, but you're +6... time change I blame
[2014-06-25 19:40:19 -0400] tier: it must be, i feel like you answer every question on the chef mailing list at all hours haha
[2014-06-25 19:40:20 -0400] matti: squaresurf: Depends on the style/DRY a bit.
[2014-06-25 19:40:34 -0400] matti: whiteadam: We have BST now.
[2014-06-25 19:40:40 -0400] matti: whiteadam: BST == GMT + 1
[2014-06-25 19:40:48 -0400] matti: whiteadam: British Summer Time.
[2014-06-25 19:40:57 -0400] whiteadam: matti: ah, my old boss was in Worcester, so I had to keep up with that crap.
[2014-06-25 19:40:58 -0400] matti: Damn DST.
[2014-06-25 19:41:19 -0400] whiteadam: I wish everyone just used UTC and that was that.
[2014-06-25 19:41:23 -0400] matti: whiteadam: With time zone or the boss, or both? ;]
[2014-06-25 19:41:32 -0400] whiteadam: In fact, I wish everyone would just use UTC on servers.
[2014-06-25 19:41:35 -0400] squaresurf: matti: I see. Thanks.
[2014-06-25 19:41:43 -0400] tier: whiteadam: that's just crazy talk
[2014-06-25 19:41:46 -0400] whiteadam: matti: hah, my boss was in Worcester, I just used CDT.
[2014-06-25 19:41:48 -0400] matti: squaresurf: Look how other tests done by others look like, to peek on the style ;]
[2014-06-25 19:41:49 -0400] whiteadam: lol
[2014-06-25 19:42:22 -0400] tier: people can barely tell time as it is without a digital watch or cell phone... you expect them to add and subtract on the fly? lol
[2014-06-25 19:42:36 -0400] matti: tier: I have the IO binary watch.
[2014-06-25 19:42:52 -0400] whiteadam: Does anyone here use FreeIPA or RHEL IPA ?
[2014-06-25 19:42:56 -0400] whiteadam: matti: nerd
[2014-06-25 19:43:14 -0400] matti: whiteadam: Proud, since 1984 ;]
[2014-06-25 19:43:32 -0400] tier: i can't say that i know what that watch is
[2014-06-25 19:43:42 -0400] whiteadam: tier: http://www.01theone.com/
[2014-06-25 19:43:48 -0400] whiteadam: tier: it's a watch for nerds, like matti
[2014-06-25 19:44:32 -0400] whiteadam: speaking of nerds, this Apple iWatch better look cool.
[2014-06-25 19:46:20 -0400] whiteadam: I would totally buy it if it looked like this: http://media.idownloadblog.com/wp-content/uploads/2014/03/iWatch-concept-Gabor-Balogh-001.jpg
[2014-06-25 19:46:30 -0400] matti: whiteadam: Nerds are people too!
[2014-06-25 19:46:31 -0400] matti: ;D
[2014-06-25 19:46:36 -0400] whiteadam: haha
[2014-06-25 19:46:51 -0400] tier: i will say i like the 01 odin's rage
[2014-06-25 19:55:14 -0400] wiscas: anyone can point to me on where to read on strategies about chef implementation for aws?
[2014-06-25 19:56:57 -0400] coderanger: wiscas: In what respect?
[2014-06-25 19:57:19 -0400] wiscas: lets say i want to move my infrastructure to aws and I'm currently using puppet
[2014-06-25 19:57:29 -0400] wiscas: i want to know how to implement chef correctly on aws
[2014-06-25 19:57:46 -0400] wiscas: in order to get my cloud formation templates using it to deploy new servers
[2014-06-25 19:57:50 -0400] coderanger: wiscas: I mean the two are somewhat isolated
[2014-06-25 19:57:51 -0400] squaresurf: btm: gtmanfred never signed the CLA.
[2014-06-25 19:57:54 -0400] squaresurf: https://github.com/opscode/ohai/pull/345#discussion_r14206586
[2014-06-25 19:57:55 -0400] coderanger: Okay, so thats a bit more specific :)
[2014-06-25 19:58:18 -0400] wiscas: sorry being vague its been a long day eh :)
[2014-06-25 19:58:21 -0400] squaresurf: I'm not sure he will either since he doesn't use chef anymore.
[2014-06-25 19:58:38 -0400] matti: tier: OR is nice, indeed.
[2014-06-25 19:58:58 -0400] coderanger: wiscas: So cfn+chef is pretty easy, you need to make an AMI with your validation key embedded in it (packer makes this pretty easy) and then a little bootstrap script that reads the run list out of either EC2 userdata or cfn metadata.
[2014-06-25 19:59:26 -0400] wiscas: humm makes sense
[2014-06-25 19:59:38 -0400] wiscas: just wanted to read in depth about it, guess that maybe googling a little bit on it might help
[2014-06-25 19:59:47 -0400] bcave: ohai
[2014-06-25 19:59:51 -0400] whiteadam: ohai
[2014-06-25 19:59:53 -0400] coderanger: wiscas: https://github.com/coderanger/brix/blob/master/packer/balanced-client.json is an example of the packer template, and there are CFN templates in that repo too
[2014-06-25 19:59:57 -0400] mallu: hello, I'm using rpm_package to install a rpm.I'm getting Package "name_of_the_package" not found. my question is, where is rpm_package looking for rpm?
[2014-06-25 20:00:09 -0400] coderanger: wiscas: Also I offer training/consulting in this if you want more personalized help
[2014-06-25 20:00:43 -0400] whiteadam: mallu: Are you sure you shouldn't be using a yum package?
[2014-06-25 20:01:05 -0400] wiscas: that makes sense coderanger, at this point I'm using a vendor to manage my cloud infrastructure
[2014-06-25 20:01:21 -0400] wiscas: and the idea is to eliminate it to save money and use aws exclusively or other open source tools for it
[2014-06-25 20:01:25 -0400] mallu: whiteadam: well.. we want to pass --prefix with rpm...  package resource doesn't allow that
[2014-06-25 20:01:29 -0400] wiscas: as netflix aasgard also for example
[2014-06-25 20:01:37 -0400] whiteadam: mallu: So the RPM is on the disk>
[2014-06-25 20:01:44 -0400] les_a8: Hello...I have a potentially newb question:  Can you embed chef directives inside a bash provider block?
[2014-06-25 20:01:49 -0400] wiscas: these guys have helped us getting here, but we want to go the next level
[2014-06-25 20:02:05 -0400] coderanger: wiscas: Not a bad plan :)
[2014-06-25 20:02:08 -0400] mallu: is there anyway I can tell it to look for rpm at the repository?
[2014-06-25 20:02:14 -0400] coderanger: wiscas: But, as you might imagine, no small amount of work
[2014-06-25 20:02:28 -0400] wiscas: yes sir, we have a 1 year to complete this project when started
[2014-06-25 20:02:40 -0400] wiscas: i know we'll be able to push this, but want to do it the right way
[2014-06-25 20:02:51 -0400] taec: Looking for cookbook upload logs in chef 11.1
[2014-06-25 20:03:05 -0400] whiteadam: taec: System logs?
[2014-06-25 20:03:15 -0400] mallu: whiteadam: is there anyway I can have rpm_package look at our repository?
[2014-06-25 20:03:17 -0400] coderanger: wiscas: Well I'll just leave this here https://coderanger.net/consulting/ ;-)
[2014-06-25 20:03:48 -0400] taec: whiteadam: trying to figure out if there was a cookbook uploaded last Wed regarding a specific issue we saw. Looking to find some evidence of that somewhere in logs
[2014-06-25 20:04:03 -0400] whiteadam: mallu: You may want to use just "package" instead of rpm_package
[2014-06-25 20:04:37 -0400] whiteadam: mallu: http://docs.opscode.com/resource_package.html  but I may be wrong... as I often am :)
[2014-06-25 20:04:48 -0400] mallu: whiteadam: is it possible to pass --prefix with package? I couldn't find a way
[2014-06-25 20:04:50 -0400] wiscas: cool coderanger  thanks
[2014-06-25 20:04:58 -0400] whiteadam: taec: ohhhh, I'm not sure then
[2014-06-25 20:05:23 -0400] taec: ok, np, thanks
[2014-06-25 20:05:47 -0400] mallu: whiteadam: we want to install the rpm on a specific location
[2014-06-25 20:05:52 -0400] whiteadam: mallu: not sure
[2014-06-25 20:06:15 -0400] whiteadam: mallu: I'm sure ther is... but it's probably a manual-ish process
[2014-06-25 20:06:47 -0400] mallu: coderanger: any idea, how I can have a rpm install it on a specific location??
[2014-06-25 20:07:58 -0400] coderanger: taec: There should be a mtime in the database you can check directly, otherwise look at the nginx access logs
[2014-06-25 20:08:20 -0400] coderanger: mallu: Use the options attribute on a package resource?
[2014-06-25 20:09:01 -0400] mallu: it appears package resource is using yum which doesn't have --prefix option
[2014-06-25 20:09:56 -0400] coderanger: mallu: Then you would have to use rpm_package directly
[2014-06-25 20:10:32 -0400] mallu: coderanger: do you know where rpm-Package look for rpm? Can it doesnload from repository?
[2014-06-25 20:10:47 -0400] mallu: ** download
[2014-06-25 20:11:01 -0400] coderanger: mallu: You would have to give it the direct URL, rpm itself has no concept of repositories, thats a yum thing
[2014-06-25 20:11:16 -0400] coderanger: mallu: I would check if yum has a way to pass options to the underlying rpm install
[2014-06-25 20:12:10 -0400] mallu: coderanger: I looked it up but couldn't fid anything about resource location with yum
[2014-06-25 20:12:37 -0400] coderanger: mallu: Can you be more specific about what you are trying to do?
[2014-06-25 20:12:46 -0400] coderanger: mallu: rpms aren't generally built to be relocatable
[2014-06-25 20:14:08 -0400] mallu: coderanger: I have an rpm depends on the server location  I want to install on a specific location. I can install it via rpm -ivh --prefix <dir> <rpm_name>. I'm trying to do the same with chef
[2014-06-25 20:14:18 -0400] coderanger: mallu: Okay, so do that?
[2014-06-25 20:15:06 -0400] mallu: coderanger: I was hoping to avoid downloading the rpm manually and take advantage of package or rpm_package
[2014-06-25 20:16:35 -0400] taec: coderanger: never connected to the chef postgres database before ... any tips? It's not installed as a system one and I can't find a pg_hba.conf
[2014-06-25 20:17:13 -0400] coderanger: mallu: I mean rpm_package just calls RPM, there is no special magic, and as you said yum (and therefore yum_package) doesn't support this
[2014-06-25 20:17:25 -0400] coderanger: mallu: Chef can't magically make things easier, it just does what you tell it :P
[2014-06-25 20:17:42 -0400] mallu: ok :)
[2014-06-25 20:17:48 -0400] coderanger: taec: its in /opt/chef-server, connect as username opscode-postgres I think
[2014-06-25 20:19:12 -0400] taec: Got it, thanks. opscode-pgsql
[2014-06-25 20:19:23 -0400] coderanger: I was close :)
[2014-06-25 20:22:24 -0400] mikesplain: Is it possible to override the contents of a provider's action?
[2014-06-25 20:22:46 -0400] mikesplain: And if so, anyone have an example?
[2014-06-25 20:23:41 -0400] taec: coderanger: you were and you sorted me out, thanks a mil!
[2014-06-25 20:26:16 -0400] coderanger: mikesplain: You mean change what provider is being used?
[2014-06-25 20:28:41 -0400] mikesplain: coderanger: No, just change the contents of a provider's action, there's a typo that's been fixed in a PR on a cookbook that is slow to be merged, and I really don't want to have to fork and use the forked version in my wrapper cookbook
[2014-06-25 20:29:01 -0400] coderanger: mikesplain: Is it a real provider or an LWRP?
[2014-06-25 20:29:13 -0400] mikesplain: coderanger: I would much rather fix the issue with something like chef-rewind... but I don't think that can help me to change a provider
[2014-06-25 20:29:17 -0400] mikesplain: coderanger: LWRP
[2014-06-25 20:29:37 -0400] mikesplain: coderanger: oops yeah guess I should've specified that
[2014-06-25 20:30:31 -0400] coderanger: mikesplain: Okay, so there isn't a super simple way to do it, forking the upstream cookbook for a bit is an option, or you can monkey-patch in to the existing class but that has to be done at recipe time, which makes it a bit complex
[2014-06-25 20:32:31 -0400] icarus: does this look correct?:
[2014-06-25 20:32:33 -0400] icarus: if node.chef_environment == 'production' execute "cp parameters.yml" do user 'root' command paramPROD end
[2014-06-25 20:32:37 -0400] icarus: end
[2014-06-25 20:33:16 -0400] icarus: im basically trying to set an environmental conditional
[2014-06-25 20:33:24 -0400] icarus: inside a recipe
[2014-06-25 20:33:37 -0400] coderanger: icarus: Give or take some newlines, cure
[2014-06-25 20:33:39 -0400] coderanger: sure
[2014-06-25 20:34:45 -0400] icarus: yeah, it just pasted like that
[2014-06-25 20:34:56 -0400] icarus: the if statement has 2 end's
[2014-06-25 20:35:27 -0400] icarus: however, despite the fact that my environment is defined in Vagrantfile, other conditionals than environment developer are being run
[2014-06-25 20:36:25 -0400] bcave: icarus: you could also use not_if or only_if's in the execute
[2014-06-25 20:37:48 -0400] coderanger: icarus: Pastebin your recipe and vagrantfile please
[2014-06-25 20:37:49 -0400] viglesias: hey team is it possible to have multiple not_if/if_only conditions on a resource?
[2014-06-25 20:38:56 -0400] mikesplain: coderanger: got it, that's what I thought.  Thanks so much
[2014-06-25 20:39:21 -0400] coderanger: viglesias: Yes
[2014-06-25 20:39:32 -0400] coderanger: viglesias: Though it can get a little confusing so I wouldn't
[2014-06-25 20:40:46 -0400] viglesias: coderanger: ack is the confusion from having both not_ifs and if_onlys? im just trying to have 2 not_fis
[2014-06-25 20:41:29 -0400] coderanger: viglesias: What are the two conditions?
[2014-06-25 20:41:58 -0400] viglesias: two services being enabled
[2014-06-25 20:42:01 -0400] viglesias: sorry started
[2014-06-25 20:42:33 -0400] viglesias: so it would be:
[2014-06-25 20:42:33 -0400] viglesias: not_if "service eucalyptus-cc status" not_if "service eucanetd status"
[2014-06-25 20:42:44 -0400] viglesias: (on different lines obviously)
[2014-06-25 20:42:56 -0400] coderanger: viglesias: not_if 'service foo status && service bar status'
[2014-06-25 20:43:21 -0400] viglesias: that was my first idea but figured it would be more readable in seperate not_ifs
[2014-06-25 20:43:44 -0400] coderanger: viglesias: The issue is and vs. or being unclear, I think its an AND, but I would have to check the code to be sure
[2014-06-25 20:44:02 -0400] viglesias: ah i c what you mean
[2014-06-25 20:44:06 -0400] viglesias: yeah i assumed and
[2014-06-25 20:45:05 -0400] viglesias: and now that i think of it i actually want or
[2014-06-25 20:45:12 -0400] viglesias: coderanger: damn it is confusing :)
[2014-06-25 20:46:10 -0400] coderanger: :)
[2014-06-25 21:10:13 -0400] icarus: coderanger: it looks like its my understanding of ruby
[2014-06-25 21:10:25 -0400] icarus: i was trying to do a bracket statement
[2014-06-25 21:10:53 -0400] papasmile: Hi, I think I might have a chef problem and I don't know who to talk to :)
[2014-06-25 21:11:08 -0400] papasmile:  we have four roles with override_attributes for a single recipe... is that legit?
[2014-06-25 21:12:05 -0400] icarus: im trying to figure out have to chain multiple functions together given a specific conditional
[2014-06-25 21:12:42 -0400] coderanger: icarus: Please pastebin the recipe
[2014-06-25 21:12:53 -0400] coderanger: papasmile: Sure
[2014-06-25 21:13:09 -0400] coderanger: papasmile: attributes get merged together at the start of the run
[2014-06-25 21:13:55 -0400] papasmile: coderanger: ok that makes sense...
[2014-06-25 21:14:40 -0400] papasmile: coderanger: just I am not seeing my attributes in chef server ui (only one role's is showning) and also I am not seeing any output from my recipe
[2014-06-25 21:14:43 -0400] icarus: coderanger: but im ashamed of my poor coding abilities!
[2014-06-25 21:15:14 -0400] coderanger: papasmile: Are you sure you've uploaded the roles and that they are executing?
[2014-06-25 21:15:32 -0400] papasmile: roles are showing in my runlist, yes
[2014-06-25 21:15:40 -0400] papasmile: and no errors running chef-client
[2014-06-25 21:17:28 -0400] papasmile: but no results :-/
[2014-06-25 21:17:50 -0400] coderanger: papasmile: Can you pastebin the roles and the output from chef-client so I can have an idea of what you are expecting to see
[2014-06-25 21:19:12 -0400] coderanger: icarus: :P Without specific details all I can say "chef is just ruby" so do it like you would in ruby
[2014-06-25 21:19:29 -0400] papasmile: sure, it's pretty boring, though
[2014-06-25 21:19:32 -0400] prometheanfire: can you transfer ownership of a cookbook in supermarket
[2014-06-25 21:21:18 -0400] papasmile: coderanger: http://pastebin.com/Yk0VbeHm
[2014-06-25 21:21:46 -0400] icarus: coderanger: i was trying to do case --> when ---> do
[2014-06-25 21:21:53 -0400] coderanger: prometheanfire: supermarket isn't really supported by anyone on here, you should try the gitter room
[2014-06-25 21:22:33 -0400] coderanger: papasmile: And what are you expecting to see?
[2014-06-25 21:22:38 -0400] prometheanfire: coderanger: ya, just checking :D
[2014-06-25 21:22:50 -0400] jtimberman: prometheanfire: the maintainer/owner of a cookbook should be able to do that.
[2014-06-25 21:22:56 -0400] jtimberman: or admins can
[2014-06-25 21:23:08 -0400] jtimberman: are you running a local supermarket instance, or talking about the main site
[2014-06-25 21:23:13 -0400] papasmile: coderanger: well nothing really from chef-client... I'd like to see my recipe get run with my role's attributes....
[2014-06-25 21:23:38 -0400] coderanger: papasmile: There are no roles in that node's run list, so they aren't being run
[2014-06-25 21:24:00 -0400] prometheanfire: jtimberman: I am the maintainer/owner :P
[2014-06-25 21:24:04 -0400] prometheanfire: jtimberman: main site
[2014-06-25 21:24:04 -0400] coderanger: papasmile: INFO: Run List is [recipe[chef-server]]
[2014-06-25 21:24:44 -0400] papasmile: huh i must be missing something... specifying a node maybe?
[2014-06-25 21:24:57 -0400] coderanger: papasmile: I think you are perhaps unclear how roles work :)
[2014-06-25 21:25:09 -0400] papasmile: coderanger: i just ran chef-client with no args
[2014-06-25 21:25:21 -0400] papasmile: like I said i think I might have a chef problem :)
[2014-06-25 21:25:48 -0400] coderanger: papasmile: so to rewind from that, nodes have a run list, at the start of the run that gets recursively expanded meaning for each item in it, if that is a role replace it with the roles run list, continue until only recipes remain
[2014-06-25 21:25:53 -0400] coderanger: and then execute those recipes in order
[2014-06-25 21:26:18 -0400] coderanger: papasmile: any role that is loaded as part of that, its attributes are merged in to the node data
[2014-06-25 21:26:35 -0400] papasmile: ok
[2014-06-25 21:27:12 -0400] papasmile: so if they have the same override_attributes is that a problem?
[2014-06-25 21:27:13 -0400] coderanger: papasmile: I recommend going through the courses on learn.getchef.com as a way to start off with chef
[2014-06-25 21:27:23 -0400] coderanger: papasmile: I also don't recommend trying to run your own server until you are more familiar with chef
[2014-06-25 21:27:41 -0400] cwebber: prometheanfire: did you have a question about ownership transfer?
[2014-06-25 21:27:42 -0400] coderanger: papasmile: If you would like more detailed help, I offer training and consulting on Chef
[2014-06-25 21:28:13 -0400] prometheanfire: cwebber: yep, on the new supermarket site
[2014-06-25 21:28:30 -0400] papasmile: coderanger: i'm a long-time developer, working with chef for about a year so still a chef newbie.... I would like to know if I have a specific problem
[2014-06-25 21:28:36 -0400] prometheanfire: cwebber: I'm in gitter under the same nick if you prefer to talk there
[2014-06-25 21:29:07 -0400] papasmile: if multiple roles have the same override_attributes is that a problem?
[2014-06-25 21:30:52 -0400] coderanger: papasmile: No
[2014-06-25 21:31:02 -0400] coderanger: papasmile: roles are independent and have no relation to each other
[2014-06-25 21:31:26 -0400] coderanger: papasmile: But, as I said, you aren't using any roles so this is moot
[2014-06-25 21:32:08 -0400] papasmile: coderanger: I have like 14 roles but they don't apper on that output so.... maybe running chef-client wrong?
[2014-06-25 21:32:39 -0400] coderanger: papasmile: Again, as I said, please go through the chef tutorial if you would like to learn how to use chef roles, or I am happy to discuss my training services
[2014-06-25 21:33:02 -0400] coderanger: papasmile: You need to include them in your run list for them to do anything, otherwise they are just hanging out on the server
[2014-06-25 21:34:06 -0400] papasmile: coderanger: i really appreciate all your input, i still don't understand what is missing.... roles appear in my run_list in chef ui, but there are many many nodes... and chef-client ran very fast
[2014-06-25 21:34:20 -0400] papasmile: i figured i would see all run lists from all nodes get run
[2014-06-25 21:34:37 -0400] squaresurf: You need to assign the roles to the nodes.
[2014-06-25 21:34:42 -0400] coderanger: papasmile: Are you can see from the run list output on your node, there are no roles in its run list, perhaps you are looking at the wrong node in hte UI?
[2014-06-25 21:35:48 -0400] papasmile: i am running chef-client on my chef server, that might be a problem
[2014-06-25 21:36:04 -0400] coderanger: papasmile: Is there the node you are trying to converge?
[2014-06-25 21:36:45 -0400] papasmile: yes
[2014-06-25 21:37:06 -0400] coderanger: papasmile: Then thats fine, the server is nothing special as far as chef-client is concerned
[2014-06-25 21:37:45 -0400] papasmile: ah yea, I think that is my problem... I need to run chef-client on my node
[2014-06-25 21:37:59 -0400] papasmile: but I ran it on my chef server instead :-/
[2014-06-25 21:41:05 -0400] papasmile: yes ok I ran chef-client on my node and that is much more interesting
[2014-06-25 21:42:00 -0400] papasmile: coderanger: that was my problem, running chef-client on my chef server instead of my node :)
[2014-06-25 21:42:14 -0400] papasmile: Thanks so very much
[2014-06-25 21:48:59 -0400] mfeingold: Hey guys do any of you have jenkins set up with aws?
[2014-06-25 21:55:21 -0400] bcave: mfeingold: we have a ci set up with aws. something jenkins specific?
[2014-06-25 22:03:14 -0400] mfeingold: bcave: Yes I'm trying to set up jenkins on aws and I have a recipe that basically says include_recipe 'jenkins::master'
[2014-06-25 22:03:37 -0400] mfeingold: include_recipe 'java'
[2014-06-25 22:03:38 -0400] mfeingold: include_recipe 'jenkins::master'
[2014-06-25 22:04:27 -0400] mfeingold: in default.rb and then I am saying depends "jenkins" in the meta data
[2014-06-25 22:04:53 -0400] mfeingold: but for some reason when I spin up the instance it says recipe not found master
[2014-06-25 22:05:25 -0400] mfeingold: I just want to reference the community cook book and have it run the typical tests like it does on kitchen test
[2014-06-25 22:05:33 -0400] mfeingold: But it's not running
[2014-06-25 22:05:43 -0400] mfeingold: Well it starts but fails on the recipe
[2014-06-25 22:06:29 -0400] bcave: chef-client or solo?
[2014-06-25 22:16:46 -0400] heph: in an lwrp, can I have one action call another? for example, a :purge action that calls a :disable action but then does further cleanup?
[2014-06-25 22:19:02 -0400] coderanger: heph: ::waves::
[2014-06-25 22:19:14 -0400] coderanger: heph: Yes, use its real method name, action_disable
[2014-06-25 22:19:14 -0400] heph: ohai! =)
[2014-06-25 22:20:17 -0400] heph: neat =)
[2014-06-25 22:20:43 -0400] coderanger: heph: the "action :foo" thing is a super-lightweight wrapper for "def action_foo"
[2014-06-25 22:20:51 -0400] coderanger: Other than that they are just normal methods
[2014-06-25 22:20:51 -0400] heph: ah.ahhhhhhhh
[2014-06-25 22:25:53 -0400] tmpname: I have setup a new VPC with a pubic NAT gateway. When I bootstrap the node, I pass the --ssh-gateway flag. Is it possible to use an identify file with this flag?
[2014-06-25 22:27:28 -0400] coderanger: tmpname: Unfortunately no :-(
[2014-06-25 22:27:39 -0400] coderanger: tmpname: It should work if you set it up in your .ssh/config though
[2014-06-25 22:27:49 -0400] coderanger: tmpname: There is a ticket about it
[2014-06-25 22:28:05 -0400] tmpname: That is what I thought :(
[2014-06-25 22:28:09 -0400] bcave: 4538 i think
[2014-06-25 22:29:31 -0400] tmpname: coderanger do you happen to have the to the ticket?
[2014-06-25 22:29:51 -0400] scarolan: greetings friends.  Any test kitchen users know if you can apply an IAM role to an ec2 instance when spinning it up with test kitchen?
[2014-06-25 22:29:57 -0400] scarolan:  example
[2014-06-25 22:30:03 -0400] scarolan:   iam_profile_name: chef-client
[2014-06-25 22:30:08 -0400] mfeingold: It works on chef-solo but not on chef client on the instance
[2014-06-25 22:30:16 -0400] mfeingold: It won't even let me ssh into the instance
[2014-06-25 22:30:18 -0400] coderanger: tmpname: Not on hand
[2014-06-25 22:31:13 -0400] davidgiesberg: Question about the chef-validator pem: Is it possible to bootstrap a new node without have that pem on the box running knife? (can it be retrieved from the chef server and pushed to the new server being bootstrapped ?)
[2014-06-25 22:32:04 -0400] coderanger: davidgiesberg: It is not stored on the chef-server, so no
[2014-06-25 22:32:16 -0400] coderanger: davidgiesberg: You can just use a different bootstrap system though, thats just one option
[2014-06-25 22:33:47 -0400] davidgiesberg: fair enough, thanks - I just wanted to be sure I wasn't missing something here
[2014-06-25 22:45:00 -0400] mfeingold: misha
[2014-06-25 22:45:12 -0400] mfeingold: Haha
[2014-06-25 22:45:18 -0400] mfeingold: I was trying to control find
[2014-06-25 22:46:23 -0400] mfeingold: bcave: Do you reference the community cookbook with chef code?
[2014-06-25 22:46:31 -0400] coderanger:  is the best beast companion summon?
[2014-06-25 22:46:46 -0400] mfeingold: I mean
[2014-06-25 22:46:52 -0400] mfeingold: with jenkins
[2014-06-25 22:47:12 -0400] mfeingold: Do you reference jenkins in your metadata.rb
[2014-06-25 22:49:48 -0400] duallain: Is there an irc channel for chef-metal?
[2014-06-25 22:50:54 -0400] coderanger: duallain: Not specifically, you can ask here, but jkeiser is AFK for Velocity so the ML might be a better bet
[2014-06-25 22:51:45 -0400] anthonyacquanita: never used deploy before, I didn't expect a new release directory every chef-client run for the same revision
[2014-06-25 22:51:58 -0400] anthonyacquanita: anyway to tame that?
[2014-06-25 22:52:18 -0400] duallain: coderanger: ML ?
[2014-06-25 22:52:52 -0400] coderanger: mailing list
[2014-06-25 22:53:06 -0400] duallain: ahh, thank you
[2014-06-25 22:53:06 -0400] coderanger: anthonyacquanita: Don't use deploy, it is just not a good idea
[2014-06-25 22:54:31 -0400] anthonyacquanita: coderanger: any links to some other methods/practices ?
[2014-06-25 22:55:14 -0400] coderanger: anthonyacquanita: Just use a git resource instead
[2014-06-25 22:55:50 -0400] anthonyacquanita: that's easy enough ;-)  thanks
[2014-06-25 23:04:56 -0400] manny: hi, I'm running chef solo and trying to troubleshoot an attribute value. How can I print the what the attribute value from a recipe? Chef::Log::info("node[attribute]")?
[2014-06-25 23:06:44 -0400] manny: anyone?
[2014-06-25 23:14:44 -0400] coderanger: manny: Remove the quotes
[2014-06-25 23:14:56 -0400] coderanger: And a log resource is perhaps easier
[2014-06-25 23:15:02 -0400] coderanger: log node['foo']['bar']
[2014-06-25 23:16:42 -0400] manny: coderanger: let me try that
[2014-06-25 23:18:07 -0400] bougyman: I like prying for debug.
[2014-06-25 23:22:11 -0400] coderanger: bougyman: pry and chef can often not interact super well due to the forking system, depends on how your terminal is configured
[2014-06-25 23:27:37 -0400] bougyman: coderanger: pry always works great for me.
[2014-06-25 23:28:10 -0400] bougyman: I always used to hate debugging recipes, with pry it's so much easier to break into the code at those problem areas.
[2014-06-25 23:37:24 -0400] gyoza: When computers do things computers do: http://i.imgur.com/J9xC95S.jpg
[2014-06-25 23:37:45 -0400] gyoza: best
[2014-06-25 23:40:37 -0400] mfeingold: Hi how do you use knife ssh
[2014-06-25 23:40:57 -0400] mfeingold: I have a rolw
[2014-06-25 23:41:01 -0400] mfeingold: role ign-jenkins
[2014-06-25 23:41:11 -0400] gyoza: I have a role as well
[2014-06-25 23:41:16 -0400] gyoza: :)
[2014-06-25 23:41:24 -0400] mfeingold: so I type knife ssh 'role:ign-jenkins" "sudo chef client"
[2014-06-25 23:41:26 -0400] gyoza: what are we talking about!
[2014-06-25 23:41:39 -0400] mfeingold: I have a cookbook that it references
[2014-06-25 23:41:46 -0400] gyoza: references the role?
[2014-06-25 23:42:28 -0400] mfeingold: No
[2014-06-25 23:42:48 -0400] mfeingold: Sorry so I have a role and in the runlist it has "recipe[ign-jenkins]"
[2014-06-25 23:42:55 -0400] gyoza: yes
[2014-06-25 23:42:56 -0400] gyoza: ok
[2014-06-25 23:42:59 -0400] gyoza: now we're talking
[2014-06-25 23:43:03 -0400] mfeingold: which is my cookbook that I am using to test
[2014-06-25 23:43:06 -0400] gyoza: yes
[2014-06-25 23:43:08 -0400] gyoza: ok
[2014-06-25 23:43:11 -0400] gyoza: i am with you
[2014-06-25 23:43:13 -0400] mfeingold: I made an aws instance
[2014-06-25 23:43:16 -0400] mfeingold: with knife
[2014-06-25 23:43:19 -0400] gyoza: ok
[2014-06-25 23:43:25 -0400] mfeingold: Support is asking me to use knife ssh
[2014-06-25 23:43:30 -0400] gyoza: why
[2014-06-25 23:43:40 -0400] gyoza: just ssh into it manually?
[2014-06-25 23:43:41 -0400] mfeingold: Because I cannot ssh normally into it
[2014-06-25 23:43:44 -0400] gyoza: what is your GOAL
[2014-06-25 23:43:50 -0400] gyoza: how about that
[2014-06-25 23:43:52 -0400] gyoza: lets work backwards
[2014-06-25 23:43:54 -0400] mfeingold: Well I'm having dependency hell
[2014-06-25 23:44:07 -0400] mfeingold: We have a cookbook named jenkins in our chef server
[2014-06-25 23:44:14 -0400] gyoza: oh wait
[2014-06-25 23:44:19 -0400] gyoza: are you the guy with the two jenkins cookbooks?
[2014-06-25 23:44:20 -0400] gyoza: :P
[2014-06-25 23:44:21 -0400] mfeingold: And every time I try and call cookbook jenkins
[2014-06-25 23:44:22 -0400] mfeingold: Yeah
[2014-06-25 23:44:26 -0400] gyoza: ok
[2014-06-25 23:44:33 -0400] mfeingold: Well
[2014-06-25 23:44:43 -0400] gyoza: So when you call the cookbook jenkins what doesnt happen?
[2014-06-25 23:44:45 -0400] mfeingold: The problem is I want the cookbook from opscode
[2014-06-25 23:44:56 -0400] gyoza: oh
[2014-06-25 23:45:06 -0400] mfeingold: but I have proved that it is actually pulling it from our chef server jenkins
[2014-06-25 23:45:09 -0400] gyoza: Yea remember somebody told you yesterday to change the metadata
[2014-06-25 23:45:14 -0400] mfeingold: I did
[2014-06-25 23:45:31 -0400] mfeingold: It didn't work
[2014-06-25 23:45:31 -0400] gyoza: ok, so its pulling from the chef server which is good
[2014-06-25 23:45:37 -0400] gyoza: what is failing then?
[2014-06-25 23:45:38 -0400] mfeingold: I tried making an environment for it too
[2014-06-25 23:45:48 -0400] mfeingold: Something is over writing me
[2014-06-25 23:45:57 -0400] mfeingold: overriding
[2014-06-25 23:46:03 -0400] mfeingold: No
[2014-06-25 23:46:15 -0400] mfeingold: I don't want the chef server jenkins
[2014-06-25 23:46:16 -0400] gyoza: lol you type just like me:P
[2014-06-25 23:46:19 -0400] mfeingold: The one we set up
[2014-06-25 23:46:25 -0400] mfeingold: Hahaha
[2014-06-25 23:46:29 -0400] mfeingold: ;)
[2014-06-25 23:46:35 -0400] gyoza: So you want the jenkins cookbook NOT from chef server?
[2014-06-25 23:46:37 -0400] gyoza: ok
[2014-06-25 23:46:40 -0400] gyoza: hmmm
[2014-06-25 23:46:42 -0400] mfeingold: I want it from the community
[2014-06-25 23:46:49 -0400] gyoza: well you know
[2014-06-25 23:46:53 -0400] mfeingold: Because we have set up a chef server right
[2014-06-25 23:46:59 -0400] gyoza: you could just rename the jenkins community cookbook to like
[2014-06-25 23:47:02 -0400] mfeingold: And in that chef server they uploaded a jenkins cookbook
[2014-06-25 23:47:02 -0400] gyoza: jenkinsc
[2014-06-25 23:47:04 -0400] gyoza: or cjenkins
[2014-06-25 23:47:09 -0400] gyoza: just download it
[2014-06-25 23:47:11 -0400] gyoza: and change all the names
[2014-06-25 23:47:16 -0400] mfeingold: Yeah but we want to reference it and not just copy it in
[2014-06-25 23:47:22 -0400] mfeingold: It would be easy to just do that I guess
[2014-06-25 23:47:26 -0400] gyoza: yea dude
[2014-06-25 23:47:27 -0400] mfeingold: But the thing is
[2014-06-25 23:47:29 -0400] gyoza: its like 5 lines
[2014-06-25 23:47:31 -0400] mfeingold: We want it to be current
[2014-06-25 23:47:35 -0400] gyoza: yea thats a problem
[2014-06-25 23:47:41 -0400] gyoza: you'd have to pull it down everyday
[2014-06-25 23:47:44 -0400] mfeingold: Yeah
[2014-06-25 23:47:46 -0400] gyoza: automatically or check for changes
[2014-06-25 23:47:49 -0400] gyoza: and run a script on it
[2014-06-25 23:47:51 -0400] mfeingold: For now it's ok to test
[2014-06-25 23:47:59 -0400] gyoza: i mean sed is your best friend
[2014-06-25 23:48:00 -0400] gyoza: :P
[2014-06-25 23:48:01 -0400] mfeingold: Yeah I could do that
[2014-06-25 23:48:09 -0400] gyoza: its ghetto
[2014-06-25 23:48:09 -0400] mfeingold: hahaha
[2014-06-25 23:48:15 -0400] mfeingold: Yeah pretty ghetto
[2014-06-25 23:48:16 -0400] gyoza: but you gotta do with what you got right?
[2014-06-25 23:48:19 -0400] gyoza: you cant change the name?
[2014-06-25 23:48:21 -0400] mfeingold: Hahaha whelp
[2014-06-25 23:48:31 -0400] mfeingold: I don't like it but it does work
[2014-06-25 23:49:05 -0400] mfeingold: They are using it on like 20 nodes
[2014-06-25 23:49:09 -0400] cheeseplus: mfeingold: are you using berkshelf at all?
[2014-06-25 23:49:14 -0400] mfeingold: If I shut it down people are gonna be mad
[2014-06-25 23:49:17 -0400] mfeingold: Yeah I am
[2014-06-25 23:49:19 -0400] gyoza: i see
[2014-06-25 23:49:20 -0400] mfeingold: You know what
[2014-06-25 23:49:37 -0400] mfeingold: cheeseplus: It's funny because I went to a chef aws seminar
[2014-06-25 23:49:56 -0400] mfeingold: And a lot of people are saying theres dependency problems with berkshelf 3.0
[2014-06-25 23:50:06 -0400] gyoza: ehh
[2014-06-25 23:50:08 -0400] mfeingold: And if you don't install chef with the dk
[2014-06-25 23:50:16 -0400] gyoza: not true
[2014-06-25 23:50:17 -0400] mfeingold: then it could be a problem
[2014-06-25 23:50:27 -0400] cheeseplus: lots of people say lots of things that may or may not be true
[2014-06-25 23:50:40 -0400] mfeingold: Well actually it was the spokes person from chef so
[2014-06-25 23:50:45 -0400] cheeseplus: to be fair dependency mgmt is hard and 3.0 was built to get around 2.0 problems
[2014-06-25 23:50:59 -0400] cheeseplus: and 3.0 is better but it's still software
[2014-06-25 23:51:03 -0400] gyoza: yes
[2014-06-25 23:51:10 -0400] cheeseplus: I have no issues with 3.1.2
[2014-06-25 23:51:11 -0400] gyoza: http://misheska.com/blog/2013/12/26/set-up-a-sane-ruby-cookbook-authoring-environment-for-chef/
[2014-06-25 23:51:14 -0400] mfeingold: It's not about berkshelf 3.0 being there it's about how you install kitchen
[2014-06-25 23:51:18 -0400] gyoza: ^^^ that will get you a solid chef dev environment
[2014-06-25 23:51:22 -0400] gyoza: 100% guaranteed
[2014-06-25 23:51:27 -0400] gyoza: with berkshelf
[2014-06-25 23:51:36 -0400] cheeseplus: mfeingold: you can do it either with chef-dk or the old fashioned way - I've run stacks on both without issue
[2014-06-25 23:51:41 -0400] gyoza: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-06-25 23:51:56 -0400] gyoza: I've found that chefdk doesn't seem to work out so well for me
[2014-06-25 23:52:09 -0400] gyoza: i dunno what it is
[2014-06-25 23:52:15 -0400] gyoza: but i cant ever get it running right
[2014-06-25 23:52:16 -0400] mfeingold: Actually i have done this exactly to my mac
[2014-06-25 23:52:24 -0400] gyoza: mfeingold: yea im using a mac too
[2014-06-25 23:52:33 -0400] gyoza: chefdk breaks ^^
[2014-06-25 23:52:37 -0400] mfeingold: Hmm
[2014-06-25 23:52:39 -0400] mfeingold: Well
[2014-06-25 23:52:42 -0400] mfeingold: Thats a bummer
[2014-06-25 23:52:44 -0400] mfeingold: hahahahahahahahahah
[2014-06-25 23:52:50 -0400] gyoza: You might get lucky
[2014-06-25 23:52:54 -0400] gyoza: I couldnt get it to work right
[2014-06-25 23:53:01 -0400] gyoza: tired of messing around so i just gem'd it
[2014-06-25 23:53:12 -0400] mfeingold: Yeah I use bundler and berkshelf
[2014-06-25 23:53:22 -0400] gyoza: its funny they are like "run this and it works"
[2014-06-25 23:53:24 -0400] gyoza: nope...
[2014-06-25 23:53:28 -0400] gyoza: it doesnt...r eally..
[2014-06-25 23:53:29 -0400] cheeseplus: gyoza: either it's a bug or there is something on your system causing grief - I'd submit a bug if you really thing there is something wrong
[2014-06-25 23:53:29 -0400] mfeingold: Yeah
[2014-06-25 23:53:37 -0400] gyoza: cheeseplus: i didnt have time to track it down
[2014-06-25 23:53:43 -0400] mfeingold: I'm thinking about just putting in the dependencies by hand
[2014-06-25 23:53:48 -0400] gyoza: i had already spent a week getting it going
[2014-06-25 23:53:53 -0400] cheeseplus: well then I'd be careful of proclaiming it's brokenness ;)
[2014-06-25 23:54:03 -0400] gyoza: well following the instructions on the website dont work
[2014-06-25 23:54:05 -0400] cheeseplus: I mean get your work done of course
[2014-06-25 23:54:08 -0400] gyoza: :P
[2014-06-25 23:54:10 -0400] cheeseplus: gyoza: which ones?
[2014-06-25 23:54:15 -0400] gyoza: "click the dmg"
[2014-06-25 23:54:16 -0400] gyoza: install it
[2014-06-25 23:54:17 -0400] gyoza: done
[2014-06-25 23:54:18 -0400] cheeseplus: the fun thing is that those can be fixed
[2014-06-25 23:54:19 -0400] gyoza: loool
[2014-06-25 23:54:22 -0400] gyoza: i know
[2014-06-25 23:54:29 -0400] gyoza: I got a new macbook pro here
[2014-06-25 23:54:33 -0400] gyoza: maybe ill try it on there
[2014-06-25 23:54:53 -0400] gyoza: but the reason why i just gave up on chefdk is because I had already spent a week trying to get ports off my system
[2014-06-25 23:54:57 -0400] gyoza: LOL
[2014-06-25 23:55:01 -0400] gyoza: so i just formatted my shit
[2014-06-25 23:55:21 -0400] mfeingold: Hahahah
[2014-06-25 23:55:24 -0400] cheeseplus: gyoza: yea that sounds like env issues
[2014-06-25 23:55:43 -0400] gyoza: cheeseplus: im on "install 2" of mavericks and everything went smoothly
[2014-06-25 23:55:51 -0400] gyoza: macports really screws stuff up bad
[2014-06-25 23:55:53 -0400] cheeseplus: most of the folks I've seen having problems with dk had a bunch of other hacky stuff to get ruby env's sane
[2014-06-25 23:56:04 -0400] cheeseplus: gyoza: yea I've not touched since 10.3
[2014-06-25 23:56:06 -0400] mfeingold: That's my biggest complaint about chef. I honestly don't know how to uninstall everything cleanly right now
[2014-06-25 23:56:09 -0400] cheeseplus: homebrew all the way
[2014-06-25 23:56:10 -0400] mfeingold: With the set up I have
[2014-06-25 23:56:21 -0400] gyoza: cheeseplus: is there a recommended "DO NOT HAVE THIS INSTALLED" before you install chefdk?
[2014-06-25 23:56:32 -0400] cheeseplus: gyoza: it'd be a crazy list
[2014-06-25 23:56:35 -0400] gyoza: LOL
[2014-06-25 23:56:38 -0400] gyoza: bummer:(
[2014-06-25 23:56:40 -0400] cheeseplus: well honestly
[2014-06-25 23:56:46 -0400] cheeseplus: make sure your PATH is sane etc etc
[2014-06-25 23:56:58 -0400] cheeseplus: chef-dk is meant for someone to get a nice one stop install
[2014-06-25 23:57:04 -0400] mfeingold: Yeah
[2014-06-25 23:57:10 -0400] mfeingold: That's what I would have prefered
[2014-06-25 23:57:12 -0400] cheeseplus: but if you've already polluted the system with a bunch of other stuff it's going to be hard
[2014-06-25 23:57:18 -0400] gyoza: cheeseplus: i see
[2014-06-25 23:57:20 -0400] mfeingold: Yeah I have
[2014-06-25 23:57:22 -0400] cheeseplus: both are manageable solutions
[2014-06-25 23:57:52 -0400] mfeingold: So have you guys used knife ssh?
[2014-06-25 23:57:56 -0400] cheeseplus: I've been converting to using dk myself but I still maintain old installs where everything is just bundler
[2014-06-25 23:58:03 -0400] gyoza: i see
[2014-06-25 23:58:16 -0400] cheeseplus: mfeingold: what exactly are you having trouble with?
[2014-06-25 23:58:18 -0400] gyoza: mfeingold: knife just uses ssh afaik
[2014-06-25 23:58:47 -0400] cheeseplus: the secret to working with ruby is to tightly manage the env for each project in my experience
[2014-06-25 23:58:54 -0400] cheeseplus: dependencies will have you shaving yaks for years
[2014-06-25 23:59:48 -0400] mfeingold: Yeah I don't know why they asked me to do that
[2014-06-25 23:59:59 -0400] mfeingold: It honestly isn't a nice knife comman

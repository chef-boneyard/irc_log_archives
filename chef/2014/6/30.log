[2014-06-30 02:32:54 -0400] p3rsist: Hi guys. Just started with ruby+chef. Why this code gives me a syntax error? http://pastebin.com/SfDRWukE
[2014-06-30 03:10:15 -0400] jslusher: where would be the best place to get support in trying to use knife solo to configure a Windows 2008 node?
[2014-06-30 05:01:04 -0400] chefgirl: Hi I need a recipe to install LAMP in a go!!
[2014-06-30 05:01:13 -0400] chefgirl: can anyone give me a pointer
[2014-06-30 05:18:03 -0400] chefgirl: can anyone help m einstalling LAMP on a linux box centos?
[2014-06-30 06:05:40 -0400] chefgirl: I am using https://github.com/someara/mysql cookbook to install mysql on centos
[2014-06-30 06:05:46 -0400] chefgirl: I am getting this error :
[2014-06-30 06:05:47 -0400] chefgirl: ERROR: Cookbook mysql-master depends on cookbooks which are not currently ERROR: being uploaded and cannot be found on the server. ERROR: The missing cookbook(s) are: 'yum-mysql-community' version '>= 0.0.0'
[2014-06-30 06:05:56 -0400] chefgirl: how to resolve this
[2014-06-30 06:06:05 -0400] n1ko: upload yum-mysql-communityy cookbook :)
[2014-06-30 06:06:16 -0400] digitalchild: do you have required cookbooks?
[2014-06-30 06:06:45 -0400] chefgirl: which cookbook?
[2014-06-30 06:07:05 -0400] chefgirl: yum-mysql-community this i  dont have
[2014-06-30 06:07:05 -0400] digitalchild: chefgirl: check the metadata.rb
[2014-06-30 06:07:06 -0400] n1ko: "the missing cookbooks are 'yum-mysql-community'"
[2014-06-30 06:07:09 -0400] digitalchild: shoudl have 'depends'
[2014-06-30 06:07:17 -0400] chefgirl: let me check
[2014-06-30 06:07:18 -0400] digitalchild: oh, didn't see the error :)
[2014-06-30 06:07:24 -0400] digitalchild: what niko said
[2014-06-30 06:07:26 -0400] n1ko: dont know how that could be any more clear :)
[2014-06-30 06:07:33 -0400] digitalchild: knife cookbook site download?
[2014-06-30 06:08:06 -0400] chefgirl: yeah the metadata.rb has depends 'yum-mysql-community'
[2014-06-30 06:08:24 -0400] chefgirl: how to get thie cookbook and where to put this cookbook ?
[2014-06-30 06:08:36 -0400] chefgirl: In the Cookbooks directory ?
[2014-06-30 06:08:45 -0400] n1ko: i would suggest learning about berkshelf
[2014-06-30 06:08:52 -0400] n1ko: http://berkshelf.com/
[2014-06-30 06:08:55 -0400] digitalchild: put it in cookbooks
[2014-06-30 06:08:59 -0400] digitalchild: or learn berkshelf
[2014-06-30 06:09:06 -0400] digitalchild: if you're just starting, id suggest learning the berkshelf way
[2014-06-30 06:09:16 -0400] digitalchild: i spent 3 weeks doing it the way you were before i thought, ugh too hard
[2014-06-30 06:09:18 -0400] chefgirl: what is the berkshelf ?
[2014-06-30 06:09:20 -0400] digitalchild: berks so much easier
[2014-06-30 06:09:25 -0400] digitalchild: BEERRRKK SHEELLFFF
[2014-06-30 06:09:51 -0400] jyoti_bhanot: but what is this
[2014-06-30 06:09:52 -0400] n1ko: berkshelf is nice, but the dependency problems can be a real pita, especially previously with v2 :)
[2014-06-30 06:10:05 -0400] n1ko: jyoti_bhanot: chefgirl open the link i just pasted
[2014-06-30 06:10:13 -0400] chefgirl: what is this and why is this needed
[2014-06-30 06:10:22 -0400] digitalchild: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-06-30 06:10:48 -0400] digitalchild: chefgirl: it provides a nice easy way to write your cookbooks more like apps instead of a bunch of separate cookbooks
[2014-06-30 06:11:08 -0400] digitalchild: and berks will pull down all the dependencies for you
[2014-06-30 06:11:23 -0400] digitalchild: and you can test them locally before sending them to your chef server or the actual nodes
[2014-06-30 06:13:37 -0400] chefgirl: okay is berk automatically installed ?
[2014-06-30 06:13:54 -0400] chefgirl: or i need to install ?
[2014-06-30 06:15:13 -0400] digitalchild: follow the tutorial i linked
[2014-06-30 06:15:19 -0400] digitalchild: it will save you a few headaches later on
[2014-06-30 06:15:49 -0400] digitalchild: i came from the old way of homebrewing my own shell scripts and perl, python scripts
[2014-06-30 06:16:04 -0400] digitalchild: so i took the approach of converting each context into cookbooks, what i should have done
[2014-06-30 06:16:14 -0400] digitalchild: from the begging was the berks way which is step up a level
[2014-06-30 06:16:31 -0400] digitalchild: and say this is a 'base-centos' cookbook that has everything i need for all my machines, kind of like what my roles were doing
[2014-06-30 06:16:34 -0400] chefgirl: digitalchild : ok i am redaing it and will let you know if I encounter any doubt ;)
[2014-06-30 06:16:53 -0400] digitalchild: then i have a web-app cookbook for our webapp machines
[2014-06-30 06:18:17 -0400] chefgirl: digitalchild: I have just starting exploring chef
[2014-06-30 06:18:24 -0400] chefgirl: so dont have so much idea
[2014-06-30 06:21:05 -0400] digitalchild: chefgirl: then you are where i was 2 months ago :)
[2014-06-30 06:21:46 -0400] chefgirl: digitalchild: if u dont mind can we chat privately ?
[2014-06-30 06:22:15 -0400] digitalchild: im not sure if i can help but i'll try
[2014-06-30 06:22:23 -0400] digitalchild: so shoot
[2014-06-30 06:55:31 -0400] chefgirl: Chef users!!! Is it a bad practice to use Ruby that comes shipped with Chef ?
[2014-06-30 06:56:28 -0400] chefgirl: can anybody answer my query
[2014-06-30 07:45:30 -0400] orweinberger: I would like to set a node attribute from my recipe to be shown when I use the chef server webui, next to "cpu", "filesystem", "kernel" etc..
[2014-06-30 07:45:34 -0400] orweinberger: How can I do that?
[2014-06-30 08:31:10 -0400] bugoff:  /3
[2014-06-30 09:13:14 -0400] ghghz: hey, how could I use varaibles between recipies?
[2014-06-30 09:13:15 -0400] ghghz: like
[2014-06-30 09:13:22 -0400] ghghz: var1 = "kazkas"
[2014-06-30 09:13:30 -0400] ghghz: include_recipe "init::test2"
[2014-06-30 09:13:41 -0400] ghghz: and how to use var1 in test2 recipe?
[2014-06-30 09:19:24 -0400] jonlives: ghghz: node attributes
[2014-06-30 09:19:35 -0400] jonlives: or databags, at a pinch
[2014-06-30 09:20:12 -0400] ghghz: okey, next question how to run search on attributes/default.rb ?
[2014-06-30 09:20:13 -0400] ghghz: because
[2014-06-30 09:20:25 -0400] ghghz: x = search(:node, 'name:*') doesn't work
[2014-06-30 09:23:18 -0400] ghghz: for instance
[2014-06-30 09:23:19 -0400] ghghz: default["srv_size"] = search(:node, "name:*.main-hosting.eu").length
[2014-06-30 09:24:57 -0400] ghghz: ERROR: Undefined node attribute or method `search' on `node'
[2014-06-30 09:26:03 -0400] jonlives: ghghz: are you using chef-solo?
[2014-06-30 09:26:27 -0400] ghghz: nop, chef opensource
[2014-06-30 09:27:04 -0400] jonlives: ghghz: you can only use those search queries in a recipe, you can't have the search performed directly in an attributes file
[2014-06-30 09:27:11 -0400] jonlives: you'd need to have the recipe set the attribute
[2014-06-30 09:27:42 -0400] ghghz: jonlives: okey, fine, but how to pass variable srv_size to another recipe ?
[2014-06-30 09:28:14 -0400] jonlives: ghghz: you'd have a recipe set a node attribute called node.default[srv_size] which you'd then access in the other recipe
[2014-06-30 09:28:15 -0400] Kim^J: Don't, let that recipe find it the same the first did?
[2014-06-30 09:29:05 -0400] ghghz: jonlives: understood, will check :)
[2014-06-30 09:43:39 -0400] ghghz: jonlives: thanks
[2014-06-30 09:53:55 -0400] jonlives: ghghz: no worries!
[2014-06-30 10:13:37 -0400] ChrissKO: Hi.. the mysql-master cookbooks needs "yum-mysql-community" so you need to upload that one first.
[2014-06-30 10:14:22 -0400] ChrissKO: Why should you need a other ruby than the one which comes from the chef client anyway?
[2014-06-30 10:15:22 -0400] ChrissKO: *ups* soory.. wrong window. :(
[2014-06-30 12:11:19 -0400] chefgirl: Is it better to install berkshelf to handle dependencies or should i manually handle it ???
[2014-06-30 12:11:51 -0400] stormerider: berks++
[2014-06-30 12:12:14 -0400] chefgirl: but I am not able to install it
[2014-06-30 12:13:13 -0400] chefgirl: any help !!!!!!!!!!!!!!
[2014-06-30 12:32:15 -0400] __julien: Hello, I would like to know if it's possible using the deploy_revision provider to have a constraint on the revision number  ( we use semver tagging in our git repo , and I'd like to be able to use  the pessimistic operator to use the latest patch revision of a minor release)
[2014-06-30 12:34:13 -0400] jonlives: chefgirl: you're not able to install berkshelf?
[2014-06-30 12:34:29 -0400] chefgirl: @jonlives :
[2014-06-30 12:34:48 -0400] chefgirl: actually i would like to know how to handle dependencies in chef
[2014-06-30 12:35:07 -0400] chefgirl: i uploded a cookbook but got an error
[2014-06-30 12:35:21 -0400] chefgirl: as there  was some dependency on another cookbook
[2014-06-30 12:35:23 -0400] jonlives: chefgirl: berkshelf is generally what most people are using these days
[2014-06-30 12:35:35 -0400] chefgirl: But I am not able to install it
[2014-06-30 12:35:43 -0400] jonlives: chefgirl: what happens when you try to install it?
[2014-06-30 12:36:19 -0400] chefgirl: I installed it using gem install berkshelf --no-ri --no-rdoc command and it was installed
[2014-06-30 12:36:28 -0400] chefgirl: but berks -v doesnot work
[2014-06-30 12:36:51 -0400] jonlives: chefgirl: I'd recommend installing http://www.getchef.com/downloads/chef-dk - it has berkshelf bundled
[2014-06-30 12:36:58 -0400] jonlives: saves having to worry about installing gems etc
[2014-06-30 12:37:14 -0400] chefgirl: but i have set up the environment
[2014-06-30 12:37:33 -0400] chefgirl: but i want to install it separately then how to do that
[2014-06-30 12:37:46 -0400] chefgirl: I am executing the command at ~ home
[2014-06-30 12:38:25 -0400] chefgirl: there would be a way
[2014-06-30 12:39:24 -0400] chefgirl: jonlives : any suggestions ???
[2014-06-30 12:39:53 -0400] jonlives: chefgirl: do you see it under gem list?
[2014-06-30 12:40:03 -0400] chefgirl: where to find
[2014-06-30 12:40:12 -0400] jonlives: chefgirl: just run the command "gem list"
[2014-06-30 12:40:16 -0400] chefgirl: I even tried /opt/chef/embedded/bin/gem install berkshelf --no-ri --no-rdoc
[2014-06-30 12:40:20 -0400] jonlives: it should print out a list of installed gems
[2014-06-30 12:40:38 -0400] jonlives: chefgirl: I suspect the problem is that the directory where the "berks" binary was installed isn't under your PATH
[2014-06-30 12:40:41 -0400] chefgirl: No its not there
[2014-06-30 12:41:30 -0400] jonlives: chefgirl: honestly, I'd suggest using chef-dk if you're not that familiar with Gems etc - it's a single installer that has everything in it and you know it'll be correctly configured
[2014-06-30 12:41:32 -0400] chefgirl: berkshelf-api-client (1.2.0)
[2014-06-30 12:41:54 -0400] chefgirl: in opt/chef/embedded/
[2014-06-30 12:41:56 -0400] chefgirl: berkshelf-api-client (1.2.0)
[2014-06-30 12:42:03 -0400] chefgirl: i have to leave
[2014-06-30 12:42:06 -0400] chefgirl: now
[2014-06-30 12:42:29 -0400] jonlives: chefgirl: ok - try out chef-dk when you get a chance :)
[2014-06-30 12:45:09 -0400] DT-Nnik: Good afternoon
[2014-06-30 12:48:11 -0400] DT-Nnik: We as a big international Telco Provider use right now a small chef-server configuration for a few application-VM. The next Task, that we have, is to move our chef-server from one environment to another. The IP adresses and the MAC-adresses will change. How do we integrate our existing VMs to the "new" chef-server? Authentication etc. Will the keys still work?
[2014-06-30 12:48:55 -0400] jonlives: DT-Nnik: are you rebuilding the chef server from scratch?
[2014-06-30 12:49:36 -0400] DT-Nnik: Our idea was to take a snapshot of the existing chef and switch it to antoher vCenter
[2014-06-30 12:49:39 -0400] DT-Nnik: another
[2014-06-30 12:50:09 -0400] jonlives: DT-Nnik: essentially if the postgres DB on the server etc stays the same, you won't need to reregister the nodes.
[2014-06-30 12:51:05 -0400] jonlives: DT-Nnik: you might wanna checkout the backup and restore features of https://github.com/fnichol/knife-server too
[2014-06-30 12:52:01 -0400] DT-Nnik: alright, I take a look at your link.
[2014-06-30 12:53:01 -0400] Shubby: as far as I know, nodes only need SSL keys to authenticate to the server, and if the nodes are using the server's FQDN to connect to it (rather than an IP address which will change like you mentioned), as soon as you update your DNS record to point the FQDN to the correct new IP, the change should be seamless for your nodes
[2014-06-30 12:54:25 -0400] DT-Nnik: the hostname will also change :/
[2014-06-30 12:54:41 -0400] DT-Nnik: so how do our app-VM get to know the new FQDN?
[2014-06-30 12:54:53 -0400] DT-Nnik: WE have around 20 VMs right now
[2014-06-30 12:54:56 -0400] Shubby: can't you make the current FQDN a CNAME to the new FQDN?
[2014-06-30 12:56:09 -0400] Shubby: anyway, the server URL is stored in /etc/chef/client.rb normally
[2014-06-30 12:58:09 -0400] jonlives: Shubby: the issue occurs if the server data isn't the same though - if it is, it's fine.
[2014-06-30 12:58:25 -0400] jonlives: otherwise all the nodes try to auth with their existing client.pem which doesn't have a counterpart on the new server
[2014-06-30 12:58:38 -0400] __julien: I'm wonderinng how to have application deployment revision constraint ? We're tagging our application commits using semver increasing patchlevel every commit , and I'd like to do a pessimistic ( like ~> 1.2.3 ) version constraint (I tried to do it using deploy_revision but can't find how) in  order to deploy the latest patch version of a minor version. Is there an easy way to achieve that with chef ?
[2014-06-30 12:59:34 -0400] Shubby: jonlives: agreed, but if they clone the VM from one environment to another, that shouldn't be an issue
[2014-06-30 12:59:35 -0400] jonlives: __julien: version constraints like that can be done in your environment
[2014-06-30 12:59:40 -0400] jonlives: Shubby: exactly, right
[2014-06-30 13:00:10 -0400] __julien: jonlives,  ? I'm note talking about cookbook version constraint, but application code
[2014-06-30 13:00:10 -0400] DT-Nnik: ok, thanks for your help. So do you think, that the move will work, if we take a snapshot, put it on a new environment, maybe write a cookbook, that changes the client.pem on all VMs?
[2014-06-30 13:00:50 -0400] jonlives: DT-Nnik: I think so, yeah
[2014-06-30 13:01:06 -0400] jonlives: __julien: how are you deploying your app?
[2014-06-30 13:01:08 -0400] Shubby: DT-Nnik: it should -- my recommendation would be to clone the VM but leave the "old" one in place, then just manually edit the client.rb on one node and see if it registers on the new server
[2014-06-30 13:01:24 -0400] Shubby: if yes, proceed, if not, dig deeper
[2014-06-30 13:01:28 -0400] DT-Nnik: thats exactly the way we want to do it
[2014-06-30 13:01:50 -0400] whiteadam: exit
[2014-06-30 13:01:53 -0400] whiteadam: stupid /
[2014-06-30 13:01:56 -0400] jonlives: whiteadam: DENIED
[2014-06-30 13:01:58 -0400] DT-Nnik: and if it doesn't work, I will come back to you
[2014-06-30 13:01:59 -0400] DT-Nnik: :D
[2014-06-30 13:02:01 -0400] jonlives: haha
[2014-06-30 13:03:12 -0400] __julien: jonlives, using timestamped_deploy but wanna switch to deploy_revision with a pessimistic constraint ~> on the revision number
[2014-06-30 13:03:45 -0400] whiteadam: there we go. Tried to get SSL to work with irssi, but nooooo
[2014-06-30 13:04:09 -0400] jonlives: __julien: according to the docs at http://docs.opscode.com/resource_deploy.html it doesn't support a constraint like that out of the box
[2014-06-30 13:07:16 -0400] __julien: jonlives,  yes I guess I'd have to code somthing using github API to do what I want
[2014-06-30 13:07:41 -0400] jonlives: __julien: right - a custom provider for the deploy resource or something
[2014-06-30 13:08:00 -0400] __julien: jonlives, thx
[2014-06-30 13:08:23 -0400] jonlives: np!
[2014-06-30 13:27:13 -0400] mekhai: hi, im trying quit the execution of my recepie incase a variable is not set in the json i load. i tried something like raise "error" if node[:env][:value]== "" and cant get this to work. any ideas of what i could do instead ?. im running chef-solo
[2014-06-30 13:31:53 -0400] jonlives: mekhai: try raise "error" unless node[:env][:value]
[2014-06-30 13:32:06 -0400] jonlives: i think it's probably set to nil, not ""
[2014-06-30 13:33:47 -0400] mekhai: jonlives: thanks. seems to worked.
[2014-06-30 13:33:53 -0400] jonlives: np!
[2014-06-30 13:37:02 -0400] whiteadam: jonlives so smart
[2014-06-30 13:37:10 -0400] jonlives: heh
[2014-06-30 13:37:39 -0400] whiteadam: hah, that's how I learn everything.
[2014-06-30 13:37:58 -0400] jonlives: indeed!
[2014-06-30 14:29:22 -0400] |rt|: has anyone else run into a problem with issuing ohai reloads when the plugin attribute is specified with 11.12.8?
[2014-06-30 14:49:06 -0400] eberg: I'm running into an SSL validation issue, and though I've found several suggestions on how to fix it, most of them make vague reference to "your config file"from where I'm sitting chef is pretty much ALL config files.  WTF is "the config file" for chef considered to be.  For example, it's suggested to add "ssl_verify_mode :verify_peer"  Any ideas?
[2014-06-30 14:49:38 -0400] whiteadam: try: knife ssl check
[2014-06-30 14:50:59 -0400] whiteadam: eberg: and by config file, they probably mean /etc/chef/client.rb on the nodes.
[2014-06-30 14:51:37 -0400] eberg: whateadam: Thanks.  Let me give that a try.
[2014-06-30 14:52:17 -0400] whiteadam: eberg: Are you getting that error just when you run "knife blah blah" on your workstation?
[2014-06-30 14:53:41 -0400] binamov: eberg i'm pretty sure you can add that setting to this hash https://github.com/opscode-cookbooks/chef-client/blob/master/attributes/default.rb#L28 to get it into client.rb
[2014-06-30 14:58:32 -0400] mattupstate: anyone ever have an issue with CPU usage when chef runs `java -version` ?
[2014-06-30 15:49:46 -0400] newbie259: Jon Keiser was in an online show about chef-metal a couple months ago with some other big wigs. its on youtube somewhere. does anyone know what this was called or have a link?
[2014-06-30 15:50:21 -0400] mikesplain: newbie259: http://foodfightshow.org/2014/06/chef-metal.html
[2014-06-30 15:50:32 -0400] newbie259: awesome. thanks Mike
[2014-06-30 15:50:36 -0400] mikesplain: np
[2014-06-30 16:23:24 -0400] sla3k: Hi there people, I am starting out with chef and was reading the online "http://learn.getchef.com/get-started/" getting started guide.
[2014-06-30 16:24:09 -0400] whiteadam: go on
[2014-06-30 16:24:12 -0400] sla3k: I am interested in installing chef on a CentOS based server locally for testing purposes.
[2014-06-30 16:24:21 -0400] sla3k: Damn, I will be right back.
[2014-06-30 16:24:24 -0400] whiteadam: sla3k: Chef Server or...
[2014-06-30 16:28:54 -0400] sla3k: Okay, so sorry for that, whiteadam: yes, the chef server, I will be setting it up primarily for CentOS server at start. I have downloaded and installed the .rpm package that I have downloaded from: http://www.getchef.com/chef/install/ (I am not sure it's the server or the workstation).
[2014-06-30 16:29:22 -0400] sla3k: I currently have 4 machines at hand, one chef server, two nodes and 1 workstation, if I am not wrong.
[2014-06-30 16:29:25 -0400] whiteadam: well, if you installed the server, then you installed the server
[2014-06-30 16:29:56 -0400] sla3k: whiteadam: aha, I missed that 'tab' saying chef server and chef client.
[2014-06-30 16:30:15 -0400] sla3k: Unfortunately, I installed the chef client, nonetheless, that is also needed.
[2014-06-30 16:51:14 -0400] miketheman: remote_ffile resource looks to download the same file again and again, not respecting the etags
[2014-06-30 16:52:25 -0400] workmad3: miketheman: I think remote_file only pays attention to an explicit checksum you provide
[2014-06-30 16:53:21 -0400] jonlives: workmad3: nah the new version is meant to respect etags or if-modified-since
[2014-06-30 16:53:26 -0400] workmad3: jonlives: ah, ok
[2014-06-30 16:53:28 -0400] jonlives: not used etags with it yet though
[2014-06-30 16:53:35 -0400] miketheman: jonlives: yeah, "meant to"
[2014-06-30 16:53:50 -0400] workmad3: jonlives: how does it track etags between chef runs? :)
[2014-06-30 16:54:04 -0400] workmad3: (I can see it could use if-modified-since based on file date)
[2014-06-30 16:54:11 -0400] jonlives: workmad3: not looked into it to be honest
[2014-06-30 16:54:20 -0400] jonlives: not needed to use etags thusfar
[2014-06-30 16:54:32 -0400] miketheman: jonlives: then what do you use for remote files? checksums?
[2014-06-30 16:55:06 -0400] jonlives: we either use if-modified-since, or we've got some bespoke stuff for atomic deploys of large files where we don't wanna download the entire file to get the checksum
[2014-06-30 16:55:47 -0400] miketheman: ha.
[2014-06-30 16:56:18 -0400] workmad3: hmm... looking at the codebase, it stores the etag, mtime and checksum in a json file in the chef cache
[2014-06-30 16:56:23 -0400] jonlives: aha
[2014-06-30 16:56:26 -0400] jonlives: that'd do it
[2014-06-30 17:01:57 -0400] miketheman: workmad3: did you see where it calls the etag?
[2014-06-30 17:02:03 -0400] miketheman: (or can link me to it?)
[2014-06-30 17:03:18 -0400] workmad3: miketheman: https://github.com/opscode/chef/tree/master/lib/chef/provider/remote_file
[2014-06-30 17:03:31 -0400] miketheman: workmad3: thanks
[2014-06-30 17:28:56 -0400] drag00n: Anyone know why #learnchef was changed to invite only?
[2014-06-30 17:30:03 -0400] whiteadam: drag00n: Probably by mistake or through the nefarious deeds of others
[2014-06-30 17:30:24 -0400] drag00n: strange
[2014-06-30 17:30:48 -0400] whiteadam: Probably Obamacare
[2014-06-30 17:30:50 -0400] whiteadam: :)
[2014-06-30 18:02:10 -0400] ckuttruff: hey all, would anyone happen to know why a chef execute command would work in my shell, but not through a chef-solo run?  I'm using 11.12.4, and it's mystifying... this usermod command executes fine and changes the group in the terminal, but not during a chef run
[2014-06-30 18:02:11 -0400] ckuttruff: http://pastebin.com/m7hfLxpg
[2014-06-30 18:02:32 -0400] ckuttruff: that contains more info... ran things in debug mode and chef reports that it executed "successfully"
[2014-06-30 18:08:03 -0400] j^2: ckuttruff: there's a group resourec that does that for you
[2014-06-30 18:08:21 -0400] j^2: http://docs.opscode.com/resource_group.html
[2014-06-30 18:08:22 -0400] ckuttruff: j^2: yes, I used that and that also didn't work
[2014-06-30 18:08:40 -0400] j^2: interesting, do you have a run with that failing?
[2014-06-30 18:08:53 -0400] j^2: i'd like to see if it was successful like that execute block
[2014-06-30 18:09:09 -0400] ckuttruff: j^2: this is what I had before: http://pastebin.com/wtMTdB9W
[2014-06-30 18:09:28 -0400] j^2: yeah that should work....
[2014-06-30 18:09:32 -0400] ckuttruff: it was successful.. I can run the debug mode with that... one moment, I'll post the output
[2014-06-30 18:09:36 -0400] j^2: thanks
[2014-06-30 18:09:49 -0400] ckuttruff: thank you.  appreciate the response; this has been frustrating
[2014-06-30 18:10:09 -0400] j^2: :D i know the feeling i was there myself...hell still there myself :P
[2014-06-30 18:12:43 -0400] jtimberman: drag00n: tl;dr the channel is deprecated, and this one should be used.
[2014-06-30 18:12:57 -0400] drag00n: ah ok thank jtimberman
[2014-06-30 18:13:15 -0400] ckuttruff: j^2: http://pastebin.com/nXD3spHb
[2014-06-30 18:13:21 -0400] jtimberman: reduces the number of places new users could get pointed at, or for Chef employees to keep open and active.
[2014-06-30 18:13:23 -0400] ckuttruff: looks like it doesn't really do anything
[2014-06-30 18:13:56 -0400] j^2: ckuttruff: it should have said "up to date" if it hadn't done anything
[2014-06-30 18:14:20 -0400] ckuttruff: okay, but it still didn't modify the group, and didn't print any type of error or anything
[2014-06-30 18:14:39 -0400] j^2: hang on, modify, try...
[2014-06-30 18:15:05 -0400] j^2: manage
[2014-06-30 18:17:33 -0400] ckuttruff: j^2: it says it adds it, but again, group is still empty: http://pastebin.com/t7Tf3p13
[2014-06-30 18:17:50 -0400] j^2: well you're getting somewhere closer ;)
[2014-06-30 18:18:00 -0400] j^2: oohh
[2014-06-30 18:18:11 -0400] j^2: run it twice, (no joke), once then again, then grep
[2014-06-30 18:18:20 -0400] j^2: i had this problem with the users cookbook
[2014-06-30 18:20:02 -0400] ckuttruff: :/  still no dice
[2014-06-30 18:20:06 -0400] j^2: :-/
[2014-06-30 18:20:36 -0400] j^2: you're getting the solo run to output that it's trynig though
[2014-06-30 18:20:43 -0400] ckuttruff: the thing that's truly weird... why would the execute command for the actual usermod command fail?  even if the resource was broken, it seems that if that command works in shell, it should work via "execute"
[2014-06-30 18:20:45 -0400] j^2: on the first run does it say it tries to add it?
[2014-06-30 18:20:53 -0400] j^2: then does it do the "up to date?"
[2014-06-30 18:21:06 -0400] ckuttruff: yeah, it printed the same output message
[2014-06-30 18:21:16 -0400] j^2: so it's not writing out the file...
[2014-06-30 18:21:22 -0400] ckuttruff: nope
[2014-06-30 18:21:23 -0400] j^2: you are running as root right?
[2014-06-30 18:21:25 -0400] ckuttruff: yes
[2014-06-30 18:21:28 -0400] j^2: :-/
[2014-06-30 18:21:36 -0400] j^2: is this a vagrant box?
[2014-06-30 18:22:00 -0400] ckuttruff: no, one of our staging boxes.  lol, this isn't like me dabbling with chef; we've been using it in production for quite some time
[2014-06-30 18:22:16 -0400] j^2: sure, i'm just asking because i'd blow the vagrant box away and try again
[2014-06-30 18:22:18 -0400] ckuttruff: and I haven't run into anything like this before... "execute" should f*@king execute, right :P
[2014-06-30 18:22:33 -0400] j^2: something must be funky on that box, what version of chef are you running?
[2014-06-30 18:22:36 -0400] ckuttruff: yeah, it's a box in digital ocean
[2014-06-30 18:22:44 -0400] ckuttruff: well, I run it on mult. staging machines
[2014-06-30 18:22:47 -0400] ckuttruff: with the same result
[2014-06-30 18:22:58 -0400] j^2: 11.12.2 ubnutu?
[2014-06-30 18:23:21 -0400] ckuttruff: ubuntu 12.04 / chef 11.12.4
[2014-06-30 18:23:27 -0400] j^2: hmm
[2014-06-30 18:24:22 -0400] j^2: i'm at a loss here, i'd have to play around with it to try to repro it :( sorry i wish i could be more help
[2014-06-30 18:25:20 -0400] ckuttruff: j^2: np; really appreciate the feedback / help
[2014-06-30 18:25:26 -0400] ckuttruff: * switches to ansible
[2014-06-30 18:25:28 -0400] ckuttruff: :trolface:
[2014-06-30 18:25:36 -0400] j^2: if we cross paths again, i'd love to figure out how you fixed it
[2014-06-30 18:26:16 -0400] ckuttruff: yeah, will pop back in if I do... maybe I'll file a bug report?
[2014-06-30 18:26:30 -0400] j^2: never hurts
[2014-06-30 18:27:00 -0400] bmurt: ugh. time to wait another 1.25hrs to build a chef box vs vagrant
[2014-06-30 18:27:07 -0400] bmurt: no f'n idea why it takes this long
[2014-06-30 18:27:22 -0400] j^2: bmurt: compiling something via source?
[2014-06-30 18:27:26 -0400] bmurt: partly
[2014-06-30 18:27:30 -0400] bmurt: i'm inheriting this
[2014-06-30 18:27:49 -0400] j^2: build an image with some of taht already compiled
[2014-06-30 18:27:52 -0400] bmurt: main goal is to get the devs using newer vagrant and eventually phase out the chef server all together and use chef solo
[2014-06-30 18:27:56 -0400] bmurt: yeah, true
[2014-06-30 18:28:01 -0400] j^2: use chef to change the configs around
[2014-06-30 18:28:07 -0400] a13x212: knife automatically encrypts data bags, if knife[:secret_file] set?
[2014-06-30 18:28:54 -0400] bmurt: j^2 part of their reliance is that they've incorporated search
[2014-06-30 18:29:05 -0400] j^2: ahh
[2014-06-30 18:29:06 -0400] bmurt: so i can't just switch the other 8 or 9 boxes to chef_solo
[2014-06-30 18:29:37 -0400] bmurt: its lovely
[2014-06-30 18:29:46 -0400] sla3k: Hi again people, could anyone please have a look at: http://sprunge.us/ZBJR and let me know where do I need to change that?>
[2014-06-30 18:30:25 -0400] j^2: sla3k: is that a "fresh" server install?
[2014-06-30 18:30:32 -0400] sla3k: j^2: Yes.
[2014-06-30 18:30:44 -0400] bmurt: is there a Gemfile?
[2014-06-30 18:30:47 -0400] j^2: you have a Gemfile someplace
[2014-06-30 18:30:51 -0400] sla3k: It's actually a CentOS vz templates if that makes any difference.
[2014-06-30 18:31:16 -0400] sla3k: j^2: umm, not sure.
[2014-06-30 18:31:47 -0400] j^2: that's an error from parsing a Gemfile, iirc the opensource chef server does all that stuff in the background and you shouldn't have to touch any of it
[2014-06-30 18:31:49 -0400] bmurt: or Gemfile.lock
[2014-06-30 18:31:54 -0400] j^2: bmurt: touche'
[2014-06-30 18:33:36 -0400] sla3k: just did a 'find' for gemfile and it seems there are alot of them :/
[2014-06-30 18:34:08 -0400] j^2: i'd uninstall the pkg, and reinstall it and do the reconfigure if you can
[2014-06-30 18:34:25 -0400] j^2: something is broken....oh! how big is the box you are trying to use for your server?
[2014-06-30 18:34:47 -0400] j^2: i got REALLY weird errors when i was trying to use a machine smaller than 4 gigs
[2014-06-30 18:35:16 -0400] double_p: back then http://www.youtube.com/watch?v=eoS9Md_1uKg :)
[2014-06-30 18:35:42 -0400] bmurt: anyone have a good guide for getting started with chef-solo-search?
[2014-06-30 18:35:44 -0400] sla3k: 4 gigs of RAM or 4 gigs of HDD ?
[2014-06-30 18:35:50 -0400] j^2: RAM
[2014-06-30 18:35:54 -0400] sla3k: ouchh!
[2014-06-30 18:36:06 -0400] sla3k: this one have only 768
[2014-06-30 18:36:11 -0400] sla3k: MB
[2014-06-30 18:36:13 -0400] j^2: yeah
[2014-06-30 18:36:22 -0400] j^2: you're not gonna have a good time
[2014-06-30 18:36:45 -0400] sla3k: Let me reinstall this instance with 2 GB and see if that works.
[2014-06-30 18:36:49 -0400] j^2: nope
[2014-06-30 18:36:52 -0400] j^2: 4 trust me
[2014-06-30 18:36:57 -0400] sla3k: :(
[2014-06-30 18:37:03 -0400] j^2: i tried with 2 originally
[2014-06-30 18:37:07 -0400] j^2: got crazy odd errors
[2014-06-30 18:37:10 -0400] double_p: sla3k: http://www.youtube.com/watch?v=mVqnoqZAoHA
[2014-06-30 18:37:31 -0400] workmad3: j^2: is that for chef-server?
[2014-06-30 18:37:57 -0400] sla3k: hmm. need to get on another server then. double_p: thanks, I will have a look now :)(
[2014-06-30 18:38:00 -0400] j^2: workmad3: opensourec chef server for me yeah, i'm looking for the doc
[2014-06-30 18:38:28 -0400] workmad3: j^2: ah... I cheated and added swap memory on my 1gb VPS :)
[2014-06-30 18:38:36 -0400] j^2: heh
[2014-06-30 18:39:07 -0400] double_p: http://www.youtube.com/watch?v=PeXjCpANmXc
[2014-06-30 18:39:09 -0400] double_p:  :)
[2014-06-30 18:39:31 -0400] workmad3: although I've only got 2gb total and don't get errors...
[2014-06-30 18:39:42 -0400] workmad3: I got errors when I had < 1gb for initial setup though
[2014-06-30 18:39:54 -0400] j^2: sla3k: https://tickets.opscode.com/browse/CHEF-3973
[2014-06-30 18:40:07 -0400] j^2: http://docs.opscode.com/chef_system_requirements.html
[2014-06-30 18:47:45 -0400] coderanger: bmurt: It has been largely superseded by chef-client local mode
[2014-06-30 18:48:17 -0400] bmurt: i know but in chef 10.4.x kinda stuck
[2014-06-30 18:48:36 -0400] bmurt: plus i don't believe vagrant is supporting local mode yet
[2014-06-30 18:49:07 -0400] coderanger: ckuttruff: Make sure there isn't another resource further down resetting it
[2014-06-30 18:49:24 -0400] j^2: coderanger: heh, good call :D
[2014-06-30 18:50:00 -0400] jtimberman: http://www.getchef.com/blog/2014/06/24/from-solo-to-zero-migrating-to-chef-client-local-mode/
[2014-06-30 18:50:10 -0400] coderanger: bmurt: indeed, though if you are still on chef that old you should be aware there are several known security issues that are pretty serious
[2014-06-30 18:50:39 -0400] double_p: i WANT http://www.youtube.com/watch?v=l-O5IHVhWj0
[2014-06-30 18:50:42 -0400] jtimberman: for vagrant, maybe this plugin https://github.com/andrewgross/vagrant-chef-zero
[2014-06-30 18:50:58 -0400] coderanger: jtimberman: Won't work with chef 10 ...
[2014-06-30 18:50:59 -0400] bmurt: i don't want to add to the mayhem right now. i do agree a newer version is in order, im just trying to get the devs up to vagrant 1.6.1 with a cleaner Vagrantfile then build out
[2014-06-30 18:51:35 -0400] bmurt: i'm trying to retire the chef server as a whole, but without introducing a new task of telling them we need to upgrade at $newjob its not on the list right this second
[2014-06-30 18:52:07 -0400] jtimberman: chef 10.4?
[2014-06-30 18:52:36 -0400] bmurt: ya
[2014-06-30 18:52:45 -0400] jtimberman: Chef 0.10.4 was released August 11, 2011.
[2014-06-30 18:52:55 -0400] jtimberman: that's almost 3 years ago...
[2014-06-30 18:52:56 -0400] bmurt: let me confirm
[2014-06-30 18:53:23 -0400] double_p: http://www.youtube.com/watch?v=9jK-NcRmVcw
[2014-06-30 18:53:48 -0400] coderanger: double_p: Please keep the noise down when questions are in flight
[2014-06-30 18:54:06 -0400] double_p: damnit
[2014-06-30 18:54:50 -0400] double_p: cr: sorry http://www.youtube.com/watch?v=OMOGaugKpzs
[2014-06-30 18:55:03 -0400] bmurt: from what i can see, jtimberman: 10.14.4
[2014-06-30 18:55:15 -0400] bmurt: so that's a bit different than 10.4
[2014-06-30 18:55:17 -0400] bmurt: :)
[2014-06-30 18:55:20 -0400] bmurt: my bad
[2014-06-30 18:55:29 -0400] jtimberman: so that's a bit better
[2014-06-30 18:55:43 -0400] coderanger: bmurt: Slightly less terrifying :)
[2014-06-30 18:55:46 -0400] jtimberman: September 27, 2012
[2014-06-30 18:55:47 -0400] bmurt: lol
[2014-06-30 18:55:51 -0400] jtimberman: was the release.
[2014-06-30 18:56:26 -0400] double_p: http://www.youtube.com/watch?v=TR3Vdo5etCQ
[2014-06-30 18:56:27 -0400] bmurt: yeah, and im not prepared to just go to v11 yet. ideally, yes, but #1 im still learning chef myself (i came from puppet) plus learning the companies logic around this, etc.
[2014-06-30 18:56:35 -0400] bmurt: trying to slow roll things
[2014-06-30 18:56:44 -0400] jtimberman: trial by fire!
[2014-06-30 18:56:46 -0400] double_p:  http://www.youtube.com/watch?v=TR3Vdo5etCQ
[2014-06-30 18:56:47 -0400] coderanger: double_p: Final notice, please stop
[2014-06-30 18:56:52 -0400] bmurt: lol jtimberman
[2014-06-30 18:57:02 -0400] bmurt: only been here 1.5months, i'd like to make it to 2
[2014-06-30 18:57:07 -0400] j^2: heh, that's how i learned, "trail by fire"
[2014-06-30 18:57:12 -0400] j^2: opps
[2014-06-30 18:57:13 -0400] jtimberman: (i'm kidding of course)
[2014-06-30 18:57:16 -0400] j^2: well yeah it was a trail too
[2014-06-30 18:57:24 -0400] double_p: coderanger: sorry.. stopping.
[2014-06-30 18:57:30 -0400] bmurt: i mean, i could trial it on my laptop, etc. and just use chef :latest but in due time
[2014-06-30 18:57:43 -0400] bmurt: focus is vagrant clean-up and bringing that current
[2014-06-30 18:58:12 -0400] bmurt: im running into some issues with validation.pem when using chef_client, but then if i switch to chef_solo i run into the search issues
[2014-06-30 18:58:20 -0400] bmurt: that vagrant-chef-zero might be helpful
[2014-06-30 18:58:21 -0400] coderanger: bmurt: Other than that, chef-solo-search doesn't really have much in the way of stuff to it, you just make sure it gets loaded either via run list or dependency and make sure there is a nodes/ folder
[2014-06-30 18:58:48 -0400] bmurt: i assume under the nodes folder, there's node-specific .json that then gets referenced?
[2014-06-30 18:59:18 -0400] bmurt: for example, when i switched one node from chef_client to chef_solo the vagrant provisioning run choked on: https://gist.github.com/bmurtagh/930b04c798e172cf0bd5
[2014-06-30 18:59:25 -0400] bmurt: line 10
[2014-06-30 18:59:44 -0400] coderanger: bmurt: Yes, look at `knife node show -l -Fj $NAME` on your existing server for an example
[2014-06-30 19:00:20 -0400] coderanger: bmurt: The problem with search in solo is how to collect, manage, and transport all that node data
[2014-06-30 19:01:14 -0400] bmurt: but if i vagrant ssh chef_server then do: knife node list no knife config found, no priv key, etc.
[2014-06-30 19:01:22 -0400] bmurt: so im not sure how all this shit works with one another
[2014-06-30 19:01:35 -0400] bmurt: but the additional vagrant boxes are able to be provisioned successfully
[2014-06-30 19:02:07 -0400] coderanger: bmurt: You would have to set all that stuff up
[2014-06-30 19:02:18 -0400] coderanger: bmurt: the server doesn't have a knife config setup by default
[2014-06-30 19:02:40 -0400] btm_: Chef Office Hours: Join: bit.ly/1pQwwjB, watch: bit.ly/1pQwuIn
[2014-06-30 19:07:58 -0400] keftes: so when you send a notification to another resounce, :immediately - does that in theory get resolved asap or does it get put on a notification stack?
[2014-06-30 19:08:29 -0400] keftes: i'm having an issue where a remote_file resource is not notifying windows_zipfile in time - and an operation that expects the archive to be unzipped kind of explodes...
[2014-06-30 19:08:41 -0400] squaresurf: Is the chef community hour going right now?
[2014-06-30 19:08:44 -0400] squaresurf: I missed the links.
[2014-06-30 19:08:45 -0400] keftes: notifies :unzip, "windows_zipfile[webpicmdline]", :immediately  is what i'm sending - and the windows_zipfile has action :nothing
[2014-06-30 19:10:28 -0400] sla3k: j^2: Indeed it was issue with the RAM. Goes smoothly with 4 G's. :) Although all of that 4 G's are now consumed.
[2014-06-30 19:10:38 -0400] coderanger: squaresurf: Chef Office Hours: Join: bit.ly/1pQwwjB, watch: bit.ly/1pQwuIn
[2014-06-30 19:10:39 -0400] j^2: sla3k: nice, i'm glad to help
[2014-06-30 19:10:52 -0400] squaresurf: thank you coderanger
[2014-06-30 19:10:53 -0400] coderanger: keftes: It is immediately after the action method completes
[2014-06-30 19:11:37 -0400] coderanger: keftes: Can you pastebin the code?
[2014-06-30 19:11:53 -0400] keftes: sure
[2014-06-30 19:11:54 -0400] coderanger: sla3k: You can tune that down a bit in the solr settings
[2014-06-30 19:12:04 -0400] coderanger: sla3k: But not by much unfortunately
[2014-06-30 19:12:54 -0400] sla3k: coderanger: Thanks for the input, I don'
[2014-06-30 19:13:08 -0400] jarsever: Is there a release schedule for Chef and Chef-Metal?  I heard that they are going to be merged at some point.
[2014-06-30 19:13:29 -0400] sla3k: I don't know for how many (more) times I would need to install this setup again to get used to it. But I will try to lower that to some extend and see how it plays
[2014-06-30 19:13:33 -0400] heathsnow: Anyone seen this error when running Guard is running test-kitchen (minitest)?:  Message: Failed to complete #converge action: ["\xC3" on US-ASCII]
[2014-06-30 19:13:59 -0400] miketheman: jonlives: workmad3 : remote_file resources in GitHub's raw format don't respond with "If-Modified-Since" - boo
[2014-06-30 19:14:12 -0400] keftes: coderanger: http://pastebin.com/MWw8jS87
[2014-06-30 19:14:16 -0400] coderanger: jarsever: I mean they aren't going to be merged because that doesn't make sense, there is no formal schedule for metal to be released
[2014-06-30 19:14:25 -0400] coderanger: jarsever: metal is just a library for chef though
[2014-06-30 19:14:58 -0400] keftes: coderanger: the windows_zipfile action is :nothing - i pasted something i was testing... (set it to :unzip)
[2014-06-30 19:15:37 -0400] jkeiser: jarsever: there is no formal release schedule.  It feels like there's a couple of months' work left: we need to integrate the chef-container stuff for Docker and get a Hanlon driver done
[2014-06-30 19:16:09 -0400] jkeiser: jarsever: as far as merging them, the plan is to merge it into Chef around 1.0
[2014-06-30 19:17:03 -0400] jkeiser: "merging it" may end up meaning "make it a default dependency" or "ship it as part of omnibus" rather than "merge the code into the chef master branch"
[2014-06-30 19:17:34 -0400] jkeiser: the main point being "after 1.0, you will be able to type machine 'blah' in a recipe without having to install extra gems or requiring any extra library files"
[2014-06-30 19:18:01 -0400] c_t: is chef-container different than the "container" tests in chef-pedant?
[2014-06-30 19:18:13 -0400] jarsever: coderanger: jkeiser: Ah, thanks... that sounds like something to look forward to.
[2014-06-30 19:19:10 -0400] jarsever: jkeiser: is there a CLI methond to install only a 'machine_batch' from a recipe.   Example.  "chef-client -z recipe.rb test"
[2014-06-30 19:19:18 -0400] jarsever: *method
[2014-06-30 19:19:52 -0400] jkeiser: jarsever: not clear what you mean.  What is the 'test' parameter there?
[2014-06-30 19:20:16 -0400] coderanger: keftes: Okay, so you are trying two different ways at the same time
[2014-06-30 19:20:29 -0400] jarsever: jkeiser: In recipe.rb =>  machine_batch 'test' do
[2014-06-30 19:20:45 -0400] keftes: well yeah - ignore the :unzip on windows_zipfile
[2014-06-30 19:20:50 -0400] keftes: what i had there was :nothing
[2014-06-30 19:20:51 -0400] jarsever: and then when you run "chef-client -z recipe.rb test" the machine_batch 'test' will run
[2014-06-30 19:21:10 -0400] jkeiser: jarsever: nope.  you can put different batches in different recipes though
[2014-06-30 19:21:15 -0400] jkeiser: jarsever: chef-client -z test.rb
[2014-06-30 19:21:17 -0400] jarsever: almost like suites in kitchen-metal
[2014-06-30 19:21:24 -0400] keftes: (if i set it to :unzip i'm ignoring the notification - which is fine because it works idemptently - however i still want to know why it's not working with :nothing)
[2014-06-30 19:21:38 -0400] keftes: idempotently *
[2014-06-30 19:22:37 -0400] coderanger: keftes: http://hastebin.com/atawayiteg.rb try something like that
[2014-06-30 19:23:00 -0400] keftes: a precedence... - interesting - brb
[2014-06-30 19:23:11 -0400] jarsever: jkeiser: Ok thnx.  One more question... can you include another recipe in another.  So somewhere in test.rb you want test2.rb to run in the middle of it.  "include_recipe 'name'" doesn't work but I didn't see another way.
[2014-06-30 19:23:51 -0400] jarsever: sorry for the confusing question...
[2014-06-30 19:23:52 -0400] jkeiser: jarsever: only if your recipes are in cookbooks/COOKBOOKNAME/recipes/RECIPENAME.rb
[2014-06-30 19:23:56 -0400] coderanger: jarsever: include_recipe "cookbookname::name"
[2014-06-30 19:24:01 -0400] someara_: jarsever include_recipe 'cookbook_name::recipe_name'
[2014-06-30 19:24:02 -0400] jkeiser: jarsever: then you can include_recipe 'cookbookname::recipename'
[2014-06-30 19:24:50 -0400] jkeiser: jarsever: so yeah, just mkdir -p cookbooks/blah/recipes and then drop the recipes you want to include in there
[2014-06-30 19:25:06 -0400] jarsever: jkeiser: So is it a common practice to create a cookbook full of chef-metal recipes and then call/include them when you need them?
[2014-06-30 19:25:47 -0400] freerobby: Is anybody using chef with rackspace and seeing either the :rackconnect_wait or the :rackspace_servicelevel_wait options working?
[2014-06-30 19:25:49 -0400] jkeiser: jarsever: established best practices are still evolving--some people do it that way, yeah
[2014-06-30 19:25:53 -0400] freerobby: They appear for us to do absolutely nothing.
[2014-06-30 19:26:05 -0400] jkeiser: jarsever: it makes plenty of sense, since then you can upload the cookbook and run it on a provisioning node
[2014-06-30 19:26:16 -0400] j^2: freerobby: do you have a point to point vpn with RS?
[2014-06-30 19:27:03 -0400] freerobby: j^2: yeah, we have a rackconnect setup that lets our cloud stuff talk to our dedicated stuff
[2014-06-30 19:27:12 -0400] freerobby: every time we bootstrap a cloud box, the ip changes mid-deploy, and we get hosed
[2014-06-30 19:27:19 -0400] freerobby: my understanding is that this is what rackconnect_wait is supposed to fix
[2014-06-30 19:27:25 -0400] jarsever: jkeiser: huh... That does sound good because it would also work with berkshelf if it is stored as a cookbook.  Thanks
[2014-06-30 19:27:27 -0400] freerobby: but it does not appear to wait
[2014-06-30 19:27:54 -0400] j^2: freerobby: yeah, i hit the same problem. basicly i needed to ssh via the 10.x private address then do the rackconnect
[2014-06-30 19:28:15 -0400] j^2: that's where the point to point comes in
[2014-06-30 19:28:20 -0400] j^2: or you could use a "jump box"
[2014-06-30 19:28:22 -0400] freerobby: j^2: that's what we're looking at as well :(
[2014-06-30 19:28:28 -0400] freerobby: yeah - that's the plan
[2014-06-30 19:28:34 -0400] freerobby: a jump box that is
[2014-06-30 19:28:37 -0400] j^2: that's really the only "good" answer
[2014-06-30 19:28:40 -0400] freerobby: it makes automation so much more complicated though
[2014-06-30 19:28:50 -0400] j^2: unless you want to spend 60+ bucks per month on the p2p
[2014-06-30 19:28:53 -0400] freerobby: j^2: do you have any idea why the rackconnect_wait stuff does not work, or am i misreading what it is supposed to do?
[2014-06-30 19:29:06 -0400] freerobby: i think we'd gladly pay if there were a good solution.
[2014-06-30 19:29:16 -0400] j^2: then yeah leverage the p2p
[2014-06-30 19:29:21 -0400] coderanger: freerobby: Is this with knife-rackspace you mean?
[2014-06-30 19:29:25 -0400] freerobby: coderanger: yes.
[2014-06-30 19:29:40 -0400] j^2: the wait in there so you can basicly write a wrapper on this:
[2014-06-30 19:29:42 -0400] freerobby: j^2: what about creating the box via fog, continually poll rackspace until the ip changes, then bootstrap?
[2014-06-30 19:29:59 -0400] coderanger: freerobby: I mean the likely solution is to not use knife-rackspace, its a super basic tool that only covers simple use-cases
[2014-06-30 19:30:17 -0400] coderanger: Yeah, using fog directly is easy, or go full-kool-aid with images and Heat
[2014-06-30 19:30:29 -0400] j^2: https://gist.github.com/jjasghar/1b71a1d1b73c725c030b
[2014-06-30 19:30:33 -0400] j^2: freerobby: ^^
[2014-06-30 19:30:38 -0400] ckuttruff: coderanger: thanks for the suggestion... will check on that
[2014-06-30 19:30:40 -0400] freerobby: coderanger: That feels overly complicated for what we want. I guess I just don't understand what knife-rackspace claims to advertise with the rackconnect stuff
[2014-06-30 19:30:42 -0400] freerobby: j^2: thank
[2014-06-30 19:30:43 -0400] freerobby: s
[2014-06-30 19:30:57 -0400] j^2: it's a hacky agreed, but hell it works
[2014-06-30 19:31:14 -0400] coderanger: freerobby: Good money says it just passes those params directly to Fog
[2014-06-30 19:31:22 -0400] keftes: coderanger: nah same issue - the odd thing is that if i delete the file from the cache and rechef then the (newly) download archive will get unzipped
[2014-06-30 19:31:31 -0400] keftes: downloaded *
[2014-06-30 19:31:49 -0400] freerobby: j^2: sorry for the dumb question but what am i looking at exactly with this gist?
[2014-06-30 19:32:05 -0400] coderanger: freerobby: https://github.com/opscode/knife-rackspace/blob/master/lib/chef/knife/rackspace_server_create.rb#L389-L406
[2014-06-30 19:32:10 -0400] coderanger: freerobby: Thats the relevant code
[2014-06-30 19:32:11 -0400] j^2: freerobby: it's a snippet to do the rackconnect
[2014-06-30 19:32:13 -0400] quantumfoam: is Josh in here?
[2014-06-30 19:32:24 -0400] freerobby: ah
[2014-06-30 19:32:31 -0400] freerobby: thanks
[2014-06-30 19:32:32 -0400] coderanger: keftes: Yes, notifications only fire when the remote_file changes
[2014-06-30 19:32:37 -0400] coderanger: quantumfoam: Can you be more specific?
[2014-06-30 19:32:49 -0400] coderanger: quantumfoam: You might mean jtimberman
[2014-06-30 19:32:51 -0400] freerobby: coderanger: yeah, i'm there. thanks.
[2014-06-30 19:32:59 -0400] freerobby: i guess i figured that metadata would be useful once set. seems not.
[2014-06-30 19:33:18 -0400] ckuttruff: coderanger: haha, good call... was watching that grep command during the chef run, and it gets added, then removed, so something further down the line is resetting it.  thanks for the suggestion
[2014-06-30 19:33:36 -0400] keftes: coderanger: shouldn't the notification be sent for the initial remote_file action :create ? it seems that's the problem and it isn't
[2014-06-30 19:33:40 -0400] quantumfoam: coderanger: friend of mine that works for y'all
[2014-06-30 19:33:58 -0400] quantumfoam: was just curious if he hangs out in here
[2014-06-30 19:33:59 -0400] freerobby: j^2/coderanger: do you see any disadvantage in creating the box with fog, polling rackspace until the ip address changes, and then doing a bootstrap with the updated ip?
[2014-06-30 19:34:02 -0400] coderanger: keftes: Yes, it will happen the first time, but not again
[2014-06-30 19:34:03 -0400] freerobby: is there anything obvious i'm overlooking?
[2014-06-30 19:34:05 -0400] coderanger: quantumfoam: last name?
[2014-06-30 19:34:23 -0400] coderanger: freerobby: Seems like a good plan to me
[2014-06-30 19:34:23 -0400] quantumfoam: Brand
[2014-06-30 19:34:24 -0400] j^2: freerobby: that could work yeah
[2014-06-30 19:34:44 -0400] coderanger: quantumfoam: I've not seem him on IRC
[2014-06-30 19:35:07 -0400] jtimberman: quantumfoam: i'm in a meeting with him right now :)
[2014-06-30 19:35:11 -0400] quantumfoam: haha
[2014-06-30 19:35:12 -0400] keftes: coderanger: well that's the problem :) - the initial notification isn't getting sent = no unzip action on the windows_zipfile resource - deleting the file and re-chefing leads to the notification being properly set - but it still isn't being sent the 1st time
[2014-06-30 19:35:17 -0400] jtimberman: but i don't think he hangs out in irc.
[2014-06-30 19:35:22 -0400] quantumfoam: tell him jonathan said hi
[2014-06-30 19:35:26 -0400] quantumfoam: it'll freak him out
[2014-06-30 19:35:39 -0400] whiteadam: freaked me out too
[2014-06-30 19:35:46 -0400] sla3k: Okay, one more, can I use the server instance as workstation and use hppt://localhost/ ? As this is just a test, I don't think it should create any issues.
[2014-06-30 19:35:50 -0400] whiteadam: The Amazing Jonathan is in here!
[2014-06-30 19:35:50 -0400] coderanger: keftes: Hmm, can you post the output from chef-client on the first run?
[2014-06-30 19:36:21 -0400] keftes: ok - let me mock this up a bit..
[2014-06-30 19:36:36 -0400] freerobby: coderanger:/j^2: thank you both
[2014-06-30 19:36:40 -0400] freerobby: for the feedback/advice
[2014-06-30 19:39:13 -0400] coderanger: keftes: Heading off to find lunch, I'll be back in a bit though
[2014-06-30 19:40:00 -0400] j^2: freerobby: :D
[2014-06-30 19:40:03 -0400] keftes: enjoy
[2014-06-30 19:40:14 -0400] quantumfoam: anyway, we're testing out chef for devops here
[2014-06-30 19:40:38 -0400] quantumfoam: so I'll probably be hanging out in here since it's mostly my project
[2014-06-30 19:41:28 -0400] jeffcara: Anybody know when next 0.1.1 of ChefDK is coming out?
[2014-06-30 19:43:13 -0400] whiteadam: quantumfoam: sweet. we can drink together
[2014-06-30 19:44:58 -0400] JasonG: question: writing some (I thought) relatively simple wrapper cookbooks using Vagrant, how can I dump the contents of the merged attributes for debugging?
[2014-06-30 19:46:41 -0400] gyoza: microsoft wants 7525 for SQL 2014 license standard
[2014-06-30 19:46:42 -0400] gyoza: what
[2014-06-30 19:46:44 -0400] gyoza: the hell!!
[2014-06-30 19:46:54 -0400] gyoza: err 2008
[2014-06-30 19:46:58 -0400] gyoza: for 2014 they want 3189 lol
[2014-06-30 19:47:03 -0400] gyoza: Bastards!
[2014-06-30 19:47:53 -0400] whiteadam: gyoza: Calm yourself and change to something else.
[2014-06-30 19:48:03 -0400] whiteadam: Also, holy crap that's a lot.
[2014-06-30 19:48:05 -0400] gyoza: Its not for us, its a client
[2014-06-30 19:48:06 -0400] gyoza: :)
[2014-06-30 19:48:38 -0400] gyoza: omg look at this weed http://cookingwithlittlebuddy.com/wp-content/uploads/2012/10/New-Superweeds.jpg
[2014-06-30 19:48:51 -0400] gyoza: That is the biggest weed i've ever seen
[2014-06-30 19:48:55 -0400] whiteadam: I'd smoke it
[2014-06-30 19:48:59 -0400] gyoza: Apparently thats what farmers get to deal w/
[2014-06-30 19:49:08 -0400] gyoza: Roundup Resistant Weeds
[2014-06-30 19:49:13 -0400] gyoza: Turn into that tree
[2014-06-30 19:49:15 -0400] gyoza: LOL
[2014-06-30 19:50:48 -0400] gyoza: I gotta go back to the datacenter to deal with failing hardware..:(
[2014-06-30 19:50:54 -0400] gyoza: came back so co-worker could goto lunc
[2014-06-30 19:51:29 -0400] whiteadam: I did that last night
[2014-06-30 19:51:34 -0400] whiteadam: long cold floor time
[2014-06-30 19:51:47 -0400] gyoza: i noticed it first thing this morning=\
[2014-06-30 19:52:07 -0400] rsavage: nothing like the sound of server fans :)  and blinking lights...
[2014-06-30 19:52:16 -0400] gyoza: lol
[2014-06-30 19:52:17 -0400] rsavage: I don't miss the data center days much... :)
[2014-06-30 19:52:23 -0400] rsavage: but I did have some fun times.
[2014-06-30 19:52:24 -0400] gyoza: im pissed that i have to go lol
[2014-06-30 19:52:26 -0400] whiteadam: The best is when you're half asleep on the floor and someone reboots a server and it scares the shit out of you
[2014-06-30 19:52:27 -0400] gyoza: i dont get to mess around w/ aws today
[2014-06-30 19:52:34 -0400] gyoza: yea
[2014-06-30 19:52:40 -0400] gyoza: *gets quiet*
[2014-06-30 19:52:42 -0400] gyoza: *WAKES UP*
[2014-06-30 19:52:42 -0400] gyoza: WTF
[2014-06-30 19:52:45 -0400] whiteadam: yep
[2014-06-30 19:53:21 -0400] gyoza: ok
[2014-06-30 19:53:23 -0400] gyoza: coworker is back
[2014-06-30 19:53:27 -0400] whiteadam: seeya
[2014-06-30 19:53:27 -0400] gyoza: tty from the datacetner weee
[2014-06-30 20:02:11 -0400] ryanschwartz: Hey, does anyone know if the user resource in chef can deal with passwords on mac os x? If so, what hash method should be used to generate the crypted password string?
[2014-06-30 20:10:57 -0400] whiteadam: ryanschwartz: It should. and mkpasswd -m sha-512 maybe
[2014-06-30 20:11:36 -0400] whiteadam: ryanschwartz: actually, openssl passwd -1 "password"
[2014-06-30 20:12:43 -0400] whiteadam: ryanschwartz: http://docs.opscode.com/resource_user.html#password-shadow-hash
[2014-06-30 20:13:28 -0400] ryanschwartz: Right, aware of that - just one of my cohorts is reporting not working as expected. I will confirm and see if that's the case or not.
[2014-06-30 20:13:35 -0400] Alayde: Hey folks. Say by any chance, does anyone present happen to have much experience using the 'chef-solo-search' cookbook library
[2014-06-30 20:13:42 -0400] Alayde: ?*
[2014-06-30 20:14:21 -0400] ryanschwartz: so use `openssl passwd -1 "password"` on os x rather than mkpasswd (I think that's what he said as well - copying a linux hash over did not work on os x)
[2014-06-30 20:14:41 -0400] whiteadam: ryanschwartz: yeah, I'd try that. I couldn't get mkpasswd to work either
[2014-06-30 20:16:20 -0400] ryanschwartz: Ok good to know - thanks whiteadam. Will check back in if openssl doesn't do the trick. Any idea if that sha-1 will work on the linux side, or am I going to split recipes for user creation into mac and linux separately?
[2014-06-30 20:17:13 -0400] whiteadam: I'm not sure. I'd probably go with keeping them the same. I'm interested to see how it knows which one to use for the reverse
[2014-06-30 20:17:55 -0400] ryanschwartz: Ok - will try sha1 on both sides, and hopefully that will work. Appresh the quick comeback!
[2014-06-30 20:18:11 -0400] whiteadam: hah, no promises :)
[2014-06-30 20:23:58 -0400] AskSteve: anybody have any luck creating/attaching aws ebs volumes?
[2014-06-30 20:24:23 -0400] whiteadam: AskSteve: I actually read about it yesterday, but haven't tried it
[2014-06-30 20:24:41 -0400] AskSteve: I can get it to create the volume in AWS, but it doesn't attach it to the server.
[2014-06-30 20:24:53 -0400] whiteadam: Let me find that link I was reading
[2014-06-30 20:24:54 -0400] AskSteve: I've tried both aws_ebs_raid and aws_ebs_volume
[2014-06-30 20:26:05 -0400] whiteadam: AskSteve: I assume you were using this one? https://github.com/opscode-cookbooks/aws#ebs_raidrb
[2014-06-30 20:26:41 -0400] quantumfoam: whiteadam: I drink alone :v
[2014-06-30 20:26:42 -0400] whiteadam: AskSteve: I think this was one of the sites I was reading: http://clarkdave.net/2013/04/managing-ebs-volumes-with-chef/
[2014-06-30 20:26:49 -0400] whiteadam: quantumfoam: No other way to do it
[2014-06-30 20:26:59 -0400] AskSteve: witeadam: yes
[2014-06-30 20:27:07 -0400] AskSteve: whiteadam: yes
[2014-06-30 20:27:39 -0400] AskSteve: yeah, I read that one too
[2014-06-30 20:27:56 -0400] AskSteve: This is the error I get:  Error: Volume  no longer exists
[2014-06-30 20:28:59 -0400] whiteadam: >:|
[2014-06-30 20:30:15 -0400] whiteadam: Can't mount EXT4 on OSX natively? how dare they
[2014-06-30 20:32:57 -0400] AskSteve: ?
[2014-06-30 20:33:53 -0400] whiteadam: Talking in generals
[2014-06-30 20:33:58 -0400] AskSteve: ah
[2014-06-30 20:35:37 -0400] keftes: updated my client from 11.4.4 to 11.12.4 - that did the trick with the notifications
[2014-06-30 20:45:27 -0400] heathsnow: anyone know what it means when minitest failes tests because it doesn't know about any of it's own methods? (i.e.NoMethodError: undefined method `file' for #<#<Class:0x00000002f38980>:0x00000002f66dd0>)
[2014-06-30 20:45:42 -0400] heathsnow: I have require "minitest/spec" at the top of my test file
[2014-06-30 20:45:44 -0400] coderanger: heathsnow: Whats the code look like?
[2014-06-30 20:47:41 -0400] heathsnow: @coderanger:  https://gist.github.com/heathsnow/95820af2aaf1dcaa2483
[2014-06-30 20:48:25 -0400] coderanger: heathsnow: Are you trying to use minintest-handler?
[2014-06-30 20:48:50 -0400] coderanger: heathsnow: Unclear how this is being run
[2014-06-30 20:50:14 -0400] heathsnow: @coderanger: I'm just doing a 'vagrant up', with vagrant configured:   chef.run_list = [           'vmware_workstation',           'minitest-handler'       ]
[2014-06-30 20:51:15 -0400] coderanger: heathsnow: Okay, for that the spec file should be under files/default/tests/minitest
[2014-06-30 20:51:30 -0400] coderanger: That doesn't seem to be hte case uses
[2014-06-30 20:51:42 -0400] coderanger: heathsnow: See https://github.com/calavera/minitest-chef-handler/blob/v0.4.0/examples/spec_examples/files/default/tests/minitest/example_test.rb for an example
[2014-06-30 21:05:56 -0400] gondoi: this is probably opening up old wounds... but anyone know the latest on COOK-3900? I know ownership has been moved... curious if there is still progress
[2014-06-30 21:06:22 -0400] gondoi: saw some reference of removing apache22, but not exactly sure why or what that means
[2014-06-30 21:07:32 -0400] coderanger: gondoi: You'll have to talk to onehealth as they now maintain that cookbook
[2014-06-30 21:07:54 -0400] gondoi: agreed, do they not hang out in the chef channel?
[2014-06-30 21:08:19 -0400] gondoi: looking for input from anyone including them
[2014-06-30 21:08:54 -0400] heathsnow: Thanks @coderanger.  It seems I just needed these 3 lines:  include MiniTest::Chef::Assertions   include MiniTest::Chef::Context   include MiniTest::Chef::Resources
[2014-06-30 21:11:40 -0400] p3rsist: Hi guys. Just started with ruby+chef. Why this code gives me a syntax error? http://pastebin.com/SfDRWukE
[2014-06-30 21:18:18 -0400] heathsnow: p3rsist: I'm guessing it's the addition you're trying to do in the package name
[2014-06-30 21:19:18 -0400] workmad3: p3rsist: providing the error helps
[2014-06-30 21:19:25 -0400] workmad3: p3rsist: as in the complete text and stacktrace
[2014-06-30 21:21:08 -0400] p3rsist: heathsnow: Yeah i think its surely the addition. Why is this not valid? Bad syntax?
[2014-06-30 21:24:05 -0400] doomviking: I think package just wants the package name ("pkg") rather than the full path to it
[2014-06-30 21:27:06 -0400] p3rsist: doomviking, its just a prefix... not the full path. In fact, I am concatenating. Is there a reason why I can't ?
[2014-06-30 21:30:53 -0400] doomviking: p3rsist: whats the expected output?
[2014-06-30 21:32:02 -0400] p3rsist: doomviking, well like php-fpm... 'php-' + 'fpm'
[2014-06-30 21:33:01 -0400] heathsnow: p3rsist: perhaps this will work:  package "#{node[:php][:pkg_prefix]}#{pkg}" do
[2014-06-30 21:37:33 -0400] miketheman: jonlives: re: remote_file, sneaky stuff: http://bit.ly/1qsdV10
[2014-06-30 21:39:33 -0400] coderanger: miketheman: And then you get to see just how often github goes down :D
[2014-06-30 21:39:47 -0400] miketheman: coderanger: well, we see that anyways. :)
[2014-06-30 21:40:14 -0400] miketheman: now we will use less bandwidth during normal operations
[2014-06-30 21:45:27 -0400] doomviking: p3rsist: yeah maybe try what heathsnow said
[2014-06-30 21:50:46 -0400] p3rsist: doomviking, not working... the pkg_prefix is not getting evaluated .. very strange
[2014-06-30 22:02:44 -0400] jrwesolo: Hello everyone.
[2014-06-30 22:03:47 -0400] jrwesolo: Does anyone know how I can place a resource in a specific location in the resource collection? I would be doing this in a wrapper cookbook.
[2014-06-30 22:04:15 -0400] coderanger: jrwesolo: What are you trying to do?
[2014-06-30 22:05:39 -0400] jrwesolo: Right now I am just exploring the capabilities of wrapper cookbooks. Lets say I need to wrap a company-specific cookbook around java.
[2014-06-30 22:05:49 -0400] jrwesolo: woops, enter too soon, one second (typing)
[2014-06-30 22:07:45 -0400] jrwesolo: company-java includes java. The resource collection would have the resources from the java cookbook, lets say file[a], file[b], file[c]. Is there a way via the company-java coookbook to add a resource between others so it could result in a resource collection file[a], file[z], file[b], file[c]
[2014-06-30 22:08:04 -0400] jrwesolo: That may not be the best example and now that I write this I question the necessity of it :)
[2014-06-30 22:12:22 -0400] coderanger: jrwesolo: so that is possible, though not easy. check out my talk on Poise to see a better approach and obligatory plug that I'm available for training and consulting on these kinds of advanced chef use cases.
[2014-06-30 22:13:16 -0400] jrwesolo: Will do, thank you. Is it also complicated to delete a resource from the collection?
[2014-06-30 22:13:42 -0400] coderanger: jrwesolo: yes, but easy to change it to action nothing
[2014-06-30 22:13:54 -0400] coderanger: which is usually good enough
[2014-06-30 22:14:01 -0400] jrwesolo: Ah! Absolutely. That makes a lot more sense.
[2014-06-30 22:14:46 -0400] jrwesolo: Thanks so much for your help. Ill keep you in mind for more indepth consulting.
[2014-06-30 22:15:46 -0400] sarkis: random linux question, how can i only see the cmd in ps ?
[2014-06-30 22:16:40 -0400] jrwesolo: ps | awk '{ print $4 }'
[2014-06-30 22:17:01 -0400] sarkis: ty
[2014-06-30 22:20:48 -0400] jrwesolo: sarkis: this might be better for you ps -o comm=
[2014-06-30 22:21:06 -0400] jrwesolo: it will suppress the header and do it all with the ps command
[2014-06-30 22:26:34 -0400] nkts: I'm bootstraping linux box with knife and node['fqdn'] is null
[2014-06-30 22:26:48 -0400] nkts: where to check for fqdn variable?
[2014-06-30 22:26:53 -0400] coderanger: nkts: Does the machine have a FQDN?
[2014-06-30 22:26:57 -0400] coderanger: nkts: Check via hostname -f
[2014-06-30 22:28:13 -0400] nkts: coderanger: ah nope
[2014-06-30 22:28:32 -0400] nkts: tho I would like to take that hostname from node name param
[2014-06-30 22:28:54 -0400] coderanger: nkts: You can use the hostname cookbook to do that, but it isn't recommended
[2014-06-30 22:28:58 -0400] nkts: I'm bootstraping a ec2 instance here
[2014-06-30 22:28:59 -0400] coderanger: nkts: What kind of server is this?
[2014-06-30 22:29:18 -0400] nkts: with Amazon linux
[2014-06-30 22:29:25 -0400] coderanger: nkts: You can set your name info in the VPC DHCP options
[2014-06-30 22:30:23 -0400] nkts: coderanger: I have set my domain in VPC dhcp settings
[2014-06-30 22:30:45 -0400] nkts: tho it was not picked up
[2014-06-30 22:30:55 -0400] coderanger: nkts: Hmm, you should get an FQDN on startup then
[2014-06-30 22:31:07 -0400] coderanger: nkts: Make sure you have applied the dhcp options to correct VPC
[2014-06-30 22:34:45 -0400] mfeingold: Hi guys how yall doing?
[2014-06-30 22:35:26 -0400] jrwesolo: Hi mfeingold. Doing well! And yourself?
[2014-06-30 22:36:26 -0400] mfeingold: Great!
[2014-06-30 22:40:45 -0400] mfeingold: So I'm including a cookbook jenkins and inside the cookbook there is another cookbook called tests/fixtures/cookbooks/jenkins_slave and I want to include the cookbook in my runlist. How do I do that?
[2014-06-30 22:41:50 -0400] mfeingold: I already have depends 'jenkins' which correctly references jenkins
[2014-06-30 22:49:59 -0400] vluther: I have a set of attributes that change based upon the value of another attribute that supercedes them (specifically RAILS_ENV), what's the best way for me to write/organize my cookbooks so they're not littered with if/then statements ?
[2014-06-30 22:51:30 -0400] vluther: a case/when in the attributes?
[2014-06-30 22:54:06 -0400] coderanger: mfeingold: I'm not sure I follow
[2014-06-30 22:54:25 -0400] coderanger: vluther: You can make a helper in a library file
[2014-06-30 22:54:57 -0400] vluther: hmm, ok.. looking up helpers now, unless you have an example :)
[2014-06-30 22:55:15 -0400] coderanger: vluther: module MyAppHelpers def my_env node['foo'] || node['bar'] || 'default' end end
[2014-06-30 22:55:28 -0400] coderanger: vluther: And then in your recipe put "extend MyAppHelpers" at the top
[2014-06-30 22:55:39 -0400] vluther: ahh i see
[2014-06-30 22:56:42 -0400] mfeingold: coderanger: So if you goto https://github.com/opscode-cookbooks/jenkins and look inside test/fixtures/cookbooks
[2014-06-30 22:57:08 -0400] mfeingold: It's now a cookbook inception
[2014-06-30 22:57:19 -0400] mfeingold: It's jenkins cookbook with cookbooks inside
[2014-06-30 22:57:53 -0400] mfeingold: Do I have to upload those cookbooks individually to have it go in a run list?
[2014-06-30 22:58:02 -0400] coderanger: mfeingold: You can only have one cookbook called jenkins
[2014-06-30 22:58:11 -0400] mfeingold: I want to modify those attributes and set up a slave
[2014-06-30 22:58:15 -0400] coderanger: mfeingold: I think there is perhaps a deeper miscommunication about what you are trying to do
[2014-06-30 22:58:16 -0400] someara_: mfeingold the cookbooks in test are not meant to be used
[2014-06-30 22:58:54 -0400] coderanger: Yeah, are you meaning to setup your own wrapper cookbook?
[2014-06-30 22:58:59 -0400] mfeingold: Yeah
[2014-06-30 22:59:03 -0400] mfeingold: I have already set one p
[2014-06-30 22:59:04 -0400] mfeingold: up
[2014-06-30 22:59:06 -0400] coderanger: The things in test are helpers used inside test-kitchen
[2014-06-30 22:59:28 -0400] mfeingold: Yeah I see that. They are helpers that can do stuff for you right?
[2014-06-30 22:59:41 -0400] coderanger: mfeingold: No, they are test cases
[2014-06-30 22:59:55 -0400] mfeingold: Ok
[2014-06-30 23:00:02 -0400] coderanger: Or at least part of test cases, the other half being the serverspec stuffs
[2014-06-30 23:00:03 -0400] someara: they're for integration testing with test-kitchen
[2014-06-30 23:00:15 -0400] mfeingold: I see
[2014-06-30 23:00:25 -0400] someara: they make good examples =)
[2014-06-30 23:00:29 -0400] coderanger: mfeingold: If you want to create your own wrapper, all you need is the depends 'jenkins'
[2014-06-30 23:00:35 -0400] mfeingold: I did that already
[2014-06-30 23:00:43 -0400] mfeingold: But how do I know where the slave nodes are going?
[2014-06-30 23:00:54 -0400] mfeingold: I want to run an aws instance to install a slave node
[2014-06-30 23:01:00 -0400] coderanger: mfeingold: You have to create it
[2014-06-30 23:02:29 -0400] mfeingold: Well in the documentation it shows the functions for the tests and it says  create a slave launched via ssh
[2014-06-30 23:02:39 -0400] mfeingold: That's inside the test foldersa
[2014-06-30 23:02:45 -0400] mfeingold: That's exactly what I want to do
[2014-06-30 23:02:54 -0400] mfeingold: So why wouldn't I just use what the test does
[2014-06-30 23:03:50 -0400] coderanger: mfeingold: the stuff under test/ isn't for testing your own stuff, it is for testing the jenkins cookbook itself
[2014-06-30 23:04:13 -0400] coderanger: And you wouldn't use them directly because they aren't built to be flexible in any way, they are just test cases
[2014-06-30 23:04:20 -0400] mfeingold: Yeah I get that butI see
[2014-06-30 23:04:24 -0400] mfeingold: Oops
[2014-06-30 23:04:30 -0400] mfeingold: Yeah I see that
[2014-06-30 23:04:30 -0400] mfeingold: Ok
[2014-06-30 23:04:40 -0400] someara: the cookbook is meant to ship the jenkins resource types for you use in your own recipes
[2014-06-30 23:05:09 -0400] someara: much like yum ships yum_repository, that's used in yum-epel
[2014-06-30 23:05:53 -0400] mfeingold: Yeah so I see that we use cookbooks to boot strap the nodes
[2014-06-30 23:06:13 -0400] mfeingold: But jenkins says it sets up master/slave configuration
[2014-06-30 23:06:33 -0400] mfeingold: So I just wanted to basically
[2014-06-30 23:06:38 -0400] mfeingold: change the slave ip address
[2014-06-30 23:06:49 -0400] mfeingold: Basically complete the wrapper code
[2014-06-30 23:07:25 -0400] someara: I don't like the term "wrapper" here... wrapper implies that you're modifying the behavior of a recipe in some way
[2014-06-30 23:07:40 -0400] coderanger: Indeed, "application cookbook" :)
[2014-06-30 23:07:51 -0400] someara: you're simply using a resource shipped in the jenkins cookbook
[2014-06-30 23:08:01 -0400] someara: think of it as a "module"
[2014-06-30 23:08:24 -0400] someara: its new resource types, like user, directory, cron, etc
[2014-06-30 23:08:33 -0400] someara: file template service...... jenkins job
[2014-06-30 23:15:57 -0400] mfeingold: someara: Okay call me dumb but i'm new at this chef so when you say a resource from my understanding a resource is just a snippet of code in a recipe
[2014-06-30 23:18:04 -0400] someara: ah okay
[2014-06-30 23:18:05 -0400] someara: so
[2014-06-30 23:18:09 -0400] someara: resources are fundamental to chef
[2014-06-30 23:18:13 -0400] mfeingold: Yeah
[2014-06-30 23:18:16 -0400] someara: they're test-and-repair mechanisms
[2014-06-30 23:18:36 -0400] someara: so, file '/etc/passwd' { owner 'root', mode '0644' }
[2014-06-30 23:18:51 -0400] someara: every time chef-client runs, it would converge the node to the desired state
[2014-06-30 23:19:05 -0400] someara: package "whatever" { action :install }
[2014-06-30 23:19:09 -0400] mfeingold: Right
[2014-06-30 23:19:20 -0400] mfeingold: it would create a file and install a program
[2014-06-30 23:19:26 -0400] someara: so, file, package, user, cron, etc are "resources"
[2014-06-30 23:19:37 -0400] mfeingold: Yeah I got that
[2014-06-30 23:19:40 -0400] someara: which is the interface to the "thing" you're trying to manage on the machine
[2014-06-30 23:19:57 -0400] mfeingold: But jenkins cookbook has a bunch of resources and installs jenkins
[2014-06-30 23:20:05 -0400] someara: cookbooks can have no recipes, but implement new resource types
[2014-06-30 23:20:22 -0400] someara: jenkins is an example of this
[2014-06-30 23:20:35 -0400] mfeingold: But jenkins has recipes
[2014-06-30 23:20:44 -0400] someara: not really
[2014-06-30 23:21:05 -0400] someara: I mean it does
[2014-06-30 23:21:06 -0400] someara: but
[2014-06-30 23:21:22 -0400] someara: that's just to get it installed
[2014-06-30 23:21:27 -0400] mfeingold: Yeah
[2014-06-30 23:21:33 -0400] mfeingold: I know
[2014-06-30 23:21:47 -0400] mfeingold: But it must be creating a slave too
[2014-06-30 23:21:58 -0400] mfeingold: Well
[2014-06-30 23:22:02 -0400] mfeingold: At least configuring it
[2014-06-30 23:22:15 -0400] someara: so basically, the recipes in the test/fixtures/cookbooks directory are examples of how to use the jenkins resources
[2014-06-30 23:22:18 -0400] coderanger: mfeingold: the cookbook doesn't create the slave
[2014-06-30 23:22:23 -0400] mfeingold: All jenkins does it goto the ip address and sets up the node as a slave
[2014-06-30 23:22:28 -0400] mfeingold: You don't need to install jenkins there
[2014-06-30 23:22:31 -0400] coderanger: mfeingold: You create both and configure them to point at each other
[2014-06-30 23:22:37 -0400] mfeingold: Yeah
[2014-06-30 23:26:13 -0400] someara: along the same lines, the mysql cookbook ships a mysql_service resource, that you could use to create arbitrary master/slave setups
[2014-06-30 23:26:39 -0400] someara: you'd configure one as a master, another as a slave, then connect the network topology however you see fit
[2014-06-30 23:26:52 -0400] someara: by either hard coding IPs, or using search, or whatever
[2014-06-30 23:27:52 -0400] nkts: another my problem: http://p.nkts.lt/9e820e31-4c1e-4551-a6b2-f769d4af1bbb.txt
[2014-06-30 23:29:34 -0400] heathsnow: Anyone have a good link for running test-kitchen with the minitest busier?
[2014-06-30 23:29:40 -0400] heathsnow: *busser
[2014-06-30 23:29:51 -0400] mfeingold: I am creating a master and a slave
[2014-06-30 23:29:56 -0400] mfeingold: I have jenkins
[2014-06-30 23:30:04 -0400] mfeingold: and jenkins-slave
[2014-06-30 23:30:15 -0400] someara: heathsnow: http://vimeo.com/98938732
[2014-06-30 23:30:39 -0400] mfeingold: But the thing is the examples are doing tests yes but they are also examples
[2014-06-30 23:30:44 -0400] someara: I'd encourage serverspec over minitest
[2014-06-30 23:30:47 -0400] mfeingold: To use to build the slave and master
[2014-06-30 23:31:20 -0400] heathsnow: @someara: thanks I'll check it out now.  I'm having a difficult time getting mine to work.
[2014-06-30 23:33:28 -0400] mfeingold: Hmm well mauybe you're right
[2014-06-30 23:41:41 -0400] heathsnow: @someara:  hmmmm.  you say not to use the minitest busser so it doesn't really help me :P  I could try serverspec I suppose.
[2014-06-30 23:41:52 -0400] someara: it'd be set up the same way
[2014-06-30 23:42:52 -0400] someara: mkdir -p test/integration/suitename/minitest/
[2014-06-30 23:43:31 -0400] someara: https://github.com/maxmanders/minitest-busser-example
[2014-06-30 23:43:37 -0400] heathsnow: I have all the files in place.....it just doesn't seem to be actually running my tests
[2014-06-30 23:43:57 -0400] someara: you're doing kitchen test not kitchen converge?
[2014-06-30 23:44:16 -0400] someara: kitchen verify just runs the tests
[2014-06-30 23:44:17 -0400] heathsnow: yeah, kitchen test and kitchen verify
[2014-06-30 23:44:21 -0400] someara: hrm
[2014-06-30 23:44:37 -0400] someara: are you sure the suitenames match and all that?
[2014-06-30 23:44:41 -0400] heathsnow: yeah, I make the test so it should fail but it just completes as if nothing is wrong
[2014-06-30 23:44:53 -0400] heathsnow: I'll double check
[2014-06-30 23:45:04 -0400] someara: you'll see test-kitchen output of it uploading and running them
[2014-06-30 23:47:05 -0400] heathsnow: hmmmm.  it's failing because it doesn't even know what minitest methods are:
[2014-06-30 23:47:07 -0400] heathsnow: 1) Error:        test_0002_sets_the_necessary_permissions(vmware_workstation::ubuntu):        NoMethodError: undefined method `must_have' for #<Rake::FileTask:0x00000000bfd6c8>            /tmp/busser/suites/minitest/test_ubuntu.rb:11:in `block (2 levels) in <top (required)>'
[2014-06-30 23:47:30 -0400] heathsnow: Do I need a spec helper for the minitest busser?
[2014-06-30 23:48:02 -0400] coderanger: heathsnow: Are you trying to use minitest busser or minitest handler?
[2014-06-30 23:48:13 -0400] coderanger: heathsnow: The two are mostly unrelated and work differently
[2014-06-30 23:51:30 -0400] heathsnow: @coderanger: I'm trying to use minitest busser.  I have a file @ test/integration/ubuntu/minitest/test_ubuntu.rb and a .kitchen.yml file that has run_list: -recipe[vmware_workstation::ubuntu]
[2014-06-30 23:52:21 -0400] coderanger: Whats your spec look like?
[2014-06-30 23:53:15 -0400] heathsnow: https://gist.github.com/heathsnow/17637df4a85a325ab72e
[2014-06-30 23:54:31 -0400] coderanger: heathsnow: That thing on line 10, what is that?
[2014-06-30 23:54:47 -0400] coderanger: You can't use chef stuff from minitest like that if thats what you are trying to do
[2014-06-30 23:57:22 -0400] coderanger: heathsnow: The chef-specific assertions are part of minitest-handler, not minitest (to clarify that a bit) :)
[2014-06-30 23:58:09 -0400] heathsnow: @coderanger:  ah.....so I need to stick to minitest only
[2014-06-30 23:58:13 -0400] heathsnow: I'll give it a shot

[2014-06-23 00:51:00 -0400] redgetan: if i do override['nginx_force_recompile'] = true, would it override the run_state in https://github.com/miketheman/nginx/blob/master/recipes/source.rb#L65  ?
[2014-06-23 00:52:26 -0400] redgetan: chef 10.30.4
[2014-06-23 00:55:37 -0400] brucelee: coderanger: yout here?
[2014-06-23 02:59:20 -0400] Shred00: can basic authentication be used in solo.rb's recipe_url?  i.e. https://$user:$password@$host/$path.  i tried it and it didn't seem to use the account info trying to fetch the recipes.
[2014-06-23 05:05:56 -0400] fclausen_: hello all - can I use the search DSL in attribute files (e.g. in attributes/default.rb)?
[2014-06-23 05:07:27 -0400] digitalchild: I would say no, but im just assuming that based on attributes being something I would assume is static..
[2014-06-23 05:08:46 -0400] jtimberman: Shred00: no, basic auth isn't supported w/ recipe_url - we use open-uri under the hood and don't expose basic auth
[2014-06-23 05:09:24 -0400] jtimberman: fclausen_: you should do that in a recipe
[2014-06-23 05:10:58 -0400] fclausen_: yup, will do. Thanks jtimberman
[2014-06-23 07:38:22 -0400] brucelee: coderanger: you there?
[2014-06-23 07:53:03 -0400] brucelee: anyone here use ansible?
[2014-06-23 07:59:23 -0400] CJNE: nope, sorry
[2014-06-23 08:37:03 -0400] _pingu: some weeks ago chef-solo showed a diff of a updated resource like a file. now it doesn't do this anymore. Although Loglevel debug. I don't know why. How can I activate that again? We made a chef update in beween from 11.6.0 to 11.10.4.
[2014-06-23 08:55:29 -0400] Cope: _pingu: can't say without looking, but you could peep through the changelog file and see
[2014-06-23 08:56:04 -0400] Cope: brucelee: a bit like going to an arsenal match and shouting: anyone here support tottenham?
[2014-06-23 08:56:22 -0400] Cope: i know not really :)
[2014-06-23 08:56:35 -0400] Cope: brucelee: anything you're struggling with in particular?
[2014-06-23 09:24:53 -0400] _pingu: Cope: ok, thanks
[2014-06-23 09:27:35 -0400] ghghz: hey, is it possible to do
[2014-06-23 09:27:41 -0400] ghghz: service "mysql(d?)" do
[2014-06-23 09:27:45 -0400] ghghz: I mean service with regexp
[2014-06-23 09:28:00 -0400] garmur: Hi guys. Just wondering if there are any updates on when the Chef Development Kit for Windows will be ready? There's nothing on the blog in the past few weeks that I can see?
[2014-06-23 09:31:37 -0400] dwisnia: hey guys, any way to get the chefserver that he send all logs to the rsyslog?
[2014-06-23 09:33:12 -0400] CJNE: ghghz, not that i know, what is it that you want to do?
[2014-06-23 09:34:09 -0400] ghghz: CJNE: somewhere there are /etc/init.d/mysql somewhere /etc/init.d/mysqld
[2014-06-23 09:36:37 -0400] CJNE: ghghz, i would set an attribute for the service name (depening on platform) and use that in your recipe
[2014-06-23 09:55:25 -0400] laurent\: known memory leaks issues with chef-client 11.12.2 ?
[2014-06-23 09:56:26 -0400] laurent\: 11.12.8
[2014-06-23 10:37:17 -0400] juanluisrp: Hello, I'm developing a chef lwrp provider and want to retrieve a value from node inside provider, but I'm getting "undefined method `[]' for nil:NilClass" when I try to access to node['key1']['key2']
[2014-06-23 10:37:31 -0400] juanluisrp: Is it possible to access to node variable from a provider file?
[2014-06-23 10:59:43 -0400] Cope: why are you trying to do that?
[2014-06-23 11:07:37 -0400] workmad3: juanluisrp: yes, but the issue is that 'node["key1"]' is returning nil for you
[2014-06-23 11:07:54 -0400] workmad3: juanluisrp: it's better practice to pass the data you want into the lwrp as resource attributes though
[2014-06-23 11:07:59 -0400] Cope: ^^ that
[2014-06-23 11:08:31 -0400] juanluisrp: I was trying to do someting like in apt cookbook https://github.com/opscode-cookbooks/apt/blob/master/providers/repository.rb#L29
[2014-06-23 11:09:26 -0400] juanluisrp: use a node attribute to decide which call I have to make
[2014-06-23 11:14:26 -0400] Shred00: jtimberman: so does everyone using an http[s] url with recipe_url just have their cookbooks, complete with data bags of sensitive information just hanging out there for anyone to fetch?
[2014-06-23 11:15:06 -0400] whiteadam: Shred00: I trust everyone on the internet.
[2014-06-23 11:15:08 -0400] whiteadam: :)
[2014-06-23 11:15:36 -0400] Shred00: whiteadam: you are a better man (er, person) than i then.  :-)
[2014-06-23 11:16:36 -0400] Shred00: but seriously, how are people keeping that sensitive information secure if recipe_url can't utilize basic auth at least?
[2014-06-23 11:17:42 -0400] whiteadam: encrypted databags maybe?
[2014-06-23 11:18:42 -0400] whiteadam: My Chef is intermingled with people who are bad at processes, so we still have an NFS mount with a lot of the stuff on it.
[2014-06-23 11:19:10 -0400] Shred00: i'd rather have the crypto at access rather than unpacking.  the latter is susceptible to brute-force attacks with whatever computing power an attacker wants to throw at it.  the former allows me to set the rate of brute force attempts.
[2014-06-23 11:20:05 -0400] whiteadam: Yeah, I'm sure there's a better way, I just don't know what it is.
[2014-06-23 11:20:12 -0400] whiteadam: Brain isn't on yet/
[2014-06-23 11:20:15 -0400] _pingu: how can I get the current node and the current environment in a rspec test? the rspec test ist part of a chef report handler. so i guess node and environment should be accessible
[2014-06-23 11:21:10 -0400] Shred00: it just seems pretty basic (NPI) to want to require credentials on your recipe_url that i'm surprised that it's not been implemented yet.  clearly other people must be solving this problem differently than i and i just wonder what that is.
[2014-06-23 11:21:27 -0400] juanluisrp: thank you workmad3 and Cope
[2014-06-23 11:21:32 -0400] siXy: Shred00: it really, really isn't vulnerable to being brute forced.
[2014-06-23 11:21:47 -0400] whiteadam: siXy: What if I'm a really big brute?
[2014-06-23 11:21:52 -0400] siXy: unless you're silly enough to use a password string as your data bag secret, I guess
[2014-06-23 11:21:58 -0400] Shred00: siXy: any crypto is vulnerable to brute-force.  the only question is how much force.
[2014-06-23 11:22:06 -0400] siXy: Shred00: wrong
[2014-06-23 11:22:18 -0400] siXy: go learn some crypto, then try again :)
[2014-06-23 11:22:22 -0400] whiteadam: fight!
[2014-06-23 11:22:52 -0400] _pingu: Or is it possible to access all attributes in an rspec test executet by an report handler? And when, how?
[2014-06-23 11:23:03 -0400] siXy: that said, there's a chicken-and-egg problem of how you distribute the secret, which currently there's nothing public I can help you with, and I've not seen anyone else solve it well
[2014-06-23 11:23:09 -0400] whiteadam: I don't know enough about it to get into this one, but I would think it would need a lot of force... Maybe he's making bags for use in 100 years.
[2014-06-23 11:23:18 -0400] Shred00: siXy: so if i have an encrypted entity to which i need a password to open, how is it not susceptible to brute force if i can just guess passwords as many times as i want and as fast as i want?
[2014-06-23 11:23:36 -0400] siXy: Shred00: you're not supposed to use a passphrase as your secret.
[2014-06-23 11:23:45 -0400] Shred00: siXy: then what do i use?
[2014-06-23 11:24:14 -0400] siXy: iirc this is even in the docs ;) use data from /dev/urandom
[2014-06-23 11:24:14 -0400] whiteadam: a key?
[2014-06-23 11:24:29 -0400] bmalee: if it takes e.g. a billion years to guess the secret, im not sure id call that vulnerable to brute force, personally.
[2014-06-23 11:24:37 -0400] siXy: bmalee: exactly
[2014-06-23 11:24:39 -0400] Shred00: siXy: which is, uhm, a key.  a key is a static entity to which a guess will be made, eventually.
[2014-06-23 11:24:54 -0400] bmalee: eventually :)
[2014-06-23 11:25:03 -0400] siXy: Shred00: if you do it correctly, there isn't enough computer power in the world to do so in a reasonable length of time
[2014-06-23 11:25:09 -0400] whiteadam: just make the passphrase something like "clownpenis.fart" and no one will guess it... except me.
[2014-06-23 11:25:12 -0400] Shred00: bmalee: a billion years with todays computing power, yes. but there's no guarantee that it's a billion years tomorrow.
[2014-06-23 11:25:35 -0400] bmalee: Shred00: theres no guarantee that the world wont end tomorrow, but you dont see me worrying about that.
[2014-06-23 11:25:36 -0400] whiteadam: https://howsecureismypassword.net/
[2014-06-23 11:25:47 -0400] whiteadam: clownpenis.fart = 49 million years
[2014-06-23 11:25:48 -0400] siXy: Shred00: ... this is one of those things where if you don't actually know what you're doing, it's best not to try and hold an opinion
[2014-06-23 11:26:02 -0400] Shred00: siXy and bmalee: you are both assuming computing ability are static.
[2014-06-23 11:26:09 -0400] bmalee: no im not.
[2014-06-23 11:26:27 -0400] siXy: Shred00: no, I'm really not.
[2014-06-23 11:26:51 -0400] Shred00: siXy: you are the one that is wrong.  you maintain that brute-force is "impossible".  i maintained it is not, it just needs enough force.  who is right?
[2014-06-23 11:27:04 -0400] whiteadam: Shred00: just make sure it passes PCI DSS 3.0 and you'll be good.
[2014-06-23 11:27:11 -0400] bmalee: nobody said its impossible, just impractical in any meaningful way.
[2014-06-23 11:27:45 -0400] Shred00: bmalee: no, siXy said it was impossible.
[2014-06-23 11:28:07 -0400] whiteadam: I volunteer that it is implausable
[2014-06-23 11:28:27 -0400] workmad3: Shred00: you're 'right' in that enough force would crack it... however, it's completely impracticle to brute-force 128bit keys with *machines that reach the maximum for theoretical computational speeds* in timelengths less than the heat-death of the universe
[2014-06-23 11:28:36 -0400] whiteadam: _pingu: I don't know :(
[2014-06-23 11:28:40 -0400] Shred00: whiteadam: you might be right.  but it's always a gamble against what technology advances are made and how fast.
[2014-06-23 11:28:41 -0400] workmad3: Shred00: for all practical purposes, breaking a key through brute-force is impossible
[2014-06-23 11:29:07 -0400] siXy: Shred00: you don't understand enough about how crypto works, I'm afraid.
[2014-06-23 11:29:18 -0400] Shred00: siXy: actually i do thank you.
[2014-06-23 11:29:28 -0400] siXy: unless you're talking about pqcrypt, but that's obviously not really relevent for chef data bags, is it
[2014-06-23 11:29:32 -0400] workmad3: Shred00: and a paradigm shift in cryptography that makes it possible (such as quantum cryptography) would render most current schemes vulnerable (including your rate-limited access point)
[2014-06-23 11:29:55 -0400] whiteadam: Although I don't know anything about crypto, I will say that I thought a lot of stuff was "impossible" before Snowden.
[2014-06-23 11:29:58 -0400] Shred00: but regardless, if one has a choice to limit the rate of brute forcing and not limiting, why would one choose the latter?
[2014-06-23 11:30:07 -0400] siXy: well actually quantum crypto doesn't invalidate symmetric crypto either - it invalidates aysmmetric crypto, but that's not what chef uses
[2014-06-23 11:30:14 -0400] bmalee: For what its worth I think if AES gets broken tomorrow there are going to be bigger things to worry about...
[2014-06-23 11:30:20 -0400] whiteadam: oh shit here we go, quantum
[2014-06-23 11:30:30 -0400] whiteadam: I agree with bmalee
[2014-06-23 11:30:37 -0400] siXy: Shred00: because the crypto that you dismiss as 'brute-forcable' is far more secure than the scheme you're hoping for
[2014-06-23 11:32:09 -0400] workmad3: bmalee: depends a bit on what class of 'broken' it is ;)
[2014-06-23 11:32:18 -0400] bmalee: whiteadam: well, true.
[2014-06-23 11:32:25 -0400] bmalee: er.  workmad3 ^
[2014-06-23 11:32:33 -0400] whiteadam: Do one of you own a DWave?
[2014-06-23 11:33:10 -0400] whiteadam: siXy: Just put multi-factor on everything.
[2014-06-23 11:33:30 -0400] Shred00: siXy: you can't make that assertion.  you don't know what crypto scheme my rate-limiting access will apply.  there is no reason i cannot provide the same crypto (strength) to the rate-limited access that is applied to the databag directly.
[2014-06-23 11:33:50 -0400] siXy: the only people who talk about brute forcing AES are people with exactly zero useful knowledge of crypto whatsoever.  noone does that.  no, not even the nsa.  the implementations are attacked, either through direct bugs, or much more realistically through side channels
[2014-06-23 11:34:26 -0400] whiteadam: siXy: Yeah, I figure their exploit is more around creating bugs in software rather than brute-ing it.
[2014-06-23 11:34:59 -0400] workmad3: whiteadam: the nsa don't want bugs in the software... they want bugs in the *algoritms*
[2014-06-23 11:35:04 -0400] siXy: Shred00: and your https security is a lot more vulnerable - your rate limiting is 100% irellevent.
[2014-06-23 11:35:13 -0400] whiteadam: workmad3: That's outside of my brain ability.
[2014-06-23 11:35:14 -0400] whiteadam: :)
[2014-06-23 11:35:32 -0400] workmad3: whiteadam: and then push for those algoritms to be adopted as standards, so that all implementations can be 100% bug-free according to the standard, but still susceptible to their attacks ;)
[2014-06-23 11:36:12 -0400] workmad3: *algorithms
[2014-06-23 11:36:13 -0400] whiteadam: workmad3: This is eaxctly why I try to stay out of the security game. My degree is in English, I'm avoiding algorithms.
[2014-06-23 11:36:22 -0400] siXy: workmad3: in general, wrong for opensource stuff.  it's much easier to find bugs in the implementation than in the algorithm, and they're equivalently useful a lot of the time
[2014-06-23 11:36:59 -0400] workmad3: siXy: I was being facetious ;)
[2014-06-23 11:36:59 -0400] siXy: there are some cases where algorithmic bugs have been found, but these are rare, and usually big headline grabbers - 100% not what you want for anything you're hoping to keep under wraps
[2014-06-23 11:37:04 -0400] siXy: ah, sorry
[2014-06-23 11:37:08 -0400] whiteadam: lol
[2014-06-23 11:37:22 -0400] Shred00: siXy: true security is applied in layers.  so yes, while AES may be considered secure today and tomorrow and maybe even next week, real security analysts don't put their eggs all in one basket and apply multiple levels of security.  so if one can add layers of security one is silly not to.
[2014-06-23 11:37:26 -0400] matti: whiteadam: require 'English'
[2014-06-23 11:37:28 -0400] matti: whiteadam: :)
[2014-06-23 11:37:46 -0400] whiteadam: matti: lol
[2014-06-23 11:37:47 -0400] bmalee: of course, if youre worried about the nsa, you also have to worry about enhanced interrogation.  plus i really wonder why the nsa is so interested in the contents of your data bags.
[2014-06-23 11:38:01 -0400] workmad3: siXy: I have no doubt the nsa loves bugs of all forms in security and crypto stacks... either ones they've introduced, ones they've bribed others to introduce and ones that they just happen to find :)
[2014-06-23 11:38:02 -0400] matti: whiteadam: This thing does exist. Fire up irb/pry ;]
[2014-06-23 11:38:16 -0400] whiteadam: bmalee: They really want to get at my nginx config
[2014-06-23 11:38:36 -0400] siXy: Shred00: again, not actually always helpful.  wrapping multiple layers of crypto on top of one another can produce surprising and unhelpful side effects.
[2014-06-23 11:38:54 -0400] workmad3: bmalee: heh :) rubber-hose crypto attacks...
[2014-06-23 11:39:28 -0400] workmad3: bmalee: or, in xkcd, wrench attacks... http://xkcd.com/538/
[2014-06-23 11:39:29 -0400] Shred00: and who says the nsa cannot break aes.  do you think they would tell us if they did?  :-)
[2014-06-23 11:39:46 -0400] whiteadam: I used to work at a fortune 500 that had crazy security on the head end, but no wireless password.
[2014-06-23 11:39:57 -0400] bmalee: if the nsa wants your data theyre pretty much going to get your data, Shred00
[2014-06-23 11:39:58 -0400] workmad3: Shred00: I don't think we said they definitely couldn't... but if they can, they're *not* brute-forcing it
[2014-06-23 11:40:11 -0400] siXy: again with the lack of understanding.  aes is a pretty simple algo.  it's mathmatically provable that it works.
[2014-06-23 11:40:26 -0400] whiteadam: and the Fortune 100 I work for now, our last successful attack in Germany involved ramming the door to the datacenter down and pulling 32 drives out of the SAN. So, stop that!
[2014-06-23 11:40:46 -0400] workmad3: whiteadam: small shaped charges that explode when drives are removed...
[2014-06-23 11:40:47 -0400] siXy: the impelementation of it, though, is horrifically complex.  to the point that if you ever type the letters AES into your code, you're doing it wrong and need to stop immediately
[2014-06-23 11:41:09 -0400] whiteadam: workmad3: They elected for Self-Encrypting Drives... Shaped charges would have been much cheaper.
[2014-06-23 11:42:30 -0400] srenatus: so... chef-sugar's compile_time will fail if the provider uses inline resources without `use_inline_resources`... (looking at you, python_virtualenv)
[2014-06-23 11:42:43 -0400] siXy: anyway.  I've gone and fallen for http://xkcd.com/386/ again.  back to real work.
[2014-06-23 11:45:15 -0400] Shred00: so, encrypted data bags aside, what if some of my recipes contain non-free code that i am not allowed to distribute to just anyone who wants to fetch it?
[2014-06-23 11:46:14 -0400] whiteadam: Shred00: Use some tricky hosts.allow situation?
[2014-06-23 11:47:43 -0400] Shred00: whiteadam: but i think the point is that any such solution is just a work-around for the lack of missing authentication functionality on the recipe_url
[2014-06-23 11:48:44 -0400] whiteadam: Shred00: Maybe submit a feature request?
[2014-06-23 11:49:44 -0400] Shred00: whiteadam: yeah.  or just fix it and submit a patch.  originally, i really was just trying to find out if it's a known missing feature or if i was just doing it wrong.
[2014-06-23 11:51:12 -0400] whiteadam: Shred00: You might consider this interesting reading: https://coderanger.net/2014/02/data-bags/
[2014-06-23 11:51:38 -0400] workmad3: Shred00: btw, it's the ruby open-uri library that's the culprit here, not chef ;)
[2014-06-23 11:52:57 -0400] workmad3: Shred00: open-uri doesn't support userinfo in the url... chef uses open-uri... you could patch chef so it has basic auth capabilities, but you'd need to patch ruby to get open-uri to support userinfo in the url
[2014-06-23 11:53:44 -0400] _pingu: is it possible to access attributes in an rspec test executet by an report handler? And when, how?
[2014-06-23 11:54:47 -0400] _pingu: guess it is possible over the Chef::RunContext. but how can I get the current runContext?
[2014-06-23 11:58:52 -0400] chandra: ?
[2014-06-23 11:58:52 -0400] chandra: cany sonme one tel me how can i use data bag in chef
[2014-06-23 11:59:26 -0400] chandra: my data bag and data bag item look like this
[2014-06-23 11:59:41 -0400] chandra: [root@station2 data6]# cat my_db2_data.json { "id":"my_db2_data", "db2_db_name": "abc", "db2_user_name": "xyz", "db2_db_password": "abc123" }  [root@station2 data6]# pwd /root/Development/chef-repo/data_bags/data6
[2014-06-23 12:00:24 -0400] chandra: but cant understand how can i use this in my cookbook ?
[2014-06-23 12:01:53 -0400] Shred00: workmad3: indeed.  so chef might need to parse the url to extract the userinfo and given them to open-uri as http_basic_authentication
[2014-06-23 12:02:43 -0400] workmad3: Shred00: yeah, or provide --http-basic-username and --http-basic-password as extra params
[2014-06-23 12:03:06 -0400] workmad3: Shred00: which could be useful, as that mechanism can also be extended to provide http basic proxy auth
[2014-06-23 12:18:49 -0400] whiteadam: exit
[2014-06-23 12:18:52 -0400] whiteadam: oops
[2014-06-23 12:24:10 -0400] _pingu: no one?
[2014-06-23 12:26:23 -0400] CJNE: is there a way to set the encoding for test kitchen/chef-solo to utf8 ? getting invalid byte sequence due to non ascii chars being used in one cookbook i depend on
[2014-06-23 12:29:56 -0400] _pingu: CJNE: #kitchenci
[2014-06-23 12:30:33 -0400] CJNE: _pingu, thanks, will try there then :)
[2014-06-23 12:45:14 -0400] whiteadam: Does anyone know off hand if "aggregate bandwidth" is GB total or GBps average?
[2014-06-23 12:48:05 -0400] whiteadam: meh, I'll just calculate both for science
[2014-06-23 12:54:00 -0400] _pingu: is it possible to access attributes in an rspec test executed by an report handler? And when, how?
[2014-06-23 13:06:57 -0400] aberrios_: Would an environment take a run list? or do I have to specificy in roles the env_run_list (apparently discouraged in the docs)
[2014-06-23 13:07:23 -0400] jperry: _pingu: hey sorry about the other day I got pulled off onto something else.  Were you able to get your question answered?
[2014-06-23 13:07:49 -0400] jperry: aberrios_: envs do not take run_lists
[2014-06-23 13:08:11 -0400] jperry: you can either do it in a role like you mention but yes it is discouraged but good when your in a pinch
[2014-06-23 13:08:25 -0400] jperry: otherwise push your run list down to the cookbook level
[2014-06-23 13:08:49 -0400] jperry: aberrios_: why do you need to have a different run_list per environment?
[2014-06-23 13:09:07 -0400] jperry: put more intelligence down at your cookbooks
[2014-06-23 13:09:08 -0400] aberrios_: jperry: I'd like to just run handlers in the Production environment
[2014-06-23 13:09:23 -0400] jperry: what does the handler do?
[2014-06-23 13:09:26 -0400] rsavage: What's the best way to override a community cookbook's template file with your own template file in a wrapper cookbook?
[2014-06-23 13:09:36 -0400] aberrios_: jperry: Chef email handler
[2014-06-23 13:10:04 -0400] aberrios_: chef_handler::email
[2014-06-23 13:10:16 -0400] jperry: why not still have the email handler run but go to a dummy email or something else
[2014-06-23 13:10:20 -0400] jperry: this way you can test it
[2014-06-23 13:11:20 -0400] aberrios_: yeah could do that,, diff attributes per env... yep
[2014-06-23 13:11:26 -0400] aberrios_: ta
[2014-06-23 13:12:53 -0400] jperry: rsavage: you can use either chef rewind or in the resource specify where to get the template from
[2014-06-23 13:13:06 -0400] jperry: you can specify where the template lives
[2014-06-23 13:13:59 -0400] jperry: rsavage: https://sethvargo.com/changing-chef-resources-at-runtime/
[2014-06-23 13:14:07 -0400] rsavage: jperry, ok I'll research that, thanks!
[2014-06-23 13:14:14 -0400] tier: chef rewind always seemed kinda silly to me... why do something only to undo it?
[2014-06-23 13:14:52 -0400] jperry: it comes in handy when your using the wrapper cookbook pattern
[2014-06-23 13:15:14 -0400] jperry: and you don't like the community cookbook template
[2014-06-23 13:15:14 -0400] _pingu: jperry: no problem. yes, i found a solution.
[2014-06-23 13:15:39 -0400] jperry: tier: I too use chef-rewind or mucking with the internals as a last resort
[2014-06-23 13:16:05 -0400] _pingu: jperry: do you know if it is possible to access attributes in an rspec test executed by an report handler? And when, how?
[2014-06-23 13:17:10 -0400] jperry: _pingu: I don't see any examples on the chefspec readme or example page
[2014-06-23 13:17:10 -0400] _pingu: jperry: tried around with Chef::RunContext, but I didn't get it
[2014-06-23 13:17:32 -0400] jperry: might want to send an email to the chef mailing list
[2014-06-23 13:17:38 -0400] jperry: or do some googling
[2014-06-23 13:18:14 -0400] _pingu: jperry: already googled it. maybe i used the wrong keywords. thanks so far. :-)
[2014-06-23 13:18:48 -0400] jperry: np
[2014-06-23 13:36:40 -0400] rsavage: jperry...
[2014-06-23 13:37:06 -0400] rsavage: the community cookbook I am using (nagios from tas50) isn't doing tempaltes like most normal people do
[2014-06-23 13:37:25 -0400] rsavage: expect(chef_run).to render_file "#{chef_run.node['nagios']['conf_dir']}/nagios.cfg"
[2014-06-23 13:37:46 -0400] rsavage: that's in nagios/spec/default_spec
[2014-06-23 13:38:12 -0400] rsavage: the community cookbook for nagios doesn't setup perf data options well
[2014-06-23 13:38:51 -0400] rsavage: I don't want to modify the community cookbook's nagios.cfg.erb to enable my changes
[2014-06-23 13:43:44 -0400] rsavage: nevermind, jperry I got it to work
[2014-06-23 13:45:09 -0400] jperry: cool
[2014-06-23 13:46:39 -0400] rsavage: I actually love it, because I can still use the same attributes before, and create new ones based on the modified template
[2014-06-23 13:46:42 -0400] rsavage: brilliant!
[2014-06-23 14:10:18 -0400] froolie: I'm working on my first non-default recipe. Getting this error: ERROR: resource http_request[HEAD http://jenkins.mycompany.net:8080/job/foo.tar.gz] is configured to notify resource remote_file[/tmp/foo.tar.gz] with action create, but remote_file[/tmp/foo.tar.gz] cannot be found in the resource collection. http_request[HEAD http://jenkins.mycompany.net:8080/job/foo.tar.gz] is defined in /var/chef/cache/cookbooks/mycookbook/recipes/default.rb:61:in `from_file'
[2014-06-23 14:10:32 -0400] froolie: it seems to be some sort of ordering thing, but I'm not sure where it's wrong.
[2014-06-23 14:10:41 -0400] froolie: my recipe is here: http://pastebin.com/Ak8kSNZD
[2014-06-23 14:39:16 -0400] nkts: hi, I'm using deploy_revision to deploy my ruby app - is it good thing to share bundle directory between code releases?
[2014-06-23 14:50:14 -0400] nico__: hey all, happy monday.  Looking for an assist on deploying rvm and ruby using the chef-rvm cookbook
[2014-06-23 14:52:31 -0400] nico__: I'm trying to replace an existing deployment strategy for rvm. Seems the prior admin was installing rvm via bash script during the bootstrap process.  I want to do away with that and put rvm in place via the chef-rvm package
[2014-06-23 14:52:44 -0400] nico__: I was able to manually remove the existing rvm on a test machine
[2014-06-23 14:52:58 -0400] nico__: and use the chef-rvm cookbook to push rvm back to that machine
[2014-06-23 14:53:24 -0400] nico__: but it seems that the chef-client was using a ruby and gemset from the original deploy
[2014-06-23 14:53:31 -0400] nico__: and now chef-client doesn't run
[2014-06-23 14:54:17 -0400] nico__: So I'm looking to figure out how to correct that, or a better way to deploy with chef-rvm so that chef-client still runs after manually pulling out the old rvm and reinstalling via chef
[2014-06-23 14:58:36 -0400] nkts: nico__: why are you not building ruby package?
[2014-06-23 14:59:27 -0400] nico__: we need rvm in mixed mode to allow developers to install and work with whatever ruby they want inside their home dirs
[2014-06-23 14:59:51 -0400] nico__: i suppose rbenv would work too, I just happen to know rvm and not rbenv
[2014-06-23 15:23:32 -0400] tigerubuntu: hi, I have a problem with here that I try to solve for several hours already
[2014-06-23 15:23:45 -0400] tigerubuntu: could anyone help please?
[2014-06-23 15:24:04 -0400] gchristensen: tigerubuntu: it is impossible to help without knowing what your issue is. Ask your question, anyone who can help will chime in.
[2014-06-23 15:24:25 -0400] tigerubuntu: execute "jammit" do
[2014-06-23 15:24:26 -0400] tigerubuntu: cwd node[:chef_deploy][:destination]
[2014-06-23 15:24:27 -0400] tigerubuntu: command "bundle exec jammit -f"
[2014-06-23 15:24:27 -0400] tigerubuntu: environment({
[2014-06-23 15:24:28 -0400] tigerubuntu: 'RAILS_ASSET_ID'=> '',
[2014-06-23 15:24:28 -0400] tigerubuntu: 'RAILS_ENV' => "#{node[:chef_deploy][:environment]}",
[2014-06-23 15:24:29 -0400] tigerubuntu: 'PATH'=> '/bin:/usr/bin:/sbin:/usr/sbin:/usr/local/bin',
[2014-06-23 15:24:30 -0400] tigerubuntu: 'LANG'=> 'en_US.UTF-8'
[2014-06-23 15:24:32 -0400] tigerubuntu: })
[2014-06-23 15:24:36 -0400] tigerubuntu: action :run
[2014-06-23 15:24:38 -0400] tigerubuntu: not_if { File.exists?("#{node[:chef_deploy][:destination]}/public/assets/") }
[2014-06-23 15:24:40 -0400] tigerubuntu: end
[2014-06-23 15:24:58 -0400] tigerubuntu: the environment is not passed and it causes bundle to exit with error
[2014-06-23 15:25:17 -0400] tigerubuntu: when I do the same manually everything works
[2014-06-23 15:25:47 -0400] mikesplain: Are you setting 'node[:chef_deploy][:environment]' somewhere?
[2014-06-23 15:26:20 -0400] fr0saken: jkeiser: If you around, could you give me an example of how to add an attribute override in the chef_metal machine recipe?  Say for changing Heap Memory for a Java install on this specific machine?  Or can this only be done via the role?
[2014-06-23 15:26:31 -0400] tigerubuntu: no, I thought the environment in the execute was enough
[2014-06-23 15:27:15 -0400] mikesplain: fr0saken: I actually have an example I sent someone the other day: https://gist.github.com/mikesplain/c65d926af88e94a4a3ab
[2014-06-23 15:27:16 -0400] tigerubuntu: mikesplain: no, I thought the environment in the execute was enough
[2014-06-23 15:29:18 -0400] mikesplain: tigerubuntu: Right but you're setting the RAILS_ENV from an attribute, is that defined somwhere or are you trying to just set it to the same name as your chef environment? I'd suggest hard coding it there to see if it works... or just use node['environment']
[2014-06-23 15:29:24 -0400] fr0saken: mikesplain: uber man.  Thanks at on.
[2014-06-23 15:29:28 -0400] fr0saken: a ton* even
[2014-06-23 15:29:33 -0400] mikesplain: fr0saken haha no worries
[2014-06-23 15:31:16 -0400] tigerubuntu: mikesplain: yes, RAILS_ENV seems to be OK, I have an error on UTF-8 conversion, so the problem is with LANG
[2014-06-23 15:34:41 -0400] jperry: anyone find a good way to get ChefDK to play well with rbenv and chef gem
[2014-06-23 15:34:48 -0400] jperry: so the right one is picked up
[2014-06-23 15:35:54 -0400] mikesplain: tigerubuntuL: hmm gotcha.. sorry got nothing then :(
[2014-06-23 15:37:43 -0400] tigerubuntu: mikesplain: thanks, don't understand how this thing can not work, I guess I'll just pass this environment in bash
[2014-06-23 15:39:40 -0400] jkeiser: fr0saken: attribute 'foo', 'value'.  Or attribute %w(path to attribute), 'value'
[2014-06-23 15:39:52 -0400] jkeiser: oh I see mikesplain got it :)
[2014-06-23 15:40:24 -0400] mikesplain: jkeiser: well yours is simpler though :)
[2014-06-23 15:41:24 -0400] jkeiser: mikesplain: ah yes, I would prefer the single "attribute" syntax myself, especially since it won't kill off any other attributes people have set on the node
[2014-06-23 15:41:37 -0400] sarkis: is it recommended to always use symbols for attributes ... i.e. default[:like][:this]?
[2014-06-23 15:41:48 -0400] sarkis: i think i've come across situations where it doesn't work
[2014-06-23 15:41:56 -0400] mikesplain: jkeiser definitely, I was just about to ask sarkis's question hah
[2014-06-23 15:42:02 -0400] Breaking_Pitt: Guys... I'm running Ubuntu 14.04 but chef fails to restart a service due to init/upstart changes in Ubuntu... is there any kind of workaround to this behavior?
[2014-06-23 15:42:15 -0400] jkeiser: I'm quite sure that works too :)
[2014-06-23 15:42:35 -0400] jkeiser: I don't honestly recall which is the recommendation though
[2014-06-23 15:42:50 -0400] mikesplain: Fair enough!
[2014-06-23 15:43:21 -0400] srenatus: Breaking_Pitt: what's your expectation?  What is the right way for your service, sysv (/etc/init.d/blah status) or upstart (status blah)?
[2014-06-23 15:43:30 -0400] sarkis: i mean technically what is the advantage of using symbols anyway? do you get the benefits of it using it as a hash key}/
[2014-06-23 15:43:42 -0400] Breaking_Pitt: srenatus I'm using the openssh cookbook
[2014-06-23 15:44:52 -0400] Breaking_Pitt: the problem is that I'm relying the install of openssh in  the comunity cookbook... So I don't know how to workarount this problem... /etc/init.d/sshd restart fails with return 1
[2014-06-23 15:44:56 -0400] srenatus: https://blueprints.launchpad.net/openstack-chef/+spec/trusty-icehouse the discussion part links some tickets, apparently upstart is the new default
[2014-06-23 15:45:08 -0400] jkeiser: One less character?  Also ruby stores them a bit more compactly.  Probably negligible though
[2014-06-23 15:45:51 -0400] gchristensen: I read something about symbols should never be auto-generated because it can wreak havoc.
[2014-06-23 15:49:22 -0400] fr0saken: thanks jkeiser
[2014-06-23 15:50:33 -0400] fr0saken: one more, what about multiple values  say attribute tomcat, and defining version and java_options on same line?
[2014-06-23 15:50:43 -0400] fr0saken: my role its pretty clear cut, but my ruby blows so im still learning
[2014-06-23 15:51:37 -0400] fr0saken: like i have :tomcat base_version '7' and then JAVA_OPTS with heapsize info in my role
[2014-06-23 15:55:20 -0400] fr0saken: NVM i got it
[2014-06-23 15:55:22 -0400] fr0saken: thanks again guys
[2014-06-23 15:56:28 -0400] srenatus: Breaking_Pitt: https://github.com/opscode-cookbooks/openssh/pull/30 there's a related ticket
[2014-06-23 15:57:35 -0400] jkeiser: fr0saken: just to make sure you got it right, there are two ways to do it
[2014-06-23 15:58:15 -0400] jkeiser: 1. attribute [ 'tomcat', 'version' ], '1.0' and attribute [ 'tomcat', 'java_options' ], '...' is one.  Doing it this way means that any other options in the 'tomcat' hash will be preserved.
[2014-06-23 15:58:38 -0400] tigerubuntu: hi, guys, I changed the command to 'LANG=en_US.UTF-8 bundle exec jammit -f' but I still have an error: U+0105 from UTF-8 to US-ASCII (Encoding::UndefinedConversionError) does anyone has an idea what else it could be (not a properly chef question though)
[2014-06-23 15:59:11 -0400] jkeiser: 2. attribute 'tomcat', { 'version' => '1.0', 'java_options' => '...' }.  Doing it this way means that the 'tomcat' hash will be *exactly* these two values and no other.  Other options within 'tomcat' will disappear.
[2014-06-23 15:59:22 -0400] anoldhacker: Test kitchen doesn't want to seem to load my custom ohai plugins.  I'm not finding any hints on the web.
[2014-06-23 15:59:49 -0400] jkeiser: fr0saken: It's a subtle distinction but one that matters if you have users or other recipes modifying your node attributes
[2014-06-23 15:59:55 -0400] anoldhacker: s/plugins/plugin/
[2014-06-23 16:00:21 -0400] jkeiser: And I am still fairly sure that symbols are as acceptable as strings in there
[2014-06-23 16:01:10 -0400] anoldhacker: If it is a node attribute loading as a mash, there is no difference.  If it loads as a hash, there is.
[2014-06-23 16:01:28 -0400] Breaking_Pitt: thanks srenatus!!!!
[2014-06-23 16:08:12 -0400] anoldhacker: Any ideas about my test kitchen problem?
[2014-06-23 16:08:15 -0400] icarus: does anyone have any tips on deploy methods for a php application?
[2014-06-23 16:08:32 -0400] icarus: basically updating code into a documentroot
[2014-06-23 16:08:38 -0400] icarus: via chef
[2014-06-23 16:10:28 -0400] whiteadam: icarus: Sounds pretty basic, don't know if any tips are needed :)
[2014-06-23 16:11:07 -0400] icarus: whiteadam: im basically cp an svn checkout into the docroot with every run
[2014-06-23 16:11:17 -0400] icarus: just seems kind of sloppy
[2014-06-23 16:11:49 -0400] whiteadam: icarus: eh, you could get fancy with some sort of Continuous Integration if you wanted...
[2014-06-23 16:15:41 -0400] cschneid: what does "ERROR: negative argument" mean when a run fails out?
[2014-06-23 16:17:51 -0400] binamov: cschneid can you paste the entire output into like http://gist.github.com ? say my name when done
[2014-06-23 16:20:19 -0400] whiteadam: cschneid: I think It means you're looking for something that isn't there. I know that's not a helpful explanation though.
[2014-06-23 16:21:05 -0400] anoldhacker: So, chef's swallowing errors on the ohai plugin includes syntax errors.
[2014-06-23 16:21:11 -0400] anoldhacker: Just not reported at all.
[2014-06-23 16:30:30 -0400] shlant: anyone familiar with runit?
[2014-06-23 16:46:33 -0400] Yvan_: Question: Anybody knows how I could make this guard in chef...  \\hostname\sharedfolder | grep '\\hostname\sharedfolder'    it echoes an error in the console => \hostnamesharedfolder | grep '\\hostname\sharedfolder'
[2014-06-23 16:49:52 -0400] vt102: I'm writing cookbooks for specific gems.  It appears I need to explicitly make sure I have certain packages like patch, gcc, libxml2-devel, etc.. in place first.  To me, it would seem natural to have a yum_package block for all those before the gem_package I want.  However, I get warns about Cloning resource attributes...CHEF-3694 that way.  How SHOULD I be doing this?
[2014-06-23 16:51:35 -0400] Eulipion|Work: how can I fix secure_password being undefined.  Openssl is a dep in my metadata and I'm including opscode:openssl:password in my recipe, like many others.  just this one bombs, oddly
[2014-06-23 17:05:10 -0400] juliancdunn: Eulipion|Work: Chef::Recipe.send
[2014-06-23 17:05:18 -0400] juliancdunn: read this for why - http://www.getchef.com/blog/2013/09/04/demystifying-common-idioms-in-chef-recipes/
[2014-06-23 17:07:33 -0400] cschneid: binamov: sorry - was sidetracked - here's the output. https://gist.github.com/cschneid/1ac20aa7720fc1b35274
[2014-06-23 17:07:44 -0400] cschneid: the server doesn't have a chef-stacktrace file in /var/chef/cache, so that's all I have to go on
[2014-06-23 17:11:50 -0400] Yvan_: Question: Anybody knows how I could make this guard something like this in chef...  \\hostname\sharedfolder | grep '\\hostname\sharedfolder'    it echoes an error in the console => \hostnamesharedfolder | grep '\\hostname\sharedfolder'
[2014-06-23 17:13:10 -0400] cschneid: The run I pasted "finished" -- ie, the last resource in the whole runlist seems to have run `... ai-telemetry_integrations.yml] action create (up to date)`, but then chef-client didn't finish right
[2014-06-23 17:13:23 -0400] cschneid: so it must be in the delayed notifications?
[2014-06-23 17:15:12 -0400] cschneid: yeah, removing some of the notifies makes it run to completion. Hmm...
[2014-06-23 17:15:20 -0400] cschneid: maybe I have a service name wrong?
[2014-06-23 17:18:00 -0400] Eulipion|Work: juliancdunn: I'm using CHef::Recipe.send: http://pastebin.com/diLYt08J
[2014-06-23 17:18:51 -0400] juliancdunn: Eulipion|Work: do it outside your ruby_block. you need it to be defined at compile time
[2014-06-23 17:19:49 -0400] Eulipion|Work: juliancdunn: I am, no difference, http://pastebin.com/DgSxRN8y
[2014-06-23 17:20:04 -0400] nico__: any idea why changes made locally to my bootstrap template file seem to be getting ignored when I deploy a new instance?  we are using the knife-cloudstack plugin, so it should use the chef-full template but it seems that an override exists somewhere and is forcing it to use a custom script
[2014-06-23 17:20:35 -0400] nico__: I changed the local script, but it doesn't seemn to be actually using the new local bootstrap template
[2014-06-23 17:21:52 -0400] nico__: my predecessor was doing some weird stuff with installing rvm via bootstrap. I want that crap gone, and to use the chef-rvm cookbook to deploy chef as a multi-user install
[2014-06-23 17:22:44 -0400] nico__: but I notcie that even after I take out the lines that do the rvm install work, newly bootstrapped instances still execute that code and have rvm installed when the bootstrap is done
[2014-06-23 17:22:49 -0400] whiteadam: nico__: Still trying to clean it out huh?
[2014-06-23 17:22:53 -0400] nico__: hah yeah
[2014-06-23 17:22:57 -0400] juliancdunn: Eulipion|Work: ohhh I didn't see that because you're trying to use it from within a ruby_block
[2014-06-23 17:23:04 -0400] nico__: I got the system wide deploy stuff working
[2014-06-23 17:23:08 -0400] juliancdunn: so it should be Chef::Resource::RubyBlock.send
[2014-06-23 17:23:36 -0400] nico__: but I still have to manually remove the work he did after a fresh bootstrap
[2014-06-23 17:23:43 -0400] whiteadam: odd
[2014-06-23 17:23:50 -0400] whiteadam: Always fun cleaning up other people's stuff
[2014-06-23 17:24:09 -0400] nico__: I changed the lines that did the work in the chef-repo/.chef/bootstrap/emn_lts12.04.erb file
[2014-06-23 17:24:13 -0400] nico__: and saved them
[2014-06-23 17:24:18 -0400] nico__: and committed them to my version control
[2014-06-23 17:24:33 -0400] nico__: and I looked in my knife.rb
[2014-06-23 17:24:58 -0400] whiteadam: sounds like he did stuff a little differently than the rest of us, might be why it's hard to figure out.
[2014-06-23 17:25:07 -0400] whiteadam: Flexibility can be good and bad :)
[2014-06-23 17:25:20 -0400] Eulipion|Work: juliancdunn: that fixed it thx.
[2014-06-23 17:25:25 -0400] nico__: yeah...
[2014-06-23 17:25:35 -0400] nico__: so my knife.rb has: #knife[:distro] = "emn-12.04-lts"
[2014-06-23 17:25:42 -0400] nico__: that's the bootstrap file that I modified
[2014-06-23 17:25:45 -0400] nico__: and it's commented out
[2014-06-23 17:25:48 -0400] nico__: BUT
[2014-06-23 17:26:03 -0400] nico__: we also have: knife[:cloudstack_template] = "Ubuntu 12.04 LTS x86_64 Min PV CHEF"
[2014-06-23 17:26:08 -0400] nico__: in our knife.rb
[2014-06-23 17:26:23 -0400] whiteadam: I actually don't have any of that fun stuff in my knife.rb
[2014-06-23 17:26:24 -0400] nico__: and I'm thinking that perhaps that is tied to a template file somewhere that I need to modify
[2014-06-23 17:26:39 -0400] whiteadam: I just call a certain role, but it all depends I guess.
[2014-06-23 17:26:52 -0400] whiteadam: nico__: You using OSX?
[2014-06-23 17:27:06 -0400] nico__: my local box is os x mavericks 10.9.3
[2014-06-23 17:27:21 -0400] nico__: but I'm primarily deploying ubiuntu 12.04 lts server images to our cloudstack
[2014-06-23 17:28:01 -0400] whiteadam: nico__: brew info the_silver_searcher   it's like grep on steroids... maybe you can search your way to a solution
[2014-06-23 17:28:14 -0400] whiteadam: nico__: or https://github.com/ggreer/the_silver_searcher
[2014-06-23 17:28:25 -0400] nico__: interesting.  sounds like a nice utility that I might check out regarless of it's bearing on this issue :)
[2014-06-23 17:28:27 -0400] nico__: thanks!
[2014-06-23 17:28:41 -0400] whiteadam: yeah, I use it a lot to figure out what people have done
[2014-06-23 17:29:32 -0400] nico__: anyway, at the moment - I believe that the cloudstack plugin is using that knife symbol to "know" which image to dploy for us - and my expectation is that that particular mechanism somehow dictates a specific bootstrap template be used
[2014-06-23 17:30:43 -0400] whiteadam: nico__: Maybe it's in some cloudstack script or image?
[2014-06-23 17:30:53 -0400] nico__: so I *think* I should be diggin in to the knife-cloudstack plugin and the process for defining images and their related bootstrap templates
[2014-06-23 17:31:06 -0400] nico__: seem reasonable at least
[2014-06-23 17:31:15 -0400] Eulipion|Work: juliancdunn: in that same paste, how come I'm getting a 403 when I node.save? (http://pastebin.com/DgSxRN8y - line44)
[2014-06-23 17:31:56 -0400] fr0saken: jkeiser: thanks again.  definitely noted.
[2014-06-23 17:32:02 -0400] Eulipion|Work: juliancdunn: err. http://pastebin.com/cWJST76a - line 41
[2014-06-23 17:41:23 -0400] nico__: is there a definitive way to know which bootstrap template is being used when an instance is deployed?
[2014-06-23 17:41:39 -0400] nico__: I was under the impression that if you don't specify one, that chef-full gets used
[2014-06-23 17:41:48 -0400] nico__: which is downloaded from opscode on the fly
[2014-06-23 17:42:09 -0400] nico__: but I'm not sure that's happening and I want to confirm
[2014-06-23 17:42:11 -0400] whiteadam: nico__: So, with mine, I specify the role or cookbooks on the boostrap run.
[2014-06-23 17:42:39 -0400] nico__: I specify the role and environment at the command line when I build with knife
[2014-06-23 17:43:05 -0400] whiteadam: afk
[2014-06-23 17:44:11 -0400] nico__: but I don't specfy the template, because there's only one and it's rolled in the knife.rb as 'knife[:cloudstack_template] = "Ubuntu 12.04 LTS x86_64 Min PV CHEF"'
[2014-06-23 17:45:15 -0400] nico__: all the documentation for chef and the knife-cloudstack plugin (which is somewhat sparse on documentation, at least that I've found) say that if you don't speficy a distro or bootstrap template, that the chef-full gets used
[2014-06-23 17:46:04 -0400] nico__: but I'm not sure if the 'knife[:cloudstack_template] = "Ubuntu 12.04 LTS x86_64 Min PV CHEF"' in my knife.rb constitutes specifying a distro/custom template
[2014-06-23 17:46:57 -0400] nico__: and the best test I can devise at the moment is to find out how to know which template is being used to bootstrap an instance and look for that while I provision a test instance
[2014-06-23 17:51:48 -0400] Eulipion|Work: is there a way to update a node's attributes, but not the node that chef-client is running on?  I get permission denied when I try doing it
[2014-06-23 17:56:13 -0400] davidordave: @Eulipion|Work I believe that users should have access to modify nodes by default.
[2014-06-23 17:56:38 -0400] davidordave: a client only has access to modify its own node object I think.
[2014-06-23 17:56:57 -0400] Eulipion|Work: davidordave: did that change in chef11, this cookbook used to work.....
[2014-06-23 17:57:25 -0400] nico__: so it looks like after I renamed the local emn-12-04-lts.erb and provision an instance, I can see it downloads the install script from opscode
[2014-06-23 17:57:47 -0400] whiteadam: nico__: That's how it should work
[2014-06-23 17:58:38 -0400] nico__: excellent.  so now I'm going to rename emn-12-04-lts.erb.old back to emn-12-04-lts.erb and spin up a new test box
[2014-06-23 17:58:49 -0400] nico__: and if it STILL downloads the opscode bootstrap
[2014-06-23 17:59:00 -0400] nico__: then I know it doens't matter which template is specified wither on the command line or in the knife.rb
[2014-06-23 17:59:21 -0400] whiteadam: You're learning now
[2014-06-23 17:59:33 -0400] nico__: it's just going to get the full one, unless I specify -d or -template-file on the cli
[2014-06-23 17:59:53 -0400] nico__: this all seems reasonable to me, I'm just saying it out loud here as a sanity check
[2014-06-23 18:00:13 -0400] davidordave: @Eulipion|Work I'm not sure. looking at the permissions in our chef server I may be completely wrong. Did you recently transition servers? maybe http://docs.opscode.com/chef/migrate_to_hosted.html#configure-permissions is related?
[2014-06-23 18:00:29 -0400] nico__: and when it's all said and done, if I STILL have rvm installe din a wacky location
[2014-06-23 18:00:53 -0400] nico__: then the only reasonable conclusion is that the image he created on the cloudstack has his wacky rvm rolled in to it
[2014-06-23 18:01:15 -0400] whiteadam: You're like a Sherlock Holmes of computers
[2014-06-23 18:01:16 -0400] nico__: which is still testable just by creating an instance from the cloudstack web ui using that template
[2014-06-23 18:01:22 -0400] nico__: lmao thanks
[2014-06-23 18:01:50 -0400] davidordave: nope, each node is set to only be able to update itself and clients can only read. Not sure how this applies if you are using open source.
[2014-06-23 18:05:33 -0400] poasen: if i try to get an attribute from a chef databag with value of "" (double quotes with nothing inside of them) does that equate to nil? or would it be an empty string ?
[2014-06-23 18:48:58 -0400] nico__: so it turns out that regardless of wether or not my chef-rep/.chef/bootstrap/ contains valid .erb's - they ONLY get used if I specify the --template-file. without doing so, the chef-full template is downloaded from opscode on the fly. So as we suspected, the name of the cloudstack template has no bearing on the bootstrap template file used.
[2014-06-23 18:49:17 -0400] whiteadam: jackpot
[2014-06-23 18:49:23 -0400] nico__: and I've confirmed that the cloudstack template has the funky rvm baked in
[2014-06-23 18:49:43 -0400] nico__: which means I need to roll a new cloudstack template to do this "right"
[2014-06-23 18:50:49 -0400] nico__: though I supposed I could modify our base role to remove it and then install via the chef-rvm cookbook
[2014-06-23 18:51:04 -0400] nico__: that would be a little lazy though...  better to get the base image right
[2014-06-23 18:51:29 -0400] nico__: anyway, thanks for being a sounding board and providing great knowledge re: chef to help me get through this
[2014-06-23 19:02:57 -0400] btm: @chef Chef Office Hours (Formerly Code Review) Join: bit.ly/1qt3JCE Watch: bit.ly/1qt3JCG
[2014-06-23 19:11:38 -0400] hltbra: is anyone experiencing 500/502/503 errors with Enterprise Chef? I have many machines running chef (enterprise chef) and I got some alerts in different times, all reporting 50x errors from chef-client
[2014-06-23 19:37:30 -0400] bakins: omnibus-ruby  issues - correct place to ask about?
[2014-06-23 19:44:35 -0400] gzilla: hello everyone.  quick question.  How would I use the output of a ruby block for another resource? (create file if output of ruby block is true)
[2014-06-23 19:44:40 -0400] double_p: http://www.youtube.com/watch?v=vaqH3v31X4w
[2014-06-23 19:49:33 -0400] gyoza: man
[2014-06-23 19:49:35 -0400] gyoza: anybody use Ice here?
[2014-06-23 19:49:38 -0400] gyoza: its fucking intense
[2014-06-23 19:49:48 -0400] gyoza: (netflix ice)
[2014-06-23 19:53:44 -0400] jessemdavis: what about it?
[2014-06-23 19:53:57 -0400] jessemdavis: been using it for a bit
[2014-06-23 19:55:43 -0400] matti: gzilla: Define output?
[2014-06-23 19:56:06 -0400] gyoza: jessemdavis: just settnig it up for the first time
[2014-06-23 19:56:07 -0400] gyoza: im excited:P
[2014-06-23 19:56:17 -0400] gzilla: my ruby block basically determines if the last octet of the IP address is less than 127.  If it is, I need to create a file
[2014-06-23 19:56:31 -0400] gyoza: keeps hanging pulling all the json though,...
[2014-06-23 19:56:32 -0400] freerobby: Are there any bets practices or workarounds for using test-kitchen with recipes that compile big executables?
[2014-06-23 19:56:53 -0400] matti: gzilla: You can notify any resource you want.
[2014-06-23 19:57:29 -0400] gzilla: matti:  yeah im figuring it out
[2014-06-23 19:57:34 -0400] matti: gzilla: And you don't need to emply entire ruby_block to figure out the last IP details. Some small helper on the side would do.
[2014-06-23 19:59:15 -0400] gzilla: matti:  well its more than just that.  it also has to parse the first 3 octets.  I'll get it.
[2014-06-23 19:59:28 -0400] squaresurf: freerobby: if you find a good way to test that I'm interested since on of my boxes compiles nodejs and that can take quite a bit of time to test.
[2014-06-23 19:59:39 -0400] matti: gzilla: OK, no problem.
[2014-06-23 19:59:58 -0400] matti: gzilla: Just saying that you can do Ruby-code everywhere no only in the ruby_block resource ;]
[2014-06-23 20:00:26 -0400] matti: gzilla: Unless you need to get it evaluated during the convergance in order, etc.
[2014-06-23 20:00:31 -0400] shlant: how do I point knife bootstrap to a node.json file?
[2014-06-23 20:00:48 -0400] gzilla: matti:  ahh yeah I probably should do that anyway - this way I dont need to notify, just stick it inline and if X, run my resource.
[2014-06-23 20:01:40 -0400] matti: gzilla: You could then not_if/only_if ;)
[2014-06-23 20:01:58 -0400] gzilla: matti:  yep.  probably much easier.
[2014-06-23 20:13:19 -0400] squaresurf: I want to start some work on ohai and I can't get the rspec to past on latest master.
[2014-06-23 20:13:24 -0400] squaresurf: I'm using a macbook pro.
[2014-06-23 20:13:36 -0400] squaresurf: I've ran `bundle install` and `rspec`
[2014-06-23 20:13:45 -0400] squaresurf: Is there something else I need to do to get the tests to pass?
[2014-06-23 20:18:21 -0400] froolie: Hey all. Any advice on how to download a file only if it has changed, in a dynamic manner (i.e. the file will change frequently)?
[2014-06-23 20:18:46 -0400] froolie: Using checksum with remote_file seems to only work if you're expecting a static file since you define the checksum in an attributes file
[2014-06-23 20:19:27 -0400] froolie: and I used http_request If-Modified-Since headers, but they're not working right because they're loking for the remote file before it's been downloaded
[2014-06-23 20:19:33 -0400] froolie: I only want to download if it
[2014-06-23 20:19:36 -0400] froolie: 's changed
[2014-06-23 20:20:09 -0400] freerobby: squaresurf: I'll let you know if I hear of anything. All I can think of is pre-compiling it in a base image.
[2014-06-23 20:21:08 -0400] squaresurf: freerobby: that does work or you could include it in a custom vagrant box, but that doesn't necessarily test the build process if chef manages that for you.
[2014-06-23 20:21:56 -0400] matti: froolie: And how do you know it has changed?
[2014-06-23 20:21:56 -0400] squaresurf: I honestly can't think of anything that I would really want to skip. If you want quick feedback you could use chef spec, then use test kitchen for a full integration test.
[2014-06-23 20:22:52 -0400] squaresurf: froolie: could you add a guard to remote_file?
[2014-06-23 20:23:19 -0400] squaresurf: generate the checksum locally then grab the header and compare.
[2014-06-23 20:24:59 -0400] froolie: matti: well, I was trying to use the http header to compare it against a file. Essentially, do a header request, if there is a file foo.tar.gz in /tmp do a comparison on modified time, and then notify the remote_file resource
[2014-06-23 20:25:11 -0400] froolie: I took it from the remote_file page on Opscode's site
[2014-06-23 20:25:40 -0400] squaresurf: I figured out my q about ohai rspec. I guess I should have read the README :)
[2014-06-23 20:25:51 -0400] froolie: http://docs.opscode.com/chef/resources.html#remote-file pretty much verbatim. the section Transfer a file only when the source has changed
[2014-06-23 20:27:12 -0400] froolie: squaresurf: like calculate the checksum on the fly and store it as a variable, and do the same to the existing file and compare the two?
[2014-06-23 20:28:04 -0400] squaresurf: froolie: yeah, get the checksum from the file for the current state, then grab the url headers and compare the two checksums.
[2014-06-23 20:28:36 -0400] squaresurf: Do you know about only_if and the not_if guards?
[2014-06-23 20:28:56 -0400] squaresurf: http://docs.opscode.com/resource_common.html#guards
[2014-06-23 20:29:16 -0400] squaresurf: You could write ruby code to do that as a part of your remote_file resource.
[2014-06-23 20:32:36 -0400] froolie: squaresurf: yes, I had seen that. Wasn't relevant to my original (failed) approach but now that I'm back to the drawing board, that's a good reminder. Thanks.
[2014-06-23 20:32:51 -0400] squaresurf: Sure thing :)
[2014-06-23 20:53:48 -0400] gyoza: hey who was here that was using ice?
[2014-06-23 20:53:51 -0400] gyoza: from netflix?
[2014-06-23 20:54:39 -0400] nico__: not me - but I see they posted some changes today - any idea if they finally removed the external dependency on highchart?  it's the only reason we don't use it - because all we need it for is internal usage tracking and don't want to pay licensing for it
[2014-06-23 20:54:52 -0400] nico__: *it being highchart
[2014-06-23 20:55:08 -0400] gyoza: ya
[2014-06-23 20:55:15 -0400] gyoza: Im trying to figure out how to bind on to a real ip
[2014-06-23 20:55:16 -0400] gyoza: not localhost
[2014-06-23 20:55:20 -0400] gyoza: i think its all done in java
[2014-06-23 20:55:34 -0400] gyoza: i could always setup a nginx proxy
[2014-06-23 20:55:36 -0400] gyoza: but that is GHETTO
[2014-06-23 21:02:00 -0400] gyoza: i htink i got it
[2014-06-23 21:02:03 -0400] gyoza: Its all in grails
[2014-06-23 21:04:53 -0400] gleam: typically you would proxy it
[2014-06-23 21:05:20 -0400] gleam: that seems to be the model for the vast majority of java web apps
[2014-06-23 21:05:33 -0400] gyoza: fucking java
[2014-06-23 21:05:38 -0400] gyoza: lol
[2014-06-23 21:05:54 -0400] gyoza: it appears that -Dserver.host doesnt work
[2014-06-23 21:06:42 -0400] gyoza: lame
[2014-06-23 21:06:46 -0400] gyoza: -Dserver.port works
[2014-06-23 21:08:33 -0400] gyoza: ls
[2014-06-23 21:08:35 -0400] gyoza: errr
[2014-06-23 21:15:01 -0400] gyoza: i think its in the catalinaconf fyi
[2014-06-23 21:15:05 -0400] gyoza: (should have known)
[2014-06-23 21:15:20 -0400] gyoza: nevermind lol
[2014-06-23 21:21:11 -0400] gyoza: its the grails-app/conf/BuildConfig.groovy
[2014-06-23 21:21:13 -0400] gyoza: file
[2014-06-23 21:27:25 -0400] gyoza: got ice working aww yea
[2014-06-23 21:27:28 -0400] gyoza: but it doesnt show tags:(
[2014-06-23 21:31:26 -0400] gyoza: yes it does:(
[2014-06-23 21:31:29 -0400] gyoza: lol
[2014-06-23 21:40:06 -0400] andy: is there a way to expand the run_list without running chef-client?
[2014-06-23 21:40:18 -0400] Ash: add spaces
[2014-06-23 21:40:22 -0400] Ash: run _ list
[2014-06-23 21:40:52 -0400] davidordave: lol, that took me a second
[2014-06-23 21:41:07 -0400] Ash: ;)
[2014-06-23 21:41:14 -0400] andy: :)
[2014-06-23 21:42:12 -0400] andy: my situation is, when I assign the run_list to a node and do a show node it doesn't show the roles under Roles tag and also doesn't show all the recipes for the role that is in the run list under recipes tag
[2014-06-23 21:42:35 -0400] davidordave: perhaps search is the answer? http://docs.opscode.com/essentials_search.html
[2014-06-23 21:43:11 -0400] andy: the roles tag and recipes tag is updated after the chef-client run
[2014-06-23 21:44:49 -0400] davidordave: hmm, good point, didn't fully grasp your use case.
[2014-06-23 21:46:16 -0400] andy: i am searching for set of nodes based on recipes
[2014-06-23 21:46:40 -0400] andy: the recipes are part of the run list that updated on chef-server only after chef-client run
[2014-06-23 21:46:44 -0400] andy: so my search fails
[2014-06-23 21:46:48 -0400] andy: during the run
[2014-06-23 21:52:03 -0400] andy: any idea?
[2014-06-23 21:55:55 -0400] gyoza: netflix Ice, is pretty damn sweet
[2014-06-23 22:08:36 -0400] gyoza: anybody know how to get the detailed aws billing to run manually?
[2014-06-23 22:47:20 -0400] mbf: hi all
[2014-06-23 23:03:18 -0400] nkts: will chef-zero pick my connfigs if my roles and environments are in *.rb files?
[2014-06-23 23:06:02 -0400] cheeseplus: nkts: I don't have a definitive link but I seem to recall this being true
[2014-06-23 23:08:30 -0400] nkts: cheeseplus: thanks
[2014-06-23 23:09:38 -0400] cheeseplus: nkts: sorry, what I meant was they have to be json
[2014-06-23 23:10:10 -0400] cheeseplus: I read your initial question wrong, all the examples are json and moreover I recall someone saying it had to be json at present
[2014-06-23 23:10:21 -0400] cheeseplus: json all the way down anyway
[2014-06-23 23:11:42 -0400] squaresurf: There isn't a link to sign the CLA on the blog post: http://www.getchef.com/blog/2014/06/23/changes-to-the-contributor-license-agreement-process/
[2014-06-23 23:11:57 -0400] squaresurf: Is the link in the ohai repo README the latest?
[2014-06-23 23:12:09 -0400] squaresurf: I've never signed and I don't want to have to sign twice.
[2014-06-23 23:13:33 -0400] cheeseplus: squaresurf: the links are there when you sign into Supermarket
[2014-06-23 23:14:45 -0400] cheeseplus: er not links themselves but it's available once you've signed in from the top right where your username is
[2014-06-23 23:15:00 -0400] squaresurf: Ah, right on.
[2014-06-23 23:15:02 -0400] squaresurf: Thank you.
[2014-06-23 23:17:54 -0400] cheeseplus: np
[2014-06-23 23:18:07 -0400] cheeseplus: I was just going to sign it but then realized I don't have to anymore ;)
[2014-06-23 23:26:24 -0400] icarus: can anyone think of a good way to export a solo.rb and dna.json from a Vagrantfile that is using chef-solo to provision?
[2014-06-23 23:49:02 -0400] xUltra: Some time ago, something broke my ability to detect attributes provided by a custom Ohai plugin. When I locally run a 'ohai -d /etc/ch...' on the node it provides the attribute and works perfectly, however during the chef-client run it disappears. Any ideas?
[2014-06-23 23:49:42 -0400] xUltra: This *use* to work, at this point I think it broke during an upgrade of the client and/or chef server.
[2014-06-23 23:49:58 -0400] squaresurf: What version of chef are you running?
[2014-06-23 23:51:13 -0400] xUltra: 11.10.4-1 client
[2014-06-23 23:51:42 -0400] xUltra: server is 11.0.11-1
[2014-06-23 23:52:12 -0400] xUltra: So that's not yet version 7 of ohai, AFAIK.
[2014-06-23 23:52:46 -0400] xUltra: Yeah, the ohai version appears to be 6.20.0

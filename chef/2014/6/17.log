[2014-06-17 00:00:51 -0400] JoshZ_: aweome!! also under the machine resource chef_environment "name" is the right format..
[2014-06-17 00:01:08 -0400] JoshZ_: jkeiser: Thanks alot! Ill have more questions soon im sure! thank you!!!
[2014-06-17 00:01:19 -0400] jkeiser: No problem!
[2014-06-17 00:01:42 -0400] jkeiser: I think I got annoyed at the ... versatility ... of the word "environment" and wanted to lock it down to something more specific
[2014-06-17 00:03:36 -0400] JoshZ_: jkeiser: ps I think changing the chef env on existing AWS nodes created duplicates...
[2014-06-17 00:03:45 -0400] JoshZ_: Ill test more on that tomorrow...
[2014-06-17 00:04:22 -0400] jkeiser: JoshZ_: I strongly suspect you are seeing something different--the chef environment shouldn't allow you to even create a duplicate node, much less a server--but I'm eager to hear what it is
[2014-06-17 00:04:49 -0400] jkeiser: JoshZ_: even if problems aren't due directly to metal finding out what people are running into may give me ideas for things to make it easier
[2014-06-17 00:05:50 -0400] JoshZ_: ok Ill test more tomorrow.. that is running off of chef-client -z so I will play with it more tomorrow and see if it is a chef-zero issue or something on my side. thanks again!
[2014-06-17 00:05:59 -0400] ICantCook: I'm having issues with Chef again.  When I try to upload a cookbook, I get:
[2014-06-17 00:06:00 -0400] ICantCook: ERROR: The data in your request was invalid
[2014-06-17 00:06:11 -0400] ICantCook: Response: Cannot update sandbox 00000000000057994d8117fa02cdf644: the following checksums have not been uploaded: 0decfc6ecd6e27f88d8a64a20e4b2f06, 0f5c1c7b110d6557c9df2ca2da6b6be5,
[2014-06-17 00:06:18 -0400] kbarry: coderanger: can you offer me a freebee on the syntax for "members" when I have multiple members for the group.
[2014-06-17 00:10:20 -0400] ICantCook: This happens when I try to upload any cookbook (but different checksums are displayed for each of them.
[2014-06-17 00:10:35 -0400] ICantCook: I've tried clearing out the following postgresql tables:
[2014-06-17 00:10:38 -0400] ICantCook: checksums
[2014-06-17 00:10:39 -0400] ICantCook: cookbooks
[2014-06-17 00:10:45 -0400] ICantCook: sandboxed_checksums
[2014-06-17 00:11:00 -0400] ICantCook: cookbook_versions
[2014-06-17 00:11:05 -0400] ICantCook: cookbook_version_checksums
[2014-06-17 00:18:39 -0400] shlant: is there a tool for provisioning a ec2 instance with knife and then bootstrapping with solo?
[2014-06-17 00:20:28 -0400] ICantCook: It looks like the checksums get added to the sandbox_checksums table before the upload fails.
[2014-06-17 00:24:50 -0400] coderanger: kbarry: members ['one', 'two']
[2014-06-17 00:25:42 -0400] kbarry: I seem to be hading some trouble with the syntax. It works with 1, but when I have more than one, i'm getting an error
[2014-06-17 00:25:57 -0400] kbarry: about no ids being mapped
[2014-06-17 00:26:38 -0400] coderanger: kbarry: Hmm, I'm not familiar enough with the windows side of things to know that error, but thats the chef syntax
[2014-06-17 00:26:49 -0400] coderanger: shlant: knife-ec2?
[2014-06-17 00:27:06 -0400] maniacal: shlant: not 100% sure about knife-ec2 but knife-vsphere just runs a bootstrap script which could do anything you want.
[2014-06-17 00:27:17 -0400] maniacal: so I imagine knife-ec2 does the same
[2014-06-17 00:27:28 -0400] KostyaSha: how edit issue in jira?
[2014-06-17 00:27:31 -0400] coderanger: ICantCook: if you cleaned out those tables, make sure you clean out the bookshelf data folder
[2014-06-17 00:27:41 -0400] rbowlby: anyone have a link to getting vagrant provisioner working with chef-zero and chef-client, in place of chef-solo provisioner?
[2014-06-17 00:27:50 -0400] coderanger: KostyaSha: I'm not sure non-employees have permissions to do that
[2014-06-17 00:28:03 -0400] KostyaSha: why?
[2014-06-17 00:28:13 -0400] coderanger: KostyaSha: Because chef isn't an open source project?
[2014-06-17 00:28:27 -0400] KostyaSha: ah, yes, i forgot
[2014-06-17 00:28:38 -0400] coderanger: KostyaSha: Also it is moot since Jira is getting set to read-only shortly
[2014-06-17 00:28:47 -0400] coderanger: KostyaSha: (in favor of github issues)
[2014-06-17 00:29:11 -0400] KostyaSha: really?
[2014-06-17 00:29:20 -0400] coderanger: Announced a few hours ago, yeah
[2014-06-17 00:29:33 -0400] KostyaSha: jira is more convinient and free for foss projects
[2014-06-17 00:30:16 -0400] coderanger: KostyaSha: Don't me starting, I'm already pissed about the state of things
[2014-06-17 00:30:20 -0400] coderanger: er, don't get me started
[2014-06-17 00:30:29 -0400] coderanger: see, can't even type :) (not that that's anything new)
[2014-06-17 00:31:46 -0400] KostyaSha: i tried to use chef after 2y of idle and already not happy with weird issues
[2014-06-17 00:31:47 -0400] ICantCook: coderanger: Thanks for the tip.  I had done this but it lead me to check, I had the wrong filesystem permissions for that directory because I recreated it as root.  I had to chown it back to chef_sever (on CentOS 6).
[2014-06-17 00:32:10 -0400] coderanger: ICantCook: That would do it :)
[2014-06-17 00:42:04 -0400] KostyaSha: coderanger, do you know any issue for it https://github.com/opscode/chef/commit/43464b477554908940ce0dc5fa995bd056b4cf30 ?
[2014-06-17 00:42:50 -0400] coderanger: will look in a bit, have a puking dog to deal with again
[2014-06-17 00:42:54 -0400] coderanger: \o/
[2014-06-17 00:42:59 -0400] coderanger: the joys of working from home
[2014-06-17 00:43:15 -0400] KostyaSha: :)
[2014-06-17 01:01:10 -0400] coderanger: KostyaSha: Okay, what do you mean re: issues? That patch is correct
[2014-06-17 01:07:37 -0400] Aj_: Hello, I was wondering if anyone had a good link for installing a Certificate in Windows with Chef? I've tried using Import-PfxCertificate to no avail. It works when I run it as a powershell script via poweshell.
[2014-06-17 01:11:26 -0400] coderanger: Aj_: Hmm, what error do you get from the powershell resouce?
[2014-06-17 01:18:00 -0400] Aj_: coderanger: I don't get any errors back just   * powershell_script[pss_install_cert_p7b] action run     - execute "powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPoli cy RemoteSigned -InputFormat None -File "C:/Users/aj/AppData/Local/Temp/chef -script20140616-4324-ruy4ja.ps1"
[2014-06-17 01:19:01 -0400] Aj_: coderanger: been trying to figure out how to debug, but so far I haven't gotten anywhere. Gonna try looking into "MixIn" in a bit
[2014-06-17 01:19:13 -0400] coderanger: Aj_: chef-client -l debug
[2014-06-17 01:20:48 -0400] Aj_: coderanger: returns the same output
[2014-06-17 01:21:16 -0400] Aj_: coderanger: here's what I'm running powershell_script "pss_cert_p7b" do   cwd Chef::Config[:file_cache_path]   code <<-EOH $mypwd = ConvertTo-SecureString -String "1" -Force AsPlainText $Import-PfxCertificate -FilePath "c:\\windows\\temp\\cert.pfx" cert:\\localMachine\\my -Password $mypwd   EOH end
[2014-06-17 01:22:46 -0400] lyken: ugh, that looks like windows.. *shudders*
[2014-06-17 01:23:42 -0400] daxroc: Evening all
[2014-06-17 01:24:34 -0400] daxroc: I've a few questions around chef patterns. With library cookbooks is the stance that they shouldn't contian recipes other than an empty default.rb ?
[2014-06-17 01:26:08 -0400] coderanger: Aj_: Sorry, not super familiar with windows-y things, I would recommend asking on the mailing list, adam edwards watches that pretty closely and knows about all this
[2014-06-17 01:26:23 -0400] coderanger: daxroc: Depends on how useful a default would be
[2014-06-17 01:26:39 -0400] coderanger: daxroc: I try to include a recipe to serve as a common-case default and example
[2014-06-17 01:27:10 -0400] Aj_: coderanger: do you have a link for the mailing lists?
[2014-06-17 01:27:48 -0400] coderanger: http://lists.opscode.com
[2014-06-17 01:28:09 -0400] coderanger: Specifically http://lists.opscode.com/sympa/info/chef
[2014-06-17 01:29:05 -0400] Aj_: coderanger: thank you so much. I appreciate your help.
[2014-06-17 01:30:20 -0400] coderanger: Aj_: No problem, if I had to guess you need to be running powershell with some special permission or flag to let it access the cert store APIs
[2014-06-17 01:47:47 -0400] p3rror: hello
[2014-06-17 01:47:57 -0400] p3rror: In the chef server
[2014-06-17 01:48:05 -0400] p3rror: I need to configure a client
[2014-06-17 01:48:13 -0400] p3rror: So in web site
[2014-06-17 01:48:15 -0400] p3rror: Client: chef-validator
[2014-06-17 01:48:25 -0400] p3rror: I can not generate RSA private key
[2014-06-17 01:48:36 -0400] p3rror: all I have when I clicked on Show is Public Key
[2014-06-17 01:54:23 -0400] daxroc: coderanger: So default as an example would be ok, Am I sane in thinking they should never appear on a run_list *exception being development
[2014-06-17 01:55:05 -0400] coderanger: p3rror: Are you using hosted chef or open source?
[2014-06-17 01:55:16 -0400] coderanger: daxroc: Yeah, thats not uncommon
[2014-06-17 01:56:01 -0400] daxroc: Do you know if there is a definitive definitions created for the community patterns ?
[2014-06-17 01:58:02 -0400] daxroc: coderanger: With library, do you see libraries as the 'hwrp' or as reusable functions to be required in multiple recipes?
[2014-06-17 01:58:10 -0400] p3rror: coderanger, opensource
[2014-06-17 01:58:29 -0400] coderanger: daxroc: Nope, just a few of us that ramble about it
[2014-06-17 01:59:05 -0400] coderanger: daxroc: I generally divide library cookbooks into normal resource-containing cookbooks and rarely special DSL-extension cookbooks
[2014-06-17 01:59:21 -0400] coderanger: p3rror: Are you trying to reset the validator key or create a new client?
[2014-06-17 01:59:32 -0400] p3rror: create a new client
[2014-06-17 02:00:11 -0400] coderanger: okay, knife client create is what you want
[2014-06-17 02:00:24 -0400] coderanger: if this is going to be for a human, add the --admin flag
[2014-06-17 02:00:39 -0400] coderanger: admin lets the client do updates and deletes, otherwise it is generally read-only
[2014-06-17 02:00:51 -0400] coderanger: (though not exclusively)
[2014-06-17 02:00:57 -0400] daxroc: So an application cookbook that has reusable resources/providers could be called a hybrid of an app/lib depending on the use case ?
[2014-06-17 02:01:24 -0400] coderanger: daxroc: Yep, an example would be my balanced-ci cookbook, it has both its own resource subclasses and then uses them
[2014-06-17 02:02:05 -0400] daxroc: but in that use case it's an application cookbook but can be used as a library
[2014-06-17 02:02:44 -0400] p3rror: coderanger, I need to create client from web
[2014-06-17 02:02:57 -0400] p3rror: coderanger, this is my first contact with chef
[2014-06-17 02:04:02 -0400] coderanger: p3rror: You should not be using the Open Source web interface, it is deprecated and will be removed in a future version. If you want a web interface, one is available with the paid enterprise chef product
[2014-06-17 02:04:18 -0400] digitalchild: embrace CLI !
[2014-06-17 02:04:26 -0400] coderanger: p3rror: The way to setup your first client is to grab the /etc/chef-server/admin.pem key from the server, and use that to create a client for yourself
[2014-06-17 02:04:37 -0400] coderanger: p3rror: I can walk you through it in a moment once I go fluff my rice
[2014-06-17 02:04:58 -0400] coderanger: daxroc: Yeah, I would say its just an application cookbook since its a superset at that point
[2014-06-17 02:05:34 -0400] coderanger: daxroc: All (good) cookbooks have library-ish abstractions, a purely library oriented cookbook is just one that doesn't specifically use it
[2014-06-17 02:08:21 -0400] daxroc: Yeah, I'm finding it more common to see the hybrid app/lib
[2014-06-17 02:08:58 -0400] daxroc: if the data-driven app suits your use case greate, but hey if you need to use it as a library
[2014-06-17 02:10:08 -0400] p3rror: coderanger, what I have to do with admin.pem
[2014-06-17 02:10:31 -0400] coderanger: daxroc: You are on the right track :)
[2014-06-17 02:10:52 -0400] coderanger: daxroc: The exact boundary is fuzzy at best, and mostly depends on intent and who is using it
[2014-06-17 02:11:24 -0400] daxroc: For most the app is enough but for the controll freaks the lib is a must have
[2014-06-17 02:11:54 -0400] daxroc: that's a little harsh 'control freaks' but ...
[2014-06-17 02:13:11 -0400] coderanger: p3rror: Okay, so copy that admin.pem file to your computer and then run this command
[2014-06-17 02:13:28 -0400] daxroc: When would you consider moving an lwrp to an lib. Do you know of any solid examples where it did occur ?
[2014-06-17 02:14:13 -0400] coderanger: p3rror: knife client create -k /path/to/admin.pem -u admin -r ~/.chef/$USERNAME.pem -a $USERNAME
[2014-06-17 02:14:20 -0400] coderanger: daxroc: I do that for 100% of mine :)
[2014-06-17 02:14:27 -0400] coderanger: daxroc: See also: Poise
[2014-06-17 02:14:55 -0400] coderanger: daxroc: LWRPs are handy in a punch, but not a good abstraction since they can't be extended without a lot of hackery
[2014-06-17 02:15:03 -0400] p3rror: coderanger, what is USERNAME
[2014-06-17 02:15:29 -0400] coderanger: p3rror: It can be anything, though it you just run that as written it will be your local system username (unless you are on windows)
[2014-06-17 02:15:41 -0400] daxroc: coderanger: so they should be a used as a POC ? and refactored to 'hwrp'
[2014-06-17 02:16:14 -0400] coderanger: daxroc: ex. all of these https://github.com/poise/jenkins/tree/master/libraries
[2014-06-17 02:17:11 -0400] p3rror: coderanger, Error: invalid option: -r
[2014-06-17 02:17:27 -0400] coderanger: p3rror: Sorry, that should be -f, typo'd
[2014-06-17 02:17:42 -0400] coderanger: Thats the file to write your newly created user key in to
[2014-06-17 02:20:18 -0400] alexras: hi all; Im using Vagrant with the chef-solo provisioner, and its running chef-solo once for each recipe in my runlist. any idea if this is a Vagrant-specific thing or something Im doing wrong with chef?
[2014-06-17 02:21:23 -0400] alexras: the thing thats weird is that its running all four recipes every time; I would expect it to run each recipe once, unless Im fundamentally misunderstanding something
[2014-06-17 02:21:37 -0400] p3rror: coderanger, ERROR: Connection refused connecting to https://localhost/clients/mezgani, retry 1/5
[2014-06-17 02:22:02 -0400] coderanger: p3rror: Do you have a knife.rb setup?
[2014-06-17 02:22:12 -0400] coderanger: Well, let me say that again, guessing you don't :)
[2014-06-17 02:22:44 -0400] coderanger: p3rror: You'll want to create a file ~/.chef/knife.rb
[2014-06-17 02:23:49 -0400] p3rror: coderanger, how that
[2014-06-17 02:24:20 -0400] coderanger: sec, grabbing my default one
[2014-06-17 02:24:22 -0400] coderanger: http://hastebin.com/usudicifoq.rb
[2014-06-17 02:24:32 -0400] coderanger: Thats my standard one, make sure you customize the chef_server_url
[2014-06-17 02:30:18 -0400] daxroc: coderanger with the base pattern. where should the version be pinned ? in the environment(file/cookbook) | role_cookbook ?
[2014-06-17 02:31:05 -0400] coderanger: daxroc: individual cookbooks should make sure they put accurate constraints on their dependencies, and then pin top-level cookbooks as needed in either env files or env cookbooks as you prefer
[2014-06-17 02:32:19 -0400] daxroc: sorry for the interrogation here :D
[2014-06-17 02:33:22 -0400] coderanger: No problem, also as a reminder, I offer training and consulting on these kinds of advanced chef questions
[2014-06-17 04:26:18 -0400] EricL: Anyone with nagios cookbook experience still around?
[2014-06-17 04:26:53 -0400] EricL: I'm getting hostgroup member lines that are just commas. Any thoughts as to why that might be happening?
[2014-06-17 07:08:29 -0400] Zhann_: anyone know why my ohai data does not show filesystem data when called from a cron (as root), but does so when called manually?
[2014-06-17 07:16:34 -0400] Zhann_: nvm, found it, was a chef embedded ohai versus system gem ohai issue
[2014-06-17 07:16:36 -0400] coderanger: Zhann_: Probably means one of the subprocs chef is trying to run doesn't work without some env var that cron doesn't have
[2014-06-17 07:17:25 -0400] Zhann_: thanks coderanger, but it's fixed now. had 2 different ohai versions on the system >_<
[2014-06-17 07:32:50 -0400] antu: Hi ! I am trying to configure Chef client-server setup. Commands like 'Knife client list' or 'Knife user list'  works fine. But I am getting 'Connection Refused' error while uploading the cookbook  Any idea on what could be wrong ? Thanks..
[2014-06-17 07:41:51 -0400] coderanger: antu: Make sure bookshelf is running on server
[2014-06-17 07:51:28 -0400] coderanger: antu_: Oh, the _ was throwing me off :)
[2014-06-17 07:51:44 -0400] coderanger: So you can use `chef-server-ctl status` to check on subservices
[2014-06-17 07:52:22 -0400] antu_: I did. and it seems it is running.
[2014-06-17 07:59:39 -0400] antu_: @coderanger :I just restarted all the subservices.. but still getting the same error.
[2014-06-17 08:00:36 -0400] coderanger: Can you run knife with -vv and post the full error debug data?
[2014-06-17 08:05:07 -0400] antu_: @coderanger ; Is it just -V or -vv ? -vv is just returning the version..
[2014-06-17 08:05:50 -0400] coderanger: Sorry, yes, I just meant double verbose
[2014-06-17 08:12:57 -0400] antu_: @coderanger :
[2014-06-17 08:13:01 -0400] antu_: root@CHEF123:/ws# knife cookbook upload -a -o /usr/local/src/chef/cookbooks -V Uploading cookbook-test [0.1.0] INFO: Validating ruby files INFO: Validating templates INFO: Syntax OK INFO: Saving cookbook-test INFO: Uploading files INFO: Uploading /usr/local/src/chef/cookbooks/cookbook-test/recipes/default.rb (checksum hex = 7993ee810e69fad09d30b537605413d0) to https://CHEF123:443/bookshelf/organization-00000000000000000000000000000000/c
[2014-06-17 08:13:48 -0400] Breaking_Pitt: I'm getting this error when bootstrapping a client
[2014-06-17 08:13:50 -0400] Breaking_Pitt: ERROR: Errno::EADDRNOTAVAIL: Can't assign requested address - connect(2)
[2014-06-17 08:14:10 -0400] Breaking_Pitt: Do you have some info abou his?
[2014-06-17 08:14:15 -0400] Breaking_Pitt: about this?
[2014-06-17 08:15:01 -0400] itwasntandy: Breaking_Pitt: do you have functioning network?
[2014-06-17 08:15:10 -0400] Breaking_Pitt: yes itwasntandy
[2014-06-17 08:15:15 -0400] Breaking_Pitt: I can ssh to the machine
[2014-06-17 08:15:26 -0400] itwasntandy: right, but on the machine can you curl http://www.google.com for example
[2014-06-17 08:15:47 -0400] antu_: @coderanger INFO: Uploading /usr/local/src/chef/cookbooks/cookbook-test/metadata.rb (checksum hex = c204a8a9a62b4aacdcff8e58fb1ec523) to https://CHEF123:443/bookshelf/organization-00000000000000000000000000000000/checksum-c204a8a9a62b4aacdcff8e58fb1ec523?AWSAccessKeyId=b5b7d7af28d9892f447977fdba6f7e7cb43ad8a2&Expires=1402992907&Signature=/NDY775eSj9x35wVORFe2r6iNeM%3D INFO: Uploading /usr/local/src/chef/cookbooks/cookbook-test/README.md
[2014-06-17 08:16:06 -0400] Breaking_Pitt: yes itwasntandy  I can do a curl without problems
[2014-06-17 08:27:23 -0400] bugoff: anyone using embed ohai gem in a ruby script ?
[2014-06-17 08:28:28 -0400] bugoff: i created a script wich show me the disk usage for the filesystems
[2014-06-17 08:28:43 -0400] bugoff: i get output when i run it from the cli
[2014-06-17 08:28:58 -0400] bugoff: but when i run it from a cronjob it gives me no output
[2014-06-17 08:29:41 -0400] coderanger: bugoff: you can run it with `-l debug` to get debugging output
[2014-06-17 08:39:49 -0400] yml: [o__o]: ping
[2014-06-17 08:39:50 -0400] [o__o]: Are you in need of my services, yml?
[2014-06-17 08:44:15 -0400] coderanger: maniac: the validator key is how the newly bootstrapped node registers with the chef server
[2014-06-17 08:49:57 -0400] maniac: coderanger, ok that strings comes from my knife.rb file  but when i comment it it takes default value /etc/chef/validation.pem which is incorrect for windows
[2014-06-17 08:50:47 -0400] maniac: i worked with linux and chef many times but didn't have experience with windows based machines
[2014-06-17 08:50:52 -0400] coderanger: maniac: The path in knife.rb should just be local
[2014-06-17 08:52:00 -0400] coderanger: maniac: during the boostrap it gets copied to the remote system for you
[2014-06-17 08:53:05 -0400] maniac: yeah that's should be happening
[2014-06-17 08:53:13 -0400] maniac: but for some reason it doesnt do thath
[2014-06-17 08:53:31 -0400] maniac: sorry let me check ince again
[2014-06-17 08:53:35 -0400] maniac: maybe path incorrect
[2014-06-17 08:54:06 -0400] maniac: sorry
[2014-06-17 08:54:14 -0400] maniac: was incorrect path =(
[2014-06-17 08:58:35 -0400] antu: @coderanger : I have placed the -VV log at http://textuploader.com/k12e . Could you please take a look
[2014-06-17 08:58:38 -0400] maniac: coderanger, thanks for a help  without it i would spent for about 20-30 minutes more i guess
[2014-06-17 09:01:10 -0400] coderanger: antu: Bookshelf definitely seems to be the part having issues, but it is 2AM here and I need to go (try to) sleep soon
[2014-06-17 09:01:21 -0400] coderanger: antu: I would try just restarting the machine
[2014-06-17 09:01:24 -0400] coderanger: maniac: No prob
[2014-06-17 09:02:08 -0400] antu_: ok. Thanks
[2014-06-17 09:33:52 -0400] dorongutman: hey guys
[2014-06-17 09:34:17 -0400] dorongutman: Ive asked this in #vagrant as well, but wanted to add some more voices and opinions - http://stackoverflow.com/questions/24260126/conditionally-provision-vagrant-provision-on-vagrant-up
[2014-06-17 09:34:30 -0400] dorongutman: specifically because Im using chef-solo
[2014-06-17 09:37:46 -0400] srenatus: dorongutman: just deleted my comment, didn't pick up the chef-solo part from the SO question
[2014-06-17 09:37:59 -0400] srenatus: (yes, there's a fat tag on the question...)
[2014-06-17 09:38:42 -0400] dorongutman: srenatus: it was so fast - I didnt even notice there was a comment.
[2014-06-17 09:39:01 -0400] dorongutman: anyways - I edited the question to have chef-solo in it as well :-)
[2014-06-17 09:40:04 -0400] srenatus: dorongutman: I think my comment still stays the same though, just run chef-solo every time.  it's simple ;)
[2014-06-17 10:29:08 -0400] mwalton: Hello
[2014-06-17 10:30:04 -0400] mwalton: has anywone come accross this error occuring when both the chef client and chef server clocks  are in sync with npt?
[2014-06-17 10:30:05 -0400] mwalton: Failed to authenticate to the chef server (http 401).
[2014-06-17 10:30:05 -0400] mwalton: The request failed because your clock has drifted by more than 15 minutes.
[2014-06-17 10:30:06 -0400] mwalton: Syncing your clock to an NTP Time source should resolve the issue.
[2014-06-17 12:06:50 -0400] whiteadam: weeee
[2014-06-17 12:08:01 -0400] whiteadam: Anyone know if there's like a general devops channel on freenode?
[2014-06-17 12:08:18 -0400] rsavage: #devops? :)
[2014-06-17 12:08:42 -0400] whiteadam: rsavage: Heh, yeah I was in there, just curious if it might be hidden... like #roflcopter
[2014-06-17 12:08:55 -0400] matti: LOL
[2014-06-17 12:09:05 -0400] matti: It's not hidden.
[2014-06-17 12:09:10 -0400] matti: And it's ##devops :)
[2014-06-17 12:09:19 -0400] whiteadam: matti: hah, thanks Matt.
[2014-06-17 12:09:23 -0400] matti: On Freenode #name are reserved for official projects.
[2014-06-17 12:09:33 -0400] whiteadam: matti: I wondered why
[2014-06-17 12:09:44 -0400] matti: ;]
[2014-06-17 12:09:49 -0400] whiteadam: you are what i say you are matti !
[2014-06-17 12:09:50 -0400] whiteadam: :)
[2014-06-17 12:10:02 -0400] matti: Pfff.
[2014-06-17 12:10:04 -0400] matti: ;S
[2014-06-17 12:10:21 -0400] matti: whiteadam: My name is not even Matti. It's just a nickname ;]
[2014-06-17 12:10:36 -0400] polkaparty: the first rule of devops you don't talk about devops - Bill Clinton
[2014-06-17 12:10:40 -0400] whiteadam: matti: I bet your realy name is... albert!
[2014-06-17 12:10:45 -0400] matti: whiteadam: No :)
[2014-06-17 12:10:47 -0400] whiteadam: polkaparty: Sup girl
[2014-06-17 12:11:17 -0400] polkaparty: oh whiteadam you always know the right things to say ;)
[2014-06-17 12:11:38 -0400] whiteadam: polkaparty: So I just joined ##homebrew and asked a question... and someone sent me this: http://pastie.org/8745595
[2014-06-17 12:12:36 -0400] polkaparty: gorgeous, although I love me a decent package manager for mac like everyone else I have to say that brewing your own beer is far more important and I can see where he's coming from heh
[2014-06-17 12:13:00 -0400] whiteadam: Yeah, I might stay in that channel anyway...
[2014-06-17 12:13:36 -0400] whiteadam: Trying to figure out if all of the ec2-ami-tools and api tools are included in the awscli package
[2014-06-17 12:13:44 -0400] polkaparty: funny you mention homebrew, expanding on the existing homebrew cookbook ATM.
[2014-06-17 12:14:25 -0400] polkaparty: whiteadam: good question, hadn't really thought out that. I suspect they would be.
[2014-06-17 12:14:39 -0400] whiteadam: I'm trying to clean up all the crap I have in homebrew. I installed something and it installed about a billion dependencies
[2014-06-17 12:14:47 -0400] rsavage: it's funny how var = `shell command` # sometimes equals arrays and not strings ;)
[2014-06-17 12:14:56 -0400] rsavage: in ruby
[2014-06-17 12:15:32 -0400] whiteadam: rsavage: That's not funny at all. You need to get the comedy cookbook and run it.
[2014-06-17 12:15:37 -0400] srenatus: mixlib-shellout, friends.
[2014-06-17 12:15:48 -0400] polkaparty: srenatus: +1 ;)
[2014-06-17 12:16:31 -0400] rsavage: no, it's not funny :)  found out the hard way... then remembered my friend ".join", and all was well with the universe
[2014-06-17 12:30:14 -0400] phutchins: Hey all, I'm wondering if there is an accepted convention for handling a sitation I'm seeing... I am using the chef-logstash cookbook which creates a config via template. I have a wrapper cookbook thath overwrites that cookbook. Now when chef runs, the chef-logstash cookbook replaces the template with its version, then the wrapper coobkook replaces it back with its version...
[2014-06-17 12:30:33 -0400] phutchins: I know there are a couple of ways to do this like chef-rewind, but I'm wondering if there is a more elegant solution or patern.
[2014-06-17 12:40:18 -0400] Ashutosh: i need a help
[2014-06-17 12:40:44 -0400] Ashutosh: issue related to chef on multinode
[2014-06-17 12:40:54 -0400] Ashutosh: how to address multinode
[2014-06-17 13:02:26 -0400] ashutosh: How to bootstrap two nodes at once??
[2014-06-17 13:17:27 -0400] orweinberger: I've provisioned a server using a knife plugin for ec2 and added some recipes to the 'run-list'. The server is up and the receipes were installed correctly. Now I would like to install some more recipes on that already-provisioned server. How can I do that?
[2014-06-17 13:19:05 -0400] matti: Is there a way to ask Chef not to delete temporary files? I need to debug something.
[2014-06-17 13:20:32 -0400] srenatus: orweinberger: just change the run list using knife, have a chef run on the node.
[2014-06-17 13:21:24 -0400] orweinberger: srenatus, I changed the run-list and I see that it is changing on the chef server, but nothing happens on the actual remote machine. How can I tell chef to go and install the newly added recipes?
[2014-06-17 13:23:50 -0400] matti: Ah well. Let me be very inpolite and use exit! for a second ;]
[2014-06-17 13:27:05 -0400] srenatus: orweinberger: chef-client needs to run. you can make it a service (see the chef-client recipe, github.com/opscode-cookbooks/chef-client) or run it (again) yourself
[2014-06-17 13:29:47 -0400] orweinberger: So when I run the knife process intiailly and install some recipes it bootstraps chef-client on the remote machine, right? So if afterwards I update the run list for that node via knife and then connect to the remote machine and run the chef-client it should automatically sync with the chef server and install the missing recipes?
[2014-06-17 13:32:39 -0400] srenatus: orweinberger: pretty much so, yes.
[2014-06-17 13:34:57 -0400] orweinberger: thanks, i'll try that srenatus
[2014-06-17 13:39:18 -0400] orweinberger: srenatus, If I run chef-client on the provisioned server I see it does sync in front of the chef-server, but it also re-installs the already installed recipes. Is there any way of telling chef-client to only installed recipes that are not already installed?
[2014-06-17 13:42:19 -0400] iiro: orweinberger, it does fetch updates from Chef server - so the re-install (=download) should be really quick.
[2014-06-17 13:43:03 -0400] iiro: orweinberger, do you mean install as of running recipes...?
[2014-06-17 13:43:09 -0400] orweinberger: iiro, but my initial recipe (that was already installed initially) does some server configuration, like adding users which I do not wish to re-run. I just want to run whatever recipes that were added but not yet installed
[2014-06-17 13:44:23 -0400] iiro: orweinberger, I understand - but my understanding is that you need to write things so that your recipes can be re-run and nothing breaks. You can of course add checks to your custom recipes not to do stuff if something is already configured...
[2014-06-17 13:45:05 -0400] orweinberger: iiro, did not know that. I'll try and find some resources on how to check if a recipe was already installed etc..
[2014-06-17 13:45:41 -0400] iiro: orweinberger, and - for example if your recipe adds some users there - and if you change your user information - how would those changes occur if that recipe would not be re-run on every Chef-run...?
[2014-06-17 13:46:18 -0400] orweinberger: iiro, good question, it might be OK. Just thought it was weird but it might work :)
[2014-06-17 13:46:34 -0400] iiro: orweinberger, in my employees Chef setup we can run the users cookbook again and again - and it does not do anything more if there are no changes.
[2014-06-17 13:47:08 -0400] iiro: orweinberger, I understand. This is a different world than the legacy one - it has taken me time to adjust as well (and thats still in progress :D)
[2014-06-17 13:47:19 -0400] orweinberger: iiro,  ;)
[2014-06-17 13:48:39 -0400] iiro: orweinberger, installing JDKs is one example what we have done: our wrapper cookbook just checks if the "default symlink" exists when the wrapper cookbooks default recipe is run; if its found, we assume the JDK is already installed on the server (we want only to have one JDK per server installed).
[2014-06-17 13:49:07 -0400] iiro: dont know is that good or bad practise in all - but that is our use case at the moment.
[2014-06-17 13:50:04 -0400] orweinberger: Yeah my recipe installs some yum repos. When the recipe gets reinstalled it errors out.. I'll add a check to see if the repos are already there and if so I'll avoid running that action.
[2014-06-17 13:50:35 -0400] iiro: why does it error out...? sounds a bit weird...
[2014-06-17 13:51:04 -0400] iiro: there is a yum cookbook from community - I havent used it but I guess I would use that kind of stuff for installing repos
[2014-06-17 13:51:12 -0400] orweinberger: iiro, http://pastebin.com/1vg65Evf
[2014-06-17 13:51:35 -0400] orweinberger: I'm installing it via 'bash', which is bad practice I guess.
[2014-06-17 13:51:42 -0400] iiro: orweinberger, http://community.opscode.com/cookbooks/yum - check that one
[2014-06-17 13:51:54 -0400] orweinberger: iiro, thanks, i'll check it out
[2014-06-17 13:52:01 -0400] someara: https://github.com/opscode-cookbooks/yum
[2014-06-17 13:52:02 -0400] someara: https://github.com/opscode-cookbooks/yum-epel
[2014-06-17 13:52:06 -0400] someara: ^ I'd use those
[2014-06-17 13:52:08 -0400] iiro: yep
[2014-06-17 13:52:17 -0400] orweinberger: Thanks someara
[2014-06-17 14:04:21 -0400] srenatus: OMG chef-sugar has deep_fetch how could I miss this before
[2014-06-17 14:05:59 -0400] KostyaSha: coderanger, ping
[2014-06-17 14:10:02 -0400] matti: someara: Do you happen to know how to make Chef client leave temporary files behind?
[2014-06-17 14:11:38 -0400] someara: what do you mean
[2014-06-17 14:11:49 -0400] someara: like the files in /var/chef/backup?
[2014-06-17 14:11:49 -0400] matti: someara: I am trying to debug something failin on Windows.
[2014-06-17 14:11:54 -0400] matti: someara: With Powershell.
[2014-06-17 14:12:07 -0400] matti: someara: It will create a temporary file with content of the ps1 file in it and try to run.
[2014-06-17 14:12:20 -0400] matti: someara: It fails. And I want to see what is inside (try to run it manually).
[2014-06-17 14:12:33 -0400] matti: someara: But when it fails, all the temporary files are rightfully cleaned up.
[2014-06-17 14:13:13 -0400] someara: hrmm.... I'm not aware of anything off the top of my head. support@getchef.com probably has some ideas.
[2014-06-17 14:13:45 -0400] someara: I can ask around our hipchat when then west coast wakes up
[2014-06-17 14:13:56 -0400] matti: Hehe, OK :)
[2014-06-17 14:13:58 -0400] matti: Appreciated.
[2014-06-17 14:15:12 -0400] someara: I'd go poking around in the directories described in http://docs.opscode.com/config_rb_client.html
[2014-06-17 14:15:22 -0400] someara: the cache directories, etc
[2014-06-17 14:17:50 -0400] brettc: hello alll
[2014-06-17 14:19:34 -0400] brettc: Is anyone having issues installing packages after including the apt::default recipe?
[2014-06-17 14:19:41 -0400] brettc: on AWS in us-west-1
[2014-06-17 14:22:55 -0400] freerobby: Does anybody know why berks defaults to putting Gemfile.lock and Berksfile.lock in gitignore?
[2014-06-17 14:23:23 -0400] freerobby: Doesn't that ruin having canonical version references for a project?
[2014-06-17 14:30:48 -0400] anthonyacquanita: any pull methods available for bootstrapping boxes?  knife-solo, anything else?
[2014-06-17 14:35:50 -0400] pluesch0r: hi everybody. got a bit of a crisis over here. i tried upgrading our chef server from 11.0.12 to 11.1.11 earlier but ran into problems (i'm in contact with opscode about that).
[2014-06-17 14:36:09 -0400] pluesch0r: s/11.1.11/11.1.1/
[2014-06-17 14:36:39 -0400] pluesch0r: i then downgraded to 11.0.12 (as i had done before when i had problems with 11.1.0, i had hoped the issues i had would have gotten fixed in the meantime)
[2014-06-17 14:37:20 -0400] pluesch0r: anyhow. now i've got the problem that, when i access cookbooks via the webui, it says '404 "Object Not Found"'
[2014-06-17 14:37:50 -0400] pluesch0r: a client also reports 'ERROR: Net::HTTPServerException: template[/srv/tftpboot/pxelinux.cfg/menus/clonezilla] (pxeserver::clonezilla line 30) had an error: Net::HTTPServerException: 404 "Object Not Found"'
[2014-06-17 14:38:34 -0400] brettc: never mind. Needed to update the apt cookbook
[2014-06-17 14:38:57 -0400] pluesch0r: how do i fix this?
[2014-06-17 14:49:44 -0400] pluesch0r: if anyone's awake that could help with my cookbook 404 after chef-server downgrade snafu, that would be great.
[2014-06-17 14:52:24 -0400] [ilin]: hi, is it possible to use the git resource as non root user? when I use it now the repo is checked out but all files belong to root. I have specified user/group attributes in the resource
[2014-06-17 15:02:44 -0400] someara: [ilin] there's a user parameter on the resource
[2014-06-17 15:03:00 -0400] someara: group too
[2014-06-17 15:05:57 -0400] tty01: hi can someone tell me how i can do something like the following? http://pastebin.com/bmF4ctQy
[2014-06-17 15:17:20 -0400] EricL: Is tas50 on Github here on IRC?
[2014-06-17 15:26:19 -0400] gondoi: when are cookbook code reviews happening now?
[2014-06-17 15:26:31 -0400] gondoi: i have a fix provided issue that has been open for a bit
[2014-06-17 15:32:34 -0400] sarkis: it's kind of a pain handling more than one app per server when they both require nginx, also making those apps both able to provision on there own
[2014-06-17 15:33:13 -0400] sarkis: seems there will have to be duplication.. i.e. include_recipe "nginx" on both of the apps... then if i want them both on the same server, that include_recipe is called twice
[2014-06-17 15:34:09 -0400] sarkis: i guess i can keep the include_recipe nginx bit in the recipes/default.rb and have a separate recipe for just the app itself...
[2014-06-17 15:35:22 -0400] someara: gondoi I've been doing them myself asynchronously while we're focusing on getting supermarket out
[2014-06-17 15:35:28 -0400] someara: what PR on what cookbook?
[2014-06-17 15:35:51 -0400] gondoi: https://github.com/opscode-cookbooks/xml/pull/14
[2014-06-17 15:37:08 -0400] someara: merged and released as 1.2.6
[2014-06-17 15:37:30 -0400] whiteadam: Anyone know of a RHEL/Cent IPA Server/Client cookbook?
[2014-06-17 16:00:28 -0400] KostyaSha: someara, coderanger have i missed something http://docs.opscode.com/chef_solo.html#environments and https://github.com/opscode/chef/commit/43464b477554908940ce0dc5fa995bd056b4cf30 ?
[2014-06-17 16:06:03 -0400] ScottCarp: Trying to use chef to run an init script on a vm. I'm just having some trouble wrapping my head around how this happens.
[2014-06-17 16:06:48 -0400] whiteadam: ScottCarp: Like how Chef makes it happen?
[2014-06-17 16:07:16 -0400] ScottCarp: Yeah, kind of. Does Chef place the init script in /etc ?
[2014-06-17 16:07:38 -0400] whiteadam: I think the point of Chef is for it to worry about the how, you just worry about the what.
[2014-06-17 16:08:24 -0400] ScottCarp: Garbage in, garbage out. I'm confused on how to set it up to take care of the how.
[2014-06-17 16:08:40 -0400] whiteadam: ScottCarp: Maybe http://docs.opscode.com/resource_service.html can help?
[2014-06-17 16:09:23 -0400] ScottCarp: Yeah, I've read this. I just don't understand where the init script comes into play.
[2014-06-17 16:09:51 -0400] frog_: Hi! I'm trying to search ssh host keys via knife and facing this problem: knife search node "host_rsa_public:*" -a "keys.ssh.host_rsa_public" -> ERROR: TypeError: can't convert String into Integer It seams that knife/search for keys is some kind of reseverd search query (Chef-Version 11.8.0)
[2014-06-17 16:12:16 -0400] whiteadam: ScottCarp: Well, chef figures out the OS, then the service provider (like init, or xinitd, or whatever), then it sets all of the proper stuff based on the package and the OS.
[2014-06-17 16:17:56 -0400] ScottCarp: How does the init script get placed in the vm though? Do we specify path as an attribute?
[2014-06-17 16:17:58 -0400] a13x212: I currently have my passwords for mysql master and slave in individual data bag items. Any reason not to combine them into one data bag item?
[2014-06-17 16:19:29 -0400] programmerq: ScottCarp: it depends on the init script. If I want an init script for nginx, I could rely on a package manager to get it in place, and do something like: package 'nginx'
[2014-06-17 16:19:50 -0400] programmerq: and then if I want to start the service, I can use the service 'nginx' resource, which will call that init script.
[2014-06-17 16:20:11 -0400] someara:  ScottCarp there are various service providers... sysvinit, debian, solaris (SMF,svcadm), upstart, etc
[2014-06-17 16:20:28 -0400] someara: unless specified, it will select the default one try based on platform
[2014-06-17 16:20:42 -0400] ScottCarp: I see, so if we are using something custom not available from a service provider?
[2014-06-17 16:21:10 -0400] someara: then you'll have to either supply the init script(s) and select the appropriate provider
[2014-06-17 16:21:10 -0400] someara: or
[2014-06-17 16:21:29 -0400] someara: use pattern management
[2014-06-17 16:21:50 -0400] someara: which means
[2014-06-17 16:22:03 -0400] someara: you can specify start_command, stop_command, etc on the resource directly
[2014-06-17 16:22:14 -0400] someara: and "pattern" to check to see if the service is running
[2014-06-17 16:22:32 -0400] someara: which basically does a ps -rf | grep pattern to check to see if the service is running and needs to be repaired
[2014-06-17 16:24:07 -0400] cschneid: I'm seeing a really weird situation with chef vault: https://gist.github.com/cschneid/fa8fcfd2666e5d046783 -- it can find the _keys attribute in the data bag if I ask directly, but chef vault can't figure it out
[2014-06-17 16:24:17 -0400] someara: http://docs.opscode.com/resource_service.html
[2014-06-17 16:32:40 -0400] Chewi: hi. I'm working on a public cookbook and I'd like to add a user with no shell. I was going to put "/sbin/nologin" as it is on CentOS but noticed it is "/usr/sbin/nologin" on Ubuntu. I could just use good old "/bin/false" but is there a unified way of handling this? seems silly to keep repeating this logic.
[2014-06-17 16:35:09 -0400] programmerq: Chewi: perhaps a LWRP is in order-- is there someone else that may have implemented this already?
[2014-06-17 16:36:16 -0400] fusillicode1: hi guys
[2014-06-17 16:36:19 -0400] Chewi: programmerq: maybe. not sure what that would look like.
[2014-06-17 16:36:23 -0400] fusillicode1: :)
[2014-06-17 16:36:31 -0400] fusillicode1: I've a problem here :(
[2014-06-17 16:37:23 -0400] fusillicode1: I'm trying to deploy a wordpress using OpsWorks but sincerely I don't know how to properly handle the htaccess file
[2014-06-17 16:38:08 -0400] fusillicode1: I'm here because I know that opsworks just rely on chef :)
[2014-06-17 16:38:27 -0400] someara: Chefi the native user resource will let you specify parameters for shell and homedir
[2014-06-17 16:38:35 -0400] someara: er, Chewi even
[2014-06-17 16:40:03 -0400] fusillicode1: no one can help me right :(
[2014-06-17 16:40:25 -0400] programmerq: fusillicode1: maybe include some more info about your problem?
[2014-06-17 16:40:29 -0400] Chewi: someara: I know that but creating a shell-less user is a common task and if you're working on a public cookbook and you want this is work in a wide range of environments then it seems silly to keep saying value_for_platform_family(:debian => "/usr/sbin/nologin", :rhel => "/sbin/nologin") or whatever
[2014-06-17 16:41:08 -0400] fusillicode1: mmm ok programmerq
[2014-06-17 16:41:15 -0400] programmerq: Chewi: you could take that logic and put it into a function that lives in libraries
[2014-06-17 16:41:20 -0400] programmerq: lwrp might be overkill
[2014-06-17 16:41:47 -0400] Chewi: programmerq: of course, just wondering if it had been done already. can't seem to find anything.
[2014-06-17 16:42:09 -0400] jtimberman: make a definition
[2014-06-17 16:42:19 -0400] fusillicode1: actually I've developed some recipes and now I'm facing the htaccess problem
[2014-06-17 16:42:33 -0400] surge_: Does anyone know how far back the ssl_verify_mode and ssl_ca_path options are supported  by chef-client? It APPEARS to be fine in 11.4.4, but I dont want to make assumptions here.
[2014-06-17 16:42:43 -0400] jtimberman: handling different platform things in a definition as a wrapper: https://github.com/opscode-cookbooks/chef-splunk/blob/master/definitions/splunk_installer.rb
[2014-06-17 16:43:06 -0400] fusillicode1: this file can be modified directly from the wordpress backend so when I depoy the application I can lose the modifications
[2014-06-17 16:43:27 -0400] Chewi: jtimberman: I like that idea, thanks
[2014-06-17 16:43:45 -0400] fusillicode1: I think I should handle it within the shared folder but I don't know how :(
[2014-06-17 16:44:08 -0400] Chewi: probably won't tackle it now, short on time, but like to know where I'm going :)
[2014-06-17 16:45:51 -0400] Chewi: jtimberman: given that the user resource is core Chef and you could conceivably want to do this in just about any cookbook, would such a definition by accepted into core?
[2014-06-17 16:46:46 -0400] fusillicode1: nothing eh?
[2014-06-17 16:49:51 -0400] sebnil: I have a really wierd problem with my client certificates. It' works great for some hours but then it starts to complain about invalid client keys. If i reboot (chef-server restart is not enough) the chef-server it start to work again. Any ideas?
[2014-06-17 16:49:51 -0400] Chewi: jtimberman: I can't seen any other examples of that so I guess not
[2014-06-17 16:51:34 -0400] fusillicode1: ok got it I can't be helped :( anyway thnx to every1 :)
[2014-06-17 16:58:54 -0400] surge_: Going to answer my own question here for chat history, but it looks like its been in chef-client forever. https://github.com/opscode/chef/commit/88951b162fd3117428ae196743e17446e6fb184c#diff-a122ebfdd311fd556592afcc388d1aa9R191
[2014-06-17 17:15:24 -0400] freerobby: Does anybody know of examples of chef-rewind being used for code that resides in a library/provider?
[2014-06-17 17:16:57 -0400] nate_: I am looking for best practices guide or documentation on returning nodes to there pre-converged state. Is the only chef centric solution to write uninstall cookbooks?
[2014-06-17 17:18:20 -0400] martinisoft: nate_: For the most part, yes.
[2014-06-17 17:20:04 -0400] nate_: Okay ... you say for the most part .... anything you can share that I maybe have not considered?
[2014-06-17 17:20:57 -0400] shlant: hey chefs, silly question: How do I get changes to cookbooks onto a server running solo? Just run bootstrap again?
[2014-06-17 17:22:49 -0400] gondoi: someara: awesome! thanks
[2014-06-17 17:22:52 -0400] jonlives: nate_: the two options are essetially a) rebuild the box or b) write uninstall behaviour into cookbooks - that's not necessarily that easy though, as you may not uninstall package dependencies by uninstalling a particular package etc
[2014-06-17 17:22:56 -0400] stormerider: surge_: yeah, i think they've been in there for a long time, but the actual SSL part was improved recently and knife ssl check was added more recently as well.
[2014-06-17 17:23:12 -0400] whiteadam: shlant: I may be wrong, but aren't cookbooks run locally? Like, you'd need to re-upload/download them to the server?
[2014-06-17 17:24:59 -0400] shlant: whiteadam: yea, but what's the best way to do thaT? baecuase bootstrapping does it initially
[2014-06-17 17:26:25 -0400] whiteadam: shlant: I actually didn't know bootstrap worked with solo, so I dunno :)
[2014-06-17 17:27:12 -0400] whiteadam: shlant: "A bootstrap is a process that installs the chef-client on a target system so that it can run as a chef-client and communicate with a Chef server."
[2014-06-17 17:27:49 -0400] nate_: That is what I thought ... appreciate your quick response martinisoft
[2014-06-17 17:28:13 -0400] shlant: whiteadam: yes but there's also knife solo bootstrap
[2014-06-17 17:28:34 -0400] whiteadam: shlant: that just sounds crazy!
[2014-06-17 17:29:04 -0400] whiteadam: shlant: "knife solo cook uploads the current kitchen (Chef repo) to the target host and runs chef-solo on that host."
[2014-06-17 17:29:16 -0400] martinisoft: nate_: No problem, though jonlives had the solid answer.
[2014-06-17 17:29:33 -0400] sebnil: I have a really wierd problem with my client certificates. It' works great for some hours but then it starts to complain about invalid client keys. If i reboot (chef-server restart is not enough) the chef-server it start to work again. Any ideas?
[2014-06-17 17:30:33 -0400] whiteadam: sebnil: Could it be the times on the servers?
[2014-06-17 17:31:01 -0400] sebnil: whiteadam: Good thought. But i
[2014-06-17 17:31:31 -0400] stormerider: if you have a node complaining about the keys, run knife ssl check and see what it says?
[2014-06-17 17:31:33 -0400] sebnil: i'm running NTP on both knife, chef-server and all the clients.
[2014-06-17 17:34:42 -0400] sebnil: whiteadam: Hmm... When i am running knife ssl check it complains about that the nginx server ssl is self-signed. But it's still mega wierd that it works great when then server is freshly rebooted.
[2014-06-17 17:35:40 -0400] karthee: have a basic q. I consume hostsfile coookbook's LWRP what is the best way to pass attribute "ip -> hostname,aliases"  FOR EACH NODE ?  should I create role for each node and have override_attribute ? create wrapper cookbook one for each node ? or anything else like data bag or something ? any suggestions please ?
[2014-06-17 17:40:45 -0400] prometheanfire: how do you include a library external to a cookbook (in another cookbook) in a recipe, does a simple depends expose it?
[2014-06-17 17:42:58 -0400] freerobby: Can somebody help me with a chef-rewind question? I want to rewind 'service[mysql]' to use a different service provider. I'd like to change the following line: https://github.com/opscode-cookbooks/mysql/blob/master/libraries/provider_mysql_service_ubuntu.rb#L60 How can I do this? If I put it in a recipe it says service[mysql] does not exist, I think because it is declared in the provider. Any thoughts?
[2014-06-17 17:44:54 -0400] EricL: If I have some hosts in a VPC in AWS and the rest in EC2 classic, how can I tell the Nagios cookbook when to use the VPC public IP?
[2014-06-17 17:49:48 -0400] stormerider: does "Ohai::Config[:disabled_plugins] = ["linode", "cloud"]" no longer work? i'm seeing both attributes on my node data when i look in the AWS management interface, is borking up my nagios run
[2014-06-17 17:49:54 -0400] Eulipion|work: is anyone else having issues with SSL for www.opscode.com ?
[2014-06-17 17:50:28 -0400] stormerider: EricL: i've found you need to fine-tune the template for that based on what you want to do, personally.
[2014-06-17 17:50:53 -0400] stormerider: Eulipion|work: no, what are you seeing?
[2014-06-17 17:51:25 -0400] Eulipion|work: stormerider: use1d-haproxy101.sm ERROR: The certificate of `www.opscode.com' is not trusted.
[2014-06-17 17:51:50 -0400] Eulipion|work: this is while bootstrapping a new node
[2014-06-17 17:52:27 -0400] stormerider: from inside knife bootstrap? you might have a problem with your curl/wget certificate authority
[2014-06-17 17:55:05 -0400] sebnil: exit
[2014-06-17 17:55:59 -0400] surge_: stormerider: Yeah I just wanted to be sure I could add it to our existing nodes without issue.
[2014-06-17 17:57:27 -0400] Eulipion|work: stormerider: bootstrap verifies SSL in subsequent runs, feels like there's some loadbalanced problem on the opscode side
[2014-06-17 18:02:41 -0400] rsumiwork: hi all, i downloaded a cookbook that does not contain any recipes. instead it contains only helper methods for writing my own cookbook. now when i want to use its methods in my recipe i get an error when including it that it does have a default recipe. how do i just gain access to its methods?
[2014-06-17 18:03:18 -0400] rsumiwork: ==> default: [2014-06-17T17:45:50+00:00] ERROR: could not find recipe default for cookbook hostsfile
[2014-06-17 18:03:42 -0400] jkeiser: rsumiwork: put it in the metadata.rb for your cookbook with "depends"
[2014-06-17 18:03:50 -0400] jkeiser: rsumiwork: depends 'hostsfile'
[2014-06-17 18:04:15 -0400] jkeiser: It will be automatically loaded
[2014-06-17 18:04:25 -0400] rsumiwork: jkeiser: oh i didnt know that file was actually used :)
[2014-06-17 18:04:35 -0400] rsumiwork: jkeiser: is metadata.json the same thing?
[2014-06-17 18:04:38 -0400] jkeiser: yep!  For a few things.  version among them
[2014-06-17 18:05:03 -0400] jkeiser: rsumiwork: sort of, but it's not the recommended way to do things.  .rb is the way to go
[2014-06-17 18:05:14 -0400] jkeiser: .json is the compiled version of the .rb file
[2014-06-17 18:05:24 -0400] rsumiwork: jkeiser: ah great! thanks!
[2014-06-17 18:05:50 -0400] jkeiser: rsumiwork: in fact, here you go: https://github.com/customink-webops/hostsfile#usage
[2014-06-17 18:06:19 -0400] jkeiser: rsumiwork: also, don't put 'hostsfile' in the run list for your node
[2014-06-17 18:06:24 -0400] jkeiser: it should only be in "depends"
[2014-06-17 18:06:43 -0400] rsumiwork: got it :)
[2014-06-17 18:11:58 -0400] rsumiwork: jkeiser: is there a way to compile the metadata.rb file to the json file or is it ok to not have it exist?
[2014-06-17 18:12:44 -0400] jkeiser: rsumiwork: it is compiled automatically when it's sent--just make sure it doesn't exist
[2014-06-17 18:13:00 -0400] keftes: if i want to tunnel all traffic for a new chef node do i just need to forward tcp 4000?
[2014-06-17 18:15:11 -0400] freerobby: Is it possible to use chef-rewind on a service created by a provider?
[2014-06-17 18:17:16 -0400] EricL: stormerider: What do you mean by fine-tune?
[2014-06-17 18:18:44 -0400] stormerider: EricL: if you want different logic, you may need to customize the template. for example, when i had my nagios host in AWS itself i did internal IPs for that region but externals for the others. now i just do ipaddress across the board with VPC, but my nagios box is outside of AWs.
[2014-06-17 18:19:21 -0400] EricL: stormerider: The problem is that it's grabbing the internal IP of the node.
[2014-06-17 18:20:01 -0400] stormerider: right. i think you can force it to use one attribute across the board, but if you want logic involved, you need to edit the template.
[2014-06-17 18:21:10 -0400] stormerider: ah, no, im wrong. there's an attribute for the hostname. not ipaddress.
[2014-06-17 18:21:15 -0400] EricL: The only thing I've found is that I can force it to use a single interface.  But there is no "public interface" in a VPC.
[2014-06-17 18:22:17 -0400] stormerider: im pretty sure you'll have to tweak ip_to_monitor to do what you want.
[2014-06-17 18:26:45 -0400] EricL: Sounds like this isn't going to be easy.
[2014-06-17 18:28:18 -0400] EricL: Hmm according to ip_to_monitor, it should work.
[2014-06-17 18:39:20 -0400] khazhyk: I'm noticing if i have a template iwth a node[:attribute] in the template, chef-client says the file on disk is "up to date" even if hte node attribute is changed (so as such, the file on disk is actually out of date)
[2014-06-17 18:39:31 -0400] khazhyk: is this a known issue, and is there a fix?
[2014-06-17 18:41:23 -0400] d4c7: anyone tried the gp2 instance types (new SSD) on ec2, using --hints with knife server create?
[2014-06-17 18:41:38 -0400] d4c7: *volume types
[2014-06-17 18:41:40 -0400] khazhyk: actually, hrm, the issue looks like it's not applying hte role attribute :x
[2014-06-17 18:41:52 -0400] khazhyk: a default role attribute is supposed to override a default recipe attribute, right?
[2014-06-17 18:44:27 -0400] Guest90190: if I call a variable in a template, is that variable defined in the attributes file?
[2014-06-17 18:45:03 -0400] khazhyk: nvm i'm dumb
[2014-06-17 18:47:54 -0400] stormerider: Guest13059: no, you pass it in via the variables attribute on the template resource
[2014-06-17 18:49:37 -0400] shirokyojin: stormerider: awesome, thanks
[2014-06-17 18:57:50 -0400] shirokyojin: so is the cookbook attributes folder only for system variable information from OHAI?
[2014-06-17 19:04:30 -0400] someara: nope... its for extra attributes you want to set on the node object when the cookbook is loaded
[2014-06-17 19:04:42 -0400] someara: which your recipes can then make use of
[2014-06-17 19:08:23 -0400] shirokyojin: thanks someara
[2014-06-17 19:35:51 -0400] stormerider: question, can you perform logic inside the cookbook attributes/default.rb like reading a file and setting the attribute, or does all logic need to be in the recipe? (i know it should be, but curious if that's what's causing a problem coworker is facing)
[2014-06-17 19:36:27 -0400] workmad3: stormerider: the attribute files are still just normal ruby, so you can do extra stuff
[2014-06-17 19:36:42 -0400] mikesplain: We put logic in our attributes files all the time, keeps recipes nice and clean
[2014-06-17 19:36:43 -0400] workmad3: stormerider: but if you're reading from a file, the question is... where are you reading the file from? :)
[2014-06-17 19:37:07 -0400] stormerider: workmad3: what do you mean?
[2014-06-17 19:37:42 -0400] workmad3: stormerider: as in, are you potentially trying to read a file before chef has put it in place? is it a file that's guaranteed to be in the same place on all systems?
[2014-06-17 19:38:24 -0400] clocKwize: hi guys
[2014-06-17 19:38:28 -0400] stormerider: ah, yeah, it's a file created by elasticbeanstalk that is specifically verified to exist before chef bootsrapping starts on the node.
[2014-06-17 19:38:29 -0400] workmad3: clocKwize: hi
[2014-06-17 19:38:36 -0400] clocKwize: I'm lonely
[2014-06-17 19:38:48 -0400] workmad3: clocKwize: go find a nice bar and start a fight?
[2014-06-17 19:39:01 -0400] workmad3: clocKwize: that'll get you lots of friends!
[2014-06-17 19:39:03 -0400] clocKwize: I'm coding and watchign Brazil vs Mexico
[2014-06-17 19:39:10 -0400] clocKwize: and slightly drunk
[2014-06-17 19:39:19 -0400] clocKwize: but my gf is out and I have nobody to talk to
[2014-06-17 19:39:25 -0400] clocKwize: so thought I'd come annoy IRC
[2014-06-17 19:39:57 -0400] workmad3: stormerider: so the next question is - what's the exact error you're getting? :)
[2014-06-17 19:40:19 -0400] workmad3: stormerider: because no, there's no reason normal ruby code should fail in an attributes file
[2014-06-17 19:40:46 -0400] stormerider: workmad3: no error, just not acting as expected, so is likely a problem with the logic rather than where the logic is located. thanks.
[2014-06-17 19:42:56 -0400] stormerider: edster got it working, it needed another set of quoting backslashes :)
[2014-06-17 19:43:12 -0400] workmad3: hehe
[2014-06-17 19:43:20 -0400] gyoza: yoyo, anybody know why when i bootstrap a centos inside chef i get two nodes, system.domain.net and system? the fqdn on the system is system.domain.net
[2014-06-17 19:43:38 -0400] gyoza: annoying:(
[2014-06-17 19:43:54 -0400] stormerider: gyoza: set the node_name in client.rb ?
[2014-06-17 19:44:00 -0400] gyoza: its set to use fqdn
[2014-06-17 19:44:17 -0400] gyoza: i think ohai is freaking out lol
[2014-06-17 19:44:22 -0400] stormerider: set to use or set as the fqdn?
[2014-06-17 19:44:43 -0400] gyoza: "using default nodename (fqdn)
[2014-06-17 19:45:02 -0400] stormerider: yeah, i find it best to actually explicitly name the node
[2014-06-17 19:45:11 -0400] gyoza: hmmmm
[2014-06-17 19:46:04 -0400] gyoza: can i specify that on a bootstrap?
[2014-06-17 19:46:53 -0400] gyoza: oh hmm
[2014-06-17 19:46:57 -0400] gyoza: -n? maybe lol
[2014-06-17 19:47:20 -0400] stormerider: -N i believe
[2014-06-17 19:48:03 -0400] yebyen: any sensu or chef-monitor cookbook users on Ubuntu 14.04?
[2014-06-17 19:49:10 -0400] yebyen: I tried the cookbook, but it forced the embedded ruby which was core dumping for me (and I already had a nice fresh 2.1.2 from the rvm cookbook)
[2014-06-17 19:49:54 -0400] yebyen: so I tried to force disable the embedded ruby, but now I find it's hardcoded in a bunch of paths in /opt/sensu/embedded/bin/* which are part of the omnibus installer I guess
[2014-06-17 19:50:26 -0400] freerobby: Has anybody used the opscod mysql cookbook with a custom root password with success? We are finding that by the time the attributes are read it is too late and we get a perms failure because the default password has been set.
[2014-06-17 19:50:42 -0400] yebyen: so I am here to vent, since I think all of that will have fixed it, but that seems like a lot of hassle to go through
[2014-06-17 19:51:21 -0400] yebyen: going around changing shebangs by hand, etc
[2014-06-17 19:51:34 -0400] yebyen: what a mess!
[2014-06-17 19:52:49 -0400] yebyen: and if anyone uses it, i'd think it would be easy to find someone who can tell me what I'm doing wrong, or at least with a similar complaint :)
[2014-06-17 19:52:50 -0400] ratmav: I'm looking to use Chef for configuration management, but i also need to automate my deployments. My deployments are just tarballs of the HEAD of master and running some shell commands. Is this something I can do with Chef, or should I look elsewhere?
[2014-06-17 19:53:49 -0400] yebyen: I think you can do that with chef, chef files are just ruby at heart
[2014-06-17 19:54:00 -0400] yebyen: ratmav
[2014-06-17 19:54:23 -0400] someara: ratmav check out the ark cookbook on the community site
[2014-06-17 19:54:25 -0400] mikesplain: ratmav: there's a deploy resource that would probably be helpful: http://docs.opscode.com/resource_deploy.html
[2014-06-17 19:55:20 -0400] gyoza: stormerider: thanks:)
[2014-06-17 19:56:41 -0400] ratmav: Thanks yebyen, someara, mikesplain!
[2014-06-17 19:59:17 -0400] coderanger: KostyaSha: You raaaaang?
[2014-06-17 19:59:40 -0400] mikesplain: ratmav np
[2014-06-17 19:59:44 -0400] coderanger: ratmav: Please please please don't use the deploy resource
[2014-06-17 19:59:45 -0400] KostyaSha: coderanger, yeap
[2014-06-17 20:00:00 -0400] coderanger: It is a relic of another time (at best)
[2014-06-17 20:00:27 -0400] coderanger: KostyaSha: wazap?
[2014-06-17 20:00:38 -0400] KostyaSha: coderanger have i missed something http://docs.opscode.com/chef_solo.html#environments and https://github.com/opscode/chef/commit/43464b477554908940ce0dc5fa995bd056b4cf30 ?
[2014-06-17 20:01:08 -0400] coderanger: KostyaSha: Yes, the chef docs are incorrect, this is not uncommon
[2014-06-17 20:01:28 -0400] KostyaSha: maybe code could be fixed?)
[2014-06-17 20:01:39 -0400] coderanger: KostyaSha: No, the code is correct in this case :)
[2014-06-17 20:01:49 -0400] KostyaSha: bad..
[2014-06-17 20:02:00 -0400] mikesplain: Haha oh sorry coderanger :(
[2014-06-17 20:02:01 -0400] coderanger: KostyaSha: solo can't do any version solution stuffs because it only has a single version of each cookbook, namely the one on disk
[2014-06-17 20:02:09 -0400] ratmav: coderanger, ark cookbook?
[2014-06-17 20:02:25 -0400] ratmav: coderanger, just trying to automate a tarball deployment
[2014-06-17 20:02:40 -0400] coderanger: ratmav: Yep, thats what the ark cookbook is for :)
[2014-06-17 20:02:49 -0400] KostyaSha: i chose solo as start up variant, but working without version constraints will be a headache and now i think that other CM tools maybe lighter
[2014-06-17 20:02:50 -0400] coderanger: ratmav: You can also look at reset's archive cookbook
[2014-06-17 20:03:23 -0400] coderanger: KostyaSha: Not sure what you mean, how at best solo would just ignore version stuffs, how would it do a version solution?
[2014-06-17 20:03:26 -0400] ratmav: coderanger, looked at ark. this appears to be geared more towards configure/make/make install
[2014-06-17 20:03:32 -0400] KostyaSha: coderanger, i may have many directories with many versions, solo may scan and took corresponding cookbooks
[2014-06-17 20:03:39 -0400] coderanger: ratmav: Indeed, but it can still do just the basic unpacking
[2014-06-17 20:03:48 -0400] coderanger: KostyaSha: berkshelf does that, solo does not
[2014-06-17 20:04:24 -0400] KostyaSha: berkshelf is a separate tool, right?
[2014-06-17 20:04:29 -0400] coderanger: KostyaSha: Solo is not a complete tool, on purpose, it is just the recipe execution core of chef
[2014-06-17 20:04:42 -0400] coderanger: KostyaSha: You should only use it if you are prepared to write your own control backplane for it
[2014-06-17 20:04:50 -0400] coderanger: otherwise, use chef-client and server
[2014-06-17 20:05:02 -0400] CJNE: good evening chefs
[2014-06-17 20:05:35 -0400] KostyaSha: coderanger, what is the problem to scan cookbook_paths and check deps according contraints?
[2014-06-17 20:06:01 -0400] coderanger: KostyaSha: No problem, berkshelf does it quite well, just out of scope for solo :)
[2014-06-17 20:06:05 -0400] miketheman: are libraries containing searches executed at compile time, or when they are first invoked?
[2014-06-17 20:06:31 -0400] coderanger: miketheman: library files are executed via normal kernel.load at the start of converge
[2014-06-17 20:06:43 -0400] coderanger: miketheman: So well before "compile time"
[2014-06-17 20:06:43 -0400] KostyaSha: coderanger, but this mechanism exist for client/server and present in the same libraries?
[2014-06-17 20:07:21 -0400] coderanger: KostyaSha: Not sure what you mean, but no, the logic for this is all in chef-server and not usable on the client
[2014-06-17 20:11:51 -0400] KostyaSha: coderanger, but solo is already using the same set of code/libraries as i see
[2014-06-17 20:12:24 -0400] coderanger: KostyaSha: As the server?
[2014-06-17 20:12:30 -0400] coderanger: That would be a feat :)
[2014-06-17 20:12:56 -0400] coderanger: Regardless, the omission of all control-plane logic from solo is intentional, and is the whole reason solo exists
[2014-06-17 20:12:58 -0400] KostyaSha: yes, at least i'm getting error in this check
[2014-06-17 20:13:20 -0400] coderanger: it allows you to plug chef into external control systems such as rightscale, opsworks, test-kitchen, etc
[2014-06-17 20:13:21 -0400] KostyaSha: so i suppose that this part of code works in server and stubed for solo usage
[2014-06-17 20:13:52 -0400] coderanger: It is explicitly checked for in solo because otherwise they would just be ignored, possibly confusing people
[2014-06-17 20:14:16 -0400] a13x212: how do i add a ruby hash into a environment json?
[2014-06-17 20:14:32 -0400] shlant1: anyone know why I'm getting "us-west-1b is not a valid availability zone." with AWS::RDS?
[2014-06-17 20:16:21 -0400] a13x212: i don't believe us-west-1b is a valid region
[2014-06-17 20:16:25 -0400] CJNE: shlant1, try us-west-1
[2014-06-17 20:19:28 -0400] gyoza: bye
[2014-06-17 20:19:28 -0400] gyoza: lol
[2014-06-17 20:21:11 -0400] yebyen: any sensu users at all willing to indulge a few questions?
[2014-06-17 20:21:35 -0400] shlant1: CJNE: looks like aws-rds was setting region by default to us-east-1 but does not mention a region attribute..
[2014-06-17 20:21:39 -0400] coderanger: yebyen: You might want to ask in #sensu
[2014-06-17 20:22:07 -0400] yebyen: coderanger: well, chef-monitor is sensu, and chef appears to be a larger community
[2014-06-17 20:22:44 -0400] yebyen: coderanger: i'd be happy with one person saying "yes i use sensu" "yes works for me" "ubuntu 14.04, exactly"
[2014-06-17 20:23:05 -0400] coderanger: yebyen: Chef has nothing to do with Sensu aside from it is often used to deploy it, but Chef is also often used to deploy many things :)
[2014-06-17 20:24:20 -0400] a13x212: how do i represent http://pastebin.com/19ULkbqA in a json environment file?
[2014-06-17 20:24:25 -0400] yebyen: so anyway, you are not personally a sensu user then
[2014-06-17 20:24:48 -0400] a13x212: i use chef/sensu, cookbook is very good, easy to use
[2014-06-17 20:25:13 -0400] yebyen: you do, what are your host systems?  Ubuntu?
[2014-06-17 20:25:40 -0400] coderanger: a13x212: JSON syntax for hashes is {"key": "value", "key2": "value2"}
[2014-06-17 20:26:22 -0400] miketheman: coderanger: hm, so how might I delay an actual resource lookup until it's needed? i.e lazy loading a search when called
[2014-06-17 20:27:13 -0400] coderanger: miketheman: You can't do a search in a lib file normally anyway since the DSL isn't available, but just put it in a method and then call that :)
[2014-06-17 20:27:35 -0400] miketheman: hm, got any examples?
[2014-06-17 20:27:42 -0400] yebyen: a13x212: if you're using ubuntu, is it 14.04
[2014-06-17 20:28:35 -0400] coderanger: miketheman: Any specifics on what you are trying to do?
[2014-06-17 20:29:11 -0400] yebyen: a13x212: also if you use the dashboard, knowing that would be helpful to me... can I /q you?
[2014-06-17 20:29:20 -0400] miketheman: I want a base library-style cookbook, that provdes conveninence functions to anyone using it, and not have to lookup the values in there until they are actually needed
[2014-06-17 20:29:29 -0400] PaulCzar: can I access a module in a library from an attributes file ?
[2014-06-17 20:30:26 -0400] coderanger: miketheman: So just a utility DSL extension, sure, pretty easy to add, sec :)
[2014-06-17 20:30:35 -0400] coderanger: PaulCzar: Yes
[2014-06-17 20:31:28 -0400] coderanger: miketheman: http://hastebin.com/sovuwumeji.rb thats the simplest form
[2014-06-17 20:31:41 -0400] coderanger: miketheman: Can get more advanced from there
[2014-06-17 20:31:51 -0400] miketheman: coderanger: interesting
[2014-06-17 20:31:59 -0400] PaulCzar: coderanger: even if that library is in a cookbook that Im including in my recipe ?
[2014-06-17 20:32:11 -0400] miketheman: however every time a recipe would call that method, the search would get executed.
[2014-06-17 20:32:12 -0400] coderanger: PaulCzar: As long as you put a dependency on it, yes
[2014-06-17 20:32:19 -0400] miketheman: maybe if I memoized the search result?
[2014-06-17 20:32:24 -0400] coderanger: miketheman: Yep, caching would be under "more advanced" :)
[2014-06-17 20:32:35 -0400] miketheman: haar
[2014-06-17 20:32:47 -0400] CJNE: shlant1, is it the gosuri cookbook?
[2014-06-17 20:33:01 -0400] shlant1: CJNE: yep
[2014-06-17 20:33:13 -0400] coderanger: miketheman: node.run_state[:my_awesome_search] ||= search()
[2014-06-17 20:33:35 -0400] coderanger: miketheman: Also obligatory plug, I do training/consulting for this kind of advanced chef stuff :)
[2014-06-17 20:33:43 -0400] miketheman: yeah, I know. :)
[2014-06-17 20:33:50 -0400] PaulCzar: coderanger: okay,  Im probably screwing syntax or something then  the method Im trying to access is this - https://github.com/stackforge/cookbook-openstack-common/blob/3a9695366baec27de0633c23580bdbc639dedd64/libraries/passwords.rb#L66
[2014-06-17 20:34:23 -0400] PaulCzar: so Im trying this - db_pass = ::Openstack::get_password('db', test)
[2014-06-17 20:34:28 -0400] coderanger: PaulCzar: That isn't a module-level method so you can't access it directly
[2014-06-17 20:34:30 -0400] PaulCzar: test even
[2014-06-17 20:34:38 -0400] coderanger: PaulCzar: You would need to dump it into a namespace you can access
[2014-06-17 20:36:09 -0400] CJNE: shlant1, it's probably the aws-sdk gem that defaults to us-east-1 (that gem gets installed by the rds cookbook). But you figured out how to set the attribute and got it working now?
[2014-06-17 20:37:47 -0400] shlant1: CJNE: sure did. I may just submit a couple pull requests
[2014-06-17 20:38:33 -0400] coderanger: PaulCzar: In your own cookbook you can make a lib file for that module Whatever extend Openstack end
[2014-06-17 20:38:41 -0400] coderanger: PaulCzar: And then Whatever.get_password
[2014-06-17 20:38:52 -0400] coderanger: PaulCzar: (assuming I'm remembering extend vs. include correctly)
[2014-06-17 20:39:38 -0400] PaulCzar: coderanger: thanks!  that should be enough for me to work it out
[2014-06-17 20:50:49 -0400] Majost: Does anyone know if there is a way to tell the kitchen-vagrant driver to disable the NAT network when using the "private_network" directive?
[2014-06-17 20:50:59 -0400] Majost: It seems to create both, when I only want the one.
[2014-06-17 20:51:13 -0400] a13x212: thanks coderanger, found my issue
[2014-06-17 20:52:08 -0400] coderanger: Majost: It just passes the options on to Vagrant itself
[2014-06-17 20:54:25 -0400] Majost: coderanger: The default value for :network is a null array though, so I am not sure how it is even getting/creating the primary interface on a 10.x.x.x range
[2014-06-17 20:55:17 -0400] Majost: wait
[2014-06-17 20:55:26 -0400] Majost: I have an idea
[2014-06-17 20:58:59 -0400] Majost: It might be my zero node json
[2014-06-17 20:59:51 -0400] Majost: newp
[2014-06-17 20:59:53 -0400] Majost: damn
[2014-06-17 21:00:35 -0400] Majost: its probably the vagrant box
[2014-06-17 21:00:37 -0400] Majost: damn
[2014-06-17 21:25:20 -0400] sarkis: hey guys for ec2 instances, does the instance id need to be the node name?
[2014-06-17 21:26:38 -0400] sarkis: in chef server*
[2014-06-17 21:27:52 -0400] doomviking: no
[2014-06-17 21:28:20 -0400] sarkis: looks like knife-ec2 made the instance id the node name.. how do i change this? i tried changing the hostname and re-running chef client
[2014-06-17 21:28:34 -0400] sarkis: do i need to modify the node via knife node edit?
[2014-06-17 21:28:56 -0400] someara: delete the instance
[2014-06-17 21:29:09 -0400] sarkis: and then re-run the chef-client?
[2014-06-17 21:29:09 -0400] whiteadam: doooooomed
[2014-06-17 21:29:11 -0400] someara: bootstrap with -N node_name_yout_want
[2014-06-17 21:29:15 -0400] sarkis: oh i see
[2014-06-17 21:29:17 -0400] sarkis: thanks :)
[2014-06-17 21:29:21 -0400] doomviking: or change /etc/chef/client.rb
[2014-06-17 21:29:23 -0400] jbz: DOOOOOOOOMED </miss bitters voice>
[2014-06-17 21:29:27 -0400] doomviking: nuke client.pem
[2014-06-17 21:29:34 -0400] doomviking: run chef-client
[2014-06-17 21:30:15 -0400] doomviking: if you dont want to save the node. otherwise redeploy
[2014-06-17 21:30:34 -0400] doomviking: may need to re-add the runlist
[2014-06-17 21:30:58 -0400] sarkis: nice thanks all
[2014-06-17 21:33:33 -0400] sarkis: environment vars feel kind of clunky :(
[2014-06-17 21:34:21 -0400] sarkis: we have a dc where we are using encrypted drives so for certain vars like node['nginx']['log_file'] i set to  '/path/to/special/encrypted/drive'
[2014-06-17 21:34:43 -0400] sarkis: is there a better way.. other way i can think of is if chef.environment == 'special_env'
[2014-06-17 21:34:56 -0400] sarkis: i guess it's nicer than the conditional route
[2014-06-17 21:49:48 -0400] icarus: hello all
[2014-06-17 21:50:10 -0400] icarus: im having some issues running an opscode recipe
[2014-06-17 21:50:11 -0400] icarus: Chef::Exceptions::RecipeNotFound
[2014-06-17 21:50:11 -0400] icarus: --------------------------------
[2014-06-17 21:50:12 -0400] icarus: could not find recipe ruby for cookbook mysql
[2014-06-17 21:50:17 -0400] icarus: ^ this is the error i get
[2014-06-17 21:50:30 -0400] icarus: it looks like the ruby recipe it mentions isn't really needed anymore
[2014-06-17 21:50:38 -0400] icarus: but i dont see any docs on fixing the problem
[2014-06-17 21:57:06 -0400] gleam: the recipe that depends on mysql::ruby should depend on a pre-5.0 version of the mysql cookbook
[2014-06-17 21:57:10 -0400] gleam: if it doesn't then file a bug
[2014-06-17 21:57:18 -0400] aujt74: icarus: since v5.0.0 of the mysql cookbook, the ruby recipe was extracted out to https://github.com/opscode-cookbooks/mysql-chef_gem
[2014-06-17 21:57:27 -0400] icarus: gleam: i was kind of figuring that out
[2014-06-17 21:57:36 -0400] icarus: thanks for pointing me in the right direction
[2014-06-17 21:58:56 -0400] icarus: i just had to 'know' that, and add it manually
[2014-06-17 22:02:31 -0400] gleam: what cookbook, i'm curious?
[2014-06-17 22:04:22 -0400] a13x212: how would i find the last item in a Chef::Node::ImmutableMash ?
[2014-06-17 22:07:13 -0400] ev0ldave: hey everybody
[2014-06-17 22:07:58 -0400] ev0ldave: has anyone had issues with service not detecting the proper provider?  in my cookbooks if using upstart we must define the provider or it always tries to use update-rc.d
[2014-06-17 22:10:59 -0400] coderanger: ev0ldave: Yes, that is how it works
[2014-06-17 22:11:18 -0400] ev0ldave: odd, i could have sworn i read somewhere it detected it
[2014-06-17 22:11:40 -0400] coderanger: a13x212: .to_a.last
[2014-06-17 22:11:47 -0400] coderanger: ev0ldave: It does, but upstart is never the default
[2014-06-17 22:12:19 -0400] ev0ldave: i understand that, sysctl is default but it isn't detecting that only /etc/init/something.conf exists
[2014-06-17 22:12:33 -0400] coderanger: ev0ldave: Yes, there is no auto-detection for that
[2014-06-17 22:12:42 -0400] gleam: i think there's a fix for that in the upcoming client version
[2014-06-17 22:12:43 -0400] coderanger: ev0ldave: It only detects based on platform
[2014-06-17 22:12:52 -0400] gleam: ubuntu >= 13.10 will default to upstart
[2014-06-17 22:13:06 -0400] ev0ldave: is that current, gleam?
[2014-06-17 22:13:18 -0400] gleam: https://tickets.opscode.com/browse/CHEF-5276
[2014-06-17 22:13:20 -0400] gleam: it'll be in 11.14.0
[2014-06-17 22:13:46 -0400] ev0ldave: just curious how they do it for the openstack cookbooks, those only install upstart scripts but the services dont define upstart as the provider
[2014-06-17 22:14:20 -0400] coderanger: gleam: TIL https://github.com/opscode/chef/blob/master/lib/chef/platform/provider_mapping.rb#L75 :)
[2014-06-17 22:14:49 -0400] coderanger: Ahh yeah, only merged a few weeks ago
[2014-06-17 22:15:08 -0400] coderanger: ev0ldave: Do they setup the compat layer in /etc/init.d?
[2014-06-17 22:15:16 -0400] ev0ldave: no, hence they all fail
[2014-06-17 22:15:29 -0400] gkra: is there a way to stub out a resource in chefspec?
[2014-06-17 22:15:30 -0400] ev0ldave: had to do the same for our rundeck cookbook
[2014-06-17 22:16:45 -0400] coderanger: ev0ldave: You can override things globally if you prefer
[2014-06-17 22:16:47 -0400] ev0ldave: i guess that is the story of the openstack cookbooks, they have always "worked" :)
[2014-06-17 22:17:05 -0400] coderanger: ev0ldave: but that might break some community cookbooks
[2014-06-17 22:17:13 -0400] ev0ldave: i will fix it, i just see a lot of cookbooks that dont define the provider.. then use upstart and it fails
[2014-06-17 22:17:23 -0400] ev0ldave: thought there was something wrong with what i was doing with it
[2014-06-17 22:17:40 -0400] troyready: Has anyone done or seen any work on getting chef-server to push notifications when uploads are made to it? i.e., if a role is updated, do an HTTP post to x?
[2014-06-17 22:18:01 -0400] coderanger: troyready: That is not a feature of Chef-server
[2014-06-17 22:18:39 -0400] troyready: Yeah, was hoping you'd say "BUT, someone has hacked in this cool feature at..." :)
[2014-06-17 22:19:36 -0400] coderanger: troyready: Almost no one outside of employees of opscode work on the chef-server codebase
[2014-06-17 22:20:01 -0400] coderanger: troyready: I can probably count the patches submitted in the past year on one hand
[2014-06-17 22:20:12 -0400] gkra: troyready: If you have your chef-server updates pushed via a Jenkins job, you could always add a notification step to the job. :)
[2014-06-17 22:20:27 -0400] troyready: <dusts off erlang ebooks>
[2014-06-17 22:20:54 -0400] a13x212: coderanger, is that documented anywhere? worked!
[2014-06-17 22:20:55 -0400] troyready: Generally, I'm trying to figure out a workflow to take advantage of enterprise chef's ACLs (teams can only modify objects pertaining to them) and the typical community jenkins workflows
[2014-06-17 22:21:37 -0400] coderanger: a13x212: Sure, standard ruby docs?
[2014-06-17 22:21:54 -0400] coderanger: a13x212: ImmutableMash uses the same interface as a normal Hash, it is just read only
[2014-06-17 22:22:19 -0400] gkra: bah... ruby_build cookbook is failing in very interesting ways for ruby 2.1.2...
[2014-06-17 22:22:29 -0400] coderanger: troyready: Now you made me sad :-( I went to checked the pull req history on chef_wm, in the past year there has been _one_ contributor that doesn't work for opscode
[2014-06-17 22:22:41 -0400] troyready: Wow
[2014-06-17 22:22:56 -0400] coderanger: Reminder kids: Chef isn't open source
[2014-06-17 22:23:02 -0400] troyready: Well.......at least erlang turned out to be faster
[2014-06-17 22:26:42 -0400] troyready: I guess I could rephrase my thoughts into a more general question: do the best ways of working w/ Chef (CI) totally invalidate the ACL benefit that Enterprise Chef offers?
[2014-06-17 22:27:40 -0400] coderanger: troyready: It all depends on what you are trying to do
[2014-06-17 22:28:09 -0400] coderanger: troyready: ACLs are super useful for things like secrets management and other read restrictions
[2014-06-17 22:30:04 -0400] troyready: Hmmm, that makes sense, though I'm generally imagining anything sensitive will still be committed to a local repo and managed by chef-vault
[2014-06-17 22:30:27 -0400] coderanger: Give or take that chef-vault is hugely restricting, but yeah
[2014-06-17 22:30:54 -0400] troyready: What I'd like to see with ACLs is the ability to minimize the impact one team could have on another team's nodes
[2014-06-17 22:30:56 -0400] coderanger: I wouldn't use it for real secrets, but minor isolation it helps
[2014-06-17 22:31:55 -0400] troyready: Which I can understand in the context of Enterprise Chef itself, but everything breaks down as I try to imagine integrating it w/ Jenkins for example
[2014-06-17 22:32:23 -0400] coderanger: troyready: Hmm, in what way?
[2014-06-17 22:32:36 -0400] icarus: how does one remove a run_list from a node? (reversing all the changes that run_list might have made)
[2014-06-17 22:32:52 -0400] coderanger: If you are using jenkins for doing the uploads, then yeah, you would need to do the ACLs in Jenkins instead or make jenkins use a different client based on the team
[2014-06-17 22:32:53 -0400] ev0ldave: icarus:  nuke and pave
[2014-06-17 22:33:07 -0400] icarus: ev0ldave: interesting
[2014-06-17 22:33:12 -0400] coderanger: icarus: The latter and the former are veeeeery different
[2014-06-17 22:33:23 -0400] coderanger: icarus: You can edit the run list with `knife node edit $name`
[2014-06-17 22:33:31 -0400] coderanger: icarus: But that won't magically reverse anything
[2014-06-17 22:33:41 -0400] ev0ldave: icarus, you can do node.run_list.reset! but yeah, no reversing
[2014-06-17 22:34:12 -0400] coderanger: ev0ldave: That would only be from inside recipe code, and is not generally something you want to do :)
[2014-06-17 22:34:16 -0400] troyready: coderanger, hmmm, you know, that simple thought (splitting out jenkin's access to chef into different keys based on team) might be just enough to accomplish what I'm looking for
[2014-06-17 22:34:42 -0400] ev0ldave: coderanger: right, i use it if i have a large list to wipe out with knife exec
[2014-06-17 22:35:03 -0400] coderanger: troyready: Yeah, though there are lots of potential issues with shared repos when jenkins is building commits from two people at the same time
[2014-06-17 22:35:18 -0400] troyready: Hmmm, yeah, true
[2014-06-17 22:35:49 -0400] ev0ldave: coderanger:  the run_list array isn't really an array so to move an item to the front of the run_list, had to .to_a, then insert to array, then reset run_list and reassign messy :(
[2014-06-17 22:35:51 -0400] coderanger: troyready: Enforced isolation like this only works well if things are actually isolated, and they usually aren't
[2014-06-17 22:36:01 -0400] troyready: :)
[2014-06-17 22:36:05 -0400] troyready: Right, makes sense
[2014-06-17 22:36:20 -0400] coderanger: ev0ldave: To each their own :)
[2014-06-17 22:37:26 -0400] ev0ldave: coderanger:  on a side not, how can i do a global override to default to upstart for the service provider?
[2014-06-17 22:38:43 -0400] ev0ldave: not/note
[2014-06-17 22:39:04 -0400] coderanger: ev0ldave: ex. https://github.com/opscode-cookbooks/homebrew/blob/master/libraries/homebrew_package.rb#L108-L109
[2014-06-17 22:39:53 -0400] ev0ldave: thanks
[2014-06-17 22:48:28 -0400] troyready: coderanger, very much appreciate your thoughts today.
[2014-06-17 22:48:32 -0400] kbarry: Anyone have success using the windows cookbook's windows_feature resource ?
[2014-06-17 22:48:52 -0400] coderanger: troyready: No problem
[2014-06-17 22:48:57 -0400] kbarry: I am only getting error codes that translate to fata error.
[2014-06-17 22:49:07 -0400] kbarry: very confused.
[2014-06-17 22:49:37 -0400] coderanger: troyready: Also oblig plug, I provide training/consulting services on these kinds of advanced chef topic
[2014-06-17 22:49:56 -0400] troyready: Cool, great to know
[2014-06-17 22:50:02 -0400] coderanger: kbarry: There isn't usually a super strong windows contingent on here, the mailing list might be a better bet
[2014-06-17 22:50:18 -0400] gkra: Is there a way to use node attributes in chefspec?
[2014-06-17 22:50:33 -0400] gkra: at least if they're set in the recipe?
[2014-06-17 23:54:53 -0400] Sam_S: Hi, I am thinking how can I get the progress on a chef client, any idea?

[2014-06-27 00:00:05 -0400] mfeingold: I just had to create the environment and invoke with with knife
[2014-06-27 00:00:18 -0400] mfeingold: Dependency issue solved!
[2014-06-27 03:15:46 -0400] gkra: Did the Opscode nginx cookbook recently get moved? I'd swear a couple days ago it was in github.com/opscode-cookbooks/nginx, now it redirects to miketheman/nginx?
[2014-06-27 03:16:28 -0400] squaresurf: odd
[2014-06-27 03:16:32 -0400] squaresurf: Must of.
[2014-06-27 03:16:44 -0400] squaresurf: *Must have.
[2014-06-27 03:16:50 -0400] gkra: maybe this means it's going to be fixed up? :)
[2014-06-27 03:17:00 -0400] gkra: I'm in the process of hating it right now.
[2014-06-27 03:17:25 -0400] squaresurf: Yeah, I had to do a odd workaround to fix issues I had with it not restarting.
[2014-06-27 03:17:41 -0400] gkra: I cannot, for the life of me, fathom how nginx gets built with the passenger module if you just let nginx::source do its thing.
[2014-06-27 03:17:53 -0400] squaresurf: Hmm.
[2014-06-27 03:18:00 -0400] gkra: tried working around it in my wrapper, but all that did was cause me pain.
[2014-06-27 03:18:02 -0400] squaresurf: I use the ubuntu package.
[2014-06-27 03:18:12 -0400] squaresurf: You could look at the berks api cookbook.
[2014-06-27 03:18:15 -0400] gkra: we're on CentOS, and devs want bleeding edge
[2014-06-27 03:18:18 -0400] squaresurf: I know it builds from source.
[2014-06-27 03:18:25 -0400] squaresurf: Ah yeah.
[2014-06-27 03:18:28 -0400] squaresurf: CentOS
[2014-06-27 03:18:44 -0400] squaresurf: I hate how old everything is on there without adding a crap ton of repos.
[2014-06-27 03:18:45 -0400] gkra: We Are An Enterprise, you see.
[2014-06-27 03:18:50 -0400] squaresurf: I see :)
[2014-06-27 03:19:01 -0400] squaresurf: So are we, but I have more control I guess.
[2014-06-27 03:19:02 -0400] gkra: OS + EPEL + ruby_build, basically
[2014-06-27 03:19:23 -0400] gkra: Honestly, I'd be fine with deploying images on Fedora 20
[2014-06-27 03:19:45 -0400] gkra: but above my pay grade they like Enterprise Linux
[2014-06-27 03:20:19 -0400] squaresurf: I see
[2014-06-27 03:20:21 -0400] squaresurf: https://github.com/berkshelf/berkshelf-api/blob/master/cookbook/recipes/http_proxy.rb
[2014-06-27 03:20:25 -0400] digitalchild: gkra: i just created the nginx repo
[2014-06-27 03:20:27 -0400] squaresurf: I know that works.
[2014-06-27 03:20:29 -0400] digitalchild: and pull it from that on my centos machines
[2014-06-27 03:20:56 -0400] squaresurf: Oh yeah, I forgot they maintain their own repo.
[2014-06-27 03:21:09 -0400] squaresurf: Its got a recent version too huh.
[2014-06-27 03:21:10 -0400] digitalchild: mariadb, nginx, base, epel
[2014-06-27 03:21:12 -0400] digitalchild: thats all i use
[2014-06-27 03:21:15 -0400] gkra: squaresurf: yeah, but that doesn't get Passenger installed.
[2014-06-27 03:21:29 -0400] squaresurf: Oh, forgot about that.
[2014-06-27 03:21:33 -0400] gkra: :(
[2014-06-27 03:21:42 -0400] squaresurf: What are the errors you're getting?
[2014-06-27 03:21:54 -0400] squaresurf: We do use centos on our old boxes, so I have a bit of experience there.
[2014-06-27 03:22:08 -0400] gkra: well, for some reason, the nginx recipe is trying very hard to use Chef Omnibus's ruby to install passenger.
[2014-06-27 03:22:12 -0400] digitalchild: i only use centos
[2014-06-27 03:22:25 -0400] digitalchild: with ruby coming from SCL
[2014-06-27 03:22:40 -0400] digitalchild: which gives me 1.9.3 which is good enough for my usage
[2014-06-27 03:23:05 -0400] digitalchild: lets see if passenger installs from scl
[2014-06-27 03:23:21 -0400] digitalchild: passenger 4.0.45 ?
[2014-06-27 03:23:40 -0400] gkra: well, between nginx::source (https://github.com/miketheman/nginx/blob/master/recipes/source.rb)
[2014-06-27 03:23:54 -0400] gkra: and nginx::passenger (https://github.com/miketheman/nginx/blob/master/recipes/passenger.rb)
[2014-06-27 03:24:16 -0400] gkra: and nginx::default (https://github.com/miketheman/nginx/blob/master/recipes/default.rb)
[2014-06-27 03:24:27 -0400] gkra: I just don't see how nginx ever gets built with passenger.
[2014-06-27 03:24:54 -0400] squaresurf: https://github.com/miketheman/nginx/blob/master/recipes/passenger.rb#L47
[2014-06-27 03:25:05 -0400] gkra: even if I set node.normal['nginx']['install_method'] = 'source' and node.normal['nginx']['source']['modules'] = node['nginx']['source']['modules'] | %w(nginx::passenger)
[2014-06-27 03:25:36 -0400] squaresurf: The link I posted shows that they add passenger to the nginx configure flags.
[2014-06-27 03:25:39 -0400] gkra: squaresurf: yes, but that then implies that nginx::source is run *again* after nginx::passenger
[2014-06-27 03:26:10 -0400] gkra: BUT if you look here: https://github.com/miketheman/nginx/blob/master/recipes/source.rb#L66-L67
[2014-06-27 03:26:20 -0400] gkra: that flag gets nuked before anything can actually happen.
[2014-06-27 03:26:52 -0400] digitalchild: could u just do gem_package passneger then run the nginx compiler for it ?
[2014-06-27 03:26:54 -0400] squaresurf: This is odd indeed.
[2014-06-27 03:26:56 -0400] digitalchild: using passenger-install-nginx-module ?
[2014-06-27 03:27:45 -0400] gkra: digitalchild: I could, but the nginx cookbook actually does an okay job of putting all the nginx bits where I like them, and I don't feel like rewriting a lot of that. :(
[2014-06-27 03:28:03 -0400] digitalchild: could your wrapper cookbook do just that bit then?
[2014-06-27 03:31:09 -0400] gkra: oh wait
[2014-06-27 03:31:45 -0400] gkra: https://github.com/miketheman/nginx/blob/master/recipes/source.rb#L90-L92
[2014-06-27 03:33:26 -0400] gkra: now I'm really confused...
[2014-06-27 03:35:02 -0400] digitalchild: good luck, lunch time for me
[2014-06-27 03:38:45 -0400] squaresurf: so interesting
[2014-06-27 03:44:19 -0400] squaresurf: It's probably in both locations for the non source recipes.
[2014-06-27 03:45:25 -0400] gkra: they're slightly different
[2014-06-27 03:45:48 -0400] gkra: the one in nginx::default is nginx/default/modules, in nginx::source it's nginx/source/modules
[2014-06-27 03:46:10 -0400] squaresurf: oh I see
[2014-06-27 03:46:23 -0400] squaresurf: Have you tried changing that then?
[2014-06-27 03:46:36 -0400] squaresurf: Set passenger as a module in the nginx/source/modules.
[2014-06-27 03:50:54 -0400] gkra: oh god the hotel wireless is sucking tonight.
[2014-06-27 04:57:23 -0400] jyoti_bhanot: hi all
[2014-06-27 05:03:13 -0400] nlloyds: hi
[2014-06-27 05:56:24 -0400] jyoti_bhanot__: I want to write a chef recipe that will set the hostname of the EC2 instance as :
[2014-06-27 05:56:40 -0400] jyoti_bhanot__: AWSRegionInstanceTyperandomNo like awsedev001
[2014-06-27 05:56:52 -0400] jyoti_bhanot__: how can i do this in chef recipe
[2014-06-27 05:57:29 -0400] coderanger: So generally setting hostnames from inside chef is a bad idea
[2014-06-27 05:57:48 -0400] coderanger: because chef itself uses the hostname as the name of the node unless specified otherwise
[2014-06-27 05:58:08 -0400] jyoti_bhanot__: In amazon hostname gives 1p-10-167-178-67
[2014-06-27 05:58:14 -0400] coderanger: Yes
[2014-06-27 05:58:20 -0400] jyoti_bhanot__: but hostname -f doesnot work
[2014-06-27 05:58:36 -0400] coderanger: Indeed, Amazon machines don't have a FQDN by default
[2014-06-27 05:58:40 -0400] jyoti_bhanot__: it gives  unknown hosts
[2014-06-27 05:58:54 -0400] digitalchild: hostname -f works for me..
[2014-06-27 05:59:03 -0400] jyoti_bhanot__: i want to set this as user friendly
[2014-06-27 05:59:07 -0400] digitalchild: heh
[2014-06-27 05:59:09 -0400] digitalchild: bad idea
[2014-06-27 05:59:12 -0400] jyoti_bhanot__: like as per my requirement
[2014-06-27 05:59:16 -0400] digitalchild: computers are just resources
[2014-06-27 05:59:27 -0400] digitalchild: dont give them friendly names, they have a task, recipe, the end
[2014-06-27 05:59:40 -0400] digitalchild: they should be designed to be destroyed at any time
[2014-06-27 05:59:50 -0400] coderanger: Yeah, I highly recommend you set a DNS alias for things like that, leave the hostname as the autogenerated one
[2014-06-27 05:59:56 -0400] coderanger: it is just less painful all around
[2014-06-27 06:00:07 -0400] jyoti_bhanot__: but I want to set the hostname
[2014-06-27 06:00:09 -0400] coderanger: you can use the route53 cookbook to create DNS enries from Chef
[2014-06-27 06:00:27 -0400] coderanger: jyoti_bhanot__: We're saying you shouldn't because it leads to much pain
[2014-06-27 06:00:51 -0400] coderanger: jyoti_bhanot__: If you really want to continue, look at https://github.com/3ofcoins/chef-cookbook-hostname
[2014-06-27 06:00:58 -0400] jyoti_bhanot__: Yes i got ur point but i want to do that
[2014-06-27 06:01:58 -0400] jyoti_bhanot__: this recipe is very difficult to use
[2014-06-27 06:02:09 -0400] coderanger: Indeed, I just said this isn't easy
[2014-06-27 06:02:26 -0400] jyoti_bhanot__: but there will be some method
[2014-06-27 06:02:36 -0400] jyoti_bhanot__: like at the tim eof bootstra p
[2014-06-27 06:02:42 -0400] jyoti_bhanot__: we can do that
[2014-06-27 06:02:44 -0400] coderanger: Generally setting the hostname is something that should be handled by the provisioning and/or bootstrap systems
[2014-06-27 06:03:06 -0400] jyoti_bhanot__: then how can i do that during bootstrap
[2014-06-27 06:03:17 -0400] coderanger: If you are using knife bootstrap or knife ec2, you can make a custom bootstrap template
[2014-06-27 06:03:23 -0400] coderanger: You'll need to write all the commands though
[2014-06-27 06:03:37 -0400] jyoti_bhanot__: yeah i am using knife ec2
[2014-06-27 06:03:41 -0400] coderanger: See http://docs.opscode.com/knife_bootstrap.html#custom-templates
[2014-06-27 06:04:00 -0400] coderanger: I recommend you start from the existing chef-full.erb and modify it rather than writing one from scratch
[2014-06-27 06:04:13 -0400] double_p: cr can read my mind
[2014-06-27 06:04:14 -0400] jyoti_bhanot__: okay
[2014-06-27 06:04:20 -0400] coderanger: See https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb
[2014-06-27 06:05:23 -0400] jyoti_bhanot__: its so complicated
[2014-06-27 06:05:30 -0400] coderanger: jyoti_bhanot__: Yes, it is
[2014-06-27 06:05:40 -0400] coderanger: jyoti_bhanot__: http://hastebin.com/telusagara.txt is the bootstrap I used long ago for something like this
[2014-06-27 06:05:46 -0400] coderanger: you can see the hostname stuff around the middle
[2014-06-27 06:06:25 -0400] jyoti_bhanot__: when to use this during bootstrap ?
[2014-06-27 06:07:02 -0400] coderanger: jyoti_bhanot__: If you would like more specific help, I offer chef consulting and training services, would be happy to discuss them with you
[2014-06-27 06:29:56 -0400] Guest2732: Hi
[2014-06-27 06:34:06 -0400] jyoti_bhanot: hi
[2014-06-27 06:37:21 -0400] chefgirl: hello chef users :)
[2014-06-27 06:48:10 -0400] CJNE: morning
[2014-06-27 06:48:45 -0400] chefgirl: @ CJNE : Morning
[2014-06-27 06:51:35 -0400] CJNE: last day before the long summer vacation here, hard to find motivation to do something useful
[2014-06-27 07:05:03 -0400] dwisnia: I want to upgrade my chef enviroment and make an "knife download -c .chef/knife-chef10.rb / -VV" that I download all the content. But it fails with the error: https://gist.github.com/anonymous/57d98b185fe9fefebc3b
[2014-06-27 07:05:35 -0400] dwisnia: any ideas to solve this? Ruby Version is: ruby 2.1.1p76
[2014-06-27 07:05:50 -0400] dwisnia: and Knife Essentials is 11.8.2
[2014-06-27 08:34:41 -0400] dwisnia: coderanger: are you there?
[2014-06-27 08:40:23 -0400] SmudgerDan: Morning
[2014-06-27 08:41:14 -0400] dwisnia: hey
[2014-06-27 08:41:26 -0400] dwisnia: I want to upgrade my chef enviroment and make an "knife download -c .chef/knife-chef10.rb / -VV" that I download all the content. But it fails with the error: https://gist.github.com/anonymous/57d98b185fe9fefebc3b
[2014-06-27 08:45:55 -0400] ambientsound: dwisnia: what does "ruby -v" say?
[2014-06-27 08:46:10 -0400] dwisnia: ruby 2.1.1p76 (2014-02-24 revision 45161) [x86_64-darwin13.0]
[2014-06-27 08:47:02 -0400] ambientsound: try standing in the root of your chef-repo and replace / with ., i.e. "knife download -c .chef/knife-chef10.rb . -VV"
[2014-06-27 08:48:26 -0400] dwisnia: nothing changed
[2014-06-27 08:48:29 -0400] dwisnia: :(
[2014-06-27 08:49:25 -0400] ambientsound: perhaps you need the 10.x version of knife?
[2014-06-27 08:49:53 -0400] ambientsound: or whichever version matches your chef server
[2014-06-27 09:04:17 -0400] dwisnia: no, with the old version it doesnt work too
[2014-06-27 09:04:32 -0400] dwisnia: ambientsound: before i had the 10.x vesion - same problem
[2014-06-27 09:16:21 -0400] Chewi: http://docs.opscode.com/upgrade_server_open_source.html#upgrade-from-chef-server-osc-11-0-4-or-higher these upgrade steps don't make sense. I suspect they are obsolete and should be removed.
[2014-06-27 09:17:30 -0400] Chewi: it says not to worry about an error from PostgreSQL. but "chef-server-ctl stop" stops PostgreSQL so how can you get an error from it? indeed, my upgrade bailed out because it couldn't to PostgreSQL at all.
[2014-06-27 10:40:07 -0400] whiteadam: tgif
[2014-06-27 10:40:27 -0400] jonlives: indeed
[2014-06-27 10:40:44 -0400] whiteadam: ugh, you're here again?
[2014-06-27 10:40:45 -0400] whiteadam: :)
[2014-06-27 10:41:10 -0400] whiteadam: You better be finishing that book
[2014-06-27 11:21:10 -0400] whiteadam: jonlives: Hah, I thought you were just awake really early, then I saw your location on Github
[2014-06-27 11:27:00 -0400] jyoti_bhanot: can we create a Centos Server using a chef recipe ???
[2014-06-27 11:27:27 -0400] whiteadam: jyoti_bhanot: It's a bit more complex than that :)
[2014-06-27 11:27:51 -0400] Cope: jyoti_bhanot: what do you mean - what do you want the server to do?
[2014-06-27 11:27:56 -0400] jyoti_bhanot: but what are the requirements for that ??
[2014-06-27 11:28:11 -0400] Cope: jyoti_bhanot: start from where you want to end up :) what are you trying to achieve?
[2014-06-27 11:28:37 -0400] jyoti_bhanot: I want to create a centos server
[2014-06-27 11:29:17 -0400] Cope: ok, you can do that by installing centos from a cd onto a computer, or buying a virtual computer running centos in eg amazon, rackspace etc
[2014-06-27 11:29:24 -0400] Cope: but what do you want the server to do?
[2014-06-27 11:29:36 -0400] whiteadam: jyoti_bhanot: Chef configures the server, but you must install it.
[2014-06-27 11:29:49 -0400] jyoti_bhanot: okay
[2014-06-27 11:30:16 -0400] Cope: jyoti_bhanot: so if you have a computer - eg a rack-mounted computer, or a tower pc or whatever - you can install the centos operating system on it
[2014-06-27 11:30:21 -0400] Cope: then you have a server
[2014-06-27 11:30:26 -0400] Cope: but it won't really do anything
[2014-06-27 11:30:39 -0400] Cope: or you can rent one which already has the OS installed
[2014-06-27 11:31:12 -0400] Cope: I guess the basic question I'm asking is: why do you want a centos server?
[2014-06-27 11:42:41 -0400] jyoti_bhanot: does anybody has any chef recipe that installs LAMP in on shot ?
[2014-06-27 11:52:31 -0400] alexbst: jyoti_bhanot - use a combination of the Apache, MySQL and php cookbooks ?
[2014-06-27 11:52:44 -0400] whiteadam: jyoti_bhanot: You can use https://github.com/poise/application_php along with https://github.com/opscode-cookbooks/mysql
[2014-06-27 11:55:12 -0400] jyoti_bhanot: I have the recipe to install apache on centos
[2014-06-27 11:56:13 -0400] matti: ;]
[2014-06-27 11:56:16 -0400] matti: whiteadam: Ohai
[2014-06-27 11:56:24 -0400] whiteadam: ohai matti
[2014-06-27 11:56:30 -0400] matti: jonlives: How is the book coming? ;]
[2014-06-27 11:57:01 -0400] whiteadam: matti: I fell for his shameless plug and got the pre-release :)
[2014-06-27 11:57:55 -0400] matti: Haha
[2014-06-27 11:58:11 -0400] matti: whiteadam: You fixing his spelling mistakes now? ;]
[2014-06-27 11:58:43 -0400] whiteadam: Haha, I don't know if I'm good enough to find mistakes, much less fix them.
[2014-06-27 11:59:16 -0400] matti: MOAR confidence ;p
[2014-06-27 11:59:46 -0400] whiteadam: but if I do find one... I will demand it be fixed immediately.
[2014-06-27 12:01:46 -0400] whiteadam: matti: I got Seth Vargo's new one too, so I gotta read that first so I know what I'm doing
[2014-06-27 12:03:05 -0400] matti: Haha
[2014-06-27 12:03:33 -0400] matti: Yoda would samething along the lines of you being an impatient one, etc.
[2014-06-27 12:03:34 -0400] matti: ;p
[2014-06-27 12:03:45 -0400] whiteadam: matti: Our time tracking system is down all day for maintenance, so I don't have to log time... Maybe I can use this excuse to read.
[2014-06-27 12:04:00 -0400] matti: You log time?
[2014-06-27 12:04:39 -0400] whiteadam: Yeah, I'm a consultant, so every minute of each 8 hour day has to be tracked so it can be billed. It's the most annoying thing ever.
[2014-06-27 12:10:07 -0400] matti: A consultant.
[2014-06-27 12:10:14 -0400] matti: ;]
[2014-06-27 12:10:26 -0400] matti: Do you like it?
[2014-06-27 12:10:37 -0400] matti: I mean, this sort of type of work.
[2014-06-27 12:20:22 -0400] bmurt: morning
[2014-06-27 12:22:59 -0400] whiteadam: matti: eh, it's all right.
[2014-06-27 12:23:37 -0400] whiteadam: matti: my company and customers are all fortune 100 types, so they hate open source, which I hate :)
[2014-06-27 12:24:45 -0400] Shred00: in chef 9 i used to be able use a config variable as a service name.  can i not do that in chef 11 also?  i.e.:
[2014-06-27 12:24:45 -0400] Shred00: service config[:server_service] do
[2014-06-27 12:30:35 -0400] chefgirl: Can I launch an EC2 instance with multiple volumes using chef & knife EC2???
[2014-06-27 12:31:10 -0400] chefgirl: till now I am able to launch instances with only one volume.
[2014-06-27 12:31:29 -0400] jonlives: matti: sorry just saw your question - it's going good thanks :)
[2014-06-27 12:33:24 -0400] whiteadam: jonlives: I guess you didn't see me making fun of you either, the shame.
[2014-06-27 12:33:37 -0400] jonlives: i did :p
[2014-06-27 12:33:45 -0400] whiteadam: hehe <3
[2014-06-27 12:34:18 -0400] jonlives: haha yeah def wouldn't be awake that early if I was in the US :p
[2014-06-27 12:35:40 -0400] whiteadam: chefgirl: I think it's a little more complex, like a recipe has to make it
[2014-06-27 12:36:19 -0400] chefgirl: menas we cannot do it in with knife ec2 server create command ?
[2014-06-27 12:36:23 -0400] whiteadam: chefgirl: https://github.com/opscode-cookbooks/aws
[2014-06-27 12:36:42 -0400] whiteadam: chefgirl: No, I don't think that command supports multiple volumes.
[2014-06-27 12:37:17 -0400] whiteadam: chefgirl: You would create a server with knife-ec2 w/ a database role and that role would know that it needed multiple EBS volumes and configure them itself... I think
[2014-06-27 12:37:18 -0400] chefgirl: whiteadam : Thanks Man
[2014-06-27 12:40:36 -0400] chefgirl: can anybody give me a recipe ( an easy one ;) ) to install php
[2014-06-27 12:40:40 -0400] chefgirl: on centos
[2014-06-27 12:41:31 -0400] whiteadam: chefgirl: there's one called application, one sec
[2014-06-27 12:41:39 -0400] whiteadam: chefgirl: like, apache w/ php?
[2014-06-27 12:41:49 -0400] chefgirl: yeah
[2014-06-27 12:41:54 -0400] whiteadam: https://github.com/poise/application_php
[2014-06-27 12:41:58 -0400] whiteadam: I think that's it
[2014-06-27 12:42:02 -0400] chefgirl: how to use this
[2014-06-27 12:42:27 -0400] whiteadam: https://github.com/poise/application_php#description
[2014-06-27 12:50:59 -0400] BryanWB: is there a way to end a chef run early to run the handlers w/out raising an error?
[2014-06-27 12:51:24 -0400] BryanWB: i have some resources that depend a reboot happening previously
[2014-06-27 13:17:26 -0400] rak1988: hello
[2014-06-27 13:18:50 -0400] rak1988: I am facing with a problem with configuring chef client to forward the logs to rsyslog. The avaiable documentation on the internet is taking me nowhere
[2014-06-27 13:20:37 -0400] Chewi: rak1988: the rsyslog cookbook worked out of the box for me. are you using that?
[2014-06-27 13:20:54 -0400] Chewi: actually nevermind
[2014-06-27 13:20:59 -0400] Chewi: I misread
[2014-06-27 13:21:16 -0400] rak1988: I want to configure chef client to send logs to rsyslog
[2014-06-27 13:21:24 -0400] Chewi: I haven't tried that yet
[2014-06-27 13:21:55 -0400] rak1988: https://github.com/opscode-cookbooks/chef-client
[2014-06-27 13:22:45 -0400] rak1988: I followed this doc and configured my client.rb using syslog-logger. I am getting an error. Here  I am stuck. Is this a bug in chef ?
[2014-06-27 13:22:48 -0400] whiteadam: rak1988: You mean just like, the chef client run puts a log into /var/log/whatever
[2014-06-27 13:22:56 -0400] rak1988: yes exactly
[2014-06-27 13:23:10 -0400] whiteadam: One sec, I saw it recently...
[2014-06-27 13:23:55 -0400] whiteadam: rak1988: http://docs.opscode.com/debug.html#chef-client
[2014-06-27 13:23:58 -0400] whiteadam: Like that?
[2014-06-27 13:25:49 -0400] rak1988: yeah. But when I configure my log_location with syslog-logger configuration its throwing a TypeError since log_location expects only strings
[2014-06-27 13:26:30 -0400] rak1988: require 'rubygems' require 'syslog-logger' log_level :info   Logger::Syslog.class_eval do attr_accessor :sync, :formatter end log_location Logger::Syslog.new("chef-client")
[2014-06-27 13:26:45 -0400] whiteadam: hmm
[2014-06-27 13:26:49 -0400] rak1988: log_location Logger::Syslog.new("chef-client")
[2014-06-27 13:26:53 -0400] rak1988: this is throwing an error
[2014-06-27 13:27:43 -0400] rak1988:  FATAL: Failed to open or create log file at #<Logger::Syslog:0x000000018f86c0>: TypeError (can't convert Logger::Syslog into String)
[2014-06-27 13:27:50 -0400] rak1988: this is the error it is throwing
[2014-06-27 13:28:31 -0400] whiteadam: Hmm, I dunno on that one
[2014-06-27 13:32:59 -0400] rak1988: is there any work around on sending chef logs to rsyslog ? any docs ? any info is valuable
[2014-06-27 13:40:04 -0400] rak1988: is there anyway I can make my chef logs to be forwarded to rsyslog ? anyway that you know of ? or any docs would also help
[2014-06-27 13:43:30 -0400] rak1988: hello
[2014-06-27 13:44:21 -0400] gchristensen: rak1988: you can configure chef to send to syslog
[2014-06-27 13:44:38 -0400] gchristensen: https://github.com/higanworks-cookbooks/chef-client_syslog
[2014-06-27 13:48:34 -0400] whiteadam: rak1988: Check this out: https://github.com/higanworks-cookbooks/chef-client_syslog/blob/master/templates/default/client.erb
[2014-06-27 13:49:09 -0400] whiteadam: gchristensen: Honestly, this guy's looks almost identical to what rak1988 already has :)
[2014-06-27 13:49:25 -0400] gchristensen: whiteadam: I didn't do any scroll up :)
[2014-06-27 13:49:35 -0400] whiteadam: MUST BE NICE!
[2014-06-27 13:50:23 -0400] gchristensen: with an awesome hot cup of coffee
[2014-06-27 13:50:56 -0400] whiteadam: Yah, not too bad in the ATX today, Looks like rain though
[2014-06-27 13:59:26 -0400] rak1988: whiteadam: I tried that already. I am getting the TypeError for this
[2014-06-27 14:03:36 -0400] rak1988: Anyway thanks a lot for the quick response guys !
[2014-06-27 14:04:24 -0400] rak1988: if anyone have some thoughts on how to send chef logs to rsyslog, please let me know ! Thank you !
[2014-06-27 14:17:34 -0400] markp: hi everyone
[2014-06-27 14:17:42 -0400] SmudgerDan: Hi markp
[2014-06-27 14:17:50 -0400] markp: question RE bootstrapping windows ec2 nodes
[2014-06-27 14:18:05 -0400] markp: can't seem to authenticate properly
[2014-06-27 14:18:23 -0400] markp: followed online docs to have the extra winrm params set
[2014-06-27 14:18:32 -0400] markp: auth times out
[2014-06-27 14:20:53 -0400] SmudgerDan: Sorry mate no idea, I'm new to all this chef stuff :)
[2014-06-27 14:24:33 -0400] SmudgerDan: I need to check if a process is running, I can check a service by using "::Win32::service.exists?([service name]) anything similar for processes?
[2014-06-27 14:26:22 -0400] markp: The win32 lib may have something for processes, but I doubt it could check a specific one
[2014-06-27 14:26:41 -0400] markp: you may have to iterate over a list and find the one you need to check
[2014-06-27 14:27:47 -0400] SmudgerDan: cheers, stupid old app which should be a windows service makes life harder for me
[2014-06-27 14:31:10 -0400] nobody18188181: how can you can test chef-client run with a new recipe if the recipe being updated is already a frozen one?
[2014-06-27 14:32:18 -0400] hhoover: nobody18188181 test locally with TestKitchen/Vagrant http://kitchen.ci
[2014-06-27 14:33:24 -0400] nobody18188181: hhoover: does it work with data bags?
[2014-06-27 14:34:03 -0400] hhoover: yes
[2014-06-27 14:34:04 -0400] hhoover: http://atomic-penguin.github.io/blog/2013/06/07/HOWTO-test-kitchen-and-encrypted-data-bags/
[2014-06-27 14:34:08 -0400] hhoover: nobody18188181 ^
[2014-06-27 14:34:26 -0400] nobody18188181: ty
[2014-06-27 14:51:58 -0400] prometheanfire: why are we using enc data bags?
[2014-06-27 14:52:08 -0400] prometheanfire: they are only useful if we don't trust the chef server
[2014-06-27 14:53:04 -0400] whiteadam: prometheanfire: can't trust computers
[2014-06-27 14:53:09 -0400] Chewi: prometheanfire: maybe in case it's compromised but that could easily mean game over anyway
[2014-06-27 14:53:37 -0400] prometheanfire: yep, just distribute something :D
[2014-06-27 14:53:54 -0400] whiteadam: Yeah, with PCI DSS 3.0, a Chef server would be considered in-scope, so you've got to do something to appease the auditor.
[2014-06-27 14:54:17 -0400] prometheanfire: ok, that makes some sense :D
[2014-06-27 14:54:27 -0400] whiteadam: yeah, it's the worst.
[2014-06-27 14:54:51 -0400] whiteadam: Chewi: just quit man
[2014-06-27 14:54:54 -0400] Chewi: haha
[2014-06-27 14:55:24 -0400] whiteadam: we're trying to do it for 2 customers now and I feel like we lie more than anything. I refuse to lie, so I'm not in good standing with mgmt right now
[2014-06-27 14:55:55 -0400] whiteadam: I'm gonna have my resume ready once the quarterly/yearly audit rolls around, that's for sure :)
[2014-06-27 14:55:56 -0400] Chewi: yeah I'm not one to lie either
[2014-06-27 14:56:32 -0400] whiteadam: Heh, to me computers are math, you can prove it one way or another, so no lieing.
[2014-06-27 14:56:35 -0400] prometheanfire: ya, not a good way to operate
[2014-06-27 14:57:07 -0400] whiteadam: prometheanfire: I guess that's what happens when sales is so far removed from those who actually do the work. Contracts get signed that can't be honored :(
[2014-06-27 14:57:38 -0400] prometheanfire: yep
[2014-06-27 14:57:47 -0400] prometheanfire: I know all about that
[2014-06-27 14:57:49 -0400] Chewi: luckily we're a small outfit so I can just go into the next room and moan at the sales guy's face :D
[2014-06-27 14:57:56 -0400] whiteadam: haha
[2014-06-27 14:58:51 -0400] whiteadam: So we were actually told recently that if your commerce application leaves your site and goes to say paypal.com for the card info, then returns to your site... that none of your servers are in scope.
[2014-06-27 14:59:01 -0400] whiteadam: And I was like "whatever we need to do... we need to do that"
[2014-06-27 14:59:25 -0400] Chewi: that's pretty much why paypal exists
[2014-06-27 14:59:27 -0400] prometheanfire: yep
[2014-06-27 14:59:36 -0400] prometheanfire: I do like how that works
[2014-06-27 14:59:53 -0400] jonlives: heh half of the reason we ended up doing PCI ourselves was paypal issues :p
[2014-06-27 15:00:00 -0400] whiteadam: I like how it removes you from the equation, because getting real-deal PCI Level 1 certified... that's a beast.
[2014-06-27 15:00:07 -0400] x0nic: jonlives: And that is why stripe exists
[2014-06-27 15:00:38 -0400] whiteadam: Can't remember who we use... someone with a confusing name.
[2014-06-27 15:00:45 -0400] jonlives: x0nic: they don't support enough countries :)
[2014-06-27 15:01:33 -0400] jonlives: also we'd already started setting up PCI by the time they launched publicly.
[2014-06-27 15:01:47 -0400] x0nic: jonlives: Yeah, if you need wide country support. Unfortunately takes you back to paypal. :(
[2014-06-27 15:01:55 -0400] jonlives: oorrrr doing it ourselves :p
[2014-06-27 15:01:59 -0400] jonlives: which is what we ended up doing.
[2014-06-27 15:02:07 -0400] whiteadam: that sounds like a nightmare zone
[2014-06-27 15:02:24 -0400] jonlives: having it as a totally separate infra helps tho
[2014-06-27 15:02:34 -0400] jonlives: only things that move from pci to our prod infra are tokens
[2014-06-27 15:03:04 -0400] whiteadam: Yeah, good move.
[2014-06-27 15:03:27 -0400] whiteadam: I think one of our integrations does like, Cybersource, Vertex, Paypal, and ShopRunner... it's super annoying
[2014-06-27 15:03:45 -0400] whiteadam: Also depends on what the QSA considers "cardholder data"
[2014-06-27 15:04:05 -0400] prometheanfire: good luck keeping that consistant
[2014-06-27 15:04:13 -0400] whiteadam: oh yeah, nope.
[2014-06-27 15:04:38 -0400] gyoza: hello irc
[2014-06-27 15:04:41 -0400] gyoza: hello adam
[2014-06-27 15:04:48 -0400] whiteadam: sup gyoza
[2014-06-27 15:05:00 -0400] gyoza: nothing its friday
[2014-06-27 15:05:03 -0400] gyoza: :P
[2014-06-27 15:05:16 -0400] gyoza: im just at work physically
[2014-06-27 15:05:43 -0400] whiteadam: Hah, I'm on a 1 hour call telling me how to fill out the performance review that I filled out 2 weeks ago. ATTENDANCE MANDATORY
[2014-06-27 15:05:49 -0400] gyoza: nice
[2014-06-27 15:05:54 -0400] gyoza: sounds like you work for a shitty company
[2014-06-27 15:05:56 -0400] gyoza: no offense
[2014-06-27 15:06:02 -0400] whiteadam: Nah, it's just huge
[2014-06-27 15:06:07 -0400] gyoza: i hate red tape
[2014-06-27 15:06:11 -0400] gyoza: the company i work at has 8 people
[2014-06-27 15:06:11 -0400] gyoza: lol
[2014-06-27 15:06:22 -0400] gyoza: EIGHT
[2014-06-27 15:06:25 -0400] shadylog: Can I ask a question about how Chef master works?
[2014-06-27 15:06:35 -0400] gyoza: shadylog: what do you mean?
[2014-06-27 15:06:36 -0400] sarkis: shadylog: you just did
[2014-06-27 15:06:38 -0400] shadylog: Does it push configuration/state to chef?
[2014-06-27 15:06:41 -0400] shadylog: haha
[2014-06-27 15:06:51 -0400] shadylog: or does each chef node Pull configuration?
[2014-06-27 15:07:01 -0400] sarkis: chef-client pulls it
[2014-06-27 15:07:03 -0400] whiteadam: gyoza: Mine has about 23,000
[2014-06-27 15:07:09 -0400] jonlives: each node pulls data from the server, but enterprise chef does allow you to push chef runs to the servers
[2014-06-27 15:07:10 -0400] shadylog: right.
[2014-06-27 15:07:17 -0400] shadylog: ah
[2014-06-27 15:07:34 -0400] jonlives: or rather have the server tell the runs to start rather than cron or daemonized mode doing it
[2014-06-27 15:07:39 -0400] shadylog: so there is no way for non-enterprise to initiate a chef run remotely ?
[2014-06-27 15:07:48 -0400] jonlives: shadylog: dsh? :p
[2014-06-27 15:08:00 -0400] gyoza: whiteadam: holy craip!
[2014-06-27 15:08:06 -0400] whiteadam: shadylog: You can run it from the client, but not the server.
[2014-06-27 15:08:06 -0400] jonlives: shadylog: we run it in damonized mode every 10 mins so it runs fairly often by itself
[2014-06-27 15:08:14 -0400] gyoza: yea
[2014-06-27 15:08:17 -0400] gyoza: mine is on a ranomizer also
[2014-06-27 15:08:20 -0400] gyoza: every 15 mins
[2014-06-27 15:08:20 -0400] sarkis: shadylog: you can use knife to "orchestrate"
[2014-06-27 15:08:26 -0400] whiteadam: I do it the same as jonlives
[2014-06-27 15:08:28 -0400] gyoza: it will run within 3-10 minutes
[2014-06-27 15:08:30 -0400] shadylog: okay
[2014-06-27 15:08:37 -0400] sarkis: knife ssh "SEARCH" "chef-client"
[2014-06-27 15:08:39 -0400] whiteadam: daemonized with splay
[2014-06-27 15:08:45 -0400] jonlives: ^ yep
[2014-06-27 15:08:47 -0400] gyoza: mine is done with chron:P
[2014-06-27 15:08:48 -0400] gyoza: cron
[2014-06-27 15:08:51 -0400] gyoza: <-- ghetto hacker
[2014-06-27 15:09:04 -0400] whiteadam: lol
[2014-06-27 15:09:16 -0400] gyoza: i mean is there a disadvantage with using crons over splay?
[2014-06-27 15:09:29 -0400] gyoza: i wanna do things right so
[2014-06-27 15:09:41 -0400] sarkis: i can think of disadvantages of a daemon
[2014-06-27 15:09:43 -0400] sarkis:  :P
[2014-06-27 15:09:52 -0400] gyoza: yes me too
[2014-06-27 15:09:55 -0400] whiteadam: gyoza: Hah, I use the chef-client cookbook basically with the defaults
[2014-06-27 15:10:07 -0400] gyoza: i see
[2014-06-27 15:10:43 -0400] whiteadam: I think an 1800 interval with a 300 splay
[2014-06-27 15:10:58 -0400] whiteadam: You can tell the cookbook to cron though, if that's what you want.
[2014-06-27 15:11:15 -0400] whiteadam: I just don't want 300 servers slamming the chef server at the exact same time every x minutes
[2014-06-27 15:11:17 -0400] gyoza: mine runs a script that generates a sleep timer based on a bunch of stupid bashmath
[2014-06-27 15:11:49 -0400] gyoza: it works good:P
[2014-06-27 15:11:57 -0400] shadylog: okay thanks
[2014-06-27 15:13:02 -0400] whiteadam: I think some chick on LinkedIn is trying to catfish me.
[2014-06-27 15:13:06 -0400] gyoza: link
[2014-06-27 15:13:10 -0400] shadylog: btw, why has chef chosen for a pull configuration instead of push?
[2014-06-27 15:13:15 -0400] whiteadam: Wanting info on enterprise storage
[2014-06-27 15:13:22 -0400] gyoza: shadylog: cause systems can disappear
[2014-06-27 15:13:32 -0400] gyoza: thats one reason?
[2014-06-27 15:13:34 -0400] gyoza: i dont know really
[2014-06-27 15:13:35 -0400] shadylog: yes the master ?
[2014-06-27 15:13:39 -0400] gyoza: no i mean like
[2014-06-27 15:13:44 -0400] gyoza: say you have a cluster of machines that goes offline
[2014-06-27 15:13:46 -0400] shadylog: it becomes a SPOF
[2014-06-27 15:13:51 -0400] gyoza: and then the master server starts trying to update those
[2014-06-27 15:13:57 -0400] gyoza: freaks out
[2014-06-27 15:14:00 -0400] gyoza: i dunno
[2014-06-27 15:14:00 -0400] gyoza: :P
[2014-06-27 15:14:05 -0400] shadylog: hmm
[2014-06-27 15:14:09 -0400] gyoza: also
[2014-06-27 15:14:15 -0400] gyoza: whats the point of having a system bootstrap itself
[2014-06-27 15:14:20 -0400] gyoza: then tell the server "hey what do i do"
[2014-06-27 15:14:26 -0400] gyoza: and then the server goes "talk to me later"
[2014-06-27 15:15:13 -0400] shadylog: but by pulling from the master does it not ask "what do i do" each time?
[2014-06-27 15:15:42 -0400] whiteadam: "hey i'm server01, anything new?" "nope" "k, seeya"
[2014-06-27 15:16:26 -0400] gyoza: I just dont see any advantages over a push from the esrver
[2014-06-27 15:16:28 -0400] shadylog: but doesn't that become a problem when your cronjob is initiated on all nodes at minite 0 ? :)
[2014-06-27 15:16:37 -0400] gyoza: we just told you its randomized
[2014-06-27 15:16:45 -0400] shadylog: I was more thinking along the lines of a push from the user
[2014-06-27 15:16:47 -0400] whiteadam: Yeah, splay, like an ntp server
[2014-06-27 15:16:49 -0400] gyoza: we have a script that runs a job  that randomizes the chef client checkin
[2014-06-27 15:17:04 -0400] whiteadam: If push is better... why doesn't NTPd do it!
[2014-06-27 15:17:05 -0400] whiteadam: :)
[2014-06-27 15:17:13 -0400] shadylog: hah nice one
[2014-06-27 15:17:34 -0400] jonlives: yeah having a randomized splay on top of the daemon's timeout is what avoids the thundering herd problem
[2014-06-27 15:17:51 -0400] gyoza: Thundering herd i like that
[2014-06-27 15:18:05 -0400] shadylog: But people can live with their servers not all updating in the same timeframe?
[2014-06-27 15:18:22 -0400] jonlives: shadylog: the timeframe is still there, plus or minus the splay
[2014-06-27 15:18:46 -0400] jonlives: so we know anything new will be out within (in our case) 15 mins
[2014-06-27 15:18:55 -0400] whiteadam: shadylog: yeah, I think we all do. If it's really that big of a deal, fresh servers, jenkins ci, and rotating on a load balancer should probably be considered.
[2014-06-27 15:18:58 -0400] jonlives: if it's time sensitive we can use dsh to tell 'em all to run chef
[2014-06-27 15:19:02 -0400] gyoza: shadylog: i have a cronjob that calls this every 15 mins
[2014-06-27 15:19:03 -0400] gyoza: http://gyazo.com/314fc9dcc8eab338507d85fdb3d6e272
[2014-06-27 15:19:08 -0400] shadylog: I heard there are people using git and pushing config through ssh, what do you think of that?
[2014-06-27 15:19:26 -0400] jonlives: shadylog: with chef?
[2014-06-27 15:19:26 -0400] sarkis: shadylog: it is staggered, refer to knife if you need to update a set of servers at once i.e. if you make changes to a specific apps config and need to push it out asap and can't wait for next run
[2014-06-27 15:19:27 -0400] shadylog: (i'm not trying to be cheeky, i'm doing a thesis on Configuration management)
[2014-06-27 15:19:31 -0400] shadylog: jonlives: yes
[2014-06-27 15:19:32 -0400] whiteadam: shadylog: sounds like puppet
[2014-06-27 15:19:39 -0400] shadylog: no AirBnB does it
[2014-06-27 15:19:42 -0400] jonlives: I've never heard of that being done with chef
[2014-06-27 15:19:56 -0400] gyoza: sounds like aws
[2014-06-27 15:19:58 -0400] gyoza: actually
[2014-06-27 15:20:03 -0400] gyoza: w/ opswork
[2014-06-27 15:20:04 -0400] jonlives: shadylog: they use chef-solo which has no server: http://nerds.airbnb.com/making-breakfast-chef-airbnb/
[2014-06-27 15:20:04 -0400] shadylog: http://nerds.airbnb.com/making-breakfast-chef-airbnb/
[2014-06-27 15:20:06 -0400] sarkis: maybe with chef solo?
[2014-06-27 15:20:09 -0400] gyoza: Thats opswork
[2014-06-27 15:20:10 -0400] gyoza: for sure
[2014-06-27 15:20:11 -0400] shadylog: yes with chef-solo
[2014-06-27 15:20:18 -0400] jonlives: right - there's no central chef server there
[2014-06-27 15:20:20 -0400] shadylog: yes that's what I mean
[2014-06-27 15:20:22 -0400] whiteadam: Yeah, makes sense fo their use-case
[2014-06-27 15:20:23 -0400] shadylog: :)
[2014-06-27 15:20:31 -0400] whiteadam: or their style
[2014-06-27 15:20:32 -0400] jonlives: yeah - if it makes sense for them, then sure :)
[2014-06-27 15:20:44 -0400] gyoza: airbnb is probably using advanced autoscaling techniques which require a bootstrapped type environment
[2014-06-27 15:20:48 -0400] shadylog: but why does it make sense for them and not for well the rest?
[2014-06-27 15:20:52 -0400] whiteadam: Some people like centralization, some people like de-centralization
[2014-06-27 15:20:56 -0400] shadylog: ah
[2014-06-27 15:21:01 -0400] jonlives: but then, facebook use multiple chef servers
[2014-06-27 15:21:08 -0400] gyoza: shadylog: its depends on who is engineering it really
[2014-06-27 15:21:09 -0400] jonlives: and they're about the biggest chef user there is
[2014-06-27 15:21:10 -0400] gyoza: and what they prefer.
[2014-06-27 15:21:18 -0400] whiteadam: I like central for stats and such
[2014-06-27 15:21:19 -0400] gyoza: jon: riot games uses chef
[2014-06-27 15:21:22 -0400] gyoza: they run League of Legends
[2014-06-27 15:21:29 -0400] shadylog: right
[2014-06-27 15:21:31 -0400] gyoza: that game has a million+ users
[2014-06-27 15:21:42 -0400] jonlives: gyoza: facebook are waaaaay bigger than riot infra wise.
[2014-06-27 15:21:43 -0400] whiteadam: And, like we were talking about earlier, sometimes there's PCI and HIPAA type rules to work around.
[2014-06-27 15:21:48 -0400] gyoza: i guess so
[2014-06-27 15:21:50 -0400] gyoza: i just hate facebook
[2014-06-27 15:21:53 -0400] whiteadam: lo
[2014-06-27 15:21:54 -0400] gyoza: :P
[2014-06-27 15:21:59 -0400] cheeseplus: gyoza: like crazy bigger
[2014-06-27 15:22:06 -0400] gyoza: crazy crazy
[2014-06-27 15:22:15 -0400] gyoza: man facebook what the hell
[2014-06-27 15:22:15 -0400] shadylog: What's the limit on a single chef server not being able to handle n nodes?
[2014-06-27 15:22:19 -0400] jonlives: facebook are into six digits worth of servers by quite a long way
[2014-06-27 15:22:22 -0400] whiteadam: their infra could beat your infra up
[2014-06-27 15:22:23 -0400] gyoza: wow
[2014-06-27 15:22:24 -0400] shadylog: facebook uses multiple servers apparently
[2014-06-27 15:22:25 -0400] jonlives: shadylog: depends on the spec of the node
[2014-06-27 15:22:36 -0400] cheeseplus: shadylog: the limits are much higher with erchef
[2014-06-27 15:22:37 -0400] jonlives: shadylog: yeah - but they have 5 digits worth of nodes on each server
[2014-06-27 15:22:44 -0400] cheeseplus: 10k nodes at once can is doable
[2014-06-27 15:22:52 -0400] cheeseplus: based on the facebook preso from last year
[2014-06-27 15:22:54 -0400] shadylog: erchef ?
[2014-06-27 15:23:06 -0400] cheeseplus: shadylog: chef server rewrite in erlang
[2014-06-27 15:23:16 -0400] jonlives: chef server version 11, basically.
[2014-06-27 15:23:21 -0400] whiteadam: ermygherdland
[2014-06-27 15:23:21 -0400] gyoza: where is haskellchef
[2014-06-27 15:23:27 -0400] gyoza: loool
[2014-06-27 15:23:31 -0400] jonlives: shadylog: http://www.getchef.com/blog/2012/08/27/introducing-erchef/
[2014-06-27 15:23:35 -0400] whiteadam: gyoza: go away, I knew I was wrong
[2014-06-27 15:23:37 -0400] shadylog: cool
[2014-06-27 15:23:40 -0400] gyoza: :(
[2014-06-27 15:23:52 -0400] shadylog: How many use chef-solo though?
[2014-06-27 15:23:54 -0400] shadylog: of you guys?
[2014-06-27 15:23:58 -0400] gyoza: i dont even care about haskell iw as just using the buzzword of the programmers
[2014-06-27 15:23:59 -0400] whiteadam: not i
[2014-06-27 15:24:00 -0400] jonlives: we don't
[2014-06-27 15:24:05 -0400] gyoza: :P
[2014-06-27 15:24:07 -0400] cheeseplus: depends on the client
[2014-06-27 15:24:09 -0400] MrHeavy: Every time I try to list anything on the server (clients, cookbooks, etc.) with knife, I'm getting this error: "ERROR: TypeError: wrong argument type nil (expected Fixnum)"
[2014-06-27 15:24:12 -0400] shadylog: ok
[2014-06-27 15:24:13 -0400] MrHeavy: Anyone have any idea what might be going on
[2014-06-27 15:24:26 -0400] MrHeavy: (or how I can get a better trace out of knife?)
[2014-06-27 15:24:28 -0400] jonlives: MrHeavy: I'd suspect you're missing a config variable in your knife.rb
[2014-06-27 15:24:32 -0400] gyoza: looks like you're mising something
[2014-06-27 15:24:35 -0400] jonlives: knife -VV increases the verbosity
[2014-06-27 15:24:53 -0400] shadylog: this is the client: He wants to create and recreate a cluster of machines every day of the week to run his performance tests
[2014-06-27 15:24:58 -0400] shadylog: what do you recommend?
[2014-06-27 15:25:11 -0400] gyoza: Computers
[2014-06-27 15:25:26 -0400] whiteadam: shadylog: opsworks
[2014-06-27 15:25:33 -0400] shadylog: :P
[2014-06-27 15:25:45 -0400] gyoza: yea
[2014-06-27 15:25:45 -0400] jonlives: shadylog: honestly I'd recommend the server so you're sure each node has the same data, but then I'm biased cos we use server
[2014-06-27 15:26:04 -0400] shadylog: data?
[2014-06-27 15:26:10 -0400] shadylog: data is supplied by a different server
[2014-06-27 15:26:18 -0400] shadylog: and is always on
[2014-06-27 15:26:21 -0400] jonlives: shadylog: I meant data as in chef artifacts like cookbooks and databags
[2014-06-27 15:26:25 -0400] whiteadam: data from star trek?
[2014-06-27 15:26:30 -0400] shadylog: ok
[2014-06-27 15:26:34 -0400] MrHeavy: knife.rb looks okay (it hasn't changed in probably a year) but the knife -VV output suggests my server is maybe returning something unexpected since I updated to the latest omnibus version
[2014-06-27 15:26:48 -0400] jonlives: MrHeavy: what server / client versions are you running?
[2014-06-27 15:26:50 -0400] shadylog: are databags btw large?
[2014-06-27 15:26:56 -0400] jonlives: shadylog: they're just JSON
[2014-06-27 15:26:57 -0400] gyoza: they can be as big as you want
[2014-06-27 15:27:02 -0400] jonlives: can be as large or small as you want
[2014-06-27 15:27:09 -0400] shadylog: but the modules they are large right?
[2014-06-27 15:27:15 -0400] shadylog: can be pretty hefty
[2014-06-27 15:27:15 -0400] jonlives: shadylog: what modules?
[2014-06-27 15:27:16 -0400] shadylog: ?
[2014-06-27 15:27:21 -0400] shadylog: err.. I mean cookbooks
[2014-06-27 15:27:22 -0400] gyoza: to install apache on chef
[2014-06-27 15:27:22 -0400] whiteadam: lots of puppet talk in here
[2014-06-27 15:27:23 -0400] gyoza: its one line
[2014-06-27 15:27:26 -0400] gyoza: 3 lines
[2014-06-27 15:27:29 -0400] jonlives: again, as large or small as you want
[2014-06-27 15:27:30 -0400] gyoza: not heavy
[2014-06-27 15:27:32 -0400] jonlives: cookbooks are just ruby
[2014-06-27 15:27:34 -0400] MrHeavy: jonlives: 11.12.8 on both ends
[2014-06-27 15:27:52 -0400] jonlives: you *can* include huge binary files in your cookbook if you really want to, but most people don't for obvious reasons :p
[2014-06-27 15:27:53 -0400] shadylog: pillars modules, manifests, cookbooks.. I have read too much..
[2014-06-27 15:27:56 -0400] whiteadam: MrHeavy: Server is only at 11.1.something
[2014-06-27 15:28:19 -0400] gyoza: im running latest server w/ 11.12.8 no issues
[2014-06-27 15:28:27 -0400] shadylog: so the payload a client pulls from server is the databags and the modules ?
[2014-06-27 15:28:32 -0400] gyoza: but im also in testing phase..
[2014-06-27 15:28:32 -0400] MrHeavy: My bad, it's apparently still at 11.0.11. Guess an update is in order
[2014-06-27 15:28:46 -0400] shadylog: does it send delta's on the modules or do they get copied in full every time?
[2014-06-27 15:28:51 -0400] jonlives: shadylog: delta
[2014-06-27 15:28:56 -0400] jonlives: via checksums
[2014-06-27 15:28:57 -0400] gyoza: shdylog: databags are are where your variables live
[2014-06-27 15:29:09 -0400] shadylog: so chef-client does store modules locally ?
[2014-06-27 15:29:18 -0400] jonlives: shadylog: cookbooks, yes
[2014-06-27 15:29:19 -0400] gyoza: there is no modules
[2014-06-27 15:29:24 -0400] shadylog: err yes
[2014-06-27 15:29:27 -0400] shadylog: sorry
[2014-06-27 15:29:36 -0400] jonlives: again apologies for the self plug, but chapter 3 explains all of this :P http://shop.oreilly.com/product/0636920032984.do
[2014-06-27 15:29:37 -0400] gyoza: chef-client asks chef-server what do i do
[2014-06-27 15:29:42 -0400] gyoza: and chef server says you do this and this and that
[2014-06-27 15:29:52 -0400] gyoza: simply put
[2014-06-27 15:30:05 -0400] MrHeavy: That explanation is way more accurate for Puppet than Chef, I think
[2014-06-27 15:30:12 -0400] gyoza: if chef client pulls down a cookbook that says pull variables
[2014-06-27 15:30:13 -0400] jonlives: shadylog: also check out http://docs.opscode.com/essentials_nodes_chef_run.html
[2014-06-27 15:30:20 -0400] shadylog: gyoza: I got the impression that chef server is actually pretty stupid. It just sends modules and databags and the chef-client itself just executes it ?
[2014-06-27 15:30:23 -0400] gyoza: during the installation the chef client will pull info from the chef servers databags
[2014-06-27 15:30:28 -0400] MrHeavy: shadylog: files also, IIRC
[2014-06-27 15:30:31 -0400] shadylog: By stupid I mean its not complex
[2014-06-27 15:30:34 -0400] jonlives: shadylog: chef server is just a datastore
[2014-06-27 15:30:35 -0400] shadylog: files?
[2014-06-27 15:30:38 -0400] jonlives: the logic is all client side
[2014-06-27 15:30:42 -0400] shadylog: yes indeed
[2014-06-27 15:30:47 -0400] jonlives: data store and search index, specifically
[2014-06-27 15:30:57 -0400] shadylog: right
[2014-06-27 15:31:00 -0400] jonlives: thin server, thick client as they say
[2014-06-27 15:31:02 -0400] cheeseplus: shadylog: search
[2014-06-27 15:31:12 -0400] gyoza: i just read <shadylog> yes indeed in Teal'cs voice.
[2014-06-27 15:31:16 -0400] gyoza: am i a nerd or what
[2014-06-27 15:31:32 -0400] jonlives: https://www.youtube.com/watch?v=xYnzZ2rczSo
[2014-06-27 15:31:40 -0400] shadylog: But I am not in posession of an Goa'uld anymore.
[2014-06-27 15:31:42 -0400] gyoza: oh man i love you
[2014-06-27 15:31:49 -0400] shadylog: ;)
[2014-06-27 15:31:52 -0400] shadylog: nerds all around
[2014-06-27 15:32:08 -0400] shadylog: ok about search
[2014-06-27 15:32:17 -0400] shadylog: search I think is for the user right?
[2014-06-27 15:32:25 -0400] shadylog: not for the chef-clients
[2014-06-27 15:32:29 -0400] jonlives: shadylog: search can be used in recipes too
[2014-06-27 15:32:36 -0400] jonlives: it's one of chef's killer features
[2014-06-27 15:32:54 -0400] gyoza: ok i could only make it a minute into the video
[2014-06-27 15:32:55 -0400] gyoza: lol
[2014-06-27 15:32:58 -0400] shadylog: but doesn't that break compatibility with chef-solo ?
[2014-06-27 15:33:09 -0400] jonlives: shadylog: chef-solo doesn't have search, so yes it does
[2014-06-27 15:33:21 -0400] gyoza: you can install chef-solo-search but it becomes more complicated at that point
[2014-06-27 15:33:24 -0400] shadylog: but lots of modules for chef work in solo right? (I though almost all)
[2014-06-27 15:33:35 -0400] shadylog: but what does a module need to do that requires search?
[2014-06-27 15:33:40 -0400] shadylog: I MEAN COOKBOOKS
[2014-06-27 15:33:41 -0400] shadylog: ARGH
[2014-06-27 15:33:43 -0400] shadylog: cookbooks
[2014-06-27 15:33:44 -0400] cheeseplus: look for other nodes
[2014-06-27 15:33:51 -0400] gyoza: there are lots of cases for search
[2014-06-27 15:33:52 -0400] cheeseplus: search to see who is in the LB pool
[2014-06-27 15:33:56 -0400] jonlives: shadylog: or roles, databags, nodes...
[2014-06-27 15:33:59 -0400] jonlives: yeah
[2014-06-27 15:33:59 -0400] cheeseplus: make sure there are enough web nodes for DB nodes
[2014-06-27 15:34:04 -0400] shadylog: yes but now we are talking orchestration
[2014-06-27 15:34:05 -0400] shadylog: ?
[2014-06-27 15:34:06 -0400] jonlives: automated cluster config...
[2014-06-27 15:34:10 -0400] shadylog: if nodeA is online then..
[2014-06-27 15:34:17 -0400] cheeseplus: shadylog: not quite orchestration but something approaching it
[2014-06-27 15:34:38 -0400] shadylog: leader election?
[2014-06-27 15:34:54 -0400] cheeseplus: the argument could be made for orchestration certainly but there is lots of pre-existing argument on that that I won't go into
[2014-06-27 15:34:55 -0400] jonlives: if you wanted to, sure
[2014-06-27 15:35:03 -0400] jonlives: search is a primative - you can use it for all sorts of stuff
[2014-06-27 15:35:16 -0400] cheeseplus: I wouldn't use it for leader election but I am biased
[2014-06-27 15:35:53 -0400] shadylog: but is chef master linearizable ?
[2014-06-27 15:36:04 -0400] MrHeavy: Still getting that weird expected Fixnum error after "INFO: HTTP Request Returned 200 OK:" :(
[2014-06-27 15:36:24 -0400] shadylog: ehh... Does it make assurances as to concurrent access etc ?
[2014-06-27 15:36:43 -0400] jonlives: shadylog: I'm still not quite sure what you're asking
[2014-06-27 15:37:04 -0400] MrHeavy: There's some small layer of concurrency control but you'll have a better time with Chef if you treat your nodes' convergence as an eventual-consistency model
[2014-06-27 15:37:27 -0400] gyoza: thats why we're using chef
[2014-06-27 15:37:29 -0400] shadylog: MrHeavy: yes that's what I thought.. ok :)
[2014-06-27 15:37:30 -0400] gyoza: so we can get consistency
[2014-06-27 15:37:32 -0400] shadylog: thanks
[2014-06-27 15:37:39 -0400] shadylog: well there's consistency and there's consistency
[2014-06-27 15:37:40 -0400] shadylog: ;)
[2014-06-27 15:37:45 -0400] gyoza: also changing passwords on hundreds of servers sucks ass
[2014-06-27 15:37:47 -0400] gyoza: :P
[2014-06-27 15:37:49 -0400] whiteadam: shadylog: Worry less about the how young one and worry about the what.
[2014-06-27 15:37:52 -0400] cheeseplus: shadylog: jepsen hasn't been run against it
[2014-06-27 15:38:05 -0400] MrHeavy: If you need absolute control over the order and timing of your node runs, you can always trigger them manually
[2014-06-27 15:38:13 -0400] shadylog: I did not follow those two lines at all.. What did you say? :)
[2014-06-27 15:38:39 -0400] cheeseplus: mine was just a consistency joke
[2014-06-27 15:38:40 -0400] shadylog: what's a jepsen
[2014-06-27 15:38:44 -0400] MrHeavy: shadylog: http://aphyr.com/tags/Jepsen
[2014-06-27 15:38:48 -0400] shadylog: ohh from call me maybe
[2014-06-27 15:38:49 -0400] shadylog: yes
[2014-06-27 15:38:51 -0400] shadylog: yeah I know
[2014-06-27 15:38:52 -0400] shadylog: :)
[2014-06-27 15:39:03 -0400] gyoza: whoa
[2014-06-27 15:39:05 -0400] gyoza: what is this website
[2014-06-27 15:39:16 -0400] whiteadam: Call me maybe
[2014-06-27 15:39:28 -0400] cheeseplus: everything you ever wanted to know about databases and how they work under failure scenarios
[2014-06-27 15:39:31 -0400] shadylog: that website is your go-to benchmark for checking what happens when shit truly hits the fan and who can blame
[2014-06-27 15:39:32 -0400] gyoza: nice
[2014-06-27 15:39:41 -0400] cheeseplus: <3 aphyr
[2014-06-27 15:39:48 -0400] shadylog: in the case of mongodb that guy decimated it
[2014-06-27 15:40:06 -0400] gyoza: anybody here using docker yet?
[2014-06-27 15:40:11 -0400] shadylog: i have
[2014-06-27 15:40:16 -0400] gyoza: what does it do
[2014-06-27 15:40:17 -0400] gyoza: LOL
[2014-06-27 15:40:21 -0400] shadylog: containerization
[2014-06-27 15:40:32 -0400] gyoza: so like i build a system
[2014-06-27 15:40:34 -0400] gyoza: and run docker on it
[2014-06-27 15:40:36 -0400] gyoza: and its like an appliance?
[2014-06-27 15:40:42 -0400] shadylog: you run single process applications in a chrooted environment with virtualized networking
[2014-06-27 15:40:49 -0400] gyoza: i see
[2014-06-27 15:40:55 -0400] shadylog: that constitutes as a container
[2014-06-27 15:41:08 -0400] gyoza: so shared kernels?
[2014-06-27 15:41:09 -0400] shadylog: the full benefit is, there is no hypervisor or virtualization. No overhead
[2014-06-27 15:41:12 -0400] shadylog: yes
[2014-06-27 15:41:19 -0400] gyoza: hmm
[2014-06-27 15:41:24 -0400] shadylog: it works also with unionfs
[2014-06-27 15:41:43 -0400] cheeseplus: well docker is more than just the chroot, it's also a way to interact with the underlying apps and build them into layers
[2014-06-27 15:41:47 -0400] shadylog: so that binaries are not duplicated across containers.
[2014-06-27 15:41:50 -0400] shadylog: yeah
[2014-06-27 15:41:58 -0400] gyoza: interesting
[2014-06-27 15:41:59 -0400] shadylog: it is more :) much more :)
[2014-06-27 15:42:08 -0400] gyoza: thats the 30thousand foot view
[2014-06-27 15:42:11 -0400] gyoza: good enough for me
[2014-06-27 15:42:22 -0400] cheeseplus: used to be lxc now it's libcontainer so it goes direct to kernel
[2014-06-27 15:42:39 -0400] shadylog: I made an xbmc-headless-container that allows you to just do two commands in docker and you have xbmc running as a server..
[2014-06-27 15:42:40 -0400] cheeseplus: gyoza: http://theshipshow.com/2014/03/deciphering-the-docker-lifestyle/
[2014-06-27 15:42:44 -0400] cheeseplus: shameless plug
[2014-06-27 15:42:56 -0400] gyoza: did you write that?
[2014-06-27 15:42:57 -0400] gyoza: lol
[2014-06-27 15:43:14 -0400] gyoza: haha yes
[2014-06-27 15:43:17 -0400] gyoza: CHEESPLUS
[2014-06-27 15:43:17 -0400] shadylog: I think docker is complementary
[2014-06-27 15:43:27 -0400] shadylog: you still need chef/puppet to provision the system that runs docker
[2014-06-27 15:43:32 -0400] gyoza: cheeseplus: bookmarked this site:P
[2014-06-27 15:43:40 -0400] shadylog: you still need something that defines what containers need to be where
[2014-06-27 15:43:45 -0400] shadylog: enter puppet/chef :)
[2014-06-27 15:44:02 -0400] whiteadam: You need someone to define it first
[2014-06-27 15:44:10 -0400] shadylog: well that's the user
[2014-06-27 15:44:12 -0400] cheeseplus: there is a whole debate around just his right now
[2014-06-27 15:44:20 -0400] whiteadam: Who is this mystery user?
[2014-06-27 15:45:02 -0400] shadylog: I suppose you could use chef to "build" Apache HTTP server or whatever
[2014-06-27 15:45:04 -0400] shadylog: then dockerize it
[2014-06-27 15:45:11 -0400] shadylog: then plant it anywhere
[2014-06-27 15:45:25 -0400] gyoza: wtf there is no worldcup game today?
[2014-06-27 15:45:28 -0400] shadylog: I though see docker more as a means for the programmers than the devops
[2014-06-27 15:45:44 -0400] MrHeavy: joncowie: solved my issue, yajl-ruby needed to be reinstalled for some reason. Thanks for the -VV tip
[2014-06-27 15:46:07 -0400] MrHeavy: err, jonlives
[2014-06-27 15:46:10 -0400] gyoza: im trying to figure out what to do today
[2014-06-27 15:46:13 -0400] MrHeavy: twitterproblems
[2014-06-27 15:46:22 -0400] shadylog: gyoza: investigate docker :
[2014-06-27 15:46:35 -0400] shadylog: ok
[2014-06-27 15:46:35 -0400] gyoza: shadylog: its too much for what we need
[2014-06-27 15:46:36 -0400] gyoza: :P
[2014-06-27 15:46:38 -0400] shadylog: entirely different topic
[2014-06-27 15:46:42 -0400] shadylog: chef
[2014-06-27 15:46:42 -0400] gyoza: we only work 4 hours on fridays
[2014-06-27 15:46:58 -0400] shadylog: Is there a "chef" that can create a "chef" cluster ?
[2014-06-27 15:47:02 -0400] juanluisrp1: Hello, I have this recipe https://gist.github.com/juanluisrp/aa59b3ec51ccb07690b6
[2014-06-27 15:47:04 -0400] MrHeavy: shadylog: chef-metal?
[2014-06-27 15:47:15 -0400] shadylog: i.e. start 9 nodes, and a master node and interconnect them
[2014-06-27 15:47:18 -0400] juanluisrp1: Tomcat is installed correctly
[2014-06-27 15:47:27 -0400] MrHeavy: Yeah, sounds like Chef Metal is exactly what you're after shadylog
[2014-06-27 15:47:32 -0400] juanluisrp1: but it fails in template notifies part
[2014-06-27 15:47:34 -0400] MrHeavy: It's still young
[2014-06-27 15:47:44 -0400] gyoza: yea its beta isnt it?
[2014-06-27 15:47:48 -0400] shadylog: MrHeavy: yeah it looks good
[2014-06-27 15:47:53 -0400] shadylog: ok
[2014-06-27 15:48:19 -0400] shadylog: would you be interested in a tool that does chef-metal but not only for chef, but for any configuration management tool
[2014-06-27 15:48:20 -0400] shadylog: ?
[2014-06-27 15:48:23 -0400] sarkis: i thought i could use env vars to override attributes default (using the default_override in env vars)
[2014-06-27 15:48:58 -0400] juanluisrp1: ERROR: resource template[/tmp/template1] is configured to notify resource service[tomcat] with action restart, but service[tomcat] cannot be found in the resource collection. template[/tmp/template1] is defined i
[2014-06-27 15:48:59 -0400] juanluisrp1: n /tmp/kitchen/cookbooks/live-geoserver-test/recipes/default.rb:3:in
[2014-06-27 15:49:04 -0400] sarkis: having some weird issues :( it's not picking the env var over attributes
[2014-06-27 15:49:06 -0400] MrHeavy: shadylog: isn't that kind of what EMC is after with Razor?
[2014-06-27 15:49:20 -0400] shadylog: Razor I think does puppet right?
[2014-06-27 15:49:30 -0400] MrHeavy: Razor focuses on Puppet but it has some degree of Chef support also IIRC
[2014-06-27 15:49:44 -0400] shadylog: hmm
[2014-06-27 15:49:52 -0400] cheeseplus: razor -> hanlon
[2014-06-27 15:50:03 -0400] cheeseplus: for those that missed the forking
[2014-06-27 15:50:23 -0400] cheeseplus: shadylog: sounds like a magical thing
[2014-06-27 15:50:37 -0400] shadylog: I made it
[2014-06-27 15:50:38 -0400] MrHeavy: An open-source project stewarded by CSC? Never thought I'd see the day
[2014-06-27 15:50:38 -0400] shadylog: :)
[2014-06-27 15:50:55 -0400] MrHeavy: Everyone I know who's worked with CSC wasn't even allowed to talk about their work
[2014-06-27 15:51:11 -0400] cheeseplus: MrHeavy: new acquisitions and changing landscape
[2014-06-27 15:51:15 -0400] shadylog: it only support chef/salt/puppet and scripts though. But it can completely provision, bootstrap on whatever IaaS provider you want
[2014-06-27 15:51:37 -0400] cheeseplus: shadylog: a story written a thousand times across the ages
[2014-06-27 15:51:46 -0400] whiteadam: MrHeavy: The globocorp I work for is the same way. If they knew I talked about anything, it would be curtains.
[2014-06-27 15:52:57 -0400] MrHeavy: CSC is a major outsourcer to military contractors, so a lot of what they're doing is under TS clearance
[2014-06-27 15:53:01 -0400] shadylog: its a poc of my thesis project.. the nexus of the thing is the realization that nothing is portable, and the only modicum of true portability on Unix is POSIX shell scripts
[2014-06-27 15:53:33 -0400] MrHeavy: Portability relies on leaky abstractions, etc.
[2014-06-27 15:54:36 -0400] shadylog: second point is that images provided by IaaS are supposed to be treated like black boxes. People will park whatever they want on an image and call it a day. Only Configuration management tools try to make things work from vanilla distribution to full state
[2014-06-27 15:54:36 -0400] juanluisrp1: if the service tomcat is defined in the included recipe why template is not able to find it?
[2014-06-27 15:55:28 -0400] cheeseplus: shadylog: nominally curious in the thesis but none of this is anything I haven't heard before (or doesn't already exist in some form or fashion)
[2014-06-27 15:55:55 -0400] MrHeavy: Man, the Chef ecosystem is moving so fast I can't even keep track of things anymore. berkshelf-api has been replaced with internal Supermarkets for private sites?
[2014-06-27 15:56:05 -0400] shadylog: well the gist is that I borrowed the declarative nature of Puppet to a infrastructure environment
[2014-06-27 15:56:23 -0400] shadylog: you basicly define roles (1 or more per role) and dependencies between
[2014-06-27 15:56:34 -0400] shadylog: you can define a IaaS provider per role
[2014-06-27 15:57:00 -0400] shadylog: i.e. you tell a server it must be there on amazon and it will be there.
[2014-06-27 15:57:13 -0400] shadylog: if server a depends on server b, then server a will be launched first and then server b
[2014-06-27 15:57:55 -0400] shadylog: anyway it will come out soonish I hope
[2014-06-27 15:57:57 -0400] shadylog: this summer
[2014-06-27 15:58:01 -0400] cheeseplus: MrHeavy: honestly the only way I have kept up is going to every chefconf
[2014-06-27 15:58:26 -0400] shadylog: anyway thanks guys for the information! very informative.
[2014-06-27 15:58:36 -0400] shadylog: Btw from the 4/5 tools I looked at, I lked chef best
[2014-06-27 15:58:39 -0400] shadylog: :P
[2014-06-27 15:58:47 -0400] cheeseplus: shadylog: sounds interesting generally but from the description I am not seeing any standout features that we don't already have some other product to do yet
[2014-06-27 15:58:54 -0400] someara: shadylog if you're looking for some theory level things
[2014-06-27 15:58:56 -0400] someara: check this out
[2014-06-27 15:59:19 -0400] someara: https://fosdem.org/2014/schedule/event/configuration_management_101/
[2014-06-27 15:59:22 -0400] someara: https://speakerdeck.com/someara/configuration-management-101-at-scale12x
[2014-06-27 15:59:31 -0400] someara: ^ watch that video with shitty sound
[2014-06-27 15:59:32 -0400] shadylog: nice thanks!
[2014-06-27 15:59:33 -0400] MrHeavy: cheeseplus: Yeah, I've had to get caught up on the videos
[2014-06-27 15:59:38 -0400] someara: and walk through the slide deck
[2014-06-27 16:00:47 -0400] shadylog: okay guys see you later
[2014-06-27 16:06:52 -0400] robbkidd: Promise Theory Bombs is the name of my Midnight Chaser cover band.
[2014-06-27 16:08:08 -0400] gauravarora: does anyone know when hosted chef will be back online?
[2014-06-27 16:08:43 -0400] heathsnow: gauravarora: I don't have any issues with it right now
[2014-06-27 16:09:36 -0400] gauravarora: i cant upload cookbooks or view my nodes
[2014-06-27 16:09:42 -0400] gauravarora: ok i can view nodes now
[2014-06-27 16:09:47 -0400] gauravarora: let me see if upload is back
[2014-06-27 16:10:19 -0400] gauravarora: nope, berks upload just freezes on the first cookbook
[2014-06-27 16:10:47 -0400] cheeseplus: robbkidd: nice!
[2014-06-27 16:10:59 -0400] jtimberman: gauravarora: not seeing any issues here (i'm in Chef operations)
[2014-06-27 16:11:07 -0400] robbkidd: cheeseplus: :D
[2014-06-27 16:12:04 -0400] jtimberman: gauravarora: "freezes" - how? can you rerun berks w/ --debug
[2014-06-27 16:12:13 -0400] gauravarora: ok
[2014-06-27 16:15:53 -0400] gauravarora: jtimberman: i get There was an error connecting to the Chef Server
[2014-06-27 16:16:03 -0400] gauravarora: my ping is consistent
[2014-06-27 16:19:38 -0400] gauravarora_: and just as i said that my internet dropped ..
[2014-06-27 16:33:40 -0400] whiteadam: haha
[2014-06-27 16:33:58 -0400] whiteadam: We had a lot of alarms in the Houston, TX area yesterday affecting all kinds of stuff
[2014-06-27 16:34:47 -0400] Kim^J: Is there any plan to support Ubuntu 14.04 for Chef server?
[2014-06-27 16:36:03 -0400] gauravarora: hey whiteadam
[2014-06-27 16:36:21 -0400] whiteadam: gauravarora: hai
[2014-06-27 16:36:23 -0400] gauravarora: anyone from the hosted chef team that can help? I suddenly cant upload cookbooks
[2014-06-27 16:39:44 -0400] whiteadam: gauravarora: Why not?
[2014-06-27 16:40:13 -0400] gauravarora: berks upload sends a few and then errors out
[2014-06-27 16:40:17 -0400] gauravarora:  /Users/gauravarora/.rvm/rubies/ruby-1.9.3-p547/lib/ruby/1.9.1/net/http.rb:763:in `initialize': getaddrinfo: nodename nor servname provided, or not known (Faraday::ConnectionFailed)
[2014-06-27 16:41:02 -0400] gauravarora: before this it gave me
[2014-06-27 16:41:08 -0400] gyoza: is that on vagrant?
[2014-06-27 16:41:14 -0400] gauravarora: no, mac
[2014-06-27 16:41:31 -0400] gauravarora:  /Users/gauravarora/.rvm/rubies/ruby-1.9.3-p547/lib/ruby/1.9.1/net/http.rb:800:in `connect': SSL_connect SYSCALL returned=5 errno=0 state=SSLv3 read finished A (Faraday::SSLError)
[2014-06-27 16:41:45 -0400] whiteadam: Can you ping the server?
[2014-06-27 16:41:47 -0400] gyoza: cant make ssl connection
[2014-06-27 16:42:21 -0400] gauravarora: the server is s3-external-1.amazonaws.com
[2014-06-27 16:42:28 -0400] gauravarora: i dont think it responds to ping
[2014-06-27 16:42:58 -0400] whiteadam: gauravarora: try knife ssl check
[2014-06-27 16:43:28 -0400] gauravarora: Connecting to host api.opscode.com:443
[2014-06-27 16:43:29 -0400] gauravarora: Successfully verified certificates from `api.opscode.com'
[2014-06-27 16:43:32 -0400] gauravarora: so that works
[2014-06-27 17:30:02 -0400] phutchins: Anyone knwo a good way to track down which cookbook is offending when you get the "Could not satisfy version constraints for: mysql" error?
[2014-06-27 17:30:54 -0400] whiteadam: gem install knife-solve
[2014-06-27 17:30:59 -0400] phutchins: :D
[2014-06-27 17:31:05 -0400] phutchins: i hope it is as awesome as it sounds...
[2014-06-27 17:31:09 -0400] phutchins: will it work with berkshelf api?
[2014-06-27 17:31:16 -0400] whiteadam: Yeah, it uses the same API
[2014-06-27 17:31:29 -0400] phutchins: i think you just made my day.
[2014-06-27 17:31:34 -0400] whiteadam: cd to your cookbooks dir and just do knife solve book_name
[2014-06-27 17:32:18 -0400] MrHeavy: as much as i appreciate the hard work people have put into it, i definitely can't wait to see a bullet put into berkshelf-api
[2014-06-27 17:32:45 -0400] phutchins: :)
[2014-06-27 17:32:47 -0400] whiteadam: WHY
[2014-06-27 17:33:19 -0400] MrHeavy: why isn't this recognizing my cookbook? oh, indexer randomly stopped. let me sv restart berks-api. oh, neat, it forgot it has a cache. then, 2 hours later,
[2014-06-27 17:33:27 -0400] MrHeavy: EVERY TIME
[2014-06-27 17:33:47 -0400] whiteadam: Hah, I haven't seen an issue with it
[2014-06-27 17:36:32 -0400] MrHeavy: speak of the devil, another 503 condition from berks-api
[2014-06-27 17:39:40 -0400] spheromak: someara: am i blind? where do i tell jenkins_job resource what key to use ?
[2014-06-27 17:40:14 -0400] spheromak: i see executor has support for it, but not seing where it's exposed
[2014-06-27 17:40:16 -0400] someara: no idea, ask vargo
[2014-06-27 17:40:51 -0400] spheromak: aight
[2014-06-27 17:42:31 -0400] c_t: ask a Seth
[2014-06-27 17:42:34 -0400] c_t: any Seth will do
[2014-06-27 17:42:58 -0400] spheromak:  there like a dozen of em :D
[2014-06-27 17:43:10 -0400] c_t: right
[2014-06-27 17:43:11 -0400] sfalcon: you rang?
[2014-06-27 17:43:15 -0400] spheromak: lol
[2014-06-27 17:43:18 -0400] c_t: so there's usually one nearby
[2014-06-27 17:43:21 -0400] spheromak: sfalcon: wrong one ;)
[2014-06-27 17:43:45 -0400] c_t: pff
[2014-06-27 17:43:58 -0400] c_t: seths stay fresher if you keep them in a cool dark place, like a root cellar
[2014-06-27 17:44:45 -0400] spheromak: i figured it out by reading the code  yay
[2014-06-27 17:51:46 -0400] Kim^J: I ask again, are there any plans for Chef server on Ubuntu 14.04? Last supported on the website is 12.10 (Which is quite old, 14.04 is LTS as well.)
[2014-06-27 17:52:24 -0400] phutchins: So if the chef error says "Could not satisfy version constraints for: mysql" does that mean it couldn't solve constraints for one of the cookbooks that mysql depends on? or a cookbook that depends on mysql?
[2014-06-27 17:53:54 -0400] sarkis: its the version of mysql cookbook.. i.e. one cookbook says < 1.0 and another says -> 1.1
[2014-06-27 17:54:17 -0400] sarkis: so the latter
[2014-06-27 17:54:51 -0400] phutchins: sarkis: ok thanks.
[2014-06-27 17:55:19 -0400] holoway: Kim^J: have you tried the 12.04 binary on 14.04?
[2014-06-27 17:55:41 -0400] holoway: Kim^J: I suspect it will just work (tm)
[2014-06-27 17:55:52 -0400] holoway: as it has 0 external dependencies
[2014-06-27 17:55:56 -0400] holoway: unless libc broke
[2014-06-27 17:57:09 -0400] phutchins: Its weird tho becuase I don't see any of my cookbooks or Berkshelf pinning mysql cookbook to a specific version or greater or less than...
[2014-06-27 17:57:25 -0400] phutchins: so i guess it has to be an included cookbook :-\
[2014-06-27 18:00:06 -0400] squaresurf: holoway: I wasn't able install the chef server on 14.04 a couple weeks ago.
[2014-06-27 18:00:13 -0400] squaresurf: Maybe I should look into that further.
[2014-06-27 18:00:37 -0400] holoway: squaresurf: bummer. is there an open bug?
[2014-06-27 18:03:21 -0400] phutchins: Hurm. i don't think knife solve works with a directory of cookbooks with a Berksfile in the root of it
[2014-06-27 18:03:27 -0400] phutchins: I.E. a cookbook dir used for opsworks
[2014-06-27 18:04:47 -0400] MrHeavy: Anyone seen this suite of complaints from berks-api before?
[2014-06-27 18:04:49 -0400] MrHeavy: Error downloading/extracting application (0.99.11): Directory '/tmp/metadata20140627-18777-tcuka9' does not exist!
[2014-06-27 18:05:58 -0400] squaresurf: holoway: no, I saw that it wasn't supported, so I moved to 12.04.
[2014-06-27 18:06:12 -0400] squaresurf: I should definitely try again though.
[2014-06-27 18:06:46 -0400] c_t: new goiardi release coming soon, incidentally
[2014-06-27 18:07:07 -0400] c_t: now with postgres and some other goodies
[2014-06-27 18:07:24 -0400] c_t: also seems to work under Windows
[2014-06-27 18:07:54 -0400] c_t: (it's not building for Dragonfly BSD or plan9 at the moment because of issues with the postgres lib, but the other platforms build)
[2014-06-27 18:11:30 -0400] gasfads: greetings fellow chef users
[2014-06-27 18:12:05 -0400] gasfads: i have come in search of answers to the questions that plague people who work for large companies...
[2014-06-27 18:12:21 -0400] gasfads: how do i get chef to work behind a proxy?
[2014-06-27 18:12:37 -0400] gasfads: now, all of the documentation everywhere about proxy says: "use --bootstrap-proxy"
[2014-06-27 18:12:41 -0400] gasfads: which fixes some problems
[2014-06-27 18:12:46 -0400] gasfads: but not nearly all of them
[2014-06-27 18:13:49 -0400] gasfads: for example, a recipe i am using wants to specify a remote_file, using a url, and as far as i can determine, Chef::Provider::RemoteFile::HTTP makes no use of proxy
[2014-06-27 18:16:42 -0400] gasfads: other issues i've run into are gems_package, jenkins packages to name a few. apt has a nice key_proxy setting which works sometimes but not always
[2014-06-27 18:16:49 -0400] gasfads: is this going to be a recurring problem for me?
[2014-06-27 18:20:34 -0400] a13x212: can i throw a node attribute into am enviornment?
[2014-06-27 18:20:37 -0400] a13x212: an
[2014-06-27 18:23:49 -0400] gasfads: fun fact:"net/http does not use the HTTP_PROXY environment variable. If you want to use a proxy, you must set it explicitly"   ( http://apidock.com/ruby/Net/HTTP/Proxy/class )   ( Chef::Provider::RemoteFile::HTTP is built on top of net/http )
[2014-06-27 18:24:08 -0400] gasfads: yay \o/
[2014-06-27 18:32:30 -0400] PaulCzar: anyone know what I need to do to be able to access chef-sugar from attributes?
[2014-06-27 18:32:55 -0400] whiteadam: snapchat me a bitcoin
[2014-06-27 18:35:44 -0400] benner: does anyone can tell how easy monkey patch resource that it can do notify other resource before change? (i.e. template is different)
[2014-06-27 18:54:10 -0400] MrHeavy: benner: are you asking how to change the template source for a resource that's defined in a different cookbook?
[2014-06-27 19:11:52 -0400] HomlessScienstis: I am following the chef server installation on the website, when I run the sudo chef-server-ctl reconfigure it gets stuck ... I am using the ubuntu 12.04 which is the recommended os for chef server
[2014-06-27 19:16:07 -0400] HomelessSciensti: I am trying to install chef-server on ubuntu 12.04 following the documentation on the website and I get this error : Error executing action `run` on resource 'execute[verify-system-status]'
[2014-06-27 19:18:15 -0400] j^2: HomelessSciensti: can you put the full run in a gist?
[2014-06-27 19:34:24 -0400] icarus_: hello all, is there a good way to search through opscode cookbooks via cli?
[2014-06-27 19:35:10 -0400] gchristensen: curl http://community.opscode.com/search?query=mysql&scope=cookbook
[2014-06-27 19:35:36 -0400] icarus_: heh, clever
[2014-06-27 19:35:37 -0400] coderanger: icarus_: The community site isn't really a good index anyway, so google is your best bet
[2014-06-27 19:38:35 -0400] coderanger: MrHeavy: You would need to use chef-rewind or something like it
[2014-06-27 19:39:18 -0400] coderanger: HomelessSciensti: First thing to check on chef-server install errors is that the server has a correctly resolving FQDN
[2014-06-27 19:40:14 -0400] MrHeavy: coderanger: I know quite well how to do it, I was trying to answer someone else's question :)
[2014-06-27 19:40:23 -0400] rayrod2030: dat erlang
[2014-06-27 19:40:25 -0400] coderanger: MrHeavy: Ahh, sorry :)
[2014-06-27 19:40:28 -0400] rayrod2030: rabbitmq
[2014-06-27 20:08:19 -0400] heathsnow: check
[2014-06-27 20:08:28 -0400] gchristensen: success
[2014-06-27 20:09:20 -0400] heathsnow: :)  I never know if I've been disconnected after coming back from lunch
[2014-06-27 20:11:02 -0400] SwedishChef: Anyone there?
[2014-06-27 20:11:05 -0400] gchristensen: no
[2014-06-27 20:11:34 -0400] SwedishChef: ha
[2014-06-27 20:11:40 -0400] SwedishChef: So I compiled the chef-client
[2014-06-27 20:11:53 -0400] SwedishChef: because I'm doing an unattended bootstrap
[2014-06-27 20:12:04 -0400] SwedishChef: but my issue is I don't have access to the /etc dir
[2014-06-27 20:12:21 -0400] SwedishChef: So how do I make chef-client aware that the /etc/chef dir has moved?
[2014-06-27 20:12:38 -0400] SwedishChef: I'm not seeing a way I can specify this
[2014-06-27 20:13:59 -0400] SwedishChef: I guess no one has hacked chef here???
[2014-06-27 20:14:59 -0400] coderanger: Did that pert just ask a question and then leave after 90 seconds?
[2014-06-27 20:15:05 -0400] coderanger: Sigh
[2014-06-27 20:15:07 -0400] gchristensen: SwedishChef: you've sent 8 messages in 2 minutes. average response time is greater than 2 minutes. Roughly 616 people have hacked chef in here. Also, its Friday.
[2014-06-27 20:15:10 -0400] gchristensen: oh ... he did leave :(
[2014-06-27 20:15:25 -0400] coderanger: trollface.gif
[2014-06-27 20:16:37 -0400] gchristensen: coderanger: I was about to send him the snippet from Smart Questions about asking complete questions :)
[2014-06-27 20:41:05 -0400] Ash: I guess no one has hacked chef here
[2014-06-27 20:42:34 -0400] gchristensen: Ash: correct
[2014-06-27 20:49:21 -0400] viglesias: last time i hacked chef it hacked back
[2014-06-27 20:50:16 -0400] jtimberman: icarus_: "knife cookbook site search COOKBOOKNAME"
[2014-06-27 21:05:28 -0400] x0nic: If I create a wrapper cookbook for nginx. Should I override the defaults in attributes/ or node.set in the recipe?
[2014-06-27 21:10:55 -0400] cheeseplus: x0nic: with node.set in the recipe, no need for attributes in the wrapper
[2014-06-27 21:11:29 -0400] cheeseplus: the wrapper shoud be as simple as possible IMO
[2014-06-27 21:16:55 -0400] coderanger: nooooo
[2014-06-27 21:17:07 -0400] coderanger: Use node.default or node.override instead of of node.set
[2014-06-27 21:17:36 -0400] coderanger: the set (aka "normal") level behaves differently from the other levels in that it doesn't get rebuilt on each run
[2014-06-27 21:27:15 -0400] cheeseplus: what coderanger said
[2014-06-27 21:47:02 -0400] x0nic: coderanger: Would the node.default be in the recipe or the attrib
[2014-06-27 21:47:22 -0400] coderanger: x0nic: Either is fine in most cases
[2014-06-27 21:47:38 -0400] coderanger: so simpler would usually win to say put it in the recipe :)
[2014-06-27 21:47:52 -0400] x0nic: coderanger: nice. thanks
[2014-06-27 21:50:50 -0400] castro1688: hey everyone! I'm rescuing a http 404 error in a provider ( http://pastebin.com/TJSHV2RR ). I wanted to know if its possible, just for testing, to raise a 500 error in ruby
[2014-06-27 21:53:54 -0400] coderanger: castro1688: You would just have to raise the right error object
[2014-06-27 21:53:56 -0400] coderanger: sec
[2014-06-27 21:54:35 -0400] coderanger: castro1688: Something like this
[2014-06-27 21:54:53 -0400] coderanger: raise Net::HTTPServerException('', double(code: '500'))
[2014-06-27 22:05:24 -0400] castro1688: thanks coderanger! trying that now
[2014-06-27 22:07:36 -0400] castro1688: Cannot find a resource for double on ubuntu version 12.04
[2014-06-27 22:08:11 -0400] coderanger: castro1688: Thats an rspec thing
[2014-06-27 22:08:21 -0400] coderanger: would only work in rspec
[2014-06-27 22:08:22 -0400] castro1688: ooh ok
[2014-06-27 22:08:51 -0400] castro1688: we're not using rspec. i was just manually hacking it in my provider to see if my rescue block works the way i want
[2014-06-27 22:09:13 -0400] coderanger: castro1688: You would need to make your own little test double then
[2014-06-27 22:09:18 -0400] coderanger: OpenStruct works too
[2014-06-27 22:09:38 -0400] coderanger: You just need something that will respond to #code :)
[2014-06-27 22:27:38 -0400] gasfads: wow, there has been activity in here in the past 3 hours
[2014-06-27 22:28:33 -0400] gasfads: so it seems that chef-server 11.1 pushes chef-client 11.6 to bootstrapped nodes
[2014-06-27 22:28:52 -0400] gasfads: there seems to be enhanced proxy support in client v11.12
[2014-06-27 22:29:33 -0400] gasfads: does anyone know what client version the latest server version (11.1.3? ) pushes?
[2014-06-27 22:32:37 -0400] coderanger: gasfads: The server isn't involved in the bootstrap process and can't push anything anywhere
[2014-06-27 22:32:46 -0400] gasfads: hmm
[2014-06-27 22:32:57 -0400] coderanger: gasfads: The bootstrap is entirely managed by your workstation, and by default knife bootstrap installs the same version as you have locally
[2014-06-27 22:33:18 -0400] gasfads: that's odd. i wonder why my node has 11.6 while my workstation has 11.12
[2014-06-27 22:33:56 -0400] coderanger: You can override the version to install with a custom bootstrap template
[2014-06-27 22:34:11 -0400] coderanger: Are you passing the --distro option or setting it in knife.rb?
[2014-06-27 22:34:38 -0400] gasfads: neither. i think some friendly IT guy preinstalled chef client on the VM template
[2014-06-27 22:34:53 -0400] coderanger: That would do it, knife bootstrap doesn't reinstall chef if it exists
[2014-06-27 22:35:08 -0400] gasfads: well, that's good to know, should help troubleshooting in the future
[2014-06-27 22:35:14 -0400] gasfads: might even be the cause of most of my problems
[2014-06-27 22:35:42 -0400] gasfads: so i can just pass --distro 11.12 with knife bootstrap and it will re-install chef client for me?
[2014-06-27 22:36:10 -0400] coderanger: No, it will never reinstall if chef is present, and the distro template is an erb file with the commands to install things, see the docs for more info
[2014-06-27 22:36:23 -0400] gasfads: ok
[2014-06-27 22:36:24 -0400] gasfads: thanks!
[2014-06-27 22:41:00 -0400] kallistec: coderanger: BTW, we recently changed the bootstrap logic to just get you the latest of the same major version
[2014-06-27 22:42:09 -0400] kallistec: e.g., if you had knife 11.14, it passes just "11" as the version parameter to install.sh/omnitruck, which interprets that as "~>11.x"
[2014-06-27 22:43:33 -0400] coderanger: kallistec: good to know, thanky
[2014-06-27 22:43:54 -0400] coderanger: kallistec: Not sure thats a good idea though, idempotence over time vs. getting older versions :-/
[2014-06-27 22:47:21 -0400] kallistec: coderanger: I think in the end it'll be better, and that's the behavior you'll get out of package repos whenever we get artifactory working
[2014-06-27 22:48:59 -0400] coderanger: kallistec: Just means there reeeeally should be a manual override in knife bootstrap if there isn't already
[2014-06-27 22:49:09 -0400] kallistec: there is
[2014-06-27 22:49:16 -0400] kallistec: --bootstrap-version IIRC
[2014-06-27 22:49:22 -0400] coderanger: :+1:
[2014-06-27 23:18:40 -0400] ec99: Hi, I thought I got it right, but no.  I'm trying to create a not_if condition so that when the uid of user is not equal to 1234, don't add/update user.
[2014-06-27 23:19:07 -0400] ec99: this is my not_if statement, "not_if "grep username /etc/passwd | cut -d: -f3 != 1234"
[2014-06-27 23:19:29 -0400] coderanger: ec99: Any reason to not do that in Ruby code?
[2014-06-27 23:20:07 -0400] ec99: I don't know how to do that in Ruby code.  can you show me?
[2014-06-27 23:20:08 -0400] coderanger: ec99: only_if { Etc.getpwbynam(username).uid == 1234 }
[2014-06-27 23:20:22 -0400] coderanger: Sorry, that should be getpwnam
[2014-06-27 23:20:34 -0400] coderanger: the Etc module just has the standard libc stuffs in it
[2014-06-27 23:20:41 -0400] ec99: let me give that a try
[2014-06-27 23:21:11 -0400] coderanger: What are you trying to accomplish? The user resource is already idempotent if thats your concern
[2014-06-27 23:22:23 -0400] ec99: As i'm doing knife search on all the nodes, i find there a number of node already has that nagios exists
[2014-06-27 23:23:06 -0400] ec99: i don't want to override the information for nagios user, if nagios exists with a different uid
[2014-06-27 23:24:55 -0400] coderanger: ec99: Ahh, then yeah, either use the Etc functions or ohai loads that data in to node['etc']['passwd'] for you too
[2014-06-27 23:25:16 -0400] coderanger: ec99: So node['etc']['passwd']['nagios']['uid']
[2014-06-27 23:25:20 -0400] coderanger: Up to you which you prefer
[2014-06-27 23:27:37 -0400] ec99: thanks so much
[2014-06-27 23:35:53 -0400] ec99: coderanger:  Would it be possible to combine Etc.getpwnam(username).uid with another condition like "grep username /etc/passwd" ?
[2014-06-27 23:36:29 -0400] coderanger: ec99: I wouldn't mix ruby and shell conditions
[2014-06-27 23:36:37 -0400] coderanger: ec99: What other thing do you want to check?
[2014-06-27 23:37:10 -0400] ec99: i want to check if nagios exists in /etc/passwd, if not create the user
[2014-06-27 23:38:12 -0400] coderanger: ec99: Just check for not_if { node['etc']['passwd']['nagios'] }
[2014-06-27 23:38:22 -0400] coderanger: ec99: That will be nil if the user doesn't exist
[2014-06-27 23:39:35 -0400] ec99: thanks.  you're correct, i can't mix ruby and shell conditions.
[2014-06-27 23:39:45 -0400] coderanger: You can, just not easily
[2014-06-27 23:40:25 -0400] ec99: oh ok.  I tried it so many ways, and couldn't make it work...
[2014-06-27 23:41:03 -0400] coderanger: You would either have to use multiple guard clauses (confusing) or the shell_out helper (verbose)
[2014-06-27 23:41:27 -0400] coderanger: Also that will be probably thousands of times slower than just checking the node attr)
[2014-06-27 23:41:52 -0400] ec99: good to know

[2014-06-24 00:24:24 -0400] Majost: Are there any breaking changes in opensource server 11.1.0 vs 11.0.12?
[2014-06-24 00:27:26 -0400] Majost: It doesn't seem like it from the changelogs -- just wondering if there are any gotchas I should look for
[2014-06-24 00:37:15 -0400] kimly: hello
[2014-06-24 00:41:15 -0400] kimly: hello
[2014-06-24 00:41:32 -0400] kimly: any chef experts here ? I have a quick question
[2014-06-24 00:42:49 -0400] cheeseplus: kimly: there might be a few but it's best to just throw the question out there and see if anyone bites
[2014-06-24 00:47:02 -0400] whiteadam: cheeseplus: is now known as pluscheeseplus
[2014-06-24 00:49:02 -0400] freerobby: Is there any way with chef-rewind to create a new resource that exists between two other resources?
[2014-06-24 01:19:51 -0400] ICantCook: I'm having an annoying problem with the opscode nagios cookbook.  It's been working fine for over a year, and then all of a sudden, when I terminated / started the instance (which I do quite often), it didn't load up properly.  It looks like it's struggling to find some values from the Chef search and load them into the nagios config files.
[2014-06-24 01:20:12 -0400] ICantCook: Is anyone familiar with this cookbook or should I be going somewhere else for help with this one?
[2014-06-24 01:40:46 -0400] freerobby: Is it possible to change the order in which resources run?
[2014-06-24 01:48:36 -0400] juliancdunn: no, resources run in order
[2014-06-24 01:53:19 -0400] cwj: freerobby: you might be able to use rewind to modify the resource before and after the desired insertion point, so that the one before notifies your new resource to run immediately, and then your new resource notifies the next one
[2014-06-24 01:53:31 -0400] cwj: but honestly sounds like a real mess
[2014-06-24 02:09:31 -0400] freerobby: cwj: Sounds like that is my best bet here. Thanks.
[2014-06-24 02:36:38 -0400] holms: hi
[2014-06-24 02:37:53 -0400] holms: anybody succesed building php from source with opscode php cookbook on rhel? http://pastebin.com/raw.php?i=Ki6k7Pir
[2014-06-24 02:40:55 -0400] holms: coderanger: maybe you available :)?
[2014-06-24 02:42:37 -0400] battery: I started playing with chef and chef server
[2014-06-24 02:43:05 -0400] battery: what is the recommended workflow for versioning cookbooks?
[2014-06-24 02:43:48 -0400] battery: do a git push or svn commit before knife cookbook upload ?
[2014-06-24 02:45:19 -0400] btiefert: I don't know if there's a consensus or not, but I check into version control and use a continious integration tool to automatically upload to chef-server
[2014-06-24 02:45:47 -0400] btiefert: I hate manual repetition, so I consider the chef-upload as party of the build/deployment process and let it happen as a consequence of each commit.
[2014-06-24 02:46:27 -0400] holms: btiefert: maybe any ideas? http://pastebin.com/raw.php?i=Ki6k7Pir
[2014-06-24 02:46:56 -0400] btiefert: I also have the build process increment and stamp the cookbook versions so that versions aren't stepped on, and always match the software package I'm deploying
[2014-06-24 02:48:03 -0400] btiefert: (reading your pastebin holms)
[2014-06-24 02:48:22 -0400] holms: (thanks)
[2014-06-24 02:49:08 -0400] btiefert: can you pastebin the  mkmf.log?
[2014-06-24 02:49:33 -0400] holms: would be nice to know where to find it
[2014-06-24 02:49:35 -0400] digitalchild: berkshelf for versioning cookbooks
[2014-06-24 02:49:49 -0400] digitalchild: holms: is the php54 in SCL for rhel not good enough ?
[2014-06-24 02:50:09 -0400] holms: digitalchild: im using opscode php cookbook
[2014-06-24 02:50:13 -0400] holms: it doesn't install php54
[2014-06-24 02:50:27 -0400] holms: SCL <-- is a repo?
[2014-06-24 02:50:32 -0400] digitalchild: software collections
[2014-06-24 02:50:33 -0400] battery: so say I deploy a server with 5 recipes
[2014-06-24 02:50:35 -0400] digitalchild: its apart of rhel
[2014-06-24 02:50:39 -0400] digitalchild: gives you php54
[2014-06-24 02:50:44 -0400] digitalchild: ruby193, mongodb
[2014-06-24 02:50:46 -0400] digitalchild: and bunch of other stuff
[2014-06-24 02:50:52 -0400] battery: then another server with the same 5 recipes but one of them was changed
[2014-06-24 02:50:53 -0400] digitalchild: all part of standard yum repos
[2014-06-24 02:51:08 -0400] holms: digitalchild: in centos 6.5 i don't have it by default
[2014-06-24 02:51:17 -0400] holms: even yum-epel doesn't provide it
[2014-06-24 02:51:18 -0400] digitalchild: holms yum install scl-utils
[2014-06-24 02:51:26 -0400] battery: how do I quickly compare the differences of the applied recipes between nodes?
[2014-06-24 02:51:26 -0400] btiefert: try "find /opt/chef -name mkmf.log" ..and the same in /tmp and in /var/chef
[2014-06-24 02:51:46 -0400] holms: digitalchild: executing commands manually in recipes X_?
[2014-06-24 02:52:01 -0400] digitalchild: holms: no im suggesting you change your recipe to use the standard rhel stuff
[2014-06-24 02:52:07 -0400] digitalchild: instead of compiling something from source...
[2014-06-24 02:52:08 -0400] holms: btiefert: sec provisioning one machine, gonna repeat that again with centos
[2014-06-24 02:52:36 -0400] digitalchild: see: https://access.redhat.com/site/documentation/en-US/Red_Hat_Developer_Toolset/1/html/Software_Collections_Guide/
[2014-06-24 02:52:48 -0400] digitalchild: its what i do with my centos machines
[2014-06-24 02:52:53 -0400] holms: chef-scl..?
[2014-06-24 02:52:59 -0400] digitalchild: nope
[2014-06-24 02:53:09 -0400] holms: i need crossplatform cookbook in here
[2014-06-24 02:53:10 -0400] digitalchild: i just have a package centos-release-scl
[2014-06-24 02:53:20 -0400] digitalchild: arh, then compile it is!
[2014-06-24 02:53:22 -0400] digitalchild: heh
[2014-06-24 02:53:31 -0400] holms: but gonna try this variant too cause .. it's just too fuss already to try something else :D
[2014-06-24 02:53:38 -0400] digitalchild: you could do
[2014-06-24 02:53:45 -0400] digitalchild: if centos use scl otherwise use x
[2014-06-24 02:54:10 -0400] digitalchild: but worth looking into scl, one less repo to be installing
[2014-06-24 02:54:54 -0400] battery: is there a tool to compare chef runs between machines?
[2014-06-24 02:55:23 -0400] holms: digitalchild: any snippet for adding scl in chef manner?
[2014-06-24 02:55:31 -0400] holms: or it's just that package and done?
[2014-06-24 02:55:38 -0400] digitalchild: you install that package
[2014-06-24 02:55:49 -0400] digitalchild: once that's installed you can then package install php or postgres or ruby
[2014-06-24 02:56:07 -0400] digitalchild: once the scl is installed, yum search php54 will show the software collection
[2014-06-24 02:57:30 -0400] holms: k
[2014-06-24 02:57:52 -0400] digitalchild: there is always the remi repos also
[2014-06-24 02:58:04 -0400] digitalchild: but i like to try and keep things as contained as possible
[2014-06-24 02:59:17 -0400] holms: digitalchild: i'm always afraid to end up with something like this: opscode-php-fpm cookbook installs php-fpm, it wont prolly install php54-fpm..
[2014-06-24 02:59:35 -0400] digitalchild: holms: probably not
[2014-06-24 02:59:44 -0400] digitalchild: but thats the nature of the centos beast
[2014-06-24 02:59:49 -0400] digitalchild: 4 versions behind everything heh
[2014-06-24 03:01:23 -0400] holms: digitalchild: yum install scl-utils
[2014-06-24 03:01:28 -0400] holms: yum search php54 --> Warning: No matches found for: php54
[2014-06-24 03:01:42 -0400] digitalchild: have to put in yum install centos-release-SCL
[2014-06-24 03:01:48 -0400] holms: k
[2014-06-24 03:04:06 -0400] holms: nice
[2014-06-24 03:49:38 -0400] lrr: So right now we're migrating our chef environment to using iptables-ng. We are also currently looking at migrating away from denyhosts to something like fail2ban. My question is, is there an iptables cookbook that when chef-client is ran on a cron, won't olbiterate any chains created by something like fail2ban after each run?
[2014-06-24 04:21:54 -0400] someara: Irr here's a thing I wrote a while ago but never published https://github.com/someara/dyn-iptables
[2014-06-24 04:22:20 -0400] someara: worked on my machine but ymmv =)
[2014-06-24 04:28:53 -0400] lrr: someara: thanks :)
[2014-06-24 05:46:39 -0400] coderanger: holms: Whats up
[2014-06-24 06:18:16 -0400] ICantCook: Resolved my nagios cookbook issue
[2014-06-24 06:18:18 -0400] ICantCook: strange one
[2014-06-24 06:18:30 -0400] ICantCook: I had to use knife to upload all the data bags again
[2014-06-24 06:18:36 -0400] ICantCook: (even though they're present)
[2014-06-24 06:18:50 -0400] ICantCook: so after uploading the exact same thing again, it seems to be working
[2014-06-24 08:56:13 -0400] holms: how can I permanently activate scl with chef? =/
[2014-06-24 08:56:35 -0400] laurent\: how do you debug Net::HTTPServerException: 400 "Bad Request" error ?
[2014-06-24 08:57:19 -0400] laurent\: looks like I'm have tons of them with every of my remaining ruby 1.8 client
[2014-06-24 08:57:44 -0400] laurent\: having
[2014-06-24 08:58:03 -0400] holms: people are offline =(
[2014-06-24 08:58:40 -0400] laurent\: oh or they're sleeping
[2014-06-24 08:58:54 -0400] srenatus: Or they don't know what scl is
[2014-06-24 08:58:57 -0400] holms: :
[2014-06-24 08:58:59 -0400] holms: :D
[2014-06-24 08:59:09 -0400] laurent\: i'm used to not getting any answer in here :)
[2014-06-24 08:59:34 -0400] srenatus: the redhat thing?
[2014-06-24 08:59:49 -0400] holms: yeah
[2014-06-24 08:59:53 -0400] holms: it's  software collections
[2014-06-24 09:00:02 -0400] holms: where you can find *proper* versions of everything
[2014-06-24 09:00:15 -0400] srenatus: package 'centos-release-SCL'  doesn't do it?
[2014-06-24 09:00:24 -0400] holms: scl enable php54 bash <-- and it sounds like it's the same as "source".. so i'm in deep shit how to enable it permanently
[2014-06-24 09:00:37 -0400] srenatus: ah, extra tooling
[2014-06-24 09:00:38 -0400] srenatus: I See
[2014-06-24 09:01:08 -0400] holms: i mean modifying globaly bash profile with chef.. *shrug* seems weird
[2014-06-24 09:01:22 -0400] srenatus: hmm yes, that's not easy
[2014-06-24 09:02:35 -0400] srenatus: if you could find out what it does, you could create a helper that returns an environment that can be added to the resources that matter, execute, bash, ...
[2014-06-24 09:03:11 -0400] srenatus: maybe `scl enable php54 bash` followd by `env` reveals that it's actually easy
[2014-06-24 09:03:22 -0400] holms: srenatus: it's probably same as "source /opt/rh/php54/enable"
[2014-06-24 09:03:33 -0400] holms: oh you mean taking global vars?
[2014-06-24 09:04:56 -0400] srenatus: holms: I mean like this: execute 'something' do\n environment scl_env('php54')\n done
[2014-06-24 09:05:02 -0400] srenatus: where scl_env is the hard part
[2014-06-24 09:05:58 -0400] srenatus: but I might be wrong: https://github.com/socrata-cookbooks/java/blob/c9e4d10132e2d24fa3e2ecf1dbb7ae23e269b859/recipes/set_java_home.rb#L19
[2014-06-24 09:06:46 -0400] holms: mm
[2014-06-24 09:08:45 -0400] holms: https://access.redhat.com/site/documentation/en-US/Red_Hat_Developer_Toolset/1/html-single/Software_Collections_Guide/
[2014-06-24 09:08:54 -0400] holms: there's something about installing it to profile.d
[2014-06-24 09:12:03 -0400] laurent\: https://tickets.opscode.com/browse/CHEF-5323?focusedCommentId=50268&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-50268 <= would be more helpful to give an actual link !
[2014-06-24 09:14:32 -0400] holms: laurent\: seems to be this does a job for profile.d https://github.com/customink-webops/magic_shell
[2014-06-24 09:15:21 -0400] laurent\: i'm afraid it's not related :)
[2014-06-24 09:18:39 -0400] holms: http://stackoverflow.com/questions/6284517/how-can-you-use-a-chef-recipe-to-set-an-environment-variable
[2014-06-24 09:19:31 -0400] laurent\: not related
[2014-06-24 09:19:57 -0400] laurent\: this is not a badly set locale env issue
[2014-06-24 09:20:31 -0400] holms: oh messed up nickname :D
[2014-06-24 09:20:36 -0400] holms: srenatus: that was for you
[2014-06-24 09:21:31 -0400] srenatus: holms: yep, looks good.  does it work?
[2014-06-24 09:21:43 -0400] laurent\: looks like i finally found the commit https://github.com/opscode/chef/commit/74452e993f527d76f46b5fba33993cc477691146 and that won't help with my issue
[2014-06-24 09:22:39 -0400] srenatus: there's just a caveat, when the magic_shell_environment provider dropped a file in /etc/profile.d/, it will probably stay there.  so, the per-resource environment method is a little more predictable, as in 'bit-rot resistant' ;)
[2014-06-24 09:23:20 -0400] holms: droped a file? which file :D
[2014-06-24 09:23:49 -0400] srenatus: holms: https://github.com/customink-webops/magic_shell/blob/master/providers/environment.rb#L38-L52
[2014-06-24 09:25:07 -0400] holms: currently i'm puzzled what i have even to set in there
[2014-06-24 09:25:36 -0400] holms: http://goo.gl/jd5gnj <- it's really hard to understand all those
[2014-06-24 09:25:42 -0400] holms: %{_datadir} and so on
[2014-06-24 09:26:15 -0400] srenatus: sorry that link only gets me to the title page every time
[2014-06-24 09:26:48 -0400] holms: ctrl+f "profile.d"
[2014-06-24 09:26:50 -0400] holms: :D
[2014-06-24 09:27:17 -0400] srenatus: :D
[2014-06-24 09:28:19 -0400] srenatus: oh I wish I hadn't. sorry, no clue right now.
[2014-06-24 09:28:34 -0400] holms: k.. http://developerblog.redhat.com/2014/03/19/permanently-enable-a-software-collection/
[2014-06-24 09:29:13 -0400] holms: that was easy
[2014-06-24 09:29:32 -0400] srenatus: ah ok.
[2014-06-24 09:30:13 -0400] chiefsucker: Hi, were migrating our infrastructure of about 200300 nodes and I recently started to use Chef as I want to have a manageable infrastructure aftewards. I already watched all webinar videos on YouTube, installed a self-hosted Enterprise Chef and bootstrapped a node. Now I wanted to add the first things to this nodes run list.
[2014-06-24 09:30:46 -0400] chiefsucker: I downloaded the community users cookbook, created the data bags, added three users, moved the cookbook to the nodes run list and ran chef-client on the node.
[2014-06-24 09:31:11 -0400] chiefsucker: But nothing seems to happen and Im not sure how I have to tell the client that it should add all users?
[2014-06-24 09:33:46 -0400] chiefsucker: chef-client synchronizes the cookbook, but I probably have to somewhere tell to install all users, right? Do I have to write my own recipe where I refer to the users cookbook? Or is there an easier way to tell chef that all entities from the users data bag should be deployed whenever I add the recipe to a run list?
[2014-06-24 09:34:56 -0400] n1ko: ttp://community.opscode.com/cookbooks/users
[2014-06-24 09:35:21 -0400] n1ko: that cookbook uses data bags for users
[2014-06-24 09:35:39 -0400] n1ko: theres also a simplier builtin way ( http://docs.opscode.com/resource_user.html )
[2014-06-24 09:35:51 -0400] n1ko: so... basicly multiple ways to do what you want depending on needs
[2014-06-24 09:37:53 -0400] chiefsucker: Yeah, I used the community cookbook.
[2014-06-24 09:38:23 -0400] chiefsucker: And I already added the data bags that are mentioned in the cookbooks docs.
[2014-06-24 09:38:51 -0400] chiefsucker: I uploaded the data bags and the unmodified community cookbook, dragged it into the run list and then executed chef-client.
[2014-06-24 09:39:04 -0400] chiefsucker: Everything seems to work fine, but the client just does nothing.
[2014-06-24 09:39:09 -0400] n1ko: did you look at the code?
[2014-06-24 09:39:12 -0400] n1ko: https://github.com/sethvargo-cookbooks/users/blob/master/recipes/default.rb
[2014-06-24 09:39:15 -0400] n1ko: this does nothing
[2014-06-24 09:39:17 -0400] chiefsucker: Yeah, the default.rb is empty.
[2014-06-24 09:39:42 -0400] n1ko: so you need either put users::sysadmin to the runlist or specificy the lwrp in your own recipe
[2014-06-24 09:39:51 -0400] chiefsucker: So whats the best approach to add the users? Should I branch the cookbook and modify the default.rb or create a new recipe that references the users cookbook?
[2014-06-24 09:39:55 -0400] n1ko: personally,i think that you should start reading about wrapper cookbooks, berkshelf etc
[2014-06-24 09:40:07 -0400] chiefsucker: Ah, OK, thanks.
[2014-06-24 09:40:11 -0400] n1ko: definetly not fork
[2014-06-24 09:40:46 -0400] n1ko: "run_list":["recipe[users::sysadmins]"]
[2014-06-24 09:40:56 -0400] n1ko: to this is enough if the users cookbooks match the sysadmins group
[2014-06-24 09:40:58 -0400] chiefsucker: Do I need to use Berkshelf? Im in the beginning and already kind of overwhelmed by Chef.
[2014-06-24 09:41:33 -0400] n1ko: well, not definetly need but it makes life easier
[2014-06-24 09:41:36 -0400] chiefsucker: Ah, OK. If I want to add users to custom groups I would have to add a custom recipe, like my_company_users and use the provided LWRP, right?
[2014-06-24 09:41:55 -0400] n1ko: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-06-24 09:42:17 -0400] n1ko: you should atleast check that out
[2014-06-24 09:42:24 -0400] chiefsucker: thx, Ill take a look at it
[2014-06-24 09:42:35 -0400] n1ko: chiefsucker: yes
[2014-06-24 09:43:08 -0400] CJNE: chiefsucker, if you're just getting started it might be a good idea to learn the berkshelf way and not learn the "old" way first and then convert to berkshelf, will save you some time :)
[2014-06-24 09:43:36 -0400] n1ko: absolutely, putting multiple recipes in run lists etc is just ugly compared to the berkshelf/wrapper-cookbook way
[2014-06-24 09:44:18 -0400] chiefsucker: Ahh, OK. I thought that roles would solve this ugliness.
[2014-06-24 09:44:44 -0400] n1ko: so dont do run_list: ["recipe[apache]", "recipe[users"] etc but do run_list: ["recipe[my_web_server]"
[2014-06-24 09:45:26 -0400] n1ko: chiefsucker: yeah, but you still need some of your own custom logic. Like the lwrp for your custom group here. Everything can't be (and shouldn't) be handled by attributes
[2014-06-24 09:45:39 -0400] n1ko: code vs configuration
[2014-06-24 09:46:19 -0400] CJNE: chiefsucker, you'd use wrapper/application cookbooks instead of roles
[2014-06-24 09:46:48 -0400] chiefsucker: OK, Ill take a look at the link you sent.
[2014-06-24 09:47:26 -0400] CJNE: google "the berkshelf way" and watch the video as well
[2014-06-24 09:51:21 -0400] chiefsucker: As I understand I should prefer attributes over data bags when going the Berkshelf way?
[2014-06-24 09:52:30 -0400] chiefsucker: I probably should go and read more :)
[2014-06-24 09:52:46 -0400] chiefsucker: Thanks for the links to all resources!
[2014-06-24 09:52:47 -0400] n1ko: data bags, roles and environments aren't versioned
[2014-06-24 09:53:01 -0400] chiefsucker: Ah, now I start to get it.
[2014-06-24 09:53:06 -0400] n1ko: I would avoid using them for stuff that changes
[2014-06-24 09:53:20 -0400] n1ko: data bags are of course the only option for passwords etc that need to be encrypted
[2014-06-24 09:53:24 -0400] n1ko: but those are pretty static anyways
[2014-06-24 09:54:02 -0400] chiefsucker: So its OK to store all known passwords in an encrypted data bag?
[2014-06-24 09:56:52 -0400] chiefsucker: And a last question for now before I start digging more into the docs: lets take the community users coobook as an example. Where do I see what the syntax for the LWRPs is and how I can create a user? I see resources/manage.rb which has actions and attributes. Is this basically what Im searching for?
[2014-06-24 09:58:04 -0400] CJNE: chiefsucker, yeah encrypted databags is hard to avoid, i'm converting to citadel wherever i can though: https://github.com/poise/citadel
[2014-06-24 10:00:35 -0400] CJNE: chiefsucker, that cookbook searches for users in a data bag if i remember it correctly, then it creates them using built in chef resources (user, group etc)
[2014-06-24 10:01:39 -0400] CJNE: here's an alternative approach, not using data bags: https://github.com/balanced-cookbooks/balanced-user
[2014-06-24 10:03:51 -0400] chiefsucker: thanks
[2014-06-24 10:03:59 -0400] CJNE: for basic needs, you can just use the built in user resource in your recipe
[2014-06-24 10:04:07 -0400] chiefsucker: Yes, the community cookbook uses data bags
[2014-06-24 10:05:13 -0400] chiefsucker: Would users_manage user do action [ :create ] end in a custom recipe be enough to let the users cookbook search for the users/user data bag and create the user, or did I miss something?
[2014-06-24 10:06:41 -0400] n1ko: yes, it should be enough
[2014-06-24 10:07:21 -0400] CJNE: chiefsucker, you should set the group to "user" in your data bag i think, otherwise it should be enough yes
[2014-06-24 10:07:41 -0400] chiefsucker: Ah, OK, so the cookbook iterates and searches for the group, I see.
[2014-06-24 10:09:55 -0400] chiefsucker: If I have users that have a group name that is equivalent to the user name, I would have to use manage_users for each user then.
[2014-06-24 10:10:58 -0400] CJNE: or add them all to some other group as well (sysadmins for example)
[2014-06-24 10:12:45 -0400] holms: https://github.com/yevgenko/cookbook-php-fpm <-- any chance to avoid starting php-fpm?
[2014-06-24 10:12:50 -0400] holms: i just need that config generated
[2014-06-24 10:16:21 -0400] CJNE: holms, that cookbook don't seem to support that, the recipe starts it and it's not configurable
[2014-06-24 10:16:33 -0400] holms: mm thnks. that's how i thought
[2014-06-24 10:17:01 -0400] holms: s'sly i think i'm gonna create a cookbook which will install php54 from scl, with php54-fpm and generating template
[2014-06-24 10:17:08 -0400] holms: legacy everywhere =(
[2014-06-24 10:18:15 -0400] CJNE: you could use the pool definition to just create the pool configuration..
[2014-06-24 10:22:17 -0400] holms: just gonna copy generated pool config for now
[2014-06-24 10:25:14 -0400] chiefsucker: CJNE, n1ko
[2014-06-24 10:25:19 -0400] chiefsucker: Thanks so much for your help!
[2014-06-24 10:26:04 -0400] chiefsucker: You cant imagine how happy I am, just because I managed to get my first recipe on a node.
[2014-06-24 10:27:20 -0400] CJNE: chiefsucker, i'm glad to hear it, congrats! :)
[2014-06-24 10:28:03 -0400] CJNE: are you testing on ec2?
[2014-06-24 10:33:00 -0400] chiefsucker: Nope, we have a private ESXi cluster.
[2014-06-24 10:35:02 -0400] chiefsucker: The company was bought by an investor, all admins and developers were fired, and now there are over 200 undocumented nodes that werent managed by admins and need to be migrated.
[2014-06-24 10:35:27 -0400] chiefsucker: Its a mess, wish me good luck ;)
[2014-06-24 10:35:42 -0400] chiefsucker: I hope that Chef partially solves the documentation issues.
[2014-06-24 11:15:10 -0400] CJNE: sounds like fun, good luck :)
[2014-06-24 12:00:59 -0400] CJNE: i have a problem with remote_file, i can curl the exact url without problems on the box but with remote_file i get a 404, any hints?
[2014-06-24 12:09:52 -0400] HontoNoRoger: hello
[2014-06-24 12:10:14 -0400] HontoNoRoger: is there any good way of appending something to an already existing file on the target node?
[2014-06-24 12:14:33 -0400] CJNE: take a look at https://github.com/opscode/chef/blob/master/lib/chef/util/file_edit.rb
[2014-06-24 12:16:12 -0400] HontoNoRoger: yeah, that's my current solution. what bugs me is that it's always seen as a updated ressource on every update run.
[2014-06-24 12:17:32 -0400] HontoNoRoger: isn't there something like framents like in puppet'S puppetlabs/concat module?
[2014-06-24 12:18:56 -0400] HontoNoRoger: like, taking contents for on file from many files or content directives simultaneously?
[2014-06-24 12:19:18 -0400] CJNE: chef 11 has partials
[2014-06-24 12:19:21 -0400] CJNE: https://github.com/danielsdeleo/partials
[2014-06-24 12:26:50 -0400] HontoNoRoger: CJNE: thanks, that looks quite promising
[2014-06-24 12:27:19 -0400] CJNE: np, haven't used it myself but i hope it works out for you :)
[2014-06-24 12:56:04 -0400] KostyaSha: what is the analog of chef-solo's "#{run_context.cookbook_collection[cookbook_name].root_dir}/files/default/" in chef-client?
[2014-06-24 12:57:34 -0400] srenatus: KostyaSha: pure guesswork: #{Chef::Config[:cache_dir]}/cookbooks/#{cookbook_name} but whaaat are you trying to do?
[2014-06-24 12:58:01 -0400] srenatus: KostyaSha: iterating the files of your cookbook can be had more easily... easiest is a subfolder and remote_directory
[2014-06-24 12:58:33 -0400] KostyaSha: i want action :install rpm_package directly from file located in this cookbook
[2014-06-24 13:01:03 -0400] KostyaSha: srenatus, should resources be fetched from cookbook or cookbook fully uploaded to client?
[2014-06-24 13:24:22 -0400] chef007: Hey guys & Girls. Quick question, when's the expected release date of chef-client 11.14? Last i heard it was end of this month, that still the case?
[2014-06-24 13:24:30 -0400] chef007: Thanks in advance!
[2014-06-24 14:35:37 -0400] AskSteve: does anybody here use the git resource in a cookbook?  I've run into a strange issue that I need some help with
[2014-06-24 14:36:27 -0400] AskSteve: if I use the resource on a new server it complains (essentially that the github server is not in known_hosts).  If I put github into known_hosts, the complaint goes away, but the resource also seems to be adding the key at that point  when it didn't before.
[2014-06-24 14:41:55 -0400] srenatus: AskSteve: do you need to use git@github.com:org/repo.git instead of git://github.com/org/repo.git ?
[2014-06-24 14:42:11 -0400] srenatus: AskSteve: if not, using the latter would make the issue go away, I think
[2014-06-24 14:51:00 -0400] AskSteve: tested it out, it has to be git@
[2014-06-24 14:51:06 -0400] tigerubuntu: hi guys, I have a working ruby script and I want to run it as a chef cookbook, how do I do it?
[2014-06-24 14:51:43 -0400] nkts: how to force create link ?
[2014-06-24 14:52:01 -0400] matti: nkts: Symbolic link?
[2014-06-24 14:52:16 -0400] nkts: will I have to excute ln -sf instead using link resource?
[2014-06-24 14:53:12 -0400] nkts: nothing related with force http://docs.opscode.com/resource_link.html
[2014-06-24 14:54:38 -0400] matti: nkts: Does it not work?
[2014-06-24 14:55:35 -0400] nkts: matti: nope, if file or directory with the same name exist
[2014-06-24 14:55:36 -0400] bmurt: anyone have a good blog/walkthrough for converting from an inline Vagrantfile for chef recipes, chef.json, etc. into a separate json to be parsed?
[2014-06-24 14:56:11 -0400] bmurt: i have multiple nodes that need to be provisioned with different receipes, etc. and i figured i could make it dynamic and load a node specific .json on each vagrant up
[2014-06-24 14:57:40 -0400] matti: nkts: There is no force, no ;/
[2014-06-24 14:58:01 -0400] matti: nkts: You can probably whip a ruby_block or something.
[2014-06-24 14:58:58 -0400] ChrissKO: Hi everybody.. I need some assistance file deletion, I want to delete a file with a wildcard, like:
[2014-06-24 14:58:59 -0400] ChrissKO:    file "#{base}/jboss-#$JB_NR/modules/org/hibernate/main/hibernate-spatial-*.jar" do
[2014-06-24 14:58:59 -0400] ChrissKO:     action :delete
[2014-06-24 14:59:00 -0400] ChrissKO:    end
[2014-06-24 14:59:02 -0400] ChrissKO: But the file is still there and no error is given, any idea?
[2014-06-24 14:59:04 -0400] ChrissKO: Well: Any idea without using bash code?
[2014-06-24 15:00:40 -0400] nkts: matti: no, I want to run it with link
[2014-06-24 15:00:54 -0400] nkts: I want to do it properly
[2014-06-24 15:02:17 -0400] miketheman: Was there ever a more elegant method or wrapper for adding/removing a node attribute than `knife node edit` or using the web ui?
[2014-06-24 15:02:25 -0400] mkirk_: bmurt: would roles help you?
[2014-06-24 15:02:39 -0400] bmurt: roles are already in use
[2014-06-24 15:04:02 -0400] mkirk_: but, to your question, could you use a role per node and move the json into each role.
[2014-06-24 15:04:19 -0400] bmurt: ahh
[2014-06-24 15:04:59 -0400] bmurt: mkirk_: here's an example https://gist.github.com/bmurtagh/906adfb17f735e69ab44
[2014-06-24 15:05:22 -0400] bmurt: but there's like 7 or 8 other boxes in the vagrantfile
[2014-06-24 15:06:27 -0400] bmurt: its also a v1 config that im trying to convert to v2 as well
[2014-06-24 15:06:28 -0400] bmurt: :_
[2014-06-24 15:06:29 -0400] bmurt: :)
[2014-06-24 15:08:32 -0400] squaresurf: ChrissKO: I don't think file supports globbing.
[2014-06-24 15:08:43 -0400] burs_: Hi, I'm relatively new to chef, but I've had a recipe running that does Tomcat, MySql etc working for a while. Suddenly, it's stopped working and I can't see why. I'm getting this error: -
[2014-06-24 15:08:50 -0400] burs_: resource template[/etc/tomcat7/tomcat-users.xml] is configured to notify resource service[tomcat] with action restart, but service[tomcat] cannot be found in the resource collection. template[/etc/tomcat7/tomcat-users.xml] is defined in /tmp/vagrant-chef-3/chef-solo-1/cookbooks/tomcat/recipes/users.rb:22:in `from_file'
[2014-06-24 15:09:49 -0400] burs_: I've figured out that it's running the tomcat::users recipe before the main tomcat recipe, so the tomcat service doesn't exist. But the recipes included are in this order: include_recipe "tomcat" include_recipe "tomcat::users"
[2014-06-24 15:09:58 -0400] ChrissKO: squaresurf: thanks, I have the same experience.. :( I guess that I will do it with a bash sript.
[2014-06-24 15:10:36 -0400] squaresurf: ChrissKO: you could use ruby if you prefer, but yeah, I think you need to get the full path for each file you're deleteing.
[2014-06-24 15:10:41 -0400] squaresurf: *deleting
[2014-06-24 15:10:45 -0400] burs_: I'm really stumped!! Any ideas appreciated...
[2014-06-24 15:12:08 -0400] squaresurf: burs_: have you stopped the tomcat service manually?
[2014-06-24 15:12:29 -0400] ChrissKO: squaresurf: Well, all files have a "remote_file" section, but I want to get rid of the old files and I do not know there exact names, so I need the wildcards.
[2014-06-24 15:12:36 -0400] squaresurf: Never mind that shouldn't cause that.
[2014-06-24 15:13:31 -0400] ChrissKO: squaresurf: My bash know how is far better than my poor ruby know how, so I think that I have to do it with a line of shell code. :(
[2014-06-24 15:13:35 -0400] burs_: It's a brand new build. So I'm expecting it to install tomcat (include_recipe "tomcat") then configure the tomcat-users.xml (include_recipe "tomcat::users") and as part of that restart the server. Trouble is, service doesn't exist, because (for some reason) it's doing the main tomcat install AFTER.
[2014-06-24 15:14:08 -0400] burs_: I'm using Vagrant, so just doing "vagrant up" and expecting it all to work (and it used to!).
[2014-06-24 15:14:31 -0400] imeyer: burs_: can you gist your run_list for the node?
[2014-06-24 15:14:31 -0400] squaresurf: ChrissKO: what about using this: http://ruby-doc.org/core-1.9.3/Dir.html#method-c-glob
[2014-06-24 15:14:32 -0400] squaresurf: ChrissKO: sounds like you have it under control then :)
[2014-06-24 15:14:36 -0400] ChrissKO: burns_: Did you check the order in the runlist?
[2014-06-24 15:14:52 -0400] VSpike: Hi. I'm starting to learn chef. It seems like it's a good idea to use vagrant too. The main possibilities I have for providers would be KVM/Qemu, Rackspace Cloud or Proxmox. None of these seem very well supported! I'm wondering - when working with clouds like AWS or Rackspace, how useful is Vagrant really as part of getting up to speed with Chef?
[2014-06-24 15:15:18 -0400] imeyer: VSpike: I've never seen a need for it.
[2014-06-24 15:15:34 -0400] squaresurf: VSpike: vagrant works well with virtualbox.
[2014-06-24 15:15:36 -0400] imeyer: Helpful? sure.. necessary? nah
[2014-06-24 15:16:08 -0400] VSpike: squaresurf: unfortunately, I already have KVM guests running on my workstation, so Virtualbox won't run
[2014-06-24 15:16:11 -0400] squaresurf: VSpike: vagrant can be useful for testing, but I use knife for actual provisioning of servers in the cloud.
[2014-06-24 15:16:25 -0400] workmad3: burs_: I think you've managed to grab the new tomcat 0.16.0 cookbook, which looks like it's changed fairly substantially... including moving the service into a LWRP and names it after the instance name (default instances == empty hash)
[2014-06-24 15:16:41 -0400] burs_: My runlist just runs the default recipe ""recipe[admin]". Inside the default recipe, I'm doing include_recipe "tomcat" include_recipe "tomcat::users" (obviously on separate lines). I'm right in thinking that the order of the include_recipe statements should be the order of execution?
[2014-06-24 15:17:10 -0400] VSpike: vagrant seems really useful for creating local test VM's quickly, but in the cloud that's pretty simple anyway
[2014-06-24 15:17:12 -0400] imeyer: burs_: see what workmad3 said ^^ .. that could be a good starting point.
[2014-06-24 15:17:28 -0400] ChrissKO: squaresurf: The c-glob looks like a solution, so I can improve my know how a bit, thanks a lot. :)
[2014-06-24 15:17:30 -0400] workmad3: burs_: so at a guess, the default tomcat users recipe is a bit broken atm
[2014-06-24 15:17:59 -0400] workmad3: burs_: and this is, in fact, an open issue on the cookbook in github ;) https://github.com/opscode-cookbooks/tomcat/issues/76
[2014-06-24 15:18:04 -0400] squaresurf: VSpike: vagrant pairs nicely with test kitchen which allows you to write integration tests
[2014-06-24 15:18:11 -0400] squaresurf: VSpike: have you seen this? https://github.com/adrahon/vagrant-kvm
[2014-06-24 15:18:25 -0400] squaresurf: ChrissKO: sure thing :)
[2014-06-24 15:18:44 -0400] VSpike: squaresurf: I was just going to ask about that. There's also https://github.com/pradels/vagrant-libvirt
[2014-06-24 15:18:50 -0400] ChrissKO: burs_: You can define the service a the end, so it will be found above in the recipe.
[2014-06-24 15:18:59 -0400] burs_: Ah, ok thanks let me check...if that's the case, is the best way forward to add a specific (earlier) version of the tomcat cookbook to my dependencies?
[2014-06-24 15:19:12 -0400] workmad3: burs_: I'd suggest doing that, yeah
[2014-06-24 15:20:03 -0400] squaresurf: VSpike: here is a link for test kitchen https://github.com/test-kitchen/test-kitchen
[2014-06-24 15:20:04 -0400] VSpike: I tried following a few "vagrant with libvirt" tutorials, but with limited success. I'm coming back to this after a break for other stuff though, so I can't remember exactly what the issues were. Partly just working out whether I actually needed to install a plugin, and if so which one
[2014-06-24 15:20:27 -0400] squaresurf: hmm
[2014-06-24 15:20:32 -0400] squaresurf: You probably do need a plugin.
[2014-06-24 15:20:33 -0400] burs_: Ok, thanks v much guys. I'll give that a go.
[2014-06-24 15:20:52 -0400] burs_: Wish I'd asked about 4 hours ago lol :)
[2014-06-24 15:21:07 -0400] imeyer: burs_: better late than never :D
[2014-06-24 15:21:17 -0400] squaresurf: VSpike: you may get better vagrant help in the #vagrant channel, since there may be users with KVM there.
[2014-06-24 15:21:26 -0400] VSpike: squaresurf: I'll try that ... thanks!
[2014-06-24 15:21:36 -0400] squaresurf: Sure thing. I just joined it :)
[2014-06-24 15:24:14 -0400] VSpike: squaresurf: I think I'll have another go at getting it running first, so I can ask more specific questions
[2014-06-24 15:25:19 -0400] squaresurf: VSpike: Sounds good. This could also prove useful: http://docs.vagrantup.com/v2/other/debugging.html
[2014-06-24 15:25:24 -0400] docwhat: Is there a mechanism for changing the authentication method for the chef-webui? I'd prefer OpenID...
[2014-06-24 15:26:21 -0400] gchristensen: tragically, OpenID is dying
[2014-06-24 15:37:27 -0400] VSpike: Another question. My OS has a version of Ruby that's way too new for chef. Is RVM a good fit for getting aroudn this?
[2014-06-24 15:38:19 -0400] VSpike: I think the other alternative I found was rbenv. Dunno how they stack up. I have a python background so ruby tooling is a new field.
[2014-06-24 15:38:19 -0400] srenatus: just use the omnibus
[2014-06-24 15:38:37 -0400] VSpike: srenatus: IIRC, it breaks horribly
[2014-06-24 15:39:01 -0400] srenatus: VSpike: I thought this was about a node, sorry
[2014-06-24 15:40:06 -0400] srenatus: VSpike: for workstations, chefdk might be the way to go, but it has problems mixing with other ruby-version/gems-management tools, https://github.com/opscode/chef-dk/issues/16
[2014-06-24 15:40:35 -0400] srenatus: VSpike: but if its just distro-ruby and chef-dk, you should be able to let PATH decide nicely
[2014-06-24 15:40:43 -0400] srenatus: (I haven't tested that, though.)
[2014-06-24 15:41:40 -0400] squaresurf: VSpike: I use chruby
[2014-06-24 15:41:50 -0400] squaresurf: https://github.com/postmodern/chruby
[2014-06-24 15:41:55 -0400] squaresurf: Nice and lightweight
[2014-06-24 15:42:36 -0400] squaresurf: I used to use rvm.
[2014-06-24 15:42:45 -0400] docwhat: gchristensen: What do you mean? Dying? I use it all the time...
[2014-06-24 15:43:30 -0400] gchristensen: z0
[2014-06-24 15:43:32 -0400] gchristensen: sV
[2014-06-24 15:43:49 -0400] gchristensen: what is even going on with my keyboard. ... docwhat: you are most definitely in the minority
[2014-06-24 15:44:14 -0400] docwhat: gchristensen: We use it as an SSO at work. It works great.
[2014-06-24 15:44:32 -0400] docwhat: Especially with the Team extension (for apps that support it).
[2014-06-24 15:44:33 -0400] gchristensen: I know it does
[2014-06-24 15:44:51 -0400] whiteadam: gchristensen: Are you using Google Glass or something?
[2014-06-24 15:45:00 -0400] gchristensen: hah, what?
[2014-06-24 15:45:08 -0400] whiteadam: crazy keyboard commands
[2014-06-24 15:45:38 -0400] gchristensen: oh, no, I wrote my own firmware for my keyboard and sometimes ... uncover bugs ...
[2014-06-24 15:46:24 -0400] gyoza: anybody know how to pull the aws instance family names?
[2014-06-24 15:46:31 -0400] whiteadam: lol
[2014-06-24 15:46:37 -0400] whiteadam: nerd
[2014-06-24 15:46:39 -0400] whiteadam: :)
[2014-06-24 15:46:55 -0400] gyoza: i know a christensen
[2014-06-24 15:46:55 -0400] gchristensen: whiteadam: says the person in an infrastructure as code channel on IRC :P
[2014-06-24 15:46:56 -0400] whiteadam: gyoza: Are you using knife-ec2 or do you mean from the instance itself?
[2014-06-24 15:47:05 -0400] gyoza: whiteadam: i wanna list all the available families
[2014-06-24 15:47:09 -0400] gyoza: for a bash script to create stufz
[2014-06-24 15:47:09 -0400] whiteadam: gchristensen: too true
[2014-06-24 15:47:44 -0400] whiteadam: gyoza: Probably can get em with one of the AWS CLI dealie doos
[2014-06-24 15:47:52 -0400] gyoza: i know but since the term is so broad
[2014-06-24 15:47:55 -0400] gyoza: i get a ton of hits
[2014-06-24 15:48:29 -0400] gyoza: just wondering if anybody had a quick solution
[2014-06-24 15:48:35 -0400] gchristensen: whiteadam: say, I'm in ATX.
[2014-06-24 15:48:45 -0400] whiteadam: U just do knife ec2 flavor list
[2014-06-24 15:48:50 -0400] gyoza: oh reallly
[2014-06-24 15:48:50 -0400] whiteadam: gchristensen: Oh yeah, who are you?
[2014-06-24 15:48:56 -0400] whiteadam: u = I
[2014-06-24 15:49:12 -0400] gyoza: thanks adam
[2014-06-24 15:49:24 -0400] gchristensen: whiteadam: I'm graham christensen. I work out of Conjunctured most days.
[2014-06-24 15:49:36 -0400] gyoza: Do you have cousins from utah?
[2014-06-24 15:49:46 -0400] gyoza: and california?
[2014-06-24 15:49:53 -0400] gchristensen: no and no
[2014-06-24 15:50:15 -0400] gyoza: well they must be related to you somehow:P
[2014-06-24 15:50:17 -0400] gchristensen: but its a proud Danish name, I wouldn't be surprised
[2014-06-24 15:50:42 -0400] whiteadam: gchristensen: Do you go to the local meetups? I missed the last one.
[2014-06-24 15:51:03 -0400] gchristensen: whiteadam: nah, I'm supremely not social... :|
[2014-06-24 15:51:12 -0400] whiteadam: I try to avoid people as well
[2014-06-24 15:51:55 -0400] gchristensen: anxiety++ amirite?
[2014-06-24 15:52:07 -0400] whiteadam: I just hate everyone
[2014-06-24 15:52:10 -0400] whiteadam: :)
[2014-06-24 15:52:28 -0400] gchristensen: haha
[2014-06-24 15:52:33 -0400] matti: Mr White.
[2014-06-24 15:52:35 -0400] matti: ;]
[2014-06-24 15:52:37 -0400] whiteadam: boom, we're linkedin friends now
[2014-06-24 15:52:40 -0400] whiteadam: o wassup matti
[2014-06-24 15:52:48 -0400] matti: Good good, you?
[2014-06-24 15:53:04 -0400] matti: I see. Some mingling on LI going on here.
[2014-06-24 15:53:23 -0400] whiteadam: I'm trying to remember what I was doing before the conference call I just got off of.
[2014-06-24 15:53:28 -0400] matti: Haha
[2014-06-24 15:53:40 -0400] whiteadam: Something to do with figuring out how to test the HA on these FreeIPA servers I think.
[2014-06-24 15:53:48 -0400] matti: IPA?
[2014-06-24 15:53:52 -0400] matti: Indian Pale Ale?
[2014-06-24 15:53:53 -0400] matti: ;D
[2014-06-24 15:53:55 -0400] whiteadam: I wish
[2014-06-24 15:54:01 -0400] matti: Me too.
[2014-06-24 15:54:02 -0400] matti: ;]
[2014-06-24 15:54:12 -0400] whiteadam: Identity... and Policy... mAnagement maybe
[2014-06-24 15:54:25 -0400] whiteadam: or maybe it's access
[2014-06-24 15:54:38 -0400] matti: Oh. IborPinAg
[2014-06-24 15:54:44 -0400] matti: ;]
[2014-06-24 15:54:57 -0400] matti: whiteadam: Put them on fire.
[2014-06-24 15:55:12 -0400] matti: whiteadam: Then blame Netflix and Simian Army.
[2014-06-24 15:55:13 -0400] matti: ;]
[2014-06-24 15:55:28 -0400] whiteadam: matti: I shut one down and was like "I dunno what happened guys, better check the logs"
[2014-06-24 15:55:50 -0400] matti: Hahaha
[2014-06-24 15:55:57 -0400] matti: Smoke and mirrors.
[2014-06-24 15:56:03 -0400] matti: Or lies and slender.
[2014-06-24 15:56:10 -0400] matti: ;p
[2014-06-24 15:56:23 -0400] matti: whiteadam: We also have Simian Army.
[2014-06-24 15:56:28 -0400] matti: whiteadam: We call it "Interns"
[2014-06-24 15:56:29 -0400] matti: ;]
[2014-06-24 15:56:38 -0400] squaresurf: lol
[2014-06-24 15:57:00 -0400] whiteadam: yeah, we have offshore interns. It's the best giving them things to do.
[2014-06-24 15:57:15 -0400] matti: Nah, they are actually nice folks. Learning super fast.
[2014-06-24 15:57:20 -0400] gyoza:  t1.micro                                 Micro Instance                           0-bit
[2014-06-24 15:57:22 -0400] gyoza: guys its 0 bit
[2014-06-24 15:57:24 -0400] gyoza: meaning
[2014-06-24 15:57:25 -0400] gyoza: SUPER FAST
[2014-06-24 15:57:37 -0400] gyoza: lol
[2014-06-24 15:57:41 -0400] whiteadam: quantum computing
[2014-06-24 15:57:42 -0400] matti: 0-bit?
[2014-06-24 15:57:54 -0400] gyoza: thats what knife ec2 flavor list shows t1 micros architecture as
[2014-06-24 15:57:55 -0400] gyoza: lol
[2014-06-24 15:58:08 -0400] whiteadam: It says c1.medium is 32-bit...
[2014-06-24 15:58:09 -0400] gchristensen: that isn't a lot of bits
[2014-06-24 15:58:20 -0400] gyoza: it does
[2014-06-24 15:58:50 -0400] matti: Maybe it's a tricky question.
[2014-06-24 15:58:52 -0400] gyoza: Did you guys see Pepper Kun? Conversation robot?
[2014-06-24 15:58:54 -0400] matti: 0-bit.
[2014-06-24 15:58:55 -0400] gyoza: 1900 bucks!
[2014-06-24 15:59:02 -0400] matti: Maybe t1.micros runs atop D-Ware.
[2014-06-24 15:59:03 -0400] gyoza: For a robot that will talk to you in japanese!
[2014-06-24 15:59:05 -0400] matti: Wave*
[2014-06-24 15:59:09 -0400] gyoza: that'd be nice
[2014-06-24 15:59:13 -0400] matti: And its actually in super-position now.
[2014-06-24 15:59:14 -0400] whiteadam: Probably do
[2014-06-24 15:59:14 -0400] gyoza: setup some miners!
[2014-06-24 15:59:20 -0400] gyoza: lol
[2014-06-24 15:59:28 -0400] matti: Quick, go crack SSL live and mine bitcoins
[2014-06-24 15:59:29 -0400] matti: ;d
[2014-06-24 15:59:32 -0400] gyoza: i wonder if anybody has compiled cgminer on a D-wave
[2014-06-24 15:59:35 -0400] whiteadam: I did that math once, they don't compute for shiz
[2014-06-24 15:59:45 -0400] whiteadam: micros that is
[2014-06-24 15:59:48 -0400] matti: gyoza: I am sure there is someone running Minecraft on it ;]
[2014-06-24 15:59:50 -0400] gyoza: yes
[2014-06-24 15:59:54 -0400] gyoza: lol
[2014-06-24 15:59:58 -0400] gyoza: 3000 player server
[2014-06-24 15:59:59 -0400] matti: gyoza: All the zombies that come at night need qubits
[2014-06-24 16:00:00 -0400] gyoza: no boundary
[2014-06-24 16:00:17 -0400] gyoza: igot pretty good at java fu running a minecraft server
[2014-06-24 16:00:46 -0400] matti: gyoza: www.youtube.com/watch?v=iNw2YcAK9Wc
[2014-06-24 16:00:50 -0400] joelmoss: anyone know if it is possible to detects if a service is installed?
[2014-06-24 16:00:52 -0400] matti: gyoza: Cats + Minecraft
[2014-06-24 16:01:03 -0400] matti: gyoza: The very quintesence of why internet was built
[2014-06-24 16:01:29 -0400] whiteadam: joelmoss: Like, in an rspec test?
[2014-06-24 16:01:32 -0400] joelmoss: Im running notifies :restart, "service[jetty], but I only want it to run if Jetty service is enabled
[2014-06-24 16:01:37 -0400] joelmoss: no, in a recip
[2014-06-24 16:01:43 -0400] joelmoss: *recipe
[2014-06-24 16:01:45 -0400] matti: joelmoss: If its enabled then no need to do anything.
[2014-06-24 16:01:52 -0400] matti: joelmoss: Provider will most likely do nothing.
[2014-06-24 16:02:09 -0400] matti: Ahh.
[2014-06-24 16:02:12 -0400] matti: Notifies.
[2014-06-24 16:02:14 -0400] joelmoss: yes, but when it does not exist, it fails and stops chef run
[2014-06-24 16:02:15 -0400] matti: Bah.
[2014-06-24 16:02:23 -0400] matti: Yep, I misread ;]
[2014-06-24 16:02:29 -0400] joelmoss: any ideas?
[2014-06-24 16:02:32 -0400] matti: [ Or not read fully ]
[2014-06-24 16:02:45 -0400] whiteadam: only run it on servers with Jetty?
[2014-06-24 16:02:57 -0400] matti: joelmoss: Jetty, so simple port poke?
[2014-06-24 16:03:17 -0400] joelmoss: ?
[2014-06-24 16:03:21 -0400] matti: joelmoss: You can even do bit ugly bash in not_if.
[2014-06-24 16:03:35 -0400] matti: joelmoss: Like: ps aux | grep ... or pgrep or whatnot.
[2014-06-24 16:04:07 -0400] joelmoss: can you do a not_if on a notifies?
[2014-06-24 16:04:14 -0400] joelmoss: I have notifies in a bash block
[2014-06-24 16:04:26 -0400] joelmoss: the bash block should always run, but not the service restart
[2014-06-24 16:04:36 -0400] matti: joelmoss: I was thinking in the service resource.
[2014-06-24 16:04:56 -0400] matti: joelmoss: Unless have it to start it in other cases.
[2014-06-24 16:04:59 -0400] whiteadam: http://docs.opscode.com/resource_service.html
[2014-06-24 16:05:41 -0400] joelmoss: Im only running a service resource when jetty is installed, which it is not always
[2014-06-24 16:06:04 -0400] joelmoss: so when jetty is not installed, I will not have included the service[jetty] resource
[2014-06-24 16:06:12 -0400] whiteadam: So, just assign the cookbook to the servers that have jetty installed?
[2014-06-24 16:06:15 -0400] joelmoss: but I will always be calling the bash block
[2014-06-24 16:06:21 -0400] matti: Hmm.
[2014-06-24 16:06:29 -0400] joelmoss: you following me? ;)
[2014-06-24 16:06:43 -0400] joelmoss: the bash block that has the notifies in it, is always run
[2014-06-24 16:06:46 -0400] matti: joelmoss: Can you change it as per whiteadam suggests?
[2014-06-24 16:06:49 -0400] joelmoss: but jetty recipe is not
[2014-06-24 16:07:09 -0400] joelmoss: no, I dont want to install jetty in every case
[2014-06-24 16:07:10 -0400] matti: joelmoss: Can you factor it out? The notify?
[2014-06-24 16:07:18 -0400] matti: joelmoss: Don't have to.
[2014-06-24 16:07:21 -0400] joelmoss: yes, but I would like to keep it
[2014-06-24 16:07:30 -0400] matti: Man, you are not making this easier ;p
[2014-06-24 16:07:37 -0400] joelmoss: lol  sorry dude
[2014-06-24 16:07:39 -0400] matti: Hahah
[2014-06-24 16:07:41 -0400] matti: :)
[2014-06-24 16:07:54 -0400] whiteadam: joelmoss: Are you using chef-client to perform the restart?
[2014-06-24 16:08:06 -0400] joelmoss: yes
[2014-06-24 16:08:30 -0400] whiteadam: but you're not using the jetty cookbook to perform the restart?
[2014-06-24 16:08:49 -0400] joelmoss: not in the case of this bash block, no
[2014-06-24 16:09:07 -0400] VSpike: So I think I should be doing ruby-install 1.9; chruby ruby-1.9.3-p547; gem install chef ... should I be doing that as root?
[2014-06-24 16:09:22 -0400] joelmoss: the recipe that the bash block includes, is always run
[2014-06-24 16:09:33 -0400] joelmoss: but jetty recipe is not always
[2014-06-24 16:09:39 -0400] VSpike: I just tried as a normal user and I get "ERROR: Permission denied - /var/chef"
[2014-06-24 16:09:40 -0400] squaresurf: VSpike: do you have a multi user installation on your machine?
[2014-06-24 16:09:51 -0400] squaresurf: Ah, then you may need to do that as root.
[2014-06-24 16:09:54 -0400] VSpike: squaresurf: it's really only me that uses it, TBH
[2014-06-24 16:10:14 -0400] squaresurf: Then a user install should be fine.
[2014-06-24 16:10:25 -0400] squaresurf: I would do non root until it complains.
[2014-06-24 16:10:25 -0400] whiteadam: joelmoss: So, do you want the bash to see if a service is installed?
[2014-06-24 16:10:29 -0400] VSpike: squaresurf: having done what I've done, "sudo chef" fails because the magic of chruby breaks
[2014-06-24 16:10:54 -0400] VSpike: squaresurf: but it *is* complaining .. see above ^ :)
[2014-06-24 16:10:57 -0400] joelmoss: whiteadam: the bash does something else that requires a jetty restart, but ONLY if jetty is installed and running
[2014-06-24 16:11:21 -0400] whiteadam: if ps ax | grep -v grep | grep $SERVICE > /dev/null
[2014-06-24 16:11:22 -0400] whiteadam: then
[2014-06-24 16:11:24 -0400] whiteadam: whatever
[2014-06-24 16:11:36 -0400] whiteadam: else   whatever else
[2014-06-24 16:11:41 -0400] whiteadam: How about that?
[2014-06-24 16:11:48 -0400] matti: whiteadam: grep [s]ervice ;]
[2014-06-24 16:12:04 -0400] joelmoss: dirty, but itll work I suppose
[2014-06-24 16:12:06 -0400] matti: whiteadam: Cut grep a day, will make a healthier way!
[2014-06-24 16:12:13 -0400] matti: [ Or something ]
[2014-06-24 16:12:17 -0400] joelmoss: will try it, thx guys
[2014-06-24 16:12:25 -0400] matti: joelmoss: Systems work man.
[2014-06-24 16:12:37 -0400] matti: joelmoss: Always scrubbing poo from the walls after it hit the fan.
[2014-06-24 16:12:39 -0400] matti: joelmoss: ;]
[2014-06-24 16:12:41 -0400] joelmoss: matti: depends whos running them ;)
[2014-06-24 16:12:47 -0400] squaresurf: VSpike: my laptop died.
[2014-06-24 16:12:52 -0400] matti: joelmoss: Bah ;p
[2014-06-24 16:13:03 -0400] squaresurf: last msg from you: "squaresurf: having done what I've done, "sudo chef" fails because the magic of chruby breaks"
[2014-06-24 16:13:14 -0400] matti: joelmoss: You are damaging my view of the known universe ;p
[2014-06-24 16:13:23 -0400] squaresurf: you shouldn't need to run chef with sudo.
[2014-06-24 16:13:23 -0400] joelmoss: sorry to burst ya bubble
[2014-06-24 16:13:29 -0400] matti: joelmoss: :(
[2014-06-24 16:13:30 -0400] squaresurf: What are you trying to do with chef though?
[2014-06-24 16:13:57 -0400] whiteadam: VSpike: Sounds like you need to start over and make sure to run everything as the user and not root... if this is a workstation
[2014-06-24 16:14:12 -0400] squaresurf: looks like thats what he did
[2014-06-24 16:14:19 -0400] squaresurf: 09:09 VSpike: So I think I should be doing ruby-install 1.9; chruby ruby-1.9.3-p547; gem install chef ... should I be doing that as root?
[2014-06-24 16:14:29 -0400] squaresurf: no sudo there
[2014-06-24 16:14:40 -0400] VSpike: yep, i did everything as a normal user
[2014-06-24 16:14:41 -0400] squaresurf: although I guess he could be logged in as root
[2014-06-24 16:14:43 -0400] squaresurf: cool
[2014-06-24 16:14:54 -0400] squaresurf: So after what command do you get the error?
[2014-06-24 16:15:00 -0400] whiteadam: but it said he can't access /var/chef or something like that
[2014-06-24 16:15:00 -0400] VSpike: squaresurf: chef-client
[2014-06-24 16:15:10 -0400] squaresurf: Ah
[2014-06-24 16:15:20 -0400] VSpike: I just did sudo mkdir -p /var/chef/cache/checksums; sudo chown -R johncc\: /var/chef
[2014-06-24 16:15:21 -0400] whiteadam: what's the output of "which ruby"
[2014-06-24 16:15:31 -0400] VSpike: /home/johncc/.rubies/ruby-1.9.3-p547/bin/ruby
[2014-06-24 16:15:44 -0400] whiteadam: that makes sense
[2014-06-24 16:15:45 -0400] squaresurf: Are you trying to provision your workstation?
[2014-06-24 16:15:51 -0400] VSpike: Yep
[2014-06-24 16:15:57 -0400] squaresurf: Ah.
[2014-06-24 16:16:12 -0400] whiteadam: oh then I dunno.
[2014-06-24 16:16:18 -0400] VSpike: Gets a bit further now but then chokes on  ERROR: I cannot write your private key to /etc/chef/client.pem - check permissions?
[2014-06-24 16:16:29 -0400] whiteadam: Are you bootstrapping yourself?
[2014-06-24 16:17:03 -0400] joelmoss: whiteadam, matti: found a better way thx to Chef Sugar includes_recipe?(jetty)
[2014-06-24 16:17:08 -0400] VSpike: Wait... my bad. I want knife, not chef-client don't I?
[2014-06-24 16:17:18 -0400] squaresurf: yeah
[2014-06-24 16:17:21 -0400] matti: joelmoss: Well. This is what whiteadam said ;]
[2014-06-24 16:17:24 -0400] whiteadam: joelmoss: hah, yeah, sugar is the jam. I thought it was only for tests though
[2014-06-24 16:17:31 -0400] joelmoss: did he?
[2014-06-24 16:17:32 -0400] gleam: speaking of chef-sugar, is there a way to make the attribute namespaces work during compile time?
[2014-06-24 16:17:34 -0400] joelmoss: oh sorry
[2014-06-24 16:17:35 -0400] squaresurf: chef-client is for provisioning a node
[2014-06-24 16:17:51 -0400] VSpike: Told you I'd been away from this for a while. Meh. This is why I hate getting interrupted in the middle of something, especially when that something involves learning new stuff
[2014-06-24 16:17:53 -0400] matti: joelmoss: Not directly, no.
[2014-06-24 16:17:59 -0400] matti: joelmoss: +1 for sugar :)
[2014-06-24 16:18:01 -0400] whiteadam: joelmoss: I asked it the recipe was only assigned to certain servers.
[2014-06-24 16:18:08 -0400] squaresurf: VSpike: no worries :)
[2014-06-24 16:18:45 -0400] whiteadam: oh RedHat support, whyusoslow
[2014-06-24 16:31:00 -0400] prometheanfire: so, searching is not working :|
[2014-06-24 16:31:08 -0400] prometheanfire: knife search node 'recipes:foo::bar'
[2014-06-24 16:31:16 -0400] prometheanfire: ERROR: knife search failed: invalid search query: 'recipes:phpstack::application_php'
[2014-06-24 16:31:19 -0400] whiteadam: man, don't go into the #rhel channel, It's all assholes.
[2014-06-24 16:31:29 -0400] prometheanfire: also, does the recipes search not dive into roles anymore?
[2014-06-24 16:31:46 -0400] Pushkar: cron resource expects minutes attribute to get value between 0-59
[2014-06-24 16:32:08 -0400] Pushkar: is there any way I can use to schedule a job that runs every 5 mins
[2014-06-24 16:32:29 -0400] gchristensen: */5
[2014-06-24 16:32:45 -0400] gchristensen: or 0,5,10,15,20,25,... you get the point. both are valid syntaxes
[2014-06-24 16:35:02 -0400] Pushkar: well cron resource fails to create a job when I specify minutes as 0/5
[2014-06-24 16:35:17 -0400] gchristensen: yeah, 0/5 isn't correct syntax
[2014-06-24 16:36:05 -0400] Pushkar: ergh I don't know what I was thinking
[2014-06-24 16:36:08 -0400] Pushkar: got it
[2014-06-24 16:36:41 -0400] gleam: i take it you put it in quotes?
[2014-06-24 16:37:02 -0400] gleam: fwiw 0/5 should work. I sometimes do 12/15 for something that will run at :12, :27, :42, :57
[2014-06-24 16:37:05 -0400] gleam: for example
[2014-06-24 16:38:22 -0400] gleam: oh actually i do 12-59/15
[2014-06-24 16:38:24 -0400] gleam: nevermind!
[2014-06-24 16:38:38 -0400] Pushkar: I think correct syntax is */5
[2014-06-24 16:38:42 -0400] Pushkar: and not 0/5
[2014-06-24 16:38:51 -0400] gleam: */5 would be the equivalent of 0-59/5
[2014-06-24 16:48:34 -0400] squaresurf: Correct me if I'm wrong, but wouldn't 12-59/15 run at 15, 30, 45?
[2014-06-24 16:48:45 -0400] squaresurf: I always thought it was modular arithmetic.
[2014-06-24 16:51:42 -0400] gleam: Ranges can include "steps", so "1-9/2" is the same as "1,3,5,7,9".
[2014-06-24 16:51:47 -0400] gleam: (per the manpage)
[2014-06-24 16:52:22 -0400] gleam: your version would run it on 0/2/4/6/8
[2014-06-24 16:52:37 -0400] squaresurf: ah its steps
[2014-06-24 16:52:41 -0400] squaresurf: That makes sense.
[2014-06-24 17:09:41 -0400] Majost: Huzzah! I like  Chef Office Hours announcement. =)
[2014-06-24 17:21:01 -0400] EricL: If you want to replace the entire sources.list file using chef, is the best way to use a template and just clobber the existing one when that runs before the apt cookbook?
[2014-06-24 17:23:00 -0400] EricL: And if that is the goal, is it smart to put that first on a bootstrap as well?
[2014-06-24 17:23:04 -0400] gleam: yes, see for example the debian/ubuntu cookbooks
[2014-06-24 17:23:06 -0400] battery: is there a way to compare chef runs between hosts?
[2014-06-24 17:23:13 -0400] gleam: https://github.com/opscode-cookbooks/ubuntu/blob/master/recipes/default.rb
[2014-06-24 17:30:51 -0400] EricL: gleam: I did'nt realize there was an Ubuntu cookbook.  I have been doing everything with the apt cookbook.
[2014-06-24 17:30:59 -0400] EricL: I should look in to that.
[2014-06-24 17:31:42 -0400] rsavage: In a Chef/Ruby template what is the difference between %> and -%> ??
[2014-06-24 17:31:59 -0400] gleam: there's one for debian too
[2014-06-24 17:32:08 -0400] gleam: they manage your main sources.list and then you can use apt_repository to manage sources.list.d
[2014-06-24 17:32:25 -0400] EricL: This is WAY better than what I was about to do.
[2014-06-24 17:32:32 -0400] EricL: gleam: Thanks.
[2014-06-24 17:33:06 -0400] gleam: rsavage: <%- -%> suppresses trailing newline + trailing spaces
[2014-06-24 17:33:15 -0400] gleam: <% -%> suppresses trailing newline
[2014-06-24 17:33:36 -0400] gleam: sorry leading space
[2014-06-24 17:33:42 -0400] gleam: (for the first one)
[2014-06-24 17:34:55 -0400] rsavage: ok thanks
[2014-06-24 17:36:07 -0400] rsavage: do I need <%- to use -%>?  or can I do <% whatever -%> ?
[2014-06-24 17:36:58 -0400] gleam: you can do <% foo -%>
[2014-06-24 17:37:17 -0400] rsavage: ok cool
[2014-06-24 17:47:26 -0400] jmreicha: What's the best way to differentiate between OS versions using ohai?  I am trying platform_version but getting errors when I run chef-client?
[2014-06-24 17:49:30 -0400] whiteadam: jmreicha: how about "ohai platform"
[2014-06-24 17:49:50 -0400] whiteadam: jmreicha: Wait, I read that wrong.
[2014-06-24 17:50:19 -0400] jmreicha: Basically I'm trying to install different packages for different version of ubuntu (13.10 v 14.04)
[2014-06-24 17:50:42 -0400] whiteadam: if you run ohai platform_version manually, does it return the proper version?
[2014-06-24 17:50:51 -0400] jmreicha: whiteadam: yes
[2014-06-24 17:53:40 -0400] whiteadam: snap
[2014-06-24 17:53:46 -0400] jmreicha: In my cookbook I am doing - "if platform_version?("13.10")
[2014-06-24 17:54:03 -0400] jmreicha: that's the bit it chokes on
[2014-06-24 17:55:29 -0400] jmreicha: It comes back with " No resource or method named `platform_version?'"
[2014-06-24 17:56:30 -0400] whiteadam: hmm, try removing the question mark
[2014-06-24 17:56:50 -0400] whiteadam: or do it long hand, if platform_version = 13.10
[2014-06-24 17:58:09 -0400] jmreicha: whiteadam: ok just a sec - same deal removing the question mark
[2014-06-24 17:58:15 -0400] jmreicha: I'll try long hand
[2014-06-24 17:59:11 -0400] whiteadam: Yeah, I have a feeling it's looking at platform_version? and kicking out AttributeNotFound
[2014-06-24 17:59:36 -0400] jmreicha: Yep, that was it
[2014-06-24 17:59:38 -0400] jmreicha: thank you sir
[2014-06-24 17:59:56 -0400] whiteadam: first time I've ever been right
[2014-06-24 18:00:00 -0400] jmreicha: lol
[2014-06-24 18:01:30 -0400] rsavage: gleam: what is <%= ?
[2014-06-24 18:02:05 -0400] davidordave: ^ that replaces the current line with the result of the internal ruby block
[2014-06-24 18:02:26 -0400] rsavage: gotcha
[2014-06-24 18:02:31 -0400] __stuart__: I'm having problems with build-essential-2.0.4 and apt-2.4.0: apt's '.run_action(:run)' to run apt-get update at compile-time seems to be being trumped by be's 'CompileTime.new(self).evaluate()' - how should I expect these to be ordered?
[2014-06-24 18:03:09 -0400] __stuart__: (basically, build-essential runs first, and then aborts the Chef run because the apt cache is stale)
[2014-06-24 18:03:34 -0400] __stuart__: This is despite the new compile_time_update attribute added in apt-2.4.0 :(
[2014-06-24 18:04:45 -0400] gleam: foo <%= node['name'] %> will spit out "foo mynode.example.com"
[2014-06-24 18:04:55 -0400] __stuart__: Any ideas how I can ensure that the apt cookbook *always* runs `apt-get update` /before/ build-essential executes?
[2014-06-24 18:05:36 -0400] gleam: do you need build-essential to run at compile time?
[2014-06-24 18:06:27 -0400] gleam: (e.g. are you using a chef_gem that relies on it?)
[2014-06-24 18:06:50 -0400] __stuart__: gleam: Yeah, unfortunately
[2014-06-24 18:06:58 -0400] gleam: oof
[2014-06-24 18:08:03 -0400] __stuart__: build-essential used to deal with this, but in a change removed this behaviour (see https://github.com/opscode-cookbooks/build-essential/pull/32) - and I've not been able to get it to work since :(
[2014-06-24 18:08:45 -0400] __stuart__: The apt cookbook introduced a 'compile_time_update', but this doesn't seem to cause it to run before build-essential...
[2014-06-24 18:09:15 -0400] EricL: __stuart__: I am in the process of dealing with a similar issues.
[2014-06-24 18:09:17 -0400] __stuart__: (https://github.com/opscode-cookbooks/apt/pull/75 & https://tickets.opscode.com/browse/COOK-4534)
[2014-06-24 18:09:35 -0400] __stuart__: EricL: From random Googling, it looks as if lots of people are ;)
[2014-06-24 18:09:40 -0400] __stuart__: Any progress?
[2014-06-24 18:09:42 -0400] EricL: __stuart__: I just ended up putting the Ubuntu package first and replacing the sources.list for Ubuntu.
[2014-06-24 18:09:57 -0400] EricL: That forces an update of the apt cache and things seem to go smoothly from there.
[2014-06-24 18:10:17 -0400] EricL: I don't know if it will solve your problem, but it solved mien.
[2014-06-24 18:10:22 -0400] gleam: it's not quite teh same situation
[2014-06-24 18:10:34 -0400] gleam: this is about contention between two different resources that run at compile time
[2014-06-24 18:11:15 -0400] __stuart__: Yeah, I'm trying to fix this for newly created vagrant and cloud nodes - so I can't really do anything before Chef runs, and want to keep the cookbooks as platform-neutral as possible
[2014-06-24 18:11:37 -0400] EricL: Gotchya.
[2014-06-24 18:11:52 -0400] __stuart__: You're right though - I can't find any documentation stating how execution is ordered at compile time, just that it's not what you'd expect
[2014-06-24 18:12:38 -0400] __stuart__: ... so I'm trying to find if it's effectively FIFO, LIFO, whether CompileTime.new() will always beat .run_action(:run), or something else
[2014-06-24 18:14:03 -0400] gleam: ok, so i think that what you need to do is: create an apt wrapper cookbook, put it first in your run list, and use it to add the update using compiletime.new()
[2014-06-24 18:14:13 -0400] gleam: it looks like the compilation order is libraries, attributes, lwrps, resource definitions, recipes
[2014-06-24 18:14:44 -0400] gleam: since apt's is in the recipe itself it doesn't come until long after build-essential is compiled
[2014-06-24 18:14:46 -0400] __stuart__: Yeah - I'm considering porting the apt cookbook to also use CompileTime.new(), but I was hoping to avoid having to fork yet more community cookbooks...
[2014-06-24 18:14:54 -0400] gleam: well you shouldn't need to fork in this case
[2014-06-24 18:14:56 -0400] gleam: just wrap it
[2014-06-24 18:15:09 -0400] gleam: mycorp_apt
[2014-06-24 18:15:10 -0400] EricL: I have 90% of the community cookbooks wrapped.
[2014-06-24 18:15:11 -0400] __stuart__: gleam: Ah - that's interesting, do you have a source for that list?
[2014-06-24 18:15:21 -0400] gleam: https://github.com/opscode/chef/blob/e48982882fbf3839ffa52884a09867a11a331141/lib/chef/run_context/cookbook_compiler.rb#L70
[2014-06-24 18:15:23 -0400] EricL: The only one that I couldn't wrap and had no choice but to edit was Nagios.
[2014-06-24 18:15:24 -0400] __stuart__: gleam: Gotcha w.r.t. wrapping
[2014-06-24 18:15:43 -0400] EricL: Wrapping all the community cookbooks has given me outs more times than I can count.
[2014-06-24 18:15:55 -0400] gleam: yeah, i end up wrapping pretty much everything too
[2014-06-24 18:15:57 -0400] __stuart__: gleam: Aewsome, thanks!
[2014-06-24 18:16:03 -0400] __stuart__: *Awesome
[2014-06-24 18:16:47 -0400] gleam: stuart, as long as your helper cookbook comes before build-essential in the ordered list of cookbooks (see cookbook_order on line 82), i think it'll work
[2014-06-24 18:18:33 -0400] VonUber: should the :delete action of the file resource fail if the given file does not exist or just give an {up to date) - currently it makes my chef run fail when the file is not present.
[2014-06-24 18:23:49 -0400] gleam: it appears it just runs file.delete
[2014-06-24 18:24:00 -0400] gleam: so in your file resource do a only_if File.exists?(whatever)
[2014-06-24 18:24:57 -0400] VonUber: cool beans, seems counterintuitive based on my limited chef experience.
[2014-06-24 18:33:33 -0400] gleam: i'd agree
[2014-06-24 19:01:14 -0400] sylvainsf: anyone ever tried to add an existing node to chef (on ec2) only to find the node[:ec2] is blank even though bootstrapping succeeds?
[2014-06-24 19:01:27 -0400] whiteadam: yeah dog
[2014-06-24 19:01:43 -0400] whiteadam: sylvainsf: Did you create the node with knife-ec2?
[2014-06-24 19:01:55 -0400] sylvainsf: nope, someone else created it I'm trying to manage it
[2014-06-24 19:02:01 -0400] whiteadam: I got you
[2014-06-24 19:02:02 -0400] whiteadam: sudo mkdir -p /etc/chef/ohai/hints/
[2014-06-24 19:02:03 -0400] whiteadam: sudo touch /etc/chef/ohai/hints/ec2.json
[2014-06-24 19:02:04 -0400] whiteadam: sudo chef-client
[2014-06-24 19:02:08 -0400] sylvainsf: awesome you rock
[2014-06-24 19:02:11 -0400] whiteadam: then, magic
[2014-06-24 19:03:52 -0400] rbowlby: getting ruby error trying to run chef-client on a host where the default ruby is in rvm
[2014-06-24 19:04:11 -0400] sylvainsf: thanks again whiteadm that did the trick
[2014-06-24 19:06:31 -0400] shanlar: can a resource have multiple subscribes?
[2014-06-24 19:06:36 -0400] rbowlby: is that normal and what's the preferred method of fixing it?
[2014-06-24 19:07:14 -0400] squaresurf: You could also use notifies.
[2014-06-24 19:11:26 -0400] stuntmachine: is bundler supposed to be included w/ chef-dk?
[2014-06-24 19:16:48 -0400] chip-: stuntmachine: yup.
[2014-06-24 19:29:13 -0400] mjuszczak: If I put this at the top of a recipe (http://pastebin.com/qjniq5rL), is there a way to access those from an erb template?  Or something I can put in the attributes file?
[2014-06-24 19:30:48 -0400] davidordave: @mjuszczak, I think you are looking for the variables attribute for templates.
[2014-06-24 19:30:57 -0400] threadwaste: mjuszczak: you can pass the entire hash or individual elements to the template via the variables attribute.
[2014-06-24 19:31:08 -0400] mjuszczak: oh!  How?
[2014-06-24 19:31:15 -0400] threadwaste: http://docs.opscode.com/essentials_cookbook_templates.html#variables
[2014-06-24 19:31:29 -0400] gyoza: is there a more graceful way to abort a cookbook if it finds a file that the cookbook creates other than a ruby block raise condition?
[2014-06-24 19:31:39 -0400] mjuszczak: Would I want that to be inside an attributes file, or at the top of the recipe?
[2014-06-24 19:31:53 -0400] mjuszczak: If I'm listening users and whether they should be enabled orn ot
[2014-06-24 19:32:39 -0400] threadwaste: mjuszczak: depends on on the use case, but an attribute makes more sense generally for that sort of thing.
[2014-06-24 19:32:50 -0400] threadwaste: sets a default, easy to override, etc.
[2014-06-24 19:33:12 -0400] rbowlby: anyone know how to get chef-client working? I think RVM might be causing the issue. http://pastebin.com/3PFajzjT
[2014-06-24 19:33:30 -0400] gyoza: centos?
[2014-06-24 19:33:35 -0400] gyoza: rbowl?
[2014-06-24 19:33:41 -0400] mjuszczak: gotcha!
[2014-06-24 19:33:42 -0400] mjuszczak: thanks!
[2014-06-24 19:33:46 -0400] rbowlby: ubuntu
[2014-06-24 19:33:52 -0400] gyoza: i've found that installing ruby-devel makes that shit go away even though you're not supposed to need that.. (at least on centos)
[2014-06-24 19:34:05 -0400] gyoza: oh my bad
[2014-06-24 19:34:07 -0400] gyoza: thats not a compile error
[2014-06-24 19:34:41 -0400] gyoza: doesnt really tell us what is mising
[2014-06-24 19:34:46 -0400] gyoza: that error
[2014-06-24 19:36:19 -0400] rbowlby: any additional info I can provide?
[2014-06-24 19:36:40 -0400] gyoza: try running with _V
[2014-06-24 19:36:41 -0400] gyoza: -V
[2014-06-24 19:36:52 -0400] gyoza: get more verb0se
[2014-06-24 19:37:13 -0400] rbowlby: same error
[2014-06-24 19:37:30 -0400] rbowlby: no more verbose since it doesn't get that far I suppose
[2014-06-24 19:37:54 -0400] gyoza: :(
[2014-06-24 19:38:15 -0400] gyoza: you could always try to find some linux equivalent of process explorer to see which file its failing on
[2014-06-24 19:38:22 -0400] gyoza: im sure there is something
[2014-06-24 19:41:36 -0400] reese_: anyone know how to set chef node attributes with chef-metal?
[2014-06-24 19:42:07 -0400] jkeiser: reese_: attribute 'name', 'value' or attribute [ 'path', 'to', 'attribute' ], 'value' or attributes { ... }
[2014-06-24 19:42:36 -0400] reese_: under the 'machine' resource?
[2014-06-24 19:43:04 -0400] jblancett: when knife hints are created during bootstrap are they supposed to become node attributes?
[2014-06-24 19:43:16 -0400] jblancett: I'm not quite understanding the role they play
[2014-06-24 19:52:36 -0400] reese_: jblancett: ok, got it. so as a bad example, if i wanted to set "node.override['authorization']['sudo']['passwordless'] = true", i would add the line "attributes 'authorization' => { 'sudo' => { 'passwordless' => true } }" under the machine resource
[2014-06-24 19:52:45 -0400] reese_: jkeiser: thank you
[2014-06-24 19:54:12 -0400] gyoza: is there a more graceful way to abort a cookbook if it finds a file that the cookbook creates other than a ruby block raise condition?  - gonna write this again:P
[2014-06-24 19:54:45 -0400] whiteadam: gyoza: Dude, I seriously thought I was going crazy for a second there, then I noticed it was just you re-posting it
[2014-06-24 19:54:53 -0400] gyoza: lol
[2014-06-24 19:55:08 -0400] gyoza: I just assume most of us are on unix terminals and my question has scrolled off already
[2014-06-24 19:55:09 -0400] gyoza: so i asked agina:P
[2014-06-24 19:55:18 -0400] froolie: you guys, do I have to run the default recipe first?
[2014-06-24 19:55:20 -0400] whiteadam: Hah, yeah, that's what I'm using
[2014-06-24 19:55:28 -0400] gyoza: im using epic5
[2014-06-24 19:55:35 -0400] whiteadam: froolie: What would you say the default recipe is
[2014-06-24 19:55:40 -0400] gyoza: default.rb
[2014-06-24 19:55:41 -0400] gyoza: ?
[2014-06-24 19:55:42 -0400] whiteadam: gyoza: irssi with some stuff here
[2014-06-24 19:55:59 -0400] gyoza: i wrote my own theme for this script (as a favor to the author) so i use it cause its oh so pretty:P
[2014-06-24 19:56:07 -0400] froolie: I have a cookbook, mycookbook, and underneath are the default.rb and user.rb recipes. The user one creates a specific user, and the default one installs the app
[2014-06-24 19:56:17 -0400] gyoza: http://gyazo.com/93441f8283588ba4a54cce4c3f61d7c4
[2014-06-24 19:56:24 -0400] froolie: I'm trying to run the user one to test it out and see if it works, and the node keeps skipping it
[2014-06-24 19:56:31 -0400] froolie: and going straight to the default recipe
[2014-06-24 19:56:39 -0400] gyoza: did you include userbook?
[2014-06-24 19:56:45 -0400] gyoza: include_recipe "base::crontabs"
[2014-06-24 19:56:47 -0400] whiteadam: damn dog, you share images fast
[2014-06-24 19:57:02 -0400] gyoza: whiteadam: its gyazo its a program that runs copys image and uploads it immediately
[2014-06-24 19:57:04 -0400] froolie: well, I'm lying actually
[2014-06-24 19:57:06 -0400] gyoza: its prob the best thing
[2014-06-24 19:57:06 -0400] froolie: :)
[2014-06-24 19:57:13 -0400] gyoza: not to be confused with my name
[2014-06-24 19:57:17 -0400] gyoza: (which is common)
[2014-06-24 19:57:17 -0400] froolie: it's not skipping it, it's saying 404 Object Not Found
[2014-06-24 19:57:24 -0400] gyoza: uh
[2014-06-24 19:57:31 -0400] froolie: even though the recipe is on my chef server
[2014-06-24 19:57:32 -0400] gyoza: can you put the full error on pastebin?
[2014-06-24 19:57:35 -0400] froolie: sure
[2014-06-24 19:57:37 -0400] gyoza: thx
[2014-06-24 19:57:48 -0400] gyoza: I love gyazo
[2014-06-24 19:57:53 -0400] gyoza: I may even pay for it one day
[2014-06-24 19:58:05 -0400] whiteadam: I use snagit, but I don't have it hooked to anything
[2014-06-24 19:58:07 -0400] gyoza: Its clearly using AWS and S3
[2014-06-24 19:58:36 -0400] gyoza: aahh, yea gyazo is like, the lazymans imgur
[2014-06-24 19:58:42 -0400] gyoza: lol
[2014-06-24 19:59:23 -0400] froolie: http://pastebin.com/Whpd3kGt
[2014-06-24 19:59:25 -0400] gyoza: is this ghetto or what? http://gyazo.com/c2e35eb7a1291cad2ae3e6f6faf78cf0
[2014-06-24 20:00:01 -0400] gyoza: can you run it with -V
[2014-06-24 20:00:28 -0400] whiteadam: gyoza: http://oi60.tinypic.com/8vst92.jpg
[2014-06-24 20:00:30 -0400] whiteadam: there we go
[2014-06-24 20:00:38 -0400] gyoza: aah nice
[2014-06-24 20:00:43 -0400] gyoza: oooh i like the names on the side
[2014-06-24 20:00:59 -0400] whiteadam: don't ask how I did all that, I don't even remember
[2014-06-24 20:01:00 -0400] gyoza: i still use good ole /sc
[2014-06-24 20:01:07 -0400] gyoza: its all perl:P
[2014-06-24 20:01:16 -0400] gyoza: dude when i program stuff i basically just open up the how to
[2014-06-24 20:01:19 -0400] gyoza: and learn it all over again
[2014-06-24 20:01:28 -0400] gyoza: i never retain anything:(
[2014-06-24 20:01:39 -0400] whiteadam: me either, it's the worst
[2014-06-24 20:01:54 -0400] gyoza: froolie: run chef-client -V
[2014-06-24 20:02:00 -0400] gyoza: need more details
[2014-06-24 20:02:06 -0400] froolie: gyoza: I ran sudo chef-client -V and got invalid option: -V (OptionParser::InvalidOption)
[2014-06-24 20:02:10 -0400] gyoza: wtf
[2014-06-24 20:02:14 -0400] whiteadam: You know what's annoying? When a MAN file says something works a certain way, but that's not how it works.
[2014-06-24 20:02:15 -0400] gyoza: try --verbose
[2014-06-24 20:02:24 -0400] gleam: -l debug
[2014-06-24 20:02:31 -0400] gyoza: gleam is the master
[2014-06-24 20:02:42 -0400] gyoza: gleam: http://gyazo.com/c2e35eb7a1291cad2ae3e6f6faf78cf0 better way to do this?
[2014-06-24 20:02:57 -0400] gyoza: besides oneshot
[2014-06-24 20:02:59 -0400] froolie: gyoza: that last one worked; putting in pastebin
[2014-06-24 20:03:22 -0400] gleam: what does "base" mean in this context?
[2014-06-24 20:03:29 -0400] gyoza: whiteadam: i remember stupid shit like, how many x in x that random guy told me 5 weeks ago.
[2014-06-24 20:03:29 -0400] gleam: can you get around it by setting a node attribute?
[2014-06-24 20:03:37 -0400] gyoza: gleam: i guess i could yea
[2014-06-24 20:03:40 -0400] gleam: or a node tag
[2014-06-24 20:03:43 -0400] gyoza: Im still new so any suggestions
[2014-06-24 20:04:07 -0400] gyoza: so node attributes or tags
[2014-06-24 20:04:09 -0400] gyoza: ill look into that
[2014-06-24 20:04:12 -0400] gleam:     tags = node[:tags]
[2014-06-24 20:04:12 -0400] gleam:     tags.concat(new_tags)
[2014-06-24 20:04:13 -0400] gleam:     node.normal[:tags] = tags
[2014-06-24 20:04:22 -0400] gyoza: cool
[2014-06-24 20:04:27 -0400] gyoza: you dabest
[2014-06-24 20:04:33 -0400] gyoza: like i said 2 mins ago
[2014-06-24 20:04:34 -0400] gleam: presumably you could just do node.normal[:tags] = node[:tags].concat(new_tags)
[2014-06-24 20:04:51 -0400] gyoza: cool
[2014-06-24 20:04:52 -0400] whiteadam: gyoza: Me too. Last king of China's name? No problem. How do validate truth and false in ruby, let me look it up.
[2014-06-24 20:05:04 -0400] gyoza: lol
[2014-06-24 20:05:18 -0400] gyoza: same..
[2014-06-24 20:05:19 -0400] gyoza: :(
[2014-06-24 20:05:28 -0400] gyoza: maybe not the china thing
[2014-06-24 20:05:35 -0400] whiteadam: it was henry
[2014-06-24 20:05:41 -0400] gyoza: Being taiwanese, I'm not allowed to learn chinese culture
[2014-06-24 20:05:45 -0400] whiteadam: hahah
[2014-06-24 20:05:46 -0400] gyoza: lolllll jk
[2014-06-24 20:08:32 -0400] gyoza: hey gleam
[2014-06-24 20:08:41 -0400] gyoza: so if not tagged?("blah")
[2014-06-24 20:08:47 -0400] gyoza: do i just do another raise condition?
[2014-06-24 20:08:49 -0400] whiteadam: Don't say you use uname -h if you really use dig x +short RedHat
[2014-06-24 20:08:50 -0400] gyoza: to abort the recipe?
[2014-06-24 20:09:15 -0400] gyoza: froolie must have seen something in the versbose log cause he never gave it tus:P
[2014-06-24 20:09:17 -0400] gyoza: us*
[2014-06-24 20:09:49 -0400] gyoza: I'd like the chef script to exit gracefully lol
[2014-06-24 20:09:55 -0400] gyoza: instead of huge red
[2014-06-24 20:10:00 -0400] gyoza: Ideally
[2014-06-24 20:10:12 -0400] gyoza: i dont think im going to get to backups today
[2014-06-24 20:13:03 -0400] froolie: gyoza: hahaha, nope. It was just a huge file and I got pulled into a meeting
[2014-06-24 20:13:05 -0400] froolie: but here it is
[2014-06-24 20:13:06 -0400] froolie: http://pastebin.com/fxTDGpfN
[2014-06-24 20:13:59 -0400] gyoza: [2014-06-24T20:02:35+00:00] DEBUG: Initiating POST to https://192.168.4.88/reports/nodes/server1/runs
[2014-06-24 20:14:05 -0400] gyoza: its failing there
[2014-06-24 20:14:22 -0400] gyoza: asking for info
[2014-06-24 20:14:29 -0400] gyoza: and chef server doesnt return anything
[2014-06-24 20:14:34 -0400] gyoza: like 497
[2014-06-24 20:15:06 -0400] gyoza: try to hit that url manually
[2014-06-24 20:15:09 -0400] gyoza: see what happens
[2014-06-24 20:15:46 -0400] gregp76: Ohai, chefs
[2014-06-24 20:16:17 -0400] gregp76: im experiencing a problem with chef solo and redisio recipe when ulimit recipe runs twice
[2014-06-24 20:16:38 -0400] gyoza: damn ulimit
[2014-06-24 20:16:46 -0400] gregp76:   * redisio_install[redis-servers] action runRecipe: <Dynamically Defined Resource>
[2014-06-24 20:17:20 -0400] gregp76: this is the second context - in this context the JSON with ulimit parameters is not running
[2014-06-24 20:17:26 -0400] gregp76: not executed
[2014-06-24 20:18:50 -0400] gregp76: https://gist.github.com/anonymous/1a930f10150ada0432b2
[2014-06-24 20:19:13 -0400] gyoza: i wish you could move columns in AWS
[2014-06-24 20:19:19 -0400] gyoza: like i want the created date column first
[2014-06-24 20:19:21 -0400] gyoza: on every page
[2014-06-24 20:19:23 -0400] gyoza: period.
[2014-06-24 20:20:10 -0400] gyoza: like why is name the main column for systems that are generated dynamically
[2014-06-24 20:20:43 -0400] froolie: yep, that doesn't work when I hit it manually
[2014-06-24 20:21:18 -0400] gyoza: something funky with your reports..
[2014-06-24 20:22:55 -0400] gyoza: is /reports/ like a sub folder?
[2014-06-24 20:22:59 -0400] gyoza: that you have chef server installed in?
[2014-06-24 20:23:07 -0400] gyoza: like /var/www/html/reports/chefinstallcraps?
[2014-06-24 20:23:25 -0400] Eulipion|Work: is there a way to install gems for specific ruby versions, while leaving the default ruby unchanged?
[2014-06-24 20:23:31 -0400] gyoza: next question: does it work for other stuff froolie?
[2014-06-24 20:23:44 -0400] gyoza: Eulipion|Work: careful planning :P
[2014-06-24 20:23:53 -0400] Eulipion|Work: gyoza: lol
[2014-06-24 20:24:05 -0400] gyoza: Eulipion|Work: i am pretty sure you can specify the version of the gem when you do ruby_gem
[2014-06-24 20:24:16 -0400] gyoza: but other than that
[2014-06-24 20:24:20 -0400] gyoza: my knowledge is limited
[2014-06-24 20:24:21 -0400] Eulipion|Work: there's a version attribute, but its the gem, not ruby
[2014-06-24 20:24:25 -0400] gyoza: yea
[2014-06-24 20:24:33 -0400] gyoza: well you could always install gems with deps on ruby versions
[2014-06-24 20:24:46 -0400] Eulipion|Work: switching via rvm in a recipe seems really lame
[2014-06-24 20:24:59 -0400] gyoza: you could always write like container bash scripts
[2014-06-24 20:25:27 -0400] gyoza: like if gem1 needs rub 1.9 and gem2 needs 2.0
[2014-06-24 20:25:33 -0400] gyoza: make gem1 a bash script
[2014-06-24 20:25:36 -0400] Eulipion|Work: is there a recommended ruby version for chef?
[2014-06-24 20:25:38 -0400] gyoza: that has rvm in top
[2014-06-24 20:25:41 -0400] gyoza: SUPER GHETTO
[2014-06-24 20:25:43 -0400] gyoza: but it will work:P
[2014-06-24 20:25:46 -0400] gyoza: 1.9
[2014-06-24 20:25:57 -0400] Eulipion|Work: 1.9.2 or 1.9.3?
[2014-06-24 20:26:05 -0400] gyoza: ruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-darwin13.1.0]
[2014-06-24 20:26:31 -0400] Eulipion|Work: cool, i think i can bump it then.  my jenkins server has so many rubys now
[2014-06-24 20:30:52 -0400] froolie: goyza: it does
[2014-06-24 20:30:59 -0400] froolie: it works for the default recipe without issue
[2014-06-24 20:31:12 -0400] lbragstad: just curious if anyone would have an opinion on the best way to go about fixing this? https://tickets.opscode.com/browse/CHEF-4260 I'm new to contributing to knife, specifically
[2014-06-24 20:31:14 -0400] froolie: well, there are issues but not with running it
[2014-06-24 20:32:20 -0400] froolie: the other interesting thing that I've discovered just now is that if I go to the cookbooks page and look at recipes
[2014-06-24 20:32:55 -0400] froolie: I can expand the default.rb link to see the recipe itself; if I click on user.rb it doesn't expand
[2014-06-24 20:33:07 -0400] froolie: so my chef server is not happy
[2014-06-24 20:35:07 -0400] gyoza: froolie: :(
[2014-06-24 20:35:58 -0400] froolie: gyoza: yyyyeaahhhh...that's good stuff right there.
[2014-06-24 20:36:12 -0400] gyoza: froolie: nginx logs:P
[2014-06-24 20:38:19 -0400] SFLimey_: Anyone know when a machine is bootstrapped, what process/call/recipe takes the first run run_list and pushes it to opscode?
[2014-06-24 20:38:27 -0400] SFLimey_: (eg: is it supposed to be a call to a specific recipe or is it something that needs to be added to the process/script/call that starts/bootstraps the machine?)
[2014-06-24 20:39:07 -0400] whiteadam: SFLimey_: I just add the run list with --run_list
[2014-06-24 20:39:27 -0400] whiteadam: and I use my chef-client-wrapper
[2014-06-24 20:40:12 -0400] SFLimey_: Problem I'm running into is I bootstrap an aws instance it does the initial run with the role I specfied but then leaves an empty run list at the end of it.
[2014-06-24 20:41:27 -0400] whiteadam: Hmm, does the run complete successfully?
[2014-06-24 20:43:57 -0400] gyoza: get to go home soon!!!
[2014-06-24 20:44:09 -0400] froolie: gyoza: other than an access log, I have nothing in the nginx logs...
[2014-06-24 20:44:16 -0400] gyoza: froolie: sucks...
[2014-06-24 20:44:25 -0400] gyoza: there is some chef server logs i am sure i forget where though
[2014-06-24 20:44:28 -0400] gyoza: or how
[2014-06-24 20:44:43 -0400] froolie: yeah...I mean the bright side is this is a test bed to try and write recipes for our infrastructure and not a production setup
[2014-06-24 20:44:50 -0400] gyoza: nice:P
[2014-06-24 20:45:17 -0400] gyoza:  30>> tags('randompoop')
[2014-06-24 20:45:19 -0400] gyoza: why does this fail
[2014-06-24 20:45:20 -0400] gyoza: lol
[2014-06-24 20:45:29 -0400] gyoza: <-- ruby dumb
[2014-06-24 20:46:40 -0400] gyoza: man my co-worker eats panda express teriyaki chicken everyday
[2014-06-24 20:46:45 -0400] gyoza: i'd get so sick of that shit
[2014-06-24 20:46:57 -0400] gchristensen: gross
[2014-06-24 20:47:00 -0400] froolie: gyoza: thanks for your help. Glad you get to go home. I'm signing off to cry about my chef server
[2014-06-24 20:47:01 -0400] gchristensen: gross just once :)
[2014-06-24 20:47:02 -0400] gyoza: but he needs his "protein" - dude is ripped
[2014-06-24 20:47:14 -0400] gyoza: froolie: i'd just setup one from scratch and import your cookbook over
[2014-06-24 20:47:14 -0400] gchristensen: gyoza: still gross :|
[2014-06-24 20:47:21 -0400] whiteadam: yeah, that's pretty gross
[2014-06-24 20:47:28 -0400] gyoza: gchristensen: yea im practically a vegan so anything w/ meat im like bleh
[2014-06-24 20:47:32 -0400] whiteadam: The same thing every day, no matter what it is.
[2014-06-24 20:47:35 -0400] gyoza: yes
[2014-06-24 20:47:46 -0400] gyoza: ok
[2014-06-24 20:47:49 -0400] gyoza: os its tag(
[2014-06-24 20:47:50 -0400] gyoza: not tags(
[2014-06-24 20:48:55 -0400] gyoza: this is no workie!!
[2014-06-24 20:50:58 -0400] gyoza: curiosity has been on mars for 1 mars year
[2014-06-24 20:51:05 -0400] gyoza: thats 687 earth days guys!
[2014-06-24 20:51:14 -0400] gyoza: The other rover is still working too
[2014-06-24 20:51:18 -0400] gyoza: god damn nasa!
[2014-06-24 20:51:56 -0400] gchristensen: not to mention Voyager
[2014-06-24 20:52:08 -0400] gyoza: Too bad curiosity and Opportunity can never meet each other and take selfies together
[2014-06-24 20:52:08 -0400] gyoza: lol
[2014-06-24 20:52:13 -0400] gyoza: that'd be amazing
[2014-06-24 20:53:07 -0400] Eulipion|Work: this was pretty funny though, http://www.huffingtonpost.com/2013/04/24/mars-rover-penis-draws-nasa_n_3148422.html
[2014-06-24 20:53:16 -0400] gyoza: haha yea
[2014-06-24 20:53:24 -0400] gyoza: first drawing on mars
[2014-06-24 20:53:25 -0400] gyoza: a dick
[2014-06-24 20:53:35 -0400] gyoza: go humans
[2014-06-24 20:53:37 -0400] gyoza: loool
[2014-06-24 20:54:00 -0400] gyoza: lol that picture is great
[2014-06-24 20:54:13 -0400] Eulipion|Work: it'll be rememberd longer than any selfie
[2014-06-24 20:56:56 -0400] whiteadam: I don't remember that photo, so it must not have gone viral enough
[2014-06-24 20:57:19 -0400] whiteadam: This however, needs to go viral, it's epic: http://www.clickhole.com/article/stick-butter-left-out-room-temperature-you-wont-be-368
[2014-06-24 20:58:53 -0400] troyready: I'm just about at my breaking point with article titles. Just from that URL: you won't be....
[2014-06-24 20:59:16 -0400] m0crack: quick question about escaping - i have some old bash scripts i'm moving into chef, and one of them deals with fixing bashrc title.  it's a nasty sed regex search&replace.  when i use that as a script inside chef, it complains about the \u and expecting some unicode format.  how do i escape my \u?
[2014-06-24 20:59:26 -0400] gchristensen: yeah, but that one is worth it, troyready
[2014-06-24 20:59:31 -0400] Eulipion|Work: \\u
[2014-06-24 20:59:46 -0400] whiteadam: haha
[2014-06-24 20:59:56 -0400] whiteadam: That's the whole point of clickhole, to make fun of those pople
[2014-06-24 20:59:59 -0400] whiteadam: people*
[2014-06-24 21:00:01 -0400] m0crack: really that easy?
[2014-06-24 21:00:04 -0400] troyready: Oh, sweeeeeet :)
[2014-06-24 21:00:23 -0400] troyready: Just when I needed the parody, you provided it to me :)
[2014-06-24 21:00:38 -0400] troyready: 10 tricks butter does. You won't believe #7
[2014-06-24 21:01:28 -0400] Brokenspacebar: Has anyone run in to a situation where running a "sudo chef-client" produces different output than the daemon running?
[2014-06-24 21:01:51 -0400] Brokenspacebar: Specifically, it seems like the results of my searches are different
[2014-06-24 21:02:02 -0400] whiteadam: lol
[2014-06-24 21:02:18 -0400] mfeingold: Hi guys if I upload a cookbook does it go by the cookbooks name  of the directory?
[2014-06-24 21:02:28 -0400] whiteadam: Brokenspacebar: I haven't seen that. Technically it should be the same.
[2014-06-24 21:02:39 -0400] cheeseplus: mfeingold: should read the metadata.rb
[2014-06-24 21:02:52 -0400] mfeingold: Hmm
[2014-06-24 21:02:53 -0400] whiteadam: pluscheeseplus strikes again
[2014-06-24 21:02:53 -0400] mfeingold: ok
[2014-06-24 21:03:34 -0400] gyoza: fucking luis suares biting people
[2014-06-24 21:03:39 -0400] gyoza: what a crazy asshole
[2014-06-24 21:03:46 -0400] whiteadam: Who did he bight?
[2014-06-24 21:03:48 -0400] whiteadam: bite*
[2014-06-24 21:03:52 -0400] whiteadam: troyready: http://www.clickhole.com/blogpost/how-do-we-get-young-women-interested-computer-scie-355
[2014-06-24 21:03:54 -0400] gyoza: Branislav Ivanovic
[2014-06-24 21:03:59 -0400] whiteadam: I fully support that article.
[2014-06-24 21:04:01 -0400] Eulipion|Work: how come rvm is bailing trying to install the chef-gem (already is installed for this ruby), but works when I do it manually?  http://pastebin.com/WnahJdLi
[2014-06-24 21:04:01 -0400] gyoza: from uruguay
[2014-06-24 21:04:47 -0400] Brokenspacebar: whiteadm: That's what I thought.  I double checked the cache and the recipe is right and search paramaters the same.  Weird thing is, I even added searching on node name with 'AND name:ls-es-*' and it's returning a server in the array when the daemon runs it with the name 'build-1' (happens to be the server it's on)
[2014-06-24 21:04:57 -0400] mfeingold: so if the cookbook name isn't specified in metadata then will it use the directories name?
[2014-06-24 21:05:25 -0400] gyoza: these tagz is pissng me off
[2014-06-24 21:05:54 -0400] troyready: whiteadam, dear lord, I didn't get it until the very end
[2014-06-24 21:06:04 -0400] troyready: Really good
[2014-06-24 21:06:44 -0400] gyoza: lol
[2014-06-24 21:06:46 -0400] mfeingold: Ok well our chef server has a cookbook uploaded as jenkins and I want to use the community cookbook jenkins, how do I use depends?
[2014-06-24 21:06:48 -0400] gyoza: i just read it hahaha
[2014-06-24 21:07:11 -0400] gyoza: gotta rename your cookbook
[2014-06-24 21:07:32 -0400] gyoza: thats the easiest way
[2014-06-24 21:07:41 -0400] alexbst: namespacing
[2014-06-24 21:07:42 -0400] chefaroo: I have a question regarding the use of s3 for cookbook storage instead of using bookshelf. Is this possible in the open source chef server version?
[2014-06-24 21:07:46 -0400] matti: alexbst: !
[2014-06-24 21:07:48 -0400] alexbst: your own cookbooks should all have a prefix
[2014-06-24 21:07:52 -0400] alexbst: hai matti
[2014-06-24 21:08:10 -0400] gyoza: free hugglesnuggles!
[2014-06-24 21:08:14 -0400] alexbst: #hugops
[2014-06-24 21:08:17 -0400] mfeingold: Yeah but I don't want to overwrite the cookbook
[2014-06-24 21:08:18 -0400] gyoza: lol
[2014-06-24 21:08:19 -0400] matti: Yay!
[2014-06-24 21:08:23 -0400] gyoza: guys
[2014-06-24 21:08:27 -0400] gyoza: tags.concat(
[2014-06-24 21:08:27 -0400] mfeingold: Because the office may still use jenkins
[2014-06-24 21:08:28 -0400] gyoza: does not work
[2014-06-24 21:08:30 -0400] gyoza: :(
[2014-06-24 21:08:50 -0400] mfeingold: If I name it something else
[2014-06-24 21:08:59 -0400] mfeingold: I can do that
[2014-06-24 21:08:59 -0400] gyoza: mfeingold: you could always go through the terrible process of changing the name in the usercookbook..
[2014-06-24 21:09:12 -0400] mfeingold: Aww I see
[2014-06-24 21:09:26 -0400] gyoza: basically if you call jenkins its gonna give you jenkins
[2014-06-24 21:09:33 -0400] mfeingold: Well we have the cookbook in github
[2014-06-24 21:09:50 -0400] mfeingold: Maybe if I upload one and it over writes jenkins i can reupload the old one
[2014-06-24 21:10:00 -0400] gyoza: sound not safe:P
[2014-06-24 21:10:11 -0400] mfeingold: I called jenkins but we have a cookbook named jenkins in the cookbook list
[2014-06-24 21:10:47 -0400] mfeingold: I believe it's picking up that one because when I say jenkins::master in the recipe it says cannot find cookbook
[2014-06-24 21:11:23 -0400] mfeingold: I think it's referencing our jenkins cookbook on the list
[2014-06-24 21:11:35 -0400] Eulipion|Work: do you have 2 cookbooks named jenkins with different versions?
[2014-06-24 21:11:50 -0400] mfeingold: No
[2014-06-24 21:11:58 -0400] mfeingold: I tried using the version of the community cookbook
[2014-06-24 21:12:01 -0400] mfeingold: But it didn't work
[2014-06-24 21:12:33 -0400] Eulipion|Work: im using jenkins 0.8.0 with a couple tweaks for apache so i can reuse my wildcard certs, but thats it
[2014-06-24 21:12:45 -0400] Eulipion|Work: it jfw
[2014-06-24 21:12:56 -0400] mfeingold: Well we want to point at the community cook book
[2014-06-24 21:13:07 -0400] mfeingold:  I may have to just upload the whole cookbook
[2014-06-24 21:14:13 -0400] Eulipion|Work: this is the community cookbook im using, it should jfw
[2014-06-24 21:14:36 -0400] mfeingold: Hmm
[2014-06-24 21:14:50 -0400] danryan: Hey chefs! After running "kitchen converge` twice on one VM, the second time prompts me for a password: https://gist.github.com/danryan/26167e587e4592d6a80a  `kitchen login` still works however.
[2014-06-24 21:14:57 -0400] mfeingold: But do you have a cookbook names jenkins in your knife cookbook list?
[2014-06-24 21:15:36 -0400] Eulipion|Work: yes, and a role called build-server that runs recipe[jenkins::{server,proxy_apache2,android}]
[2014-06-24 21:15:53 -0400] Eulipion|Work: and sets up keys for github and stuff
[2014-06-24 21:16:44 -0400] mfeingold: But that's in roles. Doesn't depends call the chef server
[2014-06-24 21:16:53 -0400] mfeingold: chef server cookbooks
[2014-06-24 21:18:42 -0400] darkside_: you have to upload the cooksbooks
[2014-06-24 21:18:43 -0400] mfeingold: yeah
[2014-06-24 21:18:44 -0400] mfeingold: I think I must upload a new cookbook
[2014-06-24 21:18:44 -0400] Eulipion|Work: depends lets you reference stuff from other cookbooks
[2014-06-24 21:18:45 -0400] mfeingold: Yeah
[2014-06-24 21:18:46 -0400] Eulipion|Work: yea, for sure u need to upload it
[2014-06-24 21:18:46 -0400] mfeingold: Yeah I will upload a test jenkins
[2014-06-24 21:18:47 -0400] mfeingold: Because someone at our office uploaded a custom jenkins
[2014-06-24 21:18:47 -0400] Eulipion|Work: if ur worried, just make sure everything is committed to git
[2014-06-24 21:18:48 -0400] mfeingold: And it's referencing that one
[2014-06-24 21:18:49 -0400] mfeingold: Yeah
[2014-06-24 21:18:49 -0400] mfeingold: It is
[2014-06-24 21:18:50 -0400] darkside_: well, sure, then you will have problems with cookbook collision
[2014-06-24 21:18:50 -0400] mfeingold: Yeah that's what I believe is happening
[2014-06-24 21:18:51 -0400] mfeingold: If I create an environment
[2014-06-24 21:18:51 -0400] mfeingold: I wonder if that would help
[2014-06-24 21:19:04 -0400] mfeingold: But I think I would have to call all dependency's
[2014-06-24 21:19:06 -0400] Eulipion|Work: or just call the new jenkins something else in the metadata file before u upload it
[2014-06-24 21:19:10 -0400] mfeingold: Yeah
[2014-06-24 21:19:17 -0400] mfeingold: That's what I will do
[2014-06-24 21:19:18 -0400] mfeingold: Thank you
[2014-06-24 21:24:15 -0400] gyoza: call it 'notjenkins'
[2014-06-24 21:24:41 -0400] Eulipion|Work: jeeves?
[2014-06-24 21:24:48 -0400] Eulipion|Work: it needs a butler's name
[2014-06-24 21:24:50 -0400] mfeingold: haha
[2014-06-24 21:24:57 -0400] mfeingold: Yeah we found a bunch of nodes using jenkins
[2014-06-24 21:24:58 -0400] gyoza: alfred
[2014-06-24 21:25:02 -0400] mfeingold: I know if I change metadata
[2014-06-24 21:25:10 -0400] mfeingold: It will upload
[2014-06-24 21:25:12 -0400] Eulipion|Work: call it MrCarson
[2014-06-24 21:25:15 -0400] mfeingold: Hahah
[2014-06-24 21:25:30 -0400] gyoza: Call it MrBellvedere
[2014-06-24 21:25:38 -0400] mfeingold: Is there a way to specifically make the dependency go to the opscode
[2014-06-24 21:25:55 -0400] mfeingold: Like i put in the github repository
[2014-06-24 21:25:58 -0400] mfeingold: or somehting
[2014-06-24 21:26:09 -0400] gyoza: Shit! mr Belvedere died in 2001:(
[2014-06-24 21:26:44 -0400] Eulipion|Work: it'll go to whatever the cookbook references in depends. either depends jenkins, or depends MrSlave
[2014-06-24 21:26:57 -0400] gyoza: lol
[2014-06-24 21:27:10 -0400] gyoza: MrSlaves super move in the southpark game, A++
[2014-06-24 21:27:25 -0400] Eulipion|Work: my recipe to setup NIC bonding is full of mrslave references
[2014-06-24 21:27:40 -0400] gyoza: nice
[2014-06-24 21:27:49 -0400] gyoza: did you play southpark?
[2014-06-24 21:27:55 -0400] gyoza: its prob one of the best RPG's ive ever played lol
[2014-06-24 21:28:11 -0400] bdha: Started playing that last night... it seriously might be. :)
[2014-06-24 21:28:23 -0400] gyoza: bdha: steam sale?:P
[2014-06-24 21:28:27 -0400] bdha: Yup.
[2014-06-24 21:28:35 -0400] gyoza: i was on green team day two!
[2014-06-24 21:28:39 -0400] gyoza: i didnt win anything though:(
[2014-06-24 21:30:01 -0400] gyoza: my knife command spans across three screens
[2014-06-24 21:30:02 -0400] gyoza: lol
[2014-06-24 21:30:04 -0400] chefaroo: anybody familiar with Bookshelf?
[2014-06-24 21:30:10 -0400] gyoza: you mean berkshelf?
[2014-06-24 21:31:19 -0400] gyoza: I can highly recommend Prison Architect, that game is seriously addicting
[2014-06-24 21:36:46 -0400] chefaroo: no
[2014-06-24 21:36:57 -0400] chefaroo: i mean bookshelf
[2014-06-24 21:37:25 -0400] chefaroo: Bookshelf is used to store cookbook conten
[2014-06-24 21:37:26 -0400] chefaroo: t
[2014-06-24 21:37:53 -0400] chefaroo: i'm trying to use s3 instead of bookshelf
[2014-06-24 21:38:15 -0400] chefaroo: i've hit a wall trying to configure it
[2014-06-24 21:38:31 -0400] chefaroo: been getting "bad gateway error"
[2014-06-24 21:39:01 -0400] chefaroo: and the syntax of the error looks like it's trying to do something with chef enterprise
[2014-06-24 21:39:15 -0400] chefaroo: instead of the opensource one
[2014-06-24 21:40:55 -0400] gyoza: Hey guys
[2014-06-24 21:40:59 -0400] gyoza: do austrailians use Knoife?
[2014-06-24 21:41:03 -0400] gyoza: just asking..
[2014-06-24 21:47:14 -0400] Eulipion|Work: lol
[2014-06-24 21:51:43 -0400] gyoza: this ruby-shadow business with user cookbook is piSSING ME OFFF AHHHHH
[2014-06-24 21:57:28 -0400] Eulipion|Work: im setting up a new infrastucte and im thinking of switching over from nagios to sensu, anyone using sensu have any pointers on that?
[2014-06-24 22:03:32 -0400] gyoza: i went frm nagios to zabbix
[2014-06-24 22:03:34 -0400] gyoza: if that helps?
[2014-06-24 22:03:34 -0400] gyoza: :P
[2014-06-24 22:03:40 -0400] gyoza: we're prob moving to stackdriver though
[2014-06-24 22:03:43 -0400] gyoza: it gives us more of what we need
[2014-06-24 22:03:48 -0400] Eulipion|Work: gross
[2014-06-24 22:03:55 -0400] gyoza: wat is
[2014-06-24 22:03:59 -0400] Eulipion|Work: zabbix
[2014-06-24 22:04:01 -0400] darkside_: there is a good quote about sensu: "sensu has so many moving parts that I wouldnt be able to sleep at night unless i set up nagios to make sure sensu was running properly"
[2014-06-24 22:04:02 -0400] gyoza: its nice!
[2014-06-24 22:04:10 -0400] gyoza: loool
[2014-06-24 22:04:18 -0400] gyoza: thats meta
[2014-06-24 22:05:22 -0400] gyoza: i cant get ruby-shadow to compile on amazon linux
[2014-06-24 22:05:37 -0400] Eulipion|Work: what os?
[2014-06-24 22:05:38 -0400] coderanger: gyoza: Is there a reason you aren't using the omnibus packages?
[2014-06-24 22:06:02 -0400] gyoza: coderanger: well,,.. im using chef 11.18 but everytime the passwords need to be updated it gives me an error saying it needs ruby-shadow
[2014-06-24 22:06:11 -0400] coderanger: gyoza: Hmm, that should be included
[2014-06-24 22:06:12 -0400] gyoza: err
[2014-06-24 22:06:13 -0400] gyoza: 11.12
[2014-06-24 22:06:15 -0400] gyoza: I know
[2014-06-24 22:06:18 -0400] gyoza: its pissing me off!
[2014-06-24 22:06:19 -0400] gyoza: lol
[2014-06-24 22:06:27 -0400] coderanger: gyoza: One sec, let me check the omnibus configs
[2014-06-24 22:06:31 -0400] gyoza: thanks man
[2014-06-24 22:08:07 -0400] coderanger: gyoza: https://github.com/opscode/omnibus-chef/blob/master/config/software/chef.rb#L113 looks like it should be in there
[2014-06-24 22:08:13 -0400] gyoza: i know:(
[2014-06-24 22:08:20 -0400] gyoza: its bugged:(
[2014-06-24 22:08:31 -0400] coderanger: gyoza: Do you see the gem files in the package?
[2014-06-24 22:08:55 -0400] gyoza: What do you mean?
[2014-06-24 22:09:38 -0400] coderanger: Sec again, unpacking the RPM
[2014-06-24 22:10:15 -0400] coderanger: woo conference wifi
[2014-06-24 22:11:30 -0400] Eulipion|Work: gyoza: i had a bunch of gem issues until i installed ruby-dev.  oddly stuff worked in 1 ruby version, but not others
[2014-06-24 22:11:47 -0400] gyoza: yea
[2014-06-24 22:11:50 -0400] gyoza: ruby devel is installed ifrst
[2014-06-24 22:11:51 -0400] gyoza: still fails
[2014-06-24 22:11:59 -0400] gyoza: OH WAIT
[2014-06-24 22:12:00 -0400] gyoza: I LIED
[2014-06-24 22:12:01 -0400] gyoza: OH SHI
[2014-06-24 22:12:17 -0400] gyoza: i commented that part out:P
[2014-06-24 22:12:25 -0400] gyoza: hope is building....
[2014-06-24 22:12:50 -0400] gyoza: i wish the version could accept letters
[2014-06-24 22:12:53 -0400] gyoza: so i can do 0.0.1a
[2014-06-24 22:12:56 -0400] gyoza: instead of 0.0.2
[2014-06-24 22:13:07 -0400] coderanger: gyoza: ruby-shadow-2.3.4
[2014-06-24 22:13:07 -0400] shlant: coderanger: do I have to use the aws key attributes to get citadel working for packer?
[2014-06-24 22:13:11 -0400] coderanger: gyoza: Gem is definitely in there
[2014-06-24 22:13:16 -0400] gyoza: Codemonkey: yea it fails to compile every time
[2014-06-24 22:13:26 -0400] gyoza: or execute or whatever
[2014-06-24 22:13:28 -0400] coderanger: gyoza: Are you trying to rebuild the packages or something?
[2014-06-24 22:13:38 -0400] gyoza: nah man even if i dont even call it just call ruby-shadow it freaks
[2014-06-24 22:13:41 -0400] gyoza: err
[2014-06-24 22:13:45 -0400] gyoza: let me retype that
[2014-06-24 22:13:58 -0400] coderanger: shlant: If the machine doesn't have an IAM role assigned, yes
[2014-06-24 22:14:00 -0400] gyoza: Even if i just call userbook and then a password changes comes through it says need ruby-shadow
[2014-06-24 22:14:39 -0400] gyoza: i may have fixed it with a shit load of deps
[2014-06-24 22:14:42 -0400] gyoza: we'll see
[2014-06-24 22:14:55 -0400] gyoza: what is weird is it works fine on my vagrant system
[2014-06-24 22:14:57 -0400] gyoza: without ruby-shadow
[2014-06-24 22:15:05 -0400] coderanger: gyoza: ruby-shadow should already be installed
[2014-06-24 22:15:06 -0400] gyoza: its a problem with real centos image/amazon image
[2014-06-24 22:15:08 -0400] Eulipion|Work: what about installing ruby-shadow from a yum/apt instead of the gem
[2014-06-24 22:15:21 -0400] gyoza: Eulipion|Work: yea thats my next solution
[2014-06-24 22:15:24 -0400] gyoza: i wanted to do things "right"
[2014-06-24 22:15:24 -0400] coderanger: No, it is not installed from either, it is part of the omnibus container
[2014-06-24 22:15:39 -0400] gyoza: well
[2014-06-24 22:15:41 -0400] gyoza: i got it to work with deps
[2014-06-24 22:15:51 -0400] coderanger: What deps?
[2014-06-24 22:15:56 -0400] gyoza: lol all of them?
[2014-06-24 22:15:57 -0400] coderanger: You mean chef_gem 'ruby-shadow'?
[2014-06-24 22:16:02 -0400] gyoza: ill show you what works
[2014-06-24 22:16:37 -0400] gyoza: http://gyazo.com/86c17b3766c955f632063e00ded888fb
[2014-06-24 22:16:39 -0400] gyoza: that took care of it
[2014-06-24 22:17:00 -0400] Eulipion|Work: could have used build-essentials
[2014-06-24 22:17:09 -0400] gyoza: one package?
[2014-06-24 22:17:24 -0400] gyoza: I've only been doing this about a month now so i may be doing things badly
[2014-06-24 22:17:30 -0400] coderanger: gyoza: Are you 100% certain you are using the omnibus chef packages to install chef
[2014-06-24 22:17:30 -0400] gyoza: feel free to smack me
[2014-06-24 22:17:39 -0400] gyoza: coderanger: how can i confirm this?
[2014-06-24 22:17:49 -0400] coderanger: gyoza: type "which chef-client"
[2014-06-24 22:18:02 -0400] gyoza: its running out of /usr/bin
[2014-06-24 22:18:10 -0400] coderanger: gyoza: Does /opt/chef exist
[2014-06-24 22:18:14 -0400] gyoza: yeeeep
[2014-06-24 22:18:30 -0400] gyoza: so im running the wrong chef?
[2014-06-24 22:18:31 -0400] gyoza: lol
[2014-06-24 22:18:35 -0400] gyoza: :(
[2014-06-24 22:18:41 -0400] coderanger: Is /usr/bin/chef-client a symlink to /opt/chef/bin/chef-client
[2014-06-24 22:18:54 -0400] coderanger: gyoza: Simmer down, I can only type questions so quickly
[2014-06-24 22:18:58 -0400] gyoza: lrwxrwxrwx 1 root root 25 Jun 24 22:04 /usr/bin/chef-client -> /opt/chef/bin/chef-client
[2014-06-24 22:19:16 -0400] darkside_: simmer!
[2014-06-24 22:19:18 -0400] coderanger: Okay, so you are likely using omnibus, but installing ruby packages should have no effect on that
[2014-06-24 22:19:27 -0400] gyoza: it makes it work
[2014-06-24 22:19:37 -0400] coderanger: Chef lives in an isolated ruby world, has nothing to do with the system ruby
[2014-06-24 22:19:53 -0400] coderanger: Please pastebin your recipe that is failing otherwise
[2014-06-24 22:20:14 -0400] gyoza: let me clear it out
[2014-06-24 22:20:48 -0400] gyoza: ok if i take out all the deps
[2014-06-24 22:20:52 -0400] gyoza: it ends up being pretty simple
[2014-06-24 22:20:57 -0400] gyoza: its just users_manage
[2014-06-24 22:21:00 -0400] gyoza: thatsit
[2014-06-24 22:21:01 -0400] gyoza: lol
[2014-06-24 22:21:12 -0400] gyoza: very simple recipe
[2014-06-24 22:21:45 -0400] gyoza: let me kill this instance and start one new
[2014-06-24 22:21:49 -0400] coderanger: Please try just using the normal user resource
[2014-06-24 22:23:00 -0400] gyoza: Right, users_manage is the normal method as far as i know for sethvargos cookbook..
[2014-06-24 22:23:33 -0400] coderanger: Thats an LWRP from a 3rd party cookbook, please use the standard resource just for testing
[2014-06-24 22:23:55 -0400] gyoza: I'd have to learn that standard one...
[2014-06-24 22:23:59 -0400] gyoza: havnt even looked at it
[2014-06-24 22:24:27 -0400] coderanger: http://docs.opscode.com/resource_user.html
[2014-06-24 22:25:09 -0400] gyoza: 1sec
[2014-06-24 22:28:09 -0400] gyoza: so just for grins and giggles i wanted to try the old userbook with no deps, its definitily using omnibus
[2014-06-24 22:28:27 -0400] gyoza:  //opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.12.8-2.el6.x86_64.rpm
[2014-06-24 22:33:46 -0400] gyoza: coderanger: almost done
[2014-06-24 22:34:17 -0400] gyoza: well i changed the password field in my usertest cookbook and it worked?
[2014-06-24 22:34:42 -0400] gyoza: yea the shadow entry is changed
[2014-06-24 22:34:47 -0400] coderanger: Okay, so the core user resource is working
[2014-06-24 22:34:56 -0400] coderanger: so whats the error you are getting from the users cookbook?
[2014-06-24 22:34:58 -0400] gyoza: let me freaking try again hang on
[2014-06-24 22:35:52 -0400] gyoza: I watch murder porn all day at work
[2014-06-24 22:36:15 -0400] gyoza: I could probably be a homicide detective after all this
[2014-06-24 22:36:18 -0400] Eulipion|Work: there's nothing sadder than clown porn
[2014-06-24 22:36:32 -0400] Eulipion|Work: any idea how to get this to work, undefined method `symlink?' for Chef::Resource::File:Class ?
[2014-06-24 22:36:37 -0400] Eulipion|Work: from the community nagios cb
[2014-06-24 22:36:49 -0400] gyoza: hmm
[2014-06-24 22:36:58 -0400] coderanger: Eulipion|Work: ::File.symlink?
[2014-06-24 22:37:03 -0400] coderanger: Eulipion|Work: You need the leading ::
[2014-06-24 22:37:53 -0400] Eulipion|Work: line 38 https://github.com/tas50/nagios/blob/master/recipes/apache.rb
[2014-06-24 22:38:26 -0400] coderanger: Eulipion|Work: What version of Chef are you using?
[2014-06-24 22:38:46 -0400] Eulipion|Work: 11.12.8
[2014-06-24 22:38:46 -0400] coderanger: Eulipion|Work: That should have been fixed for recipe code about a year ago
[2014-06-24 22:39:09 -0400] coderanger: Oh derp, I see the problem
[2014-06-24 22:39:21 -0400] coderanger: Yeah, it works in recipe context, but thats inside a resource block
[2014-06-24 22:39:25 -0400] coderanger: so yeah, you need the ::
[2014-06-24 22:39:34 -0400] coderanger: That is an absolute symbol lookup in Ruby
[2014-06-24 22:39:39 -0400] coderanger: like /foo vs foo
[2014-06-24 22:39:48 -0400] Eulipion|Work: oh ruby
[2014-06-24 22:41:17 -0400] coderanger: Eulipion|Work: \o/
[2014-06-24 22:41:30 -0400] gyoza: ok code
[2014-06-24 22:41:31 -0400] gyoza: its working
[2014-06-24 22:41:36 -0400] gyoza: it seems it DOESNT work on centos6
[2014-06-24 22:41:37 -0400] gyoza: lol
[2014-06-24 22:41:44 -0400] coderanger: gyoza: If you don't use my full name, I don't get notified, just FYI
[2014-06-24 22:41:53 -0400] gyoza: coderanger: i know but its like 6 more letters
[2014-06-24 22:41:54 -0400] coderanger: gyoza: Most IRC clients support tab completion though
[2014-06-24 22:41:55 -0400] Eulipion|Work: ...said everyone that ever used centos 6
[2014-06-24 22:42:02 -0400] gyoza: :)
[2014-06-24 22:42:04 -0400] coderanger: gyoza: Whats the specific error
[2014-06-24 22:42:12 -0400] gyoza: give me a min
[2014-06-24 22:43:12 -0400] gyoza: coderanger: you're the best also :)
[2014-06-24 22:43:26 -0400] gyoza: thanks for helpin'
[2014-06-24 22:43:26 -0400] coderanger: Thanks
[2014-06-24 22:43:40 -0400] gyoza: kikcin goff vagrant
[2014-06-24 22:43:52 -0400] gyoza: typing is getting hard, its getting close to 4:00
[2014-06-24 22:45:34 -0400] gyoza: 10 bucks its not gonna reproduce in vagrant
[2014-06-24 22:45:42 -0400] gyoza: will only do it on my baremetal systems
[2014-06-24 22:46:21 -0400] Eulipion|Work: coderanger: thx, the :: fixed it.
[2014-06-24 22:46:35 -0400] gyoza: The following SSH command responded with a non-zero exit status.
[2014-06-24 22:46:36 -0400] gyoza: Vagrant assumes that this means the command failed!
[2014-06-24 22:46:36 -0400] gyoza: echo $(chef-solo -v)
[2014-06-24 22:46:38 -0400] gyoza: vagrant=\
[2014-06-24 22:46:41 -0400] gyoza: never seen that before
[2014-06-24 22:47:04 -0400] gyoza: trying agian
[2014-06-24 22:48:43 -0400] gyoza: is there a chef conference?
[2014-06-24 22:48:49 -0400] gyoza: we all need to get hammered together
[2014-06-24 22:48:49 -0400] gyoza: :)
[2014-06-24 22:48:57 -0400] coderanger: gyoza: Two
[2014-06-24 22:48:59 -0400] gyoza: niice
[2014-06-24 22:49:03 -0400] gyoza: are they in california? hahaha
[2014-06-24 22:49:06 -0400] coderanger: the community summit and ChefConf
[2014-06-24 22:49:15 -0400] coderanger: the summit is in Seattle, ConfConf is in SF
[2014-06-24 22:49:20 -0400] gyoza: nice
[2014-06-24 22:49:27 -0400] coderanger: I'm also sitting at Velocity at the moment
[2014-06-24 22:49:59 -0400] gyoza: nice
[2014-06-24 22:50:09 -0400] gyoza: i guess you're learning a lot?:)
[2014-06-24 22:52:30 -0400] gyoza: how do you get one of those addresses
[2014-06-24 22:52:33 -0400] gyoza: the spoofs
[2014-06-24 22:52:42 -0400] coderanger: gyoza: Nah, just helping out at the chef hack dya
[2014-06-24 22:52:45 -0400] coderanger: Hmm?
[2014-06-24 22:52:57 -0400] gyoza: forget what im sayin:P
[2014-06-24 22:53:01 -0400] gyoza: Ok this is messed up now
[2014-06-24 22:53:16 -0400] gyoza: Anytime i do a vagrant provision it gives me that stupid error
[2014-06-24 22:53:45 -0400] coderanger: Please pastebin the error
[2014-06-24 22:54:14 -0400] gyoza: http://pastebin.com/xG6XDqqb
[2014-06-24 22:54:48 -0400] gyoza: obviously its not related to the userbook
[2014-06-24 22:55:07 -0400] gyoza: oh lol i figured it out
[2014-06-24 22:55:07 -0400] gyoza: hahahaha
[2014-06-24 22:55:25 -0400] gyoza: its cause im removing stuff from the sudoers file
[2014-06-24 22:55:25 -0400] gyoza: lol
[2014-06-24 22:59:11 -0400] gyoza: coderanger: ok its only happening on CentOS6 bare metal installs....
[2014-06-24 22:59:24 -0400] gyoza: so weird....
[2014-06-24 22:59:28 -0400] coderanger: gyoza: Please pastebin the error from that machine
[2014-06-24 22:59:34 -0400] gyoza: I did.
[2014-06-24 22:59:37 -0400] gyoza: ^^ i posted it
[2014-06-24 22:59:42 -0400] gyoza: Oh you mean from the bare metal machine?
[2014-06-24 22:59:50 -0400] gyoza: sure
[2014-06-24 22:59:57 -0400] coderanger: Unless its the same error, yes
[2014-06-24 23:06:35 -0400] gyoza: HEY CODERANGER
[2014-06-24 23:06:38 -0400] gyoza: I think i know why:)
[2014-06-24 23:06:48 -0400] gyoza: -rwxr-xr-x 1 0 0 488 Jun 17 12:53 /usr/bin/chef-client
[2014-06-24 23:07:02 -0400] gyoza: prob doesnt have omnibus
[2014-06-24 23:10:04 -0400] gyoza: omg that was it dude
[2014-06-24 23:10:19 -0400] gyoza: coderanger: its cause chef on my baremetal servers some how installed an older version of chef?
[2014-06-24 23:10:32 -0400] coderanger: gyoza: That would do it :)
[2014-06-24 23:10:49 -0400] gyoza: yea i dont know where it came from
[2014-06-24 23:10:52 -0400] gyoza: i freaking bootstrapped it
[2014-06-24 23:10:59 -0400] gyoza: but thanks man
[2014-06-24 23:11:01 -0400] gyoza: i owe you a beer
[2014-06-24 23:11:05 -0400] gyoza: or something:)
[2014-06-24 23:12:51 -0400] gyoza: OK TIME TO LEVE WORK!
[2014-06-24 23:13:03 -0400] gyoza: See you all tomorrow:)
[2014-06-24 23:25:36 -0400] armendonigian: I have 2 machines oddz-seed-0, oddz-seed-1FATAL: 2 nodes found, but does not have the required attribute to establish the connection. Try setting another attribute to open the connection using --attribute.
[2014-06-24 23:28:29 -0400] shlant: does having a node attribute set in an if statement do anything?
[2014-06-24 23:28:59 -0400] shlant: as in is the if considered, or is it applied anyways
[2014-06-24 23:31:34 -0400] coderanger: shlant: Its normaly ruby code so it only applies when the condition is met
[2014-06-24 23:39:34 -0400] matti: Ohai coderanger
[2014-06-24 23:39:46 -0400] coderanger: matti: Alo

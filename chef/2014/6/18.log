[2014-06-18 00:00:14 -0400] troyready: Sam_S, if the issue is that it's taking a long time at the start, you can start a chef-client run with the "-l debug" option to get more information on what's happening
[2014-06-18 00:00:33 -0400] troyready: I've had to due that in the past to identify problematic ohai plugins
[2014-06-18 00:03:20 -0400] coderanger: Sam_S: There are formatter plugins that can help with that
[2014-06-18 00:03:38 -0400] coderanger: Sam_S: Personally I recommend https://github.com/andreacampi/nyan-cat-chef-formatter ;-)
[2014-06-18 00:03:43 -0400] Sam_S: troyready: thank you for the reply. Actually I am not care how long time the chef-client will take, I just want to get the running pecentage on each chef client, so that I can mornitoring the whole status.
[2014-06-18 00:04:34 -0400] Sam_S: coderanger: thank you for the info.
[2014-06-18 00:36:45 -0400] maraca: is it possible to lockdown the version of a dependency inside of a role
[2014-06-18 00:37:24 -0400] cheeseplus: maraca: not in a role but in an environment you can lock cookbook versions
[2014-06-18 00:37:54 -0400] maraca: ok - thanks that's what I was worried about - Means I can't have different dependencies versions for different cookbooks then can I?
[2014-06-18 00:41:23 -0400] anthonyacquanita: ls
[2014-06-18 00:42:29 -0400] coderanger: maraca: Yes, you can do it, but it isn't recommended
[2014-06-18 00:42:36 -0400] maraca: got it
[2014-06-18 00:42:47 -0400] maraca: thanks coderanger
[2014-06-18 00:42:59 -0400] coderanger: maraca: (it's an old and mostly unknown feature from before environments existed :)
[2014-06-18 00:43:10 -0400] maraca: haha yeah probably not a good idea then :)
[2014-06-18 00:43:25 -0400] coderanger: cheeseplus: Damn, source filmmaker is getting more and more impressive
[2014-06-18 00:44:05 -0400] coderanger: cheeseplus: Also damn, valve reeeeally can't model hair
[2014-06-18 00:46:45 -0400] cheeseplus: coderanger: yes to bolth
[2014-06-18 00:47:07 -0400] cheeseplus: hair is such a pain to do well that they made  the sensible decision of punting
[2014-06-18 00:47:18 -0400] cheeseplus: I'll take facial expressions over hair rendering anyday
[2014-06-18 00:47:52 -0400] coderanger: True dat
[2014-06-18 00:50:00 -0400] cheeseplus: granted the last tomb raider game had the craziest hair tech ever
[2014-06-18 00:50:23 -0400] cheeseplus: if you had an AMD card at the high end it was the holy grail of hair rendering
[2014-06-18 02:05:32 -0400] rbowlby: Anyone have a good post/doc/tutorial on setting up chef-zero+chef-client as a vagrant provisioner?
[2014-06-18 02:15:51 -0400] iverson08811: hey, is there any reason other than possibly financial reasons why the chef omnibus debian package isn't delivered via cloudfront cdn and instead delivered by amazon s3?
[2014-06-18 02:21:16 -0400] coderanger: iverson08811: No one has gotten to it
[2014-06-18 02:22:31 -0400] coderanger: iverson08811: And its not going to be the long-term solution, so just not a lot of energy being spent on it
[2014-06-18 02:22:41 -0400] andrewjacobs: I receive the following error after trying to run chef-client -v : http://pastebin.com/PjTGHDKS
[2014-06-18 02:22:47 -0400] coderanger: iverson08811: Soon (possibly ~Velocity) it is switching to be based on ARtifactory
[2014-06-18 02:23:18 -0400] andrewjacobs: I have rvm installed with ruby 2.1.2 as the default.
[2014-06-18 02:24:46 -0400] andrewjacobs: Any tips or solutions for that error? Running on CentOS 6.5 with everything up to date via yum -y update and yum -y upgrade.
[2014-06-18 02:25:45 -0400] coderanger: andrewjacobs: Check your paths, that usually happens because you are using the wrong ruby with the omnibus binary
[2014-06-18 02:26:19 -0400] iverson08811: coderanger: ah okay just wondering. we just opened up some servers in asia (hong kong) and downloading the debian package or even the cookbooks takes a lot longer
[2014-06-18 02:26:51 -0400] coderanger: iverson08811: Yahr, I would recommend using your own bootstrapping system
[2014-06-18 02:27:06 -0400] coderanger: iverson08811: What kind of servers are these (amazon, metal, etc)?
[2014-06-18 02:27:41 -0400] andrewjacobs: [bobby@localhost ~]$ ruby -v
[2014-06-18 02:27:42 -0400] andrewjacobs: ruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-linux]
[2014-06-18 02:27:42 -0400] andrewjacobs: [bobby@localhost ~]$ echo $PATH
[2014-06-18 02:27:42 -0400] andrewjacobs: Looks like it is using the correct paths, any other tips? Does omnibus need to use ruby 1.9.1?
[2014-06-18 02:28:02 -0400] andrewjacobs: :: /home/bobby/.rvm/gems/ruby-2.1.2/bin:/home/bobby/.rvm/gems/ruby-2.1.2@global/bin:/home/bobby/.rvm/rubies/ruby-2.1.2/bin:/home/bobby/.rvm/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/bobby/bin:/home/bobby/bin
[2014-06-18 02:28:29 -0400] iverson08811: coderanger: metal (softlayer)
[2014-06-18 02:28:54 -0400] coderanger: iverson08811: Then yeah, not much you can do except rehost the packages yourself :-(
[2014-06-18 02:29:21 -0400] iverson08811: coderanger: figured. what about the cookbook side...as we use hosted chef
[2014-06-18 02:31:06 -0400] coderanger: iverson08811: SoL, sorry :-(
[2014-06-18 02:32:43 -0400] andrewjacobs: Ugh, found the problem: https://tickets.opscode.com/browse/CHEF-3933
[2014-06-18 02:32:53 -0400] andrewjacobs: damn :(
[2014-06-18 02:33:40 -0400] andrewjacobs: oh wait, looks like it was closed....
[2014-06-18 02:34:45 -0400] andrewjacobs: coderanger: what ruby and gem versions is optimal for initial chef installation?
[2014-06-18 02:39:20 -0400] iverson08811: coderanger: damn. might be time to start looking at self hosted enterprise chef
[2014-06-18 02:39:46 -0400] coderanger: iverson08811: For that I defer to Opscode
[2014-06-18 02:40:17 -0400] iverson08811: coderanger: do you work for opscode? or you're just a ninja
[2014-06-18 02:40:39 -0400] coderanger: iverson08811: I used to many years ago, but do not anymore
[2014-06-18 04:06:20 -0400] mdavids: quick (hopefully) question... I'm trying to use the opscode mysql cookbook... but it complains that it cant find a resource for mysql_service... which make sense, because there doesnt appear to be a resource for mysql_service... eh, what gives?
[2014-06-18 04:07:53 -0400] mdavids: i do see the resources and providers in the libraries folder... which I guess are written as not-so-lightweight-at-all-resoruces
[2014-06-18 04:08:30 -0400] mdavids: but I am not clear on why chef can't find them
[2014-06-18 04:09:24 -0400] mdavids: any ideas or suggestions would be appreciated :)
[2014-06-18 04:20:57 -0400] mdavids: nevermind, stupid mistake on my part... didnt save the metadata file for the cookbook im working on
[2014-06-18 05:21:06 -0400] andrewjacobs: So I downloaded nginx from http://community.opscode.com/cookbooks/nginx and am trying to upload it, but keep receiving: "ERROR: The missing cookbook(s) are: 'apt' version '~> 2.2', 'bluepill' version '~> 2.3'", now I know CentOS does not use apt, so why is it a requirements and how do i disable it being a requirement?
[2014-06-18 05:22:23 -0400] n1ko: andrewjacobs: fork the repo, remove the depencency
[2014-06-18 05:30:18 -0400] coderanger: andrewjacobs: Chef doesn't have optional dependencies, so you will need all those cookbooks
[2014-06-18 05:30:26 -0400] coderanger: andrewjacobs: I would highly recommend using berkshelf which does all this for you
[2014-06-18 05:31:09 -0400] n1ko: its a shame there isnt support for that
[2014-06-18 05:31:15 -0400] n1ko: atleast on platform specific level
[2014-06-18 05:31:19 -0400] coderanger: n1ko: Its a hard problem
[2014-06-18 05:31:38 -0400] n1ko: yeah
[2014-06-18 05:31:43 -0400] coderanger: n1ko: for platforms it seems obvious, but what about runit vs. upstart vs. supervisord
[2014-06-18 05:31:46 -0400] coderanger: or apache vs. nginx
[2014-06-18 05:31:50 -0400] coderanger: or mysql vs. postgres :-/
[2014-06-18 05:31:59 -0400] coderanger: Many cookbooks want to support all of the various mixes
[2014-06-18 05:33:49 -0400] coderanger: and the extra dependencies do little harm, so ::shrug::
[2014-06-18 05:34:15 -0400] coderanger: If/when kallistec's grand experiments with client-side dependency solving come to fruition, it may be more viable then
[2014-06-18 05:36:18 -0400] n1ko: yeah, the only down side is when depencies collide
[2014-06-18 05:36:36 -0400] n1ko: and the dependencies are the ones you are not actually using, like apt or aws or windows :)
[2014-06-18 05:37:06 -0400] n1ko: and yes that could be resolved if people pinned their versions better
[2014-06-18 05:37:29 -0400] n1ko: upgrading from yum2 to yum3 for example was hell, and also the same things can be said about runit
[2014-06-18 05:48:31 -0400] coderanger: n1ko: I mean thats still a problem no matter what, you can just ignore it sometimes, but it still sucks for all the times you can't ignore it because they are deps you do care about :)
[2014-06-18 05:48:53 -0400] coderanger: n1ko: The yum cookbook has just been a source of more issues than the apt one, and more people seem to use ubuntu than centos so  :)
[2014-06-18 06:46:17 -0400] sarkis: hey guys, can i modify attributes for a recipe included in a recipe?
[2014-06-18 06:47:01 -0400] sarkis: i.e. i do include_recipe1 in my app cookbook, then recipe1 has include_recipe2 <-- will attributes in the app cookbook be able to set these?
[2014-06-18 06:47:56 -0400] coderanger: sarkis: Yes, all attributes are loaded before any recipes are compiled
[2014-06-18 06:48:08 -0400] sarkis: awesome, thanks
[2014-06-18 06:56:45 -0400] digitalchild: hmm
[2014-06-18 06:56:50 -0400] digitalchild: mirror.centos.org is gone?
[2014-06-18 06:57:05 -0400] digitalchild: err, centos.org is gone..
[2014-06-18 07:53:39 -0400] bcave: good morning
[2014-06-18 07:54:24 -0400] bcave: i have a question about best-practises and cookbook interdependencies...
[2014-06-18 07:55:04 -0400] bcave: where do you create dependencies via a role's run list versus using an include_recipe in a recipe?
[2014-06-18 07:56:31 -0400] bcave: for example, I have a custom cookbook with an "install_my_app" recipe that requires java. The install_my_app recipe adds extra files into the java install directory, for example. I never use the recipe directly, but generally provision a host via a role
[2014-06-18 07:57:10 -0400] bcave: my thinking is that the cookbook should have a "depends 'java'" in the metadata, even though only 1 recipe needs it, and to use include_recipe, rather that putting it in the role run list...
[2014-06-18 09:06:15 -0400] joshua__: Hey guys, whats the best way to boostrap a new chef install on bare metal? PXE booting?
[2014-06-18 09:07:27 -0400] renchap: here we install the chef package & a basic client.rb at the end of the pxe installation
[2014-06-18 09:07:33 -0400] renchap: (debian preseed)
[2014-06-18 09:20:19 -0400] joshua__: renchap: how do you pass in the node name and environment etc for the first chef run?
[2014-06-18 09:36:36 -0400] goncalop: hi there - new building a new LWRP why do I get 'method or resource' not found in the recipe?
[2014-06-18 09:37:08 -0400] joshua__: goncalop: thats about as helpful as saying 'help me, I have a wet fish'.
[2014-06-18 09:37:22 -0400] goncalop: sorry :)
[2014-06-18 09:37:29 -0400] chefDeveloper3: I want to write tests which should be rund at the end of a recipe. they should check if the app is listening on port xy... . how can I do that? Some services are running at the and, because they are not marked with notify -> immediately
[2014-06-18 09:37:31 -0400] goncalop: I did a file on resources/testresource.rb
[2014-06-18 09:37:40 -0400] goncalop: and one on providers/testresource.rb
[2014-06-18 09:37:44 -0400] goncalop: one action
[2014-06-18 09:37:50 -0400] goncalop: well let me just put a gist up... sorry
[2014-06-18 09:39:22 -0400] goncalop: joshua__: https://gist.github.com/goncalopereira/b6a481146fe2b4f4333f
[2014-06-18 09:39:41 -0400] goncalop: how come resource is not found? what am I missing here ?
[2014-06-18 09:41:29 -0400] goncalop: I expected the folder structure and naming to suffice?
[2014-06-18 09:52:52 -0400] goncalop: understood now that lwrp need the cookbook name to be sort of fully qualified :)
[2014-06-18 10:00:20 -0400] chefDeveloper3: how can i run something at the end of a chef run?
[2014-06-18 10:01:28 -0400] n1ko: you make a recipe that you run last..? :)
[2014-06-18 10:08:18 -0400] workmad3: chefDeveloper3: https://github.com/calavera/minitest-chef-handler
[2014-06-18 10:09:10 -0400] workmad3: chefDeveloper3: the usage section of the readme gives the two ways to get the minitest tests to run... either with their report handler or with a recipe at the end of the run list
[2014-06-18 10:10:17 -0400] workmad3: chefDeveloper3: you could also write a recipe that adjusts the node's run-list, adding a recipe at the end if not present, and forcing it to the end if it's not
[2014-06-18 10:10:42 -0400] jhsubscribe: ChefDeveloper3 - Just checking you're familiar with Test-Kitchen?  That would just be my goto for running tests after a chef run
[2014-06-18 10:10:48 -0400] workmad3: chefDeveloper3: which would allow subsequent runs to go through correctly
[2014-06-18 10:13:30 -0400] jhsubscribe: Is anyone sucessfully using Chef-Metal from a Windows 7 workstation?  I get openssl_pkcs8 native extension errors and haven't been able to fix it from Google.
[2014-06-18 10:14:08 -0400] chefDeveloper3: workmad3: ok, thanks
[2014-06-18 12:54:39 -0400] maniac: hi guys  playing with docker and want to install knife plugin knife-container following this documentation : http://docs.opscode.com/containers.html  but recieve :
[2014-06-18 12:54:40 -0400] maniac: ERROR:  Could not find a valid gem 'knife-container' (>= 0) in any repository
[2014-06-18 12:54:40 -0400] maniac: ERROR:  Possible alternatives: chef-container,
[2014-06-18 12:54:57 -0400] maniac: probably documentation is outdated and i should use : chef-container ?
[2014-06-18 12:56:49 -0400] brimstone: is there a way to tell knife that the cookbook it's uploading is not named the same as the directory it is in?
[2014-06-18 12:58:32 -0400] maniac: no chef-container is a wrong gem also for this
[2014-06-18 13:02:39 -0400] sebnil: Hi, i got some problems with simple_iptables from the community cookboks. I'm still very new with chef, but this is the last one that i haven't sorted out yet. I import the simple_iptables in the metadata.rb file for my recipe and then specifying the iptables rule in the recipe as shown at http://community.opscode.com/cookbooks/simple_iptables. When the client runs the cookbook it gets notified that "simple_iptables_rule[ftp
[2014-06-18 13:03:08 -0400] sebnil: But when im listing iptables -L there's nothing new in it.
[2014-06-18 13:04:09 -0400] jhsubscribe: sebnil: Usage =
[2014-06-18 13:04:10 -0400] jhsubscribe: Include the recipe simple_iptables somewhere in your run list, then use the LWRPs simple_iptables_rule and simple_iptables_policy in your recipes.
[2014-06-18 13:04:26 -0400] jhsubscribe: from what you've said you haven't included the recipe
[2014-06-18 13:04:43 -0400] sebnil: i got depends "simple_iptables"
[2014-06-18 13:04:45 -0400] jhsubscribe: ie. before you use the lwrp. put include_recipe
[2014-06-18 13:04:51 -0400] matti: I was about to ask the same thing ;]
[2014-06-18 13:06:34 -0400] sebnil: damn pasting into irssi. I got the depends "simple_iptables" in my metadata.rb. Isn't that to include the recipe?
[2014-06-18 13:07:02 -0400] n1ko: nope, thats declaring a dependency
[2014-06-18 13:07:38 -0400] n1ko: to include a recipe you need include_recipe in a recipe (or in a run list if you aren't using a wrapper cookbook)
[2014-06-18 13:08:54 -0400] chefDeveloper3: installed minitest-chef-handler (1.0.2), but the chef run seem not to find a test. i tried test/test_default.rb under my coockbook path. What do I have to do, to run a simple hello world test. where do I have to put the file, with which content?
[2014-06-18 13:10:08 -0400] chefDeveloper3: it runs the hanlder, but says: Finished tests in 0.000889s, 0.0000 tests/s, 0.0000 assertions/s.
[2014-06-18 13:10:34 -0400] sebnil: Oh jeesus. Works great now. Thanks jhsubscribe and n1ko :)
[2014-06-18 13:11:31 -0400] matti: chefDeveloper3: Most likely cannot find your tests ;/
[2014-06-18 13:11:47 -0400] matti: chefDeveloper3: If you get annoyed, look at serverspec too.
[2014-06-18 13:13:58 -0400] jhsubscribe: ChefDeveloper3 - are you using test-kitchen?
[2014-06-18 13:14:12 -0400] chefDeveloper3: matti: jhsubscribe no
[2014-06-18 13:15:01 -0400] chefDeveloper3: matti: I know serverspec. Is there a handler for serverspec, too? like the minitest-chef-hanlder?
[2014-06-18 13:16:45 -0400] jhsubscribe: ChefDeveloper3: Ok, I'll bow out.  I assume you've checked it out.  If not, I highly recommend it.  Hooks into minitest, servspec, chefspec etc
[2014-06-18 13:17:24 -0400] jhsubscribe: if only I could get it working for windows guests!
[2014-06-18 13:19:51 -0400] srenatus: is it possible to override a certain libraries/... method of another cookbook?
[2014-06-18 13:20:45 -0400] chefDeveloper3: jhunter: I tried test-kitchen. I think its to early to use it. for instance it sends a terminate signal to webapps which is not send by a normal chef run
[2014-06-18 13:21:28 -0400] jkeiser: srenatus: you mean replace it (monkey patch) it?  Or do you mean subclass a class in a library?
[2014-06-18 13:22:09 -0400] jkeiser: srenatus: as long as the other cookbook is a dependency of your cookbook, you should be able to do either (I'm assuming the libraries/ are loaded in dependency order)
[2014-06-18 13:23:39 -0400] soupdiver: I want to define attributes for specific nodes. How must I name them that the specific attribute file is automatically applied to the desired node? I guess I have to put them in the attributes/ folder
[2014-06-18 13:24:35 -0400] srenatus: jkeiser: monkey patch. thanks
[2014-06-18 13:26:46 -0400] jkeiser: soupdiver: knife node edit <node name> and add the attributes in there--you can attach attributes to a particular node by putting them under the "normal" hash
[2014-06-18 13:28:52 -0400] soupdiver: jkeiser: but then I don't have these under version control, right? Is there a way to do this via a file under attributes/ ?
[2014-06-18 13:30:12 -0400] jkeiser: soupdiver: nope.  You can use Cheffish or Chef Metal and define the nodes in a recipe with "chef_node" or "machine", and version that thing ...
[2014-06-18 13:32:14 -0400] jkeiser: soupdiver: like, make a recipe like this https://gist.github.com/jkeiser/b9f3ce211a5715387007
[2014-06-18 13:32:44 -0400] jkeiser: soupdiver: and then you can run that recipe with chef-client recipe.rb
[2014-06-18 13:32:59 -0400] jkeiser: soupdiver: it will set the node attributes for whichever nodes you want
[2014-06-18 13:33:12 -0400] jkeiser: you will need to gem install cheffish of course
[2014-06-18 13:33:16 -0400] soupdiver: jkeiser: thanks for the help!
[2014-06-18 13:34:23 -0400] jkeiser: It would be nice if you could just dump the node json in your repo, but unfortunately there is runtime data that would be overwritten if you uploaded files like that
[2014-06-18 13:34:33 -0400] jkeiser: something we should probably rectify in knife upload
[2014-06-18 13:41:03 -0400] whiteadam: Are there any best practices for creating a community cookbook on github? Like naming scheme or anything like that?
[2014-06-18 13:47:47 -0400] srenatus: COOK-4672.  pretty please. ;)
[2014-06-18 14:02:34 -0400] jhsubscribe: Hi jkeiser: any opinion on "Is anyone sucessfully using Chef-Metal from a Windows 7 workstation?".  I'll probably just have to learn more Ruby to fix the openssl_pkcs8 native extension error but just asking incase it's definately unsupported / known fix.
[2014-06-18 14:10:56 -0400] jkeiser: jhsubscribe: not definitely unsupported, but hasn't been run from a Windows workstation yet. Will not 1.0 until it successfully works, and if there's things to fix let me know!
[2014-06-18 14:11:14 -0400] jkeiser: I'm going to tank fucking openssl_pkcs8
[2014-06-18 14:11:24 -0400] jkeiser: That thing has caused more problems ...
[2014-06-18 14:11:46 -0400] jkeiser: Maybe make it so you can optionally install it yourself
[2014-06-18 14:13:06 -0400] freerobby: Does anybody have examples of chef-zero/serverspec that utilize chef search?
[2014-06-18 14:13:30 -0400] jhsubscribe: Thanks.  I assume "let me know" = raise detailed issue on Github repo.  Will do.  And yes, I have no idea what pkcs8 is needed for but I feel the same towards it!
[2014-06-18 14:48:35 -0400] jhsubscribe: freerobby: in the absence of other voices... The chef search in recipes could set node attributes which may be able to be accessed through serverspec? https://github.com/serverspec/serverspec/issues/155
[2014-06-18 14:58:30 -0400] sarkis: hey all, i deleted a node from chef server, but it tells me * There may already be a client named "foo"
[2014-06-18 14:58:45 -0400] sarkis: when i do a chef-client run again with the same name for a new machine
[2014-06-18 14:59:16 -0400] sarkis: what else do i have to do other than delete-ing the node from the node list on chef server
[2014-06-18 14:59:28 -0400] jbz: sarkis:  You have to delete the *client* on the server
[2014-06-18 14:59:33 -0400] jbz: usually will have the same name as the node
[2014-06-18 14:59:40 -0400] jbz: otherwise the new machine can't register its client
[2014-06-18 14:59:42 -0400] sarkis: oh nvm
[2014-06-18 14:59:44 -0400] sarkis: the client
[2014-06-18 14:59:51 -0400] sarkis: i just saw it.. thanks jbz
[2014-06-18 14:59:54 -0400] jbz: np
[2014-06-18 15:02:13 -0400] cwebber: hey all, I am doing a few office hours today for supermarket
[2014-06-18 15:02:24 -0400] cwebber: https://plus.google.com/hangouts/_/hoaevent/AP36tYdT4S0c16ghDtd-w5XrxKdpTDiS6GrJZ5o9HX6t2zNWDzJXjw?authuser=1&hl=en is going on right now if you want to jump in
[2014-06-18 15:09:48 -0400] sarkis: hmm so trying to do everything in one shot, what's the best way to set the hostname for ec2?
[2014-06-18 15:10:03 -0400] whiteadam: sarkis: What OS?
[2014-06-18 15:10:12 -0400] sarkis: was hoping knife ec2 would be able to handle this somehow, seems i need to either provision it before running knife ec2?
[2014-06-18 15:10:18 -0400] sarkis: or do it in chef somewhere
[2014-06-18 15:10:35 -0400] sarkis: whiteadam: ubuntu 12.04 on ec2
[2014-06-18 15:10:59 -0400] whiteadam: sarkis: Not sure in Ubuntu. In RHEl or Cent, it's system-config-network-tui
[2014-06-18 15:11:22 -0400] sarkis: thats something u pass to the knife ec2 command you mean?}
[2014-06-18 15:11:42 -0400] whiteadam: No, I do not think you can set the hostname with knife or chef.
[2014-06-18 15:12:08 -0400] whiteadam: I mean, I'm sure there's a way, but I'm not sure that it's a common practice
[2014-06-18 15:12:15 -0400] sarkis: yea
[2014-06-18 15:12:17 -0400] sarkis: hmm
[2014-06-18 15:12:32 -0400] jbz: We set hostnames with separate code in our base cookbook
[2014-06-18 15:12:35 -0400] jbz: not during provisioning
[2014-06-18 15:12:57 -0400] sarkis: jbz: how do you grab the variable to set the hostname databag or something?
[2014-06-18 15:13:19 -0400] jbz: sarkis: we construct it out of a combo of the chef nodename and the runlist
[2014-06-18 15:13:38 -0400] sarkis: oh actually i just want it to be the chef node name
[2014-06-18 15:13:44 -0400] sarkis: that should be easy to get via ohai no?
[2014-06-18 15:13:53 -0400] sarkis: or maybe just chef.
[2014-06-18 15:14:00 -0400] jbz: Don't need ohai, you should be able to use node.name or similar, let me check
[2014-06-18 15:14:03 -0400] jbz: it's not an attribute
[2014-06-18 15:14:07 -0400] sarkis: cool
[2014-06-18 15:14:28 -0400] sarkis: node.name it is, i found it.. thanks
[2014-06-18 15:14:42 -0400] jbz: cheers
[2014-06-18 15:29:51 -0400] sarkis: so to be clear... berkshelf... cookbook "hostname", "~> 0.1"
[2014-06-18 15:30:08 -0400] sarkis: will that pick up 0.3.0? not sure how ~> acts if i specify just X.X
[2014-06-18 15:30:45 -0400] sarkis: i know if i do ~> 0.0.1 it will pick up 0.0.2,0.0.3 etc, so hoping it acts the same here
[2014-06-18 15:34:52 -0400] sarkis: ok i think i confirmed that this is the case, though still don't see it anywhere in the docs..
[2014-06-18 15:34:58 -0400] sarkis: assuming its the same as bundle
[2014-06-18 15:38:52 -0400] db123: fresh chef server install on ubuntu...can't find the chef-server-ctl command
[2014-06-18 15:38:55 -0400] db123: any ideas?
[2014-06-18 15:39:40 -0400] sarkis: db123: how did you install it?
[2014-06-18 15:39:52 -0400] grubernaut: db123:  /usr/bin/chef-server-ctl ?
[2014-06-18 15:40:47 -0400] db123: I'm standing up the server on Azure, so I edited apt-get to pull it from Opscode directly
[2014-06-18 15:41:15 -0400] db123: I'm able to log into WebUI
[2014-06-18 15:41:24 -0400] rsavage: something about Azure gives me the heebeejeebees
[2014-06-18 15:41:35 -0400] db123: I've had it working well before
[2014-06-18 15:41:39 -0400] digitallogic: hi, is there an option/config to get knife to not swallow a stack trace?
[2014-06-18 15:41:52 -0400] db123: any way to check my installed version from the command line or from a file?
[2014-06-18 15:41:53 -0400] digitallogic: I could have swarn I've done so before but I can't find it
[2014-06-18 15:43:45 -0400] maniac: hi guys  anyone knows why if previously used normal attribute on 2 different nodes  upon deletion it in roles on node it stays but on another dissapears ?
[2014-06-18 15:44:07 -0400] grubernaut: db123:  cat /opt/chef-server/version-manifest.txt
[2014-06-18 15:45:28 -0400] db123: grubernaut: doesn't exist...maybe I installed Chef Solo? Would that have WebUI?
[2014-06-18 15:45:58 -0400] db123: @grubernaut: echo "deb http://apt.opscode.com/ precise-0.10 main" | sudo tee /etc/apt/sources.list.d/opscode.list
[2014-06-18 15:46:05 -0400] db123: that's what I added to sources
[2014-06-18 15:46:16 -0400] db123: then ran: apt-get install chef chef-server
[2014-06-18 15:49:52 -0400] medya: can I install chef-server using a cookbook?
[2014-06-18 15:50:30 -0400] grubernaut: db123:  can you `dpkg -l | grep chef` then?
[2014-06-18 15:51:13 -0400] grubernaut: db123:  I don't believe chef-solo has WebUI though. Could be wrong.
[2014-06-18 15:51:22 -0400] db123: it shows chef-server 10.18.2-1
[2014-06-18 15:51:48 -0400] hhoover: medya yes https://github.com/opscode-cookbooks/chef-server
[2014-06-18 15:51:54 -0400] db123: did I need to install ruby prior to chef server?
[2014-06-18 15:52:00 -0400] whiteadam: db123: no
[2014-06-18 15:52:10 -0400] whiteadam: db123: it has an embedded ruby that it uses.
[2014-06-18 15:52:12 -0400] grubernaut: db123:  no, omnibus
[2014-06-18 15:52:19 -0400] db123: cool ty
[2014-06-18 15:52:52 -0400] db123: so it shows "chef" "chef-expander" "chef-server" "chef-server-api" "chef-server-webui" "chef-solr"
[2014-06-18 15:53:00 -0400] db123: all version 10.18.2-1
[2014-06-18 15:53:28 -0400] db123: knife client list works
[2014-06-18 15:53:44 -0400] blackice2999: Hi @all, has someone a idea how i can resolv this by update the chef-client embedded mysql or mysql2 gem file? Incorrect MySQL client library version! This gem was compiled for 5.5.35 but the client library is 5.6.19
[2014-06-18 15:53:50 -0400] grubernaut: I would recommend upgrading to chef-server 11.xx, but that's just personal opinion
[2014-06-18 15:53:56 -0400] grubernaut: db123
[2014-06-18 15:54:45 -0400] db123: I went the apt-get route as for some reason the webbrowser in Ubuntu doesn't work and I can't hit the opscode site directly
[2014-06-18 15:55:04 -0400] grubernaut: could you wget the .deb file?
[2014-06-18 15:55:04 -0400] db123: going to wipe this VM and start over, I wanted 11 anyways, thanks for the help!
[2014-06-18 15:55:11 -0400] grubernaut: haha no prob
[2014-06-18 15:55:12 -0400] db123: much appreciated
[2014-06-18 15:55:13 -0400] grubernaut: :)
[2014-06-18 15:55:17 -0400] whiteadam: db123: do it!
[2014-06-18 15:55:17 -0400] db123: ;)
[2014-06-18 15:55:24 -0400] grubernaut: 11>10 for a reason ;)
[2014-06-18 15:55:38 -0400] db123: I've used 11 before on Azure, not sure why I'm having issues now
[2014-06-18 15:55:51 -0400] grubernaut: I'll be back on later, getting lunch for a bit.
[2014-06-18 15:55:59 -0400] blackice2999: uh i resolved it self by /opt/chef/embedded/bin/gem install mysql -- --with-mysql-config=/usr/bin/mysql_config
[2014-06-18 15:57:49 -0400] medya: @hhoover thanks
[2014-06-18 16:15:49 -0400] jerrod: Hey all
[2014-06-18 16:17:55 -0400] jerrod: Getting: service[start-thing]: unable to locate the init.d script!
[2014-06-18 16:17:56 -0400] jerrod: http://pastebin.com/P87LPU76
[2014-06-18 16:18:39 -0400] jerrod: thing.sh does exist in the directory though, I've checked.
[2014-06-18 16:21:02 -0400] jerrod: Any thoughts?
[2014-06-18 16:24:42 -0400] fixxxermet: Can I apply a tag to a node during knife bootstrap?
[2014-06-18 16:26:38 -0400] sarkis: hey all, anyone notice apt cookbook not running apt-get update?
[2014-06-18 16:27:01 -0400] sarkis: im looking through it looks like it should run it.. unless /var/lib/apt/periodic/update-success-stamp exists
[2014-06-18 16:28:55 -0400] sarkis: heres what i see: https://gist.github.com/sarkis/79bb75225d40356b2694
[2014-06-18 16:32:27 -0400] sarkis: ok nvm the stupid ami has that file ther already thats why..
[2014-06-18 16:34:10 -0400] sarkis: how do i call that from my app cookbook? assuming https://github.com/opscode-cookbooks/apt/blob/fa3497059afbc6addc15ec2b6eea2d0a74ba77e4/recipes/default.rb#L45-L51
[2014-06-18 16:36:19 -0400] jkeiser: fixxxermet: the typical way to do that is to put "tag 'blah'" in a recipe on the node itself
[2014-06-18 16:37:57 -0400] sarkis: wait nvm something is up... the file is from june 6, that means apt-get update should run ...
[2014-06-18 16:49:34 -0400] jerrod: What are some things that often cause chef to be unable to locate an init.d script?
[2014-06-18 16:53:21 -0400] jmickle: anyone have a contact from rackspace?
[2014-06-18 16:55:36 -0400] rsavage: 1 (800) 961-4454 - Rackspace
[2014-06-18 16:58:49 -0400] whiteadam: jmickle: I live down the road, want me to knock on the door?
[2014-06-18 16:59:26 -0400] jmickle: ja dude rsavage thanks for the sarcasm, we had some questions particularly that their sales team cant answer ;-p
[2014-06-18 17:00:20 -0400] whiteadam: jmickle: I have the same problem with SoftLayer right now. Two weeks in and they can't tell me if their message queue supports SSL or not.
[2014-06-18 17:00:30 -0400] jmickle: dont use softlayer?
[2014-06-18 17:00:31 -0400] jmickle: :-P
[2014-06-18 17:00:41 -0400] whiteadam: ugh, corporate america mandated it.
[2014-06-18 17:00:44 -0400] jmickle: haha
[2014-06-18 17:00:51 -0400] jmickle: i am starting to quickly despise corporate america
[2014-06-18 17:00:56 -0400] whiteadam: I may or may not work for IBM....
[2014-06-18 17:00:59 -0400] JoshZ__: jkeiser: We are looking for a way to do some spec testing on chef-metal now, not so much per machine but more as an overall environment... do You know if anyone has done this and how?
[2014-06-18 17:01:01 -0400] whiteadam: Yeah, amen.
[2014-06-18 17:01:23 -0400] jmickle: its alright im pretty sure your situation is far better then what i am dealing with
[2014-06-18 17:01:30 -0400] jmickle: that i may or may not be allowed to talk about
[2014-06-18 17:01:33 -0400] jmickle: lol
[2014-06-18 17:02:30 -0400] whiteadam: Our division "partners" will all "cloud" providers... and some butthole signed a contract with SL without knowing what Cloud means... they based their decision solely on the cost of bare-metal compute... which we don't use.
[2014-06-18 17:03:16 -0400] whiteadam: AND, they will only bill us in the US, so for countries like, Brazil, it will cost us more... stupid corporate people
[2014-06-18 17:03:46 -0400] jkeiser: JoshZ_: there is a "kitchen-metal" plugin written by Doug Triggs: https://github.com/doubt72/kitchen-metal , that is intended to address this.  It's early days there, but I know he had it working as of the last commit.
[2014-06-18 17:04:57 -0400] JoshZ__: ok sweet thanks jkeiser Ill look deeper into that! Thanks!!! this is an awesome project!
[2014-06-18 17:08:59 -0400] jmickle: ha
[2014-06-18 17:13:54 -0400] cschneid: I have a problem - I have a vagrant chef server setup, and want to bring up client boxes against it. I'm using chef-vault, and so when the new node comes up, it can't get at the secrets yet, since they need to be readded with the new nodes key.  Is there a clean way to solve this, or should I write a `fake_chef_vault` gem that mirrors the interface w/ just a unencrypted databag backend?
[2014-06-18 17:28:54 -0400] rsavage: in a Chef recipe, can you have two statments on the same line?  like you can do in bash... ie...   var1 = 'something; var2 = 'something else'?
[2014-06-18 17:29:03 -0400] maniac: hi guys .. is there a way to get list of attributes along with theris type ? ( default, override, node etc)
[2014-06-18 17:29:29 -0400] maniac: i can get attribute list with knife node show <name> -l
[2014-06-18 17:29:35 -0400] maniac: but i actually can't see theri type
[2014-06-18 17:31:17 -0400] mikesplain: Hey jkeiser, any idea when you plan to do a release of Chef-Metal master? It would be helpful to be able to pull a new version into some of my recipes
[2014-06-18 17:31:28 -0400] esigler: rsavage: if youre talking about inside a default.rb file, yes, its just ruby, so things like puts hello; puts world work.
[2014-06-18 17:31:43 -0400] jkeiser: mikesplain: plan is today.  Been a little busy with a patch release til now :)
[2014-06-18 17:32:12 -0400] mikesplain: jkeiser: Cool no worries, thanks!
[2014-06-18 17:34:04 -0400] JoshZ__: jkeiser: I have a question also... we are using the fog driver for OpenStack. We have to use our OS key as the keyname to create vms on OS... but it then assigns that key as the ssh key on the client as well... is there a way to specify a different ssh key?
[2014-06-18 17:34:46 -0400] rsavage: thanks esigler
[2014-06-18 17:35:04 -0400] mikesplain: JoshZ__ pass key_name to machine options
[2014-06-18 17:35:40 -0400] JoshZ__: yeah that is what we are doing but we have to use the openstack key or else it wont connect to open stack..
[2014-06-18 17:36:45 -0400] mikesplain: JoshZ__ Hmm odd, we use openstack too haven't had much issue with the keys
[2014-06-18 17:37:27 -0400] JoshZ__: oh really? are your OS keys different than your ssh keys?
[2014-06-18 17:37:29 -0400] surge_: Ohai chefs. Im having an issue with ohai 7. I call action :reload on ohai and then set some attributes but the values I am setting arent apparent because my recipe keeps failling.
[2014-06-18 17:38:13 -0400] surge_:  ohai[reload_ohai] action reload/opt/chef/embedded/lib/ruby/gems/1.9.1/gems/ohai-7.0.4/lib/ohai/plugins/linux/network.rb:49: warning: already initialized constant IPROUTE_INT_REGEX    seems to cause /etc/pki/tls/certs/ec2.internal.crt  to be the resulting file instead of having my companys domain name where ec2.internal is shown.
[2014-06-18 17:38:24 -0400] mikesplain: JoshZ__ You mean the ones generated by OS that are placed under the stack user when spinning up an instance? Yes we use a standard key to spin up the instances, then attach to ldap for the rest of our keys, etc.
[2014-06-18 17:39:10 -0400] JoshZ__: hmm ok. Thanks for your help!
[2014-06-18 17:39:14 -0400] mikesplain: np
[2014-06-18 17:41:24 -0400] jkeiser: mikesplain, JoshZ__: sorry, I just got disconnected, not sure if my last few messages got through at all
[2014-06-18 17:42:11 -0400] jkeiser: I'm a little confused--did mikesplain solve your problem?  I'm unclear on how, and would like to understand :)
[2014-06-18 17:42:13 -0400] JoshZ__: havnet seen anything from you since you plan to do a release today..
[2014-06-18 17:42:16 -0400] JoshZ__: no.
[2014-06-18 17:42:21 -0400] rsavage: is there any difference between Chef::Log and just Log?
[2014-06-18 17:42:33 -0400] rsavage: output-wise that it?
[2014-06-18 17:43:02 -0400] mikesplain: ^ ditto, not sure how I solved it either haha but happy to attempt!
[2014-06-18 17:43:47 -0400] rsavage: yo peppercode!
[2014-06-18 17:43:56 -0400] JoshZ__:     machine_options :bootstrap_options => {
[2014-06-18 17:43:56 -0400] JoshZ__: :key_name => OS_KEY,
[2014-06-18 17:43:57 -0400] JoshZ__: jkeiser: we have to use an openstack generated key to create the OS instances.. and that key is currently under
[2014-06-18 17:44:14 -0400] JoshZ__: hmm that went in the wrong order..
[2014-06-18 17:44:44 -0400] JoshZ__: anyhow we have to use that OS key to generate the instances but then to ssh in to the machine that was created we have to use that OS key.
[2014-06-18 17:44:47 -0400] jkeiser: JoshZ__: let me see if I understand the issue.  The openstack key is an SSH key, stored in openstack, and that is the SSH key that you can initially use to bootstrap the instance.  Yes?
[2014-06-18 17:45:30 -0400] jkeiser: JoshZ__: the second half is, once you have bootstrapped the instance you are changing the list of SSH keys which can connect, making the openstack SSH key invalid and adding some other keys
[2014-06-18 17:45:34 -0400] jkeiser: Is this all correct?
[2014-06-18 17:45:49 -0400] surge_: Okay, answering my own quesiton here but it seems to be fixed in a future ohai version BUT the install.sh script still installs 7.0.4 which is the version giving me trouble . For reference: https://tickets.opscode.com/browse/OHAI-572?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel
[2014-06-18 17:46:28 -0400] surge_: So i need a way to upgrade the embedded Ohai that ships with the omnibus chef
[2014-06-18 17:47:26 -0400] jkeiser: surge_: from within a recipe, or from the command line?
[2014-06-18 17:47:38 -0400] jkeiser: surge_: from command line, /opt/chef/embedded/bin/gem install ohai should do it
[2014-06-18 17:47:56 -0400] surge_: Yeah, just thinking out loud. I think Ill do it from within a recipe.
[2014-06-18 17:48:28 -0400] surge_: chef_gem ohai should be sufficient
[2014-06-18 17:48:29 -0400] jkeiser: surge_: does the old version of ohai prevent the recipe from even starting up?
[2014-06-18 17:48:44 -0400] jkeiser: or is it just not outputting the stuff you want
[2014-06-18 17:48:57 -0400] JoshZ__: jkeiser: no they are both local to my laptop... not stored on OS.. to create an OS instance we have to use our OS key. but when bootstrapping we want to add additional ssh keys or really just our local ssh key from .ssh/id_rsa
[2014-06-18 17:49:10 -0400] surge_: It runs, it just fails because its using the wrong value. It expects a certain filename so it can retrieve it from files/default but because it cant find it. It fails on the initial bootstrap.
[2014-06-18 17:49:29 -0400] JoshZ__: that way we can ssh to the machine using our .ssh/id_rsa key as opposed to our openstack key...
[2014-06-18 17:49:35 -0400] jkeiser: JoshZ_: OK, so what you would like to do is add some additional ssh keys that are authorized to access the instance, *after* starting up
[2014-06-18 17:49:46 -0400] JoshZ__: yes.
[2014-06-18 17:49:46 -0400] jkeiser: JoshZ_: the 'users' cookbook solves this.  I bet there are other cookbooks too
[2014-06-18 17:49:59 -0400] JoshZ__: ok that is what we wanted to know.
[2014-06-18 17:50:10 -0400] jkeiser: JoshZ_: awesome :)
[2014-06-18 17:50:35 -0400] JoshZ__: this is more for testing because our ENV adds keys anyway. Thank you!
[2014-06-18 17:50:42 -0400] jkeiser: surge_: OK.  caveat with chef_gem, you *might* have to specify a particular action or maybe even a particular version in the resource to force it to upgrade
[2014-06-18 17:50:58 -0400] jkeiser: JoshZ__: no problem!  Good luck :)
[2014-06-18 17:51:08 -0400] surge_: I had a feeling. Im just going to hardcode 7.2.0
[2014-06-18 17:51:21 -0400] surge_: until that breaks too ;)
[2014-06-18 17:52:26 -0400] mfeingold: Hi guy's I'm having and issue with kitchen test
[2014-06-18 17:52:51 -0400] surge_: NOOOOO rubygems.org >> 7.2.0.alpha.0 May 30, 2014 (404 KB)
[2014-06-18 17:52:53 -0400] surge_: -_-
[2014-06-18 17:53:44 -0400] mfeingold: http://pastebin.com/3KLwr10d#
[2014-06-18 17:53:55 -0400] mfeingold: I have berkshelf installed
[2014-06-18 17:54:06 -0400] mfeingold: I have it in the gemfile
[2014-06-18 17:54:11 -0400] mfeingold: I did bundle install
[2014-06-18 17:54:13 -0400] mfeingold: bundle update
[2014-06-18 17:54:28 -0400] mfeingold: And yet it stil complains about dependencies and berkshelf
[2014-06-18 17:54:42 -0400] surge_: Welp, downgrading is the solution until it comes out of alpha
[2014-06-18 17:56:04 -0400] mfeingold: http://pastebin.com/ETwEjPGH
[2014-06-18 18:04:31 -0400] jblancett: what would be the appropriate way to read a file from the files folder in a cookbook into an attribute in the attributes file?
[2014-06-18 18:05:20 -0400] jkeiser: surge_: you can actually specify the whole alpha version #
[2014-06-18 18:05:43 -0400] jkeiser: version '7.2.0.alpha.0'
[2014-06-18 18:05:44 -0400] surge_: I know, but I want to stick with what I know will work without any surprises.
[2014-06-18 18:06:06 -0400] jkeiser: ah :)
[2014-06-18 18:09:26 -0400] heathsnow: jblancett: I've never tried that before.  I think you would have to set the attribute in the recipe and not in the attribute file.  I could be wrong though since I've never tried.
[2014-06-18 18:23:43 -0400] jblancett: I guess what I really need is a way to hook in to chef's file picker so I can read a file in the files folder without specifying the exact path to it, so the folder structures still work
[2014-06-18 18:26:14 -0400] rsavage: It is possible to track when updates to chef-server 'enviornments' take place?
[2014-06-18 18:33:53 -0400] rsavage: It is possible to track when updates to chef-server 'enviornments' take place?
[2014-06-18 18:35:12 -0400] jharley: jblancett: why do you need to put it in the attributes file?
[2014-06-18 18:43:51 -0400] amdprophet: Im trying to use the windows_feature LWRP (with the latest windows cookbook) to install the NetFx3 feature but Im getting The source files could not be downloaded. It works if I run the command through cmd.exe. Has anyone run into this before?
[2014-06-18 18:45:34 -0400] prometheanfire: is there a way to push an attribute into the environment
[2014-06-18 18:45:57 -0400] rsavage: It is possible to track when updates to chef-server 'enviornments' take place?
[2014-06-18 18:46:03 -0400] prometheanfire: server sets up a mysql user/password dynamically, I can save that password with set_unless, but it is only available to that node
[2014-06-18 18:46:09 -0400] prometheanfire: I need it to be shared
[2014-06-18 18:47:24 -0400] zr2d2: is this a good place to ask questions about knife?
[2014-06-18 18:49:29 -0400] zr2d2: When I use 'knife cookbook upload --all', it fails because a dependancy hasn't been uplaoded yet
[2014-06-18 18:50:01 -0400] zr2d2: is there a way knife is supposed to order cookbook uploads
[2014-06-18 18:50:03 -0400] zr2d2: ?
[2014-06-18 18:54:41 -0400] mfeingold: Hey guys so I figured out the problem
[2014-06-18 18:54:49 -0400] mfeingold: You guys have a bug in Chef
[2014-06-18 18:54:51 -0400] mfeingold: With berkshelf
[2014-06-18 18:55:27 -0400] mfeingold: You need to berks init a random cookbook before you can start using other berksfiles
[2014-06-18 18:55:57 -0400] mfeingold: I reformatted my work laptop and wasn't able to run kitchen test on cookbooks I already had
[2014-06-18 19:01:59 -0400] btm: @chef code review: join: bit.ly/1iaFSI0 watch: bit.ly/1iaFRnv
[2014-06-18 19:09:02 -0400] jharley: @prometheanfire I believe you can call node.save to share it back?
[2014-06-18 19:09:13 -0400] jharley: @prometheanfire I primarially work with chef-solo though, so Im not sure :)
[2014-06-18 19:11:34 -0400] zr2d2: is this not a good place to ask about knife? Is there a seperate knife channel?
[2014-06-18 19:13:17 -0400] db123: is knife included in the chef-server omnibus installer?
[2014-06-18 19:15:59 -0400] joemiller: possible to install a gem via git with the chef_gem resource?
[2014-06-18 19:16:54 -0400] rsavage: It is possible to track when updates to chef-server 'enviornments' take place?
[2014-06-18 19:18:54 -0400] cheeseplus: rsavage: I don't know of any good way - the best method for controlling this (IMO) is using some kind of CI to push all updates
[2014-06-18 19:21:07 -0400] cheeseplus: joemiller: I don't see a way to do so directly here http://docs.opscode.com/resource_chef_gem.html
[2014-06-18 19:21:34 -0400] cheeseplus: you could call the local file perhaps but would have to do git stuff yourself it looks like
[2014-06-18 19:28:26 -0400] zr2d2: db123: it's in the dev kit, not sure about the omnibus installer
[2014-06-18 19:29:13 -0400] ScottCarp: I need help.
[2014-06-18 19:29:49 -0400] mjuszczak: How does one utilize their own version of ohai?  We want to patch it to add rackspace instance id support.
[2014-06-18 19:30:00 -0400] joemiller: yeah
[2014-06-18 19:31:50 -0400] joemiller: mjuszczak: here's an example we use to add the rackspace cell id to the ohai data: https://gist.github.com/joemiller/f9cd00277403d5f80381
[2014-06-18 19:32:21 -0400] ScottCarp: Would someone be willing to take a look at a short recipe, and tell me what I'm doing wrong?
[2014-06-18 19:39:54 -0400] jbz: ScottCarp: no promises, happy to look
[2014-06-18 19:41:02 -0400] ScottCarp: Awesome
[2014-06-18 19:41:03 -0400] ScottCarp: http://pastebin.com/9pbQk2xu
[2014-06-18 19:41:17 -0400] ScottCarp: This is the part of my recipe that is throwing an exception.
[2014-06-18 19:41:58 -0400] jbz: What's the error?
[2014-06-18 19:42:43 -0400] ScottCarp: service[start-flower]: unable to locate the init.d script!
[2014-06-18 19:43:27 -0400] cheeseplus: ScottCarp: appears to just be a simple ordering issue
[2014-06-18 19:43:32 -0400] ianblenke: should be one service resource. not two. not quite sure why you're trying to break it into two. did you mean for the first one to be a file resource?
[2014-06-18 19:44:17 -0400] ScottCarp: cheesplus: the same error occurs with cookbook_file above.
[2014-06-18 19:44:33 -0400] jbz: ScottCarp:  The service resource determines which provider it is using based on platform.  The service_provider is why it's trying to find an init.d script, I'm very sure.
[2014-06-18 19:44:49 -0400] jbz: Basically, I don't think you can just declare a script to be a service; chef makes assumptions about how those services work.
[2014-06-18 19:45:16 -0400] sigusr1: Would someone help with a quesiton about chef-metal?
[2014-06-18 19:45:18 -0400] jbz: If you want to use the service resource, and I think it's using the Init provider, you're going to need to make the script an actual init.d script
[2014-06-18 19:45:41 -0400] jbz: ScottCarp: what platform is this running on?
[2014-06-18 19:45:44 -0400] ScottCarp: What do you mean by 'actual init.d'?
[2014-06-18 19:45:57 -0400] mikesplain: sigusr1 go for it
[2014-06-18 19:46:06 -0400] ScottCarp: vagrant vm with rhel 6.4
[2014-06-18 19:46:17 -0400] sigusr1: is there a way to run a recipe on a bunch of nodes without actually changing the run_list?
[2014-06-18 19:46:21 -0400] whiteadam: ScottCarp: Are you installing from a package or making a custom init script?
[2014-06-18 19:46:28 -0400] ScottCarp: custom init
[2014-06-18 19:46:42 -0400] sigusr1: i.e. something like chef-client -o 'recipe[restart-service]'
[2014-06-18 19:47:17 -0400] sigusr1: I tried "action :converge_only" in the metal recipe, but that throws an error
[2014-06-18 19:47:24 -0400] jkeiser: sigusr1: you would do search(:node, '*:*').map { |n| n.name }.each do |name|
[2014-06-18 19:47:40 -0400] jkeiser:   machine_execute 'chef-client -o "recipe[restart-service]"' do
[2014-06-18 19:47:46 -0400] mikesplain: sigusr1 good question, I've faced a similar question, haven't figured it out myself. I'm assuming you want something semi permanent that couldn't be solved by just using knife ssh right?
[2014-06-18 19:47:47 -0400] jkeiser:     machine name
[2014-06-18 19:47:50 -0400] sigusr1: yes
[2014-06-18 19:47:53 -0400] jkeiser:   end
[2014-06-18 19:47:54 -0400] jkeiser: end
[2014-06-18 19:47:54 -0400] mikesplain: nice
[2014-06-18 19:48:00 -0400] sigusr1: thanks!
[2014-06-18 19:48:23 -0400] jbz: ScottCarp: Check out line 47 of: https://github.com/opscode/chef/blob/master/lib/chef/provider/service/redhat.rb
[2014-06-18 19:48:31 -0400] jkeiser: sigusr1: it won't do them in parallel, sadly
[2014-06-18 19:48:47 -0400] jkeiser: We need more generic parallelism support for that, or better DSL in metal itself
[2014-06-18 19:48:59 -0400] sigusr1: that's quite allright 
[2014-06-18 19:49:24 -0400] jkeiser: You can modify the search above to any node search, of course
[2014-06-18 19:49:28 -0400] jkeiser: that search does all machines
[2014-06-18 19:49:31 -0400] sigusr1: yep
[2014-06-18 19:49:34 -0400] jkeiser: I use it to shut down my clusters
[2014-06-18 19:50:18 -0400] sigusr1: partially-related to the above, is there any intention to implement some kind of "app" packaging in the DSL?
[2014-06-18 19:50:48 -0400] sigusr1: i.e. webserver(s) + database(s)
[2014-06-18 19:51:09 -0400] sigusr1: in a single app that can be interacted with?
[2014-06-18 19:51:20 -0400] ScottCarp: jbz: maybe I'm reading this wrong, but I'm sure the script is in the specified location.
[2014-06-18 19:51:23 -0400] jbz: ScottCarp: I don't know the exact cause of that failure, but it's possible you aren't providing all the appropriate requirements in the script for the SysV Init system to treat it as a service? Can you successfully chkconfig that service with your script installed?
[2014-06-18 19:51:42 -0400] ScottCarp: hmm
[2014-06-18 19:51:52 -0400] whiteadam: ScottCarp: If you're looking for how to place a startup script into the init.d folder manually, check out line 62 of this: https://github.com/zeroXten/logstash_forwarder/blob/master/recipes/default.rb
[2014-06-18 19:52:19 -0400] whiteadam: Might be a little help.
[2014-06-18 19:55:29 -0400] jkeiser: sigusr1: can you do me a favor and file an issue on the converge_only thing?
[2014-06-18 19:55:48 -0400] sigusr1: jkeiser: sure
[2014-06-18 19:56:14 -0400] jkeiser: sigusr1: packaging like that can be done with LWRPs ... I don't have direct plans to do anything beyond that but I'm open to the idea
[2014-06-18 19:56:28 -0400] jkeiser: sigusr1: I am considering things like scaling groups
[2014-06-18 19:56:41 -0400] jkeiser: But that's not quite the same thing
[2014-06-18 19:57:20 -0400] sigusr1: jkeiser: that's a good thought
[2014-06-18 20:04:14 -0400] karthee: Have a qq. I wrote a cookbook which need to pass an attribute for each node, say Rack Location of server. What is the best method to pass ?. Should I create a role for each node and attributes or should I create cookbok for each node ? or may be a wrapper cookbook ?  Any suggesions ?
[2014-06-18 20:04:34 -0400] cwebber: second office hours of the day: https://plus.google.com/hangouts/_/hoaevent/AP36tYflU2OmRqrEgFMbQT2xyP26Tu-yGzswdmJsTj0gynLtnMGj-Q?authuser=1&hl=en
[2014-06-18 20:04:43 -0400] cwebber: Talking about Supermarket
[2014-06-18 20:06:06 -0400] zr2d2: When i run knife upload it fails with an error about a dependancy not being met, but the cookbook is in the cookbook-path, it just comes later alphabetically
[2014-06-18 20:06:58 -0400] zr2d2: Where do i start debugging such a dependancy problem?
[2014-06-18 20:08:48 -0400] whiteadam: zr2d2: Try the knife-solve gem
[2014-06-18 20:09:32 -0400] mikesplain: zr2d2 if you're trying to knife upload and you have many dependencies, I'd say try berkshelf and using berks upload.  It'll take care of those issues for you
[2014-06-18 20:10:17 -0400] jkeiser: zr2d2: knife upload `knife deps cookbooks/*`
[2014-06-18 20:10:27 -0400] jkeiser: should do the trick
[2014-06-18 20:11:21 -0400] jkeiser: I really need to get knife upload to do the deps thing by itself, but many other things going on right now :)
[2014-06-18 20:11:45 -0400] whiteadam: lies, you're not doing anything
[2014-06-18 20:12:00 -0400] zr2d2: i'm getting this problem because i'm trying to install berkshelf, but there's other business logic i'm trying to merge with
[2014-06-18 20:12:01 -0400] jkeiser: But, knife deps already exists so if someone wanted to submit a dep-loving patch for ChefFS, it would not be remiss!
[2014-06-18 20:12:34 -0400] jkeiser: zr2d2: do try the knife upload `knife deps` thing, I suspect it will be fine
[2014-06-18 20:12:43 -0400] jkeiser: `knife deps /cookbooks/*` I mean
[2014-06-18 20:13:06 -0400] jkeiser: It's designed to give output in the right order so that things with the least dependencies show up first
[2014-06-18 20:13:18 -0400] jkeiser: produces a dependency ordering
[2014-06-18 20:14:12 -0400] jkeiser: yeah, I just tested on my tree, it seems right
[2014-06-18 20:19:48 -0400] zr2d2: jkeiser: for `knife deps /root/.berkshelf/cookbooks/*` i get a list of No such file or directory errors
[2014-06-18 20:20:04 -0400] jkeiser: zr2d2: use knife deps /cookbooks/*
[2014-06-18 20:20:12 -0400] jkeiser: rather than fully qualified path
[2014-06-18 20:20:38 -0400] jkeiser: do you have /root/.berkshelf/cookbooks in your path?
[2014-06-18 20:20:58 -0400] jkeiser: in your cookbook path I mean
[2014-06-18 20:21:29 -0400] jkeiser: I'm sorta confused--if you are already using berkshelf to berks install these, wouldn't you just berks upload as well?
[2014-06-18 20:23:27 -0400] zr2d2: there a whole layering step i do to include cookbooks from other repositories
[2014-06-18 20:24:19 -0400] zr2d2: so while i'm trying to manage a base set of cookbooks with berkshelf, it needs to add other project-specific cookbooks
[2014-06-18 20:24:59 -0400] zr2d2: i'm trying to move to berkshelf, but not everything can move at once
[2014-06-18 20:28:26 -0400] whiteadam: zr2d2: I feel your pain. Nothing ever works nice in the real world
[2014-06-18 20:28:45 -0400] zr2d2: jkeiser: i'm confused by the output, one one line i get ERROR: cookbooks/rsyslog: No such file or directory, then the next line says
[2014-06-18 20:28:45 -0400] zr2d2: cookbooks/rsyslog
[2014-06-18 20:29:14 -0400] zr2d2: if theres no rsyslog, how is it listing it?
[2014-06-18 20:33:10 -0400] jkeiser: zr2d2: because it's a dependency of something you installed
[2014-06-18 20:33:50 -0400] jkeiser: zr2d2: it will print the error to STDERR and print the dep to STDOUT so that you don't accidentally half-install something
[2014-06-18 20:39:19 -0400] MrHeavy: Is there a good way to test cookbook resources/providers in Test Kitchen without dumping test recipes in the main recipes/ directory?
[2014-06-18 20:48:26 -0400] mjuszczak: joemiller: Thanks!
[2014-06-18 21:02:58 -0400] icarus: i might be not following along correctly
[2014-06-18 21:03:21 -0400] icarus: but does the opscode php cookbook not allow for usage of php 5.5 ?
[2014-06-18 21:05:53 -0400] coderanger: icarus: https://github.com/opscode-cookbooks/php/blob/master/attributes/default.rb#L82
[2014-06-18 21:06:47 -0400] icarus: but: # php -v
[2014-06-18 21:06:48 -0400] icarus: PHP 5.3.10-1ubuntu3.11 with Suhosin-Patch (cli) (built: Apr  4 2014 01:30:04)
[2014-06-18 21:06:48 -0400] icarus: Copyright (c) 1997-2012 The PHP Group
[2014-06-18 21:06:49 -0400] icarus: Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies
[2014-06-18 21:06:54 -0400] icarus: hmmm
[2014-06-18 21:07:15 -0400] coderanger: icarus: By default it just installs the system package
[2014-06-18 21:07:30 -0400] coderanger: and really thats what you should be using unless you are willing to take on package management yourself
[2014-06-18 21:07:46 -0400] icarus: gotcha, i was figuring that was the case
[2014-06-18 21:12:33 -0400] betty_: Did anyone try using chef api method "PUT"?
[2014-06-18 21:13:48 -0400] medya: I try to install chef-server using the chef-server cookbook, but it has stuck there for like 20 minutes, it say n to execute[reconfigure-chef-server] (immediate) ==> default:   * execute[reconfigure-chef-server] action run
[2014-06-18 21:14:08 -0400] medya: why it wont finish doing the configure-chef-server ?
[2014-06-18 21:14:39 -0400] betty_: I am able to get response from server using "GET" in chrome rest client: "https:xxxx/nodes/" But I cannot "PUT" the same thing back to the same url. It says server error.
[2014-06-18 21:15:23 -0400] davidordave: Can open source chef 11 integrate with LDAP for user auth?
[2014-06-18 21:17:45 -0400] andrewjacobs: Is there an order of installation auto-prioritizer somewhere? So that given X, Y, Z, Z will be installed before X and Y so that X and Y can benefit from Z? But the list is populated by X, Y, Z?
[2014-06-18 21:18:04 -0400] andrewjacobs: I've read Puppet does this, but am unsure if Chef does it too?
[2014-06-18 21:19:03 -0400] medya: @coderanger I am trying to install chef-server using the cookbook, but it has stuck in one point,  for like past 30 minutes ==> default:   * execute[reconfigure-chef-server] action run
[2014-06-18 21:19:19 -0400] coderanger: medya: Which cookbook?
[2014-06-18 21:19:43 -0400] coderanger: betty_: Are you certain you are signing the request correctly?
[2014-06-18 21:19:53 -0400] medya: opscode's
[2014-06-18 21:20:02 -0400] coderanger: davidordave: No, that is a feature of the paid version, enterprise chef
[2014-06-18 21:20:07 -0400] medya: @coderanger I use opcode's cookbook
[2014-06-18 21:20:22 -0400] coderanger: andrewjacobs: Thats part of how cookbook dependencies and include_recipe work, yes
[2014-06-18 21:20:31 -0400] coderanger: medya: That cookbook is long deprecated, just install the package
[2014-06-18 21:20:49 -0400] medya: so there is no cookbook for chef itself?
[2014-06-18 21:20:56 -0400] medya: how should I configure it?
[2014-06-18 21:21:09 -0400] coderanger: medya: There doesn't need to be one, you just install the package, all config options have defaults
[2014-06-18 21:21:26 -0400] medya: how I start it, is it a service?
[2014-06-18 21:21:28 -0400] coderanger: (the package uses solo internally to configure itself)
[2014-06-18 21:21:32 -0400] medya: service start chef-server?
[2014-06-18 21:21:33 -0400] coderanger: medya: It starts itself
[2014-06-18 21:21:41 -0400] coderanger: postinst scripts
[2014-06-18 21:21:42 -0400] coderanger: :)
[2014-06-18 21:22:29 -0400] davidordave: @coderanger, thanks. I thought that was the case (and the docs indicate that), now I just have to convince everyone around me :p
[2014-06-18 21:22:39 -0400] medya: @coderanger, if it is that easy, why they dont put that in the cookbook, people like chef for automation, would be sad if u have to install chef-server itself manually
[2014-06-18 21:23:50 -0400] coderanger: medya: The cookbook exists, but it basically just installs the package
[2014-06-18 21:24:13 -0400] medya: @coderanger it installed it on mine, but when I go to the ip i wont show anything
[2014-06-18 21:24:19 -0400] medya: I installed it on AWS
[2014-06-18 21:24:24 -0400] medya: I go tot the ip of the server nothing happens
[2014-06-18 21:24:35 -0400] coderanger: medya: Usually timeouts on install are caused by FQDN/name resolution issues
[2014-06-18 21:24:48 -0400] coderanger: rabbitmq is very particular about how it handles hostnames
[2014-06-18 21:30:57 -0400] whiteadam: coderanger: I had a knife solve problem earlier and you weren't here. I cried.
[2014-06-18 21:31:26 -0400] coderanger: whiteadam: If you want an SLA I'm happy to talk about my consulting rates ;-)
[2014-06-18 21:31:42 -0400] whiteadam: coderanger: hahhaha, how much for a 15 minute SLA?
[2014-06-18 21:31:57 -0400] coderanger: "all of the monies"
[2014-06-18 21:31:59 -0400] coderanger: also a pony
[2014-06-18 21:32:11 -0400] whiteadam: oh, the second one is totally possible
[2014-06-18 21:40:00 -0400] medya: @coderanger I just installed chef-server and started it manually but when I went to the IP it says bad gatway ....does it have a default username password?
[2014-06-18 21:40:50 -0400] coderanger: medya: Bad Gateway means the things behind the reverse proxy isn't running or isn't responding, in this case erchef or the webui
[2014-06-18 21:41:26 -0400] coderanger: medya: Might I recommend using Hosted Chef if you are uncomfortable running the chef-server yourself? It is far from a simple task and not something you should take on without having some staff to dedicate to it
[2014-06-18 21:41:30 -0400] medya: @coderanger this is standard ubuntu 12.04 on aws and I downloaded the deb file from the site
[2014-06-18 21:41:49 -0400] medya: @coderanger I have been using hosted chef for a while now I wanna installed my own
[2014-06-18 21:42:02 -0400] coderanger: medya: Also obligatory plug: I provide training and consulting services for Chef
[2014-06-18 21:43:03 -0400] medya: @coderanger, what do you mean obligatory plug ...
[2014-06-18 21:43:44 -0400] medya: do you mean you don't answer question regarding installing the chef-server if it is not hosted on chef site itself?
[2014-06-18 21:44:29 -0400] akahn: I'm having an issue where bash I need to run a bash command (which subsequently runs bundle install in a ruby project), but the ruby version being used is chef client's embedded ruby, but I need the command to use the system ruby (installed at /usr/bin/ruby). anyone know how to approach this?
[2014-06-18 21:45:00 -0400] whiteadam: medya: I think coderanger means that if you pay him, he'll fix it all for you.
[2014-06-18 21:45:37 -0400] coderanger: medya: I mean that if you would like personalized support I'm happy to provide it
[2014-06-18 21:46:07 -0400] coderanger: akahn: Just use the full path to the correct ruby or set $PATH inside your bash script
[2014-06-18 21:46:35 -0400] akahn: coderanger: somewhere in chef internals, is $PATH being overridden so that the embedded ruby is found?
[2014-06-18 21:46:36 -0400] coderanger: medya: And I mean I provide free support here because I like helping people, but I can't walk you through every step of a very complex process
[2014-06-18 21:46:42 -0400] coderanger: akahn: Yes
[2014-06-18 21:46:48 -0400] akahn: thanks, I'll try that
[2014-06-18 21:47:12 -0400] whiteadam: coderanger: How much to put together my Ikea couch?
[2014-06-18 21:47:29 -0400] medya: @coderanger so are you implying that installing chef-server on ubuntu 12.04 is a complex process?
[2014-06-18 21:47:57 -0400] whiteadam: I would say that if you can't get it working out of the box, it's pretty complex.
[2014-06-18 21:47:58 -0400] akahn: is there some place to view the archives of the chef mailing list?
[2014-06-18 21:48:01 -0400] coderanger: medya: Yes, installing and managing your own chef server is a complex process, its a multi-service web application that will likely be hugely critical to your infra
[2014-06-18 21:48:02 -0400] medya: because ubuntu 12.04 is the supported distro, and it is a clean install, and I did exactly the documentation on the site
[2014-06-18 21:48:11 -0400] coderanger: whiteadam: tree fiddy, I know a guy
[2014-06-18 21:48:12 -0400] whiteadam: medya: It's certainly very different from hosted chef.
[2014-06-18 21:48:23 -0400] whiteadam: coderanger: better not be a loch ness monster
[2014-06-18 21:48:25 -0400] coderanger: akahn: lists.opscode.com has them
[2014-06-18 21:48:40 -0400] douglaswth: akahn: http://lists.opscode.com/sympa/arc/chef
[2014-06-18 21:49:07 -0400] coderanger: akahn: Unfortunately sympa is terrible, let me find you the link
[2014-06-18 21:49:24 -0400] jtimberman: Hey folks, not sure if anyone was using supermarket earlier today, but we had an issue when forcing http -> https. We'll have a publicly viewable postmortem meeting (and accompanying blog post afterward) about it tomorrow afternoon. More information on this blog post: http://www.getchef.com/blog/2014/06/18/supermarket-https-redirect-public-postmortem-meeting/
[2014-06-18 21:49:25 -0400] coderanger: akahn: http://lists.opscode.com/sympa/arc/chef
[2014-06-18 21:49:25 -0400] akahn: douglaswth had it handy. thanks
[2014-06-18 21:49:40 -0400] coderanger: :)
[2014-06-18 21:50:27 -0400] whiteadam: get your shit together jtimberman
[2014-06-18 21:51:23 -0400] coderanger: whiteadam: Please keep it to a dull roar, some humor is okay, insulting people is not
[2014-06-18 21:51:50 -0400] whiteadam: coderanger: It's all in how it's interpreted, no insult intended.
[2014-06-18 21:52:58 -0400] whiteadam: haha
[2014-06-18 21:54:43 -0400] whiteadam: coderanger: Does knife-solve show ALL depenencies? Like, even dependencies of dependencies?
[2014-06-18 21:55:08 -0400] coderanger: whiteadam: Yes
[2014-06-18 21:55:42 -0400] jtimberman: heh
[2014-06-18 21:55:47 -0400] coderanger: whiteadam: Or rather, it uses exactly the same dep solver API as chef-client, so what you see there is what chef-client will use
[2014-06-18 21:56:07 -0400] jtimberman: whiteadam: i thought i interpreted that as you meant, in a joking manner, but my face had "wtf" when I first read it.
[2014-06-18 21:56:17 -0400] jtimberman: coderanger: knife-solve is fantastic btw, thanks for that.
[2014-06-18 21:56:24 -0400] whiteadam: coderanger: Yeah, reading is the worst.
[2014-06-18 21:56:36 -0400] coderanger: jtimberman: :)
[2014-06-18 21:56:53 -0400] whiteadam: coderanger: Awesome, how did I not know about it sooner? Now I can finally answer everyone I work with when they go "BUT WHAT DOES IT INSTALL!?"
[2014-06-18 21:57:38 -0400] whiteadam: While we're at it, does anyone know of a cookbook that installs FreeIPA/IPA server? Thinking of open sourcing one if not.
[2014-06-18 21:58:30 -0400] gkra: anyone have any idea why "/usr/bin/python /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.6.2/lib/chef/provider/package/yum-dump.py --options --all-provides" would go off into the weeds?
[2014-06-18 21:58:53 -0400] gkra: chef-solo in test kitchen
[2014-06-18 21:59:04 -0400] gkra: centos apparently everything works fine
[2014-06-18 21:59:18 -0400] whiteadam: Maybe the python version isn't the same?
[2014-06-18 21:59:20 -0400] bricker: Using Vagrant, provisioned by Chef Solo, how do I update and converge on an already existing VM?
[2014-06-18 21:59:26 -0400] gkra: oracle, just for this cookbook, seems to get hung up on this processes during kitchen converge.
[2014-06-18 22:00:01 -0400] gkra: specifically, it's a "package" resource that seems to be triggering this.
[2014-06-18 22:00:04 -0400] gkra: package[curl-devel]
[2014-06-18 22:00:08 -0400] whiteadam: bricker: vagrant provision
[2014-06-18 22:00:13 -0400] whiteadam: bricker: I think
[2014-06-18 22:01:08 -0400] tabolario: bricker: Yep, what whiteadam said
[2014-06-18 22:01:21 -0400] tabolario: (Make sure you vagrant up first if the VM wasn't running of course)
[2014-06-18 22:01:29 -0400] coderanger: gkra: Whats the error?
[2014-06-18 22:01:35 -0400] gkra: no error
[2014-06-18 22:01:47 -0400] gkra: oddly, it just spins up to 99% CPU
[2014-06-18 22:02:01 -0400] gkra: hmm... Oracle repos are freakin' huge... maybe that's the problem.
[2014-06-18 22:02:23 -0400] gkra: but plenty of other package resources had to be successfully executed to get to *this* one...
[2014-06-18 22:02:56 -0400] gkra: python process has apparently finished, now it's just "chef-solo worker" banging on the CPU
[2014-06-18 22:03:41 -0400] gkra:          * package[curl-devel] action install[2014-06-18T21:48:44+00:00] INFO: Processing package[curl-devel] action install (nginx::passenger line 27)
[2014-06-18 22:03:53 -0400] gkra: C'MON, YOU CAN DO IT
[2014-06-18 22:04:13 -0400] gkra: 18 minutes now.
[2014-06-18 22:04:31 -0400] gkra: erm, 16. i can math
[2014-06-18 22:05:12 -0400] whiteadam: gkra: I work with IBM repos, I know what you mean. They don't mind saying "Download this 26GB repo"
[2014-06-18 22:05:42 -0400] gkra: heh
[2014-06-18 22:05:51 -0400] gkra: so... I guess I wait it out?
[2014-06-18 22:06:11 -0400] whiteadam: patience grasshopper.
[2014-06-18 22:06:13 -0400] gkra: this isn't exactly confidence-inspiring
[2014-06-18 22:06:16 -0400] whiteadam: haha
[2014-06-18 22:07:37 -0400] gkra: it's driven the box 800MB into swap now.
[2014-06-18 22:08:11 -0400] whiteadam: maybe something blew up
[2014-06-18 22:09:20 -0400] coderanger: gkra: It is probably parsing a silly amount of JSON
[2014-06-18 22:10:01 -0400] gkra: but why? It successfully processed something like 30 other package resources, and *now*, on this one (curl-devel), it barfs consistently?
[2014-06-18 22:10:42 -0400] gkra: I can destroy and converge this kitchen suite quite repeatably to do end up here. :(
[2014-06-18 22:10:48 -0400] medya: @coderanger how I can contact you personally , do you have linkedin or email ?
[2014-06-18 22:11:24 -0400] coderanger: medya: noah@coderanger.net is my email, or any of https://coderanger.net/contact.html
[2014-06-18 22:11:39 -0400] gkra: why on earth would chef-solo be parsing the full set of all yum repo data anyway?
[2014-06-18 22:12:01 -0400] gkra: or is this ohai getting ugly with me?
[2014-06-18 22:12:03 -0400] coderanger: gkra: Its used for idempotence checks by the yum package provider
[2014-06-18 22:12:07 -0400] whiteadam: coderanger: Are you near Milf Creek, I mean... Walnut Creek
[2014-06-18 22:12:13 -0400] Doc_X: anyone know if the 'url' attribute for an ark resource can take an array like the 'source' attribute for the remote_file resource will?
[2014-06-18 22:12:19 -0400] coderanger: whiteadam: Thats the next town over
[2014-06-18 22:12:28 -0400] medya: @coderanger thanks ! btw do you work for chef?
[2014-06-18 22:12:31 -0400] gkra: coderanger: as opposed to calling yum every time, I guess?
[2014-06-18 22:12:50 -0400] whiteadam: coderanger: hah, I used to live over there. I could never tell the daughters from their moms.
[2014-06-18 22:12:52 -0400] coderanger: medya: I do not, though Opscode (ChefInc) does provide support contracts of their own
[2014-06-18 22:13:09 -0400] medya: @coderanger then why your username has a @ in it ?
[2014-06-18 22:13:13 -0400] coderanger: whiteadam: Can't say I've spent much time checking, I only go over there to drop stuff off at the apple store
[2014-06-18 22:13:18 -0400] medya: does it mean you have registered yourr username?
[2014-06-18 22:13:20 -0400] whiteadam: medya: He lifts strong weights
[2014-06-18 22:13:35 -0400] coderanger: medya: I'm a channel operator, but not all ops are employees
[2014-06-18 22:14:05 -0400] medya: @coderanger I will send u an email
[2014-06-18 22:14:22 -0400] Doc_X: guess not.  there goes that idea.
[2014-06-18 22:15:02 -0400] coderanger: Doc_X: I don't think source takes an array on either
[2014-06-18 22:15:11 -0400] coderanger: Doc_X: I wrote the patch for that, but it never got merged
[2014-06-18 22:15:16 -0400] akahn: did you really just make a milf joke? is that appropriate in here?
[2014-06-18 22:15:23 -0400] gkra: *headdesk*
[2014-06-18 22:15:38 -0400] Doc_X: @coderanger: it says it does. . . or, rather, it said it did when i looked at the docs for it a few days ago
[2014-06-18 22:15:45 -0400] Ash: bahaha
[2014-06-18 22:15:56 -0400] whiteadam: akahn: You a cop?
[2014-06-18 22:16:24 -0400] whiteadam: Anyone know the simple difference between a MultiDomain SSL Cert and a Wildcard Cert?
[2014-06-18 22:16:26 -0400] coderanger: Doc_X: Ahh, looks like its custom to remote_file
[2014-06-18 22:16:31 -0400] sarkis: is there a way to add to the run_list permanently with knife ec2?
[2014-06-18 22:16:34 -0400] sarkis: -r just runs 1 time
[2014-06-18 22:16:39 -0400] Ash: the topic specifically says no cops
[2014-06-18 22:16:39 -0400] Doc_X: @coderanger: from the docs: When multiple paths are specified, the chef-client will attempt to download the files in the order listed, stopping after the first successful download.
[2014-06-18 22:16:50 -0400] coderanger: whiteadam: multidomain has multiple entires in the subject alt name, wildcard has any actual *
[2014-06-18 22:16:59 -0400] Doc_X: kinda handy to put in some basic redundancy for retrieving files.
[2014-06-18 22:17:01 -0400] coderanger: Doc_X: Yeah, won't work on normal file providers though
[2014-06-18 22:17:21 -0400] Doc_X: would be nice to get that in more places. . . i should make that suggestion somewhere it will get noticed.
[2014-06-18 22:17:21 -0400] coderanger: sarkis: use knife node edit
[2014-06-18 22:17:30 -0400] whiteadam: coderanger: Ah, so the multi means they're actually "registered" the CA and wildcard means whatever.
[2014-06-18 22:17:35 -0400] coderanger: Doc_X: I'll clean the patch up some day, just don't have time
[2014-06-18 22:17:47 -0400] coderanger: whiteadam: Basically, its just varying levels of extortion
[2014-06-18 22:17:50 -0400] Doc_X: coderanger: i know the feeling.
[2014-06-18 22:17:58 -0400] whiteadam: Ash: Yeah. If he's a cop he has to tell us.
[2014-06-18 22:18:14 -0400] gkra: coderanger: so, chef-solo is going on 30min now.
[2014-06-18 22:18:18 -0400] Ash: it's the law
[2014-06-18 22:18:23 -0400] akahn: whiteadam: no I just think crude jokes that sexualize women aren't appropriate in open source communities
[2014-06-18 22:18:25 -0400] gkra: any suggestins for figuring out why?
[2014-06-18 22:18:55 -0400] Doc_X: akahn: s/in open source communities//
[2014-06-18 22:19:06 -0400] Doc_X: but that's just me.
[2014-06-18 22:19:07 -0400] whiteadam: akahn: Ah I see, I'll make sure to remove it from my joke list... Along with my DILF jokes.
[2014-06-18 22:19:07 -0400] coderanger: gkra: You can try running the yum dump scripts manually and see how big the output is
[2014-06-18 22:22:03 -0400] fr33jc: anyone here use chef in conjunction with a central configuration service?
[2014-06-18 22:22:17 -0400] whiteadam: fr33jc: Like which one...
[2014-06-18 22:22:39 -0400] fr33jc: well, homebrewed... i'm trying to make the argument for having all configs go through chef runs
[2014-06-18 22:23:10 -0400] gkra: coderanger: does chef only do the yum-dump after it's executed all the package resources for a chef-run, or what? 'cause i've never run into this before, and we've been running the same repos for 1.5 years.
[2014-06-18 22:23:13 -0400] coderanger: fr33jc: Chef is a central config service :)
[2014-06-18 22:23:15 -0400] fr33jc: and avoid yet another service containing some subset of app configs in it (e.g. things business folks might toggle through an admin console)
[2014-06-18 22:23:35 -0400] coderanger: gkra: Might just be a communications issue with one of the repos?
[2014-06-18 22:23:41 -0400] fr33jc: @coderanger: i agree
[2014-06-18 22:23:41 -0400] whiteadam: fr33jc: I know how you feel... You could push it under the guise of "testing"
[2014-06-18 22:23:44 -0400] gkra: nice
[2014-06-18 22:23:54 -0400] gkra: just ran out of ram
[2014-06-18 22:24:03 -0400] coderanger: gkra: The script is pretty simple, it just dumps the cache files
[2014-06-18 22:24:09 -0400] stormerider: is there a way to tell in a chef recipe if the node has previously had a successful run?
[2014-06-18 22:24:27 -0400] coderanger: gkra: https://github.com/opscode/chef/blob/master/lib/chef/provider/package/yum-dump.py
[2014-06-18 22:24:38 -0400] whiteadam: fr33jc: The first part of this book has some really solid arguements for configuration management with Chef and testing: http://shop.oreilly.com/product/0636920020042.do
[2014-06-18 22:24:47 -0400] fr33jc: whiteadam: i'm working against a culture that's used to "just enough config to find the db then store all config settings in db"
[2014-06-18 22:24:48 -0400] coderanger: stormerider: Use the API to check if the node on the server has ohai_time?
[2014-06-18 22:25:13 -0400] whiteadam: fr33jc: Amen. I am dealing with the same thing. ON is 100% and OFF is 0%.
[2014-06-18 22:25:20 -0400] whiteadam: fr33jc: Nothing in between
[2014-06-18 22:25:26 -0400] fr33jc: but there's no versioning, no audit trail
[2014-06-18 22:25:36 -0400] stormerider: coderanger: like "unless node.ohai_time.nil?"
[2014-06-18 22:25:37 -0400] whiteadam: "just make it work"
[2014-06-18 22:25:42 -0400] fr33jc: yeah - exactly
[2014-06-18 22:26:00 -0400] coderanger: stormerider: You would have to check the server though, locally it is always set
[2014-06-18 22:26:24 -0400] coderanger: stormerider: chef_server_rest.get_rest("nodes/#{node.name}")['ohai_time']
[2014-06-18 22:26:27 -0400] coderanger: or something like that
[2014-06-18 22:26:32 -0400] stormerider: coderanger: ah, blah. would you happen to have any examples along those lines?
[2014-06-18 22:26:42 -0400] stormerider: huh, ok, that's not too crazy.
[2014-06-18 22:26:45 -0400] coderanger: fr33jc: Thats fine, just have chef be the thing that puts the config in the DB
[2014-06-18 22:27:23 -0400] stormerider: basically i'm thinking of my AWS nodes, i'd like to be able to run omnibus_updater on them without having it barf up the bootstrap due to omnibus' chef-killer
[2014-06-18 22:27:46 -0400] stormerider: so, if they've succeeded a run previously, fair game, if not, then skip it
[2014-06-18 22:28:44 -0400] fr33jc: @coderanger: that's what i'm leaning towards.  i guess i'm looking for any downsides to that other than the usual "resistance to any change"
[2014-06-18 22:28:53 -0400] fr33jc: or challenges rather
[2014-06-18 22:29:18 -0400] coderanger: fr33jc: Anything a human does, Chef can automate, then you get the benefits of being driven by code and all that jazz
[2014-06-18 22:29:43 -0400] coderanger: fr33jc: As for challenges, chef certainly has one hell of a learning curve, tools are in various states of flux, etc
[2014-06-18 22:30:27 -0400] fr33jc: oh i'm familiar with chef, and we already have some of it in-house (as well as puppet and ansible... yeah...)
[2014-06-18 22:31:00 -0400] fr33jc: the problem is that there are some component owners here who believe that their config must come from mysql
[2014-06-18 22:31:20 -0400] coderanger: fr33jc: Then yeah, build an LWRP to inject config data into MySQL and move on
[2014-06-18 22:31:22 -0400] fr33jc: and if not that, then from some "RESTful config service"
[2014-06-18 22:31:52 -0400] jtimberman: i worked somewhere that stored all the nagios config in a databass.
[2014-06-18 22:31:54 -0400] coderanger: fr33jc: I mean you could explain to them that getting config data from a non-partition-tolerant system is a big cap on uptime
[2014-06-18 22:31:59 -0400] jtimberman: used a webui to make changes
[2014-06-18 22:32:03 -0400] whiteadam: jtimberman: I work at that somewhere now
[2014-06-18 22:32:11 -0400] coderanger: jtimberman: Technically you still do
[2014-06-18 22:32:18 -0400] jtimberman: coderanger: hah
[2014-06-18 22:32:29 -0400] jtimberman: specifically nagiosql project, w/ a mysql databass.
[2014-06-18 22:32:54 -0400] whiteadam: fr33jc: You're probably in the same deal I am. Which means you need to put together a full blown Chef demo and is perfect end to end before anyone will believe you.
[2014-06-18 22:33:05 -0400] fr33jc: yup - ok, now to find some other chan for some opposing viewpoints
[2014-06-18 22:33:13 -0400] whiteadam: Don't do it!
[2014-06-18 22:33:19 -0400] fr33jc: whiteadam: in some ways, yes
[2014-06-18 22:33:45 -0400] whiteadam: fr33jc: Most of the people I work with are too concerned with the how and not the what. That's why they suck.
[2014-06-18 22:34:08 -0400] fr33jc: yeah, and none of them care about the actual ops of the damned thing
[2014-06-18 22:34:23 -0400] whiteadam: just being buttholes for no reason
[2014-06-18 22:34:37 -0400] fr33jc: none of them feel the pain of having to maintain yet another homemade service that was never written to be HA
[2014-06-18 22:35:27 -0400] jmickle: soo much text
[2014-06-18 22:35:31 -0400] jmickle: to catch up on
[2014-06-18 22:35:41 -0400] jmickle: can i get the summary of this book
[2014-06-18 22:35:42 -0400] jmickle: :-P
[2014-06-18 22:36:19 -0400] whiteadam: Everyone hates users
[2014-06-18 22:36:22 -0400] whiteadam: the end
[2014-06-18 22:36:28 -0400] jmickle: but i fight for the user.....
[2014-06-18 22:36:42 -0400] whiteadam: then you are neither liked nor hated
[2014-06-18 22:36:45 -0400] whiteadam: :)
[2014-06-18 22:36:58 -0400] jmickle: :)
[2014-06-18 22:37:19 -0400] whiteadam: haha
[2014-06-18 22:51:56 -0400] JoshZ_: @jarsever test
[2014-06-18 22:52:50 -0400] jarsever: JoshZ_: echo
[2014-06-18 22:57:21 -0400] cwebber: and the final office hours for supermarket https://plus.google.com/hangouts/_/hoaevent/AP36tYfMrgUkawX6ANF-dNqvasEALwsrRYMq2vQ06XWtjQMtbIyFBQ?authuser=1&hl=en
[2014-06-18 22:57:40 -0400] cwebber: ugh, i feel like i have spammed the room with links today
[2014-06-18 22:58:21 -0400] matti: ;]
[2014-06-18 23:00:13 -0400] gkra: coderanger: # ls -lh /tmp/yum.json
[2014-06-18 23:00:14 -0400] gkra: -rw-rw-r-- 1 vagrant vagrant 136M Jun 18 22:51 /tmp/yum.json
[2014-06-18 23:00:32 -0400] coderanger: gkra: Sounds like a lot ot me :-(
[2014-06-18 23:00:36 -0400] gkra: so thats what ran chef-solo out of memory...
[2014-06-18 23:02:23 -0400] gkra: "why now" is rthe question
[2014-06-18 23:10:24 -0400] jmickle: hmm
[2014-06-18 23:10:31 -0400] jmickle: anyone had chef11 crash when trying to login to the webui
[2014-06-18 23:10:33 -0400] jmickle: after first install?
[2014-06-18 23:10:53 -0400] gkra: coderanger: # ls -l /tmp/yum.json
[2014-06-18 23:10:54 -0400] gkra: -rw-rw-r-- 1 root root 123M Jun 18 23:08 /tmp/yum.json
[2014-06-18 23:11:15 -0400] gkra: that's on a VM running in the datacenter just fine.
[2014-06-18 23:18:14 -0400] gkra: wonder if it's just related to my link speed...
[2014-06-18 23:27:04 -0400] jmickle: hmm
[2014-06-18 23:27:12 -0400] jmickle: appears that the chef 11.1 installer is borked
[2014-06-18 23:40:17 -0400] shirokyojin: in a recipe for samba a temlate has the line   workgroup = <%= node["samba"]["workgroup"] %>
[2014-06-18 23:41:13 -0400] shirokyojin: im familiar with using node info from ohai such as node['fqdn'] or node['hostname'], but what is the quatationed "samba" and "workgroup" defining?
[2014-06-18 23:44:23 -0400] robbkidd: shirokyojin: That node attribute is being set by default in the samba cookbook or overridden in any number of places, but most probably an environment.
[2014-06-18 23:44:47 -0400] robbkidd: Are you using this cookbook for samba https://github.com/jtimberman/samba-cookbook ?
[2014-06-18 23:45:15 -0400] shirokyojin: robbkidd: thanks. this is the template im looking at: https://github.com/cookbooks/oc-samba/blob/master/templates/default/smb.conf.erb
[2014-06-18 23:45:36 -0400] shirokyojin: it looks like those variables are being set in the attributes file
[2014-06-18 23:45:50 -0400] robbkidd: shirokyojin: OK. Then this is where it default is set: https://github.com/cookbooks/oc-samba/blob/master/attributes/default.rb#L19
[2014-06-18 23:46:46 -0400] shirokyojin: in the template it starts with [global]. what is that doing?
[2014-06-18 23:47:01 -0400] shirokyojin: just specifying that these are global variables being set?
[2014-06-18 23:47:03 -0400] robbkidd: That's starting the text of the SAMBA config file.
[2014-06-18 23:47:08 -0400] shirokyojin: ahh, i see
[2014-06-18 23:48:14 -0400] robbkidd: shirokyojin: Are you familiar with the information here http://docs.opscode.com/chef_overview_attributes.html ? The many ways node attributes can be set and overridden.
[2014-06-18 23:49:23 -0400] jmickle: anyone had problems with chef-webui redirecting back to login page?
[2014-06-18 23:49:33 -0400] shirokyojin: no, that's exactly the info I was looking for. thanks a lot robb
[2014-06-18 23:49:45 -0400] robbkidd: One can customize the value for `node["samba"]["workgroup"]` by overriding it in, say, an environment for your network.
[2014-06-18 23:49:54 -0400] robbkidd: shirokyojin: You're welcome!
[2014-06-18 23:56:59 -0400] shirokyojin: and then defined var_hostname in the attributes file?
[2014-06-18 23:57:03 -0400] shirokyojin: oops

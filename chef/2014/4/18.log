[2014-04-18 01:06:13 -0400] bean: ChefConf was fun!
[2014-04-18 02:00:48 -0400] gowen: Hey all!  I have a question as far as a recipe
[2014-04-18 02:01:23 -0400] gowen: can I do something like if node[:hostname] = ["web01", web02"] ...
[2014-04-18 02:01:33 -0400] gowen: in a recipe
[2014-04-18 02:02:12 -0400] gowen: I guess i am just not sure on the right syntax
[2014-04-18 02:02:57 -0400] pureluck: gowen: what do you want to achieve?
[2014-04-18 02:03:14 -0400] moted: if %(web01 web02).include? node[hostname]
[2014-04-18 02:03:56 -0400] gowen: pureluck: what I am trying to do is set a cronjob, but I only want it to run on half my nodes at midnight, and then the rest at noon
[2014-04-18 02:04:21 -0400] moted: actually, if %w(web01 web02).include? node[hostname]
[2014-04-18 02:04:23 -0400] pureluck: gowen: moted provided with an answer that works
[2014-04-18 02:04:41 -0400] pureluck: %() would work as well, I guess
[2014-04-18 02:04:46 -0400] moted: really?
[2014-04-18 02:04:48 -0400] pureluck: string has the include? method
[2014-04-18 02:04:50 -0400] gowen: moted, pureluck: thank you both!
[2014-04-18 02:05:08 -0400] moted: %w is the literal syntax for an array of strings
[2014-04-18 02:05:19 -0400] pureluck: true, %() creates you a string
[2014-04-18 02:05:30 -0400] pureluck: so %(web1 web2) => "web1 web2"
[2014-04-18 02:05:37 -0400] moted: yeah, that makes sense
[2014-04-18 02:05:49 -0400] pureluck: and %w(web1 web2) => ["web1", "web2"]
[2014-04-18 02:06:04 -0400] pureluck: so %w might be less prone to fail, but %() should work as well
[2014-04-18 02:06:06 -0400] pureluck: :D
[2014-04-18 02:06:36 -0400] gowen: pureluck,moted:  you guys are smart!  thanks!!  :)
[2014-04-18 02:07:01 -0400] pureluck: well don't thank me, thank moted
[2014-04-18 02:07:24 -0400] moted: gowen: np
[2014-04-18 02:13:15 -0400] pcarrier_: hi! we're getting into some pretty big trouble with https://tickets.opscode.com/browse/OHAI-541 ; could be a change on the AWS side
[2014-04-18 02:13:29 -0400] pcarrier_: has anybody been experiencing any issues with Ohai aws_metadata.rb lately?
[2014-04-18 02:36:00 -0400] jtran: anyone know how i can search chef for which nodes have an ip '172.29.129.75 on any interface
[2014-04-18 02:55:53 -0400] meth: is there a way to run arbitrary code on the cli like `ruby -e` works?
[2014-04-18 05:32:51 -0400] rpad: Does anyone have chef-zero running with vagrant 1.5? I can't seem to get it to play nice
[2014-04-18 08:17:36 -0400] josa2: I have a question for the chef experts. I have a data bag with a lot of apache environment variables. Can I make that dynamic and pass them to web_app? I can't seem to get it to pass a hash from a data_bag_item into @params..is it even possible?
[2014-04-18 08:38:01 -0400] nshbrown: good evening chefies
[2014-04-18 09:29:06 -0400] ocholetras: http://shop.oreilly.com/category/deals/chef.do?code=WKCHEF&imm_mid=0bad93&cmp=em-na-books-videos-lp-owo_chef_direct_efl
[2014-04-18 09:29:30 -0400] ocholetras: Seems some new books are being cooked
[2014-04-18 09:29:31 -0400] ocholetras: ^^
[2014-04-18 12:04:58 -0400] pbergsmann: hi @all! Im trying to use the database cookbook on a server which uses MariaDB instead of MySQL. Gem installation stops quite early and I think it doesnt find the client-libs (which are installed)Could this be a problem with the chef omnibus installer? or should I ask the ruby guys? :)
[2014-04-18 12:19:48 -0400] nobody18188181: is there a way to get around the compilation of a recipe? I have a recipe that includes a sqlite database but because of compilation it never gets around to deploying the database file first
[2014-04-18 12:32:45 -0400] Ramkumar: Hi, I am new to chef, working on automating wordpress installation via chef-solo. I have completed apache2,php,mysql and tested the php site - looks good. wanted to proceed with the database creation. here I face issue.
[2014-04-18 12:33:11 -0400] Ramkumar: I installed database recipe, and which gives error saying : Cookbook mysql-chef_gem not found. If you're loading mysql-chef_gem from another cookbook, make sure you configure the dependency in your metadata
[2014-04-18 12:33:54 -0400] Ramkumar: I just wanted to know - how to check the mysql_chef_gem os already installed or not.
[2014-04-18 13:00:08 -0400] nobody18188181: Ok, solved my issue by using notified + action :nothing
[2014-04-18 13:11:30 -0400] nobody18188181: is it possible to have a global variable that exists between chef resource blocks?
[2014-04-18 13:12:16 -0400] Ramkumar: anybody there to help on my issue::
[2014-04-18 13:12:19 -0400] Ramkumar: ERROR: Undefined method or attribute `action' on `node'
[2014-04-18 13:12:22 -0400] jbz: nobody18188181: Sure, if you put the variable in ruby outside a resource, it will be available outside their context.  You have to be careful, though, about when it gets evaluated/executed
[2014-04-18 13:12:34 -0400] Ramkumar: when trying to create database using database recipe
[2014-04-18 13:12:54 -0400] nobody18188181: jbz: the variable gets populated during recipe execution
[2014-04-18 13:12:57 -0400] jbz: nobody18188181: If you evaluate something to set the variable, it will get evaluated during the compile phase, before any of the resources execute, so it can't rely on values from inside resource code.
[2014-04-18 13:13:25 -0400] nobody18188181: jbz: that's why it's always nil then... So how to get around it?
[2014-04-18 13:13:51 -0400] jbz: nobody18188181: What are you trying to do?
[2014-04-18 13:13:59 -0400] jbz: Ramkumar: Do you have a gist?
[2014-04-18 13:14:08 -0400] Ramkumar: yes
[2014-04-18 13:14:08 -0400] nobody18188181: jbz: I'm reading data from a sqlite database during recipe execution
[2014-04-18 13:15:05 -0400] jbz: nobody18188181: where are you reading the data?  Outside a resource, or inside one?
[2014-04-18 13:15:35 -0400] nobody18188181: inside ruby_block resource
[2014-04-18 13:15:55 -0400] Ramkumar: jbz: https://gist.github.com/ramkumarit2007/11043715 please see here
[2014-04-18 13:16:02 -0400] Ramkumar: the error that I see
[2014-04-18 13:16:05 -0400] jbz: nobody18188181: yep, so, that won't happen until later.  Can you read the data outside the resource?  If so, it'll happen at compile time as well
[2014-04-18 13:17:43 -0400] nobody18188181: jbz: because the database is sent during the recipe I had to use action :nothing and then trigger the code to read the database because of compilation
[2014-04-18 13:19:14 -0400] jbz: Ramkumar: Did you put that code in, or is that from the build-essential cookbook?  I've never tried to use an array loop to declare actions for a resource
[2014-04-18 13:19:45 -0400] Ramkumar: jbz: That comes from build-essential cookbook from community
[2014-04-18 13:20:25 -0400] jbz: Ramkumar: yeh hm
[2014-04-18 13:21:22 -0400] Ramkumar: jbz: Any thoughts - I stuck on this for last two days.  I could not even get much info when I google for the same.
[2014-04-18 13:22:14 -0400] jbz: nobody18188181: I think the problem is that the order of execution for the resources is not entirely deterministic, so trying to get that info inside a resource is just a bad idea :-/
[2014-04-18 13:22:41 -0400] jbz: nobody18188181: It sounds to me like you need to find a way to get that data into a resource or data bag so it's available at run start
[2014-04-18 13:24:56 -0400] nobody18188181: jbz: While that does work it doesn't allow me to automate user management ;) . Is there a way to use a local variable from a ruby_block in another resource?
[2014-04-18 13:25:19 -0400] jbz: nobody18188181: you can try having the ruby_block set an attribute
[2014-04-18 13:25:33 -0400] jbz: and reading it elsewhere, but if the order isn't as expected that of course won't work either
[2014-04-18 13:25:41 -0400] jbz: you can have the second resource be triggered by the first
[2014-04-18 13:25:44 -0400] jbz: notify/subscribe
[2014-04-18 13:25:51 -0400] jbz: that will guarantee the order
[2014-04-18 13:25:53 -0400] nobody18188181: jbz: i have the order down by using notifies
[2014-04-18 13:25:56 -0400] jbz: oh ok
[2014-04-18 13:26:05 -0400] nobody18188181: and ruby_block us action :nothing
[2014-04-18 13:26:08 -0400] nobody18188181: is*
[2014-04-18 13:26:16 -0400] jbz: then use node.set to stuff the result in an attribute
[2014-04-18 13:26:36 -0400] jbz: Ramkumar: I'm sorry, I don't know what's going on there. :-(
[2014-04-18 13:26:45 -0400] nobody18188181: do you have the direct link for the docs on it?
[2014-04-18 13:26:58 -0400] nobody18188181: think i found it
[2014-04-18 13:27:15 -0400] Ramkumar: jbz: np, this error comes when it tries to execute my recipe line: include_recipe "mysql::ruby"
[2014-04-18 13:28:44 -0400] jbz: nobody18188181: syntax is node.default["key"] = "value", node.set["key"] = "value" or node.override["key"] = "value"
[2014-04-18 13:28:54 -0400] jbz: for default, normal or override precedence
[2014-04-18 13:40:56 -0400] JoshL: Is there support or documentation anywhere for running open-source chef server with the system nginx (instead of the embedded one)?
[2014-04-18 13:40:59 -0400] Ramkumar: jbz: Hi, I just uncommented the root and it just proceeded.
[2014-04-18 13:41:52 -0400] jbz: Ramkumar: huh, odd
[2014-04-18 13:41:53 -0400] jbz: thanks
[2014-04-18 13:42:43 -0400] Ramkumar: jbz: I meant I just commented the mysql ruby recipe -=====> include_recipe "build
[2014-04-18 13:42:49 -0400] Ramkumar: _essential"
[2014-04-18 13:43:42 -0400] nobody18188181: jbz: that did it; thanks
[2014-04-18 13:43:49 -0400] jbz: nobody18188181: sweet
[2014-04-18 13:48:25 -0400] pbergsmann: so is anyone using the database cookbook with mariadb?
[2014-04-18 13:59:21 -0400] Hopper: Hi All, Chef newbie here with a question about definitions.  Was wondering if anyone could spare a minute?
[2014-04-18 14:02:54 -0400] gchristensen: so the trick, Hopper, is to not ask to ask. but to just straight-up ask.
[2014-04-18 14:04:53 -0400] Hopper: If I have a bunch of app cookbooks that all need to create a database; create a user; and grant privledges.  Should that go in a mysql-app-config cookbook in a definition as a macro or somewhere else?
[2014-04-18 14:09:14 -0400] pbergsmann: Hopper: I usually use a cookbook which has a resource and a provider which take over the task to add the user, db,
[2014-04-18 14:11:46 -0400] Hopper: pbergsmann: Thanks.  I was hoping to be able to do something a little more abstracted like this -
[2014-04-18 14:11:46 -0400] Hopper: mysql_setup_add_db do
[2014-04-18 14:11:50 -0400] Hopper:   db_host         node['wego']['site']['mysql']['host']
[2014-04-18 14:11:54 -0400] Hopper:   app_db_name     node['wego']['site']['mysql']['db']
[2014-04-18 14:11:58 -0400] Hopper: etc
[2014-04-18 14:12:36 -0400] Hopper: then have a definition like: mysql_setup_app_db Definition  define :mysql_setup_app_db,   :db_host => nil,...
[2014-04-18 14:12:55 -0400] Hopper: but was wondering if there's a better practice for abstracting this
[2014-04-18 14:15:12 -0400] pbergsmann: Hopper: If I understand what you mean I would say that approach is OK :)
[2014-04-18 14:15:44 -0400] Hopper: pbergsmann: Awesome, thanks for your help!
[2014-04-18 14:18:31 -0400] Ramkumar: jbz: that removal of build essential recipe breaks something else. need to find the cause?
[2014-04-18 14:45:05 -0400] pbergsmann: ok, i found out that my mysql gem does not build because of the different openssl versions between omnibus chef and my debian wheezyis there a way i could tell the gem install to use my system openssl?
[2014-04-18 15:15:07 -0400] a13x212: is there a way to load all the contents of databag that can you manipulate?
[2014-04-18 15:16:05 -0400] nicgrayson: a13x212: you want to load it into a json object and change it?
[2014-04-18 15:17:52 -0400] a13x212: nicgrayson, looking for way to load a databag and pick out specific items out of it
[2014-04-18 15:18:52 -0400] bmhatfield: a13x212:That's the most common use pattern for a databag. What are you doing now that makes you feel like that's not happening?
[2014-04-18 15:19:23 -0400] nicgrayson: a13x212: http://docs.opscode.com/dsl_recipe_method_data_bag.html
[2014-04-18 15:19:41 -0400] nicgrayson: tl;dr my_bag = data_bag_item("apps", "my_app")
[2014-04-18 15:20:22 -0400] bmhatfield: And what does that not do that you'd like it to do? Are you possibly asking how to load the top level "apps" databag with all items?
[2014-04-18 15:20:40 -0400] bmhatfield: If so, you want the data_bag method instead of the data_bag_item method: http://docs.opscode.com/essentials_data_bags.html#load-with-recipe-dsl
[2014-04-18 15:21:23 -0400] bmhatfield: (then you'd have to iterate over the items)
[2014-04-18 15:31:27 -0400] asdfjh2k3jh453: hi, using AWS OpsWorks. Added deployment recipe from gitgub as phpapp.appsetup - three error, "is not a valid Chef recipe name"
[2014-04-18 15:31:36 -0400] asdfjh2k3jh453: Any ideas?
[2014-04-18 15:32:25 -0400] Er00: Try using _ rather than .
[2014-04-18 15:32:28 -0400] asdfjh2k3jh453: the github directory structure is: opsworks-example-cookbooks / phpapp / recipes / appsetup.rb
[2014-04-18 15:32:33 -0400] Er00: oh
[2014-04-18 15:32:48 -0400] Er00: Is there any default.rb in there?
[2014-04-18 15:32:55 -0400] Er00: If not maybe just try copying appsetup.rb to default.rb
[2014-04-18 15:33:04 -0400] Er00: it's probably looking for  default.rb and not finding one
[2014-04-18 15:33:53 -0400] asdfjh2k3jh453: no default. I'm following a AWS (posted on Amazon's channel as a how-to) how-to tutorial
[2014-04-18 15:33:58 -0400] asdfjh2k3jh453: no default.rb
[2014-04-18 15:34:12 -0400] Er00: Try copying it to default.rb and see if that helps
[2014-04-18 15:34:15 -0400] Er00: it might not but worth a try
[2014-04-18 15:34:37 -0400] asdfjh2k3jh453: how do I copy someone else's github to be default?
[2014-04-18 15:35:06 -0400] Er00: You've downloadd it from github right? So you can just edit it locally
[2014-04-18 15:35:09 -0400] asdfjh2k3jh453: r u saying use the name default and it will pick it up
[2014-04-18 15:35:26 -0400] asdfjh2k3jh453: no, not clones/downloaded, using off github site
[2014-04-18 15:35:33 -0400] asdfjh2k3jh453: opsworks is on AWS
[2014-04-18 15:35:42 -0400] Er00: Oh, wait, I see what you've done, you need to reference it as phpapp:appsetup
[2014-04-18 15:35:46 -0400] Er00: not phpapp.appsetup
[2014-04-18 15:35:51 -0400] asdfjh2k3jh453: tried that
[2014-04-18 15:35:59 -0400] Er00: then I have no idea I'm afraid
[2014-04-18 15:36:07 -0400] Er00: I havent used the opsworks stuff
[2014-04-18 15:36:19 -0400] asdfjh2k3jh453: tried phpapp:appsetup = same error
[2014-04-18 15:36:43 -0400] a13x212: nicgrayson, bmhatfield: i have databag that looks like http://pastebin.com/b87UY2CF
[2014-04-18 15:37:34 -0400] cob: asdf_: phpapp::appsetup <-- two colons
[2014-04-18 15:37:41 -0400] bean: a13x212: and whats wrong with that databag?
[2014-04-18 15:38:03 -0400] cob: asdfjh2k3jh453: on your stack settings
[2014-04-18 15:38:10 -0400] a13x212: i'm trying to loop through the databag and get the items in dev and web
[2014-04-18 15:38:17 -0400] a13x212: sorry gen and web
[2014-04-18 15:38:37 -0400] asdfjh2k3jh453: AHHH - just found out it's phpapp::appsetup - double colon
[2014-04-18 15:38:43 -0400] asdfjh2k3jh453: thanks
[2014-04-18 15:38:47 -0400] asdfjh2k3jh453: ltr gtr
[2014-04-18 15:38:52 -0400] cob: stick around
[2014-04-18 15:38:56 -0400] cob: moron
[2014-04-18 15:39:21 -0400] bean: be nice cob
[2014-04-18 15:39:27 -0400] cob: sorry... i hate it when ppl do that...
[2014-04-18 15:39:46 -0400] bean: a13x212: okay so how do you just not know how to do that or are you getting an error?
[2014-04-18 15:41:17 -0400] notromda: Data bag schema question.   { "a": {"k1": "v1", "k2": "v2"}, ""b": {"k1": "v3", "k2": "v4"}}  VS.  [{"id": "a", "k1": "v1", "k2": "v2"}, {"id": "b", "k1": "v3", "k2": "v4"}]     ???
[2014-04-18 15:41:23 -0400] a13x212: here is what i have so far, http://pastebin.com/mJDeaMUD
[2014-04-18 15:41:48 -0400] notromda: I looked at some json schema tools, and it seems like they all want the second one.
[2014-04-18 15:42:15 -0400] notromda: but the first makes sense to me to prevent dups.
[2014-04-18 15:42:29 -0400] a13x212: how do i iterate through gen, web in each data bag?
[2014-04-18 15:44:59 -0400] cob: data_bag('gen').each do |item| data_bag_item('gen', item) end
[2014-04-18 15:45:15 -0400] bean: a13x212: hg_databag['gen'].each, etc.
[2014-04-18 15:45:42 -0400] bean: i think
[2014-04-18 15:46:17 -0400] bean: btw, chef conf was fun, folks that didnt go.
[2014-04-18 15:46:40 -0400] a13x212: hmm gen isn't a databag, it is a item in the databag dev
[2014-04-18 15:47:24 -0400] nobody18188181: can you do multiple notifies in a resource? And if so does one block execution until it finishes?
[2014-04-18 15:47:55 -0400] bean: a13x212: oh, so, the puts hg_databag puts the structure that you showed me in the first gist?
[2014-04-18 15:48:05 -0400] bean: err pastebin
[2014-04-18 15:49:03 -0400] cob: holy crap! google already indexed that gist
[2014-04-18 15:49:56 -0400] bean: google is fast.
[2014-04-18 15:52:16 -0400] bean: oh, I know why I'm confused. I never ever use databags with search.
[2014-04-18 15:52:19 -0400] a13x212: sorry i'm probably not explaining it correctly
[2014-04-18 15:52:50 -0400] a13x212: data_bag('gen').each do |item| data_bag_item('gen', item) end - gives me the databag items
[2014-04-18 15:52:58 -0400] a13x212: but not the data from each databag
[2014-04-18 15:54:34 -0400] notromda: bean:  it was very high pace.  Lots of coffee.   I'm heading to SFO shortly.
[2014-04-18 15:54:57 -0400] bean: I was glad the "fucking delightful" was toned down the 2nd day
[2014-04-18 15:55:20 -0400] notromda: yeah, that got old about the 2nd time they said it
[2014-04-18 15:55:48 -0400] notromda: I had to wear earplugs when they played music.
[2014-04-18 15:55:56 -0400] shadylog: sfo ?
[2014-04-18 15:55:58 -0400] bean: Yeah, can't say I'm a huge metal fan.
[2014-04-18 15:56:08 -0400] bean: San Francisco Int'l
[2014-04-18 15:56:40 -0400] notromda: SFO:  airline code for ^
[2014-04-18 15:56:46 -0400] bean: a13x212: do an inspect on the databag, I am curious as to what this is attempting to accomplish though
[2014-04-18 15:57:22 -0400] bean: its just a hash :)
[2014-04-18 15:57:47 -0400] notromda: I felt like such a small fish in a large ocean.   First lunch table I sat at had people from facebook, amazon, rackspace...
[2014-04-18 15:58:42 -0400] bean: Where do you work, notromda
[2014-04-18 15:59:42 -0400] a13x212: bean, im trying to create groups of servers from the data bags, for example: all dev web servers, all prod web servers
[2014-04-18 15:59:55 -0400] bean: for what purpose, a13x212
[2014-04-18 15:59:58 -0400] bean: just wondering
[2014-04-18 16:01:14 -0400] notromda: I'm actually employed here in SF.   Visited HQ while I was here but I live in KS
[2014-04-18 16:01:26 -0400] a13x212: for different things, like user access and monitoring
[2014-04-18 16:01:54 -0400] bean: a13x212: sounds to me like you're re-inventing the wheel then :)
[2014-04-18 16:02:06 -0400] bean: what do you use for monitoring
[2014-04-18 16:02:35 -0400] a13x212: sensu
[2014-04-18 16:03:09 -0400] notromda: Time to shut down and find breakfast, and get on BART to SFO.
[2014-04-18 16:03:19 -0400] a13x212: bean, so how to tell chef, give developres access to only dev servers?
[2014-04-18 16:03:30 -0400] bean: a13x212: are they in different environments?
[2014-04-18 16:03:47 -0400] a13x212: no
[2014-04-18 16:04:27 -0400] bean: ah, that'd likely help... its just all based on the node name?
[2014-04-18 16:04:41 -0400] bean: or is it an arbitrary construct you've come up with?
[2014-04-18 16:04:50 -0400] shadylog: im actually a dutch student, and wondering if SF has some job oppertunities.
[2014-04-18 16:05:09 -0400] a13x212: arbitrary construct
[2014-04-18 16:06:16 -0400] bean: Ah, I see then. You might consider having your dev / prod servers in separate environments, and then granting access based on environment
[2014-04-18 16:06:22 -0400] bean: a databag like that seems like hell to maintain
[2014-04-18 16:06:41 -0400] bean: especially in a world of spinning up and shutting down servers as much as some of us do.
[2014-04-18 16:07:18 -0400] bean: shadylog: There are certainly job opportunities, I'd say. There was a whole "hiring" whiteboard at ChefConf.
[2014-04-18 16:07:34 -0400] a13x212: i can see that but still doesn't solve, give memcache servers the memcache checks from sensu
[2014-04-18 16:08:27 -0400] LuHe: hello, i'm trying to deploy an django application on amazon opsworks using application_python with this cookbook: http://pastebin.com/L2WSuDAg
[2014-04-18 16:08:27 -0400] a13x212: so still need to group them some how
[2014-04-18 16:08:34 -0400] LuHe: during the setup i get the following error: http://pastebin.com/hVmAXEfe ( Error executing action `enable` on resource 'supervisor_service[splots]' )
[2014-04-18 16:08:42 -0400] LuHe: but this happens even *before* the repository referenced in the cookbook is checked out
[2014-04-18 16:08:48 -0400] LuHe: could anybody tell me what i am doing wrong?
[2014-04-18 16:08:59 -0400] LuHe: the application_python cookbook is very odd.. the supervisor service is enabled in application / :before_deploy , but the repository is checked out in application / run_deploy
[2014-04-18 16:09:15 -0400] LuHe: how could this even work?
[2014-04-18 16:10:59 -0400] bean: as far as I understand it, a13x212, you'd define the checks in the cookbooks that run on the server, or in the node cookbook.
[2014-04-18 16:11:56 -0400] bean: https://github.com/sensu/sensu-chef and https://github.com/portertech/chef-monitor would be worth a read. The 2nd one is an example cookbook.
[2014-04-18 16:14:11 -0400] a13x212: bean, thanks i read through those already and i have my checks running
[2014-04-18 16:14:56 -0400] bean: Ah, do you see how having a "my-node::monitor" recipe would be beneficial though? Rather than worrying about databags, etc, it just always monitors if that recipe is included.
[2014-04-18 16:15:55 -0400] a13x212: to simplify the question, how do i express this in chef
[2014-04-18 16:16:26 -0400] a13x212: if server is a memcache server, do X and X
[2014-04-18 16:16:35 -0400] a13x212: if server is a webserver server, do X and X
[2014-04-18 16:16:44 -0400] bean: do you use node-cookbooks?
[2014-04-18 16:17:01 -0400] bean: as in something like "node-memcache" for memcache servers?
[2014-04-18 16:17:06 -0400] bean: or do you just run the memcache recipe on the server
[2014-04-18 16:17:48 -0400] a13x212: what are node-cookbooks?
[2014-04-18 16:17:50 -0400] bean: something like "node-memcache" would have a default recipe that tells a memcache node what recipes to run.
[2014-04-18 16:18:04 -0400] bean: its a wrapper cookbook
[2014-04-18 16:18:29 -0400] bean: so in your run list you have something like "node-memcache" rather than "memcache, users, my_checks" etc
[2014-04-18 16:18:29 -0400] a13x212: actually chef tags would do what I want but haven't found much info on it
[2014-04-18 16:20:02 -0400] bean: I've never used tags.
[2014-04-18 16:20:30 -0400] bean: wrapper cookbooks / node cookbooks keep your runlist nice and short.
[2014-04-18 16:20:46 -0400] bean: as well as make the changes easier to version and roll out between environments
[2014-04-18 16:22:05 -0400] a13x212: seens like another layer of cookbooks to manage
[2014-04-18 16:22:26 -0400] jidar: it is, but it makes sense once you start determing how you're using chef
[2014-04-18 16:22:32 -0400] bean: ^
[2014-04-18 16:23:03 -0400] jidar: if it doesn't make sense now, that's fine, don't do it, but it will eventually because you'll want to pull down the newest apt/yum cookbook, and realize that you're changes arn't in it, etc.
[2014-04-18 16:23:32 -0400] a13x212: i use wrapper cookbooks now
[2014-04-18 16:23:35 -0400] jidar: berkshelf also makes this make a bit of sense now
[2014-04-18 16:24:25 -0400] bean: A lot of it comes down to the berkshelf workflow, and causing yourself to think of chef recipes as things that provision machines, not services.
[2014-04-18 16:25:11 -0400] a13x212: i would love to use berkshelf but i have tons of questions about it
[2014-04-18 16:25:32 -0400] bean: oh man
[2014-04-18 16:25:37 -0400] a13x212: i know
[2014-04-18 16:25:38 -0400] a13x212: lol
[2014-04-18 16:25:38 -0400] bean: have you watched "The Berkshelf Way"
[2014-04-18 16:25:47 -0400] a13x212: yea
[2014-04-18 16:26:05 -0400] bean: thats a good start.
[2014-04-18 16:26:13 -0400] a13x212: are you guys using  berkshelf-3?
[2014-04-18 16:26:22 -0400] jidar: I'd start with a clean repo, and start doing it with berkshelf and see if it makes sense that way
[2014-04-18 16:26:25 -0400] bean: not yet, we intend to switch to it soon though I think.
[2014-04-18 16:26:37 -0400] jidar: I rolled over my windows box to berks3, haven't gotten a chance to do it elsewhere
[2014-04-18 16:26:41 -0400] a13x212: i tried  berkshelf-3 but seems to have a lot of bugs
[2014-04-18 16:27:02 -0400] jidar: it's still rc1 or rc3 iirc
[2014-04-18 16:27:09 -0400] bean: naw, its released now afaik
[2014-04-18 16:27:19 -0400] jidar:  | Latest: Berkshelf 3.0.0.rc3
[2014-04-18 16:27:24 -0400] jidar: from the channel
[2014-04-18 16:27:56 -0400] jidar: you don't have to use it from bundler though, as the default gem install uses it now
[2014-04-18 16:28:05 -0400] jidar: but its still a rc
[2014-04-18 16:28:13 -0400] bean: they pushed 3.0.1 to github 3 days ago
[2014-04-18 16:28:28 -0400] bean: I'd wager the channel hasn't been updated because both jamie and seth are at chefconf
[2014-04-18 16:28:53 -0400] jidar: hahah, I just checked my local gems, you are correct
[2014-04-18 16:29:27 -0400] a13x212: i think i might go with tags for now until i figure a better solution out
[2014-04-18 16:29:52 -0400] a13x212: if tagged?("dev") do X and X
[2014-04-18 16:30:39 -0400] bean: yeah, that would work.
[2014-04-18 16:31:14 -0400] bean: having your prod and dev envs in the same chef environment is just asking for trouble.
[2014-04-18 16:32:01 -0400] bean: how does one test out big cookbook changes (outside of test kitchen) on staging without having the version also getting pushed to prod :)
[2014-04-18 16:33:14 -0400] a13x212: thanks bean, i'll start reading up on that
[2014-04-18 16:37:47 -0400] nobody18188181: How can I call Chef::Provider::User:Useradd directly inside a ruby_block?
[2014-04-18 16:39:58 -0400] bean: nobody18188181: Why not just use a user resource?
[2014-04-18 16:40:10 -0400] nobody18188181: bean: cant inside ruby_block
[2014-04-18 16:40:46 -0400] CPS: nobody18188181: does ::Chef::Provider... work?
[2014-04-18 16:41:05 -0400] bean: nobody18188181: I'd think it would work based on the example I see on the ruby_block provider page
[2014-04-18 16:41:21 -0400] bean: http://docs.opscode.com/resource_ruby_block.html the "Stash a file in a data bag" part
[2014-04-18 16:41:41 -0400] bean: or the Update the /etc/hosts file part
[2014-04-18 16:42:17 -0400] nobody18188181: bean: those examples are not using the resource directly; they're using Chef::DataBagItem.new and Chef::Util::FileEdit.new("/etc/hosts")
[2014-04-18 16:42:37 -0400] bean: Right but does that not infer that you could directly use it as well?
[2014-04-18 16:42:48 -0400] nobody18188181: bean: i'm asking how
[2014-04-18 16:43:04 -0400] bean: are you just attempting to create a user inside a ruby block?
[2014-04-18 16:43:14 -0400] nobody18188181: bean: I cant figure out how to use Chef::Provider::User:Useradd directly inside a ruby_block
[2014-04-18 16:43:49 -0400] nobody18188181: bean: and yes, I also have to set their password, etc
[2014-04-18 16:44:01 -0400] nobody18188181: the rubydoc doesn't have any examples
[2014-04-18 16:45:36 -0400] dadleyy: Hey guys, is there a way to retrieve the created resources during a chef-client run from the node object?
[2014-04-18 16:45:51 -0400] bean: Yeah, nobody18188181, why are you trying to create it within a ruby block, I guess.
[2014-04-18 16:45:57 -0400] bean: Are you generating passwords or something?
[2014-04-18 16:46:05 -0400] nobody18188181: bean: yea
[2014-04-18 16:47:38 -0400] bean: or demanding the use of SSH keys
[2014-04-18 16:51:32 -0400] bean: does it
[2014-04-18 16:55:59 -0400] bean: there was some "secure_password" functionality
[2014-04-18 16:56:05 -0400] bean: but I forget where it comes from
[2014-04-18 16:57:45 -0400] bean: nobody18188181: https://github.com/opscode-cookbooks/openssl give that a look
[2014-04-18 16:58:27 -0400] bean: gotta board a flight
[2014-04-18 17:07:19 -0400] kbarry: secure_password is from openssl cookbook linked above :)
[2014-04-18 17:07:36 -0400] kbarry: OK<
[2014-04-18 17:08:02 -0400] kbarry: I just told me Lead that its possible to set run-lists per-environment.
[2014-04-18 17:08:18 -0400] kbarry: Which is compeltely true using the env-run-list in the role file.
[2014-04-18 17:08:39 -0400] kbarry: BUT i jsut noticed on the help page that there is a warning and that its not recommended because it can be difficult to maintain.
[2014-04-18 17:08:41 -0400] kbarry: question,
[2014-04-18 17:08:58 -0400] kbarry: Can I have a recipe to be run defined in an environment file?
[2014-04-18 17:09:16 -0400] kbarry: as in, there is a single recipe, and if a node is in our Prod environment, i want that recipe run,
[2014-04-18 17:09:26 -0400] kbarry: if the node is in any other environment, i don't want it run.
[2014-04-18 17:10:06 -0400] kbarry: looking for a simple way to handle this, and if possible avoid using the now not appealing env-run-list
[2014-04-18 17:11:37 -0400] kbarry: anyone?
[2014-04-18 17:12:45 -0400] kbarry: one idea I have is to have a recipe that looks at the environment and if the environment is "prod" it include_recipe" the one I want, anf if the environment is not "prod" don'tinclude it.
[2014-04-18 17:12:55 -0400] maplebed: you can certainly test for the environment within the recipe.
[2014-04-18 17:13:16 -0400] kbarry: is there such as thing as using "include recipe" in the environmemnt file?
[2014-04-18 17:13:26 -0400] maplebed: chef-sugar even has a shortcut for it: https://github.com/sethvargo/chef-sugar/blob/master/lib/chef/sugar/node.rb#L37
[2014-04-18 17:16:20 -0400] kbarry: i could set an attribute in the environment file that has a list of all the recipes to include specifically, 2) i could have a recipe that might be called "apply environmentally specific recipes" which reads soemthing like node.default[recipes to be included].each do |f| include_recipe f end
[2014-04-18 17:16:37 -0400] kbarry: obviously there are 500 ways to do this,
[2014-04-18 17:17:04 -0400] kbarry: (Chefs biggest benefit, greatest complication)
[2014-04-18 17:18:27 -0400] maplebed: it feels more right to me to always include the recipe and have it do the Right Thing(tm) based on the enviornment in which it finds itself. That does get kinda silly though if it means just surrounding the entire recipe with a if in?(my-special-env) ... end block.
[2014-04-18 17:19:32 -0400] maplebed: I'll be curious to hear what you come up with. whatever you do - just make sure to document it well.  it's certain to trip up someone. :P
[2014-04-18 17:24:20 -0400] kbarry: I totally like the idea of "env_run_lists"
[2014-04-18 17:24:26 -0400] kbarry: but I am really wanting the opposite
[2014-04-18 17:24:40 -0400] kbarry: because when you use env_run_lists, you need one for each environment
[2014-04-18 17:24:43 -0400] kbarry: WAIT
[2014-04-18 17:24:46 -0400] kbarry: maybe you dont.......
[2014-04-18 17:26:12 -0400] kbarry: looks like I can use "runlist
[2014-04-18 17:26:26 -0400] kbarry: run_list to set allt he stuff thats the same,,
[2014-04-18 17:26:43 -0400] kbarry: wondering what happens when you also include a env_run_list does it add, or override
[2014-04-18 17:27:28 -0400] kbarry: http://docs.opscode.com/essentials_roles.html
[2014-04-18 17:32:24 -0400] Popsikle: anyone have any luck running chef-client on a 512mb instance?
[2014-04-18 17:40:07 -0400] doomviking: luck?
[2014-04-18 17:45:14 -0400] kbarry: Hmmm.
[2014-04-18 17:45:26 -0400] juliancdunn: Popsikle: I run it on t1.micros all the time
[2014-04-18 17:45:29 -0400] kbarry: I tried creating a dummy role with both run_list and env_run_list items.
[2014-04-18 17:45:37 -0400] kbarry: uploaded, created a dummy node, applied ole to it
[2014-04-18 17:45:55 -0400] kbarry: expecting to get to see the runlist that would apply to that entity
[2014-04-18 17:49:17 -0400] luisg_: hi, i think there is a bug in the cron resource
[2014-04-18 17:49:28 -0400] luisg_: where do i report it? in tickets.opescode ?
[2014-04-18 17:49:50 -0400] xorl: damn you erchef!
[2014-04-18 17:50:19 -0400] xorl: keeps creating a hash of the password for erchef breaking my ability to connect to a remote sql host
[2014-04-18 17:51:11 -0400] billy_: hi y'all, i'm trying to connect to the vagrant box from the starter kit to boostrap it and i am not connection.
[2014-04-18 17:51:55 -0400] billy_: any ideas?
[2014-04-18 17:53:55 -0400] juliancdunn: luisg_: yes, open a ticket at tickets.opscode.com plz
[2014-04-18 17:54:05 -0400] luisg_: juliancdunn, k thx
[2014-04-18 17:54:43 -0400] juliancdunn: billy_: can you SSH to the vagrant box?
[2014-04-18 17:54:50 -0400] billy_: yes i ca
[2014-04-18 17:54:52 -0400] billy_: can
[2014-04-18 17:55:24 -0400] juliancdunn: what does your output look like when you try to bootstrap? (please make a Gist or Pastebin)
[2014-04-18 17:55:34 -0400] Popsikle: 162.243.12.165 Errno::ENOMEM
[2014-04-18 17:55:39 -0400] Popsikle: 162.243.12.165 -------------
[2014-04-18 17:55:40 -0400] Popsikle: 162.243.12.165 Cannot allocate memory - fork(2)
[2014-04-18 17:55:40 -0400] Popsikle: juliancdunn:
[2014-04-18 17:55:40 -0400] Popsikle: =(
[2014-04-18 17:56:25 -0400] doomviking: maybe you're out of memory? heh. swap space?
[2014-04-18 17:57:12 -0400] juliancdunn: Popsikle: I see that's a DigitalOcean box, and I run Chef on a 512MB DO box so it does work :)
[2014-04-18 17:57:33 -0400] kbarry: how do I see all the recipes that will be run against a node?
[2014-04-18 17:57:34 -0400] juliancdunn: it might be something your recipe is doing that is allocating a lot of memory
[2014-04-18 17:57:56 -0400] kbarry: (i have a role applied to a node, but knife node show is only showing the role name, not what recipes will be included.
[2014-04-18 17:59:23 -0400] billy_: It says connection refused, I've tried to do it from the 127.0.0.1 and 10.0.2.15 and it won't connect. does the vagrantfile not get assigned an ip?
[2014-04-18 18:00:41 -0400] billy_: oh hey! i got it!
[2014-04-18 18:01:08 -0400] billy_: nevermind, it remapped the port for ssh from 22 to 2200.  it's a miracle! :)
[2014-04-18 18:13:00 -0400] xmltok: i have a cookbook that is running service enable on an upstart service, /usr/sbin/update-rc.d cant find the file in /etc/init.d so it throws an error. is that a problem in the cookbook or a problem with the service resource?
[2014-04-18 18:25:27 -0400] mjuszczak: So the berkshelf method recommends using attributes over databags.  That's referring to files in the attributes/ directory of the cookbook, correct?
[2014-04-18 18:31:04 -0400] frege: I'm new to chef
[2014-04-18 18:31:21 -0400] frege: wanna make a recipe for a vbox using with vagrant
[2014-04-18 18:37:23 -0400] CPS: frege: #learnchef is where you want to be
[2014-04-18 18:38:00 -0400] frege: thanks
[2014-04-18 18:43:02 -0400] maplebed: kbarry: re: what recipes are on a node - it won't know until it starts resolving. You can find out during the chef-client run but I don't think you can get at that from the chef server (aka via knife)
[2014-04-18 18:43:02 -0400] CADBOT: What's the point of the system attribute in the user resource?
[2014-04-18 18:43:16 -0400] CADBOT: Isn't the whole point of the user resource to make new system accounts?
[2014-04-18 18:43:27 -0400] CADBOT: i.e. what is the use case for system false
[2014-04-18 18:44:14 -0400] maplebed: CADBOT: you can also use that resource for regular user management...
[2014-04-18 18:44:54 -0400] maplebed: it's basically the same thing as the --system flag to useradd.
[2014-04-18 18:46:20 -0400] CADBOT: Oh I see
[2014-04-18 18:46:34 -0400] CADBOT: I wasn't familiar with the that flag in useradd
[2014-04-18 18:53:02 -0400] CPS: maplebed: kbarry knife role show <rolename> will show you a role's run list
[2014-04-18 18:53:19 -0400] maplebed: right, but that's the unexpanded version of the runlist.
[2014-04-18 18:53:43 -0400] maplebed: i.e. it'll show role[webserver], not that down the chain I include nginx::default
[2014-04-18 18:55:59 -0400] crombar: Is anyone using the opscode nginx cookbook and has a minute to spare? I am stuck with some configuration issues
[2014-04-18 18:56:10 -0400] CPS: yeah i don't think there's a 1-line command to get that info but you can stitch it together with knife role show
[2014-04-18 19:08:21 -0400] CADBOT: Thanks btw!
[2014-04-18 19:08:50 -0400] CADBOT: crombar: what's the problem?
[2014-04-18 19:12:27 -0400] crombar: CADBOT: I don't understand how to add my own config. The opscode cookbook seems to always create the default config file, even when I try to set default_site_enabled to false. So on every run the opscode cookbook replaces my config with the default and my wrapper replaces the default with the actual config. I don't understand how the nginx cookbook should be configured
[2014-04-18 19:16:03 -0400] CADBOT: so in your wrapper cookboobk
[2014-04-18 19:16:07 -0400] CADBOT: in the templates folder
[2014-04-18 19:16:17 -0400] CADBOT: drop in a nginx.conf.erb file
[2014-04-18 19:16:48 -0400] CADBOT: You can either just hardcode everything, or you can extract some of the data to attributes
[2014-04-18 19:17:31 -0400] CADBOT: Then what is your install method?
[2014-04-18 19:17:37 -0400] CADBOT: So I can give you more details
[2014-04-18 19:19:29 -0400] crombar: I am currently trying to do that with the default-site.erb file. I have that in my wrapper cookbook and I have a section which created that file from the template. I use 'include_recipe "nginx"' in my wrapper cookbook to install. But have tried to call the source cookbook as we'll, but that leads to the same problem
[2014-04-18 19:20:33 -0400] CADBOT: That's probably because you have to override an attribute in the sourcecookbook
[2014-04-18 19:20:45 -0400] CADBOT: before you include_recipe nginx
[2014-04-18 19:21:03 -0400] CADBOT: The sourcecookbooks probably set an attribute to point at it's own conf file
[2014-04-18 19:21:13 -0400] CADBOT: And you have to override that attribute to point at your own
[2014-04-18 19:23:24 -0400] crombar: CADBOT: this is the recipe from my wrapper cookbook: http://pastebin.com/A6FTds7k
[2014-04-18 19:23:56 -0400] crombar: do I need node.override instead of node.default in that case?
[2014-04-18 19:24:14 -0400] CADBOT: I *think* so
[2014-04-18 19:24:43 -0400] sauraus: @crombar here is my nginx wrapper cookbook I wrote the other day: https://gist.github.com/Sauraus/11060403
[2014-04-18 19:24:55 -0400] crombar: I just tried, but that doesn't seem to help
[2014-04-18 19:25:22 -0400] CADBOT: I'll take another look, but it might be beyond my level of expertise XD
[2014-04-18 19:25:31 -0400] CADBOT: Personally i use this cookbook for my nginx stuff:
[2014-04-18 19:25:32 -0400] CADBOT: https://github.com/aws/opsworks-cookbooks/tree/release-chef-11.4/nginx
[2014-04-18 19:25:47 -0400] CADBOT: I found it more understandable and easy to work with
[2014-04-18 19:26:22 -0400] CADBOT: Maybe try the override before this part nginx_site 'default' do
[2014-04-18 19:26:22 -0400] CADBOT:   enable false
[2014-04-18 19:26:23 -0400] CADBOT: end
[2014-04-18 19:27:00 -0400] crombar: sauraus: thanks, I'll give that a try
[2014-04-18 19:27:56 -0400] sauraus: I added my site template to the gist as well
[2014-04-18 19:28:34 -0400] crombar: CADBOT: that section has been from a stockoverflow I found and actually should work on its own without the other definition... but what that actually is doing is currently beyond my knowledge about chef
[2014-04-18 19:36:39 -0400] sauraus: @crombar did my wrapper do what you needed?
[2014-04-18 19:53:51 -0400] crombar: saurus: it looks like it doesn't have the issue I was having, but I need to have a more closer look and apply my config. Thanks a lot
[2014-04-18 19:54:05 -0400] sauraus: welcome
[2014-04-18 19:54:46 -0400] Brad_K: Hmm.  So, "coderay" is a 472 byte script.  Does this mean that Matt really was replaced by a short shell script?  ;-)
[2014-04-18 20:02:03 -0400] rayrod2030: upgraded my chef server to 11.12.0 but now my chef clients are trying to connect to the internal fqdn of my chef-server when pulling from bookshelf
[2014-04-18 20:05:37 -0400] tscanausa: does ohai detect properties from aws?
[2014-04-18 20:13:22 -0400] whiteadam: tscanausa: hmm, what type of properties
[2014-04-18 20:13:47 -0400] tscanausa: public ip / region that sort of thing
[2014-04-18 20:14:16 -0400] whiteadam: I don't think so, since those are outside of the OS
[2014-04-18 20:14:21 -0400] whiteadam: I may br wrong
[2014-04-18 20:15:32 -0400] tscanausa: It is some how is provided by rackspace, ( lets call it magic ) and would be nice to have as I transition
[2014-04-18 20:15:46 -0400] whiteadam:  oh interesting
[2014-04-18 20:16:15 -0400] gchristensen: tscanausa: yeah it does
[2014-04-18 20:16:58 -0400] tscanausa: gchristensen: can you point me in a direction of where to start looking as to why my chef server is not detecting it?
[2014-04-18 20:17:20 -0400] surge_: I can use if node.name.include? in an attributes file right?
[2014-04-18 20:17:28 -0400] gchristensen: it may not detect all you want, but it might - https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/ec2.rb -- you might need a ec2 hint
[2014-04-18 20:17:33 -0400] surge_: or rather, any valid ruby code in there?
[2014-04-18 20:19:48 -0400] Mikedodge04: does anybody know how to disable and Ohai plugin for a chef-apply run?
[2014-04-18 20:21:00 -0400] tscanausa: gchristensen: looks like the new m3 instances are not ohai cloud plugin compatible.
[2014-04-18 20:22:27 -0400] surge_: tscanausa: Use a ohai hint.
[2014-04-18 20:23:28 -0400] surge_: Well, actually are you on a VPC or EC2 classic? I ran into ohai issues when I switched to the new AWS VPCs.
[2014-04-18 20:23:34 -0400] surge_: Not because of a certain instance size.
[2014-04-18 20:24:37 -0400] tscanausa: while I was launching in us west 1 it looks like it put it in a "default" public vpc
[2014-04-18 20:24:42 -0400] kcb_: i'm new to chef11, does chef-apply replace chef-client -o ?
[2014-04-18 20:25:47 -0400] kcb_: in chef-client you could pass -c client.rb to do things like turn off an ohai plugin. that doesnt' seem possible in chef-apply?
[2014-04-18 20:27:21 -0400] surge_: tscanausa: https://tickets.opscode.com/browse/OHAI-267 Ill show you what I used. http://pastebin.com/vaGCjRui
[2014-04-18 20:28:03 -0400] surge_: Put that at the start of your chef run, and then you should be okay.
[2014-04-18 20:30:40 -0400] tscanausa: that forces all of my instances to use an ec2 hint then?
[2014-04-18 20:35:45 -0400] surge_: tscanausa: Yup. Then it should populate the ec2 specific attributes as you are used to seeing.
[2014-04-18 20:36:37 -0400] thatothermitch: In some of my chef builds, I'm getting a 401 when trying to register nodes with the chef-validator validation key
[2014-04-18 20:36:41 -0400] tscanausa: so wouldnt that go against the idea of chef, run what ever you want where you want? and so know I could only run those recipes on ec2
[2014-04-18 20:37:17 -0400] Popsikle: juliancdunn: so, turns out a node search inside of a recipe was causing the OOM issues on my bootstrap. the 512mb instance can not load the node attribs for the 30 other machines in the env at once.
[2014-04-18 20:37:33 -0400] thatothermitch: if the public key extracted from chef-validator.pem matches the public key stored in the chef-validator client, should authentication succeed?
[2014-04-18 20:38:01 -0400] Popsikle: thatothermitch: is there already a node OR client with the same name?
[2014-04-18 20:38:28 -0400] thatothermitch: not according to knife
[2014-04-18 20:39:10 -0400] thatothermitch: (this is in OSC, btw -- there seems to be better docs for EC)
[2014-04-18 20:39:23 -0400] Popsikle: dies the file in /etc/chef/ on the new node have any funky line endings?
[2014-04-18 20:40:17 -0400] thatothermitch: Not visibly, but it's possible. I have seen the chef-client die with what appears to be an openssl PEM parsing error if the file doens't look like a PEM, and that's not happening
[2014-04-18 20:41:31 -0400] NukePuppy: i woould backup the node's /etc/chef then wipe it on one node.. remove client and node .. try to see if it fails still
[2014-04-18 20:43:00 -0400] thatothermitch: NukePuppy: probably sound advice, but this is happening with node registration, so client.pem doesn't yet exist, and the node / client has yet to be created
[2014-04-18 20:43:41 -0400] NukePuppy: just a combination of that :( ive had really annoying episodes with that
[2014-04-18 20:52:33 -0400] thatothermitch: hrm, i did find some misplaced carriage returns in the client file. Removing them didn't seem to help. Double checking now
[2014-04-18 20:52:52 -0400] thatothermitch: fond misplaced carriage returns in the *validation.pem*
[2014-04-18 20:55:24 -0400] tscanausa: yupp looks like ohai cloud plugin is broken for us-west1
[2014-04-18 21:00:01 -0400] surge_: tscanausa: Uh, no? You can run chef wherever, but if it fails to detect that its on EC2 thats not necessarily chefs fault.
[2014-04-18 21:02:21 -0400] surge_: Amazon decided to force everyone onto VPCs and that caused a breaking change, if you will. Ohai needs to catch up, or provide a workaround, which they did.
[2014-04-18 21:02:49 -0400] mindlace: Is anyone beyond JamieW using the environment cookbook?
[2014-04-18 21:03:01 -0400] mindlace: The environment cookbook pattern, that is
[2014-04-18 21:09:02 -0400] fahd: So enabled kitchen testing for rackbox-cookbook, but the converge fails with "ERROR: Cookbook rackbox not found"
[2014-04-18 21:09:10 -0400] fahd: https://github.com/fsultan/rackbox-cookbook
[2014-04-18 21:09:39 -0400] fahd: I'm not sure what's causing it ..
[2014-04-18 21:10:40 -0400] jblack: Is there a clean way to set a nested attribute if the intermediate levels isn't present. E.G. an equivilant of  node[:one][:two][:three] = true   if node[:one] doesn't exist?
[2014-04-18 21:13:07 -0400] rpad: I'm trying to setup chef-vault to be used in an autoscaling environment. Should I simply create a dummy user and put it's key in a private s3 bucket?
[2014-04-18 21:15:57 -0400] fahd: /home/fahd/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/logger.rb:365:in `<': comparison of Fixnum with nil failed (ArgumentError)
[2014-04-18 21:16:03 -0400] fahd: what the bloody hell
[2014-04-18 21:16:14 -0400] fahd: er, oops sorry wrong channel ;)
[2014-04-18 21:19:53 -0400] mindlace: jblack: um.. node[:one][:two][:three] = true unless node.has_key? :one
[2014-04-18 21:21:30 -0400] armendonigian: for a given node, how do u print out the env file as json?
[2014-04-18 21:23:25 -0400] mindlace: jblack: er, obviously it doesn't create the children for you, but you can use Mash.new for that.
[2014-04-18 21:24:52 -0400] jblack: Ok. I was hopping there was something smarter under the hood than typical hash mechanics.
[2014-04-18 21:24:55 -0400] jblack: Thanks much. =)
[2014-04-18 21:27:28 -0400] jblack: In fact, it looks like node does have default, which might auto vivify any missing mashes
[2014-04-18 21:32:03 -0400] thatothermitch: is it possible an intervening proxy would interfere with authentication via chef-validator?
[2014-04-18 21:36:12 -0400] Popsikle: fahd: did you clone it as rackbox-cookbook or rackbox?
[2014-04-18 21:37:26 -0400] fahd: rackbox-cookbook,
[2014-04-18 21:37:59 -0400] fahd: but I just found that it was missing 'metadata' in Berksfile
[2014-04-18 21:38:30 -0400] Popsikle: you want to clone it as rackbox
[2014-04-18 21:38:38 -0400] Popsikle: or rename the folder to rackbox
[2014-04-18 21:38:43 -0400] fahd: I'm trying to consolidate changes from 4 diff forks, so ... this might  have not been one of my best ideas
[2014-04-18 21:39:06 -0400] fahd: adding 'metadata' seems to have fixed it...
[2014-04-18 21:43:06 -0400] sarkis: hey all i keep getting this error: Recipe Compile Error in /home/vagrant/chef-solo/cookbooks-2/chef-cookbooks-rails/recipes/default.rb
[2014-04-18 21:43:21 -0400] sarkis: i'm using berkshelf + knife solo
[2014-04-18 21:43:34 -0400] sarkis: oops it missed the important part
[2014-04-18 21:43:55 -0400] sarkis: No resource or method named `apt_installed?' for `Chef::Recipe "default"'
[2014-04-18 21:44:32 -0400] sarkis: i've added apt to the berksfile, berks updated, and i do include_recipe "apt" before anything in my default.rb
[2014-04-18 21:54:36 -0400] rpad: How do you guys handle data bag encryption in an autoscaling environment?
[2014-04-18 22:07:06 -0400] ianblenke: I keep having actors crash in celluloid with "Ridley::Errors::ConnectionFailed: getaddrinfo: nodename nor servname provided, or not known" while trying to run berkshelf-api with a config.json pointing at hosted chef using https://api.opscode.com/organizations/{ourorgname}
[2014-04-18 22:07:42 -0400] ianblenke: the weird bit is that it initially connects and enumerates the cookbooks and versions, but then the actors fail while trying to process them.
[2014-04-18 22:16:49 -0400] sarkis: i've done some research on my issue above, it may be related to a missing dependency in the metadata.rb
[2014-04-18 22:17:09 -0400] sarkis: what needs to go in the metadata file? there doesn't seem to be ample docs on this on the berkshelf site
[2014-04-18 23:00:55 -0400] xmltok: anyone recommend a cookbook for configuring a bond on ubuntu?
[2014-04-18 23:02:10 -0400] mallu: hello, is there an wasy way to delete cookbook version from multiple environment?
[2014-04-18 23:02:22 -0400] mallu: ** easy way
[2014-04-18 23:05:50 -0400] mallu: anyone?
[2014-04-18 23:07:54 -0400] rayrod2030: what's a good knife ssh command for checking the last time a node successfully converged?
[2014-04-18 23:08:16 -0400] jmickle: knife status
[2014-04-18 23:09:02 -0400] rayrod2030: of course.  thank you.
[2014-04-18 23:13:32 -0400] mallu: is there an easy way to delete cookbook version from multiple environments?
[2014-04-18 23:28:35 -0400] ianblenke: solution to my berkshelf-api "getaddrinfo" problem: using ruby 2.1.1 is bad. ruby 1.9.3 is good.

[2014-04-09 00:01:00 -0400] maraca: kallistec so a new instance came up with chef-client 11.12, and it won't bootstrap https://gist.github.com/maraca/1ec4749a84380fc6c16c
[2014-04-09 00:02:08 -0400] maraca: we're using v2.0.0 of nginx so that could also be a problem :/
[2014-04-09 00:02:24 -0400] kallistec: maraca: can you post the chef-stacktrace.out file?
[2014-04-09 00:03:12 -0400] maraca: yessir kallistec https://gist.github.com/maraca/10211221
[2014-04-09 00:06:43 -0400] jgrevich_: Is there a convention for handling package installations that require restarts? (e.g. setting up OpenCL on linux with a 290X seems to require at least 1-2)
[2014-04-09 00:07:42 -0400] jgrevich_: The best soultion I can think of requires multiple chef runs to fully install what I need because of the restarts.
[2014-04-09 00:12:01 -0400] kallistec: maraca: your issue looks like this but it was supposed to be fixed: https://tickets.opscode.com/browse/OHAI-555
[2014-04-09 00:13:51 -0400] maraca: kallistec yes I saw this and thought the same, not sure what's up
[2014-04-09 00:14:35 -0400] kallistec: maraca: is all this code in the public nginx cookbook?
[2014-04-09 00:14:53 -0400] kallistec: maraca: and are you on an older version?
[2014-04-09 00:15:09 -0400] maraca: yes im running an outdated version of the nginx cookbook
[2014-04-09 00:15:11 -0400] kallistec: The original reporter of that bug tells me he verified it was workding
[2014-04-09 00:15:14 -0400] kallistec: *working*
[2014-04-09 00:15:24 -0400] maraca: i should probably upload, although i didn't see anything in the changelog
[2014-04-09 00:17:41 -0400] Durzo: ohai chefs. this morning all my nodes are failing with SSL errors. telling me to run a 'knife ssl check -c /etc/chef/client.rb', i have copied ALL the certs into my trusted_certs_dir but i still get the same error... can anyone explain wtf is going on?
[2014-04-09 00:18:38 -0400] maraca: Durzo same here, this is happening http://www.getchef.com/blog/2013/10/31/ssl-certificate-validation-in-chef/
[2014-04-09 00:18:49 -0400] maraca: you are installing the latest chef-client , which is version 12.11
[2014-04-09 00:18:58 -0400] kallistec: Durzo: did you blanket change your ssl verification setting?
[2014-04-09 00:19:02 -0400] maraca: i am locking mines down to 11.10 until I can properly upgrade
[2014-04-09 00:19:16 -0400] Durzo: my nodes auto updated via omnibus_updater but i have not changed a single setting
[2014-04-09 00:19:19 -0400] kallistec: for now the SSL stuff is a warning
[2014-04-09 00:19:38 -0400] kallistec: no change in behavior
[2014-04-09 00:19:55 -0400] Durzo: im happy to configure the ssl verify, but i cannot make it work.. after copying my ssl certs they still fail to verify
[2014-04-09 00:20:16 -0400] kallistec: Durzo: does `knife ssl check` say anything?
[2014-04-09 00:21:50 -0400] kallistec: Durzo: you can also run the `knife ssl fetch` command
[2014-04-09 00:22:11 -0400] Durzo: output of knife ssl check: http://pastie.org/pastes/9009973/text?key=tnfmld8oagqadlkidxgicw
[2014-04-09 00:22:13 -0400] kallistec: that should basically always work unless your hostnames mismatch
[2014-04-09 00:22:44 -0400] Durzo: kallen, i believe my hostnames are mismatching.. chef server hostname is 'catau-syd-chef01' but chef is accessed via chef.mycompany.com
[2014-04-09 00:22:45 -0400] kallistec: Durzo: run it with -c /etc/chef/client.rb
[2014-04-09 00:23:30 -0400] Durzo: same output with -c /etc/chef/client.rb
[2014-04-09 00:23:37 -0400] Durzo: fyi i am using a self signed cert
[2014-04-09 00:23:48 -0400] kallistec: you're running this on the chef-server itself?
[2014-04-09 00:23:49 -0400] Durzo: its an internal server
[2014-04-09 00:23:52 -0400] Durzo: yes
[2014-04-09 00:24:00 -0400] Durzo: chef server is also a node to itself (heh)
[2014-04-09 00:24:06 -0400] Durzo: but all my nodes exhibit this issue
[2014-04-09 00:24:31 -0400] kallistec: you might need to run w/ sudo?
[2014-04-09 00:24:36 -0400] Durzo: am root
[2014-04-09 00:24:40 -0400] kallistec: theres this warning: WARNING: No knife configuration file found
[2014-04-09 00:24:51 -0400] kallistec: which means no config file was picked up
[2014-04-09 00:24:51 -0400] Durzo: using -c that warning goes away
[2014-04-09 00:24:54 -0400] Durzo: but the output is the same
[2014-04-09 00:25:06 -0400] Durzo: it picks up trusted_certs_dir
[2014-04-09 00:25:09 -0400] kallistec: you still get `trusted_certs_dir: nil`
[2014-04-09 00:25:13 -0400] Durzo: sorry, thats diff
[2014-04-09 00:25:24 -0400] Durzo: trusted_certs_dir is /etc/chef/trusted_certs, which exists & has my ssl certs in it
[2014-04-09 00:25:35 -0400] Durzo: as chef.mycompany.com.crt
[2014-04-09 00:26:01 -0400] kallistec: if it's getting picked up then the error message should change to say the hostname of the cert is wrong
[2014-04-09 00:26:35 -0400] Durzo: http://pastie.org/pastes/9010212/text?key=g94tdhc6chnceatzfejaw
[2014-04-09 00:27:08 -0400] kallistec: Durzo: if you run `knife ssl fetch -c /etc/chef/client.rb` ?
[2014-04-09 00:27:20 -0400] Durzo: that is the output of that command
[2014-04-09 00:27:29 -0400] Durzo: above pastie includes command being run
[2014-04-09 00:27:44 -0400] kallistec: ssl fetch, not ssl check
[2014-04-09 00:27:55 -0400] Durzo: eh sorry
[2014-04-09 00:28:17 -0400] Durzo: hah
[2014-04-09 00:28:39 -0400] Durzo: so i had chef.mycompany.com.crt and chef expects chef_mycompany_com.crt
[2014-04-09 00:28:54 -0400] Durzo: documentation :/
[2014-04-09 00:29:07 -0400] gmcinnes: kallistec: do you know if there is any intention to allow knife clients to be added and removed from groups on hosted chef server?  It used to work fine, but doesn't on the new hosted chef.
[2014-04-09 00:29:42 -0400] kallistec: gmcinnes: I don't know, sorry
[2014-04-09 00:29:55 -0400] Durzo: grrr
[2014-04-09 00:30:06 -0400] gmcinnes: I can't find a bug for it, but I would have expected there to be one.
[2014-04-09 00:30:18 -0400] gmcinnes: maybe I'm a special snowflake who does it like this.
[2014-04-09 00:30:23 -0400] kallistec: gmcinnes: probably contact support
[2014-04-09 00:30:39 -0400] kallistec: Durzo: l don't think the file name should actually matter
[2014-04-09 00:31:23 -0400] Durzo: kallistec, http://pastie.org/pastes/9010501/text?key=mdxtfaxp7f6batzye0izoa
[2014-04-09 00:31:31 -0400] Durzo: fetch fetches the cert, check still complains
[2014-04-09 00:34:51 -0400] kallistec: Durzo: does the content of the downloaded file look correct?
[2014-04-09 00:35:04 -0400] trojanskis: hey folks, got an odd problem on data bags. I removed some entries from databag but clients still see it. I've checked on server side, that values do not exist there. restarted even chef server , but no luck. any idea ? both server and client have 11.4 version
[2014-04-09 00:35:14 -0400] Durzo: kallen, yes.. i think it is because chef-client does not have the CA of my self signed cert..
[2014-04-09 00:35:23 -0400] Durzo: s/kallen/kallistec
[2014-04-09 00:36:10 -0400] kallistec: Durzo: hrm, when I tested it, it was able to download intermediate certs, too, but it's worth trying
[2014-04-09 00:38:47 -0400] Durzo: kallistec, fixed.. i had to define my self signed CA cert in /etc/chef/client.rb as 'ssl_ca_file'
[2014-04-09 00:39:17 -0400] kallistec: Durzo: that's quite odd
[2014-04-09 00:39:42 -0400] Durzo: kallen, not really.. chef-client would be using the system wide CA cert file, which does not include the CA i used to sign my chef server cert
[2014-04-09 00:39:49 -0400] Durzo: ffs s/kallen/kallistec
[2014-04-09 00:40:28 -0400] Durzo: its just annoying that even using knife ssl --help offers no info about how you could possibly fix this.. not even the release notes or blog posts
[2014-04-09 00:40:39 -0400] kallistec: Durzo: right, but the code adds extra certs from the trusted_certs_dir
[2014-04-09 00:40:59 -0400] Durzo: kallen, certificates yes, but not CA certificates
[2014-04-09 00:41:13 -0400] kallistec: Durzo: this release is a little early becuase clients are vulnerable to heartbleed also
[2014-04-09 00:41:37 -0400] kallistec: release notes will be up in a little while
[2014-04-09 00:44:20 -0400] kallistec: Durzo: what the code does is configures the ssl settings for HTTPS connections to trust any certs in trusted_certs_dir in addition to anything in your CA files
[2014-04-09 00:45:00 -0400] Durzo: kallistec, but the CA that signed the certificate it fetched is not trusted
[2014-04-09 00:45:30 -0400] Durzo: either way i fixed it now
[2014-04-09 00:46:36 -0400] kallistec: Durzo: ah, I think I get it. If you copied your own root CA cert to trusted_certs dir in addition to the server's it would work and you could still use the default CA file to verify 3rd party servers (if that is a thing you need to do)
[2014-04-09 00:47:04 -0400] Durzo: kallen, i dont think it is even picking up the default CA file
[2014-04-09 00:47:09 -0400] Durzo: as ca_cert_file is nil
[2014-04-09 00:47:13 -0400] Durzo: unless i specifically set it
[2014-04-09 00:47:27 -0400] kallistec: Durzo: are you using omnibus?
[2014-04-09 00:47:30 -0400] Durzo: i am
[2014-04-09 00:48:09 -0400] kallistec: hrm, that is built with the curl/mozilla certs in /opt/chef/embedded/ssl/cert.pem
[2014-04-09 00:48:40 -0400] kallistec: the part about `ssl_ca_path: nil` just means that you haven't explicitly overridden the default setting
[2014-04-09 00:49:31 -0400] kallistec: btw here are the release notes, they will be on docs.opscode.com soon: https://github.com/opscode/chef/blob/11.12.0/RELEASE_NOTES.md
[2014-04-09 00:49:35 -0400] Durzo: not so sure about that, if i explicitely set ssl_ca_file to /etc/ssl/certs/ca-certificates.crt (the system default) then it also works perfectly
[2014-04-09 00:50:07 -0400] Durzo: so it seems its not to do with my self signed, but rather knife cannot read _any_ of the CA's
[2014-04-09 00:51:29 -0400] kallistec: Durzo: okay, I'm glad you got this sorted. I'll check out the bundled ca certs (but probably not 'till tomorrow)
[2014-04-09 00:51:35 -0400] Durzo: np
[2014-04-09 00:52:10 -0400] Durzo: kallistec, how would you recommend me pushing out ssl_ca_file option to all my nodes via chef-client ?
[2014-04-09 00:52:25 -0400] Durzo: would be a pain to have to ssh into them all and do it manually
[2014-04-09 00:54:11 -0400] kallistec: Durzo: if you haven't set `ssl_verify_mode :verify_peer` then all your chef-clients should be working, they will just print a noisy warning when you run them
[2014-04-09 00:54:25 -0400] Durzo: yes but i want to enable this feature
[2014-04-09 00:54:33 -0400] Durzo: but i need some way to tell all my nodes to turn it on
[2014-04-09 00:54:36 -0400] kallistec: You can probably just stick your ca file in a cookbook
[2014-04-09 00:54:50 -0400] Durzo: i need to add 2 options to /etc/chef/client.rb on every node
[2014-04-09 00:54:59 -0400] Durzo: just wondering how i can do that
[2014-04-09 00:55:01 -0400] kallistec: The chef-client cookbook I think can set ssl_verify_mode :verify_peer to your client.rb
[2014-04-09 00:55:17 -0400] kallistec: or you could write your own cookbook to do that
[2014-04-09 00:55:26 -0400] Durzo: ok
[2014-04-09 00:56:51 -0400] kallistec: Durzo: I would also have your cookbook run `knife ssl check -c /etc/chef/client.rb` and refuse to modify the client.rb if it does not succeed
[2014-04-09 00:56:59 -0400] kallistec: bad ssl config should exit 1
[2014-04-09 00:57:05 -0400] Durzo: ok
[2014-04-09 00:57:06 -0400] kallistec: good ssl config should be 0
[2014-04-09 00:57:30 -0400] kallistec: otherwise all your chef-clients will fail with ssl errors talking to the server
[2014-04-09 00:59:40 -0400] ohmygoshjosh: Hello, anyone aware of a good guide for locking down Open Source Chef Server?
[2014-04-09 01:00:35 -0400] ohmygoshjosh: Off the bat, it's clear I need to setup SSL on the web UI.  I'm also going to put it behind a firewall with a web proxy (nginx) in front.  Beyond that, it's not obvious what else to do...
[2014-04-09 01:01:07 -0400] kallistec: ohmygoshjosh: you should have ssl enabled by default, at least for chef 11 (which I would recommend)
[2014-04-09 01:01:41 -0400] ohmygoshjosh: kallistec: It looks like for nodes it is, but for the Web UI, I have to manually set it up.
[2014-04-09 01:02:16 -0400] ohmygoshjosh: kallistec: actually, I'm sorry, you're right in this case.  Yep, web UI only enabled on SSL.
[2014-04-09 01:02:18 -0400] kallistec: ohmygoshjosh: you sure? You should just go to https://mychefserver.example.com in a browser and be good to go
[2014-04-09 01:02:47 -0400] ohmygoshjosh: kallistec: yeah, I'm thinking of my Jenkins server actually.
[2014-04-09 01:02:53 -0400] kallistec: there is a SSL redirect you can disable, I forget if it's enabled by default
[2014-04-09 01:03:55 -0400] ohmygoshjosh: kallistec: Any other best practice to lock it down.  It seems like a pretty juicy target for an attacker.  For example, I wonder if it would compromise under a dictionary attack (someone brute-forcing the admin password, for example)
[2014-04-09 01:09:46 -0400] kallistec: ohmygoshjosh: if you have a bad password, that's probably possible
[2014-04-09 01:12:47 -0400] darkside_: isn't everything behind your firewall a juicy target?
[2014-04-09 01:15:06 -0400] ohmygoshjosh: That's a fair point.  I suppose if I were an attacker and knew the target was using Chef, I would have an open source piece of software I could analyze for vulnerabilities, and then I could get access to any other server by changing Chef's roles, runlists, cookbooks, etc.
[2014-04-09 01:15:38 -0400] ohmygoshjosh: Takeaway for me is it just shouldn't be exposed at all to the world; only to trusted IP's and internal network.
[2014-04-09 01:34:09 -0400] darkside_: naturally
[2014-04-09 01:34:34 -0400] darkside_: my point was once they are behind your firewall, you have bigger issues
[2014-04-09 02:45:54 -0400] bmhatfield: wait, what is going on here
[2014-04-09 02:45:59 -0400] bmhatfield: http://www.getchef.com/blog/
[2014-04-09 02:46:20 -0400] bmhatfield: There's a client release that claims to mitigate heartbleed  but the client isn't the problem
[2014-04-09 02:46:31 -0400] bmhatfield: the problem is the library embedded in the omnibus packages?
[2014-04-09 02:46:37 -0400] bmhatfield: Am I missing something?
[2014-04-09 02:48:41 -0400] bmhatfield: Also, still no omnibus update?
[2014-04-09 02:55:29 -0400] bmhatfield: I appreciate that the past 48 hours has sucked for everyone.
[2014-04-09 03:03:17 -0400] juliancdunn: bmhatfield: by "omnibus" you mean the Chef server?
[2014-04-09 03:03:31 -0400] bmhatfield: Yeah, sorry.
[2014-04-09 03:03:38 -0400] juliancdunn: that's in progress.
[2014-04-09 03:03:44 -0400] bmhatfield: yeah.
[2014-04-09 03:03:57 -0400] juliancdunn: this has more details on why the client is *also* the problem: http://www.getchef.com/blog/2014/04/08/openssl-heartbleed-security-update/
[2014-04-09 03:04:02 -0400] bmhatfield: I'm just confused why there's a major rush release that claims to fix the vulnerability that has nothing to do with it.
[2014-04-09 03:04:17 -0400] bmhatfield: ah.
[2014-04-09 03:04:20 -0400] juliancdunn: because the client's process memory can be read.
[2014-04-09 03:05:00 -0400] bmhatfield: excellent.
[2014-04-09 03:08:41 -0400] bmhatfield: welp. I'll add it to my list.
[2014-04-09 06:19:08 -0400] crackgen: Hi all :)
[2014-04-09 06:21:38 -0400] crackgen: I want install Riak with Chef, who can help me please ?
[2014-04-09 06:21:53 -0400] crackgen: Or give me a link
[2014-04-09 06:31:22 -0400] someara: https://github.com/basho/riak-chef-cookbook
[2014-04-09 07:46:01 -0400] srenatus: hmm thought about recreating checkrestart (from debian-goodies) in chef (using jordan sissel's fosl gem)... thereby recognised that something in the mapping "service" -> "files" is quite hidden in a system... checkrestart itself checks dpkg-query listings... there must be a better way... actually, chef doesn't know more than the system does anyways...
[2014-04-09 07:46:58 -0400] srenatus: checkrestart itself feels hacky
[2014-04-09 08:16:49 -0400] Durzo: is there any way i can apply some json to all nodes on my chef server regardless of environment?
[2014-04-09 08:19:18 -0400] bahamas10: i'm using chef-solo, node.recipes and node.roles are both empty arrays, even though the node has roles & recipes
[2014-04-09 08:20:56 -0400] bahamas10: nvm... just had to `node.expand!('disk')`
[2014-04-09 09:00:28 -0400] roshan4074: Hi
[2014-04-09 09:01:03 -0400] roshan4074: How am i supposed to set an hostname using this cookbook : https://github.com/3ofcoins/chef-cookbook-hostname
[2014-04-09 09:02:40 -0400] roshan4074: anyone?
[2014-04-09 09:07:09 -0400] srenatus: roshan4074: apparently, you're supposed to set the attribute and include the default recipe
[2014-04-09 09:07:12 -0400] srenatus: roshan4074: https://github.com/3ofcoins/chef-cookbook-hostname#attributes
[2014-04-09 09:13:26 -0400] JensOfSweden: just do a override attribute on your node/role/enviornment with the attribute you want
[2014-04-09 09:13:47 -0400] roshan4074: srenatus: do you have any example of how you do it.  I added this to the default.rb file default_attributes :set_fqdn => 'rubymachine.qwinixtech.com'
[2014-04-09 09:14:10 -0400] srenatus: roshan4074: "the default.rb file" of what?
[2014-04-09 09:14:16 -0400] roshan4074: recipes*
[2014-04-09 09:14:39 -0400] roshan4074: srenatus: JensOfSweden i added it inside the recipes directory
[2014-04-09 09:16:03 -0400] JensOfSweden: the problem is if you add it to the recipe, it becomes static and not dynamic
[2014-04-09 09:16:16 -0400] mhenrixon: Hey guys
[2014-04-09 09:16:18 -0400] roshan4074: srenatus: JensOfSweden: exactly i dont want it statis
[2014-04-09 09:16:21 -0400] mhenrixon: in the nginx recipe
[2014-04-09 09:16:22 -0400] roshan4074: static*
[2014-04-09 09:16:46 -0400] JensOfSweden: roshan4074:  do you use environements?
[2014-04-09 09:16:51 -0400] mhenrixon: can I turn of the creation of the original nginx.conf file somehow? Delay stuff or something? I am bringning my own file
[2014-04-09 09:16:59 -0400] roshan4074: no
[2014-04-09 09:17:24 -0400] roshan4074: JensOfSweden: no i dont. I am sorry i am newbie.
[2014-04-09 09:18:10 -0400] JensOfSweden: roshan4074: aite, do you use roles? =)
[2014-04-09 09:18:51 -0400] roshan4074: As of now none. This is my 1st recipe that I am trying to use.
[2014-04-09 09:19:12 -0400] JensOfSweden: roshan4074: ok, it works on nodes roles and environments anyways so here goes
[2014-04-09 09:20:02 -0400] roshan4074: JensOfSweden: where do I get a sample of one such recipe?
[2014-04-09 09:20:23 -0400] JensOfSweden: roshan4074: what type of recipe?
[2014-04-09 09:20:34 -0400] roshan4074: to change the hostname of a system
[2014-04-09 09:20:43 -0400] roshan4074: i am using a community cookbook
[2014-04-09 09:20:45 -0400] Durzo: there is already a very good recipe to do this
[2014-04-09 09:20:52 -0400] Durzo: and it works very well
[2014-04-09 09:20:58 -0400] JensOfSweden: the cookbook your using is working great
[2014-04-09 09:21:06 -0400] roshan4074: Durzo: but how do i supply th erequired hostname
[2014-04-09 09:21:09 -0400] Durzo: http://community.opscode.com/cookbooks/hostname
[2014-04-09 09:21:13 -0400] Durzo: roshan4074, via JSON
[2014-04-09 09:21:18 -0400] JensOfSweden: just just need to override the default attribute with the one you want
[2014-04-09 09:21:19 -0400] roshan4074: ohk
[2014-04-09 09:23:51 -0400] JensOfSweden: in a role or env it should look something like this:  "override_attributes": { "cookbook-hostname ": { "set_fqdn": "*.mydomain.com"}},
[2014-04-09 09:24:00 -0400] roshan4074: knife bootstrap 192.168.0.100 --ssh-user roshan --ssh-password mypassword --run-list "recipe[chef-hostname]" --json-attributes {"set_fqdn" : "newhostname"} --sudo Durzo i am passing ths. hope this works
[2014-04-09 09:24:03 -0400] JensOfSweden: if i got my json correct
[2014-04-09 09:24:17 -0400] roshan4074: JensOfSweden: thanks a lot
[2014-04-09 09:24:44 -0400] Durzo: roshan4074, i usually set my node json through 'knife node edit'
[2014-04-09 09:24:45 -0400] JensOfSweden: roshan4074: use *.mydomain.com instead since the asterisk is the nodename
[2014-04-09 09:25:43 -0400] JensOfSweden: seems it defaults to the nodename anyways
[2014-04-09 09:26:22 -0400] roshan4074: Durzo: ok. So bootstrap is a wrong way! JensOfSweden does override_attibutes also needs to be passed from 'knife node edit'
[2014-04-09 09:26:53 -0400] Durzo: http://docs.opscode.com/essentials_node_object.html
[2014-04-09 09:27:14 -0400] Durzo: you want to put the json in the 'normal' attribute usually
[2014-04-09 09:27:22 -0400] Durzo: force_override is usually for environments
[2014-04-09 09:27:28 -0400] JensOfSweden: roshan4074: its not wrong if you are testing stuff, but if you want the attribute to hit 2000 hosts bootstrapping json attributes can be tedious =)
[2014-04-09 09:27:31 -0400] roshan4074: Durzo: ok
[2014-04-09 09:27:45 -0400] Durzo: see the attribute precedence table at the bottom of that page
[2014-04-09 09:29:43 -0400] JensOfSweden: mhenrixon: what do you meen?
[2014-04-09 09:30:24 -0400] mhenrixon: It just bothers me that the template is run several times on each chef/client run :)
[2014-04-09 09:30:41 -0400] Durzo: mhenrixon, hack up the recipe if you want to stop it from doing something
[2014-04-09 09:30:55 -0400] Durzo: or make your own
[2014-04-09 09:31:15 -0400] Durzo: quite often i find public recipes that are totally overkill for a simple task and i usually recreate them in a few liner recipe that better suits my needs
[2014-04-09 09:31:48 -0400] JensOfSweden: I usualy have the public cookbook as a base and then make a site-cookbook with the changes i want to the recipies and templates =)
[2014-04-09 09:31:52 -0400] mhenrixon: Durzo I do have my own but the nginx cookbook runs its own template first so my change is reverted to the cookbook version beginning of each run and then recreated by my own recipe
[2014-04-09 09:32:09 -0400] mhenrixon: JensOfSweden that is what I find myself doing as well
[2014-04-09 09:32:17 -0400] Durzo: mhenrixon, so hack it and get rid of the nginx.conf template all together
[2014-04-09 09:32:35 -0400] mhenrixon: Durzo I like the way you think :)
[2014-04-09 09:33:44 -0400] JensOfSweden: mhenrixon: just make the recipe in the site-cookbooks and add action :nothing to the standard tempate creation
[2014-04-09 09:35:16 -0400] JensOfSweden: roshan4074: did it work?
[2014-04-09 09:35:34 -0400] roshan4074: JensOfSweden: working on it.
[2014-04-09 09:35:39 -0400] Mr4k: just use chef-rewind to replace template
[2014-04-09 09:36:41 -0400] roshan4074: JensOfSweden: it wants me to ERROR: You must set your EDITOR environment variable or configure your editor via knife.rb
[2014-04-09 09:37:29 -0400] JensOfSweden: export EDITOR=vim
[2014-04-09 09:37:46 -0400] roshan4074: JensOfSweden: yep done.
[2014-04-09 09:39:02 -0400] JensOfSweden: now you can knife node edit
[2014-04-09 09:53:55 -0400] roshan4074: JensOfSweden: The update i made using knife node edit -a nodename
[2014-04-09 09:53:56 -0400] roshan4074:   "override": {
[2014-04-09 09:53:57 -0400] roshan4074:     "chef-cookbook-hostname": {
[2014-04-09 09:53:57 -0400] roshan4074:       "set_fqdn": "ruby.mydomain.com"
[2014-04-09 09:53:58 -0400] roshan4074:     }
[2014-04-09 09:54:33 -0400] roshan4074: after saving the changes when i do knife node show nodename, i dont see any changes
[2014-04-09 09:56:24 -0400] roshan4074: JensOfSweden: how do i update these changes to node ?
[2014-04-09 09:56:49 -0400] JensOfSweden: You need to rerun chef aswell
[2014-04-09 09:57:04 -0400] JensOfSweden: since it will then run your cookbook with the new attributes
[2014-04-09 09:57:07 -0400] roshan4074: JensOfSweden: do you mean bootstrap ?
[2014-04-09 09:57:31 -0400] JensOfSweden: i assume you run a chef server?
[2014-04-09 09:57:41 -0400] roshan4074: yes JensOfSweden
[2014-04-09 09:58:38 -0400] JensOfSweden: roshan4074: then bootstrap only installs chef and registers the node with the chefserver and runs chef once, you need to knife ssh name:"nodename" chef-client -x "user"
[2014-04-09 10:15:13 -0400] darron_____: I'm still getting CHEF-5041 errors with the current "fixed" omnibus package: https://tickets.opscode.com/browse/CHEF-5041 - errors here: https://gist.github.com/darron/f2947711d29409bb1d53 - this worked until the new release - any known workarounds for Packer and chef-solo?
[2014-04-09 10:17:29 -0400] GoT: Hi, I need a feedback about chef-solo. I defined a solo.rb with some values to specify environment, role_path, etc.. But I don't know how to specify the role of the node. Someone has an idea about how to specify the role name in command line?
[2014-04-09 10:18:40 -0400] JensOfSweden: GoT:  i use http://matschaffer.github.io/knife-solo/ for my solo needs.
[2014-04-09 10:19:13 -0400] GoT: JensOfSweden, Thanks I will look at this now ;)
[2014-04-09 10:33:41 -0400] darron_____: OK - skipping the "upgrade" from 11.10.4 to the current 11.12.0 fixes the problem - "skip_install" in template.json is helpful. No upgrade = no error.
[2014-04-09 10:41:39 -0400] darron_____: Ahh - actually it looks like this bug instead: https://tickets.opscode.com/browse/CHEF-5198
[2014-04-09 10:47:54 -0400] gregkare: darron_____: Yeah, 11.12.0 is broken for remote_file resources that use gzip, don't hesitate to post a comment or upvote it
[2014-04-09 10:48:03 -0400] gregkare: Oops just saw you posted :)
[2014-04-09 10:48:15 -0400] darron_____: Heh - yeah - all good.
[2014-04-09 10:48:48 -0400] bugoff: ./12
[2014-04-09 11:08:21 -0400] roshan4074: knife ssh 'name:baseos' "chef-client" -x roshan -P Qwinix123!
[2014-04-09 11:32:09 -0400] drrk: do we have an ETA on a new Chef Server to fix CVE-2014-0160 yet?
[2014-04-09 11:34:45 -0400] gregkare: Also, any news on https://tickets.opscode.com/browse/CHEF-5198 would be good, 11.12.0 is broken for remote gzipped files
[2014-04-09 12:33:30 -0400] GoT: Hi, I tried to play with this cookbook: https://github.com/stackforge/cookbook-openstack-common but something went wrong, I always received this message: ERROR: uninitialized constant Openstack. Is what I must add something to include libraries directory?
[2014-04-09 12:37:30 -0400] chef065: hi
[2014-04-09 12:37:48 -0400] chef065: i am getting error while installing sensu-client using bootstrap
[2014-04-09 12:38:36 -0400] JensOfSweden: GoT: You should try rackspace:s chef bootstraps unless there is anything perticular that you want from the opscode ones =)
[2014-04-09 12:40:09 -0400] chef065: here is error info:http://www.pastebin.ca/2693457
[2014-04-09 12:40:18 -0400] JensOfSweden: GoT: https://github.com/rcbops/chef-cookbooks
[2014-04-09 12:40:20 -0400] chef065: any idea why it's failing
[2014-04-09 12:41:04 -0400] rayrod2030: chef065: what distro?
[2014-04-09 12:42:00 -0400] GoT: JensOfSweden, That's not what I need, I'm currently make a P.O.C between chef and puppet and I must try to use stackforge recipes / manifests instead of others repository :/
[2014-04-09 12:42:29 -0400] JensOfSweden: chef065: looks like it had an error doing the yum install sensu, have you tried manually installed the package on the machine?  /var/chef/cache/chef-stacktrace.out should tell you what oneliner its trying to use
[2014-04-09 12:43:15 -0400] JensOfSweden: GoT: ahh .. ok. Havnt used the opscode cookbooks for openstack myself so cant say why it produces that error of the bad
[2014-04-09 12:43:20 -0400] JensOfSweden: s/bad/bat
[2014-04-09 12:43:46 -0400] GoT: JensOfSweden, Thanks you anyway ;)
[2014-04-09 12:44:48 -0400] chef065: centos 6.4
[2014-04-09 12:44:59 -0400] GoT: JensOfSweden, For you information, after reading some cookbooks from opscode (keystone, nova and others, theses repositories have been deprecated in flavor of the Chef and Openstack community)
[2014-04-09 12:48:57 -0400] JensOfSweden: GoT: Hope your poc goes well =)
[2014-04-09 12:49:41 -0400] GoT: JensOfSweden, Need to use chef instead of puppet :( don't want to play with this f****n puppet dsl :/
[2014-04-09 12:51:07 -0400] JensOfSweden: GoT: so used to chef now adays i dont want to go to anything else =)
[2014-04-09 12:51:48 -0400] GoT: That's exactly the
[2014-04-09 12:52:12 -0400] GoT: JensOfSweden, That's excatly what my coworker says
[2014-04-09 12:52:17 -0400] chef065: any idea why is giving this error
[2014-04-09 12:52:54 -0400] JensOfSweden: chef065: have you tried running the oneliner manually on the server? Have you checked out the stacktrace to see what it fails on?
[2014-04-09 12:53:09 -0400] roshan4074: JensOfSweden: after entering the override part i get this : FATAL: 1 node found, but does not have the required attribute to establish the connection. Try setting another attribute to open the connection using --attribute.
[2014-04-09 12:53:28 -0400] roshan4074: JensOfSweden: what could this possibly mean ?
[2014-04-09 12:54:33 -0400] roshan4074: JensOfSweden: I get this after ------- knife ssh 'name:nodename' "chef-client" -x root -P Mypassword
[2014-04-09 12:58:43 -0400] chef065: i have checked the stacktrace file here is contains but not getting idea:http://www.pastebin.ca/2693469
[2014-04-09 12:59:13 -0400] rayrod2030: chef065: you probably need epel
[2014-04-09 13:00:09 -0400] rayrod2030: chef065: See if you can install manually from these instructions as a first step: http://sensuapp.org/docs/0.12/packages
[2014-04-09 13:00:28 -0400] rayrod2030: will give you a good sense on what package source deps you might need.
[2014-04-09 13:00:44 -0400] JensOfSweden: saw in the first error that it adds the .repo file but it doesnt update yum so i guess it doesnt load in the repo file?
[2014-04-09 13:00:51 -0400] rayrod2030: for rhel based looks like sensu uses it's own repo.
[2014-04-09 13:01:08 -0400] rayrod2030: jens: yeah looks that way
[2014-04-09 13:04:55 -0400] chef065: ok i try that
[2014-04-09 13:12:19 -0400] zanshin: Does anyone know of a good writeup on best practices for managing the box image on all Chef nodes? Once we have our 80+ nodes up and running what's the best way to keep the underlying OS up-to-date and current?
[2014-04-09 13:14:55 -0400] JensOfSweden: zanshin: like updating the core packages on all your boxes that the cookbooks doesnt cover in the recipies?
[2014-04-09 13:18:10 -0400] zanshin: Well, that too, but specifically how best to keep the OS up-to-date. We are using Ubuntu 12.04 LTS. Started with .2 but the current version is .4. Do we update in place or spin up a new node with a new OS image and swap?
[2014-04-09 13:21:27 -0400] rbonham: Hi. Has an update been released yet for Chef Enterprise, to patch the heartbleed bug in openssl? I have only seen the blog post regarding new clients.
[2014-04-09 13:21:39 -0400] JensOfSweden: zanshin: it all depends on your environment
[2014-04-09 13:23:04 -0400] JensOfSweden: zanshin: its a rather boring answer, but i use a local repo and a cookbook to handle updates
[2014-04-09 13:26:18 -0400] chef065: how to print the info while running/executing the recipe on command line
[2014-04-09 13:26:53 -0400] JensOfSweden: chef065: ?
[2014-04-09 13:28:01 -0400] GoT: cheeseplus, print info ? Chef::Log.info('my message') ?
[2014-04-09 13:28:41 -0400] chef065: i tried that it's not printing the value of variable
[2014-04-09 13:29:06 -0400] chef065: i want while running the recipe some variable value should be display
[2014-04-09 13:29:44 -0400] chef065: i tried both  Chef::Log.info and Chef::log.debug  but it's not working
[2014-04-09 13:30:58 -0400] JensOfSweden: if you append -l debug at the end it should run in debug mode
[2014-04-09 13:31:05 -0400] JensOfSweden: then you see everything it does
[2014-04-09 13:31:06 -0400] GoT: chef065, Seems the code does not run this command or if you print only a variable with nil value, the Chef::Log will render nothing
[2014-04-09 13:32:35 -0400] GoT: chef065, just a guess :)
[2014-04-09 13:33:54 -0400] chef065: ok i checked that
[2014-04-09 13:39:18 -0400] michaelhart: rbonham: It doesnt look like it, nothing on their blog or at http://www.getchef.com/chef/install/ yet. Im not sure what else to do apart from wait
[2014-04-09 13:41:57 -0400] JensOfSweden: GoT: if your running chef-solo to provision your openstack PoC you should take a look at knife-solo
[2014-04-09 13:42:30 -0400] docwhat: Newbie question... how can I run a local operation out against each host? I'm (mentally) thinking something like: knife search '*:*' exec Heartbleed {hostname}
[2014-04-09 13:42:58 -0400] docwhat: or knife search '*:*' | xargs Heartbleed
[2014-04-09 13:43:52 -0400] JensOfSweden: docwhat: you trying to run something on your nodes?
[2014-04-09 13:44:04 -0400] tcate: docwhat:  knife ssh "*:*" | xargs Heartbleed
[2014-04-09 13:44:21 -0400] docwhat: JensOfSweden: I have a local command on my workstation, Heartbleed. It checks for the Heartbleed vulnerability on https.
[2014-04-09 13:46:10 -0400] rayrod2030: JensOfSweden: https://github.com/titanous/heartbleeder
[2014-04-09 13:46:21 -0400] rayrod2030: JensOfSweden: https://gobuild.io/download/github.com/titanous/heartbleeder
[2014-04-09 13:46:42 -0400] docwhat: rayrod2030: I'm actually using https://github.com/FiloSottile/Heartbleed
[2014-04-09 13:46:50 -0400] rayrod2030: That's what I've been using to test endpoints
[2014-04-09 13:48:40 -0400] docwhat: Ah, I just figured it out, I think: knife exec -E 'print search(:node, "*:*").map(&:fqdn).join "\0"' | xargs -0tn1 Heartbleed
[2014-04-09 13:54:34 -0400] emmettke: Hi Guys, just updated chef-client to 11.12 and now the notification timer is not queued to the end of the chef run but rather executed immediately
[2014-04-09 13:55:13 -0400] emmettke: Here is an excerpt from my recipe subscribes :run, "remote_file[xxxxx_.pfx]", :delayed
[2014-04-09 13:56:34 -0400] docwhat: ah, it looks like chef-server 11.0.11 is vulnerable to heartbleed. Yay!
[2014-04-09 13:57:40 -0400] Nukepuppy: so is most of the internets ;p
[2014-04-09 13:58:35 -0400] docwhat: Nukepuppy: Yeah, but I'm trying to fit my part of the internet.
[2014-04-09 13:58:36 -0400] docwhat: :-/
[2014-04-09 14:24:19 -0400] fveillette: Hi, I have an issue with remote_file resource when i try to copy a file from a local location on a server. can someone help?
[2014-04-09 14:29:19 -0400] notromda: ServerAlias #<Chef::DelayedEvaluator:0x00000001bcab50@/var/chef/cache/cookbooks/wested/recipes/canvas.rb:197>
[2014-04-09 14:29:32 -0400] notromda: That's not what I expected lazy to do :(
[2014-04-09 14:29:58 -0400] CPS: getting a cryptic error when trying to upload to server. pwd is the local git repo https://gist.github.com/anonymous/10276978
[2014-04-09 14:30:11 -0400] CPS: looks like a knife config error, but not sure what setting is off
[2014-04-09 14:34:40 -0400] fveillette: Hi, I have an issue with remote_file resource when i try to copy a file from a local location on a server. can someone help?
[2014-04-09 14:39:51 -0400] cbarraford: is it just me or is there no heartbleed patch for chef-server yet??
[2014-04-09 14:40:00 -0400] cbarraford: omnibus package
[2014-04-09 14:42:04 -0400] m4rcu5: cbarraford: i'm tailing the mailinglist and havent seen the announcement yet
[2014-04-09 14:42:13 -0400] m4rcu5: waiting for the server package aswell
[2014-04-09 14:42:19 -0400] cbarraford: ok
[2014-04-09 14:42:21 -0400] cbarraford: thanks
[2014-04-09 14:52:53 -0400] fveillette: Hi, I have an issue with remote_file resource when i try to copy a file from a local location on a server. can someone help?
[2014-04-09 14:53:53 -0400] phutchins: fveillette: what is the issue? Are you getting errors?
[2014-04-09 14:54:07 -0400] fveillette: let me do a gist of my code and error output :)
[2014-04-09 14:54:17 -0400] phutchins: fveillette: sounds good. :)
[2014-04-09 14:55:07 -0400] fveillette: https://gist.github.com/anonymous/10279694
[2014-04-09 14:55:11 -0400] fveillette: this is the code
[2014-04-09 14:55:21 -0400] fveillette: https://gist.github.com/anonymous/10279647
[2014-04-09 14:55:26 -0400] fveillette: this is the chef-run error
[2014-04-09 14:57:24 -0400] notromda: Why is lazy{} not evaluating now?
[2014-04-09 14:57:27 -0400] notromda: ServerName #<Chef::DelayedEvaluator:0x00000001d79410@/var/chef/cache/cookbooks/wested/recipes/canvas.rb:196>
[2014-04-09 15:01:11 -0400] phutchins: fveillette: looking...
[2014-04-09 15:03:05 -0400] fveillette: ok phutchins
[2014-04-09 15:03:47 -0400] phutchins: fveillette: thats weird. does chef know that you're on windows and shoudl be using the windows remote_file resource?
[2014-04-09 15:04:05 -0400] phutchins: fveillette: and can chef access (permissions) the file its trying to source?
[2014-04-09 15:06:04 -0400] phutchins: and you sure your cookbooks are updated and running what you pasted? i see theres one spot with /c/ and not /c:/
[2014-04-09 15:06:18 -0400] fveillette: normally i run it with my admin account so chef should have acces to the file
[2014-04-09 15:06:22 -0400] phutchins: in the error... but in your source i see you've included c: in all
[2014-04-09 15:06:37 -0400] fveillette: ye
[2014-04-09 15:06:39 -0400] fveillette: yes
[2014-04-09 15:06:49 -0400] fveillette: i don't understand what's going on
[2014-04-09 15:07:12 -0400] fveillette: i'm tempted to do that in pure ruby since the remote_file resource don't seem to work for me
[2014-04-09 15:09:24 -0400] workmad3: fveillette: I've seen files copied with the template resource... and with a file resource
[2014-04-09 15:09:48 -0400] fveillette: yes i've seen that too
[2014-04-09 15:10:02 -0400] workmad3: fveillette: e.g. 'template "c:/MPE/#{servicename}/PunchServer.exe" do; source "c:/MPE/Source/PunchServer.exe"; end'
[2014-04-09 15:10:27 -0400] fveillette: but i thouth remote file will be more "clean"
[2014-04-09 15:12:19 -0400] notromda: apparently the web_app  resource doesn't like the lazy attribute construct
[2014-04-09 15:13:18 -0400] PapaSierra: can i put a "notifies" inside a "link" resource? i can't see where this is documented
[2014-04-09 15:13:41 -0400] bmhatfield: PapaSierra: yes, the documentation is on "meta parameters"
[2014-04-09 15:13:56 -0400] PapaSierra: bmhatfield: cheers
[2014-04-09 15:14:01 -0400] bmhatfield: http://docs.opscode.com/resource_common.html#notifications
[2014-04-09 15:14:16 -0400] workmad3: notromda: it's possible to write a lwrp that bugs out on them, yes (I managed it myself where I accidentally got the attribute without using set_or_return, so bypassed the code in there that calls .call() on the evaluator)
[2014-04-09 15:15:14 -0400] phutchins: Anyone have any experience compiling chef server?
[2014-04-09 15:15:18 -0400] phutchins: I'm getting errors and am stuck...
[2014-04-09 15:34:01 -0400] heath_: Anyone know if the notifies action supports if blocks?  For instance:  notifies(:stop, "service[#{service_name}]", :immediately) if Win32::Service.exists?(service_name)
[2014-04-09 15:35:24 -0400] douglaswth: heath_: that is a feature of the ruby language not notifies
[2014-04-09 15:41:36 -0400] CPS: heath_: i've done similar things with if/end blocks
[2014-04-09 15:42:46 -0400] heath_: thx doublaswth.  can I just notifies and wrap the notified resource in an if block then?  For instance if Win32::Service.exists?(service_name)         service service_name do           action :nothing         end       end
[2014-04-09 15:43:19 -0400] workmad3: heath_: sure... just be careful to keep in mind that the conditional for the 'if' will be evaluated at compile time, not converge time
[2014-04-09 15:44:01 -0400] heath_: cool, that works
[2014-04-09 15:48:26 -0400] jtran: hi all.  i am in a firewalled env the only outbound internet connectivity is via http_proxy.  I know how to set it so that each individual resource will take an ENV var *BUT* i don't think it's feasible to go in and modify each recipe in my chef-repo to accomodate that individually.  Is there a way to set GLOBALLY so that chef will use that env var?  I've tried putting the http_proxy var in /etc/environment but it doesn't appear
[2014-04-09 15:48:26 -0400] jtran: chef-client picks this up when it executes
[2014-04-09 15:49:07 -0400] workmad3: jtran: there's a --http-proxy option for chef-client that modifies all the connections it makes
[2014-04-09 15:49:30 -0400] workmad3: or at least, I thought there was
[2014-04-09 15:50:07 -0400] jtran: workmad3: thx i'll look into that.   do u know if there's any other way to set global env for chef-client?
[2014-04-09 15:50:08 -0400] workmad3: jtran: ah, it's options in the client.rb config, http://docs.opscode.com/config_rb_client.html
[2014-04-09 15:50:23 -0400] jtran: excellent!  thanks!
[2014-04-09 15:52:37 -0400] segv: jkeiser, lol the twitter battle ensues after my post
[2014-04-09 15:52:56 -0400] segv: Checked my email this morning after that tweet and BOOM like 40 emails, should've setup a filter for that
[2014-04-09 16:17:40 -0400] double_p: oi.. http://www.getchef.com/blog/event/3-day-chef-fundamentals-reykjavik-iceland/
[2014-04-09 16:27:55 -0400] PleasureTown: poop
[2014-04-09 16:30:48 -0400] heath_: poop
[2014-04-09 16:31:04 -0400] xorl: I was going to ask what that was about, seeing as it's trending now
[2014-04-09 16:31:33 -0400] double_p: poop trends 1-2 a day? :}
[2014-04-09 16:37:45 -0400] notromda: :poop: if campfire emoji is enabled.
[2014-04-09 16:41:46 -0400] jtran: hmm.. not having much luck w/ the http(s)_proxy settings in my /etc/chef/client.rb.   I verified myproxy works when on my shell $ export https_proxy="http://172.29.128.11:3128"  <--- chef-client finishes successfully.
[2014-04-09 16:42:08 -0400] jtran: when i don't do the export https_proxy from my shell, if i just chef-client w/ the following settings, pip install setuptool fails.
[2014-04-09 16:42:48 -0400] jtran: sorry my irc client crashed
[2014-04-09 16:43:04 -0400] lostops: Hello everyone,  I have a problem with OSX 10.9 and running knife configure initial after the install.  I get the following:  ERROR: Ohai::Exceptions::DependencyNotFound: Can not find a plugin for dependency os
[2014-04-09 16:43:06 -0400] jtran: here is what my client.rb http(s)_proxy looks like:   # grep proxy /etc/chef/client.rb
[2014-04-09 16:43:07 -0400] jtran: http_proxy "http://172.29.128.11:3128"
[2014-04-09 16:43:08 -0400] jtran: https_proxy "http://172.29.128.11:3128"
[2014-04-09 16:43:35 -0400] lostops: any idea as to what the issue could be
[2014-04-09 16:47:33 -0400] workmad3: jtran: those lines in client.rb set the http proxy for the chef-client and any connections it makes... it doesn't control anything for network connections made when you shell out to other processes
[2014-04-09 16:48:26 -0400] jtran: workmad3 so the python::pip cookbook/recipe will have to explicitly set that https_prxoy var?
[2014-04-09 16:48:42 -0400] gmcinnes1: ohai chefs. Did y'all re-key users on hosted chef due to heartbleed?   I'm getting an "Invalid signature for user" message for my pem file now!
[2014-04-09 16:48:43 -0400] jtran: as well as every single resource of every single recipe
[2014-04-09 16:49:28 -0400] workmad3: jtran: most resources don't need network connections, of those that do, most will create the connection through chef and therefore pick up the chef-client
[2014-04-09 16:49:48 -0400] gleam: but yes, stuff like gem_package and probably pip will need it
[2014-04-09 16:49:58 -0400] jtran: so the pip install setuptools that's being executed from the python cookbook, should use the http(s)_proxy settings in client.rb?
[2014-04-09 16:51:24 -0400] jtran: workmad3:  ok sounds like then every single resource that uses internet connecity, will require explicity env var set.  *sigh*
[2014-04-09 16:51:45 -0400] jtran: is there a way to set env vars globally for chef-client runs?
[2014-04-09 16:52:14 -0400] workmad3: jtran: you could try doing 'ENV["ALL_PROXY"] = "your proxy" ' also in client.rb
[2014-04-09 16:52:26 -0400] jtran: nice!  lemme try that
[2014-04-09 16:52:28 -0400] workmad3: jtran: but if an execute resource overrides the environment then that may not work
[2014-04-09 16:53:18 -0400] workmad3: jtran: http://docs.opscode.com/essentials_environment_variables.html
[2014-04-09 16:53:37 -0400] jtran: workmad3: indeed i read that but it doesn't really allude to client.rb anywhere in there
[2014-04-09 16:53:56 -0400] jtran: so it's unclear what they're trying to convey other than a primer for unix env vars
[2014-04-09 16:54:13 -0400] jtran: it would've been more clear if they specify how those env vars relate to chef
[2014-04-09 16:54:40 -0400] workmad3: jtran: well none of this is really how env vars relate to chef
[2014-04-09 16:54:47 -0400] workmad3: jtran: it's all just unix env vars in general...
[2014-04-09 16:54:51 -0400] jtran: right so how did u know that you can set  'ENV["ALL_PROXY"] = "your proxy" ' in client.rb?
[2014-04-09 16:55:07 -0400] workmad3: jtran: because client.rb is a ruby file that's run at the start of a chef run
[2014-04-09 16:55:32 -0400] workmad3: jtran: and the $ALL_PROXY env var is used for setting HTTP_PROXY and HTTPS_PROXY at the same time for many things that read the env var for proxies
[2014-04-09 16:55:34 -0400] jtran: aah ok. i guess the.rb ext should've gave me a clue to that but i thought it was just a conf file.
[2014-04-09 16:55:37 -0400] jtran: nice
[2014-04-09 16:55:46 -0400] workmad3: jtran: as I said, not really anything chef specific there :)
[2014-04-09 16:56:19 -0400] jtran: now that you put i tthat way, it does make sense
[2014-04-09 16:56:27 -0400] joelmoss: can anyone help please? now running 11.0.12 and now Im getting Chef::Exceptions::ContentLengthMismatch errors whenever attempting to download files with remote_file
[2014-04-09 16:57:24 -0400] double_p: joelmoss: https://tickets.opscode.com/browse/CHEF-5198
[2014-04-09 16:58:09 -0400] joelmoss: wow, thats not good
[2014-04-09 16:58:12 -0400] joelmoss: thx double_p
[2014-04-09 16:58:36 -0400] double_p: best guess, rushing releases is bad :}
[2014-04-09 16:59:04 -0400] joelmoss: hmmm
[2014-04-09 17:00:51 -0400] lostops: Anyone run into this 'ERROR: Ohai::Exceptions::DependencyNotFound: Can not find a plugin for dependency os' when running knife configure
[2014-04-09 17:02:10 -0400] lostops: I've searched everyone where with no luck.  I have tried uninstalling and reinstalling with omninstaller, .pkg file and manually via gem install
[2014-04-09 17:04:07 -0400] double_p: 'os' not found? maybe the ruby install snafu?
[2014-04-09 17:09:31 -0400] kbarry: I'd like to call the entironment the node is in, in a recipe.
[2014-04-09 17:09:34 -0400] kbarry: I want to say the syntax would be
[2014-04-09 17:09:48 -0400] kbarry: #{node['chef_environment']} but I think i remember someone saying it is not that.
[2014-04-09 17:12:57 -0400] lostops: double_p:  I'm not a big ruby guy.  What would I check for a ruby install snafu?
[2014-04-09 17:14:04 -0400] double_p: lostops: neither am i, dunno how/where to check that properly. but 'os' is a very basic package and if ruby cannot find that, there's something very fishy
[2014-04-09 17:14:29 -0400] jmickle: alright i need some opinions
[2014-04-09 17:14:33 -0400] jmickle: cloudstack vs openstack
[2014-04-09 17:14:34 -0400] jmickle: go....
[2014-04-09 17:16:36 -0400] alexbst: openstack has fewer characters.
[2014-04-09 17:16:49 -0400] jmickle: elaborate please
[2014-04-09 17:18:08 -0400] double_p: jmickle: uhm.. we chose cloudstack, since xenserver intergration is 'better'
[2014-04-09 17:18:23 -0400] jmickle: ty
[2014-04-09 17:19:19 -0400] martinisoft: Is there a SSL patched omnibus erchef release pending?
[2014-04-09 17:19:36 -0400] double_p: 'knife cs' is just nice .. but i've never seen openstack to compare it
[2014-04-09 17:19:44 -0400] jmickle: ok
[2014-04-09 17:19:48 -0400] jmickle: ty double_p
[2014-04-09 17:19:58 -0400] jmickle: im leaning towards cloudstack for sure
[2014-04-09 17:20:06 -0400] jmickle: but wanted opinions
[2014-04-09 17:20:25 -0400] double_p: what's your HV?
[2014-04-09 17:22:29 -0400] jmickle: kvm at the moment but that could change
[2014-04-09 17:22:50 -0400] jmickle: i hear lots of problems with cloud stack in infrastructures greater then 2000-3000 nodes nodes
[2014-04-09 17:23:00 -0400] jmickle: nodes*
[2014-04-09 17:23:41 -0400] jmickle: any comment about that?
[2014-04-09 17:24:15 -0400] double_p: i live in <1000 nodes land
[2014-04-09 17:24:36 -0400] jmickle: hmm
[2014-04-09 17:24:37 -0400] doomviking: me too
[2014-04-09 17:25:54 -0400] jtran: jmickle:  openstack ftw
[2014-04-09 17:26:06 -0400] jmickle: jtran why?
[2014-04-09 17:26:18 -0400] jtran: its the most extensible
[2014-04-09 17:26:30 -0400] Popsikle-Work: jesus the new updates totally break everythign dont they
[2014-04-09 17:26:32 -0400] double_p: aka "most hassle" :)
[2014-04-09 17:26:43 -0400] jtran: and scalable.  cern has 10k nodes one cloud zone
[2014-04-09 17:26:53 -0400] jtran: yes def most hassle as well
[2014-04-09 17:26:57 -0400] jmickle: hehe
[2014-04-09 17:27:12 -0400] jmickle: i wasnt thrilled with openstacks lack of documentation
[2014-04-09 17:27:28 -0400] jtran: jmickle:  true
[2014-04-09 17:27:30 -0400] Popsikle-Work: its nto really docs because its not really a platform
[2014-04-09 17:27:35 -0400] Popsikle-Work: its a bunch fo stuff that you can toss in
[2014-04-09 17:27:37 -0400] Popsikle-Work: to make a platform
[2014-04-09 17:27:39 -0400] double_p: jtran: i try to remember what my brother has at kit.edu, they process CERN data from LHC. i know the distro is scientificlinux, but stack. hmm
[2014-04-09 17:28:22 -0400] double_p: could be it's some cray prop anyway
[2014-04-09 17:29:19 -0400] a13x212: trying to use the resolver cookbook, getting the following error when uploading: FATAL: /home/amendoza/chef-repo/cookbooks/resolver/recipes/default.rb:24: Invalid return
[2014-04-09 17:31:33 -0400] Popsikle-Work: 23.253.125.33 [2014-04-09T17:30:39+00:00] ERROR: remote_file[/var/chef/cache/get-pip.py] (python::pip line 42) had an error: Chef::Exceptions::ContentLengthMismatch: Response body length 1563245 does not match HTTP Content-Length header 1184584.
[2014-04-09 17:31:33 -0400] Popsikle-Work: 23.253.125.33 [2014-04-09T17:30:40+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-04-09 17:31:37 -0400] Popsikle-Work: how do I fix that?
[2014-04-09 17:31:56 -0400] Popsikle-Work: i have the fix from CHEF-5100 applied
[2014-04-09 17:34:07 -0400] jtran: double_p: http://openstack-in-production.blogspot.com/2014/02/our-cloud-in-havana.html
[2014-04-09 17:36:03 -0400] double_p: jtran: right on.. just generally, most flexible means much work. and for our "small" installation we chose xenserver/cloudstack over xen|kvm+openstack. EMMV. but since jmickle asked for >2000, he might need that part of flexible
[2014-04-09 17:36:11 -0400] jtran: def you're spot on there
[2014-04-09 17:36:31 -0400] jtran: MASSIVE more work.  depends if u need the extra features. if not, then def don't use it
[2014-04-09 17:36:36 -0400] jtran: sorta like osx vs linux.
[2014-04-09 17:36:40 -0400] jtran: if u don't need the flexibility go osx
[2014-04-09 17:36:51 -0400] jtran: but if u need the enterprise flexibility go linux
[2014-04-09 17:37:07 -0400] double_p: the analogy is a bit weird, but yes :)
[2014-04-09 17:37:10 -0400] jtran: linux has a much larger learning curve clearly
[2014-04-09 17:37:23 -0400] double_p: not that chef has no "curve" :D
[2014-04-09 17:37:33 -0400] jtran: don't even get me started w/ chef curve
[2014-04-09 17:37:36 -0400] jtran: but all cms do
[2014-04-09 17:37:40 -0400] jtran: cfengine is far worse imo
[2014-04-09 17:37:42 -0400] double_p: yeah
[2014-04-09 17:37:44 -0400] jtran: learning curve
[2014-04-09 17:38:02 -0400] jmickle: interesting
[2014-04-09 17:38:17 -0400] double_p: one told me he's having 11 datacentres and whatnot-thousands nodes, some in AWS. and he is doing that in *ansible*
[2014-04-09 17:38:41 -0400] double_p: everyone picks HIS insanity :)
[2014-04-09 17:38:46 -0400] jtran: double_p: my guess is that bluebox?  from what i hear they're the only shop using ansible
[2014-04-09 17:39:02 -0400] jtran: and they're very loud about it.  i'm still not convinced altho i haven't tried ansible
[2014-04-09 17:39:06 -0400] double_p: i dont know
[2014-04-09 17:39:10 -0400] vegardx: There are lots of big ansible and saltstack deployments around.
[2014-04-09 17:39:23 -0400] jtran: vegardx:  ansible?  i'm surprised.  who uses it?
[2014-04-09 17:39:33 -0400] jtran: i mean who uses it "in production"?
[2014-04-09 17:39:37 -0400] jtran: not in lab and dev
[2014-04-09 17:40:02 -0400] Corey: Yeah, I don't know as Ansible has a big-name client yet.
[2014-04-09 17:40:05 -0400] Corey: Saltstack has LinkedIn.
[2014-04-09 17:40:29 -0400] jtran: right.  ansible is still imo hawtness
[2014-04-09 17:40:32 -0400] vegardx: I'm actually looking to move over to saltstack my self.
[2014-04-09 17:40:38 -0400] double_p: and *noone* uses it solely.. always ask about "how do you close the GAPS"
[2014-04-09 17:41:10 -0400] double_p: which also applies to chef, at least for me on the level we are now
[2014-04-09 17:41:25 -0400] jtran: i mean there are tons of peple who use X.  just how many people use X actually in their production env?
[2014-04-09 17:41:39 -0400] vegardx: There are people with buttloads of servers not using anything.
[2014-04-09 17:41:44 -0400] jtran: everyone is dabbling with all sorts of new hawtness that's for sure
[2014-04-09 17:41:52 -0400] vegardx: I think they'd be better of with ansible, even if it's supposedly "bad".
[2014-04-09 17:42:05 -0400] jtran: but to actually put your bet that it'll work in production.  diff story
[2014-04-09 17:42:20 -0400] vegardx: I think Chef is a pain in the ass, because it relies on ruby, which is a mess beyond repair.
[2014-04-09 17:42:31 -0400] double_p: jtran: yeah right.. latest when it comes to "application" level
[2014-04-09 17:42:47 -0400] double_p: i was about to coin the term of WATaaS :-)
[2014-04-09 17:43:08 -0400] jtran: vegardx: +1
[2014-04-09 17:43:45 -0400] double_p: jtran: linux is a pain in the ass, because bash? (oldfart here who likes ksh93) point being?
[2014-04-09 17:44:06 -0400] jtran: double_p:  i'm not saying linux is a pita
[2014-04-09 17:44:11 -0400] jtran: i'm saying linux has a much larger learning curve than osx
[2014-04-09 17:44:25 -0400] jtran: like driving a ferrari has a much larger learning curve than driving a prius
[2014-04-09 17:44:28 -0400] jmickle: yeah i think its going to have to be openstack
[2014-04-09 17:44:33 -0400] jtran: yes my analogies are fun.
[2014-04-09 17:44:34 -0400] jmickle: cisco UCS doesnt support cloudstack
[2014-04-09 17:44:36 -0400] jmickle: doh
[2014-04-09 17:44:37 -0400] double_p: jtran: uhm
[2014-04-09 17:44:53 -0400] jtran: jmickle:  cisco is huge on openstack. their ucs offering is very aggressive w /openstack righ tnow
[2014-04-09 17:45:02 -0400] jmickle: yeah
[2014-04-09 17:45:38 -0400] double_p: jtran: ever drove a ferrari? :]
[2014-04-09 17:45:51 -0400] jtran: double_p: ya i have
[2014-04-09 17:45:51 -0400] jtran: modena360
[2014-04-09 17:46:03 -0400] double_p: F355 spyder here
[2014-04-09 17:46:09 -0400] double_p: ^5 :)
[2014-04-09 17:46:26 -0400] jtran: nice!
[2014-04-09 17:46:34 -0400] jtran: that one is even better for my analogy. learning curve
[2014-04-09 17:46:37 -0400] double_p: but i never drove a prius :}
[2014-04-09 17:46:50 -0400] jtran: prius is like driving a remote controlled electric civic
[2014-04-09 17:46:52 -0400] jtran: it's simple
[2014-04-09 17:47:13 -0400] jtran: any rear wheel drive nonetheless will have a steeper learning curve than driving a japanese hybrid vehicle fwd
[2014-04-09 17:47:53 -0400] jtran: for one , it is a stick shift
[2014-04-09 17:47:56 -0400] double_p: jtran: my 'toy' mobile http://data.motor-talk.de/data/galleries/553606/5009168/eiskurve-rreifen-37576.jpg
[2014-04-09 17:48:03 -0400] jtran: NICE!
[2014-04-09 17:48:18 -0400] jtran: so u know what i'm saying w/ my analogy double_p
[2014-04-09 17:48:26 -0400] double_p: jtran: sure :)
[2014-04-09 17:48:45 -0400] jtran: this is my toy double_p http://img344.imageshack.us/img344/3219/lambo6du.jpg
[2014-04-09 17:48:48 -0400] double_p: jtran: and i overtake all the ferri-wannabes ;-)
[2014-04-09 17:49:03 -0400] jtran: i bet.  your vehicle is made for tracking.  no comparison
[2014-04-09 17:49:11 -0400] double_p: slicks :)
[2014-04-09 17:49:29 -0400] double_p: jtran: what's that C7? ZR-whatever?
[2014-04-09 17:49:35 -0400] jtran: plus i'd be scared to hurt my/a ferrari on the track. so you'll know i'd baby it and not drive it hard
[2014-04-09 17:49:39 -0400] jtran: double_p: 1998 c5
[2014-04-09 17:50:25 -0400] jtran: tbh i don't track it often.  i should tho.
[2014-04-09 17:50:46 -0400] double_p: hm, try the C7
[2014-04-09 17:50:58 -0400] jtran: double_p: sure, just pony up the $$ and i will do it :)
[2014-04-09 17:51:00 -0400] double_p: that's "universe changing"
[2014-04-09 17:51:03 -0400] jtran: it's only like what.. $80gs?
[2014-04-09 17:51:23 -0400] double_p: i dont know, i like my small yellow thingy :)
[2014-04-09 17:51:27 -0400] jtran: i can trade in my 98 for like ~13k right now so only 67k to go
[2014-04-09 17:52:04 -0400] maplebed: Man, it's hard to get my mind around all the tools to test chef cookbooks. Mostly because there's a smattering of articles written over the last 3 years all of which mention tools at different levels of development, some of which have changed names. Most annoying is when a post doesn't have a datestamp...
[2014-04-09 17:52:13 -0400] jtran: ok i gotta get on this stupid http_proxy thing
[2014-04-09 17:52:16 -0400] double_p: i think we should take that to a query before they go mad?
[2014-04-09 17:52:30 -0400] maplebed: Is cucumber-chef still a thing?
[2014-04-09 17:58:21 -0400] doomviking: I can go as slow as I want in my baby. http://bringatrailer.com/wp-content/plugins/PostviaEmail/images/1965_Chrysler_300_2_Door_Hardtop_Front_resize.jpg
[2014-04-09 18:00:31 -0400] Popsikle-Work: dfbghndfgkszhjdrfgszohujndfghfghfsgj
[2014-04-09 18:00:34 -0400] Popsikle-Work: every single new server
[2014-04-09 18:00:39 -0400] Popsikle-Work: is unable to use the chef server
[2014-04-09 18:01:57 -0400] ichilton: vagrant@personal:~$ knife configure --initial
[2014-04-09 18:01:57 -0400] ichilton: WARNING: No knife configuration file found
[2014-04-09 18:01:58 -0400] ichilton: Where should I put the config file? [/home/vagrant/.chef/knife.rb]
[2014-04-09 18:01:58 -0400] ichilton: ERROR: Ohai::Exceptions::DependencyNotFound: Can not find a plugin for dependency os
[2014-04-09 18:02:00 -0400] ichilton: Any ideas?
[2014-04-09 18:02:08 -0400] ichilton: It's just an Ubuntu 12.04 vagrant box....
[2014-04-09 18:08:52 -0400] justizin: any chance anyone has chef code for setting up londiste replication for postgres?
[2014-04-09 18:18:29 -0400] justizin: worth a shot ;)
[2014-04-09 18:24:47 -0400] atomic-penguin: perl cookbook borked, probably heartbleed related.  Can't d/l cpanm, github cert. has wrong common name
[2014-04-09 18:24:53 -0400] atomic-penguin: Yay!
[2014-04-09 18:25:54 -0400] doomviking: rad
[2014-04-09 18:25:57 -0400] doomviking: (not)
[2014-04-09 18:30:03 -0400] PapaSierra: i'm trying to write a recipe that installs gearmand from source http://pastebin.com/FnA6f6L7 and here's the output http://pastebin.com/1mYtfnnY i don't understand exactly what it's complaining about
[2014-04-09 18:30:37 -0400] sauraus: How do I file a ticket for the 'jenkins' cookbook it doesn't come up as a valid component in tickets.opscode.com
[2014-04-09 18:31:27 -0400] stormerider: sauraus: is it one that opscode still manages? they've been diversifying them of late
[2014-04-09 18:32:01 -0400] PapaSierra: nm, just as i pasted i realised i'd written gearman instead of gearmand
[2014-04-09 18:34:05 -0400] atomic-penguin: sauraus, file it under java (close enough)
[2014-04-09 18:34:33 -0400] sauraus: yes it's the Chef cookbook
[2014-04-09 18:35:26 -0400] sauraus: java is no longer managed by Chef ;)
[2014-04-09 18:35:58 -0400] atomic-penguin: sauraus, then pick an arbitrary component and note it in the ticket
[2014-04-09 18:37:19 -0400] atomic-penguin: the component should have no bearing on when the fix gets reviewed
[2014-04-09 19:02:21 -0400] btm: No code review today so folks can continue working on #heartbleed related releases
[2014-04-09 19:05:56 -0400] savant: heh
[2014-04-09 19:06:00 -0400] savant: btm: good call
[2014-04-09 19:06:12 -0400] savant: btm: maybe instead its just a loop of you guys saying "revoke your ssl certs"
[2014-04-09 19:10:52 -0400] btm: savant: On the theme of the internet is broken, I'd probably include a link to the music video for Ylvis - The Cabin.
[2014-04-09 19:11:19 -0400] savant: btm: ops theme song: https://www.youtube.com/watch?v=zuL687HGfjI
[2014-04-09 19:15:00 -0400] savant: good thing my company had technical debt day today!
[2014-04-09 19:15:54 -0400] stormerider: let the certs hit the floor, let the certs hit the floor, let the certs hit the flooooooooooooor....
[2014-04-09 19:20:58 -0400] drywheat: if i wrap a ckbk, is it bad practice to bleed the nested cookbook's attrs outside?
[2014-04-09 19:21:28 -0400] drywheat: i.e. setting 'newrelic' atts in a role when the newrelic cookbook is nested in a deployment cookbook
[2014-04-09 19:21:36 -0400] double_p: never turn the clock
[2014-04-09 19:22:34 -0400] no-use1: TIL what technical debt is.
[2014-04-09 19:23:24 -0400] drywheat: i think it's bad design decision to expose those attrs
[2014-04-09 19:23:33 -0400] savant: no-use1: its when the house is on fire and they give you a water gun to put it out
[2014-04-09 19:32:20 -0400] freerobby: Hi, I just upgraded Chef to 11.12 which says it contains a remedy for Heartbleed http://www.getchef.com/blog/2014/04/08/release-chef-client-11-12-0-10-32-2/ But when I use the heartbleed check tool it says it is still susceptible. Has anybody else had the same issue or have any ideas about what the problem might be?
[2014-04-09 19:32:58 -0400] cbarraford: freerobby what are you running the tool against? chef server?
[2014-04-09 19:33:08 -0400] freerobby: cbarraford: yeah
[2014-04-09 19:33:17 -0400] gleam: the client update fixes the client
[2014-04-09 19:33:20 -0400] cbarraford: freerobby chef server != chef-client
[2014-04-09 19:33:23 -0400] gleam: i don't think there's a server update yet
[2014-04-09 19:33:41 -0400] freerobby: oh jeez, i'm so sorry
[2014-04-09 19:33:42 -0400] freerobby: < idiot
[2014-04-09 19:33:45 -0400] freerobby: err
[2014-04-09 19:33:47 -0400] freerobby: ^^^ idiot
[2014-04-09 19:33:50 -0400] freerobby: you get the idea
[2014-04-09 19:33:50 -0400] freerobby: thank you
[2014-04-09 19:35:16 -0400] nlloyds: freerobby: You running the open source server?
[2014-04-09 19:35:23 -0400] freerobby: nlloyds: Yeah.
[2014-04-09 19:37:04 -0400] nlloyds: freerobby: 11.0.12 packages are available now from http://www.getchef.com/chef/install/. Blog post with upgrade and mitigation instructions should be up shortly.
[2014-04-09 19:38:12 -0400] freerobby: nlloyds: I don't see that for server, only client
[2014-04-09 19:38:41 -0400] freerobby: nlloyds: But thanks for the heads up. I will keep my eyes peeled for the blog post!
[2014-04-09 19:46:25 -0400] bricker: Using the deploy_key cookbook, it communicates with the github API to add deploy keys for an app. How would I stop this from happening when converging using Kitchen?
[2014-04-09 20:25:25 -0400] mhenrixon: bricker what about  `if node['dev_mode']`
[2014-04-09 20:25:33 -0400] mhenrixon: or
[2014-04-09 20:25:38 -0400] mhenrixon: if node.chef_environment
[2014-04-09 20:28:37 -0400] mbailey: Hello and good evening
[2014-04-09 20:29:21 -0400] mbailey: Is there a way to call a LWRP from Ruby Code much like a regular Resource..i.e. Chef::Resource::Package.new(...)
[2014-04-09 20:29:37 -0400] mbailey: I'm specifically trying to use the apt_repository resource
[2014-04-09 20:29:43 -0400] mbailey: located in the apt cookbook
[2014-04-09 20:32:43 -0400] jameson__: mbailey: you mean from a middle of a chef converge run the resource before everything else runs?
[2014-04-09 20:36:25 -0400] mbailey: jameson__:  No I have a ruby_block that is doing some specific logic that determines what repository to add
[2014-04-09 20:36:54 -0400] mbailey: jameson__: So I'm just curious what the syntax/pattern is..
[2014-04-09 20:37:10 -0400] mbailey: would it be Chef::Resource::LWRP name?  I don't really know
[2014-04-09 20:37:53 -0400] mbailey: I've cloned the chef code, so for the heavy weight resource providers I can see the definitions and classes and just make the calls, but LWRPs are dynamically generated
[2014-04-09 20:42:26 -0400] viglesias: why does chef do exactly what i tell it to do, instead of what i want it to do in my head?
[2014-04-09 20:51:22 -0400] savant: viglesias: you need to rub a little webscale in it
[2014-04-09 20:51:59 -0400] viglesias: savant: will do!! ive added mod_selfloathing too to see if that helps
[2014-04-09 20:54:43 -0400] alexbst: chefconf! :D
[2014-04-09 20:54:48 -0400] alexbst: just saying.
[2014-04-09 21:06:54 -0400] a13x212: any downsides to using chef tags?
[2014-04-09 21:07:23 -0400] jameson__: mbailey: couldn't the recipe itself do the logic to determine which repository to add? you just fdo the logic and then do apt_repository blablah .
[2014-04-09 21:10:07 -0400] bmoritz: I see chef-server 11.0.12 on the download site
[2014-04-09 21:11:31 -0400] bmoritz: There it is http://www.getchef.com/blog/2014/04/09/chef-server-heartbleed-cve-2014-0160-releases/
[2014-04-09 21:12:50 -0400] jameson__: as if the entire internet cried out with their ssl certs and keys.
[2014-04-09 21:12:54 -0400] jameson__: except for the IIS servers.
[2014-04-09 21:13:15 -0400] bmoritz: the irony
[2014-04-09 21:14:27 -0400] tehnef: From the chef blog: "The severity of this exploit cannot be understated"
[2014-04-09 21:14:34 -0400] tehnef: Probably you mean overstate
[2014-04-09 21:14:35 -0400] tehnef: d
[2014-04-09 21:15:24 -0400] PleasureTown: We talking about heartthrob?
[2014-04-09 21:15:58 -0400] PleasureTown: My group runs a few thousand e-commerce servers for fortune 100's... we found it on one server... one.
[2014-04-09 21:19:24 -0400] bmoritz: https://github.com/musalbas/heartbleed-masstest/blob/master/top10000.txt
[2014-04-09 21:21:05 -0400] PleasureTown: bmoritz: Why do some of those even have heartbeats on?
[2014-04-09 21:21:42 -0400] bmoritz: Not everyone has the time to look at the details
[2014-04-09 21:21:51 -0400] bmoritz: Can only guess
[2014-04-09 21:21:58 -0400] bmoritz: Yahoo is on the list :)
[2014-04-09 21:22:10 -0400] PleasureTown: Most of ours are IBM IHS, which doesn't use libssl
[2014-04-09 21:22:18 -0400] PleasureTown: high five!
[2014-04-09 21:22:32 -0400] blackavr: Not only on the list, but they were leaking user credentials for most of yesterday.
[2014-04-09 21:22:57 -0400] PleasureTown: I read the exploit... it would be pretty f'n hard to get anything from it
[2014-04-09 21:23:19 -0400] blackavr: Did you see the mass session harvester?
[2014-04-09 21:23:57 -0400] PleasureTown: Yeah, crazy stuff
[2014-04-09 21:24:10 -0400] PleasureTown: Also, homedepot.com doesn't use SSL? What the fuck
[2014-04-09 21:25:16 -0400] blackavr: So, not so hard to get things from 64K of server memory, repeatable at will.
[2014-04-09 21:26:13 -0400] blackavr: Also, it works the other way, so if you have any clients that use that openssl, like for example cURL, a hostile server can read your client machines memory.
[2014-04-09 21:26:40 -0400] blackavr: Running a relatively-obscure stack facing the world doesnt protect you from that.
[2014-04-09 21:26:49 -0400] PleasureTown: I guess life is easier when you use bunched of load balancers and shit
[2014-04-09 21:29:15 -0400] blackavr: Unless your LB uses openssl, like most do.
[2014-04-09 21:30:32 -0400] blackavr: No architecture decision removes the need to stay current or to think. Some choices make the fix process faster.
[2014-04-09 21:30:36 -0400] someara: tehnef thanks for pointing that out... fixed on the blog =)
[2014-04-09 21:30:50 -0400] tehnef: someara: np :)
[2014-04-09 21:31:00 -0400] PleasureTown: Lucky us, 1000+ servers and only one bug
[2014-04-09 21:31:11 -0400] blackavr: This time.
[2014-04-09 21:31:20 -0400] PleasureTown: hah, right?
[2014-04-09 21:31:38 -0400] PleasureTown: The business people were like "can you gurantee us 100% that there won't be a problem in the future"
[2014-04-09 21:31:43 -0400] PleasureTown: and we all said "nope"
[2014-04-09 21:32:22 -0400] blackavr: This time, even IIS was the less-problematic choice.
[2014-04-09 21:32:32 -0400] PleasureTown: ew
[2014-04-09 21:32:36 -0400] PleasureTown: go away
[2014-04-09 21:33:27 -0400] blackavr: True, though. Doesnt mean its safe, just means that for this particular issue, it wasnt affected.
[2014-04-09 21:33:48 -0400] PleasureTown: My genitals were also unaffected... this time
[2014-04-09 21:34:33 -0400] doomviking: that you know of
[2014-04-09 21:34:52 -0400] PleasureTown: shit just got real
[2014-04-09 21:35:58 -0400] PleasureTown: Anyone know how to pass "ssl_verify_mode :verify_peer" to Vagrant? I just learned to internet.
[2014-04-09 21:37:18 -0400] someara: blackavr even most IIS shops terminate SSL on something else, probably using openssl
[2014-04-09 21:37:37 -0400] someara: haproxy, nginx, commercial_thing
[2014-04-09 21:38:27 -0400] blackavr: Ayup.
[2014-04-09 21:38:46 -0400] blackavr: Netscaler, which has openssl, but an ancient version.
[2014-04-09 21:39:09 -0400] someara: here's the best write up I've seen so far: http://www.troyhunt.com/2014/04/everything-you-need-to-know-about.html
[2014-04-09 21:39:39 -0400] jbz: Has anyone run into an issue with knife spork where it complains that you don't have foodcritic installed even when you do?
[2014-04-09 21:40:03 -0400] jbz: specifically, knife spork omni, sorry
[2014-04-09 21:40:46 -0400] blackavr: someara - indeed, mostly what I was talking about, in fact. Digging through to see if they mention the client-side risks.
[2014-04-09 21:44:00 -0400] blackavr: That one doesnt mention client-side risks. Heartbeat works both ways.
[2014-04-09 21:53:07 -0400] marcomorales: hey guys, I'm running the chef quickstart guide and I'm getting this error when trying to run vagrant up, any idea what's wrong? Google wasn't helpful
[2014-04-09 21:53:11 -0400] marcomorales: /home/marco/chef-repo/Vagrantfile:22:in `block in <top (required)>': undefined local variable or method `session_username' for main:Object (NameError
[2014-04-09 22:07:23 -0400] gkra: ugh...
[2014-04-09 22:07:49 -0400] gkra: is there any reason "node.location" wouldn't work when overriding a run_list on chef-client?
[2014-04-09 22:08:19 -0400] redondos: jbz: yes
[2014-04-09 22:08:32 -0400] redondos: jbz: i just started using spork and it's been whining about that so i disabled foodcritic
[2014-04-09 22:08:45 -0400] redondos: jbz: i'll let you know if i figure it out, you do that same please
[2014-04-09 22:08:52 -0400] gkra: [2014-04-09T22:05:58+00:00] DEBUG: Re-raising exception: NoMethodError - Undefined method or attribute `location' on `node' /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.6.2/lib/chef/node/attribute.rb:358:in `method_missing'
[2014-04-09 22:09:54 -0400] jbz: redondos:  I went nuclear, I nuked my gemset and reinstalled. :-P  Problem went away.  Some gem incompatibility.
[2014-04-09 22:10:20 -0400] redondos: jbz: ouch. i don't know if i can afford that
[2014-04-09 22:11:45 -0400] jbz: Yeah.  I use rvm, so it was relatively risk free (I backed up my current gemset, zeroed it, reinstalled).
[2014-04-09 22:12:14 -0400] redondos: me too--and i just did a similar thing to fix a different issue and the problem seems to be gone
[2014-04-09 22:12:17 -0400] redondos: i just didn't notice
[2014-04-09 22:12:19 -0400] redondos: whee :)
[2014-04-09 22:12:44 -0400] jbz: :-)
[2014-04-09 22:13:00 -0400] redondos: i ran rvm gemset export and then re-installed from that list
[2014-04-09 22:14:09 -0400] jbz: ahh, smarter. :-)
[2014-04-09 22:40:21 -0400] mbailey: ...
[2014-04-09 22:58:42 -0400] euphy: is opscode going to update openssl in older version of chef omnibus?
[2014-04-09 23:06:01 -0400] mbailey: Does anyone know how to call a LWRP from Ruby code?
[2014-04-09 23:06:31 -0400] mbailey: Chef::Resource::[LWRP].new doesn't have all the attributes of the LWRP
[2014-04-09 23:17:42 -0400] veetow: wrapper cookbook question
[2014-04-09 23:18:09 -0400] veetow: if i have
[2014-04-09 23:18:12 -0400] veetow: default['one'] = 'foo'
[2014-04-09 23:18:42 -0400] veetow: default['two'] = "#{node['one']} blah"
[2014-04-09 23:18:58 -0400] veetow: in the attributes of my first cookbook
[2014-04-09 23:19:05 -0400] veetow: and in my wrapper attributes
[2014-04-09 23:19:14 -0400] veetow: i redefine thusly
[2014-04-09 23:19:24 -0400] veetow: default['one'] = 'bar'
[2014-04-09 23:19:52 -0400] veetow: how do i force node['two'] to be re-evaluated automagically?
[2014-04-09 23:20:08 -0400] veetow: and any other "nested" attributes for that matter?
[2014-04-09 23:20:27 -0400] veetow: i'm assuming i have to do something with a deep_merge but not entirely sure
[2014-04-09 23:21:15 -0400] veetow: seems silly if i'd have to redefine in the wrapper
[2014-04-09 23:21:30 -0400] veetow: default['two'] = "#{node['one']} blah"
[2014-04-09 23:21:44 -0400] veetow: just to get the new value of node['one']
[2014-04-09 23:39:43 -0400] marcomorales: I'm trying to do the getting started tutorial and I'm getting this error when running vagrant up, any ideas? /home/marco/chef-repo/Vagrantfile:22:in `block in <top (required)>': undefined local variable or method `session_username' for main:Object (NameError)

[2014-04-24 00:00:11 -0400] romanovsky: @ron__ i tried both single and double
[2014-04-24 00:01:22 -0400] coderanger: romanovsky: https://github.com/opscode/chef/blob/master/lib/chef/run_list/run_list_item.rb#L22 that is the regex it has to match
[2014-04-24 00:04:54 -0400] romanovsky: @coderanger it matches
[2014-04-24 00:14:59 -0400] romanovsky: $ echo 'role[_123456789-qwerqvasfrqetftwgrsygahbafd]' | ruby -ne 'if $_.match(%r{^role\[([^\]]+)\]$}); print "@coderanger, it matches\n"; end' @coderanger, it matches
[2014-04-24 00:16:02 -0400] coderanger: romanovsky: That should work then, any chance the recipe[roles] is being re-added elsewhere? like from the node itself
[2014-04-24 00:24:57 -0400] romanovsky: @coderanger: no chances http://pastebin.com/P4cFwH6u
[2014-04-24 00:26:05 -0400] coderanger: romanovsky: I got nothing, I suspect you've got something configured strangely somewhere
[2014-04-24 00:26:20 -0400] coderanger: Does it work better with roles that start with an alpha char?
[2014-04-24 00:28:35 -0400] romanovsky: @coderanger I found a string that fails everytime on windows. But works perfect on linux. What wrong with that string?
[2014-04-24 00:29:30 -0400] romanovsky: It's not about the string itself. I just got complains from windows sysadmins that knife is a bad thing, it's unstable and slow. So I setup a windows virtual box and start to dig
[2014-04-24 00:30:41 -0400] romanovsky: So my point is to find out is there any bug related to that quoting, knife.bat, ruby on windows, etc. Could I find any workaround or should I just stop and kill idea of migrating to chef
[2014-04-24 00:33:12 -0400] romanovsky: @coderanger one more detail: we're evaluating enterprise chef to manage configuraiton of 4k boxes, mostly windows boxes managed mostly by windows sysadmins
[2014-04-24 00:34:03 -0400] coderanger: romanovsky: That is possible, I've not used the new batch wrappers ever
[2014-04-24 00:34:17 -0400] coderanger: romanovsky: adamed isn't on IRC at the moment
[2014-04-24 00:34:41 -0400] coderanger: romanovsky: The Chef mailing list would be the best way to reach him, he leads most of the windows support stuff I think
[2014-04-24 00:37:14 -0400] romanovsky: @coderanger thanks. This chef@lists.opscode.com one?
[2014-04-24 00:37:20 -0400] coderanger: yahr
[2014-04-24 00:51:08 -0400] gswallow: Why is chef completely ignoring the attributes I set in my environment manifest?
[2014-04-24 00:53:00 -0400] scalp42: gswallow should not, are you sure the namespace is correct for example? if you have override attributes also, they could take over your environment
[2014-04-24 00:53:17 -0400] gswallow: I don't think so
[2014-04-24 00:53:39 -0400] scalp42: (in case: http://docs.opscode.com/chef_overview_attributes.html#attribute-precedence)
[2014-04-24 00:54:02 -0400] scalp42: might sound like stupid questions, but you sure the node is in the correct environment ?
[2014-04-24 00:54:07 -0400] gswallow: Yeah, I've read that.  A bazillion times.  And yes.
[2014-04-24 00:54:22 -0400] gswallow: Stumped
[2014-04-24 00:54:28 -0400] scalp42: did you push to Chef server?
[2014-04-24 00:54:32 -0400] gswallow: yes
[2014-04-24 00:54:44 -0400] gswallow: in /var/chef/cache/cookbooks/nodejs/attributes/default.rb, I have:
[2014-04-24 00:54:45 -0400] gswallow:   default_unless['nodejs']['install_method'] = 'binary'
[2014-04-24 00:55:02 -0400] gswallow: (I used default_unless.  It  was also just "default")
[2014-04-24 00:55:23 -0400] coredump: coderanger the "protocol" option is not working anymore on berks 3? It keeps trying to use git clone git:// on a private repo on github
[2014-04-24 00:55:27 -0400] scalp42: well they're not the same right
[2014-04-24 00:55:53 -0400] coderanger: coredump: Just put it in the URL?
[2014-04-24 00:55:55 -0400] gswallow: They aren't.  I purposefully set it to default_unless because it's weaker.
[2014-04-24 00:56:01 -0400] scalp42: so whats in your environment gswallow
[2014-04-24 00:56:04 -0400] scalp42: for that attribute
[2014-04-24 00:56:08 -0400] gswallow: In my environment file (and if I edit the environment), I have:
[2014-04-24 00:56:11 -0400] hailwood: Hey guys, in a recipe I want to execute a command for every line in a file - https://gist.github.com/hailwood/dff845e62b86bf111341 basically we have a run.list file and for each line in the file we want to execute php artisan db:seed --class={line from file}. Can anyone give any tips?
[2014-04-24 00:56:31 -0400] gswallow: default_attributes: {  "nodejs": {
[2014-04-24 00:56:31 -0400] gswallow:       "install_method": "binary",
[2014-04-24 00:56:32 -0400] gswallow:       "version": "0.10.18"
[2014-04-24 00:56:32 -0400] gswallow:     }
[2014-04-24 00:56:42 -0400] coderanger: hailwood: Where does that file live?
[2014-04-24 00:57:01 -0400] hailwood: the run.list file, that's in the deployed code.
[2014-04-24 00:57:09 -0400] hailwood: separate from the cookboo
[2014-04-24 00:57:12 -0400] hailwood: *cookbook
[2014-04-24 00:57:39 -0400] scalp42: right so its gonna be binary in every case
[2014-04-24 00:57:47 -0400] gswallow: that's the intent, yeah
[2014-04-24 00:58:01 -0400] gswallow: if I change it to "package" in the attributes file it changes.  Otherwise no.
[2014-04-24 00:58:09 -0400] hailwood: coderanger: The only way I could see of doing this would be creating a bash script to do it, and then have the recipe simply call the script?
[2014-04-24 00:58:09 -0400] coderanger: hailwood: You'll need to use a ruby_block resource to read it in or something similar
[2014-04-24 00:58:12 -0400] silk: Is there a more appropriate place to ask questions about omnibus-software ?
[2014-04-24 00:58:17 -0400] coderanger: hailwood: That works too, a bash resource
[2014-04-24 00:58:52 -0400] scalp42: it works as intended because the environment sets it to binary
[2014-04-24 00:59:00 -0400] gswallow: sorry  other way around
[2014-04-24 00:59:04 -0400] gswallow: I *want* it to be binary
[2014-04-24 00:59:27 -0400] gswallow: let me reset all the files in git and gist it
[2014-04-24 00:59:33 -0400] scalp42: sounds good gswallow
[2014-04-24 00:59:42 -0400] scalp42: I'll be able to pinpoint the issue I think this way
[2014-04-24 01:04:53 -0400] gswallow: https://gist.github.com/gswallow/11238007
[2014-04-24 01:06:52 -0400] scalp42: so gswallow
[2014-04-24 01:06:54 -0400] scalp42: to make sure
[2014-04-24 01:07:19 -0400] scalp42: you want it to be binary, can you tell me what it's set to in the node attributes after lets say a run please
[2014-04-24 01:07:31 -0400] gswallow: I want it to be binary
[2014-04-24 01:07:44 -0400] gswallow: When I run chef, it gets set to "package"
[2014-04-24 01:07:44 -0400] scalp42: do you know whats it's set to
[2014-04-24 01:07:53 -0400] scalp42: kk
[2014-04-24 01:09:10 -0400] gswallow: I updated the gist with the output from the chef run
[2014-04-24 01:10:35 -0400] scalp42: what platform are you running one ?
[2014-04-24 01:10:40 -0400] scalp42:  s/one/on
[2014-04-24 01:11:28 -0400] scalp42: i only see package or source for the nodejs cookbook
[2014-04-24 01:11:33 -0400] scalp42: not binary
[2014-04-24 01:12:41 -0400] scalp42: if you want to install from binary, you'll have to include nodejs::install_from_binary
[2014-04-24 01:12:52 -0400] scalp42: its not based on an attribute if it helps
[2014-04-24 01:13:37 -0400] gswallow: checking
[2014-04-24 01:13:55 -0400] scalp42: it should work technically but in case just use that recipe instead of default
[2014-04-24 01:14:01 -0400] scalp42: (to get you going)
[2014-04-24 01:14:04 -0400] scalp42: im still looking
[2014-04-24 01:14:31 -0400] gswallow: yeah, default calls nodejs which calls include_recipe "nodejs::nodejs_from_#{node['nodejs']['install_method']}"
[2014-04-24 01:14:41 -0400] gswallow: maybe it's a chef 11.6 bug?
[2014-04-24 01:14:54 -0400] scalp42: its weird
[2014-04-24 01:15:03 -0400] scalp42: just curious did you try setting it as an override in your env?
[2014-04-24 01:15:12 -0400] gswallow: yes
[2014-04-24 01:15:34 -0400] gswallow: on the plus side, I got the github.com/redguide/nodejs cookbook fixed so it finally works in test-kitchen
[2014-04-24 01:15:42 -0400] gswallow: just can't run it on my own servers :/
[2014-04-24 01:16:32 -0400] gswallow: is it possible that include_recipe gets evaluated before I load the environmental attributes?
[2014-04-24 01:16:49 -0400] scalp42: should not matter if im correct
[2014-04-24 01:27:51 -0400] hailwood: When doing an execute command, Can you run two commands in the same block (sizeable only_if which I don't want to have to repeat)
[2014-04-24 01:28:13 -0400] coderanger: hailwood: Not really, but you can use a loop
[2014-04-24 01:28:35 -0400] coderanger: ['one', 'two'].each do |cmd| execute cmd do shared options  end end
[2014-04-24 01:28:50 -0400] hailwood: coderanger: Ah gotcha
[2014-04-24 01:31:02 -0400] gswallow: I may have found it
[2014-04-24 01:32:00 -0400] coderanger: gswallow: Only kind of watching, but if you are trying to debug where an attr is set, there is a helper for that
[2014-04-24 01:32:49 -0400] gswallow: I'm all ears
[2014-04-24 01:32:59 -0400] coderanger: http://www.getchef.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2014-04-24 01:33:05 -0400] coderanger: gswallow: Scroll down the Debugging
[2014-04-24 01:34:01 -0400] gswallow: that's awesome
[2014-04-24 01:34:37 -0400] gswallow: Yep.  @scalp42 found it.
[2014-04-24 01:35:02 -0400] gswallow: I swear (again) I'm done editing files in vim
[2014-04-24 01:36:20 -0400] gswallow: thanks for looking into it
[2014-04-24 01:40:13 -0400] gswallow: Man, I watched a Columbus Blue Jackets vs Edmonton Oilers game at the stadium last year and it was a totally different experience.
[2014-04-24 01:58:35 -0400] sarkis: hey guys, doesn't look like this has any way to install as root:root huh? https://github.com/RiotGames/rbenv-cookbook
[2014-04-24 01:58:59 -0400] sarkis: i tried specifying rbenv user/group to be root and chef fails out on trying to create the root user :/
[2014-04-24 02:21:39 -0400] coredump: just to get this correct: after you do a berks install, the versions/revisions on the lock file are unmutable until you do a berks update?
[2014-04-24 02:30:10 -0400] jameson__: yes
[2014-04-24 02:30:18 -0400] jameson__: in the Berkfile.lock
[2014-04-24 02:34:29 -0400] sarkis: what was that gem called that caught all traffic coming out of a vm / development env?
[2014-04-24 02:34:45 -0400] coderanger: coredump: No, they can change in the same ways as with bundler
[2014-04-24 02:35:16 -0400] coderanger: coredump: If a constraint changes such that the locked version no longer satisfies it, the next berks install will re-solve it
[2014-04-24 02:35:42 -0400] coredump: ok, that makes sense, but if it's a cookook that nothing depends on, no
[2014-04-24 02:35:47 -0400] coderanger: sarkis: polipo?
[2014-04-24 02:36:27 -0400] coderanger: coredump: Then yes, as long as all constraints are met, berks install won't change things
[2014-04-24 02:36:38 -0400] sarkis: hmm polipo was to cache no?
[2014-04-24 02:37:26 -0400] sarkis: i thought there was this app i was reading about a while back that caught all outbound traffic to prevent things like metrics and what not from getting to production
[2014-04-24 02:37:50 -0400] coderanger: sarkis: Oh, no idea on that
[2014-04-24 02:38:39 -0400] coredump: coderanger just making sure and telling people here to not use berks update without thinking first
[2014-04-24 02:39:04 -0400] coderanger: coredump: indeed, and keep all your lock files in git so you can see very clearly when they change
[2014-04-24 02:39:45 -0400] sarkis: ah nvm, i remember now what i saw was actually for mail
[2014-04-24 02:39:49 -0400] coredump: coderanger is that a common practice?
[2014-04-24 02:39:52 -0400] sarkis: so you don't actually send to your customers
[2014-04-24 02:40:05 -0400] coderanger: coredump: I do it, no idea how common it is beyond that
[2014-04-24 02:40:25 -0400] coredump: coderanger it makes sense, for sure.
[2014-04-24 02:40:25 -0400] coderanger: coredump: I can't really compare my practices to others for the most part, so I don't try :)
[2014-04-24 02:45:40 -0400] jameson__: coredump: if your tool is a library or has dependencies you should be checking in your lockfiles.
[2014-04-24 02:45:56 -0400] jameson__: * has downstream that you know are depending on it
[2014-04-24 02:46:15 -0400] coredump: it's more about the one that we use to manage the whole thing, not the individual ones.
[2014-04-24 02:47:33 -0400] jameson__: i'd recommend you checkin in the lockfiles then
[2014-04-24 02:47:44 -0400] coredump: thank you
[2014-04-24 03:52:30 -0400] pipework: The chefdk is pretty awesome. I'll probably eventually try to get chef workable without using the ruby that comes with chef. But for now it's super convenient to have everything pulled together.
[2014-04-24 04:50:08 -0400] brucelee_: hey
[2014-04-24 04:53:17 -0400] brucelee_: heres my stack, berkshelf/vagrant/chef-solo. vagrant and berkshelf talks to each other via vagrant berkshelf plugin, and im to program into my vagrantfile for it to run 2 cookbooks
[2014-04-24 04:53:45 -0400] brucelee_: Berksfile has the two cookbooks in it
[2014-04-24 04:56:28 -0400] brucelee_: when it runs, i get this:
[2014-04-24 04:57:05 -0400] brucelee_: it actually says error "cant find metadata.rb"
[2014-04-24 04:58:26 -0400] brucelee_: i usually get those files by doing berks cookbook blah
[2014-04-24 07:03:18 -0400] brucelee_: so after i install chefdk, and i type berks -v, i still have 2.0
[2014-04-24 07:03:23 -0400] brucelee_: because i have berkshelf from pervious
[2014-04-24 07:03:58 -0400] coderanger: brucelee_: Check your path
[2014-04-24 07:04:21 -0400] brucelee_: /opt/chef/embedded/bin:/usr/local/packer:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin
[2014-04-24 07:04:32 -0400] brucelee_: the chefdk link gives all these tools, but it doesnt say how to use them etc
[2014-04-24 07:04:45 -0400] brucelee_: no link on that download page that tells you how to use the new tool 'chef'
[2014-04-24 07:04:55 -0400] brucelee_: its just installed in the system now :p
[2014-04-24 07:05:59 -0400] brucelee_: coderanger: i think somehow my mac os x is completely fucked
[2014-04-24 07:06:10 -0400] brucelee_: i cant gem install the newest berkshelf
[2014-04-24 07:06:24 -0400] brucelee_: it gives an error saying "you need to download the devleopment tools"
[2014-04-24 07:21:08 -0400] brucelee_: coderanger: night :p
[2014-04-24 07:30:14 -0400] hailwood: Hey guys, I have a recipe that runs as part of a deployment and as such uses cwd "#{deploy[:deploy_to]}/current" and works great, however for this particular recipe I also want to be able to run it as a stand alone through execute_recipe sometimes. and since it's not a deploy it doesn't have the deploy node. Can anyone see a way to make this recipe work in both cases without having to turn cwd into an attribute and essentially hard code it? http://stackoverf
[2014-04-24 08:23:30 -0400] _pingu: installed chef 11.12.2 via installer on win 7. used its embedded ruby and fired gem install chefspec. expected rspec as new commandline tool on the console.  but there is none. how can i run the tests now?
[2014-04-24 08:38:54 -0400] _pingu: no one?
[2014-04-24 11:19:04 -0400] JensOfSweden: Heyas, when i use knife exec to transform a node i want to put a force_override attribute instead of a override only since from what i get the override from the environment has precedence over node overrides. Whats the correct command to use with knife exec?
[2014-04-24 11:19:49 -0400] BryanWB: hey chefs, is it possible to test if a windows file is locked using Ruby?
[2014-04-24 11:20:13 -0400] BryanWB: like ::File('c:\\temp\\foobar.txt').locked?
[2014-04-24 12:07:17 -0400] JensOfSweden: Anyone know how to set override on a node
[2014-04-24 12:07:22 -0400] JensOfSweden: with knife exec
[2014-04-24 12:32:57 -0400] JensOfSweden: How come my node attribue (the physical node) get overwritten everytime i run chef?
[2014-04-24 12:33:16 -0400] nickolay: you can add override in role
[2014-04-24 12:33:27 -0400] nickolay: for example-
[2014-04-24 12:33:28 -0400] nickolay:  "override_attributes": {
[2014-04-24 12:33:30 -0400] nickolay:     "java": {
[2014-04-24 12:33:31 -0400] nickolay:       "install_flavor": "oracle",
[2014-04-24 12:33:33 -0400] nickolay:       "jdk_version": "7",
[2014-04-24 12:33:34 -0400] nickolay:       "oracle": {
[2014-04-24 12:33:36 -0400] nickolay:         "accept_oracle_download_terms": true
[2014-04-24 12:33:37 -0400] nickolay:       }
[2014-04-24 12:33:38 -0400] JensOfSweden: Yes i know, but i need to override it at a node level for these
[2014-04-24 12:34:56 -0400] JensOfSweden: I have attributes in my environment thats general for all my machines, but for 30 of them i need to change one attribute since it doesnt work on AMD processors
[2014-04-24 12:36:32 -0400] nickolay: try add override on node in section after run_list
[2014-04-24 12:37:43 -0400] zanshin: JensOfSweden: Sounds like you need a role for those machines with AMD processors that overrides the attribute(s) there
[2014-04-24 12:38:54 -0400] JensOfSweden: Might just rewrite my cookbook to use ohai to check processor type and set the attribute accordingly
[2014-04-24 12:54:29 -0400] tscanausa: was ark integrated into chef?
[2014-04-24 13:48:55 -0400] jespada: was the chef-metal talk at chefconf1014 recorded? is it somewhere ?
[2014-04-24 13:50:07 -0400] holms: No version specified, and no candidate version available for kernel-devel <-- anyone?
[2014-04-24 13:51:46 -0400] double_p: jespada: not yet online with http://www.youtube.com/user/Opscode/videos
[2014-04-24 13:53:49 -0400] jespada: double_p, you mean this : https://www.youtube.com/user/getchef
[2014-04-24 13:54:14 -0400] jespada: yeah is not there... good stuff in there tho :) I wish I could made it
[2014-04-24 13:55:01 -0400] double_p: ah damnit account-hopping :P
[2014-04-24 13:57:23 -0400] holms: coderanger: maybe you're online?
[2014-04-24 14:07:12 -0400] jtimberman: brucelee_: chefdk installs in /opt/chefdk. there are two binary dirs there. one is /opt/chefdk/bin, where we do special treatment of ruby binaries (like chef, berkshelf, etc) so they only load the gems of the versions they depend on, to improve load times. those are also linked in /usr/bin/ - https://gist.github.com/jtimberman/54a6cefd96a731439acb
[2014-04-24 14:08:01 -0400] jtimberman: brucelee_: the other binaries directory is /opt/chefdk/embedded/bin, which is where the embedded binaries that were installed as part of the omnibus build, and includes the embedded ruby, gem, and other binaries. these aren't symlinked anywhere else.
[2014-04-24 14:18:03 -0400] kamaradclimber: hi, I am trying to run a chef recipe on my workstation without being registered on the chef server (I am an admin client though) and can't run chef-solo/zero because I do searches in the recipe. Is there some hacky way to do it ?
[2014-04-24 14:18:26 -0400] kamaradclimber: (double posting from chef-hacking since there is no activity there)
[2014-04-24 14:24:04 -0400] MMackx: Where are the data bags located.  Documentation states in data_bags beneath the repo, but hothing is there.
[2014-04-24 14:39:20 -0400] mjuszczak: Anyone here do basic chef development using test kitchen and vagrant?  About to buy my first macbook air, and trying to decide between the 1.3 ghz i5 and 1.7 ghz i7.  Could use some input from folks that do similar work to me.
[2014-04-24 14:42:06 -0400] toady00: mjuszczak what type of development are you doing?
[2014-04-24 14:44:40 -0400] mjuszczak: toady00: Mostly just chef cookbooks, python, ruby on rails web development, etc.  Nothing compiled.
[2014-04-24 14:45:25 -0400] toady00: mjuszczak: You'll probably be fine with either to be honest.
[2014-04-24 14:46:51 -0400] toady00: mjuszczak: I would set the memory explicitly in the Vagrant file
[2014-04-24 14:46:52 -0400] gleam: 8gb of ram, though. don't skimp there.
[2014-04-24 14:46:53 -0400] mjuszczak: okay.  If it's really worth the upgrade, I'll do it.
[2014-04-24 14:46:59 -0400] mjuszczak: Yeah definitely going 8 GB RAM
[2014-04-24 14:47:04 -0400] mannyt: mjuszczak: I have a macbook pro and depending on how many nodes you have running in VMs you can tax the system pretty heavily
[2014-04-24 14:47:06 -0400] mjuszczak: just can't tell if the i7 is worth the extra $150
[2014-04-24 14:47:11 -0400] toady00: mjuszczak: yes 8GB
[2014-04-24 14:47:21 -0400] gleam: i honestly am avoiding the airs for my next upgrade because i'm feeling constrained by 8gb
[2014-04-24 14:47:41 -0400] toady00: mannyt: I've run 8 vmware machines through vagrant at the same time without issue on my MBPr
[2014-04-24 14:47:58 -0400] mannyt: I don't know what the impact of the i5 vs i7 would be but memory is definitely important
[2014-04-24 14:48:18 -0400] mjuszczak: Do you guys tend to get apple care?
[2014-04-24 14:48:24 -0400] toady00: gleam: I'm hoping the new airs have a 16 GB options
[2014-04-24 14:48:27 -0400] gleam: there's supposedly a macbook air spec bump coming in the next month or so
[2014-04-24 14:48:33 -0400] gleam: yeah, likewise.
[2014-04-24 14:48:45 -0400] mannyt: toady00: out of curiousity what do you set the memory limits to in Vagrant
[2014-04-24 14:48:49 -0400] mjuszczak: hmmm... should I wait?  Or will those be at a different price point?
[2014-04-24 14:48:53 -0400] gleam: i know at least the current i7 proc supports 16gb, so I don't know why it hasn't always been an option
[2014-04-24 14:48:56 -0400] gleam: probably the same price point
[2014-04-24 14:48:57 -0400] toady00: mannyt: typically 512 mb
[2014-04-24 14:49:04 -0400] mjuszczak: oy
[2014-04-24 14:49:19 -0400] gleam: http://www.macrumors.com/2014/04/24/updated-macbook-airs-next-week/
[2014-04-24 14:49:35 -0400] mannyt: I think I have a few boxes that are "special" and end up destroying my system when testing in tandem.  But these are rare and we know they are too beefy for their own good
[2014-04-24 14:49:49 -0400] toady00: mannyt: if i'm running torquebox or something heavier I'll bump it to 1 or 2 GB, but it's usually the only on running at the time
[2014-04-24 14:50:10 -0400] kirves: hi
[2014-04-24 14:50:33 -0400] mannyt: Yea we ended up running these instances on 3+ GB but like I said they are special cases
[2014-04-24 14:50:45 -0400] mannyt: toady00: I think most other cases have been around 512
[2014-04-24 14:51:39 -0400] toady00: tbh I could probably get away with running a lot of them at 256 MB, but when I've got 16 GB on the system, why not use them
[2014-04-24 14:51:40 -0400] kirves: I'm trying to make Chef 10.18 load libraries in subfolders: I tried applying https://github.com/opscode/chef/pull/760 but it still doesn't work
[2014-04-24 14:52:19 -0400] kirves: my /var/cache/chef/.../library folder contains some .rb files and empty folders which should instead be containing rb files
[2014-04-24 14:54:09 -0400] mannyt: toady00 I agree
[2014-04-24 14:54:39 -0400] mannyt: mjuszczak I do get apple care on my phone but not on my laptops usually
[2014-04-24 15:02:11 -0400] mjuszczak: okay, great.  Thank you!
[2014-04-24 15:12:58 -0400] workmad3: kirves: last time I tried that, I discovered that cookbook uploading wasn't uploading the files in subdirectories
[2014-04-24 15:19:30 -0400] grampajoe: Is it possible to include a recipe in the before_symlink callback of the deploy resource?
[2014-04-24 15:19:59 -0400] gchristensen: grampajoe: that sounds very very sketchy
[2014-04-24 15:23:31 -0400] grampajoe: If I set the callback to a path to a ruby script, can that contain resource declarations?
[2014-04-24 15:24:09 -0400] grampajoe: I'm mostly interested in defining the callback in a way that I can easily test
[2014-04-24 15:24:31 -0400] gchristensen: grampajoe: maybe a better route woud be to have the recipes loaded but set not to run, and then in the callback notify it to execute
[2014-04-24 15:25:09 -0400] grampajoe: gchristensen: That makes a lot of sense, thanks
[2014-04-24 15:25:21 -0400] gchristensen: sure thing
[2014-04-24 15:41:11 -0400] shlant: is there any way to include the LWRP's of a cookbook without running the cookbook?
[2014-04-24 15:41:27 -0400] shlant: I assume include_attributes is only attributes?
[2014-04-24 15:41:35 -0400] shlant: or is it LWRP's as well?
[2014-04-24 15:42:07 -0400] mondo: shlant: just add the LWRP cookbook to the metadata.rb of the cookbook that needs to use the LWRP
[2014-04-24 15:42:16 -0400] mondo: depends 'lwrp-cookbook'
[2014-04-24 15:42:18 -0400] shlant: mondo: ah, yes. Thank you
[2014-04-24 15:43:55 -0400] grampajoe: Would I notify resources inside deploy's before_symlink callback by calling their run_action methods, or is there a nicer way to do it?
[2014-04-24 15:44:44 -0400] kamaradclimber: is chef-apply able to run recipe that contain "include_recipe" statements ?
[2014-04-24 15:47:37 -0400] cburroughs: I have a service notification on a cookbook_file.  My expectation was that it would only notify when the file changed, but it seems to be doing it on every chef run http://pastebin.com/hjeDRnut
[2014-04-24 15:51:57 -0400] cburroughs: (Which for example is how template behaves)
[2014-04-24 15:53:58 -0400] whiteadam: Anyone have advice on bootstrapping servers that I can't SSH directly to?
[2014-04-24 15:56:58 -0400] cburroughs: I feel like I must be missing something basic, supposed to be idempotent and all that
[2014-04-24 15:57:10 -0400] stormerider: whiteadam: existing servers, or ones that have yet to be created?
[2014-04-24 15:57:36 -0400] whiteadam: stormerider: existing. I've got a mess of them that are in an AWS VPC with private IPs
[2014-04-24 15:59:06 -0400] whiteadam: stormerider: was thinking of making a script or package and wget / curl it over
[2014-04-24 16:00:27 -0400] stormerider: whiteadam: set up a bastion host and bootstrap it either from there, or using it as an ssh proxy?
[2014-04-24 16:01:09 -0400] whiteadam: stormerider: yeah, locked down banking environment on a few, probably can't do that.
[2014-04-24 16:01:33 -0400] whiteadam: stormerider: reading about automated installs, i'll see what I can put together
[2014-04-24 16:02:57 -0400] stormerider: whiteadam: well, if you can't ssh in, how would you run the script via wget?
[2014-04-24 16:03:28 -0400] stormerider: alternatively, if you're using VPC, set up a VPN between your office and the VPC region?
[2014-04-24 16:04:53 -0400] whiteadam: stormerider: I can get in, but it's a multiple jump type thing. Little shitty
[2014-04-24 16:05:34 -0400] stormerider: so basically if you can do that, then bootstrap them from the last point that can reach them
[2014-04-24 16:06:41 -0400] whiteadam: stormerider: Yeah, I figured it wouldn't be an easy process. I hate bootstrapping running servers.
[2014-04-24 16:07:17 -0400] cburroughs: hmm, http://docs.opscode.com/resource_cookbook_file.html does the same thing for a yum repo
[2014-04-24 16:18:59 -0400] eucalyptus: is there a resource for installing a gzipped tarball?  or is the usual approach to use a script/code block to explode?
[2014-04-24 16:20:01 -0400] cob: should be three lines of code, yes? don't bother looking for a standard way as it's probably faster to just implement it
[2014-04-24 16:20:03 -0400] double_p: eucalyptus: http://community.opscode.com/cookbooks/ark ?
[2014-04-24 16:20:37 -0400] cob: well, then somebody gives you one :)
[2014-04-24 16:20:47 -0400] eucalyptus: double_p: thanks
[2014-04-24 16:21:49 -0400] double_p: not that half my recipes just use some code block for now.. but less hassle with ark
[2014-04-24 16:23:17 -0400] eucalyptus: ya, agreed.  i have lots of boilerplate around this.
[2014-04-24 16:24:02 -0400] vt102: What is this conflict telling me here?  https://gist.github.com/vt102/11260579
[2014-04-24 16:24:18 -0400] vt102: I've seen cases where there is an obvious version conflict, but there doesn't appear to be one here?
[2014-04-24 16:24:53 -0400] double_p: anyone who adds nodes via zabbix API? just figured that it has a useful API (installing agents already chef'd for sure). but after that the cookbooks are going dark?
[2014-04-24 16:25:24 -0400] bean: Looks like it's having trouble finding the haproxy cookbook of that version as well as the secondary IP cookbook of that version.
[2014-04-24 16:25:36 -0400] cburroughs: never mind, seem so to be someting else was mucking with permissions on the file, so something really was 'changing'
[2014-04-24 16:25:42 -0400] bean: vt102:
[2014-04-24 16:26:40 -0400] vt102: bean: they're both there, though.  I can see them with knife cookbook show <secondaryip|haproxy> at those versions.
[2014-04-24 16:26:45 -0400] bean: Hmm okay.
[2014-04-24 16:27:05 -0400] cob: http://interference.io/cfp.php
[2014-04-24 16:27:06 -0400] vt102: I used berks to upload
[2014-04-24 16:29:37 -0400] vt102: debug shows this: "non_existent_cookbooks"=>[], "most_constrained_cookbooks"=>["(haproxy ~> 1.3.6)", "(secondaryip = 0.1.0)"]}
[2014-04-24 16:31:12 -0400] supa_: I have a cookbook that has a "version" attribute.  I have updated the role using that cookbook.  How do I get chef to update the node with the newest version?
[2014-04-24 16:33:13 -0400] whiteadam: Does anyone know if there's a bootstrap command to make chef-client a daemon by default?
[2014-04-24 16:40:12 -0400] vt102: Here's the debug on my chef-client run https://gist.github.com/vt102/11260579 \, but it looks like the error is occurring on the server and being reported back.
[2014-04-24 16:40:28 -0400] vt102: Is there a log on the server that might give me more inforamation?
[2014-04-24 17:20:35 -0400] maplebed: Anybody know whether there are recordings from the various talks at chefconf up online and available?
[2014-04-24 17:27:46 -0400] whiteadam: Does anyone know if the chef-client cookbook defaults to daemon with splay and interval?
[2014-04-24 17:28:21 -0400] Doc_X: smaplebed: some of the keynotes are up already. i believe they're working on getting the actual talks up ASAP.
[2014-04-24 17:28:46 -0400] Doc_X: maplebed: i believe fletcher nichols' test kitchen talk is already up.
[2014-04-24 17:29:54 -0400] tcotav: https://www.youtube.com/user/getchef    (and yep, it's there)
[2014-04-24 17:32:20 -0400] drywheat: i want to create an ssh wrapper for pulling from a private git repo. where is the best place to create that file?
[2014-04-24 17:33:51 -0400] maplebed: ah! thanks, tcotav - that was the link I was looking for.
[2014-04-24 17:34:15 -0400] whiteadam: drywheat: like, cookbooks/ssh-wrapper
[2014-04-24 17:34:16 -0400] whiteadam: ?
[2014-04-24 17:34:51 -0400] drywheat: sorry i wasn't clear. i meant on the system.
[2014-04-24 17:35:01 -0400] romanovsky: hey! I was trying to find a solution of quoting/globbing windows knife's "role" argument problem yesterday. Thanks for trying to help me. Adamed from chef@lists.opscode.com gave me a link to the bug (https://tickets.opscode.com/browse/CHEF-2486). Marc Garcia recommends to add a comma after a role name as a workaround and it works! I'd like to  ask you to promote this workaroud. <<knife node run_list add NODENAME 'role[role-name],'>> Pa
[2014-04-24 17:35:17 -0400] drywheat: Chef docs outline creating in in /tmp, but foodcritic doesn't like that.
[2014-04-24 17:35:39 -0400] jbz: drywheat: we usually stick 'em in /usr/local/bin unless they contain private keys/tokens
[2014-04-24 17:36:02 -0400] jbz: i.e. if they read their token info from the executing user's homedir somewhere, they just go in /usr/local/bin
[2014-04-24 17:36:18 -0400] drywheat: I was thinking that I could create it in the home dir of the user that will invoke it
[2014-04-24 17:36:42 -0400] drywheat: jbz: that's interesting, i didn't really think about that location. not a bad idea.
[2014-04-24 17:36:48 -0400] jbz: Sure, but if it's generic code, may as well have it where everyone can get to it/exec it.  Unless, again, it has embedded user data.
[2014-04-24 17:37:12 -0400] jbz: That way, installing the code can be part of a base cookbook, a generic task.
[2014-04-24 17:38:04 -0400] drywheat: thanks for the tip
[2014-04-24 17:41:04 -0400] anoldhacker: Suppose I have a resource that when run needs ohai to reload its subsystem.  I'll create an ohai resource for the subsystem in question, and do a notifies :run, :immediately on it.  If I also have another resource that needs the same subsystem to be reloaded immediately, how do  I achieve this?
[2014-04-24 17:42:18 -0400] drywheat: i'm starting to think that the ssh wrapper has limited utility w/o an identity file path in it
[2014-04-24 17:42:19 -0400] redondos: notify it again?
[2014-04-24 17:42:37 -0400] drywheat: using templating to insert the correct path
[2014-04-24 17:42:52 -0400] anoldhacker: I don't think that renotified resources are rerun ???
[2014-04-24 17:43:05 -0400] redondos: with :immediately they are, yeah
[2014-04-24 17:44:38 -0400] jbz: drywheat:  Might just use an expansion based on executing user, removes need for templating?
[2014-04-24 17:44:46 -0400] anoldhacker: Okay.  That's mostly sensible
[2014-04-24 17:46:03 -0400] drywheat: jbz: that would do it :)
[2014-04-24 17:48:00 -0400] PaulB010102: hey, I'm experiencing an issue with my chef server..
[2014-04-24 17:48:07 -0400] PaulB010102: seeing beam.smp sitting at 100% cpu
[2014-04-24 17:48:14 -0400] PaulB010102: and not able to run updates to nodes
[2014-04-24 17:48:21 -0400] PaulB010102: (they hang)
[2014-04-24 17:48:43 -0400] bmhatfield: PaulB010102: is it the rabbitmq one or the chef one?
[2014-04-24 17:49:45 -0400] PaulB010102: https://gist.github.com/anonymous/da86029d8714250d8edc
[2014-04-24 17:50:14 -0400] PaulB010102: looks like chef one
[2014-04-24 17:51:45 -0400] PaulB010102: any ideas how to fix?
[2014-04-24 17:51:52 -0400] PaulB010102: i thing it might be related to a cookbook dependency
[2014-04-24 17:51:54 -0400] bmhatfield: you can restart it using chef-server-ctl
[2014-04-24 17:52:29 -0400] bmhatfield: http://docs.opscode.com/ctl_chef_server.html
[2014-04-24 17:52:35 -0400] PaulB010102: ok
[2014-04-24 17:52:37 -0400] bmhatfield: you can also check the logs in
[2014-04-24 17:52:44 -0400] aliljet|new: hm, weirdness, I'm having som weird problems with my chef-server installation.  for some reason, the chef-server is intermittently available and when I run a chef-server-ctl test, I repeatedly get an error that reads "Exception during Pedant credentials setup" and it's accompanied by a 500 internatl service error
[2014-04-24 17:53:00 -0400] bmhatfield: - /var/log/chef-server/erchef/current
[2014-04-24 17:56:55 -0400] PaulB010102: https://gist.github.com/paulblizzard/edc57bbc806b6d743bee
[2014-04-24 17:57:11 -0400] PaulB010102: still seeing behaviour with beam.smp after chef-server-ctl restart
[2014-04-24 17:59:40 -0400] pipework: So, the chefdk package keeps crapping out hard whenever it tries to install the debugger gem. Fun. :(
[2014-04-24 18:01:15 -0400] aliljet|new: hm, so any run of knife on the chef server ends up with intermittent "ERROR: bad gateway" responses
[2014-04-24 18:02:48 -0400] PaulB010102: yeah, that's what i see
[2014-04-24 18:03:02 -0400] PaulB010102: knife of chef-client times out with a gateway error
[2014-04-24 18:05:05 -0400] rberger: Anyone working with chef-metal-docker?
[2014-04-24 18:05:13 -0400] aliljet|new: ah hah, running chef-server-ctl tail spits out a huge array of errors
[2014-04-24 18:06:22 -0400] aliljet|new: and I think qpidd is what's causing all the problems, there are thousands of connections to it all sittin in a wait state
[2014-04-24 18:07:19 -0400] jkeiser: rberger: not since last week :)  Having issues?
[2014-04-24 18:07:26 -0400] jkeiser: rberger: it's in a very alpha state right now
[2014-04-24 18:10:19 -0400] rberger: jkeiser One sec, got distracted
[2014-04-24 18:11:25 -0400] jkeiser: And by "very alpha" I mean "it works, but I'd really like to redesign bits of it"
[2014-04-24 18:13:34 -0400] PaulB010102: was able to fix the issue I had with beam.smp
[2014-04-24 18:13:40 -0400] PaulB010102: something to do with the mongodb cookbook
[2014-04-24 18:13:47 -0400] PaulB010102: with it removed things work again
[2014-04-24 18:13:48 -0400] PaulB010102: thanks
[2014-04-24 18:15:40 -0400] rberger: jkeiser I got chef-metal with docker to create, and run chef-client on the containers but then the containers dont persist
[2014-04-24 18:16:37 -0400] jkeiser: rberger: it's got two "modes," sort of.  By default, it is building an image essentially.  To make it run a command, you need to add the provisioner_option :command => <command to run>
[2014-04-24 18:17:02 -0400] jkeiser: rberger: can you can say provisioner_option 'base_image_name' => <image to build off of>
[2014-04-24 18:17:27 -0400] jkeiser: The idea is you use the machine resource once, build yourself an image, and then run another machine with 'command' and point base_image_name at the image you made earlier
[2014-04-24 18:17:57 -0400] MMackx: I'm having trouble with my first cookbook dependency resolution error.  I'm not able to identify in which cookbooks the problem arises.
[2014-04-24 18:18:35 -0400] rberger: jkeiser is there an easy way to just pretend the container or image is a normal vm and it just runs stuff via init? I know this is not the docker way but it solves an immediate use case of squishing a whole cluster of servers onto your laptop.
[2014-04-24 18:19:33 -0400] jkeiser: rberger: we ran supervisord as the command to make that happen
[2014-04-24 18:19:57 -0400] jkeiser: rberger: if you want, another way to get it done is to use bare lxc, which really does treat a container as a "server
[2014-04-24 18:20:09 -0400] jkeiser: And we have chef-metal-lxc driver, too
[2014-04-24 18:20:28 -0400] jkeiser: Been a month or so since I used that one, but I've been planning to get back to it soon
[2014-04-24 18:21:04 -0400] aliljet|new: well, it's clearly erchef that's failing to connect to the chef internal rabbitmq server -- the error seems to descibe somethign related to "auth_failure_likely" -- this is super random though, everything was working a couple days ago and a reboot and now chef doesn't want to play
[2014-04-24 18:21:06 -0400] jkeiser: After I get parallelism done (which is coming along nicely)
[2014-04-24 18:22:22 -0400] rberger: jkeiser: Ok, I will play with those options and let you know how it goes Thanks!
[2014-04-24 18:26:31 -0400] whiteadam: Does anyone know if a port can be specified for the gateway in $knife bootstrap ip --ssh-gateway IP
[2014-04-24 19:00:33 -0400] michaelhart: Im running open source chef server 11.12.2-1, and tried to generate a new private key. Once I copy that to my workstation, knife fails to run complaining that it has Invalid signrature for user or client. However when I copied the old private key back it still works. Am I doing something totally wrong or is this a horrible bug?
[2014-04-24 19:00:59 -0400] whiteadam: Has anyone experienced the ssh-gateway not taking the provided key?
[2014-04-24 19:01:26 -0400] vegardx: I think there is a bug actually, I had the same. Just delete it and re-add it.
[2014-04-24 19:01:55 -0400] joshu____: say I want to use a library from cookbook A, do I have to include_recipe that cookbook in another recipe to use the library resource or can I just include it in the metadata?
[2014-04-24 19:07:01 -0400] michaelhart: vegardx: its my own account, cant really do that
[2014-04-24 19:07:39 -0400] vegardx: Add a new admin account, then do it.
[2014-04-24 19:13:27 -0400] whiteadam: Anyone know why --ssh-gateway might not be looking at my -i poop.pem ?
[2014-04-24 19:15:28 -0400] vt102: I'm trying to grok this statement from haproxy cookbook: "... or supply your own and override the cookbook and source by reopening the `template[/etc/haproxy/haproxy.cfg]` res
[2014-04-24 19:15:28 -0400] vt102: ource."
[2014-04-24 19:15:52 -0400] gleam: use chef-rewind
[2014-04-24 19:16:20 -0400] gleam: or resources("template[/etc/haproxy/haproxy.cfg]").cookbook "mycookbook"
[2014-04-24 19:16:25 -0400] whiteadam: I thought you meant grok like the language
[2014-04-24 19:16:29 -0400] whiteadam: confused me there
[2014-04-24 19:16:32 -0400] gyoza: wow lotsof people!
[2014-04-24 19:16:35 -0400] gyoza: Great:)
[2014-04-24 19:16:46 -0400] vt102: gleam: thanks, will look at those.
[2014-04-24 19:16:56 -0400] gyoza: gleam: i think i know you
[2014-04-24 19:17:03 -0400] gleam: probably
[2014-04-24 19:17:18 -0400] whiteadam: gleam: yeah, weren't we all in a gang together in the 90's?
[2014-04-24 19:17:55 -0400] gyoza: yea the efnet gang
[2014-04-24 19:17:59 -0400] gyoza: lol
[2014-04-24 19:18:14 -0400] gleam: you don't want to mess with efnet people
[2014-04-24 19:18:17 -0400] gleam: they're crazy.
[2014-04-24 19:18:41 -0400] gyoza: yo so hey guys, im new to chef as of 10 mins ago and i wanna get ec2-knife going but the docs say to install gemfile chef then knife-ec2, if i have chef server installed already do i need to add the "chef" gem?
[2014-04-24 19:20:37 -0400] whiteadam: gyoza: you on your workstation?
[2014-04-24 19:20:40 -0400] gyoza: no
[2014-04-24 19:20:47 -0400] gyoza: thanks for the answer;)
[2014-04-24 19:21:03 -0400] gyoza: guess i need to get ruby running on my mac
[2014-04-24 19:21:08 -0400] whiteadam: gyoza: pretty much everything happens on the workstation
[2014-04-24 19:21:10 -0400] gleam: just install chefdk
[2014-04-24 19:21:18 -0400] whiteadam: took me a git to get the hang of it
[2014-04-24 19:21:23 -0400] whiteadam: git = bit
[2014-04-24 19:21:26 -0400] gleam: http://www.getchef.com/blog/2014/04/15/chef-development-kit/
[2014-04-24 19:21:29 -0400] gyoza: repos on teh brain
[2014-04-24 19:21:35 -0400] gleam: and then "chef gem install ec2-knife"
[2014-04-24 19:21:38 -0400] gleam: or whatever it's called
[2014-04-24 19:21:41 -0400] gyoza: nice thanks:)
[2014-04-24 19:22:26 -0400] whiteadam: i'm still doing it the old way like a cool kid
[2014-04-24 19:24:03 -0400] whiteadam: bootstrap is being a dick and ignoring my ssh key with no helpful output
[2014-04-24 19:29:56 -0400] ypaq: hey
[2014-04-24 19:30:09 -0400] gyoza: hey
[2014-04-24 19:30:46 -0400] whiteadam: hey
[2014-04-24 19:31:02 -0400] ypaq: i've just played around with ubuntu 14.04 a bit and realized puppet agent is started by default. are the guys from ubuntu mad?
[2014-04-24 19:31:19 -0400] whiteadam: I heard there was some crazy stuff going on in it
[2014-04-24 19:31:35 -0400] whiteadam: I stick to EL for work... and it's nice because nothing ever changes :)
[2014-04-24 19:31:41 -0400] gyoza: wow
[2014-04-24 19:31:49 -0400] gyoza: autopuppetppwn
[2014-04-24 19:32:06 -0400] whiteadam: stop ignoring my public key bootstrap
[2014-04-24 19:33:06 -0400] ypaq: has anybody already deatl with ubuntu 14 professionally? what did you do? just uninstall puppet?
[2014-04-24 19:33:27 -0400] whiteadam: Is it an LTS?
[2014-04-24 19:33:32 -0400] gleam: it is
[2014-04-24 19:33:33 -0400] stormerider: yeah
[2014-04-24 19:33:36 -0400] ypaq: yes
[2014-04-24 19:33:38 -0400] whiteadam: wow
[2014-04-24 19:34:15 -0400] ypaq: is this just ubuntu or debian as well?
[2014-04-24 19:39:14 -0400] jwoo: hello all, got a question regarding the deploy resource
[2014-04-24 19:39:27 -0400] jwoo: the user that is used to clone the repo
[2014-04-24 19:39:36 -0400] jwoo: can it be a nologin user?
[2014-04-24 19:45:04 -0400] gyoza: my xcode install is fubared
[2014-04-24 19:45:05 -0400] gyoza: great
[2014-04-24 19:47:36 -0400] bean: ypaq: wait, are you seeing this installing direct form an ISO or like an AMI or something?
[2014-04-24 19:48:09 -0400] jtimberman: ohai chefs fyi: http://status.opscode.com/post/83738852571/community-tickets-and-wiki-down-for-emergency
[2014-04-24 19:48:29 -0400] ypaq: bean: with vagrant from here http://cloud-images.ubuntu.com/vagrant/trusty/current/
[2014-04-24 19:50:00 -0400] stormerider: ypaq: i checked my box that i upgraded to trusty and i didnt see it running.
[2014-04-24 19:50:04 -0400] dark_dr4g0n: hiall
[2014-04-24 19:50:15 -0400] gleam: it's only running if you install the puppet-agent package
[2014-04-24 19:50:19 -0400] gleam: and it apparently is running in disabled mode
[2014-04-24 19:50:38 -0400] dark_dr4g0n: is there exist tool for create yourself mini berks api with cookbooks?
[2014-04-24 19:51:10 -0400] ypaq: gleam: but i didn't install it
[2014-04-24 19:51:23 -0400] bean: maybe it's on their default cloud image.
[2014-04-24 19:51:29 -0400] gleam: i think that's probably more likely
[2014-04-24 19:51:31 -0400] bean: personally I'd cut my own .box.
[2014-04-24 19:51:32 -0400] gleam: it's not on their stock server download
[2014-04-24 19:51:33 -0400] ypaq: bean: i suppose so
[2014-04-24 19:51:39 -0400] gleam: (i just looked)
[2014-04-24 19:51:53 -0400] whiteadam: has anyone used knife bootstrap with the --ssh-gateway option to configure servers in AWS?
[2014-04-24 19:51:57 -0400] ypaq: gleam: thanks! that's good to know
[2014-04-24 19:51:58 -0400] bean: it's likely in the default cloud image, which is annoying
[2014-04-24 19:52:40 -0400] holms: anybody can point me what's the problem? http://pastie.org/pastes/9109039/text
[2014-04-24 19:52:45 -0400] holms: build-essentials failing?
[2014-04-24 19:55:54 -0400] holms: jtimberman: any chance you online :)? siting with this problem whole day already
[2014-04-24 19:59:40 -0400] dark_dr4g0n: holms, maybe don't add some repo with this package?
[2014-04-24 20:00:41 -0400] gleam: ypaq: i also just launched an ec2 instance form the cloud-images archive and no puppet. maybe only in the vagrant versions.
[2014-04-24 20:01:04 -0400] geggam:  Chef::Exceptions::Package: No version specified, and no candidate version available for kernel-devel
[2014-04-24 20:01:24 -0400] geggam: pretty pbvious there is no package with that name available
[2014-04-24 20:01:34 -0400] holms: well
[2014-04-24 20:01:36 -0400] holms: yesterday it was working
[2014-04-24 20:01:47 -0400] holms: i mean i don't add anything im using mongodb cookbook :0
[2014-04-24 20:02:01 -0400] holms: and actually nothing has been changed since yesterday at least in chef-mongodb
[2014-04-24 20:02:04 -0400] geggam: yeah... and a millenia ago mastodons walked the earth \
[2014-04-24 20:02:15 -0400] geggam: something has changed...
[2014-04-24 20:02:20 -0400] holms: well dude I have my cookbook in repo
[2014-04-24 20:02:27 -0400] holms: since like 3 days unchanged and today it fails to build
[2014-04-24 20:02:32 -0400] holms: on may imac and macbook
[2014-04-24 20:02:36 -0400] geggam: well dude if nothing changed it would be working ... still
[2014-04-24 20:02:46 -0400] holms: that's the point
[2014-04-24 20:02:52 -0400] holms: build-essentials updated
[2014-04-24 20:02:55 -0400] geggam: the fact its not working says the working has changed
[2014-04-24 20:02:56 -0400] geggam: what else
[2014-04-24 20:03:18 -0400] ypaq: gleam: i suppose so, thanks again
[2014-04-24 20:03:41 -0400] bean: if you log in manually and do "yum install kernel-headers" does it work holms
[2014-04-24 20:04:06 -0400] holms: will try nwo
[2014-04-24 20:05:41 -0400] holms: http://pastie.org/pastes/9109069/text
[2014-04-24 20:05:43 -0400] jwoo: anybody use the deploy resource?
[2014-04-24 20:06:10 -0400] holms: geggam: s'rsly this was working yesterday, and i've redeployed like 5 times before commiting
[2014-04-24 20:06:44 -0400] holms: my only guess, that in mongodb cookbook or somewhere in depenedency, build-essentials cookbook doesn't have version specified
[2014-04-24 20:06:58 -0400] holms: so because of that cookbook update it fails or smtng
[2014-04-24 20:07:38 -0400] holms: bean: any ideas :)?
[2014-04-24 20:08:04 -0400] bean: err, kernel-devel i meant
[2014-04-24 20:08:07 -0400] jchauncey: *shakes his fist at the remote_file resource*
[2014-04-24 20:08:29 -0400] bean: jchauncey: why? :)
[2014-04-24 20:08:56 -0400] bean: jchauncey: idempotency issues?
[2014-04-24 20:09:16 -0400] holms: bean: No package kernel-devel available.
[2014-04-24 20:09:24 -0400] jchauncey: bean: yar
[2014-04-24 20:09:34 -0400] bean: theres your problem then, holms, is it potentially excluded in your yum conf?
[2014-04-24 20:09:39 -0400] jchauncey: bean: oh checksum does not do what you think it does
[2014-04-24 20:10:16 -0400] bean: jchauncey: hmm, checksum is a sha256 of the file (or a portion thereof)
[2014-04-24 20:10:31 -0400] holms: bean: not sure. yum-centos and yum-epel was handling this
[2014-04-24 20:10:47 -0400] holms: gonna try to provision this vm only with these 2 cookbooks and see if kernel-devel in there
[2014-04-24 20:11:05 -0400] jchauncey: bean: yeah but it has to download the file to compare the checksums
[2014-04-24 20:11:30 -0400] jchauncey: bean: you have to use the 'use_last_modified' attribute deals so it wont redownload the file everytime
[2014-04-24 20:11:36 -0400] bean: jchauncey: hmm true. Maybe juse use "create_if_missing?"
[2014-04-24 20:11:46 -0400] bean: holms: grep -ir exclud /etc/yum.* on the server
[2014-04-24 20:11:56 -0400] jchauncey: bean: that might be dangerous though
[2014-04-24 20:11:57 -0400] bean: see if theres any excluded packages.
[2014-04-24 20:12:05 -0400] bean: jchauncey: I agree.
[2014-04-24 20:12:06 -0400] jchauncey: bean: if it errors part way and i only have a partial download
[2014-04-24 20:12:12 -0400] bean: hmm true
[2014-04-24 20:13:35 -0400] bean: jchauncey: have you looked at doing checksum with create_if_missing
[2014-04-24 20:13:38 -0400] bean: I think it'l work, that way.
[2014-04-24 20:13:46 -0400] jchauncey: hmm ill try
[2014-04-24 20:14:04 -0400] holms: hmz
[2014-04-24 20:14:08 -0400] holms: bean: [root@backend vagrant]# grep -ir exclud /etc/yum.*
[2014-04-24 20:14:10 -0400] holms: /etc/yum.conf:exclude=kernel*
[2014-04-24 20:14:14 -0400] holms: and why is that
[2014-04-24 20:14:17 -0400] bean: that'd do it!
[2014-04-24 20:14:25 -0400] bean: probably to exclude kernel updates.
[2014-04-24 20:15:10 -0400] gyoza: man
[2014-04-24 20:15:52 -0400] gyoza: mac keeps telling me i dont have development tools installed when i tries to compile.
[2014-04-24 20:15:55 -0400] gyoza: :(
[2014-04-24 20:16:00 -0400] bean: so install them? ;)
[2014-04-24 20:16:03 -0400] gyoza: they are
[2014-04-24 20:16:10 -0400] holms: bean: gonna try to use cookbook one by one and see when kernel exclude appeared
[2014-04-24 20:16:13 -0400] gyoza: i think its cause my mac is fubared
[2014-04-24 20:16:25 -0400] gyoza: <-- first mac
[2014-04-24 20:16:30 -0400] gyoza: made some mistakes in the begining:P
[2014-04-24 20:16:42 -0400] gyoza: aka installing macports
[2014-04-24 20:16:48 -0400] bean: oh yeah, that's a mistake
[2014-04-24 20:16:52 -0400] gyoza: yea
[2014-04-24 20:16:54 -0400] bean: and a rabbit hole to untangle.
[2014-04-24 20:16:55 -0400] gyoza: i leanred that
[2014-04-24 20:17:00 -0400] bean: macports or bust.
[2014-04-24 20:17:11 -0400] gyoza: i heard brew is the better one to use
[2014-04-24 20:17:33 -0400] bean: homebrew is much better.
[2014-04-24 20:17:47 -0400] bean: macports is like taking portage and slapping it on top of mac
[2014-04-24 20:17:51 -0400] bean: can't say i'm a fan
[2014-04-24 20:17:57 -0400] gyoza: i liked it at first
[2014-04-24 20:18:02 -0400] gyoza: it allowed me to install certain tools
[2014-04-24 20:18:07 -0400] gyoza: but now its screwing me over badly
[2014-04-24 20:18:21 -0400] gyoza: i almost want to reinstall this workstation
[2014-04-24 20:18:28 -0400] gyoza: but we get new macs in august...
[2014-04-24 20:18:42 -0400] gyoza: we're on that applelease program thing
[2014-04-24 20:19:19 -0400] aujt74: gyoza: homebrew will give you some guidance on getting macports out of the way
[2014-04-24 20:19:26 -0400] gyoza: yea/
[2014-04-24 20:19:29 -0400] gyoza: that'd be great
[2014-04-24 20:19:33 -0400] gyoza: ill poke around
[2014-04-24 20:19:37 -0400] bean: "brew doctor"
[2014-04-24 20:19:39 -0400] aujt74: brew doctor if I recall
[2014-04-24 20:19:39 -0400] bean: is your friend
[2014-04-24 20:19:41 -0400] aujt74: yup
[2014-04-24 20:19:53 -0400] stormerider: gyoza: your nick is making me hungry :)
[2014-04-24 20:19:56 -0400] vt102: Hmmm...the haproxy community recipe has templates for platform "rhel"...however, my RHEL 6.4 box has platform "redhat" so it's not finding the correct template.  Is there a way to override this in a wrapper?
[2014-04-24 20:20:03 -0400] gyoza: stormerider: sorry:P nomnomnom
[2014-04-24 20:20:51 -0400] gyoza: stormerider: what if everybody started calling you white storme?
[2014-04-24 20:20:56 -0400] gyoza: you mean there is a black storme??
[2014-04-24 20:20:58 -0400] setient: tired.
[2014-04-24 20:21:12 -0400] stormerider: heh
[2014-04-24 20:21:35 -0400] gyoza: Did you guys see this ? http://codepen.io/juliangarnier/pen/idhuG
[2014-04-24 20:21:37 -0400] setient: is it 5 pm yet?  i need to convince my company to switch to chef from puppet, most likely.  i am writing a bunch of things that chef does built in :(
[2014-04-24 20:21:38 -0400] bean: vt102: can you link me the recipe?
[2014-04-24 20:21:46 -0400] gyoza: CSS+JS solarsystem simulator
[2014-04-24 20:22:32 -0400] gyoza:  /opt/chefdk/embedded/lib/ruby/2.1.0 :: port -f uninstall installed
[2014-04-24 20:22:37 -0400] gyoza: TIME TO BREAK MY MACHINE
[2014-04-24 20:22:37 -0400] vt102: bean: https://github.com/hw-cookbooks/haproxy/tree/master/templates  <--- I don't think it's a recipe issue: I want the rhel/haproxy-init.erb file, not the default/haproxy-init.erb
[2014-04-24 20:23:10 -0400] vt102: http://docs.opscode.com/essentials_cookbook_templates.html#file-specificity  <-- my node[:platform] is "redhat' tho, so it's using default
[2014-04-24 20:23:30 -0400] vt102: My node[:platform_family] is rhel but I don't see how to use that.
[2014-04-24 20:27:21 -0400] jwoo: @setient an argument you can make is that puppy is propiertary meaning with chef if you know ruby you will be a step ahead
[2014-04-24 20:27:47 -0400] jwoo: @setient LOL, i mean puppet noy puppy
[2014-04-24 20:28:26 -0400] setient: jwoo: the problem is my boss knows puppet, does not know chef and neither do i really but i can learn and it is not like our puppet infrastructure thus far is super complicated
[2014-04-24 20:29:16 -0400] bean: vt102: I wonder if that ever worked right then
[2014-04-24 20:29:29 -0400] bean: or if it changed in more recent versions of RHEL or what
[2014-04-24 20:29:45 -0400] vt102: bean: I haven't poked around yet but it must have worked on my vagrant image, I got the correct init file there.
[2014-04-24 20:30:09 -0400] bean: yeah, and you're deploying this and it is breaking in where, AWS?
[2014-04-24 20:30:42 -0400] vt102: bean: Ah, no, the vagrant image is centos
[2014-04-24 20:30:46 -0400] bean: oh okay
[2014-04-24 20:30:49 -0400] bean: that'd probably do it
[2014-04-24 20:31:00 -0400] vt102: this is a local rhel box
[2014-04-24 20:31:06 -0400] vt102: sorry, "redhat" box.  ;-)
[2014-04-24 20:31:26 -0400] bean: so cent must report as "rhel" and actual redhat as "redhat"?
[2014-04-24 20:31:47 -0400] vt102: I imagine it's using the centos directory.
[2014-04-24 20:32:18 -0400] bean: http://docs.opscode.com/dsl_recipe_method_platform_family.html says both CentOS and RHEL should be "rhel"
[2014-04-24 20:33:11 -0400] stormerider: yes, but http://docs.opscode.com/dsl_recipe_method_platform.html says redhat...
[2014-04-24 20:33:18 -0400] vt102: Right, they are-- but it appears the template directory is using platfrom, but not platform_family
[2014-04-24 20:33:42 -0400] vt102: Both have "platform_family": "rhel"
[2014-04-24 20:33:57 -0400] bean: oh man, that seems silly.
[2014-04-24 20:33:59 -0400] bean: hmmmm
[2014-04-24 20:34:47 -0400] vt102: The issue *seems* to be my RHEL box has "platform": "redhat" and no redhat template directory in the community cookbook.  So I wondered if I could override it.
[2014-04-24 20:36:45 -0400] holms: bean: seems to be kernel exluded by default
[2014-04-24 20:36:55 -0400] bean: hmm, not sure why that'd be,
[2014-04-24 20:36:56 -0400] bean: seems dumb
[2014-04-24 20:37:07 -0400] holms: ok so it's vagrant machine then
[2014-04-24 20:37:09 -0400] holms: crap
[2014-04-24 20:37:15 -0400] holms: image probably been updated or smtng
[2014-04-24 20:37:40 -0400] holms: any ideas how can I remove that kernel exclude with help of yum cookbook?
[2014-04-24 20:37:51 -0400] holms: default[:yum][:exclude] = "" ?
[2014-04-24 20:39:16 -0400] bean: I don't actually use chef on rhel / cent, but I can take a look real quick to see if I can't figure that out
[2014-04-24 20:39:26 -0400] bean: where do you get the vagrant box from/
[2014-04-24 20:39:38 -0400] holms: https://github.com/opscode-cookbooks/yum or https://github.com/opscode-cookbooks/yum-centos
[2014-04-24 20:39:48 -0400] holms: bean: one sec
[2014-04-24 20:40:09 -0400] holms: https://github.com/2creatives/vagrant-centos/releases/download/v6.5.1/centos65-x86_64-20131205.box
[2014-04-24 20:40:53 -0400] vt102: https://dl.dropbox.com/u/31081437/Berkshelf-CentOS-6.3-x86_64-minimal.box but the image I'm having troube with is my own RHEL 6.5 box
[2014-04-24 20:41:55 -0400] bean: yar, sorry, vt102 I was talking to holms about that one.   I don't know if you can fix it without forking / renaming there.
[2014-04-24 20:42:07 -0400] setient: oh man, i need to try berkshelf
[2014-04-24 20:42:23 -0400] vt102: bean: okay thanks
[2014-04-24 20:43:01 -0400] holms: bean: just was thinking that, that box haven't been updated at least on my imac. and today it's failing
[2014-04-24 20:43:10 -0400] holms: probably reseting exclude is quite nice
[2014-04-24 20:43:12 -0400] holms: wise*
[2014-04-24 20:44:15 -0400] gkra: holms: if default doesn't do it, and you really want to ensure node[:yum][:exclude] is nil, use normal
[2014-04-24 20:44:52 -0400] gkra: nil, empty Array, whathaveyou
[2014-04-24 20:45:06 -0400] gkra: normal[:yum][:exclude] = []
[2014-04-24 20:45:26 -0400] holms: thanks :) trying now
[2014-04-24 20:45:53 -0400] bean: holms: https://github.com/2creatives/vagrant-centos/blob/master/ks.cfg#L154
[2014-04-24 20:46:28 -0400] holms: ...
[2014-04-24 20:46:37 -0400] bean: so it seems that box installs kernel-devel, installs guest additions, then uninstalls kernel-devel
[2014-04-24 20:46:38 -0400] holms: how was it working yesterday, i just completely don't understand
[2014-04-24 20:46:49 -0400] bean: Ghosts.
[2014-04-24 20:46:52 -0400] holms: i've moved recipe[yum-centos] and recipe[yum-epel] to my cookbook recipe which still goes first in a list
[2014-04-24 20:47:41 -0400] holms: so build-essentials should go first or smtng :)
[2014-04-24 20:48:17 -0400] stormerider: holms: magic smoke. dont let it escape.
[2014-04-24 20:48:44 -0400] bean: maybe, holms, but you still might have trouble if that's expecting kernel-devel to be installed.
[2014-04-24 20:49:15 -0400] holms: im not actually sure that kernel-devel was requested before at all
[2014-04-24 20:49:25 -0400] holms: build-essentials been updated recently no?
[2014-04-24 20:49:59 -0400] gyoza: well ig ot macports removed
[2014-04-24 20:50:17 -0400] gyoza: now i cant run gimp:(
[2014-04-24 20:50:18 -0400] gyoza: so sad
[2014-04-24 20:50:38 -0400] gyoza: man
[2014-04-24 20:50:39 -0400] gyoza: that fixed it
[2014-04-24 20:50:45 -0400] gyoza: Macports = evil
[2014-04-24 20:51:16 -0400] stormerider: i switched to homebrew pretty early on
[2014-04-24 20:52:09 -0400] setient: i don't get homebrew.
[2014-04-24 20:52:11 -0400] setient: at all.
[2014-04-24 20:52:30 -0400] setient: i mean i have used it and i get how to use it and what it does but i don't get why it exists
[2014-04-24 20:53:12 -0400] gyoza: so people can install gimp on their mac
[2014-04-24 20:53:15 -0400] gyoza: :P
[2014-04-24 20:53:20 -0400] stormerider: its like macports, but better maintained, imo.
[2014-04-24 20:53:21 -0400] gyoza: natively
[2014-04-24 20:53:32 -0400] gyoza: oh i read that wrong
[2014-04-24 20:53:49 -0400] gyoza: setient: its nice, its like yum for mac
[2014-04-24 20:54:00 -0400] setient: i get that.  what i am saying is there was macports, gentoo's portage and netbsd's pkgsrc (works on literally every platform)
[2014-04-24 20:54:06 -0400] setient: why reinvent the wheel
[2014-04-24 20:54:12 -0400] setient: i really really don't get it
[2014-04-24 20:54:17 -0400] gyoza: cause people are bored?
[2014-04-24 20:54:20 -0400] gyoza: lol
[2014-04-24 20:54:39 -0400] setient: sure, they were bored so they made a slower package management system that is specific to one os.
[2014-04-24 20:54:42 -0400] gyoza: maybe there is a process in one of those alternatives that the devs didnt like
[2014-04-24 20:54:45 -0400] gyoza: and they were so upset by it
[2014-04-24 20:54:46 -0400] gyoza: they wrote their own
[2014-04-24 20:54:47 -0400] setient: they were
[2014-04-24 20:54:49 -0400] jmickle: coderanger: you around?
[2014-04-24 20:54:55 -0400] setient: i think the "upset" is not written in ruby
[2014-04-24 20:55:00 -0400] coderanger: Yep, whats up
[2014-04-24 20:55:02 -0400] setient: but i mean it works
[2014-04-24 20:55:07 -0400] gyoza: haha
[2014-04-24 20:55:11 -0400] gyoza: im not a fan of ruby
[2014-04-24 20:55:18 -0400] gyoza: just because i read bad shit about it all the time
[2014-04-24 20:55:20 -0400] setient: i am fine with ruby, i do python too and a bit of perl
[2014-04-24 20:55:21 -0400] gyoza: and its so finicky
[2014-04-24 20:55:35 -0400] wdilly: eeeh, im sorry, but can someone help me shed light on this error?
[2014-04-24 20:55:37 -0400] wdilly: http://fpaste.org/96777/83728791/
[2014-04-24 20:55:51 -0400] wdilly: I can manually make this file but chef seems unable to do so
[2014-04-24 20:55:57 -0400] gyoza: looks like your lockfile argument is bad?
[2014-04-24 20:56:04 -0400] gyoza: <-im new so be gentle
[2014-04-24 20:56:30 -0400] gyoza: should it be 0744
[2014-04-24 20:56:31 -0400] gyoza: not 00744?
[2014-04-24 20:56:37 -0400] jbz: wdilly: Is it possible the path doesn't exist?
[2014-04-24 20:56:38 -0400] jameson__: 0744
[2014-04-24 20:56:39 -0400] stormerider: wdilly: does /home/sgeadmin exist?
[2014-04-24 20:56:56 -0400] wdilly: yes it exists... and if i login to the node manually i can touch the file as root
[2014-04-24 20:56:58 -0400] jameson__: gyoza: you can do '744' or 0744 but not 00744
[2014-04-24 20:57:05 -0400] gyoza: well his files says mode "00744"
[2014-04-24 20:57:09 -0400] gyoza: so is that why its breaking?
[2014-04-24 20:57:32 -0400] bean: Could be.
[2014-04-24 20:57:46 -0400] wdilly: gyoza, i use the additional zero elsewhere without issue
[2014-04-24 20:57:56 -0400] wdilly: though i dont know what its for to be honest
[2014-04-24 20:58:06 -0400] wdilly: it evaluated to 744 typically
[2014-04-24 20:58:06 -0400] gyoza: wdilly: permissions of the folder you're specifying
[2014-04-24 20:58:07 -0400] stormerider: odd, yeah, chmod 00744 works fine
[2014-04-24 20:59:20 -0400] jbz: Does it work with straight 'create'?
[2014-04-24 20:59:24 -0400] wdilly: the p[arent folder is 755
[2014-04-24 20:59:34 -0400] wdilly: does not work with straight create
[2014-04-24 20:59:41 -0400] jbz: hm
[2014-04-24 21:00:02 -0400] stormerider: try dropping the extra zero and see if there's any change, worth checking
[2014-04-24 21:00:30 -0400] ericedge: Sorry if this has already been asked, but is https://tickets.opscode.com/ getting a 502 for anyone else?
[2014-04-24 21:00:30 -0400] wdilly: will do
[2014-04-24 21:00:38 -0400] gleam: it sould be either 00744 or '744' or '0744', not 0744
[2014-04-24 21:00:46 -0400] gleam: (although 0744 will work, no?)
[2014-04-24 21:01:11 -0400] stormerider: ericedge: yes
[2014-04-24 21:01:33 -0400] stormerider: ditto with https://tickets.getchef.com/
[2014-04-24 21:02:07 -0400] ericedge: stormerider: Thanks.  I feel like I should submit a ticket on it.
[2014-04-24 21:03:15 -0400] viglesias: ericedge: http://status.opscode.com/post/83738852571/community-tickets-and-wiki-down-for-emergency
[2014-04-24 21:03:18 -0400] stormerider: ericedge: hah
[2014-04-24 21:03:33 -0400] ericedge: viglesias: Superkeen, thanks!
[2014-04-24 21:03:43 -0400] luisg__: hi guys, is there an easy way to use remote_file if some attribute is a uri or a cookbook_file if the attribute is just a file name?
[2014-04-24 21:04:27 -0400] luisg__: without having to create either a remote_file or a cookbook_file blocks repeating all the attributes
[2014-04-24 21:04:38 -0400] luisg__: on each block
[2014-04-24 21:04:51 -0400] stormerider: luisg__: i might be wrong, but doesnt remote_file support "file://" ?
[2014-04-24 21:05:24 -0400] luisg__: but how do i know the file:// url of the cookbook file within the file system?
[2014-04-24 21:05:37 -0400] luisg__: it does support file://
[2014-04-24 21:17:00 -0400] wdilly: 755 not 00755 appears to have done it.
[2014-04-24 21:17:38 -0400] wdilly: i can only suggest that it didnt work here but it worked elsewhere because this is actually and NFS mount.... frickin weird.
[2014-04-24 21:18:15 -0400] holms: bean: nice :) it worked. thanks for figuring it out. it was failing right after mongo install where include_recipe "python::source" been going
[2014-04-24 21:18:17 -0400] holms: so that's why
[2014-04-24 21:18:27 -0400] bean: ahhhh yeah that'd do it.
[2014-04-24 21:18:47 -0400] holms: excldefault['yum']['main']['exclude'] = "" fixed everything
[2014-04-24 21:20:33 -0400] bean: nice.
[2014-04-24 21:21:34 -0400] gyoza: anybody here into nootropic stacks?
[2014-04-24 21:21:46 -0400] gyoza: lol
[2014-04-24 21:24:36 -0400] holms: ahrr ImportError: No module named yum
[2014-04-24 21:34:25 -0400] nacx: hi!
[2014-04-24 21:34:47 -0400] nacx: can someone point me where to download chef 11.1 beta for Ubuntu 11.04 from?
[2014-04-24 21:35:29 -0400] nacx: (the chef community server)
[2014-04-24 21:35:43 -0400] coderanger: nacx: I know of no such beta
[2014-04-24 21:35:47 -0400] coderanger: was it announced recently?
[2014-04-24 21:36:42 -0400] nacx: I'm just experiencing this issue: https://tickets.opscode.com/browse/CHEF-3952
[2014-04-24 21:36:48 -0400] nacx: and it is fixed in 11.1.0
[2014-04-24 21:37:02 -0400] gyoza: might not be released yet
[2014-04-24 21:37:27 -0400] coderanger: nacx: Assuming thats the "runaway CPU on solve failure"
[2014-04-24 21:37:34 -0400] nacx: I've had a look at the index of packages at: https://opscode-omnibus-packages.s3.amazonaws.com
[2014-04-24 21:37:53 -0400] nacx: and there are several 11.1.0 packages, but (as far as I've seen) for rhel
[2014-04-24 21:38:08 -0400] coderanger: nacx: Thats a "it will be fixed in the future, there is no formal 11.1, just nightly builds
[2014-04-24 21:38:16 -0400] coderanger: nacx: I wouldn't run those though
[2014-04-24 21:38:40 -0400] gyoza: hey uhh on my mac, it says i need to update my kniferb with my amazon keys, i have like 50 knife.rb files
[2014-04-24 21:38:40 -0400] nacx: is there any schedule for 11.1?
[2014-04-24 21:38:46 -0400] coderanger: nacx: No
[2014-04-24 21:38:47 -0400] gyoza: which one? chef/application/knife.rb?
[2014-04-24 21:38:52 -0400] coderanger: nacx: Opscode is  not good at schedules
[2014-04-24 21:39:03 -0400] nacx: it's quite annoying as I can't browse cerating cookbooks and can't add attributes to the data bags throught he ui
[2014-04-24 21:39:04 -0400] bean: gyoza: o.o why do you have so many knife.rbs?
[2014-04-24 21:39:13 -0400] gyoza: bean: chefdk
[2014-04-24 21:39:17 -0400] nacx: coderanger: most OSS projects aren't good at that :)
[2014-04-24 21:39:18 -0400] gyoza: im assuming.
[2014-04-24 21:39:32 -0400] coderanger: nacx: chef-server is functionally speaking not a FOSS project
[2014-04-24 21:39:45 -0400] gyoza: I am guessing I do not want to update any of the knife.rb files in a /lib/ folder or subfolder of lib
[2014-04-24 21:39:50 -0400] gchristensen: coderanger: functionally?
[2014-04-24 21:39:50 -0400] coderanger: nacx: Almost no one beyond employees have contributed code to it, despite being open
[2014-04-24 21:39:57 -0400] gchristensen: ah
[2014-04-24 21:40:02 -0400] nacx: is there an easy way to get the nightly builds? it is not a production server, just one in our dev labs, so I could try it, if there is a way
[2014-04-24 21:40:48 -0400] stormerider: nacx: build your own omnibus package from the source if your os doesnt have nightly packages?
[2014-04-24 21:41:16 -0400] nacx: stormerider: ok, I'll try! thx
[2014-04-24 21:42:56 -0400] nacx: and one last question: I have a recipe that needs to compose a String using the node['fqdn']
[2014-04-24 21:43:06 -0400] nacx: *but* I'm setting the hostname using the hostname cookbook
[2014-04-24 21:43:17 -0400] nacx: so the node['fqdn'] is not properly set in the compile phase
[2014-04-24 21:43:47 -0400] nacx: and when I assignt he variable in the recipe: foo = "http://#{node['fqdn']}/bar"
[2014-04-24 21:44:03 -0400] nacx: it gets populated to "localhost", instead of the one set by the hostname recipe
[2014-04-24 21:44:23 -0400] nacx: is there any way to lazy evaluate that string, so I can reuse the variable in several places?
[2014-04-24 21:46:04 -0400] coderanger: nacx: You can use the lazy{} helper at the level of resource attributes
[2014-04-24 21:46:23 -0400] BryanWB: does node.to_json work differently in chef 11 than it did in chef 10? the output looks a lot different o me
[2014-04-24 21:46:26 -0400] coderanger: nacx: Or you could set node.automatic['fqdn'] when you set the hostname, or rerun ohai
[2014-04-24 21:47:03 -0400] nacx: ohai is rerunned by the hostname cookbook
[2014-04-24 21:47:30 -0400] coderanger: nacx: Then lazy{} should be all you need probably
[2014-04-24 21:47:32 -0400] nacx: I tried the lazy approach, but I need the variable inside a ruby_block and int hte "variables" attribute of the template resource
[2014-04-24 21:48:16 -0400] nacx: could something like: node.automatic['fqdn'] = node['set_fqdn'] if node.attribute?['fqdn']
[2014-04-24 21:48:17 -0400] nacx: work?
[2014-04-24 21:48:25 -0400] coderanger: nacx: Wrap the whole thing with lazy
[2014-04-24 21:48:35 -0400] nacx: I just want to set it if the runlist includes the hostname recipe
[2014-04-24 21:48:35 -0400] coderanger: variables lazy { {} }
[2014-04-24 21:49:11 -0400] nacx: cool, and is there any ruby code I can use in the ruby_block?
[2014-04-24 21:49:34 -0400] nacx: sorry, I meant: node.automatic['fqdn'] = node['set_fqdn'] if node.attribute?['set_fqdn']
[2014-04-24 21:50:41 -0400] coderanger: nacx: The inside of the ruby_block is already lazyizly eval'd
[2014-04-24 21:50:44 -0400] coderanger: so you should be okay there
[2014-04-24 21:51:26 -0400] nacx: ah cool
[2014-04-24 21:51:31 -0400] nacx: thx so much!
[2014-04-24 21:51:33 -0400] mrj: hey guys is this error super generic and given any time theres no connectivity? getaddrinfo: nodename nor servname provided or not known
[2014-04-24 21:52:04 -0400] coderanger: nacx: I know some announcements are planned in the coming weeks about the CPU usage issues, so watch the mailing list et al
[2014-04-24 21:52:12 -0400] mrj: imo that error sounds like it's not getting the fqdn i'm entering
[2014-04-24 21:52:30 -0400] nacx: I'll do. thx coderanger it's been great help
[2014-04-24 21:52:56 -0400] troyready: coderanger, re: the foss discussion above -- opscode should stop being so awesome with new features and updates
[2014-04-24 21:53:08 -0400] troyready: Make us start giving back more to get new features
[2014-04-24 21:53:33 -0400] coderanger: troyready: Heh, I'm probably the wrong one to talk to on that
[2014-04-24 21:54:27 -0400] troyready: Well, I like what they're doing :)
[2014-04-24 21:54:50 -0400] coderanger: troyready: It was known going in that moving to Erlang would reduce contribution, but even before that chef-client had orders of magnitude more than chef-server
[2014-04-24 21:57:10 -0400] mrj: Can someone just let me know if that error is network based or config based?
[2014-04-24 21:57:14 -0400] troyready: Makes sense
[2014-04-24 21:57:21 -0400] nacx: one last thing coderanger :) do you know if the rest api for Enterprise Chef is documented somewhere?
[2014-04-24 21:57:22 -0400] mrj: I'm 90% sure its network but it's not described well
[2014-04-24 21:57:27 -0400] nacx: the user and acl resources
[2014-04-24 21:57:33 -0400] troyready: I actually forgot about the erlang change now
[2014-04-24 21:57:49 -0400] coderanger: mrj: Its mostly the same as any other chef server, the users API is in the public docs now
[2014-04-24 21:58:00 -0400] coderanger: er, nacx ^^
[2014-04-24 21:58:18 -0400] coderanger: mrj: Yes, thats usually a node with an unresolvable FQDN
[2014-04-24 21:59:44 -0400] mrj: i gem updated chef now it actually connects.. it was trying to connect to "windows" in my "knife bootstrap windows" command
[2014-04-24 21:59:54 -0400] coderanger: nacx: the ACL and orgs APIs are not documented publicly that I know of but you can read the code of knife-acl or email your sales engineer for some rough docs
[2014-04-24 22:00:31 -0400] nacx: ok, I'll have a look at the code then
[2014-04-24 22:00:58 -0400] mrj: this chef documentation is super frustrating
[2014-04-24 22:01:22 -0400] nacx: don't have a sales engineer :) I maintain the jclouds-chef project and still don't have a private chef instance. hosted version has been enough for now
[2014-04-24 22:01:35 -0400] nacx: will have a look at the knife code, thx!
[2014-04-24 22:02:32 -0400] coderanger: nacx: Ahh, I can volunteer ssd7 then :)
[2014-04-24 22:02:41 -0400] coderanger: or juliancdunn
[2014-04-24 22:03:27 -0400] nacx: great! I've added support for some basic organization and user management api, but what I found (time ago) about the acl api freaked me out :)
[2014-04-24 22:03:37 -0400] nacx: I'll ping them!
[2014-04-24 22:10:03 -0400] nacx: coderanger: the lazy thing in the variables worked like a charm, thx!
[2014-04-24 22:11:43 -0400] the_grunt: I was wondering if there is a workaround for the 'postgresql' recipe executing before 'apt' during compile time?  'apt'['compiletime'] attribute still won't execute before the 'build-essintial' compile time attribute even if 'apt' is first in the run list.  Any thoughts?
[2014-04-24 22:12:11 -0400] coderanger: the_grunt: Simple workaround is the now cookbook and include_recipe_now
[2014-04-24 22:12:25 -0400] lindenle: How do i say that one resource depends on another in chef?
[2014-04-24 22:12:27 -0400] coderanger: Use a wrapper cookbook and include_recipe_now to force converge order
[2014-04-24 22:12:36 -0400] coderanger: lindenle: You don't, its implicit in the ordering
[2014-04-24 22:12:51 -0400] lindenle: coderanger: so if one comes before it assumes they are dependent?
[2014-04-24 22:13:11 -0400] coderanger: lindenle: Chef just executes the code from top to bottom to compile the resources
[2014-04-24 22:13:21 -0400] lindenle: coderanger: cool
[2014-04-24 22:13:29 -0400] coderanger: If you want it to happen first, put it first in the file, just like any other program :)
[2014-04-24 22:24:23 -0400] the_grunt: Thanks all.  The 'now' cookbook worked great.
[2014-04-24 22:33:38 -0400] jc4567: Hi all - wonder if anyone can help me. I have a wrapper/application cookbook that's calling a recipe from the parent cookbook. This parent recipe calls the `template` resource which seems to be ignoring a platform specific template and using the default instead. Is this something anyone else has experienced?
[2014-04-24 22:35:36 -0400] jc4567: template call is here https://github.com/hw-cookbooks/haproxy/blob/master/recipes/install_package.rb#L24 and templates/centos/haproxy-init.erb is ignored (only when the cookbook is wrapped)
[2014-04-24 23:06:40 -0400] dcrosby: jkeiser: it's a bit of a weird issue, but it seems like create_chef_objects isn't getting called (at least according to the print statements I've jammed in)
[2014-04-24 23:08:54 -0400] josephholsten: https://tickets.opscode.com is making me sad
[2014-04-24 23:09:29 -0400] josephholsten: anyone on ops need me to postmates them a beer?
[2014-04-24 23:09:35 -0400] josephholsten: we <3 you
[2014-04-24 23:11:39 -0400] jkeiser: dcrosby: odd that. Should be triggered here: https://github.com/opscode/chef-metal/blob/master/lib/chef/provider/machine.rb#L23
[2014-04-24 23:12:02 -0400] jkeiser: dcrosby: note that at some point here, I switched us over to using the InstallCached convergence strategy
[2014-04-24 23:12:04 -0400] paulmooring: josephholsten sorry for the sadness we'll keep posting to status.opscode.com as we have more info
[2014-04-24 23:12:05 -0400] jkeiser: But that should still call this
[2014-04-24 23:19:56 -0400] dcrosby: jkeiser: this is going to sound crazy, but puts/Chef::Log.info statements aren't even working in the machine provider...
[2014-04-24 23:20:26 -0400] jkeiser: dcrosby: is it possible you are using a gem you didn't think you were using?
[2014-04-24 23:20:38 -0400] jkeiser: dcrosby: try bundle install && bundle execute chef-client .....
[2014-04-24 23:20:45 -0400] jkeiser: dcrosby: now that you have a Gemfile
[2014-04-24 23:20:54 -0400] dcrosby: jkeiser: that was my first thought, so I deleted all chef-metal gems and built from source
[2014-04-24 23:21:38 -0400] jkeiser: dcrosby: add a ruby_block into the recipe that does a puts ...
[2014-04-24 23:21:51 -0400] jkeiser: dcrosby: that way, it will execute in the order that the machine resources execute
[2014-04-24 23:22:03 -0400] jkeiser: and you can find out if it's trying to execute them at all
[2014-04-24 23:22:40 -0400] jkeiser: I can't see a reason that would happen, but that's the nature of a bug, *something* isn't doing what we think it should
[2014-04-24 23:26:28 -0400] dcrosby: jkeiser: I'll dig into it in the morning, expect a patch :-)
[2014-04-24 23:26:41 -0400] jkeiser: dcrosby: thanks man.  Sorry for the trouble
[2014-04-24 23:26:58 -0400] dcrosby: jkeiser: no worries, that's the nature of beta software :-P
[2014-04-24 23:27:35 -0400] jkeiser: I'm working on a minimum set of things to release a stable 1.0 so that we can get past that sadness :)
[2014-04-24 23:30:42 -0400] double_p: time to watch some #chefconf talks
[2014-04-24 23:33:37 -0400] doomviking: why would a chef-client run change the environment on a node? set on bootstrap, changed back in the web ui, changed with knife node edit.
[2014-04-24 23:33:52 -0400] doomviking: must be missing something :)
[2014-04-24 23:37:58 -0400] doomviking: wth
[2014-04-24 23:45:54 -0400] josephholsten: aww, the maintenance page for https://tickets.opscode.com/ still says opscode
[2014-04-24 23:50:52 -0400] coderanger: The hostname does too, so its probably fine
[2014-04-24 23:52:18 -0400] gsymons-di: Anybody know a way to use knife ssh with an ip address that isn't the default? in other words, since network.interfaces.eth1.addresses is a hash, how do I pick an address?
[2014-04-24 23:54:02 -0400] coderanger: gsymons-di: knife ssh is probably not the right tool there
[2014-04-24 23:54:32 -0400] coderanger: If you need some kind of programmatic logic, a tool like Fabric is probably going to work out better
[2014-04-24 23:58:29 -0400] josephholsten: coderanger: do you have any lib so fabric can ssh to boxes matching a certain chef query?
[2014-04-24 23:59:11 -0400] coderanger: josephholsten: https://github.com/coderanger/pychef/blob/master/chef/fabric.py#L153
[2014-04-24 23:59:19 -0400] coderanger: I'm a bad person and haven't written a docstring yet
[2014-04-24 23:59:24 -0400] josephholsten: I had a feeling

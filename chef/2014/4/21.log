[2014-04-21 00:57:40 -0400] frege: hey guys
[2014-04-21 00:57:45 -0400] frege: I'm trying to learn chef solo but not sure if it's worth it for my current size
[2014-04-21 00:57:51 -0400] frege: I only have one server and I use vbox for my dev
[2014-04-21 00:58:04 -0400] frege: but I found chef to be great since I can use it for Vagrant and my server and in the future if I want to use AWS
[2014-04-21 00:58:13 -0400] frege: do you think I should invest time in making my chef repo now?
[2014-04-21 01:02:22 -0400] whiteadam: eh.... it's a lot of time to invest getting it all perfect
[2014-04-21 01:02:52 -0400] frege: whiteadam: really?
[2014-04-21 01:03:09 -0400] whiteadam: frege: I mean, if you're only managing one server...
[2014-04-21 01:04:18 -0400] frege: whiteadam: how much time are we talking about to setup python2.7 , django, postgres and bunch of pips on a centos?
[2014-04-21 01:05:22 -0400] whiteadam: frege: well, chef-solo could do it all in under a minute, but the time to understand how chef works and get it perfect would probably be a while
[2014-04-21 01:05:39 -0400] whiteadam: frege: and since you're not doing it all day every day like some of us, is it worth the time?
[2014-04-21 01:06:00 -0400] whiteadam: frege: this article can show you how easy it is, sort of: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-04-21 01:06:50 -0400] frege: whiteadam: well if this investment will help me later to speed up my dev process then it's useful isn't it?
[2014-04-21 01:07:16 -0400] whiteadam: frege: only if it saves more time than you invest :)
[2014-04-21 01:07:46 -0400] cheeseplus: having a well maintained stack means less technical debt and easier iteration for improvement
[2014-04-21 01:08:25 -0400] frege: I just want to get 5 components running; python2.7, pip, nginx, uwsgi, postgres
[2014-04-21 01:08:31 -0400] cheeseplus: Ive had so much ethnical debt in my career that Im always about doing it the right way
[2014-04-21 01:08:36 -0400] cheeseplus: technical*
[2014-04-21 01:09:03 -0400] whiteadam: frege: the best part of chef is having it IDENTICAL every time, so there's no surprises
[2014-04-21 01:09:07 -0400] cheeseplus: there are definitely cookbooks for all of those
[2014-04-21 01:09:11 -0400] cheeseplus: components that is
[2014-04-21 01:09:20 -0400] cheeseplus: probably a day or two to test and get running
[2014-04-21 01:09:24 -0400] frege: yeah there must be
[2014-04-21 01:09:33 -0400] cheeseplus: especially if you just follow that blog series
[2014-04-21 01:09:42 -0400] frege: what's a quick guide for chef solo?
[2014-04-21 01:10:00 -0400] frege: I just want to get my servers up and running as fast as possible
[2014-04-21 01:10:13 -0400] frege: cheeseplus: which blog serries?
[2014-04-21 01:10:20 -0400] frege: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/ ?
[2014-04-21 01:10:26 -0400] cheeseplus: yes
[2014-04-21 01:10:45 -0400] whiteadam: frege: that site is pretty quick to get started, and he generally keeps it up to date
[2014-04-21 01:10:57 -0400] cheeseplus: ^^
[2014-04-21 01:11:02 -0400] frege: hmm
[2014-04-21 01:11:09 -0400] cheeseplus: its one of the best 101s out there
[2014-04-21 01:11:21 -0400] cheeseplus: there is also http://learnchef.com
[2014-04-21 01:12:01 -0400] frege: chef-solo correct?
[2014-04-21 01:12:13 -0400] whiteadam: yeah, it's chef-solo up until like iteration 5
[2014-04-21 01:12:29 -0400] cheeseplus: anything you learn about chef-solo is generally applicable just with a few caveats
[2014-04-21 01:13:13 -0400] cheeseplus: the documentation calls it out where appropriate but generally cookbooks wont be wildly different when used with chef-solo or chef-client
[2014-04-21 01:13:43 -0400] frege: what are these tools around it
[2014-04-21 01:13:45 -0400] frege: berkshelf
[2014-04-21 01:13:46 -0400] frege: knife
[2014-04-21 01:13:48 -0400] frege: etc.
[2014-04-21 01:13:54 -0400] frege: i don't wanna get lost there
[2014-04-21 01:14:10 -0400] frege: just want to keep things simple as possible
[2014-04-21 01:15:27 -0400] whiteadam: eh, there's a learning curve getting all it sorted. If you're just doing dev, Vagrant + vbox +chef-solo will give you an edge
[2014-04-21 01:15:43 -0400] whiteadam: berkshelf keeps your dependencies in order
[2014-04-21 01:15:58 -0400] whiteadam: without it, there's a bunch of manual crap you have to do
[2014-04-21 01:16:17 -0400] frege: I'm a programmer but i have no sysadmins in hand so I have to do this setup myself
[2014-04-21 01:16:41 -0400] frege: whiteadam: so it' worth it to use berkshelf?
[2014-04-21 01:16:51 -0400] frege: does it add more overhead for time?
[2014-04-21 01:17:17 -0400] whiteadam: frege: yeah, berkshelf is definitely worth it.
[2014-04-21 01:17:44 -0400] whiteadam: frege: You make a cookbook called like "fregeapp" and just specify python, nginx, etc and it does the rest... basically
[2014-04-21 01:18:36 -0400] frege: haaah!
[2014-04-21 01:18:37 -0400] frege: nice
[2014-04-21 01:18:47 -0400] frege: but I still need to pass my configuration right?
[2014-04-21 01:19:00 -0400] frege: whiteadam: is it like it creates templates and then I can just easily config them?
[2014-04-21 01:19:06 -0400] whiteadam: yeah, the fregeapp cookbook would be like a "wrapper" cookbook
[2014-04-21 01:19:41 -0400] whiteadam: frege: you would make the template, sort of.. or take the one someone has already made and just provide it the values... or let it provide itself the values
[2014-04-21 01:19:55 -0400] frege: hmm
[2014-04-21 01:20:34 -0400] whiteadam: once you've got the configs down, you just type "vagrant up"
[2014-04-21 01:20:41 -0400] whiteadam:  and boom you've got a dev machine ready to do
[2014-04-21 01:20:42 -0400] whiteadam: go*
[2014-04-21 01:20:53 -0400] whiteadam: less than a minute or so
[2014-04-21 01:21:01 -0400] frege: that would make my life way easier
[2014-04-21 01:21:02 -0400] cheeseplus: you can also use test kitchen to do that and then test it
[2014-04-21 01:21:15 -0400] cheeseplus: I dont manually build vms anymore
[2014-04-21 01:21:18 -0400] whiteadam: ^ yeah, more plugins!
[2014-04-21 01:21:25 -0400] cheeseplus: just write cookbooks and use test-kitchen
[2014-04-21 01:21:41 -0400] cheeseplus: unit test, integration tests, functional tests for much win
[2014-04-21 01:21:57 -0400] whiteadam: testing is win, I'm still working on it all.
[2014-04-21 01:22:03 -0400] whiteadam: real life is getting in my testing way
[2014-04-21 01:22:18 -0400] frege: but I got tons of other stuff to do for actual programming
[2014-04-21 01:22:35 -0400] cheeseplus: certainly but once youve got this its done and easy to improve
[2014-04-21 01:22:37 -0400] whiteadam: cheese, do you know if they changed the berks configure command to something else by chance?
[2014-04-21 01:22:40 -0400] frege: can't kill this one perfectly; just want to make the basics right
[2014-04-21 01:22:52 -0400] cheeseplus: just think of it like the rest of your code
[2014-04-21 01:22:55 -0400] cheeseplus: its just as important
[2014-04-21 01:23:18 -0400] cheeseplus: whiteadam: not sure, I havent touched in ages
[2014-04-21 01:23:39 -0400] whiteadam: cheeseplus: I'll probably just make one from scratch like a scientist
[2014-04-21 01:25:31 -0400] frege: I wish vagrant was written in python same for chef
[2014-04-21 01:25:49 -0400] whiteadam: scoff scoff scoff
[2014-04-21 01:25:59 -0400] whiteadam: I wish more were writtn in ruby, because I know more of it
[2014-04-21 01:26:01 -0400] whiteadam: :)
[2014-04-21 01:26:16 -0400] frege: hahaha same here I know python well
[2014-04-21 01:27:52 -0400] whiteadam: food time, later al
[2014-04-21 01:32:57 -0400] cheeseplus: frege: this is neat if youre of the python persuasion - https://github.com/coderanger/pychef
[2014-04-21 05:13:37 -0400] frege: chef is really messed up
[2014-04-21 05:13:53 -0400] frege: I'm getting tons of errors from installing chef plugins for vagrant
[2014-04-21 05:14:00 -0400] frege: to running a berks cookbook
[2014-04-21 05:18:43 -0400] frege: I'm giving up chef
[2014-04-21 05:18:50 -0400] frege: I think it's ugly and not well designed
[2014-04-21 05:18:56 -0400] frege: Ansible.
[2014-04-21 05:33:14 -0400] jidar: vagrant/berkshelf is undergoing a bit of a growing pain as they are changing versions from v2 -> v3
[2014-04-21 08:04:20 -0400] JamieH: Does anyone know if there is a version of chef compiled for windows where the "ERROR: Ohai::Exceptions::DependencyNotFound: Can not find a plugin for dependency os" is fixed?
[2014-04-21 08:07:40 -0400] JamieH: No worries. Patched it my self
[2014-04-21 10:04:01 -0400] mhenrixon: Any ideas why the following don't work when the chef-client runs not_if '[[ $(openssl version) =~ "1.0.1g" ]]'
[2014-04-21 10:04:44 -0400] mhenrixon: if I run the command directly on my server I get a 0 exit code which should mean true but it just keeps compiling and installing openssl from source
[2014-04-21 10:09:58 -0400] mhenrixon: If I put an if inside the command it works fine https://gist.github.com/mhenrixon/662836773ae51cb119ed
[2014-04-21 11:28:51 -0400] phutchin1: Anyone have any idea why on an AWS Opsworks node, Chef package resource looks just like its installing a package from a .deb source file but it doesnt' appear to be installed afterwards? Not quite sure how to run it in debug mode so I am unable to get any more details...
[2014-04-21 13:56:53 -0400] tejaycar: Having some trouble with this heartbleed fix.  We've upgraded to the latest chef-server release, run reconfigure and restart, and even restarted the machine itself.  Yet we still fail our scans on port 443.  Any ideas?
[2014-04-21 14:04:37 -0400] jbellone: @tejaycar Did you install the omnibus installation? Remember that openssl is included as part of that distributable. So even if you upgrade the system openssl that still needs to be upgraded.
[2014-04-21 14:05:43 -0400] tejaycar: Yes, we used the omnibus install.  We also updated our system openssl as well.
[2014-04-21 14:06:28 -0400] whiteadam: I notice that berks configure isn't a command anymore... Does anyone know how we generate or make the config.json now?
[2014-04-21 14:07:43 -0400] jbellone: @whiteadam you mean configure in ~/.berkshelf?
[2014-04-21 14:08:28 -0400] whiteadam: jbellone: yeah, used to you typed "berks configure" to generate the config.json in ~/.berkshelf
[2014-04-21 14:08:36 -0400] whiteadam: jbellone: but berks configure isn't a command now it seems
[2014-04-21 14:10:26 -0400] tejaycar: I just verified that my /opt/chef/embedded/bin/openssl is on 1.0.1g
[2014-04-21 14:10:37 -0400] tejaycar: so it shouldn't be having trouble.
[2014-04-21 14:10:42 -0400] holms: does anybody know about issue when chef-server picks an old dependency ? berkshelf owner says it's not berkshelf problem https://github.com/berkshelf/berkshelf/issues/1140
[2014-04-21 14:11:02 -0400] tejaycar: I also have a /opt/sensu/embedded/bin/openssl, which is still an older version.  That's not chef related is it?
[2014-04-21 14:11:38 -0400] jbellone: @tejaycar If you used *any* omnibus installations they all need to be updated.
[2014-04-21 14:11:51 -0400] jbellone: Each individually packages separate software.
[2014-04-21 14:12:21 -0400] jbellone: @whiteadam Yeah I see now. I can't find anything offhand. I thought `berks init` did it by default, or with a flag, but that doesn't seem to be the case as per docs.
[2014-04-21 14:12:43 -0400] tejaycar: jbellone, I'm not sure what you mean.  What other omnibus installations are in play here?
[2014-04-21 14:12:49 -0400] whiteadam: jbellone: yeah, I might just open a ticket with them and see what's up. I know it used to work.
[2014-04-21 14:13:16 -0400] holms: anyone responsible for chef-server ?
[2014-04-21 14:13:17 -0400] jbellone: tejaycar, /opt/sensu tells me that you install an omnibus packaged sensu?
[2014-04-21 14:13:29 -0400] jbellone: At least that's what my packages look like :)
[2014-04-21 14:14:00 -0400] tejaycar: ah, gotcha.  So even if it's not chef related, it could still be impacting my chef install?
[2014-04-21 14:14:15 -0400] jbellone: It would impact sensu.
[2014-04-21 14:14:43 -0400] jbellone: If the /opt/chef is 1.0.1g you're safe from a Chef perspective. It seems that sensu needs to be updated.
[2014-04-21 14:15:52 -0400] santi_: hey guys, trying to find the proper channel to submit a bug report on the open source version of Chef.  Finding it a little difficult to do via the opscode website. I'm not looking for support, but just wanted to submit so the community can start working on it.
[2014-04-21 14:15:54 -0400] whiteadam: jbellone: https://github.com/berkshelf/berkshelf/wiki/3.0-Config-file-changes
[2014-04-21 14:16:00 -0400] tejaycar: but would an issue in sensu cause my chef-server URL (on port 443) to be vulnerable?
[2014-04-21 14:16:05 -0400] whiteadam: jbellone: Title sounds right, but if you follow the link, you'll see :)
[2014-04-21 14:16:48 -0400] jbellone: tejaycar, I doubt it, but does sensu run an agent that listens on 443?
[2014-04-21 14:17:28 -0400] tejaycar: No, my chef-server Web UI is what's running on 443
[2014-04-21 14:18:00 -0400] gleam: chef-server won't use the openssl that's in your sensu omnibus package
[2014-04-21 14:18:05 -0400] gleam: if that's what you're asking
[2014-04-21 14:19:03 -0400] tejaycar: yea, that's what I thought.   Any idea on why my chef-server web ui would be failing the vulnerability check when my embedded openssl is 1.0.1g?
[2014-04-21 14:19:55 -0400] santi_: Found it, https://tickets.opscode.com/secure/Dashboard.jspa
[2014-04-21 14:20:12 -0400] gleam: none at all, you restarted it after installing the updated omnibus package?
[2014-04-21 14:22:30 -0400] tejaycar: Yea, I did a reconfigure and a restart. Then did a stop and restart when that didn't work.  Finally I rebooted the server completely.  Still no luck
[2014-04-21 14:24:58 -0400] breckognize: Hi, I recently signed up for enterprise chef. I have successfully created a client and can run "knife role list" from a (Windows) client box. However, when I run "knife client list" I receive the error: "You authenticated successfully... but you are not authorized for this action." However, I can't figure out how to assign permissions for listing client objects through the Chef Enterprise Manage GUI. Under "global permissions" clie
[2014-04-21 14:43:58 -0400] real_ate: hi all, i'm having some trouble with the new chef DK and i want to know if this is the right place to discuss it?
[2014-04-21 14:44:46 -0400] real_ate: i know that there are quite a few chef irc channels here now so i'm not sure where i should be
[2014-04-21 14:45:29 -0400] mattray: real_ate: this is probably the place, #chef-hacking if you want to dig into the internals
[2014-04-21 14:46:14 -0400] real_ate: cool thanks mattray, so essentially i've been trying to follow the berkshelf updates and i'm really excited about chef DK , so awesome!! but i'm stuck
[2014-04-21 14:46:28 -0400] mattray: real_ate: there's also #berkshelf
[2014-04-21 14:46:38 -0400] mattray: and #kitchenci :)
[2014-04-21 14:46:43 -0400] real_ate: :facepalm:
[2014-04-21 14:47:00 -0400] real_ate: essentially i would like to know where is the best place to file this bug : " Could not load the 'vagrant' driver from the load path. "
[2014-04-21 14:47:00 -0400] mattray: #berkshelf might be the most concentrated focus for chefdk/berkshelf
[2014-04-21 14:47:30 -0400] real_ate: well that ^^ happens when i'm using kitchen converge so maybe i should try there
[2014-04-21 14:47:36 -0400] mallu: good morning... is there an easy way to delete cookbook version from multiple environments?
[2014-04-21 14:47:42 -0400] real_ate: mattray: cool i'll try that first <3 thanks
[2014-04-21 14:47:46 -0400] mallu: or edit multiple environments?
[2014-04-21 14:48:22 -0400] mattray: mallu: knife cookbook delete VERSION
[2014-04-21 14:48:40 -0400] mallu: what we have is .. we have multiple environments pinned old version of a cookbooks
[2014-04-21 14:49:16 -0400] mallu: knife cookbook delete will delete the environment or cookbook version pinned in the invironment?
[2014-04-21 14:50:17 -0400] stormerider: knife cookbook delete will delete one version of the cookbook or all versions depending on what you respond to the prompt. it will not touch the environment.
[2014-04-21 14:50:32 -0400] mondo: does chef-solo try to load its runlist from a default json file or do you have specify a file name?
[2014-04-21 14:51:30 -0400] mallu: so what will happen if I delete the cookbook version that is pinned in the environment? will the environment complain ?
[2014-04-21 14:51:31 -0400] stormerider: mallu: it's for removing the cookbook from the chef server. if you want to clean up your pins, export the environments to JSON files, edit, and knife environment from file *.json
[2014-04-21 14:51:44 -0400] stormerider: yes, depsolving will fail
[2014-04-21 14:52:15 -0400] mallu: stormerider: thanks... I was hoping there is an easier way as we have quite a few environments
[2014-04-21 14:52:39 -0400] stormerider: vi'ing multiple json files is pretty easy, imo :)
[2014-04-21 14:53:28 -0400] mallu: well... we have around 150 of them :(
[2014-04-21 15:05:03 -0400] gondoi: anyone here have experience with chef-solo-search? i'm trying to emulate a search for a recipe and an environment
[2014-04-21 15:05:11 -0400] gondoi: for test-kitchen
[2014-04-21 15:05:31 -0400] rayrod2030: gondoi: are you able to use chef-zero provisioner instead?
[2014-04-21 15:05:38 -0400] gondoi: i see where I could add the recipe on the node, but not sure about the env
[2014-04-21 15:06:39 -0400] gondoi: rayrod2030: hmm probably
[2014-04-21 15:06:49 -0400] gondoi: how can I inject data into it to use for testing?
[2014-04-21 15:14:52 -0400] Gazzonyx: Not finding much on the Googles on this topic: for deploying recipes to existing servers, is it recommended to use gusteau or littlechef when using chef-solo instead of a chef server?
[2014-04-21 15:17:17 -0400] j^2: Gazzonyx: so you have a built box and you want to add to it via a recipe but arent sure if chef-client or solo is the way to go?
[2014-04-21 15:22:41 -0400] Gazzonyx: j^2: Well, we're stuck with chef-solo due to the security model (some things are difficult to reach if not directly on the VPN).  We're just figuring out whether littlechef would make our lives easier than gusteau.
[2014-04-21 15:23:31 -0400] j^2: ah, i dont know anything about littlechef or gusteau, i'd just write the recipe(s)/cookbook(s) and leverage chef-solo, or if i'm feeing sassy knife-solo
[2014-04-21 15:38:53 -0400] ddr_: hi all. can I use folders in templates directory and use "source 'dir1/temp.erb'" in recipe?
[2014-04-21 15:39:17 -0400] ddr_: what can i do if i have many templates for different environments>
[2014-04-21 15:45:17 -0400] eliklein: btm: you around?
[2014-04-21 15:51:02 -0400] bean__: good morning you beautiful people
[2014-04-21 15:59:50 -0400] pureluck: hey guys, got a question that's more curiosity than anything else
[2014-04-21 16:00:33 -0400] pureluck: how do you deal with date on servers in a different timezone? do you set them to the timezone they're geographically bound, or just use the timezone that YOU are geographically bound?
[2014-04-21 16:00:36 -0400] gondoi: rayrod2030: chef-zero is not getting populated with my cookbooks from my Berksfile
[2014-04-21 16:01:32 -0400] pureluck: e.g. if you're in NYC and have a server in LA, do you set the server's timezone for NYC or LA?
[2014-04-21 16:02:02 -0400] xmltok_: pureluck: UTC everywhere
[2014-04-21 16:03:17 -0400] pureluck: xmltok_: great answer, thanks
[2014-04-21 16:03:46 -0400] xmltok_: pureluck: its annoying at first but you'll get used to it, i have to deal with datacenters and teams all around the world so its the only realistic option
[2014-04-21 16:04:37 -0400] pureluck: xmltok_: i'm betting the initial annoyances are nothing compared to the frustration of reading log files accross several TZs
[2014-04-21 16:04:52 -0400] pureluck: so yeah, good stuff
[2014-04-21 16:08:36 -0400] gondoi: is there anything special I need to do to use chef_zero in test-kitchen?
[2014-04-21 16:09:06 -0400] gondoi: my cookbooks are not getting loaded, i'm getting a failed to resolve cookbook version errror
[2014-04-21 16:09:35 -0400] gondoi: chef_solo works, I switch that out with chef_zero and nothing but fail happens
[2014-04-21 16:10:23 -0400] gondoi: Could not satisfy version constraints for
[2014-04-21 16:15:23 -0400] jbellone: candy bars
[2014-04-21 16:15:23 -0400] jbellone: :D
[2014-04-21 16:33:13 -0400] st_iron: ohai chefs
[2014-04-21 16:34:29 -0400] maplebed: ddr_: Yes, you can use subdirs in your templates (and files) directory to organize your templates.
[2014-04-21 16:39:07 -0400] nobody18188181: is there documentation on programming chef? e.g. using the raw ruby classes?
[2014-04-21 16:58:37 -0400] ssd7: coderanger: Around?
[2014-04-21 16:58:43 -0400] EricL_: Does chef come with any inherent methods for determining if one semantic version is greater than antoher ?
[2014-04-21 16:59:10 -0400] c_t: presumably
[2014-04-21 16:59:11 -0400] tscanausa: EricL_: do you have an example?
[2014-04-21 16:59:19 -0400] c_t: you can get a list of sorted cookbook versions
[2014-04-21 16:59:36 -0400] c_t: also the constraint resolution parts
[2014-04-21 16:59:36 -0400] EricL_: tscanausa: if node[:app][:version] > '2.2.24'
[2014-04-21 17:00:01 -0400] EricL_: tscanausa: assuming node[:app][:version] is also a semantic version like 2.2.30
[2014-04-21 17:00:08 -0400] tscanausa: that is only good as good as the cookbook creator.
[2014-04-21 17:00:25 -0400] EricL_: tscanausa: In this case, I am the cookbook creator.
[2014-04-21 17:00:36 -0400] EricL_: But I don't want to include a semantic version checker int he helper methods.
[2014-04-21 17:00:44 -0400] gregf: if I send a post request through http_request is there a way I can get the returned value?
[2014-04-21 17:00:48 -0400] EricL_: Especially if chef comes with one out of the box that I can piggy back off of.
[2014-04-21 17:00:56 -0400] tscanausa: I dont think it does.
[2014-04-21 17:01:04 -0400] ssd7: EricL_: Gem::Version.new(node[:app][:version]) < Gem::Version.new('2.2.24')
[2014-04-21 17:01:12 -0400] ssd7: something like that should work
[2014-04-21 17:01:33 -0400] c_t: there's also lib/chef/version_constraint.rb
[2014-04-21 17:01:38 -0400] ssd7: well, if you use the correct comparsion operator :)
[2014-04-21 17:01:56 -0400] c_t: might be helpful, but I'm not sure if it's exposed
[2014-04-21 17:02:28 -0400] ssd7: c_t: Yeah, I /think/ we've been recommending that people use Gem::Version rather than the version_constraint library, but don't know the rundown of why
[2014-04-21 17:02:32 -0400] EricL_: ssd7: Thats' exactly the thing I was looking.
[2014-04-21 17:03:00 -0400] EricL_: ssd7: Thanks, let me give that a go.
[2014-04-21 17:03:09 -0400] c_t: ssd7: I didn't look hard enough to see if it's exposed to the world at large
[2014-04-21 17:04:51 -0400] EricL_: ssd7: Works in irb.  Thanks.
[2014-04-21 17:05:05 -0400] real_ate: has anyone else here tried the chefDK on mac?
[2014-04-21 17:05:27 -0400] ssd7: real_ate: Briefly, running into problems?
[2014-04-21 17:06:21 -0400] real_ate: ssd7: yea i'm trying to use "kitchen converge" to converge with vagrant and it's giving me grief
[2014-04-21 17:06:30 -0400] real_ate: "Could not load the 'vagrant' driver from the load path."
[2014-04-21 17:08:00 -0400] j^2: mattray: ping
[2014-04-21 17:08:13 -0400] ssd7: Hrm, hadn't gotten that far with it yet, but I just asked some people internally who might know more.
[2014-04-21 17:08:23 -0400] real_ate: i've tried everything i can re: installing the gems that it asks for but it really feels like it should be something included in the DK
[2014-04-21 17:10:05 -0400] ssd7: real_ate: When you are installing the gems, are you using the `chef gem` command?
[2014-04-21 17:10:31 -0400] real_ate: ssd7: eh no... i didn't even know it existed
[2014-04-21 17:10:51 -0400] ssd7: That ensures that the gem gets installed into chefdk's embedded ruby
[2014-04-21 17:11:19 -0400] real_ate: right... that's probably going to be pretty helpful
[2014-04-21 17:11:38 -0400] coderanger: ssd7: Yo
[2014-04-21 17:12:27 -0400] ssd7: coderanger: In your lightening talk you mentioned some problems with AWS IAM stuff and Ohai.  Can you give me the details?  Would love to either get it fixed or put out some info on it
[2014-04-21 17:12:44 -0400] real_ate: ssd7: so... yea when i installed the missing gem "kitchen-vagrant" it is giving me the same problem i came up with before: "/rubygems/version.rb:191:in `initialize': Malformed version number string virtualbox (ArgumentError)"
[2014-04-21 17:13:28 -0400] coderanger: ssd7: ohai stores all metadata as node attributes, node attributes are readable to all nodes in the system via search, this incudes the IAM role temporary keys which are supposed to be private to just that machine
[2014-04-21 17:13:35 -0400] real_ate: which seems to be this bug: https://github.com/mitchellh/vagrant/issues/3195 but i can't use their recomendations to fix this
[2014-04-21 17:14:07 -0400] coderanger: ssd7: This is also a problem with the mysql and postgres cookbooks, which both store passwords in attrs
[2014-04-21 17:14:52 -0400] ssd7: coderanger: Yup, I understand the general issue, I just missed the specific bit of info that caused the problem with IAM.  Thanks.
[2014-04-21 17:15:22 -0400] coderanger: ssd7: https://github.com/balanced-cookbooks/citadel/blob/master/libraries/safe_node.rb :)
[2014-04-21 17:15:34 -0400] someara: I'm currently fixing mysql btw
[2014-04-21 17:16:55 -0400] rayrod2030: anyone ever encounter the beam process going 100% plus on open source erchef?
[2014-04-21 17:17:10 -0400] coderanger: I'm pretty sure the only long-term fix for this is either "never store private info in attributes" (which won't work, people don't know any better) or fundamentally reworking search into a more fixed index model where not all attributes are indexed
[2014-04-21 17:17:35 -0400] coderanger: rayrod2030: Everyone :)
[2014-04-21 17:17:43 -0400] rayrod2030: I'm guessing it's this: http://lists.opscode.com/sympa/arc/chef/2013-08/msg00399.html
[2014-04-21 17:17:50 -0400] coderanger: rayrod2030: It means you have an invalid cookbook constraint/dependency set
[2014-04-21 17:17:57 -0400] coderanger: and the solver is failing to resolve
[2014-04-21 17:18:24 -0400] coderanger: rayrod2030: You can use https://gist.github.com/coderanger/9198932 to figure out which cookbooks cause it
[2014-04-21 17:21:13 -0400] jmreicha: Is there anyway to get a run_list to not timeout after 600s?
[2014-04-21 17:21:22 -0400] coderanger: jmreicha: time out?
[2014-04-21 17:21:50 -0400] jmreicha: One of the recipes I'm running in my run_list is taking too long and my chef run is dying after 10 mins (600s)
[2014-04-21 17:22:56 -0400] coderanger: jmreicha: Hmm, whats the actual error? Some resources like execute and deploy have subprocess timeouts
[2014-04-21 17:23:06 -0400] coderanger: but overall I don't think I know of a Chef-global one
[2014-04-21 17:23:11 -0400] jmreicha: @coderanger: just a sec
[2014-04-21 17:23:25 -0400] ssd7: jmreicha: By dying, do you mean you are getting 403s when trying to download files because your signed links are timing out?
[2014-04-21 17:23:52 -0400] jmreicha: STDERR:
[2014-04-21 17:23:54 -0400] jmreicha: ---- End output of apt-get -q -y install python-dev=2.7.5-5ubuntu1 ----
[2014-04-21 17:23:56 -0400] jmreicha: Ran apt-get -q -y install python-dev=2.7.5-5ubuntu1 returned
[2014-04-21 17:23:58 -0400] jmreicha: [2014-04-21T17:00:49+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-04-21 17:24:00 -0400] jmreicha: Chef never successfully completed! Any errors should be visible in the
[2014-04-21 17:24:02 -0400] jmreicha: output above. Please fix your recipes so that they properly complete.
[2014-04-21 17:24:04 -0400] jmreicha: jmreicha@prod-desktop:~/chef/chef-repo$
[2014-04-21 17:24:41 -0400] c_t: 1. use gist/pastebin/etc.
[2014-04-21 17:24:47 -0400] jmreicha: Above, it says
[2014-04-21 17:24:51 -0400] c_t: 2. Try running apt-get update
[2014-04-21 17:25:06 -0400] jmreicha: [2014-04-21T17:00:48+00:00] ERROR: package[python-dev] (python::package line 41) had an error: Mixlib::ShellOut::CommandTimeout: Command timed out aft
[2014-04-21 17:25:09 -0400] jmreicha: er 600s:
[2014-04-21 17:25:11 -0400] jmreicha: Command execeded allowed execution time, process terminated
[2014-04-21 17:25:20 -0400] jmreicha: OK, I will use pastebin, sorry about that
[2014-04-21 17:25:32 -0400] coderanger: jmreicha: Right, so execute and friends have a "timeout" option you can pass
[2014-04-21 17:25:35 -0400] jmreicha: c_t: Already ran an apt-get update
[2014-04-21 17:25:47 -0400] coderanger: jmreicha: Though I can't imagine while a simple install would take that long
[2014-04-21 17:25:58 -0400] jmreicha: My internet sucks :(
[2014-04-21 17:26:00 -0400] c_t: what happens if you run it on the command line?
[2014-04-21 17:26:11 -0400] c_t: looks like a problem with apt-get rather than chef itself
[2014-04-21 17:26:27 -0400] coderanger: jmreicha: Ahh, you might want to investigate setting up a local apt cache, there is a recipe in the apt cookbook to help with that :)
[2014-04-21 17:26:42 -0400] jmreicha: @coderange: So I can just go in and change the timeout on the execute in my cookbook?
[2014-04-21 17:26:46 -0400] jmreicha: I'll go take a look
[2014-04-21 17:27:09 -0400] rayrod2030: coderanger: saved my proverbial bacon yet again. :)
[2014-04-21 17:27:22 -0400] coderanger: jmreicha: Yep
[2014-04-21 17:27:39 -0400] coderanger: jmreicha: Though if you are using a package resource, it doesn't expose that
[2014-04-21 17:28:53 -0400] real_ate: ssd7: i sorted out my issue in the end... the "`initialize': Malformed version number string virtualbox" was solved by deleting my ~/.vagrant.d folder
[2014-04-21 17:29:36 -0400] rayrod2030: Tip your friendly chef: https://www.gittip.com/coderanger
[2014-04-21 17:29:42 -0400] rayrod2030: :)
[2014-04-21 17:30:01 -0400] jmreicha: @coderange: hm, yeah I am running the python cookbook from the opscode site when it gets that timeout
[2014-04-21 17:30:28 -0400] jmreicha: So maybe the apt option will be a better/easier workaround
[2014-04-21 17:31:59 -0400] coderanger: jmreicha: yeah, especially if you install a bunch of stuff, a cache will help a lot
[2014-04-21 17:32:36 -0400] real_ate: but my original issue, with the missing kitchen-vagrant, i still think that should be in the chefDK
[2014-04-21 17:34:26 -0400] jmreicha: @codranger: great thanks!
[2014-04-21 17:42:27 -0400] mattray: j^2: pong
[2014-04-21 17:42:31 -0400] j^2: hey
[2014-04-21 17:42:40 -0400] j^2: did you see my tweet? :)
[2014-04-21 17:43:05 -0400] j^2: we'd like to leverage both the networks branch and that PR i have out standing
[2014-04-21 17:43:07 -0400] mattray: j^2: yeah, I'm working on knife-openstack this week, that's on my list
[2014-04-21 17:43:12 -0400] j^2: :)
[2014-04-21 17:43:28 -0400] mattray: KNIFE-368, KNIFE-423, KNIFE-428, KNIFE-444, KNIFE-467
[2014-04-21 17:43:37 -0400] mattray: and looking through PRs
[2014-04-21 17:43:37 -0400] j^2: anything i can help with? my company is extremely monitvated to get this done
[2014-04-21 17:44:11 -0400] j^2: nice!
[2014-04-21 17:52:37 -0400] mattray: I should have a knife-openstack and a knife-hp this week
[2014-04-21 17:53:07 -0400] j^2: perfect thanks mattray!
[2014-04-21 17:53:34 -0400] alexbst: <B Hugops
[2014-04-21 17:56:03 -0400] bxraabe: is there a chef-metal specific channel?
[2014-04-21 18:04:38 -0400] surge_: Do I need to regenerate chef-validator because of heartbleed?
[2014-04-21 18:04:58 -0400] rayrod2030: recommeded way to format filesystems and mount them using a cookbook?
[2014-04-21 18:05:07 -0400] surge_: And how would I do so, cant seem to find the original tutorial on how to do that its been over a year since I had to do that haha
[2014-04-21 18:08:27 -0400] nobody18188181: how can i include the chef library in a ruby script; not recipe?
[2014-04-21 18:09:58 -0400] mattray: bxraabe: jkeiser said he lurks and watches for chef-metal
[2014-04-21 18:10:15 -0400] jkeiser: Most of the time :)  I can't get my IRC client to stay on forever though
[2014-04-21 18:10:20 -0400] jkeiser: IRC is such a non-optimal medium
[2014-04-21 18:17:03 -0400] jeffcara: Question regarding use of Chefspec
[2014-04-21 18:17:34 -0400] jeffcara: I downloaded the Chef-dk, and wrote what i thought was a viable chefspec test, but I keep getting an errror when trying to run rspec
[2014-04-21 18:18:04 -0400] jeffcara: here is the gist of the output. Is this a gem install issue, or something else? Any help would be appreciated .
[2014-04-21 18:18:06 -0400] jeffcara: https://gist.github.com/jcarapet/11151328
[2014-04-21 18:19:18 -0400] xmltok_: what method do you guys use to distribute the private key for encrypted databags?
[2014-04-21 18:19:39 -0400] surge_: xmitok_ Chef bootstrap normally.
[2014-04-21 18:20:19 -0400] doomviking: me too
[2014-04-21 18:20:58 -0400] xmltok_: ah ok, i was going to use cloud-init to build my nodes with chef, but i guess i will have cloud-init reach out to an admin node to run knife bootstrap
[2014-04-21 18:21:24 -0400] jtimberman: xmltok_: we use chef-vault for encrypted data bags
[2014-04-21 18:23:01 -0400] xmltok_: that looks interesting
[2014-04-21 18:31:26 -0400] alexbst: ho spheromak :)
[2014-04-21 18:34:28 -0400] spheromak: alexbst: hiyo, moved my znc server over to DO :)
[2014-04-21 18:34:46 -0400] spheromak: ah yea that comment on the issue ?
[2014-04-21 18:35:20 -0400] spheromak: yea the original filesystem was pre library abstraction. I think you want the filesystem library and then some example implementation with a wrapper
[2014-04-21 18:35:27 -0400] spheromak: thats how i see it at least.
[2014-04-21 18:35:43 -0400] alexbst: yeah. I'm thinking of a sane compromise
[2014-04-21 18:36:15 -0400] spheromak: you can do the imple in the same cook, but then you want a way to load it without pulling in your options on how to implement ;)
[2014-04-21 18:36:18 -0400] alexbst: default checks for a filesystem key and includes attributes.rb/key.rb but otherwise does nothing.
[2014-04-21 18:36:38 -0400] alexbst: s/and/ and if it exists/
[2014-04-21 18:36:54 -0400] spheromak: sure long as it's documented.  I like to not have my defaults do anything when i have the mixed metaphor cookbook, but thats personal taste i guess
[2014-04-21 18:37:06 -0400] spheromak: also what if i want to use that namespace for something else
[2014-04-21 18:37:16 -0400] spheromak: you are forcing people into your worldview
[2014-04-21 18:37:21 -0400] phutchin1: Anyone know if we can easily install multiple packages at once with the apt package resource
[2014-04-21 18:37:29 -0400] alexbst: might grab someone to get a third chef-official opinion.
[2014-04-21 18:37:34 -0400] phutchin1: i.e such that apt doesn't complain about dependencies
[2014-04-21 18:37:48 -0400] alexbst: phutchin1 - you can feed lists quite easily.
[2014-04-21 18:37:53 -0400] spheromak: phutchin1:  %w{package1 package2}.each do |p|  package  p  end
[2014-04-21 18:38:00 -0400] alexbst: like that ^^ :)
[2014-04-21 18:38:27 -0400] spheromak: phutchin1: apt should be not complaining about deps
[2014-04-21 18:38:27 -0400] phutchin1: no all at the same time
[2014-04-21 18:38:29 -0400] phutchin1: not one after another :)
[2014-04-21 18:38:35 -0400] spheromak: are you doing some  .deb
[2014-04-21 18:38:39 -0400] spheromak: install directly ?
[2014-04-21 18:38:40 -0400] phutchin1: yeah i was...
[2014-04-21 18:38:42 -0400] phutchin1: that was the issue
[2014-04-21 18:38:47 -0400] mondo: phutchin1: you'll have to feed them directly if you need to install multiple packages at the same time
[2014-04-21 18:38:49 -0400] phutchin1: i've set up my own repo now
[2014-04-21 18:38:51 -0400] spheromak: if you have multiple package you manage you should setup a repo
[2014-04-21 18:38:58 -0400] phutchin1: ^  :)
[2014-04-21 18:39:01 -0400] spheromak: :)
[2014-04-21 18:39:09 -0400] phutchin1: yeah i landed on that as it wsas not so fun
[2014-04-21 18:39:10 -0400] spheromak: let apt/dselect do what it does ;)
[2014-04-21 18:39:24 -0400] phutchin1: cool just making sure there wasn't an easier way before i continue forward
[2014-04-21 18:40:05 -0400] spheromak: there was some new hosted repo service for yum/apt/gems
[2014-04-21 18:40:23 -0400] alexbst: on a .io domain - I forget what it was though.
[2014-04-21 18:40:46 -0400] alexbst: https://pkgr.io/ mebbe ?
[2014-04-21 18:40:49 -0400] spheromak: alexbst: yea me to :D
[2014-04-21 18:41:00 -0400] jespada: Hi guys, any gist or hints on a multi environment knife config file?
[2014-04-21 18:41:06 -0400] spheromak: alexbst: that wasn't it
[2014-04-21 18:41:08 -0400] darron_____: https://packagecloud.io/
[2014-04-21 18:41:14 -0400] spheromak: darron_____: thats it
[2014-04-21 18:41:23 -0400] spheromak: jespada:  theres chefvm for managing multiple servers
[2014-04-21 18:41:27 -0400] phutchin1: cool
[2014-04-21 18:41:39 -0400] spheromak: jespada: what do you mean multi environment knife config ?
[2014-04-21 18:43:05 -0400] jespada: spheromak, ah neat..chefvm, thats kinda what i wanted, I was trying to achieve the same with knife.rb
[2014-04-21 18:43:15 -0400] jespada: spheromak, something like this: https://gist.github.com/kevinkarwaski/1860681
[2014-04-21 18:44:06 -0400] spheromak: jespada: yea thats a buncha complexity IMO  i used to manage a link to various .chef dirs with some bash aliases, now i have > 20 environments from consulting and stuff.
[2014-04-21 18:44:10 -0400] spheromak: so chefvm
[2014-04-21 18:44:28 -0400] spheromak: also can move your configs into Dropbox/google and symlink.
[2014-04-21 18:44:52 -0400] spheromak: jespada: i like the aproach of looking at cwd for a hint
[2014-04-21 18:44:58 -0400] spheromak: you could hack something like that in chefvm
[2014-04-21 18:45:12 -0400] spheromak: another option would be to add .chef/ to those dirs, and gitignore them
[2014-04-21 18:45:37 -0400] spheromak: assuming you would chef from the 'repo' dir
[2014-04-21 18:45:54 -0400] jespada: spheromak, I guess there many ways of doing it, been away from the community for a while and was asking to see if there is an upstream way of doing it
[2014-04-21 18:46:08 -0400] spheromak: jespada: nothing blessed ;)
[2014-04-21 18:46:58 -0400] spheromak: so whatever works best for your workflow.  Chefvm for me cause many companies and many different cookbooks that work with them all. I don't use a 'fat' repo. and i want to have my workstation env synched between a desktop and laptop
[2014-04-21 18:48:51 -0400] jespada: shennyg, thanks :) will paly with chefvm , I don't need more than 2 or 3 different "orgs" don't want to use a fat repo either, will go with the berkshelf way
[2014-04-21 18:49:04 -0400] jespada: spheromak, *
[2014-04-21 18:49:15 -0400] jespada: sorry shennyg typo :)
[2014-04-21 18:50:35 -0400] geggam: u put passwords in your repo in dropbox too ?
[2014-04-21 18:50:39 -0400] phutchin1: not sure if this is the same issue but I've run into issues where i needed to "bake" different cookbook folders that were a repo in itself for chef solo (opsworks) and other reasons
[2014-04-21 18:50:49 -0400] spheromak: geggam: no passwords
[2014-04-21 18:51:05 -0400] phutchin1: so I wrote a script that uses a Berksfile config to manage a directory of cookbooks (and deletes the .git for each so it can be pushed as its own repo)
[2014-04-21 18:57:12 -0400] Urocyon: hrmmm, wanted to switch to using the community nginx cookbook, but can't figure out how to customize the default access_log format.   :-(
[2014-04-21 19:08:54 -0400] alexbst: spheromak - now the brackets are correct, I think the default recipe is OK
[2014-04-21 19:09:04 -0400] alexbst: it does nothing if there is no filesystem key
[2014-04-21 19:09:19 -0400] alexbst: (but includes the lvm and xfs cookbooks)
[2014-04-21 19:14:47 -0400] whiteadam: after bootstrapping my ec2 node with the proper ssh key, when I try to log in, it tells me invalid key... any ideas?
[2014-04-21 19:14:54 -0400] whiteadam: I successfully boostrapped the node with this key
[2014-04-21 19:15:19 -0400] whiteadam: derp, figured it out
[2014-04-21 19:15:29 -0400] whiteadam: underscore instead of dash
[2014-04-21 19:22:15 -0400] phutchin1: Anyone use Berkshelf on opsworks?
[2014-04-21 19:22:33 -0400] phutchin1: can't seem to find any documentation on their useage of it and my Berksfile that works fine on my machine doesn't work on opsworks...
[2014-04-21 19:28:33 -0400] icarus: hello all
[2014-04-21 19:29:02 -0400] icarus: I keep getting a chef-solo error
[2014-04-21 19:29:11 -0400] icarus: I am installing cookbooks with berkshelf
[2014-04-21 19:29:12 -0400] icarus: Generated at 2014-04-21 19:27:26 +0000
[2014-04-21 19:29:12 -0400] icarus: Chef::Exceptions::CookbookNotFound: Cookbook apache2 not found. If you're loading apache2 from another cookbook, make sure you configure the dependency in your metadata
[2014-04-21 19:29:15 -0400] icarus: /opt/chefdk/embedded/apps/chef/lib/chef/cookbook/cookbook_collection.rb:38:in `block in initialize'
[2014-04-21 19:29:30 -0400] icarus: but chef-solo doesn't seem to want to read the cookbooks directory with versions attached
[2014-04-21 19:29:50 -0400] icarus: Is there a way to tell chef-solo to except cookbooks names with version numbers attached as well
[2014-04-21 19:30:36 -0400] phutchin1: accept?
[2014-04-21 19:30:49 -0400] icarus: This is the solo.rb file:
[2014-04-21 19:30:50 -0400] icarus: root = File.absolute_path(File.dirname(__FILE__))
[2014-04-21 19:30:50 -0400] icarus: file_cache_path root
[2014-04-21 19:30:51 -0400] icarus: cookbook_path root + '/cookbooks'
[2014-04-21 19:30:53 -0400] icarus: pretty simple
[2014-04-21 19:31:21 -0400] icarus: # ls cookbooks/|grep apache2
[2014-04-21 19:31:21 -0400] icarus: apache2-1.10.2
[2014-04-21 19:31:43 -0400] icarus: if i change the apache2-1.10.2 folder to apache2, chef-solo will accept the cookbook without the above error
[2014-04-21 19:31:49 -0400] ignatz: I had to add the chef_repo_path explicitly in knife.rb after I installed chef-dk, otherwise the essentials stuff like 'knife download' bombed. fyi
[2014-04-21 19:31:51 -0400] icarus: but this is not ideal
[2014-04-21 19:32:16 -0400] jkeiser: ignatz: do you have a cookbook_path set?
[2014-04-21 19:32:46 -0400] jkeiser: ignatz: chef-client is supposed to infer chef_repo_path = cookbook_path/..
[2014-04-21 19:32:52 -0400] ignatz: no, but the chef-repo-path sets all of those below its root
[2014-04-21 19:33:02 -0400] ignatz: er, underscores
[2014-04-21 19:33:14 -0400] ignatz: so I can do knife download roles, knife download data bag bla bla
[2014-04-21 19:33:32 -0400] jkeiser: ignatz: yep, cookbook_path was the one exception: if you specify that, chef_repo_path is inferred from it, and all the other paths from there
[2014-04-21 19:33:41 -0400] ignatz: ah okay, thanks, didn't know that
[2014-04-21 19:33:47 -0400] jkeiser: ignatz: if you specify either cookbook_path or chef_repo_path, everything else will work
[2014-04-21 19:33:59 -0400] jkeiser: if you specify nothing at all, chef-client -z will try really hard to figure out where your stuff is
[2014-04-21 19:34:06 -0400] jkeiser: or knife download -z
[2014-04-21 19:34:22 -0400] ignatz: cookbook path was set...
[2014-04-21 19:34:43 -0400] ignatz: but to a subdirectory of my homedir only
[2014-04-21 19:34:49 -0400] jkeiser: ignatz: what was it set to?  What was the error message you got?  I am curious.  I severely dislike errors that happen as soon as you download things :(
[2014-04-21 19:34:51 -0400] ignatz: probably due to earlier config
[2014-04-21 19:35:01 -0400] ignatz: so I was in another subdir and it bombed, that was it
[2014-04-21 19:35:14 -0400] ignatz: cookbook_path            ["#{ENV['HOME']}/chef/cookbooks"
[2014-04-21 19:35:23 -0400] ignatz: whereas I was in $HOME/github/chef
[2014-04-21 19:35:31 -0400] ignatz: thanks, now I know why
[2014-04-21 19:35:40 -0400] jkeiser: ignatz: interesting.  where was your knife.rb located?
[2014-04-21 19:35:53 -0400] ignatz: in .chef
[2014-04-21 19:36:00 -0400] jkeiser: HOME/.chef?
[2014-04-21 19:36:17 -0400] ignatz: yes, relative to the chef repo root
[2014-04-21 19:36:37 -0400] jkeiser: ignatz: so $HOME/chef/.chef/knife.rb?
[2014-04-21 19:36:40 -0400] ignatz: it had previously been in $HOME/chef/.chef
[2014-04-21 19:36:51 -0400] ignatz: I later moved the dir to $HOME/github/chef
[2014-04-21 19:36:58 -0400] ignatz: so then it blew up
[2014-04-21 19:38:09 -0400] ignatz: My guess is that I had put a convenience symlink in or something and therefore hadn't noticed the problem for a while.
[2014-04-21 19:38:36 -0400] jkeiser: ignatz: aha!  ok.  FYI what we usually do is set repo path or cookbook path relative to the .chef/knife.rb.  Like if your knife.rb is always in REPO_PATH/.chef/knife.rb, you can say chef_repo_path File.expand_path("../..", __FILE__)
[2014-04-21 19:38:50 -0400] ignatz: yeah
[2014-04-21 19:38:52 -0400] jkeiser: That way you can always copy your knife.rb around
[2014-04-21 19:39:00 -0400] jkeiser: cool.  Mystery solved, standing down, thanks :)
[2014-04-21 19:39:25 -0400] ignatz: thanks :) I no longer live in a world of insane mystery.
[2014-04-21 19:39:32 -0400] ignatz: well, for other reasons maybe
[2014-04-21 19:39:48 -0400] icarus: It might be possible for me to tell berkself to download the cookbooks without the inclusion of the version into the folder names
[2014-04-21 19:40:02 -0400] icarus: its a disconnect between how chef-client and chef-solo read the cookbooks folder
[2014-04-21 19:41:10 -0400] ignatz: yeah, I changed that setting and took out my repo line and it all works now. derp.
[2014-04-21 19:53:39 -0400] breckognize: Hi, is this the appropriate place to ask an enterprise chef support question?
[2014-04-21 19:55:33 -0400] troyready: breckognize, generally I see those kinds of requests directed to Chef Inc support. Unless its an issue that impacts all Chef software equally
[2014-04-21 19:56:07 -0400] breckognize: Thank you
[2014-04-21 20:06:04 -0400] Scrivener: Posted in #learnchef, but maybe could get a better/quicker answer here. I'm trying to run a shell command in chef (pkill -f 'stuff-to-search'), and chef exits with an error, complaining " Expected process to exit with [0], but received '' "
[2014-04-21 20:06:29 -0400] Scrivener: I have tried to force an exit status with "; exit 0" and "|| true" appended to the command, but it doesn't seem to matter.
[2014-04-21 20:06:38 -0400] NukePuppy: if you run the command in CLI
[2014-04-21 20:06:38 -0400] Scrivener: How can I make chef ignore the exit status of this command?
[2014-04-21 20:06:41 -0400] NukePuppy: and do $?
[2014-04-21 20:06:44 -0400] NukePuppy: what does it return
[2014-04-21 20:06:49 -0400] Scrivener: NukePuppy, I will let you know in a moment
[2014-04-21 20:07:25 -0400] Scrivener: NukePuppy, are you wanting me to 'echo $?'
[2014-04-21 20:07:26 -0400] NukePuppy: though what you're doing sounds kinda dangerous to have chef do
[2014-04-21 20:07:28 -0400] NukePuppy: what is it?
[2014-04-21 20:07:30 -0400] NukePuppy: no
[2014-04-21 20:07:31 -0400] NukePuppy: just $?
[2014-04-21 20:07:40 -0400] Scrivener: $ $?
[2014-04-21 20:07:40 -0400] Scrivener: bash: 1: command not found
[2014-04-21 20:08:00 -0400] NukePuppy: the "1" means your command didnt return 0   so your command is in fact failing
[2014-04-21 20:08:10 -0400] NukePuppy: so you literally just ran pkill -f 'something' ?
[2014-04-21 20:08:19 -0400] Scrivener: NukePuppy, and that's fine. Basically kills a particular process I'm defining "if it exists"
[2014-04-21 20:08:22 -0400] NukePuppy: can you tell me waht you're trying to do as a whole
[2014-04-21 20:08:28 -0400] Scrivener: I want to kill a process if it exists.
[2014-04-21 20:08:40 -0400] NukePuppy: because bash and execute are not that bright
[2014-04-21 20:08:46 -0400] NukePuppy: you'll need to only if or not if it
[2014-04-21 20:08:48 -0400] Scrivener: When I run that command at the CLI it exits without any errors if the process doesn't exist.
[2014-04-21 20:08:58 -0400] NukePuppy: well apparently it returns 1 ;p
[2014-04-21 20:09:04 -0400] Scrivener: Which is fine.
[2014-04-21 20:09:05 -0400] NukePuppy: which is not exit 0
[2014-04-21 20:09:06 -0400] Scrivener: I want that ignored.
[2014-04-21 20:09:11 -0400] NukePuppy: well no chef doesn't know that ;(
[2014-04-21 20:09:15 -0400] NukePuppy: one second
[2014-04-21 20:09:27 -0400] Scrivener: From reading up on it, I should be able to append || true or ; exit 0
[2014-04-21 20:09:32 -0400] Scrivener: To force a status
[2014-04-21 20:09:37 -0400] Scrivener: :-/ But those aren't working either.
[2014-04-21 20:09:39 -0400] NukePuppy: it wont do that
[2014-04-21 20:09:58 -0400] Scrivener: If I run it with || true appended and do $? I get
[2014-04-21 20:10:02 -0400] Scrivener: $ $?
[2014-04-21 20:10:02 -0400] Scrivener: bash: 0: command not found
[2014-04-21 20:10:09 -0400] NukePuppy: you need your bash  / execute block to have an only_if
[2014-04-21 20:15:28 -0400] Scrivener: NukePuppy, alright, I am barely familiar with any of this, so forgive my shortcomings -- I'm trying to write a simple task using an AWS Opsworks deploy hook. It's simply a list of "run" commands right now. What would be the correct way to use only_if in this context?
[2014-04-21 20:15:39 -0400] Scrivener: Currently it's just a file with a couple lines of bash instructions
[2014-04-21 20:16:08 -0400] Scrivener: This isn't part of an actual chef recipe
[2014-04-21 20:18:35 -0400] zts: Scrivener: if you want to treat a different (or additional) exit code as success, see the "returns" parameter for the execute resource
[2014-04-21 20:21:20 -0400] bricker: So does the database cookbook not support setting up master/slave replication? It says there's a slave recipe but then it says "TODO" under it, kind of confusing
[2014-04-21 20:24:34 -0400] yes456: i am new to chef.  I have one use case. can i update 'foo' node after executing recipe on 'bar' node. If yes how ?
[2014-04-21 20:29:05 -0400] scottsuch: anyone here from chef want to speak to the proper way to uninstall the chef-dk?
[2014-04-21 20:34:12 -0400] coderanger: scottsuch: Its an omnibus package, just delete the folder
[2014-04-21 20:34:40 -0400] coderanger: scottsuch: If you are on OS X at least, MSIs, debs, and RPMs all have their own uninstall system
[2014-04-21 20:36:32 -0400] scottsuch: thanks coderanger
[2014-04-21 20:37:11 -0400] scottsuch: the reason I'm asking is re: https://github.com/phinze/homebrew-cask/pull/3899
[2014-04-21 20:37:19 -0400] scottsuch: in case you were wondering =)
[2014-04-21 20:38:02 -0400] coderanger: scottsuch: You should email the company, I bet they can post simple tarball builds for homebrew
[2014-04-21 20:38:12 -0400] coderanger: scottsuch: Would probably be much easier to integrate with :)
[2014-04-21 20:38:46 -0400] scottsuch: The install works great, it's the uninstall that i want to get right.
[2014-04-21 20:38:56 -0400] scottsuch: again, thanks
[2014-04-21 20:42:21 -0400] jidar: is chefdk going to be where most of the development effort is spent?
[2014-04-21 20:42:30 -0400] jidar: seems like it would make sense
[2014-04-21 20:42:45 -0400] jidar: or is chefdk just going to focus on getting the packaging part worked out?
[2014-04-21 20:45:59 -0400] troyready: Someone please correct me if I'm wrong, but I'd imagine that things will continue as they are for the different components of Chef
[2014-04-21 20:47:53 -0400] troyready: 'Chef' as it is encompasses a bunch of different things at its core (omnibus, ohai) and in the larger ecosystem (i.e. berkshelf). Today you can kinda follow the established path (e.g., starting out you're pretty much going to be universally directed toward berkshelf now), but all of the individual components are still available
[2014-04-21 20:48:53 -0400] jidar: hmm, I wonder if you don't mind if its worth just managing all of the packages in dk yourself
[2014-04-21 20:49:02 -0400] jidar: like I'm running berkshelf 3.1.1
[2014-04-21 20:50:04 -0400] troyready: Good question -- I definitely haven't answered that for myself yet. (though it personally doesn't apply too much since I've been using Chef for awhile and am somewhat locked into another workflow -- but it's interesting to think about it starting from scratch)
[2014-04-21 20:51:57 -0400] jidar: troyready: I'm in the same boat, but never really used foodcritic/test-kitchen
[2014-04-21 20:52:13 -0400] jidar: wondering if its worth my time to get those going in my current workflow or migrate to DK
[2014-04-21 20:53:52 -0400] tscanausa: is there a way to enable multiverse for ubuntu through chef?
[2014-04-21 20:56:11 -0400] troyready: tscanausa, I think you'd want to look at lwrps in https://github.com/opscode-cookbooks/apt
[2014-04-21 20:57:27 -0400] tscanausa: troyready: I use that already for other repos, I just didnt want to have a specifc one for every version of ubuntu I have
[2014-04-21 20:58:27 -0400] troyready: Sorry, don't know of anything like 'enable_multiverse: true" :(
[2014-04-21 21:00:17 -0400] tscanausa: thanks troyready
[2014-04-21 21:53:11 -0400] loki_97123: hello chefiristas'
[2014-04-21 21:53:14 -0400] loki_97123: :)
[2014-04-21 21:53:39 -0400] loki_97123: what is the best way to provision and control objects out in the amazon cloud?
[2014-04-21 21:53:43 -0400] loki_97123: knife ec2
[2014-04-21 21:53:47 -0400] loki_97123: cloud formation
[2014-04-21 21:53:52 -0400] loki_97123: home grown?
[2014-04-21 21:54:20 -0400] loki_97123: <crickets/>
[2014-04-21 21:55:08 -0400] loki_97123: also
[2014-04-21 21:55:34 -0400] loki_97123: what is best practice on setting defaults in a resource of an lwrp.
[2014-04-21 21:55:44 -0400] loki_97123: i have a dev wiring up non-nil things
[2014-04-21 21:56:20 -0400] loki_97123: even going so far as to declare a default in the attributes and then assigning that node[:foo][:bar] as the default in the resource of the provider
[2014-04-21 21:56:53 -0400] loki_97123: this process seems to be creating ... interesting results when trying to do a node set in a wrapper recipe
[2014-04-21 22:38:52 -0400] jkeiser: loki_97123: first question re using amazon cloud: there is an aws cookbook to provision stuff, you can see some of the resources at https://github.com/opscode-cookbooks/aws/tree/master/resources
[2014-04-21 22:39:29 -0400] jkeiser: loki_97123: and knife-ec2 is the current best practice for creating servers.  You might want to look into chef-metal, though, which is alpha but an up and coming way to create machines
[2014-04-21 22:41:04 -0400] jkeiser: loki_97123: this is a decent overview of chef-metal: http://www.getchef.com/blog/2014/03/04/chef-metal-0-2-release/
[2014-04-21 22:42:26 -0400] jkeiser: loki_97123: re your second question, are you asking about best practices for resource default values, or are you asking how to communicate resource attributes via node or cookbook attributes?
[2014-04-21 22:43:19 -0400] jkeiser: loki_97123: the answer I want to give is use "attribute :attribute_name, :default => defaultvalue
[2014-04-21 22:43:28 -0400] jkeiser: But it could be I misunderstand your problem
[2014-04-21 22:57:34 -0400] loki_97123: sorry jkeiser got pulled to a meeting
[2014-04-21 22:58:49 -0400] jkeiser: The first rule of Meeting Club is we don't go to Meeting Club.
[2014-04-21 22:58:57 -0400] jkeiser: So, um, yeah, it's not really a very useful club
[2014-04-21 23:18:53 -0400] billy_: hello, i have a weird question.
[2014-04-21 23:19:08 -0400] billy_: how do you delete the available recipes in hosted chef
[2014-04-21 23:19:09 -0400] billy_: ?
[2014-04-21 23:20:27 -0400] coderanger: billy_: knife cookbook delete
[2014-04-21 23:29:32 -0400] billy_: thanks @coderanger i thought it only deleted it from the workstation not the server.  thanks!!!
[2014-04-21 23:31:25 -0400] loki_97123: ok, so talking about Meeting Club ... we got jkeiser and coderanger here
[2014-04-21 23:31:45 -0400] loki_97123: coderanger, ... knife ec2, chef metal, ruby fog
[2014-04-21 23:31:51 -0400] loki_97123: ???
[2014-04-21 23:32:01 -0400] jkeiser: knife ec2 and chef metal both use ruby fog underneath
[2014-04-21 23:32:19 -0400] jkeiser: knife ec2 is what you should use if you want to create ec2 instances one-off, or if you don't want to use an alpha product (chef-metal)
[2014-04-21 23:32:50 -0400] loki_97123: yes, read a statement before from coderanger about knife ec2 and wanted to see his point again, cause i might have misquoted him here
[2014-04-21 23:33:04 -0400] loki_97123: chef-metal is interesting.
[2014-04-21 23:33:27 -0400] coderanger: loki_97123: knife ec2 isn't a Real Provisioning System since it request human intervention to do anything
[2014-04-21 23:33:27 -0400] blueben: it's also bleeding
[2014-04-21 23:33:28 -0400] loki_97123: been talking with popov about it
[2014-04-21 23:34:02 -0400] coderanger: loki_97123: chef-metal is still a babby, for now if thats the kind of thing you want, use CloudFormation or Heat
[2014-04-21 23:35:08 -0400] mannyt: Does anyone have a reference for upgrading OS chef-server from 11.0.10 to 11.0.12?  Is there a graceful upgrade path?
[2014-04-21 23:36:13 -0400] coderanger: mannyt: Just install the new package and restart
[2014-04-21 23:36:58 -0400] mannyt: I get a lot of file conflicts going that route
[2014-04-21 23:37:21 -0400] coderanger: mannyt: File conflicts?
[2014-04-21 23:37:42 -0400] loki_97123: using chef to upgrade chef?
[2014-04-21 23:38:07 -0400] mannyt: using rpm -i
[2014-04-21 23:38:12 -0400] loki_97123: thank you jkeiser, thank you coderanger
[2014-04-21 23:38:37 -0400] coderanger: mannyt: I think you want rpm -U
[2014-04-21 23:38:44 -0400] coderanger: but my RPMfu is rusty
[2014-04-21 23:38:59 -0400] zz_loki_97123: it is rpm -U for the upgrade
[2014-04-21 23:39:23 -0400] mannyt: Ah thank you
[2014-04-21 23:39:49 -0400] mannyt: my RPMfu is not so strong
[2014-04-21 23:54:46 -0400] gkra: So... Chef-DK and chef client omnibus will coexist happily, right?
[2014-04-21 23:54:53 -0400] coderanger: Yep
[2014-04-21 23:55:50 -0400] gkra: groovey
[2014-04-21 23:56:08 -0400] gkra: i'm really liking what I've read about chefdk + berkshelf 3
[2014-04-21 23:56:11 -0400] coderanger: gkra: Just make sure the "correct" knife binary ends up on your path
[2014-04-21 23:56:14 -0400] coderanger: since they both ship one
[2014-04-21 23:56:21 -0400] gkra: ah
[2014-04-21 23:56:30 -0400] gkra: I don't need chef-client if i have chefdk right?
[2014-04-21 23:56:41 -0400] coderanger: If its a workstation, probably not
[2014-04-21 23:56:46 -0400] gkra: 'k.

[2014-04-14 00:14:21 -0400] coredump: so if I use test-kitchen with chef-zero as the provisioner, where should I put the data for it? Like a mock node
[2014-04-14 01:38:21 -0400] resno: is it possible to get nodes to connect to chef-server if that machine has weird restricted access?
[2014-04-14 01:54:36 -0400] darkside_: resno: is port 443 open?
[2014-04-14 02:22:28 -0400] resno: darkside_: um, not directly
[2014-04-14 02:23:13 -0400] resno: in general you can use a gateway to connect or port should be open?
[2014-04-14 06:57:19 -0400] m4rcu5: i am not officially lost on how to implement the report handlers the right way. I have a ruby file which should notify nagios NSCA if the run succeded or failed. But how you deploy it correctly?
[2014-04-14 06:58:34 -0400] m4rcu5: the chef_handler cookbook seems to expec that the file is a real ruby gem
[2014-04-14 08:05:22 -0400] stix121: looking for help with chef cookbooks not committing in git
[2014-04-14 08:06:09 -0400] stix121: added a cookbook "knife cookbook site install apticron"
[2014-04-14 08:06:25 -0400] stix121: files are there but nothing to commit in git
[2014-04-14 08:07:15 -0400] stix121: only happens with one or two cookbooks. have removed then and their git branches and tried again bit still nothing to commit
[2014-04-14 08:07:18 -0400] stix121: anybody run into this?
[2014-04-14 08:07:59 -0400] double_p: site install? i use knife cookbook upload fwiw
[2014-04-14 08:09:37 -0400] stix121: double_p: yes, I do that when I push to the chef-server but to get the cookbook into my local git repo I run the "knife cookbook site install"
[2014-04-14 08:10:10 -0400] gregkare: "knife cookbook site install" never worked reliably for me, most people use Berkshelf but I like Librarian Chef better
[2014-04-14 08:10:34 -0400] double_p: oh.. for *my* local (still on svn, sorry), i just use svn add :>
[2014-04-14 08:10:34 -0400] stix121: double_p: that is excellent to know - will investigate
[2014-04-14 09:32:59 -0400] zeroXten: do test-kitchen attributes override normal?
[2014-04-14 10:00:27 -0400] Er00: Does anyone know if there's any info anywhere about push jobs being rolled into open source chef?
[2014-04-14 10:01:00 -0400] Er00: the only thing I can find is from Dec 2013 saying probably Q1 2014 but I was hoping someone might have more recent info
[2014-04-14 10:17:30 -0400] zeroXten: ahh balls. I am passing a lazy param to an lwrp... but of course the creation of resources within the lwrp isn't lazy ;(
[2014-04-14 10:18:01 -0400] zeroXten: is there a correct way of handling this?
[2014-04-14 11:02:50 -0400] hagalaz: hello
[2014-04-14 11:04:30 -0400] hagalaz: can someone help me or at least point me to the right direction with a problem i'm having?
[2014-04-14 11:05:35 -0400] Flexa: Hey guys, my chef run is falling over on the last step after bootstrapping a node and running chef-client for the first time. https://gist.github.com/anonymous/8e2c734d794afc74dc96 FATAL: Chef is already running pid 18075 Any ideas??
[2014-04-14 11:08:30 -0400] Flexa: Also as you can see from the log, chef keeps storing the updated cookbooks in cache, but they are not being updated so I don't think this should be happening....?
[2014-04-14 11:12:18 -0400] zeroXten: hagalaz: what is the problem?
[2014-04-14 11:21:26 -0400] hagalaz: zeroXten: I'm trying to create a cookbook that creates the admin users. I have used berkshelf to install the user cookbook and have created a databag named users with 2 admin accounts. I have included the user:databag  to the node run_list but nothing happens.
[2014-04-14 11:21:42 -0400] hagalaz: zeroXten: There's one line in the documentation that I don't understand though
[2014-04-14 11:22:12 -0400] hagalaz: zeroXten: it says something about node['users'] = ['hsolo', 'lando', 'luke.skywalker'] in the example (https://github.com/fnichol/chef-user)
[2014-04-14 11:22:35 -0400] hagalaz: zeroXten: I'm not sure what this is and where I'm supposed to set it up
[2014-04-14 11:23:07 -0400] zeroXten: you've included a databag in the runlist?
[2014-04-14 11:23:53 -0400] zeroXten: The data bag recipe will iterate through a list of usernames defined in node['users'] (by default) and attempt to pull in the user's information from the data bag item. In other words, having:
[2014-04-14 11:24:17 -0400] zeroXten: so you put all your users in a data bag. then use the node['users'] attribute to say which ones get installed at the time
[2014-04-14 11:24:28 -0400] zeroXten: (it might vary from system to system for example)
[2014-04-14 11:24:29 -0400] hagalaz: I have added the user:data_bag recipe
[2014-04-14 11:25:03 -0400] zeroXten: ah ok
[2014-04-14 11:25:23 -0400] zeroXten: so it won't do anything unless you set the 'users' attribute
[2014-04-14 11:30:37 -0400] hagalaz: zeroXten: I have tried everything, adding an attribute, adding the recipe "user" adding the recipe "user::data_bag", no luck
[2014-04-14 11:31:26 -0400] hagalaz: zeroXten: The only thing that worked is defining users directly in a new recipe and not using data bags
[2014-04-14 11:32:36 -0400] zeroXten: have you run chef with debug to see what is being executed?
[2014-04-14 11:34:55 -0400] hagalaz: I tried chef-clieng -l info
[2014-04-14 11:35:22 -0400] hagalaz: noting helpful
[2014-04-14 11:38:51 -0400] zeroXten: do -l debug
[2014-04-14 11:40:03 -0400] hagalaz: still, nothing interesting. It loads the cookbook and the recipe but nothing else, no errors, no tasks
[2014-04-14 11:40:16 -0400] Flexa: zeroXten, any ideas with the issue I am seeing? It only falls over on the first chef run, every time. If I jump onto the box after it fails and run chef-client -l  debug, the chef run completes successful ... ?
[2014-04-14 11:42:34 -0400] zeroXten: hagalaz: to me it sounds like you're not telling it to load any users from the databag
[2014-04-14 11:42:46 -0400] zeroXten: which would be an issue with setting the users attribute
[2014-04-14 11:42:58 -0400] _sp0k_: Flexa: are you still getting ssl peer verify error, you might want to resolve it first if still there
[2014-04-14 11:43:36 -0400] stevedomin: Hi guys, what's the latest stable version of chef-server? Can't find the info anywhere
[2014-04-14 11:44:35 -0400] zeroXten: Flexa: what happens when you stop the service, kill any chef-client processes and just run it yourself?
[2014-04-14 11:44:47 -0400] Flexa: zeroXten, it runs OK
[2014-04-14 11:44:53 -0400] Flexa: after the first failed run..
[2014-04-14 11:44:55 -0400] _sp0k_: hagalaz: i generally just print out the user attribute in the recipe to troubleshoot such issue, you might want to try display users data bag content to be sure it has proper data in it
[2014-04-14 11:45:09 -0400] _sp0k_: and also check out data bag content via knife to be sure Chef has it
[2014-04-14 11:45:31 -0400] zeroXten: hagalaz: ah yeah, you did upload the data bag didn't you?
[2014-04-14 11:45:57 -0400] zeroXten: mind you, i would expect it to fail if you had a user in users attr but no id in the databag
[2014-04-14 11:46:37 -0400] hagalaz: it says "To use recipe[user::data_bag], include it in your run_list and have a data bag called "users" with an item like the following"
[2014-04-14 11:47:07 -0400] hagalaz: i have created the "users" data bag and have confirmed it exists on the server
[2014-04-14 11:47:22 -0400] zeroXten: what user did you add to it?
[2014-04-14 11:48:08 -0400] hagalaz: i have added 2 users, let's say test1 and test2
[2014-04-14 11:48:27 -0400] zeroXten: ok, then did you do something like override['users'] = [ 'test1', 'test2' ]
[2014-04-14 11:48:28 -0400] zeroXten: ?
[2014-04-14 11:48:29 -0400] hagalaz: and i have created an attribute users = ["test1","test2"] on the node
[2014-04-14 11:48:54 -0400] hagalaz: override? no, i used the web interface to add the attribute
[2014-04-14 11:49:06 -0400] zeroXten: oh.. uh, i assume that is ok then
[2014-04-14 11:49:28 -0400] zeroXten: never used the web interface before
[2014-04-14 11:49:44 -0400] hagalaz: where would I put the override?
[2014-04-14 11:50:37 -0400] zeroXten: well, should be required I think. Not if you're setting it on the node directly
[2014-04-14 11:50:53 -0400] zeroXten: you would use override if using cookbook attributes
[2014-04-14 11:51:24 -0400] zeroXten: you might just need to provide us a full chef-client -l debug output
[2014-04-14 12:01:17 -0400] _pingu: where can i find informations for chef-solo?  https://wiki.opscode.com/display/chef/Home -> Architecture -> Chef-Solo -> leads to chef-client!
[2014-04-14 12:08:07 -0400] hagalaz: zeroXten: http://pastebin.com/YxLS4Z4V
[2014-04-14 12:08:23 -0400] hagalaz: sorry it took me a while to sanitize the output
[2014-04-14 12:08:39 -0400] srenatus: _pingu: like what?  you might have come to the right place.
[2014-04-14 12:09:08 -0400] srenatus: _pingu: of course, the definite answer starts here: https://github.com/opscode/chef/blob/master/lib/chef/application/solo.rb
[2014-04-14 12:11:41 -0400] _pingu: srenatus: is there documentation for chef-solo? i don't want to read it's sources.
[2014-04-14 12:13:17 -0400] srenatus: _pingu: there's something here http://docs.opscode.com/ctl_chef_solo.html
[2014-04-14 12:13:27 -0400] srenatus: _pingu: ...and more here http://docs.opscode.com/chef_solo.html
[2014-04-14 12:14:12 -0400] _pingu: srenatus: ok, thanks! :-)
[2014-04-14 12:18:12 -0400] zeroXten: hagalaz: eh.. wtf.. it just seems to be ignoring user::data_bag
[2014-04-14 12:25:44 -0400] d4emonza: Hi, I cannot seem to get knife configured, everytime I run "knife configure -i" I get the following : ERROR: Ohai::Exceptions::DependencyNotFound: Can not find a plugin for dependency os
[2014-04-14 12:25:54 -0400] d4emonza: google does not help much, anyone got any ideas?
[2014-04-14 12:26:07 -0400] hagalaz: zeroXten: yeap, nothing happens, no errors no nothing...
[2014-04-14 12:27:17 -0400] _sp0k_: hagalaz: you have already verified this, but could you check what run_list says for this node via UI or "knife node show <node-fqdn>"
[2014-04-14 12:27:42 -0400] zeroXten: hagalaz: maybe look at the attributes for that cookbook? make sure it doesn't do something strange based on default attribute value
[2014-04-14 12:28:48 -0400] hagalaz: this is the non verbose output from the node http://pastebin.com/m7Pft46x and this is reported from knife : Run List:    recipe[user], recipe[user::data_bag], recipe[apache]
[2014-04-14 12:30:22 -0400] hagalaz: zeroXten: https://github.com/fnichol/chef-user/blob/master/attributes/default.rb
[2014-04-14 12:30:47 -0400] hagalaz: zeroXten: standard stuff as far as i can tell
[2014-04-14 12:31:52 -0400] zeroXten: https://github.com/fnichol/chef-user/blob/master/recipes/data_bag.rb
[2014-04-14 12:32:01 -0400] zeroXten: it doesn't create any chef resources until line 34
[2014-04-14 12:32:10 -0400] zeroXten: i'm guessing you're not getting into that loop for some reason
[2014-04-14 12:52:51 -0400] Flexa: gah - I'm getting Chef::Exceptions::MultipleFailures: Chef::Exceptions::MultipleFailures on first chef run after bootstrap. Not the most helpful error ever..
[2014-04-14 12:53:15 -0400] Flexa: If I then jump on the box and run chef-client -l debug, it runs OK..
[2014-04-14 13:20:45 -0400] nobody18188181: When writing a recipe to include a file how do you properly include that file when running on the chef-client so that you do not get no such file or directory errors?
[2014-04-14 13:31:49 -0400] nobody18188181: nvm; found http://docs.opscode.com/resource_cookbook_file.html
[2014-04-14 13:42:08 -0400] Azrael: is anybody having trouble with the open source edition of the Chef server, once changing their SSL certificate with server version 11.0.12?
[2014-04-14 13:42:12 -0400] Azrael: i can no longer upload cookbooks
[2014-04-14 13:42:29 -0400] Azrael: just like issue:  https://tickets.opscode.com/browse/CHEF-5144
[2014-04-14 14:02:29 -0400] coredump: so if I use test-kitchen with chef-zero as the provisioner, where should I put the data for it? Like a mock node
[2014-04-14 14:05:12 -0400] srenatus: coredump: test/integration/nodes/  or test/integration/<suite>/nodes/
[2014-04-14 14:10:05 -0400] hairyhenderson: Hey folks, is it possible to read the contents of cookbook files into template variables?
[2014-04-14 14:11:22 -0400] shlant: hairyhenderson: why not just move the file to a template?
[2014-04-14 14:12:13 -0400] hairyhenderson: shlant: well I have a template for an XML configuration file, and there's certain sections which are huge, but static, and I may or may not want them, so they were exposed as separate XML files
[2014-04-14 14:12:27 -0400] coredump: srenatus what would be 'suite' ?
[2014-04-14 14:12:29 -0400] hairyhenderson: (I'm porting an old custom python configuration tool to a chef cookbook)
[2014-04-14 14:12:54 -0400] srenatus: coredump: depends on your kitchen.yml
[2014-04-14 14:13:05 -0400] coredump: oh ok, that suite
[2014-04-14 14:13:38 -0400] Azrael: how can i instruct erchef to log debug information?
[2014-04-14 14:14:08 -0400] hairyhenderson: shlant: is it possible to include a resolved template into another template?
[2014-04-14 14:14:42 -0400] shlant: hairyhenderson: http://docs.opscode.com/resource_template.html#partial-templates
[2014-04-14 14:15:02 -0400] hairyhenderson: shlant: ooh!
[2014-04-14 14:15:19 -0400] hairyhenderson: shlant: looks like that's *exactly* what I need, much appreciated :)
[2014-04-14 14:16:06 -0400] alexknith: Hi guys, I need a bit of help with the knife openstack server create, I'm running knife-openstack 0.10.0 but I'm stuck with the --nics option. It is a JSON list but what I've got is what I can see from knife openstack network list - Name, ID, Tenant. The command needs net_id': 'xxx', 'v4_fixed_id': 'x.x.x.x', 'port_id': 'xxx but v4_fixed - I don't have and port_id is changing as well
[2014-04-14 14:50:01 -0400] alexknith: shlant: Hi, I need a bit of help with the knife openstack server create, I'm running knife-openstack 0.10.0 but I'm stuck with the --nics option. It is a JSON list but what I've got is what I can see from knife openstack network list - Name, ID, Tenant. The command needs net_id': 'xxx', 'v4_fixed_id': 'x.x.x.x', 'port_id': 'xxx but v4_fixed - I don't have and port_id is changing as well
[2014-04-14 14:51:28 -0400] shlant: alexknith: sorry, I'm not much help with the openstack plugin as I don't use it because it doesn't have a dat bag secret option :p
[2014-04-14 14:52:56 -0400] shlant: anyone have an automated way they handle getting an encrypted_data_bag_secret onto a new node? besides the knife option
[2014-04-14 14:53:14 -0400] shlant: I kind of want to only pull it to the node if it needs it
[2014-04-14 14:53:19 -0400] alexknith: you're right, it doesn't, thanks for the quick reply, do you know who to ask now ?
[2014-04-14 14:53:19 -0400] shlant: not sure the best way to do that
[2014-04-14 14:55:24 -0400] shlant: alexknith: not sure what your question is?
[2014-04-14 14:56:29 -0400] alexknith: my question is, with the new --nics option in place, what's the usecase example as the v4_fixed and port_id both are generated so I cannot specify when using server create
[2014-04-14 14:56:59 -0400] alexknith: shlant: my question is, with the new --nics option in place, what's the usecase example as the v4_fixed and port_id both are generated so I cannot specify when using server create
[2014-04-14 15:00:19 -0400] shlant: alexknith: can't find anything on that option, is it new?
[2014-04-14 15:00:28 -0400] shlant: as in newest release?
[2014-04-14 15:00:45 -0400] shlant: if so, you might need to wait for proper docs or submit a ticket
[2014-04-14 15:01:05 -0400] alexknith: shlant: it is :( it is 0.10.0
[2014-04-14 15:01:48 -0400] shlant: alexknith: 11.10.0?
[2014-04-14 15:02:05 -0400] alexknith: shlant: knife-openstack
[2014-04-14 15:03:17 -0400] alexknith: shlant: the syntax is : knife openstack server create <..> --nics "JSON array specifying NICS attrs, e.g. one nic would be: [{'net_id': 'xxx', 'v4_fixed_id': 'x.x.x.x', 'port_id': 'xxx'}]"
[2014-04-14 15:04:10 -0400] shlant: alexknith: latest I see is 0.9.1
[2014-04-14 15:06:13 -0400] alexknith: shlant: it is not documented apart from the description, and I cannot launch it in my environment (I'm just a tenant), the examples out there don't have the network ID/--nics option enabled but in my case it says : "FATAL: Bad request (400): Multiple possible networks found, use a Network ID to be more specific"
[2014-04-14 15:06:31 -0400] Azrael: https://github.com/opscode/omnibus-chef-server/blob/master/Vagrantfile
[2014-04-14 15:06:42 -0400] Azrael: ^ hmm, the Ubuntu 11.04 provisionerless box doesn't exist
[2014-04-14 15:06:44 -0400] alexknith: shant: therefore I was going to use the 0.10.0 : https://github.com/craigtracey/knife-openstack/blob/nics-rebase/lib/chef/knife/openstack_server_create.rb
[2014-04-14 15:08:01 -0400] shlant: alexknith: oh god, I don't think many people will be able to help you with a fork of a fork unfortunately
[2014-04-14 15:08:15 -0400] alexknith: ctracey: hi craig, sorry to bother you, hope you can help me with the knife openstack server create --nics option
[2014-04-14 15:08:16 -0400] shlant: should wait till official release
[2014-04-14 15:08:29 -0400] alexknith: shlant: thanks
[2014-04-14 15:21:22 -0400] Er00: Is there any way of adding attributes to an environment via command line (except by creating a file and using that to create environment from file?)
[2014-04-14 15:24:08 -0400] CPS: i doubt it Er00
[2014-04-14 15:24:53 -0400] Er00: Ah well :) I guess I'll pull down env data, edit it, and push it back up in my script then  :)
[2014-04-14 15:24:56 -0400] Er00: thanks
[2014-04-14 15:26:54 -0400] shlant: has anyone used the citadel cookbook? thoughts?
[2014-04-14 15:42:01 -0400] nacx: hi! can anyone help me with a service start configuration?
[2014-04-14 15:42:08 -0400] nacx: the service does not start during the first run
[2014-04-14 15:42:22 -0400] nacx: but if I run chef.client manually afterwards, it is started normally
[2014-04-14 15:42:50 -0400] nacx: is there anything that I should check or does someone have some pointers?
[2014-04-14 15:43:06 -0400] srenatus: nacx: tried "-ldebug" in the first (failing) run?
[2014-04-14 15:43:25 -0400] nacx: not yet (only in the second run)
[2014-04-14 15:43:30 -0400] nacx: because I am using knife-bootstrap
[2014-04-14 15:43:35 -0400] nacx: with the digitalocean plugin
[2014-04-14 15:43:45 -0400] nacx: and haven't been able to turn on debug logging when bootstrapping
[2014-04-14 15:44:14 -0400] nacx: I've tried with the defelut service provider, and also forcing the Init provider and configuring a pattern
[2014-04-14 15:44:23 -0400] phutchin1: hi, anyone work with vagrant and opsworks (which uses chef-zero now)? They allow you to override bits of their cookbooks by having a cookbook with the same name in your repo. I'm trying to figure out how to do the same thing but with vagrant for testing
[2014-04-14 15:44:29 -0400] nacx: to perform the status check based on the process existance, but I get the same result
[2014-04-14 15:44:49 -0400] phutchin1: So specifically, can anyone point me in the right direction with merging two cookbooks with the same name?
[2014-04-14 15:46:07 -0400] nacx: srenatus, will try to manually start the node and manually install and run chec-client to enable the debug flag
[2014-04-14 15:46:07 -0400] nacx: thx
[2014-04-14 15:47:07 -0400] srenatus: nacx: :)
[2014-04-14 15:47:28 -0400] srenatus: nacx: sounds quite right.  it's hard to guess debugging output
[2014-04-14 15:47:47 -0400] nacx: the weird thing is that in the second run, it always suceeds, with the normal provider or the init one
[2014-04-14 15:48:00 -0400] nacx: so perhaps is something weird the service script is doing
[2014-04-14 15:51:54 -0400] Azrael: hey folks why is there no opscode_ubuntu-11.04_provisionerless.box for building Chef?
[2014-04-14 15:53:57 -0400] shlant: nacx: almost every time there is something weird with a service, it is something in the script
[2014-04-14 15:59:47 -0400] shlant: coderanger: does citadel only work with ec2 instances?
[2014-04-14 16:00:18 -0400] jmreicha: Anybody know how to set a timeout for the git resource?  I am trying to clone a huge repo and it always times out and dies
[2014-04-14 16:00:37 -0400] coderanger: shlant: I mean you can use it from vbox/vagrant in dev mode
[2014-04-14 16:00:59 -0400] shlant: coderanger: but what about openstack instances, or baremetal?
[2014-04-14 16:01:32 -0400] coderanger: shlant: Neither has anything like IAM roles, so not really. OpenStack might eventually via Barbican but its not there yet
[2014-04-14 16:01:40 -0400] bmhatfield: jmreicha: I believe it's possible to set one if you add an ssh-wrapper. However, my experience showed that it was worth breaking large files out of the git repo and delivering them via other means (for example, http).
[2014-04-14 16:01:53 -0400] bmhatfield: Large git repos are more hassle to make work reliably than it's worth
[2014-04-14 16:02:05 -0400] coderanger: shlant: If you have some kind of authorization system you could make it work, but I don't know of any
[2014-04-14 16:02:36 -0400] jmreicha: bmhatfield: Hm, haven't thought about that.  I am using an ssh wrapper currently, would I add in a timeout there?
[2014-04-14 16:02:48 -0400] shlant: coderanger: understood, thanks. I guess I'll be stuck with distributing this damn secrets key for a bit ;)
[2014-04-14 16:03:13 -0400] bmhatfield: jmreicha: I think so. There's also a chef resource timeout, and I think you have to raise both.
[2014-04-14 16:03:45 -0400] bmhatfield: jmreicha: I didn't end up getting all the way through raising the timeouts because it was also taking so *long* to clone the repo that it was working against what I wanted to do.
[2014-04-14 16:03:49 -0400] jmreicha: I was looking at the timeout resource, just wanted to make sure I was on the right track
[2014-04-14 16:03:55 -0400] bmhatfield: There's two places
[2014-04-14 16:04:01 -0400] bmhatfield: an internal git timeout, which chef doesn't control
[2014-04-14 16:04:05 -0400] bmhatfield: and the chef resource itself
[2014-04-14 16:04:07 -0400] bmhatfield: you want both
[2014-04-14 16:04:12 -0400] jmreicha: weird
[2014-04-14 16:04:50 -0400] bmhatfield: I found breaking them out into files and iterating over them using remote_file to be more reliable
[2014-04-14 16:05:07 -0400] jmreicha: hm, I'm not sure I follow?
[2014-04-14 16:05:47 -0400] bmhatfield: Oh, sorry: So the large git repo I was working with had a bunch of moderate sized files in it (between 5-10MB)
[2014-04-14 16:06:06 -0400] bmhatfield: I split all of them out into individual objects in S3, and then let chef iterate over the index of them to download them all
[2014-04-14 16:06:30 -0400] bmhatfield: I didn't actually need/want revision control at all, someone had just slapped them in there when there were only like 2 because it was easy to do.
[2014-04-14 16:06:31 -0400] jmreicha: Oh I gotcha, I wonder if I can do something similar
[2014-04-14 16:06:50 -0400] bmhatfield: Then it grew, and then git struggled to manage it, etc
[2014-04-14 16:07:22 -0400] nacx: srenatus, shlant ...
[2014-04-14 16:07:45 -0400] nacx: manually running the chef-client on a provisioned node works, but using knife bootstrap the service does not start in the first run
[2014-04-14 16:08:00 -0400] loki_97123: hello
[2014-04-14 16:08:17 -0400] loki_97123: ?'s for you all... any one using chef-zero and vagrant?
[2014-04-14 16:08:32 -0400] loki_97123: please don't point me at chef-metal... yet
[2014-04-14 16:09:18 -0400] jmreicha: bmhatfield: Interesting, I might try something like that.  I'm having trouble finding info about timeout in the docs anyway :(
[2014-04-14 16:13:23 -0400] jmreicha: It looks like I can just something like "timeout 999" in my git resource?
[2014-04-14 16:25:20 -0400] bmhatfield: jmreicha: yep, that's part of it
[2014-04-14 16:25:38 -0400] bmhatfield: jmreicha: if the git command times out when running it manually, I htink you also need to tweak git itself
[2014-04-14 16:44:57 -0400] Flexa: Hey guys, can anyone help with this weird problem I am having? https://gist.github.com/anonymous/de3b489df75782a3a989
[2014-04-14 16:49:33 -0400] j^2: Flexa: https://gist.github.com/anonymous/de3b489df75782a3a989#file-gistfile1-txt-L96
[2014-04-14 16:49:37 -0400] j^2: it's missing a file?
[2014-04-14 16:50:11 -0400] Nukepuppy: anyone have an example of using bash to compare a return value in a not_if block?
[2014-04-14 16:50:15 -0400] Flexa: j^2, in chef-client?
[2014-04-14 16:50:38 -0400] j^2: yeah the chef-client run, says it's missing a file for erlang
[2014-04-14 16:50:51 -0400] j^2: so maybe missing a cookbook_file or template or something?
[2014-04-14 16:51:00 -0400] j^2: causing the ripple effect of the failure?
[2014-04-14 16:51:08 -0400] j^2: dunno, but that's what the log says
[2014-04-14 16:51:09 -0400] Nukepuppy: as in bash .. command "grep value /etc/somefile"  > 2048   ?
[2014-04-14 16:51:42 -0400] Flexa: j^2, don't have the erlang cookbook.
[2014-04-14 16:51:58 -0400] j^2: Plugin Erlang threw #<Errno::ENOENT: No such file or directory
[2014-04-14 16:52:36 -0400] Flexa: ja, but that's not caused FATAL
[2014-04-14 16:53:11 -0400] j^2: hmm
[2014-04-14 16:53:12 -0400] nobody18188181: Has anyone noticed any issues plugging recipes in database access?
[2014-04-14 16:54:07 -0400] nobody18188181: i want to automate user creation, pw resets, etc via a web form but am curious before I start the project if there has been any issues pulling data from a database via a recipe?
[2014-04-14 16:54:49 -0400] Flexa: nobody18188181, no
[2014-04-14 16:54:56 -0400] Flexa: not that I know of
[2014-04-14 16:55:07 -0400] nobody18188181: Flexa: thanks
[2014-04-14 16:57:31 -0400] Flexa: I assume other people have the chef-client recipe at the end of a base run list?
[2014-04-14 17:05:46 -0400] jmreicha: bmhatfield: Thanks, I think I got it :)
[2014-04-14 17:06:19 -0400] bmhatfield: Nice!
[2014-04-14 17:25:50 -0400] kbarry: can I use knife search to find all cookbooks that depend on a certain cookbook? ie 'knife search cookbook "depends:yum"
[2014-04-14 17:26:27 -0400] guix: Hi any one here that has used the haproxy community coookbook? Using the app_lb recipe?
[2014-04-14 17:30:31 -0400] kbarry: http://docs.opscode.com/knife_search.html says the indexes that can be queries are " client, environment, node, role, or DATA_BAG_NAME"
[2014-04-14 17:31:10 -0400] oponder: guix: I used it briefly, and quite a while ago
[2014-04-14 17:31:42 -0400] doomviking: guix: yes
[2014-04-14 17:31:43 -0400] guix: Is it normal that app_lb has no call to a template resource to configure the haproxy.cfg file?
[2014-04-14 17:32:19 -0400] tcate: Is there a chef-server package for Ubuntu 14.04 yet?
[2014-04-14 17:32:28 -0400] mortuar: are env_run_lists within roles going away?
[2014-04-14 17:32:57 -0400] guix: Maybe I am using it wrong. I created an application cookbook with calls, haproxy:app_lb and added an entry in the attibutes file to override the attribute app_server_role
[2014-04-14 17:33:24 -0400] prometheanfire: tcate: is 14.04 out yet?
[2014-04-14 17:33:36 -0400] doomviking: guix: I have a template resource for that file in my app_lb.rb
[2014-04-14 17:33:55 -0400] prometheanfire: tcate: guess this is how we will keep in touch :P
[2014-04-14 17:33:56 -0400] tcate: prometheanfire: beta 2, but I'm testing a lab with it
[2014-04-14 17:34:10 -0400] guix: which version are you using? I have gitcloned version 1.6.2
[2014-04-14 17:34:28 -0400] doomviking: 1.3.2
[2014-04-14 17:34:33 -0400] shlant: do variables persist from one recipe to another? Like if I set blah = 'foo', could use blah in subsequent recipes?
[2014-04-14 17:35:34 -0400] guix: doomviking: thanks are you using this in production?
[2014-04-14 17:35:37 -0400] Flexa: shlant, no.
[2014-04-14 17:35:46 -0400] doomviking: guix: yes
[2014-04-14 17:36:01 -0400] shlant: Flexa: ok, thanks
[2014-04-14 17:36:52 -0400] guix: doomviking: Thank you DoomViking have you looked into version 1.4.0
[2014-04-14 17:37:39 -0400] doomviking: guix: I haven't
[2014-04-14 17:38:08 -0400] guix: doomviking: Ok I will give 1.4.0 a try.
[2014-04-14 17:39:30 -0400] helfire: can i tell chefspec not to update my berks every time? i have quite a few in git and it takes a bit each run. There's a Berksfile.lock already too
[2014-04-14 17:40:00 -0400] Flexa: Hey guys, my first chef run after bootstrapping a node always fails. driving me crazy. any ideas? https://gist.github.com/anonymous/de3b489df75782a3a989
[2014-04-14 17:41:34 -0400] Flexa: I think the first chef run is running, getting restarted by the chef-client::service recipe, but that then fails to start..?
[2014-04-14 17:43:58 -0400] zenloop_: help, I am setting an attribute override in a recipe but another cookbook is not seeing it.  Has anyone had problems with attributes being overridden or defined but not showing up during a chef run?  What is weird is that my recipe does not see the overriden attribute but it is available from the shef shell after the chef run has completed.
[2014-04-14 17:46:11 -0400] Flexa: zenloop_, please post a gist of what you are trying to achieve
[2014-04-14 17:51:55 -0400] kbarry: http://pastebin.com/gPBj0cec is the role the wrong place for these attributes? Am I forming them incorrectly? (bad json")?
[2014-04-14 17:54:12 -0400] redondos: view /join #openstack-neutron
[2014-04-14 17:58:40 -0400] zenloop_: Thanks flexa.
[2014-04-14 18:01:23 -0400] double_p: 8min to converge some centos6.5 into a cloudstack/chef env. luvit :)
[2014-04-14 18:02:22 -0400] zenloop_: @Flexa: http://pastie.org/9080278
[2014-04-14 18:03:00 -0400] zenloop_: So I am trying to set node["collectd"]["additional_plugins"] from another cookbook with node override.
[2014-04-14 18:04:52 -0400] Flexa: zenloop_, 1) can you do that? 2) where have you set the override?
[2014-04-14 18:06:43 -0400] Flexa: Anyone help with whats going on here? https://gist.github.com/anonymous/de3b489df75782a3a989
[2014-04-14 18:06:48 -0400] Flexa: jtimberman ? :)
[2014-04-14 18:07:23 -0400] Flexa: the node bootstraps but fails when getting to the end of the first chef run
[2014-04-14 18:07:59 -0400] zenloop_: I do the override in a cookbook that depends on collectd.  I define a depends to "collectd"  in role_base metadata file.
[2014-04-14 18:08:07 -0400] zenloop_: in the default recipe I run node override.
[2014-04-14 18:08:28 -0400] zenloop_: but it does not register when the collectd recipe is running.
[2014-04-14 18:08:38 -0400] zenloop_: only after the run is the attribute populated.
[2014-04-14 18:08:44 -0400] Nukepuppy: flexa hard to say from that log honestly
[2014-04-14 18:09:02 -0400] Flexa: Nukepuppy, anything I can get to be more helpful? :/
[2014-04-14 18:09:13 -0400] Flexa: This is driving me mad now and holding up work :(
[2014-04-14 18:09:22 -0400] Nukepuppy: just more of the error sometimes the error is in strange places in the error output that a lot of folks cut off
[2014-04-14 18:10:08 -0400] zenloop_: """node.override["collectd"]["additional_plugins"] = {"md" => { }}""" is how I define the override in my other cookbook.
[2014-04-14 18:10:14 -0400] zenloop_: Should just work right?
[2014-04-14 18:10:41 -0400] zenloop_: In collectd I define additional_plugins as just an empty dictionary (hash).
[2014-04-14 18:13:05 -0400] Flexa: zenloop_, looks ok..
[2014-04-14 18:13:16 -0400] zenloop_: arg.
[2014-04-14 18:13:21 -0400] zenloop_: I am going bonkers over this :-)
[2014-04-14 18:17:56 -0400] prometheanfire: can we do a notifies with include_recipe?
[2014-04-14 18:18:08 -0400] prometheanfire: we want it to be :delayed
[2014-04-14 18:19:57 -0400] brimstone: is there a way to not merge an environment attribute hash with a cookbook hash?
[2014-04-14 18:20:18 -0400] brimstone: and just replace the cookbook attribute hash with the environment attribute hash?
[2014-04-14 18:20:26 -0400] prometheanfire: attributes should be merged at compile time
[2014-04-14 18:20:32 -0400] prometheanfire: env should override cookbook
[2014-04-14 18:20:46 -0400] brimstone: it's not, with a hash atleast
[2014-04-14 18:20:52 -0400] prometheanfire: neat
[2014-04-14 18:20:52 -0400] brimstone: strings seem to override correctly
[2014-04-14 18:20:56 -0400] prometheanfire: og
[2014-04-14 18:21:06 -0400] prometheanfire: I see, you could do it manually
[2014-04-14 18:21:12 -0400] prometheanfire: I think I've had to do that before...
[2014-04-14 18:21:57 -0400] CPS: ruby has a nice hash merge function
[2014-04-14 18:22:08 -0400] prometheanfire: yep
[2014-04-14 18:22:37 -0400] brimstone: CPS: yeah, works too well
[2014-04-14 18:25:51 -0400] brimstone: looks like https://tickets.opscode.com/browse/CHEF-2780 actually
[2014-04-14 18:32:57 -0400] brimstone: an override_attribute in an environment json should override the name that's listed as a default[] attribute in a cookbook, or am I reading the precedence table wrong?
[2014-04-14 18:34:11 -0400] vt102: I've made some wrapper recipes and overwrite attributes and  include recipes just fine.  But, how should I access the original recipes LWRPs and such, though?
[2014-04-14 18:34:20 -0400] CPS: what do you mean override the name?
[2014-04-14 18:36:12 -0400] brimstone: i have "override_attribute": {"key": {"foo": "bar"}} and default['key']['foo1'] = "bar1". when i converge, i have 'foo' and 'foo1'
[2014-04-14 18:36:23 -0400] brimstone: maybe override value instead of name?
[2014-04-14 18:36:59 -0400] CPS: i don't know that that there's a way to override a key short of adding a new one and deleting the old one
[2014-04-14 18:37:03 -0400] CPS: which i doubt chef does
[2014-04-14 18:37:50 -0400] CPS: what you've written is just two separate keys
[2014-04-14 18:37:54 -0400] maplebed: So I'm looking at the ChefConf schedule (http://chefconf2014.busyconf.com/schedule). Is there any page that lists the long form descriptions of all the sessions rather than having to click through each one at a time?
[2014-04-14 18:38:03 -0400] brimstone: CPS: right
[2014-04-14 18:41:57 -0400] shlant: anyone else getting Unable to satisfy constraints on package x due to solution constraint because of pessimistic constraints?
[2014-04-14 18:47:15 -0400] brimstone: CPS: right, I was counting on chef overriding at the level of "key"
[2014-04-14 18:48:15 -0400] CPS: that's not how hashes work in ruby
[2014-04-14 18:49:48 -0400] brimstone: right, but at the array level, you could override the hash
[2014-04-14 18:50:33 -0400] CPS: array level?
[2014-04-14 18:50:43 -0400] brimstone: right, up at "key"
[2014-04-14 18:50:56 -0400] brimstone: the top level attribute, not any of it's nested hashes
[2014-04-14 18:51:14 -0400] CPS: pretty sure that's also a hash
[2014-04-14 18:52:22 -0400] vt102: Is there a way for a wrapper recipe to call LWRPs from the cookbook it's wrapping?
[2014-04-14 18:53:06 -0400] CPS: are you confusing the ['key'] notation for array indexing?
[2014-04-14 18:53:58 -0400] brimstone: CPS: more, i'm disappointed that chef merges attributes as an entire hash of attributes instead of each attribute individually
[2014-04-14 18:57:23 -0400] CPS: chef does a lot of weird things. you can definitely override things if you understand the order it does it in
[2014-04-14 18:58:30 -0400] brimstone: is there a way to change node[attribute] from inside a recipe?
[2014-04-14 18:58:44 -0400] brimstone: to then be used later on in the same recipe?
[2014-04-14 18:59:00 -0400] CPS: probably. i haven't done it. have you tried setting it and seeing if it takes?
[2014-04-14 18:59:26 -0400] brimstone: i thought i got an error before doing that
[2014-04-14 18:59:34 -0400] brimstone: but i'm getting unexpected results now
[2014-04-14 19:00:23 -0400] brimstone: ah, yup, "Node attributes are read-only when you do not specify which precedence level to set."
[2014-04-14 19:01:07 -0400] brimstone: setting node.default[attribute] seems to do it
[2014-04-14 19:01:17 -0400] brimstone: thanks CPS, prometheanfire
[2014-04-14 19:01:28 -0400] CPS: http://www.getchef.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2014-04-14 19:01:42 -0400] CPS: news for me too
[2014-04-14 19:03:56 -0400] ccope: i'm trying to run chef-shell on a node in client mode, but it seems to be going straight into the execution phase and failing before i get a shell. is it possible to hook in after the compilation phase?
[2014-04-14 19:07:09 -0400] Nukepuppy: you need breaks in your code i believe
[2014-04-14 19:07:16 -0400] Nukepuppy: @ccope
[2014-04-14 19:10:07 -0400] bricker: Does a data bag item's ID have to be unique across all databags?
[2014-04-14 19:12:02 -0400] bmhatfield: bricker: pretty sure it only has to be unique within the databag its in
[2014-04-14 19:13:45 -0400] jhunter: what's the easiest way to build attributes off each other?
[2014-04-14 19:13:49 -0400] jhunter: ie: this doesn't work
[2014-04-14 19:13:49 -0400] jhunter: node.default['kvm'['foo'] = 'hello world!'
[2014-04-14 19:13:50 -0400] jhunter: node.default['kvm']['bar'] = node['kvm']['foo']
[2014-04-14 19:14:15 -0400] jhunter: oh wait.. typo. it might. :D
[2014-04-14 19:14:50 -0400] bricker: bmhatfield: thanks
[2014-04-14 19:15:20 -0400] jhunter: yeah, still no workie
[2014-04-14 19:16:45 -0400] CPS: what's the error jhunter ?
[2014-04-14 19:17:15 -0400] jhunter: oh wait.. another typo, sheesh
[2014-04-14 19:17:17 -0400] jhunter: haaaang on
[2014-04-14 19:22:37 -0400] ccope: @Nukepuppy thanks. i wish i could easily do that in production... :-(
[2014-04-14 19:28:20 -0400] dbalatero: I'd like to be able to provision a machine locally with Vagrant, but also provision a machine on BlueBox for staging/production and have the same recipes/run lists/etc happen. What's the best way to accomplish this? test-kitchen?
[2014-04-14 19:29:35 -0400] sarkis: hey guys, with the "berskfile way" do you still specify a run_list in each node/hostname.json
[2014-04-14 19:29:58 -0400] sarkis: i have a few different servers, wondering how to get rid of roles, i think thats the way ^^^
[2014-04-14 19:30:55 -0400] sarkis: sorry i meant berkshelf way
[2014-04-14 19:31:26 -0400] mivok: Hi, in a recipe, is there a way to return all resources of a given type? I can get a single resource with resources(:template => "foo.txt"), but I'm trying to find a way to get a list of all template resources (for example).
[2014-04-14 19:31:33 -0400] Flexa: sarkis, shift it down into recipe
[2014-04-14 19:32:01 -0400] sarkis: Flexa: i'm confused if i do that, what will tell my node you use this recipe
[2014-04-14 19:32:09 -0400] Flexa: I must say, I agree with a post from lusis regarding berkshelf. It should be baked into chef, rather than pushed on users.
[2014-04-14 19:32:28 -0400] mivok: sarkis: you can specify a run list on the command line with -o (I'm assuming you're using chef-solo), which will let you get rid of node/foo.json files.
[2014-04-14 19:32:35 -0400] sarkis: yes chef-solo
[2014-04-14 19:32:40 -0400] sarkis: i use knife-solo
[2014-04-14 19:32:59 -0400] mivok: e.g. chef-solo -o 'recipe[node-foo]'
[2014-04-14 19:33:00 -0400] Flexa: sarkis, you essentially create a recipe, rather than a role
[2014-04-14 19:33:01 -0400] sarkis: what is the downside of having node.json?
[2014-04-14 19:33:04 -0400] Flexa: which pulls in other recipes
[2014-04-14 19:33:19 -0400] Flexa: and you assign that recipe to a node (run_list)
[2014-04-14 19:33:30 -0400] Flexa: using thin roles works well
[2014-04-14 19:34:15 -0400] Flexa: plus I don't get why every cookbook needs it's own repo.....maybe just as I haven't felt the pain yet.
[2014-04-14 19:34:19 -0400] sarkis: mivok: i want to make it easy for other devs... don't want them to have to say -o 'recipe[db]'
[2014-04-14 19:34:46 -0400] sarkis: or remember which node needs which recipe
[2014-04-14 19:34:56 -0400] Flexa: sarkis, and thats my problem. Other users aren't ruby devs or real chefs. I want it to be easy for them
[2014-04-14 19:34:59 -0400] mivok: it might be worth sticking with the node files. I'm not too familiar with knife-solo so I don't know how it does things.
[2014-04-14 19:35:20 -0400] sarkis: ya ill try with just node files and getting rid of roles first
[2014-04-14 19:35:23 -0400] sarkis: thanks guys
[2014-04-14 19:35:32 -0400] mivok: when I did chef-solo stuff before I had a wrapper that did chef-solo -o "role[node-$HOSTNAME]" (or in your case you'd skip straight to using a recipe instead of a role).
[2014-04-14 19:37:11 -0400] vox_: hi, could somebody point to cookbook to manage mail aliases and sendmail relayhost?
[2014-04-14 19:48:11 -0400] jperry: ohai Chefs!
[2014-04-14 19:48:27 -0400] jperry: is there any good way to debug a failing resource in a recipe that is using chef-client
[2014-04-14 19:48:56 -0400] cbarraford: jperry sudo chef-shell -z?
[2014-04-14 19:48:58 -0400] jperry: I am trying to use chef-shell but it's not very well documented on how to run that particular recipe and pop open a console
[2014-04-14 19:49:10 -0400] jperry: cbarraford: hey
[2014-04-14 19:49:14 -0400] jperry: is that you chad?
[2014-04-14 19:49:24 -0400] cbarraford: jperry whats up jay!!
[2014-04-14 19:49:31 -0400] jperry: if the chef run is failing running with -z doesn't help
[2014-04-14 19:49:38 -0400] jperry: it bombs out
[2014-04-14 19:49:42 -0400] jperry: and returns you to the console
[2014-04-14 19:50:13 -0400] cbarraford: jperry can you send me a gist of the output?
[2014-04-14 19:50:31 -0400] jperry: it's something in the omnibus_updater cookbook
[2014-04-14 19:50:39 -0400] jperry: for some reason the remote url isn't being set
[2014-04-14 19:50:46 -0400] jperry: the output is not helpful in this situation
[2014-04-14 19:50:59 -0400] jperry: I need to diagnose the objects directly with chef-shell
[2014-04-14 19:51:20 -0400] sarkis: hmm whats the Thorfile for that is generated by berks
[2014-04-14 19:51:25 -0400] sarkis: i've never seen Thor before
[2014-04-14 19:51:41 -0400] jperry: sarkis: thor is just like rake
[2014-04-14 19:51:46 -0400] sarkis: ah ok
[2014-04-14 19:52:01 -0400] jperry: it's gaining in popularity
[2014-04-14 19:57:53 -0400] jperry: cbarraford: I found this which may help: http://mharrytemp.blogspot.com/2012/11/non-destructive-debugging-of-chef.html
[2014-04-14 19:58:15 -0400] jperry: I tried it out on my vagrant box and worked pretty well.  I'll probably find a way to use pry though instead
[2014-04-14 19:59:14 -0400] cbarraford: jperry are you using chef10 still?
[2014-04-14 19:59:33 -0400] bmhatfield: brightcove party whatup
[2014-04-14 20:07:50 -0400] tubbo: has anyone here used Foreman (http://theforeman.org/) with Chef? is it even possible or am i barking up the wrong tree?
[2014-04-14 20:09:56 -0400] gleam: from my research it's possible but not well integrated at the moment
[2014-04-14 20:15:12 -0400] tubbo: gleam: that's cool, do you have any resources that you could share on the matter? i'm not too familiar with the foreman, but a guy i work with who heads the ops team wants to use it and i think it would really help us out
[2014-04-14 20:15:25 -0400] tubbo: we have to build both bare-metal and virtualized deployments...
[2014-04-14 20:17:00 -0400] gleam: i see there's a foreman+chef talk at chefconf this week
[2014-04-14 20:19:13 -0400] gleam: http://projects.theforeman.org/projects/foreman/wiki/Chef-support
[2014-04-14 20:22:22 -0400] tubbo: gleam: interesting...wish i was going :D
[2014-04-14 20:22:26 -0400] tubbo: are they gonna tape the talks?
[2014-04-14 20:22:33 -0400] tubbo: s/tape/record b/c it's the 21st century
[2014-04-14 20:22:33 -0400] Azrael: any chef developers around atm?
[2014-04-14 20:24:28 -0400] mivok: most devs will be heading to chefconf
[2014-04-14 20:26:16 -0400] Azrael: oh ok
[2014-04-14 20:33:08 -0400] sarkis: is there a standard naming for private cookbooks?
[2014-04-14 20:33:10 -0400] sarkis: like _foo
[2014-04-14 20:33:23 -0400] coderanger: sarkis: companyname-foo
[2014-04-14 20:33:41 -0400] sarkis: got it.. thanks
[2014-04-14 20:37:28 -0400] Azrael: coderanger: i'm experiencing a rather aggrivating issue with the chef server.  got any time to help me figure things out?
[2014-04-14 20:37:38 -0400] coderanger: Azrael: I can try, but I board a plain shortly
[2014-04-14 20:37:41 -0400] coderanger: er, plane
[2014-04-14 20:38:24 -0400] Azrael: coderanger: roger
[2014-04-14 20:38:34 -0400] Azrael: coderanger: https://tickets.opscode.com/browse/CHEF-5144
[2014-04-14 20:38:58 -0400] Azrael: coderanger: it seems that when we use our new SSL certificate, erchef and bookshelf are having major troubles
[2014-04-14 20:39:31 -0400] Azrael: coderanger: erchef connects to bookshelf (i think?) via https://chef.ourcompany.com but it encounters problems verifying the SSL certificate
[2014-04-14 20:39:36 -0400] Azrael: "certificate unknown"
[2014-04-14 20:39:49 -0400] Azrael: coderanger: however, if i switch to a self-signed junk cert, things work
[2014-04-14 20:41:43 -0400] coderanger: Azrael: If you do an openssl s_client debug dump, what does it show?
[2014-04-14 20:43:03 -0400] Azrael: coderanger: aka openssl s_client -connect server:443 -debug -dump?
[2014-04-14 20:43:56 -0400] willejs: ohai chefs
[2014-04-14 20:44:31 -0400] Azrael: coderanger: it seems that when we use our new SSL certificate, erchef and bookshelf are having major troubles    Verify return code: 0 (ok)
[2014-04-14 20:44:35 -0400] Azrael: doh
[2014-04-14 20:44:48 -0400] Azrael: coderanger: Verify return code: 0 (ok)
[2014-04-14 20:45:18 -0400] Azrael: coderanger: ruby, python, chrome, s_client are all able to connect w/o issues
[2014-04-14 20:45:23 -0400] coderanger: Azrael: Sorry, can't check the full syntax
[2014-04-14 20:45:26 -0400] Azrael: coderanger: it is just erlang having trouble with the ssl certificate
[2014-04-14 20:47:29 -0400] coderanger: Azrael: It is possible it just isn't setup in a way that the erlang SSL client can use
[2014-04-14 20:47:42 -0400] coderanger: Azrael: It seems unlikely, but it is possible, maybe a SAN thing?
[2014-04-14 20:48:03 -0400] coderanger: Azrael: So a debug trace of the SSL handshake would show the params on the cert
[2014-04-14 20:48:05 -0400] Azrael: coderanger: perhaps, but it was working before
[2014-04-14 20:48:12 -0400] Azrael: coderanger: until we issued a new cert
[2014-04-14 20:48:18 -0400] Azrael: coderanger: the cert is also a wildcard cert
[2014-04-14 20:51:52 -0400] sarkis: so i have an attributes/default.rb, can i override these in the recipe/recipe.rb?
[2014-04-14 20:52:08 -0400] sarkis: at the top of the recipe i'd do default['change']['this'] = to_that?
[2014-04-14 20:54:18 -0400] miwood: node.default[][] - to_that , I believe
[2014-04-14 20:54:21 -0400] miwood: =*
[2014-04-14 20:54:56 -0400] sarkis: i thought default is just a shortcut to node.default?
[2014-04-14 20:55:06 -0400] sarkis: or is that only true in attributes/default.rb?
[2014-04-14 20:58:42 -0400] coderanger: Azrael: As an example: openssl s_client -connect google.com:443 -showcerts </dev/null | openssl x509  -text
[2014-04-14 21:03:57 -0400] sarkis: as an example.. i have attributes to the sudo recipe in attributes/default.rb, then in recipes/default.rb i have include_recipe "sudo", this has attributes set that  need to be applied everywhere..
[2014-04-14 21:04:38 -0400] sarkis: there is a specific server which i need to override a user... so i have recipes/server.rb ... default['authorization']['sudo']['users'] = [ list of users ]
[2014-04-14 21:05:16 -0400] sarkis: but i don't inclue_recipe "sudo" again in recipes/server.rb
[2014-04-14 21:05:22 -0400] sarkis: should i be?
[2014-04-14 21:09:21 -0400] Raymond-Sean: Hey everyone. We're running into a bit of an issue using knife-solo, yum-epel (0.3.4), and yum (2.4.4). When running chef, we're seeing the following: undefined method `baseurl' for Chef::Resource::YumRepository. Has anyone else run into this by chance? For full stack trace see pastebin http://pastebin.com/qD3gqcH9
[2014-04-14 21:15:56 -0400] mivok: Raymond-Sean: it looks like baseurl was added in v3.0.0 of the yum cookbook (yum_repository resource).
[2014-04-14 21:16:44 -0400] mivok: so you'll probably want to upgrade that cookbook (or possibly downgrade the yum-epel cookbook)
[2014-04-14 21:17:23 -0400] Nukepuppy: that cokbook had a lot of breaking changes for sure
[2014-04-14 21:17:31 -0400] Nukepuppy: so make sure you catch yourself up on what's needed
[2014-04-14 21:17:37 -0400] Nukepuppy: i did some refactoring recently it wasnt too bad
[2014-04-14 21:17:53 -0400] Nukepuppy: but be careful for sure
[2014-04-14 21:17:57 -0400] sarkis: i think im looking at this attributes deal all wrong :)
[2014-04-14 21:18:09 -0400] ohadlevy: tubbo: http://video.fosdem.org/2014/H1309_Van_Rijn/Saturday/Foreman_integration_with_Chef_and_others.webm
[2014-04-14 21:21:16 -0400] Raymond-Sean: mivok: You are a gentleman and a scholar. That seems to have worked. Appreciate it
[2014-04-14 21:28:35 -0400] werdnativ: Is there a better way to do this than with the execute resources? https://gist.github.com/avit/61c16a46dfa84a14bcb6
[2014-04-14 21:30:26 -0400] juliancdunn: werdnativ: no
[2014-04-14 21:30:40 -0400] werdnativ: thanks, just checking. :)
[2014-04-14 21:36:24 -0400] miwood: sarkis: if the attribute is for the sudo recipe, then it has to be run after the attribute is changed
[2014-04-14 21:37:32 -0400] sarkis: miwood: is it ok that it is included twice?
[2014-04-14 21:38:43 -0400] miwood: sarkis: it will work fine, although you may want to run your server recipe first and then default
[2014-04-14 21:38:52 -0400] werdnativ: Is there a way to have a post-run hook?
[2014-04-14 21:39:00 -0400] miwood: sarkis: depends on what else is in the recipes
[2014-04-14 21:39:03 -0400] sarkis: i see
[2014-04-14 21:39:13 -0400] sarkis: so go more specific to more vague
[2014-04-14 21:39:19 -0400] sarkis: in the list of recipes?
[2014-04-14 21:39:24 -0400] sarkis: im used to the opposite :P
[2014-04-14 21:40:22 -0400] werdnativ: I'd like to do some cleanup after my chef-run completes successfully. Wondering if there's a way to set something to run last.
[2014-04-14 21:40:50 -0400] shawn_sher: Does anyone wonder why data_bag_item doesn't notice if a DataBagItem is maybe an EncryptedDataBagItem?
[2014-04-14 21:42:12 -0400] miwood: sarkis: depends how you're setting up your run lists, but I would definitely create a dependency in the server recipe still
[2014-04-14 21:43:03 -0400] werdnativ: shawn_sher: I do wonder why we need 2 different interfaces for it too... but I typically only use data bags for the encrypted stuff.
[2014-04-14 21:43:21 -0400] juliancdunn: shawn_sher: probably because data_bags came first, then the encryption was added later
[2014-04-14 21:43:32 -0400] sarkis: how do you setup a dependency? is that with include_recipe?
[2014-04-14 21:43:41 -0400] miwood: correct
[2014-04-14 21:43:47 -0400] juliancdunn: werdnativ: use a report handler?
[2014-04-14 21:44:21 -0400] werdnativ: juliancdunn: thanks, did not know about handlers.
[2014-04-14 21:51:43 -0400] shawn_sher: yeah. I work around it, but it would be easy to autodetect it
[2014-04-14 21:57:36 -0400] sauraus1: Anyone ever try to deploy multiple nginx instances on a single host using runit?
[2014-04-14 21:59:43 -0400] FireBeyond: Can OSX be used as a client with chef-server (not solo)?
[2014-04-14 22:00:09 -0400] jonlives: FireBeyond: you mean can you run chef-client on an OS X machine, talking to a chef server?
[2014-04-14 22:00:22 -0400] FireBeyond: Correct... are there any particular caveats?
[2014-04-14 22:00:24 -0400] jonlives: FireBeyond: yes you can :)
[2014-04-14 22:00:29 -0400] FireBeyond: ty
[2014-04-14 22:00:34 -0400] jonlives: nah os x is fully supported as a client platform :)
[2014-04-14 22:00:53 -0400] jonlives: FireBeyond: we do quite a lot of it: http://codeascraft.com/2014/02/28/etsys-journey-to-continuous-integration-for-mobile-apps/
[2014-04-14 22:01:26 -0400] FireBeyond: Perfect
[2014-04-14 22:09:50 -0400] troyready: I'd say there are some caveats, but nothing that can't be overcome
[2014-04-14 22:10:37 -0400] troyready: i.e. the user resource won't work properly ootb w/ newer os x installs when trying to set passwords
[2014-04-14 22:17:57 -0400] jmreicha: Anybody here a Python pro?  I'm trying to pip install a list of packages from a file using the Python cookbook on the site but am not having any luck.
[2014-04-14 22:19:13 -0400] qsalt: @jmreicha oh man I don't have any experience using the python cookbook, but I do have a good amount of experience with pip.  Are you trying compile from a local source, or install from a wheel?
[2014-04-14 22:20:12 -0400] jmreicha: I have a requirements.txt file with some local stuff but mostly public stuff
[2014-04-14 22:20:18 -0400] jmreicha: qsalt: ^^
[2014-04-14 22:21:38 -0400] jmreicha: qsalt: Would I be able to install the requirements into a virtualenv without using the Python cookbook do you think?
[2014-04-14 22:22:30 -0400] qsalt: I would highly recommend using a virtualenv for installing packages to. So yes you can
[2014-04-14 22:22:39 -0400] qsalt: the problems i've had with local + remote content and pip
[2014-04-14 22:22:58 -0400] qsalt: is depending on the source of the package in your requirements file, pip does not prioritize the local location over the remote one
[2014-04-14 22:23:16 -0400] qsalt: this gave me a lot of headaches in the past when I was installing python packages from github
[2014-04-14 22:24:25 -0400] jmreicha: qsalt:  Ok, thanks.  So what ended up working the best for you?
[2014-04-14 22:25:29 -0400] qsalt: We ended up just building pre-compiled wheels and installing from those.
[2014-04-14 22:25:38 -0400] jmreicha: The Python cookbook has an LWRP for installing packages with pip - http://docs.opscode.com/lwrp_python.html
[2014-04-14 22:25:43 -0400] qsalt: ended up building some custom python scripts that chef would kick off if it saw requirements.txt has changed
[2014-04-14 22:25:49 -0400] jmreicha: But I am stuck getting it to read in my file
[2014-04-14 22:25:50 -0400] mvisich: Hello, Quick question. When i try to upload all cookbooks I am getting this error: Response: Bad checksums! ERROR: The data in your request was invalid. When I upload one at a time it works fine. knife --version Chef: 11.4.2. check sums are not being created in the checksum dir.
[2014-04-14 22:26:53 -0400] qsalt: getting it to read the requirements.txt file?
[2014-04-14 22:27:29 -0400] jmreicha: qsalt: Yes.  Maybe it would be easier to just run a pip install as a shell command instead of trying to use the LWRP?
[2014-04-14 22:31:05 -0400] jmreicha: qsalt: I want to do a "pip install -r requirements.txt" but the python cookbook is confusing.  Would it maybe just be easier to run that command in my virtualenv rather than try to mess around with the pywthon LWRP?
[2014-04-14 22:31:58 -0400] jmreicha: Apologies if I'm not explaining my situation very well
[2014-04-14 22:33:15 -0400] qsalt: @jmreicha: hmm, looking at the LWRP you linked, it looks like you could loop over the requirements.txt file.  Something like this maybe?
[2014-04-14 22:33:16 -0400] qsalt: File.open("/var/requirements.txt", "r") do |pypackag|
[2014-04-14 22:33:16 -0400] qsalt: python_pip pypackage do
[2014-04-14 22:33:17 -0400] qsalt:   virtualenv "/var/virtualenv"
[2014-04-14 22:33:17 -0400] qsalt:   action :install
[2014-04-14 22:33:18 -0400] qsalt: end
[2014-04-14 22:33:18 -0400] qsalt: end
[2014-04-14 22:33:45 -0400] jmreicha: qsalt: ok, thanks man.  I will give it a try
[2014-04-14 22:35:53 -0400] sarkis: hmm, i am getting a Local role_path does not exist
[2014-04-14 22:36:12 -0400] sarkis: after investigating, looks like chef-solo-search needs the role_path?
[2014-04-14 22:36:19 -0400] sarkis: i'm trying to do away with roles..
[2014-04-14 22:50:54 -0400] sarkis: so do i need to tell Berksfile about the "app cookbook" that i am in
[2014-04-14 22:51:06 -0400] sarkis: im getting an error tht the cookbook was not found.
[2014-04-14 22:52:29 -0400] werdnativ: Anyone using the build-essential cookbook, have you seen the error "autoconf has no candidate in the apt-cache" when used with compile_time=true?
[2014-04-14 22:53:34 -0400] bricker: Should something like recipe[nodejs::default] go in a recipe file, or in the node's runlist?
[2014-04-14 22:54:28 -0400] werdnativ: bricker: typically there's more stuff that goes with that, so I'd put it in a "wrapper" recipe.
[2014-04-14 22:54:45 -0400] bricker: werdnativ: thanks
[2014-04-14 23:24:19 -0400] sarkis: werdnativ:  i just got an error with build-essentials what a coinscidence
[2014-04-14 23:25:01 -0400] sarkis:  30>> end.run_action(:run) if node['build_essential']['compiletime']
[2014-04-14 23:25:08 -0400] werdnativ: sarkis: include_recipe 'apt'
[2014-04-14 23:25:09 -0400] werdnativ: resources(execute: 'apt-get-update').run_action(:run)
[2014-04-14 23:25:14 -0400] werdnativ: yeah, that.
[2014-04-14 23:25:24 -0400] sarkis: hmm thats the same issue?
[2014-04-14 23:26:30 -0400] werdnativ: that's my workaround:
[2014-04-14 23:26:31 -0400] werdnativ: load the apt::default recipe, and have it run "apt-get-update" immediately at compile-time. (It won't actually run if it's already been run.)
[2014-04-14 23:28:56 -0400] sarkis: hmm
[2014-04-14 23:29:07 -0400] sarkis: i do include_recipe "apt" and get another error
[2014-04-14 23:29:18 -0400] sarkis: 26>> Chef::Log.debug 'apt is not installed. Apt-specific resources will not be executed.' unless apt_installed?
[2014-04-14 23:35:25 -0400] kersh: Hey all, is this the channel to post questions about using Chef, or is that #learnchef?
[2014-04-14 23:41:45 -0400] juliancdunn: you can post questions here

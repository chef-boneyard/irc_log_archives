[2014-04-30 03:26:40 -0400] darkside_: coderanger: if you are free I have a question, not sure if I found a bug or an enhancement request
[2014-04-30 03:26:55 -0400] coderanger: yo
[2014-04-30 03:27:30 -0400] darkside_: hey, can you review this gist before I send it off to ml or tickets https://gist.github.com/jolexa/55f0d88269a586dde03c
[2014-04-30 03:28:17 -0400] coderanger: darkside_: Sounds like a bug to me, just insufficiently idempotent
[2014-04-30 03:28:28 -0400] coderanger: Look for/file a ticket on tickets.opscode.com
[2014-04-30 03:28:52 -0400] darkside_: thank you, does my research make sense?
[2014-04-30 03:29:05 -0400] coderanger: Yep
[2014-04-30 03:29:23 -0400] darkside_: yay, my first ticket (after searching of course)
[2014-04-30 03:29:30 -0400] coderanger: I mean this would only come up in edge cases like someone enabling the service manually for just one runlevel
[2014-04-30 03:29:39 -0400] coderanger: but it should definitely be fixed :)
[2014-04-30 03:30:35 -0400] darkside_: i'd have to research it some but I got into this situation today. I installed sssd via the package research and it landed in runlevel 2 only. Then I couldn't authenticate after a reboot until chef ran the :start action ;)
[2014-04-30 03:31:16 -0400] darkside_: resource*
[2014-04-30 03:31:45 -0400] darkside_: the important part was no manual interaction was done by me to manage the service
[2014-04-30 03:34:40 -0400] coderanger: I'd believe it
[2014-04-30 04:23:11 -0400] digitalchild: has anyone got a good way to add firewall rules on centos, current solutions ive found seem to replace the entire firewall conf file
[2014-04-30 04:23:47 -0400] Durzo: ferm
[2014-04-30 04:23:54 -0400] Durzo: ferm + chef
[2014-04-30 04:23:55 -0400] Durzo: = win
[2014-04-30 04:24:02 -0400] coderanger: digitalchild: The normal solutions for Chef will almost always work like that
[2014-04-30 04:24:17 -0400] coderanger: digitalchild: Once you are controlling something with chef, it assumes you are controlling all of it
[2014-04-30 04:24:26 -0400] coderanger: otherwise things get veeeeery hard to manage
[2014-04-30 04:25:01 -0400] digitalchild: ok, so how do i handle different recipes with different firewall rules?
[2014-04-30 04:25:20 -0400] digitalchild: and have all the rules stick across recipes
[2014-04-30 04:25:27 -0400] digitalchild: and cookbooks..
[2014-04-30 04:25:47 -0400] digitalchild: also very new to this, so if you've got docs to point me at im happy to rtfm
[2014-04-30 04:26:47 -0400] coderanger: digitalchild: What are you using to manage your firewall now? (raw iptables, ufw, etc)
[2014-04-30 04:26:53 -0400] digitalchild: iptables
[2014-04-30 04:27:22 -0400] digitalchild: could i just use the iptables command line tools to add the rules for each recipe/cookbook
[2014-04-30 04:27:29 -0400] coderanger: https://github.com/opscode-cookbooks/iptables
[2014-04-30 04:27:37 -0400] digitalchild: which is how i currently do it with my mess of scripts
[2014-04-30 04:27:38 -0400] coderanger: That cookbook exposes an LWRP to add/remote individual rules
[2014-04-30 04:28:16 -0400] digitalchild: thanks, ill check that out
[2014-04-30 04:28:39 -0400] coderanger: The ufw cookbook is much nicer, but that might not be an option on centos
[2014-04-30 04:29:05 -0400] digitalchild: yeah im trying to keep this machines as vanila as possible
[2014-04-30 04:31:43 -0400] lrr: coderanger: on the same lines as digitalchild, I'm using chef to manage a base deploy on centos. However, this will be in an openstack infrastructure. Openstack uses heavily iptables for networking functionality, and the rules it setsup are dynamic. Do you have any suggestions on how to make chef + openstack play nice together with firewall rules?
[2014-04-30 04:35:06 -0400] gleam: no reason you need chef to touch iptables at all
[2014-04-30 04:36:13 -0400] lrr: gleam: yes and no, we want to turn off stuff that's not in use, we also have some setups for munin and other monitoring
[2014-04-30 04:36:42 -0400] robawt: lrr: couldn't you make the munin recipes live in that cookbook & only deploy with the munin book?
[2014-04-30 04:37:11 -0400] lrr: robawt: yeah, we do that, except for opening the ports for munin monitoring is in our base recipes
[2014-04-30 04:38:13 -0400] lrr: ?
[2014-04-30 04:39:27 -0400] robawt: coderanger: you mentioned the new chef book from manning the other day.  I preordered it and got the first 2 chapters. so far a great read, it's a bit faster than 'learning chef', thanks for the recommendation
[2014-04-30 04:39:59 -0400] robawt: only down side was you read it, get past the first 2 chapters then shout at the end of the ebook
[2014-04-30 04:40:40 -0400] coderanger: robawt: :-) I should check it out, I read over the some early drafts of the topics but didn't hear about it until the author chatted with me at chefconf
[2014-04-30 04:42:17 -0400] robawt: i think i would recommend newcomers to learning chef personally, but if you have experience with another tool i think chef in action moves quick enough
[2014-04-30 04:50:34 -0400] digitalchild: robawt: which book is this?
[2014-04-30 04:51:00 -0400] robawt: digitalchild: http://www.manning.com/aivaliotis/
[2014-04-30 04:51:06 -0400] robawt: that one *just* hit preorder
[2014-04-30 04:51:15 -0400] robawt: and the preorder of the ebook gets you access to the first 2 chapters
[2014-04-30 04:51:19 -0400] digitalchild: thanks
[2014-04-30 04:51:32 -0400] robawt: http://shop.oreilly.com/product/0636920032397.do
[2014-04-30 04:51:43 -0400] robawt: digitalchild: ^^ learn chef is still early access but more complete
[2014-04-30 04:51:44 -0400] digitalchild: im only a couple of months in around everything else i do, it all makes sense just need a few pointers/direction
[2014-04-30 04:52:06 -0400] robawt: digitalchild: my recommendation is to check out nathen harvey's 'webinar' on learnchef
[2014-04-30 04:52:08 -0400] digitalchild: and still struggling to write stuff from scratch
[2014-04-30 04:52:14 -0400] digitalchild: robawt: finished those last week
[2014-04-30 04:52:25 -0400] robawt: cool digitalchild, keep at it
[2014-04-30 04:52:27 -0400] digitalchild: and they have been taken off the learnchef website
[2014-04-30 04:52:32 -0400] robawt: it's the best way to learn
[2014-04-30 04:52:34 -0400] digitalchild: you click on them and you get a 404 now
[2014-04-30 04:52:45 -0400] robawt: what? we should hitup mr harvey
[2014-04-30 04:52:53 -0400] digitalchild: let me see if its still doing it
[2014-04-30 04:53:16 -0400] digitalchild: seems they have changed it to be screen shot based
[2014-04-30 04:53:18 -0400] robawt: digitalchild: https://learnchef.opscode.com/screencasts/fundi-webinar-week-1/
[2014-04-30 04:53:20 -0400] robawt: works for me
[2014-04-30 04:53:39 -0400] digitalchild: nope, fixed !
[2014-04-30 04:53:43 -0400] digitalchild: thats weird
[2014-04-30 04:53:54 -0400] robawt: digitalchild: just the internet man
[2014-04-30 04:54:06 -0400] robawt: honestly try to write as much by scratch when learning as possible
[2014-04-30 04:54:08 -0400] digitalchild: yer i just went straight to youtube for the last 2
[2014-04-30 04:54:11 -0400] digitalchild: yeah
[2014-04-30 04:54:20 -0400] robawt: it's the best way for me atleast, but a lot of folks recommend it
[2014-04-30 04:54:28 -0400] robawt: that and nicely bug coderanger
[2014-04-30 04:54:30 -0400] digitalchild: its with anything code related
[2014-04-30 04:55:59 -0400] robawt: i agree digitalchild
[2014-04-30 05:51:35 -0400] digitalchild: ive downloaded a few cookbooks from community and some of the erb files say 'autogenerated by chef'
[2014-04-30 05:51:38 -0400] digitalchild: how?
[2014-04-30 05:59:17 -0400] coderanger: digitalchild: Not sure what you mean
[2014-04-30 05:59:39 -0400] coderanger: digitalchild: Its common to include that in templates so that anyone poking around manually knows to not change the file by hand
[2014-04-30 06:03:44 -0400] digitalchild: coderanger: arh, that makes sense. I'm just reading stuff from community to better understand complex recipes
[2014-04-30 06:04:15 -0400] coderanger: digitalchild: From your question it sounded like you presumed the template itself was autogenerated by chef :)
[2014-04-30 06:04:26 -0400] digitalchild: well thats what i thought :)
[2014-04-30 06:05:01 -0400] digitalchild: its quite effective to keep a newbie out of the file
[2014-04-30 06:09:11 -0400] coderanger: digitalchild: Chef is fancy, but not quite that fancy :)
[2014-04-30 06:09:23 -0400] digitalchild: thanks
[2014-04-30 06:09:44 -0400] digitalchild: this year i finally got sick of writing shell scripts and decided time to get some sense into this infrastructure
[2014-04-30 06:10:13 -0400] coderanger: :-)
[2014-04-30 06:10:35 -0400] digitalchild: and puppet hurt my brain
[2014-04-30 06:31:01 -0400] JensOfSweden: Good morning guys
[2014-04-30 06:31:27 -0400] JensOfSweden: I could use some insight in a little problem i have.
[2014-04-30 06:31:33 -0400] JensOfSweden: If anyone is awake =)
[2014-04-30 06:32:15 -0400] coderanger: For a bit longer
[2014-04-30 06:32:27 -0400] coderanger: can't take more cold meds for a while longer >_<
[2014-04-30 06:33:02 -0400] JensOfSweden: Been there, done that. Hard to do anything fun when you got a cold
[2014-04-30 06:34:54 -0400] JensOfSweden: Well, my problem is that we have an openstack env for the devs that has vms on them. When a vm is created it registers with chef as i want to (even doh i want to autoadd runlists on chef-client run). But when the devs remove or redo vms the client/node is not removed from chef server. How is the best way to approach that. Automaticly that is
[2014-04-30 06:43:09 -0400] coderanger: JensOfSweden: https://wiki.openstack.org/wiki/NotificationEventExamples
[2014-04-30 06:43:17 -0400] coderanger: JensOfSweden: There is an internal message bus you can listen on
[2014-04-30 06:46:17 -0400] coderanger: JensOfSweden: Specfically you want https://wiki.openstack.org/wiki/SystemUsageData#compute.instance.delete.start.2F.end:
[2014-04-30 06:46:59 -0400] JensOfSweden: coderanger: So basicly i do a little ruby program to listen and delete node on event. Soooo much haxxor to get this openstack / chef env to look like our live env =)
[2014-04-30 06:47:34 -0400] coderanger: Yep, same way you would do it with SQS on Amazon
[2014-04-30 06:52:33 -0400] JensOfSweden: So next is to build a ruby program that listens to AMQP events and triggers functions on certain event types.
[2014-04-30 06:54:05 -0400] coderanger: yep
[2014-04-30 06:54:45 -0400] JensOfSweden: There are so many things i have done with openstack now its wierd that noone has had these types of problems before and shared there work
[2014-04-30 06:56:32 -0400] coderanger: JensOfSweden: If I had a dollar every time someone said a variation of that to me, I would be set for life
[2014-04-30 06:57:57 -0400] JensOfSweden: coderanger: Still, there should be more work shared with openstack and integration between systems =)
[2014-04-30 09:10:11 -0400] bubu: ohai chefs, I have a base cookbook that has a case node["platform"] conditional to include different recipes depending if the node if windows / ubuntu. On the first chef run on the windows client, it looks like all recipes are running. Is this because on the chef run node attributes aren't set?
[2014-04-30 09:14:14 -0400] double_p: bubu: run 'ohai' on the node and check if your assumptions about the (string) check are correct?
[2014-04-30 09:15:39 -0400] bubu: double_p: I just ran shef-shell and the node is reporting as "windows"
[2014-04-30 09:26:51 -0400] bubu: double_p: i.e. https://gist.github.com/joshmyers/2b95f87de2d6c61f31b6
[2014-04-30 09:27:22 -0400] bubu: The windows box just fell over on the ubuntu recipe...which shouldn't be running on it.
[2014-04-30 09:28:29 -0400] bubu: Any ideas anyone?
[2014-04-30 09:40:41 -0400] double_p: the gist looks ok, must be coming via a different path
[2014-04-30 09:45:22 -0400] bubu: hmm
[2014-04-30 11:24:57 -0400] bubu: Is it possible to have a 'base' cookbook which can be used on multiple OS? If I have a chef base cookbook, which has a case statement in it, when node["platform"] == "ubuntu" include X cookbooks, when node["platform"] == "windows" install Y cookbooks. The base metadata has all the deps, for ubuntu and windows cookbooks. When running the base role on a windows machine though, it's loading and falling over on ubuntu specific recipes (As I'd expect it
[2014-04-30 11:24:57 -0400] bubu: would)
[2014-04-30 11:32:26 -0400] bubu: Anyone? :/
[2014-04-30 12:37:06 -0400] ocholetras: hi guys
[2014-04-30 12:37:24 -0400] ocholetras: chef_client run lines starting with "Recipe: XXX"
[2014-04-30 12:37:31 -0400] ocholetras: are in order of runlist execution?
[2014-04-30 12:38:20 -0400] ocholetras: Because they are appearing on the log on different order from the runlist
[2014-04-30 13:49:43 -0400] gleam: i'm pretty sure they are, but keep in mind that you may have some recipes that depend on others already in your runlist
[2014-04-30 14:08:14 -0400] jperry: anyone know of a script out there to add the "name" attribute to my cookbook metadata files?
[2014-04-30 14:08:16 -0400] jperry: I have about 50
[2014-04-30 14:08:28 -0400] jperry: I could script it up just asking before I put in the effort
[2014-04-30 14:17:01 -0400] savant: is there a way to not log stuff in describe_changes?
[2014-04-30 14:17:07 -0400] savant: it's duplicative of the regular log info
[2014-04-30 14:17:26 -0400] savant: specifically stuff like https://github.com/opscode/chef/blob/master/lib/chef/file_access_control/unix.rb#L51
[2014-04-30 14:34:37 -0400] jbz: so wait.  Is the original LAMP stack mediawiki demo/walkthrough now no longer available?  Irony.  I actually need to stand up a Mediawiki instance.
[2014-04-30 14:39:30 -0400] double_p: mediawiki is a pain :P
[2014-04-30 14:39:48 -0400] jbz: heh
[2014-04-30 14:39:51 -0400] jbz: no argument
[2014-04-30 14:40:11 -0400] double_p: worst RAM eater on planet
[2014-04-30 15:07:11 -0400] Neozonz: Getting an error on initial knife.rb configuration... ERROR: Ohai::Exceptions::DependencyNotFound: Can not find a plugin for dependency os
[2014-04-30 15:07:13 -0400] Neozonz: any ideas?
[2014-04-30 15:32:13 -0400] bhahn: All, having issues getting berkflow to handle self-signed certs. giving me the following: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed
[2014-04-30 15:32:31 -0400] bhahn: even though my .berkshelf ssl_verify : false
[2014-04-30 15:32:52 -0400] bhahn: anyone gotten berkflow up and running?
[2014-04-30 15:33:51 -0400] rayrod2030: bhahn: I am going to try it out today.
[2014-04-30 15:34:06 -0400] rayrod2030: working on my first environment cookbook today in a brand new chef corpus as a test.
[2014-04-30 15:34:29 -0400] bhahn: cool i'm doing the same here trying to simplify our deployment process
[2014-04-30 15:36:35 -0400] Remi-Datadog: Anyone seen that error when running omnibus using Vagrant with a box that was previously provisioned once:
[2014-04-30 15:36:36 -0400] Remi-Datadog: Generating chef JSON and uploading...
[2014-04-30 15:36:36 -0400] Remi-Datadog: Running chef-solo...
[2014-04-30 15:36:37 -0400] Remi-Datadog: /opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find chef (>= 0) amongst [addressable-2.3.6, arr-pm-0.0.9, backports-3.6.0, bundler-1.6.2, cabin-0.6.1, chef-sugar-1.2.6, childprocess-0.5.3, clamp-0.6.3, ffi-1.9.3, fpm-1.0.2, ftw-0.0.39, http_parser.rb-0.5.3, ipaddress-0.8.0, mime-types-1.25.1, mixlib-cli-1.5.0, mixlib-config-2.1.0, mixlib-log-1.6.0, mixlib-shellout-1.4.0, ohai-6.2
[2014-04-30 15:36:37 -0400] Remi-Datadog: from /opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
[2014-04-30 15:36:38 -0400] Remi-Datadog: from /opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
[2014-04-30 15:36:38 -0400] Remi-Datadog: from /usr/bin/chef-solo:22:in `<main>'
[2014-04-30 15:36:39 -0400] Remi-Datadog: Chef never successfully completed! Any errors should be visible in the
[2014-04-30 15:37:07 -0400] Remi-Datadog: it's not happening on first provisioning
[2014-04-30 15:38:00 -0400] geofflan: i'm trying to run chef on amazon's opsworks. can anyone tell me what i need to do to make it update the apache configs for each deploy?
[2014-04-30 15:39:42 -0400] cob: geofflan: http://docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-events.html
[2014-04-30 15:41:03 -0400] geofflan: @cob: I setup a deploy lifecycle event of 'apache2::default' but it's not deploying the changes from the custom cookbook template
[2014-04-30 15:44:23 -0400] cob: geofflan: is this a custom cookbook and recipe you are using? maybe you should write apache2::deploy, configured the way you want it, using whatever template you specify, picking up any opsworks instance data etc, and put that into the custom recipes in the deploy life cycle.
[2014-04-30 16:17:46 -0400] martinisoft: Are there any plans to allow for custom generators for the chef tool in Chef DK?
[2014-04-30 16:18:44 -0400] lewiz: Just discovered https://github.com/riotgames/artifact-cookbook <3
[2014-04-30 16:19:15 -0400] rayrod2030: that's a great cookbook
[2014-04-30 16:21:17 -0400] lewiz: rayrod2030: It certainly looks that way.  I briefly experimented with a dedicated binary git repo for this purpose but quickly came to the conclusion it was a no-go
[2014-04-30 16:21:48 -0400] rayrod2030: use an artifact repository like artifactory or nexus.
[2014-04-30 16:22:00 -0400] rayrod2030: even s3
[2014-04-30 16:22:44 -0400] lewiz: rayrod2030: Exactly why I was impressed with this cookbook.  Initially I'm thinking of going down the plain HTTP route and go from there
[2014-04-30 16:22:50 -0400] rayrod2030: at my last place we were working on a generalized 12-factor cookbook.  It wsa basically rewriting the artifact cookbook with 12-factor app wording.
[2014-04-30 16:23:08 -0400] lewiz: rayrod2030: Are you aware of any other good cookbooks for deploying binary code?
[2014-04-30 16:23:29 -0400] rayrod2030: I feel like artifact covers most use cases.
[2014-04-30 16:23:58 -0400] rayrod2030: I never looked beyond that
[2014-04-30 16:25:13 -0400] lewiz: rayrod2030: Cool, I'm looking forward to giving it a try tomorrow :-)
[2014-04-30 16:57:45 -0400] geofflan: cob: nothing custom is going on other than a small tweak to the template
[2014-04-30 17:01:15 -0400] eherot: Hey Test-kitchen/Serverspec users: How do I make a test run only on a specific platform (e.g. only on Ubuntu 12.04)?
[2014-04-30 17:03:53 -0400] geofflan: eherot: if platform?("ubuntu")
[2014-04-30 17:04:28 -0400] eherot: geofflan: that works inside a serverspec test?
[2014-04-30 17:04:43 -0400] geofflan: oh, idk about serverspec.
[2014-04-30 17:04:50 -0400] eherot: ;-)
[2014-04-30 17:09:22 -0400] eherot: I cannot possibly be the first person that has needed to do this!
[2014-04-30 17:10:47 -0400] someara: eherot https://github.com/opscode-cookbooks/mysql/blob/master/.kitchen.cloud.yml#L183-L188
[2014-04-30 17:11:21 -0400] someara: alternatively, excludes
[2014-04-30 17:13:42 -0400] eherot: someara: totally what I was looking for!
[2014-04-30 17:14:06 -0400] eherot: although, man, verbose.
[2014-04-30 17:16:03 -0400] someara: I tend to be verbose =)
[2014-04-30 17:17:17 -0400] eherot: I didn't mean you personally ;-)  I just meant the method in general.  But it'll work
[2014-04-30 17:27:46 -0400] eherot: someara: is this actually documented somewhere?
[2014-04-30 17:30:31 -0400] someara: no idea. haven't read the docs
[2014-04-30 17:31:06 -0400] someara: cant seem to find it anywhere
[2014-04-30 17:31:14 -0400] eherot: howdid you know that was something you could do?
[2014-04-30 17:32:07 -0400] cob: geofflan: when in doubt, check the server...
[2014-04-30 17:33:12 -0400] cob: geofflan: /opt/aws/opsworks/current/site-cookbooks
[2014-04-30 17:34:34 -0400] geofflan: cob: there is no 'current' folder. just local and releases
[2014-04-30 17:34:52 -0400] cob: current should be a symlink
[2014-04-30 17:35:06 -0400] cob: to one of the releases
[2014-04-30 17:35:23 -0400] cob: you should probably have a 307 release there
[2014-04-30 17:35:28 -0400] geofflan: yes, i do
[2014-04-30 17:35:40 -0400] geofflan: but i cannot cd into the folder
[2014-04-30 17:35:49 -0400] cob: sudo su
[2014-04-30 17:36:12 -0400] geofflan: k, im in
[2014-04-30 17:36:18 -0400] cob: your custom cookbooks are stored in the site-cookbooks directory
[2014-04-30 17:36:19 -0400] geofflan: what should i be looking for?
[2014-04-30 17:36:34 -0400] cob: check whether your changes are in affect
[2014-04-30 17:36:44 -0400] geofflan: they are not
[2014-04-30 17:36:48 -0400] geofflan: hmm...
[2014-04-30 17:37:00 -0400] cob: then run a command to update custom cookbooks on your stack
[2014-04-30 17:37:02 -0400] cob: then check again
[2014-04-30 17:37:24 -0400] geofflan: ahh... was not aware that was there
[2014-04-30 17:40:51 -0400] someara: eherot I've read the source code (I've written plugins)... can you submit a github issue against the docs?
[2014-04-30 17:43:42 -0400] silverline: question: what is a preferred way to do staged rollout of update to a cookbook? More specifically if i want to update only 10% of my production servers with the new cookbook on the first day, 20% on the second day and remaining 70% on the third day.
[2014-04-30 17:46:55 -0400] Otterley: silverline, we use environments for that
[2014-04-30 17:47:08 -0400] Otterley: eg. production_YYYYMMDD with cookbook version pinning
[2014-04-30 17:47:27 -0400] Otterley: then assign your nodes to the various environments
[2014-04-30 17:56:15 -0400] eherot: someara: Totally (sorry, coffee break).  Any other gotchas in that section that I should mention?
[2014-04-30 18:01:12 -0400] silverline:  Otterley, thanks. but in that case, would you not end up creating new environments for every such staged rollout?
[2014-04-30 18:01:22 -0400] Otterley: yes, of course.
[2014-04-30 18:01:36 -0400] silverline: ok
[2014-04-30 18:01:59 -0400] Otterley: it is trivially automatable with some scripts :)
[2014-04-30 18:02:25 -0400] silverline: sure :)
[2014-04-30 18:15:18 -0400] geofflan: cob: i go the custom cookbook onto the server but i can't get the new apache vhost to deploy for the life of me
[2014-04-30 18:15:28 -0400] geofflan: ive run several stack commands and app deploys to no avail.
[2014-04-30 18:17:12 -0400] cob: geofflan: do you see the custom cookbook in site-cookbooks?
[2014-04-30 18:17:21 -0400] eherot: someara: https://github.com/test-kitchen/test-kitchen/issues/421 :-)
[2014-04-30 18:18:30 -0400] someara: thanks!
[2014-04-30 18:19:11 -0400] eherot: someara: someone else also suggested the use of platform[:os] to write conditionals in the serverspec code itself.
[2014-04-30 18:20:18 -0400] someara: ah. depends on what you're trying to accomplish... they includes/excludes directives in the suites will prevent tk from even spinning up the box
[2014-04-30 18:21:10 -0400] someara: s/they/the/
[2014-04-30 18:21:12 -0400] eherot: yeah I can certainly see the need for both.  In my case 99% of my test suite should run fine on both versions, I just need to change a few details depending on the specific platform.
[2014-04-30 18:21:44 -0400] someara: right. I've had to hack around that a few times myself
[2014-04-30 18:22:35 -0400] gyoza: HELLO IRC!
[2014-04-30 18:28:16 -0400] eherot: someara: unfortunately, probably not much use here:
[2014-04-30 18:28:16 -0400] eherot:        Property[:os]: {:os_by_host=>{"localhost"=>{:family=>"Ubuntu", :release=>nil}}, :os=>{:family=>"Ubuntu", :release=>nil}}
[2014-04-30 18:28:22 -0400] eherot: (no version)
[2014-04-30 18:28:38 -0400] anthonyacquanita: any advice on where to put crons?  Thinking of putting all crons in one cookbook.
[2014-04-30 18:29:02 -0400] doomviking: thats what I do
[2014-04-30 18:29:17 -0400] eherot: anthonyacquanita: we usually put them in the application cookbook associated with the job
[2014-04-30 18:29:36 -0400] eherot: use the cron_d resource if you want to avoid accidentally blowing one cookbook's cronjobs away with another cookbook.
[2014-04-30 18:30:11 -0400] anthonyacquanita: eherot: that works well for application defined crons.  I'm having trouble managing the one off's
[2014-04-30 18:30:34 -0400] eherot: anthonyacquanita: what sort of one-offs?
[2014-04-30 18:30:55 -0400] eherot: like "back up the production database?"
[2014-04-30 18:30:56 -0400] anthonyacquanita: where is that cron?  go to my_crons/recpies/host.rb
[2014-04-30 18:32:10 -0400] anthonyacquanita: eherot: a one off to me is a cron that is on just one server for one task
[2014-04-30 18:32:33 -0400] Otterley: that's called a "single point of failure"
[2014-04-30 18:32:38 -0400] eherot: heh
[2014-04-30 18:32:55 -0400] geofflan: cob: yes, i see the custom cookbook
[2014-04-30 18:33:03 -0400] geofflan: and the merged cookbooks folder is correct as well
[2014-04-30 18:33:12 -0400] eherot: if you're really sure that it's not in any way associated with any application, that's the kind of thing we'd probably stick on a worker node with a cookbook called "worker"
[2014-04-30 18:33:36 -0400] Otterley: or put a recipe in the application cookbook that's only run on the node in question
[2014-04-30 18:33:58 -0400] anthonyacquanita: Otterley:  that's a different discussion and more an issue with cron than chef.
[2014-04-30 18:34:02 -0400] eherot: Yeah, Otterley's suggestion is also a good one
[2014-04-30 18:34:54 -0400] Otterley: but from a service reliability perspective, I'd recommend some sort of arbitrator or election process to manage singletons like this
[2014-04-30 18:35:34 -0400] Otterley: we do this with mysql backups - the cron job is run on multiple slaves simultaneously, but only one per replication domain can win the election; the others exit prematurely
[2014-04-30 18:36:23 -0400] eherot: Otterley: We are not that advanced yet :-) But that's a clever solution.
[2014-04-30 18:36:46 -0400] Otterley: we use Redis for that, it's pretty trivial
[2014-04-30 18:37:14 -0400] eherot: trivial is why it's clever
[2014-04-30 18:37:28 -0400] Otterley: https://github.com/kenn/redis-mutex
[2014-04-30 18:37:39 -0400] eherot: thx!
[2014-04-30 18:38:43 -0400] anthonyacquanita: or zookeeper if you have that
[2014-04-30 18:38:57 -0400] Otterley: or ZK, yes
[2014-04-30 18:39:02 -0400] eherot: got that too
[2014-04-30 18:39:29 -0400] eherot: yeah right now AWS is kinda handling our db backups but the need for such a thing will arise in the near future so this is handy to be thinking about
[2014-04-30 18:39:46 -0400] Otterley: https://github.com/zk-ruby/zk
[2014-04-30 18:42:09 -0400] justizin: any have a strategy for allowing people to update their own ssh keys in the users databag? ive had an itch for a while to have some kind of web ui.
[2014-04-30 18:43:03 -0400] eherot: aye we are currently using zk to manage hadoop
[2014-04-30 18:43:35 -0400] cob: geofflan: are you using Berksfile?
[2014-04-30 18:43:55 -0400] geofflan: no. i'm a newb and dont know what berksfile is so i turned it off
[2014-04-30 18:44:15 -0400] eherot: justizin: There may be a more fleshed out answer to this, but Ripley provides a pretty good API for interacting with Chef if you're comfortable crafting the interface.
[2014-04-30 18:44:32 -0400] cob: geofflan: your custom cookbook, is it just a fork of apache2?
[2014-04-30 18:44:55 -0400] justizin: eherot: ripley, eh?
[2014-04-30 18:45:10 -0400] eherot: justizin: yeah it's a gem for programming against Chef
[2014-04-30 18:45:25 -0400] eherot: of course IMHO the Chef Gem itself is not *that* hard to program against
[2014-04-30 18:45:26 -0400] justizin: http://www.tripadvisor.com/ShowUserReviews-g187046-d211966-r197187416-Ripley_Castle_and_Gardens-Harrogate_North_Yorkshire_England.html ?
[2014-04-30 18:45:26 -0400] geofflan: cob: i forked amazon's opsworks example cookbook and then added an apache2 folder that only has the 'web_app.conf.erb' template
[2014-04-30 18:45:27 -0400] justizin: :-P
[2014-04-30 18:45:40 -0400] justizin: eherot: but gawd who wants a web app whose dependency is the chef gem? ;d
[2014-04-30 18:45:41 -0400] eherot: that's the one ;-)
[2014-04-30 18:45:46 -0400] postwait: eherot: I notice you're programming "against" chef instead of "for" chef.
[2014-04-30 18:45:47 -0400] eherot: heheh
[2014-04-30 18:45:58 -0400] postwait: I appreciate your subconscious stance.
[2014-04-30 18:46:02 -0400] eherot: postwait: "With" chef? :-)
[2014-04-30 18:46:29 -0400] postwait: sadly, you a programming "with" ruby.
[2014-04-30 18:46:39 -0400] justizin: im serious this time im writing a curriculum for a class on not naming software things that mean everything else in google!
[2014-04-30 18:47:00 -0400] eherot: justizin: good luck with that.  You are using a tool called Chef.
[2014-04-30 18:47:07 -0400] justizin: i know chef is my favorite example
[2014-04-30 18:47:12 -0400] justizin: chef knife recipe'
[2014-04-30 18:47:14 -0400] justizin: best google search
[2014-04-30 18:47:15 -0400] justizin: heh
[2014-04-30 18:47:25 -0400] eherot: but I'm an idiot, it's called RIDLEY http://rubygems.org/gems/ridley
[2014-04-30 18:47:26 -0400] geofflan: cob: this is the cookbook i forked... https://github.com/amazonwebservices/opsworks-example-cookbooks
[2014-04-30 18:47:35 -0400] geofflan: i removed the photoapp and tomcat folders though
[2014-04-30 18:47:39 -0400] eherot: used to be you could put "Opscode" but they fixed that.
[2014-04-30 18:48:35 -0400] cob: geofflan: there you go, you did it wrong. look, you best include apache2 cookbook in a Berkfile, or clone it into custom cookbooks repository, and write your own cookbook to manipulate the apache2 configuration by including the recipes you want in your custom cookbook
[2014-04-30 18:48:44 -0400] coderanger: justizin: I wouldn't use Ridley unless you love celluloid, ChefAPI, PyChef, Chef-js, and jclouds-chef are all good options though
[2014-04-30 18:49:11 -0400] geofflan: cob: any references you can point me to that will walk me through that process?
[2014-04-30 18:49:42 -0400] cob: hihi, man... i've been digging around many references for weeks
[2014-04-30 18:50:11 -0400] cob: and they're all mixed because few people use chef-solo, and even fewer opsworks
[2014-04-30 18:50:37 -0400] geofflan: yeah, i havent found much that gets me going on my own
[2014-04-30 18:51:06 -0400] anthonyacquanita: Look what popped into my feed, rub it in why don't yah... http://www.networkworld.com/community/blog/jumpcloud-just-made-cron-obsolete
[2014-04-30 18:51:14 -0400] cob: if you want to go fast, fork the apache2 cookbook into your custom cookbook repos and just modify the template you want
[2014-04-30 18:51:18 -0400] eherot: coderanger: just curious, can you give me the one sentence version of why it's better to use something like ChefAPI rather than including the chef gem directly and using its internal methods?  I may be slightly ignorant of best practices on this topic.
[2014-04-30 18:51:36 -0400] geofflan: cob: i'll try doing that. thanks for all of your help!
[2014-04-30 18:51:43 -0400] cob: geofflan: then look into using the apache2 cookbook without modifying it
[2014-04-30 18:51:44 -0400] coderanger: eherot: The chef gem APIs are terrible, ChefAPI gives you only what you need
[2014-04-30 18:53:45 -0400] justizin: coderanger: i love all tinfoil hat attempts to save us from threads, but for this purpose, one of those others might be more practical. ;) thanks!
[2014-04-30 18:53:50 -0400] eherot: coderanger: Do you know if there are any plans to maybe refactor Knife so that it uses ChefAPI itself?  Or is that not something Chef would want to do?
[2014-04-30 18:54:28 -0400] coderanger: eherot: I don't see that happening, mostly because knife already has the large boilerplate you need to use the chef internals effectively
[2014-04-30 18:54:33 -0400] eherot: justizin: For various and multitudinous reasons, I would also suggest that you listen to coderanger instead of me :-)
[2014-04-30 18:55:43 -0400] eherot: Interesting.  Yeah I just ask 'cause we wrote a bunch of tools before ChefAPI and Ridley were really available and so we mostly wrote them "against" the Chef gem directly.  Some parts were easier than others, heh.
[2014-04-30 18:56:14 -0400] eherot: certainly the fact that you have to include the entire chef and all of its dozens of dependencies is not super appealing.
[2014-04-30 18:58:24 -0400] freezey: eherot: there are a few fundamental issues with the way these things work but hey why not
[2014-04-30 18:58:50 -0400] freezey: lots of jumping through hoops
[2014-04-30 18:59:10 -0400] freezey: eherot: you could always create a method that calls the Chef::REST.new directly
[2014-04-30 18:59:13 -0400] freezey: but yeah
[2014-04-30 19:00:42 -0400] coderanger: There is an eternal battle between HTTP-oriented clients and object-oriented clients
[2014-04-30 19:00:46 -0400] coderanger: both have their uses
[2014-04-30 19:00:59 -0400] eherot: freezey: Yeah as long as I was using it for one-off tasks of relative simplicity (e.g. Chef::Node.list) and not trying to do any kind of even remotely complex credentials management, it basically worked
[2014-04-30 19:01:03 -0400] btm: @chef code review: join: bit.ly/1iJsf0D watch: bit.ly/1iJsg4C
[2014-04-30 19:01:09 -0400] coderanger: REST is supposed to naturally map to objects, but its only kinda sorta sometimes
[2014-04-30 19:01:11 -0400] eherot: was good for writing scripts I intend to run on my own machine
[2014-04-30 19:01:21 -0400] freezey: yeah makes sense
[2014-04-30 19:01:24 -0400] eherot: webapps, prolly not so much (but I haven't tried that yet).
[2014-04-30 19:03:22 -0400] keich: sethvargo: Hey, do you have a minute to talk about omnibus and chef-solo provisioning ?
[2014-04-30 19:03:38 -0400] keich: chef-solo provisioning is failing on 2nd provision
[2014-04-30 19:03:59 -0400] keich: on /opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find chef (>= 0) a
[2014-04-30 19:04:19 -0400] keich: it's working fine on 1st provisioning though
[2014-04-30 19:05:59 -0400] sethvargo: You are installing a Ruby and then mucking with the path
[2014-04-30 19:06:17 -0400] sethvargo: So, during the next run, chef can't be found
[2014-04-30 19:09:48 -0400] keich: Well it's omnibus which is installing ruby
[2014-04-30 19:11:33 -0400] sethvargo: @keich right... But what is your converge doing?
[2014-04-30 19:11:47 -0400] sethvargo: I'm willing to be that it's installing a Ruby and/or changing the $PATH
[2014-04-30 19:29:59 -0400] keich: sethvargo: I'm having the same issue where the only provisioning done is that: https://gist.github.com/remh/1c84ca16c67f0c0073a9
[2014-04-30 19:30:22 -0400] keich: on a fresh centos5-i386 box from bento
[2014-04-30 19:36:09 -0400] sethvargo: What version of omnibus cookbook?
[2014-04-30 19:36:10 -0400] keich: sethvargo: I added a few more details into the gist: https://gist.github.com/remh/1c84ca16c67f0c0073a9
[2014-04-30 19:36:13 -0400] keich: 2.0.2
[2014-04-30 19:37:03 -0400] sethvargo: What user are you provisioning as?
[2014-04-30 19:37:10 -0400] sethvargo: Because the omnibus cookbook manages the omnibus user entirely
[2014-04-30 19:37:13 -0400] sethvargo: Which is vagrant in your case
[2014-04-30 19:37:19 -0400] sethvargo: cat /home/vagrant/.bashrc.d/omnibus-path.sh
[2014-04-30 19:38:36 -0400] keich: gist updated: https://gist.github.com/remh/1c84ca16c67f0c0073a9
[2014-04-30 19:39:22 -0400] sethvargo: @keich remember when I said it was updating your $PATH and you swore it wasn't? :)
[2014-04-30 19:39:35 -0400] sethvargo: Also, please note the comment about that statement
[2014-04-30 19:41:18 -0400] keich: I mean, the issue is in the omnibus-cookbook then.. Not in any 3rd party cookbook or script :)
[2014-04-30 19:44:18 -0400] keich: unless i'm missing something
[2014-04-30 19:47:45 -0400] sauraus: Hi Channel anyone tried to use the Jenkins_slave_ssh provider recently?
[2014-04-30 19:48:03 -0400] sauraus: I am having trouble with the LWRP actually accepting my attribute overrides for the Jenkins master host
[2014-04-30 19:50:36 -0400] keich: sethvargo: what do you think is the best workaround ?
[2014-04-30 19:51:53 -0400] coderanger: sauraus: Which jenkins cookbook are you using
[2014-04-30 19:53:02 -0400] sethvargo: @keich it's not though. I use that cookbook on a daily basis. That's why we removed the vagrant stuff in favor of test kitchen
[2014-04-30 19:58:22 -0400] sauraus: @coderanger https://github.com/opscode-cookbooks/jenkins
[2014-04-30 19:58:30 -0400] sauraus: Here is the funky output that I get:
[2014-04-30 19:59:02 -0400] sauraus: HOST: http://myhostname.xxxx.xxx however ENDPOINT: http://localhost:8080 has the default attr values
[2014-04-30 19:59:35 -0400] keich: sethvargo: Thanks for the info, do you know if there's a public working example that I can see on how this is supposed to work?
[2014-04-30 19:59:55 -0400] sethvargo: @sauraus you'll probably want to ping @schisamo about that
[2014-04-30 20:00:10 -0400] sethvargo: @keich omnibus-chef and chefdk
[2014-04-30 20:02:27 -0400] schisamo: sauraus: what version of the jenkins cookboook are you using? we fixed a bunch of stuff recently (still need to get a new version pushed to community site).
[2014-04-30 20:02:47 -0400] helfire: when reading in a version for my cookbook i can get it, but dont know how to pass it to the 'version ' in the metadata.rb. https://gist.github.com/erichelgeson/9d7816c0df2d5456f91d
[2014-04-30 20:02:49 -0400] sauraus: Ah it's the community site version, I can try grabbing the git #head
[2014-04-30 20:03:04 -0400] schisamo: sauraus: yeah do that for sanities sake.
[2014-04-30 20:03:21 -0400] sauraus: The issue I see is that ['jenkins']['master']['endpoint'] is not updated if I set my own ['jenkins']['master']['host']
[2014-04-30 20:04:58 -0400] sauraus: The problem still persists
[2014-04-30 20:05:04 -0400] keich: sethvargo: Thanks, I can't find anything related to that in https://github.com/opscode/omnibus-chef though. As far as I can see it's still using Vagrant..
[2014-04-30 20:05:07 -0400] sauraus: Let me put a gist together
[2014-04-30 20:05:49 -0400] sethvargo: @sauraus https://github.com/opscode-cookbooks/jenkins/commit/39e63ef641e0b2b03b68ce1ac1308b5598b668b4
[2014-04-30 20:06:14 -0400] sauraus: Ah yes that's the one :)
[2014-04-30 20:15:19 -0400] mondo: Is anyone using separate git repos for each cookbook?  How do handle cloning all of your cookbooks to your workstation?  Do you maintain a script to do it?  Is there a way to pull changes to all repos at once?  Sorry I'm kind of git noob.
[2014-04-30 20:15:45 -0400] jchauncey: mondo: most people are probably doing that using berkshelf to manage cookbook dependencies
[2014-04-30 20:15:54 -0400] jchauncey: mondo: but there is probably no reason to have all your cookbooks locally
[2014-04-30 20:16:14 -0400] helfire: thats what i do, then just override my berks file if i need to work on a local copy for a while
[2014-04-30 20:16:23 -0400] jchauncey: helfire: yar
[2014-04-30 20:16:44 -0400] jchauncey: helfire: or just point it to the git location =)
[2014-04-30 20:17:08 -0400] mondo: I haven't tried to implement Berkshelf yet.  We're deploying Stash so obviously we'd get a lot more out of it as far as Chef is concerned if we had separate repos for each cookbook
[2014-04-30 20:17:16 -0400] sauraus: So that doesn't work for me :(
[2014-04-30 20:17:51 -0400] sethvargo: @sauraus what do you mean? That's a commit to the core cookbook that hasn't been released yet
[2014-04-30 20:18:47 -0400] sauraus: I can see the cookbook code when I vagrant ssh, however endpoint is still pointing at localhost:8080 when I execute
[2014-04-30 20:19:55 -0400] svparijs: Hey guys I've been trying to fix this error but maybe you guys can help, I'm starting vagrant but I keep getting: no such file to load -- chef/resource/lwrp_base
[2014-04-30 20:19:58 -0400] svparijs: any ideas?
[2014-04-30 20:21:04 -0400] eherot: Anyone know how I can use a custom/homegrown/forked/non-rubygems gem with busser? (e.g. my own fork of serverspec/specinfra)?
[2014-04-30 20:22:54 -0400] sauraus: Here is my wrapper cookbook in a nutshell: https://gist.github.com/Sauraus/44084c98dbaa6d7a0ff9
[2014-04-30 20:30:53 -0400] sauraus: @schisamo & @sethvargo please leave a comment on the gist as I need to logoff now when you get a chance regarding the endpoint in the jenkins recipe
[2014-04-30 20:30:55 -0400] sauraus: thanks
[2014-04-30 20:31:50 -0400] keich: sethvargo: could you point me to an example of use of test kitchen to build omnibus projects please ? from what i see omnibus-chef is using Vagrant the same way i am..
[2014-04-30 20:35:20 -0400] keich: it's also using version 1.2.2 of the omnibus cookbook
[2014-04-30 20:35:20 -0400] keich: https://github.com/opscode/omnibus-chef/blob/master/Berksfile.lock
[2014-04-30 20:39:09 -0400] rburton-: Anyone have experience with the nginx cookbook + passenger? I wanted to see how I point it to a rails application
[2014-04-30 20:52:55 -0400] docwhat: sethvargo:  Should chef-sugar's include_recipes? use 'node.recipes', not 'node.run_list'?
[2014-04-30 20:53:37 -0400] sethvargo: @docwhat node.recipes is deprecated, I believe
[2014-04-30 20:53:48 -0400] sethvargo: It might want to inspect the run_context, for future include_recipes
[2014-04-30 20:53:57 -0400] docwhat: sethvargo: oh? What I really want is run_list  + everything 'include_recipe'd
[2014-04-30 20:54:11 -0400] docwhat: sethvargo: Should I file a bug?
[2014-04-30 20:54:20 -0400] sethvargo: You should file a PR :)
[2014-04-30 20:54:24 -0400] sethvargo: Are you in the office?
[2014-04-30 20:54:28 -0400] docwhat: Hah.
[2014-04-30 20:54:29 -0400] docwhat: yes.
[2014-04-30 20:55:11 -0400] sethvargo: @docwhat sethvargo is ~2000ft from the office
[2014-04-30 20:56:01 -0400] docwhat: I'm in the office.... for a little more.  Then I go home and play Spiderman 2.
[2014-04-30 20:56:35 -0400] docwhat: from the cartoon Klodike Kat; "Savoir Faire is everywhere" <-- New nickname for sethvargo?
[2014-04-30 20:57:06 -0400] failshell: i always thought sethvargo was opscode's hubot name since he's everywhere
[2014-04-30 20:57:48 -0400] sethvargo: @docwhat lol. Did you register for DoD Pittsburgh?
[2014-04-30 20:57:56 -0400] sethvargo: @failshell I'm a real person
[2014-04-30 20:58:01 -0400] sethvargo: But I generally don't pay attention to IRc
[2014-04-30 20:58:28 -0400] docwhat: sethvargo: of course!
[2014-04-30 20:58:42 -0400] sethvargo: Have you registered yet? Tickets go up tomorrow :)
[2014-04-30 20:58:44 -0400] docwhat: sethvargo: It looks like node.recipe? makes includes_recipe? obsolete...
[2014-04-30 20:58:46 -0400] docwhat: https://github.com/opscode/chef/blob/e85f791ece68e43053acfe44a032687958127c32/lib/chef/node.rb#L247
[2014-04-30 20:59:19 -0400] sethvargo: Cool beans. I can just call that :)
[2014-04-30 20:59:35 -0400] sethvargo: That still only exists on the node object
[2014-04-30 20:59:39 -0400] sethvargo: So with role?
[2014-04-30 20:59:42 -0400] sethvargo: Which I will now steal
[2014-04-30 21:01:09 -0400] coderanger: sethvargo: Deprecated?
[2014-04-30 21:01:54 -0400] coderanger: sethvargo: node.recipes is an attr access, like node['recipes'], I'm not aware of that being deprecated :)
[2014-04-30 21:02:25 -0400] docwhat: I don't think 'recipes' is deprecated, but it has changed massively in how it is calculated. It used to be a stupid (and inaccurate looking) method. It is now doing something more intelligent.
[2014-04-30 21:02:33 -0400] sethvargo: @docwhat https://github.com/sethvargo/chef-sugar/commit/845484f4543d874716331253067e800472355fe9
[2014-04-30 21:02:34 -0400] docwhat: At least the source doesn't say anything.
[2014-04-30 21:02:53 -0400] sethvargo: @coderanger I'm thinking of the run context sutt
[2014-04-30 21:03:19 -0400] coderanger: yes, node['recipes'] now takes include_recipe in to account
[2014-04-30 21:03:26 -0400] coderanger: previously it was just the expanded run list
[2014-04-30 21:03:33 -0400] coderanger: sethvargo: Gotcha :)
[2014-04-30 21:03:42 -0400] coderanger: Worth noting that should never call it node.recipes
[2014-04-30 21:03:51 -0400] coderanger: since that fallback syntax needs to dieeeeee
[2014-04-30 21:03:54 -0400] rburton-: coderanger any experience with nginx+passenger and a Rails application. I'm trying to see what's requires after nginx+passenger is installed. Not seeing it in the docs so looking around now
[2014-04-30 21:04:22 -0400] rburton-: By default, it doesn't add passenger_root or passenger_enabled
[2014-04-30 21:06:16 -0400] rburton-: I suspect I'll have to add a template and include that template in the nginx.conf
[2014-04-30 21:12:11 -0400] coderanger: rburton-: Sorry, I've never used passenger
[2014-04-30 21:12:34 -0400] rburton-: Okay, I think I may have it. I wanted to see if you had experienc
[2014-04-30 21:30:06 -0400] brendan`: rburton, you'll likely need to add some config settings to nginx or the vhost declaration
[2014-04-30 21:30:26 -0400] brendan`: i'm currently using puppet, soon to be chef when i start my new job, but had to do similar steps for apache
[2014-04-30 21:30:50 -0400] brendan`: and.... nevermind since you've left the chan
[2014-04-30 21:35:20 -0400] drywheat: so, vagrant-chef-zero is completely busted when trying to use Berkshelf 3 and vagrant
[2014-04-30 21:35:28 -0400] drywheat: has anyone managed to get that working at all?
[2014-04-30 21:41:27 -0400] coredump: what's the difference between the stuff on the /resources dir on a cookbook and the stuff on /providers ?
[2014-04-30 21:43:06 -0400] coderanger: coredump: Each chef resource has two parts
[2014-04-30 21:43:15 -0400] coderanger: the resource itself is just a bundle of data
[2014-04-30 21:43:23 -0400] coderanger: the provider is what changes the system
[2014-04-30 21:43:54 -0400] coderanger: And a single resource can have multiple providers, like the package resource has piles of providers, one for each platform
[2014-04-30 21:45:51 -0400] coredump: so /resource holds like attributes to be used by providers, did I get it right?
[2014-04-30 21:47:52 -0400] andyshinn: is there a reason environment default attributes wouldn't get applied to a node in the same environment?
[2014-04-30 21:48:45 -0400] andyshinn: i am trying to do something seemingly simple in hosted Chef, create an environment, set some default attributes on that environment, set a node to use that environment, and the node attribute list doesn't contain those in the environment
[2014-04-30 21:48:52 -0400] andyshinn: what am i missing?
[2014-04-30 21:53:20 -0400] coderanger: coredump: Yeah
[2014-04-30 21:53:40 -0400] coderanger: coredump: resources supply the nouns, providers supply the verbs
[2014-04-30 21:54:22 -0400] coderanger: andyshinn: In the run, log node.chef_environment
[2014-04-30 21:54:27 -0400] coderanger: to make sure the node is really in that env
[2014-04-30 21:54:50 -0400] coderanger: and you can confirm the env is correct on the server via the web ui or knife environment show
[2014-04-30 21:55:14 -0400] andyshinn: yea, both knife environment and knife node show have the correct environment and settings
[2014-04-30 21:55:54 -0400] coderanger: andyshinn: okay, if you go to http://www.getchef.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/ and scroll down to Debugging
[2014-04-30 21:56:05 -0400] coderanger: you can see how to log a debug trace within the client
[2014-04-30 21:57:16 -0400] andyshinn: ah, that is helpful, i'll create a quick debug recipe with that to see where it might be overridden (assuming it is)
[2014-04-30 22:14:39 -0400] andyshinn: hmm, hosted chef must be slow to update attributes... it seems to be working fine now after making that debug recipe...
[2014-04-30 22:16:42 -0400] coderanger: andyshinn: Attributes are assembled on the client, so :-/
[2014-04-30 22:17:23 -0400] andyshinn: but i wonder if there is a delay from me input them into the web interface to the time the server actually starts serving them?
[2014-04-30 22:19:30 -0400] coderanger: No, the web UI accesses the data using the same APIs as the client
[2014-04-30 22:19:51 -0400] coderanger: as does knife
[2014-04-30 22:24:52 -0400] drywheat: when creating a new LWRP, do i have to set `new_resource.updated_by_last_action(true)', and why is it important?
[2014-04-30 22:28:38 -0400] sn0wb1rd: drywheat: The `new_resource.updated_by_last_action(true)` is used to send notifications to other resources that are subscribed to the LWRP you are creating.
[2014-04-30 22:28:38 -0400] coderanger: drywheat: That is what makes notifications trigger
[2014-04-30 22:29:46 -0400] drywheat: got it. it seems like that is something every LWRP should implement in order to make notifications reliable
[2014-04-30 22:32:04 -0400] coderanger: drywheat: Yes
[2014-04-30 22:35:28 -0400] drywheat: coderanger: thx
[2014-04-30 22:36:07 -0400] coderanger: drywheat: If you are using internal resources you can use_inline_resources or poise's notifying_block to automate this
[2014-04-30 22:37:09 -0400] drywheat: great tip! thank you.
[2014-04-30 23:11:33 -0400] dstynchu_: Does anyone know how I can set up Vagrant init to pre-populate the Vagrantfile with my Chef server details?
[2014-04-30 23:14:32 -0400] coderanger: dstynchu_: Not sure I know of a way, using vagrant or TK with chef-server is not very common
[2014-04-30 23:40:25 -0400] hailwood: Hey guys, in a chef template if a how do we set a default value if a parameter does not exist (note that in this case the parameters value may be 0). Would <%= @database.has_key? 'database' ? @database[:database] : 0 %> work?
[2014-04-30 23:42:20 -0400] hailwood: *variable not parameter
[2014-04-30 23:43:01 -0400] digitalchild: i think you just need to check the ruby syntax for the if/else stuff hailwood
[2014-04-30 23:43:56 -0400] digitalchild: hailwood: http://natashatherobot.com/ruby-shorthands-if-then-else/
[2014-04-30 23:47:54 -0400] hailwood: digitalchild: yeah, as far as I can tell that's what I am doing, the ternary operator short hand, but I don't really know ruby so I have no idea if my has_key check is correct lol
[2014-04-30 23:49:38 -0400] digitalchild: hailwood: arh, yes im in the same boat, currently google coding ruby :/
[2014-04-30 23:50:04 -0400] hailwood: digitalchild: haha yes, I'm way out of my depth here
[2014-04-30 23:50:17 -0400] digitalchild: there are some good basic ruby tuts online that will help
[2014-04-30 23:50:28 -0400] digitalchild: for me reading the source code of existing cookbooks has helped alot
[2014-04-30 23:51:59 -0400] digitalchild: curses! the 2 learn chef books i was recommended don't come out till sept and fall next year!
[2014-04-30 23:54:20 -0400] hailwood: digitalchild: Oh looks like I can get away with @database.fetch? :database, 0
[2014-04-30 23:54:38 -0400] hailwood: er ... <%= @redis.fetch? :database, 0 %>
[2014-04-30 23:55:31 -0400] digitalchild: that looks 'correct' heh
[2014-04-30 23:55:50 -0400] digitalchild: then again ive been programming ruby for about 2 weeks after doing all the video tutorials

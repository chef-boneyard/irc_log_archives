[2014-04-15 00:09:11 -0400] werdnativ: sarkis: make sure you put depends 'apt' in your metadata.rb?
[2014-04-15 02:11:06 -0400] maplebed: I'm having gem version trouble with chefspec and foodcritic requiring conflicting versions of yajl-ruby. Any suggestions? (crosspost from #chefspec b/c that channel's quiet) https://gist.github.com/maplebed/10696360
[2014-04-15 02:19:30 -0400] maplebed: fixed with https://gist.github.com/maplebed/10696360.  Ugh.  So many versions!
[2014-04-15 02:20:34 -0400] hailwood: Hi guys, in this block (https://gist.github.com/anonymous/943ece006ac162bebae1) inside an `only_if do` section it states File.exists?("#{deploy[:deploy_to]}/shared/config") does that mean it will only create that file if the shared/config directory exists?
[2014-04-15 02:47:59 -0400] maplebed: hailwood: yes, that's what it means.
[2014-04-15 02:48:48 -0400] hailwood: maplebed: Sweet, cheers.
[2014-04-15 03:00:08 -0400] hailwood: Hi guys, if "node" refers to this json, https://gist.github.com/anonymous/f50e21b07254d1c4c575 when we do node[:deploy].each do |application, deploy| I get that we are looping over the deploy object in the node, am I correct in my assumption that "application" would be a string containing "simplephp" and deploy would be the object it represents?
[2014-04-15 03:06:09 -0400] comjf: Quick knife question if someone has a minute: When I do knife ec2 server create and pass in --subnet, I do get my private IP inside my VPC, so taht works Great! Problem is I also need a public IP, what is the setting for that?
[2014-04-15 03:06:21 -0400] comjf: so I cna have both a regular AWS address, and my VPC internal address
[2014-04-15 03:22:03 -0400] comjf: I need to leave to catch the metro before it closes, but if someone could answer my question I made a ServerFault post: http://serverfault.com/questions/589021/chefs-knife-ec2-plugin-create-server-inside-vpc-with-public-ip
[2014-04-15 03:40:54 -0400] ProTip: anyone having issues with the new chef windows client?
[2014-04-15 05:15:34 -0400] hailwood: Hi guys, does anyone know why chef cannot find my template? Here is the trace https://gist.github.com/anonymous/858fb362f357c7d3ab13, yet I have site-config.erb in the templates directory beside the recipes directory aka api/recipes/configure.rb and api/templates/site-config.erb
[2014-04-15 07:47:05 -0400] m4rcu5: anyone using the chef_handler cookbook and willing to give me some hints? i keep hitting the file not found. Do i have to manyually copy the handler over to the server or is this handled by the cookbook?
[2014-04-15 08:44:20 -0400] Chriss_: Hi... can somebody help me out with a variable from while loop which I like to use in a template?
[2014-04-15 09:12:11 -0400] pbergsmann: hi @all! ive got a quick question: when describing a dependency in the metadata-file like depends sudo, are these dependencies automatically installed? or is this only a check if a cookbook exists and i still need to include_recipe?
[2014-04-15 09:13:19 -0400] srenatus: pbergsmann: it will be synchronished from the chef server and you'll be able to for example use its LWRPs.  It will not, however, execute/load any of its recipes
[2014-04-15 09:14:24 -0400] pbergsmann: srenatus: okso to be double check: when my cookbook depends on e.g. the sudo-cookbook sudo wont be installed on every node the cookbook is in use
[2014-04-15 09:16:05 -0400] srenatus: pbergsmann: what do you mean by "install"?  It will end up in /var/chef/cookbooks, it will not be converged unless you make it so
[2014-04-15 09:16:14 -0400] srenatus: pbergsmann: ah, the 'sudo' package
[2014-04-15 09:16:43 -0400] srenatus: pbergsmann: it will not be installed just by referencing sudo in a cookbook's  metadata
[2014-04-15 09:17:51 -0400] srenatus: pbergsmann: for that to happen, you also have to include_recipe 'sudo' or add recipe[sudo] to a role
[2014-04-15 09:18:03 -0400] srenatus: pbergsmann: the default cookbook will install sudo: https://github.com/opscode-cookbooks/sudo/blob/master/recipes/default.rb
[2014-04-15 09:19:14 -0400] pbergsmann: srenatus: ok, thanks a lot!
[2014-04-15 10:09:09 -0400] nacx: ohai!
[2014-04-15 10:09:37 -0400] nacx: is there any way to list the installed packages and get them in a variable in a recipe?
[2014-04-15 10:09:54 -0400] nacx: or must it be done just by getting the output of a raw command
[2014-04-15 10:12:58 -0400] zaargy: nacx: what are you trying to achieve?
[2014-04-15 10:13:08 -0400] zaargy: i think you'll have to shell out to something
[2014-04-15 10:13:26 -0400] nacx: i'm trying to do a yum update of cerating packages
[2014-04-15 10:13:31 -0400] nacx: yum allows to do something like:
[2014-04-15 10:13:37 -0400] nacx: yum update prefix*
[2014-04-15 10:13:48 -0400] nacx: but the package resource fails when using the wildcard
[2014-04-15 10:13:58 -0400] nacx: (don't know if there is an elegant way to do that)
[2014-04-15 10:14:44 -0400] nacx: is there a way to update a collection of packages without having to call N times to the package resource?
[2014-04-15 11:57:51 -0400] stix121: can someone explain how test-kitchen can be used instead of vagrant-berkshelf plugin?
[2014-04-15 11:58:18 -0400] Flexa: stix121, you're going to have to do at least a little leg work of your own. RTFM.
[2014-04-15 11:59:13 -0400] Flexa: any specific questions you have, people will stand a better chance of being able to answer them
[2014-04-15 11:59:25 -0400] stix121: flexa: thanks
[2014-04-15 12:41:12 -0400] Flexa: using chef11, after bootstrapping a node and chef-client being run for the first time, should the client exit? I'd have thought the service should still be running daemonized in the background..
[2014-04-15 12:41:47 -0400] Flexa: chef-client with verbose set
[2014-04-15 12:41:52 -0400] Flexa: [2014-04-15T12:35:52+00:00] DEBUG: Sleeping for 1800 seconds
[2014-04-15 12:41:52 -0400] Flexa: [2014-04-15T12:35:52+00:00] DEBUG: Exiting
[2014-04-15 13:35:14 -0400] double_p: hm, somehow java/oracle.rb doesnt do a correct download (likely not using the cookie), rendering the download to be some HTML error page. mhmm.
[2014-04-15 13:50:57 -0400] chriss__: I like to have a part in a config file enabled if it matches a specific role, so I can use exactly the same recipe in two different roles, any idea?
[2014-04-15 13:51:35 -0400] NukePuppy: chris make it a template file
[2014-04-15 13:51:37 -0400] NukePuppy: use conditionals
[2014-04-15 13:52:19 -0400] chriss__: Hmmm.. it is in a template already and working if the prefs are there, from chef-solo, like this:
[2014-04-15 13:52:26 -0400] chriss__: <% if node[:jboss].include? 'weatherjdbc' %>
[2014-04-15 13:52:38 -0400] double_p: chriss__: <% if node.roles.include?("needed_role") %>
[2014-04-15 13:53:09 -0400] chriss__: This sounds cool, double_p!
[2014-04-15 13:53:10 -0400] NukePuppy: chris then you're already kind of on right track.. just seems like you need to figure out the role and what not
[2014-04-15 13:53:30 -0400] double_p: damnit oracle download
[2014-04-15 13:54:29 -0400] chriss__: Yes, it is for a jboss configuration, I need one jdbc connection on one server class, a other connection in a other class of servers. I will play with the <% if node.roles.include?("needed_role") %>
[2014-04-15 13:54:45 -0400] chriss__: So be prepared for more rookie questions. ;)
[2014-04-15 13:55:33 -0400] comjf: Can anyone help answer this question: http://serverfault.com/questions/589021/chefs-knife-ec2-plugin-create-server-inside-vpc-with-public-ip
[2014-04-15 13:59:44 -0400] double_p: comjf: hmm.. http://clarkdave.net/2013/05/creating-ec2-instances-in-an-amazon-vpc-using-chef-and-knife/ and http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AESDG-chapter-instancedata.html (see public-ipv4 meta)
[2014-04-15 14:01:43 -0400] comjf: double_p: looking now, thank you
[2014-04-15 14:08:33 -0400] comjf: double_p: The first link is dealing with the problem of not being able to hit your instance in the VPC. (we dont have that problem, since I am provisioning inside the VPC). My problem is I don't know how to associate a public IP on the server creation phase
[2014-04-15 14:18:14 -0400] double_p: gnah.. cookbook on client too old. never a bad idea[tm] to check the /var/chef/cache :P
[2014-04-15 14:40:04 -0400] Christian1978: Flexa: Ive noticed that behaviour too. Seems to correct itself on a second chef-client run
[2014-04-15 14:46:43 -0400] gswallow: SoI'm toying around with test-kitchen and serverspec, et al, and every time I run kitchen verify, I get different colored text.  Is there a reason for this or a way to turn it off?
[2014-04-15 14:51:47 -0400] CPS: is there a way to disable syntax checking when doing knife upload .?
[2014-04-15 14:54:46 -0400] NukePuppy: CPS doesn't that validate that you're uploading syntax that will at least RUN.. i dont think its doing a lint but a validation of will it even try to execute
[2014-04-15 14:55:36 -0400] NukePuppy: gswallow i think that is in the works but not something being done now.. if you disable color you will get a lot of raw color codes in your screen instead
[2014-04-15 14:55:40 -0400] NukePuppy: and trust me you will be more annoyed.
[2014-04-15 14:56:21 -0400] NukePuppy: https://github.com/test-kitchen/test-kitchen/issues/330
[2014-04-15 14:56:29 -0400] CPS: NukePuppy: the reason i asked is that some obsolete files were included in an upload and they had invalid syntax. i deleted them, but it spooked some people
[2014-04-15 14:57:52 -0400] workmad3: CPS: point out to the spooked people that the validation is a good thing
[2014-04-15 14:58:09 -0400] workmad3: CPS: as it means that it stops you uploading code that will just kill a node
[2014-04-15 14:58:22 -0400] workmad3: (well, not kill a node... but trash the chef runs :) )
[2014-04-15 14:58:23 -0400] CPS: it won't kill a node if nothing ever uses it
[2014-04-15 14:58:32 -0400] CPS: which was the case
[2014-04-15 14:58:33 -0400] NukePuppy: it doesnt know that though ya know
[2014-04-15 14:58:52 -0400] workmad3: CPS: if it wasn't used, why was it there anyway? :)
[2014-04-15 14:59:00 -0400] NukePuppy: and linking that with if something includes the recipe would add some overhead ;p
[2014-04-15 15:10:19 -0400] chriss__: Im using <% if node.roles.include?("be") %> in a template and is not working. :( But the role is existing, the running cookbook comes from the role.
[2014-04-15 15:28:56 -0400] Flexa: Christian1978, but the service isn't running so how do you run a second chef run, manually??? :/
[2014-04-15 15:31:00 -0400] Christian1978: Flexa: :(
[2014-04-15 15:31:04 -0400] Flexa: Christian1978, what version chef-client?
[2014-04-15 15:31:25 -0400] Christian1978: I have a love, hate relationship going with the client daemonized. was considering trying cron mode
[2014-04-15 15:31:44 -0400] Christian1978: Fairly recent. Not 100% sure.
[2014-04-15 15:32:02 -0400] double_p: knife xenserver \o/
[2014-04-15 15:34:03 -0400] Flexa: Christian1978, pros / cons of daemonized service / cron?
[2014-04-15 15:35:41 -0400] Christian1978: Flexa: I havent run in cron mode before but Im hopeful itll work as now minus the weird bootstrapping behaviour you mentioned.
[2014-04-15 15:36:28 -0400] Flexa: Hmm, wasn't a problem on chef 10
[2014-04-15 15:36:39 -0400] Christian1978: Thats interesting.
[2014-04-15 15:42:04 -0400] Flexa: Anybody using chef-client::cron over chef-client::service?
[2014-04-15 15:56:38 -0400] srenatus: Flexa: used to, why?
[2014-04-15 15:56:55 -0400] Flexa: using service now? why you swtich?
[2014-04-15 15:58:08 -0400] srenatus: Flexa: actually, I ended up using cron over service because it was chef-solo and that at this time wasn't properly daemonizable.  not sure what's the case now.  Sorry, pretty unrelated issue.
[2014-04-15 16:05:10 -0400] Flexa: srenatus, np :o)
[2014-04-15 16:13:13 -0400] lurraca: Hi, today when pushing new config to my servers with knife solo I'm getting this error msg: Error executing action `sync` on resource 'git[/opt/rbenv]'
[2014-04-15 16:13:20 -0400] lurraca: any ideas what this might be?
[2014-04-15 16:14:09 -0400] PapaSierra: morning, how do i modify the chef installer to specify a particular version? "curl -L https://www.opscode.com/chef/install.sh | sudo bash"
[2014-04-15 16:19:29 -0400] Flexa: Anyone have any ideas why after bootstrapping a node, after the first chef-client run, the service exits? https://gist.github.com/anonymous/d134d09d0f87502d5066
[2014-04-15 16:32:43 -0400] Neozonz: how can i specify a path including the following node[:deploy][application][:deploy_to]
[2014-04-15 16:33:02 -0400] Neozonz: path "node[:deploy][application][:deploy_to]/blah/blah/"
[2014-04-15 16:33:04 -0400] Neozonz: ?
[2014-04-15 16:33:32 -0400] ev0ldave: path "#{node["deploy"]["application"]["deploy_to"]}/blah/blah"
[2014-04-15 16:34:32 -0400] mhenrixon: is it possible to just sync a specific branch to the latest commit using the git resource?
[2014-04-15 16:34:38 -0400] Neozonz: thank u
[2014-04-15 16:34:44 -0400] mhenrixon: It doesn't seem to pick up the latest changes
[2014-04-15 16:40:34 -0400] ev0ldave1: i assume what you want can't be achieved with the checkout_branch attribute?
[2014-04-15 16:41:20 -0400] kersh: I've got a resource that has a system call in its only_if block. Regardless of whether or not the system call returns true or false, the resource is skipped due to only_if. Can you use a system call in only_IF?
[2014-04-15 16:43:22 -0400] ev0ldave: kersh: yes, you can
[2014-04-15 16:43:53 -0400] ev0ldave: example from one i use:  only_if { File.directory?(wop_config['wopdata']['dir_prefix']) && !system("grep #{wop_config['wopdata']['dir_prefix']} /proc/mounts")}
[2014-04-15 16:43:54 -0400] mhenrixon: ev0ldave unfortunately not no changes are fetched.
[2014-04-15 16:44:54 -0400] ev0ldave: mhenrixon:  and you've tried revision?
[2014-04-15 16:45:27 -0400] mhenrixon: revision works fine but for the testing and staging environments it kind of sucks having to go through releasing a new cookbook version
[2014-04-15 16:46:17 -0400] ev0ldave: have an if then statement to change revision based on something?
[2014-04-15 16:46:20 -0400] ev0ldave: flag, chef environment
[2014-04-15 16:46:48 -0400] mhenrixon: I use an environment was the easiest to update but that means only I in the company can release a new version
[2014-04-15 16:46:51 -0400] ev0ldave: if lab branch=this else branch=that
[2014-04-15 16:46:52 -0400] mhenrixon: I'd like some vacation
[2014-04-15 16:47:24 -0400] double_p:     * No version specified, and no candidate version available for mongo-10gen
[2014-04-15 16:47:25 -0400] double_p: mhmmmm
[2014-04-15 16:48:35 -0400] mhenrixon: ev0ldave we use the same branch name as environment so that part is real easy but I can't just get the latest from that branch let me gist what I have
[2014-04-15 16:48:49 -0400] double_p: oh, forgot the repo definition :(
[2014-04-15 16:49:14 -0400] mhenrixon: https://gist.github.com/mhenrixon/e81fcbcd14a8fc7dac36
[2014-04-15 16:49:45 -0400] Flexa: You can do only_if on system calls, it just needs to return the equivalent of true/false
[2014-04-15 16:52:04 -0400] ev0ldave: mhenrixon: is next_rev your branch name?
[2014-04-15 16:52:42 -0400] mhenrixon: no that is the commit sha am I doing that wrong then? Would the branch name be the thing to sync instead of that?
[2014-04-15 16:53:38 -0400] ev0ldave: it is weird, the resource page refers to it as the tag/commit but all of their examples use it as a branch name
[2014-04-15 16:53:47 -0400] ev0ldave: http://docs.opscode.com/resource_git.html
[2014-04-15 16:53:52 -0400] Flexa: http://docs.opscode.com/resource_git.html
[2014-04-15 16:53:57 -0400] Flexa: reference
[2014-04-15 16:54:00 -0400] Flexa: lol, snap.
[2014-04-15 16:54:34 -0400] mhenrixon: yeah I know that is what I can't figure out :)
[2014-04-15 16:54:37 -0400] double_p: hm, if i add the repo with my mongo recipe, that's "too late"
[2014-04-15 16:54:49 -0400] ev0ldave: so try removing checkout_branch and set revision environment
[2014-04-15 16:54:51 -0400] mhenrixon: revision branch_name
[2014-04-15 16:54:55 -0400] ev0ldave: yeah
[2014-04-15 16:54:57 -0400] mhenrixon: will do thanks for that
[2014-04-15 16:55:17 -0400] ev0ldave: hopefully that will work as expected
[2014-04-15 16:55:43 -0400] Flexa: are you git tagging your commits?
[2014-04-15 16:58:59 -0400] mhenrixon: Flexa no not yet I am finishing up the absolute necessary basic setup now on my own. After we go live I will start bringing the other guys in the company in on this. We have a lot of work to do before I am completely satisfied but hey we have tests and a fully automated setup. Just have to let others be able to deploy code without messing up the servers.
[2014-04-15 16:59:22 -0400] bmhatfield: Were there changes to remote_file behavior in chef 11.12 from say chef 11.06?
[2014-04-15 16:59:27 -0400] Neozonz: is there a syntax checker or something of that sort to check chef scripts prior to deploy?
[2014-04-15 16:59:44 -0400] Flexa: mhenrixon, using chef kitchen?
[2014-04-15 16:59:45 -0400] Neozonz: basically creating scripts for aws opswork
[2014-04-15 16:59:56 -0400] bmhatfield: I'm getting a bunch of 401 unauthorized exceptions in my runs, but the thing is the server is not actually returning a 401
[2014-04-15 17:01:26 -0400] Flexa: bmhatfield, logs? pcaps?
[2014-04-15 17:02:30 -0400] bmhatfield: on the server side, the server sees a broken pipe
[2014-04-15 17:03:08 -0400] bmhatfield: Error serving artifact for request GET 'CORRECT-ARTIFACT-NAME', from client IPADDRESS, authenticated as chef, error: ClientAbortException:  java.net.SocketException: Broken pipe
[2014-04-15 17:03:55 -0400] bmhatfield: but chef sees
[2014-04-15 17:03:56 -0400] bmhatfield: had an error: Net::HTTPServerException: 401 "Unauthorized"
[2014-04-15 17:04:05 -0400] Flexa: hmm, no idea. use hosted chef :)
[2014-04-15 17:05:05 -0400] bmhatfield: ?
[2014-04-15 17:06:47 -0400] ev0ldave: that is weird, a java exception
[2014-04-15 17:07:08 -0400] Neozonz: node[:deploy].each do |application, deploy|   <what does this exactly do
[2014-04-15 17:07:30 -0400] ev0ldave: oh, haha, i thought you meant the chef server
[2014-04-15 17:07:40 -0400] bmhatfield: It's from a team city server
[2014-04-15 17:07:42 -0400] bmhatfield: :-)
[2014-04-15 17:07:56 -0400] bmhatfield: This used to work, but then I updated to chef 11.12 because of heartbleed and it stopped working
[2014-04-15 17:08:03 -0400] bmhatfield: I also rotated certificates at the same time
[2014-04-15 17:08:11 -0400] ev0ldave: roll it back to make sure?
[2014-04-15 17:09:06 -0400] ev0ldave: neozonz: that will map each attribute in deploy to key, value or in that case application, deploy
[2014-04-15 17:09:15 -0400] bmhatfield: I suppose I am going to have to
[2014-04-15 17:10:55 -0400] Neozonz: ev0ldave, sorry i dont understand..
[2014-04-15 17:13:03 -0400] ev0ldave: deploy: { app1: this_value, app2: that_value } it will go through each of those apps and assign app1 to application and this_value to deploy as variable to ref then move on to the next key, value pair each iteration
[2014-04-15 17:15:41 -0400] bmhatfield: Rolled back the version of chef, didn't fix it.
[2014-04-15 17:16:41 -0400] michaelhart: Ive got a recipe that contains a bunch of template and file resources that notify a service to restart. I need to change it to only notify the service to restart if an attribute is true, but to call some other execute resource if the attribute is false. Short of putting an if/else in every template/file resource, is there a more elegant solution?
[2014-04-15 17:25:39 -0400] workmad3: michaelhart: you could have them all notify a ruby block to run, and that ruby block has an if/else to run either the restart or the execute resource
[2014-04-15 17:26:27 -0400] workmad3: michaelhart: or you could wrap the service or execute declaration in the if/else and have them subscribe to the various resources instead of the resources notifying
[2014-04-15 17:28:06 -0400] michaelhart: workmad3: thanks, I like the ruby block idea, thanks. not sure why I didnt think of that.
[2014-04-15 17:36:52 -0400] kersh: ev0ldave: With regards to It looks like wrapping the resource in a for loop is what's breaking the only_if statement. Thoughts?
[2014-04-15 17:39:21 -0400] ev0ldave: pastebin or gist?
[2014-04-15 17:40:54 -0400] kersh: http://pastebin.com/KFYCSkZC
[2014-04-15 17:41:26 -0400] kersh: So build the list of xvd block devices, and then umount any that are mounted.
[2014-04-15 17:47:42 -0400] bmhatfield: Okay! I didn't roll chef back correctly the first time
[2014-04-15 17:47:46 -0400] bmhatfield: There's a bug
[2014-04-15 17:47:49 -0400] bmhatfield: 11.6 works
[2014-04-15 17:47:52 -0400] bmhatfield: 11.12 does not
[2014-04-15 17:48:23 -0400] bmhatfield: 11.6 properly downloads a file from an https endpoint using basic auth
[2014-04-15 17:48:29 -0400] bmhatfield: 11.12 returns 401 unauthorized
[2014-04-15 17:48:39 -0400] bmhatfield: same exact chef code / other environmentals
[2014-04-15 17:50:00 -0400] ev0ldave: kersh, cat is overloading pastebin, ha
[2014-04-15 17:50:09 -0400] Corey: bmhatfield: Time for git bisect!
[2014-04-15 17:53:20 -0400] bmhatfield: Corey: looking into it now
[2014-04-15 17:53:26 -0400] bmhatfield: I don't know how to build omnibus so
[2014-04-15 17:54:01 -0400] ev0ldave: kersh:  why not use the mount resource?
[2014-04-15 17:54:24 -0400] ev0ldave: kersh:  http://pastebin.com/szCejda7
[2014-04-15 17:54:54 -0400] ev0ldave: granted, that doesn't matter
[2014-04-15 17:55:09 -0400] kersh: I was playing with the :umount action in the mount resource yesterday, and abandoned it because of the only_if issue.
[2014-04-15 17:55:16 -0400] kersh: I should probably switch that back.
[2014-04-15 17:57:24 -0400] ev0ldave: the loop looks ok to me
[2014-04-15 17:58:04 -0400] bmhatfield: Found it
[2014-04-15 17:58:20 -0400] bmhatfield: We do a basic-auth request to a server
[2014-04-15 17:58:24 -0400] bmhatfield: that server then issues a 302
[2014-04-15 17:58:32 -0400] kersh: Yeah, the stupid thing is that if I throw a puts system("...") inside that block, I get true, false, false false on an m1.xlarge, but then four messages that say "Skipped due to only_if...".
[2014-04-15 17:59:04 -0400] bmhatfield: the updated Chef:HTTP client does not pass the basic auth credentials on that 302 request
[2014-04-15 17:59:25 -0400] bmhatfield: I'll gist it
[2014-04-15 17:59:29 -0400] bmhatfield: btw curl works fine here
[2014-04-15 18:04:36 -0400] bmhatfield: https://gist.github.com/bmhatfield/1964fa75c1a198e41256
[2014-04-15 18:05:36 -0400] shlant1: is there a foodcritic chennel? or should I ask here?
[2014-04-15 18:06:04 -0400] Corey: shlant1: Wrong chef, see /topic
[2014-04-15 18:06:54 -0400] shlant1: Corey: nope, this is definitely relevant ;P http://acrmp.github.io/foodcritic/#FC009
[2014-04-15 18:07:12 -0400] bmhatfield1: sorry, lost internet if someone said something
[2014-04-15 18:07:13 -0400] shlant1: so many food related projects haha
[2014-04-15 18:07:21 -0400] Corey: shlant1: Oh son of a... :-)
[2014-04-15 18:10:43 -0400] bmhatfield1: Corey: any advice on that gist?
[2014-04-15 18:21:57 -0400] jmreicha: Is there a quick and dirty way to append a few lines to a config file?  Or is it better to use templates, etc
[2014-04-15 18:22:26 -0400] Flexa: jmreicha, there are but generally use templates
[2014-04-15 18:22:48 -0400] doomviking: jmreicha: there is the line cookbook
[2014-04-15 18:23:14 -0400] jmreicha: Oh cool.  Thanks
[2014-04-15 18:26:56 -0400] ohlol: how can i programatically pass parameters to a resource?
[2014-04-15 18:28:28 -0400] maplebed: shlant1: I'm curious what your foodcritic question was. I haven't found a foodcritic channel, if there is one.
[2014-04-15 18:30:27 -0400] shlant1: maplebed: it was complaining about FC009 on the first line of
[2014-04-15 18:30:28 -0400] shlant1: template "/etc/resolv.conf" do
[2014-04-15 18:30:28 -0400] shlant1:   source "resolv.conf.erb"
[2014-04-15 18:30:29 -0400] shlant1:   user "root"
[2014-04-15 18:30:29 -0400] shlant1:   group "root"
[2014-04-15 18:30:30 -0400] shlant1:   mode "644"
[2014-04-15 18:30:30 -0400] shlant1:   manage_symlink_source true
[2014-04-15 18:30:31 -0400] shlant1: end
[2014-04-15 18:30:41 -0400] shlant1: I think it's just weirdness and I'm going ot ignore it
[2014-04-15 18:31:50 -0400] maplebed: I'm going to guess it doesn't recognize manage_symlin_source.
[2014-04-15 18:34:34 -0400] shlant1: maplebed: yea, it must not be up to date with the latest changes
[2014-04-15 19:00:38 -0400] Navdeep: Hi All, I'm geting the cookbook version constraint issue for yum with Berkshelf. Please let me know how shall I get it to resolve
[2014-04-15 19:01:02 -0400] coderanger: Navdeep: You need to find your dependency conflict and fix it
[2014-04-15 19:01:10 -0400] Navdeep: Error is: Missing Cookbooks:
[2014-04-15 19:01:11 -0400] Navdeep: ------------------
[2014-04-15 19:01:11 -0400] Navdeep: Could not satisfy version constraints for: yum
[2014-04-15 19:01:42 -0400] Navdeep: I'm using chef-zero and Berkshelf to test my cookbooks..
[2014-04-15 19:02:22 -0400] Navdeep: I uploaded the required version of cookbooks ( dependencies) to the chef-zero server and still it gives me error
[2014-04-15 19:03:14 -0400] bmhatfield1: Corey:  I ended up filing a bug for this: https://tickets.opscode.com/browse/CHEF-5221
[2014-04-15 19:04:18 -0400] Navdeep: coderanger: any help here is very much appreciated..
[2014-04-15 19:17:06 -0400] lurraca: I have an issue while cooking on my server. https://gist.github.com/lurraca/10761533
[2014-04-15 19:17:22 -0400] lurraca: in the gist you can see the error I get.
[2014-04-15 19:20:09 -0400] jmickle: Expected process to exit with [0], but received '128'
[2014-04-15 19:20:23 -0400] jmickle: lurraca: the answer is in your error
[2014-04-15 19:23:05 -0400] lurraca: jmickle: thanks, for checking it out. I'm not very knowledgeable in devops. I tried to google that error and didn't find anything relevant or anything that looked that it was my case
[2014-04-15 19:23:33 -0400] jmickle: you dont need to be, just read your error :-)
[2014-04-15 19:23:34 -0400] jmickle: git ls-remote "https://github.com/sstephenson/rbenv.git" master
[2014-04-15 19:23:46 -0400] jmickle: its running that command
[2014-04-15 19:23:48 -0400] jmickle: and its failing
[2014-04-15 19:23:53 -0400] jmickle: check permissions on your git repo
[2014-04-15 19:27:10 -0400] lurraca: jmickle: i tried running that command locally and it works fine, but on the server i doesn't return anything , which is weird since that is a public repo.
[2014-04-15 19:27:18 -0400] lurraca: jmickle: I also found this issue, https://github.com/RiotGames/rbenv-cookbook/issues/48
[2014-04-15 19:27:24 -0400] jmickle: are you running it as the same user chef is running as?
[2014-04-15 19:27:59 -0400] lurraca: jmickle: looks a lot like what happening to me, but that issue is 8 months old, and looks like its closed.
[2014-04-15 19:28:13 -0400] lurraca: jmickle: let me try with another user
[2014-04-15 19:28:48 -0400] jmickle: git is key based or password based right
[2014-04-15 19:28:52 -0400] jmickle: which comes out of ~/.ssh
[2014-04-15 19:28:59 -0400] jmickle: so try as the user running chef
[2014-04-15 19:30:50 -0400] lurraca: jmickle: in the server, i tried running git ls-remote "https://github.com/sstephenson/rbenv.git" master with sudo and the user running chef and with neither of them I get the expected return value from that command
[2014-04-15 19:41:01 -0400] NukePuppy: if i want to get IP of a host in chef? Resolv.getaddress(node['host_name'])
[2014-04-15 19:43:58 -0400] NukePuppy: does that look kosher?  seems to get a failure of
[2014-04-15 19:44:05 -0400] NukePuppy: uninitialized constant Chef::Recipe::Resolv
[2014-04-15 19:49:58 -0400] mhenrixon: Anyone know why upstart steals my log files? Can I change that somehow?
[2014-04-15 19:50:14 -0400] mhenrixon: It doesn't seem to respect my loglevel
[2014-04-15 19:53:59 -0400] NukePuppy: is there no like resolver lwrp builtinto chef? to resolve hostname to IP?
[2014-04-15 20:11:36 -0400] xorl: driving me up a wall
[2014-04-15 20:11:48 -0400] xorl: chef-client commits a post to the '/run' reports section
[2014-04-15 20:11:53 -0400] xorl: and then sits there and does nothing
[2014-04-15 20:18:38 -0400] bahamas10: is there a way to have `remote_file` unlink the file before moving it into place?
[2014-04-15 20:19:07 -0400] bahamas10: also, is there a way to add actions to already existing resources?
[2014-04-15 20:39:58 -0400] xorl: man
[2014-04-15 20:40:07 -0400] xorl: chef-server-ctl test bleh
[2014-04-15 20:40:12 -0400] xorl: failing recipes
[2014-04-15 20:40:50 -0400] xorl: chef-server isn't responding 200OK for all cookbooks and all the recipes/cookbooks api endpoints are failing
[2014-04-15 20:41:11 -0400] xorl: does that mean i have a corrupt cookbook or something wreaking havoc?
[2014-04-15 21:04:07 -0400] xorl: ugh
[2014-04-15 21:04:22 -0400] xorl: I cleansed it all and still the issue is there, has to be something in this cookbook
[2014-04-15 21:15:09 -0400] qsalt: maybe a silly question but, can I get knife to create an encrypted databag locally for testing, without making one on the chef-server?
[2014-04-15 21:15:32 -0400] qsalt: i historically have been created them on the chef server, and then using knife data bag show <databag> <item> format json
[2014-04-15 21:15:48 -0400] qsalt: but it would be nice if I can skip creating it on the chef-server for initial testing
[2014-04-15 21:16:26 -0400] martinisoft: qsalt: You can use knife solo data bag, its a plugin
[2014-04-15 21:17:22 -0400] qsalt: mmk, I will look into that.  Good to know it's not a built in feature i'm just missing.
[2014-04-15 21:17:25 -0400] qsalt: thanks!
[2014-04-15 21:19:02 -0400] jskains: Hello.
[2014-04-15 21:19:09 -0400] jskains: Can I ask a stupid question?
[2014-04-15 21:19:33 -0400] jskains: chef-client is grabbing the wrong IP from a multi-home system. How do I override that?
[2014-04-15 21:20:37 -0400] jskains: Is this the wrong place for that kind of question?
[2014-04-15 21:20:50 -0400] prothon: Like it's getting eth0 instead of eth0:1 or something?
[2014-04-15 21:21:04 -0400] jskains: Yeah. It gets the gatewayed IP
[2014-04-15 21:21:14 -0400] jskains: But I need it to grab a different IP/Interface
[2014-04-15 21:21:33 -0400] prothon: yeah I've run into that my self. Haven't figured out how to fix it.
[2014-04-15 21:21:44 -0400] jskains: In this case literally em1 instead of em2
[2014-04-15 21:22:37 -0400] jskains: So many people in this channel :)
[2014-04-15 21:22:53 -0400] prothon: I think the devs are in this channel too.
[2014-04-15 21:23:26 -0400] jskains: Do you ever see them talk?
[2014-04-15 21:23:54 -0400] prothon: I'm sure they do.
[2014-04-15 21:24:07 -0400] prothon: It is 17:23 est so people are on their way home
[2014-04-15 21:25:24 -0400] jskains: It's only 3:25 here. And 2:25 in the bay area :)
[2014-04-15 21:26:54 -0400] bmhatfield: man
[2014-04-15 21:27:04 -0400] bmhatfield: this chef release also broke the 'service' resource on OSX for me
[2014-04-15 21:28:27 -0400] bmhatfield: service 'blah' do action :nothing end no longer works
[2014-04-15 21:29:35 -0400] prothon: jskains: http://chefconf.opscode.com/chefconf/
[2014-04-15 21:43:12 -0400] xorl: ah hah, percona cookbook
[2014-04-15 21:49:43 -0400] bmhatfield: man
[2014-04-15 21:49:49 -0400] bmhatfield: This is really frustrating
[2014-04-15 21:50:27 -0400] bmhatfield: https://tickets.opscode.com/browse/CHEF-5223
[2014-04-15 21:50:39 -0400] bmhatfield: I'm not even sure how to work around this
[2014-04-15 21:52:03 -0400] bmhatfield: Any suggestions?
[2014-04-15 21:56:04 -0400] bmhatfield: I dont understand why this change was merged
[2014-04-15 21:56:17 -0400] bmhatfield: it can't possibly work the first time a service is set up on a box
[2014-04-15 22:08:21 -0400] drywheat: is it possible to edit a node's run list without using the editor mode and `knife node edit ....'?
[2014-04-15 22:10:55 -0400] jskains: I can not be the only persion who has had chef-client pick the wrong ethernet port.
[2014-04-15 22:11:12 -0400] jskains: There is no simple way to override the ipaddress for a specific node???
[2014-04-15 22:11:38 -0400] jbz: ipaddress is an automatic attribute, so it can't be overridden (IIRC)
[2014-04-15 22:12:01 -0400] jskains: So I just can't use a node that can't figure out it's IP?
[2014-04-15 22:12:28 -0400] jskains: ohai is grabbing em2 instead of em1
[2014-04-15 22:12:58 -0400] jbz: You might need to hint it
[2014-04-15 22:13:05 -0400] jbz: but I'm having trouble locating docs on ohai hints
[2014-04-15 22:13:11 -0400] jskains: So am I.
[2014-04-15 22:13:13 -0400] jbz: heh
[2014-04-15 22:13:18 -0400] jskains: The documentation dances around these hints
[2014-04-15 22:13:49 -0400] jskains: It's like "We now have hints! But screw you if you want to know how to use them!"
[2014-04-15 22:14:06 -0400] bmhatfield: I had to write an ohai plugin to pick the one I wanted
[2014-04-15 22:14:30 -0400] jbz: yeah you can write a plugin
[2014-04-15 22:14:32 -0400] jbz: like https://coderwall.com/p/hwiohg
[2014-04-15 22:15:49 -0400] bmhatfield: be aware that the syntax all changed in a minor rev of chef (11.12) so don't be surprised if your thing doesn't seem to work right
[2014-04-15 22:16:12 -0400] bmhatfield: mine (ohai 6) does work even under ohai 7, although it triggers a ton of deprecation warnings
[2014-04-15 22:16:27 -0400] jskains: Ah.
[2014-04-15 22:16:39 -0400] alexbst: chefconf sends its love all :-)
[2014-04-15 22:16:54 -0400] jskains: Seems like this should be a simple configuration option in client.rb
[2014-04-15 22:17:50 -0400] jidar: yay, I was supposed to be there :(
[2014-04-15 22:18:13 -0400] geggam: meh... just a nerd herd
[2014-04-15 22:19:14 -0400] alexbst: every meal involves bacon and cake
[2014-04-15 22:19:48 -0400] geggam: i married a southern woman... i get that stuff delivered to my desk... cooked to order alexbst
[2014-04-15 22:19:55 -0400] geggam: :P
[2014-04-15 22:20:20 -0400] jskains: Is there an easy "ohai" hint that I could write to just specify the IP or at least the right interface?
[2014-04-15 22:22:39 -0400] bmhatfield: Is it possible to request an emergency prioritization of a bug?
[2014-04-15 22:22:47 -0400] bmhatfield: They fixed a bunch of regressions in 11.12
[2014-04-15 22:22:52 -0400] bmhatfield: But there's still one on OSX
[2014-04-15 22:22:58 -0400] bmhatfield: I can't roll back because heartbleed
[2014-04-15 22:25:11 -0400] xorl: geggam i wish I did haha
[2014-04-15 22:26:49 -0400] mhenrixon: What do I need to do if I want to cd into my git repo folder on a server and do some work there like fetching a git diff against origin and storing that data in the recipe?
[2014-04-15 22:26:55 -0400] mhenrixon: Use some sort of block?
[2014-04-15 22:27:18 -0400] mhenrixon: Will that execute immediately so that it can be reused later on for lets say a deploy notification
[2014-04-15 22:27:45 -0400] ev0ldave: you can just write it there in ruby or an execute block for shell
[2014-04-15 22:27:56 -0400] ev0ldave: yeah, it will execute in order
[2014-04-15 22:28:31 -0400] mhenrixon: hmm I don't get that ev0ldave how can I store the result of that in a variable for later reuse?
[2014-04-15 22:28:33 -0400] kersh: So this is fun. Attempting to bootstrap a node, and I kept getting 502 when resolving the dependency. I noticed that the CPU was spiking on our Chef server so I bumped it up from an m1.medium to an m3.large. Reran the bootstrap and it generated a 129 MB output log trying to solve the constaints.
[2014-04-15 22:29:08 -0400] ev0ldave: if you just use a ruby block then stdout can be stored in a variable
[2014-04-15 22:29:35 -0400] ev0ldave: and you can access env shell variables from ruby
[2014-04-15 22:29:51 -0400] mhenrixon: have an example on that? The http://docs.opscode.com/resource_ruby_block.html doesn't really help me or I am missing something obvious
[2014-04-15 22:30:20 -0400] ev0ldave: puts ENV['PATH']
[2014-04-15 22:30:39 -0400] ev0ldave: that will access $PATH from the shell that is running
[2014-04-15 22:32:04 -0400] ev0ldave: irb(main):001:0> puts ENV['PATH']
[2014-04-15 22:32:05 -0400] ev0ldave: /Users/andrewd/.rbenv/versions/1.9.3-p448/bin:/usr/local/Cell....
[2014-04-15 22:32:52 -0400] ev0ldave: and you can also assign them using the same method.. ENV['something'] = `ls ~`
[2014-04-15 22:32:56 -0400] mhenrixon: ev0ldave https://gist.github.com/mhenrixon/91b6ea5ab6eef3dfde4f
[2014-04-15 22:34:04 -0400] mhenrixon: So I added a comment, is that how you see me using the environment variables?
[2014-04-15 22:35:37 -0400] drywheat: can i change a node's run list using a one-liner and `knife'?
[2014-04-15 22:36:27 -0400] resno: drywheat: you can edit it via knife node edit or something along those lines
[2014-04-15 22:36:40 -0400] resno: but its not a one liner afaik
[2014-04-15 22:37:35 -0400] drywheat: i def know how to use `knife node edit' but i really want a way to apply a run list to node w/o using the editor
[2014-04-15 22:37:42 -0400] Flexa: anyone know what would cause the first chef run after bootstrap, using 11.12.2 chef-client::service in the run_list, to not start the service?
[2014-04-15 22:40:43 -0400] drywheat: resno: `knife node run_list set ...'
[2014-04-15 22:41:23 -0400] jidar: kersh: sounds fun!
[2014-04-15 22:41:35 -0400] jidar: kersh: and by fun, I mean not fun
[2014-04-15 22:42:18 -0400] kersh: jidar: I think it's because of some shenanigans with the Kibana cookbook.
[2014-04-15 22:42:54 -0400] kersh: I backed all of that out and it doesn't freak out anymore.
[2014-04-15 22:43:17 -0400] kersh: cookbook "kibana", git: 'git://github.com/lusis/chef-kibana.git'
[2014-04-15 22:43:20 -0400] kersh: For Kibana3.
[2014-04-15 22:57:10 -0400] kersh: In my Berksfile, is there a way that I can specify both a source *and* a version?
[2014-04-15 23:09:00 -0400] programmerq: kersh: I ran into that today. I'm not 100% sure. I usually just lock it to the git revision in the source.
[2014-04-15 23:09:33 -0400] programmerq: does anyone have a recommended workflow for setting up replicated mysql or postgresql? I've used the mysql and postgresql cookbooks before, but never with replication.
[2014-04-15 23:09:56 -0400] kersh: I ended up setting the git location in the Berksfile and then the version in the metadata.rb.
[2014-04-15 23:11:40 -0400] programmerq: that works.
[2014-04-15 23:18:51 -0400] loki_97123: hello?  is there any magic (no vagrant plugins) that should enable a vagrant box to use chef-zero and the ?chef-client?
[2014-04-15 23:30:49 -0400] jidar: programmerq: the problem with mysql for that is that it would require a recent backup to seed the replication process with, and that log would have to existt on the master
[2014-04-15 23:31:00 -0400] jidar: programmerq: so it's not really something (at least a year or two ago) you could do
[2014-04-15 23:31:17 -0400] jidar: dunno about postgres, never fooled with it
[2014-04-15 23:31:33 -0400] jidar: now that I mention it, I'll verify that
[2014-04-15 23:32:27 -0400] jidar: http://dev.mysql.com/doc/refman/5.1/en/replication-howto-masterstatus.html
[2014-04-15 23:32:39 -0400] mhenrixon: how can I get the node name at the right time?
[2014-04-15 23:33:19 -0400] mhenrixon: node[:name] is blank when compiling all the scripts so newrelic_deployment complains
[2014-04-15 23:33:43 -0400] jidar: and then this programmerq http://dev.mysql.com/doc/refman/5.1/en/replication-howto-rawdata.html which makes it look like if you're using INNODB you might be able to do it without a backup
[2014-04-15 23:34:07 -0400] jidar: oh, hahah nevermind
[2014-04-15 23:34:25 -0400] jidar: it'll still be a readlock, which might as well be useless
[2014-04-15 23:34:32 -0400] jidar: and un-automatable
[2014-04-15 23:39:57 -0400] ohmygoshjosh: mhenrixon: I solve this problem by bootstrapping my nodes with a defined node name
[2014-04-15 23:43:23 -0400] ohmygoshjosh: I am struggling with these new SSL updates to Chef.  My nodes won't bootstrap anymore because chef-client complains it can't verify the SSL cert of Chef Server.  I'm able to fix this by setting ssl_verify_mode to :verify_peer AND manually uploading my server's .crt file to /etc/chef/trusted_certs on the node.  But is there a way to automatically place the cert in /etc/chef/trusted_certs at bootstrap?
[2014-04-15 23:44:43 -0400] mhenrixon: ohmygoshjosh a search on the node that runs the recipe returns "name": "csapp11.casinosaga",
[2014-04-15 23:44:59 -0400] mhenrixon: node[:name] and node['name'] is blank hwoever
[2014-04-15 23:45:02 -0400] mhenrixon: however
[2014-04-15 23:46:08 -0400] Flexa: is  20min chef run on ec2 for a base box normalish?
[2014-04-15 23:46:32 -0400] Flexa: m1.small btw
[2014-04-15 23:46:42 -0400] ohmygoshjosh: mhenrixon: Are you looking to get the hostname of the node or the "name" of the node as stored in chef server?
[2014-04-15 23:46:52 -0400] jidar: Flexa: windows?
[2014-04-15 23:47:02 -0400] mhenrixon: either one should be fine
[2014-04-15 23:47:08 -0400] Flexa: jidar, ubuntu 12.04
[2014-04-15 23:47:26 -0400] jidar: seems a bit slow, you downloading a bunch of stuff or installing a metric crapload of stuff?
[2014-04-15 23:47:37 -0400] mhenrixon: I'll try hostname
[2014-04-15 23:47:48 -0400] Flexa: installing quite a crap ton
[2014-04-15 23:48:02 -0400] jidar: Flexa: you do a local vagrant run?
[2014-04-15 23:48:21 -0400] ohmygoshjosh: mhenrixon: while SSH'd into a node, you can type "ohai" to see a list of all locally accessible attribute vars
[2014-04-15 23:48:42 -0400] ohmygoshjosh: mhenrixon: so try "hostname" for your value
[2014-04-15 23:48:51 -0400] Flexa: I'm also having a problem with chef-client right after bootstrap where the service isn't running after the first run
[2014-04-15 23:49:03 -0400] mhenrixon: ohmygoshjosh yeah man that was the one I was after! Thanks for that
[2014-04-15 23:49:06 -0400] Flexa: jidar, not done vagrant box yet
[2014-04-15 23:49:13 -0400] ohmygoshjosh: mhenrixon: glad I could help!
[2014-04-15 23:50:29 -0400] jidar: Flexa: that's what I'd do, as it'll guarantee that it's not a contention issue and you can resize easily to retest
[2014-04-15 23:51:32 -0400] ohmygoshjosh: Anyone on using bootstrap to automatically populate /etc/chef/trusted_certs on your newly created node?
[2014-04-15 23:51:52 -0400] programmerq: jidar: thanks for  all that info!
[2014-04-15 23:53:17 -0400] jidar: programmerq: no problem, I checked with the #mysql guys and yea, this just can't be automated. It's something I wanted to do years ago
[2014-04-15 23:57:12 -0400] programmerq: jidar: I'm sure it *could* be automated, but you'd have to introduce a lot of complexity, which means it isn't necessarily worth it. :)
[2014-04-15 23:57:54 -0400] programmerq: I can't help but think that some sort of orchestration layer makes sense for DB
[2014-04-15 23:58:20 -0400] programmerq: handle slave promotion, hooks into db schema changes from an application, etc.

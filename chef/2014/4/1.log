[2014-04-01 00:00:19 -0400] esmet__: hmm ok
[2014-04-01 00:00:34 -0400] esmet__: i was hoping to not have to recreate any of the ec2 code, but it looks like that's the state of the world
[2014-04-01 00:01:03 -0400] coderanger: esmet__: Seriously knife-ec2 does almost nothing :)
[2014-04-01 00:01:30 -0400] esmet__: alright. i'll dig deeper. thanks for the pointers.
[2014-04-01 00:01:39 -0400] sbrinkmeyer: thats not promising for what we are getting towards mr coderanger
[2014-04-01 00:02:34 -0400] coderanger: ?
[2014-04-01 00:03:02 -0400] sbrinkmeyer: we (place i work) are moving towards the aws and were looking toward using the knife-ec2
[2014-04-01 00:03:11 -0400] sbrinkmeyer: or am i thinking of the wrong plugin (could be)
[2014-04-01 00:03:18 -0400] coderanger: sbrinkmeyer: knife-ec2 is a cute tool for manual testing, it has no place in production infra
[2014-04-01 00:03:53 -0400] sbrinkmeyer: thats a ... interesting statement ... what put you there?
[2014-04-01 00:04:37 -0400] coderanger: sbrinkmeyer: because EC2 is amazingly failure prone and you _need_ some kind of service watching for failures and replacing nodes
[2014-04-01 00:04:51 -0400] coderanger: and if you are using knife-ec2 for all provisioning that service is you getting paged
[2014-04-01 00:05:34 -0400] esmet__: so it looks like knife-ec2 is just a call to fog create and then a call to knife bootstrap
[2014-04-01 00:05:39 -0400] coderanger: Yep
[2014-04-01 00:05:40 -0400] coderanger: :)
[2014-04-01 00:05:51 -0400] esmet__: ok well i feared there was more magic. this is good.
[2014-04-01 00:06:09 -0400] coderanger: and you can replace knife bootstrap with an AMI pretty easily
[2014-04-01 00:07:28 -0400] esmet__: any reason to do that, other than saving time installing a bunch of common packages?
[2014-04-01 00:08:01 -0400] coderanger: esmet__: Lets you use a bunch of tools that are based around AMIs (ASGs, CFN, Asgard, etc)
[2014-04-01 00:08:13 -0400] coderanger: esmet__: knife bootstrap is an inherently CLI tool really
[2014-04-01 00:08:32 -0400] coderanger: You could write some kind of service wrapper around the process, but it would be error prone at best
[2014-04-01 00:09:05 -0400] sbrinkmeyer: coderanger ASGs
[2014-04-01 00:09:07 -0400] sbrinkmeyer: ?
[2014-04-01 00:09:30 -0400] coderanger: auto scaling groups
[2014-04-01 00:09:41 -0400] coderanger: Y'all should wait 10 days and come see my PyCon talk :P
[2014-04-01 00:10:37 -0400] sbrinkmeyer: oh yeah sure i'll just hop on a bus to montreal
[2014-04-01 00:10:39 -0400] sbrinkmeyer: wit my cardboard sign and sharpie
[2014-04-01 00:11:28 -0400] esmet__: can you help me understand the difference between bootstrapping a server vs creating a node 'foo', sshing to foo and calling chef-client?
[2014-04-01 00:11:49 -0400] coderanger: esmet__: Not sure what you mean
[2014-04-01 00:12:30 -0400] esmet__: what steps are involved in the bootstrapping process? as I understand it now, chef-client is installed and then invoked. somewhere in that step, the chef server takes note of the new node (this part is fuzzy)
[2014-04-01 00:14:10 -0400] coderanger: esmet__: Ahh, so what knife bootstrap does
[2014-04-01 00:14:38 -0400] coderanger: it copies your validation.pem (and if set, your databag secret) to the target node
[2014-04-01 00:14:51 -0400] coderanger: and it writes out a JSON blob with your selected chef environment and run list
[2014-04-01 00:15:08 -0400] coderanger: and then installs chef and runs chef-client -j /that/json/file
[2014-04-01 00:15:31 -0400] coderanger: when chef boots up the first time if it doesn't find a file named client.pem, it uses teh validation key to register itself
[2014-04-01 00:16:01 -0400] jyuan: I've been using chef for a while, but recently ran into a problem with knife bootstrap
[2014-04-01 00:16:06 -0400] jyuan: ERROR: RegexpError: end pattern with unmatched parenthesis: /^(yone,$/i
[2014-04-01 00:16:15 -0400] jyuan: However, I don't have any parenthesis in the command itself
[2014-04-01 00:16:42 -0400] jyuan: even very basic usage that clearly should be valid has this problem
[2014-04-01 00:16:44 -0400] jyuan: knife bootstrap 1.2.3.4                                          Bootstrapping Chef on 1.2.3.4 ERROR: RegexpError: end pattern with unmatched parenthesis: /^(yone,$/i
[2014-04-01 00:16:56 -0400] jyuan: anyone ran into this before?
[2014-04-01 00:16:59 -0400] coderanger: jyuan: Whats the full traceback?
[2014-04-01 00:17:17 -0400] jyuan: The full tracebook is as pasted
[2014-04-01 00:17:56 -0400] jyuan: all other knife commands work fine, and bootstrap has worked in the past
[2014-04-01 00:18:06 -0400] jyuan: wonder if it's some problem with dependent gem
[2014-04-01 00:18:36 -0400] coderanger: ?
[2014-04-01 00:18:47 -0400] coderanger: I didn't see any link
[2014-04-01 00:19:05 -0400] jyuan: coderanger: sorry?
[2014-04-01 00:19:23 -0400] jyuan: i'm running knife boostrap on my local machine to bootstrap a remote insance
[2014-04-01 00:19:32 -0400] jyuan: ~/w/chef-repo git:master  knife bootstrap 1.2.3.4                                          Bootstrapping Chef on 1.2.3.4 ERROR: RegexpError: end pattern with unmatched parenthesis: /^(yone,$/i
[2014-04-01 00:19:33 -0400] coderanger: jyuan: Please paste your full ruby traceback to a pastebin site like gist.github.com and send the link here
[2014-04-01 00:19:58 -0400] jyuan: ^ that's all the lines i have
[2014-04-01 00:20:19 -0400] jyuan: how do I get the full stacktrace?
[2014-04-01 00:20:45 -0400] coderanger: knife -VV
[2014-04-01 00:21:46 -0400] jyuan: coderanger: http://pastebin.com/Xh76LUCG
[2014-04-01 00:23:29 -0400] coderanger: jyuan: Are you overriding the default bootstrap in your knife.rb
[2014-04-01 00:24:13 -0400] jyuan: coderanger: no i'm not
[2014-04-01 00:24:30 -0400] jyuan: coderanger: my knife.rb just has basic configuration, no reference to bootstrap
[2014-04-01 00:25:19 -0400] coderanger: jyuan: Hmm, I would just grep all your config files for that "yone" string
[2014-04-01 00:26:19 -0400] GreatSUN: hiho coderanger
[2014-04-01 00:26:23 -0400] GreatSUN: how are you?
[2014-04-01 00:27:28 -0400] jyuan: coderanger: hmm, I grepped and didn't find anything
[2014-04-01 00:27:36 -0400] jyuan: coderanger: this is very strange
[2014-04-01 00:27:40 -0400] coderanger: GreatSUN: Tired and heartburny :-(
[2014-04-01 00:27:42 -0400] rafaelmagu: Hi everyone
[2014-04-01 00:27:59 -0400] rafaelmagu: I'm seeing a very annoying issue during long-running Chef runs
[2014-04-01 00:28:29 -0400] GreatSUN: coderanger: tired... oh yeah, I am working now for 20h
[2014-04-01 00:28:33 -0400] rafaelmagu: Getting 403 Forbidden errors when downloading cookbooks
[2014-04-01 00:28:41 -0400] rafaelmagu: Well, during the run, actually
[2014-04-01 00:28:43 -0400] coderanger: rafaelmagu: Yeah :-(
[2014-04-01 00:28:49 -0400] coderanger: rafaelmagu: Its a known issue
[2014-04-01 00:29:00 -0400] rafaelmagu: I tried the s3_url_ttl fix but no luck
[2014-04-01 00:29:01 -0400] coderanger: rafaelmagu: Hosted Chef?
[2014-04-01 00:29:01 -0400] rafaelmagu: :/
[2014-04-01 00:29:06 -0400] rafaelmagu: OS
[2014-04-01 00:29:34 -0400] coderanger: rafaelmagu: Hmm, you might able to patch bookshelf to ignore timestamps
[2014-04-01 00:29:38 -0400] coderanger: I've not tried though
[2014-04-01 00:30:22 -0400] rafaelmagu: coderanger: got a link to the patch so I could see what's needed?
[2014-04-01 00:30:42 -0400] coderanger: rafaelmagu: You can try to re-arrange things so that the time consuming stuff happens at the end after any templates/cookbook_files
[2014-04-01 00:30:56 -0400] rafaelmagu: Problem is the lazy-loading of files
[2014-04-01 00:30:58 -0400] coderanger: rafaelmagu: I don't know of a specific patch
[2014-04-01 00:31:05 -0400] coderanger: Just that in the abstract you could fix it there
[2014-04-01 00:31:10 -0400] rafaelmagu: Right
[2014-04-01 00:33:13 -0400] GreatSUN: coderanger: I recognized some days ago, that chef-server / chef-client do not sync files (besides they are referenced by some cookbook_file lwrp)
[2014-04-01 00:33:31 -0400] coderanger: GreatSUN: It downloads them only on-demand
[2014-04-01 00:33:40 -0400] GreatSUN: coderanger: is that default scenario?
[2014-04-01 00:33:53 -0400] GreatSUN: coderanger: I guessed so... Is there some option to download all
[2014-04-01 00:33:54 -0400] GreatSUN: ?
[2014-04-01 00:34:01 -0400] coderanger: and because the URLs the chef server gives you have an expiration time, if your run takes too long, those links can actually expire
[2014-04-01 00:34:09 -0400] GreatSUN: I mean, switch off the on demand
[2014-04-01 00:34:09 -0400] coderanger: GreatSUN: No, there is no option
[2014-04-01 00:34:16 -0400] GreatSUN: ok, thanks :-)
[2014-04-01 00:34:58 -0400] GreatSUN: I already have reprogrammed my stuff so that it downloads all in time
[2014-04-01 00:35:26 -0400] coderanger: GreatSUN: This isn't usually an issue unless your chef runs are >=30m
[2014-04-01 00:35:28 -0400] GreatSUN: coderanger: libraries are always downloaded, right=
[2014-04-01 00:35:48 -0400] GreatSUN: some are even > 1h
[2014-04-01 00:35:50 -0400] coderanger: Yes, cookbook code files are all downloaded at the start
[2014-04-01 00:35:56 -0400] rafaelmagu: Or your Chef server is in a different region altogether ;)
[2014-04-01 00:35:56 -0400] GreatSUN: matters on what has to be configured/installed
[2014-04-01 00:36:10 -0400] coderanger: though technically if you have like a million cookbooks and slow links, even that could fail
[2014-04-01 00:36:40 -0400] GreatSUN: coderanger: sure. just wanted to verify that my thoughts there are true
[2014-04-01 00:36:42 -0400] rafaelmagu: To this day I haven't figured out how to deal with a cross-region Chef server
[2014-04-01 00:36:58 -0400] coderanger: rafaelmagu: Don't :-/ push changes to multiple servers
[2014-04-01 00:37:12 -0400] rafaelmagu: Might be the solution
[2014-04-01 00:37:18 -0400] rafaelmagu: Chef server in each region :/
[2014-04-01 00:37:24 -0400] coderanger: rafaelmagu: Theres a bunch of tools to help automate that
[2014-04-01 00:37:29 -0400] rafaelmagu: Oh
[2014-04-01 00:37:32 -0400] rafaelmagu: I didn't know that
[2014-04-01 00:40:11 -0400] GreatSUN: <-- has written an own tool for pushing cookbook changes around, set runlists etc.
[2014-04-01 00:42:03 -0400] GreatSUN: the only thing that I need is to get librarian-chef more dynamic (like check in deps in database and stuff like that)
[2014-04-01 01:30:33 -0400] rafaelmagu: Giving 'no_lazy_load true' a try with Packer building AMIs on 4 different AWS regions
[2014-04-01 01:30:37 -0400] rafaelmagu: So far, so good
[2014-04-01 01:35:35 -0400] Majost_: Good idea, or bad idea: Defining classes within a LWRP resource.
[2014-04-01 01:36:10 -0400] Majost_: I do not recall seeing anyone do this, so I figure I should ask.
[2014-04-01 01:38:18 -0400] rafaelmagu: Damn, no luck
[2014-04-01 01:38:22 -0400] rafaelmagu: 403 Forbidden
[2014-04-01 01:38:36 -0400] rafaelmagu: Damn you to hell, "403 Forbidden"!
[2014-04-01 01:42:45 -0400] bricker`LA: Hello, I am getting this error: "No such cookbook: apt". `depends 'apt'` is in my metadata.rb file. What else do I need to do?
[2014-04-01 01:43:22 -0400] mdfrick: I'm guessing I'll have to ask tomorrow when people are active, but has anyone run into issues where a Chef run stalls for a minute or two when calling https://<chef-server>/environments/<env>/cookbook_versions ?
[2014-04-01 01:43:50 -0400] mdfrick: bricker`LA: and you've uploaded the apt cookbook to your chef server?
[2014-04-01 01:45:00 -0400] bricker`LA: mdfrick: I don't understand, won't it pull the apt cookbook from the opscode servers? I'm just trying to run tests locally right now.
[2014-04-01 01:45:46 -0400] mdfrick: Oh, no... you've gotta install your dependencies.
[2014-04-01 01:46:11 -0400] bricker`LA: mdfrick: I'm using Berksfile for this cookbook
[2014-04-01 01:46:21 -0400] mdfrick: If you're using berkshelf, a simple "berks install" will do this.
[2014-04-01 01:48:03 -0400] bricker`LA: mdfrick: When I run `berks install`, it says that it has installed the apt package (2.3.8). The metadata file is installed one level deeper than the Berksfile (cookbook/metadata.rb), perhaps it's getting installed to the wrong place?
[2014-04-01 01:49:19 -0400] mdfrick: Oh, weird. That doesn't seem like a normal cookbook directory structure.
[2014-04-01 01:49:52 -0400] mdfrick: Also - what are you running that is causing the error?
[2014-04-01 01:51:18 -0400] bricker`LA: mdfrick: 'kitchen test', the error occurs when chef-client runs on the test VM
[2014-04-01 01:59:10 -0400] GreatSUN: yes!
[2014-04-01 01:59:15 -0400] GreatSUN: near to the end
[2014-04-01 01:59:21 -0400] GreatSUN: finally found the last bug
[2014-04-01 01:59:37 -0400] GreatSUN: ok, lets say the last bug I can fix myself :D
[2014-04-01 02:00:45 -0400] GreatSUN: tomorrow the windows guys have to take care of .net framework installation, cause I don't have a clue how to install that on our windows servers (I can only see .net 3.5, but need 4.5)
[2014-04-01 02:00:46 -0400] mdfrick: bricker`LA: I'm not super familiar there, but I'm pretty sure you'll want your Berkfile in the root of your cookbook directory.
[2014-04-01 02:01:40 -0400] bricker`LA: mdfrick: okay, thanks!
[2014-04-01 02:11:15 -0400] rafaelmagu: testing rc1 of 11.12 now for that 15-minute issue
[2014-04-01 02:13:25 -0400] juliancdunn: GreatSUN: there is a cookbook for that :-)
[2014-04-01 02:15:47 -0400] bricker`LA: How would I upload, say, the serverdensity cookbook to my chef server? https://github.com/serverdensity/chef-serverdensity
[2014-04-01 02:17:26 -0400] rafaelmagu: No luck with 11.12
[2014-04-01 02:26:35 -0400] bricker`LA: I guess just clone the repo and run "berks upload"? Is it recommended to do this from a github repo?
[2014-04-01 02:57:19 -0400] bricker`LA: I don't quite understand how to setup the serverdensity configuration on chef hosted: https://github.com/serverdensity/chef-serverdensity I have added { serverdensity: { account ... token } } to the "Default Attributes" of a serverdensity role, but it doesn't seem to be picking it up
[2014-04-01 03:48:20 -0400] gkra: Is there any good way to determine where an attribute value is coming from?
[2014-04-01 04:01:15 -0400] coderanger: gkra: node.debug_value I think
[2014-04-01 04:01:39 -0400] coderanger: Yeah
[2014-04-01 04:01:55 -0400] gkra: in the recipe?
[2014-04-01 04:01:58 -0400] coderanger: node['foo']['bar'] -> Chef::Log.debug(node.debug_value('foo', 'bar')
[2014-04-01 04:02:14 -0400] coderanger: See http://www.getchef.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/ for more info
[2014-04-01 04:02:15 -0400] gkra: I'm not familiar enough with chef-shell...
[2014-04-01 04:13:31 -0400] roadze: Hi there, in my libraries I declare a class like this Chef::Recipe::App, when I try to call App#method from the unit test in my recipe it doesn't seem to know about App, like the file hasn't been required. Any idea ?
[2014-04-01 04:15:30 -0400] coderanger: roadze: Not sure what you mean, that isn't Ruby syntax on its own
[2014-04-01 04:16:50 -0400] bricker`LA: Okay I promise this is the last time I'll ask, I'm just totally at a loss here: I installed the serverdensity cookbook, created a role for it, added the necessary configuration to the "overwrite_attributes" (this is chef hosted), and added the role to my base VM role's runlist. When I ran chef-client, the sd-agent config was just the default template, so it seems that the overwrite_attributes configuration wasn't read. Did I miss so
[2014-04-01 04:18:33 -0400] roadze: coderanger: Sorry it was not clear. So I have a file libraries/chef_recipe_app.rb declaring a class containing few methods. Then I have a recipe I try to unit spec, this recipe calls App#method and so in my test I would like to write something like App.stub(:method) to test in isolation. App does not exists at this point and I can't figure why.
[2014-04-01 04:18:36 -0400] coderanger: bricker`LA: If you run `knife role show name` do you see the attrs set?
[2014-04-01 04:18:55 -0400] coderanger: roadze: You mean with ChefSpec?
[2014-04-01 04:19:02 -0400] roadze: coderanger: yes
[2014-04-01 04:19:19 -0400] coderanger: roadze: Are the spec helpers in another library file in the same cookbook?
[2014-04-01 04:19:29 -0400] roadze: coderanger: yes they are
[2014-04-01 04:19:35 -0400] coderanger: roadze: What are the two filenames
[2014-04-01 04:20:25 -0400] coderanger: roadze: Or to be more specfici
[2014-04-01 04:20:31 -0400] coderanger: chef does an alpha sort when loading
[2014-04-01 04:25:32 -0400] roadze: coderanger: thank you I will give a look around that
[2014-04-01 04:25:44 -0400] bricker`LA: coderanger: yes, the attributes show when I run `knife role show serverdensity`
[2014-04-01 04:29:28 -0400] coderanger: bricker`LA: Can you pastebin the output of that (with your key redacted) and the output from a chef run?
[2014-04-01 04:29:46 -0400] bricker`LA: coderanger: sure! One moment
[2014-04-01 04:35:00 -0400] bricker`LA: coderanger: https://gist.github.com/bricker/0f03f01b9a8956a32ce5
[2014-04-01 04:36:40 -0400] coderanger: bricker`LA: Are you use token is what you mean to be setting?
[2014-04-01 04:36:45 -0400] coderanger: I would think that would be agent_key
[2014-04-01 04:36:54 -0400] coderanger: (but I don't know serverdensity very well)
[2014-04-01 04:38:55 -0400] bricker`LA: coderanger: Well I'm trying to set it up so that the device will be added lazily when a VM is created, and according to the documentation for this cookbook this is how to do it. I'm confident it would work if I could figure out why the cookbook doesn't seem to be reading the override_attributes configuration
[2014-04-01 04:40:00 -0400] bricker`LA: This is the cookbook by the way https://github.com/serverdensity/chef-serverdensity
[2014-04-01 04:44:30 -0400] coderanger: bricker`LA: Oh, I see the issue
[2014-04-01 04:44:36 -0400] coderanger: role[serverdensity] isn't in your run list
[2014-04-01 04:45:01 -0400] coderanger: Is that used in another role?
[2014-04-01 04:47:15 -0400] bricker`LA: coderanger: yeah, role[serverdensity] is in another role
[2014-04-01 04:47:33 -0400] bricker`LA: coderanger: a role called "base_vm" which we use for all VM's
[2014-04-01 04:48:16 -0400] coderanger: bricker`LA: If you do knife node show name -Fj --long
[2014-04-01 04:48:23 -0400] coderanger: do you see your attrs?
[2014-04-01 04:49:23 -0400] chef674: hi
[2014-04-01 04:49:41 -0400] chef674: i am getting error while installing graphite using bootstrap
[2014-04-01 04:50:01 -0400] chef674: error:No version specified, and no candidate version available for Django
[2014-04-01 04:50:26 -0400] bricker`LA: coderanger: checking now
[2014-04-01 04:50:48 -0400] chef674: my chef client is centos 6.5
[2014-04-01 04:51:44 -0400] coderanger: chef674: What cookbook are you using?
[2014-04-01 04:52:33 -0400] chef674: https://github.com/realityforge/chef-graphite
[2014-04-01 04:53:05 -0400] bricker`LA: coderanger: yes, it's there in the "override" object
[2014-04-01 04:53:25 -0400] coderanger: bricker`LA: Okay, so that means your role is working :-)
[2014-04-01 04:54:00 -0400] bricker`LA: :D
[2014-04-01 04:54:54 -0400] chef674: any idea why it's giving error coming?
[2014-04-01 04:58:50 -0400] coderanger: bricker`LA: https://github.com/serverdensity/chef-serverdensity/blob/master/templates/default/config.cfg.erb token isn't actually used anywhere in there
[2014-04-01 05:01:15 -0400] bricker`LA: coderanger: my understanding is that the cookbook should grab the agent key from the serverdensity API before writing the config file
[2014-04-01 05:10:34 -0400] bricker`LA: coderanger: I'm never actually running the `update` action anywhere... where is that supposed to get run?
[2014-04-01 05:14:05 -0400] bricker`LA: coderanger: It looks like I might have to add the "serverdensity" block to my cookbook somewhere, but I thought I could configure this entirely through chef
[2014-04-01 07:19:53 -0400] kaushal: Hi
[2014-04-01 07:20:17 -0400] kaushal: I am trying to setup GUI for Chef Configuration Management tool
[2014-04-01 07:21:21 -0400] kaushal: I am following http://www.getchef.com/chef/install/. I am not sure how do i set up GUI for chef
[2014-04-01 07:21:51 -0400] kaushal: I can see the chef server and nginx is up and running. Anything i need to configure?
[2014-04-01 07:28:00 -0400] coderanger: kaushal: The web UI in open source is deprecated
[2014-04-01 07:28:04 -0400] coderanger: kaushal: You should disable it
[2014-04-01 07:28:43 -0400] kaushal: ok
[2014-04-01 07:34:39 -0400] kaushal: coderanger: Any step by step guide to configure chef server and client?
[2014-04-01 07:35:03 -0400] coderanger: kaushal: Not that I know of, for the server you just install the package pretty much
[2014-04-01 07:35:10 -0400] coderanger: for the client its a bit more complex
[2014-04-01 07:35:28 -0400] kaushal: ok
[2014-04-01 07:52:54 -0400] kaushal: coderanger: I am not sure how do i configure chef client to listen to chef server
[2014-04-01 07:53:11 -0400] coderanger: kaushal: Just set chef_server_url in your knife.rb
[2014-04-01 07:55:24 -0400] kaushal: coderanger: any docs which i can follow and then i can ask here if i get into issues
[2014-04-01 08:00:30 -0400] coderanger: learnchef.com is the best tutorial I know of, but it is based around hosted chef
[2014-04-01 08:00:38 -0400] coderanger: though while you are just learning, thats probably easier
[2014-04-01 08:01:06 -0400] coderanger: and asking here when you have questions is good but its pretty late for most of the americas, and I've got to go pass out
[2014-04-01 08:01:17 -0400] coderanger: so you might not get many answers for a few hours
[2014-04-01 08:01:27 -0400] kaushal: sure
[2014-04-01 08:01:29 -0400] coderanger: until the european crowd gets to work :)
[2014-04-01 08:01:29 -0400] kaushal: Thanks coderanger
[2014-04-01 08:01:39 -0400] kaushal: coderanger: Thanks for all the help
[2014-04-01 08:01:43 -0400] kaushal: really appreciated
[2014-04-01 08:02:19 -0400] kaushal: so learnchef.com is the best place to start with?
[2014-04-01 08:02:26 -0400] kaushal: since i am new to chef
[2014-04-01 08:03:01 -0400] kaushal: coderanger: is there a way to setup hosted chef server in my private lan setup
[2014-04-01 09:02:12 -0400] obazoud: hi, is there a way to not synchronize cookbooks with chef-client ? (I try to debug on a given node)
[2014-04-01 09:04:12 -0400] srenatus: obazoud: 'chef-shell -z' could be helpful
[2014-04-01 09:08:41 -0400] obazoud: srenatus: thnaks but I want to debug something in a template
[2014-04-01 09:16:19 -0400] srenatus: obazoud: the -z makes chef-shell behave like a chef-client, it will also synchronise cookbooks
[2014-04-01 09:23:11 -0400] papasierra: i've just provisioned a precise64 box with apt, openssl and mysql server, nothing else. right away, upstart is not starting mysql server. i have to ssh into the vm and start the service manually. any advice?
[2014-04-01 09:45:08 -0400] papasierra: i'm just guessing, but could it be that there's a missing "sudo" before "service mysql start" somewhere?
[2014-04-01 09:46:29 -0400] srenatus: papasierra: can you have a closer look at you chef run (with "-l debug") and/or paste that somewhere?
[2014-04-01 09:46:41 -0400] srenatus: papasierra: chef-client is run as root, so there's no sudo involved
[2014-04-01 09:47:45 -0400] papasierra: srenatus: so i'm using vagrant with chef-solo, in that set up where do i get an opportunity to run chef with "-l debug"? unless i ssh into the machine and somehow do it manually?
[2014-04-01 09:48:33 -0400] srenatus: papasierra: you can specify something like chef.log_level = :debug IIRC
[2014-04-01 09:48:52 -0400] papasierra: ah right, yes i know what you're talking about. let me see...
[2014-04-01 09:50:38 -0400] papasierra: ok it's busy...
[2014-04-01 09:52:42 -0400] papasierra: srenatus: here it is http://www.hastebin.com/raw/buqicodeta
[2014-04-01 09:55:19 -0400] srenatus: papasierra: line 282: mysql is running
[2014-04-01 09:57:25 -0400] papasierra: srenatus: that's bizarre because i just sshed in and here's what it says:
[2014-04-01 09:57:27 -0400] papasierra: $ sudo service mysql status
[2014-04-01 09:57:27 -0400] papasierra: mysql stop/waiting
[2014-04-01 09:57:53 -0400] srenatus: papasierra: are you sure you're using upstart?
[2014-04-01 09:58:25 -0400] srenatus: papasierra: check /etc/init.d/mysql*  and ps aux | grep mysql
[2014-04-01 09:58:44 -0400] papasierra: srenatus: no, if i *am* using upstart this would be new to me, i've never used upstart. i understand /etc/init.d scripts, but no experience yet with upstart. hold on... checking...
[2014-04-01 09:58:51 -0400] srenatus: papasierra: the default service provider on ubuntu is still update-rc.d/sysvinit
[2014-04-01 09:59:17 -0400] papasierra: lrwxrwxrwx 1 root root 21 Jan 21 21:49 mysql -> /lib/init/upstart-job*
[2014-04-01 09:59:42 -0400] srenatus: papasierra:  oh yes
[2014-04-01 09:59:49 -0400] papasierra: ps aux | grep mysql ---> nothing
[2014-04-01 09:59:52 -0400] srenatus: the cookbook is using upstart for ubuntu now.
[2014-04-01 09:59:58 -0400] srenatus: papasierra: check /var/log/upstart/mysql
[2014-04-01 10:01:11 -0400] papasierra: srenatus: getting warmer... http://www.hastebin.com/raw/harubiwifa
[2014-04-01 10:05:53 -0400] papasierra: srenatus: those last two lines (the warnings) could those be causing it to not start? i'm curious what those ip addresses are. i've set the machine to be on 33.33.33.11
[2014-04-01 10:14:23 -0400] srenatus: papasierra: hmm possibly...
[2014-04-01 10:14:43 -0400] srenatus: papasierra: vagrant's ip address settings can be challenging
[2014-04-01 10:15:20 -0400] srenatus: papasierra: you can check what chef thinks about that via `ohai | less` in the VM, look for ipaddress
[2014-04-01 10:18:58 -0400] papasierra: srenatus: so i'm not sure what i'm looking for in ohai, so i grepped "33.33." and got this: http://www.hastebin.com/raw/qiwukikubo
[2014-04-01 10:19:37 -0400] papasierra: whereas my vagrant file says this:     config.vm.network :private_network, ip: "33.33.33.11"
[2014-04-01 10:23:57 -0400] papasierra: srenatus: just reading this https://github.com/Varying-Vagrant-Vagrants/VVV/issues/287
[2014-04-01 10:26:26 -0400] papasierra: nothing to do with apparmour right?
[2014-04-01 10:38:43 -0400] goncalop-: hi there - been googling with no luck for this question - if I'm running server spec through test kitchen how can I install new Gems that will be available in the tests?
[2014-04-01 10:39:15 -0400] goncalop-: on Busser I assume
[2014-04-01 10:58:27 -0400] yogendra: Hi there
[2014-04-01 10:59:54 -0400] yogendra: I am having issue to install chef-client on RHEL 5.2
[2014-04-01 11:00:24 -0400] yogendra: Error I am receiving "cannot verify www.opscode.com's certificate, issued by `/C= US/O=DigiCert Inc/CN=DigiCert Secure Server CA':"
[2014-04-01 11:00:33 -0400] yogendra: can somebody help me on that ?
[2014-04-01 11:03:12 -0400] yogendra: Is someone can take my question plz ?
[2014-04-01 11:15:52 -0400] Raymii_: For anyone who is interested, I wrote a piece about overwriting templates in wrapper cookbooks. Because the one stackoverflow topic is not that helpfull: https://raymii.org/s/articles/Chef_-_overwrite_templates_in_wrapper_cookbooks.html
[2014-04-01 11:50:33 -0400] srenatus: Raymii_: interesting.  one of my collegues has tackled a similar problem in a blog post, https://mouadino.appspot.com/wrapping-cookbooks-using-rewind-without-repeating-your-self, (tl;dr) showing how to just add one variable to a template resource without changing the others
[2014-04-01 11:55:54 -0400] mhenrixon: strange
[2014-04-01 12:02:11 -0400] Raymii_: srenatus the rewind gem does almost exactly the same as this, only with a nicer syntax.
[2014-04-01 12:11:58 -0400] mhenrixon: strange the ufw can't be enabled instantly
[2014-04-01 12:16:02 -0400] mhenrixon: ufw --force enable
[2014-04-01 12:16:18 -0400] mhenrixon: I tried about every way I could think of except that one
[2014-04-01 12:30:41 -0400] sherman_: hey all, how's things?
[2014-04-01 12:38:20 -0400] _sherman_: hey, dumb question. I'm going over my first puppet install, server is up, workstation configured
[2014-04-01 12:39:48 -0400] _sherman_: just wondering, am i supposed to run the bootstrap for the workstation?
[2014-04-01 12:40:38 -0400] _sherman_: knife client list   shows chef-validator and chef-webui
[2014-04-01 12:41:07 -0400] darkside_: puppet?
[2014-04-01 12:41:18 -0400] darkside_: :p
[2014-04-01 12:43:09 -0400] _sherman_: dont mention puppet... im a couple weeks into looking into automation software and CI in general, pretty sure I've settled on an architecture to try, at least initially
[2014-04-01 12:43:37 -0400] darkside_: i was just joking since you [incorrectly] mentioned it
[2014-04-01 12:43:57 -0400] _sherman_: oh haha, did too :$
[2014-04-01 12:44:31 -0400] darkside_: i've also found the initial setup instructions confusing, the workstation can be a node as well
[2014-04-01 12:45:09 -0400] darkside_: i have to run to work, but did you look at learnchef.opscode.com yet?
[2014-04-01 12:45:11 -0400] _sherman_: so *chef lol. setting up a sandbox, just virtualbox / vagrant while i learn my way arount
[2014-04-01 12:45:33 -0400] _sherman_: yeah, going through it but probs not in the right order
[2014-04-01 12:45:59 -0400] darkside_: heh, ok. sorry, gotta run
[2014-04-01 12:46:08 -0400] _sherman_: np, ta
[2014-04-01 12:48:16 -0400] _sherman_: so if anyone else is following, im setting up a chef workstation as a scratchpad.
[2014-04-01 12:50:58 -0400] _sherman_: looking at "knife bootstrap", I've followed the opscode workstation guide. would I only run bootstrap if I want to manage my workstation?
[2014-04-01 12:57:33 -0400] CPS: _sherman_: bootstrapping is a thing you do to manage the node with chef. your workstation can also be a node if you want
[2014-04-01 12:58:04 -0400] _sherman_: cool, ta
[2014-04-01 13:09:34 -0400] kaushal: Hi
[2014-04-01 13:10:31 -0400] kaushal: As per http://www.getchef.com/chef/choose-your-version/ I can see hosted chef, On Premises Chef and Chef client or open source Chef
[2014-04-01 13:10:39 -0400] kaushal: Not sure i understand it completely
[2014-04-01 13:11:03 -0400] kaushal: hosted chef is managed by opscode?
[2014-04-01 13:16:20 -0400] srenatus: https://gist.github.com/srenatus/9913764 :D
[2014-04-01 13:16:33 -0400] srenatus: so glad Berksfile is ruby
[2014-04-01 13:17:14 -0400] drrk: kaushal: yes, and on premises chef is the enterprise version you host yourself.  open souce chef is the server you host yourself, and is open source :)
[2014-04-01 13:19:26 -0400] cocotton: Hey all. Is it possible from inside a recipe to find the run list of a node?
[2014-04-01 13:21:43 -0400] kaushal: drrk: ok
[2014-04-01 13:22:23 -0400] kaushal: so what is the difference between opensource chef and on premises chef?
[2014-04-01 13:22:56 -0400] shlant: kaushal: one is free and hosted by you and one is hosted by chef
[2014-04-01 13:23:00 -0400] shlant: or "opscode"
[2014-04-01 13:23:16 -0400] shlant: the chef-server is hosted
[2014-04-01 13:23:29 -0400] kaushal: opscode is there a pricing?
[2014-04-01 13:23:43 -0400] kaushal: is it subscription based?
[2014-04-01 13:24:05 -0400] kaushal: shlant: I am new to chef and apologies for bugging
[2014-04-01 13:24:19 -0400] jonlives: kaushal: pricing is at the bottom of this page: http://www.getchef.com/enterprise-chef/
[2014-04-01 13:24:28 -0400] jonlives: pricing is per-node.
[2014-04-01 13:24:41 -0400] kaushal: per-node means client node?
[2014-04-01 13:24:52 -0400] jonlives: per node registered with the chef server, yes
[2014-04-01 13:24:57 -0400] kaushal: ok
[2014-04-01 13:25:25 -0400] shlant: kaushal: don't apologize. Everyone's at their own elvel :)
[2014-04-01 13:25:28 -0400] shlant: level*
[2014-04-01 13:26:04 -0400] kaushal: http://www.getchef.com/enterprise-chef/#plans-pricing
[2014-04-01 13:26:17 -0400] kaushal: what does Standard Support mean?
[2014-04-01 13:26:37 -0400] kaushal: is it like a customer support similar to professional services offered?
[2014-04-01 13:27:01 -0400] shlant: kaushal: http://www.getchef.com/service-level-agreement/
[2014-04-01 13:29:07 -0400] cocotton: Anyone knows how to find the run_list of a node, from inside a recipe?
[2014-04-01 13:29:27 -0400] cocotton: So on node A, when chef runs, it would be able to find the run_list of node B
[2014-04-01 13:29:44 -0400] kaushal: what is Opscode in context to chef
[2014-04-01 13:29:49 -0400] kaushal: is it the company name?
[2014-04-01 13:30:10 -0400] jbz: kaushal: The company used to be called Opscode, but now it's called Chef as well, I think.
[2014-04-01 13:31:21 -0400] kaushal: and please help me understand the difference between open source chef and On Premises Chef and open source chef?
[2014-04-01 13:31:28 -0400] kaushal: as per http://www.getchef.com/chef/choose-your-version/
[2014-04-01 13:31:44 -0400] kaushal: open source chef does not have GUI?
[2014-04-01 13:31:50 -0400] CPS: cocotton: i don't know the exact syntax, but the node object has a "run_list" list
[2014-04-01 13:32:01 -0400] kaushal: and On Premises Chef is a enterprise chef with GUI?
[2014-04-01 13:32:35 -0400] cocotton: CPS: So let's say I do : search(:node, '*:*'), that would return me a node object with its run_list
[2014-04-01 13:33:24 -0400] CPS: there's already a node object in recipes. for example, node.chef_environment returns the name of the node's environment. you don't need to create it
[2014-04-01 13:34:10 -0400] cocotton: You are right, but I'm trying to find the run_list for a node that is not the one on which chef is running
[2014-04-01 13:34:26 -0400] cocotton: So in a recipe runnning on node A, I'd like to find the run_list of B
[2014-04-01 13:34:36 -0400] cocotton: (this is for an inventory mater)
[2014-04-01 13:34:50 -0400] jonlives: kaushal: so both have a GUI. Hosted Chef comes with support from Chef the company, and includes a few extra features like ACL based permissions and reporting.
[2014-04-01 13:35:44 -0400] jonlives: kaushal: hosted chef comes in two versions - one hosted by Chef, and one you host internally on your own hardware, but that they will support.
[2014-04-01 13:36:00 -0400] CPS: cocotton: sorry, that's a bit beyond my skills
[2014-04-01 13:36:04 -0400] jonlives: kaushal: open source chef is hosted on your own hardware, and you're responsible for looking after it.
[2014-04-01 13:36:15 -0400] cocotton: CPS: in the end, what I'd like to know is to have the result of "knife status", from a recipe
[2014-04-01 13:37:09 -0400] jonlives: cocotton: you can do arbitrary ruby stuff like Chef::Node.load("foo.bar.com") which will give you the node object too
[2014-04-01 13:37:26 -0400] cocotton: jonlives: Oh! Let me try that :)
[2014-04-01 13:37:31 -0400] srenatus: CPS: what exactly are you looking for?  you could just search(:node, '*:*') and grab the attributes that `knife status` gives you
[2014-04-01 13:37:56 -0400] jonlives: cocotton: fwiw, that's what Knife plugins are doing under the hood - if you know what node you want, it's more efficiant than running a search.
[2014-04-01 13:38:04 -0400] CPS: wasn't me asking srenatus
[2014-04-01 13:38:13 -0400] srenatus: CPS: oh right
[2014-04-01 13:38:19 -0400] cocotton: srenatus: search(:node, '*:*') only seems to return the node name
[2014-04-01 13:38:30 -0400] jonlives: cocotton: that should give you the node object
[2014-04-01 13:38:39 -0400] srenatus: cocotton: nope, it gives you proper grown-up node objects
[2014-04-01 13:38:44 -0400] jonlives: if you puts it, it'll give you the string representation tho.
[2014-04-01 13:38:46 -0400] srenatus: their .to_s is the name, though
[2014-04-01 13:38:49 -0400] jonlives: right
[2014-04-01 13:39:01 -0400] srenatus: hrhr I'll go away ;)
[2014-04-01 13:39:03 -0400] cocotton: srenatus: oh :P
[2014-04-01 13:39:06 -0400] jonlives: if you puts result.class you should see Chef::Node
[2014-04-01 13:39:33 -0400] cocotton: alright I'll try it right now
[2014-04-01 13:40:04 -0400] mdfrick: Has anyone run into issues where a Chef run stalls for ~90 seconds when calling https://<chef-server>/environments/<env>/cookbook_versions ?
[2014-04-01 13:40:05 -0400] cocotton: You were totally right. Thank you all :)
[2014-04-01 13:40:11 -0400] jonlives: cocotton: no probs!
[2014-04-01 13:41:11 -0400] mdfrick: Only thing I can think to try is removing items one at a time to determine where the extra complexity is coming from... Erchef is pegged at 100% CPU during that time as well.
[2014-04-01 13:44:10 -0400] kaushal: jonlives: ok
[2014-04-01 13:44:21 -0400] jonlives: kaushal: does that all make sense?
[2014-04-01 13:44:46 -0400] kaushal: jonlives: the open source chef which i will install in my hardware does not have GUI package right?
[2014-04-01 13:44:52 -0400] jonlives: kaushal: it has a web UI
[2014-04-01 13:44:58 -0400] jonlives: kaushal: all of them have a web UI, for that matter
[2014-04-01 13:44:59 -0400] kaushal: I tried installing chef server and client
[2014-04-01 13:45:04 -0400] kaushal: jonlives: ok
[2014-04-01 13:45:14 -0400] kaushal: I did installed chef server
[2014-04-01 13:45:24 -0400] kaushal: what port does it listen to?
[2014-04-01 13:45:29 -0400] jonlives: 443 by default.
[2014-04-01 13:45:32 -0400] kaushal: ok
[2014-04-01 13:45:34 -0400] jonlives: kaushal: if you're experimenting, I'd recommend using the free tier of hosted chef
[2014-04-01 13:45:40 -0400] jonlives: you get 5 nodes for free
[2014-04-01 13:45:53 -0400] jonlives: and it saves you having to worry about setting up the server etc
[2014-04-01 13:46:40 -0400] kaushal: ok
[2014-04-01 13:48:14 -0400] kaushal: jonlives: is there a Mailing list to discuss about chef?
[2014-04-01 13:48:20 -0400] kaushal: I mean community based
[2014-04-01 13:48:58 -0400] alexbst: https://wiki.opscode.com/display/chef/Mailing+Lists
[2014-04-01 13:49:01 -0400] kaushal: ok
[2014-04-01 13:49:37 -0400] alexbst: http://docs.opscode.com/community_lists.html too :)
[2014-04-01 13:49:38 -0400] jonlives: kaushal: check out http://docs.opscode.com/community_lists.html
[2014-04-01 13:49:43 -0400] jonlives: yeah, that :p
[2014-04-01 13:49:44 -0400] alexbst: not too hard to goog.
[2014-04-01 13:51:19 -0400] kaushal: alexbst: can i use my gmail web client to post to chef@lists.opscode.com?
[2014-04-01 13:51:33 -0400] kaushal: or do i need to http://lists.opscode.com/sympa/compose_mail/chef?
[2014-04-01 13:51:44 -0400] alexbst: kaushal - any mail client should work.
[2014-04-01 13:51:53 -0400] kaushal: alexbst: ok
[2014-04-01 13:51:55 -0400] alexbst: (like normal for any mailing list..)
[2014-04-01 13:52:02 -0400] kaushal: ok
[2014-04-01 13:52:18 -0400] kaushal: alexbst: Thanks a lot
[2014-04-01 13:52:26 -0400] nkts: I'm suffering from api.opscode.com timeouts
[2014-04-01 13:52:47 -0400] nkts: is it just for me ?
[2014-04-01 13:52:52 -0400] kaushal: jonlives: Thanks for all the help and making me understand about chef
[2014-04-01 13:52:57 -0400] alexbst: nkts - check the status page.. and/or your network connectivity :)
[2014-04-01 13:53:08 -0400] kaushal: jonlives: really appreciated
[2014-04-01 13:53:11 -0400] alexbst: (or raise a support request.. eep)
[2014-04-01 13:53:14 -0400] alexbst: jonlives++
[2014-04-01 13:53:16 -0400] nkts: alexbst, I have checked :)
[2014-04-01 13:53:27 -0400] nkts: status.getchef.com doesn't even exist
[2014-04-01 13:53:36 -0400] alexbst: it ought to
[2014-04-01 13:53:39 -0400] alexbst: status.opscode.com does though
[2014-04-01 13:53:40 -0400] kaushal: to start with chef i think i should refer to https://learnchef.opscode.com/?
[2014-04-01 13:53:48 -0400] kaushal: is that correct?
[2014-04-01 13:53:57 -0400] alexbst: kaushal - the learnchef page is a great place to start, sure.
[2014-04-01 13:54:10 -0400] kaushal: alexbst: ok
[2014-04-01 13:54:26 -0400] alexbst: it's been written with new users completely in scope :-)
[2014-04-01 13:54:30 -0400] kaushal: Thanks alexbst for the guidance
[2014-04-01 13:54:37 -0400] jonlives: kaushal: no worries!
[2014-04-01 13:54:51 -0400] kaushal: to know chef do i need to know ruby programming language?
[2014-04-01 13:55:06 -0400] alexbst: no, but it will be useful and easy to pick up later.
[2014-04-01 13:55:18 -0400] coredump: quick check, using berkshelf, if I have a cookbook that requires a cookbook on 1.0.0 version and another one that requires 2.0, the only way is to update the first to use 2.0 right, or I will have missing dependencies
[2014-04-01 13:55:24 -0400] jonlives: kaushal: you might want to keep an eye on http://shop.oreilly.com/product/0636920032397.do - it's released in June for real but you can get a ebook-prerelease for it now.
[2014-04-01 13:55:36 -0400] kaushal: Hi again
[2014-04-01 13:55:39 -0400] kaushal: got disconnected
[2014-04-01 13:55:43 -0400] dotplus: kaushal: http://docs.opscode.com/just_enough_ruby_for_chef.html
[2014-04-01 13:55:44 -0400] kaushal: to know chef do i need to know ruby programming language?
[2014-04-01 13:55:47 -0400] kaushal: ok
[2014-04-01 13:55:52 -0400] jonlives: kaushal: minimal ruby knowledge is needed.
[2014-04-01 13:55:53 -0400] jonlives: kaushal: you might want to keep an eye on http://shop.oreilly.com/product/0636920032397.do - it's released in June for real but you can get a ebook-prerelease for it now.
[2014-04-01 13:56:05 -0400] kaushal: ok
[2014-04-01 13:56:18 -0400] jonlives: and I suppose I might as well plug mine as a follow up read: http://shop.oreilly.com/product/0636920032984.do out in November, pre-release also available now :p
[2014-04-01 13:58:29 -0400] kaushal: jonlives: awesome
[2014-04-01 13:58:38 -0400] kaushal: jonlives: will keep a tab
[2014-04-01 13:58:47 -0400] mdfrick: jonlives: how "introductory" do you think Seth and Mischa's book is?  Any idea?
[2014-04-01 13:58:57 -0400] mdfrick: (not sure if they're here to just ask either of them)
[2014-04-01 13:58:58 -0400] jonlives: mdfrick: it's from the very basics
[2014-04-01 13:59:25 -0400] mdfrick: Yours looks a bit more my speed.
[2014-04-01 13:59:27 -0400] kaushal: jonlives: Configuration Management and Automation
[2014-04-01 13:59:47 -0400] jonlives: mdfrick: if you're already pretty Chef fluent, mine might suit more yeah
[2014-04-01 13:59:48 -0400] mdfrick: I'm always on the lookout for good reads on the subject.
[2014-04-01 13:59:49 -0400] kaushal: what does Automation mean in context to chef?
[2014-04-01 14:00:12 -0400] kaushal: it is basically a Configuration management tool?
[2014-04-01 14:00:17 -0400] jonlives: kaushal: exactly
[2014-04-01 14:01:06 -0400] jonlives: kaushal: automation in the sense of writing recipes etc to handle installing and configuring the needed applications, software etc etc...
[2014-04-01 14:01:51 -0400] kaushal: jonlives: can i install OS for example CentOS Linux 6.5 in the nodes?
[2014-04-01 14:01:56 -0400] kaushal: using chef
[2014-04-01 14:02:06 -0400] jonlives: kaushal: Chef runs on top of the operating system as a client on the node, so no.
[2014-04-01 14:02:06 -0400] kaushal: correct me if i am understanding it wrong
[2014-04-01 14:02:13 -0400] jonlives: you can use it to spin up virtual machines though.
[2014-04-01 14:02:19 -0400] jonlives: ie using vagrant or ec2 etc
[2014-04-01 14:02:32 -0400] jonlives: if you mean automating an OS install in the same way as kickstart does, you can't do that.
[2014-04-01 14:02:59 -0400] kaushal: jonlives: you said vagrant or ec2 etc?
[2014-04-01 14:03:09 -0400] kaushal: not sure i understand that bit
[2014-04-01 14:03:33 -0400] jonlives: kaushal: so if you're provisioning cloud instances from an existing image, you can do that with Chef, but chef cannot itself install an operating system.
[2014-04-01 14:03:58 -0400] jonlives: kaushal: to give you an idea, at Etsy our server build pipeline uses Cobbler to install CentOS on the boxes and install Chef, then Chef takes the server from fresh OS install to fully configured.
[2014-04-01 14:04:15 -0400] jonlives: but the chef client program runs on the node, on top of the operating system.
[2014-04-01 14:06:02 -0400] jonlives: kaushal: if you imagine you've just installed CentOS on a box, and have to get it from the base install to fully configured, Chef automates that part :)
[2014-04-01 14:06:30 -0400] mdfrick: Purchased.  Pleasure doing business with you (O'Reilly), jonlives.  :-)
[2014-04-01 14:07:11 -0400] kaushal: jonlives: understood now
[2014-04-01 14:07:17 -0400] mdfrick: Oh, you're at Etsy, jonlives?
[2014-04-01 14:07:18 -0400] jonlives: mdfrick: oh cool thanks :D
[2014-04-01 14:07:21 -0400] jonlives: mdfrick: yep
[2014-04-01 14:07:34 -0400] jonlives: mdfrick: you get the full version for free when it's out of course having bought the early release
[2014-04-01 14:07:44 -0400] mdfrick: You go to the Chef / NYCdevops meetups?
[2014-04-01 14:07:52 -0400] jonlives: mdfrick: I'm in the UK
[2014-04-01 14:08:16 -0400] mdfrick: Ohhh... not the NYC office... gotcha.  haha
[2014-04-01 14:08:30 -0400] jonlives: mdfrick: right, sorry :p
[2014-04-01 14:08:31 -0400] kaushal: jonlives: Thanks again
[2014-04-01 14:08:43 -0400] jonlives: kaushal: np! ask away if you have any more questions
[2014-04-01 14:08:43 -0400] kaushal: jonlives: have to step out
[2014-04-01 14:09:08 -0400] kaushal: will discuss here in details as i have more questions after reading the docs
[2014-04-01 14:24:30 -0400] railsraider: still getting this annoying bug of chef tryiing to start upstart that already running
[2014-04-01 14:24:46 -0400] srenatus: railsraider: using the proper provider?
[2014-04-01 14:24:53 -0400] railsraider: i know its supposed to check the status and if its running skip it
[2014-04-01 14:24:54 -0400] railsraider: yes
[2014-04-01 14:24:59 -0400] srenatus: railsraider: and what does "status $service" say
[2014-04-01 14:25:10 -0400] srenatus: railsraider: try running with -ldebug
[2014-04-01 14:25:23 -0400] railsraider: its says exit 1 already running
[2014-04-01 14:26:11 -0400] srenatus: railsraider: exit 1?  shouldn't do that, should it?
[2014-04-01 14:26:36 -0400] railsraider: no
[2014-04-01 14:26:40 -0400] srenatus: `status rabbitmq-server` gives me $?==0
[2014-04-01 14:26:55 -0400] railsraider: if its running yes
[2014-04-01 14:27:03 -0400] railsraider: the error from chef is 1
[2014-04-01 14:27:12 -0400] railsraider: when it tries to start service
[2014-04-01 14:27:35 -0400] railsraider: http://pastebin.com/cqap83Eu
[2014-04-01 14:27:39 -0400] railsraider: this is the service
[2014-04-01 14:27:47 -0400] railsraider: service status is runnnig
[2014-04-01 14:28:59 -0400] srenatus: railsraider: I guess /etc/init/eye.conf would be more interesting
[2014-04-01 14:29:24 -0400] railsraider: ok now we get something else job failed to start so im rechecking
[2014-04-01 14:29:51 -0400] srenatus: railsraider: https://github.com/opscode/chef/blob/master/lib/chef/provider/service/upstart.rb#L99-L101
[2014-04-01 14:30:15 -0400] srenatus: if status is supported, the upstream provider expects the "status eye" command to exit 0 iff the service is running
[2014-04-01 14:30:24 -0400] railsraider: thanks
[2014-04-01 14:30:46 -0400] srenatus: :)
[2014-04-01 14:33:19 -0400] nkts: chefignore file is ignore for me - it uploads all the files
[2014-04-01 14:34:29 -0400] nkts: I have it it the top directory of my chef cookbook repository
[2014-04-01 14:34:41 -0400] nkts: (at the same level as .chef)
[2014-04-01 14:36:00 -0400] nkts: looks like it has to be in cookbooks/
[2014-04-01 14:37:31 -0400] samwierema: One of our nodes is using a cached cookbook version, how we can make sure that it always downloads the latest version on each run?
[2014-04-01 14:39:27 -0400] nkts: simply you could delete cookbook from the cache
[2014-04-01 14:39:57 -0400] srenatus: there's a tiny thing that repeatedly bugs me because I don't know how to properly do it:  imagine there could be a file (a log file), and it needs to be writable by a specific user/group.  How can I chef that?  file "/var/log/foo.log" with create will unlink the file first create_if_missing will either create (if the file is not there) or do nothing
[2014-04-01 14:40:01 -0400] nkts: I have noticed that chef-client sometimes picks up cached version of the cookbook
[2014-04-01 14:40:07 -0400] srenatus: and execute "chmod ..." seems kind of wrong
[2014-04-01 14:40:47 -0400] srenatus: samwierema: you could use "berks apply ENV" to transfer the berksfile.lock restrictions into your nodes' environment
[2014-04-01 14:41:28 -0400] nkts: srenatus, https://gist.githubusercontent.com/nkts/9915503/raw/3271ea93b9932501eaf1f84b5504f005522a1071/gistfile1.txt
[2014-04-01 14:42:33 -0400] srenatus: nkts: that's using :create as default action
[2014-04-01 14:43:03 -0400] srenatus: nkts: oh nvm
[2014-04-01 14:43:20 -0400] srenatus: nkts: I just realised do_unlink does not unconditionally unlink the file
[2014-04-01 14:44:08 -0400] nkts: I doesn't unlink for me
[2014-04-01 14:44:11 -0400] nkts: if file exists
[2014-04-01 14:44:19 -0400] srenatus: yes, indeed. only with force_unlink set to true
[2014-04-01 14:44:26 -0400] nkts: and "custom" content is there
[2014-04-01 14:44:30 -0400] srenatus: nkts: thanks
[2014-04-01 14:52:43 -0400] samwierema: srenatus: thanks, but clearing the cache folder doesn't fix it
[2014-04-01 14:52:59 -0400] samwierema: srenatus: and berks apply doesn't work for _default
[2014-04-01 14:54:21 -0400] samwierema: srenatus: can it be that the Chef server is caching API request/responses when a node queries it?
[2014-04-01 14:58:53 -0400] srenatus: samwierema: there's nginx in the chef-server, but it shouldn't cache stuff like that
[2014-04-01 14:59:06 -0400] srenatus: samwierema: just delete the old version ;)
[2014-04-01 14:59:20 -0400] srenatus: samwierema: knife cookbook delete the-bad-one, it will ask for confirmation
[2014-04-01 15:03:38 -0400] dotplus: how does chef deal with the issue of external data sources? for example, what is the chef-blessed method of setting certain attributes based on the contents of, say, an ldap directory or SQL database lookup? presumably there is a standard pattern for this? I couldn't see it discussed
[2014-04-01 15:04:38 -0400] samwierema: srenatus: thanks. Question about versioning now: the version it used was 0.1.8, while it should use 0.1.14, but when we deleted it, it started using 0.1.7 instead
[2014-04-01 15:04:58 -0400] samwierema: srenatus: is that sort of versioning ok (e.g. 0.1.14)
[2014-04-01 15:05:11 -0400] jonlives: dotplus: there are a couple of ways - you can, for example, do that with ohai plugins.
[2014-04-01 15:05:33 -0400] jonlives: dotplus: we set an attribute on our nodes to indicate what datacenter they live in, which is obtained from our asset mgmt system.
[2014-04-01 15:06:26 -0400] srenatus: samwierema: the set of cookbooks the server gives you only needs to satisfy the dependencies, it's not "the latest possible versions" or any such thing (unfortunately and AFAIK)
[2014-04-01 15:07:10 -0400] dotplus: jonlives: ok, makes sense. "a couple...", got something else?
[2014-04-01 15:12:09 -0400] nkts: if recipe foo::bar will include a recipe foo::zoo, is there a way to check if foo::zoo is included as I can't see it in runlist
[2014-04-01 15:12:15 -0400] nkts: ?
[2014-04-01 15:12:52 -0400] walker_: have you tried node[recipes].include?('foo::zoo')
[2014-04-01 15:14:30 -0400] jonlives: dotplus: you could probably also do it via libraries in your cookbook - for setting attribs from external data sources though, I'd def go with ohai plugins
[2014-04-01 15:14:46 -0400] jonlives: very much fits the ohai plugin pattern.
[2014-04-01 15:22:02 -0400] nkts: walker_, thanks, will try
[2014-04-01 15:22:04 -0400] dotplus: can one node read the attributes/roles of other nodes? e.g. if we create a recipe for resolv.conf, can it set the values for nameservers to be the IPs of all nodes that have the nameserver role?
[2014-04-01 15:22:15 -0400] nkts: I'm suffering from API timeouts again :(
[2014-04-01 15:33:13 -0400] Gazzonyx: Morning *, I'm seeing this stack trace: http://pastie.org/8985873 during a "kitchen converge" and can't figure out what the problem is that is causing the top of the trace to say "undefined method `baseurl' for Chef::Resource::YumRepository". I don't know Ruby to save my life, so if anyone could point me in the right direction, I'd appreciate it.
[2014-04-01 15:36:18 -0400] tvanhens: Does anyone have any experience successfully getting iam roles to work with kitchen-ec2?
[2014-04-01 15:37:17 -0400] bettyclamp: Why does node.run_list return nothing when evaluated in a chef-shell?
[2014-04-01 15:38:12 -0400] bettyclamp: Also, what is it supposed to return? An array of strings?
[2014-04-01 15:45:25 -0400] Nukepuppy: never tried this for some reason but does package allow wildcards?
[2014-04-01 15:45:31 -0400] Nukepuppy: like package 'libvpx*' ?
[2014-04-01 15:56:21 -0400] joelmoss: hi all
[2014-04-01 15:56:50 -0400] joelmoss: I need to set an attrbute that is specific to a node, but want it kept in my chef repo. what is the best way to do that?
[2014-04-01 15:57:07 -0400] joelmoss: I can set it on the server, but that wont be in my chef repo then
[2014-04-01 15:59:42 -0400] jonlives: dotplus: you could do that in recipes using chef search (in response to your resolv.conf query)
[2014-04-01 16:00:12 -0400] jonlives: dotplus: ie search for node(role:dns_server) and add each result to the resolv.conf template
[2014-04-01 16:04:57 -0400] sparky1: joelplus:  you could set that attribute in a role and assign that role to the node.  or set it in a node file, but you don't want to upload those to chef regularly as that wipes out ohai data
[2014-04-01 16:05:26 -0400] sparky1: errrr  joelmoss   :)
[2014-04-01 16:05:59 -0400] joelmoss: hmm
[2014-04-01 16:06:10 -0400] joelmoss: might just set it on the server only for now
[2014-04-01 16:08:26 -0400] dotplus: jonlives: got it. making progress. thanks
[2014-04-01 16:10:13 -0400] samwierema: srenatus: the cookbook in this case is our own, and depends on some from the opscode site. How does it determine then that an older version satisfies dependencies, while the new one does as well (if we force a version with @ it also works)
[2014-04-01 16:11:09 -0400] srenatus: samwierema: sorry gtg
[2014-04-01 16:12:10 -0400] samwierema: srenatus: thanks for the help
[2014-04-01 16:21:48 -0400] samwierema: Where do I start looking if Chef server does not return the latest version of a cookbook?
[2014-04-01 16:23:51 -0400] jonlives: dotplus: np!
[2014-04-01 16:25:52 -0400] jperry: ohai chefs!
[2014-04-01 16:26:28 -0400] jperry: anyone out there doing single cookbook per repository?  and if yes where do you store your environment, data bags, and role files?  Do those all live in a single repo?
[2014-04-01 16:27:40 -0400] jidar: jperry: that seems a bit heavy
[2014-04-01 16:27:41 -0400] jperry: we are moving to the single cookbook per repository model and wanted to see others are doing this and if you have any recommendations
[2014-04-01 16:28:04 -0400] jidar: even doing it in a submodule process is heavy imho
[2014-04-01 16:28:14 -0400] jperry: jidar: what I mean is that the environment, data bags and roles all live together
[2014-04-01 16:28:19 -0400] jperry: I like the single cookbook per repository
[2014-04-01 16:28:29 -0400] jperry: so with our scale and size we have to move to this model
[2014-04-01 16:29:25 -0400] jperry: having a single repository has been a bottleneck and doesn't encourage testing in isolation
[2014-04-01 16:29:40 -0400] jidar: have you heard of branches?
[2014-04-01 16:29:55 -0400] workmad3: jperry: I have a chef-repo repository with the environments, databags, etc. and also a Berksfile with all my custom cookbooks
[2014-04-01 16:30:13 -0400] jperry: yes we plan to use berkshelf
[2014-04-01 16:30:31 -0400] jperry: where eco your custom cookbooks live?
[2014-04-01 16:30:31 -0400] workmad3: jidar: a single git repo per cookbook is fairly common now... and is in many ways easier to manage ;)
[2014-04-01 16:30:42 -0400] jidar: I don't believe you
[2014-04-01 16:31:11 -0400] jperry: jidar: why do you think it's not easy to manage?
[2014-04-01 16:31:12 -0400] workmad3: jperry: I use bitbucket for custom cookbooks... unlimited private repos
[2014-04-01 16:31:26 -0400] jperry: we have a github enterprise
[2014-04-01 16:31:31 -0400] jperry: so repos aren't a problem
[2014-04-01 16:31:48 -0400] jperry: I plan to extract our custom cookbooks into single repos
[2014-04-01 16:32:04 -0400] jperry: and use berkshelf to pull community ones and resolve dependencies
[2014-04-01 16:32:29 -0400] jperry: workmad3: where do you store your environment roles and data bags?  are they in a single repo?
[2014-04-01 16:33:43 -0400] workmad3: jidar: thankfully, opscode don't need you to believe: https://github.com/opscode-cookbooks neither do Riot: https://github.com/RiotGames or EY: https://github.com/engineyard-cookbooks
[2014-04-01 16:34:14 -0400] workmad3: jperry: yeah, I just use a fairly standard chef-repo for that
[2014-04-01 16:34:27 -0400] jperry: thats what I planning on doing
[2014-04-01 16:34:39 -0400] jperry: everything but cookbooks
[2014-04-01 16:36:18 -0400] jperry: the other good thing about breaking it apart you can manage permissions on important cookbooks
[2014-04-01 16:36:32 -0400] jperry: git doesn't allow you to get permissions per branch or directory etc
[2014-04-01 16:37:28 -0400] workmad3: jperry: if you need to put sensitive data into your cookbooks, you can also consider https://github.com/AGWA/git-crypt
[2014-04-01 16:38:12 -0400] jperry: we use encrypted data bags for sensitive stuff
[2014-04-01 16:38:18 -0400] jperry: but that is a good pointer I may check it out
[2014-04-01 16:38:27 -0400] workmad3: jperry: yeah, that's good for getting it to the nodes
[2014-04-01 16:38:44 -0400] jperry: we don't store the keys either in scm
[2014-04-01 16:38:54 -0400] workmad3: jperry: git-crypt encrypts the data in the repo, so only the admins with the key can see the sensitive data, while others only see garbage
[2014-04-01 16:39:06 -0400] workmad3: jperry: different use-case, basically ;)
[2014-04-01 16:39:14 -0400] jperry: ah I see
[2014-04-01 16:39:21 -0400] jperry: I'll keep it handy in case
[2014-04-01 16:39:24 -0400] jperry: thx for the tip
[2014-04-01 16:39:52 -0400] jperry: workmad3: do you do follow the application or wrapper cookbook pattern?
[2014-04-01 16:40:37 -0400] Adobeman: how would I write my receipe if I want it to create file base on the 'network segment' I'm on?  for example, if I'm on 192.168.1.#, it will write A.  if 192.168.2.#, it will write B.
[2014-04-01 16:41:01 -0400] Adobeman: if anyone can point me to some sample receipes.. that would be good
[2014-04-01 16:41:55 -0400] workmad3: jperry: not particularly... I kinda built everything in our infrastructure from scratch as resources rather than recipes, then I have a recipe per server-config that's the only thing in a run-list, which sets up the entire node
[2014-04-01 16:42:28 -0400] jperry: workmad3: ah o
[2014-04-01 16:42:31 -0400] jperry: ok
[2014-04-01 16:43:04 -0400] jperry: Adobeman: use a guard check to split on '.'
[2014-04-01 16:43:12 -0400] jperry: and to check the 3 element
[2014-04-01 16:43:26 -0400] workmad3: jperry: wrapper cookbooks are a good style though, IMO... I just wanted that extra step (most people would probably not need to be that crazy about things :) )
[2014-04-01 16:43:27 -0400] jperry: in an array it would be 2
[2014-04-01 16:43:33 -0400] Adobeman: umm
[2014-04-01 16:43:41 -0400] Adobeman: ok
[2014-04-01 16:43:49 -0400] Adobeman: I know how to do it in shell scripts :P
[2014-04-01 16:44:03 -0400] gleam: hah it's adobeman
[2014-04-01 16:44:04 -0400] jperry: http://docs.opscode.com/chef/resources.html#only-if-examples
[2014-04-01 16:44:09 -0400] jperry: use ruby
[2014-04-01 16:44:21 -0400] Adobeman: ok, thanks
[2014-04-01 16:44:27 -0400] Adobeman: gleam: whats up
[2014-04-01 16:44:40 -0400] jperry: http://ruby-doc.org/core-1.9.3/String.html#method-i-split
[2014-04-01 16:44:53 -0400] gleam: not much, how you doing?
[2014-04-01 16:45:01 -0400] jperry: Adobeman: http://ruby-doc.org/core-1.9.3/String.html#method-i-split
[2014-04-01 16:45:03 -0400] Adobeman: gleam: I'm doing okay :)
[2014-04-01 16:45:28 -0400] Adobeman: ok, going to read up abit..
[2014-04-01 16:45:31 -0400] Adobeman: thank you
[2014-04-01 16:45:36 -0400] gleam: you can also just do a simple case node[:ipaddress]
[2014-04-01 16:45:39 -0400] gleam: and then when /regexp/
[2014-04-01 16:45:51 -0400] gleam: lots of ways to do it
[2014-04-01 16:46:12 -0400] Adobeman: yeah, I was looking at the :ipaddress thing..
[2014-04-01 16:47:15 -0400] jperry: Adobeman: http://hastebin.com/mivefucuve.vbs
[2014-04-01 16:47:39 -0400] jperry: http://hastebin.com/danokayogu.vbs
[2014-04-01 16:47:46 -0400] jperry: last one uses ipaddress
[2014-04-01 16:48:01 -0400] jperry: then create some chef specs to validate each one
[2014-04-01 16:48:07 -0400] Adobeman: aye
[2014-04-01 17:11:12 -0400] papasierra: chef question specific to the php cookbook: i'm using php-fpm. all i really need/want is the php-fpm cookbook which is working great. but now i need a pecl extension (imagick). in order to get this i guess i would use the php_pear lwrp (http://docs.opscode.com/lwrp_php.html#php-pear) that is found in the php cookbook. the problem is, do i really want to install the entire php just so use the pear provider?
[2014-04-01 17:12:45 -0400] wdilly: Hi chefs, I am having a problem with this code block: http://fpaste.org/90665/96371909/ my not_if does not appear to function properly. The #{UserName} in the file.exists gives a false positive is appears to evaluate to true for any value of UserName
[2014-04-01 17:23:26 -0400] gleam:    ro
[2014-04-01 17:24:46 -0400] workmad3: wdilly: quick warning - don't use variables with a capital first letter
[2014-04-01 17:24:57 -0400] workmad3: wdilly: in ruby, those are constants, not variables and could cause you issues
[2014-04-01 17:25:18 -0400] wdilly: workmad3, okay, I will change that.
[2014-04-01 17:25:57 -0400] workmad3: wdilly: one of the things that will change is how they work in closures (what the not_if gets passed)
[2014-04-01 17:30:16 -0400] wdilly: workmad3, testing now....
[2014-04-01 17:30:57 -0400] wdilly: workmad3, that seems to have been the issue.
[2014-04-01 17:31:00 -0400] wdilly: thank you
[2014-04-01 17:35:22 -0400] workmad3: wdilly: np :)
[2014-04-01 17:42:47 -0400] wdilly: workmad3, why was it being evaluated differently in line 1 vs line 3?
[2014-04-01 17:43:23 -0400] workmad3: wdilly: the not_if block is run in the compile phase
[2014-04-01 17:43:57 -0400] workmad3: wdilly: at which point I bet the UserName 'variable' had been changed... and because it was really a constant, it was being looked up directly
[2014-04-01 17:44:15 -0400] wdilly: youre correct, it had been changed.
[2014-04-01 17:44:24 -0400] workmad3: wdilly: whereas a local variable is captured in the closure passed to the not_if with the value at the time of creating the closure
[2014-04-01 17:44:32 -0400] wdilly: okay, so moral of the story, dont use a capital for the first letter of a variable
[2014-04-01 17:44:41 -0400] workmad3: wdilly: yeah
[2014-04-01 17:44:56 -0400] workmad3: wdilly: because then it's not a variable in ruby, it's a constant (also don't use a $, which is a global variable)
[2014-04-01 17:45:41 -0400] wdilly: $example is a global ?
[2014-04-01 17:45:48 -0400] workmad3: yeah
[2014-04-01 17:46:15 -0400] wdilly: thx
[2014-04-01 17:46:23 -0400] workmad3: Constant, local_variable (or method), @instance_variable, @@class_variable, $global_variable
[2014-04-01 17:59:55 -0400] wdilly: is "knife ssh" the best way for a workstation to remotely force a client run on a remote client?
[2014-04-01 18:03:36 -0400] doomviking: thats how I would do it
[2014-04-01 18:06:53 -0400] doomviking: except I would ask nicely instead of forcing it
[2014-04-01 18:08:15 -0400] dstynchu_: wdilly: varnish ssh (nodename) sudo chef-client... works also
[2014-04-01 18:08:34 -0400] dstynchu_: or just ssh (nodename/ip) sudo chef-client
[2014-04-01 18:10:12 -0400] yogi_: HI there
[2014-04-01 18:10:35 -0400] yogi_: I am having issue installing the chef-client on RHEL 5.4
[2014-04-01 18:11:12 -0400] yogi_: I am receiving the error "WARNING: cannot verify www.opscode.com's certificate, issued by `/ C=US/O=DigiCert Inc/CN=DigiCert Secure Server CA':"
[2014-04-01 18:11:36 -0400] yogi_: can someone help me out for installing the chef-client on RHEL 5.4
[2014-04-01 18:14:00 -0400] yogi_: hi
[2014-04-01 18:16:41 -0400] lnxchk: yogi_: what install method are you using?
[2014-04-01 18:17:07 -0400] yogi_: using knife bootstrap
[2014-04-01 18:20:43 -0400] coderanger: yogi_: You need a newer curl
[2014-04-01 18:21:32 -0400] yogi_: newer curl means ?
[2014-04-01 18:21:58 -0400] yogi_: what version of curl, I have to use ?
[2014-04-01 18:22:30 -0400] coderanger: yogi_: Something with DigiCert's CA?
[2014-04-01 18:22:49 -0400] coderanger: yogi_: Your system is too old to recognize the SSL certificate used by Opscode
[2014-04-01 18:23:16 -0400] yogi_: I have checked RHEL 5.4 using openssl 0.9.X
[2014-04-01 18:23:41 -0400] coderanger: The version of OpenSSL itself doesn't matter, what you need is a newer CA bundle
[2014-04-01 18:24:31 -0400] yogi_: can you help me out how to get newer CA bundle
[2014-04-01 18:25:28 -0400] coderanger: Yes, install a newer version of curl, it includes one
[2014-04-01 18:26:09 -0400] yogi_: ok, Thanks a lot... I will try  to get new version of curl
[2014-04-01 18:26:45 -0400] yogi_: Can I have your email ID, So I can post you ?
[2014-04-01 18:27:49 -0400] matticulous: hi, hoping someone can help. re-ran the omnibus installer to update my chef-client on os x (10.9). now gems with native extensions cannot be installed. for example, [omnibus_path]/gem install knife-ec2 fails. can anyone help provide direction?
[2014-04-01 18:28:14 -0400] CPS: gist the error output
[2014-04-01 18:33:39 -0400] matticulous: gist with 2 examples: https://gist.github.com/matticulous/9920160
[2014-04-01 18:34:05 -0400] matticulous: one is a cookbook using chef_gem; other is using /opt/chef/embedded/bin/gem install command
[2014-04-01 18:36:16 -0400] matticulous: have development tools installed. all was working with previous client (11.8.2).
[2014-04-01 18:39:10 -0400] kbarry: Whats the knife commnd to set the environment of a node?
[2014-04-01 18:40:44 -0400] CPS: kbarry: there isn't one out of the box
[2014-04-01 18:40:58 -0400] CPS: you can do knife node edit nodename, but that opens a json file to edit
[2014-04-01 18:41:10 -0400] jbz: CPS:  knife node flip?
[2014-04-01 18:41:14 -0400] jbz: Or ist hat a plugin?
[2014-04-01 18:41:16 -0400] jbz: lol
[2014-04-01 18:41:20 -0400] CPS: if you need something to just run, like in a script, use the knife flip plugin
[2014-04-01 18:41:29 -0400] CPS: flip is a gem you have to download
[2014-04-01 18:41:40 -0400] jbz: ah.
[2014-04-01 18:42:57 -0400] CPS: the author claims there's a feature request to roll it in to a future knife release
[2014-04-01 18:49:10 -0400] mhenrixon: Can I force refresh the chef-client somehow? It seems like it isn't fetching my new cookbook version
[2014-04-01 18:53:13 -0400] mhenrixon: there must be some cache or something that doesn't get updated somehow and it just keeps intalling the same cookbook version over and over again
[2014-04-01 18:54:37 -0400] CPS: there is a cache directory where it stores files
[2014-04-01 18:54:48 -0400] CPS: dunno where it is on linux though
[2014-04-01 18:55:07 -0400] segv: ssd7, ohai, who do I ping about the status of my CLA?
[2014-04-01 19:05:49 -0400] no_name: Hi, I've made some changes to my Chef Workstation, and it appears both my knife windows and knife azure plugins "disappeared"
[2014-04-01 19:06:03 -0400] no_name: any idea what change could instantly make them not available?
[2014-04-01 19:06:05 -0400] papasierra: i've managed to upgrade my way into a broken setup. now, something (vagrant-berkshelf?) is creating a yml looking Berksfile.lock instead of json. i understand that's the new way, but i'm getting Error reading the Berkshelf lockfile `Berksfile.lock` (JSON::ParserError) when i run "berks install"
[2014-04-01 19:12:19 -0400] hugespoon: i assume this has been done before, but my google-fu is limited today it seems. i have multiple orgs in enterprise chef that i would like to upload a cookbook to when a build/test completes from jenkins, is there an elegant solution or gem im not thinking of at the moment other than make my build jobs upload to each org individually?
[2014-04-01 19:12:57 -0400] hugespoon: any RTFM/ref would be greatly appreciated
[2014-04-01 19:13:25 -0400] no_name: hugespoon : I'm not sure if thisis the "correct" way, but I have my Chef Workstation set as a Jenkins slave and then have jobs tied to it that upload cookbooks, etc to the Chef Server
[2014-04-01 19:15:39 -0400] no_name: so I'm just invoking knife commands in the shell entries for various Jenkins jobs
[2014-04-01 19:15:55 -0400] hugespoon: no_name: thanks, that is sort of what i was thinking was the 'smash-it-in' approach
[2014-04-01 19:16:30 -0400] hugespoon: but i suppose i could setup my jenkins server as a chef client with org access and create a dependent job after my test jobs complete that will push it out to all the various orgs
[2014-04-01 19:16:38 -0400] no_name: There may be some other ways, but I'm used to Jenkins directing all the operations (builds, deploys, etc)
[2014-04-01 19:17:54 -0400] no_name: I'm approaching it from the angle that chef does run lists and checkin's best, but that Jenkins handles everything else
[2014-04-01 19:18:11 -0400] no_name: I'm also using Open Source Chef, so I have to force checkin on everything
[2014-04-01 19:18:27 -0400] no_name: it's more of a push than a "wait for node to pull" sort of situation
[2014-04-01 19:19:49 -0400] hugespoon: no_name: im in a similar boat i think, we have sort of a base cookbook that every org needs and i just need to keep it in sync across all orgs, your method might work out for me though
[2014-04-01 19:20:19 -0400] no_name: Opscode mentions somewhere that most Chef installs use a custom dashboard of sorts and don't rely on the Chef mgmt site..so I plan to pull the status and nodes info from Chef and control all from Jenkins
[2014-04-01 19:20:38 -0400] no_name: I'm just now getting to cookbooks, and the wrapper method seems really good
[2014-04-01 19:20:44 -0400] no_name: let me get you a link or two
[2014-04-01 19:20:59 -0400] no_name: http://devopsanywhere.blogspot.com/2012/11/how-to-write-reusable-chef-cookbooks.html
[2014-04-01 19:21:04 -0400] no_name: http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/
[2014-04-01 19:29:25 -0400] no_name: hugespoon I've basically been building Jenkins jobs to wrap all the common Chef tasks, and using build parameters to pass settings
[2014-04-01 19:31:39 -0400] CPS: no_name: two of those anti-patterns are a non-issue if you have different chef servers for dev and prod
[2014-04-01 19:32:17 -0400] no_name: CPS: good point, I'm all non-prod, devops situation right now, trying to determine the best stack for our needs
[2014-04-01 19:32:46 -0400] anthroprose: no_name: I do that too, and use Jenkins to drive CloudFormation, which drives Chef
[2014-04-01 19:32:54 -0400] no_name: I think it's great overall in the Chef community that they stress using SCM right at the start
[2014-04-01 19:32:58 -0400] anthroprose: at some point there are turtles and a hamster wheel....
[2014-04-01 19:33:26 -0400] no_name: anthroprose: I'm using Azure, most likely 100% Windows VM's (except for Chef Server and Workstation)
[2014-04-01 19:33:39 -0400] anthroprose: sure, just 1 less step...
[2014-04-01 19:34:43 -0400] anthroprose: no_name: you can make your jenkins machine be the workstation too depending on your security needs...
[2014-04-01 19:35:27 -0400] no_name: anthroprose: yea I started trying to do a windows Chef Workstation but hit too many snags and just tackled linux head on
[2014-04-01 19:35:31 -0400] anthroprose: I use Jenkins+Test Kitchen for a quality gate and push cookbooks with it too
[2014-04-01 19:35:49 -0400] no_name: I wanted to keep all the machines single purpose, so I can blow them away if I brick one
[2014-04-01 19:35:54 -0400] no_name: =)
[2014-04-01 19:36:01 -0400] anthroprose: makes perfect sense, I brick machines all day long
[2014-04-01 19:36:11 -0400] anthroprose: 1hr snapshots with auto-restore helps with things like that
[2014-04-01 19:36:20 -0400] anthroprose: not sure what azure provides
[2014-04-01 19:36:24 -0400] no_name: I'm just starting out with cookbooks, I'm about 95% done getting all the dynamic Azure VM + bootstrapping done
[2014-04-01 19:36:32 -0400] CPS: i'm a little envious, no_name. i was basically forced onto a windows workstation
[2014-04-01 19:36:35 -0400] no_name: I've had to learn a bunch about Azure as well
[2014-04-01 19:36:53 -0400] anthroprose: yeah, I am about to pickup some Chef/Windows stuff for the first time, so that should be interesting
[2014-04-01 19:36:57 -0400] no_name: CPS: well I suppose it depends on what you're doing on the workstation
[2014-04-01 19:37:13 -0400] CPS: authoring crap, mostly
[2014-04-01 19:37:22 -0400] no_name: I haven't done much with cookbooks yet, so I'm sure I'll hit some snags too
[2014-04-01 19:37:43 -0400] no_name: we use Fogcreek Kiln / Mercurial, so I had to get that on my workstation, no git
[2014-04-01 19:37:58 -0400] no_name: so installing cookbooks throws weird git errors but oh well
[2014-04-01 19:43:44 -0400] no_name: does anyone know a way to list all installed knife plugins on the current workstation?
[2014-04-01 19:46:02 -0400] fifthecho: no_name: /opt/chef/embedded/bin/gem list | grep knife maybe?
[2014-04-01 19:46:41 -0400] no_name: okay, so specifying that path is how I initially installed knife windows and knife azure, then I changed IP and ports and they disappeared
[2014-04-01 19:46:58 -0400] no_name: so I installed without path and now they work...so I'm guessing that grep wouldn't give a full list?
[2014-04-01 19:47:15 -0400] fifthecho: Grep is doing filtering on the list of gems.
[2014-04-01 19:47:16 -0400] no_name: possibly a ruby command of some sort? I'm new to ruby as well
[2014-04-01 19:47:16 -0400] no_name: lol
[2014-04-01 19:47:45 -0400] no_name: right but the situation above makes me think not all gems knife loads are from that directory only
[2014-04-01 19:47:45 -0400] fifthecho: gem is the ruby package manager. It depends a lot on how you installed Chef for your workstation and which ruby knife is running under.
[2014-04-01 19:47:48 -0400] no_name: if that makes sense
[2014-04-01 19:48:05 -0400] fifthecho: It does and it doesn't.
[2014-04-01 19:48:10 -0400] no_name: yea I guessed that. Is there any way to return those paths first? would be great help in troubleshooting errrors
[2014-04-01 19:48:28 -0400] no_name: ^ errors (irony)
[2014-04-01 19:48:51 -0400] fifthecho: You may have more than 1 version of ruby on your box. Depending on which install of ruby your knife commands are installed in, running the "gem list" for that command will list all gems installed for that ruby install.
[2014-04-01 19:49:13 -0400] fifthecho: Er, running the "gem list" for that ruby install
[2014-04-01 19:49:39 -0400] fifthecho: So you may have /opt/chef/embedded as a Ruby runtime and you may have RVM, rbenv, or a system Ruby.
[2014-04-01 19:50:54 -0400] Nukepuppy: which gem
[2014-04-01 19:50:59 -0400] Nukepuppy: will tell you which you're using
[2014-04-01 19:51:26 -0400] Nukepuppy: `which gem` list
[2014-04-01 19:51:31 -0400] fifthecho: Can you be more clear on what you mean by "changed IP and ports" and that might help figure out which Ruby you're using and which gem command you should be using
[2014-04-01 19:52:14 -0400] fifthecho: Nukepuppy: I'd think "which knife" would help figure out which gem SHOULD be used.
[2014-04-01 19:52:38 -0400] Nukepuppy: it would tell you which one you're using ;p
[2014-04-01 19:52:53 -0400] no_name: In Azure, there are "cloud services"
[2014-04-01 19:53:07 -0400] no_name: by default, new VM = new cloud service = new public IP
[2014-04-01 19:53:21 -0400] no_name: for various reasons, I need all my VM's under one existing cloud service
[2014-04-01 19:53:38 -0400] Nukepuppy: which gem do you want it to use i guess
[2014-04-01 19:53:39 -0400] no_name: but to do that, my ports all get mapped thru the public IP, and a new port
[2014-04-01 19:53:44 -0400] Nukepuppy: whiever is in $PATH will be the one
[2014-04-01 19:53:54 -0400] fifthecho: Ahhh, you're doing this under windows.
[2014-04-01 19:53:56 -0400] no_name: oh it's working now, I was just trying to determine how knife "sees" the gems
[2014-04-01 19:54:01 -0400] no_name: nope this is on Ubuntu
[2014-04-01 19:54:07 -0400] no_name: on my chef workstation
[2014-04-01 19:54:14 -0400] Nukepuppy: well knife itself is a gem
[2014-04-01 19:54:18 -0400] Nukepuppy: nvm though
[2014-04-01 19:54:34 -0400] no_name: sorrry for the n00b ruby stuff, just making my way
[2014-04-01 19:54:36 -0400] fifthecho: Ah. Okay. Then, yes, use /opt/chef/embedded/bin/gem to install knife plugins as that will install the plugins into the Ruby install.
[2014-04-01 19:54:39 -0400] no_name: appreciate the help
[2014-04-01 19:55:09 -0400] no_name: fifthecho: if I didn't specify path, where would it install the gems to?
[2014-04-01 19:55:21 -0400] fifthecho: no_name: No worries. Gem management can be confusing, but Ruby maintains an inventory of what gems it has installed and what version they are.
[2014-04-01 19:55:45 -0400] no_name: see here: http://docs.opscode.com/plugin_knife_windows.html
[2014-04-01 19:55:56 -0400] no_name: "where /opt/chef/embedded/bin/ is the path to the location where the chef-client expects Knife plugins to be located. If the chef-client was installed using RubyGems, omit the path in the previous example."
[2014-04-01 19:56:07 -0400] fifthecho: no_name: I don't recall off the top of my head (and I run knife under a custom Ruby because I'm a glutton for punishment like that) but it should be something like /opt/chef/embedded/lib/ruby/gems or somesuch.
[2014-04-01 19:56:55 -0400] no_name: right, the opscode install doc says to exclude that path, that seemed to work for me and fix the gems, I"m not clear why. I'm just OCD and take notes down to recreate stuff in case I break it ( I always do)
[2014-04-01 19:58:30 -0400] dgarstang: I'm using the apt community cookbook. I want apt-get update to run every time chef runs, but it is not...
[2014-04-01 19:59:11 -0400] chris613: What syntax do I need to use to create a new node attribute from within an LWRP resource file? They don't auto-vivify on assignment like they do in an attributes or recipe file.
[2014-04-01 20:05:51 -0400] dcrosby: Anyone know how to set UPDATE rights on a node to a specific client via the API?
[2014-04-01 20:09:50 -0400] dgarstang: On my chef server, node has roles A and B. The node['roles'] attribute in a recipe shows only A. Why would this happen?
[2014-04-01 20:15:10 -0400] dgarstang: I'm using the apt community cookbook. I want apt-get update to run every time chef runs, but it is not...
[2014-04-01 20:18:41 -0400] doomviking: screen -x
[2014-04-01 20:21:31 -0400] doomviking: yep. hi.
[2014-04-01 20:22:09 -0400] gkra: Hey... any suggestions on the best way to "tag" a chef environment? I'd like to have a way to tie a running chef environment to a particular tag in our git chef repo...
[2014-04-01 20:22:47 -0400] gkra: would I just create an attribute for the environment and shove it in there with a knife exec?
[2014-04-01 20:38:52 -0400] dgarstang: I'm using the apt community cookbook. I want apt-get update to run every time chef runs, but it is not...
[2014-04-01 20:40:37 -0400] gchristensen: the apt community book runs every 24hrs, because every run makes runs very slow
[2014-04-01 20:41:03 -0400] tcotav: ['apt']['periodic_update_min_delay'] is what you'd want to change
[2014-04-01 20:41:49 -0400] gkra: ugh... why can't I find documetation on the nodes and environments objects?
[2014-04-01 20:46:19 -0400] dgarstang: gchristensen: I needs it to run every time. :)
[2014-04-01 20:46:37 -0400] gchristensen: set min delay to 0?
[2014-04-01 20:46:49 -0400] dgarstang: gchristensen: I popped this into the cookbook wrapping apt... didn't help... default['apt']['periodic_update_min_delay'] = '0'
[2014-04-01 20:47:08 -0400] gchristensen: you could notify the update to run every run
[2014-04-01 20:47:16 -0400] dgarstang: gchristensen: Run chef-client, check /var/lib/apt/periodic/update-success-stamp ... no update...
[2014-04-01 20:47:25 -0400] dgarstang: gchristensen: in the recipe? Suppose
[2014-04-01 20:53:39 -0400] troyready: dgarstang, is that a attribute convergence issue? If you're setting the default value to be a certain thing in one cookbook ('0'), and it's being set to a different default in the 'child' cookbook, is it expected that the parent would take precedence?
[2014-04-01 20:55:12 -0400] troyready: I'm not sure that it is (but I could be wrong). I'd set the attribute precedence to override in the wrapper cookbook. Again, might be telling you to go down the wrong rabbit hole, but that's what immediately comes to mind.
[2014-04-01 21:00:20 -0400] dgarstang: troyready: fair question, but I don't think so. My wrapper cookbook depends on the upstream apt cookbook, and my bc-apt cookbook sets it. Maybe I have to user override instead of default?
[2014-04-01 21:00:43 -0400] gchristensen: or even normal
[2014-04-01 21:01:10 -0400] dgarstang: gchristensen: so many layers...
[2014-04-01 21:02:01 -0400] gchristensen: dgarstang: if all else fails, use force_override ;)
[2014-04-01 21:02:42 -0400] dgarstang: gchristensen: kk, will give that a shot, thans
[2014-04-01 21:02:50 -0400] gchristensen: I am *so* kidding about force_override.
[2014-04-01 21:02:58 -0400] gchristensen: I'm not actually sure if that is the real name
[2014-04-01 21:03:11 -0400] doomviking: sounds like the dark side
[2014-04-01 21:03:25 -0400] jtimberman: gchristensen: it's a real thing
[2014-04-01 21:03:32 -0400] dgarstang: gchristensen: it's in the docs. it's worth it for a test anyway
[2014-04-01 21:03:32 -0400] jtimberman: i've used it :)
[2014-04-01 21:03:35 -0400] gchristensen: jtimberman: is that the correct name?
[2014-04-01 21:03:47 -0400] jtimberman: there's force_default, force_normal, force_override
[2014-04-01 21:03:52 -0400] jtimberman: they're there to be used with care.
[2014-04-01 21:03:54 -0400] dgarstang: jeez
[2014-04-01 21:03:55 -0400] gchristensen: doomviking: I'm pretty sure if you use the force_override layer, it emails your boss to tell them you're doing it wrong.
[2014-04-01 21:04:08 -0400] dgarstang: :-O
[2014-04-01 21:04:18 -0400] jtimberman: gchristensen: the ghost of juliancdunn appears actually
[2014-04-01 21:04:27 -0400] jtimberman: here likes juliancdunn, killed by force_override
[2014-04-01 21:04:50 -0400] gchristensen: jtimberman: hah!
[2014-04-01 21:04:59 -0400] jtimberman: dgarstang: so, it's not particularly recommended. we recommend you stick to 'default' level preceedence in everything for attributes. however sometimes you just have to override something, so the other things are there for when you need them.
[2014-04-01 21:05:33 -0400] doomviking: gchristensen: definitely the dark side.
[2014-04-01 21:05:35 -0400] dgarstang: jtimberman: the whole attribute precedence thing is very... opaque...
[2014-04-01 21:05:51 -0400] jtimberman: dgarstang: yeah i've had a to do to write a blog post about it for a long time now :/
[2014-04-01 21:06:24 -0400] dgarstang: jtimberman: if you could shed some light. i mean, you'd have to know the relationship between every cookbook in order to know what level to use...
[2014-04-01 21:06:26 -0400] juliancdunn: I HAVE BEEN SUMMONED BY THE TIMBERMAN
[2014-04-01 21:06:37 -0400] jtimberman: cool now i can disappear and get back to work :p
[2014-04-01 21:07:33 -0400] jtimberman: dgarstang: yeah. so, i used to, because i knew them all well, and there's an evolution of practices in there based on a) what was available to do in Chef at the time and b) what is actually available now.
[2014-04-01 21:07:42 -0400] jtimberman: it used to be you used a set method to set the attributes.
[2014-04-01 21:07:54 -0400] jtimberman: and then that became "normal"
[2014-04-01 21:08:02 -0400] jtimberman: when default and override were added.
[2014-04-01 21:08:22 -0400] jtimberman: :)
[2014-04-01 21:08:36 -0400] jtimberman: this all happened over the course of a year or two.
[2014-04-01 21:08:55 -0400] dgarstang: jtimberman: of course, it couldn't get this messed up over night. :)
[2014-04-01 21:09:35 -0400] juliancdunn: and now we have to go back to the drawing board and make "normal" ... behave normally. or just kill it
[2014-04-01 21:09:50 -0400] juliancdunn: software is hard, news at 11
[2014-04-01 21:10:29 -0400] dgarstang: i think it is a big issue though. even explaining the problem is difficult... but i guess you need to know the relationship between every cookbook in order to know what level to use...
[2014-04-01 21:10:42 -0400] jtimberman: a lot of that is my fault
[2014-04-01 21:10:44 -0400] jtimberman: sorry about that.
[2014-04-01 21:10:51 -0400] coderanger: juliancdunn: Or you just write nothing but cookbooks and rely on toposort instead of explicit levels ;-)
[2014-04-01 21:10:56 -0400] dgarstang: ie, it's never cler if the attribute has already been set somewhere else. I think that sums it up...
[2014-04-01 21:10:59 -0400] jtimberman: i never went back through every one of our cookbooks to ensure they all did only default
[2014-04-01 21:11:16 -0400] juliancdunn: I sent some PRs in jtimberman general direction for that :-)
[2014-04-01 21:11:24 -0400] jtimberman: i probably merged them.
[2014-04-01 21:11:27 -0400] dgarstang: and therefore, if you don't know if the attribute has already been set or not, it's not clear what level to use now.
[2014-04-01 21:11:28 -0400] jtimberman: i like to click green buttons
[2014-04-01 21:11:34 -0400] juliancdunn: I probably didn't break anything whilst doing that
[2014-04-01 21:11:40 -0400] jtimberman: "probably" :)
[2014-04-01 21:11:46 -0400] lnxchk: its probably fine
[2014-04-01 21:11:53 -0400] jtimberman: they mostly come out at night
[2014-04-01 21:11:56 -0400] jtimberman: dgarstang: right, which sucks.
[2014-04-01 21:12:11 -0400] juliancdunn: so Clinton Wolfe, as I pointed out before, has some experiments on fixing this
[2014-04-01 21:12:13 -0400] juliancdunn: https://github.com/clintoncwolfe/attribute-validator
[2014-04-01 21:12:24 -0400] jtimberman: dgarstang: ssd7_ had some magical knife exec script somewhere that could get some information about that out of a chef server, i think
[2014-04-01 21:12:31 -0400] dgarstang: if I have apt, bc-apt, and bc-foo... can I seth the attributes for apt in bc-foo, or do I have to always do it in bc-apt? How does that change the level I use?
[2014-04-01 21:12:38 -0400] juliancdunn: but it's probably a multi-pronged solution involving core too
[2014-04-01 21:12:45 -0400] dgarstang: jtimberman: yah that'd be nice. puppet has a hiera lookup tool
[2014-04-01 21:13:31 -0400] dgarstang: meh. I'm confused. on vagrant, apt-get update always runs
[2014-04-01 21:15:16 -0400] dgarstang: time to check car for tire tag. Stoopdid Mountain View parking officers.
[2014-04-01 21:19:54 -0400] troyready: dgarstang, doesn't help you, as usual with my answers, but we avoid that kind of confusion by using attributes in different layers: http://docs.opscode.com/chef_overview_attributes.html#attribute-precedence
[2014-04-01 21:20:49 -0400] troyready: dgarstang, i.e. I assume cookbooks will have their own defaults, and I just set default attributes in environments & roles, which has a higher level of precedence.
[2014-04-01 21:20:54 -0400] troyready: Thus, no confusion.
[2014-04-01 21:22:01 -0400] dgarstang: troyready: yeah, except it's not really clear which attributes in roles apply to which cookbooks.
[2014-04-01 21:22:43 -0400] dgarstang: troyready: unless you... clearly namespace the attributes.
[2014-04-01 21:23:03 -0400] troyready: hmmmm; we don't end up with any namespace collisions like that
[2014-04-01 21:23:09 -0400] troyready: ah, right, exactly :)
[2014-04-01 21:26:39 -0400] dgarstang: time for another question... On my chef server, node has roles A and B. The node['roles'] attribute in a recipe shows only A. Why would this happen?
[2014-04-01 21:28:00 -0400] troyready: Is that different from what you see under 'roles' when you do a 'knife node show foo'?
[2014-04-01 21:28:17 -0400] dgarstang: troyready: So, a knife on the node shows A and B...
[2014-04-01 21:28:36 -0400] dgarstang: troyready: but the node['roles'] in the template when chef runs shows only A
[2014-04-01 21:28:42 -0400] bmoritz: I put in a bug about the documentation related to attribute precedence the other day
[2014-04-01 21:29:09 -0400] mdfrick: Has anyone run into issues where a Chef run stalls for ~90 seconds when calling https://<chef-server>/environments/<env>/cookbook_versions ?
[2014-04-01 21:29:10 -0400] bmoritz: they fixed it and I felt it explains it better now
[2014-04-01 21:29:11 -0400] dgarstang: bmoritz: the docs are pretty good.. it's how they're implemented... :-\
[2014-04-01 21:29:38 -0400] dgarstang: mdfrick: is chef-server an IP or a fqdn?
[2014-04-01 21:29:51 -0400] troyready: Maybe someone more knowledge can confirm/deny, but I didn't think the expanded list of roles for the node was saved to the node object
[2014-04-01 21:30:08 -0400] dgarstang: troyready: really?
[2014-04-01 21:30:09 -0400] bmoritz: Well the docs used to say that attributes were merged in all levels
[2014-04-01 21:30:12 -0400] troyready: i.e. when I do a 'knife node show foo -Fj -l', and search for roles, I don't see anything
[2014-04-01 21:30:32 -0400] dgarstang: troyready: I've used node['role'].include('foo') (or similar) before. maybe I got lucky
[2014-04-01 21:30:36 -0400] mdfrick: dgarstang: FQDN, but that's definitely not the issue... it's just the one call that causes the hiccup, and only for a certain class of server.
[2014-04-01 21:30:46 -0400] dgarstang: mdfrick: Oh ok
[2014-04-01 21:30:58 -0400] notromda: Fellow chefs, I'm getting tripped up by compile time vs run time I think:   https://gist.github.com/dgm/6aff997bcb33d6757001
[2014-04-01 21:31:04 -0400] troyready: dgarstang, I'm realizing now that I'm not confident in what I'm talking about and have been making some assumptions
[2014-04-01 21:31:16 -0400] troyready: I *assume* it's not saved on the node object for the reason I stated
[2014-04-01 21:31:20 -0400] notromda: the second block end up being nil because it accesses the node during compile time
[2014-04-01 21:31:30 -0400] notromda: but I need to know a value after the first section runs
[2014-04-01 21:31:40 -0400] troyready: dgarstang, but you can see it via a 'knife node show' or a node search
[2014-04-01 21:31:42 -0400] notromda: How can I delay that section?
[2014-04-01 21:32:05 -0400] dgarstang: troyready: that command pust both roles in the run list ... "run_list": ["role[role_base]","recipe[bc-tollbooth]"],
[2014-04-01 21:32:16 -0400] dgarstang: oh shit
[2014-04-01 21:32:19 -0400] dgarstang: aha!
[2014-04-01 21:32:24 -0400] dgarstang: it's a recipe... that explains it
[2014-04-01 21:32:29 -0400] dgarstang: ay carumba.
[2014-04-01 21:32:29 -0400] troyready: haha
[2014-04-01 21:32:48 -0400] dgarstang: bugger. initially we had everything in roles.... we've started replacing with recipes....refactor. grrr
[2014-04-01 21:32:58 -0400] troyready: The simplest overlooked thing pretty much always seems to be it
[2014-04-01 21:32:59 -0400] nshenry03: Has anyone used 'knife ec2 server create' to create a Windows server or does anyone know of an up-to-date example?
[2014-04-01 21:34:25 -0400] nshenry03: seems to be stuck "Waiting for winrm..............................................."
[2014-04-01 21:35:05 -0400] troyready: Ooooooh, they have that code in it? I'd love to swipe that and put the same functionality in knife vsphere
[2014-04-01 21:35:15 -0400] troyready: Though I can' t help at all with ec2, sorry :(
[2014-04-01 21:36:12 -0400] mdfrick: dgarstang: Have you looked at node.run_list.expand(node.chef_environment).roles by chance?
[2014-04-01 21:36:38 -0400] mdfrick: I think it's the same as node.roles, but dunno.
[2014-04-01 21:36:49 -0400] mdfrick: Not sure I have a box I can accurately test what you were asking.
[2014-04-01 21:38:52 -0400] no_name: nshenry03: what winrm command are you passing?
[2014-04-01 21:39:09 -0400] no_name: I'm familiar with knife azure, but I have a bit of experience with winrm
[2014-04-01 21:39:20 -0400] no_name: no ec2 yet
[2014-04-01 21:40:09 -0400] nshenry03: no winrm commands; was hoping to just use knife ec2 server create like the half documentation on github readme
[2014-04-01 21:40:27 -0400] nshenry03: knife ec2 server create -I ami-173d747e -G windows -f m1.medium --user-data ~/your-user-data-file -x '.\a_local_user' -P 'yourpassword' --ssh-key your-public-key-id
[2014-04-01 21:40:59 -0400] no_name: can you return a list of servers using knife ec2?
[2014-04-01 21:41:10 -0400] nshenry03: yes
[2014-04-01 21:41:15 -0400] no_name: for example, "knife azure server list" lists all my servers
[2014-04-01 21:41:24 -0400] no_name: so I know my cloud creds work
[2014-04-01 21:42:21 -0400] nshenry03: yes, I gave up waiting for the first server and did knife ec2 server list to find the id and then knife ec2 server delete <<id>> to delete it
[2014-04-01 21:42:21 -0400] mdfrick: So no one has any experience with a slow chef run due to the cookbook_versions API call?
[2014-04-01 21:43:17 -0400] no_name: nshenry03: some of the options listed in the help for knife azure aren't correct, so you might find the same with ec2
[2014-04-01 21:45:51 -0400] nshenry03: okay, thanks :-)
[2014-04-01 21:56:31 -0400] notromda: arg liberal use of lazy { }  required.
[2014-04-01 22:10:37 -0400] coderanger: mdfrick: Thats pretty normal
[2014-04-01 22:19:36 -0400] bricker`1A: coderanger: by the way, the problem with the serverdensity package was that I was using the default recipe, but had to use the alerts recipe
[2014-04-01 22:19:53 -0400] bricker`LA: in order to run the "update" action
[2014-04-01 22:20:48 -0400] doomviking: oh github
[2014-04-01 22:23:58 -0400] bricker`1A: Now I'm getting an error on this line when trying to run chef-client: https://github.com/serverdensity/chef-serverdensity/blob/master/providers/default.rb#L174 What is 'node.normal`?
[2014-04-01 22:25:46 -0400] justsomeuser: Ticketing system down?
[2014-04-01 22:26:23 -0400] bricker: Sorry if I already pasted this, the message didn't look like it went through:
[2014-04-01 22:26:27 -0400] bricker: Now I'm getting an error on this line when trying to run chef-client: https://github.com/serverdensity/chef-serverdensity/blob/master/providers/default.rb#L174 What is 'node.normal`?
[2014-04-01 22:27:26 -0400] coderanger: justsomeuser: Jira seems up
[2014-04-01 22:27:45 -0400] justsomeuser: Sorry. Hosted Opscode support ticketing system
[2014-04-01 22:27:48 -0400] justsomeuser: Just getting a blank page
[2014-04-01 22:29:18 -0400] coderanger: justsomeuser: Ditto, guess it is down
[2014-04-01 22:29:21 -0400] coderanger: ssd7_: ^^
[2014-04-01 22:56:33 -0400] no_name: anyone currently using Spiceweasel?
[2014-04-01 23:06:37 -0400] no_name: anyone currently using Spiceweasel?
[2014-04-01 23:09:28 -0400] dgarstang: oh that's weird. I can't seem to find an Ubuntu Precise 12.04 vagrant box with chef installed.
[2014-04-01 23:31:00 -0400] SFLimey_: Anyone know how to get knife ec2 to create an instance with multiple ephemeral volumes?
[2014-04-01 23:31:35 -0400] SFLimey_: No matter what I try I can only get it to spin up an instance with a single ephemeral volume.
[2014-04-01 23:48:50 -0400] werdnativ: Do I always have to specify -E or is there a way to set the chef environment for knife? (e.g. export ENV or in knife.rb?)
[2014-04-01 23:55:24 -0400] justizin: SFLimey_: knife-ec2 is basically dead.  launch instances another way and knife bootstrap them.
[2014-04-01 23:55:51 -0400] justizin: it also doesnt play well with VPC, which should be known as AWS Network Stack v2
[2014-04-01 23:57:07 -0400] SFLimey_: Oh gotcha, I'm building them out for cloudformation/autoscaller/chef.
[2014-04-01 23:57:39 -0400] justizin: dont you just want to create an AMI for that? use the instance launch wizard, chef it, then .. whatever .. profit?

[2014-04-08 00:22:21 -0400] Igneous: Can anyone provide any insight as to what's going on here with the mysql::server recipe requiring a 'ruby' recipe? I have the 'ruby' cookbook uploaded but I don't actually see it getting synchronised. Could that be the problem? https://gist.github.com/anonymous/5f17f89e18dd0f143f52
[2014-04-08 00:31:07 -0400] ssd7: Igneous: Is this the community mysql cookbook?
[2014-04-08 00:31:26 -0400] Igneous: ssd7: it is
[2014-04-08 00:33:30 -0400] ssd7: Igneous: That cookbook has undergone a lot of change recently.  It isn't clear to me what version you are pulling from there, but one thing to note is that is seems the mysql::ruby cookbook that it is looking for has moved
[2014-04-08 00:33:36 -0400] ssd7: it is mentioned here: https://github.com/opscode-cookbooks/mysql/blob/master/COMPAT.md
[2014-04-08 00:33:52 -0400] ssd7: as having moved to mysql-chef_gem
[2014-04-08 00:35:47 -0400] ssd7: Igneous: Your stack trace implies that something is calling include_recipe "mysql::ruby"
[2014-04-08 00:36:08 -0400] ssd7: the full stack trace here: /var/chef/cache/chef-stacktrace.out can help you figure out where that is being called.
[2014-04-08 00:40:20 -0400] ssd7: My guess is that you pulled in the most recent version of mysql but one of the other cookbooks in your list there hasn't been updated for the changes.  Anyway, hope that helps, let me know if you need further assistance tracking it down.
[2014-04-08 00:41:43 -0400] bmhatfield: Does anyone know when new omnibus chef-server installs that aren't effected by heartbleed will be out?
[2014-04-08 00:41:49 -0400] bmhatfield: Is there a resource for that?
[2014-04-08 00:42:16 -0400] coderanger: bmhatfield: I've not yet seen an announcement
[2014-04-08 00:42:32 -0400] bmhatfield: kk
[2014-04-08 00:42:36 -0400] ssd7: bmhatfield: We put people looking into what needs to get updated this morning.  I would check on further status for you, but our internal chat is down :/
[2014-04-08 00:42:42 -0400] ssd7: wow
[2014-04-08 00:42:44 -0400] ssd7: so
[2014-04-08 00:42:47 -0400] ssd7: that was almost a sentence
[2014-04-08 00:43:02 -0400] ssd7: Shorter version: We have someone on it and we
[2014-04-08 00:43:04 -0400] bmhatfield: hipchat, eh?
[2014-04-08 00:43:12 -0400] ssd7: will post info soon.
[2014-04-08 00:43:14 -0400] ssd7: Hipchat indeed
[2014-04-08 00:50:15 -0400] mp___: Hi. I'm writing a cookbook to install lxc-docker, which requires a kernel upgrade. If you try to run docker before the new kernel is in place, the machine will crash
[2014-04-08 00:50:28 -0400] mp___: is there a way to get chef to print out a warning / error at the end of the run, asking the user to reboot the machine?
[2014-04-08 00:51:20 -0400] darron_____: mp___: I usually start with an image that has an upgraded kernel already. But that's with Amazon.
[2014-04-08 00:51:30 -0400] mp___: not an option in this case
[2014-04-08 00:51:53 -0400] mp___: we standardise on 12.04 - changing that would mean making lots of our cookbooks distro version aware
[2014-04-08 00:54:40 -0400] darron_____: I guess you could run a script that just prints out what you're saying - and hope they're watching.
[2014-04-08 00:55:18 -0400] mp___: eh - this cookbook will be rarely used
[2014-04-08 00:55:27 -0400] mp___: I think I'll just hope that if somebody else uses it they reboot ;)
[2014-04-08 02:09:12 -0400] Igneous: ssd7: yeah you nailed it.. the gitlab cookbook I'm using hasn't been updated, and was including mysql::ruby
[2014-04-08 02:09:53 -0400] Igneous: that was super misleading, because that error message made it sound like the mysql cookbook was somehow trying to call the ::ruby recipe
[2014-04-08 02:10:05 -0400] Igneous: and nowhere in the stack trace was there a mention of the gitlab cookbook :|
[2014-04-08 05:07:42 -0400] segv: hmm i need a good repo that isn't RBEL with ruby 1.9
[2014-04-08 06:41:30 -0400] JensOfSweden: Mornings
[2014-04-08 06:59:42 -0400] ignatz: nope
[2014-04-08 07:05:26 -0400] lxsameer: hey guys, how can i setup chef-repo manually (without using starter kit)
[2014-04-08 07:19:43 -0400] lxsameer: can i manage a node with 256mb or 512mb of ram using chef ?
[2014-04-08 07:33:54 -0400] tjarvstrand: hello! Is there any way to set attributes at a non-normal level through the json supplied at the command line to chef-client?
[2014-04-08 08:35:28 -0400] glnds_: hi all, i could use some help :)
[2014-04-08 08:38:47 -0400] srenatus: glnds_: just ask away
[2014-04-08 08:39:45 -0400] glnds_: just upgraded to chef server 11 old clients are running ok after adding validation.pem
[2014-04-08 08:40:16 -0400] glnds_: trying to bootstrap a new node and now i get Failed to authenticate to the chef server (http 401).
[2014-04-08 08:40:29 -0400] glnds_: but the validation.pem seems to be ok
[2014-04-08 08:40:47 -0400] glnds_: i have no clue at all
[2014-04-08 08:54:14 -0400] gtfx: hi, does anyone here using runit?
[2014-04-08 08:56:07 -0400] workmad3: gtfx: some (probably many) do
[2014-04-08 08:57:46 -0400] gtfx: workmad3,  do you know if it is possible to override the restart action in runit_service it?
[2014-04-08 09:13:37 -0400] [iilliinn]: hi, is there a way to get the cookbook name in a recipe or template?
[2014-04-08 09:15:54 -0400] Er00: #{cookbook_name}
[2014-04-08 09:15:56 -0400] Er00: http://docs.opscode.com/chef/dsl_recipe.html
[2014-04-08 09:17:34 -0400] [iilliinn]: Er00: thank you! Is there a way to use this in a template without assigning it to an attribute?
[2014-04-08 09:20:22 -0400] Er00: I have no idea I'm afraid, I've never actually used it, just happened to recall having read thta yesterday :p
[2014-04-08 09:21:55 -0400] [iilliinn]: Thanks anyway ! :)
[2014-04-08 09:25:06 -0400] daxroc_: Morning all
[2014-04-08 09:25:28 -0400] daxroc_: Is it possible to only load a recipe in a chef-solo run ?
[2014-04-08 09:26:52 -0400] daxroc_: I'm wanting to search databags using chef-solo-search but only when using solo as it causes issues with server?
[2014-04-08 09:30:33 -0400] daxroc_: ah if Chef::Config[:solo] ...
[2014-04-08 09:36:23 -0400] di: Hello!
[2014-04-08 09:36:51 -0400] di: need help, how get "push jobs server" for chef
[2014-04-08 09:40:04 -0400] di:   ,   
[2014-04-08 10:28:54 -0400] m4rcu5: ohai chefs, anyone aware of CVE-2014-0160?
[2014-04-08 10:30:50 -0400] drrk: heartbleed? oh yes
[2014-04-08 10:31:27 -0400] m4rcu5: drrk: and do we already have a fix? :)
[2014-04-08 10:32:13 -0400] drrk: I've updated my servers but I don't knwo how chefserver deals with ssl
[2014-04-08 10:32:32 -0400] drrk: I would like to think it uses the system library...
[2014-04-08 10:32:48 -0400] m4rcu5: drrk: well its an embedded lib it seems. so im awaiting a new deb pkg
[2014-04-08 10:32:49 -0400] drrk: mine is behind nginx anyway
[2014-04-08 10:33:13 -0400] m4rcu5: drrk: proxy your proxy's! nginx -> nginx -> ruby
[2014-04-08 10:33:17 -0400] m4rcu5: ;)
[2014-04-08 10:34:16 -0400] drrk: actually, your right, I was thinking of the old server :(
[2014-04-08 11:04:55 -0400] lxsameer: can i manage a node with 256mb or 512mb of ram using chef ?
[2014-04-08 11:25:50 -0400] gtfx: is there a way to say to runit_service to run force-stop/start when it does restart?
[2014-04-08 12:02:20 -0400] denniswisnia: hey guys, any smart cookbook to update all packages for the Heartbleed?
[2014-04-08 12:02:35 -0400] denniswisnia: or do you all update manually?
[2014-04-08 12:29:28 -0400] junior_: Looking for a little help.  I'm using the windows cookbook and working on a recipe to install a windows msi which takes a password in it's options list.  Is there a way to avoid having this printed to the console?
[2014-04-08 12:35:24 -0400] ddr_: hi all. I'm trying to use chef-zero with kitchen but get this error
[2014-04-08 12:36:43 -0400] ddr_: https://gist.github.com/dragolabs/10117721
[2014-04-08 12:38:36 -0400] ddr_: how can i solve this?
[2014-04-08 12:46:27 -0400] jsfrerot: Hi guys, I'm running into a problem with chef "compile time" and "runtime".
[2014-04-08 12:46:57 -0400] jsfrerot: I need to access node attributes and process them, once the data is processed, I use it in templates
[2014-04-08 12:48:20 -0400] jsfrerot: thing is if I don't put my data process on node attributes in a ruby block I get non converged data. And since I can't put a "template" in a ruby block, I'm kind of blocked.
[2014-04-08 12:48:39 -0400] jsfrerot: If anyone have some time to help me through this it would be very appriciated
[2014-04-08 12:55:59 -0400] Mr4k: jsfrerot: i don't get it. could you be more specific about your data process on attributes?
[2014-04-08 13:01:45 -0400] notromda: jsfrerot - I think I have run into similar problems, and can't say I have the right solution, but I made a ruby block to calculate the values, store in node, node.save, and then in a new template declaration, use the node attributes.
[2014-04-08 13:01:58 -0400] notromda: two separate sections
[2014-04-08 13:14:12 -0400] benner: any plans to release soon chef-server without Heartbleed ssl bug?
[2014-04-08 13:20:56 -0400] m4rcu5: benner: im also looking for that answer :)
[2014-04-08 13:24:33 -0400] mkorolyov: hi there! could any one be so kind and suggest some steps to resolve an issue with chef-server? i need to config the server to use not standard 80 port, but for example 8999, so i created the /etc/chef-server/chef-server.rb with content " nginx['non_ssl_port'] = 8999", then restarted the server with "sudo chef-server-ctl restart" but it seems to me that chef don't loaded settings from that file.
[2014-04-08 13:25:14 -0400] notromda: anyone here know anything about nodejs and npm?
[2014-04-08 13:25:56 -0400] notromda: When I try to install stuff with chef, it keeps giving me an error about  Attempt to unlock ___________, which hasn't been locked
[2014-04-08 13:26:39 -0400] double_p: benner: uhm.. at least my embedded nginx in 11.0.8 is linked against libssl1.0.0 - and thus not affected. the changelogs up to .11 dont indicate to me that this changed to affected 1.0.1
[2014-04-08 13:27:41 -0400] drrk: double_p: i've checked and mine (latest chef-server) is affected
[2014-04-08 13:28:46 -0400] double_p: hm, weird. the embedded/bin/openssl returns 1.0.1.
[2014-04-08 13:30:36 -0400] double_p: ok.. "bad" filename. it is 1.0.1c in libssl. damnit..
[2014-04-08 13:30:55 -0400] mkorolyov: ok, the server also need to be reconfigured and then restarted to apply changes from config file.
[2014-04-08 13:32:52 -0400] pluesch0r: hi everybody. i'm using chef in an EDU environment (i.e. multiple schools, one server per school) and need to start replacing servers in those schools. to achieve this, i'll stage servers off-site with the hostname of the server i wanna replace and run chef. what i don't want is chef to store the attributes of the new system in its database just yet as monitoring etc. get their configuration from the chef database. is there a way 
[2014-04-08 13:33:39 -0400] pluesch0r: on-site i'd disable chef on the old system, change its ip and copy all the user data over to the new system, then change chef to normal mode and be done with it.
[2014-04-08 13:40:39 -0400] double_p: hm.. the ssltest.py doesnt report it as affected. weird.
[2014-04-08 14:18:59 -0400] laurent\: silence is never a good response ! :)
[2014-04-08 14:20:15 -0400] bmhatfield: I had been on last night asking if there was an updated omnibus chef-server install that had a revved version of openssl, but unfortunately had some internet issues (lol) after asking and didn't see the current status.
[2014-04-08 14:20:30 -0400] bmhatfield: Is there an update/link to information about an updated Chef Server package?
[2014-04-08 14:21:48 -0400] m4rcu5: bmhatfield: im idling around for a couple of hours aswell, but no update
[2014-04-08 14:24:12 -0400] laurent\: I guess the customers are getting updates first
[2014-04-08 14:25:19 -0400] bmhatfield: laurent\: I'm hoping that's not the case.
[2014-04-08 14:25:54 -0400] tehnef: Hmm. chef-server packages static openssl libs?
[2014-04-08 14:25:59 -0400] bmhatfield: yep
[2014-04-08 14:26:01 -0400] tehnef: I guess that makes some sense...
[2014-04-08 14:26:16 -0400] tehnef: Well shit. I was feeling all good about updating the instance running our chef-server
[2014-04-08 14:27:46 -0400] laurent\: i've always wondered how they would react to that kind of security issue, this omnibus thingy is nice, in the end they don't have to package chef for every distrib, they now have to deal with the security of every library they use...
[2014-04-08 14:28:20 -0400] tehnef: now we'll find out :)
[2014-04-08 14:28:26 -0400] gchristensen: is this for chef-server?
[2014-04-08 14:28:35 -0400] gchristensen: because chef-client isn't really vulnerable to this sort of thing, I don't think
[2014-04-08 14:29:03 -0400] laurent\: gchristensen: yep we're talking about the server
[2014-04-08 14:29:14 -0400] gchristensen: gotcha
[2014-04-08 14:29:29 -0400] gchristensen: just wanted to assuage any unnecessary fear re client
[2014-04-08 14:29:36 -0400] double_p: tehnef: yeah, the https serving nginx links to /opt/chef-server/embedded/lib/libssl.so.1.0.0 (which actually is a 1.0.1c in 11.0)
[2014-04-08 14:29:52 -0400] laurent\: nobody cares about the client, servers are much more important to fix right now
[2014-04-08 14:50:30 -0400] Gazzonyx: In an attributes file (my "top level", default.rb), can I use the syntax "default[foo][bar] = stuff" to override the settings in an included cookbook or do I have to use "node.set"?  In this case my cookbook would include cookbook 'foo'.
[2014-04-08 14:56:58 -0400] jsfrerot: notromda: Mr4k: i'll come back with more details later today, ran into some probleme at work and need to take care of that
[2014-04-08 15:05:58 -0400] mkorolyov: hi, does anyone know some thing about issue with berkshelf, when uploading cookbooks it fails because of 301 http response.
[2014-04-08 15:06:23 -0400] Nukepuppy: do you have ssl verify off?   though 301 sounds wrong
[2014-04-08 15:06:38 -0400] mkorolyov: yes, i turned ssl verify off
[2014-04-08 15:07:37 -0400] mkorolyov: and the fqdn is set up in knife rb, but server is running on 8999 port instead of 80(default) may it be the reason?
[2014-04-08 15:08:12 -0400] mkorolyov: chef_server_url: http:/blah:8999
[2014-04-08 15:12:12 -0400] mkorolyov: i've also tried to upload cookbook with knife and got "ERROR: Invalid Redirect: POST request was redirected from http://blah:8999/sandboxes to https://blah:443/sandboxes. Only GET and HEAD support redirects."
[2014-04-08 15:13:20 -0400] mkorolyov: will try to point nginx[:ssl_port] to 8999
[2014-04-08 15:19:19 -0400] paulczar: is there an ETA on the openssl vuln fix for chef server?
[2014-04-08 15:23:10 -0400] cwj: paulczar: only statement ive seen so far is https://twitter.com/adamhjk/status/453550945385725952
[2014-04-08 15:24:28 -0400] segv: I've never seen this, during a setup of chef-server
[2014-04-08 15:24:33 -0400] segv: one of them is just hanging on
[2014-04-08 15:24:35 -0400] segv: "  * ruby_block[supervise_rabbitmq_sleep] action run"
[2014-04-08 15:24:40 -0400] segv: just sitting there for > 15m
[2014-04-08 15:27:06 -0400] segv: http://xorl.net/chef-metal/ruby/2014/04/07/chef-metal-part-deux/ writing is a work in progress but, chef-metal \n/
[2014-04-08 15:29:45 -0400] LuHe: hello, i'm trying to deploy an django application on amazon opsworks using application_python with this cookbook: http://pastebin.com/L2WSuDAg
[2014-04-08 15:30:11 -0400] LuHe: during the setup i get the following error: http://pastebin.com/hVmAXEfe ( Error executing action `enable` on resource 'supervisor_service[splots]' )
[2014-04-08 15:30:35 -0400] LuHe: but this happens even *before* the repository referenced in the cookbook is checked out
[2014-04-08 15:30:56 -0400] LuHe: could anybody tell me what i am doing wrong?
[2014-04-08 15:55:48 -0400] notromda: I wonder why every chef-client run, I see:
[2014-04-08 15:55:49 -0400] notromda:     - upgrade package libcurl4-openssl-dev from uninstalled to 7.22.0-3ubuntu4.7
[2014-04-08 15:56:04 -0400] notromda: why is it always uninstalled, if it is installing it?
[2014-04-08 15:59:43 -0400] srenatus: notromda: there's nothing inside of chef that would make it do that...by itself...
[2014-04-08 16:02:50 -0400] notromda: oh, there's also libcurl4-gnutls-dev
[2014-04-08 16:03:00 -0400] notromda: I bet one uninstalls the other
[2014-04-08 16:30:09 -0400] notromda: Are there any examples out there of checking a database for a value, to determine whether to run a chef section?
[2014-04-08 16:30:31 -0400] notromda: I don't need to run my rails database init more than once.
[2014-04-08 16:33:29 -0400] tcotav: can't you just drop a file on local system to show its done?
[2014-04-08 16:34:11 -0400] LuHe: hmm.. the application_python cookbook is very odd.. the supervisor service is enabled in application / :before_deploy , but the repository is checked out in application / run_deploy
[2014-04-08 16:34:40 -0400] clayb: notromda Sadly I use call-outs to they mysql binary on my system. I would prefer to use a MySQL gem with a lwrp to affect the database but haven't gone down that path
[2014-04-08 16:36:19 -0400] notromda: Even if I use a file, I need to know that the migration completed successfully first
[2014-04-08 16:48:43 -0400] Gazzonyx: Silly question: why aren't attribute defaults that I set in my cookbook overriding the defaults from cookbooks that I include in my cookbook?
[2014-04-08 16:50:20 -0400] grepory: has anyone here ever tried to implement a semaphore in chef?
[2014-04-08 16:51:27 -0400] grepory: i'd like to coordinate service restarts for things like RabbitMQ where i don't want more than N servers unavailable at a time... it seems like a shared semaphore in a databag would be a way to do this.
[2014-04-08 16:52:00 -0400] rayrod2030: grepory: at my previous place we tried something like that.  It is brittle at best.
[2014-04-08 16:52:13 -0400] grepory: rayrod2030: hmm.. in what way brittle?
[2014-04-08 16:52:17 -0400] workmad3: grepory: I wouldn't use a data bag for that... databag access isn't atomic aiui
[2014-04-08 16:52:26 -0400] workmad3: grepory: so it's unsuitable for implementing a semaphore
[2014-04-08 16:52:31 -0400] grepory: workmad3: yeah i was worried about that.
[2014-04-08 16:52:33 -0400] rayrod2030: correct
[2014-04-08 16:52:46 -0400] workmad3: grepory: and to update a data bag from a node, the node needs admin rights for the chef server
[2014-04-08 16:53:02 -0400] grepory: workmad3: i was also considering redis or zookeeper which i have readily available.
[2014-04-08 16:53:29 -0400] rayrod2030: grepory: I believe people are also using etcd and serf solutions for such things
[2014-04-08 16:54:01 -0400] workmad3: grepory: that would make more sense... if you wanted it entirely in chef, I'd personally suggest doing it by searching for the number of nodes with a 'restarting_<service>' attribute set
[2014-04-08 16:54:29 -0400] rayrod2030: using zookeeper for that would still require a proper zk client implementation from your chef nodes.  it's tricky and easy to get wrong.  See ranjib's recent comments on that.
[2014-04-08 16:54:33 -0400] grepory: workmad3: hmm... but there's a race condition there as well :/
[2014-04-08 16:54:51 -0400] workmad3: grepory: and then if that's in a suitable range, doing 'node.set["restarting_service"]' followed by then rechecking the search results
[2014-04-08 16:54:52 -0400] grepory: rayrod2030: yeah i haven't looked at ruby zk libs yet
[2014-04-08 16:55:09 -0400] workmad3: grepory: and if it's now over the allowed amount, unset the attribute and skip the restart
[2014-04-08 16:55:25 -0400] workmad3: grepory: oh, and make sure you node.save after setting the attribute each time
[2014-04-08 16:56:24 -0400] workmad3: grepory: so basically work on the principle that skipping the restart should be favoured over performing it in cases of possible contention :)
[2014-04-08 16:56:43 -0400] grepory: workmad3: yeah i'd considered that as well, but the race condition still exists.
[2014-04-08 16:57:00 -0400] workmad3: grepory: as long as your chef run intervals have some splay in them, then you should eventually restart everything
[2014-04-08 16:57:48 -0400] workmad3: grepory: you're dealing with what amounts to a distributed transaction... the race conditions are pretty much unavoidable
[2014-04-08 16:58:10 -0400] grepory: workmad3: unless i can guarantee atomicity in reads/writes to the semaphore.
[2014-04-08 16:58:17 -0400] workmad3: grepory: which you can't
[2014-04-08 16:58:21 -0400] gzilla: Does anyone have any good suggestions for running a resource (execute in this case) after a successful bootstrap?  I change my root password in one of my recipes but I need it to wait until after the bootstrap is complete
[2014-04-08 16:58:37 -0400] grepory: workmad3: if i were to use redis instead of the node object, then i can.
[2014-04-08 16:59:12 -0400] workmad3: grepory: 'if you wanted it entirely in chef'
[2014-04-08 16:59:18 -0400] workmad3: grepory: that was my basis ;)
[2014-04-08 16:59:22 -0400] fayesal: gzilla: use a delayed notification and an action :nothing
[2014-04-08 16:59:22 -0400] grepory: workmad3: ohhhh yeah sorry. i forgot about that predicate.
[2014-04-08 16:59:37 -0400] grepory: workmad3: i think i might write a lightweight semaphore service backed by redis and experiment with that.
[2014-04-08 17:00:00 -0400] rayrod2030: grepory: Might be considerably more work than your current "in-chef" ideas but worth a look: https://github.com/coreos/etcd/blob/master/Documentation/api.md#atomic-compare-and-swap
[2014-04-08 17:00:52 -0400] grepory: rayrod2030: oh yeah, i forgot that i could do this in etcd. we've been looking at coreos stuff here for a while, so getting some exposure to etcd might be a good thing to do.
[2014-04-08 17:01:31 -0400] cob: is there a way to override this with json? because I'm on opsworks https://github.com/hw-cookbooks/postgresql/blob/master/attributes/default.rb#L192
[2014-04-08 17:01:47 -0400] grepory: thanks for the thoughts friendly chef people. <3
[2014-04-08 17:02:17 -0400] gzilla: fayesal: thats what I was thinking but dont I need an action to invoke the notify on?  I get what youre saying but could you provide a quick example?
[2014-04-08 17:02:30 -0400] rayrod2030: np.  cluster/distributed coordination in chef is probably the most challenging thing to do right now but the tools are coming.
[2014-04-08 17:02:45 -0400] grepory: rayrod2030: yeah. it is nice to know that other people are working on this stuff.
[2014-04-08 17:02:48 -0400] rayrod2030: it's orchestration basically.
[2014-04-08 17:02:53 -0400] gzilla: fayesal: can I put the notify in a different cookbook/recipe?  Will it know that the execute resource exists?
[2014-04-08 17:02:54 -0400] grepory: rayrod2030: indeed.
[2014-04-08 17:03:20 -0400] workmad3: rayrod2030: that's probably because it's one of the harder problems facing any distributed setup at the moment, if you want to do it without introducing massive amounts of sychronisation and destroying any performance :)
[2014-04-08 17:03:21 -0400] grepory: rayrod2030: i've just begun working on orchestration here, so this is a nice first step.
[2014-04-08 17:03:54 -0400] fayesal: gzilla: you notify with action :run (or whichever execute uses) and use :nothing in the execute recipe itself, you could maybe even do the notify inside itself (not sure about that though)
[2014-04-08 17:05:41 -0400] rayrod2030: grepory: I think most systems that try to accomplish any kind of ochestration in chef need to have liveness which doesn't fit very well with the regular chef-client x minute converge/splay style.
[2014-04-08 17:06:02 -0400] grepory: rayrod2030: we run chef-client as a service
[2014-04-08 17:06:12 -0400] rayrod2030: so you poke on demand?
[2014-04-08 17:06:32 -0400] grepory: rayrod2030: nah, we just let it converge at will.
[2014-04-08 17:06:52 -0400] rayrod2030: that's what I mean.
[2014-04-08 17:07:32 -0400] grepory: rayrod2030: yeah. it has done okay so far. my only problem is that occasionally the clients get stuck.
[2014-04-08 17:07:58 -0400] grepory: rayrod2030: need to investigate why that's happening at some point, but for now it happens so infrequently and our chef footprint is small enough that it isn't a big enough issue yet.
[2014-04-08 17:08:03 -0400] cbarraford: hey guys, has chef patched the heartbleed bug yet in their omnibus install??
[2014-04-08 17:11:54 -0400] grepory: libssl.so.1.0.0
[2014-04-08 17:12:00 -0400] grepory: the 1.0.0 branch isn't vulnerable right?
[2014-04-08 17:12:11 -0400] double_p: grepory: but it IS 1.0.1c inside
[2014-04-08 17:13:02 -0400] grepory: double_p: i was looking at strings in the embedded libssl
[2014-04-08 17:13:26 -0400] double_p: yeah, and that reveals 1.0.1c (for 11.0.8 here)
[2014-04-08 17:13:34 -0400] grepory: ohhh but: SLv2 part of OpenSSL 1.0.1f 6 Jan 2014
[2014-04-08 17:14:07 -0400] grepory: yeah i just found the version string: OpenSSL 1.0.1f 6 Jan 2014
[2014-04-08 17:14:30 -0400] grepory: that is from Version: 11.0.11-1.ubuntu.12.04
[2014-04-08 17:14:31 -0400] hugespoon: https://github.com/musalbas/heartbleed-masstest might prove useful as well
[2014-04-08 17:16:09 -0400] jasonv: Just searched the history and can't find an answer for sure , do we know when the omnibus will be patched for heartbleed?
[2014-04-08 17:16:25 -0400] bmhatfield: jasonv: There's been some responses that vaguely say "today"
[2014-04-08 17:16:28 -0400] bmhatfield: no further information
[2014-04-08 17:20:49 -0400] jasonv: Thanks for the quick response, I'll hang out here today assuming this will be the place where we'll hear about a release first.
[2014-04-08 17:21:27 -0400] double_p: just watch https://github.com/opscode/omnibus-chef-server/releases/
[2014-04-08 17:22:01 -0400] jtimberman_: jasonv: We'll have a blog post. It may or may not get linked here right away. I believe it'll at least be tweeted via @chef.
[2014-04-08 17:23:56 -0400] dstynchula: Sorry if I'm late to this. Does anyone know how opscode is handling the heartbleed on hosted chef?
[2014-04-08 17:24:09 -0400] dstynchula: Are we going to need new validators?
[2014-04-08 17:29:18 -0400] segv: hmmm
[2014-04-08 17:30:31 -0400] kallistec: dstynchula: full announcement will be coming soon, but hosted chef wasn't vulnerable because our load balancers are on ubuntu 10.04
[2014-04-08 17:39:17 -0400] supercom32: Hey Gang! Does anyone know if a Chef ruby block can accept a guard or not?
[2014-04-08 17:41:47 -0400] supercom32: Ah nevermind. I found some helpful examples under resource_common which explains all.
[2014-04-08 17:44:33 -0400] aslan_: does anyone have any useful link regarding workflow? I desperately need to clean up my cookbooks and establish some process.
[2014-04-08 17:44:52 -0400] gchristensen: aslan_: look at the berkshelf way
[2014-04-08 17:47:41 -0400] aslan_: gchristensen: i did a little bit it looks really nice. But its not a complete picture. For instance i dont know if all the cookbooks are eventually kept in one cookbook repo or every developer pushes from his own berkshelf folder? and how about cookbook patterns?
[2014-04-08 17:49:21 -0400] aslan_: I think opscode needs a best practice book
[2014-04-08 17:49:25 -0400] aslan_: or cookbook! lol
[2014-04-08 17:49:32 -0400] gchristensen: thus far they've stayed out of it to let the community develop something
[2014-04-08 17:50:30 -0400] notromda: Gazzonyx:   I recently hit that too.   attributes are loaded in run list order, and then alphabetical I think.   So the load order may be weird
[2014-04-08 17:51:08 -0400] erthad: hi
[2014-04-08 17:51:29 -0400] erthad: does anyone know, is there a ticket already to address CVE-2014-0160 in omnibus chef server?
[2014-04-08 17:51:55 -0400] drag00n__: anyone use the azure knife plugin
[2014-04-08 17:52:07 -0400] gchristensen: erthad: there will be a statement about it today
[2014-04-08 17:52:18 -0400] aslan_: gchristensen: I have been using chef since 0.6. Its been a long time. chef has grown and matured and i think its about time to stabiles some conventions. opscode should lead the way
[2014-04-08 17:52:24 -0400] drag00n__: I'm getting a ruby error, not sure if the fix is just to uninstall bundler
[2014-04-08 17:52:36 -0400] erthad: gchristensen: ok, thanks
[2014-04-08 17:53:39 -0400] drag00n__: http://pastebin.com/9nM9Yb44
[2014-04-08 17:53:40 -0400] gzilla: I have a remote_directory resource that is updating permissions on files every chef run.  gist: https://gist.github.com/anonymous/10162873   any thoughts as to why?
[2014-04-08 17:54:30 -0400] drag00n__:  mode 0755
[2014-04-08 17:55:04 -0400] drag00n__: gzilla: is that what is defined in your cookbook for nagios?
[2014-04-08 17:55:35 -0400] gzilla: yes.  but every run its logging "change mode from '' to '0755'" and triggering a restart of xinetd
[2014-04-08 17:57:49 -0400] supercom32: Is there a way to get chef resources to be recognized from within a ruby_block? Thus far, I get "noMethodError" when I try to do any nesting. Otherwise, outside of the ruby_block all is well. Any ideas?
[2014-04-08 18:02:07 -0400] stryek: drag00n__: I was just wondering about knife and azure
[2014-04-08 18:02:16 -0400] CPS: i'm trying to look at data bag items from chef shell but I'm getting "Chef::Exceptions::InvalidDataBagPath: Data bag path 'C:\chef\data_bags' is invalid"
[2014-04-08 18:02:24 -0400] CPS: recipe works fine when run by chef-client
[2014-04-08 18:02:35 -0400] CPS: am i missing a config somewhere?
[2014-04-08 18:04:26 -0400] drag00n: @stryek any luck with the plugin
[2014-04-08 18:05:37 -0400] LuHe: i'm trying to deploy an django application on amazon opsworks using application_python with this cookbook: http://pastebin.com/L2WSuDAg
[2014-04-08 18:05:41 -0400] LuHe: during the setup i get the following error: http://pastebin.com/hVmAXEfe ( Error executing action `enable` on resource 'supervisor_service[splots]' )
[2014-04-08 18:05:46 -0400] LuHe: but this happens even *before* the repository referenced in the cookbook is checked out
[2014-04-08 18:05:49 -0400] LuHe: could anybody tell me what i am doing wrong?
[2014-04-08 18:15:16 -0400] armendonigian: suppose i have a function foo() defined in cookbook A. I want to include foo() in cookbook B. I used require A, but that threw an error.
[2014-04-08 18:17:52 -0400] kallistec: armendonigian: chef handles code loading for you, which is what require would do (so you don't need to do that)
[2014-04-08 18:18:39 -0400] armendonigian: so all functions defined in cookbook A are accesible in all other cookbooks?
[2014-04-08 18:19:07 -0400] kallistec: armendonigian: if you have module Foo; def foo; puts "foo"; end; end; in a library file, then you can either use `extend Foo` in a recipe to add it to just that recipe,
[2014-04-08 18:19:41 -0400] kallistec: or, you do class Chef::Recipe; include Foo; end; to add it to all recipes
[2014-04-08 18:20:19 -0400] Nukepuppy: LuHe it sounds like some attribute you are missing that fails if it isnt set
[2014-04-08 18:20:42 -0400] Nukepuppy: or maybe are setting but incorrectly?
[2014-04-08 18:21:40 -0400] Nukepuppy: Luhe also if yo ulook at your own error it also says The supervisor service is not running as expected. The command 'supervisorctl status splots' output: / unix:///var/run/supervisor.sock no such file
[2014-04-08 18:22:23 -0400] maniacal: armendonigian:   I'm pretty sure you'll also have to put      depends "cookbook A"   in the metadata of cookbook b
[2014-04-08 18:22:41 -0400] maniacal: or mabye that's "instead of", not "also"
[2014-04-08 18:25:35 -0400] armendonigian: thank you
[2014-04-08 18:26:43 -0400] LuHe: Nukepuppy: the supervisor service should not be started before the application itself is checked out
[2014-04-08 18:27:00 -0400] phutchins: Anyone know anything about compiling chef-server from source? I'm running into some troubles...
[2014-04-08 18:32:40 -0400] ranjib: anyone knows when the chef-server with ssl security patches will be released ?
[2014-04-08 18:33:30 -0400] kreisys: that's my question too
[2014-04-08 18:33:40 -0400] kreisys: or what should be done in the meanwhile
[2014-04-08 18:36:11 -0400] maniacal: ranjib: kreisys: on the mailing list Adam said "today"
[2014-04-08 18:36:13 -0400] maniacal: but not much else
[2014-04-08 18:37:05 -0400] kreisys: I c.. would hold off reissuing certificates I guess
[2014-04-08 18:39:49 -0400] kbarry: hey, if I wanna call the environemtnt of a node that would be #{node['chef_environment']}?
[2014-04-08 18:44:13 -0400] bricker: I'm trying to understand conceptually how to setup a cookbook a bunch of web apps. Should each app have its own recipe? Where should the nginx configuration live? Am I thinking about this all wrong?
[2014-04-08 18:47:59 -0400] Popsikle-Work: hey, anyone know how to capture the rendered bootsrtap template?
[2014-04-08 18:49:12 -0400] jasonv: kbarry: its node.chef_environment ... I've had issues with this in the past
[2014-04-08 18:50:18 -0400] maniacal: Popsikle-Work: back in the day if you ran with --debug it would leave it behind in /tmp
[2014-04-08 18:52:27 -0400] maniacal: bricker: I would look to find out how to express the differences between the webapps in data.  If they're all nginx, the come up with a standard template that will apply to all of them, then detail the differences in the data ( data passed in, or attributes, or a data bag, etc.).   Don't know if that makes sense.  Just trying to lead you away from a recipe per app
[2014-04-08 18:52:31 -0400] Popsikle-Work: yea, I tried that.
[2014-04-08 18:52:34 -0400] Popsikle-Work: ;/
[2014-04-08 18:52:56 -0400] bricker: maniacal: yeah I don't like the recipe-per-app method either
[2014-04-08 18:53:11 -0400] Popsikle-Work: I will just keep running nova boot.... knife bootstrap ;p  I was hoping to get a rendered bootstrap file and add it to rc.3d with nova ;/
[2014-04-08 18:55:14 -0400] maniacal: Popsikle-Work: at the top of your bootstrap you can try:     cp $0 /tmp/copy_of_bootstrap.sh
[2014-04-08 18:55:43 -0400] maniacal: that "should" copy the script file to another file.  when the cleanup happens the copy should still be there
[2014-04-08 18:56:18 -0400] Popsikle-Work: yea, I can copy it like that.  It would make updating the script a bit ugly tho if I had to bootstrap  node every time ;)
[2014-04-08 18:56:54 -0400] maniacal: I suppose.  in my experience bootstrap doesn't update too often.  but I could see how that would be ugly
[2014-04-08 18:57:52 -0400] maniacal: BUT, once you have a copy of then rendered bootstrap it's not really going to change.   You'll see all the rendered data.  any changes you make to the bootstrap won't be templated I'm guessing, so you'll know the affect of the changes
[2014-04-08 18:59:32 -0400] supercom32: I'm sure this is wrong, but inside a ruby_block I am trying to execute a chef resource, like this: http://pastebin.com/4UCaVcLX
[2014-04-08 18:59:53 -0400] supercom32: But it's not right. Does anyone know how to call chef resources from within a ruby_block?
[2014-04-08 19:01:57 -0400] maniacal: supercom32: notifications work for ruby_block resources.  would that work for you?  or is it inline with other ruby code that needs to execute after?
[2014-04-08 19:02:37 -0400] supercom32: manical: Notification would not work because this needs to be in-line. For example, if I have no idea what file I want to transfer, but I parse an array and then call the chef resource to transfer each file.
[2014-04-08 19:03:01 -0400] supercom32: maniacal: I just have no idea how to do it in-line as all.
[2014-04-08 19:07:30 -0400] maniacal: maybe I'm going off track here, but sounds more like you need something like this
[2014-04-08 19:07:30 -0400] maniacal: http://pastebin.com/NbW1rudp
[2014-04-08 19:07:48 -0400] maniacal: but I'm not sure why you're using a ruby_block in the first place
[2014-04-08 19:08:22 -0400] maniacal: but what I put in would NOT be in a block, just in the recipe
[2014-04-08 19:08:23 -0400] ssd7_: Hi all, for those that have been asking, we just put out a blog post on how heartbleed affects Chef: http://www.getchef.com/blog/2014/04/08/openssl-heartbleed-security-update/
[2014-04-08 19:08:31 -0400] supercom32: manical: That's exactly what I want. The only problem is, this code doesn't work under a ruby_block. Because under that scope remote_file doesn't exist. Er, can't be referenced.
[2014-04-08 19:08:49 -0400] maniacal: right.  so why are you using a ruby_block resource
[2014-04-08 19:09:41 -0400] supercom32: maniacal: because I need to execute ruby code, but I only want to do it under guard conditions. if I don't put the code in a ruby block, then it will get executed at compile time or whatnot.
[2014-04-08 19:10:00 -0400] supercom32: Essentially, I have other code that needs to run conditionally in addition to the resource call you posted.
[2014-04-08 19:11:11 -0400] maniacal: ok.  just wanted to make sure you didn't think you had to be inside of a ruby_block to iterate over the array
[2014-04-08 19:11:25 -0400] supercom32: maniacal: ah, ok
[2014-04-08 19:12:05 -0400] supercom32: maniacal: I saw someone post an example like this... http://pastebin.com/GC0gpxmV
[2014-04-08 19:12:15 -0400] maniacal: if you post the whole block to pastebin (or the mailing list) you might be able to fish out some answers.  that's a bit beyond my skillz
[2014-04-08 19:12:17 -0400] supercom32: maniacal: but I'm not sure if that's the same as I need. Nor can I really figure out what's going on.
[2014-04-08 19:20:36 -0400] bricker: I have a recipe which installs nginx with the passenger module. How would I then upgrade nginx later? i.e. rerun the recipe after changing the "version" attribute.
[2014-04-08 19:22:29 -0400] bricker: Or does it get run on each chef-client run?
[2014-04-08 19:22:40 -0400] bricker: And I just have to make sure the recipe doesn't do unnecessary steps each time?
[2014-04-08 19:24:43 -0400] segv: bricker as long as no static version is specified and it's pulling from RPM
[2014-04-08 19:25:00 -0400] segv: it will install it from the latest package available in the repository or if its built from tarball, from the version string
[2014-04-08 19:25:07 -0400] segv: haven't fully used the nginx cookbook so not sure
[2014-04-08 19:25:35 -0400] bricker: segv: oh, this isn't the "official" nginx cookbook, just a custom recipe which downloads and builds nginx
[2014-04-08 19:27:07 -0400] tcotav: if it downloads a specific version, have that remote_file notify whatever your build block is
[2014-04-08 19:28:52 -0400] tcotav: with a not_if stopping remote_file from kicking off if that version is already there
[2014-04-08 19:29:04 -0400] pattersonc: on ubuntu would this work for force upgrading the openssl package
[2014-04-08 19:29:15 -0400] pattersonc: package 'libssl-dev' do action :upgrade end
[2014-04-08 19:30:10 -0400] Popsikle-Work: @maniacal I ust expetended the knife lib file to enclude an -o option ;)
[2014-04-08 19:31:03 -0400] maniacal: Popsikle-Work: please explain.  you can output a renedered bootstrap locally?  or do you still need to bootstrap a node with it
[2014-04-08 19:31:13 -0400] Popsikle-Work: locally
[2014-04-08 19:31:50 -0400] maniacal: get out.  that was fast.  nice.  I was modifying my bootstrap a few months ago.  would have been nice to have that
[2014-04-08 19:31:55 -0400] Popsikle-Work: add an option to /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/chef-11.8.0/lib/chef/knife/bootstrap.rb
[2014-04-08 19:31:56 -0400] maniacal: would you mind sharing your patch
[2014-04-08 19:35:28 -0400] Popsikle-Work: https://gist.github.com/popsikle/10177600#file-bootstrap-rb-L39-L43
[2014-04-08 19:35:31 -0400] Popsikle-Work: its quick and dirty
[2014-04-08 19:35:56 -0400] Popsikle-Work: it just outputs the template to the screen
[2014-04-08 19:35:58 -0400] Popsikle-Work: heh
[2014-04-08 19:36:18 -0400] Popsikle-Work: it could be much much cleaner
[2014-04-08 19:36:22 -0400] Popsikle-Work: but does what I need ;p
[2014-04-08 19:38:17 -0400] maniacal: I'm trying it now....
[2014-04-08 19:41:29 -0400] benlangfeld: coderanger: Hey.
[2014-04-08 19:41:51 -0400] maniacal: Popsikle-Work: that's not just awesome.  that's friggin awesome.  You should submit that as a patch.  maybe with an option to output as a file.  this should certainly be a standard feature
[2014-04-08 19:45:01 -0400] coderanger: benlangfeld: Heya, which version of berks are you using?
[2014-04-08 19:46:11 -0400] benlangfeld: coderanger: 3.0.0.beta9
[2014-04-08 19:46:26 -0400] wdilly: can i use knife bootstrap to add a recipe/role to update an already existing node's runlist or is there another method kind of like: "knife addrecipe <nodename> <newrecipe>"
[2014-04-08 19:46:44 -0400] CPS: i'm trying to look at data bag items from chef shell but I'm getting "Chef::Exceptions::InvalidDataBagPath: Data bag path 'C:\chef\data_bags' is invalid". works fine in recipes run by chef-client
[2014-04-08 19:46:45 -0400] coderanger: benlangfeld: okay, do you have your own berks API server or are you using the default one?
[2014-04-08 19:46:55 -0400] benlangfeld: coderanger: The default one.
[2014-04-08 19:49:01 -0400] benlangfeld: coderanger: Additionally, I'm a little confused by the "roles, data bags and LWRPs are bad" mantra. I'm not sure what's left of Chef after that
[2014-04-08 19:50:57 -0400] coderanger: sec scarfing lunch :)
[2014-04-08 19:52:12 -0400] benlangfeld: coderanger: Ok :) If there was a blog post that said "This stuff is all bad, it really should look like this", that'd be great, but it seems like ideas in someone's head right now and that's not to useful for us boots on the ground.
[2014-04-08 19:53:06 -0400] CPS: in the web UI, when you add a recipe to a node's run list, does it use the most recent version of that recipe? I don't see a way to add version constraints
[2014-04-08 19:53:37 -0400] benlangfeld: CPS: You add version constraints to environments.
[2014-04-08 19:53:41 -0400] dyer: Hey benlangfeld :)
[2014-04-08 19:53:47 -0400] dyer: fancy seeing you here
[2014-04-08 19:53:50 -0400] benlangfeld: dyer: Hey dude :)
[2014-04-08 19:54:00 -0400] CPS: they can also be added to run lists
[2014-04-08 19:54:04 -0400] dyer: who let this guy in ? nothing but trouble
[2014-04-08 19:54:06 -0400] CPS: http://docs.opscode.com/essentials_cookbook_versions.html
[2014-04-08 19:54:16 -0400] benlangfeld: dyer: Yeah, I seem to have turned into an ops guy of late. I'm taking meds for it.
[2014-04-08 19:54:44 -0400] dyer: Ben - we are transitioning to berkshelf 3 as well... we should chat
[2014-04-08 19:54:58 -0400] benlangfeld: dyer: Definitely :)
[2014-04-08 19:55:04 -0400] dyer: I'll hit u up on Skype
[2014-04-08 19:55:17 -0400] Nukepuppy: does chef do  package 'something*' ?
[2014-04-08 19:55:22 -0400] Nukepuppy: i hate to try it ;p
[2014-04-08 19:55:25 -0400] Nukepuppy: too lazzzy
[2014-04-08 19:55:41 -0400] Nukepuppy: typing is hard.
[2014-04-08 19:56:05 -0400] ohmygoshjosh: CPS: Here's an example for you: {"run_list":["recipe[nginx@1.2.3]"]}
[2014-04-08 19:56:18 -0400] ohmygoshjosh: CPS: Although I just saw you posted that same link ;-)
[2014-04-08 19:56:53 -0400] ohmygoshjosh: I am trying to setup backup/restore for my chef server.  I'm hoping to do just do a full backup-restore from version control, but I'm not sure how to handle the restore of nodes and clients.  Is anyone aware of best practices here?
[2014-04-08 19:57:28 -0400] filler: ohmygoshjosh: knife download / will grab everything
[2014-04-08 19:57:39 -0400] filler: cookbooks, envs, roles, etc
[2014-04-08 19:57:40 -0400] filler: http://docs.opscode.com/knife_download.html
[2014-04-08 19:58:01 -0400] coderanger: benlangfeld: Okay, back
[2014-04-08 19:58:18 -0400] coderanger: benlangfeld: And yeah, I put up a post on bags at least, and my ChefConf talk is the LWRP side of this
[2014-04-08 19:58:20 -0400] daxroc: Does it grab all versions of cookbooks etc ?
[2014-04-08 19:58:27 -0400] coderanger: benlangfeld: Just only so many hours of the day I can write
[2014-04-08 19:59:00 -0400] coderanger: benlangfeld: So what you want to do is run your own berks API server which is setup to look at both the community site and your chef server (or just the latter)
[2014-04-08 19:59:04 -0400] ohmygoshjosh: Filler: Great resource. Thanks.  So is the idea that if I have a server that I've created but whose corresponding node/client objects haven't been backed up yet, I'll just need to re-bootstrap that server from scratch after my restore?
[2014-04-08 19:59:09 -0400] benlangfeld: coderanger: Right, just that you say that "app* has been deprecated for years", I'd have expected to have heard about it by now.
[2014-04-08 19:59:31 -0400] daxroc: coderanger, not cracking the whip hard enough
[2014-04-08 19:59:38 -0400] coderanger: benlangfeld: I mean its deprecated in the sense of "I don't really improve it anymore"
[2014-04-08 19:59:50 -0400] coderanger: benlangfeld: If there was a breaking bug or security issue, I would fix it
[2014-04-08 19:59:57 -0400] coderanger: benlangfeld: New features are kind of a gray area though
[2014-04-08 20:00:10 -0400] coderanger: benlangfeld: and #11 is firmly a new feature
[2014-04-08 20:00:26 -0400] ohmygoshjosh: filler: Also, curious if you have thoughts on knife download vs. https://github.com/mdxp/knife-backup
[2014-04-08 20:00:47 -0400] bricker: Each of our apps needs a pretty customized nginx configuration. Is it still sane to build them completely from node attributes or data bags? For example, we'll need to define a few rewrite rules for each app.
[2014-04-08 20:01:29 -0400] coderanger: bricker: Why not make a recipe for each?
[2014-04-08 20:01:29 -0400] benlangfeld: coderanger: So pointing at my chef server won't work great, since this is solo and multiple different organisations.
[2014-04-08 20:01:44 -0400] bricker: coderanger: A recipe for each app?
[2014-04-08 20:01:48 -0400] coderanger: benlangfeld: Use a chef-server anyway, even if you don't use chef-client :-)
[2014-04-08 20:01:59 -0400] benlangfeld: coderanger: And open it to the world?
[2014-04-08 20:02:02 -0400] coderanger: benlangfeld: It just acts as a release management system for cookbooks
[2014-04-08 20:02:14 -0400] coderanger: benlangfeld: Nah, just have to get keys to workstations and the berks API server
[2014-04-08 20:02:29 -0400] benlangfeld: coderanger: Right, except the end users are people I don't know...
[2014-04-08 20:02:31 -0400] cob: i'm working with chef-solo, and I recommend chef-server, such a mess without it
[2014-04-08 20:02:56 -0400] coderanger: benlangfeld: Then sure, give a non-admin key to the world
[2014-04-08 20:03:34 -0400] dyer: Does berkshelf-api actually download the cookbooks or just proxy the endpoints in the config ?
[2014-04-08 20:03:59 -0400] coderanger: dyer: Just indexes what cookbooks and versions exist
[2014-04-08 20:04:06 -0400] coderanger: dyer: its a metadata aggregator
[2014-04-08 20:04:16 -0400] workmad3: benlangfeld: I run the berkshelf api locally when I need it
[2014-04-08 20:04:19 -0400] workmad3: benlangfeld: https://gist.github.com/workmad3/10182427 is my setup
[2014-04-08 20:04:47 -0400] benlangfeld: coderanger: Ok. This still doesn't really help though. I'm swapping "add this unrelated thing to your Berksfile and don't ask me why" which is confusing and error prone, for "use this different Berkshelf API (trust me) and here's some chef server keys, good luck". I was really just going for something simple.
[2014-04-08 20:05:03 -0400] filler: ohmygoshjosh: shrug.  knife proper does a good enough job.
[2014-04-08 20:05:10 -0400] dyer: ok, so I have two chef servers ( prod / dev ).  when I try `berks package` its trying to use my knife.rb client config to download a cookbook from the dev servers.  Thats failing because the keys are different.
[2014-04-08 20:05:18 -0400] coderanger: benlangfeld: Unfortunately cookbook release management is far from simple, and you _can't_ use only the chef community site for anything non-trivial
[2014-04-08 20:05:30 -0400] kbarry: IS there a list of common attributes?
[2014-04-08 20:06:14 -0400] coderanger: kbarry: You mean ohai attrs or from elsewhere?
[2014-04-08 20:06:15 -0400] cob: benlangfeld: simple? opscode is now known as chef, and chef's going through light-speed evolution.. not simple
[2014-04-08 20:06:16 -0400] benlangfeld: coderanger: Right, but cookbooks released to the community site which have dependencies *not* on the community site are just making things difficult where they don't have to be.
[2014-04-08 20:07:20 -0400] coderanger: benlangfeld: I view it as shit that needs to get shoveled no matter what, so its not actually adding complexity :)
[2014-04-08 20:07:50 -0400] benlangfeld: cob: I'm aware of that, just trying to avoid the people depending on my work from saying "well then fuck Chef, I'll use Puppet instead".
[2014-04-08 20:08:19 -0400] kbarry: i mean, like what is the name of the attribute that holds the node's current environment
[2014-04-08 20:08:28 -0400] kbarry: (so i can know how to use it)
[2014-04-08 20:08:30 -0400] coderanger: kbarry: It isn't an attribute
[2014-04-08 20:08:31 -0400] ohmygoshjosh: filler: Thx for the perspective. Looks like the only diff between the two is knife-backup auto re-creates users and then resets their passwords/keys.  Seems hard to automate that process.
[2014-04-08 20:08:38 -0400] coderanger: kbarry: Its a method call on node, node.chef_environment
[2014-04-08 20:08:41 -0400] jameson__: kbarry: node.chef_attribute
[2014-04-08 20:08:47 -0400] jameson__: chef_environment
[2014-04-08 20:08:57 -0400] someara: do not confuse things you find on the community site with core chef
[2014-04-08 20:08:58 -0400] jameson__: my brain goes pffffffff
[2014-04-08 20:09:05 -0400] someara: puppet is in the same boat by the way
[2014-04-08 20:09:12 -0400] benlangfeld: kbarry: See http://docs.opscode.com/ohai.html, I think
[2014-04-08 20:09:35 -0400] someara: making cross platform cookbooks is Really Really Hard
[2014-04-08 20:09:42 -0400] coderanger: someara: trololol :)
[2014-04-08 20:09:52 -0400] coderanger: This issue is less about cross-platform
[2014-04-08 20:09:59 -0400] coderanger: and more that "packaging systems are hard"
[2014-04-08 20:10:04 -0400] coderanger: really really really hard
[2014-04-08 20:10:10 -0400] someara: also that
[2014-04-08 20:10:19 -0400] alexbst: name and version standards, etc. derp.
[2014-04-08 20:10:23 -0400] someara: we should all switch to nixos, yo
[2014-04-08 20:10:25 -0400] workmad3: coderanger: nah, packaging systems are easy... decent packaging systems and release management is hard :)
[2014-04-08 20:10:26 -0400] alexbst: ohai chefs.
[2014-04-08 20:10:26 -0400] coderanger: and berks/community/etc are all a packaging systems thats grown slowly over the last few years
[2014-04-08 20:10:46 -0400] daxroc: yeah came across an example of the rbenv cookbook on chef community and fnichol-rbenv took me a while to figure out they wernt the same.
[2014-04-08 20:11:07 -0400] benlangfeld: someara: I don't confuse them, just that the argument started as "hey, this contribution was made months ago, how about a release?" and turned into "don't use databags, setup a chef server and berkshelf API instance and don't rely on the community site for FOSS cookbooks". It could have been simple, but we seem to have avoided keeping it so in favour of I don't know what
[2014-04-08 20:11:18 -0400] daxroc: *served me right by just adding it to the berksfile & metadata
[2014-04-08 20:11:38 -0400] someara: the community site is like cpan in 1998
[2014-04-08 20:11:47 -0400] someara: yea the contribution process is being fixed
[2014-04-08 20:11:59 -0400] someara: what'd you send in ?
[2014-04-08 20:14:08 -0400] benlangfeld: someara: Just https://github.com/poise/application_nginx/pull/11
[2014-04-08 20:14:26 -0400] benlangfeld: Nothing particularly exciting or discussion worthy.
[2014-04-08 20:14:44 -0400] benlangfeld: The original contribution wasn't even mine.
[2014-04-08 20:15:10 -0400] someara: anything with "poise" in it belongs to coderanger, not opscode =)
[2014-04-08 20:15:33 -0400] coderanger: Yep, and the patch is merged, I've just not done a cut to the community site in a while
[2014-04-08 20:15:36 -0400] someara: I'm still not %100 sure what those application cookbooks actually do
[2014-04-08 20:15:59 -0400] coderanger: someara: The goal was "modular application platform/PaaS with Chef"
[2014-04-08 20:16:08 -0400] jameson__: let you deploy applications I think the example one builds a django doesn't it?
[2014-04-08 20:16:24 -0400] benlangfeld: someara: They're basically just helpful little shortcuts. Maybe more effort than they're worth.
[2014-04-08 20:17:13 -0400] coderanger: benlangfeld: Indeed :)
[2014-04-08 20:17:27 -0400] coderanger: benlangfeld: Like I said, I don't use them myself anymore because the bugs outweigh the helpers
[2014-04-08 20:18:21 -0400] coderanger: The goal is still worthwhile, but that impl is a lost cause
[2014-04-08 20:18:48 -0400] benlangfeld: coderanger: Would you accept PRs which call that out at <h1> in the readmes?
[2014-04-08 20:19:18 -0400] coderanger: Surely, though like I also said, I think your source of frustration is in wanting new features in something thats on life support
[2014-04-08 20:19:25 -0400] coderanger: So thats probably the bit to call out
[2014-04-08 20:19:36 -0400] coderanger: if it works for you Today, I will try to ensure it continues to work
[2014-04-08 20:19:47 -0400] coderanger: but thats about the limits of my commitment to the current code
[2014-04-08 20:20:11 -0400] benlangfeld: But you also said the "deploy" resource is fundamentally broken...
[2014-04-08 20:21:48 -0400] coderanger: And it is
[2014-04-08 20:22:01 -0400] coderanger: Its callback system just doesn't work well
[2014-04-08 20:22:17 -0400] coderanger: and unfortunately those callbacks are what drives the whole app* framework
[2014-04-08 20:22:29 -0400] coderanger: it runs each callback in an isolated context
[2014-04-08 20:22:40 -0400] coderanger: also means stuff like config updates don't happen unless there is also a deploy
[2014-04-08 20:22:55 -0400] coderanger: since the callbacks aren't reeeeally convergent, they are delta update hooks
[2014-04-08 20:24:01 -0400] coderanger: this means the app* system ends up mixing convergent and procedural code in a super unclear way
[2014-04-08 20:27:35 -0400] tcotav: \\
[2014-04-08 20:27:36 -0400] tcotav: \
[2014-04-08 20:27:36 -0400] tcotav: \
[2014-04-08 20:41:19 -0400] benlangfeld: Ok, so a few people seem keen on the idea of a custom berkshelf API instance which points at one or more chef servers. The berkshelf API will thus then indicate that a cookbook should be downloaded from an arbitrary chef server. But berkshelf's config only allows a single chef server's credentials to be specified, a la http://berkshelf.com/'s "configuring Berkshelf" section. Is there a solution to this?
[2014-04-08 20:43:00 -0400] coderanger: benlangfeld: You can specify more than one
[2014-04-08 20:43:06 -0400] coderanger: benlangfeld: Just add additional source blocks
[2014-04-08 20:43:19 -0400] benlangfeld: coderanger: That's the berkshelf API, not berkshelf on a workstation, no?
[2014-04-08 20:43:33 -0400] benlangfeld: I think dyer might have answered me: https://github.com/berkshelf/berkshelf/pull/580
[2014-04-08 20:43:40 -0400] coderanger: benlangfeld: Ahh I see your problem, got it
[2014-04-08 20:44:09 -0400] coderanger: Yeah, that would be an issue :-(
[2014-04-08 20:44:26 -0400] dyer: well shit
[2014-04-08 20:44:48 -0400] coderanger: benlangfeld: I'll try to get some releases up tomorrow, but I'm in the air most of the day
[2014-04-08 20:48:19 -0400] jameson__: ororo
[2014-04-08 20:52:03 -0400] benlangfeld: coderanger: Thanks dude, much appreciated
[2014-04-08 20:54:22 -0400] m10n: Forgive me if this has been asked a billion times today, but any chance a security update is planned to update open-ssl libraries used in the chef-server embedded nginx server?
[2014-04-08 20:54:45 -0400] coderanger: m10n: yes
[2014-04-08 20:54:55 -0400] coderanger: Release will hopefully go up later today
[2014-04-08 20:54:58 -0400] m10n: awesome
[2014-04-08 20:55:22 -0400] m10n: was afraid I'd have to roll my own.  You guys rock
[2014-04-08 20:58:52 -0400] CPS: who put 'epic fail!
[2014-04-08 20:59:09 -0400] CPS: 'epic fail!' in chef-shell's error output?
[2014-04-08 21:02:24 -0400] kallistec: CPS: I did.
[2014-04-08 21:03:12 -0400] CPS: you should feel bad
[2014-04-08 21:03:22 -0400] kallistec: I don't :P
[2014-04-08 21:04:14 -0400] kallistec: I do think chef-shell should just be rewritten in pry though. But no time
[2014-04-08 21:05:05 -0400] coderanger: CPS: Its in the Chef API too
[2014-04-08 21:23:04 -0400] ichilton: WARNING: Failed to connect to  -- Net::SSH::AuthenticationFailed: Authentication failed for user ichilton@box.mydomain.com@box.mydomain.com
[2014-04-08 21:23:19 -0400] ichilton: The error is because i've not got an ichilton user on the box yet, but any idea why it's repeated the hostname twice?
[2014-04-08 21:23:27 -0400] ichilton: that was from a knife ssh command from my workstation btw
[2014-04-08 21:23:47 -0400] benlangfeld: what was that command?
[2014-04-08 21:23:54 -0400] benlangfeld: or rather, what options did you pass to it?
[2014-04-08 21:24:11 -0400] ichilton: knife ssh name:* hostname
[2014-04-08 21:24:48 -0400] ichilton: i've just bootstrapped a few nodes - not got a user added to them yet....hence the error
[2014-04-08 21:36:53 -0400] aliljet|new: hm, this is weird, I've geting back a "bad request" error when I'm trying to upload cookbooks (knife cookbook upload -a)
[2014-04-08 21:37:08 -0400] aliljet|new: and I'm using the latest edition of the chef server
[2014-04-08 21:38:22 -0400] shwerpa: Does chef feature the capability of executing automated deployments that are sequenced across multiple systems?  (e.g. stop the application on server A, then upgrade the database on server B, then restart the application on server A again)
[2014-04-08 21:39:39 -0400] gleam: nope
[2014-04-08 21:40:24 -0400] gleam: my experience is that except in very very simple cases you don't want to use chef for deploys
[2014-04-08 21:40:55 -0400] benlangfeld: gleam: What do you use?
[2014-04-08 21:40:57 -0400] shwerpa: really?  wow.  I thought that was one of the principal use cases for chef.
[2014-04-08 21:41:05 -0400] gleam: depends
[2014-04-08 21:41:11 -0400] gleam: capistrano usually
[2014-04-08 21:41:16 -0400] gleam: homegrown sometimes
[2014-04-08 21:42:15 -0400] jbz: I agree with gleam.  When you're in a use case that chef works with, it's brilliant.  Step outside that, and it's hell.
[2014-04-08 21:43:26 -0400] shwerpa: I'm actually confused about the core purpose of chef now.  I thought it was principally intended to let me define and automate the deployment of my infrastructure
[2014-04-08 21:43:42 -0400] gleam: infrastructure, not necessarily the application itself
[2014-04-08 21:44:33 -0400] kallistec: shwerpa: it does. The kind of multistep orchestration you're talking about can be "faked" with chef or you can use a different tool (possibly in conjunction with chef)
[2014-04-08 21:45:18 -0400] shwerpa: I really appreciate your support guys.   It's helping me understand the relationship of the various components I am going to need in my solution.
[2014-04-08 21:45:46 -0400] kallistec: shwerpa: how often do you update your schema though?
[2014-04-08 21:47:02 -0400] shwerpa: well, the DB change was only an example of a cross-computer orchestration.   But we have lots and lots of such needs.
[2014-04-08 21:48:06 -0400] shwerpa: Our project includes a system of about 120 computers running a mix of off-the-shelf software and developed code.  There are dependencies and interactions between these systems that often define specific startup/shutdown sequences during maintenance activities
[2014-04-08 21:48:59 -0400] shwerpa: I was hoping to define the deployment (infrastructure, supporting apps and developed apps) for all components to allow for better configuration control and the ability to both upgrade or rebuild using much greater automation
[2014-04-08 21:49:12 -0400] shwerpa: and all this in a primarily MS Windows environment :(
[2014-04-08 21:49:46 -0400] aliljet|new: hm, so on the box where I've got the chef server running, I can see the server is up, but when I try to get to the machine https://theiphere:443/sandboxes it comes back with an error telling me it was expenting json data and didnt' get it
[2014-04-08 21:52:11 -0400] kallistec: shwerpa: well, it still depends on your requirements. You can do things like write ruby code to poll on some other system being available before you change the state of a service
[2014-04-08 21:53:12 -0400] aliljet|new: annnddd! when I try to get to https://theiphere:443/sandboxes I get a 404 not found
[2014-04-08 21:53:56 -0400] kallistec: aliljet|new: why that particular URI?
[2014-04-08 21:54:24 -0400] shwerpa: kallistec:  I appreciate the advice.  sounds like I should be careful and not overestimate the deployment capabilities of chef.
[2014-04-08 21:54:30 -0400] aliljet|new: kallistec: hm, it's what's being called by the knife cookbook  upload  command
[2014-04-08 21:55:25 -0400] benlangfeld: aliljet|new: Right, but not as a GET request, surely
[2014-04-08 21:55:31 -0400] kallistec: shwerpa: if you need to tightly control activities on different kinds of machines in a specific order, then you might want to add something like rundeck on top of chef
[2014-04-08 21:56:19 -0400] aliljet|new: benlangfeld: hm, really?  I'm getting a weird reply from the knife cookbook upload "http request reeturned 400 bad request: error"
[2014-04-08 21:56:21 -0400] shwerpa: kallistec:  thanks for the advice.  I'm not familiar with rundeck, so I will do some reading in that direction.  I also understand that func, fabric, and capistrano have some of these capabiltiies
[2014-04-08 21:56:21 -0400] kallistec: If you get enterprise chef, then you get the push jobs server which can do that kind of thing
[2014-04-08 21:56:57 -0400] shwerpa: i'll also read on the push jobs feature.   Enterprise chef is almost certainly what we'll be looking at.
[2014-04-08 21:57:35 -0400] aliljet|new: benlangfeld: this si what I get back from knife: pastebin/RgtvX47z
[2014-04-08 21:57:51 -0400] benlangfeld: aliljet|new: Was that supposed to be a URL?
[2014-04-08 21:58:12 -0400] aliljet|new: benlangfeld: ugh, sorry, getting wrapped around a bunch of calls about this :)
[2014-04-08 21:58:18 -0400] aliljet|new: benlangfeld: this si what I get back from knife: pastebin.com/RgtvX47z
[2014-04-08 22:03:31 -0400] kallistec: aliljet|new: you probably need to run `chef-server-ctl tail` on the host running chef-server to get more info
[2014-04-08 22:05:33 -0400] aliljet|new: kallistec: ah, so I see it trying to post to /sandboxes and then I see it coming back with a bad checksum error
[2014-04-08 22:06:14 -0400] aliljet|new: kallistec: http://pastebin.com/ecNNB5hz
[2014-04-08 22:06:19 -0400] aliljet|new: kallistec: http://pastebin.com/ecNNB5hx
[2014-04-08 22:07:14 -0400] kallistec: aliljet|new: is this with the latest version of chef-server?
[2014-04-08 22:07:19 -0400] aliljet|new: kallistec: it is
[2014-04-08 22:08:56 -0400] kallistec: aliljet|new: and this occurs for any cookbook that you try to upload?
[2014-04-08 22:09:01 -0400] aliljet|new: yep
[2014-04-08 22:11:28 -0400] kallistec: aliljet|new: this is a completely vanilla install of chef, no knife plugins or anything?
[2014-04-08 22:12:40 -0400] aliljet|new: kallistec: completely vanilla -- basically downloaded the chef-server rpm, installed it with rpm -i, then ran a reconfigure, created a .chef/knife.rb file, copied over the /etc/chef-server/admin.pem file, and ran the upload
[2014-04-08 22:13:54 -0400] kallistec: aliljet|new: and stuff like `knife node list` `knife client list` work?
[2014-04-08 22:18:40 -0400] dbalatero: vagrant up hangs on running apt-get commands (ps auxf: https://gist.github.com/anonymous/10201546, virtualbox ubuntu 12.04 w/ 4gb ram + 2 CPUs) - has anyone else seen this before? it takes extremely long, but i'm not sure how to get any debug output to know why
[2014-04-08 22:18:52 -0400] dbalatero: (that's w/ chef-solo + vagrant to be clear)
[2014-04-08 22:19:25 -0400] drrk: I don't know - but i've been recommended using vagrant-lxc if you can as it's much faster
[2014-04-08 22:20:08 -0400] benlangfeld: drrk: I think writing off VirtualBox is premature here ;)
[2014-04-08 22:20:57 -0400] drrk: indeed, it was just a general comment
[2014-04-08 22:21:43 -0400] aliljet|new: kallistec: they do work
[2014-04-08 22:23:21 -0400] kallistec: aliljet|new: okay. This is a new one, I'm looking through the code to see what could be causing it
[2014-04-08 22:23:23 -0400] dbalatero: drrk: i'd have to set up a linux virtualbox instance as the host OS first, since i'm on mac
[2014-04-08 22:23:46 -0400] drrk: ah, fair enough
[2014-04-08 22:23:52 -0400] dbalatero: seems complex and a little tangential to my original goal
[2014-04-08 22:23:56 -0400] dbalatero: :\
[2014-04-08 22:24:34 -0400] dbalatero: weirdly, if i kill -9 the chef process and run the same apt-get command manually, it totally runs in a reasonable timeframe
[2014-04-08 22:25:20 -0400] drrk: hmm
[2014-04-08 22:25:26 -0400] drrk: sounds like it's asking for input then
[2014-04-08 22:25:51 -0400] benlangfeld: does it eventually complete when chef runs it, dbalatero?
[2014-04-08 22:26:25 -0400] aliljet|new: kallistec: woot :)
[2014-04-08 22:26:51 -0400] dbalatero: benlangfeld: speak of the devil, it just crashed after 600 second timeout https://gist.github.com/anonymous/fbb1e8091f511be77f51
[2014-04-08 22:27:10 -0400] kallistec: aliljet|new: this cookbook isn't empty, is it? what do you get if you `ls -R` the cookbook?
[2014-04-08 22:27:51 -0400] dbalatero: network error maybe?
[2014-04-08 22:27:55 -0400] benlangfeld: dbalatero: Ah, but it is executing, so it's not hanging expecting input, it really is just slow.
[2014-04-08 22:28:07 -0400] dbalatero: seems like it
[2014-04-08 22:28:22 -0400] aliljet|new: kallistec: I get a buch of stuff back -- the cookbooks are definitely not empty
[2014-04-08 22:31:37 -0400] dbalatero: benlangfeld: manually running "apt-get -q -y install openjdk-6-jdk=6b30-1.13.1-1ubuntu2~0.12.04.3" works. i'm suspect of the budget internet connection at work
[2014-04-08 22:39:40 -0400] kallistec: aliljet|new: okay, I was able to reproduce your error
[2014-04-08 22:39:56 -0400] kallistec: I think your cookbook_path is misconfigured
[2014-04-08 22:40:25 -0400] aliljet|new: kallistec: ahh, really?  let me check...
[2014-04-08 22:40:45 -0400] kallistec: aliljet|new: if I run `knife cookbook upload -a -o /tmp/lolwtf` where /tmp/lolwtf is an empty directory, I reproduce your error
[2014-04-08 22:41:50 -0400] kallistec: aliljet|new: were you using `knife cookbook upload -a` ?
[2014-04-08 22:43:12 -0400] aliljet|new: kallistec: shit, you're right.  I'm an idiot!  sorry!
[2014-04-08 22:43:24 -0400] aliljet|new: kallistec: I had dropped that part of the knife.rb config and it wasn't playing
[2014-04-08 22:43:55 -0400] kallistec: aliljet|new: bad edge case in our input validation, I'll file a bug. You were using `-a`, yes?
[2014-04-08 22:44:46 -0400] aliljet|new: yep
[2014-04-08 22:44:53 -0400] aliljet|new: kallistec: and yay!  you rock
[2014-04-08 22:45:03 -0400] kallistec: you bet
[2014-04-08 22:45:21 -0400] gmcinnes: Hi all:  I'm using the new hosted chef, and I can't find any way to add a client to the admins group
[2014-04-08 22:45:27 -0400] doublerr: anyone else getting 502 Bad Gateway with manage.opscode.com
[2014-04-08 22:45:52 -0400] bricker: We have a few configuration files that need to be shared across all servers which host an application. Where is a good place to keep these files? They contain API configuration, database passwords, and other sensitive information.
[2014-04-08 22:46:00 -0400] doublerr: sorry, chef search on manage.opscode.com
[2014-04-08 22:47:20 -0400] gmcinnes: I'd keep them in encrypted data bags bricker
[2014-04-08 22:47:47 -0400] benlangfeld: bricker: Standard encrypted data bags or chef-vault :)
[2014-04-08 22:48:13 -0400] gmcinnes: yeah. chef-vault is the more modern answer. Haven't got around to trying it yet
[2014-04-08 22:48:16 -0400] dbalatero: is it the case that the "apt" cookbook doesn't automatically run "apt-get update"? if so, it's unclear how to run it
[2014-04-08 22:48:24 -0400] bricker: gmcinnes: benlangfeld Keep the configuration as JSON objects (data bags)? Or can I actually store the files somewhere and then just move them into place when the recipe runs?>
[2014-04-08 22:48:56 -0400] benlangfeld: bricker: Encrypted data bags, not standard ones.
[2014-04-08 22:49:35 -0400] benlangfeld: bricker: Sorry, I understand the question now.
[2014-04-08 22:49:53 -0400] benlangfeld: bricker: Perhaps just put the sensitive data in the databags and make the rest a template.
[2014-04-08 22:50:38 -0400] bricker: benlangfeld: yeah I can do that. Thanks!
[2014-04-08 22:54:14 -0400] andyshinn: anyone else having problems with the hosted chef interface?
[2014-04-08 22:55:23 -0400] doublerr: andyshinn: Im seeing 502s with chef search for certain orgs....
[2014-04-08 22:55:29 -0400] doublerr: just sent an email to the support team
[2014-04-08 22:55:41 -0400] gmcinnes: I am, but am andyshinn, but not the same issue.
[2014-04-08 22:56:08 -0400] andyshinn: yea, it is accompanied by 502 Bad Gateway for stuff that uses search
[2014-04-08 22:56:31 -0400] andyshinn: that is when i went to check out https://manage.opscode.com/, which gives a 500 :\
[2014-04-08 22:56:32 -0400] bricker: I find the hosted chef interface to pretty buggy, maybe it's just me.
[2014-04-08 22:56:45 -0400] doublerr: bets their updating SSL certs any takers :)
[2014-04-08 22:57:07 -0400] gmcinnes: ugh. what a nightmare.
[2014-04-08 22:57:35 -0400] bricker: doublerr: probably
[2014-04-08 22:57:50 -0400] gmcinnes: does anyone manage multiple orgs? I could use some advice on best practices for doing that.
[2014-04-08 22:57:50 -0400] bricker: lol
[2014-04-08 22:57:51 -0400] andyshinn: well, glad it is not just me then
[2014-04-08 22:57:57 -0400] doublerr: gmcinnes: i do
[2014-04-08 22:58:15 -0400] doublerr: its not all search clusters though. I have some orgs searching fine
[2014-04-08 22:59:01 -0400] gmcinnes: any pointers? So far I've just been passing config=org-dir to knife, or setting KNIFE_HOME. Are there any tools to smooth the process?
[2014-04-08 22:59:58 -0400] doublerr: gmcinnes: I havent used any tools but I know there something called knife block that I think is supposed to help
[2014-04-08 23:00:12 -0400] doublerr: I put each org in a directory on my system
[2014-04-08 23:00:22 -0400] benlangfeld: Separate dirs for me too
[2014-04-08 23:00:27 -0400] doublerr: so like /cheforgs/org1, /cheforgs/org2
[2014-04-08 23:00:43 -0400] doublerr: validator and knife.rb gets placed in each and my user.pem is in /cheforgs
[2014-04-08 23:00:47 -0400] gmcinnes: yeah, that's what I"m doing too.
[2014-04-08 23:00:55 -0400] gmcinnes: seems to work ok :)
[2014-04-08 23:01:13 -0400] doublerr: symlink up a dir for user.pem
[2014-04-08 23:01:18 -0400] doublerr: works great so far
[2014-04-08 23:01:36 -0400] benlangfeld: Why not just put user.pem in ~/.chef ?
[2014-04-08 23:01:43 -0400] gmcinnes: I do have one issue though.  In the past I've followed a pattern where I've had one user, but created different *clients* for each org
[2014-04-08 23:01:48 -0400] benlangfeld: and the validators, for that matter...
[2014-04-08 23:02:10 -0400] gmcinnes: because I thought it would be easier to revoke an individual client etc.
[2014-04-08 23:02:43 -0400] gmcinnes: but the new mgt. console doesn't seem to make it possible to add clients directly to the admin group.  And there doesn't seem to be access to that from knife either.
[2014-04-08 23:02:49 -0400] gmcinnes: so, I'm kinda hooped now.
[2014-04-08 23:04:07 -0400] kallistec: gmcinnes: https://github.com/opscode/knife-acl
[2014-04-08 23:04:31 -0400] doublerr: ive had issues with knife-acl personally
[2014-04-08 23:05:43 -0400] gmcinnes: kallistec: yeah, I saw that, but knife-acl is way more than I need.  All I need to do is add one client to one group.
[2014-04-08 23:06:00 -0400] gmcinnes: I can dig down and see if I can find an example I can pass to raw though.
[2014-04-08 23:08:30 -0400] rayrod2030: anybody ever run into a cookbook that sets build-essential.compile_time = true and then breaks when it tries to run before apt::default?
[2014-04-08 23:09:11 -0400] rayrod2030: basically build-essential is trying to run before apt can update the apt cache and therefore breaking when it can't find the right version of packages for build-essential packages.
[2014-04-08 23:11:21 -0400] adin: seeing a lot of ERROR: 502 "Bad Gateway" lately  - anyone else?
[2014-04-08 23:11:42 -0400] kallistec: adin: it's being looked at
[2014-04-08 23:11:49 -0400] doublerr: http://status.opscode.com/post/82135825017/we-are-investigating-reports-of-the-search-api-not
[2014-04-08 23:11:52 -0400] adin: ty
[2014-04-08 23:17:23 -0400] willejs: ohai chefs
[2014-04-08 23:23:11 -0400] esmet_: ohsup
[2014-04-08 23:23:18 -0400] esmet_: the next generation of ohai
[2014-04-08 23:24:29 -0400] viglesias: is there a way to search for all ips on a node
[2014-04-08 23:24:55 -0400] viglesias: i have a multihomed box, and would like to search through all possible IPs
[2014-04-08 23:26:03 -0400] benlangfeld: esmet_: That has to be ohnoes, surely?
[2014-04-08 23:26:55 -0400] benlangfeld: viglesias: node["network"]["interfaces"]
[2014-04-08 23:27:09 -0400] viglesias: benlangfeld: thanks sir, will that grab multiple ips if they are on the same interface?
[2014-04-08 23:28:13 -0400] viglesias: ack found it
[2014-04-08 23:28:23 -0400] viglesias: thanks again for the pointer
[2014-04-08 23:28:48 -0400] benlangfeld: Ah, I was too slow.
[2014-04-08 23:28:49 -0400] benlangfeld: np :)
[2014-04-08 23:29:20 -0400] esmet_: benlangfeld: admittedly that is better
[2014-04-08 23:35:16 -0400] freerobby: Is there a best way for securing chef servers against heartbeat? Should I just do a drop in replacement of OpenSSL into chef-server/embedded?
[2014-04-08 23:35:23 -0400] freerobby: err heartbleed
[2014-04-08 23:36:04 -0400] jassinpain: hello all
[2014-04-08 23:36:22 -0400] jassinpain: looking for some help, likely ruby syntax but maybe someone will know
[2014-04-08 23:36:23 -0400] jassinpain: https://gist.github.com/jassinpain/10209043
[2014-04-08 23:36:50 -0400] jassinpain: trying to create a dynamic provider
[2014-04-08 23:36:52 -0400] maraca: any idea if this is related to heartbleed? https://gist.github.com/maraca/10209118
[2014-04-08 23:38:45 -0400] jassinpain: got it, about right always right after asking people
[2014-04-08 23:56:19 -0400] maraca: so - ohai 7 isn't giving us much love
[2014-04-08 23:56:26 -0400] maraca: was chef-client 12.11 release just now?
[2014-04-08 23:57:36 -0400] kallistec: maraca: that warning was planned long before hearbleed
[2014-04-08 23:58:01 -0400] maraca: kallistec baha - yeah
[2014-04-08 23:58:08 -0400] maraca: not too worried about the warning
[2014-04-08 23:58:09 -0400] kallistec: maraca: http://www.getchef.com/blog/2013/10/31/ssl-certificate-validation-in-chef/
[2014-04-08 23:58:24 -0400] maraca: having issues with ohai 7 and nginx
[2014-04-08 23:58:47 -0400] kallistec: maraca: can you elaborate?

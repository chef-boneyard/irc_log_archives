[2014-04-07 01:19:40 -0400] hailwood: Hey guys, does anyone know if there is a plugin for Intellij Ultimate for Chef?
[2014-04-07 01:22:10 -0400] juliancdunn: hailwood: people have been asking them for over two years. please feel free to vote for it over at http://youtrack.jetbrains.com/issue/RUBY-10512
[2014-04-07 01:24:34 -0400] double_p: brain humming.. almost through chefconf videos 2013 :P
[2014-04-07 01:29:53 -0400] hailwood: juliancdunn: Tick number 97 added
[2014-04-07 01:31:38 -0400] alban: I've read that definitions are loaded after LWRPs and it can sometimes be too late for them to set node variables. Someone would have a link or comment about when precisely definitions are loaded in the process ?
[2014-04-07 01:36:35 -0400] double_p: alban: definitions? attributes?
[2014-04-07 01:38:15 -0400] juliancdunn: double_p: just in time for ChefConf 2014 :-)
[2014-04-07 01:38:52 -0400] alban: double_p: "Resources/providers are loaded earlier than definitions" http://www.devopsnotes.com/2012/02/how-to-write-good-chef-cookbook.html
[2014-04-07 01:41:15 -0400] double_p: juliancdunn: ohai :) thanks for your antipatterns, i've to talk to boss later this day :)
[2014-04-07 01:42:40 -0400] juliancdunn: double_p: heh. you're welcome! hope you can make it to the conference.
[2014-04-07 01:43:54 -0400] double_p: juliancdunn: no, sorry. Way too far/expensive from central europe.. just besides "always overworked" :P
[2014-04-07 01:45:56 -0400] juliancdunn: :-(
[2014-04-07 01:47:53 -0400] double_p: completly blasted by the talk from phil at facebook running this plethora of stuff with 4 people (that's about the size of our company :>)
[2014-04-07 01:48:57 -0400] double_p: alban: only can do guesswork from the docs here, but i'd say you load that definition with attributes expanded already. so not sure what you're up to
[2014-04-07 01:55:56 -0400] double_p: the problem i have with all that CI/DevOps dance every 2-3 talk is about: we dont have Devs, we have customers :}
[2014-04-07 02:00:57 -0400] jchauncey: juliancdunn: ive thought about doing a similar lightning talk =)
[2014-04-07 02:05:17 -0400] coderanger: juliancdunn: Ugly: recipes
[2014-04-07 02:09:11 -0400] alban: double_p: thanks for your answer, I don't have a problem in particular, I just wanted to know more about the loading order and why it can be tricky if ever it can ;o
[2014-04-07 02:33:06 -0400] jchauncey: poise+HWRP =)
[2014-04-07 02:38:56 -0400] coderanger: Is this even remotely understandable as to the meaning: http://i.coderanger.net/of2Wk.png
[2014-04-07 02:39:17 -0400] coderanger: Trying to figure out how to represent ontological nesting on a slide
[2014-04-07 02:41:08 -0400] double_p: sure (and i needed a while to figure that back some weeks :})
[2014-04-07 02:49:15 -0400] jchauncey: coderanger: i guess i kind of understand what you are getting at
[2014-04-07 02:49:54 -0400] coderanger: Working on a new graphic based on nesting dolls
[2014-04-07 02:49:57 -0400] coderanger: lets see how this works
[2014-04-07 02:57:14 -0400] coderanger: http://i.coderanger.net/oIQH9.png
[2014-04-07 02:57:20 -0400] coderanger: Probably better at least
[2014-04-07 03:03:38 -0400] double_p: environment?
[2014-04-07 03:04:26 -0400] a13x2121: can you do chef-rewind on a bash resource?
[2014-04-07 03:07:25 -0400] coderanger: double_p: envs don't map in to this
[2014-04-07 03:07:30 -0400] coderanger: double_p: as they don't define a noun
[2014-04-07 03:08:05 -0400] coderanger: This is the part of my talk when I start rambling about ontology
[2014-04-07 03:08:33 -0400] coderanger: a13x2121: Sure
[2014-04-07 03:15:26 -0400] jchauncey: writers block sucks
[2014-04-07 03:15:34 -0400] a13x2121: thanks coderanger, figured it out
[2014-04-07 03:15:39 -0400] jchauncey: coderanger: i like the second image better
[2014-04-07 03:15:39 -0400] coderanger: jchauncey: srsly
[2014-04-07 03:15:58 -0400] jchauncey: is that for your poise talk?
[2014-04-07 03:16:03 -0400] coderanger: jchauncey: Yeah
[2014-04-07 03:17:48 -0400] jchauncey: coderanger: we are in the process of converting some lwrps to use poise
[2014-04-07 03:18:00 -0400] coderanger: :-)
[2014-04-07 03:18:13 -0400] coderanger: You should go check out the README on it and tell me if its usable
[2014-04-07 03:18:17 -0400] jchauncey: hehe
[2014-04-07 03:18:22 -0400] coderanger: (no docs on subresources yet)
[2014-04-07 03:18:45 -0400] jchauncey: looking a lot better than it did about 2 weeks ago
[2014-04-07 03:20:41 -0400] coderanger: Currently on I think rev 3 of "scrap the whole talk and start over"
[2014-04-07 03:21:40 -0400] jchauncey: just wing it =)
[2014-04-07 03:25:37 -0400] coderanger: Tempting, but I think I have too much to cover
[2014-04-07 03:25:47 -0400] coderanger: Still not sure how to do code samples for Chef stuff on a slide
[2014-04-07 03:25:53 -0400] coderanger: the code is always so long :-(
[2014-04-07 03:31:41 -0400] jchauncey: seth cant make up his mind on whether he wants to stay or leave
[2014-04-07 04:21:44 -0400] sarkis: so with the "berkshelf way", avoiding roles, how do i have different boxes provisioned different
[2014-04-07 04:22:05 -0400] sarkis: assuming im keeping cookbooks to an app, 1 app could have multiple boxes (app, db, etc)
[2014-04-07 04:22:25 -0400] double_p: sarkis: saw the chefconf talk of the berkshelf author?
[2014-04-07 04:22:34 -0400] sarkis: not all the wya yet
[2014-04-07 04:22:38 -0400] sarkis: ill finish that vid
[2014-04-07 04:23:00 -0400] sarkis: im coming from puppet so chef blows my mind a bit, most of the time in a good way
[2014-04-07 04:55:31 -0400] sarkis: double_p: you still here? just went through it, kind of confused by default.rb now
[2014-04-07 04:55:43 -0400] sarkis: https://github.com/misheska/myface/blob/master/recipes/default.rb
[2014-04-07 04:56:59 -0400] sarkis: wher would i actually tell chef, apply this cookbook on this host
[2014-04-07 04:59:16 -0400] jbz: sarkis: if you're using chef server or hosted chef, you'd change the runlist for that node to include "myface".  That would cause the chef-client, next time it runs on that node, to download the myface cookbook and run the default.rb recipe.
[2014-04-07 04:59:26 -0400] sarkis: oh sorry this is with chef-solo
[2014-04-07 04:59:30 -0400] jbz: ah.
[2014-04-07 04:59:42 -0400] sarkis: so i guess node still
[2014-04-07 05:00:00 -0400] jbz: so in chef-solo
[2014-04-07 05:00:34 -0400] jbz: you would give the node a runlist by passing a json file into chef-solo with -j, I believe.  But I don't use chef-solo (haven't in quite some time).
[2014-04-07 05:00:37 -0400] sarkis: got it.. so i have a node.json
[2014-04-07 05:00:45 -0400] sarkis: can throw it in the run_list there, instead of roles
[2014-04-07 05:00:47 -0400] sarkis: what i have now..
[2014-04-07 05:00:50 -0400] jbz: yep.
[2014-04-07 05:00:55 -0400] sarkis: easy.
[2014-04-07 05:00:59 -0400] sarkis: chef ftw.
[2014-04-07 05:01:02 -0400] sarkis: thanks jbz
[2014-04-07 05:01:08 -0400] jbz: yw
[2014-04-07 05:01:34 -0400] sarkis: took about 3weeks total, i think i have a good udnerstanding finally haha
[2014-04-07 05:01:46 -0400] sarkis: aha moment..
[2014-04-07 07:53:14 -0400] epcim: What cookbook to use for HTTPD serving static large files? I would rather see NGINX one..
[2014-04-07 08:55:02 -0400] gtfx: hi, is there a way to generate yard like documentation from chef role in json?
[2014-04-07 09:07:21 -0400] srenatus: gtfx: just a pointer: http://miketheman.github.io/knife-role-spaghetti/  when you're trying to clean up roles etc, this is a nice tool
[2014-04-07 09:18:14 -0400] double_p: srenatus: that's brilliant :>
[2014-04-07 13:02:58 -0400] gtfx: srenatus, this is great tool 10x. Now i want to connect this to yard output
[2014-04-07 13:03:20 -0400] kri5: Hi there
[2014-04-07 13:03:45 -0400] kri5: I ran into a problem using wordpress cookbook
[2014-04-07 13:03:58 -0400] kri5: i filled in an issue here https://github.com/brint/wordpress-cookbook/issues/29
[2014-04-07 13:07:32 -0400] kri5: if someone can take a quick look at this
[2014-04-07 14:01:10 -0400] Karlos_: hey hey
[2014-04-07 14:04:13 -0400] mattsmith: When using the package resource is it possible to specify "do not start this after install"?
[2014-04-07 14:06:49 -0400] Karlos_: Quick question, We have some databags that we were able to decrypt previously with chef client. For some unknown reason, it stopped working this morning. [Error decrypting data bag value: 'Bad Decrypt'. Most likely the provided key is incorrect.] Does anyone was ever confronted with this terrible issue? (I found nothing on google relevant sadly)
[2014-04-07 14:15:54 -0400] benlangfeld: Hi everyone. I'm having some trouble with writing a LWRP which has a nested resource which is supposed to notify another nested resource. The notification seems to fail, and I'm not sure why. Could anyone take a quick look for me? https://github.com/mojolingo/freeswitch-cookbook/pull/13
[2014-04-07 14:20:49 -0400] benlangfeld: Ah, looks like an execution order problem, I think I might have fixed it in https://github.com/mojolingo/freeswitch-cookbook/commit/604e1ec5b5af3a29e39b272c5a722e77dbf92898. Apologies for the noise.
[2014-04-07 14:49:33 -0400] double_p: mattsmith: :disabled for the corresponding service resource
[2014-04-07 14:50:21 -0400] mveitas: If I set a node attribute to something like this  node.set['foo'] = value_from_encrypted_data_bag, does that update the attribute on the chef-server with the value from the data bag or is it stay local and never make it up to the server
[2014-04-07 14:51:21 -0400] workmad3: mveitas: it'll be saved to the chef server
[2014-04-07 14:51:46 -0400] mveitas: that is what I thought, just wanted to make sure... kind of takes away from the point of using an encrypted data bag
[2014-04-07 14:51:58 -0400] workmad3: mveitas: the end of a chef run is a 'node.save' call that persists the node values as they are at that point
[2014-04-07 14:52:16 -0400] workmad3: mveitas: simple solution - don't set the values of encrypted data bags to node values ;)
[2014-04-07 14:52:22 -0400] double_p: just dont use .set?
[2014-04-07 14:52:32 -0400] workmad3: mveitas: or, if you do, clear them again afterwards
[2014-04-07 14:52:47 -0400] mveitas: I can just pass in the values to the template in a variable
[2014-04-07 14:54:00 -0400] workmad3: mveitas: that's what I do... I pass the values, unencrypted, along to the resource that needs it
[2014-04-07 14:56:36 -0400] Lukino_: hi all, anybody can help with issue stopping service, making some stuff and starting and do so other stuff ? ?   What if stop/start takes longer ?
[2014-04-07 14:57:23 -0400] michaelhart: I am writing a lwrp that does some stuff and generates a filename based on a hash. How do I return that filename back to the recipe? I see the attr_accessor can be added in the resource, but how do you implement that in the recipe?
[2014-04-07 14:59:35 -0400] workmad3: michaelhart: you've added a 'filename' attribute to the resource? and then set it in the action with 'new_resource.filename "new-value" '?
[2014-04-07 15:00:54 -0400] workmad3: michaelhart: if you've done both of those, then you can access the filename by calling 'filename' on the resource... but you need to be careful, as the filename won't be set until the action is run in the converge (which means you will probably need a lazy{ resource("my_resource[name]").filename} to pass the filename along)
[2014-04-07 15:01:49 -0400] michaelhart: workmad3 thank you, I will try that. Thats starting to make sense now.
[2014-04-07 15:02:55 -0400] mattt: michaelhart: THE michael hart?  :)
[2014-04-07 15:03:15 -0400] michaelhart: mattt: there can only be one
[2014-04-07 15:03:24 -0400] mattt: michaelhart: your tutorial is awesome, thanks for doing that
[2014-04-07 15:03:36 -0400] workmad3: is michaelhart == michael hartl? :)
[2014-04-07 15:03:57 -0400] michaelhart: mattt: then again, there may be more than one. I havent written a tutorial :)
[2014-04-07 15:04:01 -0400] Lukino_: How to make sure that command running after service[start] will not fail because service is still running ?
[2014-04-07 15:05:08 -0400] chris613: Lukino_: That won't be a problem if the service's initscript returns the currect exit code for the status command
[2014-04-07 15:06:02 -0400] Lukino_: #chris613 Well, then MySql service is returning wrong
[2014-04-07 15:07:22 -0400] chris613: Lukino_: That's quite possible, try it yourself.   /etc/init.d/mysql status; echo $?
[2014-04-07 15:08:53 -0400] chris613: If the status returns 0, that's a success, and then chef won't try to start it, and then won't fail to start it, and then won't fail the convergence
[2014-04-07 15:09:34 -0400] chris613: If your initscript is returning non-zero when the process IS actually running, then that will cause a service start resource to fail your run
[2014-04-07 15:10:22 -0400] Lukino_: @chris613 - I will check that. Definitelly there is something wrong. I trying workaround with overriding Retry and Retry_delay attributes
[2014-04-07 15:16:09 -0400] jeffcara_: does the remote directory resource allow you to download from a remote repository, or will it only pull from a cookbook directory?
[2014-04-07 15:19:54 -0400] Lukino_: @chris613 Do you know on which codes chef expects ?
[2014-04-07 15:20:46 -0400] gchristensen: an exit code of 0 is the only "success" code
[2014-04-07 15:20:48 -0400] Lukino_: @chris613 Sorry, just found your answer
[2014-04-07 15:43:39 -0400] karthi: i am new to chef
[2014-04-07 15:43:54 -0400] karthi: working with the starter kit
[2014-04-07 15:44:51 -0400] karthi: i am getting an error when i run vagrant up --no-colr command
[2014-04-07 15:44:56 -0400] karthi: $ vagrant up c:/Users/karthik/chef-repo/Vagrantfile:22:in `block in <top (required)>': undefi ned local variable or method `session_username' for main:Object (NameError)
[2014-04-07 15:45:17 -0400] karthi: i can get some help to resolve this issue
[2014-04-07 15:50:09 -0400] notromda: if I use node.set_unless  but the client run fails, doe sthat value not get saved to the chef server?
[2014-04-07 15:55:59 -0400] mjuszczak: coderanger: Now that I understand chef a lot more than I did a few months back, can you remind me of your position on databags, particularly encrypted databags for things like database users/passwords?
[2014-04-07 16:09:20 -0400] Er00: How would I use a role name on a node as part of an erb? For example I want to include a block in my nginx conf file if the role name is a specific thing
[2014-04-07 16:12:26 -0400] awc737: where do I put a .json file I want to be default?
[2014-04-07 16:12:32 -0400] awc737: for example : https://github.com/le0pard/chef-solo-example/tree/1.0
[2014-04-07 16:12:48 -0400] awc737: instead of nodes/hostname.json, is there a default.json file?
[2014-04-07 16:36:17 -0400] shlant1: anyone having issues uploading cookbooks since the change?
[2014-04-07 16:36:39 -0400] shlant1: It says it uploads with force but it's not updated
[2014-04-07 16:37:04 -0400] Er00: I had that the other day, I can't remember how I fixed it though :/
[2014-04-07 16:37:14 -0400] Er00: Iirc uploading all at once didn't work, but uploading individually did
[2014-04-07 16:37:23 -0400] Er00: but I did *something* that meant I could upload all
[2014-04-07 16:37:32 -0400] Er00: sorry I can';t be more helpful :/
[2014-04-07 16:37:44 -0400] shlant1: I'll try berks upload
[2014-04-07 16:41:05 -0400] shlant1: nata
[2014-04-07 16:41:23 -0400] awc737: knife solo cook root@hostname nodes/hostname.json <- this command asks me my password 50 times
[2014-04-07 16:41:44 -0400] awc737: how can I make it so remote server does not ask password? should I be using user@hostname? with ssh key installed?
[2014-04-07 16:57:25 -0400] double_p: anyone cooks zabbix-triggers? basically dont know where to start in this mess i just inherited :(
[2014-04-07 17:00:45 -0400] double_p: Er00: there might be more than one role (and it's node.roles ..)
[2014-04-07 17:01:10 -0400] Er00: mm, so how would I check if a role matches?
[2014-04-07 17:01:27 -0400] Er00: sorry, I'm really new to ruby stuff, I'm kinda trying to feel my way here, mostly getting by with google, but this has eluded me so far :/
[2014-04-07 17:01:28 -0400] double_p: if node.roles.include?("moorole")
[2014-04-07 17:01:57 -0400] double_p: Er00: most of us have been thru this (still on the middle of it, so maybe better way than above, but that "works for me")
[2014-04-07 17:02:08 -0400] Er00: ah, include? that's what I was missing!
[2014-04-07 17:02:09 -0400] Er00: Thanks! ^_^
[2014-04-07 17:02:44 -0400] double_p: roles of roles.. and on that coderanger rolls wild :)
[2014-04-07 17:03:58 -0400] Er00: hah, I had to get a friend to sit down and let me talk to him earlier while I talked him through how I was going to lay this stuff out because I confused myself so much getting in a tangle of roles and recipes and things \o/
[2014-04-07 17:04:06 -0400] Er00: I'm getting there though, and that worked great, thanks! :D
[2014-04-07 17:04:37 -0400] double_p: Er00: did you see the 'know enough ruby to be dangerous' talk on Opscode YT channel>
[2014-04-07 17:05:06 -0400] Er00: I didn't, but that sounds brilliant
[2014-04-07 17:05:17 -0400] Er00: I'm off home now but I've made a note to hunt it down tomorrow
[2014-04-07 17:05:24 -0400] Er00: I didn#t even know there was an Opscode YT channel
[2014-04-07 17:05:37 -0400] double_p: Er00: check it.. ~120 videos full of 'wisdom' :)
[2014-04-07 17:05:47 -0400] Er00: That's the rest of my week sorted then! ;D
[2014-04-07 17:05:55 -0400] double_p: given the viewnumbers not many actually skim thru there
[2014-04-07 17:06:02 -0400] double_p: Er00: ask my last sunday :}
[2014-04-07 17:21:43 -0400] estebistec: @coderanger could you use some help on supervisord, to get a release out with some of the completed fixes?
[2014-04-07 17:21:50 -0400] double_p: i think it was 16h of chefconf recordings
[2014-04-07 17:22:02 -0400] estebistec: err, *supervisor* cookbook, that is
[2014-04-07 17:22:06 -0400] estebistec: I always add the 'd' :P
[2014-04-07 17:22:40 -0400] double_p: estebistec: i was looking at supervisord today briefly.. not sure if i want to "go there"
[2014-04-07 17:23:12 -0400] estebistec: hmm... that one's slated for the scrap heap too?
[2014-04-07 17:23:35 -0400] double_p: say?
[2014-04-07 17:33:02 -0400] estebistec: double_p well, just seems like every "community" cookbook I approach and start asking questions about, I inevitably get comments like "stay away!"
[2014-04-07 17:34:07 -0400] double_p: estebistec: oh.. other way round for my comment. i would to hear something about supervisord - not the cookbook :)
[2014-04-07 17:34:48 -0400] coderanger: estebistec: My FOSSing is in on hold until after chefconf >_<
[2014-04-07 17:36:49 -0400] estebistec: coderanger that's cool. if there's any way I can help let me know. I've looking at a handful of cookbooks that would work for me if a fix on master was just released :P
[2014-04-07 17:36:51 -0400] estebistec: this being one of them
[2014-04-07 17:37:54 -0400] double_p: estebistec: i'm scared to death about upcoming systemd in centos7 and was asking about your experience with supervisor*d* :)
[2014-04-07 17:38:39 -0400] estebistec: ah, I see
[2014-04-07 17:38:52 -0400] estebistec: my experience is only up to rhel6.X so far
[2014-04-07 17:39:01 -0400] estebistec: is rhel/centos changing something big in 7?
[2014-04-07 17:39:35 -0400] double_p: estebistec: well, they will go to systemd (poetti-land)
[2014-04-07 17:40:45 -0400] estebistec: ... I can't wait
[2014-04-07 17:41:29 -0400] double_p: hm
[2014-04-07 17:42:30 -0400] double_p: sorry for somewhat OT, but what do you say pro systemd against these allegations: http://ewontfix.com/14/?
[2014-04-07 17:56:32 -0400] tubbo: i dunno
[2014-04-07 17:56:38 -0400] tubbo: launchd on mac os x is pretty neat actually
[2014-04-07 17:56:44 -0400] tubbo: and that's what systemd is based off it seems
[2014-04-07 17:57:11 -0400] tubbo: (might be the other way around...but i kinda do like the idea of 'init' and 'scheduling', as well as process management, all being part of the same service
[2014-04-07 17:57:13 -0400] tubbo: )
[2014-04-07 17:57:42 -0400] tubbo: but only because it's sometimes annoying to get all those services (cron, init, etc.) to play together...and there's no reason for it.
[2014-04-07 17:59:45 -0400] double_p: tubbo: in that land, i'd rather go for solaris SMF
[2014-04-07 18:00:41 -0400] segv: Is there a way to have a multi-argument resource in an lwrp?
[2014-04-07 18:00:49 -0400] tubbo: double_p: yeah but then you have to use Solaris :P
[2014-04-07 18:01:04 -0400] segv: like fake_object test, some_data
[2014-04-07 18:02:04 -0400] double_p: tubbo: yeah.. but please read http://ewontfix.com/14/ - that nails down a very basic problem
[2014-04-07 18:02:14 -0400] tubbo: double_p: i did
[2014-04-07 18:02:31 -0400] tubbo: double_p: my question is how many times have you ever upgraded your init system or cron?
[2014-04-07 18:02:36 -0400] tubbo: without upgrading the OS that is
[2014-04-07 18:04:07 -0400] tubbo: i know you can get into strange problems with it, but i rather like upstart scripts
[2014-04-07 18:04:16 -0400] tubbo: though it is a bit of a confusing syntax..
[2014-04-07 18:07:27 -0400] notromda: I have a rails rake task that needs to run once, but not on subsequent runs any idea how to check for idempotency?
[2014-04-07 18:08:09 -0400] notromda: I assume some kind of not_if   somesql data is present
[2014-04-07 18:10:20 -0400] double_p: tubbo: never.
[2014-04-07 18:11:11 -0400] double_p: tubbo: but then cron doesnt threaten my system to panic if it dies
[2014-04-07 18:11:27 -0400] tubbo: double_p: so the idea of "zomg i can't upgrade without a reboot" is a bullshit argument.
[2014-04-07 18:11:46 -0400] double_p: tubbo: the argument is :crash
[2014-04-07 18:11:47 -0400] tubbo: double_p: i don't think i've ever seen cron just "die"
[2014-04-07 18:12:05 -0400] double_p: tubbo: yeah? i did. but the system survived.
[2014-04-07 18:12:15 -0400] tubbo: haha
[2014-04-07 18:12:22 -0400] esmet_: hi guys - what's the precedence for json attributes passed with "--json-attributes" during bootstrap?
[2014-04-07 18:12:31 -0400] double_p: dying init? *brrr*
[2014-04-07 18:12:33 -0400] esmet_: it's not obvious from the documentation, or I missed it
[2014-04-07 18:13:00 -0400] double_p: anyway.. i try to get some sleep after. wat? 17h? i humppa the night away :)
[2014-04-07 18:14:24 -0400] tubbo: i'm just saying that on OS X, launchd is pretty nice.
[2014-04-07 18:37:42 -0400] lxsameer: hey guys , do i have to use Hosted Enterprise Chef account to use chef ?
[2014-04-07 18:39:25 -0400] CPS: you can use open source chef server
[2014-04-07 18:39:51 -0400] lxsameer: CPS: ah thanks
[2014-04-07 18:41:45 -0400] bean: or solo
[2014-04-07 18:41:46 -0400] bean: :)
[2014-04-07 18:42:37 -0400] lxsameer: I'm looking for good tutorial to learn chef , what do you suggest ?
[2014-04-07 18:43:43 -0400] troyready: lxsameer, https://learnchef.opscode.com/
[2014-04-07 18:44:10 -0400] lxsameer: thanks
[2014-04-07 18:44:24 -0400] troyready: And for starting, I'd recommend using Hosted Chef, which is free for up to 5 systems (nodes in Chef speak)
[2014-04-07 18:45:53 -0400] troyready: IMHO starting out w/ Chef can be pretty intimidating, especially if you're not a ruby-ist already, but the result is really satisfying
[2014-04-07 18:46:05 -0400] troyready: Look forward to your future questions here :)
[2014-04-07 19:06:09 -0400] allaire: When you pin a wrapper cookbook version to an env. Does it also pin all the dependencies cookbook version?
[2014-04-07 19:08:49 -0400] CPS: git question maybe someone knows about: http://stackoverflow.com/questions/22920931/how-do-i-set-up-a-git-repo-to-be-used-by-multiple-users
[2014-04-07 19:10:46 -0400] segv: is keiser in today?
[2014-04-07 19:13:13 -0400] mondo: if I have some code that needs to be used by multiple recipes within the same cookbook, where should I put it?  The code needs to make use of the Chef DSL just like a standalone recipe would
[2014-04-07 19:13:52 -0400] mondo: The issue being I may need to include the code more than once per chef-client run and so I can't do include_recipe
[2014-04-07 19:14:08 -0400] double_p: CPS: that's the problem. WAT?
[2014-04-07 19:14:12 -0400] bricker: So is most of the configuration for servers meant to be managed in the node's "attributes" JSON object?
[2014-04-07 19:14:32 -0400] CPS: double_p: ?
[2014-04-07 19:14:43 -0400] notromda: mondo - could you make the code with an action of :none, and then send a notify :immediately?
[2014-04-07 19:16:03 -0400] mondo: if you include_recipe the same recipe twice in the same chef-client run, it only runs it one
[2014-04-07 19:19:00 -0400] mondo: some googling implies I should use a Chef definition
[2014-04-07 19:22:33 -0400] bean: mondo: did you see what notromda said.
[2014-04-07 19:23:02 -0400] bean: just make a block with an action of :nothing
[2014-04-07 19:23:08 -0400] bean: and then notify it
[2014-04-07 19:23:24 -0400] double_p: get some humppa
[2014-04-07 19:30:26 -0400] awc737: knife solo cook user@hostname, asks my password 50 times
[2014-04-07 19:33:06 -0400] karthi: i got my issue resolved by hardcoing the session_username
[2014-04-07 19:33:28 -0400] karthi: i got through the bootstrap
[2014-04-07 19:33:41 -0400] karthi: quit
[2014-04-07 20:04:54 -0400] drocsid: I installed chef. I tried the reconfigure but got an error which unfortunatly I didn't paste. Chef will not stop, and I cannot kill it's processes.
[2014-04-07 20:04:57 -0400] drocsid: http://pastie.org/9001533
[2014-04-07 20:07:17 -0400] drocsid: chef just shit all over me :(
[2014-04-07 20:08:10 -0400] CPS: drocsid: sudo kill -9 pid
[2014-04-07 20:08:11 -0400] CPS: try that?
[2014-04-07 20:10:09 -0400] drocsid: CPS: yeah I've tried killing it's processes up left and right, they restart
[2014-04-07 20:10:47 -0400] drocsid: CPS: I was thinking about writing a script to try to kill its processes
[2014-04-07 20:11:05 -0400] drocsid: maybe you can tell me what to kill
[2014-04-07 20:11:23 -0400] CPS: chef-server-ctl stop
[2014-04-07 20:11:30 -0400] CPS: chef-server-ctl cleanse
[2014-04-07 20:11:41 -0400] CPS: kill any chef pids leftover after that
[2014-04-07 20:11:55 -0400] drocsid: http://pastie.org/9001558
[2014-04-07 20:11:56 -0400] CPS: then do a reconfigure
[2014-04-07 20:12:06 -0400] drocsid: Did you look at that last paste
[2014-04-07 20:12:13 -0400] drocsid: ?
[2014-04-07 20:12:25 -0400] drocsid: chef-server-ctl stop doesn't work
[2014-04-07 20:12:44 -0400] drocsid: look at http://pastie.org/9001533
[2014-04-07 20:14:54 -0400] drocsid: I keep getting /opt/chef-server/embedded/lib/ruby/gems/1.9.1/gems/omnibus-ctl-0.0.7/lib/omnibus-ctl.rb:253:in `block in run_sv_command': undefined method `success?' for nil:NilClass (NoMethodError)
[2014-04-07 20:15:09 -0400] drocsid: when I stry stop or cleanse
[2014-04-07 20:15:44 -0400] drocsid: chef really made a mess for me
[2014-04-07 20:15:55 -0400] CPS: sounds like your box is royally hosed
[2014-04-07 20:15:59 -0400] CPS: what version are you on?
[2014-04-07 20:15:59 -0400] segv: yeah
[2014-04-07 20:16:04 -0400] segv: I'm with CPS on that one
[2014-04-07 20:16:10 -0400] segv: something is botched on that host
[2014-04-07 20:17:54 -0400] drocsid: Everything was good before I installed chef. I just followed the instructions to install chef 11, ran reconfigure and now I have all this mess to clean up
[2014-04-07 20:18:20 -0400] segv: you shouldn't really have to do anything
[2014-04-07 20:18:24 -0400] segv: rpm install or deb install
[2014-04-07 20:18:38 -0400] segv: chef-server-ctl reconfigure, done
[2014-04-07 20:18:41 -0400] drocsid: thats what I did an rpm install
[2014-04-07 20:18:52 -0400] segv: those two steps
[2014-04-07 20:18:55 -0400] segv: are what you did?
[2014-04-07 20:19:03 -0400] segv: What version of centos/rhel?
[2014-04-07 20:19:07 -0400] drocsid: yeah unfortunatly the reconfigure didn't work and now everything is all f'kd up
[2014-04-07 20:19:15 -0400] segv: oh well in that case
[2014-04-07 20:19:21 -0400] drocsid: 5.10
[2014-04-07 20:19:26 -0400] segv: just rpm -e the install
[2014-04-07 20:19:33 -0400] segv: if there is any cruft left, purge it.
[2014-04-07 20:19:38 -0400] segv: Then reinstall the RPM and reconfigure
[2014-04-07 20:20:03 -0400] segv: Good news for you is its all self contained so the host isn't effected in the way other installs might
[2014-04-07 20:20:45 -0400] ponyofdeath: hi, i am getting Undefined node attribute or method 'log' on 'node'. i have this http://paste.ubuntu.com/7218707
[2014-04-07 20:21:14 -0400] segv: ponyofdeath that within the recipe?
[2014-04-07 20:22:12 -0400] segv: ponyofdeath you can simply do log("#{node[:platform_version]}") as well
[2014-04-07 20:22:19 -0400] segv: it defaults to :info I believe
[2014-04-07 20:23:20 -0400] ponyofdeath: let me try that
[2014-04-07 20:23:21 -0400] ponyofdeath: thanks
[2014-04-07 20:23:53 -0400] ponyofdeath: segv: same error
[2014-04-07 20:23:59 -0400] segv: hmmm
[2014-04-07 20:24:02 -0400] ponyofdeath: i guess chef-solo does not have this module
[2014-04-07 20:24:14 -0400] ponyofdeath: http://paste.ubuntu.com/7218727
[2014-04-07 20:24:16 -0400] ponyofdeath: inside vagrant
[2014-04-07 20:24:21 -0400] segv: it should
[2014-04-07 20:24:28 -0400] segv: but I believe vagrant logs a little differently
[2014-04-07 20:25:11 -0400] workmad3: ponyofdeath: you don't have access to resources inside attribute files
[2014-04-07 20:25:20 -0400] CPS: ponyofdeath: are you using the log chef resource?
[2014-04-07 20:25:22 -0400] workmad3: ponyofdeath: if you want to log from there, you need to use Chef::Log directly
[2014-04-07 20:25:27 -0400] CPS: or are you calling a function called log?
[2014-04-07 20:25:27 -0400] segv: ah yeah
[2014-04-07 20:25:39 -0400] drocsid: what is chef expander
[2014-04-07 20:25:42 -0400] segv: workmad3 makes sense, thought he was executing it from recipe
[2014-04-07 20:25:49 -0400] ponyofdeath: so i need to call Chef::Log
[2014-04-07 20:26:12 -0400] workmad3: segv: yeah, until he put the stack trace up, that's what I'd assumed too :)
[2014-04-07 20:26:14 -0400] drocsid: I kill all the chef processes and they keep coming back
[2014-04-07 20:26:19 -0400] segv: yeah
[2014-04-07 20:26:33 -0400] CPS: wouldn't it be log "stuff", not log("stuff")?
[2014-04-07 20:26:43 -0400] segv: CPS you can do it either way
[2014-04-07 20:26:55 -0400] CPS: i don't think i've ever seen that
[2014-04-07 20:27:13 -0400] workmad3: CPS: resource names are just ruby methods
[2014-04-07 20:27:16 -0400] workmad3: CPS: so either works
[2014-04-07 20:28:50 -0400] ponyofdeath: segv, CPS thanks Chef::Log worked. now that i know its value is really 12.04 any ideas why this is not working elseif node["platform_version"] =~ /12.04/
[2014-04-07 20:29:20 -0400] CPS: i think platform_version is a string
[2014-04-07 20:30:01 -0400] CPS: actually i don't know ruby well enough to weigh in on that :/
[2014-04-07 20:30:33 -0400] ponyofdeath: i tried node["platform_version"].to_f == 12.04 as well
[2014-04-07 20:30:34 -0400] ponyofdeath: no go
[2014-04-07 20:31:12 -0400] workmad3: ponyofdeath: direct comparison of floats is rarely a good idea :)
[2014-04-07 20:31:19 -0400] workmad3: and it's a string
[2014-04-07 20:31:32 -0400] CPS: i'm on windows but node["os_version"].include? "6.1" correctly identifies windows server 2008 vs 2003
[2014-04-07 20:31:40 -0400] workmad3: going by looking at it in chef-shell on one of my nodes :)
[2014-04-07 20:32:12 -0400] ponyofdeath: workmad3: so yeah if its a string this should work no? elseif node["platform_version"]  =~ /12.04/
[2014-04-07 20:32:22 -0400] workmad3: ponyofdeath: full code please
[2014-04-07 20:33:00 -0400] ponyofdeath: workmad3: http://paste.ubuntu.com/7218781
[2014-04-07 20:37:12 -0400] drocsid: chef is dangerous
[2014-04-07 20:37:24 -0400] workmad3: ponyofdeath: because it should be elsif, not elseif
[2014-04-07 20:37:36 -0400] segv: drocsid, only if you're fubaring with root/users :p
[2014-04-07 20:37:42 -0400] CPS: haha i've made that same mistake
[2014-04-07 20:37:54 -0400] CPS: freakin ruby with its dumb elsif crap
[2014-04-07 20:37:58 -0400] ponyofdeath: workmad3: ty!
[2014-04-07 20:37:59 -0400] workmad3: CPS: :)
[2014-04-07 20:38:04 -0400] drocsid: segv: ?
[2014-04-07 20:39:15 -0400] drocsid: so I hit the red button, and rebooted the machine. And all those chef processes reappeared... And it's eating all my memory, so I cannot rpm -e
[2014-04-07 20:39:56 -0400] drocsid: And all I did was follow the installation instructions: install the rpm and reconfigure
[2014-04-07 20:39:59 -0400] drocsid: :(
[2014-04-07 20:41:13 -0400] drocsid: I have 1500mb memory, it's not alot but chef says it needs 512, and most of my memory was free before chef came and shit on me
[2014-04-07 20:47:24 -0400] drocsid: If I configured chef, I would understand... But this is just install out of package and follow the directions and reconfigure, and it shits all over you ... terrible
[2014-04-07 20:49:56 -0400] CPS: drocsid: what OS are you on?
[2014-04-07 20:50:00 -0400] drocsid: So how do I remove this chef team?
[2014-04-07 20:50:11 -0400] drocsid: centOS 5.10
[2014-04-07 20:50:11 -0400] CPS: i can't help you in all likelihood, just morbidly curious
[2014-04-07 20:52:22 -0400] drocsid: I have to laugh a little... chef just totally pwned me.. and the chef team is silent
[2014-04-07 20:52:30 -0400] Nukepuppy: ?
[2014-04-07 20:52:35 -0400] Nukepuppy: i dont really get your scenario
[2014-04-07 20:52:44 -0400] Nukepuppy: is it the chef server or chef node that keeps 'coming back' ?
[2014-04-07 20:52:59 -0400] drocsid: hold on let's make it clear
[2014-04-07 20:53:48 -0400] drocsid: http://pastie.org/9001651
[2014-04-07 20:54:52 -0400] jbz: drocsid: so uh
[2014-04-07 20:55:01 -0400] jbz: for the hosted chef deployment, which afaict is what you installed
[2014-04-07 20:55:09 -0400] jbz: opscode's docs specify 4GB of RAM for the server:
[2014-04-07 20:55:09 -0400] jbz: http://docs.opscode.com/chef_system_requirements.html
[2014-04-07 20:55:43 -0400] drocsid: hmm
[2014-04-07 20:56:07 -0400] drocsid: I read that 512 from the chef website
[2014-04-07 20:56:16 -0400] jbz: Specifically: http://docs.opscode.com/chef_system_requirements.html#open-source-chef-server
[2014-04-07 20:56:53 -0400] D0rian: drocsid: its for chef-client
[2014-04-07 20:57:01 -0400] segv: drocsid yeah chef-client is 512
[2014-04-07 20:57:15 -0400] D0rian: on your nodes attached to your chef-server
[2014-04-07 20:57:31 -0400] drocsid: well i have an idea for the chef team, how about they check for that before allowing install
[2014-04-07 20:57:53 -0400] notromda: boot into single user mode to remove it?
[2014-04-07 20:57:55 -0400] segv: drocsid cause it says in the readme?
[2014-04-07 20:58:13 -0400] segv: drocsid all those processes keep coming back because of runit btw
[2014-04-07 20:58:30 -0400] segv: runit keeps that runsvdir in the background and restarts apps automagically
[2014-04-07 20:58:30 -0400] drocsid: warning: chef will trash your box since you don't have enough memory
[2014-04-07 20:58:47 -0400] drocsid: idk what runit is
[2014-04-07 20:59:06 -0400] drocsid: can i stopit?
[2014-04-07 20:59:09 -0400] segv: yes.
[2014-04-07 20:59:17 -0400] segv: if you cd into the app dirs you can manually stop them all
[2014-04-07 21:00:04 -0400] robawt: runit is a process managing tool
[2014-04-07 21:00:37 -0400] segv: and we all love runit, am I right?
[2014-04-07 21:00:40 -0400] drocsid: how about runit itself, can i stop runit so it won't respawn the processes, and then just kill them individually?
[2014-04-07 21:01:26 -0400] segv: you can do anything you want to, literally.
[2014-04-07 21:01:39 -0400] drocsid: lol
[2014-04-07 21:01:42 -0400] Nukepuppy: what os are you even on?
[2014-04-07 21:02:18 -0400] drocsid: centOS 5.10
[2014-04-07 21:02:30 -0400] Nukepuppy: and you did an rpm -e on the chef-server?
[2014-04-07 21:03:10 -0400] drocsid: I can't because the respawning processes are eating all my memory
[2014-04-07 21:04:18 -0400] Nukepuppy: do you so like 'chef-server-ctl  kill' doesnt work either?
[2014-04-07 21:04:21 -0400] drocsid: I was actually thinking about writing a ruby script to take all the processes with chef in the title and continually killing them, maybe I'd run it every second or two
[2014-04-07 21:04:24 -0400] Nukepuppy: i saw the stop it is what it is
[2014-04-07 21:04:28 -0400] drocsid: No we went over that already
[2014-04-07 21:04:35 -0400] Nukepuppy: kill ?
[2014-04-07 21:04:36 -0400] Nukepuppy: i saw a stop
[2014-04-07 21:04:42 -0400] drocsid: yeah they respawn
[2014-04-07 21:05:05 -0400] drocsid: I rebooted the server, and they are spawning
[2014-04-07 21:05:34 -0400] Nukepuppy: well i figured you would like kill && rpm -e chef-server
[2014-04-07 21:05:36 -0400] Nukepuppy: or something
[2014-04-07 21:06:47 -0400] slillibri: drocsid: Deleting the symlinks from /opt/chef-server/service/ should keep them from restarting.
[2014-04-07 21:06:51 -0400] Nukepuppy: anywho theres plenty of options
[2014-04-07 21:07:55 -0400] drocsid: segv: can you give an example of how to manually stop one of those apps like you said above, I don't follow
[2014-04-07 21:09:47 -0400] drocsid: isn't there an init script or service I can use to tell chef to not start on boot
[2014-04-07 21:09:48 -0400] drocsid: ?
[2014-04-07 21:13:06 -0400] notromda: What slillibri said
[2014-04-07 21:13:38 -0400] drocsid: slillibri: thanks, i will try that
[2014-04-07 21:14:16 -0400] notromda: I have a script that is failling, I finally see it's trying to write to /root/.npm  while running as a user I'm guessing that it has $HOME set wrong?
[2014-04-07 21:14:42 -0400] notromda: why can't the bash resource run as a login env.
[2014-04-07 21:17:15 -0400] drywheat: is there a one liner to get a node's IP address from knife-ec2 ?
[2014-04-07 21:18:31 -0400] drocsid: slillibri: thank you so much!
[2014-04-07 21:18:31 -0400] jbz: drywheat:
[2014-04-07 21:18:49 -0400] doomviking: pipe to awk :)
[2014-04-07 21:19:31 -0400] jbz: drywheat: knife search node "ec2:<instance_id>" -a ipaddress
[2014-04-07 21:19:35 -0400] jbz: should work?
[2014-04-07 21:26:42 -0400] drywheat: jbz: thanks, i was actually piping to awk because i used the 'cloud.public_ipv4' attr
[2014-04-07 21:27:08 -0400] drywheat: also, you could use a `knife node show <name> -a ipaddress' if you know the specific instance you want
[2014-04-07 21:28:15 -0400] drywheat: bahhhh
[2014-04-07 21:28:19 -0400] drywheat: actually
[2014-04-07 21:28:37 -0400] drywheat: it only provides the private IP
[2014-04-07 21:28:39 -0400] drywheat: no bueno
[2014-04-07 21:31:55 -0400] doomviking: knife ec2 server list | grep $nodename | awk '{print $3}'
[2014-04-07 21:32:30 -0400] drywheat: bash func:
[2014-04-07 21:32:31 -0400] drywheat: function knife-ip {
[2014-04-07 21:32:31 -0400] drywheat:   knife node show $1 -a cloud.public_ipv4 -F text \
[2014-04-07 21:32:32 -0400] drywheat:     | awk '/public_ipv4/ {print $2}'
[2014-04-07 21:32:32 -0400] drywheat: }
[2014-04-07 21:35:44 -0400] armendonigian: gem_package "capistrano" do
[2014-04-07 21:35:45 -0400] armendonigian:   gem_binary("/opt/ruby/default/bin/gem")
[2014-04-07 21:35:46 -0400] armendonigian:   action :install
[2014-04-07 21:35:47 -0400] armendonigian: end
[2014-04-07 21:35:48 -0400] armendonigian: gem_package[capistrano] action install (up to date)
[2014-04-07 21:36:10 -0400] armendonigian: yet i dont see  cap in /opt/ruby/default/bin
[2014-04-07 21:37:10 -0400] armendonigian: im puzzeled why resource would say its up to update but not install the capistrano gem?
[2014-04-07 21:38:07 -0400] tcate: what distro is that server running?
[2014-04-07 21:38:34 -0400] armendonigian: ubuntu
[2014-04-07 21:38:45 -0400] tcate: it's probably in /usr/lib/ruby/gems then
[2014-04-07 21:39:30 -0400] armendonigian: but im specifying the path gem_binary("/opt/ruby/default/bin/gem") in the resource
[2014-04-07 21:40:25 -0400] tcate: hhmmm you are
[2014-04-07 21:42:51 -0400] jbz: Can anyone give me a hint on how to use knife ssh with a remote ssh proxy?
[2014-04-07 21:43:03 -0400] jbz: --gateway doesn't seem to do what I expect
[2014-04-07 23:11:20 -0400] awc737: how can I make knife solo cook not ask for my password a million times
[2014-04-07 23:48:59 -0400] drywheat: i want to configure newrelic when deploying my app with chef
[2014-04-07 23:49:22 -0400] drywheat: i want to depend on that community ckbk and then leverage it inside my deployment ckbk
[2014-04-07 23:49:37 -0400] drywheat: does that seem at all intertangled?

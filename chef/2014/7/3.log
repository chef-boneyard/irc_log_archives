[2014-07-03 00:01:05 -0400] inigo88: spheromak: oh..
[2014-07-03 00:01:09 -0400] inigo88: you're right
[2014-07-03 00:01:25 -0400] inigo88: thanks! lol
[2014-07-03 00:01:32 -0400] spheromak: np
[2014-07-03 00:05:23 -0400] jtimberman: lyken: inigo88: if you use chefdk's ruby for your ruby env you can use the 'gem' binary it provides directly. it should install gems in `~/.chefdk/gems/`
[2014-07-03 00:05:33 -0400] jtimberman: er, s/gems/gem/
[2014-07-03 00:12:07 -0400] diegows: if there a way to specify the roles that I want to apply using chef-client local mode?
[2014-07-03 00:13:28 -0400] spheromak: diegows: use -r
[2014-07-03 00:13:45 -0400] spheromak: diegows: or -o   both documented
[2014-07-03 00:18:45 -0400] diegows: spheromak, both are looking for cookbooks
[2014-07-03 00:18:55 -0400] diegows: I want to use roles
[2014-07-03 00:22:42 -0400] spheromak: oh you want roles in -z mode
[2014-07-03 00:22:50 -0400] spheromak: you can specify it with the config you pass to -z
[2014-07-03 00:24:50 -0400] spheromak: diegows: the runlist you just spec like you would for any node -r 'role[something],role[another]
[2014-07-03 00:25:11 -0400] diegows: oh, good point :)
[2014-07-03 00:25:13 -0400] spheromak: but the chef-zero instance needs to know where to load roles from which you specify in the config you pass via  chef-client -c
[2014-07-03 00:26:05 -0400] diegows: yes, that's work.. ok let's try
[2014-07-03 00:26:20 -0400] spheromak: its  role_path in your config
[2014-07-03 00:26:36 -0400] spheromak: which should point to json roles
[2014-07-03 00:46:36 -0400] spheromak: bawt snack :P
[2014-07-03 00:59:56 -0400] zetan: question: psotgresql recipe wants me to override attribs like so "node[:postgresql][:pg_hba] = { :addr => '' , :user => 'all', :type => 'local', :method => 'trust', :db => 'all' }"  - but when I put that in postgres/attributes/default.rb it complains about unable to override node attributes. where do I stick those overrides?
[2014-07-03 01:17:04 -0400] tomduffield: zetan: in your attributes file, are you using node or are you using a precedence level (default, normal, override, set)?
[2014-07-03 02:14:29 -0400] diegows: this should be a FAQ, but google didn't find the answer
[2014-07-03 02:14:40 -0400] diegows: why the relatives paths are taken like absolute paths
[2014-07-03 02:15:01 -0400] diegows: ?
[2014-07-03 02:17:05 -0400] tomduffield: diegows: i'm not quite following your question.
[2014-07-03 02:17:26 -0400] diegows: for example
[2014-07-03 02:17:30 -0400] diegows: node_path "nodes"
[2014-07-03 02:17:36 -0400] diegows: that's a relative path
[2014-07-03 02:17:49 -0400] diegows: but looking with strace, chef-solo is trying to open /nodes
[2014-07-03 02:18:08 -0400] diegows: and I think chef-client in local mode is doing the same
[2014-07-03 02:18:46 -0400] diegows: this ugly workaround works
[2014-07-03 02:18:49 -0400] diegows: pwd = Dir.getwd + "/"
[2014-07-03 02:18:53 -0400] diegows: node_path        pwd + "nodes"
[2014-07-03 02:19:12 -0400] tomduffield: what is the cwd of your chef-solo run?
[2014-07-03 02:19:46 -0400] diegows: here
[2014-07-03 02:19:48 -0400] diegows: ls -d nodes cookbooks/ site-cookbooks/
[2014-07-03 02:19:49 -0400] diegows: cookbooks/  nodes  site-cookbooks/
[2014-07-03 02:20:06 -0400] diegows: and my workaround works.... so the directory is in the cwd
[2014-07-03 02:21:28 -0400] tomduffield: so i actually think you can get away with not specifying the nodes path. by default, chef local-mode will look for the nodes directory in cookbooks_path/../nodes
[2014-07-03 02:21:53 -0400] tomduffield: so if chef local-mode can find your cookbooks, then it should be able to find your nodes as long as the nodes directory is in the same folder
[2014-07-03 02:22:15 -0400] diegows: I have the same issue with cookbooks
[2014-07-03 02:22:19 -0400] diegows: nodes what just an example
[2014-07-03 02:22:20 -0400] diegows: :)
[2014-07-03 02:22:41 -0400] diegows: is cookbooks or cookbooks_path the default?
[2014-07-03 02:23:02 -0400] tomduffield: cookbooks_path is the variable name
[2014-07-03 02:23:09 -0400] tomduffield: (i think)
[2014-07-03 02:23:59 -0400] tomduffield: what happens if you do "./nodes" ?
[2014-07-03 02:24:18 -0400] tomduffield: also, are you running chef-client as sudo?
[2014-07-03 02:25:26 -0400] diegows: I'm root
[2014-07-03 02:25:36 -0400] diegows: and I've tried with ./
[2014-07-03 02:25:39 -0400] diegows: same effect
[2014-07-03 02:25:53 -0400] diegows: strace shows open("/./nodes", .... )
[2014-07-03 02:26:11 -0400] diegows: bug report? :P
[2014-07-03 02:28:06 -0400] tomduffield: can I see your client.rb?
[2014-07-03 02:29:35 -0400] diegows: cookbook_path    [ "cookbooks", pwd + "site-cookbooks"]
[2014-07-03 02:29:35 -0400] diegows: node_path        "nodes"
[2014-07-03 02:29:36 -0400] diegows: role_path        "roles"
[2014-07-03 02:29:36 -0400] diegows: environment_path "environments"
[2014-07-03 02:29:36 -0400] diegows: data_bag_path    "data_bags"
[2014-07-03 02:29:38 -0400] diegows: only that
[2014-07-03 02:30:03 -0400] diegows: oh, the original one doesn't have the pwd + before "site-cookbooks"
[2014-07-03 02:30:46 -0400] tomduffield: okay, so I know that chef doesn't really like relative paths. if you specify the fully-qualified paths for cookbook_path you dont need anything else
[2014-07-03 02:31:10 -0400] diegows: I know, but that won't make my repo portable :)
[2014-07-03 02:31:18 -0400] diegows: so, I left my workaround there
[2014-07-03 02:31:30 -0400] diegows: I'll open an issue to see what feedback I get
[2014-07-03 04:42:42 -0400] denis: Hi, I am new to Chef Cookbook language. I am trying to realize what is meant by the following construct.
[2014-07-03 04:43:10 -0400] denis: variables(       :host =>     (deploy[:database][:host] rescue nil),       :user =>     (deploy[:database][:username] rescue nil),       :password => (deploy[:database][:password] rescue nil),       :db =>       (deploy[:database][:database] rescue nil),       :table =>    (node[:phpapp][:dbtable] rescue nil)     )
[2014-07-03 04:43:19 -0400] denis: in https://github.com/amazonwebservices/opsworks-example-cookbooks/blob/master/phpapp/recipes/appsetup.rb
[2014-07-03 04:43:48 -0400] denis: do you know what is meant by "=>" operator heere?
[2014-07-03 05:31:58 -0400] spheromak: denis: thats ruby hash syntax
[2014-07-03 05:32:14 -0400] spheromak: denis: http://docs.opscode.com/just_enough_ruby_for_chef.html
[2014-07-03 05:37:48 -0400] denis: spheromak: are hashes defined within curly braces? like
[2014-07-03 05:37:49 -0400] denis: h = { "first_name" => "Bob", "last_name"  => "Jones" }
[2014-07-03 05:38:21 -0400] jtimberman: denis: yes
[2014-07-03 05:38:32 -0400] denis: spheromak: here https://github.com/amazonwebservices/opsworks-example-cookbooks/blob/master/phpapp/recipes/appsetup.rb they have use normal braces
[2014-07-03 05:38:33 -0400] jtimberman: they're implied w/ variables() tho
[2014-07-03 05:38:50 -0400] denis: ok  thanks jtimberman
[2014-07-03 05:40:06 -0400] Guest60953: Hi
[2014-07-03 05:40:17 -0400] Guest60953: does anyone know if 'knife diff' be told to ignore binary files ?
[2014-07-03 05:41:11 -0400] Guest60953: some of our cookbooks contain binary files, making knife diff explode when run against a cookbook with modified binary files.
[2014-07-03 05:41:32 -0400] denis: jtimberman: Do you know what is meant by "deploy" in "deploy[:database][:host]" . Where is this "deploy" is defined? I could not find it within https://github.com/amazonwebservices/opsworks-example-cookbooks/tree/master/phpapp
[2014-07-03 05:42:36 -0400] jtimberman: denis: https://github.com/amazonwebservices/opsworks-example-cookbooks/blob/master/phpapp/recipes/appsetup.rb#L1
[2014-07-03 05:43:06 -0400] jtimberman: denis: node[:deploy] is an attribute.
[2014-07-03 05:43:21 -0400] jtimberman: i don't use that cookbook so i'm not sure where it would come from, presumably from the opsworks automagic
[2014-07-03 05:45:49 -0400] jtimberman: denis: in chef, node attributes are a Hashlike data structure, they aren't hashes (they're Node Attributes), but they behave like them. things like this tutorial are helpful: http://www.tutorialspoint.com/ruby/ruby_hashes.htm
[2014-07-03 06:14:36 -0400] denis: jtimberman: thanks. Can we expose those node attributes to other nodes (eg- exposing access credentials to MySQL DB from MySQL node to PHP node)
[2014-07-03 06:16:43 -0400] n1ko: put the attributes in a databag/environment
[2014-07-03 06:16:54 -0400] n1ko: if its credentials, use encrypted data bags
[2014-07-03 06:17:03 -0400] n1ko: plaintext creds are just wrong
[2014-07-03 06:18:34 -0400] denis: n1ko: thanks
[2014-07-03 07:17:11 -0400] chefgirl: how can i set up git on windows ??
[2014-07-03 07:25:53 -0400] ignatz: start here http://git-scm.com/downloads
[2014-07-03 08:05:33 -0400] joelmoss: can anyone help me please? getting this error on chef run...
[2014-07-03 08:05:34 -0400] joelmoss: ERROR: SSL Validation failure connecting to host: api.opscode.com - SSL_connect SYSCALL returned=5 errno=0 state=SSLv2/v3 read server hello A
[2014-07-03 08:05:54 -0400] joelmoss: yet `knife ssl check -c /etc/chef/client.rb` passes fine
[2014-07-03 08:51:06 -0400] chefgirl: can anyone give me a pointer to install GIT on windows
[2014-07-03 08:51:08 -0400] chefgirl: ???
[2014-07-03 08:57:22 -0400] chefgirl: can anyone give me a pointer to install GIT on windows ???
[2014-07-03 08:58:08 -0400] n1ko: chefgirl: http://bit.ly/1vzX61K
[2014-07-03 08:58:12 -0400] n1ko: this probably helps you out
[2014-07-03 08:59:11 -0400] chefgirl: <n1ko > http://git-scm.com/download/win is this link ?
[2014-07-03 09:51:36 -0400] Cope: chefgirl: first hit on google: https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CCIQFjAA&url=http%3A%2F%2Fgit-scm.com%2Fbook%2Fen%2FGetting-Started-Installing-Git&ei=iye1U_3DJIj6PMjWgPgJ&usg=AFQjCNHDjL3cn-bjQUd_TeSMEskP_WD4MQ&sig2=2H1HZnMWD1ZPVosGVLCmtg&bvm=bv.70138588,d.ZWU
[2014-07-03 09:51:47 -0400] Cope: or rather
[2014-07-03 09:52:19 -0400] Cope: http://bit.ly/1mb1MtO
[2014-07-03 09:52:28 -0400] Cope: ^^ that should help
[2014-07-03 09:52:50 -0400] Cope: n1ko: aha... you had the same advice
[2014-07-03 09:52:54 -0400] Cope: sorry!
[2014-07-03 10:01:20 -0400] matti: Ohai Cope
[2014-07-03 10:07:19 -0400] cloudbug_: can anyonehelp me learn git
[2014-07-03 10:16:20 -0400] chefgirl:  GIT GIT GIT
[2014-07-03 10:18:59 -0400] Cope: hey matti
[2014-07-03 10:25:35 -0400] Cope: cloudbug_: there are lots of good tutorials online; try one - if you get stuck, ask a specific question... you may get help here, if not the git channel is busy and responsive, if you can show you've made an effort.
[2014-07-03 10:35:58 -0400] legal90: Ohai, chefs! I'm looking for a way to hide secure data in the 'execute' resource output. In my case there is a plaintext password as a command argument and I don't want it displayed in the chef-client log output.
[2014-07-03 10:36:13 -0400] legal90: Does anybody know any solutions?
[2014-07-03 10:41:43 -0400] workmad3: legal90: you could execute the command as '<whatever> $PASSWORD' and pass the password in with the environment variables hash
[2014-07-03 10:42:01 -0400] workmad3: legal90: but I don't know of a way to suppress the logging from a specific resource :(
[2014-07-03 10:43:26 -0400] legal90: hmm thanks, but I suggest that this env variable will be saved in the log output anyway.
[2014-07-03 10:43:37 -0400] legal90: So, I will try this way
[2014-07-03 10:47:46 -0400] siXy: just make the log only readable by root.
[2014-07-03 12:09:22 -0400] someara: cloudbug_ http://git-scm.com/book
[2014-07-03 12:20:38 -0400] whiteadam: cloudbug_: I've read that book. It's VERY thorough.
[2014-07-03 12:25:37 -0400] quantumfoam: happy pseudo-friday
[2014-07-03 12:26:38 -0400] whiteadam: quantumfoam: right?
[2014-07-03 12:26:50 -0400] whiteadam: everyone at my work is basically off, so I'm not gonna do shit
[2014-07-03 12:27:36 -0400] whiteadam: I've got some guy freaking out because a load balancer is load balacing his traffic. I don't guess he knew what a load balancer was when he set it up...
[2014-07-03 12:28:51 -0400] quantumfoam: my boss is off but there's plenty of other people here
[2014-07-03 12:29:07 -0400] quantumfoam: took me half the normal time to get here this morning due to light traffic
[2014-07-03 12:29:15 -0400] whiteadam: mine is out, but the one annoying guy is here. So all of his powers are focused on me.
[2014-07-03 12:29:18 -0400] quantumfoam: appliance?
[2014-07-03 12:29:25 -0400] whiteadam: ELB on AWS
[2014-07-03 12:29:33 -0400] quantumfoam: ah, nice
[2014-07-03 12:29:42 -0400] quantumfoam: we have a couple of those but they're not in production yet
[2014-07-03 12:29:50 -0400] whiteadam: I like em.
[2014-07-03 12:30:09 -0400] whiteadam: We use proprietary software, so they don't work as good as they could.
[2014-07-03 12:31:04 -0400] whiteadam: and by proprietary, I mean IBM
[2014-07-03 12:31:05 -0400] whiteadam: :)
[2014-07-03 12:42:51 -0400] jonlives: yeah ELB is nice
[2014-07-03 12:44:09 -0400] whiteadam: Yeah, their breadth of services is what makes them great. Every time some talking head tries to get us to use another "cloud" it's just not worth it.
[2014-07-03 12:45:46 -0400] rsavage_: the AWS-SDK ruby gem is nice.  I wrote my own Chef cookbbook for it, still limited but it does what I need it to do.  Like having my nodes auto-register with ELBs, etc.
[2014-07-03 12:47:20 -0400] jonlives: the main issue I have with AWS every time I use it (we're predominantly bare metal) is when I hit an edge case or an undocumented "feature" and can't go figure it out for myself
[2014-07-03 12:49:50 -0400] whiteadam: jonlives: yep, my main issue too. For a long time, it was simple logging, which they've corrected now.
[2014-07-03 12:50:03 -0400] whiteadam: Would really like a little more transparency into their infra.
[2014-07-03 13:09:28 -0400] Yvan_: Question: Is there a way to prevent any output of the rendered template to the console when using chef-client "template"
[2014-07-03 13:15:18 -0400] TotalEvil: hi2all
[2014-07-03 13:15:40 -0400] TotalEvil: can someone help me with) detecting internal interface address
[2014-07-03 13:23:42 -0400] zaargy: Yvan_: rendered templates aren't output to console? can you calrify what you mean?
[2014-07-03 13:25:11 -0400] zaargy: TotalEvil: there are few things that might work depending on your use case. is it always the same the interface with the private ip? then you could use ohai network/interfaces/eth{0,1}/address
[2014-07-03 13:25:20 -0400] zaargy: or you could use ohai ipaddress
[2014-07-03 13:25:38 -0400] zaargy: or even this ohai public to detect what is a private ip: https://github.com/wanelo-chef/ohai-private-ipaddress
[2014-07-03 13:25:44 -0400] TotalEvil: my problem is next
[2014-07-03 13:25:54 -0400] zaargy: or you could just grep the interfaces attribute above
[2014-07-03 13:26:02 -0400] TotalEvil: i can have or eth0 interface for local ip
[2014-07-03 13:26:15 -0400] zaargy: s/ohai public/ohai plugin/
[2014-07-03 13:26:21 -0400] TotalEvil: or bond0 interface with local ip but eth0 will be also present but without i[
[2014-07-03 13:27:12 -0400] zaargy: so maybe you might be better trying a series of ifs and how to work out the right address - that way you're documenting you setup in the cookbook too
[2014-07-03 13:28:48 -0400] TotalEvil: mb can you show little more extended example?
[2014-07-03 13:29:01 -0400] TotalEvil: i have tried something like detect eth0 or bond0
[2014-07-03 13:29:05 -0400] TotalEvil: but seems not working
[2014-07-03 13:46:12 -0400] whiteadam: TotalEvil: You just want to know the IP address?
[2014-07-03 14:01:02 -0400] TotalEvil: yeap
[2014-07-03 14:01:08 -0400] TotalEvil: sorry for late answer
[2014-07-03 14:01:18 -0400] TotalEvil: i need set it in command
[2014-07-03 14:01:41 -0400] whiteadam: try this and tell me if it gives the proper IP: ohai ipaddress
[2014-07-03 14:07:29 -0400] TotalEvil: it gives external ip which i can take without problems
[2014-07-03 14:17:04 -0400] gyre007: can someone tell me for goodness sake why isn't Chef tagging my servers ? http://pastebin.com/UNnyayzY
[2014-07-03 14:17:40 -0400] gyre007: I check this out in Web UI after the full chef-client run finishes without any error and I can't see any tags....
[2014-07-03 14:18:06 -0400] TotalEvil: check with ohai
[2014-07-03 14:18:25 -0400] TotalEvil: run chef-client again and watch if there any ohai attributes arrange?
[2014-07-03 14:19:09 -0400] gyre007: ?
[2014-07-03 14:20:45 -0400] BryanWB: will a powershell_script exit immediately as soon as it encounters an error?
[2014-07-03 14:21:01 -0400] BryanWB: or will it continue process commands?
[2014-07-03 14:21:06 -0400] gchristensen: that probably depends on the behaviour of what powershell would normally do. in bash, you would have to do set -e to make it exit
[2014-07-03 14:34:34 -0400] RustemS: I'm trying to configure haproxy with chef and running into problem where I can't have 2 ACL's define - http://fpaste.org/115330/raw/
[2014-07-03 14:34:56 -0400] jklare: hi, any1 knows if there is a nice way of getting all the template file names including their path from a cookbook?
[2014-07-03 14:35:33 -0400] alexbst: RustemS - make the acl param a list with square brackets.
[2014-07-03 14:35:35 -0400] gyre007: BryanWB: that depends....from my experience you can handle the errors using something like what-if or some other perversity...but it can also crash
[2014-07-03 14:35:51 -0400] alexbst: and then run through each list entry in the template file.
[2014-07-03 14:35:56 -0400] gyre007: in other words...I often toss a coin and pray....
[2014-07-03 14:37:07 -0400] gyre007: somehow, tagging the node from within recipes is just not tagging the nodes in my case...I can run chef-client like there is no tomorrow...but Chef no like tags any more ?
[2014-07-03 14:37:10 -0400] gyre007: rrr
[2014-07-03 14:37:19 -0400] BryanWB: gyre007: wasn't aware of whatif, will look at that, is it a powershell feature or part of powershell_script resource
[2014-07-03 14:38:58 -0400] gyre007: BryanWB: it's a testing feature of powershell afaik...
[2014-07-03 14:39:33 -0400] gyre007: I'm not sure if powershell_script uses it...but it would be nice if whatif was used in whyrun mode...
[2014-07-03 14:39:39 -0400] gyre007: quite suitable imho...
[2014-07-03 14:39:46 -0400] gyre007: but its a powershell thingy...
[2014-07-03 14:40:40 -0400] RustemS: alexbst: You mean 'acl' => ['rootdomain path_reg ^$|^/$','apiui path_beg /apui/'],
[2014-07-03 14:41:25 -0400] xhocquet: Hey I have a question, I'm running through the Linux setup tutorial and I can't seem to download the Starter Kit from Chef Manage
[2014-07-03 14:41:34 -0400] xhocquet: Throws a 400 error
[2014-07-03 14:41:44 -0400] gyre007: BryanWB: this is actually you might be after...ErrorAction -> http://blogs.msdn.com/b/powershell/archive/2006/11/03/erroraction-and-errorvariable.aspx
[2014-07-03 14:42:14 -0400] connor557: Hello
[2014-07-03 14:42:52 -0400] connor557: Can somebody help me?
[2014-07-03 14:43:05 -0400] crnkyadmin: hello all. I'm trying to use the chef git resource and it dies if I use "checkout_branch" and ignores "revision"
[2014-07-03 14:43:48 -0400] connor557: Is there a native Ubuntu LTS package for chef enterprise workstation?
[2014-07-03 14:44:23 -0400] mc_fail: hi guys.
[2014-07-03 14:44:49 -0400] mc_fail: does anybody knows, why i trying to use split like a '20.3.1-0fc16'.split('-')[0].split['.'] and get a error?
[2014-07-03 14:44:56 -0400] mc_fail: message: can't convert String into Integer
[2014-07-03 14:45:06 -0400] gyre007: connor557: what are you after ?
[2014-07-03 14:45:25 -0400] gyre007: connor557: have a look at ChefDK if you want to set up Workstation...that would be my best advice
[2014-07-03 14:45:36 -0400] connor557: Using a deicated server for my chef ent workstation.
[2014-07-03 14:46:23 -0400] gyre007: what is a chef enterprise workstation ?
[2014-07-03 14:46:28 -0400] gyre007: Chef enterprise server ?
[2014-07-03 14:46:32 -0400] gyre007: workstation is a client right ?
[2014-07-03 14:46:33 -0400] connor557: admin node
[2014-07-03 14:46:40 -0400] connor557: no.
[2014-07-03 14:46:44 -0400] connor557:  admin node
[2014-07-03 14:46:51 -0400] gyre007: oh, never used the commercial product mate...
[2014-07-03 14:47:00 -0400] gyre007: you might wanna open a ticket to Chef
[2014-07-03 14:47:11 -0400] connor557: I'm not one for the cmd line.
[2014-07-03 14:47:28 -0400] connor557: bye
[2014-07-03 14:47:33 -0400] znsatchel: what's the trick to have a new client automatically get a specific run list?
[2014-07-03 14:47:58 -0400] gyre007: znsatchel: wanna elaborate a bit on what youre trying to do ?
[2014-07-03 14:48:25 -0400] znsatchel: i want to build 100 servers and have a base role be added to all of them
[2014-07-03 14:48:53 -0400] gyre007: on the start ?
[2014-07-03 14:48:53 -0400] crnkyadmin: knife bootstrap $node -x root -i $sshkey --run-list \"recipe[chef-client::init_service]\"
[2014-07-03 14:49:07 -0400] gyre007: well that's your answer then...
[2014-07-03 14:49:09 -0400] znsatchel: thank you
[2014-07-03 14:49:12 -0400] znsatchel: :)
[2014-07-03 14:49:14 -0400] gyre007: :-)
[2014-07-03 14:50:00 -0400] gyre007: NOW, why aren't the recipes tagging my nodes haha...damn...
[2014-07-03 14:51:05 -0400] gourmet: I'm looking for direction on best practices for using chef normal attributes (attribute.set[..]). Why would you ever use it?
[2014-07-03 14:51:18 -0400] crnkyadmin: is anyone here specifying a branch while using the git resource?
[2014-07-03 14:57:33 -0400] workmad3: crnkyadmin: yes
[2014-07-03 14:58:22 -0400] crnkyadmin: workad3, got an example? checkout_branch doesn't work for me and revision ignores the value
[2014-07-03 14:59:06 -0400] workmad3: crnkyadmin: checkout_branch is the branch name used locally to name the checked out revision
[2014-07-03 14:59:17 -0400] crnkyadmin: ahh
[2014-07-03 14:59:17 -0400] workmad3: crnkyadmin: I only ever use revision or reference (an alias for revision)
[2014-07-03 14:59:42 -0400] crnkyadmin: and that fetches a remote branch named _____?
[2014-07-03 14:59:46 -0400] rsavage_: I have an interesting question.  Let's say I have a recipe in which I am looping (ie. looking at items in the node data (json elements), and say I do something like "node[:something][:items].each do" and I want to build out a template file for each item.  Can I pass the item's variable name into the template?
[2014-07-03 14:59:46 -0400] bawt: PONG
[2014-07-03 15:00:11 -0400] workmad3: crnkyadmin: so it's basically doing 'git checkout -b checkout_branch revision'
[2014-07-03 15:01:05 -0400] workmad3: crnkyadmin: so it checks out 'revision' (default HEAD) to a branch called 'checkout_branch' (default deploy, unlikey you'll need to change this other than to avoid collisions)
[2014-07-03 15:05:11 -0400] xhocquet: Hey I have a question, I'm running through the Linux setup tutorial and I can't seem to download the Starter Kit from Chef Manage
[2014-07-03 15:08:35 -0400] RustemS: Struggling with HAProxy: http://fpaste.org/115343/raw/ - can't pass a list to params
[2014-07-03 15:11:05 -0400] rsavage_: Does anyone know how to pass a recipe variable to a template inside a loop?
[2014-07-03 15:11:24 -0400] rsavage_: not a node attribute
[2014-07-03 15:13:12 -0400] mmzyk: rsavage_ What are you trying to do? Im trying to think why you might want to do this, but my imagination is failing me.
[2014-07-03 15:13:49 -0400] rsavage_: I need to build custom cron script based on entries on the node
[2014-07-03 15:14:00 -0400] x0nic: RustemS: You could use the variables parameter. http://docs.opscode.com/resource_template.html#using-templates
[2014-07-03 15:14:20 -0400] mmzyk: ah, so then you need to render multiple templates with slightly different value.
[2014-07-03 15:14:56 -0400] x0nic: ah sorry meant to ping rsavage_
[2014-07-03 15:14:56 -0400] bawt: PONG
[2014-07-03 15:15:02 -0400] rsavage_: Well I want one template, that renders different files with slightly different names, and inside the files each has slightly different values
[2014-07-03 15:15:15 -0400] rsavage_: x0nic: I got the link thanks
[2014-07-03 15:15:22 -0400] mmzyk: right.
[2014-07-03 15:15:51 -0400] x0nic: rsavage_: Yeah, so you can compute the values in the recipe inside the loop. then pass the value in using a variable
[2014-07-03 15:16:03 -0400] mmzyk: I believe you can just wrap your template code in a ruby loop to fill in the values you need on each iteration through.
[2014-07-03 15:16:35 -0400] rsavage_: mmzky: yeah I figured that part out.  here's my issue
[2014-07-03 15:17:14 -0400] rsavage_: on the node I might have a value called "backdir1": "/backup1", "backupdir2": "/backup2"
[2014-07-03 15:17:36 -0400] RustemS: x0nic: Doesnt' help
[2014-07-03 15:18:13 -0400] x0nic: Sorry RustemS, meant to ping rsavage_ not you
[2014-07-03 15:18:13 -0400] bawt: PONG
[2014-07-03 15:18:38 -0400] rsavage_: I can loop through that just fine as "node[:backdirX].each" do |name.mount|".... I need to pass "name" into the template when I call it for rendering...
[2014-07-03 15:18:49 -0400] rsavage_: make sense?
[2014-07-03 15:19:00 -0400] RustemS: x0nic : tried this               variables({
[2014-07-03 15:19:01 -0400] RustemS:               'acl' => 'rootdomain path_reg ^$|^/$',
[2014-07-03 15:19:01 -0400] RustemS:               'acl' => 'swaggerui path_beg /swaggerui/'}),
[2014-07-03 15:20:37 -0400] rsavage_: Ah
[2014-07-03 15:20:39 -0400] rsavage_: I found it!
[2014-07-03 15:20:45 -0400] rsavage_: node[:fqdn] = "latte"
[2014-07-03 15:20:46 -0400] rsavage_: template "/tmp/foo" do
[2014-07-03 15:20:46 -0400] rsavage_:   source "foo.erb"
[2014-07-03 15:20:47 -0400] rsavage_:   variables({
[2014-07-03 15:20:47 -0400] rsavage_:     :x_men => "are keen"
[2014-07-03 15:20:48 -0400] rsavage_:   })
[2014-07-03 15:20:48 -0400] rsavage_: end
[2014-07-03 15:20:52 -0400] rsavage_: The node <%= node[:fqdn] %> thinks the x-men <%= @x_men %>
[2014-07-03 15:20:54 -0400] gchristensen: gist.github.com or pastebin.com y'all
[2014-07-03 15:21:07 -0400] whiteadam: SO MUCH CODE
[2014-07-03 15:21:18 -0400] rsavage_: gchristensen: whine some more, please :)
[2014-07-03 15:21:33 -0400] mmzyk: rsavage_ glad you figured it out.
[2014-07-03 15:21:53 -0400] x0nic: rsavage_: Great, you got it figured then?
[2014-07-03 15:21:54 -0400] rsavage_: mmzyk: word!
[2014-07-03 15:22:05 -0400] rsavage_: x0nic: I think so, testing it out
[2014-07-03 15:22:43 -0400] rsavage_: mmzyk: good question ;)
[2014-07-03 15:23:17 -0400] mmzyk: To be fair, had it been much more, I would have suggest gist or pastebin. :)
[2014-07-03 15:25:00 -0400] rsavage_: I was thinking about sending it via the US Postal service
[2014-07-03 15:25:11 -0400] rsavage_: Hard Copy FTW!
[2014-07-03 15:25:18 -0400] rsavage_: lulz
[2014-07-03 15:27:17 -0400] gyre007: anyone has an idea why the following code is not tagging the node which has this recipe in the runlist ? http://pastebin.com/UNnyayzY
[2014-07-03 15:27:48 -0400] gyre007: I might just go into source code but i so want to avoid that...ive been doing it way too often recently hahaha
[2014-07-03 15:32:52 -0400] mc_fail: does chef have any wau to parse a bash script execution results?
[2014-07-03 15:32:57 -0400] mmzyk: grye007 perhaps add some code after the tag to see if it is tagged at that point: http://docs.opscode.com/dsl_recipe_method_tag.html
[2014-07-03 15:32:58 -0400] mc_fail: *way
[2014-07-03 15:33:43 -0400] mmzyk: mc_fail by execution results you mean? it can certainly check the exit code for you. http://docs.opscode.com/chef/resources.html#bash
[2014-07-03 15:34:24 -0400] mc_fail: mmzyk no, i just wan to take some output to variable
[2014-07-03 15:34:27 -0400] someara: mc_fail if you're wanting to do something like that, I suggest creating a resource with the LWRP DSL and using the shell_out! function
[2014-07-03 15:35:13 -0400] mc_fail: what about "returns" for "bash" resource?
[2014-07-03 15:36:05 -0400] someara: what exactly are you trying to do
[2014-07-03 15:38:15 -0400] Neozonz: if I include a recepie which contains a variable, is the variable accessible via the initial recipe?
[2014-07-03 15:38:42 -0400] someara: no, variables are local to the recipes
[2014-07-03 15:38:54 -0400] Neozonz: includes don't pass them over?
[2014-07-03 15:38:56 -0400] Neozonz: ok thanks
[2014-07-03 15:39:03 -0400] someara: not that I'm aware of
[2014-07-03 15:39:30 -0400] mc_fail: i have a application, and i need to restart it after upgrading, i can't catch if application was updated via yum, but my application have a binary file in /dev/shm where it writing it's own version, but i can't just cat this file, i have a spetial tool to read this file, so, i need to execute this command, and grep version number from it's output, if version not the same that in config, i should restart my service
[2014-07-03 15:40:34 -0400] x0nic: Neozonz: You could use Chef::Mixin::ShellOut to capture the output
[2014-07-03 15:41:32 -0400] someara: its probably best to write a shell script to disk that returns an exit status, and call it in a resource's not_if or only_if guards
[2014-07-03 15:42:04 -0400] someara: for readability sake
[2014-07-03 15:42:19 -0400] someara: too much going on in the compilation phase confuses people
[2014-07-03 15:42:52 -0400] x0nic: someara: Would you include the shell script in your cookbook? Or how would get that script on the box?
[2014-07-03 15:43:03 -0400] someara: yep
[2014-07-03 15:43:32 -0400] someara: file-or-template "/usr/local/bin/somescript"
[2014-07-03 15:43:55 -0400] mc_fail: so, what about parsing execution output?
[2014-07-03 15:44:16 -0400] someara: then do an execute "whatever" { only_if "/usr/local/bin/somescript" }
[2014-07-03 15:44:17 -0400] x0nic: someara: That makes sense. Then you can test that separately.
[2014-07-03 15:44:45 -0400] someara: yep
[2014-07-03 15:45:32 -0400] kamaradclimber: hi, I'd like to make chef use syslog
[2014-07-03 15:45:55 -0400] kamaradclimber: description made on https://github.com/opscode-cookbooks/chef-client readme dose not work with current chef version
[2014-07-03 15:45:57 -0400] someara: mc_fail you're comparing the script output to another variable in your recipes compilation phase?
[2014-07-03 15:46:02 -0400] someara: or an attribute?
[2014-07-03 15:46:18 -0400] kamaradclimber: mainly because chef uses MonoLogger
[2014-07-03 15:46:40 -0400] kamaradclimber: is there an up-to-date way to do it ?
[2014-07-03 15:48:24 -0400] mc_fail: someara no, i just want to know how to write script output to any ruby avriable in chef.
[2014-07-03 15:49:12 -0400] someara: you'll need to shell_out! in your compilation phase
[2014-07-03 15:49:22 -0400] mc_fail: actually, what the difference, if i need to compare it with attribute or with variable.
[2014-07-03 15:49:45 -0400] someara: https://github.com/opscode/mixlib-shellout
[2014-07-03 15:50:20 -0400] mc_fail: ok, thanks
[2014-07-03 15:50:28 -0400] someara: just be careful not to modify machine state with any command you're running with that
[2014-07-03 15:50:34 -0400] mc_fail: is it installed with chef-client by default?
[2014-07-03 15:50:37 -0400] someara: yep
[2014-07-03 15:50:42 -0400] mc_fail: great.
[2014-07-03 15:51:51 -0400] someara: if you do want to modify machine state with a shell_out command, create a resource and call updated_by_last_action
[2014-07-03 15:52:57 -0400] aaronrl: is there a generally accepted naming convetion for resource action names/types? like :create, :remove, :stop, :start, :install, :enable, :disable etc.  possibly in list form somewheres? i can't seem to find anything in the chef docs or the googles
[2014-07-03 15:53:51 -0400] someara: I like to just use :create and :delete
[2014-07-03 15:54:18 -0400] someara: :restart and :reload if there's a service involved
[2014-07-03 15:54:41 -0400] someara: but no, there's not a list anywhere that I'm aware of
[2014-07-03 15:55:13 -0400] aaronrl: so really it should be based on the context of the item being manipulated, not really a conformed chef-lingo way?
[2014-07-03 15:55:25 -0400] aaronrl: i guess that's what the readme.md is for lol
[2014-07-03 15:57:03 -0400] dsaenztagarro: Hi everyone!.. Im writing a cookbook and one of my attributes requires a list of models... where should I define my models? Is there an official approach?.. or should I create a models folder at the same level that templates, recipes... thanks in advance!
[2014-07-03 16:02:14 -0400] shlant: dsaenztagarro: do the models need to be dynamic or are they static?
[2014-07-03 16:03:18 -0400] dsaenztagarro: the attribute is a list of instances of a PORO.. with 2 fields...
[2014-07-03 16:33:02 -0400] chef866: cheeseplus : just wanted to say thanks for your cookbook recomendation yesterday.  I now have OSX and linux users working.
[2014-07-03 16:34:17 -0400] mc_fail: does it possible to restart piveously-declared service in ruby code?
[2014-07-03 16:35:10 -0400] mc_fail: for example http://pastebin.com/DYCNNbQy
[2014-07-03 16:35:28 -0400] mc_fail: how i can restart this service without rewriting resource?
[2014-07-03 16:39:37 -0400] mmzyk: mc_fail wouldnt you use a notifies?
[2014-07-03 16:41:46 -0400] mmzyk: Have a block or resource that is a no-op, except that it notifies the service in requestion with a restart.
[2014-07-03 16:41:54 -0400] mmzyk: At least, thats what Id try.
[2014-07-03 16:47:21 -0400] Yvan_: Issue: Some cookbook files or templates are not always copied to the client cache folder when running chef-client...
[2014-07-03 16:55:20 -0400] mmzyk: without more info Yvan_, thats hard to act on or figure out whats going on.
[2014-07-03 16:55:36 -0400] rsavage_: mmzyk: BTW that template magic worked like a champ!
[2014-07-03 16:55:57 -0400] mmzyk: Awesome, glad it all worked rsavage_.
[2014-07-03 16:56:44 -0400] rsavage_: whoot! ;) an end to a good dev week :)
[2014-07-03 16:56:55 -0400] ponyofdeath: hi, anyone run into this? http://bpaste.net/show/d5o9nv1u2no4kPKCgWLM/ trying to install java on my 14.04 vm
[2014-07-03 16:57:48 -0400] mjuszcza1: What's the best way to apply a recipe locally on a box?
[2014-07-03 16:57:57 -0400] mjuszcza1: (without chef server or anything like that -- just read from a local directory and apply)
[2014-07-03 16:58:18 -0400] rsavage_: chef-solo I believe
[2014-07-03 16:58:40 -0400] rsavage_: I haven't worked in a standalone/solo enviornment before
[2014-07-03 16:58:55 -0400] mmzyk: mjuszcza1 Check out chef-apply
[2014-07-03 16:59:03 -0400] rsavage_: The chef-client now includes an option called local mode (--local-mode or -z),
[2014-07-03 16:59:08 -0400] rsavage_: http://docs.opscode.com/chef_solo.html
[2014-07-03 16:59:16 -0400] polkaparty: local mode is another option.
[2014-07-03 16:59:24 -0400] z: chef-apply will also work
[2014-07-03 16:59:53 -0400] rsavage_: renegade-rouge-chef also works....
[2014-07-03 16:59:59 -0400] rsavage_: wait, I made that up!
[2014-07-03 17:00:00 -0400] mjuszcza1: thanks!
[2014-07-03 17:00:01 -0400] rsavage_: lol
[2014-07-03 17:00:01 -0400] mmzyk: ponyofdeath I havent used that cookbook, but it appears it isnt setting up the directory structure properly.
[2014-07-03 17:00:47 -0400] mmzyk: mjuszcza1 From what you said you needed, Id start with chef-apply and see if that fits the bill.
[2014-07-03 17:01:27 -0400] polkaparty: rsavage_: your ideas are intriguing to me, and I wish to subscribe to your newsletter.
[2014-07-03 17:05:00 -0400] rsavage_: polkaparty: how's the weather in Scotland? :)
[2014-07-03 17:08:40 -0400] helfire: if i have a service resource in a lwrp does it get queue'd the same as a service outside an lwrp? I have everything set to :delayed but it still gets 2 restarts on converge
[2014-07-03 17:08:59 -0400] Yvan_: I have a cookbook file within a cookbook and most of the times it ends up in chef's cache on the chef client but 1 time out of 10 the file is created with 0 bytes or completely missing.
[2014-07-03 17:10:44 -0400] tomduffield: helfire: resources inside LWRPs are not aware of resources outside the LWRP. It might help to think of an LWRP as an isolated chef run inside a chef run
[2014-07-03 17:11:37 -0400] tomduffield: Yvan_ that is interesting. If you can capture any log data when that happens you can open an issue and we can look at it
[2014-07-03 17:12:14 -0400] helfire: tomduffield: ahh cool. may have to rethink my problem. I have a "jar deployer" puts and starts a jar on the fs, but the person using the lwrp may need to notify the service
[2014-07-03 17:12:24 -0400] Yvan_: Sure can you remind me chef's jira url ?
[2014-07-03 17:13:06 -0400] tomduffield: Yvan_ chef is now using github issues! You can submit one here: https://github.com/opscode/chef/issues
[2014-07-03 17:13:34 -0400] tomduffield: helfire a potential solution is to have your LWRP have an action designed to restart the service
[2014-07-03 17:13:43 -0400] Damacus: @tomduffield are you guys finding that a better experience then?
[2014-07-03 17:14:04 -0400] Damacus: (for me it's a lot easier to get an issue on a specific part of chef!)
[2014-07-03 17:14:06 -0400] helfire: tomduffield: interesting, may try that, thanks
[2014-07-03 17:14:23 -0400] tomduffield: Damacus I can't speak to that since I'm not directly involved with core development
[2014-07-03 17:15:01 -0400] tomduffield: but I haven't heard any complaints yet
[2014-07-03 17:15:18 -0400] gchristensen: it sounds more pleasant as a contributor
[2014-07-03 17:15:27 -0400] Yvan_: Thanks
[2014-07-03 17:18:27 -0400] helfire: @tomduffield any documentation or good reading about lwrp stuff? i know "just enough"
[2014-07-03 17:19:00 -0400] tomduffield: helfire: best bet: http://docs.opscode.com/lwrp_custom.html
[2014-07-03 17:19:24 -0400] helfire: ya, guess i should re-read now that i know more :)
[2014-07-03 17:19:25 -0400] helfire: thanks
[2014-07-03 17:19:36 -0400] tomduffield: yw - I would also encourage you to check out existing LWRPs
[2014-07-03 17:19:41 -0400] tomduffield: read the code and see how they do things
[2014-07-03 17:19:56 -0400] btm: Contributors, friends of Chef development, etc, you should read: Chef as a Community: http://www.getchef.com/blog/2014/07/03/chef-as-a-community/
[2014-07-03 17:19:58 -0400] tomduffield: you can also read this blog post: http://dougireton.com/blog/2012/12/31/creating-an-lwrp/
[2014-07-03 17:20:29 -0400] tomduffield: ^^ helfire
[2014-07-03 17:21:25 -0400] helfire: @btm reason i joined just now :)
[2014-07-03 17:22:08 -0400] btm: helfire: *chefhugs*
[2014-07-03 17:23:40 -0400] Damacus: hah, I imagine that post is going to get lots of people to fire up their IRC clients again (it did me)
[2014-07-03 17:24:02 -0400] Damacus: Trying to create a Chef community this side of the pond is not exactly...Easy at the moment.
[2014-07-03 17:24:16 -0400] helfire: one thing I thought about contributing/etc is releases. When a patch is merged, what/when do releases get cut? I hate asking for releases in the PR so i usually end up building the gem myself
[2014-07-03 17:24:36 -0400] rsavage_: Damacus: why is it not easy for you?
[2014-07-03 17:24:46 -0400] Damacus: rsavage
[2014-07-03 17:24:53 -0400] rsavage_: me
[2014-07-03 17:24:58 -0400] polkaparty: Damacus:couldn't agree more.
[2014-07-03 17:25:09 -0400] Damacus: rsavage there are just so few of us. DevOps meetups are still in their infancy in the UK.
[2014-07-03 17:25:38 -0400] polkaparty: and all in London ;)
[2014-07-03 17:25:41 -0400] rsavage_: I thought DevOps started in the UK? ;)
[2014-07-03 17:25:47 -0400] Damacus: started talking about another DevOps days event today with the Cardiff/London/Leed/Leicester people
[2014-07-03 17:25:51 -0400] Damacus: haha not quite
[2014-07-03 17:26:01 -0400] kmugrage: first devopsdays was in Belgium
[2014-07-03 17:26:05 -0400] Damacus: yeah
[2014-07-03 17:26:09 -0400] nathenharvey: Damacus: http://www.meetup.com/Chef-Users-London/
[2014-07-03 17:26:10 -0400] Damacus: good old patrick.
[2014-07-03 17:26:17 -0400] rsavage_: Belgium, is ummm UK, no?
[2014-07-03 17:26:25 -0400] Damacus: haha :P noooo
[2014-07-03 17:26:28 -0400] kmugrage: lol
[2014-07-03 17:26:33 -0400] nathenharvey: Damacus: there's not much to that group yet but good things coming
[2014-07-03 17:26:47 -0400] Damacus: nathenharvey there should be a Chef-Users-anywherebutlondon
[2014-07-03 17:27:04 -0400] nathenharvey: Damacus: so noted ;)
[2014-07-03 17:27:10 -0400] rsavage_: Well it's in the EU, close enough :)
[2014-07-03 17:27:19 -0400] kmugrage: I've heard that Birmingham is up and coming. No direct experience
[2014-07-03 17:27:31 -0400] jonlives: woo, gonna join that group!
[2014-07-03 17:27:38 -0400] Damacus: it's actually pretty easy to get to on the channel tunnel (went this year for Cgfmgmt camp)
[2014-07-03 17:28:23 -0400] btm: helfire: we've been keeping a 3 month release cadence on the client for a while now. that mostly came from being crappy about having any kind of schedule previously. We should/will all talk about how to schedule/cut releases going forward in the upcoming meetings that blog post mentions.
[2014-07-03 17:28:23 -0400] bawt: PONG
[2014-07-03 17:29:11 -0400] jtimberman: bawt: welcome back!
[2014-07-03 17:29:42 -0400] helfire: btm: ya i think chef-client is on a pretty good schedule, things like knife-* or other gems was what i was refering too. Eg, when that knife-openstack patch for passing secret keys was merged, when will the next x.y.1 release be cut
[2014-07-03 17:30:27 -0400] Damacus: nathenharvey thanks :) there are a lot of Northern UK groups. I have this inate drive to make London not the centre of the UK's universe.
[2014-07-03 17:32:02 -0400] Damacus: nathenharvey is there a list of the EMEA chef guys somewhere? Seems the community is crying out for it.
[2014-07-03 17:32:11 -0400] Damacus: ok just me
[2014-07-03 17:32:18 -0400] btm: helfire: yeah, the knife plugins tend to be maintained by different people throughout Chef Software, so their release schedules have been "as needed, when cycles available" which is more lame when you're on the outside of that.
[2014-07-03 17:32:43 -0400] kmugrage: there were a bunch of them at devopsdays amsterdam
[2014-07-03 17:32:47 -0400] nathenharvey: Damacus: no, but I have home addresses for each of them and can post it here if that helps ;)
[2014-07-03 17:33:10 -0400] ssd7: oh man, bawt is back?
[2014-07-03 17:33:17 -0400] Damacus: nathenharvey how else am I going to stalk them? :P
[2014-07-03 17:33:30 -0400] btm: nathenharvey: that might motivate one of them to make that list ;)
[2014-07-03 17:33:45 -0400] Damacus: mostly just wanted to contact the sales/community person over here for the DevOps Days thing
[2014-07-03 17:34:17 -0400] nathenharvey: Damacus: email me and I'll put you in touch with the right people.  nharvey@getchef.com
[2014-07-03 17:34:47 -0400] Damacus: thanks :)
[2014-07-03 17:34:54 -0400] nathenharvey: Damacus: or PM your email address to me and I'll do the same
[2014-07-03 17:34:56 -0400] shlant: is there a way to use a variable in a variable name? somehting like variables :app_'#{c}' => 'blah'
[2014-07-03 17:35:52 -0400] helfire: so what irc bouncers do most people use? it's been 10+ years since I hung out on irc for more than 5 minutes
[2014-07-03 17:36:54 -0400] rsavage_: helfire: I used BitchX, it's simple, nice, easy
[2014-07-03 17:36:59 -0400] rsavage_: use
[2014-07-03 17:37:44 -0400] helfire: rsavage_: thats what i used to use, tried irssi, but my main machine is a laptop so i close/open it alot, want a bouncer to stay connected/logged
[2014-07-03 17:38:27 -0400] juliancdunn: you could just get a $5/mo digitalocean machine :)
[2014-07-03 17:38:28 -0400] rsavage_: helfire: I always run mine through screen
[2014-07-03 17:38:32 -0400] rsavage_: but
[2014-07-03 17:38:44 -0400] rsavage_: you might want to use something like XChat
[2014-07-03 17:38:53 -0400] rellis:  the new amazon t2 class machines are 5$ a month too with reserved pricing
[2014-07-03 17:39:05 -0400] Damacus: hellfire I use a server with irssi then just reconnect like juliancdunn suggests
[2014-07-03 17:39:06 -0400] rsavage_: anyway all, it's a big Holiday here in the USA....
[2014-07-03 17:39:12 -0400] rsavage_: gonna split
[2014-07-03 17:39:15 -0400] rsavage_: peace out
[2014-07-03 17:40:17 -0400] tomduffield: shlant I would maybe try eval()
[2014-07-03 17:42:23 -0400] gyoza: yeaaaaa holidayyy
[2014-07-03 17:42:26 -0400] gyoza: we're getting out at 12:00 today
[2014-07-03 17:43:23 -0400] bensonmiller: Is there an elegant way to have a Chef resource evaluate node attributes during the execution phase, instead of (or overriding) the values as determined at compile time?
[2014-07-03 17:44:15 -0400] juliancdunn: bensonmiller: you can use lazy evaluation if you need to
[2014-07-03 17:44:32 -0400] juliancdunn: what are you trying to do?
[2014-07-03 17:48:23 -0400] bensonmiller: juliancdunn - Using the 'hostname' cookbook, which resets hostname and node['fqdn'] (etc.). It triggers a reload on the ohai resource, so the node object is happier - but only during execution phase. I have a resource down the chain that is sensitive to having the correct hostname, but it gets its hostname info  during compile time, so its configuration is different (wrong) from the state of the attributes that will exist during execution. Long story
[2014-07-03 17:48:23 -0400] bensonmiller:  short, I need to converge the node twice to get the right behavior.
[2014-07-03 17:51:38 -0400] bensonmiller: juliancdunn - I'm just reading the docs on Lazy Eval. Exactly what I need. BRB. ;)
[2014-07-03 17:52:01 -0400] juliancdunn: bensonmiller: https://stackoverflow.com/questions/14633509/is-there-any-way-to-delay-a-resources-attribute-resolution-until-the-execute
[2014-07-03 17:52:06 -0400] juliancdunn: oh, looks like you found it first :)
[2014-07-03 17:52:25 -0400] bensonmiller: juliancdunn - thanks, Julian!
[2014-07-03 17:54:14 -0400] Damacus: juliancdunn any downsides to lazy?
[2014-07-03 17:55:09 -0400] bensonmiller: Damacus - self loathing?
[2014-07-03 17:55:18 -0400] juliancdunn: wakka
[2014-07-03 17:55:27 -0400] bensonmiller: :P
[2014-07-03 17:55:33 -0400] Damacus: bensonmiller I can't caaaant be bothered to evaluate it yet.
[2014-07-03 17:55:47 -0400] shlant: Damacus: haha
[2014-07-03 17:56:12 -0400] bensonmiller: Give donut or no eval.
[2014-07-03 18:06:29 -0400] helfire: juliancdunn: good point, i already have a $5 droplet running for a site
[2014-07-03 18:18:57 -0400] JoshZ_: jkeiser: do you know how to assosiate and IP address to an ami in metal?
[2014-07-03 18:19:37 -0400] JoshZ_:   machine_options :bootstrap_options => {:flavor_id =>'m1.medium', :associate_address(instance_id, public_ip)
[2014-07-03 18:19:38 -0400] JoshZ_:   }
[2014-07-03 18:32:29 -0400] nulleric: ok now twitter and irc handles match
[2014-07-03 19:24:04 -0400] anthonyacquanita: what's a good way to test a condition, set a variable and then do or don't do something in a recipe?
[2014-07-03 19:24:18 -0400] anthonyacquanita: I'm getting burned by the ec2 attributes not being set in some vpc boxes
[2014-07-03 19:24:35 -0400] anthonyacquanita: I don't want to configure ldap if I can't say "ping ldap" or "host ldap"
[2014-07-03 19:24:36 -0400] bawt: PONG
[2014-07-03 19:35:48 -0400] s1991: Hello, can anyone explain how chef knows what to do each variable define in chef.json under vagrantFile?
[2014-07-03 19:38:48 -0400] tomduffield: anthonyacquanita you can write a helper library
[2014-07-03 19:39:03 -0400] tomduffield: one that checks your condition and returns true/false
[2014-07-03 19:39:14 -0400] tomduffield: and then use that library method in your resource guards
[2014-07-03 19:39:35 -0400] anthonyacquanita: I went with a one-line backtick
[2014-07-03 19:39:38 -0400] tomduffield: http://www.getchef.com/blog/2014/03/12/writing-libraries-in-chef-cookbooks/
[2014-07-03 19:39:59 -0400] anthonyacquanita: cool... I'll check it out
[2014-07-03 19:40:50 -0400] tomduffield: s1991 can you explain a little more?
[2014-07-03 19:41:00 -0400] tomduffield: what is your use case?
[2014-07-03 19:41:20 -0400] anthonyacquanita: If I can't resolve a hostname, don't configure the service
[2014-07-03 19:41:38 -0400] anthonyacquanita: sorry, not me.
[2014-07-03 19:42:07 -0400] tomduffield: s1991 i think the answer to your question might be that chef takes the attributes in chef.json and performs a deep merge into the node object: http://docs.opscode.com/essentials_node_object_deep_merge.html
[2014-07-03 19:43:32 -0400] s1991: tomduffield: If I want to configure my django project. For that also chef as already defined variable?
[2014-07-03 19:44:09 -0400] s1991: I mean if I had to configure something in settings.py which I define in chef.json
[2014-07-03 19:44:50 -0400] JoshZ_: jkeiser: do you know how to assosiate and IP address to an ami in metal?
[2014-07-03 19:45:08 -0400] JoshZ_: jkeiser: and EIP that is.
[2014-07-03 19:45:20 -0400] tomduffield: s1991 I think what you are looking for is to manage settings.py as a template (http://docs.opscode.com/resource_template.html) and then store the necessary attributes in chef.json
[2014-07-03 19:45:38 -0400] tomduffield: JoshZ_ have you tried the aws cookbook? https://github.com/opscode-cookbooks/aws
[2014-07-03 19:45:39 -0400] jkeiser: JoshZ_: not offhand, but any parameter to fog can do that.  I know the ec-metal project (github.com/opscode/ec-metal) can do that
[2014-07-03 19:45:48 -0400] s1991: tomduffield: thanks
[2014-07-03 19:46:03 -0400] tomduffield: s1991 your welcome, and good luck!
[2014-07-03 19:46:38 -0400] JoshZ_: Thank you tomduffield I will look at that...
[2014-07-03 19:48:19 -0400] mivok: jkeiser, JoshZ_: I think the ec-metal project uses the aws cookbook (and/or fog directly in a non-chef ruby script) to assign an EIP.
[2014-07-03 19:48:57 -0400] mivok: (actually a secondary private VPC IP, but you'd use similar methods for an EIP)
[2014-07-03 19:51:00 -0400] JoshZ_: ok what about a floating IP for openstack?
[2014-07-03 19:57:04 -0400] Cope: deal!
[2014-07-03 19:59:17 -0400] tomduffield: JoshZ_ that i'm not as familiar with. Maybe https://github.com/ruby-openstack/ruby-openstack and ruby_block?
[2014-07-03 20:01:45 -0400] JoshZ_: thanks we will do some testing on it.
[2014-07-03 20:11:30 -0400] fredburger: anybody out there have ldap auth working?  we're having a problem that seems related to the base_dn
[2014-07-03 20:14:39 -0400] fredburger: Our base_dn is set to "CN=CHEF_USERS,OU=CHEF,OU=Security Groups,OU=Groups,DC=foo,DC=bar,DC=com" (which is an AD group containing users we would like to grant access to)
[2014-07-03 20:15:42 -0400] fredburger: There are some users within that AD group, but when we try to authenticate the log shows "Could not locate a record with distinguished name [samaccountname=username,CN=CHEF_USERS,OU=CHEF,OU=Security Groups,OU=Groups,DC=foo,DC=bar,DC=com] on remote LDAP server."
[2014-07-03 20:17:34 -0400] fredburger: We've tried several different formats for username when trying to log into the webgui: username@bar.com / username / lastname,firstname / bar\username / lastname\,firstname
[2014-07-03 20:19:24 -0400] tomduffield: fredburger is this for Enterprise Chef or Open Source chef?
[2014-07-03 20:19:36 -0400] tomduffield: what is your use case?
[2014-07-03 20:20:10 -0400] fredburger: Enterprise
[2014-07-03 20:20:28 -0400] fredburger: self-hosted
[2014-07-03 20:21:38 -0400] fredburger: I don't know how to answer your use case question, Tom.
[2014-07-03 20:21:44 -0400] tomduffield: fredburger okay. you should email support@getchef.com
[2014-07-03 20:22:39 -0400] fredburger: I think a teammate did email them just a little bit ago, I just figured I'd hop on here and see if anybody was familiar with it.
[2014-07-03 20:22:59 -0400] dechols: hi
[2014-07-03 20:23:07 -0400] fredburger: Howdy, dechols.
[2014-07-03 20:26:01 -0400] BryanWB: good night chefs! happy independence day!
[2014-07-03 20:26:24 -0400] c_t: not for a while yet
[2014-07-03 20:27:32 -0400] echohack: Anyone have any ideas on how Chef's LDAP integration can query AD groups for Distinguished Names?
[2014-07-03 20:27:57 -0400] echohack: I'm interested in your question too Fredbergur
[2014-07-03 20:36:55 -0400] TotalEvil: hi2all
[2014-07-03 20:37:02 -0400] TotalEvil: can someone help me with ohai plugins?
[2014-07-03 20:37:17 -0400] TotalEvil: i'm tried to add one but it;s not working
[2014-07-03 20:37:34 -0400] TotalEvil: only whne run from console with -d option it works
[2014-07-03 20:42:58 -0400] mmzyk: TotalEvil Im about to step away from the computer, but jonlives explians how they work at the beginning of this talk: https://www.youtube.com/watch?v=gpyt2uGxrb8
[2014-07-03 20:43:42 -0400] mmzyk: I suspect there is enough info there for you to figure it out and how to debug.
[2014-07-03 20:44:02 -0400] TotalEvil: thx mm hope it will help me
[2014-07-03 20:44:42 -0400] mmzyk: Just based on what you said, you might not have added it to the plugin path, is my initial guess.
[2014-07-03 20:50:33 -0400] TotalEvil: i tried to add evein in client.rb but no luck)
[2014-07-03 20:58:24 -0400] TotalEvil: video didn't help me(
[2014-07-03 20:58:26 -0400] TotalEvil: nothing new
[2014-07-03 21:22:20 -0400] sigusr1: is it possible to pass a proxy URL to the chef-client on the boostrapped machines via chef-metal ?
[2014-07-03 21:22:36 -0400] sigusr1: similar to knife boostrap --boostrap-proxy ?
[2014-07-03 21:24:28 -0400] TotalEvil|2: mb some one here who is expert on ohai plugins
[2014-07-03 21:25:14 -0400] tomduffield: TotalEvil|2 are you using the ohai cookbook?
[2014-07-03 21:33:55 -0400] x0nic: Does anyone know why I would be getting random "EOFError: end of file reached" errors on chef runs?
[2014-07-03 21:37:46 -0400] anthonyacquanita: x0nic:  not an answer but when I was downloading cookbooks over a vpn with dropped packets that happened to me a lot
[2014-07-03 21:38:11 -0400] anthonyacquanita: possible corrupted cb on server??  is this chef-solo or chef-client ?
[2014-07-03 21:38:34 -0400] x0nic: it is chef-client
[2014-07-03 21:39:03 -0400] anthonyacquanita: after cb's are all downloaded or after?
[2014-07-03 21:39:21 -0400] x0nic: strangley it only seems to happen to a specific app on our platform. but it doesnt matter where it is run, eg staging or on vagrant
[2014-07-03 21:40:08 -0400] anthonyacquanita: specific cookbook?  What's the context of 'app'
[2014-07-03 21:40:46 -0400] x0nic: um, a specific role and application cookbook
[2014-07-03 21:41:15 -0400] x0nic: our application cookbook, not 'the application cookbook'
[2014-07-03 21:42:30 -0400] someara: just call it a cookbook
[2014-07-03 21:43:10 -0400] anthonyacquanita: does the trace point to a network issue or some execution within the CB.
[2014-07-03 21:43:12 -0400] x0nic: This is what chef logs when I run it. https://gist.github.com/anonymous/c015187c9951d55a96b9
[2014-07-03 21:43:23 -0400] x0nic: someara: ok
[2014-07-03 21:43:29 -0400] anthonyacquanita: sounds like you need to pepper that thing with logging and see if it fails at the same point.
[2014-07-03 21:43:35 -0400] x0nic: anthonyacquanita: looks like network
[2014-07-03 21:44:21 -0400] rshade98: I did a fresh install of chef server with the cookbook, and can't login with the default creds, any idea where to start the troubleshooting
[2014-07-03 21:45:09 -0400] x0nic: anthonyacquanita: This seems to be before chef loads any cookbooks
[2014-07-03 21:45:15 -0400] anthonyacquanita: yeah that looks way early
[2014-07-03 21:47:12 -0400] anthonyacquanita:  knife ssl check   ?
[2014-07-03 21:47:39 -0400] x0nic: anthonyacquanita: Really strange, when I try to view the node on the web ui. It wont even come up, just times out.
[2014-07-03 21:48:26 -0400] anthonyacquanita: delete node, empty run_list, run chef
[2014-07-03 21:49:00 -0400] anthonyacquanita: add CB run again, if it breaks some attribute or something in the CB is making chef unhappy
[2014-07-03 21:49:03 -0400] anthonyacquanita: check server logs
[2014-07-03 21:49:53 -0400] x0nic: anthonyacquanita: Which logs should I look at? erchef?
[2014-07-03 21:53:42 -0400] anthonyacquanita: not really sure to be honest, I'm on chef 11, I just do chef-server-ctl tail
[2014-07-03 21:54:06 -0400] x0nic: anthonyacquanita: Oh thats cool, i didnt know about that
[2014-07-03 21:58:38 -0400] shlant: coderanger: any progress on application cookbook rewrites? :p Capistrano is making me want to give up on life
[2014-07-03 22:01:22 -0400] nullspoon: I've got a cookbook_file question. I have a cookbook_file statement and the file isn't making it to the destinatoin node.
[2014-07-03 22:01:43 -0400] x0nic: thanks anthonyacquanita
[2014-07-03 22:02:17 -0400] nullspoon: I checked the node cookbook cache and the cookbook is all there, except the files directory (and its nested default/filename of course)
[2014-07-03 22:02:33 -0400] nullspoon: Further, on running chef-client, I don't see any errors.
[2014-07-03 22:02:45 -0400] nullspoon: Does anyone have any idea what's going on?
[2014-07-03 22:07:25 -0400] nullspoon: The silence doesn't bode well.  :)
[2014-07-03 22:11:31 -0400] x0nic: nullspoon: misspelling maybe?
[2014-07-03 22:12:02 -0400] nullspoon: I was wondering that, but I've puts'd the crap out of this thing.
[2014-07-03 22:12:11 -0400] nullspoon: No mispellings
[2014-07-03 22:12:41 -0400] nullspoon: x0nic: Though I actually just had just one more idea for torubleshooting this.
[2014-07-03 22:13:08 -0400] x0nic: nullspoon: Does chef not output the filename it is looking for, and the locations it looked?
[2014-07-03 22:21:58 -0400] nullspoon: x0nic: It's really strange actually. I have a call to log just before the cookbook_file and the log entry doesn't show up. When I write a puts there, it works fine.
[2014-07-03 22:22:13 -0400] nullspoon: x0nic: or rather, the puts prints to the chef-client output, but log won't.
[2014-07-03 22:22:22 -0400] nullspoon: x0nic: log also works elsewhere.
[2014-07-03 22:22:51 -0400] x0nic: nullspoon: I find I dont get my log messages if an error happens in chef
[2014-07-03 22:22:58 -0400] nullspoon: x0nic: What's weird is I have another cookbook with a cookbook_file call that works perfectly fine.
[2014-07-03 22:23:29 -0400] nullspoon: x0nic: I copied its definition nearly verbatim and it doesn't work inside this cookbook for some reason. It also used to work, which is why I'm so puzzled.
[2014-07-03 22:25:26 -0400] x0nic: nullspoon: I would try adding a new cookbook file, and pointing to the new one
[2014-07-03 22:25:43 -0400] x0nic: nullspoon: just for debugging
[2014-07-03 22:26:04 -0400] nullspoon: sure
[2014-07-03 22:26:05 -0400] nullspoon: give me a few
[2014-07-03 22:29:54 -0400] nullspoon: x0nic: Nope. Definite failure, but no errors and it continued to the next recipe in the runlist happily.
[2014-07-03 22:30:03 -0400] s1991: Hello, is there any way by which I don't need to include all recipes in vagrantfile instead I can add some file which add recipes in it??
[2014-07-03 22:31:02 -0400] nullspoon: s1991: roles?
[2014-07-03 22:31:23 -0400] x0nic: s1991: I do that by storing my runlist in a json file, and loop through that in the Vagrantfile, as it is ruby.
[2014-07-03 22:31:25 -0400] s1991: nullspoon: I'm a beginner so I've no idea.
[2014-07-03 22:31:53 -0400] nullspoon: s1991: No worries. A role is kind of like a portable runlist.
[2014-07-03 22:31:53 -0400] s1991: x0nic: can I see some example somewhere
[2014-07-03 22:31:57 -0400] s1991: may be git
[2014-07-03 22:32:06 -0400] x0nic: nullspoon: So you got an error, but chef continued?
[2014-07-03 22:32:26 -0400] nullspoon: x0nic: No errors. Chef continued like nothing was wrong.
[2014-07-03 22:32:55 -0400] nullspoon: x0nic: I'm getting the feeling I'm going to have to write an entirely new cookbook just to test my server and node.
[2014-07-03 22:33:13 -0400] nullspoon: x0nic: Thankfully that's just a few minutes I guess for a simple one.
[2014-07-03 22:33:25 -0400] x0nic: s1991: Sure
[2014-07-03 22:34:04 -0400] bricker`LA: Is there a way to use `knife cookbook site download` to download a cookbook and all of its dependencies, rather than waiting for chef to tell me "cookbook ... depends on ... which is not currently being uploaded and cannot be found on the server"?
[2014-07-03 22:34:07 -0400] bricker`LA: Or `knife upload`
[2014-07-03 22:37:02 -0400] x0nic: s1991: How is this? https://gist.github.com/X0nic/278f8d2e0daf4d1841bf
[2014-07-03 22:37:45 -0400] s1991: x0nic: ok, thanks. That'll work for me
[2014-07-03 22:38:06 -0400] x0nic: s1991: No prob
[2014-07-03 22:45:41 -0400] s1991: x0nic: This repo https://github.com/X0nic/chef-database_restore. Is that some framework because I've seen similar structure in many repos
[2014-07-03 22:47:17 -0400] nullspoon: x0nic: Well, I got it working kind of. I commented out the entire script and started from scratch, hardcoding everything. Now to figure out why and where it's failing.
[2014-07-03 22:48:27 -0400] x0nic: s1991: How do you mean 'some framework' ?
[2014-07-03 22:48:43 -0400] x0nic: s1991: is is just a cookbook
[2014-07-03 22:49:32 -0400] x0nic: nullspoon: Yeah, sounds like the way to go. Probably some line of code is doing something to dont expect
[2014-07-03 22:50:11 -0400] x0nic: s1991: The cookbook was initially generated with berkshelf
[2014-07-03 22:50:31 -0400] s1991: x0nic: ok, now I got it, thanks
[2014-07-03 22:55:37 -0400] nullspoon: x0nic: wtf It's ignoring my runlist order for some reason
[2014-07-03 22:56:12 -0400] nullspoon: This cookbook is the first on the runlist, and it's running the next cookbook and all of its dependencies, which fail without the first cookbook running.
[2014-07-03 22:56:41 -0400] nullspoon: sorry. Mildly angry. Been working on this issue for a very long time now.
[2014-07-03 23:00:45 -0400] someara: nullspoon there is probably compilation phase work being done
[2014-07-03 23:00:45 -0400] someara: ala build-essentials
[2014-07-03 23:02:20 -0400] nullspoon: someara: Makes sense. You wanna make sure all dependencies are present before you do the runlist anyways, so you evaluate dependencies of all items and then run the runlist. I finally discovered the problem. a dependedncy was changed in a seemingly unrelated cookbook, which caused a whole series of stuff to run, which should be placed in the runlist later.
[2014-07-03 23:05:35 -0400] nullspoon: Thanks for the help folks. As usual, a helpful chatroom.  :)
[2014-07-03 23:08:25 -0400] x0nic: nullspoon: It is probably running those in the compile phase
[2014-07-03 23:33:31 -0400] coderanger: shlant: Unless someone shows up to fund it, I have to focus on projects that pay my rent.

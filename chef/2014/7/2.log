[2014-07-02 00:00:06 -0400] c_t: and while running goiardi on plan9 with the db on a normal box is cute, it seems a little... dumb.
[2014-07-02 00:05:44 -0400] fujin: supporting plan9 isn't really that insane, I think you can run it again these days
[2014-07-02 00:05:46 -0400] fujin: it has a funny new name
[2014-07-02 00:05:49 -0400] fujin: Inferno or something like that
[2014-07-02 00:05:59 -0400] holoway: fujin: you can always run plan9 from userspace
[2014-07-02 00:06:20 -0400] fujin: https://code.google.com/p/inferno-os/
[2014-07-02 00:06:33 -0400] fujin: I won't even pretend to know anyting about that :)
[2014-07-02 00:06:52 -0400] Alayde: rip plan9 bunny mascot
[2014-07-02 00:08:03 -0400] fujin: so apparently jtimberman found the code for bawt
[2014-07-02 00:08:07 -0400] fujin: we have the technology
[2014-07-02 00:08:20 -0400] fujin: May be wearing new armor next time you see him
[2014-07-02 00:08:30 -0400] fujin: Upgrade Power Armor: Golang Response Suit
[2014-07-02 00:09:14 -0400] holoway: can I just say that if one outcome of that blog post is the return of bawt, probably worth it
[2014-07-02 00:10:42 -0400] fujin: I have little hope but it may help a small amount toward the present scenario
[2014-07-02 00:10:56 -0400] fujin: Will need to be re-trained for the new docs
[2014-07-02 00:11:30 -0400] fujin: Usually there were people around, who knew the bots keywords, who would be like 'cookbook?' or 'notifications?''
[2014-07-02 00:14:01 -0400] coderanger: I've not seen the same number of purely repetitive questions like in the old days
[2014-07-02 00:14:26 -0400] coderanger: There are a few, but the are generally complex and nuanced like "how do I store secrets in/with chef?"
[2014-07-02 00:14:45 -0400] fujin: yeah
[2014-07-02 00:15:20 -0400] fujin: That is a pretty gnarly bike shed all on its own, I prefer not to store secrets in chef, even with encrypted databags or something like chef-vault
[2014-07-02 00:15:37 -0400] fujin: https://github.com/oleiade/trousseau
[2014-07-02 00:15:40 -0400] fujin: want something like this
[2014-07-02 00:16:18 -0400] coderanger: fujin: Your wish is my command https://github.com/cloudflare/redoctober
[2014-07-02 00:16:20 -0400] fujin: Is it my experience over time with chef that drives me to automate less complex systems, with chef, or have them self-reliant, taking configuration from the environment, or something like Consul?
[2014-07-02 00:16:34 -0400] fujin: coderanger: ye, looked at that one too!
[2014-07-02 00:16:47 -0400] coderanger: fujin: Downside is identity-encrypted solutions can't work with any kind of auto-scaling or healing
[2014-07-02 00:18:01 -0400] fujin: there was probably a time when I thought storing secrets in dbags, even before e.d-bags existed, was kind of okay
[2014-07-02 00:18:16 -0400] fujin: you don't want to know where the secrets were before databags existed!
[2014-07-02 00:18:19 -0400] coderanger: Indeed, or in node attributes
[2014-07-02 00:20:00 -0400] coderanger: fujin: If you are interested in consul for secrets storage, you might want to sub on https://github.com/hashicorp/consul/issues/201 :)
[2014-07-02 00:20:49 -0400] fujin: i dunno that secrets in consul is the right answer, but acls will certainly help
[2014-07-02 00:21:42 -0400] coderanger: Yeah, its a requirement moreso than a full solution
[2014-07-02 00:21:56 -0400] fujin: correct, I believe it is
[2014-07-02 00:22:05 -0400] coderanger: That said, ZK has ACLs and almost no one uses them because its holyshit complicated
[2014-07-02 00:22:08 -0400] someara: too many secrets
[2014-07-02 00:22:39 -0400] fujin: I hope to put some significant time into consul soon, forming a clear demarcation of configuration vs. automation in my codebases-forward
[2014-07-02 00:23:05 -0400] fujin: It's a pain to test locally. I guess you can fire up three VMs and form a cluster, or three processes and #aintcare about the data-loss
[2014-07-02 00:23:08 -0400] fujin: just for testing, of course
[2014-07-02 00:24:25 -0400] fujin: really hoping to beef out some of these ideas with goiardi and c_t
[2014-07-02 00:24:33 -0400] fujin: groupcache, consul, lua
[2014-07-02 00:24:44 -0400] fujin: #TeamGo
[2014-07-02 00:38:58 -0400] gkra: Is there a way to delete notifications from a resource from another cookbook?
[2014-07-02 00:39:09 -0400] coderanger: gkra: "no"
[2014-07-02 00:39:12 -0400] gkra: :(
[2014-07-02 00:39:16 -0400] coderanger: which is to say "yes but not easily"
[2014-07-02 00:39:58 -0400] gkra: All the time I spend working around the nginx cookbook, I likely should have just forked it and rewritten it by now. :(
[2014-07-02 00:40:17 -0400] someara: I think miketheman is going to do that
[2014-07-02 00:40:31 -0400] gkra: yeah, i'm following that.
[2014-07-02 00:41:11 -0400] fujin: surely one can unset the notifies at compile time using resource() hack?
[2014-07-02 00:41:17 -0400] fujin: seems inadvisable
[2014-07-02 00:41:55 -0400] gkra: where are things like resources() documented?
[2014-07-02 00:42:05 -0400] coderanger: You have to reach in to the notifications list
[2014-07-02 00:43:41 -0400] coderanger: notifications aren't stored on the resources
[2014-07-02 00:43:45 -0400] someara: evil evil hacks
[2014-07-02 00:43:46 -0400] fujin: oh, bummer
[2014-07-02 00:43:49 -0400] fujin: yeah, don't do that plz
[2014-07-02 00:43:53 -0400] coderanger: https://github.com/opscode/chef/blob/master/lib/chef/run_context.rb#L53-L59
[2014-07-02 00:44:10 -0400] fujin: that's not too bad probably
[2014-07-02 00:44:19 -0400] fujin: He said, nonchalantly
[2014-07-02 00:44:49 -0400] coderanger: Its a mid-level hack :)
[2014-07-02 00:45:03 -0400] fujin: i think the only documentation for resources() that may have existed, was when it was the way to specify a resource for notifications, or using it for forcing a compile time run_action
[2014-07-02 00:45:08 -0400] fujin: I don't recall seeing any other rdoc or similar
[2014-07-02 00:45:15 -0400] gkra: oh balls. I'd almost rather just redefine the template for the init.d script in my wrapper cookbook. :)
[2014-07-02 00:45:25 -0400] fujin: Just use Runit
[2014-07-02 00:45:36 -0400] fujin: upstart, systemd
[2014-07-02 00:45:39 -0400] gkra: because *that* solves my problems.
[2014-07-02 00:45:55 -0400] someara: If I had a reason to run nginx, I'd just write my own until the upstream one is reworked
[2014-07-02 00:46:08 -0400] gkra: someara: so i've learned.
[2014-07-02 00:46:38 -0400] fujin: seriously though, use a supervisor!
[2014-07-02 00:46:39 -0400] fujin: :p
[2014-07-02 00:46:40 -0400] coderanger: gkra: Want me to write you one ;-)
[2014-07-02 00:46:54 -0400] someara: doesn't nginx restart its workers?
[2014-07-02 00:47:09 -0400] fujin: yeah, but nothing to keep the master operational. :p
[2014-07-02 00:47:17 -0400] someara: systemd, yo
[2014-07-02 00:47:21 -0400] gkra: that's what monitoring is for
[2014-07-02 00:47:27 -0400] fujin: lol nope that is what a supervisor is for
[2014-07-02 00:47:31 -0400] gkra: and we're on CentOS 6, so... yay?
[2014-07-02 00:48:05 -0400] fujin: systemds user mode is really cool! someara, have you used it?
[2014-07-02 00:48:15 -0400] fujin: I use it to look after some processes in my desktop session
[2014-07-02 00:48:35 -0400] someara: used is a strong word... encountered is probably more accurate
[2014-07-02 00:49:06 -0400] fujin: haha
[2014-07-02 00:49:31 -0400] fujin: Arch has been on systemd for so long now :) I have given up my beefs with it. Apart from journactl hosing my logs :()
[2014-07-02 00:49:42 -0400] fujin: Give Up The Beef
[2014-07-02 00:49:46 -0400] someara: specifically, I discovered that you need to load mod_systemd to get apache running on fedora 20
[2014-07-02 00:50:01 -0400] fujin: oh, really? well that will teach you, for using apache
[2014-07-02 00:50:06 -0400] fujin: what does mod_systemd do?
[2014-07-02 00:50:15 -0400] fujin: dbus or something so the systemd can talk to it!?
[2014-07-02 00:50:58 -0400] someara: "systemd provides sd_notify(...) function [2] to inform service manager about current status of the service"
[2014-07-02 00:51:24 -0400] someara: (no idea)
[2014-07-02 00:51:33 -0400] fujin: ah yep, neat
[2014-07-02 00:51:54 -0400] fujin: that's cool though -- now the unit file is not just "fire and hope for the best", it actually understands when apache is operational
[2014-07-02 00:52:20 -0400] fujin: it's all very well and good to say, something is operational, based on daemonization or similar
[2014-07-02 00:52:27 -0400] someara: I like what I saw so far... its like SMF but without the XML
[2014-07-02 00:53:01 -0400] fujin: Lol!
[2014-07-02 00:55:24 -0400] spheromak: someara: fujin in the same boat. started with arch, and now my gripes aren't much.
[2014-07-02 00:56:11 -0400] fujin: arches unit files 2gud
[2014-07-02 00:57:15 -0400] someara: another day, another temptation to roll my own linux distro that has no package deps or installation scripts
[2014-07-02 00:57:28 -0400] someara: er, post-install scripts
[2014-07-02 00:57:32 -0400] gkra: Core OS with an installer?
[2014-07-02 00:57:36 -0400] gkra: :)
[2014-07-02 00:58:03 -0400] fujin: someara: arch?!
[2014-07-02 00:58:34 -0400] spheromak:   gkra just use CoreOS as-is ;)
[2014-07-02 00:58:42 -0400] someara: not into rolling releases
[2014-07-02 00:58:44 -0400] gkra: seriously, I want just enough Linux to get an IP address and present a REST service to let me drop docker containers on it.
[2014-07-02 00:58:46 -0400] fujin: arch packages have dependencies and PKGBUILD can easily setup post-install scripts (unless I'm missing something!)
[2014-07-02 00:59:01 -0400] fujin: someara: that is kind of the beauty of it; you don't have to roll the release
[2014-07-02 00:59:02 -0400] gkra: spheromak: the fact that it's still in beta only makes me hesitant.
[2014-07-02 00:59:03 -0400] spheromak:  now with the vendor stuff easy to make core do what you want
[2014-07-02 00:59:21 -0400] gkra: When I get a few cycles next week I plan on looking at Core
[2014-07-02 00:59:30 -0400] spheromak: someara: you don't _have_ to update
[2014-07-02 00:59:32 -0400] gkra: (well, investigating. I've been looking)
[2014-07-02 00:59:46 -0400] fujin: if anythign I prefer Arch policy to Debian, lol :-)
[2014-07-02 01:00:04 -0400] someara: "what version of gentoo are you on?" *blinks*
[2014-07-02 01:00:15 -0400] Ash: gentoo has versions now?
[2014-07-02 01:00:20 -0400] fujin: It becomes irrelevant though
[2014-07-02 01:00:25 -0400] spheromak: Ash: it was sarcasm
[2014-07-02 01:00:36 -0400] Ash: mine was sarcasm too
[2014-07-02 01:00:44 -0400] Ash: high five!
[2014-07-02 01:00:49 -0400] someara: amazon linux does that too
[2014-07-02 01:01:08 -0400] someara: I'm considering removing it from the rhel ohai family
[2014-07-02 01:01:15 -0400] spheromak: Ash: whee internet sarcasm :)
[2014-07-02 01:01:51 -0400] gkra: spheromak: http://i.qkme.me/3qr47d.jpg
[2014-07-02 01:01:52 -0400] spheromak: someara: imo its enough like rhel to keep it, but def enough not like it to cause headaches
[2014-07-02 01:02:12 -0400] spheromak: gkra: perfect
[2014-07-02 01:05:09 -0400] gkra: coderanger: So.... chef_run = Chef::run_context; chef_run.immediate_notification_collection.delete('service[nginx]') ?
[2014-07-02 01:05:52 -0400] coderanger: No, just run_context.immediate...
[2014-07-02 01:06:01 -0400] spheromak: gkra: run_context ..
[2014-07-02 01:06:07 -0400] spheromak: ^
[2014-07-02 01:06:25 -0400] fujin: what if he is in an lwrp
[2014-07-02 01:06:30 -0400] jtimberman: fwiw, http://docs.opscode.com/chef/dsl_recipe.html#resources (earlier conversation about "where is resources documented"
[2014-07-02 01:06:31 -0400] fujin: :mindblown:
[2014-07-02 01:06:42 -0400] fujin: see that is the exact type of bawt link
[2014-07-02 01:07:02 -0400] coderanger: fujin: run_context is available in provider bodies
[2014-07-02 01:07:24 -0400] fujin: coderanger: yeah, but it's not unified, is it? it doesn't have access to the notifications, happening i nthe parent run_context? or has that changed
[2014-07-02 01:07:31 -0400] fujin: I thought you explicitly had to pass that in from the outer context somehow
[2014-07-02 01:07:40 -0400] fujin: (recall reading an implementation that used this for something, I forget what)
[2014-07-02 01:07:46 -0400] coderanger: fujin: There is only one run_context, its super global
[2014-07-02 01:07:50 -0400] fujin: hmm
[2014-07-02 01:07:53 -0400] fujin: okay, disregard then
[2014-07-02 01:08:02 -0400] gkra: not just global, but SUPER global, thanks for asking?
[2014-07-02 01:08:18 -0400] fujin: I swear I could have seen multiple run contexts? use_inline_resources? something
[2014-07-02 01:08:20 -0400] fujin: I will look around
[2014-07-02 01:08:24 -0400] jtimberman: fujin: yar, bawt would be handy for thing slike that.
[2014-07-02 01:08:26 -0400] fujin: Cannot shake the memory
[2014-07-02 01:08:47 -0400] spheromak: fujin: after chef11
[2014-07-02 01:08:50 -0400] fujin: I remember when his markov got soooo good
[2014-07-02 01:08:51 -0400] spheromak: it was global
[2014-07-02 01:08:55 -0400] spheromak: or was it 10 ?
[2014-07-02 01:08:56 -0400] fujin: he would like answer questions and occasionally get 'em right'
[2014-07-02 01:08:57 -0400] spheromak: 11
[2014-07-02 01:09:08 -0400] fujin: spheromak: ah
[2014-07-02 01:09:22 -0400] spheromak: when they reworked notifications
[2014-07-02 01:09:53 -0400] spheromak: iirc
[2014-07-02 01:09:54 -0400] coderanger: fujin: use_inline_resources creates duplicate but it still points at the same notifications
[2014-07-02 01:18:06 -0400] someara: we're all going to die http://www.scs.stanford.edu/~sorbo/brop/bittau-brop.pdf
[2014-07-02 01:27:20 -0400] gkra: man
[2014-07-02 01:27:30 -0400] gkra: I love that Test Kitchen lets me iterate on this very effectively
[2014-07-02 01:27:42 -0400] gkra: but having to build ruby 2.1.2 from source every time is starting to be a drag :)
[2014-07-02 01:28:03 -0400] spheromak: gkra: not just uing converge after code change ?
[2014-07-02 01:28:10 -0400] spheromak: or recipes aren't idempotent
[2014-07-02 01:28:27 -0400] gkra: the thing I'm testing only occurs on bootstrap right *after* ruby is first built
[2014-07-02 01:30:34 -0400] fujin: coderanger: ah cool, that makes sense, that is where I had seen it :) thx
[2014-07-02 01:30:34 -0400] someara: doesn't coderanger roll rubies and host them on the internets?
[2014-07-02 01:30:43 -0400] fujin: do you mean the omnibus-rubies ?
[2014-07-02 01:30:46 -0400] someara: yea
[2014-07-02 01:30:50 -0400] coderanger: someara: poise-ruby, yeah
[2014-07-02 01:30:55 -0400] fujin: no, different
[2014-07-02 01:31:20 -0400] gkra: gah
[2014-07-02 01:31:27 -0400] gkra: where is the notification object defined?
[2014-07-02 01:33:17 -0400] gkra: ah: https://github.com/opscode/chef/blob/3800ae10cc8adc9de1195f3cfc70d82679b4aa9b/lib/chef/resource.rb#L38
[2014-07-02 01:40:52 -0400] fujin: schisamo: around?
[2014-07-02 02:13:44 -0400] gkra: well, damnit
[2014-07-02 02:14:10 -0400] gkra: apparently what I *really* needed to do was just get the hell out of the nginx cookbook's way, and not bother with it until I was sure my desired ruby version was present at the beginning of the chef run.
[2014-07-02 02:14:17 -0400] gkra: so, yay.
[2014-07-02 02:17:20 -0400] coderanger: gkra: include_recipe_now is handy for that kind of thing
[2014-07-02 05:25:16 -0400] chefgirl: hey!!! can anyone tell me if we can launch an RDS AWS insatnce in public subnet ina VPC ?
[2014-07-02 05:27:39 -0400] chefgirl: any one wroking on  AWS Services
[2014-07-02 05:27:41 -0400] chefgirl: ???
[2014-07-02 05:29:15 -0400] coderanger: chefgirl: That isn't related to Chef. You can find support for AWS on their forums or by purchasing a support incident
[2014-07-02 05:29:52 -0400] chefgirl: I thought that some one might be working on AWS Services also
[2014-07-02 05:31:11 -0400] coderanger: chefgirl: Many are, but this is a support channel for Chef, not AWS.
[2014-07-02 05:31:14 -0400] fujin: http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_VPC.html#USER_VPC.Hiding
[2014-07-02 05:31:57 -0400] fujin: 'Your VPC must have at least one subnet in at least two of the Availability Zones in the region where you want to deploy your DB instance. A subnet is a segment of a VPC's IP address range that you can specify and that lets you group instances based on your security and operational needs.
[2014-07-02 05:32:06 -0400] fujin: If you want your DB instance in the VPC to be publicly accessible, you must enable the VPC attributes DNS hostnames and DNS resolution.
[2014-07-02 05:32:09 -0400] fujin: It's all covered up there.
[2014-07-02 05:32:16 -0400] fujin: http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_VPC.html#Overview.RDSVPC.Create
[2014-07-02 05:32:18 -0400] fujin: chefgirl: ^^
[2014-07-02 07:32:39 -0400] m4rcu5: ohai chefs (i know cliche). I have a attribute in a cookbook that sets a hash with default precedence. now i would like to remove or empty the hash on a single node. how would one proceed? I tried setting a node: { attrib: { hash: { } }}, but it seems to merge it instead of override
[2014-07-02 07:39:07 -0400] coderanger: m4rcu5: There isn't a direct way to do that, you would have a override each of them
[2014-07-02 07:39:17 -0400] coderanger: m4rcu5: Or set the whole thing to false or similar
[2014-07-02 07:41:23 -0400] m4rcu5: coderanger: if i have node[:level1][:level2] = { :level3-1 => something, level3-2 => else }, is there no way to force whole of  node[:level1][:level2] to nil?
[2014-07-02 07:41:48 -0400] coderanger: I don't think you can force it to nil, no. False should work though
[2014-07-02 07:41:58 -0400] m4rcu5: let me check
[2014-07-02 07:47:04 -0400] m4rcu5: coderanger: iptables-ng says no.. ;_;
[2014-07-02 07:47:51 -0400] m4rcu5: i set some default rules in a cookbook, and i need to get rid of some on this server
[2014-07-02 07:49:23 -0400] coderanger: m4rcu5: You would have to write the code specifically to cope with this
[2014-07-02 07:49:34 -0400] coderanger: https://github.com/opscode/chef/blob/master/lib/chef/mixin/deep_merge.rb#L107-L108
[2014-07-02 07:49:44 -0400] coderanger: false will merge over things though
[2014-07-02 07:50:20 -0400] m4rcu5: yep, but then iptables-ng thinks its a real rule and craps out
[2014-07-02 07:50:35 -0400] coderanger: Indeed
[2014-07-02 07:50:44 -0400] coderanger: it likely has no handling for this
[2014-07-02 08:22:39 -0400] m4rcu5: whehe, setting the rule to "-m comment --comment gone" works :D
[2014-07-02 08:40:29 -0400] vic3lord: I'm new to chef (only a month) and already installed 3 servers (as asked to at work) and I really love it so far, the only thing that bothers me is the workflow that isn't standardised and i have to work with a mix of tools like knife and spork and berks and all these 3rd party tools I wish there was 1 thing to handle cookbooks upload nicely
[2014-07-02 08:40:42 -0400] vic3lord: BTW im a hardcore ex puppet user
[2014-07-02 08:56:03 -0400] bricker`LA: Is there a better way to chmod a file besides just using "execute"?
[2014-07-02 08:56:43 -0400] jonlives: bricker`LA: use the "mode" attribute of the file resource: http://docs.opscode.com/resource_file.html
[2014-07-02 08:57:46 -0400] bricker`LA: jonlives: I tried it, but it just warned that the file already existed and skipped it with "up to date"
[2014-07-02 08:58:11 -0400] jonlives: bricker`LA: if the mode specified in that resource block is different to the file on disk it should update it though afaik
[2014-07-02 08:58:14 -0400] jonlives: did it not?
[2014-07-02 08:58:58 -0400] bricker`LA: jonlives: no, it's likely I did something wrong though
[2014-07-02 08:59:23 -0400] bricker`LA: jonlives: let's see hmyah....
[2014-07-02 09:00:50 -0400] bricker`LA: jonlives: yes, it worked afterall, thanks :)
[2014-07-02 09:00:53 -0400] bricker`LA: I am very tired :(
[2014-07-02 09:01:01 -0400] jonlives: bricker`LA: no worries!
[2014-07-02 09:01:31 -0400] jonlives: vic3lord: all of those tools upload cookbooks just fine - the problem is there's no canonical way to use Chef cos everyone has slightly different uses for it
[2014-07-02 09:01:49 -0400] jonlives: tho the berkshelf method is becoming increasingly prevalent these days
[2014-07-02 09:02:00 -0400] jonlives: I always recommend to people to use berkshelf unless they have a good reason not to :)
[2014-07-02 09:02:49 -0400] vic3lord: but berkshelf is only for external cookbooks unless you create git repo for every cookbook you have
[2014-07-02 09:03:20 -0400] bricker`LA: You can put all of your cookbooks into a single repo, that helps
[2014-07-02 09:03:25 -0400] jonlives: vic3lord: that's the direction people are moving in it seems, having a repo for each cookbook
[2014-07-02 09:04:11 -0400] jonlives: fwiw, I wrote spork, and Etsy use a single repo for all cookbooks. We also don't use berkshelf, but we have specific reasons for that.
[2014-07-02 09:04:18 -0400] vic3lord: but we are paying for private repos on github
[2014-07-02 09:05:07 -0400] jonlives: hmm
[2014-07-02 09:05:38 -0400] vic3lord: so help me decide on a workflow, we have chef-repo which holds every internal cookbook and Berksfile that includes external dependencies but tool should i use to deploy cookbooks? one tool only
[2014-07-02 09:06:30 -0400] jonlives: vic3lord: I'm not sufficiently familar with Berkshelf to know for sure if it won't work with a single cookbook repo
[2014-07-02 09:06:36 -0400] jonlives: but if you can use berkshelf, I'd go with that.
[2014-07-02 09:06:39 -0400] vic3lord: right now i do berks install berks vendor then knife spork upload (with berks-cookbooks and cookbooks in knife.rb)
[2014-07-02 09:07:20 -0400] jonlives: vic3lord: if you have a single repo & want to use berkshelf and assuming berkshelf doesn't work nicely with a single cookbook repo, you may well have to keep doing that.
[2014-07-02 09:08:52 -0400] jonlives: vic3lord: sethvargo or one of the other berkshelf core folks might be able to offer better advice on that side of things when they're around.
[2014-07-02 09:08:54 -0400] vic3lord: jonlives: Thanks for all advices
[2014-07-02 09:08:57 -0400] jonlives: I can def advise on spork :p
[2014-07-02 09:09:06 -0400] vic3lord: i love spork
[2014-07-02 09:09:14 -0400] jonlives: good to hear!
[2014-07-02 09:09:19 -0400] vic3lord: but it cannot handle berks
[2014-07-02 09:09:36 -0400] jonlives: yeah there's an issue open for berkshelf 3 support
[2014-07-02 09:09:48 -0400] jonlives: but it's waiting on seth and other berkshelf users since we just don't use Berkshelf.
[2014-07-02 09:09:50 -0400] vic3lord: if it would have handled berksfile it would be awesome
[2014-07-02 09:10:39 -0400] jonlives: vic3lord: the issue for berkshelf 3 support is at https://github.com/jonlives/knife-spork/issues/109 if you wanna add any comments / suggestions etc :)
[2014-07-02 09:11:29 -0400] vic3lord: Wow thanks :)
[2014-07-02 09:11:58 -0400] jonlives: code always welcome too of course ;)
[2014-07-02 09:12:24 -0400] vic3lord: I will follow this issue
[2014-07-02 09:12:38 -0400] vic3lord: of course i will contribute if i see fit
[2014-07-02 09:12:42 -0400] jonlives: awesome!
[2014-07-02 10:05:24 -0400] pluesch0r: hi everybody. when using chef -r .. is there a way to have chef NOT clean up the cache for recipes not contained in the run?
[2014-07-02 10:10:46 -0400] pluesch0r: aeh .. i mean chef-client -o, of course. as in chef-client -o dhcp_server
[2014-07-02 11:40:15 -0400] databus23: Hi chefs! Can anybody point me to an example on how to run individual ohai plugins programmatically with ohai 7.x?
[2014-07-02 11:41:54 -0400] databus23: With ohai 6 it used to be something like o = Ohai::System.new, o.require_plugin 'plugin_name'. But this fails on ohai 7 with "Ohai::Exceptions::DependencyNotFound: Can not find a plugin for [plugin_name]"
[2014-07-02 12:04:53 -0400] whiteadam: cofee do yes end
[2014-07-02 12:31:53 -0400] bmurt: is there some initial testing that can be done to go from 10.14.4 to 11.x to check compatability?
[2014-07-02 12:32:22 -0400] bmurt: obvious there's still a step of spinning up a vm w/ chef 11.x and initiating a run to see what breaks
[2014-07-02 12:32:29 -0400] bmurt: i wasn
[2014-07-02 12:32:39 -0400] bmurt: i wasn't sure if there were some key items to address in the upgrade
[2014-07-02 12:34:21 -0400] whiteadam: Open Source Server you mean?
[2014-07-02 12:34:52 -0400] jonlives: bmurt: if you mean chef-client, when we did the upgrade the only major thing we ran into was http://www.getchef.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2014-07-02 12:35:00 -0400] jonlives: having to specifically set attribute levels in a few places
[2014-07-02 12:35:26 -0400] bmurt: whiteadam: i believe so
[2014-07-02 12:35:37 -0400] bmurt: fairly certain $newjob isn't paying for a hosted version
[2014-07-02 12:35:42 -0400] whiteadam: bmurt: lol
[2014-07-02 12:35:48 -0400] jonlives: bmurt: if it's the server, it's backwards compatible
[2014-07-02 12:35:59 -0400] bmurt: oh nice
[2014-07-02 12:36:14 -0400] bmurt: the one thing trying to get me to them to move to 11.x is the local mode
[2014-07-02 12:36:24 -0400] jonlives: local mode is pretty sweet
[2014-07-02 12:36:24 -0400] whiteadam: bmurt: I meant, are you upgrading the server or just the clients
[2014-07-02 12:36:30 -0400] jonlives: bmurt: but that's the client tho
[2014-07-02 12:36:59 -0400] bmurt: im guessing clients because the only chef server i'm aware of is used as a vagrant vm when spinning up new environments
[2014-07-02 12:37:02 -0400] whiteadam: yeah, I might have to use local mode for some clients.. PCI 3 puts the Chef Server in-scope, boooo
[2014-07-02 12:37:08 -0400] bmurt: i don't think there's an overall chef server managing shit
[2014-07-02 12:37:12 -0400] bmurt: which irks me as well
[2014-07-02 12:37:17 -0400] bmurt: so there's no consistent state
[2014-07-02 12:37:49 -0400] whiteadam: bmurt: That's how things always are when you come in. The client gets a good idea, then only gets half-way and just messes everything up
[2014-07-02 12:38:15 -0400] bmurt: if i can get the client in vagrant up from 10.14.4 to 11.x to utilize local mode, i can drop that chef server and #1 remove that VM from the picture which will save time and resources for environments
[2014-07-02 12:38:30 -0400] jonlives: bmurt: so when you run chef on a node, are you using chef-solo?
[2014-07-02 12:38:33 -0400] bmurt: its a little goofy setup, but starting to make some sense
[2014-07-02 12:38:47 -0400] bmurt: i'd like to jonlives, but chokes on search()
[2014-07-02 12:39:02 -0400] jonlives: bmurt: oh nm, you said there *was* a server. misread.
[2014-07-02 12:39:14 -0400] bmurt: so the chef server is provisioned first in vagrant via chef_solo, all additional vagrant VM's (7-9) use chef_client
[2014-07-02 12:39:37 -0400] jonlives: aaaah
[2014-07-02 12:39:43 -0400] jonlives: so there's no permanent chef server, gotcha
[2014-07-02 12:39:53 -0400] jonlives: that's...an interesting way of doing it :p
[2014-07-02 12:40:07 -0400] bmurt: yeah
[2014-07-02 12:40:21 -0400] bmurt: but i can't drop that chef server until chef_solo works or local mode is implemented and sorted
[2014-07-02 12:40:33 -0400] jonlives: so basically, you can upgrade chef chef server part without upgrading the clients.
[2014-07-02 12:40:52 -0400] jonlives: upgrading the clients *should* be ok without upgrading the server first, but I'd go with a server upgrade to be safe.
[2014-07-02 12:41:27 -0400] bmurt: yeah, if anything, just to test the current chef code with 11.x would be server then clients
[2014-07-02 12:41:33 -0400] jonlives: yeah
[2014-07-02 12:41:42 -0400] bmurt: then running provisioning for each node to see what works & what doesn't
[2014-07-02 12:41:52 -0400] bmurt: i think 11.x is also faster than 10.14.x?
[2014-07-02 12:41:56 -0400] jonlives: vastly
[2014-07-02 12:41:57 -0400] bmurt: im coming from puppet
[2014-07-02 12:42:06 -0400] jonlives: 11.x is a total rewrite of the old ruby server in erlang
[2014-07-02 12:42:12 -0400] jonlives: client is still ruby, thol
[2014-07-02 12:42:13 -0400] jonlives: *tho
[2014-07-02 12:42:21 -0400] bmurt: so im learning a new platform plus trying to change the world
[2014-07-02 12:42:23 -0400] bmurt: :)
[2014-07-02 12:42:24 -0400] jonlives: hehe
[2014-07-02 12:42:26 -0400] whiteadam: lol
[2014-07-02 12:43:04 -0400] bmurt: if the chef code base can run under 11.x under minimal changes, there's a benefit to that if the chef local mode, etc. take longer to implement
[2014-07-02 12:43:22 -0400] bmurt: granted, the chef server would still remain, but the next step would be to focus on removing that
[2014-07-02 12:45:08 -0400] jonlives: bmurt: I'm guessing you're thinking of local mode for search?
[2014-07-02 12:45:08 -0400] jonlives: rather than chef-solo
[2014-07-02 12:45:09 -0400] bmurt: ya
[2014-07-02 12:45:09 -0400] jonlives: bmurt: the problem is there, you need to populate each individual local mode server
[2014-07-02 12:45:10 -0400] bmurt: well, chef_solo will require some additional plugins
[2014-07-02 12:45:11 -0400] jonlives: to have consistent search results
[2014-07-02 12:45:11 -0400] bmurt: im honestly not sure what is the best way to address it
[2014-07-02 12:45:12 -0400] jonlives: you'd basically be running a mini server on each node
[2014-07-02 12:45:12 -0400] jonlives: bmurt: my recommendation would be either to go with a proper permenant chef server, or go with chef-solo.
[2014-07-02 12:45:13 -0400] jonlives: if you need consistent search across all local mode instances, you basically need a central server.
[2014-07-02 12:45:14 -0400] bmurt: if i go with chef_solo, i need to implement https://github.com/edelight/chef-solo-search
[2014-07-02 12:45:18 -0400] jonlives: bmurt: let's backtrack slightly - why get rid of the server?
[2014-07-02 12:45:28 -0400] bmurt: takes forever to build
[2014-07-02 12:45:33 -0400] bmurt: on the box
[2014-07-02 12:45:58 -0400] jonlives: bmurt: I'd recommend building a dedicated chef server that you don't tear down.
[2014-07-02 12:45:59 -0400] bmurt: in my puppet career, i used different yaml configs for each env which were referenced
[2014-07-02 12:46:24 -0400] bmurt: this is what i run into https://gist.github.com/bmurtagh/930b04c798e172cf0bd5 for chef_solo
[2014-07-02 12:46:30 -0400] jonlives: it sounds like the functionality you need is best provided by chef-server
[2014-07-02 12:46:48 -0400] bmurt: but my lack of knowledge w/ chef, etc. im not sure how to fix with a chef-solo-search
[2014-07-02 12:46:49 -0400] whiteadam: bmurt: Yeah, when I did Puppet, I used the whole YAML Heira thing and liked it.
[2014-07-02 12:46:55 -0400] bmurt: yeah, hiera
[2014-07-02 12:46:59 -0400] bmurt: that's the one
[2014-07-02 12:47:09 -0400] jonlives: bmurt: honestly, if you *need* search, I'd stick with chef server
[2014-07-02 12:47:17 -0400] jonlives: just maybe don't build it up and tear it down every time
[2014-07-02 12:47:26 -0400] bmurt: that's how the env's are built
[2014-07-02 12:47:29 -0400] bmurt: you'll love this:
[2014-07-02 12:47:31 -0400] jonlives: build one, keep it, and have a node cleanup process for when nodes are torn down
[2014-07-02 12:48:20 -0400] bmurt: base hardware/server => ubuntu 12.04 => vagrant => 7-9 vagrant VMs one being a chef server and the group of vagrant VMs running under a certain env "qa, qa2, qa3, etc."
[2014-07-02 12:48:32 -0400] jonlives: bmurt: is it within your power to change the way envs are built?
[2014-07-02 12:48:41 -0400] bmurt: with a lot of discussion
[2014-07-02 12:48:43 -0400] bmurt: a lot a lot
[2014-07-02 12:48:49 -0400] bmurt: i'm only 1.5months in
[2014-07-02 12:48:51 -0400] bmurt: :/
[2014-07-02 12:49:04 -0400] jonlives: bmurt: your other option, if you use local mode or solo-search is to populate the search indexes manually. solo search uses databags, local mode uses json files.
[2014-07-02 12:49:18 -0400] bmurt: they were running with vagrant 1.0.7 and v1 config and all inline config
[2014-07-02 12:49:36 -0400] bmurt: jonlives: my question is, looking at my gist, how do i do that?
[2014-07-02 12:49:49 -0400] bmurt: i don't mind using https://github.com/edelight/chef-solo-search if i can get the chef_solo benefit
[2014-07-02 12:49:59 -0400] bmurt: i just don't follow the steps, etc. to implement
[2014-07-02 12:50:34 -0400] jonlives: bmurt: so it looks like solo-search requires you to build a databag with the data to be "searched"
[2014-07-02 12:50:50 -0400] jonlives: and it then lets you use that data in recipes with normal search queries.
[2014-07-02 12:51:06 -0400] bmurt: https://github.com/edelight/chef-solo-search#supported-queries spooked me a bit
[2014-07-02 12:51:27 -0400] bmurt: since im unfamiliar with all of it, im not sure if i'd had to rewrite search queries from recipes, etc.
[2014-07-02 12:51:34 -0400] jonlives: bmurt: given that you're relatively new at this, I'd honestly recommend either sticking with a chef server, or refactoring recipes to remove the need for search and using chef-solo
[2014-07-02 12:51:57 -0400] jonlives: cos what you want to do is possible, but not supported out of the box - hence will require poking and tweaking etc
[2014-07-02 12:52:34 -0400] bmurt: can i use chef to install puppet? :D
[2014-07-02 12:52:37 -0400] jonlives: :D
[2014-07-02 12:52:48 -0400] jonlives: bmurt: I couldn't possibly advocate such a course of action :p
[2014-07-02 12:52:56 -0400] bmurt: lol
[2014-07-02 12:53:10 -0400] bmurt: im trying to get some good improvements with least impact
[2014-07-02 12:53:21 -0400] bmurt: i think even getting from 10.14.4 to 11.x is a win
[2014-07-02 12:53:32 -0400] jonlives: bmurt: yeah in your case, I'd shoot for upgrading the server and clients at least
[2014-07-02 12:53:33 -0400] bmurt: plus the new vagrantfile config that's cleaned up
[2014-07-02 12:53:43 -0400] bmurt: then continue to chip away
[2014-07-02 12:55:36 -0400] jonlives: yeah
[2014-07-02 12:55:46 -0400] jonlives: incremental improvements are the way to go.
[2014-07-02 12:55:56 -0400] jonlives: that way, you learn along the way too instead of trying to do everything at once
[2014-07-02 12:56:21 -0400] luca3m: hi, i'm trying to use deploy_revision to deploy a padrino app. I declare "symlinks( "log" => "log", "tmp" => "tmp", "vendor" => "vendor")" to declare my directories that need to be symlinked from shared. But chef doesn't create these directory under shared. And so symlinks are broken
[2014-07-02 12:56:43 -0400] Cope: shit! chef sucks!
[2014-07-02 12:56:52 -0400] luca3m: what's the better way to create these directories? On deploy resource documentation I don't find anything about this
[2014-07-02 12:57:14 -0400] whiteadam: Cope: right!>
[2014-07-02 12:57:20 -0400] jonlives: let's all join the circus.
[2014-07-02 12:57:31 -0400] whiteadam: +1
[2014-07-02 12:58:13 -0400] ericReeves: Back to shell scripts!
[2014-07-02 12:58:20 -0400] ericReeves: Abandon ship.
[2014-07-02 12:58:25 -0400] whiteadam: Cope: When you gonna update leibniz?
[2014-07-02 12:58:47 -0400] whiteadam: ericReeves: Let's make our ZSH and BASh scripts do battle!
[2014-07-02 12:59:31 -0400] Cope: whiteadam: aha! well, actually, real soon now.  I have time.
[2014-07-02 12:59:52 -0400] Cope: i also have some stuff to merge from a client who's on a private branch
[2014-07-02 13:00:05 -0400] whiteadam: Cope: DO IT. I don't know what I'm doing yet, but I have big dreams for making acceptance tests so that the non-technicals know what I'm doing.
[2014-07-02 13:00:09 -0400] whiteadam: oooh
[2014-07-02 13:00:29 -0400] Cope: awesome; yeah... I have time to write and code
[2014-07-02 13:00:50 -0400] bmurt: jonlives: thanks for the info
[2014-07-02 13:00:51 -0400] bmurt: whiteadam: you too
[2014-07-02 13:00:53 -0400] Cope: atm i'm having a bit of a break, and enjoying the sun, the garden, and the family
[2014-07-02 13:00:55 -0400] jonlives: bmurt: np!
[2014-07-02 13:01:13 -0400] bmurt: are they truly your family or is it your second family that you like more?
[2014-07-02 13:01:18 -0400] whiteadam: Cope: I've got that next week... think it's next week
[2014-07-02 13:01:21 -0400] whiteadam: lol
[2014-07-02 13:01:27 -0400] Cope: hehe, actually real family :)
[2014-07-02 13:02:00 -0400] Cope: but yeah, the next thing is more writing and open source code
[2014-07-02 13:15:40 -0400] Shubby: hey guys -- does the template resource overwrite files that already exist? or should I first check if a file exists, if yes delete it, and then push my file instead?
[2014-07-02 13:17:02 -0400] jessemdavis: Cope: fyi, i've been enjoying the test-driven infrastructure book
[2014-07-02 13:17:38 -0400] jessemdavis: thanks for writing that
[2014-07-02 13:18:22 -0400] Cope: great! it needs to be updated! new things and things changed! 3rd edition maybe? :))
[2014-07-02 13:18:54 -0400] jessemdavis: yeah, i have one of the galley copies :)
[2014-07-02 13:18:59 -0400] Cope: Shubby: the template resource will render a file if the contents would change
[2014-07-02 13:19:37 -0400] Cope: Shubby: so if the file already exists, it will be overwritten if the new file would be different from the existing one.
[2014-07-02 13:19:42 -0400] Cope: otherwise it won't make a change
[2014-07-02 13:19:47 -0400] Shubby: got it, that makes sense
[2014-07-02 13:19:47 -0400] Shubby: thanks
[2014-07-02 13:24:42 -0400] whiteadam: Cope: Yeah, update it or else!
[2014-07-02 13:26:40 -0400] bixu: Can someone tell me how omnibus chef set its PATH environment variable?
[2014-07-02 13:37:00 -0400] thorduri: for directory resources, is it a known issues that the directory does not get chown'ed correctly unless there is a mode set in the stanza ?
[2014-07-02 13:37:29 -0400] thorduri: Not sure if I'm doing something wrong (by omitting it, the documentation isn't clear) but the stanza i'm using is very simple (copy paste out of the example).
[2014-07-02 13:41:35 -0400] Cope: bixu: https://github.com/opscode/omnibus-chef/blob/master/package-scripts/chef/postinst#L83-L98
[2014-07-02 13:42:47 -0400] bixu: Cope: That's not quote what I mean, I think.
[2014-07-02 13:43:14 -0400] bixu: I mean that I'm getting errors where chef can't find a binary and I want to know where Chef is getting its PATH from...
[2014-07-02 13:44:29 -0400] bmalee: I should think it depends where youre running chef from.
[2014-07-02 13:45:02 -0400] bixu: bmalee: That's true.  It might be inherited from service management.
[2014-07-02 13:49:57 -0400] Cope: bixu: chef just gets its path from the environment; the point I am making is the post install script simply symlinks to a place that should be on your path anyway
[2014-07-02 13:50:10 -0400] Cope: ie it doesn't make any change to your path
[2014-07-02 13:50:43 -0400] Cope: or to put it differently - chef (and omnibus) don't know anything about your path :)
[2014-07-02 13:51:17 -0400] bixu: Cope: Sure.  But since the behavior I'm seeing is that PATH is correct for interactive runs of chef-client and not for daemonized runs, I want to know how it's getting the env var.
[2014-07-02 13:52:25 -0400] Cope: right
[2014-07-02 13:52:46 -0400] Cope: so how are you daemonising chef? are you using the chef-client cookbook?
[2014-07-02 13:53:24 -0400] bixu: Yes.  And it looks like there is a bug there, which I just found.
[2014-07-02 13:53:47 -0400] Cope: ooh excellent
[2014-07-02 13:53:50 -0400] bixu: I'm on SmartOS in this particular case, so some binaries are in /opt/local/(s)bin
[2014-07-02 13:54:22 -0400] bixu: But here's what's the cookbook is configuring for the chef-client service: PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
[2014-07-02 13:54:33 -0400] bixu: So yeah, that's gonna break.
[2014-07-02 13:54:41 -0400] JoelMcCracken: i notice resources in my cookbooks are named "<cookbook_name>_resource". Is there some way to drop the "<cookbook_name>" part?
[2014-07-02 13:55:12 -0400] JoelMcCracken: i mean, besides doing it manually, i guess.
[2014-07-02 13:55:22 -0400] rsavage_: Wow... SmartOS... never knew anyone using that.  Pretty cool.
[2014-07-02 13:55:32 -0400] rsavage_: Basically Solaris 11 minimal :)
[2014-07-02 13:57:29 -0400] billyoung: is anyone still using @fnichol's knife-server plugin to bootstrap a fresh chef-server ?
[2014-07-02 13:57:30 -0400] whiteadam: That's the one joynet uses right?
[2014-07-02 13:57:48 -0400] bixu: whiteadam & rsavage_: you are both partly right :)
[2014-07-02 13:57:49 -0400] bixu: https://www.youtube.com/watch?v=-zRN7XLCRhc
[2014-07-02 13:58:18 -0400] bixu: whiteadam: Joyent maintains it, although it's fully open-source, so you can run it elsewhere.
[2014-07-02 13:58:35 -0400] whiteadam: I wish more people used ZFS.
[2014-07-02 13:59:00 -0400] whiteadam: I looked at building a ZFS NAS once and the specs for the price were insanse
[2014-07-02 13:59:04 -0400] whiteadam: insane*
[2014-07-02 14:00:09 -0400] rsavage_: I wished they still sold 'thumpers'
[2014-07-02 14:00:10 -0400] bixu: whiteadam: You can run ZFS on illumos, freebsd and linux distros now...
[2014-07-02 14:00:53 -0400] whiteadam: oooooo
[2014-07-02 14:00:57 -0400] whiteadam: I need to read more
[2014-07-02 14:07:32 -0400] ssd7: Ohai Chefs
[2014-07-02 14:09:02 -0400] dwradcliffe: is it normal to get 500/502/503 errors from hosted chef 1/10 runs?
[2014-07-02 14:09:35 -0400] whiteadam: ohai
[2014-07-02 14:11:22 -0400] ssd7: dwradcliffe: The goal is that Hosted Chef would emit 0 5XX response codes unless we told it to (maint. mode, etc).  But sometimes you will get them.  If you shot an email to support@ they can potentially look into it for you.  If you want to put an example in a gist, I can also look into it now.
[2014-07-02 14:11:36 -0400] ssd7: s/shot/shoot/
[2014-07-02 14:12:46 -0400] dwradcliffe: ssd7: sure. I was just reviewing the failures in the run history and they are all due to server errors :(
[2014-07-02 14:13:05 -0400] dwradcliffe: ssd7: would a list of run IDs and errors help?
[2014-07-02 14:14:54 -0400] ssd7: dwradcliffe: Hrm, I'm not sure if I'm able to see run IDs in our logs, they can't hurt though.  If you want to just PM me your org name, I can probably just find your errors based on that
[2014-07-02 14:26:02 -0400] fbrier: I am trying to isolate a node behind a firewall, but want chef to manage the node.  Initially, I bootstrapped the node, put a firewall around it allowing 443 back to the chef server.  That seemed to work fine.  But I just blew away the node and recreated it with the firewall. When I attempted to bootstrap the node I got an error: WARN: Failed to read the private key /etc/chef/validation.pem: #<Errno::ENOENT: No such file or directory -
[2014-07-02 14:26:37 -0400] fbrier: Is bootstrap using scp or a different port to copy the validation key over?
[2014-07-02 14:28:09 -0400] ssd7: fbrier: The key is moved over using SSH.  It is kinda hacky, the key is basically rendered directly into the command that is run on bootstrap
[2014-07-02 14:30:15 -0400] fbrier: So I would need to open ssh back to the chef-server...?
[2014-07-02 14:31:46 -0400] ssd7: fbrier: Apologies, I was a bit unclear.  Using the standard bootstrap (knife bootstrap) the key is transfered via ssh from your workstation to the node.
[2014-07-02 14:32:30 -0400] ssd7: So you don't need ssh from the node to the chef server at all
[2014-07-02 14:32:50 -0400] fbrier: How secure is Chef?  If one of its nodes is exposed to the Internet and it is compromised, are there exploits that would take advantage of the chef-server's port 443?  The exposed machine follows best practices of running server processes as a non-root user.
[2014-07-02 14:35:04 -0400] fbrier: Excellent.  Okay.  I'm an idiot.  It is early in the morning and I haven't finished my first cup of coffee.
[2014-07-02 14:35:41 -0400] ssd7: fbrier: That question might be better answered over email, but here is the short version.  We work to make sure that the Chef Server isn't exploitable by external users.  Occasionally libraries we use have security vulnerabilites, but we work to patch these quickly when they are announced.  If a node is compromised and the attacker is able to use the client key to pose as a client, your biggest concern is whether that client has access to sensiti
[2014-07-02 14:36:10 -0400] ssd7: It is important to think about what information your nodes have access to and what it would mean if that information was leaked to an attacker who compromised a node.
[2014-07-02 14:37:09 -0400] ssd7: You can use features like encrypted data bags or (in Enterprise Chef) the RBAC system to segment access to various pieces of sensitive information.
[2014-07-02 14:37:29 -0400] fbrier: So if you had passwords in the attributes of a node, the attacker now has those keys.
[2014-07-02 14:37:57 -0400] ssd7: fbrier: Yes. That is exactly the type of risk to think about.
[2014-07-02 14:38:10 -0400] fbrier: Got it.  Very helpful.
[2014-07-02 14:38:30 -0400] fbrier: I am really starting to have a lot of fun with Chef and I just started.
[2014-07-02 14:39:32 -0400] ssd7: fbrier: Cool, glad to hear it.  If you are interested in secrets management, I know a lot of people are using chef-vault, might be worth looking into.
[2014-07-02 14:39:54 -0400] fbrier: Initially it was frustrating, because even with books, there is so much to know.  Fortunately, a couple of people in the community have shown me the ropes.
[2014-07-02 14:40:12 -0400] fbrier: chef-vault.  Will look at it.
[2014-07-02 14:40:54 -0400] dwradcliffe: chef-vault is pretty slick :) we use it for all our secrets
[2014-07-02 14:42:03 -0400] fbrier: I just exposed a postfix-dovecot cookbook created node as my mail server and a lamp node as a web server, and am working on minecraft server for my son.
[2014-07-02 14:43:38 -0400] fbrier: I use Redhat KVM and have been playing with libvirt's nwfilter feature.  It allows you to setup different firewall rules on the interface of each node, in addition to the firewall rules on the node.
[2014-07-02 14:44:22 -0400] fbrier: So I open ports on the node rules, but wall the node from the rest of the network using nwfilter rules.
[2014-07-02 14:45:23 -0400] aliljet: whhhattt.. chef isn't going to support an open version?
[2014-07-02 14:45:48 -0400] ssd7: aliljet: ?
[2014-07-02 14:46:16 -0400] aliljet: ssd7: happened to be in a meeting where this came up from a good engineer -- guess he was wrong
[2014-07-02 14:47:30 -0400] ssd7: aliljet: He might be refering to a recent blog post by a community member.  The blog post raises some issues Noah has with how the community is run.  The post has an inflamatory title to get attention to an important issue, but rest assured, Chef is still released under and open source liscense
[2014-07-02 14:47:56 -0400] jperry: ohai folks!
[2014-07-02 14:48:22 -0400] jperry: juliancdunn: you around?
[2014-07-02 14:48:28 -0400] jperry: got a question around wrapper cookbooks
[2014-07-02 14:48:33 -0400] fbrier: Thank you ssd7 and dwradcliffe.
[2014-07-02 14:50:29 -0400] Ivan_: Help bootstrap "Invalid signature for user or client 'chef-validator'"
[2014-07-02 14:50:30 -0400] jperry: wanted to get folks opinion on using wrapper cookbooks
[2014-07-02 14:50:40 -0400] jperry: say for example I am using the community users cookbook
[2014-07-02 14:51:21 -0400] jperry: is it kosher to wrap that cookbook to add additional functionality as well have recipes in my wrapper cookbook that create users for my company?
[2014-07-02 14:51:32 -0400] jperry: or should I break that out into a separate cookbook that uses the wrapper cookbook
[2014-07-02 14:51:33 -0400] bmurt: jonlives and/or whiteadam: i forgot to ask earlier, is it safe to go from 10.14.4 to 11.x or is there a better upgrade path?
[2014-07-02 14:52:31 -0400] jonlives: bmurt: should be ok, check out the chef 11 release posts like http://www.getchef.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/ tho
[2014-07-02 14:52:39 -0400] jonlives: to let you know of any changes you might run into
[2014-07-02 14:52:49 -0400] bmurt: ok
[2014-07-02 14:52:58 -0400] bmurt: im currently reading http://docs.opscode.com/breaking_changes_chef_11.html
[2014-07-02 14:53:09 -0400] bmurt: i just didn't know if we need to go 10.14 to 10.18, etc.
[2014-07-02 14:53:14 -0400] jonlives: ah perfect, that was what I was looking for to send you :p
[2014-07-02 14:53:15 -0400] bmurt: or another path was recommended
[2014-07-02 14:53:31 -0400] jonlives: bmurt: nah nah if you have that post in mind, upgrading straight to 11 should be fine
[2014-07-02 14:53:37 -0400] bmurt: ok
[2014-07-02 14:53:40 -0400] bmurt: ty
[2014-07-02 14:54:03 -0400] Ivan_: Is chef-validator key (server ui) the same as a client's validator.pem ?
[2014-07-02 14:54:56 -0400] dwradcliffe: jperry: I'd say either is probably fine. We usually do both in the same cookbook since there isn't a ton of additional stuff.
[2014-07-02 14:54:58 -0400] fbrier: jperry - May I ask what community cookbook you are using to create users?
[2014-07-02 14:55:35 -0400] jperry: the opscode community users cookbook
[2014-07-02 14:56:05 -0400] jperry: https://github.com/sethvargo-cookbooks/users
[2014-07-02 14:56:33 -0400] jperry: havent started with it but we had an internal cookbook called users
[2014-07-02 14:56:37 -0400] jperry: which we need to move out to the way
[2014-07-02 14:56:41 -0400] jperry: and bring in the community cone
[2014-07-02 14:57:08 -0400] fbrier: jperry - thank you.
[2014-07-02 14:57:26 -0400] dwradcliffe: jperry: also, we usually just prefix ours with company name. "acme-users"
[2014-07-02 14:57:40 -0400] fbrier: So you haven't used this cookbook yet?
[2014-07-02 15:01:35 -0400] jhayden: trying to install open source chef-server 11 on an AWS EC2 (redhat) and it seems to work ok
[2014-07-02 15:02:26 -0400] jhayden: I then login as admin with p@ssw0rd1 and I never get to the admin edit page, it seems to be getting a 302 redirect back to login page
[2014-07-02 15:02:35 -0400] jhayden: any ideas what I can look for?
[2014-07-02 15:03:31 -0400] ssd7: jhayden: I /think/ it has something to do with hostnames and CSRF validation checks
[2014-07-02 15:03:42 -0400] Ivan_: Is chef-validator key (server ui) the same as a client's validator.pem ?
[2014-07-02 15:04:54 -0400] ssd7: jhayden: What name are you using to hit the webui?  Does it work if you use the IP directly?
[2014-07-02 15:05:25 -0400] jhayden: ssd7: Itried setting the hostname the same as the public url but let me try the ip address
[2014-07-02 15:05:48 -0400] Ivan_: Question: bootstrap "Invalid signature for user or client 'chef-validator'" ...
[2014-07-02 15:06:08 -0400] allaire: Anybody can give me a hint about the equivalent of this command, using some Chef LWRP: https://gist.github.com/allaire/77d2f2e2bf0a7c6b8092
[2014-07-02 15:07:04 -0400] dwradcliffe: allaire: try user root?
[2014-07-02 15:07:33 -0400] allaire: dwradcliffe: thing is, somehow, when I run it manually with sudo, it chown the directories it creates with the user I'm running the command with
[2014-07-02 15:08:29 -0400] danryan: allaire: `myuser` without sudo can't write to /root since it's owned by root
[2014-07-02 15:09:01 -0400] danryan: allaire: I left a comment on your gist
[2014-07-02 15:09:03 -0400] allaire: danryan: Somehow, using the sudo command with -H, it drops a directory that is chowned to the the `myuser` app
[2014-07-02 15:10:52 -0400] danryan: allaire: I'm not sure I understand your intention. What are you trying to do, what is your expected outcome?
[2014-07-02 15:12:48 -0400] allaire: danryan: If I install npm under root, I'll need to always run it using sudo I suppose?
[2014-07-02 15:13:14 -0400] danryan: allaire: right, I think that's a fair assumption
[2014-07-02 15:13:21 -0400] Ivan_: Question: bootstrap "Invalid signature for user or client 'chef-validator'" ...
[2014-07-02 15:13:27 -0400] whiteadam: allaire: You want -H to use the home of myuser?
[2014-07-02 15:13:35 -0400] whiteadam: allaire: err, root i mean
[2014-07-02 15:13:52 -0400] allaire: whiteadam: I'm trying to follow the instructions here: https://github.com/oortcloud/meteorite#note
[2014-07-02 15:13:59 -0400] allaire: But I keep running into some permissions issues
[2014-07-02 15:14:19 -0400] allaire: But I'm currently trying to run "mrt" without sudo
[2014-07-02 15:14:33 -0400] allaire: https://github.com/oortcloud/meteorite#permission-woes
[2014-07-02 15:15:17 -0400] jhayden: ssd7: ok, got a little further with ip address instead of a url
[2014-07-02 15:15:44 -0400] allaire: I don't get it, what's the different between meteorite with sudo -H vs isntalling it under the root user
[2014-07-02 15:16:00 -0400] jhayden: I now get a connection timeout going to user/admin
[2014-07-02 15:16:05 -0400] allaire: I know  there's a difference, since I run into some permission issues with the second option
[2014-07-02 15:16:20 -0400] jhayden: I think I need to open some ports on security group! ;-)
[2014-07-02 15:16:26 -0400] Ivan_: Is there an expert in bootstrap ?
[2014-07-02 15:16:28 -0400] whiteadam: allaire: Might be how you have the permissions set up in the sudoers file and such
[2014-07-02 15:16:46 -0400] whiteadam: allaire: try "man sudo" and read the info for -H
[2014-07-02 15:19:14 -0400] fivetwentysix: How do you get keys to work for ppa using the apt cookbook?
[2014-07-02 15:19:25 -0400] bixu: what does this error mean when i try to run tests that come with a cookbook? "NameError: uninitialized constant Rubocop"
[2014-07-02 15:19:56 -0400] heathsnow: Rubocop is a linting tool for Ruby code
[2014-07-02 15:20:53 -0400] heathsnow: bixu:  https://github.com/bbatsov/rubocop
[2014-07-02 15:21:27 -0400] gondoi: someara: with supermarket out.... can we submit a PR to the cron cookbook without worrying about a JIRA ticket at this point?
[2014-07-02 15:21:49 -0400] gondoi: contributing.md states otherwise, but I'm wanting to clarify
[2014-07-02 15:22:21 -0400] bixu: heathsnow: Sure, but why the error.
[2014-07-02 15:22:23 -0400] bixu: ?
[2014-07-02 15:22:37 -0400] bixu: I have rubocop in my Gemfile for this cookbook, and I've already bundled.
[2014-07-02 15:22:46 -0400] whiteadam: bixu: It's probably trying to call something from it and it's not installed
[2014-07-02 15:22:49 -0400] whiteadam: bixu: or not
[2014-07-02 15:23:34 -0400] bixu: i can't even do rake -T without seeing this error
[2014-07-02 15:23:53 -0400] cheeseplus: bixu: are you doing a "bundle exec rake -T"?
[2014-07-02 15:23:56 -0400] whiteadam: bixu: what's the output of 'which rubocop'
[2014-07-02 15:23:57 -0400] Guest49640: Is there an expert in bootstrap ? I got a "Invalid signature for user or client 'chef-validator'" during initial bootstrap process.
[2014-07-02 15:24:05 -0400] heathsnow: bixu: can you execute rubocop from the cookbook dir?
[2014-07-02 15:24:38 -0400] bixu: heathsnow: I can bundle exec execute it, yes
[2014-07-02 15:24:41 -0400] whiteadam: Guest49640: Do you have the chef-validator specified in your knife.rb?
[2014-07-02 15:25:58 -0400] Guest49640: Yes ... validation_client_name    'chef-validator'
[2014-07-02 15:26:11 -0400] gyoza: good morning irc..
[2014-07-02 15:26:21 -0400] whiteadam: sup gyoza
[2014-07-02 15:26:27 -0400] gyoza: not much!
[2014-07-02 15:26:32 -0400] gyoza: boss gave us half the day off tomorrow
[2014-07-02 15:26:40 -0400] gyoza: (i think its because he wants the early day off)
[2014-07-02 15:26:47 -0400] gyoza: and they are fair to us
[2014-07-02 15:26:51 -0400] gyoza: so we win!
[2014-07-02 15:27:05 -0400] whiteadam: Guest49640: Do you have: validation_key           "#{current_dir}/chef-validator.pem
[2014-07-02 15:28:55 -0400] Guest49640: No I don't should I ?
[2014-07-02 15:29:09 -0400] chef866: I am looking for help with recipe variables.  Trying to do something like this:  if OS = OSX then user_home = /User/(username) else if OS = linux user_home = /home/(username).       I have a case statement working to detect OS.  Think I need something like this for linux   user_home = "/home/#{[:user]}"   Can anyone help with the correct syntax?
[2014-07-02 15:30:05 -0400] cheeseplus: chef866: you want to case for plafrom or platform_family
[2014-07-02 15:30:58 -0400] cheeseplus: chef866: here is an example in a cookbook of platform
[2014-07-02 15:30:59 -0400] cheeseplus: https://github.com/basho/riak-chef-cookbook/blob/develop/recipes/package.rb#L26
[2014-07-02 15:31:14 -0400] Guest49640: Sorry I saw that I have validation_key            'c:/chef/validation.pem'
[2014-07-02 15:31:53 -0400] cheeseplus: chef866: also the docs http://docs.opscode.com/dsl_recipe_method_platform_family.html
[2014-07-02 15:32:08 -0400] whiteadam: Guest49640: try: knife ssl check
[2014-07-02 15:33:16 -0400] Guest49640: I am using winrm
[2014-07-02 15:35:02 -0400] Guest49640: Is chef-validator key (server ui) supposed to be the same as a client's validator.pem ?
[2014-07-02 15:35:11 -0400] someara: gondoi yep... we're updating the CONTRIBUTING, writing blog posts, etc right now
[2014-07-02 15:35:50 -0400] whiteadam: Guest49640: no clue about all that
[2014-07-02 15:37:12 -0400] gondoi: someara: awesome thanks
[2014-07-02 15:39:04 -0400] cheeseplus: Guest49640: knife ssl check should still work, it's verify communication between client and server
[2014-07-02 15:41:56 -0400] bixu: Despite running 'berks install' I still get a message that my lockfile is out of sync...
[2014-07-02 15:42:00 -0400] bixu: Anyone know why?
[2014-07-02 15:42:19 -0400] whiteadam: cuz your lockfile is out of sync dog
[2014-07-02 15:42:58 -0400] gyoza: lol
[2014-07-02 15:42:59 -0400] bixu: whiteadam: I removed all the entries in the lockfile related to my cookbook and tried 'berks install' again and I still see this error.
[2014-07-02 15:43:02 -0400] gyoza: you're the man now dog
[2014-07-02 15:43:43 -0400] gyoza: bixu: i had that problem when my ruby environment was not sane
[2014-07-02 15:43:57 -0400] bixu: gyoza: Meaning?
[2014-07-02 15:44:09 -0400] gyoza: bixu: meaning that your ruby environment may be jacked up
[2014-07-02 15:44:42 -0400] gyoza: http://misheska.com/blog/2013/12/26/set-up-a-sane-ruby-cookbook-authoring-environment-for-chef/
[2014-07-02 15:44:49 -0400] gyoza: if you have to start over
[2014-07-02 15:44:51 -0400] bixu: Ha.  I think I need a slightly more technically specific description than 'jacked up' if I'm going to troubleshoot this.
[2014-07-02 15:44:54 -0400] whiteadam: bixu: What you got when you do: which ruby and ruby -v
[2014-07-02 15:45:05 -0400] gyoza: bixu: sorry :)
[2014-07-02 15:45:09 -0400] whiteadam: I dunno, jacked up is a pretty good way to describe
[2014-07-02 15:45:09 -0400] bixu: which ruby == /Users/irvin/.rbenv/shims/ruby
[2014-07-02 15:45:24 -0400] whiteadam: what about rbenv local
[2014-07-02 15:45:28 -0400] bixu: ruby --version is ruby 2.0.0p451 (2014-02-24 revision 45167) [x86_64-darwin13.2.0]
[2014-07-02 15:45:49 -0400] bixu: whiteadam: I'm not using rbenv global only
[2014-07-02 15:45:51 -0400] bixu: er
[2014-07-02 15:45:54 -0400] chef866: cheeseplus: I have the platform thing working.  How do I define a different home dir for each plaform though?
[2014-07-02 15:45:55 -0400] gyoza: bixu: do you have macports installed?
[2014-07-02 15:45:56 -0400] bixu: i'm only using rbenv global
[2014-07-02 15:46:07 -0400] bixu: gyoza: no
[2014-07-02 15:46:10 -0400] gyoza: good
[2014-07-02 15:46:13 -0400] gyoza: lol
[2014-07-02 15:46:14 -0400] bixu: agreed
[2014-07-02 15:46:15 -0400] whiteadam: hehe
[2014-07-02 15:46:24 -0400] gyoza: hmm
[2014-07-02 15:46:29 -0400] bixu: macports is a bit of a mess - never know when upstream will break you
[2014-07-02 15:46:31 -0400] whiteadam: what about which gem ?
[2014-07-02 15:46:42 -0400] bixu: that's also an rbenv shim
[2014-07-02 15:46:49 -0400] whiteadam: prove it
[2014-07-02 15:46:51 -0400] gyoza: lol
[2014-07-02 15:47:19 -0400] bixu: ~/.rbenv/shims/gem: a bash script text executable
[2014-07-02 15:47:24 -0400] whiteadam: ok, I believe you now.
[2014-07-02 15:47:26 -0400] bixu: if i run file on it
[2014-07-02 15:47:30 -0400] cheeseplus: chef866: well depending on what the desired task is there may already be a cookbook for that
[2014-07-02 15:49:31 -0400] chef866: task: create user.  if on OSX use /User, else /home.  If there is a cookbook that can do it, I am happy to use it.
[2014-07-02 15:50:43 -0400] kitopastorino: does anybody know a good s3cmd cookbook that works on gentoo?
[2014-07-02 15:50:59 -0400] whiteadam: chef866: I think #{ENV['HOME']} works across all OS's
[2014-07-02 15:51:06 -0400] cheeseplus: chef866: https://github.com/fnichol/chef-user
[2014-07-02 15:51:16 -0400] whiteadam: chef866: http://docs.opscode.com/resource_common.html#relative-paths
[2014-07-02 15:51:54 -0400] j^2: cheeseplus: i actually like the "user" https://github.com/sethvargo-cookbooks/users cookbook
[2014-07-02 15:52:07 -0400] j^2: fletchers confused the hell out of me when i was trying to figure it out
[2014-07-02 15:52:24 -0400] j^2: granted that was about 6+ months ago
[2014-07-02 15:52:33 -0400] cheeseplus: yea, I like fletchers if you don't want to use databags and also want osx support
[2014-07-02 15:52:43 -0400] cheeseplus: depends on which cat you're trying to skin
[2014-07-02 15:52:49 -0400] j^2: all the cats!
[2014-07-02 15:52:52 -0400] j^2: :P
[2014-07-02 15:53:07 -0400] gyoza: whoa whoa
[2014-07-02 15:53:09 -0400] gyoza: we're talking about cats?
[2014-07-02 15:53:18 -0400] gyoza: this is the internet afterall
[2014-07-02 15:53:29 -0400] rsavage_: take the chainsaws out, we got some cat skinning to do!
[2014-07-02 15:53:30 -0400] cheeseplus: kitopastorino: finding explicit gentoo support will be difficult in any cookbooks
[2014-07-02 15:53:41 -0400] rsavage_: mawhaha
[2014-07-02 15:53:47 -0400] gyoza: lol gentoo, more like headache
[2014-07-02 15:54:07 -0400] gyoza: gentoo - slackware for people who like it even harder.
[2014-07-02 15:54:12 -0400] cheeseplus: some might work but you'll likely need to write something custom
[2014-07-02 15:54:19 -0400] whiteadam: I liked gentoo before VMs were invented.
[2014-07-02 15:54:26 -0400] kitopastorino: that's what I imagined
[2014-07-02 15:55:03 -0400] kitopastorino: We're moving away from gentoo, but still need to deal with it unfortunately
[2014-07-02 15:55:18 -0400] gyoza: wowwwww
[2014-07-02 15:55:23 -0400] whiteadam: kitopastorino: I know the feeling. I have 15 Suse 9 servers I still have to deal with
[2014-07-02 15:55:49 -0400] gyoza: Im watching this show, they are showcasing this guy who had his finger taken off, they skingrafted some salamander cells onto the tip and the finger grew back with a fingernail AND THE SAME FINGERPRINT
[2014-07-02 15:55:53 -0400] gyoza: that is amazing
[2014-07-02 15:56:13 -0400] whiteadam: bs
[2014-07-02 15:56:16 -0400] gyoza: swear
[2014-07-02 15:56:23 -0400] whiteadam: pics or it didn't happen
[2014-07-02 15:56:36 -0400] whiteadam: Remember before people could fake a photo? Those must've been the days man.
[2014-07-02 15:56:40 -0400] gyoza: http://www.popsci.com/scitech/article/2008-05/man-regenerates-finger
[2014-07-02 15:56:44 -0400] gyoza: popsci dont lie
[2014-07-02 15:56:48 -0400] gyoza: (it rhymes so its true)
[2014-07-02 15:56:56 -0400] gyoza: :P
[2014-07-02 15:57:13 -0400] whiteadam: for sure
[2014-07-02 15:57:23 -0400] gyoza: I gotta goto the freaking datacenter later:(
[2014-07-02 15:58:00 -0400] whiteadam: gross
[2014-07-02 15:58:07 -0400] gyoza: gross?
[2014-07-02 15:58:20 -0400] whiteadam: I went to one Sunday to babysit a kernel fault
[2014-07-02 15:58:28 -0400] gyoza: yea i remember that
[2014-07-02 15:58:34 -0400] gyoza: dude monday i spent all day at the DC
[2014-07-02 15:58:42 -0400] gyoza: I was fixing one problem, then drive right in front of me died
[2014-07-02 15:58:49 -0400] rsavage_: fried kitty cat... yumo
[2014-07-02 15:58:51 -0400] gyoza: had to drive back to office to get drives..
[2014-07-02 15:59:07 -0400] whiteadam: I have a NetApp that throws a drive like every 3 weeks
[2014-07-02 16:00:04 -0400] gyoza: can knife tag ec2ebs volumes?
[2014-07-02 16:00:30 -0400] rsavage_: take the knife to the cat!  mee-youch!
[2014-07-02 16:00:38 -0400] gyoza: speaking of netapp the cage next to me has 2 rows of 5 64U netapp cages
[2014-07-02 16:00:43 -0400] gyoza: i think they are building a cloud
[2014-07-02 16:00:58 -0400] gyoza: that is a lot of disk
[2014-07-02 16:01:37 -0400] whiteadam: gyoza: we have about 64 drives in ours. For the price, not worth it IMO. Disks are all SATA 7200 RPM, and they're too slow for anything
[2014-07-02 16:01:49 -0400] gyoza: wtffffffffffffffff
[2014-07-02 16:01:53 -0400] gyoza: lol
[2014-07-02 16:02:00 -0400] gyoza: Might as well setup your own samba server
[2014-07-02 16:02:20 -0400] gyoza: netapp is just a linux emulating windows + registry
[2014-07-02 16:03:32 -0400] rsavage_: no
[2014-07-02 16:03:39 -0400] rsavage_: Netapp is not Linux
[2014-07-02 16:03:45 -0400] shlant1: anyone using knife ec2? It only seems to be recognizing the first of 3 tags I specify with "-T Project=cms, Stages=pre, Roles=web,app,db"
[2014-07-02 16:03:56 -0400] rsavage_: It
[2014-07-02 16:04:04 -0400] gyoza: It used to be.
[2014-07-02 16:04:05 -0400] rsavage_: Netapp is a hacked up FreeBSD
[2014-07-02 16:04:09 -0400] gyoza: oh
[2014-07-02 16:04:15 -0400] rsavage_: no it was never Linux, it's FreeBSD
[2014-07-02 16:04:17 -0400] gyoza: maybe its always been bsd
[2014-07-02 16:04:19 -0400] whiteadam: rsavage_ is right, it sucks too. I swear they change the commands with each version
[2014-07-02 16:04:32 -0400] rsavage_: Ontap 7 and below were nice
[2014-07-02 16:04:33 -0400] gyoza: i was told from a netapp guy that it was linux
[2014-07-02 16:04:34 -0400] gyoza: years ago
[2014-07-02 16:04:37 -0400] rsavage_: Ontap * sucks balls
[2014-07-02 16:04:40 -0400] gyoza: what a dumbass
[2014-07-02 16:04:43 -0400] rsavage_: 8
[2014-07-02 16:05:43 -0400] rsavage_: Well because the mass population doesn't know what FreeBSD is, people say it's linux so others can understand...
[2014-07-02 16:05:59 -0400] rsavage_: just like there are still people out there calling Linux "Unix"
[2014-07-02 16:06:03 -0400] whiteadam: I still say unix
[2014-07-02 16:06:28 -0400] rsavage_: Linux = Linux, Unix = Unix, FreeBSD = FreeBSD || Unix
[2014-07-02 16:07:00 -0400] whiteadam: If it's got an X on the end, It's UNIX MAN
[2014-07-02 16:07:06 -0400] gleam: freebsdx
[2014-07-02 16:07:10 -0400] whiteadam: exactly
[2014-07-02 16:07:14 -0400] gavala: os x
[2014-07-02 16:08:16 -0400] whiteadam: sex
[2014-07-02 16:08:18 -0400] gchristensen: well, OSX is a BSD...
[2014-07-02 16:08:25 -0400] whiteadam: Which is?
[2014-07-02 16:08:43 -0400] j^2: freebsd iirc
[2014-07-02 16:08:46 -0400] j^2: osx that is
[2014-07-02 16:08:55 -0400] whiteadam: The answer I was looking for was Unix
[2014-07-02 16:08:59 -0400] whiteadam: you all fail
[2014-07-02 16:09:19 -0400] j^2: http://en.wikipedia.org/wiki/Osx#mediaviewer/File:Unix_history.svg
[2014-07-02 16:09:19 -0400] rsavage_: http://ubuntuforums.org/showthread.php?t=167887
[2014-07-02 16:09:39 -0400] j^2: yep i was wrong
[2014-07-02 16:10:11 -0400] whiteadam: Wow really? From NextStep
[2014-07-02 16:10:20 -0400] whiteadam: Wait, was Next the company jobs had before he came back to Apple?
[2014-07-02 16:10:25 -0400] j^2: yep
[2014-07-02 16:10:37 -0400] rsavage_: OSX is the evoleved NextStep :)
[2014-07-02 16:10:41 -0400] whiteadam: all makes sense now
[2014-07-02 16:11:19 -0400] gleam: it was almost an evolved beos
[2014-07-02 16:11:26 -0400] gleam: which should be a blast from the past for some of you
[2014-07-02 16:12:02 -0400] Erkan_Yilmaz: I got a github notif. to sign a CLA
[2014-07-02 16:12:18 -0400] Erkan_Yilmaz: but when I go to https://supermarket.getchef.com I don't see a cla link/topic
[2014-07-02 16:12:31 -0400] j^2: Erkan_Yilmaz: it's under your profile iirc
[2014-07-02 16:12:33 -0400] Erkan_Yilmaz: am I suspposed to register there? (which I wouldn't like)
[2014-07-02 16:12:52 -0400] gleam: https://secure.echosign.com/public/hostedForm?formid=PJIF5694K6L
[2014-07-02 16:12:52 -0400] cheeseplus: Erkan_Yilmaz: if you already have a chef community account, you have a supermarket account
[2014-07-02 16:13:00 -0400] gleam: i dunno anything
[2014-07-02 16:13:01 -0400] j^2: it syncs you github account with supermarket
[2014-07-02 16:13:07 -0400] j^2: Erkan_Yilmaz: what cheeseplus said
[2014-07-02 16:13:17 -0400] Erkan_Yilmaz: I only did via github a patch, so I don't have anything else, I assume
[2014-07-02 16:13:21 -0400] whiteadam: his new name is pluscheeseplus
[2014-07-02 16:13:41 -0400] cheeseplus: Erkan_Yilmaz: and yes, to sign you just click on your profile link in the top right and then you can sign from the dropdown
[2014-07-02 16:14:53 -0400] cheeseplus: Erkan_Yilmaz: you will have to create an account though as that is how Chef tracks contributors acceptance of the CLA
[2014-07-02 16:15:31 -0400] Erkan_Yilmaz: ok I see
[2014-07-02 16:17:02 -0400] Erkan_Yilmaz: I will postpone that because it doesn't accept my  credentials (just registered now)
[2014-07-02 16:17:09 -0400] Erkan_Yilmaz: it directed me first to https://manage.opscode.com
[2014-07-02 16:17:15 -0400] Erkan_Yilmaz: got an email by chef then
[2014-07-02 16:17:27 -0400] Erkan_Yilmaz: but can't login to https://supermarket.getchef.com
[2014-07-02 16:17:41 -0400] Erkan_Yilmaz: too much hastle for nothing, remove my patch, add it yourself + be happy
[2014-07-02 16:18:34 -0400] cheeseplus: Erkan_Yilmaz: supermarket (as indicated) is still in beta and you just caught Chef right as we're changing how CLAs work
[2014-07-02 16:18:55 -0400] cheeseplus: I believe SuperMarket syncs to the existing credentials every few hours
[2014-07-02 16:19:05 -0400] someara: 3 to be exact
[2014-07-02 16:19:09 -0400] Erkan_Yilmaz: ok, then I'll try in 3h again
[2014-07-02 16:19:18 -0400] someara: we're in "ZOMG SHIP IT" mode
[2014-07-02 16:19:26 -0400] whiteadam: zomg do it
[2014-07-02 16:19:44 -0400] someara: you can spy on it here: https://gitter.im/opscode/supermarket
[2014-07-02 16:19:59 -0400] someara: shaking out some last minute bugs, as one does
[2014-07-02 16:20:11 -0400] someara: for example, berkshelf breakage was discovered the other day, etc
[2014-07-02 16:20:33 -0400] gyoza: man this is weird, im trying to tee /dev/tty and it keeps doing an ls of my folder on osx anybody know why?
[2014-07-02 16:20:45 -0400] gyoza: looks like its bash completion going nuts
[2014-07-02 16:20:51 -0400] gyoza: maybe..
[2014-07-02 16:21:51 -0400] heathsnow: When I'm creating a public cookbook, should I commit the .kitchen.yml and Vagrantfile with it?  I'd have to add placeholders for some values.  Thoughts?
[2014-07-02 16:22:30 -0400] someara: heathsnow yes, include those in your repo.
[2014-07-02 16:22:39 -0400] cheeseplus: heathsnow: bolth
[2014-07-02 16:22:44 -0400] gchristensen: and document them placeholders
[2014-07-02 16:22:47 -0400] gchristensen: and avoid them if you can
[2014-07-02 16:23:06 -0400] heathsnow: awesome, thx fellas
[2014-07-02 16:23:20 -0400] cheeseplus: I can see not including the Vagrantfile but everything should be test-kitchened
[2014-07-02 16:23:28 -0400] someara: in general, you want somebody to git clone ; kitchen test ; echo $? => 0
[2014-07-02 16:23:49 -0400] someara: yea, you don't need a Vagrantfile with test-kitchen
[2014-07-02 16:24:04 -0400] someara: but if your workflow specifically used Vagrant for some reason, then go for it
[2014-07-02 16:24:08 -0400] heathsnow: yeah, but test-kitchen doesn't work with Windows
[2014-07-02 16:24:08 -0400] someara: s/used/uses/
[2014-07-02 16:24:21 -0400] heathsnow: so I have mini tests that work with the Vagrant file
[2014-07-02 16:24:30 -0400] someara: ah, yep. ship it =)
[2014-07-02 16:24:33 -0400] heathsnow: and I have test-kitchen that works with ubuntu
[2014-07-02 16:24:34 -0400] cheeseplus: heathsnow: that won't be the case for very much longer
[2014-07-02 16:24:44 -0400] cheeseplus: heathsnow: fingers crossed that is
[2014-07-02 16:24:52 -0400] heathsnow: k, i'll include Vagrantfile for now too then
[2014-07-02 16:25:01 -0400] someara: you can always remove it later
[2014-07-02 16:25:09 -0400] heathsnow: yeah
[2014-07-02 16:27:34 -0400] gyoza: wtf
[2014-07-02 16:27:42 -0400] gyoza: Did you guys know there is a real robotics company named cyberdyne lol
[2014-07-02 16:31:38 -0400] parabuzzle: gyoza: and they make a product known as "Hal" => Hybrid Assisted Limb
[2014-07-02 16:31:55 -0400] parabuzzle: they are ripping off all kinds of movies :)
[2014-07-02 16:32:29 -0400] someara: my favorite is OmniTI. Always makes me think of robocop
[2014-07-02 16:33:16 -0400] gchristensen: teledyne makes me think about Perfect Dark
[2014-07-02 16:34:14 -0400] parabuzzle: I don't trust scientists.. movies has taught me that everytime they think they are doing "good" for the world, their creations go nuts or are used for evil and Matrix..
[2014-07-02 16:34:38 -0400] gchristensen: every discovery can be used to kill more people
[2014-07-02 16:35:01 -0400] parabuzzle: Like the AI people and the robotics people and the genetics people
[2014-07-02 16:35:07 -0400] parabuzzle: don't they watch movies ?! :)
[2014-07-02 16:35:15 -0400] ericReeves: Not that any software engineer should be afraid of a robot uprising anyway.
[2014-07-02 16:35:23 -0400] parabuzzle: true
[2014-07-02 16:35:31 -0400] ericReeves: None of that crap runs itself.
[2014-07-02 16:35:49 -0400] parabuzzle: it is amazing that most of the internet works really
[2014-07-02 16:35:58 -0400] gyoza: wait the internet isnt magic?
[2014-07-02 16:36:09 -0400] parabuzzle: oh crap everyone.. shhhh
[2014-07-02 16:36:13 -0400] parabuzzle: :)
[2014-07-02 16:37:07 -0400] anthonyacquanita: thought the WorldCup was gonna break it for a second....
[2014-07-02 16:39:46 -0400] Guest49640: Question: How do I regenerate the chef's server validation key.
[2014-07-02 16:40:32 -0400] bixu: So now that US people are awake, anyone else know about berkshelf lockfile issues?
[2014-07-02 16:42:31 -0400] jmreicha: @coderanger: Dunno if you're in here right now, I liked your most recent blog post :)
[2014-07-02 16:43:23 -0400] holoway: bixu: can you repeat it for the benefit of those of us without scrollback?
[2014-07-02 16:43:47 -0400] bixu: sure
[2014-07-02 16:44:12 -0400] bixu: even after removing references from the lockfile, when i do 'berks install' i still get this: The lockfile is out of sync! Run `berks install` to sync the lockfile.
[2014-07-02 16:48:26 -0400] bixu: so how can i debug this?
[2014-07-02 16:49:11 -0400] holoway: bixu: I beleive that error comes from having dependencies in the Berksfile that don't exist, or that aren't satisfied by the lock file
[2014-07-02 16:50:03 -0400] holoway: bixu: what does berks install -d say?
[2014-07-02 16:50:24 -0400] fivetwentysix: im totally stuck using the apt cookbook
[2014-07-02 16:50:29 -0400] fivetwentysix: I cant get the PPA key signed or whatever
[2014-07-02 16:50:37 -0400] bixu: holoway: checking now
[2014-07-02 16:51:32 -0400] fivetwentysix: https://gist.github.com/PatrickMa/fe6c747f0835707df944
[2014-07-02 16:51:36 -0400] fivetwentysix: what am i doing wrong?
[2014-07-02 16:51:47 -0400] fivetwentysix: this is the ppa repo im trying to use?
[2014-07-02 16:51:48 -0400] fivetwentysix: https://launchpad.net/~chris-lea/+archive/postgresql-9.3
[2014-07-02 16:51:51 -0400] fivetwentysix: do i need a account or smth
[2014-07-02 16:51:53 -0400] Guest49640: Question: How do I regenerate the chef's server validation key.
[2014-07-02 16:51:58 -0400] fivetwentysix: i dont get it and the readme doesnt tell me how to do it
[2014-07-02 16:52:17 -0400] j^2: Guest49640: http://jjasghar.github.io/blog/2014/03/18/help-i-lost-my-vaildation-dot-pem/
[2014-07-02 16:52:20 -0400] bixu: holoway: So I do see a message about a difference between a dep version and locked version.
[2014-07-02 16:52:37 -0400] bixu: This is a cookbook that I switched to my fork from an upstream.
[2014-07-02 16:52:43 -0400] bixu: How should I clean that up?
[2014-07-02 16:53:34 -0400] bixu: "Different location - cannot be trusted!"
[2014-07-02 16:53:36 -0400] holoway: bixu: you need to fix the versions you depend on
[2014-07-02 16:53:44 -0400] holoway: bixu: stick the output in a gist?
[2014-07-02 16:53:50 -0400] heathsnow: fivetwentysix: in the management console, select the Administration tab, then select your organization, then click the settings button on the far right.
[2014-07-02 16:54:17 -0400] fivetwentysix: heathsnow: that would be cool, but im using chef_solo on vagrant
[2014-07-02 16:55:01 -0400] holoway: bixu: along with your berksfile?
[2014-07-02 16:57:39 -0400] bixu: holoway: berksfile: https://gist.github.com/bixu/ebea500ab1e1801b32fe, debut output: https://gist.github.com/bixu/5bb9b9bce1e1700cbc89
[2014-07-02 16:57:50 -0400] bixu: s/debut/debug/
[2014-07-02 16:59:07 -0400] holoway: bixu: you need to track down what else relys on that paths cookbook, and change it to also depend on your source
[2014-07-02 16:59:26 -0400] bixu: ahh
[2014-07-02 17:01:36 -0400] holoway: bixu: you have a transitive dependency on that cookbook with the other path, and berkshelf cannot resolve it
[2014-07-02 17:02:07 -0400] bixu: holoway: not quote parsing that sentence
[2014-07-02 17:02:11 -0400] bixu: quite
[2014-07-02 17:02:59 -0400] holoway: bixu: no problem. you have to find where you have a dependency that also needs the new git source. find it, change it to point to your version, and you're golden
[2014-07-02 17:03:15 -0400] bixu: 'berks contingent' shows that i have another cookbook depending on 'paths'
[2014-07-02 17:03:20 -0400] holoway: bixu: exactly
[2014-07-02 17:03:45 -0400] holoway: bixu: so point that cookbook to also be dependent on your fork, rather than the upstream, and things will resolve again
[2014-07-02 17:04:59 -0400] rsavage_: I might need some help.  I am getting this error "Couldn't lookup integer GID for group name", when doing a user "username" do ... blah blah.."
[2014-07-02 17:05:28 -0400] bixu: holoway: so edit Berksfile.lock where the relationship between 'postgres' and 'paths' is?
[2014-07-02 17:07:14 -0400] bixu: holoway: yup, that did it
[2014-07-02 17:07:27 -0400] bixu: 'berks contingent' is v useful :)
[2014-07-02 17:07:45 -0400] bixu: thanks - gonna bounce for the evening
[2014-07-02 17:10:01 -0400] heathsnow: Is there a doc I should follow to submit a cookbook to the community site?
[2014-07-02 17:10:14 -0400] heathsnow: Or just use http://community.opscode.com/cookbooks/new ?
[2014-07-02 17:13:17 -0400] aanand_: i have written a ruby method that searches for nodes using run_list...I am running chef-client on 3 hosts one by one...for some reason first node doesn't find the nodes I am searching for...but other two nodes do
[2014-07-02 17:13:19 -0400] aanand_: any idea?
[2014-07-02 17:13:24 -0400] aanand_: what could be wrong?
[2014-07-02 17:16:07 -0400] someara: heathsnow knife cookbook site share, or the bake command from the "stove" gem if you're feeling advanced
[2014-07-02 17:16:40 -0400] heathsnow: @someara: will do, thx
[2014-07-02 17:16:55 -0400] cheeseplus: heathsnow: +1 for the stove gem
[2014-07-02 17:17:56 -0400] aanand_: i have written a ruby method that searches for nodes using run_list...I am running chef-client on 3 hosts one by one...for some reason first node doesn't find the nodes I am searching for...but other two nodes do
[2014-07-02 17:18:04 -0400] aanand_: what could be wrong?
[2014-07-02 17:20:21 -0400] heathsnow: I'm checking out stove now....will likely use it.
[2014-07-02 17:21:10 -0400] rogerl: hi all
[2014-07-02 17:25:09 -0400] rogerl: has anyone encountered problems with chefspec + berkshelf? specifically getting `initialize': No such file or directory - /var/folders/xt/0wwq0jsj09l19rvcrld9hhc80000gp/T/d20140702-5374-1r0g8od/... errors
[2014-07-02 17:25:23 -0400] burtlo: Oh that sounds like a bad temp folder...
[2014-07-02 17:25:37 -0400] burtlo: I haven't seen anything like that. But
[2014-07-02 17:25:51 -0400] burtlo: maybe Berkshelf or Chefspec made a temp folder that it lost track of?
[2014-07-02 17:26:02 -0400] aanand_: i have written a ruby method that searches for nodes using run_list...I am running chef-client on 3 hosts one by one...for some reason first node doesn't find the nodes I am searching for...but other two nodes do
[2014-07-02 17:26:08 -0400] aanand_: any idea what could be wrong?
[2014-07-02 17:26:52 -0400] burtlo: @aanand_ you have a gist of the recipe?
[2014-07-02 17:27:59 -0400] burtlo: @aanand_ it's strange that it works on the other two nodes. I've seen weird behavior when I've accidently searched with *.* instead of *:*
[2014-07-02 17:28:45 -0400] rogerl: @burtlo its weird. so looking in the temp folder, there are 4 folders with the name d20140702-5374-[...]
[2014-07-02 17:29:14 -0400] rogerl: so im guessing previous installs on the same run were working
[2014-07-02 17:29:23 -0400] burtlo: @rogerl what is the command you are running to generate the error? rspec?
[2014-07-02 17:29:27 -0400] aanand_: here is my search method
[2014-07-02 17:29:48 -0400] rogerl: yea bundle exec rspec
[2014-07-02 17:29:57 -0400] aanand_: here is the seach that I am using
[2014-07-02 17:29:58 -0400] aanand_:  @rl_results = search(:node, "role:*Zookeeper* AND chef_environment:#{node.chef_environment}")
[2014-07-02 17:30:15 -0400] aanand_: i m searching using "role"
[2014-07-02 17:30:16 -0400] aanand_: not roles
[2014-07-02 17:30:29 -0400] aanand_: actually I have three searches at three levels in the same method
[2014-07-02 17:30:32 -0400] aanand_: 1st is run_list
[2014-07-02 17:30:35 -0400] aanand_: second is roles
[2014-07-02 17:30:38 -0400] aanand_: third is recipes
[2014-07-02 17:30:51 -0400] aanand_: then I merge all the arrays and get unique values
[2014-07-02 17:30:54 -0400] burtlo: @rogerl let me take a look at the code for Berkshelf and ChefSpec and see where it creates temporary directories.
[2014-07-02 17:30:56 -0400] vegardx: Are they all in same environment?
[2014-07-02 17:31:19 -0400] aanand_: everything is in the same environment
[2014-07-02 17:31:21 -0400] rogerl: thanks @burtlo
[2014-07-02 17:31:24 -0400] aanand_: the other two nodes are able to find it
[2014-07-02 17:32:15 -0400] aanand_:  @rl_results = search(:node, "role:*Zookeeper* AND chef_environment:#{node.chef_environment}")
[2014-07-02 17:32:57 -0400] aanand_: during my run...1st node returns empty array
[2014-07-02 17:33:09 -0400] aanand_: but other two nodes return all the 3 nodes as expected
[2014-07-02 17:33:32 -0400] gchristensen: well, is the chef environment correct? :)
[2014-07-02 17:33:37 -0400] gchristensen: might want to double-check that
[2014-07-02 17:33:50 -0400] aanand_: yes..chef environment is correct
[2014-07-02 17:33:55 -0400] burtlo: Oh that's a good thought @gchristensen ... could one node happen to be in another env
[2014-07-02 17:34:21 -0400] aanand_: if one node is another env then how come other two nodes can find it
[2014-07-02 17:34:24 -0400] burtlo: @rogerl there is definitely some temp directory things going on inside of chefspec when working with Berkshelf (https://github.com/sethvargo/chefspec/blob/master/lib/chefspec/berkshelf.rb)
[2014-07-02 17:34:29 -0400] heathsnow: cheeseplus, someara, after adding 'gem stove' to Gemfile:  Bundler could not find compatible versions for gem "solve":   In Gemfile:     stove (>= 0) ruby depends on       solve (~> 0.8) ruby      berkshelf (~> 3.1.3) ruby depends on       solve (1.2.0)
[2014-07-02 17:35:13 -0400] burtlo: @rogerl without seeing the rest of your stacktrace I am guessing that this may be the beginning of the problem.
[2014-07-02 17:35:46 -0400] burtlo: @rogerl neat trick -- you can open any gem in your editor with "bundle open GEMNAME" -- "bundle open chefspec"
[2014-07-02 17:35:55 -0400] burtlo: You have to setup an EDITOR
[2014-07-02 17:36:05 -0400] burtlo: or BUNDLE_EDITOR environment variable.
[2014-07-02 17:36:05 -0400] rogerl: intresting
[2014-07-02 17:36:54 -0400] aanand_: my method is in library...and it is executed at compile time as per my understanding...correct?
[2014-07-02 17:37:16 -0400] aanand_: i see the log messages during compile phase
[2014-07-02 17:37:21 -0400] aanand_: and 1st nodes doesn't print anything
[2014-07-02 17:37:27 -0400] aanand_: other two nodes print all the three nodes
[2014-07-02 17:37:39 -0400] aanand_: and I only have one environment
[2014-07-02 17:37:40 -0400] rogerl: thanks @burtlo
[2014-07-02 17:37:41 -0400] jkeiser: aanand_: is this in the recipe for the zookeeper nodes themselves?  The node objects won't show up in the server until the chef runs are complete
[2014-07-02 17:38:08 -0400] jkeiser: assuming you are using a knife bootstrap / knife ec2 server create / something of that ilk to create the servers
[2014-07-02 17:38:10 -0400] aanand_: @jkeiser...that is why I am searching the run list
[2014-07-02 17:38:14 -0400] aanand_: not the roles or recipes
[2014-07-02 17:38:25 -0400] aanand_: roles and recipes are updated after the chef-client run
[2014-07-02 17:38:35 -0400] aanand_: but run_list is updated before the client executes
[2014-07-02 17:38:39 -0400] vt102: So, what should I do to avoid CHEF-3694 "WARN: Cloning resource attributes for package..."?  I've arranged my own cookbooks to where each package is just installed once, but how can I avoid it with community cookbooks?  I've tried setting all the options not set as Optional in the docs, STILL getting clonnig.
[2014-07-02 17:38:40 -0400] jhayden: trying to install open source chef-server 11 on RHEL ec2
[2014-07-02 17:39:06 -0400] burtlo: @rogerl I may be able to help more with more of the stacktrace -- so if you're still stuck I can probably help.
[2014-07-02 17:39:08 -0400] aanand_: when chef-client is executed on 2nd node it can see 1st and 3rd node
[2014-07-02 17:39:13 -0400] aanand_: 3rd node is not even chefed yet
[2014-07-02 17:39:20 -0400] jhayden: got past the ip address vs fqdn issue but am now timing out after admin/password here is the gist https://gist.github.com/3b7ba72f02bb39048039.git
[2014-07-02 17:39:24 -0400] someara: vt102 rename the resource title, and specify a package_name parameter
[2014-07-02 17:39:28 -0400] jkeiser: aanand_: ok cool.  There is another thing, that search for nodes is eventually consistent--it can take time for it to show up in the index
[2014-07-02 17:39:49 -0400] aanand_: i ran my install at least 15 times
[2014-07-02 17:39:50 -0400] vt102: someara: ahhhhhh, that makes sense, thank you.
[2014-07-02 17:39:53 -0400] aanand_: everytime the same behavior
[2014-07-02 17:40:49 -0400] jkeiser: aanand_: so what you did was (a) set up three servers (b) run chef-client on all of them (c) re-run chef-client on the first server over and over?  Like, if you log on to the first server box right now, and re-run chef-client, it will fail again?
[2014-07-02 17:41:20 -0400] aanand_: after client run no...but I am cleaning it up after every run
[2014-07-02 17:41:32 -0400] aanand_: and same thing was working yesterday
[2014-07-02 17:41:34 -0400] jkeiser: aanand_: so you are destroying the server and/or the node after each run and re-creating
[2014-07-02 17:41:39 -0400] aanand_: yes
[2014-07-02 17:41:45 -0400] aanand_: not server
[2014-07-02 17:41:59 -0400] aanand_: the way my process works is
[2014-07-02 17:42:06 -0400] aanand_: i bootstrap the node with some basic role
[2014-07-02 17:42:22 -0400] aanand_: all the nodes are bootstrapped
[2014-07-02 17:42:31 -0400] aanand_: then all the nodes are assigned the run_list with actual roles
[2014-07-02 17:42:32 -0400] jkeiser: aanand_: ok. it's a possibility then ... a quick way to test it is to add a sleep(60) before the search.  It's NOT the right way to solve in the long term, not suggesting that, but it could rule out eventual consistency as the culprit
[2014-07-02 17:43:15 -0400] rogerl: @bertlo i'm going to try directing chefspec to a local cookbook path to see if i can bypass the chefspec/berkshelf
[2014-07-02 17:43:20 -0400] aanand_: ok
[2014-07-02 17:43:54 -0400] aanand_: i am going to add sleep(60) and see what happens
[2014-07-02 17:44:04 -0400] burtlo: Sounds good rogerl
[2014-07-02 17:44:31 -0400] jkeiser: aanand_: if the problem goes away when you do the sleep, then I would suggest moving to a search loop of some sort, or better yet, a two-phase thing
[2014-07-02 17:45:21 -0400] x0nic: jkeiser: Do you have an example of a search loop?
[2014-07-02 17:45:25 -0400] jkeiser: aanand_: a thing you *could* do is bootstrap the servers with a "zookeeper" tag on them, and run an empty chef-client run (or set up everything except zookeeper service).  Then add zookeeper service to the run list, and re-run.  By then, search should be populated
[2014-07-02 17:46:25 -0400] jkeiser: x0nic: results = nil; while true do results = search(...); break if results.size < 3; end.  (Or whatever criteria you want; you could wait until the current node shows up in the search results, for example)
[2014-07-02 17:46:40 -0400] jkeiser: aanand_: then, in your search, search for tags:zoiokeeper instead of searching the run list
[2014-07-02 17:46:54 -0400] jkeiser: that way you don't have to wait for zookeeper to actually be set up on any of them, it will find the nodes anyway
[2014-07-02 17:47:30 -0400] Eulipion|Work: wouldnt node.save cause a callback, so you can do it in 1 run instead of editing the run_list betwen runs?
[2014-07-02 17:47:56 -0400] korishev: jkeiser:  chef-metal question:  In a machine definition, Im using a file command to upload my data bag encryption key, but it looks like the embedded \n are being removed, breaking the decrypt.  Is there a different/better way to upload that file to my machine?
[2014-07-02 17:48:11 -0400] jkeiser: Eulipion|Work: coitanly.  You would have to at least wait for the current server to show up in the index, but it would totally work
[2014-07-02 17:48:25 -0400] Eulipion|Work: ;)
[2014-07-02 17:49:24 -0400] jkeiser: korishev: you mean you are using the "machine_file" resource to upload a file and it's treating it as text?
[2014-07-02 17:51:13 -0400] korishev: jkeiser: maybe?  in the machine block, I have role and tag and file  is that the machine_file resource of which you speak?
[2014-07-02 17:51:30 -0400] jkeiser: korishev: ah ok!  What precisely does the file attribute look like?
[2014-07-02 17:51:39 -0400] jkeiser: korishev: it could well be a pure bug
[2014-07-02 17:52:10 -0400] korishev: jkeiser: file "/etc/chef/encrypted_data_bag_secret", "#{ENV['HOME']}/.chef/encrypted_data_bag_secret"
[2014-07-02 17:53:09 -0400] x0nic: jkeiser: I suppose you would also need some sort of timeout in there incase you get stuck in that loop
[2014-07-02 17:53:35 -0400] jkeiser: korishev: mind filing an issue?  It sounds like a real problem.  Attach a secret (not any secret you would like to keep) for super expediting.  I'll look at it today.
[2014-07-02 17:53:40 -0400] jkeiser: x0nic: agreed
[2014-07-02 17:53:54 -0400] jkeiser: x0nic: I'm planning to put a resource for this into Cheffish, but haven't got to it
[2014-07-02 17:54:21 -0400] x0nic: jkeiser: Cheffish?
[2014-07-02 17:54:23 -0400] korishev: jkeiser: will do.  github is preferred now?
[2014-07-02 17:54:38 -0400] jkeiser: korishev: yep, https://github.com/opscode/chef-metal
[2014-07-02 17:54:51 -0400] korishev: jkeiser: super, thanks!
[2014-07-02 17:54:52 -0400] jkeiser: x0nic: https://github.com/opscode/cheffish
[2014-07-02 17:55:01 -0400] jkeiser: Library for manipulating chef in chef
[2014-07-02 17:55:05 -0400] jkeiser: so you can chef while you chef
[2014-07-02 17:58:20 -0400] rogerl: hi burtlo, im having another issue and am not sure where to look. could you help take a look? https://gist.github.com/mrlamroger/49b9dace49a0065e07cf
[2014-07-02 18:00:38 -0400] korishev: jkeiser: nevermind.  I found my mistake.  The data bag key wasnt the one I though it was.  I only figured it out when putting together the issue.
[2014-07-02 18:02:03 -0400] jkeiser: It works that way for me way more than I like to admit :)
[2014-07-02 18:02:50 -0400] burtlo: rogerl we can chat on the gist.
[2014-07-02 18:03:16 -0400] burtlo: I don't know exactly by looking at the issue. But maybe I can ask some questions to help find an answer.
[2014-07-02 18:03:31 -0400] x0nic: jkeiser: Interesting. Not sure where I would use that. Cool, none the less.
[2014-07-02 18:11:08 -0400] jhayden: can someone tell me where the chef-server (11) is supposed to go AFTER initial login?
[2014-07-02 18:11:18 -0400] jhayden: I am timing out
[2014-07-02 18:13:47 -0400] jkeiser: jhayden: when you hit it with a browser?
[2014-07-02 18:14:31 -0400] jhayden: jkeiser: Yes heres the gist of the errors https://gist.github.com/3b7ba72f02bb39048039.git
[2014-07-02 18:15:32 -0400] jkeiser: jhayden: that link is showing up empty for me
[2014-07-02 18:16:17 -0400] jhayden: well thats not good, let me see what I did wrong! ;-)
[2014-07-02 18:16:46 -0400] jhayden: try this : https://gist.github.com/anonymous/3b7ba72f02bb39048039
[2014-07-02 18:19:11 -0400] fahd: so I'm using the tomcat cookbook to install tomcat7 , but it seems to be hung up on trying to create /etc/tomcat6/server.xml
[2014-07-02 18:19:17 -0400] fahd: template[/etc/tomcat6/server.xml] action create[2014-07-02T18:12:22+00:00] INFO: Processing template[/etc/tomcat6/server.xml] action create (/tmp/kitchen/cookbooks/tomcat/providers/instance.rb line 157)
[2014-07-02 18:20:10 -0400] fahd: however, the template is defined "  template "#{new_resource.config_dir}/server.xml" do", at
[2014-07-02 18:20:57 -0400] fahd: and new_resource.config_dir is /etc/tomcat7,
[2014-07-02 18:21:02 -0400] fahd: so ... confused
[2014-07-02 18:22:00 -0400] jkeiser: mmzyk: https://gist.github.com/anonymous/3b7ba72f02bb39048039 is the new gist
[2014-07-02 18:22:50 -0400] mmzyk: Looking to see what I can see.
[2014-07-02 18:23:16 -0400] vt102: I've got a recipe (rvm) which is using .run_action to install prerequisite packages.  Thus, my include_recipe "yum-epel" is getting preceded, and it can't find the packages it's trying to install.  Is there a way to get include_recipe to run :immediately?  Or some other solution?
[2014-07-02 18:23:43 -0400] vt102: I know I could handle it in the run_list, but that doesn't seem the right way.
[2014-07-02 18:24:28 -0400] mmzyk: jhayden Thats your gist that jkeiser linked to right? I just logged on and dont have any history at the moment.
[2014-07-02 18:25:26 -0400] jhayden: mmzyk: I just clicked on https://gist.github.com/anonymous/3b7ba72f02bb39048039 and went to my gist
[2014-07-02 18:26:15 -0400] mmzyk: jhayden cool, I wanted to make sure I had the right person then. Can you fill me in on more background than just what is in the gist? Sorry if I ask something thats already been said.
[2014-07-02 18:26:24 -0400] mmzyk: This is chef 11 open source server?
[2014-07-02 18:26:34 -0400] jhayden: yes
[2014-07-02 18:26:43 -0400] mmzyk: You know specificially what version?
[2014-07-02 18:26:51 -0400] mmzyk: And I assume youre just using the webui bundled with it?
[2014-07-02 18:27:46 -0400] mmzyk: Let me just first off some questions rapidly: this is a new omnibus based install? what os are you running on?
[2014-07-02 18:27:51 -0400] jhayden: everything is plain vanilla, I installed the rpm, changed the hostname to the ip address and hit the login webui
[2014-07-02 18:28:07 -0400] jhayden: centos 6.5
[2014-07-02 18:31:05 -0400] mmzyk: jhayden and when you hit the webui and try to login, what do you actually see?
[2014-07-02 18:32:45 -0400] jhayden: I get the typical login, I input admin/p@ssw0rd1 and after a wait We're sorry, but something went wrong. shows up in Red
[2014-07-02 18:33:31 -0400] jhayden: and the gist is from chef-server-webui/current
[2014-07-02 18:38:29 -0400] mmzyk: jhayden Can you try to hit it again while running chef-server-ctl tail on the box and then make a gist of any interesting content you see there? Its obvious from the gist you posted that its timing out, but of course the million dollar question is why. Im wondering if were hitting something at the nginx layer perhaps, as this doesnt seem like its something in the webui off hand.
[2014-07-02 18:39:35 -0400] mmzyk: fahd I have no clue. Perhaps try inspecting the new_resource.config_dir at the beginning of the recipe run and seeing if it is set as you think it shoudl be defined? Maybe a higher level attribute is redefining it somewhere other than in the default attribute location.
[2014-07-02 18:40:34 -0400] mmzyk: vt102 All reciepes are run in the order specified, so if you need something run earlier move it earlier in your run list.
[2014-07-02 18:40:50 -0400] mmzyk: Ah, and now I just see you say that doesnt seem the right away. :)
[2014-07-02 18:41:03 -0400] medya: can I have a chef-server without a FQDN (fully qualified domain name) ?
[2014-07-02 18:41:26 -0400] mmzyk: vt102 I would think that is the right way, given were talking about recipe order.
[2014-07-02 18:41:41 -0400] mmzyk: medya by not have an FQDN you mean what? Just use an ip?
[2014-07-02 18:42:02 -0400] medya: @mmzyk yes just ip
[2014-07-02 18:42:15 -0400] bougyman: can roles use environment attributes?
[2014-07-02 18:42:25 -0400] mmzyk: Yeah, that should work just fine. Just stick the ip in as your fqdn.
[2014-07-02 18:43:37 -0400] jhayden: mmzyk: Heres the new gist on chef-server-ctl tail https://gist.github.com/anonymous/fa10a2528d52e7d4da85
[2014-07-02 18:43:45 -0400] jhayden: same scenario as before
[2014-07-02 18:44:33 -0400] mmzyk: jhayden This will do it: 2014-07-02 14:33:02 =ERROR REPORT====
[2014-07-02 18:44:34 -0400] mmzyk: Error reading file /etc/chef-server/chef-webui.pem for default: {error,enoent}
[2014-07-02 18:44:46 -0400] mmzyk: Something has happened to the chef-webui.pem file.
[2014-07-02 18:45:08 -0400] mmzyk: Or else for some reason the server cant access it.
[2014-07-02 18:45:26 -0400] mmzyk: Without that the webui cant authenticate with the server to make calls.
[2014-07-02 18:45:31 -0400] vt102: mmzyk: Even for something that's a prerequisite?
[2014-07-02 18:45:43 -0400] jhayden: hmmm
[2014-07-02 18:46:03 -0400] jhayden: ownership is root:chef_server
[2014-07-02 18:46:18 -0400] jhayden: shouldnt it be the otherway around?
[2014-07-02 18:46:46 -0400] Eulipion|Work: jhayden: your node is failing connecting to a public IP (54.90.20.63), might want to switch it to an internal VPC ip/hostname and make sure all the ports are open betwen security groups
[2014-07-02 18:46:47 -0400] mmzyk: jhayden I dont know off the top of my head.
[2014-07-02 18:46:54 -0400] jhayden: and should the permissions be 600 and not 640
[2014-07-02 18:46:55 -0400] Eulipion|Work: also, dont expose chef to the world
[2014-07-02 18:47:07 -0400] fahd: mmzyk, possbily, i cloned the cookbook, set tomcat version = 7 in the default attributes and it just works.. is it a matter of when the variables are evaluated?  b/c in attributes/default.rb the config dir is set like so : default['tomcat']['config_dir'] = "/etc/tomcat#{node["tomcat"]["base_version"]}"
[2014-07-02 18:48:00 -0400] jhayden: Eulipion: Im just trying to get it running first
[2014-07-02 18:48:16 -0400] jhayden: I will tighten up the security as soon as I know it will work
[2014-07-02 18:48:24 -0400] fahd: so would I have to override ever single attribute that references 'base_version' ? or is my override set base_version first?
[2014-07-02 18:48:55 -0400] mmzyk: vt102 Its all ultimately just recipes. Im not entirely certain what your scenario is, but chef just runs in the order its written, so you have ensure that order is correctly.
[2014-07-02 18:49:03 -0400] stormerider: fahd: you would have to override them all.
[2014-07-02 18:49:12 -0400] Eulipion|Work: jhayden: well if these are both nodes in ec2, use the ec2 ip address, not the elastic or else your traffic goes ec2->interwebs->ec2, when it can connect directly
[2014-07-02 18:49:40 -0400] fahd: stormerider, thanks...  that doesn't seem like fun :(
[2014-07-02 18:51:21 -0400] jhayden: Eulipion: are you saying I should be using the internal IP address as my hostname?
[2014-07-02 18:51:30 -0400] Eulipion|Work: for sure
[2014-07-02 18:51:39 -0400] jhayden: argghhhhhhhhh!
[2014-07-02 18:51:49 -0400] jhayden: let me give that a try
[2014-07-02 18:52:22 -0400] Eulipion|Work: you can set that in /etc/chef-server/chef-server.rb and rerun chef-server-ctl
[2014-07-02 18:52:54 -0400] Eulipion|Work: you might also poke around with nginx, it might be an ssl issue that's causing this.  u can enable non-ssl and see if that works
[2014-07-02 18:53:55 -0400] mmzyk: Thanks for the ec2 knowledge Eulipion.
[2014-07-02 18:55:01 -0400] jhayden: Eulipion: You are a genius!!! Thanks for the help!!
[2014-07-02 18:55:07 -0400] Eulipion|Work: ;)
[2014-07-02 18:57:56 -0400] jhayden: Euilipion: one last question, outside of 443, all other ports are only accessed locally? Is that correct?
[2014-07-02 18:59:37 -0400] Eulipion|Work: nodes only need to hit 443 and do all their work via http, correct
[2014-07-02 18:59:49 -0400] jhayden: Thank you again
[2014-07-02 19:03:17 -0400] btm: Chef Office Hours: Join: bit.ly/1o9qXvi Watch: bit.ly/1o9qWaP
[2014-07-02 19:15:48 -0400] fbrier: gyoza - I saw that show - about the finger regenerating and the growing the bladder for that boy.
[2014-07-02 19:16:16 -0400] fbrier: I also saw the article about the company named Cyberdyne.
[2014-07-02 19:20:23 -0400] fbrier: A developer gave a talk on Chef at the reno.rb user group in Reno, NV.  He had every machine on his network including his workstation reproducible using Chef.  He most of his data on servers, like github, and would just recheck them out when rebuilding the machine.  Are there cookbooks and recipes that restore backed up data from MySQL or files, and back them up, or did this fellow just roll his own.
[2014-07-02 19:23:17 -0400] gyoza: if it was me i'd do mysqldumps
[2014-07-02 19:23:40 -0400] gyoza: and then mysql import
[2014-07-02 19:25:23 -0400] gyoza: my aws build script works flawlessly now
[2014-07-02 19:25:26 -0400] gyoza: no more debugging yay
[2014-07-02 19:26:44 -0400] x0nic: fbrier: There is a backup cookbook, that uses the backup gem
[2014-07-02 19:27:28 -0400] x0nic: fbrier: I couldn't find anything that would restore those backups though. I had to roll my own.
[2014-07-02 19:30:33 -0400] Eulipion|Work: gyoza: mysqldumps arent as fast as shutting down mysql on a slave node and copying the data files.  time to restore is significant reduced by copying the data
[2014-07-02 19:32:03 -0400] znsatchel: anyone have familiarity with the error "your private key could not be loaded from <directory>.pem Check your configuration file and ensure that your private key is readable"? all i've done was try to access chef using knife from a different server. I copied my .chef directory from a workstation that works, any ideas?
[2014-07-02 19:32:21 -0400] viglesias: znsatchel: check perms
[2014-07-02 19:32:25 -0400] dansteen: user perms
[2014-07-02 19:32:28 -0400] Eulipion|Work: chown -R $(whoami): ~/.chef
[2014-07-02 19:32:30 -0400] dansteen: jinx! :-)
[2014-07-02 19:32:53 -0400] dansteen: lol
[2014-07-02 19:34:37 -0400] dansteen: I'm having some issues with attribute merging (vs being overwritten).   I have two cookbooks, one of which sets an attribute node['packages'] = [ "python-boto", "vim" ], and another which sets node['packages'] = [ "openswan"]
[2014-07-02 19:34:47 -0400] dansteen: but at the end of the day, only openswan gets installed.
[2014-07-02 19:34:55 -0400] dansteen: both are being set in attributes files.
[2014-07-02 19:35:11 -0400] dansteen: I've even tried converting the arrays to hashes, but no luck.
[2014-07-02 19:35:29 -0400] mmzyk: dansteen I think this might be what you want: http://docs.opscode.com/essentials_node_object_deep_merge.html
[2014-07-02 19:35:33 -0400] Eulipion|Work: dansteen: each cookbook should have it's own packages, dont set them in the node.  at the end of convergence, you'll have all of them
[2014-07-02 19:35:34 -0400] znsatchel: so the permissions to the pem file is not an issue
[2014-07-02 19:36:12 -0400] dansteen: Eulipion:  thanks.  looking.
[2014-07-02 19:36:37 -0400] someara: dansteen that's why you should always namespace your attributes into node['cookbook']['possibly_even_recipe']['whatever']
[2014-07-02 19:37:34 -0400] dansteen: someara and Eulipion:  well, the idea was, to have a single recipe in the "core" cookbook that gets pulled into all of the other cookbooks.
[2014-07-02 19:37:39 -0400] someara: two cookbook that define node['packages'] will merge or override, depending on Things
[2014-07-02 19:37:51 -0400] dansteen: and that recipe reads the node['pacakges'] attribute, and installs whatever it finds.
[2014-07-02 19:38:10 -0400] dansteen: someara:  I'd like it to merge, but it seems to always override.
[2014-07-02 19:38:26 -0400] dansteen: I do a similar thing for users.
[2014-07-02 19:38:42 -0400] Eulipion|Work: sounds like you're trying to make your own version of a converged run_list
[2014-07-02 19:38:50 -0400] dansteen: I have an attribute that contains a list of users, and I add to it depending on the application cookbook
[2014-07-02 19:39:34 -0400] dansteen: Eulipion: well, I didn't think so.   I'm really just trying to be able to append to a list rather than replace it.
[2014-07-02 19:39:51 -0400] Eulipion|Work: right, but you're tring to make a master list of stuff to do, which chef does already
[2014-07-02 19:40:18 -0400] dansteen: Eulipion:  so what would be the correct way to do this?
[2014-07-02 19:40:45 -0400] dansteen: I'm pretty sure I'm complying with that doc you posted above
[2014-07-02 19:41:05 -0400] Eulipion|Work: i think what u want is to make a recipe that grabs the users in a group and adds them.  so in your app recipe, you would 'include_recipe "users::myapp"', and just copy one of the existing users recipes and edit it
[2014-07-02 19:41:53 -0400] Eulipion|Work: having them in a group will make user mgmt easier going forward
[2014-07-02 19:42:14 -0400] Eulipion|Work: i do RBAC for engineers using this method
[2014-07-02 19:43:48 -0400] dansteen: Eulipion: doesn't that violate the berkshelf idea of having each application encapsulated in a single cookbook.
[2014-07-02 19:43:51 -0400] dansteen: ?
[2014-07-02 19:44:28 -0400] dansteen: My goal is to have a single core::users recipe, that gets pulled in from core::default
[2014-07-02 19:44:35 -0400] dansteen: which is included in all other cookbooks.
[2014-07-02 19:45:00 -0400] gyoza: i woudlnt do that
[2014-07-02 19:45:13 -0400] dansteen: then have that recipe read from a "packages" attribute (actually [:company][:packages][:ubuntu])
[2014-07-02 19:45:18 -0400] gyoza: you dont want your users book to run everytime you push out an application
[2014-07-02 19:45:28 -0400] dansteen: and that attribute gets filled in the various cookbooks.
[2014-07-02 19:45:48 -0400] dansteen: and added to by the different applications
[2014-07-02 19:46:44 -0400] Eulipion|Work: my base role includes users::default, which is kinda the same thing.  my admin role also pulls in users::sysadmin.  keeping the users in the users cookbook and the app stuff in the app cookbook gives you isolation.  updating each cookbook shouldnt effect the other, its just a dependency
[2014-07-02 19:46:50 -0400] dansteen: then when you have added the "myapp1" and "myapp2" cookbooks to a node, it automatically adds the packages to the attribute
[2014-07-02 19:46:59 -0400] dansteen: during the compliing phase
[2014-07-02 19:47:12 -0400] dansteen: so once it hits the actual cookbook run all the packages are in the list.
[2014-07-02 19:47:43 -0400] dansteen: so the way I am doing it, I keep users in data bags.
[2014-07-02 19:47:53 -0400] dansteen: and the cookbook automatically pulls them in from there.
[2014-07-02 19:48:06 -0400] dansteen: that way I can add users without modifying the cookbook.
[2014-07-02 19:48:14 -0400] dansteen: gyoza:  why not?
[2014-07-02 19:48:40 -0400] dansteen: isn't the point that these all run at each convergence?  Then you are guaranteed that the machine is in the correct state
[2014-07-02 19:50:29 -0400] Eulipion|Work: because you're reinventing the wheel, and it wont work right.  you have some base cookbook installing the packages for app1 and app2 from their combined package list.  so if you try to add app1 without "core", it won't install anything.
[2014-07-02 19:50:51 -0400] viglesias: someara: is there a way to set endpoint urls in the aws cookbook
[2014-07-02 19:51:00 -0400] Eulipion|Work: if you let app1 install its own deps, they will automatically be added to the node
[2014-07-02 19:52:50 -0400] someara: not that I can see at a glance... I'm not super familiar with it honestly.
[2014-07-02 19:52:59 -0400] someara: fujin may know more about it =_
[2014-07-02 19:54:24 -0400] shlant1: anyone know why I can't specify multiple values for a tag using knife-ec2?
[2014-07-02 19:54:30 -0400] shlant1: see https://github.com/forward3d/cap-ec2/issues/24
[2014-07-02 19:59:21 -0400] dansteen: Eulipion:  How is it re-inventing the wheel (honestly asking).  Isn't it just using leveraging the purpose of attribute merging in the first place?
[2014-07-02 20:03:35 -0400] viglesias: someara: thanks for the pointer
[2014-07-02 20:05:25 -0400] Eulipion|Work: dansteen: attribute merging for something so trivial as package installation seems like a lot of work
[2014-07-02 20:06:10 -0400] Eulipion|Work: i certainly do it, but its gross and never a first choice route
[2014-07-02 20:06:23 -0400] Eulipion|Work: when i can just say "package derp"
[2014-07-02 20:08:09 -0400] dansteen: Eulipion:  ok
[2014-07-02 20:08:45 -0400] Eulipion|Work: i can send u some examples if u want
[2014-07-02 20:09:25 -0400] Eulipion|Work: but you can also look at the top of almost any recipe and find the pattern for this stuf
[2014-07-02 20:09:43 -0400] quellhorst: ERROR: Berkshelf::CommunitySiteError: Error finding cookbook 'java' (1.22.0) at site: 'http://cookbooks.opscode.com/api/v1/cookbooks'
[2014-07-02 20:10:03 -0400] quellhorst: any idea how i could fix that when running knife solo cook?
[2014-07-02 20:16:02 -0400] miketheman: given that I could declare an environment variable as 'FOO', 'foo', or 'foobar', what ENV statement would I use to succinctly catch all of them?
[2014-07-02 20:16:51 -0400] gchristensen: miketheman: for the sanity of your future self and clarity, I would just require that it *only* work as FOO
[2014-07-02 20:17:09 -0400] miketheman: gchristensen: agreed - but people are people.
[2014-07-02 20:17:21 -0400] Eulipion|Work: miketheman: rubular.com
[2014-07-02 20:17:22 -0400] dansteen: Eulipion: what would be a good example?
[2014-07-02 20:17:23 -0400] gchristensen: miketheman: and if it doens't work, its better and more clear that way
[2014-07-02 20:17:38 -0400] gchristensen: miketheman: the other thing is, what has higher precedence? FOO? Foo? FOo? FoO?
[2014-07-02 20:18:04 -0400] miketheman: gchristensen: that's absolutely true - it's a gongshow
[2014-07-02 20:18:32 -0400] mivok: miketheman: I'd try something like ENV['FOO'] || ENV['foo'] || ENV['foobar']
[2014-07-02 20:18:55 -0400] miketheman: mivok: I have that already - and it bothers me for some reason
[2014-07-02 20:19:02 -0400] miketheman: it feels 'icky'
[2014-07-02 20:19:14 -0400] gchristensen: what you're talking about is icky
[2014-07-02 20:19:39 -0400] miketheman: gchristensen: thanks. :)
[2014-07-02 20:21:02 -0400] shlant1: if knife-ec2 fails during the chef run, is the only way to rerun chef is spin up a new instance? running chef-client on the instance results in an empty run lst
[2014-07-02 20:21:04 -0400] shlant1: list
[2014-07-02 20:21:40 -0400] shlant1: knife ec2 server create to be specific
[2014-07-02 20:21:59 -0400] gyoza: yo
[2014-07-02 20:22:02 -0400] gyoza: what does the unf gem do
[2014-07-02 20:22:08 -0400] gyoza: im tired of knife yelling at me
[2014-07-02 20:22:09 -0400] gyoza: lol
[2014-07-02 20:22:25 -0400] gyoza: also unf circa 1996 #ansi
[2014-07-02 20:22:55 -0400] miketheman: shlant1: I typically go to the instance and run
[2014-07-02 20:23:03 -0400] miketheman: chef-client -j /etc/chef/first-boot.json
[2014-07-02 20:23:26 -0400] miketheman: that file has the run list from the bootstrap phase
[2014-07-02 20:25:22 -0400] icarus: what is the best way to assign a role to several nodes?
[2014-07-02 20:26:12 -0400] shlant1: miketheman: I will try that. thanks
[2014-07-02 20:28:18 -0400] Eulipion|Work: dansteen: http://pastebin.com/pQ2UvmyH
[2014-07-02 20:29:44 -0400] Eulipion|Work: dansteen: so sysadmins exist everywhere, devs only exist in devland (and i remove keys that they can get with sudo), and special engineers (architects) exist on my jenkins boxes
[2014-07-02 20:31:34 -0400] drag00n: Can someone help out with granting a user permission on a specific db with the database cookbook, I get how to create one, but for some reason I am having trouble figuring out how to assign all permissions on one db
[2014-07-02 20:32:59 -0400] Eulipion|Work: drag00n: http://pastebin.com/uV5QZVV7
[2014-07-02 20:33:05 -0400] fbrier: gyoza, x0nic, and Eulipion|Work - Thank you for the feedback and ideas on backing up.
[2014-07-02 20:33:15 -0400] gyoza: i didnt help but you're welcome:)
[2014-07-02 20:33:53 -0400] fbrier: Not knowing something is out there is helpful because you at least know you are not reinventing the wheel.
[2014-07-02 20:34:27 -0400] fbrier: Plus if you do write something, then other people might find it useful if you make it generic enough.
[2014-07-02 20:34:43 -0400] dansteen: Eulipion:  thanks!  I'll look through that.
[2014-07-02 20:34:50 -0400] drag00n: Eulipion|Work: I suppose that would work to
[2014-07-02 20:35:08 -0400] drag00n: Eulipion|Work: I'll try that out
[2014-07-02 20:36:19 -0400] Eulipion|Work: i use the database cookbook sometimes, but it kinda depends on the use case.  this is how i use the database cookbook: http://pastebin.com/pSv2JK9h
[2014-07-02 20:38:55 -0400] spion06: would anyone be able to look at https://github.com/opscode-cookbooks/lvm/pull/32?
[2014-07-02 20:41:43 -0400] someara: spin06 looking now
[2014-07-02 20:45:24 -0400] drag00n: https://www.irccloud.com/pastebin/njWYrPoe
[2014-07-02 20:45:34 -0400] drag00n: that's what I needed! thanks!
[2014-07-02 20:46:01 -0400] Eulipion|Work: ;)
[2014-07-02 20:51:41 -0400] gondoi: i'm trying to use the mysql cookbook and have included mysql::server, but I can't figure out how to signal a service restart across platform families.. the service resource setup is inconsistent and does not go back and override node['mysql']['service_name'] that I can find. Anyone know how to signal a restart for mysql in a wrapper?
[2014-07-02 20:53:38 -0400] FoRMaTC: Hi, when is Powershell Desired state implemented in Chef?
[2014-07-02 20:57:13 -0400] icarus: hello all
[2014-07-02 20:57:25 -0400] icarus: im getting a strange knife error for some of my node names
[2014-07-02 20:57:26 -0400] icarus: WARNING: Failed to connect to xxx.xxx.xxx.xxx -- Net::SSH::AuthenticationFailed: Authentication failed for user username@xxx.xxx.xxx.xxx@xxx.xxx.xxx.xxx
[2014-07-02 20:59:10 -0400] Eulipion|Work: gondoi: http://pastebin.com/HwD9dF41
[2014-07-02 21:00:14 -0400] gondoi: Eulipion|Work: I want to use the syntax on line 13, but i get ERROR: resource template[/etc/mysql/conf.d/my.cnf] is configured to notify resource service[mysql] with action restart, but service[mysql] cannot be found in the resource collection.
[2014-07-02 21:01:50 -0400] Eulipion|Work: you need to add a mysql dependency in your metadata
[2014-07-02 21:01:59 -0400] gondoi: the problem is that depending on the platform it changes the service resource name :(
[2014-07-02 21:02:03 -0400] gondoi: it's there
[2014-07-02 21:02:38 -0400] Eulipion|Work: gondoi: try something like this, http://pastebin.com/wKF2uYCt
[2014-07-02 21:02:51 -0400] gondoi: https://github.com/opscode-cookbooks/mysql/blob/master/libraries/provider_mysql_service_rhel.rb#L196-L199
[2014-07-02 21:03:05 -0400] gondoi: that changes depending on the variables above...
[2014-07-02 21:03:12 -0400] gondoi: so i don't get a service[mysql] consistently
[2014-07-02 21:04:31 -0400] Eulipion|Work: gondoi: this will do it: http://pastebin.com/FiYAbrVp
[2014-07-02 21:05:13 -0400] gondoi: I agree, but what I don't agree with is that I have to re-define the service just to restart it :(
[2014-07-02 21:05:16 -0400] gondoi: oh well
[2014-07-02 21:05:17 -0400] gondoi: thanks
[2014-07-02 21:06:17 -0400] someara: you don't reference the service name directly. you use the mysql_service resource
[2014-07-02 21:06:30 -0400] someara: the internal service name is an implementation detail
[2014-07-02 21:06:53 -0400] gondoi: someara: we are wanting to create our custom config and restart...: https://github.com/rackspace-cookbooks/mysql-multi/blob/master/recipes/default.rb
[2014-07-02 21:07:18 -0400] gondoi: more specificaly https://github.com/rackspace-cookbooks/mysql-multi/blob/master/recipes/default.rb#L53-L62
[2014-07-02 21:08:20 -0400] x0nic: fbrier: Its very alpha right now, but I have started a database restore cookbook. https://github.com/X0nic/chef-database_restore
[2014-07-02 21:08:24 -0400] someara: notifies :restart, 'mysql_service[default]', :delayed
[2014-07-02 21:08:32 -0400] gondoi: oh
[2014-07-02 21:08:35 -0400] gondoi: haha
[2014-07-02 21:08:37 -0400] gondoi: interesting
[2014-07-02 21:08:42 -0400] someara: you won't even see service[mysql] in your resource collection
[2014-07-02 21:08:49 -0400] gondoi: i'll give that a shot.. thanks a lot someara
[2014-07-02 21:08:56 -0400] someara: no prob!
[2014-07-02 21:09:28 -0400] gondoi: i was going to suggest adding that to the readme but it's there as an example :D
[2014-07-02 21:09:54 -0400] gondoi: only suggestion I have is to call out the notifies syntax.. but this is awesome! thanks again
[2014-07-02 21:10:50 -0400] someara: will merge PR on the README ;)
[2014-07-02 21:12:22 -0400] gondoi: someara: how did I know you would say that? :P
[2014-07-02 21:15:11 -0400] someara: gondoi, If you're looking for advice, I'd go even further and not include_recipe 'mysql::server' and use the mysql_service resource directly in your recipe
[2014-07-02 21:15:44 -0400] someara: I'm actually considering removing the recipe once I get a couple more Real Library Cookbooks on the market
[2014-07-02 21:16:31 -0400] someara: work in progress: https://github.com/someara/httpd
[2014-07-02 21:16:43 -0400] someara: but slow because of supermarket transition, etc
[2014-07-02 21:17:35 -0400] someara: https://github.com/someara/httpd/blob/master/test/fixtures/cookbooks/httpd_test_multi/recipes/server.rb#L21-L23
[2014-07-02 21:17:39 -0400] gondoi: someara: interesting
[2014-07-02 21:19:16 -0400] someara: reusable primitives > opinionated cookbooks
[2014-07-02 21:29:09 -0400] spheromak: someara: ++
[2014-07-02 21:32:00 -0400] someara: gondoi if you do that, make sure to name it mysql_service[default] , since a 6.0 version will likely support multiple mysql instances on a single machine instead of the current singleton implementaiton
[2014-07-02 21:32:28 -0400] Eulipion|Work: someara: can you take a look @ https://tickets.opscode.com/browse/COOK-4744
[2014-07-02 21:33:06 -0400] gondoi: someara: in my pull request, or just in usage?
[2014-07-02 21:33:20 -0400] someara: just in usage
[2014-07-02 21:33:24 -0400] someara: also the PR =)
[2014-07-02 21:33:38 -0400] gondoi: i have it set to mysql_service[default], but it just bombed on my ubuntu 14.04 test... although that was with include_recipe.. i'm trying the call of the resource instead now
[2014-07-02 21:33:40 -0400] gondoi: :D
[2014-07-02 21:33:44 -0400] gondoi: i'll fix the PR
[2014-07-02 21:34:38 -0400] gondoi: someara: actually I think the wording is clear on the PR, but let me know if you don't think so and I can fix it
[2014-07-02 21:34:48 -0400] someara: Eulipion|Work I'm not a subject matter expert on EC2, so I can't really comment on that without research...
[2014-07-02 21:35:03 -0400] Eulipion|Work: someara: thx, i'll do some digging
[2014-07-02 21:35:05 -0400] someara: ps: searching for a AWS SME for the AWS cookbooks =)
[2014-07-02 21:35:45 -0400] Eulipion|Work: GP2 is a new class of disk, might be that aws_right doesnt support it yet.  cookbook bombs with anything except standard
[2014-07-02 21:36:59 -0400] someara: gondoi, I did integration tests on DO... https://gist.github.com/someara/d36c4634dfbd062015eb
[2014-07-02 21:38:50 -0400] someara: what version of mysql are you trying? https://github.com/opscode-cookbooks/mysql/blob/master/.kitchen.cloud.yml#L291
[2014-07-02 21:39:04 -0400] someara: you can probably plug kitchen-rackspace in there pretty easy
[2014-07-02 21:39:36 -0400] someara: export KITCHEN_YAML=.kitchen.rackspace.yml ; bundle exec kitchen test ubuntu-14.04
[2014-07-02 21:41:21 -0400] gondoi: someara: oh i'm just running locally on vagrant
[2014-07-02 21:42:12 -0400] gondoi: someara: looks like berks is pulling 5.3.6
[2014-07-02 21:42:40 -0400] someara: that's current
[2014-07-02 21:42:50 -0400] gondoi: my tests just got to 14.04 again, i'll let you know what the error is if I get it again
[2014-07-02 21:43:19 -0400] gondoi: btw, it was passing converge with the version currently on github that I linked to earlier
[2014-07-02 21:45:28 -0400] gondoi: someara: got it again...
[2014-07-02 21:45:32 -0400] gondoi: let me gist the error
[2014-07-02 21:46:28 -0400] gondoi: someara: https://gist.github.com/gondoi/a1e38d1ae03337a8d0f7
[2014-07-02 21:46:42 -0400] Eulipion|Work: someara: can you get this merged - i tested the fix.  https://github.com/opscode-cookbooks/aws/pull/72/commits
[2014-07-02 21:50:06 -0400] gondoi: strange, I was able to login into the instance and manual start mysql :/
[2014-07-02 21:50:38 -0400] someara: hold on ya'll... on the phone brb
[2014-07-02 21:50:51 -0400] gondoi: :D no worries someara
[2014-07-02 21:51:32 -0400] viglesias: pweiss: i have packages ready for testing on release-repo
[2014-07-02 21:53:45 -0400] medya: what do they mean by front end and backend servers for chef-server, are there two servers ? I am talking about this http://docs.opscode.com/server_firewalls_and_ports.html
[2014-07-02 21:54:10 -0400] gondoi: someara: I think I found the issue.. (on my side) testing
[2014-07-02 21:57:44 -0400] Eulipion|Work: medya: chef runs on a variety of ports (backend), and nginx is the frontend (proxy) - and provides things like ssl
[2014-07-02 22:02:26 -0400] spheromak: tomduffield: just used knife-container to build some local dev stuff.. love it!
[2014-07-02 22:04:41 -0400] holoway: spheromak: right? he totally killed it
[2014-07-02 22:05:38 -0400] spheromak: holoway: holoway it just saved me so much pain getting some verry old/bad legacy stuff setup locally
[2014-07-02 22:06:18 -0400] spheromak: when is it gonna be in chefdk :)
[2014-07-02 22:07:38 -0400] rellis: Is there a cookbook for dealing with btrfs? ie setting up a multi device btrfs filesystem and mount points??
[2014-07-02 22:07:50 -0400] spheromak: rellis: theres the filesystem cook
[2014-07-02 22:07:58 -0400] spheromak: but im not sure if it was extended for btrfs
[2014-07-02 22:08:21 -0400] rellis: spheromak: I will check that out. Thanks. Also multiple question marks were accidental..
[2014-07-02 22:08:22 -0400] spheromak: rellis: https://supermarket.getchef.com/cookbooks/filesystem
[2014-07-02 22:08:38 -0400] spheromak: tho i haven't been involved in it for a verry long time :D
[2014-07-02 22:09:09 -0400] rellis: heh, fair enough.
[2014-07-02 22:16:39 -0400] rellis: Hmm so it seem the chef filesystem cookbook doesn't support btrfs. Anyone know of another cookbook to deal with it?
[2014-07-02 22:17:41 -0400] medya: @Eulipion|Work if I install chef in the cloud do I need to open all those backened ports too ?
[2014-07-02 22:17:47 -0400] medya: in the firewall
[2014-07-02 22:19:06 -0400] tomduffield: thanks spheromak! it probably wont be in ChefDK until ChefDK supports knife.rb config
[2014-07-02 22:19:29 -0400] Eulipion|Work: medya: each use case should really have its own security group with its own permissions, which you can combine.   its just 443 unless u use bookshelf, which is 4321
[2014-07-02 22:20:07 -0400] Eulipion|Work: also depends on your amazon setup, are u using a vpc?
[2014-07-02 22:20:18 -0400] medya: why backend has ports?
[2014-07-02 22:21:01 -0400] Eulipion|Work: huh?
[2014-07-02 22:22:21 -0400] inigo88: hello.. i'm trying to switch to chefdk from my current setup.  I'm on a mac and have modified my paths so /opt/chefdk
[2014-07-02 22:22:29 -0400] inigo88: do i need to rip out rvm?
[2014-07-02 22:26:01 -0400] Eulipion|Work: someara: thx
[2014-07-02 22:31:18 -0400] gyoza: man netflix ice is so l33t guys
[2014-07-02 22:31:21 -0400] gyoza: highly recommended
[2014-07-02 22:34:15 -0400] Eulipion|Work: gyoza: nice find
[2014-07-02 23:16:41 -0400] gyoza: ec2 ebs volume backup script is working
[2014-07-02 23:16:44 -0400] gyoza: pheeeeeeeeeeeer
[2014-07-02 23:16:50 -0400] gyoza: GOING HOME
[2014-07-02 23:21:56 -0400] jtimberman: inigo88: you don't *have* to, but if you don't need to manage multiple versions of ruby anymore, you could.
[2014-07-02 23:22:08 -0400] jtimberman: i still have my .rbenv around "just in case" :)
[2014-07-02 23:22:47 -0400] spheromak: rellis: it shouldn't be too hard to make the lwrp / libs in filesystem cook work for btrfs
[2014-07-02 23:23:33 -0400] inigo88: jtimberman: thanks.  I'm taking the plunge.  I'm removing or rather commenting out rvm from my profile and adding /opt/chefdk/embedded/bin  .. i'll see how it goes
[2014-07-02 23:26:52 -0400] inigo88: if i intend to use the embedded ruby in chefdk, do i install gems through the chef command then? as in 'chef gem install bundler'
[2014-07-02 23:27:58 -0400] spheromak: inigo88: yea
[2014-07-02 23:30:12 -0400] inigo88: spheromak: awesome.. no more dealing with multiple ruby versions.
[2014-07-02 23:32:29 -0400] lyken: you could probably alias chef gem to gem too :)
[2014-07-02 23:37:23 -0400] spheromak: tomduffield: one thing re: docker images  you guys gonna use tags instead of naming those base boxes  os_version ?
[2014-07-02 23:40:56 -0400] diegows: How can I check if chef is running in local mode from knife.rb?
[2014-07-02 23:41:04 -0400] diegows: I want to skype a section in local mode
[2014-07-02 23:41:10 -0400] diegows: I want to skip a section in local mode
[2014-07-02 23:41:13 -0400] diegows: :P
[2014-07-02 23:49:21 -0400] diegows: where is the documentation of the chef API, I'm not talking about the server API, I'm talking about the internal api
[2014-07-02 23:54:57 -0400] tomduffield: spheromak: the plan is to do chef/os-version:chef_version at the moment
[2014-07-02 23:56:02 -0400] tomduffield: diegows: https://github.com/opscode/chef/blob/master/lib/chef/config.rb#L320 (i.e. Chef::Config[:local_mode])
[2014-07-02 23:56:35 -0400] zetan: hello chefs
[2014-07-02 23:57:07 -0400] diegows: tomduffield, thanks!
[2014-07-02 23:57:29 -0400] zetan: Has anyone tried opennms-cookbook? Why might I get the error   ERROR: package[opennms] (opennms-cookbook::default line 36) had an error: Chef::Exceptions::Package: No version specified, and no candidate version available for opennms
[2014-07-02 23:58:10 -0400] spheromak: tomduffield: ok yea that makes sense :P
[2014-07-02 23:58:26 -0400] inigo88: i ran a test bundle exec berks install and it segfaulted complaining about json 1.8.1 bug ..anyone seen this??
[2014-07-02 23:59:17 -0400] spheromak: zetan: check that the metadata has a name field?
[2014-07-02 23:59:47 -0400] spheromak: inigo88: inigo88 aren't you using chefdk ? shouldnt need to bundle exec

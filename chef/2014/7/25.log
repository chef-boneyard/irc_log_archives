[2014-07-25 00:00:24 -0400] lamont_oc: right but the point is to wait for the database to come in order to admin actions to build tablespaces, add users and acls and all that
[2014-07-25 00:00:38 -0400] jharley: lamont_oc: yep
[2014-07-25 00:00:56 -0400] Damm: cannot load such file -- ci/reporter/minitest
[2014-07-25 00:00:57 -0400] lamont_oc: if youve got it in a load balancer and its getting slammed with connections already  thats a rather larger problem that youve got there
[2014-07-25 00:01:09 -0400] jharley: I got tired at guessing at retries, sometimes on my cowrkers machines the things run slower
[2014-07-25 00:01:53 -0400] Damm: heh we have ssd and ruts
[2014-07-25 00:01:55 -0400] Damm: rust*
[2014-07-25 00:02:00 -0400] Damm: so I know the pain of the slowies
[2014-07-25 00:05:28 -0400] jharley: Damm: yea.. inconsistent performance made me find a lot of places where I was relaying on timing and not reality though, which was kind of a fun realization
[2014-07-25 00:05:37 -0400] jharley: anyway, Ive gotta jet.  Thanks for the chat, gents.
[2014-07-25 00:05:53 -0400] jharley: @lamont_oc Ill open that issue, as I think that would a cool feature to have in core
[2014-07-25 00:06:18 -0400] jharley: @lamont_oc: even if it just depended on status or something
[2014-07-25 00:35:37 -0400] someara: jharley you can do things like this: https://github.com/opscode-cookbooks/mysql/blob/master/libraries/provider_mysql_service_omnios.rb#L166-L170
[2014-07-25 00:48:47 -0400] Damm: damn a single space
[2014-07-25 00:48:49 -0400] Damm: I love ruby
[2014-07-25 00:49:05 -0400] Damm: cookbook ("something ... fail and reduce 1 space and your in love
[2014-07-25 00:49:18 -0400] Otterley: everyone, if you're using minitest-chef-handler and all of a sudden your tests are failing, here's why: https://github.com/calavera/minitest-chef-handler/pull/82
[2014-07-25 00:49:25 -0400] Otterley: I LOVE RUBY SO MUCH
[2014-07-25 00:49:45 -0400] Damm: eww
[2014-07-25 00:49:48 -0400] Damm: he knows better
[2014-07-25 00:50:16 -0400] Damm: hmm hope he turns around fast on that
[2014-07-25 00:51:07 -0400] Otterley: at least the ci_reporter author correctly used semver
[2014-07-25 00:51:13 -0400] Otterley: so I'll give him points for that
[2014-07-25 00:51:23 -0400] Damm: nah calavera knows better than to blindly do that
[2014-07-25 00:51:34 -0400] Damm: he's done enough ruby at EY and other places to know better
[2014-07-25 00:51:57 -0400] Otterley: calavera isn't the author of ci_reporter
[2014-07-25 01:07:03 -0400] Damm: nope he's the author of minitest-chef-handler
[2014-07-25 01:07:19 -0400] Damm: that has the gemspec
[2014-07-25 02:58:19 -0400] abathur: anyone around?
[2014-07-25 03:03:23 -0400] drag00n: can anyone help with this http://stackoverflow.com/questions/24924996/problems-with-default-recipe-chef-passenger-apache
[2014-07-25 03:03:48 -0400] drag00n: have tried several iterations, but I cannot get it to work
[2014-07-25 03:06:36 -0400] abathur: heh
[2014-07-25 03:09:05 -0400] abathur: not familiar with it (I'm just here to get help, too) but I'll take a look
[2014-07-25 03:09:24 -0400] drag00n: thanks
[2014-07-25 03:09:38 -0400] drag00n: I am trying to test with just that recipe
[2014-07-25 03:09:51 -0400] drag00n: my guess is there may be a rbenv mixup perhaps?
[2014-07-25 03:10:10 -0400] coderanger: drag00n: So the issue is that you aren't updating your PATH in memory after installing via rbenv
[2014-07-25 03:10:35 -0400] coderanger: drag00n: So it is finding the builtin ruby the chef uses which then fails
[2014-07-25 03:11:14 -0400] coderanger: abathur: What is your question?
[2014-07-25 03:11:47 -0400] drag00n: that makes sense
[2014-07-25 03:11:48 -0400] abathur: I'm having a little trouble setting up the nginx cookbook to install a module that isn't already supported by the cookbook
[2014-07-25 03:12:30 -0400] abathur: the cookbook documentation has a section that seems to address this (https://github.com/miketheman/nginx#adding-new-modules)
[2014-07-25 03:13:06 -0400] coderanger: drag00n: Try updating ENV['PATH']
[2014-07-25 03:14:35 -0400] coderanger: abathur: abathur See https://github.com/miketheman/nginx/blob/master/recipes/http_geoip_module.rb for a relatively complex example
[2014-07-25 03:15:04 -0400] coderanger: abathur: Or https://github.com/miketheman/nginx/blob/master/recipes/http_echo_module.rb for a simpler one
[2014-07-25 03:15:46 -0400] abathur: I think what may be happening is that there's actually something else in the run causing me trouble, let me see if I can get a pastebin or something together real quick
[2014-07-25 03:16:07 -0400] coderanger: abathur: Okay, I'm about to head out for a bit but just ask and someone will get to you when they can
[2014-07-25 03:18:20 -0400] abathur: k
[2014-07-25 03:18:21 -0400] abathur: http://pastebin.com/3rRPrE2n
[2014-07-25 03:20:11 -0400] coderanger: abathur: Whats the error?
[2014-07-25 03:20:35 -0400] abathur: running chef-solo from vagrant btw; so I'll have like chef.add_recipe("custom_cookbook") and then chef.add_recipe("nginx::source") but the default nginx recipe is running
[2014-07-25 03:21:52 -0400] coderanger: abathur: Ahh, you need to set your module in the attributes, not run it yourself
[2014-07-25 03:22:17 -0400] coderanger: abathur: https://github.com/miketheman/nginx/blob/master/attributes/source.rb#L38
[2014-07-25 03:22:44 -0400] coderanger: abathur: So copy that and add your extra one in your own attributes
[2014-07-25 03:22:46 -0400] Bill_: Anyone know why I'd get "ERROR: No resource or method named `chef_handler' for `Chef::Recipe ..."
[2014-07-25 03:22:52 -0400] abathur: I've been trying to set it on the node, but the nginx::default recipe runs and it appends nginx:: to all of the include_recipe directives coming out
[2014-07-25 03:22:56 -0400] Bill_: first time I've had a resource do that
[2014-07-25 03:23:14 -0400] coderanger: Bill_: You aren't loading the chef handler cookbook
[2014-07-25 03:23:44 -0400] coderanger: abathur: I know that was fixed in master, let me check if its in a release yet
[2014-07-25 03:23:53 -0400] Bill_: you're right, I'm not.  didn't realize it was required from the chef_handler documentation.
[2014-07-25 03:24:07 -0400] abathur: so I'll try to include "custom_cookbook::http_auth_pam_module" in my vagrant/chef node
[2014-07-25 03:24:09 -0400] Bill_: thanks coderanger
[2014-07-25 03:24:10 -0400] coderanger: abathur: Yeah, just make sure you have the latest (or anything recent) version
[2014-07-25 03:24:24 -0400] coderanger: Bill_: Set it as a dependency of your wrapper/application cookbook
[2014-07-25 03:24:27 -0400] abathur: and nginx:: gets prepended
[2014-07-25 03:24:45 -0400] abathur: and then it of course can't find the recipe :)
[2014-07-25 03:24:48 -0400] abathur: hmm
[2014-07-25 03:24:55 -0400] abathur: wonder if I've got the old one cached maybe?
[2014-07-25 03:25:29 -0400] abathur: I know I've had some headaches in the past with vagrant/chef caching a cookbook I needed updates to; how recent was the fix?
[2014-07-25 03:26:11 -0400] coderanger: abathur: https://github.com/miketheman/nginx/commit/13d1b1a80d71f4728e2b96be026424e245422dc8 over a year
[2014-07-25 03:27:16 -0400] abathur: not sure that's quite where I'm getting hung up
[2014-07-25 03:27:54 -0400] abathur: so if I add it to my vagrant node as "custom_cookbook::http_auth_pam_module" the error that'll turn up is recipe not found in cookbook nginx
[2014-07-25 03:28:08 -0400] abathur: which seems to me like it's getting beaten to the punch by: https://github.com/miketheman/nginx/blob/master/recipes/default.rb#L30
[2014-07-25 03:28:34 -0400] abathur: even though I'm using chef.add_recipe("nginx::source")
[2014-07-25 03:29:09 -0400] coderanger: abathur: modules vs. extra_modules
[2014-07-25 03:29:40 -0400] abathur: bah
[2014-07-25 03:29:44 -0400] abathur: ok
[2014-07-25 03:29:45 -0400] coderanger: Ahh no, that got changed at some point
[2014-07-25 03:29:47 -0400] abathur: will try that
[2014-07-25 03:29:49 -0400] abathur: ?
[2014-07-25 03:29:51 -0400] coderanger: its modules on both
[2014-07-25 03:30:02 -0400] abathur: aha
[2014-07-25 03:30:27 -0400] coderanger: abathur: Oh, just don't use nginx::default
[2014-07-25 03:30:35 -0400] coderanger: use only nginx::source and you should be fine
[2014-07-25 03:30:39 -0400] coderanger: thats silly though
[2014-07-25 03:34:55 -0400] Bill_: coderanger: adding the chef_handler cookbook fixed it.
[2014-07-25 03:34:58 -0400] Bill_: Thankyou
[2014-07-25 03:38:34 -0400] Bill_: I freaking love chef!!!
[2014-07-25 03:38:47 -0400] Bill_: just saying...
[2014-07-25 03:39:11 -0400] crumb: have you tried ansible?
[2014-07-25 03:39:30 -0400] Bill_: no
[2014-07-25 03:39:43 -0400] Bill_: used cfengine2 a lot in the past
[2014-07-25 03:52:28 -0400] abathur: hmm, looks like it is a past cookbook caching issue
[2014-07-25 03:55:01 -0400] abathur: I have a cached cookbook at least from september '13, it seems, heh
[2014-07-25 04:12:21 -0400] akshay: exiet
[2014-07-25 04:15:53 -0400] Scrivener: I've got a recipe that should be really simple. I'll make a pastie that has equivalent examples of what i'm trying to do. http://pastie.org/private/yl12vy9wdgmpqdnywtkaa
[2014-07-25 04:16:15 -0400] Scrivener: I have templates in the right place, everything is properly named, and when I run that recipe I don't receive any errors.
[2014-07-25 04:16:41 -0400] Scrivener: However, the only output I get is in response to the shell code at the bottom. I try to create a directory and several files from templates, but not a single one of those actions is performed. What am I missing?
[2014-07-25 04:17:09 -0400] Scrivener: The shell code at the bottom runs just fine, so I know it's not ignoring the whole recipe.
[2014-07-25 04:17:23 -0400] coderanger: Scrivener: How are you running chef?
[2014-07-25 04:17:31 -0400] Scrivener: coderanger, this is in chef-solo through AWS Opsworks.
[2014-07-25 04:18:05 -0400] coderanger: Scrivener: Make sure your recipes are all in sync, you can throw a Chef::Log.info('!'*100) at the top of the file or something
[2014-07-25 04:18:38 -0400] Scrivener: coderanger, what does it mean to have them in sync? I can look on the instance and see that the code in its copy of the chef repo is the same as in this recipe here, if that's what you mean.
[2014-07-25 04:19:02 -0400] Scrivener: Will tossing that line in allow me to see what it's doing as it encounters each line?
[2014-07-25 04:19:11 -0400] Scrivener: Or resource, or w/e
[2014-07-25 04:20:12 -0400] Scrivener: I found it strange that it confirms running the shell code, but says nothing about the bulk of the recipe.
[2014-07-25 04:20:39 -0400] Scrivener: No errors in writing the files, nor even indication that it's writing.
[2014-07-25 04:26:29 -0400] Scrivener: coderanger, looks like one extra line was generated in the log when I ran the recipe
[2014-07-25 04:26:32 -0400] Scrivener: [2014-07-25T04:24:01+00:00] INFO: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
[2014-07-25 04:27:12 -0400] Scrivener: :)
[2014-07-25 04:27:29 -0400] Scrivener: I'm not quite sure what the point of that was /newb
[2014-07-25 04:48:32 -0400] coderanger: Scrivener: That was just to make sure the correct versions of the recipe code were running, and it is
[2014-07-25 04:48:40 -0400] coderanger: Scrivener: Can you pastebin the output from chef-solo?
[2014-07-25 04:49:07 -0400] Scrivener: coderanger, sure, I'll PM the relevant lines (where it loads and runs the recipe)
[2014-07-25 04:51:13 -0400] coderanger: Scrivener: Can you also pastebin the rest of the recipe? This looks like something is executing at compile time, so the output might be out of order compared to what you expect
[2014-07-25 04:51:37 -0400] Scrivener: coderanger, the rest of the log, or you want the actual recipe?
[2014-07-25 04:51:48 -0400] coderanger: The recipe code
[2014-07-25 04:52:09 -0400] coderanger: Just wanting to confirm that there is an execute resouce running at compile time :)
[2014-07-25 04:52:28 -0400] coderanger: Or possibly a package
[2014-07-25 04:56:19 -0400] coderanger: Scrivener: so you are calling exec there
[2014-07-25 04:56:26 -0400] coderanger: You meant execute
[2014-07-25 04:56:34 -0400] coderanger: but exec is the actual exec() syscall
[2014-07-25 04:56:42 -0400] coderanger: So the replaces the current process with yum
[2014-07-25 04:56:47 -0400] Scrivener: Oh. Ohhhhh.
[2014-07-25 04:57:06 -0400] Scrivener: So basically I'm usurping its ability to do anything else with the process installing the package?
[2014-07-25 04:57:17 -0400] coderanger: I'm surprised I've not seen that happen before come to think of it
[2014-07-25 04:57:23 -0400] coderanger: So two things to fix
[2014-07-25 04:57:30 -0400] coderanger: the first exec should really be a package resource
[2014-07-25 04:57:32 -0400] Scrivener: I would never have realized it on my own for a very long time
[2014-07-25 04:57:41 -0400] coderanger: So change that to: package "s3cmd"
[2014-07-25 04:57:47 -0400] coderanger: and then the second one should be execute
[2014-07-25 04:58:06 -0400] Scrivener: Awesome. You're a wizard, I need to send cookies.
[2014-07-25 04:58:27 -0400] Scrivener: After your help last night, I went on to do quite a bit. I think that was last night, anyway.
[2014-07-25 04:58:28 -0400] coderanger: We should probably override #exec in the recipe context to prevent this /cc kallistec
[2014-07-25 04:59:05 -0400] coderanger: No problem :)
[2014-07-25 05:03:01 -0400] Scrivener: Moment of truth as we run this recipe again. If it works, I'm officially ready for the migration I'm supposed to do tonight.
[2014-07-25 05:04:25 -0400] Scrivener: coderanger, Cannot find a resource for s3cmd on amazon version 2014.03 :)
[2014-07-25 05:04:30 -0400] Scrivener: I think that's why I was doing it the other way.
[2014-07-25 05:04:40 -0400] coderanger: Whats the resource look like now?
[2014-07-25 05:04:49 -0400] coderanger: It should be execute 's3cmd ...'
[2014-07-25 05:06:32 -0400] Scrivener: Erm, it's actually the package resource doing this I think -- and hold on, I think I butchered it :) I will fix and try again.
[2014-07-25 05:24:49 -0400] Scrivener: coderanger, working wonderfully
[2014-07-25 05:25:02 -0400] Scrivener: There was an issue with my .s3cfg, but that's not related :)
[2014-07-25 05:29:49 -0400] coderanger: \o/
[2014-07-25 05:53:06 -0400] Scrivener: coderanger, one more -- this shouldn't be long... I have one template that should be grabbing attributes from the stack JSON in Opsworks. I'm attempting to access those attributes like so: <% node['attribute']['i']['want'] %>
[2014-07-25 05:53:26 -0400] coderanger: Scrivener: You probably mean <%=
[2014-07-25 05:53:33 -0400] Scrivener: Aaaand that's exactly it
[2014-07-25 05:53:44 -0400] Scrivener: Thought it'd be easy :)
[2014-07-25 05:53:57 -0400] coderanger: <% is for non-outputing code, like ifs and loops
[2014-07-25 05:54:02 -0400] coderanger: <%= is for output
[2014-07-25 05:54:18 -0400] Scrivener: That's why everything is turning up empty
[2014-07-25 05:54:28 -0400] Scrivener: I haven't done anything ruby in a while ._.
[2014-07-25 06:21:02 -0400] Damm: <%#
[2014-07-25 06:21:05 -0400] Damm: <%~
[2014-07-25 06:21:10 -0400] Damm: <--
[2014-07-25 07:22:44 -0400] kernelpanik: HI guys,  "chef-server-ctl test" reported this error: /environments/ENVIRONMENT/cookbooks API endpoint with multiple versions of multiple cookbooks with no environment constraints from a non-default environment when fetching cookbooks should respond with 200 OK and latest versions of ALL cookbooks. I did not find any good information googling, have you ever seen this error?
[2014-07-25 08:14:08 -0400] double_p: happy sysadmin-day!
[2014-07-25 08:22:07 -0400] ingolf: a question again. I want write this template http://pastebin.com/8GWekee3 to 2 different locations (letzt say /etc/foo/my.conf /etc/bar/my.conf) and the resulting files should differ
[2014-07-25 08:23:26 -0400] ingolf: my idea was to have default[:all_services] = .... and do something like node[:my_service] = node[:all_services] ; node[:my_service] = node[:bar_service]
[2014-07-25 08:23:52 -0400] ingolf: (like override the config twice (once by default values and second by specific values)
[2014-07-25 08:24:14 -0400] ingolf: Is that a good idea? or is there something that does that already?
[2014-07-25 08:25:33 -0400] SmudgerDan: Morning all, does anyone know what installer_type is a Windows Update package is?
[2014-07-25 08:28:05 -0400] SmudgerDan: if I run it with "custom", and I run it with the options "/quite /nodialog /norestart" when it completes chef doesnt know about it so it ends up timing out
[2014-07-25 08:28:51 -0400] SmudgerDan: it's fine when the dialog pops up to say "completed" but of course that isn't automated =D
[2014-07-25 08:29:57 -0400] ambientsound: SmudgerDan: /quiet or /quite?
[2014-07-25 08:30:23 -0400] SmudgerDan: ambientsound: "/quiet" sorry typo
[2014-07-25 08:31:14 -0400] SmudgerDan: coffee hasnt kicked in yet =D
[2014-07-25 08:32:48 -0400] SmudgerDan: just going to try all of the installer types one by one
[2014-07-25 08:32:59 -0400] SmudgerDan: but the install takes around 30mins
[2014-07-25 08:33:20 -0400] SmudgerDan: plus the time to reset the VM (you cant uninstall an SP)
[2014-07-25 08:48:44 -0400] SmudgerDan: I found this cached chat page http://webcache.googleusercontent.com/search?q=cache:9JjF0e5lbAIJ:community.opscode.com/chat/learnchef/2014-05-16+&cd=1&hl=en&ct=clnk&gl=uk the guy seems to only use the "/quiet" switch so will try that
[2014-07-25 09:25:56 -0400] ambientsound: SmudgerDan: do you use vagrant for setting up the VM?
[2014-07-25 09:27:05 -0400] SmudgerDan: ambientsound: I am trying to yes
[2014-07-25 09:34:52 -0400] SmudgerDan: I am trying to script the entire setup from install disc to creating the box.  So we know exactly what is on a vagrant box
[2014-07-25 09:36:12 -0400] SmudgerDan: So this starts with cookbooks for installing SP1 (on a 2008R2 machine) installing the Hyper-V integration services.... right down to config changes to winRm
[2014-07-25 09:37:54 -0400] __julien: Hello, is it possible to put a condition on a depends  in a metadata file ? I use the same  chef repo to deploy my cookbooks in vagrant and in opsworks but the mysql provider I use in vagrant conflicts with the one opsworks uses(and I can modify that) . So i'd like to to have "depends mysql" only if I'm running in vagrant,  Can I do that ?
[2014-07-25 09:41:48 -0400] SmudgerDan: Hi, Im fairly new to chef, but could you not put these nodes in different environments and use that to work out which providers to use?
[2014-07-25 09:45:35 -0400] __julien: A workaround for me could be to rename the mysql cookbook within berkshelf, but Berkshelf does not seem to support renaming the cookbook
[2014-07-25 10:04:15 -0400] cloudbud: is anybody working on splunk
[2014-07-25 10:39:59 -0400] SmudgerDan: can anyone else with windows::reboot_handler?  I cant seem to get it to work =(
[2014-07-25 10:40:33 -0400] ssd7: Ohai friend
[2014-07-25 10:40:34 -0400] ssd7: s
[2014-07-25 10:40:48 -0400] SmudgerDan: ello
[2014-07-25 10:42:31 -0400] ssd7: cloudbud: Our ops team put together this cookbook: https://supermarket.getchef.com/cookbooks/chef-splunk and continue to maintain it.
[2014-07-25 10:43:00 -0400] ssd7: SmudgerDan: What problem are you having with the windows::reboot_handler.  Not a big windows user myself but maybe I can help.
[2014-07-25 10:44:55 -0400] SmudgerDan: in my recipe I include the handler "include_recipe 'windows::reboot_handler'"
[2014-07-25 10:45:21 -0400] SmudgerDan: I have created the function "windows_reboot 60 do   reason "Service Pack #{node['rdt_supported_service_packs']['winserv_2008_r2']['service_pack_number']} installed"   action :nothing end"
[2014-07-25 10:46:10 -0400] SmudgerDan: then in windows_package I notifies the :request
[2014-07-25 10:46:13 -0400] SmudgerDan: "notifies :request, 'windows_reboot[60]'"
[2014-07-25 10:46:52 -0400] SmudgerDan: the install completes, the windows_reboot[60] is called
[2014-07-25 10:47:20 -0400] SmudgerDan: but when the end of the chef run happens and the report_handler is run it tells me there are no outstanding reboot requests
[2014-07-25 10:47:52 -0400] ssd7: SmudgerDan: Mind running with debug logging and posting the logs somewhere?  You can run with debug logging by adding -ldebug
[2014-07-25 10:48:58 -0400] SmudgerDan: sure thing, just working on that now (need to use a different windows_package sp1 takes 30mins to install) =D
[2014-07-25 10:49:27 -0400] SmudgerDan: oh actually to debug, how can I just call an action in a recipe
[2014-07-25 10:50:07 -0400] ssd7: You can just change action :nothing to action :request
[2014-07-25 10:50:55 -0400] ssd7: oh, but that wouldn't test the notifies I guess, but probably a good test nonetheless
[2014-07-25 10:54:34 -0400] SmudgerDan: thanks ssd7, going to test that the restart works correctly first, then will test if the :notifies works
[2014-07-25 11:06:57 -0400] SmudgerDan: ssd7: where is the best place to upload this log for you?
[2014-07-25 11:07:40 -0400] SmudgerDan: it has to be this line "DEBUG: WindowsRebootHandler has not been loaded" =D
[2014-07-25 11:08:42 -0400] SmudgerDan: but then the next line says "Enabling chef_handler[WindowsRebootHandler] as a report handler"
[2014-07-25 11:16:27 -0400] ssd7: SmudgerDan: Something like gist or pastebin would be best
[2014-07-25 11:24:53 -0400] chandra: [root@chefserver chef-repo]# knife bootstrap 10.222.189.66 -x root -P root@123 Connecting to 10.222.189.66 10.222.189.66 bash: bash: command not found [root@chefserver chef-repo]#
[2014-07-25 11:25:05 -0400] chandra: anybody has any idea?
[2014-07-25 11:26:23 -0400] SmudgerDan: ssd7: https://gist.github.com/anonymous/302892c6ce3a85775c7f
[2014-07-25 11:28:15 -0400] SmudgerDan: ssd7: It look like "windows_reboot 60 do   reason "Chef wants to"   action :request end" is the bit that isnt working
[2014-07-25 11:28:26 -0400] SmudgerDan: ssd7: I can see the handler running at the end
[2014-07-25 11:29:20 -0400] chandra: knife bootstrap 10.222.189.66 -x root -P root@123 Connecting to 10.222.189.66 10.222.189.66 bash: bash: command not found [root@chefserver chef-repo]#
[2014-07-25 11:29:44 -0400] chandra: command not found error occured while trying bootstraping a node 1st time
[2014-07-25 11:29:50 -0400] chandra: knife bootstrap 10.222.189.66 -x root -P root@123 Connecting to 10.222.189.66 10.222.189.66 bash: bash: command not found [root@chefserver chef-repo]#
[2014-07-25 11:30:14 -0400] SmudgerDan: ssd7: Im sure you know but the example of how to us it is here https://github.com/opscode-cookbooks/windows#windows_reboot.
[2014-07-25 11:31:52 -0400] chef430: i have install sql server using the cookbook sql_server.  I then have a powershell command that imports the sqlps module.  However it looks like the powershell doesn't have a updated reference to the location of the directory C:\Program Files (x86)\Microsoft SQL Server\110\Tools\PowerShell\Modules
[2014-07-25 11:32:14 -0400] chef430: Does anyone know of a way to force and update of all module paths?
[2014-07-25 11:34:46 -0400] ssd7: SmudgerDan: Sorry, keep backgrounding IRC and missing your messages, looking at this now
[2014-07-25 11:35:07 -0400] ssd7: chandra: What OS?
[2014-07-25 11:35:37 -0400] SmudgerDan: ssd7: no worries any help is always welcome no matter what speed =D
[2014-07-25 11:38:12 -0400] chandra: ssd7, linux
[2014-07-25 11:42:41 -0400] ssd7: chandra: What distribution?
[2014-07-25 11:43:31 -0400] ssd7: SmudgerDan: So, what I'm puzzing about at the moment is:
[2014-07-25 11:43:33 -0400] ssd7: https://gist.github.com/anonymous/302892c6ce3a85775c7f#file-gistfile1-txt-L1298
[2014-07-25 11:44:35 -0400] SmudgerDan: ok?
[2014-07-25 11:44:36 -0400] bawt: ok not found
[2014-07-25 11:45:57 -0400] ssd7: SmudgerDan: Reading the provider code now, trying to see why it things the resource is up to date
[2014-07-25 11:46:15 -0400] ssd7: s/things/thinks/
[2014-07-25 11:46:54 -0400] SmudgerDan: ssd7: just to make sure, the cookbook only contains this code now..... "include_recipe 'windows::reboot_handler'  windows_reboot 60 do   reason "Chef wants to"   action :request end"
[2014-07-25 11:47:21 -0400] ssd7: yup, that looks reasonable
[2014-07-25 11:48:06 -0400] ssd7: SmudgerDan: Can you add something like:
[2014-07-25 11:48:07 -0400] ssd7: https://gist.github.com/stevendanna/2ebf8d3d93155a21210e
[2014-07-25 11:48:16 -0400] ssd7: and less see what it outputs
[2014-07-25 11:48:40 -0400] SmudgerDan: before or after?
[2014-07-25 11:49:03 -0400] SmudgerDan: sorry ruby is not my first native language =D
[2014-07-25 11:49:05 -0400] ssd7: after
[2014-07-25 11:49:09 -0400] SmudgerDan: ok
[2014-07-25 11:50:52 -0400] ssd7: chandra: So, that is a pretty confusing error message to me.  If I'm reading it correctly, bash is telling you it can't find bash.  You might want to try something like: knife ssh -m IP 'echo $PATH' and see what the path is on that machine.  Maybe your PATH doesn't include bash.
[2014-07-25 11:51:50 -0400] ssd7: chef430: Just wanted to say that I saw your question too, but unfortunatley I have no idea :/.
[2014-07-25 11:52:41 -0400] SmudgerDan: ssd7: https://gist.github.com/anonymous/c4b871fd5a263b7481c5
[2014-07-25 11:52:56 -0400] SmudgerDan: wait...
[2014-07-25 11:53:00 -0400] SmudgerDan: that messed up lol
[2014-07-25 11:53:26 -0400] SmudgerDan: ssd7: https://gist.github.com/anonymous/180a24cee623ae30891f
[2014-07-25 11:56:26 -0400] ssd7: ok, so our run_state looks ok: https://gist.github.com/anonymous/180a24cee623ae30891f#file-gistfile1-txt-L1378
[2014-07-25 11:59:55 -0400] SmudgerDan: ssd7: does it look like the handler checks the run_state?
[2014-07-25 12:00:00 -0400] chandra: ssd7: root@chefclient:~# echo $PATH /opt/chef/embedded/bin:/opt/chef/embedded/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games root@chefclient:~# echo $SHELL /bin/bash root@chefclient:~
[2014-07-25 12:00:05 -0400] emfl: Hello, could someone point me to best practices on how to manage access to the chef server webui / api ?
[2014-07-25 12:00:30 -0400] emfl: Since I'm working with different teams, do I have a way to specify who has the rights to manage the recipes on a set of nodes ?
[2014-07-25 12:00:32 -0400] SmudgerDan: ssd7: looks like it just checks the registry
[2014-07-25 12:00:43 -0400] emfl: Or only update a specific recipe, a specific role etc ?
[2014-07-25 12:00:54 -0400] ssd7: SmudgerDan: It checks both
[2014-07-25 12:01:34 -0400] ssd7: chandra: are you getting the same thing for non-login shells?  That is, if you just run the command over ssh?
[2014-07-25 12:02:05 -0400] ssd7: SmudgerDan: I have a theory I'm looking into, one sec
[2014-07-25 12:02:30 -0400] SmudgerDan: ssd7: no worries buddy, just glad for some help
[2014-07-25 12:02:50 -0400] chandra: ssd7: you want me to run knife ssh ?
[2014-07-25 12:03:02 -0400] chandra: i just run that cmd in targent node
[2014-07-25 12:03:55 -0400] rsavage_: Quick question.  I know how to enable whyrun support in a LWRP.  Is there a way to enable it in a recipe?
[2014-07-25 12:04:40 -0400] ssd7: chandra: Right, your environment can be different in a login shell vs a non-login shell, so running it over ssh /should/ check the latter. Something like ssh user@hostname 'echo $PATH'
[2014-07-25 12:04:55 -0400] ssd7: rsavage_: Not sure what you mean, can you expand on that a bit?
[2014-07-25 12:05:35 -0400] ssd7: SmudgerDan: What version of the windows cookbook do you have
[2014-07-25 12:05:56 -0400] ssd7: SmudgerDan: I think you need to get the latest version to get this patch:
[2014-07-25 12:05:58 -0400] ssd7: https://github.com/opscode-cookbooks/windows/commit/b86b10cb0b49aa5c61641e4a26ff6b80478716b9
[2014-07-25 12:06:23 -0400] SmudgerDan: ssd7: 1.10.0
[2014-07-25 12:06:39 -0400] ssd7: Yeah, you need v1.11+
[2014-07-25 12:07:28 -0400] SmudgerDan: omg...
[2014-07-25 12:07:44 -0400] SmudgerDan: thanks, taking over from someone is such a pain :)
[2014-07-25 12:08:11 -0400] rsavage_: ssd7: It's just some itmes in a why-run mode that state it's not supported.
[2014-07-25 12:08:13 -0400] ssd7: :) happy to help
[2014-07-25 12:09:02 -0400] SmudgerDan: ssd7: going to grab some lunch then try again with the updated cookbook, thanks again
[2014-07-25 12:11:37 -0400] ssd7: rsavage_: As far as I know, there is no way to force a provider to be whyrun safe if it wasn't written that way.
[2014-07-25 12:20:48 -0400] rsavage_: ssd7:  So my problem is not a really big problem, but more of a style problem.  Apparently when I use the "Log" fuction in Chef, it's not supported in whyrun.  Do you know if there is a comparable function like "Log" that is whyrun comptable?
[2014-07-25 12:23:12 -0400] ssd7: rsavage_: Oh interesting, we should make that whyrun safe, I'll open a bug for it.  Unfortunately, the other ways I know to log either (1) also aren't whyrun safe or (2) make your log entries show up at a different time (compile time) than they would in a log resource
[2014-07-25 12:25:13 -0400] __julien: Do you know if it's possible to have more explicit message for "Missing Cookbooks:, Could not satisfy version constraints for: mysql" ... in order to know exactly what kind or constraints are uncompatible ?
[2014-07-25 12:25:29 -0400] ssd7: rsavage_: Oh, maybe I lied, I think we added whyrun safe ruby_blocks, one sec
[2014-07-25 12:25:59 -0400] rsavage_: thanks ssd7
[2014-07-25 12:27:59 -0400] someara: are you using the log resource? or the Chef::Log function
[2014-07-25 12:28:23 -0400] someara: s/function/method/
[2014-07-25 12:30:31 -0400] ssd7: someara: log resource from my reading
[2014-07-25 12:30:50 -0400] ssd7: Chef::Log.info will work, but as I mentioned, then you get messages at compile time rather than converge
[2014-07-25 12:31:39 -0400] ssd7: rsavage_: So, if you don't mind compile-time log messages, you can just do: Chef::Log.info "foo"
[2014-07-25 12:32:48 -0400] ssd7: If you want them at converge time you can do something like: https://gist.github.com/stevendanna/647b5c722d57a5872710
[2014-07-25 12:35:56 -0400] ssd7: rsavage_: someara Opened: https://github.com/opscode/chef/issues/1690
[2014-07-25 12:36:02 -0400] rsavage_: ssd7 thanks, I am converting all my recipes to use Chef::Log.info
[2014-07-25 12:41:06 -0400] ssd7: __julien: Where are you getting that error message?
[2014-07-25 12:41:29 -0400] __julien: ssd7, at the beginning of the opswork chef run
[2014-07-25 12:44:49 -0400] SmudgerDan: ssd7: thanks buddy that has fixed my issue, that will teach me for just assuming everything was up to date =D
[2014-07-25 12:45:00 -0400] __julien: ssd7, here is the full message http://pastebin.com/HcETTrQJ
[2014-07-25 12:46:56 -0400] ssd7: __julien: Unfortunately, chef-zero uses a fairly limited solver, I don't think you can get any info out of it directly other than the fact that the problem is somewhere in the constraints of the mysql cookbook.
[2014-07-25 12:47:07 -0400] ssd7: SmudgerDan: Glad to hear we solved it
[2014-07-25 12:47:16 -0400] __julien: ssd7, I use the same repo for vagrant and opsworks, in vagrant I use mysql community cookbook, and in aws nothing(it's using RDS) , but the recipe still has depends mysql . everything is ok if I remove depends mysql (but I need itfor vagrant of course)
[2014-07-25 12:48:29 -0400] __julien: ssd7, the thing is there is is nothing ( no d epends, just recipe description ) in /var/lib/aws/opsworks/cache/cookbooks/mysql/metadata.rb ( which is the opsworks mysql), so I'm kinda lost
[2014-07-25 12:48:57 -0400] ssd7: __julien: So, is your mysql cookbook uploaded to your opswork setup at all?
[2014-07-25 12:49:04 -0400] ssd7: If not, that is almost certainly the issue
[2014-07-25 12:49:46 -0400] __julien: ssd7, in aws it is uploaded, but replaced by the AWS one,  it should shoud not be a problem cos I don't use it
[2014-07-25 12:50:13 -0400] ssd7: Hrm
[2014-07-25 12:50:39 -0400] ssd7: Do you have any version constraint around the version of mysql anywhere?
[2014-07-25 12:50:52 -0400] ssd7: In an environment or metadata file somewhere?
[2014-07-25 12:55:11 -0400] __julien:  I do not manage environment  with chef environments, and I don't know opsworks enough to know how they deal with it
[2014-07-25 12:55:55 -0400] __julien: but in the merged cookbook directory, only the AWS mysql cookbook remains ( mine, the community cookbook, is not there )
[2014-07-25 12:56:18 -0400] __julien: I think I'll just create 2 cookbooks with differents metadata
[2014-07-25 12:57:04 -0400] ssd7: __julien:  So, I would start by figuring out what dependencies on metadata are there.  In the merged cookbook directory, you might try something like
[2014-07-25 12:57:22 -0400] ssd7: grep 'mysql' */metadata.rb
[2014-07-25 12:57:26 -0400] ssd7: and go from there
[2014-07-25 12:58:29 -0400] __julien: ssd7, thx
[2014-07-25 12:58:42 -0400] __julien: I'll do that manually
[2014-07-25 13:10:11 -0400] SmudgerDan: ok guys onto the next issue, I want to make sure certain Windows Updates have been installed, from my testing I dont think "windows_package" does Windows Updates, any ideas
[2014-07-25 13:19:00 -0400] jwitrick: btm: I am using your minitest-handler-cookbook, and last night it started failing due to the gem 'ci_reporter' being updated to version 2.0.0. I have verified that If gem version 1.9.2 is installed everything will continue to function properly. I am opening up a PR right now for the fix.
[2014-07-25 13:31:15 -0400] __julien: is it possible to have the message "Could not satisfy version constraints for: mysql " ig there is no constaint at all in the cookbook's metadata .rb ? https://github.com/aws/opsworks-cookbooks/blob/release-chef-11.4/mysql/metadata.rb
[2014-07-25 13:31:48 -0400] jwitrick: btm: https://github.com/btm/minitest-handler-cookbook/pull/63
[2014-07-25 13:33:58 -0400] chris613: btm, jwitrick: We are having this same problem this morning. Chef client 10.32.2
[2014-07-25 13:34:45 -0400] jwitrick: chris613: I have verified my PR to minitest-handler-cookbook solves this issue.
[2014-07-25 13:54:54 -0400] rbowlby: anyone know a good cookbook for creating mysql DBs
[2014-07-25 13:55:10 -0400] rbowlby: I didn't see a resource for this in the percona cookbook that I'm using
[2014-07-25 13:56:45 -0400] petracvv: rbowlby: https://github.com/opscode-cookbooks/database
[2014-07-25 13:57:18 -0400] rbowlby: thanks petracvv does that work well with the percona version?
[2014-07-25 13:57:46 -0400] petracvv: that I don't know
[2014-07-25 13:58:20 -0400] SmudgerDan: hmm any ideas on keeping Windows drivers inline through chef?
[2014-07-25 13:58:32 -0400] chris613: jwitrick: Thanks man. You saved us some serious grief with that. I had just started checking the mailinglist and IRC and didn't see anything about this problem but then your message came up and unblocked us (on a major release weekend)
[2014-07-25 13:58:50 -0400] jwitrick: no worries. its been merged into master.
[2014-07-25 13:59:27 -0400] jpoole: anyone know if the knife ec2 plugin can use IAM roles upon creation of an instance?
[2014-07-25 14:00:24 -0400] jeffbyrnes: jpoole: it can, but only in the current bleeding edge version
[2014-07-25 14:00:34 -0400] jeffbyrnes: There was a question on the mailing list about this just recently, in fact
[2014-07-25 14:00:45 -0400] jpoole: jeff ahh thanks, simple gem update should allow me to gain that feature?
[2014-07-25 14:00:53 -0400] jeffbyrnes: Not yet; it's unreleased
[2014-07-25 14:02:24 -0400] jpoole: you dont perhaps know the branch I can pull from offhand do you/
[2014-07-25 14:02:41 -0400] jeffbyrnes: hang tight, looking it up :)
[2014-07-25 14:02:47 -0400] jpoole: thanks jeff, you're a saint.
[2014-07-25 14:05:57 -0400] jeffbyrnes: ok, so I think I'm thinking of kitchen-ec2, but in knife-ec2, you've got the `iam_instance_profile` CLI option you can use when doing a `knife ec2 server create`
[2014-07-25 14:06:02 -0400] jeffbyrnes: it should be in the current releases
[2014-07-25 14:06:09 -0400] jpoole: ok great
[2014-07-25 14:08:21 -0400] jeffbyrnes: there is, however, this open PR, hopefully this isn't what you need: https://github.com/opscode/knife-ec2/pull/221
[2014-07-25 14:08:29 -0400] jeffbyrnes: you just need to assign an IAM profile, right?
[2014-07-25 14:08:33 -0400] jpoole: yeah
[2014-07-25 14:08:41 -0400] jeffbyrnes: yeah, you're all set.
[2014-07-25 14:08:43 -0400] jpoole: I was looking at that PR, not what i need.
[2014-07-25 14:08:48 -0400] jpoole: perfect, let me give this a go
[2014-07-25 14:09:05 -0400] jeffbyrnes: the README needs updating. Might open a PR to fix that
[2014-07-25 14:09:18 -0400] ALVAN: hi all .. i have a foodcritic violation error  "Consider extracting long ruby_block to library" does anyone knows what it means ?
[2014-07-25 14:09:57 -0400] jeffbyrnes: ALVAN: you've got some huge piece of Ruby code in your recipe, and it's encouraging you to break it out into a library instead of having it inline.
[2014-07-25 14:11:38 -0400] ALVAN: jeffbyrnes: ok thanks .. pff i read chef libraries but dont know how to break it into libraries
[2014-07-25 14:11:54 -0400] jeffbyrnes: ALVAN: have you written much Ruby?
[2014-07-25 14:12:36 -0400] ALVAN: only small chef roles and some syntax check for cookbooks
[2014-07-25 14:12:38 -0400] ALVAN: thats all
[2014-07-25 14:12:59 -0400] jeffbyrnes: gotcha. yeah, it's encouraging you to do a bit of programming :)
[2014-07-25 14:13:15 -0400] jeffbyrnes: you've seen this: http://docs.opscode.com/essentials_cookbook_libraries.html
[2014-07-25 14:13:16 -0400] jeffbyrnes: ?
[2014-07-25 14:13:41 -0400] ALVAN: yes i  read that
[2014-07-25 14:13:48 -0400] jeffbyrnes: k
[2014-07-25 14:13:50 -0400] ALVAN: breafely
[2014-07-25 14:14:34 -0400] jeffbyrnes: The example is demonstrating that you can take a Ruby block & abstract it out to a method or set of methods, inside of a subclass of Chef::Recipe, and then use them repeatedly inside your recipes
[2014-07-25 14:19:20 -0400] SmudgerDan: Anyone have any idea how I check drivers on Windows?
[2014-07-25 14:27:39 -0400] __julien: in fact I have the exact same problem as mentionned here but with the mysql cookbook instead of php : https://forums.aws.amazon.com/thread.jspa?messageID=548123&#548123 , maybe someone here knows the answer
[2014-07-25 14:35:23 -0400] sciurus: is it acceptable to post jobs openings (that heavily feature chef) on the chef mailing list? if so, are there any special requirements, e.g. putting "JOB" in the subject?
[2014-07-25 14:40:39 -0400] ssd7: sciurus: My personal opinion is yes, as long as you aren't a recruiter :).  If it leads to a lot of spam, we could address that then.
[2014-07-25 14:41:50 -0400] SmudgerDan: ssd7: Any idea about using chef to keep Windows drivers inline?
[2014-07-25 14:42:16 -0400] sciurus: okay. i'm not a recuriter, just looking for a new coworker :)
[2014-07-25 14:42:31 -0400] sciurus: the posting is http://www.lonelyplanet.com/jobs/#op-25251-web-operations-engineer for anyone here who's curious
[2014-07-25 14:43:20 -0400] gchristensen: sciurus: does lonely planet allow lonely coworkers being remote?
[2014-07-25 14:44:29 -0400] ssd7: SmudgerDan: The last time I administered Windows, I was dealing with desktops and the fact that the Windows XP installer didn't have SATA drivers.  In sort, no idea.
[2014-07-25 14:44:45 -0400] sciurus: not for this position. you'd need to be in nashville tennessee area, or maybe london. we are hirining ruby developers remotely if that intererests you
[2014-07-25 14:45:03 -0400] gchristensen: nope
[2014-07-25 14:45:50 -0400] SmudgerDan: ssd7: cheers dude, going to have to fall back to some Powershell then =)
[2014-07-25 15:02:30 -0400] sigusr1: is anyone aware if machine_options in chef-metal support lazy evaluation ?
[2014-07-25 15:02:52 -0400] jkeiser: sigusr1: I didn't do anything special to enable it, so probably not
[2014-07-25 15:03:07 -0400] sigusr1: jkeiser: thought so  :)
[2014-07-25 15:03:45 -0400] jkeiser: sigusr1: not knowing too much about it, it sounds like a worthwhile thing to have
[2014-07-25 15:04:36 -0400] sigusr1: jkeiser: I ran into the need to use attrributes set through a ruby_block inside a machine resource below - a dynamic IP in my case
[2014-07-25 15:05:38 -0400] sigusr1: jkeiser: the workaroud was to split the chef-metal recipes and run them through 2 different chef-client commands
[2014-07-25 15:06:46 -0400] sigusr1: jkeiser: one more thing: how can one set the options[:stream] for lib/chef_metal/transport.rb ?
[2014-07-25 15:07:28 -0400] jkeiser: man, I want to default chef-metal runs to one-pass instead of two
[2014-07-25 15:08:05 -0400] sigusr1: jkeiser: well, I used a makefile :)
[2014-07-25 15:08:39 -0400] jkeiser: sigusr1: it automatically gets set for the chef-client run--there are no options to control it in the machine resource though.  Where do you want to set it?
[2014-07-25 15:10:03 -0400] sigusr1: jkeiser: I may be confusing something - in my case, running chef-metal via jenkins shows only the main processs console output; anything that goes on remotely is hidden
[2014-07-25 15:10:31 -0400] sigusr1: jkeiser: except for when Im enabling debug in knife.rb - but thats a little too much
[2014-07-25 15:10:56 -0400] jkeiser: sigusr1: maybe it turns the log on and off based on whether the console is on?
[2014-07-25 15:11:54 -0400] sigusr1: jkeiser: I suspected that jenkins does not monitor the childs process stdout (assuming it the main process forks) and wanted to test the theory
[2014-07-25 15:12:03 -0400] amitanand_: I created a library file that only has one method (no class or module). How do I write a ChefSpec recipe to call this method?
[2014-07-25 15:13:53 -0400] amitanand_: I created a library file that only has one method (no class or module). How do I write a ChefSpec recipe to call this method?
[2014-07-25 15:14:19 -0400] davidordave: anyone know of a good resource on how to use chef-vault in conjunction with test-kitchen?
[2014-07-25 15:14:48 -0400] sigusr1: jkeiser: so options[:stream] defaults to true, for a normal chef-metal run?
[2014-07-25 15:15:03 -0400] amitanand_: I created a library file that only has one method (no class or module). How do I write a ChefSpec recipe to call this method?
[2014-07-25 15:17:02 -0400] jkeiser: sigusr1: I'm not sure.  Let's look
[2014-07-25 15:17:04 -0400] zanshin: Why, oh why, does the community tomcat cookbook restart tomcat each time the node converges? What am I missing here?
[2014-07-25 15:17:08 -0400] jkeiser: It would be in the convergence strategy
[2014-07-25 15:17:59 -0400] sigusr1: jkeiser: precreate_chef_objects.rb, L40 ?
[2014-07-25 15:20:05 -0400] jkeiser: sigusr1: https://github.com/opscode/chef-metal/blob/master/lib/chef_metal/convergence_strategy/install_cached.rb#L60-L63
[2014-07-25 15:20:52 -0400] jkeiser: That's if you are using vagrant.  fog is https://github.com/opscode/chef-metal/blob/master/lib/chef_metal/convergence_strategy/install_sh.rb#L42-L47
[2014-07-25 15:21:16 -0400] jkeiser: (They use slightly different strategies for getting chef onto the machine--one downloads local and caches, the other tells the remote machine to download chef itself
[2014-07-25 15:23:02 -0400] sigusr1: jkeiser: ya, I suspected that was the place
[2014-07-25 15:23:29 -0400] jkeiser: So it looks like it should be streaming to the given streams
[2014-07-25 15:26:23 -0400] sigusr1: jkeiser: based on testing, I believe during the jenkins run the options[:stream] from https://github.com/opscode/chef-metal/blob/master/lib/chef_metal/transport.rb#L65 becomes somehow false, hence only when setting debug the streams become visible
[2014-07-25 15:27:40 -0400] rbowlby: is there a chef debian repo for ubuntu trusty
[2014-07-25 15:28:04 -0400] jkeiser: sigusr1: nothing is jumping out at me, but here is a place you might litter with debug statements ... https://github.com/opscode/chef-metal/blob/master/lib/chef_metal/transport/ssh.rb#L26-L61
[2014-07-25 15:28:16 -0400] jkeiser: sigusr1: is this ssh transport?
[2014-07-25 15:28:32 -0400] sigusr1: jkeiser: yes
[2014-07-25 15:28:43 -0400] rbowlby: the default package is 11.8.2 and that's too old for the git cookbook
[2014-07-25 15:28:55 -0400] sigusr1: jkeiser: Ill do some further testing  thanks
[2014-07-25 15:29:05 -0400] rbowlby: need like 11.12.8
[2014-07-25 15:29:16 -0400] jkeiser: sigusr1: one useful thing would be to add a full print of options at lline 28 there
[2014-07-25 15:29:20 -0400] rbowlby: or should I just use gem?
[2014-07-25 15:32:55 -0400] jtimberman: rbowlby: CHEF doesn't have apt repo (yet), i recommend downloading the package(s) you need with the omnitruck API and putting them in an internal apt repo
[2014-07-25 15:33:37 -0400] rbowlby: jtimberman, what would be the downside to using gem?
[2014-07-25 15:34:11 -0400] jtimberman: rbowlby: installing/managing the ruby environment yourself, mainly
[2014-07-25 15:34:56 -0400] rbowlby: yes, omni is nice. I don't have an internal repo nor the time to go that route unfortunately.
[2014-07-25 15:35:04 -0400] jtimberman: the ruby experience on ubuntu isn't exactly as smooth as one would hope: https://bugs.launchpad.net/ubuntu/+source/ruby2.0/+bug/1310292 (note that problem is fixed upstream in debian, ubuntu refuses to fix it because that happened after their package import freeze)
[2014-07-25 15:35:14 -0400] bougyman: how can I get the expanded run_list of a node using chef-shell -z ?
[2014-07-25 15:35:26 -0400] jtimberman: if not an internal repo, then just use the install.sh we have?
[2014-07-25 15:35:33 -0400] bougyman: node.expanded_run_list shows up in node.public_methods but it fails with a no method error
[2014-07-25 15:35:40 -0400] rbowlby: jtimberman, link?
[2014-07-25 15:35:55 -0400] rbowlby: sorry, I'd consider myself still in noob status
[2014-07-25 15:35:55 -0400] jtimberman: rbowlby: https://www.opscode.com/chef/install.sh
[2014-07-25 15:36:00 -0400] jtimberman: s'o :)
[2014-07-25 15:36:04 -0400] jtimberman: s'ok, too
[2014-07-25 15:36:12 -0400] rbowlby: much obliged
[2014-07-25 15:37:18 -0400] jtimberman: bougyman: node['recipes'] is the expanded run list of all recipes, node['roles'] is the expanded run list of all roles.
[2014-07-25 15:37:23 -0400] jtimberman: bougyman: they're just attributes
[2014-07-25 15:37:49 -0400] jtimberman: chef > node['roles'] # => ["mac_os_x", "base", "workstation"]
[2014-07-25 15:37:51 -0400] rbowlby: took a peak inside the install.sh: if grep yolo
[2014-07-25 15:37:58 -0400] jtimberman: rbowlby: :D
[2014-07-25 15:38:07 -0400] jtimberman: our developers have senses of humor
[2014-07-25 15:38:14 -0400] jtimberman: also read the comments at the top ;)
[2014-07-25 15:38:16 -0400] rbowlby: lol, good stuff
[2014-07-25 15:38:35 -0400] jtimberman: many people aren't a fan of the curl | sudo bash pattern
[2014-07-25 15:38:45 -0400] jarsever: jkeiser: Question about STDOUT returns.  When we run chef-metal locally we can see everything that is being streamed.  When we run chef-metal on Jenkins CI the console only reads basic ssh connection and execution logs.  Is there any reason for this and/or is there a fix so Jenkins will be able to see all of the data being streamed to STDOUT?
[2014-07-25 15:38:54 -0400] rbowlby: but I AM a bash wizard
[2014-07-25 15:39:07 -0400] jtimberman: but all that script literally does is build the URL to hit omnitruck's API, and then download + install that.
[2014-07-25 15:39:15 -0400] jtimberman: for the curious about the omnitruck api: http://docs.getchef.com/api_omnitruck.html
[2014-07-25 15:43:08 -0400] bougyman: @jtimberman: thanks. trying to figure out why this node isn't getting the right role run list
[2014-07-25 15:43:17 -0400] bougyman: can I introspect on a role to see what it expands to?
[2014-07-25 15:43:24 -0400] bougyman: we've wiped the role on the chef-server and re-uploaded it
[2014-07-25 15:43:39 -0400] bougyman: this node still isn't getting the right recipes (the ones we have in the run_list of the rule)
[2014-07-25 15:43:43 -0400] bougyman: *of the role
[2014-07-25 15:44:44 -0400] bougyman: this is when I wish /var/chef/cache/ pulled down the roles themselves.
[2014-07-25 15:46:49 -0400] Maks3w: Hi. Is supermarket website offline?
[2014-07-25 15:47:10 -0400] jeffbyrnes: http://isup.me/supermarket.getchef.com
[2014-07-25 15:47:31 -0400] jeffbyrnes: Maks3w: no, to answer you.
[2014-07-25 15:48:01 -0400] Maks3w: I can load any opscode website except supermarket
[2014-07-25 15:48:15 -0400] Maks3w: This morning was working
[2014-07-25 15:48:19 -0400] jeffbyrnes: something on your end
[2014-07-25 15:48:27 -0400] jeffbyrnes: what does `dig supermarket.getchef.com` turn up?
[2014-07-25 15:49:13 -0400] Maks3w: can't resolve the dns
[2014-07-25 15:49:25 -0400] jeffbyrnes: there's your issue
[2014-07-25 15:49:34 -0400] Maks3w: ;; ANSWER SECTION:
[2014-07-25 15:49:35 -0400] Maks3w: supermarket.getchef.com. 41INCNAMEsupermarket-elb-1505409341.us-west-2.elb.amazonaws.com.
[2014-07-25 15:49:35 -0400] Maks3w: ;; AUTHORITY SECTION:
[2014-07-25 15:49:37 -0400] Maks3w: elb.amazonaws.com.900INSOAdnsbbesath01.vodafone.es. please_set_email.absolutely.nowhere. 2 10800 3600 2592000 900
[2014-07-25 15:49:51 -0400] Maks3w: ;; QUESTION SECTION:
[2014-07-25 15:49:51 -0400] Maks3w: ;supermarket.getchef.com.INA
[2014-07-25 15:50:12 -0400] someara: works fine for me
[2014-07-25 15:58:21 -0400] coderanger: Do we have the hangout open for the community meeting this morning?
[2014-07-25 15:59:46 -0400] ssd7: coderanger: If we do we should make in an "On air" one so everyone can at least watch
[2014-07-25 16:00:11 -0400] holoway: one minute warning for the meeting in #chef-hacking
[2014-07-25 16:01:01 -0400] coderanger: Yeah, wasn't sure if I saw discusson on format over the week
[2014-07-25 16:01:08 -0400] coderanger: Guess that was for something else :-)
[2014-07-25 16:02:40 -0400] holoway: coderanger: I did just find a tool that owuld work for video for a 100 people, but it only works on mac/windos
[2014-07-25 16:14:03 -0400] prometheanfire: how do I load cookbook resources without running that cookbook with include_recipe ?
[2014-07-25 16:15:05 -0400] shlant: prometheanfire: what kind of resources? LWRP's? attributes?
[2014-07-25 16:15:32 -0400] prometheanfire: recipe
[2014-07-25 16:15:48 -0400] prometheanfire: guess there's no way to initialize it witout running
[2014-07-25 16:16:32 -0400] prometheanfire: want to run the 'apt-get update' resource in https://github.com/opscode-cookbooks/apt/blob/master/recipes/default.rb
[2014-07-25 16:16:51 -0400] prometheanfire: without havig it do the rest in that recipe
[2014-07-25 16:17:18 -0400] prometheanfire: having a apt-repository notify that resource
[2014-07-25 16:21:03 -0400] jtimberman: prometheanfire: put a dependency on it in your cookbook's metadata
[2014-07-25 16:21:27 -0400] prometheanfire: it's already there
[2014-07-25 16:21:28 -0400] prometheanfire: depends 'apt', '~> 2.4'
[2014-07-25 16:21:38 -0400] rbowlby: jtimberman, oh cool the install.sh makes use of the api to get the appropriate .deb. I feel much more comfortable using this install script now. lol
[2014-07-25 16:21:46 -0400] jtimberman: yup
[2014-07-25 16:21:48 -0400] jtimberman: :)
[2014-07-25 16:21:54 -0400] jtimberman: it's totally just using packages.
[2014-07-25 16:21:56 -0400] rbowlby: I didn't realize it was using a legit deb pkg
[2014-07-25 16:21:59 -0400] prometheanfire: recipe resources don't seem to load without include_recipe
[2014-07-25 16:22:01 -0400] rbowlby: yay!
[2014-07-25 16:22:06 -0400] jtimberman: not "lmao compiling random source as root"
[2014-07-25 16:22:17 -0400] rbowlby: lol, exactly
[2014-07-25 16:22:25 -0400] jtimberman: prometheanfire: resources from recipes? no
[2014-07-25 16:30:12 -0400] nico__: hey all, what's th ebst way to determine my chef server version?  I see /opt/chef-sever/version-manifest.txt but don't know which of those lines is the version of my chef server
[2014-07-25 16:30:49 -0400] nico__: this makes me think it's 11.0.10:
[2014-07-25 16:30:52 -0400] nico__: chef-server-cookbooks   11.0.10
[2014-07-25 16:30:53 -0400] nico__: chef-server-ctl         11.0.10
[2014-07-25 16:30:53 -0400] nico__: chef-server-scripts     11.0.10
[2014-07-25 16:30:55 -0400] nico__: chef-server-webui       11.0.10
[2014-07-25 16:31:05 -0400] nico__: but I want to be 100% sure
[2014-07-25 16:31:19 -0400] Eulipion: my chef-client runs arent exiting when i bootstrap, it just hangs on, "Chef run process exited", anyone else ever have that issue?
[2014-07-25 16:31:50 -0400] nico__: we're using open source chef, btw
[2014-07-25 16:33:41 -0400] shlant: nico__: seems like a good way of checking ;)
[2014-07-25 16:35:12 -0400] kangguru_away: @nico__ aptitude show chef-server should give you the exact package version
[2014-07-25 16:35:57 -0400] shlant: anyone know why I'm all of the sudden getting this minitest error?
[2014-07-25 16:35:57 -0400] shlant: https://gist.github.com/MrMMorris/b2272bddcd5b6c4dcb1d
[2014-07-25 16:35:58 -0400] nico__: thanks guys
[2014-07-25 16:36:05 -0400] shlant: was fine yesterday
[2014-07-25 16:36:08 -0400] nico__: the aptitude confirms what I sw in the manifest
[2014-07-25 16:36:09 -0400] nico__: 11.0.10
[2014-07-25 16:36:12 -0400] nico__: thanks a bunch
[2014-07-25 16:37:54 -0400] Otterley: shlant, upgrade minitest-chef-handler - see https://github.com/calavera/minitest-chef-handler/pull/82
[2014-07-25 16:47:18 -0400] shlant: Otterley: thought so. Thanks!
[2014-07-25 16:50:06 -0400] Otterley: shlant, you'll also need to set node["minitest"]["chef_handler_gem_version"] to "1.0.3"
[2014-07-25 16:50:21 -0400] Otterley: I'm filing a PR to make this the new default
[2014-07-25 16:53:02 -0400] shlant: wokred, thanks
[2014-07-25 16:53:06 -0400] shlant: worked*
[2014-07-25 16:56:42 -0400] Otterley: PR to fix minitest-handler-cookbook: https://github.com/btm/minitest-handler-cookbook/pull/64
[2014-07-25 17:00:50 -0400] cswarren: In Windows 2012, you can mount ISOs using the Powershell Mount-DiskImage command. Can I also mount an ISO using Chef's "mount" resource, or am I being fooled just because they have similar-sounding names?
[2014-07-25 17:15:23 -0400] mikeface: is there a way to store an array of hashes via override attributes in a role?
[2014-07-25 17:16:19 -0400] Otterley: mikeface, declaring it in "override_attributes" does not work?
[2014-07-25 17:17:17 -0400] mikeface: @Otterley, i keep getting syntax errors.  the array is set by default in the attributes.rb
[2014-07-25 17:17:34 -0400] Otterley: mikeface, JSON syntax errors?
[2014-07-25 17:17:38 -0400] mikeface: yup
[2014-07-25 17:17:38 -0400] Raymond: Has anyone else ran into an error using test-kitchen lately? This error just started yesterday. 'cannot load such file -- ci/reporter/minitest'
[2014-07-25 17:17:41 -0400] coderanger: mikeface: Please pastebin the role
[2014-07-25 17:18:00 -0400] jwitrick: Raymond: It is an issue with a new version of the gem ci_reporter
[2014-07-25 17:18:02 -0400] medya: whats the difference of node and clients in the chef-server ?
[2014-07-25 17:18:06 -0400] Otterley: Raymond, set node["minitest"]["chef_handler_gem_version"] to "1.0.3" for a fix
[2014-07-25 17:18:22 -0400] medya: on chef-server I deleted nodes but the client was still there I had to delete it too, is node and client diffrent things
[2014-07-25 17:18:24 -0400] coderanger: medya: clients are API access tokens, nodes hold the data for the node like run list and env
[2014-07-25 17:18:47 -0400] Otterley: looks like dpetzel2 just took my PR
[2014-07-25 17:18:52 -0400] Raymond: Otterley: Thanks we will give that a try.
[2014-07-25 17:18:52 -0400] coderanger: medya: each node needs its own client key, but some client keys aren't used by nodes (some are for knife, etc)
[2014-07-25 17:20:28 -0400] medya: @coderanger can multiple nodes have same client api key ? if yes how ?
[2014-07-25 17:20:42 -0400] coderanger: medya: No
[2014-07-25 17:21:46 -0400] medya: @coderanger, then if there is a 1-1 relationship, then why when you delete a node, it doesn't delete the client key too ? and you have to do delete for both of them seems like extra work for nothing
[2014-07-25 17:22:20 -0400] coderanger: medya: Because knife is a very low-level tool
[2014-07-25 17:22:31 -0400] coderanger: medya: The new web interface, for example, does delete both together :)
[2014-07-25 17:22:50 -0400] mikeface: @coderanger nevermind haha, as i was pasting, i found my error haha
[2014-07-25 17:24:56 -0400] Eulipion: my chef-client runs arent exiting when i bootstrap, it just hangs on, "Chef run process exited", anyone else ever have that issue?
[2014-07-25 17:30:23 -0400] doug1: opscode-omnibus-packages.s3.amazonaws.com:80 seems dead
[2014-07-25 17:31:18 -0400] coderanger: doug1: I think the internet would notice if S3 was down
[2014-07-25 17:31:37 -0400] doug1: coderanger: attempting to telnet to that on port 80 yields no reply
[2014-07-25 17:31:44 -0400] doomviking: heh
[2014-07-25 17:32:11 -0400] coderanger: doug1: When you have to ask "Is S3 down and no one noticed or am I doing something wrong?" who do you think you should bet on
[2014-07-25 17:32:13 -0400] doomviking: doug1: I can reach that
[2014-07-25 17:32:38 -0400] doug1: doomviking: thanks for independantly verifying.
[2014-07-25 17:33:08 -0400] doug1: coderanger: your an excellent human being who's joyful and carefree attitude is inspiring. Thanks for your help and I can only hope to be be like you one day
[2014-07-25 17:33:36 -0400] doug1: doomviking: seems to be working for me again too.
[2014-07-25 17:36:56 -0400] doug1: strange. I can look at the bucket in a browser, but attempting to download https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.12.8-2.el6.x86_64.rpm via browser just hangs.
[2014-07-25 17:36:57 -0400] medya: is there a way to force clients update (sudo chef-client) on the chef-server ?
[2014-07-25 17:38:04 -0400] coderanger: medya: No, chef-server is a pull-driven system
[2014-07-25 17:38:25 -0400] coderanger: medya: chef pushy handles this part of things, but is only available for enterprise chef
[2014-07-25 17:39:50 -0400] jtimberman: doug1: don't use http
[2014-07-25 17:39:53 -0400] jtimberman: for s3
[2014-07-25 17:39:54 -0400] jtimberman: :)
[2014-07-25 17:40:06 -0400] gchristensen: bittorrent++ for s3
[2014-07-25 17:40:11 -0400] jtimberman: gchristensen: lol
[2014-07-25 17:40:16 -0400] doug1: jtimbeman: I'm not
[2014-07-25 17:40:28 -0400] gchristensen: jtimberman: https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.12.8-2.el6.x86_64.rpm?torrent (ICYMI)
[2014-07-25 17:41:20 -0400] doug1: I can't be the only one having trouble accessing https://opscode-omnibus-packages.s3.amazonaws.com/el/6/x86_64/chef-11.12.8-2.el6.x86_64.rpm
[2014-07-25 17:43:03 -0400] gchristensen: doug1: works for me
[2014-07-25 17:43:06 -0400] jtimberman: downloading at 1000kb/sec
[2014-07-25 17:43:30 -0400] doug1: seems to be intermittant
[2014-07-25 17:43:37 -0400] doug1: oh well, thanks
[2014-07-25 17:48:22 -0400] prometheanfire: how often does the readme update in supermarket?
[2014-07-25 17:48:57 -0400] doomviking: yeah doug1 you seem to be having localized network problems
[2014-07-25 17:49:26 -0400] doug1: doomviking: very localized because I can download from centos at 2Mb/s and a comcast speed test gets me 80Mb/s. downloading from the s3 bucket gets me 5Kb/s
[2014-07-25 17:49:43 -0400] doomviking: bummer
[2014-07-25 17:49:49 -0400] doug1: yah
[2014-07-25 17:50:04 -0400] prometheanfire: blame netflix? :P
[2014-07-25 17:50:08 -0400] doug1: heh
[2014-07-25 17:50:11 -0400] jtimberman: prometheanfire: for a given cookbook? should be when it's updated/uploaded on new shared version?
[2014-07-25 17:50:45 -0400] nevvermind1: hey. i've tried debugging a recipe in aptana (haven't tried another IDE with ruby debugging abilities yet) and it says that it can't find the "package" method. where should that be included for aptana to work? i know it must tell it to get the libs from the gem library, but how?
[2014-07-25 17:50:51 -0400] prometheanfire: jtimberman: it is, I'm blind :D
[2014-07-25 17:51:04 -0400] jtimberman: prometheanfire: i have that problem sometimes. usually when reading.
[2014-07-25 17:51:40 -0400] jtimberman: "Precondition failed 412! hombrew not found" - took WAY longer to resolve than it should have.
[2014-07-25 17:51:44 -0400] coderanger: nevvermind1: Chef recipes aren't standard Ruby code, they can only execute inside chef
[2014-07-25 17:52:32 -0400] nevvermind1: i thought so. but can't i execute chef and a recipe via byebug?
[2014-07-25 17:53:02 -0400] coderanger: nevvermind1: No, or at least it wouldn't be useful
[2014-07-25 17:53:03 -0400] nevvermind1: i mainly want to learn chef/ruby and i can't still figure out what's method and what isn't
[2014-07-25 17:53:04 -0400] jtimberman: i don't know what that is, but i use chef-shell for debugging recipes. it comes with chef.
[2014-07-25 17:53:30 -0400] jpoole: love chef-shell
[2014-07-25 17:53:54 -0400] nevvermind1: i've tried that. but you should use the breakpoint cookbook for that one to work?
[2014-07-25 17:55:34 -0400] nulleric: does chefdk come with rspec? (thought it did), i get error trying to run it for chefspec
[2014-07-25 17:55:38 -0400] nulleric: https://www.irccloud.com/pastebin/kxRIbaCM
[2014-07-25 17:59:32 -0400] nulleric: i doi dofasfdas
[2014-07-25 18:01:40 -0400] nulleric: (whoops wrong with that last line lol)
[2014-07-25 18:02:22 -0400] pedahzur: Is there an ETA for the Chef Omnibus installer on RHEL 7?  http://www.getchef.com/chef/install/ only goes up to EL 6.
[2014-07-25 18:03:42 -0400] nulleric: pedahzur: the omnitruck still works with 7
[2014-07-25 18:03:57 -0400] nulleric: it's the same url if you select 5 or 6
[2014-07-25 18:03:58 -0400] coderanger: pedahzur: You can use EL6 installer
[2014-07-25 18:04:08 -0400] coderanger: (libc ABI didn't change)
[2014-07-25 18:04:48 -0400] pedahzur: nulleric, coderanger: Ah, yes, the script URL is the same. I was referring to the RPM.
[2014-07-25 18:05:09 -0400] coderanger: pedahzur: Yes, you can use the EL6 RPM on EL7
[2014-07-25 18:05:30 -0400] pedahzur: coderanger: Ah, thanks!
[2014-07-25 18:12:40 -0400] pedahzur: coderanger: Do you know if OpsCode publishes the SRPM for the RPM anywhere?  Or would this be it: https://github.com/opscode/omnibus-chef
[2014-07-25 18:13:03 -0400] coderanger: pedahzur: No, they are built via omnibus, not the rpm toolchain
[2014-07-25 18:13:11 -0400] coderanger: omnibus uses fpm internally
[2014-07-25 18:13:18 -0400] pedahzur: coderanger: Understood, thanks.
[2014-07-25 18:13:31 -0400] nulleric: found the bug if anyone is searching through irc logs https://github.com/opscode/chef-dk/issues/103 <- closed in master
[2014-07-25 18:16:25 -0400] rsavage_: Quick question.  Has anyone run into a situation in which they haven't run 'chef-client' on a node in awhile, so now there's an update to the chef-client, and the inital run fails due to an omnibus update?  Then a subsequent chef-client works....?
[2014-07-25 18:16:34 -0400] rsavage_: has anyone figured out a clever way around this?
[2014-07-25 18:17:44 -0400] jtimberman: rsavage_: one might say, "Chef is a self-healing convergent configuration management system" :)
[2014-07-25 18:18:12 -0400] rsavage_: jtimberman: heh, no seriously... anyone know the cause and possible solution?
[2014-07-25 18:18:34 -0400] jtimberman: are you using omnibus_updater cookbook?
[2014-07-25 18:18:41 -0400] rsavage_: jtimberman let me see
[2014-07-25 18:18:43 -0400] jtimberman: if so i'd suggest pinning the version you want
[2014-07-25 18:18:51 -0400] jtimberman: because chef doesn't automatically update itself.
[2014-07-25 18:18:54 -0400] paulmooring: rsavage_ well process monitors (like runit) restart chef-client on failure
[2014-07-25 18:18:58 -0400] jtimberman: that would be potentially really dangerous.
[2014-07-25 18:20:21 -0400] rsavage_: No I am not using the omnibu_updater recipe
[2014-07-25 18:21:03 -0400] rsavage_: paulmooring: I am not running runit either
[2014-07-25 18:21:42 -0400] paulmooring: rsavage_ I meant runit could be a solution
[2014-07-25 18:21:50 -0400] rsavage_: rsavage_ oh ok
[2014-07-25 18:21:56 -0400] rsavage_: actually I am running runit, sorry
[2014-07-25 18:22:06 -0400] paulmooring: as in if omnibus_updater kills your chef run for an update, runit will restart the chef-client daemon
[2014-07-25 18:22:43 -0400] paulmooring: or whatever process monitoring you like runit, monit, systemd, god can all do the same thing
[2014-07-25 18:22:49 -0400] rsavage_: paulmooring: yeah that makes sense, but I have nodes which don't have daemonized chef-client
[2014-07-25 18:23:45 -0400] paulmooring: but like jtimberman said, if you're not using a cookbook that explicitly kills the current chef-client run for an update Chef won't do it automatically
[2014-07-25 18:23:57 -0400] rsavage_: oh ok
[2014-07-25 18:39:23 -0400] drag00n: Hey everyone, I am still having problems with rbenv and the apache2_passenger cookbook. It was suggested that I add rbenv to my path and rbenv is already listed in my path when i login to the vagrant box. Rbenv is picked up as the ruby path on the second run of chef but defaults to the chef ruby under /opt in the first run.
[2014-07-25 18:41:06 -0400] coderanger: drag00n: You need to update it in-memory in the chef process
[2014-07-25 18:41:30 -0400] coderanger: drag00n: env vars are inherited from parent to child, so when rbenv builds, the path isn't updated until the next time chef runs
[2014-07-25 18:41:44 -0400] coderanger: unless you set it manually via ENV['PATH'] like I said
[2014-07-25 18:42:49 -0400] Eulipion: drag00n: try something like this, http://pastebin.com/vQ7ignCg
[2014-07-25 19:25:16 -0400] dkinzer: So I need to set up a mysql_server initally with one configuration in order to do a big import but then change the configuration to do what it will actually be.  Is the typical way to do this ... https://gist.github.com/dkinzer/2e6ef662e34b6c58da22
[2014-07-25 19:44:51 -0400] nulleric: when doing a knife cookbook share, what key does it use to auth with?
[2014-07-25 19:44:53 -0400] nulleric: on supermarket
[2014-07-25 19:45:36 -0400] coderanger: nulleric: Whatever knife is configured with
[2014-07-25 19:46:18 -0400] nulleric: sure, but where do i get that key from, manage.opscode.com? I just generated a new one, set it in knife
[2014-07-25 19:46:55 -0400] coderanger: nulleric: Yes, it should be your HEC user key
[2014-07-25 19:51:02 -0400] nulleric: got it, maybe a sync issue
[2014-07-25 19:55:01 -0400] dkinzer: ?
[2014-07-25 20:07:39 -0400] jpoole: anyone ever experience attribute issues when attribute values have 'special' characters?
[2014-07-25 20:13:33 -0400] evaryont: is there any easy/lazy script somewhere that integrates git & chef-server? Like, a coworker could open a pull request for some change at $CORP's chef repo, and once merged it would be pushed to the development environmnet?
[2014-07-25 20:15:39 -0400] jblancett: evaryont: are you keeping all your cookbooks in a single repo?
[2014-07-25 20:15:58 -0400] evaryont: jblancett: the corp-specifc ones, yeah. rest are from the supermarket.
[2014-07-25 20:16:12 -0400] evaryont: managed via Berkshelf.
[2014-07-25 20:16:14 -0400] coderanger: holoway has an old thing for that
[2014-07-25 20:16:15 -0400] jblancett: ah ok
[2014-07-25 20:16:41 -0400] jblancett: I've seen some attempted solutions to that issue but none that worked well, could be out there though
[2014-07-25 20:16:47 -0400] coderanger: https://github.com/adamhjk/chef-jenkins
[2014-07-25 20:16:48 -0400] coderanger: That
[2014-07-25 20:16:58 -0400] coderanger: Its not been updated in a while, but might give you a starting place
[2014-07-25 20:17:19 -0400] evaryont: hmm, interesting. thanks!
[2014-07-25 20:18:57 -0400] geggam: so postgresql['ha'] = false what does true mean ?
[2014-07-25 20:19:10 -0400] coderanger: geggam: In chef-server.rb?
[2014-07-25 20:19:15 -0400] geggam: yes coderanger
[2014-07-25 20:19:28 -0400] coderanger: geggam: That you are running a pair/cluster for the DB
[2014-07-25 20:19:37 -0400] geggam: not on the same node ?
[2014-07-25 20:19:46 -0400] coderanger: geggam: This is a feature of enterprise chef, enabling it in FOSS chef server won't do much other than break your server
[2014-07-25 20:20:05 -0400] geggam: so lets say i am connecting to a multizone rds in aws...
[2014-07-25 20:20:20 -0400] coderanger: Not related
[2014-07-25 20:20:25 -0400] geggam: k thanks
[2014-07-25 20:20:38 -0400] coderanger: the ha flags in chef-server.rb enable a bunch of heartbeat related stuff in enterprise chef
[2014-07-25 20:20:44 -0400] geggam: ah
[2014-07-25 20:20:48 -0400] coderanger: which is just not present in the foss packages
[2014-07-25 20:20:51 -0400] geggam: i wondered what it did ... thanks
[2014-07-25 20:21:14 -0400] geggam: heartbeat and not corosync ?
[2014-07-25 20:21:22 -0400] geggam: how obsolete
[2014-07-25 20:21:25 -0400] coderanger: I think its actually keepalived
[2014-07-25 20:21:38 -0400] coderanger: I just paraphrase them all to "heartbeat" since it gets the point across
[2014-07-25 20:21:53 -0400] geggam: ah... ok :) thanks
[2014-07-25 20:41:37 -0400] derks: anyone else getting issues with put_fqdn_in_hosts?
[2014-07-25 20:41:59 -0400] derks: keep getting "undefined method `each' for nil:NilClass"
[2014-07-25 20:44:00 -0400] jordane: derks: a pastebin of the error is helpful
[2014-07-25 21:22:58 -0400] mallu: is it possible to have knife ssh read a list?
[2014-07-25 21:24:22 -0400] mallu: I have a list of nodes I want to be able to ssh to run a command
[2014-07-25 21:24:39 -0400] jordane: knife ssh accepts a search query
[2014-07-25 21:24:59 -0400] jordane: so you can always do a search that returns that list
[2014-07-25 21:25:18 -0400] jordane: mallu: ah, apparently -m was added
[2014-07-25 21:25:27 -0400] jordane: that seems to let you do a manual list now
[2014-07-25 21:25:27 -0400] mallu: there is no common thing I can search for
[2014-07-25 21:26:00 -0400] jordane: knife ssh -m 'server1 server2 server3' cmd
[2014-07-25 21:28:31 -0400] MikeTLive: ohai guard coders  i'm trying to use package resource with only_if and it is installing anyway. i put the same condition outside, wraping with an if block and it does as expected, so the value is correct. are there issues with package not respecting only_if ?
[2014-07-25 21:32:48 -0400] derks: jordane: https://gist.github.com/derks/75d19e6c7a013743b5f0
[2014-07-25 21:44:12 -0400] jordane: derks: is your /etc/hosts empty?
[2014-07-25 22:52:59 -0400] shlant: coderanger: why does this reference a init.d script instead of sv?
[2014-07-25 22:53:00 -0400] shlant: https://github.com/poise/application_ruby/blob/master/providers/unicorn.rb#L37
[2014-07-25 22:53:21 -0400] coderanger: shlant: Probably because thats why the old recipe code did :)
[2014-07-25 22:54:27 -0400] Eulipion: shlant: that init script calls sv, which does not support HUP
[2014-07-25 22:54:48 -0400] shlant: Eulipion: so that should be sv 2 or something
[2014-07-25 22:54:56 -0400] shlant: if I'm using zero downtime deploy
[2014-07-25 23:39:36 -0400] rbowlby: Chef employees: can someone please let sales know to call me. I've filled out the contact form to subscribe to hosted chef twice now. lol, please take my money!
[2014-07-25 23:40:08 -0400] ranjib: hi, folks
[2014-07-25 23:40:18 -0400] coderanger: rbowlby: Sorry, haven't seen any employees since around noon
[2014-07-25 23:40:28 -0400] ranjib: im getting /opt/chef-server/embedded/bin/ruby: /lib/libc.so.6: version `GLIBC_2.14' not found (required by /opt/chef-server/embedded/lib/libruby.so.1.9) during chef-server installation .. on ubuntu 10.04
[2014-07-25 23:40:34 -0400] ranjib: anyone else seeing this?
[2014-07-25 23:41:05 -0400] rbowlby: sigh
[2014-07-25 23:43:21 -0400] coderanger: ranjib: Hmm, how certain are you the correct package was installed?
[2014-07-25 23:43:30 -0400] coderanger: rbowlby: You can reach support at support@getchef.com
[2014-07-25 23:44:04 -0400] ranjib: coderanger, dpkg didnt complained..
[2014-07-25 23:44:10 -0400] ranjib: i'll try reinstalling it
[2014-07-25 23:44:32 -0400] coderanger: ranjib: It wouldn't, debs don't have any kind of restriction like that

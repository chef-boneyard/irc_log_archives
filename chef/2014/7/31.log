[2014-07-31 00:29:27 -0400] while1eq1: will the before_restart block inside deploy_revision get executed if there is no new code to checkout from github?
[2014-07-31 00:30:29 -0400] coderanger: while1eq1: No
[2014-07-31 00:31:21 -0400] while1eq1: @coderanger: thanks
[2014-07-31 01:24:54 -0400] iFire: How does on configuration manage databases?
[2014-07-31 01:24:57 -0400] iFire: one*
[2014-07-31 01:26:17 -0400] cheeseprocedure: iFire: i think that's normally handled by the application you're deploying
[2014-07-31 01:26:35 -0400] cheeseprocedure: if you mean the DB data/schema as opposed to the software packages
[2014-07-31 01:26:40 -0400] iFire: well I'm just wondering how do you backup dbs and restore the db
[2014-07-31 01:26:40 -0400] iFire: yes
[2014-07-31 01:27:30 -0400] iFire: this platform recommends us to reinstall everying using configuration management when upgrading versions of os
[2014-07-31 01:30:26 -0400] coderanger: iFire: backup and restore isn't config management
[2014-07-31 01:30:52 -0400] iFire: well I don't expect to use ssh commands on the server..
[2014-07-31 01:31:06 -0400] coderanger: iFire: Why not?
[2014-07-31 01:31:25 -0400] iFire: that breaks the model
[2014-07-31 01:31:30 -0400] coderanger: iFire: You might use chef to deploy some kind of backup system like rsnapshot
[2014-07-31 01:31:38 -0400] coderanger: but chef itself isn't a backup system
[2014-07-31 01:31:42 -0400] iFire: yes
[2014-07-31 01:32:26 -0400] iFire: I guess I could have a json entry that lists the dump of the database
[2014-07-31 01:32:27 -0400] coderanger: and how the restore happens varies with the backup system, most involve manual commands though
[2014-07-31 01:32:42 -0400] iFire: and given the dump it'll try to restore
[2014-07-31 01:32:52 -0400] coderanger: Like with my rsnapshot backups, I would have to use psql to reload the dump
[2014-07-31 01:33:41 -0400] iFire: well I could write a config bag saying where the backups are and load it
[2014-07-31 01:33:48 -0400] iFire: uh postgresl
[2014-07-31 01:35:15 -0400] coderanger: iFire: I really wouldn't use chef to manage DB restores
[2014-07-31 01:35:19 -0400] coderanger: it isn't the right tool
[2014-07-31 01:35:52 -0400] coderanger: iFire: Chef manages convergent state, restores are procedural by nature
[2014-07-31 01:36:01 -0400] coderanger: iFire: Just make a fab task, or use something like rundeck
[2014-07-31 01:36:13 -0400] iFire: I googles
[2014-07-31 01:38:57 -0400] coderanger: iFire: Hmm?
[2014-07-31 01:40:32 -0400] raul7821: Hi guys, when deploying with chef in opsworks to ubuntu14, I can't sudo when ssh the machine
[2014-07-31 01:40:49 -0400] raul7821: Is there something different that I'm missing?
[2014-07-31 01:41:00 -0400] raul7821: I've been able to do that in regular ec2 instances
[2014-07-31 01:41:05 -0400] coderanger: raul7821: The two aren't particularly related
[2014-07-31 01:41:52 -0400] raul7821: should I create a recipe to do that or override the sudoers
[2014-07-31 01:42:49 -0400] coderanger: raul7821: Whatever you want chef to do, there must be a recipe for it
[2014-07-31 01:43:03 -0400] coderanger: raul7821: There is a community cookbook called "sudo" to manage the sudoers file, you could use that
[2014-07-31 01:43:06 -0400] coderanger: or you could write your own
[2014-07-31 01:43:50 -0400] raul7821: perfect thanks
[2014-07-31 01:57:32 -0400] clakeb: When running chef-client in local mode what is the proper way to allow cookbooks managed by Berkshelf to be included in the run?
[2014-07-31 02:00:09 -0400] clakeb: I've tried a client.rb file with cookbook_path set to both my /cookbook/wrapper and ~/.berkshelf/cookbooks but they just don't seem to be included.
[2014-07-31 02:05:09 -0400] kisoku: in local mode I think it expects them to live in  #{chef_repo_path}/cookbooks
[2014-07-31 02:05:27 -0400] kisoku: aldo
[2014-07-31 02:05:47 -0400] kisoku: you probably need to make sure all of your cookbooks have the metadata.json egenrated
[2014-07-31 02:06:15 -0400] kisoku: as chef-zero doesn't translate any of the files written in the ruby dsl for you
[2014-07-31 02:06:34 -0400] kisoku: mind you I might be completely mistaken
[2014-07-31 02:15:03 -0400] raul7821: I think there is an encodign error in this cookbook, how could I solve that? https://gist.github.com/raul782/b2c9641af10881ea6dda
[2014-07-31 02:23:18 -0400] clakeb: kisoku: I vendored the cookbooks with berks and it worked (except that now my wrapper is vendored with the rest and I get a warning). It is because the ~/.berkshelf/cookbooks/ have the version number in the dir that it wasn't working I assume. When I vendored the version wasn't part of the dir name.
[2014-07-31 02:24:37 -0400] raul7821: Hi guys, I'm testing with kitchen and I have one chef repo, should I have different .kitchen files per cookbook?
[2014-07-31 02:24:53 -0400] kisoku: vendoring with berks will produce the metadata.json as well
[2014-07-31 02:24:54 -0400] kisoku: iirc
[2014-07-31 02:26:17 -0400] kisoku: raul7821: I tend to prefer having a set up per cookbook
[2014-07-31 02:26:37 -0400] kisoku: I find it encourages me to run test kitchen frequently as part of the cookbook development process
[2014-07-31 02:26:56 -0400] kisoku: I use the one repo per cookbook workflow however
[2014-07-31 02:27:00 -0400] clakeb: metadata.json are also in ~/.berkshelf/cookbooks/cookbook-name-1.2.3
[2014-07-31 02:28:37 -0400] raul7821: Ic, and what if one cookbook depends on another one?
[2014-07-31 02:36:55 -0400] kisoku: raul7821: that's why we use one repo per cookbook + a dependency manager like berkshelf or librarian
[2014-07-31 02:37:28 -0400] kisoku: I say berkshelf and jamie appears
[2014-07-31 02:39:13 -0400] raul7821: kisoku: Thanks I got that, If I use standard structure to upload my chef repo to opsworks, the best way should be to have a kitchen file per cookbook and berksfile per cookbook too?
[2014-07-31 02:41:04 -0400] raul7821: or the berksfile could stay at the root of the chef repo?
[2014-07-31 02:42:27 -0400] Damm: raul7821, if your you export your cookbooks into a single repo
[2014-07-31 02:42:39 -0400] Damm: raul7821, it's great to have multiple .kitchen.yml's but don't be afraid to have both
[2014-07-31 02:42:59 -0400] Damm: raul7821, you can have .kitchen.yml in a chef-repo and if it hosts a cookbook that has it's own test suite; what's the harm?
[2014-07-31 02:43:15 -0400] Damm: your testing ideally a working solution in chef-repo and in the cookbook you want to make sure it works
[2014-07-31 02:43:19 -0400] Damm: sometimes the test is not the same
[2014-07-31 02:43:22 -0400] Damm: or the scenario
[2014-07-31 02:44:22 -0400] raul7821: Damm: thanks that's very helpful, when I run .kitchen.yml at the root level, when converging, kitchen doesn't find my cookbook, but if apply inside a cookbook it works
[2014-07-31 02:44:35 -0400] Damm: raul7821, github.com/damm/chef-repo/tree/sensu
[2014-07-31 02:44:57 -0400] kisoku: raul7821: best way is wwhatever is best for you
[2014-07-31 02:44:58 -0400] Damm: raul7821, that's how I do my chef-repo currently (it may not match) but the Berksfile and .kitchen.yml should hopefully get you in the right direction
[2014-07-31 02:45:28 -0400] kisoku: I do something similar to this as well
[2014-07-31 02:45:30 -0400] Damm: so if you keep the cookbooks locally you need https://github.com/damm/chef-repo/blob/sensu/Berksfile
[2014-07-31 02:45:44 -0400] Damm: cookbook("something",path: cookbooks/soething")
[2014-07-31 02:45:46 -0400] kisoku: my chef repos have a tpop level berksfile and a .kitcehn.yml
[2014-07-31 02:46:11 -0400] kisoku: so I can test common usecases, ie diffrent commen runlists associated to the repo
[2014-07-31 02:46:23 -0400] Damm: but as I said chef-repo tests don't always neccestate the same as the cookbook
[2014-07-31 02:46:31 -0400] Damm: and if you run minitest-handler and the tests are shipped in files/
[2014-07-31 02:46:38 -0400] Damm: you can run multiple tests at once
[2014-07-31 02:46:56 -0400] Damm: kind of a big catch if you have a bunch of cookbooks with minitest and a large role you converge to have all their tests run at the end
[2014-07-31 02:47:05 -0400] Damm: sometimes great; occasionally bad
[2014-07-31 02:50:27 -0400] raul7821: I got it, that's cool, so kitchen takes the path from the berksfile to run the suite sensu?
[2014-07-31 02:52:52 -0400] raul7821: Damm: so I wonder in my case I have chef-repo/mycookbook  chef-repo/.kitchen.yml and chef-repo/Berksfile, it should converge but kitchen can't find it
[2014-07-31 02:53:09 -0400] raul7821: mycookbook
[2014-07-31 03:15:28 -0400] Damm: does berksfile see it?
[2014-07-31 03:16:07 -0400] raul7821: Damm:how do I know that?
[2014-07-31 03:16:34 -0400] raul7821: sorry just starting with chef and trying to wrap everything in my head
[2014-07-31 03:17:40 -0400] Damm: berks show mycookbook
[2014-07-31 03:17:50 -0400] Damm: should reference somedir
[2014-07-31 03:17:54 -0400] Damm: and in that should be your cookbook
[2014-07-31 03:19:09 -0400] raul7821: no it can't find it because
[2014-07-31 03:19:39 -0400] raul7821: I thought you only put dependencies and not your own custom cookboook
[2014-07-31 04:11:19 -0400] cloudbud: hi
[2014-07-31 04:19:06 -0400] cloudbud: can somebody look into this http://answers.splunk.com/answers/147963/how-to-view-data-particular-to-a-specific-region-in-splunk-app-for-aws
[2014-07-31 04:20:46 -0400] kisoku: what does that have to do with chef ?
[2014-07-31 04:43:39 -0400] Trappar: I want to use the sudo community cookbook. It says I should set some attributes to control which users get sudo access. I have dev and prod environments. Where would the best place be to store attributes for that cookbook? In each environment? In roles? In the attributes for an "application cookbook"?
[2014-07-31 05:18:03 -0400] Damm: raul7821, no everything
[2014-07-31 05:18:22 -0400] Damm: raul7821, that's why I have site-cookbooks I put everything I make in there; then cookbooks is someone elses crap
[2014-07-31 06:37:58 -0400] fclausen: Trapper: I would say in an "application" aka wrapper cookbook. At least that's what I would do.
[2014-07-31 07:38:58 -0400] SmudgerDan: Ohai! Peeps
[2014-07-31 07:46:46 -0400] Damacus: Ohai SmudgerDan!
[2014-07-31 08:02:12 -0400] SmudgerDan: Damacus: How are you this sunny morning? =D
[2014-07-31 08:03:15 -0400] Damacus: good! I woke up to find fixes in one of the cookbooks I'm using.
[2014-07-31 08:09:57 -0400] Damacus: SmudgerDan how be thee?
[2014-07-31 08:11:43 -0400] Damacus: SmudgerDan what're you using for your cookbook workflow? Having some... thoughts about the workflow. We're using Jenkins + Berks here. But I wonder if there some evolutionary step
[2014-07-31 08:12:24 -0400] brucelee: yo coderanger  whats up
[2014-07-31 08:17:56 -0400] SmudgerDan: Damacus: I am very much a newbie when it comes to chef, I have spun up a vagrant vm in hyper V and I write my cookbooks in notepad++, knife them up, add them to the VM node on the chef dashboard, run chef client and see what happens
[2014-07-31 08:18:13 -0400] SmudgerDan: Damacus: not really the best workflow at all
[2014-07-31 08:20:54 -0400] brucelee: what did you choose chef
[2014-07-31 08:22:33 -0400] Damacus: interesting. Well we're looking at putting some best practises in place for workflows.
[2014-07-31 08:24:59 -0400] SmudgerDan: I think you are meant to be using the chef development kit http://downloads.getchef.com/chef-dk/windows/
[2014-07-31 08:25:07 -0400] SmudgerDan: but to be honest I havent really looked at it yet
[2014-07-31 08:27:48 -0400] brucelee: seems like its such a struggle, why not use something easier like ansible
[2014-07-31 08:27:56 -0400] brucelee: is there somethign about chef that makes it more powerful
[2014-07-31 08:27:59 -0400] brucelee: as compared to ansible
[2014-07-31 08:28:10 -0400] brucelee: that makes people prefer chef over ansible when ansible is so easy
[2014-07-31 08:30:02 -0400] SmudgerDan: I use chef because it was here when I started this job =D
[2014-07-31 08:32:39 -0400] brucelee: :p
[2014-07-31 08:56:01 -0400] SmudgerDan: I have a cookbook which sets a password up, so I use a databag, in the attributes of the cookbook, should I check for the the databag item, then if it isnt there use defaults?
[2014-07-31 08:56:18 -0400] SmudgerDan: or is there a way to require a specific databag item?
[2014-07-31 08:57:42 -0400] bgermain1689: anyone run into this before - execute coming back with no exit code: Expected process to exit with [0], but received ''
[2014-07-31 08:57:49 -0400] SmudgerDan: arr I see I can require the databag item http://www.getchef.com/blog/2014/01/23/attributes-or-data-bags-what-should-i-use/
[2014-07-31 09:02:00 -0400] SmudgerDan: or maybe you cant...
[2014-07-31 09:13:28 -0400] Damacus: SmudgerDan that's one part of it. I'm talking about the dependency, upload part. Berks is part of ChefDK.
[2014-07-31 09:14:33 -0400] SmudgerDan: Damacus: we store out cookbooks in TFS (we are a Microsoft shop) and remembering to knife everything up to the Chef Server is a pain
[2014-07-31 09:14:57 -0400] Damacus: yeah so we have a pipeline like this
[2014-07-31 09:15:07 -0400] SmudgerDan: I need to write a build definition to trigger when something is checked in
[2014-07-31 09:16:01 -0400] Damacus: git push --> git server --> web hook that start jenkins --> jenkins does a load of checks on the cookbook (rubocop, serverspec, foodcritic) --> berks upload --quiet
[2014-07-31 09:16:58 -0400] Damacus: I'm thinking something similar should be possible with TFS.
[2014-07-31 09:18:02 -0400] Damacus: I'm quite a big fan of using jenkins/travis/teamcity to run tests and not upload them should they fail. I have enough of my bad code in dev, I don't want more :P
[2014-07-31 09:30:45 -0400] baniel: hey guys, im new to chef and google didnt help much. i cant figure out whats the purpose of chef clients? i got open source chef, have my user for using knife on my workstation, nodes are the machines managed by chef, but what do i need clients for?
[2014-07-31 09:33:23 -0400] digitalchild: chef client runs on the nodes
[2014-07-31 09:33:36 -0400] digitalchild: either manually or automatically/scheduled
[2014-07-31 09:36:43 -0400] baniel: so the chef server has to know the clients to invoke a chef client run? isnt knowing the node, where the chef-client is located, enough?
[2014-07-31 09:40:24 -0400] workmad3: baniel: a 'client' in chef terminology is a public/private keypair
[2014-07-31 09:40:35 -0400] SmudgerDan: I think a node is any box which chef-client runs on
[2014-07-31 09:40:53 -0400] workmad3: baniel: so the server has a client for a node in order to have a public/private keypair to sign and verify communication
[2014-07-31 09:41:15 -0400] SmudgerDan: a client in chef is any machine which can interact with the chef-serve. such as changing run lists and roles on a node
[2014-07-31 09:41:39 -0400] SmudgerDan: if you bootstrap a node, that means that it will be both a client and a node
[2014-07-31 09:42:16 -0400] workmad3: SmudgerDan: yeah... I should have said 'essentially it's a name for a public/private keypair that's used to verify communication' :)
[2014-07-31 09:42:32 -0400] workmad3: SmudgerDan: but your phrasing is more chef-centric
[2014-07-31 09:43:06 -0400] baniel: i see know, thank you guys, that really helps :)
[2014-07-31 09:43:14 -0400] workmad3: baniel: basically, on the first run on a new node, the verification.pem key is used to create a new client, so this is mostly transparent ;)
[2014-07-31 09:43:44 -0400] baniel: so clients are most likely created automatically by the chef server?
[2014-07-31 09:44:00 -0400] workmad3: baniel: in the default bootstrap process, yes
[2014-07-31 10:01:36 -0400] trilitheus: Hi - if a cookbook is specified as a dependency (e.g apache2 depends on freebsd) but I run that on an Ubuntu node for instance, does the freebsd cookbook still get parsed at compile time?
[2014-07-31 10:04:29 -0400] anothersmith: it would yes
[2014-07-31 10:07:37 -0400] cloudbud: can I deploy my wordpress application to a server using chef ?
[2014-07-31 10:08:43 -0400] anothersmith: yeah you could, https://github.com/roots/wordpress-nginx
[2014-07-31 10:11:47 -0400] trilitheus: anothersmith, OK - so I'm trying to run chefspec and it's crapping out on a require statement from a dependency cookbook that I'm never gonna use
[2014-07-31 10:12:07 -0400] trilitheus: don;t suppose you knowe how to stub require 'path/to/file' do you? :D
[2014-07-31 10:15:06 -0400] anothersmith: nope sorry im still getting my head around chef myself
[2014-07-31 10:22:21 -0400] trilitheus: :) same here - for 3 years!
[2014-07-31 10:23:09 -0400] anothersmith: haha that fills me with confidence, whats the cookbook your using with the require and I'll have a peak?
[2014-07-31 10:25:49 -0400] trilitheus: apache2-1.11.0
[2014-07-31 10:26:06 -0400] trilitheus: it depends on freebsd
[2014-07-31 10:26:34 -0400] trilitheus: I'm just starting a wrapper cookbook, added a depends on apache2 in the metadata
[2014-07-31 10:27:14 -0400] trilitheus: created a blank webserver.rb and just added include_recipe 'my-wrapper::webserver' in the default recipe and a simple default_spec.rb just checking the inclusion of that recipe
[2014-07-31 10:27:38 -0400] trilitheus: Sec - I'll gist the error
[2014-07-31 10:29:23 -0400] trilitheus: https://gist.github.com/trilitheus/a234e437915c2ea7c06a
[2014-07-31 10:37:04 -0400] anothersmith: sorry cant help you with that one
[2014-07-31 10:39:10 -0400] maniac: The problem is i dont understand how to connect chef_data repository to every cookbook. Because cookbooks have .kitchen.yml file which have paths to envs,roles etc.
[2014-07-31 10:39:10 -0400] maniac: The problem is how to connect hose 2 things ? What solutions should i use ? Perhaps gitsubmodule? Or my view of chef workflow is incorrect ?
[2014-07-31 10:39:21 -0400] maniac: Thinking about chef workflow .. and come up to this :
[2014-07-31 10:39:22 -0400] maniac: 1)every cookbook is in its own separate repository
[2014-07-31 10:39:22 -0400] maniac: 2)there is a separate repository which con taint only : environments, data_bags, roles
[2014-07-31 10:39:47 -0400] maniac: wrong chat order
[2014-07-31 10:40:49 -0400] maniac: i hope i made my point .. any help will be apreciated
[2014-07-31 10:42:36 -0400] trilitheus: anothersmith, no probs - googled loads for stubbing require and looks like maybe able to do with a stub_const but I may be barking up wrong tree
[2014-07-31 10:44:16 -0400] kj: Hi guys, was wondering if you could help me out here. I've been playing around with chef now for a week or two and i like it a lot. how everything is tied together and using ruby + json to get it all done so it's suitable for me since i come from development. The reason i started experimenting with it is that the company i'm working in is finally moving towards automatic deployments.
[2014-07-31 10:44:19 -0400] kj: Now the problem is that one of the "big ups" is pushing for puppet, as little as i know about it - like it's trickish dsl language and lack of features if you're not using enterprise puppet, i'm not too up for it. How could i convince my workplace to use Chef instead of Puppet? Have you had this situation? Any suggestions?
[2014-07-31 11:08:40 -0400] gavala: Can anyone shed any light on this bizzare behaviour in chef? http://pastebin.com/0ix6L28z
[2014-07-31 11:10:01 -0400] gavala: array of stuff, array.each to array.delete(thing) and at the end of the loop there is still stuff in the array. That makes no sense to me
[2014-07-31 11:22:59 -0400] workmad3: gavala: don't delete things from a collection while looping over it
[2014-07-31 11:23:19 -0400] workmad3: gavala: as that's ruby, not chef... and by deleting you basically screw up the internal count of where the .each enumerator is at
[2014-07-31 11:37:20 -0400] stonevil_: Hi all! I need to work from chef recipes with json requests. Someone can recommend something more sophisticated than http_request?
[2014-07-31 12:02:22 -0400] kj: Any ideas how to convince company to use Chef over Puppet?
[2014-07-31 12:06:15 -0400] zts: kj: first, you have to convince people (which is possible), not "a company" (which is not).  To convince people, you need to understand what matters to them, and then show them how your preferred option best satisfies their needs
[2014-07-31 12:06:25 -0400] zts: (if indeed it does)
[2014-07-31 12:07:36 -0400] legal90: Hi, chefs! Please, give me an advice.
[2014-07-31 12:09:01 -0400] legal90: I have a DB node managed by chef, but I want periodically make a database dump there. I would like to use chef/knife for that
[2014-07-31 12:09:54 -0400] anothersmith: legal90, get chef to deploy a cron.d file?
[2014-07-31 12:10:45 -0400] someara: kj, if you're looking for standard sales-ish arguments: Chef's more powerful, (no neutered language), it scales better (no server-side graph sorting), and it's simply a more pleasant experience to work with (ask anyone thats used both)
[2014-07-31 12:11:14 -0400] someara: people can code policy faster because they're not constantly keeping track of some weird DAG in their head
[2014-07-31 12:11:27 -0400] legal90: I'm using the deploy, but in my case creating of dumps is a separated task, which is not bounded to deploy. (And I don't use cron for these)
[2014-07-31 12:13:25 -0400] kj: zts: currently the only reason that person want's to use it is because he has briefly played around with puppet which i don't think is enough to take that kind of desicion. Problem is that we're just starting out with this in here and need to make a choice.
[2014-07-31 12:13:27 -0400] legal90: For example, I can create a dump using 'knife ssh' and this dump will be saved on the node locally. So, how can I get this file (except the ssh'ing there from my workstation)?
[2014-07-31 12:17:46 -0400] kj: thanks, @someara, zts - i'll see what i can do heh, as much as i've played around with Chef i really like it, haven't touched puppet yet. also we're building some of the infrastructure on aws so could integrate with opsworks even.
[2014-07-31 12:28:25 -0400] smithmb: Is there any way to get locking (optimistic or otherwise) for things like API calls that try to update the same object at the same time? like two people running 'knife environment edit ...' at the same time?
[2014-07-31 13:19:27 -0400] trilitheus: legal90, (Assuming MySQL) you could just create a user for the db that is you@yourhost with relevant permissions and do the dump locally by running the mysqldump command from your workstation mysqldump -H yourdbserver -u you.....
[2014-07-31 13:20:46 -0400] legal90: trilitheus, thanks for a response. I also think about it
[2014-07-31 14:00:06 -0400] bixu: can i use the chefdk with bundler?
[2014-07-31 14:01:20 -0400] chef923:  HOW TO RECOVER FROM CHEF-CLIENT FIRST RUN FAILURE WITH RSA -500 I am trying to bootstrap a Linux node, the chef-client initial run fails with  OpenSSL::PFKey::RSAError: private key needed. I see the /etc/chef/validation.pem has a public, i think i need a Private Key for the organization validator. Can i know how to get this. Will it the same as the file in other server in my Chef organization
[2014-07-31 14:17:34 -0400] nico__: hey all question about variable assignment inside a recipe.  I want something along the lines of:     path_to_zsh = `which zsh`
[2014-07-31 14:17:48 -0400] nico__: those are backticks, not qingle quotes
[2014-07-31 14:18:18 -0400] nico__: so what I'm going for is evaluating the command "which zsh" and assigning the output to the variable path_to_zsh
[2014-07-31 14:18:28 -0400] cwj: chef923: yes the required validation key is a private key and the same one is used to bootstrap any node with a given chef server
[2014-07-31 14:19:24 -0400] nico__: but I don't know how to tell chef that I want that variable assigned to the output of the command when executed on the node
[2014-07-31 14:19:27 -0400] cwj: chef923: see http://docs.getchef.com/auth_authentication.html for more details
[2014-07-31 14:19:54 -0400] chef923: CWJ i can copy the validaton.pem file from another working node - Thanks for you reply
[2014-07-31 14:20:32 -0400] bixu: So, can I use bundler with chef-dk?
[2014-07-31 14:21:16 -0400] cwj: nico__: if you can gist/pastebin what you are trying to do, it might make it easier for someone to comment
[2014-07-31 14:21:41 -0400] nico__: apparently, I should be able to just use the backticks  http://stackoverflow.com/questions/17082791/chef-how-to-get-the-output-of-a-command-to-a-ruby-variable
[2014-07-31 14:22:22 -0400] nico__: pastebin's probably not really necessary anyway - question is atomic, that answer doesn't depend on the context.  I just want the output of the command assigned to a variable
[2014-07-31 14:24:19 -0400] nico__: but thanks for the reply!
[2014-07-31 14:28:41 -0400] cwj: nico__: you probably want to look at using Mixlib::ShellOut
[2014-07-31 14:29:09 -0400] cwj: you can capture stdout, return codes, control stdin, etc
[2014-07-31 14:29:35 -0400] nico__: oh wow, that's a great library
[2014-07-31 14:29:49 -0400] nico__: thanks!
[2014-07-31 14:29:57 -0400] cwj: chef depends on it, so you get it for free basically
[2014-07-31 14:30:31 -0400] nico__: nice, great to know about that.  I'm not sure I need it for what I'm doing right now, but I already see places where I can improve existing recipes with it.
[2014-07-31 14:30:43 -0400] nico__: so it wil be super useful for me.  thanks again!
[2014-07-31 14:31:53 -0400] nico__: I think I am going to end up putting this recipe in pastebin though....  I ended up using pure ruby to execute some conditional logic, but if I can use guards to achieve the same thing I'd rather do it using them
[2014-07-31 14:35:25 -0400] SmudgerDan: right running knife bootstrap from the host machine on two VMs
[2014-07-31 14:35:38 -0400] SmudgerDan: different images I grant you
[2014-07-31 14:35:46 -0400] SmudgerDan: but one bootstraps correctly
[2014-07-31 14:36:10 -0400] SmudgerDan: the other one gives me the "failed to authenticate"
[2014-07-31 14:36:48 -0400] SmudgerDan: is there some magic setting I need to run on the Windows box
[2014-07-31 14:47:47 -0400] heathsnow: Is it possible to `knife client edit CLIENTNAME` and set `"admin": true,` or am I just waisting my time?
[2014-07-31 15:02:12 -0400] Eulipion: ~.
[2014-07-31 15:03:07 -0400] zts: nico__: for `whizh zsh` equivalent, chef-sugar adds a which() - https://github.com/sethvargo/chef-sugar
[2014-07-31 15:04:47 -0400] nico__: thanks zts.  I've looked at chef-sugar but I'm still learning ruby so I'm forcing myself to use pure ruby and the chef dsl as much as possible.  I'm sure once I feel I have some mastery of the subject, I'll start using the sugar
[2014-07-31 15:05:45 -0400] zts: nico__: that is a good attitude!  However, don't forget you can also look at how chef-sugar does it, to give you some hints about which ruby to look at (eg, see https://github.com/sethvargo/chef-sugar/blob/master/lib/chef/sugar/shell.rb )
[2014-07-31 15:08:01 -0400] nico__: here's something that I could use some help understanding though.  given:     path_to_chsh = `which chsh`
[2014-07-31 15:08:18 -0400] nico__: my expectation is that this guard:  not_if path_to_chsh
[2014-07-31 15:08:41 -0400] raul782: hi guys, I'm trying to debug aws opworks configure phase that is failing, logs from the agent are not available, is there another place where I can find the chef logs?
[2014-07-31 15:09:01 -0400] thom: nico__: to use ruby code as a guard, wrap it in {}
[2014-07-31 15:11:55 -0400] nico__: so my expectation of:   not_if path_to_chsh
[2014-07-31 15:12:21 -0400] nico__: is that if the file doesn't exist, them the value of path_to_chsh is either an empty string, or a null (or maybe even an exit code 0?)
[2014-07-31 15:12:35 -0400] nico__: but that all of those values should evaluate to "falsy"
[2014-07-31 15:12:43 -0400] nico__: but if the file exists, then there's a path in that variable
[2014-07-31 15:12:47 -0400] nico__: and it passes the check
[2014-07-31 15:12:54 -0400] nico__: is that understanding correct?
[2014-07-31 15:13:36 -0400] nico__: perhaps I want an "only_if"?  I guess I'll just dorp what I have in a pastebin for better feedback
[2014-07-31 15:14:26 -0400] pcn: nico__: only_if/not_if isn't the same as [ -f ]
[2014-07-31 15:14:36 -0400] nico__: http://pastebin.com/S6SEzTsJ
[2014-07-31 15:14:43 -0400] pcn: you need to provide an operation for it
[2014-07-31 15:14:45 -0400] thom: nico__: no; if you don't explicitly pass a block, chef will assume you're doing a shell test and pass the whole thing to the shell
[2014-07-31 15:14:53 -0400] nico__: ah, ok good to know.  thank you
[2014-07-31 15:15:57 -0400] pcn: what thom said.  You can use not_if "test -x #{path_to_chsh}" for instance
[2014-07-31 15:17:13 -0400] pcn: or test -h or whatever is appropriate.  I think you'll need to figure out how you want to determine which sh is real and which is the ldap substitute
[2014-07-31 15:26:32 -0400] nico__: great, I think using pcn's sugestion will sort it for me.
[2014-07-31 15:27:45 -0400] nico__: http://pastebin.com/C4MwrCrQ  this looks like it hsould work.  I'm going to test but have a high level of confidence.  thanks for the help gents (or ladies)
[2014-07-31 15:29:52 -0400] nico__: http://pastebin.com/m4pu2zFb  small change, just made a comment more accurte
[2014-07-31 15:34:11 -0400] andychef: i have few questions.
[2014-07-31 15:34:46 -0400] andychef: during chef run it loads the entire cookbook in memory and hence is aware of all the resources. correct?
[2014-07-31 15:41:53 -0400] pcn: andychef: have you looked at this: http://docs.getchef.com/essentials_nodes_chef_run.html ?
[2014-07-31 15:43:45 -0400] someara: yep
[2014-07-31 15:43:54 -0400] andychef: i did @pcn
[2014-07-31 15:44:07 -0400] andychef: I have a situation that I am trying to understand
[2014-07-31 15:44:20 -0400] andychef: I have a cookbook that has two recipes A and B
[2014-07-31 15:44:28 -0400] someara: andychef chef loads all cookbooks in the runlist (ideally one, btw), and then all the cookbooks' dependencies recusively, via metadata.rb
[2014-07-31 15:44:28 -0400] andychef: recipe A has a template resource
[2014-07-31 15:44:41 -0400] someara: so.. all attributes/* libraries/* resources/* and providers/*
[2014-07-31 15:44:45 -0400] andychef: and recipe B has a service
[2014-07-31 15:45:07 -0400] andychef: recipe B doesn't include recipe A via include_recipe
[2014-07-31 15:45:28 -0400] andychef: reciep B's service resource subscribes to tempate resource of recipe B
[2014-07-31 15:45:35 -0400] andychef: during chef-client run this works fine
[2014-07-31 15:45:53 -0400] andychef: because recipe B can see the resource from recipe A as it is loaded in memory
[2014-07-31 15:46:12 -0400] someara: andychef all recipes A B C and D are compiled into a single "resource collection"
[2014-07-31 15:46:13 -0400] andychef: but during ChefSpec the behvaior is deifferent and it can't see the resource in recipe A
[2014-07-31 15:46:26 -0400] someara: where every resource can see each other
[2014-07-31 15:46:31 -0400] andychef: yes
[2014-07-31 15:46:36 -0400] andychef: that is what my understanding is
[2014-07-31 15:46:41 -0400] andychef: every resource can see each other
[2014-07-31 15:46:52 -0400] andychef: but ChefSpec fails
[2014-07-31 15:46:58 -0400] jbarnett: hey hey... is the best way to do a simple "puppet defined resource type" in chef through LWRP or is there a simpler way?
[2014-07-31 15:46:58 -0400] someara: notifying/subscribing to a resource defined in recipe A from recipe B is *possible* but seriously bad practice
[2014-07-31 15:47:42 -0400] andychef: while writing specs for recipe B
[2014-07-31 15:47:48 -0400] andychef: it can't see the resource in recipe A
[2014-07-31 15:48:07 -0400] andychef: @someara...why it is a bad practice...can you please explain a little bit ?
[2014-07-31 15:48:09 -0400] someara: if you were to include_recipe 'recipeA' from recipeB, you'd be able to see it
[2014-07-31 15:48:13 -0400] nico__: final revsion, this is teted and wokring as expected.  if anyone wants to give constructive criticism I'd welcome the feedback:   http://pastebin.com/cePRvkjC
[2014-07-31 15:48:15 -0400] zts: someara: eh?  Surely you're not saying that every recipe that needs to notify something should be redefining that thing?
[2014-07-31 15:48:22 -0400] someara: um... because of the very issues you're running into right now?
[2014-07-31 15:48:34 -0400] zts: that's an argument for declaring your dependencies (ie, include_recipe)
[2014-07-31 15:49:19 -0400] zts: less of an argument, more of the reason to, but eh
[2014-07-31 15:50:14 -0400] someara: its my position that recipes should be self contained
[2014-07-31 15:50:21 -0400] someara: and individually testable
[2014-07-31 15:50:41 -0400] andychef: but if all the resources are compiled into a resource collection...it should be able to see it correct
[2014-07-31 15:50:42 -0400] someara: if you're using include_recipe thats fine...
[2014-07-31 15:50:57 -0400] joshua__: Hey guys, I set some node attributes in a base cookbook, I want to add to those attributes in another recipe, how can I do this rather than overriding them?
[2014-07-31 15:51:23 -0400] someara: andychef yep. within the same run_context
[2014-07-31 15:51:24 -0400] zts: andychef: all the resources from all the recipes that have been loaded - your chefspec only loads one recipe, therefore only its resources are in the collection
[2014-07-31 15:52:24 -0400] andychef: thanks @zts
[2014-07-31 15:52:36 -0400] heathsnow: Does anyone know:  Is it possible to make a client an `admin` on Hosted Chef?  Running `knife client edit CLIENTNAME` and trying to set `"admin": true,` just throws an error.  There must be a way no?
[2014-07-31 15:54:18 -0400] someara: heathsnow I think there's a way but I forget what it is. write support@ and they'll sort you out
[2014-07-31 15:54:59 -0400] joshua__: someara: anyway to append an attribute from cookbook A, in cookbook B. Rather than duplicating them all?
[2014-07-31 15:55:14 -0400] someara: append?
[2014-07-31 15:55:15 -0400] bawt: append not found
[2014-07-31 15:55:18 -0400] heathsnow: Thanks @someara, will do.
[2014-07-31 15:55:26 -0400] someara: joshua no they're all loaded every time
[2014-07-31 15:55:51 -0400] joshua__: http://serverfault.com/questions/484506/merging-chef-attribute-arrays
[2014-07-31 15:55:58 -0400] joshua__: not so keen on this approach..
[2014-07-31 15:56:46 -0400] someara: ah. you want to namespace them
[2014-07-31 15:56:49 -0400] jtimberman: this post by coderanger summarizes the gotchas with using arrays as attributes: https://coderanger.net/arrays-and-chef/
[2014-07-31 15:56:55 -0400] jtimberman: fwiw
[2014-07-31 15:57:03 -0400] someara: https://gist.github.com/someara/c36180279dd5e4c3a506
[2014-07-31 15:57:11 -0400] someara: er
[2014-07-31 15:57:23 -0400] someara: I meant this
[2014-07-31 15:57:24 -0400] someara: https://gist.github.com/someara/c36180279dd5e4c3a506
[2014-07-31 15:57:27 -0400] derek123: hello, using the environment pattern how do you override attributes in a wrapper cookbook? i set an attribute in the metadata file in the environment cookbook, but i can't figure out how to set/use it correctly in the wrapper.
[2014-07-31 15:57:48 -0400] joshua__: jtimberman: was just reading that article, thanks/
[2014-07-31 15:58:48 -0400] someara: also, don't abuse attributes as variables
[2014-07-31 15:58:55 -0400] someara: attributes are not variables.
[2014-07-31 15:58:58 -0400] jtimberman: someara: abuse helper methods instead.
[2014-07-31 15:59:00 -0400] joshua__: someara: err, no not namespacing
[2014-07-31 15:59:01 -0400] someara: yes.
[2014-07-31 15:59:11 -0400] someara: wat
[2014-07-31 15:59:39 -0400] jtimberman: ;) https://github.com/opscode-cookbooks/chef-splunk/blob/master/libraries/helpers.rb
[2014-07-31 16:00:03 -0400] joshua__: I set override['logstash']['beaver']['inputs'] = Array of hashes, in a base cookbook. In another cookbook I want to add some hashes into that array..
[2014-07-31 16:00:31 -0400] someara: oooooh. yea attributes and arrays are pain
[2014-07-31 16:00:40 -0400] joshua__: totally abusing attributes.
[2014-07-31 16:00:46 -0400] someara: not necessarily
[2014-07-31 16:00:59 -0400] someara: there's a difference between using and abusing
[2014-07-31 16:01:01 -0400] shlant1: joshua__: yea I tried to get something like that working to no avail.
[2014-07-31 16:01:02 -0400] shlant1: https://coderanger.net/arrays-and-chef/
[2014-07-31 16:01:34 -0400] jtimberman: shlant1: i just linked that :D
[2014-07-31 16:01:52 -0400] joshua__: lol, ok thanks for the help guys :D
[2014-07-31 16:02:48 -0400] shlant1: jtimberman: of course you did during the 4 minutes I diconnected haha
[2014-07-31 16:02:57 -0400] shlant1: I would have thought someone would have
[2014-07-31 16:16:22 -0400] heathsnow: Ticket submitted, hopefully Support has an answer for me:  https://www.getchef.com/support/tickets/18831
[2014-07-31 16:19:01 -0400] shlant: test
[2014-07-31 16:30:21 -0400] jbarnett: How can you run a single recipe (one time) without overriding the hosts run_list?
[2014-07-31 16:30:27 -0400] thom: heathsnow: i used https://github.com/opscode/knife-acl last time i needed to make a client an admin
[2014-07-31 16:32:16 -0400] martinisoft: Odd timing question for Chef
[2014-07-31 16:32:35 -0400] joshua__: btw - as per https://coderanger.net/arrays-and-chef/ , do at least one lot of attributes you want to append to need to be set in the role file?
[2014-07-31 16:32:43 -0400] joshua__: in default_attributes() ?
[2014-07-31 16:32:53 -0400] martinisoft: When you set action :nothing on an execute resource, then trigger it via a run_action, does it also fire notifications?
[2014-07-31 16:33:10 -0400] martinisoft: Doing a really sad hack in a cookbook and running into a timing issue
[2014-07-31 16:33:14 -0400] joshua__: I've just tried setting default['logstash']['beaver']['inputs'] , in both cookbook A and cookbook B, B wins...
[2014-07-31 16:33:42 -0400] mallu: ohai, we add tags for all our aws instances, is there a way to use knife search to search for a role then get the tags?
[2014-07-31 16:34:09 -0400] martinisoft: mallu: Are you using the knife search or search within a cookbook?
[2014-07-31 16:34:12 -0400] joshua__: mallu: pipe the search to something?
[2014-07-31 16:35:03 -0400] martinisoft: mallu: Nevermind I read your question wrong. You can pipe it like joshua__ said. Can also use knife exec, but tht is trickier.
[2014-07-31 16:35:07 -0400] mallu: using knife search.. I was hoping not to use grep
[2014-07-31 16:36:48 -0400] martinisoft: mallu: Piping to grep would likely be faster than doing knife exec.
[2014-07-31 16:37:43 -0400] mallu: ok... thanks
[2014-07-31 16:38:46 -0400] martinisoft: Hmm, crap. So it looks like when you set action :nothing on a resource it also disables the notifications.
[2014-07-31 16:39:22 -0400] martinisoft: So when I attempt to trigger it via run_action, it doesnt work
[2014-07-31 16:39:25 -0400] someara: what do you mean "disabled the notifications"?
[2014-07-31 16:39:40 -0400] someara: run_action isn' what you're looking for
[2014-07-31 16:39:44 -0400] someara: sec
[2014-07-31 16:40:46 -0400] martinisoft: someara: I have a resource that needs to notify another resource immediately. Because of a timing problem, Im using the run_action trick to force a resource to trigger at compile time
[2014-07-31 16:41:02 -0400] martinisoft: However, its not triggering the resource notification attached
[2014-07-31 16:41:04 -0400] someara: no no no
[2014-07-31 16:41:06 -0400] martinisoft: Ill gist the code
[2014-07-31 16:41:09 -0400] someara: never at compile time
[2014-07-31 16:41:12 -0400] someara: sec
[2014-07-31 16:42:30 -0400] someara: https://gist.github.com/someara/d071b51532997d0f0b1f
[2014-07-31 16:42:45 -0400] someara: ^ in that example, if the file resource has to repair /tmp/somefile
[2014-07-31 16:43:05 -0400] someara: it will notify 'execute[say hi]' immediately
[2014-07-31 16:43:25 -0400] someara: which will notify 'execute[say waaat]', which will fire at the end of the converge
[2014-07-31 16:43:41 -0400] someara: forget run_action exists.
[2014-07-31 16:44:12 -0400] someara: its a hack that should have never been introduced
[2014-07-31 16:44:47 -0400] martinisoft: https://gist.github.com/martinisoft/baf030f286d9616cc928
[2014-07-31 16:44:59 -0400] geggam: internet is online because of hacks... and you want to stop ?
[2014-07-31 16:45:11 -0400] martinisoft: Yay supporting outdated Ubuntu releases
[2014-07-31 16:45:40 -0400] heathsnow: +thom: thanks but that only seems to work for Enterprise Chef.  I'm using Hosted Chef.
[2014-07-31 16:45:50 -0400] someara: wait what?
[2014-07-31 16:45:53 -0400] martinisoft: Anyway, totally not triggering that immediate notification or at least its not triggering immediately, as Id like it to.
[2014-07-31 16:46:43 -0400] geggam: so.... community chef rpm... how hard is it to get the src rpm ?
[2014-07-31 16:46:58 -0400] someara: that's because run_action is forcing the execute resource to run in the compilation phase which isn't aware of the  'execute[apt-get update]' on the resource collection
[2014-07-31 16:47:23 -0400] someara: if you're going to do that, use a bash resource and call the apt-cache reload manually
[2014-07-31 16:47:31 -0400] someara: in one big script
[2014-07-31 16:48:21 -0400] someara: in one atomic action: https://github.com/opscode-cookbooks/mysql/blob/master/libraries/provider_mysql_service_debian.rb#L156-L168
[2014-07-31 16:48:35 -0400] martinisoft: Ah, good idea
[2014-07-31 16:53:17 -0400] thom: heathsnow: wfm on Hosted
[2014-07-31 16:54:58 -0400] heathsnow: +thom: Oh, I'll give a go then :)
[2014-07-31 17:01:28 -0400] jidar: what do you guys do to ensure something was run the first time, like you install a SQL and want the initdb to run, but only the first time? Right now I'm checking the status of service whatever status, and if it's a non-0 return, I run the init, but there are plenty of use case where the service might return non-0 but would start fine
[2014-07-31 17:01:58 -0400] n1ko: notify
[2014-07-31 17:02:01 -0400] n1ko: in the install block
[2014-07-31 17:02:10 -0400] jidar: got an example somewhere?
[2014-07-31 17:03:06 -0400] jidar: notifies :run , resources(:execute => "some_script") something like this except it's not a script it's just a single command?
[2014-07-31 17:03:09 -0400] n1ko: http://docs.getchef.com/resource_common.html#notifications
[2014-07-31 17:03:29 -0400] n1ko: something like that
[2014-07-31 17:03:45 -0400] jidar: does the notify hit before or after the install happens?
[2014-07-31 17:03:56 -0400] jidar: I assume after right?
[2014-07-31 17:04:12 -0400] jidar: well that's the only way it would make sense, thanks n1ko
[2014-07-31 17:15:34 -0400] jidar: hmm, a package install can't notify?
[2014-07-31 17:15:55 -0400] someara: any resource can notify
[2014-07-31 17:16:03 -0400] someara: it only notifies when it has to take action to repair
[2014-07-31 17:16:12 -0400] jidar: might be a typo
[2014-07-31 17:16:13 -0400] jidar: er
[2014-07-31 17:16:16 -0400] jidar: trying again!
[2014-07-31 17:24:12 -0400] aruntomar: hi, need some help with chef-client -z .  http://pastebin.com/QWeR40e2
[2014-07-31 17:25:10 -0400] n1ko: o such cookbook: skype
[2014-07-31 17:25:13 -0400] n1ko: there you go
[2014-07-31 17:26:09 -0400] aruntomar: n1ko: it doesn't matter what cookbook name is
[2014-07-31 17:26:15 -0400] martinisoft: someara: Thank you again for the help.
[2014-07-31 17:26:30 -0400] meineerde: back
[2014-07-31 17:26:35 -0400] meineerde: back
[2014-07-31 17:26:56 -0400] aruntomar: n1ko: it can be any cookbook, it tries to start a chef-zero server, and then doesn't find the cookbook
[2014-07-31 17:27:33 -0400] aruntomar: if i move the entire code to say /tmp and then run it, then it runs
[2014-07-31 17:27:42 -0400] meineerde: back
[2014-07-31 17:29:35 -0400] n1ko: umm
[2014-07-31 17:29:41 -0400] n1ko: chef-zero is an chef server
[2014-07-31 17:29:46 -0400] n1ko: meaning you need to upload your cookbooks to it
[2014-07-31 17:29:59 -0400] n1ko: via berkshelf, librarian, knife cookbook upload
[2014-07-31 17:30:27 -0400] n1ko: (and environments, and data bags and everything else you need to upload to a chef-server)
[2014-07-31 17:34:16 -0400] jidar: is there no way to get the execute block to only run once? like say, with a notify from the package block that installed it? This is what I'm looking at now: http://pastie.org/9434795
[2014-07-31 17:34:54 -0400] jidar: basically I just don't want the db to get init everytime there is a run, but only if the package is installed
[2014-07-31 17:35:09 -0400] jidar: (rather, only the time the package _is_ installed)
[2014-07-31 17:36:16 -0400] jidar: I assume there is a complicated way to do with this su psql -c <some string of sql> and wrapping that in a not_if/only_if...
[2014-07-31 17:36:52 -0400] inigo88: anyone working with chef-metal?
[2014-07-31 17:37:01 -0400] shlant: inigo88: me
[2014-07-31 17:37:13 -0400] shlant: jidar: your action for the execute block should be :nothing
[2014-07-31 17:37:29 -0400] shlant: then it will only be triggerd by the package install
[2014-07-31 17:37:49 -0400] jidar: ah! fantastic
[2014-07-31 17:38:19 -0400] inigo88: hi shlant ..i have a newbie question.  I'm trying to launch the simple.rb sample recipe and it gives me an ArgumentError
[2014-07-31 17:38:30 -0400] akahn: is there a way to programatically get a list of all the chef environments?
[2014-07-31 17:38:39 -0400] inigo88: shlant: Missing required arguments: aws_secret_access_key
[2014-07-31 17:38:48 -0400] jidar: confirmed and working, thanks shlant
[2014-07-31 17:39:08 -0400] shlant: akahn: like from within a recipe?
[2014-07-31 17:39:09 -0400] inigo88: I set the the config file as instructed AND I even set in the in the environment
[2014-07-31 17:39:13 -0400] shlant: jidar: welcome
[2014-07-31 17:39:25 -0400] akahn: shlant: yeah, or a library
[2014-07-31 17:39:26 -0400] shlant: inigo88: error gist?
[2014-07-31 17:39:41 -0400] shlant: akahn: what is your use case?
[2014-07-31 17:40:14 -0400] aruntomar: n1ko: yes, i understand that, but i run the same thing from a different directory, it doesn't give that error. let me past that output as well. http://pastebin.com/5TZS3cw8
[2014-07-31 17:40:35 -0400] akahn: I'm configuring a pgbouncer instance for a postgres server that is shared by several different staging environments. I want to avoid listing them explicitly so that I don't have to change this file when we add a new environment
[2014-07-31 17:41:05 -0400] shlant: inigo88: please pastebin/gist your error with related metal code
[2014-07-31 17:41:32 -0400] inigo88: ok...working on it
[2014-07-31 17:41:46 -0400] merqlove: Hello guys! As i see, now knife bootstrap has auto-upload of encrypted_data_bag_secret to the server?
[2014-07-31 17:43:46 -0400] vickleford: chefspec/berkshelf wants to fetch an internal cookbook we have on every run, and that takes a bit of time. any way to get that cookbook cached locally?
[2014-07-31 17:44:32 -0400] inigo88: shlant: https://gist.github.com/mr--white/63f1eb0a8799f6a11fed
[2014-07-31 17:45:50 -0400] vickleford: ( i think i may have missed something reading https://github.com/sethvargo/chefspec#faster-specs oops)
[2014-07-31 17:45:53 -0400] shlant: akahn: hmmm. I'm trying to use knife search for envionments but it's not working
[2014-07-31 17:45:55 -0400] shlant: give me a sec
[2014-07-31 17:46:06 -0400] akahn: it looks like Chef::Environment.list.keys gives me what I want
[2014-07-31 17:46:18 -0400] shlant: inigo88: I'm getting a 404 on that link
[2014-07-31 17:46:48 -0400] shlant: akahn: well I learnt something today :)
[2014-07-31 17:47:00 -0400] inigo88: shlant: sorry I had to clean it up... (domain)  https://gist.github.com/mr--white/703d8f9c8848dd418dee
[2014-07-31 17:48:24 -0400] shlant: inigo88: you need to set the access keys in the driver. see https://github.com/opscode/chef-metal/blob/master/docs/configuration.md#credentials-configuration-in-chef
[2014-07-31 17:48:53 -0400] shlant: something like this before the batch:
[2014-07-31 17:48:54 -0400] shlant: with_driver 'fog:AWS', :compute_options => { :aws_access_key_id => '...', :aws_secret_access_key => '...' }
[2014-07-31 17:49:26 -0400] shlant: depending on what you want
[2014-07-31 17:51:11 -0400] inigo88: i see.. so setting the env var FOG_DRIVER to fog:AWS wasn't the only thing needed.
[2014-07-31 17:51:45 -0400] inigo88: I will give it a shot
[2014-07-31 17:52:14 -0400] shlant: inigo88: yea no you need to pass the driver options depending on what's needed
[2014-07-31 17:55:49 -0400] dkinzer: I installed ChefDK locally, but now I can't access my knife solo data_bags. Is there a ChefDK equivalent for knife-solo databags?  Do I have to shim knife in order to use my local databags?
[2014-07-31 17:57:38 -0400] dkinzer: Is this not the place to ask this question?
[2014-07-31 17:58:07 -0400] Runkle: it is, but one must be patient on irc.
[2014-07-31 17:59:18 -0400] dkinzer: Just wondering, in case I'm in the wrong room.
[2014-07-31 18:05:07 -0400] dkinzer: Right now I'm doing this "~/.rbenv/shims/knife solo data bag edit website passwords --secret-file ..."
[2014-07-31 18:14:38 -0400] IMBECIL: Hi.
[2014-07-31 18:14:52 -0400] IMBECIL: Anyone in here?
[2014-07-31 18:14:59 -0400] julian-delphiki: sure IMBECIL
[2014-07-31 18:15:02 -0400] julian-delphiki: what do you ned.
[2014-07-31 18:15:32 -0400] IMBECIL: sorry, I'm trying to learn chef through Chef Training Lab
[2014-07-31 18:16:10 -0400] IMBECIL: but I think there's a bug in the image.
[2014-07-31 18:17:03 -0400] julian-delphiki: IMBECIL whats the bug
[2014-07-31 18:17:16 -0400] IMBECIL: I can't get past the first excercise
[2014-07-31 18:17:46 -0400] IMBECIL: whenever I call "chef-apply" I get this error message
[2014-07-31 18:17:59 -0400] julian-delphiki: pastebin it if its long
[2014-07-31 18:18:00 -0400] julian-delphiki: please.
[2014-07-31 18:18:14 -0400] IMBECIL: FATAL: TypeError: no implicit conversion of nil into String
[2014-07-31 18:18:26 -0400] shlant: dkinzer: you had knife solo installed and then installed DK?
[2014-07-31 18:18:57 -0400] shlant: IMBECIL: please provide the full stacktrace as a gist/pastebin
[2014-07-31 18:19:05 -0400] julian-delphiki: yeah, a full stracktrace would be bestg.
[2014-07-31 18:19:50 -0400] IMBECIL: Sorry, I actually closed the vm, I'll get it in a sec
[2014-07-31 18:19:55 -0400] julian-delphiki: kk
[2014-07-31 18:21:11 -0400] IMBECIL: http://pastebin.com/4FJQBgRL
[2014-07-31 18:24:02 -0400] julian-delphiki: hmm, I'm not sure what might even be, IMBECIL
[2014-07-31 18:24:05 -0400] julian-delphiki: maybe shlant has an idea?
[2014-07-31 18:24:06 -0400] dkinzer: shlant: Yeah.
[2014-07-31 18:24:40 -0400] dkinzer: shlant: I was forced to instalk DK because I upgraded vagrant-berkshelf and the new version requires DK.
[2014-07-31 18:25:36 -0400] IMBECIL: hehe, np. I was just wondering if I was as incompetent to actually mess up the first excercise.
[2014-07-31 18:25:42 -0400] shlant: IMBECIL: yea no idea what that might be. jtimberman?
[2014-07-31 18:25:57 -0400] shlant: http://pastebin.com/4FJQBgRL
[2014-07-31 18:26:15 -0400] shlant: dkinzer: you may have to reinstall knife-solo?
[2014-07-31 18:26:30 -0400] jperry: anyone using berkshelf to generate their environment files?
[2014-07-31 18:26:32 -0400] shlant: chef-dk might have overwritten paths to the gem
[2014-07-31 18:28:11 -0400] dkinzer: you mean, uninstall the gem and it will know where to go the next time I install it?
[2014-07-31 18:29:26 -0400] dkinzer: I'm actually scared to do that right now; but I think I'll give it a try once my deadline is over.  Thanks. shlant ++
[2014-07-31 18:32:51 -0400] IMBECIL: Well thanks. I'll probably just create a local vm.
[2014-07-31 18:35:46 -0400] prometheanfire: mysql_nodes = search('node', "recipes:foo::bar AND chef_environment:#{node.chef_environment}")
[2014-07-31 18:35:49 -0400] prometheanfire: this fails
[2014-07-31 18:36:08 -0400] fujin: gist the debug log
[2014-07-31 18:36:16 -0400] fujin: and serverside logs if you are running your own chefserver instance
[2014-07-31 18:36:18 -0400] fujin: k thx
[2014-07-31 18:37:04 -0400] prometheanfire: ERROR: #<RuntimeError: Error on token ':' at 12 of 'recipes:foo::bar AND chef_environment:_default': Unexpected binary operator>
[2014-07-31 18:37:11 -0400] prometheanfire: it opscode chef
[2014-07-31 18:37:23 -0400] prometheanfire: doesn't seem to like the double ::
[2014-07-31 18:37:32 -0400] josephholsten: yeah, you've got to escape those
[2014-07-31 18:37:45 -0400] prometheanfire: even escaped :(
[2014-07-31 18:37:57 -0400] prometheanfire: well, single escaped
[2014-07-31 18:38:04 -0400] prometheanfire: I might be able to escape the escapes
[2014-07-31 18:38:11 -0400] prometheanfire: if you know what I mean :P
[2014-07-31 18:38:32 -0400] prometheanfire: foo\\:\\:bar
[2014-07-31 18:38:53 -0400] fujin: recipes:foo\\:\\:bar outta do it.
[2014-07-31 18:39:14 -0400] prometheanfire: testing now
[2014-07-31 18:39:26 -0400] prometheanfire: the way I was fixing it before was like this
[2014-07-31 18:39:46 -0400] prometheanfire: mysql_nodes = search('node', 'recipes:foo::bar ' << "AND chef_environment:#{node.chef_environment}")
[2014-07-31 18:39:57 -0400] prometheanfire: but that's tiring
[2014-07-31 18:40:24 -0400] fujin: I reckon we should have a safe-search-query gsub function in the stdlib kind of vibe
[2014-07-31 18:40:30 -0400] fujin: EscapeSearch(mycrazystring)
[2014-07-31 18:40:49 -0400] fujin: It can only do so much though
[2014-07-31 18:41:05 -0400] fujin: something like 'recipes:foo::bar' would be totally hard to pass through an escaping function
[2014-07-31 18:43:25 -0400] prometheanfire: fujin: yep, when we first debugged this a long time ago I think we submitted a but, forget
[2014-07-31 18:43:42 -0400] prometheanfire: just escaping :: automatically would work
[2014-07-31 18:44:18 -0400] fujin: correct, escaping /exactly/ '::' would likely work.
[2014-07-31 18:44:29 -0400] fujin: but ':' is a valid operator
[2014-07-31 18:44:47 -0400] prometheanfire: right
[2014-07-31 18:46:44 -0400] m1shkab3ar: Hey guys how are you today? I was wondering, I have an aws instance that doesnt seem to be in the chef server. is there a knife node show by ip address?
[2014-07-31 18:47:11 -0400] prometheanfire: confirmed \\ works
[2014-07-31 18:48:40 -0400] damien: greetings :)
[2014-07-31 18:48:50 -0400] damien: hey can you use both not_if and only_if? Or does the last one win?
[2014-07-31 18:49:31 -0400] viglesias: damien: i have been told not to use both as the behavior is not well defined
[2014-07-31 18:49:43 -0400] damien: ahh k
[2014-07-31 18:49:44 -0400] shlant: m1shkab3ar: what happens when you run chef on that instace?
[2014-07-31 18:49:48 -0400] damien: viglesias, thanks :))
[2014-07-31 18:50:00 -0400] m1shkab3ar: I can run knife commands on that instance
[2014-07-31 18:50:14 -0400] prometheanfire: m1shkab3ar: knife status shows the ip
[2014-07-31 18:50:16 -0400] m1shkab3ar: So it must be in the chef server
[2014-07-31 18:50:21 -0400] prometheanfire: knife search node can show it too
[2014-07-31 18:52:18 -0400] m1shkab3ar: Yeah it doesnt find the ip
[2014-07-31 18:53:07 -0400] prometheanfire:  knife node edit -a NODENAME
[2014-07-31 18:53:20 -0400] prometheanfire: you can look at all attributes the server has indexed
[2014-07-31 18:53:42 -0400] m1shkab3ar: Yeah but the nodename isnt in the chef server right, so how could it find it
[2014-07-31 18:54:02 -0400] prometheanfire: then the chef server doesn't have it
[2014-07-31 18:54:10 -0400] m1shkab3ar: Yeah it doesnt have it I just checked
[2014-07-31 18:54:20 -0400] m1shkab3ar: knife node search IP
[2014-07-31 18:54:21 -0400] prometheanfire: I guess the answer is no
[2014-07-31 18:54:28 -0400] m1shkab3ar: Searched by IP and didnt find it
[2014-07-31 18:54:40 -0400] m1shkab3ar: Im logged into the node
[2014-07-31 18:54:51 -0400] m1shkab3ar: And want to add it to the chef server
[2014-07-31 18:54:53 -0400] prometheanfire: run chef-client on it
[2014-07-31 18:54:56 -0400] m1shkab3ar: okay
[2014-07-31 18:54:57 -0400] prometheanfire: or bootstrap it
[2014-07-31 18:55:09 -0400] prometheanfire: depending on if it's been initialized already
[2014-07-31 18:55:24 -0400] m1shkab3ar: Thanks prometheanfire !
[2014-07-31 18:55:37 -0400] prometheanfire: :D
[2014-07-31 19:03:26 -0400] raul782: I'm still lost how to trace chef logs and know when it failed
[2014-07-31 19:03:31 -0400] raul782: on opsworks
[2014-07-31 19:03:48 -0400] raul782: some how to troubleshoot this scenarios?
[2014-07-31 19:03:58 -0400] raul782: *someone
[2014-07-31 19:05:11 -0400] kallen: YOU DORK
[2014-07-31 19:05:17 -0400] kallen: um... mischan ::blush::
[2014-07-31 19:05:25 -0400] josephholsten: <3
[2014-07-31 19:05:28 -0400] graemepq: raul782: what are you looking for?
[2014-07-31 19:05:29 -0400] kallen: hahah
[2014-07-31 19:05:50 -0400] raul782: graemepq: opsworks runs setup and configure
[2014-07-31 19:05:53 -0400] raul782: but not deploy
[2014-07-31 19:05:55 -0400] graemepq: yep
[2014-07-31 19:06:10 -0400] raul782: and the log for configure is not available which is weird
[2014-07-31 19:06:24 -0400] raul782: sometimes that could be a symptom that something went wrong
[2014-07-31 19:06:24 -0400] graemepq: in the console?
[2014-07-31 19:06:38 -0400] raul782: yeah I ssh the instance looking for the configure log
[2014-07-31 19:06:47 -0400] graemepq: if you can ssh into the instance, can check /var/lib/aws/opsworks/chef
[2014-07-31 19:07:07 -0400] raul782: yeah
[2014-07-31 19:07:11 -0400] graemepq: nothing there?
[2014-07-31 19:07:13 -0400] geggam: We're sorry, but something went wrong. .... so
[2014-07-31 19:07:15 -0400] raul782: there is a log with 1 byte
[2014-07-31 19:07:22 -0400] geggam: the login UI shows that ... but knife works
[2014-07-31 19:07:24 -0400] raul782: the setup log is ok
[2014-07-31 19:07:27 -0400] geggam: where to startlooking ?
[2014-07-31 19:08:29 -0400] raul782: the json has the 4 builtin recipes that comes from a custom layer
[2014-07-31 19:08:43 -0400] raul782: and when I run it from console using the instance agent it runs
[2014-07-31 19:08:55 -0400] raul782: and generates the log and exits with '
[2014-07-31 19:08:56 -0400] raul782: 0
[2014-07-31 19:08:57 -0400] graemepq: if you run opsworks-agent-cli list_commands, do you see a configure event?
[2014-07-31 19:10:35 -0400] raul782: yeah I c two events
[2014-07-31 19:10:38 -0400] raul782: setup and configure
[2014-07-31 19:10:48 -0400] rbowlby: how best to manage java_opts for tomcat on ubuntu using chef?
[2014-07-31 19:10:59 -0400] raul782: but when I go to the logs folder there is a log for configure gzipped
[2014-07-31 19:11:02 -0400] rbowlby: java cookbook wrapper or something?
[2014-07-31 19:11:54 -0400] graemepq: i don't think i've ever seen a gzipped opsworks log
[2014-07-31 19:12:16 -0400] raul782: yeah that's really weird
[2014-07-31 19:12:50 -0400] graemepq: do you have any custom cookbooks on your layer?
[2014-07-31 19:14:07 -0400] raul782: yeah, there is one custom cookbook, that configures and setup my application, but for the configure phase,  I don't have any custom recipe running only the 4 builtin recipes that comes when using a custom layer
[2014-07-31 19:14:45 -0400] graemepq: can you just launch another instance in the layer or has it happened before as well?
[2014-07-31 19:14:59 -0400] raul782: I've just switch the instance from micro to medium to see if it was because of the memory or something related to cpu power
[2014-07-31 19:15:03 -0400] raul782: the same result
[2014-07-31 19:15:06 -0400] graemepq: could be yeah
[2014-07-31 19:15:14 -0400] graemepq: i've never actually launched a micro into opsworks
[2014-07-31 19:15:51 -0400] jmo: Anyone else getting errors with berkshelf pulling community cookbooks?
[2014-07-31 19:15:56 -0400] raul782: well yeah since I've been testing pretty hard I was using the smalles one, but now that I'm using a medium instance, it happens the same
[2014-07-31 19:16:17 -0400] fujin: jmo: do yuo have a reproducible min-case? there is also the #berkshelf IRC room.
[2014-07-31 19:16:22 -0400] raul782: whereelse could I troubleshoot
[2014-07-31 19:16:23 -0400] fujin: jmo: I can attempt to repro.
[2014-07-31 19:16:24 -0400] jmo: Berkshelf::CommunitySiteError: An unexpected error occurred retrieving 'minitest-handler' (1.3.2) from the cookbook site at '' for example
[2014-07-31 19:16:29 -0400] fujin: spanks, standby
[2014-07-31 19:17:33 -0400] graemepq: good question
[2014-07-31 19:17:56 -0400] graemepq: are you overriding any opsworks attributes in a customize.rb?
[2014-07-31 19:18:06 -0400] jmo: thanks fujin, simply doing a berks update
[2014-07-31 19:18:13 -0400] jmo: gave me this error
[2014-07-31 19:18:26 -0400] fujin: jmo: are you using ChefDK or a manual berks install?
[2014-07-31 19:18:32 -0400] jmo: manual
[2014-07-31 19:18:37 -0400] fujin: cool
[2014-07-31 19:18:50 -0400] jmo: could be on an old ver, using 3.1.3
[2014-07-31 19:19:52 -0400] raul782: yeah I'm overriding the deploy directory wait a sec
[2014-07-31 19:20:41 -0400] raul782: ok I'm overriding the deploy recipe the attributes are deploy_user, deploy_group and deploy_to
[2014-07-31 19:21:18 -0400] graemepq: that shouldn't be the issue - especially if it hasn't triggered that event
[2014-07-31 19:21:20 -0400] graemepq: hmm
[2014-07-31 19:21:35 -0400] vickleford: one of the recipes my cookbook depends on has a package resource with action nothing that calls run_action install on the end of it (http://pastie.org/9434994) and that always installs curl during a chefspec run. short of changing the recipe my cookbook depends on, is there any way to avoid running that resource in my chefspec run?
[2014-07-31 19:21:54 -0400] graemepq: errm.. wait
[2014-07-31 19:22:13 -0400] graemepq: if i recall correctly, the setup event will run deploy
[2014-07-31 19:22:16 -0400] vickleford: (it's adding like 3.5 mins to my chefspec run every time, grr!)
[2014-07-31 19:22:48 -0400] fujin: jmo: https://gist.github.com/53b4c360837939300ad3
[2014-07-31 19:22:51 -0400] graemepq: i had a similar issue the other day where i had configurations necessary for the app running in the configure event but the app was trying to deploy even before they ran
[2014-07-31 19:22:54 -0400] fujin: jmo: that was w/ latest berks. want me to try the version you have?
[2014-07-31 19:23:10 -0400] raul782: I posted this question on aws forum
[2014-07-31 19:23:11 -0400] raul782: https://forums.aws.amazon.com/thread.jspa?threadID=157688&tstart=0
[2014-07-31 19:23:13 -0400] graemepq: though if you're just overriding some paths etc that's not likely it
[2014-07-31 19:23:28 -0400] fujin: jmo: gist your berksfile if you can mate
[2014-07-31 19:23:56 -0400] raul782: although I believe opsworks manage to deploy my application repo because it's there in the end
[2014-07-31 19:24:26 -0400] graemepq: yeah, i don't think an actual deploy event will be visible even though the app deploys during setup
[2014-07-31 19:24:36 -0400] graemepq: can't you jsut run the copy vendors block from a setup event?
[2014-07-31 19:25:22 -0400] raul782: but at what point should I dod that?
[2014-07-31 19:25:26 -0400] jmo: let me try updating first
[2014-07-31 19:25:56 -0400] raul782: that's why I try to use before_symlink which kind of makes sense since I can access the release_path
[2014-07-31 19:26:29 -0400] graemepq: what do you mean by "try to use before_symlink"?
[2014-07-31 19:26:50 -0400] raul782: the deploy resource has a before_symlink
[2014-07-31 19:26:55 -0400] graemepq: oh
[2014-07-31 19:27:03 -0400] jmo: thanks fujin, works now
[2014-07-31 19:27:04 -0400] raul782: and I believe since opsworks_deploy uses it
[2014-07-31 19:27:06 -0400] graemepq: just add a custom recipe to the deploy event
[2014-07-31 19:27:23 -0400] graemepq: rather than try to be sneaky and overriding theirs
[2014-07-31 19:27:24 -0400] jmo: the latest berks looks like it's redirecting to supermarket.getchef.com
[2014-07-31 19:27:43 -0400] jmo: possibly only a bug on 3.1.3
[2014-07-31 19:29:38 -0400] fujin: jmo: yeah you might have to update your Berksfile to point explicitly at supermarket on older versions perhaps
[2014-07-31 19:29:40 -0400] fujin: jmo: glad to hear
[2014-07-31 19:29:55 -0400] raul782: ok sounds a better solution,
[2014-07-31 19:30:12 -0400] jmo: thanks for your help
[2014-07-31 19:30:57 -0400] raul782: so if I include the deploy recipe it will download my repo or I have tod that myself?
[2014-07-31 19:31:31 -0400] graemepq: you have your stack linked to a github repo and revision right?
[2014-07-31 19:31:37 -0400] raul782: yeah
[2014-07-31 19:32:38 -0400] graemepq: so if your cookbook is my-cookbook and your recipe is recipes/deploy.rb just edit your custom layer and add my-cookbook::deploy to the setup and deploy events
[2014-07-31 19:33:37 -0400] graemepq: opsworks pulls down your repo when it launches an instance and it's cached on the instance in /opt/aws/opsworks/current/site-cookbooks
[2014-07-31 19:34:00 -0400] raul782: Ic, so that's an automatic thing
[2014-07-31 19:34:07 -0400] graemepq: yeah
[2014-07-31 19:34:45 -0400] graemepq: in theory, if you wanted to override their deploy recipe completely, you could create a cookbook with the exact same name with a recipe with the exact same name
[2014-07-31 19:34:57 -0400] graemepq: and when it converges, it will overwrite their recipe with yours
[2014-07-31 19:35:02 -0400] graemepq: but you really don't want to do that
[2014-07-31 19:35:14 -0400] raul782: yeah, I believe there is a lot I won't use from their deploy
[2014-07-31 19:35:50 -0400] raul782: I just want to download the dependencies of my application and symlink to current
[2014-07-31 19:36:14 -0400] graemepq: yeah, that's best done in a custom recipe
[2014-07-31 19:36:47 -0400] raul782: so I have to create all the structure by myself then, current and shared folder
[2014-07-31 19:38:09 -0400] raul782: so I've seen there is a release folder, I have to emulate that too?
[2014-07-31 19:38:19 -0400] graemepq: what do you mean by emulate?
[2014-07-31 19:38:25 -0400] raul782: I mean replicate steps
[2014-07-31 19:38:59 -0400] raul782: In order to create a current symlink, I have to create a releases folder and inside that create a timestamp folder
[2014-07-31 19:39:03 -0400] graemepq: their recipes are still going to do their thing
[2014-07-31 19:39:18 -0400] raul782: aha
[2014-07-31 19:39:29 -0400] graemepq: you just have to do any additional bits that they don't
[2014-07-31 19:39:46 -0400] raul782: how do I access to the release path?
[2014-07-31 19:40:28 -0400] raul782: I believe that's the only variable I'm missing in order to do it by myself
[2014-07-31 19:41:36 -0400] MS-DOSRefund: anyone here using the Chef-DK?
[2014-07-31 19:41:37 -0400] graemepq: is it not just #{deploy['deploy_to']}/current?
[2014-07-31 19:42:39 -0400] raul782: before the symlink it's a timestamp folder
[2014-07-31 19:42:54 -0400] raul782: because I don't want to keep downloading the dependencies each time
[2014-07-31 19:42:56 -0400] graemepq: they're still going to create the symlink though
[2014-07-31 19:43:09 -0400] raul782: for my application that's why I have that ruby block
[2014-07-31 19:43:21 -0400] raul782: to copy from the previous to the new deployment
[2014-07-31 19:43:42 -0400] graemepq: hmm
[2014-07-31 19:44:11 -0400] graemepq: wouldn't it be easier to just have the vendors folder sitting somewhere and symlink to it rather than copying each time?
[2014-07-31 19:44:28 -0400] MS-DOSRefund: Chef-DK looks pretty slick as a nice package of things that are of all awesomeness.
[2014-07-31 19:45:03 -0400] rbowlby: anyone know of a tomcat cookbook that's compatible with 7 and 8?
[2014-07-31 19:45:24 -0400] someara: not yet
[2014-07-31 19:45:31 -0400] rbowlby: anything for just 7?
[2014-07-31 19:45:36 -0400] BlackberryRefund: rbowlby: I do not, just tomcat 7
[2014-07-31 19:45:46 -0400] rbowlby: hook me up
[2014-07-31 19:45:52 -0400] someara: the quickest path to happy right now would be to roll your own
[2014-07-31 19:45:55 -0400] rbowlby: also, love the name
[2014-07-31 19:46:10 -0400] rbowlby: I have, it doesn't make me happy though
[2014-07-31 19:46:14 -0400] rbowlby: it makes me sad
[2014-07-31 19:46:15 -0400] rbowlby: :(
[2014-07-31 19:46:21 -0400] someara: =(
[2014-07-31 19:46:29 -0400] QNXRefund: https://github.com/bryanwb/chef-tomcat
[2014-07-31 19:46:31 -0400] Eulipion: rbowlby: i got one for u
[2014-07-31 19:46:46 -0400] rbowlby: I was about to templatize /etc/defaults/tomcat7 and I was like wait a damn minute here...this sucks
[2014-07-31 19:46:51 -0400] OSXRefund: I believe that's just TC7
[2014-07-31 19:48:29 -0400] raul782: graemepq:thanks I will try that, I'm still unsure how to update the vendors if they're sitting in the shared folder
[2014-07-31 19:48:35 -0400] graemepq: raul782: something like this should replicate what i do with capistrano deployments
[2014-07-31 19:48:38 -0400] graemepq: link "#{node['deploy']['deploy_to']}/current/vendors" do
[2014-07-31 19:48:38 -0400] graemepq: to '/var/lib/vendors'
[2014-07-31 19:48:39 -0400] graemepq: end
[2014-07-31 19:48:53 -0400] graemepq: assuming /var/lib/vendors is where they lay
[2014-07-31 19:48:58 -0400] eliklein: hola.. getting this error when running chef-client.. [2014-07-31T13:46:34-06:00] ERROR: 413 "Request Entity Too Large" - I've tried adding the Ohai::Config[:disabled_plugins] = ["passwd"] to client.rb but it didn't help.  Any ideas?
[2014-07-31 19:49:18 -0400] graemepq: is it a php app i'm assuming?
[2014-07-31 19:49:26 -0400] raul782: yeah
[2014-07-31 19:49:50 -0400] graemepq: in theory, if vendors ends up in the same path as composer would normally expect it (even as a symlink) it should still be able to update it
[2014-07-31 19:49:55 -0400] graemepq: though i've not actually tried that
[2014-07-31 19:50:26 -0400] raul782: Ic, I've been using capifony for some time
[2014-07-31 19:50:36 -0400] raul782: I'll check how do they do that, you might be right
[2014-07-31 19:50:50 -0400] graemepq: so if you had /srv/www/my_app/current with ./vendors hanging off of that linked elsewhere
[2014-07-31 19:51:04 -0400] graemepq: if you ran a composer install/update from my_app/current it should work
[2014-07-31 19:59:37 -0400] rbowlby: this bryanwb github dude needs to merge some PRs like a boss
[2014-07-31 20:00:28 -0400] cheeseplus: ha, he's a very busy man
[2014-07-31 20:00:32 -0400] nulleric: i dont think there's any really "good" tomcat recipe out there, though it's hard with all the system packages, etc
[2014-07-31 20:01:01 -0400] nulleric: i was thinking about just doing a tomcat_ark, OS independent, just do catalina_home and catalina_base and make it really simple/interchangeable
[2014-07-31 20:10:14 -0400] fujin: ;x
[2014-07-31 20:10:19 -0400] jtimberman: in my experience, "simple" and "tomcat" are orthgonal.
[2014-07-31 20:13:26 -0400] fujin: / DynamicRoutingServer is our dynamicproxy type. In addition to a Server, it
[2014-07-31 20:13:27 -0400] fujin: / contains references to functions which the client will pass to it to
[2014-07-31 20:13:32 -0400] fujin: ew
[2014-07-31 20:13:39 -0400] fujin: wrong paste buffer!
[2014-07-31 20:13:41 -0400] fujin: </3
[2014-07-31 20:13:51 -0400] fujin: someone remind me to turn on paste mode filtering in Circe k thx
[2014-07-31 20:14:17 -0400] jtimberman: fujin: turn on paste mode filtering in Circe
[2014-07-31 20:21:09 -0400] nulleric: @jtimberman agree :) thats why mostly i just build tomcat + war into 1 jar and just startup java -jar myapi.jar :)
[2014-07-31 20:26:48 -0400] Trappar: I want to use the sudo community cookbook. It says I should set some attributes to control which users get sudo access. I have dev and prod environments. Where would the best place be to store attributes for that cookbook? In each environment? In roles? In the attributes for an "application cookbook"?
[2014-07-31 20:28:25 -0400] fujin: start with Environments if that is the lowest common denominator, go to role based privileges if you need 'em.'
[2014-07-31 20:29:04 -0400] fujin: I've seen a method where sudo is controlled granularily w/ remote_directory files defining the groups/cmds/jobs/aliases, too
[2014-07-31 20:29:19 -0400] fujin: (+/- templates into the same dir)
[2014-07-31 20:29:58 -0400] rbowlby: can someone explain why berks installs some socrata tomcat book when I use "depends tomcat" in my metadata
[2014-07-31 20:30:20 -0400] Trappar: Thanks fujin
[2014-07-31 20:30:20 -0400] rbowlby: berks info tomcat shows the opscode version
[2014-07-31 20:30:26 -0400] rbowlby: I'm perplexed
[2014-07-31 20:32:03 -0400] spheromak: rbowlby: berks cook cache ?
[2014-07-31 20:32:12 -0400] spheromak: shot in the dark
[2014-07-31 20:38:20 -0400] rbowlby: removing the socrata tomcat book from the berks dir fixed it
[2014-07-31 20:38:46 -0400] rbowlby: next berks install correctly identified opscode as the archaic tomcat book I sorta wanted
[2014-07-31 20:41:10 -0400] Trappar: Is there an easy way to see what node attributes are set when using chef solo?
[2014-07-31 20:42:11 -0400] filler: those using chefdk 0.2.0, does knife environment show -Fjson $env not pretty print?
[2014-07-31 20:43:04 -0400] Trappar: filler: not sure if it's possible to have it pretty print but I ran that yesterday and it did not.
[2014-07-31 20:44:28 -0400] filler: looks like 0.1.0 _did_ pretty print.
[2014-07-31 20:44:32 -0400] newbie259: where would I go to ask a chef-metal-fog question?
[2014-07-31 20:47:32 -0400] Trappar: I'm using berkshelf and include_recipe to include the sudo::default recipe. That cookbook has a bunch of attributes defined, but those attributes don't seem to be getting set on my node. Where am I going wrong here? Do I have to define all of the attributes that cookbook defines?
[2014-07-31 20:48:22 -0400] fujin: Trappar: only some classes?levels? of attributes are persisted to the Node storage
[2014-07-31 20:48:46 -0400] fujin: I always forget, but it's something like, overrides and defaults won't store on the node itself
[2014-07-31 20:48:59 -0400] fujin: 'set' attributes (normal?) will be
[2014-07-31 20:49:28 -0400] Trappar: fujin: So how do I get the attributes from that cookbook set?
[2014-07-31 20:49:34 -0400] fujin: Trappar: http://docs.getchef.com/chef_overview_attributes.html
[2014-07-31 20:49:49 -0400] fujin: Trappar: I don't understand the question. Those attributes are likely being set, for the duration of the run, if they're "defaults"
[2014-07-31 20:50:00 -0400] fujin: Trappar: can you link me to explicitly which attributes you're referring to?
[2014-07-31 20:50:30 -0400] Trappar: https://github.com/opscode-cookbooks/sudo#attributes
[2014-07-31 20:50:48 -0400] fujin: https://github.com/opscode-cookbooks/sudo/blob/master/attributes/default.rb#L20-L35
[2014-07-31 20:51:02 -0400] spheromak: fujin: Trappar default and override are not stored (only normal/set)
[2014-07-31 20:51:06 -0400] fujin: yeh
[2014-07-31 20:51:08 -0400] fujin: thought so
[2014-07-31 20:51:32 -0400] Trappar: Somewhere in learning about this stuff I have missed something. I'm not really understanding what you guys are saying.
[2014-07-31 20:51:48 -0400] fujin: Trappar: you don't need to store extra layers of defaults, or overrides, on the Node object, they can apply through envs/roles/cookbooks (without persisting on to the Node)
[2014-07-31 20:51:50 -0400] spheromak: Trappar: those attributes should be loaded from the include cookbook when the compile phase happens. unless you are doing something in another cook/recipe to wipe them out
[2014-07-31 20:51:51 -0400] cwebber: Curry Bot Issues Postmortem: http://youtu.be/igiCmIOB1p8
[2014-07-31 20:52:26 -0400] spheromak: Trappar: what makes you belive they are not being honored ?
[2014-07-31 20:52:28 -0400] Trappar: spheromak: They are not, so I must not be doing something right
[2014-07-31 20:53:10 -0400] Trappar: spheromak: the chef-client run is erroring because some attributes aren't being set (those I haven't defined in the environment)
[2014-07-31 20:53:30 -0400] fujin: show your environment where you override. you are probably clobbering the whole hash unecessarily
[2014-07-31 20:53:33 -0400] Trappar: spheromak: I also tried printing the node['authorization'] and it only included the stuff I set in my environment
[2014-07-31 20:53:46 -0400] fujin: now *that* is weird
[2014-07-31 20:53:51 -0400] Trappar: fujin: I probably am
[2014-07-31 20:53:55 -0400] spheromak: ]futhats what i was expecting
[2014-07-31 20:54:00 -0400] spheromak: *bleh
[2014-07-31 20:54:03 -0400] fujin: Trappar: I'm going to assume you have metadata depends for sudo?
[2014-07-31 20:54:21 -0400] fujin: or it's in a role?
[2014-07-31 20:54:26 -0400] Trappar: fujin: Uhm.. I don't think so
[2014-07-31 20:54:27 -0400] spheromak: fujin: the run would error if he didn't and he had an include_recipe
[2014-07-31 20:54:36 -0400] fujin: spheromak: not if it is in a role
[2014-07-31 20:54:39 -0400] spheromak: ok well then that would be puking
[2014-07-31 20:54:42 -0400] fujin: spheromak: same functionality w/o depends
[2014-07-31 20:54:45 -0400] spheromak: oh right its in a role :P
[2014-07-31 20:54:51 -0400] fujin: it *may* be in a role
[2014-07-31 20:54:53 -0400] spheromak: i missed that..
[2014-07-31 20:54:58 -0400] spheromak: yea sure
[2014-07-31 20:55:00 -0400] fujin: I do not believe it has been determined
[2014-07-31 20:55:05 -0400] fujin: Trappar: ^?
[2014-07-31 20:55:08 -0400] Trappar: I only have the 'cookbook "sudo"' in my berkshelf file
[2014-07-31 20:55:13 -0400] spheromak:  but if its in the role run list it would still be getting compiled.
[2014-07-31 20:55:20 -0400] fujin: correct
[2014-07-31 20:55:27 -0400] Trappar: No depend in my metadata
[2014-07-31 20:55:32 -0400] Trappar: Do I need both?
[2014-07-31 20:55:39 -0400] fujin: Trappar: so you have an environment with an authorization default/override, and how are you running hte sudo cookbook?
[2014-07-31 20:55:43 -0400] spheromak:  Trappar what are you trying to do ? high level
[2014-07-31 20:55:45 -0400] fujin: directly with node run_list? role?
[2014-07-31 20:56:02 -0400] Trappar: Sorry having trouble following everything you guys are saying, trying to keep up
[2014-07-31 20:56:10 -0400] Trappar: I'm running my cookbook's default
[2014-07-31 20:56:13 -0400] spheromak: ill step away :P
[2014-07-31 20:56:28 -0400] Trappar: Which has "include_recipe 'sudo::default'" in it
[2014-07-31 20:56:50 -0400] Trappar: I'm trying to set users which should be able to sudo
[2014-07-31 20:57:56 -0400] geggam: so... if a hostname changes and chef-server-ctl succeeds on test but the webui fails... wtf am i missing ?
[2014-07-31 20:58:59 -0400] spheromak: geggam: did you run chef-server-ctl reconfigure after the name change ?
[2014-07-31 20:59:02 -0400] Trappar: fujin: here's my environment http://i.imgur.com/0vWz7xq.png
[2014-07-31 20:59:11 -0400] geggam: yes spheromak
[2014-07-31 20:59:21 -0400] geggam: the webui is throwing a 500
[2014-07-31 20:59:28 -0400] spheromak: geggam: what does the log say
[2014-07-31 21:01:05 -0400] geggam:  [31/Jul/2014:20:56:50 +0000]  "POST /users/login_exec HTTP/1.1" 500 "0 spheromak
[2014-07-31 21:01:28 -0400] geggam: something isnt tied together right... im missing something in server.rb
[2014-07-31 21:01:35 -0400] geggam: api works great :)
[2014-07-31 21:04:50 -0400] geggam: We're sorry, but something went wrong. is really descriptive... is there a debug to get turned on taht shows up for the web ?
[2014-07-31 21:04:57 -0400] fujin: Trappar: did you say you're trying to include_recipe 'sudo' from another cookbook? without a metadata dependency?
[2014-07-31 21:05:04 -0400] fujin: Trappar: and your run list is only this 'other' cookbook?
[2014-07-31 21:05:27 -0400] Trappar: fujin: yeah, I tried adding the depend in my metadata and that looks like it fixed it
[2014-07-31 21:05:41 -0400] fujin: Trappar: Most excellent. That would have been my next suggestion. Indeed, that is required.
[2014-07-31 21:05:45 -0400] nulleric: @btm is there a "office hours" schedule posted somewhere? i usually miss it :)
[2014-07-31 21:06:33 -0400] Trappar: fujin: Thanks for the help :)
[2014-07-31 21:06:35 -0400] fujin: pleasure
[2014-07-31 21:06:38 -0400] fujin: good luck!
[2014-07-31 21:22:28 -0400] newbie259: anyone know if jons gonna be back on today?
[2014-07-31 21:22:41 -0400] newbie259: hes in the eastern time zone right?
[2014-07-31 21:31:01 -0400] newbie259: can anyone here answer questions about metal or fog besides jon?
[2014-07-31 21:31:08 -0400] jbarnett: i can try
[2014-07-31 21:31:29 -0400] jbarnett: newbie259: I can try
[2014-07-31 21:31:47 -0400] newbie259: Im lookig for a list of valid bootstrap options. its not in the docs anywhere and the syntax doesnt match an aws ec2 describe call
[2014-07-31 21:32:02 -0400] newbie259: I need to set the size of the root volume
[2014-07-31 21:32:13 -0400] newbie259: but tid be nice to have the full list
[2014-07-31 21:32:22 -0400] jbarnett: Have you heard of CoreOS?
[2014-07-31 21:32:32 -0400] newbie259: no
[2014-07-31 21:32:36 -0400] jbarnett: check it out
[2014-07-31 21:33:02 -0400] jbarnett: it's an OS and also has a boot stuff where you can boot CoreOS and then install anything OR install CoreOS
[2014-07-31 21:33:23 -0400] jbarnett: They just release a stable version of their product about a week ago
[2014-07-31 21:33:26 -0400] jbarnett: It's pretty legit.
[2014-07-31 21:33:28 -0400] fujin: what does that have to do with metal or fog? kind of.. completely unrelated
[2014-07-31 21:33:34 -0400] newbie259: that looks slick
[2014-07-31 21:33:43 -0400] newbie259: ya a little off topic
[2014-07-31 21:33:44 -0400] fujin: (it is slick, but maybe confusing!?)
[2014-07-31 21:33:46 -0400] newbie259: but still cool
[2014-07-31 21:33:48 -0400] fujin: :-p
[2014-07-31 21:34:02 -0400] jbarnett: I am saying you could use CoreOS to bootstrap...
[2014-07-31 21:34:21 -0400] fujin: use coreos to bootstrap aws machines?
[2014-07-31 21:34:25 -0400] fujin: that just doesn't make sense.
[2014-07-31 21:34:26 -0400] jbarnett: no
[2014-07-31 21:34:26 -0400] jbarnett: haha
[2014-07-31 21:34:52 -0400] fujin: newbie259: can you give an example of what you're trying, I can dig into code
[2014-07-31 21:34:53 -0400] jbarnett: I missed the ec2 piece :)
[2014-07-31 21:34:53 -0400] jbarnett: haha
[2014-07-31 21:35:00 -0400] fujin: newbie259: \"valid bootstrap options\"
[2014-07-31 21:35:06 -0400] merqlove: CoreOS is stable now?)
[2014-07-31 21:35:09 -0400] newbie259: sure. let me dump the instance
[2014-07-31 21:35:12 -0400] jbarnett: merqlove: yes
[2014-07-31 21:35:24 -0400] jbarnett: merqlove: heard the CEO speak in SF this Monday
[2014-07-31 21:35:39 -0400] merqlove: hmm, interesting
[2014-07-31 21:35:41 -0400] jbarnett: merqlove: GCE has the stable image.
[2014-07-31 21:35:49 -0400] merqlove: his site looks great :)
[2014-07-31 21:36:40 -0400] merqlove: i'm also heard from collegues about nixos
[2014-07-31 21:36:44 -0400] newbie259: machine 'monitoringhost' do
[2014-07-31 21:36:45 -0400] newbie259:   provisioner_options 'bootstrap_options' => {
[2014-07-31 21:36:46 -0400] newbie259:     'image_id' => 'ami-09e27439', # ubuntu 12.04
[2014-07-31 21:36:48 -0400] newbie259:     'flavor_id' => 'c3.large',
[2014-07-31 21:36:49 -0400] newbie259:     'availability_zone' => 'us-west-2c',
[2014-07-31 21:36:51 -0400] newbie259:     'key_name' => 'asdf',
[2014-07-31 21:36:52 -0400] newbie259:     'groups' => ['classic_monitor']
[2014-07-31 21:36:54 -0400] newbie259:   }
[2014-07-31 21:36:55 -0400] newbie259:   recipe 'asdf-servers-base'
[2014-07-31 21:36:57 -0400] newbie259:   recipe 'asdf-servers::monitoring-host'
[2014-07-31 21:36:58 -0400] newbie259:   tag "asdf_or_graphite2"
[2014-07-31 21:36:58 -0400] newbie259: end
[2014-07-31 21:37:05 -0400] fujin: haha
[2014-07-31 21:37:09 -0400] fujin: in the future, use a pastebin or gist
[2014-07-31 21:37:22 -0400] fujin: sec
[2014-07-31 21:37:24 -0400] newbie259: i normally do but its only 12 lines
[2014-07-31 21:37:33 -0400] martinisoft: Tweeted out the gist of my successful resource for updating EOL Ubuntu apt mirrors: https://gist.github.com/martinisoft/baf030f286d9616cc928
[2014-07-31 21:37:34 -0400] jbarnett: newbie259: Random question, have yo seen https://github.com/opscode/chef-metal/blob/aa34bbacd0e671ecbd0d85879dda75ce05deadf5/docs/configuration.md
[2014-07-31 21:37:52 -0400] ismell: hrmm, is there some kind of password length limit on getchef.com?
[2014-07-31 21:38:03 -0400] ismell: I reset my password, but then I can't log in with it
[2014-07-31 21:38:11 -0400] newbie259: seen it? I live there
[2014-07-31 21:38:46 -0400] newbie259: ya ive been all through jons docs. on base metal and on the fog page. nothing there for what i need though
[2014-07-31 21:39:35 -0400] newbie259: I normally just talk to him directly. but its like 1730 where he lives. hes prolly feeding his kids and having a beer right now
[2014-07-31 21:40:04 -0400] chef923: I am trying to bootstrap a linux node, i am keep getting a public key in the validator.pem file
[2014-07-31 21:40:32 -0400] newbie259: reset your validator key. you only get to see the private key once
[2014-07-31 21:40:40 -0400] merqlove: OSX has some IRC clients that can show code inline from gist (like github)? For example i'm now via Lingo client, which can show only messages & inline images.
[2014-07-31 21:40:49 -0400] chef923: i tried copying a public key from another node and tried a bootstrap, it failed again, after the failure i checked the validator.pem it is public key
[2014-07-31 21:41:25 -0400] chef923: can someone help me to resolve thi issue
[2014-07-31 21:41:33 -0400] newbie259: ya just reset it
[2014-07-31 21:41:44 -0400] newbie259: @chef923 just reset it
[2014-07-31 21:41:55 -0400] jbarnett: newbie259: No idea if this would help, but I am assuming you have seen this: https://github.com/opscode/ec-metal
[2014-07-31 21:41:56 -0400] newbie259: shit. used to hip chat
[2014-07-31 21:42:17 -0400] cheeseplus: irccloud nicely catches when you past a lot of text and offers to pastbin it for you
[2014-07-31 21:42:50 -0400] evvel2: chef923: The validator.pem is a secret key, if you dont have any more copies arround that are valid on other nodes then you will need to re-generate it
[2014-07-31 21:44:21 -0400] newbie259: oooh
[2014-07-31 21:44:43 -0400] newbie259: jbarnett: I havent seen this. it looks like it has the option i need too. let me test with it
[2014-07-31 21:44:44 -0400] merqlove: @cheeseplus thanks
[2014-07-31 21:44:56 -0400] newbie259: itd still be nice to have a full list of options documented somewhere
[2014-07-31 21:45:44 -0400] fujin: i just dug through mass levels of chef-metal-fog-aws / chef-metal-fog / fog / chef-metal, and couldn't find an exhaustive list of options
[2014-07-31 21:45:48 -0400] fujin: there are some mention of default options
[2014-07-31 21:45:49 -0400] shlant: newbie259: I am trying to help John get the docs more up to date
[2014-07-31 21:45:52 -0400] shlant: you want machine_options :bootstrap_options => { :block_device_mapping   => [ {:DeviceName => '/dev/sda1', 'Ebs.VolumeSize' => node[ebs']['size']} ] }
[2014-07-31 21:45:57 -0400] fujin: but it kinda looks like they are just passed willy nilly through with it
[2014-07-31 21:46:28 -0400] shlant: newbie259: /dev/sda1 is the default root on ec2
[2014-07-31 21:47:20 -0400] newbie259: YAY
[2014-07-31 21:47:25 -0400] newbie259: ya thats exactly what I need
[2014-07-31 21:47:57 -0400] newbie259: is there some place where I can get a full list of the bootstrap options for now?
[2014-07-31 21:48:12 -0400] merqlove: official not full?
[2014-07-31 21:48:20 -0400] newbie259: ive been using aws ec2 describe commands and using trial and error
[2014-07-31 21:48:25 -0400] newbie259: whatever I can get
[2014-07-31 21:48:36 -0400] newbie259: anything is better than what I have right now, which is nothing
[2014-07-31 21:48:37 -0400] shlant: newbie259: I just copy pasted these from the fog driver: https://github.com/opscode/chef-metal/blob/master/docs/providers/aws.md
[2014-07-31 21:49:30 -0400] newbie259: sweet. Not sure how ive been missing this
[2014-07-31 21:49:37 -0400] shlant: I will try and do a big doc PR this weekend with all the knowledge John has bestowed on me :)
[2014-07-31 21:49:40 -0400] newbie259: Thanks Shlant! this really helps me out
[2014-07-31 21:49:47 -0400] shlant: newbie259: np.
[2014-07-31 21:49:55 -0400] newbie259: you da man
[2014-07-31 21:51:14 -0400] shlant: newbie259: I will try and make the bootstrap_options link more obvious. Currently it's the Providers link un Documentation
[2014-07-31 21:51:17 -0400] shlant: under *
[2014-07-31 21:52:09 -0400] newbie259: are you guys gonna move all the docs to the github wiki?
[2014-07-31 21:53:43 -0400] jtimberman: newbie259: we'll probably have chef-metal documented at docs.getchef.com
[2014-07-31 21:53:55 -0400] jtimberman: that's where we document everything else :)
[2014-07-31 21:53:55 -0400] newbie259: makes sense
[2014-07-31 21:54:04 -0400] jtimberman: but it's still "pre1.0" release status
[2014-07-31 21:54:24 -0400] newbie259: ya I know. Ive been using it in production since it was a twinkle in jons eye
[2014-07-31 21:54:31 -0400] newbie259: Im a believer
[2014-07-31 21:54:58 -0400] merqlove: Guys another bootstrap question. Current version of Knife Bootstrap has encrypted_data_bag_secret upload to the server??? I have some recipes for this feature., if yes it can be redundant.
[2014-07-31 21:55:26 -0400] jtimberman: right on :)
[2014-07-31 21:55:53 -0400] merqlove: yeah :)
[2014-07-31 21:58:47 -0400] shlant: newbie259: with ya there!
[2014-07-31 21:59:10 -0400] shlant: yea the getchef docs are useless
[2014-07-31 21:59:12 -0400] shlant: really old
[2014-07-31 22:02:06 -0400] newbie259: sweet. just reran with those new options. worked like a charm
[2014-07-31 22:02:08 -0400] newbie259: thanks again
[2014-07-31 22:12:15 -0400] merqlove: Seems Chef able much more & more, than in docs :)
[2014-07-31 22:12:41 -0400] newbie259: jbarnett. you ever used coreos for anything?
[2014-07-31 22:15:20 -0400] jbarnett: newbie259: I have not used it yet. I will probably start using it as an OS to host a ton of things using docker
[2014-07-31 22:15:50 -0400] newbie259: ya the more I read, the more im digging it. I might have to give this a spin
[2014-07-31 22:16:18 -0400] jbarnett: newbie259: it's legit. Just imagine your Chrome browser that updates automatically without EVER notifying you. It just does it.
[2014-07-31 22:16:24 -0400] jbarnett: it's exactly like that with updates
[2014-07-31 22:16:35 -0400] jbarnett: so the Kernel is always up to date, along with it's core systems
[2014-07-31 22:17:05 -0400] newbie259: really solid ideas. fleet looks amazing too
[2014-07-31 22:17:19 -0400] jbarnett: yep :)
[2014-07-31 22:17:26 -0400] merqlove: looks great :)
[2014-07-31 22:19:35 -0400] merqlove: as I understand, better to use CoreOS on a big server?
[2014-07-31 22:20:28 -0400] fujin: I love the idea of homogenous container infrastructure
[2014-07-31 22:21:10 -0400] fujin: I would probably spec different grades of container-host, maybe for different workloads
[2014-07-31 22:22:13 -0400] merqlove: it can save a lot of time)
[2014-07-31 22:34:58 -0400] pcn: is anyone using the openstack cookbooks?
[2014-07-31 22:36:12 -0400] pcn: From a fresh checkout, using spiceweasel doesn't work with chefdk, and the berks command bombs out under chefdk with solver issues.
[2014-07-31 22:37:12 -0400] mattray: pcn: check the #openstack-chef channel. Specifically j^2
[2014-07-31 22:37:23 -0400] mattray: he'll help you out, tell 'em I sent you
[2014-07-31 22:37:47 -0400] pcn: Thanks
[2014-07-31 22:45:16 -0400] codepoet_: Is there a package for chef server for Ubuntu 14  ?  I can't seem to locate one anywhere
[2014-07-31 22:47:09 -0400] jmickle: codepoet_ the main package for 12.04 works fine on 14
[2014-07-31 22:47:31 -0400] codepoet_: Oh nice -- thanks very much!
[2014-07-31 22:51:28 -0400] newbie259: so heres my question: where does chef fit in with coreos and the homogenous container infrastructure?
[2014-07-31 22:54:45 -0400] mattray: newbie259: Chef would manage the configuration of the containers, manage fleet configuration for CoreOS
[2014-07-31 22:56:02 -0400] fujin: *could*
[2014-07-31 22:56:50 -0400] newbie259: and metal could provide each of the coreos machines for the cluster and properly configure security groups. i guess it would still have a place
[2014-07-31 22:57:14 -0400] newbie259: the more i read about this kind of infrastructure, the more it sounds like a silver bullet
[2014-07-31 22:57:17 -0400] fujin: you are probably going to pxe boot CoreOS in RAM in any real deployment (imo)
[2014-07-31 22:57:24 -0400] fujin: knock em over to bring up latest version
[2014-07-31 22:57:28 -0400] newbie259: if youre bare metal
[2014-07-31 22:57:40 -0400] newbie259: not if youre using a cloud provider
[2014-07-31 22:57:52 -0400] fujin: running coreos on top of a cloud provider?
[2014-07-31 22:57:57 -0400] jbarnett: fujin: the CEO said this was the preferred method
[2014-07-31 22:57:58 -0400] fujin: that is not an option i would evaluate
[2014-07-31 22:58:01 -0400] newbie259: its built into aws now
[2014-07-31 22:58:08 -0400] newbie259: why not?
[2014-07-31 22:58:11 -0400] mattray: fujin: lots of clouds have it now
[2014-07-31 22:58:21 -0400] jbarnett: fujin: PXE using CoreOS and then from there you could install CoreOS or any other OS for that matter...
[2014-07-31 22:58:33 -0400] fujin: I'm sure it's perfectly suitable for a test candidate
[2014-07-31 22:58:41 -0400] fujin: Maybe prove out workflow or similar.
[2014-07-31 22:59:24 -0400] mattray: yeah, I talked with CoreOS about building out an integration, just hasn't gotten a high priority
[2014-07-31 22:59:31 -0400] newbie259: what makes you hesistant to use it for a production deploy?
[2014-07-31 22:59:56 -0400] fujin: I am not hesitant to use it for a production deploy. I'm hesitant to pretend that AWS instances are =~ metal
[2014-07-31 23:00:05 -0400] fujin: Which would be where I would run CoreOS.
[2014-07-31 23:00:38 -0400] jmickle: hehehe
[2014-07-31 23:00:55 -0400] jmickle: theoretically aws instances run on metal ;-)
[2014-07-31 23:01:31 -0400] newbie259: performance loss on the coreos cluster? that would be the case with any cloud based infrastructure
[2014-07-31 23:02:37 -0400] newbie259: I wish I knew somebody who was using this currently
[2014-07-31 23:04:54 -0400] merqlove: sadly at DO no CoreOs
[2014-07-31 23:05:26 -0400] newbie259: weak. I wonder if a request has been made for it yet
[2014-07-31 23:06:14 -0400] newbie259: https://digitalocean.uservoice.com/forums/136585-digitalocean/suggestions/4250154-suport-coreos-as-a-deployment-platform
[2014-07-31 23:06:40 -0400] newbie259: marked as planned 15 days ago
[2014-07-31 23:07:19 -0400] fujin: yeah I mean cool
[2014-07-31 23:07:26 -0400] fujin: big whoop the providers are still supporting it
[2014-07-31 23:07:28 -0400] fujin: derpas are gonna derp
[2014-07-31 23:07:31 -0400] fujin: and run coreos on clouds
[2014-07-31 23:07:34 -0400] merqlove: excellent!
[2014-07-31 23:08:07 -0400] fujin: it definitely is probably going to be better than spinning up ubuntu/fc/.. whatever for the sole purpose of running a container fleet, if that is how you are going to roll
[2014-07-31 23:08:18 -0400] fujin: and you are going to be able to box more into your kit @ aws
[2014-07-31 23:08:19 -0400] newbie259: both places I work at, I dont have access to baremetal. CoreOS solves a lot of other problems that make it worth installing on a cloud based solution
[2014-07-31 23:08:31 -0400] fujin: yeah, you can have all of that stuff without coreos.
[2014-07-31 23:08:37 -0400] fujin: so I challenge  the accuracy of \"solves a lot of other problems\"
[2014-07-31 23:08:57 -0400] newbie259: HA and DR. you get that for free basically
[2014-07-31 23:09:12 -0400] newbie259: I have a lot of shit in my systems now just under those two headings
[2014-07-31 23:09:32 -0400] merqlove: Also just tested CentOS 7
[2014-07-31 23:09:38 -0400] fujin: \"If you're currently running in the cloud, running a single CoreOS cluster on two different clouds or cloud + bare metal is supported and encouraged.'\"
[2014-07-31 23:09:54 -0400] merqlove: seems here still some problems with some cookbooks
[2014-07-31 23:09:57 -0400] merqlove: like mysql
[2014-07-31 23:09:59 -0400] newbie259: the problems are still solved today by other means. this is just a much more efficient means
[2014-07-31 23:10:41 -0400] fujin: like I said. if you are already on a cloud, and you are moving to 100% docker, then it totally makes sense
[2014-07-31 23:11:00 -0400] fujin: fleet is great but isn't going to give you efficient packing of workloads to container hosts classes (yet? afaict)
[2014-07-31 23:11:16 -0400] fujin: and you are not going to have a completely uniform workload (most likely)
[2014-07-31 23:11:33 -0400] fujin: you are already wasting money at aws.. without doing efficient packing of systems onto reserved instances
[2014-07-31 23:11:35 -0400] fujin: you are just flushing more
[2014-07-31 23:11:55 -0400] newbie259: that maybe true. have to test it out to tell
[2014-07-31 23:12:07 -0400] fujin: like, you should be using 1-3y terms with 60-80% utilization
[2014-07-31 23:12:11 -0400] fujin: for dat cost savings
[2014-07-31 23:12:23 -0400] newbie259: you are already wasting money at aws.. without doing efficient packing of systems onto reserved instances: Thats the truth
[2014-07-31 23:13:34 -0400] newbie259: aws and gce are the worst for prices
[2014-07-31 23:14:01 -0400] jmickle: realistically, you should be abstracting your app dependencies away from infrastructure
[2014-07-31 23:14:11 -0400] jmickle: so if you are at that level chances are you are probably doing it wrong
[2014-07-31 23:14:14 -0400] jmickle: ;-P
[2014-07-31 23:14:36 -0400] newbie259: wait. explain that further. im not sure I follow
[2014-07-31 23:14:51 -0400] jmickle: i mean, ive served over 20million connections a sec on EC2 instances for < 5k a month
[2014-07-31 23:15:14 -0400] jmickle: build software thats worth while and get out of the old school sysadmin ways :-P
[2014-07-31 23:16:15 -0400] merqlove: so as i understand docker concept. i can run some server with CoreOS or CentOS as host, install docker & use anything as containers.
[2014-07-31 23:16:36 -0400] newbie259: ya true. pieces like docker and now coreos are going to make it easier to get away from the old habits
[2014-07-31 23:16:38 -0400] jbarnett: right, which has been around long before docker...
[2014-07-31 23:16:52 -0400] jbarnett: docker just makes it more portable and able to run under any linux OS
[2014-07-31 23:16:55 -0400] jmickle: AKA ec2
[2014-07-31 23:16:56 -0400] newbie259: ya linux containers are not new
[2014-07-31 23:17:05 -0400] jmickle: the way docker runs them is new
[2014-07-31 23:17:07 -0400] merqlove: yeah, for this needs seems cloud is the best
[2014-07-31 23:17:11 -0400] jmickle: in a decoupled way
[2014-07-31 23:17:21 -0400] merqlove: if you need more power, just buy resources
[2014-07-31 23:17:23 -0400] merqlove: :)
[2014-07-31 23:17:30 -0400] jmickle: but that results in lots of advancements that we've come to love from things like kernel 3
[2014-07-31 23:18:18 -0400] newbie259: this is still pretty cutting edge though. and a new way of thinking for a lot of us. trust takes time
[2014-07-31 23:18:47 -0400] newbie259: especially when devops guys have to sell this to stake-holders who have trouble understanding the concepts
[2014-07-31 23:18:58 -0400] digitalchild: draw pictures
[2014-07-31 23:19:00 -0400] digitalchild: and bring crayons
[2014-07-31 23:19:01 -0400] newbie259: lol
[2014-07-31 23:19:03 -0400] digitalchild: i find that works
[2014-07-31 23:19:20 -0400] digitalchild: 'now everyone, we're going to color this ec2 cluster in together, this is where all the magical data lives'
[2014-07-31 23:19:24 -0400] newbie259: im working up a big presentation right now. Its gonna be a big project though
[2014-07-31 23:19:33 -0400] merqlove: But what is best way to control it all with a chef server? Chef Metal? :)
[2014-07-31 23:19:44 -0400] newbie259: hells ya
[2014-07-31 23:19:46 -0400] jmickle: well thats the catch
[2014-07-31 23:20:04 -0400] jmickle: unfortunately inventory and orchestration are 2 layers that havent advanced much
[2014-07-31 23:20:19 -0400] jmickle: chef metal (from my opinion) seems to be a stab at pushing that into the right direction
[2014-07-31 23:20:24 -0400] jmickle: though there is a long ways to go
[2014-07-31 23:20:39 -0400] merqlove: thanks
[2014-07-31 23:20:42 -0400] newbie259: Ive been using metal in production for a while now
[2014-07-31 23:20:42 -0400] jmickle: especially because with inventory alot of people still seem to believe that using excel spreedsheets is the most efficient way
[2014-07-31 23:20:55 -0400] merqlove: haha
[2014-07-31 23:20:58 -0400] newbie259: its awesome
[2014-07-31 23:21:03 -0400] jmickle: metal is great
[2014-07-31 23:21:04 -0400] bawt: OK
[2014-07-31 23:21:11 -0400] jmickle: but there is still a layer of work that could make it awesome
[2014-07-31 23:21:15 -0400] digitalchild: what is this chef metal you speak of
[2014-07-31 23:21:22 -0400] jmickle: some stuff ive been working on as well that i will be committing public soon
[2014-07-31 23:21:28 -0400] jmickle: for inventory and orchestration side of it
[2014-07-31 23:21:37 -0400] digitalchild: im new to chef land (4 months in)
[2014-07-31 23:21:41 -0400] merqlove: oh, this is my next step to try :)
[2014-07-31 23:21:41 -0400] newbie259: ooh. sounds exciting
[2014-07-31 23:21:46 -0400] newbie259: look up chef metal
[2014-07-31 23:21:52 -0400] newbie259: jon keisers baby
[2014-07-31 23:21:55 -0400] merqlove: docker + metal on DO or somewhere
[2014-07-31 23:22:14 -0400] digitalchild: is this different to the berks world?
[2014-07-31 23:22:17 -0400] merqlove: it will work on Vagrant?
[2014-07-31 23:22:26 -0400] newbie259: script out the creation and management of the infrastructure
[2014-07-31 23:22:27 -0400] newbie259: yup
[2014-07-31 23:22:40 -0400] newbie259: vagrant and aws providers come with base chef-metal
[2014-07-31 23:22:52 -0400] newbie259: digitial ocean is supported, rackspace, lots of others
[2014-07-31 23:22:59 -0400] merqlove: GREAT!)
[2014-07-31 23:23:06 -0400] digitalchild: 'this video here explains it'
[2014-07-31 23:23:08 -0400] jmickle: but the question your forgetting
[2014-07-31 23:23:09 -0400] digitalchild: 45 minutes!
[2014-07-31 23:23:13 -0400] jmickle: where do you run these chef metal recipes?
[2014-07-31 23:23:14 -0400] digitalchild: aint no body got time for dat
[2014-07-31 23:23:28 -0400] newbie259: you run them on a provisioner instance inside your vpc
[2014-07-31 23:23:34 -0400] newbie259: thats where I run them
[2014-07-31 23:23:42 -0400] jmickle: and thats a failure point
[2014-07-31 23:23:50 -0400] jmickle: like most of us we run them from that too
[2014-07-31 23:23:57 -0400] merqlove: hmm
[2014-07-31 23:23:58 -0400] jmickle: but what happens when your provisioner goes down
[2014-07-31 23:24:00 -0400] jmickle: ;-)
[2014-07-31 23:24:05 -0400] merqlove: fail
[2014-07-31 23:24:05 -0400] newbie259: not really. I have a provisioner recipe. I can boot another in a couple minutes
[2014-07-31 23:24:14 -0400] jmickle: even on a different cloud?
[2014-07-31 23:24:19 -0400] jmickle: to control a third cloud?
[2014-07-31 23:24:21 -0400] newbie259: if youre that worried , you could heartbeat them and vip them
[2014-07-31 23:24:29 -0400] jmickle: while still maintaining records of infrastructure?
[2014-07-31 23:24:38 -0400] newbie259: no that would change things
[2014-07-31 23:24:39 -0400] jmickle: and linking components?
[2014-07-31 23:24:43 -0400] jmickle: exactly
[2014-07-31 23:24:48 -0400] newbie259: but
[2014-07-31 23:24:55 -0400] jmickle: so now you are at 2am
[2014-07-31 23:24:58 -0400] jmickle: shit just hit the fan
[2014-07-31 23:25:04 -0400] newbie259: i only have to build a provisioner, the rest of the infrastructure is coded
[2014-07-31 23:25:11 -0400] jmickle: and you are back to doing shit the old school way because orchestration and inventory management still sucks
[2014-07-31 23:25:18 -0400] jmickle: but yes
[2014-07-31 23:25:21 -0400] newbie259: not true
[2014-07-31 23:25:24 -0400] jmickle: the fact that you only have to build a provisioner
[2014-07-31 23:25:27 -0400] jmickle: is a better achievement
[2014-07-31 23:25:29 -0400] newbie259: just manually building a provisioner
[2014-07-31 23:25:30 -0400] jmickle: then the old days
[2014-07-31 23:25:35 -0400] newbie259: most def
[2014-07-31 23:25:52 -0400] newbie259: and thats only if I switch clouds
[2014-07-31 23:26:02 -0400] newbie259: or az's
[2014-07-31 23:26:06 -0400] jmickle: hehehe
[2014-07-31 23:26:09 -0400] newbie259: lol
[2014-07-31 23:26:27 -0400] newbie259: still way better
[2014-07-31 23:27:41 -0400] jmickle: oh i admit its much better
[2014-07-31 23:28:25 -0400] newbie259: youre saying its just not perfect?
[2014-07-31 23:28:35 -0400] merqlove: oh, i need sleep, here 3am :) see ya later. bye :)
[2014-07-31 23:28:41 -0400] newbie259: later man
[2014-07-31 23:43:49 -0400] jbarnett: Can someone look at a LWRP I wrote and tell me if it makes sense or not...?
[2014-07-31 23:43:59 -0400] jbarnett: It's my first LWRP and I just don't know if I missed it or not
[2014-07-31 23:45:30 -0400] fujin: chuck it on a gist or something bud
[2014-07-31 23:45:41 -0400] fujin: morel ikely to get people to look at it than asking for permission or help
[2014-07-31 23:45:48 -0400] jbarnett: https://gist.github.com/jasonwbarnett/155484ef1c821631512c
[2014-07-31 23:45:50 -0400] fujin: spanks
[2014-07-31 23:46:07 -0400] jbarnett: :)
[2014-07-31 23:46:49 -0400] digitalchild: tomcat, im so sorry..
[2014-07-31 23:47:25 -0400] jbarnett: me too :)
[2014-07-31 23:47:57 -0400] jbarnett: refresh... just added recipe
[2014-07-31 23:48:15 -0400] jbarnett: I just need to know if this is something that should of been done way differently or if I am somewhat on point
[2014-07-31 23:49:57 -0400] newbie259: It looks good to me
[2014-07-31 23:50:22 -0400] kisoku: reading this whole coreos on the cloud convo is making me have a real #getoffmylawn moment
[2014-07-31 23:50:25 -0400] newbie259: If its wrong, then Im writing mine wrong too. cuz thats the format I follow
[2014-07-31 23:50:30 -0400] kisoku: I loves my real metal :-P
[2014-07-31 23:50:54 -0400] jbarnett: ok, cool beans. I recently switched from Puppet (Defined Resource Types) and it was slightly difficult for me to wrap my head around LWRPs
[2014-07-31 23:51:23 -0400] jbarnett: newbie259: Thanks
[2014-07-31 23:51:31 -0400] newbie259: np man
[2014-07-31 23:51:48 -0400] kisoku: jbarnett: why are you ganking new_resource from inside your provider with set_defaults ?
[2014-07-31 23:52:32 -0400] jbarnett: kisoku: I wasn't sure if you could use one attribute to form another's default in the resources piece.
[2014-07-31 23:52:36 -0400] fujin: jbarnett: I chucked a comment on it
[2014-07-31 23:52:39 -0400] jbarnett: kisoku: That was my hack to get around that
[2014-07-31 23:52:42 -0400] kisoku: ah
[2014-07-31 23:52:48 -0400] fujin: bryanwb is like the man to talk to re: tomcat AFAIK
[2014-07-31 23:53:14 -0400] fujin: kisoku: whatbout coreos on the cloud?
[2014-07-31 23:53:19 -0400] fujin: for, or against?
[2014-07-31 23:53:19 -0400] kisoku: I forget if vanilla LWRP accepts lazy evalutors for default values
[2014-07-31 23:53:41 -0400] kisoku: fujin: fuck all that shit I'm to old for that :-P
[2014-07-31 23:53:48 -0400] newbie259: it seemed like he wasnt into the concept at all
[2014-07-31 23:53:51 -0400] newbie259: ya there ya go
[2014-07-31 23:54:12 -0400] kisoku: I have enough yaks right here
[2014-07-31 23:54:13 -0400] newbie259: so thats a for"
[2014-07-31 23:54:17 -0400] fujin: kisoku: you don't like coreos in general?
[2014-07-31 23:54:39 -0400] fujin: that's an "against"!
[2014-07-31 23:54:43 -0400] newbie259: nope
[2014-07-31 23:54:44 -0400] kisoku: not really sold on containers yet, mind you we still tons of shit the shitty old way
[2014-07-31 23:54:46 -0400] newbie259: youre wrong
[2014-07-31 23:54:48 -0400] newbie259: its a for
[2014-07-31 23:54:53 -0400] newbie259: everyone like coreos on the cloud
[2014-07-31 23:54:56 -0400] newbie259: youre wrong
[2014-07-31 23:54:58 -0400] newbie259: lol
[2014-07-31 23:54:59 -0400] kisoku: lol
[2014-07-31 23:55:12 -0400] fujin: lol
[2014-07-31 23:55:30 -0400] kisoku: I have real performance issues, with large datasets that were not deisgned for horizontal scaling
[2014-07-31 23:55:35 -0400] newbie259: i gotta run guys. getting late. see ya tomorrow
[2014-07-31 23:55:43 -0400] kisoku: so it's not the right model for me
[2014-07-31 23:55:59 -0400] kisoku: if I had green fields I would experiment with it and see how it goes
[2014-07-31 23:56:24 -0400] kisoku: but I am not going to try and shoehorn a model like that into an existing scenario
[2014-07-31 23:56:50 -0400] kisoku: so yeah. neat looking model but not really relevant to my current interests
[2014-07-31 23:58:06 -0400] jbarnett: fujin: thanks for the assessment and notes.
[2014-07-31 23:58:15 -0400] fujin: jbarnett: np HTH
[2014-07-31 23:58:29 -0400] jbarnett: fujin: HTH? :)
[2014-07-31 23:58:34 -0400] fujin: hope-this-helps
[2014-07-31 23:58:38 -0400] jbarnett: ahh..
[2014-07-31 23:58:53 -0400] fujin: one never knows, if ones suggestion, will be truly helpful
[2014-07-31 23:58:55 -0400] fujin: so, I hope!

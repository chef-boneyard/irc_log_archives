[2014-07-08 00:15:28 -0400] PeteJ: is anyone there?
[2014-07-08 00:20:34 -0400] tequilarista: PeteJ: I've seen knife ec2 stall out installing chef-client
[2014-07-08 00:20:46 -0400] tequilarista: it usually has to do with a dropped network connection that doesn't self-recover
[2014-07-08 00:20:53 -0400] tequilarista: not sure what you're provisioning on, though...
[2014-07-08 00:34:02 -0400] schuckles1: Hi, can anyone recommend how I can get Ohai to report the public IP of an EC2 node
[2014-07-08 00:34:32 -0400] schuckles1: for windows that is
[2014-07-08 00:41:00 -0400] nathenharvey: schuckles1: try $ ohai cloud
[2014-07-08 00:44:43 -0400] nathenharvey: schuckles1: $ knife node show NODE_NAME -a cloud.public_ipv4
[2014-07-08 00:46:03 -0400] silk: Is there a way to get more verbose output from a chef-client run, than -l debug ?
[2014-07-08 00:46:10 -0400] schuckles1: Response: node 'NODE_NAME' not found
[2014-07-08 00:47:58 -0400] schuckles1: ohh duh
[2014-07-08 00:48:04 -0400] schuckles1: its a gem, lol
[2014-07-08 00:48:58 -0400] schuckles1: its not reporting cloud.oublic
[2014-07-08 01:52:42 -0400] tomoyuki28jp: When I use knife-solo + berkshelf, there will be three cookbooks dirs: cookbooks, site-cookbooks and berks-cookbooks. Do we need those three dirs? Or we need just two? (One is to store third party cookbooks, and another one to store my custom cookbooks.)
[2014-07-08 01:55:34 -0400] tomoyuki28jp: Anybody?
[2014-07-08 01:56:49 -0400] digitalchild: not sure tomoyuki28jp
[2014-07-08 01:57:00 -0400] digitalchild: where are these located?
[2014-07-08 01:57:02 -0400] digitalchild: ill check mine
[2014-07-08 01:57:23 -0400] tomoyuki28jp: digitalchild: thanks for your reply
[2014-07-08 01:57:27 -0400] tomoyuki28jp: digitalchild: In my case, there are located under chef-repo.
[2014-07-08 01:59:44 -0400] tomoyuki28jp: New version of berkshelf started using the berks-cookbooks dir.
[2014-07-08 02:00:36 -0400] digitalchild: im new to this whole thing so I may or may not be able to help :)
[2014-07-08 02:00:50 -0400] digitalchild: jsust waiting for my workstation to boot
[2014-07-08 02:01:36 -0400] digitalchild: i know that berks stores all the related cook books in its own dir in your home directory
[2014-07-08 02:01:58 -0400] digitalchild: and all my custom cookbooks I store in a development directory that aren't in chef-repo at all
[2014-07-08 02:02:43 -0400] juliancdunn: schuckles1: you might need to create a hint file for Ohai, 'cause there's no easy way to determine if a box is in EC2 or not
[2014-07-08 02:02:54 -0400] digitalchild: all berkshelf cookbooks are stored in ~/.berkshelf
[2014-07-08 02:03:08 -0400] tomoyuki28jp: digitalchild: I think new version of berkshelf is different.
[2014-07-08 02:03:18 -0400] digitalchild: oh?
[2014-07-08 02:03:24 -0400] digitalchild: which version of berks are you running?
[2014-07-08 02:03:47 -0400] tomoyuki28jp: digitalchild: v3.0
[2014-07-08 02:03:54 -0400] digitalchild: im running 3.1.3
[2014-07-08 02:04:20 -0400] digitalchild: and all dependencies are living in ~/.berkshelf
[2014-07-08 02:04:27 -0400] digitalchild: all my cookbooks are where I created them
[2014-07-08 02:04:35 -0400] digitalchild: which arent inside of the chef-repo at all
[2014-07-08 02:04:54 -0400] tomoyuki28jp: digitalchild: I think when we run `berks vendor`, cookbooks will be located in the working directory.
[2014-07-08 02:05:31 -0400] digitalchild: tomoyuki28jp: arh yes
[2014-07-08 02:05:39 -0400] digitalchild: this means the cookbooks arent installed in the berkshelf
[2014-07-08 02:05:43 -0400] digitalchild: but wherever you tell them to
[2014-07-08 02:05:55 -0400] digitalchild: which is berks-cookbooks in your PWD
[2014-07-08 02:06:05 -0400] tomoyuki28jp: digitalchild: yes
[2014-07-08 02:06:21 -0400] digitalchild: which may or may not be your chef-repo
[2014-07-08 02:07:34 -0400] jtimberman: berks can vendor cookbooks in berks-cookbooks, but it will by default put them in ~/.berkshelf/cookbooks.
[2014-07-08 02:09:39 -0400] tomoyuki28jp: jtimberman: So why my berkshelf installed cookbooks into $PWD/berks-cookbooks?
[2014-07-08 02:10:31 -0400] tomoyuki28jp: jtimberman: I just run `berks vendor`
[2014-07-08 02:12:14 -0400] tomoyuki28jp: Maybe I should run `berks install` instead of `berks vendor`?
[2014-07-08 02:12:57 -0400] jtimberman: right
[2014-07-08 02:13:04 -0400] digitalchild: i don't use berks vendor
[2014-07-08 02:13:05 -0400] jtimberman: berks vendor does exactly that - "vendors" them in berks-cookbooks.
[2014-07-08 02:13:22 -0400] tomoyuki28jp: jtimberman: digitalchild: Everything is clear now. Thanks a lot for your help.
[2014-07-08 02:13:27 -0400] tomoyuki28jp: appreciate it.
[2014-07-08 02:13:34 -0400] digitalchild: just remember to git your cookbooks
[2014-07-08 02:14:37 -0400] tomoyuki28jp: digitalchild: Why? `/cookbooks/` is gitignore by default by chef-solo.
[2014-07-08 02:14:44 -0400] tomoyuki28jp: digitalchild: You mean site-cookbooks?
[2014-07-08 02:14:53 -0400] digitalchild: im not sure, i don't use solo
[2014-07-08 02:14:58 -0400] digitalchild: well other than berks using it
[2014-07-08 02:15:18 -0400] tomoyuki28jp: digitalchild: I think I know what you mean.
[2014-07-08 02:15:22 -0400] tomoyuki28jp: digitalchild: thanks for your advice!
[2014-07-08 02:15:27 -0400] digitalchild: each of your cookbooks should have their own git repo
[2014-07-08 02:15:37 -0400] digitalchild: its just good practice to do this anyway
[2014-07-08 02:20:43 -0400] chefgirl: hey what does this error mean
[2014-07-08 02:20:45 -0400] chefgirl: knife upload cookbook mysql ERROR: . failed to write: Cookbook mysql is frozen
[2014-07-08 02:20:53 -0400] chefgirl: this one knife upload cookbook mysql ERROR: . failed to write: Cookbook mysql is frozen
[2014-07-08 02:22:01 -0400] Damm: chefgirl, it means someone uploaded it frozen and you cannot re-upload it unless you apply --force or bump the version
[2014-07-08 02:22:12 -0400] Damm: chefgirl, it's a tactic to keep you from uploading the same version more than once
[2014-07-08 02:22:22 -0400] Damm: you can delete the cookbook too
[2014-07-08 02:22:28 -0400] Damm: delete or --force or bump
[2014-07-08 02:23:07 -0400] chefgirl: @Damm: How can I download a cookbook from inetnet to my machine ? When I download the zip the cookbook name changes
[2014-07-08 02:23:20 -0400] Damm: from the community site?
[2014-07-08 02:23:31 -0400] Damm: how are you downloading it? that's a better question
[2014-07-08 02:23:32 -0400] chefgirl: https://github.com/opscode-cookbooks/mysq
[2014-07-08 02:23:54 -0400] Damm: are you using Berkshelf or Librarian?
[2014-07-08 02:23:55 -0400] chefgirl: i cloned it in my linux box and then deleted that .git folder
[2014-07-08 02:24:13 -0400] chefgirl: I am using berkshelf i am just exploring berkshelf
[2014-07-08 02:24:14 -0400] Damm: typically this is where you drop that in your Berkfile and then berks upload mysql
[2014-07-08 02:24:30 -0400] Damm: so cookbook("mysql",github: "opscode-cookbooks/mysql")
[2014-07-08 02:24:42 -0400] Damm: you can add branch and other things of course
[2014-07-08 02:24:43 -0400] chefgirl: I am not so much familiar to berk so much
[2014-07-08 02:24:57 -0400] chefgirl: using it for the first time
[2014-07-08 02:25:02 -0400] Damm: used bundler much?
[2014-07-08 02:25:09 -0400] chefgirl: nope
[2014-07-08 02:25:20 -0400] chefgirl: I have just started exploring chef
[2014-07-08 02:25:31 -0400] Damm: hmmm well just think of it as a way to specify what cookbooks you depend on
[2014-07-08 02:25:35 -0400] chefgirl: installed chef server workstation bootstrapped node
[2014-07-08 02:25:42 -0400] Damm: you don't always want to download the mysql cookbook locally; unless your going to modify it
[2014-07-08 02:25:52 -0400] Damm: a wrapper cookbook to instruct/drive the mysql cookbook is a good thing to make
[2014-07-08 02:26:11 -0400] Damm: and then cookbook("infra_mysql",path:"cookbooks/infra_mysql") that depends on mysql
[2014-07-08 02:26:12 -0400] chefgirl: can we chat privately if u dont mind ?
[2014-07-08 02:26:25 -0400] Damm: my /query is open
[2014-07-08 02:27:42 -0400] chefgirl: query fired
[2014-07-08 02:28:30 -0400] chefgirl: Damm : ?????
[2014-07-08 03:21:11 -0400] lamroger: hi everyone, has anyone seen this error before /Applications/Vagrant/embedded/lib/ruby/2.0.0/open-uri.rb:223:in `open_loop': redirection forbidden: http://cookbooks.opscode.com/api/v1/cookbooks/chef-client/versions/3.6.0/download -> https://s3.amazonaws.com/community-files.opscode.com/cookbook_versions/tarballs/6943/original/chef-client20140607-16571-1b69t5f.?1402194069 (RuntimeError)
[2014-07-08 03:21:33 -0400] lamroger: googling tells me the http should be https
[2014-07-08 03:21:38 -0400] chefgirl: how can i download chef recipe from opscode ?
[2014-07-08 03:21:40 -0400] lamroger: but i dont know where to change it
[2014-07-08 03:24:52 -0400] jtimberman: lamroger: sounds like you're using berkshelf, perhaps version 2.x?
[2014-07-08 03:25:23 -0400] jtimberman: lamroger: anyway, berkshelf 2.0.18 was released earlier to address that - it's a bug in ruby stdlib's open-uri.
[2014-07-08 03:31:12 -0400] chefgirl: I want to download a cookbook https://github.com/opscode-cookbooks/mysql
[2014-07-08 03:31:18 -0400] chefgirl: how can i do this
[2014-07-08 03:32:58 -0400] lamroger: @chefgirl you can use git clone
[2014-07-08 03:34:20 -0400] chefgirl: @lamroger : when i am using it is creating .git directory also
[2014-07-08 03:34:24 -0400] chefgirl: is it fine ?
[2014-07-08 03:34:40 -0400] lamroger: yep
[2014-07-08 03:34:44 -0400] lamroger: thats just metadata
[2014-07-08 03:34:56 -0400] lamroger: there are some pretty good git tutorials out there
[2014-07-08 03:35:14 -0400] chefgirl: okay can i delete that .git directory ?
[2014-07-08 03:40:20 -0400] lamroger: yep if you dont intend on using git
[2014-07-08 03:40:28 -0400] chefgirl: lamroger : when iam uplaoding it it gives me error ERROR: Version 3.2.2 of cookbook yum is frozen. Use --force to override.
[2014-07-08 03:41:17 -0400] lamroger: forgot to say thank you jtimberman
[2014-07-08 03:41:32 -0400] lamroger: thanks! still broken but you're prob right
[2014-07-08 03:41:51 -0400] lamroger: chefgirl, umm not sure
[2014-07-08 03:42:06 -0400] chefgirl: :(
[2014-07-08 03:42:26 -0400] lamroger: you can remove the Gemfile.lock
[2014-07-08 03:42:29 -0400] lamroger: file
[2014-07-08 03:42:36 -0400] lamroger: and see if that helps
[2014-07-08 03:42:39 -0400] chefgirl: okay will that work ?
[2014-07-08 03:42:42 -0400] chefgirl: okay
[2014-07-08 03:42:43 -0400] lamroger: or just run the command with --force
[2014-07-08 03:42:50 -0400] chefgirl: okay
[2014-07-08 03:43:16 -0400] lamroger: bundle install will reinstall the gems
[2014-07-08 04:01:22 -0400] chefgirl: how to determine the run list of a cookbook if it has many recipes ?
[2014-07-08 04:03:00 -0400] chefgirl: how to determine the run list of a cookbook if it has many recipes ?
[2014-07-08 04:10:35 -0400] drag00n: Can anyone help with bundle install in Chef, i have tried
[2014-07-08 04:11:17 -0400] drag00n: bundle install as an execute resource both with specifying the path and with the cwd param but it does not seem to be working
[2014-07-08 04:25:31 -0400] mmzyk: drag00n It happens to be the example we give in the execute resource: http://docs.opscode.com/resource_execute.html
[2014-07-08 04:26:35 -0400] drag00n: this is how I specify it in my recipe, but it exits without installing
[2014-07-08 04:33:13 -0400] mmzyk:  drag00n its possible that for some reason bundler isnt running properly. Its hard to say without seeing the system in question. Id see if you can run it by hand on the system and if it works as you expect.
[2014-07-08 04:33:47 -0400] mmzyk: Maybe there is an environment variable that needs to be set so bundler can find the information in needs to run correctly. Im not sure, but those are areas to explore.
[2014-07-08 04:35:08 -0400] alisdair: what's the easiest way to either update PATH or setup a symlink with chef when the provisioner may run multiple times?
[2014-07-08 04:42:31 -0400] chefgirl: I am trying to install mysql
[2014-07-08 04:42:41 -0400] chefgirl: when i do sudo chef-client
[2014-07-08 04:42:44 -0400] chefgirl: i get this error
[2014-07-08 04:44:08 -0400] chefgirl: this is the screensot : http://pastebin.com/ua0WSFm2
[2014-07-08 04:46:30 -0400] chefgirl: I am trying to install mysql
[2014-07-08 04:46:39 -0400] chefgirl: when i do sudo chef-client
[2014-07-08 04:46:45 -0400] chefgirl: when i do sudo chef-client
[2014-07-08 04:47:16 -0400] chefgirl:  i get this error
[2014-07-08 04:47:25 -0400] chefgirl: this is the screensot : http://pastebin.com/ua0WSFm2
[2014-07-08 04:47:36 -0400] chefgirl: help me to join
[2014-07-08 04:47:44 -0400] chefgirl: help me to resolve thie error
[2014-07-08 04:53:33 -0400] cheeseplus: chefgirl: you should check the mysql logs, something has it unhappy
[2014-07-08 04:55:18 -0400] chefgirl: @cheeseplus : please see the logs here http://pastebin.com/k3g8k8j9
[2014-07-08 04:56:09 -0400] chandrasekhar: can anyone tel me if i am using my local windows machine as a workstation then is it necessary to configure knife in my chef server which is ubuntu
[2014-07-08 04:56:10 -0400] chandrasekhar: ?
[2014-07-08 04:56:51 -0400] paulmooring: chefgirl are you out of memory and swap?
[2014-07-08 04:57:07 -0400] paulmooring: chandrasekhar you don't configure knife on the server
[2014-07-08 04:57:10 -0400] chefgirl: no paulmooring
[2014-07-08 04:58:05 -0400] cheeseplus: chefgirl: yea it looks like you're out of memory on that box based on that error
[2014-07-08 04:58:06 -0400] chandrasekhar: yes. i have not configured in chef server
[2014-07-08 04:58:16 -0400] paulmooring: chefgirl what is innodb_buffer_pool_size set to?
[2014-07-08 04:58:40 -0400] paulmooring: chandrasekhar: I mean you never configure knife on the server, knife talks to the server from the workstation
[2014-07-08 04:58:48 -0400] chefgirl: paulmooring : how to check that i just installed the cookbook and ran it
[2014-07-08 04:58:51 -0400] chandrasekhar: okey. got it
[2014-07-08 04:59:06 -0400] paulmooring: chefgirl which cookbook, mysql from the community site?
[2014-07-08 04:59:10 -0400] chefgirl: https://github.com/opscode-cookbooks/mysql
[2014-07-08 04:59:16 -0400] chefgirl: this is the cookbook
[2014-07-08 04:59:22 -0400] chandrasekhar: C:\Users\anol_roy>knife cookbook upload apache-practice -V Uploading apache-practice [0.1.0] INFO: Validating ruby files INFO: Validating templates INFO: Syntax OK INFO: Saving apache-practice INFO: Uploading files INFO: Uploading D:/CHEF/chef-repo/cookbooks/apache-practice/metadata.rb (checksu m hex = 5051b96a9e35fba13c6dbc74026464c3) to https://ngpchefserver.scep.com:443/ bookshelf/organization-00000000000000000000000000000000/c
[2014-07-08 04:59:28 -0400] chefgirl: i have just changed the server password in attributes file
[2014-07-08 04:59:36 -0400] chandrasekhar: i am getting 500 error while uploading cookbook
[2014-07-08 05:01:00 -0400] chandrasekhar: anyone is having idea why this occured ?
[2014-07-08 05:01:20 -0400] chefgirl: paulmooring : any idea what I am doing wrong ?
[2014-07-08 05:01:37 -0400] paulmooring: chefgirl not familiar with that cookbook, but I'm taking a look now
[2014-07-08 05:01:58 -0400] chefgirl: okay waiting paulmooring
[2014-07-08 05:01:59 -0400] paulmooring: That error looks a whole lot like mysqld is blowing up when it runs out of memory
[2014-07-08 05:02:24 -0400] paulmooring: I'd start by checking `free -h` for how much wiggle room you have
[2014-07-08 05:03:41 -0400] chandrasekhar: paulmooring: any idea about that error ?
[2014-07-08 05:03:46 -0400] chandrasekhar: C:\Users\anol_roy>knife cookbook upload apache-practice -V Uploading apache-practice [0.1.0] INFO: Validating ruby files INFO: Validating templates INFO: Syntax OK INFO: Saving apache-practice INFO: Uploading files INFO: Uploading D:/CHEF/chef-repo/cookbooks/apache-practice/metadata.rb (checksu m hex = 5051b96a9e35fba13c6dbc74026464c3) to https://ngpchefserver.scep.com:443/ bookshelf/organization-00000000000000000000000000000000/c
[2014-07-08 05:04:17 -0400] chefgirl:  free -m              total       used       free     shared    buffers     cached Mem:           590        106        484          0          2         30 -/+ buffers/cache:         73        517 Swap:            0          0          0
[2014-07-08 05:04:29 -0400] chefgirl: frre -h is not working
[2014-07-08 05:04:30 -0400] chandrasekhar: dba3030476b98e9255e6fe5e?AWSAccessKeyId=59777e88245ebf096f045d8e5c0266f0a50b3033 &Expires=1404736700&Signature=Y/4cn7bvDjtgR4Yr3ZnSuPnc2qk%3D INFO: Uploading D:/CHEF/chef-repo/cookbooks/apache-practice/README.md (checksum hex = f0e032d75fb2f0792e5e238fa429ded4) to https://ngpchefserver.scep.com:443/bo okshelf/organization-00000000000000000000000000000000/checksum-f0e032d75fb2f0792 e5e238fa429ded4?AWSAccessKeyId=59777e88245ebf096f0
[2014-07-08 05:04:33 -0400] paulmooring: chandrasekhar not offhand can you run it with -VV?
[2014-07-08 05:04:49 -0400] chefgirl: and its a t1.micro instance
[2014-07-08 05:04:51 -0400] chefgirl: aws
[2014-07-08 05:05:02 -0400] cheeseplus: chandrasekhar: please use pastebin/gists, much easier to parse
[2014-07-08 05:05:02 -0400] paulmooring: chandrasekhar please use pastebin or gist for long output in IRC if you can
[2014-07-08 05:05:05 -0400] cheeseplus: lol
[2014-07-08 05:05:23 -0400] paulmooring: chefgirl that says you only have 100MB free
[2014-07-08 05:05:34 -0400] paulmooring: and no swap available
[2014-07-08 05:05:48 -0400] paulmooring: and InnoDB wants 128MB for it's buffer pool
[2014-07-08 05:05:49 -0400] chefgirl: but when i install the mysql with yum it installs with no error
[2014-07-08 05:06:19 -0400] paulmooring: you could drop that down in the config if you want, but honestly with that little memory for mysql you're gonna have a bad time
[2014-07-08 05:06:28 -0400] chefgirl: what changes should i make so that it install on a simple t1.micro install
[2014-07-08 05:06:31 -0400] paulmooring: cheeseplus do you know the mysql cookbook?
[2014-07-08 05:06:44 -0400] chefgirl: in th recipe i should make cjhanges ?
[2014-07-08 05:06:47 -0400] cheeseplus: chefgirl: installing is one thing, restarting the service will trigger the error
[2014-07-08 05:07:01 -0400] cheeseplus: chefgirl: you need to decrease the buffer pool
[2014-07-08 05:07:05 -0400] chefgirl: but i have restarted the server a no of times
[2014-07-08 05:07:09 -0400] chefgirl: sql server
[2014-07-08 05:07:13 -0400] chefgirl: how to do that
[2014-07-08 05:07:16 -0400] chefgirl: in which files
[2014-07-08 05:07:25 -0400] paulmooring: chefgirl I suspect that cookbooks sets it the mysql config
[2014-07-08 05:07:43 -0400] paulmooring: I'd have to find the right knob in that cookbooks though, mysql has a whole lot of options
[2014-07-08 05:08:19 -0400] paulmooring: chefgirl it's my.cnf
[2014-07-08 05:08:20 -0400] cheeseplus: paulmooring: I'm so bad at RDBMS right now
[2014-07-08 05:08:27 -0400] chefgirl: i am also trying to find
[2014-07-08 05:08:42 -0400] paulmooring: cheeseplus should I just suggest everyone move to Riak?
[2014-07-08 05:08:48 -0400] chandrasekhar: @Paulmooring: u mean i should run like " knife cookbook upload apache-practice -VV?
[2014-07-08 05:08:50 -0400] cheeseplus: pretty much
[2014-07-08 05:09:03 -0400] paulmooring: chandrasekhar yes and put the output in a gist if you can
[2014-07-08 05:09:13 -0400] chandrasekhar: ok
[2014-07-08 05:10:39 -0400] chefgirl: paulmooring & @cheeseplus: where should i make changes ?
[2014-07-08 05:10:55 -0400] paulmooring: chefgirl still looking through that cookbook one moment
[2014-07-08 05:10:59 -0400] cheeseplus: chefgirl: it doesn't look like there is a widget for it
[2014-07-08 05:11:05 -0400] cheeseplus: in the cookbook as is
[2014-07-08 05:11:25 -0400] cheeseplus: if you wanted to change the cookbook itself you could update the template and add an attribute
[2014-07-08 05:12:08 -0400] cheeseplus: it looks like the my.cnf with it tunable was deprecated
[2014-07-08 05:12:47 -0400] chefgirl: I ma tuck
[2014-07-08 05:12:50 -0400] paulmooring: chefgirl oh
[2014-07-08 05:12:51 -0400] chefgirl: *Stuck
[2014-07-08 05:12:59 -0400] paulmooring: it's a change in the mysql default settings
[2014-07-08 05:13:04 -0400] chefgirl: where
[2014-07-08 05:13:10 -0400] paulmooring: 5.5 was 8M and 5.6 was 128M
[2014-07-08 05:13:24 -0400] paulmooring: you won't find it in the config because the default is no good
[2014-07-08 05:13:47 -0400] chefgirl: so how should i resolve thie
[2014-07-08 05:13:52 -0400] paulmooring: probably your distro package is an older version than the cookbook, I would guess changing your version to 5.5 in the cookbook might fix it?
[2014-07-08 05:14:20 -0400] chefgirl: i am trying to install on centos 6.5
[2014-07-08 05:14:51 -0400] paulmooring: so probably set the attribute node['mysql']['version'] to '5.5'
[2014-07-08 05:14:56 -0400] paulmooring: do you know how to do that?
[2014-07-08 05:15:14 -0400] chefgirl: in the attributes ?
[2014-07-08 05:15:38 -0400] paulmooring: well you don't want to modify the cookbook, so you would change it somewhere else (node/role/environment)
[2014-07-08 05:15:59 -0400] paulmooring: depending on how you Chef that could be a number of things, but generally it's a role or wrapper cookbook
[2014-07-08 05:16:14 -0400] chefgirl: lets change the cookbook
[2014-07-08 05:16:26 -0400] paulmooring: if you're just testing and want to do it quick, change it on the node
[2014-07-08 05:16:30 -0400] chefgirl:  i mean modify it
[2014-07-08 05:16:35 -0400] paulmooring: knife node edit $some_node_name
[2014-07-08 05:18:12 -0400] chefgirl: @paulmooring : next ?
[2014-07-08 05:18:34 -0400] paulmooring: so that will open up the node in $EDITOR for you to add the attribute
[2014-07-08 05:19:29 -0400] chefgirl: see here http://pastebin.com/eiEEPWhm
[2014-07-08 05:19:35 -0400] chefgirl: this is the json
[2014-07-08 05:19:38 -0400] paulmooring: chefgirl you'll probably see some json with a 'normal' section
[2014-07-08 05:19:55 -0400] chefgirl: yup saw that
[2014-07-08 05:20:32 -0400] chefgirl: what if i modify the run list and add [yum-mysql-community::mysql55 instead of [yum-mysql-community::mysql56]
[2014-07-08 05:21:38 -0400] paulmooring: https://gist.github.com/paulmooring/d5795d97e699c1f51732
[2014-07-08 05:22:04 -0400] paulmooring: chefgirl totally untested and I work in typos like a potter works in clay, but that's the idea
[2014-07-08 05:22:42 -0400] chefgirl:  what if i modify the run list and add [yum-mysql-community::mysql55 instead of [yum-mysql-community::mysql56]
[2014-07-08 05:22:55 -0400] chefgirl: will that work paulmooring ?
[2014-07-08 05:23:11 -0400] paulmooring: maybe, yum-mysql-community is not the cookbook you linked before ;)
[2014-07-08 05:23:58 -0400] paulmooring: chefgirl yeah that looks right from a quick glance at that cookbook
[2014-07-08 05:24:12 -0400] paulmooring: chandrasekhar did you get it sorted?
[2014-07-08 05:24:14 -0400] chefgirl: is the mysql cookbook i have chosen is rigjht ?
[2014-07-08 05:25:07 -0400] paulmooring: chefgirl unfortunately I work at a postgres shop and can't really comment on which mysql cookbook is favored, but if that recipe works it's right as far as I'm concerned
[2014-07-08 05:25:27 -0400] cheeseplus: that mysql cookbook just sets up the yum repos
[2014-07-08 05:25:38 -0400] cheeseplus: that = yum-mysql-community
[2014-07-08 05:25:55 -0400] cheeseplus: the mysql cookbook itself does the heavy lifting
[2014-07-08 05:26:15 -0400] paulmooring: thanks cheeseplus, then yeah I think that should fix you up but I have no idea what happens when you set up both repos
[2014-07-08 05:26:29 -0400] paulmooring: chefgirl keep in mind that chef does undo anything when you remove a recipe
[2014-07-08 05:26:30 -0400] cheeseplus: explosions
[2014-07-08 05:26:49 -0400] paulmooring: so if that set up a repo for 5.6 and you remove that recipe, you still have a repo for 5.6
[2014-07-08 05:26:57 -0400] chefgirl: is that coookbook working ?
[2014-07-08 05:28:33 -0400] paulmooring: chefgirl if there's nothing on this EC2 instance, I would just terminate and spin up a new one with the mysql55 recipe
[2014-07-08 05:29:13 -0400] cheeseplus: or one that has more memory ;)
[2014-07-08 05:29:37 -0400] paulmooring: or that, but I assume if you're using micro you'd like to stick in free tier territory
[2014-07-08 05:29:44 -0400] chefgirl: where is mysql55 recipe ?
[2014-07-08 05:29:58 -0400] chefgirl: the yum-mysql community one ?
[2014-07-08 05:30:04 -0400] paulmooring: sorry the yum-community-mysql:mysql55 or whatever you mentioned earlier
[2014-07-08 05:30:35 -0400] chefgirl: let me try
[2014-07-08 05:30:36 -0400] paulmooring: tl;dr yum-mysql-comm... sets up a repo then mysql::server references the 'mysql' package
[2014-07-08 05:31:04 -0400] chefgirl: Im running the recipe
[2014-07-08 05:31:11 -0400] chandrasekhar: @Paulmooring: i put that error in the gist
[2014-07-08 05:31:14 -0400] paulmooring: so if you set up the repo for 5.6 then the mysql package installs 5.6 and if you set up the repo for 5.5 it installs 5.5, but the package name is the same
[2014-07-08 05:31:25 -0400] paulmooring: chandrasekhar got a link, I must have missed it?
[2014-07-08 05:31:48 -0400] chandrasekhar: https://gist.github.com/anonymous/0b6445dad2ced709ff20
[2014-07-08 05:33:45 -0400] paulmooring: chandrasekhar is this a brand new server?
[2014-07-08 05:34:13 -0400] chandrasekhar: u r talking baout chef server ?
[2014-07-08 05:34:34 -0400] paulmooring: yeah the server you're trying to upload too
[2014-07-08 05:35:10 -0400] chefgirl: paulmooring +cheeseplus : http://pastebin.com/eW60vnNT error again
[2014-07-08 05:35:11 -0400] paulmooring: The erchef server is giving a 500 on a PUT to /sandboxes
[2014-07-08 05:35:12 -0400] chefgirl: :(
[2014-07-08 05:35:49 -0400] chandrasekhar: if its then yes. we created that vm from virtualous which is ubuntu
[2014-07-08 05:35:49 -0400] paulmooring: chefgirl same thing if you try and manually start it?
[2014-07-08 05:36:09 -0400] chandrasekhar: and workstation is my local windows machine
[2014-07-08 05:36:35 -0400] chandrasekhar: but knife is working fine
[2014-07-08 05:36:36 -0400] chefgirl: No it fails
[2014-07-08 05:36:42 -0400] chefgirl: on staring manullay
[2014-07-08 05:36:45 -0400] chandrasekhar: i can see node list
[2014-07-08 05:36:55 -0400] chefgirl: pls note that I am testing that on the same ec2 instance
[2014-07-08 05:37:01 -0400] paulmooring: chandrasekhar so that's a server side error it's not related to your knife config
[2014-07-08 05:37:39 -0400] chandrasekhar: ok. then what might be the issue
[2014-07-08 05:38:10 -0400] paulmooring: chandrasekhar can't really tell from the knife output, you'd need to take a look at the server
[2014-07-08 05:39:35 -0400] chefgirl: paulmooring and why it is taking the dafualt password
[2014-07-08 05:39:45 -0400] chefgirl: i have changed that in attributes file
[2014-07-08 05:41:35 -0400] paulmooring: chefgirl at this point you might need to do some deep reading/debugging on that cookbook
[2014-07-08 05:42:13 -0400] paulmooring: I can tell you for sure that the error we first saw is because you didn't have the memory mysql wanted to initialize InnoDB
[2014-07-08 05:42:26 -0400] paulmooring: and that that's expected for 5.6 but not 5.5
[2014-07-08 05:43:10 -0400] paulmooring: beyond that you'll probably need either nuke this node and start clean or dig into if (and why) you're getting 5.6 from the cookbook and not from the yum package
[2014-07-08 05:43:20 -0400] chefgirl: okay
[2014-07-08 05:45:16 -0400] paulmooring: chandrasekhar to be honest with you I know considerably more about Enterprise Chef than I do open source Chef server.  If you can't find something obvious on the server you might ask in here tomorrow or open a ticket with Chef support
[2014-07-08 05:56:14 -0400] chandrasekhar: @Paulmooring: i am wondering what should i check in the server ?
[2014-07-08 05:57:14 -0400] paulmooring: chandrasekhar so you're having some successful POSTS/PUTS in that log and then a 500, meaning it's likely coming from erchef itself
[2014-07-08 05:57:16 -0400] chandrasekhar: opps: i missed your last conversation
[2014-07-08 05:57:40 -0400] paulmooring: I think /var/log/erchef or /var/log/opscode-erchef is the place to look?
[2014-07-08 05:57:40 -0400] chandrasekhar: ok
[2014-07-08 05:58:02 -0400] paulmooring: but like I said I don't actually have an open source server around to verify that
[2014-07-08 06:04:17 -0400] chefgirl: paulmooring : it got executed after changing the run list
[2014-07-08 06:04:21 -0400] chefgirl: but why so
[2014-07-08 06:04:38 -0400] paulmooring: chefgirl what got executed?
[2014-07-08 06:04:47 -0400] chefgirl: teh recipe mysql
[2014-07-08 06:05:36 -0400] chefgirl: but after changing yum-community-mysqlt tp 156
[2014-07-08 06:05:49 -0400] chefgirl: +cheeseburst : can you please explain why
[2014-07-08 06:05:55 -0400] chefgirl: if ran after changing that
[2014-07-08 06:06:07 -0400] chefgirl: @cheeseplus : if ran after changing that
[2014-07-08 06:06:10 -0400] paulmooring: chefgirl well what's the node's run_list look like now?
[2014-07-08 06:06:32 -0400] cheeseplus: I'm betting that part of the problem is that mysql is already installed
[2014-07-08 06:07:56 -0400] chefgirl: {   "name": "Lamp_Server",   "chef_environment": "Testing",   "normal": {     "tags": [      ]   },   "run_list": [     "recipe[yum]",     "recipe[yum-mysql-community::mysql55]",     "recipe[mysql::server]",     "recipe[mysql::client]"   ] }
[2014-07-08 06:08:02 -0400] chefgirl: this is the run list
[2014-07-08 06:08:16 -0400] chefgirl: @cheeseplus : the ysql server was not installed
[2014-07-08 06:08:27 -0400] chefgirl: on teh server the previos one
[2014-07-08 06:08:53 -0400] cheeseplus: you uninstalled it?
[2014-07-08 06:08:57 -0400] chefgirl: but i chnaged the password but the password still is the same
[2014-07-08 06:09:10 -0400] chefgirl: yeah i uninstalled it using yum remove mysql*
[2014-07-08 06:09:51 -0400] paulmooring: chefgirl I'm confused about what the problem is, based on that run_list the mysql::server recipe should be running
[2014-07-08 06:10:23 -0400] chefgirl: yeah now the mysql recipe is running after changing the runlist
[2014-07-08 06:10:33 -0400] chefgirl: but its picking up the default password
[2014-07-08 06:10:47 -0400] paulmooring: yeah there's probably a saved node attribute?
[2014-07-08 06:11:12 -0400] chefgirl: no its in the default attribute file in mysql cookbook
[2014-07-08 06:11:21 -0400] chefgirl: i modified still its picking the old one
[2014-07-08 06:12:39 -0400] paulmooring: https://github.com/opscode-cookbooks/mysql/blob/master/libraries/provider_mysql_service_debian.rb#L65-L72
[2014-07-08 06:13:18 -0400] paulmooring: that's where it gets changed, have a look at the only_if
[2014-07-08 06:14:28 -0400] chefgirl: but if i change the default attribute then it should work !!!
[2014-07-08 06:14:48 -0400] paulmooring: ?
[2014-07-08 06:15:07 -0400] paulmooring: That attribute will only do something if that only_if statement succeeds
[2014-07-08 06:33:11 -0400] chefgirl: can anybody give me a recipe to install wordpress
[2014-07-08 06:40:40 -0400] chefgirl: can anyone point me to a chef cookbook for wordpress installation
[2014-07-08 06:54:02 -0400] GreatSUN: hi all
[2014-07-08 06:57:58 -0400] GreatSUN: I experienced some problem with chef-solo 11 and the execution of bash lwrp
[2014-07-08 06:58:32 -0400] GreatSUN: bash lwrp contains code "rm -fR /tmp/downloadDir"
[2014-07-08 06:59:07 -0400] GreatSUN: I get error code 127 "command not found"
[2014-07-08 06:59:12 -0400] chefgirl: Do i need to include the recipe that i include in wrapper cookbook in node's run list ?
[2014-07-08 06:59:15 -0400] GreatSUN: anyone an idea why this might happen?
[2014-07-08 06:59:33 -0400] GreatSUN: chefgirl: why should you?
[2014-07-08 06:59:47 -0400] chefgirl: \Okay it means it automatically fetches
[2014-07-08 06:59:54 -0400] GreatSUN: if you have the wrapper cookbook in the runlist, this is exactly what wrapper cookbook is for
[2014-07-08 06:59:57 -0400] sadbox: I'm using chef to update a zone file, and currently the recipe is updating the zone file every hour (since the serial is dynamically generated), but I would like it to only update if the node list changes.... Not sure what to really google for for thi sone
[2014-07-08 06:59:59 -0400] sadbox: this one**
[2014-07-08 07:00:55 -0400] GreatSUN: sadbox: you need some static storage for this
[2014-07-08 07:01:24 -0400] GreatSUN: sadbox: you have to store the node list and check if it changed somehow
[2014-07-08 07:01:40 -0400] GreatSUN: maybe save the md5sum of the nodelist or such
[2014-07-08 07:02:13 -0400] sadbox: hm
[2014-07-08 07:02:39 -0400] sadbox: I guess I could toss it in a data bag
[2014-07-08 07:02:40 -0400] sadbox: or something
[2014-07-08 07:07:42 -0400] chefgirl: can anyone give me e reference of the  wordpress recipe ?
[2014-07-08 07:12:04 -0400] GreatSUN: chefgirl: not me, sorry
[2014-07-08 07:16:16 -0400] chefgirl: a deleted server is automaticaly deleted from chef server ?
[2014-07-08 07:21:11 -0400] chefgirl:  a deleted server is automaticaly deleted from chef server ?
[2014-07-08 07:22:40 -0400] GreatSUN: chefgirl: repeating doesn't help
[2014-07-08 07:22:49 -0400] GreatSUN: chefgirl: how do you delete a server?
[2014-07-08 07:23:04 -0400] chefgirl: by terminating it
[2014-07-08 07:23:11 -0400] chefgirl: in AWs
[2014-07-08 07:23:26 -0400] GreatSUN: chefgirl: I dunno about Amazon
[2014-07-08 07:23:42 -0400] GreatSUN: but I think with a proper setup it should be deleted from chefserver, too
[2014-07-08 07:23:54 -0400] chefgirl: means by manullay deleting
[2014-07-08 07:23:55 -0400] GreatSUN: you should try once
[2014-07-08 07:24:01 -0400] chefgirl: okay
[2014-07-08 07:35:28 -0400] chefgirl: I am getting this error : http://pastebin.com/u9zZpz77
[2014-07-08 07:35:39 -0400] chefgirl: when i have the run list :
[2014-07-08 07:36:23 -0400] chefgirl: http://pastebin.com/JnUXSsbs
[2014-07-08 07:36:59 -0400] chefgirl: this is my run list howeven when i change the run list to yum mysql commuity to 155 it works
[2014-07-08 07:41:01 -0400] mattt: i'd recommend using something like knife-ec2 if you want to destry instances from AWS and your chef server in one swoop
[2014-07-08 07:41:46 -0400] chefgirl:  matt : okay i will try that can u answer my another query
[2014-07-08 07:41:50 -0400] GreatSUN: chefgirl: I guess this has to do with the attributes/configuration file(s) set up
[2014-07-08 07:41:55 -0400] chefgirl: that i have recently posted
[2014-07-08 07:42:06 -0400] GreatSUN: you are using explicit timestamps as the error message states
[2014-07-08 07:42:17 -0400] chefgirl: https://github.com/opscode-cookbooks/mysql is the cookbook
[2014-07-08 07:42:19 -0400] GreatSUN: with mysql 5.6 this is not allowed by default
[2014-07-08 07:42:30 -0400] chefgirl: wher i have to make changes
[2014-07-08 07:42:41 -0400] GreatSUN: check in the attributes
[2014-07-08 07:43:26 -0400] chefgirl: no there is nothing like timestamp
[2014-07-08 07:44:19 -0400] chefgirl: GreatSun : Any suggestions ?
[2014-07-08 07:50:07 -0400] cheeseplus: chefgirl: we already determined that the failure when installing mysql 5.6 is due to not having enough memory for innoDB
[2014-07-08 07:51:11 -0400] chefgirl: @ cheeseplus : I have  a doubt
[2014-07-08 07:51:40 -0400] cheeseplus: it's what the logs said
[2014-07-08 07:51:52 -0400] chefgirl: If i am running the mysql recipe then do i need to add the dependent recipes in node's run list too ?
[2014-07-08 07:52:01 -0400] cheeseplus: no
[2014-07-08 07:52:31 -0400] chefgirl: Okay but i always gave the dependent recipes in the run list
[2014-07-08 07:54:07 -0400] chefgirl: @cheseplus :I am trying without giving the dependenet reipes
[2014-07-08 07:56:24 -0400] chefgirl: How can i delete a server using knife ec2
[2014-07-08 07:58:33 -0400] cheeseplus: chefgirl: "knife ec2 server delete"
[2014-07-08 07:59:13 -0400] chefgirl: Dont i need to give id or node name
[2014-07-08 07:59:15 -0400] chefgirl: ?
[2014-07-08 07:59:21 -0400] mattt: yeah you would
[2014-07-08 08:00:06 -0400] chefgirl:  knife ec2 My_Server delete giving error
[2014-07-08 08:06:25 -0400] balbirs: can I keep databags/cookbook and roles in .tgz file in a file and then run chef-client without using the 'chef server'
[2014-07-08 08:07:21 -0400] balbirs: I meant.. a schenario on which I need not to setup the chef-server.. all cookbooks/databags/roles would be available locally to host
[2014-07-08 08:08:22 -0400] cheeseplus: balbirs: chef-solo can do that
[2014-07-08 08:09:48 -0400] balbirs: cheeseplus: chef-solo does not require the chef-server or chef-workstation to be setup? could you please direct me to some documenration to read more about it
[2014-07-08 08:09:59 -0400] chefgirl: @cheeseplus : WARNING: Corresponding node and client for the i-839405af server were not deleted and remain registered with the Chef Server i tried the server is deleted
[2014-07-08 08:10:05 -0400] chefgirl: but with a warning
[2014-07-08 08:10:18 -0400] cheeseplus: balbirs: http://docs.opscode.com/chef_solo.html
[2014-07-08 08:11:08 -0400] cheeseplus: chefgirl: right, as per that command you have to run with --purge to nuke the client/node on the chef-server side
[2014-07-08 08:11:47 -0400] chefgirl: can u pls give me the entire command \
[2014-07-08 08:11:57 -0400] balbirs: cheeseplus: thanks
[2014-07-08 08:13:14 -0400] GreatSUN: chefgirl: please use google instead of taking a lot of time of people in here
[2014-07-08 08:13:50 -0400] GreatSUN: chefgirl: dont force us to use http://lmgtfy.com/
[2014-07-08 08:17:54 -0400] bobo: im getting "attributes are read-only..." for a .reject (without bang). That should work right? found some bug report but cant seem to find a solution
[2014-07-08 08:19:26 -0400] bobo: (using chef-11.10.4)
[2014-07-08 08:19:41 -0400] __julien: Hello, I don't understand why I can't set an attribute depending on another boolean node attribute defined in another cookbook (it's a boolean set to false by default).
[2014-07-08 08:19:46 -0400] __julien: default['my_python']['app']['init_script_template']  = node['newrelic']['enabled'] ? 'initctl_python-app-with-newrelicmon.conf.erb' : 'initctl_python-app-without-newrelicmon.conf.erb'
[2014-07-08 08:19:57 -0400] chandrasekhar: C:\Users\anol_roy>knife bootstrap 10.222.21.9 -x root -P root@123 -r "recipe[apa che-practice]" Connecting to 10.222.21.9 10.222.21.9 Starting first Chef Client run... 10.222.21.9 [2014-07-08T13:46:47+05:30] WARN: 10.222.21.9 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * 10.222.21.9 SSL validation of HTTPS requests is disabled. HTTPS connections are still 10.222.21.9 encrypted, but chef is not abl
[2014-07-08 08:20:04 -0400] __julien: it says that node['newrelic']['enabled'] is false
[2014-07-08 08:20:09 -0400] __julien: sortty is nil
[2014-07-08 08:20:33 -0400] __julien: it says undefined method `[]' for nil:NilClass refering to node['newrelic']['enabled'].
[2014-07-08 08:22:03 -0400] __julien: but I don't get why the  node['newrelic']['enabled'] is nil, If i print it (using puts, it's correctly set up to false)
[2014-07-08 08:24:06 -0400] GreatSUN: __julien: perhaps cause it is not set at that time?
[2014-07-08 08:24:32 -0400] GreatSUN: __julien: chef 11 loads files ordered by abc
[2014-07-08 08:24:38 -0400] __julien: GreatSUN, yes  it says nil, but my whole problem is why is it not set
[2014-07-08 08:24:56 -0400] GreatSUN: __julien: if you really need to set attributes that depend on values of others, do it in some recipe
[2014-07-08 08:24:57 -0400] __julien: during the compile phase if I use puts I can see it set up to false
[2014-07-08 08:26:02 -0400] __julien: GreatSUN, I'd rather do it there , appears cleaner to me ,  but mostly I'd like to understand  the problem I have
[2014-07-08 08:28:02 -0400] __julien: basically I have one "master cookbook" , that set ups node attributes and stuff, detects the system configuration, then "expends" the run-list by doing include recipe of other recipes. And there in of the included recipe it seems I can't read an attribute which default value was set from this "master cookbook"
[2014-07-08 08:28:31 -0400] __julien: I think I am missing something in the way the chef-client run works
[2014-07-08 08:29:06 -0400] __julien: using chef solo 11.12.8
[2014-07-08 08:50:20 -0400] lawnchair: is it possible to run through a for loop of attributes inside a erb template
[2014-07-08 08:53:37 -0400] bobo: lawnchair: http://stackoverflow.com/questions/22235295/chef-ruby-loop-over-attributes-in-an-erb-template-file
[2014-07-08 08:53:46 -0400] balbirs: how to do create a node.json file in chef-solo arcitecure.. do we need to create it manually?
[2014-07-08 08:54:32 -0400] lawnchair: bobo, yeah i actually saw that but it's not working out for me
[2014-07-08 08:54:46 -0400] lawnchair: i can't get that block of code to function inside the template
[2014-07-08 08:55:37 -0400] bobo: lawnchair: ok? do you get an error?
[2014-07-08 08:59:22 -0400] lawnchair: lulz had a typo :)
[2014-07-08 08:59:25 -0400] lawnchair: it's working now heh
[2014-07-08 08:59:33 -0400] lawnchair: good talk. see ya out there.
[2014-07-08 09:00:24 -0400] action: i am getting the following err when trying to load an encrypted databag:
[2014-07-08 09:00:25 -0400] action: ERROR: Chef::EncryptedDataBagItem::UnacceptableEncryptedDataBagItemFormat: The encrypted data bag item has format version `', but the config setting 'data_bag_decrypt_minimum_version' requires version `0'
[2014-07-08 09:00:43 -0400] action: the err seems suggesting the encrypted format version is blank (?)
[2014-07-08 09:10:49 -0400] chefgirl: can any one give me a link for installing wordpress blog
[2014-07-08 09:10:50 -0400] chefgirl: ?
[2014-07-08 09:16:41 -0400] GreatSUN: chefgirl: http://lmgtfy.com/?q=chef+cookbook+wordpress+blog
[2014-07-08 09:16:46 -0400] GreatSUN: 2nd result should do the trick
[2014-07-08 09:20:01 -0400] chefgirl: GreatSUN : I have installed apache mysql and php  then how can ni comment that instalaation
[2014-07-08 09:20:47 -0400] GreatSUN: 1. I dont understand what you want to comment and what you mean by comment an installation
[2014-07-08 09:21:06 -0400] GreatSUN: 2. if you want to install something, follow the instructions/readme and it should work
[2014-07-08 09:49:09 -0400] ssd7: ohai chefs
[2014-07-08 09:50:03 -0400] Damacus: chefgirl have you taken a look at the new supermarket sit for cookbooks?
[2014-07-08 09:50:07 -0400] Damacus: ohaai
[2014-07-08 12:59:10 -0400] glnd: hi
[2014-07-08 12:59:56 -0400] glnd: i have the following problem, i can run chef-client -l info to get verbose logging
[2014-07-08 13:00:11 -0400] glnd: but i like to set it info as default
[2014-07-08 13:00:39 -0400] glnd: how can this be easily done?
[2014-07-08 13:00:56 -0400] jonlives: glnd: change the log_level param in your client.rb: http://docs.opscode.com/config_rb_client.html
[2014-07-08 13:01:08 -0400] glnd: yeah
[2014-07-08 13:01:33 -0400] glnd: but that file is overriden by the client cookbook
[2014-07-08 13:02:04 -0400] glnd: and that one doesn't support log_level anymore
[2014-07-08 13:02:38 -0400] glnd: node['chef_client']['log_level']` - Not set anymore, use the
[2014-07-08 13:02:39 -0400] glnd:   default log level and output formatting from Chef 11.
[2014-07-08 13:03:09 -0400] glnd: but where can i set the default log level for Chef 11?
[2014-07-08 13:03:54 -0400] glnd: or do i totally overlook something?
[2014-07-08 13:04:15 -0400] chandrasekhar: can any one provide me any link where i can get chef related questions ?
[2014-07-08 13:04:18 -0400] jonlives: glnd: you'd have to modify that cookbook (or wrap it) to allow that attrib again if you really want it
[2014-07-08 13:04:34 -0400] glnd: k
[2014-07-08 13:04:40 -0400] glnd: i give it a try
[2014-07-08 13:05:19 -0400] jonlives: chandrasekhar: how do you mean?
[2014-07-08 13:05:32 -0400] rsavage: chandrasekhar: you want to ask questions or answer people's questions?
[2014-07-08 13:06:11 -0400] chandrasekhar: nope: i want questions on chef where i can prepare myself
[2014-07-08 13:06:34 -0400] rsavage: you mean like test questions?
[2014-07-08 13:06:35 -0400] jonlives: chandrasekhar: prepare yourself for what?
[2014-07-08 13:06:48 -0400] glnd: or is there an alternative route possible? The problem that i want to investigate only occurs on the first run when the server boots up...
[2014-07-08 13:07:15 -0400] chandrasekhar: like chef certification or whatever
[2014-07-08 13:07:32 -0400] chandrasekhar: is there any site where i can get chef related questions ?
[2014-07-08 13:07:34 -0400] jonlives: chandrasekhar: there currently isn't a formal chef certification
[2014-07-08 13:07:56 -0400] jonlives: chandrasekhar: you might want to check out http://www.getchef.com/training/ though
[2014-07-08 13:08:03 -0400] jonlives: the training materials are free.
[2014-07-08 13:08:11 -0400] chandrasekhar: not exactly
[2014-07-08 13:08:20 -0400] jonlives: glnd: it's not giving the failures in the log file?
[2014-07-08 13:08:53 -0400] jonlives: chandrasekhar: basically I don't think there's any sort of chef test questions out there
[2014-07-08 13:09:00 -0400] jonlives: mainly cos there aren't any chef tests yet
[2014-07-08 13:09:05 -0400] glnd: no
[2014-07-08 13:09:07 -0400] chandrasekhar: ok
[2014-07-08 13:09:15 -0400] glnd: it seems to skip just a section
[2014-07-08 13:09:28 -0400] jonlives: glnd: how are you bootstrapping the node?
[2014-07-08 13:09:29 -0400] bawt: PONG
[2014-07-08 13:10:34 -0400] glnd: the stuff is all on amazon, i'm trying to implement ec-scheduling to auto bring up and tear down of nodes
[2014-07-08 13:10:52 -0400] glnd: so i just stop and start them
[2014-07-08 13:11:01 -0400] glnd: al stuff is working great
[2014-07-08 13:11:10 -0400] jonlives: glnd: and it looks like it's skipping a section of the run>?
[2014-07-08 13:11:10 -0400] bawt: PONG
[2014-07-08 13:11:27 -0400] glnd: bwa :) its hard to tell
[2014-07-08 13:11:56 -0400] jonlives: glnd: so building nodes using knife-ec2?
[2014-07-08 13:12:13 -0400] glnd: it execute the following in bash
[2014-07-08 13:12:26 -0400] glnd: npm install
[2014-07-08 13:12:31 -0400] glnd: and then grunt
[2014-07-08 13:12:46 -0400] glnd: on a normal chef run via cli it runs fine
[2014-07-08 13:13:00 -0400] glnd: but whem i stop/start the node
[2014-07-08 13:13:09 -0400] glnd: then the npm install seems to fail???
[2014-07-08 13:13:23 -0400] glnd: that's what i'm making out of it :)
[2014-07-08 13:13:42 -0400] glnd: when i then run chef-client on the cli
[2014-07-08 13:13:49 -0400] glnd: it runs fine
[2014-07-08 13:13:53 -0400] jonlives: glnd: I'd consider using something like https://supermarket.getchef.com/cookbooks/npm to handle npm installs more nicely
[2014-07-08 13:14:00 -0400] jonlives: it'll likely give you more sensible output
[2014-07-08 13:14:08 -0400] anop: What benefit did you gain by using chef in your environment ?
[2014-07-08 13:14:57 -0400] glnd: @anop it takes a lot of work out of my hands
[2014-07-08 13:15:12 -0400] glnd: and i mean A LOT
[2014-07-08 13:15:51 -0400] glnd: ok i going to give it try
[2014-07-08 13:16:20 -0400] anop: ?
[2014-07-08 13:16:39 -0400] jonlives: glnd: as a general rule, it's best to use LWRP and HWRPs instead of putting a bunch of logic in bash resources
[2014-07-08 13:16:54 -0400] jonlives: for packaging stuff chances are somebody already wrote one :p
[2014-07-08 13:17:14 -0400] anop: Sometime i feel like some tools are more hassle then help. Its alot of market speak
[2014-07-08 13:17:53 -0400] glnd: yes idd
[2014-07-08 13:18:32 -0400] glnd: i still need to study chef a bit better
[2014-07-08 13:19:00 -0400] glnd: you don't want to seem my code currently :)
[2014-07-08 13:22:53 -0400] gchristensen: anop: Being able to rebuild production servers at the drop of a hat is excellent
[2014-07-08 13:23:22 -0400] gchristensen: and configure staging like production, and configuring development like production ...
[2014-07-08 13:24:29 -0400] zeroXten: hi, is it possible that "Chef Supermarket" has broken stove for me?
[2014-07-08 13:28:31 -0400] anop: not sure what you mean gchristensen
[2014-07-08 13:28:45 -0400] anop: you mean if someone want to order a server you can deploy in minuttes?
[2014-07-08 13:29:23 -0400] gchristensen: yeah, and it allows you to be certain that server A is identical to server B - ZZZ
[2014-07-08 13:29:31 -0400] anop: is it any manual work?
[2014-07-08 13:29:35 -0400] gchristensen: and if one server isn't acting correctly, you just shoot it in the head and make a new one
[2014-07-08 13:29:42 -0400] gchristensen: not much
[2014-07-08 13:29:44 -0400] anop: its cluster ?
[2014-07-08 13:30:19 -0400] jonlives: anop: if you're brand new to chef, it might be worth taking a look at http://learn.getchef.com/
[2014-07-08 13:30:20 -0400] anop: can you explain what you do. and seems like you are using some sort of cluster. if some server goes down it will go to another server. load balansing
[2014-07-08 13:31:20 -0400] anop: what is good with chef unlike other tools like puppet ?
[2014-07-08 13:31:44 -0400] gchristensen: puppet and chef are accomplishing the same goal, essentially
[2014-07-08 13:32:34 -0400] jonlives: anop: this page explains chef's views on that: http://docs.opscode.com/chef_why.html
[2014-07-08 13:33:34 -0400] anop: so you can build some sort of cloud jonlives
[2014-07-08 13:33:38 -0400] anop: is it difficult?
[2014-07-08 13:33:39 -0400] anop: tnx
[2014-07-08 13:33:41 -0400] anop: i need to read
[2014-07-08 13:34:22 -0400] jonlives: anop: chef is basically a tool for automating the configuration of your servers. you can do anything with it you could do manually :)
[2014-07-08 13:34:33 -0400] jonlives: just a lot quicker and more repeatably :p
[2014-07-08 13:35:11 -0400] emfl: Hello
[2014-07-08 13:35:14 -0400] anop: chef works on windows server also?
[2014-07-08 13:35:24 -0400] anop: windows application?
[2014-07-08 13:35:48 -0400] jonlives: anop: chef client does, yes
[2014-07-08 13:35:57 -0400] jonlives: the chef server can't be run on windows.
[2014-07-08 13:36:22 -0400] anop: how can i start testing? any cloudsolution i can buy to test the application?
[2014-07-08 13:36:35 -0400] anop: to get a feel of what it is and what it can do for me
[2014-07-08 13:37:13 -0400] emfl: There is a hosted chef solution
[2014-07-08 13:37:36 -0400] emfl: http://www.getchef.com/enterprise-chef/ it's free up to 5 nodes
[2014-07-08 13:37:54 -0400] jonlives: anop: that's why I suggested looking at http://learn.getchef.com
[2014-07-08 13:38:18 -0400] jonlives: lets you try it out via a vm
[2014-07-08 13:38:28 -0400] nulleric: @anop
[2014-07-08 13:38:52 -0400] nulleric: @anop - you can try some local mode stuff in windows, though i dont know if there's a guided tutorial for that
[2014-07-08 13:39:18 -0400] emfl: I have a recipe with a search. And I'm trying to get some attributes out of that search result to work with. However, my recipe somehow just outputs the array of node found instead of the attributes.
[2014-07-08 13:39:37 -0400] emfl: Is it possible to run a specific or a recipe (the search and output part) on my workstation ?
[2014-07-08 13:39:41 -0400] aaronrl: anop: they are redoing their windows stuff on learnchef.getchef.com/windows/ but @juliancdunn has a nice video on youtube that gives a good intro: https://www.youtube.com/watch?v=aanm1Neto1U
[2014-07-08 13:39:44 -0400] emfl: Instead of uploading it to chef-server etc
[2014-07-08 13:40:09 -0400] emfl: (a specific part of a recipe*)
[2014-07-08 13:40:14 -0400] anop: so you would say not say that chef is more hassle than help? I feel like there is alot of tools and alot of market speak.
[2014-07-08 13:41:28 -0400] lhagemann: @anop: chef, like any other tool, has a learning curve. And it provides quite a bit of flexibility, so there can be a bit of refinement necessary to find the solution that works for your situation.
[2014-07-08 13:41:32 -0400] nulleric: @anop leave that up to you, i find it a helps managing my fleet of servers
[2014-07-08 13:42:09 -0400] anop: but what needs does it cover?
[2014-07-08 13:42:12 -0400] lhagemann: But in general having a repeatable, testable, automated method for handling system builds and deployments, including application deployments, is worth the "hassel"
[2014-07-08 13:42:15 -0400] anop: if you already have Vmware ?
[2014-07-08 13:42:42 -0400] anop: just asking to see if its actually helps you
[2014-07-08 13:43:19 -0400] workmad3: anop: vmware doesn't help if you suddenly need to change 50 servers very slightly (e.g. new firewall policy or add a new user)
[2014-07-08 13:43:29 -0400] anop: ok
[2014-07-08 13:43:41 -0400] nulleric: vmware is infrastructure, you'd run chef to configure that infrastructure
[2014-07-08 13:43:55 -0400] nulleric: so say, install tomcat and configure it
[2014-07-08 13:44:03 -0400] anop: lhagemann: what do you need by application deployment ?
[2014-07-08 13:44:16 -0400] nulleric: also we let our devs have access to the chef-recpes, so if they want a change they can propose them and merge (and test)
[2014-07-08 13:44:32 -0400] anop: you can just upload for instance latest version of Java. And users can download it from your page ?
[2014-07-08 13:44:34 -0400] nulleric: s/let our devs have access/share access with the team :)
[2014-07-08 13:44:42 -0400] workmad3: anop: what you could potentially do with vmware is have a 'library' of images... but if you needed to change those images, virtualization provides few tools to easily modify them and roll out those changes across all servers running that image
[2014-07-08 13:45:10 -0400] lhagemann: @anop: putting an application into production, configuring all the servers (DBs, fw rules, creating users, setting server configs, copying source code to correct locations, etc)
[2014-07-08 13:45:17 -0400] anop: seems like market speak workmad3
[2014-07-08 13:46:15 -0400] workmad3: anop: ok... would you prefer it if I just said 'configuration management != infrastructure virtualization'? :P
[2014-07-08 13:46:18 -0400] anop: but it also means consequences lhagemann
[2014-07-08 13:46:31 -0400] anop:  If it frees your operating resources locally by using Cloud
[2014-07-08 13:46:47 -0400] lhagemann: @anop: if you're talking about software (vs system application) then yeah, image on the server, but part of the "deployment" would be to use chef (or puppet) to get the software onto the server in the right folder with the right permissions to permit download
[2014-07-08 13:46:48 -0400] workmad3: anop: haha, you acuse me of 'market speak' and then come out with that gem!
[2014-07-08 13:47:01 -0400] anop: it means you have less work
[2014-07-08 13:47:01 -0400] workmad3: *accuse
[2014-07-08 13:47:05 -0400] jonlives: anop: let me give you a recent example from the place where I work. say you have to install a new piece of software on 1000 servers and configure it
[2014-07-08 13:47:15 -0400] jonlives: chef let us do that by writing a recipe.
[2014-07-08 13:47:15 -0400] anop: if everything is automated = less wor.
[2014-07-08 13:47:23 -0400] anop: less work
[2014-07-08 13:47:52 -0400] jonlives: anop: no, it frees you up to do *other* work instead of spending hours or days manually configuring a bunch of stuff :)
[2014-07-08 13:47:55 -0400] nulleric: everything is automated == different work :)
[2014-07-08 13:48:00 -0400] jonlives: it's not automating you out of a job or anything.
[2014-07-08 13:49:06 -0400] anop: what kind of work jonlives, nulleric?
[2014-07-08 13:49:23 -0400] anop: what kind of work do you get if it frees up your operation resource locally
[2014-07-08 13:49:40 -0400] anop: just have to ask. seems like alot of people dont think about consequences :)
[2014-07-08 13:49:49 -0400] jonlives: anop: what do you see as the consequences?
[2014-07-08 13:50:00 -0400] mattt: jonlives: job security bra
[2014-07-08 13:50:04 -0400] anop: unemployed
[2014-07-08 13:50:09 -0400] nulleric: @anop making the automation better, testing your assumptions, not typing in a command 1000 times, adding new features, solving old backlog problems that you just never had time for.
[2014-07-08 13:50:10 -0400] bawt: PONG
[2014-07-08 13:50:25 -0400] jonlives: anop: i don't know of a single person who got laid off for implementing chef.
[2014-07-08 13:50:32 -0400] anop: what kind of work do you get if it frees up your operation resource locally
[2014-07-08 13:50:36 -0400] jonlives: anop: our team would need to be at least twice the size it is now if we didn't have chef
[2014-07-08 13:50:39 -0400] anop: okk
[2014-07-08 13:50:42 -0400] anop: We are Using SCCM
[2014-07-08 13:50:46 -0400] anop: for software deployment
[2014-07-08 13:50:50 -0400] jonlives: anop: the way I like to put it is I spend a lot more time being proactive than reactive.
[2014-07-08 13:50:52 -0400] workmad3: anop: if all you're doing all day is sshing into 1000 servers and adding a firewall rule, you could be laid off and replaced with a minimum-wage monkey much more easily than if you automated that and were then doing more useful stuff with your time
[2014-07-08 13:51:49 -0400] anop: thats what i am saying
[2014-07-08 13:51:51 -0400] workmad3: anop: more useful stuff like then implementing infrastructure-wide monitoring, able to respond to change requests quickly... that sort of thing is what keeps jobs, not removes them ;)
[2014-07-08 13:52:12 -0400] anop: lets hope people dont get laid of
[2014-07-08 13:52:16 -0400] jonlives: anop: so http://codeascraft.com/ is the blog for the engineering side of the company I work for. if you look at posts like http://codeascraft.com/2014/06/19/opsweekly-measuring-on-call-experience-with-alert-classification/ and http://codeascraft.com/2014/06/06/introducing-nagios-herald/, one of the reasons we have time to do stuff like that is cos we automate everything with chef :)
[2014-07-08 13:52:17 -0400] rbowlby: what's the defacto nodejs cookbook and npm package install method
[2014-07-08 13:52:20 -0400] anop: by implementing these kind of application
[2014-07-08 13:52:27 -0400] jonlives: and that's on top of regular ops work
[2014-07-08 13:52:27 -0400] anop: most people dont think about this
[2014-07-08 13:52:54 -0400] anop: sceptical, jonlives
[2014-07-08 13:53:02 -0400] anop: i have to see it before I believe it
[2014-07-08 13:53:04 -0400] jonlives: anop: it's only a consequence if people are only doing work that chef replaces, ie making configuration changes.
[2014-07-08 13:53:04 -0400] anop: :;P
[2014-07-08 13:53:09 -0400] jonlives: anop: see it how?
[2014-07-08 13:53:17 -0400] workmad3: anop: that's because it's been demonstrated time and again that people who 'remove their jobs' don't get laid off... they get given more work in new areas
[2014-07-08 13:53:19 -0400] mattt: anop: what are you unsure of?  the time investment required?
[2014-07-08 13:53:23 -0400] mattt: (sorry, joined conversation late)
[2014-07-08 13:53:47 -0400] workmad3: mattt: he seems to think that if you automate your infrastructure, it will end up with you losing your job
[2014-07-08 13:54:13 -0400] rbowlby: are we sure he's not a troll?
[2014-07-08 13:54:37 -0400] anop: Well it's not a given that management has considered the consequences by going cloudand by automating something like that reduce operating resources locally
[2014-07-08 13:54:41 -0400] rbowlby: also, if anyone has done nodejs with chef ^ my question above
[2014-07-08 13:54:43 -0400] mattt: WELL YOURE NOT GOING TO KEEP JOB TROLLING INTERNET
[2014-07-08 13:54:45 -0400] anop: workmad3: Jepp
[2014-07-08 13:54:47 -0400] anop: well..
[2014-07-08 13:54:49 -0400] anop: i want to be sure
[2014-07-08 13:55:11 -0400] workmad3: anop: tbh, I'd *prefer* to lose my job by doing it well than keep it and spend days doing menial grunt-work rolling out changes manually
[2014-07-08 13:55:27 -0400] rbowlby: don't feed the trolls, anop go read "Web Operations" from a decade ago and come back.
[2014-07-08 13:56:17 -0400] anop: so you mean it is still work if you go cloud?
[2014-07-08 13:56:42 -0400] workmad3: anop: unsurprisingly, yes... there is still work involved in managing 'cloud' infrastructure
[2014-07-08 13:56:44 -0400] lhagemann: @anop you're conflating several concepts
[2014-07-08 13:56:53 -0400] anop: ok
[2014-07-08 13:56:56 -0400] lhagemann: cloud != automation (although automation helps manage cloud instances)
[2014-07-08 13:58:41 -0400] workmad3: anop: I've been involved in writing reports for high-level management that lays that out to them (along with the different types of 'cloud' systems and the tradeoffs in terms of ownership, control and management costs involved)
[2014-07-08 13:58:44 -0400] anop: yeah
[2014-07-08 13:59:59 -0400] workmad3: anop: that web operations book rbowlby mentioned is a good read btw ;)
[2014-07-08 14:00:13 -0400] mattt: agreed
[2014-07-08 14:00:15 -0400] anop: in my opinion IT operation will change very much in the future. To be appropriate operating personnel in the future 'orchestration' (ie puppet, ansible, chef or equivalent) knowdlege is important rather than hardware knowledge. And I think the focus will move from operation to work process.
[2014-07-08 14:00:18 -0400] anop: :P
[2014-07-08 14:01:07 -0400] workmad3: anop: s/will change in the future/has already changed to/
[2014-07-08 14:01:22 -0400] anop: yeah
[2014-07-08 14:01:26 -0400] anop: not us
[2014-07-08 14:01:34 -0400] workmad3: anop: poor you :P
[2014-07-08 14:01:37 -0400] anop: we are not so modern :P
[2014-07-08 14:01:43 -0400] anop: well atleast i have work looong time
[2014-07-08 14:01:44 -0400] anop: :P
[2014-07-08 14:01:57 -0400] anop: to come to a proper level
[2014-07-08 14:02:29 -0400] anop: But I should not say against the management if they want an application architecture in the cloud?
[2014-07-08 14:02:34 -0400] mattt: anop: look forward to a career filled w/ swapping out bad hard drives and rebooting stuck PCs :P
[2014-07-08 14:02:35 -0400] bawt: PONG
[2014-07-08 14:03:15 -0400] workmad3: anop: lay out the risks, tradeoffs and benefits to them
[2014-07-08 14:03:29 -0400] anop: yes
[2014-07-08 14:03:56 -0400] workmad3: anop: that's your job... it's then their job to decide if those risks are worth the benefits to the business
[2014-07-08 14:04:11 -0400] anop: Like expertise  i have for that product
[2014-07-08 14:04:31 -0400] anop: as long as it covers my needs
[2014-07-08 14:04:35 -0400] anop: yes
[2014-07-08 14:04:51 -0400] workmad3: anop: your expertise doesn't suddenly vanish because the server is a virtualized server in a datacenter halfway around the world ;)
[2014-07-08 14:05:20 -0400] anop: workmad3: is that your own opinion? or you are in management to tell this?
[2014-07-08 14:05:22 -0400] anop: ;)
[2014-07-08 14:05:28 -0400] anop: i am still afraid and the risks
[2014-07-08 14:05:29 -0400] anop: :P
[2014-07-08 14:05:38 -0400] anop: because i am not so familiar with cloud
[2014-07-08 14:06:00 -0400] workmad3: anop: well, stop being afraid of it and start researching it to find out more ;)
[2014-07-08 14:06:19 -0400] anop: thats why i joined channel
[2014-07-08 14:06:20 -0400] anop: i will
[2014-07-08 14:06:22 -0400] workmad3: anop: I mean, when you're talking 'cloud' are you meaning cloud infrastructure? cloud platforms? cloud services? :)
[2014-07-08 14:06:29 -0400] anop: because it seems like cloud knowledge is important
[2014-07-08 14:06:32 -0400] anop: in future
[2014-07-08 14:06:35 -0400] workmad3: anop: or, more modern terms - IaaS, PaaS, SaaS?
[2014-07-08 14:06:43 -0400] anop: workmad3: cloud services
[2014-07-08 14:06:45 -0400] anop: PaaS
[2014-07-08 14:06:48 -0400] anop: Actually
[2014-07-08 14:07:03 -0400] anop: like Apple store
[2014-07-08 14:07:22 -0400] mattt: wut
[2014-07-08 14:07:27 -0400] workmad3: mattt: my thoughts too...
[2014-07-08 14:07:31 -0400] anop: wait.
[2014-07-08 14:07:35 -0400] anop: wait..
[2014-07-08 14:08:07 -0400] aaronrl: http://en.wikipedia.org/wiki/Platform_as_a_service
[2014-07-08 14:08:49 -0400] anop: Solution which borrows the usability of an App-store and idea ofra cloud computing for maintenance and delivery of services. By centralizing everyting and free up resources.
[2014-07-08 14:08:55 -0400] anop: does it make sence?
[2014-07-08 14:08:58 -0400] aaronrl: Apple Store would be closer to SaaS, if i had to clasify it (it's more like a package repo like rpm/apt tbh)
[2014-07-08 14:09:01 -0400] workmad3: anop: not particularly...
[2014-07-08 14:09:14 -0400] workmad3: aaronrl: I wouldn't class it as any of those things :)
[2014-07-08 14:09:29 -0400] workmad3: apple store is a software distribution platform
[2014-07-08 14:09:32 -0400] aaronrl: no idea why i added parens lol
[2014-07-08 14:11:21 -0400] workmad3: anop: ok... so I guess what your management is wanting to do is almost provide an 'app store' type mechanism to install software on servers, which you are worried will remove your job because your job is primarily around configuring one or more of the systems planned to be packaged up in this way?
[2014-07-08 14:11:31 -0400] anop: Basically a common model for for collaboration and delivery of services..
[2014-07-08 14:11:46 -0400] anop: workmad3: epp
[2014-07-08 14:11:47 -0400] anop: jepp
[2014-07-08 14:12:04 -0400] workmad3: anop: ok... and who do you think would be writing and updating the scripts used to install the package?
[2014-07-08 14:12:15 -0400] workmad3: anop: or packages?
[2014-07-08 14:12:16 -0400] anop: so it is still work
[2014-07-08 14:12:17 -0400] anop: good
[2014-07-08 14:12:26 -0400] StFS: Hi. We're creating cookbooks for our software but it feels to me as if we're uncomfortably mixing together provisioning, deployment and lifecycle management of our servers/applications. Does anybody know of some good reading material about this stuff?
[2014-07-08 14:12:26 -0400] anop: so you cant just "uploaD"
[2014-07-08 14:12:44 -0400] workmad3: anop: well, you *can*, but it doesn't then 'just work' when you download it
[2014-07-08 14:13:11 -0400] workmad3: anop: that would be like saying you just 'upload' a tarball and then don't need any sort of scripting or configuration to then install that tarball in the desired environment
[2014-07-08 14:13:21 -0400] StFS: something that would explain best practices in how to split up your recipes for complete lifecycle management... don't really know if I'm getting this out right :-/
[2014-07-08 14:14:16 -0400] workmad3: anop: it can take a crapload of effort to initially package a complicated software system up in a way that works even on > 50% of the target systems reliably
[2014-07-08 14:14:27 -0400] anop: we are using SCCM today
[2014-07-08 14:14:31 -0400] anop: alt of headac
[2014-07-08 14:14:34 -0400] anop: *lot of
[2014-07-08 14:14:48 -0400] anop: but there is alot of challenges
[2014-07-08 14:15:06 -0400] anop: migration from existing solutions, privacy, data storage, integration of solutions from different vendors, scaling, and business models.
[2014-07-08 14:15:19 -0400] anop: i am a bastard i would only list of consequences :)
[2014-07-08 14:15:21 -0400] anop: *if
[2014-07-08 14:15:33 -0400] workmad3: anop: exactly... those things don't just vanish because you've packaged it up differently for distribution
[2014-07-08 14:15:49 -0400] anop: still not sure what it means in practice
[2014-07-08 14:15:58 -0400] anop: but time will show
[2014-07-08 14:16:10 -0400] workmad3: anop: if you only list risks, the business-oriented people will assume you are hiding stuff from them and pretty much ignore what you say
[2014-07-08 14:16:30 -0400] workmad3: anop: because they all expect there to always be tradeoffs and benefits to just about anything ;)
[2014-07-08 14:16:31 -0400] anop: ok
[2014-07-08 14:17:02 -0400] anop: :P
[2014-07-08 14:17:03 -0400] anop: are you familiar with SOA?
[2014-07-08 14:17:12 -0400] workmad3: familar enough
[2014-07-08 14:19:16 -0400] anop: soa is some sort of application architecture in the cloud.
[2014-07-08 14:19:25 -0400] anop: I think they will start with this.
[2014-07-08 14:19:30 -0400] anop:  But if they start with application architecture it would be easier sneak introduce the whole infrastructure?
[2014-07-08 14:19:31 -0400] anop: but if you say that it is not dangerous to offer the entire infrastructure also as cloud it is ok.
[2014-07-08 14:19:37 -0400] anop: in your opinion
[2014-07-08 14:19:44 -0400] anop: are you by the way in the management seat?
[2014-07-08 14:20:06 -0400] anop: :P
[2014-07-08 14:20:06 -0400] mattt: anop: i'm ceo
[2014-07-08 14:20:15 -0400] anop: ok:)
[2014-07-08 14:20:39 -0400] anop: be nice to the staff they are only human
[2014-07-08 14:32:08 -0400] emfl: I have trouble working with search inside a recipe
[2014-07-08 14:32:23 -0400] emfl: Can I copy some script here (5/6 lines) or should I use pastebin ?
[2014-07-08 14:32:55 -0400] workmad3: anop: please don't PM without asking first
[2014-07-08 14:33:04 -0400] workmad3: anop: and I became quiet because I have work I need to get on with :P
[2014-07-08 14:33:30 -0400] workmad3: emfl: pastie.org or gist.github.com preferably
[2014-07-08 14:34:01 -0400] workmad3: emfl: pastebin.com is one of the worst pastebins around atm ;)
[2014-07-08 14:34:25 -0400] emfl: ok duly noted.
[2014-07-08 14:34:41 -0400] emfl: So if someone can help me with this : http://pastie.org/private/hpzf2mll2g5sraqwrotya I would very much appreciate it
[2014-07-08 14:35:02 -0400] emfl: All I get is node[node1],node[node2],node[node3] as output
[2014-07-08 14:35:12 -0400] emfl: Where I would expect to get hostname:port,hostname:port etc
[2014-07-08 14:37:28 -0400] emfl: this is probably more of a ruby question than chef ...
[2014-07-08 14:43:43 -0400] lhagemann: @StFS: your question was lost in the conversation, perhaps I can share a tad bit of insight. I too had a similar challenge/set of questions. What I've seen from our esteemed automation guru's here @ $work is a seperation of cookbooks approach.
[2014-07-08 14:44:19 -0400] lhagemann: there are cookbooks related specifically to the infrastructure (i.e. DBs, webservers, system configuration, users)
[2014-07-08 14:45:07 -0400] lhagemann: then the application cookbook is specific to setting up the application (app specific users, directory permissions, configuration templates etc) which use the other cookbooks.
[2014-07-08 14:46:09 -0400] lhagemann: so, for example, specific Apache configuration would be handled within application cookbook via attributes and possibly templates, inheriting from the common apache cookbook (we host our own version of community cookbooks for this purpose)
[2014-07-08 14:46:16 -0400] lhagemann: hth
[2014-07-08 14:50:57 -0400] StFS: lhagemann: thanks... it does help... but I'm still wondering a little about the difference between the setting up (provisioning) and lifecycle management (starting and stopping services, upgrading in-house software etc). I'd love to see something covering the transition from a build system over to a dev/test environment and what practices to appy to use chef
[2014-07-08 14:50:58 -0400] StFS: in that transition.
[2014-07-08 14:50:58 -0400] bawt: PONG
[2014-07-08 14:56:55 -0400] rsavage: Anyone using CentOS 7 with Chef yet?
[2014-07-08 14:57:32 -0400] jonlives: s/with Chef// :p
[2014-07-08 14:59:45 -0400] rsavage: jonlives :)  I figured there would be quicker adopters here.
[2014-07-08 15:09:06 -0400] lhagemann: @StFS: I would look at the http://codeascraft.com blog for ideas. A couple of posts that seem to address your questions are http://codeascraft.com/2011/04/20/divide-and-concur/ && http://codeascraft.com/2011/02/04/how-does-etsy-manage-development-and-operations/ (I admit that the CI side of automation is still an enigma for me, but it's happening all over)
[2014-07-08 15:09:50 -0400] jonlives: lhagemann: StFS although it's worth clarifying that we don't actually deploy code with chef
[2014-07-08 15:12:56 -0400] StFS: jonlives: "we" being? etsy? Can you briefly explain how the "handoff" works? Is chef only used to provision servers? What handles the deployment of new versions?
[2014-07-08 15:18:29 -0400] mattstratton: StFS: jonlives has talked about how they use Chef at Etsy on a couple eps of the FFS, for example: http://foodfightshow.org/2012/05/episode-11-etsy-examined-how-best-do.html
[2014-07-08 15:18:44 -0400] gyoza: is it a waste of energy to write a greasemonkey script to automatically tick the MFA token box?
[2014-07-08 15:18:50 -0400] gyoza: lol
[2014-07-08 15:19:23 -0400] mattstratton: StFS or also https://www.youtube.com/watch?v=slF72K03ixM
[2014-07-08 15:19:40 -0400] jtimberman: StFS: here's a presentation I did a couple years ago about my thoughts on the matter http://www.slideshare.net/jtimberman/socal-piggiesappdeploy
[2014-07-08 15:19:42 -0400] gyoza: yesterday my boss was like
[2014-07-08 15:19:52 -0400] gyoza: "we're going to be using chef knife fork spoon for deployment"
[2014-07-08 15:19:54 -0400] jtimberman: some context is lost as you don't get my witty jokes
[2014-07-08 15:19:54 -0400] gyoza: and it was lol
[2014-07-08 15:20:37 -0400] mattstratton: every demo I give, someone decides to bring up that chef should call them "ingredients" not "resources" :)
[2014-07-08 15:21:22 -0400] jtimberman: mattstratton: there's only so far you can take the metaphor before it becomes meaningless nonsense :)
[2014-07-08 15:22:13 -0400] jonlives: jtimberman: yes, the delicious cake that is chef puns does turn into a rather tasteless gruel after a while :p
[2014-07-08 15:22:29 -0400] mattstratton: @jtimberman I actually think that if someone thinks that it should be "ingredients" it means I did a less than stellar job explaining what resources are
[2014-07-08 15:22:42 -0400] jtimberman: mattstratton: ha!
[2014-07-08 15:22:52 -0400] jtimberman: jonlives: this coming from the man who wrote a tool called spork
[2014-07-08 15:35:45 -0400] jonlives: jtimberman: touche :p
[2014-07-08 15:35:48 -0400] boombalo_: guys, I came across this Chef::Recipe.send(:include, Windows::Helper) and that is crashing my chef run
[2014-07-08 15:36:16 -0400] boombalo_: is that a Chef core module ?
[2014-07-08 15:36:21 -0400] boombalo_: Windows...
[2014-07-08 15:36:36 -0400] boombalo_: im guessing this is including some Windows Helpers in the recipe...
[2014-07-08 15:36:41 -0400] jtimberman: jonlives: <3
[2014-07-08 15:36:48 -0400] boombalo_: but Im wondering where are they actually :-)
[2014-07-08 15:36:59 -0400] jtimberman: boombalo_: the "windows" cookbook.
[2014-07-08 15:37:11 -0400] boombalo_: ah....I see...need to have that as depedency
[2014-07-08 15:37:20 -0400] boombalo_: and this thing cookbook deosnt have it! Darn
[2014-07-08 15:37:23 -0400] boombalo_: thanks jtimberman
[2014-07-08 15:37:23 -0400] jtimberman: https://github.com/opscode-cookbooks/windows/blob/master/libraries/windows_helper.rb
[2014-07-08 15:37:41 -0400] boombalo_: awesome
[2014-07-08 15:37:56 -0400] boombalo_: I did google it...but was asking wrong question of google haha
[2014-07-08 15:41:46 -0400] anop: :P
[2014-07-08 15:43:22 -0400] anop: this book http://shop.oreilly.com/product/0636920000136.do ?
[2014-07-08 15:49:51 -0400] jessemdavis: anop: ys
[2014-07-08 15:49:52 -0400] jessemdavis: yes
[2014-07-08 15:53:29 -0400] __julien: Hello, I'd like my LWRP to deal with node attributes in order to modify its attributes  by executing specific environment recipes  ( in non-LWRP recipes, I have stuff like include_recipe "#{@cookbook_name}::_platform-#{node['platform']}" . I'd like to do the same with the LWRP : can I do that ( even with dirty hacks)  ? do I have the right angle to the problem ?
[2014-07-08 15:54:08 -0400] __julien: I do not wanna pass my environment to the LWRP and then have lots of case an so on within the actions
[2014-07-08 15:54:34 -0400] aanand_: how does search on run_list work?
[2014-07-08 15:54:46 -0400] aanand_: does it search the local run_list of a node where chef-client is running
[2014-07-08 15:54:48 -0400] aanand_: ?
[2014-07-08 15:54:53 -0400] gyoza: http://pastebin.com/vxSgsKmj in case anybody is lazy
[2014-07-08 15:54:56 -0400] aanand_: or does it search the server?
[2014-07-08 15:55:23 -0400] jreslock: aanand: It searches the solr index on the server.
[2014-07-08 15:55:48 -0400] jtimberman: aanand_: search queries are against the Chef Server through the /search API endpoint using a [slightly modified] lucene search query syntax. each separate node stored by the chef server has its entire node object (a JSON data structure) indexed for search.
[2014-07-08 15:56:12 -0400] aanand_: so...if I add run_list to 3 nodes before running chef-client....then I run the chef-client and search for nodes...it should see all the 3 nodes...correct?
[2014-07-08 15:56:46 -0400] gyoza: did you guys hear in brazil 20million samsung phones were stolen at gunpoint? heh
[2014-07-08 15:56:52 -0400] jtimberman: aanand_: so to search the run list: "run_list:recipe\:\:apache2" would find the nodes that have 'recipe[apache2]' in their run list directly. the colons are escaped with backslash because ":" isn't valid in lucene (it's what separates the search key from the search value, basically)
[2014-07-08 15:57:22 -0400] aanand_: is there a run_list tag....I am using "role:" tag
[2014-07-08 15:58:19 -0400] gondoi: what the... I don't get it.. i added `gem 'stove', '>= 3.0'` to my gemfile and some of my gems _downgraded_
[2014-07-08 15:58:23 -0400] gondoi: including chef:
[2014-07-08 15:58:33 -0400] gondoi: Installing chef 11.6.0 (was 11.12.8)
[2014-07-08 15:58:35 -0400] gondoi: what the what
[2014-07-08 15:58:59 -0400] gondoi: anyone seen this?
[2014-07-08 16:01:25 -0400] jreslock: aanand_: knife search node 'somerecipe' --run-list
[2014-07-08 16:01:50 -0400] aanand_: does it accept run_list in search() method?
[2014-07-08 16:02:01 -0400] gyoza: gondoi: were you using --pre-release before?
[2014-07-08 16:13:44 -0400] bricker`work: I see that "user" and "owner" both work on directory and file resources, but "user" isn't documented. These are the same thing, right? Just 'user' is deprecated?
[2014-07-08 16:16:20 -0400] vt102: is there a chef workstation environment switcher anywhere?  To jump back and forth between different chef servers (dev, prod, etc...)
[2014-07-08 16:18:57 -0400] cheeseplus: vt102: there is https://github.com/greenandsecure/knife-block
[2014-07-08 16:18:58 -0400] jonlives: vt102: https://github.com/greenandsecure/knife-block works for using multiple knifes
[2014-07-08 16:19:04 -0400] jonlives: snap :p
[2014-07-08 16:19:16 -0400] cheeseplus: we require sibling resolution
[2014-07-08 16:20:25 -0400] cheeseplus: vt102: the only catch is that it isn't aware of berkshelf configs
[2014-07-08 16:21:55 -0400] zts: knife-block does indeed switch berkshelf configs, if you put them in the right place (with the right names)
[2014-07-08 16:22:29 -0400] gleam: the only catch i'm aware of now is that the current knife-block version doesn't work with the current chefdk version
[2014-07-08 16:22:34 -0400] gleam: but that's a very easy 2-line fix
[2014-07-08 16:23:05 -0400] gleam: oh i guess that got merged, nevermind
[2014-07-08 16:23:07 -0400] gleam: https://github.com/greenandsecure/knife-block/pull/21
[2014-07-08 16:23:13 -0400] PeteJ: ah activity awesome!
[2014-07-08 16:23:16 -0400] pk_: I was gonna say.... "works for me"
[2014-07-08 16:23:35 -0400] gleam: yeah, 0.1.1 does but 0.1.0 doesn't
[2014-07-08 16:24:12 -0400] pk_: ah yes...I'm on 0.1.1
[2014-07-08 16:24:29 -0400] PeteJ: hi guys, I am working on a chef install over a range of VMs and so far so good, but i have ascript that goes to each machine and does a forced run of the chef-client , but im finding often what is happening is the chef client seems to stall or wait for long period of time after displaying the pid for the process, this isn't with all machines...
[2014-07-08 16:24:49 -0400] cheeseplus: zts: ah yea, I was thinking of this issue - https://github.com/greenandsecure/knife-block/issues/20
[2014-07-08 16:25:01 -0400] PeteJ: I was wondering if anyone has come across this also, how to deal with it, or what tweeks if any could be suggested
[2014-07-08 16:25:57 -0400] adamleff: PeteJ: those machines connected to LDAP or other directory with lots of users/groups?
[2014-07-08 16:27:30 -0400] PeteJ: I am running chef-client to open-Chef-Server
[2014-07-08 16:28:25 -0400] PeteJ: Adamleff: I am running chef-client to open-Chef-Server, so ldap doesn't really come into it, at least I didn't think it did
[2014-07-08 16:29:05 -0400] adamleff: PeteJ: understood.  But are those machines connected to an LDAP server or simialr for authentication.  At the beginning of every chef-client run, it runs Ohai, and the passwd plugin will walk your entire LDAP tree to get users/groups and shove them into your node object.
[2014-07-08 16:29:10 -0400] PeteJ: the machines are windows
[2014-07-08 16:29:22 -0400] gleam: connected to an AD server?
[2014-07-08 16:29:26 -0400] adamleff: Connected to Active Directory?
[2014-07-08 16:29:45 -0400] PeteJ: really? but im not using ldap auth with the chef server
[2014-07-08 16:29:57 -0400] adamleff: PeteJ: the Ohai stuff happens on the client, not the server.
[2014-07-08 16:29:58 -0400] gleam: ohai collects info about the local host
[2014-07-08 16:30:01 -0400] vt102: cheeseplus, jonlives, zts, gleam: thanks, I will check out knife-block
[2014-07-08 16:30:03 -0400] gleam: it gets a list of all of the users on the machine
[2014-07-08 16:30:06 -0400] PeteJ: and the script i run, runs the client locally
[2014-07-08 16:30:28 -0400] adamleff: PeteJ: try this - in your client.rb (I believe its in c:\chef on windows), add this line:
[2014-07-08 16:30:29 -0400] adamleff: Ohai::Config[:disabled_plugins] = ["passwd", :Passwd]
[2014-07-08 16:30:33 -0400] PeteJ: adamleff: well the clients are on windows boxes
[2014-07-08 16:30:50 -0400] adamleff: (passwd listed twice to catch Ohai 6 and Ohai 7 - the plugin names changed)
[2014-07-08 16:30:54 -0400] PeteJ: adamleff: so its your standard AD mixbag for user authentication
[2014-07-08 16:31:40 -0400] PeteJ: adamleff: ok will give this a try
[2014-07-08 16:31:41 -0400] adamleff: PeteJ: try what I said above to rule it out.  Otherwise, run chef-client with -l debug and see if you can tell where its hanging.  Expect a lot of error-like output from Ohai plugins as theyre designed to fail silently otherwise if they dont apply, cant run, etc. so your chef-client run doesnt get hosed in the process.
[2014-07-08 16:32:27 -0400] vt102: Not sure knife-block will work for me...I also have to switch between cloud environment separate from chef servers...
[2014-07-08 16:33:13 -0400] vt102: Or have n! different knife config files!
[2014-07-08 16:36:02 -0400] zts: cheeseplus: aha, that's good to be aware of - thanks
[2014-07-08 16:36:43 -0400] cheeseplus: vt102: you can also just drop the knife.rb in any directory you'd like to work out of and knife will pick that up first
[2014-07-08 16:37:12 -0400] PeteJ: Thanks adamleff will give it a go
[2014-07-08 16:37:13 -0400] cheeseplus: still a proliferation of knife configs, just where you store them changes
[2014-07-08 16:37:18 -0400] jonlives: you could even use chef to drop the knife.rb files in the right place ;)
[2014-07-08 16:37:31 -0400] cheeseplus: (yodawg)
[2014-07-08 16:38:20 -0400] zts: you could also avoid hardcoding cloud details in your knife.rb - use environment variables, load a file with the (correct/current) cloud config, etc
[2014-07-08 16:38:49 -0400] geggam: anyone have a cloudformer create ha chef script ?
[2014-07-08 16:44:54 -0400] shlant: anyone using the application_ruby LWRP? I can't get unicorn started
[2014-07-08 16:46:21 -0400] PeteJ: adamleff : alass I don't think it was the password plugin for ohai
[2014-07-08 16:46:51 -0400] adamleff: bummer.  Running with log_level debug should help you pin point where its hanging, or at least what it was doing right before it started hanging to help identify the culprit.
[2014-07-08 16:58:22 -0400] PeteJ: <found an error that is odd> : Plugin Memory threw exception #<LoadError: cannot load such file -- sigar
[2014-07-08 17:00:20 -0400] PeteJ: [2014-07-08T09:56:14-07:00] DEBUG: Plugin Memory threw exception #<LoadError: cannot load such file -- sigar> c:/opscode /chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
[2014-07-08 17:01:04 -0400] adamleff: again, likely to occur in Ohai plugins, which may not be applicable to running on windows, or may not have native packages available, etc.
[2014-07-08 17:01:15 -0400] PeteJ: ok
[2014-07-08 17:02:51 -0400] PeteJ: it's just a little odd, and a bit confusing why it waits, eventually it will some times complete after a long break, but other times it could be sitting there on a machine at the PID declair line for ... days or sometimes never eventually does its run
[2014-07-08 17:05:01 -0400] adamleff: so, thats the purpose of me suggesting you run it a few times with -l debug - capture the full output on a good, quick run and save it.  Then, when it hangs, make a note as to the last 10 lines or so of where it hung, and compare it to the good output.  If Im right, and theres an Ohai plugin thats causing the hang, youll at least know where to look next.
[2014-07-08 17:08:35 -0400] zarry: Does anyone have any experience using the mysql cookbook for a master/slave type setup?
[2014-07-08 17:26:07 -0400] someara: zarry sure whats up
[2014-07-08 17:26:58 -0400] zarry: someara: there is not much documentation about clustering and master/slave on the https://github.com/opscode-cookbooks/mysql page
[2014-07-08 17:27:08 -0400] zarry: was wondering if there is clearer documentation for that sort of setup anywhere.
[2014-07-08 17:27:45 -0400] rbowlby: question, just moved to berkshelf and added some simple integration tests to a wrapper cookbook for the community users cookbook. Just realized the data bags are in the main repo, how do I test this wrapper cookbook?
[2014-07-08 17:29:36 -0400] someara: zarry the documentation is pretty clear that its "bring your own mysql config"... you create a 'mysql_service[default]' resource on each of your nodes, then drop off a configuration file
[2014-07-08 17:29:38 -0400] ambientsound: test with mock data bags, rbowlby?
[2014-07-08 17:30:04 -0400] someara: so on your master, /etc/mysql/conf.d/mysite.cnf would do matery thing, and on your slaves, /etc/mysql/conf.d/mysite.cnf would do slavey things
[2014-07-08 17:30:12 -0400] someara: you can put whatever bits you see fit in there
[2014-07-08 17:30:24 -0400] vt102: Opinions on a better way to manage users than the community users cookbook?
[2014-07-08 17:30:39 -0400] johnmark: question on supermarket
[2014-07-08 17:30:40 -0400] zarry: ok, so just dropping a different conf.d template is really all thats needed
[2014-07-08 17:30:41 -0400] bawt: PONG
[2014-07-08 17:30:46 -0400] someara: if you want to hard code network topology, go for it... if you want to use search(), go for it... if you want to specify particular interfaces, go for it
[2014-07-08 17:30:52 -0400] rbowlby: ambientsound, thanks. Is there a way to move the databags to the users wrapper cookbook repo?
[2014-07-08 17:31:09 -0400] johnmark: re: supermarket - does it let me apply tags to cookbooks?
[2014-07-08 17:31:10 -0400] someara: open to suggestions about documentation improvements
[2014-07-08 17:31:19 -0400] someara: I merged a documentation PR just the other day
[2014-07-08 17:31:22 -0400] johnmark: so that I can view cookbooks by tag? or even create a feed based on a tag?
[2014-07-08 17:31:23 -0400] zarry: that works for me. I might prefer search. do you find most hardcode or do search?
[2014-07-08 17:31:54 -0400] someara: zarry it depends on the consumer... some people love search, some people want to hard code everything in their recipes
[2014-07-08 17:32:29 -0400] someara: the mysql_service resource was purposefully designed to be flexible enough to handle any configuration.... by avoiding the configuration =)
[2014-07-08 17:32:42 -0400] zarry: ok. cool let me hack away for a bit and see where I land.  If I find some useful documentation out of the work I will fork and get a pr your way.
[2014-07-08 17:33:06 -0400] ambientsound: rbowlby: tests/integration/data_bags, I think
[2014-07-08 17:33:12 -0400] someara: keep in mind that mysql_service is the resource you'll want to notify/subscribe your configuration to
[2014-07-08 17:33:44 -0400] rbowlby: thanks, but what about just full on moving the users related databags OUT of the main chef repo and into this wrapper cookbook repo?
[2014-07-08 17:33:46 -0400] rbowlby: ambientsound ^
[2014-07-08 17:35:34 -0400] zarry: Thank you someara!
[2014-07-08 17:37:30 -0400] ambientsound: rbowlby: I wouldn't know, sorry...
[2014-07-08 17:37:51 -0400] rbowlby: no worries, thanks
[2014-07-08 17:44:21 -0400] Majost: Is there any negative impact to no using the upgrade command when  upgrading open-source chef? I am currently managing the server using the chef-server cookbook, so I am concerned about upgrading it via the cookbook will skip some steps which are done exclusively by the upgrade command.
[2014-07-08 17:44:48 -0400] holoway: Majost: I haven't looked at the cookbook, but it should issue an upgrade after installing a new version
[2014-07-08 17:45:01 -0400] mmzyk: Majost No. The intent of the upgrade command is convenience.
[2014-07-08 17:45:09 -0400] Majost: mmzyk: cool, thanks
[2014-07-08 17:45:16 -0400] jonlives: ohai chefs: in case any of you have time for some (paid) tech reviewing in the next week or so: https://twitter.com/jonlives/status/486564699300184064
[2014-07-08 17:45:25 -0400] jonlives: (needs to be non-chef employees sadly)
[2014-07-08 17:45:37 -0400] gchristensen: as a technical editor? or reviewr
[2014-07-08 17:45:43 -0400] mmzyk: I know for 11.1.3 both the upgrade command the cookbook path were tested, although it appears in some cases the upgrade command has an issue that were looking into, Majost.
[2014-07-08 17:46:13 -0400] whiteadam: jonlives: Psh, I'm already doing it for free. On Ch 4
[2014-07-08 17:46:14 -0400] jonlives: gchristensen: to quote my editor: "this would be an in-depth review, checking code examples, leaving notes on the PDF, and filling out a questionnaire"
[2014-07-08 17:46:21 -0400] gchristensen: sounds like a TE to me
[2014-07-08 17:46:29 -0400] jonlives: whiteadam: if you've got the time you can get paid for it :p
[2014-07-08 17:46:41 -0400] jonlives: gchristensen: most likely, not sure of the terminology myself :p
[2014-07-08 17:46:44 -0400] whiteadam: jonlives: hah, probably not. I'm out on vacation for the next week or two
[2014-07-08 17:46:49 -0400] jonlives: dang.
[2014-07-08 17:47:02 -0400] whiteadam: i know right
[2014-07-08 17:47:05 -0400] whiteadam: first time in years
[2014-07-08 17:47:11 -0400] tequilarista: lf
[2014-07-08 17:47:28 -0400] whiteadam: Anyone have a logstash init script for RHEL? LS v 1.4+
[2014-07-08 17:47:56 -0400] whiteadam: The template in the LS cookbook I found is for the old java version
[2014-07-08 18:06:58 -0400] shlant: anyone have any info on how to spin up a ec2 instance from a recipe?
[2014-07-08 18:07:10 -0400] shlant: like creating a redis instance and then using it in templates
[2014-07-08 18:07:20 -0400] shlant: is it possible?
[2014-07-08 18:07:23 -0400] viglesias: shlant: you should look at chef-metal
[2014-07-08 18:07:52 -0400] shlant: viglesias: ah yes, that's what I want
[2014-07-08 18:07:53 -0400] shlant: thanks
[2014-07-08 18:14:09 -0400] hltbra: when I run chef 11.12.8 daemonized it does not write stdout to the log file. I couldn't find anyone with the same issue
[2014-07-08 18:14:17 -0400] hltbra: is it a known bug?
[2014-07-08 18:14:28 -0400] hltbra: when -d option is passed I only see WARN logs
[2014-07-08 18:21:16 -0400] shlant: viglesias: do you know how to specify ec2 instance details with chef-metal? I am reluctant to use this with such little documentation
[2014-07-08 18:21:39 -0400] shlant: nm found it!
[2014-07-08 18:24:50 -0400] Alayde: Is there a way to concat attributes together? So if I have say default['string'] = 'text1' and wanted another attribute default['string2'] to contain default['string'] and have addtional text. tl;dr can I concat attributes together, similar to ::file.join?
[2014-07-08 18:27:00 -0400] zarry: Alayde: default[:string2] = default[:string] + "text2"
[2014-07-08 18:27:11 -0400] zarry: something like that should be what you are looking for I think
[2014-07-08 18:27:13 -0400] shlant: zarry: beat me to it
[2014-07-08 18:28:39 -0400] Alayde: zarry, shlant: righteous, thanks
[2014-07-08 18:34:49 -0400] s1991: on vagrant up, after "INFO: Start handlers complete." Why is it taking too long time
[2014-07-08 18:40:23 -0400] s1991: ???
[2014-07-08 18:44:54 -0400] anop: Is it possible to automate backup or network with chef?
[2014-07-08 18:46:30 -0400] PeteJ: hey guys
[2014-07-08 18:46:51 -0400] PeteJ: Pete back here again about that same delay problem happing with my windows clients across a VM fleet
[2014-07-08 18:46:51 -0400] bawt: PONG
[2014-07-08 18:47:08 -0400] PeteJ: I have updated the client.rb file to include :
[2014-07-08 18:47:19 -0400] PeteJ: Ohai::Config::disabled_plugins= [  #  # ref: http://www.slideshare.net/opscode/chef-conf-windowsdougireton # slide 30  # ohai plugins that have poor performance or are irrelevant to windows  #  "c", "cloud", "ec2", "rackspace", "eucalyptus", "command", "dmi", "dmi_common",  "erlang", "groovy", "ip_scopes", "java", "keys", "lua", "mono", "network_listeners",  "passwd", "perl", "php", "python", "ssh_host_key", "uptime", "virtualization", 
[2014-07-08 18:48:10 -0400] PeteJ: This seems to have sped up some of the run, but I still have the hanging problem occuring, client starts, declairs the pid, then waits.
[2014-07-08 18:48:35 -0400] PeteJ: it isn't on all clients, but the debug doesn't show any cause.
[2014-07-08 18:50:49 -0400] rellis: What cookbook would normally be used to partition a disk?
[2014-07-08 18:51:01 -0400] rellis: in particular ephemeral storage devices on ec2
[2014-07-08 18:57:13 -0400] PeteJ:  debug only comes up with - "DEBUG: No data to collect for plugin Lsb. Continuing" is the point that it stops and waits
[2014-07-08 18:57:40 -0400] drywheat: what's the best attr to use for counting the cpus on a server
[2014-07-08 18:57:42 -0400] amjibaly: I have a helper method in two recipes, what is the correct way to DRY that up with chef?
[2014-07-08 18:57:52 -0400] drywheat: node['cpu']['total'] ?
[2014-07-08 18:58:32 -0400] amjibaly: is there a common file that all recipes use as a library?
[2014-07-08 19:00:06 -0400] gondoi: gyoza: no, i simply added that line and said `bundle update`
[2014-07-08 19:00:14 -0400] gondoi: stove was not previously installed
[2014-07-08 19:02:10 -0400] PeteJ: Lsb isn't needed for windows im gathering?
[2014-07-08 19:03:44 -0400] PeteJ: anyone
[2014-07-08 19:03:45 -0400] PeteJ: ?
[2014-07-08 19:03:51 -0400] jreslock: PeteJ: The lsb plugin is Linux-specific.
[2014-07-08 19:04:01 -0400] jreslock: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/linux/lsb.rb
[2014-07-08 19:04:13 -0400] gyoza: stupid client keeps ignoring my tickets and insisting on calling the office to speak to me
[2014-07-08 19:04:17 -0400] gyoza: everytime i dont call her back
[2014-07-08 19:04:31 -0400] PeteJ: jreslock thankyou
[2014-07-08 19:04:32 -0400] gyoza: and send her an email explaining that talking to me for an hour will cost her more than she pays us per month
[2014-07-08 19:04:41 -0400] gyoza: shes just not getting it
[2014-07-08 19:10:58 -0400] lawnchair: i'm getting Cannot allocate memory - fork(2) enom errors when executing bash in a recipe....
[2014-07-08 19:11:01 -0400] lawnchair: but the box has plenty of memory
[2014-07-08 19:11:07 -0400] lawnchair: any thoughts?
[2014-07-08 19:12:22 -0400] sysbot: got a chef class and recipe question. im writing a class in a cookbook, one of the class method set a variable in an instance of the class, that work fine when i use the class directly. when i spawn a new instance of the same class in a recipe, call the same method, the new instance of class in the recipe doesn't update. anyone got any ideas?
[2014-07-08 19:16:11 -0400] rbowlby: I want to decouple berkshelf from my local user account. Is there a way to do that? I want my personal use of berkshelf/chef to not affect my work use, under the same workstation user.
[2014-07-08 19:16:32 -0400] dougireton: I think my question got dropped. Is there a way to do a case-insensitive knife search, e.g. knife search node 'name:my_node' which finds 'my_node' and 'MY_NODE'?
[2014-07-08 19:16:40 -0400] rbowlby: so have the berkshelf cookbooks located at chef-repo/.berkshelf instead of ~/.berkshelf
[2014-07-08 19:16:42 -0400] rbowlby: ? ^
[2014-07-08 19:17:13 -0400] mattberther: rbowlby: berks vendor?
[2014-07-08 19:17:33 -0400] rbowlby: mattberther, I don't think that's what I'm looking for
[2014-07-08 19:18:09 -0400] rbowlby: I believe what I want is to have the berkshelf cookbooks located in the chef repo (with .gitignore modified appropriately).
[2014-07-08 19:18:39 -0400] rbowlby: that way I can have two separate berkshelfs, one personal and one work
[2014-07-08 19:18:48 -0400] mattberther: according to the docs, the berks vendor command outputs all the cookbooks from your berkfile to pwd/berks-coobooks
[2014-07-08 19:19:10 -0400] rbowlby: yeah, I'd rather not have a manual step though
[2014-07-08 19:19:27 -0400] rbowlby: plus the integration with berkshelf in test-kitchen would suffer
[2014-07-08 19:19:51 -0400] shlant: anyone know how to use chef metal in a recipe? is it not chef_gem 'chef-metal'?
[2014-07-08 19:19:54 -0400] rbowlby: I can't possibly be the first person who wants two berkshelfs under one local user account.
[2014-07-08 19:22:58 -0400] irvingpop: shlant you should already have chef-metal and a driver gem installed before youre running recipes.
[2014-07-08 19:23:58 -0400] rbowlby: Anyone? 2 berkshelfs under the same local user account?
[2014-07-08 19:24:07 -0400] mikespla_: irvingpop shlant, not neccessarily you can include it in the recipe just fine.  chef_gem will install it inside chef at runtime, before any metal commands get run
[2014-07-08 19:24:18 -0400] mikespla_: We use this for metal:
[2014-07-08 19:24:19 -0400] mikespla_: chef_gem 'chef-metal' do
[2014-07-08 19:24:19 -0400] mikespla_:   version "0.12.1"
[2014-07-08 19:24:19 -0400] mikespla_: end
[2014-07-08 19:24:20 -0400] mikespla_: chef_gem 'chef-metal-fog' do
[2014-07-08 19:24:20 -0400] mikespla_:   version "0.6.1"
[2014-07-08 19:24:21 -0400] mikespla_: end
[2014-07-08 19:24:21 -0400] mikespla_: require 'chef_metal'
[2014-07-08 19:24:37 -0400] irvingpop: Ok that makes sense
[2014-07-08 19:24:50 -0400] mikespla_: (either way you're safe then!)
[2014-07-08 19:25:29 -0400] irvingpop: For ec-metal (https://github.com/opscode/ec-metal) I found it much easier to use bunlder to vendor the needed gems (chef-metal, chef-metal-fog, etc)
[2014-07-08 19:26:06 -0400] irvingpop: especially because of how fast chef-metal and friends have been moving
[2014-07-08 19:26:15 -0400] veron: is anyone available to help me with a seemingly strange berkshelf issue/
[2014-07-08 19:26:28 -0400] mikespla_: irvingpop: ahh nice, haven't used that yet. We haven't moved our EC cookbook to metal... thanks!
[2014-07-08 19:27:47 -0400] irvingpop: mikespla_ cool let me know how it works for you :)
[2014-07-08 19:28:24 -0400] mikespla_: irvingpop Definitely will! Thanks!
[2014-07-08 19:35:45 -0400] anthonyacquanita: anyone using iptables_ng and does it really restart iptables on every chef run?
[2014-07-08 19:36:15 -0400] rbowlby: two berkshelfs one user <-- stunning video coming soon
[2014-07-08 19:39:08 -0400] rbowlby: anyone know how to have two berkshelfs under one user
[2014-07-08 19:39:18 -0400] rbowlby: I'm going to have a bot that just asks that once every hour
[2014-07-08 19:41:00 -0400] mattberther: rbowlby: what about creating a wrapper that sets BERKSHELF_PATH as needed?
[2014-07-08 19:42:47 -0400] rbowlby: mattberther, know a good way to set the ENV var when I CD into a dir, like RVM does with .ruby_version
[2014-07-08 19:43:23 -0400] rbowlby: so when I CD into the work chef repo it will set the BERKSHELF_PATH appropriately.
[2014-07-08 19:44:03 -0400] mattberther: rbowlby: something like this? http://stackoverflow.com/questions/3443673/bash-execute-a-shell-function-after-a-change-directory-cd
[2014-07-08 19:46:16 -0400] rbowlby: mattberther, those answers make me cringe...though I'm a zsh user so it appears from the comment on the Q that I have some built-in funcationality providing this.
[2014-07-08 19:46:27 -0400] rbowlby: functionality*
[2014-07-08 19:49:00 -0400] rbowlby: alright, this may be a workable solution. Thanks mattberther
[2014-07-08 19:51:15 -0400] mattberther: you're welcome, rbowlby
[2014-07-08 19:57:11 -0400] thathypernym: LOAD perl
[2014-07-08 19:57:18 -0400] s1991: please, can someone suggest why I'm getting this error http://pastebin.com/HNn2Utfr whenevr I include python recipe.
[2014-07-08 19:57:39 -0400] PeteJ: having growing frustration with the chef client in this envirionment
[2014-07-08 19:57:46 -0400] s1991: package[python-dev] related problm
[2014-07-08 19:57:47 -0400] rbowlby: is chef-metal on track to implement features that would cause motherbrain to become defunct?
[2014-07-08 19:58:38 -0400] veron: 1. package[python-dev] (python::package line 41) had an error: Mixlib::ShellOut::CommandTimeout: Command timed out after 600s:
[2014-07-08 19:58:39 -0400] veron: 2.==> default: Command execeded allowed execution time, process terminated
[2014-07-08 19:58:50 -0400] veron: @s1991 can your server talk to the internet?
[2014-07-08 20:00:15 -0400] s1991: veron: I did't get you
[2014-07-08 20:00:29 -0400] veron: your chef stacktrace said time out after 10 minutes
[2014-07-08 20:00:40 -0400] veron: so apt-get can't talk out to whatever mirror is hosting python-dev
[2014-07-08 20:00:56 -0400] gyoza: when i see s1999 i thik of an s14 1999
[2014-07-08 20:00:59 -0400] gyoza: i am so asian:(
[2014-07-08 20:01:07 -0400] veron: Ran apt-get -q -y install python-dev=2.7.3-0ubuntu2.2
[2014-07-08 20:01:13 -0400] veron: so run that by hand on the server and see what happens
[2014-07-08 20:01:29 -0400] veron: or better yet, do an apt-get update, then rerun chef
[2014-07-08 20:01:47 -0400] veron: don't see why it's timing out though, other than perhaps security groups / iptables / firewall somewhere between you and the repo
[2014-07-08 20:01:58 -0400] s1991: ok, let me try
[2014-07-08 20:02:02 -0400] veron: don't do the -q flag
[2014-07-08 20:02:05 -0400] veron: probably quiet or something
[2014-07-08 20:02:10 -0400] veron: @s1991
[2014-07-08 20:02:19 -0400] s1991: ok, thanks
[2014-07-08 20:03:36 -0400] s1991: veron: I cannot able to run that without sudo. "E: Could not open lock file /var/lib/dpkg/lock - open (13: Permission denied)"
[2014-07-08 20:04:14 -0400] s1991: and works fine with sudo
[2014-07-08 20:08:41 -0400] veron: yeah you can't alter the system with apt without root privileges, that's normal
[2014-07-08 20:09:12 -0400] veron: you can seriously mess things up with apt if you do something silly
[2014-07-08 20:11:02 -0400] gswallow: I had a question, but now I don't!
[2014-07-08 20:11:40 -0400] gswallow: Thanks, y'all.
[2014-07-08 20:14:12 -0400] PeteJ: ok , Lsb cant seem to be disabled
[2014-07-08 20:14:20 -0400] PeteJ: even though its not needed for windows
[2014-07-08 20:14:40 -0400] PeteJ: and its causing the wait on my chef-client runs
[2014-07-08 20:14:51 -0400] PeteJ: anyone?
[2014-07-08 20:15:01 -0400] fortier: hi everyone! i'm having a problem with chef-metal and i'm not sure if im doing something wrong or need to file a bug. i'm trying to use the fog_key_pair resource but get an error '    uninitialized class variable @@use_pkcs8 in Chef::Provider::FogKeyPair'
[2014-07-08 20:15:14 -0400] chef_apprentice: Hello, anyone have problem using chocolatey recipe to install programs on a new machine? I kept getting "already installed. Do nothing." message.
[2014-07-08 20:15:48 -0400] PeteJ: Ohai::Config::disabled_plugins= [  "c", "cloud", "ec2", "rackspace", "eucalyptus", "command", "dmi", "dmi_common",  "erlang", "groovy", "ip_scopes", "java", "keys", "lua", "mono", "network_listeners",  "passwd", "perl", "php", "python", "ssh_host_key", "uptime", "virtualization", "Lsb",  "windows::virtualizati
[2014-07-08 20:19:25 -0400] jkeiser: rbowlby: what features are you thinking of?
[2014-07-08 20:23:14 -0400] shlant: mikespla_: how do you specify driver_options with chef-metal? I just get No resource or method named `driver_options'. I need to specify AWS creds
[2014-07-08 20:23:14 -0400] gondoi: I'm now getting this with stove: {"error"=>"INVALID_DATA", "error_messages"=>["Version constraint is not a valid Chef version constraint"]}
[2014-07-08 20:23:16 -0400] gondoi: wat
[2014-07-08 20:24:08 -0400] jkeiser: shlant: you put them in your .chef/knife.rb generally, or for AWS you can also have them in ~/.aws/config
[2014-07-08 20:24:49 -0400] mikespla_: shlant: as jkeiser said :)
[2014-07-08 20:25:22 -0400] shlant: jkeiser: but that is outside the recipe? locally?
[2014-07-08 20:25:30 -0400] jkeiser: shlant: https://github.com/opscode/chef-metal/blob/master/docs/configuration.md#credentials-configuration-in-chef
[2014-07-08 20:25:50 -0400] jkeiser: shlant: correct, we try pretty hard not to put credentials in recipes.  It's *possible* if you absolutely have to
[2014-07-08 20:25:55 -0400] shanlar: coderanger are you around by chance? having an issue with your balanced-user cookbook and dotfiles. the def for creating dotfiles does not seem to be looping on directory creation properly.
[2014-07-08 20:25:55 -0400] bawt: PONG
[2014-07-08 20:26:31 -0400] coderanger: shanlar: I am, but I don't directly maintain that cookbook anymore as I no longer work there
[2014-07-08 20:26:45 -0400] coderanger: Also anyone know whats up with bawt?
[2014-07-08 20:27:09 -0400] jkeiser: shlant: see the third bit of the section I linked you for in-recipe stuff
[2014-07-08 20:27:41 -0400] jkeiser: shlant: but I sincerely recommend not putting credentials directly in recipes.  Leads to many bad things.  Only reason to do it would be if you were retrieving them from an external source (so the actual credentials weren't in the recipe)
[2014-07-08 20:27:48 -0400] jkeiser: coderanger: you said "looping"
[2014-07-08 20:27:48 -0400] bawt: PONG
[2014-07-08 20:28:02 -0400] coderanger: Hah, I see
[2014-07-08 20:28:04 -0400] jkeiser: lol I didn't actually mean for that to be a demonstration
[2014-07-08 20:28:09 -0400] fortier: jkeiser - any thoughts on my pkcs8 error above?
[2014-07-08 20:28:14 -0400] coderanger: sadtrombone.gif
[2014-07-08 20:28:24 -0400] shlant: jkeiser: that's exactly what I need, thanks. I am using citadel so no worries about credentials leaks
[2014-07-08 20:28:27 -0400] jkeiser: fortier: I don't think I was online for that
[2014-07-08 20:28:28 -0400] coderanger: jtimberman: Do you know who is maintaining bawt now?
[2014-07-08 20:28:33 -0400] mikesplain: jkeiser shlant: we put some in a recipes because we have so many "projects" within openstack and frankly it was just easier at the time (passwords are pulled from chef-vault), but we fully intent to use profiles once they're out to make it easier
[2014-07-08 20:28:34 -0400] jkeiser: shlant: okey doke! :)
[2014-07-08 20:28:51 -0400] fortier: jkeiser: ah ok. here again:  i'm having a problem with chef-metal and i'm not sure if im doing something wrong or need to file a bug. i'm trying to use the fog_key_pair resource but get an error '    uninitialized class variable @@use_pkcs8 in Chef::Provider::FogKeyPair'
[2014-07-08 20:29:08 -0400] shanlar: coderanger: https://gist.github.com/chasebolt/daee3c94acfcfbfd8745
[2014-07-08 20:29:10 -0400] fortier: i'm on chef-metal-fog 0.6.1
[2014-07-08 20:29:47 -0400] shanlar: i added a log on line 21 and you can see the output of it on line 47
[2014-07-08 20:30:25 -0400] coderanger: shanlar: That is definitely not code I wrote
[2014-07-08 20:30:37 -0400] shanlar: oh
[2014-07-08 20:30:48 -0400] shanlar: well any insight on what may be happening?
[2014-07-08 20:30:56 -0400] coderanger: But the issue is likely that is it mutating a single string object called path
[2014-07-08 20:30:58 -0400] shanlar: i dont see how path can change like that
[2014-07-08 20:31:09 -0400] coderanger: all instances point at the same string
[2014-07-08 20:31:11 -0400] jkeiser: fortier: I presume it's dying here?  https://github.com/opscode/chef-metal-fog/blob/v0.6.1/lib/chef/provider/fog_key_pair.rb#L73
[2014-07-08 20:31:17 -0400] jkeiser: fortier: what ruby are you running?
[2014-07-08 20:31:19 -0400] coderanger: so it changes before any resources converge
[2014-07-08 20:31:25 -0400] coderanger: shanlar: Change it from << to +=
[2014-07-08 20:31:26 -0400] bmurt: anyone using vagrant-butcher and successfully removing the node from a chef server?
[2014-07-08 20:31:56 -0400] bmurt: i thought the purpose of the plugin would be to handle the knife node delete & knife client delete aspects unless im missing something
[2014-07-08 20:32:32 -0400] maddslacker: I'm working in the learnchef vm environemnt .. and getting an error at the very first tep (the motd file)
[2014-07-08 20:32:40 -0400] maddslacker: https://www.dropbox.com/s/k5yp1zviw6wcp3k/Capture.PNG
[2014-07-08 20:32:43 -0400] shanlar: coderanger: awesome that fixed it
[2014-07-08 20:32:46 -0400] jkeiser: fortier: can you do me a favor and put @@use_pkcs8 = nil at the top of the class in that file, and see if that fixes it?
[2014-07-08 20:32:47 -0400] ktam: hi everyone, hopefully this is easy and I just fail at googling. I use librarian-chef to manage chef cookbooks in my local cheforg; today I've been getting "connection reset by peer" errors whenever I try to update. it seems the issue is that there's a redirect from http://community.opscode.com/api/v1/cookbooks.. to https://supermarket.getchef.com/api/v1/cookbooks/. and that's where it's dying. are there any recommendations to I can update the site for
[2014-07-08 20:32:47 -0400] ktam: restful API to?
[2014-07-08 20:32:52 -0400] shlant: jkeiser: getting "undefined method `each_section' for nil:NilClass" for the machine resource?
[2014-07-08 20:32:54 -0400] shlant: any dieas
[2014-07-08 20:32:56 -0400] shanlar: can you explain why += and << function differently here?
[2014-07-08 20:33:05 -0400] jkeiser: fortier: if it does I'll get a fix up there ASAP
[2014-07-08 20:33:13 -0400] jkeiser: shlant: need more stackses
[2014-07-08 20:33:33 -0400] jkeiser: shlant: though it sounds like an issue with the AWS profile loader
[2014-07-08 20:33:43 -0400] coderanger: shanlar: How much Ruby do you know? :)
[2014-07-08 20:34:16 -0400] coderanger: shanlar: Ruby allows mutation of strings, so << is actually altering the buffer in an existing object while += (and +) create a new string buffer and copy the data.
[2014-07-08 20:34:17 -0400] fortier: jkeiser ruby 1.9.3=p448  also can i add that line in a recipe?
[2014-07-08 20:34:47 -0400] shlant: jkeiser: here's what I haev: http://pastebin.com/E7LYDcQF
[2014-07-08 20:34:59 -0400] shanlar: ahh ok that makes sense
[2014-07-08 20:35:23 -0400] jkeiser: fortier: ah, I think I see the problem.  FYI the issue is that you have no ~/.aws/config.  (I mean, it should be OK that you don't have that file, but chef-metal doesn't handle it well.)
[2014-07-08 20:35:26 -0400] jkeiser: er
[2014-07-08 20:35:30 -0400] jkeiser: that's for shlant
[2014-07-08 20:35:47 -0400] jkeiser: shlant: I'll get a fix up ASAP, but if you create an empty ~/.aws/config that should get you past it immediately
[2014-07-08 20:36:20 -0400] shlant: jkeiser: so create that on the node that this recipe is run on?
[2014-07-08 20:36:26 -0400] fortier: lol. ok.
[2014-07-08 20:36:57 -0400] jkeiser: shlant: yeah, or wait the 15-20 minutes for me to package and release a new chef-metal-fog and make sure you install it :)
[2014-07-08 20:37:11 -0400] shlant: jkeiser: I think I can be patient, thanks
[2014-07-08 20:37:49 -0400] x0nic: how are people bootstrapping assets on to their boxes? I have a var/www dir I want to pull down from s3
[2014-07-08 20:37:49 -0400] bawt: PONG
[2014-07-08 20:38:21 -0400] shanlar: deploy resource
[2014-07-08 20:38:38 -0400] gchristensen: bawt seems to have Pongitus these days
[2014-07-08 20:38:42 -0400] shanlar: http://docs.opscode.com/resource_deploy.html
[2014-07-08 20:38:49 -0400] shanlar: i pull from a git repo though
[2014-07-08 20:38:54 -0400] jkeiser: fortier: you might be able to put this in the recipe:
[2014-07-08 20:38:59 -0400] jkeiser: fortier: class Chef::Provider::FogKeyPair < Chef::Provider::LWRPBase
[2014-07-08 20:39:09 -0400] jkeiser: fortier:   @@use_pkcs8 = nil
[2014-07-08 20:39:12 -0400] jkeiser: fortier: end
[2014-07-08 20:39:21 -0400] jkeiser: hooray for monkeypatching
[2014-07-08 20:40:00 -0400] fortier: lol. i'm testing it now. also learning how to install from source :)
[2014-07-08 20:40:27 -0400] coderanger: I'm going to mute bawt until fujin is around
[2014-07-08 20:40:53 -0400] coderanger: ping
[2014-07-08 20:40:53 -0400] bawt: PONG
[2014-07-08 20:40:58 -0400] shanlar: ping
[2014-07-08 20:40:58 -0400] bawt: PONG
[2014-07-08 20:41:00 -0400] shanlar: lol
[2014-07-08 20:41:57 -0400] coderanger: Hmm, oh maybe I can't quiet an op
[2014-07-08 20:42:34 -0400] coderanger: ping
[2014-07-08 20:42:37 -0400] coderanger: There we go :)
[2014-07-08 20:44:32 -0400] fortier: jkeiser: got a little farther then 'fingerprint does not match local key fingerprint(s)'
[2014-07-08 20:45:29 -0400] jkeiser: fortier: was this key created in the AWS web interface?
[2014-07-08 20:46:23 -0400] coderanger: maddslacker: Please keep things SFW here
[2014-07-08 20:46:34 -0400] maddslacker: well I didn't paste it or anything ...
[2014-07-08 20:46:47 -0400] fortier: jkeiser no, from the command line
[2014-07-08 20:46:54 -0400] maddslacker: i'm actually at work, so coffe is about as exciting as it gets
[2014-07-08 20:46:57 -0400] coderanger: maddslacker: http://docs.opscode.com/community_guidelines.html
[2014-07-08 20:47:02 -0400] shlant: jkeiser: the recipes that are run with the machine resource: do they have to be dependancies in that cookbook, or just on the chef server?
[2014-07-08 20:47:06 -0400] jkeiser: fortier: fortier: probably same diff.  It creates in pkcs8.  Did you get this warning?  "The openssl_pkcs8 gem is not loaded: you may not be able to read key fingerprints created by some cloud providers.  gem install openssl_pkcs8 to fix!"
[2014-07-08 20:47:18 -0400] jkeiser: shlant: just have to be on the chef server
[2014-07-08 20:47:24 -0400] shlant: nie
[2014-07-08 20:47:26 -0400] shlant: nice
[2014-07-08 20:47:48 -0400] ktam: trying to look on the supermarket site: is berkshelf the recommended/supported way of managing cookbooks now?
[2014-07-08 20:48:05 -0400] ktam: is the solution to switch from librarian-chef to berkshelf
[2014-07-08 20:48:18 -0400] coderanger: ktam: There isn't really a strong recommendation, its a solid option though
[2014-07-08 20:48:45 -0400] coderanger: ktam: berks itself is just a dependency solver, beyond is "the berkshelf way" which is a more complete workflow based around it, but the two are independent
[2014-07-08 20:49:10 -0400] ktam: okay, just wasn't sure. i'm running into issues with librarian-chef at the moment and getting connection reset errors, and it seems to be occuring the moment it hits supermarket.getchef.com
[2014-07-08 20:49:50 -0400] coderanger: cwebber: ^^
[2014-07-08 20:50:03 -0400] coderanger: There were load and capacity issues yesterday, not sure what the status is today
[2014-07-08 20:50:07 -0400] ktam: since there is an explicit link to berkshelf and not librarian-chef, was wondering if i should switch
[2014-07-08 20:50:24 -0400] coderanger: ktam: No, if librarian is working for you, its definitely fine
[2014-07-08 20:50:27 -0400] ktam: gotcha, maybe i'll wait a day and see if things improve; it's nearly 5pm where I'm at anyway
[2014-07-08 20:50:35 -0400] coderanger: ktam: Just some fallout from the migration most likely
[2014-07-08 20:50:51 -0400] cwebber: ktam: can you drop your error into a gist or a paste bin?
[2014-07-08 20:51:34 -0400] ktam: @cwebber, sure, thanks - give me a minute
[2014-07-08 20:52:12 -0400] fortier: jkeiser yes, it prompted for the openssl_pkcs8 gem and i installed it, same issue. Also, it's overwriting the ~/.ssh/key before it errors out. that seems like a problem
[2014-07-08 20:52:30 -0400] jkeiser: fortier: that does seem like a problem!  That really shouldn't be happening
[2014-07-08 20:52:47 -0400] fortier: lol. luckily i have that key backed up :)
[2014-07-08 20:52:59 -0400] jkeiser: fortier: does it print the fingerprints it is comparing?
[2014-07-08 20:53:05 -0400] fortier: yes
[2014-07-08 20:53:59 -0400] jkeiser: fortier: are they different in substantial ways?  Do they even look like they are the same sort of fingerprint?
[2014-07-08 20:54:23 -0400] jkeiser: fortier: it should be safe to share the fingerprint with me, I think, yes?
[2014-07-08 20:54:28 -0400] fortier: jkeiser  fortier on fog:AWS:---:us-east-1 with fingerprint 45:5c:14:03:48:d3:4c:69:69:53:d8:d0:e1:48:ae:38 does not match local key fingerprint(s) ["05:a8:ee:3f:7f:64:fc:84:72:88:a9:76:dd:b0:ce:98", "42:fa:a1:fd:db:90:3d:4d:86:97:e2:4a:89:f9:5c:7f:e1:7e:7f:65"], and allow_overwrite is false!
[2014-07-08 20:54:32 -0400] ktam: http://pastebin.com/hMtV52uZ - this is after replacing the original site 'http://community.opscode.com/api/v1' with cookbooks.opscode (as the http://docs.opscode.com/api_cookbooks_site.html documentation suggests)
[2014-07-08 20:55:22 -0400] ktam: (i also tried using site http://supermarket.getchef.com/api/vi but i get a similar connection reset error)
[2014-07-08 20:55:30 -0400] coderanger: ktam: Hmm, that looks like the error is coming from S3, not Supermarket
[2014-07-08 20:55:56 -0400] coderanger: ktam: Are you able to curl that URL?
[2014-07-08 20:55:57 -0400] cwebber: The Berkshelf v2 Outage Postmortem: http://youtu.be/DTL-XouxQ9U
[2014-07-08 20:56:02 -0400] jkeiser: fortier: I'm having some trouble figuring out what's going on there.  Can you run with -l debug (or Chef::Config.log_level :debug) and see if we can figure out the point where it is overwriting the private key?
[2014-07-08 20:56:06 -0400] jkeiser: fortier: that is super disturbing
[2014-07-08 20:56:24 -0400] cwebber: ktam: i am starting a postmortem but i will take a look in just a few
[2014-07-08 20:56:24 -0400] jkeiser: And I would have thought better of past me--what a jerk, overwriting private keys
[2014-07-08 20:58:15 -0400] fortier: jkeiser: i'm running it now. it looks like its overwriting the key file then comparing the one it created to aws. i just added the new key to my aws account and the fingerprint matches
[2014-07-08 20:58:20 -0400] ktam: okay, i'll stand by. this is the pastebin of the error when i replace it the site with supermarket.getchef.com/api/v1 http://pastebin.com/RcjmkEcy (seems more like supermarket originates the error)
[2014-07-08 20:58:34 -0400] jkeiser: fortier: the key file already exists and then it overwrites it?
[2014-07-08 20:58:39 -0400] fortier: correct
[2014-07-08 20:59:01 -0400] jkeiser: fortier: what does your fog_key_pair resource look like?
[2014-07-08 20:59:02 -0400] MartinCleaver: In open source chef server is there a way to see a matrix of which runlist or recipe is provisioned for each node?
[2014-07-08 20:59:12 -0400] coderanger: ktam: Similarly, what do you see when curling that URL?
[2014-07-08 20:59:16 -0400] fortier: jkeiser yes, i have a password protected ssh key. after the run fails its an entirely new (non-password) key
[2014-07-08 20:59:33 -0400] fortier: https://www.irccloud.com/pastebin/c5mv7Vgs
[2014-07-08 20:59:43 -0400] jkeiser: OK.  I'm going to release 0.7 since this is not likely new, and that will help shlant
[2014-07-08 20:59:51 -0400] jkeiser: And will debug this
[2014-07-08 20:59:55 -0400] fortier: k
[2014-07-08 20:59:59 -0400] rbowlby: jkeiser, just ran the example vagrant_linux.rb. What dir do I need to cd to in order to log into the newly provisioned vagrant?
[2014-07-08 21:01:16 -0400] fortier: https://www.irccloud.com/pastebin/EDHjGayR
[2014-07-08 21:01:25 -0400] fortier: jkeiser ^^
[2014-07-08 21:01:57 -0400] douglaswth: cwebber: hmm, the youtube stream still says starting soon
[2014-07-08 21:02:28 -0400] jkeiser: shlant: chef-metal-fog 0.7 is released with the fix for your issue.  Note it also has some big-time AWS parallel bootstrap changes that only I have tested, so please let me know if you have any issues
[2014-07-08 21:02:43 -0400] jkeiser: On the bright side, it should be a lot faster and less chatty with AWS
[2014-07-08 21:02:52 -0400] icarus: brazil is getting blitzgrieged
[2014-07-08 21:03:38 -0400] ktam: (@cwebber: finally just for kicks, the original error I first encountered today before tweaking anything in my cheffile http://pastebin.com/cYhZQLun)
[2014-07-08 21:04:01 -0400] jtimberman: Watch Berkshelf v2 outage postmortem: http://youtu.be/DTL-XouxQ9U
[2014-07-08 21:04:05 -0400] jtimberman: started now
[2014-07-08 21:04:51 -0400] douglaswth: there we go!
[2014-07-08 21:05:35 -0400] ktam: @coderanger sorry for missing your comment. when i do a curl i get the proper expected result (what appears to be a json with the cookbook information)
[2014-07-08 21:06:29 -0400] coderanger: cwebber: youtube screen is showing jamies face instead of your doc
[2014-07-08 21:06:40 -0400] jtimberman: should be on the doc now
[2014-07-08 21:06:42 -0400] jtimberman: coderanger: ^
[2014-07-08 21:06:46 -0400] coderanger: yep
[2014-07-08 21:06:51 -0400] ktam: yep!
[2014-07-08 21:07:36 -0400] jtimberman: coderanger: re: bawt, it's in the hands of fujin
[2014-07-08 21:07:41 -0400] jkeiser: rbowlby: by default, the directory is <config directory>/vms
[2014-07-08 21:11:39 -0400] jtimberman: if you're following along the postmortem, the supermarket http redirect code in question is in a template: https://github.com/opscode-cookbooks/supermarket/blob/master/templates/default/supermarket.nginx.erb#L26-L65
[2014-07-08 21:12:14 -0400] jtimberman: where allow_http_domain is an array that is set to ['api.berkshelf.com', 'cookbooks.opscode.com'] via a role
[2014-07-08 21:17:08 -0400] ktam: i wish i could stay for the whole post mortem but i have to run. just for fun i tried replacing site with api.berkshelf.com http://pastebin.com/MBPbt56S - so i'm not sure if the issue is supermarket.getchef or s3 at this point (Performing http-get for https://s3.amazonaws.com/community-files.opscode.com/cookbook_versions/tarballs/6943/original/chef-client20140607-16571-1b69t5f.?1402194069 ,
[2014-07-08 21:17:58 -0400] jtimberman: ktam: looks like you're using librarian?
[2014-07-08 21:18:09 -0400] ktam: yes, librarian and librarian-chef
[2014-07-08 21:18:43 -0400] jtimberman: librarian doesn't use api.berkshelf.com, that's purely for berkshelf 3+
[2014-07-08 21:19:04 -0400] jtimberman: and, api.berkshelf.com is deprecated for supermarket (it is a CNAME in DNS)
[2014-07-08 21:19:23 -0400] ktam: ^^ @jtimberman. yeah, that was just a troubleshooting step. initially it was community.opscode.com, i tried cookbooks.opscode.com, and then i tried supermarket.getchef.com - similar errors
[2014-07-08 21:19:59 -0400] ktam: ( http://pastebin.com/cYhZQLun, http://pastebin.com/RcjmkEcy , http://pastebin.com/hMtV52uZ )
[2014-07-08 21:20:06 -0400] jtimberman: i tested with the latest librarian-chef version earlier today with site "http://community.opscode.com/api/v1" and it was able to resolve the dependency graph for the gitlab cookbook.
[2014-07-08 21:21:04 -0400] ktam: @jtimberman, what time? i think i started seeing the issue around 4pm today, and i'm still getting the issue
[2014-07-08 21:21:07 -0400] jtimberman: (gitlab has a number of dependencies)
[2014-07-08 21:21:11 -0400] jtimberman: 4pm in what time zone :)
[2014-07-08 21:21:22 -0400] jtimberman: it's 3:21PM where I am
[2014-07-08 21:21:34 -0400] ktam: ah sorry, EDT
[2014-07-08 21:21:42 -0400] ktam: so about 2 hours ago for me
[2014-07-08 21:21:45 -0400] ktam: err. one hour
[2014-07-08 21:21:49 -0400] jtimberman:  9998  2014-07-08 11:41  0:00  bundle exec librarian-chef install
[2014-07-08 21:21:59 -0400] jtimberman: almost 6 hours ago
[2014-07-08 21:22:19 -0400] ktam: i believe i have the latest versoin of librarian chef but let me reinstall the whole bundle
[2014-07-08 21:24:32 -0400] shlant: is there a way to check a chem gem version on the node?
[2014-07-08 21:24:33 -0400] ktam: updated; still no luck for me. thanks to everyone for chatting with me during your live stream, i'll try again tomorrow, hopefully it's just temporary networking issues
[2014-07-08 21:24:41 -0400] shlant: chef gem*
[2014-07-08 21:25:31 -0400] anop: what is the biggest benefit you gained by chef puppet ?
[2014-07-08 21:25:39 -0400] jtimberman: shlant: node['chef_packages']['chef']['version'] or Chef::VERSION
[2014-07-08 21:25:51 -0400] coderanger: anop: I think you may be phrasing that oddly
[2014-07-08 21:26:41 -0400] anop: *chef
[2014-07-08 21:26:43 -0400] shlant: jtimberman: but what about on the server manually? like gem list?
[2014-07-08 21:26:59 -0400] anop: what did you guys use
[2014-07-08 21:27:11 -0400] s1991: Hello, I  cloned mysql cookbook and included in my recipe. Thn I got error msg "Cookbook yum-mysql-community not found. If you're loading yum-mysql-community from another cookbook, make sure you configure the dependency in your metadata"  So do I also need to install that cookbook??
[2014-07-08 21:27:13 -0400] coderanger: anop: Thats a somewhat loaded question, also please remember not everyone here is a guy
[2014-07-08 21:27:14 -0400] shlant: anop: based on the irc channel you're in...
[2014-07-08 21:27:19 -0400] anop: features
[2014-07-08 21:27:32 -0400] jtimberman: shlant: there's a version-manifest.txt iirc in the /opt/chef-server dir
[2014-07-08 21:27:37 -0400] maddslacker: I tried chef in the learnchef vm sandbox, but I totally broke it at step one
[2014-07-08 21:27:43 -0400] jtimberman: or the version of the package from your package manager :)
[2014-07-08 21:27:44 -0400] maddslacker: so .. now I'm listening to music and iding in here
[2014-07-08 21:27:49 -0400] coderanger: anop: Chef, and other tools like it, allow repeatable automation, disaster recovery, compliance checks, etc
[2014-07-08 21:27:49 -0400] someara: s1991 yes
[2014-07-08 21:27:53 -0400] maddslacker: whilst getting paid . .it's glorious
[2014-07-08 21:28:03 -0400] coderanger: anop: What you get out of it depends highly on what you need
[2014-07-08 21:28:12 -0400] anop: what do most people use it for?
[2014-07-08 21:28:16 -0400] anop: application deployment?
[2014-07-08 21:28:30 -0400] coderanger: anop: It is mainly a server configuration management tool
[2014-07-08 21:28:33 -0400] s1991: someara: then I'll be lot of things to be cloned, isn't there short or correct way to do it
[2014-07-08 21:28:40 -0400] anop: like a VM Template ?
[2014-07-08 21:28:53 -0400] coderanger: anop: app deployment, network management, and broader infra management are all use cases too though
[2014-07-08 21:28:59 -0400] someara: s1991 you can use a dependency resolver like Berkshelf or Librarian
[2014-07-08 21:29:05 -0400] s1991: someara: like for python I need to clone yum and yum-*
[2014-07-08 21:29:44 -0400] coderanger: anop: You can use Chef to build VM templates, yes (usually via Packer these days)
[2014-07-08 21:29:45 -0400] someara: You can pull the cookbook artifacts from supermarket instead of cloning the git repos if you want
[2014-07-08 21:29:55 -0400] anop: but you have Vmware
[2014-07-08 21:29:58 -0400] anop: for template also
[2014-07-08 21:30:27 -0400] anop: so it is not market speak ?
[2014-07-08 21:30:31 -0400] anop: as most tools
[2014-07-08 21:30:50 -0400] coderanger: anop: I'm sorry, it is hard to understand you
[2014-07-08 21:31:07 -0400] anop: I feel sometime some tools are more hassle - then help
[2014-07-08 21:31:21 -0400] coderanger: VMWare also makes commercial software to build VM images, if thats what you are asking
[2014-07-08 21:31:32 -0400] coderanger: Some people prefer using it, some don't
[2014-07-08 21:32:20 -0400] anop: is it easy to start using it and learning to see what it can give you? do you need to learn programming/scripting ?
[2014-07-08 21:33:09 -0400] coderanger: anop: learn.getchef.com is the current tutorial, you need to learn the Chef DSL (domain specific language) but not all of Ruby
[2014-07-08 21:33:26 -0400] coderanger: anop: It is like any other config file syntax with its own rules and terms
[2014-07-08 21:33:46 -0400] jkeiser: fortier: https://www.irccloud.com/pastebin/c5mv7Vgs doesn't show it actually overwriting the private key, fyi--it's just running the private_key resource to ensure the key exists.  You'd see a line there saying it took an action if it created the key there
[2014-07-08 21:34:04 -0400] awc737: can anyone help me fix this execute command?
[2014-07-08 21:34:06 -0400] awc737: command 'devadd ' + node["cmd_lamp"]["username"] + ' "' + File.read(node["cmd_lamp"]["public_key"]) + '"'
[2014-07-08 21:34:07 -0400] jkeiser: Not saying something isn't overwriting it--clearly something somewhere is--just that log isn't showing it :)
[2014-07-08 21:34:11 -0400] serban_: i am getting https 500 errors when trying to bootstrap a windows node using winrm. any idea?
[2014-07-08 21:34:50 -0400] fortier: jkeiser yeah i was wondering why it didnt show that in the log. i'm combing through the code to see if i can find something alos
[2014-07-08 21:35:02 -0400] anop: coderanger Im not entirely convinced
[2014-07-08 21:35:06 -0400] gswallow: Ok, I have a question
[2014-07-08 21:35:08 -0400] serban_: the command logged is wget.vbs "/url=https://www.opscode.com/chef/download?p=windows&pv=2008r2&m=x86_64"
[2014-07-08 21:35:35 -0400] gswallow: My chef client is trying to send a "greater than or equal to" sign to hosted chef.
[2014-07-08 21:35:50 -0400] coderanger: anop: Given the language barrier it is difficult to be persuasive
[2014-07-08 21:36:01 -0400] gswallow: [2014-07-08T21:29:13+00:00] INFO: Sending resource update report (run-id: 7e4932dc-4152-4267-8d3b-6b432d09bdd1)
[2014-07-08 21:36:02 -0400] gswallow: [2014-07-08T21:29:13+00:00] ERROR: "\xE2" from ASCII-8BIT to UTF-8
[2014-07-08 21:36:02 -0400] gswallow: [2014-07-08T21:29:13+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-07-08 21:36:04 -0400] coderanger: anop: I don't know of anyone in here that speaks norwegian, unfortunately
[2014-07-08 21:36:05 -0400] jkeiser: fortier: we may want to start putting some sleeps in or something, so we can find out precisely where in the run the file is getting overwritten
[2014-07-08 21:36:34 -0400] anop: not sure what you mean by that coderanger
[2014-07-08 21:36:36 -0400] anop: :P
[2014-07-08 21:36:36 -0400] gswallow: SoI have a successful chef run, but then when I try to send the report, chef-client exits, status 1.
[2014-07-08 21:37:02 -0400] anop: well they are talking about cloud - that bought me to this channel - coderanger
[2014-07-08 21:37:04 -0400] coderanger: anop: I'm presuming you primarily speak norwegian based on your remote IP
[2014-07-08 21:37:46 -0400] gswallow: I guess I could disable enable_reporting_url_fatals
[2014-07-08 21:38:42 -0400] anop: yes
[2014-07-08 21:39:39 -0400] serban_: can somebody, please, tell me why i get this error "C:\Users\administrator.AUTOLAB>cscript /nologo C:\chef\wget.vbs /url:"https://www.opscode.com/chef/download?p=windows&pv=2008r2&m=x86_64" /path:"C:\Users\ADMINI~1.AUT\AppData\Local\Temp\chef-client-latest.msi"  ERROR: WinRM::WinRMHTTPTransportError: Bad HTTP response returned from server (500). Terminated"?
[2014-07-08 21:40:12 -0400] coderanger: anop: You may want to contact a local chef user group or devops user group and ask them to explain the basics of Chef, I think that may benefit you more
[2014-07-08 21:40:27 -0400] anop: My personal opinion is that you dont get a clear understand the chef. There are a lot of nice words but it would be helpful with some examples
[2014-07-08 21:40:33 -0400] anop: ok
[2014-07-08 21:40:39 -0400] anop: understanding of
[2014-07-08 21:40:47 -0400] jkeiser: anop: if you want examples, learnchef.com is a great place to start
[2014-07-08 21:40:49 -0400] anop: and what it can help you with
[2014-07-08 21:40:51 -0400] anop: ok
[2014-07-08 21:41:00 -0400] anop: i think its with most open source tools
[2014-07-08 21:41:21 -0400] anop: things are buried
[2014-07-08 21:41:27 -0400] anop: ok
[2014-07-08 21:43:17 -0400] awc737: command "devadd #{node['cmd_lamp']['username']} \"#{File.read(node['cmd_lamp']['public_key'])}\""
[2014-07-08 21:43:18 -0400] awc737: not working
[2014-07-08 21:46:35 -0400] jkeiser: fortier: ping me when next I can help :)  I'm going to go write things for a bit
[2014-07-08 21:47:03 -0400] fortier: jkeiser ok thanks for the help! i'm going to look around a bit and see if i can at least find it, and maybe submit a fix
[2014-07-08 21:47:41 -0400] anop: I am still not convinced :)
[2014-07-08 21:48:59 -0400] nulleric: anop: good thing, it's all open, people/marketing dont have to convince you, you can try yourself and make your own opinions. You've asked the same questions since early this morning and responded to everyone the same. Unsure how to help you more via IRC
[2014-07-08 21:49:16 -0400] jkeiser: anop: TBH, it's going to be a lot easier to have that conversation at a local DevOps or Chef group--there are going to be people there who are really solving problems with it, and can give you pros and cons and use cases
[2014-07-08 21:49:42 -0400] jkeiser: anop: also, those people aren't going to be trying to work in the background so it will be easier for them to engage in a lengthy conversation :)
[2014-07-08 21:50:19 -0400] jkeiser: anop: where are you located (city)?  I bet there is a meetup near ...
[2014-07-08 21:50:40 -0400] anop: still unsure what value you get. but OK :P
[2014-07-08 21:50:51 -0400] anop: most people dont even know what they are talking about
[2014-07-08 21:52:45 -0400] jkeiser: If you don't have tons of machines; if you don't need to be able to recover or recreate your machines' state after a crash; if you don't need to stand up test and dev environments that mirror production; if you don't need the ability to control and version the configuration of your machines; then you might not need Chef.
[2014-07-08 21:53:20 -0400] anop: create and delete machine? is that not something you can do with Actice directory=?
[2014-07-08 21:53:42 -0400] reset: anop: I use Chef to automate application deployments in the cloud for multiplayer online games. The ability to couple a view of your infrastructure as code and version it alongside of your application has enabled me to work with a minimal staff of just engineers on my latest endeavor. In the past I used Chef to run one of the largest online games, League of Legends. It works. You should read learnchef.com
[2014-07-08 21:53:57 -0400] nulleric: anop may just be a puppet user trolling :)
[2014-07-08 21:54:02 -0400] anop: :X
[2014-07-08 21:54:06 -0400] anop: Well
[2014-07-08 21:54:09 -0400] gchristensen: nulleric: that was my conclusion pretty quick
[2014-07-08 21:54:33 -0400] anop: not sure if it will fit me need
[2014-07-08 21:54:35 -0400] anop: my
[2014-07-08 21:55:04 -0400] reset: If you don't have a large infrastructure that you want to reliably deploy with a minimal staff, it won't work for you
[2014-07-08 21:55:14 -0400] jkeiser: Also, if you have an incredibly simple application that requires almost no configuration and runs on an OS that never changes, you probably don't need Chef.
[2014-07-08 21:55:22 -0400] reset: ^
[2014-07-08 21:55:25 -0400] anop: 7000 computers
[2014-07-08 21:55:38 -0400] reset: Then it sounds like it's for you
[2014-07-08 21:55:39 -0400] anop: yes tnx jkeiser
[2014-07-08 21:55:46 -0400] anop: sometimes less tool is more help
[2014-07-08 21:56:04 -0400] reset: Nope
[2014-07-08 21:56:18 -0400] anop: What about Java
[2014-07-08 21:56:24 -0400] gchristensen: wat
[2014-07-08 21:56:26 -0400] anop: always need to push ut latest version
[2014-07-08 21:56:32 -0400] anop: can you automate that with chef?
[2014-07-08 21:56:39 -0400] anop: do give you a realistic example
[2014-07-08 21:56:44 -0400] reset: How do you have the time to come and ask these questions if you're manually managing 7000 nodes?
[2014-07-08 21:56:53 -0400] Eulipion|Work:  /troll
[2014-07-08 21:56:57 -0400] cheeseplus: lmao
[2014-07-08 21:57:03 -0400] anop: vacation, reset
[2014-07-08 21:57:10 -0400] reset: You deserve a vacation
[2014-07-08 21:57:17 -0400] anop: :DD
[2014-07-08 21:57:29 -0400] cwebber: Watch the Supermarket Unresponsive Postmortem live at 6PM EDT (3PM PDT) http://youtu.be/tOEkYRbP4ms
[2014-07-08 21:57:30 -0400] reset: Ain't nobody got time for manually managing 7000 nodes
[2014-07-08 21:57:39 -0400] anop: not hard
[2014-07-08 21:57:40 -0400] jkeiser: anop: yes, you can update the version of Java, and other packages, with Chef.  Further, you can update the version of libraries you use, as well as the configuration for those libraries
[2014-07-08 21:57:43 -0400] anop: i am not alone
[2014-07-08 21:57:53 -0400] anop: ok
[2014-07-08 21:58:13 -0400] anop: not sure why you are angry
[2014-07-08 21:58:16 -0400] anop: but ok. :P
[2014-07-08 21:58:19 -0400] anop: jkeiser: ok
[2014-07-08 21:58:39 -0400] anop: these kind of example is good to know
[2014-07-08 21:58:58 -0400] jkeiser: anop: the way it works is, you give the relevant nodes with a "run list" containing the java cookbook (install java at version X), and your application and library cookbooks to install and configure the libraries
[2014-07-08 21:59:10 -0400] awc737: I have this in my cookbook recipe: public_key = File.read(node['cmd_lamp']['public_key'])
[2014-07-08 21:59:14 -0400] awc737: but it seems to try to read the file from the server
[2014-07-08 21:59:18 -0400] jkeiser: anop: the nodes run every 15 minutes, asking the Chef server "hey, what recipes should I be running."  Most of the time it doesn't change
[2014-07-08 21:59:19 -0400] awc737: how do I tell it that file is on the host?
[2014-07-08 21:59:50 -0400] anop: node = computer ?
[2014-07-08 21:59:58 -0400] anop: but there is still some manual work jkeiser?
[2014-07-08 22:00:15 -0400] jkeiser: anop: when you want a new version of Java or of your library or of your application (often you want all of them to update together at the same time), you add a new version of the cookbook that has the new version in it
[2014-07-08 22:00:18 -0400] awc737: how can I store a local file contents in a variable?
[2014-07-08 22:00:18 -0400] duallain: awc737: you don't typically.  All chef code is typically run on the client.  If it's a public key I would probably just ship it along with the cookbook as a file
[2014-07-08 22:00:25 -0400] jkeiser: anop: node = computer, yeah
[2014-07-08 22:00:37 -0400] jtimberman: Watch the Supermarket Unresponsive Postmortem live at 6PM EDT (3PM PDT) http://youtu.be/tOEkYRbP4ms
[2014-07-08 22:00:42 -0400] awc737: duallain the user is pointing to their public key in a config file
[2014-07-08 22:00:44 -0400] anop: jkeiser: sometime you need also for 32 bits and 64 bits. and some time you want to push ut old version of java for certain computers
[2014-07-08 22:00:52 -0400] jkeiser: anop: then when the node checks in again, it grabs that version of the cookbooks, and runs them, which gets you the new revision
[2014-07-08 22:00:53 -0400] anop: there is alot of use cases :)
[2014-07-08 22:00:55 -0400] anop: ok
[2014-07-08 22:01:07 -0400] anop: seems hard. that you need to learn scripting
[2014-07-08 22:01:08 -0400] jtimberman: (live now)
[2014-07-08 22:01:49 -0400] gyoza: jtimberman you remind me of my buddy who goes by jbitterman on aim
[2014-07-08 22:01:59 -0400] gyoza: for obvious reason
[2014-07-08 22:02:10 -0400] jkeiser: anop: if you want to automatically handle a large set of use cases, you're just going to have to code--there simply isn't a way for one vendor to anticipate every need you have, and if they could, their system would be so laden with configuration toggles that it might well be more complex than a scripting language
[2014-07-08 22:02:35 -0400] jkeiser: anop: however, Chef doesn't require anything traditionally considered "code" for simple cases
[2014-07-08 22:02:40 -0400] teshian: ok, I have a dumb question and feel free to tell me to go look at the documention, if I have multiple files in the recipe folder, do I need to do something like require file1, require file2 in the default.rb?
[2014-07-08 22:02:51 -0400] awc737: How can I read a user public key file and copy it onto serveR?
[2014-07-08 22:03:02 -0400] viglesias: teshian: you can use include_recipe
[2014-07-08 22:03:25 -0400] gyoza: teshian: i dont get what you mean exactly
[2014-07-08 22:03:31 -0400] gyoza: wht kindof files/
[2014-07-08 22:03:38 -0400] gyoza: join #rubycoin.org
[2014-07-08 22:03:40 -0400] gyoza: errr
[2014-07-08 22:03:41 -0400] anop: jkeiser: thats my point. some times it more hassle to tweak the automation that you are better of not doing it :P
[2014-07-08 22:03:41 -0400] anop: jepp
[2014-07-08 22:03:54 -0400] jkeiser: anop: for simple recipes, you write "package 'java'" or "file 'C:\blah.txt'" and Chef figures out that you mean "I want Java installed" or "I want that file installed"
[2014-07-08 22:04:12 -0400] anop: but there is still manual work
[2014-07-08 22:04:35 -0400] jkeiser: anop: you mean to write the script?
[2014-07-08 22:04:56 -0400] teshian: Gyoza, let me go do some reading first
[2014-07-08 22:05:25 -0400] jkeiser: anop: I don't think it's reasonable to expect your 7000 machine cluster to do stuff when you literally don't even touch it at all.  Unless it's super simple cases
[2014-07-08 22:05:57 -0400] gyoza: If you're trying to include a file say a config file you'd want to use the template function
[2014-07-08 22:06:03 -0400] jkeiser: anop: for example, I can totally imagine the recipe you create automatically upgrading to the latest patch level of Java without intervention
[2014-07-08 22:06:13 -0400] gyoza: so weird seeing my name capitalized
[2014-07-08 22:06:19 -0400] gyoza: not used to it
[2014-07-08 22:06:19 -0400] gyoza: lol
[2014-07-08 22:07:00 -0400] jkeiser: anop: so for a while you're in good shape.  But when your app changes, and you want a higher major version of Java, you really want someone in charge (like you presumably) to tell the system "yes, I want this major version of Java and I want you to install the new version of my app."  You don't want it automatic, or it could mess up your system
[2014-07-08 22:07:00 -0400] mallu: I know this is not the correct forum but wondering if anyone use aws autoscale with the latest snapshot
[2014-07-08 22:07:25 -0400] anop: yes
[2014-07-08 22:07:32 -0400] anop: so it boils down to resources and needs.
[2014-07-08 22:07:35 -0400] duallain: awc737: Take a look at http://docs.opscode.com/resource_cookbook_file.html
[2014-07-08 22:07:46 -0400] anop: but they are talking about cloud
[2014-07-08 22:07:48 -0400] jkeiser: Automation will always require some level of manual intervention.  *Good* automation only requires you to intervene when you really have a major concern.
[2014-07-08 22:08:13 -0400] jkeiser: Managing 7000 machines by logging into them manually and running a command would be the definition of bad automation.
[2014-07-08 22:09:06 -0400] anop: lets see what happens
[2014-07-08 22:09:10 -0400] anop: they are talking cloud
[2014-07-08 22:09:28 -0400] anop: but not sure i am convinced yet. it boils down to resources
[2014-07-08 22:09:29 -0400] jkeiser: anop: I kinda have to get back to writing code, but if you would like, I'm happy to find you a local meetup.  Even if you are not convinced, I guarantee you will learn new things and meet cool people
[2014-07-08 22:10:19 -0400] anop: you seem like a seller
[2014-07-08 22:10:20 -0400] anop: :D
[2014-07-08 22:10:35 -0400] awc737: duallain it looks like that is for referencing "The location of a file in the /files directory in a cookbook located in the chef-repo"
[2014-07-08 22:10:53 -0400] awc737: where as my user might have put "~/.ssh/id_rsa.pub" into my config variable
[2014-07-08 22:11:39 -0400] jkeiser: anop: I'm actually a coder :)  I just don't like when people are genuinely looking for answers and don't get them
[2014-07-08 22:11:55 -0400] jkeiser: anop: and I don't have enough time to do the whole job of giving the answer right now :)
[2014-07-08 22:12:13 -0400] anop: :P
[2014-07-08 22:13:09 -0400] jkeiser: anop: if you want to search yourself, most places in the U.S. have a meetup at https://meetup.com
[2014-07-08 22:13:14 -0400] jkeiser: Search for devops or chef
[2014-07-08 22:13:55 -0400] pk_: so is it just me (highly likely) or does chef-dk come with a more recent version of Ruby (2.x) than the Omnibus installer (1.9)?
[2014-07-08 22:14:39 -0400] mattstratton: pk_ it's not just you :)
[2014-07-08 22:20:16 -0400] pk_: Doh...I'm finding myself having to embed conditionals that handle different Ruby versions in some of our recipes. Feels a bit dirty at times...
[2014-07-08 22:27:44 -0400] miketheman: cwebber: Use an awesome product for monitoring
[2014-07-08 22:28:16 -0400] itmustbejj: I'm looking for an optimal way to override some ENV variables in a recipe (hoping to have access to them during current chef run and subsequent logins)
[2014-07-08 22:28:24 -0400] itmustbejj: Anybody in here using the magic_shell cookbook?
[2014-07-08 22:29:27 -0400] itmustbejj: Seems that is a good way to get ENV vars set for future shells, and I could always source the generated script in profile.d to have access for the current shell or set the ENV vars in a ruby block for the current run
[2014-07-08 22:29:38 -0400] itmustbejj: That still seems kind of junky, anyone have a better suggestion?
[2014-07-08 22:30:20 -0400] tequilarista: does it have to be env vars? why not a config file?
[2014-07-08 22:30:26 -0400] mattberther: itmustbejj: what about the env resource?
[2014-07-08 22:31:00 -0400] tequilarista: json, xml or some other easily-read-into-an-object kind of deal
[2014-07-08 22:31:01 -0400] itmustbejj: @mattberther I thought about it, but I saw this note on top of the resource_env page on opscode: "On UNIX-based systems, the best way to manipulate environment keys is with the ENV variable in Ruby; however, this approach does not have the same permanent effect as using the env resource."
[2014-07-08 22:31:38 -0400] coderanger: itmustbejj: There is no unified way to do that
[2014-07-08 22:31:40 -0400] itmustbejj: @tequilarista I need certain env vars for python-pip and python-requests to point to a custom cabundle
[2014-07-08 22:32:03 -0400] mattberther: the model I that I follow is a ruby block with an action of nothing that adds it to ENV -- then the env resource notifies the ruby_block
[2014-07-08 22:32:05 -0400] coderanger: itmustbejj: Linux doesn't offer a central way to set env vars like that, some distros have solutions for their default shell though
[2014-07-08 22:32:08 -0400] itmustbejj: @coderanger ok thanks, I'm newish to chef so I'm always second guessing the "chef way" to do it
[2014-07-08 22:32:14 -0400] itmustbejj: showing my python background :)
[2014-07-08 22:32:25 -0400] mattberther: itmustbejj: an example is at the bottom of https://github.com/mattberther/git/blob/master/recipes/windows.rb
[2014-07-08 22:32:28 -0400] coderanger: itmustbejj: It isn't a question of "the chef way", there literally isn't a common linux way to do it
[2014-07-08 22:32:52 -0400] coderanger: windows is a different story, it does have a system for controlling system-level env vars
[2014-07-08 22:33:30 -0400] itmustbejj: @coderanger ok well all I have to worry about is ubuntu machines (for the foreseeable future).
[2014-07-08 22:33:57 -0400] coderanger: So the env resource has no persistent effect on non-windows systems (it should probably just be an error, but oh well)
[2014-07-08 22:34:37 -0400] itmustbejj: I know the way magic_shell does it works fine on my target machines (custom.sh files in /etc/profile.d) and then I can set the ENV vars I need in the current ruby block
[2014-07-08 22:34:41 -0400] coderanger: itmustbejj: Do you want these to load for interactive session only, or services too?
[2014-07-08 22:35:31 -0400] itmustbejj: @coderanger both I guess. I need these set for anyone who ssh's in and also need them available in the chef runs
[2014-07-08 22:35:56 -0400] coderanger: itmustbejj: Those two things are not related
[2014-07-08 22:36:13 -0400] coderanger: You can build a resource to do both, but they are isolated operations
[2014-07-08 22:36:58 -0400] jtimberman: and the reason it isn't persisted on non-Windows systems is because "why would we put ENV variables in a single place for ALL shells to consume"
[2014-07-08 22:37:26 -0400] jtimberman: since who knows what shell you're using, or how the distribution you're using decides to source those on login (or login w/o TTY)
[2014-07-08 22:37:36 -0400] coderanger: jtimberman: Sure, but the resource should probably just throw an error instead of silently doing the "wrong" thing
[2014-07-08 22:38:22 -0400] jtimberman: probably. i've not used it except on windows.
[2014-07-08 22:38:38 -0400] itmustbejj: ok well thanks for the validation guys
[2014-07-08 22:38:43 -0400] coderanger: Yeah, I had forgotten it had a fallback behavior for linux :)
[2014-07-08 22:38:59 -0400] coderanger: itmustbejj: I don't _think_ profile.d is normally sourced for service configs
[2014-07-08 22:39:14 -0400] coderanger: itmustbejj: So you would have to implement that yourself depending on what service system you are using
[2014-07-08 22:40:41 -0400] jtimberman: yeah it varies by distribution and shell.
[2014-07-08 22:40:53 -0400] jtimberman: and probably how they interpret lsb
[2014-07-08 22:41:02 -0400] itmustbejj: coderanger: the tl;dr is I set up a pypi proxy with our custom packages. I need a few ENV variable to point pip at the right stuff.
[2014-07-08 22:41:14 -0400] coderanger: itmustbejj: No, use a pip.conf file
[2014-07-08 22:41:31 -0400] coderanger: itmustbejj: http://pip.readthedocs.org/en/latest/user_guide.html#config-file
[2014-07-08 22:41:55 -0400] itmustbejj: I am using a pip.conf but I'm setting a global one then "export PIP_CONFIG_FILE=/etc/pip.conf"
[2014-07-08 22:42:07 -0400] itmustbejj: instead of writing out a pip.conf for every possible user
[2014-07-08 22:42:29 -0400] androidbruce: is anyone using RDS and SQL?
[2014-07-08 22:43:01 -0400] itmustbejj: coderanger: basically the last comment here https://github.com/pypa/pip/issues/309
[2014-07-08 22:43:19 -0400] itmustbejj: well....second to last
[2014-07-08 22:43:41 -0400] coderanger: itmustbejj: I would just write the config out for all users
[2014-07-08 22:43:56 -0400] coderanger: itmustbejj: I've had no shortage of problems with this before >_<
[2014-07-08 22:44:07 -0400] itmustbejj: coderanger: Maybe I'm trying to outclever myself
[2014-07-08 22:44:14 -0400] coderanger: itmustbejj: too many ways for that env var to not be set correct (ex. sudo env_reset)
[2014-07-08 22:46:24 -0400] coderanger: itmustbejj: Alternatively replace /usr/bin/pip (or whatever) with a wrapper script that sets the env var and delegates to the real pip (via python -m pip
[2014-07-08 22:46:49 -0400] coderanger: itmustbejj: If you want help, always happy to talk python+chef stuffs and I do consulting :)
[2014-07-08 22:46:52 -0400] jperry: are folks installing chefdk on their CI servers?
[2014-07-08 22:46:54 -0400] itmustbejj: coderanger: I like that solution :)
[2014-07-08 22:47:11 -0400] itmustbejj: coderanger: I actually saw you at Djangocon in portland I think doing one of your talks
[2014-07-08 22:47:22 -0400] coderanger: itmustbejj: Heh, that was a lot of years ago
[2014-07-08 22:47:35 -0400] itmustbejj: Yeah Portland is a fun, weird place
[2014-07-08 22:47:39 -0400] jperry: just thinking that if local users are installing chefdk locally to develop how to ensure you continuous integration env matches?
[2014-07-08 22:47:54 -0400] itmustbejj: coderanger: thanks for the offer
[2014-07-08 22:48:00 -0400] coderanger: jperry: Do you need berkshelf installed on the CI server?
[2014-07-08 22:48:07 -0400] jperry: yes
[2014-07-08 22:48:10 -0400] jperry: and test kitchen
[2014-07-08 22:48:11 -0400] coderanger: jperry: Thats the main reason to use chefdk right now
[2014-07-08 22:48:24 -0400] coderanger: jperry: TK is easy to install as a gem, but berks requires gecode which sucks to compile
[2014-07-08 22:48:30 -0400] coderanger: jperry: You can use system packages though
[2014-07-08 22:48:39 -0400] coderanger: (unless you are on the latest ubuntu)
[2014-07-08 22:48:42 -0400] jperry: coderanger: any idea what Chef uses?
[2014-07-08 22:48:52 -0400] coderanger: jperry: In terms of what?
[2014-07-08 22:49:06 -0400] jperry: they must test their cookbooks that they maintain
[2014-07-08 22:49:12 -0400] jperry: Im assuming they use CI
[2014-07-08 22:49:19 -0400] jperry: I dont care about the compile part
[2014-07-08 22:49:29 -0400] jperry: I can bootstrap chef on my CI Servers and install whatever
[2014-07-08 22:49:36 -0400] coderanger: jperry: I don't work there so I can't comment directly, but given that their CI setup predates chefdk by several years, I doubt it
[2014-07-08 22:49:38 -0400] jperry: I guess I would just have to do a good job of keeping things in sync
[2014-07-08 22:50:00 -0400] coderanger: jperry: What are you trying to test, just cookbooks via TK?
[2014-07-08 22:50:06 -0400] jperry: yeah
[2014-07-08 22:50:23 -0400] jperry: I guess I could just install chefdk manually
[2014-07-08 22:50:28 -0400] jperry: and manage everything else via chef
[2014-07-08 22:50:33 -0400] coderanger: jperry: You can take a look at https://github.com/poise/poise/blob/master/.travis.yml for an example
[2014-07-08 22:50:49 -0400] coderanger: jperry: installing chefdk and omnibus-chef side by side may result in a lot of confusion, I wouldn't
[2014-07-08 22:50:58 -0400] jperry: okay
[2014-07-08 22:51:00 -0400] jperry: good point
[2014-07-08 22:51:25 -0400] jperry: ah that link uses docker?
[2014-07-08 22:51:57 -0400] coderanger: jperry: Indeed, its the only solution I've found for consistent test results
[2014-07-08 22:52:11 -0400] jperry: ah cool.  Ill check that out to see if i can run that on my teamcity agents
[2014-07-08 22:52:12 -0400] coderanger: well vagrant+vbox locally is consistent, but too slow to be workable for a CI system
[2014-07-08 22:52:29 -0400] jperry: yeah I would love to not use vbox
[2014-07-08 22:53:08 -0400] jperry: coderanger: thx for the pointer.
[2014-07-08 22:53:14 -0400] coderanger: If you are operating on an internal, trusted network you might not need all the key/auth stuff, but caveat emptor
[2014-07-08 22:53:27 -0400] jperry: thx
[2014-07-08 22:58:46 -0400] s1991: Hello anybody has idea how to prevent this error "pip can't proceed with requirement 'pytz (from -r /vagrant/pgd/requirements.txt (line 8))' due to a pre-existing build directory."
[2014-07-08 23:00:49 -0400] coderanger: s1991: remove the build/ folder in your venv
[2014-07-08 23:01:42 -0400] s1991: coderanger: I can delete that now, but if further I get this error, how would I handle that via recipe
[2014-07-08 23:01:51 -0400] s1991: or there's no way
[2014-07-08 23:01:58 -0400] coderanger: s1991: You wouldn't, its a non-convergent siutation
[2014-07-08 23:02:13 -0400] coderanger: s1991: It would only happen if an earlier chef run failed
[2014-07-08 23:02:49 -0400] s1991: coderanger: do if earlier pip fails, that the only way
[2014-07-08 23:03:11 -0400] coderanger: Yes, I was presuming pip failed during a chef run
[2014-07-08 23:03:42 -0400] viglesias: coderanger: in the case of that .kitchen.travis.yml from the poise cookbook, its pointing to the docker.poise.io docker endpoint, could you run docker locally on the travis vm?
[2014-07-08 23:04:00 -0400] coderanger: viglesias: I could but it would be much slower
[2014-07-08 23:04:36 -0400] coderanger: you want a beefy machine running the actual test VMs
[2014-07-08 23:04:47 -0400] coderanger: but I suppose it depends on how many test cases you are going to run
[2014-07-08 23:05:09 -0400] viglesias: coderanger: ack it will be heavy
[2014-07-08 23:06:02 -0400] coderanger: viglesias: I'm hoping at some point in the future that I can open up the poise docker server to other projects so they don't have to manage it
[2014-07-08 23:07:16 -0400] viglesias: coderanger: that would be awesome, let me know how/when i can help
[2014-07-08 23:08:51 -0400] coderanger: viglesias: For that to happen I'll have to do a lot of armoring, and it will still probably be invitation only to prevent abuse :-/
[2014-07-08 23:10:02 -0400] viglesias: coderanger: understood
[2014-07-08 23:17:38 -0400] gswallow: ok, halp.
[2014-07-08 23:17:38 -0400] gswallow: https://gist.github.com/gswallow/8e14f288a96a8ebd7356
[2014-07-08 23:17:47 -0400] JoshZ_: jkeiser: I have a quick question on running chef-metal locally...
[2014-07-08 23:18:02 -0400] paulmc: join #chefspec
[2014-07-08 23:18:22 -0400] gswallow: I've tried updating the chef gem to the latest; I've disabled reporting.  I've disabled reporting_url_fatals.
[2014-07-08 23:18:44 -0400] gswallow: I still get that error code every time; after chef-client thinks the node is converged.
[2014-07-08 23:19:01 -0400] gswallow: Also, will chef-metal mean I don't have to deal with these godawful AWS cloudformation templates?
[2014-07-08 23:19:02 -0400] coderanger: gswallow: Something in your node data is cranky
[2014-07-08 23:19:04 -0400] shlant: coderanger: any idea why runit logs for unicorn would be spitting "chpst unable to run unicorn file does not exist" when using app_ruby?
[2014-07-08 23:19:28 -0400] coderanger: shlant: It can't find the unicorn binary
[2014-07-08 23:19:46 -0400] shlant: coderanger: is that probably because I am using rbenv?
[2014-07-08 23:19:54 -0400] coderanger: gswallow: 1) yes metal is a competitor of sorts for cfn 2) there are better ways to use cfn :)
[2014-07-08 23:20:11 -0400] coderanger: shlant: Possibly, if it isn't in your path then you would see that error
[2014-07-08 23:20:17 -0400] JoshZ_: jkeiser: chef-metal automatically assigns my localhost (or the provisioner node) to _default environment.. so any of my searches in my recipes that check an environment fail if I assign an environment in my metal recipe.
[2014-07-08 23:21:04 -0400] JoshZ_: jkeiser: is there a way (in the chef metal recipe) to set the environment of the provisioner to match that of the rest of the machines?
[2014-07-08 23:21:44 -0400] Xore: hi, i'm digging into chef-client to figure out why proxy support for remote_file s based on URLS (eg, remote_file w/ source "http://pkg.jenkins-ci.org/debian/jenkins-ci.org.key"  is totally broken.
[2014-07-08 23:22:02 -0400] Xore: so here i am deep in the guts of chef/http/basic_client.rb
[2014-07-08 23:22:20 -0400] Xore: and there's a method called "proxy_uri"
[2014-07-08 23:22:39 -0400] Xore: with a line: proxy = URI.parse(proxy) if String === proxy
[2014-07-08 23:23:27 -0400] Xore: now, here, the form of "proxy" is   proxy.mycompany.com:8080    -- at some point, the "http://" has been stripped off my proxy, because the environment variable  contains "http://proxy.mycompany.com:8080"
[2014-07-08 23:23:52 -0400] Xore: worth noting: URI.parse *requires* that the protocol be part of the parsed string, otherwise it fails to parse
[2014-07-08 23:24:33 -0400] Xore: such that after lhis line (87?, hard to say with all my debug output cruft)
[2014-07-08 23:24:48 -0400] Xore: proxy.host and proxy.port should resolve to something, but they do not.
[2014-07-08 23:25:38 -0400] Xore: any ruby gurus in the room know of an alternative to URI.parse that actually work with a protocol-less URI?
[2014-07-08 23:26:12 -0400] coderanger: Xore: No, it sounds like its just a bug
[2014-07-08 23:26:21 -0400] Xore: ok. i will file then
[2014-07-08 23:27:01 -0400] Xore: it looks like you've recently switched from JIRA to github issues?
[2014-07-08 23:28:07 -0400] tabolario: Xore: You can use the addressable gem
[2014-07-08 23:28:48 -0400] tabolario: This works fine with that if it's what you're aiming for: `uri = Addressable::URI.parse("//example.com/path/to/resource/")`
[2014-07-08 23:28:57 -0400] tabolario: or without the // too
[2014-07-08 23:29:12 -0400] coderanger: Xore: That is correct
[2014-07-08 23:29:23 -0400] coderanger: tabolario: Chef wouldn't switch to that most likely
[2014-07-08 23:29:50 -0400] tabolario: Ohh oops! I must've stepped in late to the conversation. I thought he was asking generally :)
[2014-07-08 23:30:51 -0400] Xore: tabolario: thanks, but yes, you missed my entire preamble ;-)
[2014-07-08 23:40:49 -0400] tscanausa: sometimes I just cant get chef to die
[2014-07-08 23:41:53 -0400] Xore: https://github.com/opscode/chef/issues/1618
[2014-07-08 23:41:56 -0400] Xore: thanks
[2014-07-08 23:51:31 -0400] jkeiser: JoshZ_: this is when you are running metal from the workstation (so the provisioner is the workstation)?
[2014-07-08 23:52:20 -0400] JoshZ_: yes correct!
[2014-07-08 23:52:45 -0400] jkeiser: JoshZ_: and you are running recipes *on* the workstation / provisioner node that do searches, and that assume your node's environment is the one you want to search in?
[2014-07-08 23:53:10 -0400] jkeiser: JoshZ_: trying to understand the scenario--provisioner / workstation node can be set up to create machines in multiple environments
[2014-07-08 23:53:37 -0400] tscanausa: by I want chef to die, I mean some times I want it not to correct my changes
[2014-07-08 23:54:01 -0400] jkeiser: JoshZ_:in environments like that, the searches really need to be able to be passed a parameter (maybe they should be functions?) with the environment
[2014-07-08 23:54:39 -0400] JoshZ_: well I am now simply for testing.. But... my searches that are on the clients that chef-metal is creating (and putting in a chef env) are failiing until I change my workstation into the same environment as the rest of the nodes...
[2014-07-08 23:54:41 -0400] viglesias: jkeiser: i have been thinking of chef-metal as cloudformation like lately, and having params would be awesome
[2014-07-08 23:55:12 -0400] viglesias: jkeiser: for now i was going to be using env variables
[2014-07-08 23:55:25 -0400] jkeiser: JoshZ_: so the search is actually run from within the chef-client run on the target machine, right?
[2014-07-08 23:55:35 -0400] JoshZ_: yes correct
[2014-07-08 23:55:48 -0400] jkeiser: JoshZ_: and you set the chef_environment of the machines you were creating?
[2014-07-08 23:55:57 -0400] jkeiser: JoshZ_: machine 'blah' do chef_environment 'blah' ...
[2014-07-08 23:56:02 -0400] JoshZ_: yes with_chef_environment "integration"
[2014-07-08 23:56:21 -0400] jkeiser: JoshZ_: after that point, it shouldn't be a matter of metal, at least not as far as environments
[2014-07-08 23:56:30 -0400] jkeiser: I'm sort of confused why it would happen
[2014-07-08 23:56:39 -0400] jkeiser: JoshZ_: what do the searches look like?
[2014-07-08 23:56:46 -0400] JoshZ_: maybe it is an issue with chef zero then
[2014-07-08 23:56:55 -0400] jkeiser: viglesias: parameters for which?
[2014-07-08 23:57:34 -0400] jkeiser: JoshZ_: can you take a look at the nodes you created (in the nodes dir) and see what environment is on them?
[2014-07-08 23:57:42 -0400] JoshZ_: search(:node, "chef_environment:#{node.environment} AND roles:tcn-cluster-slave")[1][:ipaddress] and search(:node, "role:tcn-cluster-master")[0][:ipaddress] these only work when I change my workstation into the same env...
[2014-07-08 23:57:48 -0400] jkeiser: JoshZ_: let's rule that out first
[2014-07-08 23:58:00 -0400] JoshZ_: yes they are in the correct env.
[2014-07-08 23:58:17 -0400] jkeiser: JoshZ_: what is node.environment set to on the target machine?
[2014-07-08 23:58:22 -0400] jkeiser: JoshZ_: just before that search?
[2014-07-08 23:58:32 -0400] JoshZ_: the ones that metal creates are in the "integration" end
[2014-07-08 23:59:01 -0400] JoshZ_: it should be "integration" since chef-metal spins up the nodes etc right?
[2014-07-08 23:59:07 -0400] jkeiser: JoshZ_: so the search string is chef_environment:integration AND roles:tcn-cluster-slave, and you have verified this?
[2014-07-08 23:59:16 -0400] jkeiser: JoshZ_: it should be :)  We should check it if you haven't already
[2014-07-08 23:59:27 -0400] JoshZ_: ok Ill put that in. one sec.
[2014-07-08 23:59:43 -0400] jkeiser: viglesias: there is a new feature in chef-metal called profiles that *might* have something to what you are talking about.  Like, parameterization for dev, test, qa, prod environments

[2014-07-29 00:00:42 -0400] Damm: i don't know why they make you compile
[2014-07-29 00:00:50 -0400] Damm: but you prolly should be just downloading pypy
[2014-07-29 00:01:08 -0400] Damm: it smells to compile stuff in chef cookbooks on production boxes
[2014-07-29 00:01:14 -0400] Damm: nasty ranky
[2014-07-29 00:02:32 -0400] doug1: Damm: I'm ok with that as long as it's reproducable. but right now, it is just broken
[2014-07-29 00:02:59 -0400] doug1: considering that python is used for yum on redhat and it's considered not a good idea to replace standard python, you'd think the alternative install would be beter supported
[2014-07-29 00:03:12 -0400] doug1: (or just work) (or be documented)
[2014-07-29 00:03:35 -0400] doug1: you know developers... gotta have the latest thing...
[2014-07-29 00:33:43 -0400] davidordave: soooooo, trying to bring up supermarket locally and getting an error installing libarchive (unable to compile due to a missing archive.h? wa?) Anyone run into this before?
[2014-07-29 00:39:35 -0400] coderanger: davidordave: apt-get install libarchive-dev
[2014-07-29 00:39:51 -0400] davidordave: @coderanger thanks :)
[2014-07-29 00:41:58 -0400] davidordave: out of curiosity, shouldnt that be installed by the cookbook since the chef run will fail without it? Or am I missing something.
[2014-07-29 00:42:50 -0400] coderanger: davidordave: I've not looked at the cookbook
[2014-07-29 00:45:57 -0400] coderanger: davidordave: What was trying to install the libarchive gem?
[2014-07-29 00:46:08 -0400] coderanger: davidordave: It isn't in the gemfile for the project
[2014-07-29 00:48:56 -0400] davidordave: @coderanger, the cookbook is running an execute block to bundle the supermarket gem, which in turn installs (or attempts to install) libarchive.
[2014-07-29 00:50:52 -0400] coderanger: Hmm, I don't see that in the code
[2014-07-29 00:51:19 -0400] davidordave: now that you mention it I dont either. Which makes me very confused
[2014-07-29 00:51:37 -0400] davidordave: it isnt in the gemfile or the lock
[2014-07-29 00:52:34 -0400] davidordave:  Gem files will remain installed in /supermarket/vendor/ruby/2.0.0/bundler/gems/winebarrel-libarchive-ruby-clone-a5a748c73141 for inspection. was what chef spit out.
[2014-07-29 00:52:53 -0400] davidordave: maybe I misinterpreted that
[2014-07-29 00:53:37 -0400] davidordave: though Make sure that `gem install libarchive -v '0.1.2'` succeeds before bundling. seems to be pretty straightforward
[2014-07-29 00:53:39 -0400] davidordave: :)
[2014-07-29 00:54:10 -0400] coderanger: davidordave: Are you installing from master?
[2014-07-29 00:54:34 -0400] coderanger: cwebber: ^^
[2014-07-29 00:54:42 -0400] davidordave: yes, spinning up a vagrant instance to check it out
[2014-07-29 00:56:25 -0400] davidordave: @coderanger, just check and it appears as though I havent pulled recently. Updating from master to see if it has been resolved.
[2014-07-29 00:57:10 -0400] coderanger: davidordave: https://github.com/opscode-cookbooks/supermarket/commit/f21d8da0f0b2fe8ef4558fe9f05140ba64b6ed9f :)
[2014-07-29 00:57:32 -0400] davidordave: gah, sorry for wasting your time. Thanks for the help :)
[2014-07-29 01:31:38 -0400] nulleric: Any idea what is going on here? :
[2014-07-29 01:31:41 -0400] nulleric: https://www.irccloud.com/pastebin/mgPOZfqb
[2014-07-29 01:33:08 -0400] coderanger: nulleric: Likely an rspec API mismatch
[2014-07-29 01:34:23 -0400] nulleric: hmm, the Gemfile may not pin low enough? i know rspec3 wouldnt work. Think i should turn back rspec or chefspec?
[2014-07-29 01:37:12 -0400] nulleric: pined gem 'rspec',      '= 2.14.1', runs, but errors, now i donno if it's the tests or the gems ! :)
[2014-07-29 02:05:05 -0400] kisoku: someara: you broke the world again :-P
[2014-07-29 02:05:09 -0400] kisoku: someara: https://github.com/opscode-cookbooks/ubuntu/pull/10
[2014-07-29 02:23:43 -0400] Damm: guess you better sign that cla if you expect it to be accepted right?
[2014-07-29 02:37:09 -0400] kisoku: um. it's the guy who initiated the PR that needs to sign the CLA
[2014-07-29 02:37:34 -0400] kisoku: I signed a CLA in 2009 and then again when they launched supermarket
[2014-07-29 02:38:46 -0400] coderanger: There is a policy for "obvious fixes", the bot just doesn't know about it :)
[2014-07-29 02:39:21 -0400] Damm: kisoku, i was asked to resign
[2014-07-29 02:39:36 -0400] Damm: coderanger, that reaks
[2014-07-29 02:39:47 -0400] kisoku: I resigned already
[2014-07-29 02:39:54 -0400] kisoku: re-sign
[2014-07-29 02:40:28 -0400] kisoku: I wish they had conditional depends
[2014-07-29 02:40:30 -0400] Damm: basically my theory is it's a policy or it's not; there is no inbetween
[2014-07-29 02:41:58 -0400] Damm: grey areas always create ambiguity
[2014-07-29 02:43:38 -0400] coderanger: kisoku: halting problem jazzhands
[2014-07-29 02:43:46 -0400] kisoku: lol
[2014-07-29 03:18:11 -0400] xmltok: how do i run the rspec included with chefdk, or is there a better way to execute my chefspec tests?
[2014-07-29 03:31:19 -0400] bdha: Is there a way to specify the bookshelf URL in /etc/chef/client.rb?
[2014-07-29 03:31:39 -0400] bdha: The server is passing back a private name, where I have detached servers that need to use an external name.
[2014-07-29 03:38:51 -0400] coderanger: bdha: No, the server generates those URLs, you can customize the URL base in chef-server.rb though
[2014-07-29 03:45:51 -0400] bdha: coderanger: Yeah, that doesn't help if I need int and ext hosts to hit it on two different names.
[2014-07-29 03:46:00 -0400] bdha: For reasons that are stupid but only revolve around not having split horizon.
[2014-07-29 03:46:11 -0400] coderanger: bdha: Yeah, that isn't supported currently
[2014-07-29 03:46:13 -0400] bdha: I'll just do the lamest thing possible which will work. :)
[2014-07-29 03:47:17 -0400] bdha: If it weren't for /etc/hosts, I wouldn't have spent that year in college.
[2014-07-29 03:54:58 -0400] Damm: meh use a hostname if you can
[2014-07-29 03:55:03 -0400] Damm: that's a sticky / bad spot
[2014-07-29 03:56:35 -0400] bdha: I'm using a hostname, but it's only accessible internally. There's an ACL'd VIP with an ext FQDN, but...
[2014-07-29 03:57:02 -0400] bdha: If I set it to chef-ext, I get redir'd to chef-int for bookshelf.
[2014-07-29 03:57:02 -0400] bdha: shrug.
[2014-07-29 03:57:21 -0400] bdha: I'm burning this whole thing in a month or two anyway, so I'm not deeply worried. The hack can be automated during provisioning.
[2014-07-29 03:57:39 -0400] bdha: (He chiseled into his tombstone.)
[2014-07-29 06:00:52 -0400] Damm: it's really sad how the backup gem is stagnated
[2014-07-29 06:01:09 -0400] Damm: now it's getting harder to work cleanly due to stupid versions of ancient net-ssh and multi_json
[2014-07-29 06:01:20 -0400] Damm: gotta love that stagnation
[2014-07-29 07:25:44 -0400] obazoud: is there a way to install two chef-client for a node  ?
[2014-07-29 07:30:17 -0400] coderanger: obazoud: Not sure what you mean
[2014-07-29 07:34:20 -0400] obazoud: coderanger, I have 1 server that is shared between 2 environments. So the idea is to install on this server 2 chef-client.
[2014-07-29 07:34:41 -0400] kisoku: good lord why
[2014-07-29 07:34:41 -0400] coderanger: obazoud: Doable, but reeeeeeally not a good idea, its hilariously error prone
[2014-07-29 07:34:59 -0400] coderanger: obazoud: Check out poise-appenv if you need a way to have overlapping environments
[2014-07-29 07:35:41 -0400] obazoud: coderanger, ok thanks for your feedback
[2014-07-29 07:36:59 -0400] cheeseplus: obazoud: if you absolutely have to do that - which you shouldn't ever but I've seen it happen, I've used a single chef-client and have a cron jobs that run the client with a different config on whatever schedule
[2014-07-29 07:37:17 -0400] cheeseplus: case in point was a client that wanted our cookbooks and their cookbooks never to mingle
[2014-07-29 07:37:45 -0400] coderanger: It is just really easy to accidentally cross the streams
[2014-07-29 07:37:52 -0400] coderanger: usually disastrously
[2014-07-29 07:37:56 -0400] cheeseplus: but people pay you several millions of dollars and you do terrible things
[2014-07-29 07:38:03 -0400] coderanger: :)
[2014-07-29 07:38:20 -0400] cheeseplus: or at least allow them to exist because there aren't enough tables in the world to flip
[2014-07-29 07:59:12 -0400] obazoud: I would also like to avoid it, but it is legacy...
[2014-07-29 08:39:54 -0400] kisoku: why is this 404ing ?
[2014-07-29 08:39:57 -0400] kisoku: https://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_ubuntu-1404_chef-provisionerless.box
[2014-07-29 08:48:59 -0400] zaargy: https://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_ubuntu-14.04-i386_chef-provisionerless.bo
[2014-07-29 08:49:12 -0400] zaargy: https://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_ubuntu-14.04_chef-provisionerless.box
[2014-07-29 08:49:33 -0400] zaargy: you can see what's there by going to https://opscode-vm-bento.s3.amazonaws.com/
[2014-07-29 08:49:46 -0400] zaargy: and as you can see that one doesn't exist and you dont mention where you got the link from :)
[2014-07-29 09:22:50 -0400] SmudgerDan: where can I find the road map, so I know when the next version of chef-client might be released?
[2014-07-29 10:13:31 -0400] Gambi123123: hi just wanted to tell you the learning curve is hard =D
[2014-07-29 10:13:50 -0400] Gambi123123: But I hope it is worth it =)
[2014-07-29 11:24:04 -0400] cloudbud: hi
[2014-07-29 11:43:14 -0400] daxroc_: Attribute files aren't included when depending on a cookbook right? If you want to depend on them in another cookbook you should use include_attributes ?
[2014-07-29 11:47:20 -0400] Amg: if you "depends" on another cookbook in your metadata.rb, the attributes will be added
[2014-07-29 11:52:23 -0400] nebrera: helllo
[2014-07-29 11:53:02 -0400] nebrera: how could I execute from one recipie another .rb file conserving variable defined on the recipie ?
[2014-07-29 12:01:08 -0400] ssd7: Ohai Chefs
[2014-07-29 12:18:50 -0400] SmudgerDan: Hey ssd7
[2014-07-29 12:19:46 -0400] phelms: I have a large powershell script I want to run through chef. What would be the best way to 'include' it? Put in the files folder of the cookbook?
[2014-07-29 12:30:32 -0400] ssd7: phelms: Yes, I would probably use the file resource to move it to a known location, and then use that location to run it.  You could technically include it in the files directory, turn of lazy loading, figure out where it lives in the file cache adn then File.read it into the powershell resource.  But that is gross.
[2014-07-29 12:57:20 -0400] phelms: ssd7: Thanks for the reply - Would it be OK if I moved it to C:/Chef/cache/ folder or should I just stick with the OS /temp folder
[2014-07-29 13:01:24 -0400] quantumfoam: knife cookbook test only checks basic ruby syntax, right?
[2014-07-29 13:34:51 -0400] chef322: Looking for code help.  How do I say something like this: if node = physical, continue in recipe.
[2014-07-29 13:37:46 -0400] broconne: chef322 - how would you know if its a physical node?
[2014-07-29 13:38:01 -0400] nulleric: chef322: you can use chef sugar and detect if it's `cloud?` possibly. Depends on how you'd decide it's physical or not. (not could doesn't nesisarily mean not physical) https://github.com/sethvargo/chef-sugar
[2014-07-29 13:41:15 -0400] chef322: I could try something ugly like, if node = virtual, do nothing, else, do what I actually want.
[2014-07-29 13:42:23 -0400] chef322: How do I learn more about this "node[:virtualization]"
[2014-07-29 14:28:56 -0400] onxis: Greetings all!
[2014-07-29 14:29:05 -0400] SmudgerDan: Ohai!
[2014-07-29 14:29:32 -0400] onxis: ...so what's evenyone using for BMP with Chef these days?
[2014-07-29 14:30:23 -0400] onxis: I have a Razor/Chef POC at the moment, but I'm struggling with how much of the configuration should be handled by Razor before handing it off to Chef
[2014-07-29 14:30:41 -0400] SmudgerDan: I have no idea what you are talking about =D
[2014-07-29 14:30:42 -0400] onxis: Thinking "Just enough"
[2014-07-29 14:31:23 -0400] onxis: SmudgerDan: That's ok
[2014-07-29 14:34:16 -0400] thom: onxis: interesting, i hadn't seen razor before
[2014-07-29 14:34:47 -0400] thom: but yes, just enough to get chef installed is generally the metric i'd apply
[2014-07-29 14:35:05 -0400] onxis: thom:  Razor is neat! ....that's what I thought as well
[2014-07-29 14:35:21 -0400] onxis: I'm having some isues with vmware installer
[2014-07-29 14:35:34 -0400] onxis: when I try to boot from SAN
[2014-07-29 14:35:46 -0400] phelms: Hello! I have this recipe that I wrote. the variables in the powershell_script are not being converted/called https://gist.github.com/Phelms215/a29d9e0ac797439f98bf
[2014-07-29 14:43:20 -0400] acqant: I have a common execute block that I want to notify. It's not triggered by a file or template.
[2014-07-29 14:43:40 -0400] acqant: Do I just make a another execute block with no command and notify the common one?
[2014-07-29 14:53:31 -0400] cwj: acqant: in the past I have used an empty ruby_block
[2014-07-29 15:04:18 -0400] jtimberman: quantumfoam: yes - knife cokbook test only checks ruby syntax in .rb and .erb files in the cookbook.
[2014-07-29 15:06:46 -0400] jtimberman: quantumfoam: there was discussion in an issue on the chef-dk project to add a sub command to 'chef' that would run tests
[2014-07-29 15:08:43 -0400] dcparker: hey, i'm having an interesting problem with lwrp
[2014-07-29 15:09:32 -0400] dcparker: i made an action: restart in my provider because delayed restarts weren't queueing properly. but now whenever chef runs that action block it thinks that it's "up to date" and doesn't actually run anything
[2014-07-29 15:09:43 -0400] dcparker: i tried putting a service resource and an execute resource in the action block
[2014-07-29 15:13:46 -0400] jtimberman: Anyone here using Chef to manage Macs and use Macports as the package system instead of Homebrew?
[2014-07-29 15:14:07 -0400] Kr4zy: I am new to Chef. I am seeing this declaration: search(:node, "tags:#{node[:tags]}"). I didn't see a tag command before this so where does the code retrieve the tag from?
[2014-07-29 15:14:35 -0400] quantumfoam: jtimberman: well there's chefspec
[2014-07-29 15:14:40 -0400] quantumfoam: and foodcritic
[2014-07-29 15:14:53 -0400] quantumfoam: although I have testing VMs I can fuck with so it's all good
[2014-07-29 15:15:00 -0400] jtimberman: quantumfoam: right, both of which were created long after 'knife cookbook test'
[2014-07-29 15:15:03 -0400] quantumfoam: just deploy it and see what happens...
[2014-07-29 15:15:28 -0400] jtimberman: and these days we're looking to move more workflow functionality out of knife and into 'chef'
[2014-07-29 15:15:46 -0400] jtimberman: like generating cookbooks/repositories, etc.
[2014-07-29 15:19:15 -0400] some1: Hey guys, im new to chef and i want to deploy a logstash agent in my vagrant box with this cookbook: https://github.com/lusis/chef-logstash ; in the attributes I see this: "default['logstash']['instance']['default']['base_config']    = ''" and i think this is for providing a config file, but i cant figure out how to make use of it. Can you guys hel
[2014-07-29 15:19:16 -0400] some1: p me pls?
[2014-07-29 15:20:49 -0400] j^2: yo
[2014-07-29 15:22:46 -0400] mjuszcza1: I'm so confused.  Per https://github.com/opscode-cookbooks/apt, setting default['apt']['compile_time_update'] should force an apt-get update, but it isn't.  apt-get update never runs until AFTER packages are installed, and since my VM image is out of date, it's dying on an attempted package installation.  Any ideas?
[2014-07-29 15:23:34 -0400] mjuszcza1: I am setting it in attributes/default.rb in my application cookbook, which does an include_recipe 'apt'
[2014-07-29 15:24:10 -0400] mjuszcza1: But one of the other cookbooks i use down-the-line also includes apt. Is there some sort of precedence I need to do?
[2014-07-29 15:26:28 -0400] Cuzner: onefrankguy: btw, your advice made this work - http://hastebin.com/emoyuxunuv.vhdl
[2014-07-29 15:26:31 -0400] Cuzner: thanks
[2014-07-29 15:27:06 -0400] onefrankguy: Cuzner: Yay! Glad you got it working.
[2014-07-29 15:31:02 -0400] onxis: ....anyone got any tips on bare metal provisioning an x86 server?
[2014-07-29 15:31:41 -0400] onxis: Would like to install ESXi from (boot from SAN) and have the node be registered, configured with Chef
[2014-07-29 15:32:05 -0400] jreslock: onxis: I use cobbler to install the OS and then add a chef-client run as a post-install action in the kickstart/preseed
[2014-07-29 15:32:25 -0400] onxis: jreslock: yes! ...someone also recommend that
[2014-07-29 15:32:41 -0400] onxis: jreslock: I'm very interested in hearing more!
[2014-07-29 15:33:25 -0400] jreslock: onxis: I dont have experience installing ESXi that way, all of my systems are CentOS or Ubuntu
[2014-07-29 15:34:12 -0400] jreslock: onxis: I did find thishttp://www.virtuallyghetto.com/2012/09/automating-esxi-51-kickstart-tips-tricks.html
[2014-07-29 15:35:44 -0400] onxis: jreslock: Thanks for that link, I have checked it out and found it inspiring
[2014-07-29 15:41:30 -0400] Damacus: hey everyone
[2014-07-29 15:42:07 -0400] Damacus: I'm having trouble finding some resources or tips of testing ohai plugins. Anyone able to point me in the right direction please?
[2014-07-29 15:42:29 -0400] strictlyb: what specifically?
[2014-07-29 15:43:01 -0400] Damacus: I'm refactoring the nginx ohai plugin from v6 to v7
[2014-07-29 15:43:21 -0400] Damacus: or I'm about to start refactoring it, but need some tests first
[2014-07-29 15:45:19 -0400] Damacus: https://github.com/damacus/nginx/tree/Ohai-7
[2014-07-29 15:46:37 -0400] Kr4zy: when you include a generic recipe like ntp in chef. Does it automatically retrieve the recipe from Chef public repositories?
[2014-07-29 15:50:40 -0400] jeremiahsnapp: Kr4zy: how are you "including" ntp in chef?
[2014-07-29 15:50:59 -0400] Kr4zy: include recipe "ntp"
[2014-07-29 15:51:15 -0400] Kr4zy: i meant include_recipe "ntp"
[2014-07-29 15:52:04 -0400] jeremiahsnapp: are you uploading your cookbooks to a chef server like Hosted Chef or are you just running things locally?
[2014-07-29 15:54:46 -0400] jeremiahsnapp: Kr4zy: so, just putting include_recipe "ntp" will not automatically pull in the recipe from Chef public github repos or from supermarket (the community cookbook site)
[2014-07-29 15:55:17 -0400] gkra: bah...
[2014-07-29 15:55:38 -0400] gkra: so... node.environment and node.chef_environment don't work in chef-solo, so they?
[2014-07-29 15:55:59 -0400] some1: nope
[2014-07-29 15:56:22 -0400] some1: use berkshelf
[2014-07-29 15:56:25 -0400] jeremiahsnapp: Kr4zy: you will need to download the cookbooks and their dependencies to your workstation and upload them to a chef server or download them directly to your node if you are running chef-client in local-mode
[2014-07-29 15:56:39 -0400] gkra: so I guess I learn how to set up chef-zero for test kitchen...
[2014-07-29 15:56:44 -0400] jtimberman: gkra: node.chef_environment does, it's part of the Node object.
[2014-07-29 15:56:51 -0400] Kr4zy: jeremiahsnapp: thanks. just making sure because that's what I am seeing in someone else's code and I didn't see a ntp recipe anywhere in the repo.
[2014-07-29 15:57:07 -0400] jtimberman: but the primary use of enviornments is to pin versions of cookbooks on a chef server
[2014-07-29 15:57:30 -0400] jtimberman: istr someone added environment support to solo, but i've never used it
[2014-07-29 15:57:34 -0400] gkra: we've got a lot of cookbooks that make attribute decisions based on environment, due to stupid infrastructure needs.
[2014-07-29 15:58:07 -0400] gkra: and apparently there was confusion over whetherh it's "node.environment" or "node.chef_environment"
[2014-07-29 15:58:08 -0400] jeremiahsnapp: Kr4zy: yeah, and if you have include_recipe "ntp" in a cookbook recipe then you also should put `depends "ntp"` in that cookbook's metadata.rb file
[2014-07-29 15:58:24 -0400] jtimberman: node.environment isn't a builtin thing
[2014-07-29 15:58:54 -0400] Kr4zy: jeremiahsnapp: if so, it will autopull from the public repo?
[2014-07-29 15:58:56 -0400] gkra: so i'm learning. it's being treated as if it were, though.
[2014-07-29 15:58:57 -0400] jtimberman: node.environment would be the method syntax for an attribute node['environment']
[2014-07-29 15:59:18 -0400] jtimberman: it could be used conventionally. we used to use node['app_environment']
[2014-07-29 15:59:22 -0400] dcparker: i'm running in to this issue in my lwrp: http://serverfault.com/questions/504450/how-to-force-actions-on-up-to-date-resources-in-chef
[2014-07-29 15:59:38 -0400] dcparker: when i set it to notify immediately it works but when i delay it chef says it's up to date
[2014-07-29 16:01:00 -0400] jeremiahsnapp: Kr4zy: to answer that question i need to understand more about some things .. are you running chef-client on your node? if so, is chef-client configured to hit Hosted Chef?
[2014-07-29 16:04:03 -0400] quantumfoam: holy shit, it worked
[2014-07-29 16:04:29 -0400] quantumfoam: I gotta figure out the right syntax for the data bag items, but I just made my first successful cookbook :D
[2014-07-29 16:06:59 -0400] Kr4zy: jeremiahsnapp: not sure as I don't have the environment set up. I am only looking at the code.
[2014-07-29 16:07:06 -0400] jtimberman: quantumfoam: Aww yeah! \o/
[2014-07-29 16:07:52 -0400] quantumfoam: yep, it copies over the tgz file for centrify, extracts it, then runs the install script, then joins the machine to the domain
[2014-07-29 16:08:08 -0400] quantumfoam: I have to say chef-client's output is extremely helpful for debugging each step
[2014-07-29 16:08:17 -0400] quantumfoam: I was easily able to figure out where I had problems
[2014-07-29 16:08:55 -0400] Kr4zy: jeremiahsnapp: how many ways can tag be set in chef? I know about using the tag command to assign a tag, but what else?
[2014-07-29 16:09:24 -0400] jtimberman: Kr4zy: http://docs.getchef.com/dsl_recipe_method_tag.html
[2014-07-29 16:09:34 -0400] jtimberman: from http://docs.getchef.com/chef/dsl_recipe.html
[2014-07-29 16:09:36 -0400] tier: hey guys, if i need to use shell_out in a recipe is the proper way to to get it by doing:  ::Chef::Recipe.send(:include, Chef::MixIn::ShellOut)  ?
[2014-07-29 16:10:20 -0400] quantumfoam: also I shouldn't have installed 11.14 on my workstation
[2014-07-29 16:10:21 -0400] quantumfoam: derp
[2014-07-29 16:10:59 -0400] Kr4zy: jeremiahsnapp: the problem is I don't see the tag command being declare anywhere in the code. but it is doing something like this current_cluster = search(:node, "tags:#{node[:tags]}"). Where does it gets it tag from?
[2014-07-29 16:11:43 -0400] shlant1: nevermind gem lsit
[2014-07-29 16:14:55 -0400] quantumfoam: (because when I bootstrap it tries to install that same version, which doesn't exist for U12.04)
[2014-07-29 16:16:08 -0400] jeremiahsnapp: quantumfoam: you can specify the version you want to use when bootstrapping with the --bootstrap-version option
[2014-07-29 16:16:18 -0400] jeremiahsnapp: http://docs.getchef.com/knife_bootstrap.html#options
[2014-07-29 16:18:06 -0400] zanshin: Can I use cookbook attributes in the opening line of a template, ala: template "#{node["tomcat"]["conf"]}/catalina.sh.includes" do
[2014-07-29 16:18:30 -0400] doug1: I've been trying to get he opscode python cookbook working when installing python to an alternate location. No luck. Has someone done that successfully?
[2014-07-29 16:21:33 -0400] jeremiahsnapp: Kr4zy: you can also set tags using knife http://docs.getchef.com/knife_tag.html
[2014-07-29 16:21:48 -0400] jeremiahsnapp: or set them using the management console (web interface)
[2014-07-29 16:22:12 -0400] jeremiahsnapp: tags don't have to be set in the actual recipes .. that's just another method for managing them
[2014-07-29 16:24:16 -0400] Kr4zy: jeremiahsnapp: ah, I see. Makes sense now. Thanks.
[2014-07-29 16:25:05 -0400] jeremiahsnapp: no problem
[2014-07-29 16:32:15 -0400] Kr4zy: jeremiahsnapp: then I am seeing lb_server = current_cluster.select {|n| n.run_list.to_s =~ /load_balancer/  } and lb_server.first.openstack.public_ipv4. Can you explain what this does especially the .openstack.public_ipv4 part.
[2014-07-29 16:33:03 -0400] shlant1: doug1: where are you putting default['python']['prefix_dir'] ?
[2014-07-29 16:33:38 -0400] gleam: i'm guessing current_cluster is a search, so it's pulling out all of the nodes that have "load_balancer" somewhere in their run list
[2014-07-29 16:33:50 -0400] gleam: the second bit is grabbing the public ip of the vm from openstack metadata
[2014-07-29 16:33:55 -0400] gleam: via ohai
[2014-07-29 16:36:27 -0400] doug1: shlant1: I was putting it at the top of my recipe
[2014-07-29 16:36:55 -0400] doug1: shlant1: http://pastebin.com/hA9tL6dQ
[2014-07-29 16:37:27 -0400] doug1: shlant1: With those settings, it builds it, but I can't find it. A 'find / -name python' doesn't show it and neither does 'find / -name python2.7'
[2014-07-29 16:38:38 -0400] doug1: shlan1: if I uncomment "node.default['python']['binary'] = '/usr/bin/python'" it installs it to /usr/local/bin but then the symlink isn't right (I'd have to run it again to see exactly why)
[2014-07-29 16:39:36 -0400] doug1: shlant1: Also confused by https://github.com/jkess/python/blob/master/recipes/source.rb vs https://github.com/poise/python/blob/master/recipes/source.rb
[2014-07-29 16:40:46 -0400] quantumfoam: jeremiahsnapp: oh yeah I figured that out quick lol
[2014-07-29 16:40:57 -0400] jeremiahsnapp: nice :)
[2014-07-29 16:45:14 -0400] snelly: anybody else running into issues with chef-client on Mac OS X 10.10?
[2014-07-29 16:50:04 -0400] toady00: I've got a weird issue. I can use knife data bag show and see an encrypted data bag, but when I try to use it in a recipe it gives a 404. In the webui, I can see the correct data bag item, but when I click on it, 404. I've tried deleting it and re-uploading it and that didn't help.
[2014-07-29 16:52:04 -0400] anoldhacker: I'm wanting to run chef on a box & not have it's data written back to the server.  I see the client_registration_retries attribute, and I'm wondering if setting this to 0 would work.  I'm having trouble running down where this attribute is accessed, however.
[2014-07-29 16:53:17 -0400] shlant: doug1: which cookbook are you using exactly?
[2014-07-29 16:58:21 -0400] anoldhacker: Huh.  Found it just fine this time.  And nope, it won't work...
[2014-07-29 17:00:04 -0400] doug1: shlant: This one...https://github.com/poise/python/blob/master/attributes/default.rb I _believe_ that's the official opscode one. I saw the other one in relation to bug https://tickets.opscode.com/browse/COOK-3401. I'm confused though becuase that says it's fixed but it's not in the opscode one
[2014-07-29 17:00:05 -0400] lrr: i have a question about the attributes folder in a recipe. i don't quite grasp how to differentiate between the default.rb file and say foo.rb
[2014-07-29 17:00:17 -0400] lrr: how does that work?
[2014-07-29 17:00:31 -0400] doug1: lrr: I think it loads them all but not sure. It's not documented very well
[2014-07-29 17:00:57 -0400] shlant: doug1: and you are install as a package?
[2014-07-29 17:01:06 -0400] lrr: doug1: so there's nothing specific i have to do to reference attributes from foo.rb instead of default.rb in recipe foo.rb?
[2014-07-29 17:01:29 -0400] doug1: shlant: from source. need 2.7 thats only available via source
[2014-07-29 17:01:42 -0400] doug1: lrr: I think it just loads them all in lexical file order
[2014-07-29 17:01:52 -0400] lrr: doug1: ah, ok then
[2014-07-29 17:01:55 -0400] lrr: thanks! :)
[2014-07-29 17:01:59 -0400] doug1: lrr: I _think_
[2014-07-29 17:02:08 -0400] shlant: lrr: do you mean the attributes folder in a COOKBOOK?
[2014-07-29 17:02:09 -0400] lrr: doug1: that's what test kitchen is for ;)
[2014-07-29 17:02:13 -0400] lrr: shlant: yes
[2014-07-29 17:03:44 -0400] anoldhacker: Irr:  default.rb is read first. Then the others in alphabetic order.  This is what I am told.  I've neither checked source nor tested.
[2014-07-29 17:04:31 -0400] lrr: anoldhacker: alright. thanks! :)
[2014-07-29 17:04:33 -0400] shlant: lrr: "An attribute file is located in the attributes/ sub-directory for a cookbook. When a cookbook is run against a node, the attributes contained in all attribute files are evaluated in the context of the node object"
[2014-07-29 17:06:02 -0400] shlant: lrr:  http://stackoverflow.com/a/19633985
[2014-07-29 17:06:58 -0400] doug1: Well I'd sure like to know why setting node.default['python']['prefix_dir'] = '/usr/local' for the opscode python cookbook results in python being installed to /usr/bin/python2.7
[2014-07-29 17:07:26 -0400] lrr: shlant: thanks :)
[2014-07-29 17:11:16 -0400] shlant: doug1: yea I wonder if python['prefix_dir'] is equatable to default['python']['prefix_dir']
[2014-07-29 17:11:36 -0400] shlant: maybe try setting the configure_options explicitely
[2014-07-29 17:12:03 -0400] anoldhacker: default['python']['prefix_dir'] either sets or reads the default value of the attribute.
[2014-07-29 17:12:08 -0400] doug1: shlant: I think maybe... I have to also set node.default['python']['configure_options'] = '--prefix=/usr/local'. There's nothing in that bash block that TELLS it where to install.
[2014-07-29 17:21:44 -0400] Eulipion: fg
[2014-07-29 17:22:25 -0400] doug1: hehe
[2014-07-29 17:26:23 -0400] deviosity: Chef experts, I have an advanced question for you.
[2014-07-29 17:26:43 -0400] deviosity: Hoping to create some templates that are completely driven by random attributes
[2014-07-29 17:27:16 -0400] deviosity: is there a method I can call to grab the for hash for the attributes of a defined
[2014-07-29 17:27:39 -0400] deviosity: role or recipe?
[2014-07-29 17:28:25 -0400] phelms: Is there a way to "fork" a process, or run async for a recipe ?
[2014-07-29 17:32:00 -0400] deviosity: for my example I want to make a template than can grab a hash of the defined attributes for a key and store them as an array and build a list of DBs and their connection strings from nested attributes like this: {"recipe":{"dbs":{"db1":{"url":"db1.doma.in"},{"db2":{"url":"db2.doma.in"},{"db3":{"url":"db3.doma.in"}}}
[2014-07-29 17:44:31 -0400] quantumfoam: ok, so I need to be able to bootstrap nodes from our VM deployment software (vCommander), but I'd like to do so in a way that doesn't require putting a password in at all
[2014-07-29 17:44:52 -0400] strictlyb: use a machine that has an ssh key accessible to the AMI your using
[2014-07-29 17:45:23 -0400] quantumfoam: well that'll work fine for AWS but I'm also deploying to VMWare
[2014-07-29 17:45:34 -0400] strictlyb: i mean
[2014-07-29 17:45:36 -0400] strictlyb: not ams in laymens
[2014-07-29 17:45:44 -0400] strictlyb: what ever image your using for your builds
[2014-07-29 17:45:56 -0400] strictlyb: im aassuming you have a prebaked default image right?
[2014-07-29 17:46:00 -0400] quantumfoam: so just create a key and then include that in the image
[2014-07-29 17:46:02 -0400] prometheanfire: is it possible to set an environment attribute from a recipe?
[2014-07-29 17:46:03 -0400] quantumfoam: yep
[2014-07-29 17:46:47 -0400] prometheanfire: how? haven't been able to find out how
[2014-07-29 17:46:53 -0400] quantumfoam: ok so the other issue there is that it's gonna need to bootstrap with the --sudo option
[2014-07-29 17:46:58 -0400] quantumfoam: but that prompts for a password
[2014-07-29 17:47:58 -0400] strictlyb: in ur image allow the user your coming from to do non password based
[2014-07-29 17:48:21 -0400] Majost: quantumfoam: Not the best option from a security perspective, but you can pass "-p 'mypassword'"
[2014-07-29 17:48:39 -0400] quantumfoam: I really can't, because vCommander logs that in plaintext
[2014-07-29 17:48:44 -0400] Majost: er
[2014-07-29 17:48:45 -0400] Majost: sorrt
[2014-07-29 17:48:48 -0400] Majost: -P
[2014-07-29 17:48:53 -0400] Majost: -p is ssh port
[2014-07-29 17:48:54 -0400] Majost: heh
[2014-07-29 17:49:08 -0400] Majost: ah
[2014-07-29 17:50:12 -0400] quantumfoam: actually
[2014-07-29 17:50:16 -0400] Majost: Can you configure your VMware templates to have NOPASSWD configured?
[2014-07-29 17:51:18 -0400] quantumfoam: I could, but I'd rather not
[2014-07-29 17:51:23 -0400] quantumfoam: actually I think I might have a solution
[2014-07-29 17:51:30 -0400] strictlyb: just do it, and remove the entry when its strapped
[2014-07-29 17:51:37 -0400] strictlyb: or habe your recipe remove that entry
[2014-07-29 17:51:42 -0400] strictlyb: or if you have a better way ;)
[2014-07-29 17:51:49 -0400] quantumfoam: I can wrap the bootstrap command in a powershell script
[2014-07-29 17:51:54 -0400] quantumfoam: vCommander runs on a Windows server
[2014-07-29 17:52:16 -0400] quantumfoam: I've done that before with other stuff and it works fine; I can pass variables into the script
[2014-07-29 17:53:09 -0400] quantumfoam: of course I now want to punch the person who put a $ in the password for the service account vCommander uses...
[2014-07-29 17:53:46 -0400] nico__: hey all got an issue with a chef-client run I can't quite debug.  seems like it should be simple.  pastebin -> http://pastebin.com/gmuEvHSp
[2014-07-29 17:54:39 -0400] Majost: quantumfoam: if you are doing that, you may as well just try to define it in your knife.rb
[2014-07-29 17:54:50 -0400] Majost: either way its cleartext on disk
[2014-07-29 17:55:20 -0400] deviosity: nico__:  Looks like it is your template (erubis):18: syntax error, unexpected '}', expecting keyword_end
[2014-07-29 17:55:40 -0400] nico__: except there's no curly brace anywhere in the template file?
[2014-07-29 17:55:42 -0400] Majost: if you want to try that,  try adding "use_sudo_password 'mypassword'" to the knife.rb
[2014-07-29 17:55:58 -0400] deviosity: it is inferred as the template is converted to ruby
[2014-07-29 17:56:02 -0400] nico__: the content of the tmeplate is in the pastebin as well
[2014-07-29 17:56:14 -0400] deviosity: run erubis -X <tempalte>.erb
[2014-07-29 17:57:04 -0400] deviosity: Hopefully you can look at line 18 of your template and see some sort of syntax error.
[2014-07-29 17:57:19 -0400] Majost: nico__: Your template is  missing an end statement
[2014-07-29 17:57:20 -0400] nico__: nico@nixbox% erubis -X shells.erb
[2014-07-29 17:57:21 -0400] nico__: _buf = '';
[2014-07-29 17:57:21 -0400] nico__:  if @has_zsh
[2014-07-29 17:57:23 -0400] nico__:  else
[2014-07-29 17:57:24 -0400] nico__: _buf.to_s
[2014-07-29 17:57:37 -0400] nico__: with some whitespace between the if and else
[2014-07-29 17:57:44 -0400] nico__: no curly brace to be seen...
[2014-07-29 17:57:56 -0400] deviosity: yeah but no end either for your if statement
[2014-07-29 17:58:02 -0400] nico__: there it is
[2014-07-29 17:58:12 -0400] nico__: thanks.  knew it would be something dumb
[2014-07-29 17:58:27 -0400] Majost: (erubis):18: syntax error, unexpected '}', expecting keyword_end
[2014-07-29 17:58:28 -0400] Majost: =)
[2014-07-29 17:59:23 -0400] prometheanfire: so is there no way of setting environment attributes from a recipe?
[2014-07-29 18:01:54 -0400] loki97123: hello chef-ites
[2014-07-29 18:02:08 -0400] loki97123: can you knife a data bag item as a ruby file?
[2014-07-29 18:02:15 -0400] loki97123: or only as a json file?
[2014-07-29 18:04:10 -0400] coderanger: prometheanfire: No, environments have to be resolved before cookbooks are loaded
[2014-07-29 18:04:20 -0400] coderanger: prometheanfire: You can use poise-appenv to do similar things from a cookbook though
[2014-07-29 18:04:45 -0400] coderanger: loki97123: Only JSON
[2014-07-29 18:04:57 -0400] loki97123: thanks coderanger
[2014-07-29 18:05:17 -0400] loki97123: it's interesting cause you can do roles and other things as .rb, but data bags only .json :(
[2014-07-29 18:05:25 -0400] coderanger: Indeed
[2014-07-29 18:06:54 -0400] loki97123: coderanger do you have history as to why no rb for data bags?  is there a reason why a branch and pull request would get shot down?  it looks fairly easy based on the "from_disk" for the role
[2014-07-29 18:07:20 -0400] coderanger: loki97123: Because it wouldn't make much sense, the only thing in the file would be a single hash
[2014-07-29 18:07:51 -0400] loki97123: except you can comment the thing
[2014-07-29 18:08:10 -0400] loki97123: thanks coderanger
[2014-07-29 18:08:15 -0400] coderanger: loki97123: Yeah, though I would prefer Yaml for that
[2014-07-29 18:08:21 -0400] coderanger: Granted I want Yaml for all of them :)
[2014-07-29 18:21:15 -0400] jf647: Then you want http://jsync.org/ (once it leaps from "fevered mind of Ingy dot net" to "reality").  ;)
[2014-07-29 18:31:14 -0400] prometheanfire: coderanger: thanks
[2014-07-29 18:38:03 -0400] evaryont: is there any documentation on how companies manage their chef repo, syncing it with their chef-server, storing the repo in git? I could possibly create my own but I'm not sure if I'd miss something and run into issues. I'd like to start from an example or template.
[2014-07-29 18:38:56 -0400] jf647: Look at https://github.com/opscode/chef-rfc/pull/34, which is a PR to describe the two officially supported workflows
[2014-07-29 18:40:09 -0400] jf647: Generally, depending on how big you are and how much damage you can do with a broken cookbook upload, you either code review and upload your cookbook after peer review, or you put the upload at the end of a CI pipeline
[2014-07-29 18:40:51 -0400] jf647: And you use tools like foodcritic, ChefSpec and Test-Kitchen to ensure that your cookbook does what it's supposed to, both at the resource collection level and when spun up in a VM and actually deployed
[2014-07-29 18:47:13 -0400] doug1: Am I stupid? Where's the github link? https://supermarket.getchef.com/cookbooks/redis
[2014-07-29 18:49:03 -0400] coderanger: doug1: Did you really just ask that question?
[2014-07-29 18:50:14 -0400] evaryont: jf647: ah I see. looks like my current workflow idea isn't described quite as literally as such in that RFC but a good start
[2014-07-29 18:51:23 -0400] jf647: What's your current idea, if you can summarize it for us?
[2014-07-29 18:52:09 -0400] troyready: Thanks for the great link jf647 ! I've been pondering workflow changes for my org for a bit, and that helps solidify a lot of  what I've been thinking about
[2014-07-29 18:52:33 -0400] doug1: coderanger: Thanks for your help! You are awesome!
[2014-07-29 18:53:02 -0400] jf647: The new Chef RFC process is full of great discussions; star the repo on Github to keep in the loop, and speak up via comments on the PRs
[2014-07-29 18:54:17 -0400] tier: hey everybody, if i need to use shell_out in a recipe is the proper way to to include it by doing:  ::Chef::Recipe.send(:include, Chef::MixIn::ShellOut)  ?
[2014-07-29 18:56:22 -0400] coderanger: tier: No, add "extend Chef::Mixin::ShellOut" to the top of your recipe
[2014-07-29 18:56:28 -0400] bdha: Anyone running Analytics? Could you comment on system sizing?
[2014-07-29 18:57:17 -0400] evaryont: jf647: me? Almost exactly like the described monolithic, but with upstream/supermarket dependencies fetched at the last moment possible. `chef vendor` right before a berks push, basically
[2014-07-29 18:57:53 -0400] tier: coderanger: gracias. i was just looking at the shell_out.rb and saw that mentioned in the comments.
[2014-07-29 18:58:13 -0400] jmreicha_: Is there a way to apply a cookbook/set of cookbooks to an environment?
[2014-07-29 18:58:17 -0400] tier: oddly enough, a whole lot of googling and i couldn't find much of anything in the way of examples for using shell_out!
[2014-07-29 18:59:32 -0400] coderanger: jmreicha_: You can use env-specific run lists in roles
[2014-07-29 18:59:50 -0400] coderanger: tier: Yeah, there aren't really any docs on mixlib-shellout :-(
[2014-07-29 19:01:39 -0400] tier: yeah, all i could gather is if i need to store the result of something it's the way to go haha
[2014-07-29 19:03:17 -0400] jmreicha_: coderanger: I was under the impression that roles were to be stayed away from?
[2014-07-29 19:03:29 -0400] evaryont: jf647: and the dependencies aren't kept in the repository, just Berksfile & metadata.rb.
[2014-07-29 19:03:34 -0400] coderanger: jmreicha_: You can do the same thing with role-ish cookbooks too
[2014-07-29 19:09:58 -0400] jtimberman: jmreicha_: there's nothing wrong with roles for many people :)
[2014-07-29 19:10:13 -0400] jtimberman: http://www.getchef.com/blog/2013/11/19/chef-roles-arent-evil/
[2014-07-29 19:16:01 -0400] raul782: Hi guys,  newbie question is it the same to use node[:hostname] and node['hostname']  in a template?
[2014-07-29 19:16:23 -0400] raul782: or it depends in the attribute file how it was setup?
[2014-07-29 19:16:35 -0400] j^2: raul782: more or less yes
[2014-07-29 19:16:44 -0400] j^2: you want to standardize on one
[2014-07-29 19:16:53 -0400] j^2: it can get confusing down the line
[2014-07-29 19:17:16 -0400] raul782: I see, but why if some cookbooks I depend on use different styles
[2014-07-29 19:17:34 -0400] jtimberman: specifically, node attributes are "hashes with indifferent access" so you can use ['foo'] or [:foo] interchangably.
[2014-07-29 19:17:38 -0400] raul782: do I have to read the each cookbook to see how to call them?
[2014-07-29 19:17:45 -0400] j^2: ah, no its for your own sanity, the symbol and the hostname are equivalent
[2014-07-29 19:18:03 -0400] j^2: or as jtimberman said ;)
[2014-07-29 19:18:12 -0400] jtimberman: chef attributes are indifferent because of exactly that issue - you don't have to care what an author used to set attributes, you can just refer to it with the style you like better.
[2014-07-29 19:18:21 -0400] jtimberman: this is also the source of a contentious foodcritic rule :)
[2014-07-29 19:18:36 -0400] raul782: perfect, that sounds great
[2014-07-29 19:18:53 -0400] jtimberman: the main thing
[2014-07-29 19:19:17 -0400] jtimberman: is you could have a cookbook that sets node['attribute-with-dashes'], and you cannot use node[:attribute-with-dashes].
[2014-07-29 19:19:25 -0400] jtimberman: because dashes are not valid characters in Ruby symbols
[2014-07-29 19:19:40 -0400] raul782: got it
[2014-07-29 19:20:31 -0400] tier: coderanger: my use case for shell_out is to grab the elastic ip of an aws instance... would elastic_ip = shell_out!('curl http://169.254.169.254/latest/meta-data/public-ipv4')  be a valid way to use shell_out ?
[2014-07-29 19:21:37 -0400] coderanger: tier: No, that data is already loaded for you
[2014-07-29 19:21:46 -0400] coderanger: tier: node['ec2']['public_ipv4']
[2014-07-29 19:24:03 -0400] tier: damn i didn't even know that existed
[2014-07-29 19:24:26 -0400] coderanger: tier: All EC2 metadata is loaded by the ohai plugin :-) (except IAM data in the latest version, for security reasons)
[2014-07-29 19:24:53 -0400] tier: to quote nba jam... boomshakalaka
[2014-07-29 19:25:21 -0400] coderanger: tier: You'll also find public_hostname, and the private version of both
[2014-07-29 19:27:31 -0400] tier: awesome... many thanks
[2014-07-29 19:46:03 -0400] phelms: I have two blocks (powershell_script and a ruby_block) is there a way for the ruby block to wait for the powershell script is done before running ? https://gist.github.com/Phelms215/265aaa1f65ee1c836b94
[2014-07-29 19:51:58 -0400] jf647: phelms: you want to give the ruby_block an action of :nothing and then add "notifies :run, 'ruby_block[whatever_its_named]'" to the powershell script resource
[2014-07-29 19:52:29 -0400] jf647: but be careful about adding too much chaining and trying to write your recipes as if they were imperative scripts
[2014-07-29 19:53:04 -0400] jf647: the rule should be to let Chef figure things out and only add notifies where two resources are truly order-dependent
[2014-07-29 19:55:19 -0400] Damm: subscribes works too
[2014-07-29 19:55:22 -0400] phelms: jf647: Thanks, yeah this just emails me the output so it has to wait for powershell to finish :)
[2014-07-29 19:55:24 -0400] Damm: you can have a resource subscribe to another
[2014-07-29 19:55:35 -0400] Damm: sometimes that can be a more effective way
[2014-07-29 19:56:17 -0400] jf647: when you use subscribes instead of notifies, do you still have to put action :nothing?  I must admit I've never tried it that way
[2014-07-29 19:56:33 -0400] Damm: jf647, yep
[2014-07-29 19:57:01 -0400] Damm: jf647, http://docs.getchef.com/resource_common.html#id6
[2014-07-29 19:57:28 -0400] Damm: several real good examples
[2014-07-29 19:58:27 -0400] george_mcfly: anyone familiar with severspec ? for checking services that enabled ... it seems it only checks in /etc/init and not in /etc/init.d
[2014-07-29 19:58:30 -0400] gzc: yikes, installing chef-dk from its gemspec (because all I want are the dang generators) is not meeting with much success on ruby 1.9.3
[2014-07-29 19:58:30 -0400] george_mcfly: can anyone confirm ?
[2014-07-29 19:58:55 -0400] gzc: george_mcfly: yeah, serverspec has a fairly primitive understanding of init systems
[2014-07-29 19:59:08 -0400] george_mcfly: interesting
[2014-07-29 19:59:43 -0400] george_mcfly: how do you suggest i approach this, i'm trying to find in the source the logic for finding init scripts
[2014-07-29 19:59:44 -0400] gzc: the ease of integration (what with it being mostly shell that runs over ssh) comes with the cost of not a lot of sophistication for now
[2014-07-29 20:00:37 -0400] gzc: best bang for the buck? if you already know which init system you're using, check for the script and write something to test whether or not it's 'enabled' the right way you want
[2014-07-29 20:00:59 -0400] gzc: i don't see serverspec getting chef-level resource/provider abstraction any time soon
[2014-07-29 20:01:20 -0400] george_mcfly: well i know i am using init.d but im unsure how to configure  the 'enabled' check to look there instead of /etc/init
[2014-07-29 20:02:23 -0400] gzc: i'd just write shell snippets that return true or false, ignore the resources they give you :/
[2014-07-29 20:02:33 -0400] gzc: or extend them and send in a pull request with tests
[2014-07-29 20:02:43 -0400] george_mcfly: right, gotcha
[2014-07-29 20:03:04 -0400] gzc: lunch time, hompf
[2014-07-29 20:03:09 -0400] george_mcfly: thx gzc
[2014-07-29 20:05:29 -0400] a13x212: any recommendations for iptables cookbook?
[2014-07-29 20:06:28 -0400] jf647: iptables_ng works well for me.  I use the LWRPs, but those still require you to understand what you would put in a manually configured rule
[2014-07-29 20:06:55 -0400] jf647: The LWRP just makes it easier to associated it with the right chain/filter/ipversion
[2014-07-29 20:08:44 -0400] NukePuppy: hmm strange issue im having... im adding a couple new nodes into a role.. the role is applied but its not searchable? any ideas
[2014-07-29 20:08:50 -0400] a13x212: thanks jf647
[2014-07-29 20:09:17 -0400] NukePuppy: the run list of the role is being applied... but the node doesnt return in any searches
[2014-07-29 20:25:57 -0400] heathsnow: NukePuppy: did you execute chef on the new nodes yet?
[2014-07-29 20:26:10 -0400] NukePuppy: yeah i bootstrapped them into the role and the env
[2014-07-29 20:26:23 -0400] NukePuppy: i mean i got it fixed but only after a chef server restart? so odd
[2014-07-29 20:26:41 -0400] NukePuppy: it made no sense.. the recipes were being run.. but it would refuse to show up in a search 'role:foo'
[2014-07-29 20:26:42 -0400] heathsnow: not sure why a restart would change anything
[2014-07-29 20:26:48 -0400] NukePuppy: thats what im saying :(
[2014-07-29 20:27:02 -0400] NukePuppy: after a chef server restart (ran out of things and it seemed innocent enough)
[2014-07-29 20:27:11 -0400] gayaki: hey guys i have a quick question. I'm using cookbook_file to create a .bash_profile file. Right after that, i'm running "execute '. bashrc'" to reload it, but it's errors saying no such file exists when it does exist. any idea why this happens?
[2014-07-29 20:27:19 -0400] NukePuppy: it did start to run.. after removing the chef folder (5-6 times before ) and rebootstrapping them
[2014-07-29 20:27:38 -0400] NukePuppy: gayaki depends what you're doing
[2014-07-29 20:27:47 -0400] NukePuppy: BUT i would totally use something like magic_shell to do whatever you're doing in bashrc
[2014-07-29 20:27:48 -0400] gayaki: i meant to say "execute '. bash_profile'"
[2014-07-29 20:28:02 -0400] NukePuppy: and i reccomend using /etc/profile.d/whatever.sh  to do that instead of bash_profile directly
[2014-07-29 20:28:40 -0400] NukePuppy: which magicshell does anyways o.O
[2014-07-29 20:29:30 -0400] raul782: hi guys, anotehr newbie question, if I want to append a previous attribute in the same attribute file is it the best way?
[2014-07-29 20:29:57 -0400] NukePuppy: raul782 like what? having hard time understanding question
[2014-07-29 20:30:02 -0400] coderanger: raul782: https://coderanger.net/arrays-and-chef/
[2014-07-29 20:31:07 -0400] raul782: something like default['app']['user'] = 'user' and default['app']['home_dir'] = "/home/#{node['app']['user']}"
[2014-07-29 20:31:41 -0400] coderanger: raul782: That should work fine as written
[2014-07-29 20:32:15 -0400] raul782: cool thanks
[2014-07-29 20:33:17 -0400] NukePuppy: ah yeah heh
[2014-07-29 20:33:31 -0400] NukePuppy: you said file so i wasnt sure ;p
[2014-07-29 20:36:07 -0400] raul782: NukePuppy: sorry I meant an attribute file , what is it the recommended way, I mean the way I've written should be slower thand hard coding it, but I guess it doesn't matte right
[2014-07-29 20:36:31 -0400] raul782: it's more flexible for larger cookbooks
[2014-07-29 20:37:00 -0400] coderanger: raul782: "slower" is incredibly relative
[2014-07-29 20:45:33 -0400] billyoung: hey all, attempting to use partial_search just to grab the ipaddress of nodes matching a given role, for args can i simply pass the string 'ipaddress' ?
[2014-07-29 20:47:39 -0400] coderanger: billyoung: You still need to do the map (I think)
[2014-07-29 20:47:51 -0400] billyoung: ok i think thats what i'm missing, thanks @coderanger
[2014-07-29 20:47:52 -0400] coderanger: so {'ipaddress' => ['ipaddress']}
[2014-07-29 21:00:58 -0400] rbowlby: alright, so I totally don't get how to do cookbook versioning in environments when using berkshelf
[2014-07-29 21:01:42 -0400] rbowlby: can someone for the love of all that is holy describe the process of version management at the environment level
[2014-07-29 21:02:48 -0400] rbowlby: I want the foo cookbook at 0.1.2 in dev and 0.1.0 in prod. I'm using berkshelf, how does it work?
[2014-07-29 21:03:10 -0400] coderanger: rbowlby: The easy way is using chef environments
[2014-07-29 21:03:28 -0400] coderanger: rbowlby: "using berkshelf" doesn't really mean much
[2014-07-29 21:03:55 -0400] coderanger: Berks itself is pretty general purpose, "the bershelf way" is a more complete workflow
[2014-07-29 21:04:13 -0400] coderanger: and in that you could use an environment-ish cookbook
[2014-07-29 21:04:27 -0400] rbowlby: go on
[2014-07-29 21:04:35 -0400] coderanger: on which approach?
[2014-07-29 21:04:42 -0400] rbowlby: berkshelf way
[2014-07-29 21:04:44 -0400] rbowlby: already bought in
[2014-07-29 21:04:47 -0400] rbowlby: no going back now
[2014-07-29 21:04:53 -0400] icarus: hello all
[2014-07-29 21:05:03 -0400] coderanger: rbowlby: http://blog.vialstudios.com/the-environment-cookbook-pattern/
[2014-07-29 21:05:11 -0400] icarus: what happens when you use knife to create a data bag item without specifying a databag secret
[2014-07-29 21:05:14 -0400] rbowlby: i have cookbook roles, libraries, application cookbooks, wrapper cookbooks, etc
[2014-07-29 21:05:16 -0400] rbowlby: I'm invested
[2014-07-29 21:05:38 -0400] rbowlby: why do I have the feeling I'm going to be more confused once i read this
[2014-07-29 21:05:54 -0400] rbowlby: I kind of wish I got into chef before the ecosystem evolved.
[2014-07-29 21:06:16 -0400] rbowlby: I'm going straight from nothing to a very complicated workflow and the learning curve is pissing me off
[2014-07-29 21:06:22 -0400] rbowlby: lol, /rant
[2014-07-29 21:06:33 -0400] coderanger: rbowlby: Thats why I led off with the easy way
[2014-07-29 21:08:50 -0400] rbowlby: thanks coderanger, I'm sure I'll be back here soon
[2014-07-29 21:08:58 -0400] ponyofdeath: hi, is it possible inside a template to have a block of text that is reusable in that same template in different places?
[2014-07-29 21:09:15 -0400] coderanger: ponyofdeath: Yep :)
[2014-07-29 21:09:22 -0400] ponyofdeath: how can I do that
[2014-07-29 21:09:25 -0400] coderanger: http://docs.getchef.com/essentials_cookbook_templates.html#partial-templates
[2014-07-29 21:10:44 -0400] coalbe: is manage_symlink_source or force_unlink still supported?
[2014-07-29 21:10:55 -0400] coalbe: in cookbook_file
[2014-07-29 21:10:58 -0400] coalbe: resource
[2014-07-29 21:11:04 -0400] ponyofdeath: coderanger: thanks!
[2014-07-29 21:11:46 -0400] coalbe: im getting method errors and wondering if im doing something wrong or they're just nolonger supported
[2014-07-29 21:11:47 -0400] raul782: hi guys, in order to copy a file in the same server, what is the right command to use file or remote_file?
[2014-07-29 21:14:00 -0400] coderanger: raul782: How big is the file?
[2014-07-29 21:14:18 -0400] raul782: tiny one,
[2014-07-29 21:14:37 -0400] coderanger: coalbe: Both are in there, is your chef older?
[2014-07-29 21:14:59 -0400] coderanger: raul782: file '/foo' do content IO.read('/bar') end
[2014-07-29 21:15:03 -0400] shlant: jkeiser: hiya! any ideas for making sure a batch of servers provisioned by metal are in different AZ's?
[2014-07-29 21:15:05 -0400] coderanger: raul782: or similar
[2014-07-29 21:15:12 -0400] raul782: Ic, cool
[2014-07-29 21:15:27 -0400] coalbe: coderanger: older version, 10.14
[2014-07-29 21:15:37 -0400] coderanger: coalbe: Yeah, those were added very recently
[2014-07-29 21:15:41 -0400] coalbe: ah, i see
[2014-07-29 21:15:49 -0400] coalbe: gotcha, thanks!
[2014-07-29 21:16:27 -0400] jkeiser: shlant: put a different driver (with a differen region) on each of them: machine 'a' do driver 'fog:AWS:profilename:us-east-2' end
[2014-07-29 21:17:23 -0400] coalbe: coderanger: any rough idea on when those were thrown in?
[2014-07-29 21:18:24 -0400] damien: Greetings
[2014-07-29 21:18:28 -0400] coderanger: coalbe: Looks like 11.6
[2014-07-29 21:18:41 -0400] damien: has anyone ever ran into supervisor_service suddenly stop creating service templates in /etc/supervisor.d?
[2014-07-29 21:18:55 -0400] coderanger: damien: There is a thread on one of the tickets
[2014-07-29 21:19:00 -0400] coalbe: oof, quite the hop. im curious, are there any old ways of handling symlinks or is this a new feature
[2014-07-29 21:19:05 -0400] damien: For some reason came in today, and none of my instances are behaving... not sure what changed
[2014-07-29 21:19:08 -0400] damien: coderanger, is it #43?
[2014-07-29 21:19:22 -0400] damien: I didn't know if that had been resolved yet...
[2014-07-29 21:19:26 -0400] damien: https://github.com/poise/supervisor/issues/43
[2014-07-29 21:19:51 -0400] coderanger: damien: Yep, thats the one
[2014-07-29 21:20:00 -0400] coderanger: damien: I've been too busy to investigate
[2014-07-29 21:20:31 -0400] damien: coderanger, hmmm k, I have been using this cookbook for about 4 or 5 months but haven't hit this until now.... i wonder why
[2014-07-29 21:20:34 -0400] coderanger: coalbe: Its a new feature
[2014-07-29 21:20:42 -0400] damien: coderanger, if I figure anything out, i will relay
[2014-07-29 21:20:58 -0400] coderanger: coalbe: You should be aware there are likely glaring security issues in chef that old
[2014-07-29 21:21:01 -0400] coderanger: damien: Thanky
[2014-07-29 21:21:35 -0400] coalbe: coderanger: thanks for the heads up, we're rolling out support for latest chef
[2014-07-29 21:22:34 -0400] coalbe: just dealing with some legacy stuff
[2014-07-29 21:23:28 -0400] zanshin: I've got a `service` resource that sets up the Tomcat service for me. However, ever 15 minutes when the node converges it restarts tomcat. Do I need to have `supports :restart => false` to prevent this from happening?
[2014-07-29 21:24:39 -0400] shlant: jkeiser: but that would be different regions. I just want different AZ's (us-west-1a, us-west-1b, etc). and I have a dynamic number of servers (1.upto(node['web']['num_servers'].to_i) do |i|). I might just need some ruby
[2014-07-29 21:25:20 -0400] jkeiser: shlant: ah!  Those aren't a part of the AWS region url?
[2014-07-29 21:25:35 -0400] jkeiser: I am pretty sure you put it in that region section
[2014-07-29 21:25:43 -0400] jkeiser: But I've been wrong
[2014-07-29 21:25:45 -0400] jkeiser: once before
[2014-07-29 21:25:47 -0400] shlant: jkeiser: I jsut have with_driver 'fog:AWS', :compute_options => { :region => 'us-west-1'
[2014-07-29 21:25:59 -0400] jkeiser: What happens if you append the a or b?
[2014-07-29 21:26:16 -0400] shlant: jkeiser: not sure, let me try
[2014-07-29 21:27:25 -0400] jkeiser: darn, they look like truly different things.  I think it probably needs to be in the driver url--but I'm not sure.  Can you find out how to specify it in fog?
[2014-07-29 21:33:11 -0400] jf647: zanshin: is the service notified by or subscribed to a template?  And is that template somehow getting rewritten each chef-client run (e.g. something time-dependent)?
[2014-07-29 21:34:54 -0400] quantumfoam: so the syntax data_bag_item('bag', 'item')['key'] doesn't seem to work for selecting a single key out of an item, but perhaps this is due to its location in the recipe
[2014-07-29 21:35:02 -0400] quantumfoam: namely, embedded in a bash action
[2014-07-29 21:35:11 -0400] quantumfoam: would there be anything extra I'd have to do there?
[2014-07-29 21:35:19 -0400] quantumfoam: or is it just the wrong syntax?
[2014-07-29 21:46:12 -0400] Eulipion: im wrapping the haproxy cookbook, but my node is not seeing any of the attributes from either the wrapper or its node attributes that aren't from the original cookbook.  what am i doing wrong? http://pastebin.com/UAn9sPgd
[2014-07-29 21:49:43 -0400] quantumfoam: jf647: I get an 'unexpected token at `' error which marks the beginning of the bash statement
[2014-07-29 21:49:53 -0400] quantumfoam: or I think that was the error, I'm not at work right now
[2014-07-29 21:51:40 -0400] jf647: hard to say without seeing how the data_bag_item is embedded in the resource.  You could throw in a Chef::Log.debug statement right before it and log #{data_bag_item(a,b).inspect) to see how it comes out, then figure out why bash doesn't like it.
[2014-07-29 21:52:14 -0400] shlant: jkeiser: looks like you can't specify AZ in the compute_options, but you can in the bootstrap options
[2014-07-29 21:53:01 -0400] jkeiser: shlant: ah!  ok, I guess that makes sense.  When you go to the console for us-east-1, do you see all the machines for us-east-1a *and* us-east-1b?
[2014-07-29 21:54:28 -0400] shlant: jkeiser: When I select N. California (us-west-1) is shows instances in us-west-1b and us-west-1c
[2014-07-29 21:55:03 -0400] shlant: maybe I would nee something like [a,b,c].each do |az|
[2014-07-29 21:55:14 -0400] shlant: but that would mean it would try all
[2014-07-29 21:55:20 -0400] jkeiser: shlant: OK!  Then things are as they should be--I was worried we would have to change the driver url
[2014-07-29 21:55:53 -0400] jkeiser: shlant: the use case is that you have exactly n machines and want them in exactly n availability zones?
[2014-07-29 21:56:02 -0400] jkeiser: shlant: or are you trying to spread a ton of machines randomly?
[2014-07-29 21:56:37 -0400] shlant: jkeiser: well the best case would be I have n instances and I would want the first to be in a, second in b, third in c, fourth in a etc
[2014-07-29 21:57:02 -0400] shlant: I'm not ruby savvy enough to solve that haha
[2014-07-29 21:57:40 -0400] shlant: I wonder how EY does it
[2014-07-29 22:00:21 -0400] damien: coderanger, do you have a min to chat about that supervisor issue?
[2014-07-29 22:01:25 -0400] shlant: quantumfoam: usually you'd do something like foo =  data_bag_item('bag', 'item') and then access keys with ffo['key']
[2014-07-29 22:01:37 -0400] shlant: foo['key']
[2014-07-29 22:01:41 -0400] jkeiser: shlant: ok, you have n instances and want to divide by n.  I have to log off, but what I would probably do is (a) make an array of the machines you want; (b) find out what machines already exist, make a list already_exist, and count how many are in each AZ; then use x = 0; (machines_i_want - already_exist).each do |name| pick an availability zone based on x % num_availability_zones; x++; end
[2014-07-29 22:01:52 -0400] MrHeavy: I'm having a really frighteningly weird problem with Chef Client on Mac OS 10.8
[2014-07-29 22:02:00 -0400] jkeiser: This sounds automatable, but we're trying to get all the primitives right first (in 1.0)
[2014-07-29 22:02:04 -0400] jkeiser: I must go, sorry
[2014-07-29 22:02:08 -0400] shlant: jkeiser: awesome. I will try to get it working. Thanks!
[2014-07-29 22:02:23 -0400] damien: coderanger, I was curious about the load_current_resource function ini the service provider, it attempts to do a get_current_state but when you enable a service for the first time, the template hasn't been created yet so it's not going to be available for check_current_state, so it will never pass; why suddenly this began actually impacting i don't know, but i can't see how the code really ever could have worked with that logic, am I thinking it through right?
[2014-07-29 22:02:33 -0400] MrHeavy: I run chef-client --once without a node_name specified in the client.rb and it thinks the hostname is some random EC2 hostname
[2014-07-29 22:02:42 -0400] MrHeavy: The host I'm connecting from is a physical host somewhere in Atlanta
[2014-07-29 22:03:00 -0400] MrHeavy: EC2 has never been involved with the system, ever, obviously, because it's running Mac OS X
[2014-07-29 22:03:19 -0400] MrHeavy: How does the hostname detection work? ohai fqdn returns the result I expect
[2014-07-29 22:05:33 -0400] MrHeavy: Correction: ohai was returning the right fqdn before, which matched the output of 'hostname', but now it's alternating randomly between two EC2 FQDNs that aren't mine
[2014-07-29 22:11:51 -0400] medya: in java cookbook there is a provider named ark.rb how is that different from cookbook ark ? or are they same thing ? if they are same thing why it has not been included ?
[2014-07-29 22:12:09 -0400] medya: I am referring to https://github.com/agileorbit-cookbooks/java/blob/master/providers/ark.rb
[2014-07-29 22:13:07 -0400] MrHeavy: Oh, awesome, my problem is that it tries to canonicalize the hostname, it ends up on a wildcard DNS record, and then it tries to pull reverse DNS from that record
[2014-07-29 22:13:12 -0400] MrHeavy: Of course that's what I wnated it to do
[2014-07-29 22:13:28 -0400] MrHeavy: Instead of taking the hostname that's configured
[2014-07-29 22:13:29 -0400] MrHeavy: :(
[2014-07-29 22:14:13 -0400] jarsever: Does anyone know how to create an environment with attributes in chef metal using the "chef_environment" resource?
[2014-07-29 22:35:05 -0400] heathsnow: anyone have an ETA on when Test Kitchen will support Windows?  I'm tired of writing minitest
[2014-07-29 22:36:18 -0400] cheeseplus: heathsnow: I think it's just waiting on some PRs to be merged
[2014-07-29 22:37:36 -0400] heathsnow: thanks @cheeseplus, it feels like a 'checks in the mail' thing :P
[2014-07-29 22:38:00 -0400] cheeseplus: it's really close, I tested it 2 weeks ago and it was working
[2014-07-29 22:38:08 -0400] cheeseplus: salim has been nailing it
[2014-07-29 22:40:28 -0400] heathsnow: awesome.  I'm hoping my CI builds go faster once I have everything using test kitchen instead of doing a vagrant up all the time
[2014-07-29 22:42:42 -0400] gkra: I can't brain
[2014-07-29 22:42:50 -0400] gkra: how do I tell which version of chef is installed?
[2014-07-29 22:44:49 -0400] coderanger: gkra: chef-client --version
[2014-07-29 22:46:38 -0400] gkra: that should match the version number I'd see on getchef.com, right?
[2014-07-29 22:49:10 -0400] coderanger: gkra: 11.12.8 is the latest
[2014-07-29 22:52:12 -0400] gkra: thanks.
[2014-07-29 23:00:50 -0400] heathsnow: Anyone know of a cookbook that handles adding a knife.rb file?  I'm working on my CI agent cookbook and need the knife.rb to get on there and setup.  If not I'll just write a template cookbook I guess.
[2014-07-29 23:09:31 -0400] coderanger: heathsnow: Just point it at the client.rb?
[2014-07-29 23:09:35 -0400] coderanger: heathsnow: Its the same config
[2014-07-29 23:14:27 -0400] heathsnow: @coderanger: certainly doesn't look the same.  still, i'd have to hook up the knife command to use the client.rb which would require some sort of cookbook.
[2014-07-29 23:14:49 -0400] coderanger: heathsnow: No, just pass -c /etc/chef/client.rb to knife
[2014-07-29 23:15:20 -0400] coredump: do you guys have a smart way to check for <% end %> on templates? I have a complex one and can't find what block I didn't close
[2014-07-29 23:15:49 -0400] coderanger: coredump: Nope
[2014-07-29 23:21:54 -0400] heathsnow: @coderanger: I don't think that's going to work for me.  My CI server is going to need to actual `knife node delete` and the node is not authorized to do that.
[2014-07-29 23:22:28 -0400] coderanger: heathsnow: There is no security gain by doing it that way, just make that node an admin
[2014-07-29 23:25:57 -0400] heathsnow: @coderanger: I don't think there's a parameter for knife bootstrap that supports setting the node as admin is there?  my goal, of course, is not to have a manual step to set permissions.
[2014-07-29 23:26:36 -0400] coderanger: meineerde: How often do you bootstrap CI nodes?
[2014-07-29 23:26:41 -0400] coderanger: er, heathsnow ^^
[2014-07-29 23:28:24 -0400] heathsnow: @coderanger: good point...should only be a few.  time to see if the boss can be convinced
[2014-07-29 23:28:33 -0400] heathsnow: @coderanger: thx :)
[2014-07-29 23:39:04 -0400] Damm: heathsnow, if you use hosted
[2014-07-29 23:39:07 -0400] Damm: you can add the acls
[2014-07-29 23:39:29 -0400] Damm: so the node can do the operation
[2014-07-29 23:40:20 -0400] heathsnow: Damm: I do use hosted.  are you saying acls can be passed in during bootstrap?
[2014-07-29 23:40:58 -0400] coderanger: No, they have to be set afterwards
[2014-07-29 23:41:13 -0400] coderanger: heathsnow: https://github.com/opscode/knife-opc
[2014-07-29 23:41:42 -0400] gkra: does chef-zero work with .rb files for roles, or do I need to translate them all to json?
[2014-07-29 23:42:58 -0400] coderanger: gkra: json only
[2014-07-29 23:43:06 -0400] coderanger: its a limitation of the underlying chef_fs library
[2014-07-29 23:43:12 -0400] gkra: hmm.
[2014-07-29 23:43:28 -0400] gkra: so, <role>.json for the filename, then, or just <role> ?
[2014-07-29 23:44:33 -0400] coderanger: role.json
[2014-07-29 23:44:34 -0400] raul782: hi guys, if I have block like
[2014-07-29 23:44:35 -0400] raul782:  node['deploy'].each do |application, deploy|
[2014-07-29 23:44:35 -0400] raul782:    normal['deploy'][application]['deploy_to'] = "/home/user/www/app"
[2014-07-29 23:44:35 -0400] raul782: end
[2014-07-29 23:44:53 -0400] raul782: how can I inject an attribute from another cookbook
[2014-07-29 23:45:03 -0400] raul782: is it available here
[2014-07-29 23:45:28 -0400] raul782: so it's flexible enough to read the path of the app
[2014-07-29 23:46:13 -0400] coderanger: raul782: attributes are global
[2014-07-29 23:46:33 -0400] coderanger: raul782: Are you talking about in an attributes file?
[2014-07-29 23:47:17 -0400] raul782: yeah one cookbook is deploy to override the deploy_to variable and the other is my app cookbook that has correct deploy_to directory
[2014-07-29 23:47:38 -0400] raul782: I'm using opsworks
[2014-07-29 23:48:37 -0400] sauraus: Is the 'git' resource for Mac OSX broken? Looks like it's producing invalid git command like this: git checkout -b BRANCHNAME fd86661c966ab052cc1e8ed199b92054716d32db
[2014-07-29 23:48:48 -0400] sauraus: That 'ref' IMHO is wrong
[2014-07-29 23:49:11 -0400] coderanger: raul782: Set the upstream cookbook as a dependency, that will ensure its attributes are loaded before yours
[2014-07-29 23:49:43 -0400] coderanger: sauraus: Whats incorrect about that?
[2014-07-29 23:50:13 -0400] sauraus: well the git checkout docs don't mention it as an option to start with, second the command fails with exit code 128
[2014-07-29 23:51:27 -0400] coderanger: git checkout [-q] [-f] [-m] [[-b|-B|--orphan] <new_branch>] [<start_point>]
[2014-07-29 23:51:47 -0400] sauraus: you mean it's the start point?
[2014-07-29 23:51:47 -0400] coderanger: maybe you have an outdated git?
[2014-07-29 23:51:50 -0400] coderanger: yes
[2014-07-29 23:51:52 -0400] sauraus: 1.8.2
[2014-07-29 23:52:07 -0400] sauraus: 1.8.5.2 actually
[2014-07-29 23:52:09 -0400] sauraus: just checked
[2014-07-29 23:53:40 -0400] sauraus: Here is the cookbook code: https://gist.github.com/Sauraus/f86ed2b01a9e6dfa680a
[2014-07-29 23:54:17 -0400] sauraus: Why does the git resource make it a '-b' checkout operation? That makes no sense for a resource that allows you to sync a git project
[2014-07-29 23:54:26 -0400] coderanger: sauraus: The reason thats likely failing is the depth 0
[2014-07-29 23:54:42 -0400] coderanger: sauraus: the checkout is the deploy branch, used for idempotence checks
[2014-07-29 23:54:54 -0400] coderanger: Just pretend git shallow clones don't exist
[2014-07-29 23:54:58 -0400] sauraus: :D
[2014-07-29 23:55:00 -0400] coderanger: They are wrong 99% of the time
[2014-07-29 23:55:40 -0400] sauraus: ignorance is bliss :) going for a full clone
[2014-07-29 23:58:26 -0400] Damm: depth of 0
[2014-07-29 23:58:31 -0400] Damm: is a bad thing
[2014-07-29 23:58:34 -0400] Damm: learn to use git prune
[2014-07-29 23:58:44 -0400] Damm: a substantial depth is fine
[2014-07-29 23:58:55 -0400] Damm: but 0 is blatent wrong

[2014-07-23 00:05:28 -0400] sam__: Question: can anyone help me with the syntax to override attributes in node.json?
[2014-07-23 00:06:04 -0400] sam__: "override": {       <<<< what doies it look like? >>>>   },
[2014-07-23 00:08:59 -0400] Majost: is the chef-dk downloads page defunct?
[2014-07-23 00:09:43 -0400] Majost: It's been a plain black page for me for a while
[2014-07-23 00:16:28 -0400] lamont_oc: Majost: what url are you getting for it?
[2014-07-23 00:17:02 -0400] lamont_oc: also you can just curl | bash chefdk:
[2014-07-23 00:17:06 -0400] lamont_oc: curl -L https://www.opscode.com/chef/install.sh | bash -s -- -P chefdk
[2014-07-23 00:44:04 -0400] Damm: http://downloads.getchef.com/chef-dk
[2014-07-23 00:44:06 -0400] Damm: works for me
[2014-07-23 00:44:13 -0400] Damm: but I do question why is that on http?
[2014-07-23 00:44:16 -0400] Damm: and not https lamont_oc ?
[2014-07-23 00:45:29 -0400] lamont_oc: hovering over the download button it looks like the link is https
[2014-07-23 00:45:59 -0400] Damm: lamont_oc, right but the page is served over http
[2014-07-23 00:46:41 -0400] Damm: I don't know what the overal SSL security sense is at Chef but I've been deploying everything (including static sites) with https
[2014-07-23 00:46:43 -0400] lamont_oc: if you hit https i think theres a cloudfront ssl cert issue which is a known bug
[2014-07-23 00:47:10 -0400] Damm: yeah it offers up *.cloudfront.net
[2014-07-23 00:47:12 -0400] Damm: which won't work for you
[2014-07-23 00:47:29 -0400] Damm: lamont_oc, http://aws.amazon.com/cloudfront/custom-ssl-domains/
[2014-07-23 00:47:30 -0400] lamont_oc: yeah, i seem to remember we tried to switch to https and it failed, but thats a different team entirely
[2014-07-23 00:47:41 -0400] Damm: those are your options
[2014-07-23 00:47:51 -0400] lamont_oc: yep and i recall seeing that webpage go by
[2014-07-23 00:47:52 -0400] Damm: i'd prolly self host before i paid for cloudfront ssl
[2014-07-23 00:48:04 -0400] lamont_oc: im pretty sure that problem is in someones backlog to fix
[2014-07-23 00:48:05 -0400] Damm: but I'm not a AWS lover
[2014-07-23 00:48:50 -0400] lamont_oc: im have a few opinions about openstack
[2014-07-23 00:49:38 -0400] lamont_oc: technology, in general, all sucks
[2014-07-23 00:49:44 -0400] Damm: absolutely
[2014-07-23 00:50:09 -0400] Damm: and everyone has an opinion and they want to share it; but we also have to be considerate of others opinions and tolerant of those
[2014-07-23 00:50:12 -0400] Damm: :)
[2014-07-23 00:50:16 -0400] Damm: or else we create a worse problem
[2014-07-23 00:50:35 -0400] Damm: i think that's the root cause problem of technology
[2014-07-23 00:50:37 -0400] Damm: too much care
[2014-07-23 01:28:06 -0400] savant: can I use a databag within an attribute file?
[2014-07-23 01:28:38 -0400] Damm: lol your funny savant
[2014-07-23 01:28:47 -0400] Damm: so obscene
[2014-07-23 01:28:48 -0400] savant: is that a no
[2014-07-23 01:28:58 -0400] Damm: savant, in a recipe
[2014-07-23 01:29:09 -0400] Damm: savant, it might work in an attribute
[2014-07-23 01:29:20 -0400] Damm: savant, tried data_bag_load_item?
[2014-07-23 01:29:46 -0400] savant: i havent, just asking if it will
[2014-07-23 01:30:40 -0400] savant: guess i should at least try it
[2014-07-23 01:32:07 -0400] savant: nope
[2014-07-23 01:32:11 -0400] savant: Undefined node attribute or method `data_bag' on `node'
[2014-07-23 01:33:23 -0400] Damm: https://coderanger.net/data-bags/
[2014-07-23 01:33:32 -0400] savant: i read that
[2014-07-23 01:34:32 -0400] Damm: i think the point was data bags smell
[2014-07-23 01:34:41 -0400] digitalchild: heh
[2014-07-23 01:34:44 -0400] Damm: so if it won't work in an attribute file any reason you can't set it in a recipe?
[2014-07-23 01:35:52 -0400] savant: oh i am just refactoring some stuff
[2014-07-23 01:40:05 -0400] Damm: the smell caught you off guard?
[2014-07-23 01:40:27 -0400] savant: basically i define what a service is in a databag
[2014-07-23 01:40:37 -0400] savant: a service and all the commands its capable running
[2014-07-23 01:40:42 -0400] savant: as well as dependencies etc.
[2014-07-23 01:40:45 -0400] digitalchild: sounds like a recipe..
[2014-07-23 01:41:04 -0400] savant: then i have a recipe that checks the current node to see what services/process types should be on that box
[2014-07-23 01:41:07 -0400] Damm: the smell caught you off guard?
[2014-07-23 01:41:08 -0400] digitalchild: i really want to throw the developer who created this app I maintain off a bridge..
[2014-07-23 01:41:10 -0400] savant: and it does all the setup
[2014-07-23 01:41:13 -0400] Damm: err
[2014-07-23 01:41:16 -0400] Damm: damn wrong window
[2014-07-23 01:41:17 -0400] digitalchild: no indexes in thd database..
[2014-07-23 01:41:35 -0400] savant: currently refactoring how I do our distributed cron to fit in with our model of rabbitmq
[2014-07-23 01:41:39 -0400] Damm: digitalchild, first try?
[2014-07-23 01:41:40 -0400] Damm: on his app
[2014-07-23 01:41:48 -0400] digitalchild: no wonder my where clauses on 331k tuples is taking HOURS
[2014-07-23 01:41:59 -0400] Damm: savant, use sensu
[2014-07-23 01:42:07 -0400] digitalchild: Damm: nah, just ancient app
[2014-07-23 01:42:09 -0400] savant: Damm: i mean i know you're just trolling.
[2014-07-23 01:42:46 -0400] savant: we currently define rabbitmq queues/bindings/exchanges within attributes, but it gets clunky once you are dynamically defining services that use rabbitmq (its something like a 1-to-1 from services to queues)
[2014-07-23 01:42:53 -0400] Damm: savant, shrug not really
[2014-07-23 01:43:12 -0400] savant: its a monitoring framework
[2014-07-23 01:43:14 -0400] Damm: if you use rabbitmq and you want something around the cron
[2014-07-23 01:43:21 -0400] Damm: sure but that doesn't mean it can't run crontabs
[2014-07-23 01:43:24 -0400] Damm: as checks
[2014-07-23 01:43:29 -0400] savant: we already have a distributed cron service
[2014-07-23 01:43:32 -0400] Damm: most crontabs are just fire and forget
[2014-07-23 01:43:38 -0400] Damm: nothing watches them
[2014-07-23 01:43:43 -0400] Damm: nothing see's if they ran right
[2014-07-23 01:43:45 -0400] savant: https://github.com/seatgeek/cronq
[2014-07-23 01:43:46 -0400] savant: ^
[2014-07-23 01:43:51 -0400] Damm: so in the sense Sensu does fit here for (me)
[2014-07-23 01:44:04 -0400] Damm: perhaps it's obscene but sometimes that's how it starts
[2014-07-23 01:46:11 -0400] savant: ive already got the distributed cron service up and running, we're just making it so that a specific service define that it requires cron
[2014-07-23 01:46:15 -0400] Damm: savant, yep missed opportunity
[2014-07-23 01:46:24 -0400] Damm: I would have tottally written that with sensu in mind
[2014-07-23 01:46:53 -0400] savant: and therefore installs everything necessary for that node to be able to run crontasks via the cronq-runner
[2014-07-23 01:47:08 -0400] savant: not really, we use deadman's snitch for monitoring that tasks completed properly
[2014-07-23 01:54:46 -0400] Damm: and this is what i mention about compassion and tolerance.  Everyone has to be right and every solution is baked for job security
[2014-07-23 01:55:05 -0400] savant: ?
[2014-07-23 01:55:07 -0400] Damm: I think that's the #1 thing I dislike about jobs is how some people always have to have their job security
[2014-07-23 01:55:14 -0400] Damm: and they just cannot contribute to something everyone can use
[2014-07-23 01:55:25 -0400] Damm: gotta be their way
[2014-07-23 01:57:38 -0400] savant: thats fine and all, but we already have other monitoring software installed
[2014-07-23 01:58:03 -0400] savant: adding another one because we can make it play as if it was a distributed cron service is a bit silly imo
[2014-07-23 01:59:37 -0400] savant: regardless, i'd be happy to replace what we have with something better, but it works just fine, and doing so would be just me making more work, and there are more important things to work on than replacing a system that works
[2014-07-23 02:24:14 -0400] Damm: well the only way you could do it better is with zookeeper
[2014-07-23 02:24:39 -0400] Damm: i hate that response but https://github.com/airbnb/chronos
[2014-07-23 02:27:19 -0400] savant: yeah that looked nice and we might have used it but it didnt exist when we built cronq
[2014-07-23 02:27:39 -0400] Damm: i've known people abandon what they have for it
[2014-07-23 02:27:45 -0400] Damm: I wouldn't
[2014-07-23 02:27:46 -0400] savant: the only thing i personally have against it is it seems like it might be a bit more complicated to run than I'd like, but thats not a dealbreaker
[2014-07-23 02:27:54 -0400] Damm: I find the whole 'cron' problem to be the whole problem
[2014-07-23 02:27:58 -0400] savant: heh
[2014-07-23 02:28:16 -0400] Damm: Cron is not exactly reliable; and if your not watching your inbox or your system logs your expectations are often unmet
[2014-07-23 02:28:34 -0400] Damm: it should be; but over the years I've had it run with an empty tab for a user when reloading fixes it
[2014-07-23 02:28:51 -0400] Damm: my favorite is when I had to edit the tab and add a dask to make crontab re-read it
[2014-07-23 02:29:12 -0400] savant: linode broke their kernel once
[2014-07-23 02:29:21 -0400] Damm: oh i broke EY's kernel once
[2014-07-23 02:29:28 -0400] savant: and that somehow broke cron
[2014-07-23 02:29:29 -0400] Damm: but that ain't anything really
[2014-07-23 02:29:30 -0400] savant: supra lolz
[2014-07-23 02:29:45 -0400] Damm: what do you expect from linode?
[2014-07-23 02:29:49 -0400] Damm: hehe
[2014-07-23 02:29:54 -0400] Damm: they've been around enough
[2014-07-23 03:25:47 -0400] arc__: quick question for anyone who is around... I'm using chefspec, and trying to figure out how to mock/reference Chef::Config[:file_cache_path]
[2014-07-23 03:26:04 -0400] arc__: is the file cache path an automatic attribute?
[2014-07-23 03:26:15 -0400] arc__: or a node attribute? or something in its own category?
[2014-07-23 03:49:03 -0400] juliancdunn: arc__: pretty sure you could just set that up within an 'it' block?
[2014-07-23 03:49:24 -0400] juliancdunn: Chef::Config[:file_cache_path] = '/bogus/path'
[2014-07-23 03:49:30 -0400] juliancdunn: and then go ahead and make some expectations about it
[2014-07-23 03:50:11 -0400] juliancdunn: better yet, go and let(:bogus_file_cache_path) { '/bogus/path' } in a describe block
[2014-07-23 03:50:44 -0400] juliancdunn: and then you can reference bogus_file_cache_path in both the setup and the expectation
[2014-07-23 03:51:15 -0400] arc__: hm, okay
[2014-07-23 03:51:42 -0400] arc__: i see something similar in a spec/test for the chef remote_file resource
[2014-07-23 03:51:54 -0400] arc__: but there they are actually creating and removing the directory every time
[2014-07-23 03:52:38 -0400] juliancdunn: in this case it's far simpler, 'cause you are not actually creating anything on disk
[2014-07-23 03:52:46 -0400] juliancdunn: you just need to set up a known value and make expectations about it
[2014-07-23 03:53:50 -0400] arc__: neat. will try it out. thank you. :)
[2014-07-23 03:59:16 -0400] cloudbud_: hi
[2014-07-23 04:00:32 -0400] cloudbud_cloudbu: hi
[2014-07-23 04:01:53 -0400] cloudbud: hi
[2014-07-23 04:09:32 -0400] cloudbud: Goog evening All
[2014-07-23 04:20:06 -0400] arc__: juliancdunn: tried it out, but am chefspec is disagreeing with me on what the result should be:
[2014-07-23 04:20:17 -0400] arc__: Failure/Error: expect(chef_run).to create_remote_file("/bogus/cache/apache-ant-1.9.1-bin.zip")
[2014-07-23 04:20:17 -0400] arc__:        expected "remote_file[/bogus/cache/apache-ant-1.9.1-bin.zip]" with action :create to be in Chef run.
[2014-07-23 04:21:34 -0400] arc__: the first line of the resource under test looks like this:
[2014-07-23 04:21:35 -0400] arc__: remote_file "#{Chef::Config[:file_cache_path]}/#{node['df_ant']['filename']}#{node['df_ant']['fileext']}" do
[2014-07-23 04:22:25 -0400] arc__: and action is :create
[2014-07-23 04:22:50 -0400] arc__: so I can't tell if I'm missing something really obvious, or if there is something more that needs to be done
[2014-07-23 04:28:35 -0400] rodolfojcj: hi!
[2014-07-23 04:29:30 -0400] rodolfojcj: I'm installing a global valid CA signed certificate on Chef Open Source server
[2014-07-23 04:29:38 -0400] rodolfojcj: it is a widcard ssl certificate
[2014-07-23 04:29:55 -0400] rodolfojcj: everything is fine through https to the web interface
[2014-07-23 04:30:06 -0400] rodolfojcj: but "knife ssl check" no
[2014-07-23 04:30:24 -0400] rodolfojcj: it gives "ERROR: The SSL cert is signed by a trusted authority but is not valid for the given hostname"
[2014-07-23 04:31:13 -0400] rodolfojcj: "ERROR: The server's certificate belongs to '*.mydomain.com'"
[2014-07-23 04:31:43 -0400] rodolfojcj: does anyone know how to set chef/knife to allow wildcard certificates when doing ssl check?
[2014-07-23 05:39:15 -0400] cloudbud: is there any chef recipe that fetches a directory from one server and puts in desired folder on other linux server ?
[2014-07-23 05:54:36 -0400] balbirs: can I download the cookbooks from chef-server, if I setup new workstation?
[2014-07-23 05:56:35 -0400] digitalchild: balbirs: you should have all your cookbooks in a source repository..
[2014-07-23 05:59:03 -0400] balbirs: like, I should maintain a git or svn?
[2014-07-23 06:02:04 -0400] digitalchild: balbirs: yes
[2014-07-23 06:02:09 -0400] digitalchild: treat your cookbooks as if they are code
[2014-07-23 06:02:16 -0400] digitalchild: and that they should live in repos of their own
[2014-07-23 06:02:32 -0400] digitalchild: whether you do individual cookbooks and roles or app cookbooks the berkshelf way
[2014-07-23 06:03:07 -0400] digitalchild: it should all be living in git
[2014-07-23 06:03:27 -0400] digitalchild: that way you can easily check your code in and out to any workstation, you can blame whoever broke the cookbook :)
[2014-07-23 06:05:36 -0400] balbirs: digitalchild: thanks :)
[2014-07-23 06:06:06 -0400] balbirs: I am following this cookbook: https://supermarket.getchef.com/cookbooks/user
[2014-07-23 06:06:32 -0400] balbirs: I am not getting this "The data bag recipe will iterate through a list of usernames defined in node['users'] (by default) and attempt to pull in the user's information from the data bag item. In other words, having:"
[2014-07-23 06:06:43 -0400] balbirs: which file I have to make changes?
[2014-07-23 06:07:23 -0400] balbirs: do I need to edit data_bag.rb in recipes folder ?
[2014-07-23 06:09:00 -0400] digitalchild: im not sure, not used that one before
[2014-07-23 06:13:05 -0400] seshagiri_naidu: Hi Team,  I  want o connect from Linux to windows2k8  target node and execute chef-recipe on it , ssh connect from linux is failed,   saying connection timed out, do i have to install ssh on windows?
[2014-07-23 06:13:16 -0400] seshagiri_naidu: or there is better way to do it?
[2014-07-23 06:48:02 -0400] seshagiri_naidu: can we install cygwind with bootstrap on target windows node?
[2014-07-23 06:48:26 -0400] seshagiri_naidu: cygwind/ it is cygwin
[2014-07-23 07:02:39 -0400] cristiWird: hi guys, I'm trying to generate a chef-server rpm using omnibus-chef-server with some modified erlang files -> have you guys done something similar ?
[2014-07-23 07:05:17 -0400] yruss972: hi- we are running chef-solo by cron for some things with -l error but recently we are getting warnings about version 6 ohai plugins?
[2014-07-23 07:05:47 -0400] yruss972: we know about the old plugins- I"m just not sure why the warnings are bypassing the -l error
[2014-07-23 07:06:00 -0400] yruss972: any ideas?
[2014-07-23 07:23:56 -0400] kevl: I have installed Chef server and Chef WS, next how to install chef client?
[2014-07-23 07:36:27 -0400] cloudbud: I have created a chef recipe to change DNS entries in resolve.conf but everytime i reboot the system the the resolv.conf is updated by the old entries
[2014-07-23 07:37:12 -0400] cloudbud: kevl : check this out :https://www.digitalocean.com/community/tutorials/how-to-install-a-chef-server-workstation-and-client-on-ubuntu-vps-instances
[2014-07-23 07:40:10 -0400] kevl: ok
[2014-07-23 07:40:12 -0400] kevl: looking
[2014-07-23 07:45:23 -0400] ssd7: Ohai Chefs
[2014-07-23 07:46:37 -0400] cloudbud: @ssd7 : I have created a chef recipe to change DNS entries in resolve.conf but everytime i reboot the system the the resolv.conf is updated by the old entries
[2014-07-23 07:49:34 -0400] ssd7: cloudbud: What operating system is this?
[2014-07-23 07:49:40 -0400] ssd7: Or rather, what distribution
[2014-07-23 07:49:43 -0400] cloudbud: LInux
[2014-07-23 07:49:49 -0400] cloudbud: centos
[2014-07-23 07:50:14 -0400] double_p: likely dhclient messing around
[2014-07-23 07:50:49 -0400] cloudbud: I have just replaced resolv.conf with my entreis that are statis, i have user emplate for that
[2014-07-23 07:51:08 -0400] cloudbud: double_p : how can i resolve this issue
[2014-07-23 07:51:43 -0400] ssd7: Right, it is either as double_p mentioned or your ifcfg scripts are setting DNS entries and such on boot
[2014-07-23 07:52:26 -0400] cloudbud: than how can i replace the existing resolv.conf with my resolv.conf
[2014-07-23 07:53:15 -0400] ssd7: cloudbud: Also manage the scripts in /etc/sysconfig/network-scripts/ to ensure they aren't changing resolv.conf
[2014-07-23 07:53:47 -0400] cloudbud: Can you point to a recipe for a refernce @ssd7
[2014-07-23 07:55:18 -0400] zts: Where's the constructive place to whinge^Woffer feedback about http://www.getchef.com/chef/install/ ?
[2014-07-23 07:55:47 -0400] ssd7: You might also try adding  PEERDNS=no to /etc/sysconfig/network
[2014-07-23 07:56:20 -0400] cloudbud: i need to add to network file ?
[2014-07-23 07:56:38 -0400] cloudbud: how can i intergrate this additional line in my recipe ?
[2014-07-23 08:01:09 -0400] ssd7: cloudbud: The way I would do this would be to first figure out what config changes you need.   It is hard for me to tell you exactly what needs to change, because I don't have all of your network configuration.  Once you know what needs to change in what files, I would start by just making each of those files a template in your recipe.
[2014-07-23 08:01:40 -0400] ssd7: zts: Hrm, I'm actually not sure of the best way for you to give us feedback on getchef.com.  If it is brief I can find out where to put it for you.
[2014-07-23 08:03:09 -0400] cloudbud: @ssd7 : Its an AWS EC2 instance
[2014-07-23 08:03:36 -0400] zts: ssd7: I am just perpetually irritated when I go there to find the install.sh link to copy, and have to hit three select boxes to reveal it.
[2014-07-23 08:04:38 -0400] zts: ssd7: I get it's needed to populate the Downloads drop-down, but I wish the "Quick Installation Instructions" section was revealed as soon as you chose the "Chef Client" tab :)
[2014-07-23 08:05:31 -0400] ssd7: zts: Yes, that is rather annoying considering it is the same in nearly all the cases
[2014-07-23 08:07:53 -0400] zts: yeah, just one of those little things
[2014-07-23 08:14:13 -0400] coderanger: zts: Are you using Ubuntu or Debian?
[2014-07-23 08:14:38 -0400] coderanger: zts: If so, CalvinRafah
[2014-07-23 08:14:50 -0400] coderanger: er mispaste https://coderanger.net/chef-apt/ :)
[2014-07-23 08:30:32 -0400] ignatz: coderanger: thanks, that's super useful
[2014-07-23 08:36:00 -0400] zts: coderanger: sadly not, as I saw your announcement and had a moment of envy :)
[2014-07-23 08:43:28 -0400] haakon__: Hi guys, I'm trying to get openstack provisioning with the knife-openstack plugin up and running, but I'm experiencing some difficulties regarding communication with the OpenStack Identity API, which requires specification of domain id and name to issue tokens. I can't find any documentation about domain configuration for knife openstack for knife.rb. Any suggestions? Thanks in advance.
[2014-07-23 08:58:34 -0400] kevn: I have setup Chef server and WS , next I want to bootstrap a chef client (AWS-EC2)
[2014-07-23 08:58:42 -0400] kevn: please guide
[2014-07-23 09:10:58 -0400] SmudgerDan: kevn: is this what you are after? http://docs.opscode.com/install_bootstrap.html
[2014-07-23 09:14:48 -0400] kevn: 1st I need to creat a run list , then role and finally server create right ?
[2014-07-23 09:15:15 -0400] kevn: @SmudgerDan 1st I need to creat a run list , then role and finally server create right ?
[2014-07-23 09:21:54 -0400] SmudgerDan: if you want to do it that way, you can
[2014-07-23 09:22:34 -0400] kevn: I am getting error : ERROR: Fog::Compute::AWS::Error: InvalidParameterCombination => Non-Windows instances with a virtualization type of 'hvm' are currently not supported for this instance type
[2014-07-23 09:36:51 -0400] seshagiri_naidu: can we bootstrap cygwin on windows node
[2014-07-23 09:36:54 -0400] seshagiri_naidu: ?
[2014-07-23 09:37:22 -0400] seshagiri_naidu: Appreciate the for the help
[2014-07-23 09:42:36 -0400] SmudgerDan: seshagiri, I found this Stack Overflow question, if that helps http://stackoverflow.com/questions/23813486/unable-to-bootstrap-chef-on-windows
[2014-07-23 09:50:12 -0400] SmudgerDan: I assume the best way to install windows updates in cookbooks is to just use windows_package and point it at the .exe
[2014-07-23 10:28:23 -0400] kernelpanik: Hi to all. I have an old version of chef server .. which is the best way to update it to the last version?
[2014-07-23 10:40:40 -0400] ssd7: kernelpanik: How old?
[2014-07-23 10:40:54 -0400] kernelpanik: chef-server -v
[2014-07-23 10:40:54 -0400] kernelpanik: Chef Server (API) Version: 0.10.8
[2014-07-23 10:42:45 -0400] ssd7: kernelpanik: Best way is to use knife download to get an export of your chef server, install the new one, and then upload the export
[2014-07-23 10:42:53 -0400] ssd7: kernelpanik: full direcctions for that are here: http://docs.opscode.com/upgrade_server_open_source.html#upgrade-from-chef-server-osc-10-x
[2014-07-23 10:43:40 -0400] kernelpanik: ok thanks!
[2014-07-23 10:47:35 -0400] ssd7: np, feel free to pop in here or the mailing list if you run into problems
[2014-07-23 10:51:43 -0400] rsavage_: Good morning Cheflings :)
[2014-07-23 10:52:41 -0400] kevn: getting error : Error expanding the run_list: while bootstrapping an ec2 instance
[2014-07-23 10:54:04 -0400] kevn: Good Morning rsavage_
[2014-07-23 10:54:17 -0400] SmudgerDan: Morning
[2014-07-23 11:18:46 -0400] ssd7: kevn: Can you post the full log and error to pastebin or gist?
[2014-07-23 11:21:32 -0400] kevn: ssd7:  warning: /tmp/install.sh.868/chef-11.12.8-2.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY 10.105.17.157 Preparing...                          ################################# [100%] 10.105.17.157 Updating / installing... 10.105.17.157    1:chef-11.12.8-2.el6               ################################# [100%] 10.105.17.157 Thank you for installing Chef! 10.105.17.157 Starting first Chef Client run... 10.
[2014-07-23 11:22:24 -0400] kevn: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-07-23 11:25:10 -0400] miguelcnf: hey folks, I'm wondering how everyone handles updating application versions (defined in attributes) on products that are constantly changing (CD pipeline) - I' worried about programatically overriding the attribute on a per environment bases considering  the environment would be shared by multiple products and could lead to merge conflict if anyone decides to update it manually?
[2014-07-23 11:37:37 -0400] ssd7: kevn: What is the run list you are trying to set?
[2014-07-23 11:38:46 -0400] kevn: Currently I haven't used any run-list
[2014-07-23 11:39:03 -0400] kevn: that's why not included the run-list thing in my command as well
[2014-07-23 11:39:46 -0400] kevn: the chef-client instance is now launched
[2014-07-23 11:40:24 -0400] kevn: also showing version of chef client when I fire chef-client -v , after log in the instance
[2014-07-23 11:41:24 -0400] kevn: @ssd7 Is it compulsory to add runlist , role , environment ?
[2014-07-23 11:42:48 -0400] ssd7: kevn: Not compulsory, just asked because of your error message
[2014-07-23 11:42:57 -0400] kevn: ok
[2014-07-23 11:43:20 -0400] kevn: So is it because of not including any run-list ?
[2014-07-23 11:43:34 -0400] kevn: @ssd7 So is it because of not including any run-list ?
[2014-07-23 11:45:34 -0400] ssd7: I don't think that would cause it.  Unfortunately, what you've posted doesn't include a lot of detail.  Is that all of the output you are getting?
[2014-07-23 11:47:34 -0400] whiteadam: Any of you guys currently using serverspec?
[2014-07-23 11:48:05 -0400] kevn: @ssd7 : This is something , I am getting - FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-07-23 11:52:44 -0400] ssd7: whiteadam: I use it occasionally
[2014-07-23 11:53:09 -0400] ssd7: kevn: That is a pretty generic error message unfortunately.  All it says is that something when wrong during convergence.
[2014-07-23 11:53:25 -0400] whiteadam: ssd7: I'm having a random issue where simple tests work on RHEL 6.5, but fail on 5.10... but I'm not sure that this is the root cause.
[2014-07-23 11:54:07 -0400] whiteadam: ssd7: I looked in the source and can run the commands manually without issue. Do you know of any way to get a stack trace out of it or something?
[2014-07-23 11:57:37 -0400] ssd7: whiteadam: Hrm, not off hand.  I'll see if I can dig anything up though
[2014-07-23 11:59:02 -0400] whiteadam: ssd7: You're the man now dog.
[2014-07-23 12:04:56 -0400] ssd7: whiteadam: What kind of failures are you seeing?
[2014-07-23 12:05:56 -0400] whiteadam: ssd7: So, it gets a little confusing, but should be_installed works fine across all platforms.
[2014-07-23 12:06:19 -0400] whiteadam: ssd7: then, should be_enabled passes on RHEL 6.5 then fails on 5.10
[2014-07-23 12:06:43 -0400] whiteadam: ssd7: I thought it might be something to do with the PATH, but after I corrected that, it still fails.
[2014-07-23 12:09:27 -0400] whiteadam: ssd7: should be_running also fails on RHEL 6.5... That's why I was curious about a trace/debug of some sort. Crazy right?
[2014-07-23 12:11:21 -0400] ssd7: For the be_enabled case, have you run this on both RHEL5 and RHEL6: https://github.com/serverspec/specinfra/blob/master/lib/specinfra/command/redhat.rb#L13-L15
[2014-07-23 12:11:32 -0400] ssd7: to make sure they are coming back the same?
[2014-07-23 12:12:54 -0400] whiteadam: They are, but I am going to double check it in a few and make sure I'm not insane. I was de-constructing his RHEL tests to make sure also: https://github.com/serverspec/serverspec/blob/master/spec/redhat/service_spec.rb
[2014-07-23 12:13:20 -0400] whiteadam: VPN adapter is being pissy this morning.
[2014-07-23 12:29:53 -0400] whiteadam: ssd7: I think I found the issue
[2014-07-23 12:30:11 -0400] whiteadam: ssd7: on the 5.10 servers, it's not putting /sbin in the path when using sudo
[2014-07-23 12:30:29 -0400] whiteadam: [awhite@m220266lweb4103 ~]$ sudo chkconfig --list rsyslog | grep 3:on
[2014-07-23 12:30:29 -0400] whiteadam: sudo: chkconfig: command not found
[2014-07-23 12:30:43 -0400] whiteadam: Feels good to finally know the problem :)
[2014-07-23 12:39:30 -0400] whiteadam: ssd7: That was it, thanks for guiding me
[2014-07-23 12:49:21 -0400] ssd7: ahhh, nice find
[2014-07-23 12:49:54 -0400] whiteadam: Yeah, now I know I'm not crazy and it's all working, hooray
[2014-07-23 13:15:25 -0400] whiteadam: Anyone know if rspec (serverspec) can do IF statements on OS version?
[2014-07-23 13:21:46 -0400] whiteadam: I'm probably asking the wrong question. Time to read some rspec.
[2014-07-23 13:25:10 -0400] PierreRambaud: while1eq1, if you speak about kitchen, you can define some suite and platform, and tests are specific for such suite and such plateform.
[2014-07-23 13:26:33 -0400] whiteadam: PierreRambaud: nah, not using TestKitchen yet. Trying to define tests for a customer environment that hates automation... silly customers
[2014-07-23 13:33:16 -0400] nulleric: hey, think i found a security bug in supermarket, anyone from chef can ping me?
[2014-07-23 13:35:57 -0400] PierreRambaud: whiteadam, http://serverspec.org/advanced_tips.html so the last part with "How to get os information" can help you ;)
[2014-07-23 13:36:45 -0400] PierreRambaud: whiteadam, the latest example can be useful for you :
[2014-07-23 13:36:46 -0400] PierreRambaud: describe file('/usr/lib64'), :if => os[:arch] == 'x86_64' do
[2014-07-23 13:36:46 -0400] PierreRambaud:   it { should be_directory }
[2014-07-23 13:36:46 -0400] PierreRambaud: end
[2014-07-23 13:39:26 -0400] whiteadam: PierreRambaud: oh man, thanks, I must have read right over that.
[2014-07-23 13:41:19 -0400] PierreRambaud: whiteadam, Have fun, and may the chef be with you!
[2014-07-23 13:41:24 -0400] whiteadam: haha
[2014-07-23 13:42:05 -0400] whiteadam: Now I just need to figure out how to get before :all to work properly so I can DRY it up :)
[2014-07-23 13:55:46 -0400] josef_: Hi! Quick question about hosted chef: Does it come with a berkshelf-api service?
[2014-07-23 13:59:01 -0400] chollya: Hello! I have a strange problem with reading node attributes with knife. It doesn't shows ssh public keys with ERROR: TypeError: no implicit conversion of String into Integer
[2014-07-23 13:59:01 -0400] chollya:  Here is the full transcript: http://pastebin.com/LfFW34gp
[2014-07-23 13:59:10 -0400] chollya: What i can be doing wrong?
[2014-07-23 14:11:04 -0400] zts: chollya: my wild guess is that keys.ssh is an array, not a hash, so keys.ssh.host_ecdsa_public doesn't make sense
[2014-07-23 14:11:53 -0400] chollya: zts: looking with -l, and it appears to be hash:
[2014-07-23 14:12:25 -0400] chollya: zts: http://pastebin.com/q8zghbW3
[2014-07-23 14:12:42 -0400] zts: hmm
[2014-07-23 14:17:03 -0400] Nielsen: Hello, anyone experiencing run list not updating correctly. I add a role or recipe to run list but a short time later it dissappears
[2014-07-23 14:28:05 -0400] hypnosb: ah there is no --sudo when using knife ec2 server create
[2014-07-23 14:28:09 -0400] hypnosb: sucks
[2014-07-23 14:35:18 -0400] george_mcfly: are data bags encrypted by default? how can I tell if I need a secret file or not to read from a databag ?
[2014-07-23 14:35:41 -0400] n1ko: if you can read it without you dont :)
[2014-07-23 14:35:47 -0400] n1ko: and nope, they arent
[2014-07-23 14:35:55 -0400] george_mcfly: ah okay, so if I can do a knife data bag show without one its unencrypted
[2014-07-23 14:36:06 -0400] n1ko: well.. yes
[2014-07-23 14:36:24 -0400] n1ko: just be sure the secret isnt loaded with a knife.rb setting etc
[2014-07-23 14:36:25 -0400] juliancdunn: if you can knife data bag show and get the cleartext then it's not encrypted
[2014-07-23 14:36:29 -0400] n1ko: all explained ell here: http://docs.opscode.com/essentials_data_bags.html
[2014-07-23 14:36:32 -0400] juliancdunn: otherwise, if you get some ciphertext, it is
[2014-07-23 14:36:46 -0400] n1ko: *well
[2014-07-23 14:36:51 -0400] george_mcfly: n1ko: thx ill check knife rb to make sure
[2014-07-23 14:43:52 -0400] whiteadam: Anyone using ServerSpec? Getting "undefined local variable or method `os'" even though os = backend.check_os is set in spec_helper. I'm thinking something is required that I'm not requiring...
[2014-07-23 14:45:08 -0400] alaa_: letmeinsweetie
[2014-07-23 14:48:36 -0400] someara: whiteadam: https://github.com/opscode-cookbooks/mysql/blob/master/test/integration/server56-default/serverspec/assert_functioning_spec.rb#L3-L4
[2014-07-23 14:49:38 -0400] whiteadam: someara: you're the man now dog
[2014-07-23 14:51:19 -0400] whiteadam: someara: maybe not, that broke mah specs
[2014-07-23 14:56:25 -0400] whiteadam: someara: well, at least I'm advancing in errors: specinfra/backend/ssh.rb:23:in `build_command': undefined method `options' for nil:
[2014-07-23 14:56:56 -0400] someara: I'm not super slick with ServerSpec yet.... that worked for me. Figured it'd be helpful
[2014-07-23 14:57:10 -0400] whiteadam: someara: no worries, I'll get to the bottom of it eventually
[2014-07-23 15:03:23 -0400] kreisys: hey all... does anyone have any idea how come when I'm using native chef resources in a provider, their block has access to the methods of the surrounding object? This is not true for custom lwrps I'm trying to use in the same provider...
[2014-07-23 15:05:14 -0400] bixu: Even though I have removed all references to the cookbook from my Berksfile, I keep getting this error when I run `berks`: "Cookbook '<cookbook_name>' (0.0.12) not found in any of the sources! This can happen if the remote cookbook has been deleted or if the sources inside the Berksfile have changed. Please run `berks update <cookbook_name>` to resolve to a valid version."
[2014-07-23 15:05:26 -0400] bixu: How can I fix this?
[2014-07-23 15:05:46 -0400] jtimberman: bixu: do you have a transient dependency on it?
[2014-07-23 15:06:20 -0400] bixu: Is there an easy way to check for that?
[2014-07-23 15:06:29 -0400] Guest34059: roles can be defined in 2 formats 1) Json and 2) Ruby language Right ?
[2014-07-23 15:07:48 -0400] kenv: roles can be defined in 2 formats 1) Json and 2) Ruby language Right ?
[2014-07-23 15:07:53 -0400] bixu: kenv: Yes.
[2014-07-23 15:08:03 -0400] kenv: Ok bixu
[2014-07-23 15:09:38 -0400] bixu: jtimberman: `berks contingent <cookbook_name>` shows no dependencies...
[2014-07-23 15:10:20 -0400] jtimberman: kenv: http://docs.opscode.com/essentials_roles.html#role-formats
[2014-07-23 15:10:52 -0400] jtimberman: bixu: run with debug output? anything useful in there?
[2014-07-23 15:11:12 -0400] bixu: jtimberman: Stand by...
[2014-07-23 15:12:16 -0400] bixu: I see maybe a 'method_missing' error from celluloid.
[2014-07-23 15:12:22 -0400] kenv: Please let me understand what does this statement mean : env_run_lists "prod" => ["recipe[apache2]"],               "staging" => ["recipe[apache2::staging]"
[2014-07-23 15:13:03 -0400] strictlyb: it means for your prod environment include  recipe::apache2
[2014-07-23 15:13:13 -0400] strictlyb: and for staging include apache2::staging
[2014-07-23 15:13:32 -0400] strictlyb: for that specific role
[2014-07-23 15:14:25 -0400] zts: kreisys: can you pastebin an example?  I'm not quite sure what you mean...
[2014-07-23 15:14:56 -0400] bixu: jtimberman: I'm still seeing berkshelf trying to install cookbooks that i've commented out in my Berksfile...maybe this is the issue?
[2014-07-23 15:15:21 -0400] strictlyb: maybe berksfile.lock?
[2014-07-23 15:15:26 -0400] PierreRambaud: bixu, try to remove Berkshelf.lock and retry your berks install
[2014-07-23 15:15:27 -0400] jtimberman: ^
[2014-07-23 15:15:49 -0400] bixu: But if I remove it I no longer have version constraints on some of my other cookbooks.
[2014-07-23 15:15:59 -0400] bixu: I was instead editing the lockfile - is that wrong?
[2014-07-23 15:16:18 -0400] Adobeman: is there a way to tell chef receipe to install both 64 and 32 bit pkg?
[2014-07-23 15:16:37 -0400] strictlyb: berksfile.lock will be installed by whats in Berksfile unless it already exists in .lock iirc
[2014-07-23 15:16:49 -0400] bixu: (editing the lockfile and removing references to the cookbooks i'm now ignoring)
[2014-07-23 15:16:51 -0400] strictlyb: i might be wrong on that
[2014-07-23 15:17:19 -0400] hypnosb: this is basically impossible to get working properly
[2014-07-23 15:17:32 -0400] hypnosb: recipes are totally broken in any distro
[2014-07-23 15:17:45 -0400] hypnosb: shit
[2014-07-23 15:18:08 -0400] bixu: Partly this might be because I wasn't having success pinning one of the cookbooks in my Berksfile to a specific git revision...
[2014-07-23 15:18:40 -0400] bixu: So I was trying to just remove the cookbook from the Berksfile until I could patch/PR the later cookbook version to fix a bug.
[2014-07-23 15:18:50 -0400] kreisys: zts: http://pastebin.com/wnhdnme0
[2014-07-23 15:21:22 -0400] kreisys: If I put a Chef::Log.info(self.class) in the resource blocks it'd say Chef::Provider::Log and Chef::Provider::MyLog as expected...
[2014-07-23 15:24:02 -0400] matticulous: im hopeful that this is a solved problem; just having problems finding a doc: since chef_gem runs before convergence, how does one deal with the installation of a gem that has dependencies that would be fulfilled during convergence?
[2014-07-23 15:24:47 -0400] matticulous: for example, if i am using chef_gem to install the aws-sdk gem, it requires dev tools that i would normally install by including build-essential.
[2014-07-23 15:25:10 -0400] MotherMGA: is there a good way to use knife-solo to provision/deploy to multiple nodes at the same time?
[2014-07-23 15:25:23 -0400] jtimberman: matticulous: build-essential has an attribute you can set to tell it to install the packages during the compile phase.
[2014-07-23 15:27:01 -0400] matticulous: @jtimberman: thanks! exactly what i needed
[2014-07-23 15:27:17 -0400] zts: kreisys: interesting, no idea!
[2014-07-23 15:28:01 -0400] kreisys: I just work around this by assigning it to a local variable and using that in the block. but that's ugly as hell :(
[2014-07-23 15:28:18 -0400] kenv: knife client list is showing me error : ERROR: Your private key could not be loaded from /etc/chef/client.pem but the .pem file is loaded in my client machine
[2014-07-23 15:28:35 -0400] kenv: Also the node is being shown in the  console of chef server
[2014-07-23 15:29:36 -0400] zts: kreisys: if you find no love in here, might be worth asking in #chef-hacking
[2014-07-23 15:29:37 -0400] hypnosb: how is this suppose to work really? the fedora OS has incompatible packages between yum and the recipe... and ubuntu has similar problems. I tried an older instance of ubuntu and get SSl errors
[2014-07-23 15:29:41 -0400] hypnosb: i can't properly bootstrap anything with a basic web server role, apache, mysql
[2014-07-23 15:30:24 -0400] kreisys: aight will try there
[2014-07-23 15:30:34 -0400] prometheanfire: how do I transfer ownership of a cookbook in supermarket?
[2014-07-23 15:31:14 -0400] hypnosb: ERROR: cannot verify www.opscode.com's certificate, issued by `/C=US/O=DigiCert Inc/CN=DigiCert Secure Server CA':
[2014-07-23 15:31:15 -0400] hypnosb: ec2-54-234-0-253.compute-1.amazonaws.com   Unable to locally verify the issuer's authority.
[2014-07-23 15:31:27 -0400] hypnosb: centos 5.4
[2014-07-23 15:33:29 -0400] bcobb: prometheanfire: you need to first add a collaborator to the cookbook. following that you can click on their avatar from the cookbook page and transfer ownership
[2014-07-23 15:33:52 -0400] bcobb: prometheanfire: there's a gitter/irc channel just for supermarket, too, if you have further questions https://gitter.im/opscode/supermarket
[2014-07-23 15:37:24 -0400] hypnosb: try to bootstrap a ubuntu and the damn repository gives me 403 forbidden
[2014-07-23 15:37:25 -0400] prometheanfire: gitter is accessable from irc?
[2014-07-23 15:37:27 -0400] hypnosb: this makes absolutely no sense
[2014-07-23 15:37:40 -0400] prometheanfire: bcobb: thanks
[2014-07-23 15:37:42 -0400] hypnosb: i used chef with aws years ago and it worked.. how do things get worse?
[2014-07-23 15:37:48 -0400] hypnosb: mind boggling
[2014-07-23 15:39:13 -0400] someara: hypnosb its not mind boggling.... the software world around you is always moving and changing
[2014-07-23 15:39:24 -0400] whiteadam: What ruby linter does everyone use? go!
[2014-07-23 15:39:30 -0400] someara: rubocop
[2014-07-23 15:39:53 -0400] whiteadam: good, b/c that's what I am using. Now I know I am doing things properly.
[2014-07-23 15:40:02 -0400] someara: rubocop -a is my homeboy
[2014-07-23 15:40:24 -0400] whiteadam: someara: for a good answer, you get this: https://www.youtube.com/watch?feature=player_embedded&v=jVf4_WglzWA
[2014-07-23 15:40:59 -0400] whiteadam: dude... -a is the jam
[2014-07-23 15:43:48 -0400] jtimberman: hypnosb: we had an issue awhile back where the order of the domains in our SSL certificate caused the wget on RHEL 5 to not be able to verify correctly. It is a bug in wget.
[2014-07-23 15:45:26 -0400] holoway: jtimberman: so is there a resolution?
[2014-07-23 15:48:14 -0400] someara: I just bootstrapped a cent-5 machine with omnibus no sweat
[2014-07-23 15:49:47 -0400] jtimberman: someara: what version of centos 5?
[2014-07-23 15:49:55 -0400] someara: sec
[2014-07-23 15:49:56 -0400] jtimberman: holoway: centos 5.4 is fairly old, perhaps wget has an update that someara had?
[2014-07-23 15:50:29 -0400] someara: centos-58 on DO
[2014-07-23 15:50:33 -0400] jtimberman: i've not heard *this* particular issue since we updated the certs for expiration a few weeks ago.
[2014-07-23 15:50:45 -0400] someara: there's probably a ca-bundle update between 5.4 and 5.8
[2014-07-23 15:52:19 -0400] jtimberman: that may be a thing, but the issue i'm remembering was specifically a wget version issue.
[2014-07-23 15:54:45 -0400] shlant: morning all
[2014-07-23 15:55:09 -0400] someara: wget-1.11.4-2.el5_4.1
[2014-07-23 15:57:05 -0400] hypnosb: someara, i like change but I also like stability
[2014-07-23 15:58:03 -0400] someara: somewhere in the middle lies the truth
[2014-07-23 16:01:13 -0400] someara: hypnosb what recipe are you trying to get working
[2014-07-23 16:02:51 -0400] hypnosb: someara,  chef-vendor-mysql
[2014-07-23 16:03:06 -0400] someara: chef-vendor-mysql?
[2014-07-23 16:03:16 -0400] someara: you mean this? https://github.com/opscode-cookbooks/mysql
[2014-07-23 16:03:52 -0400] someara: last I checked, these all passed: https://gist.github.com/someara/ddfc4b03380e946f223e
[2014-07-23 16:03:53 -0400] hypnosb: i think so.. if that is what site install pulls
[2014-07-23 16:04:06 -0400] someara: you're using the mysql_service resource?
[2014-07-23 16:04:21 -0400] someara: er... disregard that gist... sec
[2014-07-23 16:04:47 -0400] someara: that was from a dev branch
[2014-07-23 16:04:49 -0400] someara: here: https://gist.github.com/someara/a2330f24381f09db03c0
[2014-07-23 16:05:02 -0400] hypnosb: worse thing I don't understand is ubuntu ec2 instance has a terrible mirror
[2014-07-23 16:05:31 -0400] hypnosb: what are the AMIs used someara ?
[2014-07-23 16:05:43 -0400] someara: I tested ubuntu on digital ocean
[2014-07-23 16:06:10 -0400] someara: but it shouldn't matter... with debian and ubuntu you'll need to make sure the apt recipe has been ran on the machine first
[2014-07-23 16:06:20 -0400] hypnosb: tried, ubuntu, centos, fedora ... they all have a problem in some way
[2014-07-23 16:06:30 -0400] hypnosb: ubuntu repo's are jacked, centos/fedora have different package versions
[2014-07-23 16:06:35 -0400] hypnosb: names
[2014-07-23 16:07:08 -0400] hypnosb: apt rec..
[2014-07-23 16:07:43 -0400] hypnosb: STDERR: Failed to fetch http://us-east-1.ec2.archive.ubuntu.com/ubuntu/pool/main/e/eglibc/libc-dev-bin_2.15-0ubuntu10.3_amd64.deb  403  Forbidden
[2014-07-23 16:07:46 -0400] hypnosb: makes no sense
[2014-07-23 16:08:07 -0400] someara: that's a problem with the ubuntu image or the package repos
[2014-07-23 16:08:12 -0400] hypnosb: sure
[2014-07-23 16:08:19 -0400] someara: re: mysql... fedora-20 isn't supported yet because oracle/systemd
[2014-07-23 16:08:24 -0400] someara: nor is centos 7
[2014-07-23 16:08:32 -0400] someara: centos 65 should work fine
[2014-07-23 16:08:33 -0400] hypnosb: so what does work?
[2014-07-23 16:08:35 -0400] hypnosb: 65
[2014-07-23 16:08:36 -0400] hypnosb: ok..
[2014-07-23 16:08:42 -0400] someara: well... 6.x
[2014-07-23 16:10:00 -0400] someara: if you're not using a cookbook manager, you'll need to make sure you have the yum-mysql-community cookbook installed
[2014-07-23 16:10:01 -0400] someara: https://github.com/opscode-cookbooks/mysql/blob/master/libraries/provider_mysql_service_rhel.rb#L163
[2014-07-23 16:10:23 -0400] gyre007: I think I hit a problem first time in a long time I dont know how to solve...
[2014-07-23 16:11:21 -0400] hypnosb: someara,  I guess i have bookshelf going..
[2014-07-23 16:12:10 -0400] someara: the mysql cookbook should complain about yum-mysql-community being missing if its not installed on your chef-server
[2014-07-23 16:12:10 -0400] someara: https://github.com/opscode-cookbooks/mysql/blob/master/metadata.rb#L20
[2014-07-23 16:12:50 -0400] someara: can you give me a complete trace of your chef-client run?
[2014-07-23 16:13:02 -0400] gyre007: anyone can tell me why node['lib']['version'] is NOT being set at all in attributes file ? http://pastebin.com/YGgNgHFL
[2014-07-23 16:13:37 -0400] gyre007: like the correct versions ARE being printed in the APP's recipes/default.rb recipe
[2014-07-23 16:13:46 -0400] gyre007: but looks like attributes are not set at all
[2014-07-23 16:13:49 -0400] gyre007: err....reset...
[2014-07-23 16:14:08 -0400] gyre007: anyone idea why ?
[2014-07-23 16:14:40 -0400] gyre007: basically the only thing I'm trying to do in the cookbook is to set a different version of the library
[2014-07-23 16:15:19 -0400] gyre007: but that does not seem to be propagated into LIBrecipes/default.rb which is included in APP recipe...
[2014-07-23 16:16:30 -0400] cheeseplus: don't have calculated attributes
[2014-07-23 16:16:33 -0400] someara: attributes files are loaded first, then recipes are compiled, setting things...
[2014-07-23 16:16:36 -0400] cheeseplus: also that
[2014-07-23 16:16:41 -0400] someara: I dont see where you're setting the thumbs thing anywhere
[2014-07-23 16:17:01 -0400] gyre007: someara: that's set on the command like from a json file...
[2014-07-23 16:17:04 -0400] gyre007: dont ask why....
[2014-07-23 16:17:11 -0400] gyre007: but my understanding is when you do this
[2014-07-23 16:17:32 -0400] gyre007: the arg passed to chef-client from json on the cmd line is automatic attributes
[2014-07-23 16:17:33 -0400] gyre007: *
[2014-07-23 16:17:43 -0400] gyre007: which has the highest precedence ?
[2014-07-23 16:18:12 -0400] c_t: Guten Ohai, chefs
[2014-07-23 16:18:15 -0400] someara: you know what, I'm not really sure
[2014-07-23 16:18:20 -0400] gyre007: mm
[2014-07-23 16:18:44 -0400] gyre007: cheeseplus: what do you mean by calculated attributes ?
[2014-07-23 16:19:03 -0400] someara: but in general, doing attribute calculation like default['some']['attribute'] = node['some']['other']['attribute'] always leads to madness
[2014-07-23 16:19:04 -0400] someara: use variables
[2014-07-23 16:19:29 -0400] hypnosb: someara, launched a centos 6.3 vm.. spun it up, but never installed chef-client... yet finished knife ec2 server create successfully
[2014-07-23 16:19:29 -0400] someara: node attributes are meant to be tweakable knobs that let you set values like port numbers and such
[2014-07-23 16:19:35 -0400] gyre007: but would that help me here at all ?
[2014-07-23 16:19:36 -0400] cheeseplus: precedence != ordering either
[2014-07-23 16:19:48 -0400] someara: abusing them as global variables isn't necessary
[2014-07-23 16:20:43 -0400] gyre007: basically that attribute is passed on the command line and it's value needs to override ['lib']['version'] attribute
[2014-07-23 16:20:55 -0400] someara: sure
[2014-07-23 16:21:01 -0400] gyre007: I tried to do this in recipe as node.override['lib']['version'] ... but that had zero effect too
[2014-07-23 16:21:05 -0400] gyre007: on the outcome
[2014-07-23 16:22:15 -0400] someara: generally this kind of pattern is what you want: https://gist.github.com/someara/86663c20924f481c6d08
[2014-07-23 16:22:49 -0400] someara: attributes really should not be dynamic during the course of a chef-client run
[2014-07-23 16:23:00 -0400] gyre007: yeah, that is simple enough, the problem is I'm reusing cookbooks which I did not write ;-) honestly...
[2014-07-23 16:23:10 -0400] someara: well then yea... there's that.
[2014-07-23 16:23:32 -0400] gyre007: are you saying that I should not be overriding attributes like ever ?
[2014-07-23 16:23:43 -0400] someara: by all means, please do
[2014-07-23 16:23:59 -0400] someara: but there are plenty of cookbooks where this becomes dificult
[2014-07-23 16:24:11 -0400] gyre007: yeah, such as this one :-)
[2014-07-23 16:24:26 -0400] someara: precisely because they're abusing node attributes as global variables
[2014-07-23 16:24:42 -0400] someara: and things get weird
[2014-07-23 16:25:20 -0400] gyre007: that essentially means im screwed unless I rework bit pieces of this company's cookbooks ... arrgh that was not my plan haha
[2014-07-23 16:25:42 -0400] someara: hit it with the code can until it works
[2014-07-23 16:26:29 -0400] c_t: juliancdunn: wouldn't it work to build z/Linux chef clients in Hercules?
[2014-07-23 16:26:42 -0400] c_t: not the fastest endeavour, but it would work
[2014-07-23 16:26:51 -0400] gyre007: someara: didnt get what you mean....
[2014-07-23 16:27:09 -0400] someara: haha nevermind that was an opscode joke =)
[2014-07-23 16:27:43 -0400] gyre007: ah
[2014-07-23 16:28:38 -0400] gyre007: so essentially there is no way around this.... i take it
[2014-07-23 16:28:55 -0400] sharpyy: Hello chef folks
[2014-07-23 16:30:21 -0400] hypnosb: [2014-07-23T09:29:58-07:00] ERROR: package[mod_python] (apache2::mod_python line 24) had an error: Chef::Exceptions::Package: No version specified, and no candidate version available for mod_python
[2014-07-23 16:30:45 -0400] someara: gyre007 maybe.... I'd have to grok the situation completely... not sure when attributes set from the CLI show up in the client run
[2014-07-23 16:30:55 -0400] someara: maybe jtimberman does?
[2014-07-23 16:31:05 -0400] someara: that guy knows everything
[2014-07-23 16:31:13 -0400] jtimberman: wtf i don't know anything
[2014-07-23 16:31:17 -0400] hypnosb: me neither
[2014-07-23 16:31:20 -0400] hypnosb: im dum
[2014-07-23 16:31:25 -0400] jtimberman: i'm not even sure how i got into this program.
[2014-07-23 16:31:27 -0400] gyre007: hahah
[2014-07-23 16:31:44 -0400] hypnosb: I'm only getting paid $13/hr so its all relative i guess
[2014-07-23 16:31:48 -0400] hypnosb: to design automation system
[2014-07-23 16:31:50 -0400] hypnosb: cool?
[2014-07-23 16:32:02 -0400] sharpyy: How do you guys manage cookbooks versions per environment using chef-solo and berkshelf ?
[2014-07-23 16:32:46 -0400] gyre007: I think the biggest question is....how are the attributes passed on cmd line from json file treated
[2014-07-23 16:34:49 -0400] gyre007: I'm thinking the same problem can happen in postgresql cookbook
[2014-07-23 16:35:21 -0400] gyre007: https://github.com/hw-cookbooks/postgresql/blob/develop/attributes/default.rb
[2014-07-23 16:35:43 -0400] gyre007: basically if you want to override the version of the postgres...it's not that easy...
[2014-07-23 16:36:04 -0400] gyre007: because https://github.com/hw-cookbooks/postgresql/blob/develop/attributes/default.rb#L68
[2014-07-23 16:40:14 -0400] someara: sharpyy the cookbook version resoultion set (Berksfile.lock) should be used as your environment definition
[2014-07-23 16:40:22 -0400] someara: berks... I forget the command to see that
[2014-07-23 16:40:46 -0400] miguelcnf: hey folks, I'm wondering how everyone handles updating application versions (defined in attributes) on products that are constantly changing (CD pipeline) - I'm worried about programatically overriding the attribute on a per environment bases considering the environment would be shared by multiple products and could lead to merge conflict if anyone decides to update it manually?
[2014-07-23 16:41:39 -0400] gyre007: miguelcnf: attributes are no fun ;-) I'm dealing with similar issue...
[2014-07-23 16:42:52 -0400] miguelcnf: gyre007: true, I'm trying to self-contain everything inside the product cookbook but wouldn't want to parse a ruby file to update the app version on every build
[2014-07-23 16:44:14 -0400] sharpyy: someara: thanks, but the Berksfile.lock is next to its Berksfile so it applies to one environment only it seems. I would think I need one folder per environment with each one its own Berksfile
[2014-07-23 16:44:24 -0400] cyberswat: miguelcnf, wrapper cookbook so you can peg versions?
[2014-07-23 16:45:53 -0400] cyberswat: miguelcnf, this might help http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/
[2014-07-23 16:45:54 -0400] jtimberman: gyre007: someara: chef-client -j JSONFILE.json attributes? Those are in the context of being an initial node object, so they're "node normal"
[2014-07-23 16:48:00 -0400] dgarstang: This.... http://pastebin.com/61mw5ATB ... line 15 it equals 0.1.41, but at line 20 it's 0.1.40. How is that even remotely possible?
[2014-07-23 16:49:22 -0400] dgarstang: how? *cry*
[2014-07-23 16:50:19 -0400] zts: at line 20, it should probably equal "install_version" (set on line 8), since line 15 hasn't run yet
[2014-07-23 16:50:20 -0400] miguelcnf: cyberswat: thanks but I've been there already :) my main issue is not containing my recipes in cb wrappers but how to handle packages (that the recipes install) version changes between environments
[2014-07-23 16:50:33 -0400] gyre007: dgarstang: line 20 is printed during compile time and line 14 converge time ?
[2014-07-23 16:50:58 -0400] dgarstang: gyre007: well sure but where is it getting 0.1.40 from!?!?
[2014-07-23 16:51:32 -0400] dgarstang: this is sooooooooo frustrating
[2014-07-23 16:51:49 -0400] gyre007: haha
[2014-07-23 16:51:55 -0400] dgarstang: I can't understand why this is seemingly impossible.
[2014-07-23 16:52:41 -0400] gyre007: basically, careful with attributes...I spent like last hour investigating some attributes fun only to find out that I need to rework bunch of stuff written by someone else....because Chef attributes ;-)
[2014-07-23 16:52:56 -0400] dgarstang: i've been at this off and on for a WEEK
[2014-07-23 16:52:58 -0400] gyre007: dgarstang: are you setting that version somewhere obsucre somewhere else
[2014-07-23 16:52:59 -0400] gyre007: anywyer ?
[2014-07-23 16:53:02 -0400] dgarstang: it was working. now it's not
[2014-07-23 16:53:30 -0400] dgarstang: gyre007: no, but this is an existing vagrant vm where 0.1.40 was previously installed.
[2014-07-23 16:54:03 -0400] gyre007: how about Vagrant json attributes ?
[2014-07-23 16:54:09 -0400] gyre007: just like literally anywhere...
[2014-07-23 16:54:25 -0400] dgarstang: eeek
[2014-07-23 16:54:34 -0400] dgarstang: good spot
[2014-07-23 16:54:42 -0400] dgarstang: .... is that gonna override whats in the recipe?
[2014-07-23 16:54:46 -0400] gyre007: yep
[2014-07-23 16:54:48 -0400] gyre007: json attrs
[2014-07-23 16:54:49 -0400] dgarstang: :-O
[2014-07-23 16:54:53 -0400] gyre007: are AUTOMATIC attributes
[2014-07-23 16:55:00 -0400] gyre007: they have the highest precedence
[2014-07-23 16:55:12 -0400] gyre007: I actually expected the same behaviour from chef-client -j myattrs.json
[2014-07-23 16:55:14 -0400] pabst^: Ohai Chefs!
[2014-07-23 16:55:19 -0400] gyre007: but boy was I wrong :-)
[2014-07-23 16:55:33 -0400] gyre007: at least according to someara
[2014-07-23 16:55:47 -0400] dgarstang: gyre007: i think that did it. Thanks. saved me a few hours
[2014-07-23 16:55:52 -0400] someara: thats the way it was originally envisioned anyway
[2014-07-23 16:55:57 -0400] gyre007: dgarstang: no probs!
[2014-07-23 16:56:08 -0400] gyre007: its not any more envisioned like that ?
[2014-07-23 16:56:25 -0400] someara: with the cookbook-as-a-project workflow, you're testing against the deps that are solved
[2014-07-23 16:56:36 -0400] someara: mysql depends on yum-mysql-community for example
[2014-07-23 16:56:38 -0400] gyre007: just curious....I'm not saying its wrong..just trying to avoid lots of rework haha....nothing against chef
[2014-07-23 16:56:45 -0400] someara: yum-epel depends on yum
[2014-07-23 16:56:47 -0400] pabst^: I have a template that writes out zone files for DNS, it also automatically generates the serial from Time.new.strftime("%Y%m%d%H%M%S") - my problem is this, it increments on every chef run for all of the zone files. The template block should only really be called if the zone template changes, does anybody know how I can accomplish this?
[2014-07-23 16:56:58 -0400] someara: you end up with a set of versions that you can "lock down to"
[2014-07-23 16:57:06 -0400] someara: with an environment
[2014-07-23 16:57:28 -0400] someara: then bootstrap nodes into that environment
[2014-07-23 16:57:37 -0400] gyre007: well now youre talkingabout versions
[2014-07-23 16:57:44 -0400] gyre007: we were talking about attributes
[2014-07-23 16:57:51 -0400] gyre007: unless you get to the attributes point...
[2014-07-23 16:58:29 -0400] dgarstang: nope.... now I'm back to my old problem again. anyone got a razor blade? http://pastebin.com/61mw5ATB .... At line 19, it equals the value assigned at line 8, not the value retrieved from the ruby block. I KNOW i tested this
[2014-07-23 16:58:33 -0400] gyre007: sorry to drag you into the previous conversation we had :-) I have certainly confused you haha .. unintenionally :-)
[2014-07-23 16:58:36 -0400] miguelcnf: someara: would that apply to package versions defined in attributes ? would they be pinpointed as environment overrides as well ?
[2014-07-23 16:59:04 -0400] someara: aaah.. sorry was answering sharpyy I thought
[2014-07-23 16:59:05 -0400] zts: dgarstang: at line 19, the ruby block hasn't run yet
[2014-07-23 16:59:16 -0400] dgarstang: zts: i'm going in circles.
[2014-07-23 16:59:18 -0400] gyre007: what zts is saying...
[2014-07-23 16:59:28 -0400] dgarstang: i've been going in circles for a week...
[2014-07-23 16:59:30 -0400] gyre007: basically you have 2 phases in chef run
[2014-07-23 16:59:32 -0400] gyre007: compile
[2014-07-23 16:59:36 -0400] gyre007: and converge
[2014-07-23 16:59:37 -0400] dgarstang: yes I know
[2014-07-23 16:59:43 -0400] gyre007: cool :o)
[2014-07-23 16:59:47 -0400] dgarstang: it DID work
[2014-07-23 16:59:58 -0400] someara: you could miguel you could set attributes in environment if you'd like, sure
[2014-07-23 17:00:07 -0400] dgarstang: prolly because of that forgotten json attribute. *sigh*
[2014-07-23 17:00:08 -0400] someara: s/you could//
[2014-07-23 17:00:28 -0400] dgarstang: i just want to grab something from an xml file and use it. for the love of god.
[2014-07-23 17:02:14 -0400] someara: dgarstang stop setting node attributes with ruby blocks and trying to re-use them later
[2014-07-23 17:02:16 -0400] someara: use a variable
[2014-07-23 17:02:24 -0400] zts: dgarstang: comment out lines 10, 11, 16, and 17
[2014-07-23 17:02:32 -0400] someara: https://gist.github.com/someara/86663c20924f481c6d08
[2014-07-23 17:02:59 -0400] gyre007: haha I saw that gist somewhere 
[2014-07-23 17:03:07 -0400] dgarstang: someara: a variable assigned by json passed to the chef-client ?
[2014-07-23 17:04:02 -0400] someara: when chef-client run, the first thing it does is build the node object
[2014-07-23 17:04:08 -0400] someara: by loading cookbook attributes and ohai data
[2014-07-23 17:04:13 -0400] someara: THEN the recipe compilation happens
[2014-07-23 17:04:20 -0400] someara: then the convergence happens
[2014-07-23 17:04:33 -0400] someara: you're trying to modify the node attribute in the convergence phase
[2014-07-23 17:04:36 -0400] dgarstang: is that a yes?
[2014-07-23 17:04:48 -0400] someara: which works, but you're not going to be able to get at it in the compilation phase
[2014-07-23 17:05:04 -0400] someara: is what a yes
[2014-07-23 17:05:09 -0400] hypnosb:  ERROR: No route matches {:action=>"new", :controller=>"databag_items", :databag_id=>nil}
[2014-07-23 17:05:13 -0400] someara: I'm explaining how chef-client works
[2014-07-23 17:05:25 -0400] dgarstang: puppet has the ability to write pugins that can return data back to it. It seems chef does not have a similar mechanism
[2014-07-23 17:05:31 -0400] someara: chef is not puppet
[2014-07-23 17:06:06 -0400] someara: for best results, adjust your world view accordingly
[2014-07-23 17:06:42 -0400] hypnosb: how do i use users cookbook to manage users?
[2014-07-23 17:06:57 -0400] dgarstang: someara: if you are suggesting that I pass the version to install to the chef-client, that's a terrible solution. Firstly, you can't pass json options on the command line. Secondly if you log into the box and want to perform an upgrade with the chef client, you'd have to manually go to theartifactory server to look up the version mamually. If I automate it, it's extra steps that have to be performed outside
[2014-07-23 17:06:59 -0400] dgarstang: chef which doesn't scale very well
[2014-07-23 17:07:41 -0400] someara: when did I suggest passing data on the command line?
[2014-07-23 17:07:52 -0400] someara: chef scales fine. your code is broken
[2014-07-23 17:08:01 -0400] dgarstang: someara: when I asked if the answer to my question was a yes, and you said, yes
[2014-07-23 17:08:16 -0400] someara: I can read backscoll as well as you can
[2014-07-23 17:08:29 -0400] dgarstang: yes, and my backscroll indicates you said yes
[2014-07-23 17:08:42 -0400] someara: yes to what
[2014-07-23 17:08:54 -0400] zts: me too, someara asked "is what a yes?" and you never answered him
[2014-07-23 17:08:57 -0400] dgarstang: yes to passing the version to install to the chef client with json
[2014-07-23 17:09:08 -0400] c_t: 17:06 <@someara> is what a yes
[2014-07-23 17:09:25 -0400] c_t: so yes, technically someara did say "yes"
[2014-07-23 17:09:46 -0400] zts: "<@someara> [...] yes"
[2014-07-23 17:09:51 -0400] zts: good point, well made
[2014-07-23 17:09:57 -0400] someara: me sighs
[2014-07-23 17:10:03 -0400] someara: lets start over
[2014-07-23 17:10:10 -0400] c_t: someara: can I have $5?
[2014-07-23 17:10:15 -0400] c_t: you did say yes at one point
[2014-07-23 17:10:17 -0400] dgarstang: someara: Are you suggesting I pass the version to install to chef via json attributes sent to the chef-client?
[2014-07-23 17:10:38 -0400] someara: you came in here asking why this code is broken: http://pastebin.com/61mw5ATB
[2014-07-23 17:11:03 -0400] someara: I explained its because you're abusing attributes
[2014-07-23 17:11:32 -0400] someara: what you want to do is
[2014-07-23 17:11:37 -0400] dgarstang: someara: let me try another approach. Within a recipe, does chef have a mechanism to retrieving information from the OS?
[2014-07-23 17:12:05 -0400] someara: set default['some']['attribute'] = 'value' in your cookbook attributes file
[2014-07-23 17:12:50 -0400] someara: then, you can access that value in your compilation phase, feeding it into resources
[2014-07-23 17:13:09 -0400] dgarstang: someara: i don't believe that is a scalable solution to my problem.
[2014-07-23 17:13:41 -0400] someara: your code reflects that you do not understand how the chef-client run works. I'm trying to explain it to you
[2014-07-23 17:14:06 -0400] dgarstang: someara: and I am trying to explain to you that it isn't feasible to hard code this particular attribute into the cookbook
[2014-07-23 17:14:17 -0400] someara: its a "default value"
[2014-07-23 17:14:27 -0400] someara: otherwise it'll be nil
[2014-07-23 17:14:40 -0400] someara: there are various ways to set that value during the course of a chef-client run
[2014-07-23 17:14:49 -0400] someara: none of which you're doing in your code
[2014-07-23 17:14:52 -0400] dgarstang: someara: various ways being?
[2014-07-23 17:15:24 -0400] someara: so
[2014-07-23 17:15:31 -0400] someara: you have a recipe compilation phase
[2014-07-23 17:15:41 -0400] someara: that gives you a chance to do LITERALLY ANYTHING YOU WANT
[2014-07-23 17:15:49 -0400] someara: before convergence
[2014-07-23 17:16:09 -0400] someara: so, during that compilation phase... use a ruby variable
[2014-07-23 17:16:13 -0400] someara: of the form
[2014-07-23 17:16:15 -0400] someara: foo = 'bar'
[2014-07-23 17:16:24 -0400] someara: to calculate the value you want
[2014-07-23 17:16:26 -0400] dgarstang: could that be a ruby block?
[2014-07-23 17:16:27 -0400] someara: data = XmlSimple.xml_in(content)
[2014-07-23 17:16:35 -0400] someara: don't even worry about node attributes
[2014-07-23 17:16:39 -0400] someara: pretend they don't exist
[2014-07-23 17:16:45 -0400] someara: forget you ever knew about them
[2014-07-23 17:16:51 -0400] someara: then, pass that variable into your resource
[2014-07-23 17:16:54 -0400] someara: as a parameter
[2014-07-23 17:17:15 -0400] dgarstang: i've been here before
[2014-07-23 17:17:19 -0400] dgarstang: so, no ruby block?
[2014-07-23 17:17:23 -0400] someara: no ruby block.
[2014-07-23 17:17:40 -0400] dgarstang: that's what I had initially. had same issues
[2014-07-23 17:17:50 -0400] someara: ruby_blocks exist to do things during convegence
[2014-07-23 17:18:18 -0400] dgarstang: well if your going to be here for a few min, i'll try it out again, like I did last week
[2014-07-23 17:18:22 -0400] someara: sure
[2014-07-23 17:18:25 -0400] dgarstang: ok
[2014-07-23 17:19:32 -0400] someara: you want the moral equivalent of this: https://gist.github.com/someara/ab9a23a53c235bc4f71d
[2014-07-23 17:22:47 -0400] dgarstang: well that seems to work. *sigh*
[2014-07-23 17:23:17 -0400] someara: tadaa.
[2014-07-23 17:23:42 -0400] quantumfoam: has anyone itc deployed Centrify with Chef?
[2014-07-23 17:28:28 -0400] hypnosb: how can i setup users ?
[2014-07-23 17:28:51 -0400] someara: hypnosb use the users resource directly in a recipe.
[2014-07-23 17:28:55 -0400] someara: that cookbook is opinionated
[2014-07-23 17:29:03 -0400] someara: groups first, then users
[2014-07-23 17:29:13 -0400] hypnosb: what about the data bag ?
[2014-07-23 17:29:22 -0400] hypnosb: i need a rec for groups?
[2014-07-23 17:29:42 -0400] coalbe: i dislike cookbooks with opinions
[2014-07-23 17:30:04 -0400] someara: the users cookbook on the community site is of the opinion that you should drive your users resources with databags
[2014-07-23 17:30:22 -0400] hypnosb: seems reasonable?
[2014-07-23 17:30:35 -0400] someara: I guess, if you're into users
[2014-07-23 17:31:27 -0400] quantumfoam: because the documentation for centrify express is woefully inadequate, and I'd love to talk to someone who has actually done it
[2014-07-23 17:31:51 -0400] someara: quantumfoam I'm not aware of any centrify cookbooks, no
[2014-07-23 17:31:54 -0400] quantumfoam: the chef part is fine; I know how I'm going to do it but it's the actual installation that I'm having issues with
[2014-07-23 17:31:56 -0400] hypnosb: like woe
[2014-07-23 17:32:01 -0400] quantumfoam: I'm writing my own :)
[2014-07-23 17:32:12 -0400] someara: what part of the installation is giving you troubles?
[2014-07-23 17:32:18 -0400] quantumfoam: assuming I can get it going well I'll put it on github
[2014-07-23 17:32:23 -0400] someara: is it doing an interactive prompt or something
[2014-07-23 17:32:40 -0400] quantumfoam: well they give it to you as a package which has an install script when you unzip it
[2014-07-23 17:32:43 -0400] MikeTLive: @someara your example to @dgarstang is very much something ive been looking for.
[2014-07-23 17:32:48 -0400] quantumfoam: you can run that interactively, or give it a config file
[2014-07-23 17:32:58 -0400] quantumfoam: the config file, as far as I can tell, just plain isn't documented
[2014-07-23 17:33:13 -0400] hypnosb: someara, when i try to create a new item for the users data bag I get:
[2014-07-23 17:33:14 -0400] hypnosb: ERROR: No route matches {:action=>"new", :controller=>"databag_items", :databag_id=>nil}
[2014-07-23 17:33:15 -0400] quantumfoam: they mention in their docs that you can USE it but they don't tell you HOW so I'm having syntax problems
[2014-07-23 17:33:19 -0400] someara: lovely
[2014-07-23 17:33:38 -0400] MikeTLive: how to produce a workflow where an artifact can be promoted as being available to deploy without making any changes to or inside chef.
[2014-07-23 17:33:49 -0400] quantumfoam: yeah, I want to set up the config file as an erb template, store my AD administrative credentials in a data bag, then use that to install/join to AD
[2014-07-23 17:34:06 -0400] zts: hypnosb: you'll need to create the databag before you can create an item in it
[2014-07-23 17:34:08 -0400] quantumfoam: the after the fact use the sudoers cookbook to add the VM owner to sudoers
[2014-07-23 17:34:25 -0400] someara: quantumfoam I've seen situations where I've had to use Enterprise Software (pew pew pew)'s native installation docs and guis, then reverse engineer what-in-the-hell-it-did-to-computer by examining filesystem diffs
[2014-07-23 17:34:37 -0400] someara: I've also been known to drop off expect scripts into /tmp and run them ;)
[2014-07-23 17:34:40 -0400] someara: good luck =)
[2014-07-23 17:34:57 -0400] gchristensen: someara: `expect' is a lost art. much respect.
[2014-07-23 17:36:07 -0400] MikeTLive: we have application cookbooks that are added to the runlist of the node - this application cookbook includes and depends on community (and their wrappers)
[2014-07-23 17:37:17 -0400] MikeTLive: default attributes are set in here special to that application, and i have been puzzling about how to promote without repeated checkin of cookbook changes.
[2014-07-23 17:37:46 -0400] someara: yea
[2014-07-23 17:37:50 -0400] quantumfoam: someara: yeah, I posted a plea to their forums. we'll see.
[2014-07-23 17:37:57 -0400] MikeTLive: environments offers a way, but that, too, isnt truly promotion.
[2014-07-23 17:39:07 -0400] someara: sean's golden rule: if you're having trouble with attributes, stop using them
[2014-07-23 17:39:28 -0400] MikeTLive: I have not found many (any?) examples of real workflow for promoting changes - either to chef (cookbooks,databag,etc) or artifact(the code the company writes)
[2014-07-23 17:39:37 -0400] someara: we have an entire full-featured programming language our disposal. use it =)
[2014-07-23 17:40:00 -0400] someara: workflow is a sticky topic because everyone's snowflake is different
[2014-07-23 17:40:23 -0400] someara: a "built from scratch" SDLC can be very elegant
[2014-07-23 17:40:46 -0400] someara: a "duct-tape-the-automation-onto-the-side-of-a-flying-airplane" usually isnt
[2014-07-23 17:40:57 -0400] MikeTLive: @someara indeed. however, we do know that all snowflakes share some charachteristics. I'd like to see some snowflakes up close and have a taste for the common vs. unique
[2014-07-23 17:41:21 -0400] someara: they're all made out of water, for example
[2014-07-23 17:41:47 -0400] MikeTLive: I love you all.
[2014-07-23 17:42:01 -0400] quantumfoam: someara: yeah, I'm trying to learn more Ruby for exactly that reason
[2014-07-23 17:42:11 -0400] MikeTLive: @someara and they are all flakes.
[2014-07-23 17:42:27 -0400] someara: some application infrastructures will manage the operating system with Chef, then deploy "the software" with Another Tool
[2014-07-23 17:42:45 -0400] someara: some consider machines as blocks in the application, and deploy whole nodes
[2014-07-23 17:42:53 -0400] someara: those seem to be the two big macro strategies
[2014-07-23 17:43:06 -0400] MikeTLive: i'm trying to use chef for as much as it offers. master the tool and its caabilities before taping on other ducts.
[2014-07-23 17:43:28 -0400] Damm: the problem or the learning curve with chef is really part imagination, part grit and determination
[2014-07-23 17:43:34 -0400] Damm: to automate your infrastructure
[2014-07-23 17:43:51 -0400] Damm: wether it be just general cookbooks or creating a new way for chef to automate your switches or other things
[2014-07-23 17:43:54 -0400] MikeTLive: my largest pain with using chef has not been "using chef" its been everything else around it.
[2014-07-23 17:44:22 -0400] someara: it totally pays off though
[2014-07-23 17:44:24 -0400] Damm: MikeTLive, does your organization use configuration management/
[2014-07-23 17:44:29 -0400] Damm: or just halfway?
[2014-07-23 17:44:40 -0400] hypnosb: zts, i do have the users  data bag
[2014-07-23 17:44:43 -0400] Damm: having snowflakes that can't be rebuild outside of chef kinda :(
[2014-07-23 17:44:45 -0400] Damm: burns
[2014-07-23 17:45:16 -0400] Damm: I totally admit I adopted Docker and used fabric as I didn't want to create another rails cookbook or try to use the application_rails cookbook
[2014-07-23 17:45:40 -0400] Damm: and I feel no shame because deployment is hard; creating a solid foundation that won't break every time you upgrade is key
[2014-07-23 17:45:41 -0400] someara: and that's awesome.
[2014-07-23 17:45:45 -0400] gchristensen: Damm: good choice avoiding both of those things
[2014-07-23 17:45:54 -0400] MikeTLive: @Damm mixed bag. I'm moving from capistrano to chef. we have a project now thats standing up a few hundred vm's (not elastic, provisioned to me as if physical)
[2014-07-23 17:46:01 -0400] Damm: and we are moving to coreos
[2014-07-23 17:46:05 -0400] Damm: to handle those bits
[2014-07-23 17:46:16 -0400] Damm: just because we like to isolate our docker containers outside of the world
[2014-07-23 17:46:45 -0400] Damm: things that use Java; things that are insecure
[2014-07-23 17:47:02 -0400] Damm: mongo
[2014-07-23 17:47:04 -0400] Damm: :)
[2014-07-23 17:47:19 -0400] MikeTLive: my vision for years has been a parent OS with many containers inside, building as much of the stack as possible, resulting in a swimlane one VM wide
[2014-07-23 17:47:20 -0400] Damm: hosting mongo is dangerous business if you are not careful you could own yourself and a whole lot more
[2014-07-23 17:47:33 -0400] MikeTLive: docker will make that a reality for me.
[2014-07-23 17:47:41 -0400] Damm: I admit my original vision with docker was to eschew distros and just roll my own
[2014-07-23 17:47:53 -0400] Damm: base image
[2014-07-23 17:47:54 -0400] Damm: and be happy
[2014-07-23 17:48:03 -0400] hypnosb: docker seems like it could live on any base image?
[2014-07-23 17:48:04 -0400] gchristensen: yuck
[2014-07-23 17:48:08 -0400] MikeTLive: i can then deploy/destroy docker boxes on whatever i have for a parent OS bos.
[2014-07-23 17:48:11 -0400] Damm: it can
[2014-07-23 17:48:19 -0400] hypnosb: seems rational
[2014-07-23 17:48:39 -0400] quantumfoam: starting to realize kierr is never in here
[2014-07-23 17:48:40 -0400] cheeseplus: MikeTLive: so SmartOS ;)
[2014-07-23 17:48:44 -0400] Damm: I hoped it would reduce the irrational forking but people fork my cookbook a lot
[2014-07-23 17:48:44 -0400] quantumfoam: I guess he's probably busy though
[2014-07-23 17:48:51 -0400] Damm: err docker repos
[2014-07-23 17:49:06 -0400] Damm: people need to learn to accept re-using other peoples cookbooks without modifying them
[2014-07-23 17:49:23 -0400] Damm: I know it's really hard; but there's really no point in creating more work for yourself just because you don't get it
[2014-07-23 17:49:27 -0400] MikeTLive: put a smart balancer/gateway layer in front of a functional/logical grouping of apps each in its box.
[2014-07-23 17:49:32 -0400] quantumfoam: kierrr: HEY
[2014-07-23 17:49:34 -0400] cheeseplus: Damm: I'd argue that causes more confusion for new users
[2014-07-23 17:49:41 -0400] quantumfoam: kierrr: PAY ATTENTION TO ME
[2014-07-23 17:49:44 -0400] quantumfoam: :D
[2014-07-23 17:49:52 -0400] Damm: cheeseplus, Nah you just have to ask what are you doing
[2014-07-23 17:49:55 -0400] cheeseplus: Damm: lots of trying to use broken or unsupported things
[2014-07-23 17:49:59 -0400] Damm: cheeseplus, because often they dont' know how to get there
[2014-07-23 17:50:07 -0400] Damm: and getting there is all they want
[2014-07-23 17:50:12 -0400] MikeTLive: @Damm I am dedicated to reusing and improving shared code - helping it to evolve vs. rewrite/fork (unless it makes sense to diverge of course)
[2014-07-23 17:50:15 -0400] Damm: so hey i wanna run my nginx without owning it
[2014-07-23 17:50:21 -0400] cheeseplus: sure but sometimes writing a specific cookbook is a better start
[2014-07-23 17:50:25 -0400] cheeseplus: to learn chef
[2014-07-23 17:50:26 -0400] hypnosb: i can create a user in the data bag from CLI but not from the web console
[2014-07-23 17:50:27 -0400] MikeTLive: unix-way on a larger level
[2014-07-23 17:50:42 -0400] hypnosb: rage
[2014-07-23 17:50:42 -0400] Damm: nginx run -p 80:80 -v ./nginx.conf:/etc/nginx/nginx.conf -v ./www:/usr/share/www someimage/nginx
[2014-07-23 17:50:47 -0400] cheeseplus: I agree that you should push upstream but not everyone is there and mandating that style isn't ideal for everyone
[2014-07-23 17:50:58 -0400] MikeTLive: i'm blown away by what docker can provide.
[2014-07-23 17:51:00 -0400] Damm: and you've effectively overridden the nginx config file and the mounted your path
[2014-07-23 17:51:06 -0400] Damm: but the real problem is toolage around that
[2014-07-23 17:51:18 -0400] Damm: you need to make it easy for your cohors to bring it up and down
[2014-07-23 17:51:26 -0400] Damm: cohorts*
[2014-07-23 17:51:26 -0400] hypnosb: MikeTLive, what is great about it?
[2014-07-23 17:51:35 -0400] Damm: but there's tools for that
[2014-07-23 17:51:46 -0400] Damm: and fwiw there's a lot of people who just gave up chef trying to do 100% docker
[2014-07-23 17:51:54 -0400] Damm: I won't name names; a lot of old Chef people
[2014-07-23 17:52:11 -0400] Damm: It does work with mixed success; you must tie it with etcd however typically to fail less
[2014-07-23 17:52:22 -0400] cheeseplus: this very conversation has been going on all OSCON it seems
[2014-07-23 17:52:29 -0400] cheeseplus: since docker is SO COOL RIGHT NOW
[2014-07-23 17:52:31 -0400] Damm: Oh I did it
[2014-07-23 17:52:34 -0400] Damm: but look at me now
[2014-07-23 17:52:41 -0400] Damm: I'm back at Chef; I realized yeah you can absolutely do it
[2014-07-23 17:52:48 -0400] Damm: but some of the Complex things suck
[2014-07-23 17:52:53 -0400] Damm: deploying Sensu? Forget it
[2014-07-23 17:53:14 -0400] Damm: I wrote a dockerfile to do it; but I realized oh my what a nasty thing I made
[2014-07-23 17:53:20 -0400] cheeseplus: ^^
[2014-07-23 17:53:21 -0400] Damm: https://github.com/damm/chef-repo/tree/sensu
[2014-07-23 17:53:24 -0400] Damm: and this is how I do sensu
[2014-07-23 17:53:35 -0400] gchristensen: "Private chef-repo"
[2014-07-23 17:53:35 -0400] Damm: I could use to clean that up a little
[2014-07-23 17:53:42 -0400] Damm: it's public though
[2014-07-23 17:54:01 -0400] Damm: or should be
[2014-07-23 17:54:08 -0400] gchristensen: Damm: it is, "private" is the discription
[2014-07-23 17:54:13 -0400] Damm: gchristensen, refresh
[2014-07-23 17:54:27 -0400] Damm: in the end this was my sensu dockerfile https://github.com/damm/docker-sensu
[2014-07-23 17:54:29 -0400] gchristensen: `discription` /me goes to grab more coffee
[2014-07-23 17:54:46 -0400] Damm: it's early I need caffeine
[2014-07-23 17:54:48 -0400] Damm: and a spell checker
[2014-07-23 17:54:52 -0400] Damm: well early for me
[2014-07-23 17:55:22 -0400] Damm: so basically you can escape Chef for Docker; but really the better answer is to use Chef to build your Docker images
[2014-07-23 17:55:46 -0400] Damm: there's some problems with that because how the base images are built but with a little work you'll provide yourself with a better more rich environment
[2014-07-23 17:55:48 -0400] gchristensen: seems just like a case for best tool for the job
[2014-07-23 17:55:53 -0400] Damm: just use the same tools like crane
[2014-07-23 17:55:55 -0400] Damm: to run them
[2014-07-23 17:56:05 -0400] Damm: don't automate your docker containers to run in chef; do that outside
[2014-07-23 17:56:16 -0400] Damm: (maybe? I just find having Chef automate my containers to be eww)
[2014-07-23 17:56:27 -0400] Damm: maybe I do a lot of adhoc containers?
[2014-07-23 17:56:29 -0400] gchristensen: Damm: what are you proposing?
[2014-07-23 17:56:39 -0400] Damm: gchristensen, use chef-solo to build the images and bake it
[2014-07-23 17:56:47 -0400] Damm: and use something else to run it
[2014-07-23 17:56:48 -0400] gchristensen: instead of continuing to run chef
[2014-07-23 17:56:49 -0400] hypnosb: tried to make a user in the data bag... did not work on the server
[2014-07-23 17:57:00 -0400] Damm: i don't have a better answer
[2014-07-23 17:57:25 -0400] someara: docker and chef are not mutually exclusive at all
[2014-07-23 17:57:27 -0400] Damm: jtimberman, likely won't use it but will be neat
[2014-07-23 17:57:37 -0400] Damm: nah do we libswarm?
[2014-07-23 17:57:48 -0400] someara: what people conflate is the strategy of building nodes from scratch with dockerfiles then disting the image
[2014-07-23 17:58:32 -0400] gchristensen: yeah I'm still not clear on what you're saying, Damm.
[2014-07-23 17:58:36 -0400] Damm: well that's the problem is there's a lot of bad ways to be with docker
[2014-07-23 17:58:45 -0400] gchristensen: but that's okay
[2014-07-23 17:58:47 -0400] Damm: like write a nodejs recipe and have chef-metal run it
[2014-07-23 17:59:16 -0400] Damm: but really all I'm saying is if you want a dynamic container you need to run chef because Docker is best for static (non changing) content
[2014-07-23 17:59:26 -0400] Damm: it's use case is a lot different actually than people expect
[2014-07-23 17:59:29 -0400] Damm: single process containers are hard
[2014-07-23 17:59:41 -0400] Damm: and it's something you should achieve; avoiding root? doubly hard
[2014-07-23 18:00:23 -0400] Damm: gchristensen, use both is all I can tell you; and find your sweet spot
[2014-07-23 18:00:37 -0400] Damm: if it takes you longer to deploy with Docker than Chef
[2014-07-23 18:00:40 -0400] Damm: you're doing it wrong
[2014-07-23 18:01:00 -0400] Damm: and you should re-evaluate how much you hate yourself
[2014-07-23 18:01:02 -0400] gchristensen: Damm: I understand. It wasn't clear to me that you were saying "run chef continually in the container"( something I find repulsive,) vs "run chef just once"
[2014-07-23 18:01:30 -0400] Damm: gchristensen, I'm not clear on that either
[2014-07-23 18:01:34 -0400] Damm: both rather offend me
[2014-07-23 18:01:37 -0400] Damm: and make me want to vomit
[2014-07-23 18:01:42 -0400] gchristensen: :|
[2014-07-23 18:01:43 -0400] Damm: I'd rather the docker build be the only chef run
[2014-07-23 18:01:51 -0400] gchristensen: yes that is what I'm saying
[2014-07-23 18:02:01 -0400] Damm: Anything else is what the frankensmoke are you doing
[2014-07-23 18:02:51 -0400] gchristensen: jtimberman: the trend of making `knife` do (allthethings) makes me feel uneasy
[2014-07-23 18:03:20 -0400] someara: knife order me lunch on seamless
[2014-07-23 18:03:34 -0400] jtimberman: gchristensen: well, at some point we are going to lean more on `chef` from chef-dk for such things.
[2014-07-23 18:03:42 -0400] gchristensen: gotcha
[2014-07-23 18:03:45 -0400] jtimberman: but i've only heard that discussed in things like RFCs
[2014-07-23 18:03:47 -0400] gchristensen: I also haven't touched chef-dk yet, but one day!
[2014-07-23 18:04:05 -0400] someara: i just switched to it yesterday
[2014-07-23 18:04:18 -0400] someara: I keep typing "b" in front of all my muscle memory commands
[2014-07-23 18:04:21 -0400] someara: b kitchen list
[2014-07-23 18:04:25 -0400] someara: b rspec
[2014-07-23 18:04:48 -0400] jtimberman: you should, it's delightful :)
[2014-07-23 18:05:46 -0400] shlant1: any nginx peeps know why I'm getting a redirect loop? anyone know why I'm getting a redirect loop? http://p.ngx.cc/11725148094f9c93
[2014-07-23 18:08:24 -0400] paulmooring: shlant1 well you're redirecting to https via 301 on port 80 and sending that to something via a unix socket
[2014-07-23 18:08:45 -0400] paulmooring: so the question is what does the unix socket send back (and does that send it back to http)
[2014-07-23 18:10:42 -0400] shlant1: paulmooring: I swear I had it working before. I must have made a change that broke it..
[2014-07-23 18:11:19 -0400] shlant1: the socket it unciorn btw
[2014-07-23 18:12:07 -0400] paulmooring: shlant1 if it was me I would check the logs first and if that didn't help turn off the http -> https 301 and see where it sends me
[2014-07-23 18:13:01 -0400] shlant1: paulmooring: will do , thanks
[2014-07-23 18:16:41 -0400] shlant1: paulmooring: I think I found it
[2014-07-23 18:16:45 -0400] shlant1: http://ngx.cc/r/return 301 https://test-cms-pre.companyt.com$request_uri;
[2014-07-23 18:16:55 -0400] shlant1: no slash between com and $request_uri
[2014-07-23 18:17:22 -0400] paulmooring: shlant1 nice, redirect loop seems odd for that fix to me though
[2014-07-23 18:19:22 -0400] hypnosb: is there a cookbook that I can change apt-get ubuntu sources?
[2014-07-23 18:19:33 -0400] hypnosb: apt ?
[2014-07-23 18:19:37 -0400] hypnosb: chef-vendor-apt ?
[2014-07-23 18:20:24 -0400] jtimberman: https://supermarket.getchef.com/cookbooks/ubuntu
[2014-07-23 18:20:27 -0400] jtimberman: :)
[2014-07-23 18:20:28 -0400] ranjib: morning!
[2014-07-23 18:20:47 -0400] jtimberman: hypnosb: ^ that cookbook may be what you're looking for.
[2014-07-23 18:20:49 -0400] jblack: Here's a thought.. if you're going to go through the effort of chef-vault to encrypt a data drive,  don't add a startup script with an embedded copy of the password.
[2014-07-23 18:20:54 -0400] jblack: jes' sayin
[2014-07-23 18:21:08 -0400] jtimberman: jblack: :)
[2014-07-23 18:21:10 -0400] shlant1: yes quite
[2014-07-23 18:22:37 -0400] Damm: prolly missing a few packages in https://github.com/opscode-cookbooks/ubuntu/blob/master/recipes/default.rb
[2014-07-23 18:22:42 -0400] Damm: if we're thinking Docker containers
[2014-07-23 18:22:56 -0400] Damm: it's gosh darn minimal; no wget; no curl
[2014-07-23 18:30:02 -0400] Pursuit: When using "knife data bag edit," am I supposed to be getting the entire databag on one line without any formatting? Can I change this behavior?
[2014-07-23 18:34:46 -0400] Trappar: I'm trying to set up some provisioning for dev VMs. I'd rather not pre-setup the nodes, so I wrote a quick script that has the VM add itself as a new node using the host machine's hostname as the node name. This presents a problem though - any time the VM is rebuilt there is a node name conflict. Is it a bad idea to have the VM provisioning use knife to remove any nodes with the same name before setting up the new node?
[2014-07-23 18:41:21 -0400] Pursuit: Trappar: even if that would be possible, it would require the VM to have admin access to the chef server, which is generally a bad idea
[2014-07-23 18:41:48 -0400] Trappar: Pursuit: What's a better way to go about provisioning dev VMs then?
[2014-07-23 18:42:06 -0400] hypnosb: so with the ubuntu cookbook how do I actually define node['ubuntu']['archive_url']  = mirror://mirrors.ubuntu.com/mirrors.txt  ?
[2014-07-23 18:42:20 -0400] Pursuit: Trappar: What are you using to host the VMs?
[2014-07-23 18:42:20 -0400] hypnosb: can I use the editor in the guy?
[2014-07-23 18:42:36 -0400] Trappar: Pursuit: vagrant/virtualbox
[2014-07-23 18:43:34 -0400] ranjib: Trappar, you can offload some of those works to chef-metal as well
[2014-07-23 18:44:00 -0400] Trappar: ranjib: Haven't heard of that. I'll look into it.
[2014-07-23 18:44:50 -0400] Trappar: ranjib: Looks like that would do the same job that Vagrant already does for me.
[2014-07-23 18:45:23 -0400] hypnosb: cookbook, set attribute?
[2014-07-23 18:45:43 -0400] ranjib: yeah.. but you 'll get to define the machines in a recipe instead of a knife plugin
[2014-07-23 18:46:12 -0400] ranjib: also the backend is pluggable. so if you want you can reuse the topology against aws or other public cloud providers
[2014-07-23 18:46:27 -0400] ranjib: also you can use the teardown. parallelization etc benefits
[2014-07-23 18:46:49 -0400] Pursuit: Trappar: I've had some success with knife-openstack. Its "server delete" function has a purge option that removes client/nodes from the server. I would assume that the vagrant plugin has similar functionality.
[2014-07-23 18:47:34 -0400] hypnosb: how do set a attribute within a role?
[2014-07-23 18:47:59 -0400] hypnosb: something that should be fairly easy to do but is extremely ambiguous
[2014-07-23 18:48:03 -0400] Trappar: Pursuit: vagrant does have the built in ability to remove nodes/clients upon VM deletion but it is broken right now =/
[2014-07-23 18:49:01 -0400] jblack: chef-vault requires a key with admin in order to do knife vault update, right?
[2014-07-23 18:49:59 -0400] Trappar: Pursuit: Do you know if it's possible to have a node remove itself when that node only has its client key?
[2014-07-23 18:51:17 -0400] hypnosb: rage
[2014-07-23 18:51:18 -0400] Pursuit: Trappar: Not that I've come across
[2014-07-23 18:51:18 -0400] george_mcfly: is there any way for a kitchen.yaml to run scripts before doing the chef run ? sort of like a bootstrap step ?
[2014-07-23 18:51:43 -0400] hypnosb: projects get old, simple tasks are forgotten
[2014-07-23 18:51:58 -0400] Trappar: Pursuit: I guess I'm just not seeing how you're supposed to deal with VMs using chefs. Are you supposed to pre-setup the nodes for them?
[2014-07-23 18:52:53 -0400] hypnosb: you guys ever do anything with attributes or use telepathy?
[2014-07-23 18:53:04 -0400] hypnosb: i'm thinking of a variable
[2014-07-23 18:55:09 -0400] jblack: Yeah,  a client with a non-admin key shouldn't be able to run vault update, methinks
[2014-07-23 18:55:33 -0400] cheeseplus: hypnosb: http://docs.opscode.com/essentials_roles.html
[2014-07-23 18:56:06 -0400] cheeseplus: more specifically - http://docs.opscode.com/essentials_roles.html#json
[2014-07-23 18:56:57 -0400] Trappar: Anyone have a recommendation for how to deal with non-permanent VM nodes? Create the nodes in advance?
[2014-07-23 18:58:47 -0400] hypnosb: cheeseplus, can I just add a attribute from the GUI?
[2014-07-23 19:10:39 -0400] cheeseplus: hypnosb: I'd advocate never using the gui for setting anything
[2014-07-23 19:14:00 -0400] hypnosb: i can't save the json .. just says "node not updated, skipping node save"
[2014-07-23 19:16:48 -0400] btm: Developer Office Hours: Join: bit.ly/1lwjKDw Watch: bit.ly/1lwjKDu
[2014-07-23 19:20:44 -0400] cheeseplus: hypnosb: how are you setting the attributes? gui, cli?
[2014-07-23 19:21:06 -0400] hypnosb: was thinking i could from the GUI
[2014-07-23 19:21:53 -0400] cheeseplus: I mean you probably can but as I said, I'd advice doing nothing via the gui
[2014-07-23 19:22:02 -0400] cheeseplus: advise*
[2014-07-23 19:22:43 -0400] rsavage_: I have an interesting issue...
[2014-07-23 19:24:03 -0400] rsavage_: I can print a variable using chef's Log facility, but I can't assign it to a node attribute
[2014-07-23 19:24:06 -0400] rsavage_: http://pastebin.com/9AV7TVf8
[2014-07-23 19:24:28 -0400] rsavage_: Line #9 is not working, it's null
[2014-07-23 19:24:35 -0400] Damm: node.set
[2014-07-23 19:24:38 -0400] Damm: or node.default
[2014-07-23 19:24:44 -0400] Damm: but likely setting it should fix it
[2014-07-23 19:25:05 -0400] rsavage_: Damn:  I need to make it persistant
[2014-07-23 19:25:40 -0400] rsavage_: Let me try default
[2014-07-23 19:26:21 -0400] rsavage_: hang on a sec
[2014-07-23 19:26:33 -0400] rsavage_: node.normal is going this in my JSON on the node record
[2014-07-23 19:26:35 -0400] rsavage_:      "lbhostname": {
[2014-07-23 19:26:35 -0400] rsavage_:         "activstreams-dev-ilb": {
[2014-07-23 19:26:35 -0400] rsavage_:         }
[2014-07-23 19:26:36 -0400] rsavage_:       }
[2014-07-23 19:26:36 -0400] rsavage_:     },
[2014-07-23 19:26:47 -0400] rsavage_: and that's what I want
[2014-07-23 19:27:01 -0400] rsavage_: I just need the output of lb_name to show up...
[2014-07-23 19:27:10 -0400] rsavage_: log "Load Balancer DNS Name: #{lb_name}"
[2014-07-23 19:27:12 -0400] rsavage_: work
[2014-07-23 19:27:14 -0400] rsavage_: works
[2014-07-23 19:27:22 -0400] rsavage_: node.normal['awssdk']['lbhostname']["#{elbname}"] = "#{lb_name}" assigns null
[2014-07-23 19:27:30 -0400] rsavage_: it's strange
[2014-07-23 19:28:53 -0400] gchristensen: rsavage_: check out pastebin.com
[2014-07-23 19:29:25 -0400] rsavage_: gchristensen I know :P
[2014-07-23 19:30:46 -0400] gchristensen: rsavage_: put that knowledge into practice :)
[2014-07-23 19:31:21 -0400] rsavage_: gchristensen: oh quit the complaining... I gotcha
[2014-07-23 19:31:37 -0400] zts: gist.github.com is good too
[2014-07-23 19:32:01 -0400] rsavage_: If you noticed my previous message I did post http://pastebin.com/9AV7TVf8
[2014-07-23 19:32:03 -0400] hypnosb: read, try, fail
[2014-07-23 19:32:36 -0400] zts: rsavage_: sorry, I missed that among all the pasting into the channel
[2014-07-23 19:33:29 -0400] rsavage_: basically line 9 is not getting lb_name into the node attribute ['awssdk']['lbhostname']["#{elbname}"], yet I can print it out all day long.
[2014-07-23 19:35:12 -0400] rsavage_: And this is what I get: http://pastebin.com/YNgrQFZu on the node record
[2014-07-23 19:35:45 -0400] rsavage_: But I need "activstreams-dev-ilb": to be "#{lb_name}"
[2014-07-23 19:36:39 -0400] Damm: rsavage_, go join office hours :)
[2014-07-23 19:38:47 -0400] rsavage_: somebody's in a mood today :|
[2014-07-23 19:43:26 -0400] hypnosb: users cookbook does not work
[2014-07-23 19:43:50 -0400] Eulipion: rsavage_: i dunno if it changed in chef11, but i dont think node attributes are available in lwrps
[2014-07-23 19:44:17 -0400] hypnosb: why bother needing to config one of the most common things to config in a system
[2014-07-23 19:44:23 -0400] rsavage_: Eulipion they are I am doing it elsewhere
[2014-07-23 19:45:04 -0400] rsavage_: Eulipion: I think I figured out my problem actually.
[2014-07-23 19:45:15 -0400] Eulipion: hypnosb: it definitely works
[2014-07-23 19:45:16 -0400] rsavage_: Eulipion: thanks for your help
[2014-07-23 19:45:21 -0400] Eulipion: i didnt relaly help
[2014-07-23 19:45:25 -0400] Eulipion: heh
[2014-07-23 19:45:33 -0400] hypnosb: Eulipion, nope... made a users data bag... made a user.. run chef client... users not created
[2014-07-23 19:46:05 -0400] Eulipion: thats not the cookbook not working, you're missing a piece of the puzzle
[2014-07-23 19:47:43 -0400] Eulipion: hypnosb: how are you applying the users cookbook?
[2014-07-23 19:47:58 -0400] hypnosb: Eulipion, its in a role
[2014-07-23 19:48:09 -0400] Eulipion: go on....
[2014-07-23 19:48:28 -0400] hypnosb: Eulipion, associated role with node, run chef-client on node
[2014-07-23 19:48:34 -0400] hypnosb: says users cookbook is in run list
[2014-07-23 19:48:37 -0400] hypnosb: no user made
[2014-07-23 19:48:40 -0400] Eulipion: have you see https://github.com/sethvargo-cookbooks/users/blob/master/recipes/default.rb
[2014-07-23 19:48:44 -0400] Eulipion: the default recipe does 0
[2014-07-23 19:49:19 -0400] hypnosb: so i have to write the logic to 'create user' ?
[2014-07-23 19:49:27 -0400] hypnosb: LOL
[2014-07-23 19:49:30 -0400] Eulipion: when u made ur user, did u add it to a group?
[2014-07-23 19:50:39 -0400] hypnosb: yes, wheel
[2014-07-23 19:51:10 -0400] Eulipion: ok, make a recipe for wheel or edit default (though u should be wrapping the cookbook)
[2014-07-23 19:51:17 -0400] Eulipion: copy this accordingly
[2014-07-23 19:51:18 -0400] Eulipion: https://github.com/sethvargo-cookbooks/users/blob/master/recipes/sysadmins.rb
[2014-07-23 19:51:25 -0400] Eulipion: then include the recipe
[2014-07-23 19:52:19 -0400] Eulipion: it will make users based upon their group membership.  or delete.  i purge users by adding them to group remove
[2014-07-23 19:56:38 -0400] hypnosb: Eulipion,  user json is in sysadmins... added the snippet to default.rb ... knife cookbook upload user... run chef-client... ERROR: No resource or method named `users_manage' for `Chef::Recipe "default"'
[2014-07-23 19:57:19 -0400] Eulipion: add a depends to your metadata
[2014-07-23 19:58:43 -0400] hypnosb: what meta data?
[2014-07-23 19:59:28 -0400] Eulipion: if ur getting that ^ error, then your're trying to call users_manage from your own cookbook, right?
[2014-07-23 20:00:29 -0400] hypnosb: yeah?
[2014-07-23 20:00:53 -0400] shlant1: jkeiser: is this new? WARN: The openssl_pkcs8 gem is not loaded: you may not be able to read key fingerprints created by some cloud providers.  gem install openssl_pkcs8 to fix!
[2014-07-23 20:01:00 -0400] Eulipion: users_manage is part of the users cookbook.  to use another cb's resources, you need to declare the dependency
[2014-07-23 20:01:20 -0400] shlant1: jkeiser: results in The image id 'ami-xxxxxxx' does not exist
[2014-07-23 20:01:21 -0400] Eulipion: so in <your cookbook>/metadata.rb, add depends "users"
[2014-07-23 20:01:26 -0400] jkeiser: shlant: new-ish.  It will happen if you are on Ruby 1.9 or below, and if your key does not match
[2014-07-23 20:01:39 -0400] jkeiser: shlant1: it shouldn't be triggering that error, might be a red herring
[2014-07-23 20:03:15 -0400] shlant1: jkeiser: weird.. now knife ec2 says the image does not exist which is a lie....
[2014-07-23 20:04:03 -0400] jkeiser: shlant1: are you set to the right region?
[2014-07-23 20:04:08 -0400] jkeiser: shlant1: changing regions can do that
[2014-07-23 20:04:21 -0400] hypnosb: this makes no sense cookbooks/user/metadata.rb, knife cookbook upload user...The missing cookbook(s) are: 'users' version '>= 0.0.0'
[2014-07-23 20:04:22 -0400] shlant1: jkeiser: looks like other are having it: https://forums.aws.amazon.com/thread.jspa?messageID=558432&tstart=0
[2014-07-23 20:05:05 -0400] hypnosb: crazy
[2014-07-23 20:06:51 -0400] Eulipion: hypnosb: knife cookbook site install users && knife cookbook upload -a
[2014-07-23 20:07:02 -0400] Eulipion: i thought that was in the base cb repo
[2014-07-23 20:08:43 -0400] hypnosb: Eulipion, Cookbook users not found. If you're loading users from another cookbook, make sure you configure the dependency in your metadata
[2014-07-23 20:08:57 -0400] hypnosb: from chef-client
[2014-07-23 20:09:22 -0400] Eulipion: do u have the users cookbook ?
[2014-07-23 20:09:32 -0400] hypnosb: yes
[2014-07-23 20:10:36 -0400] Eulipion: does your chef server have the users cookbook?
[2014-07-23 20:11:06 -0400] hypnosb: Eulipion, yes
[2014-07-23 20:11:36 -0400] Eulipion: did you upload your "user" cookbook after updating cookbooks/user/metadata.rb
[2014-07-23 20:13:05 -0400] hypnosb: yeah uploaded the default.rb with the users_manage
[2014-07-23 20:13:59 -0400] Eulipion: what do u mean, u cant selectively upload files, just cookbooks
[2014-07-23 20:14:09 -0400] hypnosb: i uploaded user cookbook
[2014-07-23 20:14:26 -0400] Eulipion: can u pastebin "knife cookbook list"
[2014-07-23 20:14:32 -0400] Eulipion: can u pastebin "knife cookbook list | greo user"
[2014-07-23 20:14:34 -0400] Eulipion: grep*
[2014-07-23 20:15:10 -0400] hypnosb: Eulipion, its just one line.... user
[2014-07-23 20:15:21 -0400] hypnosb: oh user 0.3.0
[2014-07-23 20:15:21 -0400] Eulipion: there is ur problem
[2014-07-23 20:15:26 -0400] Eulipion: u did not upload "users"
[2014-07-23 20:15:40 -0400] Eulipion: knife cookbook upload -a
[2014-07-23 20:15:42 -0400] hypnosb: o_O
[2014-07-23 20:17:47 -0400] hypnosb: Eulipion, http://dpaste.com/1YRJD7H
[2014-07-23 20:18:31 -0400] nico__: hi all, I have a question about environment run lists - I read that they we generally frowned upon but I don't recall where I read it so I don't know if that's one man's opinion or something the community regards as best practice?
[2014-07-23 20:18:33 -0400] Eulipion: hypnosb: upload -a uploads what you have in your cookbooks dir on disk, u need the cookbook
[2014-07-23 20:18:49 -0400] Eulipion: run: knife cookbook site install users && knife cookbook upload users
[2014-07-23 20:18:51 -0400] hypnosb: there is user and users cookbook ?
[2014-07-23 20:18:55 -0400] nico__: I'm asking because I have a role that I only want to apply to nodes in a specific environmnet
[2014-07-23 20:19:06 -0400] hypnosb: facepalm
[2014-07-23 20:19:09 -0400] Eulipion: users is a community cookbook, you made user, or so i think
[2014-07-23 20:19:58 -0400] nico__: and I would have thought that using an environment run list inside our base node seems like the most direct way to make it happen
[2014-07-23 20:20:39 -0400] hypnosb: Eulipion, no i haven't made neither... I've had a lot of assumptions about how this worked
[2014-07-23 20:20:53 -0400] hypnosb: could have swore user came from site install also
[2014-07-23 20:21:13 -0400] hypnosb: user and users rec ... now I'm totally confused
[2014-07-23 20:22:11 -0400] Eulipion: hypnosb: there is a users cookbook that gives u the users_manage resourse.  there is the "user" resource.  and i have no idea what you have done.
[2014-07-23 20:22:49 -0400] hypnosb: Eulipion, yeah I'm flipping out.. thanks a lot for the help, i need a break
[2014-07-23 20:27:18 -0400] atomic-penguin: what is the difference between cloud and cloud_v2?
[2014-07-23 20:27:27 -0400] atomic-penguin: in ohai
[2014-07-23 20:35:07 -0400] dysinger: yo, chef nerds. how do we deal with test-kitchen & encrypted data bags? all the examples Ive seen use plain text data bags in specs.
[2014-07-23 20:35:56 -0400] jblack: That would probably come down to how you're deploying, right?
[2014-07-23 20:36:08 -0400] atomic-penguin: https://atomic-penguin.github.io/blog/2013/06/07/HOWTO-test-kitchen-and-encrypted-data-bags/
[2014-07-23 20:36:10 -0400] mattberther: anyone have any ways to query a data bag from a Chef::Handler?
[2014-07-23 20:36:17 -0400] mattberther: seems as if the data_bag methods dont work :(
[2014-07-23 20:36:37 -0400] dysinger: atomic-penguin: thanks Ill look-see
[2014-07-23 20:37:11 -0400] dysinger: perfect
[2014-07-23 20:37:13 -0400] dysinger: thanks
[2014-07-23 20:37:38 -0400] hypnosb: Eulipion, where should the actual recipe for users_manage be? in users or user default.rb ?
[2014-07-23 20:38:12 -0400] Eulipion: users_manage is not a recipe, its a LWRP
[2014-07-23 20:38:21 -0400] hypnosb: right but where am i using it at?
[2014-07-23 20:38:41 -0400] Eulipion: lwrps are named <cookbook>_<provider>, so users/providers/manage
[2014-07-23 20:38:46 -0400] Eulipion: but u should not be messing with it
[2014-07-23 20:40:31 -0400] coderanger: mattberther: You would have to use the API directly, the helpers aren't in scope there
[2014-07-23 20:40:54 -0400] mattberther: @coderanger: any potential gotchas with requiring Chef::DSL::DataQuery?
[2014-07-23 20:40:55 -0400] coderanger: mattberther: https://github.com/opscode/chef/blob/master/lib/chef/dsl/data_query.rb#L57-L59
[2014-07-23 20:41:04 -0400] coderanger: mattberther: I wouldn't, just use the real API
[2014-07-23 20:41:30 -0400] mattberther: @coderanger: what do you mean the "real API"?
[2014-07-23 20:41:33 -0400] coderanger: mattberther: But I don't think there would be a problem if you dumped it in to your class namespace, no
[2014-07-23 20:41:45 -0400] coderanger: mattberther: You can just call DataBagItem.load yourself
[2014-07-23 20:41:50 -0400] coderanger: mattberther: skip the helper method
[2014-07-23 20:42:31 -0400] mattberther: ahh... gotcha. thanks :)
[2014-07-23 20:51:44 -0400] nico__: is there a way to ensure that node never executes a certain recipe, even if that recipe is in a role that is applied to the node?
[2014-07-23 20:55:07 -0400] hypnosb: Eulipion, where do i need to write the code to make the user i guess is what i should be saying
[2014-07-23 20:55:17 -0400] hypnosb: Eulipion, do i need a whole new rec? userz ?
[2014-07-23 20:57:13 -0400] Eulipion: if u want to be able to use community cookbooks, you don't want to edit them, just wrap them.  in general, u want ur sysadmins to have accounts everywhere which is why thats the only recipe in users.  add yourself to the sysadmins group (you can keep wheel too).  then change what I assume is ur base role to include users::sysadmins.
[2014-07-23 20:58:07 -0400] howitzer: can anyone answer error in knife node create
[2014-07-23 20:58:50 -0400] gchristensen: howitzer: there is no question to answer. ask a question, perhaps you'll receive an answer.
[2014-07-23 20:59:07 -0400] coderanger: nico__: At the top of that recipe: return if node.name == '...'
[2014-07-23 20:59:17 -0400] howitzer: i get parser error for json object
[2014-07-23 20:59:32 -0400] coderanger: howitzer: Your JSON data is not formatted correctly
[2014-07-23 20:59:49 -0400] howitzer: i added nothing to the json when creating the node
[2014-07-23 21:00:08 -0400] drag00n: https://www.irccloud.com/pastebin/dTJtFR99
[2014-07-23 21:00:31 -0400] coderanger: drag00n: What issue are you having?
[2014-07-23 21:00:46 -0400] drag00n: says that it cant find the directory
[2014-07-23 21:00:59 -0400] AdnanCloud: anyone got a build guide for chef server on linux?
[2014-07-23 21:01:00 -0400] drag00n: when i run that ran command in the directory it works
[2014-07-23 21:01:01 -0400] coderanger: drag00n: does the cwd exist?
[2014-07-23 21:01:11 -0400] coderanger: AdnanCloud: "build guide"? You just install the package
[2014-07-23 21:01:24 -0400] AdnanCloud: yea... im from the windows world.. so anything basic is still complex lol
[2014-07-23 21:01:28 -0400] hypnosb: i add user to sysadmin group and nothing happens
[2014-07-23 21:01:37 -0400] shlant1: github down for anyone else?
[2014-07-23 21:01:47 -0400] coderanger: AdnanCloud: Then I would recommend using Hosted Chef
[2014-07-23 21:01:50 -0400] howitzer: the json is { "node_name": "Node1" }
[2014-07-23 21:02:00 -0400] Eulipion: shlant1: http://www.downforeveryoneorjustme.com/github.com
[2014-07-23 21:02:02 -0400] coderanger: AdnanCloud: Managing a chef server is not a small task
[2014-07-23 21:02:11 -0400] AdnanCloud: thing is i cant use chef hosted at work.. our environment doesn't have access to the internet
[2014-07-23 21:02:16 -0400] drag00n: coderanger: yep, its there when I log in to the instance
[2014-07-23 21:02:31 -0400] shlant1: shoot
[2014-07-23 21:02:36 -0400] coderanger: howitzer: Are you sure there isn't an extra comma or similar?
[2014-07-23 21:02:44 -0400] AdnanCloud: i am going to do a  linux course but i wanted to just install chef.. and get on with the config stuff for now.. and learn linux slowly for admin purposes
[2014-07-23 21:02:45 -0400] coderanger: howitzer: Or possibly smart quotes
[2014-07-23 21:02:46 -0400] Eulipion: hypnosb: does your node have "recipe[users::sysadmins]" in it's run_list?
[2014-07-23 21:03:01 -0400] coderanger: AdnanCloud: Then I would start with chef-solo, the server-based features can come later
[2014-07-23 21:03:17 -0400] coderanger: AdnanCloud: Specifically I would start with test-kitchen as a learning environment
[2014-07-23 21:03:20 -0400] howitzer: coderanger : ?knife.rb config affect the json format
[2014-07-23 21:03:21 -0400] hypnosb: OH thats a whole sep rec
[2014-07-23 21:03:23 -0400] hypnosb: prob not
[2014-07-23 21:03:41 -0400] coderanger: howitzer: No
[2014-07-23 21:03:56 -0400] AdnanCloud: ah okay kool im going to look at both of those
[2014-07-23 21:03:57 -0400] jtimberman: or chef-zero
[2014-07-23 21:04:07 -0400] Eulipion: hypnosb: chef will only do what u tell it to do.  you need to learn the knife commands to be able to query these things on the server side
[2014-07-23 21:04:08 -0400] jtimberman: chef-client w/ local mode will use chef-zero.
[2014-07-23 21:04:20 -0400] jtimberman: chef-zero is API parity with hosted and open source chef server.
[2014-07-23 21:04:21 -0400] coderanger: jtimberman: Thats step two :)
[2014-07-23 21:04:25 -0400] dgarstang: trying to figure out opsworks. it looks like it wants metadata.rb in the directory ABOVE the cookbooks. Does that make sense?
[2014-07-23 21:04:32 -0400] jtimberman: coderanger: localmode makes it transparent :)
[2014-07-23 21:04:34 -0400] hypnosb: Eulipion, added users::sysadmins ... Net::HTTPFatalError: users_manage[sysadmin] (users::sysadmins line 23) had an error: Net::HTTPFatalError: 500 "Internal Server Error"
[2014-07-23 21:04:38 -0400] hypnosb: from chef client
[2014-07-23 21:04:42 -0400] howitzer: coderanger : i instaled chef on aws server , is there anything special to be done?
[2014-07-23 21:04:45 -0400] dgarstang: ie /opt/aws/opsworks/local/bin/berks vendor /opt/aws/opsworks/current/berkshelf-cookbooks is complaining that metadata.rb doesn't exist
[2014-07-23 21:04:45 -0400] hypnosb: just a complete mess at this point
[2014-07-23 21:05:16 -0400] hypnosb: prob should just delete user/users cookbook and start over
[2014-07-23 21:06:03 -0400] hypnosb: Error executing action `remove` on resource 'users_manage[sysadmin]' ...
[2014-07-23 21:06:03 -0400] Eulipion: hypnosb: knife search users "groups:sysadmin"
[2014-07-23 21:06:52 -0400] hypnosb: Eulipion, ERROR: internal server error
[2014-07-23 21:06:57 -0400] AdnanCloud: basically i need to learn linux.. before learning chef it feels like to me.. at least getting down the basics of linux at minimum
[2014-07-23 21:07:15 -0400] howitzer: istheir repair for chef client
[2014-07-23 21:07:19 -0400] coderanger: dgarstang: Questions about opsworks are best asked on the AWS forums, or by filing a support incident with AWS
[2014-07-23 21:07:25 -0400] hypnosb: where is groups? I thought i just needed to set the attribute on the user
[2014-07-23 21:07:49 -0400] coderanger: AdnanCloud: Yeah, Chef only helps you automate things you already know how to do, it isn't a linux training tool
[2014-07-23 21:08:00 -0400] Eulipion: hypnosb: stop what u are doing
[2014-07-23 21:08:13 -0400] hypnosb: :/
[2014-07-23 21:08:22 -0400] AdnanCloud: agreed... thing im not interested in automating linux... because we dont have a linux environment.. but interested in windows and dsc intergration
[2014-07-23 21:08:31 -0400] coderanger: howitzer: Why are you manually creating node objects?
[2014-07-23 21:08:45 -0400] coderanger: AdnanCloud: Okay, then do that?
[2014-07-23 21:09:08 -0400] coderanger: AdnanCloud: Still no need for a chef server :)
[2014-07-23 21:09:19 -0400] Eulipion: hypnosb: go in ur cookbooks path, run "git status", and checkout anything user related so that you have a clean slate
[2014-07-23 21:09:49 -0400] howitzer: coderanger ; knife node create Node1 -> json in VIM pops up ->
[2014-07-23 21:10:02 -0400] coderanger: howitzer: Not how, why
[2014-07-23 21:10:23 -0400] AdnanCloud: how would i do the chef and dsc intergration without the chef server?
[2014-07-23 21:10:24 -0400] coderanger: howitzer: Node objects are generally created automatically when new nodes self-register
[2014-07-23 21:10:25 -0400] howitzer: is there a betterway coderaner
[2014-07-23 21:10:37 -0400] coderanger: AdnanCloud: chef-solo or as jtimberman mentioned, chef-client local mode
[2014-07-23 21:10:45 -0400] howitzer: how do i self register
[2014-07-23 21:11:37 -0400] coderanger: howitzer: knife bootstrap, generally
[2014-07-23 21:11:39 -0400] AdnanCloud: oh okay kool i shall read up on that cheers
[2014-07-23 21:12:08 -0400] howitzer: coderanger anything else added
[2014-07-23 21:12:38 -0400] coderanger: howitzer: I don't understand your question
[2014-07-23 21:13:10 -0400] howitzer: coderanger ? what is needed with knife bootstrp
[2014-07-23 21:13:55 -0400] coderanger: howitzer: You give it the hostname or IP of the target server, and the runlist/environment/etc, and it SSHes to the machine, installs chef, and registers it with your server
[2014-07-23 21:15:03 -0400] howitzer: ok i got error in knife.rb
[2014-07-23 21:20:04 -0400] Eulipion: berks is looking for a version of a cookbook that doesnt exist, and I'm unsure why its even trying.  help? http://pastebin.com/NWQKijbg
[2014-07-23 21:21:28 -0400] dgarstang: from opsworks... "Could not satisfy version constraints for: mysql" ,.... *sigh*
[2014-07-23 21:22:51 -0400] dgarstang: ^ same config works locally with 'berks install'
[2014-07-23 21:24:07 -0400] dgarstang: oh, this is because amazon has called their mysql cookbook the same thing. I can remove from the Berksfile but that then means I can't test locally. Nice!
[2014-07-23 21:24:31 -0400] coderanger: Eulipion: which one is incorrect?
[2014-07-23 21:24:37 -0400] Eulipion: 2.1.1
[2014-07-23 21:24:52 -0400] Eulipion: is the correct 1
[2014-07-23 21:25:17 -0400] coderanger: Eulipion: Where do you have that constraint set?
[2014-07-23 21:25:46 -0400] Eulipion: the the cookbook's metadata.rb, depends "redis", '~> 2.1.1'
[2014-07-23 21:26:20 -0400] coderanger: Eulipion: What does the lockfile look like?
[2014-07-23 21:26:31 -0400] Eulipion: no lockfile, can't install
[2014-07-23 21:26:46 -0400] coderanger: Eulipion: Okay, what about the berksfile?
[2014-07-23 21:27:02 -0400] Eulipion: its the default
[2014-07-23 21:27:20 -0400] coderanger: Eulipion: So just "metadata"?
[2014-07-23 21:27:23 -0400] Eulipion: ya
[2014-07-23 21:27:41 -0400] Eulipion: and source supermarket..
[2014-07-23 21:27:42 -0400] coderanger: Eulipion: Please pastebin the whole metadata.rb
[2014-07-23 21:29:46 -0400] Eulipion: coderanger: metadata and berks: http://pastebin.com/w50CsNFH
[2014-07-23 21:30:51 -0400] coderanger: Eulipion: What version of berks?
[2014-07-23 21:31:43 -0400] Eulipion: berks version 3.1.3
[2014-07-23 21:31:47 -0400] jtimberman: Eulipion: you're telling it to get 'redis' and berkshelf is assuming from supermarket, so it's going for https://supermarket.getchef.com/cookbooks/redis version constraint ~> 2.1.1
[2014-07-23 21:31:50 -0400] jtimberman: which doesn't exist
[2014-07-23 21:32:11 -0400] jtimberman: there's 3.0.[0, 3, 4] of that cookbook.
[2014-07-23 21:32:37 -0400] jtimberman: is the redis cookbook you want actually named something else? There's a couple of them on the site. redisio, e.g.
[2014-07-23 21:32:54 -0400] Eulipion: ok, im still getting the hang of berks, switched to dk last friday.  how would i specify a github page as a source?
[2014-07-23 21:33:12 -0400] Eulipion: redisio doesnt setup sentinal, im looking at https://github.com/miah/chef-redis
[2014-07-23 21:33:37 -0400] coderanger: Eulipion: In your berksfile, add cookbook 'redis', git: '...'
[2014-07-23 21:33:42 -0400] jtimberman: i don't know if miah's redis cookbook is on supermarket. you should point your berksfile at the git repo
[2014-07-23 21:34:01 -0400] jtimberman: cookbook 'redis', github: 'miah/chef-redis'
[2014-07-23 21:34:03 -0400] jtimberman: should do the trick
[2014-07-23 21:34:39 -0400] paulmooring: Eulipion fyi the documentation on the Berkshelf website is pretty nice: http://berkshelf.com/
[2014-07-23 21:35:09 -0400] paulmooring: but both what coderanger and jtimberman said are correct
[2014-07-23 21:35:26 -0400] Eulipion: that worked.  pretty slick ;)
[2014-07-23 21:35:27 -0400] dgarstang: opsworks is a whole new world of hurt
[2014-07-23 21:35:49 -0400] Eulipion: coderanger: jtimberman: thx
[2014-07-23 21:35:50 -0400] coderanger: dgarstang: As I said before, please direct your opsworks questions to their support tools
[2014-07-23 21:38:05 -0400] Neozonz|Disc: Could someone do a code review on this >> https://gist.github.com/anonymous/1fd6f891e3a47dc7112f
[2014-07-23 21:38:29 -0400] Neozonz|Disc: small chef block for grabbing aws instance ips from layer
[2014-07-23 21:39:31 -0400] coderanger: Neozonz|Disc: I would move the logic in to your recipe code
[2014-07-23 21:40:36 -0400] paulmooring: Neozonz|Disc in addition to what coderanger said, you really don't need to save zk_servers as a variable at all
[2014-07-23 21:40:59 -0400] Neozonz|Disc: ?
[2014-07-23 21:41:04 -0400] coderanger: Yeah, I'm assuming there is more logic than that
[2014-07-23 21:41:14 -0400] Neozonz|Disc: this is it lol
[2014-07-23 21:41:30 -0400] paulmooring: you're already iterating over array in node['opsworks']['layers']['instances']
[2014-07-23 21:41:35 -0400] coderanger: Also this isn't valid ruby in general
[2014-07-23 21:41:43 -0400] paulmooring: which is missing .each btw
[2014-07-23 21:42:25 -0400] Neozonz|Disc: ahh
[2014-07-23 21:42:50 -0400] Eulipion: hypnosb: this might help allievate your stress.  http://nypost.com/2014/07/22/kanye-west-claims-victory-over-coinye/
[2014-07-23 21:42:53 -0400] coderanger: Neozonz|Disc: https://gist.github.com/anonymous/1fd6f891e3a47dc7112f#comment-1268875
[2014-07-23 21:43:53 -0400] Neozonz|Disc: what is "each_with_instance"
[2014-07-23 21:44:35 -0400] Neozonz|Disc: could that be anything
[2014-07-23 21:44:40 -0400] Neozonz|Disc: like each_instance
[2014-07-23 21:44:55 -0400] paulmooring: appears I was typing the same thing as coderanger but with different typos
[2014-07-23 21:45:03 -0400] coderanger: Neozonz|Disc: Thats me typoing each_with_index
[2014-07-23 21:45:14 -0400] Neozonz|Disc: haha ok :0
[2014-07-23 21:45:14 -0400] coderanger: because I had just typed instance 4 times
[2014-07-23 21:45:19 -0400] Neozonz|Disc: :)
[2014-07-23 21:45:20 -0400] Neozonz|Disc: thanks
[2014-07-23 21:45:23 -0400] Neozonz|Disc: much clearer now
[2014-07-23 21:46:38 -0400] paulmooring: Neozonz|Disc it's a matter of opinion, but I would still move even that to the recipe logic and send a has of servers and IPs to the template
[2014-07-23 21:47:04 -0400] paulmooring: I try move as much logic as possible out of templates
[2014-07-23 21:47:14 -0400] Neozonz|Disc: cool good to know
[2014-07-23 21:47:35 -0400] Neozonz|Disc: also, what if i wanted to use the same logic, but not add a , at the end of the array?
[2014-07-23 21:48:08 -0400] Neozonz|Disc: for example i need to do something like list each server + ,     so ex: 192.168.0.1,192.168.0.2,192.168.0.3
[2014-07-23 21:48:18 -0400] Neozonz|Disc: but at the end of the array theres no comma
[2014-07-23 21:48:22 -0400] paulmooring: you want to do join on the array
[2014-07-23 21:48:31 -0400] Neozonz|Disc: ?
[2014-07-23 21:48:37 -0400] paulmooring: http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join
[2014-07-23 21:48:53 -0400] paulmooring: some_array.join(",")
[2014-07-23 21:49:14 -0400] Neozonz|Disc: oh wow
[2014-07-23 21:49:16 -0400] Neozonz|Disc: that simple.
[2014-07-23 21:49:35 -0400] Neozonz|Disc: thanks guys
[2014-07-23 21:49:36 -0400] paulmooring: ['1', '2', '3'].join(',')   -> "1,2,3"
[2014-07-23 21:49:37 -0400] Neozonz|Disc: u rock :D
[2014-07-23 21:50:21 -0400] matti: For added crazy Ruby sugar: ['1','2','3'] * ',' ;P
[2014-07-23 21:50:43 -0400] matti: [ Not recommended, tho ]
[2014-07-23 21:51:06 -0400] Eulipion: is there a way to append to a cookbook's metadata deps in a vagrant chef-solo config?  If i don't run apt-get update first, everything else will fail, and I don't want to actually edit all my cookbooks
[2014-07-23 21:51:33 -0400] thorduri: 11
[2014-07-23 21:51:37 -0400] paulmooring: Eulipion is this for testing?
[2014-07-23 21:51:40 -0400] Eulipion: yea
[2014-07-23 21:51:41 -0400] Neozonz|Disc: instance['private_ip'].join(',')   < inside that same array from earlier?
[2014-07-23 21:51:55 -0400] Eulipion: i can get apt into the runlist, but not deps
[2014-07-23 21:51:58 -0400] paulmooring: berkshelf + test-kitchen can take a lot of that pain away
[2014-07-23 21:51:59 -0400] Neozonz|Disc: *same for loop
[2014-07-23 21:52:19 -0400] Eulipion: ok, gonna rtfm on test-kitchen
[2014-07-23 21:52:36 -0400] paulmooring: but I don't know of a way to modify reps in line, I just shove it in the run list via test-kitchen
[2014-07-23 21:53:15 -0400] Eulipion: yea, sounds like its time i stop putting off learning testkitchen.
[2014-07-23 21:54:52 -0400] Neozonz|Disc: paulmooring, like this? https://gist.github.com/anonymous/1fd6f891e3a47dc7112f
[2014-07-23 21:55:12 -0400] paulmooring: Neozonz|Disc yeah that looks right
[2014-07-23 21:55:23 -0400] Neozonz|Disc: cool :D
[2014-07-23 21:55:23 -0400] Neozonz|Disc: thanks!
[2014-07-23 21:55:56 -0400] paulmooring: Neozonz|Disc also if you don't already have one running, keeping a repl open is super helpful while working on Ruby code (be it Chef or stock Ruby)
[2014-07-23 21:56:06 -0400] Neozonz|Disc: repl?
[2014-07-23 21:56:13 -0400] paulmooring: chef-shell, irb or pry
[2014-07-23 21:56:19 -0400] knightorc: with windows registry_key resource is the only way to prevent it from running everytime is to add a not_if contraint?
[2014-07-23 21:56:25 -0400] paulmooring: if you have Chef chef-shell is installed already
[2014-07-23 21:56:35 -0400] Neozonz|Disc: I'm working off aws opsworks
[2014-07-23 21:56:51 -0400] Damm: i bet chef-dk with chef-shell is pryable
[2014-07-23 21:57:17 -0400] paulmooring: ah in that case maybe just opening a pry or irb session would help
[2014-07-23 21:57:38 -0400] paulmooring: it lets you run ruby code interactively, so if you want to try something (like join on an array)
[2014-07-23 21:57:51 -0400] paulmooring: you can get immediate feedback on if your syntax is correct
[2014-07-23 21:58:35 -0400] Neozonz|Disc: dont have much of that :(
[2014-07-23 21:58:39 -0400] Neozonz|Disc: run a fresh deploy each time
[2014-07-23 21:58:47 -0400] Neozonz|Disc: gotta get a local env setup
[2014-07-23 21:58:48 -0400] Neozonz|Disc: to test with
[2014-07-23 22:03:35 -0400] Neozonz|Disc: hmm getting undefined method `each_with_index' for nil:NilClass
[2014-07-23 22:03:59 -0400] paulmooring: your attribute doesn't exist
[2014-07-23 22:04:23 -0400] paulmooring: node['opsworks']['layers']['instances'] == nil
[2014-07-23 22:05:17 -0400] Neozonz|Disc: it does tho :<
[2014-07-23 22:05:45 -0400] Neozonz|Disc: is there a difference between  node[:opsworks][:layers][:instances] and  node['opsworks']['layers']['instances']
[2014-07-23 22:05:50 -0400] dgarstang: Is there a way to put a conditional in metadata.rb so that I get different dependancies between say, vagrant, and oh, I dunno. ... might be opsworks but I'm not allowed to ask about that
[2014-07-23 22:05:51 -0400] heathsnow: Is it possible to update my spec_helper for chefspec so that it ONLY executes my tests and not all cookbook tests?
[2014-07-23 22:06:18 -0400] heathsnow: aka, I don't want to have to fix other peoples cookbooks so their test work properly
[2014-07-23 22:06:26 -0400] paulmooring: dgarstang nope, put all the decencies in there and if they don'
[2014-07-23 22:06:30 -0400] paulmooring: t get used, that's ok
[2014-07-23 22:06:47 -0400] dgarstang: paulmooring: oh. i'm kinda screwed then
[2014-07-23 22:07:01 -0400] dgarstang: depends 'mysql' doesn't work in opsworks
[2014-07-23 22:07:03 -0400] paulmooring: heathsnow spec takes a option for patterns to match (-P I think?)
[2014-07-23 22:07:40 -0400] paulmooring: dgarstang unfortunately I don't know enough about opsworks to help with that
[2014-07-23 22:07:41 -0400] dgarstang: nuthin' but pain
[2014-07-23 22:08:06 -0400] heathsnow: I see an add_filter option now
[2014-07-23 22:08:48 -0400] paulmooring: Neozonz|Disc no, attributes use a custom Mash class node.one, node['one'] and node[:one] should all be the same
[2014-07-23 22:09:09 -0400] Neozonz|Disc: hmm not sure why doesnt work
[2014-07-23 22:09:11 -0400] Neozonz|Disc: i see the json
[2014-07-23 22:09:16 -0400] Neozonz|Disc: looks correct
[2014-07-23 22:09:21 -0400] paulmooring: I feel like there's a reason it's recommended to use node['one'], but I can't recall what it is
[2014-07-23 22:09:25 -0400] Neozonz|Disc: altho after instances there is each instance name
[2014-07-23 22:09:48 -0400] squaresurf: I am having an issue with berkshelf resolving my dependancies. I asked the question in the #berkshelf channel, but not getting any help. Should I post it here?
[2014-07-23 22:09:48 -0400] Neozonz|Disc: but thats where we loop via each and throw it into instance
[2014-07-23 22:10:12 -0400] dgarstang: squaresurf: pretty dead there
[2014-07-23 22:10:38 -0400] joelmoss: can anyone shed any light on the /authenticate_user API method please?
[2014-07-23 22:10:50 -0400] squaresurf: 15:06 (squaresurf) grrr I'm so frustrated with berkshelf 3.0
[2014-07-23 22:10:50 -0400] squaresurf: 15:06 (squaresurf) I never had any issues with dependancies until I updated.
[2014-07-23 22:10:51 -0400] squaresurf: 15:08 (squaresurf) Unable to satisfy constraints on package mysql due to solution constraint (####_com = 3.1.0). Solution constraints that may result in a constraint on mysql: [(####_com = 3.1.0) -> (mysql ~> 4.1.2)], [(####_com = 3.1.0) -> (####_database = 0.3.1) -> (mysql ~> 4.1.2)], [(####_com = 3.1.0) -> (####_database = 0.3.1) -> (database = 1.4.0) -> (mysql >= 1.3.0)],
[2014-07-23 22:10:51 -0400] squaresurf: [(####_com = 3.1.0)
[2014-07-23 22:10:52 -0400] squaresurf: 15:08 (squaresurf) -> (####_php = 1.0.1) -> (php = 1.2.6) -> (mysql >= 0.0.0)], [(####_com = 3.1.0) -> (####_nginx = 2.1.0) -> (####_php = 1.0.1) -> (php = 1.2.6) -> (mysql >= 0.0.0)]
[2014-07-23 22:10:52 -0400] squaresurf: 15:08 (squaresurf) Demand that cannot be met: (####_com = 3.1.0)
[2014-07-23 22:10:52 -0400] squaresurf: 15:08 (squaresurf) Artifacts for which there are conflicting dependencies: mysql = 5.2.6 -> []Unable to find a solution for demands: ####_com (3.1.0)
[2014-07-23 22:10:53 -0400] squaresurf: 15:08 (squaresurf) How is it resolving to 5.2.6?
[2014-07-23 22:10:53 -0400] squaresurf: 15:08 (squaresurf) The first constraint on mysql is 4.1.2!!!
[2014-07-23 22:10:55 -0400] joelmoss: its availabel in both Ridley and Chef-api, but it doesnt seem to work
[2014-07-23 22:10:58 -0400] squaresurf: ^ From #berkshelf
[2014-07-23 22:11:35 -0400] paulmooring: Neozonz|Disc not sure about this case, but in general if a node doesn't exist you get nil.  So if you type node['instance'].each when you mean node['instances'].each you'll get the undefined method error you got above
[2014-07-23 22:12:04 -0400] paulmooring: I generally try to debug that by sshing into the node and running chef-shell to see what attributes actually exist
[2014-07-23 22:13:52 -0400] joelmoss: can anyone shed any light on the /authenticate_user API method please? I see ridley exposes it, but I cannot get it to work
[2014-07-23 22:23:14 -0400] paulmooring: joelmoss I think maybe that doesn't exist on open source Chef Server
[2014-07-23 22:26:26 -0400] paulmooring: or maybe it does
[2014-07-23 22:26:39 -0400] joelmoss: actually, ridley does work with open source chef, but not chef-api gem
[2014-07-23 22:26:44 -0400] joelmoss: yeah it does
[2014-07-23 22:27:10 -0400] paulmooring: I don't really see it documented outside of the tests though
[2014-07-23 22:27:23 -0400] joelmoss: no its not, which is annoying
[2014-07-23 22:28:08 -0400] paulmooring: best I could do is point you to the pedant tests and wish you luck
[2014-07-23 22:28:42 -0400] joelmoss: yeah already read them
[2014-07-23 22:28:43 -0400] joelmoss: thx
[2014-07-23 22:28:52 -0400] paulmooring: well good luck then
[2014-07-23 22:30:11 -0400] joelmoss: ok, got it working with Ridley, but chef-api is busted
[2014-07-23 22:31:19 -0400] paulmooring: joelmoss any chance you've got time to file an issue?
[2014-07-23 22:31:27 -0400] joelmoss: was just about to
[2014-07-23 22:31:34 -0400] paulmooring: thank you
[2014-07-23 22:33:41 -0400] Neozonz|Disc: paulmooring, is it each.with_index?
[2014-07-23 22:33:44 -0400] Neozonz|Disc: or each_with_index
[2014-07-23 22:33:57 -0400] paulmooring: each_with_index
[2014-07-23 22:34:21 -0400] paulmooring: or
[2014-07-23 22:34:24 -0400] paulmooring: maybe not
[2014-07-23 22:34:32 -0400] paulmooring: http://www.ruby-doc.org/core-2.1.2/Array.html
[2014-07-23 22:34:37 -0400] paulmooring: all the valid methods are in there
[2014-07-23 22:35:11 -0400] coderanger: joelmoss: I think that API requires an admin key, check that you are using one
[2014-07-23 22:35:24 -0400] joelmoss: already did
[2014-07-23 22:35:29 -0400] coderanger: joelmoss: In enterprise chef it is restricted to specific webui keys
[2014-07-23 22:35:40 -0400] joelmoss: Im using open source chef
[2014-07-23 22:35:49 -0400] Neozonz|Disc: paulmooring, don't see it there :o
[2014-07-23 22:36:02 -0400] paulmooring: Neozonz|Disc it's actually part of Enumerable
[2014-07-23 22:36:07 -0400] paulmooring: bad link, sorry
[2014-07-23 22:37:32 -0400] paulmooring: Neozonz|Disc some_array.each_with_index { |v,i| <some code> } works
[2014-07-23 22:38:13 -0400] joelmoss: paulmooring: https://github.com/sethvargo/chef-api/issues/22
[2014-07-23 22:38:30 -0400] paulmooring: thanks joelmoss
[2014-07-23 22:38:36 -0400] joelmoss: cheers
[2014-07-23 22:39:29 -0400] Neozonz|Disc: found my issue
[2014-07-23 22:39:34 -0400] Neozonz|Disc: was missing the layername
[2014-07-23 22:39:50 -0400] Neozonz|Disc: hmm is there a way I can reference the layername without actually calling the layername?
[2014-07-23 22:40:26 -0400] Neozonz|Disc: node['opsworks']['layers'][nameorfirstobjecthere]['instances'].each
[2014-07-23 22:40:31 -0400] Neozonz|Disc: ie something like that ^
[2014-07-23 22:40:33 -0400] paulmooring: Neozonz|Disc is that an opsworks thing?  I'm not familiar with the concept of layernames
[2014-07-23 22:41:02 -0400] Neozonz|Disc: is the name inside the json object
[2014-07-23 22:41:23 -0400] paulmooring: so the attributes work like hashes, you just need 2 levels of iteration
[2014-07-23 22:42:11 -0400] Neozonz|Disc: so i guess I have to run another for each loop
[2014-07-23 22:42:15 -0400] Neozonz|Disc: to reference the layername
[2014-07-23 22:42:20 -0400] Neozonz|Disc: then get to the instances below
[2014-07-23 22:42:26 -0400] paulmooring: node['opsworks']['layers'].each {|layer, attrs| attrs.each_with_index {|i,v| ... } }
[2014-07-23 22:42:28 -0400] Neozonz|Disc: or call the layername directly
[2014-07-23 22:42:59 -0400] paulmooring: yeah you've got it, nested loops
[2014-07-23 22:43:05 -0400] Neozonz|Disc: yup cool thanks
[2014-07-23 22:43:10 -0400] Neozonz|Disc: really helps knowing this stuff :D
[2014-07-23 22:43:42 -0400] Neozonz|Disc: can you variable impose inside
[2014-07-23 22:43:43 -0400] paulmooring: Neozonz|Disc I had a head start knowing Ruby before using Chef :D
[2014-07-23 22:43:59 -0400] paulmooring: I'm not sure what you mean by variable impose
[2014-07-23 22:44:19 -0400] Neozonz|Disc:  node['opsworks'][#{variable}].each
[2014-07-23 22:44:36 -0400] paulmooring: ah, you you can but don't need to
[2014-07-23 22:44:47 -0400] paulmooring: "#{variable}" == variable
[2014-07-23 22:44:59 -0400] Neozonz|Disc: so...
[2014-07-23 22:45:01 -0400] paulmooring: so you could just node['opsworks'][variable]
[2014-07-23 22:45:30 -0400] Neozonz|Disc: node['opsworks']node['opsworks']
[2014-07-23 22:45:48 -0400] Neozonz|Disc: or i guess
[2014-07-23 22:45:53 -0400] hypnosb: I'm trying to use user/users but I get error 500 internal service? http://dpaste.com/083YVB2
[2014-07-23 22:46:03 -0400] Neozonz|Disc: variable = node['opsworks']           ...            node['opsworks'][variable]
[2014-07-23 22:46:05 -0400] Neozonz|Disc: does that work?
[2014-07-23 22:46:36 -0400] paulmooring: well, probably not at least it wouldn't do what I expect you want
[2014-07-23 22:48:52 -0400] paulmooring: variables there are more commonly along the lines of `['app1', 'app2'].each {|app| some_thing node['apps'][app]['ip_address']}`
[2014-07-23 22:51:57 -0400] hypnosb: 500 internal
[2014-07-23 22:52:04 -0400] hypnosb: just to make a user
[2014-07-23 22:53:29 -0400] Neozonz|Disc: paulmooring, hmm on the array , join's getting no implicit conversion of String into Integer
[2014-07-23 22:58:34 -0400] paulmooring: Neozonz|Disc I've got to run now, but you have a type conversion error
[2014-07-23 22:58:45 -0400] Neozonz|Disc: not sure why
[2014-07-23 22:58:51 -0400] Neozonz|Disc: im not trying to convert anything
[2014-07-23 22:58:55 -0400] paulmooring: make sure what you're calling join on is an array and that all the elements respond to to_s
[2014-07-23 22:58:58 -0400] Neozonz|Disc: just trying to add comma
[2014-07-23 22:59:13 -0400] Neozonz|Disc: ok
[2014-07-23 22:59:15 -0400] Neozonz|Disc: thanks for the help
[2014-07-23 23:01:38 -0400] hypnosb: Eulipion, hey i purged all the user/users cookbooks, installed it again.. still get: http://dpaste.com/083YVB2
[2014-07-23 23:04:54 -0400] Eulipion: hypnosb: chef-server-ctl test ?
[2014-07-23 23:06:39 -0400] hypnosb: Eulipion, http://dpaste.com/36CJ2F5
[2014-07-23 23:06:55 -0400] someara: https://gist.github.com/someara/100546da921a204d3ed3
[2014-07-23 23:07:25 -0400] Eulipion: hypnosb: chef-server-reconfigure
[2014-07-23 23:07:37 -0400] Eulipion: u have something bung on the server side
[2014-07-23 23:07:48 -0400] hypnosb: someara, i hope its that easy, but i kinda need the data bag
[2014-07-23 23:07:52 -0400] Eulipion: like ur admin key
[2014-07-23 23:08:08 -0400] hypnosb: 401 pendant error...
[2014-07-23 23:08:43 -0400] hypnosb: chef-server-ctl reconfigure ?
[2014-07-23 23:09:30 -0400] hypnosb: Chef Client finished, 2 resources updated chef-server Reconfigured!
[2014-07-23 23:09:40 -0400] Eulipion: try test again
[2014-07-23 23:10:11 -0400] hypnosb: Eulipion, same thing
[2014-07-23 23:10:25 -0400] hypnosb: Encountered an error attempting to create client pedant_admin_client
[2014-07-23 23:10:30 -0400] hypnosb: whatever pedant is...
[2014-07-23 23:10:46 -0400] someara: hypnosb you may enjoy writing your own users cookbook
[2014-07-23 23:11:11 -0400] someara: get your learn on
[2014-07-23 23:11:22 -0400] Eulipion: did u change anything in chef-server.rb?
[2014-07-23 23:12:12 -0400] hypnosb: Eulipion, I added api_fqdn 'domain.com'  and bookshelf['vip'] = "domain.com"
[2014-07-23 23:12:27 -0400] hypnosb: hmm what was that for again...
[2014-07-23 23:12:35 -0400] Eulipion: u mean HOST.domain.com ?
[2014-07-23 23:12:41 -0400] hypnosb: yeah
[2014-07-23 23:12:57 -0400] hypnosb: chef-server-host.domain.com
[2014-07-23 23:13:02 -0400] hypnosb: ec2-
[2014-07-23 23:13:10 -0400] Eulipion: i dunno, something is up with ur admin key.  a little beyond me
[2014-07-23 23:13:38 -0400] hypnosb: ok thanks for the help... oh no its broke already :|
[2014-07-23 23:14:15 -0400] Eulipion: if u dont have anything setup yet, i think if u delete the key, it'll make a new one.
[2014-07-23 23:15:04 -0400] hypnosb: how is it this bad though? i did get the ubuntu cookbook to modify the sources file
[2014-07-23 23:18:01 -0400] Eulipion: hypnosb: did you login to the webUI  and click the checkbox for "Rengenerate Key" ?
[2014-07-23 23:18:22 -0400] hypnosb: Eulipion, I did
[2014-07-23 23:18:35 -0400] Eulipion: dont ever use the webUI ever again
[2014-07-23 23:18:37 -0400] Eulipion: promise me
[2014-07-23 23:18:55 -0400] hypnosb: :/
[2014-07-23 23:18:59 -0400] hypnosb: why have it then?
[2014-07-23 23:19:05 -0400] Eulipion: its vestigial
[2014-07-23 23:19:14 -0400] Eulipion: knife for everything
[2014-07-23 23:19:28 -0400] Eulipion: its gone in chef12
[2014-07-23 23:19:45 -0400] Eulipion: delete admin.pem, run chef-server-reconfigure
[2014-07-23 23:19:46 -0400] hypnosb: i see
[2014-07-23 23:22:22 -0400] Damm: chef12?
[2014-07-23 23:23:06 -0400] Eulipion: its mentioned briefly here and there.
[2014-07-23 23:23:36 -0400] Eulipion: id assume pulling the UI is a major rev type change
[2014-07-23 23:23:40 -0400] hypnosb: Eulipion, should reconfigure make admin.pem?
[2014-07-23 23:23:46 -0400] Eulipion: it think so
[2014-07-23 23:24:39 -0400] Damm: the webui was removed from the 'chef' package in chef 0.8
[2014-07-23 23:24:52 -0400] Damm: you have been able to just use knife since it was available in chef
[2014-07-23 23:24:59 -0400] Damm: which was 0.8
[2014-07-23 23:25:02 -0400] coderanger: Damm: No it wasn't
[2014-07-23 23:25:12 -0400] hypnosb: Eulipion, didn't recreate admin.pem
[2014-07-23 23:25:26 -0400] Eulipion: i cant believe ur making me say this......
[2014-07-23 23:25:28 -0400] Damm: coderanger, well lemme rephrase; the webui was removed from the core aspect of requirements
[2014-07-23 23:25:29 -0400] Eulipion: login to the webui
[2014-07-23 23:25:31 -0400] Damm: so you don't need a webui
[2014-07-23 23:25:35 -0400] Eulipion: click regereate key
[2014-07-23 23:25:42 -0400] hypnosb: o_O
[2014-07-23 23:25:51 -0400] Damm: Eulipion, don't do it!
[2014-07-23 23:26:00 -0400] hypnosb: theres no knife way to regen admin key?
[2014-07-23 23:26:02 -0400] coderanger: The correct way to say this is "the web interface in open source chef has been deprecated and will be removed in a future release"
[2014-07-23 23:26:14 -0400] Eulipion: isnt that was vestigial means?
[2014-07-23 23:26:37 -0400] Damm: nah i wasn't saying that coderanger
[2014-07-23 23:26:43 -0400] Damm: and I wasn't implying that because I have no knowledge of that
[2014-07-23 23:26:47 -0400] Damm: thanks for trying though
[2014-07-23 23:27:05 -0400] hypnosb: logging into the webui...
[2014-07-23 23:27:06 -0400] coderanger: hypnosb: You can re-key the admin client like any other via knife, or you can hack it up if you've lost all access keys
[2014-07-23 23:27:08 -0400] Damm: Chef 0.7 the webui was the api; you had to have them all
[2014-07-23 23:27:10 -0400] Eulipion: coderanger: what about chef-server-ctl cleanse?
[2014-07-23 23:27:11 -0400] Damm: and 0.6
[2014-07-23 23:27:12 -0400] Damm: and 0.5
[2014-07-23 23:27:16 -0400] Eulipion: will that regen the admin key?
[2014-07-23 23:27:25 -0400] Damm: so you could not shutoff the webui and have a working chef-server
[2014-07-23 23:27:26 -0400] coderanger: if you manually delete the admin client row from the database, it will regerate on startup
[2014-07-23 23:27:51 -0400] coderanger: Damm: While interesting, history from 4 years ago isn't likely to be relevant ;-)
[2014-07-23 23:30:54 -0400] hypnosb: repasted admin.pem key...  still get a 500 making a user
[2014-07-23 23:33:42 -0400] hypnosb: ugh this isn't good
[2014-07-23 23:33:47 -0400] hypnosb: tool overload
[2014-07-23 23:36:05 -0400] medya: how can you tell chef to enter something in shell and hit enter, ( I am trying to run a config shell script for weblogic through cookbook, it should enter some infomration and then hit enter for next page) how can I simmulate enter in chef ?
[2014-07-23 23:40:28 -0400] coderanger: medya: Chef can't do that, you would need something like expect or pyexpect
[2014-07-23 23:47:37 -0400] hypnosb: what is the latest chef server?
[2014-07-23 23:47:46 -0400] hypnosb: chef shell tells me i have Chef Version: 11.12.8
[2014-07-23 23:48:33 -0400] coderanger: hypnosb: thats the version of chef-client
[2014-07-23 23:48:43 -0400] coderanger: hypnosb: server is unrelated, and the latest is 11.1.0
[2014-07-23 23:49:41 -0400] hypnosb:  /opt/chef-server/version-manifest.txt says chef                    11.0.0  ..
[2014-07-23 23:50:34 -0400] coderanger: Then thats the version you have :)
[2014-07-23 23:50:48 -0400] coderanger: You can also check via chef-server-ctl --version I think
[2014-07-23 23:58:43 -0400] viglesias: interestingly this too: curl https://<server-ip>/version
[2014-07-23 23:58:51 -0400] viglesias: including all deps

[2014-07-01 00:03:29 -0400] shanlar: why do people use data bags? wouldnt you want the data checked into the attributes or recipe file?
[2014-07-01 00:04:56 -0400] heathsnow: shanlar: you can encrypt a data bag.  secrets must remain secret :)
[2014-07-01 00:08:39 -0400] coderanger: shanlar: Protip: you're right, don't use em :)
[2014-07-01 00:08:55 -0400] coderanger: shanlar: https://coderanger.net/data-bags/
[2014-07-01 00:09:03 -0400] shanlar: i never use them in my environment. https://github.com/sethvargo-cookbooks/users
[2014-07-01 00:09:14 -0400] shanlar: but seth's cookbook hurts me :(
[2014-07-01 00:09:42 -0400] coderanger: shanlar: Read that page :)
[2014-07-01 00:10:33 -0400] jeremyolliver: Does anyone know how often the new supermarket site updates from community?
[2014-07-01 00:11:43 -0400] shanlar: nice thanks coderanger :)
[2014-07-01 00:11:57 -0400] coderanger: cwebber: ^^
[2014-07-01 00:12:27 -0400] cwebber: jeremyolliver: every 3 hours
[2014-07-01 00:12:33 -0400] jeremyolliver: Cheers, thanks :)
[2014-07-01 00:12:43 -0400] cwebber: coderanger: thanks
[2014-07-01 00:13:21 -0400] jeremyolliver: Thought my cookbook wasn't uploading till I remembered uploads would go to the old site, and probably wouldn't show instantly there
[2014-07-01 00:13:28 -0400] jeremyolliver: Can't wait till it becomes the default :)
[2014-07-01 04:20:15 -0400] chefgirl: how to change the nick name
[2014-07-01 04:26:54 -0400] coderanger: chefgirl: /nick newname
[2014-07-01 04:29:01 -0400] chefgirl: please help me installing berks
[2014-07-01 04:29:16 -0400] chefgirl: $ /opt/chef/embedded/bin/gem install berkshelf --no-ri --no-rdoc
[2014-07-01 04:29:28 -0400] chefgirl: it gives no error
[2014-07-01 04:29:32 -0400] chefgirl: after installing
[2014-07-01 04:29:35 -0400] coderanger: chefgirl: Any major reason to not use chefdk?
[2014-07-01 04:29:44 -0400] chefgirl: $ /opt/chef/embedded/bin/berks -v
[2014-07-01 04:29:48 -0400] coderanger: chefgirl: It comes with berkshelf and many other useful tools pre-installed
[2014-07-01 04:30:06 -0400] chefgirl: it gives  /opt/chef/embedded/bin/berks -v -bash: /opt/chef/embedded/bin/berks: No such file or directory
[2014-07-01 04:30:27 -0400] chefgirl: but i have gone through all the pain of getting the environment up and running
[2014-07-01 04:30:47 -0400] coderanger: You don't have to change your chef environment, just install the new package and change your $PATH
[2014-07-01 04:31:18 -0400] digitalchild: i thought it was a bad idea to use the inbuilt chef tools to run your environment
[2014-07-01 04:31:45 -0400] digitalchild: such as the gem and ruby that ships with chef
[2014-07-01 04:32:01 -0400] coderanger: digitalchild: For things like berks you have to
[2014-07-01 04:32:14 -0400] digitalchild: im not using the internal chef to run berks
[2014-07-01 04:32:15 -0400] coderanger: digitalchild: since it has to interact with the chef gem directly
[2014-07-01 04:32:28 -0400] coderanger: digitalchild: Sure you can install the chef gem in both, but it isn't recommended
[2014-07-01 04:32:39 -0400] coderanger: digitalchild: Just more complexity to deal with
[2014-07-01 04:33:07 -0400] digitalchild: well im running chef from the installer
[2014-07-01 04:33:09 -0400] digitalchild: not gem install
[2014-07-01 04:34:39 -0400] chefgirl: please give me suggestions how to install berkshelf !!!
[2014-07-01 04:34:50 -0400] chefgirl: i am not able to handle it
[2014-07-01 04:35:14 -0400] viglesias: chefgirl: coderanger recommended http://www.getchef.com/downloads/chef-dk/
[2014-07-01 04:35:34 -0400] chefgirl: i want to install it separately
[2014-07-01 04:36:20 -0400] coderanger: chefgirl: Run this "/opt/chef/embedded/bin/gem contents berkshelf"
[2014-07-01 04:36:46 -0400] coderanger: that should show where the gem files themselves ended up
[2014-07-01 04:37:00 -0400] coderanger: if you have $GEM_HOME or $GEM_PATH set, they might have been redirected elsewhere
[2014-07-01 04:41:46 -0400] chefgirl: @coderanger :  /opt/chef/embedded/bin/gem contents berkshelf Unable to find gem 'berkshelf' in default gem paths  Directories searched: /opt/chef/embedded/lib/ruby/gems/1.9.1/specifications /root/.gem/ruby/1.9.1/specifications
[2014-07-01 04:42:06 -0400] coderanger: chefgirl: Are certain the gem install has no output?
[2014-07-01 04:42:15 -0400] coderanger: chefgirl: also does it have a non-zero exit code?
[2014-07-01 04:42:20 -0400] chefgirl: i have not set  $GEM_HOME or $GEM_PATH
[2014-07-01 04:42:44 -0400] chefgirl: i just have set  export PATH="/opt/chef/embedded/bin/:$PATH"
[2014-07-01 04:42:57 -0400] chefgirl: how to check that
[2014-07-01 04:44:45 -0400] coderanger: chefgirl: gem install berkshelf; echo $?
[2014-07-01 04:48:44 -0400] chefgirl: Should i run this /opt/chef/embedded/bin/gem install berkshelf --no-ri --no-rdoc ; echo $?
[2014-07-01 04:50:05 -0400] chefgirl: @coderanger :: please tell
[2014-07-01 04:50:23 -0400] coderanger: chefgirl: You don't need the arguments, they just save a few seconds
[2014-07-01 04:50:36 -0400] coderanger: the tell gem to not install the documentation for the gem
[2014-07-01 04:51:24 -0400] chefgirl: I should go for this :/opt/chef/embedded/bin/gem install berkshelf  ; echo $?
[2014-07-01 04:51:28 -0400] chefgirl: please suggest
[2014-07-01 04:53:47 -0400] chefgirl: @coderanger :please suggest
[2014-07-01 04:54:01 -0400] coderanger: chefgirl: Yes, please run the command
[2014-07-01 04:54:18 -0400] coderanger: I'm not super watching IRC but I'm checking back every few minutes while I take writing breaks
[2014-07-01 04:54:37 -0400] chefgirl: running
[2014-07-01 04:54:42 -0400] coderanger: If you would like dedicated personal support, I offer chef consulting services, and Opscode offers support contracts
[2014-07-01 04:55:04 -0400] chefgirl: basically i want to know how to handle dependencies in cookbooks
[2014-07-01 04:55:35 -0400] chefgirl: sometimes i upload a cookbook that gets failed as it has some dependency on other cokkbook
[2014-07-01 04:55:40 -0400] coderanger: Berkshelf is an excellent choice for that
[2014-07-01 04:56:07 -0400] chefgirl: okay
[2014-07-01 04:58:07 -0400] chefgirl: at end the command is giving 1
[2014-07-01 04:58:11 -0400] chefgirl: @coderanger
[2014-07-01 04:58:16 -0400] chefgirl: :please suggest
[2014-07-01 04:58:34 -0400] coderanger: chefgirl: That means the command is failing, and please stop pinging me, I already said I'll check back every few minutes
[2014-07-01 04:58:42 -0400] coderanger: Does it output anything?
[2014-07-01 04:59:11 -0400] chefgirl: yeas a lot of things make: *** [compilelib] Error 2 extconf.rb:98:in `block in run': Failed to build gecode library. (GecodeBuild::BuildError)         from extconf.rb:97:in `chdir'         from extconf.rb:97:in `run'         from extconf.rb:104:in `<main>'   Gem files will remain installed in /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/dep-selector-libgecode-1.0.2 for inspection. Results logged to /opt/chef/embedded/lib/ruby/gems/1.9
[2014-07-01 04:59:20 -0400] chefgirl: this is the end result
[2014-07-01 04:59:54 -0400] coderanger: chefgirl: Do you have gcc installed?
[2014-07-01 05:00:06 -0400] coderanger: It is failing to compile one of the libraries berkshelf depends on
[2014-07-01 05:00:28 -0400] chefgirl: then how to resolve this
[2014-07-01 05:01:51 -0400] coderanger: chefgirl: Please pastebin the full output from gem install
[2014-07-01 05:02:10 -0400] coderanger: You can use pastebin.com to post the text and then paste the link to the resulting page in here
[2014-07-01 05:03:27 -0400] chefgirl: okay I am doing that
[2014-07-01 05:46:07 -0400] cloudbud: @coderanger : now when I am executing the command its doing nothing but  gem install berkshelf Building native extensions.  This could take a while... then it ends
[2014-07-01 05:46:21 -0400] chefgirl: @coderanger : now when I am executing the command its doing nothing but  gem install berkshelf Building native extensions.  This could take a while... then it ends
[2014-07-01 05:46:39 -0400] coderanger: chefgirl: Check your system logs, might be running out of RAM
[2014-07-01 05:46:51 -0400] chefgirl: okay
[2014-07-01 05:46:54 -0400] coderanger: gecode is very resource-intensive to compile
[2014-07-01 05:47:16 -0400] coderanger: which, again, is why you might want to use the precompiled binaries in chefdk
[2014-07-01 05:50:15 -0400] chefgirl: what is best to use : the chef dk or the enterprise chef that we install manually ?
[2014-07-01 05:50:50 -0400] cheeseplus: chefgirl: chef-dk is the easiest to get started with typically
[2014-07-01 05:51:10 -0400] cheeseplus: from a workstation point of view at least
[2014-07-01 05:51:31 -0400] chefgirl: if we are using chef for our production than what is better ?? chef dk or other chef ?
[2014-07-01 05:52:02 -0400] cheeseplus: chefgirl: chef-dk is just a development kit meant for your workstation, you wouldn't be deploying this to servers
[2014-07-01 05:53:11 -0400] cheeseplus: chef-dk is just a mega package that includes all the tools you'd like install on your development workstation anyway (test-kitchen, berkshelf, foodcritic)
[2014-07-01 05:53:19 -0400] chefgirl: okay that means it contains the chef repositories,gems ruby that is required for chef ?
[2014-07-01 05:53:37 -0400] chefgirl: otherwise i need to install it manually and separately ?
[2014-07-01 05:54:20 -0400] coderanger: chefgirl: None of the extras are required
[2014-07-01 05:54:23 -0400] coderanger: but the are nice to have
[2014-07-01 05:54:31 -0400] coderanger: (berkshelf, test-kitchen, foodcritic)
[2014-07-01 05:54:32 -0400] chefgirl: which is the better approach ?
[2014-07-01 05:55:11 -0400] cheeseplus: chefDK is easier to start with since you don't have to build anything yourself, installing manually is more flexible esepecially if you are developing on the tools themselves
[2014-07-01 05:55:21 -0400] cheeseplus: there isn't really a better
[2014-07-01 05:56:20 -0400] cheeseplus: if you don't know what you need, chefDK is probably a good bet - if you're an experienced rubyist/Chef user you may want to stick it out with your own gems
[2014-07-01 06:06:53 -0400] chefgirl:  /opt/chef/embedded/bin/gem install berkshelf | tee result.log Building native extensions.  This could take a while... getting hanged !!!
[2014-07-01 06:08:15 -0400] coderanger: chefgirl: On my very fast laptop, that step takes 20 minutes
[2014-07-01 06:08:24 -0400] coderanger: chefgirl: Depending on your machine it might be longer
[2014-07-01 06:11:15 -0400] ambientsound: chefgirl: I'd use ChefDK if I were you, saves you a lot of trouble
[2014-07-01 06:12:56 -0400] chefgirl: is it same as that of the chef workstation that we configure manually ?
[2014-07-01 06:21:16 -0400] cheeseplus: chefgirl: chefdk just bundles the chef executable so any configuration you did would still be applicable to it
[2014-07-01 06:21:58 -0400] cheeseplus: you'd just want to uninstall the existing chef (or ensure your $PATH is setup so that the chefDK binaries are loaded)
[2014-07-01 07:49:03 -0400] chefgirl: @coderanger : It is still going on : here is the output that i got http://pastebin.com/FkN3WpR7
[2014-07-01 07:50:15 -0400] coderanger: chefgirl: Those are likely just warnings
[2014-07-01 07:50:22 -0400] coderanger: chefgirl: What kind of computer is this on?
[2014-07-01 07:50:45 -0400] chefgirl: AWS Centos m3.medium
[2014-07-01 07:51:06 -0400] coderanger: chefgirl: Yeah, that is likely to take many hours
[2014-07-01 07:51:13 -0400] coderanger: chefgirl: I really wouldn't if I were you
[2014-07-01 07:51:16 -0400] chefgirl: earlier it was working fine
[2014-07-01 07:54:29 -0400] cloudbud: @coderanger : side by side I am installing the chef dk on other machine
[2014-07-01 07:54:37 -0400] cloudbud: what is the exact procedure
[2014-07-01 07:58:15 -0400] ALVAN: hi all .. in chef 11 is required to enter the release to install rpm packages ?
[2014-07-01 07:59:35 -0400] ALVAN: seems chef can not install the rpm package if i dont specify version 7.0.54-1  ?
[2014-07-01 07:59:49 -0400] ALVAN: if i enter only 7.0.54 i have error
[2014-07-01 08:00:57 -0400] ALVAN: there is a reason why using 7.0.54 only is not working ?
[2014-07-01 08:03:06 -0400] chefgirl: @coderanger :  gem install berkshelf Successfully installed berkshelf-3.1.3 1 gem installed Installing ri documentation for berkshelf-3.1.3... Installing RDoc documentation for berkshelf-3.1.3...
[2014-07-01 08:03:09 -0400] chefgirl: finally
[2014-07-01 08:04:59 -0400] cheeseplus: cloudbud: installing chefDK is as simple as installing a package for your OS http://www.getchef.com/downloads/chef-dk/
[2014-07-01 08:07:42 -0400] cheeseplus: it depends on where you
[2014-07-01 08:07:45 -0400] cheeseplus: 're entering it
[2014-07-01 08:08:14 -0400] cheeseplus: ALVAN: a gist/link of the code would be helpful
[2014-07-01 08:20:20 -0400] ALVAN: cheeseplus: https://dpaste.de/VzCH/raw
[2014-07-01 08:30:33 -0400] cheeseplus: ALVAN: looking at the provider code it looks like it does use release when doing queries
[2014-07-01 08:31:54 -0400] cheeseplus: ALVAN: what OS?
[2014-07-01 08:34:46 -0400] ALVAN: cheeseplus: Centos 5.8
[2014-07-01 08:35:31 -0400] ALVAN: cheeseplus: eys it does use release but only for java_version
[2014-07-01 08:35:42 -0400] ALVAN: for tomcat_version  it does not ...
[2014-07-01 08:36:02 -0400] digitalchild: 5.8.. ugh
[2014-07-01 08:36:02 -0400] ALVAN: and the error is at tomcat_version
[2014-07-01 08:36:21 -0400] digitalchild: 5.8 and tomcat, i am so sorry
[2014-07-01 08:36:44 -0400] cheeseplus: ALVAN: can what happens if you install the package manually without release?
[2014-07-01 08:36:55 -0400] cheeseplus: (if this is a test system)
[2014-07-01 08:37:08 -0400] ALVAN: digitalchild: well it work fine using chef 10 .. upgrading to chef 11 it have error-trace
[2014-07-01 08:37:23 -0400] cheeseplus: I don't have a centos58 vm built on this machine so I can't double check
[2014-07-01 08:37:24 -0400] ALVAN: cheeseplus: i tried that manually running install works fine
[2014-07-01 08:38:04 -0400] ALVAN: using yum install tomcat-7.0.26 works ok
[2014-07-01 08:38:26 -0400] ALVAN: cheeseplus: how can i see exactly which yum command chef is running ?
[2014-07-01 08:38:39 -0400] ALVAN: i did chef-client -l debug -L logfile
[2014-07-01 08:38:44 -0400] ALVAN: but it does not show it
[2014-07-01 08:38:53 -0400] ALVAN: in chef10 and chef9 this worked ok with debug
[2014-07-01 08:39:25 -0400] ALVAN: i tried using ps awux | |grep yum .. .but i cant always catch it
[2014-07-01 08:39:48 -0400] ALVAN: was  ps awux | grep yum
[2014-07-01 08:40:14 -0400] digitalchild: ALVAN: no it was more the fact you have tomcat in your env, i too have tomcat in my env
[2014-07-01 08:40:15 -0400] ALVAN:  i want a way to see all the linux commands chef 11 runs
[2014-07-01 08:40:19 -0400] digitalchild: i wish it would die
[2014-07-01 08:40:33 -0400] digitalchild: and i helped write a book on tomcat..
[2014-07-01 08:41:54 -0400] ALVAN: cheeseplus: in that recipe if i change tomcat_version to default[:myaccountweb][:tomcat_version] = "7.0.26-1"
[2014-07-01 08:41:57 -0400] ALVAN: it works ok
[2014-07-01 08:42:18 -0400] ALVAN: but it does not work using only default[:myaccountweb][:tomcat_version] = "7.0.26"  and i am trying to understand why
[2014-07-01 08:42:26 -0400] cheeseplus: ALVAN: surprised debug isn't showing anything useful
[2014-07-01 08:42:57 -0400] cheeseplus: ALVAN: what is the error thrown?
[2014-07-01 08:43:23 -0400] ALVAN: debug works but is showing the same as my paste
[2014-07-01 08:43:30 -0400] ALVAN: the error is in the above paste
[2014-07-01 08:43:58 -0400] ALVAN: in chef10 debug show also the yum command it run
[2014-07-01 08:46:09 -0400] ALVAN: cheeseplus: i will paste the debug output
[2014-07-01 08:46:30 -0400] chefgirl: @coderanger : the berkshelf is installed finally
[2014-07-01 08:46:48 -0400] cheeseplus: I'm looking through the yum provider code but it hurts my head
[2014-07-01 08:47:00 -0400] cheeseplus: chefgirl: he went to bed
[2014-07-01 08:47:09 -0400] chefgirl: okay
[2014-07-01 08:51:26 -0400] chefgirl: +cheeseplus : how does berkshelf manages the cookbook ?
[2014-07-01 08:51:58 -0400] cheeseplus: Berkshelf manages the dependencies of a cookbook
[2014-07-01 08:53:27 -0400] chefgirl: +cheeseplus : after installation do i need to set its path also ?
[2014-07-01 08:54:00 -0400] ALVAN: cheeseplus: https://dpaste.de/UA7m/raw error with manually running yum
[2014-07-01 08:54:03 -0400] cheeseplus: I'm not sure what you mean
[2014-07-01 09:04:13 -0400] chefgirl: +cheeseplus : do i need to configure berkshelf ?? I have installed it , now whats next
[2014-07-01 09:05:15 -0400] cheeseplus: chefgirl: it depends a bit on if you're adding it to an existing cookbook but the docs are fairly straightforward http://berkshelf.com/
[2014-07-01 09:07:11 -0400] cheeseplus: chefgirl: what are you trying to accomplish?
[2014-07-01 09:24:12 -0400] chefgirl: +cheeseplus : I actually treied to upload a cookbook that has dependency on another cookbook so failed to load
[2014-07-01 09:24:31 -0400] chefgirl: https://github.com/someara/mysql
[2014-07-01 09:24:39 -0400] chefgirl: this was the cookbook
[2014-07-01 09:29:43 -0400] ALVAN: cheeseplus: so any reason why is that ? or in chef 11 is mandatory to specify both version and release number for rpm packages ?
[2014-07-01 09:35:29 -0400] chefgirl: Hi all i would like to know how to use berkshelf
[2014-07-01 09:35:48 -0400] chefgirl:  i have installed it now how to proceed further
[2014-07-01 09:36:18 -0400] cheeseplus: chefgirl: to what end though?
[2014-07-01 09:37:04 -0400] chefgirl: do i need to configure it also
[2014-07-01 09:37:05 -0400] chefgirl: ?
[2014-07-01 09:37:57 -0400] cheeseplus: what are you trying to use berkshelf to do?
[2014-07-01 09:38:13 -0400] chefgirl: to manage dependency
[2014-07-01 09:38:23 -0400] chefgirl: i uploaded a cookbook that failed to upload
[2014-07-01 09:38:30 -0400] chefgirl: as there were some dependencies
[2014-07-01 09:38:38 -0400] cheeseplus: ok
[2014-07-01 09:38:50 -0400] chefgirl: then there was further dependencies
[2014-07-01 09:39:18 -0400] cheeseplus: have you read the berkshelf documentation?
[2014-07-01 09:39:48 -0400] cheeseplus: it has examples of how you specify dependencies in a Berksfile
[2014-07-01 09:40:24 -0400] cheeseplus: it also has instructions for if you are adding it to a new cookbook or an existing one
[2014-07-01 09:42:20 -0400] chefgirl: where it is installed its showing me the version
[2014-07-01 09:45:20 -0400] cheeseplus: ALVAN: I don't know the reason, it could be a bug in the code but I don't have time to dig into it at the moment https://github.com/opscode/chef/blob/e5cbd0d532a393b10f073bccd1b5045b9082b9ab/lib/chef/provider/package/yum.rb#L1138
[2014-07-01 09:51:51 -0400] whiteadam: I woke up with thoughts of Chef running through my head. Is that bad?
[2014-07-01 09:52:13 -0400] Cope__: whiteadam: enitrely commonbn
[2014-07-01 09:52:22 -0400] Cope__: irc... how does it work.. :$
[2014-07-01 09:52:35 -0400] whiteadam: just a series of tubes
[2014-07-01 09:52:44 -0400] Cope: aha \o/
[2014-07-01 09:54:07 -0400] whiteadam: hmm, rsync -z... worth it on a LAN?
[2014-07-01 09:54:21 -0400] cheeseplus: whiteadam: not really
[2014-07-01 09:54:44 -0400] whiteadam: cheeseplus: yeah, that's what I thought.
[2014-07-01 09:55:17 -0400] whiteadam: I got an old server a few days ago with 8 SATA slots... someone send me 8 2TB drives so I can download the internet.
[2014-07-01 09:57:21 -0400] jonlives: i woke up today with thoughts of coffee. took quite a while before anything else entered my head :p
[2014-07-01 09:57:42 -0400] whiteadam: jonlives: amen dude. I'm on cup number 3 and still nothing
[2014-07-01 09:59:38 -0400] whiteadam: jonlives: So where do I complain about errors when I start reading your book? :)
[2014-07-01 10:00:24 -0400] whiteadam: Any what are people using for general server benchmarks these days?
[2014-07-01 10:00:53 -0400] jonlives: whiteadam: o'reilly have an erratta page - if you've found 'em already you can tell me directly tho since it's not out yet :p
[2014-07-01 10:02:29 -0400] whiteadam: jonlives: hah, still running through Vargo's right now. I'll drop you a line if I find anything in yours. I'm sure something will piss me off... curse of an English degree.
[2014-07-01 10:02:40 -0400] jonlives: heh
[2014-07-01 10:05:24 -0400] whiteadam: ooh, new EC2 instance class...
[2014-07-01 10:10:10 -0400] memelet: Anybody have a good strategy for cleaning up the chef cache files -- its eventually filling the disk ??
[2014-07-01 10:14:21 -0400] jonlives: memelet: find /var/chef/cache -type f -mtime +7 -exec rm -rf {} \; :p
[2014-07-01 10:17:44 -0400] memelet: jonlives: Thanks. I have been doing it manually. I was hoping for cookbook or some such that configures cron. Guess I will just create one.
[2014-07-01 10:18:11 -0400] jonlives: memelet: how big is your cache out of interest?
[2014-07-01 10:18:19 -0400] jonlives: i've never seen one get *that* big
[2014-07-01 10:18:48 -0400] memelet: yes, only one certain servers its from large ark downloads
[2014-07-01 10:19:11 -0400] memelet: its really just those that need to be purged
[2014-07-01 10:19:24 -0400] memelet: (those ark *.tar files that is)
[2014-07-01 10:20:11 -0400] jonlives: aaah
[2014-07-01 10:24:26 -0400] whiteadam: These new EC2 instances use some interesting math: https://aws.amazon.com/blogs/aws/low-cost-burstable-ec2-instances/
[2014-07-01 10:43:52 -0400] chefgirl: a cookbook should be created using knife or berkshelf
[2014-07-01 10:43:56 -0400] chefgirl: ?
[2014-07-01 10:44:30 -0400] whiteadam: berkshelf imo
[2014-07-01 10:44:47 -0400] whiteadam: chefgirl: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-07-01 10:47:11 -0400] chefgirl: how to use it with existing cookbook that are created already '
[2014-07-01 10:47:20 -0400] chefgirl: but just needs to be uploaded
[2014-07-01 10:47:21 -0400] whiteadam: do not
[2014-07-01 10:47:27 -0400] whiteadam: berks upload?
[2014-07-01 10:47:44 -0400] chefgirl: i just donloaded mysql cookbook that has depency on other cookbook
[2014-07-01 10:47:53 -0400] chefgirl: so i needed berkshelf
[2014-07-01 10:48:06 -0400] chefgirl: my cookbook are in chef repo
[2014-07-01 10:49:31 -0400] whiteadam: chefgirl: I think you need to study a little more. I recommend creating a wrapper cookbook: getchef.com/blog/2013/12/03/doing-wrapper-cookbooks-right/
[2014-07-01 10:51:38 -0400] chefgirl: whiteadam : i just want to execute the things
[2014-07-01 10:51:52 -0400] chefgirl: i dont get so much by reading doc
[2014-07-01 10:52:21 -0400] whiteadam: Try to follow the tutorials. These are the docs I used to learn.
[2014-07-01 11:04:13 -0400] chefgirl: Uploading mysql-master   [5.3.6] ERROR: Cookbook mysql-master depends on cookbooks which are not currently ERROR: being uploaded and cannot be found on the server. ERROR: The missing cookbook(s) are: 'yum-mysql-community' version '>= 0.0.0'
[2014-07-01 11:04:23 -0400] chefgirl: how to resolve this with berkshelf
[2014-07-01 11:04:27 -0400] chefgirl: !!!!!!!!!!!!!!
[2014-07-01 11:04:43 -0400] n1ko: umm... making berksfile and using it?
[2014-07-01 11:04:44 -0400] whiteadam: berks install
[2014-07-01 11:05:00 -0400] chefgirl: inside the cookbook  in chef repo
[2014-07-01 11:05:01 -0400] chefgirl: ?
[2014-07-01 11:05:07 -0400] n1ko: its not about "resolving it" but about learning how to use it
[2014-07-01 11:05:18 -0400] whiteadam: ^
[2014-07-01 11:05:38 -0400] whiteadam: You need to read the docs in order to know how to use all of these tools together: http://berkshelf.com/
[2014-07-01 11:05:39 -0400] chefgirl: the cook book has been downloaded using https://github.com/someara/mysql
[2014-07-01 11:05:49 -0400] chefgirl: so many pointers
[2014-07-01 11:06:17 -0400] whiteadam: chefgirl: It's not so simple.
[2014-07-01 11:06:33 -0400] chefgirl:              that is why I am here
[2014-07-01 11:07:38 -0400] whiteadam: We cannot walk you through it step by step. You will need to do a heavy amount of research first. I recommend http://shop.oreilly.com/product/0636920032397.do
[2014-07-01 11:07:45 -0400] whiteadam: It isn't finished yet, but it's very good so far.
[2014-07-01 11:08:58 -0400] nkts: srsly, Ohai can't detect if it's running on AWS VPC ?
[2014-07-01 11:09:11 -0400] nkts: I had this problem with Puppet year ago
[2014-07-01 11:09:15 -0400] nkts: now with chef
[2014-07-01 11:09:33 -0400] whiteadam: nkts: Did you create the VM with knife?
[2014-07-01 11:10:09 -0400] nkts: whiteadam: no
[2014-07-01 11:10:14 -0400] whiteadam: nkts: I think I know what it might be, because I had the same issue
[2014-07-01 11:10:15 -0400] whiteadam: Try this
[2014-07-01 11:10:16 -0400] whiteadam: sudo mkdir -p /etc/chef/ohai/hints/
[2014-07-01 11:10:16 -0400] whiteadam: sudo touch /etc/chef/ohai/hints/ec2.json
[2014-07-01 11:10:17 -0400] whiteadam: sudo chef-client
[2014-07-01 11:10:27 -0400] whiteadam: then see if it detects it
[2014-07-01 11:11:20 -0400] nkts: k, I got metadata now
[2014-07-01 11:11:29 -0400] nkts: why it's not "on" by default?
[2014-07-01 11:12:46 -0400] whiteadam: I think since Chef didn't create the instance, Chef doesn't know that it needs to know.
[2014-07-01 11:13:05 -0400] whiteadam: There is some technical answer to why, something to do with AWS, but I can't remember what it was.
[2014-07-01 11:13:06 -0400] nkts: what's the purpose of the Ohai plugins then
[2014-07-01 11:13:24 -0400] nkts: why Ohai is checking for n+m things, but not if it's in VPC?
[2014-07-01 11:13:34 -0400] whiteadam: I think AWS doesn't support the function, so you have to do it manually.
[2014-07-01 11:16:35 -0400] whiteadam: nkts: My ohai data shows VPC info
[2014-07-01 11:17:09 -0400] nkts: I hate software
[2014-07-01 11:17:21 -0400] whiteadam: me too
[2014-07-01 11:22:39 -0400] whiteadam: nkts: ohai ec2|grep vpc    does yours have info?
[2014-07-01 11:25:35 -0400] nkts: whiteadam: yes, but with ec2.json file
[2014-07-01 11:25:49 -0400] chefgirl: i have installed the dependent cookbook using berk install command but the cookbooks are stored in berkshelf cookbook
[2014-07-01 11:26:02 -0400] chefgirl: how to manage both the cookbooks
[2014-07-01 11:26:13 -0400] whiteadam: nkts: the ec2.json info comes from AWS
[2014-07-01 11:30:47 -0400] nkts: whiteadam: not, it comes with "touch /etc/chef/ohai/hints/ec2.json"
[2014-07-01 11:31:07 -0400] nkts: anyway that sucks
[2014-07-01 11:32:08 -0400] whiteadam: nkts: touch doesn't put info into the file, it creates and empty file to let Chef know you're running on EC2. Ohai puts the data in the file, which it reads from the EC2 API.
[2014-07-01 11:32:49 -0400] nkts: I'm talking about Ohai
[2014-07-01 11:32:52 -0400] nkts: not chef
[2014-07-01 11:33:06 -0400] whiteadam: So am I.
[2014-07-01 11:34:49 -0400] nkts: whiteadam: http://p.nkts.lt/66311da4-9b6c-40dd-a85d-29e4c525d90a.txt
[2014-07-01 11:35:22 -0400] whiteadam: nkts: yes, your VPC is vpc-110aaa
[2014-07-01 11:36:04 -0400] nkts: but the file is empty, Ohai didn't change it
[2014-07-01 11:36:09 -0400] whiteadam: nkts: When I run it on a test server, I get vpc-d63afeb3
[2014-07-01 11:36:22 -0400] nkts: whiteadam: which distro?
[2014-07-01 11:36:42 -0400] chefgirl: how to manage the dependencies in berks file
[2014-07-01 11:36:45 -0400] whiteadam: The file is only there to let Ohai know that the EC2 Plugin needs to be loaded and data requested from the EC2 API
[2014-07-01 11:37:03 -0400] whiteadam: nkts: RHEL 6.5
[2014-07-01 11:37:39 -0400] whiteadam: chefgirl: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-07-01 11:39:15 -0400] nkts: whiteadam: k, that solves my problem, with add it next to other workarounds
[2014-07-01 11:39:39 -0400] chefgirl: what is this  vagrant-berkshelf Plugin vagrant-omnibus
[2014-07-01 11:39:50 -0400] whiteadam: chefgirl: Are you using Vagrant?
[2014-07-01 11:40:01 -0400] chefgirl: nope
[2014-07-01 11:40:10 -0400] whiteadam: Then you do not need it.
[2014-07-01 11:41:41 -0400] whiteadam: nkts: I can't find the article, but basically there is no way for Ohai to reliably know what "cloud" you're running the instance on, so, unless you create the ec2.json (or other) it won't know where you are. If you create an instance with "knife ec2
[2014-07-01 11:41:49 -0400] whiteadam: " it will automatically create the json
[2014-07-01 11:42:20 -0400] nkts: whiteadam: http://p.nkts.lt/96639ec5-e93e-44c9-858c-a03056de870f.txt why then other plygins are trying to discover where they are without any hint file ?
[2014-07-01 11:42:29 -0400] nkts: s/plygins/plugins/
[2014-07-01 11:43:04 -0400] whiteadam: Because they know what to look for on the OS to identify whether they be loaded or not.
[2014-07-01 11:43:51 -0400] whiteadam: Rackspace are the only ones who put "provider_data" on the OS, so Ohai knows if that data is there, then it needs to load the Rackspace plugin
[2014-07-01 11:44:11 -0400] whiteadam: Make sense?
[2014-07-01 11:46:30 -0400] chefgirl: do i need to set environment variable  berkshelf ?
[2014-07-01 11:46:33 -0400] nkts: whiteadam: yes, but in my case, instance is not on Rackspace and no provider_data is provided
[2014-07-01 11:46:47 -0400] whiteadam: yes, exactly
[2014-07-01 11:47:10 -0400] whiteadam: AWS does NOT put anything on the OS that identifies the instance as existing on AWS
[2014-07-01 11:47:34 -0400] whiteadam: Therefore, Ohai cannot reliably identify whether it is on AWS or not.
[2014-07-01 11:47:38 -0400] chefgirl: do i need to set environment variable  berkshelf ?
[2014-07-01 11:47:51 -0400] whiteadam: chefgirl: What environment variable?>
[2014-07-01 11:48:09 -0400] chefgirl: berkshelf ??
[2014-07-01 11:48:26 -0400] nkts: whiteadam: how about GCE plugin?
[2014-07-01 11:48:30 -0400] chefgirl: now i have two cookbooks how to manage both
[2014-07-01 11:48:41 -0400] nkts: it's making connection to http metadata endpoints
[2014-07-01 11:48:50 -0400] nkts: the same thing like for VPC
[2014-07-01 11:49:37 -0400] phutchins: Anyone have a use for a Gem that works kinda like berkshelf but pulls cookbooks listed in a config file and keeps them in a single directory without the .git dir for use with Opsworks or other similar providers?
[2014-07-01 11:49:41 -0400] chefgirl: i need to give path to some file so that the cookbook in chef repo resolves depency using berkshelf 's cookbook
[2014-07-01 11:49:45 -0400] whiteadam: chefgirl: http://berkshelf.com/#the_berkshelf
[2014-07-01 11:50:07 -0400] phutchins: I found that I couldnt' get berkshelf to manage cookbooks the way that you need to keep them for Opsworks so I wrote a little tool to manage it...
[2014-07-01 11:50:11 -0400] whiteadam: chefgirl: You're going about this all wrong and doing it the hard way. Please read: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-07-01 11:50:34 -0400] chefgirl: read it a no of times
[2014-07-01 11:50:43 -0400] whiteadam: phutchins: You coulde use knife-solve to see which dependencies you needed to download manually
[2014-07-01 11:50:45 -0400] chefgirl: not getting anything from the doc
[2014-07-01 11:51:02 -0400] phutchins: whiteadam: well opsworks supports berkshelf so that wasn't the problem.
[2014-07-01 11:51:03 -0400] whiteadam: chefgirl: Then we're not going to be able to help you. Sorry.
[2014-07-01 11:51:35 -0400] chefgirl: phutchins : i have instaled berkshelf
[2014-07-01 11:51:40 -0400] phutchins: I do also use berkshelf to download the dependencies. The problem was that Opsworks or like services expect a repo that contains cookbooks. Berkshelf can't maintain this.
[2014-07-01 11:51:59 -0400] whiteadam: phutchins: ohhh, I see what you mean
[2014-07-01 11:52:00 -0400] chefgirl: then what is the better option
[2014-07-01 11:52:01 -0400] phutchins: whiteadam: you follow?
[2014-07-01 11:52:40 -0400] phutchins: cool. so, my gem, socore, uses a config file in the root of your repo and if you type socore in that dir, it goes out and gets all of the cookbooks in your config, saves them to that root dir, and removes the .git dir in each of them.
[2014-07-01 11:52:45 -0400] whiteadam: nkts: I'm not sure what the difference is. Maybe someone just hasn't written one for AWS?
[2014-07-01 11:52:56 -0400] whiteadam: nkts: I'm not seeing, in the code, how it identifies that it is on GCE though.
[2014-07-01 11:53:06 -0400] phutchins: it also keeps track of which ones have changed and need updates and saves a lock file... I find it very useful and would love to share it with anyone that also might find it useful.
[2014-07-01 11:53:28 -0400] chefgirl: phutchins : can we chat privately
[2014-07-01 11:53:44 -0400] phutchins: whiteadam: https://github.com/phutchins/socore <- source if you are interested in taking a peek
[2014-07-01 11:53:58 -0400] phutchins: chefgirl: sure, are you working on a similar problem?
[2014-07-01 11:54:08 -0400] phutchins: chefgirl: I haven't been following your thread...
[2014-07-01 11:54:24 -0400] chefgirl: i pinged u
[2014-07-01 11:54:31 -0400] phutchins: got it
[2014-07-01 11:54:35 -0400] whiteadam: chefgirl: Do you use OpsWorks?
[2014-07-01 11:55:02 -0400] phutchins: Yeah i'm not sure if what I've mentioned is related to what you're talking about
[2014-07-01 11:56:50 -0400] whiteadam: nkts: It appears that the GCE plugin only loads if your instance has a GCE internal hostname. So that must be how Ohai can tell whether it's running on GCE or not.
[2014-07-01 12:10:43 -0400] chefgirl: do anyone has an idea about berkshelf ?
[2014-07-01 12:11:52 -0400] phutchins: chefgirl: ok so start back where we left off in our PM... You can't ask such a vague question and expect to get a hepful answer...
[2014-07-01 12:12:29 -0400] phutchins: So you're trying to upload the mysql cookbook to your chef server. You had a dependency problem and someone suggested to use Berkshelf to do the uploading. Correct?
[2014-07-01 12:12:46 -0400] chefgirl: yup is it the only way ?
[2014-07-01 12:13:03 -0400] phutchins: chefgirl: no, not the only way. YOu could do it one cookbook at a time manually.
[2014-07-01 12:13:27 -0400] chefgirl: but manullay is very diificult
[2014-07-01 12:13:34 -0400] phutchins: very easy. but very time consuming
[2014-07-01 12:13:38 -0400] whiteadam: I would recommend creating a wrapper cookbook with berkshelf, but chefgirl claims she has read the article and it didn't help. If that article didn't explain how, there's no way we will be able to.
[2014-07-01 12:13:39 -0400] chefgirl: lot of dependencies are there
[2014-07-01 12:13:54 -0400] phutchins: it tells you exactly what to do for each error
[2014-07-01 12:14:04 -0400] phutchins: whiteadam: yes i would agree...
[2014-07-01 12:14:18 -0400] phutchins: chefgirl: what exact cookbook are you trying to upload? Can you link to the source of the cookbook?
[2014-07-01 12:14:32 -0400] chefgirl: https://github.com/someara/mysql
[2014-07-01 12:14:57 -0400] whiteadam: chefgirl: Have you created a wrapper cookbook or are you trying to use this cookbook directly?
[2014-07-01 12:15:23 -0400] chefgirl: im trying to use the cookbook directly
[2014-07-01 12:15:30 -0400] phutchins: chefgirl: ok, this cookbook already has a Berksfile
[2014-07-01 12:15:37 -0400] chefgirl: yup
[2014-07-01 12:16:13 -0400] phutchins: chefgirl: so then you should be able to do a berks install
[2014-07-01 12:16:17 -0400] phutchins: then a berks upload
[2014-07-01 12:16:22 -0400] chefgirl: i have already done that
[2014-07-01 12:16:28 -0400] whiteadam: chefgirl: Have you typed berks install like i asked you to earlier?
[2014-07-01 12:16:30 -0400] phutchins: in that order?
[2014-07-01 12:16:34 -0400] chefgirl: berks upload should be executed from where ?
[2014-07-01 12:16:40 -0400] whiteadam: the cookbook
[2014-07-01 12:16:51 -0400] chefgirl: i went to the mysql cookbook i did berks install
[2014-07-01 12:17:07 -0400] chefgirl: berksfile cookbook or chef repo ???
[2014-07-01 12:17:21 -0400] chefgirl: should i execute berks upload ?
[2014-07-01 12:17:24 -0400] whiteadam: which one of those has cookbook in the name?
[2014-07-01 12:17:24 -0400] phutchins: the cookbook that you are trying to upload. i.e. mysql
[2014-07-01 12:17:33 -0400] chefgirl: yeah
[2014-07-01 12:17:44 -0400] chefgirl: chef repo
[2014-07-01 12:18:00 -0400] whiteadam: nope, chef repo does not have cookbook in the name
[2014-07-01 12:18:03 -0400] chefgirl:  this is /root/chef-repo/cookbooks/mysql-master
[2014-07-01 12:18:04 -0400] phutchins: you should execute both of the berkshelf commands from the mysql cookbook repo that we've been discussing
[2014-07-01 12:18:19 -0400] joshua__: Anybody still having issues with COOK-3482? We are using the latest version of the Git cookbook and on the first chef run, Git is still not getting added to the PATH and hence the chef run _always_ fails..?
[2014-07-01 12:18:34 -0400] phutchins: chefgirl: why did you change the name of the cookbook? it is clearly named mysql in the metadata
[2014-07-01 12:19:04 -0400] whiteadam: chefgirl: This is why you should make a wrapper, so that you do not change files in the original: http://www.getchef.com/blog/2013/12/03/doing-wrapper-cookbooks-right/
[2014-07-01 12:19:15 -0400] chefgirl: but when i extracted it gave me this
[2014-07-01 12:19:31 -0400] whiteadam: extracted what?
[2014-07-01 12:19:52 -0400] chefgirl: wait
[2014-07-01 12:19:55 -0400] phutchins: whiteadam: she probably downloaded the cookbook as a zip
[2014-07-01 12:20:00 -0400] whiteadam: chefgirl: At this point, I think it would be most helpful for you to research this: http://www.getchef.com/training/
[2014-07-01 12:20:01 -0400] chefgirl: yeah
[2014-07-01 12:20:16 -0400] chefgirl: i dwonlodede as zip
[2014-07-01 12:20:18 -0400] phutchins: chefgirl: why don't you try git clone on the cookbook git@github.com:someara/mysql.git
[2014-07-01 12:20:40 -0400] chefgirl: i think i should delete that cookbook and should install i new one
[2014-07-01 12:20:43 -0400] phutchins: chefgirl: or just rename the cookbook directory to match the name of the cookbook in metadata.rb
[2014-07-01 12:20:50 -0400] phutchins: chefgirl: are you familiar with git?
[2014-07-01 12:20:58 -0400] chefgirl: not so much
[2014-07-01 12:21:04 -0400] whiteadam: chefgirl: You should delete that cookbook and create a wrapper like we have suggested
[2014-07-01 12:21:37 -0400] chefgirl: can u give me a pointer to a good cookbook to install mysql
[2014-07-01 12:21:38 -0400] phutchins: chefgirl: you should go read about git then. And probably also do as whiteadam suggested. You dont' want to edit the msyql cookbook as it's really an antipatern with chef.
[2014-07-01 12:22:00 -0400] whiteadam: chefgirl: http://www.getchef.com/blog/2013/12/03/doing-wrapper-cookbooks-right/
[2014-07-01 12:22:09 -0400] phutchins: chefgirl: that cookbook shoudl work fine. You simply need to create a wrapper cookbook to configure it and choose what you want to install out of the msyql cookbook. You're getting a bit ahead of yourself...
[2014-07-01 12:22:34 -0400] phutchins: chefgirl: why don't you read the blog post that whiteadm linked and then ask specific questions regarding that post if you are confused.
[2014-07-01 12:22:58 -0400] chefgirl: basically i have just setup a chef server, a workstation, knife, knife ec2
[2014-07-01 12:23:09 -0400] chefgirl: i created one cookbook to install apache
[2014-07-01 12:23:25 -0400] chefgirl: and i learned how to bootstrap the ec2 node
[2014-07-01 12:23:27 -0400] chefgirl: thats it
[2014-07-01 12:23:38 -0400] chefgirl: now how should i proceed further
[2014-07-01 12:23:44 -0400] chefgirl: i just have started chef
[2014-07-01 12:23:49 -0400] phutchins: thats a good start. next is learning git and writing a wrapper cookbook
[2014-07-01 12:23:59 -0400] whiteadam: brb, blood pressure
[2014-07-01 12:24:00 -0400] phutchins: you should do exactly as whiteadam suggested :)
[2014-07-01 12:24:06 -0400] phutchins: whiteadam: :)
[2014-07-01 12:24:29 -0400] chefgirl: okay i am leaving berksfile
[2014-07-01 12:24:32 -0400] chefgirl: for now
[2014-07-01 12:24:45 -0400] phutchins: yes, come back to that after your read :)
[2014-07-01 12:25:35 -0400] chefgirl: git and wrapper cookbook
[2014-07-01 12:25:37 -0400] chefgirl: okay cool
[2014-07-01 12:25:51 -0400] phutchins: yep!
[2014-07-01 12:26:01 -0400] chefgirl: thanks guys :) and sorry for eating ur brains
[2014-07-01 12:26:02 -0400] chefgirl: :P
[2014-07-01 12:26:06 -0400] chefgirl: :)
[2014-07-01 12:26:13 -0400] phutchins: chefgirl: np.
[2014-07-01 12:26:55 -0400] chefgirl: can u give me link of nice tutorials of both the topics
[2014-07-01 12:27:07 -0400] whiteadam: http://www.getchef.com/blog/2013/12/03/doing-wrapper-cookbooks-right/
[2014-07-01 12:27:34 -0400] chefgirl: and about git ??
[2014-07-01 12:27:37 -0400] whiteadam: https://try.github.io
[2014-07-01 12:27:47 -0400] chefgirl: okay thanks
[2014-07-01 13:21:34 -0400] bmurt: hey guys, trying to auth to a vagrant provisioned chef server & a secondary box but running into a 401 unauth'd error due to validation.pem: https://gist.github.com/bmurtagh/fa5d8317efb4bd7e5a91
[2014-07-01 13:22:01 -0400] bmurt: i can see the request hitting the chef server in /var/log/chef/server.log and returning the 401, but how can i find out or re-generate the validation.pem
[2014-07-01 13:22:14 -0400] bmurt: i tried to use openssl to view details about the pem unsuccessfully
[2014-07-01 13:25:50 -0400] stormerider: question, how can i kick off a chef-client run on a windows box using winrm?
[2014-07-01 13:38:53 -0400] jhsubscribe: stormerider: various options.. 1) I use the "knife winrm" command from my jenkins jobs  2) you could use a native winrm command e.g from powershell script 3) vagrant-windows will obviously call this on guests  4) one day test-kitchen will support it.
[2014-07-01 14:11:30 -0400] jeffcara: Anybody tried installing the ChefDK as a cookbook yet? Was thinking of trying to set up my Jenkins test server that way, but wanted to make sure there wasn't a cookbook I could steal for that first
[2014-07-01 14:30:37 -0400] khazhyk_: so does remote_file have issues with proxy settings? I'm having an issue where remote_file times out because it seems like it's not using hte proxy, but other providers like chef_gem pull from the internet correctly. The proxy is set in ENV, in the client.rb, and everything, but remote_file seems to refuse to work
[2014-07-01 14:33:41 -0400] agram: Hello, knife node edit has option --disable-editing, and also --environment . Can you give me please an example how this could be used?
[2014-07-01 14:39:09 -0400] bmurt: coderanger: i was able to address the 401 unauthorized error from yesterday by pulling down the validation.pem from the newly spun up chef server in vagrant
[2014-07-01 14:39:38 -0400] teshian: I have a set of machine in a test enviroment, while I am developing new recipes i do a knife cookbook upload -a -E test
[2014-07-01 14:40:17 -0400] teshian: Not sure what the environment woudl be under node edit
[2014-07-01 14:40:53 -0400] agram: teshian: yes, me neither, that's why I asked :-), thanks
[2014-07-01 15:18:01 -0400] quantumfoam: I know this probably isn't a big deal to most, but it's a big deal for me...I just bootstrapped my first machine
[2014-07-01 15:18:13 -0400] quantumfoam: kierrr: ping
[2014-07-01 15:19:15 -0400] paulmc: i'm creating an lwrp and in the provider i'm creating a template.  inside the template block @new_resource returns nil but new_resource gets a ref.  outside the block either works.  why?
[2014-07-01 15:19:27 -0400] binamov: quantumfoam congrats!
[2014-07-01 15:27:30 -0400] quantumfoam: next up: creating a recipe I can use for post-deployment workflow on virtual machines
[2014-07-01 15:36:54 -0400] rbowlby: Hi all, what's the naming convention for wrapper cookbooks?
[2014-07-01 15:37:21 -0400] AskSteve: there really isn't one but I try to name it <cookbook>-purpose so I know what cookbook it is wrapping
[2014-07-01 15:37:56 -0400] rbowlby: putting together a wrapper for the users community cookbook. so would companyname-users be appropriate?
[2014-07-01 15:38:20 -0400] AskSteve: Yes, if you don't forsee a need to wrap it again in the future for a different node
[2014-07-01 15:38:57 -0400] gyoza: i hate hardware
[2014-07-01 15:39:00 -0400] gyoza: so tired
[2014-07-01 15:39:02 -0400] gyoza: lol
[2014-07-01 15:39:09 -0400] rbowlby: asksteve, what do you mean a diff node?
[2014-07-01 15:39:46 -0400] AskSteve: if you'll need to re-wrap the cookbook for a different system in future
[2014-07-01 15:40:27 -0400] rbowlby: wouldn't one wrapped cookbook suffice for all nodes?
[2014-07-01 15:40:33 -0400] squaresurf: AskSteve: if it is already a wrapper, why wouldn't you just create another recipe within the wrapper cookbook?
[2014-07-01 15:40:47 -0400] squaresurf: rbowlby: thats what I do
[2014-07-01 15:41:00 -0400] squaresurf: rbowlby: company_<cookbook>
[2014-07-01 15:41:12 -0400] rbowlby: any advantage to underscore?
[2014-07-01 15:41:16 -0400] squaresurf: nope
[2014-07-01 15:41:18 -0400] AskSteve: personal preference
[2014-07-01 15:41:38 -0400] rbowlby: also, I'm worried about chef repos polluting the repo list..does anyone prepend chef too repo names?
[2014-07-01 15:42:05 -0400] squaresurf: What are you using for your repos?
[2014-07-01 15:42:06 -0400] rbowlby: e.g. companyname-chef-users
[2014-07-01 15:42:09 -0400] rbowlby: bitbucket
[2014-07-01 15:42:23 -0400] squaresurf: You could do that.
[2014-07-01 15:42:40 -0400] squaresurf: You could also name the repo something different than what is in the metadata.
[2014-07-01 15:43:09 -0400] rbowlby: ahh, any issues doing a diff name than what's in the metadata with something like bershelf?
[2014-07-01 15:43:23 -0400] rbowlby: berkshelf*
[2014-07-01 15:46:27 -0400] squaresurf: I don't see why, probably not the friendliest for finding the repo for the cookbook on the server.
[2014-07-01 15:46:43 -0400] squaresurf: *I don't see why not
[2014-07-01 15:47:18 -0400] squaresurf: I would only prepend chef- to the repo name on your repo server.
[2014-07-01 15:47:32 -0400] squaresurf: More of a diff than that could get confusing down the road.
[2014-07-01 15:47:52 -0400] squaresurf: chef-company-cookbook would be a bit redundant on the chef server, but not the end of the world.
[2014-07-01 15:48:05 -0400] squaresurf: In the end it is really up to your preference.
[2014-07-01 15:53:21 -0400] rbowlby: thanks squaresurf
[2014-07-01 15:53:36 -0400] squaresurf: rbowlby: sure thing :)
[2014-07-01 15:53:53 -0400] JoshZ_: is anyone using the fog OpenStack Driver to set network settings on a machine?
[2014-07-01 15:56:05 -0400] korishev: Has anybody seen a problem with bad decrypt on chef 11.12.8?
[2014-07-01 15:59:48 -0400] korishev: as a test, I loaded a new key into irb, and can create the encrypted text, but when I try to decrypt it using the same key, I get an error about bad decrypt and that the provided key is most likely incorrect.
[2014-07-01 16:00:13 -0400] quantumfoam: so is it automatic that a recipe applied to a linux node executes commands under sudo or with root privileges?
[2014-07-01 16:01:26 -0400] cheeseplus: quantumfoam: root privs since you need those for installing packages and the like
[2014-07-01 16:02:07 -0400] quantumfoam: so I won't have to do anything additional to make that happen?
[2014-07-01 16:03:30 -0400] squaresurf: korishev: can you pastebin the example you're trying?
[2014-07-01 16:03:50 -0400] freerobby: I have a question about using the berks method. If we have an attribute that we want set on every node in our cluster, what is the best way to do that? (e.g. "RACK_ENV": "production"). environment attribute?
[2014-07-01 16:06:07 -0400] mjuszcza1: coderanger: I would also be curious to know your thoughts on freerobby's question if you don't mind! ^^
[2014-07-01 16:13:51 -0400] cheeseplus: quantumfoam: not in the standard case
[2014-07-01 16:14:32 -0400] cheeseplus: quantumfoam: you can have chef run as different users but that is not the norm
[2014-07-01 16:28:05 -0400] vegardx: So, if knife client list and knife search client '*:*' shows differnet result, where do I start digging?
[2014-07-01 16:28:12 -0400] vegardx: I'm guessing this is solr-related?
[2014-07-01 16:37:10 -0400] j^2: vegardx: that's interesting
[2014-07-01 16:37:26 -0400] j^2: i thought they looked at the "same" thing
[2014-07-01 16:37:36 -0400] j^2: what about knife status?
[2014-07-01 16:37:54 -0400] vegardx: status shows them all, but like knife client list, it doens't search for it.
[2014-07-01 16:38:16 -0400] j^2: so status and client list are the same, but not knife search?
[2014-07-01 16:38:22 -0400] vegardx: But something is borked big time, chef-server, solr and expander won't start up properly.
[2014-07-01 16:38:31 -0400] vegardx: Pretty much, yes.
[2014-07-01 16:38:33 -0400] j^2: ah
[2014-07-01 16:38:45 -0400] j^2: do the reconfigure again?
[2014-07-01 16:38:49 -0400] j^2: then the test?
[2014-07-01 16:38:53 -0400] vegardx: reconfigure?
[2014-07-01 16:38:56 -0400] j^2: make sure everything comes up how you expect?
[2014-07-01 16:39:10 -0400] vegardx: I think the issue is with permission to /var/run actually.
[2014-07-01 16:39:17 -0400] j^2: $ sudo chef-server-ctl reconfigure
[2014-07-01 16:39:24 -0400] j^2: $ sudo chef-server-ctl test
[2014-07-01 16:39:36 -0400] j^2: that could probably do it too ;)
[2014-07-01 16:39:49 -0400] korishev: squaresurf: sorry, got called into meeting. working on pastebin
[2014-07-01 16:42:12 -0400] mconigliaro: anyone know if there's a way to increase the gecode resolver timeout on the chef server?
[2014-07-01 16:42:37 -0400] vegardx: j^2: hm, that didn't fix the problem. I get things up and running, but seems like solr is not updated with the new data.
[2014-07-01 16:42:41 -0400] mconigliaro: it seems to be timing out after only a few seconds
[2014-07-01 16:42:51 -0400] vegardx: knife client list and knife search client '*:*' still vary by one result.
[2014-07-01 16:43:25 -0400] vegardx: knife status shows them all, and even knife search node.
[2014-07-01 16:48:22 -0400] vegardx: j^2: https://gist.github.com/vegardx/059e11b1db2bbab0da46
[2014-07-01 16:48:29 -0400] j^2: looking
[2014-07-01 16:48:45 -0400] j^2: wow that's crazy
[2014-07-01 16:49:06 -0400] j^2: the node worked though
[2014-07-01 16:49:11 -0400] j^2: search node
[2014-07-01 16:49:13 -0400] j^2: hmm
[2014-07-01 16:49:16 -0400] vegardx: Yep, so something is in solr, but not everything.
[2014-07-01 16:49:27 -0400] j^2: coderanger: ping you'd probably know this answer ;)
[2014-07-01 16:50:57 -0400] rsavage_: Can somebody remind me as to how the Chef attribute precedence goes?  Ie.  Enviornment, then Role, then Host, then Recipe.... ?
[2014-07-01 16:51:11 -0400] rsavage_: what goes first to last, etc...
[2014-07-01 16:52:07 -0400] j^2: rsavage_: one sec
[2014-07-01 16:52:12 -0400] jonlives: rsavage_: http://docs.opscode.com/chef_overview_attributes.html#attribute-precedence
[2014-07-01 16:52:18 -0400] j^2: jonlives: beat me to it
[2014-07-01 16:52:19 -0400] jonlives: top to bottom == lowest to highest
[2014-07-01 16:52:27 -0400] jonlives: i have that bookmarked :p
[2014-07-01 16:52:33 -0400] j^2: rsavage_: it makes anyone cry :P
[2014-07-01 16:52:53 -0400] j^2: force_override ftw
[2014-07-01 16:53:11 -0400] rsavage_: Thanks jonlives
[2014-07-01 16:55:10 -0400] rsavage_: jonlives: so reading the list, if I define an attribute in a cookbook's attribute file, it will be set before a recipe runs, correct?
[2014-07-01 16:56:15 -0400] jonlives: rsavage_: it's not to do with the timing, but rather the location.
[2014-07-01 16:56:33 -0400] jonlives: if you have an attribute in the attributes file, it will be overwritten by an attribute of the same level set in the recipe
[2014-07-01 16:57:09 -0400] jonlives: at run time, the entire attribute collection is deep-merged together so that when the recipes run you basically have one attribute collection.
[2014-07-01 16:57:10 -0400] rsavage_: jonlives: I won't have another attribute in preceeding recipes, I just need a particular attribute which will never change to exist before a recipe runs...
[2014-07-01 16:57:21 -0400] mconigliaro: anyone know if there's a way to increase the gecode resolver timeout on the chef server?
[2014-07-01 16:57:28 -0400] jonlives: rsavage_: see above - attributes set *anywhere* will be available to a recipe.
[2014-07-01 16:57:38 -0400] rsavage_: ah.. ok thanks jonlives
[2014-07-01 16:57:47 -0400] rsavage_: hey jonlives, what's that link to that new chef book?
[2014-07-01 16:57:48 -0400] jonlives: the precedence stuff is to do with which will win if you have the same attribute defined in multiple places.
[2014-07-01 16:58:13 -0400] jonlives: rsavage_: http://shop.oreilly.com/product/0636920032984.do is mine, sethvargo and mischa taylor are writing http://shop.oreilly.com/product/0636920032397.do
[2014-07-01 16:58:29 -0400] rsavage_: thanks
[2014-07-01 16:58:51 -0400] jonlives: np!
[2014-07-01 16:58:59 -0400] quantumfoam: so...is there a way for me to pass parameters in to a recipe at runtime? because I kind of need that for what I'm working on, which is changing properties like the hostname of a machine after deployment
[2014-07-01 16:59:25 -0400] jonlives: quantumfoam: you prob wanna check out attributes:  http://docs.opscode.com/chef_overview_attributes.html
[2014-07-01 17:00:15 -0400] quantumfoam: I've been looking at them, but it's my understanding that attributes have to be in a JSON file
[2014-07-01 17:00:58 -0400] jonlives: quantumfoam: attributes can be set in environments, roles, cookbooks etc - you can also pass chef-client custom JSON when you run it
[2014-07-01 17:01:05 -0400] shlant: is there a way to pass a json file to knife-ec2 instead of typing out every attribute using -j?
[2014-07-01 17:01:14 -0400] jonlives: shlant: yep :)
[2014-07-01 17:01:24 -0400] jonlives: you can pass in a filename into -j
[2014-07-01 17:01:35 -0400] shlant: jonlives: oh nice! thnaks
[2014-07-01 17:01:49 -0400] jonlives: np!
[2014-07-01 17:02:01 -0400] quantumfoam: so with the -j option I could just pass in the attributes directly?
[2014-07-01 17:02:15 -0400] jtimberman: coderanger: http://docs.opscode.com/ctl_chef.html#chef-gem :)
[2014-07-01 17:02:17 -0400] jonlives: quantumfoam: yep :)
[2014-07-01 17:03:12 -0400] quantumfoam: hmm well that should work, I have vCommander for self service provisioning of machines and I can have it run a script after deployment
[2014-07-01 17:03:42 -0400] quantumfoam: it collects information during provisioning which can then be used as variables for such a script
[2014-07-01 17:03:54 -0400] jonlives: quantumfoam: we actually use a similar approach when we bootstrap chef - we control the OS install using cobbler, and pass the initial chef-client run a JSON file containing the initial run_list etc
[2014-07-01 17:04:22 -0400] quantumfoam: yeah
[2014-07-01 17:04:50 -0400] quantumfoam: this is basically devops so persistent files wouldn't really be practical since every VM is going to be different and they may not hang around all that long
[2014-07-01 17:09:33 -0400] shlant: jonlives: so can I specify any knife ec2 option in a node.json?
[2014-07-01 17:09:45 -0400] shlant: such as iam profile?
[2014-07-01 17:10:10 -0400] shlant: or is it just for node attributes
[2014-07-01 17:10:27 -0400] quantumfoam: actually, it occurs to me that I could instead kick off a script that takes the input and creates a json file and then kicks off bootstrap after that
[2014-07-01 17:10:56 -0400] MrMonkey: anyone else having issues upgrading to chef-server 11.1.3?  see my (mikek) comment at http://www.getchef.com/blog/2014/06/26/chef-server-11-1-3-security-release/  seems like an obvious bug.  but, i'm a newbie
[2014-07-01 17:17:10 -0400] jonlives: shlant: if said options are a node attribute then yep
[2014-07-01 17:23:45 -0400] shlant: jonlives: so couldn't put ec2 tags in the json?
[2014-07-01 17:24:16 -0400] jonlives: shlant: not an ec2 user so couldn't say for sure
[2014-07-01 17:24:29 -0400] jonlives: if it's not a node attribute then likely not tho.
[2014-07-01 17:25:39 -0400] quantumfoam: yeah, I think that'll work
[2014-07-01 17:25:58 -0400] quantumfoam: vCommander runs on a Windows server which is annoying as hell to me, but I can wrap up the knife command in a powershell script
[2014-07-01 17:26:58 -0400] jonlives: nice
[2014-07-01 17:27:11 -0400] quantumfoam: pass in the variables that way, then create the json on the fly...should work. then depending on the type of server I can add a particular cookbook to the run list
[2014-07-01 17:27:35 -0400] quantumfoam: and have scripts for each type of server, which is again a pain in the ass, but the self service functionality that vCommander supplies is really valuable
[2014-07-01 17:27:58 -0400] quantumfoam: it presents the end users with a management console that talks directly to vmware and ec2 so that they don't need to have access to those consoles
[2014-07-01 17:28:07 -0400] quantumfoam: but they can perform power operations etc
[2014-07-01 17:29:16 -0400] aaronrl: anyone know if there has been any discussion around adding the ability to mark certain recipes of a cookbook as parallelizable to reduce first-run converge times?  like if you have your base cookbook's default.rb include a bunch of recipes that aren't really dependent on one another.
[2014-07-01 17:30:06 -0400] jonlives: aaronrl: i certainly haven't heard if there have been
[2014-07-01 17:30:08 -0400] aaronrl: I'm installing MSMQ and IIS concurrently with DISM on Windows and it's taking quite some time to converge lol
[2014-07-01 17:30:22 -0400] jonlives: that'd be a massive redesign of the way chef works roo
[2014-07-01 17:30:23 -0400] jonlives: *too
[2014-07-01 17:30:51 -0400] someara: its also super tricky because many things on a system have locks
[2014-07-01 17:30:55 -0400] someara: package managers, for example
[2014-07-01 17:30:57 -0400] jonlives: yeah
[2014-07-01 17:30:59 -0400] aaronrl: yeah
[2014-07-01 17:31:12 -0400] jonlives: and who decides that things aren't inter-dependant? chef? the user? what happens when one is wrong :p
[2014-07-01 17:31:18 -0400] aaronrl: it would have to be used with great care, but seems like it might be a nice-to-have
[2014-07-01 17:31:36 -0400] jonlives: you also run into possible race conditions and all the fun that comes with parallelization
[2014-07-01 17:31:37 -0400] aaronrl: in my mind it would be the recipe writer
[2014-07-01 17:32:12 -0400] aaronrl: cool, just wondering if anyone has heard of at least the possibility of it being added
[2014-07-01 17:32:34 -0400] jonlives: someara works at chef so he can say prob more for definite, but i've not heard any talk.
[2014-07-01 17:33:26 -0400] someara: I haven't heard anything either... I know its been discussed before
[2014-07-01 17:34:37 -0400] c_t: aaronrl: one issue with that that leaps to mind immediately is that your various package managers seem to get deeply unhappy if you try to run multiple instances of them simultaneously
[2014-07-01 17:36:58 -0400] heathsnow: kitchenci room isn't very active.  will someone take a look at my test-kitchen tests and offer advice for improvement?  https://gist.github.com/heathsnow/8ac5c8f16cbdf36b8f73
[2014-07-01 17:39:30 -0400] jidar: so in a test cycle, I might bring up a pair of boxes using vagrant, and I don't need to use a DNS server for anything because I'm not really interested in getting other stuff involved, and editing /etc/hosts everytime is a bit tedious, and I also don't know what IP I'll get from DHCP until after the vms are up and running but I want my multibox to use hostnames, anybody solved this problem/
[2014-07-01 17:40:20 -0400] jidar: I suppose static addresses and static host files will work
[2014-07-01 17:42:31 -0400] shlant: jonlives: I am running this command: knife ec2 server create --iam-profile aws-chef-role -N test -T Project=cms, Stages=pre, Roles=web,app,db -j nodes/cms_pre.json
[2014-07-01 17:42:34 -0400] shlant: and getting
[2014-07-01 17:42:34 -0400] shlant: `parse': 757: unexpected token at 'nodes/cms_pre.json' (JSON::ParserError)
[2014-07-01 17:42:43 -0400] shlant: the json is fine in that file
[2014-07-01 17:43:49 -0400] jonlives: shlant: oh! I was talking about passing -j a file when using chef-client
[2014-07-01 17:43:52 -0400] jonlives: apologies.
[2014-07-01 17:44:11 -0400] jonlives: ie chef-client -j /tmp/first-run.json
[2014-07-01 17:44:21 -0400] shlant: jonlives: shoot, so I can't with knife ec2? that would be a PITA
[2014-07-01 17:44:34 -0400] jonlives: i'm not sure there - not used that plugin
[2014-07-01 17:44:39 -0400] shlant: ok thanks
[2014-07-01 17:49:58 -0400] mortuar: Has anyone ever encountered a node environment reverting after a chef-client run?
[2014-07-01 17:50:21 -0400] mortuar: For context, changing a node's environment from dev to staging, then after the next chef-client run, the environment for that node changes right back to dev
[2014-07-01 17:50:55 -0400] bougyman: are you doing a node edit to change the env?
[2014-07-01 17:51:00 -0400] mortuar: bougyman yes
[2014-07-01 17:51:32 -0400] mortuar: knife node edit <node>
[2014-07-01 17:52:15 -0400] bougyman: you have the output of the chef-client run?
[2014-07-01 17:52:23 -0400] bougyman: perhaps something (a role, etc) changed it back?
[2014-07-01 17:52:36 -0400] mortuar: I've checked the role, nothing there that mentions it
[2014-07-01 17:52:42 -0400] mortuar: I'll do a debug level run to see if there is any mention
[2014-07-01 17:58:48 -0400] heathsnow: mortuar: maybe there's an I.P. conflict in your env?
[2014-07-01 17:59:28 -0400] mortuar: heathsnow will check. I just did a debug run and it appears the env change never makes it to the node
[2014-07-01 17:59:42 -0400] mortuar: motd is showing 'dev' env even though chef server is reflecting the updated 'staging'
[2014-07-01 18:01:57 -0400] coderanger: aaronrl: jkeiser and I have talked about it, possibly as a mix of his resource groups concept and my poise blocks system.
[2014-07-01 18:02:32 -0400] coderanger: aaronrl: If you are interested in supporting that work, would love to chat about it
[2014-07-01 18:13:22 -0400] aaronrl: @coderanger: i don't have much experience with how to design something like that, unfortunately (i'm about 2 weeks into my ruby expertise). i just know what workloads aren't dependent on one another on the hosts i manage where i could leverage a feature like that.  i'd love to read more about both of the concepts if either of you have written about them publicly anywhere (google isn't turning up
[2014-07-01 18:13:23 -0400] aaronrl: anything)
[2014-07-01 18:13:52 -0400] coderanger: aaronrl: Sure, I'm happy to do the work, just need someone to fund it if they want it
[2014-07-01 18:17:52 -0400] mondo: I have a template used by a definition in one cookbook, that is called through multiple layers of wrapper cookbooks
[2014-07-01 18:18:51 -0400] mondo: Is it possible to get the name of the top most cookbook so I can do something like "This file called via <%=@cookbook_name%>"
[2014-07-01 18:20:32 -0400] coderanger: mondo: Not sure a definition
[2014-07-01 18:20:36 -0400] coderanger: er, not with
[2014-07-01 18:21:08 -0400] coderanger: With a resource you can get the name of the cookbook it was instantiated in, though I'm not sure thats what you are asking for
[2014-07-01 18:23:09 -0400] mondo: I have cookbook1 which has a definition, which might be called by cookbook2. I want to get the name of cookbook2 within the template used by the cookbook1 definition
[2014-07-01 18:23:25 -0400] coderanger: You will have to convert it from a definition to an LWRP
[2014-07-01 18:23:41 -0400] coderanger: then yes, you can access new_resource.cookbook_name
[2014-07-01 18:24:02 -0400] mondo: Oh ok. Cool, thanks.
[2014-07-01 18:24:05 -0400] coderanger: Yet another in a long line of reasons to not use definitions
[2014-07-01 18:24:05 -0400] coderanger: :)
[2014-07-01 18:33:11 -0400] someara: rebuild the node from scratch with the staging environment.
[2014-07-01 18:45:30 -0400] schlazor: why wouldn't a template resource defined in a method in a lightweight provider not actually execute?
[2014-07-01 18:47:08 -0400] coderanger: schlazor: Could be a lot of things, is the action it is defined in executing?
[2014-07-01 18:47:16 -0400] workmad3: schlazor: did you call the method? :)
[2014-07-01 18:48:35 -0400] schlazor: coderanger: yes. I put info logs before and after it in the method and those logs appear. Also set the template resource to a value (t) and log t.updated_by_last_action? which is false
[2014-07-01 18:49:05 -0400] coderanger: schlazor: Thats not surprising, it wouldn't execute until afterwards
[2014-07-01 18:49:11 -0400] coderanger: schlazor: Can you pastebin the code?
[2014-07-01 18:49:22 -0400] schlazor: sure thing. preferred pastebin?
[2014-07-01 18:52:01 -0400] coderanger: any is fine
[2014-07-01 18:53:27 -0400] schlazor: http://pastebin.com/MRq0cw3R
[2014-07-01 18:54:17 -0400] schlazor: sorry, forgot to comment where the resource ended and provider started
[2014-07-01 18:54:44 -0400] coderanger: schlazor: Okay, so first we need to talk about how Chef processes resources
[2014-07-01 18:55:19 -0400] coderanger: schlazor: Its a two pass system, first it executes the code which builds an array of resource objects in memory, then it iterates over that array and runs the actions
[2014-07-01 18:55:39 -0400] coderanger: schlazor: When using use_inline_resources, LWRPs are just doing this again internally
[2014-07-01 18:56:11 -0400] coderanger: so when the action method executes it is just queueing up resources in an array, and then when your action method returns it will execute all of them
[2014-07-01 18:56:35 -0400] coderanger: So right after that template resource, no file has been written because nothing has actually happened yet
[2014-07-01 18:57:19 -0400] coderanger: schlazor: Core chef doesn't provide you much in the way of control for this, but Poise has much more detailed options and might be more helpful here
[2014-07-01 18:58:35 -0400] schlazor: coderanger: got it. so I need to force the template to execute during compilation?
[2014-07-01 18:58:49 -0400] coderanger: schlazor: Thats one option if you want to stick with vanilla chef, yes
[2014-07-01 18:59:28 -0400] coderanger: schlazor: Also obligatory plug, I offer training and consulting services for this kind of advanced chef usage
[2014-07-01 18:59:36 -0400] schlazor: lol of course!
[2014-07-01 19:00:34 -0400] schlazor: thanks for your help coderanger
[2014-07-01 19:00:44 -0400] coderanger: No problem
[2014-07-01 19:02:02 -0400] sigusr1: jkeiser: a question about chef-metal, please?
[2014-07-01 19:09:06 -0400] gyoza: USA vs Belgium starting now
[2014-07-01 19:09:22 -0400] gyoza: i want chocolate now
[2014-07-01 19:09:41 -0400] heathsnow: anyone ever seen test kitchen totally ignore attributes? (i.e. the attribute is set in the .kitchen.yml file)
[2014-07-01 19:09:51 -0400] coderanger: heathsnow: No, pastebin?
[2014-07-01 19:16:38 -0400] heathsnow: Here's the paste bin:  http://pastebin.com/aCgycvC9
[2014-07-01 19:18:18 -0400] heathsnow: my cookbook runs fine if I set the attribute in the attributes/default.rb file to a value.  However, if I set the 'source_prefix' = nil in the attribute file then test kitchen fails
[2014-07-01 19:24:34 -0400] coderanger: heathsnow: Are you sure those shouldn't be under some prefix?
[2014-07-01 19:24:50 -0400] korishev: Anyone know why Im getting a bad decrypt error from chef in this pastebin?  http://pastebin.com/uR7JGkDt
[2014-07-01 19:24:52 -0400] coderanger: like attributes:\n  vmware:\n    stuff
[2014-07-01 19:25:35 -0400] heathsnow: @coderanger: it seems to be picking put the 'install_file' just fine
[2014-07-01 19:25:45 -0400] heathsnow: I'll double check though
[2014-07-01 19:25:54 -0400] coderanger: heathsnow: Whats the line in the recipe where it gets used
[2014-07-01 19:26:26 -0400] heathsnow: ah, install file always has a value in my attributes/default.rb....so that's why that one is picked up
[2014-07-01 19:26:46 -0400] heathsnow: line 30 in the pastebin
[2014-07-01 19:27:12 -0400] coderanger: heathsnow: Derp, I just stopped reading
[2014-07-01 19:27:17 -0400] coderanger: heathsnow: So yeah, node[self.cookbook_name]
[2014-07-01 19:27:30 -0400] coderanger: Thats terrible code, but there is a prefix
[2014-07-01 19:28:28 -0400] coderanger: heathsnow: http://pastebin.com/4SfZGmL3 is how it should look
[2014-07-01 19:29:02 -0400] heathsnow: @coderanger: thanks :)  I'll give it a shot
[2014-07-01 19:29:21 -0400] heathsnow: @coderanger: do you not like the node[self.cookbook_name] line?
[2014-07-01 19:30:03 -0400] coderanger: heathsnow: It think its needlessly generic, the name of the cookbook isn't going to change and being able to copy-pasta that in to another cookbook seems like an odd thing to design for
[2014-07-01 19:31:51 -0400] heathsnow: @coderanger: yeah.  I picked up the habit when I had to write ~20 cookbooks that all used the same LWRP and didn't change at the recipe level but only had differing attributes
[2014-07-01 19:32:54 -0400] coderanger: heathsnow: Thats when you pull it in to a shared library function/module :)
[2014-07-01 19:33:43 -0400] coderanger: heathsnow: Something like that in a frequently-reused block of code is one thing, very different from recipe code :)
[2014-07-01 19:34:45 -0400] Shubby: hey guys -- can I use the template resource with a non .erb file containing attributes (for example an httpd.conf where one of the lines is <%= node['apache']['servername'] %>) ?
[2014-07-01 19:35:01 -0400] holoway: Shubby: yeah, the .erb extension is just convention
[2014-07-01 19:35:04 -0400] heathsnow: yeah, i think i'll change it to be 'vmware_workstation'  :P
[2014-07-01 19:35:23 -0400] holoway: Shubby: erb is the templating language you can use in any kind of file you desire
[2014-07-01 19:35:55 -0400] Shubby: cool, thanks holoway! I'll fix it at some point to obey the convention but I need to get something up and running quickly
[2014-07-01 19:36:22 -0400] holoway: Shubby: as long as it's the 'source' in the template resource, and the file is in the right place, you're gtg
[2014-07-01 19:36:32 -0400] Shubby: good stuff, thanks again
[2014-07-01 19:37:11 -0400] vegardx: coderanger: j^2 told me you might be able to toubleshoot some strange issues with chef-server. https://gist.github.com/vegardx/059e11b1db2bbab0da46
[2014-07-01 19:38:06 -0400] coderanger: vegardx: The issue just being that the client search isn't coming back with anythying?
[2014-07-01 19:38:15 -0400] vegardx: Correct, but only for one client.
[2014-07-01 19:38:28 -0400] j^2: coderanger: :D
[2014-07-01 19:38:49 -0400] j^2: coderanger: i tried the best i could :)
[2014-07-01 19:39:16 -0400] vegardx: Hehe, didn't mean to rat you out j^2 :p
[2014-07-01 19:39:24 -0400] j^2: no worries ;)
[2014-07-01 19:40:31 -0400] coderanger: vegardx: Most likely just didn't get inserted in to solr correctly, how much data is in your chef-server?
[2014-07-01 19:40:57 -0400] vegardx: Just four nodes so far.
[2014-07-01 19:41:31 -0400] coderanger: vegardx: Easy fix is probably `knife client edit gateway.sinsenhq.net`, just make it an admin and then undo it
[2014-07-01 19:41:43 -0400] coderanger: then wait 90 seconds or so and try the search
[2014-07-01 19:41:58 -0400] vegardx: aha, I'll try that.
[2014-07-01 19:41:59 -0400] coderanger: (technically the delay could be up to 119 seconds)
[2014-07-01 19:42:36 -0400] coderanger: You can also force a full reindex on the server via `chef-server-ctl reindex`
[2014-07-01 19:43:20 -0400] vegardx: hm, I'm using the debian packages, that doesn't seem to be included.
[2014-07-01 19:44:04 -0400] coderanger: vegardx: Which packages?
[2014-07-01 19:44:05 -0400] vegardx: But solr was down when I added the node, so your trick might just do it.
[2014-07-01 19:44:13 -0400] vegardx: chef-server on wheezy
[2014-07-01 19:44:26 -0400] vegardx: So I don't have the chef-server-ctl
[2014-07-01 19:44:47 -0400] coderanger: vegardx: You should consider those actively dangerous
[2014-07-01 19:45:01 -0400] vegardx: Do tell!
[2014-07-01 19:45:27 -0400] coderanger: vegardx: The old webui has numerous known RCEs unless Debian has been patching it themselves
[2014-07-01 19:45:38 -0400] jtimberman: vegardx: they're version 10.12, which was released two years ago.
[2014-07-01 19:45:43 -0400] vegardx: Ah, well I'm running without the webui. :)
[2014-07-01 19:46:15 -0400] jtimberman: besides the webui, it's a really old version of chef / chef server
[2014-07-01 19:46:18 -0400] coderanger: vegardx: Probably mildly safer, but the Ruby chef-server is potentially vulnerable to some of the old Yaml vulns, depends on how they are packaging gems
[2014-07-01 19:46:26 -0400] jtimberman: e.g., it uses couchdb as the databass instead os postgresql
[2014-07-01 19:46:36 -0400] coderanger: vegardx: Chef server 11 is a massive change, I would recommend upgrading when you get the chance
[2014-07-01 19:46:39 -0400] jtimberman: doesn't have the tooling documented on the docs site.
[2014-07-01 19:46:44 -0400] vegardx: Aha, I'll keep that in mind and look to replace that.
[2014-07-01 19:46:47 -0400] coderanger: If nothing else, it uses a tiny amount of RAM compared to the old one
[2014-07-01 19:46:59 -0400] jtimberman: and CHEF doesn't update the packaged-by-distro versions
[2014-07-01 19:47:13 -0400] vegardx: Hhaa, I remember chef 0.9x. Memory usage was... aehm, interesting!
[2014-07-01 19:47:19 -0400] coderanger: Heh, looks like Debian doesn't even package the webui
[2014-07-01 19:47:23 -0400] coderanger: I guess that was their solution :)
[2014-07-01 19:47:34 -0400] vegardx: yeah, they removed it from stable. It was in oldstable.
[2014-07-01 19:47:37 -0400] vegardx: Err, is.
[2014-07-01 19:47:54 -0400] coderanger: To be fair, thats probably the right move, its deprecated anyway
[2014-07-01 19:48:18 -0400] vegardx: yeah, and using the cli is much much more intuitive.
[2014-07-01 19:48:47 -0400] coderanger: vegardx: For older chef, you can use `knife reindex` from your workstation
[2014-07-01 19:48:55 -0400] coderanger: vegardx: You'll need chef 10 on the workstation too though
[2014-07-01 19:49:14 -0400] coderanger: but the edit should do it too, any object change triggers that data to be indexed
[2014-07-01 19:49:35 -0400] vegardx: You're probably right. Solr was down when the node was added.
[2014-07-01 19:49:39 -0400] vegardx: Or so my logs tell me.
[2014-07-01 19:50:04 -0400] vegardx: Permission issues on /var/run, package breaking packaging policy. Not a good sign.
[2014-07-01 19:50:18 -0400] heathsnow: @coderanger: you were close (regarding the kitchen.yml).  it's still a hash, but I needed the vmware_workstation missing line you added (also a hash)
[2014-07-01 19:50:18 -0400] coderanger: Its supposed to queue stuff in rabbit if that happens, but I don't want to think about what bugs were around back then to break it :)
[2014-07-01 19:50:35 -0400] vegardx: Uh, no I rebuilt the index, but it still doesn't show up.
[2014-07-01 19:50:36 -0400] vegardx: Weird.
[2014-07-01 19:50:43 -0400] coderanger: heathsnow: What I gave is the normal syntax for hashes in Yaml
[2014-07-01 19:51:39 -0400] coderanger: vegardx: I don't remember if packages back then shipped with a different sync time, you can check in the solr config though
[2014-07-01 19:51:46 -0400] coderanger: vegardx: its set to 1m in current builds
[2014-07-01 19:52:06 -0400] vegardx: Aha, I'll give it a few minutes then.
[2014-07-01 19:52:20 -0400] vegardx: Thanks a bunch, now I know that I'm not insane at least.
[2014-07-01 19:52:31 -0400] coderanger: I can neither confirm nor deny ...
[2014-07-01 19:52:37 -0400] vegardx: heh
[2014-07-01 19:52:44 -0400] vegardx: I think dangerousdave is having issues.
[2014-07-01 19:53:47 -0400] vegardx: I'm tempted to just re-add the node, and see if that helps.
[2014-07-01 20:09:20 -0400] vegardx: Sigh, no it won't index anything.
[2014-07-01 20:09:32 -0400] vegardx: All logs tells me that things are running, rebuild returns success.
[2014-07-01 20:09:48 -0400] Shubby: another question about the template resource and template files -- if I have this line in my template file, and I'm looking to replace it with a custom attribute: <ApplicationDefaults entityID="https://www.example.com">
[2014-07-01 20:09:58 -0400] Shubby: do I need to write <ApplicationDefaults entityID="<%= node['attribute'] %>"> or <ApplicationDefaults entityID=<%= node['attribute'] %>>
[2014-07-01 20:10:13 -0400] Shubby: I feel like those quotes and those HTML tags are gonna mess something up
[2014-07-01 20:15:30 -0400] lindenle: HI all i have retries 3 in my execute resource but when it prints the actual resource it is running I see retries 0. Is my syntax wrong?
[2014-07-01 20:19:15 -0400] medya: do you guys know what is spec folder in some cookbooks ?
[2014-07-01 20:20:12 -0400] workmad3: medya: tests, probably with chefspec
[2014-07-01 20:22:59 -0400] Shubby: did something happen with #learnchef that it's now +i?
[2014-07-01 20:25:13 -0400] mattstratton: Shubby - we have moved #learnchef to just be #chef
[2014-07-01 20:25:25 -0400] Shubby: oh I see
[2014-07-01 20:48:01 -0400] juliancdunn: mattstratton: it worked!
[2014-07-01 20:49:07 -0400] jblack: Hi. I'm having a little problem. I'm doing things the "berksfile way" and I'm  trying to install a package before I do an include_recipe that depends upon a package already being installed.
[2014-07-01 20:49:58 -0400] jblack: however, the recipe that I'm including seems to require the package already be available in compile, rather than convergence
[2014-07-01 20:57:28 -0400] mattstratton: thanks @juliancdunn
[2014-07-01 20:57:30 -0400] mattstratton: :)
[2014-07-01 20:58:56 -0400] gyoza: YO
[2014-07-01 20:59:01 -0400] gyoza: anybody here aws tagging ninja?
[2014-07-01 20:59:13 -0400] gyoza: How long to tags take to freaking update!?
[2014-07-01 20:59:35 -0400] gyoza: I changed a lowercase to a capital letter and its showing correct in the console but ec2-describe-volumes is still lowercase...
[2014-07-01 21:00:46 -0400] gyoza: what about davey
[2014-07-01 21:01:04 -0400] icarus: hello all
[2014-07-01 21:01:22 -0400] icarus: does have any recommendations on assigning a random password var in a recipe?
[2014-07-01 21:01:32 -0400] icarus: such as one you might assign for a user or a database
[2014-07-01 21:01:47 -0400] iFire: Is it a good idea to create a chef script that will run in a jenkins install?
[2014-07-01 21:02:11 -0400] iFire: I don't want to maintain a shell script vs a chef script
[2014-07-01 21:02:17 -0400] icarus: iFire: whats the goal?
[2014-07-01 21:02:26 -0400] icarus: theres a jenkins install cookbook already written that works great
[2014-07-01 21:02:28 -0400] iFire: icarus: I want the chef script to output a package
[2014-07-01 21:02:42 -0400] iFire: for ci purposes
[2014-07-01 21:03:16 -0400] iFire: normally you'd create a shell script / ruby script to build your software
[2014-07-01 21:03:54 -0400] gyoza: icarus: perl to create random password w/ salt
[2014-07-01 21:03:55 -0400] gyoza: $result = `openssl passwd -1 -salt $randstring $str_pass`;
[2014-07-01 21:03:57 -0400] icarus: iFire: thats a good idea, nothing wrong with it
[2014-07-01 21:04:13 -0400] iFire: https://stackoverflow.com/questions/8530593/chef-install-and-update-programs-from-source
[2014-07-01 21:04:23 -0400] iFire: says I should use the system package manager to install software
[2014-07-01 21:04:29 -0400] gyoza: yes
[2014-07-01 21:04:33 -0400] gyoza: package "tar" do
[2014-07-01 21:04:40 -0400] iFire: I need to support windows though
[2014-07-01 21:04:45 -0400] gyoza: read on
[2014-07-01 21:04:52 -0400] gyoza: lol actually i dunno about windows man:(
[2014-07-01 21:05:02 -0400] icarus: gyoza: are you saying use perl to then use openssl?
[2014-07-01 21:05:13 -0400] iFire: gyoza: how do sandbox your chef install?
[2014-07-01 21:05:15 -0400] gyoza: well you dont have to use perl
[2014-07-01 21:05:17 -0400] bougyman: that's an md5 pass, no?
[2014-07-01 21:05:27 -0400] icarus: gyoza: heh yeah, preferably ruby
[2014-07-01 21:05:28 -0400] gyoza: oh i guess that wouldnt work
[2014-07-01 21:05:41 -0400] gyoza: because of what bougy said
[2014-07-01 21:05:55 -0400] chip-: icarus: You can generate passwords with the openssl cookbook.
[2014-07-01 21:06:12 -0400] bougyman: Digest::SHA1.hexdigest("pass", "salt")
[2014-07-01 21:06:19 -0400] chip-: icAdds the secure_password resource.
[2014-07-01 21:06:26 -0400] chip-: icarus: Adds the secure_password resource.
[2014-07-01 21:06:27 -0400] chip-: https://github.com/opscode-cookbooks/openssl
[2014-07-01 21:06:34 -0400] iFire: bougyman: you know the standard thing about using kdf for hashing paswords right?
[2014-07-01 21:06:46 -0400] icarus: chip-: i did see that
[2014-07-01 21:06:47 -0400] iFire: don't use sha + salt
[2014-07-01 21:06:49 -0400] icarus: chip-: im just wondering how i implement it
[2014-07-01 21:06:53 -0400] gyoza: iFire: i use vagrant to do my testing
[2014-07-01 21:07:28 -0400] chip-: icarus: https://github.com/opscode-cookbooks/openssl#usage
[2014-07-01 21:07:43 -0400] chip-: icarus: Downside is now you have a secure string in a world-readable node attribute. Use with care.
[2014-07-01 21:08:40 -0400] gyoza: ok its been 15 mins since i changed the tag in aws console and its still not propagated ...
[2014-07-01 21:10:39 -0400] iFire: chip-: encrypted payload?
[2014-07-01 21:10:51 -0400] icarus: chip-: call like :secure_password
[2014-07-01 21:11:09 -0400] chip-: Sure, lots of ways to do it. I was just pointing out a problem with that particular example implementation.
[2014-07-01 21:11:28 -0400] icarus: chip-: duly noted
[2014-07-01 21:12:31 -0400] gyoza: one of my online buddies goes by chip
[2014-07-01 21:12:34 -0400] gyoza: i keep thinking you're him:(
[2014-07-01 21:17:07 -0400] chip-: Probably not him, but it's not just an irc nick, fwiw.
[2014-07-01 21:21:35 -0400] jblack: I'm having trouble figuring out how to install a package -before-  include_recipe gets called. Any suggestion?
[2014-07-01 21:21:51 -0400] coderanger: jblack: Not sure what you mean, just do it in that order :)
[2014-07-01 21:22:03 -0400] gleam: you mean install the package at compile time?
[2014-07-01 21:22:10 -0400] gyoza: gleam is the man
[2014-07-01 21:23:02 -0400] jblack: Correct. I needto install during compile time, because when I use include_recipe "td-agent",   it barfs because libcurl-devel isn't installed.
[2014-07-01 21:23:26 -0400] jblack: it seems like their plugin handling is building gems during build instead of convergence
[2014-07-01 21:24:04 -0400] jblack: I suppose I could install the plugin after the factg
[2014-07-01 21:24:47 -0400] gleam: i don't see anything in the td-agent cookbook that implies it would install things at compile time, you should be able to just package "libcurl-devel" \n include_recipe "td-agent"
[2014-07-01 21:24:56 -0400] coderanger: jblack: package 'libcurl-devel' do action :nothing end.run_action(:install)
[2014-07-01 21:25:49 -0400] jblack: coderanger: You are so awesome.
[2014-07-01 21:26:00 -0400] gyoza: i agree with this comment
[2014-07-01 21:26:23 -0400] jblack: gyoza: He always knows the answer to everything.
[2014-07-01 21:26:37 -0400] jblack: coderanger for president of the world!
[2014-07-01 21:26:42 -0400] coderanger: Thanks y'all
[2014-07-01 21:26:44 -0400] gyoza: im adding that to my "random chef tricks" wiki:P
[2014-07-01 21:27:25 -0400] gleam: chef-sugar also offers up compile_time <stuff here> end
[2014-07-01 21:27:33 -0400] gyoza: Im talkign with AWS support in india
[2014-07-01 21:27:33 -0400] gyoza: weee
[2014-07-01 21:28:09 -0400] lrr: anyone have a good way to install packages in debin from backports using chef?
[2014-07-01 21:28:45 -0400] coderanger: lrr: You can use the apt_repository resource to configure the repo
[2014-07-01 21:28:50 -0400] jblack: lrr: There is a apt cookbook that can add repos
[2014-07-01 21:29:01 -0400] jblack: like he said.
[2014-07-01 21:29:09 -0400] lrr: i have the repo added, i just need to install packages from the repo in a recipe
[2014-07-01 21:29:12 -0400] gleam: and then pin packages from backports higher
[2014-07-01 21:29:15 -0400] gleam: using apt_preference
[2014-07-01 21:29:22 -0400] coderanger: lrr: by default apt installs the latest version from any available repo
[2014-07-01 21:29:26 -0400] jblack: package "packagename"  isn't working?
[2014-07-01 21:29:44 -0400] gyoza: i wonder if package "*" would work
[2014-07-01 21:29:46 -0400] gyoza: lool
[2014-07-01 21:29:46 -0400] lrr: jblack: i haven't checked. i just started googling and the correct method wasn't clear
[2014-07-01 21:29:48 -0400] coderanger: you can use pinning if you want to only install a single backport package
[2014-07-01 21:30:24 -0400] jblack: lrr: You should be able to use that. I don't remember if you have to run the "get apt to update" recipe after, but it should be explained
[2014-07-01 21:30:25 -0400] eberg1: I need to debug a few recipes.  I do not have write access to the cookbook git repo, but I need to run some recipes from the target node.  Looks like chef-apply can help, but I'm getting "FATAL: NoMethodError: undefined method `unreachable_cookbook?' for nil:NilClass" when I run "chef-apply my_recipe.rb".
[2014-07-01 21:31:01 -0400] coderanger: eberg1: please pastebin the code and error
[2014-07-01 21:32:13 -0400] iFire: gyoza: anyways, so I can just do a chef-client -z with the chef repo setup and it'l run a local build in chef
[2014-07-01 21:32:24 -0400] iFire: in jenkins
[2014-07-01 21:32:33 -0400] gyoza: what
[2014-07-01 21:32:49 -0400] iFire: Question: How do I get jenkins to use chef?
[2014-07-01 21:33:00 -0400] gyoza: iFire: i think you may be talking to the wrong guy:)
[2014-07-01 21:33:12 -0400] gyoza: gleam maybe? hehe
[2014-07-01 21:33:20 -0400] coderanger: iFire: Thats a very oblique question, what are you trying to do?
[2014-07-01 21:33:21 -0400] gleam: not me
[2014-07-01 21:33:23 -0400] eberg1: coderanger: I'm looking for a way to debug this locally from one of the nodes.  I'm not ready to ask for help with the problem itself, just with setting up to debug it.  I'm pretty sure it's a fairly easy fix, and one that I want to dig into myself.
[2014-07-01 21:33:34 -0400] gyoza: im new to this stuff i only answer when i can:(
[2014-07-01 21:34:26 -0400] coderanger: eberg1: chef-apply is for running one-off scripts, not really for debugging. You can try to use chef-shell for debugging but I never know how to use it very well. I just use a lot of Chef::Log.debug statements and sometimes a require 'pry';binding.pry
[2014-07-01 21:34:41 -0400] iFire: coderanger: I want have a ci to run a chef script rather than use a shell script
[2014-07-01 21:34:51 -0400] icarus: so if my understanding is correct, as long as the openssl cookbook is included, the variable "secure_password" implies a random password?
[2014-07-01 21:34:52 -0400] sauraus: Anyone know how to search an encrypted data bag?
[2014-07-01 21:34:55 -0400] coderanger: iFire: Then call chef-solo from jenkins
[2014-07-01 21:34:58 -0400] coderanger: sauraus: You cannot
[2014-07-01 21:35:13 -0400] iFire: coderanger: well chef-client zero is the new replacement for that
[2014-07-01 21:35:20 -0400] iFire: chef-client -z
[2014-07-01 21:35:35 -0400] sauraus: coderanger: thanks
[2014-07-01 21:35:43 -0400] iFire: -z, --local-mode                 Point chef-client at local repository
[2014-07-01 21:35:51 -0400] coderanger: iFire: Thats another option as well
[2014-07-01 21:36:18 -0400] coderanger: icarus: Not directly, thats a helper function defined in https://github.com/opscode-cookbooks/openssl/blob/master/libraries/secure_password.rb, it can be monkey patched in to the Recipe DSL module though
[2014-07-01 21:36:40 -0400] coderanger: icarus: (and because such things are global, if another loaded recipe is doing so, then it would be present in your recipe as well)
[2014-07-01 21:37:26 -0400] eberg1: actually, running chef-apply for just this recipe is exactly what I want.  I just can't figure out how to get around this error "FATAL: NoMethodError: undefined method `unreachable_cookbook?' for nil:NilClass" when I run "chef-apply my_recipe.rb".
[2014-07-01 21:39:20 -0400] coderanger: eberg1: Please pastebin the full error, the only place that is called is from within the run_context I think
[2014-07-01 21:39:30 -0400] coderanger: eberg1: Does your recipe call include_recipe?
[2014-07-01 21:39:38 -0400] coderanger: eberg1: If so, that won't (normally) work in chef-apply
[2014-07-01 21:40:37 -0400] eberg1: codeeranger: hmmmthen I'm pretty much dead in the water wtihout repo write perms from what i understand.  Seems weird that you'd have to commit and push in order to test.  Is that really how chef works wrt the development/debugging process?
[2014-07-01 21:40:59 -0400] coderanger: eberg1: Still not sure what you are trying to do
[2014-07-01 21:41:18 -0400] coderanger: eberg1: You can use chef-solo or similar for debugging, and test-kitchen is very helpful for this
[2014-07-01 21:41:29 -0400] coderanger: chef-apply is not, as I said, a debugging tool
[2014-07-01 21:41:57 -0400] eberg1: I"m trying to execute a recipe  or even a cookbook  from a node.  I think I'll look at using chef-solo for this.
[2014-07-01 21:41:58 -0400] coderanger: (or at least not a great one)
[2014-07-01 21:42:10 -0400] icarus: coderanger: i do see this sample code here:
[2014-07-01 21:42:11 -0400] icarus: ::Chef::Recipe.send(:include, Opscode::OpenSSL::Password)
[2014-07-01 21:42:11 -0400] icarus: node.set_unless[:my_password] = secure_password
[2014-07-01 21:42:22 -0400] coderanger: icarus: That would be the monkey patch, yes
[2014-07-01 21:42:31 -0400] coderanger: icarus: Worth noting DO NOT EVER DO THAT
[2014-07-01 21:42:39 -0400] icarus: coderanger: hah, why not?
[2014-07-01 21:42:48 -0400] icarus: what would you recommend as a better technique
[2014-07-01 21:42:52 -0400] coderanger: icarus: /me has a securityspasm
[2014-07-01 21:43:15 -0400] icarus: coderanger: alright, point taken
[2014-07-01 21:43:18 -0400] coderanger: icarus: All node attributes are visible to all other nodes and clients in the system, storing secure or secret information on the node is just a non-starter
[2014-07-01 21:43:41 -0400] coderanger: icarus: (unless you believe in perfect perimeter security)
[2014-07-01 21:44:03 -0400] icarus: coderanger: you're right
[2014-07-01 21:44:18 -0400] icarus: ill have to dwell on this
[2014-07-01 21:44:21 -0400] coderanger: giantsquidofanger.gif
[2014-07-01 21:44:22 -0400] icarus: its probably more simple
[2014-07-01 21:44:35 -0400] coderanger: icarus: I can chatter about secrets management in chef for a very long time
[2014-07-01 21:44:36 -0400] icarus: but im sitting in a bar watching the world cup on my laptop and getting a few IPA's deep
[2014-07-01 21:44:42 -0400] coderanger: but the tl;dr is "its all kind of terrible"
[2014-07-01 21:44:43 -0400] icarus: its starting to become...hazy
[2014-07-01 21:44:52 -0400] coderanger: Anyone score yet?
[2014-07-01 21:44:56 -0400] icarus: still 0 0
[2014-07-01 21:44:57 -0400] coderanger: Last I saw was still 0-0
[2014-07-01 21:45:01 -0400] coderanger: woo futbol!
[2014-07-01 21:49:20 -0400] icarus: coderanger: so you even frown upon data_bags?
[2014-07-01 21:49:41 -0400] icarus: im basically trying to think of a way to assign random passwords to a mysql provisioning recipe
[2014-07-01 21:49:51 -0400] coderanger: icarus: For secrets storage, definitely
[2014-07-01 21:49:56 -0400] coderanger: (also in general, but less so)
[2014-07-01 21:50:04 -0400] teshian: coderanger, what city are you in?
[2014-07-01 21:50:15 -0400] icarus: so each root user has a strong random pass, and then it is assigned to a param in .my.cnf afterward
[2014-07-01 21:50:27 -0400] coderanger: icarus: There is no good way to have the server create its own password, you'll have to generate it beforehand and store it in something like citadel or chef-vault
[2014-07-01 21:50:42 -0400] coderanger: teshian: Roughly speaking, San Francisco
[2014-07-01 21:51:06 -0400] teshian: Cool, some good beer out there
[2014-07-01 21:52:18 -0400] coderanger: I defer to others on that one
[2014-07-01 21:53:17 -0400] teshian: It never fails to amaze me when I do something in windows chef and it actually works
[2014-07-01 22:00:48 -0400] gyoza: belgium goal
[2014-07-01 22:00:50 -0400] gyoza: :(
[2014-07-01 22:02:17 -0400] holoway: 31 shots on goal vs 6, a score was inevitable
[2014-07-01 22:02:43 -0400] gyoza: sounds like a hater:)
[2014-07-01 22:08:24 -0400] Ash: holoway: this is the best goalie ever
[2014-07-01 22:08:43 -0400] Ash: probably because he gets so much practice
[2014-07-01 22:08:54 -0400] holoway: Ash: :)
[2014-07-01 22:09:17 -0400] holoway: Ash: good to 'see' you, btw
[2014-07-01 22:09:27 -0400] Ash: :D yeah! long time
[2014-07-01 22:09:43 -0400] c_t: so, uh, is it over?
[2014-07-01 22:11:41 -0400] Ash: not yet, the USA keeps not losing
[2014-07-01 22:12:20 -0400] holoway: c_t: pretty sure it was 0-0 at 90 minutes, so we go 120
[2014-07-01 22:12:51 -0400] Ash: our whole office is watching and groaning at each shot
[2014-07-01 22:13:08 -0400] jbz:  I thought BEL scored?
[2014-07-01 22:13:15 -0400] holoway: jbz: they did
[2014-07-01 22:13:21 -0400] jbz: oh at 90 min my bad
[2014-07-01 22:13:26 -0400] Ash: i'm pretty sure we have these belgians right where we want them.
[2014-07-01 22:13:33 -0400] jbz: ITS A PUNNING CLAN
[2014-07-01 22:13:34 -0400] holoway: jbz: they scored at 92 minutes, so 2 minutes into extra time
[2014-07-01 22:13:35 -0400] Ash: this is all part of the plan
[2014-07-01 22:14:01 -0400] holoway: also, whats up with Common as our Goalie
[2014-07-01 22:14:34 -0400] Ash: turntable skills turn out to be useful in soccer
[2014-07-01 22:22:19 -0400] Ash: oh man, this is getting intense
[2014-07-01 22:28:54 -0400] gyoza: Anybody know how much extra time they added?!
[2014-07-01 22:29:01 -0400] gyoza: 30 mins?
[2014-07-01 22:29:37 -0400] Ash: yeah, two 15 minute halves + penalty time
[2014-07-01 22:29:42 -0400] gyoza: damn
[2014-07-01 22:29:46 -0400] gyoza: im starting to get hella nervous
[2014-07-01 22:29:47 -0400] gyoza: lol
[2014-07-01 22:29:59 -0400] gyoza: niiice
[2014-07-01 22:30:03 -0400] gyoza: belgium so mad at the ref lol
[2014-07-01 22:30:05 -0400] Ash: this is way entertaining
[2014-07-01 22:30:34 -0400] gyoza: did you read that article from ann colter about Soccer?
[2014-07-01 22:30:45 -0400] gyoza: She said americas morale is declining because we like watching soccer now...
[2014-07-01 22:30:48 -0400] gyoza: moral
[2014-07-01 22:30:54 -0400] gyoza: morals
[2014-07-01 22:30:55 -0400] gyoza: sorr
[2014-07-01 22:30:56 -0400] gyoza: lol
[2014-07-01 22:31:13 -0400] gyoza: http://www.politico.com/story/2014/07/ann-coulter-soccer-world-cup-108471.html
[2014-07-01 22:31:14 -0400] gyoza: interesting read
[2014-07-01 22:33:08 -0400] gyoza: damnit:(
[2014-07-01 22:33:30 -0400] gyoza: Im gonna go kill myself now
[2014-07-01 22:34:00 -0400] Ash: mannnn
[2014-07-01 22:34:05 -0400] gyoza: so sad:(
[2014-07-01 22:34:17 -0400] Ash: http://image.blingee.com/images19/content/output/000/000/000/7bc/797421732_1200263.gif
[2014-07-01 22:35:57 -0400] gyoza: on the bright side
[2014-07-01 22:36:01 -0400] gyoza: i picked up a bookcase for 25 bucks
[2014-07-01 22:36:05 -0400] gyoza: normally its 70
[2014-07-01 22:36:26 -0400] icarus: coderanger: belgium won against us
[2014-07-01 22:36:28 -0400] icarus: 2-1
[2014-07-01 22:36:35 -0400] icarus: intense game
[2014-07-01 22:36:37 -0400] gyoza: yes
[2014-07-01 22:36:42 -0400] wdpro_kevin: very intense
[2014-07-01 22:36:46 -0400] icarus: 2 beers and a pulled pork sandwich
[2014-07-01 22:36:53 -0400] gyoza: icarus we made a pact while you wer egone
[2014-07-01 22:36:55 -0400] gyoza: if we lost
[2014-07-01 22:36:58 -0400] wdpro_kevin: I think I pulled a muscle
[2014-07-01 22:36:58 -0400] gyoza: we are all gonna suicide
[2014-07-01 22:37:02 -0400] gyoza: soo
[2014-07-01 22:37:04 -0400] gyoza: later;(
[2014-07-01 22:37:12 -0400] icarus: i wasnt privy to such deals
[2014-07-01 22:37:17 -0400] gyoza: you were gone!
[2014-07-01 22:37:34 -0400] gyoza: i should go ask my boss if i can go home early
[2014-07-01 22:37:39 -0400] gyoza: "i am sad cause we lost aww"
[2014-07-01 22:37:43 -0400] gyoza: lol
[2014-07-01 22:37:47 -0400] icarus: im sitting next to my boss
[2014-07-01 22:37:57 -0400] icarus: who is 2 beers ahead of me
[2014-07-01 22:38:00 -0400] gyoza: nice
[2014-07-01 22:38:07 -0400] gyoza: well its still "business" hours for us:(
[2014-07-01 22:38:32 -0400] gyoza: i've had a pretty decent headache for the last 20 mins..
[2014-07-01 22:38:40 -0400] gyoza: thats unusual..
[2014-07-01 22:38:49 -0400] gyoza: i dont get headaches usually
[2014-07-01 22:38:52 -0400] teshian: is there any way to make make chef-client append to the log?
[2014-07-01 22:39:03 -0400] teshian: sorry no append
[2014-07-01 22:42:33 -0400] wdpro_kevin: any way to test multiple chef clients in one .kitchen.yml?
[2014-07-01 22:42:47 -0400] wdpro_kevin: cc test-kitchen
[2014-07-01 22:42:58 -0400] coderanger: wdpro_kevin: No, or at least not if you are asking what I think you are asking
[2014-07-01 22:43:25 -0400] coderanger: wdpro_kevin: Each suite*platform is its own VM, there isn't support for multi-server tests
[2014-07-01 22:43:54 -0400] wdpro_kevin: so maybe create a second kitchen.yml for chef10?
[2014-07-01 22:44:03 -0400] wdpro_kevin: kitchen-chef10.yml
[2014-07-01 22:45:01 -0400] coderanger: wdpro_kevin: Ahh, maybe you meant something diferent, you are trying to test multiple chef versions?
[2014-07-01 22:45:08 -0400] coderanger: fujin: Thanks duder
[2014-07-01 22:45:23 -0400] fujin: ;D
[2014-07-01 22:45:24 -0400] c_t: yes, it's an interesting post
[2014-07-01 22:45:31 -0400] c_t: ... assuming that's why fujin's hugging you
[2014-07-01 22:45:34 -0400] c_t: If not, uh
[2014-07-01 22:45:37 -0400] fujin: tbh, not something I am completely un-aware of
[2014-07-01 22:45:42 -0400] fujin: lool
[2014-07-01 22:45:55 -0400] fujin: I built bawt to help with IRC support, of course, recalling keywords that were regularly asked of us
[2014-07-01 22:45:57 -0400] coderanger: fujin: Basically everyone I talk to has noticed the trend
[2014-07-01 22:46:03 -0400] c_t: "Can't get enough of your code babe"
[2014-07-01 22:46:13 -0400] wdpro_kevin: coderanger: Yeah we have a cookbook that needs to work in both chef10 and chef11
[2014-07-01 22:46:19 -0400] fujin: Have not been anywhere near as observant as coderanger in this post, though
[2014-07-01 22:46:35 -0400] coderanger: wdpro_kevin: Sec
[2014-07-01 22:46:52 -0400] gyoza: omg
[2014-07-01 22:46:58 -0400] gyoza: the dumb developer guy here who should be let go
[2014-07-01 22:47:03 -0400] spheromak: ohai coderanger  Im here to support you supporting :)
[2014-07-01 22:47:06 -0400] gyoza: just sent us a "Scrum" item list
[2014-07-01 22:47:11 -0400] gyoza: The dude has no idea how agile works
[2014-07-01 22:47:20 -0400] coderanger: wdpro_kevin: So I do this in Travis using a file like https://github.com/poise/poise/blob/master/.kitchen.travis.yml
[2014-07-01 22:47:21 -0400] gyoza: and hes just using buzz words
[2014-07-01 22:47:24 -0400] gyoza: and i want to punch him in the face
[2014-07-01 22:47:25 -0400] gyoza: so hard
[2014-07-01 22:47:38 -0400] coderanger: wdpro_kevin: You should be able to do it in a single thing though, under the suite you can include driver_options
[2014-07-01 22:47:44 -0400] gyoza: sorry for getting violent guys:(
[2014-07-01 22:47:55 -0400] coderanger: wdpro_kevin: So just specify the require_chef_omnibus: 10.whatever in there
[2014-07-01 22:48:39 -0400] wdpro_kevin: coderanger: ah you know we do something similar. I'll just create a second ci job and modify the chef_version
[2014-07-01 22:48:47 -0400] spheromak: coderanger: i noticed it a long while ago, but I always attributed it to the the exposure getting bigger, and the general quality of the problem requester going down
[2014-07-01 22:48:56 -0400] wdpro_kevin: yes much better
[2014-07-01 22:49:15 -0400] wdpro_kevin: gracias ranger of code
[2014-07-01 22:49:33 -0400] gyoza: i see unicode
[2014-07-01 22:49:33 -0400] gyoza: lol
[2014-07-01 22:49:39 -0400] gyoza: Aka HIGH ASCII
[2014-07-01 22:50:00 -0400] coderanger: spheromak: That does happen over time, but chef has gone full-tilt towards a non-community-based approach
[2014-07-01 22:50:25 -0400] fujin: no one even in here to discuss it w/ us
[2014-07-01 22:50:26 -0400] fujin: lolz
[2014-07-01 22:50:28 -0400] spheromak: :P
[2014-07-01 22:50:31 -0400] spheromak: theres peeps
[2014-07-01 22:50:34 -0400] gyoza: Wait what happened??
[2014-07-01 22:50:36 -0400] spheromak: you gotta wrangle them tho
[2014-07-01 22:50:41 -0400] fujin: thats fucked though
[2014-07-01 22:50:46 -0400] holoway: I'm right here :)
[2014-07-01 22:50:53 -0400] spheromak: <3 holoway
[2014-07-01 22:51:00 -0400] fujin: you pulled the re-appearing act like me!
[2014-07-01 22:51:10 -0400] fujin: Genjutsu: Sudden Materialization
[2014-07-01 22:51:11 -0400] filthy_contracto: I am working with the yum community cookbook v 3.2.2 and trying to disable http_caching. I have set the attribute override['yum']['main']['http_caching'] = false, however the value is not being set in the template.
[2014-07-01 22:51:13 -0400] c_t: the point about Chef RFCs is a worthy one
[2014-07-01 22:51:36 -0400] fujin: spheromak: pointed me at an RFC a while back that was.. pretty intense, felt really out of place trying to throw my voice onto it
[2014-07-01 22:51:37 -0400] filthy_contracto: The attribute is being ignored altogether.
[2014-07-01 22:51:41 -0400] fujin: the separating the node state one
[2014-07-01 22:51:51 -0400] holoway: I've talked about this with Noah, and I'll talk about it with anyone else
[2014-07-01 22:52:41 -0400] filthy_contracto: I have tried 'none' but that errors out due to attribute being True/False class set in the globalconfig
[2014-07-01 22:52:46 -0400] spheromak: filthy_contracto: its probably a prescedence problem.
[2014-07-01 22:54:38 -0400] fujin: i don't even know where to begin, feel helpless after reading that post
[2014-07-01 22:55:01 -0400] holoway: look, I'm not going to go down a list of Noah's grievances
[2014-07-01 22:55:27 -0400] fujin: i don't think anyone is expecting you too holoway !
[2014-07-01 22:55:31 -0400] wdpro_kevin: filthy_contracto I think it needs to be 'none'
[2014-07-01 22:55:35 -0400] wdpro_kevin: default['yum']['main']['http_caching'] = nil # %w{ packages all none }
[2014-07-01 22:55:39 -0400] holoway: the tl;dr is actually simple - communities are living things that are made up of human beings
[2014-07-01 22:55:59 -0400] holoway: there was a company before there was a chef
[2014-07-01 22:56:09 -0400] holoway: and both have blown up hugely, particularly in the last few years
[2014-07-01 22:56:32 -0400] holoway: we have to do more to make the community an easy place to contribute and play
[2014-07-01 22:56:47 -0400] holoway: also, it's perfectly natural that the folks who helped build chef (like you, fujin) don't build chef a lot
[2014-07-01 22:56:51 -0400] holoway: you build things on top of, or around it
[2014-07-01 22:56:58 -0400] holoway: cause.. you build things, and lots of chef is built
[2014-07-01 22:57:14 -0400] fujin: that was my full for joining early stage (and how I learned to accept leaving opscode/chef)
[2014-07-01 22:57:23 -0400] fujin: missed a word derp
[2014-07-01 22:57:33 -0400] fujin: I definitely feel out of touch now, though
[2014-07-01 22:57:50 -0400] holoway: I do think we're late in putting some structure in
[2014-07-01 22:58:02 -0400] fujin: I guess my familiarity means I can dive back in and try to pick up the deltas and try to observe what changes I've missed
[2014-07-01 22:58:05 -0400] fujin: New users won't have that skillset
[2014-07-01 22:58:31 -0400] holoway: fujin: unlike the early days, new users largely don't have to
[2014-07-01 22:58:44 -0400] fujin: hmm
[2014-07-01 22:58:45 -0400] coderanger: Don't have to, and possibly more importantly, don't want to
[2014-07-01 22:58:48 -0400] spheromak: holoway: also alot of us are now just using it as a tool, it's not the shiny anmore. I know for me im on to other shinies. I think maybe what it means is there isn't an steady influx of new 'power users' ?  or maybe chef inc is just hiring them all :P
[2014-07-01 22:58:49 -0400] coderanger: and thats cool
[2014-07-01 22:58:51 -0400] filthy_contracto: wdpro_kevin: In the cookbook, the globalconfig is attribute :http_caching, :kind_of => [TrueClass, FalseClass], :default => nil
[2014-07-01 22:59:05 -0400] coderanger: but I think that has colored things more than it should
[2014-07-01 22:59:08 -0400] holoway: spheromak: we have hired the vast majority of open source contributors
[2014-07-01 22:59:13 -0400] spheromak: yeap
[2014-07-01 22:59:21 -0400] holoway: (cause I can, and they do good work)
[2014-07-01 22:59:31 -0400] spheromak: so I think that also makes the community as noah puts it look a bit one sided.
[2014-07-01 22:59:38 -0400] spheromak: when most of those folks have come from that pool
[2014-07-01 22:59:45 -0400] holoway: spheromak: I don't think its one sided - its changing
[2014-07-01 22:59:57 -0400] holoway: we're 7 (!) years old
[2014-07-01 23:00:02 -0400] spheromak: I said look, wasn't a judgement :P
[2014-07-01 23:00:23 -0400] holoway: the health of a community is its ability to grow and change
[2014-07-01 23:00:30 -0400] wdpro_kevin: filthy_contracto not sure just comments I saw in the attributes
[2014-07-01 23:01:18 -0400] fujin: holoway: what makes you think new users don't suffer from a largely hidden-away RFC process?
[2014-07-01 23:01:32 -0400] fujin: to me it seems like that would introduce significant change, while allowing some review, sure, but without being aware of the RFC stuff
[2014-07-01 23:01:33 -0400] holoway: fujin: oh, I agree
[2014-07-01 23:01:39 -0400] fujin: like for example, I subscribed to the ml over a year ago
[2014-07-01 23:01:41 -0400] fujin: unsubscribed rather
[2014-07-01 23:01:44 -0400] fujin: I just haven't re-subbed it
[2014-07-01 23:01:47 -0400] fujin: I been meaning to, just haven't'
[2014-07-01 23:02:17 -0400] fujin: the \"quagmire of support vampires\" present on most mailing lists is a significant timesink
[2014-07-01 23:02:29 -0400] fujin: lol, smartparens-mode running in my IRC client
[2014-07-01 23:02:45 -0400] c_t: #chef is way worse for support vampires than the mailing list
[2014-07-01 23:02:51 -0400] holoway: fujin: I totally think we need to be more transparent as we grow (and that's been hard, because I don't believe in just forcing the world to obey my will)
[2014-07-01 23:02:52 -0400] c_t: lower barrier of entry I guess
[2014-07-01 23:03:08 -0400] holoway: fujin: but as a community member, you had no obligation to fulfill the support vampire
[2014-07-01 23:03:13 -0400] fujin: c_t: it was, at a time ,the quickest way to get a direct answer to a small question, of which Chef had lots of, I think
[2014-07-01 23:03:15 -0400] holoway: fujin: you, the human being, took on that role for a long time
[2014-07-01 23:03:29 -0400] fujin: holoway: no, I know, but now, having chosen, as a human, to not be subscribed to the mailing list
[2014-07-01 23:03:35 -0400] fujin: I'm sure I miss all kinds of useful information targeted to the community
[2014-07-01 23:03:39 -0400] holoway: you do
[2014-07-01 23:03:40 -0400] fujin: That doesn't surface to twitter/blahgs
[2014-07-01 23:03:43 -0400] holoway: totally
[2014-07-01 23:03:56 -0400] fujin: again, my choice
[2014-07-01 23:04:07 -0400] fujin: not saying that is the fault of chefinc
[2014-07-01 23:04:11 -0400] coderanger: holoway: I tried to engage you guys about what to do with this IRC channel, and you never responded. So I'm left with abandoning users vs. providing untold hours of free labor to support your customers.
[2014-07-01 23:04:13 -0400] holoway: (just to be clear, I'm all the way down with improving the way we communicate)
[2014-07-01 23:04:34 -0400] coderanger: And thats just a terrible choice
[2014-07-01 23:04:44 -0400] fujin: fwiw, I picked abandoning users
[2014-07-01 23:04:54 -0400] holoway: fujin: and guess what? they didn't get abandonded
[2014-07-01 23:04:59 -0400] holoway: ;)
[2014-07-01 23:05:14 -0400] c_t: mmm-hmm
[2014-07-01 23:05:17 -0400] holoway: coderanger - you want it both ways. on the one hand, a community of equals working together in harmony
[2014-07-01 23:05:18 -0400] fujin: hmm
[2014-07-01 23:05:24 -0400] c_t: then explain the box full of users I found in the alley behind my house
[2014-07-01 23:05:38 -0400] spheromak: filthy_contracto the repository attribute is a string, all none  etc that matches the repo config. The global config doesn't use that attribute in the default recipe.
[2014-07-01 23:05:50 -0400] holoway: coderanger - on the other, you want someone to react to your desire to do less support
[2014-07-01 23:05:59 -0400] spheromak: filthy_contracto: https://github.com/opscode-cookbooks/yum/blob/master/recipes/default.rb
[2014-07-01 23:06:02 -0400] holoway: coderanger - and you see that lack of reaction as a dire failing, which it isn't
[2014-07-01 23:06:32 -0400] coderanger: holoway: I would prefer the former, but if I have to live in a reality of chef being a (free) commercial product I need to behave accordingly
[2014-07-01 23:06:33 -0400] holoway: you, the human being, took that burden on, and you have not set it down, and you blame others for not holding up their end of the bargain that doesn't exist
[2014-07-01 23:06:54 -0400] holoway: because the community (including chef people) would absolutely answer questions in irc
[2014-07-01 23:07:07 -0400] holoway: but there is no *need*, because you literally answered every question in here today that wasn't about soccer
[2014-07-01 23:07:22 -0400] fujin: this is one of the reasons I made bawt btw
[2014-07-01 23:07:35 -0400] fujin: He's dead now, but the db probably exists somewhere. Could be worth a fresh start
[2014-07-01 23:07:43 -0400] fujin: Repetitive IRC-response support
[2014-07-01 23:07:46 -0400] coderanger: holoway: Hence sending for backup, "hey it would be great if y'all sent some people to share the load"
[2014-07-01 23:08:17 -0400] fujin: The search situation on docs.opscode.com has griefed me recently, for sure; and docs.getchef.com doesn't work?
[2014-07-01 23:08:18 -0400] coderanger: holoway: You are certainly under no obligation to do so, but the silence was rather deafening
[2014-07-01 23:08:26 -0400] holoway: coderanger: that's not how it works. it's not a competition to see who can type fastest on irc
[2014-07-01 23:08:38 -0400] fujin: I like to pretend when I receive no response from someone I care about, they've just overlooked it
[2014-07-01 23:08:58 -0400] fujin: Follow up with an IM, DM, or similar
[2014-07-01 23:09:15 -0400] fujin: I dunno if we can expect commercial support in this IRC channel
[2014-07-01 23:09:26 -0400] fujin: this channel existed right at the very beginning, most of the support has always been from contributors or users
[2014-07-01 23:09:36 -0400] holoway: fujin: many of whom became employees
[2014-07-01 23:09:56 -0400] fujin: I wonder..
[2014-07-01 23:10:02 -0400] holoway: communities work because people build them
[2014-07-01 23:10:12 -0400] filthy_contracto: spheromak: Right, but we've tried setting it to 'none', true, false and the value is not set in /etc/yum.conf
[2014-07-01 23:10:26 -0400] spheromak: holoway: to be fair there is an ammount of stewardship that has to be taken on.
[2014-07-01 23:10:30 -0400] coderanger: And yet you've benefited as a company (disproportionately to me) on Chef's reputation for community support
[2014-07-01 23:10:43 -0400] fujin: filthy_contracto: what version of yum cookbook are you using, 'knife cookbook show yum'
[2014-07-01 23:10:51 -0400] holoway: spheromak: which we do a ton of, and we continue to do
[2014-07-01 23:10:58 -0400] holoway: spheromak: and I'm not saying we can't improve
[2014-07-01 23:11:04 -0400] holoway: spheromak: (we should)
[2014-07-01 23:11:14 -0400] spheromak: filthy_contracto: this is on a repo resource ?
[2014-07-01 23:11:20 -0400] filthy_contracto: fujin: 3.2.2
[2014-07-01 23:11:33 -0400] filthy_contracto: spheromak: No, this is /etc/yum.conf
[2014-07-01 23:11:36 -0400] spheromak: filthy_contracto: can you give us some gists /pasties of your cookbook wrapping/using the yum cook. prob be easier to diagnose
[2014-07-01 23:12:24 -0400] filthy_contracto: spheromak: We are just doing - include_recipe 'yum'
[2014-07-01 23:12:33 -0400] holoway: coderanger: has Chef Software or Opscode ever asked you to provide free support in IRC to ensure my corporate success?
[2014-07-01 23:12:34 -0400] spheromak: filthy_contracto: i just said that the default recipe in yum cook does not set that attribute in the global config: https://github.com/opscode-cookbooks/yum/blob/master/recipes/default.rb see the golbal_config defaults in the yum cookbook.
[2014-07-01 23:13:14 -0400] filthy_contracto: spheromak: My bad. So then, how do we go about overriding those global_configs?
[2014-07-01 23:13:16 -0400] holoway: coderanger: we have benefitted from it - but not because we're awful stewards and crappy vampires
[2014-07-01 23:13:24 -0400] digitalchild: heh
[2014-07-01 23:13:26 -0400] spheromak: filthy_contracto: redefine it in your wrapper.
[2014-07-01 23:13:29 -0400] wdpro_kevin: We love coderanger (next awesome chef)
[2014-07-01 23:13:33 -0400] coderanger: holoway: No, and yet you refer people to IRC for customer support in official emails despite no plan as a company to provide that support.
[2014-07-01 23:13:33 -0400] spheromak: or don't use yum::default
[2014-07-01 23:13:36 -0400] digitalchild: as a new comer i find community support is critical
[2014-07-01 23:13:42 -0400] spheromak: instead make your own recipe to set up globalconfig
[2014-07-01 23:13:44 -0400] holoway: digitalchild: me too
[2014-07-01 23:14:10 -0400] filthy_contracto: spheromak: Roger that
[2014-07-01 23:14:11 -0400] spheromak: filthy_contracto: I would just make my own yum wrapper cook that sets global, and doesn't call include_recipe on yum
[2014-07-01 23:14:19 -0400] digitalchild: and im here because i believe that helping the community will help me learn this stuff and keep the community / have this for free fee
[2014-07-01 23:14:26 -0400] coderanger: holoway: You can't say "well it was never explicitly requested" as if you are unaware where this support comes from
[2014-07-01 23:14:42 -0400] spheromak: filthy_contracto: that might also be a bug, considering that attribute exists, but isn't being used in global config. not sure
[2014-07-01 23:14:51 -0400] holoway: coderanger: I'm not unaware - it comes from human beings, volunteering their time and attention, their most valuable things, to help each other
[2014-07-01 23:15:02 -0400] spheromak: someara: is http_caching attrib in yum supposed to effect global config ?
[2014-07-01 23:15:03 -0400] holoway: coderanger: which you do, every day, and that's amazing
[2014-07-01 23:15:28 -0400] holoway: coderanger: it's the leap from "I'm holding up the world" to "you guys wont' help" that is confusing
[2014-07-01 23:16:05 -0400] spheromak: coderanger: burnout ?
[2014-07-01 23:16:16 -0400] Corey: Comradephate: Traitor. :-p
[2014-07-01 23:16:21 -0400] fujin: maybe attempting to take a data-driven approach to measuring support on IRC from coderanger's perspective? he assumes, without his support, there will be none
[2014-07-01 23:16:25 -0400] fujin: I read something regarding measurement
[2014-07-01 23:16:28 -0400] coderanger: holoway: I want to continue providing the support but I am now in a position where I am underbidding by own professional services, something I'm sure you know can be infuriating
[2014-07-01 23:16:41 -0400] coderanger: fujin: stats are up at coderanger.net/irc
[2014-07-01 23:16:47 -0400] fujin: strange, I've always found chef irc support a great way to find new clients.
[2014-07-01 23:16:50 -0400] Comradephate: Corey: I was so confused when I saw I had a mention in this channel
[2014-07-01 23:16:52 -0400] fujin: Not so much under-bidding, but pre-sales.
[2014-07-01 23:16:53 -0400] digitalchild: i think there is a limit to how much one can help
[2014-07-01 23:16:56 -0400] holoway: coderanger: if you want advice from me on how to build an amazing consulting company, I'm happy to give it
[2014-07-01 23:17:08 -0400] digitalchild: cookbooks and stuff yeah, but if someone needs their environment setup and they can't follow a how to
[2014-07-01 23:17:16 -0400] digitalchild: i think you're within your right to tell them to pay for it
[2014-07-01 23:17:17 -0400] holoway: coderanger: and stoked to have you making money on chef, just like I am for every other company that does it
[2014-07-01 23:17:27 -0400] spheromak: yea fujin & coderanger both your support motivations are/were comercially backed :D
[2014-07-01 23:17:29 -0400] holoway: fujin: Noah answers way more questions here than anyone else
[2014-07-01 23:17:40 -0400] spheromak: fujin: yea for sure hes like the dude here
[2014-07-01 23:17:45 -0400] holoway: the supposition that if he stopped nobody would help
[2014-07-01 23:17:48 -0400] holoway: is not true
[2014-07-01 23:18:02 -0400] holoway: but it is absolutley true that, if noah answers every question, noah answered every question
[2014-07-01 23:18:04 -0400] holoway: :)
[2014-07-01 23:18:16 -0400] spheromak: holoway: to be fair, I dunno that any one person could do as much as coderanger does.
[2014-07-01 23:18:22 -0400] coderanger: I don't think it would stop, I think the quality of support would drop significantly and would take a long while to recover
[2014-07-01 23:18:27 -0400] holoway: spheromak: I don't know that coderanger should do as much as coderanger does
[2014-07-01 23:18:32 -0400] fujin: would it organically recover on its own?
[2014-07-01 23:18:36 -0400] spheromak: holoway: coderanger  I agree with that :)
[2014-07-01 23:18:38 -0400] fujin: or spiral out of control into destruction
[2014-07-01 23:18:56 -0400] jblack: What's necessary to maintain the status quo?  Donations?
[2014-07-01 23:19:03 -0400] digitalchild: id like to point out 2 other channels ive spent a lot of time in, postgresql and gitlab
[2014-07-01 23:19:09 -0400] jblack: support contracts?
[2014-07-01 23:19:11 -0400] digitalchild: postgres is more active in support than here, gitlab is silent
[2014-07-01 23:19:22 -0400] coderanger: and in the interim I'm very uncomfortable with ChefInc send users to shout questions in to the void. Is that my problem? No, and yet I still feel a responsibility to the community
[2014-07-01 23:19:24 -0400] digitalchild: and gitlab has more people in it than here!
[2014-07-01 23:19:28 -0400] spheromak: digitalchild: more than 50% of my chans are crickets
[2014-07-01 23:19:37 -0400] drogoh: I used to idle in #couchbase and it was silent most of the time
[2014-07-01 23:19:42 -0400] fujin: this has always been a reaaly high traffic support channel
[2014-07-01 23:19:43 -0400] coderanger: You can very well say thats the problem and I should just feel no such responsibility, but I'm not the only one in this situation
[2014-07-01 23:20:01 -0400] spheromak: fujin: yea it's been a good chan IMO, tho i haven't been super active in ~12 months
[2014-07-01 23:20:03 -0400] coderanger: and if all such users leave, it doesn't bode well for the community
[2014-07-01 23:20:04 -0400] digitalchild: spheromak: yeah i think if you're going to provide an avenue for support provide something, whether is active humans or bots with loads of docs
[2014-07-01 23:20:12 -0400] fujin: spheromak: me too!
[2014-07-01 23:20:27 -0400] spheromak: digitalchild: there used to be a bot that fujin wrote. I dunno whatever happened to bawt
[2014-07-01 23:20:42 -0400] spheromak: prob mostly it pointed to wiki pages which are depricated
[2014-07-01 23:20:49 -0400] holoway: coderanger: my point is this - you feel that responsibility because you decided to
[2014-07-01 23:20:50 -0400] fujin: The original AWS account it was running on at Opscode was termiante, I think :) and yeah, it was the old confluence wiki
[2014-07-01 23:21:04 -0400] holoway: coderanger: and I appreciate it, as does everyone in IRC, obviously
[2014-07-01 23:21:29 -0400] holoway: coderanger: as someone with the resources to sustain it, I can tell you now, if suddely IRC was a wasteland where nobody was helped, I would make sure they were helped
[2014-07-01 23:21:37 -0400] heathsnow: I certainly appreciate all the help here :)
[2014-07-01 23:21:44 -0400] holoway: coderanger: but the channel is, in fact, a community
[2014-07-01 23:21:48 -0400] holoway: notice you have ops
[2014-07-01 23:22:03 -0400] holoway: and so does fujin
[2014-07-01 23:22:28 -0400] coderanger: holoway: I would have to check, I don't know if I had ops before employment at Opscode
[2014-07-01 23:22:39 -0400] holoway: coderanger: you did if you were an MVP
[2014-07-01 23:22:53 -0400] holoway: cause that's how we rolled
[2014-07-01 23:22:59 -0400] holoway: back when all we did was build chef
[2014-07-01 23:23:09 -0400] holoway: and it was all racing stripes and high fives
[2014-07-01 23:23:14 -0400] spheromak: lol
[2014-07-01 23:23:16 -0400] holoway: which was fucking awesome, by the way
[2014-07-01 23:23:25 -0400] sauraus: So back to a Chef question :) can I iterate of an encrypted data bag like this: data_bag(new_resource.data_bag).each do |id| ?
[2014-07-01 23:23:25 -0400] spheromak: and fujin's bong
[2014-07-01 23:23:27 -0400] spheromak: ;P
[2014-07-01 23:23:32 -0400] holoway: and its why I don't blame anyone for finding new places that they can do that shit
[2014-07-01 23:23:38 -0400] fujin: it looks like we gave you AOPS as the same time I gave bemu auto-voice
[2014-07-01 23:23:39 -0400] holoway: which is why so much of the chef ecosystem is an ecosystem, and not about chef
[2014-07-01 23:24:02 -0400] holoway: cause goiardi, for example, is fun as shit
[2014-07-01 23:24:08 -0400] spheromak: holoway: indeed
[2014-07-01 23:24:10 -0400] holoway: and as a community, that's the point
[2014-07-01 23:24:23 -0400] fujin: we are having lots of fun over in #go-chef land being nubs in a new language, forgetting our old ideals
[2014-07-01 23:24:26 -0400] fujin: unlearning our lessons
[2014-07-01 23:24:31 -0400] holoway: fujin: exactly!
[2014-07-01 23:24:33 -0400] spheromak: and breaking things
[2014-07-01 23:24:42 -0400] holoway: and as a chef community, we have room for all that
[2014-07-01 23:24:45 -0400] holoway: docker, and go, and crazy
[2014-07-01 23:24:50 -0400] holoway: that's what makes it worht doing at all
[2014-07-01 23:25:00 -0400] holoway: and I'm sorry that burden has weighed so heavily upon you
[2014-07-01 23:25:09 -0400] fujin: i htink there is a bigger picture here we are missing
[2014-07-01 23:25:13 -0400] fujin: it is not just coderanger's problem
[2014-07-01 23:25:31 -0400] holoway: fujin: absolutely - we have some systemic things we can (and are) addressing
[2014-07-01 23:25:32 -0400] fujin: he feels that way, but other non-vocal, non repressed, nuanced, diverse contributor/supporters probably feel the same way
[2014-07-01 23:25:37 -0400] coderanger: holoway: All I can say to that is that you have to answer loyalty with loyalty if you want it to stay
[2014-07-01 23:25:50 -0400] fujin: ah. I see.
[2014-07-01 23:26:15 -0400] holoway: fujin: I'm not saying it's all wine and roses by any means - we have to keep doing better and putting energy into it
[2014-07-01 23:26:21 -0400] holoway: fujin: and the conversation is how you do that
[2014-07-01 23:26:24 -0400] digitalchild: i think more docs would help
[2014-07-01 23:27:05 -0400] coderanger: holoway: I've tried having this conversation with you so many times, I know how much you want to see things improve and yet so little changes. Not out malice, but just inertia.
[2014-07-01 23:27:05 -0400] digitalchild: like a proper education centre with not just chef but also berks and docker and other stuff, cause there are so many different how tos and ways to do things
[2014-07-01 23:28:03 -0400] spheromak: coderanger: what needs to change in your eyes ?
[2014-07-01 23:28:38 -0400] fujin: do the weekly/regular cookbook/code review hangouts still work?
[2014-07-01 23:28:51 -0400] coderanger: spheromak: I think making better use of the RFC system, adding non-employee commiters, and encouraging ecosystem investment from outside chefinc are all good starting places
[2014-07-01 23:29:01 -0400] coderanger: fujin: They are pretty much a ghost town at this point
[2014-07-01 23:29:12 -0400] fujin: I have never managed to attend one (at the right time)
[2014-07-01 23:29:18 -0400] fujin: and find reviewing them alone to be.. not worth the time
[2014-07-01 23:29:30 -0400] fujin: can't digest it well, personally
[2014-07-01 23:29:31 -0400] coderanger: fujin: btm still gets his butt in a seat every time though, and for that I'm thankful
[2014-07-01 23:29:39 -0400] fujin: :-)
[2014-07-01 23:29:46 -0400] fujin: that lumberjack looking mother fucker
[2014-07-01 23:30:05 -0400] kisoku_: btm isn't a lumberjack ?
[2014-07-01 23:30:08 -0400] fujin: so much of my pain with the chef community is self inflicted, from dis-interest over time
[2014-07-01 23:30:31 -0400] fujin: throw toys into the void
[2014-07-01 23:30:37 -0400] spheromak: ohai kisoku_
[2014-07-01 23:32:10 -0400] fujin: coderanger: what in particular regarding the RFC proposals system would be changed to have more involvement with the wider community?
[2014-07-01 23:32:12 -0400] holoway: just for the record, I'm +1 on all those things
[2014-07-01 23:32:26 -0400] holoway: supermarket was built with a very different model of collaboration preciesly as a test run
[2014-07-01 23:32:46 -0400] holoway: and yes, the challenges of pivoting a company's interactions are different than the purely community ones
[2014-07-01 23:33:19 -0400] coderanger: fujin: I would like to see it behave more like PEPs, if you have an idea for a big change to Chef you write up an RFC, it gets discussed on a mailing list, update the proposal with feedback, continue until either there is agreement or a BDFL says :thumbsup:
[2014-07-01 23:33:36 -0400] fujin: do you have like an experimental/feature flag branch that runs constnatly, with all of the RFCs afvailable for testing?
[2014-07-01 23:33:39 -0400] fujin: hmm..
[2014-07-01 23:33:51 -0400] coderanger: holoway: I note that the Supermarket Weekly Update emails stopped after only a few weeks :-/
[2014-07-01 23:34:04 -0400] fujin: I am not familiar with PEPs; how does that differ from the current process?
[2014-07-01 23:34:04 -0400] coderanger: holoway: And dev chatter for that was moved into an even less obvious location (gitter)
[2014-07-01 23:34:05 -0400] holoway: coderanger: :)
[2014-07-01 23:34:08 -0400] fujin: I think the supermarket went to gitter right?
[2014-07-01 23:34:13 -0400] fujin: yeah, I stopped tracking it at that stage
[2014-07-01 23:34:28 -0400] spheromak: coderanger: i dun mind the gitter discussion
[2014-07-01 23:34:32 -0400] spheromak: i follow it there
[2014-07-01 23:34:43 -0400] coderanger: fujin: Right now discussion happens on the issue/PR, not a mailing list, so only those that opt-in will ever see it
[2014-07-01 23:35:00 -0400] spheromak: but to be fair i've also been ignoring chef ml mostly.. unless something interesting in subject
[2014-07-01 23:35:04 -0400] holoway: again, though - how many ways do you want to have it? you seriously are saying that because the conversation happened in a place you didn't like it wasn't transparent?
[2014-07-01 23:35:05 -0400] coderanger: fujin: Also few things ever get RFCs, mostly seems to be for contractors working with ChefInc
[2014-07-01 23:35:26 -0400] fujin: hmm
[2014-07-01 23:35:27 -0400] holoway: but regardless
[2014-07-01 23:35:27 -0400] spheromak: coderanger: and I watch the chef repo, but not as close as ranjib :D
[2014-07-01 23:35:37 -0400] coderanger: holoway: It isn't that its a place I dislike, it was a new comms system and I don't know how many people knew that
[2014-07-01 23:35:40 -0400] holoway: lets do the right things to make it easier
[2014-07-01 23:35:58 -0400] fujin: We have summit coming up soon, yes?
[2014-07-01 23:36:02 -0400] holoway: yep
[2014-07-01 23:36:14 -0400] holoway: fujin: although we shouldn't wait that long
[2014-07-01 23:36:21 -0400] c_t: and not right before the election, even
[2014-07-01 23:36:29 -0400] fujin: :-)
[2014-07-01 23:36:51 -0400] fujin: I only just remembered. Must start making preparations now, if I have the slightest hope of being able to attend
[2014-07-01 23:37:08 -0400] juliancdunn: at least it won't be during re:invent this year!
[2014-07-01 23:37:31 -0400] chip-: HALLELUJAH
[2014-07-01 23:37:47 -0400] c_t: juliancdunn: two years ago it was literally a week or so before the general election
[2014-07-01 23:37:56 -0400] spheromak: fujin: you should def go
[2014-07-01 23:38:09 -0400] fujin: It's not a choice I can make alone, without financial support, it will be unattainable.
[2014-07-01 23:38:14 -0400] juliancdunn: c_t: bah, that pesky thing :-)
[2014-07-01 23:38:21 -0400] fujin: It cost me close to $5kUS for the full trip last time I attended
[2014-07-01 23:38:27 -0400] spheromak: fujin: find a job that will send you :P
[2014-07-01 23:38:35 -0400] fujin: Duhh.
[2014-07-01 23:38:49 -0400] c_t: or get a canoe
[2014-07-01 23:38:59 -0400] spheromak: yes
[2014-07-01 23:39:06 -0400] spheromak: and a volleyball
[2014-07-01 23:39:10 -0400] spheromak: ...
[2014-07-01 23:39:26 -0400] fujin: Solar powered wing-suit.
[2014-07-01 23:39:40 -0400] teshian:  Does notifies immediately execute before or after stuff in the block?
[2014-07-01 23:39:48 -0400] coderanger: Last year I could only attend thanks to airline miles and a friends couch to crash on, and the latter is now used it
[2014-07-01 23:39:52 -0400] fujin: The notify fires at convergence time when the resource updates.
[2014-07-01 23:41:38 -0400] teshian: @fujin I need to shutdown a windows service (not rabbitmq) before i update rabbitmq, but only if a new version is available
[2014-07-01 23:41:56 -0400] fujin: notify the restart from whatever resource is preforming the upgrade
[2014-07-01 23:42:51 -0400] chip-: teshian: you can say notifies :restart, "service[name]", :immediately
[2014-07-01 23:43:27 -0400] fujin: oh, I misunerstand the question, yes the default timing is :delayed (end of resource collection), can be switched to :immediate, to fire when the resource updates during convergence.
[2014-07-01 23:43:31 -0400] fujin: sorry sorry :-)
[2014-07-01 23:43:43 -0400] teshian: So notifies :restart, "service[name]", :immediately would execute before windows_package . action :remove
[2014-07-01 23:44:19 -0400] teshian: windows_package 'RabbitMQ Server' do
[2014-07-01 23:44:20 -0400] teshian:   version '3.1.5'
[2014-07-01 23:44:21 -0400] teshian:   action :remove
[2014-07-01 23:44:22 -0400] teshian: end
[2014-07-01 23:44:28 -0400] chip-: no, notification would fire after that's done.
[2014-07-01 23:45:10 -0400] teshian: Yeah the other service doesnt like rabbit being ripped out while it is running
[2014-07-01 23:45:17 -0400] chip-: gofig
[2014-07-01 23:45:43 -0400] teshian: Ok, I will attack this a little differently
[2014-07-01 23:45:50 -0400] teshian: Thanks
[2014-07-01 23:46:25 -0400] chip-: So your flow is: Does Rabbit need upgrading? If so, stop service, then upgrade Rabbit, start rabbit, start service.
[2014-07-01 23:47:17 -0400] teshian: Yeah,
[2014-07-01 23:47:31 -0400] teshian: so need to work out Rabbit need upgrading"
[2014-07-01 23:48:34 -0400] josephholsten: oh joy of joys
[2014-07-01 23:49:10 -0400] josephholsten: attempting to override with nil
[2014-07-01 23:49:11 -0400] teshian: Windows makes things hard
[2014-07-01 23:50:09 -0400] teshian: Giving up for the moment, will come back to this later
[2014-07-01 23:53:03 -0400] c_t: so, this is kind of interesting
[2014-07-01 23:53:17 -0400] c_t: the test was very basic, and needs more work
[2014-07-01 23:54:28 -0400] c_t: but I did a goiardi test creating 35,000 simple nodes, clients, environments, and data bags to see how search did
[2014-07-01 23:54:42 -0400] c_t: *35,000 of each
[2014-07-01 23:54:57 -0400] fujin: exciting!
[2014-07-01 23:55:05 -0400] c_t: not only did just fine, but it only used 138MB RAM or so
[2014-07-01 23:55:16 -0400] juliancdunn: c_t: awesome work with goiardi - if you ever wanted to run a Chef server on Windows, here's your chance :0
[2014-07-01 23:55:32 -0400] c_t: had to sleep for 1 second to let the indexing finish :-/
[2014-07-01 23:56:11 -0400] c_t: juliancdunn: mind you, I've never had that desire, but I'm sure someone does
[2014-07-01 23:56:51 -0400] juliancdunn: Start > Chef > Cookbook > Upload  </troll>
[2014-07-01 23:57:20 -0400] c_t: surprisingly it's the postgres lib blocking plan9 and dragonfly bsd builds
[2014-07-01 23:57:33 -0400] juliancdunn: I guess there's no 'Start' now, so replace that with 'mash keyboard wildly until Metro comes up'
[2014-07-01 23:57:48 -0400] juliancdunn: plan9! hahaha
[2014-07-01 23:57:54 -0400] c_t: (fixing the situation isn't exactly a high priority)
[2014-07-01 23:58:05 -0400] juliancdunn: the Plan9 user is eagerly awaiting it
[2014-07-01 23:58:18 -0400] c_t: I'm a little curious which has more users: plan9 or Dragonfly BSD
[2014-07-01 23:58:49 -0400] juliancdunn: I'm shocked Dragonfly is still around. I mean, I loved FreeBSD 4.x just as much as the next person, but really
[2014-07-01 23:58:52 -0400] c_t: juliancdunn: for whatever reason, plan9 is supported by the native go compiler
[2014-07-01 23:59:05 -0400] juliancdunn: c_t: it must be a very long troll
[2014-07-01 23:59:36 -0400] juliancdunn: probably puts the compiled objects on the Andrew File System
[2014-07-01 23:59:42 -0400] c_t: I admit I haven't tried very hard to find out, but I'm not even sure MySQL or Postgres are available on plan9

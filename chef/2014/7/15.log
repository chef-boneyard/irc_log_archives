[2014-07-15 00:02:01 -0400] _pd_: thanks @coderanger :)
[2014-07-15 00:02:08 -0400] _pd_: re: merge
[2014-07-15 00:02:41 -0400] coderanger: _pd_: "Wait, is does _what_?" :)
[2014-07-15 00:02:58 -0400] _pd_: ?
[2014-07-15 00:03:06 -0400] _pd_: i'm referring to https://github.com/poise/application/pull/44
[2014-07-15 00:03:46 -0400] coderanger: Yeah, I was just surprised it was set to true >_<
[2014-07-15 00:03:52 -0400] _pd_: ah
[2014-07-15 00:03:53 -0400] coderanger: I only took back maintenance recently
[2014-07-15 00:04:34 -0400] coderanger: shallow_clone shouldn't really even be an option
[2014-07-15 00:04:40 -0400] coderanger: I can't think of any case where it would be correct
[2014-07-15 00:04:56 -0400] coderanger: If your repo is so big that this is a problem STOP USING GIT FOR DEPLOYMENTS
[2014-07-15 00:07:57 -0400] Damm: shallow clone a lot of people do
[2014-07-15 00:08:05 -0400] Damm: but I prefer to git prune
[2014-07-15 00:08:12 -0400] Damm: or specify the --depth
[2014-07-15 00:08:21 -0400] Damm: but without understanding what depth does; what the cons are
[2014-07-15 00:08:24 -0400] Damm: it's not trivial
[2014-07-15 00:08:56 -0400] coderanger: Damm: I'll stick to the point of you shouldn't be using git for code pushes by that point :)
[2014-07-15 00:09:01 -0400] Damm: sadly people are very opinionated about deploy semantics once they make their own path
[2014-07-15 00:09:15 -0400] gchristensen: git push -> make a build artifact -> push artifact to artifact service -> deploy artifact
[2014-07-15 00:09:18 -0400] Damm: coderanger, actually a better point is each branch should be a single commit to push out your specific change
[2014-07-15 00:09:32 -0400] gchristensen: wat?
[2014-07-15 00:09:34 -0400] Damm: coderanger, with rebasing and bad merges; it's a yellow bus with people licking on the windows if you do it wrong
[2014-07-15 00:09:38 -0400] gchristensen: wtf
[2014-07-15 00:10:34 -0400] coderanger: Damm: Thats different, the reason to use shallow clones is because your history is so big that transfering it on your servers takes too long (or too much space, whatever)
[2014-07-15 00:10:45 -0400] coderanger: and if that really is a problem, the solution isn't shallow clones
[2014-07-15 00:13:35 -0400] Damm: coderanger, --depth
[2014-07-15 00:13:36 -0400] Damm: same thing
[2014-07-15 00:13:51 -0400] Damm: and really that's only a problem on the first clone
[2014-07-15 00:14:21 -0400] Damm: so you have a cached copy that you use as your sacred cow; git fetch git rebase and get it up to date (or git merge, depending how you prefer)
[2014-07-15 00:14:37 -0400] Damm: and then basically copy that sacred cow to your destination and change to the sha/branch in the destination
[2014-07-15 00:14:50 -0400] Damm: it can take about 2-3s on a really fast disk on a 600meg repo
[2014-07-15 00:15:23 -0400] Damm: but if you prefer to throw out the sacred cow (cached copy) and stop using timestamped releases and just a rolling method you can still go back in time and forward
[2014-07-15 00:15:27 -0400] Damm: you just have to be more careful
[2014-07-15 00:19:05 -0400] wdpro_kevin: anyone have a quick way to append to an attribute that is an array?
[2014-07-15 00:19:27 -0400] gchristensen: wdpro_kevin: are you aware that arrays are highly discouraged in chef?
[2014-07-15 00:19:57 -0400] wdpro_kevin: ahh coderanger taught me that!!
[2014-07-15 00:20:02 -0400] wdpro_kevin: https://coderanger.net/arrays-and-chef/
[2014-07-15 00:20:21 -0400] coderanger: arrays in attributes, not in general :)
[2014-07-15 00:20:34 -0400] wdpro_kevin: how soon we forget how painful that was in the past
[2014-07-15 00:52:41 -0400] Damm: gchristensen, why is that?
[2014-07-15 00:53:26 -0400] Damm: i mean other than that blog post; which is basically common sense I thought
[2014-07-15 00:54:35 -0400] gchristensen: I mean, that blog post pretty well outlines it
[2014-07-15 00:56:03 -0400] Damm: gchristensen, but that's really nonsense.  I mean any early Chef developer will try different ways to describe it
[2014-07-15 00:56:06 -0400] Damm: and falter
[2014-07-15 00:56:23 -0400] gchristensen: Damm: I don't follow what you're saying
[2014-07-15 00:56:25 -0400] Damm: I think hashes are overpopular and it can be obscene
[2014-07-15 00:56:42 -0400] Damm: sometimes i feel like an exorchist trying to pull data out
[2014-07-15 00:56:43 -0400] Damm: lol
[2014-07-15 00:56:43 -0400] gchristensen: I've never used an array in a chef recipe and had a good time
[2014-07-15 00:56:53 -0400] Damm: i have
[2014-07-15 00:56:54 -0400] Damm: tons
[2014-07-15 00:56:57 -0400] gchristensen: well
[2014-07-15 00:57:02 -0400] Damm: it's just proper use
[2014-07-15 00:57:04 -0400] Damm: vs bad use
[2014-07-15 00:57:04 -0400] gchristensen: then feel free to continue
[2014-07-15 00:57:15 -0400] gchristensen: what is the proper use?
[2014-07-15 00:57:20 -0400] Damm: gchristensen, most of what that blog post described were bad uses of arrays
[2014-07-15 00:57:24 -0400] Damm: very bad uses
[2014-07-15 00:57:51 -0400] gchristensen: the blog post only covers a *single* use case.
[2014-07-15 00:58:26 -0400] Damm: https://github.com/damm/diamond/blob/master/resources/configure.rb#L8
[2014-07-15 00:58:48 -0400] Damm: that to me is an acceptable case of an Array as your trying to specify multiple handlers to write with
[2014-07-15 00:58:55 -0400] Damm: they have no configuration whatsoever beyond that sense
[2014-07-15 00:58:57 -0400] gchristensen: what if you want to disable one?
[2014-07-15 00:59:20 -0400] Damm: you re-converge with what you want
[2014-07-15 00:59:47 -0400] Damm: Diamond is likely a bad example as of how it's configuration file and how the handlers are configured
[2014-07-15 00:59:55 -0400] gchristensen: its pretty tricky to remove an attribute later ov
[2014-07-15 00:59:59 -0400] Damm: but Arrays are fine provided your not doing something insane
[2014-07-15 01:00:08 -0400] Damm: well it's a lwrp; you write a wrapper for my cookbook
[2014-07-15 01:00:13 -0400] Damm: so it should be easy to update
[2014-07-15 01:00:21 -0400] gchristensen: its not "don't ever use arrays"
[2014-07-15 01:00:22 -0400] Damm: how you make it tuneable is you
[2014-07-15 01:00:28 -0400] gchristensen: but arrays as a node attribute
[2014-07-15 01:00:31 -0400] gchristensen: is the pain
[2014-07-15 01:00:39 -0400] Damm: gchristensen, well node attributes are hard
[2014-07-15 01:00:46 -0400] gchristensen: yes
[2014-07-15 01:00:49 -0400] Damm: as you inherit the Chef::Node
[2014-07-15 01:00:54 -0400] Damm: it gets delicate
[2014-07-15 01:01:42 -0400] gchristensen: exactly the point of the blog post
[2014-07-15 01:01:48 -0400] gchristensen: arrays are painful when dealing with node attributes
[2014-07-15 01:01:57 -0400] Damm: but the problem is when you blog saying don't do something; people stretch it
[2014-07-15 01:02:04 -0400] Damm: trying to see your wisdom
[2014-07-15 01:02:25 -0400] gchristensen: Damm: you could make your case to
[2014-07-15 01:02:36 -0400] gchristensen: Damm: coderanger about having it updated
[2014-07-15 01:03:29 -0400] coderanger: Damm: The issue is that deep merge has no easily usable semantics for arrays
[2014-07-15 01:03:47 -0400] coderanger: Damm: There is literally no way to fix that, the concept makes no sense
[2014-07-15 01:04:49 -0400] Damm: I use wrapper cookbooks heavily; I really dont' do a lot with nodes or data bags
[2014-07-15 01:05:06 -0400] Damm: I got burned with too many magical cookbooks
[2014-07-15 01:05:21 -0400] Damm: (see application cookbook)
[2014-07-15 01:05:52 -0400] coderanger: Damm: As long as you know you'll only every set the array in exactly one place, then yeah, they work fine
[2014-07-15 01:06:10 -0400] coderanger: but its easier to just recommend against them until you know ruby and chef well enough to break the rules :)
[2014-07-15 01:06:57 -0400] Damm: coderanger, that's kind of how i like to rule
[2014-07-15 01:07:19 -0400] Damm: and spenting 2years longer than I should have with oldchef
[2014-07-15 01:07:23 -0400] Damm: taught me a lot of dumb basics
[2014-07-15 01:16:53 -0400] luddite: Hi everyone
[2014-07-15 01:20:52 -0400] luddite: I work at www.melbourneitenterprise.com.au and am looking for a devops chef person for a full-time position located in Brisbane, Australia asap. If you are interested then please IM me. Details here : http://pastebin.com/ZLT1yN1K
[2014-07-15 01:23:43 -0400] Damm: hm don't we have a mailing list for that?
[2014-07-15 01:25:12 -0400] jbarnard: this is probably the wrong place to vent about this, but why is it so complicated to get the tags for the current instance in aws
[2014-07-15 01:26:30 -0400] Damm: jbarnard, how do you do it?
[2014-07-15 01:26:57 -0400] Damm: jbarnard, do you define the tags on kitchen ec2 create or create them via the api and expect chef to find them?
[2014-07-15 01:27:08 -0400] coderanger: luddite: Probably not the right place for that
[2014-07-15 01:27:20 -0400] Damm: coderanger, shrug there is no better?
[2014-07-15 01:27:39 -0400] coderanger: luddite: Even the Chef ML is really not going to help, just not many people from .au on it that I know of
[2014-07-15 01:27:49 -0400] Damm: I do
[2014-07-15 01:27:58 -0400] Damm: but he's busy
[2014-07-15 01:28:10 -0400] luddite: coderanger : Yep - I know. Gotta try though.
[2014-07-15 01:28:20 -0400] luddite: How are you coderanger?
[2014-07-15 01:29:03 -0400] jbarnard: @Damm I would like to assign them on instance creation via AWS console. Then read them in, and pass them to chef-client on first run. I can't find an easier way than assigning an IAM role and pulling it in through the API though.
[2014-07-15 01:29:29 -0400] Damm: jbarnard, you can get your tags through the api without an IAM role no?
[2014-07-15 01:29:52 -0400] Damm: but yeah as you boot them via the console or other methods tags are in the dark
[2014-07-15 01:30:25 -0400] Damm: jbarnard, are you expecting your tags to map?
[2014-07-15 01:31:43 -0400] Damm: hmm no it's not in that api; strange I would expect it was
[2014-07-15 01:31:50 -0400] Damm: that will make tags a pain in the ..
[2014-07-15 01:31:53 -0400] jbarnard: @Damm, Is there a way to make them map automatically? I'm currently trying to pull via API then save to a first-run.json and then call chef-client with that file.
[2014-07-15 01:32:05 -0400] Damm: jbarnard, kitchen ec2 server create --tag
[2014-07-15 01:32:24 -0400] jbarnard: kitchen would be a command that runs on a server as opposed to the node?
[2014-07-15 01:32:30 -0400] Damm: err
[2014-07-15 01:32:31 -0400] Damm: knife
[2014-07-15 01:32:33 -0400] coderanger: jbarnard: You have to get your instance-id from the metadata server and then query the EC2 API for them
[2014-07-15 01:32:36 -0400] Damm: sorry lol i'm so used to running kitchen
[2014-07-15 01:32:49 -0400] coderanger: jbarnard: You can use an IAM role to grant access for the second query
[2014-07-15 01:32:57 -0400] jbarnard: thanks coderanger, that's basically what I'm doing now
[2014-07-15 01:33:17 -0400] Damm: jbarnard, knife ec2 server create -T bob=true,f=false
[2014-07-15 01:33:41 -0400] jbarnard: I don't think I can use knife, instance creation happens in the aws console.
[2014-07-15 01:33:45 -0400] jbarnard: correct me if I'm wrong
[2014-07-15 01:33:52 -0400] jbarnard: I'm new at this.
[2014-07-15 01:34:02 -0400] Damm: well can you adopt using knife?
[2014-07-15 01:34:06 -0400] Damm: instead of the console?
[2014-07-15 01:34:19 -0400] Damm: it uses fog so you will need just your SECRET and ACCESS key
[2014-07-15 01:34:32 -0400] jbarnard: no, i'm trying to make this as easy to use for non-technical people, as well as for autoscaling
[2014-07-15 01:34:48 -0400] Damm: good luck for autoscaling as that won't work
[2014-07-15 01:34:58 -0400] jbarnard: why's that?
[2014-07-15 01:35:00 -0400] coderanger: Damm: It works fine ...
[2014-07-15 01:35:07 -0400] coderanger: Its not that useful, but it works just fine
[2014-07-15 01:35:09 -0400] Damm: within reason
[2014-07-15 01:35:30 -0400] coderanger: jbarnard: You'll have to embed this logic in the cloud-init script
[2014-07-15 01:35:34 -0400] Damm: coderanger, i've never had a autoscaling experience that worked as I expected
[2014-07-15 01:35:41 -0400] jbarnard: coderanger, can you elaborate why it isn't useful?
[2014-07-15 01:35:47 -0400] Damm: you also have to bring in the whole bootstrap process into the startup
[2014-07-15 01:36:02 -0400] Damm: so the user-data or init script whatever takes it up; will find the validation key connect to the hosted
[2014-07-15 01:36:04 -0400] coderanger: jbarnard: mostly because the scaling model used by Amazon ASGs is too slow to be useful on spiky traffic
[2014-07-15 01:36:05 -0400] Damm: and converge
[2014-07-15 01:36:21 -0400] jbarnard: ah, okay. thanks.
[2014-07-15 01:36:25 -0400] coderanger: jbarnard: If you want to automate all of this, you'll need to use cloudformation or something similar
[2014-07-15 01:36:27 -0400] Damm: coderanger, the better reason is it's reactionary.
[2014-07-15 01:36:40 -0400] Damm: it reacts to cloudwatch metrics which are only sampled every 1 minute or (5?) now
[2014-07-15 01:36:48 -0400] coderanger: Damm: Yes, thats another way to say the same thing, their control model is too laggy
[2014-07-15 01:36:50 -0400] Damm: so it can take a few for it to be aware
[2014-07-15 01:36:55 -0400] coderanger: See also, Netflix SCryer
[2014-07-15 01:36:56 -0400] Damm: yep
[2014-07-15 01:37:06 -0400] jbarnard: I'm mostly only using ASG's for restarting instances that die, I don't really need it for the spikey traffic
[2014-07-15 01:37:09 -0400] Damm: fortunately I don't do much aws anymore
[2014-07-15 01:37:29 -0400] coderanger: jbarnard: For that it works fine, but you can see lag of 10+ minutes before things get restarted :-(
[2014-07-15 01:37:40 -0400] Damm: hmmm I can pay a noc monkey
[2014-07-15 01:37:42 -0400] Damm: to handle that
[2014-07-15 01:37:43 -0400] Damm: faster
[2014-07-15 01:37:43 -0400] Damm: ?
[2014-07-15 01:37:44 -0400] Damm: ;)
[2014-07-15 01:37:55 -0400] coderanger: But 10m is better than paging someone
[2014-07-15 01:37:57 -0400] coderanger: so ::shrug::
[2014-07-15 01:37:58 -0400] jbarnard: coderanger, thanks for the info!
[2014-07-15 01:38:01 -0400] coderanger: Caveat emptor :)
[2014-07-15 01:38:23 -0400] coderanger: jbarnard: If you want to get really fancy you could make an ohai plugin to ingest the tags :)
[2014-07-15 01:38:37 -0400] Damm: coderanger, that's why I hire noc monkeys
[2014-07-15 01:38:49 -0400] Damm: coderanger, they want to be sysadmins someday so they need to learn the trade; they get paid a lot less
[2014-07-15 01:38:52 -0400] Damm: and love the odd hours
[2014-07-15 01:39:03 -0400] jbarnard: coderanger, hahaha, that sounds like its fairly complicated
[2014-07-15 01:39:09 -0400] Damm: because if the employee fails you can yell at the employee
[2014-07-15 01:39:11 -0400] Damm: yelling at an api is deaf
[2014-07-15 01:39:21 -0400] coderanger: jbarnard: Its the same code, just in different places
[2014-07-15 01:39:50 -0400] jbarnard: ah, fair enough, is my use case that unique that no one has done it before?
[2014-07-15 01:40:19 -0400] jbarnard: I feel like i'm missing an understanding of how chef should be used with aws, since this isn't too well documented out there
[2014-07-15 01:40:37 -0400] coderanger: jbarnard: No, it is just a painful task and I know of no one that has packaged it up nicely
[2014-07-15 01:40:49 -0400] coderanger: jbarnard: Tags in AWS are really mostly a billing-related feature :-/
[2014-07-15 01:41:07 -0400] coderanger: jbarnard: This is why CloudFormation invented its own metadata system for cfn-init
[2014-07-15 01:41:09 -0400] Damm: for my customers tags are a way to describe the instance to everyone
[2014-07-15 01:41:18 -0400] Damm: so that way the accounting lady knows what's critical
[2014-07-15 01:41:19 -0400] Damm: and what isn't
[2014-07-15 01:41:34 -0400] coderanger: Yes, but specifically EC2 doesn't consider tags to be part of the instance metadata
[2014-07-15 01:41:49 -0400] coderanger: So you can cross-rig it, but its just annoying as you've noticed
[2014-07-15 01:41:49 -0400] jbarnard: ya, I was kind of shocked when I found out I couldn't pull tags from meta-data
[2014-07-15 01:42:02 -0400] jbarnard: thanks for all your help guys
[2014-07-15 01:42:05 -0400] coderanger: jbarnard: Thats when you know you are really down the AWS rabbit hole :-(
[2014-07-15 01:43:56 -0400] Damm: and chef tags
[2014-07-15 01:43:59 -0400] Damm: and ec2 tags are not the same
[2014-07-15 01:44:02 -0400] Damm: i bet
[2014-07-15 01:44:08 -0400] coderanger: Not remotely related
[2014-07-15 01:44:29 -0400] Damm: yum
[2014-07-15 01:45:24 -0400] coderanger: Grr, I think I lost the decryption key for something
[2014-07-15 01:46:42 -0400] Damm: so here's a dumb hardware question; client of mine has a Dell R410 and we slapped in 4 SSD's and took them out of raid (JBOD) the backplane seems to be only push 750mb/s write total and as you write to 2 or 3 or 4 disks at once saturates the write speed?
[2014-07-15 01:47:06 -0400] Damm: and if you think about that question that's why we went to JBOD; having them in a RAID-10 was miserable slow because we kept saturating all 4 disks at once
[2014-07-15 01:47:13 -0400] digitalchild: which card is it plugged into?
[2014-07-15 01:47:14 -0400] digitalchild: perc?
[2014-07-15 01:47:20 -0400] Damm: into a dell backplane
[2014-07-15 01:47:28 -0400] digitalchild: chipset?
[2014-07-15 01:47:34 -0400] coderanger: Damm: Just use an EBS-optimized instance (trollface)
[2014-07-15 01:47:36 -0400] Damm: sec lemme find that part
[2014-07-15 01:47:42 -0400] digitalchild: coderanger: haha
[2014-07-15 01:47:56 -0400] digitalchild: Damm: i know the onboard dell stuff is usually pretty meh
[2014-07-15 01:48:08 -0400] digitalchild: my Perc 7 cards are pretty fast
[2014-07-15 01:48:15 -0400] Damm: looks like we're using the ICH10
[2014-07-15 01:48:16 -0400] Damm: controller
[2014-07-15 01:48:17 -0400] Damm: not a perf
[2014-07-15 01:48:19 -0400] Damm: perc*
[2014-07-15 01:48:20 -0400] digitalchild: heh
[2014-07-15 01:48:26 -0400] digitalchild: the ich10 is pretty rubbish i believe
[2014-07-15 01:48:31 -0400] digitalchild: id check to see what its limits are
[2014-07-15 01:48:34 -0400] Damm: well we originally had it on the perc
[2014-07-15 01:48:46 -0400] Damm: we were just horrified at the throughput
[2014-07-15 01:48:51 -0400] Damm: this is actually much more usable now
[2014-07-15 01:48:57 -0400] digitalchild: hmm, never had an issue with the Perc ..
[2014-07-15 01:49:08 -0400] Damm: sure it means you push data over to 4 disks which means I have to carefully scale it
[2014-07-15 01:49:17 -0400] Damm: as to not brown out the whole box or make 1 disk too slow
[2014-07-15 01:49:32 -0400] Damm: coderanger, you know what's sad? SSD EBS
[2014-07-15 01:49:48 -0400] Damm: 100$ for 75k i/ops and you can only get that for an instance maximum
[2014-07-15 01:49:51 -0400] Damm: per disk is a lot less
[2014-07-15 01:53:10 -0400] digitalchild: Damm: according to the googles looks like the ICH10 chipset peaks at around 660..
[2014-07-15 01:53:32 -0400] digitalchild: so the fact you're getting over 700 is impressive..
[2014-07-15 01:53:57 -0400] Damm: digitalchild, or disk cache
[2014-07-15 01:54:21 -0400] digitalchild: http://www.servethehome.com/intel-ich10r-660mbs-sata-limit-fact-fiction/ <-
[2014-07-15 01:54:35 -0400] digitalchild: looks like your drives are too fast for the controller
[2014-07-15 01:55:08 -0400] Damm: that's what we get for being cheap with Intel 530's
[2014-07-15 01:57:41 -0400] Damm: digitalchild, thanks for being able to answer btw; I didn't expect it
[2014-07-15 01:57:42 -0400] Damm: :)
[2014-07-15 01:58:24 -0400] digitalchild: no worries
[2014-07-15 01:58:26 -0400] digitalchild: ive got R810s
[2014-07-15 01:58:41 -0400] digitalchild: and have been using the r series machines for ages
[2014-07-15 01:59:05 -0400] Damm: I tend to run Dell and Supermicro typically
[2014-07-15 01:59:14 -0400] Damm: but I haven't really had to deal with hardware issues with Dell for years
[2014-07-15 01:59:20 -0400] Damm: none of the weird stuff
[2014-07-15 02:02:14 -0400] digitalchild: yeah ive been 100% dell for my gear for years
[2014-07-15 02:02:23 -0400] digitalchild: well for clients and servers, im still a mac fanboy :)
[2014-07-15 02:04:38 -0400] gchristensen: dells are pretty a-ok for servers
[2014-07-15 02:05:11 -0400] gchristensen: except for theirold DRAC shit
[2014-07-15 02:10:03 -0400] Damm: I have a love/hate relationship with dell
[2014-07-15 02:10:06 -0400] Damm: depends on the hardware bug I find
[2014-07-15 02:11:54 -0400] gchristensen: aye
[2014-07-15 02:12:19 -0400] gchristensen: all hardware has bugs
[2014-07-15 02:12:46 -0400] Damm: yep we had some LSI Megaraid's on a Dell hardware when I worked at Accretive; swapoff -a and the box would panic
[2014-07-15 02:12:49 -0400] Damm: fun stuff
[2014-07-15 02:12:56 -0400] digitalchild: heh
[2014-07-15 02:13:05 -0400] Damm: 1750 or 1650?
[2014-07-15 02:13:06 -0400] Damm: i forget
[2014-07-15 02:13:09 -0400] digitalchild: gchristensen: drac has saved my ass more than once !
[2014-07-15 02:13:22 -0400] Damm: I do tend to prefer Advocent Cyclades
[2014-07-15 02:13:24 -0400] Damm: over Drac
[2014-07-15 02:13:30 -0400] Damm: it's a 48port embedded console
[2014-07-15 02:13:37 -0400] digitalchild: yeah i have 4 physical machines
[2014-07-15 02:13:38 -0400] Damm: so you can hook up 48 serial ports (or vga)
[2014-07-15 02:13:39 -0400] digitalchild: and im cheap
[2014-07-15 02:13:48 -0400] Damm: meh that would be obscene for 4
[2014-07-15 02:13:50 -0400] digitalchild: my rack is so empty heh
[2014-07-15 02:13:51 -0400] Damm: but they do make them smaller
[2014-07-15 02:13:57 -0400] Damm: it's just nice because you can get backscroll
[2014-07-15 02:14:04 -0400] Damm: and if you buy the same pdu brand you can daisy chain them
[2014-07-15 02:14:10 -0400] Damm: and control the console/power and get real time power readings
[2014-07-15 02:14:16 -0400] Damm: kinda nice if your the remote type
[2014-07-15 02:15:19 -0400] gchristensen: digitalchild: well yes, IPMI is gerat, but the DRAC I was working against required WinXP with IE6 and ActiveX + Java
[2014-07-15 02:15:22 -0400] gchristensen: great*
[2014-07-15 02:15:38 -0400] digitalchild: gchristensen: eww, yeah the newer dracs work just fine on my os x box
[2014-07-15 02:15:40 -0400] digitalchild: or linux
[2014-07-15 02:15:45 -0400] digitalchild: still requires stupid java applet though..
[2014-07-15 02:15:48 -0400] gchristensen: yeah.
[2014-07-15 02:15:57 -0400] digitalchild: which is a virus in itself
[2014-07-15 02:16:08 -0400] gchristensen: that said, I don't /really/ want to ever touch hardware again
[2014-07-15 02:16:14 -0400] gchristensen: lol
[2014-07-15 02:16:16 -0400] digitalchild: im working on that
[2014-07-15 02:16:18 -0400] digitalchild: cloud ftw
[2014-07-15 02:16:33 -0400] gchristensen: or hire someone els eto deal with the hardware :P
[2014-07-15 02:16:45 -0400] digitalchild: yeah
[2014-07-15 02:17:58 -0400] Damm: how do you feel about the cloud post nsa though?
[2014-07-15 02:18:08 -0400] Damm: That's kind of my business now is to help people take back their data
[2014-07-15 02:18:16 -0400] Damm: and learn how to own your situation
[2014-07-15 02:18:27 -0400] luddite: taking back data++
[2014-07-15 02:18:29 -0400] Damm: I've been seeing a lot of people unwillling to trust US employee's
[2014-07-15 02:18:33 -0400] Damm: let alone trust the cloud
[2014-07-15 02:18:45 -0400] Damm: I've had a few customers actually say no because I am US based
[2014-07-15 02:18:59 -0400] gchristensen: Damm: well, what if your hardware has been intercepted+
[2014-07-15 02:19:08 -0400] Damm: all hardware is intercepted
[2014-07-15 02:19:21 -0400] Damm: but being able to own your conditions on how you leak (or being able to half ass try)
[2014-07-15 02:19:23 -0400] Damm: is rather nice
[2014-07-15 02:19:24 -0400] gchristensen: at some point nothing matters
[2014-07-15 02:19:37 -0400] Damm: yep but I won't sell myself down the river prematurely
[2014-07-15 02:19:41 -0400] gchristensen: :)
[2014-07-15 02:19:58 -0400] Damm: gchristensen, I had that 'hype' when I worked at EY; we threw away all our hardware and went to the cloud
[2014-07-15 02:20:01 -0400] Damm: biggest mistake ever
[2014-07-15 02:20:05 -0400] gchristensen: EngineYard?
[2014-07-15 02:20:07 -0400] Damm: it really was
[2014-07-15 02:20:39 -0400] gchristensen: ohreally?
[2014-07-15 02:20:44 -0400] gchristensen: :P
[2014-07-15 02:20:44 -0400] Damm: but we did loose a lot of business
[2014-07-15 02:21:08 -0400] Damm: I guess I have never seen the cloud the way other people do; it's always been a fad
[2014-07-15 02:21:12 -0400] Damm: must be my age
[2014-07-15 02:21:50 -0400] gchristensen: you could have your own private cloud ;)
[2014-07-15 02:22:02 -0400] luddite: the cloud saves alot of money
[2014-07-15 02:22:08 -0400] luddite: then it costs alot of money
[2014-07-15 02:22:17 -0400] Damm: exactly
[2014-07-15 02:22:25 -0400] luddite: it saves alot of work
[2014-07-15 02:22:27 -0400] Damm: and it's very easy and alluring; add to cart
[2014-07-15 02:22:31 -0400] luddite: then it creates alot of work
[2014-07-15 02:22:32 -0400] Damm: you don't need a network operator
[2014-07-15 02:22:34 -0400] Damm: just a devops
[2014-07-15 02:22:43 -0400] Damm: sure you save a lot of effort and work and money
[2014-07-15 02:22:47 -0400] Damm: but it costs you in the end
[2014-07-15 02:22:54 -0400] Damm: in control and abilities at the very least
[2014-07-15 02:22:58 -0400] digitalchild: Damm: post NSA yes its an issue but i guess you have to look at what your data is too
[2014-07-15 02:23:02 -0400] luddite: we have 25k servers and only 64 are devops
[2014-07-15 02:23:13 -0400] Damm: and really the fact that AWS servers are slower than  your macbook pro
[2014-07-15 02:23:15 -0400] Damm: should be the #1 reason
[2014-07-15 02:23:24 -0400] luddite: well that isnt entirely try
[2014-07-15 02:23:26 -0400] luddite: true
[2014-07-15 02:23:29 -0400] Damm: sure it is
[2014-07-15 02:23:31 -0400] Damm: mostly
[2014-07-15 02:23:47 -0400] luddite: the new range they jsut released are faster
[2014-07-15 02:23:48 -0400] Damm: the newer instance types are different
[2014-07-15 02:23:52 -0400] digitalchild: i guess it depends on what you need
[2014-07-15 02:23:56 -0400] Damm: but really it's taken them years to catch up
[2014-07-15 02:24:01 -0400] luddite: true
[2014-07-15 02:24:05 -0400] digitalchild: the t2 instances are pretty good
[2014-07-15 02:24:11 -0400] Damm: I got an old client off of AWS by explaining to them Moore's Law
[2014-07-15 02:24:15 -0400] Damm: we tried some Sandy Bridge
[2014-07-15 02:24:23 -0400] Damm: quickly realized the memory throughput was 2-4x more
[2014-07-15 02:24:28 -0400] Damm: and made the jump
[2014-07-15 02:24:37 -0400] digitalchild: im just over hardware heh
[2014-07-15 02:24:47 -0400] luddite: i dont like the cloud for cloud sakes and i dont like amazon as the default provider but I am also not the target audience
[2014-07-15 02:24:49 -0400] Damm: Intel will make it better
[2014-07-15 02:24:54 -0400] digitalchild: there are some aussie based cloud guys that have some really damn fast hardware
[2014-07-15 02:25:01 -0400] Damm: the new style that Intel delivered to Bestbuy
[2014-07-15 02:25:11 -0400] Damm: having things more decentralized will help
[2014-07-15 02:25:12 -0400] digitalchild: crucial is one
[2014-07-15 02:25:17 -0400] Damm: it's just eh
[2014-07-15 02:25:19 -0400] luddite: digitalchild : whoM/
[2014-07-15 02:25:22 -0400] Damm: an old problem; not a lot of automation
[2014-07-15 02:25:23 -0400] luddite: who?
[2014-07-15 02:25:28 -0400] digitalchild: their helpdesk sucks but their network and hardware is super fast
[2014-07-15 02:26:01 -0400] digitalchild: luddite: these guys http://www.crucial.com.au/
[2014-07-15 02:26:03 -0400] Damm: like how do you automate switches? (not arista) we should really blame Cisco
[2014-07-15 02:26:08 -0400] digitalchild: in aus, the speeds are insane
[2014-07-15 02:26:16 -0400] digitalchild: faster than my aws stuff
[2014-07-15 02:26:17 -0400] Damm: for sucky it is to automate
[2014-07-15 02:26:33 -0400] Damm: client bought a SG-200 just to found out there's no telnet/ssh interface
[2014-07-15 02:26:34 -0400] Damm: only http
[2014-07-15 02:26:36 -0400] digitalchild: Damm: i guess thats where the virtual network stuff comes in
[2014-07-15 02:27:03 -0400] digitalchild: Damm: ive got sg300s
[2014-07-15 02:27:09 -0400] digitalchild: and you can enable the interface but its still not full ios
[2014-07-15 02:27:16 -0400] digitalchild: so i don't bother
[2014-07-15 02:27:23 -0400] digitalchild: then again my network is super simple
[2014-07-15 02:27:37 -0400] Damm: sg-200
[2014-07-15 02:27:40 -0400] Damm: different model
[2014-07-15 02:27:43 -0400] Damm: I have the 300's too
[2014-07-15 02:35:49 -0400] digitalchild: my fav network devices at the moment is the meraki gear
[2014-07-15 02:36:02 -0400] jtimberman: i love me some vpc :)
[2014-07-15 02:37:21 -0400] cheeseplus: I miss my merakis
[2014-07-15 02:37:43 -0400] digitalchild: cheeseplus: im in the process of killing our MPLS ipvpn for merakis
[2014-07-15 02:37:51 -0400] digitalchild: and saving about 50% on service costs..
[2014-07-15 02:38:17 -0400] cheeseplus: last gig had them at all the offices and I've also used them for conferences
[2014-07-15 02:38:27 -0400] digitalchild: the MRs ?
[2014-07-15 02:38:39 -0400] cheeseplus: the switches and the MR26/16
[2014-07-15 02:38:43 -0400] cheeseplus: er 24
[2014-07-15 02:38:43 -0400] digitalchild: nice
[2014-07-15 02:38:55 -0400] digitalchild: ive got my free Mr16 hooked up under my desk here
[2014-07-15 02:38:58 -0400] cheeseplus: we had the 24 port switch with PoE and some Z1s
[2014-07-15 02:39:11 -0400] digitalchild: the poe switches werent out when we did our purchase :(
[2014-07-15 02:39:14 -0400] cheeseplus: the z1s were ok for office use but as I discovered had a 50Mbps cap
[2014-07-15 02:39:19 -0400] digitalchild: yeah
[2014-07-15 02:39:24 -0400] digitalchild: i use the MX60W's
[2014-07-15 02:39:25 -0400] digitalchild: always
[2014-07-15 02:39:45 -0400] cheeseplus: I didn't buy them - some contractors did cause they couldn't figure out pfsense
[2014-07-15 02:39:52 -0400] digitalchild: heh
[2014-07-15 02:40:07 -0400] digitalchild: i use meraki cause im not a network engineer but im responsible for the entire stack ..
[2014-07-15 02:42:13 -0400] cheeseplus: oh they are lovely to use but the z1 was a bit disappointing for what I needed it to do
[2014-07-15 02:42:34 -0400] jtimberman: cheeseplus but instead of merakis, you get vcap!
[2014-07-15 02:42:40 -0400] jtimberman: trollface.jpg
[2014-07-15 02:42:41 -0400] digitalchild: agreed
[2014-07-15 02:42:44 -0400] digitalchild: eh
[2014-07-15 02:42:46 -0400] digitalchild: heh
[2014-07-15 02:43:20 -0400] digitalchild: i did have a network win the other day, congestion on the network beacuse our service provider had our uplink port trained on half duplex
[2014-07-15 02:43:25 -0400] digitalchild: why so many crcs?..
[2014-07-15 02:43:26 -0400] digitalchild: idiots..
[2014-07-15 02:43:41 -0400] digitalchild: we now get 10mbit outgoing, like we paid for..
[2014-07-15 03:02:04 -0400] coderanger: Anyone have 32bit debian or ubuntu around and can check something for me?
[2014-07-15 03:02:40 -0400] digitalchild: 32bit, heh
[2014-07-15 03:03:38 -0400] coderanger: Never mind, found it
[2014-07-15 03:09:04 -0400] Damm: rofl
[2014-07-15 03:09:06 -0400] Damm: who uses 32bit?
[2014-07-15 03:09:17 -0400] digitalchild: i think my rpi does..
[2014-07-15 03:09:39 -0400] Damm: actually there's still a fairly large 32-bit base
[2014-07-15 03:09:44 -0400] Damm: mostly out of ignorance
[2014-07-15 03:09:51 -0400] Damm: there is the 'oh my gosh it's larger on 64-bit' point
[2014-07-15 03:09:52 -0400] digitalchild: Damm: i have ghetto hardware
[2014-07-15 03:09:54 -0400] digitalchild: some old HP thing
[2014-07-15 03:09:55 -0400] Damm: but ram is cheap
[2014-07-15 03:10:05 -0400] Damm: gotta be pretty damned old
[2014-07-15 03:10:08 -0400] digitalchild: im pretty sure it could be used as a cruiseliner anchor
[2014-07-15 03:10:09 -0400] Damm: to be 32
[2014-07-15 03:10:20 -0400] digitalchild: takes up half a rack
[2014-07-15 03:10:22 -0400] Damm: yep
[2014-07-15 03:10:30 -0400] digitalchild: has a whole 16GB of ram and 500GB of raid storage
[2014-07-15 03:10:32 -0400] Damm: although i had an old IBM AIX server that was full height
[2014-07-15 03:10:35 -0400] digitalchild: P0WAH
[2014-07-15 03:10:39 -0400] Damm: had 4 5.25" floppies
[2014-07-15 03:10:41 -0400] Damm: 8 hard disks
[2014-07-15 03:10:48 -0400] Damm: you could access it via C: and B:
[2014-07-15 03:10:52 -0400] Damm: to get to first disk and 2nd floppy
[2014-07-15 03:10:53 -0400] digitalchild: hah
[2014-07-15 03:10:57 -0400] Damm: i wish i was joking
[2014-07-15 03:11:00 -0400] Damm: that blew my mind that IBM did that
[2014-07-15 03:11:12 -0400] digitalchild: i saw a job advertised the other day that wanted aix as primary skill
[2014-07-15 03:11:22 -0400] Damm: no thank you
[2014-07-15 03:11:25 -0400] Damm: i like being able to poop
[2014-07-15 03:11:35 -0400] digitalchild: yeah, ill just go and be a check out chick..
[2014-07-15 03:11:55 -0400] digitalchild: one thing i hate about dev ops jobs is they pay a lot
[2014-07-15 03:12:02 -0400] digitalchild: but they also expect about 16 professions in one..
[2014-07-15 03:12:08 -0400] Damm: 32
[2014-07-15 03:12:10 -0400] Damm: but yep
[2014-07-15 03:24:31 -0400] digitalchild: shlant: awesome!
[2014-07-15 04:11:29 -0400] jtimberman: AIX is serious business.
[2014-07-15 04:11:47 -0400] jtimberman: It's actually a pretty high quality operating system.
[2014-07-15 06:12:55 -0400] Damm: </greatbigjoke>
[2014-07-15 06:12:57 -0400] Damm: thanks for the joke :)
[2014-07-15 07:08:57 -0400] LeShadow: I have the following problem, I get an error cant convert String into Integer on this line
[2014-07-15 07:08:57 -0400] LeShadow: touch /etc/apache2/sites-available/#{vhost['url']}
[2014-07-15 07:09:04 -0400] LeShadow: and that line is in a codeblock of chef
[2014-07-15 07:09:27 -0400] coderanger: LeShadow: vhost is probably a string or array, not a hash
[2014-07-15 07:09:38 -0400] LeShadow: coderanger:
[2014-07-15 07:09:40 -0400] LeShadow: this is the block
[2014-07-15 07:09:41 -0400] LeShadow: https://gist.github.com/LeShadow/877275239681c0ac99c3
[2014-07-15 07:10:01 -0400] coderanger: What is node['config']['vhosts'] set to
[2014-07-15 07:10:25 -0400] coderanger: Unless its an array of hashes, thats probably not what you want
[2014-07-15 07:11:35 -0400] LeShadow: the node[config][vhosts] is an array of vhosts with each a set of items like: url, document_root,...
[2014-07-15 07:12:21 -0400] coderanger: LeShadow: What does "set of items" mean
[2014-07-15 07:13:01 -0400] LeShadow: I have a JSON file that I read from, this contains a block of data with different vhosts, defined like this:
[2014-07-15 07:13:29 -0400] LeShadow: https://gist.github.com/LeShadow/705fb1c1df1987a9afe1
[2014-07-15 07:13:47 -0400] LeShadow: I parse that json and pass it on to chef with chef.json.merge!(arrayofdata)
[2014-07-15 07:13:53 -0400] coderanger: LeShadow: Okay, so thats a hash, not an array of hashes
[2014-07-15 07:14:19 -0400] Damm: lol
[2014-07-15 07:14:23 -0400] LeShadow: hmm, what do you suggest Id do then?
[2014-07-15 07:14:39 -0400] coderanger: LeShadow: So you want node['config']['vhosts'].each do |vhost_name, vhost|
[2014-07-15 07:14:46 -0400] coderanger: that will make it work the way you expect
[2014-07-15 07:15:13 -0400] coderanger: #each on a Hash iterates over key/value pairs
[2014-07-15 07:15:18 -0400] coderanger: so you were just getting the keys
[2014-07-15 07:15:20 -0400] coderanger: which are strings
[2014-07-15 07:15:28 -0400] LeShadow: I understand
[2014-07-15 07:15:49 -0400] LeShadow: thanks for the information !
[2014-07-15 07:16:29 -0400] Damm: http://ruby-doc.org/core-2.1.2/Enumerable.html#method-i-each_with_index
[2014-07-15 07:16:41 -0400] Damm: LeShadow, how you enumerate it can be a great help
[2014-07-15 07:17:13 -0400] LeShadow: Damm thanks for the information, Im new to ruby as im new to chef so forgive me my noobyness :)
[2014-07-15 07:17:44 -0400] Damm: LeShadow, it's easy to be sucked into the dark side
[2014-07-15 07:17:45 -0400] Damm: be careful
[2014-07-15 07:17:58 -0400] Damm: you can get lost in making it prettier almost
[2014-07-15 07:18:01 -0400] LeShadow: that depends on how you define the dark side :p
[2014-07-15 07:18:10 -0400] Damm: well the dark side in this case is unproductivity
[2014-07-15 07:18:38 -0400] Damm: struggling to make it work when you are not seeing the problem right and you just keep going
[2014-07-15 07:18:44 -0400] Damm: and going and going
[2014-07-15 07:20:32 -0400] LeShadow: I understand now :p
[2014-07-15 07:20:49 -0400] LeShadow: Well its the first problem I stumble upon this morning, lets hope its the only one :p
[2014-07-15 07:51:10 -0400] LeShadow: coderanger: can the following errors be related to the fact I had to give my sudo pass for hostsupdater?:
[2014-07-15 07:51:11 -0400] LeShadow: https://gist.github.com/LeShadow/42d7542d0b677870e14a
[2014-07-15 07:51:40 -0400] coderanger: LeShadow: How are you running chef?
[2014-07-15 07:51:51 -0400] LeShadow: as a provision tool for a vagrant box
[2014-07-15 07:52:12 -0400] LeShadow: the thing is, I installed the host updater so I could use it for dev stuff. before I installed and used that plugin I didnt had that error
[2014-07-15 07:52:56 -0400] coderanger: No, like what command are you running
[2014-07-15 07:57:45 -0400] LeShadow: vagrant reload --provision
[2014-07-15 07:58:18 -0400] Stones: I need some help getting a powershell (ps1) script running.
[2014-07-15 07:58:39 -0400] Stones: I have tried to use the powershell_script to work but doesn't see to execute the script
[2014-07-15 07:59:35 -0400] maniac: hi guys  just wondering how do yo ustore ssl certificates in encrypted data bag ? is there some converter not to add \n to the end of the line manually ?
[2014-07-15 07:59:48 -0400] coderanger: LeShadow: Hmm, where are you using sudo then?
[2014-07-15 07:59:54 -0400] coderanger: LeShadow: That should be entirely within the VM
[2014-07-15 08:00:26 -0400] LeShadow: coderanger: vagrant asks for the sudo password to edit my hosts file so I can point local domains to my vagrant box without editing the hosts file myself
[2014-07-15 08:00:29 -0400] coderanger: maniac: encrypted data bags are not generally useful for that kind of secrets storage
[2014-07-15 08:00:47 -0400] coderanger: LeShadow: Shouldn't affect Chef, are you using the vagrant-omnibus plugin?
[2014-07-15 08:00:52 -0400] maniac: coderanger: what's the best approach to do that then ?
[2014-07-15 08:01:09 -0400] coderanger: maniac: Are you using AWS?
[2014-07-15 08:01:20 -0400] maniac: no
[2014-07-15 08:01:49 -0400] coderanger: maniac: Are you doing any kind of auto-scaling or self-healing systems?
[2014-07-15 08:02:32 -0400] maniac: coderanger: no i just have very small amount of certificates ( about 10-12) which i need to store encrypted
[2014-07-15 08:02:42 -0400] maniac: it's for openvpn stauff it will not change often
[2014-07-15 08:02:43 -0400] coderanger: maniac: chef-vault is probably your best bet then
[2014-07-15 08:03:16 -0400] maniac: coderanger: it has the same overhead as encrypted data bags when you need to store ssl certs in it ?
[2014-07-15 08:03:58 -0400] maniac: as i understood it operates upon encrypted data bags also
[2014-07-15 08:04:03 -0400] coderanger: maniac: What kind of "overhead" do you mean?
[2014-07-15 08:04:22 -0400] coderanger: It uses databags as the underlying database, but the encryption is done very differently
[2014-07-15 08:05:12 -0400] maniac: coderanger: overhead to prepare certificate to proper format  i mean add ]n to the end of the lines and then make one line data =)
[2014-07-15 08:05:38 -0400] maniac: *\n
[2014-07-15 08:05:41 -0400] coderanger: maniac: You just have to dump it in to JSON as a string, not sure I call that overhead
[2014-07-15 08:06:07 -0400] maniac: yeah =) for me its manual overhead =)
[2014-07-15 08:08:46 -0400] coderanger: maniac: Just write a script in any of a dozen langs
[2014-07-15 08:09:24 -0400] coderanger: maniac: ex. python -c 'print __import__("json").dumps({"id": "foo", "cert": open("whatever").read()})
[2014-07-15 08:11:32 -0400] maniac: coderanger: thanks .. just checked for a best practise how to do it =)
[2014-07-15 08:40:18 -0400] tomoyuki28jp: When some dependencies are missing, It seems like recipe is working fine somehow via vagrant, but knife solo fails. Any idea why?
[2014-07-15 08:41:45 -0400] tomoyuki28jp: Ah, maybe some cookbooks were just broken, I think.
[2014-07-15 10:53:58 -0400] chefgirl: ##aws
[2014-07-15 11:05:17 -0400] user0815: hello everybody
[2014-07-15 11:06:30 -0400] user0815: in the community cookbooks somentimes the "@settings" hash is used. Is there any documentation about this variable?
[2014-07-15 11:12:47 -0400] cwebber: user0815: that is interesting can you link me to something that does that?
[2014-07-15 11:15:34 -0400] user0815: sorry got disconnected. any infos bout the "@settings" hash?
[2014-07-15 11:20:08 -0400] cwebber: user0815: i dont have any info, but can you point me at something that does that?
[2014-07-15 11:20:53 -0400] user0815: eg https://github.com/opscode-cookbooks/postfix/blob/master/templates/default/sasl_passwd.erb
[2014-07-15 11:21:37 -0400] LeShadow: I did gem install chef and on a recipe I received this error?:
[2014-07-15 11:21:38 -0400] LeShadow: No resource or method named `apt_repository' for `Chef::Recipe
[2014-07-15 11:23:22 -0400] user0815: another use of @settings: https://github.com/opscode-cookbooks/postfix/blob/master/templates/default/main.cf.erb
[2014-07-15 11:25:28 -0400] cwebber: user0815: are you using Berkshelf?
[2014-07-15 11:25:38 -0400] user0815: no i am not
[2014-07-15 11:26:52 -0400] cwebber: hmmm
[2014-07-15 11:27:00 -0400] LeShadow: nvm, found my bug
[2014-07-15 11:27:10 -0400] cwebber: ok
[2014-07-15 11:27:21 -0400] cwebber: so the apt_repository error is from another cookbook
[2014-07-15 11:32:00 -0400] cwebber: user0815: it is being passed in as part of the template: https://github.com/opscode-cookbooks/postfix/blob/master/recipes/default.rb#L118
[2014-07-15 11:33:46 -0400] user0815: so it is a user defined variable.
[2014-07-15 11:36:39 -0400] user0815: ah, i found the documentation for this http://docs.opscode.com/essentials_cookbook_templates.html#variables
[2014-07-15 11:36:58 -0400] user0815: thank u,  cwebber. helped me a lot.
[2014-07-15 12:14:04 -0400] chefgirl: is chef a paid service ??
[2014-07-15 12:14:58 -0400] phelms: it can be
[2014-07-15 12:15:06 -0400] phelms: it can also be free if you are using the open source
[2014-07-15 12:15:21 -0400] phelms: personally I think the open source is fine for 99% of businesses
[2014-07-15 12:15:47 -0400] chefgirl: what is the difference between hosted and enterprize chef ?
[2014-07-15 12:16:30 -0400] phelms: hosted is enterprise. There are three types in total
[2014-07-15 12:17:00 -0400] phelms: Hosted Enterprise or Self Hosted Enterprise (enterprise chef runs on them, hosted is hosted by chef and you just connect your nodes to it)
[2014-07-15 12:17:11 -0400] phelms: self hosted you host the chef server on your own
[2014-07-15 12:17:24 -0400] phelms: open source you host the chef server on your own
[2014-07-15 12:17:41 -0400] chefgirl: phelms : is there any node limitations between opscode hosted and on premise chef ?
[2014-07-15 12:18:26 -0400] phelms: Not that I am aware of, but I do not run the enterprise version
[2014-07-15 12:18:55 -0400] chefgirl: there is also one called private chef
[2014-07-15 12:18:59 -0400] chefgirl: what is that
[2014-07-15 12:19:58 -0400] phelms: I have never heard that phrase - i imagine the open source (or enterprise) if you are self hosting
[2014-07-15 12:20:11 -0400] phelms: how many nodes are you trying to host ?
[2014-07-15 12:22:32 -0400] chefgirl: i am trying to host 100;s of nodes
[2014-07-15 12:30:44 -0400] phelms: chefgirl: The chef server is very small and nothing really "runs" from it - it is a web server. So a basic server can support that easily
[2014-07-15 12:30:54 -0400] phelms: most likely open source will be fine as well
[2014-07-15 12:51:43 -0400] soblom: chefgirl: 'private chef' was the old name for enterprise chef
[2014-07-15 13:10:28 -0400] hypnosb: chef server seems to be quite chatty on the network....
[2014-07-15 14:22:42 -0400] vt102: When I knife ec2 create server with --associate-public-ip, it brings up the instance but won't bootstrap, fails with "ERROR: Must pass an FQDN or ip to bootstrap"  I can bring one up without that and it will ssh to it just fine (but of coures can't bootstrap)
[2014-07-15 14:23:14 -0400] vt102: I'm not getting public DNS on the public IP, but I wouldn't expect that to just break everything.
[2014-07-15 14:23:36 -0400] vt102: I can ssh to new instance all day long.
[2014-07-15 14:50:57 -0400] LeShadow: coderanger are you here by any chance? :p
[2014-07-15 14:52:36 -0400] LeShadow: or jonlives?
[2014-07-15 15:01:07 -0400] zts: maybe, maybe not - just ask your question, maybe one of the other 600 people here will know the answer
[2014-07-15 15:12:19 -0400] gyoza: morning
[2014-07-15 15:12:22 -0400] drywheat: Is it better to setup roles/environments using the Ruby DSL or JSON?
[2014-07-15 15:12:33 -0400] drywheat: So many ways to do the same thing.
[2014-07-15 15:13:16 -0400] bougyman: it's your choice, really
[2014-07-15 15:13:19 -0400] bougyman: I always use ruby.
[2014-07-15 15:13:25 -0400] bougyman: so I can add logic to them if needed.
[2014-07-15 15:14:05 -0400] zts: drywheat: if you want to use chef-zero, you'll need to stick with JSON for the time being.  Otherwise, it doesn't really matter
[2014-07-15 15:14:51 -0400] bougyman: zts: chef-zero only does .json?
[2014-07-15 15:15:47 -0400] zts: bougyman: at the moment, yes
[2014-07-15 15:15:52 -0400] drywheat: zts: thanks, that's a good point
[2014-07-15 15:16:47 -0400] drywheat: JSON also seems like a better option given that `knife <entity> show -F` does not support a ruby format
[2014-07-15 15:17:08 -0400] jkeiser: knife upload / download / diff all do json too
[2014-07-15 15:17:10 -0400] zts: yeah, the chef server never sees the ruby - so you can't round-trip it
[2014-07-15 15:17:11 -0400] jkeiser: so that's a factor
[2014-07-15 15:18:41 -0400] [ilin]: is there a way to use search(:node, "*:*") in kitchen? maybe configuring kitchen.yml?
[2014-07-15 15:18:43 -0400] zts: on the other hand, JSON is a hateful format.  I'm currently using the Ruby DSL so that I can have comments and trailing commas, but eh
[2014-07-15 15:19:41 -0400] gyoza: lol hateful
[2014-07-15 15:19:51 -0400] gyoza: my favorite format is .ini
[2014-07-15 15:19:54 -0400] gyoza: come on you know you all love it too
[2014-07-15 15:19:58 -0400] jtimberman: gem install inifile
[2014-07-15 15:20:00 -0400] gyoza: :)
[2014-07-15 15:20:05 -0400] jtimberman: parse inifiles with ruby :D
[2014-07-15 15:20:15 -0400] gyoza: i just hate any config file using yaml
[2014-07-15 15:20:19 -0400] gyoza: blow my brain out
[2014-07-15 15:20:20 -0400] gyoza: please
[2014-07-15 15:20:43 -0400] bougyman: yeah I prefer json to yaml.
[2014-07-15 15:20:53 -0400] bougyman: but I prefer ruby over json.
[2014-07-15 15:21:02 -0400] gyoza: a lot of minecraft plugins use yaml and i hate it
[2014-07-15 15:21:31 -0400] gyoza: it cares about like spacing and stuff
[2014-07-15 15:21:32 -0400] zts: heh, I'll take yaml over json any day of the week.  It's miserable for interop, but yaml's way more human friendly
[2014-07-15 15:21:35 -0400] gyoza: that is rediculous
[2014-07-15 15:21:52 -0400] gyoza: too many spaces in front of a line will cause problems
[2014-07-15 15:22:01 -0400] rsavage: YAML = PITA
[2014-07-15 15:22:03 -0400] gyoza: i dont know if thats a yaml thing or a minecraft + yaml
[2014-07-15 15:22:08 -0400] gyoza: but it sucks lol
[2014-07-15 15:22:11 -0400] bougyman: it's a yaml thing
[2014-07-15 15:22:13 -0400] bougyman: yamls is asstastic
[2014-07-15 15:23:18 -0400] zts: gyoza: if you're complaining that you have to indent things sensibly, we'll have to agree to disagree :)
[2014-07-15 15:24:11 -0400] workmad3: 'oh noes, I can't vomit whitespace into my file in a random fashion in a *whitespace* *sensitive* markup language... it sucks!'
[2014-07-15 15:25:54 -0400] rsavage: JSON is better than YAML because it has brackets to tell when something starts and stops. YAML omits almost all of them.
[2014-07-15 15:26:04 -0400] rsavage: http://www.techpowerup.com/forums/threads/yaml-sucks.178071/
[2014-07-15 15:26:37 -0400] rsavage: I do like YAML over XML though
[2014-07-15 15:27:06 -0400] rbowlby: anyone know how to get the wordpress cookbook working? a slew of apache errors keep it from starting
[2014-07-15 15:27:22 -0400] rbowlby: ubuntu 14, apache 2.4
[2014-07-15 15:27:42 -0400] gleam: the current opscode apache2 cookbook doesn't work with apache 2.4
[2014-07-15 15:27:42 -0400] zts: rsavage: amusingly, I'd rather have XML than JSON :)
[2014-07-15 15:27:47 -0400] gleam: last i saw
[2014-07-15 15:27:54 -0400] gleam: try this branch: https://github.com/onehealth-cookbooks/apache2/tree/COOK-3900
[2014-07-15 15:28:03 -0400] rbowlby: gleam, is there a working fork or branch or something?
[2014-07-15 15:28:11 -0400] rbowlby: awesome
[2014-07-15 15:28:12 -0400] rsavage: seems everyone has their own preference
[2014-07-15 15:28:54 -0400] rsavage: but
[2014-07-15 15:29:08 -0400] zts: yeah, that's what it boils down to.  Which brings us back to gyoza's suggestion: we should switch to inifile for everything, on the basis that a good compromise leaves nobody happy
[2014-07-15 15:29:11 -0400] rsavage: nothing beats VHML (virtual human markup language).... oh yeah....
[2014-07-15 15:29:18 -0400] rsavage: http://en.wikipedia.org/wiki/VHML
[2014-07-15 15:46:36 -0400] doug1: So, I got this idiot boss that wants to use chef, but only as far as one person knowing it (me), and everyone else just clicking the 'go' button. I was looking at OpsWorks but it forces you to do things that are bad practice. Surprised Amazon didn't consult with Chef people first?
[2014-07-15 15:47:18 -0400] phutchins: I'd like some input on a best practice on how to do something in chef...
[2014-07-15 15:47:51 -0400] phutchins: I'm setting up solr with chef and i'd like to make sure that the value being set for XMX in tomcat (which is memory setting) is not larger that X% of total memory on the box.
[2014-07-15 15:48:18 -0400] phutchins: My first thought was to kill the chef run if it finds that this is not within the X% but thats kinda against the way of things with chef...
[2014-07-15 15:48:19 -0400] doug1: phutchins: use some ruby code in the recipe to do the math. pull memory from ohai
[2014-07-15 15:48:28 -0400] phutchins: i have no problem getting the numbers and doing the math
[2014-07-15 15:48:31 -0400] phutchins: the logic i'm fine with
[2014-07-15 15:48:31 -0400] vickleford: i found some of opsworks' chef usages a bit odd too,
[2014-07-15 15:48:59 -0400] phutchins: vickleford: same. :)
[2014-07-15 15:49:03 -0400] phutchins: its getting better tho...
[2014-07-15 15:49:10 -0400] doug1: Berksfile at top level.... que?
[2014-07-15 15:49:46 -0400] phutchins: doug1: so where I want input is... do I kill the chef run if someone has set the memoyr too high, or if it is trying to install on a box with too little memory for the setting?
[2014-07-15 15:49:52 -0400] phutchins: or do i just make it not install solr?
[2014-07-15 15:49:55 -0400] phutchins: you follow what i'm asking?
[2014-07-15 15:50:20 -0400] doug1: phutchins: you could just call raise with a message?
[2014-07-15 15:50:32 -0400] tomduffield: phutchins how is your XMX value being set currently? Are you calculating it based on ohai data or is it being passed in manually?
[2014-07-15 15:50:36 -0400] phutchins: yeah but nobody watches these things...
[2014-07-15 15:50:56 -0400] doug1: phutchins: can't help you there. :)
[2014-07-15 15:51:13 -0400] phutchins: tomduffield: currently it's explicitly set via an attribute. I've considered  calculating it based on node[:memory] from ohai data. That currently seems like the best option...
[2014-07-15 15:51:49 -0400] phutchins: that way we could come up with a sane percentage ( and have override vailable of course to make it lower if needed ) and not worry about it again
[2014-07-15 15:52:00 -0400] phutchins: doug1: thanks for trying :)
[2014-07-15 15:52:07 -0400] tomduffield: phutchins that is what I would recommend. If it were me I would do the check and then use notification handlers (http://docs.opscode.com/handlers.html) to alert you that someone set it too high
[2014-07-15 15:52:47 -0400] phutchins: tomduffield: yeah so notify if too high and use the sane percentage instead. tomcat/solr does bad things when xmx is larger than your total memory on the host :)
[2014-07-15 15:52:50 -0400] tomduffield: but the "best practice" would be to use ohai
[2014-07-15 15:53:08 -0400] tomduffield: and to have your manually passed in value be a percentage
[2014-07-15 15:53:16 -0400] phutchins: that piece of best practice I have down... just the stop run/auto calculate/warn, etc.. piece...
[2014-07-15 15:53:33 -0400] phutchins: I like that idea
[2014-07-15 15:53:54 -0400] phutchins: that would make it easy to check if its over 1005 :)
[2014-07-15 15:54:02 -0400] phutchins: s/5/%/
[2014-07-15 15:54:43 -0400] phutchins: I think i'll bake that in to my solr cookbook. I'd not found a great solr cookbook so I'm writing one for the community...
[2014-07-15 15:55:09 -0400] tomduffield: you could also use https://github.com/bryanwb/jvmargs
[2014-07-15 15:55:30 -0400] tomduffield: which will raise an error if you try to allocate a heap larger than your system has available
[2014-07-15 15:55:55 -0400] tomduffield: phutchins ^^
[2014-07-15 15:56:02 -0400] phutchins: tomduffield: ah neat. I'll ahve to take a look at that. Probably will stick with the current plan but sounds really neat
[2014-07-15 15:56:21 -0400] phutchins: trying to use as few dependencies as I can within reason...
[2014-07-15 15:58:19 -0400] doug1: So, I got this idiot boss that wants to use chef, but only as far as one person knowing it (me), and everyone else just clicking the 'go' button. I was looking at OpsWorks but it forces you to do things that are bad practice. Surprised Amazon didn't consult with Chef people first?
[2014-07-15 15:58:31 -0400] gyoza: yes
[2014-07-15 15:58:39 -0400] gyoza: i agree w/ bad practice
[2014-07-15 15:58:53 -0400] phutchins: I agree as well.
[2014-07-15 15:58:59 -0400] phutchins: i've been working in opsworks for almost a year
[2014-07-15 15:59:06 -0400] phutchins: i have to say tho that it has gotten a lot better...
[2014-07-15 15:59:28 -0400] phutchins: and I REALLY wish that they had a better channel of communication for users that don't pay $43982384 for support...
[2014-07-15 16:00:32 -0400] dylannorthrup: is there a way to do a conditional notification?  use case: send a start notification if the 'node[:service][:primary]' attribute is true (for example)
[2014-07-15 16:00:59 -0400] doug1: phutchins: a year? wow...
[2014-07-15 16:01:01 -0400] a13x212: how do you detect if a node is an ec2 instance?
[2014-07-15 16:01:07 -0400] phutchins: doug1: we were on when it was beta...
[2014-07-15 16:01:20 -0400] phutchins: dylannorthrup: hey man, long time no see :)
[2014-07-15 16:01:22 -0400] dylannorthrup: can i just wrap the 'notifies' with an 'if node[:service][:primary] do ... end' conditional?
[2014-07-15 16:01:24 -0400] doug1: phutchins: looks beta still. :-\
[2014-07-15 16:01:29 -0400] gyoza: does support ever max out?
[2014-07-15 16:01:30 -0400] dylannorthrup: phutchins: howdy!
[2014-07-15 16:01:35 -0400] gyoza: or is it always 10% of your bill
[2014-07-15 16:01:40 -0400] phutchins: dylannorthrup: and yeah you should just do a notifies blah if node[:blah]
[2014-07-15 16:01:56 -0400] dylannorthrup: phutchins: thanks
[2014-07-15 16:01:58 -0400] phutchins: gyoza: no idea... no support here :)
[2014-07-15 16:02:06 -0400] dylannorthrup: and now, lunchtime!
[2014-07-15 16:02:16 -0400] gyoza: now you can get opswork to work with chefsolosearch right?
[2014-07-15 16:02:19 -0400] phutchins: dylannorthrup: np. let me know if it works for you. good approach for clustering with a master/slave setup
[2014-07-15 16:02:31 -0400] gyoza: which kind of fixes some problems
[2014-07-15 16:02:32 -0400] tomduffield: a13x212 ohai should do that for you. You can look for node['ec2']
[2014-07-15 16:02:42 -0400] phutchins: gyoza: opsworks now uses chef zero so it does work just like chef server just locally
[2014-07-15 16:03:06 -0400] doug1: So... the douche bag boss wants a clicky pointy front end for chef. he thinks having to push cookbooks with knife is to hard. Is there a Chef GUI?
[2014-07-15 16:03:19 -0400] Eulipion: wouldnt it be better to use an autoscaling group that launches a node (with a validation key to register) and an IAM role so that it can be a pure chef node?
[2014-07-15 16:03:24 -0400] gyoza: doug1: just write perlscripts that execute via php webpage
[2014-07-15 16:03:29 -0400] gyoza: or whatever
[2014-07-15 16:03:35 -0400] gyoza: simple
[2014-07-15 16:03:36 -0400] a13x212: tomduffield, if i run ohai i don't see the attribute ec2
[2014-07-15 16:03:50 -0400] phutchins: yeah what gyoza said... or use jenkins or some other package liek that to monitor cookbooks and push on changes
[2014-07-15 16:04:03 -0400] phutchins: you can add git hooks to do the work for you
[2014-07-15 16:04:06 -0400] doug1: gyoza: I'm a lot of things but a web developer I am not.
[2014-07-15 16:04:12 -0400] gyoza: dude thats simple stuff
[2014-07-15 16:04:18 -0400] gyoza: im not a web dev either but i can make a checkbox
[2014-07-15 16:04:25 -0400] doug1: gyoza: so can I, and it looks like shit
[2014-07-15 16:04:26 -0400] phutchins: and if you're in jenkins you can have it execute tests on your cookbooks before it uploads it to the chef server
[2014-07-15 16:04:26 -0400] gyoza: and make it push variables to cgi-bin
[2014-07-15 16:04:32 -0400] tomduffield: a13x212 if you dont mind the added dependency you can use chef-sugar: https://github.com/sethvargo/chef-sugar
[2014-07-15 16:04:33 -0400] gyoza: so you make it work ugly
[2014-07-15 16:04:35 -0400] gyoza: and then tell boss
[2014-07-15 16:04:39 -0400] gyoza: "prettyfy it"
[2014-07-15 16:04:44 -0400] gyoza: get the web team on it at that point
[2014-07-15 16:04:45 -0400] vickleford: while we're talking opsworks and chef zero, does that do feature parity with hosted chef's node search?
[2014-07-15 16:04:51 -0400] doug1: gyoza: there's nothing simple about doing web dev
[2014-07-15 16:05:01 -0400] doug1: gyoza: the web team?
[2014-07-15 16:05:07 -0400] tomduffield: a13x212 it has a ec2? helper method you can use in your recipes
[2014-07-15 16:05:12 -0400] tomduffield: plus lots of other really cool bits
[2014-07-15 16:05:12 -0400] gyoza: doug1: you dont have a web team at your company?
[2014-07-15 16:05:21 -0400] doug1: gyoza: engineering is about 6 people
[2014-07-15 16:05:23 -0400] gyoza: or "guy"
[2014-07-15 16:05:33 -0400] gyoza: so there is no creative/marketing department that does web stuff?
[2014-07-15 16:05:38 -0400] gyoza: you're being rather difficult man:P
[2014-07-15 16:05:42 -0400] doug1: gyoza: hah. no.
[2014-07-15 16:05:50 -0400] doug1: gyoza: it's a startup
[2014-07-15 16:06:01 -0400] gyoza: startups = ugly
[2014-07-15 16:06:01 -0400] doug1: anyway.... no Chef UI?
[2014-07-15 16:06:09 -0400] gyoza: chef master server has a ui
[2014-07-15 16:06:12 -0400] phutchins: vickleford: I've not personally used chef search in zero yet. It would work for local attributes but as it (the chef server) runs locally in memory you wouldn't get info about other nodes...
[2014-07-15 16:06:17 -0400] doug1: gyoza: Nasa is hiring.... Ames Research, can you imagine the bureacracy?
[2014-07-15 16:06:24 -0400] Eulipion: ui is pretty much useless
[2014-07-15 16:06:26 -0400] gyoza: doug1: i'd die
[2014-07-15 16:06:31 -0400] doug1: gyoza: me too
[2014-07-15 16:06:33 -0400] gyoza: Eulipion: i didnt want to say it:P
[2014-07-15 16:06:37 -0400] phutchins: vickleford: if you use it through opsworks or something like that you might be able to populate data that you could then search but you might as well just use that data from the opsworks attributes
[2014-07-15 16:06:49 -0400] Eulipion: if u have knife-ohno, the ui serves no purpose
[2014-07-15 16:07:17 -0400] vickleford: phutchins, gravy! thanks for the info
[2014-07-15 16:07:36 -0400] phutchins: vickleford: np
[2014-07-15 16:08:28 -0400] doug1: so the boss wants to replace rightscale. Sure. Yeah, right
[2014-07-15 16:08:32 -0400] gyoza: lol
[2014-07-15 16:08:36 -0400] gyoza: number 1 problem
[2014-07-15 16:08:38 -0400] gyoza: starting w/ rightscale
[2014-07-15 16:08:39 -0400] a13x212: tomduffield, thanks i'll look into it sugar, i am curious why ohai doesn't detect it as an ec2 instance
[2014-07-15 16:09:28 -0400] doug1: gyoza: well the interface blows but he wants teh same functionality
[2014-07-15 16:09:49 -0400] gyoza: tell him that rightscale has a web team of 50 people
[2014-07-15 16:09:59 -0400] doug1: gyoza: i told someone else that
[2014-07-15 16:10:11 -0400] doug1: gyoza: can't tell him. he's an argumentative aggressive prick
[2014-07-15 16:10:39 -0400] doug1: no, wait... I did tell him
[2014-07-15 16:11:02 -0400] gyoza: quit before its too late
[2014-07-15 16:11:04 -0400] vickleford: lol sounds like you have some layer8 challenges there doug1
[2014-07-15 16:11:14 -0400] gyoza: doug where you live
[2014-07-15 16:11:29 -0400] doug1: vickleford: hehe.... *cry*
[2014-07-15 16:11:37 -0400] doug1: gyoza: bay area
[2014-07-15 16:11:38 -0400] gyoza: getting a job is kind of easy if you know chef somewhat i heard?
[2014-07-15 16:11:48 -0400] gyoza: and aws
[2014-07-15 16:11:58 -0400] gyoza: so get out of there! sounds like bad juju
[2014-07-15 16:12:49 -0400] doug1: gyoza: i had 6 interviews the week before I started here, yes, chef is popular. Oh but you see all the jobs in the bay area are social networking, photo sharing, online gaming, media marketing.
[2014-07-15 16:13:00 -0400] Eulipion: is there a way to fire off an execute block from the application lwrp?
[2014-07-15 16:14:18 -0400] zaargy: doug1: you might want to look at scalr. it is like rightscale but it's open source and you can host inhouse.
[2014-07-15 16:15:57 -0400] doug1: zaargy: tanx
[2014-07-15 16:18:43 -0400] doug1: I reckon the UN should get involved and mandate maximum densities of people in offices.
[2014-07-15 16:23:55 -0400] anthonyacquanita: a13x212: Is this ec2 in a VPC?  You can't rely on ohai to detech ec2 via mac and other methods reliably.
[2014-07-15 16:24:13 -0400] anthonyacquanita: You can bootstrap the node and add  --hint=ec2  to add a ec2 hints file
[2014-07-15 16:33:39 -0400] doug1: might as well ask again. It's that or cry into my desk. There's no GUI for Chef is there? Puppet has one. :)
[2014-07-15 16:34:02 -0400] phutchins: doug1: Did you see my comments about Jenkins?
[2014-07-15 16:34:17 -0400] phutchins: doug1: what would you be trying to accomplish through said gui with Chef?
[2014-07-15 16:34:24 -0400] doug1: phutchins: i did...
[2014-07-15 16:34:33 -0400] doug1: phutchins: avoid people having to use chef to .... use chef. :)
[2014-07-15 16:34:54 -0400] phutchins: doug1: ok so set up an instance of jenkins and set up jobs to do the things that they would want to do
[2014-07-15 16:34:57 -0400] phutchins: and they can click buttons
[2014-07-15 16:35:08 -0400] doug1: phutchins: ie to deploy a foo server, boss wants people^H^H^H^H idiot users (as he obviously sees them) to just click it on a UI
[2014-07-15 16:35:33 -0400] phutchins: doug1: yeah, easily done in jenkins
[2014-07-15 16:35:49 -0400] doug1: phutchins: pondering.
[2014-07-15 16:36:21 -0400] phutchins: I actually do a lot of that. One click spins up a host, bootstrap's it, runs my chef recipes on it, populates the DB on it, sets up dns, etc...
[2014-07-15 16:36:31 -0400] phutchins: and you can have it tell you if it succedes or fails
[2014-07-15 16:36:32 -0400] geggam: we do the jenkins autocloud deployment for users thing
[2014-07-15 16:36:37 -0400] phutchins: and hook it into email and tons of other things.
[2014-07-15 16:36:49 -0400] gyoza: man
[2014-07-15 16:36:52 -0400] gyoza: looks like i need to install jenkins
[2014-07-15 16:37:00 -0400] gyoza: does it interface well with aws?
[2014-07-15 16:37:14 -0400] doug1: phutchins: not necessarily. simple case, first implementation. software package... before boss got panties in a bunch, edit version of package in attribute file and push to chef. If that was in Jenkins, jenkins has inputs but AFAIK there's no way to dynamically ... oh I suppose it would be a free text field.
[2014-07-15 16:37:18 -0400] geggam: jenkins runs anything you can script gyoza
[2014-07-15 16:37:24 -0400] gyoza: geggam: so anything:P
[2014-07-15 16:37:25 -0400] phutchins: gyoza: it by itself doesnt' really do much. You have to make it do it
[2014-07-15 16:37:26 -0400] geggam: aws cli ?
[2014-07-15 16:37:31 -0400] geggam: etc etc
[2014-07-15 16:37:32 -0400] phutchins: geggam: yes
[2014-07-15 16:37:35 -0400] phutchins: exactly :)
[2014-07-15 16:37:37 -0400] gyoza: i already have a bash script that runs through "create instance"
[2014-07-15 16:37:43 -0400] gyoza: would be easy to move it over to jenkins
[2014-07-15 16:37:45 -0400] phutchins: so i have it running my bash and ruby scripts that use aws cli and aws sdk
[2014-07-15 16:37:47 -0400] geggam: put bash into jenkins
[2014-07-15 16:37:48 -0400] geggam: yes
[2014-07-15 16:37:51 -0400] gyoza: nice
[2014-07-15 16:37:52 -0400] geggam: drop in
[2014-07-15 16:37:53 -0400] gyoza: thanks:)
[2014-07-15 16:37:57 -0400] phutchins: np :)
[2014-07-15 16:38:05 -0400] doug1: yah jenkins is better than me writing a UI
[2014-07-15 16:38:14 -0400] gyoza: im proud of my build.sh scripts
[2014-07-15 16:38:20 -0400] geggam: now... if jenkins could automate removal of systemd id be set
[2014-07-15 16:38:46 -0400] doug1: when I mentioned to the boss the other week the possibility of using jenkins for this kind of thing he looked all confused and asked why I would do that
[2014-07-15 16:38:53 -0400] Eulipion: ive got a UI that'll take u from bare metal to a chef'd node, https://github.com/kplimack/basejump
[2014-07-15 16:38:56 -0400] phutchins: geggam: heh
[2014-07-15 16:39:03 -0400] geggam: tell boss to boss and let you work doug1
[2014-07-15 16:39:04 -0400] phutchins: doug1: jsut do it then show him :)
[2014-07-15 16:39:09 -0400] phutchins: exactly haha
[2014-07-15 16:39:10 -0400] AdnanCloud: hello im doing my first install of chef on centos 7 on my home lab - should i use any particular base environment like KDE, GNOME? (linux newbie too) :)
[2014-07-15 16:39:20 -0400] phutchins: i started writing a few tools to use in such a manner actually
[2014-07-15 16:39:23 -0400] phutchins: called them auto tools
[2014-07-15 16:39:33 -0400] Eulipion: u should never name a tool "tool"
[2014-07-15 16:39:45 -0400] phutchins: lol
[2014-07-15 16:39:47 -0400] Eulipion: ha
[2014-07-15 16:39:58 -0400] gchristensen: phutchins: you named something `autotools'? :|
[2014-07-15 16:40:06 -0400] phutchins: feel free to take a look at the one i use for spinning up mongo hosts... its' called mondupe: git@github.com:phutchins/autotools.git
[2014-07-15 16:40:12 -0400] phutchins: gchristensen: that i did
[2014-07-15 16:40:20 -0400] phutchins: wasn't feeling so creative...
[2014-07-15 16:40:24 -0400] phutchins: gchristensen: you have a better idea?
[2014-07-15 16:40:49 -0400] gchristensen: phutchins: I just avoid using the same name as extremely well known build tools from GNU
[2014-07-15 16:41:27 -0400] gchristensen: phutchins: https://en.wikipedia.org/wiki/Autotools
[2014-07-15 16:41:27 -0400] phutchins: gchristensen: good point. didnt' even consider :)
[2014-07-15 16:41:31 -0400] phutchins: oh i know
[2014-07-15 16:41:37 -0400] phutchins: jsut hadn't thought about it.
[2014-07-15 16:41:51 -0400] jkeiser: toolsfordoingstuff
[2014-07-15 16:42:00 -0400] jkeiser: stuffdoer
[2014-07-15 16:42:03 -0400] phutchins: lol
[2014-07-15 16:42:09 -0400] phutchins: stufftodothings
[2014-07-15 16:42:16 -0400] phutchins: thingsdoingstuff
[2014-07-15 16:42:20 -0400] phutchins: ^ i think thats it.
[2014-07-15 16:42:36 -0400] phutchins: doingstuffwiththings ?
[2014-07-15 16:42:38 -0400] jkeiser: doingstufftothings
[2014-07-15 16:42:45 -0400] phutchins: lol
[2014-07-15 16:42:45 -0400] Eulipion: is there a way to fire off an execute block from the application lwrp, or to tell the rails provider which ruby/bundler to use?
[2014-07-15 16:42:54 -0400] jkeiser: doingthingstostuff?
[2014-07-15 16:44:33 -0400] phutchins: git@github.com:phutchins/stuffwiththings.git
[2014-07-15 16:44:34 -0400] phutchins: :)
[2014-07-15 16:46:47 -0400] Eulipion: coderanger: is there a way to fire off an execute block from the application lwrp, or to tell the rails provider which ruby/bundler to use?
[2014-07-15 16:56:18 -0400] vt102: "When I knife ec2 create server with --associate-public-ip, it brings up the instance but won't bootstrap...I'm not getting public DNS on the public IP, but I wouldn't expect that to just break everything."
[2014-07-15 16:57:00 -0400] vt102: It does break everything.  Looks like the public IP is passed as a nil value into knife-ec2, which then tests to make sure it's not getting a nil and pukes.
[2014-07-15 16:57:08 -0400] vt102: Solution was just to turn on public DNS in the VPC.
[2014-07-15 17:02:41 -0400] meth: is it possible to configure chef server to reject force pushes?
[2014-07-15 17:04:01 -0400] tomduffield: meth I don't believe so. What is your issue?
[2014-07-15 17:04:15 -0400] Xore: would it not be better to revoke access from whoever's force-pushing that shouldn't be?
[2014-07-15 17:04:35 -0400] Xore: (unless that's not your problem)
[2014-07-15 17:06:16 -0400] meth: well if two cookbooks have the same name one could override the other? also yea if someone were to ever force push using something like berkshelf they could end up overriding a few cookbooks that we have custom patches to until they get accepted upstream
[2014-07-15 17:13:31 -0400] Xore: haven't been able to find any mention on the site, so i thought i'd ask here: does anyone know when the next stable release is going to be for chef-client?
[2014-07-15 17:14:19 -0400] Xore: we're coming up on almost a year ago since 11.6 was released
[2014-07-15 17:14:25 -0400] Xore: july 23
[2014-07-15 17:15:42 -0400] rbowlby: anyone have a port forwarding example for test kitchen
[2014-07-15 17:15:56 -0400] rbowlby: vagrant driver is being used
[2014-07-15 17:16:26 -0400] anop: anyone used Amazon aws to deploy stuff?
[2014-07-15 17:17:51 -0400] shlant1: anop: sup
[2014-07-15 17:17:52 -0400] zts: Xore: uh, we're up to chef-client 11.12.8...
[2014-07-15 17:18:00 -0400] anop: sam
[2014-07-15 17:18:19 -0400] rsavage: zsh is the bomb digitty ;)
[2014-07-15 17:18:26 -0400] shlant1: +1
[2014-07-15 17:18:32 -0400] rsavage: especially when working with git and chef!
[2014-07-15 17:21:21 -0400] Xore: zts: clearly i am confused by something i read somewhere
[2014-07-15 17:21:47 -0400] Xore: which i can no longer find
[2014-07-15 17:21:51 -0400] Xore: great.
[2014-07-15 17:26:45 -0400] juliancdunn: the /topic here is usually pretty up-to-date about what the current version is
[2014-07-15 17:29:19 -0400] x0nic: rbowlby: https://github.com/balanced-cookbooks/balanced-ci/blob/c9f771ca3263208f162460d2d9fdb5f92b151b8b/.kitchen.yml#L26
[2014-07-15 17:30:43 -0400] doug1: oh no. Boss has arrived. :((
[2014-07-15 17:30:55 -0400] phutchins: heh
[2014-07-15 17:30:59 -0400] phutchins: throw jenkins at him
[2014-07-15 17:31:07 -0400] phutchins: (metiphorically, not the monitor)
[2014-07-15 17:31:16 -0400] doug1: How could soemone who someone who seemed so normal in the interviews turn into such a dumbass?
[2014-07-15 17:31:34 -0400] doug1: phutchins: Amazon won't give me the monitor. :-\
[2014-07-15 17:32:17 -0400] Eulipion: doug1: userp ur boss.  show his boss this http://imgur.com/xh7pMLa
[2014-07-15 17:33:47 -0400] doug1: Eulipion: he's very traditional. mongodb deploy... he didn't want me to be involved in packaging it. he figured that was a job for engineering
[2014-07-15 17:34:18 -0400] doug1: strangely his boss is a very nice guy
[2014-07-15 17:34:47 -0400] rbowlby: thanks X0nic
[2014-07-15 17:34:55 -0400] doug1: my boss must be aware he's an aggressive asshole because he doesn't talk to his boss like he's a piece of shit, like he walks to the eng mgr and others
[2014-07-15 17:34:57 -0400] doug1: anyway
[2014-07-15 17:35:19 -0400] Eulipion: yea, tell his boss that he's preserving his job by doing it poorly
[2014-07-15 17:35:24 -0400] gchristensen: doug1: that is called "being a chronic asshole"
[2014-07-15 17:35:31 -0400] rbowlby: anyone want to take at a stab at explaining to me why the main community apache2 cookbook doesn't support 2.4?
[2014-07-15 17:35:40 -0400] gchristensen: doug1: http://www.amazon.com/The-Asshole-Rule-Civilized-Workplace/dp/0446698202
[2014-07-15 17:35:58 -0400] rbowlby: seems worthy of a chef FTE's attention
[2014-07-15 17:36:17 -0400] sdadh01: hi wondering if anyone had any issues with the windows cookbook and NoMethodError issues? I have a gist here : https://gist.github.com/sdadh01/33543b6ccf24ed848669
[2014-07-15 17:36:25 -0400] sdadh01: describling the issue
[2014-07-15 17:36:37 -0400] gchristensen: rbowlby: are you talking about on a technical level, or on decision-based level?
[2014-07-15 17:36:40 -0400] shlant1: rbowlby: it requires a massive rework. I was looking for that a while back as welll
[2014-07-15 17:36:57 -0400] shlant1: I think there are some forks that have made progress
[2014-07-15 17:37:52 -0400] rbowlby: just really surprised is all
[2014-07-15 17:38:03 -0400] doug1: gchristensen: me?
[2014-07-15 17:38:06 -0400] rbowlby: as far as first impressions with chef..the apache cookbook is of paramount importance
[2014-07-15 17:38:16 -0400] doug1: gchristensen: I may leave that open on my monitor all day long
[2014-07-15 17:38:22 -0400] rbowlby: so I guess from a decision-based level it seems like a bad idea
[2014-07-15 17:38:27 -0400] gchristensen: doug1: might be worth a read
[2014-07-15 17:38:37 -0400] gleam: the existing apache2 cookbook is going to be phased out in favor of a new httpd cookbook, i think, but i do generally agree that it should have apache 2.4 support by now.
[2014-07-15 17:39:06 -0400] shlant1: this is what happens when you try and maintain a global single cookbook :)
[2014-07-15 17:39:14 -0400] rbowlby: gleam, is that new cookbook avail yet?
[2014-07-15 17:39:16 -0400] gleam: although actually opscode-cookbooks/apache2 redirects me to onehealth-cookbooks/apache2 now
[2014-07-15 17:39:30 -0400] gleam: (or always has?)
[2014-07-15 17:39:54 -0400] gleam: if you use berkshelf it's not as much of an issue to use the onehealth cook-1900 branch
[2014-07-15 17:39:57 -0400] sdadh01: nah, onehelath took it up recently (I did some work for those guys )
[2014-07-15 17:39:58 -0400] rbowlby: shlant1, agree...global cookbook pattern is questionable when you look at something as complicated and varied as apache
[2014-07-15 17:40:11 -0400] juliancdunn: we gave away the apache2 cookbook because it had such technical debt
[2014-07-15 17:40:18 -0400] rbowlby: gleam, I am on that branch, doesn't work
[2014-07-15 17:40:20 -0400] juliancdunn: this is the beginning of the httpd cookbook: https://github.com/someara/httpd
[2014-07-15 17:40:36 -0400] gleam: the cook-1900 branch works fine for me with apache 2.4/ubuntu 14.04
[2014-07-15 17:40:39 -0400] juliancdunn: and the FTE that we have dedicated to cookbooks is someara, but you have to keep in mind that he has 100+ cookbooks to maintain
[2014-07-15 17:40:49 -0400] rbowlby: gleam, not me same ubuntu ver too
[2014-07-15 17:41:11 -0400] gleam: this is what i override for my apache wrapper cookbook:
[2014-07-15 17:41:12 -0400] gleam: https://gist.github.com/gleamicus/2cd1ba59c7b998370ec8
[2014-07-15 17:41:20 -0400] gleam: you may need those
[2014-07-15 17:41:33 -0400] rbowlby: juliancdunn, understood thanks. would you recommend the new httpd for 2.4 on ubuntu 14?
[2014-07-15 17:42:01 -0400] juliancdunn: rbowlby: I don't think it's ready yet, but you can try it out
[2014-07-15 17:42:29 -0400] rbowlby: gleam, that default modules list may do it for me..let me try
[2014-07-15 17:42:29 -0400] juliancdunn: mostly someara has been tearing his hair out over the 1500 different ways to set up apache on all the distros :-(
[2014-07-15 17:42:41 -0400] rbowlby: haha, I bet
[2014-07-15 17:43:03 -0400] shlant1: why not learn from mistakes and have distro namespaced versions?
[2014-07-15 17:43:13 -0400] doug1: Anyone know a way I could anonymously send the asshole book to my boss? :)
[2014-07-15 17:43:17 -0400] rbowlby: perhaps multiple apache cookbooks with a shared cookbook library would be a good pattern?
[2014-07-15 17:43:39 -0400] phutchins: distro cookbook wrapper
[2014-07-15 17:43:40 -0400] juliancdunn: rbowlby & shlant1 that's the objective to all the HWRPs and libraries in https://github.com/someara/httpd/tree/master/libraries
[2014-07-15 17:43:58 -0400] juliancdunn: do all the distro-specific crap in pure Ruby, present a unified interface just like the mysql cookbook
[2014-07-15 17:44:13 -0400] juliancdunn: instead of cluttering recipe context with all that
[2014-07-15 17:44:23 -0400] rbowlby: interesting, sounds like an improvement
[2014-07-15 17:47:54 -0400] rsavage: question my fellow cheflings:  I have a wrapper cookbook that I use for all of my custom recipe writing.   Is there anyway to have a recipe under this wrapper cookbook of mine which can include a recipe from another cookbook without having to add it to my wrapper's metadata.rb?
[2014-07-15 17:49:53 -0400] tequilarista: why would you want to do that?
[2014-07-15 17:50:27 -0400] rbowlby: gleam "Invalid command 'LockFile'" when I attempt to start apache using that branch
[2014-07-15 17:50:53 -0400] gyoza: hey guys, if vagrant isnt taking changes to my test cookbook what do i need to clear out?
[2014-07-15 17:51:00 -0400] gyoza: it seems its using an old cached copy
[2014-07-15 17:51:18 -0400] gyoza: i've udpated metadata, berks install, all that stuff;(
[2014-07-15 17:52:36 -0400] rsavage: tequilarista: because I can do it at the 'role' level
[2014-07-15 17:52:41 -0400] tequilarista: ugg
[2014-07-15 17:52:48 -0400] tequilarista: pretty sure that's an anti-pattern
[2014-07-15 17:53:04 -0400] rsavage: tequilarista, oh ok
[2014-07-15 17:53:16 -0400] lamont_oc: gyoza log into the virt and blow away /tmp/kitchen i think?
[2014-07-15 17:53:35 -0400] tequilarista: alternately use the big hammer and vagrant destroy and start over
[2014-07-15 17:53:35 -0400] tequilarista: ;)
[2014-07-15 17:53:41 -0400] rbowlby: gleam, did you make any changes outside of your attr overrides that might help me
[2014-07-15 17:56:02 -0400] lamont_oc: you can always include_recipe without having metadata.rb as long as something else states the dep that you need, but then youre in a situation where you clearly /have/ a dep, but youre not including it, so running TK on that cookbook in isolation might be horribly broken.
[2014-07-15 17:56:39 -0400] gleam: this is the entire contents of mywrapper::default https://gist.github.com/gleamicus/e4e5e3dd33c5d49d1abc
[2014-07-15 17:56:43 -0400] gleam: so you can see basically nothing
[2014-07-15 17:56:55 -0400] gleam: again i'm using the cook-1900 branch, the main branch doesn't work
[2014-07-15 17:57:23 -0400] rbowlby: me too
[2014-07-15 17:57:51 -0400] rbowlby: well, I'm using cook-3900 so maybe that's the diff
[2014-07-15 17:58:12 -0400] gleam: that's probably what i'm using
[2014-07-15 17:58:15 -0400] gleam: and just misremembering
[2014-07-15 17:58:19 -0400] rbowlby: fuck this I don't have time, going nginx. "We'll do it live!"
[2014-07-15 17:58:23 -0400] gleam: haha
[2014-07-15 18:00:14 -0400] jblack: Hi guys. =)
[2014-07-15 18:01:02 -0400] jblack: So, I have a new work laptop. I have chef and knife on it, but I don't seem to have knife-block despite gem list showing that it's installed. Any suggestions?
[2014-07-15 18:01:35 -0400] erthad: hiall
[2014-07-15 18:02:09 -0400] erthad: is "knife cookbook site install" broken since the supermarket emerged?
[2014-07-15 18:02:38 -0400] Eulipion: erthad: make sure you specify the version you want
[2014-07-15 18:02:55 -0400] Eulipion: or use github install
[2014-07-15 18:03:29 -0400] Eulipion: i had my apt cb overwritten a few times with the supermarket version and hose a few things
[2014-07-15 18:04:58 -0400] jblack: Oh, I think I see the problem. my knife is coming from /opt/chef/embedded/bin/ruby, and not /usr/bin/ruby
[2014-07-15 18:05:16 -0400] tequilarista: having multiple rubies is bad juju
[2014-07-15 18:05:55 -0400] jblack: It's not intentional. Omnibus chef (I bootstrapped my laptop) tucks away it's own ruby.
[2014-07-15 18:05:58 -0400] shlant: da
[2014-07-15 18:06:00 -0400] erthad: Eulipion: no, specifying the version does not work too
[2014-07-15 18:06:32 -0400] tequilarista: jblack: oh I know  it's any easy scenario to get into, which is itself part of the problem :)
[2014-07-15 18:06:34 -0400] Eulipion: erthad: github install ?
[2014-07-15 18:07:27 -0400] erthad: Eulipion: I was able to download the cookbook from the link at supermarket page
[2014-07-15 18:08:04 -0400] erthad: actually it looks like a bug in supermarket as knife produces error like "Response body length 2143 does not match HTTP Content-Length header 549"
[2014-07-15 18:09:15 -0400] jblack: aptitude remove chef; aptitude install chef  fixed everything right up. =)
[2014-07-15 18:16:34 -0400] a13x212: i'm still stuck at trying to detect if an instance is ec2
[2014-07-15 18:17:17 -0400] erthad: Eulipion: the issue was with older version of knife (11.10.4). The newer one (11.12.2) works fine
[2014-07-15 18:17:21 -0400] rbowlby: a13x212 ohai hint?
[2014-07-15 18:17:27 -0400] a13x212: how do i provide chef with hints?>
[2014-07-15 18:19:31 -0400] Eulipion: erthad: nice find, im switching to DK to get all the new stuff
[2014-07-15 18:23:19 -0400] erthad: Eulipion: I've found I've been using knife from gem. Knife from omnibus (11.12.2) looks fine though at first sight.
[2014-07-15 18:23:44 -0400] Eulipion: i finally got rid of rvm and rbenv and i dont have those issues anymore
[2014-07-15 18:26:19 -0400] rbowlby: was the fpm module removed from the php cookbook?
[2014-07-15 18:28:18 -0400] rbowlby: ah, default option now it would seem
[2014-07-15 18:29:22 -0400] rbowlby: proper way to exclude a include_recipe statement in a cookbook wrapper?
[2014-07-15 18:29:55 -0400] gchristensen: rbowlby: you want to un-include a recipe?
[2014-07-15 18:30:05 -0400] rbowlby: suppose I do yes
[2014-07-15 18:30:11 -0400] gchristensen: you can't
[2014-07-15 18:30:18 -0400] rbowlby: you set me up for that
[2014-07-15 18:30:28 -0400] gleam: haha
[2014-07-15 18:30:38 -0400] gchristensen: just making sure that is actually what you were asking :)
[2014-07-15 18:30:49 -0400] rbowlby: lol, okay
[2014-07-15 18:31:02 -0400] rbowlby: so any alternative methods of accomplishing same thing
[2014-07-15 18:32:34 -0400] Eulipion: put the things to be included in an attribute that can be edited
[2014-07-15 18:32:35 -0400] tequilarista: conditionalize it behind a node attribute?
[2014-07-15 18:32:45 -0400] tequilarista: Eulipion wins
[2014-07-15 18:32:50 -0400] Eulipion: winning!
[2014-07-15 18:33:54 -0400] Eulipion: im losing at making the application lwrp use the right f'ing ruby
[2014-07-15 18:34:16 -0400] Eulipion: coderanger: ^ ping
[2014-07-15 18:34:23 -0400] rbowlby: I'd rather not modify the community cookbook that has the include statement I don't want
[2014-07-15 18:36:04 -0400] tequilarista: in our case, we've pulled source for the community cookbook and fixed them locally, pull requesting our change back to the owner in the hopes that they'll take the fix and we don't have to maintain our own copy anymore
[2014-07-15 18:36:39 -0400] tequilarista: this is part of a larger topic I hope to discuss with folks at the chef summit this fall :)
[2014-07-15 18:39:20 -0400] rbowlby: tequilarista, sounds perfect...what's your merge success rate?
[2014-07-15 18:39:27 -0400] tequilarista: iffy
[2014-07-15 18:39:32 -0400] tequilarista: which is part of the problem
[2014-07-15 18:39:32 -0400] tequilarista: :)
[2014-07-15 18:39:34 -0400] rbowlby: :/
[2014-07-15 18:40:10 -0400] rbowlby: right, need a method of publicly shaming those with open PRs
[2014-07-15 18:40:40 -0400] tequilarista: or a mechanism to boot the non-responder versions from the marketplace if everybody else has switched to a branch
[2014-07-15 18:40:42 -0400] tequilarista: something
[2014-07-15 18:40:55 -0400] gchristensen: the real solution here is namespacing the cookbooks
[2014-07-15 18:41:11 -0400] Eulipion: i think there's some rfc being written regarding marketplace protocols
[2014-07-15 18:41:23 -0400] gchristensen: IIRC with cookbook namespacing :)
[2014-07-15 18:41:51 -0400] erichs1: ohai! Is this the right channel to discuss the knife-ec2 plugin?
[2014-07-15 18:42:14 -0400] tequilarista: speaking of things we have pending pull requests on...
[2014-07-15 18:42:14 -0400] tequilarista: :)
[2014-07-15 18:42:27 -0400] erichs1: :)
[2014-07-15 18:42:32 -0400] tequilarista: never hurts to ask
[2014-07-15 18:43:46 -0400] erichs1: I'm using latest ChefDK 11.14.0.rc2, with knife-ec2 0.8.0. I cannot seem to get 'knife ec2 server create' to respect the -j option, and load JSON attributes at bootstrap time. Anyone run into this?
[2014-07-15 18:44:08 -0400] tequilarista: not yet, but I'll be pulling the new chefdk shortly
[2014-07-15 18:44:16 -0400] tequilarista: will let you know if I hit that
[2014-07-15 18:44:45 -0400] erichs1: I upgraded because 11.6.2 was showing the same behavior. Same symptoms.
[2014-07-15 18:45:07 -0400] erichs1: thanks, though.
[2014-07-15 18:52:42 -0400] icarus_: has anyone seen this error before:
[2014-07-15 18:52:42 -0400] icarus_: ERROR: chef-server_pg_user[opscode_chef] (chef-server::postgresql line 170) had an error: PG::ConnectionBad: could not connect to server: No such file or directory Is the server running locally and accepting connections on Unix domain socket "/tmp/.s.PGSQL.5432"?
[2014-07-15 18:52:53 -0400] icarus_: it happens on chef-server-ctl reconfigure
[2014-07-15 18:53:10 -0400] icarus_: it happened to me about a week ago, but i can't remember the fix
[2014-07-15 18:54:53 -0400] icarus_: heres the stacktrace: https://gist.github.com/jjdevbiz/dd16bf761991ce341113
[2014-07-15 18:58:59 -0400] nathenharvey: Hello!  The postmortem for the recent berkshelf api will start soon and will be streaming to youtube here:  http://youtu.be/FTuXsCjsH8c
[2014-07-15 18:59:13 -0400] nathenharvey: Blog post about the incident can be found here:  http://www.getchef.com/blog/2014/07/14/berkshelf-api-issues-postmortem-meeting/
[2014-07-15 18:59:13 -0400] anthonyacquanita: a13x212:  How r u bootstrapping the box?  You can put a ec2 ohai hint on the box a few ways
[2014-07-15 18:59:55 -0400] anthonyacquanita: a13x212:  --hint=ec2 works for knife-ec2 and knife bootstrap
[2014-07-15 19:02:35 -0400] coderanger: anthonyacquanita: Thats automatically added for knife-ec2
[2014-07-15 19:02:51 -0400] coderanger: icarus_: Do you see the postgres server running?
[2014-07-15 19:02:58 -0400] coderanger: icarus_: You can check with chef-server-ctl status
[2014-07-15 19:03:25 -0400] anthonyacquanita: I thought it didn't work for AWS VPC stuff
[2014-07-15 19:03:34 -0400] anthonyacquanita: or wasn't some time ago
[2014-07-15 19:04:09 -0400] Eulipion: hey coderanger: how do i make the application/rails lwrp use the correct poise-ruby ?
[2014-07-15 19:04:14 -0400] icarus_: coderanger: its running
[2014-07-15 19:04:22 -0400] anthonyacquanita: but yeah, I would expect knife-ec2 to ALWAYS create the ec2 attr.  I've been conditioned to be explicit.
[2014-07-15 19:04:42 -0400] coderanger: Eulipion: Set ENV['PATH'] correctly
[2014-07-15 19:04:59 -0400] Eulipion: it keeps installing gems to embedded ruby
[2014-07-15 19:05:09 -0400] shlant: anyone know what the rbenv equivalent (if there is one) for /usr/bin/ruby_executable_hooks?
[2014-07-15 19:06:07 -0400] reset: paulmooring: nathenharvey didn't get a link to the hangout
[2014-07-15 19:06:43 -0400] paulmooring: jtimberman can you hook up reset?
[2014-07-15 19:08:37 -0400] Eulipion: coderanger: http://pastebin.com/sbJCz3gM
[2014-07-15 19:09:30 -0400] icarus_: coderanger: it fails on * execute[create opscode-pgsql database] action run
[2014-07-15 19:10:09 -0400] icarus_: i thought it might have been port collision on 5432
[2014-07-15 19:10:23 -0400] icarus_: i changed the port in chef-server.rb to something else, but it gives the same here
[2014-07-15 19:10:24 -0400] phelms: If I delete an enviornment what happens to the nodes inside?
[2014-07-15 19:14:29 -0400] coderanger: phelms: I don't think anything, so they probably start 404ing on converge
[2014-07-15 19:16:06 -0400] someara: include_recipe 'nagios::berkshelf'
[2014-07-15 19:16:27 -0400] cwebber: nathenharvey: note that a bug fix was implemented
[2014-07-15 19:16:51 -0400] phelms: coderanger: Yeah nothing but I could not view the node to change the enviro once I deleted it
[2014-07-15 19:17:00 -0400] coderanger: Eulipion: I would have to actually try it out, I've not tested the two together :-(
[2014-07-15 19:17:10 -0400] coderanger: phelms: View via knife or via web UI?
[2014-07-15 19:17:18 -0400] phelms: web ui
[2014-07-15 19:17:24 -0400] phelms: I could still query the node attrs
[2014-07-15 19:17:27 -0400] coderanger: phelms: Enterprise Chef or Open Source?
[2014-07-15 19:17:30 -0400] phelms: open source
[2014-07-15 19:17:36 -0400] coderanger: phelms: Yeah, probably won't be fixed :-(
[2014-07-15 19:17:46 -0400] coderanger: phelms: the FOSS web ui is deprecated and will be removed in a future release
[2014-07-15 19:17:47 -0400] phelms: I'm building my own web UI
[2014-07-15 19:18:05 -0400] phelms: I don't really care about it yet .. good to know for the future though
[2014-07-15 19:18:17 -0400] coderanger: phelms: You should be able to repair the nodes via knife
[2014-07-15 19:18:23 -0400] coderanger: or just general API stuffs
[2014-07-15 19:18:35 -0400] coderanger: You can probably use knife exec to do it in bulk
[2014-07-15 19:18:36 -0400] phelms: coderanger: I just deleted the one that had the issue..was my own desktop
[2014-07-15 19:18:43 -0400] coderanger: Heh, or that
[2014-07-15 19:19:40 -0400] rbowlby: if test-kitchen doesn't find a .kitchen.yml it should move up recursively IMO
[2014-07-15 19:19:54 -0400] rbowlby: having to cd before running a kitchen command sucks
[2014-07-15 19:20:06 -0400] rbowlby: \()/
[2014-07-15 19:21:21 -0400] phelms: I wish Chef had an option for "Location"
[2014-07-15 19:22:00 -0400] coderanger: phelms: What would it do?
[2014-07-15 19:22:18 -0400] coderanger: rbowlby: Patches welcome :)
[2014-07-15 19:22:35 -0400] rsavage: what's a good way to test if a user exists in a chef recipe?
[2014-07-15 19:22:56 -0400] rbowlby: touch coderanger  touch
[2014-07-15 19:23:28 -0400] coderanger: rsavage: ohai loads all that in to node['etc']['passwd']
[2014-07-15 19:23:34 -0400] coderanger: rsavage: But thats just users that exist when chef starts
[2014-07-15 19:23:59 -0400] phelms: coderanger: I mean I will just use an attribute - but enviornment is the level (dev,preview,prod) - roles are the "product" (or particular enviornment since we are running different products here) and tags will be for the "type" of server
[2014-07-15 19:24:08 -0400] rsavage: thankx cw
[2014-07-15 19:24:10 -0400] phelms: but I'd like to know from a location which Datacenter the nodes are in
[2014-07-15 19:24:11 -0400] rsavage: cr
[2014-07-15 19:24:54 -0400] coderanger: phelms: Sounds like node attrs is what you want, but check out poise-appenv, might address some of your need too
[2014-07-15 19:24:59 -0400] rsavage: coderanger, I am trying to do a conditional on 'only_if user exists'
[2014-07-15 19:25:09 -0400] phelms: coderanger: thanks i'll check it out
[2014-07-15 19:25:39 -0400] Eulipion: rsavage: if %x[grep #{user} /etc/passwd]
[2014-07-15 19:25:48 -0400] rsavage: cool!
[2014-07-15 19:26:14 -0400] rsavage: thanks!
[2014-07-15 19:26:44 -0400] coderanger: rsavage: I wouldn't do that, at a minimum use `getent passwd`
[2014-07-15 19:28:48 -0400] icarus_: coderanger: have you ever seen postgres complain before during chef-server-ctl reconfigure?
[2014-07-15 19:28:58 -0400] rsavage: coderanger ok
[2014-07-15 19:30:17 -0400] erichs1: quit
[2014-07-15 19:34:54 -0400] coderanger: rsavage: Okay, back
[2014-07-15 19:35:03 -0400] coderanger: rsavage: So what user is this? Is it something that chef is creating?
[2014-07-15 19:36:05 -0400] Damm: icarus, upgrading?
[2014-07-15 19:36:33 -0400] Damm: lol
[2014-07-15 19:37:20 -0400] rsavage: coderanger: no it's a house cleaning recipe I am putting together to remove crap (ie installed services outsite of RPMs, etc).
[2014-07-15 19:39:52 -0400] coderanger: rsavage: Then you can check like only_if { node['etc']['passwd']['theusername'] }
[2014-07-15 19:39:52 -0400] rsavage: yay it worked
[2014-07-15 19:39:54 -0400] Damm: rsavage, you should use id
[2014-07-15 19:40:01 -0400] coderanger: will be much faster than shellout :)
[2014-07-15 19:40:10 -0400] rsavage: execute "nuke logstash process" do
[2014-07-15 19:40:10 -0400] rsavage:   only_if do
[2014-07-15 19:40:11 -0400] rsavage:     %x[getent passwd|grep logstash]
[2014-07-15 19:40:12 -0400] rsavage:     ($? == 1)
[2014-07-15 19:40:12 -0400] rsavage:   end
[2014-07-15 19:40:12 -0400] rsavage:   command "pkill -u logstash"
[2014-07-15 19:40:13 -0400] rsavage: end
[2014-07-15 19:40:22 -0400] coderanger: rsavage: Please use a pastebin for multi-line pastes
[2014-07-15 19:40:27 -0400] Damm: rsavage, only_if { `id -u bob`}
[2014-07-15 19:40:28 -0400] rsavage: yeah I forgot
[2014-07-15 19:40:33 -0400] Damm: or using shellout
[2014-07-15 19:40:40 -0400] Damm: there's likely better ruby ways to test too
[2014-07-15 19:40:42 -0400] coderanger: rsavage: only_if { node['etc']['passwd']['logstash'] }
[2014-07-15 19:40:44 -0400] Damm: as ruby does support getent
[2014-07-15 19:40:49 -0400] rsavage: ah cool
[2014-07-15 19:40:52 -0400] rsavage: thanks ranger
[2014-07-15 19:45:43 -0400] tgo: hi, is this the right channel to ask about test-kitchen/chef?
[2014-07-15 19:47:13 -0400] tgo: I'm trying to setup virtualbox / test-kitchen and wonder whether I should do bridge or nat...
[2014-07-15 19:47:19 -0400] tgo: having trouble w/ portforwarding
[2014-07-15 19:50:41 -0400] mattstratton: tgo - there is also #kitchenci
[2014-07-15 19:55:59 -0400] Eulipion: coderanger: even through i'm setting ENV['PATH'], gems still get installed into embedded ruby.  ;(
[2014-07-15 19:58:03 -0400] icarus: Damm: its had the same chef server version on it
[2014-07-15 20:06:59 -0400] tgo: mattstratton: th anks!
[2014-07-15 20:07:49 -0400] geggam: docker people http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2014-3499
[2014-07-15 20:09:43 -0400] holoway: geggam: ouch!
[2014-07-15 20:09:50 -0400] holoway: geggam: bright side, easy to fix
[2014-07-15 20:10:25 -0400] geggam: yes n no
[2014-07-15 20:10:42 -0400] geggam: fix no... minimize users who can attack yes
[2014-07-15 20:11:06 -0400] geggam: as long as they dont escalate privs
[2014-07-15 20:11:29 -0400] geggam: imagine the information passed on that socket... is it all encrypted ?
[2014-07-15 20:11:55 -0400] holoway: geggam: I don't think so - it's a pure control socket to the docker API
[2014-07-15 20:12:09 -0400] holoway: geggam: pretty sure limiting the vector is all you can do
[2014-07-15 20:12:19 -0400] holoway: geggam: without adding a whole other layer of auth
[2014-07-15 20:12:25 -0400] holoway: I'm sure #docker would know more
[2014-07-15 20:12:35 -0400] geggam: i dont use docker holoway
[2014-07-15 20:12:41 -0400] geggam: ran across it
[2014-07-15 20:12:49 -0400] holoway: geggam: ahh - yeah, it has a socket for accepting local command/control
[2014-07-15 20:19:03 -0400] drywheat: What should we store in the Chef::Config[:file_cache_path]?
[2014-07-15 20:19:40 -0400] drywheat: remotely downloaded sources?
[2014-07-15 20:20:24 -0400] ranjib: sockets and namespaces can be strange
[2014-07-15 20:20:55 -0400] ranjib: abstract linux sockets are still weird on network namespace.. in fact they dont work as it is. you have to do raw syscall etc
[2014-07-15 20:23:10 -0400] Eulipion: anyone know how to get the "pg" gem to install?
[2014-07-15 20:24:05 -0400] holoway: Eulipion: 'gem install pg' too trite a response? :)
[2014-07-15 20:24:53 -0400] Eulipion: holoway: "Can't find the PostgreSQL client library (libpq)".  jtimberman has a gist of how he fixed it, but it's not quite working for me (https://gist.github.com/jtimberman/3954641)
[2014-07-15 20:25:45 -0400] jtimberman: holoway: there's special hoops to get it installed w/in an omnibus chef
[2014-07-15 20:26:13 -0400] jtimberman: Eulipion: https://github.com/hw-cookbooks/postgresql/blob/develop/recipes/ruby.rb
[2014-07-15 20:26:32 -0400] Eulipion: jtimberman: sweet, thx
[2014-07-15 20:50:38 -0400] nathenharvey: details from today's postmortem, including a recording of the meeting and list of action items, can be found on the Chef blog here:  http://www.getchef.com/blog/2014/07/14/berkshelf-api-issues-postmortem-meeting/
[2014-07-15 20:59:40 -0400] Neozonz: can someone run me through this code? https://gist.github.com/anonymous/018b2aa3e2c5be7fcd98
[2014-07-15 21:00:02 -0400] coderanger: Neozonz: Oh god thats terrifying
[2014-07-15 21:00:21 -0400] Neozonz: it's what amazon uses to parse their hosts file on instances!
[2014-07-15 21:00:41 -0400] coderanger: Basically it scans through the whole opsworks config
[2014-07-15 21:00:51 -0400] coderanger: and renders a hostsfile like "name ip\n"
[2014-07-15 21:01:02 -0400] coderanger: with some tracking to deal with nodes that are in multiple layers
[2014-07-15 21:01:13 -0400] Neozonz: hmm but it's not working on my instances :(
[2014-07-15 21:01:41 -0400] Neozonz: https://github.com/aws/opsworks-cookbooks/blob/8eab2b54e1753cf6deb9be1210f55f092b986d4a/opsworks_stack_state_sync/templates/default/hosts.erb
[2014-07-15 21:02:18 -0400] coderanger: What issue are you seeing?
[2014-07-15 21:02:38 -0400] Neozonz: it runs but only gets up to line 13
[2014-07-15 21:02:51 -0400] Neozonz: I'm referencing the same erb, but i removed line 14 because it causes issues in my env
[2014-07-15 21:03:54 -0400] coderanger: define "gets up to"?
[2014-07-15 21:05:06 -0400] Neozonz: coderanger, https://gist.github.com/anonymous/3fc42ce64322c3ae0464
[2014-07-15 21:06:01 -0400] Neozonz: After the recipes run I see a /etc/hosts file  and it parses the erb up to the line containing 127.0.0.1
[2014-07-15 21:06:14 -0400] Neozonz: but it does not parse any hostname to ip from the aws layers
[2014-07-15 21:06:37 -0400] coderanger: Are you sure the node data is set correctly?
[2014-07-15 21:08:10 -0400] Neozonz: node data?
[2014-07-15 21:08:11 -0400] Neozonz: it's set via opsworks so I would believe so
[2014-07-15 21:12:38 -0400] Neozonz: coderanger, any idea?
[2014-07-15 21:12:42 -0400] coderanger: Neozonz: You might want to check via Chef::Log
[2014-07-15 21:12:53 -0400] coderanger: Just dump out the info and make sure it matches your expectations
[2014-07-15 21:13:02 -0400] Neozonz: how would one do that
[2014-07-15 21:13:10 -0400] Neozonz: dump the info?
[2014-07-15 21:13:28 -0400] Neozonz: there should be nothing wrong with the logic since it works on every other instance
[2014-07-15 21:14:00 -0400] Neozonz: but i'm modifying it to remove a single line, the only thing i can think of is the data isn't being passed off properly
[2014-07-15 21:14:15 -0400] anop: node=server?
[2014-07-15 21:15:43 -0400] Neozonz: node=server?
[2014-07-15 21:16:56 -0400] Neozonz: ah coderanger i think i got it ha-ha!
[2014-07-15 21:17:02 -0400] Neozonz: these instances have an elastic ip
[2014-07-15 21:17:05 -0400] Neozonz: so they aren't added
[2014-07-15 21:17:07 -0400] coderanger: Neozonz: Chef::Log.info(node[:something])
[2014-07-15 21:17:41 -0400] coderanger: and yep, that would do it
[2014-07-15 21:21:27 -0400] tequilarista: stupid question  is there a way to tell chef gem install to also install necessary dependencies (a la rpm)? I'm hoping I'm just being blind while looking at the usage doc, as I'm not seeing it
[2014-07-15 21:22:19 -0400] jtimberman: tequilarista: there isn't. chef isn't any smarter than gem in knowing what possible package names are going to satisfy the requirements for a particular gem to be installed.
[2014-07-15 21:22:25 -0400] tequilarista: bummer
[2014-07-15 21:22:28 -0400] tequilarista: oh well
[2014-07-15 21:22:40 -0400] jtimberman: depending on what you're doing there might be cookbooks that handle that already :)
[2014-07-15 21:23:00 -0400] tequilarista: currently, I'm experimenting
[2014-07-15 21:23:24 -0400] tequilarista: once I have a better idea of what I want to end up with, I'll be looking at provisioning via a cookbook (hopefully)
[2014-07-15 21:24:00 -0400] shlant: coderanger: with the applciation_ruby LWRP, what should I have as my bundler command if I am using rbenv? do I have to specify ruby paths?
[2014-07-15 21:24:04 -0400] caryp: This is awesome! http://www.getchef.com/blog/2014/07/15/release-chef-container-0-2-0-beta/
[2014-07-15 21:24:10 -0400] Eulipion: shlant: hahahaa
[2014-07-15 21:24:24 -0400] coderanger: shlant: Yeah, Eulipion was asking similarly this monring
[2014-07-15 21:24:26 -0400] coderanger: heh
[2014-07-15 21:24:29 -0400] shlant: hahah
[2014-07-15 21:24:37 -0400] coderanger: I've not tried it so I can't say for sure what is needed to fix it
[2014-07-15 21:24:37 -0400] shlant: and you fixed it ?:)
[2014-07-15 21:24:42 -0400] shlant: shoot
[2014-07-15 21:25:01 -0400] Eulipion: shlant: i switched to poise-ruby, and i'm doing this: bundle_command "chmod -R g+wrx #{node[:show_web][:install_path]}; sudo -Hu nobody #{node[:show_web][:ruby][:path]}/bundle"
[2014-07-15 21:25:02 -0400] shlant: Eulipion: you didn't get it working, did you
[2014-07-15 21:25:11 -0400] shlant: hm
[2014-07-15 21:25:17 -0400] tequilarista: caryp: can't wait for it to not be beta ;)
[2014-07-15 21:25:25 -0400] Eulipion: setting ENV['path'] doesnt fix anything.  and there's a ton of gems that need special needs to build
[2014-07-15 21:25:30 -0400] tequilarista: (though will be poking at it in the meantime, certainly)
[2014-07-15 21:25:47 -0400] shlant: coderanger: so poise-ruby replaces rbenv and ruby_build?
[2014-07-15 21:25:49 -0400] Eulipion: god i hope ruby and php get married, move to an island, have insestual childred, and all die together
[2014-07-15 21:25:50 -0400] shlant: i would be fine with that
[2014-07-15 21:25:52 -0400] caryp: tequilarista: yeah, I am having trouble getting the knife-container commands to work
[2014-07-15 21:26:09 -0400] shlant: Eulipion: haah
[2014-07-15 21:26:09 -0400] coderanger: shlant: Yes, I mean its just builds of ruby packaged up with omnibus and crammed in a repo
[2014-07-15 21:26:30 -0400] shlant: coderanger: does it set global ruby paths?
[2014-07-15 21:26:39 -0400] coderanger: shlant: It sets nothing
[2014-07-15 21:26:48 -0400] caryp: tequilarista:  => ~/ /opt/chefdk/embedded/bin/knife container --help
[2014-07-15 21:26:48 -0400] caryp: FATAL: Cannot find sub command for: 'container --help'
[2014-07-15 21:26:52 -0400] Neozonz: thanks coderanger, gonna give this a try now :D
[2014-07-15 21:27:00 -0400] Neozonz: might upstream if fixes
[2014-07-15 21:27:08 -0400] caryp: anyone have luck with `knife container docker init` ?
[2014-07-15 21:27:12 -0400] shlant: Eulipion: I hear ya. Ruby, rials, unicorn, sidekiq capistrano blah blah blah
[2014-07-15 21:27:16 -0400] shlant: hurts my head
[2014-07-15 21:27:32 -0400] Eulipion: shlant: why cant it just use virtualenv like python, it would be so much easier
[2014-07-15 21:27:48 -0400] Eulipion: im already talking to devs about packaging their code with omnibus
[2014-07-15 21:28:36 -0400] sam_: Question: is there a way to reload an attribute file. If I do include_attribute, it says its  alredy loaded and not doing again
[2014-07-15 21:28:44 -0400] jtimberman: Eulipion: that's not a terrible idea :)
[2014-07-15 21:30:17 -0400] Eulipion: jtimberman: that postgres cookbook got the gem installed, but bundler still tries installing it and fails, and if i strip it from my Gemfile, rails won't know what to do.  any ideas?
[2014-07-15 21:30:49 -0400] jtimberman: Eulipion: wait, are you trying to use Chef's ruby environment for running the rails app?
[2014-07-15 21:31:04 -0400] Eulipion: no, poise-ruby (2.0.0-p353)
[2014-07-15 21:31:26 -0400] jtimberman: the postgresql::ruby recipe is for installing the pg gem into chef's ruby environment so you could do things with postgresql ruby APIs in chef (e.g. in a resource/library)
[2014-07-15 21:31:34 -0400] Eulipion: ah
[2014-07-15 22:03:58 -0400] shlant: what need to be restarted with a rails deploy? I know nginx and unicorn, but what about sidekiq? anything need to be done with redis/memcached? is it dependent on the app?
[2014-07-15 22:05:19 -0400] gleam: typically nginx won't need to be restarted. sidekiq you might as well since you may have updated the sidekiq config. redis/memcache no
[2014-07-15 22:05:24 -0400] gleam: (typically)
[2014-07-15 22:30:09 -0400] shlant: jtimberman: I see the memcached cookbook uses runit. Does that mean you don't need init/upstart? does runit handle process monitoring AND boot time initializing?
[2014-07-15 22:30:43 -0400] jtimberman: shlant: yes-ish, in that the `runit` cookbook will add runsvdir to the local system's init so it starts at boot time.
[2014-07-15 22:31:01 -0400] Damm: be aware of the memory it's given
[2014-07-15 22:31:09 -0400] Damm: if you use rails 64megs or 128megs maybe too small
[2014-07-15 22:31:47 -0400] shlant: jtimberman: ah. makes sense, thanks
[2014-07-15 22:33:06 -0400] Damm: you need a bombshelter around it
[2014-07-15 22:34:17 -0400] shlant: Damm: I looked into Docker but I do not have enough experience to set that up
[2014-07-15 22:34:29 -0400] shlant: I am almost there iwth pure chef
[2014-07-15 22:34:31 -0400] Damm: shlant, nah lxc
[2014-07-15 22:34:39 -0400] shlant: Damm: oh...
[2014-07-15 22:34:40 -0400] shlant: yea no thanks
[2014-07-15 22:34:41 -0400] Damm: shlant, I admit I used to be a docker candy freak
[2014-07-15 22:35:01 -0400] Damm: but it's got a bit of cons and the experience can rub you the wrong way if your not careful
[2014-07-15 22:35:08 -0400] shlant: Damm: you're "over it"? ;)
[2014-07-15 22:35:13 -0400] Damm: nah
[2014-07-15 22:35:30 -0400] gyoza: aww yea
[2014-07-15 22:35:42 -0400] Damm: but if you think that downloading an 'base' image from the docker team that is certified to start with is a good thing
[2014-07-15 22:35:48 -0400] Damm: that you cannot apt-get upgrade safely/sanely
[2014-07-15 22:35:51 -0400] x0nic: Damm: I would love to deploy rails in a container, but I really wouldn't even know where to begin. I just dedicate a whole VM to rails.
[2014-07-15 22:35:55 -0400] Damm: whooboy that's a moving bus
[2014-07-15 22:36:03 -0400] Damm: especially right now
[2014-07-15 22:36:05 -0400] ranjib: Damm, your running lxc on prod?
[2014-07-15 22:36:11 -0400] Damm: ranjib, yeah
[2014-07-15 22:36:17 -0400] Damm: you can do quite a lot with lxc or very little
[2014-07-15 22:36:29 -0400] Damm: multiple network interfaces to emulate public/private
[2014-07-15 22:36:31 -0400] ranjib: nice :-) . cant wait till we migrate to 14.04
[2014-07-15 22:36:59 -0400] Damm: heroku's was/is using lxc for .. a long time
[2014-07-15 22:37:00 -0400] ranjib: yeah.. i used it in past, now i use it for no-prod (prod is on older kernel)
[2014-07-15 22:37:03 -0400] Damm: (since they first could on ec2)
[2014-07-15 22:37:14 -0400] Damm: i think is the quote
[2014-07-15 22:37:19 -0400] ssd7: Ohai Chefs
[2014-07-15 22:37:22 -0400] ranjib: even we were using it in my past job
[2014-07-15 22:37:42 -0400] shlant: ssd7: heyyyyyyyyy
[2014-07-15 22:39:45 -0400] c_t: ohai, ssd7
[2014-07-15 22:42:58 -0400] Damm: yep yep lxc is pretty snazzy and you can take your docker containers and import them into lxc
[2014-07-15 22:43:05 -0400] Damm: so it's not a big deal if you change your mind
[2014-07-15 22:46:00 -0400] ssd7: Man, I wish some of these long conversations re Chef I'm seeing on twitter would happen on the mailing list instead
[2014-07-15 22:46:06 -0400] ssd7: so hard to follow them on twitter
[2014-07-15 22:46:36 -0400] shlant: yea when I think twitter, I don't think "discussions"
[2014-07-15 22:47:10 -0400] Phelms_: Is the mailing list open for anyone to join?
[2014-07-15 22:47:12 -0400] gyoza: i dont understand people who try to have real conversations on twitter...
[2014-07-15 22:47:29 -0400] Damm: I kinda stopped using the mailing list; I wish we had a few more
[2014-07-15 22:47:39 -0400] Damm: I really love reading the developer list
[2014-07-15 22:47:44 -0400] Damm: horrible at the user list
[2014-07-15 22:47:45 -0400] gyoza: lets start a chef group on fidonet
[2014-07-15 22:47:50 -0400] gyoza: and then setup renegade
[2014-07-15 22:47:53 -0400] gyoza: and we're good to go
[2014-07-15 22:47:57 -0400] gyoza: or PCboard.
[2014-07-15 22:48:00 -0400] gyoza: :D
[2014-07-15 22:48:05 -0400] Damm: let's not and pretend we never heard this suggestion
[2014-07-15 22:48:08 -0400] gyoza: (yes fidonet is still around)
[2014-07-15 22:48:12 -0400] gyoza: lol
[2014-07-15 22:48:28 -0400] gyoza: dont you want to take a break from Chef discussion and play some LORD? or maybe Trade Wars?
[2014-07-15 22:48:30 -0400] gyoza: You know you do.
[2014-07-15 22:48:38 -0400] gyoza: Or Usurper...
[2014-07-15 22:48:44 -0400] gyoza: Man usurper was so good..
[2014-07-15 22:49:01 -0400] Damm: irc sucks enough out of my life
[2014-07-15 22:49:05 -0400] Damm: no need to go back to those days
[2014-07-15 22:49:41 -0400] gyoza: ahah i used to be a bbs modder
[2014-07-15 22:49:54 -0400] gyoza: i still have a place in my heart for those days.
[2014-07-15 22:50:02 -0400] Damm: i started bbs'ing back in 1990
[2014-07-15 22:50:06 -0400] Damm: started my first board back in 92
[2014-07-15 22:50:11 -0400] gyoza: same
[2014-07-15 22:50:16 -0400] gyoza: first board was in 94 though
[2014-07-15 22:50:59 -0400] tequilarista: my company is named after the founder's original BBS  old nerds never die
[2014-07-15 22:50:59 -0400] poitaj: hello
[2014-07-15 22:53:08 -0400] poitaj: guys, have a bit of a stumping question here, have a situation where I want to copy a config file if it changes. (thats easy enough using cookbook_file) But in this instance we need to restart the service that uses this config file if and only if the config file is updated
[2014-07-15 22:53:40 -0400] poitaj: really new to cookbook writing, and a little unsure how to write this out
[2014-07-15 22:53:43 -0400] ssd7: poitaj: You want to use a notification, doc link icnoming
[2014-07-15 22:54:21 -0400] ssd7: poitaj: http://docs.opscode.com/resource_common.html#notifications
[2014-07-15 22:54:34 -0400] ssd7: take a look at the examples there
[2014-07-15 22:54:38 -0400] Eulipion: we need an IRC bot to pull up docs for common things like that
[2014-07-15 22:55:27 -0400] Phelms_: Is there a way to "Reload" the node attributes in a recipe? From the server (not file attributes)
[2014-07-15 22:55:28 -0400] poitaj: Thank you guys! will check it out
[2014-07-15 22:55:36 -0400] Damm: poitaj, subscribes is much better
[2014-07-15 22:56:07 -0400] Damm: http://docs.opscode.com/resource_common.html#subscribes-syntax
[2014-07-15 22:56:36 -0400] gyoza: hey guys
[2014-07-15 22:56:43 -0400] gyoza: ebay is offering a contest to win a new subaru wrx sti
[2014-07-15 22:56:49 -0400] gyoza: thats important
[2014-07-15 22:56:49 -0400] Eulipion: link?
[2014-07-15 22:56:51 -0400] gyoza: http://www.ebay.com/motors/garage
[2014-07-15 22:56:52 -0400] pengin: damn
[2014-07-15 22:56:55 -0400] Eulipion: i want another one of those
[2014-07-15 22:56:58 -0400] gyoza: me too
[2014-07-15 22:57:06 -0400] gyoza: mine is 13 years old:P
[2014-07-15 22:57:33 -0400] shlant: coderanger: is this set up like this because if you use bundler, you should have unicorn in your rails Gemfile? https://github.com/poise/application_ruby/blob/master/providers/unicorn.rb#L29-L31
[2014-07-15 22:59:34 -0400] Damm: shlant, gotta get unicorn from somewhere yannow/
[2014-07-15 22:59:37 -0400] Damm: heh
[2014-07-15 23:03:05 -0400] Eulipion: can someone take a look at this http://pastebin.com/PXJhmQQc - been trying to build the "pg" gem for a while
[2014-07-15 23:03:13 -0400] Neozonz: coderanger, no luck :( added elastic_ip https://gist.github.com/anonymous/023edf338f6a4e5e9310
[2014-07-15 23:04:19 -0400] Neozonz: looks like aws has an attribute for elastic ip http://docs.aws.amazon.com/opsworks/latest/userguide/attributes-json-opsworks-layers.html#attributes-json-opsworks-layers-instances-elastic
[2014-07-15 23:05:33 -0400] lrr: is rubygems.org down for anyone else?
[2014-07-15 23:05:59 -0400] doomviking: nope
[2014-07-15 23:05:59 -0400] shlant: lrr: looks fine http://status.rubygems.org/
[2014-07-15 23:06:29 -0400] lrr: hmm
[2014-07-15 23:07:35 -0400] Eulipion: peeps in #ruby were complaining about it being down earier.  they do some dns loadbalancing, so u might see it down depending on ur region
[2014-07-15 23:07:51 -0400] lrr: http://pastebin.osuosl.org/9061/
[2014-07-15 23:08:17 -0400] Neozonz: use a proxy and u might be able to get to it
[2014-07-15 23:09:40 -0400] geggam: Eulipion, ... do you have openssl installed ?
[2014-07-15 23:11:00 -0400] Eulipion: geggam: yes, and libssl-dev
[2014-07-15 23:11:02 -0400] geggam: ldd /usr/lib/libpq.so
[2014-07-15 23:11:43 -0400] Eulipion: http://pastebin.com/4P8NZxaP
[2014-07-15 23:12:56 -0400] geggam: its blowing up on ssl... but you are linked...
[2014-07-15 23:13:07 -0400] geggam: im gonna punt :)
[2014-07-15 23:13:40 -0400] Eulipion: this is on a fresh box, too
[2014-07-15 23:13:44 -0400] Damm: Eulipion, https://github.com/hw-cookbooks/postgresql/blob/develop/recipes/ruby.rb
[2014-07-15 23:13:57 -0400] Eulipion: Damm: that's embedded ruby
[2014-07-15 23:13:57 -0400] Damm: basically you need to apply the omnibus fix
[2014-07-15 23:14:11 -0400] Damm: unless your /opt/ruby is using your system ssl library?
[2014-07-15 23:15:11 -0400] Damm: http://stackoverflow.com/questions/15186924/installing-gem-pg-for-postgresql-openssl-libraries
[2014-07-15 23:15:14 -0400] Damm: might be more relevent
[2014-07-15 23:16:41 -0400] Eulipion: Damm: im not using rvm. im using poise-ruby.
[2014-07-15 23:18:42 -0400] coderanger: Eulipion: If you want to install the pg gem with poise-ruby, you need to install libpq against the poise-ruby openssl
[2014-07-15 23:19:02 -0400] coderanger: Too many varying ABIs
[2014-07-15 23:19:15 -0400] Eulipion: coderanger: i get what you're saying, but i have no idea how
[2014-07-15 23:19:32 -0400] coderanger: Sorry, can help later, need to finish something up first
[2014-07-15 23:19:59 -0400] Eulipion: that would be great.  pm me whenver u get around do it
[2014-07-15 23:20:19 -0400] Damm: and as poise-ruby is omnibus ruby
[2014-07-15 23:20:28 -0400] Damm: it almost sounds like the omnbius fix was right :/
[2014-07-15 23:21:58 -0400] Eulipion: Damm: ive built that gem.  /opt/chef/embedded/bin/gem list | grep pg => pg(0.17.1).   that doesn't help me from a Gemfile or let me spec a version
[2014-07-15 23:23:45 -0400] geggam: openssl mess is breaking lots of crap
[2014-07-15 23:25:05 -0400] geggam: nyone have cloudformer make me chef with multizone pg backend  ready ?
[2014-07-15 23:30:17 -0400] Damm: https://bitbucket.org/ged/ruby-pg/issue/178/pgs-way-of-linking-to-openssl-is-not
[2014-07-15 23:31:59 -0400] Damm: Eulipion, if you install it in the system gem; Bundler should use it instead of trying to install it pristine
[2014-07-15 23:32:06 -0400] Damm: unless you have the production flag enabled (if i recall)
[2014-07-15 23:32:26 -0400] Damm: that flag maybe renamed by now but that's the point
[2014-07-15 23:32:36 -0400] Eulipion: i do have the production flag, but i might be able to put pg in an excluded group
[2014-07-15 23:33:19 -0400] Eulipion: Damm: thanks for digging this up.
[2014-07-15 23:34:15 -0400] Damm: it's really a complex problem and the fact that the system pg library is linked to ssl makes it darn hard to link to
[2014-07-15 23:34:39 -0400] Damm: that's how I got lost in docker thinking it could help me
[2014-07-15 23:34:41 -0400] Eulipion: on that note im firing up mysql-workbench and converting since there's no views or stored procedures.
[2014-07-15 23:34:41 -0400] Damm: lol
[2014-07-15 23:34:41 -0400] someara: just ship a compiled .so
[2014-07-15 23:35:04 -0400] Damm: yjsy
[2014-07-15 23:35:10 -0400] Damm: that's so unruby like of you
[2014-07-15 23:35:27 -0400] Eulipion: if chef wasnt ruby, id never use it
[2014-07-15 23:35:53 -0400] Damm: shipping a compiled .so? no way hose that's not the way ruby users do it.  We must install build-utils on every server and compile it on each server
[2014-07-15 23:35:59 -0400] Damm: to make sure it's ?
[2014-07-15 23:36:13 -0400] Eulipion: and whoever wrote "gem" is an asshole
[2014-07-15 23:36:13 -0400] Damm: most sad thing to me
[2014-07-15 23:36:17 -0400] Eulipion: haha
[2014-07-15 23:36:24 -0400] Damm: actually he is an asshole
[2014-07-15 23:36:28 -0400] Eulipion: haha
[2014-07-15 23:37:01 -0400] Eulipion: its the perfect example of why u need a devops person on the dev team helping plan stuff
[2014-07-15 23:37:42 -0400] Eulipion: its been a long day.  im out
[2014-07-15 23:37:46 -0400] someara: s/devops/ops/
[2014-07-15 23:37:51 -0400] Damm: heh
[2014-07-15 23:38:20 -0400] Damm: my last rails setup i deployed is in docker; if i move it it might get imported into LXC but never automated
[2014-07-15 23:38:31 -0400] Damm: it's an older Ruby and to try and put it in Chef; would make me cry
[2014-07-15 23:40:42 -0400] MrHeavy: If I create a Mac OS X user using the user resource, it doesn't appear in Users & Groups. Is there any way to fix that?
[2014-07-15 23:42:07 -0400] geggam: rare do i see those kind of issues
[2014-07-15 23:47:11 -0400] Damm: well that's why if you omnibus
[2014-07-15 23:47:13 -0400] Damm: you omnibus everything
[2014-07-15 23:47:27 -0400] Damm: memcached, openssl, pg, bob, jimbo
[2014-07-15 23:47:29 -0400] Damm: his girlfriend
[2014-07-15 23:55:41 -0400] tequilarista: "oh my"

[2014-07-16 00:16:37 -0400] shlant: coderanger: can I specify a branch name in the revision attribute of the applicaiton LWRP?
[2014-07-16 00:16:46 -0400] coderanger: Yes
[2014-07-16 00:16:52 -0400] shlant: hmmm
[2014-07-16 00:17:02 -0400] shlant: I'm getting a could not parse object
[2014-07-16 00:17:13 -0400] shlant: with git fetch origin && git fetch origin --tags && git reset --hard a79bc2b4a47c0376a38cd06cfee0a25ac472f6ea
[2014-07-16 00:17:22 -0400] shlant: Could not parse object 'a79bc2b4a47c0376a38cd06cfee0a25ac472f6ea'
[2014-07-16 00:17:28 -0400] coderanger: shlant: set shallow_clone false
[2014-07-16 00:17:32 -0400] coderanger: it is fixed in master
[2014-07-16 00:17:52 -0400] shlant: coderanger: alrighty thanks
[2014-07-16 02:21:02 -0400] shlant: coderanger: still seems to be having problems
[2014-07-16 02:21:02 -0400] shlant: ---- Begin output of git fetch origin && git fetch origin --tags && git reset --hard a79bc2b4a47c0376a38cd06cfee0a25ac472f6ea ----
[2014-07-16 02:21:03 -0400] shlant:                 STDOUT:
[2014-07-16 02:21:03 -0400] shlant:                 STDERR: fatal: Could not parse object 'a79bc2b4a47c0376a38cd06cfee0a25ac472f6ea'.
[2014-07-16 02:21:03 -0400] shlant:                 ---- End output of git fetch origin && git fetch origin --tags && git reset --hard a79bc2b4a47c0376a38cd06cfee0a25ac472f6ea ----
[2014-07-16 02:21:04 -0400] shlant:                 Ran git fetch origin && git fetch origin --tags && git reset --hard a79bc2b4a47c0376a38cd06cfee0a25ac472f6ea returned 128
[2014-07-16 02:21:05 -0400] shlant:                 [2014-07-16T02:19:50+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-07-16 02:24:02 -0400] coderanger: shlant: Did you force it to re-clone after setting that?
[2014-07-16 02:30:06 -0400] shlant: coderanger: I deleted the release dir. is that enough?
[2014-07-16 02:30:28 -0400] coderanger: shlant: You would have to delete shared/cached-copy
[2014-07-16 02:30:33 -0400] coderanger: thats the real git repo
[2014-07-16 02:34:48 -0400] Damm: lol cached-copy
[2014-07-16 02:34:54 -0400] Damm: worst idea ever
[2014-07-16 02:35:14 -0400] Damm: as it's not neccesary
[2014-07-16 02:35:28 -0400] Damm: (unless your developers are sadists and edit live, and then well your boned)
[2014-07-16 03:48:39 -0400] chefgirl: hi chef users what is the difference between hosted chef, onpremise chef, private chef ??
[2014-07-16 03:50:13 -0400] rbowlby: support+prem features+in cloud | support+pre features+ onsite | no support, no prem, wherever you put it
[2014-07-16 03:50:38 -0400] rbowlby: I think that's right, someone correct me
[2014-07-16 04:02:27 -0400] shlant: coderanger: can I use the memcached sub-resource in application_ruby if it is installed on the rails server?
[2014-07-16 04:03:07 -0400] shlant: localhost
[2014-07-16 04:07:36 -0400] chefgirl:  hi chef users what is the difference between hosted chef, onpremise chef, private chef ??
[2014-07-16 04:14:39 -0400] shlant: chefgirl: rbowlby had the gist
[2014-07-16 04:15:06 -0400] shlant: whoa fancy new site
[2014-07-16 04:16:47 -0400] juliancdunn: chefgirl: private is the same as on-premise
[2014-07-16 04:30:11 -0400] chefgirl: juliancdunn : if private is aame as enterprise that what is the name different
[2014-07-16 04:30:58 -0400] chefgirl: rbowlby : Are there any limitattions on node of nodes that the three chef server types can supoort
[2014-07-16 04:42:42 -0400] shlant: chefgirl: there is no private an on premise. There is just hosted and on premise: http://www.getchef.com/chef/choose-your-version/
[2014-07-16 04:43:25 -0400] chefgirl: but when i downloaded a chef server it was private chef
[2014-07-16 04:43:46 -0400] chefgirl: and is there any node limitations that both the chef servers can support
[2014-07-16 04:43:56 -0400] shlant: chefgirl: the is Enterprise Hosted and on premises
[2014-07-16 04:44:05 -0400] shlant: then there is open source
[2014-07-16 04:44:13 -0400] shlant: which is technically "on premise"
[2014-07-16 04:46:15 -0400] shlant: chefgirl: see here for Enterprise pricing/node: http://www.getchef.com/enterprise-chef/
[2014-07-16 05:22:11 -0400] chefgirl: #linux
[2014-07-16 05:24:31 -0400] chefgirl: is there any linux channel ?
[2014-07-16 05:29:31 -0400] chefgirl: how to resolve this  Cannot send to channel: ##linux
[2014-07-16 05:34:31 -0400] chefgirl: ##Linux
[2014-07-16 05:34:40 -0400] chefgirl: ##linux
[2014-07-16 05:43:46 -0400] chefgirl: ##linux
[2014-07-16 05:44:28 -0400] paulmooring: chefgirl what are you trying to do?
[2014-07-16 05:44:55 -0400] chefgirl: ah im trying to connect to a klinux forum but unable to do
[2014-07-16 05:46:11 -0400] paulmooring: I'm not sure what that means, but if you want to join the channel you probably want `/join ##Linux`
[2014-07-16 05:46:26 -0400] paulmooring: right now you're just writing into the #chef channel
[2014-07-16 05:48:46 -0400] chefgirl: @paulmooring : I am not able to write anything there
[2014-07-16 08:01:10 -0400] chefgirl: can anyone give me a link to aws IRC channel ?
[2014-07-16 08:13:01 -0400] chefgirl: how can I learn system administration
[2014-07-16 08:13:07 -0400] chefgirl: in linux
[2014-07-16 08:19:49 -0400] chefgirl: what does this statement mean : Enterprise Chef is free for up to five nodes.
[2014-07-16 08:20:39 -0400] double_p: chefgirl: how about a book? http://www.tldp.org/ might give something, too. yet, nowadays the gory parts are not 'linux' but pretty distribution-specific stuff
[2014-07-16 08:21:21 -0400] drrk: if you only have 5 nodes (systems that chef configures) you don't have to pay for the enterprise (ie not opensoruce) version of the server, either hosted by chef or self hosted
[2014-07-16 08:26:22 -0400] m4rcu5: im experiencing some deep_merge quirks. I have an default.attrib => [ a ,b, c ] and a force_default.attrib => [ d, e, f ]. These are 2 different precedence levels and i expect a => [ d, e, f ]. however they seem to get merged. is this correct?
[2014-07-16 08:34:42 -0400] double_p: hm, multiple roles having the same attr as override_attribute. is the final outcome by run_list ordering or just undefined?
[2014-07-16 08:42:49 -0400] ssd7: double_p: I believe it will end up being run_list ordering, but I'm not sure that is really guaranteed behavior
[2014-07-16 08:43:32 -0400] double_p: ok.. let's start with some hope :)
[2014-07-16 08:50:26 -0400] ambientsound: ssd7: FYI, been running berks-api 2.0.0 for two days now with apparently no memory leak issues
[2014-07-16 08:53:20 -0400] ssd7: cool, glad to hear it
[2014-07-16 09:13:30 -0400] chefgirl: Can anybody give me link to all the libraries in chef ???
[2014-07-16 09:25:15 -0400] hannesvdvreken: chefgirl the aws channel is ##aws (double hash symbol)
[2014-07-16 09:26:09 -0400] chefgirl: Can anybody give me link to all the libraries in chef ???
[2014-07-16 09:29:34 -0400] mattt: chefgirl: libraries ?
[2014-07-16 09:29:58 -0400] mattt: chefgirl: you mean this?  http://docs.opscode.com/resource.html
[2014-07-16 09:31:49 -0400] chefgirl: mattt : not the resources the libraries like libraries for openstack aws etc
[2014-07-16 09:42:24 -0400] dwebb: hi, hopefully someone else uses the "users" cookbook and can answer this. How do you put a user in more than 1 group?  When I try and add secondary / tertiary groups in the groups array they never get added.  see http://pastebin.com/0uw1TfyL
[2014-07-16 09:49:11 -0400] medhu: Hi. Though this might sound basic but is becoming hair pulling issue for me. I have 2 recipes in a single cookbook. How can i force the order of running them? specifying them in the runlist in order doesn't seem to work at all.
[2014-07-16 09:49:56 -0400] medhu: In one of the recipes I install some gem_packages and in the other recipe I use them and configure certain things. This second recipe runs no matter what and stops compiling with a missing gem error.
[2014-07-16 09:50:15 -0400] medhu: tried "include_recipe" and specifying the run list in order.
[2014-07-16 09:50:41 -0400] medhu: If i run the chef-client twice with install recipe first and then the configure recipe, things run fine.
[2014-07-16 09:50:50 -0400] medhu: I want everything to happen in a single go
[2014-07-16 10:22:32 -0400] mattt: medhu: add them to a role ?
[2014-07-16 10:24:23 -0400] medhu: mattt: no havent added them to a role
[2014-07-16 10:24:28 -0400] medhu: should i?
[2014-07-16 10:24:32 -0400] medhu: will try
[2014-07-16 10:24:34 -0400] mattt: medhu: you can try?  :)
[2014-07-16 10:24:52 -0400] mattt: medhu: a lot of the stuff i run is in roles and it does it in order that it's listed in the role
[2014-07-16 10:34:22 -0400] mattt: medhu: did it work ?
[2014-07-16 10:37:06 -0400] fanboy: Hi, in my recipe I am declaring calling a resource, with the first line: test_replicator "Test" do
[2014-07-16 10:37:18 -0400] fanboy: yet I get the error ArgumentError: You must supply a name when declaring a default resource
[2014-07-16 10:51:40 -0400] medhu: mattt: no
[2014-07-16 10:51:42 -0400] medhu: it dint work
[2014-07-16 10:51:47 -0400] medhu: giving out same error
[2014-07-16 10:56:08 -0400] mattt: medhu: bra something isn't right
[2014-07-16 11:04:19 -0400] medhu: mattt: https://dpaste.de/GimS
[2014-07-16 11:04:24 -0400] medhu: this is what i get
[2014-07-16 11:06:03 -0400] mattt: medhu: oh, so the gem you install is used by the cookbook ?
[2014-07-16 11:11:51 -0400] mattt: medhu: are you installing w/ chef_gem ?
[2014-07-16 11:11:59 -0400] mattt: medhu: see teh example in http://docs.opscode.com/resource_chef_gem.html
[2014-07-16 11:20:39 -0400] anop: what kind of changes have you done on servers by using chef?
[2014-07-16 11:26:51 -0400] medhu: mattt: i am installing using the gem_package
[2014-07-16 11:26:53 -0400] medhu: resource
[2014-07-16 11:27:16 -0400] mattt: medhu: try chef_gem instead
[2014-07-16 11:28:28 -0400] medhu: mattt: yeah. i think that works based on the document.
[2014-07-16 11:28:34 -0400] medhu: trying it right away
[2014-07-16 11:33:43 -0400] ambientsound: ssd7: however - is it possible to tune the poll frequency? it's polling my chef server _AND_ supermarket every 10 seconds (I'd call that hammering)
[2014-07-16 11:37:22 -0400] medhu: mattt: works like a charm. thanks a lot. you saved my day. I dint know about chef_gem resource
[2014-07-16 11:55:51 -0400] chefgirl: is anybody usin jenkins with chef ??
[2014-07-16 12:02:33 -0400] thorduri: in what way
[2014-07-16 12:31:39 -0400] diegows: does anyone using librarian-chef here?
[2014-07-16 12:31:48 -0400] diegows: librarian-chef install --path cookbooks
[2014-07-16 12:31:48 -0400] diegows: Installing chef_handler (1.1.6)
[2014-07-16 12:31:49 -0400] diegows: /usr/lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock': end of file reached (EOFError)
[2014-07-16 12:32:14 -0400] diegows: I thought it was my provider, but it is not... tried in digital ocean and same error
[2014-07-16 12:33:18 -0400] diegows: oh... the url has changed...
[2014-07-16 12:33:20 -0400] diegows: hmm
[2014-07-16 12:33:54 -0400] diegows: same error :(
[2014-07-16 12:35:23 -0400] chefgirl: what are databags
[2014-07-16 12:35:30 -0400] chefgirl: can anybody give me a gist
[2014-07-16 12:36:39 -0400] chefgirl:  what are databags in chef
[2014-07-16 12:37:37 -0400] diegows: http://docs.opscode.com/essentials_data_bags.html
[2014-07-16 12:37:48 -0400] diegows: just variables that you can use in your recipes, global variabled
[2014-07-16 12:37:59 -0400] diegows: for short :)
[2014-07-16 12:38:24 -0400] diegows: in that link you have the description and examples about how to define and use them in recipes
[2014-07-16 12:39:51 -0400] chefgirl: thanks diegows
[2014-07-16 12:41:12 -0400] chefgirl: can u give me n example where I can use databags diegows
[2014-07-16 12:41:25 -0400] diegows: looks at the end of that link :)
[2014-07-16 12:41:49 -0400] rsavage_: What's the chef recipe control equiv of "chkconfig --del servicename"?
[2014-07-16 12:42:29 -0400] chefgirl: diegows the doc is complex
[2014-07-16 12:43:25 -0400] diegows: yes, but you have some good example there... do you want me to cute and paste them for you ? :)
[2014-07-16 12:43:36 -0400] diegows: I don't have other example that I can paste now
[2014-07-16 12:43:54 -0400] diegows: have a look at that link, is long but is clear
[2014-07-16 12:43:57 -0400] chefgirl: i will catch you tommorow
[2014-07-16 12:44:00 -0400] chefgirl: gtg
[2014-07-16 12:44:02 -0400] chefgirl: :)
[2014-07-16 12:44:54 -0400] Chandrasekhar: https://gist.github.com/anonymous/7e8d719e03ac7c4aa462
[2014-07-16 12:45:27 -0400] Chandrasekhar: can anyone plz  tel me whts wrong with this ?
[2014-07-16 12:46:03 -0400] Chandrasekhar: why i am getting 401 unauthorized error ?
[2014-07-16 12:51:13 -0400] Chandrasekhar: https://gist.github.com/anonymous/7e8d719e03ac7c4aa462
[2014-07-16 12:51:29 -0400] Chandrasekhar: can anyone please have a look at ths error ?
[2014-07-16 12:54:25 -0400] shadylog: Hi all, i'm having trouble with the nginx cookbook and a conflict with my own site. Basicly it says: nginx: [emerg] a duplicate default server for 0.0.0.0:80 in /etc/nginx/sites-enabled/mysite.conf:2
[2014-07-16 12:54:52 -0400] shadylog: i checked sites-enabled/ and only mysite.conf is there
[2014-07-16 12:55:21 -0400] shadylog: I also made sure i passed default_site_enabled = false
[2014-07-16 12:57:28 -0400] shadylog: the problem is apparently that the default site is pulled in with include /etc/nginx/conf.d/*.conf in /etg/nginx/nginx.conf
[2014-07-16 12:59:09 -0400] hirose31: Does anyone have the cookbook of djb's daemontools which can receive "notifies" resource?
[2014-07-16 13:00:51 -0400] Chandrasekhar: https://gist.github.com/anonymous/7e8d719e03ac7c4aa462
[2014-07-16 13:22:57 -0400] shadylog: Any way to use berkshelf without chef-dk in just a normal vm ?
[2014-07-16 13:23:04 -0400] shadylog: i.e. gem install berkshelf ? does that work with 3.0 ?
[2014-07-16 13:23:47 -0400] Chandrasekhar: https://gist.github.com/anonymous/7e8d719e03ac7c4aa462
[2014-07-16 13:23:57 -0400] Chandrasekhar: can anyone please hav a look this log ?
[2014-07-16 13:24:12 -0400] davidordave: @shadylog yes, but you will have some native dependencies to compile, which may require packages to be installed.
[2014-07-16 13:24:44 -0400] shadylog: davidordave: Is it then just easier to install and use berkshelf 2.0 ?
[2014-07-16 13:25:10 -0400] phelms: Chandrasekhar: Looks like "Invalid signature for user or client 'chef-validator'"
[2014-07-16 13:25:19 -0400] phelms: are you sure you have the correct validation.pem?
[2014-07-16 13:26:12 -0400] davidordave: @shadylog, It may be easier in some situations, but I wouldnt suggest it. Berks 2 is EOL and has had several issues recently. It is easier to upgrade to berks 3.
[2014-07-16 13:26:21 -0400] Chandrasekhar: how to check that ? i removed everything from /etc/chef on target node ..then manually copied those from chef server
[2014-07-16 13:26:24 -0400] Chandrasekhar: still same issue
[2014-07-16 13:26:49 -0400] shadylog: davidordave: alright. So manually installing berksdale 3 would be a pain? I like the comfort of my vagrant box
[2014-07-16 13:27:34 -0400] phelms: Chandrasekhar: Do you have any nodes running currently?
[2014-07-16 13:28:54 -0400] Chandrasekhar: nope.. i deleted the node by using knife node delete <nodename>  then tried bootstraping again
[2014-07-16 13:28:58 -0400] Chandrasekhar: stil same issue
[2014-07-16 13:29:07 -0400] davidordave: @shadylog, it isnt really a pain, you will just have to make sure you have a gcc-c++ (in the case of rhel, assuming it isnt already). Then wait for the native dependencies to install.
[2014-07-16 13:29:22 -0400] shadylog: ohh...
[2014-07-16 13:29:27 -0400] davidordave: and it may take a while to compile depending on the resources your system has.
[2014-07-16 13:30:11 -0400] davidordave: or you could install the gecode devel package and use that instead of compiling the one for berks. https://github.com/opscode/dep-selector-libgecode/pull/12
[2014-07-16 13:30:32 -0400] davidordave: speeds things up considerably
[2014-07-16 13:30:50 -0400] phelms: Chandrasekhar: Ok - If you don't have ANY nodes then recreate the key. From the Web UI go to Clients > click "edit" for the for "chef-validator" and check the box for Private Key. Copy the private key to somewhere safe. Then copy it to the validation.pem in /etc/chef/validation.pem (should be the only thing in there) and you should come up. If you have any other nodes wokring this will break them and you'll have to reconnect them as well
[2014-07-16 13:31:08 -0400] shadylog: davidordave: thanks so much!
[2014-07-16 13:31:58 -0400] phelms: Chandrasekhar: Also once you bootstrap the node remove the validation.pem since it is a slight security risk. Just keep a copy for new machines
[2014-07-16 13:32:18 -0400] davidordave: np :)
[2014-07-16 13:32:26 -0400] Chandrasekhar: ok.  sure. let me do it .
[2014-07-16 13:42:12 -0400] tgo: could someone point me to a doc on using encrypted databag and tomcat users....?
[2014-07-16 13:42:37 -0400] tgo: still learning chef and I just need to see some example as I'm trying to piece together using encrypted databags..
[2014-07-16 13:42:41 -0400] tgo: thanks..
[2014-07-16 13:45:47 -0400] shadylog: davidordave: I now have from a clean vm: apt-get install -y build-essential git ruby && gem install dep-selector-libgecode berkshelf
[2014-07-16 13:46:28 -0400] davidordave: cool, everything is working?
[2014-07-16 13:47:33 -0400] Neozonz: anyone wanna help me with an hosts recipe, just trying to get aws to list out instances and elastic ips in /etc/hosts
[2014-07-16 13:47:46 -0400] Neozonz: https://gist.github.com/anonymous/023edf338f6a4e5e9310#file-gistfile1-txt-L8-L9    <added the following lines but no luck>
[2014-07-16 13:47:50 -0400] phelms: tgo: http://docs.opscode.com/chef/essentials_data_bags.html - I liked the tutorial found https://blog.engineyard.com/2014/encrypted-data-bags for Encrypted bags
[2014-07-16 13:47:56 -0400] shadylog: davidordave: what's gecode and do I need to install it prior to dep-selector-libgecode ?
[2014-07-16 13:49:49 -0400] shadylog: apparently ubuntu trusty doesn't even supply gecode anymore.. sigh..
[2014-07-16 13:49:50 -0400] tgo: phelms: thanks..I read the first url.  I think my answer may be on your second url.
[2014-07-16 13:49:51 -0400] shadylog: Building native extensions.  This could take a while...
[2014-07-16 13:50:33 -0400] davidordave: yea, it takes quite a while on our smaller vms
[2014-07-16 13:50:49 -0400] shadylog: good god..
[2014-07-16 13:50:50 -0400] shadylog: pff
[2014-07-16 13:51:06 -0400] shadylog: ok I think I know what to do.. I will install chef-dk for linux inside vagrant ?
[2014-07-16 13:51:08 -0400] shadylog: sound good?
[2014-07-16 13:51:09 -0400] tgo: phelms: I have to figure out how to load the users information for my tomcat role in.
[2014-07-16 13:54:06 -0400] shadylog: apt-get update && wget https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/12.04/x86_64/chefdk_0.2.0-2_amd64.deb -O chefdk.deb && sudo dpkg -i chefdk.deb
[2014-07-16 13:54:21 -0400] shadylog: all this compiling is not good for the heart
[2014-07-16 13:56:03 -0400] davidordave: @shadylog, that sounds like a plan. Sadly I dont think they have a rhel package (do they?) so I am stuck in compile all the things land.
[2014-07-16 13:56:19 -0400] shadylog: davidordave: yes they do
[2014-07-16 13:56:22 -0400] shadylog: http://downloads.getchef.com/chef-dk/redhat/#/
[2014-07-16 13:56:26 -0400] davidordave: :O
[2014-07-16 13:56:37 -0400] shadylog: but davidordave...
[2014-07-16 13:56:41 -0400] shadylog: I just installed chefdk
[2014-07-16 13:56:46 -0400] shadylog: and i do "berkshelf"
[2014-07-16 13:56:50 -0400] shadylog: and i get command not found
[2014-07-16 13:56:53 -0400] davidordave: berks?
[2014-07-16 13:56:58 -0400] shadylog: ahhhhhhhhhhhhhhh
[2014-07-16 13:57:07 -0400] shadylog: YES
[2014-07-16 14:02:55 -0400] Neozonz: could someone go through a piece of code with me line by line?
[2014-07-16 14:16:08 -0400] shadylog: so I do berks cookbook myapp
[2014-07-16 14:16:10 -0400] shadylog: for a new cookbook
[2014-07-16 14:16:17 -0400] shadylog: and then it says i need to do bundle install ?
[2014-07-16 14:16:30 -0400] shadylog: why does my new empty cookbook need gems ?
[2014-07-16 14:18:00 -0400] jtimberman: shadylog: "it might"
[2014-07-16 14:18:06 -0400] shadylog: ahh
[2014-07-16 14:18:24 -0400] jtimberman: shadylog: the pattern there is for developing your cookbok, you might want to add rubygems that facilitate that, such as test kitchen, chefspec, etc.
[2014-07-16 14:18:26 -0400] jtimberman: however!
[2014-07-16 14:18:38 -0400] jtimberman: That's generally "Not Necessary" if you're using ChefDK :)
[2014-07-16 14:18:52 -0400] shadylog: ah ok
[2014-07-16 14:18:54 -0400] shadylog: :)
[2014-07-16 14:18:55 -0400] jtimberman: ChefDK comes with all the things you'd generally need (for the most part) for chef development.
[2014-07-16 14:19:23 -0400] shadylog: i'm glad! I'm new at this and just want to showcase chef for my project to install nginx and some default site..
[2014-07-16 14:20:01 -0400] LeShadow: if I have a box I provision with chef, can I write to a file locally  (so not on the provisioned box) with chef?
[2014-07-16 14:26:57 -0400] someara: shadylog the Gemfiles you'll find in cookbook aren't actually used by Chef
[2014-07-16 14:27:15 -0400] someara: they power the testing/dev ecosystem around it
[2014-07-16 14:27:17 -0400] someara: things like rubocop
[2014-07-16 14:27:24 -0400] shadylog: hehe
[2014-07-16 14:27:24 -0400] someara: foodcritic
[2014-07-16 14:27:31 -0400] someara: test-kitchen
[2014-07-16 14:27:33 -0400] someara: rspec/chefspec
[2014-07-16 14:27:52 -0400] shadylog: so for a new user to berks chef and wanting to make a simple cookbook all that is not needed right? :)
[2014-07-16 14:27:59 -0400] shadylog: berks help
[2014-07-16 14:28:27 -0400] someara: historically, you'd check out a cookbook repo, cd into the directory, and run "bundle install, bundle exec rspec, bundle exec fodcritic, and bundle exec kitchen test
[2014-07-16 14:28:31 -0400] someara: berkshelf is transparent
[2014-07-16 14:28:59 -0400] someara: you put a dependency on, say, mysql in your cookbook so you can use the mysql_service resource
[2014-07-16 14:29:46 -0400] shadylog: ok I understand now
[2014-07-16 14:29:50 -0400] someara: when you run "bundle exec kitchen test", berkshelf will automatically download the deps, place them in a cache (the berkshelf), then make sure everything is installed on the VM before test-kitchen runs the recipes
[2014-07-16 14:29:50 -0400] shadylog: thank you
[2014-07-16 14:30:13 -0400] someara: the idea with chefDK is to eliminate the "bundle exec" part, and standardize on a setup
[2014-07-16 14:31:09 -0400] shadylog: hmm but a fresh vm with chefdk installed doesn't have the gems installed yet right?
[2014-07-16 14:31:27 -0400] diegows: is centos 7 support by the chef client?
[2014-07-16 14:31:31 -0400] someara: it should have test-kitchen and the test-kitchen vagrant plugin iirc
[2014-07-16 14:31:43 -0400] someara: which is enough to get you started
[2014-07-16 14:31:50 -0400] shadylog: no I have made my own vm :s
[2014-07-16 14:31:50 -0400] someara: diegows yes
[2014-07-16 14:32:00 -0400] jtimberman: diegows: "supported" in that it "should work just fine"
[2014-07-16 14:32:01 -0400] diegows: great
[2014-07-16 14:32:06 -0400] someara: I just tested a recipe with it just now
[2014-07-16 14:32:09 -0400] diegows: jtimberman, enough for me :)
[2014-07-16 14:32:16 -0400] jtimberman: but we don't build packages specifically on RHEL / CentOS 7
[2014-07-16 14:32:16 -0400] someara: naturally, the recipe didn't work on centos-7
[2014-07-16 14:32:22 -0400] someara: but the chef-client itself totally did
[2014-07-16 14:32:34 -0400] DigitalFlux: So do we have a dedicated channel for Omnibus related discussions ?
[2014-07-16 14:32:38 -0400] jtimberman: yeah like, cookbooks might explode depending on the assumptions of the past not working in the present day.
[2014-07-16 14:32:45 -0400] someara: systemd wat
[2014-07-16 14:32:53 -0400] jtimberman: DigitalFlux: #chef :)
[2014-07-16 14:33:01 -0400] DigitalFlux: jtimberman: Excellent
[2014-07-16 14:33:04 -0400] jtimberman: DigitalFlux: there isn't an omnibus specific channel that i'm aware
[2014-07-16 14:33:39 -0400] DigitalFlux: So anybody having troubles with 3.2RC1 with runtime_dependency ? for some reason it doesn't seem to be picked up by the --depend flag of fpm at the end of the build
[2014-07-16 14:33:46 -0400] shadylog: someara: though in the end large cookbooks which already support systemd such as nginx will have an easier time with centos7 right?
[2014-07-16 14:34:14 -0400] DigitalFlux: so it's like the runtime_dependency statements are actually ignored ..
[2014-07-16 14:34:34 -0400] someara: theres an almost %100 chance that any cookbook that runs on el-6 will need to be modified to support el7
[2014-07-16 14:34:45 -0400] rsavage_: Has anyone moved to el7 or centos7 yet?
[2014-07-16 14:34:59 -0400] someara: I'm currently trying to get apache working
[2014-07-16 14:35:29 -0400] someara: rsavage_ probably not a lot of people... centos7 (what everyone actually uses) just came out like last week
[2014-07-16 14:35:40 -0400] rsavage_: someara I know...
[2014-07-16 14:36:09 -0400] someara: if you write your own cookbooks from scratch instead of consuming community ones, it'll probably be the quickest path to happy
[2014-07-16 14:36:24 -0400] rodolfojcj: hello everybody!
[2014-07-16 14:36:44 -0400] jtimberman: rsavage_: i'm waiting until we have published vagrant boxes :)
[2014-07-16 14:37:06 -0400] someara: DO just put up a cent7vm, so I can start testing my things
[2014-07-16 14:37:40 -0400] rodolfojcj: I would like to know how to associate to source code link ("View Source" button on Supermarket) to a cookbook I am writing
[2014-07-16 14:37:57 -0400] rodolfojcj: can someone give me a hint?
[2014-07-16 14:38:49 -0400] jtimberman: rodolfojcj: hmm!
[2014-07-16 14:39:37 -0400] jtimberman: rodolfojcj: ah ha! if you click the Gear next to "Details" on your cookbook, it should open a dialog you can input the source page URL
[2014-07-16 14:40:31 -0400] rodolfojcj: ohhh!
[2014-07-16 14:40:50 -0400] rodolfojcj: I am for sure I didn't see that gear link!
[2014-07-16 14:41:09 -0400] rodolfojcj: thanks @jtimberman!
[2014-07-16 14:43:14 -0400] rodolfojcj: another question
[2014-07-16 14:43:55 -0400] rodolfojcj: from about last May, I was working on my own cookbook for installing and configuring "Phabricator", an open source software development platform
[2014-07-16 14:44:18 -0400] rodolfojcj: and now I think it is usable enough to deserve a first publication on Supermarket
[2014-07-16 14:44:39 -0400] rodolfojcj: but I am seeing very recently someone published another "phabricator" cookbook
[2014-07-16 14:45:21 -0400] rodolfojcj: so that cookbook servers a similar purpose and is using the name I thought I could use
[2014-07-16 14:46:21 -0400] rodolfojcj: could exist in Supermarket two cookbooks with the same name but from different authors?
[2014-07-16 14:47:07 -0400] rodolfojcj: or is the way to follow choosing another different name for my "phabricator" cookbook ?
[2014-07-16 14:47:40 -0400] rodolfojcj: I like "phabricator" name because it is very straightforward and is not too large
[2014-07-16 14:48:27 -0400] gchristensen: rodolfojcj: no, you would need to rename your cookbook
[2014-07-16 14:48:33 -0400] jtimberman: flat namespace is a thing
[2014-07-16 14:48:38 -0400] jtimberman: we talked about fixing that
[2014-07-16 14:48:46 -0400] jtimberman: at the summit. at every summit.
[2014-07-16 14:49:11 -0400] jtimberman: but namespacing cookbooks, e.g., by users, isn't necessarily any better.
[2014-07-16 14:49:18 -0400] moleculezz: Hello helloo
[2014-07-16 14:49:24 -0400] jtimberman: like you can do it yourself, right? make mything-apache2.
[2014-07-16 14:49:32 -0400] shadylog: holy **** I just made a cookbook and its working
[2014-07-16 14:49:40 -0400] jtimberman: shadylog: :D :D
[2014-07-16 14:49:48 -0400] shadylog: this berks is awesome
[2014-07-16 14:50:05 -0400] rodolfojcj: ok
[2014-07-16 14:50:05 -0400] shadylog: just said cookbook "ntp" "nginx" and it installed.. omg..
[2014-07-16 14:50:19 -0400] shadylog: nginx: [emerg] a duplicate default server for 0.0.0.0:80 in /etc/nginx/sites-enabled/mysite.conf:2
[2014-07-16 14:51:05 -0400] rodolfojcj: another option I could take is contacting the first "phabricator" cookbook author and try to join forces
[2014-07-16 14:51:57 -0400] gchristensen: jtimberman: enforcing user-based namespacing increases the distinction that "this cookbook is not from an official source" similar to how Docker's hub/registry thing has "official" images (ubuntu) and user-namespaced ones (grahamc/ubuntu)
[2014-07-16 14:52:02 -0400] jtimberman: shadylog: you probably need to delete the default site
[2014-07-16 14:52:16 -0400] jtimberman: gchristensen: nothing is official! :D
[2014-07-16 14:52:28 -0400] shadylog: yes it seems the default site is in conf.d.. I install via package
[2014-07-16 14:52:40 -0400] gchristensen: jtimberman: which is why it could all be user/foobar :) but when you have just straight-up `foobar` it makes it more official sounding
[2014-07-16 14:52:44 -0400] moleculezz: Quick question about attributes (is actually a ruby question I think). The following is giving me undefined method '[]' default['x']['dir'] = "#{node['etc']['passwd'][node['x']['user']]['dir']}/somedir"
[2014-07-16 14:53:23 -0400] moleculezz: anyone know why it's giving me an error?
[2014-07-16 14:53:47 -0400] gchristensen: moleculezz: one of your sub hashes isn't what you think it is
[2014-07-16 14:54:06 -0400] nathenharvey: Help us pick the best time and day for the Chef Developers' IRC meeting - https://www.surveymonkey.com/s/QQ995YN
[2014-07-16 14:54:26 -0400] moleculezz: So the syntax is correct?
[2014-07-16 14:54:32 -0400] gchristensen: yes
[2014-07-16 14:54:48 -0400] rodolfojcj: I am seeing the new supermarket lacks the "Comments" link for cookbooks
[2014-07-16 14:55:00 -0400] rodolfojcj: is it on purpose?
[2014-07-16 14:55:07 -0400] gchristensen: ie, foo['bar'] may exist but foo['bar']['baz'] -> baz might not, so then foo['bar']['baz']['quux'] -> this would fail, undefined method
[2014-07-16 14:55:39 -0400] jtimberman: nathenharvey: perhaps day of week should be a multi-select option? :/
[2014-07-16 14:55:43 -0400] jtimberman: now that you have results.
[2014-07-16 14:56:31 -0400] moleculezz: actually I'm doing something like: foo['baz'][bar['quux']]
[2014-07-16 14:57:04 -0400] nathenharvey: jtimberman: perhaps, but that would make the question wrong.  It asks for the "best" day ;)  I think the day of the week is actually less interesting than the timezone info
[2014-07-16 14:57:19 -0400] jtimberman: Totally
[2014-07-16 14:57:28 -0400] nathenharvey: jtimberman: no way everyone will end up happy.  definition of a compromise:  both parties are unhappy
[2014-07-16 14:57:32 -0400] jtimberman: I put Friday, but any day will work with sufficient schedule notice :)
[2014-07-16 14:57:44 -0400] jtimberman: which I think is probably true for most people.
[2014-07-16 14:57:55 -0400] jtimberman: Now hitting a time that will work for most is the tricky part
[2014-07-16 14:58:49 -0400] nathenharvey: agreed.  As was suggested in the PR, we may need to do alternating times.
[2014-07-16 14:59:21 -0400] jonlives: nathenharvey: is it possible to have that survey accept multiple "best days"?
[2014-07-16 14:59:27 -0400] jonlives: i wanna pick mon-fri :p
[2014-07-16 14:59:30 -0400] nathenharvey: it might be easier to convince the world to operate on UTC for everything from now on.  That'd make time zones easier
[2014-07-16 14:59:56 -0400] jonlives: nathenharvey: we're still trying to get you folks to go metric, let alone UTC...
[2014-07-16 15:00:06 -0400] vickleford: you have me convinced. roar2tz
[2014-07-16 15:00:59 -0400] moleculezz: gchristensen: is the node['etc']['passwd']['user']['dir'] ohai data available in an attributes file? That's what I'm trying to get
[2014-07-16 15:01:28 -0400] jtimberman: jonlives: he just told me to jump in a creek about that
[2014-07-16 15:01:33 -0400] jtimberman: picking multiple best days
[2014-07-16 15:01:38 -0400] jonlives: bah.
[2014-07-16 15:01:40 -0400] gchristensen: moleculezz: you shoud look around, you can run ohai yourself or log / or puts node['etc']['passwod'].inspect
[2014-07-16 15:01:42 -0400] jtimberman: :)
[2014-07-16 15:02:07 -0400] jonlives: jtimberman: well I win, cos he just added a "any week day" option :D
[2014-07-16 15:02:11 -0400] nathenharvey: I've added three new choices to the day of the week question
[2014-07-16 15:02:29 -0400] jonlives: thanks nathenharvey :)
[2014-07-16 15:02:48 -0400] jtimberman: WELP
[2014-07-16 15:02:51 -0400] nathenharvey: surveying is almost as hard as timezoning
[2014-07-16 15:03:01 -0400] jtimberman: jonlives: Clearly Nathen likes you more than me.
[2014-07-16 15:03:15 -0400] jonlives: jtimberman: what can I say, I'm lovable :p
[2014-07-16 15:03:18 -0400] nathenharvey: jtimberman: was waiting for a second :+1: is all
[2014-07-16 15:03:19 -0400] jtimberman: true story!
[2014-07-16 15:03:29 -0400] jtimberman: nathenharvey: lol
[2014-07-16 15:04:00 -0400] jtimberman: I see you added my text verbatim, so that'll work.
[2014-07-16 15:04:07 -0400] jtimberman: also known as the apathetic option.
[2014-07-16 15:04:23 -0400] jonlives: my new job will be to follow jtimberman around and do this when he says things: https://www.youtube.com/watch?v=UoSVlSy8Ci0
[2014-07-16 15:04:37 -0400] nathenharvey: next someone's going to ask for timezone options that account for daylight savings time
[2014-07-16 15:04:52 -0400] jtimberman: DST is a pox on the world.
[2014-07-16 15:11:34 -0400] someara: UTC wat
[2014-07-16 15:14:15 -0400] moleculezz: gchristensen: Nice, didn't know I can do puts anywhere. Ruby/Chef is all new to me. Thanks, I found the issue!
[2014-07-16 15:29:14 -0400] DigitalFlux: sethvargo: Hi Seth, would be great if you check my above comments about runtime_dependency issues with 3.2RC1
[2014-07-16 15:30:15 -0400] sethvargo: @DigitalFlux I don't have backscroll. Could you please open an issue on the omnibus-ruby repo on GitHub? It's easier to track and then our entire team can help :)
[2014-07-16 15:30:39 -0400] DigitalFlux: @sethvargo: makes sense :), Thanks, will do that
[2014-07-16 15:30:49 -0400] sethvargo: FWIW I'm working on that project right now
[2014-07-16 15:31:05 -0400] sethvargo: It's just really hard to debug issues over IRC with lack of code formatting and multi-channel conversations
[2014-07-16 15:31:48 -0400] DigitalFlux: @sethvargo yeah, I've been following your commits lately :), and I do agree that using IRC will be a burden for such stuff for the time being
[2014-07-16 15:31:59 -0400] sethvargo: RC1 is a big change
[2014-07-16 15:32:08 -0400] sethvargo: And we've already found some bugs that are fixed on master
[2014-07-16 15:32:09 -0400] DigitalFlux: @sethvargo But Hey, Excellent work on Omnibus, <3 the new changes
[2014-07-16 15:32:15 -0400] sethvargo: So feedback is apprecaited
[2014-07-16 15:32:20 -0400] DigitalFlux: Should update my Gemfile then ..
[2014-07-16 15:32:54 -0400] shadylog: Anyone here? The chef quantal/price vagrant cloud boxes arent working
[2014-07-16 15:33:11 -0400] shadylog: well they are but the default mirror apparently is offline
[2014-07-16 15:33:22 -0400] shadylog: W: Failed to fetch http://us.archive.ubuntu.com/ubuntu/dists/quantal-updates/main/binary-amd64/Packages  404  Not Found [IP: 91.189.91.15 80]
[2014-07-16 15:33:45 -0400] shadylog: well not offline but not working I guess
[2014-07-16 15:34:05 -0400] patbyrne: is anyone using berkshelf-api with supermarket endpoints?
[2014-07-16 15:34:44 -0400] patbyrne: I've been looking into trying to get it working and 2.0.0 replaces opscode with supermarket
[2014-07-16 15:35:19 -0400] patbyrne: but it looks like berkshelf itself doesn't actually handle supermarket endpoints yet
[2014-07-16 15:36:39 -0400] patbyrne: (I'm testing by just setting up a machine to act as a proxy berkshelf-api to the community site)
[2014-07-16 15:44:20 -0400] daxroc_: Is there cookbook name length limit ?
[2014-07-16 15:49:35 -0400] jtimberman: daxroc_: "no"
[2014-07-16 15:49:59 -0400] jtimberman: (in that i've never had a cookbook name so long that it caused an issue :))
[2014-07-16 16:09:49 -0400] shlant: coderanger: I'm getting 400 "Bad Request" with the memcached sub-resource of app_ruby. is that because the memcached_template I specified can't be found or something?
[2014-07-16 16:10:09 -0400] shlant: it's in the cookbook the LWRP is run in
[2014-07-16 16:16:53 -0400] doug1: Anyone know if opsworks supports environments?
[2014-07-16 16:18:56 -0400] rsavage_: AWS opsworks?
[2014-07-16 16:21:17 -0400] doug1: rsavage_: Yoo betcha
[2014-07-16 16:22:16 -0400] zaargy: it does
[2014-07-16 16:22:20 -0400] zaargy: it's chef solo though
[2014-07-16 16:22:45 -0400] doug1: zaargy: darned if I can find a way to do it via the UI
[2014-07-16 16:24:05 -0400] zaargy: i have never actaully used it but you probably have to tag your instance with metadata to point at an environment then when you run chef you lookup the environment from the metadata
[2014-07-16 16:24:24 -0400] zaargy: whcih just points at the relevant environment json
[2014-07-16 16:24:40 -0400] doug1: zaargy: well... opsworks doesn't let you tag anything.... and even then doing that isnt a chef environment.
[2014-07-16 16:25:32 -0400] tgo: anyone use the tomcat cookbook by opscode
[2014-07-16 16:25:44 -0400] tgo: trying to get the username and passwd, but seem to be not bpulling them in.
[2014-07-16 16:39:48 -0400] rsavage_: Is it possible to use knife search to locate users?
[2014-07-16 16:40:00 -0400] doug1: Anyone know if opsworks supports environments?
[2014-07-16 16:41:53 -0400] phutchins: doug1: what type of environment? It supports rails environments... and you can use tags/branches to change what gets deployed from a repository
[2014-07-16 16:42:05 -0400] phutchins: so you could control your environments with tags which is what I do with a lot of mine
[2014-07-16 16:42:08 -0400] doug1: phutchins: chef environments
[2014-07-16 16:42:33 -0400] phutchins: doug1: ah, i don't think so. not sure tho, just not seen any mention or use of them.
[2014-07-16 16:42:43 -0400] doug1: phutchins: wow
[2014-07-16 16:43:38 -0400] hasues: phutchins: can you elaborate on using tags to control your environments or point me to an URL?  I'm interested.
[2014-07-16 16:44:06 -0400] doug1: phutchins: the way opsworks makes you pull everything from a single git repo.... *shudder*
[2014-07-16 16:45:54 -0400] rbowlby: is there a way to use globbing/regex with knife
[2014-07-16 16:46:10 -0400] rbowlby: something like knife node edit beginningofname*
[2014-07-16 16:46:41 -0400] rbowlby: zsh tab complete works but it's slow
[2014-07-16 16:47:39 -0400] doug1: *sigh* and no search in opsworks
[2014-07-16 16:50:54 -0400] doug1: opsworks now supports search? https://aws.amazon.com/about-aws/whats-new/2014/03/27/aws-opsworks-supports-chef11-10/
[2014-07-16 16:52:29 -0400] doug1: when is chef search not chef search? Answer, when implemented by OpsWorks... "You can use the Chef search Method in your recipes to query for stack data. You use the same syntax as you would for Chef server, but AWS OpsWorks obtains the data from the local node object instead of querying a Chef server."
[2014-07-16 16:56:22 -0400] chip-: "You can totally search THIS NODE"
[2014-07-16 16:56:38 -0400] mattray: doug1: interesting
[2014-07-16 16:56:42 -0400] zaargy: tat's pretty cool if they support search now
[2014-07-16 16:56:51 -0400] mattray: doug1: does it add more AWS metadata?
[2014-07-16 17:03:57 -0400] doug1: mattray: i dunno but a search that only seaches the local node is pretty pointless
[2014-07-16 17:04:02 -0400] doug1: zaargy: ^
[2014-07-16 17:09:34 -0400] bschnierer: subl
[2014-07-16 17:10:07 -0400] bschnierer: mmm, this isn't a terminal.  weird.
[2014-07-16 17:10:08 -0400] doug1: is there a GUI for chef?
[2014-07-16 17:10:37 -0400] zts: I believe it's just awkward language, and the "local node object" on opsworks includes information about the other nodes in the stack
[2014-07-16 17:11:19 -0400] zts: (conversely, I don't believe you can set attributes on one node and then see them on another)
[2014-07-16 17:12:36 -0400] chip-: doug1: The paid versions of Chef have a GUI for the server.
[2014-07-16 17:12:57 -0400] chip-: doug1: If you want to play with it you can set up a free-tier account on Hosted chef
[2014-07-16 17:13:09 -0400] doug1: chip-: Well, I don't mean a hosted version of the chef server's GUI... I mean something that replaces the need to use knife and install the toolset locally
[2014-07-16 17:13:34 -0400] doug1: chip-: so I guess what I'm really looking for is a GUI version of the workstation
[2014-07-16 17:13:42 -0400] chip-: doug1: The client tooling is all CLI-oriented.
[2014-07-16 17:13:49 -0400] doug1: chip-: Yes, I know.
[2014-07-16 17:14:03 -0400] shlant: chip-: the open source has a gui as well
[2014-07-16 17:14:09 -0400] chip-: doug1: But the new ChefDK bundles are pretty great as far as making sure everything you need is in the box.
[2014-07-16 17:14:30 -0400] doug1: chip-: I have a boss who wants to use chef. He just doesn't want anyone to have to know how to use it, to use it
[2014-07-16 17:14:34 -0400] chip-: shlant: It's deprecated and unsupported anymore. Also I just plain never liked its face. :)
[2014-07-16 17:14:39 -0400] cheeseplus: there is an open source GUI for cher server but it's going to go away
[2014-07-16 17:14:59 -0400] cheeseplus: nor do most use it, just kinda hanging out there waiting to be deprecated
[2014-07-16 17:15:12 -0400] zebrarage: yeah opsworks pulls in node metatdata about the whole stack, and any 'online' instances in there to do search against
[2014-07-16 17:15:15 -0400] doug1: boss wants ... QA user wants to deploy a memcache server... press a button and *poof*
[2014-07-16 17:15:16 -0400] cheeseplus: doug1: something like Rundeck may fit your needs
[2014-07-16 17:15:28 -0400] doug1: zebrarage: jeez that's not what their docs say
[2014-07-16 17:15:36 -0400] doug1: cheeseplus: requires cli, no?
[2014-07-16 17:15:40 -0400] zebrarage: doug1: bummer, I normally want to hug their docs team
[2014-07-16 17:15:52 -0400] chip-: doug1: Generally if you want to build PAAS tooling around Chef, you're gonna have to look for a third-party solution to help with that.
[2014-07-16 17:16:00 -0400] doug1: zebrarage: did you see my earlier quote from their docs?
[2014-07-16 17:16:00 -0400] cheeseplus: doug1: nope, fairly gui oriented
[2014-07-16 17:16:18 -0400] cheeseplus: doug1: http://rundeck.org/tour.html
[2014-07-16 17:16:27 -0400] zebrarage: doug1: yeah, someone mentioned opsworks and my ears perked up
[2014-07-16 17:16:30 -0400] doug1: chip-: like opsworks... which is missing major features
[2014-07-16 17:16:41 -0400] zebrarage: we're not using search directly yet, but at least we can use community cookbooks that support it without having to hack them
[2014-07-16 17:16:46 -0400] cheeseplus: you might still have to build the actions but then people can press buttons and create things to their hearts content
[2014-07-16 17:16:46 -0400] shlant: doug1: part of the whole chef and DevOps thing is having everyone know how to use and maintain the tools. Your boss is blasphemous!
[2014-07-16 17:16:52 -0400] tequilarista: heh
[2014-07-16 17:17:04 -0400] doug1: shlant: he is so old school. he is dead set against it
[2014-07-16 17:17:29 -0400] shlant: doug1: evolve or die!
[2014-07-16 17:17:32 -0400] shlant: haha
[2014-07-16 17:17:48 -0400] doug1: shlant: it won't be him that dies. it will be me. it's not worth it. Looking for a new gig
[2014-07-16 17:17:56 -0400] chip-: doug1: There's a few companies out there that are building provisioning / cloud broker portals that can integrate. I like the cats at Cloudbolt, but I haven't seen their solution since April so I don't know how it's coming along.
[2014-07-16 17:17:58 -0400] shlant: good plan
[2014-07-16 17:18:16 -0400] doug1: oph god the boss just arrived. :((
[2014-07-16 17:18:24 -0400] doug1: blood_pressure++
[2014-07-16 17:19:10 -0400] cheeseplus: doug1: like I said, rundeck is free and seems to fit the bill for what you're looking for
[2014-07-16 17:19:54 -0400] cheeseplus: could also use electric commander or jenkins to do the same kind of stuff
[2014-07-16 17:21:07 -0400] shadylog: Hey all, I'm trying to disable a service with the same cookbook for many OS's.
[2014-07-16 17:21:19 -0400] shadylog: however sometimes the service doesn't exist and chef throws back an error
[2014-07-16 17:21:27 -0400] shadylog: Error executing action `stop` on resource
[2014-07-16 17:21:43 -0400] doug1: cheeseplus: i hacked something together in jenkins, but it doesn't scale. It pushes cookbook to chef, but then it has to do a search chef to find all nodes in that class and ssh into those. That doesn't scale AND I had to put the uncrypted private ssh key on the box since the ssh-agent doesn't work in jenkins
[2014-07-16 17:21:57 -0400] shadylog: how do I make sure that the service is only disabled if it is there?
[2014-07-16 17:22:25 -0400] shlant: shadylog: try a not_if
[2014-07-16 17:22:42 -0400] shlant: http://docs.opscode.com/resource_common.html#not-if-examples
[2014-07-16 17:23:31 -0400] doug1: opsworks support chef environments?
[2014-07-16 17:24:36 -0400] gchristensen: is that a question :|
[2014-07-16 17:24:53 -0400] shadylog: shlant: how does that work on a whatever service protocol the underlying OS has?
[2014-07-16 17:25:36 -0400] doug1: gchristensen: moi? Oui.
[2014-07-16 17:25:40 -0400] cheeseplus: doug1: when you say doesn't scale - what do you mean?
[2014-07-16 17:26:07 -0400] shlant: shadylog: the service resource determines the service protocol based on the OS automagically
[2014-07-16 17:26:47 -0400] jtimberman: shlant: for certain values of automagic.
[2014-07-16 17:27:04 -0400] doug1: cheeseplus: well, having the unencrypted private key on the jenkins box is bad. Running ssh in sequence will be too slow as the number of instances increases, and if I do it it in parallel, then all the output will be mushed together and unreadable.
[2014-07-16 17:27:25 -0400] cheeseplus: doug1: ok, what is the need to ssh into all of them?
[2014-07-16 17:27:41 -0400] ianco: what things besides chef deploy and cap do folks use?
[2014-07-16 17:27:47 -0400] doug1: new edict from boss: make all instances have a 100Gb root disk instead of default 8Gb.
[2014-07-16 17:27:48 -0400] ianco: anything good im unaware of?
[2014-07-16 17:27:55 -0400] doug1: cheeseplus: to run the chef client
[2014-07-16 17:28:13 -0400] tequilarista: doug1: in AWS?
[2014-07-16 17:28:16 -0400] jtimberman: shlant: e.g., the default service provider on ubuntu isn't upstart (background: https://github.com/opscode/chef/pull/1412 and https://tickets.opscode.com/browse/CHEF-5276)
[2014-07-16 17:28:20 -0400] shadylog: shlant: so: only_if  { service "iptables do .... }
[2014-07-16 17:28:22 -0400] doug1: ctequilarista: Yah
[2014-07-16 17:28:49 -0400] tequilarista: so, via knife ec2 you can pass ebs-size to whatever
[2014-07-16 17:28:51 -0400] shlant: jtimberman: so what I said SHOULD be correct right? :)
[2014-07-16 17:28:55 -0400] shlant: just not currently
[2014-07-16 17:29:23 -0400] tequilarista: but you might also have to run "resize2fs /dev/<mount>" after it's spun up to make it stick
[2014-07-16 17:29:57 -0400] jtimberman: shlant: yes, generally speaking.
[2014-07-16 17:29:57 -0400] tequilarista: i.e., I do ebs-size 50, then resize /dev/xvda1 once it's up
[2014-07-16 17:30:19 -0400] jtimberman: shlant: ubuntu is in this weird place where not all the services are actually converted to upstart
[2014-07-16 17:30:34 -0400] shlant: shadylog: service "blah" do
[2014-07-16 17:30:34 -0400] shlant:  action :stop
[2014-07-16 17:30:35 -0400] shlant:  not_if { ps -ef | grep blah }
[2014-07-16 17:30:35 -0400] shlant: end
[2014-07-16 17:30:36 -0400] jtimberman: and some don't work with the LSB compatible init script interface
[2014-07-16 17:30:53 -0400] jtimberman: service resource has a 'pattern' attribute that you could use
[2014-07-16 17:30:55 -0400] shadylog: shlant: ahh ok so that's how it works
[2014-07-16 17:30:59 -0400] jtimberman: pattern 'blah'
[2014-07-16 17:30:59 -0400] shlant: shadylog: the not_if might need to be more complex depending on the process
[2014-07-16 17:31:15 -0400] doug1: tequilarista: This is actually with boto.
[2014-07-16 17:31:18 -0400] jtimberman: of course if someone is reading the 'blah' man page it will show up
[2014-07-16 17:31:26 -0400] shlant: jtimberman: ah, I didn't know that!
[2014-07-16 17:31:33 -0400] cheeseplus: not_if node['lsb'] == clownshoesOS
[2014-07-16 17:31:57 -0400] shadylog: shlant: But the not_if, can't it be changed to only_if { service "iptables" exists } ?
[2014-07-16 17:32:27 -0400] shlant: jtimberman: can pattern be combined with not_if?
[2014-07-16 17:32:30 -0400] doug1: tequilarista: I just think 100Gb EBS root disks is bad practice. What makes more sense is to have a smaller root disk and then attach EBS/ephemeral as needed depending on the function of the instance.
[2014-07-16 17:32:41 -0400] shlant: or does just pattern do what shadylog wantS?
[2014-07-16 17:33:18 -0400] shadylog: only_if { service[iptables] }
[2014-07-16 17:33:21 -0400] shadylog: does that work?
[2014-07-16 17:33:49 -0400] shlant: shadylog: I don't think so. not like notifies
[2014-07-16 17:34:26 -0400] shadylog: its a shame there's no abstraction over services to check if they are there
[2014-07-16 17:34:47 -0400] shadylog: I hate to introduce a file check on /etc/init.d/ only if OS is of type x y
[2014-07-16 17:35:26 -0400] Eulipion: shadylog: you could inspect the run_list, chef knows whats there
[2014-07-16 17:35:26 -0400] shadylog: I mean chef abstracts over systemd as well right?
[2014-07-16 17:35:53 -0400] tequilarista: doug1: depends on whether or not you're partitioning, but sure
[2014-07-16 17:36:01 -0400] jtimberman: shlant: you can combine sure, but you'd probably want the pattern to be specific. Or you can tell it what command can check status or if the service has a status command built in
[2014-07-16 17:36:42 -0400] shadylog: the exact error is
[2014-07-16 17:36:45 -0400] shadylog:  /etc/init.d/iptables does not exist!
[2014-07-16 17:37:16 -0400] shadylog:    service 'iptables' do
[2014-07-16 17:37:17 -0400] shadylog:      action [ :disable, :stop ]
[2014-07-16 17:37:18 -0400] shadylog:    end
[2014-07-16 17:37:30 -0400] doug1: tequilarista: you don't get much choice of partitioning on Amazon Linux AMI's
[2014-07-16 17:39:07 -0400] tequilarista: right
[2014-07-16 17:43:23 -0400] doug1: is devops really devops if only one person is using the tools?
[2014-07-16 17:43:48 -0400] shadylog: devops is collab so no
[2014-07-16 17:45:03 -0400] bttf: devops is only devops when you sign your name in the holy book of sysadmins with blood
[2014-07-16 17:45:30 -0400] doug1: shadylog: my boss would counter that since I am the one doing the devops work that I should be providing pretty GUI's for everyone else to point and click. Therefore, we have devops.
[2014-07-16 17:46:41 -0400] shadylog: DevOps (a portmanteau of development and operations) is a software development method that stresses communication, collaboration and integration between software developers and information technology (IT) operations professionals
[2014-07-16 17:46:46 -0400] shadylog: wikipedia
[2014-07-16 17:47:25 -0400] shadylog: if you have a say in development and they have a say in operations you are collaborating
[2014-07-16 17:47:48 -0400] shadylog: devops is rapidly becoming a buzzword
[2014-07-16 17:47:54 -0400] doug1: shadylog: that certainly isn't the case here.
[2014-07-16 17:48:00 -0400] tequilarista: also IMHO it implicitly requires understanding of the mechanics of the pipeline by everybody using it, otherwise the troubleshooting and maintenance is still centralized to limited resources
[2014-07-16 17:48:21 -0400] shadylog: exactly, there is no "throwing the problem over the fence"-type of situation
[2014-07-16 17:48:34 -0400] doug1: shadylog: oh this boss likes fences.
[2014-07-16 17:49:00 -0400] tequilarista: ha
[2014-07-16 17:49:03 -0400] tequilarista: "good luck with that"
[2014-07-16 17:49:05 -0400] shadylog: dude, don't talk about bosses. I was an intern at a company writing my thesis, and I had to explain what devops was
[2014-07-16 17:49:12 -0400] doug1: shadylog: recently, when deploying mongo, he wanted engineering to give ops a shrink wrapped product. He got his panties in a bunch because I was building the mongo package.
[2014-07-16 17:49:16 -0400] shadylog: no-one even heard of configuration management chef/puppet..
[2014-07-16 17:49:50 -0400] doug1: this boss thinks that devops is ops people writing GUI's for others to use
[2014-07-16 17:50:21 -0400] shadylog: GUI's pshaw... What developer needs a gui..
[2014-07-16 17:50:22 -0400] mjuszczak: How can I have serverspec only execute a test if the OS is version 14.04 or newer?
[2014-07-16 17:50:56 -0400] someara: tell him that you're looking for a full stack business guy to be ceo, coo, cfo, sales, marketing and secretary
[2014-07-16 17:52:19 -0400] doug1: shadylog: This boss thinks developers need a GUI
[2014-07-16 17:52:44 -0400] shadylog: I am a developer and IMO the best tools are the ones created for command line
[2014-07-16 17:52:51 -0400] doug1: Actually I will give him leeway on one thing. QA needs to be able to deploy instances and code and they can't be expcted to know the tool set
[2014-07-16 17:53:07 -0400] mallu: is it possible to use directory resource to exclude a directory when deleting?
[2014-07-16 17:53:20 -0400] doug1: shadylog: I could see in a develoepers reaction to the boss yesterday that he thought the same
[2014-07-16 17:53:20 -0400] shadylog: well that seems acceptable right?
[2014-07-16 17:53:42 -0400] shadylog: I will introduce the concept of version control to QA
[2014-07-16 17:54:04 -0400] shadylog: then have them use git push with some server side hook to initiate tests etc
[2014-07-16 17:54:20 -0400] shadylog: then whatever you have for CI/CD could have a web-browser or something
[2014-07-16 17:54:26 -0400] shadylog: I mean web frontend *
[2014-07-16 17:54:53 -0400] shadylog: I would argue that if you create a gui that they are at risk of having to support 'yet another product'
[2014-07-16 17:55:02 -0400] shadylog: also devops moves fast..
[2014-07-16 17:55:15 -0400] shadylog: docker, vagrant, chef, puppet, ansible
[2014-07-16 17:55:20 -0400] shadylog: who know what you will be running in a yaer
[2014-07-16 17:55:28 -0400] doug1: shadylog: oh the boss thinks thats what will happen if people use the cli tools
[2014-07-16 17:56:32 -0400] mallu: anyone?
[2014-07-16 17:56:40 -0400] shadylog: important difference: you have more time left to do better integrate your mission-critical applications into their environments when you don't have to spend time on gui's..
[2014-07-16 17:57:15 -0400] shadylog: though tbh a single page website with some buttons to initiate a script somewhere isn't much effort :)
[2014-07-16 17:57:45 -0400] doug1: shadylog: Amen
[2014-07-16 17:58:09 -0400] viglesias: shadylog: i use jenkins
[2014-07-16 17:58:33 -0400] viglesias: shadylog: checkout microQA: https://github.com/eucalyptus/micro-qa
[2014-07-16 17:58:36 -0400] shadylog: yeah I've used it too
[2014-07-16 17:58:47 -0400] viglesias: packaged everything up together, the full QA env
[2014-07-16 17:59:42 -0400] doug1: i suppose I'll be using jenkins more, as opsworks has major short comings
[2014-07-16 18:00:12 -0400] viglesias: doug1: yeah with the MultiJob plugin you can create some pretty elaborate workflows
[2014-07-16 18:01:59 -0400] mallu: hello is it possible to exclude files/directory when using directory resource to delete ?
[2014-07-16 18:07:33 -0400] shlant: mallu: as in delete only certain directories/files under a directory?
[2014-07-16 18:08:00 -0400] gkra: anyone here testing chef-metal out yet?
[2014-07-16 18:08:05 -0400] mallu: shlant: yes, I want to delete everything except one dir
[2014-07-16 18:09:42 -0400] shlant: mallu: I don't think that would be idempotent. You would have to have a directory resource for all directories you want to delete and none for what you want to keep
[2014-07-16 18:10:11 -0400] shlant: mallu: and I don't see how you could delete a parent directory while keeping a child
[2014-07-16 18:11:15 -0400] mallu: shlant: I'm not deleting parent directory, I want to keep parent and one directory. delete everything else
[2014-07-16 18:11:50 -0400] shlant: mallu: yea you would have to have a directory resource for each directory you want to delete
[2014-07-16 18:11:54 -0400] shlant: .each would be your friend
[2014-07-16 18:12:28 -0400] mallu: ok
[2014-07-16 18:13:35 -0400] shlant: gkra: using and LOVING it
[2014-07-16 18:14:17 -0400] gkra: shlant: so, the docs in the chef-metal repo leave a bit to be desired... trying to test right now just with chef-metal-vagrant and getting nowhere.
[2014-07-16 18:14:30 -0400] gkra: shlant: but I *just* found this: http://xorl.net/chef-metal/ruby/2014/04/07/chef-metal-part-deux/
[2014-07-16 18:16:01 -0400] jkeiser_: gkra: is the quick start for vagrant failing?
[2014-07-16 18:18:53 -0400] shlant: gkra: yea i am trying to help out with the docs, but there's a lot to be done
[2014-07-16 18:19:01 -0400] shlant: jkeiser_: is your friend
[2014-07-16 18:19:28 -0400] jkeiser_: weird that it named me that, let's see
[2014-07-16 18:19:54 -0400] jkeiser: better
[2014-07-16 18:21:34 -0400] gkra: OH
[2014-07-16 18:21:48 -0400] gkra: i was missing: require 'chef_metal_vagrant'
[2014-07-16 18:22:16 -0400] gkra: So without that, with_driver 'vagrant' does nothing, huh?
[2014-07-16 18:22:19 -0400] jkeiser: gkra: ah, yeah, if you are trying to use things like vagrant_box
[2014-07-16 18:22:38 -0400] jkeiser: gkra: no, if you just require 'chef_metal', metal will load the vagrant driver automatically as long as CHEF_DRIVER is vagrant
[2014-07-16 18:23:00 -0400] gkra: but that relies on CHEF_DRIVER being set in the environment...
[2014-07-16 18:23:19 -0400] jkeiser: gkra: if you don't want to set it there, you can set it in config or in the recipe itself
[2014-07-16 18:23:26 -0400] gkra: okay, so I can either require all the driver gems up front that i'm goign to use, or set the environment variable. :)
[2014-07-16 18:23:48 -0400] jkeiser: gkra: requiring the driver gems up front won't work either--you actually have to set the driver that will be used for the machines
[2014-07-16 18:24:08 -0400] gkra: ugh. is there a way to get chef-metal-vagrant to not care about SSL cert checking?
[2014-07-16 18:24:19 -0400] jkeiser: gkra: https://github.com/opscode/chef-metal/blob/master/docs/configuration.md#using-a-driver
[2014-07-16 18:25:08 -0400] jkeiser: gkra: yeah, that bit is annoying--I have it on my plate to come back around to it and get rid of the annoying message (but I'm hoping to do it in a way that actually keeps ssl cert checking working)
[2014-07-16 18:25:35 -0400] gkra: SSL: no alternative certificate subject name matches target host name 'scm-artifactory-01w.dev.activenetwork.com'
[2014-07-16 18:25:54 -0400] gkra: internal server, crap certificate.
[2014-07-16 18:28:03 -0400] gkra: how do I specificy the --insecure option to the vagrant box add that's going on under the hood?
[2014-07-16 18:31:54 -0400] zanshin: Ohai Chefs. After deleting a node from one chef server and bootstrapping it to our new chef server it produces `hef::Exceptions::CannotDetermineNodeName: Unable to determine node name: configure node_name or configure the system's hostname and fqdn` every 15 minutes when the chef-client is supposed to run. I've triple checked the IP, hostname, fqdn, machinename. Can't figure out what is broken.
[2014-07-16 18:32:02 -0400] shlant: jkeiser: thank you for fixing the prerelease requirement on chef-metal-fog :) Now I can use citadel in my metal recipe
[2014-07-16 18:32:42 -0400] Eulipion: zanshin: make sure 'hostname -f' works
[2014-07-16 18:33:23 -0400] jkeiser: shlant: woo!
[2014-07-16 18:33:32 -0400] zanshin: Eulipion: `hostname -f` results in the fqdn
[2014-07-16 18:33:34 -0400] jkeiser: Yeah, fog brings in a lot of stuff
[2014-07-16 18:33:52 -0400] gkra: jkeiser: so here's where I'm at now: https://gist.github.com/gkra/25c22860fc59cd1d2746
[2014-07-16 18:34:11 -0400] gkra: apparently vm.box_download_insecure didn't do the trick... :(
[2014-07-16 18:36:27 -0400] zanshin: Other than clearing out /etc/chef before re-bootstrapping the node to a new server, is there any "clean up" that needs to be performed?
[2014-07-16 18:36:46 -0400] jkeiser: gkra: what's the failure?
[2014-07-16 18:37:46 -0400] gkra: jkeiser: here's the full output of the run: https://gist.github.com/gkra/147b7e81a509139b96b8
[2014-07-16 18:38:02 -0400] gkra: it's bombing on the ssl cert...
[2014-07-16 18:38:34 -0400] gkra: oh balls, it's using a wildcard cert from a different domain
[2014-07-16 18:38:40 -0400] gkra: *facepalm*
[2014-07-16 18:39:34 -0400] jkeiser: gkra: does the same thing happen when you type "vagrant box add active_centos65 https://artifacts.dev.activenetwork.com/artifactory/scm-images/centos/6.5/x86_64/20140714-1/centos-6.5-x86_64-20140714-1.virtualbox.box" on the command line?
[2014-07-16 18:40:04 -0400] gkra: yes
[2014-07-16 18:41:16 -0400] gkra: hmm.
[2014-07-16 18:41:23 -0400] Justdave_: Hey, is there a way to determine *when* something's been uploaded to the server, says, an environment, or a particular version of a cookbook?
[2014-07-16 18:41:24 -0400] gkra: let me whip up a quick Vagrantfile
[2014-07-16 18:41:49 -0400] shlant: Justdave_: like a timestamp?
[2014-07-16 18:42:34 -0400] Justdave_: Basically, yeah
[2014-07-16 18:44:18 -0400] gkra: jkeiser: okay, with this vagrantfile, a 'vagrant up' is successfully downloading the box: https://gist.github.com/gkra/fbd5d9d8457e9b40bac9
[2014-07-16 18:45:33 -0400] Eulipion: anyone know why runit would timeout starting a svc, but running it's /service/<derp>/run script works?
[2014-07-16 18:45:40 -0400] gkra: jkeiser: so I guess this option isn't getting passed to vagrant somehow? (https://gist.github.com/gkra/25c22860fc59cd1d2746#file-gistfile1-rb-L12)
[2014-07-16 18:46:07 -0400] jkeiser: gkra: what does ~/.chef/vms look like?
[2014-07-16 18:46:10 -0400] jkeiser: That's where the Vagrantfile is
[2014-07-16 18:46:55 -0400] jkeiser: gkra: oh!  Your issue is earlier
[2014-07-16 18:47:03 -0400] jkeiser: gkra: don't use the vagrant_box instance, I think
[2014-07-16 18:47:16 -0400] jkeiser: gkra: it doesn't know about that option, and isn't using a Vagrantfile to download
[2014-07-16 18:47:31 -0400] jkeiser: gkra: I'll have to look at that, but you should just add vm.box_url to your machine_options
[2014-07-16 18:48:11 -0400] gkra: ah, okay
[2014-07-16 18:48:16 -0400] gkra: trying that now
[2014-07-16 18:48:43 -0400] gkra: YAY, LOTS OF GREEN OUTPUT!
[2014-07-16 18:49:18 -0400] gkra: jkeiser: I've been wanting to work on this ever since the Chef Hack at Velocity.
[2014-07-16 18:49:34 -0400] gkra: (i was the big guy with the ponytail. Well, still am.)
[2014-07-16 18:49:58 -0400] tequilarista: heh
[2014-07-16 18:50:17 -0400] jkeiser: gkra: hi again! :)
[2014-07-16 18:50:28 -0400] gkra: :)
[2014-07-16 18:50:48 -0400] jkeiser: gkra: mind filing an issue about vagrant_box not being able to download insecure boxen?  I really need to go in there and add whatever options are needed
[2014-07-16 18:50:57 -0400] gkra: for some silly reason, my manager wanted me to finish up our image builder first. :)
[2014-07-16 18:51:28 -0400] gkra: This seems to be working so far: https://gist.github.com/gkra/0a895f2d10c8d26136ec
[2014-07-16 18:51:46 -0400] gkra: (at least, it hasn't errored yet. downloading a box over VPN...)
[2014-07-16 18:53:46 -0400] gkra: whoa... downloading at 4MB/s over VPN... not bad. (MBP  wifi  cable modem in San Diego  VPN to Vegas)
[2014-07-16 18:55:27 -0400] gkra: oh.. okay, i've got a box running now.
[2014-07-16 18:55:46 -0400] gkra: now, to figure out how to make vagrant not make it headless. :)
[2014-07-16 18:56:22 -0400] rsavage_: gkra
[2014-07-16 18:56:27 -0400] rsavage_: I know your answer
[2014-07-16 18:56:29 -0400] rsavage_: let me git it for you
[2014-07-16 18:57:23 -0400] gkra: ah... http://docs.vagrantup.com/v2/virtualbox/configuration.html
[2014-07-16 18:57:34 -0400] rsavage_: vb.gui = true
[2014-07-16 19:01:39 -0400] j^2: btm: office hours?
[2014-07-16 19:13:58 -0400] shlant: anyone use chef-elb?
[2014-07-16 19:32:21 -0400] shlant: jkeiser: would you say having one 'master' metal server for each environment would be best? or have just one for all?
[2014-07-16 19:32:37 -0400] shlant: cause right now I just pass my metal servers chef.environment
[2014-07-16 19:32:44 -0400] shlant: which would have to change to have 1 master
[2014-07-16 19:34:38 -0400] jkeiser: shlant: kind of case by case.  The argument for putting it in the environment is that deploying an environment includes deploying a provisioning server, which is nice and reproducible.  But one metal recipe can easily handle provisioning many environments across many chef servers
[2014-07-16 19:35:54 -0400] jkeiser: shlant: one per environment / organization also means that anyone who has permission to upload cookbooks, can also change the shape of their environment
[2014-07-16 19:36:11 -0400] jkeiser: shlant: which might not be the case in a multi-org / multi-chef-server install with only one metal provisioner
[2014-07-16 19:36:58 -0400] shlant: jkeiser: makes sense, thanks
[2014-07-16 19:49:03 -0400] gkra: rsavage_: how do I translate that into chef-metal-ese? (i.e., https://gist.github.com/gkra/0a895f2d10c8d26136ec)
[2014-07-16 19:49:40 -0400] rsavage_: gkra: not sure - I havent used chef-metal
[2014-07-16 19:50:08 -0400] gkra: so in the vagrantfile it's just config.vb.gui = true ?
[2014-07-16 19:50:33 -0400] rsavage_: vb.gui = true
[2014-07-16 19:50:37 -0400] rsavage_: under the config section
[2014-07-16 19:51:33 -0400] Neozonz: what is the correct syntax for the following, i need to put the command into " " but not sure what the proper way is https://gist.github.com/anonymous/ea0f7d25034a65f5b067
[2014-07-16 19:55:07 -0400] phelms: Neozonz: That is a system call correct?
[2014-07-16 19:55:28 -0400] Neozonz: frellnet, yeah bash
[2014-07-16 19:55:39 -0400] Neozonz: * phelms
[2014-07-16 19:55:42 -0400] phelms: Wrap it with the ` symbol
[2014-07-16 19:55:48 -0400] shlant: can anyone help me figure out why I get "undefined method `[]' for nil:NilClass" for "log node['aws_rds']['cms-pre-db']['endpoint_address']" when the attribute is clearly on my server? http://i.imgur.com/KJKoYai.png
[2014-07-16 19:56:24 -0400] Neozonz: phelms, ah cool, u just gave me an idea to put it into a bash cmd
[2014-07-16 19:56:28 -0400] Neozonz: but i'll try ` first
[2014-07-16 19:57:02 -0400] phelms: shlant: check node['normal']['aws_rds']
[2014-07-16 19:57:37 -0400] phelms: Neozonz: you may need to use a ruby_block rather than execute
[2014-07-16 20:03:43 -0400] Damm: shlant, node['aws_rds']['cms-pre-db'] may exist
[2014-07-16 20:03:47 -0400] Damm: but does endpoint address?
[2014-07-16 20:04:16 -0400] Damm: shlant, if you have some code to gist perhaps that would help because that's a fairly normal thing; is this a default attribute?
[2014-07-16 20:08:07 -0400] shlant: Damm: I am using the aws-rds-cookbook. It creates that attribute after creating the db: https://github.com/gosuri/aws-rds-cookbook/blob/master/libraries/rds.rb#L98-L100
[2014-07-16 20:09:08 -0400] shlant: log node['aws_rds']['cms-pre-db'] gives me the same
[2014-07-16 20:09:49 -0400] Damm: hmm, is it trying to access the attribute before it's set?
[2014-07-16 20:10:01 -0400] Damm: ahh that could be
[2014-07-16 20:10:14 -0400] Damm: I hate that problem
[2014-07-16 20:10:56 -0400] shlant: Damm: no I have that issue before
[2014-07-16 20:11:19 -0400] shlant: but I am making changes in lue of not having lazy eveluation
[2014-07-16 20:11:33 -0400] shlant: when I do knife edit node blah
[2014-07-16 20:11:37 -0400] shlant: I don't see the attribute
[2014-07-16 20:11:46 -0400] shlant: so why is knife telling me different than the GUI?
[2014-07-16 20:12:04 -0400] Damm: knife node show -l
[2014-07-16 20:12:13 -0400] Damm: or -medium mode even works better than the default
[2014-07-16 20:12:34 -0400] shlant: yea
[2014-07-16 20:12:36 -0400] shlant: just did that
[2014-07-16 20:12:38 -0400] shlant: it's there
[2014-07-16 20:12:50 -0400] shlant: it's an override attribute
[2014-07-16 20:13:00 -0400] Damm: so it should be there
[2014-07-16 20:13:15 -0400] Damm: and if you fire up shef -z on the client you can exercise the same code?
[2014-07-16 20:13:30 -0400] Damm: or fire up irb
[2014-07-16 20:13:36 -0400] Damm: depending where i am
[2014-07-16 20:17:21 -0400] mdavids: hi all... have sort of an open question if anyone can help... Okay, so, I'm starting to set up testing for my chef repo. ChefSpec for unit tests as it stands... but it looks to me like chefspec needs to know the exact format of your cookbooks, as opposed to the end result... meaning if i change from recipes to LWRP for some cookbooks, than the tests I wrote for the recipes arent going to let me verify that the LWRPs that replace the rec
[2014-07-16 20:17:22 -0400] mdavids: ipes are performing the same functions (end state is the same) as the recipes were originally...
[2014-07-16 20:17:27 -0400] mdavids: is there any way around this?
[2014-07-16 20:17:32 -0400] mdavids: a different tool/
[2014-07-16 20:17:54 -0400] mdavids: am I using chefspec wrong? very new to testing, moreso to testing with chef...
[2014-07-16 20:18:56 -0400] mdavids: i know test kitchen might be an options, but was really hoping for a way to locally mock a target system for fast local tests
[2014-07-16 20:19:03 -0400] mallu: can someone tell me if this is possible? lslist = Mixlib::ShellOut.new("find /opt/ec2-init -type d -print") list=lslist.run_command
[2014-07-16 20:19:28 -0400] mallu: I'm trying to get a list of directories
[2014-07-16 20:20:01 -0400] Eulipion: mallu: ruby has dir libs.  http://ruby-doc.org/core-1.9.3/Dir.html
[2014-07-16 20:21:09 -0400] mdavids: mallu: yeah, I don't know if the way I do it is considered correct generally, but usually when the code starts looking like that, I switch to ruby_blocks
[2014-07-16 20:21:43 -0400] mallu: Eulipion: I need to exclude some dir from the list
[2014-07-16 20:21:46 -0400] a13x2121: chef_gem seem to run at the beginning of the run, anyway to force it to run later in the run?
[2014-07-16 20:22:40 -0400] mallu: what I want to do is, get a list of dir with --exclude one dir then delete them
[2014-07-16 20:23:16 -0400] mallu: so I want to get an array lslist then i can do .each
[2014-07-16 20:23:23 -0400] mallu: what is the best way to do that?
[2014-07-16 20:23:32 -0400] soblom: mdavids: check out https://sethvargo.com/unit-testing-chef-cookbooks/ on what the idea of chef tests is
[2014-07-16 20:23:45 -0400] soblom: chefspec, derp
[2014-07-16 20:24:25 -0400] soblom: it's about testing that your chef recipe includes the right resources, etc. not whether the resources did their job as expected
[2014-07-16 20:25:05 -0400] mdavids: ah, thats what i was afraid of... somehow i didnt quite understand that until i went to write the first test for something
[2014-07-16 20:25:30 -0400] mdavids: any idea if there is something that is better for making sure the resources did their expected jobs?
[2014-07-16 20:25:53 -0400] mdavids: or would that require some sort of new heavy-duty tool with a mock directory structure, etc?
[2014-07-16 20:26:27 -0400] soblom: serverspec?
[2014-07-16 20:26:50 -0400] soblom: or https://github.com/sstephenson/bats
[2014-07-16 20:27:00 -0400] mallu: I tried this but not working .. lslist = Mixlib::ShellOut.new("ls -m1 /opt/ec2-init ") list=lslist.run_command.to_a  list.each do |d| directory "#{d}" do   action :delete   recursive true end end
[2014-07-16 20:27:05 -0400] soblom: both included in test-kitchen, though
[2014-07-16 20:27:06 -0400] heathsnow: test kitchen, or just plain minitest, both will test the intention of the recipe
[2014-07-16 20:28:02 -0400] mdavids: ill have to look more at test-kitchen and minitest then...
[2014-07-16 20:28:40 -0400] cheeseplus: mdavids: test-kitchen + serverspec is useful for stuff like - is that package installed, is it listening on this port
[2014-07-16 20:28:44 -0400] mdavids: i looked at serverspec and bats... but i have a lot of stuff that needs to run on win2k3, win2k8, win28r2, rhel, suse, centos
[2014-07-16 20:29:14 -0400] mdavids: okay, i see. but those actually rely on running the recipes on the target platform, right?
[2014-07-16 20:29:18 -0400] cheeseplus: mdavids: tk windows support is getting better / on the horizon
[2014-07-16 20:29:28 -0400] cheeseplus: mdavids: correct, different kind of testing
[2014-07-16 20:31:15 -0400] mdavids: i think i may have some more reading to do :)
[2014-07-16 20:31:22 -0400] mdavids: thank you for the help
[2014-07-16 20:31:25 -0400] cheeseplus: mdavids: I think chefspec should be able to do it - https://github.com/sethvargo/chefspec#testing-lwrps
[2014-07-16 20:31:46 -0400] heathsnow: test kitchen is no good with Windows
[2014-07-16 20:31:58 -0400] heathsnow: try just writing mini tests instead
[2014-07-16 20:32:17 -0400] cheeseplus: heathsnow: it's getting there, I just ran a full TK run with on windows with winrm last week ;)
[2014-07-16 20:32:23 -0400] mdavids: cheeseplus:   ooh, that's interesting
[2014-07-16 20:32:47 -0400] mdavids: so if i just step into the lwrp in the setup, then it ends up behaving like the existing matcher
[2014-07-16 20:33:00 -0400] mdavids: so if i keep the same names, i can verify that my lwrp does what my recipe used to
[2014-07-16 20:33:24 -0400] heathsnow: @cheeseplus: sweet :)  right now I have mini tests AND test kitchen for all my Windows cookbooks.  I'd love to simplify.
[2014-07-16 20:33:28 -0400] cheeseplus: heathsnow: https://github.com/test-kitchen/test-kitchen/pull/470
[2014-07-16 20:33:36 -0400] cheeseplus: it's so close!
[2014-07-16 20:34:16 -0400] mdavids: test-kitchen is appealing, but i think i'll need to write a tk driver to plug in to our vm manager overlay thing here...
[2014-07-16 20:34:34 -0400] cheeseplus: mdavids: what vm manager?
[2014-07-16 20:34:43 -0400] mdavids: eh, we have a layer over ec2
[2014-07-16 20:35:08 -0400] mdavids: i gather the original goal was to abstract across cloud providers... but right now its just ec2...
[2014-07-16 20:35:32 -0400] cheeseplus: yea you'd have to use the ec2 driver or just have the tests run locally against vagrant
[2014-07-16 20:35:51 -0400] mdavids: so it handles all the start/stop/terminate/create plus some user-data pass stuff... it has rest, so i imagine it could be integrated somehow
[2014-07-16 20:36:27 -0400] cheeseplus: mdavids: there is a kitchen-fog gem
[2014-07-16 20:36:28 -0400] mdavids: yeah vagrant is look better and better... but that requires more hd space on my laptop... ssd is fast, but not great if i need 7-8 OS locally
[2014-07-16 20:37:14 -0400] cheeseplus: mdavids: or run vagrant on a server
[2014-07-16 20:37:55 -0400] mdavids: oh. heh. yeah that would do it to... not sure if i can use fog, as the vmm is in-house... they dont give us direct access to ec2
[2014-07-16 20:38:07 -0400] n1ko: do you really need to run 7-8 os locally all the time?
[2014-07-16 20:38:15 -0400] n1ko: i used to do that with 128GB ssd though just fine :)
[2014-07-16 20:39:15 -0400] cheeseplus: mdavids: well fog supports just about everything under the sun and/or can be made to, definitely the most generic option
[2014-07-16 20:39:28 -0400] cheeseplus: I wouldn't go that route but it is a route ;)
[2014-07-16 20:40:26 -0400] mdavids: too many packages, and i dont need to run all at the same time, but that would save some time
[2014-07-16 20:41:06 -0400] n1ko: the best thing about vagrant (+cm) is that you can scratch stuff and be sure not to drift
[2014-07-16 20:41:43 -0400] n1ko: docker is of course another option
[2014-07-16 20:42:35 -0400] cheeseplus: I wasn't going to send the poor fellow on that rabbit hole
[2014-07-16 20:45:26 -0400] lrr: I'm getting this error when trying to install msql in chef using the v4.1.2 and v4.1.1 and v4.1.0 mysql cookbook: http://pastebin.osuosl.org/9136/
[2014-07-16 20:45:42 -0400] lrr: anyone have any insight as to why, other than rubygems.org broke things?
[2014-07-16 20:45:58 -0400] lrr: or how to fix it, other than upgrading to a newer mysql cookbook
[2014-07-16 20:56:21 -0400] lrr: grr, status.rubygems.org says their dependency api is down
[2014-07-16 20:57:11 -0400] shlant: btm: do you know if I can pass a json file to knife-ec2 like you can with chef-client? -j accepts a string instead
[2014-07-16 20:57:23 -0400] shlant: and also, it seems ssh-key doesn't work
[2014-07-16 20:57:34 -0400] shlant: not sure how it's choosing the key to use
[2014-07-16 21:24:43 -0400] shlant: jkeiser: I haven't run into this before, but i just reprovisioned my metal master, so maybe something changed? "chef_gem[chef-metal] (infra_ruby::default line 18) had an error: Gem::DependencyError: Unable to resolve dependencies: cheffish requires chef-zero (~> 2.2)"
[2014-07-16 21:27:06 -0400] jkeiser: shlant: chef-zero 2.2 does indeed exist ... maybe a rubygems error?
[2014-07-16 21:27:48 -0400] phelms: Hey stupid question - I have a recipe running in default.RB right now.. if I want a second one say two.rdb to run anytime the chef-client runs on the node. Is there anything special I have to do?
[2014-07-16 21:28:07 -0400] phelms: two.rb*
[2014-07-16 21:28:51 -0400] heathsnow_: phelms: just add cookbook::two.rb to your node's run list
[2014-07-16 21:28:58 -0400] doug1: hm "padding check failed"
[2014-07-16 21:28:59 -0400] phelms: ahh ok
[2014-07-16 21:29:03 -0400] phelms: heathsnow_: Thanks
[2014-07-16 21:29:10 -0400] shlant: jkeiser: i DID downgrade from rc.2 to 11.12.8 but would that effect anything?
[2014-07-16 21:29:48 -0400] jkeiser: shlant: no.  But I know rubygems was acting whacky with dependencies this morning
[2014-07-16 21:30:01 -0400] shlant: jkeiser: alright, I'll wait it out
[2014-07-16 21:30:02 -0400] jkeiser: And I just now heard someone say they were having rubygems problems
[2014-07-16 21:30:10 -0400] heathsnow_: http://status.rubygems.org
[2014-07-16 21:30:34 -0400] shlant: heathsnow_: it was not accurate yesterday when they were having problems
[2014-07-16 21:33:34 -0400] JoshZ_: jkeiser: is there a way using chef-metal to take over existing chef nodes etc?? Right now it destroys the existing client.pem etc?
[2014-07-16 21:34:06 -0400] shlant: JoshZ: I think that would be difficult to make idempotent
[2014-07-16 21:34:19 -0400] shlant: JoshZ_
[2014-07-16 21:34:21 -0400] jkeiser: JoshZ_: it considers the client.pem on the node canonical unless you tell it you are willing to overwrite it, I'm pretty sure
[2014-07-16 21:34:37 -0400] jkeiser: But I think there's an option in there to tell it to overwrite
[2014-07-16 21:35:07 -0400] doug1: what the heck does 'padding check failed' mean?
[2014-07-16 21:36:58 -0400] jkeiser: JoshZ_: machine_options :convergence_options => { :allow_overwrite_keys => true }
[2014-07-16 21:37:55 -0400] jkeiser: JoshZ_: https://github.com/opscode/chef-metal/blob/master/lib/chef_metal/convergence_strategy/precreate_chef_objects.rb#L66-L73
[2014-07-16 21:38:21 -0400] JoshZ_: jkeiser: Awesome... testing now...
[2014-07-16 21:39:39 -0400] JoshZ_: cool Ill let you know if that works THX!!
[2014-07-16 22:02:29 -0400] gkra: jkeiser: any idea how I'd stuff this Vagrantfile line in via chef-metal? config.vm.provider('virtualbox') {|v| v.gui = true}
[2014-07-16 22:03:14 -0400] jkeiser: gkra: add a new line to machine config: :vagrant_config => "config.vm.provider('virtualbox') { |v| v.gui = true }"
[2014-07-16 22:03:22 -0400] gkra: oh.
[2014-07-16 22:03:24 -0400] jkeiser: gkra: just add more lines to that string if you find any more weird lines like that
[2014-07-16 22:03:26 -0400] gkra: well, then, that's simple. :)
[2014-07-16 22:03:57 -0400] gkra: jkeiser: can it go in the "with_machine_options" block?
[2014-07-16 22:04:19 -0400] gkra: wait, that's not a block....
[2014-07-16 22:04:29 -0400] jkeiser: gkra: yep!  next to :vagrant_options
[2014-07-16 22:05:56 -0400] gkra: jkeiser: so, like this? https://gist.github.com/gkra/0a895f2d10c8d26136ec
[2014-07-16 22:06:39 -0400] gkra: or, wait, without the curlies around the config line...
[2014-07-16 22:07:00 -0400] gkra: edited...
[2014-07-16 22:07:59 -0400] gkra: oh HUZZAH
[2014-07-16 22:08:05 -0400] gkra: jkeiser: thanks again :)
[2014-07-16 22:08:12 -0400] jkeiser: gkra: anytime!
[2014-07-16 22:09:06 -0400] gkra: interesting, so VM is created with the name of the machine resource plus a timestamp code...
[2014-07-16 22:11:40 -0400] doug1: Is there a good chef cookbook for pulling stuff from artifactory?
[2014-07-16 22:29:10 -0400] gkra: jkeiser: now, apparently, i need to learn about chef-zero :)
[2014-07-16 22:31:33 -0400] doug1: I'm trying to use this in a recipe.... https://github.com/opscode/artifactory-client how ???
[2014-07-16 22:33:57 -0400] viglesias: jkeiser: PR sent for endpoint config
[2014-07-16 22:40:15 -0400] foobarnum1: hi all
[2014-07-16 22:40:40 -0400] foobarnum1: is there anyone around with a good working knowledge of ohai hints?
[2014-07-16 22:41:08 -0400] coderanger: foobarnum1: What about them?
[2014-07-16 22:41:37 -0400] Damm: foobarnum1, http://www.catb.org/esr/faqs/smart-questions.html
[2014-07-16 22:41:56 -0400] coderanger: Damm: Be nice
[2014-07-16 22:41:57 -0400] Damm: just a suggestion to ask your question fully in the future and we can quickly answer you
[2014-07-16 22:42:12 -0400] foobarnum1: I'm trying to set custom attributes and ohai seems to be ignoring them
[2014-07-16 22:42:31 -0400] foobarnum1: [chef@ip-10-10-11-123 ~]$ cat /etc/chef/ohai/hints/
[2014-07-16 22:42:31 -0400] foobarnum1: delta_node.json  ec2.json
[2014-07-16 22:42:32 -0400] foobarnum1: [chef@ip-10-10-11-123 ~]$ cat /etc/chef/ohai/hints/delta_node.json
[2014-07-16 22:42:32 -0400] foobarnum1: {"custom_key":"custom_value"}
[2014-07-16 22:42:32 -0400] foobarnum1: [chef@ip-10-10-11-123 ~]$ ohai | grep custom
[2014-07-16 22:42:33 -0400] foobarnum1: [chef@ip-10-10-11-123 ~]$
[2014-07-16 22:42:33 -0400] coderanger: foobarnum1: hints are generally used just to force a particular plugin to run
[2014-07-16 22:42:36 -0400] Damm: coderanger, anyone new to irc who asks questions eventually should get better at asking the questions
[2014-07-16 22:42:39 -0400] coderanger: foobarnum1: and please use a pastebin in the future
[2014-07-16 22:42:41 -0400] Damm: it's not me trying to be an ass or mean
[2014-07-16 22:43:02 -0400] Damm: it's just to get the best help sometimes you have to ask your question fully and if you make it interesting
[2014-07-16 22:43:05 -0400] Damm: you get more answers
[2014-07-16 22:43:09 -0400] Damm: it's a horrible truth
[2014-07-16 22:43:45 -0400] coderanger: foobarnum1: The hints have nothing to do with the data returned by ohai
[2014-07-16 22:43:59 -0400] coderanger: foobarnum1: If you want to add custom stuff to that, you need to make a plugin
[2014-07-16 22:44:15 -0400] Damm: foobarnum1, btw ohai collects data from plugins and other sources
[2014-07-16 22:44:22 -0400] Damm: foobarnum1, it won't display the local node settings
[2014-07-16 22:44:26 -0400] Damm: as it has no knowledge of them
[2014-07-16 22:44:35 -0400] Damm: but it should display hints though
[2014-07-16 22:44:39 -0400] Damm: you would think?
[2014-07-16 22:44:49 -0400] Damm: if you create an ohai hint it should be shown
[2014-07-16 22:44:50 -0400] foobarnum1: I would/did think that
[2014-07-16 22:46:01 -0400] Damm: i still do
[2014-07-16 22:46:24 -0400] foobarnum1: so unless I write a plugin to collect the hint data it doesn't show anywhere?
[2014-07-16 22:46:55 -0400] foobarnum1: and isn't available to anything that doesn't pick up the file?
[2014-07-16 22:47:21 -0400] coderanger: foobarnum1: Even if you write a plugin, hints are unrelated
[2014-07-16 22:47:33 -0400] gkra: jkeiser: one more question, if you're willing. If I currently have a YAML file describing my cluster environment, should my chef-metal recipe read that in and use it, or should I convert it to a databag?
[2014-07-16 22:47:45 -0400] coderanger: foobarnum1: the hints system is basically per-plugin config settings, it has nothing to do with the returned attributes unless you code it that way
[2014-07-16 22:48:55 -0400] doug1: Any cookbooks for artifactory?
[2014-07-16 22:49:01 -0400] foobarnum1: I'm looking for a mechanism similar to custom facts/facter is hints the long way around?
[2014-07-16 22:49:05 -0400] doug1: client side
[2014-07-16 22:49:17 -0400] coderanger: foobarnum1: No, hints have nothing to do with that
[2014-07-16 22:49:28 -0400] coderanger: foobarnum1: You want to make an ohai plugin
[2014-07-16 22:49:54 -0400] coderanger: foobarnum1: Custom attributes can also be set on the node directly, or on roles and environments
[2014-07-16 22:51:08 -0400] shlant: doug1: did you try google?
[2014-07-16 22:51:09 -0400] shlant: https://github.com/olarivain/artifactory
[2014-07-16 22:51:10 -0400] coderanger: doug1: There are three in google, not sure what else you would expect to find here
[2014-07-16 22:51:26 -0400] foobarnum1: I'm aware of that. I have some legacy code that expects certain dynamic attributes to be there at bootstrap time
[2014-07-16 22:51:29 -0400] Damm: foobarnum1, well you can write a custom plugin for ohai but you should check out if there's others first
[2014-07-16 22:51:35 -0400] Damm: that fit the bill
[2014-07-16 22:51:45 -0400] Damm: http://docs.opscode.com/community_plugin_ohai.html
[2014-07-16 22:51:55 -0400] Damm: is a list of the plugins that Chef maintains a list of
[2014-07-16 22:52:20 -0400] doug1: shlant: no auth on https://github.com/olarivain/artifactory
[2014-07-16 22:52:21 -0400] coderanger: foobarnum1: What kind of data?
[2014-07-16 22:52:31 -0400] foobarnum1: I'm hoping there is a generic json> attribute plugin, will look there next
[2014-07-16 22:53:04 -0400] coderanger: foobarnum1: That would usually be done via chef-client -j
[2014-07-16 22:53:08 -0400] coderanger: foobarnum1: not via ohai
[2014-07-16 22:53:20 -0400] shlant: doug1: what are you trying to do exactly?
[2014-07-16 22:53:32 -0400] coderanger: doug1: Fun fact, using that cookbook is also illegal
[2014-07-16 22:54:12 -0400] doug1: shlant: install rpm's from artifactory server
[2014-07-16 22:54:32 -0400] doug1: coderanger: https://github.com/olarivain/artifactory ? How's that?
[2014-07-16 22:54:39 -0400] coderanger: doug1: "All Rights Reserved"
[2014-07-16 22:55:01 -0400] doug1: coderanger: the word 'rights' doesn't appear on https://github.com/olarivain/artifactory anywhere
[2014-07-16 22:55:09 -0400] coderanger: read: they are twits that didn't change the default license header
[2014-07-16 22:55:11 -0400] coderanger: look at any file
[2014-07-16 22:55:25 -0400] c_t: metadata.rb is a good one to start with
[2014-07-16 22:56:31 -0400] coderanger: doug1: I'm mostly being flippant, I highly doubt opentable would sue for using it and you could claim good faith
[2014-07-16 22:56:43 -0400] trobrock: I am trying to create a box with knife linode server create, and am wondering if there is a way to tell the bootstrap script to install something other than ruby1.8 with chef. This wasnt an issue until I added the mysql cookbook and it requires the use of require_relative.
[2014-07-16 22:56:59 -0400] shlant: jkeiser: I'm pretty sure the cheffish dependency error is due to 11.12.8 unless I just happened to test at the only time rubygems was working in the last hour
[2014-07-16 22:57:11 -0400] coderanger: trobrock: The default should be to install using omnibus, which ships ruby 1.9
[2014-07-16 22:57:12 -0400] foobarnum1: coderanger, There is a longish story behind some early attempts here that prevent doing a simple knife ec2 create because recipe's rely on pre-populated strings
[2014-07-16 22:57:38 -0400] coderanger: foobarnum1: Okay, you can set those in knife-ec2
[2014-07-16 22:57:42 -0400] trobrock: coderanger: thats what I thought, but this thing is definitely not doing an omnibus install and using ruby1.8
[2014-07-16 22:57:47 -0400] jkeiser: shlant: the error you are getting is saying that a cheffish version does not exist, but it does
[2014-07-16 22:57:59 -0400] coderanger: trobrock: What command are you running and what version of knife do you have
[2014-07-16 22:58:12 -0400] foobarnum1: coderanger on create?
[2014-07-16 22:58:33 -0400] jkeiser: Unless there's more to the error message than you pasted :)
[2014-07-16 22:58:42 -0400] shlant: jkeiser: "chef_gem[chef-metal] (infra_ruby::default line 18) had an error: Gem::DependencyError: Unable to resolve dependencies: cheffish requires chef-zero (~> 2.2)"
[2014-07-16 22:59:01 -0400] shlant: it seem like it could be rubygems
[2014-07-16 22:59:07 -0400] shlant: but I got it to work with rc.2
[2014-07-16 22:59:34 -0400] trobrock: coderanger: https://gist.github.com/trobrock/e03e2b37b7ff9de9c440
[2014-07-16 23:00:45 -0400] coderanger: foobarnum1: Yes, use the -j option
[2014-07-16 23:01:02 -0400] coderanger: trobrock: At the top of the bootstrap output, how is it installing chef?
[2014-07-16 23:01:24 -0400] coderanger: trobrock: Of note, if chef already installed on the image? That would make the install.sh script bail
[2014-07-16 23:02:42 -0400] jkeiser: shlant: maybe try forcing gem to update its list or something?  chef-zero 2.2 exists :/
[2014-07-16 23:03:47 -0400] doug1: coderanger: sorry missed most of that. I can't use that one anyway, as it has no auth
[2014-07-16 23:04:36 -0400] foobarnum1: coderanger: Can you think of a way to add arbitrary attributes in the ec2 server create command?
[2014-07-16 23:05:06 -0400] coderanger: foobarnum1: As I said, knife ec2 server create -j
[2014-07-16 23:05:38 -0400] trobrock: coderanger: this is the top of the install output, then a whole bunch of gem install output: https://gist.github.com/trobrock/e03e2b37b7ff9de9c440#file-chef-output
[2014-07-16 23:06:34 -0400] foobarnum1: undocumented switch rant goes here:
[2014-07-16 23:07:17 -0400] coderanger: foobarnum1: Its in the --help output, not sure what you mean by undocumented
[2014-07-16 23:07:21 -0400] foobarnum1: http://docs.opscode.com/plugin_knife_ec2.html
[2014-07-16 23:07:27 -0400] coderanger: trobrock: Hmm, what version of the knife-linode gem do you have?
[2014-07-16 23:07:53 -0400] coderanger: trobrock: Oh, never mind
[2014-07-16 23:08:31 -0400] coderanger: trobrock: There hasn't been a release of knife-linode in years, you should probably consider it abandonded
[2014-07-16 23:08:59 -0400] coderanger: trobrock: If you install from master, this will work correctly, but who knows what else is broken
[2014-07-16 23:09:07 -0400] trobrock: coderanger: oh ok, do you know of any alternatives for using linode?
[2014-07-16 23:09:18 -0400] coderanger: trobrock: Just make the instance yourself and use knife bootstrap
[2014-07-16 23:09:36 -0400] coderanger: trobrock: All the server create does is poke the linode API and then call knife bootstrap for you
[2014-07-16 23:09:38 -0400] trobrock: coderanger: ok thanks
[2014-07-16 23:11:12 -0400] coderanger: trobrock: https://github.com/opscode/knife-linode/issues/37 if you want to follow it
[2014-07-16 23:12:22 -0400] foobarnum1: coderanger: just to recap -j { "custom_key" : "custom_value" } adds that attribute to the node on create if so, that is exactly what I was trying to do
[2014-07-16 23:12:59 -0400] coderanger: foobarnum1: I think that should work, though you can also pass it a full node object in JSON, thats just a lot more verbose
[2014-07-16 23:13:05 -0400] coderanger: Also you need quoting there
[2014-07-16 23:13:18 -0400] Damm: you don't have to do the full node object
[2014-07-16 23:13:28 -0400] Damm: but be aware it can unset other node objects
[2014-07-16 23:17:14 -0400] foobarnum1: I think this will get us around some legacy shenigans where there was a race condition for attributes. I might suggest adding the -j switch to the opscode docs for those that use the site instead of help for command reference
[2014-07-16 23:17:24 -0400] foobarnum1: Thanks for your help
[2014-07-16 23:18:56 -0400] Damm: -j is how everything works
[2014-07-16 23:19:04 -0400] Damm: when you bootstrap it's chef-client -j /etc/chef/first-run.json
[2014-07-16 23:20:02 -0400] foobarnum1: true. we've got a homegrown hands off create routine that I'm mitigating
[2014-07-16 23:27:05 -0400] shlant: jkeiser: works after /opt/chef/embedded/bin/gem update
[2014-07-16 23:27:14 -0400] shlant: what does it MEAN? haha
[2014-07-16 23:27:33 -0400] shlant: do I need ot explicitely specify 11.12.8-2?
[2014-07-16 23:27:45 -0400] shlant: or whatever is newest
[2014-07-16 23:30:24 -0400] Damm: shlant, what did gem update do?
[2014-07-16 23:30:26 -0400] Damm: or update?
[2014-07-16 23:31:55 -0400] shlant: Damm: well I assume the important part of it would have been
[2014-07-16 23:31:55 -0400] shlant: Updating chef-zero
[2014-07-16 23:31:56 -0400] shlant: Fetching: chef-zero-2.2.gem (100%)
[2014-07-16 23:31:56 -0400] shlant: Successfully installed chef-zero-2.2
[2014-07-16 23:32:23 -0400] jkeiser: shlant: I think it means rubygems was broken
[2014-07-16 23:32:33 -0400] shlant: whaat
[2014-07-16 23:32:38 -0400] shlant: just my luck haha
[2014-07-16 23:32:43 -0400] shlant: that is the worst testing timing
[2014-07-16 23:40:41 -0400] jameson_: so new installs of vagrant and berkshelf explodes on my face?
[2014-07-16 23:46:46 -0400] cheeseplus: jameson_: in a particular way?
[2014-07-16 23:51:53 -0400] reset: jameson_: are you using ChefDK? That is the recommended approach

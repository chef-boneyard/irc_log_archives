[2014-07-10 00:04:23 -0400] chef706: Hey! Is there a way to pass a specific return from a recipe ran on a client ?
[2014-07-10 00:04:48 -0400] jblack: for later review?
[2014-07-10 00:04:57 -0400] jblack: You could set a node attribute and look at it with knife, or on the chef server
[2014-07-10 00:05:56 -0400] chef706: jblack: are node attributes set in the web server?
[2014-07-10 00:06:45 -0400] jblack: node.set[:thisthing][:thatthing] = 23424
[2014-07-10 00:06:47 -0400] jblack: node.save
[2014-07-10 00:07:10 -0400] jblack: you could then see it with  knife node edit (name of node),  or log into the chef server and look
[2014-07-10 00:08:02 -0400] chef706: jblack: Thanks!!
[2014-07-10 00:19:58 -0400] carmstrong: where should I start debugging a "Version constraint is not a valid Chef version constraint" from the Chef API?
[2014-07-10 00:20:11 -0400] carmstrong: I assume cookbook metadata, but there's not a single constraint in there
[2014-07-10 00:20:40 -0400] jblack: I would have thought metadata.rb too
[2014-07-10 00:21:11 -0400] tequilarista: transitive dep?
[2014-07-10 00:21:37 -0400] tequilarista: are depends-ing anything that could be wonky?
[2014-07-10 00:22:32 -0400] carmstrong: no deps at all - just two suggests
[2014-07-10 00:22:58 -0400] carmstrong: https://github.com/socrata-cookbooks/java/blob/master/metadata.rb
[2014-07-10 00:23:04 -0400] carmstrong: trying to use stove to push a new release to supermarket
[2014-07-10 00:25:37 -0400] lamont_oc: try to figure out if stove is throwing it or supermarket is throwing it, and probably try to find out what metadata.json youve generated
[2014-07-10 00:27:07 -0400] carmstrong: definitely looks like supermarket. maybe I'll open an issue on that GH project, but this may just be the Chef API server as well
[2014-07-10 00:27:15 -0400] carmstrong: https://www.irccloud.com/pastebin/259XTFiP
[2014-07-10 00:28:01 -0400] lamont_oc: looks like a server response, but would need more context, particularly a stack trace
[2014-07-10 00:28:34 -0400] lamont_oc: and would ideally need to know what the POST was that generated that
[2014-07-10 00:28:59 -0400] lamont_oc: im unfamiliar with stove but if its got -l debug or -VV or whatever...
[2014-07-10 00:32:11 -0400] carmstrong: yeah the debug output is where I'm getting that from. not much helpful about the request, though
[2014-07-10 00:32:41 -0400] carmstrong: looks like it's just using the Chef API gem internally
[2014-07-10 00:44:43 -0400] damien: if anyone is curious, discovered why my services wouldn't boot in my vagrant/ubuntu combo, someone else has to and already wrote up fix for it: http://razius.com/articles/launching-services-after-vagrant-mount/
[2014-07-10 00:45:22 -0400] damien: basically, vagrant mounts the shared folder after boot up, if you have any services that depend on those on files in those directories, it will not start on boot :)
[2014-07-10 00:54:44 -0400] jblack: Ok, so is anyone currently using knife with digitalocean?  It seems like fog might not be working with api 2.0
[2014-07-10 00:54:55 -0400] jblack: either that, or digitalocean isn't showing client_id any more on the api page
[2014-07-10 00:57:29 -0400] jblack: ahh, I get it now. the 1.0 api is still running on the old page
[2014-07-10 02:13:42 -0400] chefgirl: hi
[2014-07-10 02:13:54 -0400] chefgirl: can anybody tell me the current time in EST ??
[2014-07-10 02:14:00 -0400] chefgirl: Please its urgent
[2014-07-10 02:14:06 -0400] chefgirl: also date
[2014-07-10 02:14:26 -0400] gchristensen: chefgirl: wed july 9 9:14
[2014-07-10 02:14:28 -0400] gchristensen: pm
[2014-07-10 02:14:42 -0400] gchristensen: soryr, I'm in CST. its 10:14 pm
[2014-07-10 02:14:44 -0400] gchristensen: in EST
[2014-07-10 02:14:45 -0400] chefgirl: okay thanks gchritensen
[2014-07-10 02:14:56 -0400] chefgirl: and date ??
[2014-07-10 02:15:10 -0400] chefgirl: gchristensen : date ??
[2014-07-10 02:15:27 -0400] gchristensen: chefgirl: july 9 - try googling " time in new york city"
[2014-07-10 02:16:27 -0400] chefgirl: gchristensen : thanks u saved my life
[2014-07-10 02:16:29 -0400] chefgirl: :)
[2014-07-10 02:16:31 -0400] gchristensen: chefgirl: how ...?
[2014-07-10 02:17:01 -0400] chefgirl: there was some activity schedules to be done on 10 july 10PM EST \
[2014-07-10 02:17:16 -0400] chefgirl: and i googled but was not sure
[2014-07-10 02:25:16 -0400] Bordaine: hey]
[2014-07-10 02:29:18 -0400] j^2: Bordaine: hola
[2014-07-10 02:29:24 -0400] j^2: or i mean hello
[2014-07-10 03:23:06 -0400] Bordaine: I am trying to use the default nginx cookbook for Chef
[2014-07-10 03:23:33 -0400] Bordaine: do you know which recipe I go to to specify port served and a static folder?
[2014-07-10 03:44:53 -0400] vt101: ERROR: The cookbook repo /home/andy/chef-repo/cookbooks is not a git repository."  Is this *REALLY* a requirement?  All my cookbooks are in git.  Why the F must I muck around with nested git?!?!?  It's irritating as all hell.
[2014-07-10 03:45:14 -0400] vt101: Any way I can bypass this requirement?
[2014-07-10 04:05:41 -0400] holoway: vt101: where is that error coming from?
[2014-07-10 04:15:13 -0400] vt101: holoway: knife cookbook site install with any changed cookbooks
[2014-07-10 04:16:16 -0400] fclausen: hello all - are all attributes in all files in attributes/ automatically read and set? I don't have to explicitly include files not called attributes/default.rb?
[2014-07-10 04:36:28 -0400] juliancdunn: fclausen: correct
[2014-07-10 06:15:59 -0400] jblack: It's looking to me like chef-metal is still a bit young yet for production
[2014-07-10 06:16:21 -0400] jblack: super awesome, though!
[2014-07-10 06:19:05 -0400] coderanger: jblack: Indeed, it is definitely early on in dev :)
[2014-07-10 06:20:26 -0400] jblack: now I have an itch I need to scratch. :P
[2014-07-10 06:20:52 -0400] coderanger: jblack: CloudFormation/Heat fill a similar niche
[2014-07-10 06:21:51 -0400] jblack: Yeah, I've used similiar tools.. But cheffing it up...  WINNN!
[2014-07-10 06:23:22 -0400] jblack: I don't think the 1.upto(x) { machine } is quite as idempotent as advertised...  It's idempotent on the way up, but not on the way down. (change 2 to 3, then 3 to 2)
[2014-07-10 06:23:30 -0400] coderanger: jblack: If you are in or near SF, there is a hackathon to work on it soon
[2014-07-10 06:23:43 -0400] jblack: seattle, I'm sad to say
[2014-07-10 06:24:36 -0400] jblack: I'm thinking chef-metal-fog is probably a good place to jump in to help. Fix up digitalocean, add linode....
[2014-07-10 06:31:52 -0400] coderanger: jblack: Heh, well jkeiser is actually SEA-ish-based so maybe there will be a followup event up there too
[2014-07-10 06:32:15 -0400] jblack: Nice!
[2014-07-10 06:51:33 -0400] balbirs: I am using knife ec2 plugins.. which configuration I can keep the AWS access and secret key instead of providing it in command line in -A and -K?
[2014-07-10 06:53:16 -0400] digitalchild: can you not use the IAMs ?
[2014-07-10 06:53:33 -0400] cheeseplus: balbirs: https://github.com/opscode/knife-ec2#configuration
[2014-07-10 06:54:21 -0400] cheeseplus: either the keys or a credentials file
[2014-07-10 06:58:10 -0400] balbirs: cheeseplus: Thanks!
[2014-07-10 07:05:15 -0400] balbirs: when I create new instance using 'knife ec2 server create' I am seeing instance in pending status.. it is getting timeout after 600 second. Is there a place where  I can see the ec2 on chef workstation ?
[2014-07-10 07:25:40 -0400] chefgirl: @balbris : If it is bootstrapped correctly then u can see the instance on chef server
[2014-07-10 07:26:05 -0400] chefgirl: balbris : you you bootstrapping the server or just creating the ec2 server
[2014-07-10 07:57:50 -0400] ssd7: ohai Chefs
[2014-07-10 08:06:21 -0400] coderanger: ssd7: Woo timezones
[2014-07-10 08:07:40 -0400] ssd7: Indeed timezones
[2014-07-10 08:09:12 -0400] ssd7: coderanger: Still getting used to it being nightime here when most of my collegues/friends are in the full swing of their work day
[2014-07-10 08:09:38 -0400] mattt: ssd7: where you based ?
[2014-07-10 08:09:42 -0400] ssd7: or, like right now, it being mid morning and completely empty on the corners of the internet I use
[2014-07-10 08:09:48 -0400] ssd7: mattt: Just moved to the UK
[2014-07-10 08:10:08 -0400] mattt: ssd7: i see, also in UK myself
[2014-07-10 08:10:27 -0400] mattt: personally i like the quiet :P
[2014-07-10 08:11:34 -0400] ssd7: I combined my move in timezones with a move from a city to a small town.  So I'm getting quiet over multiple axis at the moment :)
[2014-07-10 08:11:53 -0400] mattt: ssd7: which town?
[2014-07-10 08:11:59 -0400] mattt: where'd you move from?
[2014-07-10 08:12:10 -0400] ssd7: Seattle, WA to Lancaster
[2014-07-10 08:12:17 -0400] mattt: ssd7: up by the lake district?
[2014-07-10 08:12:43 -0400] ssd7: mattt: Right, not too far from the lake district
[2014-07-10 08:12:56 -0400] mattt: ssd7: i was in seattle in march ... i'd probably have stayed there if i were you :P
[2014-07-10 08:14:36 -0400] mattt: ssd7: i'm not originally from UK either -- it's a big change, but there are a lot of great things about living here/Europe
[2014-07-10 08:14:36 -0400] ssd7: mattt: I very much liked Seattle and will prob. end up back there at some point.  Moved here as there were some good opportunities for my wife and I work on the internet so I can work anywhere.
[2014-07-10 08:15:02 -0400] mattt: ssd7: yep, seattle will always be there unless it sinks in an earthquake or something ... at which point just as well you left :P
[2014-07-10 08:30:57 -0400] coderanger: Seattle is a bit too north to worry about quakes :)
[2014-07-10 08:31:11 -0400] mattt: coderanger: where you based then if you're always online at this time ?
[2014-07-10 08:31:23 -0400] coderanger: mattt: SF, I just don't sleep normal hours
[2014-07-10 08:31:29 -0400] mattt: coderanger: shame on you !
[2014-07-10 08:32:40 -0400] ssd7: coderanger: There are a number of faults in the puget sound region.  A bigger quake on one of them would actually be really bad for the city
[2014-07-10 08:33:20 -0400] coderanger: ssd7: It could happen, but the main plate boundaries are way out at sea
[2014-07-10 08:34:04 -0400] coderanger: Not that a tsunami would be substantively better ...
[2014-07-10 08:34:38 -0400] lamont_oc: seattle fault runs right across elliott bay
[2014-07-10 08:35:31 -0400] lamont_oc: and there are huge walls, hundreds of feet high that can collapse and trigger tsunamis in the sound
[2014-07-10 08:36:22 -0400] lamont_oc: the seattle fault wont set off a 9.0 because its not large enough
[2014-07-10 08:37:02 -0400] mattt: did i read correctly that the seattle waterfront is all reclaimed land also?
[2014-07-10 08:37:09 -0400] lamont_oc: but a solid >=7 right under the city, liquifying pioneer square and causing tsunamis right in the bay would make for a really bad day
[2014-07-10 08:37:16 -0400] coderanger: Also there is that whole "active volcano" thing pretty nearby
[2014-07-10 08:37:25 -0400] mattt: yeah seattle is a big bag of fail
[2014-07-10 08:37:37 -0400] mattt: but it's a great city, would still live there if i had the chance :P
[2014-07-10 08:37:37 -0400] lamont_oc: rainier will mostly waste tacoma and renton  no big loss
[2014-07-10 08:38:33 -0400] lamont_oc: the furthest north the lahars from rainier have reached is the south end of lake washington, and down the duwamish
[2014-07-10 08:40:04 -0400] lamont_oc: i was in the 2001 quake in seattle which was a 7 that was like 25 miles south and 25 miles down  in a brick building on the 8th floor...
[2014-07-10 08:40:47 -0400] lamont_oc: that was about as exciting as id like a quake to be
[2014-07-10 08:41:30 -0400] mattt: lamont_oc: wow, lasted 45 seconds!
[2014-07-10 08:42:48 -0400] ssd7: anyone mind mentioning my nick?  want to test something
[2014-07-10 08:43:15 -0400] mattt: ssd7:
[2014-07-10 08:43:28 -0400] lamont_oc: yeah it wasnt quite strong enough to really freak me out, thought, just got in a doorway and then it passed, and then i just started dealing with all the glass that had falled off stuff and broken
[2014-07-10 08:43:48 -0400] ssd7: cool, finally have notifications from irssi
[2014-07-10 08:44:46 -0400] mattt: ssd7: i suck, i use irssi on VPS and connect to it with textual (via the irssi proxy) from work, so i get notifications on my desktop :P
[2014-07-10 08:44:48 -0400] lamont_oc: i dont think the brick building would have taken a whole lot more, and we lost a few brick buildings idowntown
[2014-07-10 08:45:26 -0400] mattt: lamont_oc: i felt a few shaking of cupboards when living in wellington, new zealand ... that was enough for me
[2014-07-10 08:45:28 -0400] lamont_oc: move that ~7 from where it happened in nisqually and put it right under seattle, and were gonna have a bad day
[2014-07-10 08:45:37 -0400] mattt: lamont_oc: you still in seattle?
[2014-07-10 08:45:42 -0400] lamont_oc: yep
[2014-07-10 08:46:17 -0400] mattt: i'd be freaked out living in seattle :-/
[2014-07-10 08:46:27 -0400] lamont_oc: the office building that chef is in right now is a brick building in pioneer square
[2014-07-10 08:46:32 -0400] ssd7: Eventually people will agreee to my plan to make an office in Ibiza and then everyone can move there rather than seattle
[2014-07-10 08:46:47 -0400] lamont_oc: thing is that it doesnt happen all that often
[2014-07-10 08:46:49 -0400] Kim^J: ssd7: :D
[2014-07-10 08:46:57 -0400] lamont_oc: the seattle plate goes hundreds of years without slipping i think
[2014-07-10 08:47:26 -0400] Kim^J: lamont_oc: The Swedish plate doesn't move.-
[2014-07-10 08:47:26 -0400] Kim^J: :D
[2014-07-10 08:47:30 -0400] lamont_oc: the big plate in the pacific that can generate 9s definitely goes hundreds of years
[2014-07-10 08:47:37 -0400] mattt: would imagine ibiza is pretty depressing in teh winter?  :)
[2014-07-10 08:47:42 -0400] Kim^J: mattt: Why?
[2014-07-10 08:48:04 -0400] mattt: Kim^J: most 'seaside resorts' are no?
[2014-07-10 08:48:05 -0400] lamont_oc: so mostly seattle is pretty mellow  no tornadoes, hurricanes, forest fires, etc
[2014-07-10 08:48:13 -0400] mattt: (not even been in summer mind, so i'm just speculating!)
[2014-07-10 08:48:21 -0400] lamont_oc: and yeah, no quakes like SF has quakes
[2014-07-10 08:49:17 -0400] lamont_oc: just dont spend a million dollars for a house on a bluff that is gonna collapse and fall into the sea
[2014-07-10 08:49:25 -0400] Kim^J: mattt: "Summer" is pretty long on Ibiza... :P
[2014-07-10 08:50:13 -0400] mattt: lamont_oc: i always found that funny about wellington ... lots of speculation of pending quake there which will cause severe damage yet there are homes built on the side of the hills there which are so steep you have to take little shuttles up the hillside
[2014-07-10 08:50:42 -0400] lamont_oc: lol
[2014-07-10 08:50:59 -0400] mattt: lamont_oc: yeah, bit like those seats disabled people have in their homes to get up/down stairs
[2014-07-10 08:51:24 -0400] mattt: Kim^J: nice ... it's summer in UK and like < 20 celcius right now
[2014-07-10 08:51:36 -0400] mattt: it was proper cold out when i left this morning :P
[2014-07-10 08:53:45 -0400] Kim^J: mattt: >25 here in Sweden :D
[2014-07-10 09:01:07 -0400] lamont_oc: >25 in Seattle.  feels like >80 in my bedroom  should try to sleep now
[2014-07-10 09:01:31 -0400] Kim^J: xD
[2014-07-10 09:01:33 -0400] Kim^J: Night!
[2014-07-10 09:01:35 -0400] mattt: later!
[2014-07-10 09:01:45 -0400] lamont_oc: (geneticallly im swedish/scottish, i dont do well with any kind of heat)
[2014-07-10 09:02:00 -0400] lamont_oc: 'nite
[2014-07-10 09:05:01 -0400] chefgirl: can anybody tell me what is devops ?
[2014-07-10 09:05:54 -0400] ssd7: chefgirl: https://www.youtube.com/watch?v=Fx8OBeNmaWw
[2014-07-10 09:09:20 -0400] chefgirl: ssd7: i couldnt get anything from that video :(
[2014-07-10 09:10:12 -0400] chefgirl: what is devops ???
[2014-07-10 09:10:23 -0400] mattt: chefgirl: https://www.youtube.com/watch?v=_I94-tJlovg
[2014-07-10 09:36:45 -0400] soupdiver: I've got a .netrc file in "/home/deploy" with credentials for a git repo. But when trying to git pull via the bash resource the file it not loaded. Do I missed something?
[2014-07-10 10:19:21 -0400] coderanger: soupdiver: Most commands look for things like that relative to $HOME, which isn't set by mixlib-shellout to match the user's actual homedir
[2014-07-10 10:19:59 -0400] coderanger: soupdiver: you can manually set it in your script though, export HOME=/home/deploy
[2014-07-10 10:27:55 -0400] soupdiver: @coderanger thanks! I will try
[2014-07-10 10:30:49 -0400] HardFu: hi, is it possible to run a command only on one node, and one only?
[2014-07-10 10:32:48 -0400] jonlives: HardFu: if you just put a recipe on that one node, then sure :)
[2014-07-10 10:37:02 -0400] HardFu: jonlives: I have a couple of servers horizontally behind a load balancer
[2014-07-10 10:37:24 -0400] HardFu: each can be turned on/off at any time, so there's no "master"
[2014-07-10 10:39:54 -0400] jonlives: HardFu: I'm not sure what you're asking
[2014-07-10 10:40:12 -0400] HardFu: I have a gem (it's a Rails app), called clockwork
[2014-07-10 10:40:28 -0400] HardFu: it does some background work once a day
[2014-07-10 10:41:01 -0400] HardFu: so, I don't want that gem (which is also a daemon), to run on more than one node
[2014-07-10 10:43:33 -0400] jonlives: HardFu: ok - so you make sure that the recipe which controls clockwork is only added to one node.
[2014-07-10 10:43:48 -0400] HardFu: yes
[2014-07-10 10:44:05 -0400] mattt: HardFu: can you not have the recipe just added to run list of one node like jonlives said ?
[2014-07-10 10:48:24 -0400] ssd7: HardFu: A similar alternative, is sometimes we wrap things in a conditional that checks if a node has a particular tag.  So you can still just have your run_list be "role[fooApp]" and then tag one of the nodes to do background work. and only the node with that tag will get the recipe added.  It is then up to a human to make sure that only one node has the tag
[2014-07-10 10:48:59 -0400] HardFu: ssd7, thank you,... that's exactly what I needed
[2014-07-10 10:49:26 -0400] ssd7: If you want to enforce that only one node is running that service, then you might have to do something with data bags or search or something else.
[2014-07-10 10:49:45 -0400] ssd7: as in, enforce other than by convention amongst the human users of your system :)
[2014-07-10 10:51:09 -0400] mattt: if you have to manually add a tag may as well just manually modify the run list :P
[2014-07-10 10:51:52 -0400] mattt: could have something involving writing an attribute which is checked prior to any nodes being set up w/ that background worker
[2014-07-10 10:53:01 -0400] mattt: i know a colleague did something similar to set up master/slave database servers
[2014-07-10 10:57:01 -0400] visof: hi
[2014-07-10 10:57:15 -0400] visof: how can i use mount to mount loopback device
[2014-07-10 10:57:32 -0400] visof: i got this is not a block device (maybe try `-o loop'?)
[2014-07-10 10:59:12 -0400] ssd7: visof: The mount resource has an "options" and "fstype" attribute which you can probably poke at
[2014-07-10 11:00:33 -0400] visof: ssd7: the fs i'm trying to mount is ext2 type and i set options to loop and it works
[2014-07-10 11:25:22 -0400] thorduri: anyone got pointers to dashboard-style monitoring of nodes? Basically looking for something that would display information similar to knife-lastrun (https://github.com/jgoulah/knife-lastrun) as well logs
[2014-07-10 11:33:23 -0400] double_p: thordur!
[2014-07-10 11:33:36 -0400] double_p: thorduri: we integrated such info into zabbix
[2014-07-10 11:36:58 -0400] thorduri: double_p: oi!
[2014-07-10 11:38:47 -0400] thorduri: Zabbix integration might not be a bad idea (we use it i think, somewhere. i think our vsphere monitoring is in there)
[2014-07-10 11:38:50 -0400] thorduri: not a huge fan though
[2014-07-10 11:39:10 -0400] double_p: yah, it's a bit steep to dig through it
[2014-07-10 11:40:31 -0400] s1991: Hello can anyone suggest what's the problem in this http://pastebin.com/NSxm5Rm0
[2014-07-10 11:40:52 -0400] s1991: Error executing action `upgrade` on resource 'python_pip[setuptools]'?
[2014-07-10 11:40:59 -0400] n1ko:  STDOUT: Cannot fetch index base URL https://pypi.python.org/simple/
[2014-07-10 11:41:09 -0400] n1ko: check lines 10-18
[2014-07-10 11:43:43 -0400] s1991: n1ko: here http://pastebin.com/SjpGN13Q
[2014-07-10 11:43:56 -0400] s1991: from where did you get lines 10-18?
[2014-07-10 11:44:10 -0400] n1ko: from your previous paste, it tells you the problem there quite clearly :)
[2014-07-10 11:44:47 -0400] n1ko: probably a networking problem
[2014-07-10 11:45:17 -0400] s1991: n1ko: I guess my order of including recipes are fine
[2014-07-10 11:45:51 -0400] n1ko: the error message doesnt have anything to do with chef
[2014-07-10 11:46:08 -0400] n1ko: but yeah, at a quick glance your recipe seems ok
[2014-07-10 11:46:34 -0400] thorduri: s1991: ERROR: certificate common name `*.c.ssl.fastly.net' doesn't match requested host name `pypi.python.org'.
[2014-07-10 11:46:48 -0400] ocholetras: hi guys
[2014-07-10 11:46:50 -0400] thorduri: you'll probably have to munge the your ssl chains...
[2014-07-10 11:46:55 -0400] ocholetras: what could be the problem
[2014-07-10 11:47:02 -0400] ocholetras: my knife is not getting plugins
[2014-07-10 11:47:06 -0400] ocholetras: installed via gem
[2014-07-10 11:47:19 -0400] ocholetras: im  using
[2014-07-10 11:47:26 -0400] ocholetras: embedded ruby path
[2014-07-10 11:47:33 -0400] ocholetras: and /usr/local/bin/knife
[2014-07-10 11:48:33 -0400] s1991: it ran, may be network problm.
[2014-07-10 11:48:53 -0400] s1991: thorduri: from where do you figure this out from my pastebin?
[2014-07-10 11:49:35 -0400] thorduri: s1991: nowhere, but I had pretty much an identical problem a couple of days ago :)
[2014-07-10 11:49:57 -0400] s1991: ok
[2014-07-10 11:53:42 -0400] ocholetras: anyone knows about my problem with kniife and plugins?
[2014-07-10 11:54:32 -0400] mattt: ocholetras: what do you mean it's not getting plugins ?
[2014-07-10 11:55:57 -0400] ocholetras: i have recently installed
[2014-07-10 11:55:59 -0400] ocholetras: knife backup
[2014-07-10 11:56:04 -0400] ocholetras: and when invoking knife backup
[2014-07-10 11:56:23 -0400] ocholetras: i mean
[2014-07-10 11:57:09 -0400] ocholetras: "knife backup --help" it promts all knife commands list, just like i had entered a bad subcmd. Futhermore there is no input for "backup" con knife help cmd list
[2014-07-10 11:57:13 -0400] ocholetras: so wtf O_o
[2014-07-10 11:57:21 -0400] ocholetras: Installed knife-lastrun
[2014-07-10 11:57:32 -0400] ocholetras: and doesnt work neither
[2014-07-10 11:58:00 -0400] ocholetras:  :: ~/.chef  knife help backup                                                                                                                                                                      1 
[2014-07-10 11:58:00 -0400] ocholetras: ERROR: No help found for 'backup'
[2014-07-10 11:58:31 -0400] ocholetras: mattt: i dont know if there is a know problem when using embedded ruby on installing knife plugins via gem....
[2014-07-10 11:59:53 -0400] mattt: ocholetras: i don't believe so, i think i used gem to install knife plugins before .... checking my node now
[2014-07-10 12:00:13 -0400] zts: ocholetras: how was /usr/local/bin/knife installed?  Is it a symlink to your omnibus install?
[2014-07-10 12:00:27 -0400] ocholetras: umm
[2014-07-10 12:00:31 -0400] ocholetras: lets have a look
[2014-07-10 12:00:47 -0400] ocholetras: i have installed chef-client throught the shell script
[2014-07-10 12:00:56 -0400] ocholetras: curl -L https://www.opscode.com/chef/install.sh | sudo bash
[2014-07-10 12:01:06 -0400] mattt: ocholetras: you sure you're using the right gem btw ?
[2014-07-10 12:01:12 -0400] mattt: (gem install rather)
[2014-07-10 12:01:35 -0400] ocholetras: yep
[2014-07-10 12:01:42 -0400] ocholetras: ~/.chef  which gem
[2014-07-10 12:01:42 -0400] ocholetras: /opt/chef/embedded/bin/gem
[2014-07-10 12:02:11 -0400] mattt: ocholetras: try /opt/chef/embedded/bin/knife ?
[2014-07-10 12:02:24 -0400] zts: I thought the omnibus packages only made symlinks in /usr/bin, not /usr/local/bin
[2014-07-10 12:02:28 -0400] mattt: ocholetras: sorry /opt/chef/bin/knife
[2014-07-10 12:02:31 -0400] ocholetras: ~/.chef  head  /usr/local/bin/knife
[2014-07-10 12:02:31 -0400] ocholetras: #!/usr/bin/env ruby1.9.1
[2014-07-10 12:02:32 -0400] ocholetras: #
[2014-07-10 12:02:32 -0400] ocholetras: # This file was generated by RubyGems.
[2014-07-10 12:02:32 -0400] ocholetras: #
[2014-07-10 12:02:33 -0400] ocholetras: # The application 'chef' is installed as part of a gem, and
[2014-07-10 12:02:33 -0400] ocholetras: # this file is here to facilitate running it.
[2014-07-10 12:02:34 -0400] ocholetras: #
[2014-07-10 12:02:34 -0400] ocholetras: require 'rubygems'
[2014-07-10 12:02:56 -0400] ocholetras: ~/.chef  /opt/chef/bin/knife help backup                                                                                                                                                        1 
[2014-07-10 12:02:57 -0400] ocholetras: ERROR: No help found for 'backup'
[2014-07-10 12:03:37 -0400] mattt: ocholetras: i have knife-rackspace installed, but knife help rackspace doesn't yield anything btw
[2014-07-10 12:04:01 -0400] mattt: ocholetras: just type knife backup without args
[2014-07-10 12:04:20 -0400] zts: ocholetras: please use a pastebin.  But what you pasted doesn't look like knife installed by an omnibus package
[2014-07-10 12:04:29 -0400] zts: otherwise the #! line would be /opt/chef/...
[2014-07-10 12:04:31 -0400] ocholetras: zts you are right sorry
[2014-07-10 12:05:54 -0400] ocholetras: will uninstall and install again using curl -L https://www.opscode.com/chef/install.sh | sudo bash
[2014-07-10 12:06:06 -0400] ocholetras: mattt
[2014-07-10 12:06:09 -0400] ocholetras: will try that
[2014-07-10 12:06:11 -0400] ocholetras: 1sec
[2014-07-10 12:06:25 -0400] ocholetras: yeah
[2014-07-10 12:06:34 -0400] ocholetras: just /opt/chef/bin/knife backup works!
[2014-07-10 12:06:38 -0400] ocholetras: omg!
[2014-07-10 12:10:26 -0400] ocholetras: thanks a lot guys!
[2014-07-10 12:10:56 -0400] ocholetras: I have garbage on my system ruby gems installed: chef, chef-zero, chef-spec.. prior to we decided to work with embedded one.
[2014-07-10 12:10:58 -0400] ocholetras: ^^
[2014-07-10 12:11:02 -0400] ocholetras: sorry for the spam
[2014-07-10 12:11:05 -0400] zts: yeah, I've had that problem before :)
[2014-07-10 12:43:27 -0400] StFS: hey guys... do you know of any tool that can plot a "dependency graph" for my cookbook? I'd like to see a visual representation of what recipe includes what other recipes etc. Does anything like that exist?
[2014-07-10 12:47:29 -0400] jonlives: StFS: you could try https://github.com/miketheman/knife-role-spaghetti - it works for roles, but could likely be modified
[2014-07-10 12:48:30 -0400] StFS: allright... I may take a peek... was just hoping that something already existed ;)
[2014-07-10 12:53:40 -0400] zts: berkshelf 3 has a "berks viz", but I haven't actually tried it
[2014-07-10 13:05:32 -0400] StFS: zts: thanks... that seems to only display dependencies between cookbooks, not between recipes.
[2014-07-10 13:05:41 -0400] StFS: but it definately helps
[2014-07-10 13:07:29 -0400] zts: StFS: oh sorry, I completely misread your question - recipe dependencies would be a lot harder
[2014-07-10 13:09:44 -0400] StFS: well... basically I would just want to grab all the include_recipe lines from the recipes in my cookbook and draw lines to those recipes... not really that terrible I think... and that spaghetti plugin gives me a good idea how that might be possible... so maybe I'll find some time to create my first knife plugin... who knows :)
[2014-07-10 13:11:11 -0400] workmad3: StFS: what about when the recipe is included dynamically? e.g. 'include_recipe "my_cookbook::#{node[:prefix][:install_type]}"'?
[2014-07-10 13:11:34 -0400] StFS: workmad3: oh great... you just had to ruin it for me ;)
[2014-07-10 13:11:45 -0400] zts: beat me to what I was writing :)
[2014-07-10 13:12:07 -0400] zts: if you can make some assumptions about your own cookbooks, you can do the 90% version easily enough.  But the 100% version needs to compile recipes
[2014-07-10 13:12:08 -0400] workmad3: heh
[2014-07-10 13:12:27 -0400] workmad3: zts: compile with a specific node's context too... :)
[2014-07-10 13:12:44 -0400] zts: and even that's not bulletproof, if you might conditionally call include_recipe  (in that case, you'd need to parse the file to pick it out)
[2014-07-10 13:12:47 -0400] zts: yep :)
[2014-07-10 13:13:16 -0400] StFS: allright allright... it's harder... fine... I get it! ;)
[2014-07-10 13:13:20 -0400] zts: you could get some of the way by looking at what chefspec does, and another part of the way by looking at what foodcritic does.  But it's definitely not a trivial problem :)
[2014-07-10 13:13:24 -0400] ResidentR: Is there anything that needs to be done to get the webui working? When I try to log in, the username/pass boxes disappear for a second, then come right back.
[2014-07-10 13:15:01 -0400] ResidentR: I've had the same behaviour with amazon linux, ubuntu 12.10, and ubuntu 14.04
[2014-07-10 13:16:27 -0400] ResidentR: Any version of RHEL/CentOS I've tried has not been able to succesfully complete the initial reconfigure. Getting a little frustrated with it.
[2014-07-10 13:25:03 -0400] LeShadow: so I have the following question
[2014-07-10 13:25:14 -0400] LeShadow: if I have 4 recipes
[2014-07-10 13:25:23 -0400] LeShadow: and I want to run them all in a specific order, how do I do that?
[2014-07-10 13:30:47 -0400] jonlives: LeShadow: put them in the runlist in the order you want them to be run :)
[2014-07-10 13:31:05 -0400] LeShadow: well jonlives, the last recipe is finished before the third one, there is my problem :/
[2014-07-10 13:31:34 -0400] jonlives: LeShadow: that implies one of the earlier recipes might be including the last one earlier
[2014-07-10 13:32:11 -0400] LeShadow: kinda impossible because the third one doesnt include the last one. The last one is one custom made by me, the third one is a mysql recipe I found online
[2014-07-10 13:32:23 -0400] jonlives: LeShadow: if you have recipes a,b,c,d in the runlist in that order, chef will execute each recipe in order, and each resources within each recipe in order.
[2014-07-10 13:32:54 -0400] jonlives: LeShadow: would it be possible for you to gist the recipes?
[2014-07-10 13:33:07 -0400] jonlives: might make it easier to debug what you're seeing
[2014-07-10 13:33:09 -0400] LeShadow: this is the part of my vagrant file:
[2014-07-10 13:33:11 -0400] LeShadow: http://pastebin.com/XRd0x6S4
[2014-07-10 13:33:20 -0400] LeShadow: recipe extras is finished before mysql::server
[2014-07-10 13:33:38 -0400] LeShadow: ill show my extras too (mysql::server contains multiple recipes, its one I found on a github repo)
[2014-07-10 13:34:15 -0400] jonlives: hmm I've not used vagrant that much to know if it might be not respecting the ordering
[2014-07-10 13:34:24 -0400] LeShadow: jonlives:
[2014-07-10 13:34:28 -0400] LeShadow: this is my extras recipe
[2014-07-10 13:34:29 -0400] LeShadow: http://pastebin.com/raw.php?i=xTdL3mGU
[2014-07-10 13:35:19 -0400] jonlives: LeShadow: what's the run_list listed at the start of the chef run on that node?
[2014-07-10 13:35:51 -0400] jonlives: first line of the run output should be something like resolving cookbooks for run list:[foo]
[2014-07-10 13:36:39 -0400] LeShadow: https://gist.github.com/LeShadow/e183461274ca3ee8dbcd
[2014-07-10 13:36:47 -0400] LeShadow: that are the 2 lines with the run list
[2014-07-10 13:37:21 -0400] jonlives: LeShadow: ok - when you say extras is finishing before mysql, are the remaining parts of mysql by any chance the service starting up / restarting?
[2014-07-10 13:37:25 -0400] jonlives: ie the bits that finish after
[2014-07-10 13:37:59 -0400] LeShadow: yes, the reason why I think extras is finished faster is because the mysql server seems to be starting up after extras
[2014-07-10 13:38:48 -0400] jonlives: LeShadow: that's actually not recipes running out of order. by default, when a resource notifies a service to start etc, all those notifications are processed at the end of the run
[2014-07-10 13:39:01 -0400] jonlives: if you want the service to start immediately, you'll need to do something like this: https://gist.github.com/jonlives/966c0b20fbe7de8d0e1f
[2014-07-10 13:40:25 -0400] jonlives: LeShadow: recipes are run in series too, not in parallel fyi
[2014-07-10 13:40:39 -0400] LeShadow: now I cant follow anymore, it is already set as immediately >.<.
[2014-07-10 13:41:39 -0400] jonlives: LeShadow: is anything else notifying that service?
[2014-07-10 13:42:04 -0400] jonlives: LeShadow: if possible, could you gist the entire output of the chef run?
[2014-07-10 13:42:12 -0400] LeShadow: I will
[2014-07-10 13:42:13 -0400] LeShadow: also
[2014-07-10 13:42:21 -0400] LeShadow: this is the gist with the mysql::server recipe
[2014-07-10 13:42:22 -0400] LeShadow: https://gist.github.com/LeShadow/835662cc38488d908d50
[2014-07-10 13:45:00 -0400] jonlives: LeShadow: that all looks like it's using immediately - the runlog will hopefully reveal more :p
[2014-07-10 13:45:17 -0400] LeShadow: jonlives shall I pm you or do you want to help me further in this channel? :p
[2014-07-10 13:45:25 -0400] jonlives: LeShadow: up to you :p
[2014-07-10 13:51:28 -0400] s1991: Hello, I want to know in apache2 cookbook. In "web_app "xyz" do". What does xyz refers to?
[2014-07-10 14:02:49 -0400] zts: s1991: where do you see that?
[2014-07-10 14:03:25 -0400] thorduri: anyone run chef-client on nodes out of jenkins ?
[2014-07-10 14:03:41 -0400] zts: s1991: anyway, it's just the name of your site.  So in that case, it would be to create a site/vhost/etc named "xyz"
[2014-07-10 14:05:26 -0400] s1991: zts: is it fine that I've apache2 cookbook and in my recipe I add include_recipe "apache2::default" and include_recipe "apache2::mod_wsgi"?
[2014-07-10 14:06:29 -0400] zts: s1991: yes, that sounds fine
[2014-07-10 14:07:50 -0400] s1991: zts: then why I'm gtting error at " package_name node['apache']['package']" in apache2/recipe/default.rb
[2014-07-10 14:25:42 -0400] zts: s1991: my wild guess: in your cookbook, you have not updated metadata.rb to say "depends 'apache2'".  But that is just a guess - for better help, please paste the whole output into gist.github.com and share the URL here
[2014-07-10 14:27:36 -0400] s1991: zts: sorry, ya I didn't. But after including that in metadata, It throws "Cookbook freebsd not found". I can git that cookbook but is there any good method to prevent that
[2014-07-10 14:31:10 -0400] zts: s1991: do you mean, to make sure all the cookbooks you depend on are downloaded?  Or something else?
[2014-07-10 14:32:21 -0400] s1991: zts: ya, for exmple even for python in need to clone cookbook yum and yum-epel
[2014-07-10 14:34:56 -0400] zts: s1991: if you are starting out, the recommended way is to use Berkshelf - it helps to manage your cookbook dependencies, and will automatically download everything you need.
[2014-07-10 14:35:27 -0400] s1991: zts: ok, thank. I'll look at that
[2014-07-10 14:38:54 -0400] chef435: Hey - is it possible to require a 3rd-party cookbook based on platform?
[2014-07-10 14:39:20 -0400] nacer: chef435: from a recipe , yes you can
[2014-07-10 14:40:50 -0400] nacer: if node['platform']
[2014-07-10 14:40:53 -0400] nacer: include_recipe ...
[2014-07-10 14:43:56 -0400] gyoza: suppp
[2014-07-10 14:44:14 -0400] chef435: nacer: thanks
[2014-07-10 14:44:29 -0400] zts: nacer: you still have to declare the dependency in your metadata.rb, and that can't be conditional
[2014-07-10 14:55:54 -0400] matti: ;]
[2014-07-10 15:04:47 -0400] nacer: zts: i think you can do without declaring the deps
[2014-07-10 15:07:31 -0400] workmad3: nacer: you should probably have a 'suggests' declaration in your metadata for it still
[2014-07-10 15:08:00 -0400] nacer: workmad3: yup suggest can't hurt
[2014-07-10 15:10:27 -0400] zts: Unless it's changed lately, suggests is something for Supermarket (or the old community site), it doesn't affect what chef-client/chef-solo actually do
[2014-07-10 15:10:57 -0400] zts: it used to be that you could get away without declaring the deps if you used chef-solo, but chef-client has always required it.  chef-solo does to, in more recent versions
[2014-07-10 15:12:30 -0400] nacer: zts: your right, recommends is the way to go
[2014-07-10 15:12:58 -0400] nacer: zts: i'm not sure if chef-client download recommends cookbooks
[2014-07-10 15:14:42 -0400] nacer: zts: and i'm not sure if a include_recipe trigger a download of it
[2014-07-10 15:15:13 -0400] nacer: zts: maybe you need a depends or recommends after all
[2014-07-10 15:24:17 -0400] choeger: hi
[2014-07-10 15:24:19 -0400] nico___: I was thnking about writing it in ruby
[2014-07-10 15:24:39 -0400] nico___: but it seems like just executing shell commands might be the most direct path
[2014-07-10 15:24:59 -0400] nico___: all the nodes will be ubuntu 12.04 lts machines
[2014-07-10 15:25:31 -0400] choeger: I have the following problem in chef-shell: http://pastebin.com/nu0irjgy
[2014-07-10 15:25:58 -0400] choeger: unfortunately google search results for that kind of problems point to broken web site
[2014-07-10 15:26:16 -0400] choeger: does anybody know whats wrong with my system?
[2014-07-10 15:26:30 -0400] choeger: the local stuff as node works
[2014-07-10 15:26:31 -0400] nico___: end goal is to deploy centralized home folders.  on mahcines with local home folders, I just want to move the home directory to something like /home.bak, verify the remote home is accessible and mount it
[2014-07-10 15:26:53 -0400] nico___: though actually, I was thinking that I should probably jsut write a recipe to only move the home folder
[2014-07-10 15:26:56 -0400] gleam: choeger: you're running this on your chef server?
[2014-07-10 15:27:01 -0400] choeger: yeah
[2014-07-10 15:27:05 -0400] nico___: and another to do the mouting of the remote file system
[2014-07-10 15:27:10 -0400] gleam: what OS?
[2014-07-10 15:27:18 -0400] choeger: centos6
[2014-07-10 15:27:22 -0400] choeger: the node
[2014-07-10 15:27:25 -0400] gleam: what IP is nginx listening on?
[2014-07-10 15:27:37 -0400] choeger: you mean on the chef server?
[2014-07-10 15:27:38 -0400] gleam: wait, chef-shell is running on the same system as the chef server? or separate
[2014-07-10 15:27:47 -0400] choeger: no, it runs on one of the nodes
[2014-07-10 15:27:49 -0400] gleam: oh ok
[2014-07-10 15:27:57 -0400] gleam: it looks like chef_server_url isn't set in /etc/chef/client.rb
[2014-07-10 15:28:31 -0400] choeger: it is
[2014-07-10 15:28:40 -0400] choeger: chef_server_url  "https://chef.open-xchange.com"
[2014-07-10 15:28:54 -0400] choeger: and everything else works
[2014-07-10 15:29:26 -0400] gleam: oh, you can try with -S https://chef.open-xchange.com or with -z
[2014-07-10 15:30:42 -0400] choeger: great!
[2014-07-10 15:30:48 -0400] choeger: gleam: thanks!
[2014-07-10 15:30:52 -0400] choeger: -z
[2014-07-10 15:32:13 -0400] rbowlby: what's the preferred naming scheme for cookbooks acting as roles?
[2014-07-10 15:32:34 -0400] gchristensen: rbowlby: I use role-foo
[2014-07-10 15:33:07 -0400] rbowlby: and is role-base for base system configuration (ntpd,sshd,etc) acceptable?
[2014-07-10 15:33:30 -0400] gchristensen: sure?
[2014-07-10 15:33:30 -0400] bawt: sure not found
[2014-07-10 15:33:37 -0400] gchristensen: lrr?
[2014-07-10 15:33:38 -0400] bawt: lrr not found
[2014-07-10 15:34:59 -0400] rbowlby: would it be unwise to have other roles like role-servicename depend on and call the role-base cookbook?
[2014-07-10 15:35:21 -0400] rbowlby: just trying to get the right pattern going from day one..easier said than done
[2014-07-10 15:40:24 -0400] s1991: If I'm using apache's web_app "site_name" for template configuration. Where I can find that configuration
[2014-07-10 15:46:25 -0400] boombaloo: Anyone has any idea why am I getting this error ? NoMethodError: undefined method `source' for Chef::Resource::WindowsFeature
[2014-07-10 15:46:32 -0400] boombaloo: I have windows cookbook as a dependency
[2014-07-10 15:46:43 -0400] j^2: boombaloo: is it in your run_list?
[2014-07-10 15:46:50 -0400] boombaloo: what ?
[2014-07-10 15:47:05 -0400] boombaloo: the windows cookbook ?
[2014-07-10 15:47:07 -0400] j^2: yeah
[2014-07-10 15:47:15 -0400] boombaloo: im only using its LWRPs
[2014-07-10 15:47:20 -0400] j^2: ah
[2014-07-10 15:47:23 -0400] rbowlby: ll
[2014-07-10 15:47:28 -0400] rbowlby: oops
[2014-07-10 15:47:30 -0400] boombaloo: windows_feature is LWRP afaik
[2014-07-10 15:48:22 -0400] boombaloo: the craziest thing is I have exactly the same recipe working fine on another node :-D
[2014-07-10 15:48:24 -0400] boombaloo: w0000t
[2014-07-10 15:51:19 -0400] lrr: why was i being highlighted?
[2014-07-10 15:51:28 -0400] lrr: s/highlighted/pinged/
[2014-07-10 15:51:40 -0400] workmad3: boombaloo: I'm gonna guess it's because you've managed to get different versions of the cookbook on each node ;)
[2014-07-10 15:51:52 -0400] workmad3: boombaloo: maybe through other cookbook version dependencies, or via an environment pin
[2014-07-10 15:52:00 -0400] boombaloo: yeah that would be my guess too
[2014-07-10 15:52:23 -0400] workmad3: boombaloo: that source attribute was only introduced in 1.31.0 of the cookbook (the latest tagged version on github)
[2014-07-10 15:52:35 -0400] workmad3: boombaloo: so *anything* older than the latest release would not have that attribute :)
[2014-07-10 15:53:33 -0400] workmad3: boombaloo: I'd suggest that you put 'depends "windows", "~>1.31.0"' in the cookbook that's causing issues though... try and force the issue (or reveal which other cookbooks don't like that version)
[2014-07-10 15:53:37 -0400] lrr: bawt, gchristensen: why did you ping me?
[2014-07-10 15:54:19 -0400] gchristensen: lrr: are you ruler of omicron persei 8?
[2014-07-10 15:54:28 -0400] boombaloo: workmad3: depends  'windows' should get the latest one right
[2014-07-10 15:54:28 -0400] lrr: no, that's lrrr
[2014-07-10 15:54:34 -0400] lrr: gchristensen: but yes
[2014-07-10 15:54:36 -0400] boombaloo: but maybe it is not getting the latest one
[2014-07-10 15:54:58 -0400] workmad3: boombaloo: no, 'depends "windows" ' says 'I don't care what version I get'
[2014-07-10 15:55:07 -0400] gchristensen: lrr: it was just some test data, that when you do <word>? bawt responds
[2014-07-10 15:55:08 -0400] boombaloo: oh my
[2014-07-10 15:55:16 -0400] workmad3: boombaloo: in most cases it would get the latest, but if another version is available, it wouldn't bother
[2014-07-10 15:55:17 -0400] gchristensen: lrr: didn't actually know 'lrr' was in here.
[2014-07-10 15:55:25 -0400] lrr: haha no worries
[2014-07-10 15:55:26 -0400] workmad3: boombaloo: and it won't throw up a dependency error if an older version is provided
[2014-07-10 15:55:34 -0400] boombaloo: i love the predictability of this....
[2014-07-10 15:55:42 -0400] gchristensen: :)
[2014-07-10 15:56:00 -0400] workmad3: boombaloo: no version specification == you don't care what version, any will do ;)
[2014-07-10 15:56:09 -0400] boombaloo: right
[2014-07-10 15:56:51 -0400] workmad3: (personally, I think no version specification should == error, specify a version, you aren't magical and therefore can't know that your cookbook will work with every possible version of this cookbook from now until the end of time)
[2014-07-10 15:57:02 -0400] lrr: boombaloo: one thing we've dne at my work is lock cookbook version in environments
[2014-07-10 15:57:15 -0400] lrr: boombaloo: that way we know for sure every node in that env has that version
[2014-07-10 15:57:48 -0400] workmad3: lrr: I lock my server cookbook versions in the environment... but I don't lock every transitive dependency, as that would drive me insane
[2014-07-10 15:58:04 -0400] workmad3: lrr: I lock transitive dependencies in the cookbooks that depend on them :)
[2014-07-10 15:58:54 -0400] workmad3: lrr: either to an exact version number if it's a community cookbook, or with a ~> to point release level if it's an in-house cookbook
[2014-07-10 16:00:24 -0400] boombaloo: oh joy of using ruby...load and lock...because...because ruby
[2014-07-10 16:00:48 -0400] boombaloo: bundle gemfiles oh my
[2014-07-10 16:01:44 -0400] workmad3: boombaloo: ruby isn't the only ecosystem that has that style of tracking transitive dependencies
[2014-07-10 16:01:54 -0400] boombaloo: and that worries me :-)
[2014-07-10 16:02:04 -0400] workmad3: boombaloo: IMO, more ecosystems should do it... setups that don't lock transitive dependencies break way too easily
[2014-07-10 16:02:07 -0400] boombaloo: I mean this is clearly my fault not knowing this stuff about Chef
[2014-07-10 16:02:40 -0400] workmad3: boombaloo: hell, your problem was caused by the chef metadata *not* locking the transitive dependency (and chef doesn't look at any of the lockfiles)
[2014-07-10 16:03:32 -0400] rbowlby: anyone have an example role cookbook?
[2014-07-10 16:11:01 -0400] shlant: rbowlby: a role cookbook (or wrapper cookbook) would basically just have the run list and the attributes of a role, but in a cookbook
[2014-07-10 16:12:19 -0400] rbowlby: I'm about to create a base role cookbook for openssh, ntpd, users, sudoer, etc.
[2014-07-10 16:13:33 -0400] rbowlby: I'm hoping that's not an anitpattern to have a role called "base"
[2014-07-10 16:17:03 -0400] phelms: Hey guys - how would I go about configuring chef to spin up an instance on a vmware box? Is that possible?
[2014-07-10 16:17:12 -0400] phelms: Maybe Convert a Template or something
[2014-07-10 16:17:43 -0400] shlant: rbowlby: no that seems fine. usually a base cookbook would have things like users, welcome message, other little tweaks. It should be pretty BASEic
[2014-07-10 16:17:44 -0400] shlant: ha
[2014-07-10 16:39:03 -0400] anthonyacquanita: anyway to do a knife search with bash like ranges??  [1-5]
[2014-07-10 16:39:21 -0400] anthonyacquanita: find me server cr1 through cr5  .. cr[1-5]
[2014-07-10 16:39:47 -0400] anthonyacquanita: the TO operator does not work!   cr1 TO cr5  .  It finds cr11,12,etc.etc.
[2014-07-10 16:42:56 -0400] jonlives: anthonyacquanita: knife search node 'name:[cr1 TO cr5' should work
[2014-07-10 16:43:15 -0400] jonlives: anthonyacquanita: knife search node 'name:[cr1 TO cr5]' rather
[2014-07-10 16:43:28 -0400] anthonyacquanita: yup tried that but it finds cr11,cr12 too
[2014-07-10 16:44:07 -0400] jonlives: anthonyacquanita: hmm I'm doing that and only getting 1-5
[2014-07-10 16:44:40 -0400] anthonyacquanita: do you have stuff like cr10's and above?
[2014-07-10 16:44:51 -0400] anthonyacquanita: I agree.. should work.
[2014-07-10 16:44:52 -0400] jonlives: naming pattern of mine is foo0001.bar.com to foo0083.bar.com
[2014-07-10 16:44:57 -0400] jonlives: and I only get 1-5 returned
[2014-07-10 17:12:00 -0400] tech356: Is it possible to use a return statement in a not_if?
[2014-07-10 17:16:08 -0400] craftytech: can anyone tell me how I can install a cookbook from a bitbucket repo??  perhaps I can add the bitbucket repo as an alternate site in knife.rb, so that when I do knife cookbook site install $pkg, it will install straight from the repo along with its dependencies
[2014-07-10 17:16:36 -0400] workmad3: tech356: no, ruby will complain like crazy if you do (NonLocalJumpError, iirc)
[2014-07-10 17:21:24 -0400] chris613: Is there a way to `knife search node 'mysattrib:myvalue'`  but speficying the precedence level? Like I want to see the "normal" level value only, or the override value only
[2014-07-10 17:21:30 -0400] douglaswth: tech356: you can use a break statement in the way you would use return and that will work the way you probably want
[2014-07-10 17:22:45 -0400] tech356: douglaswth: so break on the line after my return value?
[2014-07-10 17:23:22 -0400] douglaswth: tech356: no, like, break with your return value
[2014-07-10 17:23:55 -0400] fortier: jkeiser i tracked down my chef-metal ssh-key issue from a few days ago. i just opened a git issue to cheffish and submitted a rough draft of a fix
[2014-07-10 17:24:09 -0400] brimstone: is there a way to load 'chef-shell -z' and not have it start processing the run list from the server?
[2014-07-10 17:24:28 -0400] s1991: Hello, how can I know on which port vagrant's apache server is running?
[2014-07-10 17:24:28 -0400] jkeiser: fortier: thanks!  I'll get back to the piling-up PRs later today :)
[2014-07-10 17:25:06 -0400] fortier: cool. i'm taking the rest of the day off, but let me know your feedback
[2014-07-10 17:25:08 -0400] craftytech: can anyone tell me how I can install a cookbook from a bitbucket repo??  perhaps I can add the bitbucket repo as an alternate site in knife.rb, so that when I do knife cookbook site install $pkg, it will install straight from the repo along with its dependencies
[2014-07-10 17:25:13 -0400] tech356: douglaswth: oh, didn't know that ruby could do that
[2014-07-10 17:26:18 -0400] shlant: can someone help me understand why I get this message when I have removed all dependancies from my cookbook? "The following cookbooks are required by the client but don't exist on the server"
[2014-07-10 17:26:30 -0400] shlant: and they shouldn't be required
[2014-07-10 17:26:40 -0400] shlant: because they aren't a dpeendancy anymore
[2014-07-10 17:28:15 -0400] gswallow: I'm looking at Chef Metal; sort of peering through code.  From first glance I think, "no", but does Chef Metal handle EBS volumes and other things besides just instances on AWS?
[2014-07-10 17:29:34 -0400] shlant: gswallow: it can handle almost any provider you want
[2014-07-10 17:29:41 -0400] shlant: you just need to find/create the driver
[2014-07-10 17:29:54 -0400] shlant: oh i see what you mean
[2014-07-10 17:29:59 -0400] shlant: like besides ec2
[2014-07-10 17:30:02 -0400] gswallow: yeah
[2014-07-10 17:30:16 -0400] shlant: gswallow: no
[2014-07-10 17:30:18 -0400] gswallow: e.g. I want to create an instance and attach 8 EBS volumes from snapshot.
[2014-07-10 17:30:23 -0400] gswallow: or tie it to an ELB.
[2014-07-10 17:30:33 -0400] gswallow: or whatever.  I'm using AWS cloudformation but it's awful.
[2014-07-10 17:30:48 -0400] shlant: gswallow: the only thing I have found for CREATING ELB's is https://github.com/websterclay/chef-elb
[2014-07-10 17:30:54 -0400] shlant: I am currently using
[2014-07-10 17:31:05 -0400] shlant: aws cookbooks can ADD servers to ELB
[2014-07-10 17:31:08 -0400] shlant: but not create
[2014-07-10 17:31:17 -0400] gswallow: Yeah.  Vendor lock.
[2014-07-10 17:31:20 -0400] gswallow: That's a big one.
[2014-07-10 17:31:27 -0400] gswallow: But  cfn is just awful.
[2014-07-10 17:32:02 -0400] gswallow: anything that would abstract it would be better.  I found a python library but I just glanced at it.
[2014-07-10 17:32:15 -0400] gswallow: Plus I have a hard enough time with Ruby :)
[2014-07-10 17:32:36 -0400] gyoza: good ole unicode
[2014-07-10 17:32:39 -0400] gyoza: have no idea what that says
[2014-07-10 17:32:42 -0400] gyoza: lol
[2014-07-10 17:32:49 -0400] gyoza: looks like ansi
[2014-07-10 17:35:24 -0400] jkeiser: shlant: it doesn't directly create those things, no--but you can create machines that refer to them
[2014-07-10 17:35:25 -0400] shlant: jkeiser: can metal specify roles?
[2014-07-10 17:35:37 -0400] jkeiser: er, that was for gswallow
[2014-07-10 17:35:38 -0400] shlant: ahah
[2014-07-10 17:35:40 -0400] shlant: good timing
[2014-07-10 17:35:46 -0400] shlant: yea he peaced out
[2014-07-10 17:36:15 -0400] jkeiser: and we are planning to get some of those other resources (ELBs and such) supported
[2014-07-10 17:36:24 -0400] jkeiser: shlant: yep, type role 'blah'
[2014-07-10 17:36:27 -0400] jkeiser: in the machine
[2014-07-10 17:36:30 -0400] shlant: jkeiser: that would be beautiful
[2014-07-10 17:36:33 -0400] shlant: aweosme, thanks
[2014-07-10 17:37:02 -0400] shlant: jkeiser: do you know why the aws cookbook and others don't support eleasticache?
[2014-07-10 17:37:06 -0400] shlant: is it because it's new?
[2014-07-10 17:37:09 -0400] shlant: not worth it?
[2014-07-10 17:37:22 -0400] shlant: currently I will be creating redis instances instead
[2014-07-10 17:37:29 -0400] shlant: not sure if elasticache is worth it
[2014-07-10 17:38:42 -0400] jkeiser: shlant: I don't actually know what elasticache is offhand :)
[2014-07-10 17:39:14 -0400] shlant: jkeiser: it's the aws memcahce/redis offering
[2014-07-10 17:39:27 -0400] shlant: basically a way to charge more for managed cahce instance
[2014-07-10 17:39:45 -0400] jkeiser: ah!  I don't really know if it's worth it or why it's not supported.  Maybe it didn't exist when the cookbook was written and they haven't had an opportunity to get back to it yet
[2014-07-10 17:40:05 -0400] shlant: yea it would be hard to keep up with new aws features, ahah
[2014-07-10 17:41:24 -0400] zts: jkeiser: Interesting you should mention that (planning to add some other resources).  I've recently started using Ansible for wrangling my AWS stuff, but I'm already feeling that I need to bite the bullet and fix a bunch of this stuff into Chef instead
[2014-07-10 17:42:18 -0400] jkeiser: zts: someone has already written a branch on a fork of chef-metal that gets some of this done
[2014-07-10 17:42:34 -0400] jkeiser: zts: but we're toying with the idempotence model still
[2014-07-10 17:42:48 -0400] jkeiser: zts: thinking about representing each aws thingy with a node object that links back to it
[2014-07-10 17:43:30 -0400] jkeiser: zts: please don't let that stop you!  Neither the original writer nor I have had time to get back to it
[2014-07-10 17:43:37 -0400] zts: jkeiser: ooh interesting, is that branch anywhere I can see it?
[2014-07-10 17:43:54 -0400] lamont_oc: shlant: we dont use elasticache internally, and we havent had any community contributions from people who do
[2014-07-10 17:44:16 -0400] jkeiser: zts: I'd be happy to help with anything.  Let me see if I can find the branch.  I *think* it was mwrock
[2014-07-10 17:44:19 -0400] jkeiser: My memory is so terrible
[2014-07-10 17:44:23 -0400] shlant: lamont_oc: yea it seems like a lot of work for little gain
[2014-07-10 17:46:13 -0400] lamont_oc: well, i dont think weve made any kind of judgment about elasticache, we probably just havent seen the activity from the userbase
[2014-07-10 17:47:42 -0400] zts: jkeiser: cheers, I'm massively overcommitted at the moment, so I'm not sure I'll be able to manage anything more than comment - but I'm keen in chipping away in that direction if I can
[2014-07-10 17:49:01 -0400] zts: I use Elasticache, it's a bit shit.  The main problem is you need to use large instances to get decent network performance, but you can only have a single memcached/redis on that large instance.  The AWS docs actually point out somewhere that extra vCPUs on the larger instances are pretty pointless
[2014-07-10 17:49:11 -0400] jkeiser: zts: https://github.com/ohlol/chef-metal-fog/tree/bpp has the resources!
[2014-07-10 17:49:23 -0400] zts: on the other hand, they do add some value over doing it yourself
[2014-07-10 17:49:30 -0400] zts: jkeiser: awesome, thankyou!
[2014-07-10 17:49:38 -0400] jkeiser: zts: nice thing about having the resources in metal is it can reuse the driver and the driver's connection to get the job done.  So no multiple-specifying stuff
[2014-07-10 18:12:09 -0400] spenserp: Has anyone had any experience setting up Spark using chef?
[2014-07-10 18:20:06 -0400] nonyab: I have tried several times now to bootstrap the Chef client to a Domain Joined Windows Host via the knife-windows command and I keep recieving the following error message: at depth 0 - 20: unable to get local issuer certifcate. Can someone help point me in the right direction to resolve this?
[2014-07-10 18:25:52 -0400] phelms: Hey Guys! I am doing a type system call (`type C:\chef\update.log`) but it is erroring out for not being escaped..how would I escape those characters
[2014-07-10 18:27:19 -0400] gyoza: i think it needs to be c:/chef/update.log
[2014-07-10 18:27:22 -0400] gyoza: if not
[2014-07-10 18:27:26 -0400] jdowdle: Is there a prefered cookbook for Redis? I'm pretty new to chef.
[2014-07-10 18:27:30 -0400] gyoza: it needs to be c:\\chef\\update.log
[2014-07-10 18:27:34 -0400] gyoza: I think
[2014-07-10 18:27:37 -0400] gyoza: I havnt done windows
[2014-07-10 18:27:41 -0400] spenserp: phlems: also try C:\\chef\\update.log
[2014-07-10 18:27:49 -0400] phelms: Thanks guys I'll try that now
[2014-07-10 18:29:54 -0400] hypnosb: Hi
[2014-07-10 18:29:57 -0400] nonyab: I have tried several times now to bootstrap the Chef client to a Domain Joined Windows Host via the knife-windows command and I keep recieving the following error message: at depth 0 - 20: unable to get local issuer certifcate. Can someone help point me in the right direction to resolve this?
[2014-07-10 18:30:03 -0400] phelms: C:\\chef\\update.log wored - Thanks for your help everyone!
[2014-07-10 18:30:14 -0400] hypnosb: Will chef work with ubuntu 14.04 ?
[2014-07-10 18:30:24 -0400] phelms: nonyab: Thats my next stop..I'll let you know if I run into that error also
[2014-07-10 18:30:25 -0400] gyoza: its possible
[2014-07-10 18:30:33 -0400] gyoza: hypnosb: but its not officially supported afaik
[2014-07-10 18:30:38 -0400] gyoza: 10.04 and 12.04 only
[2014-07-10 18:30:43 -0400] hypnosb: kinda old eh?
[2014-07-10 18:30:44 -0400] lamont_oc: generally use c:/foo or c:/foo or c:\foo or c:\\foo
[2014-07-10 18:30:49 -0400] phelms: I'm running 14.04 without issue
[2014-07-10 18:30:52 -0400] nonyab: phelms: thanks!
[2014-07-10 18:31:11 -0400] lamont_oc: we support  >= 10.04
[2014-07-10 18:31:32 -0400] hypnosb: the list http://www.getchef.com/chef/install/ does not have 14.04 is why i ask
[2014-07-10 18:31:54 -0400] gkra: is there a way to have knife output the Ruby DSL for a role?
[2014-07-10 18:33:17 -0400] lamont_oc: yeah, the dropdown is autogenerated, its reflecting the fact that we dont build on 14.04, but youll get the 13.04 artifact, but due to the way that omnibus captures all its own dependencies (and glibc backwards compatibility) itll work fine
[2014-07-10 18:33:46 -0400] hypnosb: ok thanks!
[2014-07-10 18:34:55 -0400] lamont_oc: so $REASONS for the dropdown not being accurate, we definitely will fix any bugs that come up with 14.04, and would push a new artifact built on 14.04 if the 13.04 one was broken for any reason (which is pretty much the actual definition of supported)
[2014-07-10 18:37:27 -0400] gyoza: i guess Oc doesnt mean orange county?
[2014-07-10 18:37:28 -0400] gyoza: lol
[2014-07-10 18:37:49 -0400] gyoza: awpskode
[2014-07-10 18:38:04 -0400] gkra: Any gotchas for CentOS 7 beta?
[2014-07-10 18:43:39 -0400] lamont_oc: gkra: afaik, no
[2014-07-10 18:43:52 -0400] lamont_oc: although its not beta any more...
[2014-07-10 18:49:05 -0400] lamont_oc: gkra: virtualbox doesnt support RHEL7/CentOS7 yet, so thats a gotcha
[2014-07-10 18:50:20 -0400] gkra: chef-client shouldn't care, though, right? :)
[2014-07-10 18:50:29 -0400] gkra: just recipes that assume an OS release version...
[2014-07-10 18:50:39 -0400] lamont_oc: basically same comments i made about ubuntu 14.04 above
[2014-07-10 18:51:08 -0400] lamont_oc: youll technically get the centos6 binary when you try to run it on centos7, but all we require is glibc backcompat and package all our own deps
[2014-07-10 18:51:20 -0400] lamont_oc: so it should run fine
[2014-07-10 18:51:49 -0400] gkra: sweet.
[2014-07-10 18:51:51 -0400] lamont_oc: i was just looking around to try to validate that, and it looks like theres no DO droplets yet, theres no AWS AMIs, theres no virtualbox support.
[2014-07-10 18:52:21 -0400] gkra: Trying to get packer to build me an image, and it keeps timing out because SSH isn't listening... wondering if I need to do some kickstart %post jiggerypokery
[2014-07-10 18:52:23 -0400] lamont_oc: i have tested the centos6 binary on a fedora 20 virt, though, and it worked fine
[2014-07-10 18:52:54 -0400] gkra: for the most part i was able to lift my CentOS 6 kicstart directly...
[2014-07-10 18:53:11 -0400] lamont_oc: our bento boxes (built with packer) just got support: https://github.com/opscode/bento/pull/237
[2014-07-10 18:55:02 -0400] gkra: we're using packer to build our vSphere templates. toyed with centos7 a bit yesterday to experiment with it.
[2014-07-10 18:58:57 -0400] maraca: what would be the best way to track down which cookbook request the installation of a particular package?
[2014-07-10 18:59:10 -0400] gkra: Just finished a nice little build tree that we can stuff into Jenkins that will build vsphere templates and vagrant boxes for vmware & virtualbox, upload the images to artifactory and the templates to vsphere
[2014-07-10 18:59:29 -0400] maraca: when running chef-client on a new instance where versions aren't lock down it looks like one of the recipe is installing java although I have no idea why
[2014-07-10 18:59:39 -0400] maraca: running chef-client with -l debug isn't helping much either
[2014-07-10 19:02:38 -0400] gyoza: I got a new job title guys : http://gyazo.com/645d766ecc1379a2e0931f461f35a0cf
[2014-07-10 19:02:42 -0400] gyoza: its my best one yet
[2014-07-10 19:03:49 -0400] hypnosb: what is best practice for where the chef-repo should reside? Should I have a non-root user?
[2014-07-10 19:04:10 -0400] hypnosb: actuality he guide says ~/chef-repo so a user called chef-repo?
[2014-07-10 19:05:46 -0400] aujt74: hypnosb: no, ~/chef-repo would a directory named "chef-repo" under your own home dir
[2014-07-10 19:05:58 -0400] hypnosb: oh oh oh brain fart :|
[2014-07-10 19:06:05 -0400] hypnosb: ~/ is /home/user
[2014-07-10 19:07:33 -0400] workmad3: hypnosb: well, ~ is $HOME
[2014-07-10 19:07:39 -0400] workmad3: hypnosb: may not be under /home ;)
[2014-07-10 19:08:39 -0400] lamont_oc: % echo ~
[2014-07-10 19:08:47 -0400] lamont_oc:  /Users/lamont
[2014-07-10 19:08:53 -0400] lamont_oc: ^^^ Mac OSX
[2014-07-10 19:09:52 -0400] natem: Anyone have any experience orchestrating a Hadoop/Zookeeper/Mesos cluster with Chef that could provide me some insight?
[2014-07-10 19:10:01 -0400] lamont_oc: doing ~/.chef/knife.rb and ~/chef-repo is fine to start
[2014-07-10 19:10:55 -0400] lamont_oc: id actually suggest ~/env/<organization name>/.chef/knife.rb and ~/env/<organization>/chef-repo/{cookbook,data_bags,roles}
[2014-07-10 19:11:52 -0400] lamont_oc: that way you can have more than one knife.rb with more than one chef-repo
[2014-07-10 19:11:55 -0400] hypnosb: apache has some crazy clustering apps
[2014-07-10 19:12:00 -0400] lamont_oc: but you can easily cross that bridge when you get there...
[2014-07-10 19:14:32 -0400] natem: Yeah I'm looking at a Hadoop / Zookeeper / Mesos / Spark deploy that's kind of blowing my mind :p
[2014-07-10 19:14:44 -0400] natem: Any of those things by themselves is cake, but combined it gets a little hairy.
[2014-07-10 19:15:17 -0400] natem: Especially trying to use the HA config, with failover and whatnot.
[2014-07-10 19:17:18 -0400] phelms: Is it possible to set a custom attribute on the chef server (per node) through a recipe ?
[2014-07-10 19:18:30 -0400] doug2: Can I do this in an attributes file? default[:s3_access_key] = ENV['AWS_ACCESS_KEY'] .... ? Seems like 'NO'
[2014-07-10 19:19:03 -0400] rbowlby: can someone check my pastebin and help me figure out why berkshelf is puking?
[2014-07-10 19:19:04 -0400] rbowlby: http://pastebin.com/7TfH3LaY
[2014-07-10 19:19:37 -0400] rbowlby: NM
[2014-07-10 19:20:00 -0400] doug2: Dunno why I can't set attribute from OS environment. attributes files are just ruby code
[2014-07-10 19:23:57 -0400] zackmdavis: hi
[2014-07-10 19:26:20 -0400] ssd7: Ohai Chefs
[2014-07-10 19:26:58 -0400] s1991: pls can anyone help me. How do I access if I have a django server running on vagrant in my own machine?
[2014-07-10 19:28:34 -0400] lamont_oc: s1991: i believe you need to setup some port forwarding
[2014-07-10 19:28:46 -0400] shlant: doug2: maybe give citadel a look
[2014-07-10 19:29:24 -0400] zackmdavis: s1991, like a line in your Vagrantfile that says something like "config.vm.network :forwarded_port, guest: xxx, host: xxx" where xxx is whatever port the Django server is running on; then you should be able to see it at localhost:xxx
[2014-07-10 19:29:27 -0400] phelms: Is it possible to set a custom attribute on the chef server (per node) through a recipe ?
[2014-07-10 19:29:50 -0400] lamont_oc: doug2: that should work, its possible youve got that attribute set at normal or override level so the default setting isnt visible
[2014-07-10 19:30:00 -0400] s1991: lamont_oc: I've "config.vm.network "forwarded_port", guest: 80, host: 8080". But in vagrant ssh when I start djnago it say "Starting development server at http://0.0.0.0:8888/". Now how do I accesss that
[2014-07-10 19:30:07 -0400] ssd7: phelms: Mind backing up one level and describing what your end goal is?
[2014-07-10 19:30:31 -0400] lamont_oc: set the guest and host ports to 8888 in your vagrant file
[2014-07-10 19:30:45 -0400] lamont_oc: then hit http://localhost:8888/
[2014-07-10 19:31:16 -0400] phelms: ssd7: I made a script that runs and checks for udpates and reports.. I only want it to run once a week so I wanted to store the timestamp of the last run in an attribute on the node (on the chef server). I know I could store it in a file or local attribute but I'd rather keep it on the server.
[2014-07-10 19:31:52 -0400] hypnosb: what port is chef web ui on?
[2014-07-10 19:32:31 -0400] phelms: hypnosb: 443
[2014-07-10 19:32:36 -0400] ssd7: phelms: As in, this script happens outside of the chef-client run but you want the information (the timestamp) attached to the node data?
[2014-07-10 19:32:37 -0400] hypnosb: really, wth
[2014-07-10 19:33:14 -0400] phelms: ssd7: no its a chef script I wrote (windows and *nix) .. currently none of our systems are "standard"
[2014-07-10 19:33:22 -0400] phelms: so taking slow steps getting there
[2014-07-10 19:33:32 -0400] phelms: but currently I'm getting an email from all 200 servers every 15 minutes
[2014-07-10 19:33:42 -0400] phelms: and I may just unplug the exchange server..
[2014-07-10 19:34:38 -0400] ssd7: phelms: All attributes you save to the node object during a run are saved back to the server at the end of a run, so if you set it in your chef recipe, it will end up on the server
[2014-07-10 19:34:39 -0400] zackmdavis: anyway, I had a question of my own regarding Chef (hence my arrival here)
[2014-07-10 19:34:46 -0400] zackmdavis: so, I'm getting a RecipeCompileError caused by a failed validation:  "Option owner's value  does not match regular expression", which I understand (by comparison to someone's account of a similar problem https://tickets.opscode.com/browse/CHEF-4733) to mean that some sort of option's owner is set to the empty string? But how does the option owner's value get set?
[2014-07-10 19:35:09 -0400] phelms: ssd7: Hmm..can you not save a node variable in a ruby_block?
[2014-07-10 19:35:20 -0400] shin_n: is it possible to have a recipe add nodes? I'm trying out aws opsworks that runs chef-client; instead all information is pre-fed to chef via json. So in my recipe I want to query the opswork environment and create nodes in scope so that in another recipe search(:node, query) will pick up the nodes that I've inserted.
[2014-07-10 19:35:37 -0400] jdowdle: had to do a shell provisioner. I just can't get a recent redis installed via available cookbooks. Kinda bummed.
[2014-07-10 19:35:49 -0400] lamont_oc: phelms: id suggest pushing out a cronjob that does the actual work with chef, then have the cronjob save the timestamp somewhere, and have the chef run only retrieve the timestamp and put it into a node attr
[2014-07-10 19:36:17 -0400] shin_n: *sorry, opsworks runs chef-client without a server
[2014-07-10 19:36:37 -0400] ssd7: phelms: I believe you can.  For instance: http://docs.opscode.com/essentials_cookbook_resources_first_run.html  Note that the node.save isn't really necessary and can probably be removed.
[2014-07-10 19:36:52 -0400] ResidentR: Any idea why the open source webui on a fresh install wouldn't log in correctly?
[2014-07-10 19:36:59 -0400] phelms: ssd7: Thanks, I'll check it out
[2014-07-10 19:37:29 -0400] ssd7: ResidentR: Are you on EC2?
[2014-07-10 19:37:49 -0400] ResidentR: ssd7: Yes!
[2014-07-10 19:38:03 -0400] ssd7: ResidentR: Try using the IP to reach the server rather than a host name
[2014-07-10 19:38:41 -0400] ssd7: If that works, I'll make sure there is a bug about this somewhere.
[2014-07-10 19:39:07 -0400] ResidentR: That actually did work. Thanks.
[2014-07-10 19:39:30 -0400] ResidentR: That wouldn't be any sort of issue with how the hostname is set, would it?
[2014-07-10 19:39:53 -0400] ResidentR: I know that the install instructions make a very big point about making sure the server has a reachable FQDN
[2014-07-10 19:40:59 -0400] ssd7: ResidentR: So, I'm not sure.  It has something to do with the cross-site forgery protection and the fact that the `hostname` likely resolves to the internal hostname while you are using the external hostname
[2014-07-10 19:41:54 -0400] ResidentR: That is true. I have tried setting the hostname to the external DNS name that amazon generates, and gotten the same results though.
[2014-07-10 19:42:38 -0400] ssd7: ResidentR: Hrm, perhaps the old hostname is still rendered in some important config though
[2014-07-10 19:44:55 -0400] ResidentR: It could very well be. I know that using the 'hostname' command reports back the new hostname, though it could very well be stored somewhere else.
[2014-07-10 19:46:47 -0400] hypnosb: do i need to copy files from the server BEFORE doing knife configure --initial on the client?
[2014-07-10 19:48:59 -0400] phelms: Can chef run on a LEMP box?
[2014-07-10 19:49:06 -0400] phelms: like without breaking one or the other
[2014-07-10 19:49:31 -0400] phelms: nginx using a different port
[2014-07-10 19:50:35 -0400] ssd7: phelms: I believe we provide enough configurables to make it work, but it isn't something we explicitly support with testing and such
[2014-07-10 19:51:04 -0400] phelms: ssd7: Makes sense - I haven't broken anything today.. I'll give it a go.
[2014-07-10 19:51:14 -0400] hypnosb: i feel like something is missing from http://docs.opscode.com/chef/install_workstation.html
[2014-07-10 19:51:30 -0400] craftytech: htnkas
[2014-07-10 19:52:07 -0400] phelms: hypnosb: I used the guide from digital ocean: https://www.digitalocean.com/community/tutorials/how-to-install-a-chef-server-workstation-and-client-on-ubuntu-vps-instances
[2014-07-10 19:52:34 -0400] hypnosb: www so the standard docs are bunk?
[2014-07-10 19:52:37 -0400] hypnosb: eww
[2014-07-10 19:52:39 -0400] shin_n: does anyone know how I can add a node via chef-shell?
[2014-07-10 19:53:15 -0400] phelms: hypnosb: I think chefs docs need some work.. but there is so much to cover in it
[2014-07-10 19:54:27 -0400] doug2: Can I do this in an attributes file? default[:s3_access_key] = ENV['AWS_ACCESS_KEY'] .... ? Seems like 'NO'
[2014-07-10 20:01:34 -0400] ssd7: ResidentR: Filed a bug on that in our internal bug tracker.  would have done a public one but there was some debate on where it should go with the move to github for somethings.
[2014-07-10 20:02:02 -0400] ssd7: doug2: I don't see what the problem would be with that
[2014-07-10 20:02:32 -0400] ssd7: shin_n: As in create a brand new node?
[2014-07-10 20:02:52 -0400] shin_n: Yep - I'm getting kinda lost with the syntax
[2014-07-10 20:03:06 -0400] ResidentR: ssd7: Thanks! I feel like I actually helped with something now, haha. That issue has been plaguing me longer than I care to admit.
[2014-07-10 20:03:52 -0400] shin_n: ssd7: I want to create nodes that I'm getting from a different source (opswork) and I want to feed that into chef so a search will resolve those nodes
[2014-07-10 20:04:21 -0400] shin_n: ssd7: ultimately I'll do this from a recipe but I'm learning using chef-shell and chef-zero
[2014-07-10 20:04:50 -0400] ssd7: shin_n: Untested: n = Chef::Node.new; n.name = "foobar"; n.save
[2014-07-10 20:05:09 -0400] shin_n: ssd7: ahh save...i'll give it a go
[2014-07-10 20:05:20 -0400] shin_n: ssd7: where's the docs for this stuff anyway?
[2014-07-10 20:05:52 -0400] ssd7: shin_n: Unfortunately, much of what i call the "ruby api" for things like isn't documented well
[2014-07-10 20:06:45 -0400] ssd7: shin_n: The Chef DSL is documented now, but how to use the various classes isn't.
[2014-07-10 20:07:07 -0400] shin_n: ssd7: I had to use n = Chef::Node.new; n.default["name"] = "foobar"; n.save
[2014-07-10 20:07:23 -0400] shin_n: ssd7: and it gave me a 405 method not allowed but I think that's down to chef-zero
[2014-07-10 20:07:39 -0400] shin_n: ssd7: i'll try that on a real server. thanks for the pointer.
[2014-07-10 20:07:46 -0400] ssd7: shin_n: ahh
[2014-07-10 20:08:03 -0400] ssd7: shin_n: try n = Chef::node.new; n.name "foobar"; n.save
[2014-07-10 20:08:17 -0400] ssd7: the #name method just takes an argument, there isn't a name= method
[2014-07-10 20:09:23 -0400] shin_n: ssd7: bingo!
[2014-07-10 20:10:36 -0400] stormerider: can you sort the results of a Chef search request along the lines of an SQL "ORDER BY", or do you have to sort them in the client requesting the query?
[2014-07-10 20:12:58 -0400] ssd7: stormerider: So, the API provides the ability to sort results, but I seem to remember there potentially being a bug there.  I know the API takes "sort" as a query parameter though
[2014-07-10 20:13:05 -0400] ssd7: stormerider: I typically sort clientside though
[2014-07-10 20:13:08 -0400] shlant: jkeiser: what would you suggest as the best way to utilize metal in terms of cookbooks/provisioners? Right now I'm thinking have a infra_ruby cookbook that only has chef-metal which I would use with Vagrant to provision everything on AWS. does that sound sane?
[2014-07-10 20:13:21 -0400] stormerider: thanks ssd7
[2014-07-10 20:13:31 -0400] ssd7: stormerider: In a recent version of chef, node objects are sortable, as in, you can just call sort on an array of nodes
[2014-07-10 20:13:37 -0400] shlant: jkeiser: so have separate metal cookbooks and app cookbooks
[2014-07-10 20:14:33 -0400] stormerider: ssd7: i'm actually writing a ruby script that's calling Chef::Search::Query
[2014-07-10 20:14:41 -0400] jkeiser: shlant: I think a cluster or environment cookbook makes sense--but there's no reason not to put it alongside the other cookbooks
[2014-07-10 20:15:13 -0400] jkeiser: shlant: just don't put it in the run list of provisioners.  Note, however, that there are some people who are actually running the cookbooks on a "provisioner node" so that it keeps the entire cluster idempotently healthy
[2014-07-10 20:15:23 -0400] doug2: Can I do this in an attributes file? default[:s3_access_key] = ENV['AWS_ACCESS_KEY'] .... ? Seems like 'NO'
[2014-07-10 20:15:26 -0400] jblack: jkeiser: I heard you might be doing a chef-metal type meetup here in the seattle area?
[2014-07-10 20:15:29 -0400] jkeiser: Either way, I think a separate cookbook for your cluster makes sense in general
[2014-07-10 20:15:38 -0400] jkeiser: jblack: not scheduled at the moment, but I'd be happy to
[2014-07-10 20:16:05 -0400] jblack: s/doing/thinking about/
[2014-07-10 20:16:25 -0400] shlant: jkeiser: ah, so some people have a separate node on which chef metal is run so it continuously keeps things in check?
[2014-07-10 20:16:29 -0400] ssd7: stormerider: Yeah, honestly, I think that you are better off sorting client side as it distributes the load of sorting the results to the edge which would be important if you have a lot of nodes doing searches against a single chef server.
[2014-07-10 20:18:26 -0400] jkeiser: shlant: yep!  It's also a convenient way to control the deploy of infrastructure
[2014-07-10 20:18:40 -0400] jkeiser: shlant: when you push a cookbook, your infrastructure updates
[2014-07-10 20:18:58 -0400] jkeiser: shlant: so whatever process you use to validate cookbooks before pushing, can extend to infrastructure too
[2014-07-10 20:19:00 -0400] Xeon06: Hey guys
[2014-07-10 20:19:29 -0400] ssd7: hello Xeon06
[2014-07-10 20:19:41 -0400] Xeon06: I'm trying to use this cookbook https://github.com/edelight/chef-mongodb to install version 1.6.3 of mongo. I am clueless as to how attributes work and can't figure out how to tell it to install version 1.6.3
[2014-07-10 20:19:54 -0400] Xeon06: The GitHub pages says the following "node[:mongodb][:package_version] - Version of the MongoDB package to install, default is nil"
[2014-07-10 20:20:02 -0400] shlant: jkeiser: god damn, man. True infrastructure as code is a beautiful thing
[2014-07-10 20:20:54 -0400] Xeon06: And I've tried a bunch of stuff, including what I thought it should be: http://pastebin.com/WVTf4HB5 But to no avail.
[2014-07-10 20:21:11 -0400] Xeon06: Is that how I would set that attribute?
[2014-07-10 20:22:47 -0400] ssd7: Xeon06: In Chef 11 you would want node.default[:mongodb][:package_version] = "1.6.3"
[2014-07-10 20:23:12 -0400] Xeon06: ssd7: I'm running 10.14.2
[2014-07-10 20:23:12 -0400] ssd7: or node.override depending on the situation
[2014-07-10 20:23:38 -0400] ssd7: Oh, ok, so that should probably still work then.
[2014-07-10 20:23:47 -0400] Xeon06: It seems that putting it right before the include_recipe does work
[2014-07-10 20:24:02 -0400] Xeon06: My bad, I was still getting an error but albeit a different one which I'll just have to figure out
[2014-07-10 20:24:05 -0400] Xeon06: Thanks for the help buddy
[2014-07-10 20:25:42 -0400] ssd7: np
[2014-07-10 20:28:55 -0400] jkeiser: shlant: I'm with you there :)
[2014-07-10 20:29:43 -0400] ssd7: God damnit man, I'm a sysadmin, not a magician....that is, until I installed ec-metal.
[2014-07-10 20:29:59 -0400] ssd7: s/ec-metal/chef-metal/
[2014-07-10 20:30:03 -0400] ssd7: ETOOMANYPROJECTS
[2014-07-10 20:30:48 -0400] workmad3: ssd7: maybe ec-metal took you to transition and chef-metal has taken you to full blown sorcerer?
[2014-07-10 20:30:57 -0400] workmad3: s/transition/wizard
[2014-07-10 20:30:58 -0400] workmad3: wtf
[2014-07-10 20:31:34 -0400] _evo_soumya_: Hey chef gurus - I have a little problem on ec2 I'm hoping to get an answer to
[2014-07-10 20:32:27 -0400] _evo_soumya_: STDERR: /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.3.0/lib/mixlib/shellout.rb:183:in `getgrnam': can't find group for hdfs (ArgumentError) from /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.3.0/lib/mixlib/shellout.rb:183:in `gid'
[2014-07-10 20:32:48 -0400] Eulipion: fg
[2014-07-10 20:33:10 -0400] ssd7: -bash: fg: current: no such job
[2014-07-10 20:33:39 -0400] _evo_soumya_: Don't quite understand why it worked on my previous ec2 instances - but suddenly started failing
[2014-07-10 20:33:44 -0400] Eulipion: lol
[2014-07-10 20:33:54 -0400] Majost: _evo_soumya_:  Different version of the chef-client?
[2014-07-10 20:34:36 -0400] ssd7: _evo_soumya_: Does the group hdfs exist?  Does getent group hdfs return something?
[2014-07-10 20:35:33 -0400] _evo_soumya_: returns zilch
[2014-07-10 20:35:51 -0400] _evo_soumya_: I'm using a hadoop cookbook - somewhere buried deep in there this is happening
[2014-07-10 20:36:30 -0400] Majost: evo: look for anything in the recipes and providers which does a execute or bash block
[2014-07-10 20:37:09 -0400] Majost: Where that block lives, there likely is a 'user hdfs'
[2014-07-10 20:37:15 -0400] Majost: er
[2014-07-10 20:37:47 -0400] _evo_soumya_: ssd7: ^ the user doesn't exist. But this worked flawlessly on my other stack I setup.
[2014-07-10 20:37:59 -0400] _evo_soumya_: Majost: I'll reply in a second
[2014-07-10 20:38:29 -0400] _evo_soumya_: Actually brb. Sorry for that. I'll come back with the recipe.
[2014-07-10 20:38:35 -0400] Majost: _evo_soumya_: If you haven't pinned the dependent cookbooks, then you might be picking up a new version of something which is causing the new behavior
[2014-07-10 20:38:47 -0400] _evo_soumya_: Majost: I see
[2014-07-10 20:38:51 -0400] _evo_soumya_: I'll look into it
[2014-07-10 20:41:32 -0400] shlant: jkeiser: if I want to specify different options (such as region) with each machine, I would have to create a driver for each and then specify it in the machine, correct?
[2014-07-10 20:42:22 -0400] Majost: _evo_soumya_:  are you using the continuuity hadoop cookbook by any chance?
[2014-07-10 20:44:50 -0400] hypnosb: so where do I get cookbooks from?
[2014-07-10 20:45:01 -0400] hypnosb: is there a cli?
[2014-07-10 20:45:09 -0400] j^2: hypnosb: supermarket.getchef.com
[2014-07-10 20:45:13 -0400] j^2: hypnosb: or github
[2014-07-10 20:45:16 -0400] Majost: hypnosb: yes... you can download the from supermarket
[2014-07-10 20:45:17 -0400] shlant: hypnosb: berkshelf
[2014-07-10 20:45:27 -0400] Majost: also can get them from your local chef instance
[2014-07-10 20:45:34 -0400] hypnosb: how?
[2014-07-10 20:45:35 -0400] bawt: how not found
[2014-07-10 20:45:38 -0400] hypnosb: :\
[2014-07-10 20:45:46 -0400] spenserp: hypnosb: knife cookbook site install [cookbook-name]
[2014-07-10 20:45:47 -0400] Majost: hypnosb: what specifically do you want to do in your case?
[2014-07-10 20:45:59 -0400] shlant: ^ that's the right question to ask
[2014-07-10 20:46:15 -0400] hypnosb: download apache, user, ntp, configuration cookbooks
[2014-07-10 20:46:28 -0400] shlant: hypnosb: to use in your custom cookbooks?
[2014-07-10 20:46:31 -0400] Majost: And you have never downloaded them before, correct?
[2014-07-10 20:46:40 -0400] hypnosb: never downloaded
[2014-07-10 20:46:51 -0400] hypnosb: shlant, sure
[2014-07-10 20:46:59 -0400] hypnosb: just a basic cookbook to say, make users
[2014-07-10 20:47:07 -0400] shlant: hypnosb: there isn't really any reason to download community cookbooks locally
[2014-07-10 20:47:21 -0400] shlant: hypnosb: just specify them as dependancies in your custom cookbooks
[2014-07-10 20:47:24 -0400] Majost: Then something like, 'knife cookbook site install apache' is a good place to start
[2014-07-10 20:47:24 -0400] shlant: and use berkshelf
[2014-07-10 20:47:40 -0400] shlant: hypnosb: http://berkshelf.com/
[2014-07-10 20:47:47 -0400] Majost: once you have them locally, you can use berkshelf or knife to upload them into your chef server (if you are using one)
[2014-07-10 20:48:18 -0400] hypnosb: cool! thanks guys
[2014-07-10 20:48:42 -0400] shlant: Majost: but you might as well use berkshelf to get the cookbooks AND upload yea?
[2014-07-10 20:48:54 -0400] shlant: no sense in manually pulling htem locally
[2014-07-10 20:48:59 -0400] Majost: hypnosb: if you have time, learn.getchef.com has some good getting started tutorials and whatnot
[2014-07-10 20:49:06 -0400] shlant: +1
[2014-07-10 20:49:11 -0400] shlant: and check out the chef-dk
[2014-07-10 20:49:12 -0400] Majost: shlant: yes -- but its a lot to learn at once imho
[2014-07-10 20:49:15 -0400] hypnosb: chef dk
[2014-07-10 20:49:19 -0400] hypnosb: cool
[2014-07-10 20:49:24 -0400] shlant: http://www.getchef.com/downloads/chef-dk/
[2014-07-10 20:49:51 -0400] shlant: Majost: good point, but I feel starting with best practice is less confusing in the long run
[2014-07-10 20:49:59 -0400] Majost: true
[2014-07-10 20:50:13 -0400] hypnosb: so far i have two instances on aws one is chef server, other is chef node, I can knife user list from my laptop
[2014-07-10 20:50:34 -0400] hypnosb: i setup /etc/hosts so their talking on the private side
[2014-07-10 20:50:51 -0400] hypnosb: :D
[2014-07-10 20:50:54 -0400] hypnosb: i know.. newb
[2014-07-10 20:51:00 -0400] hypnosb: "cool story bro"
[2014-07-10 20:51:05 -0400] Majost: everyone is at some point
[2014-07-10 20:53:54 -0400] Majost: hypnosb: On a related note: https://supermarket.getchef.com/cookbooks/hostsfile
[2014-07-10 20:54:38 -0400] viglesias: hypnosb: additionally related note, if you use public dns names they will always talk on their private sdie
[2014-07-10 20:57:11 -0400] vt102: Just tried to symlink templates/centos to templates/redhat, and it would no longer find the files under centos (the symlink).  Any way to make that work?
[2014-07-10 21:03:18 -0400] hypnosb: viglesias, really? internally they are private...
[2014-07-10 21:03:25 -0400] hypnosb: interesting
[2014-07-10 21:03:36 -0400] viglesias: hypnosb: yeah they do a DNS trick
[2014-07-10 21:03:48 -0400] viglesias: if you are inside aws and request a public-dns name you get the private ip
[2014-07-10 21:03:55 -0400] viglesias: saves you some bucks
[2014-07-10 21:08:08 -0400] Eulipion: what can cause an inherited role to not be added to a node?  it was working and then suddenly stopped being applied
[2014-07-10 21:08:44 -0400] lamont_oc: Phelms: hypnosb: workstations installs are lilkely to look more like this in the future: https://gist.github.com/lamont-granquist/40d26b6fa8178212594f
[2014-07-10 21:10:56 -0400] phelms: lamont_oc: That looks pretty cool
[2014-07-10 21:12:26 -0400] lamont_oc: you can also replicate that with rvm and install berks and TK yourself and create your own .kitchen.ymls and Berksfiles, but thats a lot more work
[2014-07-10 21:12:46 -0400] phelms: lamont_oc: How stable is that code? I might try that on one of my dev boxes
[2014-07-10 21:12:56 -0400] lamont_oc: its stable
[2014-07-10 21:13:06 -0400] phelms: sweet - I'll give it a try later tonight
[2014-07-10 21:13:17 -0400] lamont_oc: i need to move it out of /tmp/ntp
[2014-07-10 21:13:19 -0400] oncallsucks: I have a chef recipe I just want to apply to one server to test on - no central chef server or anything - how can I do this?
[2014-07-10 21:13:26 -0400] lamont_oc: also need to test for the new chefdk release
[2014-07-10 21:14:01 -0400] lamont_oc: oncallsucks: (lol, nice name) you can use chef-client -z (aka chef-client local-mode)
[2014-07-10 21:14:47 -0400] oncallsucks: thanks :)
[2014-07-10 21:16:24 -0400] shlant: jkeiser: I have os many questions for you. I've become a fan boy
[2014-07-10 21:17:21 -0400] _evo_soumya_: Majost: Sorry, I was away. Yes, I'm using the Continuuity version
[2014-07-10 21:21:11 -0400] lamont_oc: oncallsucks:  https://gist.github.com/lamont-granquist/b559886607a72515f262
[2014-07-10 21:22:33 -0400] _evo_soumya_: Majost: Here's the command that triggers the error: resources(:execute => 'hdfs-namenode-bootstrap-standby').run_action(:run)
[2014-07-10 21:22:42 -0400] Majost: _evo_soumya_:  it looks like they make heavy use of exec blocks with user and group set to hdfs
[2014-07-10 21:22:56 -0400] _evo_soumya_: "command 'hdfs namenode -bootstrapStandby'"
[2014-07-10 21:23:07 -0400] Majost: so there likely is a compile issue where the user is not created before those blocks are run
[2014-07-10 21:23:21 -0400] _evo_soumya_: Majost: Thanks for the tip
[2014-07-10 21:23:24 -0400] _evo_soumya_: I'll keep looking
[2014-07-10 21:23:26 -0400] jkeiser: shlant: hah!
[2014-07-10 21:23:35 -0400] jkeiser: shlant: questions like?
[2014-07-10 21:24:13 -0400] shlant: jkeiser: here they come
[2014-07-10 21:24:27 -0400] shlant: 1. if I want to specify different options (such as region) with each machine, I would have to create a driver for each and then specify it in the machine, correct?
[2014-07-10 21:24:28 -0400] shlant: If I specify an option (such as AWScreds) on thefog:AWS driver, does that mean that drivers I create (such as fog:AWS:foo)inherit those options unlessoverridden? Or do I have to specify those for each fog:AWS driver?
[2014-07-10 21:24:28 -0400] shlant: How is the chefversion for machines determined/specified?
[2014-07-10 21:24:28 -0400] shlant: Do machines provisioned using metal have access to node attributes specified on the metal node? or are they completely isolated? If so, can I somehow pass attributes?
[2014-07-10 21:24:30 -0400] shlant: shoot
[2014-07-10 21:24:36 -0400] shlant: I will paste bin them haha
[2014-07-10 21:24:38 -0400] jkeiser: *runs screaming*
[2014-07-10 21:25:09 -0400] shlant: jkeiser: http://pastebin.com/ruEsYNyK
[2014-07-10 21:25:22 -0400] shlant: come back! I just want you autograph on my body to tattoo!
[2014-07-10 21:25:29 -0400] shlant: not weird at all!
[2014-07-10 21:26:59 -0400] shlant: jkeiser: here's a gist so you can comment there: https://gist.github.com/MrMMorris/b493adbc1b5cf4e3998f
[2014-07-10 21:27:20 -0400] jkeiser: shlant: I haven't got a pen, just this hot poker, will that do?
[2014-07-10 21:27:29 -0400] tequilarista: this channel is getting weird
[2014-07-10 21:27:51 -0400] shlant: hahah
[2014-07-10 21:28:33 -0400] shlant: stirring up delight. That's what my shirt says. That's what the vibe here is for sur
[2014-07-10 21:28:51 -0400] shlant: nothing odd
[2014-07-10 21:28:54 -0400] shlant: totally normal
[2014-07-10 21:30:03 -0400] Majost: 3. The default value corresponds to the version of knife used, unless set in your knife.rb or passed as an agrument --bootstrap-version
[2014-07-10 21:30:14 -0400] phelms: Hey - anyone know how I can get / 1.day to work in a recipe
[2014-07-10 21:31:17 -0400] Majost: shlant:  2. Is this in the context of test kitchen?
[2014-07-10 21:33:37 -0400] shlant: jkeiser: thanks so much!
[2014-07-10 21:33:51 -0400] jkeiser: np
[2014-07-10 21:34:18 -0400] Damm: phelms, load up activesupport
[2014-07-10 21:34:33 -0400] Damm: if your used to the helpers in rails you pretty much have to load up the gem that initializes them
[2014-07-10 21:35:08 -0400] Damm: but that's true of any large mega-gem you load into chef
[2014-07-10 21:37:49 -0400] ssd7: Yeah, I usually advise activesupport.  Especially anything that loads core_ext
[2014-07-10 21:38:02 -0400] ssd7: a word: against
[2014-07-10 21:38:29 -0400] _evo_soumya_: Majost: I think I know what happened
[2014-07-10 21:38:52 -0400] _evo_soumya_: Berkshelf forced me to downgrade the continuuity hadoop version to 1.4 from 1.6
[2014-07-10 21:38:59 -0400] _evo_soumya_: Because Mesos wasn't playing nicely
[2014-07-10 21:44:37 -0400] coderanger: ssd7: brb quoting out of context
[2014-07-10 21:47:35 -0400] rbowlby: Q: what's the most appropriate way to determine if a host is a vagrant host? Is it the virtualization attr from ohai?
[2014-07-10 21:48:10 -0400] rbowlby: I'd rather not have a vagrant user in a sudo group outside of vagrant. ;)
[2014-07-10 21:49:42 -0400] jkline: I would appreciate some help understanding attribute deep merging http://docs.opscode.com/essentials_node_object_deep_merge.html please.
[2014-07-10 21:49:52 -0400] coderanger: rbowlby: There isn't a great way, you should be explicit
[2014-07-10 21:50:01 -0400] coderanger: jkline: Any particular questions?
[2014-07-10 21:50:04 -0400] ssd7: coderanger: lol
[2014-07-10 21:50:31 -0400] coderanger: jkline: The deep merge means stuff like {a: {b: 1}} merge {a: {c: 2}} == {a: {b: 1, c: 2}}
[2014-07-10 21:51:00 -0400] vickleford: jkline, i've defined vagrant to true in chef json in my vagrantfile, then in my recipes used node.attribute?(:vagrant) in a conditional with some success
[2014-07-10 21:51:16 -0400] coderanger: vickleford: Guessing you mean that for rbowlby
[2014-07-10 21:51:19 -0400] vickleford: sorry, that was for rbowlby
[2014-07-10 21:51:19 -0400] jkline: I have some attributes set in cookbook foo/attributes/default.rb
[2014-07-10 21:51:25 -0400] doug2: Can I do this in an attributes file? default[:s3_access_key] = ENV['AWS_ACCESS_KEY'] .... ? Seems like 'NO'
[2014-07-10 21:51:32 -0400] rbowlby: ah, nice vickleford
[2014-07-10 21:51:32 -0400] vickleford: currently gassing back up with fresh coffee ^_^
[2014-07-10 21:51:35 -0400] jkline: I have more values for the same attribute that I want to add in cookbook bar/recipe/default.rb
[2014-07-10 21:51:38 -0400] jkline: can I do that?
[2014-07-10 21:51:40 -0400] coderanger: vickleford: You don't even need that, just if node['vagrant']
[2014-07-10 21:51:43 -0400] mattt: vickleford: ohai2u
[2014-07-10 21:51:52 -0400] rbowlby: I will add it to the .kitchen.yml I suppose
[2014-07-10 21:51:54 -0400] coderanger: doug2: You can, it just probably doesn't mean what you want it to
[2014-07-10 21:52:06 -0400] vickleford: mattt, fine to see you here ^_^
[2014-07-10 21:52:13 -0400] vickleford: coderanger, thanks, noted
[2014-07-10 21:52:29 -0400] coderanger: jkline: Yes, it all gets merged together
[2014-07-10 21:52:43 -0400] doug2: coderanger: it gets me an empty string. :(
[2014-07-10 21:53:22 -0400] coderanger: doug2: That would be looking at the environment variable of chef, which depending on how you run chef might be different than you are thinking (you are likely thinking of your local env var)
[2014-07-10 21:53:40 -0400] jkline: Unfortunately that is not the behavior I am seeing, so let me be more specific about what I am doing to see maybe where I am going wrong. ...
[2014-07-10 21:54:00 -0400] doug2: coderanger: oh? cuz i thought ENV[] got the OS environment variable via ruby?
[2014-07-10 21:54:10 -0400] coderanger: doug2: It does
[2014-07-10 21:54:34 -0400] vickleford: coderanger,  you sure that wouldn't raise a no attribute set exception ... ah, you are implying set vagrant to false in attributes/default.rb and then set to true in Vagrantfile
[2014-07-10 21:54:37 -0400] coderanger: doug2: But, for example, if you are using test-kitchen, or vagrant provision, or knife ssh, that has nothing to do with the env vars where you ran the command
[2014-07-10 21:54:57 -0400] coderanger: vickleford: Standard ruby behavior is that hash-like objects return nil for non-existent keys
[2014-07-10 21:55:00 -0400] doug2: coderanger: oki.... is there a way to assign an attribute to the value of an os env var?
[2014-07-10 21:55:09 -0400] coderanger: doug2: Yes, thats how you would do it
[2014-07-10 21:55:22 -0400] coderanger: doug2: But how are you running chef-client?
[2014-07-10 21:55:27 -0400] vickleford: gotcha, thought i remembered catching an exception when i tried to do it that way, foggy memory or old chef version
[2014-07-10 21:55:35 -0400] doug2: coderanger: strange, because that gets me an empty var but echo $AWS_ACCESS_KEY returns a value
[2014-07-10 21:55:43 -0400] doug2: coderanger: via test kitchen
[2014-07-10 21:56:01 -0400] coderanger: vickleford: You can get tripped up on things like node['foo']['bar'], if foo doesn't exist that expands to nil['bar'] which is an error
[2014-07-10 21:56:13 -0400] doug2: ^ been there
[2014-07-10 21:56:17 -0400] coderanger: vickleford: So you see things like "if node['foo'] && node['foo']['bar']"
[2014-07-10 21:56:24 -0400] coderanger: doug2: Where are you running that echo
[2014-07-10 21:56:34 -0400] doug2: coderanger: just in my local shell
[2014-07-10 21:57:00 -0400] coderanger: doug2: Right, so when chef running down inside the VM, it doesn't see the env from your shell, its on a different server entirely
[2014-07-10 21:57:12 -0400] coderanger: doug2: What you _can_ do it embed env vars in the kitchen.yml
[2014-07-10 21:57:21 -0400] doug2: coderanger: oh i guess that makes sense
[2014-07-10 21:57:31 -0400] coderanger: doug2: Ex. https://github.com/poise/poise/blob/master/.kitchen.travis.yml#L3
[2014-07-10 21:57:38 -0400] doug2: coderanger: you mean assign attribues in kitchen to an os env var?
[2014-07-10 21:57:51 -0400] coderanger: In that case I'm setting some driver settings
[2014-07-10 21:58:00 -0400] doug2: coderanger: oh that'll work. Thanks.
[2014-07-10 21:58:01 -0400] coderanger: but you can do the same thing in other places, let me find an example of that
[2014-07-10 21:58:19 -0400] coderanger: doug2: https://github.com/balanced-cookbooks/balanced-ci/blob/master/.kitchen.yml#L5-L9
[2014-07-10 21:58:21 -0400] doug2: coderanger: i think that example is fine
[2014-07-10 21:58:42 -0400] doug2: coderanger: thanks
[2014-07-10 22:01:16 -0400] shlant: jkeiser: is there a place I can find different :bootstrap_options? does it map to knife bootstrap?
[2014-07-10 22:01:49 -0400] shlant: like I need to specify IAM role
[2014-07-10 22:01:53 -0400] jkeiser: shlant: all bootstrap options map to fog's server.create() options
[2014-07-10 22:02:09 -0400] jkeiser: like, directly--we just pass them straight in
[2014-07-10 22:02:32 -0400] shlant: jkeiser: ok thanks
[2014-07-10 22:02:36 -0400] jkline: @coderanger @vickleford . Thanks for being willing to help. I have tried to describe my specific question here http://pastebin.com/YY9Ez2qi Is that legible to you?
[2014-07-10 22:03:02 -0400] coderanger: jkline: arrays can't be deep merged, only hashes
[2014-07-10 22:03:15 -0400] jkeiser: shlant: the documentation for fog is less than ideal.  If you send me whatever you find out, I'll gladly dump it into a doc
[2014-07-10 22:03:20 -0400] coderanger: jkline: See https://coderanger.net/arrays-and-chef/ for more info
[2014-07-10 22:03:31 -0400] jkeiser: shlant: questions of "how do I pass this or that AWS thing using fog" come up all the time
[2014-07-10 22:04:07 -0400] jkline: coderanger: sigh. Ok, will read. Frustrated because http://docs.opscode.com/essentials_node_object_deep_merge.html seems to give examples explicitly using arrays.
[2014-07-10 22:04:09 -0400] shlant: jkeiser: on it
[2014-07-10 22:04:45 -0400] coderanger: jkline: That doc is unfortunately rubbish :-(
[2014-07-10 22:05:07 -0400] jkline: lol, thanks! I have found so as well, great to have agreement from internet :)
[2014-07-10 22:05:16 -0400] jkline: I'm reading the one you sent, now.
[2014-07-10 22:07:05 -0400] jkline: why does my example not fall under the category of "However things are not as simple when the two values are at the same level. The two arrays are set-unioned together"
[2014-07-10 22:09:17 -0400] coderanger: jkline: because cookbook attribute files don't quite work like roles and env attributes do
[2014-07-10 22:09:37 -0400] jkline: oh. Fantastic! Do you have a document on that as well?
[2014-07-10 22:09:38 -0400] coderanger: jkline: Technically speaking, cookbook attr files aren't subject to deep merge because they are run procedurally
[2014-07-10 22:09:49 -0400] coderanger: jkline: Really I would just avoid arrays, as my post says :)
[2014-07-10 22:10:05 -0400] jkline: totally, i'm getting the bad vibe from arrays.
[2014-07-10 22:10:13 -0400] coderanger: The full semantics of arrays in attributes is very subtle and not promised to be stable over time
[2014-07-10 22:10:21 -0400] jkline: Hashes will deep merge in attribute files, right?
[2014-07-10 22:10:30 -0400] coderanger: Yes
[2014-07-10 22:10:38 -0400] coderanger: Effectively at least
[2014-07-10 22:10:41 -0400] _evo_soumya_: Majost: soumya@beta-bgd-01:~$ sudo groups hdfs hdfs : hdfs hadoop <--- I just tested this. This is not because of the groups for the user. That script is doing something else that's broken
[2014-07-10 22:10:53 -0400] jkline: cool. I will go off and program my way out of this bag per your posting.
[2014-07-10 22:28:25 -0400] shlant: jkeiser: is a link in the docs good enough? let me know if you want me to make it prettier
[2014-07-10 22:28:25 -0400] shlant: https://github.com/fog/fog/blob/245fdaa3e712be1efb5cae5cde44fa04f87337a3/lib/fog/aws/models/compute/server.rb#L13-L54
[2014-07-10 22:29:02 -0400] shlant: I guess line numbers aren't very dynamic
[2014-07-10 22:32:15 -0400] shlant: jkeiser: another Q: does the machine resource name become the ec2 instance id? or does that have to be specified with options?
[2014-07-10 22:32:45 -0400] jkeiser: shlant: the instance id itself is chosen by Amazon; but metal will set the name of the machine with a tag so that it looks like that name on the AWS console
[2014-07-10 22:33:19 -0400] shlant: sorry yea
[2014-07-10 22:33:21 -0400] shlant: not instance if
[2014-07-10 22:33:22 -0400] shlant: id
[2014-07-10 22:33:23 -0400] shlant: instance name
[2014-07-10 22:33:36 -0400] shlant: so the resource name becomes the tag
[2014-07-10 22:52:19 -0400] jkline: @coderanger thanks. This seems to be working much better now.
[2014-07-10 23:10:05 -0400] Shin-Chain: Hi!, Need help in setting up my windows machine as workstation.
[2014-07-10 23:11:57 -0400] androidbruce: ls
[2014-07-10 23:12:00 -0400] androidbruce: clear
[2014-07-10 23:12:05 -0400] androidbruce: whoops. sorry
[2014-07-10 23:15:48 -0400] androidbruce: tequilarista, long day.
[2014-07-10 23:16:01 -0400] tequilarista: I hear that
[2014-07-10 23:16:02 -0400] tequilarista: :)
[2014-07-10 23:16:17 -0400] androidbruce: tequilarista, started a new gig monday first time with chef/ruby
[2014-07-10 23:16:32 -0400] androidbruce: making the move from sysadmin to "devops"
[2014-07-10 23:16:42 -0400] tequilarista: awesome
[2014-07-10 23:16:50 -0400] tequilarista: it's a fun world
[2014-07-10 23:16:53 -0400] tequilarista: albeit a bit crazy
[2014-07-10 23:21:27 -0400] shlant: crazy what's make's it fun!
[2014-07-10 23:21:28 -0400] shlant: right?
[2014-07-10 23:21:29 -0400] bawt: right not found
[2014-07-10 23:21:32 -0400] shlant: ..right.?
[2014-07-10 23:21:58 -0400] shlant: s/what's/is what
[2014-07-10 23:23:18 -0400] coderanger: Shin-Chain: You can grab the ChefDK installer, should have everything you need
[2014-07-10 23:24:41 -0400] Shin-Chain: I have installed chef windows msi installer and git,
[2014-07-10 23:26:23 -0400] Shin-Chain: ChefDk is not avaliable for windows.
[2014-07-10 23:32:04 -0400] coderanger: Shin-Chain: http://chefdk-trial-packages.s3.amazonaws.com/chefdk-0.1.1-20140610201455.msi
[2014-07-10 23:32:11 -0400] coderanger: Shin-Chain: Its a prerelease but should work
[2014-07-10 23:33:28 -0400] shlant: coderanger: does build-essential require apt?
[2014-07-10 23:33:37 -0400] coderanger: shlant: The cookbook?
[2014-07-10 23:33:41 -0400] shlant: yea
[2014-07-10 23:33:58 -0400] lamont_oc: yes
[2014-07-10 23:34:15 -0400] coderanger: I don't think so
[2014-07-10 23:34:19 -0400] shlant: lamont_oc: so is there a reason it's not a dependency?
[2014-07-10 23:34:41 -0400] lamont_oc: yeah it does, if you dont then you dont the the initial apt-get update and youll get failures when it tries to install debs
[2014-07-10 23:34:55 -0400] coderanger: lamont_oc: Thats not something chef cares about htough
[2014-07-10 23:34:57 -0400] coderanger: https://github.com/opscode-cookbooks/build-essential/blob/master/recipes/_debian.rb#L21-L27
[2014-07-10 23:34:58 -0400] lamont_oc: might work on 14.04 images because theyre just not out of date yet
[2014-07-10 23:35:03 -0400] coderanger: Thats all build-essential is on debian
[2014-07-10 23:35:23 -0400] shlant: I'm on 14.04
[2014-07-10 23:35:41 -0400] lamont_oc: right but those are out of date and the apt cache on the image hits 404s then itll error
[2014-07-10 23:36:03 -0400] shlant: lamont_oc: yea that's what I'm experiencing
[2014-07-10 23:36:09 -0400] coderanger: lamont_oc: There are plenty of other ways to deal with that though
[2014-07-10 23:36:27 -0400] shlant: so
[2014-07-10 23:36:28 -0400] lamont_oc: it should be a dependency, but because people got upset about windows+apt+yum cookbooks they were removed as chef dependencies and you have to do it manually
[2014-07-10 23:36:44 -0400] shlant: how do I get it to work if build-essential is at compile time?
[2014-07-10 23:36:55 -0400] lamont_oc: apt cookbook has compile time flags too
[2014-07-10 23:36:56 -0400] shlant: fork it? :p
[2014-07-10 23:37:02 -0400] shlant: oh ok
[2014-07-10 23:37:03 -0400] shlant: cool
[2014-07-10 23:37:05 -0400] lamont_oc: specifically for this
[2014-07-10 23:37:11 -0400] lamont_oc: (which i wrote, but ill have to look up)
[2014-07-10 23:37:27 -0400] shlant: lamont_oc: found it, thanks
[2014-07-10 23:37:31 -0400] lamont_oc: okay cool
[2014-07-10 23:37:57 -0400] shlant: ew
[2014-07-10 23:38:04 -0400] shlant: for build-essential its compile_time
[2014-07-10 23:38:08 -0400] shlant: and for apt its compiletime
[2014-07-10 23:38:09 -0400] shlant: haha
[2014-07-10 23:38:14 -0400] shlant: *twitch*
[2014-07-10 23:38:16 -0400] lamont_oc: heh
[2014-07-10 23:38:51 -0400] coderanger: I thought that got unified a few months ago
[2014-07-10 23:39:00 -0400] lamont_oc: this got done: https://github.com/opscode-cookbooks/build-essential/commit/31e82be572a701b765bf6dbed1987987f366848a
[2014-07-10 23:39:26 -0400] shlant: ahah
[2014-07-10 23:39:54 -0400] coderanger: sigh
[2014-07-10 23:39:55 -0400] shlant: and it's ['apt']['compile_time_update']
[2014-07-10 23:40:22 -0400] coderanger: apt's compile-time support is also pretty funky, I've had to do weird stuff to make it work before
[2014-07-10 23:40:26 -0400] coderanger: include_recipe_now can help a lot
[2014-07-10 23:41:02 -0400] lamont_oc: heh, and i may be misremembering and might have added that support to the opscode internal apt cookbook
[2014-07-10 23:42:03 -0400] shlant: maybe that should be my first chef contribution
[2014-07-10 23:42:16 -0400] shlant: I wonder how long a change like that would take to be accepted?
[2014-07-10 23:43:47 -0400] shlant: shoot
[2014-07-10 23:44:08 -0400] shlant: so am I now running into the problem that include_recipe_now solves?
[2014-07-10 23:44:19 -0400] shlant: if both apt and build-essential are run at compile
[2014-07-10 23:44:22 -0400] shlant: which goes first
[2014-07-10 23:44:29 -0400] shlant: cause it looks like be right now
[2014-07-10 23:44:34 -0400] shlant: b-ee
[2014-07-10 23:45:43 -0400] lamont_oc: you should be able to make apt come before build-essential in the run_list, and set both to work at compile time and ordering will work
[2014-07-10 23:45:44 -0400] shlant: nevermind
[2014-07-10 23:46:10 -0400] shlant: lamont_oc: b-e is before apt in my metadata
[2014-07-10 23:46:13 -0400] shlant: would that be doing it
[2014-07-10 23:46:40 -0400] lamont_oc: not in metadata, in your run list, or whatever is include_recipeing those two
[2014-07-10 23:47:01 -0400] tBunnyMan: noob question: So for a multi-admin environment is the best practice to just upload the company chef repo to a central git (Like say stash). I'm trying to figure out some best practices for handling deploys with this.
[2014-07-10 23:47:05 -0400] shlant: lamont_oc: apt is already in front
[2014-07-10 23:49:48 -0400] lamont_oc: it should run first then
[2014-07-10 23:50:38 -0400] shlant: lamont_oc: got it working, thanks
[2014-07-10 23:58:01 -0400] coderanger: tBunnyMan: There are a lot of workflow variants in use, so it depends on what you are trying to do
[2014-07-10 23:58:55 -0400] tBunnyMan: Is there any writings on workflows or best practices?
[2014-07-10 23:59:11 -0400] digitalchild: heh
[2014-07-10 23:59:20 -0400] tBunnyMan: The documentation on docs.opscode is a bit scattered

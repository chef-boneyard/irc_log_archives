[2014-07-18 00:25:14 -0400] gkra: ryanuber: thank you, 'berks vendor' was exactly what I needed.
[2014-07-18 00:25:45 -0400] ryanuber: gkra: no prob. took me a bit to figure it out as well.
[2014-07-18 00:26:37 -0400] gkra: trying to come up with a good way to build an on-disk tree for use with chef-zero from our chef repo. looking like a clean clone of the repo, the environment cookbook in question, and berks-vendor will build it nicely.
[2014-07-18 00:36:20 -0400] aliljet: hey -- I'm trying to use the community supported subversion cookbook to install a quick svn server.  unfortunately, that cookbook is failing because of a dependency on apache2 -- any clever workaround or must I fork and try to push changes?
[2014-07-18 01:12:52 -0400] gkra: is there any way to get berkshelf to look at ./chef/knife.rb instead of just looking for ~/.chef/knife.rb?
[2014-07-18 01:22:28 -0400] drogoh: you can have a .chef in your chef-repo, perhaps there?
[2014-07-18 01:25:55 -0400] Damm: gkra, berkshelf reads from .chef
[2014-07-18 01:25:58 -0400] Damm: so ~/.chef
[2014-07-18 01:26:00 -0400] Damm: ./chef
[2014-07-18 01:26:04 -0400] Damm: err ./.chef
[2014-07-18 01:26:20 -0400] Damm: it tries to detect if your in an chef-repo by walking up and down a little to find knife.rb
[2014-07-18 01:26:24 -0400] Damm: as well as other configuration files
[2014-07-18 01:30:58 -0400] gkra: hmm.
[2014-07-18 01:35:06 -0400] gkra: so, in my environment cookbook (which has the magical metadata.rb and Berksfile.lock), I dropped a .berkshelf/config.json (to disable ssl verification) and a .chef/knife.rb
[2014-07-18 01:38:06 -0400] gkra: attempting a 'berks upload' fails to find the chef server, defined in .chef/knife.rb
[2014-07-18 02:00:47 -0400] shlant: jkeiser: ran into this issue I see every once in a while. any ideas? undefined method `name' for ["BootstrapUser", "ubuntu"]:Array
[2014-07-18 02:01:16 -0400] shlant: i thought it was because the ubuntu user privs were removed during the run
[2014-07-18 02:01:27 -0400] shlant: but it works 95% of the time
[2014-07-18 02:02:30 -0400] shlant: I can definitely ssh and sudo as the ubuntu user on the machine
[2014-07-18 02:16:50 -0400] |rt|: gkra: would knife block address your need to use different knife.rb's?
[2014-07-18 02:21:10 -0400] gkra: hmm. possibly
[2014-07-18 02:21:43 -0400] gkra: I've set things up so each chef repo has it's own .chef/knife.rb, so switching which chef server you use is as simple as switching repos.
[2014-07-18 02:21:51 -0400] gkra: but it's breaking down in other ways...
[2014-07-18 02:22:25 -0400] gkra: |rt|: this the one? https://github.com/greenandsecure/knife-block
[2014-07-18 02:22:26 -0400] |rt|: at Dyn we have a chef repo per chef org (which is our environment) knife block is used to change which one you're interacting with
[2014-07-18 02:22:50 -0400] |rt|: gkra: yep that's it
[2014-07-18 02:22:57 -0400] gkra: thanks, I'll take a look :)
[2014-07-18 02:23:41 -0400] |rt|: all it really does is modify a symlink to which <org>-knife.rb is linked to ~/.chef/knife.rb
[2014-07-18 02:24:22 -0400] |rt|: gkra: I also have a bit of bash that I use to have which environment is active in my bash prompt
[2014-07-18 02:24:35 -0400] |rt|: gkra: let me put that up on a gist
[2014-07-18 02:25:36 -0400] gkra: I'm thinking I might be able to just symlink my various repo knife.rb's into place in ~/.chef and let knife-block switch between them....
[2014-07-18 02:27:27 -0400] |rt|: https://gist.github.com/3dinfluence/1e3e5e8e4c6b8e18b7de
[2014-07-18 02:28:38 -0400] |rt|: gkra: you can use that bash function to echo the active knife to your bash prompt or tmux status bar
[2014-07-18 02:32:04 -0400] |rt|: gkra: if you're interested in the workflow that we're using you can list to Pete Cheslock's talk from Chef Conf 2014 he details it out a bit more there.
[2014-07-18 02:33:59 -0400] gkra: thanks.
[2014-07-18 02:34:06 -0400] gkra: time to go for tonight.
[2014-07-18 02:46:04 -0400] Damm: gkra, knife block isn't really needed
[2014-07-18 03:06:21 -0400] jkeiser: shlant: if you hit that error again, can you grab the callstack (chef saves it to a file and tells you the location of the callstack near the end of the run) and gist it to me?  Thanks!
[2014-07-18 03:06:31 -0400] jkeiser: Should be a simple fix, I imagine
[2014-07-18 03:06:36 -0400] jkeiser: Once the location is known
[2014-07-18 03:21:57 -0400] shlant: jkeiser: https://gist.github.com/MrMMorris/ed9f411f264a700d3a0a
[2014-07-18 04:07:37 -0400] chefgirl: anybody has ever installed appdynamics ?
[2014-07-18 04:10:35 -0400] chefgirl: what is the skill set requirement for implementing OpenStack ??
[2014-07-18 04:26:45 -0400] jkeiser: shlant: darn, that was a bit less helpful than I thought
[2014-07-18 04:27:18 -0400] chefgirl: what is the skill set requirement for implementing OpenStack ??
[2014-07-18 04:29:54 -0400] mikedodge04: Does any body know if it is possible to have multiple ohai plugins to write to the same node attribute mash?
[2014-07-18 04:31:22 -0400] chefgirl: can I use jenkins to invoke chef server ??
[2014-07-18 04:32:42 -0400] shlant: jkeiser: haha I agree
[2014-07-18 04:33:28 -0400] shlant: I will just kill the machine and run again. I'll try and remember what changed if it happens again
[2014-07-18 04:33:40 -0400] viglesias: shlant: what were you seeing?
[2014-07-18 04:33:58 -0400] viglesias: i had issues rebuilding new boxen with the same node names
[2014-07-18 04:34:01 -0400] viglesias: and env
[2014-07-18 04:35:42 -0400] jkeiser: viglesias: what issues?
[2014-07-18 04:36:13 -0400] viglesias: jkeiser: it wouldnt launch the boxes and gave me a []= does not exist for Nil class
[2014-07-18 04:36:20 -0400] viglesias: i will try to reproduce tonight
[2014-07-18 04:36:22 -0400] jkeiser: viglesias: that sucks!
[2014-07-18 04:36:33 -0400] viglesias: jkeiser: yeah so i just would delete the nodes an env and restart
[2014-07-18 04:36:37 -0400] viglesias: worked like a charm after that
[2014-07-18 04:36:51 -0400] viglesias: so i am just terminating the instances in the cloud which may be the issue
[2014-07-18 04:36:58 -0400] viglesias: rather than using the destroy
[2014-07-18 04:38:29 -0400] jkeiser: shlant: my thought is the issue is related to machine "#{name}-redis" do
[2014-07-18 04:38:35 -0400] jkeiser: shlant: that would explain the stack better than other things
[2014-07-18 04:38:54 -0400] jkeiser: shlant: not great, but better :)
[2014-07-18 04:39:10 -0400] jkeiser: shlant: is it possible that name is sometimes not in scope?
[2014-07-18 04:44:43 -0400] shlant: it happened after a successful run and then I added a value to first-boot.json so maybe I mucked something
[2014-07-18 04:45:13 -0400] shlant: it's happened a couple times before so I thought i'd let you know. Ignore for now :)
[2014-07-18 06:20:19 -0400] Chandrasekhar: https://gist.github.com/csb29/8b36a394147a77d9a77d
[2014-07-18 06:20:28 -0400] Chandrasekhar: can anyone help ?
[2014-07-18 06:22:12 -0400] double_p: There may already be a client named "station1.example.com"
[2014-07-18 06:22:29 -0400] double_p: check with 'knife client show station1.example.com'
[2014-07-18 06:56:28 -0400] chefgirl: can anybody help me with appdynamics php agent insatllation ?
[2014-07-18 07:23:31 -0400] hagzag: hi what is the best method of storing a secret-key on an instance (for databag decryption) ? use an s3 bucket a remote_file ?
[2014-07-18 07:26:06 -0400] chefgirl: how can i put load on apache in linux
[2014-07-18 07:26:23 -0400] chefgirl: sry wrong windows
[2014-07-18 07:39:07 -0400] chefgirl: where is scalp42 ??
[2014-07-18 07:39:11 -0400] chefgirl: :(
[2014-07-18 08:30:25 -0400] jmara: hey, I was wondering if there is a way to read in a file and expose its content as attribute in a recipe? I know that this should be done in an ohai plugin, but is there another way? :-)
[2014-07-18 08:47:39 -0400] jonlives: jmara: if you really want to do it in a recipe, you can use Ruby's File class from the stdlib
[2014-07-18 08:48:34 -0400] jmara: jonlives: something like this? https://gist.github.com/jmara/ff9fdcfa45c053fff688
[2014-07-18 08:49:37 -0400] jmara: ups node["current_user"] is a ohai attribute
[2014-07-18 08:49:44 -0400] jonlives: yeah I was gonna say
[2014-07-18 09:13:03 -0400] jmara: jonlives: works :-) thanks btw. thanks for your  Customizing Chef book its really great, just realized that you published an update two days ago :D
[2014-07-18 09:14:19 -0400] jonlives: jmara: yeah - final update too, book's now in the production editing stage
[2014-07-18 09:14:29 -0400] jonlives: aiming to have it out mid sept :)
[2014-07-18 09:14:31 -0400] jmara: nice :D
[2014-07-18 09:14:33 -0400] jonlives: glad you're enjoying it :p
[2014-07-18 09:20:22 -0400] jonlives: um.. thanks :p
[2014-07-18 09:20:28 -0400] matti: ;]
[2014-07-18 10:25:06 -0400] __julien: Hello, How to make a template attribute writable ? I wanna do that  within my template file : <%= @vhost['server_names'].shift %>
[2014-07-18 10:44:10 -0400] matti: __julien: http://docs.opscode.com/essentials_cookbook_templates.html
[2014-07-18 10:46:57 -0400] __julien: matti,  I could not find the answer there
[2014-07-18 10:49:57 -0400] jmara: __julien: you should be able to apply methods if you access the variable without the @ Symbol
[2014-07-18 10:52:47 -0400] __julien: The problem here is that using shift modifies the attributes which is immutable , and I don;t know the equivalent of node.set for a template attribute ( in the end I did not use shift, but the question still stays cos it's sometime more convenient to use things like shift)
[2014-07-18 10:53:44 -0400] workmad3: __julien: it's generally a really bad idea to use destructive methods like .shift inside a template ;)
[2014-07-18 10:53:57 -0400] workmad3: __julien: I'd say 'always' but I shy away from complete absolutism like that
[2014-07-18 10:54:47 -0400] __julien: workmad3, yes got that too, I did some workaround using each_with_index but the code would be easier to read with shift an pop in my case
[2014-07-18 10:54:53 -0400] __julien: -and
[2014-07-18 10:55:31 -0400] workmad3: __julien: is a .dup or .clone of the variable still immutable?
[2014-07-18 10:56:03 -0400] __julien: workmad3, good point, I should do that
[2014-07-18 10:57:44 -0400] workmad3: __julien: yeah, I guess a should have been more specific - 'it's generally a really bad idea to use destructive methods on variables that have been passed into a template, rather than stuff created by the template or specifically for the template' :)
[2014-07-18 10:58:15 -0400] __julien: workmad3,  :)
[2014-07-18 12:06:20 -0400] dwradcliffe: Why is reporting always broken on hosted chef? "Reporting is currently unavailable"
[2014-07-18 12:39:27 -0400] phessler: I am running into some big problems with erb and templates
[2014-07-18 12:39:44 -0400] phessler: erubis):6: no .<digit> floating literal anymore; put 0 before dot
[2014-07-18 12:39:56 -0400] phessler: http://pastebin.com/qiMJk0bm is the output of chef, including my template and incoming data
[2014-07-18 12:42:52 -0400] phessler: how can I tell the template to not do math, and only process things inside '<% ... %>' blocks?
[2014-07-18 12:43:44 -0400] quantumfoam: I'm looking for a cookbook that supports more advanced operations than the standard samba cookbook; specifically joining to active directory
[2014-07-18 12:43:48 -0400] quantumfoam: anyone know of one?
[2014-07-18 12:45:11 -0400] quantumfoam: oh wait, I think I found one: https://github.com/bryanwb/samba-ad
[2014-07-18 12:48:11 -0400] zts: phessler: I don't properly understand that error, but line 5 of your template shouldn't have the #{} around the variable - if that's corrected, does the error go away?
[2014-07-18 12:49:48 -0400] phessler: zts: it changes, http://pastebin.com/656XH95U
[2014-07-18 12:50:19 -0400] phessler: I think it's still trying to apply math
[2014-07-18 12:50:45 -0400] dwradcliffe: phessler: @vm is an array, not a hash
[2014-07-18 12:51:03 -0400] phessler: what does that mean?
[2014-07-18 12:51:10 -0400] phessler: I don't know ruby at all
[2014-07-18 12:51:23 -0400] phessler:   variables {:vm=>[data_bag_item["vm-qa", "qa6-fw1", {"id"=>"qa6-fw1", "qa"=>"6" ...
[2014-07-18 12:53:20 -0400] phessler: and if I remove the first set of lines, and only work on the .each set, we get what is likely the real issue: http://pastebin.com/ZnJWyzw1
[2014-07-18 12:53:23 -0400] zts: phessler: try <%= @vm["qa"].to_i %>
[2014-07-18 12:53:38 -0400] zts: (although I don't really understand that error either)
[2014-07-18 12:53:47 -0400] dwradcliffe: phessler: yeah, @vm["qa"] is nothing. @vm is a list of data bags
[2014-07-18 12:53:55 -0400] dwradcliffe: phessler: and you can't sort data bag objects
[2014-07-18 12:54:11 -0400] phessler: dammit
[2014-07-18 12:54:17 -0400] phessler: I was hoping to sort by id
[2014-07-18 12:54:24 -0400] zts: dwradcliffe++
[2014-07-18 12:54:29 -0400] phessler: ok, but that is at least "workable"
[2014-07-18 12:54:40 -0400] dwradcliffe: you can, just need a little more ruby in there :)
[2014-07-18 12:54:41 -0400] zts: that is it, it's trying to change "qa" into an integer array index
[2014-07-18 12:55:21 -0400] dwradcliffe: I can't tell what you're trying to do with that first part. maybe you just need to pull info from the first item in the list
[2014-07-18 12:55:29 -0400] phessler: yes, exactly
[2014-07-18 12:55:59 -0400] dwradcliffe: try @vm[0]["qa"]
[2014-07-18 12:56:43 -0400] phessler: that worked, thanks!
[2014-07-18 12:56:58 -0400] phessler: I tried @vm["qa"].first and it errored out
[2014-07-18 12:57:10 -0400] phessler: but [0] did the trick
[2014-07-18 12:57:28 -0400] dwradcliffe: phessler: @vm.first["qa"] would probably work too
[2014-07-18 12:57:40 -0400] dwradcliffe: phessler: this might help with the other http://ruby-doc.org/core-2.1.2/Enumerable.html#method-i-sort_by
[2014-07-18 12:58:51 -0400] phessler: dwradcliffe: thanks for all of the help
[2014-07-18 12:59:01 -0400] phessler: this seems to be working as I expected it to
[2014-07-18 12:59:20 -0400] dwradcliffe: phessler: cool! :)
[2014-07-18 13:02:03 -0400] rsavage: morning Ceflings
[2014-07-18 13:02:26 -0400] rsavage: Is it possible do a knife search for a recipe in a run list?
[2014-07-18 13:04:13 -0400] phessler: $ knife search node "recipes:pf_firewall" -i
[2014-07-18 13:04:14 -0400] phessler: 2 items found
[2014-07-18 13:04:39 -0400] phessler: why recipes vs recipe, no idea
[2014-07-18 13:04:55 -0400] rsavage: yeah I just found that, thanks...
[2014-07-18 13:05:17 -0400] rsavage: phessler do you know how to use knife to search for a user?
[2014-07-18 13:05:30 -0400] phessler: depends on how you splatted the user in
[2014-07-18 13:05:52 -0400] rsavage: phessler: os user
[2014-07-18 13:06:02 -0400] rsavage: i.e. tomcat
[2014-07-18 13:07:22 -0400] phessler: actually, no.  I have no idea.  sorry.
[2014-07-18 13:11:41 -0400] dwradcliffe: rsavage: os users are stored in etc/passwd
[2014-07-18 13:12:17 -0400] dwradcliffe: rsavage: so: knife search node "etc_passwd_tomcat:*"
[2014-07-18 14:17:30 -0400] rbowlby: anyone actively using chef-metal? have a good tutorial on getting started?
[2014-07-18 14:21:23 -0400] mikesplain: rbowlby Check out the docs and blogs in the project.  There's also a number of podcasts linked there as well.
[2014-07-18 14:21:54 -0400] rbowlby: is it fully baked? As in semi-safe to use in prod?
[2014-07-18 14:22:00 -0400] mikesplain: There's also some examples in the docs folder that helped me figure it out
[2014-07-18 14:24:05 -0400] mikesplain: rbowlby I would ask jkeiser that, but we're using it in production at the moment.. it has changed very rapidly over the past 6 months so...
[2014-07-18 14:24:25 -0400] rbowlby: thanks mikesplain
[2014-07-18 14:24:28 -0400] mikesplain: np
[2014-07-18 14:25:04 -0400] mikesplain: I wouldn't suggest it if you're not willing to adapt to newer versions when they make changes, but if you want to make a few things a little easier, I would give it a shot
[2014-07-18 15:27:23 -0400] gyoza: anybody know how to display more line items on aws page?
[2014-07-18 15:52:11 -0400] cswarren: Apologies if this is a dumb/beginner question, but how would you configure your cookbooks so that any Ruby gems that were required could be downloaded from an internal server, instead of rubygems.org?
[2014-07-18 15:54:27 -0400] shlant1: what precedence level are attributes in first-boot.json set at?
[2014-07-18 15:54:33 -0400] shlant1: normal?
[2014-07-18 15:55:03 -0400] jreslock: cswarren: You would need to change the source entry in your Gemfile but it still needs to point to a Rubygems server for deps to resolve.
[2014-07-18 15:55:27 -0400] cswarren: Great. I have an Artifactory server that can act as a proxy. Thanks.
[2014-07-18 15:57:39 -0400] keftes: any simple way of adding something to the path ? - in an idempotent way (=not execute export)
[2014-07-18 15:58:43 -0400] workmad3: keftes: you could alter /etc/environment
[2014-07-18 15:58:53 -0400] Eulipion: keftes: you can specify environment to many of the resources, depends what your're trying to do
[2014-07-18 16:00:13 -0400] keftes: i'm bootstrapping a build agent with chefdk - but i need to also install a gem as part of my workflow - gem/ruby isn't in the path by default
[2014-07-18 16:00:28 -0400] keftes: i'll check what you said
[2014-07-18 16:00:36 -0400] keftes: i noticed the environment attribute before
[2014-07-18 16:01:01 -0400] Eulipion: environment 'PATH' => "#{rb_dir}:#{ENV['PATH']}"
[2014-07-18 16:01:30 -0400] workmad3: keftes: if it's within a chef run, I'd go with the environment path... or using full paths to executables
[2014-07-18 16:01:39 -0400] workmad3: *environment attribute (where possible)
[2014-07-18 16:02:54 -0400] keftes: yeah that sounds good - assuming I can add that to the gem_package resource and get it working - i'll check thx
[2014-07-18 16:20:15 -0400] icarus_: what is a good way to distribute a server.key using databags?
[2014-07-18 16:20:25 -0400] gchristensen: what is a server.key
[2014-07-18 16:20:36 -0400] gyoza: i believe its a file.
[2014-07-18 16:20:42 -0400] gyoza: just kidding lol
[2014-07-18 16:20:50 -0400] icarus_: ssl private key* i sohuld say
[2014-07-18 16:21:06 -0400] keftes: but it in the databag and add it (content) in a file ?
[2014-07-18 16:21:07 -0400] gchristensen: well you'll probablywant it encrypted
[2014-07-18 16:21:34 -0400] gchristensen: gyoza: I like the certificates cookbook
[2014-07-18 16:21:40 -0400] gchristensen: err... icarus_ ^
[2014-07-18 16:21:45 -0400] Eulipion: chef-vault might be useful
[2014-07-18 16:22:48 -0400] keftes: workmad3: gem_package won't accept environment as an attribute - i'm going to poke around
[2014-07-18 16:24:53 -0400] keftes: it's kind of odd chef doesn't have something built in to permanently modify the path
[2014-07-18 16:25:06 -0400] keftes: like a path resource etc
[2014-07-18 16:25:51 -0400] Eulipion: keftes: you can specify :gem_binary
[2014-07-18 16:26:11 -0400] Eulipion: keftes: https://github.com/poise/poise-ruby
[2014-07-18 16:27:45 -0400] keftes: cool, that looks like it will do the trick
[2014-07-18 16:28:13 -0400] keftes: although i wouldn't mind knowing how to properly modify the path
[2014-07-18 16:33:27 -0400] doug2: can -j to chef-client come from cli, or does it gotta be a file?
[2014-07-18 16:34:03 -0400] Eulipion: doug2: i think u want -o for cli
[2014-07-18 16:34:45 -0400] doug2: nope, that's -o RunlistItem,RunlistItem...,
[2014-07-18 16:36:10 -0400] grayhemp: hi. I have a role that overrides some attributes, and another role that has the first role in the run list and overrides some of the attributes that the first role overrides. Will I get the second role's overridden values as a results or I need to use force_override in the second role to get them?
[2014-07-18 16:36:17 -0400] Eulipion: anyone know what.aws.keypair_name is supposed to be for vagrant-aws?  not sure what it actually refers to
[2014-07-18 16:37:07 -0400] doug2: well this is horribly inconvenient. if chef-client can't read json from cli, then I have to scp file with json first. what a PITA
[2014-07-18 16:40:24 -0400] cheeseplus: doug2: can also be a URL
[2014-07-18 16:40:42 -0400] cheeseplus: not sure if that helps any though
[2014-07-18 16:42:02 -0400] doug2: cheeseplus: not any better unfortunately
[2014-07-18 16:44:24 -0400] j^2: cheeseplus: is this too "unfriendly" for #chef? http://mywiki.wooledge.org/BadQuestions
[2014-07-18 16:44:35 -0400] j^2: it's pretty straight forward
[2014-07-18 16:45:03 -0400] jtimberman: doug2: `knife bootstrap` has a `-j` option which takes a JSON string that gets added to the first run of chef-client.
[2014-07-18 16:45:07 -0400] gchristensen: I have no qualms linking straight to Smart Questions by ESR
[2014-07-18 16:45:35 -0400] doug2: jtimberman: we aren't using bootstrap. we're using ami's with chef installed
[2014-07-18 16:46:23 -0400] doug2: jtimberman: this is also for upgrading software, so it has to be run on a semi regular basis, not on instance bootstrap
[2014-07-18 16:46:47 -0400] jtimberman: doug2: what is it you're wanting in the JSON? Is it something that is node specific? or could it be set in something in the run list - like a role's attributes?
[2014-07-18 16:48:08 -0400] doug2: jtimberman: i spent 8 hours yesterday trying to use call a URL to get a version of software to install, and then ruby to parse it. Due to compile/converge issues and then an inability to get the data from the ruby_block back to the recipe, I went with someone's suggestion of passing the version of the software to install in to the chef-client
[2014-07-18 16:50:38 -0400] doug2: jtimberman: this means I now can't run chef as a daemon (inconvenient), and if I have to first copy a file to the instance with the json data and then ssh in to run the client and give it the path to the pre copied json file, also inconvenient
[2014-07-18 16:51:13 -0400] doug2: all the while my idiot dumbass boss is saying "it's the cloud! It's easy, right?"
[2014-07-18 16:54:13 -0400] doug2: jtimberman: no words of wisdom?
[2014-07-18 16:54:34 -0400] bougyman: your boss is right.
[2014-07-18 16:55:03 -0400] doug2: bougyman: grrrr
[2014-07-18 16:55:06 -0400] tayworm: heh
[2014-07-18 16:55:51 -0400] jtimberman: If I had to set attributes on N nodes and didn't have any input into them other than running chef, I would set the attributes in a role. A JSON file consumed by `chef-client -j` is just node attributes anda  run list, same thing can be put into a role. Those nodes should have *some* indication what run list items they have.
[2014-07-18 16:55:54 -0400] loki97123: @grayhemp did you get any replys
[2014-07-18 16:55:59 -0400] jtimberman: otherwise running chef wouldn't do much.
[2014-07-18 16:56:59 -0400] doug2: jtimberman: This is happening from a jenkins job. modifying a role means that jenkins would have to commit those changes back to git, which as far as I know is generally considered bad juju
[2014-07-18 16:56:59 -0400] jtimberman: anyway, gotta run now, playing Pathfinder with my son on my day off, cheers! :D
[2014-07-18 16:57:04 -0400] loki97123: doug2 ? same issue as yesterday?
[2014-07-18 16:57:23 -0400] doug2: loki97123: pretty much. going down chef-client path
[2014-07-18 16:57:40 -0400] doug2: loki97123: except... chef-client only accepts json parameters from a file, not cli... PITA
[2014-07-18 16:57:41 -0400] loki97123: we actually stamp that version in an override in the environment file.  we don't read it on the fly like you are
[2014-07-18 16:57:45 -0400] grayhemp: loki97123: nop (
[2014-07-18 16:58:10 -0400] doug2: loki97123: again, means modiying something by jenkins which I dont think we want to do
[2014-07-18 16:58:53 -0400] doug2: ya gotta remember I have a moron for a boss who only wants me to know how chef works. everyone else clicks on a GUI, which means they don't use the tools... which means a UI frontend is required... in this case jenkins cuz I am not a friggin web developer
[2014-07-18 16:59:30 -0400] loki97123: doug2 in our "build server" we have a script that stamps the environment with the thing we want deployed.  then we knife that environment file in to chef server then we run the knife ssh "query" "sudo chef-client" -C1  and we don't have to determine it
[2014-07-18 17:00:06 -0400] loki97123: doug2 we have talked with Chef-ites and the feedback was "everybody has that kitchen drawer full of scripts that they don't want to show anybody"
[2014-07-18 17:00:27 -0400] loki97123: the thing i gave you yesterday will always work
[2014-07-18 17:00:29 -0400] Eulipion: is there a way to tell vagrant about an ssh-bastion to access an aws instance?
[2014-07-18 17:00:35 -0400] loki97123: and handle it itempotently
[2014-07-18 17:00:41 -0400] doug2: loki97123: which one?
[2014-07-18 17:01:01 -0400] loki97123: grayhemp what exactly are you trying to default, override, force-override
[2014-07-18 17:01:15 -0400] doug2: loki97123: still requires changes to git
[2014-07-18 17:01:16 -0400] loki97123: chef-ites have said they regret putting in the override/force-override
[2014-07-18 17:01:33 -0400] shlant1: jkeiser: so I narrowed down the BootstrapUser problem. It only happens when I ssh and run chef-client as a different user than the original run on the metal host
[2014-07-18 17:01:39 -0400] shlant1: which can be easily avoided
[2014-07-18 17:01:51 -0400] shlant1: but I don't know if that's something that needs to be looked at
[2014-07-18 17:01:52 -0400] loki97123: doug2 if you private message me i'll give you my email and send you the zip of the cookbook
[2014-07-18 17:02:00 -0400] troyready: It kills me a little bit inside everytime I hear about the 'force-override' stuff :)
[2014-07-18 17:02:08 -0400] keftes: heh
[2014-07-18 17:02:29 -0400] doug2: loki97123: I'd rather not use the cookbook approach. All the implies hack voodoo is unmaintainable
[2014-07-18 17:02:39 -0400] grayhemp: loki97123: it's ['postgresql']['config']['...'] parameters
[2014-07-18 17:03:23 -0400] loki97123: so the cookbook(your recipe) is about maintaining it idempotently
[2014-07-18 17:03:29 -0400] loki97123: it is  not a hack
[2014-07-18 17:03:44 -0400] grayhemp: loki97123: the idea is to have a role that defines defaults for a type of a server and several roles that customize the defaults for every particular service
[2014-07-18 17:03:54 -0400] grayhemp: loki97123: * service = server
[2014-07-18 17:03:56 -0400] loki97123: personally i'd like jtimberman to take a look at it and give feedback
[2014-07-18 17:04:22 -0400] doug2: loki97123: it is a hack. i am never going to look at it and understand what is going on. neither is anyone else
[2014-07-18 17:04:36 -0400] troyready: Oh my lord
[2014-07-18 17:04:36 -0400] troyready: http://mywiki.wooledge.org/XyProblem
[2014-07-18 17:04:55 -0400] loki97123: grayhemp do you understand the attribute precedence thing
[2014-07-18 17:05:09 -0400] grayhemp: loki97123: I hope I do
[2014-07-18 17:05:13 -0400] loki97123: yes thank troyready
[2014-07-18 17:05:13 -0400] doug2: a non hack would be to pull down maven file, parse it, and then download the correct rpm
[2014-07-18 17:05:19 -0400] shlant1: loki97123:  +1
[2014-07-18 17:05:25 -0400] troyready: j^2, you've definitely given me the best link of the day
[2014-07-18 17:05:28 -0400] shlant1: ooops
[2014-07-18 17:05:31 -0400] shlant1: troyready: +1
[2014-07-18 17:05:36 -0400] troyready: It's so perfect
[2014-07-18 17:05:37 -0400] loki97123: i know that wasn't me
[2014-07-18 17:05:46 -0400] Eulipion: heh
[2014-07-18 17:06:13 -0400] doug2: sooooo.... chef-client... no way to pass in -j from cli rather than a file?
[2014-07-18 17:06:16 -0400] j^2: troyready: :)
[2014-07-18 17:06:17 -0400] loki97123: grayhemp (that wasn't meant in a jack@ss thing)
[2014-07-18 17:07:04 -0400] phelms: the Chef cron will just overwrite the existing cron when it reruns correct?
[2014-07-18 17:07:12 -0400] shlant1: doug2: it's funny because with knife ec2 it's the opposite
[2014-07-18 17:07:18 -0400] shlant1: and I would like to apss a file
[2014-07-18 17:07:33 -0400] phelms: Also is there a way (other than the system call) to dynamically change the cron's information?
[2014-07-18 17:07:39 -0400] doug2: shlant1: not funny.... doesnt surpise me
[2014-07-18 17:07:53 -0400] phelms: like looping the Chef cron command through a loop for example?
[2014-07-18 17:08:50 -0400] loki97123: grayhemp once you get down the override and force-override path it is really a bad path and right now, we (place i work) are actively pulling away from overrides and moving to searches for attributes to use, and using defaults and precedence node/recipe, environment and role
[2014-07-18 17:08:52 -0400] loki97123: ...
[2014-07-18 17:09:06 -0400] loki97123: it is really difficult to know which override you will get
[2014-07-18 17:09:13 -0400] doug2: loki97123: wow, you work somewhere where people besides you give a shit about this stuff?
[2014-07-18 17:09:34 -0400] loki97123: the force-override will work as long no node attributes have been set with "normal"
[2014-07-18 17:09:42 -0400] doug2: where I work, no one cares except me until it doesn't work as they want.... but of course they never expressed what they wanted until it fails
[2014-07-18 17:10:04 -0400] loki97123: doug2 yeah we have 9 people in the infrastructure and 5 devops spread through our group
[2014-07-18 17:10:21 -0400] loki97123: doug2 yes that is the way it goes  usually
[2014-07-18 17:10:22 -0400] doug2: loki97123: *sigh*
[2014-07-18 17:10:55 -0400] j^2: apropos to the force_override conversation: https://twitter.com/jjasghar/status/456541348791738368
[2014-07-18 17:11:05 -0400] loki97123: but on the down side we have really crappy coffee
[2014-07-18 17:11:28 -0400] doug2: loki97123: fair price to pay
[2014-07-18 17:11:40 -0400] doug2: so, i dunno... drop chef-client -j and go back to cookbook. I need some xanax
[2014-07-18 17:12:14 -0400] loki97123: j^2 have you done any work with mongo replsets in the cloud with authentication and stable persistent data
[2014-07-18 17:12:34 -0400] doug2: mongo. *twitch*
[2014-07-18 17:12:38 -0400] j^2: loki97123: wow, nope. :(
[2014-07-18 17:12:44 -0400] loki97123: dan
[2014-07-18 17:12:47 -0400] loki97123: damn
[2014-07-18 17:13:11 -0400] loki97123: any one here rolling their own mongo (not the provided nosql service by cloud providers) in the cloud?
[2014-07-18 17:13:34 -0400] doug2: loki97123: I tried.. it was not fun
[2014-07-18 17:13:39 -0400] loki97123: i'm down a rabbit hole on replsets, cnames and elbs
[2014-07-18 17:13:47 -0400] doug2: euw
[2014-07-18 17:13:53 -0400] loki97123: i already have the most of it
[2014-07-18 17:14:24 -0400] loki97123: i'll be providing the lwrps to the mongodb cookbook see if they want the user management junk
[2014-07-18 17:14:51 -0400] loki97123: j^2 i so want "force_default"
[2014-07-18 17:15:09 -0400] doug2: hmmm now hang on a moment.. if i put this entire thing into my recipe... wget -q https://acm.footest.com/artifactory/simple/foo-master-local/com/foo/cme/maven-metadata.xml -O - | xmllint --xpath "metadata/versioning/latest/text()" -
[2014-07-18 17:16:05 -0400] loki97123: doug2 yes, you could even do that as just a variable at the top of your recipe
[2014-07-18 17:16:07 -0400] loki97123: something like
[2014-07-18 17:16:31 -0400] loki97123: file=`wget BS`
[2014-07-18 17:16:58 -0400] loki97123: the_version=/REGEX/.match(file)
[2014-07-18 17:17:07 -0400] loki97123: then use the_version to set your thing
[2014-07-18 17:17:12 -0400] grayhemp: loki97123: hm, that's interesting, thank you. could you please give me some links on the examples or articles where is is described more detailed?
[2014-07-18 17:17:46 -0400] doug2: *sigh* xpath isn't a valid option on xmllint on my centos vagrant box
[2014-07-18 17:18:09 -0400] loki97123: grayhemp i only have the training from my chef rep that said they regret the override stuff
[2014-07-18 17:18:52 -0400] loki97123: and not knowing what the particulars are, i could only point you at the precedence page from chef.  although the override stuff has bitten me in the ass many times
[2014-07-18 17:19:17 -0400] loki97123: i'm still trying to wrap my head around what your use case is
[2014-07-18 17:20:32 -0400] loki97123: grayhemp, i'd use the default attributes in the recipe, then default attributes in environment , then default in role to be the "final" say
[2014-07-18 17:21:25 -0400] troyready: I've only seen public comments about the 'force' stuff
[2014-07-18 17:21:30 -0400] loki97123: i'd use code to attempt to decide at converge time as to what to set i.e. case node.environment then variables == blah
[2014-07-18 17:21:51 -0400] troyready: Admittedly, I like having two levels of precedence on roles
[2014-07-18 17:22:12 -0400] troyready: So I can apply default values in shared roles and override them when necessary.
[2014-07-18 17:22:25 -0400] loki97123: dang ahem  coderanger you around?
[2014-07-18 17:23:17 -0400] loki97123: :( poop
[2014-07-18 17:23:19 -0400] Jan_Garaj3: Hi all. I want to run recipe (from url) without chef-master, but "chef-client -z https://raw.githubusercontent.com/amazonwebservices/opsworks-first-cookbook/master/sample/recipes/bash.rb" doesn't work - any ideas?
[2014-07-18 17:23:33 -0400] shlant1: loki97123: what are you needing info on?
[2014-07-18 17:23:44 -0400] loki97123: my mongo situation
[2014-07-18 17:24:03 -0400] loki97123: any one here rolling their own mongo (not the provided nosql service by cloud providers) in the cloud?
[2014-07-18 17:24:17 -0400] n1ko: and by cloud you mean what
[2014-07-18 17:24:32 -0400] doug2: might as well ask this again. how do I get variables defined inside a ruby_block back into my recipe?
[2014-07-18 17:24:33 -0400] loki97123: public cloud provider
[2014-07-18 17:24:47 -0400] n1ko: and how is that different from running on your own hw? ;)
[2014-07-18 17:24:48 -0400] loki97123: commoditity hardware
[2014-07-18 17:24:53 -0400] n1ko: anyways, what are you exactly asking?
[2014-07-18 17:24:57 -0400] n1ko: scaling out mongodb?
[2014-07-18 17:24:59 -0400] n1ko: dynamic resizing?
[2014-07-18 17:25:01 -0400] n1ko: performance?
[2014-07-18 17:25:27 -0400] loki97123: on your own hw you know the members of the repl set
[2014-07-18 17:25:30 -0400] loki97123: you also have the names
[2014-07-18 17:25:32 -0400] doug2: jeez, I'd be happy with a mongo cookbook that didn't suck
[2014-07-18 17:25:35 -0400] grayhemp: loki97123: okay, thanks for the advices. I think I can do it this way too.
[2014-07-18 17:25:38 -0400] loki97123: they are not cattle
[2014-07-18 17:25:53 -0400] loki97123: scaling, no,
[2014-07-18 17:25:55 -0400] n1ko: really not that true
[2014-07-18 17:26:00 -0400] n1ko: except for small shops
[2014-07-18 17:26:06 -0400] n1ko: but anyways, do continue
[2014-07-18 17:26:07 -0400] loki97123: hell even big shops
[2014-07-18 17:26:12 -0400] keftes: doug2: mongo sucks - why would the cookbook be any different? :)
[2014-07-18 17:26:19 -0400] n1ko: small shops use "cloud" less than big shops use real hw :)
[2014-07-18 17:27:02 -0400] shlant1: doug2: if node.set node.save doesn't work then you must be missing something
[2014-07-18 17:27:10 -0400] n1ko: doug2: whats wrong with the cookbook?
[2014-07-18 17:27:30 -0400] loki97123: n1ko shlant1  we are bringing up replset in the cloud (rimes with blamazon) using asg,
[2014-07-18 17:28:06 -0400] doug2: shlant1: it doesn't work and I see a lot of blog posts of people asking the same question
[2014-07-18 17:28:17 -0400] n1ko: so basicly you are just asking about autoscaling in aws and how mongo works with that, right :)
[2014-07-18 17:28:21 -0400] doug2: n1ko: which mongo implementation? the edelight one is full of errors
[2014-07-18 17:28:22 -0400] loki97123: i believe the way to do this will be by putting elbs in front of each ec2 and then giving those the cname so that the spring ( with service discovery)
[2014-07-18 17:28:43 -0400] loki97123: the opscode mongodb cookbook works like a charm
[2014-07-18 17:28:51 -0400] doug2: loki97123: url?
[2014-07-18 17:29:18 -0400] shlant1: doug2: have you seen this?
[2014-07-18 17:29:19 -0400] shlant1: https://gist.github.com/arangamani/4659646
[2014-07-18 17:30:15 -0400] doug2: shlant1: i have. i posted it here yestrday and several people commented it should not work
[2014-07-18 17:30:31 -0400] doug2: loki97123: i think the opscode one is the edelight one
[2014-07-18 17:31:13 -0400] jtimberman: we (CHEF, ne Opscode) don't maintain a mongodb cookbook.
[2014-07-18 17:31:15 -0400] loki97123: https://community.opscode.com/cookbooks/mongodb probably i'm not having any issues
[2014-07-18 17:31:29 -0400] loki97123: yes sorry mister jtimberman :)
[2014-07-18 17:31:32 -0400] n1ko: loki97123: you dont want any elb
[2014-07-18 17:31:42 -0400] doug2: loki97123: what jtimberman said. i think your talking about the edelight one
[2014-07-18 17:31:47 -0400] n1ko: mongo has its own routing, like most of sharding thingies, and you only need to specify one working node
[2014-07-18 17:31:52 -0400] n1ko: rest will be discovered
[2014-07-18 17:31:54 -0400] loki97123: that is what was thinking
[2014-07-18 17:32:07 -0400] loki97123: yes, except  from the consumer i.e. spring side
[2014-07-18 17:32:13 -0400] loki97123: it takes an array of  names,
[2014-07-18 17:32:26 -0400] n1ko: it does, but it only still needs one
[2014-07-18 17:32:30 -0400] loki97123: and when configuring the replset it needs the to find the others to configure the recipe
[2014-07-18 17:32:31 -0400] doug2: loki97123: that one is terrible. for starters it uses IP address instead of host names which casues mongo to bitch
[2014-07-18 17:32:34 -0400] n1ko: and the driver discovers (and uses) the rest
[2014-07-18 17:32:53 -0400] doug2: loki97123: then, the logic used to determine the master is broken. i don't think they ever tested it past 2 nodes in a replset. We have 3
[2014-07-18 17:33:10 -0400] loki97123: doug2, no but thank you
[2014-07-18 17:33:23 -0400] loki97123: n1ko the spring driver will discover the rest?
[2014-07-18 17:33:29 -0400] doug2: there was several other issues with it too
[2014-07-18 17:33:31 -0400] jtimberman: loki97123: np, just making sure it's clear :D. back to writing this adventure :)
[2014-07-18 17:33:37 -0400] n1ko: loki97123: by spring driver you mean javadriver?
[2014-07-18 17:33:39 -0400] n1ko: and yep
[2014-07-18 17:33:59 -0400] doug2: shlant1: I'm gonna try that url. if it doesn't work, i will be a very unhappy camper
[2014-07-18 17:34:16 -0400] loki97123: doug2, i''m currently using this mongo recipe in the cloud with asg and everything is working exactly like it says on the tin.  i can spin up N number of instances it works great
[2014-07-18 17:34:24 -0400] n1ko: loki97123: actually.. i dont know how elb could work even. because writes must go to master
[2014-07-18 17:34:43 -0400] n1ko: maybe mongo could internally do slave->master redirection
[2014-07-18 17:34:49 -0400] n1ko: but i see now reason to use elb in the first place
[2014-07-18 17:34:51 -0400] doug2: loki97123: oh, and it also doesn't support SSL
[2014-07-18 17:34:52 -0400] n1ko: now, no
[2014-07-18 17:35:23 -0400] doug2: loki97123: does your replset have 2 or 3 nodes?
[2014-07-18 17:35:31 -0400] doug2: loki97123: are you sharding?
[2014-07-18 17:35:50 -0400] loki97123: the reason for the elb would be one elb in front of each ec2 instance, and the only reason for the elb's would be to give the instances "stable" names that spring could discover and we could pop and swap the ec2 instances from behind the elbs n1ko
[2014-07-18 17:36:27 -0400] loki97123: doug2 you have to have either 1,3, or 3+n to have a repl set.  we are also implementing sharding across regions and availability zones
[2014-07-18 17:36:38 -0400] loki97123: i've already poc'd this, so yes
[2014-07-18 17:37:10 -0400] doug2: loki97123: you can have 2 in a replset. your thinking of config servers
[2014-07-18 17:37:29 -0400] loki97123: no, you have to have 1 or 3, or 3+n for a replset
[2014-07-18 17:37:37 -0400] cheeseplus: oh mongo, how do you databass
[2014-07-18 17:37:37 -0400] doug2: loki97123: i disagree
[2014-07-18 17:37:37 -0400] loki97123: you have to have a quorum
[2014-07-18 17:37:52 -0400] doug2: loki97123: for the config servers, yes
[2014-07-18 17:37:57 -0400] loki97123: yes, i'm ok with that doug2
[2014-07-18 17:37:58 -0400] loki97123: :)
[2014-07-18 17:38:19 -0400] loki97123: n1ko have you used or seen morphia used
[2014-07-18 17:38:23 -0400] doug2: loki97123: there is no quroum for the replicasets. there's a master and N secondaries
[2014-07-18 17:38:45 -0400] n1ko: loki97123: never heard of it, sry
[2014-07-18 17:38:58 -0400] n1ko: oh, its hibernate for mongo
[2014-07-18 17:38:58 -0400] loki97123: a'ight
[2014-07-18 17:39:01 -0400] n1ko: sounds... bad
[2014-07-18 17:39:02 -0400] n1ko: :D
[2014-07-18 17:40:39 -0400] loki97123: yes, thats what i said also the use is towards a release using the morphia at the version it is at now
[2014-07-18 17:40:40 -0400] loki97123: :(
[2014-07-18 17:41:33 -0400] loki97123: doug2 heres the mongo information for replica set architecture
[2014-07-18 17:41:34 -0400] loki97123: http://docs.mongodb.org/manual/core/replica-set-architectures/
[2014-07-18 17:42:37 -0400] loki97123: thanks n1ko, go info to use
[2014-07-18 17:43:09 -0400] doug2: shlant: Line 15... https://gist.github.com/arangamani/4659646 fails.
[2014-07-18 17:43:47 -0400] shlant: doug2: yea that would fail dure to being read only
[2014-07-18 17:43:51 -0400] doug2: shlant1: it's not setting the node precedence. I get "Node attributes are read-only when you do not specify which precedence level to set" which brings into question the validity of the whole thing
[2014-07-18 17:43:55 -0400] shlant: node.default[:test][:content] = "old content"
[2014-07-18 17:44:16 -0400] doug2: shlant1: ok, so except for an entire on the very first line, rest should work, right? :-P
[2014-07-18 17:44:25 -0400] doug2: s/entire/error/
[2014-07-18 17:44:45 -0400] loki97123: all the node[BLAH bits would need to be changed
[2014-07-18 17:44:52 -0400] loki97123: chef changed the syntax
[2014-07-18 17:45:01 -0400] shlant: doug2: well are you going to give up or try it?
[2014-07-18 17:45:11 -0400] doug2: shlant: trying.
[2014-07-18 17:45:24 -0400] shlant: doug2:  :)
[2014-07-18 17:48:19 -0400] doug2: shlant: it just ocurred to me that this bugger is writing the variable to a file
[2014-07-18 17:48:46 -0400] doug2: barf. i tried that yesterdat and got burned again my compile/converge issues. we shall see how this works
[2014-07-18 17:49:52 -0400] doug2: shlant: in fact this work work. Line 20 sets the variable, and line 28 tries to write it to a file. By line 23 it's gone out of scope
[2014-07-18 17:50:11 -0400] doug2: shlant: if I could write it to a file at that point, I could just use it. I wouldn't have to write it to a bloody file
[2014-07-18 17:51:56 -0400] doug2: oh wait. *sigh*
[2014-07-18 17:54:54 -0400] doug2: Ok... http://pastebin.com/VdcCryY9 compile/converge issue. It complains "No such file or directory - /tmp/maven-metadata.xml" .... how to fix?
[2014-07-18 17:56:38 -0400] zts: doug2: your remote_file says action :nothing
[2014-07-18 17:56:51 -0400] bougyman: add an only_if { File.exists?("/tmp/maven-metadata.xml") } to the ruby_block "hack" resource
[2014-07-18 17:57:00 -0400] bougyman: and yeah, remove that action
[2014-07-18 17:57:17 -0400] bougyman: setting node.default in ruby_block I don't think is going to work the way you want.
[2014-07-18 17:57:50 -0400] bougyman: what is the some_file stuff?
[2014-07-18 17:58:14 -0400] doug2: bougyman: the some_file stuff is from here https://gist.github.com/arangamani/4659646 shlant says it should work
[2014-07-18 17:58:30 -0400] doug2: bougyman: actually, if I read the url in ruby... that might help
[2014-07-18 18:00:48 -0400] doug2: zts: dammit
[2014-07-18 18:07:30 -0400] holoway: good afternoon
[2014-07-18 18:07:33 -0400] holoway: (pacific!)
[2014-07-18 18:10:55 -0400] doug2: shlant: that url makes no sense
[2014-07-18 18:19:26 -0400] shlant: doug2: so just to understand what you need. You need to pull a file and get the version from it then install a rpm package with that version?
[2014-07-18 18:19:58 -0400] phelms: Hey - is it possible to put the cron resource inside of a ruby_block ?
[2014-07-18 18:24:33 -0400] doug2: shlant: so... uhm.... this seems to work... http://pastebin.com/M839mwM7 i have no idea why. setting the node attribute inside the ruby_block wasn't working for me yesterday. some people said it should work, others said it wouldn't. the fact no one knows is a sad reflection upon the complexity of chef
[2014-07-18 18:25:25 -0400] doug2: oh but wait... i have to add the exec first
[2014-07-18 18:25:32 -0400] doug2: prepare for... failure!
[2014-07-18 18:27:37 -0400] doug2: and .... this works.... complete thing... http://pastebin.com/nAs0JHwk
[2014-07-18 18:28:04 -0400] shlant: doug2: here's an ultimatum: you either commit to trying and get it working and stop complaining about the tool, or you complain your way out of this channel. I understand that your current situation with your boss is causing your stress so I either suggest you find a new role or take up meditiation.
[2014-07-18 18:29:04 -0400] doug2: shlant: why was there no consensus on setting a variable inside a ruby block? why does everyone have a different opinion?
[2014-07-18 18:30:38 -0400] shlant: doug2: it is a very dynamic environment. Things change constantly: new versions, best practices etc. Not everyone here are experts and sometimes even experts can't come to a consensus. This is just how it is with "open source". Go with the flow or pay someone else to do it for you.
[2014-07-18 18:31:12 -0400] shlant: doug2: we want to help you so bashing the tool many of us use and love won't get you anywhere
[2014-07-18 18:31:47 -0400] zts: consensus?  opinion?  It's a piece of software, that works the way it is programmed.  If two people disagree about how it works, at least one of them is wrong
[2014-07-18 18:32:12 -0400] vickleford: i want a chef cap! (a baseball cap with a chef logo on it) anybody else having issues finding how to buy them?
[2014-07-18 18:33:01 -0400] zts: doug2: that said, I'm happy that you got it working.  I'm also bewildered, because it looks to me that your log statement should be logging "################ foo" - so if I'm wrong, take that as proving your point that nobody understands what's going on
[2014-07-18 18:33:36 -0400] lamont_oc: zts: log runs at converge time, so the ruby_block will execute first i think
[2014-07-18 18:33:43 -0400] shlant: zts: the "way it's programmed" changes often in some cases. Not everyone is aware of those changes. On top of that, edge cases like doug2's can be hard to nail down
[2014-07-18 18:33:54 -0400] zts: lamont_oc: yeah, but the string interpolation happens at compile time
[2014-07-18 18:34:13 -0400] lamont_oc: hah, yes, correct
[2014-07-18 18:34:41 -0400] lamont_oc: doug2:  you should make this into an LWRP, itll be vastly easier
[2014-07-18 18:35:35 -0400] doug2: lamont_oc: dunno, using the recipe is pretty easy
[2014-07-18 18:35:45 -0400] c_t: uploading All The Cookbooks sure takes a while
[2014-07-18 18:36:02 -0400] doug2: shlant: by basic question was how to use a variable defined in a ruby block
[2014-07-18 18:36:43 -0400] lamont_oc: yeah but what youre doing is way too complicated, and the reason why nobody understands why what youre doing works or not is that youve got both ruby parsing mixed up with chef compile-converge parsing mixed up with ruby variable scope issues
[2014-07-18 18:37:07 -0400] shlant: again, http://mywiki.wooledge.org/XyProblem
[2014-07-18 18:37:17 -0400] loki97123: lamont_oc and zts i gave doug2 the full lwrp implementation, he felt it was a hack and refused to use it
[2014-07-18 18:37:23 -0400] lamont_oc: yeah
[2014-07-18 18:37:25 -0400] loki97123: looking shlant
[2014-07-18 18:37:40 -0400] loki97123: HAH yes
[2014-07-18 18:37:45 -0400] loki97123: shlant is correct again
[2014-07-18 18:38:19 -0400] loki97123: there is no consensus there is no best practice other than "make it idempotent"  and using chef you can do it in at least 5 different ways
[2014-07-18 18:39:20 -0400] shlant: what everyone has to realize is that it's not the problem of the software or anyone in particular. The stress doug2 is under spills over into his work and he needs to deal with that. again, doug2 I highly recommend a new job or a meditation practice. Works for me! :)
[2014-07-18 18:39:36 -0400] loki97123: beer, much beer
[2014-07-18 18:39:41 -0400] lamont_oc: well, just listen to the people telling you to use a LWRP
[2014-07-18 18:39:59 -0400] shlant: loki97123: unfortunately that deals with the symptom, not the probem
[2014-07-18 18:40:54 -0400] loki97123: actually as Damm or bougyman pointed out
[2014-07-18 18:41:10 -0400] loki97123: the issue that is being fixed is not the problem
[2014-07-18 18:41:19 -0400] heathsnow: random thought:  why not make every cookbook a library cookbook?  it would make consuming the cookbooks and making additions/edits much easier I would think.
[2014-07-18 18:41:20 -0400] loki97123: shlant you are correct.
[2014-07-18 18:42:10 -0400] heathsnow: then I could just have my own personalized version of everything or I can just consume it using the examples of the library.
[2014-07-18 18:42:22 -0400] shlant: heathsnow: that is something that coderanger preaches. Large scale implementation is easier said than done :p
[2014-07-18 18:42:27 -0400] lamont_oc: weve actually discussed removing compile/converge mode internally, because of all this kind of shit, which would make what doug2 wants to do considerably easier  but wed need everyone to stop using forward notifications, and wed need to have some other API to do depenency injection into cookbooks to replace opening up the resource collection.  so in the meantime we have compile/converge mode which complicates
[2014-07-18 18:42:28 -0400] lamont_oc: everything.  a good way around that is to encapsulate code exactly like this in an LWRP that gets its own compile/converge mini-chef-run which executes at converge time of the provider.
[2014-07-18 18:43:21 -0400] heathsnow: shlant: or perhaps still provide a base recipe that consumes your own library...but at least then I'd have a library to work with.
[2014-07-18 18:43:31 -0400] heathsnow: shlant:  just gotta get everyone on board
[2014-07-18 18:43:32 -0400] lamont_oc: TL;DR is use an LWRP
[2014-07-18 18:43:36 -0400] bougyman: of the 5+ ways this could be done, I think doug chose one of the more convoluted.
[2014-07-18 18:43:47 -0400] bougyman: an lwrp seems overkill, to me.
[2014-07-18 18:44:01 -0400] shlant: heathsnow: keeping up with community cookbook maintenance is a lot of work let alone complete refactors
[2014-07-18 18:44:03 -0400] bougyman: just write the file and use the data from the file by reading the dang file.
[2014-07-18 18:44:35 -0400] ianco: no ^ :)
[2014-07-18 18:44:49 -0400] shlant: I think the solution that eventually worked it most likely the simplest
[2014-07-18 18:45:37 -0400] shlant: doug2: do you need the execute block? can you not use rpm_package with source ?
[2014-07-18 18:45:42 -0400] lamont_oc: yeah
[2014-07-18 18:45:56 -0400] lamont_oc: so get rid of the ruby_block completely
[2014-07-18 18:46:02 -0400] xUltra: I'm trying to enforce /home/ user directory permissions. AFAIK this should work, but it isn't :(
[2014-07-18 18:46:05 -0400] xUltra: http://paste.ubuntu.com/7815745/ - Any ideas?
[2014-07-18 18:46:11 -0400] lamont_oc: set it all up at compile time
[2014-07-18 18:46:27 -0400] lamont_oc: then change the execute resource into an rpm_package resource
[2014-07-18 18:46:32 -0400] zts: eh, does rpm_package's source parameter accept a URL now?
[2014-07-18 18:47:15 -0400] ambientsound: seems like http://downloads.getchef.com/chef-dk/linux/ is bugging.
[2014-07-18 18:47:21 -0400] lamont_oc: if it doesnt, you can use a remote_file to feed to rpm_package (and you get etags and last-modified support)
[2014-07-18 18:47:31 -0400] ambientsound: CSS is broken, and it seems like it is supposed to be powered by angularJS
[2014-07-18 18:47:33 -0400] ambientsound: :p
[2014-07-18 18:48:14 -0400] shlant: zts: sorry you are right, I thought he has already downloaded the package locally
[2014-07-18 18:48:23 -0400] shlant: similar URL's :p
[2014-07-18 18:50:06 -0400] lamont_oc: ambientsounds: i think the links are supposed to be http://downloads.getchef.com/chef-dk/ubuntu or http://downloads.getchef.com/chef-dk/redhat
[2014-07-18 18:52:22 -0400] lamont_oc: those links are also kinda funny because you can see the moustache tempated angularjs variables re-rendering
[2014-07-18 18:56:42 -0400] gondoi: I see there is a centos 7 packer file in bento.. any idea when it will be uploaded?
[2014-07-18 18:57:31 -0400] heathsnow: shlant: I've completed a vmware_workstation cookbook that is going public soon.  perhaps I'll add a library and consume it as an exercise of the library style cookbook.
[2014-07-18 18:58:28 -0400] shlant: heathsnow: teach by doing! right on
[2014-07-18 19:07:40 -0400] phelms: is it possible to call yum_packages dynamically ?
[2014-07-18 19:12:26 -0400] josephholsten: anyone getting redirect errors from supermarket?
[2014-07-18 19:13:00 -0400] josephholsten: it looks like the http: uri is redirecting to https:, which open-uri doesn't <3
[2014-07-18 19:14:16 -0400] josephholsten: hmm, I'm using berks 2.0.16, perhaps it's fixed in a newer version
[2014-07-18 19:15:36 -0400] xUltra: any ideas?
[2014-07-18 19:15:57 -0400] jtimberman: josephholsten: you need 2.0.18
[2014-07-18 19:16:02 -0400] josephholsten: awesome
[2014-07-18 19:16:10 -0400] jtimberman: josephholsten: but really you'll want to upgrade to 3 :)
[2014-07-18 19:16:14 -0400] josephholsten: and I probobly need 3
[2014-07-18 19:16:18 -0400] josephholsten: yes
[2014-07-18 19:16:21 -0400] jtimberman: since 2 isn't maintained anymore
[2014-07-18 19:16:30 -0400] jtimberman: (other than critical bug fixes :))
[2014-07-18 19:16:53 -0400] jtimberman: and you should install it using chefdk, as it will include all the libgecode goodness.
[2014-07-18 19:17:44 -0400] Eulipion: dk is amazeballs
[2014-07-18 19:17:56 -0400] jtimberman: Truestory.jpg
[2014-07-18 19:18:13 -0400] jtimberman: I'm quite enjoying it, and use its ruby as my environment, since chef dev is really what i use ruby for anyway :)
[2014-07-18 19:18:29 -0400] josephholsten: yes, I really just need to take the hours and manually verify that the berksfile.lock upgraded correctly and do it
[2014-07-18 19:18:44 -0400] Eulipion: jtimberman: im gonna try writing a chefdk tutorial where i provide the chefspec and u need to write the cookbooks.  test driven tutorial
[2014-07-18 19:18:57 -0400] josephholsten: I miss librarian, which actually understood how to respect lockfiles in the first release
[2014-07-18 19:19:04 -0400] jtimberman: josephholsten: i blew away berksfile.lock and just let v3 generate it :)
[2014-07-18 19:19:29 -0400] jtimberman: there's a lot of improvement in berks v3 lockfiles
[2014-07-18 19:19:35 -0400] jtimberman: Eulipion: nice!
[2014-07-18 19:19:47 -0400] jtimberman: Eulipion: beware it will be outdated 37 seconds after you post it ;)
[2014-07-18 19:19:51 -0400] Eulipion: haha
[2014-07-18 19:20:03 -0400] jtimberman: I get emails and comments about my blog posts all the time being outdated.
[2014-07-18 19:20:04 -0400] josephholsten: we still use an old-school combined repo, and have a few things locked for safety, so the risk is non-minimal
[2014-07-18 19:20:22 -0400] josephholsten: jtimberman: been meaning to send you one about computers
[2014-07-18 19:20:45 -0400] jtimberman: josephholsten: *nod*. We have a chef-repo w/ ./cookbooks that has a TON of forked community cookbooks from years ago, and then newer cookbooks that are separate repos, or newer published community versions
[2014-07-18 19:20:55 -0400] josephholsten: cuz your posts are really all about how to computer vLast
[2014-07-18 19:20:56 -0400] jtimberman: josephholsten: no one knows how computers work
[2014-07-18 19:20:59 -0400] shlant: anyone know why port is ending up on the same line as host with this template?
[2014-07-18 19:20:59 -0400] shlant: <%= @rails_env =%>:
[2014-07-18 19:21:00 -0400] shlant:   host: <%= @servers[0] =%>
[2014-07-18 19:21:00 -0400] shlant:   port: 6379
[2014-07-18 19:21:17 -0400] jtimberman: shlant: remove the = in the closing tag =%>
[2014-07-18 19:21:30 -0400] josephholsten: I've been trying so hard to rebase our forks up to community cookbooks
[2014-07-18 19:21:31 -0400] shlant: jtimberman: thought so. Thanks!
[2014-07-18 19:21:36 -0400] jtimberman: in both of the rails_env and servers lines
[2014-07-18 19:21:39 -0400] josephholsten: but then there's the new mysql cookbook
[2014-07-18 19:21:52 -0400] jtimberman: josephholsten: we're fortunately phasing out mysql entirely
[2014-07-18 19:22:00 -0400] shlant: jtimberman: there IS a newline after rails_env why...
[2014-07-18 19:22:17 -0400] jtimberman: spite and reasons
[2014-07-18 19:22:23 -0400] shlant: good enough for me
[2014-07-18 19:22:26 -0400] shlant: :0
[2014-07-18 19:22:37 -0400] jtimberman: erb is a mystery. i cargo cult the patterns i learned years ago
[2014-07-18 19:22:55 -0400] jtimberman: :)
[2014-07-18 19:23:05 -0400] gchristensen: erb is a strange module :)
[2014-07-18 19:23:19 -0400] zts: I think it only eats the newline if it's the last thing on the line (the rails_env one is followed by a colon)
[2014-07-18 19:23:58 -0400] shlant: and does this make sense?
[2014-07-18 19:23:59 -0400] shlant:  <%- if @servers -%>
[2014-07-18 19:23:59 -0400] shlant:     <%- @servers.each do |server| -%>
[2014-07-18 19:24:00 -0400] shlant:     - <%- server %>
[2014-07-18 19:24:00 -0400] shlant:     <%- end -%>
[2014-07-18 19:24:01 -0400] shlant:   <%- else -%>
[2014-07-18 19:24:01 -0400] shlant:     - localhost:11211
[2014-07-18 19:24:01 -0400] shlant:   <%- end -%>
[2014-07-18 19:24:06 -0400] zts: it'd make more sense in a gist :)
[2014-07-18 19:24:09 -0400] josephholsten: jtimberman: I'm quite acquainted to reasons
[2014-07-18 19:24:14 -0400] shlant: zts: yea sorry
[2014-07-18 19:24:23 -0400] jtimberman: josephholsten: i've been teaching my son about them.
[2014-07-18 19:24:34 -0400] jtimberman: josephholsten: "Why isn't your room clean?" "Reasons."
[2014-07-18 19:24:34 -0400] josephholsten: you should also teach him about mongo
[2014-07-18 19:24:35 -0400] spheromak: shlant: the -%> is like echo -n :)
[2014-07-18 19:24:36 -0400] jtimberman: so it backfires.
[2014-07-18 19:24:58 -0400] jtimberman: zts: I believe your'e right about that.
[2014-07-18 19:25:11 -0400] spheromak:   nfi what <%-
[2014-07-18 19:25:12 -0400] rsavage: anyone know how to do something like this in Chef Kine?
[2014-07-18 19:25:14 -0400] spheromak: again erb :\
[2014-07-18 19:25:19 -0400] rsavage:  sudo knife ssh 'role:backend and environment:ALIEN' 'hostname'
[2014-07-18 19:25:21 -0400] josephholsten: spheromak: an abomination invented by people who don't know how to use tools?
[2014-07-18 19:25:29 -0400] josephholsten: cf printf(1)
[2014-07-18 19:25:32 -0400] jtimberman: rsavage: Chef Kine?
[2014-07-18 19:25:36 -0400] rsavage: knife
[2014-07-18 19:25:36 -0400] spheromak: josephholsten: lol
[2014-07-18 19:25:49 -0400] rsavage: sorry, I am a typo king
[2014-07-18 19:26:15 -0400] jtimberman: rsavage: do you mean in your own custom plugin, how to use other knife sub commands?
[2014-07-18 19:26:27 -0400] viglesias: rsavage: i think you need chef_environment:ALIEN
[2014-07-18 19:27:07 -0400] rsavage: jtimberman: no sorry, I am using knife ssh, and I want to only run it on remote nodes that match a complex query... not just one query... I want to query for "something:A and something:B"
[2014-07-18 19:28:32 -0400] jtimberman: rsavage: ah - make your AND, OR, NOT parts of the query capitalized
[2014-07-18 19:28:53 -0400] jtimberman: knife ssh uses chef search, and chef search is based on SOLR Lucene.
[2014-07-18 19:29:05 -0400] jtimberman: (if you want to look up query building rules in the lucene documentation)
[2014-07-18 19:30:20 -0400] rsavage: jtimberman: cool it worked thanks!
[2014-07-18 19:30:34 -0400] jtimberman: rsavage: :D
[2014-07-18 19:33:34 -0400] cp_: Question: I am hosting my own chef server.  I just upgraded one of my nodes from Ubuntu 12.10 to Ubuntu 14.04 LTS.  At each step of the upgrade, chef-client ran perfectly until the last jump to 14.04.  Now it says that chef-client is not installed.  I don't know what to do to fix this.  Suggestions?
[2014-07-18 19:36:23 -0400] coderanger: cp_: Re-install the omnibus deb
[2014-07-18 19:36:33 -0400] coderanger: cp_: It has some post-install steps that need to re-run
[2014-07-18 19:36:53 -0400] coderanger: cp_: Also a reminder that the chef-client and chef-server installations are totally unrelated
[2014-07-18 19:37:31 -0400] icarus_: to use this rsyslog cookbook as an example: https://github.com/opscode-cookbooks/rsyslog
[2014-07-18 19:37:53 -0400] icarus_: how might one specify node['rsyslog']['tls_ca_file'] attribute via a role?
[2014-07-18 19:38:11 -0400] icarus_: i can think in terms of files/templates
[2014-07-18 19:38:33 -0400] coderanger: icarus_: override_attributes({'rsyslog' => {'tls_ca_file' => 'something}})
[2014-07-18 19:38:57 -0400] jtimberman: or use default_attributes instead of override :)
[2014-07-18 19:39:13 -0400] icarus_: for the 'something' part, if i put a crt in a files/default/server.crt directory
[2014-07-18 19:39:23 -0400] icarus_: how would i call that file to be used?
[2014-07-18 19:39:49 -0400] jtimberman: icarus_: you'd use a cookbook_file resource in a recipe
[2014-07-18 19:40:03 -0400] jkline: Hi!. I'm calling Chef::Application.fatal!("foobar") from my attributes/default.rb. I expect the chef run to end with that foobar error message. Instead I get a recipe compile error on that line.
[2014-07-18 19:40:11 -0400] icarus_: jtimberman: aaah i see
[2014-07-18 19:40:28 -0400] bougyman: I don't think you can call that from an attributes file.
[2014-07-18 19:40:33 -0400] jkline: my question is: wat?
[2014-07-18 19:41:10 -0400] phelms: how would I delete a multi demensional attribute?
[2014-07-18 19:41:22 -0400] coderanger: jkline: attr files are evaluated at compile time, so yes, its a compile error
[2014-07-18 19:41:23 -0400] icarus_: so i basically would make a cookbook with a recipe that includes a resource i can fall as an attribute with node['blah_cookbook']['recipe_resource']
[2014-07-18 19:41:37 -0400] coderanger: phelms: Can you be more specific?
[2014-07-18 19:41:40 -0400] cp_: @coderanger thank you very much.  I'm working on it now.
[2014-07-18 19:41:49 -0400] jkline: got it. so that is the expected behavior then. Works for me. Thanks
[2014-07-18 19:42:18 -0400] icarus_: example of what i mean: override_attributes({'rsyslog' => {'tls_ca_file' => 'node['blah_cookbook']['recipe_resource']'}})
[2014-07-18 19:42:48 -0400] phelms: coderanger: I have a custom attribute "UPDATES" - I created a recipe that runs a loop through the UPDATES .. once the yum_package or apt_package does its thing (on a scheduled time) I want to run n.delete("UPDATES[0]") or something along those lines I guess
[2014-07-18 19:44:02 -0400] phelms: coderanger: https://gist.github.com/Phelms215/654280dfb51f2a391e62
[2014-07-18 19:44:49 -0400] pk_: Is it possible to pass a hashmap to an lwrp as long as I handle it correctly in the initialize method of the resource?
[2014-07-18 19:44:59 -0400] coderanger: phelms: That is terrifying code :-(
[2014-07-18 19:45:17 -0400] coderanger: pk_: yes, but initialize isn't involved, just make and attribute
[2014-07-18 19:45:28 -0400] phelms: coderanger: Why do you say that? We cannot just let Chef update automatically
[2014-07-18 19:46:08 -0400] coderanger: phelms: One sec
[2014-07-18 19:46:33 -0400] coderanger: phelms: So the way chef works is based around the idea of idempotent convergence, you state the desired final state of the system and chef makes it become that
[2014-07-18 19:47:02 -0400] coderanger: phelms: So rather than some kind of delete operation like you have here, just make a hash of package:version pairs and let chef apply that
[2014-07-18 19:47:24 -0400] coderanger: phelms: Also never call node.save in your own code, its does really bad things with search()
[2014-07-18 19:47:41 -0400] coderanger: specifically search can now find nodes that never successfully converged and might be broken
[2014-07-18 19:48:08 -0400] phelms: coderanger: I thought I saw node.save in the chef docs
[2014-07-18 19:48:11 -0400] pk_: coderanger: like so? (note: this is a "custom" lwrp) http://pastebin.com/tp2jWZLT
[2014-07-18 19:48:25 -0400] coderanger: phelms: How this code should look: node['updates'].each do |pkg, ver| package pkg do version ver end end
[2014-07-18 19:48:28 -0400] jtimberman: phelms: node.save is a thing you *can* do but not necessarily something you *should* do
[2014-07-18 19:49:04 -0400] coderanger: pk_: Ahh, the inside of the loop should be "send(key, value)"
[2014-07-18 19:49:34 -0400] coderanger: node.save is something you should consider off limits until you know enough that you are okay with breaking the rules
[2014-07-18 19:49:46 -0400] coderanger: but it is definitely still a rule, even when being broken :)
[2014-07-18 19:50:10 -0400] cheeseplus: only coderanger can run node.save and only he knows why ;)
[2014-07-18 19:50:11 -0400] pk_: coderanger: that looks promising...will try...thanks ; was totally going down the more painful, don't quite understand path
[2014-07-18 19:50:59 -0400] jkline: coderangerfacts.com?
[2014-07-18 19:51:06 -0400] shlant: +1
[2014-07-18 19:51:17 -0400] coderanger: cheeseplus: chef_server_rest.put_rest("nodes/#{node.name}", chef_server_rest.get_rest("nodes/#{node.name}").merge(...))
[2014-07-18 19:51:20 -0400] coderanger: trololol
[2014-07-18 19:51:23 -0400] shlant: noahtidbits.com
[2014-07-18 19:52:04 -0400] cheeseplus: lol
[2014-07-18 19:52:57 -0400] jtimberman: cheeseplus: I'll put node.save in a recipe right now to spite you!
[2014-07-18 19:53:10 -0400] cheeseplus: I DARE YOU
[2014-07-18 19:53:13 -0400] shlant: node.saves all around because reasons!
[2014-07-18 19:54:20 -0400] jtimberman: % ag 'node.save' cookbooks/*/recipes/*|wc -l # => 10
[2014-07-18 19:55:05 -0400] Eulipion: anyone know how to access an encrypted data bag from vagrant/chef-solo?
[2014-07-18 19:55:40 -0400] phelms: coderanger: I get what you are saying and am definatley working towards being able to globally update versions of packages.. currently management wants updates to only occur on a schedule. thus the current script. Basically my method was to do this. Until I can get enough "package" information into our system and then loop through packages and create more defined server roles and update as required
[2014-07-18 19:55:56 -0400] pk_: I can show you an example using kitchen and encrypted data bags :)
[2014-07-18 20:24:40 -0400] acqant: can you somehow point berks to a knife config file?  Why seperate config files?
[2014-07-18 20:27:32 -0400] pk_: acqant: Doesn't berks already look at your knife config by default? Or are you saying you want to point at a specific instance of a knife config?
[2014-07-18 20:27:48 -0400] Damm: berks has it's own config file
[2014-07-18 20:28:07 -0400] acqant: I want to point it elsewhere now
[2014-07-18 20:28:08 -0400] pk_: if you create one...
[2014-07-18 20:28:26 -0400] Damm: it should look in .chef/berkshelf.json?
[2014-07-18 20:28:39 -0400] Damm: or do we need .berkshelf in chef-repo?
[2014-07-18 20:28:42 -0400] Damm: and put config.json there
[2014-07-18 20:28:46 -0400] Damm: s/berkshelf.json/config.json
[2014-07-18 20:28:49 -0400] acqant: if you don't have one it seems to pick up knife cfg
[2014-07-18 20:29:00 -0400] Damm: new feature? hasn't in the past
[2014-07-18 20:29:10 -0400] pk_: dunno if new...docs have it now though
[2014-07-18 20:29:17 -0400] pk_: knife config unless ~/.berkshelf/config.json
[2014-07-18 20:29:22 -0400] Damm: i can't berks upload
[2014-07-18 20:29:24 -0400] Damm: without it
[2014-07-18 20:29:32 -0400] acqant: I'm on 3.1.2 and no berks configure command or config.json
[2014-07-18 21:01:09 -0400] shlant: the newrelic cookbook metadata recommends curl. Why do I get "Dependency 'curl' was not found. Please make sure it is in your Berksfile, and then run `berks install` to download and install the missing dependencies."?
[2014-07-18 21:01:31 -0400] shlant: recommends =/= required right?
[2014-07-18 21:03:10 -0400] shlant: curl has SO many deps
[2014-07-18 21:03:11 -0400] strictlyb: any heavy berkshelf users here?
[2014-07-18 21:03:24 -0400] shlant: strictlyb: how heavy can you get
[2014-07-18 21:03:29 -0400] strictlyb: well,
[2014-07-18 21:03:52 -0400] strictlyb: i use it for all my stuff using the application / library structure.
[2014-07-18 21:03:57 -0400] strictlyb: all my corp cookbooks i.e
[2014-07-18 21:04:12 -0400] strictlyb: cookbook-base are in github.com/ORG/cookbook-base
[2014-07-18 21:04:26 -0400] strictlyb: all deps obviously pull down to ~/.berkshelf/cookbooks
[2014-07-18 21:04:29 -0400] strictlyb: my question is
[2014-07-18 21:04:53 -0400] strictlyb: how do people handle the ~/chef-repo/Berksfile for all of those.
[2014-07-18 21:04:54 -0400] strictlyb: like
[2014-07-18 21:05:12 -0400] strictlyb: right now i have all my repos that are corp / app / library wrappers in chef-repo/cookbooks/
[2014-07-18 21:05:23 -0400] strictlyb: i.e chef-repo/cookbooks/cookbook-base
[2014-07-18 21:05:33 -0400] strictlyb: i.e chef-repo/cookbooks/cookbook-app1
[2014-07-18 21:05:33 -0400] strictlyb: i.e chef-repo/cookbooks/cookbook-app2
[2014-07-18 21:05:45 -0400] shlant: strictlyb: in order for that pattern to work effectively, you should have each cookbook in its own repo
[2014-07-18 21:05:51 -0400] shlant: I have the same setup as you right now
[2014-07-18 21:05:51 -0400] strictlyb: it is
[2014-07-18 21:05:57 -0400] strictlyb: they are all in there own repo,
[2014-07-18 21:05:59 -0400] strictlyb: my question is
[2014-07-18 21:06:09 -0400] strictlyb: how do i structure my Berksfile inside the chef-repo
[2014-07-18 21:06:17 -0400] strictlyb: so that any engineer coud pull down the chef-repo a
[2014-07-18 21:06:23 -0400] strictlyb: and run a berks in the chef-repo root
[2014-07-18 21:06:27 -0400] shlant: strictlyb: you JUST said they are in
[2014-07-18 21:06:27 -0400] shlant: i.e chef-repo/cookbooks/cookbook-base
[2014-07-18 21:06:28 -0400] shlant: 2:10
[2014-07-18 21:06:28 -0400] shlant: i.e chef-repo/cookbooks/cookbook-app1
[2014-07-18 21:06:29 -0400] shlant: 2:10
[2014-07-18 21:06:29 -0400] shlant: i.e chef-repo/cookbooks/cookbook-app2
[2014-07-18 21:06:31 -0400] strictlyb: right
[2014-07-18 21:06:34 -0400] shlant: that is the SAME repo
[2014-07-18 21:06:36 -0400] strictlyb: but those are repos as stated eariler.
[2014-07-18 21:06:44 -0400] strictlyb: there just there they mean nothing
[2014-07-18 21:07:10 -0400] strictlyb: [17:04:12]  <strictlyb> cookbook-base are in github.com/ORG/cookbook-base
[2014-07-18 21:07:20 -0400] strictlyb: my question is
[2014-07-18 21:07:24 -0400] strictlyb: how should i be handoing that
[2014-07-18 21:07:31 -0400] strictlyb: when i do something like
[2014-07-18 21:08:02 -0400] strictlyb: cookbook 'base', :github => '.ORG/cookbook-base'
[2014-07-18 21:08:36 -0400] strictlyb: it would put it in ~/.berkshelf/cookbooks/cookbook-base-THATCOMMITID
[2014-07-18 21:08:47 -0400] loki97123: hey chef employees, whats the state of definitions
[2014-07-18 21:08:57 -0400] loki97123: how soon till ya'll outlaw them entirely
[2014-07-18 21:09:09 -0400] strictlyb: so i guess im not 100% sure as to how i should be handling this if you follow what im saying,
[2014-07-18 21:09:16 -0400] shlant: strictlyb: you might be looking for berks vendor
[2014-07-18 21:09:20 -0400] strictlyb: berks vendor
[2014-07-18 21:09:23 -0400] strictlyb: hm
[2014-07-18 21:09:25 -0400] shlant: which puts all the cookbooks in berks-cookbooks
[2014-07-18 21:09:30 -0400] shlant: in the chef-repo
[2014-07-18 21:10:04 -0400] shlant: strictlyb:  having all cookbooks in their own repo and referencing them with one Berksfile is best practice
[2014-07-18 21:10:09 -0400] shlant: if that's what you're asking
[2014-07-18 21:10:11 -0400] strictlyb: it is,
[2014-07-18 21:10:21 -0400] strictlyb: i jsut wasnt sure how to have them get populated properly
[2014-07-18 21:10:28 -0400] loki97123: Eulipion   there is a vagrant piece where you pass in your encryption key, and then on the databag side you include that as part of the vagrant databag path
[2014-07-18 21:10:35 -0400] shlant: strictlyb: not sure what you mean by "populated"
[2014-07-18 21:10:36 -0400] strictlyb: by putting all my "vendor" cookbooks inside ~/chef-repo/cookbooks/$NAME
[2014-07-18 21:10:38 -0400] strictlyb: so
[2014-07-18 21:10:58 -0400] strictlyb: ill try one more time and try to explain better
[2014-07-18 21:11:00 -0400] strictlyb: so for instance
[2014-07-18 21:11:02 -0400] shlant: strictlyb: there isn't really a reason to vendor the cookbooks unless you're using chef-solo I think
[2014-07-18 21:11:04 -0400] loki97123: Eulipion i'd say make a vagrant encryption key and and vagrant bag that you only encrypt with that vagrant key
[2014-07-18 21:11:48 -0400] loki97123: jtimberman j^2 any say on definitions?
[2014-07-18 21:11:50 -0400] strictlyb: i have organization cookbooks such as cookbook-base, cookbook-app1 , cookbook-app2
[2014-07-18 21:11:56 -0400] Eulipion: loki97123: thx.  do u happen to have any examples or docs?  im trying to figure out knife-solo_data_bag
[2014-07-18 21:11:58 -0400] shlant: uh huh
[2014-07-18 21:11:58 -0400] strictlyb: they are there own repo
[2014-07-18 21:12:00 -0400] shlant: yep
[2014-07-18 21:12:02 -0400] strictlyb: now,
[2014-07-18 21:12:13 -0400] strictlyb: right now i by hand pulled them down to ~/chef-repo/cookbooks
[2014-07-18 21:12:18 -0400] strictlyb: so i have
[2014-07-18 21:12:29 -0400] loki97123: Eulipion i'll see if i got my vagrant sample 3 minutes please
[2014-07-18 21:12:37 -0400] strictlyb:  ~/chef-repo/cookbooks/{cookbook-base,app1,app2,app3}
[2014-07-18 21:12:40 -0400] shlant: strictlyb: what is the reason for needing to pull them all down?
[2014-07-18 21:12:41 -0400] Eulipion: loki97123: awesome, thx
[2014-07-18 21:12:46 -0400] strictlyb: well,
[2014-07-18 21:13:03 -0400] rocky: is there a 32-bit chef client for windows?
[2014-07-18 21:13:07 -0400] strictlyb: they are always being updated,
[2014-07-18 21:13:14 -0400] strictlyb: they are my corp app cookbooks
[2014-07-18 21:13:34 -0400] strictlyb: now, all the berks dependencies are put in there proper place ~/.berkshelf
[2014-07-18 21:13:38 -0400] strictlyb: i guess my question is,
[2014-07-18 21:13:51 -0400] loki97123: Eulipion chef.data_bags_path  = './data_bags'
[2014-07-18 21:13:52 -0400] loki97123:   chef.encrypted_data_bag_secret_key_path = "#{ENV['HOME']}/.chef/encrypted_data_bag_secret"
[2014-07-18 21:13:52 -0400] strictlyb: how do you hanlde this same style what do you do.
[2014-07-18 21:14:10 -0400] strictlyb: like i have a guy starting
[2014-07-18 21:14:23 -0400] strictlyb: and i want to be able to chckout github.com/ORG/chef-repo
[2014-07-18 21:14:29 -0400] strictlyb: and run berks to populate everything
[2014-07-18 21:14:48 -0400] loki97123: you can name the secret anything you want, and the key can be anything you want
[2014-07-18 21:14:56 -0400] shlant: strictlyb: but again, why do you want to "populate" everything?
[2014-07-18 21:15:05 -0400] shlant: what is the purpose of having your cookbooks locally in your chef-rpo?
[2014-07-18 21:15:08 -0400] loki97123: when i tested out this, i put "vagrant key" in the vagrant key
[2014-07-18 21:15:12 -0400] strictlyb: thats what im asking
[2014-07-18 21:15:25 -0400] strictlyb: should they just not be? and be in a repodir/ or something
[2014-07-18 21:15:30 -0400] loki97123: shlant, we forked some stuf and have a ton of wrapper recipes
[2014-07-18 21:15:36 -0400] loki97123: and
[2014-07-18 21:15:46 -0400] loki97123: we can not share back to the world
[2014-07-18 21:15:47 -0400] loki97123: and
[2014-07-18 21:15:53 -0400] loki97123: we can't pull in from the world
[2014-07-18 21:15:55 -0400] strictlyb: otherwise its like
[2014-07-18 21:15:56 -0400] loki97123: security
[2014-07-18 21:15:59 -0400] loki97123: you kno
[2014-07-18 21:16:07 -0400] strictlyb: lets say i want to work on some cookbook and im new,
[2014-07-18 21:16:14 -0400] Eulipion: loki97123: thx, gonna give that a try
[2014-07-18 21:16:20 -0400] loki97123: welcome
[2014-07-18 21:16:27 -0400] strictlyb: how do i know what repos im looking for would be nice to populate everything even if its used or not you know what i mean
[2014-07-18 21:16:37 -0400] strictlyb: just keep the old chef-repo style for my application cookbooks
[2014-07-18 21:16:43 -0400] strictlyb: or does that not make sense
[2014-07-18 21:16:45 -0400] shlant: strictlyb: if you need to work on a cookbook, you would pull that cookbooks repo.
[2014-07-18 21:16:49 -0400] loki97123: ooh shlant did you discuss setting up the api.berks thing
[2014-07-18 21:16:55 -0400] strictlyb: i see,
[2014-07-18 21:17:03 -0400] loki97123: cause i want to use that here for multiple "repos"
[2014-07-18 21:17:19 -0400] shlant: loki97123: sorry, what's the question?
[2014-07-18 21:17:50 -0400] loki97123: shlant, you're talking about berks, are you discussing setting up the latest bits with the api.berks server
[2014-07-18 21:18:18 -0400] shlant: loki97123: uhhhh I don't think so
[2014-07-18 21:18:28 -0400] shlant: also not sure what you mean by the latest bits :)
[2014-07-18 21:18:29 -0400] loki97123: oh sorry, yeah berks 3 now uses this
[2014-07-18 21:18:30 -0400] loki97123: https://github.com/berkshelf/berkshelf-api
[2014-07-18 21:19:01 -0400] loki97123: allow me to introduce myself, i come from left-field
[2014-07-18 21:19:06 -0400] shlant: haha
[2014-07-18 21:19:06 -0400] loki97123: :D
[2014-07-18 21:19:22 -0400] shlant: I don't think much is different to the user
[2014-07-18 21:19:27 -0400] shlant: other than berksfile have source "https://api.berkshelf.com"
[2014-07-18 21:19:47 -0400] loki97123: the berksfile api thing though can be run local from within an org/company
[2014-07-18 21:19:54 -0400] loki97123: and point at the "repos"
[2014-07-18 21:20:14 -0400] loki97123: then your berks files have source "https://some.local.thing"
[2014-07-18 21:20:25 -0400] shlant: strictlyb: the only reason you would want to "populate" your chef-repo with your berksfile is if you were using vagrant and chef-solo i'm pretty sure
[2014-07-18 21:20:28 -0400] loki97123: jbut this is the weeds for what you are working on
[2014-07-18 21:21:02 -0400] shlant: loki97123: oh you're talking about private berkshelf sources?
[2014-07-18 21:23:13 -0400] shlant: like berks-api.company.com
[2014-07-18 21:23:34 -0400] shlant: https://github.com/berkshelf/berkshelf-api
[2014-07-18 21:27:21 -0400] strictlyb: `zsszcxok ty
[2014-07-18 21:27:24 -0400] strictlyb: ok ty
[2014-07-18 21:27:30 -0400] strictlyb: i thought soo
[2014-07-18 21:27:35 -0400] strictlyb: just wasnt certain
[2014-07-18 21:28:12 -0400] rocky: trying to bootstrap some windows 8.1 machines... knife-windows is trying to get the installer from here: https://www.opscode.com/chef/download?p=windows&pv=2012&m=i686  .. getting a 404 ... any ideas?
[2014-07-18 21:29:52 -0400] Eulipion: loki97123: DEPRECATION: Chef encrypted_data_bag_secret has no effect anymore.         it's not even making the data_bag_path ;(
[2014-07-18 21:30:41 -0400] shlant: Eulipion:  you are trying to use encrypted data bags in vagrant
[2014-07-18 21:30:42 -0400] shlant: ?
[2014-07-18 21:31:10 -0400] Eulipion: i dont really care about the encryption right now, just want to get data bags working in vagrant
[2014-07-18 21:32:23 -0400] shlant: Eulipion: what does your vagrantfile look like?
[2014-07-18 21:35:16 -0400] Eulipion: shlant: http://pastebin.com/DVuy8gC9
[2014-07-18 21:37:08 -0400] shlant: Eulipion: and are you referencing a data bag in your recipe?
[2014-07-18 21:39:50 -0400] shlant: friggin vim and it's newline adding. Always messing with me
[2014-07-18 21:50:43 -0400] Eulipion: shlant: http://pastebin.com/kU9g2sqG
[2014-07-18 21:50:57 -0400] Eulipion: maybe i need to specify a directory to rsync?
[2014-07-18 21:52:17 -0400] shlant: Eulipion: you can't use encrypted data bags with chef-solo
[2014-07-18 21:52:22 -0400] shlant: from what I know
[2014-07-18 21:52:35 -0400] shlant: and Chef::EncryptedDataBagItem.load requires 3 arguements
[2014-07-18 21:52:46 -0400] shlant: http://docs.opscode.com/chef/essentials_data_bags.html#store-keys-on-nodes
[2014-07-18 21:59:55 -0400] pk_: coderanger: send(k,v) is straight $$
[2014-07-18 22:00:50 -0400] coderanger: pk_: ?
[2014-07-18 22:01:09 -0400] pk_: send kv pairs to lwrp
[2014-07-18 22:01:57 -0400] coderanger: pk_: Ahh, thats just how you call a method dynamically in Ruby
[2014-07-18 22:10:53 -0400] Eulipion: shlant: ok, what about passing non-encrypted dbags?
[2014-07-18 22:12:49 -0400] shlant: Eulipion: admins = data_bag('admins')
[2014-07-18 22:13:10 -0400] Eulipion: so, they jfw?
[2014-07-18 22:13:51 -0400] shlant: hweh?
[2014-07-18 22:14:32 -0400] Eulipion: non encrypted dbags just work?  no special vagrant config?
[2014-07-18 22:17:09 -0400] shlant: Eulipion: the chef.data_bags_path puts them where the recipe can find them I think
[2014-07-18 22:18:40 -0400] Eulipion: so im thinking i edit the recipe to check if it's chef-solo, and if it is grab the aws creds from json provided from the vagrantfile, sound like a good route?
[2014-07-18 22:19:33 -0400] Eulipion: except i dont want the creds in the vagrantfile, in git
[2014-07-18 22:20:45 -0400] coderanger: Eulipion: use env vars
[2014-07-18 22:25:00 -0400] Eulipion: coderanger: w0rd
[2014-07-18 22:35:20 -0400] banisterfiend: hi, i have the following error http://cl.ly/image/1l1w1a2a1q1A
[2014-07-18 22:35:52 -0400] banisterfiend: i'm following along with the "reliably deploying rails applications" book, and i'm stuck at this step -- is it safe to proceed or is this a failure?
[2014-07-18 22:37:00 -0400] coderanger: banisterfiend: Your run list is empty, so chef is just doing nothing
[2014-07-18 22:37:12 -0400] coderanger: Not an error per se, but probably not what you meant
[2014-07-18 22:37:49 -0400] banisterfiend: coderanger hmm, i'm just following along exactly with the instructions in the 'reliably deploying rails apps' book, nothing has been explained yet i'm still at the "5 minutes server" section. So, the instructions are clearly flawed?
[2014-07-18 22:39:31 -0400] coderanger: I'm unfamiliar with the book, sorry
[2014-07-18 22:41:20 -0400] banisterfiend: coderanger here is my MY_IP.json file: https://gist.github.com/banister/8e6c3f21fff3380da260
[2014-07-18 22:41:36 -0400] banisterfiend: (the passwords are just randomly generated, not sharing anything important here)
[2014-07-18 22:41:41 -0400] banisterfiend: coderanger is anything clearly wrong with that?
[2014-07-18 22:43:09 -0400] coderanger: banisterfiend: Hmm, it is warning that your cookbooks and roles paths don't exist, I would look in to that
[2014-07-18 22:43:31 -0400] coderanger: banisterfiend: Some related: If you are just getting started with chef, I strongly recommend following the learnchef.com tutorial first
[2014-07-18 22:44:17 -0400] banisterfiend: coderanger i am, but i'm actually going through a tutorial that as a "5 mins server" part first, just to show off how wonderful and easy chef is so you're motivated to learn/read the rest of the tutorial ;)
[2014-07-18 22:44:26 -0400] banisterfiend: failing at that demonstration so far heh heh
[2014-07-18 22:45:21 -0400] coderanger: Yeah, to paraphrase generations of Eve Online players: "Chef has a learning curve like running head-first in to a brick wall"
[2014-07-18 22:45:33 -0400] coderanger: Amazingly powerful once you learn it, but far from easy to get there
[2014-07-18 22:45:56 -0400] banisterfiend: coderanger cool, it got way further this time, but now has a new error
[2014-07-18 22:46:06 -0400] banisterfiend: coderanger https://gist.github.com/banister/61d981c9d8e1bfe35b22
[2014-07-18 22:46:10 -0400] Damm: pfft you kids have it easy
[2014-07-18 22:46:16 -0400] Damm: try learning puppet back in 2008
[2014-07-18 22:46:38 -0400] Damm: the learning curve of Chef is a lot less than it used to be; and a lot better than puppet was for me
[2014-07-18 22:46:40 -0400] coderanger: banisterfiend: Try running that command yourself
[2014-07-18 22:47:04 -0400] Damm: the problem is sometimes we make simple problems overly complex and it makes it harder to automate in Chef
[2014-07-18 22:47:12 -0400] Damm: some people call that job security
[2014-07-18 22:47:20 -0400] banisterfiend: coderanger why would it fail do u think?
[2014-07-18 22:48:00 -0400] coderanger: banisterfiend: usually a timeout issue with sshd
[2014-07-18 22:48:41 -0400] Damm: or /etc/init.d/ssh doesn't work
[2014-07-18 22:48:41 -0400] banisterfiend: coderanger ah ok, so i can just rerun the command and it might work
[2014-07-18 22:48:49 -0400] Damm: and it should be going to an upstart service
[2014-07-18 22:48:53 -0400] Damm: that's a little tricky thing
[2014-07-18 22:49:19 -0400] Damm: some packages on ubuntu have both upstart and init.d and one just silently fails
[2014-07-18 22:49:24 -0400] Damm: which is great for chef
[2014-07-18 22:49:24 -0400] doug2: is there a way I could run the chef-client in dummy mode... don't apply run list and so on... just to get data into the chef server so a search will work?
[2014-07-18 22:49:38 -0400] coderanger: Yeah, 14.04 removed a lot of the old init.d compat
[2014-07-18 22:49:54 -0400] Damm: doug2, shef -z and then run node.save?
[2014-07-18 22:50:03 -0400] Damm: although you don't need to converge with a runlist
[2014-07-18 22:50:05 -0400] doug2: Damm: node.save from where?
[2014-07-18 22:50:11 -0400] Damm: run shef -z
[2014-07-18 22:50:14 -0400] coderanger: doug2: Not directly, since running the code can change attributes
[2014-07-18 22:50:16 -0400] doug2: oook....
[2014-07-18 22:50:25 -0400] coderanger: notable node['recipes'] now that that groks include_recipes
[2014-07-18 22:50:42 -0400] doug2: coderanger: i just want a way to get the node's ip into the server...
[2014-07-18 22:51:07 -0400] coderanger: doug2: You could write something yourself to call the API and update the node data, sure
[2014-07-18 22:51:40 -0400] doug2: coderanger: you mean pass the ip address directly in via the API?
[2014-07-18 22:51:45 -0400] coderanger: Yes
[2014-07-18 22:51:54 -0400] doug2: k, worth a look
[2014-07-18 22:52:03 -0400] doug2: coderanger: doable with knife?
[2014-07-18 22:52:26 -0400] Damm: chef-shell (a/k/a shef) fires up an irb mode
[2014-07-18 22:52:32 -0400] Damm: if you use -z it connects to the chef server
[2014-07-18 22:52:46 -0400] Damm: from there you can issue searches; or call node.save to populate a full node entry
[2014-07-18 22:52:54 -0400] coderanger: doug2: Probably
[2014-07-18 22:52:56 -0400] Damm: it will have whatever runlist you get from chef-server
[2014-07-18 22:52:58 -0400] coderanger: doug2: But I wouldn't
[2014-07-18 22:53:09 -0400] Damm: won't converge
[2014-07-18 22:53:14 -0400] doug2: coderanger: well, gotta get the IP in there somehow
[2014-07-18 22:53:16 -0400] Damm: won't do anything to the local system
[2014-07-18 22:53:28 -0400] coderanger: doug2: As I said, use the API and write a script yourself
[2014-07-18 22:53:33 -0400] doug2: Damm: your saying if I run chef-client -z, the client will send the ip to the server?
[2014-07-18 22:53:47 -0400] Damm: doug2, pay attention
[2014-07-18 22:53:51 -0400] Damm: doug2, _chef-shell_
[2014-07-18 22:54:14 -0400] z: chef-client -z will technically connect to a server. Just not the one you are thinking ;)
[2014-07-18 22:54:15 -0400] Damm: this is really one of your best tools as a chef developer
[2014-07-18 22:54:23 -0400] Damm: z, to yours?
[2014-07-18 22:54:41 -0400] z: in-memory one
[2014-07-18 22:54:55 -0400] z: chef-client -z involves Zero
[2014-07-18 22:55:04 -0400] banisterfiend: coderanger it appears that "etc/init.d/ssh start " does return a status code of 1. What does this mean exactly?
[2014-07-18 22:55:06 -0400] doug2: confused
[2014-07-18 22:55:11 -0400] banisterfiend: (i ran it as root on the server)
[2014-07-18 22:55:35 -0400] coderanger: banisterfiend: What OS is this on?
[2014-07-18 22:55:56 -0400] banisterfiend: coderanger 3.13.0-24-generic #46-Ubuntu SMP Thu Apr 10 19:11:08 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux
[2014-07-18 22:56:31 -0400] coderanger: banisterfiend: Thats just the kernel version, what actual OS :)
[2014-07-18 22:56:46 -0400] banisterfiend: coderanger ubuntu
[2014-07-18 22:56:47 -0400] z: Ubuntu 14.04 judging by the kernel
[2014-07-18 22:56:58 -0400] doug2: Damm: and chef-shell drops me into a prompt...
[2014-07-18 22:57:13 -0400] Damm: doug2, what kind of prompt?
[2014-07-18 22:57:25 -0400] Damm: z, ahh cool I have not used that
[2014-07-18 22:57:41 -0400] doug2: Damm: "chef >"
[2014-07-18 22:57:46 -0400] coderanger: banisterfiend: Yeah, would have to be using the upstart commands, your ssh cookbook is out of date unfortunately
[2014-07-18 22:58:00 -0400] banisterfiend: coderanger what's upstart commands?
[2014-07-18 22:58:01 -0400] doug2: Damm: it also appears to not have added details about the node to the server
[2014-07-18 22:58:11 -0400] Damm: doug2, good now type node.save
[2014-07-18 22:58:11 -0400] coderanger: banisterfiend: Either fix the cookbook or remove it and move on to another part of the tutorial :)
[2014-07-18 22:58:14 -0400] Damm: doug2, and then hit ^D to exit
[2014-07-18 22:58:23 -0400] coderanger: banisterfiend: `service sshd restart`
[2014-07-18 22:58:53 -0400] doug2: Damm: yep, worked... now for that pesky prompt...
[2014-07-18 22:59:52 -0400] banisterfiend: coderanger ah ok, where is the cookbook exactly?
[2014-07-18 23:00:06 -0400] coderanger: banisterfiend: That depends on the details of the tutorial you are following
[2014-07-18 23:00:24 -0400] coderanger: banisterfiend: If you pulled it in via Berkshelf, you would have to fork it on github
[2014-07-18 23:00:43 -0400] coderanger: banisterfiend: (unless its already fixed in master, which it might be since this issue rings some memory bells)
[2014-07-18 23:00:56 -0400] banisterfiend: coderanger thanks..
[2014-07-18 23:02:14 -0400] doug2: printf "node.save\nquit" | chef-shell -z :)
[2014-07-18 23:10:19 -0400] jtimberman: doug2: you can use knife exec, too.

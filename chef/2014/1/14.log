[2014-01-14 00:07:09 -0500] flagg0204: anyone run into the problem where chef-11 no longer writes anything llower than WARN to the log file?
[2014-01-14 00:28:56 -0500] segv: is there a way to use ldap auth on chef 11? to login, like privatechef/enterprise chef
[2014-01-14 00:46:31 -0500] chrisftw: confused about roles/recipes/run_lists  I think it is right, but it is not working  Anyone awesome can help really quick? - I pushed two new recipes to my hosted chef, (they are there), I added the recipes to the metadata file as dependancies (worked)  I created a role for the new recipes.  (created fine)  but when I run chef-client I get the message: The following cookbooks are required by the client but don't exist on the server: (2 new recipes)
[2014-01-14 00:47:32 -0500] carmstrong: chrisftw: you added the role to the node?
[2014-01-14 00:47:39 -0500] chrisftw: yes
[2014-01-14 00:48:01 -0500] carmstrong: and I am confused by your first sentence - which are cookbooks, and which are recipes?
[2014-01-14 00:48:03 -0500] chrisftw: carmstrong: it shows it in the expanded run list, but says it is missing the cookbooks.
[2014-01-14 00:48:26 -0500] carmstrong: can you gist the related info?
[2014-01-14 00:48:33 -0500] chrisftw: Oh sorry, I meant I added two cookbooks.  chef-rbenv, and chef-ruby_build
[2014-01-14 00:49:07 -0500] carmstrong: ok. so you uploaded the cookbooks to hosted chef, and added recipes within those cookbooks to a role. that role is assigned to that node?
[2014-01-14 00:49:20 -0500] carmstrong: you shouldn't need to touch metadata at all for that
[2014-01-14 00:49:58 -0500] carmstrong: are the dependencies being complained about those two cookbooks, or other cookbooks?
[2014-01-14 00:50:11 -0500] carmstrong: those two probably depend on other cookbooks that you'll have to upload to hosted Chef as well
[2014-01-14 00:50:12 -0500] chrisftw: The first attempt was to include_recipe  which was why I did that.
[2014-01-14 00:50:50 -0500] carmstrong: where are you using include_recipe though? so far, you haven't said anything about creating your own recipes
[2014-01-14 00:51:11 -0500] chrisftw: it is complaining that the two new ones are missing.  maybe I have to rename to cookbooks?
[2014-01-14 00:51:22 -0500] chrisftw: they downloaded as chef-rbenv
[2014-01-14 00:51:34 -0500] chrisftw: but said to require it as rbenv
[2014-01-14 00:51:50 -0500] carmstrong: the metadata.rb should have the name as "rbenv"
[2014-01-14 00:51:54 -0500] carmstrong: and you did a knife cookbook upload?
[2014-01-14 00:52:14 -0500] chrisftw: I had to do chef-rbenv in the metafile
[2014-01-14 00:52:28 -0500] carmstrong: so you edited those cookbooks directly?
[2014-01-14 00:52:28 -0500] chrisftw: so renaming the cookbook might fix everything?
[2014-01-14 00:52:49 -0500] chrisftw: Nope.  just git cloned.. https://github.com/fnichol/chef-rbenv
[2014-01-14 00:53:05 -0500] carmstrong: right. but you edited a metafile
[2014-01-14 00:53:07 -0500] carmstrong: what exactly did you edit
[2014-01-14 00:53:35 -0500] chrisftw: I edited the metafile of my project that was going to do an include_recipe (I took that out)
[2014-01-14 00:53:42 -0500] chrisftw: not on the new cookbooks
[2014-01-14 00:53:56 -0500] chrisftw: depends "chef-ruby_build", "0.8.1"
[2014-01-14 00:53:56 -0500] chrisftw: depends "chef-rbenv", "0.7.3"
[2014-01-14 00:54:01 -0500] carmstrong: no
[2014-01-14 00:54:06 -0500] carmstrong: those should be ruby_build and rbenv
[2014-01-14 00:54:25 -0500] chrisftw: okay.  I will rename the cookbooks, and try again.  thanks.
[2014-01-14 00:54:25 -0500] carmstrong: https://github.com/fnichol/chef-rbenv/blob/master/metadata.rb
[2014-01-14 00:54:34 -0500] carmstrong: don't rename the cookbooks, just your depends
[2014-01-14 00:54:49 -0500] carmstrong: look at metadata - the "name" attribute tells knife/Chef that the name of the cookbook is rbenv, not chef-rbenv
[2014-01-14 00:55:15 -0500] ec99988: Hi, has anyone seen this error when running chef-client on a Solaris host?  ERROR: "\xC3" on US-ASCII
[2014-01-14 00:55:19 -0500] carmstrong: so just change the depends/include in your cookbook
[2014-01-14 00:58:37 -0500] chrisftw: okay thanks carmstrong   it is getting further now.
[2014-01-14 00:59:06 -0500] carmstrong: chrisftw: cool. if you have further issues, post a gist or a link to the cookbook you're working on
[2014-01-14 00:59:16 -0500] chrisftw: okay thank you
[2014-01-14 01:05:03 -0500] chrisftw: Yikes I hope I did not break it :)
[2014-01-14 01:05:04 -0500] chrisftw: Server Unavailable
[2014-01-14 01:05:04 -0500] chrisftw: ------------------
[2014-01-14 01:05:05 -0500] chrisftw: The Chef Server is temporarily unavailable
[2014-01-14 01:06:26 -0500] chrisftw: Hosted Chef Emergency Maintenance Started
[2014-01-14 01:06:26 -0500] chrisftw: Tue Jan 14 01:03:49 UTC 2014 Hosted Chef Maintenance has started. The API is currently unavailable.
[2014-01-14 01:06:32 -0500] chrisftw: status.opscode.com
[2014-01-14 01:06:45 -0500] carmstrong: chrisftw: yeah, looks like they're having problems: http://status.opscode.com/
[2014-01-14 01:07:19 -0500] chrisftw: Just posted the message for anyone else having issues also :)
[2014-01-14 01:49:36 -0500] queuetip: just installed a fresh os chef server on an ubuntu box, and from the box itself i can wget localhost and get the login page downloaded, but i can't seem to reach the web gui via a browser at all
[2014-01-14 01:49:42 -0500] queuetip: there's no firewall
[2014-01-14 01:49:55 -0500] queuetip: it just doesn't make sense, no log is being kept in /opt/chef-server/logs
[2014-01-14 01:51:35 -0500] flaccid_: queuetip: check netstat to see what its listening on
[2014-01-14 01:51:57 -0500] queuetip: flaccid_: oh yeah good call, i've been awake far too long at this moment
[2014-01-14 01:52:30 -0500] queuetip: flaccid_: tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      2046/nginx.conf
[2014-01-14 01:53:14 -0500] queuetip: i just don't get it, it's listening, from inside the box i can wget localhost, there's no firewall, it's totally open to the world, but when i try to access it via a browser it just hangs
[2014-01-14 01:53:47 -0500] queuetip: when i run chef-server-ctl test it passes all tests
[2014-01-14 01:54:04 -0500] queuetip: it has a valid fqdn which also resolves via nslookup
[2014-01-14 01:55:26 -0500] queuetip: according to its own nginx conf i should just be able to hit it via the fqdn or ip and it should 302 to 443, that happens when i wget localhost from inside the box
[2014-01-14 01:55:30 -0500] queuetip: but nada on the outside
[2014-01-14 01:55:47 -0500] queuetip: iptables -L has 0 rules
[2014-01-14 01:57:47 -0500] flaccid_: queuetip: paste bin output with curl --verbose from the remote client..
[2014-01-14 01:58:46 -0500] queuetip: flaccid_: from the chef server you mean? like curl --verbose localhost ?
[2014-01-14 01:59:02 -0500] flaccid_: no from a remote host
[2014-01-14 01:59:09 -0500] queuetip: flaccid_: ahhh good call
[2014-01-14 02:00:04 -0500] queuetip: it just hangs on Trying xx.xx.xx.xx...
[2014-01-14 02:00:11 -0500] queuetip: where xx is the server's ip
[2014-01-14 02:01:21 -0500] flaccid_: telnet the ip and port to see if it does the same
[2014-01-14 02:03:35 -0500] queuetip: flaccid_: it does, it just hangs :/
[2014-01-14 02:03:51 -0500] flaccid_: i guess you has some kind of networking issue heh
[2014-01-14 02:04:31 -0500] queuetip: heh :/ i know
[2014-01-14 02:39:16 -0500] bmoritz: Did Chef drop support for the application cookbook(s)?
[2014-01-14 02:39:48 -0500] flaccid_: bmoritz: no
[2014-01-14 02:40:12 -0500] bmoritz: They seem to be moving the Jira issues in to google.
[2014-01-14 02:40:18 -0500] bmoritz: err Github
[2014-01-14 02:40:41 -0500] flaccid_: bmoritz: because the ownership of the maint was changed per https://wiki.opscode.com/display/chef/Community+Cookbook+Diversification
[2014-01-14 02:41:08 -0500] bmoritz: Cool, I missed this.. Thanks
[2014-01-14 02:41:17 -0500] flaccid_: np
[2014-01-14 02:43:04 -0500] bmoritz: flaccid_: How did you hear of this wiki page publication?
[2014-01-14 02:43:57 -0500] flaccid_: bmoritz: they originally announced it on the mailing list and i think blog
[2014-01-14 02:45:25 -0500] bmoritz: Yeah, I didn't see it in the blog..  Let me check the mailing list
[2014-01-14 02:46:59 -0500] savant: bmoritz: can you paste links to any mailing list post on this?
[2014-01-14 02:48:25 -0500] flaccid_: http://www.getchef.com/blog/2013/11/26/community-cookbooks/
[2014-01-14 02:48:34 -0500] flaccid_: bmoritz savant ^
[2014-01-14 02:48:41 -0500] coderanger: bmoritz: Yo
[2014-01-14 02:48:49 -0500] bmoritz: Didn't go back far enough.. thanks
[2014-01-14 02:48:51 -0500] coderanger: Support is now me, which is what it was before more or less
[2014-01-14 02:49:02 -0500] savant: okay
[2014-01-14 02:49:10 -0500] coderanger: I wrote them back when I worked at Opscode so its just all different names for the same thing :)
[2014-01-14 02:49:10 -0500] savant: so this means that opscode-cookbooks/mysql is dead?
[2014-01-14 02:49:15 -0500] bmoritz: coderanger: Awesome.. It looks like one of my Jire issues didn't get copied over
[2014-01-14 02:49:26 -0500] savant: well thats nice.
[2014-01-14 02:49:27 -0500] coderanger: bmoritz: Please just reopen it as a github issue, sorry
[2014-01-14 02:49:36 -0500] coderanger: savant: No, only specific cookbooks were moved
[2014-01-14 02:49:43 -0500] coderanger: and they are enumerated in that list
[2014-01-14 02:49:56 -0500] bmoritz: coderanger: So just create new issues?
[2014-01-14 02:49:58 -0500] savant: but they will all be moved eventually?
[2014-01-14 02:50:02 -0500] coderanger: savant: No?
[2014-01-14 02:50:05 -0500] savant: okay
[2014-01-14 02:50:20 -0500] coderanger: savant: Not unless its something Opscode/ChefInc doesn't feel they have the expertise or bandwidth to manage
[2014-01-14 02:50:22 -0500] savant: will there be a merge window on wednesday? there was a chef server outage today so I guess it was postponed
[2014-01-14 02:52:02 -0500] ampex: we're currently a puppet shop and some changes are occuring in the organization that might mean we become a chef shop. I'm not trolling with a "why is chef better than puppet?" question, but is there a good resource that would help me get a handle on what my life would be like using chef vs puppet?
[2014-01-14 02:52:48 -0500] savant: ampex: might make better sense to just read a guide to using chef and compare it to your own puppet experience
[2014-01-14 02:52:59 -0500] ampex: fair enough
[2014-01-14 02:53:02 -0500] bmoritz: One of the things that drove me crazy about the early days of Puppet was the diversification of modules.  Opscode was kind enough to maintain them together so things didn't fork.  Hopefully that doesn't happen.
[2014-01-14 02:53:19 -0500] flaccid_: ampex: there is stuff on google and the best you can do is try it out and note the differences yourself
[2014-01-14 02:53:30 -0500] ampex: from a high level standpoint puppet and chef seem so similar that I'm not sure why one would suit us better than the other
[2014-01-14 02:53:44 -0500] ampex: although there does seem to be a bit more momentum behind chef as it pertains to "the cloud", amazon ec2, etc.
[2014-01-14 02:53:45 -0500] savant: probably no real reason
[2014-01-14 02:54:00 -0500] flaccid_: i find they both have advantages and disadvantages. i'm in a puppet course typing this atm hehe
[2014-01-14 02:54:15 -0500] ampex: puppet still seems to have a larger established user base, probably primarily because it has existed for longer
[2014-01-14 02:54:28 -0500] ampex: does chef work similarly to puppet in that it enforces state as opposed to running a bunch of commands in a predefined order?
[2014-01-14 02:54:48 -0500] flaccid_: ampex: yes, i recommend getting started/learning it so you can evaluate properly.
[2014-01-14 02:55:56 -0500] flaccid_: heh asking the same question in #puppet.
[2014-01-14 02:56:35 -0500] savant: you'll know which one is better when you get lots of people trying to convince you to use one or the other
[2014-01-14 02:57:17 -0500] coderanger: bmoritz: The community site keeps things on a somewhat tighter leash, thats a single shared namespace
[2014-01-14 02:59:38 -0500] ampex: here's a good question: is it possible to be a competent chef user/admin without knowing ruby?
[2014-01-14 03:00:15 -0500] flaccid_: sure
[2014-01-14 03:00:30 -0500] savant: yeah
[2014-01-14 03:00:41 -0500] flaccid_: either way you are learning a language. puppet dsl is also a language
[2014-01-14 03:00:50 -0500] flaccid_: much of a muchness
[2014-01-14 03:01:01 -0500] flaccid_: you still extend puppet with ruby, you just can't put it in the dsl
[2014-01-14 03:01:27 -0500] bmoritz: coderanger: That's true.  Thanks.  I'll copy over my issue, COOK-3631, tomorrow morning.
[2014-01-14 03:01:54 -0500] coderanger: ampex: Competent, yes. Mastery-level, no.
[2014-01-14 03:03:11 -0500] bmoritz: ampex: Once you start learning Chef you might as well learn some Ruby too.  There is a lot of syntax similarities.
[2014-01-14 03:04:18 -0500] bmoritz: I picked Chef for my second infrastructure automation project because I found that I was fighting the Puppet DSL a lot and I wanted to learn some Ruby.
[2014-01-14 03:06:02 -0500] coderanger: I more or less learned Ruby for Chef, now I more or less am full-time on omghilarious ruby metaprogramming hacks
[2014-01-14 03:06:49 -0500] ampex: I'm very biased, but ruby just seems like such a nasty senseless language coming from python
[2014-01-14 03:07:04 -0500] ampex: I think this is part of my hesitancy when it comes to chef
[2014-01-14 03:07:14 -0500] ampex: I'm sure many feel exactly the opposite
[2014-01-14 03:08:13 -0500] coderanger: ampex: Its all turtles, all the way down
[2014-01-14 03:08:20 -0500] coderanger: Some things are way nicer in Ruby, some in Python
[2014-01-14 03:08:24 -0500] flaccid_: ampex: heh i agree
[2014-01-14 03:08:32 -0500] coderanger: but the tools are what they are and you just adapt and move on
[2014-01-14 03:08:47 -0500] flaccid_: coderanger and i also have python background before ruby/chef
[2014-01-14 03:09:22 -0500] ampex: maybe I need to consider ansible as well
[2014-01-14 03:09:48 -0500] flaccid_: if you look on github there is a huge number of these systems, it doesn't fit on one hand
[2014-01-14 03:09:55 -0500] flaccid_: erg wikipedia, not github
[2014-01-14 03:11:33 -0500] coderanger: ampex: Right now you can't beat chef/puppet for ecosystem and community
[2014-01-14 03:13:27 -0500] flaccid_: they are the top 2 in that respect no doubt
[2014-01-14 03:16:32 -0500] coderanger: I can rant some more about why Chef is better, but I'm tired and it would be very ranty
[2014-01-14 03:17:23 -0500] flaccid_: yeah same, but if you are going to eval stuff for an org by what people say in 2 irc rooms, you aint doing your job properly :)
[2014-01-14 03:19:23 -0500] ampex: flaccid_: :P
[2014-01-14 03:19:32 -0500] ampex: much testing will have to be conducted
[2014-01-14 03:19:34 -0500] shimo: personally i have grown to dislike the need to have a client installed on my servers, and the server-less capabilities (like chef solo) are lacking
[2014-01-14 03:19:46 -0500] ampex: but looking at ruby makes me mad :)
[2014-01-14 03:19:58 -0500] ampex: shimo: I think puppet is similar in that respect
[2014-01-14 03:20:06 -0500] shimo: yes, it is the same
[2014-01-14 03:20:57 -0500] shimo: which is why i am using ansible right now. so far i've only used it for a couple of months, but it feels very liberating compared to chef solo, chef server and puppet server which i've used
[2014-01-14 03:21:02 -0500] flaccid_: um not exactly, but similar heh
[2014-01-14 03:21:42 -0500] manfred: shimo: have you looked at salt stack at all?
[2014-01-14 03:22:16 -0500] flaccid_: salt is awesome but it doesn't have much community/resources/solutions
[2014-01-14 03:22:31 -0500] flaccid_: when i looked it felt like about 3 people in the world did it
[2014-01-14 03:23:18 -0500] ampex: 394 users in the IRC channel
[2014-01-14 03:23:38 -0500] flaccid_: sometimes there can be 1500 users and nobody will reply still
[2014-01-14 03:23:48 -0500] flaccid_: still if you don't publish your code what does it do eh
[2014-01-14 03:25:30 -0500] shimo: manfred: well, i only have an uneducated opinion about it. personally i saw ansible as more "innovative", however as i haven't actually used salt, it's difficult to say
[2014-01-14 03:26:48 -0500] manfred: i like different things about both, mostly I have been using ansible to deploy chef-client on devices, I am in the middle of moving one customer over to ansible
[2014-01-14 03:35:47 -0500] coderanger: shimo: Saying ansible is agentless is a bit of a stretch, with fireball mode its actually more heavyweight than knife solo
[2014-01-14 03:36:04 -0500] coderanger: Works well for small setups
[2014-01-14 03:36:10 -0500] coderanger: but big or complex, not so much
[2014-01-14 03:44:52 -0500] shimo: yes i personally would agree that they compete in different areas
[2014-01-14 03:53:10 -0500] someara: coderanger you around?
[2014-01-14 03:56:10 -0500] coderanger: Yeah, for another few minutes
[2014-01-14 03:56:11 -0500] coderanger: whats up
[2014-01-14 03:57:11 -0500] someara: so.. I'm looking for a cross platform design pattern for providers so I can go around tableflipping all the cookbooks with rats nest control flow logic
[2014-01-14 03:57:24 -0500] someara: here's what Ive got so far:
[2014-01-14 03:57:26 -0500] someara: https://github.com/someara/apache-cookbook/blob/master/test/fixtures/cookbooks/apache_test/recipes/default.rb
[2014-01-14 03:57:37 -0500] someara: https://github.com/someara/apache-cookbook/blob/master/libraries/provider_apache_server.rb
[2014-01-14 03:57:53 -0500] someara: anything in poise that would make that "better"?
[2014-01-14 03:58:01 -0500] someara: more grokable, etc
[2014-01-14 03:59:03 -0500] flaccid_: interesting
[2014-01-14 04:00:14 -0500] coderanger: someara: Yep
[2014-01-14 04:00:35 -0500] coderanger: someara: Inside an action_ method of a poise resource, include_recipe "just works"
[2014-01-14 04:02:03 -0500] someara: hrm
[2014-01-14 04:02:11 -0500] coderanger: someara: http://hastebin.com/funepikije.rb
[2014-01-14 04:03:20 -0500] someara: neat
[2014-01-14 04:03:54 -0500] coderanger: Technically that should have a converge_by call for whyrun too
[2014-01-14 04:03:56 -0500] coderanger: but you get the idea
[2014-01-14 04:04:54 -0500] someara: right
[2014-01-14 05:09:04 -0500] jkline: How do I allow chef-client -z (local mode) to find cookbooks and recipes in my site-cookbooks directory?
[2014-01-14 05:11:11 -0500] coderanger: jkline: I don't think thats supported, chef_fs is a one-to-one mapping
[2014-01-14 05:11:33 -0500] jkline: What is chef_fs?
[2014-01-14 05:12:07 -0500] coderanger: The system that powers local mode and other stuff
[2014-01-14 05:12:54 -0500] jkline: ok, that seems like a big oversight. Do most people not have a site-cookbooks directory?
[2014-01-14 05:13:24 -0500] coderanger: No, its almost entirely out of favor
[2014-01-14 05:13:27 -0500] coderanger: Berkshelf is the way
[2014-01-14 05:16:10 -0500] jkline: Interesting. Can you give me one more level of detail please? If I had Berkshelf how would chef local mode find my cookbook? I don't really understand how Berkshelf gives me a cookbook directory instead of site-cookbooks
[2014-01-14 05:17:36 -0500] coderanger: jkline: You would use berks vendor to build the folder
[2014-01-14 05:18:35 -0500] jkline: Ok, thanks, that give me something to read about.
[2014-01-14 05:19:13 -0500] coderanger: (same thing you would do with chef-solo)
[2014-01-14 08:05:46 -0500] coderanger: flaccid: You around?
[2014-01-14 08:13:32 -0500] connor_goodwolf: g'day
[2014-01-14 08:19:12 -0500] zxd: gday
[2014-01-14 08:59:34 -0500] niven_: Hello all, im fairly new to writing cookbooks and have come up against the problem of what runs in what order. I'm using the cookbook "wordpress (1.3.0)" and want to run a number of tasks after Apache has restarted. I'm unclear on how to achieve this. I've been looking at the notifies :delayed. Can anyone point me to some good documentation or methods
[2014-01-14 09:08:57 -0500] epcim: Hi, I might have the similar problem. I need to remove a directory in wrapper cookbook after the resource package "slapd" is installed (but before it's configured by original cookbook). I may use rewind library, but how to run additional POST steps, when the package is installed.
[2014-01-14 09:51:58 -0500] daxroc: Is it bad or good practice to include an attributes file in a minitest test file?
[2014-01-14 09:54:37 -0500] railsraider: hi i'm trying  to upload environment with cookbook versions and it complains Chef::Exceptions::ValidationFailed: Option cookbook_versions's value {"asgard"=>"=  0.1.11", "aws"=>"=  0.4.0", "base"=>"=  0.1.14"} should be a valid set of cookbook version requirements
[2014-01-14 09:54:44 -0500] railsraider: i did cookbook_versions({"asgard" => "=  0.1.11", "aws" => "=  0.4.0", "base" => "=  0.1.14"})
[2014-01-14 09:54:51 -0500] railsraider: in the environment file
[2014-01-14 09:55:07 -0500] railsraider: what am i doing wromg?
[2014-01-14 09:55:55 -0500] daxroc: knife cookbook list, are all those versions present ?
[2014-01-14 09:56:32 -0500] railsraider: yes
[2014-01-14 09:56:42 -0500] railsraider: this is how i started
[2014-01-14 09:56:55 -0500] railsraider: i did bin/knife  cookbook list and made a list out of that
[2014-01-14 09:58:27 -0500] railsraider: ill redo it
[2014-01-14 10:00:45 -0500] railsraider: i guess something went wrong when i pasted them back, its good now
[2014-01-14 10:00:46 -0500] railsraider: thanks
[2014-01-14 10:13:19 -0500] bubu: Hey guys, Looks like I'm running into https://tickets.opscode.com/browse/COOK-1406 but it says fixed. Have built a ruby deb from omnibus-rubies ( https://github.com/danielsdeleo/omnibus-rubies ), trying to gem install pg. Looks like a problem with openssl libraries. https://gist.github.com/joshmyers/e4c59bd41f8ba6802b28
[2014-01-14 11:24:00 -0500] zxd: hi
[2014-01-14 11:24:10 -0500] zxd: what's the difference between execute  and command
[2014-01-14 11:26:05 -0500] connor_goodwolf: zxd: what?
[2014-01-14 11:26:17 -0500] connor_goodwolf: zxd: http://docs.opscode.com/resource_execute.html
[2014-01-14 11:31:57 -0500] zxd: connor_goodwolf: I can name execute whatever I want if I specify the command attribute?
[2014-01-14 11:49:35 -0500] Abhishek_: Hi Guys i installed chef server and client on one VM and i am facing issue while running chef-server-ctl test , i found the bookshelf process is not running
[2014-01-14 11:49:47 -0500] Abhishek_: and i found following error Failed loading preloaded module otp_ring0 (badfile)
[2014-01-14 11:49:57 -0500] Abhishek_: any idea how can i resolve this?
[2014-01-14 11:50:31 -0500] workmad3: Abhishek_: honestly? throw away the VM and try again
[2014-01-14 11:51:07 -0500] workmad3: Abhishek_: as that sounds like something has gone really quite wrong in the OS
[2014-01-14 12:13:46 -0500] Abhishek_: workmad3: I re-provisioned the VM and deployed chef again now i am getting Exception during Pedant credentials setup #<Errno::ECONNRESET: Connection reset by peer - SSL_connect> during chef-server-ctl test
[2014-01-14 12:25:00 -0500] Abhishek: I am getting following error during chef-server-ctl test
[2014-01-14 12:25:01 -0500] Abhishek: Creating client pedant_admin_client... Exception during Pedant credentials setup #<Errno::ECONNRESET: Connection reset by peer - SSL_connect>
[2014-01-14 12:25:26 -0500] Abhishek: any one can help me to find the root cause?
[2014-01-14 12:44:37 -0500] Junaid_: hi
[2014-01-14 12:45:27 -0500] Junaid_: Could anyone please help me with iterating through nodes on Chef?
[2014-01-14 12:47:35 -0500] Junaid_: Could anyone please help me iterate through nodes on Chef?
[2014-01-14 12:55:49 -0500] railsraider: anyone know why would a chef run finish properly and no node attribute save? empty attributes completly
[2014-01-14 12:58:23 -0500] zxd: is there a chef cookbook to run git commands?
[2014-01-14 13:00:59 -0500] railsraider: Junaid_: what do you need?
[2014-01-14 13:02:14 -0500] Junaid_: railsraider, Hi. I need to take the name of the servers through my nodes folder and then iterate through them.
[2014-01-14 13:02:30 -0500] railsraider: from a recipe?
[2014-01-14 13:02:41 -0500] Junaid_: @railsraider, I'm doing this for my hosts,hostgroups file of nagios
[2014-01-14 13:02:53 -0500] railsraider: haha i just did that
[2014-01-14 13:03:01 -0500] railsraider: ec2?
[2014-01-14 13:03:15 -0500] Junaid_: @railsraider, So that I don't have to write it hard coded for each and every server.
[2014-01-14 13:03:26 -0500] railsraider: are you running on ec2?
[2014-01-14 13:03:34 -0500] Junaid_: @railsraider, Lol. No. Its not on ec2.
[2014-01-14 13:03:38 -0500] railsraider: ok
[2014-01-14 13:03:45 -0500] railsraider: one sec
[2014-01-14 13:04:06 -0500] Junaid_: sure
[2014-01-14 13:05:46 -0500] railsraider: you do something like this
[2014-01-14 13:05:52 -0500] railsraider: nodes = search(:node, search_query)
[2014-01-14 13:06:05 -0500] railsraider: search query if a string "*:*"
[2014-01-14 13:06:25 -0500] railsraider: first * is attribute or filter to search by
[2014-01-14 13:06:40 -0500] railsraider: 2nd * is for the value
[2014-01-14 13:06:53 -0500] railsraider: then you simply do nodes.each do |n|
[2014-01-14 13:07:16 -0500] railsraider: inside that block do n.name
[2014-01-14 13:07:25 -0500] Junaid_: Hey wait. So would something like this work.
[2014-01-14 13:07:30 -0500] railsraider: or n.ip_address or whatever attroibute
[2014-01-14 13:08:01 -0500] Junaid_: nodes = search(:node, name:*)
[2014-01-14 13:08:10 -0500] railsraider: yes
[2014-01-14 13:08:24 -0500] railsraider: this will find all server name:redis* for instance
[2014-01-14 13:08:43 -0500] railsraider: you can do wildcard on the 2nd value
[2014-01-14 13:08:59 -0500] Junaid_: Neat:)
[2014-01-14 13:09:36 -0500] railsraider: becareful not to call node.name inside  the block because node is actually the one the recipe runs on
[2014-01-14 13:09:41 -0500] Junaid_: Im new to scripting as well as Chef. I don't want to use the nagios cookbook available. Having a tough time with this. But Im sure it will be worth the effort.
[2014-01-14 13:09:43 -0500] railsraider: so that would be your nagios
[2014-01-14 13:10:54 -0500] railsraider: one tip Junaid_  - do not generate host file per host
[2014-01-14 13:10:58 -0500] railsraider: for nagios
[2014-01-14 13:11:17 -0500] railsraider: it will slow down your chef run due to high io
[2014-01-14 13:11:26 -0500] Junaid_: if you dont mind. Could you share the code of how you have done this search?
[2014-01-14 13:11:41 -0500] Junaid_: Yes. Im planning to put all of them in one File
[2014-01-14 13:11:51 -0500] Junaid_: I think you are right about the Io.
[2014-01-14 13:12:15 -0500] railsraider: pass a variable of array of host to the template file
[2014-01-14 13:12:31 -0500] railsraider: inside the template iterate over the hosts in a loop
[2014-01-14 13:13:12 -0500] dsa: Junaid_: just as an andvice - use a tag for the search or some really failsafe name that will be identifiying there right stuff you want. the search is mighty but asterisks searches are not always giving the right results under some circumstances
[2014-01-14 13:14:00 -0500] Junaid_: Thank you dsa. Ill keep that in Mind.
[2014-01-14 13:14:06 -0500] Junaid_: :)
[2014-01-14 13:16:22 -0500] railsraider: does anyone know what would cause a node not to save a single attribute not even ohai attribute - no attributes at all
[2014-01-14 13:17:11 -0500] railsraider: Junaid_: these should help => https://learnchef.com/screencasts
[2014-01-14 13:18:02 -0500] Junaid_: @railsraider. I will go though the screen shots. Thanks a lot Mate.
[2014-01-14 13:18:14 -0500] railsraider: np :)
[2014-01-14 13:22:34 -0500] dsa: railsraider: if the first run is aborted yes
[2014-01-14 13:22:57 -0500] dsa: railsraider: the saving of all attributes is done on the very end of the chef-client run
[2014-01-14 13:23:11 -0500] railsraider: even basic normal attributes like ohai?
[2014-01-14 13:23:13 -0500] dsa: any abort will lead to not safing any attributes or infos at all
[2014-01-14 13:23:15 -0500] dsa: yes
[2014-01-14 13:23:28 -0500] Junaid_: @railsraider. The Url doesn't seem to be loading.
[2014-01-14 13:23:33 -0500] railsraider: my issue is im trying to delete stale nodes
[2014-01-14 13:23:51 -0500] dsa: railsraider: managed chef or private hosted chef ?
[2014-01-14 13:23:57 -0500] railsraider: private host
[2014-01-14 13:24:32 -0500] railsraider: i need to delete stale node so that later i can run knife  on all nodes
[2014-01-14 13:24:58 -0500] dsa: railsraider: and knife node delete <nodename> doesnt work ?
[2014-01-14 13:25:08 -0500] railsraider: if node is empty, knife would not conect
[2014-01-14 13:25:32 -0500] railsraider: the issue is later at knife run
[2014-01-14 13:25:36 -0500] dsa: aahh
[2014-01-14 13:25:47 -0500] dsa: knife bootstrap is then your friend i guess
[2014-01-14 13:25:58 -0500] dsa: if the first run is failing nothing is done at all
[2014-01-14 13:26:03 -0500] dsa: either you do it by hand on the node
[2014-01-14 13:26:28 -0500] dsa: over chef-client -o "role[blabla] recipe[blabla]"
[2014-01-14 13:26:33 -0500] dsa: or you do it with knife bootstrap
[2014-01-14 13:27:10 -0500] railsraider: problem is like that
[2014-01-14 13:27:38 -0500] railsraider: i delete all nodes that are  not exist on ec2 ort have empty attributes
[2014-01-14 13:27:58 -0500] railsraider: i can not re-bootstrap because i have to delete the pem file
[2014-01-14 13:28:05 -0500] railsraider: and only then bootstrap
[2014-01-14 13:28:28 -0500] dsa: you can re-bootstrap then... should be no problem
[2014-01-14 13:28:39 -0500] dsa: if you delete the node from the chef server
[2014-01-14 13:28:47 -0500] railsraider: if i try to bootstrap while the pem exist and the node does not exist on chef it will produce 401 unauthorized
[2014-01-14 13:28:49 -0500] dsa: you just can re-run the chef-client with a recipe
[2014-01-14 13:28:58 -0500] railsraider: does  work
[2014-01-14 13:29:01 -0500] railsraider: doesnt
[2014-01-14 13:29:02 -0500] dsa: yeah you only should delete the node
[2014-01-14 13:29:05 -0500] dsa: not the client ket
[2014-01-14 13:29:07 -0500] dsa: key
[2014-01-14 13:29:08 -0500] railsraider: says unautohorize
[2014-01-14 13:29:17 -0500] railsraider: i delete both the client and the node
[2014-01-14 13:29:18 -0500] dsa: if you delete the client key then you must delete the client.pem
[2014-01-14 13:29:20 -0500] dsa: thats correct
[2014-01-14 13:29:34 -0500] railsraider: im trying to understand the empty attribute issue
[2014-01-14 13:29:37 -0500] dsa: but after you delete the .pem it should register in a normal maner on the next run
[2014-01-14 13:29:44 -0500] dsa: if you recreate the node
[2014-01-14 13:29:50 -0500] dsa: then everything is empty
[2014-01-14 13:30:09 -0500] dsa: you need to asigned either by knife or chef-client a role or recipe or over the chef webgui
[2014-01-14 13:30:13 -0500] railsraider: so i ithink if node attributes are empty i will not delete the client
[2014-01-14 13:30:16 -0500] railsraider: just the node
[2014-01-14 13:30:25 -0500] railsraider: and then the bin/knife  won't see the node
[2014-01-14 13:30:52 -0500] dsa: so you removed the node and client from the chef server correct ?
[2014-01-14 13:31:03 -0500] dsa: and delete the client.pem from the node ?
[2014-01-14 13:31:57 -0500] dsa: correct ?
[2014-01-14 13:33:24 -0500] railsraider: the issue is with autoscale
[2014-01-14 13:33:47 -0500] railsraider: i will remove just the node if the attributes are empty
[2014-01-14 13:33:54 -0500] railsraider: this way it can re-run
[2014-01-14 13:34:00 -0500] railsraider: manually
[2014-01-14 13:34:06 -0500] railsraider: and then use knife
[2014-01-14 13:35:12 -0500] dsa: ok - sorry im still confused about the problem. but simple reseting the node inside of the chef server and deleteing the .pem on the node should do the trick for sure
[2014-01-14 13:37:04 -0500] railsraider: i want to run some cookbooks using knife  on all nodes
[2014-01-14 13:38:48 -0500] railsraider: if if some nodes are not exists knife will timeout when trying to connect and slow down all that process
[2014-01-14 13:39:20 -0500] railsraider: i wrote a cookbook that check if node really exists on ec2 and if not i delete the node and client from the chef server
[2014-01-14 13:39:38 -0500] dsa: eh
[2014-01-14 13:40:02 -0500] dsa: i think with will not work - because chef is not aware always of everthing inside ec2
[2014-01-14 13:40:18 -0500] dsa: so if the node run is aborted by a cookbook
[2014-01-14 13:40:24 -0500] railsraider: i think that when knife ssh  is trying to connect with the attr and the attr is empty (fqdn or whatever) thats where its too slow
[2014-01-14 13:40:28 -0500] dsa: then you dont have ec2 attributes inside chef
[2014-01-14 13:40:35 -0500] dsa: exactly
[2014-01-14 13:40:44 -0500] dsa: you should do this by a wrapper script outside of chef
[2014-01-14 13:40:57 -0500] dsa: and using the ec2 tagging variables to destiguish between them
[2014-01-14 13:41:00 -0500] dsa: but not over a cookbook
[2014-01-14 13:41:12 -0500] dsa: this will lead for sure to failure if chef is onsure with the status on ec2
[2014-01-14 13:41:34 -0500] dsa: unsure
[2014-01-14 13:42:48 -0500] railsraider: is this error is because chef is not up to date?  undefined method `atomic_update' for Chef::Resource::CookbookFile
[2014-01-14 13:43:32 -0500] dsa: railsraider: could be - chef search is not the quickest. if you do a lot of searches you need to wait at least 10-30= seconds before certain attributes are indexed inside the search
[2014-01-14 13:43:52 -0500] dsa: and if you dont have a wait loop on the results it might fail
[2014-01-14 13:43:53 -0500] railsraider: ok
[2014-01-14 13:44:01 -0500] dsa: or a raise
[2014-01-14 13:48:03 -0500] Junaid_: @railsraider, The link you shared doesn't seem to be working.
[2014-01-14 13:48:16 -0500] Junaid_: I have anyways written some code. Is it okay sharing here?
[2014-01-14 13:48:32 -0500] railsraider: it has a security warning you need to accept
[2014-01-14 13:48:38 -0500] railsraider: not sure why
[2014-01-14 13:48:38 -0500] dsa: Junaid_: make a gist or post it on pastebin
[2014-01-14 13:49:30 -0500] Junaid_: yeah it doesnt go through after confirming the Exception.
[2014-01-14 13:49:48 -0500] Junaid_: dsa, where is the paste bin?
[2014-01-14 13:50:06 -0500] dsa: http://pastebin.com/
[2014-01-14 13:50:19 -0500] railsraider: i dont know why i get this error undefined method `atomic_update' for Chef::Resource::CookbookFile
[2014-01-14 13:50:25 -0500] railsraider: chef version is 11.8.2
[2014-01-14 13:50:26 -0500] Junaid_: I thought it was attached to this :P
[2014-01-14 13:50:53 -0500] dsa: Junaid_: on irc big copy and pastes are restricted to Github GIST or Pastebin are they way to share longer logs
[2014-01-14 13:51:33 -0500] workmad3: I tend to recommend gist.github.com or pastie.org as pastebin.com is rather ad-laden and slow
[2014-01-14 13:51:37 -0500] dsa: railsraider: looks like somethink inside of your cookbook. i would suggest using shef-shell and debug it => http://docs.opscode.com/chef_shell.html
[2014-01-14 13:52:01 -0500] dsa: workmad3: yeah i forgot pastie :) thanks
[2014-01-14 13:52:29 -0500] Junaid_: Sure. I will try n remember
[2014-01-14 13:52:44 -0500] Junaid_: dsa, railsraider Here it is
[2014-01-14 13:52:46 -0500] Junaid_: http://pastebin.com/Xiiq5RGm
[2014-01-14 13:53:51 -0500] workmad3: Junaid_: that should be 'node = search
[2014-01-14 13:53:56 -0500] workmad3: (:node, "name:*")
[2014-01-14 13:53:58 -0500] railsraider: your search need to be inside ''
[2014-01-14 13:53:59 -0500] dsa: Junaid_: i suggest to you too to use chef-shell to run the search
[2014-01-14 13:54:00 -0500] workmad3: sorry about the random return
[2014-01-14 13:54:24 -0500] dsa: Junaid_: its great for debugging and understand stuff inside chef and to test certain lines of code
[2014-01-14 13:55:21 -0500] workmad3: and yeah, chef-shell is awesome... 'sudo chef-shell -z' on a node to load it up with all your client info
[2014-01-14 13:56:36 -0500] Junaid_: Oh. I didnt know about that.
[2014-01-14 13:56:48 -0500] Junaid_: Thanks guys
[2014-01-14 13:57:42 -0500] zxd: If I want to add new items to a /templates/foo.erb  file or change it a bit  in a cookbook, Do I need to fork the cookbook with the new changes? or is there a more elegant way?
[2014-01-14 13:59:08 -0500] Junaid_: and workmad3 should it be like this http://pastebin.com/SEtbgidq?
[2014-01-14 13:59:59 -0500] Junaid_: railsraider, http://pastebin.com/SEtbgidq ?
[2014-01-14 14:00:40 -0500] zxd: ?
[2014-01-14 14:00:50 -0500] workmad3: Junaid_: no
[2014-01-14 14:00:57 -0500] workmad3: Junaid_: I gave you what it should be
[2014-01-14 14:01:57 -0500] railsraider: Junaid_: wrap the name:* in quotations
[2014-01-14 14:02:11 -0500] railsraider: just like workmad3 gave you
[2014-01-14 14:02:20 -0500] dsa: zxd: either the fork or you created a wrapper cookbook
[2014-01-14 14:02:41 -0500] railsraider: workmad3:  any idea why i get this undefined method `atomic_update' for Chef::Resource::CookbookFile ?
[2014-01-14 14:03:01 -0500] workmad3: railsraider: gist the file it's happening in?
[2014-01-14 14:03:29 -0500] dsa: zxd: i suggest going this way
[2014-01-14 14:03:33 -0500] dsa: zxd: http://leknarf.net/blog/2013/04/22/staying-sane-while-writing-chef-cookbooks/#.UtVDmx-cGak
[2014-01-14 14:03:38 -0500] Junaid_: okay. got it.
[2014-01-14 14:03:39 -0500] zxd: lol
[2014-01-14 14:04:55 -0500] railsraider: workmad3:  for some odd reason i see there   atomic_update false wierd i'll remove it
[2014-01-14 14:05:40 -0500] Junaid_: workmad3, railsraider , nodes = search(:node, "name:*")
[2014-01-14 14:05:52 -0500] railsraider: yes
[2014-01-14 14:06:03 -0500] Junaid_: Everything else there looks fine right?
[2014-01-14 14:06:06 -0500] railsraider: you can test it from chef-shell
[2014-01-14 14:06:17 -0500] Junaid_: Yes. I'm going to do that now
[2014-01-14 14:06:19 -0500] railsraider: just do sudo chef-shell -z
[2014-01-14 14:09:00 -0500] Junaid_: It seems to be working :)
[2014-01-14 14:15:56 -0500] zxd: dsa: is that yours?
[2014-01-14 14:16:03 -0500] zxd: dsa: "You cannot set an attribute like default["some_cookbook"]["my_setting"] in an attribute file in a cookbook named some_cookbook_wrapper. Thats subtle and confusing, which is reason enough in my option to just avoid using attribute files altogether."
[2014-01-14 14:16:07 -0500] zxd: afaik this isn't true
[2014-01-14 14:22:03 -0500] pwelch_: Anyone using SSL Certificate with the database cookbook to connect to a MySQL Server with SSL? I dont see any options in the code for passing the ssl-ca path
[2014-01-14 14:22:10 -0500] Junaid_: dsa, I am getting this error "undefined method `each' for "search(:node, \"name:*\")":String"
[2014-01-14 14:22:41 -0500] Junaid_: for my code http://pastebin.com/dzm773Se
[2014-01-14 14:22:45 -0500] Junaid_: any ideas?
[2014-01-14 14:23:47 -0500] borntyping: Junaid_: You've put your search inside quotes
[2014-01-14 14:24:06 -0500] borntyping: (as a result, nodes is a String, not an Array)
[2014-01-14 14:25:49 -0500] Junaid_: borntyping, I was using it without quotes. I put it in quotes because I was seeing this error
[2014-01-14 14:25:51 -0500] Junaid_: undefined method `search' for #<Chef::Mixin::Template::TemplateContext
[2014-01-14 14:33:31 -0500] Junaid_: <borntyping>, workmad3 any ideas?
[2014-01-14 14:33:45 -0500] b-dean: I noticed that sethvagro did a major rewrite of the jenkins cookbook and closed a dozen pull requests. A lot of the functionality has changed drastically (such as the jenkins::node recipe no longer exists). Is there any plan to ... document recommendations of how to accomplish the same things with this cookbook as the old jenkins cookbook? or is it just a "read the code and sort it out on your own" kind of thing?
[2014-01-14 14:35:36 -0500] borntyping: Junaid_: You can't use search inside templates or resources - it's not fun, but you'll need to do the search in the recipe and pass the result into the template variables
[2014-01-14 14:38:11 -0500] Junaid_: <borntyping>, So I just have to move my "nodes = search(:node, "name:*") " line into the recipe and leave the rest as is right?
[2014-01-14 14:38:35 -0500] railsraider: Junaid_: the search should be inside a recipe
[2014-01-14 14:39:02 -0500] borntyping: Junaid_: not quite - you then need to pass nodes as a variable into the template
[2014-01-14 14:39:13 -0500] railsraider: pass a variable({:hosts =>nodes.map{|n| n.name} }) in the template block
[2014-01-14 14:39:29 -0500] railsraider: insisde th template you can do @hosts.each do |host|
[2014-01-14 14:39:38 -0500] railsraider: in erb tags ofcourese
[2014-01-14 14:45:00 -0500] Junaid_: <railsraider> Is this what it should look like? http://pastebin.com/0wsFEBQk
[2014-01-14 14:45:20 -0500] Junaid_: and in my recipe I am running nodes = search(:node, "name:*")
[2014-01-14 14:47:37 -0500] zxd: what's the difference between including   depends cookbook  in metadata.rb and recipe[cookbook] in run_list
[2014-01-14 14:47:41 -0500] railsraider: Junaid_: http://pastebin.com/rU6kVmA2
[2014-01-14 14:47:46 -0500] zxd: Include `recipe[git_user]` in your `run_list` and `git_user` resource will become available.
[2014-01-14 14:48:00 -0500] zxd: is it enouth to just  depends git_user  in my wrapper cookbook  ?
[2014-01-14 14:48:16 -0500] railsraider: and host_name <%= "#{n}" %> fix this to #{host} instead of #{n}
[2014-01-14 14:51:51 -0500] Junaid_: railsraider, So much difference between your's and mine.
[2014-01-14 14:51:54 -0500] Junaid_: :)
[2014-01-14 14:52:10 -0500] cwj: zxd: if you are writing a wrapper cookbook you will probably want to list the cookbook(s) you are wrapping as dependencies, and use include_recipe to ensure that the cookbook(s) recipes are run without having to add multiple items to a nodes run list
[2014-01-14 14:52:38 -0500] Junaid_: What does the map{|n| n.name} bit do?
[2014-01-14 14:52:47 -0500] Junaid_: I didn't get that.
[2014-01-14 14:53:10 -0500] railsraider: workmad3:  i have an issue with lazy eval, i have some nodes that runs ubuntu 10.04 and i cant uprgade chef client to 11.8.2 i tried (omnibus) and its still runs 11.4.4 any suggestion how to get by that?
[2014-01-14 14:53:34 -0500] workmad3: railsraider: any chance you could get chef 10.28 on them?
[2014-01-14 14:53:36 -0500] railsraider: Junaid_: mapping each element in the array to be the node name
[2014-01-14 14:53:49 -0500] railsraider: how? i need omnibus
[2014-01-14 14:54:00 -0500] railsraider: willl it not break other cookbooks?
[2014-01-14 14:54:17 -0500] workmad3: railsraider: otherwise, I suppose you could try finding the lazy eval code and monkey-patching the lazy attribute stuff in via the cookbook's libraries folder
[2014-01-14 14:54:28 -0500] workmad3: railsraider: ymmv
[2014-01-14 14:54:44 -0500] workmad3: railsraider: it might do, if they rely on chef 11 features...
[2014-01-14 14:55:03 -0500] railsraider: workmad3: just been told we gonna upgrade all servers to 12.04 soon
[2014-01-14 14:55:12 -0500] railsraider: i'll do it manually
[2014-01-14 14:56:18 -0500] Junaid_: railsraider, Your code ran like a Charm.
[2014-01-14 14:56:29 -0500] Junaid_: I will do my bit of reading on the mapping bit tomorrow
[2014-01-14 14:56:37 -0500] Junaid_: Its quite late, where I live.
[2014-01-14 14:56:49 -0500] workmad3: railsraider: yeah, I'd probably suggest seeing if you can check the chef version in the recipe and maybe wrap the entire file resource in a ruby_block if it's on chef 11.4
[2014-01-14 14:57:03 -0500] railsraider: ok cool
[2014-01-14 14:57:05 -0500] railsraider: thanks
[2014-01-14 14:57:07 -0500] Junaid_: railsraider, workmad3,dsa -> Thank you all for the help
[2014-01-14 14:57:13 -0500] railsraider: you welcome
[2014-01-14 14:58:26 -0500] railsraider: workmad3: any way i can run knife on nodes > 11.4 only?
[2014-01-14 14:59:01 -0500] workmad3: railsraider: dunno... is the chef-client version available in the node data?
[2014-01-14 14:59:10 -0500] railsraider: i'll check
[2014-01-14 14:59:21 -0500] workmad3: railsraider: if so, you can do a knife ssh search based on that ;)
[2014-01-14 14:59:33 -0500] workmad3: railsraider: otherwise... maybe tag suitable nodes?
[2014-01-14 14:59:42 -0500] gchristensen: node['chef_packages']['chef']['version'] I believe
[2014-01-14 15:00:40 -0500] railsraider: actually theres node platform
[2014-01-14 15:00:58 -0500] railsraider: i dont need to care about the 10.04 ones cause they will die next week
[2014-01-14 15:01:00 -0500] railsraider: :)
[2014-01-14 15:01:56 -0500] workmad3: railsraider: woo!
[2014-01-14 15:02:09 -0500] railsraider: how would i do that ?  -a platform = 12.04
[2014-01-14 15:02:11 -0500] workmad3: railsraider: almost sounds tempting to turn any automatic chef-client stuff off on those ones
[2014-01-14 15:02:27 -0500] railsraider: nothing is automatic here  except nagios
[2014-01-14 15:02:31 -0500] workmad3: ah, ok :)
[2014-01-14 15:02:42 -0500] workmad3: so you do stuff with knife ssh on a workstation?
[2014-01-14 15:02:49 -0500] railsraider: how would you do knife  -a platform only 12.04
[2014-01-14 15:03:00 -0500] railsraider: yes
[2014-01-14 15:03:37 -0500] workmad3: knife ssh "NOT platform_version:10.04" "command" maybe
[2014-01-14 15:03:46 -0500] railsraider: doh!
[2014-01-14 15:03:52 -0500] workmad3: I'd check the search string with a knife query first though
[2014-01-14 15:03:53 -0500] railsraider: haha thanks
[2014-01-14 15:04:26 -0500] workmad3: *knife search, not knife query
[2014-01-14 15:06:26 -0500] railsraider: knife  ssh '*:* NOT platform_version:10.04' 'sudo chef-client =>  invalid search query: '*:* NOT platform_version:10.04'
[2014-01-14 15:07:01 -0500] railsraider: doh
[2014-01-14 15:07:02 -0500] railsraider: and
[2014-01-14 15:08:07 -0500] zxd: something really weird I don't get git_user cookbook has action :create  in providers/ directory and in default.rb it has nothing that executes this code, question is does the content under providers/ dir executed when I include a cookbook ? even if default.rb under recipes is empty?
[2014-01-14 15:08:41 -0500] railsraider: zxd: you need to set depened 'cookbook' in metadata
[2014-01-14 15:09:53 -0500] workmad3: zxd: the resources/ and providers/ directory are treated specially by chef
[2014-01-14 15:10:13 -0500] zxd: workmad3: which means?
[2014-01-14 15:10:47 -0500] workmad3: zxd: each resource/provider pair in the appropriate directories creates a new lwrp with the name <cookbook>_<filename> where the filename is the name of the file in resources or providers
[2014-01-14 15:10:53 -0500] zxd: if I include the cookbook from a wrapper cookbook does it execute the code under providers/ ?
[2014-01-14 15:11:24 -0500] workmad3: zxd: the code gets loaded, but it won't be executed until you use the lwrp that is defined by the file
[2014-01-14 15:11:53 -0500] workmad3: zxd: this is another bit where you *really* need to know a bit of ruby to grok what's going on btw ;)
[2014-01-14 15:12:21 -0500] daxroc: Is the attributes/default.rb automatically loaded ?
[2014-01-14 15:13:44 -0500] workmad3: daxroc: if the cookbook is part of the run, all files in attributes/ for that cookbook get loaded
[2014-01-14 15:14:53 -0500] zxd: workmad3: what happens if the name of the files are default.rb in resource/provider ?
[2014-01-14 15:15:09 -0500] zxd: workmad3: what happens to the name of the lwrp
[2014-01-14 15:15:11 -0500] workmad3: zxd: then the lwrp defined is just <cookbook_name>
[2014-01-14 15:15:20 -0500] zxd: name ?
[2014-01-14 15:15:32 -0500] daxroc: workmad3: So if you are treating the cookbook as a library you need to use include_attribute "cookbook"
[2014-01-14 15:15:33 -0500] workmad3: zxd: as in the metadata.rb file
[2014-01-14 15:15:42 -0500] workmad3: daxroc: no, you don't need to
[2014-01-14 15:15:47 -0500] zxd: I see
[2014-01-14 15:16:16 -0500] workmad3: daxroc: dependency cookbooks are now loaded before any cookbooks that depend on it
[2014-01-14 15:16:46 -0500] daxroc: workmad3: I''ve my library cookbook set as a dependancy and it's erroring out on a nil attribute
[2014-01-14 15:16:47 -0500] workmad3: daxroc: so the only time you need to be specific with an include_attribute is, iirc, when you want to re-evaluate it after the fack
[2014-01-14 15:16:58 -0500] workmad3: daxroc: the library cookbook is?
[2014-01-14 15:17:03 -0500] workmad3: daxroc: or your wrapper cookbook?
[2014-01-14 15:17:46 -0500] daxroc: I've an application cookbook depending on my library cookbook that has attributes set in default.rb it doesn't seem to load it.
[2014-01-14 15:18:18 -0500] daxroc: *loads the recipes in the library but attributes aren't availble.
[2014-01-14 15:19:05 -0500] someara: it should be loading it... what makes you think it isnt?
[2014-01-14 15:19:28 -0500] someara: and no you dont need to use include_attribute. All files in attributes/ are loaded
[2014-01-14 15:19:58 -0500] daxroc: I get Undefined method or attribute `paths' on `node'
[2014-01-14 15:20:32 -0500] daxroc: This works locally, but not from the chef-server
[2014-01-14 15:21:01 -0500] someara: gist your attributes file?
[2014-01-14 15:23:09 -0500] daxroc: someara: https://gist.github.com/anonymous/fe2d5b0234d83a81ae6a
[2014-01-14 15:23:18 -0500] zxd: workmad3: now I understand there is a line of code using the lwrp called git_user in data_bag.rb file under recipes, the cookbook name  is git_user and the files under resources and providers is default.rb so I guess this causes the code under providers/ and resources/ to be executed in case I load data_bag recipe
[2014-01-14 15:23:33 -0500] zxd: didn't understand how it fired those two default.rb files before
[2014-01-14 15:24:19 -0500] daxroc: someara: The attribute is far larger 250 entries. simplified example.
[2014-01-14 15:24:25 -0500] someara: gitcha
[2014-01-14 15:24:39 -0500] someara: are all your cookbooks namespacing into cookbookname first
[2014-01-14 15:24:51 -0500] someara: would that be in a cookbook named 'test'
[2014-01-14 15:24:53 -0500] workmad3: zxd: yup, that's pretty much it :)
[2014-01-14 15:25:18 -0500] daxroc: It would be yes. Not sure I get what you mean?
[2014-01-14 15:25:41 -0500] someara: since all attributes from all cookbooks are loaded on every chef-client run
[2014-01-14 15:26:08 -0500] someara: if they're not uniquely namespaced, they'll get merged and overridden
[2014-01-14 15:26:19 -0500] someara: so if cookbook A has node['foo']['bar']
[2014-01-14 15:26:27 -0500] someara: and cookbook B has node['foo']['bar']
[2014-01-14 15:26:35 -0500] someara: then the last one loaded wins
[2014-01-14 15:26:51 -0500] someara: you want node['cookbook_a']['foo']['bar']
[2014-01-14 15:27:04 -0500] someara: and node['cookbook_b']['foo']['bar']
[2014-01-14 15:27:24 -0500] daxroc: Would ohai override these ?
[2014-01-14 15:27:35 -0500] someara: yes
[2014-01-14 15:27:56 -0500] someara: you cant make attributes into a namespace ohai ocupies
[2014-01-14 15:27:59 -0500] daxroc: Explains why it works in solo :D
[2014-01-14 15:28:10 -0500] someara: so you cant set node['fqdn'], node['cpu'], etc etc
[2014-01-14 15:29:39 -0500] daxroc: someara: Really appreciate it
[2014-01-14 15:29:44 -0500] someara: np
[2014-01-14 15:30:24 -0500] gchristensen: someara: IIRC its a bit more in depth than that, but generally correct
[2014-01-14 15:31:13 -0500] someara: well yea
[2014-01-14 15:31:20 -0500] someara: but those are the vitals ;)
[2014-01-14 15:37:08 -0500] zxd: what does @foo mean in ruby, in perl it  means  array
[2014-01-14 15:37:20 -0500] zxd: @array = ['foo', 'baa']
[2014-01-14 15:37:33 -0500] zxd: print "@array"
[2014-01-14 15:37:34 -0500] someara: @foo means "instance variable"
[2014-01-14 15:38:16 -0500] someara: var = 'foo'
[2014-01-14 15:38:48 -0500] someara: ^ that is local scope.. so within a block
[2014-01-14 15:38:56 -0500] someara: @var = 'foo'
[2014-01-14 15:39:27 -0500] someara: ^ reachable from the more places in the instance of the object
[2014-01-14 15:39:45 -0500] someara: @@var = 'foo'
[2014-01-14 15:39:49 -0500] someara: lolglobal
[2014-01-14 15:43:35 -0500] workmad3: someara: @@ isn't a global
[2014-01-14 15:43:40 -0500] workmad3: someara: @@ is a class variable
[2014-01-14 15:43:45 -0500] workmad3: someara: $ is a global ;)
[2014-01-14 15:43:53 -0500] someara: oh right
[2014-01-14 15:44:16 -0500] someara: rubby
[2014-01-14 15:53:47 -0500] CPS: is there a programatic way to get the path for a cookbook's files directory?
[2014-01-14 15:54:56 -0500] workmad3: CPS: why do you need that?
[2014-01-14 15:55:08 -0500] CPS: to download files into a temp directory
[2014-01-14 15:55:17 -0500] CPS: installers, mostly
[2014-01-14 15:55:26 -0500] workmad3: CPS: that's what cookbook_file is for
[2014-01-14 16:00:35 -0500] zxd: workmad3: if I include a recipe like,  include_recipe 'git_user'  then in wrapper cookbook recipe redefine some variables then  use the resource git_user exported my the git_user recipe will it use my new redefined settings or overwrite them after executing the git_user resource?
[2014-01-14 16:01:17 -0500] shlant: anyone have an example of how to wrap a resource so you only need to pass 1 attribute?
[2014-01-14 16:09:15 -0500] dsa: somebody has problems again with hosted chef and the search
[2014-01-14 16:09:29 -0500] dsa: it takes for me more then 10 minutes to have tags be found inside of the chef server search
[2014-01-14 16:53:04 -0500] tcate: hey guys, I'm calling "<%=node['newrelic']['application_monitoring']['license']-%>" in a template which is failing on nil, however 'knife node show node-name -a newrelic.application_monitoring.license' show it, and it's in the environment
[2014-01-14 16:53:09 -0500] tcate: any ideas what I'm missing?
[2014-01-14 16:54:30 -0500] notromda: Not sure if this matters, but didn't read somewhere that it's better style to specify variables rather than use node[] in templates?
[2014-01-14 16:55:15 -0500] tcate: pass the attributes from the recipe?
[2014-01-14 16:55:15 -0500] notromda: That way you could also log the value in your output to see the structure
[2014-01-14 16:55:26 -0500] notromda: from your recipe, yes
[2014-01-14 16:55:44 -0500] notromda: I'm new to chef, so take that with a grain of salt
[2014-01-14 16:55:47 -0500] tcate: man, that's a lot of rewriting, I'm curious why only one out of like 20 variables fails to read though
[2014-01-14 16:57:27 -0500] notromda: yeah, I'm not sure if that's good advice or not.   Nevertheless, you could add a logger in your recipe just before the template and output node.inspect  or node['newrelic'].inspect to see what is in it.
[2014-01-14 16:57:51 -0500] zxd: what could be the reason chef-client gets stuck at : Starting Chef Client, version 11.8.2
[2014-01-14 16:58:08 -0500] tcate: notromda: that's an idea, make sure it at least exists at the template call
[2014-01-14 17:01:10 -0500] notromda: just a wild guess, but something isn't converging as expected.    But that's a rather unhelpful and broad observation. :D
[2014-01-14 17:01:48 -0500] cwj: zxd: run chef-client with -l debug
[2014-01-14 17:02:54 -0500] zxd: http://pastebin.com/gc4SGvnq cwj
[2014-01-14 17:03:55 -0500] zxd: dosen't go beyond that last plugin
[2014-01-14 17:04:27 -0500] zxd: root@ubuntu:~# df -h   hangs hhh
[2014-01-14 17:05:27 -0500] cwj: if df is hanging then it sounds like you have a larger problem
[2014-01-14 17:05:36 -0500] cwj: perhaps a disk is not responding?
[2014-01-14 17:05:40 -0500] tcate: notromda: looks like a dev edited the environment and moved my attribute around D:
[2014-01-14 17:05:46 -0500] tcate: on our side
[2014-01-14 17:09:17 -0500] notromda: Ha, so I was right, in avery vague sort of way. lol
[2014-01-14 17:19:07 -0500] jslusher: can anyone help me with chef-shell syntax?
[2014-01-14 17:19:23 -0500] jslusher: I'm trying to search a data bag form a server
[2014-01-14 17:20:01 -0500] jslusher: databags.all
[2014-01-14 17:20:02 -0500] jslusher: ArgumentError: wrong number of arguments (0 for 1)
[2014-01-14 17:20:13 -0500] jslusher: databags.all 'bag'
[2014-01-14 17:20:15 -0500] jslusher: same thing
[2014-01-14 17:20:30 -0500] jslusher: not sure how to pass the argument it's complaining about
[2014-01-14 17:22:19 -0500] spheromak: jslusher: if you want to search bags you use  search  for that.  you can fetch a databag item with data_bag_item
[2014-01-14 17:22:42 -0500] imeyer: jslusher: what id you do: databags(:bag_name).all
[2014-01-14 17:23:13 -0500] jslusher: imeyer: awesome. thanks!
[2014-01-14 17:24:00 -0500] spheromak: guess i need to read better :| thanks imeyer
[2014-01-14 17:25:40 -0500] imeyer: spheromak: i feel like that syntax has changed since 0.10.x
[2014-01-14 17:25:48 -0500] imeyer: i had to look it up in the halp section :/
[2014-01-14 17:27:49 -0500] nowthatsamatt: where does the actual file go in link "/etc/nginx/sites-available/default.com" do
[2014-01-14 17:27:51 -0500] nowthatsamatt: link or to?
[2014-01-14 17:28:06 -0500] jslusher: imeyer: by typing "help" or is there a help section specifically for the databags command?
[2014-01-14 17:28:33 -0500] imeyer: jslusher: yah: halp(:command)
[2014-01-14 17:28:48 -0500] jslusher: ah. that's what I missed.
[2014-01-14 17:39:44 -0500] ajohnstone: From within a chef recipe how can I detect whether another file been included?
[2014-01-14 17:40:23 -0500] jslusher: I'm confused by the user cookbook
[2014-01-14 17:40:49 -0500] zxd: is this valid code  http://pastebin.com/Ziij3Lk4 ?
[2014-01-14 17:42:52 -0500] jslusher: I have this as my recipe. http://pastebin.com/Vk7XYsZy
[2014-01-14 17:42:57 -0500] heathsnow_: anyone seen this error using Ridley?  I just can't figure it out:  {"error":["Invalid key  in request body"]}
[2014-01-14 17:43:47 -0500] jslusher: I'm including it with this line:  include_recipe 'my-users::a_user'
[2014-01-14 17:44:28 -0500] jslusher: when I run the book on a server, the book runs, but it only creates the a_user group and not the a_user itself
[2014-01-14 17:45:02 -0500] jslusher: the a_user exists in the data bag and I can see the user item from the client
[2014-01-14 17:56:23 -0500] irr: Ohai Chefs. Any ideas how to pass an additional variable to authorized_keys template to opscode's users cookbook?
[2014-01-14 17:57:14 -0500] irr: there's only an array of keys for now so it doesn't help to use authorized_keys.erb from another cookbook
[2014-01-14 17:57:26 -0500] irr: I mean without actual editing the cookbook
[2014-01-14 17:57:30 -0500] Guest93895: Is there a way to generate GPG keys for specific users in Chef?
[2014-01-14 17:57:33 -0500] irr: chef-rewind doesn't seem to help here
[2014-01-14 18:03:01 -0500] ec99988: hi, has anyone seen this error before, Encoding::InvalidByteSequenceError: "\xC3" on US-ASCII ?  I had installed chef-client on the Solaris host.  When it tries to start up, there's this fatal error.
[2014-01-14 18:06:48 -0500] mmazing2: if i want to add custom attributes to a recipe, should i just make a new .rb file in the attributes directory?
[2014-01-14 18:08:17 -0500] dsa: mmazing2: no in the recipes directory
[2014-01-14 18:09:01 -0500] mmazing2: for instance, i have the "apache2" recipe, and there is an attributes directory that comes with it, modifying attributes/default.rb doesn't seem to have any effect
[2014-01-14 18:09:05 -0500] mmazing2: is that only for the initial setup?
[2014-01-14 18:16:51 -0500] mmazing2: when setting the node attributes i get "Node attributes are read-only when you do not specify which precedence level to set."
[2014-01-14 18:22:30 -0500] nowthatsamatt: my chef run errors out on hg, but before it i have yum install -y mercurial.  is there a reason these aren't running in order?  https://gist.github.com/7e2870183770edf5035f
[2014-01-14 18:23:15 -0500] nowthatsamatt: i feel like i'm missing some basic understanding and for that i apologize
[2014-01-14 18:24:40 -0500] nowthatsamatt: meaning, when i ssh in manually and attempt to install mercurial, it installs it.  meaning it wasn't installed before.
[2014-01-14 18:24:47 -0500] nowthatsamatt: (by the chef run)
[2014-01-14 18:25:45 -0500] Guest24935: Hi guys
[2014-01-14 18:25:54 -0500] CPS: nowthatsamatt: http://docs.opscode.com/resource_package.html
[2014-01-14 18:26:17 -0500] CPS: don't use execute like that unless the built-in chef stuff doesn't work
[2014-01-14 18:26:38 -0500] geggam: how do i make lazy work
[2014-01-14 18:26:38 -0500] geggam: FATAL: NoMethodError: undefined method `lazy' for Chef::Resource::Directory
[2014-01-14 18:27:12 -0500] Guest24935: Is there a recipe to generate GPG keys for a specific user?
[2014-01-14 18:27:31 -0500] nowthatsamatt: CPS: roger that, i wasn't aware there's a package command
[2014-01-14 18:27:33 -0500] nowthatsamatt: thanks!
[2014-01-14 18:27:44 -0500] CPS: np
[2014-01-14 18:27:57 -0500] CPS: check the resources page there, there's a resource for most things
[2014-01-14 18:28:24 -0500] nowthatsamatt: yessir, much thanks!
[2014-01-14 18:29:02 -0500] mmazing2: anyone here have experience with aws opsworks?
[2014-01-14 18:29:42 -0500] mmazing2: i think i'm the only person on the entire planet trying to use it
[2014-01-14 18:32:31 -0500] geggam: that might be a clue ?
[2014-01-14 18:33:07 -0500] mmazing2: this template has "<% node['apache']['listen_ports'].map(&:to_i).uniq.each do |port| -%>" but i cannot figure out where to modify the listen_ports attribute
[2014-01-14 18:33:52 -0500] mmazing2: seems like that should be a really simple straightforward thing to modify, since it's supposed to be all nice and easy to work with
[2014-01-14 18:35:45 -0500] CPS: mmazing2: try look at the node's attributes in the webui
[2014-01-14 18:36:38 -0500] mmazing2: CPS: i'm not sure i have a webui, is that part of chef-server?
[2014-01-14 18:36:42 -0500] CPS: yeah
[2014-01-14 18:37:26 -0500] mmazing2: apparently opsworks uses chef-solo
[2014-01-14 18:38:02 -0500] mmazing2: in the attributes/default.rb, there is default['apache']['listen_ports'] = %w[80], but if i modify that line, nothing happens
[2014-01-14 18:39:22 -0500] mmazing2: which makes sense because it's looking for node['apache']['listen_ports'], but if i try and use "node" instead of "default" i get the "Node attributes are read-only when you do not specify which precedence level to set."
[2014-01-14 18:41:19 -0500] CPS: http://docs.opscode.com/knife_node.html
[2014-01-14 18:41:25 -0500] CPS: try that
[2014-01-14 18:42:56 -0500] mmazing2: kinda goes against what I am trying to accomplish here, i don't want to have to go in and run a bunch of knife commands every time i want to rebuild this cluster
[2014-01-14 18:43:50 -0500] CPS: ok. can you specify the value in a role or environment?
[2014-01-14 18:44:16 -0500] CPS: or in a recipe, see the bottom of this http://docs.opscode.com/chef_overview_attributes.html
[2014-01-14 19:15:47 -0500] sfiggins: Is there an appropriate way to notify a service defined in another included cookbook?
[2014-01-14 19:16:08 -0500] sfiggins: Or do you just make another service definition to use?
[2014-01-14 19:17:11 -0500] spheromak: sfiggins: you can do that as long as the cookbook is loaded. can ensure that with include_recipe
[2014-01-14 19:17:17 -0500] spheromak: *recipe is loaded
[2014-01-14 19:17:38 -0500] geggam: where do i change the version of chef client the server downloads ?
[2014-01-14 19:24:34 -0500] mattray: geggam: you can pass the version in when you bootstrap
[2014-01-14 19:25:34 -0500] mattray: --bootstrap-version
[2014-01-14 19:27:13 -0500] geggam: thanks mattray ...
[2014-01-14 19:28:37 -0500] geggam: here is a wierd thing i discovered
[2014-01-14 19:28:40 -0500] geggam: [danielbe@ec2-54-226-57-108 ~]$ which knife
[2014-01-14 19:28:40 -0500] geggam: /opt/chef-server/embedded/bin/knife
[2014-01-14 19:28:40 -0500] geggam: [danielbe@ec2-54-226-57-108 ~]$ rpm -qa | grep chef
[2014-01-14 19:28:41 -0500] geggam: chef-server-11.0.8-1.el6.x86_64
[2014-01-14 19:28:41 -0500] geggam: chef-11.8.2-1.el6.x86_64
[2014-01-14 19:28:41 -0500] geggam: [danielbe@ec2-54-226-57-108 ~]$ knife --version
[2014-01-14 19:28:43 -0500] geggam: Chef: 11.4.0
[2014-01-14 19:28:49 -0500] geggam: ;)
[2014-01-14 19:40:07 -0500] kevinburke: Is there a way to run chef's doc formatter, but not have it write ANSI escape codes to a file if you redirect chef stdout?
[2014-01-14 19:50:24 -0500] kevinburke: Doh,  --[no-]color                 Use colored output, defaults to enabled
[2014-01-14 19:58:45 -0500] freezey: has anyone tried to take a databag(json) and convert the json to yaml  or even loop through the data bag to create the yaml file?
[2014-01-14 20:16:42 -0500] wdilly: Hi guys, I am having a strange issue where group ownership on a directory is not modified on the intial chef run but only on the second, the code that sets it is here: http://fpaste.org/68399/73052213/
[2014-01-14 20:16:56 -0500] heathsnow_: grrr, celluloid broke my ridley
[2014-01-14 20:17:51 -0500] broconne: are you using group ids or group names?
[2014-01-14 20:17:59 -0500] wdilly: group names.
[2014-01-14 20:20:35 -0500] broconne: seen some odd stuff w/ names vs. ids.. can't recall the exact case.   anything else managing that dir?
[2014-01-14 20:21:55 -0500] wdilly: broconne, no, nothing else
[2014-01-14 20:22:28 -0500] wdilly: the group is not a local group however, it is from ldap
[2014-01-14 20:23:02 -0500] wdilly: nsswitch has "ldap files" though
[2014-01-14 20:23:08 -0500] broconne: that is where I was experiencing my pain..  I think I switched it to group ids instead.
[2014-01-14 20:25:27 -0500] shlant: if multiple resources notify a service to restart, will it only happen once?
[2014-01-14 20:26:47 -0500] borntyping: Yes if they use :immediatly, no if they use :delayed - I can't remember which is default though
[2014-01-14 20:27:10 -0500] broconne: delays only happens once
[2014-01-14 20:27:14 -0500] broconne: at the end of the chef run
[2014-01-14 20:28:39 -0500] shlant: ok thanks!
[2014-01-14 20:33:40 -0500] maruq: hi guys
[2014-01-14 20:34:07 -0500] maruq: anyone played with unattended installations with windows_package?
[2014-01-14 20:34:54 -0500] maruq: specifically, how do you know if something is installing in the background vs. it just failed / skipped
[2014-01-14 20:35:30 -0500] maruq: it seems that under windows, cli installs return instantly, but keep going in background
[2014-01-14 20:35:51 -0500] maruq: (linux / mac guy, learning to adapt)
[2014-01-14 20:37:38 -0500] juliancdunn: maruq: it depends on what kind of package... I believe msiexec will block till done
[2014-01-14 20:37:49 -0500] paulczar: it's not clear how to set the environment when spinning up a server with the knife rackspace plugin    anyone know before I start chasing my tail too much ?
[2014-01-14 20:37:52 -0500] juliancdunn: msiexec can also take a /l flag if you want to log messages to a file
[2014-01-14 20:38:59 -0500] jergason: if a cookbook has a default recipe, do i need to specify `recipe[some_cookbook:default]` in the run list, or will it pick the default one by itself?
[2014-01-14 20:39:07 -0500] borntyping: jergason: the latter
[2014-01-14 20:39:15 -0500] jergason: borntyping: thanks good sir
[2014-01-14 20:40:08 -0500] maruq: juliancdunn: ok, good to know. so "/l c:\foo\bar.log" ?
[2014-01-14 20:41:25 -0500] maruq: juliancdunn: not sure if it's msiexec (on other computer). Is there a place to learn the options for other installers?
[2014-01-14 20:45:41 -0500] juliancdunn: maruq: yes, I believe -- you can also just run msiexec /? and see the format for /L
[2014-01-14 20:45:55 -0500] juliancdunn: it's Windows, so all the other installers have different ways of doing things
[2014-01-14 20:46:19 -0500] maruq: juliancdunn: yep.. Windows is a fun beast
[2014-01-14 20:46:42 -0500] maruq: juliancdunn: I'm secretly hoping Win 9 is Debian with a new UI ;)
[2014-01-14 20:46:43 -0500] juliancdunn: yeah, "Add/Remove Programs" is not a real package manager :-(
[2014-01-14 20:47:53 -0500] jkline: How do I delete a node attribute?
[2014-01-14 20:48:40 -0500] jkline: from within a chef recipe
[2014-01-14 20:49:00 -0500] Cope: press the delete key until the characters have gone
[2014-01-14 20:49:44 -0500] maruq: juliancdunn: haha, sadly there's a few people that still need to use "business computers". oh well
[2014-01-14 20:50:12 -0500] maruq: thanks for the hints though... I guess I'll just feed /? in & see what I can get back from there
[2014-01-14 21:00:11 -0500] wdilly: so I want to set a variable equal to the results of a shell command but need to use a ruby variable in the chef command I want to do something like var = `getent passwd #{var2} | cut -d: -f4` but im falling flat on how to accomplish
[2014-01-14 21:05:15 -0500] juliancdunn: wdilly: I'd say to use shell_out... let me see if I can find an example
[2014-01-14 21:05:56 -0500] wdilly: juliancdunn, ty
[2014-01-14 21:09:51 -0500] juliancdunn: wdilly: have a look at some of the code here - https://github.com/opscode-cookbooks/build-essential/blob/master/recipes/mac_os_x.rb
[2014-01-14 21:10:11 -0500] juliancdunn: lines 21-23... ignore the rest
[2014-01-14 21:12:41 -0500] garrett__: If you edit an environment's cookbook version locks in the chef management interface, is that supposed to be an additive thing, or an all-or-nothing sort of deal? i.e: if I define some random environment, lock it to 5 cookbook versions, save it, then edit it, add another cookbook version, that last one overwrites the presence of all the previous entries
[2014-01-14 21:13:42 -0500] wdilly: result = Mixlib::ShellOut.new("getent passwd #{var2} | cut -d: -f4").run_command
[2014-01-14 21:13:47 -0500] wdilly: juliancdunn, ^ ?
[2014-01-14 21:14:29 -0500] juliancdunn: wdilly: yup, seems legit
[2014-01-14 21:14:44 -0500] wdilly: juliancdunn, ty, will give it a go.
[2014-01-14 22:06:52 -0500] MrBIOS: Hi folks, I just did an upgrade from Chef Server 11.0.8 to 11.0.10 to address some security vulnerabilities, and now the attributes/values that were previously displaying in the "environment default and override attributes" section of the edit pane in the WebUI is blank
[2014-01-14 22:07:11 -0500] MrBIOS: I can still see the correct values with ' knife environment edit foo'
[2014-01-14 22:07:27 -0500] MrBIOS: but I have a bunch of people who edit these values on their nodes via the webui
[2014-01-14 22:12:35 -0500] ponyofdeath: hi, anyone know why after chef-client version > 11.4 i get this error in my cookbooks http://paste.ubuntu.com/6752916 >
[2014-01-14 22:17:49 -0500] estebistec: what's the preferred way for a cookbook to upgrade a version (say of python) on a re-run with an updated attribute?
[2014-01-14 22:18:03 -0500] estebistec: I'm looking at the python cookbook and if I just change the attribute, it doesn't install the new version
[2014-01-14 22:18:33 -0500] coderanger: schisamo: Ping. Will omnibus automatically create its output folder or do I need to do that ahead of time?
[2014-01-14 22:19:48 -0500] juliancdunn: ponyofdeath: not sure, but that's legacy notification syntax
[2014-01-14 22:21:38 -0500] juliancdunn: I've never seen it take an array of things to notify... usually you just write the notifications one-by-one
[2014-01-14 22:22:58 -0500] schisamo: coderanger: the underlying/embedded Rake task should create the directory for you. https://github.com/opscode/omnibus-ruby/blob/a7cc5cf84f7d6c8a7a9fdd7e6a11f0cd4b8fd6f3/lib/omnibus/project.rb#L723-L724
[2014-01-14 22:23:38 -0500] coderanger: schisamo: Aha, I was grepping around for mkdir :-)
[2014-01-14 22:25:47 -0500] coderanger: schisamo: thanky
[2014-01-14 22:26:20 -0500] garrett__: Is librarian-chef supposed to hijack knife download? ie: Would create chef/integration/knife/install/1f4a2f285da978a99f96cebe5c6466ec/environments
[2014-01-14 22:26:29 -0500] schisamo: coderanger: np!
[2014-01-14 22:26:51 -0500] coderanger: schisamo: The omnibus cookbook could probably use some lovin'
[2014-01-14 22:27:13 -0500] coderanger: (re: output folder mgmt)
[2014-01-14 22:27:28 -0500] prometheanfire: so, the yum cookbook doesn't pass it's tests...
[2014-01-14 22:27:43 -0500] schisamo: coderanger: more than this? https://github.com/opscode-cookbooks/omnibus/blob/master/recipes/default.rb#L31-L40
[2014-01-14 22:28:44 -0500] coderanger: schisamo: Also https://github.com/opscode/omnibus-ruby/blob/da7440dea5590e5364acf6ba84058abee730ccb7/lib/omnibus/templates/Vagrantfile.erb#L79
[2014-01-14 22:28:51 -0500] coderanger: I don't think thats used in general
[2014-01-14 22:29:09 -0500] prometheanfire: the default recipe doesn't work at all from what I can see :|
[2014-01-14 22:29:36 -0500] prometheanfire: Cannot find a resource for yum_globalconfig on centos version 6.4
[2014-01-14 22:30:30 -0500] coderanger: prometheanfire: https://github.com/opscode-cookbooks/yum/blob/master/resources/globalconfig.rb
[2014-01-14 22:30:37 -0500] coderanger: prometheanfire: What version of Chef are you using?
[2014-01-14 22:32:06 -0500] prometheanfire: Chef 11.8.2
[2014-01-14 22:32:25 -0500] prometheanfire: ya, it should be in there
[2014-01-14 22:32:30 -0500] coderanger: Should work working then :-)
[2014-01-14 22:32:48 -0500] schisamo: coderanger: yeah I think we need to just nuke build_dir in that generator template
[2014-01-14 22:33:33 -0500] coderanger: schisamo: Just minor housekeeping from the last year or whatever of omnibus dev :D
[2014-01-14 22:40:02 -0500] prometheanfire: it's not though, when was the last time it was tested?
[2014-01-14 22:41:36 -0500] juliancdunn: prometheanfire: I just ran all the spec tests, they passed?
[2014-01-14 22:41:48 -0500] juliancdunn: and I did 'knife cookbook site download' and the provider is there...
[2014-01-14 22:42:11 -0500] prometheanfire: ok, let me get you useful output
[2014-01-14 22:51:17 -0500] ponyofdeath: what is a good way to check if the gid exists before i set it on a file?
[2014-01-14 22:54:34 -0500] someara: make sure you
[2014-01-14 22:54:53 -0500] someara: 've made a group with that gid earlier in your recipe =)
[2014-01-14 22:56:03 -0500] ponyofdeath: someara: well this is because i use ldap
[2014-01-14 22:56:21 -0500] someara: okay
[2014-01-14 22:56:34 -0500] ponyofdeath: so sometimes the ldap has not been set up properly or the nscd cache is not there so it fails
[2014-01-14 22:57:18 -0500] someara: are you relying on ldap for system user data?
[2014-01-14 22:57:48 -0500] someara: because here's one of the many, many, many, many, many reasons why you should never do that ;)
[2014-01-14 22:58:03 -0500] someara: protip(tm)
[2014-01-14 22:58:41 -0500] someara: anyway.. you can give any resource not_if and only_if guards
[2014-01-14 22:58:46 -0500] ponyofdeath: someara: yeah i def hear ya
[2014-01-14 23:02:23 -0500] someara: I'd configure nssswitch to look at files first, then ldap, then create local system users with known gids
[2014-01-14 23:08:39 -0500] geggam: impotence !
[2014-01-14 23:26:25 -0500] coderanger: geggam: I think "idempotence" is the word you are looking for
[2014-01-14 23:26:45 -0500] coderanger: ponyofdeath: You can also use a Ruby LDAP lib to query LDAP and update it if needed
[2014-01-14 23:28:23 -0500] geggam: heh... xchat spell autocorrect coderanger
[2014-01-14 23:28:48 -0500] geggam: i was relaxing.. finally got the app to install with all the craziness
[2014-01-14 23:29:06 -0500] geggam: next.. autoscale + elb
[2014-01-14 23:29:17 -0500] geggam: then... boredom
[2014-01-14 23:31:26 -0500] Will: Hi
[2014-01-14 23:31:53 -0500] cyrus_mc: Looking at building a standalone deployment of Chef. Reading the requirements doc it says 4 cores. Really, 4 cores? Is that all for one system or spread over multiple systems?
[2014-01-14 23:31:59 -0500] Guest61419: Does chef have an /r/ on reddit?
[2014-01-14 23:32:18 -0500] coderanger: cyrus_mc: The server runs a lot of stuff
[2014-01-14 23:32:28 -0500] coderanger: Guest61419: Theres r/devops but it is pretty quiet
[2014-01-14 23:32:39 -0500] Guest61419: gah.
[2014-01-14 23:32:58 -0500] Guest61419: trying to figure out an issue, but can't seem to find a live community (besides this) to get answers
[2014-01-14 23:33:05 -0500] coderanger: Guest61419: So ask here?
[2014-01-14 23:33:10 -0500] Guest61419: I guess.
[2014-01-14 23:33:25 -0500] coderanger: Guest61419: There is also the mailing list, StackOverflow and friends, and Twitter
[2014-01-14 23:33:36 -0500] Guest61419: Have a bash script that runs really wonderfully when I execute it, but it craps out when execute in chef.
[2014-01-14 23:33:48 -0500] coderanger: Guest61419: Whats the error?
[2014-01-14 23:34:40 -0500] geggam: cyrus_mc, if you arent really doing much it doesnt take as many cores
[2014-01-14 23:35:22 -0500] coderanger: number of cores is pretty moot since physical hardware with less than 8 isn't easy to find anymoer
[2014-01-14 23:35:26 -0500] geggam: m1.large is running it fine rigth now 7645988k total,  5317876k used,  2328112k free,   324788k buffers
[2014-01-14 23:35:32 -0500] coderanger: and if you are talking about public cloud, RAM is the limiting factor
[2014-01-14 23:35:53 -0500] geggam: 2 cores
[2014-01-14 23:36:08 -0500] geggam: but i dont have many clients checking in
[2014-01-14 23:36:17 -0500] geggam: 20ish on that system
[2014-01-14 23:36:49 -0500] coderanger: geggam: "cores" on a Xen VM is a fuzzy concept anyway
[2014-01-14 23:37:15 -0500] geggam: amen
[2014-01-14 23:37:26 -0500] geggam: performance is too :)
[2014-01-14 23:38:05 -0500] coderanger: I think Amazon VPCUs show up as supporting HT, so its kinda sorta 4 cores in on an m1.large
[2014-01-14 23:38:30 -0500] geggam: yeah...as long as your neighbor isnt using them
[2014-01-14 23:38:52 -0500] geggam: then its NO CORE FOR YOU
[2014-01-14 23:39:01 -0500] coderanger: Yeah "flags:  ht"
[2014-01-14 23:39:14 -0500] coderanger: (ht == hyperthreading for those playing along at home)
[2014-01-14 23:39:45 -0500] flaccid: home theatre :p
[2014-01-14 23:40:07 -0500] geggam: top only shows two cpu... wonder if you get one ht core ?
[2014-01-14 23:40:14 -0500] geggam: i dunno the specs
[2014-01-14 23:40:23 -0500] coderanger: geggam: No idea, I've never looked in great detail
[2014-01-14 23:40:26 -0500] geggam: me either
[2014-01-14 23:40:26 -0500] flaccid: cat /proc/cpuinfo
[2014-01-14 23:40:47 -0500] geggam: two of these       : Intel(R) Xeon(R) CPU E5-2650 0 @ 2.00GHz
[2014-01-14 23:40:53 -0500] geggam: that is shitty
[2014-01-14 23:41:00 -0500] coderanger: but yeah, an m1.large is about the smallest I would recommend running a chef server on
[2014-01-14 23:41:18 -0500] coderanger: You can get it running on an m1.medium or perf1-2
[2014-01-14 23:41:25 -0500] flaccid: well thats the virtual cpu, what it delivers and how consistent is another story. ec2 is not consistent, gce is
[2014-01-14 23:41:29 -0500] coderanger: but its annoying and requires Solr tuning
[2014-01-14 23:41:56 -0500] coderanger: flaccid: <cynic>GCE is better because no one uses it and they have CPU to spare</cynic>
[2014-01-14 23:42:37 -0500] flaccid: hah, how much its used is increasing every day and they are making sure it doesn't deviate
[2014-01-14 23:43:10 -0500] divbell: haha coderanger
[2014-01-14 23:43:11 -0500] flaccid: google uses it themselves already, they are just exposing their DCs
[2014-01-14 23:43:24 -0500] coderanger: flaccid: Thats what AWS said at first too
[2014-01-14 23:44:13 -0500] flaccid: we can only wait and see but i have faith
[2014-01-14 23:44:50 -0500] geggam: in the cloud.... o no's... amazon is letting
[2014-01-14 23:44:55 -0500] geggam: ewps
[2014-01-14 23:45:07 -0500] geggam: that was not meant for your eyes
[2014-01-14 23:45:15 -0500] geggam: take pencil and stab eyes until cant see
[2014-01-14 23:45:28 -0500] geggam: ink pen will work

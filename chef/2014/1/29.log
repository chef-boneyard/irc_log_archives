[2014-01-29 00:44:29 -0500] rljohnsn: @patrickv thank you for the youtube
[2014-01-29 02:16:09 -0500] martinisoft: Okay so if anyone finds themselves hosted on BlueBox's OpenVZ system, this little Ohai plugin will help you tremendously: https://gist.github.com/martinisoft/8673261
[2014-01-29 02:16:35 -0500] martinisoft: Its not written for OHAI 7 yet, will do that soonish
[2014-01-29 03:38:35 -0500] helfire: kitchen test bombs out it seems because eth1 doesnt get an ip(which is fine, i dont have a multi vm setup in vagrant) and a subsiquent kitchen test works
[2014-01-29 03:38:35 -0500] helfire: Stderr from the command:
[2014-01-29 03:38:36 -0500] helfire: ---- End output of vagrant up --no-provision --provider=virtualbox ----
[2014-01-29 03:38:36 -0500] helfire: Ran vagrant up --no-provision --provider=virtualbox returned 1]
[2014-01-29 03:38:46 -0500] helfire: only thing above it is Bringing up interface eth1:  Device eth1 does not seem to be present, delaying initialization.
[2014-01-29 03:38:47 -0500] helfire: [FAILED]
[2014-01-29 03:44:39 -0500] yuppers: helfire: did you try running it with -l debug
[2014-01-29 03:45:30 -0500] helfire: no, i'm just setting eth1 now, but its taking forever, we'll see
[2014-01-29 03:50:45 -0500] helfire: that didnt change anything
[2014-01-29 03:51:30 -0500] helfire: debug doesnt give me much to go on, still virtualbox exits with 1 but i've ran vagrant with this box/config for the past 6 months. Trying the templated file directly now
[2014-01-29 03:55:07 -0500] helfire: ok it doesnt like setting the hostname
[2014-01-29 03:55:13 -0500] helfire: it == my box
[2014-01-29 04:08:16 -0500] helfire: rhel just needs to have a vagrant box so i dont have to keep messing with mine
[2014-01-29 04:09:52 -0500] teukka: helfire: set VAGRANT_LOG=debug env var. then you should get vagrant's debug logs somewhere in .kitchen/
[2014-01-29 04:10:00 -0500] helfire: yep, i see it now
[2014-01-29 04:10:10 -0500] teukka: and you can dig the command which fails
[2014-01-29 04:10:22 -0500] helfire: my eth1 is not really there, so service network restart exits with 1
[2014-01-29 04:10:36 -0500] helfire: now i get Class: Kitchen::ActionFailed Message: Failed to complete #converge acti
[2014-01-29 04:10:37 -0500] helfire: on: [undefined method `register_middleware' for #<Faraday::Connection
[2014-01-29 04:11:42 -0500] helfire: ---Nested Exception--- Class: NoMethodError  Message: undefined method `register_middle
[2014-01-29 04:11:43 -0500] helfire: ware' for #<Faraday::Connection
[2014-01-29 04:13:24 -0500] helfire: ok going to see if bundle'in em helps
[2014-01-29 04:21:35 -0500] helfire: ok bundle worked
[2014-01-29 04:21:52 -0500] helfire: $ du -hs vendor/bundle/
[2014-01-29 04:21:53 -0500] helfire: 145Mvendor/bundle/
[2014-01-29 04:21:59 -0500] helfire: for every cookbook
[2014-01-29 04:24:10 -0500] helfire: does test kitchen destroy the vm every run?
[2014-01-29 04:24:45 -0500] jbz: helfire if you use kitchen test it does; you can use 'kitchen converge' instead, which leaves the VM running IIRC
[2014-01-29 04:25:50 -0500] helfire: ahh
[2014-01-29 04:25:56 -0500] helfire: so new to it sorry for the 101 questions
[2014-01-29 04:26:10 -0500] jbz: np here :-)
[2014-01-29 04:29:21 -0500] helfire: i am trying to figure out how to map all my vagrant-berks stuff to testkitchen
[2014-01-29 04:29:56 -0500] helfire: and next up is databags
[2014-01-29 04:31:28 -0500] helfire: it mayhave automagically found my data bags (since the folder name is data_bags)
[2014-01-29 04:33:27 -0500] helfire: not bad, worked with only 45 min of messing around :)
[2014-01-29 05:52:16 -0500] krz: anyone deploy to opsworks? what you using to set environment variables?
[2014-01-29 07:11:17 -0500] lietu: I'd like to run a few lines of bash to produce output, capture that in a variable and use that in a template .. what'd be the best way to do this with in a chef recipe?
[2014-01-29 07:14:11 -0500] mattt: lietu: not a clue :P
[2014-01-29 07:23:26 -0500] mattt: lietu: looks like Chef::Mixin:ShellOut is one way
[2014-01-29 08:48:40 -0500] andrejj: hello! I'm using hosted chef on opscode.  I was added to my companys organization. Now I can't setup my a local chef folder to connect to the hosted server.
[2014-01-29 08:49:34 -0500] andrejj: Download starters kit warbs about resetting a password but when I select to procede anyway it fails with an error.
[2014-01-29 08:50:00 -0500] andrejj: So am I  missing something ?
[2014-01-29 08:51:19 -0500] slicknick: what exactly are yo doing when you encounter this warning?
[2014-01-29 08:51:25 -0500] slicknick: command line? web ui?
[2014-01-29 08:52:05 -0500] slicknick: i guess thats irrelevant, actually ... the password someone set up for you needs ot be change before you can do any haxing
[2014-01-29 08:52:46 -0500] slicknick: login however tickles your fancy (really: someone should have advised you what to do)
[2014-01-29 08:52:56 -0500] slicknick: ya dig ?
[2014-01-29 08:55:35 -0500] andrejj: I'm using the web interface: admnistration -> I select my company(tha one i was inveted to) -> start kit -> download starter kit -> Your user and organization keys will be reset. Are you sure you want to do this? -> YES ->We're sorry, but something went wrong.
[2014-01-29 08:56:12 -0500] slicknick: that i cannot help you with
[2014-01-29 08:56:23 -0500] slicknick: log a ticket? contact support?
[2014-01-29 08:57:00 -0500] andrejj: hm ok
[2014-01-29 08:57:42 -0500] andrejj: ty anyway
[2014-01-29 08:58:03 -0500] slicknick: did you change your password? your original statements suggest you need to find the preferences / options / settings and change your password
[2014-01-29 08:58:09 -0500] slicknick: before doing anything
[2014-01-29 09:00:48 -0500] andrejj: well I think my password is global and doesn't really apply to this use case
[2014-01-29 09:01:17 -0500] andrejj: I was able to go through the tutorial and work on my personal organisation
[2014-01-29 09:01:59 -0500] andrejj: but I don't know how to setup local chef-repo that would work with the organization a was added to
[2014-01-29 09:02:05 -0500] slicknick: that doesnt meant much to me, sorry. never used hosted chef
[2014-01-29 09:02:35 -0500] slicknick: why are you so reluctant to try changing your password
[2014-01-29 09:03:08 -0500] andrejj: well I don't want to change the password that's not my goal
[2014-01-29 09:03:36 -0500] andrejj: I just want to be able to connect to chef server
[2014-01-29 09:03:45 -0500] andrejj: with knife
[2014-01-29 09:03:50 -0500] slicknick: well based on the original message you presented, it damn well seems like you may need to
[2014-01-29 09:03:53 -0500] slicknick: whether you want ot or not
[2014-01-29 09:04:36 -0500] slicknick: it sounds like, and rightfully ePHing so, the password created for you wont authorize you to do a single damn thing
[2014-01-29 09:04:37 -0500] slicknick: heh
[2014-01-29 09:04:50 -0500] slicknick: thats all i have to say about that
[2014-01-29 09:05:05 -0500] slicknick: time for some not so fresh air
[2014-01-29 09:05:31 -0500] andrejj: ok so I probably need the owner pass me the auth keys "manually"
[2014-01-29 09:19:52 -0500] \du: Hello, i have a newbie question, all the attributes files of my cookbooks are loaded before any recipe ?
[2014-01-29 09:20:45 -0500] slicknick: thats a good one
[2014-01-29 09:21:26 -0500] \du: all the files inside attributes folder http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2014-01-29 09:56:11 -0500] jonlives: \du: yes they are - the exact load order is shown here: https://github.com/opscode/chef/blob/11-stable/lib/chef/run_context/cookbook_compiler.rb#L69
[2014-01-29 10:01:08 -0500] ocholetras: hi!
[2014-01-29 10:01:29 -0500] ocholetras: anyone knows how to debug cookbook version constraints conflict=?
[2014-01-29 10:01:30 -0500] slicknick: whats the good word
[2014-01-29 10:01:47 -0500] slicknick: id put money on it someone does
[2014-01-29 10:02:02 -0500] slicknick: ask your question. pointed and specifically, as much detail as possible
[2014-01-29 10:02:06 -0500] slicknick: dont make us pry it out of you
[2014-01-29 10:02:16 -0500] slicknick: dont ask about asking
[2014-01-29 10:02:26 -0500] slicknick: remember Nike .. JUST DO OIT
[2014-01-29 10:02:33 -0500] flaccid: :/
[2014-01-29 10:02:37 -0500] ocholetras: XD
[2014-01-29 10:02:59 -0500] ocholetras: Client execution freezes waiting for server to resolve depenendencies
[2014-01-29 10:03:14 -0500] ocholetras: is there an easy way to see if there are a conflict on dep version of cookbooks?
[2014-01-29 10:03:44 -0500] flaccid: ocholetras: the depends in metadata does not have a version option
[2014-01-29 10:03:58 -0500] ocholetras: depends 'nginx', '<= 2.0.8'
[2014-01-29 10:03:59 -0500] ocholetras: depends 'yum', '<= 2.4.4'
[2014-01-29 10:04:04 -0500] ocholetras: yes i have
[2014-01-29 10:04:08 -0500] ocholetras: Xd
[2014-01-29 10:04:24 -0500] ocholetras: you can put versions on depends
[2014-01-29 10:04:43 -0500] flaccid: oh sorry, wow i forgot about that. probably because nothing checks and traverses it
[2014-01-29 10:05:16 -0500] flaccid: actually i think chef might in its run, but outside of that i'm not sure
[2014-01-29 10:06:10 -0500] ocholetras: ok, its a pain in the ass but you will finally get to the conflict.. just asking if there is an easy or fastest way
[2014-01-29 10:06:11 -0500] ocholetras: ^^
[2014-01-29 10:06:15 -0500] flaccid: ocholetras: i think this is suited for http://lists.opscode.com/sympa/arc/chef/2013-10/msg00440.html
[2014-01-29 10:06:34 -0500] ocholetras: LOL
[2014-01-29 10:06:38 -0500] ocholetras: great!
[2014-01-29 10:06:51 -0500] flaccid: a colleague made this, if you need enhancements he is totally open
[2014-01-29 10:07:24 -0500] flaccid: the problem with metadata parsing has always been recursion, so i'm not sure if that is in play here
[2014-01-29 10:08:39 -0500] slicknick: i like it i like it
[2014-01-29 10:08:40 -0500] aujt74: Anyone come across ASCII/UTF issues with chef-zero? The cookbook works fine with chef-solo but testing with chef-zero throws an "Unknown server error: The server had a fatal error attempting to load the node data", "ERROR: #<Encoding::InvalidByteSequenceError: "\xE2" on US-ASCII>" Stack trace here https://gist.github.com/gsreynolds/cef010076edb21dfb0d4. Best I can tell there isn't any unusual characters in the cookbook or the test-kitchen setup...
[2014-01-29 10:09:44 -0500] slicknick: doesnt look like an encoding problem. but instead a reference to soemtihng
[2014-01-29 10:09:49 -0500] slicknick: err .. misconfig
[2014-01-29 10:09:53 -0500] slicknick: i dunno exactly
[2014-01-29 10:10:02 -0500] ocholetras: flaccid:  /chef-repo/cookbooks$ taste
[2014-01-29 10:10:02 -0500] ocholetras: The path is not a cookbook path
[2014-01-29 10:10:04 -0500] ocholetras: :(
[2014-01-29 10:10:53 -0500] slicknick: heh
[2014-01-29 10:11:11 -0500] ocholetras: flaccid: my fault
[2014-01-29 10:11:29 -0500] ocholetras: flaccid: you need to be inside a cookbook dir not inside cookbookSS dir
[2014-01-29 10:11:30 -0500] ocholetras: ^^
[2014-01-29 10:11:38 -0500] slicknick: flaccid -- thats gotta be touch to swallow
[2014-01-29 10:11:59 -0500] flaccid: ocholetras: yes it says that https://github.com/arangamani/chef-taste#usage
[2014-01-29 10:12:49 -0500] slicknick: no doubt huge balls you must have to don that as you do
[2014-01-29 10:14:39 -0500] flaccid: english?
[2014-01-29 10:18:59 -0500] slicknick: your balls must be huge.
[2014-01-29 10:19:08 -0500] flaccid: ok
[2014-01-29 10:19:14 -0500] slicknick: not only to make up for a name like flaccid
[2014-01-29 10:19:26 -0500] flaccid: ok
[2014-01-29 10:19:26 -0500] slicknick: but that you rock the nam
[2014-01-29 10:19:27 -0500] slicknick: name
[2014-01-29 10:19:28 -0500] slicknick: heh
[2014-01-29 10:19:31 -0500] slicknick: dont mind me
[2014-01-29 10:19:36 -0500] flaccid: i resemble that
[2014-01-29 10:19:56 -0500] slicknick: that takes cajones
[2014-01-29 10:20:04 -0500] slicknick: i respect
[2014-01-29 10:20:55 -0500] slicknick: i bet you still crush
[2014-01-29 10:21:14 -0500] flaccid: what do i crush?
[2014-01-29 10:27:34 -0500] slicknick: box
[2014-01-29 13:12:08 -0500] daxroc: Hi all
[2014-01-29 13:12:22 -0500] daxroc: Anyone guide me on why this is failing ? https://travis-ci.org/3ofcoins/chef-cookbook-hostname/builds/17834385
[2014-01-29 13:20:33 -0500] kraM: Hi there. cookbook_path in knife.rb still working? I've something like cookbook_path = [ "/path/to/my/working/dir/cookbooks" ], but I need to provide -o argument to any local cookbook related command.
[2014-01-29 13:32:07 -0500] dswebb: Hi All.  Question, is there anyway to do a more granular user permissions for the community server where I can lock a user to only be able to do certain actions?  Ie, user bob can only upload / update cookbooks to environment development?
[2014-01-29 13:32:55 -0500] dswebb: Or am I out of luck and the only permissions I effectively have are admin or not admin?
[2014-01-29 13:38:56 -0500] drrk: dswebb: I think those are fetures of enterprise chef only atm
[2014-01-29 13:39:22 -0500] TheSerapher: ah excellent
[2014-01-29 13:39:26 -0500] TheSerapher: hey all :)
[2014-01-29 13:40:29 -0500] TheSerapher: Quick question since I am unable to make this stuff work: Kitchen + Encryped data bags. It seems to work to a point where kitchen copies the key to the box but when chef_zero chef_solo runs, it doesn't find the secret in /tmp/encrypted_data_bag_secret
[2014-01-29 13:43:29 -0500] TheSerapher: if anyone got a hint how to get that last thing to work, please ping me :)
[2014-01-29 13:47:36 -0500] AndrewG: Is there a sample chef recipe which reads back system configuration data, rather than configuring a system?
[2014-01-29 13:47:36 -0500] AndrewG: I'm looking to see if I can use chef to retrieve current configuration of a proprietary application.
[2014-01-29 13:48:45 -0500] AndrewG: I don't think I've seen any recipe yet which actually returns data, so I'm not sure if that's even possible.
[2014-01-29 13:52:56 -0500] drrk: it's ohai that's used to rather information
[2014-01-29 13:53:36 -0500] drrk: so maybe an ohai plugin, that gets the data, then it will be in the node data
[2014-01-29 13:53:37 -0500] TheSerapher: AndrewG: Use an existing or create a OHAI plugin to gather information from that third party app and store it as node attributes
[2014-01-29 13:53:46 -0500] TheSerapher: oh drrk beat me to it
[2014-01-29 13:54:13 -0500] AndrewG: Ah, thanks for the pointer. I'll go and read about OHAI
[2014-01-29 14:27:32 -0500] maile: Hello all.  I'm getting An application error occurred (Error 10000) trying to login on the frontend webserver while login on teh backend server works.  Where can i go to look for what's causing this issue on the frontend server ?  i looked at the logs but can't see anything for sure
[2014-01-29 14:28:05 -0500] shlant: maile: is that a chef question?
[2014-01-29 14:28:15 -0500] maile: enterprise chef
[2014-01-29 14:29:41 -0500] maile: enterprise chef UI:  trying to login.  was working last week.  i was playing around with VRRP on the front end webserver.  However I put back all the config and then try to log back in and now it just hung for awhile and then give me the Error 10000 .   need help on pointing what logs can i look to get a clue what's wrong
[2014-01-29 14:30:40 -0500] shlant: maile: does /etc/chef/server.rb set a log location?
[2014-01-29 14:31:50 -0500] maile: i looked at the opscode-webui/current log file and most are INFO:  .. only thing that says something rekated is [POST /login_exec] invalidate, pass
[2014-01-29 15:32:24 -0500] fak3r: so if I'm having slowness issues with 11.0.6 server would updating to 11.8.2-1 be the best 'next step' to try and fix it?
[2014-01-29 15:56:39 -0500] lmickh: How do you call an attribute file from a recipe?  I tried include_attribute "foo::bar", but I get an error saying "Cannot find a resource for include_attribute on redhat version 6.5"
[2014-01-29 15:57:41 -0500] jbz: lmickh: IIRC you can't call an attribute file from a recipe.  All attribute files in the cookbook should be loaded at the start of run.
[2014-01-29 15:58:14 -0500] jbz: lmickh: If you need to set attribs from a recipe, you can use node.set to set specific ones
[2014-01-29 15:58:40 -0500] kraM: One thing I do not get: attributes/default.rb: default['product']['mirror'] = 'http://some.url', recipes/default.rb does remote_file '/path/to/file' do source node['product']['mirror'] ... end. Chef fails with Chef::Exceptions::InvalidRemoteFileURI which has the uri scheme stripped.
[2014-01-29 15:58:42 -0500] lmickh: jbz: ah.  I must be looking at an out-dated page in the docs then...
[2014-01-29 15:58:48 -0500] jq_: I have a chef question regarding this recipe if anyone could help
[2014-01-29 15:58:56 -0500] jq_: https://github.com/opscode-cookbooks/apache2
[2014-01-29 15:59:11 -0500] jq_: Im using the
[2014-01-29 15:59:12 -0500] jq_: web_app "my_site" do
[2014-01-29 15:59:13 -0500] jq_:   server_name node['hostname']
[2014-01-29 15:59:14 -0500] jq_:   server_aliases [node['fqdn'], "my-site.example.com"]
[2014-01-29 15:59:15 -0500] jq_:   docroot "/srv/www/my_site"
[2014-01-29 15:59:16 -0500] jq_: end
[2014-01-29 15:59:23 -0500] jq_: in my own custom recipe
[2014-01-29 15:59:43 -0500] jq_: I have specified that my custom recipe depends on apache2
[2014-01-29 16:00:05 -0500] jq_: [2014-01-29T14:59:32+00:00] ERROR: template[/etc/apache2/sites-available/zend_local.conf] (its-vhosts::default line 29) had an error: Chef::Exceptions::FileNotFound: Cookbook 'its-vhosts' (0.0.1) does not contain a file at any of these locations:
[2014-01-29 16:00:06 -0500] jq_:   templates/ubuntu-12.04/web_app.conf.erb
[2014-01-29 16:00:07 -0500] jq_:   templates/ubuntu/web_app.conf.erb
[2014-01-29 16:00:07 -0500] jq_:   templates/default/web_app.conf.erb
[2014-01-29 16:00:18 -0500] jq_: is wep_app a lwrp
[2014-01-29 16:00:24 -0500] kraM: This happens at compile time
[2014-01-29 16:00:26 -0500] kraM: .
[2014-01-29 16:01:27 -0500] kraM: jq_: You might need to specify "cookbook apache" in the template call in its-vhosts::default recipe.
[2014-01-29 16:01:29 -0500] shlant: jq_: is apache2 in your run list or included in the recipe using include_recipe 'apache2'?
[2014-01-29 16:02:08 -0500] jq_: I used depends in metadata.rb let me try that
[2014-01-29 16:03:02 -0500] kraM: depends tells chef to download the cookbook to the machine.
[2014-01-29 16:03:16 -0500] jq_: in my recipe I had specified include_recipe "apache2"
[2014-01-29 16:03:18 -0500] kraM: It doesn't trigger any execution.i
[2014-01-29 16:05:33 -0500] jq_: apache2 is in my run list and in my recipe I have
[2014-01-29 16:06:12 -0500] jq_: include_recipe "apache2"
[2014-01-29 16:06:18 -0500] jq_: in my default.rb
[2014-01-29 16:06:36 -0500] jq_: depends 'apache2' is specified in my metadata.rb
[2014-01-29 16:11:33 -0500] jq_: think this is the solution I'm after http://stackoverflow.com/questions/16568924/how-to-create-a-virtual-host-with-vagrant-and-chef
[2014-01-29 16:23:27 -0500] AndrewG: I've been playing with OHAI on the node.
[2014-01-29 16:23:27 -0500] AndrewG: Is there a command on the workstation (knife, or something else) which can retrieve the ohai output from the server? (I presume it's stored on the server?)
[2014-01-29 16:24:14 -0500] AndrewG: knife status on the workstation claims chef has run recently on the node.
[2014-01-29 16:40:43 -0500] AndrewG: got it... knife node show --long
[2014-01-29 17:06:55 -0500] qurve: If I need to utilize a resource in multiple recipes within a cookbook, how do I declare that resource so it's available to both? This is probably stupidly simple.
[2014-01-29 17:07:18 -0500] qurve: In my case I need to declare a service resource and configure it, with action :nothing, but multiple recipes need to be able to send it starts/stops, etc.
[2014-01-29 17:07:43 -0500] qurve: (Eg, one recipe needs to start/restart it, another needs to stop it)
[2014-01-29 17:08:42 -0500] jchauncey: you can call the provider from any recipe and send the action you want
[2014-01-29 17:08:43 -0500] jbz: qurve: you shouldn't need to declare it multiple places.  Just send it notifications from the other places that need to start/stop it
[2014-01-29 17:09:06 -0500] qurve: So if the resource is declared in recipe1.rb, I can notify to it in recipe2?
[2014-01-29 17:09:22 -0500] jchauncey: recipe stop -> foo_provider action :stop ----- recipe start -> foo_provider action :start
[2014-01-29 17:09:26 -0500] jbz: qurve:  As part of the chef run, it will first go through and compile all the resources from all the recipes being called.
[2014-01-29 17:09:26 -0500] jchauncey: yes
[2014-01-29 17:09:34 -0500] qurve: (Even if recipe1 is not being executed)
[2014-01-29 17:09:36 -0500] qurve: Oh, ok.
[2014-01-29 17:09:43 -0500] qurve: OK, is there a better way to structure it though?
[2014-01-29 17:09:45 -0500] jchauncey: cookbooks are compiled as a whole
[2014-01-29 17:09:57 -0500] qurve: Like to put the declaration of the service in one place and then just have both recipes reference it?
[2014-01-29 17:10:26 -0500] qurve: I apologize for the dumb question, I've never used LWRP stuff before, and I imagine this is what it's for.
[2014-01-29 17:11:20 -0500] jchauncey: what do you mean declaration?
[2014-01-29 17:12:05 -0500] qurve: Well, I declare a 'service' and configure it's start/stop/restart/etc commands. I don't want to have to wire that up in multiple places for DRY reasons.
[2014-01-29 17:12:36 -0500] qurve: And I guess while I can do that declaration/wireup in recipe1.rb, if I then want to stop that service in recipe2, it seems like the initial declaration of the resource should be done in a shared place, not in recipe1.rb
[2014-01-29 17:12:55 -0500] jchauncey: treating a 'service' as an object like that is probably not a good idea
[2014-01-29 17:13:13 -0500] jchauncey: you could od it in default
[2014-01-29 17:13:26 -0500] qurve: I have no doubt that I may be going about this like a dope, this is a new part of chef to me.
[2014-01-29 17:13:35 -0500] qurve: I'll just do that for now.
[2014-01-29 17:13:47 -0500] j^2: has anyone had "cookbook_file" and "remote_file" stop working for them?
[2014-01-29 17:13:56 -0500] qurve: Declare the service in default with action :nothing, and then notify start/stop from the individual recipes that want to do it.
[2014-01-29 17:14:00 -0500] j^2: my chef runs seem to just skip them :(
[2014-01-29 17:14:21 -0500] jchauncey: qurve: yeah
[2014-01-29 17:14:35 -0500] qurve: The use case here is probably a bit odd because I'm trying to test out OpsWorks
[2014-01-29 17:15:01 -0500] qurve: Which uses chef's deploy resource, but they split up the lifecycles of the machines into install/configure/deploy/undeploy/shutdown
[2014-01-29 17:15:07 -0500] qurve: And you can associate recipes with each lifecycle stage.
[2014-01-29 17:15:20 -0500] qurve: Each of those lifecycle stages need to interact with the same service resource, but in different ways.
[2014-01-29 17:15:31 -0500] qurve: (deploy (re)starts it, undeploy shuts it down)
[2014-01-29 17:21:06 -0500] qurve: OK, (hopefully) last dumb question.
[2014-01-29 17:21:22 -0500] qurve: Is there a syntax to notify a resource directly, without it being the outcome of another resource?
[2014-01-29 17:22:02 -0500] qurve: eg, instead of something "foo" { notifies :stop 'service' } just do: notifies :stop, 'service' as a top-level command in a recipe?
[2014-01-29 17:22:20 -0500] qurve: This recipe just needs to send the stop notification to the service, it's not dependent on any other resource.
[2014-01-29 17:29:44 -0500] btm: qurve: I presume you want the notification to happen in the order that the recipe is executed/converged (which is different than when the recipe is parsed/compiled), yes?
[2014-01-29 17:30:25 -0500] qurve: It's more that I just have a recipe called opsworks_undeploy, which needs to do two things: 1) Stop the service I declared/configured in default.rb with action :nothing 2) Delete the code
[2014-01-29 17:31:23 -0500] qurve: I basically want to do the equivalent of notifies :stop 'my-service', but not as the result of some other action.
[2014-01-29 17:31:33 -0500] qurve: It's just the first thing that needs to be done within opsworks_undeploy
[2014-01-29 17:32:20 -0500] btm: qurve: sure, but order matters, and depending on how you look at it, the recipe is run twice, once during compilation and later during convergence. If you had a resource, then a puts statement, then another resource. The puts statement would have it's output long before the two resources executed.
[2014-01-29 17:32:34 -0500] qurve: Fair enough.
[2014-01-29 17:32:39 -0500] lewiz: I'm struggling to figure out how to update the knife-windows plugin.  Any suggestions?
[2014-01-29 17:32:40 -0500] qurve: I mean I could do something like:
[2014-01-29 17:33:14 -0500] qurve: ruby_block "foo" { block { nil }; notifies :stop, 'my-service', :immediately }
[2014-01-29 17:33:23 -0500] qurve: But I have to imagine there is a better way.
[2014-01-29 17:35:13 -0500] btm: qurve: I think that's best actually. ruby_block exists to allow you to specify other things you want to happen in the compilation phase.
[2014-01-29 17:35:23 -0500] qurve: I'll go with that for now then :)
[2014-01-29 17:54:00 -0500] qurve: Thank you for your help by the way, jbz, jchauncey, and btm.
[2014-01-29 17:55:55 -0500] qurve: Can the stock chef File resource take a pattern? I need to delete files within a directory, they all match a pattern, but I don't know the exact file names or how many there will be.
[2014-01-29 17:57:05 -0500] hammer: can i get a little guidance on the daemontools cookbook?
[2014-01-29 17:57:26 -0500] hammer: someone from my company has a pull request for it, but we haven't heard anything and i wanted to get some feedback on the approach
[2014-01-29 17:57:27 -0500] hammer: https://github.com/opscode-cookbooks/daemontools/pull/6
[2014-01-29 17:57:30 -0500] jchauncey: qurve: not that i am aware of
[2014-01-29 17:57:47 -0500] jchauncey: qurve: but you could do some ruby foo and get the list and then iterate that list and call File
[2014-01-29 17:58:07 -0500] qurve: jchauncey: In that case, is it safe to do something like: Dir[...].each { |filename| file filename { ... } }
[2014-01-29 17:58:49 -0500] qurve: (Obviously if I do something dumb it could be unsafe, but is using Dir[] safe within a chef run)
[2014-01-29 17:58:51 -0500] jchauncey:  i would probably execute it within a ruby_block to make sure that it gets run in the proper order
[2014-01-29 17:59:02 -0500] btm: qurve: it expects a real file. you could use ruby to create a file resource for all of them, probably easiest to use an execute resource and use a not_if guard using Dir.glob('/foo/').empty?
[2014-01-29 17:59:04 -0500] qurve: Gotcha.
[2014-01-29 17:59:06 -0500] jchauncey: qurve: using ruby within a chef run is perfectly safe for the most part
[2014-01-29 17:59:23 -0500] jchauncey: btm: yeah that's a much better solution
[2014-01-29 17:59:28 -0500] qurve: Yeah, I basically need to clean up some upstart scripts generated by foreman.
[2014-01-29 17:59:41 -0500] qurve: I know they will be in /etc/init/service-*
[2014-01-29 18:00:08 -0500] btm: hammer: looks all set, cook tickets are reviewed in this order: https://tickets.opscode.com/secure/IssueNavigator.jspa?mode=hide&requestId=10970 so it is almost to the top.
[2014-01-29 18:00:42 -0500] qurve: So you'd actually suggest using an execute resource to rm them manually, bypassing the File resource?
[2014-01-29 18:00:47 -0500] btm: hammer: it's be good to respond to the comment on the pull request.
[2014-01-29 18:01:36 -0500] btm: qurve: you could put a bunch of ruby in a ruby_block, but I bet an execute resource would read easier.
[2014-01-29 18:01:55 -0500] qurve: Gotcha, I'll try a few different options and see what happens.
[2014-01-29 18:02:39 -0500] hammer: btm: that's a little rough - you're saying bugs logged in november haven't been looked at yet?
[2014-01-29 18:05:07 -0500] teukka: hammer, btm: that list is sorted by "updated" field. so you can just add dummy comments to all the other issues to get yours on top :P
[2014-01-29 18:05:21 -0500] hammer: haha, tempting
[2014-01-29 18:05:39 -0500] hammer: no, ascending
[2014-01-29 18:05:46 -0500] hammer: so commenting moves it to the bottom
[2014-01-29 18:06:01 -0500] hammer: oh n/m, i see what you mean
[2014-01-29 18:11:19 -0500] wdilly_: Guys, I have a bunch of nodes which will be bootstrapped simultaneously, but, need to complete a certain part of the runlist in serial, is there a way in a recipe to enforce this? My only thought is in a recipe to make a lockfile on some nfs share that all of the nodes have mounted.
[2014-01-29 18:15:37 -0500] Guest85957: can i show all packages installed in node on chef server webui
[2014-01-29 18:19:44 -0500] workmad3: wdilly_: no, chef doesn't have that sort of multi-node orchestration built in
[2014-01-29 18:36:27 -0500] btm: wdilly_: http://www.getchef.com/blog/2013/12/16/getting-pushy-with-chef/ http://www.getchef.com/blog/chefconf-talks/push-jobs-an-orchestration-building-block-for-private-chef-mark-anderson/
[2014-01-29 18:36:39 -0500] wdilly_: thanks!
[2014-01-29 19:01:51 -0500] babalu: typically, what would make a bash resource hang?
[2014-01-29 19:02:51 -0500] _dumfries: babalu: I'd start with looking at the command you've given to the bash resource.
[2014-01-29 19:03:27 -0500] babalu: bash 'restart notifications do   action :nothing   user 'ubuntu'   code <<-EOH         sudo kill -9 `pgrep -f notifications`         ./notifications.sh   EOH end
[2014-01-29 19:03:59 -0500] babalu: if pgrep doesn't find a process, would that cause it to hang?
[2014-01-29 19:04:16 -0500] babalu: or does chef just move on?
[2014-01-29 19:05:55 -0500] scashin133: In chef 11 should I expect attributes set at the default level for an array in an attribute file to be merged? The docs I'm reading indicate that they should however in practice I'm seeing it use the last evaluated attribute file value
[2014-01-29 19:13:11 -0500] jonathanq: I am trying to use environments w/ chef-client in local-mode.  It seems that when you assign an environment to a node in clienr.rb, it tries to fetch the environment from local server to expand run list before it has been uploaded to the server along with cookbooks.  Is this a known issue?  I hit this trying to use test-kitchen, but it seems to be a race condition in the local-mode itself
[2014-01-29 19:18:38 -0500] addisonj: writing an LWRP, how do I make an attribute only required for a single action?
[2014-01-29 19:20:29 -0500] Popsikle-Work: anyone skilled with ohai and attributes and such?
[2014-01-29 19:29:02 -0500] btm: addisonj: don't mark it required in the resource, and raise an exception inside provider if it is missing.
[2014-01-29 19:29:41 -0500] addisonj: btm: that makes sense, was wondering if there was a more elegant wy
[2014-01-29 19:29:43 -0500] addisonj: thanks though!
[2014-01-29 19:35:46 -0500] AndrewG: I'm writing an ohai ruby plugin. As ruby is new to me, it often doesn't work. Is there some way to get the ruby syntax errors printed, rather than just fixing it blindl;y by trial and error?
[2014-01-29 19:43:21 -0500] gokaft: Hi, how do I 'clear' all queued delayed notifications before they are run on Chef 10?
[2014-01-29 19:43:44 -0500] babalu: if a bash resource contains a terminal command which returns non-zero code, would that make chef hang indefinitely?
[2014-01-29 19:45:39 -0500] cwj: AndrewG: maybe run something like rubocop against your plugin code before you try to execute it in ohai? should catch syntax errors and help you with ruby style
[2014-01-29 19:48:24 -0500] jedi4ever: if a template has notifies :restart , but the service has action :stop , will it start the service ?
[2014-01-29 19:51:25 -0500] AndrewG: cwj: Thanks. I don't seem to have it, so I'll have a search.
[2014-01-29 19:51:57 -0500] addisonj: can someone confirm for me, if I write some content to a file (using :create) and the do a notifies, the notifies will only fire if I change the content?
[2014-01-29 19:52:41 -0500] cwj: addisonj: thats correct
[2014-01-29 19:53:27 -0500] btm: jedi4ever: the action in the notification and the action on the service resource aren't linked.
[2014-01-29 19:53:51 -0500] cwj: babalu: if the command exits non-zero chef should treat that as a failure, unless youve told chef to expect a non-zero return code (see returns parameter for execute resource http://docs.opscode.com/resource_execute.html )
[2014-01-29 19:54:20 -0500] cwj: babalu: so if chef is getting stuck on an execute resource then i would guess the command isnt exiting
[2014-01-29 19:54:31 -0500] babalu: thanks cwj
[2014-01-29 19:54:39 -0500] jedi4ever: btm: so I'd need an attribute to avoid the restart action iand disable the service at the same time
[2014-01-29 19:55:43 -0500] btm: jedi4ever: I'm not sure what you're trying to do. Do you want a notification with a restart action to fail or be silently ignored?
[2014-01-29 19:56:45 -0500] jedi4ever: btm: see https://github.com/DataDog/chef-datadog/blob/f7974f0f02bce36a799c1b3d0f7f61210ff81a9b/recipes/dd-agent.rb#L54 & https://github.com/DataDog/chef-datadog/blob/f7974f0f02bce36a799c1b3d0f7f61210ff81a9b/recipes/dd-agent.rb#L80
[2014-01-29 19:57:18 -0500] jedi4ever: I'd just like a flag in the cookbook that stops the server (so make action on L54) configurable
[2014-01-29 19:57:35 -0500] jedi4ever: not sure if I actually need to change L80 as well
[2014-01-29 19:59:20 -0500] jcook: Quick question.  Is there a way to get chef-server-ctl tail to report the logs in the timezone configured on the server instead of UTC?
[2014-01-29 20:02:27 -0500] btm: @getchefdotcom chef/ohai code review: join: bit.ly/MvMxOp watch: bit.ly/MvMxOn
[2014-01-29 20:03:17 -0500] scashin133: In chef 11, are arrays merged for a default attribute declared in two different attribute files?
[2014-01-29 20:07:03 -0500] shlant: scashin133: https://coderanger.net/2013/06/arrays-and-chef/
[2014-01-29 20:07:19 -0500] btm: jedi4ever: I forget if restart will start if the service is currently stopped. it's probably provider dependent. You could look through all thr providers, but I'd probably make the flag that disables the service also remove the notifies
[2014-01-29 20:07:48 -0500] jedi4ever: btm: thanks for the help
[2014-01-29 20:07:49 -0500] btm: jedi4ever: notifies :restart, "service[foo]", :delayed unless node[:foo_service][:disabled]
[2014-01-29 20:08:47 -0500] addisonj: another question, a provider can't access node attributes, correct? can the lwrp resource access it as a default? so, attribute :my_attr, :default => node[:my_cookbook][:my_attr_default]?
[2014-01-29 20:11:14 -0500] scashin133: shlant: thanks for the response. I have read through that post before. It leads me to think that the answer to my question is yes they should be merged. however, I am not seeing that in practice
[2014-01-29 20:11:50 -0500] shlant: scashin133: I also didn't see it in practice. Same level precedence merge is what I wanted, but I couldn't get it to work
[2014-01-29 20:12:04 -0500] scashin133: also in that post it seems to be showing merging an attribute file and a role declaration
[2014-01-29 20:12:25 -0500] scashin133: what I want is two attribute files merging their values together
[2014-01-29 20:12:47 -0500] shlant: scashin133: I would love that too. Haven't figured out a way yet. I would ask coderanger
[2014-01-29 20:13:06 -0500] coderanger: yo
[2014-01-29 20:13:20 -0500] coderanger: Whats the question?
[2014-01-29 20:13:45 -0500] shlant: coderanger: how to get attribute values to merge
[2014-01-29 20:13:48 -0500] shlant: on purpose haha
[2014-01-29 20:14:03 -0500] scashin133: specifically attribute array values to merge
[2014-01-29 20:14:10 -0500] shlant: in your post it seemed like you said that same level precedence would merge
[2014-01-29 20:14:21 -0500] shlant: which might be desireable
[2014-01-29 20:14:38 -0500] shlant: but I couldn't get it working
[2014-01-29 20:15:08 -0500] coderanger: Yeah, attr files aren't merged since they are just executed over each other in place
[2014-01-29 20:15:34 -0500] shlant: coderanger: is there a way to get them to merge?
[2014-01-29 20:16:03 -0500] shlant: like if I set an attribute in different recipes, can I merge those values?
[2014-01-29 20:16:23 -0500] coderanger: it only runs deep_merge on the declarative data (so roles, envs, and existing node data)
[2014-01-29 20:16:23 -0500] coderanger: scashin133: I highly recommend using one of the patterns mentioned in that post to avoid arrays in node attrs
[2014-01-29 20:16:24 -0500] coderanger: shlant: In an attr file you can do it manually
[2014-01-29 20:16:24 -0500] coderanger: default['foo'] << 'asdf'
[2014-01-29 20:16:25 -0500] coderanger: since its just ruby code :)
[2014-01-29 20:16:40 -0500] coderanger: shlant: default['foo'] ||= []; default['foo'] << 'asdf'
[2014-01-29 20:16:44 -0500] coderanger: or something like that
[2014-01-29 20:17:09 -0500] coderanger: But again, I reeeeeeally don't recommend this
[2014-01-29 20:17:29 -0500] coderanger: There is a 100% chance it will bite you at some point due to ordering being hard to predict :)
[2014-01-29 20:17:36 -0500] gchristensen: +1
[2014-01-29 20:17:50 -0500] coderanger: like someone changes a dependency deep in the tree and all of a sudden the order changes
[2014-01-29 20:18:26 -0500] shlant: coderanger: then is there a better way to get values from various recipes together into one attr?
[2014-01-29 20:18:51 -0500] shlant: values specified in the recipies
[2014-01-29 20:19:53 -0500] coderanger: shlant: Yeah, the post you linked shows two ways of doing it
[2014-01-29 20:21:17 -0500] coderanger: shlant: Basically short version is to use hashes for the attributes, and use a little bit of Ruby code to serialize it to an array right before you use it
[2014-01-29 20:21:24 -0500] coderanger: That gets you far better attribute semantics
[2014-01-29 20:21:42 -0500] shlant: so in a recipe it would be node['chruby']['rubies']['foo'] = true
[2014-01-29 20:21:53 -0500] shlant: or node['chruby']['rubies'] = 'foo => true'?
[2014-01-29 20:22:00 -0500] shlant: not good with syntax
[2014-01-29 20:22:02 -0500] coderanger: The second one using weighted sorting, for example, means the order in the end isn't based on cookbook load order
[2014-01-29 20:22:29 -0500] shlant: sorry, node.default
[2014-01-29 20:23:51 -0500] coderanger: something like that, yes
[2014-01-29 20:24:01 -0500] coderanger: Depends on the specifics of your use case
[2014-01-29 20:24:17 -0500] coderanger: might drop soon, in the transbay tube
[2014-01-29 20:36:57 -0500] shlant: what's the easiest way to upgrade php to 5.5 on ubuntu? with chef
[2014-01-29 20:40:35 -0500] thatothermitch: should the "chef doesn't merge attributes defined in multiple attribute files" be considered a bug?
[2014-01-29 20:41:26 -0500] thatothermitch: it certainly seems to run contrary to just about every piece of documentation i've read
[2014-01-29 20:42:21 -0500] coderanger: thatothermitch: No, its an implementation detail
[2014-01-29 20:42:33 -0500] coderanger: thatothermitch: The merging in general isn't well defined AFAIK
[2014-01-29 20:45:17 -0500] thatothermitch: that's unfortunate. are there plans to rework it to improve clarity / consistency?
[2014-01-29 20:45:31 -0500] coderanger: thatothermitch: I want it removed entirely, I consider it a bug
[2014-01-29 20:45:48 -0500] thatothermitch: i would find that an acceptable stance to take
[2014-01-29 20:45:52 -0500] coderanger: But that won't fix anything for people using arrays, so basically just don't use arrays
[2014-01-29 20:45:57 -0500] coderanger: (in node attrs)
[2014-01-29 20:47:09 -0500] thatothermitch: I came to the same conclusion, but couldn't explain why; I ended up with a hash based solution which seemed awkward. Is there an actual bug for the "chef merges attributes poorly" (or however you prefer to phrase it)
[2014-01-29 20:47:12 -0500] coderanger: cheeseplus: ^^ I think I need to write a talk about CRDTs in Chef :)
[2014-01-29 20:47:36 -0500] coderanger: thatothermitch: Not that I'm aware of, my blog post is usually the thing cited :)
[2014-01-29 20:47:47 -0500] cheeseplus: coderanger: lolz, that would be so great to use CRDT sets for things
[2014-01-29 20:48:00 -0500] cheeseplus: coderanger: I will sponsor the talk ;)
[2014-01-29 20:48:07 -0500] coderanger: cheeseplus: Thats basically what I described, just with a 5-line impl in Ruby
[2014-01-29 20:49:07 -0500] thatothermitch: CRDT= Custom Resource ? ?
[2014-01-29 20:49:22 -0500] coderanger: thatothermitch: No, commutitive replicated data type
[2014-01-29 20:49:31 -0500] thatothermitch: thanks
[2014-01-29 20:49:31 -0500] coderanger: Its a term used in distributed databases
[2014-01-29 20:49:56 -0500] jmartin: thatothermitch: commutative replicated data type
[2014-01-29 20:50:03 -0500] thatothermitch: sure, "CRDT chef" didn't turn up too many answers, "CRDT" does
[2014-01-29 20:50:19 -0500] coderanger: but I just realized thats basically what I tell people to use for the same reason that arrays don't work in distributed DBs
[2014-01-29 20:50:32 -0500] coderanger: Everything old is new again
[2014-01-29 20:50:36 -0500] thatothermitch: in many instances, sets would be enough
[2014-01-29 20:50:53 -0500] coderanger: thatothermitch: Yeah, the first pattern in my blog post is a trivial impl of a set CRDT
[2014-01-29 20:51:03 -0500] cheeseplus: CRDTs are designed to coalesce to correct values in the case of network partitions
[2014-01-29 20:51:11 -0500] cheeseplus: therein lies the magic (math)
[2014-01-29 20:51:24 -0500] coderanger: cheeseplus: In this case its just data partitions between each source of attr data :)
[2014-01-29 20:51:25 -0500] cheeseplus: no sibling resolution required
[2014-01-29 20:51:46 -0500] cheeseplus: CRDTS in the small
[2014-01-29 20:52:05 -0500] thatothermitch: ok, yes, the "distributed" aspect seems a little overkill for use within a chef run
[2014-01-29 20:52:09 -0500] thatothermitch: maybe i'm misunderstanding
[2014-01-29 20:52:23 -0500] coderanger: thatothermitch: Yeah, don't take it literally
[2014-01-29 20:52:34 -0500] coderanger: cheeseplus works on a distributed DB, so I thought the insight would amuse him
[2014-01-29 20:52:43 -0500] thatothermitch: ah, fair enough
[2014-01-29 20:53:20 -0500] cheeseplus: yea my comments are in relation to why they're useful generally for distributed systems, using in Chef is for the lulz
[2014-01-29 20:54:02 -0500] coderanger: A LWW hash is already a CRDT, so you've been using one the whole time and didn't realize it :)
[2014-01-29 20:55:28 -0500] pwelch: does anyone know when chef-server 11.2 will be released? This bug is making it impossible for me to upgrade cookbooks: https://tickets.opscode.com/browse/CHEF-3921
[2014-01-29 20:56:03 -0500] coderanger: pwelch: I think sfalcon has said Soon, some time in the next month or two, and 100% surely before ChefConf in April
[2014-01-29 20:56:15 -0500] pwelch: =(
[2014-01-29 20:56:47 -0500] pwelch: I have to spend hours manually figuring out what dependency of a dependency is causing my chef-server to lock up
[2014-01-29 20:56:54 -0500] pwelch: very frustrating
[2014-01-29 20:56:55 -0500] coderanger: pwelch: Almost always when you hit that case, your version constraints are bad
[2014-01-29 20:57:00 -0500] coderanger: but yeah, its terrible to debug
[2014-01-29 20:57:14 -0500] coderanger: I just did that dance on Monday
[2014-01-29 20:57:25 -0500] coderanger: (turned out to be a bad constraint on the nginx cookbook)
[2014-01-29 20:57:41 -0500] pwelch: I think I have actually narrowed it down the nginx cookbook
[2014-01-29 20:57:58 -0500] coderanger: pwelch: \o/
[2014-01-29 20:58:09 -0500] pwelch: do you remember what your cause was?
[2014-01-29 20:58:24 -0500] fak3r: I'm running chef-client in debug, found an issue I don't understand:
[2014-01-29 20:58:34 -0500] fak3r: DEBUG: Sending HTTP Request via POST to hostname.domain.com:443/environments/_default/cookbook_versions
[2014-01-29 20:58:38 -0500] fak3r: ERROR: Timeout connecting to hostname.domain.com:443 for /environments/_default/cookbook_versions, retry 1/5
[2014-01-29 20:59:02 -0500] coderanger: pwelch: I had both nginx 2.0.whatever and 2.2.whatever, nginx 2.0 depends on yum cookbook 2.x, nginx 2.2 depends on yum cookbook 3.x
[2014-01-29 20:59:16 -0500] coderanger: pwelch: I had ~>2.0.0 in my chef environment
[2014-01-29 20:59:36 -0500] coderanger: so my other cookbook (the new python one) which depended on yum 3.x couldn't solve anymore
[2014-01-29 20:59:39 -0500] pwelch: fak3r: you running your own chef server?
[2014-01-29 20:59:48 -0500] coderanger: pwelch: Fix was to relax the constraint to ~>2.0
[2014-01-29 21:01:02 -0500] fak3r: when I try that URL in a browser, it fails because it's not https - but then if I try to hit https://hostname.domain.com:443/environments/_default/cookbook_versions it's not there - 404!
[2014-01-29 21:01:19 -0500] coderanger: fak3r: You need to send it a run list
[2014-01-29 21:01:21 -0500] fak3r: pwelch: yes, just installed the latest on Ubuntu today
[2014-01-29 21:01:30 -0500] pwelch: coderanger: I wouldnt be surprised if my issue is similar. we have an older cookbook that uses 1.4.0 while everything else uses 2.0. I will start there. thanks
[2014-01-29 21:01:32 -0500] coderanger: fak3r: In related news, this is the bug that pwelch and I are discussing
[2014-01-29 21:01:55 -0500] pwelch: fak3r: yes, this is the bug coderanger and I are talkng about: https://tickets.opscode.com/browse/CHEF-3921
[2014-01-29 21:02:02 -0500] btm: @getchefdotcom cookbook code review: join: bit.ly/1exJ206 watch: bit.ly/1exJ0FA
[2014-01-29 21:02:03 -0500] coderanger: fak3r: It means you have a "problematic" version constraint set
[2014-01-29 21:02:12 -0500] coderanger: that API endpoint is the one that does cookbook version solving
[2014-01-29 21:02:20 -0500] fak3r: cool, so I have this issue, run chef-client on a node, it hangs at 'resolving cookbooks for run list: ["base", "web", "logging"]'
[2014-01-29 21:02:32 -0500] coderanger: Your chef server is probably sitting at 100% cpu, trying to solve a pathological constraint set
[2014-01-29 21:03:03 -0500] pwelch: yeah, you will need to restart your chef-server process
[2014-01-29 21:03:24 -0500] coderanger: This command is very useful
[2014-01-29 21:03:26 -0500] coderanger: knife exec -E 'puts api.post("/environments/production/cookbook_versions", "run_list" => ["python@1.4.6", "nginx@2.2.0"]).map{|key, val| "#{key} #{val.version}"}'
[2014-01-29 21:03:27 -0500] pwelch: coderanger: have you found a better way to resolve the CPU issue? I have been doing chef-server-ctl restart
[2014-01-29 21:03:45 -0500] coderanger: Just play with the run_list until you find the minimum thing that doesn't solve
[2014-01-29 21:03:49 -0500] coderanger: and then figure out why
[2014-01-29 21:03:55 -0500] coderanger: pwelch: Nah, thats the way to do it
[2014-01-29 21:05:22 -0500] fak3r: pwelch: sometimes I have to, but then chef-client pegs it at 100% again
[2014-01-29 21:05:39 -0500] fak3r: coderanger: ok, so just put enviroment to _default and drop the run list to like one recipe?
[2014-01-29 21:09:09 -0500] fak3r: coderanger: ah, I'm trying your command, looking at enviroment/qa.. and putting in my recipes...
[2014-01-29 21:09:25 -0500] fak3r: 2 work, but the role[base] is hanging!
[2014-01-29 21:09:39 -0500] pwelch: coderanger: thanks for the help. going back to see if I can pin down the issue
[2014-01-29 21:15:47 -0500] fak3r: coderanger: so that was it, it's my role[base] that's causing the hang - but I don't think I've changed anything in there for a while
[2014-01-29 21:19:28 -0500] fak3r: coderanger: so I'll work around it for now, any hints on how to debug that role? just comment things out, up it to chef-server, run that knife command?
[2014-01-29 21:22:08 -0500] shlant: how do I specify some packages to install from a specific repo without effecting all other packages? It seems if I add a new repo all packages try and use that
[2014-01-29 21:22:23 -0500] shlant: I just want some to use the new repo
[2014-01-29 21:22:43 -0500] shlant: would I not add a new repo, just specify it when installing packages?
[2014-01-29 21:27:13 -0500] coderanger: fak3r: So just go deeper inside role-base
[2014-01-29 21:27:20 -0500] coderanger: fak3r: Try solving its components, and so on
[2014-01-29 21:27:32 -0500] coderanger: shlant: apt or yum?
[2014-01-29 21:31:30 -0500] shlant: coderanger: apt
[2014-01-29 21:31:56 -0500] coderanger: shlant: use the priority setting and pin the specific packages you want
[2014-01-29 21:33:30 -0500] coderanger: shlant: https://help.ubuntu.com/community/PinningHowto shows how to do it a bit
[2014-01-29 21:51:03 -0500] drrk: hi, is anyone familiar with berkshelf 3?
[2014-01-29 21:51:10 -0500] drrk: i'm getting a most strange error
[2014-01-29 21:51:14 -0500] fak3r: coderanger: yep, thanks man, that was driving me batty :\
[2014-01-29 21:51:35 -0500] drrk: belgarath:bnc-chef-server kimball$ bundle exec berks install
[2014-01-29 21:51:36 -0500] drrk: building universe...
[2014-01-29 21:51:36 -0500] drrk: Unable to find a solution for demands: bnc-chef-server (0.1.0)
[2014-01-29 21:52:03 -0500] drrk: note the directory I am in (and cookbook I am working with) is bnc-chef-server
[2014-01-29 22:00:00 -0500] cwj: drrk: does your Berksfile contain a line that says metadata ?
[2014-01-29 22:00:04 -0500] drrk: yes
[2014-01-29 22:00:27 -0500] cwj: then i havent any idea, havent messed with berks 3
[2014-01-29 22:00:32 -0500] drrk: and one other source "https://api.berkshelf.com"
[2014-01-29 22:01:11 -0500] drrk: on berks2 it couldn't find chef-server from the community site, and the advice for everything seems to be use berks 3
[2014-01-29 22:01:20 -0500] cwj: its my understanding that berks 3 may require organizations to run their own berkshelf api endpoint in order to resolve dependencies for their internal cookbooks, but i could be mistaken about that
[2014-01-29 22:01:37 -0500] cwj: #berkshelf might be your best bet
[2014-01-29 22:02:16 -0500] drrk: thanks
[2014-01-29 22:07:03 -0500] steveb: hey guys. i'm having some weird issues with the mount provider. if i rerun chef-client, and directories have already been mounted by chef previously, it tries to mount them again and fails because they are already mounted
[2014-01-29 22:07:06 -0500] steveb: is that expected?
[2014-01-29 22:07:15 -0500] steveb: do i need explicit checks to make it not try that?
[2014-01-29 22:10:34 -0500] coderanger: steveb: Is your fstab out of sync?
[2014-01-29 22:11:42 -0500] steveb: coderanger: seems ok
[2014-01-29 22:17:18 -0500] btm: steveb: do you have debug output? (chef-client -l debug)
[2014-01-29 22:19:19 -0500] steveb: oh! i forgot about that
[2014-01-29 22:19:21 -0500] steveb: lemme try it
[2014-01-29 22:23:27 -0500] steveb: https://gist.github.com/steveberryman/2be5ff2ff086af3c3c6b
[2014-01-29 22:23:33 -0500] steveb: it's like it's not even checking for mount status
[2014-01-29 22:23:38 -0500] steveb: and just running mount regardless
[2014-01-29 22:39:01 -0500] evan: to use a resource provided by another cookbook
[2014-01-29 22:39:19 -0500] evan: I thought you just declared a dependency on that cookbook
[2014-01-29 22:39:19 -0500] evan: right?
[2014-01-29 22:39:25 -0500] coderanger: evan: Yes
[2014-01-29 22:39:45 -0500] evan: ok
[2014-01-29 22:46:53 -0500] rshade98: we are using chef server, is there a way to tell chef-client to send a special ip
[2014-01-29 22:47:26 -0500] jmartin: rshade98: what do you mean a special ip?
[2014-01-29 22:49:19 -0500] rshade98: If have two ips, 10.x and 172.x. I want chef-server to communicate on 172.
[2014-01-29 22:49:28 -0500] rshade98: 10.x is non routable to it
[2014-01-29 22:51:31 -0500] jmartin: rshade98: how are you bootstrapping? if the FQDN of the server resolves to 172.x.x.x id assume it would communicate on that
[2014-01-29 22:55:07 -0500] coderanger: rshade98: Chef server never directly contacts your node
[2014-01-29 23:12:37 -0500] rshade98: chef-client --json-attributes /etc/chef/runlist.json --environment int-901
[2014-01-29 23:13:05 -0500] rshade98: coderanger, thanks. So that's not it.
[2014-01-29 23:15:24 -0500] geggam: that moment when you get an application stack fully chef'd
[2014-01-29 23:17:18 -0500] shlant: so nice
[2014-01-29 23:19:16 -0500] geggam: yup... its over... thought of things i need
[2014-01-29 23:19:39 -0500] EricL: I'm sure I did something, but I don't know what.  All I know is that when I run knife ec2 server create, I no longer get the
[2014-01-29 23:20:00 -0500] EricL: Waiting for SSH" section and it just hangs.  Has anyone seen that behavior before?
[2014-01-29 23:21:40 -0500] shlant: EricL: did you change your knife.rb?
[2014-01-29 23:21:53 -0500] EricL: shlant: I didn't change anything in my knife.rb
[2014-01-29 23:22:21 -0500] EricL: I don't think I changed anything at all.  I have even tried a fresh install of Ruby (1.9.3-p484) and a fresh gemset install.
[2014-01-29 23:22:33 -0500] EricL: It still hangs in the same place.

[2014-01-28 00:01:17 -0500] martinisoft: Is there a nice way to tell ohai a system's default network interface?
[2014-01-28 00:03:48 -0500] chefwin: helfire: is there an easy way to find out what cookbook has it
[2014-01-28 00:04:14 -0500] helfire: grep -r . depends 'windows :)
[2014-01-28 00:04:30 -0500] xUltra: martinisoft: Ohai detects it as as an automatic attribute, I think?
[2014-01-28 00:06:59 -0500] martinisoft: xUltra: Yup it does, but its collecting it incorrectly. The correct IP is on a virtual interface.
[2014-01-28 00:10:10 -0500] xUltra: martinisoft: Hm, maybe a bug? I would write a custom plugin with a new attribute name that detects it as you would expect, or maybe override the provided 'ipaddress' attribute. At least for now.
[2014-01-28 00:11:20 -0500] martinisoft: xUltra: I wonder if I can just change its idea of a default interface
[2014-01-28 00:12:31 -0500] chefwin: helfire: should it not try to load windows if the system is not windows
[2014-01-28 00:16:54 -0500] xUltra: martinisoft: How so?
[2014-01-28 00:17:15 -0500] coderanger: chefwin: You need the windows cookbook uploaded to your chef server
[2014-01-28 00:17:35 -0500] chefwin: Coderanger: I have already uploaded it
[2014-01-28 00:17:45 -0500] martinisoft: xUltra: If I could just point it to the correct interface it could determine its information
[2014-01-28 00:17:55 -0500] law: hey all
[2014-01-28 00:18:08 -0500] chefwin: coderanger: I am getting the following http://pastebin.com/8uEYQvyt
[2014-01-28 00:18:10 -0500] coderanger: chefwin: Which cookbook is failing?
[2014-01-28 00:18:23 -0500] law: are there any resources available for a Puppet-refugee who's currently stuck managing a fairly massive Chef install for $new_job?
[2014-01-28 00:18:33 -0500] coderanger: law: You're talking to them
[2014-01-28 00:18:35 -0500] coderanger: Whats up?
[2014-01-28 00:18:40 -0500] law: cool!
[2014-01-28 00:18:49 -0500] xUltra: martinisoft: What exactly is your 'virtual interface'?
[2014-01-28 00:18:50 -0500] law: so, I've been at this new gig for about 6 weeks now, and they're all-Chef
[2014-01-28 00:19:03 -0500] law: and I, previously, was all-Puppet
[2014-01-28 00:19:14 -0500] law: and I'm learning that there's... quite a bit of difference between the two :-)
[2014-01-28 00:19:15 -0500] coderanger: martinisoft: You would have to override the relevant ohai plugin, this isn't recommended
[2014-01-28 00:19:25 -0500] martinisoft: xUltra: venet0:0
[2014-01-28 00:19:32 -0500] coderanger: martinisoft: (though I know Fastly has done it since their network topology is bonkers)
[2014-01-28 00:19:36 -0500] law: the raw Ruby is pretty frightening, to be honest
[2014-01-28 00:19:51 -0500] chefwin: Coderanger: I think its trying to load from the git , it was after I updated git to 2.9.0
[2014-01-28 00:20:00 -0500] law: I'm seeing syntax that I'm not familiar with at all, and I don't know how to trace it back to figure out where it's coming from, or what it does
[2014-01-28 00:20:14 -0500] law: for example, we're apparently using an incredibly old (or just plain custom-written) 'users' cookbook
[2014-01-28 00:20:35 -0500] law: and I've been tasked with maintaining the same functionality, but upgrading us to the latest Opscode community users cookbook
[2014-01-28 00:22:21 -0500] law: for example, here's the current cookbooks/users/recipe/default.rb file - http://pastebin.com/k5QsgEdr
[2014-01-28 00:22:28 -0500] xUltra: martinisoft: And you want that interface to be considered the default interface? I take it that it isn't the default route?
[2014-01-28 00:22:35 -0500] law: I'd say I can follow along with about 95% of what's going on there
[2014-01-28 00:23:11 -0500] martinisoft: xUltra: Yup. Its picking venet0 and not venet0:0 due to the route I believe.
[2014-01-28 00:23:15 -0500] law: I can sort of safely assume that line 25 is iterating over 'a bunch of something', I'm presuming it's a databag
[2014-01-28 00:23:26 -0500] allaire: Anybody use the mongodb cookbook?
[2014-01-28 00:23:42 -0500] law: and 'u' is the JSON hash, and we're 'doing stuff' for each of the elements of the hash
[2014-01-28 00:23:51 -0500] xUltra: martinisoft: ah, but venet0:0 is an alias interface which uses venet. I see.
[2014-01-28 00:24:24 -0500] law: what I don't understand is *what* implements the search() function - that doesn't strike me as a Ruby-thing, so I presume it's a chef thing
[2014-01-28 00:24:50 -0500] xUltra: martinisoft: Honestly, like coderanger mentioned, I wouldn't override the plugin. I would instead try to use your own plugin and a new attribute.
[2014-01-28 00:24:57 -0500] law: nor do I know what, if any, 'extra fun stuff' I might be able to do with the search() function
[2014-01-28 00:25:17 -0500] xUltra: How can I access an automatic Ohai attribute in a custom plugin?
[2014-01-28 00:25:39 -0500] law: ditto with the 'user', 'directory', 'template', etc blocks - it's pretty self-explanatory what those blocks are doing, but I don't know where to read up on the nitty-gritty of what they DO, and what else might be available to me from those blocks
[2014-01-28 00:25:44 -0500] doomviking: chef search is your friend
[2014-01-28 00:26:14 -0500] martinisoft: xUltra: gotcha, just trying to keep it consistent between our hosted environments so getting it to set the ip_address correctly is a huge win for consistency.
[2014-01-28 00:26:50 -0500] law: I guess I can say, "I know enough Ruby to really hurt myself, but not enough to be able to pick apart syntax that looks different than what I've seen thusfar"
[2014-01-28 00:27:14 -0500] xUltra: martinisoft: Yeah, that's a tough spot. I'm assuming for reasons specific to your infrastructure you want the aliased interface to be considered the default interface?
[2014-01-28 00:28:15 -0500] chefwin: @coderanger: anything you can think?
[2014-01-28 00:29:48 -0500] martinisoft: xUltra: exactly.
[2014-01-28 00:32:22 -0500] xUltra: martinisoft: Sounds like either way it'll have to be hacky
[2014-01-28 00:33:39 -0500] coderanger: chefwin: Ahh, I see you are using Chef 10 still
[2014-01-28 00:33:49 -0500] coderanger: chefwin: A lot of cookbooks no longer support chef 10
[2014-01-28 00:34:20 -0500] chefwin: coderanger: So i am using chef server 10 or client
[2014-01-28 00:35:53 -0500] martinisoft: xUltra: I did something similar for the Linode plugin since it was incorrectly determining platform and not finding the private IP
[2014-01-28 00:36:07 -0500] j^2: any chance anyoen is around that has experiance with https://github.com/ampledata/chef-handler-campfire
[2014-01-28 00:36:11 -0500] martinisoft: xUltra: Just feels hacky to not just tell it "use this interface plz"
[2014-01-28 00:36:17 -0500] j^2: i'm stumped :(
[2014-01-28 00:36:38 -0500] xUltra: martinisoft: Agreed.
[2014-01-28 00:46:14 -0500] chefwin: coderanger: Is there another solution or do i have to do an upgrade on chef? Will this break other nodes in my system?
[2014-01-28 00:55:55 -0500] mbwurtz: Hello all..  What is the best way to configure the chef-client service check in interval on windows?
[2014-01-28 00:58:12 -0500] coderanger: chefwin: You can downgrade your cookbooks to a version compatible with Chef 10
[2014-01-28 00:59:47 -0500] gkra: is it possible to have two different cookbooks depending on different versions of a 3rd cookbook and still have everytrhing work?
[2014-01-28 01:00:00 -0500] coderanger: gkra: Not if they are on the same node
[2014-01-28 01:00:07 -0500] gkra: didn't think so...
[2014-01-28 01:00:46 -0500] gkra: not sure exactly what situation one of my coworkers has ended up in...
[2014-01-28 01:04:58 -0500] chefwin: coderanger: Great, is there an easy way to find out what version works with chef 10
[2014-01-28 01:05:07 -0500] coderanger: chefwin: Nope, check the readmes
[2014-01-28 01:05:51 -0500] coderanger: chefwin: Most cookbooks only test against the latest version of Chef though
[2014-01-28 01:38:02 -0500] law: I also am still on Chef 10 (not my choice, fwiw)... how screwed am I?
[2014-01-28 01:41:42 -0500] coderanger: law: You'll run into cookbooks that don't work
[2014-01-28 01:42:24 -0500] coderanger: and I mean theres like a year of bug fixes that haven't all been backported
[2014-01-28 01:42:28 -0500] coderanger: some are, but not all
[2014-01-28 01:56:33 -0500] law: how can I tell if a current cookbook plays nice with Chef 10?
[2014-01-28 01:57:05 -0500] flaccid: law: check the readme and give it a try(tm)
[2014-01-28 02:03:12 -0500] coderanger: Pretty much
[2014-01-28 02:03:27 -0500] law: haha, fair enough
[2014-01-28 02:03:35 -0500] coderanger: matt ray has an open ticket to annotate cookbooks with a chef version dependnecy, but no patch yet
[2014-01-28 02:04:06 -0500] law: I don't even understand the existing cookbook, so I'm a little worried about errors that may just be my ignorance on how 'the old system did it', vs 'this cookbook expects chef11 features'
[2014-01-28 02:05:20 -0500] coderanger: law: Just ask here as you run into errors
[2014-01-28 02:05:39 -0500] coderanger: But in general if you see stuff like "No symbol exists named " thats a version issue
[2014-01-28 02:06:18 -0500] law: gotcha
[2014-01-28 02:09:52 -0500] martinisoft: coderanger: so I definitely tried that ohai plugin and see what you mean about over-riding it... its grabbing the IP correctly, but then preventing the normal networking plugin from running
[2014-01-28 02:10:19 -0500] coderanger: martinisoft: Why don't you just use the network plugin instead of node['ipaddress']?
[2014-01-28 02:10:20 -0500] martinisoft: coderanger: so now I have a blank network mash in the attributes list :(
[2014-01-28 02:10:41 -0500] martinisoft: coderanger: what do you mean?
[2014-01-28 02:11:20 -0500] coderanger: martinisoft: So under node['interfaces'] is info on all interfaces on the system
[2014-01-28 02:11:30 -0500] coderanger: So rather than use node['ipaddress'] in your recipes, you can be more explicit
[2014-01-28 02:12:15 -0500] martinisoft: coderanger: its less recipes and more knife automation. normally we'd check ipaddress, but thats broken now on certain systems
[2014-01-28 02:13:03 -0500] martinisoft: coderanger: just wish i could hint the network plugin to look at a virtual interface instead of the routes one
[2014-01-28 02:39:12 -0500] law: silly question, is there a "Book of Chef", similar to Pro Puppet, etc?
[2014-01-28 02:42:34 -0500] atomic-penguin: law, Test Driven Development w/ Chef, 2nd Ed.
[2014-01-28 02:42:56 -0500] atomic-penguin: law, having read the first and skimmed the second, I would recommend it
[2014-01-28 02:43:23 -0500] atomic-penguin: law, ...skip the 1st Ed., completely different animal
[2014-01-28 02:44:48 -0500] atomic-penguin: law, http://www.amazon.com/Test-Driven-Infrastructure-Chef-Behavior-Driven-Development/dp/1449372201/
[2014-01-28 02:45:36 -0500] law: giggity, thanks!
[2014-01-28 02:46:18 -0500] atomic-penguin: law, there is another, but I haven't read it. http://www.amazon.com/Infrastructure-Automation-Cookbook-Matthias-Marschall/dp/1849519226/
[2014-01-28 02:48:57 -0500] atomic-penguin: law, I think there are a few cheap web/e-books on the subject as well
[2014-01-28 02:49:46 -0500] yuppers: atomic-penguin: I'm surprised that book has gotten such low ratings
[2014-01-28 02:49:54 -0500] yuppers: the test-driven infrastructure
[2014-01-28 02:52:37 -0500] atomic-penguin: yuppers, I think a lot of people were disappointed with Cope not delivering on the all-inclusive Chef in a Nutshell book, and are maybe not giving it a fair review.  Its an entry level book on the subject.  Would be really hard to target in-depth advanced topics, on a rapidly developing solution.
[2014-01-28 02:52:53 -0500] law: I am all about "entry level" at this point
[2014-01-28 02:53:10 -0500] law: I've been shoulder-deep in Puppet for the last 5 years, so having to change gears so rapidly to Chef has been... interesting :-)
[2014-01-28 02:53:21 -0500] yuppers: it seems the infrastructure automation cookbook has gotten much better reviews
[2014-01-28 02:53:57 -0500] law: I don't really want a 'cookbook' at this stage of the game - I'd much rather have a solid understanding of the "whys" as well as the "hows"
[2014-01-28 02:54:18 -0500] yuppers: of chef?
[2014-01-28 02:54:25 -0500] law: yes
[2014-01-28 02:54:52 -0500] yuppers: I imagine the ebooks may be better for that
[2014-01-28 02:54:59 -0500] atomic-penguin: I have a huge stack of books in my living room, waiting to be studied for my Master's thesis
[2014-01-28 02:55:02 -0500] law: one thing that I'm picking up from my coworkers is that Chef seems to discourage writing your own cookbooks, in favor of using the community cookbooks
[2014-01-28 02:55:03 -0500] yuppers: maybe https://leanpub.com/chef-survival-guide ?
[2014-01-28 02:55:25 -0500] yuppers: I've heard good things about that one
[2014-01-28 02:55:34 -0500] law: that looks good, but its no longer available for sale :-\
[2014-01-28 02:55:38 -0500] yuppers: law: more so than puppet, yes
[2014-01-28 02:55:50 -0500] yuppers: This Book is for Sale Through Leanpub
[2014-01-28 02:55:52 -0500] yuppers: ?
[2014-01-28 02:55:57 -0500] yuppers: oh
[2014-01-28 02:55:58 -0500] yuppers: interesting
[2014-01-28 02:56:32 -0500] atomic-penguin: I'm sure I've seen that book mentioned before
[2014-01-28 02:56:54 -0500] yuppers: that's a shame, it's a short and sweet book
[2014-01-28 02:57:01 -0500] law: to be honest, the Puppet community manifests tend to be... horrible :-p
[2014-01-28 02:57:08 -0500] yuppers: yes
[2014-01-28 02:57:13 -0500] law: so I just got used to writing my own
[2014-01-28 02:57:23 -0500] yuppers: law: I can point you to a bunch of blog posts and presentations which are pretty good resources also
[2014-01-28 02:57:41 -0500] law: I would give you SO MANY virtual beers for anything that would help!
[2014-01-28 02:57:46 -0500] helfire: This is odd, i upgraded the chef-client from 11.8.0 to 11.8.2, stopped and started the service, but the run still says 11.8.0 (though when i do chef-client it says 11.8.2
[2014-01-28 02:57:50 -0500] law: I've got a massive learning curve to overcome, so... yeah :)
[2014-01-28 02:58:16 -0500] atomic-penguin: law, have you seen learnchef.opscode.com?
[2014-01-28 02:58:22 -0500] yuppers: law: I'd be happy to point you to some stuff, sec
[2014-01-28 02:58:31 -0500] law: I went through some of the videos.  they were good, but... slow
[2014-01-28 02:58:52 -0500] law: for better or worse, reading is how I ingest stuff these days :-)
[2014-01-28 02:59:18 -0500] yuppers: reading is not too bad
[2014-01-28 02:59:22 -0500] yuppers: I'm a little impatient
[2014-01-28 03:00:13 -0500] martinisoft: I need a "hacking Ohai" book right now :)
[2014-01-28 03:02:05 -0500] yuppers: law: https://gist.github.com/anonymous/8661622
[2014-01-28 03:02:08 -0500] yuppers: there's a few good ones
[2014-01-28 03:02:28 -0500] yuppers: blog posts from https://micgo.net/ are also good
[2014-01-28 03:02:31 -0500] atomic-penguin: FOOD FIIIIGHT!
[2014-01-28 03:04:22 -0500] yuppers: that opscode youtube account has a bunch of good videos on it
[2014-01-28 03:04:31 -0500] yuppers: I liked many of the things from chefconf especially
[2014-01-28 03:04:33 -0500] yuppers: 2013*
[2014-01-28 03:05:35 -0500] law: giggity!
[2014-01-28 03:08:16 -0500] yuppers: law: as an ex puppet user, the horrible community modules were the thing that kind of turned me off of puppet
[2014-01-28 03:08:20 -0500] yuppers: has a real NIH feel to it
[2014-01-28 03:12:21 -0500] atomic-penguin: yuppers, chef gets that too
[2014-01-28 03:12:35 -0500] yuppers: atomic-penguin: to an extent, but I feel it's a bit less
[2014-01-28 03:12:49 -0500] law: yeah, the puppet stuff I ended up just writing my own modules :-)
[2014-01-28 03:12:56 -0500] yuppers: and that's a shame
[2014-01-28 03:13:02 -0500] atomic-penguin: I didn't have much puppet code
[2014-01-28 03:13:27 -0500] atomic-penguin: ...but was easily converted to chef in a couple weeks
[2014-01-28 03:13:51 -0500] yuppers: I'm working with a repo that has community cookbooks pulled in and modified
[2014-01-28 03:14:01 -0500] yuppers: working on removing those forks and simply wrapping the community ones
[2014-01-28 04:06:04 -0500] law: is there a community cookbook that handles adding and removing users/groups via LDAP/
[2014-01-28 04:06:22 -0500] law: s_/_?_g
[2014-01-28 04:06:53 -0500] flaccid: law: try google and the community site
[2014-01-28 04:06:57 -0500] flaccid: always best
[2014-01-28 04:10:12 -0500] jroh: anyone know if you can use node attributes in an LWRP?
[2014-01-28 04:27:04 -0500] cwj: jroh: i think thats possible but imo best to be avoided
[2014-01-28 04:54:32 -0500] eliklein: hmm, anyone know the proper way to pass a hash in as a parameter to a provider?
[2014-01-28 04:55:50 -0500] eliklein: https://gist.github.com/eklein/8662477 <- that doesn't seem to be working
[2014-01-28 05:00:44 -0500] coderanger: eliklein: You either do foo({'asdf' => 'asdf'})
[2014-01-28 05:00:51 -0500] coderanger: or foo 'asdf' => 'asdf'
[2014-01-28 05:01:03 -0500] coderanger: With just the {} it is parsed as a block, not a hash
[2014-01-28 05:05:31 -0500] eliklein: coderanger: sweet! thank you. that was driving me crazy.
[2014-01-28 05:05:53 -0500] eliklein: coderanger: funny enough, i'm trying to pass something to the supervisor cookbook provider that you wrote :)
[2014-01-28 07:03:32 -0500] chefservice: I am trying to troubleshoot a service as its not starting, is there a way to start the service manually on the server without running chef-client?
[2014-01-28 07:08:49 -0500] flaccid: chefservice: yes, start the service in shell
[2014-01-28 07:08:54 -0500] flaccid: like you would on a normal computer
[2014-01-28 08:11:10 -0500] amitz: any official repo to install chef via yum?
[2014-01-28 08:11:30 -0500] flaccid: amitz: use omnibus
[2014-01-28 08:13:17 -0500] amitz: i need to commit to upgrade all chrf infrastructure to the latest security update. any official way ti do that?
[2014-01-28 08:13:28 -0500] amitz: periodically
[2014-01-28 08:13:37 -0500] flaccid: amitz: there isn't security updates provided by chef
[2014-01-28 08:14:14 -0500] amitz: security update of the chef itself
[2014-01-28 08:14:30 -0500] flaccid: i have not seen 'security updates of chef itself'
[2014-01-28 08:15:34 -0500] amitz: sigh, more manual work to do -_-
[2014-01-28 08:15:45 -0500] flaccid: what kind of manual work?
[2014-01-28 08:16:00 -0500] amitz: to upgrade chef
[2014-01-28 08:16:10 -0500] flaccid: that doesn't need to be manual
[2014-01-28 08:16:36 -0500] amitz: is there an official recipe for that?
[2014-01-28 08:18:12 -0500] flaccid: no but there is also no way to know if there is a 'security update'
[2014-01-28 08:18:29 -0500] flaccid: how would you know if you need to upgrade or not..
[2014-01-28 08:18:53 -0500] flaccid: dinner time for me
[2014-01-28 08:19:04 -0500] amitz: it's just for compliance purpose, as long as there is a minor version upgrade, wenhave to upgrade
[2014-01-28 08:20:17 -0500] flaccid: then manual work yes, i don't think chef has a yum repo that is maintained
[2014-01-28 08:20:28 -0500] flaccid: they provide packages for download
[2014-01-28 08:21:02 -0500] flaccid: i guess thats why people do this http://velohacker.com/2012/05/29/a-repo-for-the-chef-omnibus-packages/
[2014-01-28 08:21:08 -0500] amitz: noted
[2014-01-28 09:06:20 -0500] ocholetras: hi guys
[2014-01-28 09:09:23 -0500] ocholetras: Anyone knows why " ruby -c recipe.rb" raises: "default.rb:53: invalid multibyte char (US-ASCII)" and knife cookbook upload does not say anything at all?
[2014-01-28 09:09:24 -0500] ocholetras: O-o
[2014-01-28 09:09:38 -0500] ocholetras: On a team mate computer it does
[2014-01-28 09:09:50 -0500] ocholetras: We have same ruby and knife versions and system locale
[2014-01-28 09:09:53 -0500] ocholetras: so wtf O_o
[2014-01-28 09:13:44 -0500] ocholetras: https://tickets.opscode.com/browse/CHEF-2889
[2014-01-28 09:13:52 -0500] ocholetras: never mind
[2014-01-28 09:14:02 -0500] ocholetras: was the '~' on cookbook parth
[2014-01-28 09:14:03 -0500] ocholetras: path
[2014-01-28 09:43:35 -0500] railsraider: anyone can please tell me why the notification is not working http://pastebin.com/uUew4auF
[2014-01-28 09:43:53 -0500] railsraider: the template does not notifes execure and start service
[2014-01-28 09:47:35 -0500] railsraider: i ended up not using the notification, but just curious as to why it did not run
[2014-01-28 09:57:53 -0500] krz: for the execute command. is there something wrong with:   environment { 'RAILS_ENV' => node[:environment_variables][:RAILS_ENV], 'RACK_ENV' => node[:environment_variables][:RACK_ENV], 'HOME' => '/home/deploy' }
[2014-01-28 09:58:16 -0500] krz: complains with syntax error, unexpected tASSOC, expecting '}'
[2014-01-28 09:59:05 -0500] krz: thats a valid hash no?
[2014-01-28 09:59:24 -0500] coderanger: krz: So ruby syntax anomaly
[2014-01-28 09:59:37 -0500] coderanger: You need either foo({'asdf' => 'asdf
[2014-01-28 09:59:47 -0500] krz: ah!
[2014-01-28 09:59:54 -0500] coderanger: er,  foo({'asdf' => 'asdf'})
[2014-01-28 09:59:59 -0500] coderanger: or foo 'asdf' => 'asdf'
[2014-01-28 10:00:12 -0500] coderanger: With just the {} the it is interpreted as a block
[2014-01-28 10:02:04 -0500] ocholetras: set['bla']['foo'] = 'bar'
[2014-01-28 10:02:07 -0500] ocholetras: sets a normal attribute, right?
[2014-01-28 10:02:17 -0500] ocholetras: wasnt it deprecated ?
[2014-01-28 10:02:46 -0500] ocholetras: normal["apache"]["dir"] = "/etc/apache2"  #set is an alias of normal.
[2014-01-28 10:02:48 -0500] ocholetras: nvm
[2014-01-28 10:02:50 -0500] ocholetras: ^^
[2014-01-28 10:02:55 -0500] coderanger: yeah, same diff
[2014-01-28 10:03:10 -0500] coderanger: granted you should almost never do either of those
[2014-01-28 10:06:50 -0500] krz: coderanger: so   environment ({ 'RAILS_ENV' => node[:environment_variables][:RAILS_ENV], 'RACK_ENV' => node[:environment_variables][:RACK_ENV], 'HOME' => '/home/deploy' })
[2014-01-28 10:08:14 -0500] coderanger: Should work
[2014-01-28 11:16:06 -0500] ocholetras: https://gitlab.com/gitlab-org/cookbook-gitlab vs https://github.com/lucasec/gitlab-server
[2014-01-28 11:17:19 -0500] daxroc: Morning all
[2014-01-28 11:18:05 -0500] daxroc: Is it possible to only run a minitest on a specific platform?
[2014-01-28 12:47:34 -0500] sandGorgon: is anybody here deploying using chef for RubyonRails? I'm considering using chef for infra, so want to try and use it for deployment as well
[2014-01-28 12:49:24 -0500] Cope: sandGorgon: do you actually have a question? a problem? some information? or are you just conducting a survey?
[2014-01-28 12:49:29 -0500] Cope: sniping aside (pet peeve)...
[2014-01-28 12:49:38 -0500] Cope: plenty of people deploy apps with chef
[2014-01-28 12:49:44 -0500] Cope: now ask your real question
[2014-01-28 12:49:59 -0500] Cope: sandGorgon: there's a deploy resoruce
[2014-01-28 12:50:04 -0500] Cope: which is modelled after capistrano
[2014-01-28 12:50:22 -0500] Cope: and there are cookbooks which make it easy to deploy a range of apps in an opinionated way
[2014-01-28 12:50:41 -0500] Cope: i've deployed rails apps with chef - I think it's a pretty good solution
[2014-01-28 12:51:14 -0500] Cope: some people don't like the idea of havingto run chef to deploy the app
[2014-01-28 12:51:24 -0500] Cope: how do you do it now?
[2014-01-28 12:52:56 -0500] sandGorgon: Cope, I wanted to know best practices around it
[2014-01-28 12:53:47 -0500] sandGorgon: Cope, right now we use Capistrano, but dont have any infrastructure management in place. We are starting to use Chef for it, so was wondering if people have successfully used Chef to do it - and we have only one framework to worry about.
[2014-01-28 12:54:18 -0500] sandGorgon: Cope, the python-to-ruby interaction, especially with migrations, rake scripts, etc. are worrying me
[2014-01-28 12:55:17 -0500] Cope: sandGorgon: so the deploy resource is very much like cap
[2014-01-28 12:55:19 -0500] Cope: with callbacks
[2014-01-28 12:55:24 -0500] aujt74: sandGorgon: Perhaps your best bet would be to look at the application cookbooks? ckbk.it/application, ckbk.it/application_ruby, etc etc.
[2014-01-28 12:55:42 -0500] Cope: you can basically do a pretty standard cap-style rails deploy with it
[2014-01-28 12:55:51 -0500] aujt74: The application_ruby cookbook handles pretty much everything you could need for deploying a Rails app
[2014-01-28 12:56:10 -0500] Cope: sandGorgon: where does python come into it? sorry if I missed a bit of the puzzle
[2014-01-28 12:58:24 -0500] sandGorgon: sorry - we have a bit of python as well ... and the question we have been fighting about is if we use multiple deployment tools or if chef fits very easily into the deployment role. aujt74 and your posts suggest that there might be
[2014-01-28 13:07:16 -0500] moutinho: Hi. Can anyone help me out on why templates are executed before a provider (like ark) ?
[2014-01-28 13:09:18 -0500] CaptainQuirk: ohai
[2014-01-28 13:09:56 -0500] CaptainQuirk: I don't understand how I'm supposed to set attribute values when using the community sudo cookbook
[2014-01-28 13:10:01 -0500] CaptainQuirk: I'm using chef-solo
[2014-01-28 13:10:09 -0500] CaptainQuirk: I have a json file containing my run list
[2014-01-28 13:10:41 -0500] CaptainQuirk: Should I put them there ?
[2014-01-28 13:11:16 -0500] CaptainQuirk: And when I test on a virtualized environnement (by hand for now, not with testkitchen), am I supposed to edit them there ?
[2014-01-28 13:22:31 -0500] denniswisnia: https://gist.github.com/anonymous/b678f56c83e4fee0001d - is that right?
[2014-01-28 13:32:27 -0500] stormerider: what's the easiest way to copy file a on the system to location b if it doesn't exist? apparently the app doesn't like symlinks, so i have to copy the JAR manually
[2014-01-28 13:32:44 -0500] stormerider: im not sure if there's a copy primitive or if i need to use say execute
[2014-01-28 13:34:47 -0500] CaptainQuirk: stormerider, I think it's a ruby block you need
[2014-01-28 13:35:02 -0500] CaptainQuirk: with an only_if attribute
[2014-01-28 13:35:11 -0500] CaptainQuirk: like only_if ::File.exists?
[2014-01-28 13:35:13 -0500] CaptainQuirk: I think
[2014-01-28 13:42:13 -0500] jedi4ever: I'm looking for a way to override the service -> restart in an external cookbook ; in a way that I can control if it should start or not ; but it sends a notify restart
[2014-01-28 13:43:15 -0500] cannonball: Has anybody successfully put chef-client on an openvz container? There are a few sysctl entries that chef wants to control that openvz doesn't expose.  (I don't recall the exact error, it's been a while since I tried last.)
[2014-01-28 13:44:09 -0500] dwradcliffe: stormerider: you want remote_file with the action :create_if_missing http://docs.opscode.com/resource_remote_file.html
[2014-01-28 13:44:41 -0500] stormerider: dwradcliffe: but it's a local file, or does remote_file support file:// urls?
[2014-01-28 13:45:00 -0500] stormerider: anyways, i got it working with an execute block calling cp
[2014-01-28 13:45:18 -0500] dwradcliffe: stormerider: it supports file:// See the docs for the source attribute
[2014-01-28 13:45:32 -0500] stormerider: thanks, will keep that in mind for the future
[2014-01-28 13:56:35 -0500] CogitoErgoSum: Hey - hoping someones awake in chan having a problem bootstrapping/registering a node
[2014-01-28 14:01:05 -0500] atomic-penguin: CogitoErgoSum, I think you're going to have to give us more to go on, than that.
[2014-01-28 14:26:17 -0500] daxroc: Is editing a file like this OK? Is there a better method? https://github.com/daxroc/chef-cookbook-hostname/commit/9d1b076a4b30157c4fe2aa4f978d41b7c7ad27ae
[2014-01-28 14:38:42 -0500] shlant: daxroc: usually you'd want to template it out, but I find that to be a lot of work for one change
[2014-01-28 14:39:12 -0500] aujt74: daxroc: You might want to look into the line cookbook, ckbk.it/line and https://github.com/someara/line-cookbook
[2014-01-28 14:39:52 -0500] shlant: aujt74: that's an awesome solution. thanks for sharing!
[2014-01-28 14:40:44 -0500] aujt74: shlant: you are right, usually better to template out but that can get you out of a bind with certain files when you only want to manage a line or two
[2014-01-28 14:41:59 -0500] shlant: aujt74: yea, sometimes in the long run it's better to template because you'll end up wanting to parameterize a bunch, but it really depends on the file
[2014-01-28 14:42:49 -0500] daxroc: Would my change constantly update that file even if it didn't change ?
[2014-01-28 14:43:33 -0500] yatesy: run it a few times and see!
[2014-01-28 14:43:49 -0500] shlant: daxroc: I wouldn't think so, but not sure
[2014-01-28 14:43:53 -0500] daxroc: I left it just the line as I didn't want to add a dependency to the cookbook
[2014-01-28 14:59:54 -0500] Azrael: is seth vargo around? :-)
[2014-01-28 15:00:12 -0500] daxroc: shlant: It's modifying on every run.
[2014-01-28 15:01:13 -0500] shlant: daxroc: ew. Well that's god to know
[2014-01-28 15:01:16 -0500] shlant: good*
[2014-01-28 15:13:23 -0500] helfire: this is odd: Undefined method or attribute `cookbook_collection' on `node'
[2014-01-28 15:37:33 -0500] mancdaz: sethvargo: how quickly will new supported OSes in fauxhai trickle into the gem (the docs say a new version isn't necessary to add support for new OS versions)
[2014-01-28 15:38:02 -0500] sethvargo: @mancdaz theoretically, immediately. IFF the version if *new*. If there are changes to an existing version, I need to bump
[2014-01-28 15:38:52 -0500] sethvargo: @mancdaz https://github.com/customink/fauxhai/blob/master/lib/fauxhai/mocker.rb#L42-L73
[2014-01-28 15:39:19 -0500] mancdaz: ah ok cool
[2014-01-28 15:40:59 -0500] allaire: Are these two equivalents? https://gist.github.com/allaire/be51dc9544f3ca137077 i.e including the recipe before setting my attributes from a databag or doing the inverse
[2014-01-28 15:43:04 -0500] mancdaz: sethvargo: ok great that works for me. Thanks!
[2014-01-28 15:43:54 -0500] shlant: allaire: depends on whether that's the first time the include_recipe is encountered
[2014-01-28 15:44:14 -0500] shlant: if it's the first time in the run, that recipe will be run fisrt
[2014-01-28 15:44:33 -0500] shlant: i'm not sure how it works for accessing data bags
[2014-01-28 15:44:48 -0500] shlant: the attributes that don't rely on the data bag would be set at the beginning of the run
[2014-01-28 15:45:01 -0500] shlant: but I can't say for sure about the data bag
[2014-01-28 15:45:18 -0500] allaire: but since they are set from attribute files, they'll get overwritten by the ones set in the recipes?
[2014-01-28 15:46:34 -0500] shlant: allaire: at the beginning of the chef run, all attributes are gathered and then set based on precedence
[2014-01-28 15:47:01 -0500] shlant: so normal attributes won't be affected by the placement of the include_recipe
[2014-01-28 15:47:12 -0500] shlant: but I don't know about attributes set from data bags
[2014-01-28 15:47:34 -0500] schlazor: I'm writing a cookbook where I'm templating a bunch of XML files. I'm trying to use hashes/objects/whatever you want to call them as attribute values to modify default configs, and it seems to work once but then I end up with a bunch of nested garbage saved in the node and subsequent chef client runs fail with "You tried to set a nested key, where the parent is not a hash-like object". Chef 10.26.
[2014-01-28 15:47:57 -0500] helfire: whats the best way to check if a node attribute is null? seems like == nil, .nil? etc bomb out the chef run
[2014-01-28 15:49:59 -0500] docwhat: sethvargo: Is there going to be a gem released for berkshelf 3?
[2014-01-28 15:50:04 -0500] phutchins: helfire: I usually use if !node[bleh].nil?
[2014-01-28 15:50:13 -0500] sethvargo: @docwhat whenever it's done
[2014-01-28 15:50:39 -0500] docwhat: sethvargo: oh, it isn't done yet?  Then I'm confused by the note in the README which advises me to use berkshelf 3....
[2014-01-28 15:50:57 -0500] sethvargo: @docwhat there are some major blocking bugs before we can release. but it's better than 2
[2014-01-28 15:51:06 -0500] shlant: docwhat: it's still considered bleeding edge/beta I think
[2014-01-28 15:51:15 -0500] shlant: even though it's recommded
[2014-01-28 15:51:21 -0500] shlant: recommended
[2014-01-28 15:51:56 -0500] docwhat: sethvargo: Are the blocking bugs labeled in github? Maybe I can help. :-/
[2014-01-28 15:52:13 -0500] sethvargo: They are milestoned, yes
[2014-01-28 15:52:52 -0500] docwhat: Are they the 'Must' labeled bugs?
[2014-01-28 15:55:51 -0500] schlazor: pastebin of my woes: http://pastebin.com/jteNhyj0
[2014-01-28 15:56:07 -0500] docwhat: oh, I see... never used milestones in github before. neat.
[2014-01-28 16:00:59 -0500] schlazor: nevermind found the problem. ranges need to be a hash in an array. Thanks for listening!
[2014-01-28 16:03:38 -0500] mancdaz: sethvargo: just added a pull for redhat 6.5 support in fauxhai
[2014-01-28 16:04:29 -0500] geggam: feature request... a non admin admin account that can be given to managers who think they should have access to something that can destroy everything
[2014-01-28 16:06:50 -0500] zaargy: haha
[2014-01-28 16:07:22 -0500] zaargy: i believe in enterprise chef you get more granular acls
[2014-01-28 16:14:43 -0500] jchauncey: ivey: you around?
[2014-01-28 16:15:45 -0500] ivey: Yes
[2014-01-28 16:15:51 -0500] ivey: I am always around
[2014-01-28 16:17:05 -0500] jchauncey: hey we have a pull request for berkshelf for a pretty significant bug and cant get anyone to respond.
[2014-01-28 16:17:13 -0500] jchauncey: https://github.com/berkshelf/berkshelf/pull/997
[2014-01-28 16:17:43 -0500] ivey: I'll take a look
[2014-01-28 16:18:25 -0500] jchauncey: k thanks
[2014-01-28 16:18:33 -0500] jchauncey: here's the issue - https://github.com/berkshelf/berkshelf/issues/978
[2014-01-28 16:19:37 -0500] nfx_: hey everyone, silly question but i fiond the chef documentation a little confusing on the subject. There's a client private key for nodes and a users private key for workstations correct? For interacting with the chef server via knife. Which key do I specify under "client_key" ?
[2014-01-28 16:19:56 -0500] nfx_: my user's private key or a client.pem key ?
[2014-01-28 16:20:10 -0500] jchauncey: your private key
[2014-01-28 16:20:21 -0500] nfx_: my user's private key right?
[2014-01-28 16:21:05 -0500] nfx_: this is what the documentation says: "Generating Keys The server generates two types of private keys: one for nodes and workstations (typically referred to as a client key) and the other for the organization. If (for any reason) a new key is required, the server can re-generate these keys."
[2014-01-28 16:21:26 -0500] helfire: can you check null of a nested hash? eg: node[foo].nil? works but node[foo][bar].nil? doesnt
[2014-01-28 16:21:52 -0500] nfx_: so it's as if the documentation is saying the client.pem key used by nodes is the same key for workstations (knife)
[2014-01-28 16:22:38 -0500] ivey: jchauncey: I haven't looked at the resolver in a while so I need to read more code. Will ping Seth and Jamie as well and see if we can get a feel
[2014-01-28 16:22:42 -0500] ivey: For this today
[2014-01-28 16:22:56 -0500] ivey: Thanks for the ping
[2014-01-28 16:23:23 -0500] jchauncey: thanks a ton
[2014-01-28 16:23:26 -0500] jchauncey: =)
[2014-01-28 16:27:55 -0500] sethvargo: @mancdaz merged
[2014-01-28 16:28:24 -0500] mancdaz: sethvargo: thanks.
[2014-01-28 16:29:27 -0500] sethvargo: @jchauncey I just merged that
[2014-01-28 16:29:38 -0500] sethvargo: \/cc @ivey ^
[2014-01-28 16:57:38 -0500] jchauncey: sethvargo: yeah we saw that. thanks a lot
[2014-01-28 16:58:11 -0500] jchauncey: sethvargo: i thought russ was going to pull his hair out yesterday trying to figure it out
[2014-01-28 16:58:28 -0500] sethvargo: @jchauncey lol
[2014-01-28 16:58:38 -0500] sethvargo: @jchauncey for future refs, those types of Qs are probably better off in #berkshelf
[2014-01-28 16:58:57 -0500] jchauncey: yeah i thought about that after i sent the message this morning
[2014-01-28 17:01:23 -0500] helfire: fyi this worked for testing nil on a nested node attr if ( (!node[foo][bar].nil?) rescue false)
[2014-01-28 17:15:54 -0500] thun_: Is it possible to set environment from chef-client run with -o ?
[2014-01-28 17:17:46 -0500] helfire: thun_ you could edit the node, i havent seen that option in the client
[2014-01-28 17:19:21 -0500] btm: thun_: have you tried chef-client -E myenv -o my_runlist ?
[2014-01-28 17:22:02 -0500] c4milo: how can I tell chef to print the command output when using the execute resource?
[2014-01-28 17:22:10 -0500] thun_: btm: ty
[2014-01-28 17:26:10 -0500] btm: c4milo: if you're just troubleshooting, run in debug mode: chef-client -l debug
[2014-01-28 17:26:30 -0500] c4milo: btm: it doesn't print the output of the commands run by execute
[2014-01-28 17:27:29 -0500] c4milo: unfortunately
[2014-01-28 17:35:01 -0500] btm: c4milo: what version of chef? are you running on the command line or in a script? works here: https://gist.github.com/btm/db0cc8ac8786abc69681
[2014-01-28 17:35:20 -0500] c4milo: btm: 11.4.4
[2014-01-28 17:35:37 -0500] c4milo: btm: chef-solo
[2014-01-28 17:36:22 -0500] btm: c4milo: https://github.com/opscode/chef/blob/master/lib/chef/mixin/shell_out.rb#L36
[2014-01-28 17:37:59 -0500] c4milo: btm: this is an excerpt of my output: https://gist.github.com/c4milo/335c90ee539e8f9396a5
[2014-01-28 17:39:09 -0500] c4milo: btm: why doesn't it work for me :/?
[2014-01-28 17:39:28 -0500] btm: c4milo: what are you running? works with solo too: https://gist.github.com/btm/db0cc8ac8786abc69681#file-solo-txt
[2014-01-28 17:40:19 -0500] c4milo: btm: I'm running it with Vagrant
[2014-01-28 17:41:34 -0500] c4milo: btm: this is an excerpt of what I'm doing: https://gist.github.com/c4milo/82993f3bcb61c8d4a0c1
[2014-01-28 17:41:43 -0500] c4milo: in the chef side
[2014-01-28 17:42:16 -0500] btm: c4milo: Vagrant's changing your formatter. http://mlafeldt.github.io/blog/2013/10/debugging-chef-runs-with-chef-log/ see the CHEF_FORMAT section.
[2014-01-28 17:44:10 -0500] c4milo: btm: nice find. Thank you!
[2014-01-28 17:47:52 -0500] allaire: when I upload a data bag from file, it always encrypt it, even if it's already encrypted locally, any ideas?
[2014-01-28 17:48:03 -0500] allaire: that leads to a double encryption and then I can't decrypt the file anymore
[2014-01-28 17:53:14 -0500] law: hey all, dumb n00b question of the day - when looking at the output of 'knife node show <hostname>', I get a bunch of data including the 'Runlist' and the 'Recipies' of that node
[2014-01-28 17:53:29 -0500] law: are the recipes just expanded from the runlist, or are they two separate entities?
[2014-01-28 17:53:55 -0500] Cope: law: the run list consists of zero or more recipes and/or roles
[2014-01-28 17:54:11 -0500] Cope: each role and or recipe may include other recipes/roles
[2014-01-28 17:54:22 -0500] Cope: so there's the concept of an expanded runlist
[2014-01-28 17:54:38 -0500] Cope: which is all the stuff you need as a result of depsolving the run list
[2014-01-28 17:56:40 -0500] teukka: btm: do you have opinions how the default formatter in vagrant should behave? use 'doc' if log level is debug?
[2014-01-28 17:59:01 -0500] allaire: If I use knife[:secret_file], does all my knife data bag from file are encrypted? It looks like so
[2014-01-28 18:01:48 -0500] teukka: allaire: I would assume that if you give knife the secret either as config or cli option, it encrypts/decrypts
[2014-01-28 18:02:19 -0500] allaire: yeah, just found that out
[2014-01-28 18:02:59 -0500] allaire: teukka: I store my encrypted data bags in my chef-repo, so I was used to do knife data bag from file without the --secret-fiile switch to upload the encrypted file directly
[2014-01-28 18:03:44 -0500] allaire: but since I also use knife-solo for this project, I put this the :secret_file config, and that lead knife to encrypt my already encrypted file, makes sense? :P
[2014-01-28 18:04:26 -0500] teukka: maybe passing empty `--secret-file` helps? not sure
[2014-01-28 18:04:46 -0500] teukka: --secret-file=""
[2014-01-28 18:05:00 -0500] allaire: ERROR: Errno::ENOENT: No such file or directory - file not found '' :(
[2014-01-28 18:05:22 -0500] allaire: so I might have to remove the setting, and using knife-solo, manually specify with a switch the encrypted file?
[2014-01-28 18:05:34 -0500] law: the reason I ask is, I'm trying to track down where we're applying a 'users' cookbook, because it's not showing up in the runlist (but it is in the recipes)
[2014-01-28 18:05:55 -0500] law: I thought it might've been applied via the 'base' cookbook, but after going all through that mess, it's not referenced there
[2014-01-28 18:09:40 -0500] allaire: teukka: I think that's my only option :)
[2014-01-28 18:10:15 -0500] teukka: allaire: as discussed in github, knife-solo won't even use the `knife[:secret_file]`. knife-solo-data_bag probably does as it uses knife's routines internally
[2014-01-28 18:10:45 -0500] allaire: teukka: how does knife-solo upload the data bag key then?
[2014-01-28 18:11:08 -0500] teukka: allaire: it uses `encrypted_data_bag_secret`
[2014-01-28 18:12:11 -0500] allaire: teukka: using encrypted_data_bag_secret would also lead in a double encryption with chef server, since even if it's deprecated, it still has a meaning correct?
[2014-01-28 18:12:18 -0500] allaire: same as knife[:secret_file]
[2014-01-28 18:12:36 -0500] teukka: allaire: yeah you're correct...
[2014-01-28 18:14:01 -0500] allaire: teukka: Also, knife-solo_data_bag saves encrypted databag with json wraping the encrypted stuff, things like "json_class": "Chef::DataBagItem", Is this normal behaviour?
[2014-01-28 18:15:04 -0500] allaire: Cause I cant do knife data bag from file with files like that, I always need to strip the stuff around the "raw_data" key
[2014-01-28 18:15:14 -0500] teukka: allaire: hmm, doesn't sound right. I haven't used it myself as I have my legacy scripts
[2014-01-28 18:16:04 -0500] allaire: teukka: funny thing is, when I do knife knife data bag edit secrets foo, I see the extra json, but when I go on my chef server panel, I don't see it
[2014-01-28 18:18:30 -0500] martinisoft: kallistec: If you have a few minutes, I'm trying to figure out a way to instruct ohai about picking a better "default interface" for the networking data in ohai.
[2014-01-28 18:19:33 -0500] martinisoft: Seems the current ohai docs talk about building new data structures, not updating or hinting existing ones.
[2014-01-28 18:22:02 -0500] kallistec: martinisoft: the data is all mutable so you can change the decisions of plugins that have already run
[2014-01-28 18:23:20 -0500] martinisoft: kallistec: I wrote a plugin to just change the ipaddress attribute and it seems to have broken the network plugin entirely from running.
[2014-01-28 18:23:52 -0500] kallistec: martinisoft: you'll want to ensure that the network plugin runs first, probably
[2014-01-28 18:24:43 -0500] geraldvillorente: Any idea how to create symbolic link? I tried this link http://docs.opscode.com/resource_link.html but I keep getting this error FATAL: Errno::EISDIR: ...
[2014-01-28 18:24:49 -0500] martinisoft: kallistec: is there a way to specify order in the OHAI 6 plugins then?
[2014-01-28 18:25:10 -0500] kallistec: martinisoft: in ohai 6 use `require_plugin`
[2014-01-28 18:26:39 -0500] therealtimsmith: should Chef::Log.info calls in a provider show up when running in debug?
[2014-01-28 18:26:45 -0500] martinisoft: kallistec: https://gist.github.com/martinisoft/8673261 <- there is a gist of the plugin. I'm requiring network early on in the plugin
[2014-01-28 18:30:07 -0500] shlant: geraldvillorente: are you linking a directory to a driectory? or a file to a dir?
[2014-01-28 18:31:18 -0500] shlant: geraldvillorente: see last comment here: https://tickets.opscode.com/browse/CHEF-2383
[2014-01-28 18:34:40 -0500] btm: geraldvillorente: what does your resource look like? http://gist.github.com
[2014-01-28 18:35:55 -0500] geraldvillorente: shlant: I want to link a directory under a specified directory
[2014-01-28 18:36:44 -0500] geraldvillorente: shlant: tried that already
[2014-01-28 18:37:03 -0500] geraldvillorente: here is the error [2014-01-28T18:32:32+00:00] FATAL: Errno::EISDIR: link[/vagrant/bin/coder_module/coder_sniffer/Drupal] (vdd::create_symlink line 2) had an error: Errno::EISDIR: Is a directory - /vagrant/bin/coder_module/coder_sniffer/Drupal
[2014-01-28 18:38:11 -0500] geraldvillorente: @btm: https://gist.github.com/geraldvillorente/8673463
[2014-01-28 18:39:43 -0500] therealtimsmith: anyone?  should a provider be able to log to chef log via info or debug?
[2014-01-28 18:57:17 -0500] martinisoft: therealtimsmith: I think by default its INFO for chef-client so it depends on your logging verbosity.
[2014-01-28 18:57:55 -0500] therealtimsmith: chef-client -l debug doesn't seem to be showing any logging in my provider
[2014-01-28 18:59:03 -0500] martinisoft: therealtimsmith: and you are calling the provider in a recipe?
[2014-01-28 18:59:08 -0500] therealtimsmith: yea
[2014-01-28 19:04:26 -0500] martinisoft: therealtimsmith: Not even sure chef-shell would help there then assuming you are calling the provider in the recipe.
[2014-01-28 19:04:53 -0500] therealtimsmith: yea debugging this thing is nearly impossible without logging
[2014-01-28 19:05:00 -0500] therealtimsmith: neither info or debug show up
[2014-01-28 19:52:39 -0500] shlant: does anyone know why berkshelf isn't picking up my changes in vagrant?
[2014-01-28 19:53:12 -0500] shlant: I am running chef-solo with vagrant-berkshelf, but if I make changes locally, they aren't recognized
[2014-01-28 19:53:34 -0500] shlant: I have the local cookbook in the Berksfile like this
[2014-01-28 19:53:42 -0500] shlant: cookbook 'company', path: 'cookbooks/company'
[2014-01-28 19:54:15 -0500] DandyPandy_: I'm looking for a way to tell chef to basically go noop on a node if an attribute is set. I'm thinking I would put in the first recipe in the run list, base::default, a check for an attribute node[:noop], and stop right there. How do I go about telling chef-client to stop right there?
[2014-01-28 19:55:28 -0500] therealtimsmith: DandyPandy_:  noop, but not kill the client?
[2014-01-28 19:55:45 -0500] DandyPandy_: therealtimsmith: it could die there for all I care
[2014-01-28 19:56:05 -0500] therealtimsmith: if you're ok with the client dying a horrible death check out the omnibus_updater cookbook
[2014-01-28 19:56:11 -0500] therealtimsmith: it has an option to kill the chef client
[2014-01-28 19:56:36 -0500] DandyPandy_: nice. I'll look there. Thanks!
[2014-01-28 19:57:05 -0500] therealtimsmith: but it might be easier to just do a raise
[2014-01-28 19:57:20 -0500] therealtimsmith: raise if node.run_list.include?('whatever)
[2014-01-28 19:57:38 -0500] therealtimsmith: pretty sure that'll back out of the entire thing
[2014-01-28 19:58:12 -0500] DandyPandy_: therealtimsmith: yeah, they just use raise
[2014-01-28 19:58:36 -0500] DandyPandy_: And that will do the job quite nicely
[2014-01-28 20:23:38 -0500] nfx_: Hey everyone, I'm having some issues with Berkshelf. Whenever I do a berks upload it resolves all the dependencies (berks install works) and then when it gets to uploading my cookbook to the Chef server it fails with an error:
[2014-01-28 20:23:47 -0500] nfx_: "Ridley::SandboxUploader crashed! Faraday::Error::ConnectionFailed: 400 "Bad Request""
[2014-01-28 20:24:19 -0500] nfx_: I can do a knife node list from the berkshelf cookbook directory no problem
[2014-01-28 20:26:51 -0500] davetrend: hey.  Is anybody working on a cookbook to build AWS Elastic Map Reduce clusters?  I can't find any.  Straight Hadoop, straight MapR to EC2, but not EMR.
[2014-01-28 20:27:25 -0500] davetrend: and if this isn't the right place to ask this, lemme know
[2014-01-28 20:36:17 -0500] shlant: nfx_: have you tried it multiple times?
[2014-01-28 20:38:35 -0500] nfx_: i have, been troubleshooting this all day
[2014-01-28 20:38:49 -0500] nfx_: i have a feeling it might be our corporate firewall though
[2014-01-28 20:39:03 -0500] nfx_: but i specified it the proxy in the berkshelf config.json
[2014-01-28 21:09:16 -0500] shlant: so confused. any berkshelf chef-solo users?
[2014-01-28 21:10:19 -0500] patrickv: nop. we are here because we don't use chef :)
[2014-01-28 21:18:29 -0500] mib_mib: hi all - i am trying to test out if chef is generating my my.cnf file for mysql properly, i've just made some edits, how can i run chef so it will just generate this one file?
[2014-01-28 21:19:04 -0500] helfire: mib_mib: you can do a chef-client -W
[2014-01-28 21:19:06 -0500] helfire: for a why run
[2014-01-28 21:19:12 -0500] helfire: and see if it will overwrite your changes
[2014-01-28 21:19:17 -0500] patrickv: as you run chef you see a diff anyway
[2014-01-28 21:19:36 -0500] helfire: but if your chef-client is idepnotent, you shouldnt care if it runs all your recipies
[2014-01-28 21:19:54 -0500] patrickv: idempotent. and normally it is
[2014-01-28 21:20:33 -0500] mib_mib: helfire: to give you more context,  i have a chef project that has a bunch of roles, and then some templates one of these is my.cnf - i've edited the role and teh template, and i want just that one file to generate, not everything - and i want to do it on my localy machine without it doing everything else (which i'm not sure what else it will try to do locally)
[2014-01-28 21:21:13 -0500] patrickv: use chef-solo then
[2014-01-28 21:22:05 -0500] patrickv: hey actually - I know of a chef solo tutorial on youtube, it walks you all through it.
[2014-01-28 21:22:11 -0500] patrickv: as a screencast.
[2014-01-28 21:22:38 -0500] mib_mib: ok
[2014-01-28 21:22:47 -0500] patrickv: that way you might understand better how chef -o 'recipe[cookbook::recipe]' and other things like that work
[2014-01-28 21:23:28 -0500] patrickv: chef-solo -o. not chef -o
[2014-01-28 21:23:47 -0500] patrickv: anyway. send me a msg if you want the link
[2014-01-28 21:29:35 -0500] mib_mib: yeah sure - you cant just paste it here?
[2014-01-28 21:30:21 -0500] patrickv: mmh ok. http://www.youtube.com/watch?v=13CqboU0ijI
[2014-01-28 21:37:51 -0500] geggam: anyone got knife to bootstrap via a proxy + corkscrew ?
[2014-01-28 21:38:16 -0500] geggam: since http / https is the only available proxy
[2014-01-28 22:08:11 -0500] gchristensen: coderanger: ping
[2014-01-28 22:09:06 -0500] gchristensen: Cope: W: Failed to fetch https://s3.amazonaws.com/my-apt-repo/dists/precise/Release Unable to find expected entry 'main/binary-amd64/Packages' in Release file (Wrong sources.list entry or malformed file)
[2014-01-28 22:09:08 -0500] gchristensen: err
[2014-01-28 22:09:10 -0500] gchristensen: coderanger: W: Failed to fetch https://s3.amazonaws.com/my-apt-repo/dists/precise/Release Unable to find expected entry 'main/binary-amd64/Packages' in Release file (Wrong sources.list entry or malformed file)
[2014-01-28 22:16:44 -0500] fak3r: I've worked around a lot of issues, still have chef client hanging at resolving cookbooks for run list: ["base", "web", "logging"] for a few mins, server is cpu 100%, then it goes down, chef-client works. Logs on server don't show any errors.
[2014-01-28 22:40:25 -0500] ponyofdeath: can someone help me figure out why chef gives error on this? http://paste.ubuntu.com/6834696 when the doc for logstash cookbook gives this? http://paste.ubuntu.com/6834699 The error i get from chef is this: http://paste.ubuntu.com/6834703
[2014-01-28 22:55:27 -0500] jboren: I have a dumb question about knife configure --initial.
[2014-01-28 22:56:11 -0500] jboren: I'm setting the client up on a win7 machine.  The 3rd thing it asks is "please enter a name for the new user"
[2014-01-28 22:56:55 -0500] jboren: I"m confused about who this new user is, what it's used for.  It wants to default to my domain username.  Brand new at this and not sure what makes best sense here...
[2014-01-28 22:58:10 -0500] troyready: Has anyone reported the page failure at http://www.getchef.com/blog/2014/01/28/chefs-splunk-cookbook/ yet?
[2014-01-28 23:32:03 -0500] coderanger: gchristensen: Does that file exist?
[2014-01-28 23:32:45 -0500] martinisoft: kallistec: Looks like the plugin works, but its not making it in to the chef-client configuration. Its rather confusing to figure out how to do that via the chef-client cookbook.

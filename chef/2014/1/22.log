[2014-01-22 00:41:18 -0500] flaccid: how can i do an only_if with a resource where a shell command returns 0? like only_if { Mixlib::ShellOut.new('type -P domainname >/dev/null').run_command.stdout.strip }
[2014-01-22 00:42:21 -0500] workmad3: flaccid: how about 'only_if "type -P domainname"'
[2014-01-22 00:42:56 -0500] flaccid: workmad3: that would still pass http://www.foodcritic.io/#FC048 ?
[2014-01-22 00:43:23 -0500] workmad3: flaccid: I don't see why not
[2014-01-22 00:43:47 -0500] workmad3: flaccid: that's about avoiding using %x, system or `` to shell out, and instead using Mixlib::ShellOut
[2014-01-22 00:44:34 -0500] workmad3: flaccid: and you're not using any ruby method to shell out (explicitly)... you're letting chef do the shelling out with the command you specify and sort out the behaviour from the exit code
[2014-01-22 00:45:49 -0500] flaccid: workmad3: i see, but i just tried that with chef-shell and it has the same kind of issue, errors with Errno::ENOENT
[2014-01-22 00:46:15 -0500] flaccid: that is with  only_if "type -P domainname"
[2014-01-22 00:49:52 -0500] workmad3: flaccid: hmm... odd
[2014-01-22 00:51:15 -0500] flaccid: workmad3: hmm maybe its not actually doing bash shell to find the built in, type
[2014-01-22 00:51:47 -0500] workmad3: flaccid: could be
[2014-01-22 00:53:14 -0500] troybattey_: hi, i wonder if someone can assist.  i installed a few jenkins plugins (default['jenkins']['server']['plugins'] = ["git", "stashNotifier", "vagrant"]) and running chef-client seems to work fine.  But I can't find the plugins in the Jenkins Plugin Manager.  I do see the plugins "available" but not "installed".  Any advice?
[2014-01-22 00:54:02 -0500] workmad3: flaccid: that said, I've not had issues with using 'test' in an only_if before
[2014-01-22 00:54:26 -0500] workmad3: oh, test != type
[2014-01-22 00:54:30 -0500] workmad3: it's getting late, I should stop :)
[2014-01-22 00:55:46 -0500] flaccid: hehe, well i think this works! only_if "bash -c 'type -P domainname'"
[2014-01-22 01:12:25 -0500] flaccid: are libraries available to code in ruby_blocks ?
[2014-01-22 01:37:02 -0500] sneak: how do i increase the ruby debug level for 'knife exec'?
[2014-01-22 01:37:15 -0500] sneak: right now it's throwing errors sometimes and doesn't even give me a line number
[2014-01-22 02:09:04 -0500] wwalker: those of you who use CentOS, a two part question.  1) is your chef ruby the same one as the system one?  2) either way which ruby repo (or build it yourself) do you use for your chef ruby?
[2014-01-22 02:09:52 -0500] flaccid: wwalker: can't just use the omnibus pkg?
[2014-01-22 02:19:55 -0500] wwalker: flaccid: I'm asking which ruby package to build on top of (1.9.1, 1.9.3, 2.0.0), omnibus requires me to answer the same question, provide a ruby.  As a sys admin rather than a dev I usually tend to use the vendor (REE, ubuntu, centos, etc) provider of a package or set of packages.  So, I tried ruby 1.8.7 from centos + "gem install knife-solo librarian-chef", the knife gems don't build.
[2014-01-22 02:20:19 -0500] wwalker: I'm assuming that the don't build because the ruby version is too old.
[2014-01-22 02:22:11 -0500] masterkorp: knife/usr/lib/ruby/2.0.0/rubygems/specification.rb:1995:in `raise_if_conflicts': can't activate json-1.8.1, already activated json-1.7.7 (Gem::LoadError)
[2014-01-22 02:22:23 -0500] masterkorp: Guys any idea how do I activate 1.8.1 ??
[2014-01-22 02:33:31 -0500] flaccid: wwalker: i'd use 2.0.0 personally
[2014-01-22 02:34:23 -0500] wwalker: flaccid: thank you.
[2014-01-22 02:35:09 -0500] masterkorp: found, it, the reason was the that json 1.8.1 was a system gem
[2014-01-22 02:35:30 -0500] masterkorp: and since archlinux does not allow system gems the activate comamnd would work
[2014-01-22 02:35:49 -0500] masterkorp: solution pacman -Rc ruby-json && gem install chef
[2014-01-22 02:36:30 -0500] flaccid: masterkorp: yeah and that also relates to why i not like suffixing the version for package names tooo
[2014-01-22 02:36:39 -0500] flaccid: masterkorp: why you not using ominbus-chef package ?
[2014-01-22 02:37:26 -0500] masterkorp: flaccid: because its my workstation
[2014-01-22 02:37:43 -0500] masterkorp: i just knife and chef-zero and shit
[2014-01-22 02:38:30 -0500] flaccid: masterkorp: same, but i still use https://wiki.archlinux.org/index.php/Chef#Omnibus_Chef
[2014-01-22 02:38:33 -0500] flaccid: works good
[2014-01-22 02:39:24 -0500] flaccid: masterkorp: better than the other two methods, alas i provided all 3 options :)
[2014-01-22 02:39:29 -0500] wastrel: hi 
[2014-01-22 02:42:13 -0500] masterkorp: nah, just gem update later on
[2014-01-22 02:43:48 -0500] flaccid: masterkorp: what you mean?
[2014-01-22 02:55:33 -0500] jameson__: someone turn on the camera for the meetup
[2014-01-22 02:55:35 -0500] jameson__: booo~
[2014-01-22 03:07:04 -0500] masterkorp: flaccid: its easier to keep up to date
[2014-01-22 03:07:29 -0500] flaccid: masterkorp: but easy to run into gem hell too :)
[2014-01-22 03:07:44 -0500] masterkorp: not really
[2014-01-22 03:07:50 -0500] flaccid: i keep this package up to date though, alas you can just edit the pkgbuild
[2014-01-22 03:07:59 -0500] masterkorp: i know
[2014-01-22 03:08:04 -0500] masterkorp: but its too much work
[2014-01-22 03:08:13 -0500] masterkorp: i need to focus on another stuff
[2014-01-22 03:08:26 -0500] masterkorp: i use bundler to keep the diferent versions working
[2014-01-22 03:08:38 -0500] masterkorp: i need multiple versions of various things
[2014-01-22 03:08:44 -0500] flaccid: its less work in fact
[2014-01-22 03:08:50 -0500] flaccid: but each to their own
[2014-01-22 03:09:23 -0500] gchristensen: flaccid: agreed
[2014-01-22 03:09:32 -0500] masterkorp: i could not keep up the pace
[2014-01-22 03:10:03 -0500] masterkorp: i just gave all my 150 packages of rubygems for adoption
[2014-01-22 03:10:39 -0500] flaccid: coolio
[2014-01-22 03:12:50 -0500] spheromak: masterkorp: IMO omni is the way to go. If for no other reason than the thing that manages the system should not be beholden to said system.
[2014-01-22 03:13:25 -0500] gchristensen: +1
[2014-01-22 03:38:08 -0500] |rt|: does anyone know if Tim Smith aka tas50 is on irc?
[2014-01-22 03:42:28 -0500] flaccid: |rt|: you can query nickserv
[2014-01-22 03:44:23 -0500] |rt|: flaccid: all that does it tell me he doesn't use the irc nick of tas50
[2014-01-22 03:45:16 -0500] flaccid: sure, this channel is about chef not finding people though
[2014-01-22 03:45:48 -0500] |rt|: flaccid: he's a maintainer of some community cookbooks which is why I'm trying to find him....seems chef related to me
[2014-01-22 03:46:30 -0500] flaccid: |rt|: hes on twitter https://twitter.com/tas50
[2014-01-22 03:47:12 -0500] flaccid: and github even has his email address listed https://github.com/tas50
[2014-01-22 03:47:18 -0500] flaccid: google is amazing :)
[2014-01-22 03:47:21 -0500] |rt|: flaccid: yes I had an exchange with him there regarding a patch for freebsd package resource....was hoping to have a more than 140 character conversation here
[2014-01-22 04:31:54 -0500] brucelee: hey anyone here?
[2014-01-22 04:32:26 -0500] brucelee: vagrant berkshelf plugin doesnt seem to work. I edit ~/chef-repo/Vagrantfile and added config.berkshelf.enabled = true, and then vagrant up brings up the VM, but i dont think my cookbook executed. Heres the output of my vagrant file, berksfile, what happens when i run vagrant up, and my ~/chef-repo/cookbooks/recipe/default.rb: http://www.hastebin.com/dokuyanabu.cmake , anyone know whats going on?
[2014-01-22 04:37:13 -0500] atomic-penguin: just us chickens
[2014-01-22 04:39:17 -0500] brucelee: :O
[2014-01-22 04:39:32 -0500] brucelee: heres a better paste. Heres output of "vagrant up"
[2014-01-22 04:39:33 -0500] brucelee: http://www.hastebin.com/jesunovalu.dos
[2014-01-22 04:39:42 -0500] brucelee: and also pasted contents of Vagrantfile
[2014-01-22 04:39:44 -0500] brucelee: and Berkfile
[2014-01-22 04:44:05 -0500] atomic-penguin: brucelee, well looking at the 2nd paste, looks like you should set "ssl":{"verify":false} in your ~/.bershelf/config.json
[2014-01-22 04:47:19 -0500] brucelee: atomic-penguin: let me try that
[2014-01-22 04:49:53 -0500] atomic-penguin: brucelee, as for the first paste, I don't see what the problem is, but its pretty late for me
[2014-01-22 04:52:08 -0500] brucelee: atomic-penguin: dont leave :p
[2014-01-22 04:54:30 -0500] brucelee: i dont have a config.json fil
[2014-01-22 04:54:53 -0500] atomic-penguin: You can do a berks configure to create one
[2014-01-22 04:55:02 -0500] brucelee: oh ok
[2014-01-22 04:55:16 -0500] atomic-penguin: Otherwise it just reads your knife config, I believe
[2014-01-22 04:55:38 -0500] brucelee: does it matter where i run that command?
[2014-01-22 04:55:39 -0500] brucelee: berks configure
[2014-01-22 04:55:54 -0500] atomic-penguin: I don't know? try it
[2014-01-22 04:56:32 -0500] brucelee: yeah when i run it from ~/chef-repo it just reads off knife.rb
[2014-01-22 04:56:46 -0500] brucelee: but when i run it from ~/.berkshelf
[2014-01-22 04:56:54 -0500] brucelee: its all default values
[2014-01-22 04:57:03 -0500] brucelee: for example, it will ask me "url of chef server"
[2014-01-22 04:57:18 -0500] brucelee: if i do it in ~/chef-repo/, it will just autopopulate the knife.rb chef server url
[2014-01-22 04:57:25 -0500] brucelee: and have me press "Yes" to continue
[2014-01-22 04:57:31 -0500] atomic-penguin: right, because you're using a shared knife.rb in your chef-repo
[2014-01-22 04:57:55 -0500] brucelee: atomic-penguin: so what does this mean as far as where i should run my berkshelf configure
[2014-01-22 05:00:36 -0500] atomic-penguin: brucelee, https://gist.github.com/atomic-penguin/8553705
[2014-01-22 05:01:46 -0500] atomic-penguin: If you're only using berkshelf within a chef-repo, you only need to be concerned about the ssl.verify problem
[2014-01-22 05:02:01 -0500] brucelee: ok let me check out that url
[2014-01-22 05:02:19 -0500] atomic-penguin: Otherwise, it won't hurt anything to configure berkshelf to use your primary/only chef server with berks configure.
[2014-01-22 05:02:21 -0500] brucelee: let me just put that in there
[2014-01-22 05:03:56 -0500] brucelee: the config.json in ~/chef-repo/.berkshelf is already populated
[2014-01-22 05:03:58 -0500] brucelee: i just changed true to false
[2014-01-22 05:04:02 -0500] brucelee: let me re-run it and see what happens
[2014-01-22 05:04:25 -0500] atomic-penguin: there ya go
[2014-01-22 05:05:07 -0500] brucelee: http://www.hastebin.com/mitivivoti.pl
[2014-01-22 05:05:22 -0500] brucelee: i still get that error in the en
[2014-01-22 05:05:25 -0500] brucelee: its so weird
[2014-01-22 05:05:31 -0500] brucelee: its almost un-googlable
[2014-01-22 05:05:58 -0500] brucelee: i feel at times chef is still a little premature compared to like puppet
[2014-01-22 05:06:02 -0500] brucelee: i have a friend at work who uses puppet
[2014-01-22 05:06:13 -0500] brucelee: we both started automating at the sam etime
[2014-01-22 05:06:17 -0500] brucelee: he uses puppet, and i picked chef
[2014-01-22 05:06:23 -0500] brucelee: but it seems puppet is so much easier to get started with
[2014-01-22 05:06:26 -0500] brucelee: maybe hes just a lot better than i am :p
[2014-01-22 05:06:51 -0500] atomic-penguin: I won't debate that, but most of us came from puppet-land
[2014-01-22 05:06:53 -0500] brucelee: i chose chef mainly for the "take full advantage of ruby"
[2014-01-22 05:07:06 -0500] brucelee: atomic-penguin: oh you have experience with puppet?
[2014-01-22 05:07:15 -0500] atomic-penguin: yes
[2014-01-22 05:07:25 -0500] brucelee: atomic-penguin: whats your personal experience
[2014-01-22 05:07:29 -0500] brucelee: personally, i have none
[2014-01-22 05:07:30 -0500] brucelee: with puppet
[2014-01-22 05:07:43 -0500] brucelee: so i cant really say except from how i feel, watching him use puppet
[2014-01-22 05:07:56 -0500] atomic-penguin: rather not get into it
[2014-01-22 05:08:18 -0500] atomic-penguin: brucelee, can you run `knife cookbook test my_cookbook`?
[2014-01-22 05:08:38 -0500] atomic-penguin: brucelee, it seems like a compile error
[2014-01-22 05:09:19 -0500] brucelee: atomic-penguin: ok let me try that
[2014-01-22 05:10:06 -0500] brucelee: http://www.hastebin.com/tedajecoho.erlang_repl
[2014-01-22 05:10:14 -0500] brucelee: i dont think any errors popped up
[2014-01-22 05:12:12 -0500] flaccid: brucelee: i don't blame you for having to take out chuck norris, he just couldn't stop fighting
[2014-01-22 05:12:32 -0500] brucelee: i didnt want to
[2014-01-22 05:12:53 -0500] brucelee: but im so well trained that my self defense is basically all reflex
[2014-01-22 05:13:32 -0500] flaccid: and i mean he was pretty dang hairy too
[2014-01-22 05:13:44 -0500] brucelee: :p
[2014-01-22 05:14:09 -0500] brucelee: its a disrespect to opponents to not completely shave before engaging in a fight like that
[2014-01-22 05:14:47 -0500] brucelee: so i had no choice but to teach him a lesson
[2014-01-22 05:14:54 -0500] flaccid: lol
[2014-01-22 05:15:34 -0500] brucelee: so heres the weird thing atomic-penguin
[2014-01-22 05:15:48 -0500] atomic-penguin: You seen that shitty Johnny Walker CGI Bruce Lee commercial?
[2014-01-22 05:15:49 -0500] brucelee: ~/chef-repo/.berkshelf has no cookbooks folder inside
[2014-01-22 05:16:00 -0500] brucelee: but it does have config.json
[2014-01-22 05:16:02 -0500] brucelee: however
[2014-01-22 05:16:18 -0500] brucelee: ~/.berkshelf has no config.json but it has a cookbooks dir inside
[2014-01-22 05:16:22 -0500] brucelee: with all the cookbooks that i uploaded
[2014-01-22 05:16:46 -0500] brucelee: so im thinking berkshelf is actually using ~/.berkshelf as the "home" folder or something
[2014-01-22 05:17:01 -0500] brucelee: i didnt see that Johnny walker cgi commercial though
[2014-01-22 05:17:07 -0500] atomic-penguin: If 'my_cookbook' is the primary cookbook you're working on, why isn't your Berksfile in that directory?
[2014-01-22 05:17:13 -0500] brucelee: have a link to that commercial?
[2014-01-22 05:17:28 -0500] brucelee: atomic-penguin: i have one in there
[2014-01-22 05:17:35 -0500] brucelee: im just trying to get vagrant berkshelf plugin to work
[2014-01-22 05:17:48 -0500] atomic-penguin: Its pretty shitty of them to use his dead likeness to advert something like alcohol, which he didn't partake
[2014-01-22 05:17:51 -0500] brucelee: so when i type "vagrant up", it takes advantage of berksehlf and uses it to upload all the dependency cookbooks
[2014-01-22 05:18:07 -0500] brucelee: :(
[2014-01-22 05:18:20 -0500] brucelee: i mean, bruce lee was not even affiliated in any way with johnny walker lol
[2014-01-22 05:18:37 -0500] brucelee: its like nike just randomly endorsing some athlete
[2014-01-22 05:18:42 -0500] brucelee: to sell their product
[2014-01-22 05:18:44 -0500] brucelee: well, not really
[2014-01-22 05:18:59 -0500] brucelee: but you get what im saying :p
[2014-01-22 05:19:26 -0500] atomic-penguin: Yeah, of course not.  Its really good CGI, just really shitty use of his image
[2014-01-22 05:19:44 -0500] brucelee: i cant really watch it with this shitty internet connection
[2014-01-22 05:19:48 -0500] brucelee: ill have to check it out
[2014-01-22 05:19:52 -0500] brucelee: im at a cafe
[2014-01-22 05:20:11 -0500] brucelee: (cant focus at home)
[2014-01-22 05:20:17 -0500] atomic-penguin: So whats in your Berksfile in that my_cookbook directory?
[2014-01-22 05:20:24 -0500] brucelee: all thats in there is site: opscode
[2014-01-22 05:20:25 -0500] brucelee: and
[2014-01-22 05:20:27 -0500] brucelee: "metadata"
[2014-01-22 05:20:54 -0500] brucelee: should i try to run vagrant up from inside that cookbook dir?
[2014-01-22 05:21:00 -0500] atomic-penguin: Yeah
[2014-01-22 05:21:13 -0500] brucelee: i dont have a Vagrantfile in there though
[2014-01-22 05:21:14 -0500] brucelee: let me try
[2014-01-22 05:21:27 -0500] atomic-penguin: Assuming all your dependencies are defined in the Berksfile/metadata of that directory
[2014-01-22 05:23:48 -0500] brucelee: atomic-penguin: still same thing: http://www.hastebin.com/vikehoduqu.vbs
[2014-01-22 05:23:53 -0500] brucelee: all my dependancies are defined
[2014-01-22 05:24:00 -0500] brucelee: seems theres a problem connecting
[2014-01-22 05:24:03 -0500] brucelee: but if i just use berks install
[2014-01-22 05:24:05 -0500] brucelee: and berks upload
[2014-01-22 05:24:06 -0500] brucelee: it works
[2014-01-22 05:24:33 -0500] atomic-penguin: good
[2014-01-22 05:25:36 -0500] atomic-penguin: wait
[2014-01-22 05:26:10 -0500] atomic-penguin: so the berks upload works
[2014-01-22 05:26:15 -0500] atomic-penguin: which didn't before?
[2014-01-22 05:26:19 -0500] brucelee: berks upload works
[2014-01-22 05:26:22 -0500] brucelee: berks install also works
[2014-01-22 05:26:27 -0500] brucelee: berkshelf by itself seems to work
[2014-01-22 05:26:28 -0500] atomic-penguin: but it didn't before?
[2014-01-22 05:27:26 -0500] atomic-penguin: did the berks upload work outside of your my_cookbook working directory?
[2014-01-22 05:27:29 -0500] brucelee: whats not working is the vagrant berkshelf plugin
[2014-01-22 05:27:54 -0500] atomic-penguin: thats not what I asked
[2014-01-22 05:28:02 -0500] brucelee: oh
[2014-01-22 05:28:08 -0500] brucelee: yes
[2014-01-22 05:28:11 -0500] brucelee: i usually run berks upload
[2014-01-22 05:28:12 -0500] atomic-penguin: did the berks upload work outside of your my_cookbook working directory?
[2014-01-22 05:28:17 -0500] brucelee: let me try now just to confirm
[2014-01-22 05:29:47 -0500] brucelee: http://www.hastebin.com/buyatugacu.vhdl
[2014-01-22 05:29:49 -0500] brucelee: yeah it works fine
[2014-01-22 05:29:56 -0500] brucelee: from ~/chef-repo/
[2014-01-22 05:30:14 -0500] brucelee: let me try it from ~/chef-repo/cookbooks/my_cookbook
[2014-01-22 05:30:43 -0500] brucelee: yep works fine also
[2014-01-22 05:31:56 -0500] atomic-penguin: where did the iptables cb come from, local repo?
[2014-01-22 05:32:37 -0500] atomic-penguin: looks like it matches the version on community
[2014-01-22 05:32:46 -0500] brucelee: so this recipe is bascailly a recipe where i depend on iptables cookbook from opscode
[2014-01-22 05:33:01 -0500] brucelee: and its just to enable HTTP and SSH iptables rules
[2014-01-22 05:33:16 -0500] atomic-penguin: So if you're in your my_cookbook directory, and you have a Vagrantfile in my_cookbook directory, can you converge that recipe?
[2014-01-22 05:33:43 -0500] brucelee: what do you mean by converge recipe?
[2014-01-22 05:33:58 -0500] atomic-penguin: have you seen test kitchen?
[2014-01-22 05:34:04 -0500] brucelee: havent
[2014-01-22 05:34:17 -0500] atomic-penguin: I mean, you can use it with Vagrant
[2014-01-22 05:34:41 -0500] atomic-penguin: gem install kitchen; cd my_cookbook; kitchen init; kitchen converge
[2014-01-22 05:35:27 -0500] atomic-penguin: kitchen init will create a yaml config
[2014-01-22 05:35:42 -0500] atomic-penguin: you'll probably want to edit that and delete any unwanted platforms
[2014-01-22 05:35:59 -0500] atomic-penguin: .kitchen.yml, to be specific
[2014-01-22 05:36:26 -0500] atomic-penguin: kitchen converge will run your my_cookbook::default, neato website here: http://kitchen.ci
[2014-01-22 05:36:35 -0500] brucelee: after doing gem install kitchen i cant do kitchen init
[2014-01-22 05:36:39 -0500] brucelee: do i need to put that file in my path or something
[2014-01-22 05:37:19 -0500] atomic-penguin: I have no idea how you've got your ruby setup, so I don't know
[2014-01-22 05:37:31 -0500] atomic-penguin: It should create a kitchen binary
[2014-01-22 05:37:34 -0500] brucelee: fucking environments :/
[2014-01-22 05:37:47 -0500] brucelee: im not sure how i have ruby installed either
[2014-01-22 05:37:53 -0500] brucelee: im pretty sure i just downloaded gems
[2014-01-22 05:38:19 -0500] atomic-penguin: fsck it, start a new shell, and do `which kitchen`
[2014-01-22 05:38:47 -0500] brucelee: nothing
[2014-01-22 05:38:59 -0500] brucelee: sudo which kitchen nothing as well
[2014-01-22 05:39:05 -0500] brucelee: let me do another sudo gem install kitchen
[2014-01-22 05:39:07 -0500] atomic-penguin: man I'm sorry, like I said its late
[2014-01-22 05:39:11 -0500] atomic-penguin: its test-kitchen
[2014-01-22 05:39:14 -0500] atomic-penguin: lol
[2014-01-22 05:39:29 -0500] brucelee: http://www.hastebin.com/nuwipiyore.rb
[2014-01-22 05:39:32 -0500] brucelee: HAHAH
[2014-01-22 05:39:35 -0500] brucelee: so wtf is kitchen?
[2014-01-22 05:39:35 -0500] brucelee: weird
[2014-01-22 05:39:38 -0500] slyness: anyone run into this before? cookbook written to download all cookbooks to cache using CookbookSynchronizer.. at runtime throwing this error: ERROR: constant Chef::CookbookSynchronizer::EAGER_SEGMENTS not defined
[2014-01-22 05:40:05 -0500] slyness: brucelee test-kitchen is a tool suite to help you test your cookbooks.
[2014-01-22 05:40:20 -0500] slyness: brucelee kitchen.ci
[2014-01-22 05:41:08 -0500] atomic-penguin: slyness, I told him to install the wrong gem.  apparently there is an unrelated kitchen gem.
[2014-01-22 05:41:27 -0500] brucelee: yeah
[2014-01-22 05:41:30 -0500] brucelee: i just uninstalled it
[2014-01-22 05:41:36 -0500] brucelee: installing test-kitchen now
[2014-01-22 05:43:15 -0500] brucelee: atomic-penguin: http://www.hastebin.com/tovigisune.vbs
[2014-01-22 05:43:20 -0500] brucelee: i think it worked
[2014-01-22 05:43:23 -0500] brucelee: im not sure if it will download the recipes though
[2014-01-22 05:43:28 -0500] brucelee: but its trying to download the box
[2014-01-22 05:43:30 -0500] brucelee: the vagrant box
[2014-01-22 05:43:35 -0500] brucelee: i already have that though
[2014-01-22 05:47:26 -0500] brucelee: i have a centos 6.5 min. iso
[2014-01-22 05:47:46 -0500] brucelee: but anyway i guess i can use this test-kitchen to do everything now
[2014-01-22 05:47:47 -0500] brucelee: :O
[2014-01-22 05:47:49 -0500] brucelee: seems pretty sick
[2014-01-22 05:48:03 -0500] brucelee: atomic-penguin: you mainly use this tool for cookbook testing?
[2014-01-22 05:48:17 -0500] atomic-penguin: hell yeah
[2014-01-22 05:48:39 -0500] brucelee: i was trying to use vagrant and berkshelf, but get vagrant to call berksehlf everytime i do a vagrant up
[2014-01-22 05:48:45 -0500] brucelee: so much time wasted
[2014-01-22 05:48:55 -0500] brucelee: i think it kind of does what test-kitchen does
[2014-01-22 05:49:13 -0500] brucelee: part of me still wants to get that work just because i spent so much time trying to get it to work
[2014-01-22 05:49:24 -0500] atomic-penguin: by default it wraps around Vagrant.  you can use other providers though
[2014-01-22 05:50:29 -0500] atomic-penguin: So, I've never done the bare Vagrant thing before to test cookbooks.  I've been using TK since early alpha
[2014-01-22 05:50:52 -0500] flaccid: i just mostly use travis ci online
[2014-01-22 05:50:59 -0500] atomic-penguin: I do that too
[2014-01-22 05:51:07 -0500] atomic-penguin: We did that before we had TK
[2014-01-22 05:52:02 -0500] flaccid: atm, just foodcritic and rubocop for me, i want to add more though
[2014-01-22 05:52:38 -0500] atomic-penguin: Been working on a Jenkins build pipeline for cookbooks, part for work, part for Master's thesis
[2014-01-22 05:53:17 -0500] atomic-penguin: There isn't just a cook-jenkins, that I know of that ties everything I want to do together
[2014-01-22 05:54:02 -0500] atomic-penguin: Its not like there are any Chef specific Jenkins plugins either
[2014-01-22 05:54:42 -0500] atomic-penguin: So there is a lot of discovery on how to tie everything together and get it working right now.  Though I've played around with it (jenkins) before, but not real seriously.
[2014-01-22 05:55:13 -0500] atomic-penguin: Not many people sharing their experience in that area, either
[2014-01-22 05:56:06 -0500] brucelee: i use teamcity
[2014-01-22 05:56:09 -0500] brucelee: well, my company at least
[2014-01-22 05:56:13 -0500] brucelee: i manage it :p
[2014-01-22 05:56:14 -0500] atomic-penguin: I'm doing rubocop/chefspec/foodcritic/test kitchen + bats right now
[2014-01-22 05:56:18 -0500] brucelee: though i have no experience with dev
[2014-01-22 05:56:22 -0500] brucelee: so all i do is create accounts, back it up
[2014-01-22 05:56:30 -0500] brucelee: administer it, etc
[2014-01-22 05:56:40 -0500] brucelee: so its kind of weird
[2014-01-22 05:56:54 -0500] brucelee: its like a black box to me
[2014-01-22 06:01:16 -0500] atomic-penguin: what is a blackbox?
[2014-01-22 06:01:24 -0500] atomic-penguin: your environment?
[2014-01-22 06:06:56 -0500] flaccid: atomic-penguin: https://en.wikipedia.org/wiki/Black_box
[2014-01-22 06:07:40 -0500] brucelee: atomic-penguin: that teamcity system
[2014-01-22 06:07:57 -0500] brucelee: its like  a black box to me, like i have no idea what kind of build scripts are ther
[2014-01-22 06:08:00 -0500] brucelee: how to create build scripts for it
[2014-01-22 06:08:06 -0500] brucelee: all i do is maintain it
[2014-01-22 06:08:12 -0500] brucelee: i dont really have a purpose for it
[2014-01-22 06:08:14 -0500] brucelee: because i dont dev
[2014-01-22 06:08:32 -0500] flaccid: why op when you can dev and op hehe
[2014-01-22 06:09:42 -0500] brucelee: :p
[2014-01-22 06:09:50 -0500] brucelee: ops takes away so much time from me
[2014-01-22 06:09:54 -0500] brucelee: i wish i could have more time to dev
[2014-01-22 06:10:04 -0500] brucelee: even now, im trying to set up chef so i can automate away some of my ops workload :(
[2014-01-22 06:10:09 -0500] brucelee: so i can become more dev :p
[2014-01-22 06:10:39 -0500] brucelee: with test-kitchen, the example on the site creates a new git repo for its one and only cookbook example
[2014-01-22 06:10:42 -0500] brucelee: im planning to do the same
[2014-01-22 06:10:48 -0500] brucelee: but can i create a git repo within a git repo
[2014-01-22 06:10:54 -0500] brucelee: i think my entire chef-repo is a git repo
[2014-01-22 06:11:08 -0500] brucelee: can i create a a git repo within chef-repo/cookbooks/test_cookbook
[2014-01-22 06:11:16 -0500] flaccid: git submodules?
[2014-01-22 06:11:24 -0500] brucelee: not sure :p
[2014-01-22 06:11:35 -0500] flaccid: thats probably what you wanna do
[2014-01-22 06:11:36 -0500] brucelee: i just want to create a git repo, but its root folder is also a git repo
[2014-01-22 06:11:55 -0500] brucelee: actually fuck it, ill just do it the simple way
[2014-01-22 06:11:57 -0500] flaccid: ^^ ah that doesn't quite make snese
[2014-01-22 06:12:21 -0500] brucelee: ~/chef-repo is a git repo
[2014-01-22 06:12:35 -0500] brucelee: but i want to make a new folder inside ~/chef-repo/cookbooks called testcookbook
[2014-01-22 06:12:45 -0500] brucelee: and initialize testcookbook as a new repo
[2014-01-22 06:13:17 -0500] flaccid: sounds like a git submodule to me
[2014-01-22 06:13:27 -0500] brucelee: thanks :p
[2014-01-22 06:13:52 -0500] flaccid: np
[2014-01-22 06:20:36 -0500] atomic-penguin: flaccid, I know what a black box is, kthx
[2014-01-22 06:34:46 -0500] brucelee: WOW
[2014-01-22 06:34:54 -0500] brucelee: this test-kitchen is awesome
[2014-01-22 06:35:01 -0500] brucelee: im just reading the site, and it just streams line the entire workflow so nicely
[2014-01-22 06:35:09 -0500] brucelee: atomic-penguin: do you use chef-solo mostly?
[2014-01-22 06:43:16 -0500] brucelee: atomic-penguin: this is SO POWERFUL
[2014-01-22 06:43:23 -0500] brucelee: atomic-penguin: thanks!! :)
[2014-01-22 06:43:47 -0500] brucelee: i cant believe is pent like a week trying to fix this stupid vagrant / berkshelf peice of shit!
[2014-01-22 06:43:55 -0500] brucelee: when theres a program here that just does all of it
[2014-01-22 06:59:18 -0500] flaccid: brucelee: did you fix it for everyone?
[2014-01-22 07:19:47 -0500] brucelee: flaccid: fix it?
[2014-01-22 07:20:06 -0500] brucelee: flaccid: i didnt fix my original issue but atomic-penguin suggested test-kitchen
[2014-01-22 07:20:21 -0500] brucelee: and i basically have no problems anymore
[2014-01-22 07:20:24 -0500] brucelee: since i can just use this
[2014-01-22 07:20:42 -0500] brucelee: i guess i was always able to test my cookbooks
[2014-01-22 07:20:51 -0500] brucelee: in this way
[2014-01-22 07:21:03 -0500] brucelee: but i wanted it to be incorporated with chef-server
[2014-01-22 07:21:05 -0500] brucelee: not just all local
[2014-01-22 07:21:14 -0500] brucelee: this way is still just local
[2014-01-22 07:23:14 -0500] flaccid: brucelee: oh maybe i didn't read the msgs properly. i havnt used tc yet but when i do it will be with travis online
[2014-01-22 07:29:38 -0500] Jaykatta: Hi, how to bootstrap using knife on multiple nodes parallel?
[2014-01-22 07:31:36 -0500] Jaykatta: how to bootstrap using knife on multiple nodes parallel?
[2014-01-22 07:33:47 -0500] flaccid: Jaykatta: didn't you just ask that?
[2014-01-22 07:35:57 -0500] Jaykatta: flaccid , can you giude me here?
[2014-01-22 07:42:27 -0500] brucelee: flaccid:back
[2014-01-22 07:42:31 -0500] brucelee: flaccid: travis online?
[2014-01-22 07:42:41 -0500] brucelee: i love all these tools :)
[2014-01-22 07:42:47 -0500] brucelee: so many tools to make life easier
[2014-01-22 07:43:07 -0500] brucelee: what is travis online?
[2014-01-22 07:43:42 -0500] Jaykatta: flaccid: can you help me?
[2014-01-22 07:44:26 -0500] brucelee: cant you just run the knife command multiple times
[2014-01-22 07:44:42 -0500] brucelee: or are you looking for a 'cleaner' out of the box solution
[2014-01-22 07:44:52 -0500] brucelee: or simply "to get it to work"
[2014-01-22 07:51:49 -0500] Jaykatta: brucelee: in my use case, I will be having hundreds of nodes.. so instead of running knife mutliple times, I wanna run parallelly on all nodes
[2014-01-22 07:52:43 -0500] st_iron: hi
[2014-01-22 07:53:59 -0500] flaccid: brucelee: http://travis-ci.org
[2014-01-22 07:54:27 -0500] flaccid: Jaykatta: if knife cant' do it, maybe use foreman too
[2014-01-22 07:54:39 -0500] flaccid: sorry, i don't use knife that much for ops stuff
[2014-01-22 09:19:02 -0500] ribo: Hasty conclusion easy to make, like hole in water. - Charlie Chan
[2014-01-22 09:32:19 -0500] flaccid: ribo: if you are not a bot, please leave
[2014-01-22 10:26:30 -0500] drrk: Morning
[2014-01-22 11:36:48 -0500] lewiz: Good morning!  Does anybody know how I can get the name of the current environment and use it in a template file?  I had hoped node['environment'] or node['chef_environment'] might be what I wanted, but it is not.
[2014-01-22 11:41:26 -0500] workmad3: lewiz: node.chef_environment
[2014-01-22 11:42:49 -0500] lewiz: workmad3: So I should be able to do: <%= node['chef_environment'] %> in my template, right?
[2014-01-22 11:43:03 -0500] workmad3: lewiz: no, node.chef_environment
[2014-01-22 11:48:36 -0500] lewiz: workmad3: ah... okay :)
[2014-01-22 11:49:55 -0500] lewiz: workmad3: Perfect - thanks :)
[2014-01-22 11:50:54 -0500] lewiz: workmad3: If I understand correctly that makes node.chef_environment a function while node['fqdn'] is an attribute.  Is that correct?
[2014-01-22 12:27:46 -0500] CaptainQuirk: Hi !
[2014-01-22 12:42:50 -0500] CaptainQuirk: workmad3, are you there
[2014-01-22 12:43:05 -0500] workmad3: no? :)
[2014-01-22 12:43:38 -0500] CaptainQuirk: my vision must be quirky
[2014-01-22 12:43:45 -0500] CaptainQuirk: I see you there but you're not
[2014-01-22 12:43:59 -0500] CaptainQuirk: my sight I meant
[2014-01-22 12:44:29 -0500] CaptainQuirk: Looking at the pattern you advised me for a xinitrc.d directory where I could store configuration files
[2014-01-22 12:44:33 -0500] CaptainQuirk: global file
[2014-01-22 12:44:55 -0500] CaptainQuirk: with the possibility of overwriting them through a user local directory
[2014-01-22 12:46:13 -0500] CaptainQuirk: In this case, both directories don't exist
[2014-01-22 12:46:19 -0500] CaptainQuirk: How would you create them
[2014-01-22 12:46:36 -0500] CaptainQuirk: with remote_dir or something like that ?
[2014-01-22 13:04:42 -0500] workmad3: CaptainQuirk: just a 'directory("/whatever")' resource (with recursive true if necessary)
[2014-01-22 13:43:48 -0500] CPS_: is there a way to check if a registry key exists using chef on windows?
[2014-01-22 13:58:25 -0500] glen: what does "knife ssh" use to connect to host? it seems to use fqdn not primary ip?
[2014-01-22 14:16:26 -0500] mveitas: does anyone know if there is a way to print out the list of resources that are processed in ChefSpec?
[2014-01-22 14:38:01 -0500] mveitas: Took a look a the code and it was chef_run.resource_collection.all_resources
[2014-01-22 15:12:41 -0500] shlant: anybody know if it's possible to create templates for all confs in a folder without explicitly naming them? like if I have templates/default/confs/ cant I use ruby to create templates using the filenames in conf?
[2014-01-22 15:13:30 -0500] shlant: usually I would have %w{foo bar}.each do but I don't want ot have to hardcode the names
[2014-01-22 15:13:43 -0500] shlant: for reusability
[2014-01-22 15:33:40 -0500] denniswisnia: hey, had the error "ERROR: TypeError: can't convert nil into String" after a "knife cookbook create <name>" and already tried to reinstall chef. Using Mac OS X Mavericks and had no idea how to fix it :(
[2014-01-22 15:33:53 -0500] denniswisnia: knife upload and other commands works fine, only "create" doesnt work.
[2014-01-22 15:42:12 -0500] shlant: denniswisnia: have you tried creating it with most of these flags set? http://docs.opscode.com/knife_cookbook.html#id2
[2014-01-22 15:42:25 -0500] shlant: might be wanting input you're not providing
[2014-01-22 15:42:50 -0500] shlant: try is with email, license and copyright set
[2014-01-22 15:56:06 -0500] jaykatta: how to run recipes on multiple nodes using single knife command from workstation?
[2014-01-22 15:57:21 -0500] shlant: jaykatta: as in do a chef run or change the run_list and then do a chef run
[2014-01-22 15:57:46 -0500] shlant: jaykatta: or run a recipe once?
[2014-01-22 15:58:22 -0500] jaykatta: shlant: how can I run across all nodes parallely?
[2014-01-22 15:58:35 -0500] shlant: is the recipe already in the run list?
[2014-01-22 15:58:38 -0500] shlant: on the nodes?
[2014-01-22 15:59:26 -0500] jaykatta: shlant: recipes are not in run list, recipes were uploaded to server
[2014-01-22 15:59:59 -0500] shlant: jaykatta: and do you want to run the recipe once and then remove? or does it matter
[2014-01-22 16:00:35 -0500] jaykatta: shlant: in case of run list how to update run list across all nodes at a time and run chef-client on all nodes at a time?
[2014-01-22 16:01:01 -0500] shlant: so all nodes on the chef-server?
[2014-01-22 16:01:17 -0500] jaykatta: shlant: yes
[2014-01-22 16:01:20 -0500] shlant: ok
[2014-01-22 16:01:21 -0500] shlant: one sec
[2014-01-22 16:03:08 -0500] shlant: knife exec -E 'nodes.transform("*") {|n| puts n.run_list << "recipe[foo]"; n.save }'
[2014-01-22 16:03:19 -0500] shlant: tryt hat first without ; n.save
[2014-01-22 16:03:25 -0500] shlant: make sure it gets the nodes you want
[2014-01-22 16:03:33 -0500] shlant: then after it has been added to run list
[2014-01-22 16:03:55 -0500] shlant: knife ssh 'name:*' 'sudo chef-client'
[2014-01-22 16:04:01 -0500] wachpwnski: is %Q{} a ruby thing, a chef thing, or a shell thing?
[2014-01-22 16:04:11 -0500] sthulb: ruby
[2014-01-22 16:04:15 -0500] sthulb: %q{}
[2014-01-22 16:04:27 -0500] garnertb: Hi all- Recently, I've been getting an error during my chef runs: Ohai::Exceptions::DependencyNotFound, Can not find a plugin for dependency nginx.  I'm using the community nginx cookbook v 2.0.8 and ohai 1.1.12.  The error is coming from https://github.com/opscode-cookbooks/nginx/blob/master/recipes/ohai_plugin.rb#L22.  Can anyone suggest where to start to hunt down this issue?
[2014-01-22 16:04:56 -0500] shlant: jaykatta: check out http://docs.opscode.com/knife_ssh.html#options for ssh options you may need
[2014-01-22 16:05:28 -0500] jaykatta: shlant: Thanks, let me try as per above...
[2014-01-22 16:06:15 -0500] shlant: jaykatta: so it would be
[2014-01-22 16:06:22 -0500] shlant: knife exec -E 'nodes.transform("*") {|n| puts n.run_list << "recipe[foo]"}'
[2014-01-22 16:06:26 -0500] shlant: make sure it gets all nodes
[2014-01-22 16:06:32 -0500] shlant: then knife exec -E 'nodes.transform("*") {|n| puts n.run_list << "recipe[foo]"; n.save }'
[2014-01-22 16:06:37 -0500] shlant: then knife ssh 'name:*' 'sudo chef-client'
[2014-01-22 16:08:03 -0500] jaykatta: shlant: knife exec -E 'nodes.transform("*") {|n| puts n.run_list << "recipe[validate_node]"}' ERROR: The data in your request was invalid Response: invalid index name or query
[2014-01-22 16:08:14 -0500] jaykatta: shlant: getting above error
[2014-01-22 16:08:14 -0500] shlant: ah
[2014-01-22 16:08:53 -0500] shlant: jaykatta: knife exec -E 'nodes.all {|n| puts n.run_list << "recipe[validate_node]"}'
[2014-01-22 16:10:14 -0500] shlant: jaykatta: you can remove that recipe after it you need with
[2014-01-22 16:10:28 -0500] shlant: knife exec -E 'nodes.all {|n| puts n.run_list.remove << "recipe[validate_node]"}'
[2014-01-22 16:10:43 -0500] jaykatta: shlant: okay
[2014-01-22 16:11:15 -0500] shlant: don;t forget the ; n.save if you want it to take effect
[2014-01-22 16:12:40 -0500] jaykatta: shlant: okay
[2014-01-22 16:12:49 -0500] jaykatta: shlant: $ knife ssh 'name:*' 'sudo chef-client' WARNING: Failed to connect to  -- SocketError: getaddrinfo: Name or service not known WARNING: Failed to connect to  -- SocketError: getaddrinfo: Name or service not known WARNING: Failed to connect to  -- SocketError: getaddrinfo: Name or service not known
[2014-01-22 16:14:43 -0500] denniswisnia: https://gist.github.com/anonymous/f4848b6224be69b6a414 - any ideas what going wrong?
[2014-01-22 16:16:05 -0500] gleam: you have cookbook_path set in knife.rb, yes?
[2014-01-22 16:16:11 -0500] denniswisnia: nope
[2014-01-22 16:16:20 -0500] denniswisnia: any example?
[2014-01-22 16:17:36 -0500] gleam: http://docs.opscode.com/config_rb_knife.html
[2014-01-22 16:17:53 -0500] jaykatta: shlant: $ knife ssh 'name:*' 'sudo chef-client' WARNING: Failed to connect to  -- SocketError: getaddrinfo: Name or service not known WARNING: Failed to connect to  -- SocketError: getaddrinfo: Name or service not known WARNING: Failed to connect to  -- SocketError: getaddrinfo: Name or service not known
[2014-01-22 16:18:48 -0500] mveitas: Is there a way to exclude a recipe from being included from another cookbook at runtime? The logstash cookbook has a include_recipe 'java::default' that I don't want to use
[2014-01-22 16:18:53 -0500] shlant: jaykatta: do you have ssh passwords/keys?
[2014-01-22 16:19:19 -0500] shlant: also, maybe try with -a ipaddress --no-host-key-verify
[2014-01-22 16:19:24 -0500] denniswisnia: gleam: damn, i love you - lot of thanks
[2014-01-22 16:20:01 -0500] shlant: jaykatta: ipaddress stays as ipaddress
[2014-01-22 16:20:33 -0500] shlant: it tell it to connect using ipaddress instead of fqdn in case it's not set up properly
[2014-01-22 16:21:01 -0500] jaykatta: shlant: knife ssh 'name:*' 'sudo chef-client' -a ipaddress --no-host-key-verify WARNING: Failed to connect to  -- Net::SSH::AuthenticationFailed: user1@192.168.122.31 WARNING: Failed to connect to  -- Net::SSH::AuthenticationFailed: user1@192.168.122.93 WARNING: Failed to connect to  -- Net::SSH::AuthenticationFailed: user1@192.168.122.99 WARNING: Failed to connect to  -- Errno::EHOSTUNREACH: No route to host - connect(2)
[2014-01-22 16:22:05 -0500] shlant: jaykatta: do you have an ssh password? if so, it can included with the -P flag
[2014-01-22 16:22:19 -0500] remil: Errno::EHOSTUNREACH: No route to host ?
[2014-01-22 16:22:29 -0500] shlant: figure out how to ssh into the node normally and then apply is to knife ssh
[2014-01-22 16:22:54 -0500] remil: using netcat or telnet do you see a ssh banner on 192.168.122.31 port 22 ?
[2014-01-22 16:23:08 -0500] shlant: remil: that might just be a dead node
[2014-01-22 16:23:15 -0500] shlant: it connects to the other 3
[2014-01-22 16:23:16 -0500] jaykatta: shlant: it works now
[2014-01-22 16:23:19 -0500] shlant: awesome
[2014-01-22 16:23:28 -0500] shlant: prepare for a flurry of output
[2014-01-22 16:23:44 -0500] remil: shlant: thanks
[2014-01-22 16:24:03 -0500] shlant: remil: that took me a bit to realize. glad to help :)
[2014-01-22 16:25:12 -0500] jaykatta: shlant: if I set password less ssh from workstation to all nodes, I do not need to pass -P password right?
[2014-01-22 16:26:26 -0500] shlant: jaykatta: I think you would need to set the -i
[2014-01-22 16:26:33 -0500] shlant: and point to identity file
[2014-01-22 16:27:02 -0500] jaykatta: shlant: pointing to which file?
[2014-01-22 16:27:31 -0500] shlant: ssh private
[2014-01-22 16:27:37 -0500] jaykatta: shlant: pointint to to ssh-key file right?
[2014-01-22 16:27:42 -0500] shlant: yea
[2014-01-22 16:27:47 -0500] shlant: ~/.ssh/id_rsa
[2014-01-22 16:27:47 -0500] jaykatta: shlant: thanks a lot
[2014-01-22 16:28:08 -0500] shlant: this would require you get your public key on each server
[2014-01-22 16:34:40 -0500] jaykatta: shlant: knife exec -E 'nodes.all {|n| puts n.run_list.remove << "recipe[validate_node]"}' ERROR: ArgumentError: wrong number of arguments (0 for 1)
[2014-01-22 16:35:18 -0500] wachpwnski: can anyone tell me why it's giving me this while trying to provision a vm with vagrant + chef http://pastebin.com/5w0vsGfR  I am running ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
[2014-01-22 16:36:12 -0500] jpoole: what does the repository.rb look like.
[2014-01-22 16:36:20 -0500] jpoole: does it have some sort of rubygem include at the top/
[2014-01-22 16:37:03 -0500] mveitas: is there a way to remove a recipe from the run_list before the run list is executed?
[2014-01-22 16:38:07 -0500] jaykatta: shlant: knife exec -E 'nodes.all {|n| puts n.run_list.remove << "recipe[validate_node]"}' ERROR: ArgumentError: wrong number of arguments (0 for 1)
[2014-01-22 16:38:22 -0500] shlant: jaykatta: knife exec -E 'nodes.all {|n| puts n.run_list.remove("recipe[validate_node]")}'
[2014-01-22 16:38:33 -0500] wachpwnski: jpoole: it's not even a file
[2014-01-22 16:38:52 -0500] jpoole: wachpwnski /tmp/vagrant-chef-1/chef-solo-1/cookbooks/yum/providers/repository.rb doesn't exist?
[2014-01-22 16:39:26 -0500] shlant: mveitas: do you want to do this in a recipe, or do you just want to remove a recipe from a nodes run list for good?
[2014-01-22 16:39:39 -0500] mveitas: from a recipe
[2014-01-22 16:39:40 -0500] wachpwnski: jpoole: ls: cannot access /tmp/vagrant-chef-1/chef-solo-1/cookbooks/yum/providers/repository.rb: No such file or directory
[2014-01-22 16:39:56 -0500] wachpwnski: has to be something vagrant is creating...
[2014-01-22 16:40:18 -0500] jpoole: does that file exist within the vagrant vm?
[2014-01-22 16:41:39 -0500] shlant: mveitas: try something like this. it would have to be either in it's own recipe at the top of the run list, or at the start of the first recipe in the run list
[2014-01-22 16:41:40 -0500] shlant: ruby_block "Remove recipe" do
[2014-01-22 16:41:40 -0500] shlant:   block { node.run_list.remove("recipe[snapshot]") }
[2014-01-22 16:41:40 -0500] shlant: end
[2014-01-22 16:41:59 -0500] mveitas: shlant: thanks... I will try that
[2014-01-22 16:43:45 -0500] shlant: mveitas: even easier:
[2014-01-22 16:43:56 -0500] shlant: e = ruby_block "Remove recipe" do
[2014-01-22 16:43:57 -0500] shlant:  block { node.run_list.remove("recipe[snapshot]") }
[2014-01-22 16:43:57 -0500] shlant: end
[2014-01-22 16:43:59 -0500] shlant: oops
[2014-01-22 16:44:14 -0500] shlant: e = ruby_block "Remove recipe" do
[2014-01-22 16:44:15 -0500] shlant:  block { node.run_list.remove("recipe[snapshot]") }
[2014-01-22 16:44:15 -0500] shlant: end
[2014-01-22 16:44:19 -0500] shlant: e.run_action(:run)
[2014-01-22 16:44:24 -0500] jaykatta: shlant: in one of the recipe, I wanna reboot the node, how to handle that case?
[2014-01-22 16:44:25 -0500] shlant: that should run at compile time
[2014-01-22 16:44:49 -0500] jpoole: jakatta after each recipe run? or just the first time
[2014-01-22 16:45:18 -0500] shlant: jaykatta: http://community.opscode.com/cookbooks/reboot-handler
[2014-01-22 16:45:45 -0500] jaykatta: jpoole: inbetween my configuration needs reboot of the node and once the node is up, recipe should continue the further configuration
[2014-01-22 16:46:05 -0500] jaykatta: shlant: will read about reboot-handler
[2014-01-22 16:46:16 -0500] shlant: jaykatta: actually I don't think that's waht you're looking for
[2014-01-22 16:46:20 -0500] shlant: 1 sec
[2014-01-22 16:47:05 -0500] shlant: jaykatta: so you need a reboot in the middle of a chef run and then continuation of the run after it's booted?
[2014-01-22 16:47:25 -0500] jaykatta: shlant: yes
[2014-01-22 16:47:36 -0500] shlant: jaykatta: hmmm
[2014-01-22 16:47:41 -0500] shlant: not sure if that's doable
[2014-01-22 16:47:58 -0500] jaykatta: shlant: any workaround?
[2014-01-22 16:48:17 -0500] shlant: yes
[2014-01-22 16:48:20 -0500] shlant: http://stackoverflow.com/questions/15377873/how-can-i-get-chef-to-reboot-the-node-and-pick-up-the-recipe-from-where-it-left
[2014-01-22 16:48:41 -0500] shlant: some sort of check for whatever the reboot configured
[2014-01-22 16:49:07 -0500] jaykatta: shlant: let me read the above url
[2014-01-22 16:50:15 -0500] banditron: do code review sessions show up here as they start or when they are over? http://www.youtube.com/opscodebtm
[2014-01-22 16:52:48 -0500] gyre007: will action :remove on user delete the users home directory ?
[2014-01-22 16:56:53 -0500] shlant: gyre007: http://ssahinkoc.blogspot.ca/2013/10/remove-user-and-its-home-directory-with.html
[2014-01-22 16:57:19 -0500] shlant: in answer to your question, no i don't think so
[2014-01-22 17:06:27 -0500] shlant: any knowlegable ruby peeps?
[2014-01-22 17:06:44 -0500] shlant: I'm trying to create templates using each file in a template directory
[2014-01-22 17:07:01 -0500] shlant: https://gist.github.com/MrMMorris/377c909bcf8caf1d6047
[2014-01-22 17:13:18 -0500] freerobby: Hi, question. If we clone a chef-client to create a new box, is there an easy way to blow away all chef data on the new box so we can bootstrap it?
[2014-01-22 17:14:14 -0500] qurve: Has anyone ever used chef to manage the lifecycle of a rails app that uses foreman for managing environment variables and exporting the service scripts? I'm looking for a push towards "Yeah, here's a great way to make them play nice" or "Ditch foreman, it's going to be painful"
[2014-01-22 17:15:15 -0500] qurve: Basically, chef has a service resource, but with Foreman, it handles the exporting of service configuration in multiple output formats, so I'm in this odd position where I want to use chef to manage starting/stopping/etc a service that already exists because it was dumped by foreman earlier in the process.
[2014-01-22 17:16:06 -0500] qurve: I guess the root of my question is: Can you use chef's 'service' resource simply for the start/stop/restart management and notifications without having it be responsible for CREATING the service configuration?
[2014-01-22 17:28:20 -0500] aspiers: qurve: yes you can
[2014-01-22 17:28:35 -0500] aspiers: and that's not an odd position
[2014-01-22 17:28:37 -0500] aspiers: I'm doing that too
[2014-01-22 17:28:46 -0500] aspiers: service configurations are provided by rpms
[2014-01-22 17:28:53 -0500] qurve: So as long as I declare a service resource and configure it with the proper available actions and commands to do them, chef will just assume they work.
[2014-01-22 17:29:14 -0500] qurve: I'm working up a POC now, I just wanted to make sure I wasn't doing something very anti-patterny first.
[2014-01-22 17:29:30 -0500] aspiers: it works for me
[2014-01-22 17:29:52 -0500] aspiers: installing sysvinit scripts or systemd .service files via Chef is ugly IMHO
[2014-01-22 17:29:57 -0500] aspiers: much better to use packages
[2014-01-22 17:30:30 -0500] aspiers: Chef is for configuration management, not to usurp the native package manager
[2014-01-22 17:30:57 -0500] jpoole: freerobby yes if someone hasn't answered your question, you can blow it all away, the node will re-register when/if you run chef again
[2014-01-22 17:31:34 -0500] aspiers: qurve: you can see how chef handles services here: https://github.com/opscode/chef/tree/master/lib/chef/provider/service
[2014-01-22 17:31:38 -0500] aspiers: qurve: the code is pretty simple
[2014-01-22 17:31:45 -0500] qurve: Thanks a bunch.
[2014-01-22 17:31:51 -0500] mveitas: shlant: That did not seem to remove the recipe from the run_list. I have a wrapper cookbook that calls another cookbook that then calls include_recipe java::default
[2014-01-22 17:32:08 -0500] qurve: I'm going to work on making this work, then making it work cleaner, there's a bit of indirection going back and forth in my code/cookbooks.
[2014-01-22 17:32:15 -0500] qurve: Definitely a smell.
[2014-01-22 17:35:30 -0500] qurve: Sidebar, and I apologize if this is a bit too off topic, but: If you are using foreman to export a rails app config as a service, does anyone recommend a particular service type? I've been exporting as upstart just because I use Ubuntu, but I have no idea if it is good or bad.
[2014-01-22 17:35:37 -0500] qurve: (I've yet to put anything into production for this app)
[2014-01-22 17:36:32 -0500] qurve: Foreman can export the Procfile as bluepill, inittab, runit, or upstart, I have no opinions on any of them, I figured someone here probably does :)
[2014-01-22 17:42:18 -0500] shlant: mveitas: and you're trying to remove java:default?
[2014-01-22 17:42:28 -0500] mveitas: yes
[2014-01-22 17:43:04 -0500] mveitas: I am running on ec2 and already have java installed on the AMI image I am using, and the logstash cookbook includes that
[2014-01-22 17:43:18 -0500] shlant: you would have to put
[2014-01-22 17:43:18 -0500] shlant: ruby_block "Remove recipe" do
[2014-01-22 17:43:18 -0500] shlant:  block { node.run_list.remove("recipe[snapshot]") }
[2014-01-22 17:43:19 -0500] shlant: end
[2014-01-22 17:43:24 -0500] shlant: ruby_block "Remove recipe" do
[2014-01-22 17:43:25 -0500] shlant:  block { node.run_list.remove("recipe[java]") }
[2014-01-22 17:43:25 -0500] shlant: end
[2014-01-22 17:43:31 -0500] shlant: after the include_recipe
[2014-01-22 17:43:44 -0500] shlant: because the way I showed you tries to remove it before it's added
[2014-01-22 17:43:47 -0500] shlant: I think
[2014-01-22 17:43:56 -0500] shlant: hmmm
[2014-01-22 17:43:59 -0500] shlant: must be a better way
[2014-01-22 17:44:08 -0500] mveitas: I had it like that originally, but then put it after and it didn't seem to work either
[2014-01-22 17:44:37 -0500] shlant: yea i'm not sure if include_recipe actually adds it to the run list
[2014-01-22 17:45:15 -0500] mveitas: I might go digging into some source to find out what it does!
[2014-01-22 17:47:50 -0500] shlant: mveitas: you need to find out why the cookbook is calling include_recipe 'java'
[2014-01-22 17:48:59 -0500] mveitas: shlant: The java cookbook needs a bit of love... it just got a makeover, but still needs more!
[2014-01-22 17:49:29 -0500] mveitas: the logstash agent needs java
[2014-01-22 17:50:23 -0500] shlant: and your using logstash? do you already have java? is that why you wan to remove it?
[2014-01-22 17:58:41 -0500] nate`: Alright since I can't find any logs to trouble shoot this issue fresh RHEL 6.4 AMI, installced chef by grabbing the chef-server-11.0.8-1.el6.x86_64.rpm package. ran chef-server-ctl reconfigure
[2014-01-22 17:58:50 -0500] nate`: I see in tshark that packets on ports 80 and 443 are coming in.
[2014-01-22 17:58:56 -0500] nate`: I get nothing in my nginx log though
[2014-01-22 17:59:27 -0500] nate`: never mind, stupid RHEL's default iptables again.
[2014-01-22 17:59:32 -0500] nate`: I should modify that in my userdata
[2014-01-22 18:04:20 -0500] glen: hey. knife ssh -a seems documented but really does not work?
[2014-01-22 18:06:01 -0500] glen: http://sprunge.us/BGCE it's supposed to sauy no such attribute or whatever, but it's still using fqdn: http://sprunge.us/BGCE
[2014-01-22 18:07:13 -0500] glen: i don't see -a or --attribute here: https://github.com/opscode/chef/blob/master/lib/chef/application/knife.rb
[2014-01-22 18:10:38 -0500] glen: https://github.com/opscode/chef-docs/blob/master/includes_knife/includes_knife_ssh_options.rst
[2014-01-22 18:15:43 -0500] glen: oh. seems for -m the -a has no effect
[2014-01-22 18:24:42 -0500] Lefty: Hi chefs
[2014-01-22 18:29:49 -0500] qurve: I've never had to use notifications before, just did, so cool.
[2014-01-22 18:30:18 -0500] qurve: Is there a way to specify the order resources run explicitly rather than implicitly by where they are in the file?
[2014-01-22 18:30:36 -0500] qurve: Eg, A is declared before B, but configures itself to only run after B
[2014-01-22 18:30:46 -0500] Lefty: yeah, there's a before attribute
[2014-01-22 18:31:23 -0500] gleam: set A's default action to nothing and have A subscribe to B, or have B notify A
[2014-01-22 18:31:44 -0500] qurve: OK, so you simply use notifications to accomplish it, that works for me.
[2014-01-22 18:31:47 -0500] cyrus_mc: Trying to do an initial setup of a chef server and client. I believe I have the server setup. On the client when I try to upload a cookbook I get the following: http://pastebin.com/pyuytkdy
[2014-01-22 18:31:55 -0500] qurve: Just wanted to see if there was a more focused way I should be doing that.
[2014-01-22 18:32:16 -0500] gleam: look at "execute a command using a template" here: http://docs.opscode.com/chef/resources.html#notifications
[2014-01-22 18:32:25 -0500] qurve: Can a resource be dependent on two other resources?
[2014-01-22 18:32:27 -0500] gleam: or "Notify when a remote source changes"
[2014-01-22 18:32:51 -0500] qurve: Basically, I have an execute resource that can't execute until two other template resources and a different execute resource have completed.
[2014-01-22 18:32:55 -0500] gleam: i don't know about that, i think your best bet is to use not_if/only_if there
[2014-01-22 18:33:08 -0500] gleam: and have it subscribe to both or have both notify
[2014-01-22 18:33:09 -0500] cyrus_mc: Of particular note is that it appears to be trying to upload to localhost when the chef server is a different server (and specified in knife.rb and even tried with -S on the )
[2014-01-22 18:33:17 -0500] qurve: I can obviously document WHY things have to happen in that order, but an explicit relation could be handy.
[2014-01-22 18:33:29 -0500] qurve: (There's also a good chance I will refactor away this mess in the near future)
[2014-01-22 18:33:48 -0500] Lefty: cyrus_mc: you need to specify the api endpoint in chef-server.rb I think
[2014-01-22 18:34:06 -0500] Lefty: since the chef server will tell the clients what api endpoint to talk to, and if it thinks that's localhost, that's what the clients will get
[2014-01-22 18:34:29 -0500] CPS_: can i have nested resources? a log block inside an execute block?
[2014-01-22 18:35:11 -0500] cyrus_mc: Lefty: ok. let me look at that
[2014-01-22 18:35:40 -0500] qurve: Last dumb question, can resources in one recipe send notifications to resources in a different recipe?
[2014-01-22 18:35:58 -0500] qurve: Same cookbook, different recipes.
[2014-01-22 18:36:02 -0500] Lefty: I put this in /etc/chef-server/chef-server.rb - api_fqdn "chef.blah.mydomain.com"
[2014-01-22 18:36:21 -0500] qurve: And again, I may be thinking about this wrong, but I find you have to do it wrong before you can understand how to do it right :)
[2014-01-22 18:36:29 -0500] Lefty: since my chef installs are behind a load balancer
[2014-01-22 18:36:49 -0500] Lefty: looks like I set bookshelf['vip'] to the same value
[2014-01-22 18:37:13 -0500] Lefty: but that may not specifically be necessary for a single chef server
[2014-01-22 18:37:37 -0500] Lefty: cyrus_mc: also make sure you run chef-server-ctl reconfigure
[2014-01-22 18:38:54 -0500] qurve: Yet another dumb question: If a template resource doesn't actually change the destination file, does it still emit notifications?
[2014-01-22 18:39:12 -0500] gleam: no
[2014-01-22 18:39:21 -0500] qurve: Rad, that's what I want here :)
[2014-01-22 18:39:36 -0500] qurve: (If in the future I wanted it to for some reason, is there a way to force the notification?)
[2014-01-22 18:40:48 -0500] gleam: you know, i don't know. i think you'd probably want a dummy execute block with a notification
[2014-01-22 18:40:53 -0500] gleam: or osme other dummy block
[2014-01-22 18:41:16 -0500] qurve: Sorry for all the questions, I just hit a point where I need to use notifications for the first time and a whole new way of thinking about some of the stuff I'm doing opened up.
[2014-01-22 19:07:21 -0500] CPS_: i have a recipe that pulls things from svn that has an include recipe statement to install an svn client
[2014-01-22 19:07:56 -0500] CPS_: if i run chef-client from a command line (windows), it will fail on the svn call because the current command window does not have svn in the path, even though it installed correctly
[2014-01-22 19:07:59 -0500] CPS_: i have to op
[2014-01-22 19:08:11 -0500] CPS_: open a new window and re-run chef-client for svn to work
[2014-01-22 19:08:19 -0500] CPS_: is there a way i can get around this?
[2014-01-22 19:19:27 -0500] wateronsand: Hi all, been searching for a bit but having trouble finding a doc that lays out the format of a response file for use with the "package" resource, can anyone point me in the right direction?
[2014-01-22 19:20:58 -0500] pabst^: spec testing. ouch.
[2014-01-22 19:21:38 -0500] wateronsand: CPS_: in linux i would add a step after the svn install to source my environment, one of the effects of which would be to re-load my path with svn in cluded, not sure you you would go about that in windows, but i'm sure it's doable
[2014-01-22 19:22:22 -0500] CPS_: hmm
[2014-01-22 19:22:39 -0500] CPS_: is there a command to run chef-client on a node I can run from the workstation?
[2014-01-22 19:22:50 -0500] CPS_: i just need to force a client run
[2014-01-22 19:22:53 -0500] stormerider: knife ssh?
[2014-01-22 19:23:07 -0500] CPS_: i'm on windows, so...
[2014-01-22 19:26:34 -0500] wachpwnski: anyone have a clue what I should check to resolve this? It's most likely a issue with chef and ruby: http://pastebin.com/usfF9fLB
[2014-01-22 19:27:31 -0500] wachpwnski: Running it on vagrant and the host machine is as follows. $ chef-solo -v == Chef: 11.8.2 // ruby -v == ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
[2014-01-22 19:27:48 -0500] CPS_: this is a really basic question that I can't find anything online about
[2014-01-22 19:27:57 -0500] CPS_: how do i trigger a chef-client run on windows?
[2014-01-22 19:28:08 -0500] CPS_: i don't need to bootstrap or mess with roles, just run the client
[2014-01-22 19:28:26 -0500] carmstrong: wachpwnski: looks like it's running an ancient version of chef: /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-10.14.2/bin/chef-solo:25
[2014-01-22 19:28:49 -0500] carmstrong: and those errors are ruby syntax errors.
[2014-01-22 19:29:02 -0500] wachpwnski: carmstrong: how do I upgrade that in vagrant?
[2014-01-22 19:29:41 -0500] carmstrong: wachpwnski: are you using a box image with chef pre-installed, or are you running something that installs chef after the VM starts?
[2014-01-22 19:30:31 -0500] carmstrong: wachpwnski: here is our kitchen.yml, which uses the chef-omnibus driver https://github.com/socrata-cookbooks/java/blob/master/.kitchen.yml
[2014-01-22 19:31:14 -0500] carmstrong: I'm not sure how vanilla vagrant does it, though
[2014-01-22 19:31:30 -0500] stormerider: CPS_: knife winrm then, maybe
[2014-01-22 19:32:02 -0500] CPS_: thanks stormerider
[2014-01-22 19:32:23 -0500] wachpwnski: carmstrong: I am using vagrant-omnibus
[2014-01-22 19:32:51 -0500] wachpwnski: vagrant-omnibus (1.2.1) to be exact
[2014-01-22 19:33:48 -0500] carmstrong: wachpwnski: in your vagrant config, are you specifying a chef version or :latest? https://github.com/schisamo/vagrant-omnibus/blob/master/README.md#usage
[2014-01-22 19:34:26 -0500] wachpwnski: carmstrong: looks like that is commented out like so: # config.omnibus.chef_version = :latest
[2014-01-22 19:34:39 -0500] carmstrong: try running with :latest
[2014-01-22 19:34:46 -0500] wachpwnski: so uncomment?
[2014-01-22 19:34:51 -0500] carmstrong: yeah
[2014-01-22 20:03:18 -0500] btm: Chef Code Review: Join bit.ly/1aLNAz0, Watch bit.ly/1aLNzuW
[2014-01-22 20:20:41 -0500] pabst^: If I create an array within a ruby_block, say called, gchristensenIgnoresMe, will that array be available outside of the ruby_block for use within a recipe?
[2014-01-22 20:24:31 -0500] chip-: pabst^: http://www.ghendry.net/scoperb.html
[2014-01-22 20:28:51 -0500] shawn_sher: pabst^: So if you declare it outside the block, it would be in scope.
[2014-01-22 20:30:29 -0500] jperry: ohai!
[2014-01-22 20:30:57 -0500] jperry: I wanted to get folks opinion on what is a good pattern for setting attributes based on environment other than using the environment files
[2014-01-22 20:31:30 -0500] jperry: do others do this in their attributes files?
[2014-01-22 20:33:22 -0500] jperry: or do you use a environment key in your roles?
[2014-01-22 20:43:40 -0500] CPS_: does the chef-client MSI installer have a silent switch?  /qb /i didn't work
[2014-01-22 20:43:51 -0500] CPS_: i'm trying to have chef update itself
[2014-01-22 20:55:02 -0500] geggam: <CPS_> i'm trying to have chef update itself ??... .really ?
[2014-01-22 21:00:13 -0500] banditron: btm: on CHEF-4930 (Win32::Version) all the FFI calls are included in the class. what's the right point/level to mock for unit tests?
[2014-01-22 21:05:37 -0500] shlant: jperry: is there a reason you don't want it in your attribute file?
[2014-01-22 21:05:53 -0500] shlant: and by attribute I means environments
[2014-01-22 21:06:17 -0500] jperry: we have thousands of servers so my worry is that all those servers will get those attributes
[2014-01-22 21:07:36 -0500] jperry: shlant: since we have a single production environment file
[2014-01-22 21:09:21 -0500] btm: banditron: I think I would stub out #get_product_info.
[2014-01-22 21:10:34 -0500] shlant: jperry: well do you want these attributes to apply to all of production?
[2014-01-22 21:11:01 -0500] jperry: no
[2014-01-22 21:11:38 -0500] jperry: shlant: they are only intended for a subset of nodes that are running a specific service
[2014-01-22 21:11:53 -0500] jperry: I think using a case statement in the attributes file might be best
[2014-01-22 21:12:17 -0500] shlant: is there a recipe where that service is installed/enabled?
[2014-01-22 21:12:36 -0500] shlant: case is only really used for OS specific stuff
[2014-01-22 21:14:15 -0500] jperry: shlant: yes
[2014-01-22 21:14:28 -0500] MikeKChef: ohai chefs! I wanted to ask a question about the haproxy opscode cookbook.
[2014-01-22 21:15:31 -0500] clayb: I've got a ruby block which is acting odd: The code inside the block do/end is not being run; the following code prints XXX1 and XXX2 but neither the puts XXX0 nor make_config's seem to be called (it sets my data bag up); http://pastebin.com/2t5sS8x1
[2014-01-22 21:15:43 -0500] clayb: Does anyone have any advice or have any idea what might be up?
[2014-01-22 21:16:52 -0500] clayb: http://pastebin.com/YuA8eW5C gives more context
[2014-01-22 21:17:40 -0500] jperry: clayb: what is the purpose of the puts XXX1
[2014-01-22 21:18:15 -0500] shlant: jperry: then I would put default values in attributes if you want them and then put the modified attributes in the recipe where the service is
[2014-01-22 21:18:25 -0500] clayb: Debugging as get_config will call Chef::Application.fatal! if a key doesn't exist and the keystone-create-test-tenants kept bailing out due to keystone-test-user not being available
[2014-01-22 21:18:52 -0500] acts_as_coder: clayb: where is make_config defined?
[2014-01-22 21:18:57 -0500] jperry: shlant: so check the environment in the recipe and set accordingly?
[2014-01-22 21:19:16 -0500] clayb: In a library of the cookbook; cookbook/bcpc/library/utils.rb
[2014-01-22 21:20:16 -0500] clayb: They look like: http://pastebin.com/vBPdx007
[2014-01-22 21:20:21 -0500] acts_as_coder: clayb: I don't see there "action :run" is valid for a ruby_block
[2014-01-22 21:20:30 -0500] acts_as_coder: clayb: http://docs.opscode.com/resource_ruby_block.html
[2014-01-22 21:20:50 -0500] acts_as_coder: clayb: try removing the action line or changing it to "action :create"
[2014-01-22 21:22:07 -0500] clayb: Re-chefing... Thanks for catching that!
[2014-01-22 21:22:38 -0500] shlant: jperry: I think that's the best way
[2014-01-22 21:23:10 -0500] shlant: otherwise you could set default in the recipe and then use override in the environment
[2014-01-22 21:23:19 -0500] clayb: @acts_as_coder Still failed
[2014-01-22 21:23:25 -0500] clayb: I'll provide the chef output...
[2014-01-22 21:23:30 -0500] shlant: but usually you try and avoid overriding attributes unless absolutely necessary
[2014-01-22 21:25:20 -0500] clayb: Sorry to the Ubuntu project but pastebin.com just got blocked by my proxies: http://paste.ubuntu.com/6799571/
[2014-01-22 21:25:22 -0500] jperry: shlant: for some reason setting different attribute values based on environment seems better in attributes.  For example if I have to track down how attributes are set I only have to go to one place
[2014-01-22 21:25:23 -0500] shlant: jperry: actually, I guess you wouldn't need an override in the environment because it takes precedence. but the less stuff in the environments the better
[2014-01-22 21:26:13 -0500] shlant: that would work too
[2014-01-22 21:26:22 -0500] shlant: you've entered a pretty gray area haha
[2014-01-22 21:26:44 -0500] clayb: For reference 283 is the line that the keystone-create-test-tenants bash block begins on
[2014-01-22 21:26:48 -0500] jperry: shlant: yeah, but you said case statement safe for platforms why not for environments too?
[2014-01-22 21:26:50 -0500] shlant: I like your idea of doing it all in attributes because as you said, it's in one place
[2014-01-22 21:27:18 -0500] shlant: jperry: I'm not saying you can't use case for environments
[2014-01-22 21:27:27 -0500] shlant: it's just usually only for OS
[2014-01-22 21:27:53 -0500] jperry: yeah I know it will work :), just making sure this isn't an anti pattern or something
[2014-01-22 21:28:03 -0500] MIkeKChef: Hi I have a question about the haproxy opscode cookbook 1.6.2
[2014-01-22 21:28:14 -0500] MIkeKChef: I wanted to know if it's possible to use the haproxy_lb LWRP resource with the s
[2014-01-22 21:28:14 -0500] MIkeKChef: standard template if enable_default_http is set to false. Looking at the provide
[2014-01-22 21:28:15 -0500] MIkeKChef: r in providers/lb.rb I see node.default['haproxy']['listeners'][new_resource.type][new_resource.name] = listener indicates that the attribute is set, however the template resource doesn't pick this attribute up.
[2014-01-22 21:28:26 -0500] shlant: jperry: these kind of things are usually down to preference
[2014-01-22 21:28:34 -0500] shlant: attributes are kind of fucky
[2014-01-22 21:28:35 -0500] acts_as_coder: clayb: sorry to leave you hanging but don't have time right now to figure all that out
[2014-01-22 21:28:48 -0500] jperry: shlant: if you put the attributes in a different attribute files you'd probably have to use normal or override
[2014-01-22 21:29:01 -0500] shlant: yea
[2014-01-22 21:29:18 -0500] clayb: acts_as_coder NP; thank you for your interest
[2014-01-22 21:30:02 -0500] jperry: I guess it depends how many attributes you are altering per environment.  If there were a lot individual attribute files i.e production.rb would probably be better
[2014-01-22 21:30:03 -0500] shlant: either way, just make sure that if there isn't an environment set for some reason, it still has a value for that attribute
[2014-01-22 21:30:20 -0500] jperry: yes, that is what the default will be
[2014-01-22 21:30:37 -0500] shlant: sounds good.
[2014-01-22 21:31:19 -0500] jperry: shlant: I'm also assuming that attributes files can return like recipes so you don't have to indent everything.  So at the top you put: return unless node.chef_environment == 'production'
[2014-01-22 21:32:24 -0500] jperry: I guess worth trying out :)
[2014-01-22 21:32:35 -0500] jperry: shlant: thx for the discussion
[2014-01-22 21:32:37 -0500] shlant: yea I'm not sure about that
[2014-01-22 21:32:40 -0500] shlant: no problem
[2014-01-22 21:32:43 -0500] shlant: jperry: basically, the only real "best practices" right now for attributes is set them in as few places as possible and try not to use higher precedence unless necessary
[2014-01-22 21:32:56 -0500] shlant: other than that, it's basically preference
[2014-01-22 21:33:35 -0500] shlant: and someone can correct me on that if I'm wrong
[2014-01-22 21:33:43 -0500] shlant: shit changes constantly ahah
[2014-01-22 21:33:59 -0500] Cuzner: Noob question here, I tried using the link resource to create a symlink to a directory, but apparently i'm not supposed to use the link resource to create a symlink to a dir. What resource should I be using? I looked at directory, and I don't see anything I can use in there...
[2014-01-22 21:35:09 -0500] Cuzner: or ... wait, maybe this is a noob error, i may have the directories in reverse order in my resource :P .. I'll test that theory first.
[2014-01-22 21:37:39 -0500] Levente: we use chef deploy (git provider) resource for deploying php app. problem is that even with shallow_clone the code is way too large and we have a very lengthy clone. Any idea how to improve it?
[2014-01-22 21:38:10 -0500] Cuzner: yep, that was it, i'm an idiot
[2014-01-22 21:38:27 -0500] Cuzner: had my dirs reversed in my link resource... at least it was an easy problem to solve :)
[2014-01-22 21:52:23 -0500] pcn: ohai chefs, is there a way to freeze a package that's already been uploaded
[2014-01-22 21:54:47 -0500] pcn: s/package/cookbook
[2014-01-22 21:55:03 -0500] Cuzner: pcn: version pins & environments
[2014-01-22 21:56:20 -0500] mattray: pcn: download and re-upload with --freeze?
[2014-01-22 21:56:21 -0500] mattray: I don't think there's an in-place freeze
[2014-01-22 21:58:25 -0500] pcn: OK, I'll do that.  It'd be nice if it could be done
[2014-01-22 22:28:52 -0500] marius: Hi, how to assign role to bootstraped server with knife ?
[2014-01-22 22:29:29 -0500] pcn: marius: are you talking about editing the node's run_list?
[2014-01-22 22:29:34 -0500] pcn: knife node edit <node name>
[2014-01-22 22:30:04 -0500] marius: pcn, k thx will have a look
[2014-01-22 22:30:22 -0500] mattray: marius: you can add the role at bootstrap time
[2014-01-22 22:30:40 -0500] mattray: just add -r 'role[base]' to the end of your bootstrap command
[2014-01-22 22:30:59 -0500] marius: mattray, ok thanks
[2014-01-22 22:46:37 -0500] Dairenn: Is there a typical way to safely trigger a failed chef-client run for testing handlers?
[2014-01-22 22:50:42 -0500] mattray: Dairenn: you mean an exception handler?
[2014-01-22 22:50:46 -0500] Dairenn: Yes.
[2014-01-22 22:51:08 -0500] mattray: just use the same handler as a report and exception handler
[2014-01-22 22:51:26 -0500] Dairenn: Oh ok.
[2014-01-22 23:06:32 -0500] fleish: hi all, anyone know what happened to the --availability-zone option in knife openstack server ? the google cache of this page from 1/16/14 lists it (http://tinyurl.com/lqaozsd) but not the current page (http://docs.opscode.com/plugin_knife_openstack.html)
[2014-01-22 23:08:34 -0500] mattray: fleish: docs seem to be aspirational, it's not in the released version yet
[2014-01-22 23:09:56 -0500] nkts_: Are the any good books about chef ?
[2014-01-22 23:10:25 -0500] nkts_: I'm interested how to do things "correctly"
[2014-01-22 23:10:30 -0500] fleish: mattray: well crap that sucks
[2014-01-22 23:10:37 -0500] fleish: mattray: any idea how far away it is?
[2014-01-22 23:11:11 -0500] mattray: fleish: https://github.com/opscode/knife-openstack/pull/80
[2014-01-22 23:11:23 -0500] mattray: looks like you could merge it in
[2014-01-22 23:17:02 -0500] fleish: mattray: is there a way to get @ his specific commit?
[2014-01-22 23:17:10 -0500] fleish: without having to copy & paste everything
[2014-01-22 23:17:55 -0500] mattray: fleish: git cherry pick
[2014-01-22 23:21:27 -0500] fleish: mattray: not familiar with that, could you provide syntax/example for how I'd use it in this case?
[2014-01-22 23:22:03 -0500] mattray: fleish: you'd need to check out the knife-openstack source
[2014-01-22 23:22:16 -0500] fleish: mattray: check, cloned it already
[2014-01-22 23:22:23 -0500] mattray: git cherry-pick -n 4896a41454c131e55b254dd624e07b732f8efbde
[2014-01-22 23:22:43 -0500] mattray: where that long string is your Git SHA
[2014-01-22 23:23:23 -0500] mattray: I'm not sure if you have to do them 1 by one, but here are the commits: https://github.com/opscode/knife-openstack/pull/80/commits
[2014-01-22 23:23:49 -0500] fleish: mattray: I tried that only without the -n ... I got this fatal: bad object 0abaa4b865a3d98e0991cb55ea36d7bb0e89eeea
[2014-01-22 23:23:58 -0500] mattray: fleish: oh yeah
[2014-01-22 23:24:14 -0500] mattray: you have to add git@github.com:jjasghar/knife-openstack.git as a remote
[2014-01-22 23:24:24 -0500] mattray: then git fetch
[2014-01-22 23:24:44 -0500] mattray: then you can cherry-pick from jj's git commits
[2014-01-22 23:26:32 -0500] fleish: mattray: thanks, I tried this but feel like I'm probably doing it wrong http://pastebin.com/A5EsLnpQ
[2014-01-22 23:27:31 -0500] mattray: fleish: just use "git remote add jjasghar git@github.com:jjasghar/knife-openstack.git"
[2014-01-22 23:27:43 -0500] mattray: then "git fetch jjasghar"
[2014-01-22 23:28:00 -0500] fleish: mattray: I think I got it. git fetch --all and I saw it pull stuff down
[2014-01-22 23:28:27 -0500] mattray: fleish: good luck, gotta finish up a presentation for 30 minutes
[2014-01-22 23:28:44 -0500] mattray: but patch it in a branch, then build and install the gem
[2014-01-22 23:28:47 -0500] fleish: mattray: thanks for your help. good luck
[2014-01-22 23:29:00 -0500] mattray: fleish: if you're running openstack, #openstack-chef
[2014-01-22 23:29:23 -0500] fleish: mattray: ah, cool
[2014-01-22 23:29:39 -0500] Levente: git resource doc: "Note: This resource is often used in conjunction with thedeployresource." Has anyone tried it?
[2014-01-22 23:37:03 -0500] axsuul: hi, in a role json file, is it still default_attributes or default now in Chef 11?
[2014-01-22 23:38:09 -0500] coderanger: schisamo: Ping
[2014-01-22 23:38:33 -0500] coderanger: schisamo: Trying to figure out why omnibus is appending '.ubuntu.12.04' to our package versions, any ideas?
[2014-01-22 23:44:53 -0500] wachpwnski: how can I verify my cron "name" do is working?
[2014-01-22 23:45:03 -0500] wachpwnski: I don't see it in my crontab
[2014-01-22 23:46:10 -0500] fleish: wachpwnski: look at your chef client log and see if it shows what is happening. adding -l debug to chef-client might help too
[2014-01-22 23:46:43 -0500] wachpwnski: fleish: different users have different crontabs correct?
[2014-01-22 23:47:08 -0500] fleish: wachpwnski: yes
[2014-01-22 23:47:16 -0500] wachpwnski: that was why it was not showiing up
[2014-01-22 23:54:02 -0500] fleish: mattray: looks good. I just build it in his branch and installed it. seems to work fine
[2014-01-22 23:54:18 -0500] fleish: s/build/built

[2014-01-09 00:31:20 -0500] queuetip: i've been stuck on this users cookbook for 4 hours now, no user being created.... this is my databag and how i'm using the recipe in my run list: http://pastie.org/8615548
[2014-01-09 00:31:59 -0500] queuetip: it appears to load, but doesn't seem to do anything else when i bootstrap a server
[2014-01-09 00:32:08 -0500] queuetip: what am i doing wrong?
[2014-01-09 00:37:02 -0500] lmickh: queuetip: not familiar with that cookbook, but I think you may have to use the 'users_manage' lwrp to have it actually pull from your databag
[2014-01-09 00:38:15 -0500] queuetip: lmickh: it'd be really nice if there were more specific instructions ANYWHERE for using anything involving chef
[2014-01-09 00:38:29 -0500] queuetip: seriously 4 hours trying to create 1 user on a machine...
[2014-01-09 00:39:14 -0500] lmickh: queuetip: that cookbook is mainly to provide the lwrp to manage the users.  Doesn't actually do it for you.
[2014-01-09 00:39:21 -0500] lmickh: at least as near as I can tell
[2014-01-09 00:41:46 -0500] queuetip: lmickh: i don't even know what that means haha, and i'm not even sure exactly how to use the users_manage lwrp
[2014-01-09 00:42:24 -0500] lmickh: queuetip: Read the usage portion of the read me --> https://github.com/opscode-cookbooks/users#usage
[2014-01-09 00:43:46 -0500] lmickh: might consider using the 'user' resource instead if you want to avoid learning about that lwrp for now.  There are a lot of examples for that.
[2014-01-09 00:44:32 -0500] lmickh: Here is an example of how you could create users in the 'admin' databag --> http://docs.opscode.com/essentials_data_bags.html#create-users
[2014-01-09 00:48:11 -0500] lmickh: Here is an example of a simple recipe to create a user and group --> http://fpaste.org/66889/
[2014-01-09 00:49:51 -0500] queuetip: lmickh: awesome! i'll try that out. much appreciation
[2014-01-09 00:50:23 -0500] queuetip: and i can just put that into my own users cookbook right?
[2014-01-09 00:51:02 -0500] lmickh: queuetip:  Start with something simple.  Make a cookbook "my-users" and put that in recipes/info.rb.  Then call it with include_recipe[my-users:info]
[2014-01-09 00:51:32 -0500] queuetip: lmickh: okay, i can do that much :P
[2014-01-09 00:51:34 -0500] lmickh: substitute info for your account.
[2014-01-09 00:55:48 -0500] AntelopeSalad: queuetip: might want to look into using https://github.com/fnichol/chef-user too instead of the opscode user cookbook
[2014-01-09 00:56:05 -0500] AntelopeSalad: you should be able to get it up and going very quickly and it doesn't require data bags
[2014-01-09 01:06:28 -0500] queuetip: AntelopeSalad: i'm using both actually, trying to just get one of them working
[2014-01-09 01:07:06 -0500] queuetip: AntelopeSalad: I think i have it working now almost.... i didn't realize that i needed an attribute that wasn't in the default attributes that it came with, which was the names of the users (databags) to actually use
[2014-01-09 01:07:13 -0500] AntelopeSalad: check the example on the bottom with nichol's , that's all you need to get a user working (no data bags too)
[2014-01-09 01:07:21 -0500] AntelopeSalad: it's like 2 lines of code to get a user setup with ssh keys
[2014-01-09 01:09:31 -0500] queuetip: AntelopeSalad: what messed me up in that example was this line: node['users'] = ['hsolo', 'lando', 'luke.skywalker']
[2014-01-09 01:09:47 -0500] queuetip: chef didn't like that and said i needed node.default['users']
[2014-01-09 01:10:02 -0500] queuetip: i think it's working now... it's bootstrapping again
[2014-01-09 01:10:28 -0500] queuetip: erm, but now i'm getting this error and i'm not quite sure how to solve it
[2014-01-09 01:10:31 -0500] queuetip: ERROR: DataBags must have a name matching /^[\-[:alnum:]_]+$/, you gave "[\"opendb\"]"
[2014-01-09 01:10:44 -0500] queuetip: i don't even know what that means
[2014-01-09 01:11:04 -0500] AntelopeSalad: sounds like you gave it an invalid databag name
[2014-01-09 01:12:44 -0500] dgarstang1: if your starting a vagrant instance ... and the cookbook has no sensible default data, where would you get it from?
[2014-01-09 01:19:28 -0500] queuetip: AntelopeSalad: i only have 1 databag called users, and inside that 1 file called opendb
[2014-01-09 01:19:41 -0500] queuetip: so maybe i need to pass it 'users' instead
[2014-01-09 01:19:57 -0500] queuetip: but the docs say to pass the actual name
[2014-01-09 01:21:43 -0500] jbz: queuetip: is the file named 'opendb' or 'opendb.json'?
[2014-01-09 01:21:50 -0500] dgarstang1: if your starting a vagrant instance ... and the cookbook has no sensible default data, where would you get it from?
[2014-01-09 01:22:51 -0500] queuetip: opendb.json
[2014-01-09 01:22:57 -0500] queuetip: jbz: ^^
[2014-01-09 01:23:00 -0500] jbz: ah
[2014-01-09 01:26:27 -0500] dgarstang1: I am confused. If i haven't defined 'foo' as an attribute anywhere, what will defined? node['foo'] return? i haven't defined it anywhere, yet defined? returns true
[2014-01-09 01:28:58 -0500] dgarstang1: yep. defined? don't work. what do I use in chef?
[2014-01-09 01:29:10 -0500] willejs: ohai chefs
[2014-01-09 01:29:23 -0500] willejs: what happens when there is no node name in your client.rb?
[2014-01-09 01:29:28 -0500] queuetip: AntelopeSalad: it works now!!! thanks so much
[2014-01-09 01:29:32 -0500] willejs: but you have a client.pem?
[2014-01-09 01:29:58 -0500] willejs: does it automatically figure out what the name of the server is?
[2014-01-09 01:31:47 -0500] jbz: dgarstang1: I think there's an 'attribute?' method on the node object that returns a boolean if that attribute exists
[2014-01-09 01:32:03 -0500] jbz: so, uh, node[:attribute].attribute?
[2014-01-09 01:32:05 -0500] jbz: maybe?
[2014-01-09 01:33:09 -0500] dgarstang1: jbz: Ok. This is weird. if I test this in ruby, x = hash.new and if defined? x['a'] then returns true, which is what I am seeing in chef. Que!?
[2014-01-09 01:34:04 -0500] dgarstang1: of course googling for chef "attribute?" gets me all about attributes
[2014-01-09 01:34:05 -0500] jbz: Wouldn't it be if x['a'].defined?
[2014-01-09 01:34:24 -0500] dgarstang1: jbz: I dunno. the example I found used it the other way
[2014-01-09 01:34:27 -0500] dgarstang1: checking again
[2014-01-09 01:35:02 -0500] dgarstang1: jbz: http://www.tutorialspoint.com/ruby/ruby_operators.htm ... looks like defined? var
[2014-01-09 01:36:51 -0500] jbz: dgarstang1: I'm not a rubyist, but I don't think defined does what you think
[2014-01-09 01:37:02 -0500] dgarstang1: jbz: apparently not. I think i need if x.has_key? 'a' anyway
[2014-01-09 01:37:05 -0500] jbz: has-key is more likely
[2014-01-09 01:37:06 -0500] dgarstang1: duh
[2014-01-09 01:37:10 -0500] dgarstang1: yah
[2014-01-09 01:37:26 -0500] jbz: but if possible, I'd use the specific test built into the node object
[2014-01-09 01:37:51 -0500] jbz: Every time I've used straight ruby to test Chef objects, I've gotten results that didn't quite match my expectations :-)
[2014-01-09 01:38:01 -0500] dgarstang1: jbz: docs hard to find. :)
[2014-01-09 01:38:11 -0500] jbz: Agreed.
[2014-01-09 01:38:25 -0500] dgarstang1: especially for 'attribute'
[2014-01-09 01:39:45 -0500] jbz: generally the docs are all for the node object
[2014-01-09 01:40:17 -0500] jbz: er, vlass
[2014-01-09 01:40:21 -0500] jbz: *class derpderp
[2014-01-09 01:48:17 -0500] AntelopeSalad: queuetip: i'm not sure what i did but np
[2014-01-09 01:51:11 -0500] dgarstang1: are people using vagrant more for testing that chef works, or to test the app provided by the cookbook actually works? is that expecting too much from vagrant?
[2014-01-09 01:54:49 -0500] flaccid: dgarstang1: both, anything and everything
[2014-01-09 01:55:02 -0500] flaccid: everything possible :)
[2014-01-09 02:13:29 -0500] bettyclamp: Can someone point me to an example metadata.rb file that lies at the top of the repo, next to Berksfile?
[2014-01-09 02:14:55 -0500] chefologits: Hi, I have an environment with a bunch of chef cookbooks with recipes, my question is, what logical path is taken to run each after a chef-client run
[2014-01-09 02:15:18 -0500] jbz: bettyclamp: if you just create a new cookbook using knife, it should put a skeletal metadata.rb file in there
[2014-01-09 02:17:15 -0500] bettyclamp: jbz: to be clear, I'm not talking about a cookbook's metadata.rb. I'm talking about a top-level metadata.rb for the whole repo, one that sits next to the Berksfile. (Also, I'm creating cookbooks using berks, not using knife.)
[2014-01-09 02:17:28 -0500] jbz: bettyclamp: Oh, my mistake. Sorry.
[2014-01-09 02:17:54 -0500] chefologits: any assistance would be great
[2014-01-09 02:18:09 -0500] bettyclamp: jbz: have you ever seen such a top-level metadata.rb before? Some people say it's indispensable, and yet I can't seem to find one on the web.
[2014-01-09 02:18:21 -0500] jbz: bettyclamp: No, but I don't work in a berkshelf environment presently.
[2014-01-09 02:18:36 -0500] bettyclamp: k thx
[2014-01-09 02:18:41 -0500] jbz: bettyclamp: Also, the last time I *did* use berkshelf, the cookbook was the repo all by itself
[2014-01-09 02:18:52 -0500] jbz: so the cookbook metadata *was* the metadata.rb in that location
[2014-01-09 02:19:10 -0500] jbz: (i.e. we had a separate repo for each cookbook, and a separate one for the data bags/roles/etc).
[2014-01-09 02:30:10 -0500] helfire: hey, is there any way to suppress chefspec output from chef-client or warnings?
[2014-01-09 02:30:35 -0500] helfire: eg: you are running chef-solo, skipping chef-client install and /logrotate/libraries/logrotate_config.rb:21: warning: already initialized constant DIRECTIVES
[2014-01-09 02:33:21 -0500] maek: Has anyone been able to get passenger installed via the community passenger_apache2 recipe outside of the embedded ruby that comes with chef?
[2014-01-09 04:17:28 -0500] bettyclamp: Kitchen can find a cookbook mentioned in the Berksfile, but it can't find one of my own in the cookbooks subdir. Why?
[2014-01-09 04:18:07 -0500] bettyclamp: The metadata.rb is right...I don't get it...
[2014-01-09 04:20:38 -0500] c4milo: how can I tell chef-solo to print the output of package install?
[2014-01-09 04:20:55 -0500] c4milo: it is getting stuck but there is no clue as to why
[2014-01-09 04:20:57 -0500] bettyclamp: ...and I can't find anything helpful on the web...
[2014-01-09 04:32:16 -0500] helfire: @c4milo http://stackoverflow.com/questions/12594855/chef-logging-of-wget maybe?
[2014-01-09 04:33:00 -0500] helfire: whoops
[2014-01-09 04:33:02 -0500] helfire: n/m not that
[2014-01-09 04:34:09 -0500] helfire: c4milo: wont chef-solo -ldebug show command output?
[2014-01-09 04:34:18 -0500] c4milo: helfire: unfortunately, no
[2014-01-09 04:34:35 -0500] helfire: can you hackily just pipe output to /tmp/blah
[2014-01-09 04:35:55 -0500] helfire: wrap the commands in a script and >> or | tee it
[2014-01-09 04:57:00 -0500] zer0old: hello! how can i assign a role to a node without using knife. i am trying to launch with a pre-defined attribute called application=apache or role-apache, but so far i found only knife can assign a role to a node or via chef console. could someone point me in the right direction
[2014-01-09 05:02:11 -0500] chefologist: hi, when I run a cookbook such as zabbix is run with the command chef-client run against my chef server, what actually happens to all the subfiles e.g. attributes, files, recipes, templates?  does the chef client activate each .rb file?
[2014-01-09 05:02:22 -0500] chefologist: trying to get my head around how it actually works in the background
[2014-01-09 05:02:27 -0500] chefologist: the chef *magic*
[2014-01-09 05:03:37 -0500] chefologist: if anyone could assist that would be great
[2014-01-09 05:15:43 -0500] chefologist: hello?
[2014-01-09 05:17:11 -0500] flaccid: hi
[2014-01-09 05:17:35 -0500] jchauncey: http://docs.opscode.com/essentials_nodes_chef_run.html
[2014-01-09 05:17:40 -0500] jchauncey: read that
[2014-01-09 05:22:43 -0500] chefologist: jchauncy: thanks, is there anything more detailed at a lower level e.g. log output?
[2014-01-09 05:26:21 -0500] jchauncey: not really
[2014-01-09 05:26:35 -0500] jchauncey: if you understand everything on that page then you can debug your way through pretty much anythign
[2014-01-09 05:27:49 -0500] zer0old: hello! how can i assign a role to a node without using knife. i am trying to launch with a pre-defined attribute called application=apache or role-apache, but so far i found only knife can assign a role to a node or via chef console. could someone point me in the right direction
[2014-01-09 05:29:21 -0500] zer0old: first-boot.json is a way to go, but does not seems to be the right solution to have a role forever
[2014-01-09 05:38:22 -0500] zer0old: hello
[2014-01-09 05:43:05 -0500] savant: hai
[2014-01-09 05:52:11 -0500] zer0old: hi
[2014-01-09 05:52:19 -0500] arnav90: hello
[2014-01-09 05:52:20 -0500] zer0old: how can i define a roles for a chef client
[2014-01-09 05:52:35 -0500] zer0old: *role
[2014-01-09 05:53:09 -0500] zer0old: i want to define role for a client and that role will call other roles or recipe for client setup
[2014-01-09 05:53:36 -0500] n1ko: you define it when you use it, and in that role define run_list to include more roles
[2014-01-09 05:54:55 -0500] n1ko: so something like knife bootstrap -r role[myrole] and in roles you have myrole.rb with name "myrole" and run_list ["role[cats]"] etc
[2014-01-09 05:55:57 -0500] zer0old: yeah, but i do not want to use knife for it, i want to just launch servers with pre-defined roles, install chef-client and chef server will set up required recipe on it
[2014-01-09 05:57:13 -0500] zer0old: but i do not see any way of mapping a role to a client, on client side or in client.rb
[2014-01-09 05:57:28 -0500] zer0old: i hope i am asking the right question
[2014-01-09 05:58:45 -0500] zer0old: this way in future if i have to convert client type, e.g. apache -> apache+mysql, i will just change the role and that role recipes will be applied
[2014-01-09 06:00:10 -0500] zer0old: [n1ko] - or is there any better way of doing it other than using knife
[2014-01-09 06:01:08 -0500] zer0old: i can use a default recipe to look at role or some attribute on client side and do regex to define the role, but that does not feel the chef way of doing it
[2014-01-09 06:14:34 -0500] xapak: Hello!
[2014-01-09 10:37:16 -0500] srini: Hi all here
[2014-01-09 10:37:29 -0500] srini: need help in replacing a path in the bash_profile
[2014-01-09 10:37:49 -0500] srini: trying to use chef file resource - replace lines
[2014-01-09 10:38:10 -0500] srini: how to tell chef that "PATH=.*" to be replaced?
[2014-01-09 10:41:16 -0500] railsraider: srini: you can use a script resource with sed -i or make a template
[2014-01-09 10:42:06 -0500] srini: railsraider, yes script I can use with sed... but I am trying with the  Chef::Util::FileEdit
[2014-01-09 10:45:33 -0500] yurinnick: You can pass it with setting ENV['PATH']=<some_paths>
[2014-01-09 10:47:37 -0500] srini: yurinnick, I am trying to find exisitng PATH statement and need to replace with $PATH:someNewPath
[2014-01-09 10:48:21 -0500] srini: yurinnick, I dont know the regex in chef much.... I was trying to find PATH=.* and replace with $PATH:someNewPath
[2014-01-09 11:15:46 -0500] zxd: is there a cookbook that creates users?
[2014-01-09 11:16:57 -0500] n1ko: like... users cookbook?
[2014-01-09 11:17:38 -0500] laurent\: just wondering, what would you do if there were no irc ? :)
[2014-01-09 11:18:36 -0500] borntyping: laurent\: StackOverflow?
[2014-01-09 11:19:27 -0500] railsraider: hi i have this chef-client -i 1800 -s 300 but its seems like its firing every 7 minutes or so
[2014-01-09 11:19:36 -0500] gregkare: People would have to *gasp* read documentaiton and use their brain
[2014-01-09 11:19:44 -0500] railsraider: doesnt 1800 suppose to be half an hour?
[2014-01-09 11:37:03 -0500] railsraider: Anyone wants to help me fix this recipe - i wrote it mysefl for removing all nodes and clients that are not on ec2 http://pastebin.com/gFMVjqZz
[2014-01-09 11:49:59 -0500] flaccid: railsraider: someone might help if you say whats wrong with it
[2014-01-09 11:51:05 -0500] railsraider: its buggy, it does not find clients all the time perhaps im not using it right to find the cient for a node
[2014-01-09 11:57:19 -0500] srini: Uff having tough time concatenating this... can someone help me pls! "PATH="+#{ENV['PATH']}+":"+zip_home ... whats wrong!
[2014-01-09 12:00:23 -0500] srini: Is plus not legal to concatenate strings plus variables?
[2014-01-09 12:01:30 -0500] zxd: when using wrapper cookbook how should the attribute be named under attributes/  if I want to override the default settings   node['rvm']['user_installs'] = [   ...  per example?
[2014-01-09 12:01:43 -0500] zxd: I don't understand how this should be called
[2014-01-09 12:01:53 -0500] zxd: node[] or defaut[] or override[]
[2014-01-09 12:06:15 -0500] zxd: n1ko: users cookbook dosen't seem to support macosx
[2014-01-09 12:06:25 -0500] zxd: fnichol  / chef-user  made one that does has macosx
[2014-01-09 13:38:55 -0500] borntyping: Does anyone know if it's possible to have a provider modify node attributes? (The end result I'm looking for is for my provider to be able to set values that will all be written to a single file)
[2014-01-09 14:08:44 -0500] tscanausa: has anyone run into an issue with
[2014-01-09 14:09:07 -0500] tscanausa: "unsupported key type `??y???y??y?&' "
[2014-01-09 14:25:47 -0500] zanshin: With chef-solo I have a chef.json file that looks like this:
[2014-01-09 14:25:48 -0500] zanshin:   chef.json = {
[2014-01-09 14:25:48 -0500] zanshin:    :java => {
[2014-01-09 14:25:48 -0500] zanshin:     :jdk_version => '7',
[2014-01-09 14:25:48 -0500] zanshin:     :install_flavor => 'oracle',
[2014-01-09 14:25:49 -0500] zanshin:     :oracle => { "accept_oracle_download_terms" => true }
[2014-01-09 14:25:49 -0500] zanshin:    },
[2014-01-09 14:25:50 -0500] zanshin:    :tomcat => {
[2014-01-09 14:25:50 -0500] zanshin:     :repository_path => 'ome-telecom-release',
[2014-01-09 14:25:51 -0500] zanshin:     :project => 'telecom',
[2014-01-09 14:25:51 -0500] zanshin:     :application => 'credit-card-webapp',
[2014-01-09 14:25:51 -0500] zanshin:     :version => '2.1.0',
[2014-01-09 14:25:51 -0500] zanshin:     :deployment_artifact => 'credit-card-webapp-2.1.0.war',
[2014-01-09 14:25:52 -0500] zanshin:     :deployment_artifact_finalname => 'credit-card.war'
[2014-01-09 14:51:23 -0500] willejs: zanshin: put that in a paste bin and il help you
[2014-01-09 14:51:35 -0500] willejs: what are you trying to do?
[2014-01-09 14:51:40 -0500] willejs: use the application cookbook?
[2014-01-09 14:52:55 -0500] zxd: hm
[2014-01-09 14:54:15 -0500] daxroc: Afternoon all
[2014-01-09 14:54:58 -0500] bettyclamp: Kitchen can find a cookbook mentioned in the Berksfile, but it can't find one of my own in the cookbooks subdir. Why?
[2014-01-09 14:55:13 -0500] zanshin: williejs: Looking for how to override default attributes. On Vagrant with chef-solo it's inline with the run list. Looks like on chef-server I use a role or and override.
[2014-01-09 14:55:28 -0500] zxd: can someone help me out with the 'users' cookbook  It isn't clear they say to use databags to store user information, but  bthen also to use  user resource to add and remove, update users I don't understand, but in the other hand there is also a "action": "remove" to user databages so who controls what ???
[2014-01-09 14:55:44 -0500] daxroc: What's the best way to copy a file from cache to a working directory ? is referencing Chef::Config[:file_cache_path] ok or is there a node specific ?
[2014-01-09 14:55:45 -0500] zxd: also it isn't clear if I must create individual databags for each user
[2014-01-09 14:55:51 -0500] zxd: or what
[2014-01-09 14:56:12 -0500] daxroc: *I'm downloading the file using remote_file
[2014-01-09 14:56:33 -0500] workmad3: zxd: it's because there are multiple ways of using the cookbook
[2014-01-09 14:57:10 -0500] workmad3: zxd: it provides a resource (user_account iirc) so you can manage users in their manner with data retrieved however you want
[2014-01-09 14:57:27 -0500] workmad3: zxd: and also, for convenience, it provides a recipe that you can use which will create uses from a data bag
[2014-01-09 14:57:30 -0500] workmad3: *users
[2014-01-09 14:58:40 -0500] workmad3: zxd: oh sorry, the resource in the opscode users cookbook is 'users_manage'
[2014-01-09 14:58:55 -0500] workmad3: I was thinking of a different user account cookbook :)
[2014-01-09 14:59:13 -0500] zxd: from what I read it's called user
[2014-01-09 14:59:37 -0500] zxd: "The user resource is used to add users, update existing users, remove users, and to lock/unlock user passwords."
[2014-01-09 14:59:41 -0500] zxd: http://docs.opscode.com/chef/resources.html#user
[2014-01-09 14:59:56 -0500] workmad3: zxd: that's the user resource that's available with chef
[2014-01-09 15:00:27 -0500] zxd: it isn't the same as the one from users cookbook?
[2014-01-09 15:00:42 -0500] workmad3: zxd: no, you can use that resource without the users cookbook
[2014-01-09 15:00:52 -0500] zxd: oh boy
[2014-01-09 15:01:07 -0500] workmad3: zxd: a quick look, the users cookbook provides you with a 'users_manage' resource which is to aid you in creating users from a data bag
[2014-01-09 15:02:27 -0500] zxd: do they say if it's possible to stuff all users in a single json file and upload that as a single databag?
[2014-01-09 15:02:37 -0500] zxd: workmad3
[2014-01-09 15:02:55 -0500] workmad3: zxd: it expects users to be separate items within the same databag
[2014-01-09 15:03:11 -0500] workmad3: zxd: remember that each json file is a data bag *item*, not the entire databag
[2014-01-09 15:03:36 -0500] workmad3: zxd: it goes 'data_bags/<data bag name>/<item name>.json' in your chef repo
[2014-01-09 15:04:09 -0500] workmad3: zxd: so in their example, it suggests a users databag with items consisting of the users to manage... so that would be things like 'data_bags/users/zxd.json'
[2014-01-09 15:06:03 -0500] zxd: workmad3: thanks
[2014-01-09 15:06:33 -0500] shlant: when you bootstrap a server with chef, it allows you to run chef-client but won't run it automatically unless you have it in your run list, yes?
[2014-01-09 15:07:01 -0500] shlant: as in run it automatically after the initial one
[2014-01-09 15:07:29 -0500] workmad3: shlant: correct
[2014-01-09 15:07:41 -0500] workmad3: shlant: or correct enough anyway :)
[2014-01-09 15:08:20 -0500] zxd: workmad3: user resource that comes with chef seems to have windows and macosx support Chef::Provider::User::Windows Chef::Provider::User::Dscl
[2014-01-09 15:08:24 -0500] shlant: cool, thanks
[2014-01-09 15:09:19 -0500] workmad3: zxd: I guess? I've only ever run chef on *nix hosts tbh
[2014-01-09 15:09:31 -0500] zxd: workmad3: what do you use for creating users?
[2014-01-09 15:10:11 -0500] workmad3: zxd: my own resource
[2014-01-09 15:11:04 -0500] zxd: workmad3: why :)
[2014-01-09 15:11:37 -0500] workmad3: zxd: because I wanted to do some stuff on top of the normal user resource, such as adding authorized_key files
[2014-01-09 15:11:44 -0500] workmad3: zxd: it wraps around the chef user resource
[2014-01-09 15:14:35 -0500] notromda1: I noticed in some style guides that chef style prefers node['attribute'] over node[:attribute]  Is there a reason chef goes against the ruby convention for hash keys?
[2014-01-09 15:15:43 -0500] gchristensen: notromda1: there is a really long github commen thread about this, let me see if I can find it.
[2014-01-09 15:15:44 -0500] workmad3: notromda1: with data bags, it's necessary unless they wanted to do weird things with json parsers
[2014-01-09 15:16:13 -0500] workmad3: notromda1: because json parsers in ruby give you back a hash with string keys (which is correct as json counts as user data)
[2014-01-09 15:16:29 -0500] notromda1: rails manages to work around it...
[2014-01-09 15:16:47 -0500] workmad3: notromda1: not if you use json stuff directly
[2014-01-09 15:16:49 -0500] notromda1: HashWithIndifferentAccess
[2014-01-09 15:17:04 -0500] workmad3: notromda1: chef has its own Chef::Mash stuff which is equivalent
[2014-01-09 15:17:11 -0500] workmad3: notromda1: and node data is a Chef::Mash
[2014-01-09 15:17:16 -0500] workmad3: so you can use either
[2014-01-09 15:17:29 -0500] workmad3: but databags are a thin wrapper around parsing json
[2014-01-09 15:17:36 -0500] notromda1: Just saying, the more common thing throughout the ruby community is to use symbols
[2014-01-09 15:17:52 -0500] workmad3: notromda1: unless its user data
[2014-01-09 15:18:42 -0500] workmad3: notromda1: or have you missed the occasional big discussions in #rubyonrails and #ruby regarding turning user input into symbols to use as hash keys? ;)
[2014-01-09 15:20:50 -0500] CPS: how do i download a particular file from an SVN repo using chef? the subversion provider doesn't  seem to have a download action
[2014-01-09 15:21:09 -0500] CPS: i don't want to checkout or export, i just need 1 file from a particular folder
[2014-01-09 15:22:31 -0500] workmad3: CPS: with SVN, can't you export with the URL being the path to the file to checkout?
[2014-01-09 15:23:00 -0500] CPS: does the export action work with a specified file, rather than a directory?
[2014-01-09 15:23:24 -0500] workmad3: not sure... I've mostly stayed away from SVN :)
[2014-01-09 15:23:38 -0500] bettyclamp: Could someone pls help me with my test-kitchen question?
[2014-01-09 15:23:59 -0500] CPS: bettyclamp: ask awau
[2014-01-09 15:24:02 -0500] CPS: away*
[2014-01-09 15:24:47 -0500] bettyclamp: kitchen converge doesn't copy my cookbooks to the guest machine's /tmp/kitchen/cookbooks. But it does copy third-party cookbooks listed in the Berksfile. Why?
[2014-01-09 15:25:08 -0500] workmad3: bettyclamp: does your Berksfile have 'metadata' in it?
[2014-01-09 15:25:14 -0500] bettyclamp: workmad3: yes
[2014-01-09 15:26:54 -0500] bettyclamp: No idea?
[2014-01-09 15:28:00 -0500] workmad3: sorry, not here
[2014-01-09 15:28:07 -0500] workmad3: I've not really used test-kitchen yet
[2014-01-09 15:28:18 -0500] workmad3: I was just checking the berksfile was correct :)
[2014-01-09 15:28:34 -0500] juliancdunn: bettyclamp: which cookbooks were you expecting it to copy?
[2014-01-09 15:29:38 -0500] notromda1: Is there a delay between berks upload and the new cookbooks being available for chef client to see?
[2014-01-09 15:29:41 -0500] bettyclamp: juliancdunn: I expected it to copy the cookbooks in my cookbooks subdir.
[2014-01-09 15:30:01 -0500] juliancdunn: bettyclamp: no, it doesn't do that. kitchen is run from the perspective of a single cookbook under test
[2014-01-09 15:30:18 -0500] bettyclamp: Ah
[2014-01-09 15:30:19 -0500] juliancdunn: if you want others on there as dependencies, declare them as deps in metadata.rb
[2014-01-09 15:30:38 -0500] bettyclamp: So, I should cd into the cookbook directory and run kitchen converge from there?
[2014-01-09 15:30:43 -0500] juliancdunn: bettyclamp: yes
[2014-01-09 15:31:07 -0500] juliancdunn: each cookbook has its own .kitchen.yml file describing platforms to test, suites to run, etc.
[2014-01-09 15:35:07 -0500] sanguisdex: dsi is there a way to detect if a service is running?
[2014-01-09 15:35:15 -0500] bettyclamp: juliancdunn: it finally worked. Thanks for bringing clarity.
[2014-01-09 15:36:20 -0500] juliancdunn: bettyclamp: np
[2014-01-09 15:42:10 -0500] CPS: does the svn provider require an svn client installed on the node?
[2014-01-09 15:42:19 -0500] CPS: subversion provider*
[2014-01-09 16:14:36 -0500] zxd: why the hack they don't explain from where this variable comes from and what it means http://docs.opscode.com/resource_user.html  matching_node ???
[2014-01-09 16:15:31 -0500] gchristensen: zxd: that is just example code, non-functional without you filling in the est of the logic.
[2014-01-09 16:16:13 -0500] zxd: what should "/#{node[:nginx][:user]}"  should resolve to per example
[2014-01-09 16:16:36 -0500] zxd: ah ok
[2014-01-09 16:16:38 -0500] zxd: nevermind
[2014-01-09 16:17:07 -0500] zxd: if I put in attributes    default['nginx']['user'] = ['foo']
[2014-01-09 16:17:45 -0500] zxd: but that isn't obvious for beginners
[2014-01-09 16:21:15 -0500] jperry: hi everyone, anyone frequently run into 'gpg: keyserver timed out' in their chef runs?
[2014-01-09 16:21:24 -0500] jperry: any suggestions on how to avoid these?
[2014-01-09 16:21:42 -0500] zxd: now the question is how do I combine chef 'user' resource for creating mac and windows users with the cookbook users if users is not mac or windows user since users cookbook has more functionality
[2014-01-09 16:22:17 -0500] jperry: is it just better to download the key and import it manually
[2014-01-09 16:23:35 -0500] sparr_: zxd: doesn't that cookbook already support users on macos and windows and linux?
[2014-01-09 16:23:49 -0500] zxd: sparr_: dosen't seem so
[2014-01-09 16:24:22 -0500] zxd: also it dosen't seem to support creating group name same as user
[2014-01-09 16:25:03 -0500] railsraider: how come i have some nodes with no attributes at all?
[2014-01-09 16:25:24 -0500] zxd: I could be wrong
[2014-01-09 16:25:27 -0500] railsraider: did they just register and never ran?
[2014-01-09 16:28:58 -0500] zxd: sparr_: it probably does, since it says You can pass any action listed in the [user](http://docs.opscode.com/chef/resources.html#id237) resource for Chef via the "action" option. For Example:
[2014-01-09 16:29:13 -0500] sparr_: railsraider: their run could have failed
[2014-01-09 16:30:06 -0500] railsraider: sparr_:  is there a way to query the node for a never ran chef?
[2014-01-09 16:30:30 -0500] sparr_: I don't know, sorry
[2014-01-09 16:30:32 -0500] railsraider: i want to delete all these zombies
[2014-01-09 16:30:40 -0500] railsraider: ohai attribute?
[2014-01-09 16:30:47 -0500] railsraider: if its missing
[2014-01-09 16:30:49 -0500] railsraider: ?
[2014-01-09 16:32:35 -0500] prognostikos: what is the best way to have a node running chef-client destroy its node on the chef-server?
[2014-01-09 16:33:23 -0500] Brad811_: I can't get my chef recipe to run "ssh-add". I get the error "Could not open a connection to your authentication agent." even if I run "eval `ssh-agent`" beforehand. Running on Ubuntu 12.04
[2014-01-09 16:36:24 -0500] jpoole: try eval `ssh-agent`; ssh-add
[2014-01-09 16:36:29 -0500] jpoole: oh
[2014-01-09 16:36:34 -0500] jpoole: i should read the whole question
[2014-01-09 16:37:15 -0500] jpoole: prognostikos my luck has driven me to use knife for it
[2014-01-09 16:37:26 -0500] jpoole: knife node delete etc.
[2014-01-09 16:37:46 -0500] sparr_: Brad811_: have you confirmed that ssh-agent is able to start?
[2014-01-09 16:40:03 -0500] zxd: I got a real problem, the rvm cookbook requires a user to install rvm to , but I also need to create the user before, I am using users cookbook
[2014-01-09 16:40:06 -0500] zxd: what to do
[2014-01-09 16:40:12 -0500] zxd: I am using all in one wrapper cookbook
[2014-01-09 16:40:52 -0500] zxd: hmm
[2014-01-09 16:40:53 -0500] zxd: never mind
[2014-01-09 16:41:38 -0500] zxd: arr
[2014-01-09 16:49:54 -0500] AntelopeSalad: for system utilities that don't run on startup adding them is as simple as: package 'foo' right?
[2014-01-09 16:50:00 -0500] AntelopeSalad: for example: htop
[2014-01-09 16:54:39 -0500] zxd: why is it opening an editor when I do  :  knife environment create dev from file dev.rb ?? all the settings are in the dev.rb file
[2014-01-09 16:54:47 -0500] borntyping: AntelopeSalad: yes
[2014-01-09 16:56:16 -0500] zxd: knife environment from file dev.rb -VV
[2014-01-09 16:56:29 -0500] zxd: . /home/d/chef-repo/environments/dev.rb:3:in `from_file': undefined method `[]=' for nil:NilClass (NoMethodError)
[2014-01-09 16:57:00 -0500] zxd: override_attributes['rvm']['user_installs'] = [{'user' => 'deploy', 'default_ruby' => '2.1.0'}]
[2014-01-09 17:01:40 -0500] AntelopeSalad: borntyping: ok thanks, it almost seemed too simple
[2014-01-09 17:02:05 -0500] zanshin: So `knife upload roles/<rolename.rb> seems to work, but I can't see the role on the server. Adding the `-vv` option just shows me the Chef version. How else can I see what knife is doing (or not doing)?
[2014-01-09 17:03:49 -0500] prognostikos: jpoole: would the node need an admin .pem to be able to use knife to delete itself?
[2014-01-09 17:05:37 -0500] mvisich: Hello I'm running the open source version of chef at revision Version 10.12.0. I am working on a cookbook using the command line tool shef. When I do a search for all my nodes "members = search("node")" all my nodes are returned. But when i put in an argument like "chef_environment:QA" or "name:windowsbox" I do not get any windows machines to retur
[2014-01-09 17:05:37 -0500] mvisich: n. So in summaray if i dont put and arguments into the search i get windows machines, but if I do no windows machines come back. Any ideas would be great! Thanks!
[2014-01-09 17:07:29 -0500] Brad811_: sparr_: yes, I can start ssh-agent manually from the command line
[2014-01-09 17:10:49 -0500] jpoole: prognostikos yes
[2014-01-09 17:15:03 -0500] zxd: where does chef keep docs about knife.rb
[2014-01-09 17:16:01 -0500] mvisich: http://docs.opscode.com/config_rb_knife.html
[2014-01-09 17:16:12 -0500] mvisich: i think
[2014-01-09 17:16:34 -0500] zanshin: http://docs.opscode.com/config_rb_knife.html
[2014-01-09 17:17:16 -0500] sparr_: http://docs.opscode.com/config_rb_knife.html
[2014-01-09 17:17:19 -0500] sparr_: seems like a popular answer
[2014-01-09 17:18:11 -0500] zxd: I wonder if I need to accociate cookbooks with an environment
[2014-01-09 17:18:22 -0500] zxd: or if I just have attributes there then only associate a node
[2014-01-09 17:19:47 -0500] zxd: What is the syntax required for specifying an environment in the ~/.chef/knife.rb file?
[2014-01-09 17:20:07 -0500] dgarstang1: not valid in attribute/default.rb I assume... default['couchbase'] = { 'servers': ['changeme1', 'changeme2'] }
[2014-01-09 17:20:48 -0500] dgarstang1: oh =>
[2014-01-09 17:25:03 -0500] jpoole: zxd environment :environment
[2014-01-09 17:25:22 -0500] zxd: ?
[2014-01-09 17:25:43 -0500] jpoole: sorry, environment 'prod'
[2014-01-09 17:25:47 -0500] zxd: can you give example please
[2014-01-09 17:25:48 -0500] jpoole: i do it a bit different
[2014-01-09 17:25:58 -0500] jpoole: i have an environment variable.
[2014-01-09 17:26:01 -0500] jpoole: and in my client.rb
[2014-01-09 17:26:05 -0500] zxd: hm
[2014-01-09 17:26:06 -0500] jpoole: environment  ENV['ENVIRONMENT']
[2014-01-09 17:26:07 -0500] zxd: in the node?
[2014-01-09 17:26:22 -0500] sanguisdex: how do I purge older versions of a cookbook from a chef server?
[2014-01-09 17:26:34 -0500] zxd: jpoole: where is client.rb ?
[2014-01-09 17:26:45 -0500] jpoole: ./etc/chef/client.rb
[2014-01-09 17:28:03 -0500] zxd: it's on the node jpoole ?
[2014-01-09 17:28:14 -0500] jpoole: on the machine, yes.
[2014-01-09 17:29:23 -0500] zxd: jpoole: is it possible to push the changes to the node from a workstation about what his new environment is?
[2014-01-09 17:29:34 -0500] chefuser2323: hi all. where is the documentation on how to install a signed ssl certificate into the chef gui?
[2014-01-09 17:30:26 -0500] jpoole: oh you need to migrate from _default to a new environment?
[2014-01-09 17:30:34 -0500] jpoole: ie, does the node have an environment right now?
[2014-01-09 17:33:27 -0500] zxd: no
[2014-01-09 17:33:30 -0500] zxd: it's on default
[2014-01-09 17:33:43 -0500] zxd: jpoole
[2014-01-09 17:33:46 -0500] jpoole: yeah you'll need to google, migrate nodes between environments
[2014-01-09 17:33:52 -0500] juliancdunn: chefuser2323: I assume you mean a real cert to replace the self-signed one?
[2014-01-09 17:33:54 -0500] juliancdunn: http://docs.opscode.com/server_security.html
[2014-01-09 17:34:07 -0500] chefuser2323: ah. thank you much.
[2014-01-09 17:34:20 -0500] chefuser2323: having a hard time getting google to cooperate with me on that search.
[2014-01-09 17:34:31 -0500] jpoole: http://docs.opscode.com/essentials_environments.html
[2014-01-09 17:34:33 -0500] jpoole: it's there
[2014-01-09 17:34:53 -0500] jpoole: near the bottom
[2014-01-09 17:35:13 -0500] zxd: oh boy
[2014-01-09 17:35:22 -0500] zxd: not it isn't clear
[2014-01-09 17:35:23 -0500] zxd: at all
[2014-01-09 17:35:42 -0500] jpoole: Move Nodes: knife exec -e 'nodes.transform(chef_environments:default") { |n| n.chef_environment("production")}'
[2014-01-09 17:36:49 -0500] juliancdunn: sanguisdex: you shouldn't need to delete old cookbook versions, but if you really want to, you can do "knife cookbook delete <name> <version>"
[2014-01-09 17:37:03 -0500] zxd: By calling the node.chef_environment("node_name") object and then using node.save to update the chef_environment with the attribute specified by node_name
[2014-01-09 17:37:14 -0500] zxd: how do I call node.chef_environment with knife
[2014-01-09 17:37:25 -0500] zxd: jpoole: but it isn't in any environment
[2014-01-09 17:37:30 -0500] jpoole: yes it is
[2014-01-09 17:37:34 -0500] jpoole: it's in the _default
[2014-01-09 17:37:40 -0500] jaykatta: Hi, chef-server webui displaying  Red Hat Enterprise Linux Test Page, its not displaying actual chef server webui? how to fix this prob?
[2014-01-09 17:37:53 -0500] zxd: jpoole: but where does the node name go there?
[2014-01-09 17:38:04 -0500] zxd: I don't see where the node name is specified in that line
[2014-01-09 17:38:15 -0500] jpoole: zxd that's a sub command
[2014-01-09 17:38:26 -0500] jaykatta: Hi, chef-server webui displaying  Red Hat Enterprise Linux Test Page, its not displaying actual chef server webui? how to fix this prob?
[2014-01-09 17:38:42 -0500] zxd: jpoole: what's a sub command
[2014-01-09 17:38:54 -0500] jpoole: read the docs?
[2014-01-09 17:39:00 -0500] zxd: knife exec sub-command.
[2014-01-09 17:39:00 -0500] zxd: ok
[2014-01-09 17:39:18 -0500] zxd: where is 'nodes.transform("chef_environment:dev") { |n| n.chef_environment("production") }'  where is the node name
[2014-01-09 17:39:37 -0500] jaykatta:  Hi, chef-server webui displaying  Red Hat Enterprise Linux Test Page, its not displaying actual chef server webui? how to fix this prob?
[2014-01-09 17:40:20 -0500] daos: workmad3: just want to say thanks again -- the ohai reload did the trick and now that's a great resource to have in my back pocket.
[2014-01-09 17:40:48 -0500] mvisich: Hello I'm running the open source version of chef at revision Version 10.12.0. I am working on a cookbook using the command line tool shef. When I do a search for all my nodes "members = search("node")" all my nodes are returned. But when i put in an argument like "chef_environment:QA" or "name:windowsbox" I do not get any windows machines to retur
[2014-01-09 17:40:49 -0500] mvisich: n. So in summaray if i dont put and arguments into the search i get windows machines, but if I do no windows machines come back. Any ideas would be great! Thanks!
[2014-01-09 17:42:37 -0500] jaykatta:  Hi, chef-server webui displaying  Red Hat Enterprise Linux Test Page, its not displaying actual chef server webui? how to fix this prob?
[2014-01-09 17:44:01 -0500] helfire: jaykatta: are you sure you're hitting the right port?
[2014-01-09 17:44:06 -0500] workmad3: daos: np, happy I could help
[2014-01-09 17:44:32 -0500] railsraider: anyone knows what casues a //nodes to be append to the chef client when run?
[2014-01-09 17:44:45 -0500] zxd: knife bootstrap nodename -E 'dev' --sudo  !!
[2014-01-09 17:44:48 -0500] zxd: DUH
[2014-01-09 17:44:54 -0500] zxd: dOCS SUCK
[2014-01-09 17:45:05 -0500] workmad3: zxd: knife bootstrap -h ftw :P
[2014-01-09 17:45:15 -0500] zxd: -h ?
[2014-01-09 17:45:18 -0500] workmad3: help
[2014-01-09 17:46:00 -0500] zxd: 'set for a node' on essential_environment docs
[2014-01-09 17:46:07 -0500] zxd: 'By editing the environment configuration details in the knife.rb file and then using the knife bootstrap subcommand to bootstrap the changes to the specified environment'
[2014-01-09 17:46:17 -0500] zxd: I didn't edit any knife.rb
[2014-01-09 17:46:24 -0500] jaykatta: how to check on which port it is hitting?
[2014-01-09 17:46:35 -0500] helfire: my chefspec outputs info from chef-solo and some other warnings, is there a way to make it quieter?
[2014-01-09 17:46:59 -0500] jaykatta: @helfire: how to check on which port it is hitting?
[2014-01-09 17:47:20 -0500] helfire: in your webbrowser, did you specify a port?
[2014-01-09 17:47:25 -0500] jaykatta: no
[2014-01-09 17:47:41 -0500] helfire: are you using the opensource chef or enterprise?
[2014-01-09 17:47:48 -0500] jaykatta: opensource chef
[2014-01-09 17:47:59 -0500] zxd:  . /etc/chef/client.rb  wasn't updated with new environment have no idea where the node is pulling its environment setttings
[2014-01-09 17:48:15 -0500] jaykatta: helfire: opensource chef
[2014-01-09 17:49:01 -0500] helfire: jaykatta: i've not used it, but it sounds like you have apache running on port 80, and i'mnot sure how to check chefservers port, you may just want to shutdown apache and restart chefweb
[2014-01-09 17:49:34 -0500] workmad3: jaykatta: try hitting https instead of http
[2014-01-09 17:50:05 -0500] workmad3: the chef server setup generates self-signed ssl certificates and sets up on https ports by default nowadays
[2014-01-09 17:50:06 -0500] helfire: that too
[2014-01-09 17:50:25 -0500] jaykatta: i have given https only
[2014-01-09 17:50:43 -0500] workmad3: jaykatta: so what's the URL you're hittng?
[2014-01-09 17:50:46 -0500] helfire: forgot about that :)
[2014-01-09 17:51:32 -0500] jaykatta: helfire: thanks it works, apache was running on my chef-server, i have turned it off, now its dislaying webui, thanks
[2014-01-09 17:51:44 -0500] helfire: cool
[2014-01-09 17:51:59 -0500] workmad3: there we go :)
[2014-01-09 17:52:07 -0500] helfire: http://pastebin.com/GSrKMkpW <any way to make chefspec more quiet, or are those WARNs i should address
[2014-01-09 17:53:28 -0500] workmad3: helfire: they look like things you may want to address
[2014-01-09 17:53:47 -0500] workmad3: helfire: only one of them is a chef warning though
[2014-01-09 17:54:48 -0500] workmad3: helfire: is that your logrotate cookbook, or a community one btw?
[2014-01-09 17:55:03 -0500] helfire: community
[2014-01-09 17:55:26 -0500] helfire: openresty installs logrotate
[2014-01-09 17:55:26 -0500] helfire: i'm just wrapping openresty to give it my defaults
[2014-01-09 17:56:08 -0500] workmad3: hmm... it's throwing ruby warnings through chefspec as it's setting constants (and then chefspec ends up loading the file repeatedly for separate chef runs)
[2014-01-09 17:59:30 -0500] mattupstate: i keep getting "Called 'load' without the :safe option -- defaulting to safe mode." when running knife commands...
[2014-01-09 17:59:37 -0500] mattupstate: tried upgrading my plugins 'n such...
[2014-01-09 17:59:42 -0500] mattupstate: can't seem to find the culprit
[2014-01-09 18:00:02 -0500] helfire: mattupstate: I just had that happen with guard too, donno what that is
[2014-01-09 18:01:53 -0500] BryanWB: ohai chefs!
[2014-01-09 18:02:17 -0500] BryanWB: anybody know if there is a ruby gem that wraps mdadm?
[2014-01-09 18:02:32 -0500] mattupstate: helfire: yeahi just stumbled across this https://github.com/PhilT/app_conf/issues/1
[2014-01-09 18:02:42 -0500] mattupstate: i upgraded app_conf but it didn't fix anything
[2014-01-09 18:03:11 -0500] zxd: does anyone know if in addition to defining users in databags I also need to put stuff in recepie for users cookbook?
[2014-01-09 18:03:28 -0500] zxd: also are all variables in databags available to all nodes automatically?
[2014-01-09 18:03:54 -0500] mattupstate: zxd: you just have to include the default users recipe in your run list
[2014-01-09 18:03:58 -0500] c_t: BryanWB: this work? https://github.com/evilmartians/chef-mdadm
[2014-01-09 18:04:07 -0500] mattupstate: and variables in databags are not available on all nodes
[2014-01-09 18:04:21 -0500] mattupstate: you have to explicitly load the databag items in your recipes
[2014-01-09 18:04:42 -0500] zxd: what's the syntax? for loading databag?
[2014-01-09 18:07:09 -0500] martinezaw: hello
[2014-01-09 18:07:17 -0500] mattupstate: zxd: refer to the docs
[2014-01-09 18:08:06 -0500] martinezaw: does anyone know how to set the interval for chef-client running as windows service??
[2014-01-09 18:08:24 -0500] geggam: -- linked in -- DevOps Engineer needed! San Francisco $175,000
[2014-01-09 18:08:33 -0500] geggam: i need a raise
[2014-01-09 18:09:46 -0500] zxd: they don't say in http://docs.opscode.com/essentials_data_bags.html
[2014-01-09 18:13:17 -0500] zxd: how do load it in a runlist
[2014-01-09 18:13:39 -0500] mvisich: @zxd data = data_bag_item('name', 'Item')
[2014-01-09 18:14:09 -0500] zxd: I don't want a specific Item I want all the items to be loaded
[2014-01-09 18:14:15 -0500] zxd: in the runlist
[2014-01-09 18:14:21 -0500] zxd: available for a recepie
[2014-01-09 18:15:11 -0500] zxd: I thought the users cookbook automatically loaded the databags
[2014-01-09 18:15:21 -0500] adnichols: zxd: that's not how data bags work
[2014-01-09 18:15:23 -0500] helfire: not sure what you mean by in the runlist, but there are examples on that page
[2014-01-09 18:15:37 -0500] helfire: data_bag("users").each do |id|
[2014-01-09 18:15:44 -0500] adnichols: zxd: data bags are intended to be loaded from a recipe or a resource provider
[2014-01-09 18:15:45 -0500] helfire: my_user = data_bag_item("user", id)
[2014-01-09 18:15:57 -0500] helfire: end
[2014-01-09 18:16:09 -0500] helfire: do what you will in the loop
[2014-01-09 18:16:24 -0500] helfire: typo, user=users on 2nd line :)
[2014-01-09 18:16:25 -0500] zxd: what
[2014-01-09 18:17:07 -0500] mattupstate: zxd: sounds like you have some more learning to do
[2014-01-09 18:17:13 -0500] helfire: databags are for data driven recipes, so if you want to store the data in a bag, go through them or search them, then use that data in your recipe, thats how you do it.
[2014-01-09 18:17:21 -0500] zxd: adnichols: ok so dosen't users cookbook resource provider load the right databags I set in the attribute/ folder of the cookbook?
[2014-01-09 18:17:48 -0500] zxd: helfire: yes but some cookbooks already do that no?
[2014-01-09 18:17:54 -0500] zxd: helfire: like the users cookbook ?
[2014-01-09 18:17:57 -0500] helfire: sure if your using someone elses
[2014-01-09 18:17:58 -0500] adnichols: zxd: Some cookbooks load a specific data bag
[2014-01-09 18:18:05 -0500] zxd: that's what I am saying
[2014-01-09 18:18:06 -0500] helfire: you can go look at the cookbook and see what it's doing
[2014-01-09 18:18:14 -0500] zxd: they even have an attribute to specify the databag name
[2014-01-09 18:18:21 -0500] zxd: it's all there
[2014-01-09 18:18:31 -0500] adnichols: zxd: users may - no idea which one you are using, but it only loads the data bags it needs and those data bags aren't available to other recipes unless the values there are assigned to attributes
[2014-01-09 18:19:14 -0500] adnichols: zxd: Don't think of it as "loading" a data bag - think of it as reading the values of a data bag into a var in that recipe
[2014-01-09 18:19:23 -0500] zxd: adnichols: correct, so I did include_recepie users in my wrapper cookbook but it didn't do anything anyway to debug the knife bootstrap run
[2014-01-09 18:19:50 -0500] adnichols: zxd: I have no idea what question you are asking at this point
[2014-01-09 18:20:00 -0500] zxd: include_recipe 'users'
[2014-01-09 18:20:03 -0500] zxd: ok
[2014-01-09 18:20:55 -0500] zxd: include_recipe 'users'  is in my recipies/default.rb  wrapper cookbook  I put all databags items loaded them etc like they say in the users cookbook
[2014-01-09 18:21:07 -0500] zxd: I added my wrapper cookbook to the runlist
[2014-01-09 18:21:10 -0500] mattupstate: helfire: it seems to be app_conf, i thought i upgraded, but it wasn't enabled in my ruby env
[2014-01-09 18:21:11 -0500] zxd: it didn't do anything
[2014-01-09 18:21:14 -0500] adnichols: zxd: note the usage for that cookbook - if you just include the recipe 'users' you only get the LWRP - it doesn't do anything unless you call the resource provider
[2014-01-09 18:21:28 -0500] zxd: ahh
[2014-01-09 18:21:32 -0500] zxd: I see
[2014-01-09 18:21:33 -0500] adnichols: There's an example recipe 'users::sysadmins' which does just that
[2014-01-09 18:22:03 -0500] helfire: zxd: # Empty default recipe for including LWRPs. :p https://github.com/opscode-cookbooks/users/blob/master/recipes/default.rb
[2014-01-09 18:22:26 -0500] helfire: you can just depends on it in metadata and use the lwrp i belive
[2014-01-09 18:23:10 -0500] mattupstate: am i crazy, or is knife 11.8 a lot faster than 11.6?
[2014-01-09 18:23:33 -0500] workmad3: helfire: you're right, but I think that used to be different
[2014-01-09 18:24:02 -0500] zxd: I don't know I am confused now, it called users_manage  for sysadmin user  creation , so I need to specify all my users in the recipe in addition to the databags?
[2014-01-09 18:26:30 -0500] helfire: zxd: yes, i think so, just loop through them like my example above and call users_manage id or whatever the sytanx is
[2014-01-09 18:26:46 -0500] workmad3: zxd: no
[2014-01-09 18:27:26 -0500] workmad3: zxd: the users_manage resource takes a databag name as one of its attributes, which it will then use to load the items in the databag and create the users from there
[2014-01-09 18:27:57 -0500] workmad3: zxd: you can also specify to only create users from that databag that are in certain groups, etc
[2014-01-09 18:28:03 -0500] helfire: workmad3: ahh didnt know that, just scanned the code (too quickly)
[2014-01-09 18:28:04 -0500] workmad3: (if I'm reading the README correctly)
[2014-01-09 18:29:37 -0500] zxd: workmad3: so how to use users_manage resource?  users_manage users     ?
[2014-01-09 18:29:42 -0500] zxd: in the recipie
[2014-01-09 18:29:50 -0500] adnichols: zxd: note that users_manage relies on the groups attribute of the user - so if you specify a group (sysadmins) it'll create each user in that group
[2014-01-09 18:30:11 -0500] adnichols: The lwrp call is for a given group - the data bag search finds all users in that group
[2014-01-09 18:30:45 -0500] zxd: why do that like this it takes a group name as argument for searching the users to create?
[2014-01-09 18:31:04 -0500] workmad3: zxd: I'm guessing because that's how opscode organised their user databags
[2014-01-09 18:31:07 -0500] adnichols: That's how it works - I don't use it because that approach is inherently limiting
[2014-01-09 18:31:29 -0500] maruq: hi guys
[2014-01-09 18:31:32 -0500] workmad3: zxd: only use the cookbook if it fits with your way of doing things
[2014-01-09 18:31:39 -0500] workmad3: zxd: if it doesn't, don't bother
[2014-01-09 18:31:57 -0500] adnichols: if you have users in multiple groups you start to have problems with each definition of the lwrp removing users from previous group definitions
[2014-01-09 18:32:02 -0500] maruq: is this the correct channel for questions about test-kitchen, or is there a preferred one?
[2014-01-09 18:32:32 -0500] spheromak: maruq there is a #kitchenci
[2014-01-09 18:33:16 -0500] maruq: spheromak: great, thanks. just didn't want to flood the wrong channel ;)
[2014-01-09 18:33:16 -0500] adnichols: zxd: If you need to add users - chef natively supports a 'user' resource
[2014-01-09 18:33:58 -0500] zxd: adnichols: but I need to add support for handling ssh keys ... ?
[2014-01-09 18:34:17 -0500] adnichols: you would have to do that on your own - there are some pretty easy ways to solve that
[2014-01-09 18:34:32 -0500] adnichols: or you can use the users cookbook - up to you
[2014-01-09 18:34:33 -0500] zxd: I know, but not for a chef/ruby beginner
[2014-01-09 18:34:41 -0500] adnichols: do what you are comfortable with
[2014-01-09 18:35:01 -0500] adnichols: I'm just explaining your options & limitations
[2014-01-09 18:35:12 -0500] zxd: yes I know thank you
[2014-01-09 18:48:23 -0500] CPS: i'm having trouble getting the subversion resource working on windows
[2014-01-09 18:48:29 -0500] CPS: it doesn't seem to do anything
[2014-01-09 18:48:41 -0500] CPS: i've got tortoise installed and can export via command line
[2014-01-09 18:48:49 -0500] CPS: but chef gets me nothing
[2014-01-09 18:48:53 -0500] tlr00: Real bizarre, the @nodes variable is not working in my recipe. Anyone have this issue in their erb files?
[2014-01-09 18:49:15 -0500] tlr00: Tried printing the results from the erb itself, no avail. However, @roles does work...
[2014-01-09 18:49:54 -0500] helfire: tlr00: isnt it just node? unless your passing in a nodes object
[2014-01-09 18:50:13 -0500] tlr00: nodes object, I am trying to pull all hostnames from the object itself.
[2014-01-09 18:50:23 -0500] tlr00: It isn't a local variable...
[2014-01-09 18:51:19 -0500] helfire: tlr00, so are you creating that and passing it in? all you have at runtime is the node unless you do a search
[2014-01-09 18:52:14 -0500] tlr00: I definitely need to do a search
[2014-01-09 18:52:24 -0500] helfire: :D
[2014-01-09 18:52:40 -0500] tlr00: let me make sure that is actually working -
[2014-01-09 18:52:47 -0500] helfire: just pass that into the template varaibles ( nodes nodesearch ) and all should work
[2014-01-09 18:52:58 -0500] tlr00: You're like a second brain or something!
[2014-01-09 18:53:03 -0500] tlr00: Ok cool thank you
[2014-01-09 18:53:32 -0500] pwelch: Is there a way to check the version of a cookbook that is being used inside a recipe? Example my_face uses nginx cookbook but in my_face::default I want to change logic based on the nginx cookbook version
[2014-01-09 18:53:44 -0500] tlr00: helfire: Thank you.
[2014-01-09 18:54:33 -0500] helfire: pwelch: you can log run_context.cookbook_collection[cookbook_name].metadata.version
[2014-01-09 18:54:55 -0500] helfire: and to be very meta:
[2014-01-09 18:54:56 -0500] helfire:  24 cb_name = run_context.cookbook_collection[cookbook_name].metadata.name
[2014-01-09 18:54:56 -0500] helfire:  25 cb_version = run_context.cookbook_collection[cookbook_name].metadata.version
[2014-01-09 18:55:28 -0500] helfire: err whoops :) but cb_name is just the name of the cookbook
[2014-01-09 18:56:42 -0500] pwelch_: helfire: Did not think to use run_context. That should do it though.
[2014-01-09 18:56:50 -0500] kevinburke: Hello
[2014-01-09 18:57:02 -0500] kevinburke: I'm trying to use this cookbook to grant a mysql user access to a few different databases
[2014-01-09 18:57:20 -0500] kevinburke: via node[:databases].each |database| do mysql_database_user "user" do ... end end
[2014-01-09 18:57:40 -0500] kevinburke: however i'm getting a ton of "Cloning resource attributes for mysql_database_user[user] from prior resource" errors
[2014-01-09 18:57:46 -0500] kevinburke: er, warnings
[2014-01-09 18:58:03 -0500] kevinburke: which suggests there's something else I should be doing instead, what should I be doing differently there?
[2014-01-09 18:58:09 -0500] kevinburke: Sorry, this cookbook: https://github.com/opscode-cookbooks/database
[2014-01-09 19:00:45 -0500] Sauraus: hi there
[2014-01-09 19:01:05 -0500] Sauraus: What is the easiest way to add a node to a specific environment when running 'knife bootstrap'?
[2014-01-09 19:02:00 -0500] troyready: -E "prod"
[2014-01-09 19:02:10 -0500] troyready: (or -E "yourenvironment")
[2014-01-09 19:03:50 -0500] Sauraus: that easy? The -E option is not documented anywhere on the opscode webpages http://docs.opscode.com/knife_bootstrap.html
[2014-01-09 19:05:15 -0500] queuetip: Sauraus: knife exec -E nodes.transform(chef_environment:_default) { |n| n.chef_environment(production-VM) } to change from default env to a different env
[2014-01-09 19:05:29 -0500] queuetip: Sauraus: to add a role to an env: knife exec -E 'nodes.transform("chef_environment:my-production-env") {|n| puts n.run_list << "role[hosts_file]"; n.save }'
[2014-01-09 19:06:26 -0500] troyready: Sauraus, huh, yeah, you're right. Funny that the page doesn't have it, it's not like it was recently added
[2014-01-09 19:06:56 -0500] c_t: pretty sure it's listed with knife boostrap --help
[2014-01-09 19:07:14 -0500] troyready: Sauraus, a good opportunity to contribute to Chef if you'd like to fix it: docs are located at https://github.com/opscode/chef-docs -- just fork, fix, and submit a pull request
[2014-01-09 19:10:53 -0500] helfire: troyready: https://github.com/opscode/chef-docs/blob/master/chef_master/source/knife_bootstrap.rst != http://docs.opscode.com/knife_bootstrap.html
[2014-01-09 19:11:13 -0500] helfire: be nice if there was  a "fork this page" at the bottom to go right to the gh page
[2014-01-09 19:12:27 -0500] troyready: yeah, I agree, the barrier to entry does feel a little too high
[2014-01-09 19:13:06 -0500] troyready: (admittedly, I haven't contributed anything to the docs project; it wasn't around when I was learning Chef)
[2014-01-09 19:13:09 -0500] nowthatsamatt: can i add an ebs volume with chef?
[2014-01-09 19:13:13 -0500] nowthatsamatt: knife ec2 something?
[2014-01-09 19:14:22 -0500] juliancdunn: nowthatsamatt: if you use the aws cookbook, it has an ebs_volume resource that'll do it for you
[2014-01-09 19:14:25 -0500] sanguisdex: is there a way to bring an existing MySQL install under chef control a Debian box w/o the slew of errors that gets when trying to bootstrap the server with a chef runlist
[2014-01-09 19:14:41 -0500] nowthatsamatt: thanks
[2014-01-09 19:18:28 -0500] mleong: hi, I'm having a postgresql issue w/ enterprise chef. Getting this error on the postgres log:  password authentication failed for user "opscode_chef"
[2014-01-09 19:19:23 -0500] mleong: I've setup chef using the instructions at http://docs.opscode.com/install_server_fe.html
[2014-01-09 19:22:19 -0500] juliancdunn: mleong: if you're an enterprise customer you can contact support & they'll be able to help you
[2014-01-09 19:22:39 -0500] notromda1: Getting ready to put a mysql database into my current cookbook recipe   I think it looks like I need the database and mysql cookbooks, right?   Does this install mysql, or does the package need to be installed via package first?
[2014-01-09 19:23:10 -0500] juliancdunn: sanguisdex: sure, you could write your own mysql cookbook that 'emulates' the current state of the box and use that
[2014-01-09 19:23:38 -0500] juliancdunn: notromda1: the mysql cookbook has a server recipe that'll stand up mysqld for you
[2014-01-09 19:24:18 -0500] notromda1: Does it use the distro package, or download source?
[2014-01-09 19:25:16 -0500] juliancdunn: notromda1: distro package
[2014-01-09 19:25:26 -0500] notromda1: cool.
[2014-01-09 19:25:59 -0500] notromda1: Reading the "Chef Infrastructure Cookbook" on it now.   Very helpfull.
[2014-01-09 19:26:37 -0500] notromda1:      Automation  ^
[2014-01-09 19:29:12 -0500] nowthatsamatt: juliancdunn: what would be the best way to create and attach a volume?  can you pull the instance_id on knife ec2 server create and use it in the recipes?
[2014-01-09 19:30:44 -0500] juliancdunn: nowthatsamatt: that's actually what the resource will do
[2014-01-09 19:30:54 -0500] juliancdunn: have a look at https://github.com/opscode-cookbooks/aws and search for aws_ebs_volume to see some examples
[2014-01-09 19:31:47 -0500] nowthatsamatt: oh nice thanks
[2014-01-09 19:34:34 -0500] zanshin: I have this role created on my local workstation (http://pastebin.com/jVn9y1pv). However when I try to upload it via knife I get a failed to write: Parse error reading JSON error.
[2014-01-09 19:35:56 -0500] zanshin: I've tried both .json and .rb file types but I can't seem to get Chef to accept this role.
[2014-01-09 19:36:56 -0500] juliancdunn: use ':' instead of '=>' in JSON
[2014-01-09 19:37:12 -0500] juliancdunn: paste it into jsonlint.com and you'll see where your errors are
[2014-01-09 19:38:08 -0500] zanshin: NIce. Didn't know about jsonlint.com. Thanks
[2014-01-09 19:44:47 -0500] zanshin: Alright. Now that I've got the node loaded, how to I assign it to a node?
[2014-01-09 19:47:04 -0500] zanshin: nevermind Not obvious that you can add roles to the run-list in the webinterface.
[2014-01-09 19:48:14 -0500] daos: if i'm moving a node to a new chef server is it enough to just change the URL in /etc/chef/client.rb ?
[2014-01-09 19:48:22 -0500] daos: for some reason ithink that file will reset itself
[2014-01-09 19:48:27 -0500] kewubenduben: what's the best way to detect/identify the public facing network interface? some hosting providers doesn't start with eth0
[2014-01-09 19:50:31 -0500] CPS: http://stackoverflow.com/questions/21029766/downloading-a-file-from-svn-using-chef-on-windows
[2014-01-09 19:53:33 -0500] satishpatil: Hi
[2014-01-09 19:54:23 -0500] jidar: CPS: does the subversion cookbook even do the install like that?
[2014-01-09 19:54:36 -0500] CPS: i just need to download it jidar
[2014-01-09 19:54:45 -0500] CPS: that's all that block is trying to do
[2014-01-09 19:54:52 -0500] jidar: wait
[2014-01-09 19:55:07 -0500] CPS: inside my svn repo there's an MSI i need
[2014-01-09 19:55:17 -0500] CPS: i'm trying to copy it locally
[2014-01-09 19:55:24 -0500] jidar: dear god why is it in a repo
[2014-01-09 19:55:38 -0500] CPS: it's generated by a build server
[2014-01-09 19:55:51 -0500] jidar: also, use c:/foo/ for the path on windows
[2014-01-09 19:56:09 -0500] CPS: i've experimented with windows paths, / or \\ both work
[2014-01-09 19:59:40 -0500] CPS: and jidar this is just my initial use case, i'll need to pull all kinds of things out of svn
[2014-01-09 20:02:12 -0500] satishpatil: I am new to chef. I appreciate any help. I want to bootstrap windows machine. I don't have SSH service on that machine. I installed starter kit and copied validator.pem from another machine to c:\chef. chef-client errors out with network error. I can run knife commands like client list. Giw can it be network error I help appreciated
[2014-01-09 20:02:38 -0500] CPS: satishpatil: gist.github.com and paste the error
[2014-01-09 20:06:19 -0500] btm: knife code review: join: bit.ly/1eJpg3s watch: bit.ly/1eJphUX
[2014-01-09 20:07:44 -0500] helfire: was just going to ask when the next one was, i hadnt seen it in a while
[2014-01-09 20:10:10 -0500] satishpatil: CPS pasted the error https://gist.github.com/anonymous/db4c62af44b5e77a0dd5
[2014-01-09 20:10:43 -0500] CPS: find  C:/chef/cache/chef-stack
[2014-01-09 20:10:48 -0500] CPS: paste what it dumped
[2014-01-09 20:12:13 -0500] helfire: i dont like that if you join the live hangouts it doesnt start when the stream starts, was sitting on waiting for broadcast to start for a few min heh
[2014-01-09 20:14:07 -0500] zanshin: I'm using remote_file to grab a deployment artifact from Artifactory. If I run a wget against the artifact URL on the VM it works. The remote_file resource returns a 403 Forbidden however. I suspect there's a redirect in the middle of the process. Does anyone know if remote_file handles redirects gracefully?
[2014-01-09 20:15:43 -0500] y123: hello all. http://docs.opscode.com/server_security.html says to put the certs in taht directory and so forth -- on open source chef -- but where do i call the certs out? it keeps using the localhost certs instead?
[2014-01-09 20:16:02 -0500] y123: for the chef gui.
[2014-01-09 20:18:02 -0500] y123:  this file /var/opt/chef-server/nginx/etc/chef_https_lb.conf just gets overwritten when i change the certs.
[2014-01-09 20:19:22 -0500] btm: y123: edit /etc/chef-server/chef-server.rb, put in the nginx lines listed under "Add Custom SSL Certificates" on the page you linked to, and run "sudo chef-server-ctl reconfigure"
[2014-01-09 20:20:52 -0500] y123: @btm: thank you
[2014-01-09 20:22:15 -0500] satishpatil: CPS stack trace https://gist.github.com/anonymous/2371c7842003aa4bfbeb
[2014-01-09 20:26:30 -0500] shlant: if you have a template that only contains a variable, it it better to just create the file and overwrite w/ variable, or to keep the template and pass in the variable?
[2014-01-09 20:28:24 -0500] borntyping: shlant: `file 'filename' do content(variable) end`
[2014-01-09 20:29:10 -0500] shlant: borntyping: defintiely seems like that's the easiest way, but is there a benefit to the template?
[2014-01-09 20:29:11 -0500] CPS: satishpatil: what was the http return code you got?
[2014-01-09 20:29:59 -0500] satishpatil: CPS: where can i find http return code
[2014-01-09 20:30:05 -0500] borntyping: shlant: not at all - if you find you need templating later on, change it to a template then
[2014-01-09 20:30:13 -0500] CPS: i don't know i figured it would have printed it
[2014-01-09 20:31:01 -0500] satishpatil: it did not print it http return code
[2014-01-09 20:31:05 -0500] shlant: borntyping: sounds good, thanks
[2014-01-09 20:31:48 -0500] CPS: well there's a warning in there about ipv6, maybe look at that?
[2014-01-09 20:32:48 -0500] satishpatil: CPS: is it required to bootstrap through knife or installing starter kit is good enough to bootstrap
[2014-01-09 20:33:00 -0500] CPS: no idea, sorry
[2014-01-09 20:39:27 -0500] dgarstang1: Anyone using https://github.com/anl/kitchen-gce ?
[2014-01-09 20:41:50 -0500] helfire: what vim plugin was he just using in the code review to find files with autocomplete?
[2014-01-09 20:42:13 -0500] j^2: helfire: that's emacs iirc
[2014-01-09 20:42:23 -0500] helfire: oh yep
[2014-01-09 20:42:39 -0500] helfire: hard to see
[2014-01-09 20:44:28 -0500] SWNA\lombd007: What is the method for returning a list of nodes within an environment and/or role from within a recipe?
[2014-01-09 20:44:34 -0500] CPS: what is the syntax to execute a recipe from within another recipe?
[2014-01-09 20:45:13 -0500] SWNA\lombd007: include_recipe "cookbook::recipe"
[2014-01-09 20:45:13 -0500] cwj: CPS: include_recipe cookbook::recipe'
[2014-01-09 20:45:29 -0500] CPS: can i do that inside an if block?
[2014-01-09 20:45:40 -0500] SWNA\lombd007: Yes.
[2014-01-09 20:45:47 -0500] SWNA\lombd007: Or a case statement.
[2014-01-09 20:46:03 -0500] cwj: SWNA\lombd007: to find other nodes you want search http://docs.opscode.com/essentials_search.html
[2014-01-09 20:46:07 -0500] SWNA\lombd007: Ugh my nickname.
[2014-01-09 20:46:13 -0500] Dairenn: (Sorry about that.)
[2014-01-09 20:47:05 -0500] Dairenn: I think this makes sense.
[2014-01-09 20:47:28 -0500] dgarstang1: kitchen fails to start vm. Logs show me a backtrace which is the same as what the console showed me. That's not particularly helpful.
[2014-01-09 20:47:57 -0500] joecrow: Is it possible to enable diffs for chef-solo runs? I see an option `diff_disabled` for client.rb, but not something similar for solo.rb
[2014-01-09 20:48:22 -0500] helfire: chef-solo shows diffs
[2014-01-09 20:49:20 -0500] joecrow: hmm, I'm on 11.4.4is it a new thing?
[2014-01-09 20:49:25 -0500] Majost: How does one require chef_zero/server using zero bundled with 11.8.x
[2014-01-09 20:49:41 -0500] helfire: joecrow: no, i thought it always had, even in .10
[2014-01-09 20:51:26 -0500] Majost: ignore that question.. I was using the wrong rvm gemset when I tried it in irb.
[2014-01-09 20:51:29 -0500] Majost: heh
[2014-01-09 20:52:30 -0500] joecrow: hellfire: you're right - I misdiagnosed... seems like they're not making it through from vagrant
[2014-01-09 20:52:40 -0500] jamesgolick: hey - just wondering what the strategy is for using knife with multiple organizations
[2014-01-09 20:53:22 -0500] dgarstang1: dunno why but increasing the log level in test kitchen doesn't actually do anything.
[2014-01-09 20:58:52 -0500] wassy121: jamesgolick: look into knife block
[2014-01-09 20:59:08 -0500] Dairenn: Suppose I use knife search and only want to print the Node Name and nothing else?
[2014-01-09 20:59:33 -0500] jamesgolick: wassy121: thanks!
[2014-01-09 20:59:43 -0500] Dairenn: knife block is cool
[2014-01-09 20:59:44 -0500] wassy121: Dairenn: I just end up using knife exec -E 'nodes.find("*:*").each {|n| puts n["fqdn"]}'
[2014-01-09 20:59:56 -0500] Dairenn: Oh really?
[2014-01-09 20:59:59 -0500] wassy121: rather than trying to parse the weird output of knife search
[2014-01-09 21:00:19 -0500] Dairenn: Yeah I don't want to parse the output, I want to make the query only return one key value.
[2014-01-09 21:00:41 -0500] shlant: jamesgolick: I use knife-block and it does the job
[2014-01-09 21:00:43 -0500] Dairenn: Incidentally, I need the Chef "Node Name" value and not the fqdn.
[2014-01-09 21:00:50 -0500] Dairenn: But...
[2014-01-09 21:01:27 -0500] wassy121: or if I need it in some script:
[2014-01-09 21:01:27 -0500] wassy121:  knife exec -E 'nodes.find("*:*").each {|n| puts "select * from foo where name = '#{n[:name]}'"}'
[2014-01-09 21:01:41 -0500] wassy121: or whatever
[2014-01-09 21:02:45 -0500] jidar: :/, the chef_shell hardly even works on windows
[2014-01-09 21:13:03 -0500] freezee: hi...if chef-server and chef-client are in diff time zones ...how can i avoid error "The request failed because your clock has drifted by more than 15 minutes" during bootstrap
[2014-01-09 21:13:35 -0500] willejs: freezee: run utc on everything
[2014-01-09 21:13:45 -0500] dgarstang1: anyone using kitchen gce?
[2014-01-09 21:15:02 -0500] aliljet: ugh, I'm losing my mind just a little bit -- I'm starting a process on a remote node (using the service resource) and I see the service come up on the remote node, and then the recipe completes, and poof the service is gone
[2014-01-09 21:15:31 -0500] gchristensen: aliljet: how is the process being started?
[2014-01-09 21:15:40 -0500] gchristensen: sounds like its failing on startup
[2014-01-09 21:16:02 -0500] aliljet: initially, I tried to start it with a pure service action :start, but it turns out there's a bug on rhel
[2014-01-09 21:16:03 -0500] adnichols: freezee: different timezones and clock drift are different - I would expect auth to work fine across different timezones
[2014-01-09 21:16:22 -0500] aliljet: so now I'm directly providing the Init provider instead of the provider that chef is guessing the node has
[2014-01-09 21:17:01 -0500] aliljet: that's the part that's weird, I don't think it's failing, I can add a delay and everything stays up
[2014-01-09 21:17:12 -0500] aliljet: but as soon as the recipe ends, poof, there goes my service
[2014-01-09 21:18:48 -0500] aliljet: and I just extended the delay by 30 seconds to test the app after it starts, and it's good to go
[2014-01-09 21:26:58 -0500] geggam: so lazy {}  is a very very good thing..
[2014-01-09 21:27:00 -0500] geggam: thanks guys
[2014-01-09 21:28:07 -0500] geggam: btw that  ^ is serious for those of you who think im being funny :)
[2014-01-09 21:28:08 -0500] dgarstang1: anyone using kitchen gce? Instance not found.
[2014-01-09 21:32:28 -0500] jmickle: *yawn*
[2014-01-09 21:32:31 -0500] jmickle: hows everyone doing
[2014-01-09 21:33:53 -0500] shlant: jmickle: super
[2014-01-09 21:36:59 -0500] jmickle: :-)
[2014-01-09 21:38:14 -0500] matti: Anyone who had the plesure of installing Node.js on Windows?
[2014-01-09 21:38:47 -0500] dgarstang1: anyone using kitchen gce? Instance not found.
[2014-01-09 21:39:00 -0500] jmickle: matti pleasure and node.js don't belong in the same sentence
[2014-01-09 21:39:11 -0500] matti: jmickle: It wanted to be sarcastic ;]
[2014-01-09 21:39:16 -0500] jmickle: ;-)
[2014-01-09 21:39:26 -0500] matti: jmickle: But the question is sadly walid ;/
[2014-01-09 21:39:29 -0500] matti: valid*
[2014-01-09 21:39:30 -0500] jmickle: http://community.opscode.com/cookbooks/nodejs-windows
[2014-01-09 21:40:01 -0500] matti: jmickle: Yeah, I know. I was wondering if people observed a very odd issue I am seeing.
[2014-01-09 21:40:08 -0500] jmickle: oh
[2014-01-09 21:40:11 -0500] jmickle: in that case I'm out
[2014-01-09 21:40:12 -0500] jmickle: haha
[2014-01-09 21:40:15 -0500] matti: With the MSI itself.
[2014-01-09 21:40:17 -0500] matti: jmickle: Haha
[2014-01-09 21:40:24 -0500] jmickle: node.js is an odd issue in itself
[2014-01-09 21:40:42 -0500] matti: ;]
[2014-01-09 21:40:58 -0500] jmickle: but I'm sure the JS kids will just make another port and name it something new, post a hacker-news article about it and it will be the new engineering standard
[2014-01-09 21:41:12 -0500] jmickle: angluar-bone-js
[2014-01-09 21:41:15 -0500] jmickle: (patent pending)
[2014-01-09 21:41:28 -0500] matti: I was also wondering if someone knows in what context Chef runs on Windows? Is it Admin? Or something else?
[2014-01-09 21:41:33 -0500] matti: jmickle: Haha
[2014-01-09 21:45:54 -0500] coderanger: matti: Depends entirely on how you run it
[2014-01-09 21:47:40 -0500] matti: coderanger: Hm? With chef-client.
[2014-01-09 21:47:50 -0500] matti: coderanger: Box standard install.
[2014-01-09 21:47:53 -0500] coderanger: matti: Yes, how are you running chef-client?
[2014-01-09 21:48:02 -0500] coderanger: service, scheduled job, etc?
[2014-01-09 21:49:04 -0500] matti: coderanger: By manually running chef-client.bat
[2014-01-09 21:49:26 -0500] matti: I guess I need to find out how its being run during bootstraping.
[2014-01-09 21:49:28 -0500] coderanger: matti: Then it is running as you
[2014-01-09 21:49:40 -0500] matti: coderanger: I run it in Admin context.
[2014-01-09 21:49:48 -0500] coderanger: Then that :-)
[2014-01-09 21:49:56 -0500] coderanger: Chef does nothing special, however you run it is how it runs
[2014-01-09 21:50:00 -0500] matti: OK.
[2014-01-09 21:50:23 -0500] gchristensen: coderanger: Chef should use one of those leaked NSA vulnerabilities to switch to root nomatter what
[2014-01-09 21:50:46 -0500] matti: Haha
[2014-01-09 21:50:55 -0500] geggam: it does for me ?
[2014-01-09 21:51:10 -0500] dgarstang1: how about kitchen-ec2? Anyone using that? Don't know about it, but with the gce one, it fails and provides 0 info about why
[2014-01-09 22:03:08 -0500] freezee: <adnichols> http://docs.opscode.com/install_server_pre.html....as per ntp section, clocks should be in sync
[2014-01-09 22:03:57 -0500] coderanger: freezee: Chef does all timestamp stuff in UTC, are the actual timezones on the two machines configured correctly?
[2014-01-09 22:04:08 -0500] coderanger: (as opposed to being set to UTC with different actual times)
[2014-01-09 22:11:10 -0500] dgarstang1: What gemfile do I need to kitchen-ec2? Not documented
[2014-01-09 22:14:13 -0500] coderanger: dgarstang1: Why would you need a gemfile?
[2014-01-09 22:14:29 -0500] dgarstang1: coderanger: I thought that was required. I dunno. it's required for the GCE one
[2014-01-09 22:14:43 -0500] dgarstang1: "Message: Could not load the 'ec2' driver from the load path. Please ensure that your driver is installed as a gem or included in your Gemfile if using Bundler."
[2014-01-09 22:14:54 -0500] dgarstang1: ^ that too
[2014-01-09 22:14:57 -0500] coderanger: dgarstang1: No, you just need to install the gem (in both cases)
[2014-01-09 22:15:04 -0500] coderanger: a common way to do that is with bundler
[2014-01-09 22:15:08 -0500] coderanger: but it is by no means required
[2014-01-09 22:15:08 -0500] dgarstang1: kk, that's done then
[2014-01-09 22:15:32 -0500] dgarstang1: gem list => "kitchen-ec2 (0.7.0)"
[2014-01-09 22:15:40 -0500] coderanger: Note that if you _do_ have a Gemfile in a folder, it alters how gems are loaded such that you would have to add it to the gemfile
[2014-01-09 22:15:45 -0500] dgarstang1: and kitchen-vagrant (0.14.0) and test-kitchen (1.1.1, 1.0.0)
[2014-01-09 22:15:50 -0500] coderanger: basically bundler creates virtualenvs on the fly
[2014-01-09 22:16:00 -0500] coderanger: so if that file exists, only things listed in it show up
[2014-01-09 22:16:08 -0500] coderanger: (example, run `bundle exec gem list`)
[2014-01-09 22:16:15 -0500] dgarstang1: it also failed with the same error the first time before I created a gemfile
[2014-01-09 22:16:42 -0500] dgarstang1: Thought I'd try kitchen-ec2 since kitchen-gce was going nowhere fast
[2014-01-09 22:17:11 -0500] dgarstang1: oh nice. it's caused a conflict
[2014-01-09 22:30:59 -0500] moted: is there a defacto standard chef rubucop.yml anywhere?
[2014-01-09 22:31:34 -0500] moted: I see a lot of different ones in various cookbooks, just wondering if there is a base set criteria...
[2014-01-09 22:31:44 -0500] wickett: if I am installing some software that requires user interaction, what is the chef way of doing that
[2014-01-09 22:31:46 -0500] Brad811_: When cloning Github repo using an ssh key (that is registered as a deploy key on Github) that has no passphrase, I am still prompted for a passphrase when I run chef-client locally, where I just have to hit enter. This is causing chef to freeze when run remotely.
[2014-01-09 22:31:53 -0500] wickett: expect script? or something else?
[2014-01-09 22:32:34 -0500] moted: Brad811_: https://sethvargo.com/add-ssh-known-hosts-with-chef/
[2014-01-09 22:33:02 -0500] Brad811_: I am already manually adding github to my known hosts
[2014-01-09 22:33:22 -0500] Brad811_: it is prompting me for the passphrase to unlock my key file, which doesn't have a passphrase
[2014-01-09 22:33:59 -0500] geggam: sudo no passwd ?
[2014-01-09 22:34:03 -0500] Wrapping: Brad - Do you see the same behavior when running git clone from the command line?
[2014-01-09 22:34:39 -0500] Brad811_: let me try that out
[2014-01-09 22:36:03 -0500] wickett: anyone have experience installing software that needs interaction/user input via chef? did you just do an expect script or something cooler?
[2014-01-09 22:36:32 -0500] gchristensen: wickett: what kind of user interaction does it need? what program is it?
[2014-01-09 22:37:20 -0500] Brad811_: a little more info, i'm using an ssh wrapper that looks like: /usr/bin/env ssh -i "/home/user/.ssh/id_rsa.pub" $1 $2
[2014-01-09 22:37:33 -0500] wickett: gchristensen: console key press... press y to accept the license, ... yada yada
[2014-01-09 22:37:38 -0500] wassy121: some programs you can config-code the variables it's looking for, more esoteric programs may indeed require an expect script
[2014-01-09 22:38:07 -0500] gchristensen: wickett: is this with like ... yum, or apt?
[2014-01-09 22:38:13 -0500] wassy121: if it's just one line, or something, you can sometimes run:
[2014-01-09 22:38:13 -0500] wassy121: yes "y" | program
[2014-01-09 22:39:46 -0500] Wrapping: Brad - Should the ssh -i point to the private key?
[2014-01-09 22:39:50 -0500] wickett: gchristensen: no it is licensed program we are installing, not a package... it needs us to accept the legal agreement and tell it where to go
[2014-01-09 22:40:26 -0500] gchristensen: gotcha. yeah, expect or wassy121's suggestios of `yes` might be the way to go
[2014-01-09 22:40:41 -0500] Brad811_: Wrapping: i'll see what happens
[2014-01-09 22:40:56 -0500] wickett: gchristensen: ok, thats fair enough, do you just put that as a script resource
[2014-01-09 22:41:00 -0500] wickett: in chef
[2014-01-09 22:41:24 -0500] wassy121: or an execute resource.
[2014-01-09 22:41:38 -0500] wickett: gchristensen wassy121 thanks for your help
[2014-01-09 22:41:44 -0500] btm: Brad811_: yes, -i should provide a private key.
[2014-01-09 22:42:18 -0500] ryker: i'm having a weird problem with my private chef server. I have a rather long chef run as it waits for an ebs volume to be formatted. After it finishes formatting, the chef run continues and I'll get a 403 forbidden error when the client tries to get a template file. If I run chef-client again, it gets that template file just fine and finishes.
[2014-01-09 22:43:37 -0500] geggam: if anyone has a chicken egg problem of needing a variable from one recipe to populate a following recipe during the initial knife ec2 create the solution is to have a node.override attribute then use the lazy {#{node['node']['variable']}}  in the following recipes
[2014-01-09 22:44:54 -0500] Brad811_: btm: thank you
[2014-01-09 22:46:08 -0500] geggam: should say needing a variable generated by the preceding recipe to populate the following
[2014-01-09 23:00:41 -0500] ssd7: Ohai Chefs
[2014-01-09 23:01:54 -0500] coderanger: ssd7: o7
[2014-01-09 23:25:41 -0500] spheromak: geggam: you can you node.run_state  to pass state in-between recipes.
[2014-01-09 23:28:51 -0500] geggam: thanks spheromak
[2014-01-09 23:45:08 -0500] notromda: I keep getting intermittent connectivity problems to the chef server

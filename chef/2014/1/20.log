[2014-01-20 01:58:10 -0500] bgupta: I have a private cookbook that handles user instantiation by depending upon fnicol's user cookbook. I set a default user array attribute in this private cookbook. I have another private cookbook that depends upon resets rbenv cookbook.
[2014-01-20 01:58:19 -0500] bgupta: The rbenv cookbook creates and populates an rbenv "group" if an appropriate array attribute exists. In the spirit of DRY I am setting the rbenv array like so: default['rbenv']['group_users'] = default['users'] + ['jenkins']
[2014-01-20 01:58:31 -0500] bgupta: The chef-client run does what it is supposed to, if I properly order the runlist. However, I am using the one-cookbook-per-repo model and testing cookbooks in isolation, so my chefspec unit test fails because it cant see the default[users] attribute.
[2014-01-20 01:58:39 -0500] bgupta: What is the best practice here?
[2014-01-20 02:04:37 -0500] bgupta: (BTW, I'm thinking the answer might be somehow to set a use some sort of harness that sets default['users'] to some mock value.)
[2014-01-20 02:11:22 -0500] bgupta: mmm.. I'm going to try setting the default['users'] attribute to a test value in my specfile.. sorry for the noise.
[2014-01-20 02:47:13 -0500] flaccid: yeah now that i am enabling some testing, i am running into C: Missing utf-8 encoding comment. a lot and wondering why
[2014-01-20 02:48:30 -0500] flaccid: does it really want me to put # encoding: utf-8 at the top of every file heh?
[2014-01-20 02:48:40 -0500] bgupta: best as I can tell, ruby defaults to US_ASCII, and best practice for ruby code to use UTF-8... so lint tools look for the magic comment.
[2014-01-20 02:49:04 -0500] bgupta: apparently..
[2014-01-20 02:49:13 -0500] bgupta: (That's what it wants)
[2014-01-20 02:49:22 -0500] flaccid: i'm not seeing it in other recipes, but what i do notice is they just have # on the first line
[2014-01-20 02:49:48 -0500] flaccid: i don't like the extra 2 lines so i remove the bottom and top # lines heh
[2014-01-20 02:52:19 -0500] flaccid: i guess i should cough and just do what opscode do https://github.com/xhost-cookbooks/openvpn/blob/master/attributes/default.rb#L1
[2014-01-20 03:00:35 -0500] yuppers: I'm having a bit of tough time understanding how exactly I should be using chef-zero as a provider in test-kitchen
[2014-01-20 03:01:06 -0500] yuppers: it seems that any documentation / blog posts about it is pretty sparse
[2014-01-20 03:01:45 -0500] yuppers: would anyone here happen to have any pointers about this?
[2014-01-20 03:06:41 -0500] bettyclamp: I can't seem to define an attribute in a chefspec run. Any idea why? Here is the code: let(:chef_run) do ChefSpec::Runner.new do |node| node.set['foo'] = %w{bar1 bar2} end.converge(described_recipe) end
[2014-01-20 03:08:25 -0500] bettyclamp: The error I get is: Undefined node attribute or method `+' on `node'. To set an attribute, use `+=value' instead.
[2014-01-20 03:16:30 -0500] yuppers: bettyclamp: maybe try: node['foo'] = %w{bar1 bar2}
[2014-01-20 03:17:12 -0500] yuppers: looking through the chefspec repos issues relating to that syntax
[2014-01-20 03:17:19 -0500] yuppers: it seems it's encouraged that you use that instead now
[2014-01-20 03:17:27 -0500] yuppers: assuming you are using chefspec 3.x
[2014-01-20 06:27:14 -0500] krz: hmmmm
[2014-01-20 06:27:38 -0500] krz: given that i can install os packages with http://docs.opscode.com/resource.html why would i need the yum-qa cookbook? what is the difference?
[2014-01-20 06:28:00 -0500] krz: i.e. https://github.com/cookbooks/yum
[2014-01-20 06:28:34 -0500] enbergj: because installing packages is not the same as managing repositories?
[2014-01-20 06:29:22 -0500] krz: enbergj: couldnt i create my own cookbook which uses http://docs.opscode.com/resource.html to install OS packages?
[2014-01-20 06:29:42 -0500] enbergj: from what I understand, the yum cookbook is for managing repositories, if you want to e.g. add the nginx repositories to your system and then install the nginx package .. though I've never understood why anyone would seriously want to use cookbooks for stuff like that, I just cookbook_file "/etc/yum.repos.d/nginx.repo" or whatever was the path
[2014-01-20 06:30:37 -0500] enbergj: krz: that page has quite a lot of stuff in it .. do you mean e.g. using this to install nginx: package "nginx"
[2014-01-20 06:30:40 -0500] enbergj: ?
[2014-01-20 06:30:45 -0500] krz: yeap
[2014-01-20 06:31:06 -0500] enbergj: you don't seem to quite understand the difference between a package and a repository
[2014-01-20 06:31:36 -0500] enbergj: the yum recipe manages repositories, the "package" resource installs packages from the repositories configured in your system
[2014-01-20 06:32:29 -0500] enbergj: e.g. if you install centos 6.5 minimal, the default repositories might not (at least I think they don't) contain nginx, and you could use the yum recipe to add the nginx repositories to your system and then install them from there with package "nginx"
[2014-01-20 06:32:46 -0500] krz: i see
[2014-01-20 06:33:23 -0500] enbergj: if you don't know what a repository is, google will help you
[2014-01-20 06:34:12 -0500] enbergj: and as I said, I think it's just a huge waste of time to use something like a yum cookbook to manage repositories when all you need is a cookbook_file "/etc/yum.repos.d/nginx.repo" in your own cookbook
[2014-01-20 06:36:20 -0500] krz: enbergj: when you say cookbook_file, how do you mean?
[2014-01-20 06:36:33 -0500] enbergj: .. it's a resource type, google for more details
[2014-01-20 06:37:03 -0500] krz: yea resource. so something like: package "tar" do ...
[2014-01-20 06:37:27 -0500] enbergj: except: cookbook_file "/path/to/file" do ..
[2014-01-20 06:38:30 -0500] krz: why not just specify the file? and let the system determine the path?
[2014-01-20 06:39:26 -0500] enbergj: ... I really don't have time for this, google will explain more about cookbook_file if you are confused
[2014-01-20 06:39:38 -0500] krz: theres also http://docs.opscode.com/resource_yum.html
[2014-01-20 06:39:56 -0500] krz: all this indicate that i might not even need the yum-qa cookbook
[2014-01-20 06:40:18 -0500] krz: enbergj: ive googled. im looking to see if anyone here can verify my assumption
[2014-01-20 06:43:09 -0500] Junaid__: Is it possible to run a block of code only if the node has a specific role?
[2014-01-20 06:44:23 -0500] enbergj: try something like if node.roles.include?("myrole")
[2014-01-20 06:48:16 -0500] Junaid__: enbergj, So here is what I have , http://pastebin.com/LHcSEkZw
[2014-01-20 06:48:59 -0500] Junaid__: I'm want to add in hosts for nagios, for the servers that have a particular role. So do you think this would work?
[2014-01-20 06:49:10 -0500] enbergj: doubt it
[2014-01-20 06:49:11 -0500] Junaid__: I'm wanting*
[2014-01-20 06:50:00 -0500] enbergj: why not just add the recipe to the role that you want to be added? .. also, I don't think that if isn't correctly constructed, google will tell you how to do if blocks in ruby
[2014-01-20 06:52:16 -0500] Junaid__: enbergj, What I'm trying to do is monitor a few servers out of the many servers that we have in our Infra, and I want the entries of only those servers to be there is in the hosts.cfg file of nagios. That is why I'm trying to execute it this way,
[2014-01-20 07:52:28 -0500] enbergj: mjeah, so what I do for something like that is have a recipe with no ifs or buts in it and just add that recipe to the role I want to have that executed for
[2014-01-20 08:06:48 -0500] Junaid__: <enbergj>, Sure. Thank you for the help. I will try and see if it works and let you know.
[2014-01-20 08:08:26 -0500] legal90: Hallo, chefs! I'm for a way to install updates for Windows 2012 Server using Chef. Does somebody know the cookbook/recipe for this ?
[2014-01-20 08:08:43 -0500] legal90: *I'm looking for a way
[2014-01-20 08:09:21 -0500] flaccid: legal90: anything on google?
[2014-01-20 08:09:38 -0500] flaccid: i have not seen a cookbook or such. windows doesn't provide a real api
[2014-01-20 08:10:21 -0500] legal90: nothing in google :(
[2014-01-20 08:10:27 -0500] legal90: except this one: https://github.com/dougm/site-cookbooks/blob/master/windows/recipes/update.rb
[2014-01-20 08:10:37 -0500] legal90: But it is too old
[2014-01-20 08:11:37 -0500] flaccid: you would need to tap into wmi or whatever. best to write it in powershell first
[2014-01-20 08:15:50 -0500] legal90: huh thank you for an advice. I hate powershall and win-world overall )
[2014-01-20 08:16:02 -0500] flaccid: legal90: then don't use windows
[2014-01-20 08:18:43 -0500] legal90: Really, I dream about it :) But it is our production needs to orchestrate widows-based servers. (Great thanks to Chef, it makes my life much easier)
[2014-01-20 08:23:31 -0500] flaccid: legal90: yes, you can run powershell
[2014-01-20 08:52:40 -0500] krz: hmm, is this right  "run_list": ["recipe[main, environment_variables]"]
[2014-01-20 08:53:19 -0500] krz: this is my node.json
[2014-01-20 08:54:11 -0500] flaccid: krz: the recipe doesn't loook good
[2014-01-20 08:54:21 -0500] krz: this is my node.json?
[2014-01-20 08:54:25 -0500] krz: wops
[2014-01-20 08:54:28 -0500] krz: which recipe?
[2014-01-20 08:55:21 -0500] flaccid: krz:   "run_list": ["recipe[foo::bar]"]
[2014-01-20 08:55:35 -0500] krz: those are two recipes
[2014-01-20 08:55:44 -0500] krz: i need to run main and environment_variables
[2014-01-20 08:55:49 -0500] krz: two cookbooks/recipes
[2014-01-20 08:56:18 -0500] flaccid: "run_list": ["recipe[main, environment_variables]"]
[2014-01-20 08:56:36 -0500] flaccid: "run_list": ["recipe[main], recipe[environment_variables]"]
[2014-01-20 08:57:13 -0500] flaccid: i'm burping too much
[2014-01-20 08:57:17 -0500] krz: i see
[2014-01-20 08:57:20 -0500] krz: let me try that
[2014-01-20 08:58:45 -0500] flaccid: here is an example of doing multiple recipes
[2014-01-20 08:58:46 -0500] flaccid: "run_list": [ "recipe[system]", "recipe[system::update_package_list]", "recipe[system::upgrade_packages]", "recipe[ntp]", "recipe[resolver]", "recipe[cron]", "recipe[sudo]", "recipe[postfix]" ]
[2014-01-20 09:20:01 -0500] Junaid__: railsraider, I remember you are configuring nagios with Chef. I had some doubt about hosts.cfg file.
[2014-01-20 09:20:31 -0500] railsraider: what doubts
[2014-01-20 09:20:37 -0500] Junaid__: could you please help
[2014-01-20 09:21:33 -0500] Junaid__: Actually my hosts.cfg file is generating entries of all the servers in the nodes folder. I want it to have the entries of just a few servers with specific role.
[2014-01-20 09:21:57 -0500] Junaid__: Is that possible?
[2014-01-20 09:23:12 -0500] Junaid__: I have a role called nrpe_rhel_servers.
[2014-01-20 09:23:33 -0500] Junaid__: I want hosts.cfg to generate entries of just those nodes that have the role nrpe_rhel_servers
[2014-01-20 09:23:41 -0500] Junaid__: and here is what I was trying
[2014-01-20 09:23:54 -0500] Junaid__: http://pastebin.com/LHcSEkZw
[2014-01-20 09:27:51 -0500] railsraider: what were you trying to do here  node.roles.include?("nrpe_rhel_servers")
[2014-01-20 09:28:12 -0500] railsraider: thats not how you should go
[2014-01-20 09:29:29 -0500] Junaid__: I was trying to use that to execute "nodes = search(:node, 'name:*').map{|n| n.name}" for only those nodes with role nrpe_rhel_servers.
[2014-01-20 09:30:45 -0500] railsraider: http://pastebin.com/d46dYmUM
[2014-01-20 09:30:57 -0500] railsraider: you should pass 2 variables
[2014-01-20 09:31:14 -0500] railsraider: one for nrpe_rehl_servers in which in the erb you call @ nrpe_rehl_servers
[2014-01-20 09:31:30 -0500] railsraider: and the other is all hosts not with role nrpe_rehl_servers
[2014-01-20 09:31:39 -0500] railsraider: if thats what i understand from you
[2014-01-20 09:35:18 -0500] railsraider: Junaid__:  http://pastebin.com/d46dYmUM ok?
[2014-01-20 09:37:29 -0500] Junaid__: railsraider, I'm trying to understand why we are using NOT there.
[2014-01-20 09:37:57 -0500] Junaid__: and your code looks much cleaner:)
[2014-01-20 09:38:13 -0500] railsraider: because you want to exclude the host with role nrpe_rehl_servers from the list
[2014-01-20 09:38:31 -0500] railsraider: if i understand you correctly you want to split the hosts
[2014-01-20 09:38:53 -0500] railsraider: some host do not have the role nrpe_rehl_servers while others do correct?
[2014-01-20 09:39:26 -0500] Junaid__: Yes. Actually for now I will be monitoring only the servers with the role nrpe_rhel_servers
[2014-01-20 09:39:31 -0500] railsraider: using NOT in searcg is exclusing
[2014-01-20 09:39:42 -0500] Junaid__: and I want only those enrties in the hosts.cfg file
[2014-01-20 09:39:43 -0500] railsraider: so no need for the the other host
[2014-01-20 09:40:37 -0500] railsraider: ok so then just do this http://pastebin.com/07iDeUzt
[2014-01-20 09:40:56 -0500] railsraider: if by role you mean chef role
[2014-01-20 09:41:49 -0500] Junaid__: Yes. It's a chef role. Ill be back in 5 minutes
[2014-01-20 09:41:51 -0500] Junaid__: meeting
[2014-01-20 09:50:44 -0500] zxd: are: rescue, begin and end a ruby thing or chef?
[2014-01-20 09:52:45 -0500] railsraider: ruby
[2014-01-20 09:57:58 -0500] zxd: thanks railsraider
[2014-01-20 09:59:29 -0500] zxd: I am trying to create a wrapper cookbook for mysql  http://pastie.org/8650226  , my question is 1. if this syntax is correct and 2. how do I run the resources() function only if the template resource was defined in the previous cookbook that was included
[2014-01-20 10:02:45 -0500] zxd: is this valid r = resources(:template => "/etc/mysql/my.cnf").?  ?
[2014-01-20 10:02:48 -0500] zxd: to test if it's true
[2014-01-20 10:04:32 -0500] Junaid__: railsraider, I have used http://pastebin.com/07iDeUzt and its working perfectly.
[2014-01-20 10:10:57 -0500] krz: i have several cookbooks that could use the same variable. where is a good place to define a "global" var?
[2014-01-20 10:11:09 -0500] krz: that can be accessed by other recipes
[2014-01-20 10:15:57 -0500] krz: anyone?
[2014-01-20 10:20:36 -0500] sthulb: krz: in the json that's passed to chef?
[2014-01-20 10:21:42 -0500] krz: hm
[2014-01-20 10:21:56 -0500] krz: brb
[2014-01-20 10:23:45 -0500] zxd: I want to install a gem file gem install chef-rewind  , how do I do this via knife want to install it to a node
[2014-01-20 10:23:53 -0500] zxd: it requires it in one of the cookbooks
[2014-01-20 10:39:21 -0500] flaccid: zxd: sounds like knife-ssh if you wanna do it that way
[2014-01-20 10:45:48 -0500] zxd: flaccid: is it enouth to just put  chef_gem 'foo' in the recipe ?
[2014-01-20 10:45:55 -0500] zxd: it will install the gem at compile time?
[2014-01-20 10:46:21 -0500] flaccid: zxd: if thats what you need
[2014-01-20 10:49:25 -0500] zxd: flaccid: in http://docs.opscode.com/resource_chef_gem.html  it says I should package resource since ohai will know best what to use based on platform, but how will it know I want a gem package instead of regular system package to be installed?
[2014-01-20 10:52:58 -0500] ehaselwanter: you use gem_package for that: http://docs.opscode.com/resource_gem_package.html
[2014-01-20 10:53:43 -0500] ehaselwanter: zxd: or if you want to use it within chef: http://docs.opscode.com/resource_chef_gem.html
[2014-01-20 11:01:45 -0500] flaccid: zxd: don;t understand sorry, hopefully ehaselwanter did
[2014-01-20 11:03:39 -0500] zxd: is this same syntax   :template => "/var/pgsql/data/postgresql.conf"  and  template[/var/pgsql/data/postgresql.conf]
[2014-01-20 11:45:48 -0500] ehaselwanter: zxd: for what?
[2014-01-20 11:46:36 -0500] ehaselwanter: flaccid: chef_gem and gem_package are the resources to install gems
[2014-01-20 11:47:41 -0500] ehaselwanter: flaccid: chef_gem does it in the context of chef (if you want to use the gem in a chef-client run) and they get installed in the gem context of chef as well as installed at compile time ...
[2014-01-20 11:53:41 -0500] aspiers: any chefspec gurus here?
[2014-01-20 11:54:08 -0500] aspiers: I want to write specs for my LWRP, but the docs suggest you can only do that by writing specs for an existing recipe
[2014-01-20 11:54:50 -0500] aspiers: and my cookbook doesn't have any recipes which are appropriate for both LWRP testing and real-world use
[2014-01-20 11:55:11 -0500] aspiers: so I think I probably need a kind of anonymous recipe just for LWRP testing
[2014-01-20 11:55:20 -0500] aspiers: if I could define one inline within the spec, that would be ideal
[2014-01-20 11:56:39 -0500] sthulb: create an example recipe?
[2014-01-20 11:57:14 -0500] aspiers: sthulb: ahh, is that what the examples/ directory is for?
[2014-01-20 12:00:16 -0500] sthulb: partly :)
[2014-01-20 12:00:24 -0500] sthulb: it's what I use it for
[2014-01-20 12:09:38 -0500] sr_: i need to install wordpress through chef
[2014-01-20 12:09:41 -0500] sr_: ??
[2014-01-20 12:11:45 -0500] maniac: guys what if i want to use all my cookbooks in one repository  and use berkshelf for cookbook versioning  whats the best practise for it ? also i want be able to use CI to test my cookbook for syntax and then upload them to chef-server
[2014-01-20 12:18:28 -0500] Junaid__: <railsraider>, I have got my Nagios cookbook almost set up. Thank you so much for all the help so far.
[2014-01-20 12:19:09 -0500] railsraider: np :)
[2014-01-20 12:31:55 -0500] DandyPandy: maniac: Having your cookbooks in one repo makes versioning very difficult from a version control standpoint. You don't need berkshelf to do it. The whole idea of berkshelf is each cookbook is in its own repo. I would highly recommend sticking with that.
[2014-01-20 12:33:20 -0500] DandyPandy: maniac: I had a monolithic repo when I started out, but as soon as I started versioning cookbooks, I saw what they were talking about with having each cookbook in its own repo.
[2014-01-20 12:34:51 -0500] maniac: DandyPandy, there is 2 questions after that : 1) how to maintain chef repository 2) how to make tests with CI?  . i can resolve that i think if i make separate repos for data_bags, roles etc. and include them in my CI build project all at once
[2014-01-20 12:36:11 -0500] maniac: DandyPandy, also how will look cookbook repository ? it will have separate directories with <cookbook_name> + version applied in it ?
[2014-01-20 12:36:27 -0500] DandyPandy: maniac: I have a single berksfile in my main repo that points to the git repo I have for each of my cookbooks. That's where all of my roles and environments and such live.
[2014-01-20 12:37:06 -0500] DandyPandy: maniac: for the CI tests that require data bags and such, I keep those in a directory called fixtures under the test directory
[2014-01-20 12:37:12 -0500] DandyPandy: I mock that data out
[2014-01-20 12:38:21 -0500] DandyPandy: As for versioning the cookbooks, I set git tags when I version it. Each cookbook is a separate repo, so I can easily see the version history. Not so easy with a single repo.
[2014-01-20 12:38:38 -0500] maniac: DandyPandy how does your main repo looks like ? what it consists from ?
[2014-01-20 12:38:45 -0500] rgsteele: Is it possible to stub out multiple node searches with Chefspec?  It seems like it only registers the last one if there are more than one.  For example, if I have stub_search('node', 'somequery') and stub_search('node', 'otherquery'), I get warnings about 'somequery' not being stubbed.
[2014-01-20 12:39:15 -0500] DandyPandy: maniac: roles, environments, data_bags, and a berksfile
[2014-01-20 12:40:23 -0500] DandyPandy: I use my environments to pin cookbook versions
[2014-01-20 12:47:14 -0500] maniac: DandyPandy, with the help of Berksfile you can fetch cookbooks to ~/.berksfile/cookbooks  but how then you make git commits and pushes to it throw berkshelf ?
[2014-01-20 12:47:46 -0500] DandyPandy: you don't do commits through berkshelf
[2014-01-20 12:48:08 -0500] maniac: aha i understoor you make in seaprate repos
[2014-01-20 12:48:16 -0500] DandyPandy: You do
[2014-01-20 12:48:30 -0500] maniac: and after that CI make test on it and uploads to chef-server
[2014-01-20 12:48:48 -0500] DandyPandy: Correct. Each cookbook would get its own set of tests.
[2014-01-20 12:49:51 -0500] maniac: and after that you are able to work on them with berkshelf  nice =)
[2014-01-20 12:50:27 -0500] maniac: thank you much DandyPanda  now i see how to refactor my chef cookbooks =)
[2014-01-20 12:50:29 -0500] DandyPandy: yeah, once you initialize the cookbook with berkshelf, you treat it as you would any other cookbook. You just use berkshelf to upload it to the chef server
[2014-01-20 12:51:49 -0500] DandyPandy: it's just that rather than the cookbooks living together in one with your roles, environments, etc, they live independently in their own git repos.
[2014-01-20 12:52:59 -0500] DandyPandy: berkshelf just makes it easier to upload them to the chef server. You could do the same thing with knife by specifying the right knife flags, but berkshelf just handles that for you.
[2014-01-20 12:55:57 -0500] DandyPandy: it took me a while to see what the point of "the berkshelf way". It was when I started versioning cookbooks and wanting different versions of each cookbook in environment (dev, qa, staging, production) that it clicked.
[2014-01-20 12:56:30 -0500] maniac: its great toll as i can see =) and git add allows you to commit to different cookbook versions tags
[2014-01-20 12:56:41 -0500] DandyPandy: exactly
[2014-01-20 12:59:24 -0500] maniac: awesome  thats gives big advantage to chef =) before that day i didn't actually realize how can i use roles correctly =)
[2014-01-20 12:59:33 -0500] maniac: *versions
[2014-01-20 13:01:22 -0500] Junaid__: <railsraider> Are you using templates for your nrpe.cfg file?
[2014-01-20 13:01:44 -0500] railsraider: not using nrpe cfg but nsca is similiar
[2014-01-20 13:01:49 -0500] railsraider: yes i do
[2014-01-20 13:03:57 -0500] Junaid__: okay. I'm making a mistake with the way I'm writing my command. Not sure how exactly I need to alter my code.
[2014-01-20 13:04:46 -0500] Junaid__: for the command[check_whatever] bit of it
[2014-01-20 13:05:48 -0500] Junaid__: I thought this would work , http://pastebin.com/3nvA5e7z
[2014-01-20 13:06:13 -0500] railsraider: and the template?
[2014-01-20 13:06:33 -0500] railsraider: show me the recipe and templet
[2014-01-20 13:06:39 -0500] Junaid__: But nagios needs it to be like this http://pastebin.com/Wn3Vi1Yf
[2014-01-20 13:06:43 -0500] Junaid__: for each command
[2014-01-20 13:06:49 -0500] Junaid__: does that make sense?
[2014-01-20 13:06:59 -0500] railsraider: yes
[2014-01-20 13:07:16 -0500] railsraider: you need to iterate the template with the hash you're passing as command
[2014-01-20 13:07:23 -0500] railsraider: show me the recipe and template please
[2014-01-20 13:07:28 -0500] Junaid__: sur
[2014-01-20 13:07:30 -0500] Junaid__: sure
[2014-01-20 13:09:32 -0500] Junaid__: http://pastebin.com/z07CmxfA
[2014-01-20 13:09:40 -0500] Junaid__: There it is.
[2014-01-20 13:12:15 -0500] allaire: Anybody has an idea why Chef whould hang on these line: https://gist.github.com/allaire/e80286c35dda67b10f2a Until no memory is left on the machine?
[2014-01-20 13:15:37 -0500] railsraider: Junaid__: i suggest you pick up a good ruby book to help you through the basics of hash / arrays etc... here's how you need to do it => http://pastebin.com/K6m1AK9x
[2014-01-20 13:15:58 -0500] Junaid__: Can you suggest me a good book?
[2014-01-20 13:16:06 -0500] railsraider: and use alot of irb to try out
[2014-01-20 13:16:07 -0500] Junaid__: which would help me with chef as well?
[2014-01-20 13:17:23 -0500] railsraider: this should be a good start http://www.amazon.com/Programming-Ruby-1-9-Pragmatic-Programmers/dp/1934356085/ref=sr_1_38?ie=UTF8&qid=1390223825&sr=8-38&keywords=ruby
[2014-01-20 13:18:24 -0500] railsraider: guys is there a way to invalidate chef cache in run?
[2014-01-20 13:19:16 -0500] zxd: how to get platform version
[2014-01-20 13:20:52 -0500] railsraider: zxd: node.platform_version
[2014-01-20 13:21:06 -0500] zxd: how do I strip the minor number?
[2014-01-20 13:21:27 -0500] railsraider: how do i call YAML::load_file after the converge and not on compile time?
[2014-01-20 13:22:56 -0500] railsraider: node.platform_version.to_i
[2014-01-20 13:24:04 -0500] railsraider: allaire: you're probably forking too many chef-clients upgarde you chef to latest if possible
[2014-01-20 13:24:31 -0500] allaire: railsraider: Already on 11.8.2
[2014-01-20 13:24:42 -0500] allaire: and that's happen when running on chef-solo mode in Vagrant
[2014-01-20 13:24:45 -0500] railsraider: how are you running chef-client?
[2014-01-20 13:24:45 -0500] allaire: that's really weird
[2014-01-20 13:24:51 -0500] railsraider: via ?
[2014-01-20 13:24:54 -0500] railsraider: upstart?
[2014-01-20 13:24:58 -0500] railsraider: bluepill?
[2014-01-20 13:25:24 -0500] allaire: railsraider: I'm not, I use chef solo
[2014-01-20 13:25:39 -0500] railsraider: but chef-client seems to be deamonized
[2014-01-20 13:26:07 -0500] allaire: good point, let me take a look, maybe I screwed something up in my base cookbook :)
[2014-01-20 13:26:19 -0500] railsraider: something is stucking your chef client from completing
[2014-01-20 13:26:28 -0500] railsraider:  if a chef-client run takes to long to complete and a new chef-client run is spawned
[2014-01-20 13:26:50 -0500] railsraider: debug your cookbooks in the runlist
[2014-01-20 13:27:19 -0500] railsraider: you can verify that chef  client is running too many with pgrep -fl chef
[2014-01-20 13:27:24 -0500] ocholetras: hi guys
[2014-01-20 13:27:33 -0500] ocholetras: how do you check if a package is installed
[2014-01-20 13:27:48 -0500] railsraider: dpkg -l | grep package name
[2014-01-20 13:27:49 -0500] ocholetras: if "service apache2 status"
[2014-01-20 13:27:54 -0500] ocholetras: inside a recipe
[2014-01-20 13:27:58 -0500] railsraider: thats -L  and pipe
[2014-01-20 13:28:36 -0500] ocholetras: it returns status 1 on bash
[2014-01-20 13:28:43 -0500] ocholetras: but chef take the action
[2014-01-20 13:29:05 -0500] ocholetras: include "recipename" if "dpkg -L openssh"
[2014-01-20 13:29:27 -0500] asmarre: Hi, is there a way to check if a resource is already defined inside a recipe?, i.e.: if resources("template[#{node['nginx']['dir']}/sites-available/#{site_name}]")...
[2014-01-20 13:29:31 -0500] allaire: railsraider:
[2014-01-20 13:29:32 -0500] allaire: 1680 /opt/chef/embedded/bin/ruby /usr/bin/chef-solo -c /tmp/vagrant-chef-1/solo.rb -j /tmp/vagrant-chef-1/dna.json
[2014-01-20 13:29:34 -0500] allaire: 1685 chef-solo worker: ppid=1680;start=13:26:34;
[2014-01-20 13:29:36 -0500] allaire: that's it
[2014-01-20 13:29:50 -0500] allaire: but I think I found the issue
[2014-01-20 13:32:53 -0500] allaire: railsraider: https://github.com/mitchellh/vagrant/issues/1673#issuecomment-32759268
[2014-01-20 13:36:57 -0500] Junaid__: <railsraider>, I made very minor changes http://pastebin.com/0qiULm5r and its working perfectly now. I will get the book you suggested me and read.  Thanks again.
[2014-01-20 13:42:07 -0500] denniswisnia: getting the error "ERROR: TypeError: can't convert nil into String" if I want to create a new cookbook. Google helped me not. Any Ideas?
[2014-01-20 13:47:19 -0500] railsraider: denniswisnia: more info
[2014-01-20 13:47:47 -0500] denniswisnia: railsraider: what you need?
[2014-01-20 13:54:08 -0500] railsraider: denniswisnia:  what command are you typing
[2014-01-20 13:55:34 -0500] railsraider: guys anyone knows how to use yaml load in a recipe after converge
[2014-01-20 14:02:42 -0500] denniswisnia: railsraider: "knife cookbook create <name>"
[2014-01-20 14:03:32 -0500] railsraider: check you knife.rb file
[2014-01-20 14:04:18 -0500] railsraider: i need help with a cookbook i have that creates a yaml file and then read it and include_recipe based on that
[2014-01-20 14:04:55 -0500] railsraider: the problem i have is that the Yaml.load is being called BEFORE the creation of the file
[2014-01-20 14:05:18 -0500] railsraider: and trying to wrap it in ruby block yells at me undefined method `include_recipe' for Chef::Resource::RubyBlock
[2014-01-20 14:05:42 -0500] railsraider: how can i read a file that is being created using the lazy_eval
[2014-01-20 14:05:48 -0500] Tiger|2: guys, i have a lot of servers with chef-client 0.10 installed and i got  error similar http://stackoverflow.com/questions/19944901/knife-bootstraping-returns-log-level-must-be-one-of
[2014-01-20 14:06:28 -0500] Tiger|2: can i use gem uninstall chef in custom bootstrap?
[2014-01-20 14:08:23 -0500] Tiger|2: i read http://stackoverflow.com/a/17480761 but i dont understand  what i need to change in bootstrap template
[2014-01-20 14:12:05 -0500] masterkorp: Guys I am trying to upload a coookbook
[2014-01-20 14:12:23 -0500] masterkorp: i use metadata.rb like knife cookbook create does
[2014-01-20 14:12:43 -0500] masterkorp: yet when uploading the script says i need a metadata.json file
[2014-01-20 14:13:22 -0500] masterkorp: https://github.com/opscode-cookbooks/mysql
[2014-01-20 14:13:41 -0500] masterkorp: and I see that cookbooks like these dont have the json either
[2014-01-20 14:22:17 -0500] zxd_: what happens if I start a path in  template source  with /
[2014-01-20 14:23:15 -0500] zxd_: templates/ubuntu-13.10//templates/ubuntu-12/init-mysql.conf.erb
[2014-01-20 14:23:21 -0500] zxd_: Chef::Exceptions::FileNotFound
[2014-01-20 14:44:38 -0500] avalarion: Hey ho,
[2014-01-20 14:44:38 -0500] avalarion: i am using chef-solo with vagrant. Is there a way to ensure that services like apache2 are in the correct unlevel?
[2014-01-20 14:46:38 -0500] zaargy: do you really care about run levels or just if will come up at boot?
[2014-01-20 14:46:56 -0500] zaargy: if so then see teh :enable action of the service resource
[2014-01-20 14:47:40 -0500] zxd_: how do I strip templates/ubuntu-13.10/  in templates/ubuntu-13.10//templates/ubuntu-12/init-mysql.conf.erb
[2014-01-20 14:47:44 -0500] avalarion: zaargy: not working for apache2 =(
[2014-01-20 14:48:00 -0500] zxd_: don't want it to append ubuntu-13.10 on the source attribute
[2014-01-20 14:48:06 -0500] avalarion: zaargy: as vagrant provision is not running on each vagrant up call
[2014-01-20 14:48:24 -0500] avalarion: zaargy: and there is no chef-client on the machine
[2014-01-20 14:49:42 -0500] zaargy: er you base box is busted then
[2014-01-20 14:49:56 -0500] zaargy: add a shell provisioner to install it before chef then?
[2014-01-20 14:52:38 -0500] avalarion: will try it^^. If you see I don't need runlevels, I trust you
[2014-01-20 15:12:16 -0500] zxd_: any ideas ? how do I make get rid of templaes/foo/  in http://pastie.org/8650824
[2014-01-20 15:13:39 -0500] masterkorp: why is foo there is the first place ??
[2014-01-20 15:15:38 -0500] shlant: can chef-solo use encrypted data bags now?
[2014-01-20 15:15:44 -0500] shlant: specifically with vagrant
[2014-01-20 15:16:32 -0500] shlant: do you need the encrypted data bag to be local?
[2014-01-20 15:16:34 -0500] zxd_:  ubuntu.foo.local   templates/ubuntu-13.10/init-mysql.conf.erb
[2014-01-20 15:16:56 -0500] zxd_: want to get rid of templates/ubuntu-13.10 and replace with templates/mystuff
[2014-01-20 15:17:13 -0500] masterkorp: zxd_: why ??
[2014-01-20 15:17:24 -0500] masterkorp: why not just get them in default ???
[2014-01-20 15:17:58 -0500] zxd_: because the template file in this cookbook is not on default it's on ubuntu-12
[2014-01-20 15:18:02 -0500] zxd_: and chef can't find it
[2014-01-20 15:18:12 -0500] zxd_: so I am writting a wrapper cookbook to tell it in what dir to look
[2014-01-20 15:18:37 -0500] zxd_: the node has ubuntu-13.10 and there is no such dir on the cookbook
[2014-01-20 15:21:09 -0500] zxd_: !
[2014-01-20 15:23:35 -0500] masterkorp: why not placing the template on the default path ??
[2014-01-20 15:24:20 -0500] masterkorp: it doesn't make much sense
[2014-01-20 15:27:17 -0500] zxd_: masterkorp: how do I edit the source
[2014-01-20 15:28:52 -0500] wildahunden: I'm using knife-spork successfully and am thinking of incorporating berkshelf.  Do the two work well together?
[2014-01-20 15:30:22 -0500] masterkorp: zxd_: first elaborte
[2014-01-20 15:30:37 -0500] masterkorp: your templates go to the default
[2014-01-20 15:30:45 -0500] masterkorp: and use them there
[2014-01-20 15:31:27 -0500] zxd_: template source gets saved as templates/ubuntu-13.10/init-mysql.conf.erb how do I strip templates/ubuntu-13.10/ and add my one stuff, what's the ruby code to access source and change it
[2014-01-20 15:31:55 -0500] zxd_: masterkorp: the ini file is different for different platforms it isn't the same for all systems
[2014-01-20 15:32:08 -0500] zxd_: s/one/own
[2014-01-20 15:32:26 -0500] jonlives: wildahunden: as far as I know it does, yes - the only issue I have on berkshelf is https://github.com/jonlives/knife-spork/issues/85
[2014-01-20 15:33:26 -0500] jonlives: wildahunden: in fact sethvargo might be better placed to comment - I don't use berkshelf personally
[2014-01-20 15:33:43 -0500] jonlives: sethvargo: question was re berkshelf compatibility with spork and how well it works
[2014-01-20 15:34:09 -0500] bugoff: /5/5
[2014-01-20 15:34:16 -0500] masterkorp: zxd_: then use the template variables ???
[2014-01-20 15:34:37 -0500] zxd_: masterkorp: explain, you mean like source ??
[2014-01-20 15:35:01 -0500] sethvargo: @jonlives since Mitchell shut down IRCRelay, I don't have a bouncer, so I don't have backscroll. Can you feel me in plz?
[2014-01-20 15:35:11 -0500] zxd_: that's what I am trying to explain to you it appends templates/ubuntu-13.10  to whatever I put under source ''
[2014-01-20 15:35:18 -0500] zxd_: and that's NO GOOD
[2014-01-20 15:35:18 -0500] jonlives: sethvargo: "I'm using knife-spork successfully and am thinking of incorporating berkshelf.  Do the two work well together?"
[2014-01-20 15:36:57 -0500] zxd_: I am writing a wrapper cookbook and just editing the variable source not copying the whole .erb file
[2014-01-20 15:37:07 -0500] wildahunden: johlives: thank you
[2014-01-20 15:37:20 -0500] wildahunden: jonlives: thank you
[2014-01-20 15:37:24 -0500] masterkorp: zxd_: ok, for proper help elaborate on what are you trying to do ?
[2014-01-20 15:37:40 -0500] zxd_: masterkorp: I just did
[2014-01-20 15:37:47 -0500] sethvargo: @jonlives @wildahunden they used to. Although I doubt Berkshelf 3 works with spork yet. I'm still heads down in BS 3, and then I'll come back and "fix" all the things we broke (like knife-spork)
[2014-01-20 15:37:57 -0500] jonlives: awesome.
[2014-01-20 15:38:20 -0500] wildahunden: ty
[2014-01-20 15:38:35 -0500] masterkorp: zxd_: no, elaborate more i Think you're having the wrong approach to your problem
[2014-01-20 15:38:48 -0500] masterkorp: what does your cookbook do ?
[2014-01-20 15:38:54 -0500] wildahunden: sethvargo: sounds like we could work with berkshelf 2 for now then upgrade to 3 later.
[2014-01-20 15:39:02 -0500] sethvargo: @wildahunden yup
[2014-01-20 15:39:21 -0500] wildahunden: @sethvargo ty
[2014-01-20 15:50:06 -0500] geggam: if i delete the admin user from postgres will it recreate the user ?
[2014-01-20 15:53:47 -0500] railsraider: i need to get a recipe to include other recipes AFTER one recipe had run
[2014-01-20 15:54:13 -0500] railsraider: im setting tags on ec2, i want to read them off ec2 and include them in the recipe
[2014-01-20 15:54:26 -0500] geggam: look at lazy
[2014-01-20 15:54:26 -0500] railsraider: meaning include_recipe[tag]
[2014-01-20 15:54:30 -0500] railsraider: doesnt work
[2014-01-20 15:54:36 -0500] geggam: did for me
[2014-01-20 15:54:45 -0500] railsraider: i can show you what i did
[2014-01-20 15:54:47 -0500] railsraider: one sec
[2014-01-20 15:57:25 -0500] railsraider: geggam: the aws cookbook runs before the munin to set tags http://pastebin.com/B28wLsM8
[2014-01-20 15:57:57 -0500] railsraider: my flow should be set_tags -> read_tags_from_ec2 -> use that for include recipe for munin
[2014-01-20 15:58:14 -0500] railsraider: it only works the 2nd time i run the chef
[2014-01-20 15:59:26 -0500] railsraider: i tried to do this  node.default['ec2_tags'] = lazy{read_ec2_tags} but it complained that lazy is not a resource
[2014-01-20 16:02:39 -0500] railsraider: how can i use lazy for setting node attribute
[2014-01-20 16:04:12 -0500] geggam: is the recipe i read the value railsraider  http://pastebin.mozilla.org/4059248
[2014-01-20 16:05:23 -0500] geggam: http://pastebin.mozilla.org/4059285 where i set it
[2014-01-20 16:05:27 -0500] railsraider: geggam: im trying to use a library method to read off tags from ec2 and i want to set that in a node attribute in the compile time
[2014-01-20 16:05:47 -0500] railsraider: seems like include_recipe is being eval only at compile time
[2014-01-20 16:05:48 -0500] geggam: im not interested in solving ytour problem.. i showed you how i solved mine
[2014-01-20 16:06:03 -0500] geggam: it is the same issue
[2014-01-20 16:17:42 -0500] masterkorp: Guys did opscode dropped support for chef-server on debian ?
[2014-01-20 16:21:08 -0500] helfire: masterkorp: i wouldnt think so, why do you say that?
[2014-01-20 16:21:42 -0500] jonlives: masterkorp: there are still ubuntu packages on http://www.getchef.com/chef/install/
[2014-01-20 16:22:11 -0500] masterkorp: hmm the curl is hanging
[2014-01-20 16:23:09 -0500] jonlives: masterkorp: https://opscode-omnibus-packages.s3.amazonaws.com/ubuntu/12.04/x86_64/chef-server_11.0.10-1.ubuntu.12.04_amd64.deb works for me
[2014-01-20 16:23:29 -0500] geggam: changing  a forgotten users password http://lists.opscode.com/sympa/arc/chef/2013-03/msg00335.html this works
[2014-01-20 16:24:53 -0500] masterkorp: jonlives: hmm, thanks I am using the chef-server cookbook with chef-solo
[2014-01-20 16:31:09 -0500] masterkorp: jonlives: using your method
[2014-01-20 16:31:11 -0500] masterkorp: /opt/chef-server/embedded/bin/ruby: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.14' not found (required by /opt/chef-server/embedded/lib/libruby.so.1.9
[2014-01-20 16:31:18 -0500] masterkorp: after runing a reconfigure
[2014-01-20 16:31:41 -0500] jonlives: masterkorp: I don't run debian to verify that I'm afraid, but it's an official package from the getchef site.
[2014-01-20 16:31:50 -0500] jonlives: might be the wrong version for your version of debian?
[2014-01-20 16:32:46 -0500] masterkorp: i am on debian 7
[2014-01-20 16:42:35 -0500] laurent\: masterkorp: i'm running the package for ubuntu 10.04 on wheezy
[2014-01-20 16:43:19 -0500] masterkorp: laurent\: hmm
[2014-01-20 16:46:17 -0500] masterkorp: laurent\: that works, thank you !
[2014-01-20 16:46:35 -0500] laurent\: :)
[2014-01-20 16:52:19 -0500] drogoh: I'm trying to get vagrant with the chef-client provisioner set up with a brand new chef 11 install. for some reason, my client keys appear to be invalidated after one use
[2014-01-20 17:08:13 -0500] mondo: Is anyone managing multiple chef servers?  How are you handling your knife.rb file to switch between servers?
[2014-01-20 17:10:57 -0500] drogoh: I have a separate knife.rb for each server, which lives under chef-repo/.chef. you could also look into chefvm
[2014-01-20 17:16:38 -0500] shlant: mondo: knife-block
[2014-01-20 17:17:10 -0500] shlant: https://github.com/greenandsecure/knife-block
[2014-01-20 17:23:23 -0500] ninjitsu: hey guys
[2014-01-20 17:25:03 -0500] ninjitsu: so i'm in the process of trying to learn chef, and have a chef server up/running.  I'm trying to get a client connected to it.  I get that I need to use the "knife configure --initial" command to configure the client.. what I don't understand is that it seems as though the command is asking me to use the private key of the chef server on the client - or am i misinterpreting that dialog?
[2014-01-20 17:27:42 -0500] drogoh: ninjitsu: you'll have to pull down admin.pem and chef-validator.pem from the chef server and specify the path when prompted
[2014-01-20 17:30:10 -0500] novegin: is there a status or management tool available for opensource chef
[2014-01-20 17:33:10 -0500] gchristensen: novegin: what do you want out of it?
[2014-01-20 17:34:22 -0500] novegin: in tomcat we have a status page which gives some inside details
[2014-01-20 17:35:06 -0500] novegin: like that anything is available so that we can do tuning if necessary
[2014-01-20 17:35:50 -0500] gchristensen: hrm... so chef-server is just comprised of individual packages like webservers and databases that you could enable monitoring pages for
[2014-01-20 17:36:58 -0500] ninjitsu: drogoh - is there a typical convention where I should be storing those files on the client?
[2014-01-20 17:37:11 -0500] flagg0204_: is there a way in a cookbook to determine if the node is being bootstrapped, and to take a different action based on that?
[2014-01-20 17:37:30 -0500] drogoh: ninjitsu: I keep them in ~/.chef, seems like a good enough place
[2014-01-20 17:37:55 -0500] ninjitsu: kk - ~/.chef being for the 'root' user, or another user?
[2014-01-20 17:38:15 -0500] drogoh: whichever user you're going to be running knife under
[2014-01-20 17:38:22 -0500] ninjitsu: k - ty
[2014-01-20 17:39:34 -0500] novegin: gchristensen: is there any status page available for chef-solr
[2014-01-20 17:44:13 -0500] bgupta: Does one NEED to use chef zero to mock databags from spec? I ask because chef solo works with databags, and there should be a way to do this, without mocking a whole chef server?
[2014-01-20 18:12:36 -0500] novegin: in our chef server we can see the databag items in GUI. but knife search is not returning any items
[2014-01-20 18:12:46 -0500] novegin: any tips to troubleshoot ?
[2014-01-20 18:13:31 -0500] gchristensen: novegin: sometimes search falls behind. if you don't search but list all the bags they show up, but don't show up in search because it hasn't indexed them.
[2014-01-20 18:14:04 -0500] novegin: we had done chef-cerver-ctl reindex
[2014-01-20 18:14:23 -0500] novegin: is this destructive ?
[2014-01-20 18:14:39 -0500] gchristensen: I mean, in the short-term maybe but it'll be okay
[2014-01-20 18:15:09 -0500] novegin: should we just wait ?
[2014-01-20 18:15:14 -0500] gchristensen: probably :)
[2014-01-20 18:15:19 -0500] novegin: for the reindexing to happen
[2014-01-20 18:15:20 -0500] gchristensen: give it 30min and see how it is
[2014-01-20 18:15:26 -0500] gchristensen: also watch the load on the server, is it high?
[2014-01-20 18:15:28 -0500] novegin: its been hours :(
[2014-01-20 18:15:31 -0500] gchristensen: oh.
[2014-01-20 18:15:34 -0500] novegin: no load
[2014-01-20 18:15:49 -0500] gchristensen: hrm. I'm now out of my wheelhouse - I've never run a chef server, only picking thes ethings up from reading this channel.
[2014-01-20 18:17:06 -0500] novegin: ok
[2014-01-20 18:17:22 -0500] novegin: chef-expander is using 99% CPU
[2014-01-20 18:20:17 -0500] geggam: get a bigger box :)
[2014-01-20 18:21:44 -0500] ninjitsu: drogoh - should I be using ~/.chef or ~/chef-repo/.chef ? this client has no internet access, and I've used the git clone command from another system and manually staged the repo at ~/chef-repo/
[2014-01-20 18:23:35 -0500] drogoh: ninjitsu: I keep knife.rb in chef-repo/.chef with the keys in ~/.chef. it works for my needs
[2014-01-20 18:23:46 -0500] ninjitsu: kk
[2014-01-20 18:52:02 -0500] shlant: does anyone know why I get a Error executing action `restart` on resource 'service[foo]' when the notifies is :delayed? it seems to be trying to restart the service right at the notifies as opposed to the end of the run
[2014-01-20 18:53:01 -0500] novegin: chef-expander was in hung state. restarted it and manually reindexed. now no load :)
[2014-01-20 18:59:55 -0500] scarolan: exit
[2014-01-20 19:21:25 -0500] Vitor: convert vagrant attributes to json (chef-server usage) > http://vagrant2json.herokuapp.com/
[2014-01-20 19:50:01 -0500] shlant: does anyone see a problem with keeping an ENCRYPTED data bag in source control for use with chef-solo?
[2014-01-20 20:12:17 -0500] bubu: Is there a way to just download a package via the apt resource?
[2014-01-20 20:14:23 -0500] kallistec: CHEF code review https://plus.google.com/hangouts/_/hoaevent/AP36tYctOG_76EreVinUhIEcbx6G2tHBcRox2TZeTFNsAEq5CFARoQ?authuser=0&hl=en
[2014-01-20 20:14:23 -0500] pwelch_: bubu: not that I am aware of. You could use the remote_file resource(http://docs.opscode.com/chef/resources.html#remote-file) or possibly the apt cookbook: (https://github.com/opscode-cookbooks/apt)
[2014-01-20 20:14:33 -0500] bubu: aye
[2014-01-20 20:17:53 -0500] savant: kallistec: what are the rules for the hangout
[2014-01-20 20:17:54 -0500] savant: ?
[2014-01-20 20:18:12 -0500] savant: i'll just observe for a bit
[2014-01-20 20:21:31 -0500] savant: i wonder how I ask people things here
[2014-01-20 20:23:53 -0500] shlant: savant: using question marks?
[2014-01-20 20:23:56 -0500] shlant: in this channel?
[2014-01-20 20:23:57 -0500] savant: haha
[2014-01-20 20:24:00 -0500] shlant: haha
[2014-01-20 20:24:08 -0500] savant: i meant in the CHEF code review
[2014-01-20 20:24:17 -0500] shlant: ah I understand
[2014-01-20 20:42:50 -0500] shlant: anyone know why knife-openstack doesn't handle --secret-file?
[2014-01-20 20:45:20 -0500] savant: awesome
[2014-01-20 20:45:26 -0500] savant: running a command returns nil.
[2014-01-20 20:46:05 -0500] savant: WHATEVER SHELL_OUT
[2014-01-20 20:53:07 -0500] kallistec: savant: oops, sorry I didn't see this until now. Generally if you have a patch you want to get looked at, feel free to just chime in whenever, otherwise we just go through the list
[2014-01-20 20:53:29 -0500] kallistec: you can also use the in-hangout chat if you don't want to interrupt
[2014-01-20 20:54:26 -0500] savant: yeah no worries
[2014-01-20 20:54:36 -0500] savant: i just went in and commented on a bunch of pulls in github
[2014-01-20 20:54:48 -0500] savant: my only question was "do pulls still need the CLA"
[2014-01-20 20:55:44 -0500] savant: anyone ever have shell_out return nil?
[2014-01-20 20:59:34 -0500] DandyPandy: I'm getting an error trying to upload a cookbook. I'm trying to find what the error is, but I'm a little lost. The server is just returning "internal service error"
[2014-01-20 20:59:53 -0500] savant: kallistec: the other thing is "How many prs do you go through per merge review"
[2014-01-20 21:00:32 -0500] DandyPandy: knife is giving me "Server returned error for https://chef-server.blah.blah/sandboxes/000000000000fb1c05a3f07d079f35e0"
[2014-01-20 21:02:00 -0500] kallistec: savant: yeah, still need CLA except we have an obvious commit policy now
[2014-01-20 21:02:27 -0500] kallistec: savant: bottom half of this page http://docs.opscode.com/community_contributions.html
[2014-01-20 21:03:00 -0500] savant: mmm oks
[2014-01-20 21:03:14 -0500] savant: does jira have an api?
[2014-01-20 21:03:20 -0500] kallistec: savant: re: "anyone ever have shell_out return nil?" is this from Chef::Mixin::ShellOut ?
[2014-01-20 21:03:24 -0500] savant: yeah
[2014-01-20 21:03:46 -0500] savant: I'd be interested in writing a bot that will look at github usernames and jira users, and sees if they've filed a CLA with opscode
[2014-01-20 21:04:59 -0500] dwradcliffe: anyone know why I'd be getting this error? "service[nginx] cannot be found in the resource collection" right after I include nginx
[2014-01-20 21:05:57 -0500] dwradcliffe: code: https://gist.github.com/dwradcliffe/d5026a1082b8f9844c16
[2014-01-20 21:07:09 -0500] kallistec: savant: I'm not involved with this project or familiar with where it's at release-wise, but this might be of interest to you https://github.com/opscode/supermarket
[2014-01-20 21:14:11 -0500] savant: kallistec: did you have an idea about the shell_out business
[2014-01-20 21:14:21 -0500] savant: also, cool beans on the supermarket project.
[2014-01-20 21:14:59 -0500] kallistec: savant: no, that sounds very odd. would definitely need more info to try to debug
[2014-01-20 21:15:07 -0500] savant: yeah
[2014-01-20 21:15:09 -0500] savant: new box
[2014-01-20 21:15:13 -0500] savant: chef 11.8.0
[2014-01-20 21:15:19 -0500] savant: never had this happen before
[2014-01-20 21:16:31 -0500] scarolan: exit
[2014-01-20 21:22:08 -0500] DandyPandy: I was able to find an error for erchef with a connection refused, but I don't know to where it's trying to connect. And this only happens when I try to upload a specific cookbook. Error here: https://gist.github.com/dgivens/1c74ffb56e2b6f86e27d
[2014-01-20 21:26:46 -0500] docwhat: What's needed to setup something like the community chef cookbooks for use with Berkshelf in-house?
[2014-01-20 21:27:14 -0500] docwhat: e.g. how can I create a "http://community.opscode.com/cookbooks/" for in-house use?
[2014-01-20 21:27:33 -0500] DandyPandy: docwhat: I believe the next version of berkshelf will have a cookbook server
[2014-01-20 21:27:40 -0500] docwhat: oooh!
[2014-01-20 21:27:53 -0500] docwhat: DandyPandy: That'll be cool, then! :-D
[2014-01-20 21:27:57 -0500] DandyPandy: https://github.com/berkshelf/berkshelf-api
[2014-01-20 21:28:04 -0500] mattupstate: or just run your own in-house chef-server
[2014-01-20 21:28:37 -0500] DandyPandy: Yeah, I have my berkshelf setup with my chef-server as a source
[2014-01-20 21:28:58 -0500] DandyPandy: but that doesn't do any good if the chef-server goes down
[2014-01-20 21:29:18 -0500] DandyPandy: I only say that because I'm dealing with a dead chef server right now
[2014-01-20 21:32:04 -0500] wdilly: Folks, I have a recipe, that is failing to set the Group (using gid) on a directory, this group does not exist in /etc/group, but is a valid group in LDAP. I am able to manually change the group using chgrp. The error I get is" FATAL: Chef::Exceptions::GroupIDNotFound: directory[/cdd/rerpc] (user-handling::eucalyptus line 59) had an error: Chef::Exceptions::GroupIDNotFound" is there anyway I can work around this?
[2014-01-20 21:38:31 -0500] micxer: _dumfries: I didn't get to try the chef-client cookbook on Saturday but it worked like a charm, thanks again, now I can get to the really interesting stuff
[2014-01-20 21:38:53 -0500] shlant: wdilly: can you use a name instead of gid?
[2014-01-20 21:41:12 -0500] wdilly: shlant, no
[2014-01-20 21:55:54 -0500] wdilly: shlant, I mean, using the name also does not work
[2014-01-20 22:10:05 -0500] masterkorp: its a little bit sad that there is no support for debian on chef-server
[2014-01-20 22:11:39 -0500] scarolan: masterkorp: Do you mean paid support?  Or just the ability to install it?
[2014-01-20 22:12:35 -0500] masterkorp: the abaility to install it
[2014-01-20 22:13:07 -0500] gleam: works fine for me
[2014-01-20 22:13:17 -0500] gleam: i run the ubuntu 10.04 version on wheezy w/no problems
[2014-01-20 22:13:21 -0500] gleam: i'd imagine other versions would work fine too
[2014-01-20 22:13:36 -0500] scarolan: We officially support Ubuntu but I think the package should work on Debian.
[2014-01-20 22:14:02 -0500] masterkorp: gleam: mine hangs out on the runit start of rabbitmq
[2014-01-20 22:14:46 -0500] gleam: with what error?
[2014-01-20 22:14:54 -0500] masterkorp: none, just hangs
[2014-01-20 22:14:59 -0500] gleam: look in the runit logs..
[2014-01-20 22:15:13 -0500] rmohanx: anyone have cheers or gripes about Chef on RHEL v6.2/6.4?
[2014-01-20 22:15:14 -0500] masterkorp: oh the runit itself
[2014-01-20 22:15:21 -0500] gleam: look in /var/log/chef-server/rabbitmq
[2014-01-20 22:17:00 -0500] masterkorp: root@boobierack:/etc/service# sv start /opt/chef-server/sv/rabbitmq
[2014-01-20 22:17:02 -0500] masterkorp: warning: /opt/chef-server/sv/rabbitmq: unable to open supervise/ok: file does not exist
[2014-01-20 22:19:40 -0500] silk: Im running hosted chef, 11.4.4 as a daemon, from time to time, it will hang on a network problem and not recover, and subsequent runs will not start as it thinks the old run is still in progress
[2014-01-20 22:20:01 -0500] silk: Has there been any improvement of this issue in subsequent releases, or am I better off running from cron?
[2014-01-20 22:24:23 -0500] masterkorp: gleam: any idea ?
[2014-01-20 22:24:28 -0500] freerobby: Does anybody know why the following in an application block does not delete the geodata directory and then symlink it to the shared directory?   purge_before_symlink('geodata')
[2014-01-20 22:24:29 -0500] freerobby:   symlinks('geodata' => 'geodata')
[2014-01-20 22:25:16 -0500] freerobby: It seems like symlinks only work if the directory does not already exist (e.g. it will not clobber), but the purge isn't working?
[2014-01-20 22:25:43 -0500] gleam: sounds like your install got screwed up somehow, it exists for me. you haven't touched it since installing the package?
[2014-01-20 22:25:56 -0500] masterkorp: no
[2014-01-20 22:27:58 -0500] masterkorp:   * file[/opt/chef-server/sv/rabbitmq/down] action delete (up to date)
[2014-01-20 22:28:00 -0500] masterkorp:   * link[/opt/chef-server/init/rabbitmq] action create
[2014-01-20 22:28:02 -0500] masterkorp:     - create symlink at /opt/chef-server/init/rabbitmq to /opt/chef-server/embedded/bin/sv
[2014-01-20 22:28:04 -0500] masterkorp:   * link[/opt/chef-server/service/rabbitmq] action create
[2014-01-20 22:28:06 -0500] masterkorp:     - create symlink at /opt/chef-server/service/rabbitmq to /opt/chef-server/sv/rabbitmq
[2014-01-20 22:28:08 -0500] masterkorp:   * ruby_block[supervise_rabbitmq_sleep] action run
[2014-01-20 22:28:10 -0500] masterkorp: err pastebin failed
[2014-01-20 22:28:12 -0500] masterkorp: gleam: ^
[2014-01-20 22:28:21 -0500] masterkorp: just hangs there
[2014-01-20 22:29:18 -0500] gleam: what chef package/what debian version?
[2014-01-20 22:31:20 -0500] masterkorp: chef-server_11.0.10-1.ubuntu.10.04_amd64.deb
[2014-01-20 22:33:25 -0500] DandyPandy: I have a node that has a single recipe in its run list and it's getting an error resolving cookbooks, but lists nothing under missing cookbooks. Any idea how I can track this down?
[2014-01-20 22:34:58 -0500] masterkorp: gleam: debian 7
[2014-01-20 22:35:30 -0500] gleam: mystery
[2014-01-20 22:35:40 -0500] gleam: run chef-server-ctl reconfigure and see what happens
[2014-01-20 22:35:48 -0500] masterkorp: lol sis
[2014-01-20 22:36:16 -0500] masterkorp: gleam: i just pasted you the output of that run
[2014-01-20 22:36:24 -0500] masterkorp: i ran it a dozen times
[2014-01-20 22:36:27 -0500] gleam: ah, ok, i thought that was from starting it
[2014-01-20 22:36:45 -0500] masterkorp: i just hangs on that sleep ruby block that runit has
[2014-01-20 22:43:04 -0500] gleam: do you see a chef-server runsvdir entry at the bottom of /etc/inittab/
[2014-01-20 22:43:11 -0500] gleam: -/$
[2014-01-20 22:46:05 -0500] masterkorp: #-- runit end
[2014-01-20 22:46:07 -0500] masterkorp: SV:123456:respawn:/opt/chef-server/embedded/bin/runsvdir-start
[2014-01-20 22:46:15 -0500] gleam: and is runsvdir running?
[2014-01-20 22:46:17 -0500] masterkorp: this ?
[2014-01-20 22:46:19 -0500] masterkorp: no
[2014-01-20 22:46:25 -0500] gleam: run "init q"
[2014-01-20 22:46:28 -0500] gleam: and then chef-server-ctl reconfigure
[2014-01-20 22:46:30 -0500] gleam: see if that does it
[2014-01-20 22:47:00 -0500] masterkorp: nope
[2014-01-20 22:48:15 -0500] masterkorp: i just ran it by hand
[2014-01-20 22:51:13 -0500] masterkorp: yay i just got an awsner on the mailing list
[2014-01-20 22:56:23 -0500] DandyPandy: Would someone mind taking a look at this output and tell me if this is a dependency conflict? https://gist.github.com/dgivens/169ee1654ddb6e4650d9
[2014-01-20 22:56:57 -0500] DandyPandy: Basically, I have unable to resolve cookbook dependencies and it lists (nginx = 2.0.8) -> (yum < 3.0.0) and (nginx = 2.0.8) -> (runit = 1.5.8) -> (yum ~> 3.0)
[2014-01-20 22:57:20 -0500] DandyPandy: Is the yum < 3.0.0 and yum ~> 3.0 causing a conflict and the error I'm seeing?
[2014-01-20 23:20:01 -0500] RJ2: i installed chef-client on OS X (latest), added /opt/chef/bin to my path, when i run knife i see: $ /opt/chef/bin/knife   /opt/chef/embedded/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find chef (>= 0)
[2014-01-20 23:38:54 -0500] namita: I want to use windows_package in one of my reciep
[2014-01-20 23:39:16 -0500] namita: and I am using the source attribute to point it to an mdi file
[2014-01-20 23:39:44 -0500] namita: however the location of this file in not MSFT URI but a git repo that I created
[2014-01-20 23:40:14 -0500] namita: any suggestions on how I could use the source attribute?
[2014-01-20 23:44:33 -0500] ribo: does enable_submodules in deploy actually work, because it seems to just create an empty directory with a .git ref file
[2014-01-20 23:45:35 -0500] namita: I have not used enable_submodules
[2014-01-20 23:45:45 -0500] namita: this is how my code looks like
[2014-01-20 23:45:47 -0500] namita: windows_package "Install SQLSysClrTypes" do
[2014-01-20 23:45:48 -0500] namita:   source "http://download.microsoft.com/download/6/4/2/6423CAB9-6A89-48F7-ABC8-9F575CAC0A40/SQLSysClrTypes.msi"
[2014-01-20 23:45:49 -0500] namita:   options "/q"
[2014-01-20 23:45:50 -0500] namita:   action :install
[2014-01-20 23:45:51 -0500] namita: end
[2014-01-20 23:46:20 -0500] namita: in the source I don't wish to specify the link to the microsoft page
[2014-01-20 23:46:32 -0500] namita: but a git path
[2014-01-20 23:47:04 -0500] namita: but under my git path I have the .msi file placed under a dir called software
[2014-01-20 23:47:13 -0500] namita: and I can only get to software
[2014-01-20 23:47:26 -0500] namita: I don't have the URL until the .msi file

[2014-01-18 00:38:17 -0500] Netsnipe: are any OpsCode people awake right now?
[2014-01-18 00:39:00 -0500] mpechner: How do I get a yum_package run before a chef_gem resource?  the chef_gem respurce depends on the  yum_package_resource.
[2014-01-18 01:00:01 -0500] dsop: i am a bit cnfused how to use ruby_block correctly. I define a block and i want to notify it to run, but i also want to pass variables into that defined block and i am not sure how to do that
[2014-01-18 01:00:59 -0500] dsop: so basically a block do |a,b|.... and i don't know how to pass a,b when notifiying the block to run from another resource
[2014-01-18 01:02:50 -0500] kammouflage: @dsop have you tried having the block subscribe to the other resource?
[2014-01-18 01:03:19 -0500] dsop: kammouflage: aeh..how? i am fairly new to chef
[2014-01-18 01:03:48 -0500] dsop: kammouflage: basically the block does preocumputation for variables used in a template, so i want to subscribe it to the template
[2014-01-18 01:04:12 -0500] dsop: but i only have some of the necessary infomration for the precomputation when the template is evaluated
[2014-01-18 01:04:45 -0500] kammouflage: ok subscribe probably isn't the best way
[2014-01-18 01:05:24 -0500] dsop: kammouflage: one way that actually works is to re-create the block everytime i evaluate the template but that is..aeh not ideal.
[2014-01-18 01:05:39 -0500] dsop: and i am a bit puzzled what the idomatic chef way would be to achieve it
[2014-01-18 01:06:41 -0500] kammouflage: can you provide a code sample?
[2014-01-18 01:09:06 -0500] kammouflage: so, this would be an example installing a zen_pack, but could point you in the direction you're looking for...
[2014-01-18 01:09:07 -0500] kammouflage: node["zenoss"]["server"]["installed_zenpacks"].each do |package, zpversion|
[2014-01-18 01:09:07 -0500] kammouflage:   zenoss_zenpack "#{package}" do
[2014-01-18 01:09:07 -0500] kammouflage:     version zpversion
[2014-01-18 01:09:07 -0500] kammouflage:     action :install
[2014-01-18 01:09:08 -0500] kammouflage:     notifies :restart, resources(:service => "zenoss"), :immediate
[2014-01-18 01:09:08 -0500] kammouflage:   end
[2014-01-18 01:09:08 -0500] kammouflage: end
[2014-01-18 01:09:39 -0500] kammouflage: ahhh
[2014-01-18 01:09:53 -0500] kammouflage: i think i know what you're looking for
[2014-01-18 01:10:30 -0500] kammouflage: %w{var1 var2 var3}.each do |a,b,c|
[2014-01-18 01:11:15 -0500] dsop: kammouflage: http://pastebin.com/CUqK8BWq (a bit generic)...
[2014-01-18 01:13:02 -0500] dsop: kammouflage: i want to reuse that block on two different occasions
[2014-01-18 01:14:15 -0500] kammouflage: ok so, |path, confname| have to derive from somewhere like node[:some][attribute_array].each do |path,confname|
[2014-01-18 01:14:35 -0500] dsop: kammouflage: yeah basically when i want to call the block
[2014-01-18 01:14:45 -0500] dsop: kammouflage: but i think i just dont do it as a ruby block but simply as a function or so
[2014-01-18 01:15:00 -0500] dsop: and just evaluate the function inside the templates everytime
[2014-01-18 01:15:37 -0500] kammouflage: where do the variables come from?
[2014-01-18 01:16:01 -0500] dsop: kammouflage: they are known within the Dir.glob(..)
[2014-01-18 01:16:13 -0500] kammouflage: dstop: ok
[2014-01-18 01:16:28 -0500] dsop: kammouflage: but i think i got it
[2014-01-18 01:16:43 -0500] dsop: it would be still interesting if i could pass variables into the defined block when notifiyng it
[2014-01-18 01:16:55 -0500] dsop: but then maybe that's not even possible, i don't know too much ruby
[2014-01-18 01:23:05 -0500] dsop: kammouflage: thanks for the help
[2014-01-18 01:23:07 -0500] dsop: much appreciated
[2014-01-18 01:55:40 -0500] kammouflage: @dsop: anytime, sorry wasn't much help.
[2014-01-18 02:28:32 -0500] amiri:  I am trying to set up shared directories with deploy_revision, and I cannot seem to get my symlinks to work. I have been over and over the docs, but chef always deletes whatever is in the shared directory, and then makes broken symlinks in the deploy directory. What can I do?
[2014-01-18 02:59:31 -0500] HighwayofLife: Hey, does anyone know how to show or list all of the attributes on a chef-solo node? (Vagrant provisioned virtualbox)
[2014-01-18 03:04:42 -0500] coderanger: HighwayofLife: You can answer here too
[2014-01-18 03:04:44 -0500] coderanger: in both channels
[2014-01-18 09:13:41 -0500] epcim: Is there a way to include_recipe like "self::another_recipe" ? without specifying the cookbook name?
[2014-01-18 14:21:14 -0500] micxer: hi there, I'm trying to install chef-client 11.8.2-1 on a newly installed Debian 7.3, but it doesn't set up the chef-client process
[2014-01-18 14:23:14 -0500] bubu: Hola, anyone good with escape characters in data_bags? Am trying to do something like this but when I try and upload the data bag, chef isn't having any of it: https://gist.github.com/anonymous/eb08e6a03da2e14b6467
[2014-01-18 14:23:29 -0500] _dumfries: micxer: can you elaborate on how you're installing Chef?
[2014-01-18 14:24:23 -0500] micxer: sorry, of course: using the default method downloading with curl and piping it into bash
[2014-01-18 14:25:13 -0500] micxer: afterwards everything is in /opt/chef, but no services setup at all
[2014-01-18 14:26:36 -0500] _dumfries: micxer: did you happen to run the post installation configuration command?
[2014-01-18 14:27:12 -0500] _dumfries: micxer: IIRC it's "chef-server-ctl reconfigure"
[2014-01-18 14:29:33 -0500] micxer: _dumfries: well, the thing is, i just want it to a client, not a server
[2014-01-18 14:29:54 -0500] micxer: _dumfries: i'm just playing around using hosted chef for now
[2014-01-18 14:30:26 -0500] micxer: I also tried it with knife bootstrap, but it didn't work either
[2014-01-18 14:30:29 -0500] micxer: same result
[2014-01-18 14:31:21 -0500] _dumfries: micxer: After the client installation you'll have a standard init script, you don't have one?
[2014-01-18 14:32:24 -0500] micxer: _dumfries: I assume it should be named /etc/init.d/chef-client (as I can find in the sources on github), but there's nothing in /etc/init.d
[2014-01-18 14:33:02 -0500] _dumfries: Yeah, silly question can you confirm you're installing the client not the server?
[2014-01-18 14:34:38 -0500] micxer: _dumfries: curl -L https://www.opscode.com/chef/install.sh | sudo bash from the Chef client tab on getchef.com/chef/install
[2014-01-18 14:35:31 -0500] micxer: strange thing though, in the 10.* deb packages, that are in opscode repos, there is a init script when I do dpkg --contents on the package
[2014-01-18 14:35:58 -0500] _dumfries: They should be using the omnibus packaging now though, you'll find everything under /opt/chef
[2014-01-18 14:36:01 -0500] micxer: the ones for 11.* that are downloaded don't contain anything that looks like setting up an init script
[2014-01-18 14:36:33 -0500] _dumfries: I use a modified chef-client cookbook after bootstrap to ensure the client is configured the way I expect to to be FYIW.
[2014-01-18 14:37:01 -0500] _dumfries: micxer: https://github.com/opscode-cookbooks/chef-client
[2014-01-18 14:39:39 -0500] micxer: _dumfries: hmm, sort of meta to use the software I want to setup to setup itself :-)
[2014-01-18 14:39:53 -0500] micxer: _dumfries: but thanks for the hint, I'll try that
[2014-01-18 14:40:12 -0500] _dumfries: I want to use an Xzibit quote here.
[2014-01-18 14:40:23 -0500] micxer: sounds reasonable to bring it to a known state
[2014-01-18 14:40:43 -0500] _dumfries: Aye
[2014-01-18 14:48:32 -0500] bubu: Anyone any good with escaping stuff in data bags? https://gist.github.com/anonymous/eb08e6a03da2e14b6467
[2014-01-18 14:50:37 -0500] bubu: I need it formatted as in the data bag
[2014-01-18 14:50:55 -0500] countdigi_: try double \\
[2014-01-18 14:51:12 -0500] bubu: I can douvble escape like   "outfile": "/tmp/user-dump-$(date +\\'\\%Y-\\%m-\\%d\\').csv",
[2014-01-18 14:52:16 -0500] countdigi_: not sure you need all those escapes though - try running this from your cli:
[2014-01-18 14:52:18 -0500] bubu: which looks as I want it on the chef server, but when I do a search on it I get returned the double escapes and I want it to return the original   "\'\%Y-\%m-\%d\')",
[2014-01-18 14:52:21 -0500] countdigi_: echo $(date +%Y-%m-%d).csv
[2014-01-18 14:52:25 -0500] countdigi_: should parse right
[2014-01-18 14:52:42 -0500] bubu: countdigi_: It's for a cron job eventually and cron is fussy
[2014-01-18 14:53:18 -0500] bubu: I need the cron formatted as -$(date +'\%Y-\%m-\%d').csv
[2014-01-18 14:53:30 -0500] countdigi_: right cause % is newline for cron
[2014-01-18 14:53:45 -0500] bubu: ^
[2014-01-18 14:54:16 -0500] countdigi_: so \\%Y-\\%m ... etc i would hypothesize
[2014-01-18 14:54:30 -0500] countdigi_: http://stackoverflow.com/questions/3020094/how-should-i-escape-strings-in-json
[2014-01-18 14:55:32 -0500] bubu: countdigi_: but when I do a data bag search, I get returned \\&Y-\\&m which cron is going to throw a wobbly about..
[2014-01-18 14:55:51 -0500] bubu: s/&/%/
[2014-01-18 14:58:14 -0500] countdigi_: playing around w/ json and ruby - i see what u mean
[2014-01-18 14:58:41 -0500] bubu: hmmm
[2014-01-18 14:58:49 -0500] bubu: jtimberman: any ideas? :)
[2014-01-18 14:59:26 -0500] countdigi_: i don't think its specific to chef, its a json interpretation for sure here is my test prog
[2014-01-18 14:59:34 -0500] countdigi_: require 'json'
[2014-01-18 14:59:34 -0500] countdigi_: puts JSON.load(IO.read('t.json'))
[2014-01-18 14:59:51 -0500] countdigi_: the t.json is the datbag
[2014-01-18 15:13:19 -0500] countdigi_: http://pastebin.com/PQhiZ3mq
[2014-01-18 15:13:43 -0500] countdigi_: looks right to me - i was getting confused cause the to_s for the object was showing an extra backslash but the puts shows the string is correct
[2014-01-18 15:16:49 -0500] countdigi_: works w/ yajl as well
[2014-01-18 15:36:35 -0500] bubu: countdigi_: rgr I know it's not a chef specific thing but double escaping isn't getting me what I want when I do the data bag search :(
[2014-01-18 15:37:08 -0500] countdigi_: i think the search might be showing it as escaped - have u tried writing to the file or using a log on one elemet?
[2014-01-18 17:06:02 -0500] aboudreault: anyidea why the locale recipe fails on ubuntu saucy: STDERR: *** update-locale: Error: invalid locale settings:  LANG=en_US.utf8
[2014-01-18 20:21:02 -0500] leandromoreira: Hi there guys, I'm using Berksfile vendorized to recipes folder. I would like to know what is the best way to override attributes? node.default['rbenv']['rubies'] = [ "1.9.3-p0", "jruby-1.6.5" ]. I mean, do I really need to edit cookbooks/rbenv/attributes/default.rb or there is a common way to configure it?
[2014-01-18 20:22:43 -0500] leandromoreira: ps: I'm learning it then sorry if I asked a very stupid question.
[2014-01-18 20:24:17 -0500] leandromoreira: I was looking for a folder (attributes) at cookbooks level.. but it seems that it has only data_bags, environments, nodes, roles, site-cookbooks and apparently none of these folders were meant to override/configure cookbooks from community.
[2014-01-18 20:41:38 -0500] leandromoreira: Can anyone here give me a tip, I'm beginner! I'm using Berksfile vendorized to /recipes folder. I would like to know what is the best way to override attributes? node.default['rbenv']['rubies'] = [ "1.9.3-p0", "jruby-1.6.5" ]. I mean, do I really need to edit cookbooks/rbenv/attributes/default.rb or there is a common way to configure it?
[2014-01-18 22:09:06 -0500] aboudreault: I had a recipe with bash script that was using sudo and it was working fine... not it seems that something is wrong. I'm using vagrant+chef
[2014-01-18 22:09:18 -0500] aboudreault: STDERR: sudo: no tty present and no askpass program specified
[2014-01-18 22:09:18 -0500] aboudreault: Sorry, try again.
[2014-01-18 22:09:21 -0500] aboudreault: any idea?
[2014-01-18 22:10:14 -0500] aboudreault: note that is I log into the machine using vagrant ssh. I can do sudo echo 'hi' without password
[2014-01-18 22:26:30 -0500] leandromoreira: Can anyone here give me a tip, I'm beginner! I'm using Berksfile vendorized to /recipes folder. I would like to know what is the best way to override attributes? node.default['rbenv']['rubies'] = [ "1.9.3-p0", "jruby-1.6.5" ]. I mean, do I really need to edit cookbooks/rbenv/attributes/default.rb or there is a common way to configure it?
[2014-01-18 22:34:05 -0500] davidordave: @leandromoreira, I'm not entirely sure of your use case, but generally speaking you override attributes either in a wrapper cookbook or in a role/environment.
[2014-01-18 22:35:09 -0500] leandromoreira: thanks davidordave do you have any docs or example about overriding these attributes over role/environment ? (is it possible to do that on nodes/default.json?)
[2014-01-18 22:37:33 -0500] davidordave: default docs for roles: http://docs.opscode.com/essentials_roles.html
[2014-01-18 22:37:59 -0500] leandromoreira: thanks davidordave I google it myself =x very dummy to ask for that
[2014-01-18 23:59:31 -0500] segv: hey guys quick q

[2014-01-30 00:01:06 -0500] addisonj: can a provider set node attributes?
[2014-01-30 00:01:33 -0500] coderanger: addisonj: Sure, its just code
[2014-01-30 00:01:56 -0500] addisonj: but providers can't read nod attributes right? they don't get passed node
[2014-01-30 00:04:09 -0500] coderanger: They do
[2014-01-30 00:04:18 -0500] coderanger: Same as in recipe code, #nome
[2014-01-30 00:04:21 -0500] coderanger: er #node
[2014-01-30 00:04:54 -0500] addisonj: oh, for some reason I didn't think they did, some blog post or something mentioned that
[2014-01-30 00:07:36 -0500] coderanger: addisonj: library code doesn't get it automatically
[2014-01-30 00:11:33 -0500] adamdevops: Having a chef run fail with "exception": "NoMethodError: chef_gem[net-ldap] (gemini_server::users line 32) had an error: NoMethodError: undefined method `full_name' for nil:NilClass","
[2014-01-30 00:11:56 -0500] adamdevops: Anyone have an idea about what to do next? Looked at stack trace, couldn't make heads or tails of it
[2014-01-30 00:12:13 -0500] adamdevops: Looks like the net-ldap gem can't be run?
[2014-01-30 00:14:54 -0500] silk: Is there a shortcut to a resources name that can be used within its definition for example a not_if{} statement within a template resource that refers to its name?
[2014-01-30 00:16:23 -0500] coderanger: silk: No
[2014-01-30 00:16:31 -0500] coderanger: Well so within the defintion yes
[2014-01-30 00:16:36 -0500] coderanger: but not within a not_if/only_if block
[2014-01-30 00:16:44 -0500] silk: bugger
[2014-01-30 00:16:57 -0500] silk: thanks
[2014-01-30 00:18:53 -0500] coderanger: silk: What are you trying to do?
[2014-01-30 00:19:48 -0500] silk: migrate a template from one location to another across multiple environments
[2014-01-30 00:20:08 -0500] silk: but not provision the file if its a symlink
[2014-01-30 00:20:17 -0500] silk: well, template
[2014-01-30 00:20:36 -0500] silk: so continue to manage a template until it is replaced as a symlink
[2014-01-30 01:00:22 -0500] law: hey all, I think I'm doing something wrong with my (older) 'users' cookbook
[2014-01-30 01:00:57 -0500] law: the current users cookbook does a 'databag' search, and adds users to the sysadmin group. I was trying to make it add users to a 'dev' group as well
[2014-01-30 01:04:22 -0500] law: actually, nm... I'm an idiot
[2014-01-30 01:04:35 -0500] law: I forgot to update the users cookbook version.  derp
[2014-01-30 01:04:39 -0500] law: now it does what I expect it to
[2014-01-30 01:19:36 -0500] law: alright, maybe not quite
[2014-01-30 01:19:43 -0500] law: so, here's users::sysadmin - http://pastebin.com/JWMSeYZv
[2014-01-30 01:20:03 -0500] law: and as we can see on line 24, it does the databag search for anything matching '*sysadmin*'
[2014-01-30 01:20:41 -0500] law: users::dev is exactly the same, except it adds a group called 'dev' with a GID of 2301 and searches for the '*dev*' string, and populates a "dev_group" array
[2014-01-30 01:22:17 -0500] amd64: setient slowly slid out of his trousers, inch by inch. epsas slowly continued to lower his boxer
[2014-01-30 01:22:20 -0500] amd64: shorts until all of him was exposed. And that is when the next round of the office orgasm took
[2014-01-30 01:22:23 -0500] amd64: place. epsas begun gushing pussy juice as her body swayed back and forth, eyes fixated on setient's
[2014-01-30 01:22:26 -0500] amd64: now 9inch soft cock...his cock head was the size of a golf racquetball. 7.5 inches thick. This was
[2014-01-30 01:22:29 -0500] amd64: the biggest setient had EVER been soft before. epsas was outside of herself. This giant cock in
[2014-01-30 01:22:32 -0500] amd64: front of her was what she had been dreaming about the night before. epsas let out a giant gasp as
[2014-01-30 01:23:17 -0500] law: here's the databag - http://pastebin.com/vAVqq47R
[2014-01-30 01:23:45 -0500] law: when line 3 is "groups": "sysadmin",
[2014-01-30 01:23:50 -0500] law: or "dev", it works as expected
[2014-01-30 01:24:02 -0500] law: but when it's an array like that, it doesn't add the user to ANY groups
[2014-01-30 01:24:21 -0500] law: is there a way to tell the databag search that it might be searching through an array as well as a string?
[2014-01-30 01:26:45 -0500] law: however, if I completely remove all the groups in question, it does appear to work right...
[2014-01-30 01:37:21 -0500] law: or, if I run chef-client twice
[2014-01-30 01:37:26 -0500] law: (it will work right)
[2014-01-30 02:34:21 -0500] forehand: Getting a recipe not found exception.  "Could not find recipe mod_mvc3 for cookbook iis".  I have the IIS cookbook uploaded to my server, but looking through it I don't see mod_mvc3 included in it. Was more or less following http://developer.rackspace.com/blog/step-by-step-walkthrough-to-using-chef-to-bootstrap-windows-nodes-on-the-rackspace-cloud.html  Any help would be appreciated.
[2014-01-30 02:37:54 -0500] forehand: nm o_o
[2014-01-30 02:45:47 -0500] mfrick: I'm having trouble loading output from an external/shell command into a template.  The command needs to be run on each chef-client run, but preferably at that point in the code, not at the begin of the run.  Any ideas?
[2014-01-30 02:46:45 -0500] mfrick: I've tried several different things including creating a new template resource inside of a ruby_block, but I can't seem to get that to work (no update to the template) despite the command output being available there.
[2014-01-30 02:55:00 -0500] helfire: shouldnt 'kitchen login', if there's one vm, just login to the that one?
[2014-01-30 03:41:15 -0500] forehand: Anyone have experience with the the sql_server cookbook?  Noob question.
[2014-01-30 06:05:34 -0500] flaccid: mfrick: you still need help on that shell thing?
[2014-01-30 06:54:00 -0500] paresh: can i have multipe s3_file recipes
[2014-01-30 06:54:06 -0500] paresh: and how to do it
[2014-01-30 06:56:32 -0500] flaccid: paresh: i guess so, but i don't know what cookbook you are using
[2014-01-30 08:01:31 -0500] attribcouch: I am trying to add attribute from couchdb by doing include_attribute "couchdb" , but its not showing in my gui to configure the version
[2014-01-30 08:02:03 -0500] attribcouch: couchdb cookbook has a default file with default["couchdb"]["version"] = "1.2.0"
[2014-01-30 08:02:13 -0500] attribcouch: anybody know what could be the problem
[2014-01-30 09:32:36 -0500] sacoetzee: hey all
[2014-01-30 09:33:32 -0500] sacoetzee: has anyone here ever needed to enable http_wire_trace for knife connection to AWS
[2014-01-30 10:57:59 -0500] sacoetzee: has anyone here ever needed to enable http_wire_trace for knife connection to AWSG5BH7JKL;'
[2014-01-30 10:58:21 -0500] sacoetzee: 45zdsddddddddddddddddddddddddddddddalsh'h
[2014-01-30 10:58:32 -0500] sacoetzee: crap sorry. ^cat says hi.
[2014-01-30 10:59:04 -0500] flaccid: nntr
[2014-01-30 12:00:49 -0500] AikiLinux: Hello
[2014-01-30 12:01:20 -0500] AikiLinux: is there an option to specify "exclude_recipe" for a run ?
[2014-01-30 12:02:17 -0500] AikiLinux: I have a base role that installs many things and then the "function" role, but one of the recipes in the base role is an agent for a product
[2014-01-30 12:02:45 -0500] AikiLinux: and the product recipe breaks due to the fact that the agent files already exist on the server
[2014-01-30 12:02:47 -0500] daxroc: AikiLinux: Should it be in the base role then ?
[2014-01-30 12:03:09 -0500] AikiLinux: it is meant to be deployed to all other boxes
[2014-01-30 12:03:40 -0500] daxroc: base being common to all servers. it shouldn't include actions from other cookbooks/roles no ?
[2014-01-30 12:04:50 -0500] AikiLinux: it is not including an action from the product recipe , but from the product agent recipe, which all servers are meant to have
[2014-01-30 12:05:21 -0500] AikiLinux: but the server itself does not require the agent and it installs it (internally) when the product is deplyed
[2014-01-30 12:05:41 -0500] AikiLinux: if it helps , the product is OSSEC
[2014-01-30 12:06:13 -0500] daxroc: AikiLinux: Then your agent recipe isn't right it needs to accommodate it already being applied and adjust configuration no ?
[2014-01-30 12:07:14 -0500] AikiLinux: the agent is installed earlier in the runlist , but cause some of the files are named the same the server recipe fails to install properly
[2014-01-30 12:23:32 -0500] cku: hi there
[2014-01-30 12:25:29 -0500] cku: got some problems on http://docs.opscode.com/essentials_cookbook_files.html
[2014-01-30 12:27:06 -0500] cku: are the files directory entrys like  host-foo.example.com working well in chef cookbooks?
[2014-01-30 12:39:10 -0500] flaccid: cku: not what you mean there
[2014-01-30 12:50:21 -0500] CaptainQuirk: Hi
[2014-01-30 12:51:12 -0500] CaptainQuirk: What can explain that one of my cookbook path is ignored
[2014-01-30 12:51:51 -0500] CaptainQuirk: I have cookbook_path [ base_cookbook_path, vendor_cookbook_path ] in my solo.rb
[2014-01-30 12:52:56 -0500] CaptainQuirk: this during a chefspec run
[2014-01-30 12:57:35 -0500] shay-: hi is there a difference between node['hostname'] and node[:hostname] and node.hostname in a tmeplate?
[2014-01-30 12:59:20 -0500] Cope: no
[2014-01-30 13:10:49 -0500] shay-: ok thanks. After bootstraping the node with -N servername parameter, chef writes localhost into the /etc/hosts file using node[:hostname]. How can I get the real hostname is this case?
[2014-01-30 13:14:20 -0500] flaccid: shay-: do you mean the hostname after you have changed it?
[2014-01-30 13:16:36 -0500] shay-: flaccid: I want to setup a machine using a kickstart linux iso. Then I bootstrap the node with knife bootstrap ... -N prod-web-001. So I give the node the name during the bootstrap. In my cookbooks I want to use exatly this name to write into /etc/hosts and so on. In the past this worked, but seems to be broken now. Always writes localhost into /etc/hosts
[2014-01-30 13:17:46 -0500] flaccid: shay-: chef itself does not edit /etc/hosts. its either a cookbook or something else you are using
[2014-01-30 13:20:32 -0500] shay-: flaccid: yes I am using my own cookbook which uses node[:hostname] in the template for /etc/hosts. The problem is that this returns localhost though I use -N when doing the bootstrap. The question is how can I access the calue I use when bootstrapping with -N option.
[2014-01-30 13:22:55 -0500] flaccid: shay-: i'm not quite sure i understand but i recommend using a cookbook that does that better. i have one, https://github.com/xhost-cookbooks/system there is also https://github.com/3ofcoins/chef-cookbook-hostname
[2014-01-30 13:25:05 -0500] bixu_: I have some questions about the current standard 'sudo' + 'users' cookbook setup (the opscode cookbooks).  Is there anyone I can PM about this, or should I just post here?
[2014-01-30 13:25:53 -0500] flaccid: bixu: i'd probably just ask
[2014-01-30 13:26:01 -0500] bixu: flaccid: Okay :)
[2014-01-30 13:26:45 -0500] bixu: I'm setting these two attributes in a site-specific recipe:
[2014-01-30 13:26:46 -0500] bixu: node.default['authorization']['sudo']['groups'] = "sysadmin"
[2014-01-30 13:26:48 -0500] bixu: and
[2014-01-30 13:26:54 -0500] bixu: node.default['authorization']['sudo']['passwordless']  = true
[2014-01-30 13:27:38 -0500] shay-: flaccid: thanks
[2014-01-30 13:27:39 -0500] bixu: I thought this would be enough to give access to any users defined in the users databag, but I don't see any entries for the 'sysadmin' group in 'visudo' output.
[2014-01-30 13:27:55 -0500] bixu: What am I missing?
[2014-01-30 13:28:46 -0500] bixu: (users in my users databage *are* getting created properly, and properly added to the 'sysadmin' group)
[2014-01-30 13:29:20 -0500] AlainODea: bixu: do the items in the users databag have "groups": ["sysadmins", ...] ?
[2014-01-30 13:29:37 -0500] AlainODea: bixu: scratch that :S
[2014-01-30 13:29:51 -0500] bixu: AlainODea: They have   "groups": "sysadmin",
[2014-01-30 13:30:11 -0500] flaccid: check shell, groups foobaruser
[2014-01-30 13:30:31 -0500] flaccid: but if its not in /etc/sudoers there is a cookbook issue
[2014-01-30 13:31:03 -0500] bixu: I feel like this has to be my fault, because I'm using Ubuntu 12.04 here and the latest opscode cookbooks.
[2014-01-30 13:31:18 -0500] flaccid: bixu: i do the same and it works ok
[2014-01-30 13:31:40 -0500] bixu: flaccid: Do you set your attributes via role or cookbook?
[2014-01-30 13:31:46 -0500] AlainODea: bixu: I remember having to put the sudo cookbook in my run list explicitly. I don't know if that is still an issue
[2014-01-30 13:31:54 -0500] flaccid: but i set the attribute on the node itself, not in cookbook code
[2014-01-30 13:32:07 -0500] flaccid: i do it on the node itself
[2014-01-30 13:32:20 -0500] bixu: As I mentioned before, I'm doing it from a cookbook via 'node.default'
[2014-01-30 13:32:49 -0500] flaccid: i do it with a node.json
[2014-01-30 13:33:03 -0500] bixu: AlainODea: You mean you couldn't do it via a cookbook dependency?
[2014-01-30 13:34:41 -0500] AlainODea: bixu: it didn't seem like it and it didn't make sense. I'll get back to you in a few. I'm driving to the office now
[2014-01-30 13:34:57 -0500] bixu: AlainODea: Concentrate on driving!
[2014-01-30 13:35:17 -0500] AlainODea: bixu: well. I'm not literally driving yet ;)
[2014-01-30 13:36:53 -0500] flaccid: bixu: works fine for me https://github.com/chef-blueprints/linux_box/blob/master/share/chef/node.json.rightscale#L7
[2014-01-30 13:37:09 -0500] bixu: flaccid: Thanks, I'll have a look
[2014-01-30 13:52:51 -0500] bixu: Figured it out.  I needed to explicitly call 'include_recipe "sudo"' and also put my group in an array (in attributes) rather than a string, because the provider template calls the .each method.
[2014-01-30 13:53:00 -0500] bixu: Thanks for the feedback.
[2014-01-30 13:55:19 -0500] flaccid: bixu: okies that explains it
[2014-01-30 13:55:35 -0500] flaccid: i should of picked up on that sorry
[2014-01-30 14:00:48 -0500] mil0: Should I be able to run the following on a chef-shell?
[2014-01-30 14:00:49 -0500] mil0: search(:node, "role:myrole-name").first
[2014-01-30 14:05:10 -0500] mil0: somehow it results in:
[2014-01-30 14:05:11 -0500] mil0: [2014-01-30T14:58:25+01:00] ERROR: Connection refused connecting to https://localhost/search/node?q=role:master-solr-server&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000, retry 1/5
[2014-01-30 14:09:58 -0500] ocholetras: hi guys
[2014-01-30 14:10:17 -0500] ocholetras: anyone knows if excecute resource, when change the user it loads his environment to execute the command?
[2014-01-30 14:10:57 -0500] helfire: ocholetras: pretty sure not, but you could do a bash -l to load the login scripts
[2014-01-30 14:11:09 -0500] ocholetras: aha!
[2014-01-30 14:11:21 -0500] ocholetras: ok
[2014-01-30 14:30:25 -0500] AlainODea: bixu: glad to see it worked out :)
[2014-01-30 14:32:02 -0500] ocholetras: helfire: thx
[2014-01-30 14:38:26 -0500] helfire: np
[2014-01-30 14:47:28 -0500] shlant: anyone familiar with Hash Sum mismatch when installing packages?
[2014-01-30 14:48:35 -0500] shlant: all the solutions seem like a PITA
[2014-01-30 15:02:05 -0500] daxroc: When using rvm ruby 1.9.3-p484 I get an error executing knife tho I have installed the chef gem. Is this common?
[2014-01-30 15:03:46 -0500] daxroc: http://pastebin.ca/2602936
[2014-01-30 15:04:09 -0500] daxroc: ^ Output from 'knife'
[2014-01-30 15:08:25 -0500] bofur: @daxroc: whick knife command exactly ?
[2014-01-30 15:09:17 -0500] tobz: hai friends.  anybody have experience with doing file/template overrides with something other than the limited set of specificity modifiers?
[2014-01-30 15:09:19 -0500] daxroc: bofur knife in general, but the command I was trying before was knife test cookbook
[2014-01-30 15:09:22 -0500] bofur: @shlant: which kind of package (apt, gem, ipc, rpm...) ?
[2014-01-30 15:09:35 -0500] tobz: i.e. using tags on the node or the environment
[2014-01-30 15:10:20 -0500] daxroc: bofur: sorry it was bundle exec knife cookbook test yiface
[2014-01-30 15:10:23 -0500] shlant: bofur: apt
[2014-01-30 15:10:54 -0500] shlant: or a even more direct question: how do you upgrade php to 5.5 on ubuntu 120.4?
[2014-01-30 15:11:07 -0500] shlant: using chef
[2014-01-30 15:11:34 -0500] bofur: @daxroc: if you run "knife node list" do you have any error ?
[2014-01-30 15:12:56 -0500] jonlives: daxroc: that output implies you're using chef version 0.8.10 - is that correct?
[2014-01-30 15:13:01 -0500] jonlives: that dates from 2010...
[2014-01-30 15:13:35 -0500] daxroc: jonlives: just noticed that now.
[2014-01-30 15:13:49 -0500] daxroc: was installed as a dependancy I guess
[2014-01-30 15:13:57 -0500] jonlives: daxroc: yeah you'll be wanting to update that :p
[2014-01-30 15:14:52 -0500] daxroc: nah I like a challenge!
[2014-01-30 15:15:20 -0500] daxroc: jonlives: appreciate it
[2014-01-30 15:15:29 -0500] jonlives: np
[2014-01-30 15:16:40 -0500] daxroc: Is strainer a good tool to use with kitchen, chefspec and serverspec, and foodcritic
[2014-01-30 15:18:47 -0500] srenatus: yes
[2014-01-30 15:19:21 -0500] daxroc: I do know I've to integrate with bamboo for the automated testing. Is it good practice to use strainer as the interface? are there alternatives ?
[2014-01-30 15:19:24 -0500] srenatus: I'd not necessarily use test-kitchen in strainer (and serverspec is run by test-kitchen), but it's definitely possible
[2014-01-30 15:22:41 -0500] EricL_: Has anyone had issues with knife-ec2 0.6.6 where is will never say "Waiting for sshd" and just hangs forever after "Private IP Address"
[2014-01-30 15:25:50 -0500] shlant: EricL_: Sorry I wasn't able to help you on that. I swear I ran into it a few months ago but I think my workaround was to manually spin up a instance and then just bootstrap :p
[2014-01-30 15:26:01 -0500] shlant: I don't htink I ever solved it
[2014-01-30 15:26:50 -0500] shlant: EricL_: I would check and double check ssh keys and access
[2014-01-30 15:39:09 -0500] EricL_: shlant: The SSH keys and access haven't changed.
[2014-01-30 15:39:19 -0500] EricL_: The only real thing that's changed is the version of Ruby and the version of knife.
[2014-01-30 15:39:38 -0500] EricL_: I tried going back to the old version of both and it still won't work (but it does get further).
[2014-01-30 15:39:47 -0500] EricL_: I can SSH in without any problem though.
[2014-01-30 16:13:30 -0500] CPS: anybody have a link to some documentation about chef clients? not the executable, but the clients that you see on the web ui
[2014-01-30 16:17:23 -0500] kbarry: When pushing a file/directory to a chef client, is there a location your commonly using?
[2014-01-30 16:17:35 -0500] kbarry: like "c:\cheffile"
[2014-01-30 16:21:55 -0500] daxroc: kbarry, not sure what you mean? Are you looking for the cache path?
[2014-01-30 16:25:31 -0500] gforce: Anyone here who can answer a question about encrypted data bags?
[2014-01-30 16:27:11 -0500] gforce: I'll try the mailing list
[2014-01-30 16:34:03 -0500] \du: include_recipe only include the recipe but not the recipe attributes, there is something like include_recipe and include_attributes all together?
[2014-01-30 16:34:09 -0500] CPS: gforce: ask the question and maybe somebody knows
[2014-01-30 16:34:10 -0500] \du: like include_cookbook ?
[2014-01-30 16:35:29 -0500] teukka: \du: the attributes are automatically loaded
[2014-01-30 16:36:06 -0500] \du: because i have in recipe A an include_recipe::b but my recipe B use attrbutes defined in the cookbook B and are not available in my cookbook A
[2014-01-30 16:36:27 -0500] \du: teukka: it work for me in version 9, but not in 11 :/
[2014-01-30 16:36:51 -0500] fretb: hi all, does anyone have any idea why options '-t testing' does not pass here? https://gist.github.com/anonymous/8712724
[2014-01-30 16:36:56 -0500] fretb: line 19
[2014-01-30 16:37:26 -0500] fretb: if I install the packages manually with apt-get install gearman -t testing, it works
[2014-01-30 16:37:27 -0500] chris613: Can someone clarify some syntax for me? https://github.com/opscode-cookbooks/openssl says "include Opscode::OpenSSL::Password" which gives me an error: "Cannot find a resource for include...". The mysql cookbook uses this with the syntax "::Chef::Recipe.send(:include, Opscode::OpenSSL::Password"
[2014-01-30 16:37:46 -0500] fretb: but no matter what I do, options "-t testing" attribute does not pass through
[2014-01-30 16:37:48 -0500] chris613: Questions: Is mysql doing it right? Why is the documentation wrong? is there some material that can more fully explain this Recipe.send() syntax?
[2014-01-30 16:38:45 -0500] teukka: \du: two things changed in chef 11: 1) the load order is defined by `depends` graph 2) chef-solo won't load *all* cookbooks it finds, only the ones in run_list and their transitive dependencies
[2014-01-30 16:40:52 -0500] CPS: chris613: the :: is namespace resolution
[2014-01-30 16:41:02 -0500] teukka: fretb: the options are not passed to `apt-cache policy` or alike that the provider uses to detect the version. but there is some other attribute... `default_distro` or something
[2014-01-30 16:41:13 -0500] chris613: CPS: I'm aware of that
[2014-01-30 16:41:56 -0500] CPS: okay, well in general the opscode documentation is a bit of a mess
[2014-01-30 16:42:09 -0500] CPS: it's possible their example worked on an older version but not anymore
[2014-01-30 16:42:53 -0500] chris613: Also aware. I'm really interested in learning the academic version of why the easy include like doesn't work, and what exactly Recipe.send is generally used for. I'm headed to the source, but thought I'd ask for a richer resource with more explaining
[2014-01-30 16:43:21 -0500] teukka: fretb: `default_release`: https://github.com/opscode/chef/blob/master/lib/chef/provider/package/apt.rb#L42
[2014-01-30 16:44:54 -0500] fretb: teukka: Is this an attribute for the package resource? I get a nomethoderror
[2014-01-30 16:46:08 -0500] teukka: fretb: might be for `apt_package` resource
[2014-01-30 16:46:13 -0500] fretb: teukka: specified apt-Package and now it works!
[2014-01-30 16:46:22 -0500] fretb: Thought package would pass it to apt_package
[2014-01-30 16:46:26 -0500] fretb: Thanks a million!
[2014-01-30 16:46:39 -0500] teukka: no prob
[2014-01-30 16:46:51 -0500] gforce: What's the best way to distribute /etc/chef/encrypted_data_bag_secret?
[2014-01-30 16:47:06 -0500] gforce: All the guides say to manually put it on your clients
[2014-01-30 16:47:27 -0500] gforce: but I'm looking for a more automated way
[2014-01-30 16:49:04 -0500] gforce: And of course it's sensitive so I don't want to include it in a cookbook
[2014-01-30 16:50:53 -0500] mattupstate: gforce: knife bootstrap should send it over if you've specified its location in your knife.rb config
[2014-01-30 16:52:11 -0500] gforce: Ah
[2014-01-30 16:52:24 -0500] gforce: I'm still learning chef-client and the bootstrap process
[2014-01-30 16:53:30 -0500] gforce: I'm trying to use cloud-init (via OpenStack) to bootstrap chef-client
[2014-01-30 16:54:49 -0500] gforce: any idea how to configure knife.rb that way?
[2014-01-30 16:58:18 -0500] gforce: Or should I give up on cloudinit and just use knife bootstrap manually?
[2014-01-30 16:58:38 -0500] helfire: gforce: i just use knife openstack plugin
[2014-01-30 16:58:55 -0500] helfire: documentation is pretty good, just add a few lines to your knife.rb
[2014-01-30 16:59:39 -0500] gforce: Yeah I've looked at that before, that might be the right path
[2014-01-30 17:00:35 -0500] gforce: I was trying to see if I can do all the provisioning just through the OpenStack dashboard
[2014-01-30 17:01:00 -0500] gforce: i.e. just paste in the short cloud-init script that bootstraps chef
[2014-01-30 17:01:09 -0500] gforce: but maybe that's not the best way
[2014-01-30 17:31:30 -0500] magoo: I've got a service definition that's implemented in upstart with a git resource calling a notify->restart. The problem is that on the first chef run, the service isn't running so upstart returns 1 if called with restart
[2014-01-30 17:33:43 -0500] axsuul: I'm using knife solo. Any way I can automate cooking 130+ servers with it without having to type in sudo password for each one, and also knowing which servers error'd?
[2014-01-30 17:35:13 -0500] magoo: you should still be able to spec a private key to use and have nopasswd in the sudoers for that user
[2014-01-30 17:36:09 -0500] gchristensen: knife ssh prompted for the password and re-used it I thought
[2014-01-30 17:36:22 -0500] masterkorp: Hello chers
[2014-01-30 17:36:30 -0500] masterkorp: https://github.com/test-kitchen/test-kitchen/issues/341
[2014-01-30 17:36:40 -0500] masterkorp: anyone with this problem too ?
[2014-01-30 17:36:44 -0500] gchristensen: "chers" lol, totally ifferent project :)
[2014-01-30 17:37:04 -0500] masterkorp: heh today is typo day \o/
[2014-01-30 17:37:13 -0500] magoo: gchristensen: have the user that provisions be in the sudoers with nopasswd
[2014-01-30 17:37:18 -0500] magoo: so no password prompt is necessary
[2014-01-30 17:37:30 -0500] gchristensen: well yes, that is anotherway to skin the cat
[2014-01-30 17:37:32 -0500] magoo: of course, that requires you to seed your image so that might not help
[2014-01-30 17:38:06 -0500] magoo: I use the default ubuntu user and set of keys that I've configured in EC2
[2014-01-30 17:38:14 -0500] magoo: so the user already has passwordless sudo
[2014-01-30 17:39:18 -0500] axsuul: magoo: i see, so i guess i have to write a bash script to do it?
[2014-01-30 17:40:20 -0500] axsuul: i mean, sorry, nm
[2014-01-30 17:40:25 -0500] magoo: no, it would just be that you would use a new base image
[2014-01-30 17:40:38 -0500] magoo: or if you're in ec2, just use the default user that's provisioned
[2014-01-30 17:40:44 -0500] magoo: they generally have passwordless sudo access
[2014-01-30 17:41:03 -0500] axsuul: magoo: just wondering how best i can knife solo cook all my servers concurrently
[2014-01-30 17:41:43 -0500] magoo: i'm not very experienced with knife solo
[2014-01-30 17:41:55 -0500] magoo: is that currently a single thread?
[2014-01-30 17:42:22 -0500] magoo: oh, of course
[2014-01-30 17:42:26 -0500] magoo: you can't use knife ssh at all
[2014-01-30 17:42:43 -0500] magoo: if you have 130 servers, I'd provision a chef server
[2014-01-30 17:43:03 -0500] magoo: takes like 10 minutes and you'll get so much more functionality
[2014-01-30 17:43:58 -0500] axsuul: magoo: hmm ok
[2014-01-30 17:44:22 -0500] axsuul: thanks
[2014-01-30 17:47:09 -0500] nheath: I'm just setting up hosted chef for the first time, and getting problems. my mgmt workstation is ubuntu 13.10, and i've added it as a node as well using knife bootstrap. Now i'm running into permissions problems, where the knife CLI reports  Failed to authenticate to https://api.opscode.com/organizations/nheath as nheath with key
[2014-01-30 17:47:28 -0500] nheath: I also am getting permissions errors when logging into manage.opscode.com
[2014-01-30 17:47:56 -0500] nheath: thinking the keys may be corrupted, i went to regenerate them...
[2014-01-30 17:47:58 -0500] nheath: Permission denied. You do not have permission to regenerate that organization key. (Error 32032)
[2014-01-30 17:52:18 -0500] helfire: is your node name the same as your username? i've had that happen and you'll get only node level permissions. Open a ticket with support and they'll fix it (if thats is the case)
[2014-01-30 18:13:41 -0500] damien__: Hello, time for silly question: what do I do with the binary file that I get when I click on download on the community cookbook page? That big orange button...
[2014-01-30 18:14:02 -0500] damien__: i.e. i was trying to dl apt cookbook, and got this file: apt20131219-87849-1ivikc9
[2014-01-30 18:14:06 -0500] damien__: what is it?
[2014-01-30 18:14:08 -0500] damien__: a tar file?
[2014-01-30 18:14:10 -0500] damien__: zip?
[2014-01-30 18:14:16 -0500] damien__: git clone url?
[2014-01-30 18:14:25 -0500] damien__: script?
[2014-01-30 18:16:06 -0500] jonlives: damien__: it's a tar.gz iirc
[2014-01-30 18:16:12 -0500] jonlives: not sure why it doesn't have an extension tho..
[2014-01-30 18:16:32 -0500] damien__: jonlives, ahh k cheers ty :)
[2014-01-30 18:16:34 -0500] CPS: damien__: i have a tgz and a zip from chef's community cookbooks
[2014-01-30 18:16:53 -0500] damien__: CPS, is that what you get when click the "Download" button?
[2014-01-30 18:17:01 -0500] damien__: perhaps it's just my browser fumbling the name...
[2014-01-30 18:17:05 -0500] CPS: no i think i had to rename them
[2014-01-30 18:17:14 -0500] damien__: (chrome on ubuntu 13.o10)
[2014-01-30 18:17:15 -0500] damien__: k
[2014-01-30 18:17:18 -0500] damien__: ty :)
[2014-01-30 18:17:29 -0500] CPS: package manager should be able to figure it out for you
[2014-01-30 18:17:41 -0500] CPS: the archive thing
[2014-01-30 18:23:28 -0500] damien__: yup, they are tar.gz files, was able to extract after I renamed
[2014-01-30 18:24:07 -0500] damien__: archive manager threw an error... "An error occurred while extracting files."
[2014-01-30 18:24:16 -0500] damien__: so no worries, mostly was just curious
[2014-01-30 18:24:39 -0500] damien__: in fact my preferred way is to git clone the github repo anywho... but was wondering how that button worked :)
[2014-01-30 18:25:24 -0500] CPS: sounds like they didn't set up the download properly
[2014-01-30 18:45:57 -0500] Diranged: I'm working on a small chef script to bootstrap puppet (don't yell at me!)  and I'm a bit confused about the behavior of the execute method. Looking at this code (https://github.com/diranged/puppet-cookbooks/blob/master/recipes/run.rb), and this pastie output (http://pastie.org/8682987), I would expect that the puppet-run would execute up-to 5 times looking for a 0 exit code before bailing out and throwing an error.
[2014-01-30 18:46:17 -0500] Diranged: Instead, it runs once, says it will run 4 more times, but then exits out with an error anyways..
[2014-01-30 18:49:31 -0500] bahamas10: is there a way to modify global variables from within the provider of an LWRP?
[2014-01-30 18:50:02 -0500] bahamas10: ie. in my recipe i do $foo = [], every time the LWRP is called i do $foo.push('bar'), but at the end of all of that, $foo is empty
[2014-01-30 18:54:39 -0500] magoo_: since I'm throwing out questions today, here's one I've been delving on lately: when is it appropriate to write an LWRP vs a definition? I think the answer is when you're reusing a bunch of prexisting resources, you would use a definition. Am I far off?
[2014-01-30 18:56:34 -0500] jwitrick: oahi. i have an issue. I am trying to get an ohai plugin to work on chef10. but it does not appear to save that data i need. the plugin i am trying to use is: https://github.com/demonccc/chef-repo/blob/master/plugins/ohai/linux/rpm.rb
[2014-01-30 18:57:35 -0500] jwitrick: from what i understand it looks like it should have a node level key named 'rpm'
[2014-01-30 18:57:38 -0500] jwitrick: but it does not.
[2014-01-30 18:58:22 -0500] rummyPPG: hey, question about LWRPs and resources defined in them; I have a service resource inside an LWRP, but when I try to notify that service from another resource (outside the LWRP) it says it can't find the resource
[2014-01-30 18:58:42 -0500] rummyPPG: however, it actually works in a different case, and that's the behavior I thought should happen
[2014-01-30 18:59:55 -0500] rummyPPG: As an example, if my LWRP foo has an action :create let's say, so
[2014-01-30 19:00:02 -0500] rummyPPG: action :create do
[2014-01-30 19:00:10 -0500] rummyPPG:   service new_resource.name do
[2014-01-30 19:00:16 -0500] rummyPPG:     action :start
[2014-01-30 19:00:18 -0500] rummyPPG:   end
[2014-01-30 19:00:19 -0500] rummyPPG: end
[2014-01-30 19:00:26 -0500] mconigliaro: @rummyPPG gist it maybe?
[2014-01-30 19:00:36 -0500] mconigliaro: might be easier to explain
[2014-01-30 19:00:37 -0500] rummyPPG: sure, give me one sec
[2014-01-30 19:01:13 -0500] chris613: rummyPPG: Notifying resources that are defined inside an LWRP  has never worked for me. I don't know exactly why, AFAICT they should get compiled and tossed onto the resource collection immediately after the LWRP's own resource entry. Then anything that converges after that should, IMO, be able to notify it, but it has never worked for me
[2014-01-30 19:01:51 -0500] mconigliaro: @chris613 we have it working in some cases
[2014-01-30 19:02:01 -0500] mconigliaro: i actually thought the same thing as you. it should just work
[2014-01-30 19:02:16 -0500] chris613: mconigliaro: any idea what the conditions for "some cases" are?
[2014-01-30 19:02:18 -0500] mconigliaro: it seems that sometimes it does and sometimes it doesn't, but we're not sure why
[2014-01-30 19:02:27 -0500] mconigliaro: well, that's what we're trying to figure out
[2014-01-30 19:02:39 -0500] rummyPPG: gist: https://gist.github.com/ppgengler/8716321
[2014-01-30 19:03:06 -0500] rummyPPG: chris613: the weird thing is it works in one LWRP, but not in another and we're not sure why
[2014-01-30 19:03:29 -0500] rummyPPG: oh, oops, sorry mconigliaro, didn't mean to repeat ;)
[2014-01-30 19:03:46 -0500] mconigliaro: np
[2014-01-30 19:04:16 -0500] chris613: rummyPPG: Based on your gist I would expect you'd need to notify "service[bar]" not "service[foo]", but that might have been a transcription error?
[2014-01-30 19:04:40 -0500] rummyPPG: sory, mistyped
[2014-01-30 19:05:08 -0500] rummyPPG: updated; but yeah, with that corrected, it still has the same erorr
[2014-01-30 19:05:19 -0500] rummyPPG: that chef can't find the resource 'service[bar]' to notify
[2014-01-30 19:06:37 -0500] chris613: That's always been my experience; I think I'd be more interested in seeing the version that does work :P
[2014-01-30 19:07:12 -0500] chef_n00bi3: regarding the revision for the application cookbook, what do I need to do for a local file
[2014-01-30 19:07:28 -0500] chef_n00bi3: i tried openssl sha1
[2014-01-30 19:09:26 -0500] rummyPPG: mconigliaro checkout http://www.slideshare.net/geekbri/lwrp-presentation
[2014-01-30 19:09:28 -0500] rummyPPG: page 14
[2014-01-30 19:10:05 -0500] rummyPPG: not sure if that would help (or if would instead help with updated by)
[2014-01-30 19:11:09 -0500] mconigliaro: hmm, i wonder
[2014-01-30 19:11:32 -0500] mconigliaro: i also wonder if this is for chef 10 or 11
[2014-01-30 19:12:59 -0500] chris613: See that slide is showing how to establish a new run_context with a new resource_collection, that LWRP adds resources to that, and then you do a mini-chef run to converge them. That's basically the opposite of what rummyPPG is asking about I think. He wants the resources to be in the MAIN resource_collection
[2014-01-30 19:13:58 -0500] chris613: My understanding of use_inline_resources in Chef 11 is that it does essentially what this slide is showing
[2014-01-30 19:14:08 -0500] rummyPPG: yeah, and that doesn't fix the issue
[2014-01-30 19:14:18 -0500] rummyPPG: that service resource is still not in the main resource collection
[2014-01-30 19:15:28 -0500] chris613: Nope, but it can help with updated_by and notifications that are defined as part of the top-level LWRP resource declaration. I've never had to bother with the full sub_run_context, though, I just use r=resource "whatever" do...  and then r.run_action(:whatever) to force immediately convergence.
[2014-01-30 19:15:44 -0500] mveitas: Is there a way to get a list of all cookbooks that were run during a chef run? I know the node has a run_list associated with it, but what about extracting info about cookbooks that were included as part of a recipe?
[2014-01-30 19:16:52 -0500] geggam: anyone have an example of how to iterate thru an encrypted databag  ?
[2014-01-30 19:17:44 -0500] chris613: mveitas: Yeah, like this: node.run_state[:seen_recipes].collect
[2014-01-30 19:18:05 -0500] chris613: Err, sorry: node.run_state[:seen_recipes].collect {|r| r[0].sub(/::.*$/, '')}.uniq
[2014-01-30 19:18:11 -0500] mveitas: awesome :)  I shall write a little script to run with knife!
[2014-01-30 19:18:17 -0500] chris613: That's what I use to get a list of all the cookbook names
[2014-01-30 19:18:47 -0500] chris613: mveitas: Oh that won't work with knife after the fact. It's accessing run_state which is just an in-memory state during the run
[2014-01-30 19:18:53 -0500] chris613: After the run I don't know of a way
[2014-01-30 19:19:02 -0500] chris613: though I'd like to be shown one
[2014-01-30 19:19:43 -0500] mveitas: I'll play around with it. Maybe at the very least I can output it to an s3 file to use for audit purposes
[2014-01-30 19:20:42 -0500] kbarry: I'm trying to push a powershell profile.ps1 file.
[2014-01-30 19:20:52 -0500] kbarry: chef-client reports it created the file,
[2014-01-30 19:20:55 -0500] kbarry: but its not there.....
[2014-01-30 19:21:28 -0500] kbarry: I suspect it may be a path issue....? Just a wild guess. Here is the path: C:\Windows\System32\WindowsPowerShell\v1.0\profile.ps1
[2014-01-30 19:21:37 -0500] kbarry: I have it in the recipe as:
[2014-01-30 19:21:42 -0500] rummyPPG: chris613: so do you know of any workaround to getting at that service resource from outside the lwrp?
[2014-01-30 19:22:00 -0500] kbarry: "C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\profile.ps1"
[2014-01-30 19:22:03 -0500] rummyPPG: i need to notify it to restart, is there a pattern to expose a restart action on :foo somehow?
[2014-01-30 19:24:15 -0500] chris613: rummyPPG: I do not; though now that you ask I wonder if it could be done by stashing a reference to the resource into node.run_state and then using a ruby_block to do node.run_state['template-reource-stash'].run_action(:create). Then you can notify the ruby_block. This seems like a terrible mess of an idea, though....
[2014-01-30 19:25:40 -0500] rummyPPG: chris613: yeah, that sounds like too ... much to do; it seems like this should cause problems for people, i'm confused how they get around it
[2014-01-30 19:26:00 -0500] rummyPPG: you basically, for example, could never wrap a service resource inside an LWRP, or you'll never be able to restart it
[2014-01-30 19:26:42 -0500] chris613: Yeah, we must just be doing something wrong :P
[2014-01-30 19:27:00 -0500] garylabronz: yo, i am just wondering does for variables. it goes default < roles < env < override ?
[2014-01-30 19:27:12 -0500] chris613: From my understanding of how LWRPs operate, notifying an embedded resource should "just work"
[2014-01-30 19:27:24 -0500] rummyPPG: yeah, us too
[2014-01-30 19:27:55 -0500] rummyPPG: i'm thinking for workaround adding a :restart action to the lwrp, having that notify service to restart, and then notifying hte lwrp at the top level
[2014-01-30 19:28:00 -0500] rummyPPG: like basically chain it down
[2014-01-30 19:28:05 -0500] chris613: garylabronz: It's much more complicated than that. See http://docs.opscode.com/essentials_cookbook_attribute_files.html  it has a list, a table, and a diagram that each explain attribute precedence
[2014-01-30 19:28:16 -0500] chris613: rummyPPG: could work
[2014-01-30 19:28:58 -0500] garylabronz: chris613: thanks, i am just getting started and couldnt find that
[2014-01-30 19:32:05 -0500] Diranged: I'm working on a small chef script to bootstrap puppet (don't yell at me!)  and I'm a bit confused about the behavior of the execute method. Looking at this code (https://github.com/diranged/puppet-cookbooks/blob/master/recipes/run.rb), and this pastie output (http://pastie.org/8682987), I would expect that the puppet-run would execute up-to 5 times looking for a 0 exit code before bailing out and throwing an error.
[2014-01-30 19:33:09 -0500] chef_n00bi3: I'm having a hard time the revision hash for deploying an app
[2014-01-30 19:33:15 -0500] chef_n00bi3: I've read up http://docs.opscode.com/resource_deploy.html
[2014-01-30 19:33:39 -0500] chef_n00bi3: Option checksum's value e9c4bdff1241a894361684a372a01fe8b724bde7 does not match regular expression /^[a-zA-Z0-9]{64}$/
[2014-01-30 19:33:40 -0500] chef_n00bi3: Option checksum's value e9c4bdff1241a894361684a372a01fe8b724bde7 does not match regular expression /^[a-zA-Z0-9]{64}$/
[2014-01-30 19:33:40 -0500] chef_n00bi3: Option checksum's value e9c4bdff1241a894361684a372a01fe8b724bde7 does not match regular expression /^[a-zA-Z0-9]{64}$/
[2014-01-30 19:33:43 -0500] chef_n00bi3: sorry
[2014-01-30 19:33:58 -0500] chef_n00bi3: but that is the error
[2014-01-30 19:37:44 -0500] chef_n00bi3: This is using the Chef::Provider::File::Deploy scheme
[2014-01-30 19:38:24 -0500] helfire: did you put your artifacts checksum in there? i think i just took it out or set it to blank
[2014-01-30 19:40:33 -0500] chef_n00bi3: helfire: I'm trying to calculate it
[2014-01-30 19:41:22 -0500] chef_n00bi3: when it's blank I have a nil problem
[2014-01-30 19:42:13 -0500] helfire: i forget, i gave up on it since i couldnt get java/application/application_java/tomcat to all work
[2014-01-30 19:42:43 -0500] chef_n00bi3: that's the problem that I'm having
[2014-01-30 19:43:00 -0500] helfire: there are a ton of open issues between different versions
[2014-01-30 19:45:48 -0500] chef_n00bi3: awesome
[2014-01-30 19:52:34 -0500] roflson: hi there
[2014-01-30 19:53:46 -0500] drywheat: is it recommended that chef-client runs as a service on nodes, periodically performing runs against the information contained on the chef server?
[2014-01-30 19:54:04 -0500] drywheat: i know i can do that use the 'chef-client::default' cookbook/recipe
[2014-01-30 19:54:39 -0500] drywheat: it just seems more hazardous than performing manual chef runs
[2014-01-30 19:57:37 -0500] roflson: It seems an arbitrary choice
[2014-01-30 19:57:51 -0500] roflson: our deployment procedure ends with a chef-client run on each node
[2014-01-30 19:58:07 -0500] roflson: there is an ssh option to do it on all chef nodes, so it's a one-iner
[2014-01-30 20:01:28 -0500] drywheat: roflson: it seems like if you have a good CI/CD scheme in place then leaving everything automated would be the easist way to set it up
[2014-01-30 20:02:37 -0500] roflson: drywheat: yes, our chef configs are in source control, and get reviewed before push
[2014-01-30 20:03:40 -0500] roflson: A question: is it possible to access attributes or ohai information from another node within a recipe?
[2014-01-30 20:04:33 -0500] drywheat: roflson: yes, you just need to search for the node in question and inspect its data
[2014-01-30 20:05:05 -0500] roflson: So: node['filesystem']['/dev/xvda1']['kb_available'] will give me the space free on my node
[2014-01-30 20:05:25 -0500] roflson: where do I substitute the remote node name?
[2014-01-30 20:06:04 -0500] drywheat: search for the node -> http://docs.opscode.com/essentials_search.html
[2014-01-30 20:06:33 -0500] drywheat: and then access the info on the returned object(s)
[2014-01-30 20:09:20 -0500] geggam: so dilemma... what do you do to fix it when you copy the key you used to make a databag to the server and that key wont decrypt the databag on a client
[2014-01-30 20:14:16 -0500] magoo_: according to the definitions doc, you shouldn't use a definition when "An action does not need to be sent directly to a resource"
[2014-01-30 20:14:28 -0500] magoo_: but this doesn't mean intra-definition, right
[2014-01-30 20:15:10 -0500] magoo_: I think it's saying you shouldn't be writing definitions if you have external notifiers into the resources declared in the defiition
[2014-01-30 20:15:16 -0500] magoo_: insights?
[2014-01-30 20:15:59 -0500] magoo_: s/shouldn't/should
[2014-01-30 20:27:48 -0500] masterkorp: https://github.com/test-kitchen/test-kitchen/issues/341
[2014-01-30 20:28:17 -0500] masterkorp: Guys can you help me here ? sethvargo closed the issue, assumning I needed to use the full name
[2014-01-30 20:28:27 -0500] masterkorp: Well I used the full name
[2014-01-30 20:28:56 -0500] helfire: maybe just end it in a $ since it's a regex?
[2014-01-30 20:29:14 -0500] helfire: kitchen login server-ubuntu-1310$
[2014-01-30 20:29:15 -0500] masterkorp: that works !
[2014-01-30 20:29:20 -0500] helfire: post back so people know :)
[2014-01-30 20:29:22 -0500] masterkorp: thank you
[2014-01-30 20:29:23 -0500] helfire: when they google
[2014-01-30 20:29:26 -0500] masterkorp: I will
[2014-01-30 20:29:40 -0500] heathsnow_: so I'm running 'knife winrm . . .' on one windows machine to execute chef on another windows machine....and it takes FOREVER (using Chef v 11.4.4 and knife-windows 0.5.14).  Anyone know how to make it faster?  It's taking 15 minutes!
[2014-01-30 20:29:57 -0500] helfire: i think if there's 1 vm you should automatically goto that vm on login instead of kitchen login .
[2014-01-30 20:31:14 -0500] masterkorp: https://github.com/test-kitchen/test-kitchen/issues/341
[2014-01-30 20:31:20 -0500] masterkorp: helfire: thank you
[2014-01-30 20:31:59 -0500] helfire: np, seth is right in his reply too wrapping it in quotes
[2014-01-30 20:32:15 -0500] masterkorp: wrapping in quotes does not work
[2014-01-30 20:32:34 -0500] masterkorp: $ kitchen login "server-ubuntu-1310"
[2014-01-30 20:32:36 -0500] masterkorp: kitchen>>>>>>
[2014-01-30 20:32:38 -0500] masterkorp: Argument `server-ubuntu-1310' returned multiple result
[2014-01-30 20:33:29 -0500] helfire: well maybe not
[2014-01-30 20:36:24 -0500] masterkorp: i have both 64 and 32 bits vms
[2014-01-30 20:36:39 -0500] masterkorp: just because my laptop does not support 64 bits vms
[2014-01-30 20:36:55 -0500] masterkorp: and that was headache to find out trough test-kitchen all togheter
[2014-01-30 20:38:07 -0500] cwj: seems like you could add -x86_64 or some other suffix to the 64bit platform names as a workaround?
[2014-01-30 20:38:56 -0500] thun_: Is there a way to set environment while bootstrapping an instance with knife ec2 create ?
[2014-01-30 20:42:07 -0500] helfire: thun_ -E i belive
[2014-01-30 20:46:04 -0500] drywheat: does it make more sense to create a single 'system' cookbook that configs apt, firewall and swap or create 3 separate cookbooks?
[2014-01-30 20:48:29 -0500] jbz: drywheat: Generally, I'd either use a 'base' role, or create a 'base' wrapper cookbook either of which calls the apt, firewall, etc. cookbooks.
[2014-01-30 20:49:07 -0500] drywheat: jbz: that's what i'm doing, but i believe the base wrapper cookbook should only contain 'include_recipe' calls
[2014-01-30 20:49:31 -0500] jbz: right.  So it would call the three other cookbooks.
[2014-01-30 20:49:55 -0500] jbz: There are already apt and iptables cookbooks, e.g.  Why reinvent the wheel?
[2014-01-30 20:50:00 -0500] drywheat: ah, instead of shoving the 3 tasks into a single cookbook
[2014-01-30 20:52:00 -0500] geggam: that whole reinvent the wheel thing doesnt apply when you have 16's and i want 21's
[2014-01-30 20:52:01 -0500] chef_n00bi3: helfire: regarding application_java I just made the java app a local git repo and used the git deploy resource
[2014-01-30 20:54:52 -0500] helfire: chef_n00bi3: did you just check in the binary jar/war then?
[2014-01-30 20:57:35 -0500] chef_n00bi3: yeah but I'm still not all the way done, but it got me through that hurdle
[2014-01-30 21:01:58 -0500] Diranged: Can anyone help me make an Execute resource that re-runs a command until it either A) scuceeds or b) tries 5 times and fails..
[2014-01-30 21:09:16 -0500] CPS: Diranged: write a ruby block that counts success/fails that notifies your execute block
[2014-01-30 21:10:30 -0500] geggam: why not just loop five times and alert if you make it out
[2014-01-30 21:11:17 -0500] CPS: also doable
[2014-01-30 21:11:47 -0500] Diranged: Sure, but if each run takes 1-2 minutes at minimum, its a huge waste of time if the exit code is 0 every time..
[2014-01-30 21:11:58 -0500] Diranged: I'm thinking I may have found the issue.. testing a fix
[2014-01-30 21:32:27 -0500] garylabronz: can you force a variable when doing node edit __node__ ?
[2014-01-30 21:32:37 -0500] garylabronz: i know it may not be the *best* way
[2014-01-30 21:32:40 -0500] garylabronz: im only playing around
[2014-01-30 21:32:59 -0500] garylabronz: but i want to just throw some specific variables in a VM i have running to see what happens with a recipe
[2014-01-30 21:57:03 -0500] joe_____: We are trying to use a node attribute the class of the attribute is an immutable array how can we assign this to a local variable. The problem we are having is the assigned variable is also an immutable array.  Any ideas?
[2014-01-30 21:57:24 -0500] dgarstang1: Anyone using thor scm thingy to + cookbook version numbers?
[2014-01-30 22:02:27 -0500] freezey: any writeup to show howto migrate chef users?
[2014-01-30 22:02:29 -0500] freezey: to another host
[2014-01-30 22:11:20 -0500] shennyg: I'm working in a recipe and I'd like to pass a variable into a template. can I do that?
[2014-01-30 22:12:09 -0500] shennyg: I'm doing and each on an array of domains and I'd like to pass the current domain into the file I'm creating using template
[2014-01-30 22:12:10 -0500] j^2: shennyg: http://docs.opscode.com/resource_template.html
[2014-01-30 22:12:16 -0500] j^2: check the examples
[2014-01-30 22:12:24 -0500] shennyg: thanks j^2
[2014-01-30 22:12:51 -0500] joe_____: an example is default['test'] = ['hello','world'] is set in the attributes. in our recipe we set localtest = test. That becomes an immutableArray class.
[2014-01-30 22:13:33 -0500] shennyg: rad. thanks
[2014-01-30 22:14:34 -0500] joe_____: sorry localtest=node['test']
[2014-01-30 22:16:01 -0500] rkesters2_: Hi can I use a node value in a role attribute setting or in a attribute file
[2014-01-30 22:16:34 -0500] rkesters2_: for exampl default[:default_fqdn] = node[:fqdn]
[2014-01-30 22:17:05 -0500] rkesters2_: in the default.rb file of my cookbook
[2014-01-30 22:18:59 -0500] btm: rkesters2_: you can set attributes from other attributes in the attributes file, but not in roles.
[2014-01-30 22:23:19 -0500] garylabronz: freezey: you can export everything as json
[2014-01-30 22:27:45 -0500] freezey: garylabronz: yeah i did that
[2014-01-30 22:27:56 -0500] freezey: problem i see is when you do a knife upload /users/username.json it fails
[2014-01-30 22:27:59 -0500] freezey: says bad request
[2014-01-30 22:31:24 -0500] ianco_: hmm...after updating the iblogfile size for mysql and starting, mysql takes a while to write out the files and run
[2014-01-30 22:33:07 -0500] ianco_: how does one best cope with services that may take minutes to fully start?
[2014-01-30 22:35:15 -0500] btm: ianco_: what's the problem, the restart script is exiting and your run is continuing but the service isn't ready yet?
[2014-01-30 22:36:10 -0500] ianco_: btm: so mysql tries to start, its the first start with innodb so it needs to write out its logfiles which takes a couple mins
[2014-01-30 22:36:23 -0500] ianco_: the service fails unless i put a retry_timeout of like 4 minutes on there
[2014-01-30 22:36:30 -0500] ianco_: is that the right way to handle this?
[2014-01-30 22:37:18 -0500] btm: ianco_: the service resource fails? what platform?
[2014-01-30 22:38:11 -0500] ianco_: btm: ubuntu
[2014-01-30 22:39:01 -0500] ianco_: btm: my recipes have to stop mysql, remove the innodb logfiles and then start it to avoid https://tickets.opscode.com/browse/COOK-2100
[2014-01-30 22:39:47 -0500] ianco_: it seems to all be good, but once in a while the service takes like 7 minutes to write the files and start and in that case, even the retry-timeout of 200 seconds or whatever doesnt help
[2014-01-30 22:40:23 -0500] btm: ianco_: it takes a long time on the service start?
[2014-01-30 22:40:33 -0500] ianco_: btm: yes
[2014-01-30 22:41:30 -0500] ianco_: im just not sure what the recommended path forward is
[2014-01-30 22:42:17 -0500] btm: ianco_: probably not one single best path... if you started the service yourself, e.g. /etc/init.d/mysqld start, that takes a long time too, yes? Chef is timing out waiting for that to return, yes?
[2014-01-30 22:44:09 -0500] ianco_: btm: testing that now
[2014-01-30 22:47:52 -0500] garylabronz: yo, how do i add some variables to the default when running node edit __node__ ? whats the format ?
[2014-01-30 22:50:26 -0500] bahamas10: is there a way to modify a global variable in a lwrp?
[2014-01-30 22:50:48 -0500] bahamas10: i make the modifications, and they exist within the lwrp, but when control returns back to the calling recipe the original variable is unmodified
[2014-01-30 22:57:16 -0500] btm: garylabronz: attributes on the node object itself are always 'normal' precedence. http://docs.opscode.com/essentials_node_object.html#attributes
[2014-01-30 23:13:21 -0500] bahamas10: is there a way to see what templates were generated during a chef run? ie. a variable that contains the path to all templates generated?
[2014-01-30 23:14:25 -0500] delivery: we r trying to add dns entry recipe using chef any thoughts or ideas how this can be done ?
[2014-01-30 23:20:39 -0500] brimstone: is there an easy way to import a chef-solo role.json into chef-server?
[2014-01-30 23:21:02 -0500] brimstone: oh, duh, from file
[2014-01-30 23:21:04 -0500] brimstone: n/m
[2014-01-30 23:31:32 -0500] bahamas10: alright, i'm very confused. it appears though LWRP's have their own context, and any modifications to node.run_state don't persist outside of the LWRP
[2014-01-30 23:32:21 -0500] coderanger: bahamas10: Are you using use_inline_resources mode?
[2014-01-30 23:36:32 -0500] bahamas10: coderanger: i'm not sure.. i haven't set anything like that explicitly
[2014-01-30 23:37:12 -0500] coderanger: bahamas10: Can you pastebin the code you are working on?
[2014-01-30 23:39:42 -0500] bahamas10: coderanger: http://pastebin.com/KiL7Ma1e
[2014-01-30 23:40:06 -0500] bahamas10: $vp_templates_generated is initalized as an array before i call that lwrp
[2014-01-30 23:40:41 -0500] bahamas10: the goal is, once all lwrps are done, at the end of the chef run, to glob the directory of templates, and compare it to the array of generated templates, and remove any old templates that shouldn't be there
[2014-01-30 23:41:01 -0500] coderanger: You can just compare against the resource collection directly
[2014-01-30 23:41:44 -0500] bahamas10: sorry, i'm not sure what you mean
[2014-01-30 23:42:02 -0500] coderanger: run_context.resource_collection.each

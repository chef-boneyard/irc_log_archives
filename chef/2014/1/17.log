[2014-01-17 00:02:46 -0500] dgarstang1: if I do a knife search... what format does the data come back in from a recipe?
[2014-01-17 00:10:22 -0500] dgarstang1: Confused... knife search is giving me [node[redis01-foo.net]]. I can get the 0th element of that array with #{foo[0]} .... but I can't drill down any further. Trying to get #{foo[0]['nodes']} returns nothing
[2014-01-17 00:10:43 -0500] dgarstang1: oops #{foo[0]['node']} rather
[2014-01-17 00:16:54 -0500] dgarstang1: How do I extract an attributes value for a search in a recipe?
[2014-01-17 00:19:47 -0500] dgarstang1: foo = search(:node, "role:role_redis_master") ; log foo.first['FQDN'] ... not working...
[2014-01-17 00:20:24 -0500] darkdust: does chef-solo support loading of cookbook libraries?
[2014-01-17 00:22:13 -0500] darkdust: i'm receiving an error that it can't find a function that i've defined in a library file
[2014-01-17 00:22:13 -0500] darkdust: ERROR: Cannot find a resource for create_user_group
[2014-01-17 00:22:30 -0500] dgarstang1: darkdust: i think they all went home
[2014-01-17 00:23:18 -0500] darkdust: dgarstang1: quite possibly
[2014-01-17 00:23:29 -0500] Cobi: dgarstang1: Try lower-case fqdn, maybe?
[2014-01-17 00:23:52 -0500] dgarstang1: Cobi: yeah I just did. Silly me was using FQDN cuz that's what the CLI returns
[2014-01-17 00:24:01 -0500] dgarstang1: Next problem... IP address is empty... that's bad...
[2014-01-17 00:42:00 -0500] mmazing: what is the best practice for modifying a conf file with a chef recipe?
[2014-01-17 00:45:13 -0500] cheeseplus: mmazing: ideally there is an existing cookbook for doing so for any given product
[2014-01-17 00:45:39 -0500] cheeseplus: if not, it depends on the conf file but typically it's just an erb template that fills out the conf with attributes
[2014-01-17 00:48:43 -0500] mmazing: hmm, well, the recipes i am using do not seem to have an erb template for php.ini, although it is set up
[2014-01-17 00:49:10 -0500] mmazing: and i don't have the ability to edit those cookbooks, but i can add custom cookbooks
[2014-01-17 00:52:17 -0500] mmazing: cheeseplus: i'm fairly certain i want to just start hacking at this with custom recipes, as im sure im eventually going to run into something that's not in the templates anyway
[2014-01-17 01:23:36 -0500] mmazing: sooo, even the opscode-cookbooks/php doesn't have params for the php.ini template
[2014-01-17 01:23:44 -0500] mmazing: so i guess i'll just make my own template
[2014-01-17 01:31:24 -0500] mmazing: this might work - https://github.com/msonnabaum/cookbooks/commit/3ba636b95bd2951e65153e165ef95d379407c064
[2014-01-17 01:32:28 -0500] mmazing: err nevermind haha, it's already built in like that to the actual template
[2014-01-17 04:29:08 -0500] fak3r: my chef-server has been slow, when I check it, it's using 98+ CPU - restart it, hours later, same thing https://www.dropbox.com/s/zbxy8dyf9ff1wil/Screenshot%202014-01-16%2022.27.19.png
[2014-01-17 04:29:51 -0500] fak3r: so now running chef-client on nodes is timing out b/c the server is slow... logs don't say anything
[2014-01-17 05:11:34 -0500] kennon: fak3r, i saw that once before when i ran into this: https://tickets.opscode.com/browse/CHEF-3921
[2014-01-17 05:16:45 -0500] fak3r: kennon: ah, that looks similar - thanks, I'll take a look
[2014-01-17 07:30:41 -0500] epcim: Hi, I have overloading attributes defined at role LDAPSERVER that is inherited by role IDENTITYSERVICES but these attributes are not being used during cooking. Am I somewhere wrong?
[2014-01-17 07:39:50 -0500] doug1: testing
[2014-01-17 07:41:10 -0500] doug1: I had a recipe with "if not node[:instance_role] == 'vagrant' then" and it was executing the true block every time. I changed it to 'if !' and it works as ecpected. Isn't 'if not' valid?
[2014-01-17 08:12:18 -0500] st_iron: good morning
[2014-01-17 08:36:14 -0500] epcim: Hi, I have overloading attributes defined at role LDAPSERVER that is inherited by role IDENTITYSERVICES but these attributes are not being used during cooking. Am I somewhere wrong?
[2014-01-17 08:36:26 -0500] Abhishek_: Hey Guys I am new to chef i was having confusion between "depends cookbook_name" in metadata.rb and include_recipe in my recipe ? Why do we need to define dependency at the two places? can anyone help me to understand thus?
[2014-01-17 08:36:36 -0500] Abhishek_: *this
[2014-01-17 08:38:53 -0500] st_iron: Abhishek_: when you set up a dependency on a cookbook, then you cannot use it without its dependency like in package managers
[2014-01-17 08:39:33 -0500] st_iron: Abhishek_: when you include a recipe, you can set up attributes and use that recipe in your cookbook's recipe
[2014-01-17 08:40:52 -0500] st_iron: Abhishek_: for example my wrapper cookbook for chef-client depends on the Chef's chef-client cookbook, I include the chef-client::cron recipe in my default recipe, and I set up attributes in my wrapper cookbook
[2014-01-17 08:41:02 -0500] st_iron: am I clear?
[2014-01-17 08:42:08 -0500] Abhishek_: st_iron: do i need to define depends and include_recipe both to add dependency on external or other cookbook or it is something like if i just need dependent module in my cookbook then i will just make depend in metadata.rb but i need specific recipe and i need to override some attribute then i need to use include recipe
[2014-01-17 08:43:19 -0500] st_iron: let's say you want to write a cookbook for the LDAP auth of the eJabberd server, then your eJabberd cookbook will depend on the openldap cookbook, because you need openldap to authenticate from it
[2014-01-17 08:43:56 -0500] st_iron: you do not need to touch the original openldap cookbook in your eJabberd cookbook, but you can... the main thing is just the dependency
[2014-01-17 08:44:21 -0500] st_iron: if you want to include_recipe from another community cookbook, then obviously it will depend on the other
[2014-01-17 08:48:50 -0500] st_iron: Abhishek_: you can read about it here: http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/
[2014-01-17 09:05:26 -0500] epcim: Hi, I have overloading attributes defined at role LDAPSERVER that is inherited by role IDENTITYSERVICES but these attributes are not being used during cooking. Am I somewhere wrong?
[2014-01-17 09:28:48 -0500] mattsmith: Morning All, "ERROR: Failed to post reporting data to server (HTTP 400), saving to /var/chef/cache/failed-reporting-data.json" any ideas why I may be seeing this after a successful chef-client run?
[2014-01-17 10:27:22 -0500] SFLimey_: Anyone help me with an error I'm getting.
[2014-01-17 10:27:24 -0500] SFLimey_: Cookbook aws@0.1.0 not found. If you're loading aws@0.1.0 from another cookbook, make sure you configure the dependency in your metadata
[2014-01-17 10:27:57 -0500] SFLimey_: The recipe that's calling aws@0.10 has a metadata.rb and metadata.json
[2014-01-17 10:28:25 -0500] SFLimey_: rb file includes
[2014-01-17 10:28:26 -0500] SFLimey_: depends 'aws',             '= 0.1.0'
[2014-01-17 10:29:03 -0500] SFLimey_: The json file has dependencies with the
[2014-01-17 10:29:19 -0500] SFLimey_: depends "aws",             "= 0.1.0"
[2014-01-17 10:29:36 -0500] SFLimey_: Totally stumped at this point.
[2014-01-17 10:40:58 -0500] henk76: morning guys, Is it possible to have nodes wait for the completion of another recipe on another node. Like stopping the service on a application node, executing a SQL script on a database node, and then start the service again on the application node?
[2014-01-17 10:45:43 -0500] workmad3: henk76: not out the box
[2014-01-17 10:46:01 -0500] workmad3: henk76: chef doesn't do multi-machine orchestration
[2014-01-17 10:46:45 -0500] henk76: so it's basically a manual task in this case.
[2014-01-17 10:48:07 -0500] workmad3: or you try and reduce it to tasks that don't require that level of orchestration
[2014-01-17 10:48:36 -0500] henk76: true. mmmmm Back to the drawing boards it is then ;). thanks workmad3
[2014-01-17 10:49:26 -0500] workmad3: it may not be possible, I admit... it may be something more suitable for a different tool that does handle that sort of orchestration :)
[2014-01-17 11:34:35 -0500] epcim: henk76: capistrano or scalr could help you - no experience..
[2014-01-17 11:38:57 -0500] SFLimey_: Anyone know how to deal with this error?
[2014-01-17 11:38:57 -0500] SFLimey_: Cookbook aws@0.1.0 not found. If you're loading aws@0.1.0 from another cookbook, make sure you configure the dependency in your metadata
[2014-01-17 11:39:38 -0500] SFLimey_: The cookbook is there and the version is correct. I add the dependency line to the recipe that calls it but not having any luck.
[2014-01-17 12:09:27 -0500] AndHeiberg_: can somebody help me with this error?
[2014-01-17 12:09:30 -0500] AndHeiberg_: https://www.irccloud.com/pastebin/HnqID1VV
[2014-01-17 12:29:36 -0500] perler: hi, i have quick a newbee question re deis and chef. I'm working o the tutorial here: http://docs.deis.io/en/v0.2.1/installation/ec2/ and under 5. the SSH keys and AWS credentials are not found when registering a new user. so subsequently all operations aon the deis controller fail. any help in debugging this?
[2014-01-17 12:38:24 -0500] aditya: hello guys
[2014-01-17 12:46:17 -0500] kinlo: I have the impression that the service statements are queue'd and executed at the end.  Is there a way to force immediate execution?
[2014-01-17 13:39:45 -0500] Garo_: Should a chef-run have full ohai data in the node attribute? All I get from "puts node" is "node[precise64]" :(
[2014-01-17 13:43:26 -0500] tscanausa: is there a changelog for chef-client?
[2014-01-17 13:45:56 -0500] bettyclamp: I'm getting the following error during kitchen verify; I've never used Thor before and the busser github page gives no help on usage; I'm trying to use chefspec with test kitchen: Apologies, but Busser no longer supports the chef_apply helper, so the contents of this block will not be exectued. Please refactor your code to use Thor actions, shell out commands or another strategy
[2014-01-17 13:46:19 -0500] bettyclamp: Any help would be appreciated.
[2014-01-17 13:46:47 -0500] krz: at https://github.com/joeyAghion/opsworks_custom_env/blob/master/templates/default/application.yml.erb where is @env being defined?
[2014-01-17 13:59:12 -0500] konopka: Is there a way to upload all cookbooks from a local kitchen when cookbooks are frozen on a chef server? Knife seems to save all cookbooks regardless if anything has actually changed in each.
[2014-01-17 14:31:45 -0500] cnb_: I'm trying to run chef-solo by providing a url for the tar.gz cookbooks, but the url I'm using requires a login.
[2014-01-17 14:31:55 -0500] cnb_: HTTP AUTH
[2014-01-17 14:32:05 -0500] cnb_: Is there a way to get it to work?
[2014-01-17 14:38:17 -0500] mondo: cnb_: try http://username:password@url.com
[2014-01-17 14:38:53 -0500] cnb_: mondo: First thing I tried.  Doesn't work.
[2014-01-17 14:38:59 -0500] cnb_: Should it?
[2014-01-17 14:39:25 -0500] mondo: Note sure, just threw that out there :)  I don't use solo.
[2014-01-17 14:42:00 -0500] cnb_: I can't believe it's not an option.
[2014-01-17 14:42:01 -0500] CPS: cnb_: maybe this will help http://stackoverflow.com/questions/3044315/how-to-set-the-authorization-header-using-curl
[2014-01-17 14:43:15 -0500] cnb_: CPS: I don't see how that helps.  Is there a way to specify the curl command for chef to use, behind the scenes?
[2014-01-17 14:43:43 -0500] CPS: not sure
[2014-01-17 14:43:55 -0500] CPS: if all else fails you can use an execute block
[2014-01-17 14:44:08 -0500] adnichols: cnb_: This suggests the remote_file resourece does support http auth: https://github.com/opscode/chef/pull/668/files
[2014-01-17 14:44:37 -0500] DandyPandy: I've got a pretty big problem. It would seem that the password for my chef server's embedded rabbitmq has changed for some reason. I'm getting the errors that indicate auth errors in the erchef logs. Any ideas on how I can recover?
[2014-01-17 14:44:42 -0500] adnichols: it's not documented for the remote_file resource that I can see - was looking through the code
[2014-01-17 14:45:46 -0500] cnb_: adnichols: Does chef use the remote block, behind the scenes, when you specify a recipe_url?
[2014-01-17 14:46:05 -0500] trilitheus: Hi, is there any way to use knife to PREPEND a recipe to a runlist?
[2014-01-17 14:46:08 -0500] DandyPandy: By the way, I came into possession of the server from someone else. This all started after an unclean reboot of the server.
[2014-01-17 14:46:11 -0500] cnb_: Yeah, that was my conclusion.
[2014-01-17 14:46:15 -0500] adnichols: cnb_: I'm not sure what you mean by a recipe_url
[2014-01-17 14:46:44 -0500] cnb_: -r RECIPE_URL, --recipe-url RECIPE_URL The URL location from which a remote cookbook tar.gz will be downloaded.
[2014-01-17 14:47:21 -0500] cnb_: When I start chef-solo, rather than pointing at a particular directory of cookbooks, I'm specifying a cookbook.tar.gz file
[2014-01-17 14:47:26 -0500] cnb_: To download everything from
[2014-01-17 14:47:59 -0500] cnb_: That set of cookbooks is versioned and stored in an Artifactory repository, which uses HTTP authentication
[2014-01-17 14:48:02 -0500] adnichols: cnb_:  I must have missed hte original context - if you need to do that then I'm guessing it doesn't expect auth - I thought you were trying to use auth in a recipe
[2014-01-17 14:48:24 -0500] cnb_: Yeah.  I could easily script my way around it
[2014-01-17 14:48:34 -0500] adnichols: cnb_: I'd probably wrap this in a rake task or something to download it first
[2014-01-17 14:48:36 -0500] cnb_: IF it was happening in a recipe.  But it's not.
[2014-01-17 14:48:57 -0500] adnichols: just use curl (as suggested above) to download the recipe first
[2014-01-17 14:49:02 -0500] cnb_: I'm trying to avoid wrapping it in another task.
[2014-01-17 14:49:31 -0500] cnb_: This is actually part of a vagrant developer deploy process
[2014-01-17 14:49:35 -0500] adnichols: ok, good luck - maybe there's a way
[2014-01-17 14:50:01 -0500] cnb_: And since they can just run "vagrant up" I'm worried they're going to skip the "correct" way of doing it
[2014-01-17 14:50:18 -0500] cnb_: And cause all sorts of headaches and versioning issues
[2014-01-17 14:50:42 -0500] adnichols: yeah, that's why we have CI do our deploys / cookbook releases
[2014-01-17 14:50:44 -0500] cnb_: Which could easily be avoided if I could just specify a user/pass to the url
[2014-01-17 14:51:01 -0500] cnb_: Can't do CI for individual developers
[2014-01-17 14:51:27 -0500] adnichols: I don't understand enough about the workflow to help I'm afraid
[2014-01-17 14:51:27 -0500] cnb_: That works fine for our testing/production machines
[2014-01-17 14:54:58 -0500] workmad3: cnb_: add a script provisioner to your Vagrantfile that downloads the file?
[2014-01-17 14:55:23 -0500] workmad3: cnb_: you can have multiple provisioners in a Vagrantfile after all, and they run in the order they're defined in the file
[2014-01-17 14:56:04 -0500] cnb_: Hrm.  That's a thought.
[2014-01-17 14:56:43 -0500] workmad3: cnb_: I did that for some vagrantfiles before I found the vagrant-omnibus plugin to download and install chef ;)
[2014-01-17 14:57:45 -0500] cnb_: workmad3: I'll look into that.  Thanks.
[2014-01-17 15:09:49 -0500] fak3r: any workaround for 'chef server to consume all the CPU' https://tickets.opscode.com/browse/CHEF-3921
[2014-01-17 15:10:20 -0500] fak3r: I'm pretty sure I'm not calling versions out in my cookbooks, looking now
[2014-01-17 15:12:04 -0500] fak3r: running chef-server-ctl         11.0.6
[2014-01-17 15:16:06 -0500] fak3r: also, but default chef-server (11.x) logs are just in /opt/chef-server/embedded/logs/?
[2014-01-17 15:21:57 -0500] wdilly: Im trying to change the group of a directory using the GID, but it wont let me because its not in /etc/group presumably, however, the group is in ldap... can i force it somehow?
[2014-01-17 15:22:11 -0500] wdilly: I am able to do it manually with chgrp...
[2014-01-17 15:46:05 -0500] markp: hi  problem with the new jenkins 2 cookbook
[2014-01-17 15:46:23 -0500] markp: when trying to register slave with jenkins_jnlp_slave resource, I get a 403 from jenkins
[2014-01-17 15:46:37 -0500] markp: but on the cli with the private key in question works
[2014-01-17 16:25:19 -0500] New: Hello
[2014-01-17 16:37:38 -0500] New: k
[2014-01-17 16:38:24 -0500] thom: New: if you have a question you'd be best off just asking it
[2014-01-17 16:41:17 -0500] New: Gotcha.. Wasn't sure if anyone was actually 'monitoring' or watching along... short version... curious if anyone here is Chef staff... I'd been approached regarding joining the company and was hoping to speak / chat with some staff...
[2014-01-17 16:43:01 -0500] jonlives: New: all of the channel ops are, afaik
[2014-01-17 16:43:03 -0500] thom: the list of ops minus fujin and coderanger would probably be a reasonable start point
[2014-01-17 16:43:14 -0500] jonlives: ah yeah
[2014-01-17 16:44:26 -0500] New: Thanks
[2014-01-17 16:52:13 -0500] shlant: is there a way to monitor knife ssh output for command failures and stop it if so?
[2014-01-17 16:52:40 -0500] shlant: like if I run chef-client with knife ssh, could I stop it from running on subsequent servers if one fails?
[2014-01-17 16:59:25 -0500] zeroXten: man, this whole yum 2 vs 3 is really annoying
[2014-01-17 17:01:14 -0500] ringods: A user created by Chef on my Mac VM does not show up in my Users & Groups list in Preferences. Running 'users' in iTerm also does not list it. What is needed to have this user listed?
[2014-01-17 17:02:38 -0500] troyready: last I looked at the provider for the user resource on OS X, it was nigh-unusable because of the changed password hash formats after 10.5 (or maybe 10.6)
[2014-01-17 17:08:03 -0500] docwhat: Hello!  Just so you understand where my question is coming from: I'm new to chef and am coming from puppet.  My question:  How do I order dependencies? e.g. I need to create the file /foo/bar/baz, but it depends on creating the /foo/bar directory first.  How do I ensure the directory is made first?  Equally, if something depends on the baz file, how to I ensure baz is created first?
[2014-01-17 17:09:02 -0500] workmad3: docwhat: chef resources are executed in the order they run in
[2014-01-17 17:09:19 -0500] workmad3: docwhat: so if a file depends on a directory being created, the directory resource needs to come before that file
[2014-01-17 17:09:48 -0500] tligda: docwhat: chef executes the recipe in order, so top to bottom.
[2014-01-17 17:09:49 -0500] workmad3: docwhat: chef resources should also be idempotent due to this - running the same resource multiple times should be safe and not change things
[2014-01-17 17:09:53 -0500] ringods: troyready: does this mean that you can't create users anymore that become visible as users in the login panel?
[2014-01-17 17:11:06 -0500] workmad3: docwhat: it's that aspect of chef which is why I chose it over puppet a few years ago btw ;) figuring out what was going to happen in a puppet run seemed to be too annoying in a complex setup
[2014-01-17 17:11:06 -0500] docwhat: workmad3: ok. so that ensures order within a file, but what if (in my example) the baz file is required for something (like apache configuration).  Do I use 'subscribe '/foo/bar/baz'' in my apache configuration recipe?
[2014-01-17 17:11:33 -0500] workmad3: docwhat: the run list is also executed in order
[2014-01-17 17:11:38 -0500] troyready: ringods, Not sure. I just wouldn't see a lot of benefit from using the user resource on OS X currently until someone is bothered by https://tickets.opscode.com/browse/CHEF-2813 enough to fix it
[2014-01-17 17:11:51 -0500] docwhat: workmad3: I agree.  The fact you can't print the dependency tree is annoying.  Plus they recently added "phases", which has caused headaches for me.
[2014-01-17 17:12:13 -0500] workmad3: docwhat: and ideally, your apache config recipe should set up the stuff it needs
[2014-01-17 17:12:31 -0500] workmad3: docwhat: so if your apache config needs a file, your apache config recipe makes sure it's there
[2014-01-17 17:12:44 -0500] docwhat: workmad3: okay, so the run-list can be used to order, but that requires some discipline.
[2014-01-17 17:13:31 -0500] docwhat: Okay, my example is overly simple... I should say, the file is the executable /usr/sbin/ssh-auditor.  And when I set up a system with a shared SSH account, I need that file to exist to create the correct authorized_keys file.
[2014-01-17 17:13:54 -0500] workmad3: docwhat: you can also use include_recipe inside another recipe to make use of dependencies
[2014-01-17 17:14:07 -0500] docwhat: Oh, do those rrun in order too, workmad3?
[2014-01-17 17:14:19 -0500] workmad3: docwhat: they run when the 'include_recipe' line is reached
[2014-01-17 17:14:40 -0500] docwhat: ah-hah...okay.  That answers that.  I assume recipes don't run twice?
[2014-01-17 17:14:48 -0500] workmad3: docwhat: no, they can do :)
[2014-01-17 17:14:53 -0500] docwhat: Well, it doesn't matter if they are idempotent...
[2014-01-17 17:15:03 -0500] docwhat: workmad3: Thanks, that clears things up.
[2014-01-17 17:15:35 -0500] workmad3: docwhat: exactly ;) either they're idempotent and it doesn't matter, or you can wrap the recipe so that it runs multiple times with different info
[2014-01-17 17:16:37 -0500] workmad3: docwhat: obviously, if you have things like an 'execute' resource that shells out to run an arbitrary command, that needs some care to ensure idempotency (either the command itself needs to be idempotent, or you need to add a not_if guard to ensure it only runs if it needs to)
[2014-01-17 17:17:01 -0500] docwhat: workmad3: Yeah, but I'm used to that with puppet.
[2014-01-17 17:17:23 -0500] workmad3: :)
[2014-01-17 17:17:48 -0500] docwhat: And I can use node[] information to store configurations. e.g. if the magic_user should be 'foo' not 'bar', then if it is stored in a node, and everything uses that node information, everybody is on the same page.
[2014-01-17 17:18:03 -0500] workmad3: yeah, basically
[2014-01-17 17:18:20 -0500] docwhat: workmad3: Thanks.  Still stumbling around.  But I'm loving the ability to write unittests, even if I understand everything yet.
[2014-01-17 17:18:30 -0500] docwhat: And integration tests! w00t!
[2014-01-17 17:19:03 -0500] workmad3: docwhat: my personal preference is to write lots of custom resources rather than recipes in chef, and then I have a single recipe for a server config that pulls together those custom resources
[2014-01-17 17:19:45 -0500] docwhat: Interesting.  That would also prevent mis-configurations... e.g. node[] is more like a global and resources are like functions with arguments.
[2014-01-17 17:20:13 -0500] workmad3: yeah, and it also leaves more freedom for a specific server whether to use node info or databag info
[2014-01-17 17:24:09 -0500] docwhat: Yeah, I need a good explanation of how you setup a server... e.g. do you have to do lots of configuration of the node? Or via databag stuff?
[2014-01-17 17:24:23 -0500] docwhat: Do you have a recommendation, workmad3?
[2014-01-17 17:24:56 -0500] workmad3: docwhat: ideally, you shouldn't have much individual config of a specific node
[2014-01-17 17:25:03 -0500] docwhat: There is also a lack of a definitive "best practices" type document...though I know that's hard...  Especially since we aren't cloud based here, which a lot of tutorials seem to assume.
[2014-01-17 17:25:09 -0500] docwhat: workmad3: That was my feeling.
[2014-01-17 17:25:13 -0500] workmad3: docwhat: that leads too quickly into specific, hand-crafted nodes that are difficult to reproduce
[2014-01-17 17:25:35 -0500] docwhat: Better than manually configuring, but still...down that path madness lies.
[2014-01-17 17:26:41 -0500] workmad3: yeah, so I currently have some data set on the chef environment and the rest is either from data bags, automatic data that's picked up from the machine (e.g. the fqdn) or embedded in the recipe itself
[2014-01-17 17:27:13 -0500] workmad3: I've also set things up so that I can change the data bag in use based on the environment, which lets me change things out depending on the environment
[2014-01-17 17:27:27 -0500] workmad3: dunno if that's really 'best practice' but it's working for me at the moment :)
[2014-01-17 17:30:47 -0500] geggam: work dammit !
[2014-01-17 17:49:46 -0500] gzilla: im banging my head against the wall with override attributes in roles - can someone take a look at this code?   https://gist.github.com/anonymous/8478035
[2014-01-17 17:50:03 -0500] gzilla: the override in the role is working - the node shows the new value
[2014-01-17 17:50:31 -0500] gzilla: BUT the /etc/resolv.conf never gets the values
[2014-01-17 17:51:11 -0500] gzilla: any reason why knife node show would show a correct attribute but on the system it wouldnt actually apply?
[2014-01-17 17:51:35 -0500] workmad3: gzilla: line 8 is specifically using the default value
[2014-01-17 17:51:49 -0500] workmad3: gzilla: change it to 'node[:resolver][....]
[2014-01-17 17:51:55 -0500] workmad3: gzilla: rather than node.default[...]
[2014-01-17 17:52:02 -0500] gzilla: is that a difference between chef 10 and 11?  this code used to work
[2014-01-17 17:52:09 -0500] krz: what does only_if do?
[2014-01-17 17:52:20 -0500] workmad3: gzilla: there were some changes to attribute loading in chef 11, yes
[2014-01-17 17:52:28 -0500] workmad3: gzilla: and that would be my best guess as to what's going wrong :)
[2014-01-17 17:52:32 -0500] gzilla: workmad3:  thanks, I'll try it :)
[2014-01-17 17:52:48 -0500] workmad3: krz: it runs the resource only if the block or shell command passed to it is true
[2014-01-17 17:53:09 -0500] workmad3: krz: e.g. 'only_if {::File.exists?("/this/file/needs/to/be/here")}'
[2014-01-17 17:53:10 -0500] c_t: the resource that it's in gets executed only_if the condition is true
[2014-01-17 17:53:17 -0500] c_t: or what workmad3 said
[2014-01-17 17:53:26 -0500] c_t: there's also a not_if, if that's your style
[2014-01-17 17:53:37 -0500] workmad3: I tend to use not_if more than only_if
[2014-01-17 17:53:57 -0500] workmad3: especially for installing things that need to be downloaded as a tarball and 'make install'ed
[2014-01-17 17:54:59 -0500] workmad3: 'execute "make install" do; not_if {::File.exists?(install_location)}; end'
[2014-01-17 17:55:44 -0500] gzilla: workmad3: thanks!  that worked.  ive been fighting that for a while.
[2014-01-17 17:56:16 -0500] workmad3: gzilla: great :)
[2014-01-17 17:58:43 -0500] krz: thanks workmad3
[2014-01-17 17:59:54 -0500] krz: in a recipe, is it possible to get the deploy_to value?
[2014-01-17 18:09:29 -0500] allaire: anybody setup mmonit here?
[2014-01-17 18:09:37 -0500] fak3r: still having issues with chef-server 11.6 - run chef-client against it and it pops up to 98% CPU and stays there. Restart fixes, but that's not sustainable
[2014-01-17 18:09:38 -0500] shlant: if you don't specify permissions when creating a file, does it use the dir permissions?
[2014-01-17 18:09:45 -0500] fak3r: allaire: I did a long time ago
[2014-01-17 18:10:08 -0500] fak3r: allaire: there are open sourced web front ends that run in sinatra on github
[2014-01-17 18:10:25 -0500] fak3r: allaire: that can connect/aggregate multiple monit nodes
[2014-01-17 18:11:09 -0500] allaire: this? https://github.com/argami/monitrb
[2014-01-17 18:11:14 -0500] allaire: 3 star
[2014-01-17 19:16:24 -0500] rb1980_: Hi, I'm stumped on this one and wondering if someone can help:
[2014-01-17 19:16:31 -0500] coderanger: rb1980_: Perhaps
[2014-01-17 19:16:52 -0500] rb1980_: is it possible to reference a node attribute in a role that is in .json format?
[2014-01-17 19:17:07 -0500] coderanger: rb1980_: Not sure what you mean
[2014-01-17 19:17:14 -0500] coderanger: like set default and/or override attrs?
[2014-01-17 19:17:34 -0500] rb1980_: yeah, but an attribute that has another attribute in it
[2014-01-17 19:17:46 -0500] rb1980_: like: "rbenv": {         "root_path": "/usr/local/rbenv/versions/#{node.passenger[:rbenv][:version]}/lib/ruby/gems/#{node.passenger[:rbenv][:version]}/gems/passenger-#{node.passenger[:version]}"       }
[2014-01-17 19:17:48 -0500] coderanger: No, that is not possible in roles, in either Ruby or JSON format
[2014-01-17 19:17:56 -0500] coderanger: You can use a cookbook to do it though
[2014-01-17 19:19:03 -0500] rb1980_: ok, so not possible?
[2014-01-17 19:19:12 -0500] rb1980_: in a role anyway
[2014-01-17 19:19:30 -0500] bbssysop: hello! does chef have to run on port 80?
[2014-01-17 19:19:47 -0500] bbssysop: or can it be disabled, and only listen on 443
[2014-01-17 19:19:56 -0500] coderanger: rb1980_: In a role, that is correct
[2014-01-17 19:20:01 -0500] coderanger: roles are purely static data
[2014-01-17 19:20:04 -0500] markp: jenkins cookbook and authentication with private key
[2014-01-17 19:20:06 -0500] rb1980_: ok, thanks got it
[2014-01-17 19:20:27 -0500] coderanger: bbssysop: Chef, by default, only listens usefully on 443, 80 is just a redirect
[2014-01-17 19:20:32 -0500] coderanger: markp: What about it?
[2014-01-17 19:20:35 -0500] markp: i can validate calls on the cli with the same key i pass to the hwrp
[2014-01-17 19:20:48 -0500] markp: but the hwrp fails with a 403
[2014-01-17 19:20:54 -0500] coderanger: markp: Which jenkins cookbook (there are several)
[2014-01-17 19:20:55 -0500] bbssysop: coderanger: is there a way to disable 80 altogether? so i can run httpd on port80?
[2014-01-17 19:21:02 -0500] markp: the latest 2.0.0 release
[2014-01-17 19:21:23 -0500] rb1980_: i will just have to override it with static data. makes sense
[2014-01-17 19:21:39 -0500] qurve: Hey coderanger, do you know if this is still the best advice for dealing with opsworks: https://sethvargo.com/using-amazon-opsworks-with-berkshelf/
[2014-01-17 19:21:48 -0500] coderanger: bbssysop: http://docs.opscode.com/config_rb_chef_server_optional_settings.html#nginx
[2014-01-17 19:21:57 -0500] coderanger: bbssysop: enable_non_ssl I think
[2014-01-17 19:22:03 -0500] qurve: I'm trying to set up a proof-of-concept on OpsWorks and hit the "We want to have all your cookbooks in one repo" quickly.
[2014-01-17 19:22:12 -0500] bbssysop: coderanger: ill give that a try. thanks for the link. i wasnt turning up anything on the googs.
[2014-01-17 19:22:17 -0500] qurve: I also learned that berks install --path . wipes your CWD :)
[2014-01-17 19:22:20 -0500] coderanger: qurve: Never used opsworks for anything beyond a one-cookbook-trial-run so I can't really say
[2014-01-17 19:22:26 -0500] qurve: Ah, ok.
[2014-01-17 19:22:59 -0500] qurve: Trying to think of the best way to handle this.
[2014-01-17 19:23:12 -0500] coderanger: markp: Sorry, no idea
[2014-01-17 19:23:21 -0500] markp: specifying the node['jenkins']['executor']['private_key'] with my key
[2014-01-17 19:23:28 -0500] coderanger: :D
[2014-01-17 19:23:39 -0500] markp: and call jenkins_jnlp_slave no luck
[2014-01-17 19:24:19 -0500] mondo: anyone managing multiple chef servers?  Any suggestions on the best way to handle them?  I may just use a seperate user account on my workstation to keep from getting mixed up.
[2014-01-17 19:25:58 -0500] markp: schisamo: any idea what might be happening?
[2014-01-17 19:27:49 -0500] gzilla: anyone good with knife exec?
[2014-01-17 19:28:01 -0500] gzilla: this used to work in chef 10, but fails in 11
[2014-01-17 19:28:05 -0500] gzilla: https://gist.github.com/anonymous/8479766
[2014-01-17 19:37:47 -0500] DandyPandy: I'm trying to use a chef-server.rb to set some passwords and putting it in /etc/chef-server/chef-server.rb, but when I run chef-server-ctl reconfigure, it's not picking it up. What am I doing wrong?
[2014-01-17 19:48:47 -0500] rgsteele: Can you not stub out multiple node searches?
[2014-01-17 19:49:41 -0500] rgsteele: It seems like it only registers the last stub for each type.  E.g., if I have stub_search('node', 'somequery') and stub_search('node', 'otherquery'), it only registers the 'otherquery' stub
[2014-01-17 19:54:28 -0500] New: Any plans / future direction to incorporate security policy audit/compliance?
[2014-01-17 19:54:48 -0500] geggam: really... u do security audit compliance in the cloud ?
[2014-01-17 19:55:30 -0500] andy___: we are trying to secure our chef server. our security scan tool has flagged a couple vulnerabilities(cross site request forgery and session id's not being regenerated at each login). has anyone had the opportunity to re-mediate something like that?
[2014-01-17 19:57:05 -0500] coderanger: New: Yes, ChefInc has plans to add audit trails to the existing reporting features in Enterprise Chef
[2014-01-17 19:57:05 -0500] New: As per my Nick.. new with Chef... very familiar with other automation / config mgmt tools... Perhaps I'm mistaken (don't beat me) but Chef can be used against my private cloud or infra..
[2014-01-17 19:57:18 -0500] coderanger: andy___: Are you using Enterprise or FOSS?
[2014-01-17 19:57:24 -0500] New: or I suppose against Paas or IaaS...
[2014-01-17 19:57:52 -0500] coderanger: New: Yes, Chef can be used however you want to use it
[2014-01-17 19:57:58 -0500] New: There is much CEO focus on SecOps compliance...
[2014-01-17 19:58:35 -0500] coderanger: New: Are you using FOSS or Enterprise? (hey look, twice in as many minutes)
[2014-01-17 19:58:39 -0500] andy___: We are on enterprise
[2014-01-17 19:58:49 -0500] New: of course, the legacy tools handle this... interested if this is 'on the radar' for future development of Chef...
[2014-01-17 19:58:51 -0500] geggam: enterprise comes with a agent dude
[2014-01-17 19:59:00 -0500] coderanger: andy___: Do you have the new UI activated? ("chef manager")
[2014-01-17 19:59:55 -0500] coderanger: New: So "compliance" means different things to different people, what specifically are you looking for?
[2014-01-17 19:59:56 -0500] New: @code, not 'actively' using... currently reviewing...
[2014-01-17 20:00:37 -0500] bbssysop: hello! i put this in my chef-server.rb (nginx['enable_non_ssl'] = "false") and now when going to the http://chef.lan it redirects to https://localhost which doesnt work.
[2014-01-17 20:00:38 -0500] coderanger: New: Are you looking to use the paid Enterprise product or the free Open Source version?
[2014-01-17 20:00:39 -0500] bbssysop: where is that set?
[2014-01-17 20:00:45 -0500] geggam: real security or the fake lets give all our shit to amazon and pretend they cant see it security ?
[2014-01-17 20:01:06 -0500] coderanger: bbssysop: You would have to go digging through the chef server cookbook, sec
[2014-01-17 20:01:07 -0500] andy___: @coderanger: I think so
[2014-01-17 20:01:30 -0500] bbssysop: coderanger: i just meant, what is the right way to get chef to stop listening on 80?
[2014-01-17 20:01:40 -0500] bbssysop: coderanger: so it doesnt attempt redirection, or listen on 80.
[2014-01-17 20:01:40 -0500] coderanger: andy___: Does it look like https://preview.opscode.com/?
[2014-01-17 20:02:04 -0500] coderanger: bbssysop: https://github.com/opscode/omnibus-chef-server/tree/master/files/chef-server-cookbooks/chef-server
[2014-01-17 20:02:14 -0500] coderanger: bbssysop: Thats the cookbooks that run when you chef-server-ctl reconfigure
[2014-01-17 20:02:28 -0500] coderanger: andy___: Or manage.opscode.com (the old UI)
[2014-01-17 20:02:48 -0500] New: @code... along the lines of PCI, SOX, etc.
[2014-01-17 20:03:21 -0500] coderanger: New: PCI basically only cares that you have a policy and follow it, doesn't really make demands on the policy itself
[2014-01-17 20:03:44 -0500] geggam: yup...make your own rules and follow them
[2014-01-17 20:03:48 -0500] bbssysop: coderanger: http://paste.ubuntu.com/6769993/
[2014-01-17 20:03:54 -0500] bbssysop: coderanger: why is it setting it to localhost?
[2014-01-17 20:04:07 -0500] coderanger: bbssysop: Just go read that cookbook, I have no idea :)
[2014-01-17 20:04:37 -0500] coderanger: New: But if you are looking for more details audit trails, that is not currently a feature of Chef, it will be in the future (but only in the paid Enterprise version)
[2014-01-17 20:05:00 -0500] bbssysop: hello all!  http://paste.ubuntu.com/6769993/ My chef server is setting its url as localhost, despite my custom config. Why is this?
[2014-01-17 20:05:07 -0500] New: @code.. imagine enterpirse... but more just trying to understand if this 'ability' to identify compliance rules, audit and remediate exists now or (if not) if it is a future addition (perhaps)
[2014-01-17 20:05:38 -0500] coderanger: New: Guessing you are not used to IRC, if you use my full name, it notifies me of your message, usually you can use Tab to complete them
[2014-01-17 20:05:49 -0500] coderanger: bbssysop: I've literally told you what to look at
[2014-01-17 20:05:52 -0500] New: @coderanger.. ok.. think you've just answered... looks to be on future Enterprise roadmap...
[2014-01-17 20:06:05 -0500] geggam: New, linux has audit tools... chef is a framework to manage those tools
[2014-01-17 20:06:09 -0500] coderanger: New: Well no, thats different
[2014-01-17 20:06:20 -0500] coderanger: New: Chef _is_ a compliance tool in many respects
[2014-01-17 20:06:25 -0500] bbssysop: coderanger: thanks for the help! dont know how to not sound like a dick, but im not reading code to figure out how to configure the most basic option in chef. Chef literally wont work without setting its URL. Its the first step, and is not covered in the getting started area.
[2014-01-17 20:06:30 -0500] coderanger: your chef cookbooks are your compliance rules, chef enforces them
[2014-01-17 20:06:51 -0500] coderanger: bbssysop: Chef-server is something that expects to run on its own machine
[2014-01-17 20:07:02 -0500] coderanger: bbssysop: Co-locating it with other services is neither supported nor wise
[2014-01-17 20:07:20 -0500] bbssysop: coderanger: understood.
[2014-01-17 20:07:42 -0500] bbssysop: coderanger: but HTTP is insecure and has no business being part of an orchestration server.
[2014-01-17 20:07:46 -0500] geggam: my only request is to get chef to do a hisorical cmdb
[2014-01-17 20:08:37 -0500] coderanger: bbssysop: https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/chef-server/templates/default/nginx.conf.erb#L46-L57
[2014-01-17 20:09:15 -0500] coderanger: bbssysop: If you set enable_non_ssl to a false value, or non_ssl_port to a false value, it won't generate the config for the redirect
[2014-01-17 20:09:35 -0500] coderanger: geggam: Thats already a feature of Enterprise via Reporting
[2014-01-17 20:09:57 -0500] geggam: for community coderanger  :)
[2014-01-17 20:10:05 -0500] geggam: im cheap
[2014-01-17 20:10:31 -0500] coderanger: geggam: On that I defer to holoway, the raw backend APIs were supposed to be added to FOSS but I don't know if that ever happened
[2014-01-17 20:10:45 -0500] coderanger: geggam: The code in the client is all there though
[2014-01-17 20:10:52 -0500] geggam: nice thanks for that coderanger
[2014-01-17 20:11:14 -0500] coderanger: you just need a server to request/receive the reports and then a UI to view them (which is needed no matter what since ChefInc isn't open sourcing that)
[2014-01-17 20:15:44 -0500] geggam: finally got that damn thing to work
[2014-01-17 20:16:03 -0500] geggam: http://docs.opscode.com/essentials_cookbook_resources_first_run.html whoever wrote that ill buy a beer
[2014-01-17 20:16:06 -0500] geggam: claim it whenever
[2014-01-17 20:18:08 -0500] coderanger: geggam: Warning, thats a _terrible_ idea
[2014-01-17 20:18:22 -0500] coderanger: geggam: Calling node.save during a run will break things for you at some point
[2014-01-17 20:18:38 -0500] coderanger: geggam: Because then stuff can show up in search results even if the run crashes later on
[2014-01-17 20:18:58 -0500] coderanger: geggam: A better option is to load the node from the server, edit the run list, and save back that clean copy
[2014-01-17 20:19:18 -0500] coderanger: that way even if the run aborts, you don't get half-converged state in the search index
[2014-01-17 20:19:38 -0500] lmickh: anyone have an omnibus file for libdb?
[2014-01-17 20:21:12 -0500] xapak: Hello.
[2014-01-17 20:21:41 -0500] geggam: so if it breaks coderanger ... the instance can be destroyed... they are all cattle
[2014-01-17 20:21:53 -0500] geggam: and i only need it one time
[2014-01-17 20:22:14 -0500] geggam: once it runs the other logic will use other parameters
[2014-01-17 20:22:28 -0500] geggam: long term this shit will be resolved by packaging the code
[2014-01-17 20:22:40 -0500] geggam: for now... it works.. all i need :)
[2014-01-17 20:25:37 -0500] geggam: but as always thanks for the sage advice coderanger
[2014-01-17 20:28:29 -0500] dgarstang1: These are REALLY hard to debug! "The following cookbooks are required by the client but don't exist on the server:"
[2014-01-17 20:36:37 -0500] wdilly: Im trying to change the group of a directory using the GID, but it wont let me because its not in /etc/group presumably, however, the group is in ldap... can i force it somehow?
[2014-01-17 20:36:43 -0500] wdilly: manual chgrp works.
[2014-01-17 20:41:54 -0500] coderanger: wdilly: Whats the error you get?
[2014-01-17 20:42:58 -0500] andy___: @coderanger: Sorry for the delay.. was trying to get a hold of the person who manages the server.  it looks like this one http://docs.opscode.com/chef/manage_server_open_source.html
[2014-01-17 20:43:30 -0500] andy___:  @coderanger: I guess that means we are using the open source and not enterprise?
[2014-01-17 20:43:31 -0500] coderanger: andy___: That is no longer maintained and is indeed likely a security risk, it is recommended that you disable it
[2014-01-17 20:43:57 -0500] savant: is there a merge window today?
[2014-01-17 20:44:16 -0500] coderanger: savant: As I've said before, btm announces them on Twitter
[2014-01-17 20:44:28 -0500] savant: is that his twitter nick?
[2014-01-17 20:44:31 -0500] coderanger: yes
[2014-01-17 20:44:38 -0500] savant: https://twitter.com/btm
[2014-01-17 20:44:47 -0500] savant: he hasnt tweeted in forever then?
[2014-01-17 20:44:54 -0500] coderanger: oh twitter
[2014-01-17 20:45:00 -0500] coderanger: I parsed that as IRC nick
[2014-01-17 20:45:06 -0500] savant: oh sorry
[2014-01-17 20:45:08 -0500] savant: :(
[2014-01-17 20:45:13 -0500] coderanger: https://twitter.com/btmspox
[2014-01-17 20:45:25 -0500] savant: followed
[2014-01-17 20:45:42 -0500] coderanger: Looks like he is at Shmoocon today, so might not be doing code review
[2014-01-17 20:45:42 -0500] savant: does someone set an irc topic when there is a merge window?
[2014-01-17 20:45:47 -0500] coderanger: someara: Might know more though
[2014-01-17 20:45:47 -0500] savant: that would be good
[2014-01-17 20:45:49 -0500] savant: oh
[2014-01-17 20:46:03 -0500] savant: someara: are you around and do you know if there is a merge window today for opscode cookbooks?
[2014-01-17 20:47:44 -0500] aboudreault: does anyone can get the apache2 cookbook working on ubuntu precise? getting:  ERROR: Module authz_default does not exist!
[2014-01-17 20:47:58 -0500] aboudreault: I see two open tickets... but wondering if there is a workaround for now
[2014-01-17 20:48:35 -0500] savant: aboudreault: i think that module was removed from precise and renamed
[2014-01-17 20:48:39 -0500] savant: cant remember to what, sorry
[2014-01-17 20:48:53 -0500] dgarstang1: oh for the love of god. "The following cookbooks are required by the client but don't exist on the server:"
[2014-01-17 20:48:58 -0500] savant: i think you can remove it
[2014-01-17 20:49:45 -0500] aboudreault: savant, I think it is defaulted somehow in the recipe, since I don't use it in mine
[2014-01-17 20:49:57 -0500] savant: yeah its defaulted
[2014-01-17 20:50:01 -0500] savant: you can override that array
[2014-01-17 20:50:31 -0500] geggam: i love how creating instances in ec2 can vary anywhere from 3   to 15 minutes per
[2014-01-17 20:51:06 -0500] aboudreault: savant, setting it to? node['apache']['mod_authz_default'] = nil ?
[2014-01-17 20:51:10 -0500] wdilly: coderanger, sorry, i get the error: Chef::Exceptions::GroupIDNotFound: cannot determine group id for '95', does the group exist on this system?
[2014-01-17 20:51:34 -0500] aboudreault: ah, I see there is a node['apache']['default_modules']
[2014-01-17 20:51:51 -0500] wdilly: and its true, the group does not exist locally, but it is a valid group in ldap
[2014-01-17 20:52:28 -0500] dgarstang1: How do I debug "The following cookbooks are required by the client but don't exist on the server:" ???
[2014-01-17 21:08:00 -0500] CPS: so I've got a new server i want to add as a Chef node. it has chef client installed but not configured. Can I just copy over the chef folder from another node and run chef-client in order to register it?
[2014-01-17 21:08:12 -0500] geggam: so coderanger ... if i put action :nothing in a block and then call that block from another execute statement ... im getting action :nothing not running
[2014-01-17 21:08:13 -0500] CPS: what's the recommended way to join a new node like this?
[2014-01-17 21:09:01 -0500] jfoy: Hey, all -- question on include_recipe in lightweight providers
[2014-01-17 21:09:05 -0500] jfoy: It looks like it "works"
[2014-01-17 21:09:13 -0500] jfoy: but I think it may not do what we mean
[2014-01-17 21:09:23 -0500] jfoy: Anyone familiar with this?
[2014-01-17 21:09:36 -0500] helfire: jfoy: i was just looking at it last night, not recommended, but works
[2014-01-17 21:09:44 -0500] jfoy: Here's the problem we see:
[2014-01-17 21:09:46 -0500] helfire: you probably saw the same ticket
[2014-01-17 21:10:04 -0500] jfoy: We've been doing it for some time successfully, but just got bitten by it
[2014-01-17 21:10:11 -0500] helfire: CPS: yes get the validator onto the client somehow and it'll register a new node
[2014-01-17 21:10:15 -0500] jfoy: And I want to see if there's a better way
[2014-01-17 21:10:28 -0500] CPS: helfire: can i wholesale copy the chef folder?
[2014-01-17 21:10:33 -0500] CPS: any settings i need to change?
[2014-01-17 21:10:54 -0500] jfoy: helfire: We have lots of Ruby apps and package our own interpreters
[2014-01-17 21:10:55 -0500] helfire: CPS: no just the validator and a sanitized config, havent done it in a while since knife bootstraps it for me
[2014-01-17 21:11:17 -0500] aboudreault: does anyone have an example how to remove a module from the apache2 default modules?
[2014-01-17 21:11:34 -0500] aboudreault: tried various things, apparently, it's not the right way
[2014-01-17 21:11:50 -0500] jfoy: We have a ruby base cookbook with a "for" LWRP: pass it a path, it extracts the .ruby-version and ensures that interpreter is installed
[2014-01-17 21:11:52 -0500] jfoy: Pretty sweet
[2014-01-17 21:12:50 -0500] jfoy: Internally, that's doing a `run_context.include_recipe wp_ruby::#{version}`
[2014-01-17 21:13:15 -0500] jfoy: So we have a recipe for each interpreter, for controlling things like the Bundler version
[2014-01-17 21:13:34 -0500] jfoy: The problem is
[2014-01-17 21:14:18 -0500] jfoy: run_context.include_recipe is a no-op if elsewhere in the top-level run context that recipe has already been included
[2014-01-17 21:15:04 -0500] jfoy: but - there's no guarantee that the resources added to the top-level run context's resource collection have been evaluated by the time our LWRP resource (doing the include_recipe) is evaluated
[2014-01-17 21:17:01 -0500] jfoy: So someone else who happens to depend on the same Ruby interpreter can add that resource to their cookbook, occurring later in the run list, and when my recipe is evaluated and runs 'bundle', it blows up
[2014-01-17 21:18:02 -0500] jfoy: I think the overall answer is probably "we're doing it wrong"
[2014-01-17 21:18:11 -0500] jfoy: but I'm trying to find out how else to solve this problem
[2014-01-17 21:22:19 -0500] jfoy: To be clear: we're using use_inline_resources in the LWRP, which is what gives us the resource isolation
[2014-01-17 21:23:23 -0500] jfoy: biab
[2014-01-17 21:23:42 -0500] coderanger: geggam: Define "call that block"
[2014-01-17 21:28:36 -0500] CPS: helfire: why might i get a 401 response when trying to add a new node? the pem file is in place and i've created the node in the webui
[2014-01-17 21:35:40 -0500] helfire: CPS: sorry, been so long since i've done it that way
[2014-01-17 21:47:44 -0500] coderanger: CPS: FOSS or enterprise?
[2014-01-17 21:48:03 -0500] coderanger: CPS: (most likely Enterprise)
[2014-01-17 21:50:04 -0500] savant: someara: no merge wind?
[2014-01-17 21:50:14 -0500] coderanger: savant: There is no such thing as a "merge window"
[2014-01-17 21:50:20 -0500] coderanger: Just code review sessions
[2014-01-17 21:50:34 -0500] CPS: FOSS coderanger
[2014-01-17 21:50:41 -0500] CPS: i figured it out
[2014-01-17 21:50:43 -0500] savant: okay well is there one of those today?
[2014-01-17 21:50:44 -0500] coderanger: You can, of course, get your code reviewed any time
[2014-01-17 21:50:52 -0500] CPS: i created a node in the webui, then a client with the same name
[2014-01-17 21:50:59 -0500] savant: i want it merged
[2014-01-17 21:51:04 -0500] savant: when can that happen
[2014-01-17 21:51:05 -0500] CPS: copied the private key to client.pem on the new node
[2014-01-17 21:51:35 -0500] coderanger: savant: Whats the ticket?
[2014-01-17 21:51:43 -0500] savant: ooo lots of tem
[2014-01-17 21:51:49 -0500] savant: https://github.com/opscode-cookbooks/mysql/pull/147
[2014-01-17 21:51:59 -0500] coderanger: savant: pull reqs don't matter, whats the Jira ticket?
[2014-01-17 21:52:07 -0500] savant: fixes like 7 cooks
[2014-01-17 21:52:08 -0500] savant: https://tickets.opscode.com/browse/COOK-3931
[2014-01-17 21:52:08 -0500] savant: https://tickets.opscode.com/browse/COOK-3945
[2014-01-17 21:52:08 -0500] savant: https://tickets.opscode.com/browse/COOK-3966
[2014-01-17 21:52:08 -0500] savant: https://tickets.opscode.com/browse/COOK-3985
[2014-01-17 21:52:09 -0500] savant: https://tickets.opscode.com/browse/COOK-3974
[2014-01-17 21:52:09 -0500] savant: https://tickets.opscode.com/browse/COOK-4001
[2014-01-17 21:52:09 -0500] savant: https://tickets.opscode.com/browse/COOK-4071
[2014-01-17 21:54:11 -0500] coderanger: savant: So that patch is definitely not working
[2014-01-17 21:54:25 -0500] coderanger: savant: I'll leave comments on the diff
[2014-01-17 21:54:54 -0500] savant: oks
[2014-01-17 21:57:00 -0500] aboudreault: savant,  do you  know how to remove a module from the apache2 default modules?
[2014-01-17 21:57:52 -0500] coderanger: aboudreault: Which default modules?
[2014-01-17 21:58:11 -0500] aboudreault: I need to remove mod_authz_default from that list
[2014-01-17 21:58:15 -0500] aboudreault: since it is no longer work
[2014-01-17 21:58:26 -0500] coderanger: No longer works?
[2014-01-17 21:58:42 -0500] coderanger: Oh, because you are using authnz_default
[2014-01-17 21:59:11 -0500] aboudreault: I'm not. It is in the default_modules list
[2014-01-17 21:59:32 -0500] aboudreault: so, automatically enabled. but it doesn't exist anymore with a recent update of apache2
[2014-01-17 21:59:40 -0500] coderanger: adnichols: Just override the attribute
[2014-01-17 21:59:55 -0500] aboudreault: I tried
[2014-01-17 22:00:08 -0500] savant: and that was fixed. thank you coderanger
[2014-01-17 22:00:11 -0500] aboudreault: but where should I put that?
[2014-01-17 22:00:26 -0500] aboudreault: I tried to put it in my attributes/default.rb file
[2014-01-17 22:00:32 -0500] savant: in your role
[2014-01-17 22:00:39 -0500] savant: override['...']
[2014-01-17 22:01:04 -0500] aboudreault: I don't have any role
[2014-01-17 22:01:37 -0500] coderanger: savant: What is this /etc/mysql/debian.cnf?
[2014-01-17 22:02:06 -0500] coderanger: aboudreault: attr file is fine too, as long as your cookbook loads in the right order
[2014-01-17 22:02:15 -0500] coderanger: aboudreault: This would be something you use a wrapper cookbook for
[2014-01-17 22:02:29 -0500] aboudreault: I did that in my attributes/default.rb: default['apache']['mod_authz_default'] = %{mod_fastcgi}
[2014-01-17 22:02:31 -0500] aboudreault: (to test)
[2014-01-17 22:02:42 -0500] coderanger: aboudreault: Set it at the override level
[2014-01-17 22:03:02 -0500] coderanger: so
[2014-01-17 22:03:21 -0500] coderanger: override['apache']['default_modules'] = %w{mod_fcgi}
[2014-01-17 22:04:40 -0500] savant: coderanger: https://github.com/josegonzalez/mysql/commit/3586ac687477671337b60b79cb74a90b6ac16494
[2014-01-17 22:04:53 -0500] aboudreault: testing. I was using default with the locale module. didn't know about override.
[2014-01-17 22:04:59 -0500] savant: if you dont template it out, then the service cannot restart because the debian-sys-maint user will have a random password
[2014-01-17 22:05:01 -0500] coderanger: savant: Yes, but what uses that config?
[2014-01-17 22:05:07 -0500] coderanger: savant: Is it some debian custom thing?
[2014-01-17 22:05:16 -0500] savant: yeah
[2014-01-17 22:05:20 -0500] coderanger: savant: It looks like a similar format to my.cnf, but different?
[2014-01-17 22:05:32 -0500] savant: that file contains the debian-sys-maint user
[2014-01-17 22:05:41 -0500] savant: which is used when you stop/start/restart/herp the service
[2014-01-17 22:07:04 -0500] coderanger: savant: Gotcha
[2014-01-17 22:07:57 -0500] coderanger: savant: Does it actually need to reload the service when that file changes?
[2014-01-17 22:08:11 -0500] coderanger: savant: Seems like from what you are saying, it doesn't actually affect the service, just the admin scripts
[2014-01-17 22:08:17 -0500] savant: the _service_debian thing restarts the service
[2014-01-17 22:08:18 -0500] savant: after install.
[2014-01-17 22:08:34 -0500] coderanger: Right, but that template file might not need a notification to reload the service
[2014-01-17 22:08:43 -0500] savant: https://github.com/josegonzalez/mysql/blob/3586ac687477671337b60b79cb74a90b6ac16494/recipes/_server_debian.rb#L107
[2014-01-17 22:09:02 -0500] savant: if you change that password it does.
[2014-01-17 22:09:03 -0500] coderanger: Yes, but you are saying the files are used for different things
[2014-01-17 22:09:18 -0500] savant: if you dont reload there
[2014-01-17 22:09:31 -0500] savant: it breaks
[2014-01-17 22:09:33 -0500] savant: i cant remember why
[2014-01-17 22:09:36 -0500] savant: this was like a month ago.
[2014-01-17 22:09:49 -0500] coderanger: Okay, so that does actually configure the server-side password, not just document it?
[2014-01-17 22:10:07 -0500] savant: yes
[2014-01-17 22:11:29 -0500] coderanger: Gotcha
[2014-01-17 22:15:26 -0500] coderanger: savant: I poked btm and ssd7 on Twitter, thats about all I can do
[2014-01-17 22:16:17 -0500] savant: oks
[2014-01-17 22:51:00 -0500] Guest55904: hi, guys. just wanted to ask - is this the correct way of defining / adding roles with chef solo + vagrant + multiple virtual machines: https://gist.github.com/zeroDivisible/8483145 ?
[2014-01-17 23:08:10 -0500] Netsnipe: Hi everyone. Is there anyone from OpsCode here who's responsible for the chef-solo distribution?
[2014-01-17 23:09:06 -0500] Netsnipe: I'm an engineer with a large Cloud provider, and I've found a bug that needs reporting
[2014-01-17 23:09:43 -0500] Netsnipe: just need some guidance on how to best report it in private
[2014-01-17 23:21:49 -0500] amiri: I am using the nginx::http_geoip_module recipe, but my libtool is too new, which means I need to run autoreconf before compiling. I think I should override/replace the bash resource in nginx/recipes/http_geoip_module.rb, but I cannot figure out how to do that. Can someone point me in the right direction?
[2014-01-17 23:23:32 -0500] pwelch_: amiri: you could try chef-rewind in your wrapper cookbook: https://github.com/bryanwb/chef-rewind
[2014-01-17 23:23:44 -0500] pwelch_: but Ive never tried it on a bash resource
[2014-01-17 23:23:57 -0500] amiri: OK, I was just about to ask whether that works for such resources.
[2014-01-17 23:24:17 -0500] pwelch_: would have to try it. So far Ive only used it for templates but I imagine it would work
[2014-01-17 23:24:29 -0500] amiri: I think I will just install geoip myself with my own recipe.
[2014-01-17 23:24:40 -0500] amiri: Thank you pwelch_.
[2014-01-17 23:25:12 -0500] pwelch_: amiri: no problem. good luck

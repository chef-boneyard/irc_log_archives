[2014-01-13 00:45:50 -0500] savant: Day 19: Still don't have my PR on opscode-cookbook/mysql merged. Starting to get desperate and drinking draino.
[2014-01-13 00:47:18 -0500] coderanger: savant: Did you attend the last code review meeting?
[2014-01-13 00:47:23 -0500] savant: If I don't live to see the next merge window, give my private keys to coderanger
[2014-01-13 00:47:34 -0500] savant: I've been in #chef to figure out *where* that is
[2014-01-13 00:47:39 -0500] savant: the past 4 reviews
[2014-01-13 00:47:43 -0500] savant: assuming they are still MWF
[2014-01-13 00:47:47 -0500] savant: around noon
[2014-01-13 00:47:56 -0500] Death_Syn: can't just use your fork?
[2014-01-13 00:48:33 -0500] savant: i could
[2014-01-13 00:48:38 -0500] savant: except this doesn't affect just me
[2014-01-13 00:48:56 -0500] savant: there are at least 7 different cook issues opened because of this
[2014-01-13 00:49:04 -0500] savant: and it closes 5 prs
[2014-01-13 00:49:11 -0500] savant: and affects any recent debian-based system.
[2014-01-13 00:49:17 -0500] coderanger: savant: They are announced on Twitter and in here usually
[2014-01-13 00:49:31 -0500] savant: coderanger: well i'll be here tomorrow and just wait
[2014-01-13 00:50:00 -0500] coderanger: Following btm, somera, ssd7, et al
[2014-01-13 00:50:02 -0500] coderanger: helps
[2014-01-13 00:50:35 -0500] borntyping: coderanger: Sorry to keep poking you on this, but is there any news on https://github.com/poise/supervisor/pull/32 ?
[2014-01-13 00:58:55 -0500] borntyping: (and yet again, no reply...)
[2014-01-13 01:26:12 -0500] coderanger: borntyping: Just needs to be unconflicted
[2014-01-13 01:31:34 -0500] borntyping: coderanger: unconflicted with the current master?
[2014-01-13 01:32:08 -0500] coderanger: borntyping: Yeah
[2014-01-13 01:32:26 -0500] coderanger: borntyping: github thinks there are conflicts so I can't push the button :)
[2014-01-13 01:32:48 -0500] borntyping: awesome, I can sorry that out tomorrow :)
[2014-01-13 01:32:49 -0500] coderanger: borntyping: We decided to not have a CLA For Poise
[2014-01-13 01:32:57 -0500] borntyping: *sort
[2014-01-13 01:33:11 -0500] coderanger: since I will never do non-ApacheV2 commercial relicensing
[2014-01-13 01:34:19 -0500] borntyping: I've not really kept up with Poise, is it just an OS chef project or an actual group/company?
[2014-01-13 01:35:42 -0500] coderanger: Its a brand name for all of my work that isn't under the Balanced name
[2014-01-13 01:35:43 -0500] coderanger: basically
[2014-01-13 01:35:59 -0500] gchristensen: coderanger: you work at balanced?
[2014-01-13 01:36:03 -0500] coderanger: gchristensen: I do
[2014-01-13 01:36:05 -0500] gchristensen: neat
[2014-01-13 01:36:09 -0500] borntyping: Ah, that makes more sense
[2014-01-13 01:37:00 -0500] c_t: aha
[2014-01-13 01:37:59 -0500] c_t: it was bugging me last week because I saw something about balanced, and I had a weird feeling I somehow knew someone there on some level, but couldn't put my finger on who, how, or why
[2014-01-13 01:38:22 -0500] c_t: (well, I was reasonably sure about the "how")
[2014-01-13 01:38:56 -0500] coderanger: c_t: Steve Klabnik is more vocal about it than I
[2014-01-13 01:39:31 -0500] c_t: coderanger: perhaps, or you may have off-handedly mentioned it and it stuck a little
[2014-01-13 01:39:33 -0500] coderanger: c_t: I don't do a ton of work on the product(s), just ops and architecture stuff
[2014-01-13 01:40:33 -0500] c_t: your CTO RTed me at one point, and I couldn't figure out why I knew the name of the company
[2014-01-13 01:40:54 -0500] c_t: not an especially interesting incident or anything like that
[2014-01-13 01:50:28 -0500] coderanger: c_t: He likes the twitter
[2014-01-13 01:51:42 -0500] gchristensen: coderanger: what does it mean to have a resident philosopher on staff of a payment co?
[2014-01-13 01:51:47 -0500] gchristensen: s/to have/to be/
[2014-01-13 01:52:11 -0500] coderanger: gchristensen: Is that Steve?
[2014-01-13 01:52:19 -0500] gchristensen: yeah, the website says he's resident philosopher :P
[2014-01-13 01:52:24 -0500] coderanger: Heh, sounds about right
[2014-01-13 01:52:31 -0500] coderanger: does it still say devops for me?
[2014-01-13 01:52:39 -0500] coderanger: My boss added that as a troll and I just left it
[2014-01-13 01:52:40 -0500] gchristensen: I believe so
[2014-01-13 01:52:45 -0500] gchristensen: hah
[2014-01-13 01:52:53 -0500] coderanger: My title on LinkedIn is "Scruffy Nerf Herder"
[2014-01-13 01:53:02 -0500] gchristensen: olid
[2014-01-13 01:53:20 -0500] gchristensen: solid* my S key frequently has issues :(
[2014-01-13 03:04:59 -0500] josh-k: hey everyone
[2014-01-13 03:05:14 -0500] josh-k: i had a small question about attribute files
[2014-01-13 03:06:18 -0500] josh-k: if i have two recipes (foo::default and foo::multi) and only the default attribute file, does foo::multi load it by default?
[2014-01-13 03:07:01 -0500] josh-k: and added onto that, if i create a multi attribute file, will that instead be loaded by the multi recipe instead of the default attribute file?
[2014-01-13 03:10:15 -0500] coderanger: josh-k: No
[2014-01-13 03:10:21 -0500] coderanger: All attribute files are loaded
[2014-01-13 03:10:49 -0500] coderanger: josh-k: Having more than one attr file is more or less always structurally moot
[2014-01-13 03:11:40 -0500] josh-k: thanks for the info coderanger
[2014-01-13 05:13:37 -0500] mnaser: I'm trying to use chef-solo and riak cookbooks to install Riak.  I have this in my /etc/chef/node.json file - http://pastebin.com/raw.php?i=NJRCt2rG - When the config file gets generated, the #{node['ipaddress']} is taken literally.. how can I avoid this (and have it replaced by the ip)
[2014-01-13 05:14:25 -0500] mnaser: Or do I have to put the literal string in there?
[2014-01-13 05:27:32 -0500] cnk: I am trying to use knife-linode to set up a new server. The server got created just fine but chef isn't getting bootstrapped.
[2014-01-13 05:28:43 -0500] cnk: am I wrong? Shouldn't --distro chef-full have run the install script when I created the node?
[2014-01-13 05:29:12 -0500] cnk: knife bootstrap --distro chef-full worked fine
[2014-01-13 05:41:33 -0500] queuetip: trying to run ntp community cookbook and getting this: ERROR: cookbook_file[/etc/ntp.leapseconds] (ntp::default line 36) had an error: Net::HTTPServerException: 403 "Forbidden"
[2014-01-13 05:51:04 -0500] cnk: from the context, is that while syncing the cookbook? or after it has installed NTP and tried to do something
[2014-01-13 06:13:32 -0500] ignatz: are you dumping core or just having a wacky night?
[2014-01-13 08:16:36 -0500] cyx^: morning. do you guys prefer having a separate repo for recipes, or do you include them within the project's repo?
[2014-01-13 08:19:33 -0500] epcim: cyx^: best practice is to have separate repos for cookbooks
[2014-01-13 08:21:24 -0500] cyx^: epcim: and do you clone this cookbooks repo as a submodule within projects?
[2014-01-13 08:24:21 -0500] Siiseli: Heya. Having a bit of an issue with chef. I have a chef server up and I'm setting up a workstation on the same machine. This seems to work all fine and well, and I can run knife client list to test it out. However, when I try to do a knife bootstrap, I get errors about authorization. It seems to be looking for the validation key at "/etc/chef/validation.pem" though in the knife configuration it's been specified as ...
[2014-01-13 08:24:27 -0500] Siiseli: ... "/vagrant/workstation/.chef/chef-validator.pem". Why is the bootstrap using a different path and where is this defined?
[2014-01-13 08:47:49 -0500] epcim: cyx^: for site-cookbooks I use git submodule. For all other Berkshelf
[2014-01-13 08:49:03 -0500] epcim: cyx^: but depend what is your environment one vs. multiple developers etc. you may preffer not using submodules and ask developers to clone their own subset as they need.
[2014-01-13 08:50:11 -0500] epcim: cyx^: Assume that if multiple developers will work with multiple version/branches of your cookbooks then it may be more painfull with submodules than manually created reos. (no experience)
[2014-01-13 08:51:59 -0500] cyx^: epcim: Thanks, I'm not familiar with Berkshelf. Not a rubyist, but we do use Bundler. Do you use the v2 or v3?
[2014-01-13 09:14:30 -0500] cyx^: Can anyone point me to a project which uses Chef and follows good practices?
[2014-01-13 09:24:40 -0500] zxd: has anyone seen a problem with a cookbook where it depends on a fixed ver of antoher cookbook and then when this other cookbook has new releases the original cookbook which depends on it no longer can be uploaded to chef?
[2014-01-13 09:24:41 -0500] zxd: what to do
[2014-01-13 09:25:02 -0500] zxd: like sphinx  depends on depends          "postgresql", "1.0.0"  but it's now ver 3 of the cookbook
[2014-01-13 09:33:26 -0500] linuxboy: hi
[2014-01-13 09:33:40 -0500] linuxboy: how do I get a chef handler to not report when a 'log' is used in a recipe?
[2014-01-13 09:37:12 -0500] zxd: how do I sepcify the nodename I want for the node I am bootstraping?
[2014-01-13 09:37:21 -0500] zxd: -N
[2014-01-13 09:42:00 -0500] daxroc: Can you use your own vagrant .box with test-kitchen ?
[2014-01-13 09:42:34 -0500] zxd: what's the difference between   client and node  , in knife node/client command
[2014-01-13 09:42:41 -0500] zxd: they both print the same
[2014-01-13 09:43:09 -0500] brucelee: :P
[2014-01-13 09:43:23 -0500] brucelee: anyone up tonight? (or today)
[2014-01-13 09:46:21 -0500] railsraider: can someone please explain in a non cryptic way whats current_resource and whats new_resource?
[2014-01-13 09:53:45 -0500] brucelee: dont know :p
[2014-01-13 09:56:22 -0500] flaccid: zxd: set the fqdn ?
[2014-01-13 09:56:27 -0500] epcim: cyx^: Read this.. http://www.prashantrajan.com/posts/2013/06/leveling-up-chef-best-practices
[2014-01-13 09:58:07 -0500] zxd: flaccid: hmm?
[2014-01-13 09:58:23 -0500] flaccid: zxd: hmmm
[2014-01-13 10:00:40 -0500] zxd: flaccid: what's the difference between having Run List:    role[foo]   in  knife node show   description and something after Roles:
[2014-01-13 10:00:46 -0500] zxd: ah
[2014-01-13 10:00:53 -0500] zxd: it's after the role has been executed?
[2014-01-13 10:01:00 -0500] zxd: it will appear after Role:
[2014-01-13 10:01:07 -0500] zxd: right now it's only in the run_list
[2014-01-13 10:01:20 -0500] flaccid: what does that have to do with 'setting nodename'
[2014-01-13 10:02:06 -0500] zxd: I fixed that
[2014-01-13 10:02:06 -0500] flaccid: a role expands into the run_list
[2014-01-13 10:02:25 -0500] zxd: it's a different question
[2014-01-13 10:03:02 -0500] zxd: how do I execute a role on a node with knife?
[2014-01-13 10:03:50 -0500] flaccid: you don't execute roles, you run chef-client
[2014-01-13 10:04:02 -0500] flaccid: which you could probably only do via knife ssh
[2014-01-13 10:06:18 -0500] flaccid: zxd: http://docs.opscode.com/knife_ssh.html#examples
[2014-01-13 10:09:02 -0500] brucelee: on a very high level, how do i use chef to automate a set of iptables rules for all servers, and in addition, add specific rules based on the role of the server (ie. db, web) server
[2014-01-13 10:10:06 -0500] zxd: flaccid: using knife bootstrap is not the right way to execute a run_list on a node?
[2014-01-13 10:10:29 -0500] flaccid: brucelee: https://github.com/opscode-cookbooks/iptables/blob/master/README.md
[2014-01-13 10:10:44 -0500] zxd: knife bootstrap -r  ...
[2014-01-13 10:10:48 -0500] flaccid: zxd: knife bootstrap bootstraps the node, you use it once
[2014-01-13 10:11:13 -0500] zxd: or to change environment for the node ?
[2014-01-13 10:13:09 -0500] flaccid: zxd: thats shown in http://docs.opscode.com/essentials_environments.html 'Move Nodes'
[2014-01-13 10:13:34 -0500] zxd: I used bootstrap with -E argument
[2014-01-13 10:13:39 -0500] zxd: that isn't right?
[2014-01-13 10:14:07 -0500] flaccid: the doc example, knife exec -E 'nodes.transform("chef_environment:dev") { |n| n.chef_environment("production") }'
[2014-01-13 10:15:02 -0500] zxd: where do I put the node I want to change environment to ?
[2014-01-13 10:15:05 -0500] zxd: the name
[2014-01-13 10:15:46 -0500] flaccid: not sure sorry, i've never used it
[2014-01-13 10:25:26 -0500] zxd: where do I see the option for knife ssh   SEARCH_QUERY
[2014-01-13 10:25:40 -0500] zxd: like name:nodename   didn't find name: anywhere in the docs
[2014-01-13 10:25:45 -0500] zxd: just on howtos
[2014-01-13 10:25:47 -0500] zxd: or examples
[2014-01-13 10:27:34 -0500] zxd: knife ssh 'node:devstation1' 'sudo chef-client'
[2014-01-13 10:27:34 -0500] zxd: FATAL: No nodes returned from search!
[2014-01-13 10:29:12 -0500] daxroc: Any one know of a vmware test-kitchen driver?
[2014-01-13 10:29:52 -0500] brucelee: flaccid: thanks, what does recipe[htpd
[2014-01-13 10:30:03 -0500] brucelee: what does recipe[httpd] mean
[2014-01-13 10:30:09 -0500] brucelee: is that denoting the recipe: httpd?
[2014-01-13 10:30:21 -0500] zxd:  :~/chef-repo$ knife search 'node:*'   v0 items found  ~/chef-repo$ knife node list devstation1
[2014-01-13 10:34:03 -0500] zxd: Unexpected API Request Failure:   Cannot load role devstation1
[2014-01-13 10:34:09 -0500] brucelee: does recipe[httpd] or whatever refer to the cookbook httpd
[2014-01-13 10:34:17 -0500] brucelee: is that pretty much only used to describe cookbooks
[2014-01-13 10:34:26 -0500] zxd: nevermind
[2014-01-13 10:34:27 -0500] zxd: got it
[2014-01-13 10:36:59 -0500] Guest72590: Hi all. I have a problem with chef-client in my cloud. it's private cloud used inside of company, matter is - on Windows PCs (Win 7 and WinXP) - when I try to stop Chef-Client service - I get Error 1053 "Not responded in timely manner", I set up bigger time with ServicesPipeTimeout in Registry, but still no luck. Anybody seen such trouble?
[2014-01-13 10:41:16 -0500] brucelee: flaccid: with iptables recipe, it seems the iptables templates are linked with the cookbooks
[2014-01-13 10:41:51 -0500] brucelee: for example, servers with httpd recipe would have its own set of iptables, servers with mongodb would have their own, mysql, etc
[2014-01-13 10:42:32 -0500] brucelee: i guess thats fine, but what about for servers that are designed to have http installed but not use the same iptables template as the other httpd servers
[2014-01-13 10:42:53 -0500] brucelee: in the beginning i mentioned classifying servers as a role
[2014-01-13 10:43:31 -0500] brucelee: so does that mean i would need to create a copy of the httpd recipe and rename it something else
[2014-01-13 10:43:57 -0500] brucelee: if i wanted a role to also install httpd, but not use the same iptables template as the ones that run the httpd cookbook
[2014-01-13 10:44:44 -0500] cheeseplus: brucelee: then you would override the attributes for each role or environment, no need to copy a cookbook
[2014-01-13 11:15:04 -0500] zxd: workmad3: there?
[2014-01-13 11:15:21 -0500] workmad3: zxd: cross-posting? :P
[2014-01-13 11:15:22 -0500] zxd: I have this in default.rb under attributes http://pastebin.com/wWEdJ9CK
[2014-01-13 11:15:36 -0500] zxd: and get this undefined method `push=' for #<Array:0x00000003821510>
[2014-01-13 11:15:40 -0500] zxd: help me out :)
[2014-01-13 11:15:48 -0500] zxd: please workmad3 :)
[2014-01-13 11:15:56 -0500] zxd: yes I figured it isn't ruby related
[2014-01-13 11:16:07 -0500] workmad3: zxd: that's because you do '.push other_arry' not '.push = other_array'
[2014-01-13 11:16:33 -0500] zxd: ah
[2014-01-13 11:16:35 -0500] zxd: I see
[2014-01-13 11:16:38 -0500] zxd: no assign
[2014-01-13 11:25:46 -0500] astead: I have a query regarding the Opscode yum-ius cookbook, is there a better channel or can I ask here?
[2014-01-13 11:32:55 -0500] BryanWB: i have a complex set of related variables that are modified and used by multiple lwrps, however i don't want them persisted
[2014-01-13 11:33:10 -0500] BryanWB: is node.run_state the right place to store these variables?
[2014-01-13 11:33:49 -0500] BryanWB: for the curious, i am tracking the md device names, lvm vg, and lvs, which can change across boots
[2014-01-13 11:34:25 -0500] jonlives: BryanWB: and you only want to use these variables during a chef run, not save them in any way?
[2014-01-13 11:34:33 -0500] BryanWB: jonlives, yup
[2014-01-13 11:34:42 -0500] BryanWB: jonlives, hi by the way :)
[2014-01-13 11:35:21 -0500] jonlives: BryanWB: hi! run_status feels a little....wrong, but trying to think of a better place ;p
[2014-01-13 11:35:38 -0500] BryanWB: jonlives, yeah, i tried to and couldn't really think of anywhere else
[2014-01-13 11:36:58 -0500] jonlives: BryanWB: off the top of my head, would using a start handler work at all?
[2014-01-13 11:37:09 -0500] BryanWB: jonlives, what is a start handler?
[2014-01-13 11:37:17 -0500] jonlives: BryanWB: http://docs.opscode.com/chef/essentials_handlers.html#start-handlers
[2014-01-13 11:37:24 -0500] jonlives: think it's relatively new
[2014-01-13 11:38:54 -0500] jonlives: BryanWB: out of curiosity, why not use an ohai plugin and just save the attribs on the node? they'll be updated when ohai changes them anyway
[2014-01-13 11:40:08 -0500] BryanWB: jonlives, the hard part is that i need to accommodate imported volumes on aws
[2014-01-13 11:40:26 -0500] BryanWB: were formatted earlier and snapshotted, then reattached to a new ec2 instance
[2014-01-13 11:40:45 -0500] BryanWB: so it's hard to predict what device # will show up as
[2014-01-13 11:41:01 -0500] jonlives: BryanWB: ah I get ya, the lwrps might change the variables. forgot that part.
[2014-01-13 11:41:13 -0500] BryanWB: also, may need to rename the lvm vg if it conflicts w/ another vg name on the instnace
[2014-01-13 11:42:05 -0500] jonlives: BryanWB: idea - why not write HWRPs which all inherit from a superclass which in turn extends resource, have the variables stored in the superclass.
[2014-01-13 11:42:10 -0500] BryanWB: the more i interact w/ device naming on linux, the more it seems i am a fool to expect them to be consistent
[2014-01-13 11:42:46 -0500] jonlives: BryanWB: have the disk info as a class variable on the superclass rather than a class instance variable
[2014-01-13 11:43:06 -0500] BryanWB: jonlives, that's a good idea, but does seem a bit less intuitive and will require my colleagues (non-rubyists) to hack on ruby OOP
[2014-01-13 11:43:29 -0500] jonlives: trrrrue
[2014-01-13 11:43:35 -0500] BryanWB: i think i will try run_state, tho may fail miserably
[2014-01-13 11:44:08 -0500] jonlives: worth a shot :p
[2014-01-13 11:45:00 -0500] daxroc: How do you tell test kitchen to add a role ?
[2014-01-13 12:04:05 -0500] zxd: anyclue what is missing
[2014-01-13 12:04:05 -0500] zxd: http://pastebin.com/gBSHp1TJ
[2014-01-13 12:05:00 -0500] zxd: http://pastebin.com/C8tnqGby
[2014-01-13 12:06:22 -0500] cyx^: epcim: thanks for the link, appreciate your help.
[2014-01-13 12:17:23 -0500] Siiseli: Argh. How can I be getting authentication errors from knife configure about chef-webui.pem, when I just copied the chef-webui.pem from the server's /etc/chef-server/ to the workstations .chef folder. So it SHOULD have the same .pem file on both places, diff says they're the same as well.
[2014-01-13 12:17:50 -0500] Siiseli: and it's using the right key file, too.
[2014-01-13 12:22:06 -0500] enbergj: the documentation for "attribute?" method is pretty poor .. it just says "name of attribute" .. and I found the examples "ec2" and "ipaddress" .. so for node["java"]["jdk"]["7"]["x86_64"]["url"] that would be?
[2014-01-13 12:30:47 -0500] zxd: how do see the ver of coobook on a node?
[2014-01-13 12:46:06 -0500] attilagyorffy: hi chef community
[2014-01-13 12:46:26 -0500] attilagyorffy: which support email address can i write to if my organisation and my account on hosted chef is completely screwed up?
[2014-01-13 12:47:41 -0500] daxroc: Are there any limits to the number of environments that can be created ?
[2014-01-13 12:48:03 -0500] workmad3: daxroc: theoretically? no
[2014-01-13 12:48:24 -0500] workmad3: daxroc: in reality? probably, but I doubt it's anything you'd ever remotely get close to :)
[2014-01-13 12:48:43 -0500] daxroc: 4 - 5 k environments
[2014-01-13 12:48:45 -0500] workmad3: daxroc: we're talking memory limits, disk space limits and the like after all :)
[2014-01-13 12:52:06 -0500] attilagyorffy: ok, i'll try again:
[2014-01-13 12:52:08 -0500] attilagyorffy: admins: which support email address can i write to if my organisation and my account on hosted chef is completely screwed up?
[2014-01-13 12:54:20 -0500] attilagyorffy: or is here somebody who could help unscrewing my organisations? i believe there must be a bug in hosted chef and there permissions.
[2014-01-13 12:56:15 -0500] daxroc: workmad3: It's more like 2.5k currently but  would expand steadily 200+ per year. To explain a little further. We have multiple versions of applications in the wild and some are very picky about upgrading so the ability for them to choose when is a big concern. My thoughts so far was to use Roles for searching only environments to fix the version of software per "group" of nodes and wrapper cookbooks to customise per environment if needed.
[2014-01-13 12:57:10 -0500] daxroc: Does that make sense?
[2014-01-13 12:58:23 -0500] workmad3: daxroc: somewhat, although I'm quite alarmed that you plan to have a steadily growing list of environments rather than either a steady list or a shrinking list as applications lose support, get phased out or get brought under control so they're less tempermental :)
[2014-01-13 12:59:09 -0500] workmad3: daxroc: again though, there isn't a theoretical limit to environments... just you may hit limits in terms of resource use eventually, same as with anything
[2014-01-13 12:59:23 -0500] daxroc: They don't loose support here. 30 years of legacy YAY
[2014-01-13 12:59:43 -0500] workmad3: bleh
[2014-01-13 13:01:27 -0500] daxroc: There is no concept of organisation in open source chef right ?
[2014-01-13 13:02:37 -0500] daxroc: workmad3: The would fit better under organisations.
[2014-01-13 13:02:53 -0500] workmad3: no, open-source chef is kinda of the idea that there's one organisation
[2014-01-13 13:03:53 -0500] workmad3: anyway, lunch time :)
[2014-01-13 13:22:45 -0500] masterkorp: hello chefs
[2014-01-13 13:23:30 -0500] lazypower: 'morning
[2014-01-13 13:24:39 -0500] masterkorp: so I want to be able to get the certs that i generated for a service
[2014-01-13 13:24:46 -0500] masterkorp: the service runs on X machine
[2014-01-13 13:24:51 -0500] masterkorp: its all setted up
[2014-01-13 13:25:12 -0500] masterkorp: now the clients need the server certificate
[2014-01-13 13:25:33 -0500] masterkorp: what would be a "good" way of obtaining those keys with chef ?
[2014-01-13 13:51:53 -0500] zxd: workmad3: the method push turns the variable to something strange: Option package_name must be a kind of [String]!  You passed ["sqlite3", "libreadline6", "libreadline6-dev", "libsqlite3-dev", "zlib1g", "zlib1g-dev", "libmagic-dev", "libssl-dev", "libfreeimage3", "libfreeimage-dev", "libncurses5-dev", "libxslt1-dev", "libxml2-dev", "libyaml-dev", "libmysqlclient-dev", "libmagickwand-dev",
[2014-01-13 13:51:53 -0500] zxd: "libmagickcore-dev", "libcurl4-openssl-dev", "libc6-dev"].
[2014-01-13 13:52:42 -0500] zxd: does  a = %w{socat htop automake curl git-gui gitk elinks xsel libxml2 libtool}   not make  'a' an array?
[2014-01-13 13:53:12 -0500] zxd: and then I do a.push %w{   zlib ...
[2014-01-13 13:53:16 -0500] zxd: something weird happens
[2014-01-13 14:01:36 -0500] railsraider: i am using aws cookbook to set tags on ec2 instances, seems iike the ruby block is not notified http://pastebin.com/e8y7baGB
[2014-01-13 14:03:13 -0500] railsraider: any idea why the ruby block is not executed / notified
[2014-01-13 14:07:23 -0500] workmad3: railsraider: the ruby block won't be notified if the aws_resource_tag did nothing
[2014-01-13 14:07:25 -0500] railsraider: so i see this in docs Use to notify another resource to take an action if this resources state changes for any reason
[2014-01-13 14:07:41 -0500] railsraider: what can i do if the resource did not change
[2014-01-13 14:07:54 -0500] workmad3: railsraider: if you want to run it no matter what, you don't need to use a notifies
[2014-01-13 14:08:11 -0500] workmad3: railsraider: you just put an 'action :create' in the ruby_block resource
[2014-01-13 14:08:18 -0500] railsraider: i initially needed the notified because of the order of tha actions
[2014-01-13 14:08:34 -0500] railsraider: tags were created but the save to yaml save an empty tags
[2014-01-13 14:08:58 -0500] workmad3: railsraider: the point of notifications and subscriptions is to be able to trigger other resources to run only if something 'before' them changed
[2014-01-13 14:09:00 -0500] railsraider: because i was using libraries to get the tags
[2014-01-13 14:10:18 -0500] workmad3: railsraider: I probably wouldn't use a ruby_block there btw, as long as I was on chef 11.6+
[2014-01-13 14:11:04 -0500] workmad3: railsraider: I assume the 'save_ec2_tags_to_yaml' saves to a yaml file on the node?
[2014-01-13 14:11:06 -0500] railsraider: workmad3: i read the tags off ec2 with a method i wrote that is in another cookbook libarary,
[2014-01-13 14:11:14 -0500] railsraider: yes
[2014-01-13 14:11:26 -0500] workmad3: railsraider: right, so what I'd do is a simple file resource
[2014-01-13 14:12:27 -0500] workmad3: railsraider: like this: https://gist.github.com/workmad3/8400919
[2014-01-13 14:12:34 -0500] jardin: Hi  every body
[2014-01-13 14:12:51 -0500] railsraider: whats lazy eval?
[2014-01-13 14:13:10 -0500] workmad3: railsraider: it'll only run that block at converge time when the resource is being executed
[2014-01-13 14:13:16 -0500] railsraider: will this make sure the read_ec2_tags will be called on converge?
[2014-01-13 14:13:20 -0500] workmad3: railsraider: exactly
[2014-01-13 14:13:27 -0500] railsraider: nice
[2014-01-13 14:13:28 -0500] railsraider: thanks
[2014-01-13 14:13:32 -0500] railsraider: i'll try that
[2014-01-13 14:13:39 -0500] workmad3: railsraider: chef 11.6+ or 10.28 has a backport
[2014-01-13 14:13:50 -0500] railsraider: im running chef 11.8
[2014-01-13 14:13:55 -0500] workmad3: not a problem then :)
[2014-01-13 14:14:23 -0500] jardin: I'm looking for testing my cookbooks with kitchen/vagrant. I'm on it since 3 days... But i always end with a Net:SSH auth error. When i launch kicthen login, i t works, but kitchen verify always fail.
[2014-01-13 14:14:52 -0500] jardin: Have you a tips for testing as i am a newbie on that part.
[2014-01-13 14:16:30 -0500] jardin: E, [2014-01-13T15:16:52.733497 #26010] ERROR -- test-suite-wheezy64: Class: Net::SSH::AuthenticationFailed
[2014-01-13 14:16:30 -0500] shlant: morning all
[2014-01-13 14:16:57 -0500] jardin: Hi
[2014-01-13 14:17:32 -0500] jardin: It happens just after "Setup failed on instance <test-suite-wheezy64>."
[2014-01-13 14:19:35 -0500] shlant: jardin: what are you using to provision the instance? vagrant?
[2014-01-13 14:19:51 -0500] jardin: Yes
[2014-01-13 14:20:01 -0500] jardin: vagrant with virtualbox driver
[2014-01-13 14:20:51 -0500] jardin: All the beginning process is ok. Vm is installed, chef-omnibus installed, the cookbook tested itself is installed... But the test part does not work.
[2014-01-13 14:21:14 -0500] jardin: i can kitchen login test-suite-wheezy64
[2014-01-13 14:21:31 -0500] shlant: ah...
[2014-01-13 14:21:39 -0500] jardin: but kitchen verify test-suite-wheezy64 failed all the times
[2014-01-13 14:21:39 -0500] shlant: sorry i don't have experience with kitchen yet
[2014-01-13 14:23:22 -0500] jardin: Hope to have this experience at the end of the day :)
[2014-01-13 14:24:39 -0500] shlant: if I have different git repos required for different recipes, would a git definition be the best way to handle that?
[2014-01-13 14:27:44 -0500] railsraider: workmad3:  thanks for your help it seems like that was what i needed
[2014-01-13 14:28:36 -0500] jardin: shlant: i will add a .kitchen.yml per git repo
[2014-01-13 14:29:46 -0500] shlant: jardin: I'm referring to inside chef cookbooks
[2014-01-13 14:31:35 -0500] jardin: Yes i know... But actually i have 6 differnts git repo myself... And one .kitchen.yml per repo
[2014-01-13 14:31:39 -0500] zxd: how to make databags available to nodes?
[2014-01-13 14:31:50 -0500] zxd: if I load a recipe that accesses the databags is enouth?
[2014-01-13 14:31:56 -0500] jardin: One contains all 'intergration cookbook, and 5 others specifix shared cookbook :)
[2014-01-13 14:32:52 -0500] jardin: Ok got it... I have to explicitly declared username vagrant and password vagrant
[2014-01-13 14:32:58 -0500] jardin: in the conf file
[2014-01-13 14:37:08 -0500] workmad3: shlant: a cookbook metadata.rb can't take the information that a dependency is in a git repo (or any other location, for that matter)
[2014-01-13 14:37:50 -0500] workmad3: shlant: so I guess you're referring to a cookbook's Berksfile? in which case, yes using a git: or github: path to cookbooks is the easiest to start off
[2014-01-13 14:38:02 -0500] jardin: shlant: ok i misunderstood your question, sorry :)
[2014-01-13 14:39:24 -0500] shlant: workmad3: no. What happens is I have a bunch of recipes. A few of them require code from a git repo. Each recipe needs a different git repo. Right now I have the git resource in each of the recipes that need a repo, but I want to try and consolidate the code
[2014-01-13 14:39:43 -0500] gchristensen: so ... is hosted chef still hosed?
[2014-01-13 14:40:20 -0500] workmad3: shlant: tbh, I wouldn't try to consolidate that
[2014-01-13 14:40:50 -0500] shlant: but it's duplicate code
[2014-01-13 14:40:55 -0500] workmad3: shlant: no it's not
[2014-01-13 14:41:16 -0500] workmad3: shlant: that's like claiming that every time you use a resource of the same type, it's duplicated and should be pared down
[2014-01-13 14:41:24 -0500] workmad3: shlant: or any time you call the same method, it's duplicated code
[2014-01-13 14:41:51 -0500] shlant: but everything about the git resource is the same except the repo
[2014-01-13 14:42:01 -0500] shlant: so it's like 10 lines of code when theres only 1 difference
[2014-01-13 14:42:42 -0500] shlant: so I'm better to just have the git resource in every recipe?
[2014-01-13 14:42:55 -0500] workmad3: shlant: ok... are all these recipes in the same cookbook?
[2014-01-13 14:43:04 -0500] shlant: currently yes
[2014-01-13 14:43:30 -0500] workmad3: shlant: it's the 'currently' that makes me wary of consolidating tbh ;) that implies that you already know or strongly suspect that these recipes will evolve at different rates
[2014-01-13 14:43:50 -0500] workmad3: shlant: which makes the current duplication coincidental rather than something to remove
[2014-01-13 14:44:18 -0500] shlant: yea., that's what I was thinking Eventually I will most likely move the recipes to different cookbooks
[2014-01-13 14:44:29 -0500] shlant: we basically have a monolithic company cookbook atm
[2014-01-13 14:44:34 -0500] workmad3: shlant: if you really want to, I'd probably suggest wrapping a quick custom resource around the git resource that takes just the repo and sets all the other values
[2014-01-13 14:45:20 -0500] shlant: workmad3: makes sense. Thank you
[2014-01-13 14:51:46 -0500] geggam: anyone running chef on slackware ?
[2014-01-13 15:06:50 -0500] zxd: how does chef know a resources are up to date does it store every file created? action create (up to date) ?
[2014-01-13 15:06:55 -0500] zxd: on chef-client run
[2014-01-13 15:07:18 -0500] lazypower: I believe it uses the hash of the file. an md5sum
[2014-01-13 15:08:53 -0500] zxd: hash of a file? how does it keep track of packages installed aswell?
[2014-01-13 15:09:15 -0500] zxd: maybe it's defiened in the recipe of when to return up to date?
[2014-01-13 15:10:02 -0500] nowthatsamatt: is the web console down?
[2014-01-13 15:10:06 -0500] nowthatsamatt: or am i doing something wrong
[2014-01-13 15:10:40 -0500] shlant: nowthatsamatt: page not loading for me
[2014-01-13 15:10:58 -0500] nowthatsamatt: hrm.  any idea how long this normally lasts, shlant
[2014-01-13 15:10:59 -0500] nowthatsamatt: ?
[2014-01-13 15:11:15 -0500] rgsteele: I've been trying to figure out if it's possible to test attribute precedence levels with Chefspec, but not quite finding what I'm looking for.  Specifically, I want to be able to assert an attribute's precedence, i.e.: was it set in a recipe using 'override', or in  a cookbook attributes file using 'normal'?
[2014-01-13 15:11:35 -0500] rgsteele: Is there any construct for doing this with Chefspec?
[2014-01-13 15:12:38 -0500] shlant: nowthatsamatt: usually not long. Here's the status page: http://status.opscode.com/
[2014-01-13 15:13:44 -0500] shlant: loading for me now
[2014-01-13 15:14:02 -0500] shlant: search may still be down
[2014-01-13 15:14:18 -0500] nowthatsamatt: ah nice, thanks
[2014-01-13 15:22:47 -0500] rgsteele: Hm... looks like you can do something to this effect using syntax like:  expect(runner.node.automatic_attrs.attrname).to eq 'attrvalue'.  Doesn't appear to be a complete implementation, though, because there's no runner.node.override_attrs.
[2014-01-13 15:25:49 -0500] nowthatsamatt: shlant: i'm not sure if this is me or chef?  https://gist.github.com/a5baca2ee04280ab0bcd
[2014-01-13 15:25:52 -0500] nowthatsamatt: any idea?
[2014-01-13 15:27:09 -0500] CPS: check your client.rb nowthatsamatt
[2014-01-13 15:27:21 -0500] CPS: make sure the validation thing you're using is correct
[2014-01-13 15:28:01 -0500] nowthatsamatt: CPS: hrm, i don't have a client.rb.
[2014-01-13 15:28:15 -0500] CPS: that's the output of a chef-client run, right?
[2014-01-13 15:29:12 -0500] nowthatsamatt: yeah
[2014-01-13 15:29:14 -0500] nowthatsamatt: well
[2014-01-13 15:29:17 -0500] nowthatsamatt: knife ec2 server create
[2014-01-13 15:29:44 -0500] shlant: nowthatsamatt: has your knife.rb worked before? are all setting in it correct?
[2014-01-13 15:30:15 -0500] nowthatsamatt: it's possible they're not, i'm not sure how to verify
[2014-01-13 15:32:31 -0500] shlant: http://docs.opscode.com/config_rb_knife.html
[2014-01-13 15:34:48 -0500] savant: okay im here
[2014-01-13 15:34:56 -0500] savant: where is the chef merge window stuff
[2014-01-13 15:35:03 -0500] savant: sir coderanger
[2014-01-13 15:57:19 -0500] shlant: workmad3: For my git code question, if I were to want to write something considering I have one monolithic cookbook, would a definition be what I want?
[2014-01-13 15:57:56 -0500] shlant: cause I don't know how long it would be until I wan to to separate out recipes into cookbooks and I haven't written a definition so it would be good practive
[2014-01-13 15:58:25 -0500] shlant: or would a wrapper resource be better
[2014-01-13 16:04:01 -0500] CPS: for adding depends in the metadata.rb file, do you do multiple depends lines or separate the dependenices with commas or something?
[2014-01-13 16:07:39 -0500] aliljet: hey -- I'm just starting the hunt for integrations of chef-server with central message brokers.  does anyone know if this is somethign that's natively supported in chef or if it's something that would have to be written outside of chef to trigger chef to act?
[2014-01-13 16:07:57 -0500] shlant: CPS: they can be on new lines, no comma
[2014-01-13 16:08:12 -0500] CPS: thanks
[2014-01-13 16:40:42 -0500] drgeb: Hi
[2014-01-13 16:46:22 -0500] aaronfeng: i'm trying to create an omnibus installer for my own project, after i cleaned the project, I'm getting "/var/cache/omnibus/cache/cacert.pem doesn't match expected"
[2014-01-13 16:47:24 -0500] aaronfeng: i'm also using omnibus 1.2.0 because the newer version conflicts with some of my gems, i was able to build the project as of last week
[2014-01-13 17:06:22 -0500] mattray: aliljet: like how? There are chef-client integrations with etcd, zookeeper and the like
[2014-01-13 17:06:39 -0500] mattray: aliljet: or do you mean something else?
[2014-01-13 17:11:21 -0500] plf: Anyone know how to extend Ohais :cloud Mash? Im trying to get some values filled in for Joyent which is not supported out of the box by Ohais cloud.rb plugin. Ive created a couple of my own Ohai plugins which can extend other Mashes, but not :cloud. The problem looks to be related to the base cloud.rb plugin not creating an empty :cloud Mash by default (it only does so if it detects a cloud service it knows about).
[2014-01-13 17:12:21 -0500] aliljet: mattray: fwiw, I think I'm starting to drown in different kinds of software.  So, I'd like somethign that server as a software-indepdenent workflow engine.  The use case would be trying to trigger a series of back and forth step swith chef tearing down servers and rebuilding them as developers complete software updates and the CI software is ready to redeploy
[2014-01-13 17:12:46 -0500] aliljet: mattray: zookeeper doesn't seem like a bad idea, but I started to zero in on rundeck and mcollective
[2014-01-13 17:14:25 -0500] mattray: aliljet: gotcha. There is a very nascent project called Chef Metal, but probably too immature at this point
[2014-01-13 17:15:29 -0500] savant: merge window
[2014-01-13 17:15:36 -0500] savant: does anyone have any info about it?
[2014-01-13 17:16:11 -0500] tos9: Hey, is there a workaround for being able to bootstrap 10.X clients with chef 11 on the workstation?
[2014-01-13 17:16:11 -0500] aliljet: mattray: zookeeper might just be the strongest solution, frankly -- it's a nice, comfy way to orchestrate thigns
[2014-01-13 17:16:42 -0500] mattray: aliljet: fwiw there are a lot of Chef people in the channel using etcd
[2014-01-13 17:17:07 -0500] mattray: aliljet: alot being relative
[2014-01-13 17:17:22 -0500] aliljet: mattray: ah, that's very good knowledge to have.  the hive mind actually does tend to make good decisions :)
[2014-01-13 17:17:42 -0500] mattray: but spheromak, coderanger and ranjib_ do I believe
[2014-01-13 17:22:30 -0500] aliljet: mattray: etcd is actually wicked awesome.  and it's super simple.  might be the solution
[2014-01-13 17:24:50 -0500] tos9: Looks like the issue tracker claims it's fixed in recent 11.8's... let's see.
[2014-01-13 17:26:51 -0500] tos9: Apparently not.
[2014-01-13 17:26:52 -0500] tos9: Alright.
[2014-01-13 17:36:48 -0500] spheromak: mattray: do what ? etcd ?  yea  ++ etcd def use 0.2.0 :)
[2014-01-13 17:37:37 -0500] spheromak: i have a branch on my cook for installing that with the etcd-cook. should be pushing up to community for that soon. Have some compat issue on cent i have to fix.
[2014-01-13 18:02:00 -0500] BryanWB: how does one use an older version of chef w/ test-kitchen?
[2014-01-13 18:02:41 -0500] lmickh: anyone have a omnibus conf for apache already?
[2014-01-13 18:04:09 -0500] juliancdunn: BryanWB: did you try setting require_chef_omnibus: x.y.z ?
[2014-01-13 18:13:32 -0500] sfb_: Hey everyone.
[2014-01-13 18:13:53 -0500] sfb_: Is there an alternate cookbook site I can use with Berkshelf that includes all of bryanwb's cookbooks?
[2014-01-13 18:14:59 -0500] sfb_: Or should I just stick with defining them in my Berksfile?
[2014-01-13 18:24:01 -0500] BryanWB: sfb_, that sounds like madness
[2014-01-13 18:24:25 -0500] BryanWB: juliancdunn, i tried 10.12, let me try 10.12.0
[2014-01-13 18:33:28 -0500] sfb_: BryanWB: Which sounds like madness?
[2014-01-13 18:33:45 -0500] sfb_: BryanWB: Right now I have a b unch of 'tomcat', git: 'https://....
[2014-01-13 18:33:54 -0500] sfb_: And I don't like it. \=
[2014-01-13 18:34:07 -0500] sfb_: btw thanks for your cookbooks. (=
[2014-01-13 18:34:20 -0500] juliancdunn: BryanWB: not all versions of Chef have omnibus installers, remember
[2014-01-13 18:34:24 -0500] juliancdunn: that one might be too old
[2014-01-13 18:52:34 -0500] wdilly: If I add an include statement in a recipe ie "include_recipe "apache2::mod_ssl"" but that recipe  "apache2::mod_ssl" had already been run in this chef-run will it end up running twice or will it only cause it to run if it wasnt already part of the runlist before the recipe with the include statement?
[2014-01-13 18:53:26 -0500] juliancdunn: wdilly: only runs the first time, because Chef is convergent
[2014-01-13 18:53:52 -0500] wdilly: juliancdunn, okay, that sounds good
[2014-01-13 18:54:52 -0500] savant: coderanger: are you there?
[2014-01-13 18:54:59 -0500] savant: or ssd7
[2014-01-13 18:55:10 -0500] savant: I would like to participate in the chef cookbook merge window
[2014-01-13 18:55:19 -0500] savant: If it isn't today, thats fine.
[2014-01-13 18:57:57 -0500] DFieldFL: I have a general question on using chef for local and production deployments
[2014-01-13 18:58:14 -0500] DFieldFL: I am currently using vagrant with chef server to start a local development box in virtual box
[2014-01-13 18:58:27 -0500] DFieldFL: but every time I do that it creates a node on the chef server
[2014-01-13 18:58:55 -0500] DFieldFL: is there a process for using vagrant and chef server that doesn't create a node for local development boxes
[2014-01-13 18:59:06 -0500] chefuser111: good day all! i have the chef-client recipe, and all i want to do is make a role that sets up a default chef-client on servers, run as a daemon. the documentation is very complicated and more than i need. anyone have a fast, small explanation for chef-client daemonization on a server from a recipe?
[2014-01-13 18:59:08 -0500] chefuser111: or role
[2014-01-13 18:59:37 -0500] DFieldFL: I guess I don't see the point of storing the node on the chef server for a local development box
[2014-01-13 18:59:50 -0500] borntyping: DFieldFL: chef-solo, chef-butcher
[2014-01-13 19:00:10 -0500] DFieldFL: so for local development it is always suggested to use chef solo?
[2014-01-13 19:00:50 -0500] DFieldFL: borntyping: sorry my client went down
[2014-01-13 19:01:04 -0500] DFieldFL: so for local development it is always suggested to use chef solo?
[2014-01-13 19:02:13 -0500] CPS: if you have an execute resource that uses all of the default options can you just write "execute "command"" and leave off the empty do/end block?
[2014-01-13 19:02:19 -0500] DFieldFL: borntyping: did I miss something
[2014-01-13 19:02:53 -0500] kewubenduben: any comments? https://github.com/mikesmullin/borg
[2014-01-13 19:03:07 -0500] borntyping: DFieldFL: I can't really say what the suggested or most common way, but chef-solo lets you avoid the server, and vagrant-butcher (https://github.com/cassianoleal/vagrant-butcher) destroys nodes when the VM is destroyed
[2014-01-13 19:03:43 -0500] DFieldFL: borntyping: I like the vagrant butcher option
[2014-01-13 19:05:16 -0500] teukka: vagrant itself has the same functionality with `chef.delete_client=true` and `chef.delete_node=true`, but there were some issues with at least vagrant 1.3.x
[2014-01-13 19:06:07 -0500] DFieldFL: borntyping and teukka: thanks  the advices
[2014-01-13 19:06:50 -0500] DFieldFL: teukka: do people only really use chef server with vagrant when they are deploy production machines?
[2014-01-13 19:07:16 -0500] DFieldFL: seems like that is the most common practice right now
[2014-01-13 19:07:52 -0500] teukka: DFieldFL: I think most still use vagrant for only developing/testing. you can have separate chef server instance for that
[2014-01-13 19:08:18 -0500] teukka: the issue I referred: https://github.com/mitchellh/vagrant/issues/2476
[2014-01-13 19:08:32 -0500] DFieldFL: thanks for the link
[2014-01-13 19:10:42 -0500] notromda: are node names usually a short name or are they usually the full fqdn?
[2014-01-13 19:11:22 -0500] BryanWB: juliancdunn, adding the patch # did the trick, tks!
[2014-01-13 19:13:28 -0500] juliancdunn: savant: merge window?
[2014-01-13 19:13:37 -0500] teukka: notromda: I think it's by default fqdn, but that is really up to you
[2014-01-13 19:13:47 -0500] jaqque: any sysadmins from opscode here? two problems: 1) learnchef.com is using the wrong SSL cert (or the SSL cert is missing the learnchef.com Subject Alternative Name)   2) https://learnchef.com/feedback is a no workie. so i can't use the feedback to tell you guys.
[2014-01-13 19:14:10 -0500] notromda: can nodes be renamed once active?
[2014-01-13 19:14:29 -0500] juliancdunn: jaqque: I am not a sysadmin but I work for Chef - I will pass it along
[2014-01-13 19:14:38 -0500] jaqque: juliancdunn: thanks!
[2014-01-13 19:14:45 -0500] teukka: what is "opscode"? :P
[2014-01-13 19:14:56 -0500] juliancdunn: teukka: it's the new product that Chef is gonna announce
[2014-01-13 19:14:57 -0500] juliancdunn: ;-)
[2014-01-13 19:15:01 -0500] savant: juliancdunn: yes, somewhere where I can have them merge a pr
[2014-01-13 19:15:27 -0500] teukka: juliancdunn: a branding product?
[2014-01-13 19:15:28 -0500] notromda: not to be confused with oopscode
[2014-01-13 19:15:29 -0500] savant: https://github.com/opscode-cookbooks/mysql/pull/147
[2014-01-13 19:15:33 -0500] juliancdunn: savant: for Chef or Cookbooks?
[2014-01-13 19:15:39 -0500] juliancdunn: oh... cookbook review is at 4 p.m. Eastern
[2014-01-13 19:15:49 -0500] juliancdunn: usually btm or someone posts a link to the Hangout in here just as it starts
[2014-01-13 19:16:13 -0500] jidar: btm usually posts the link
[2014-01-13 19:16:16 -0500] jaqque: juliancdunn: oh; someone changed the company name.   i missed that memo :(
[2014-01-13 19:16:19 -0500] savant: okay
[2014-01-13 19:16:34 -0500] notromda: I just reprovisioned a server back to ubuntu 12.04 to avoid that mysql cookbook bug
[2014-01-13 19:16:34 -0500] borntyping: Now Opscode is called Chef, how're we going to google for it? :P
[2014-01-13 19:16:58 -0500] savant: notromda: fixes have been available forever
[2014-01-13 19:17:06 -0500] savant: im gonna get it merged today
[2014-01-13 19:17:12 -0500] jidar: borntyping: opscode chef :P
[2014-01-13 19:17:47 -0500] borntyping: jidar: That's the old name now
[2014-01-13 19:18:01 -0500] notromda: savant: but to the chef newbie, it's not clear how to incorporate that fix
[2014-01-13 19:18:07 -0500] teukka: borntyping: yeah, or "check out these vagrant boxes that Chef provides"
[2014-01-13 19:18:14 -0500] savant: notromda: yeah sucks
[2014-01-13 19:18:51 -0500] DFieldFL: chif?
[2014-01-13 19:18:57 -0500] teukka: I get the name change, but it has side effects
[2014-01-13 19:19:31 -0500] notromda: I mean, I could essentially fork it by downlaoding it, and patching it it, and then use that in my own recipes, but that's a PAIN
[2014-01-13 19:19:44 -0500] teukka: I'm not affiliated with Chef (the company), but still funny to get some cooking spam and twitter followers
[2014-01-13 19:20:06 -0500] savant: notromda: yeah
[2014-01-13 19:20:12 -0500] billyoung: anyone ever experience an issue with overriding attributes in a wrapper cookbook? i'm attempting to override the community postgresql cookbooks package version, but the attributes in that cookbook that use string interpolation do not receive the override version
[2014-01-13 19:21:30 -0500] notromda: I mean, I JUST figured out the berkshelf way and rebuilt my git repo to be just my own cookbook.    Trimmed out so much fluff.   I guess to work around the mysql bug I'd have to start a whole new cookbook repo for it.
[2014-01-13 19:22:24 -0500] scalp42: notromda whats the bug?
[2014-01-13 19:23:05 -0500] notromda: scalp2: the pull request posted above:  https://github.com/opscode-cookbooks/mysql/pull/147
[2014-01-13 19:23:31 -0500] scalp42: billyoung please make sure you use override for file location in your wrapper cookbook, if you override the version number
[2014-01-13 19:23:51 -0500] scalp42: curious if you can rewind it notromda
[2014-01-13 19:24:06 -0500] borntyping: notromda: with berkshelf/librarian, shouldn't it be asy easy as fork -> patch -> point config at your github fork -> upload?
[2014-01-13 19:24:08 -0500] scalp42: and just create a wrapper until its fixed
[2014-01-13 19:24:20 -0500] savant: borntyping: you forget the part where im not using chef server!
[2014-01-13 19:24:21 -0500] scalp42: or what borntyping said
[2014-01-13 19:24:25 -0500] savant: :)
[2014-01-13 19:24:55 -0500] billyoung: scalp42 its actually line 166-167 here https://github.com/hw-cookbooks/postgresql/blob/master/attributes/default.rb#L166 that fails - since it doesn't take the version override, and its split into two lines - i end up with both attributes being added, which breaks the service
[2014-01-13 19:24:57 -0500] scalp42: billyoung https://github.com/phlipper/chef-postgresql/issues/9
[2014-01-13 19:25:07 -0500] borntyping: savant: then it's even easier!
[2014-01-13 19:25:16 -0500] notromda: Yeah, but I don't have time for that right now.   Turns out I was testing on ubuntu 12.04 anyway, and then someone handed me an ubuntu 13.10 server.   Probably better that we stay on the same version anyway
[2014-01-13 19:25:50 -0500] benner: I'm trying to use kitchen and it fails coverage test in include_recipe. My cookbook metadata has depends this cookbook. What is correct way to tell test kitchen about dependencies?
[2014-01-13 19:26:28 -0500] notromda: It's been frustrating to learn chef though, because I keep running into recipe errors
[2014-01-13 19:26:56 -0500] teukka: scalp42: oh, you're in irc. hi! =)
[2014-01-13 19:27:14 -0500] juliancdunn: benner: use Berkshelf as a dependency resolver
[2014-01-13 19:27:33 -0500] scalp42: terve teukka
[2014-01-13 19:28:16 -0500] teukka: bonjour
[2014-01-13 19:28:33 -0500] scalp42: ;)
[2014-01-13 19:40:59 -0500] aliljet: etcd is completely awesome, great idea
[2014-01-13 19:41:37 -0500] aliljet: but are people clustering etcd on top of chef?  I was thinking I'd just use etcd on the chef server and then distribute commands through the chef server?
[2014-01-13 19:45:06 -0500] ranjib_: aliljet, chef-server == chef cookbook/artiifact repo + dep solving + searchable data for eventually consistent scenarios, also source of infra related info that other tools use
[2014-01-13 19:45:40 -0500] aliljet: ranjib_: so not a place for distributed orchestartion of a larger environment?
[2014-01-13 19:45:47 -0500] ranjib_: etcd == data that needs to be highly available, dynamic, and when changes requires reconfiguring other services (like failover, LBs etc)
[2014-01-13 19:46:21 -0500] aliljet: ranjib_: you'd be surprised how helpful taht actually is
[2014-01-13 19:46:33 -0500] ranjib_: you can of course use etcd it self to setup HA for chef server, (assuming you have a replicated chef server)
[2014-01-13 19:47:09 -0500] xofer: hi, i'm having a problem with search on a self-hosted chef 10 server
[2014-01-13 19:47:14 -0500] aliljet: ranjib_: is it weird that I'm trying to have etcd turn into a simple place where I listen for other services that need chef to perform an action?
[2014-01-13 19:47:17 -0500] xofer: it's simply not finding a node that should match
[2014-01-13 19:47:22 -0500] xofer: finds 2/3
[2014-01-13 19:47:32 -0500] nowthatsamatt: for the aws cookbook, can i just create a directory called data_bags?
[2014-01-13 19:47:37 -0500] nowthatsamatt: i don't have that directory
[2014-01-13 19:47:48 -0500] xofer: i have reindexed and restarted chef-server/chef-solr and tried manually editing the node attributes
[2014-01-13 19:47:51 -0500] xofer: no luck
[2014-01-13 19:49:55 -0500] xofer: anyone know why search would miss a matching node?
[2014-01-13 19:51:31 -0500] nowthatsamatt: how can i get knife to know about my data bag?  https://gist.github.com/nowthatsamatt/71b4bc367de2db873aab
[2014-01-13 19:51:49 -0500] juliancdunn: xofer: what kind of node is it? is it Windows?
[2014-01-13 19:51:56 -0500] xofer: linux
[2014-01-13 19:54:48 -0500] xofer: nowthatsamatt: try: knife data bag from file aws keys.json
[2014-01-13 19:55:54 -0500] nowthatsamatt: xofer: woot
[2014-01-13 19:55:54 -0500] nowthatsamatt: thanks
[2014-01-13 19:56:00 -0500] xofer: np
[2014-01-13 19:58:04 -0500] mstyne_: afternoon all
[2014-01-13 19:58:18 -0500] mstyne_: docs here: http://docs.opscode.com/api_chef_server.html#id11 indicate you can delete a key-value pair
[2014-01-13 19:58:29 -0500] mstyne_: but, the call takes no parameters and no request body
[2014-01-13 19:58:36 -0500] mstyne_: seems like it just deletes the whole item
[2014-01-13 19:58:52 -0500] mstyne_: anyone encountered this before?
[2014-01-13 20:01:59 -0500] chefuser111: good day all! i have the chef-client recipe, and all i want to do is make a role that sets up a default chef-client on servers, run as a daemon. the documentation is very complicated and more than i need. anyone have a fast, small explanation for chef-client daemonization on a server from a recipe?
[2014-01-13 20:02:03 -0500] btm: @getchefdotcom Chef/Ohai code review: join: bit.ly/1djURdt watch: bit.ly/1djUT4S
[2014-01-13 20:03:38 -0500] juliancdunn: mstyne_: I think it means to say "data bag"
[2014-01-13 20:03:51 -0500] juliancdunn: probably worth a ticket at github.com/opscode/chef-docs
[2014-01-13 20:04:22 -0500] juliancdunn: chefuser111: all you need to do is to run the chef-client cookbook's default recipe and it will daemonize
[2014-01-13 20:05:04 -0500] borntyping: btm: when does the broadcast begin?
[2014-01-13 20:05:34 -0500] btm: borntyping: when kallistec get's back from the bathroom.
[2014-01-13 20:05:40 -0500] chefuser111: juliancdunn: so if i make a role called 'install chef-client' and attach the 'chef-client' recipe to it,.. thats all i need?
[2014-01-13 20:05:51 -0500] juliancdunn: chefuser111: yes
[2014-01-13 20:05:55 -0500] chefuser111: nice. thank you.
[2014-01-13 20:05:57 -0500] chefuser111: oh.
[2014-01-13 20:06:09 -0500] chefuser111: what about default run-time? every 10 minutes for example?
[2014-01-13 20:06:19 -0500] xofer: chefuser111: i would call the role just chef-client however
[2014-01-13 20:06:30 -0500] juliancdunn: there are defaults set up within the cookbook's attributes... I think it's every 15 minutes
[2014-01-13 20:06:49 -0500] chefuser111: i like to use role names such as 'INSTALL CHEF-CLIENT" so there is no doubt as to what is attached to the node.
[2014-01-13 20:06:54 -0500] juliancdunn: you can override that in the role by setting an attribute of the same name
[2014-01-13 20:07:05 -0500] xofer: I have default["chef_client"]["interval"] = "1800"
[2014-01-13 20:07:17 -0500] chefuser111: thank you both. this is most helpful.
[2014-01-13 20:07:18 -0500] xofer: chefuser111: you can override that in the role
[2014-01-13 20:08:37 -0500] xofer: chefuser111: maybe you should use "ATTEMPT TO INSTALL CHEF-CLIENT AS A SERVICE" ;)
[2014-01-13 20:09:16 -0500] chefuser111: xofer: :) very true.
[2014-01-13 20:09:36 -0500] juliancdunn: knife role create FRICKING_COMPUTERS
[2014-01-13 20:09:44 -0500] borntyping: Argh, why can I never get google+ broadcasts to work
[2014-01-13 20:09:48 -0500] chefuser111: xofer: if i wanted to check that it was daemonized,.. would a 'ps -ax|grep chef' prove that it worked?
[2014-01-13 20:10:07 -0500] mveitas: I am trying to add chef-sugar into my cookbooks, but after I do I am getting an error running with ChefSpec:   cannot load such file -- chef/sugar
[2014-01-13 20:10:13 -0500] chefuser111: xofer: and would a chkconfig --list show that chef-client was activated?
[2014-01-13 20:10:14 -0500] xofer: chefuser111: yes you could
[2014-01-13 20:10:26 -0500] xofer: that i don't know
[2014-01-13 20:10:44 -0500] chefuser111: xofer: when it is daemonized, does that mean it will still be there on reboot?
[2014-01-13 20:10:50 -0500] xofer: yes
[2014-01-13 20:10:56 -0500] chefuser111: excellent.
[2014-01-13 20:11:04 -0500] chefuser111: testing right now.
[2014-01-13 20:13:08 -0500] chefuser111: xofer: while im having such good luck with help here today,. may i ask what the preferred method to disable selinux is?
[2014-01-13 20:13:23 -0500] xofer: install ubuntu
[2014-01-13 20:13:32 -0500] xofer: just kidding, i'm not sure
[2014-01-13 20:13:37 -0500] mstyne_: juliancdunn: thanks
[2014-01-13 20:14:04 -0500] mstyne_: sounds like i'm going to have to grab the item, make my changes, and reupload
[2014-01-13 20:14:36 -0500] mstyne_: it's not the first time API documentation has provided me with false hope
[2014-01-13 20:14:46 -0500] chefuser111: no prob.
[2014-01-13 20:14:48 -0500] chefuser111: while im having such good luck with help here today,. may i ask what the preferred method to disable selinux is?
[2014-01-13 20:16:28 -0500] chefuser111: im seeing that there is a 'disabled' action in the selinux cookbook. but how would i call that correctly from a role in the gui?
[2014-01-13 20:16:44 -0500] billyoung: chefuser111 https://github.com/opscode-cookbooks/selinux set to "disabled"
[2014-01-13 20:17:44 -0500] chefuser111: billyoung: thank you! from the gui then, i would create a role, and put .. node['selinux']['state'] into the json area?
[2014-01-13 20:18:10 -0500] billyoung: not sure about the GUI i haven't used it much chefuser111
[2014-01-13 20:18:26 -0500] chefuser111: darnit. that seems to be the norm.
[2014-01-13 20:18:35 -0500] chefuser111: i have to have it for the managers and such.
[2014-01-13 20:19:50 -0500] billyoung: chefuser111 i'm fairly certain you would do it in the json section, like you mentioned
[2014-01-13 20:20:15 -0500] chefuser111: billyoung: i see that i can... its just a matter of formatting it correctly. any ideas?
[2014-01-13 20:20:55 -0500] billyoung: chefuser111 node['selinux']['state'] = :disabled
[2014-01-13 20:21:00 -0500] billyoung: you'll have to test that though
[2014-01-13 20:21:53 -0500] chefuser111: {"defaults": {"node": {"selinux": {"state":"disabled"} } } }
[2014-01-13 20:21:56 -0500] chefuser111: perhaps?
[2014-01-13 20:24:22 -0500] chefuser111: actually - i just made a role that had the selinux:disabled recipe in it.
[2014-01-13 20:24:25 -0500] chefuser111: that worked.
[2014-01-13 20:25:42 -0500] nowthatsamatt: is there a "best" way to format an ebs volume?  i tried just: `mkfs.ext4 /dev/xvdf`
[2014-01-13 20:25:49 -0500] nowthatsamatt: and it didn't format
[2014-01-13 20:26:23 -0500] billyoung: nowthatsamatt http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-using-volumes.html
[2014-01-13 20:26:48 -0500] nowthatsamatt: billyoung: yeah, i'm totes able to do it manually.
[2014-01-13 20:26:57 -0500] nowthatsamatt: just the chef run isn't formatting it
[2014-01-13 20:27:03 -0500] billyoung: ah i see
[2014-01-13 20:27:07 -0500] chefuser111: hello all: is there an 'ensure' command in chef? like ensure that X is in file Y?
[2014-01-13 20:27:12 -0500] nowthatsamatt: `mkfs.ext4 /dev/xvdf` definitely works manually
[2014-01-13 20:27:39 -0500] billyoung: nowthatsamatt have you tried the aws cookbook?
[2014-01-13 20:27:53 -0500] billyoung: i think it has an ebs vol resource
[2014-01-13 20:27:59 -0500] fleish: hi all, I have an ubuntu node that when I run chef-client on it ohai seems to be incorrectly detecting "platform_family?": "windows", ... any idea how/why it would do this and how to fix it?
[2014-01-13 20:28:11 -0500] nowthatsamatt: i'll look but i have no idea how it could format a volume
[2014-01-13 20:28:20 -0500] nowthatsamatt: i'm using the aws cookbook to create and attach the volume though
[2014-01-13 20:32:22 -0500] mmazing2: im working with the apache2 cookbook from opscode, im trying to change the default ports for ports.conf, i've updated attributes/default.rb and metadata.json, and i cannot seem to get it to change the ports.conf file
[2014-01-13 20:32:46 -0500] mmazing2: if i edit the ports.conf.erb it gets the changes but i'm trying to stay within using attributes and whatnot
[2014-01-13 20:32:48 -0500] flaccid: mmazing2: don't change the cookbook
[2014-01-13 20:33:06 -0500] billyoung: nowthatsamatt yea after a quick check it doesn't appear to handle formatting
[2014-01-13 20:33:15 -0500] clocKwize: hey guys, I got a big problem
[2014-01-13 20:33:25 -0500] nowthatsamatt: billyoung: this looks promising: https://gist.github.com/a964228d2e5aaa28d7ca
[2014-01-13 20:33:28 -0500] clocKwize: I just spun up some nodes, and after a while they died
[2014-01-13 20:33:29 -0500] nowthatsamatt: can i just run that?
[2014-01-13 20:33:30 -0500] flaccid: mmazing2: set node['apache']['listen_ports'] on your node
[2014-01-13 20:33:40 -0500] clocKwize: I go on the box, all 32gb of ram is in use
[2014-01-13 20:33:41 -0500] mattupstate: finally understand ohai a little more, almost feel like its an underrated feature of chef
[2014-01-13 20:33:50 -0500] clocKwize: I have about 10000 chef-clients running
[2014-01-13 20:33:53 -0500] mmazing2: i'm using this in opsworks in amazon, i'm not sure i have "nodes"
[2014-01-13 20:34:03 -0500] flaccid: mmazing2: this is covered in https://github.com/opscode-cookbooks/apache2#general-settings
[2014-01-13 20:34:25 -0500] billyoung: nowthatsamatt looks ok
[2014-01-13 20:34:32 -0500] flaccid: mmazing2: opsworks is just chef-solo, you may like to learn about setting node attributes
[2014-01-13 20:35:18 -0500] clocKwize: anyone have any idea why :/
[2014-01-13 20:36:06 -0500] flaccid: mmazing2: looks like its covered here http://docs.aws.amazon.com/opsworks/latest/userguide/workingcookbook-attributes.html
[2014-01-13 20:36:14 -0500] tscanausa1: The nodes died or chef died?
[2014-01-13 20:36:28 -0500] flaccid: mmazing2: although this isn't the place for opsworks help, try ##aws
[2014-01-13 20:36:49 -0500] mmazing2: ##aws is a barren desert of hopelessness
[2014-01-13 20:36:53 -0500] clocKwize: tscanausa1: the nodes, died.. running out of money
[2014-01-13 20:36:54 -0500] clocKwize: memory*
[2014-01-13 20:37:04 -0500] clocKwize: literally 10000 chef-clients running
[2014-01-13 20:37:06 -0500] flaccid: mmazing2: ok well solution you have, to work i go
[2014-01-13 20:37:16 -0500] mmazing2: flaccid: thanks for the links, ill look at it
[2014-01-13 20:37:17 -0500] tscanausa1: clocKwize: do you have node searched?
[2014-01-13 20:37:29 -0500] clocKwize: what do you mean tscanausa1 ?
[2014-01-13 20:37:56 -0500] tscanausa1: do any of your cookbooks search for nodes with certain roles or recipes or attributes?
[2014-01-13 20:38:24 -0500] clocKwize: no, I just have a role which has a run list that installs stuff
[2014-01-13 20:38:54 -0500] tscanausa1: are you sure chef caused the crash?
[2014-01-13 20:39:19 -0500] clocKwize: well, there are 10000 instances of chef client running, each taking 120mb ram
[2014-01-13 20:39:42 -0500] clocKwize: (maybe not 10,000 but enough to exhaust the memory on the machine)
[2014-01-13 20:39:59 -0500] clocKwize: its not dead, its just killed my services that are running on it, they won't start because not enough ram
[2014-01-13 20:40:11 -0500] tscanausa1: I see, so chef was running alot on instances of its self. rather then you have alot of nodes running chef.
[2014-01-13 20:40:16 -0500] clocKwize: yeah
[2014-01-13 20:40:30 -0500] clocKwize: 2 nodes, both have hundreds of chef-client running, all ram exhausted on both instances
[2014-01-13 20:40:41 -0500] dsa: hey folks
[2014-01-13 20:40:48 -0500] tscanausa1: That does not seems, right, how did you install chef?
[2014-01-13 20:41:00 -0500] dsa: just want to know if anyone has manged chef and has the last ours problem with tagging nodes
[2014-01-13 20:41:03 -0500] clocKwize: chef-client cookbook
[2014-01-13 20:41:19 -0500] clocKwize: https://gist.github.com/brightbits/0ae85e3e95beeb3b6607
[2014-01-13 20:41:26 -0500] clocKwize: that installs chef-client
[2014-01-13 20:42:54 -0500] vigith: knife list /clients is throwing .. superclass mismatch for class Upload (TypeError)
[2014-01-13 20:43:58 -0500] tscanausa1: clocKwize: interesting.I can think of 2 things, either you have a lot of forks going ( which happens since I dont think chef cleans them up properly) or you have a bad cookbook somewhere.
[2014-01-13 20:44:40 -0500] fleish: clocKwize: I've seen something like that before ... where chef-client would get wedged during logrotates or something and the old one would stay around eating up memory but not doing anything and had to be force killed manually with -9
[2014-01-13 20:44:42 -0500] clocKwize: I added a cookbook recently which partitions a drive, formats it and mounts it
[2014-01-13 20:44:50 -0500] fleish: hi all, I have an ubuntu node that when I run chef-client on it ohai seems to be incorrectly detecting "platform_family?": "windows", ... any idea how/why it would do this and how to fix it?
[2014-01-13 20:45:39 -0500] dsa: fleish: dependet cookbook i would guess. you dont want to have the windows ohai_stuff ?
[2014-01-13 20:45:39 -0500] clocKwize: tscanausa1 / fleish https://gist.github.com/brightbits/0ae85e3e95beeb3b6607#file-disk-rb
[2014-01-13 20:46:01 -0500] clocKwize: let me take a cut of a log and see if anything crazy ni there... its hard to see though as its lots of processes all writing to the same one :
[2014-01-13 20:46:02 -0500] clocKwize: :/
[2014-01-13 20:46:47 -0500] dsa: clocKwize: try a chef-shell -z on the node and a run_chef. Sometimes it sheds more light on the problem
[2014-01-13 20:46:56 -0500] fleish: dsa: I don't plan on running windows VMs ... but I'm not sure why it would be detecting an ubuntu node as windows instead of ubuntu/debian
[2014-01-13 20:47:00 -0500] clocKwize: I'll give that a go..thanks
[2014-01-13 20:47:35 -0500] clocKwize: oh, wait, I can't do that now.. I deleted /etc/chef, just to stop it...
[2014-01-13 20:48:08 -0500] nowthatsamatt: hrm, anyone ever format an ebs volume?
[2014-01-13 20:48:20 -0500] dsa: fleish: like i said. Some cookbooks from opscode or github have per default the windows cookbook included.
[2014-01-13 20:48:22 -0500] xofer: nowthatsamatt: yes
[2014-01-13 20:48:37 -0500] nowthatsamatt: execute 'mkfs' do
[2014-01-13 20:48:38 -0500] nowthatsamatt:   command "mkfs -t ext4 /dev/xvdf"
[2014-01-13 20:48:38 -0500] nowthatsamatt: end
[2014-01-13 20:48:42 -0500] nowthatsamatt: that doesn't seem to format it
[2014-01-13 20:48:43 -0500] dsa: fleish: that indeed is a fact - and sadly true. I have on all of my node currently windows attributes. which i dont like
[2014-01-13 20:48:50 -0500] fleish: dsa: I also get a bunch of weirdness ala http://pastebin.com/CqhpivC1
[2014-01-13 20:48:53 -0500] nowthatsamatt: neither does `/sbin/mkfs.ext4 /dev/xvdf`
[2014-01-13 20:49:06 -0500] dsa: dsa: either you strip the windows dependecy from your cookbooks and get rid of the stuff or... yeah you can clean them.
[2014-01-13 20:49:15 -0500] nowthatsamatt: now, xofer, when i manually log in and do it it works fine
[2014-01-13 20:49:25 -0500] clocKwize: this is a log... dsa / fleish / tscanausa1 https://gist.github.com/brightbits/0ae85e3e95beeb3b6607#file-log
[2014-01-13 20:49:45 -0500] fleish: dsa: yes I see that, and rather than gut it I figured it'd just install the cookbooks to get things moving along ... and have 1 node where it seems ohai correctly detects the platform_family as debian and everything is good. but this node for some reason is acting differently and coming up as windows which of course throws all the paths off
[2014-01-13 20:50:13 -0500] dsa: clocKwize: [2014-01-13T18:32:55+00:00] INFO: HTTP Request Returned 404 Object Not Found: Cannot load data bag item settings for data bag elasticsearch
[2014-01-13 20:50:16 -0500] dsa: [2014-01-13T18:32:56+00:00] INFO: HTTP Request Returned 404 Object Not Found: Cannot load data bag item data for data bag elasticsearch
[2014-01-13 20:50:19 -0500] dsa: i guess thats a problem
[2014-01-13 20:50:23 -0500] dsa: create the data bags
[2014-01-13 20:50:43 -0500] xofer: nowthatsamatt: are you sure the device is ready by the time that comand runs?
[2014-01-13 20:50:49 -0500] clocKwize: well, I'm storing the settings in override_attributes
[2014-01-13 20:51:07 -0500] clocKwize: surely a 404 shouldn't cause this?
[2014-01-13 20:51:09 -0500] nowthatsamatt: xofer: no.  i'm not sure.  it does happen pretty quick, too.
[2014-01-13 20:51:16 -0500] nowthatsamatt: what's a good way to get it to wait?
[2014-01-13 20:51:21 -0500] nowthatsamatt: sleep 300?  haha
[2014-01-13 20:51:35 -0500] dsa: clocKwize: sorry you're right its just a warning. nevermind.
[2014-01-13 20:51:50 -0500] clocKwize: :)
[2014-01-13 20:51:53 -0500] clocKwize: no problem
[2014-01-13 20:53:37 -0500] dsa: fleish: hum thats weird. the platform attritbute is windows on a ubuntu node ?
[2014-01-13 20:54:01 -0500] dsa: fleish: the os field shows linux ?
[2014-01-13 20:54:29 -0500] xofer: nowthatsamatt: this is what i have https://gist.github.com/xofer/8407957
[2014-01-13 20:54:51 -0500] dsa: clocKwize: http://docs.opscode.com/chef_shell.html
[2014-01-13 20:55:13 -0500] nowthatsamatt: xofer: huh.  thanks!
[2014-01-13 20:55:17 -0500] xofer: np
[2014-01-13 20:55:45 -0500] xofer: does anyone know how to see the progress of `knife index rebuild` ?
[2014-01-13 20:55:53 -0500] xofer: my indexes appear to be screwed
[2014-01-13 20:56:38 -0500] dsa: clocKwize: beside the logfile gist you just posted - there is no other error ? or at least what do you expect to be done or isnt working - i didnt see everything you posted
[2014-01-13 20:57:12 -0500] dsa: xofer: you have problems with the search ?
[2014-01-13 20:57:17 -0500] xofer: yes
[2014-01-13 20:57:20 -0500] clocKwize: dsa: so I created 2 nodes, and they both after some time have several hundred chef-clients running, each taking 120mb ram
[2014-01-13 20:57:22 -0500] dsa: xofer: managed chef ?
[2014-01-13 20:57:26 -0500] xofer: it started with a single node not being found
[2014-01-13 20:57:29 -0500] clocKwize: just keeps creating more chef-client processes
[2014-01-13 20:57:30 -0500] xofer: no self-hosted
[2014-01-13 20:57:38 -0500] drgeb: Hi I am new to Vagrant, Chef and Berkshelf.  Can anyone point me to a example of how to change the /etc/hosts file
[2014-01-13 20:57:41 -0500] clocKwize: now both boxes have run out of ram (32gb boxes...)
[2014-01-13 20:57:42 -0500] dsa: xofer: ah ok - because i have the problem in the hosted enviroment.
[2014-01-13 20:57:45 -0500] xofer: dsa: i've run rebuild a few time
[2014-01-13 20:57:52 -0500] xofer: times*
[2014-01-13 20:58:01 -0500] xofer: and now it's having all sorts of problems
[2014-01-13 20:58:04 -0500] dsa: clocKwize: o_O errrr... you run chef-client as daemon ?
[2014-01-13 20:58:09 -0500] xofer: can't even find nodes by name now
[2014-01-13 20:58:24 -0500] clocKwize: dsa: the config to run chef-client is here: https://gist.github.com/brightbits/0ae85e3e95beeb3b6607#file-base-rb
[2014-01-13 20:58:30 -0500] dsa: xofer: did you updated the chef server recently today ?
[2014-01-13 20:58:37 -0500] xofer: don't think so
[2014-01-13 20:58:47 -0500] xofer: it's managed by chef, so who knows ;)
[2014-01-13 20:58:53 -0500] dsa: clocKwize: yeah i looked inside of the configs looked sofar straight.
[2014-01-13 20:59:32 -0500] clocKwize: thats how chef-client is set up.. it worked all fine up until I added that recipe
[2014-01-13 20:59:33 -0500] dsa: xofer: maybe restarting the solr server and rebuild the index will help... but im not sure on this to be sane
[2014-01-13 20:59:36 -0500] clocKwize: (the one in the gist)
[2014-01-13 21:00:56 -0500] dsa: clocKwize: and a chef-client run runs normal ?
[2014-01-13 21:01:42 -0500] clocKwize: well, nothing starts now, no memory ;p
[2014-01-13 21:01:59 -0500] clocKwize: I get this now: FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-01-13 21:02:20 -0500] geggam: memory is overrated
[2014-01-13 21:02:36 -0500] scalp42: computers
[2014-01-13 21:03:00 -0500] dsa: clocKwize:
[2014-01-13 21:03:03 -0500] dsa: what ?
[2014-01-13 21:03:23 -0500] dsa: clocKwize: the chef daemon is dead right ?
[2014-01-13 21:03:32 -0500] dsa: clocKwize: sounds more like the server is oom to some reason
[2014-01-13 21:03:42 -0500] clocKwize: dsa: there is like 200 instances running
[2014-01-13 21:03:44 -0500] savant: Did the merge window start?
[2014-01-13 21:03:46 -0500] clocKwize: I've just killed them all
[2014-01-13 21:04:04 -0500] dsa: clocKwize: yeah so the memory should be fine now right ?
[2014-01-13 21:04:12 -0500] dsa: clocKwize: and now the chef-client doesnt work ?
[2014-01-13 21:04:23 -0500] jergason: hello friends
[2014-01-13 21:04:37 -0500] jergason: is there a way to find out what role is associated with a specific machine?
[2014-01-13 21:04:46 -0500] jergason: i can log in to the machine or provide its ip address
[2014-01-13 21:05:01 -0500] clocKwize: actually, that didn't kill them properly
[2014-01-13 21:05:17 -0500] clocKwize: -9'd
[2014-01-13 21:05:18 -0500] juliancdunn: jergason: knife node show?
[2014-01-13 21:05:39 -0500] dsa: clocKwize: pkill -9 chef-client
[2014-01-13 21:05:59 -0500] clocKwize: yeah..
[2014-01-13 21:06:05 -0500] dsa: btw can some OPs please put this up:
[2014-01-13 21:06:09 -0500] clocKwize: it still doesn't start, still gets the ChildConvergeError error
[2014-01-13 21:06:13 -0500] dsa: We are having issues with our indexing service currently causing a delay in attribute updates for searches.  We currently have a several steps planned to improve this performance including an
[2014-01-13 21:06:17 -0500] dsa: emergency maintenance window scheduled for this evening at 5PM PST.
[2014-01-13 21:06:19 -0500] dsa: I apologize for the inconvenience as we continue to work on this issue.
[2014-01-13 21:06:31 -0500] dsa: or atleast at the topic at short. Managed Chef server is broken :D
[2014-01-13 21:06:37 -0500] clocKwize: ah :/
[2014-01-13 21:06:38 -0500] savant: lol
[2014-01-13 21:06:44 -0500] savant: does that mean no merge window?
[2014-01-13 21:06:51 -0500] dsa: looks like it
[2014-01-13 21:07:13 -0500] savant: poop
[2014-01-13 21:07:14 -0500] fleish: dsa: that's correct, check it out: http://pastebin.com/jamm5SqS
[2014-01-13 21:07:23 -0500] savant: whatever, I guess my pr can wait another few weeks.
[2014-01-13 21:08:36 -0500] dsa: fleish: er. this looks forged man. the platform tag is right. and the family? looks like something inside of a cookbook went wront
[2014-01-13 21:08:56 -0500] dsa: "platform_family": "debian",
[2014-01-13 21:09:02 -0500] dsa:   "platform": "x86_64-linux"
[2014-01-13 21:09:17 -0500] dsa: there should be no "?" inside of the attribute
[2014-01-13 21:10:13 -0500] mattupstate: coderanger: now that the application cookbooks are under poise on github, is the contributing process still the same? such as filing issues with jira first?
[2014-01-13 21:10:44 -0500] fleish: dsa: yes, that could be. it's the wordpress cookbook that I suspect is going haywire
[2014-01-13 21:10:46 -0500] coderanger: mattupstate: Nope, just pull req
[2014-01-13 21:10:54 -0500] dsa: clocKwize: reboot the VM. because i think its in some sort of OOM state and didnt killed all the processes
[2014-01-13 21:11:01 -0500] mattupstate: coderanger: cool, thats kinda nice
[2014-01-13 21:11:38 -0500] mattupstate: coderanger: has there ever been talk about handling the case where there are config changes for the app but not code changes?
[2014-01-13 21:11:58 -0500] mattupstate: i know i can force deploy
[2014-01-13 21:12:00 -0500] coderanger: mattupstate: Yes, but it will take a complete rewrite of the cookbook :-(
[2014-01-13 21:12:16 -0500] mattupstate: i see..
[2014-01-13 21:12:23 -0500] fleish: dsa: I've also been getting this which may be related http://pastebin.com/15bp9qQm
[2014-01-13 21:12:51 -0500] coderanger: mattupstate: It is currently entirely based around the deploy resource callbacks, which only fire on code change
[2014-01-13 21:13:20 -0500] mattupstate: right, i've wandered through the internals...
[2014-01-13 21:13:50 -0500] dsa: fleish: make a grep through you cookbooks with "family?" - recursive and look through the code. thats my best shot :P
[2014-01-13 21:13:51 -0500] mattupstate: been wanting to look into it againbut if you think it requires a rewrite i suppose i'll avoid it
[2014-01-13 21:14:03 -0500] clocKwize: 500
[2014-01-13 21:14:03 -0500] clocKwize: Smell something burning?
[2014-01-13 21:14:08 -0500] clocKwize: managed chef is broken
[2014-01-13 21:14:14 -0500] clocKwize: can't run chef-client either
[2014-01-13 21:14:19 -0500] dsa: clocKwize: i told you :)
[2014-01-13 21:14:20 -0500] clocKwize: says can't authenticate..
[2014-01-13 21:14:31 -0500] clocKwize: dsa: thats not search.. thats just listing nodes on the admin page :/
[2014-01-13 21:14:38 -0500] mattupstate: you and a lot of other people ;)
[2014-01-13 21:14:44 -0500] dgarstang1: what does this mean? "ERROR: Could not find cookbook / in your cookbook path, skipping it"
[2014-01-13 21:14:46 -0500] clocKwize: ok :/
[2014-01-13 21:14:52 -0500] clocKwize: will come back tomorrow and continue.
[2014-01-13 21:14:53 -0500] clocKwize: thanks
[2014-01-13 21:15:42 -0500] fleish: dsa: yeah I tried that, but all I find in there are "if platform_family?" statements ... which led me to believe ohai was incorrectly detecting platform_family as windows since when I edit the node and look for platform_family? it is set to windows
[2014-01-13 21:16:31 -0500] mswart: is there any release schedule for chef server 11.2?
[2014-01-13 21:17:52 -0500] dsa: fleish: but youre on private self hosted chef server right ? :D
[2014-01-13 21:19:36 -0500] fleish: dsa: correctamundo :D
[2014-01-13 21:19:59 -0500] dsa: fleish: AHAHAHAHA ok stop your work and try tomorrow again :D i bet its realted to the other problems currently
[2014-01-13 21:20:03 -0500] dsa: :D
[2014-01-13 21:20:23 -0500] fleish: dsa: er wait, I'm on my own chef server ... NOT hosted chef
[2014-01-13 21:20:35 -0500] dsa: fleish: doh !
[2014-01-13 21:22:04 -0500] xofer: in case anyone is wondering, this appears to be my issue (some nodes not returned by search): https://tickets.opscode.com/browse/CHEF-2346?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel
[2014-01-13 21:22:28 -0500] dsa: fleish: https://tickets.opscode.com/browse/OHAI-437?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab
[2014-01-13 21:22:33 -0500] dsa: maybe related
[2014-01-13 21:24:31 -0500] dsa: fleish: and youre right - sounds like some platform_familiy? call screwed up -> http://docs.opscode.com/dsl_recipe_method_platform_family.html
[2014-01-13 21:24:33 -0500] borntyping: dsa: oh- that looks bad
[2014-01-13 21:25:15 -0500] mattupstate: coderanger: do you still happen to use the app cookbooks? and if so, what do you do to get around config changes...
[2014-01-13 21:25:19 -0500] dsa: borntyping: yepp
[2014-01-13 21:25:27 -0500] coderanger: mattupstate: I do not use them, sorry
[2014-01-13 21:25:42 -0500] mattupstate: coderanger: gotcha
[2014-01-13 21:25:47 -0500] coderanger: mattupstate: We're moving Balanced to deploy via omnibus'd binary packages
[2014-01-13 21:25:59 -0500] borntyping: dsa: is that a recent release?
[2014-01-13 21:26:04 -0500] mattupstate: i see
[2014-01-13 21:26:05 -0500] gchristensen: coderanger: that's how I deploy all my code. far better than the alternatives.
[2014-01-13 21:26:31 -0500] coderanger: gchristensen: Just putting together the last bits of tests -> omnibus -> test-kitchen (via Jenkins) today :)
[2014-01-13 21:26:59 -0500] mattupstate: omnibus seems to be all the rage lately
[2014-01-13 21:27:00 -0500] gchristensen: nice :)
[2014-01-13 21:27:22 -0500] gchristensen: omnibus is pain for the brain until you beat yourself up just enough to get it working.
[2014-01-13 21:27:33 -0500] coderanger: gchristensen: And all open source, so other people can steal our pipeline! :D
[2014-01-13 21:27:49 -0500] gchristensen: coderanger: can I also use your hardware? kthx!
[2014-01-13 21:28:00 -0500] coderanger: gchristensen: It is EC2, so sure ;-)
[2014-01-13 21:29:37 -0500] gchristensen: my employer has failed at basic business continuity...the amount of stuff that only I know (no matter how much its been documented) is insane.
[2014-01-13 21:30:21 -0500] fleish: dsa: I think you're onto something with that ohai link
[2014-01-13 21:30:45 -0500] fleish: dsa: on a node where this all works, there is an ohai 0.6.20 installed in /usr/local/bin (not sure by what) ... on the failing node only 0.6.16 installed in /usr/bin
[2014-01-13 21:31:23 -0500] dsa: borntyping: you need to check you ohai plugin. but i guess yes
[2014-01-13 21:31:41 -0500] fleish: dsa: in fact, there is a chef-client 11.8.2 installed in /usr/local/bin as well
[2014-01-13 21:31:58 -0500] dsa: fleish: glad that i could help a little.
[2014-01-13 21:36:58 -0500] BenOvermyer: hi all
[2014-01-13 21:37:17 -0500] BenOvermyer: Anyone around?
[2014-01-13 21:38:56 -0500] fleish: dsa: tried bringing those files over manually but they won't run on this node (yet) /usr/lib/ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find chef (>= 0) amongst [] (Gem::LoadError)
[2014-01-13 21:41:39 -0500] dsa: dsa: maybe its a good idear to purge the chef-clienst installation and reinstall it
[2014-01-13 21:41:45 -0500] dsa: BenOvermyer: little bit
[2014-01-13 21:50:46 -0500] fleish: dsa: gem install chef got chef-client v 11.8.2 running and it seems to not have the platform_family? issue
[2014-01-13 21:51:36 -0500] dsa: fleish: \o/ yay
[2014-01-13 21:51:56 -0500] dsa: and it looks like in the moment hosted chef is stable again...
[2014-01-13 21:59:24 -0500] fleish: dsa: thanks for the help
[2014-01-13 21:59:28 -0500] jtimberman: http://status.opscode.com/post/73237939041/issues-with-hosted-chef-search-update
[2014-01-13 22:02:27 -0500] dsa: fleish: anytime if i can :)
[2014-01-13 22:02:53 -0500] mattupstate: coderanger: is vandelay.io an internal domain in your vpc?
[2014-01-13 22:03:13 -0500] coderanger: mattupstate: No, its just for internal-facing services
[2014-01-13 22:03:28 -0500] coderanger: mattupstate: Some IPs point to VPC addrs, some are public IPs but dev related services
[2014-01-13 22:05:08 -0500] mattupstate: i guess thats what i meant by "internal"
[2014-01-13 22:05:10 -0500] fleish: dsa: always appreciated when folks make an effort. and with that I need to sign off for a bit and recover from all this banging of my head against the wall ;) cheers
[2014-01-13 22:05:50 -0500] dsa: fleish: cherio :)
[2014-01-13 22:11:46 -0500] vigith: is there a way i can create an user without password in chef 11.0.10?
[2014-01-13 22:14:14 -0500] aaronfeng: i'm debugging the Java cookbook, for some reason, Chef::Mixin::ShellOut is not returning existstatus which causes the cookbook to fail.  This is under chef-solo run
[2014-01-13 22:16:49 -0500] flaccid_: aaronfeng: you may like to cite the error
[2014-01-13 22:18:41 -0500] aaronfeng: flaccid_: the error is misleading since i debugged to the point why it failed.  it's failing on every shell_out when it checks the exitstatus.  It returns blank, but 0 is expected.
[2014-01-13 22:19:02 -0500] flaccid_: aaronfeng: sorry to hear
[2014-01-13 22:19:47 -0500] aaronfeng: i'm sure it's something related to my setup or env, just trying to figure it out
[2014-01-13 22:20:05 -0500] juliancdunn: vigith: sure, if your OS supports doing so
[2014-01-13 22:46:18 -0500] xofer: aaronfeng: try replacing w/ Mixlib::ShellOut
[2014-01-13 22:47:29 -0500] xofer: aaronfeng: https://tickets.opscode.com/browse/COOK-2388
[2014-01-13 22:49:10 -0500] aaronfeng: xofer: I'm actually using older version of chef (10.24.4), the java cookbook works with vagrant chef solo provisioner, but if I try to run chef-solo myself, it fails.  exitstatus doesn't return anything.
[2014-01-13 22:49:30 -0500] x0nic: Can someone help me out with: http://community.opscode.com/cookbooks/fail2ban. If I specify an action for a jail, chef will format the output incorrectly.
[2014-01-13 23:01:52 -0500] mattupstate: coderanger: so where does the line get drawn for you between chef and omnibus installs?
[2014-01-13 23:02:11 -0500] mattupstate: if you could even draw one...
[2014-01-13 23:02:22 -0500] coderanger: mattupstate: Not sure what you mean
[2014-01-13 23:03:04 -0500] mattupstate: chef can be used to install software/projectsomnibus installs software/projects...
[2014-01-13 23:04:17 -0500] mattupstate: conceptually, i'm unsure what advantage omnibus installation has over using chef
[2014-01-13 23:04:58 -0500] mattupstate: i'm probably still unclear
[2014-01-13 23:05:49 -0500] coderanger: mattupstate: the package contains the app and all dependencies
[2014-01-13 23:06:02 -0500] coderanger: mattupstate: chef just installs the package, writes out config files, and manages services
[2014-01-13 23:06:56 -0500] mattupstate: coderanger: ok, that answers my question
[2014-01-13 23:06:59 -0500] mattupstate: thanks
[2014-01-13 23:11:45 -0500] nowthatsamatt: anyone know how i can get this to pass:
[2014-01-13 23:11:45 -0500] nowthatsamatt: ec2-54-201-65-67.us-west-2.compute.amazonaws.com The authenticity of host 'bitbucket.org (131.103.20.167)' can't be established.
[2014-01-13 23:11:46 -0500] nowthatsamatt: ec2-54-201-65-67.us-west-2.compute.amazonaws.com RSA key fingerprint is 97:8c:1b:f2:6f:14:6b:5c:3b:ec:aa:46:46:74:7c:40.
[2014-01-13 23:11:57 -0500] masterkorp: Guys why was foodcritic removed from test-kitchen runs ?
[2014-01-13 23:12:22 -0500] nowthatsamatt: i assume it needs me to say yes
[2014-01-13 23:12:26 -0500] nowthatsamatt: but how can i automate that
[2014-01-13 23:14:55 -0500] masterkorp: nowthatsamatt: we need more context
[2014-01-13 23:16:32 -0500] nowthatsamatt: `cd /var && hg clone -e 'ssh -i /home/user/deploy.key' ssh://hg@bitbucket.org/user/repo`
[2014-01-13 23:16:34 -0500] nowthatsamatt: is the last line
[2014-01-13 23:16:38 -0500] nowthatsamatt: before it just hangs
[2014-01-13 23:16:43 -0500] rava: does anyone know of a straight forward cookbook for cassandra? i've been having a helluva time getting the community cookbook to work right with metachef
[2014-01-13 23:16:45 -0500] nowthatsamatt: so i'm really assuming that it's waiting on the yes
[2014-01-13 23:37:14 -0500] flagg0204: in chef 11 is when trying to use  myarray.each do |e| node.set['attr'] << e im getting "undefined method << on node".  Is there a different way of loading up an attribute that is an array
[2014-01-13 23:37:18 -0500] flagg0204: ?
[2014-01-13 23:46:43 -0500] workmad3: flagg0204: I'd personally suggest doing 'node.set['attr'] += myarray'
[2014-01-13 23:59:52 -0500] flagg0204: workmad3: ill give that a hsot thanks

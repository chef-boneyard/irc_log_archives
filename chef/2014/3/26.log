[2014-03-26 00:01:05 -0400] flaccid: hes pretty good aye
[2014-03-26 00:01:07 -0400] flaccid: :p
[2014-03-26 00:16:12 -0400] dgarstang: My Berksfile has stuff like cookbook "bc-apt", git: "git@git.co.bitcasa.com:chef/bc-apt.git" ... when Berks runs it's showing the version as 0.0.0 and the git id is the SECOND to last commit id. I don't know what's going on. :(
[2014-03-26 00:16:15 -0400] dgarstang: crap
[2014-03-26 00:24:52 -0400] dgarstang: Why would Berkshelf be pulling something from a git source, one rev back?
[2014-03-26 00:26:07 -0400] dgarstang: Why would Berkshelf also be reporting the version number of a cookbook pulled from git as 0.0.0 ?
[2014-03-26 00:31:05 -0400] scalp42: dgarstang whats the line in Berksfile
[2014-03-26 00:31:42 -0400] scalp42: if you just ask to pull from a git source in Berksfile, but dont specify anything else, then master will be pulled. Could be that the metadata.rb in that master branch is 0.0.0
[2014-03-26 00:32:54 -0400] dgarstang: scalp42: I don't know what's going on. I haven't mucked around with berksfile for quite a while and the totally unintuitve format has me very confused and frustrated.
[2014-03-26 00:34:30 -0400] dgarstang: scalp42: cookbook 'bc-apt', git: "git@git.co.foo.com:chef/bc-apt.git"
[2014-03-26 00:36:19 -0400] dgarstang: scalp42: That line when bringing up vagrant shows it pulling 0.0.0 with an OLD git commit id
[2014-03-26 00:36:49 -0400] dgarstang: Why would it pull one commit back!?
[2014-03-26 00:46:15 -0400] gkra: coderanger: hey, just found a blog post of yours (arrays and chef)
[2014-03-26 00:46:23 -0400] coderanger: Heh
[2014-03-26 00:46:50 -0400] gkra: what happens if multiple cookbook recipies in a chef-client run each node.override the same hash?
[2014-03-26 00:47:02 -0400] gkra: is the resultant attribute the union of all the overrides?
[2014-03-26 00:47:20 -0400] gkra: (assuming each override only ever adds new key/value pairs)
[2014-03-26 00:48:22 -0400] coderanger: gkra: Don't count on those semantics, the tl;dr of that post is to never ever use arrays in attrs
[2014-03-26 00:48:28 -0400] gkra: hah
[2014-03-26 00:48:32 -0400] gkra: well, that point was taken
[2014-03-26 00:48:40 -0400] coderanger: Oh sorry, you said hash
[2014-03-26 00:48:42 -0400] coderanger: misread :)
[2014-03-26 00:48:46 -0400] gkra: :D
[2014-03-26 00:49:11 -0400] coderanger: So if you set node.override['foo''] = {} it (I think) nukes all other keys
[2014-03-26 00:49:22 -0400] coderanger: so you would want to call #update or similar
[2014-03-26 00:49:35 -0400] gkra: okay...
[2014-03-26 00:49:55 -0400] gkra: so, i have two cookbooks which both call a third, to insert values into a config file via the third's template
[2014-03-26 00:50:16 -0400] gkra: the attribute for the template is a hash, I just want to make sure I end up with what I want... :)
[2014-03-26 00:51:44 -0400] gkra: I guess what I should ask, what's the "best" way to merge additional values into an attribute (type Hash) without nuking it?
[2014-03-26 00:53:27 -0400] dgarstang: so... i got a cookbook that works with vagrant, fails on test kitchen (but works when I log in and run chef solo), and works when applied to an ec2 instance. *blank stare*
[2014-03-26 00:55:20 -0400] coderanger: gkra: You can just set node.override['third']['whatever']['key']
[2014-03-26 00:56:43 -0400] gkra: coderanger: so... this? https://gist.github.com/gkra/593f36b574062bb41aa6
[2014-03-26 00:56:55 -0400] coderanger: yep
[2014-03-26 00:57:32 -0400] gkra: okay
[2014-03-26 00:57:33 -0400] coderanger: Any needed intervening hashes are created
[2014-03-26 00:57:33 -0400] gkra: i have no idea why that was so hard to brain.
[2014-03-26 00:57:34 -0400] gkra: thanks :)
[2014-03-26 00:57:34 -0400] gkra: oh i suppose that first line would be an = instead of =>
[2014-03-26 01:01:57 -0400] coderanger: Ahh yep
[2014-03-26 01:02:50 -0400] scalp42: back sorry
[2014-03-26 01:02:51 -0400] scalp42: in that bc-apt
[2014-03-26 01:02:56 -0400] scalp42: whats the version in metadata.rb please
[2014-03-26 01:03:24 -0400] scalp42: can you try pulling the exact git ref you want?
[2014-03-26 01:07:22 -0400] scalp42: dgarstang I have to bail
[2014-03-26 01:07:32 -0400] scalp42: soon
[2014-03-26 02:00:45 -0400] gkra: gah... I'm looking for a project, thought I saw it on github, that lets you distribute a chef repo to multiple chef servers...
[2014-03-26 02:00:54 -0400] gkra: and now i can't find it, and I apparently didn't save a bookmark...
[2014-03-26 02:15:53 -0400] juliancdunn: gkra: are you thinking of grocery delivery?
[2014-03-26 02:15:55 -0400] juliancdunn: https://github.com/facebook/chef-utils/blob/master/README_grocery_delivery.txt
[2014-03-26 02:20:09 -0400] gkra: no, it was similar to that, though...
[2014-03-26 02:23:31 -0400] darkside_: does anyone know the network ports used bychef-server and -client? i found a post on the ml from 2011 stating 4000 and 443
[2014-03-26 02:23:53 -0400] darkside_: open source chef ^
[2014-03-26 02:32:08 -0400] someara: just 443. 80 redirects
[2014-03-26 02:39:24 -0400] coderanger: Unless you use Pushy, that is
[2014-03-26 02:43:39 -0400] darkside_: both directions, 443?
[2014-03-26 02:44:39 -0400] coderanger: darkside_: No, just on the server
[2014-03-26 02:44:46 -0400] coderanger: darkside_: There are no listening sockets in chef-client
[2014-03-26 02:45:33 -0400] darkside_: oh, makes sense, i was thinking wrongly
[2014-03-26 04:33:49 -0400] brucelee_: coderanger: hey :)
[2014-03-26 04:35:41 -0400] brucelee_: coderanger: are you attending the aws conference tomorrow?
[2014-03-26 05:18:51 -0400] coderanger: brucelee_: Indeed
[2014-03-26 05:19:59 -0400] brucelee_: coderanger: hey you know when briefly met today? :P
[2014-03-26 05:25:05 -0400] coderanger: brucelee_: Hmm?
[2014-03-26 05:26:45 -0400] brucelee_: coderanger: at the pagerduty event earlier
[2014-03-26 05:27:04 -0400] coderanger: Hah, roundish glasses?
[2014-03-26 05:27:05 -0400] brucelee_: i was sitting next to the guy falling asleep on your right
[2014-03-26 05:27:09 -0400] brucelee_: yes :)
[2014-03-26 05:27:22 -0400] coderanger: More people need to wear name tags with their online handles :P
[2014-03-26 05:27:24 -0400] brucelee_: thats my buddy, hes a network admin, and doesnt use aws lol
[2014-03-26 05:27:43 -0400] brucelee_: anyway, i wanted to talk more, but my buddies had to go
[2014-03-26 05:27:51 -0400] brucelee_: how long did you end up staying?
[2014-03-26 05:29:45 -0400] rpad: is it ok to put a runlist in the client.rb?
[2014-03-26 05:30:01 -0400] coderanger: I was there a while but I was also chatting with the PD folks too
[2014-03-26 05:30:14 -0400] coderanger: We're both working on HA cron solutions
[2014-03-26 05:30:20 -0400] coderanger: or at least frustrated by the lack of them
[2014-03-26 05:31:00 -0400] brucelee_: why cant you just run crons on all participants
[2014-03-26 05:31:29 -0400] coderanger: brucelee_: Most tasks aren't idempotent, so they need to run on only one place
[2014-03-26 05:31:35 -0400] coderanger: ex. send emails to customers
[2014-03-26 05:32:13 -0400] brucelee_: if(me == not_primary) { service cron stop } :p
[2014-03-26 05:32:27 -0400] brucelee_: else { service cron start } :p
[2014-03-26 05:37:36 -0400] coderanger: Heh, bit more complex than that
[2014-03-26 05:38:02 -0400] coderanger: for example some tasks need to run on one of set of hosts, but only one of them (ex. C* maintance jobs)
[2014-03-26 05:38:41 -0400] coderanger: and building the locking and whatnot is very non-trivial
[2014-03-26 05:38:51 -0400] coderanger: rpad: I'm not sure you can
[2014-03-26 05:39:27 -0400] rpad: coderanger: Yeah, found that out quickly. Was just trying to find a way around -j <config>.. though not sure why
[2014-03-26 05:39:55 -0400] coderanger: rpad: solo or client?
[2014-03-26 05:40:03 -0400] rpad: client
[2014-03-26 05:40:14 -0400] rpad: was using solo at first via cloudformation, but changed it up to client
[2014-03-26 05:40:57 -0400] coderanger: rpad: So make sure you only call it that way once
[2014-03-26 05:41:15 -0400] rpad: coderanger: Oh, really? that's good to know
[2014-03-26 05:41:37 -0400] coderanger: rpad: If you pass that argument normally, it will override the run list from the server
[2014-03-26 05:42:05 -0400] rpad: coderanger: So after the first run I can simply call "chef-client"?
[2014-03-26 05:52:17 -0400] brucelee_: coderanger: anything specific youre looking forward to tomorrow?
[2014-03-26 05:52:23 -0400] brucelee_: any break out sessions in particular :p
[2014-03-26 05:54:45 -0400] coderanger: brucelee_: Probably trolling the opsworks session, and tracking down some cfn folks
[2014-03-26 05:57:12 -0400] brucelee_: lol
[2014-03-26 05:57:50 -0400] brucelee_: coderanger: speaking of cfn, you linked me a python script earlier on how to create one of those json files
[2014-03-26 05:58:09 -0400] coderanger: troposphere and stratosphere
[2014-03-26 05:58:24 -0400] brucelee_: aside from that, is the intended way of creating one of those files to hand write it?
[2014-03-26 05:58:35 -0400] brucelee_: "hand write" manually type out the json? :p
[2014-03-26 05:58:59 -0400] brucelee_: its kind of a pain in the ass....
[2014-03-26 06:03:08 -0400] rpad: They're a pain, but if you break them up well enough I haven't found it too hard to manage
[2014-03-26 06:03:13 -0400] anthroprose: brucelee_: you get used to it after a while ;)
[2014-03-26 06:03:39 -0400] brucelee_: :p
[2014-03-26 06:04:06 -0400] anthroprose: mine changes depending on business logic but currently I have, global, region, cache/service, web and worker
[2014-03-26 06:04:41 -0400] anthroprose: global has things like sqs/sns for alerting, region has all my networking for prod/staging
[2014-03-26 06:05:42 -0400] Junaid_: Is there a way to stop Chef from overwriting values in a file when it runs?
[2014-03-26 06:07:04 -0400] anthroprose: Junaid_: change whatever is driving the templating of that file
[2014-03-26 06:09:15 -0400] Junaid_: <anthroprose> I have created a template to add in some Values.But I also want to be able to make some changes to that same file manually. Is it possible to add something in the template so it doesn't overwrite whats there in a file except for adding what its supposed to.?
[2014-03-26 06:10:02 -0400] anthroprose: Junaid_: competing philosophies, why not add those to the node data or a data bag?
[2014-03-26 06:20:03 -0400] Junaid_: <anthroprose>. This is for a Nagios related file. I dont want to manage a few servers with Chef. I need chef to add in the Values through templates for the servers Im monitoring using chef, for the rest I want to be able to manually edit the file.
[2014-03-26 06:24:21 -0400] anthroprose: Junaid_: well you really shouldnt do that
[2014-03-26 06:24:39 -0400] anthroprose: but nagions just blind parses all the conf files right? move your manual ones to a different file
[2014-03-26 06:24:45 -0400] anthroprose: or do a conf.d style
[2014-03-26 06:25:31 -0400] Junaid_: <anthroprose> That's a good Idea. Ill give that a try.
[2014-03-26 06:25:34 -0400] Junaid_: :)
[2014-03-26 06:26:19 -0400] anthroprose: Junaid_: usually the top of chef templated files have a large warning about changes being blown away
[2014-03-26 06:42:00 -0400] Junaid_: <anthroprose> I always thought there was a way to exclude chef from overwriting contents of a file if you needed it to. Anyways. For now creating seperate files for the hosts that need manual entries has worked. Thank you
[2014-03-26 07:14:35 -0400] Bloc: so i was able to run knife to deploy an ec2 instance and install memcache
[2014-03-26 07:15:02 -0400] Bloc: say i change the memcache version or change my custom recipe, how do i push the updates to the server?
[2014-03-26 07:15:44 -0400] Bloc: guess i'm trying to figure out the development workflow for when i write recipe
[2014-03-26 07:15:45 -0400] Bloc: s
[2014-03-26 07:41:43 -0400] cloudgeek: can we ask here for hiring chef related person ?
[2014-03-26 07:55:05 -0400] RSTJNII: If my node attributes contain {'rackconnect' => { 'public_ip' => '1.2.3.4' } } How do I format the --attribute option to knife SSH to use rackconnect['public_ip']?
[2014-03-26 07:59:25 -0400] RSTJNII: All the examples I'm finding are for base level attributes like fqdn and ipaddress
[2014-03-26 08:01:29 -0400] RSTJNII: rackconnect.public_ip apparently
[2014-03-26 08:16:53 -0400] srenatus: RSTJNII: yes :)
[2014-03-26 08:34:14 -0400] cloudgeek: Could not find data item client in any Hiera data file
[2014-03-26 08:34:20 -0400] cloudgeek: for a node
[2014-03-26 08:34:27 -0400] cloudgeek: , How I can remove this file
[2014-03-26 08:56:20 -0400] fretb: 4!4444444
[2014-03-26 09:09:31 -0400] mhenrixon: @coderanger thanks a lot for helping me out yesterday. The git resource way is just a whole lot better
[2014-03-26 09:10:04 -0400] mhenrixon: Anyone know how to force creation of a user that was previously missing when I ran the chef-client? Is it the search index not being updated perhaps?
[2014-03-26 09:12:10 -0400] mhenrixon: that was it
[2014-03-26 09:15:35 -0400] chef538: Hello folks! Need help in s3_file cookbook configuration
[2014-03-26 09:15:59 -0400] srenatus: mhenrixon: there's a configurable commit-interval, chef_solr['commit_interval'], documented here http://docs.opscode.com/config_rb_chef_server_optional_settings.html
[2014-03-26 09:16:13 -0400] srenatus: mhenrixon: defaults to one minute
[2014-03-26 09:16:47 -0400] mhenrixon: Thanks srenatus 1 minute is fine I just didn't think of it at the time ran chef on the server
[2014-03-26 09:17:05 -0400] chef538: can someone give me an example how to fill this to directoves^
[2014-03-26 09:17:06 -0400] chef538:  remote_path "/my/s3/key"         bucket "my-s3-bucket"
[2014-03-26 10:27:34 -0400] Garo_: Hello. I'd like to call an LWRP "aws_ebs_volume" from another LWRP resource which I'm writing by myself. How can this be done?
[2014-03-26 10:49:44 -0400] superstructor: Hello everyone. Ive got an issue with the chef_solo provisioner on Vagrant 1.5.1 / VMware Fusion provider on a Mac OS X host running a precise64 guest. It appears platform_family is being set to mac_os_x when it should be set to something like debian. Has anyone else experienced something like that ?
[2014-03-26 10:56:26 -0400] shadylog: Hi, I am using the nginx cookbook
[2014-03-26 10:56:32 -0400] shadylog: I was wondering how I am supposed to add a site?
[2014-03-26 10:56:47 -0400] shadylog: I can't find attributes I need to set vhost etc?
[2014-03-26 10:57:04 -0400] shadylog: Am I expected to create the site configuration myself and upload it in some way?
[2014-03-26 11:11:50 -0400] enbergj: it provides a new site resource type or something like that, imo it's a mess
[2014-03-26 11:12:24 -0400] enbergj: the nginx cookbook keeps resetting your configuration to ridiculously poor defaults, it forces the default nginx site to be installed and enabled, etc.
[2014-03-26 13:11:01 -0400] mhenrixon: How do I make my system installed ruby available to everyone?
[2014-03-26 13:15:10 -0400] mhenrixon: Do I really have to add it to everyones .bashrc or .zshrc seems overly complicated
[2014-03-26 13:15:41 -0400] helfire: @mhenrixon add it to the /etc/profile or whatever your distro uses
[2014-03-26 13:15:53 -0400] mhenrixon: thanks helfire
[2014-03-26 13:40:08 -0400] tjarvstrand: hi, is there any way to add a client to a group in an organization in Chef Manage v16? I'm an admin and the client exists, but I keep getting  "Sorry, but that is not a valid member name"
[2014-03-26 13:40:48 -0400] tjarvstrand: I get the same thing when trying to add a User to the group, even though the user exists and is a member of the org
[2014-03-26 13:40:51 -0400] tjarvstrand:  :(
[2014-03-26 13:51:50 -0400] mzito: question - let's say, as part of my chef-client run, that I have some custom resources that are designed to talk to an external system
[2014-03-26 13:52:26 -0400] mzito: is it possible to have cookbook content that is evaluated on the chef server, as opposed to run on the client?
[2014-03-26 13:53:09 -0400] mzito: the reason being that I could put my necessary libraries and the like on the chef-server, as opposed to distributing them to every client
[2014-03-26 13:54:31 -0400] jonlives: mzito: no :)
[2014-03-26 13:55:24 -0400] mzito: yep, that's what I thought.
[2014-03-26 13:55:28 -0400] jonlives: all logic other than dependency resolution is carried out on the client by design.
[2014-03-26 13:55:53 -0400] mzito: I was 95% sure that was the case - wondered if I'd just missed something somewhere
[2014-03-26 13:56:00 -0400] jonlives: nah you were right
[2014-03-26 13:56:08 -0400] jonlives: which doesn't really help you, but at least you were right :p
[2014-03-26 13:56:31 -0400] mzito: it's so rare I'm hoping to be told I'm an idiot
[2014-03-26 13:57:39 -0400] mzito: I could do it as a knife plugin, though - and then you just have to have the right libraries on the workstation, and it has to be triggered by a knife command as opposed to evaluated as part of the run list
[2014-03-26 13:58:44 -0400] jonlives: mzito: I would honestly say that it would be best to ship the libraries to every client - that's the way Chef is meant to work :)
[2014-03-26 13:59:45 -0400] mzito: jonlives: well, there's more considerations than just that.  Network access, for example - it's nicer if I don't have to open up ports to this other application server from every node
[2014-03-26 14:00:12 -0400] mzito: and separation of responsibilities and the like - don't have to "worry" about someone modifying the client libraries on an untrusted node
[2014-03-26 14:00:13 -0400] mzito: and so on
[2014-03-26 14:00:27 -0400] mzito: "nicer" but not "necessary"
[2014-03-26 14:00:30 -0400] mzito: that's why I was asking
[2014-03-26 14:00:39 -0400] jonlives: fair enough :)
[2014-03-26 14:00:48 -0400] mzito: but I appreciate the confirmation, thanks a ton
[2014-03-26 14:00:53 -0400] jonlives: no worries
[2014-03-26 14:11:36 -0400] bbssysop: can you do two service action's in one service block. because it seems to ignore my second action.
[2014-03-26 14:11:50 -0400] bbssysop: e.g :stop, :disable
[2014-03-26 14:22:07 -0400] srenatus: kallistec: https://twitter.com/kallistec/status/327464104069574656  could you please elaborate on this?
[2014-03-26 14:32:04 -0400] srenatus: kallistec: nvm.  things have changed quite a bit
[2014-03-26 14:39:53 -0400] srenatus: kallistec: no, actually, I don't really get it.
[2014-03-26 14:42:08 -0400] DeVVaN: What tooling should i use to test a multinode cluster that uses search to find eachother?
[2014-03-26 14:43:59 -0400] mhenrixon: Well well well that didn't really work either...  https://gist.github.com/3d24a749cc74219b128f
[2014-03-26 14:44:34 -0400] adnichols: DeVVaN: You can use test-kitchen and load node attributes chef_zero to make search return multiple nodes. If you want to actually test all those nodes together it's a different problem
[2014-03-26 14:44:42 -0400] mhenrixon: What is the preferred way to handle that? Give everyone access to the ruby gem dir or load the /etc/profile for root users as well?
[2014-03-26 14:45:57 -0400] DeVVaN: adnichols: yeah, it's the testing of all the things together i want to do.
[2014-03-26 14:46:30 -0400] mstyne: good morning folks.
[2014-03-26 14:46:40 -0400] mstyne: is there a preferred means of determining if a node is a VM?
[2014-03-26 14:46:52 -0400] mstyne: i'm using
[2014-03-26 14:46:52 -0400] mstyne: if !node['virtualization'].has_key?('role')
[2014-03-26 14:46:57 -0400] mstyne: which seems cheesy
[2014-03-26 14:47:31 -0400] DeVVaN: i'm using if node['virtualization']['system'] == 'vmware'
[2014-03-26 14:47:35 -0400] adnichols: DeVVaN: you can look at vagabond too - uses lxc to spin up a cluster
[2014-03-26 14:47:40 -0400] DeVVaN: for our vmware system
[2014-03-26 14:48:02 -0400] mstyne: DeVVaN: doesn't that fall over if 'system' doesn't exist
[2014-03-26 14:48:20 -0400] DeVVaN: adnichols: then i need to look into setting up a linux-machine for testing. i'm on OSX :S
[2014-03-26 14:48:31 -0400] mstyne: i.e. if you run it in a non-virtualized environment
[2014-03-26 14:48:39 -0400] adnichols: DeVVaN: you just need a virtualized linux box capable of lxc
[2014-03-26 14:48:48 -0400] DeVVaN: mstyne: yeah probobaly
[2014-03-26 14:49:19 -0400] mstyne: DeVVaN: ;)
[2014-03-26 14:49:36 -0400] DeVVaN: adnichols: Yeah, so spin upp a linux vagrant for running lxc then :)
[2014-03-26 14:49:48 -0400] adnichols: DeVVaN: yep
[2014-03-26 14:50:08 -0400] DeVVaN: mstyne: could use it with chef-sugar, it handles those kind of problems
[2014-03-26 14:50:09 -0400] adnichols: DeVVaN: you are on osx, nothing is going to be native
[2014-03-26 14:51:24 -0400] DeVVaN: adnichols: was hoping there was a path using vagrant instead of lxc
[2014-03-26 14:51:49 -0400] DeVVaN: or does vagabond support vagrant. (have to check)
[2014-03-26 14:51:55 -0400] adnichols: DeVVaN: I'm unaware of one
[2014-03-26 14:51:56 -0400] srenatus: woah, just learnt about node.attributes.debug_value() in `chef-shell -z`. that's great.
[2014-03-26 14:52:12 -0400] Popsikle-Work: hmmm, how do I fetch a node attribe from a node object from a variable?   http://pastebin.com/eFnPpzDH
[2014-03-26 14:52:17 -0400] adnichols: DeVVaN: lxc incurs basically zero overhead on top of vagrant - so I'm not sure there's a huge diff
[2014-03-26 14:54:47 -0400] srenatus: Popsikle-Work: https://github.com/rcbops-cookbooks/osops-utils/blob/master/libraries/ip_location.rb#L55-L71  like this?
[2014-03-26 14:55:38 -0400] Popsikle-Work: I saw that code, did not understand what it did ;p
[2014-03-26 14:57:30 -0400] Popsikle-Work: but yep, that does what I want.
[2014-03-26 14:57:39 -0400] srenatus: Popsikle-Work: it takes a hash (or something similar, like node) and a "path", such as "keep_ops.main_ip", and returns node['keep_ops']['main_ip'] if possible
[2014-03-26 14:58:19 -0400] Popsikle-Work: yea, thats what I had in mind of doing, but wasnt sure if there was a way to pull it out without having to recurse down like that. Thanks!
[2014-03-26 14:58:52 -0400] srenatus: Popsikle-Work: that cookbook is a treasure trove, e.g. this search method: https://github.com/rcbops-cookbooks/osops-utils/blob/master/libraries/ip_location.rb#L401
[2014-03-26 15:00:12 -0400] Popsikle-Work: oh yes, I am VERY familiar with that.
[2014-03-26 15:00:21 -0400] Popsikle-Work: Most of my chef skillz xeom from disecting that cookbook
[2014-03-26 15:00:22 -0400] Popsikle-Work: ;)
[2014-03-26 15:01:51 -0400] Popsikle-Work: and actually, that search is a bit wonky sometimes.  https://github.com/rcbops-cookbooks/osops-utils/blob/master/libraries/ip_location.rb#L454 tends to return more than just the role or recipe since it adds an s to the search query ;)
[2014-03-26 15:02:45 -0400] srenatus: Popsikle-Work: plural => expanded run list
[2014-03-26 15:03:40 -0400] srenatus: so it's on purpose I guess
[2014-03-26 15:09:40 -0400] Popsikle-Work: Yea, I know why its there, but it does not function as intended imho.  knife search "roles:logstash_server" for example will return every node that has my wrapper cookbook that is used in that role, where as knife search "role:logstash_server" returns the only node that acutally runs that role.
[2014-03-26 15:30:25 -0400] helfire: anyone use chef and openstack? chef-client tells chef the ipaddress is the internal network, but i'd rather chef-server see the public_ip
[2014-03-26 15:34:12 -0400] srenatus: helfire: place an ohai hint for openstack, then you get the metadata from ohai and can use node[cloud][public_ip4] etc
[2014-03-26 15:34:30 -0400] helfire: ok cool, see that
[2014-03-26 15:34:47 -0400] helfire: and it looks like i can override ipaddress as so? https://tickets.opscode.com/browse/OHAI-287
[2014-03-26 15:37:41 -0400] srenatus: helfire: often that is solved like this: https://github.com/portertech/chef-monitor/blob/master/recipes/default.rb#L29-L31
[2014-03-26 15:38:07 -0400] helfire: ahh nice
[2014-03-26 15:52:46 -0400] shlant: am I the only on experiencing intermittent issues with downloading omnibus packages? starting to be a PITA
[2014-03-26 15:53:07 -0400] prothon: I have a silly question but here it goes. What is the proper way to deploy an internal website? Where can I store all the files in the recipe or do I have to wget or git pull each time?
[2014-03-26 15:53:19 -0400] prothon: shlant: it's slow. One night i was getting 25kbps
[2014-03-26 15:53:37 -0400] mzito: you should probably separate out your content delivery from your chef server
[2014-03-26 15:54:10 -0400] prothon: Hum OK so that's the best method. Execute wget http://url to get the source for a project.
[2014-03-26 15:55:00 -0400] mzito: prothon: maybe - depends on your internal mechanisms for content distribution.  NFS? HTTP server? Git repo?
[2014-03-26 15:55:25 -0400] prothon: gitolite repo. I could put up a internal only http site.
[2014-03-26 15:57:25 -0400] celhead: Hello all, quick question: Is it possible for me to do:
[2014-03-26 15:57:25 -0400] celhead: node.set.some.value = "something"
[2014-03-26 15:57:26 -0400] celhead: node.save
[2014-03-26 15:57:26 -0400] celhead: On machine A
[2014-03-26 15:57:27 -0400] celhead: and then be able to access node.some.value on machine B? Looking at knife node show A I see the value, but machine B can't see it.
[2014-03-26 16:00:30 -0400] shawn_sher: Sounds like a timing thing
[2014-03-26 16:00:41 -0400] braeuer: hi everyone. I used chef-solo before and am in the process of migrating to chef-client/chef-zero (so I can use search and data_bags). Previously it was easy to override attributes and template, by having multiple cookbooks-directories set. Seems like chef-client behaves differently. What is the currently recommended best practise e.g. to override a template in a upstream cookbook?
[2014-03-26 16:00:44 -0400] mhenrixon: are people using rbenv or rvm to manage their ruby?
[2014-03-26 16:01:37 -0400] jchauncey: braeuer: you set the cookbook resource value when calling template
[2014-03-26 16:02:18 -0400] celhead: perhaps, rather than accessing my saved data from node[.., I should search for it?
[2014-03-26 16:02:37 -0400] jchauncey: celhead: thar be dragons
[2014-03-26 16:02:50 -0400] jchauncey: celhead: i would caution that search may not always yield expected results
[2014-03-26 16:03:45 -0400] jchauncey: celhead: if you need to have a shared data store then use data bags
[2014-03-26 16:04:23 -0400] celhead: jchauncey: but the data bag page explictly says that one shouldn't save to data bags within recipes, i.e., suggesting there's some other, better mechanism
[2014-03-26 16:04:58 -0400] GreatSUN: hi all
[2014-03-26 16:05:33 -0400] GreatSUN: short question: is there an object Chef::Cookbook in ruby 1.9? If yes, how to load it?
[2014-03-26 16:05:36 -0400] jchauncey: celhead: i would agree and question what you might be trying to accomplish to start with. is the value you are saving truely dynamic?
[2014-03-26 16:06:51 -0400] jchauncey: GreatSUN: https://github.com/opscode/chef/tree/master/lib/chef
[2014-03-26 16:07:41 -0400] celhead: jchauncy: it's definitely dynamic (defined by a customer).
[2014-03-26 16:08:08 -0400] celhead: jchauncy: a "customer" uses our appliance which uses chef internally
[2014-03-26 16:08:20 -0400] jchauncey: ah
[2014-03-26 16:08:53 -0400] GreatSUN: jchauncey: what are you trying to tell me with this link?
[2014-03-26 16:09:23 -0400] jchauncey: having a value stored on a node that other nodes depend on is a smell. That value may change or the node may go away. You would be better off having it in a persistent store like a data bag
[2014-03-26 16:09:49 -0400] jchauncey: GreatSUN: There is no class/module for a cookbook
[2014-03-26 16:10:18 -0400] celhead: jchauncy: I can do that, i.e., I've used the code to save (in a recipe) to a databag, however, why does opscode advise against dynamically adding data to a databag from within a recipe?
[2014-03-26 16:10:28 -0400] celhead: it seems like a reasonable thing to do
[2014-03-26 16:10:38 -0400] jchauncey: im guessing concurrency
[2014-03-26 16:10:41 -0400] GreatSUN: jchauncey: Ah ok... for me it looks like I can load chef gem, but can not work with Chef::Coookbook afterwards
[2014-03-26 16:10:56 -0400] jchauncey: GreatSUN: right
[2014-03-26 16:11:01 -0400] braeuer: jchauncey: So it is no longer possible to just re-create the same directory structure in my site-cookbooks and drop a template there? (e.g. before I would just create site-cookbooks/mongodb/templates/default/conf.erb and it would overwrite the the conf.erb in the upstream cookbook)
[2014-03-26 16:12:03 -0400] shawn_sher: Maybe because of weird race conditions
[2014-03-26 16:12:34 -0400] GreatSUN: jchauncey: can you explain me why this is?
[2014-03-26 16:12:39 -0400] jchauncey: braeuer: im not sure, ive never worked with that kind of workflow.
[2014-03-26 16:13:05 -0400] jchauncey: GreatSUN: I see no Cookbook module or class so im not sure how you would expect to load it
[2014-03-26 16:13:41 -0400] jchauncey: i see things like Chef::Cookbook::Metadata
[2014-03-26 16:14:04 -0400] jrez: I'm having trouble with chef-client loading an older cookbook version even though the Berksfile.lock has the correct locked_version.
[2014-03-26 16:14:12 -0400] GreatSUN: https://github.com/opscode/chef/blob/master/lib/chef/cookbook/metadata.rb <---
[2014-03-26 16:14:50 -0400] GreatSUN: trying to get an instance of Chef::Cookbook::Metadata fails cause there is no Chef::Cookbook (that's the error message)
[2014-03-26 16:15:33 -0400] jchauncey: are you calling new on metadata?
[2014-03-26 16:15:49 -0400] jchauncey: jrez: are you converging on a real node against hosted chef or is that in a kitchen instance?
[2014-03-26 16:16:08 -0400] jchauncey: jrez: rather a chef server (not necessarily hosted chef)
[2014-03-26 16:16:57 -0400] GreatSUN: Chef::Cookbook::Metadata.new -> uninitialized constant Chef::Cookbook (NameError)
[2014-03-26 16:17:37 -0400] jchauncey: hrm not sure ive never actually initialized a new metadata object
[2014-03-26 16:17:55 -0400] jrez: jchauncey: I'm using a chef server, not hosted chef.  I have uploaded the new cookbook version to the chef server via knife cookbook upload
[2014-03-26 16:18:15 -0400] GreatSUN: jchauncey: I am loading metadata from file
[2014-03-26 16:18:23 -0400] GreatSUN: at least I am trying to
[2014-03-26 16:18:50 -0400] jchauncey: jrez: is that node in an environment where the berksfile.lock has been applied?
[2014-03-26 16:20:15 -0400] GreatSUN: jchauncey: lol... have to require chef/cookbook/metadata now
[2014-03-26 16:20:22 -0400] jrez: jchauncey: I'm not sure.
[2014-03-26 16:20:26 -0400] jchauncey: jrez: then probably not
[2014-03-26 16:21:10 -0400] jchauncey: jrez: in that case the chef server is going to use the most appropriate cookbook version if possible. this might result in a lower version being chosen if that satifies the dependency requirement
[2014-03-26 16:24:35 -0400] jrez: jchauncey: I can see the new cookbook version via knife cookbook show
[2014-03-26 16:24:50 -0400] jrez: and that is the only cookbook in my run list.
[2014-03-26 16:27:23 -0400] GreatSUN: jchauncey: any idea bout this one here: https://github.com/opscode/chef/blob/master/lib/chef/cookbook_loader.rb
[2014-03-26 16:27:44 -0400] GreatSUN: after required it does not show up with a Chef::CookbookLoader
[2014-03-26 16:32:00 -0400] jchauncey: jrez: yeah that's strange then if you have a node with only 1 cookbook in the run list it should alwyas pull the latest cookbook from your chef server. (given nothing has locked it down like an environment)
[2014-03-26 16:34:06 -0400] fayesal: So how does depsolver work?  In my run list, I have one recipe which doesn't specify a version for ohai (picks 2.0) and a recipe that depends on a recipe that depends on ohai 1.2 (nginx 2.44).  Chef 11 refuses to pick 1.2 and instead gives a failure to converge versions.
[2014-03-26 16:36:06 -0400] Breakin__: hi guys how can i make a ping inside a chef recipe
[2014-03-26 16:36:16 -0400] Breakin__: I've tried require 'ping'
[2014-03-26 16:36:32 -0400] Breakin__: but got a ERROR: cannot load such file -- ping
[2014-03-26 16:42:34 -0400] kbarry: I can't seem to get an old template file to dissapear from my chef server
[2014-03-26 16:42:35 -0400] alexbst: Breakin__ - you should use an execute or bash resource to run the ping command.
[2014-03-26 16:42:38 -0400] kbarry: maybe i just need a sanity check
[2014-03-26 16:42:49 -0400] kbarry: but when i run a recipe, it appears to be using an old version of the template file
[2014-03-26 16:43:31 -0400] alexbst: kbarry - check your old cookbook is not tagged in the environment.. or upload a newer cookbook without the template.
[2014-03-26 16:43:34 -0400] kbarry: i tried deletign the recipe, and reuploading, then i tried deleting, and then changing the version number, then uploading, but it is still getting the old template file, can someone maybe show me how to .. see the old file/'
[2014-03-26 16:43:52 -0400] jchauncey: kbarry: its probably in the chef cache
[2014-03-26 16:43:56 -0400] kbarry: i don't use environment specific cookbooks,
[2014-03-26 16:44:04 -0400] kbarry: chef cache, on the node,
[2014-03-26 16:44:06 -0400] kbarry: or the server?
[2014-03-26 16:44:17 -0400] jchauncey: on the node
[2014-03-26 16:44:26 -0400] kbarry: where's that located?
[2014-03-26 16:44:36 -0400] jchauncey: like /tmp/chef or something like that
[2014-03-26 16:44:48 -0400] alexbst: something like /var/cache/chef
[2014-03-26 16:44:57 -0400] jchauncey: oh yeah var/chef
[2014-03-26 16:45:10 -0400] tcotav: /var/chef/cache/cookbooks/
[2014-03-26 16:48:12 -0400] Breakin__: alexbst how can I see the oputput of the ping command
[2014-03-26 16:48:16 -0400] Breakin__: alexbst I mean from chef
[2014-03-26 16:48:27 -0400] Breakin__: i tried ping -c 1 ip-address
[2014-03-26 16:48:35 -0400] Breakin__: If correct the $? value should be 0
[2014-03-26 16:48:46 -0400] Breakin__: how can I get the value
[2014-03-26 16:50:06 -0400] kbarry: I deleted both the template, and the cookbooks cache
[2014-03-26 16:51:08 -0400] kbarry: still getting the old version
[2014-03-26 16:51:22 -0400] kbarry: i am guessing its not being deleted from the chef server
[2014-03-26 16:51:23 -0400] alexbst: Breakin__ - don't confuse the return value with the output.
[2014-03-26 16:51:43 -0400] Breakin__: alexbst sorry I made a mistake
[2014-03-26 16:51:47 -0400] alexbst: Breakin__ - you can use the expected return value to then do something else, like notify the execution of another command or resource.
[2014-03-26 16:52:03 -0400] Breakin__: that's what I want
[2014-03-26 16:52:16 -0400] alexbst: Breakin__ - look at the chef resource notification methods
[2014-03-26 16:52:49 -0400] shadylog: dear chef devs
[2014-03-26 16:52:55 -0400] shadylog: can I thank you from the bottom of my heart
[2014-03-26 16:53:09 -0400] shadylog: for the amazing gift that is: https://vagrantcloud.com/chef
[2014-03-26 16:53:12 -0400] shadylog: thank you!!!
[2014-03-26 16:54:00 -0400] kbarry: where are the cookbooks kept on the chef server itself?
[2014-03-26 16:54:33 -0400] Nukepuppy: in limbo
[2014-03-26 16:55:15 -0400] stormerider: kbarry: inside postgres, i believe
[2014-03-26 16:55:29 -0400] Nukepuppy:  there is a cache too
[2014-03-26 16:55:37 -0400] kbarry: ugggggg
[2014-03-26 16:55:46 -0400] Nukepuppy: what is the problem you're trying to solve?
[2014-03-26 16:55:54 -0400] Nukepuppy: your cookbooks should be kept in .. source control :)
[2014-03-26 16:56:08 -0400] Nukepuppy: chef server is just some dummy to hold your data
[2014-03-26 16:56:13 -0400] stormerider: +1
[2014-03-26 16:56:15 -0400] kbarry: Am i doing something wrong that neither cookbook delete [name] nor changing the meta data version number will replace a tempalte file?
[2014-03-26 16:56:32 -0400] Nukepuppy: hmm
[2014-03-26 16:56:36 -0400] kbarry: I want to use a new version of a template i made,
[2014-03-26 16:56:37 -0400] Nukepuppy: how are you uploading your cookbook?
[2014-03-26 16:56:46 -0400] kbarry: And the chef server keeps serving the freaking old one that i don't even have a copy of
[2014-03-26 16:56:54 -0400] kbarry: knife cookbook upload
[2014-03-26 16:57:03 -0400] alexbst: kbarry - you should check that your new cookbook is showing on the server, make very sure the environment you are using is not tagging the old one with the old template, and as suggested clear the cache on the node.
[2014-03-26 16:57:29 -0400] alexbst: you can delete specific cookbook versions with knife cookbook delete cookbookname -v version, I believe :)
[2014-03-26 16:57:35 -0400] noodle: Evening. Anyone familiar with https://github.com/sethvargo-cookbooks/users and able to offer a bit of a hand? from the README.md I'm lead to believe that if I have databags in databags/users/<userhere>.json it should create the user for me - this doesn't seem to be the case :(
[2014-03-26 16:57:58 -0400] kbarry: i 1) cleared the cache on the node, delete the coolbook using "knide cookbook delete [name]", changed the version fo the cookbook, reuploaded using "knife cookbook upload [name]
[2014-03-26 16:58:12 -0400] kbarry: i delete ALL versions
[2014-03-26 16:58:26 -0400] Nukepuppy: try something like  knife cookbook list -a
[2014-03-26 16:58:30 -0400] Nukepuppy: make sure thats true
[2014-03-26 16:59:15 -0400] Nukepuppy: on the node itself if you check the /var/cache/chef   and look at your cookbook
[2014-03-26 16:59:17 -0400] kbarry: screw it, i'll jsut change the name of the template, why not,
[2014-03-26 16:59:20 -0400] Nukepuppy: does it even contain the new template?
[2014-03-26 16:59:20 -0400] kbarry: if thats what it takes.
[2014-03-26 16:59:33 -0400] Nukepuppy: if it does contain it.. then something in the logic is wrong
[2014-03-26 16:59:45 -0400] kbarry: Yes, the template is modified, and present in the new cookbook in my repo,
[2014-03-26 16:59:53 -0400] Nukepuppy: if it doesn't then something in the way the cookbook is being uploaded seems wrong
[2014-03-26 16:59:57 -0400] kbarry: I don't know how to "see" it on the chef server, to verify its contents there
[2014-03-26 17:00:09 -0400] Nukepuppy: are you using environments to lock versions of cookbooks?
[2014-03-26 17:00:12 -0400] kbarry: is it possible to view templates on the chef server
[2014-03-26 17:00:16 -0400] kbarry: no
[2014-03-26 17:00:22 -0400] kbarry: i am not using environments to lock versions
[2014-03-26 17:00:45 -0400] scalp42: you can see the template code kbarry if you go in the cookbook
[2014-03-26 17:00:46 -0400] tball: I wrote a LWRP which contains a remote_file resource inside it - if I want to set my new_resource.updated_by_last_action ONLY if my remote_file resource updated, isn't there some way to do that?
[2014-03-26 17:00:49 -0400] kbarry: if I was, however, i think i'dget a warning about the cookbook/version not being present since I deleted the cookbook outright
[2014-03-26 17:01:04 -0400] kbarry: scalp42: go in the cookbook "where"?
[2014-03-26 17:01:07 -0400] kbarry: on the chef server
[2014-03-26 17:01:11 -0400] tball: I thought I remembered a blog post somewhere where I could call something like 'run_context.last_resource_udpated?' - anyone got any ideas?
[2014-03-26 17:01:12 -0400] kbarry: where would it be kept?
[2014-03-26 17:01:13 -0400] scalp42: yes in the UI
[2014-03-26 17:01:17 -0400] kbarry: nope,
[2014-03-26 17:01:31 -0400] kbarry: My web ui has an error when tryig to see cookbook code
[2014-03-26 17:01:48 -0400] kbarry: ERROR: incompatible character encodings: ASCII-8BIT and UTF-8
[2014-03-26 17:01:58 -0400] scalp42: http://i.imgur.com/6LYUjYK.png
[2014-03-26 17:02:11 -0400] scalp42: yeah our UI doesnt work either :D
[2014-03-26 17:02:19 -0400] kbarry: yeah, click on the cookbook, and thats the error i get
[2014-03-26 17:02:22 -0400] Nukepuppy: try knife cookbook show cook version.number.here
[2014-03-26 17:02:46 -0400] scalp42: or knife cookbook download to get the code if you want to be sure
[2014-03-26 17:03:01 -0400] kbarry: i don't know how to use knight cookbook download
[2014-03-26 17:03:51 -0400] Nukepuppy: kbarry..
[2014-03-26 17:04:00 -0400] Nukepuppy: run the knife cookbook show cookbook version.number
[2014-03-26 17:04:02 -0400] kbarry: btw, side question, if there a command to see what server knife is accessing?
[2014-03-26 17:04:05 -0400] Nukepuppy: then append   'templates' to it
[2014-03-26 17:04:14 -0400] scalp42: what he said ^
[2014-03-26 17:04:17 -0400] Nukepuppy: ie:  knife cookbook show mycookbook  0.1.0 templates
[2014-03-26 17:04:23 -0400] scalp42: same as clicking in the UI
[2014-03-26 17:04:49 -0400] Nukepuppy: yeah but honestly UI is there for no great reason :(
[2014-03-26 17:04:58 -0400] kbarry: standby, thanksfor the help
[2014-03-26 17:05:08 -0400] scalp42: oh I agree good for starters though
[2014-03-26 17:05:28 -0400] kbarry: ok, its showing my template
[2014-03-26 17:05:28 -0400] Nukepuppy: i dunno if i would of skipped that whole UI saga who knows where my life would be today :P
[2014-03-26 17:05:32 -0400] kbarry: gives me a URL
[2014-03-26 17:05:34 -0400] Nukepuppy: checksum values
[2014-03-26 17:05:53 -0400] Nukepuppy: i wouldnt bother with the UI in general
[2014-03-26 17:05:59 -0400] Nukepuppy: just see if the checksums match what you think it is
[2014-03-26 17:06:15 -0400] kbarry: I am using windows, and have never tried looking at the check sum of a filer before
[2014-03-26 17:06:16 -0400] Nukepuppy: i still think you have a fundamental issue with some kind of locking
[2014-03-26 17:06:25 -0400] Nukepuppy: you're not using like... berkshelf or nothing i tak eit
[2014-03-26 17:06:43 -0400] kbarry: nope
[2014-03-26 17:07:02 -0400] Nukepuppy: hohum.. do you use ... git ?
[2014-03-26 17:07:18 -0400] Nukepuppy: not sure if 'git bash' comes with checksum or not
[2014-03-26 17:07:25 -0400] Nukepuppy: for windows etc
[2014-03-26 17:09:48 -0400] kbarry: standby
[2014-03-26 17:10:30 -0400] Nukepuppy: i would make some improvements to your workflow /today/ honestly if you want some suggestions i have a pretty hybrid windows setup at home that could be useful
[2014-03-26 17:10:32 -0400] CPS: what's the knife command to set a node's environment?
[2014-03-26 17:10:34 -0400] nkts: hi, why chef_gem is running before package resource tho order is diffrent in recipe
[2014-03-26 17:10:45 -0400] Nukepuppy: CPS : knife node edit nodename
[2014-03-26 17:10:46 -0400] nkts: I have mysql cookbook in my mind
[2014-03-26 17:10:59 -0400] scalp42: CPS, have a look at node flip also
[2014-03-26 17:11:00 -0400] CPS: edit will pop open a json file to edit
[2014-03-26 17:11:08 -0400] scalp42: correct
[2014-03-26 17:11:12 -0400] CPS: i need a command that will just set the environment
[2014-03-26 17:11:19 -0400] scalp42: knife flip
[2014-03-26 17:11:30 -0400] scalp42: https://github.com/jonlives/knife-flip
[2014-03-26 17:11:33 -0400] Nukepuppy:   "chef_environment": "staging",
[2014-03-26 17:12:03 -0400] CPS: anything i can use out of the box?
[2014-03-26 17:12:20 -0400] Nukepuppy: yes knife node edit lol :)
[2014-03-26 17:12:22 -0400] CPS: Nukepuppy: i need to do this without editing json
[2014-03-26 17:12:29 -0400] Nukepuppy: ok .....
[2014-03-26 17:12:31 -0400] Nukepuppy: no matter how you do it
[2014-03-26 17:12:33 -0400] Nukepuppy: it will edit the json :)
[2014-03-26 17:12:35 -0400] Nukepuppy: in the end
[2014-03-26 17:12:39 -0400] CPS: knife node run_list doesn't have this issue
[2014-03-26 17:12:54 -0400] scalp42: knife node flip mynode mynewenv
[2014-03-26 17:12:55 -0400] CPS: i get that
[2014-03-26 17:13:16 -0400] Nukepuppy: you can bootstrap the node again
[2014-03-26 17:13:20 -0400] Nukepuppy: with the env variables if you want
[2014-03-26 17:13:37 -0400] CPS: is there seriously not a command to change a node's environment?
[2014-03-26 17:13:51 -0400] Nukepuppy: yes knife node edit is how you do that :(
[2014-03-26 17:13:53 -0400] jonlives: CPS: that's why I had to write knife-flip in the first place :)
[2014-03-26 17:14:03 -0400] Nukepuppy: the plugin would help save yo utime
[2014-03-26 17:14:24 -0400] CPS: yeah but my ops guys aren't going to like it
[2014-03-26 17:14:28 -0400] Nukepuppy: knife bootstrap yourbox  -E your_env
[2014-03-26 17:14:32 -0400] CPS: they want one command they can run
[2014-03-26 17:14:34 -0400] Nukepuppy: they wont like a lot of things of chef in beginning
[2014-03-26 17:14:37 -0400] scalp42: your ops guy should like it
[2014-03-26 17:14:40 -0400] Nukepuppy: yeah if you wanna bootstrap 1000 nodes
[2014-03-26 17:14:42 -0400] Nukepuppy: you can
[2014-03-26 17:14:45 -0400] jonlives: CPS: once the gem is installed, it is one command :)
[2014-03-26 17:15:01 -0400] dgarstang: hey I'm an ops guy. *squinty eye*
[2014-03-26 17:15:06 -0400] kbarry: well,t he hashes match, but that was after i had done a knife cookbook download [name]
[2014-03-26 17:15:09 -0400] jonlives: in fact if you do "gem install knife-flip && knife node flip foo bar" it's one command ;)
[2014-03-26 17:15:19 -0400] scalp42: ha
[2014-03-26 17:15:25 -0400] Nukepuppy: for ea in `cat list of boxes`; do echo "----- $ea  -----" &&  knife bootstrap -i /my/ss/key $ea -r  'role[linux_base]' -E YOUR_ENV; done
[2014-03-26 17:15:25 -0400] Nukepuppy: :P
[2014-03-26 17:15:31 -0400] dgarstang: can't say I like gems tho.
[2014-03-26 17:15:36 -0400] jonlives: for the record I'm Ops too :p
[2014-03-26 17:15:47 -0400] dgarstang: jonlives: \o/
[2014-03-26 17:15:49 -0400] CPS: bootstrapping a node is a little more involved than switching one config :\
[2014-03-26 17:16:08 -0400] jonlives: dgarstang: well the alternative is to clone it from git and add the source files to ~/.chef/plugins/knife ;)
[2014-03-26 17:16:11 -0400] Nukepuppy: just saying.. if you know the env from inception
[2014-03-26 17:16:12 -0400] Nukepuppy: then thats that
[2014-03-26 17:16:27 -0400] CPS: jonlives: work on getting opscode to pull your code into chef proper
[2014-03-26 17:16:57 -0400] CPS: Nukepuppy: we're in a strange situation where we may not be able to use the bootstrap command in our initial deployments
[2014-03-26 17:17:03 -0400] CPS: blame windows
[2014-03-26 17:17:04 -0400] jonlives: CPS: I think there's actually a plan to add that support to an upcoming knife version iirc
[2014-03-26 17:17:09 -0400] jonlives: not flip, but the same functionality.
[2014-03-26 17:17:21 -0400] jonlives: tho flip also lets you change the environment of all nodes with a particular role
[2014-03-26 17:17:21 -0400] CPS: any documentation to that effect i can send my guys?
[2014-03-26 17:17:29 -0400] jonlives: CPS: lemme see if I can find it
[2014-03-26 17:17:46 -0400] Nukepuppy: CPS how many nodes are you talking about?
[2014-03-26 17:18:06 -0400] CPS: ~600
[2014-03-26 17:18:54 -0400] Nukepuppy: and your knife system cannot reach them?
[2014-03-26 17:19:16 -0400] CPS: knife bootstrap on windows requires winrm to be configured, which we currently don't use
[2014-03-26 17:19:32 -0400] CPS: getting it turned on and configured in time for our deployment may not be doable
[2014-03-26 17:20:00 -0400] Nukepuppy: dunno this might not be stable but could use some of it
[2014-03-26 17:20:01 -0400] Nukepuppy: https://github.com/jonlives/knife-bulkchangeenvironment
[2014-03-26 17:20:17 -0400] Nukepuppy: oh jonlives is in here so
[2014-03-26 17:20:21 -0400] Nukepuppy: he can ellaborate ;p
[2014-03-26 17:20:21 -0400] jonlives: oh haha I forgot I wrote that too - it still works :p
[2014-03-26 17:20:26 -0400] Nukepuppy: there ya go
[2014-03-26 17:20:43 -0400] jonlives: yeah that one takes all nodes in one environment and moves them into another, that'll do it in one command
[2014-03-26 17:20:46 -0400] Nukepuppy: soo you're gonna node create a bunch of nodes that doesnt even have chef on them?
[2014-03-26 17:21:01 -0400] Nukepuppy: and...  then set environment?
[2014-03-26 17:21:35 -0400] CPS: pretty much
[2014-03-26 17:22:43 -0400] jonlives: CPS: if you're using an automated windows install they in theory should be able to drop a startup script on the boxes which will install Chef and register the node with the server
[2014-03-26 17:23:12 -0400] CPS: from what i've been told that functionality exists in theory but doesn't actually work
[2014-03-26 17:23:27 -0400] CPS: it's all a bit outside what i do
[2014-03-26 17:23:40 -0400] jonlives: CPS: it absolutely does work, we build Linux servers the same way - the only difference is that the script will be a batch file instead of bash :)
[2014-03-26 17:24:15 -0400] jonlives: CPS: and there's a windows omnibus installer for Chef client too http://www.getchef.com/chef/install/
[2014-03-26 17:24:26 -0400] CPS: got that
[2014-03-26 17:24:33 -0400] jonlives: which is an MSI, so should be easy to automate
[2014-03-26 17:24:48 -0400] jonlives: after that, it's just generating client.rb and running Chef :)
[2014-03-26 17:25:35 -0400] jonlives: CPS: I'm not familiar with your build process of course, but it's definitely doable.
[2014-03-26 17:26:34 -0400] CPS: yeah like i said, the tools these guys are using I don't understand at all
[2014-03-26 17:26:53 -0400] CPS: they explained what they were going to do and it sounded good but it didn't pan out for some reason
[2014-03-26 17:28:25 -0400] jonlives: CPS: might be worth seeing if they can document the issues they encountered a bit, might be able to help a bit more :)
[2014-03-26 17:30:38 -0400] Nukepuppy: yeah its really hard to help custom workflows with mixed environments
[2014-03-26 17:30:45 -0400] Nukepuppy: specially from outside ;(
[2014-03-26 17:31:33 -0400] CPS: so, unrelated, is there a command to upload /everything/ from a chef workstation to a chef server?
[2014-03-26 17:32:30 -0400] jonlives: CPS: install https://github.com/jkeiser/knife-essentials
[2014-03-26 17:32:36 -0400] jonlives: then you can do knife upload .
[2014-03-26 17:33:30 -0400] CPS: that's core chef, right?
[2014-03-26 17:33:53 -0400] jonlives: joemiller: the guy who wrote it works for Chef if that helps :)
[2014-03-26 17:34:13 -0400] jonlives: it's a rubygem
[2014-03-26 17:34:24 -0400] jonlives: CPS: meant you sorry, no idea why it autocompleted to joemiller
[2014-03-26 17:34:25 -0400] joemiller: wha?
[2014-03-26 17:34:30 -0400] joemiller: oh. heh
[2014-03-26 17:34:31 -0400] jonlives: sorry, irc client fail
[2014-03-26 17:34:47 -0400] CPS: cool, this should work
[2014-03-26 17:52:55 -0400] dgarstang: Berkshelf recurively resolves dependent cookbooks, right?
[2014-03-26 17:55:51 -0400] scalp42: it should be not all the time dgarstang
[2014-03-26 17:55:59 -0400] dgarstang: scalp42: come again?
[2014-03-26 17:56:13 -0400] scalp42: hard to describe but if you have a role cookbook  for example
[2014-03-26 17:56:29 -0400] scalp42: that pulls other wrapper cookbooks
[2014-03-26 17:56:47 -0400] scalp42: the cookbooks called from your wrapper cookbook wont get pulled, we noticed
[2014-03-26 17:57:00 -0400] dgarstang: scalp42: That may be what I am seeing.
[2014-03-26 17:57:01 -0400] scalp42: Best is always to specify the cookbooks in the Berksfile for us
[2014-03-26 17:57:06 -0400] dgarstang: scalp42: Oh yuck
[2014-03-26 17:57:33 -0400] dgarstang: scalp42: base role includes a location cookbook. That all works. However, I have an app wrapper cookbook that includes the base (which includes the location) and it fails
[2014-03-26 17:57:44 -0400] dgarstang: sound about right?
[2014-03-26 17:57:47 -0400] scalp42: it doesnt pull the location ?
[2014-03-26 17:57:59 -0400] scalp42: yeah I have this issue
[2014-03-26 17:58:00 -0400] dgarstang: scalp42: the base role does... the cookbook that wraps the base role does not
[2014-03-26 17:58:06 -0400] scalp42: right
[2014-03-26 17:58:13 -0400] scalp42: I believe its fixed in berkshelf 3
[2014-03-26 17:58:19 -0400] scalp42: but im talking out of my ass so please double check
[2014-03-26 17:58:21 -0400] dgarstang: ie if the base role has it (and I tested it works), then the wrapper on top of that by defintiion should also get the location
[2014-03-26 17:58:28 -0400] scalp42: I have some issues open related to this
[2014-03-26 17:58:30 -0400] dgarstang: Ok. Bugger.
[2014-03-26 17:58:37 -0400] dgarstang: at least I'm not going crazy
[2014-03-26 17:58:40 -0400] scalp42: nope
[2014-03-26 17:58:43 -0400] dgarstang: Woo!
[2014-03-26 17:58:51 -0400] dgarstang: for now.. add it and note it
[2014-03-26 17:58:58 -0400] scalp42: in that case your best bet is to put the location cookbook in that base role
[2014-03-26 17:59:27 -0400] dgarstang: scalp42: yah. i wonder why the other ones included by the base role work? The rules seem arbitrary
[2014-03-26 17:59:47 -0400] scalp42: we've seen some funky stuff with 2.0.11 (if my memory is right)
[2014-03-26 17:59:55 -0400] scalp42: should try berkshelf3 maybe fixes your issues
[2014-03-26 17:59:56 -0400] dgarstang: scalp42: Yikes. Ok.
[2014-03-26 18:00:29 -0400] dgarstang: scalp42: how would you install that? the docs just say 'gem install berkshelf' which gets you 2
[2014-03-26 18:00:37 -0400] scalp42: correct
[2014-03-26 18:00:48 -0400] scalp42: you gonna need to use the git source in a Gemfile
[2014-03-26 18:00:57 -0400] scalp42: but maybe someone else can chime in
[2014-03-26 18:01:11 -0400] dgarstang: scalp42: ok, for now I'll add it. Thanks
[2014-03-26 18:01:52 -0400] scalp42: thats my Gemfile if it helps https://gist.github.com/scalp42/41ac5390d9b8ac1209ed
[2014-03-26 18:02:05 -0400] scalp42: at the bottom you can see Berkshelf3
[2014-03-26 18:02:09 -0400] scalp42: might need ridley from sources as well
[2014-03-26 18:02:42 -0400] dgarstang: scalp42: too hard basket, especially on a Mac. :)
[2014-03-26 18:03:17 -0400] grepory: morning.
[2014-03-26 18:03:26 -0400] doomviking: gem install berkshelf --pre gets you 3.0.0.beta7, currently
[2014-03-26 18:03:42 -0400] doomviking: if you feel bleedy
[2014-03-26 18:03:45 -0400] scalp42: I believe you need to change your Berksfile as well
[2014-03-26 18:03:51 -0400] scalp42: so warning dragons ahead
[2014-03-26 18:04:02 -0400] dgarstang: doomviking: spanks
[2014-03-26 18:04:13 -0400] doomviking: np
[2014-03-26 18:32:11 -0400] shlant: if I change the node IP during a chef run, does ohai "reload" not update node['ipaddress']? or is my only option to run chef again?
[2014-03-26 18:32:27 -0400] shlant: is ohai "reload" still broken?
[2014-03-26 18:40:48 -0400] Nukepuppy: hmm anyone have any drawbacks of using notify vs subscribe in a service ?
[2014-03-26 18:41:00 -0400] Nukepuppy: as in subscribe to templates from service... vs notify the service from templates?
[2014-03-26 18:44:45 -0400] Embalmed: hi guys i'm having an issue trying to issue a non standard command to an init script
[2014-03-26 18:44:48 -0400] anthroprose: Nukepuppy: push/pull, it all depends on whether you control the service you want to key off
[2014-03-26 18:45:03 -0400] anthroprose: like I subscribe to community resources, and notify when I do them myself
[2014-03-26 18:46:00 -0400] Embalmed: http://pastebin.com/yrQNEJ2F
[2014-03-26 18:47:20 -0400] anthroprose: Embalmed: you are mixing json and ruby syntax
[2014-03-26 18:47:31 -0400] Embalmed: if i do  :reconfig => true
[2014-03-26 18:47:34 -0400] Embalmed: same thing happens
[2014-03-26 18:48:13 -0400] josephholsten: anyone played with using stats_hero output from oschef? can you confirm it requires estatsd, does not support etsy statsd?
[2014-03-26 18:48:35 -0400] anthroprose: Embalmed: so its probably the resource definition
[2014-03-26 18:50:01 -0400] anthroprose: josephholsten: most statsD implementations are line protocol compatible
[2014-03-26 18:50:15 -0400] anthroprose: I would however say that there are reasons for not using etsy's statsD
[2014-03-26 18:50:19 -0400] anthroprose: dosnt scale worth crap
[2014-03-26 18:50:58 -0400] josephholsten: anthroprose: it looks like stats_hero only sends metrics of type "m" and "h", neither of which are supported by etsty statsd
[2014-03-26 18:51:50 -0400] anthroprose: josephholsten: ah.... then I very clearly mispoke
[2014-03-26 18:51:57 -0400] anthroprose: there are probably reasons for all of this due to scale
[2014-03-26 18:52:18 -0400] anthroprose: stats aggregation can get ugly, I am having to pre-aggregate *before* sending to statsD currently
[2014-03-26 18:52:19 -0400] josephholsten: I'm personally a fan of statsite, but it's easier to explain why we're using etsy than another statsd, and I've got bigger fish to fry
[2014-03-26 18:52:35 -0400] anthroprose: sure
[2014-03-26 18:52:54 -0400] anthroprose: the node.js running statsD is currently the largest resource user in my ops arch
[2014-03-26 18:53:13 -0400] anthroprose: not even elasticsearch or logstash or graphite writing points to disk comes close
[2014-03-26 18:54:03 -0400] Nukepuppy: anthroprose in this case it is what it sounds like i have some template files that may change.. but its causing some very strange behavior
[2014-03-26 18:54:12 -0400] Nukepuppy: mostly cause tomcat sucks balls and needs a restart for everything
[2014-03-26 18:54:22 -0400] Embalmed: anthroprose: i'm not sure how to check that or how i would fix it
[2014-03-26 18:55:11 -0400] anthroprose: Nukepuppy: I agree with your tomcat statement yes
[2014-03-26 18:58:37 -0400] josephholsten: sfalcon: could you confirm stats_hero only supports estatsd (non-etsy), and that estatsd is not included in oschef omnibus server?
[2014-03-26 18:58:38 -0400] anthroprose: Embalmed: its the way you are using neteng, whatever that is
[2014-03-26 18:58:54 -0400] Embalmed: my cookbook
[2014-03-26 18:59:11 -0400] Embalmed: but i don't have any resource files
[2014-03-26 18:59:13 -0400] Embalmed: its just using defaults
[2014-03-26 18:59:16 -0400] anthroprose: yeah, so you need to make it support the reconfig option
[2014-03-26 18:59:53 -0400] anthroprose: actions :create, :remove, :reconfig
[2014-03-26 18:59:54 -0400] anthroprose: eh?
[2014-03-26 19:00:36 -0400] sfalcon: josephholsten: yes. stats_hero works with our estatsd service which makes a few changes to the statsd protocol in terms of message format (I'd have to go look to recall the details)
[2014-03-26 19:01:08 -0400] josephholsten: kk. (the diff looks like it's the |m and |h metric types)
[2014-03-26 19:01:33 -0400] josephholsten: is there a public cookbook for setting up an estatsd server?
[2014-03-26 19:02:06 -0400] josephholsten: google indicates negative
[2014-03-26 19:02:09 -0400] Nukepuppy: anyone know why in 'service' even if you set supports status=>false   it always sets it to true ? :P
[2014-03-26 19:02:21 -0400] Nukepuppy: i know why cause it freaking does it.. but not sure WHY it does it
[2014-03-26 19:03:00 -0400] josephholsten: Nukepuppy: sounds like a bug
[2014-03-26 19:03:36 -0400] josephholsten: what version chef-client are you using, and what provider (upstart, init, &c) is it using?
[2014-03-26 19:06:30 -0400] sfalcon: josephholsten: that sounds right or at least part of it. Hmm, I doubt it on the cookbook. Let me dig around, I'd be happy to share what we do if that would be helpful.
[2014-03-26 19:06:55 -0400] Nukepuppy: joseph it is: https://tickets.opscode.com/browse/CHEF-2345
[2014-03-26 19:06:57 -0400] Nukepuppy: but there is no fix :P
[2014-03-26 19:07:07 -0400] Nukepuppy: its 2 - 3 yrs old
[2014-03-26 19:07:09 -0400] dgarstang: I am having major issues with a wrapper cookbook replacing a role. :(
[2014-03-26 19:07:44 -0400] dgarstang: q!
[2014-03-26 19:08:22 -0400] dgarstang: ie, attributes defined in the cookbook are not working when wrapped in a wrapper. Why would this happen?
[2014-03-26 19:10:31 -0400] kbarry: I  "thought
[2014-03-26 19:10:44 -0400] kbarry: the client.rb was where the node name was kept
[2014-03-26 19:10:54 -0400] kbarry: but mine doesnt have an entry for the node name
[2014-03-26 19:11:28 -0400] josephholsten: dgarstang: "not working" is perhaps the least useful phrase ever uttered in a bug description
[2014-03-26 19:11:46 -0400] josephholsten: kbarry: node_name defaults to the host's fqdn
[2014-03-26 19:11:49 -0400] dgarstang: josephholsten: most likely. attributes are not being set
[2014-03-26 19:12:15 -0400] kbarry: we are registering them and passing in a -N
[2014-03-26 19:13:21 -0400] josephholsten: kbarry: you're passing -N to chef-client? I don't understand your question
[2014-03-26 19:13:22 -0400] dgarstang: josephholsten: I put a puts statement in the wrapped cookbook. It executes. so, it's setting the attributes at some point
[2014-03-26 19:13:24 -0400] kbarry: on first boot, we are manually installing chef-client, and passing it a -N
[2014-03-26 19:13:40 -0400] kbarry: Can';t I specifically set what the node name is going to be in the client.rb?
[2014-03-26 19:13:54 -0400] kbarry: standby
[2014-03-26 19:14:10 -0400] dgarstang: ok now I'm getting annoyed. it just worked. random behaviour
[2014-03-26 19:14:46 -0400] josephholsten: kbarry: are you using the chef-client cookbook?
[2014-03-26 19:15:05 -0400] kbarry: yum install /tmp/install.sh.30400/chef-11.8.2-1.el6.x86_64.rpm -ychef-client -c /etc/chef/client.rb -E $chef_env -N "$host_name.domain.net"
[2014-03-26 19:15:50 -0400] kbarry: this is registering the new node with the chef server with the name "example01.domain.net"
[2014-03-26 19:16:12 -0400] josephholsten: yeah, if you don't template /etc/chef/client.rb, nothing's going to overwrite it
[2014-03-26 19:16:32 -0400] kbarry: but when chef-client is run, i'm getting an error saying it failed to authenticate as "example01" (not "example01.domain.net" as I would expect it to try to authenticate)
[2014-03-26 19:16:40 -0400] kbarry: Alright.
[2014-03-26 19:16:43 -0400] kbarry: Thats what I thought.
[2014-03-26 19:17:23 -0400] josephholsten: kbarry: https://github.com/opscode-cookbooks/chef-client#config is very useful for this purpose
[2014-03-26 19:20:35 -0400] Kavi: Greetings! Can somone please help, how to provision a server including Linux Installation
[2014-03-26 19:21:16 -0400] Corey: Generally you want to start with something pxeboot based, like Cobbler or Foreman or whatnot-- once the system is up, then you hand it off to a config management system like Chef.
[2014-03-26 19:23:53 -0400] dgarstang: if I have a wrapper cookbook, I should ONLY need include_recipe on the ONE cookbook right, none of the cookbooks the wrappe one includes?
[2014-03-26 19:24:32 -0400] noodle: ********* Anyone using the chef `users` cookbook been able to add a user to the `www-data` group?
[2014-03-26 19:25:29 -0400] dgarstang: The chef include_recipe seems totally and completely arbitrary to em
[2014-03-26 19:26:53 -0400] josephholsten: Kavi: chef does not handle server provisioning. http://theforeman.org and http://continuuity.github.io/loom/ are tools that do and work with chef for post-provisioning configuration management
[2014-03-26 19:27:02 -0400] leocassarani: hi all, so if I wanted to set a node's attribute to the response of an HTTP request to another host would that be possible? would I just use Net::HTTP in my recipes to make the API call, then set node['blah'] to the response?
[2014-03-26 19:27:03 -0400] programmerq: dgarstang: you only need to include_recipe on things you explicitly care about
[2014-03-26 19:27:20 -0400] leocassarani: (I need to figure out the revision I want to check out for a git repo on disk)
[2014-03-26 19:27:22 -0400] josephholsten: dgarstang: include_recipe is totally orthogonal to attribute loading
[2014-03-26 19:27:25 -0400] sarkis: i setup a template with variables({ :foo => node[:bar] }) then in the template.erb... do i call it with <%= foo %> or <%= @foo %>?
[2014-03-26 19:27:37 -0400] dgarstang: programmerq: Ok, the app cookbook. It includes a recipe called bc-location. However, the wrapper fails if I don't also put an include_recipe "bc-location" in it
[2014-03-26 19:27:51 -0400] programmerq: dgarstang: that is indeed strange
[2014-03-26 19:28:02 -0400] dgarstang: programmerq: it is indeed what I am seeing
[2014-03-26 19:28:03 -0400] programmerq: My understanding is that it should work
[2014-03-26 19:28:09 -0400] dgarstang: programmerq: *sigh*
[2014-03-26 19:28:10 -0400] josephholsten: sarkis: <% @foo %>
[2014-03-26 19:28:19 -0400] sarkis: josephholsten: what is the @ for?
[2014-03-26 19:28:27 -0400] programmerq: do you have a gist or something that you can show us, along with output?
[2014-03-26 19:28:40 -0400] dgarstang: programmerq: sure, lemme put one together and sanitise
[2014-03-26 19:28:52 -0400] programmerq: k
[2014-03-26 19:28:54 -0400] josephholsten: the @ indicates that the variable is an instance variable, not a local variable or method. It's a nuance of ERB
[2014-03-26 19:29:45 -0400] Kavi: thank you joseph, appreciate your response.
[2014-03-26 19:30:14 -0400] sarkis: i see
[2014-03-26 19:30:29 -0400] josephholsten: Formally, the template creates an object with instance variables from your variables parameter, then invokes your erb template in the context of that object
[2014-03-26 19:30:48 -0400] icarus_: hello all
[2014-03-26 19:30:51 -0400] josephholsten: may you never, ever need to actually understand that level of detail ;-)
[2014-03-26 19:31:08 -0400] icarus_: im having some issues with a cookbook cloning code from a non-master branch on github
[2014-03-26 19:31:21 -0400] noodle: leocassarani, you should be able to do node.override['cookbook]['attribute'] = response_of_call
[2014-03-26 19:31:28 -0400] noodle: in a recipe
[2014-03-26 19:31:35 -0400] leocassarani: noodle: excellent, thank you
[2014-03-26 19:31:37 -0400] josephholsten: leocassarani: that use case sounds unique. what are you trying to do?
[2014-03-26 19:31:37 -0400] icarus_: it has worked for months fine pulling from master branch, but ive isolated the issue to it not accepting non-master branch
[2014-03-26 19:31:55 -0400] leocassarani: josephholsten: making sure all my hosts are cloning the same revision from the repo, using chef-solo (so no search lol)
[2014-03-26 19:32:04 -0400] leocassarani: they can make an HTTP call to find out the revision they're all running, so that's fine
[2014-03-26 19:32:13 -0400] dgarstang: programmerq: here tis. http://pastebin.com/KaVzcnU1
[2014-03-26 19:32:21 -0400] scalp42: why dont you trust chef for this leocassarani ?
[2014-03-26 19:32:24 -0400] scalp42: im missing something
[2014-03-26 19:32:27 -0400] leocassarani: scalp42:  huh?
[2014-03-26 19:32:31 -0400] chris6131: Is it supported to have multiple not_if's on the same resource? (Chef 10)
[2014-03-26 19:32:33 -0400] scalp42: if you specify the ref wanted?
[2014-03-26 19:32:35 -0400] josephholsten: ah, yeah I'd use open-uri and jam the response into that attribute
[2014-03-26 19:32:38 -0400] leocassarani: scalp42: it's constantly changing :)
[2014-03-26 19:32:46 -0400] leocassarani: josephholsten: my thoughts exactly, thank you!
[2014-03-26 19:32:46 -0400] scalp42: interesting
[2014-03-26 19:32:55 -0400] leocassarani: not unusual though, we keep deploying those pesky apps ;)
[2014-03-26 19:33:14 -0400] dgarstang: programmerq: you can clearly see that the wrapped cookbook, bc-foocom-downloader explicitly has bc-location in the Berksfile, the metadata and the recipe. Ugh, Now I'm confused.
[2014-03-26 19:33:26 -0400] dgarstang: programmerq: There is so much foo on top of foo. It's hard to know whats going on
[2014-03-26 19:33:38 -0400] scalp42: I have something close thats just a small app that store body and assign it to an instance_id
[2014-03-26 19:33:42 -0400] scalp42: so you can keep track and what not
[2014-03-26 19:33:50 -0400] scalp42: curb or open-uri same idea
[2014-03-26 19:33:58 -0400] josephholsten: leocassarani: you using etcd? or an artifact repo? we used to do that for our java deploys (recently switched to deb packaging)
[2014-03-26 19:34:34 -0400] leocassarani: leocassarani: we're not actually, we have our own small service that runs on all machines and reports what revisions are checked out for a given set of repos
[2014-03-26 19:34:39 -0400] leocassarani: err I meant josephholsten: ^^
[2014-03-26 19:34:42 -0400] scalp42: inception
[2014-03-26 19:34:43 -0400] scalp42: :D
[2014-03-26 19:34:45 -0400] leocassarani: yup
[2014-03-26 19:34:52 -0400] josephholsten: josephholsten: no worries
[2014-03-26 19:34:54 -0400] leocassarani: heh
[2014-03-26 19:34:58 -0400] josephholsten: ;-)
[2014-03-26 19:34:59 -0400] scalp42: scalp42 all good
[2014-03-26 19:34:59 -0400] dgarstang: programmerq: The wrapped cookbook, bc-foocom-downloader doesn't explicitly include_recipe location, but bc-apt does and bc-foocom-downloader works.
[2014-03-26 19:35:11 -0400] leocassarani: but yeah, it's a common problem if you're using chef-solo i imagine
[2014-03-26 19:35:28 -0400] programmerq: dgarstang: I think you might need include_attributes
[2014-03-26 19:35:34 -0400] scalp42: can you do like GET http://yourservice/hostname_of_the_box
[2014-03-26 19:35:37 -0400] programmerq: sorry, include_attribute
[2014-03-26 19:35:40 -0400] scalp42: and get back a hash?
[2014-03-26 19:35:45 -0400] dgarstang: programmerq: googling...
[2014-03-26 19:35:55 -0400] programmerq: http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2014-03-26 19:36:20 -0400] programmerq: my expertise on include_attribute is pretty thin
[2014-03-26 19:36:24 -0400] josephholsten: leocassarani: I'm currently working on a similar service that would support chef-search, serf, etcd & zk for backend storage.
[2014-03-26 19:36:25 -0400] sarkis: ok so in roles, if i define default_attributes.. how would i access that in the cookbook / recipe?
[2014-03-26 19:36:30 -0400] programmerq: but my experience tells me this error may be helped with it.
[2014-03-26 19:36:34 -0400] leocassarani: scalp42: basically, yes
[2014-03-26 19:36:45 -0400] sarkis: i was trying node[:var] and node[:default][:var/
[2014-03-26 19:36:46 -0400] leocassarani: josephholsten: sounds pretty handy
[2014-03-26 19:36:51 -0400] leocassarani: josephholsten: have you got a github link or something?
[2014-03-26 19:36:55 -0400] josephholsten: but for use in all service discovery as well as artifact stuff
[2014-03-26 19:37:02 -0400] scalp42: gotcha im using Redis simple set/get but def would need something better
[2014-03-26 19:37:04 -0400] dgarstang: programmerq: hang on... are you saying that attributes from a wrapped cookbook aren't available to the wraper!?
[2014-03-26 19:37:22 -0400] programmerq: I *think* that's what it is-- unless you do include_attribute
[2014-03-26 19:37:27 -0400] josephholsten: leocassarani: no, it's not ready yet. I'm trying to get it ready for release at the austin devops days
[2014-03-26 19:37:30 -0400] dgarstang: programmerq: holy smoke
[2014-03-26 19:37:34 -0400] programmerq: I had a similar problem a few months ago, and I think that's what did it
[2014-03-26 19:37:40 -0400] programmerq: I never had time to go back and understand more
[2014-03-26 19:37:47 -0400] leocassarani: josephholsten: look forward to seeing it, what language is it written in?
[2014-03-26 19:37:52 -0400] dgarstang: programmerq: i can't understand why this hasn't been seen before. This is so arbitrary. :(
[2014-03-26 19:37:53 -0400] programmerq: maybe someone who knows better could step in?
[2014-03-26 19:38:03 -0400] programmerq: dgarstang: yeah, I thought it was weird too
[2014-03-26 19:38:12 -0400] dgarstang: This isn't the first time I've wrapped a cookbook
[2014-03-26 19:38:22 -0400] programmerq: that was my thought too
[2014-03-26 19:38:24 -0400] programmerq: see if it helps
[2014-03-26 19:38:28 -0400] programmerq: I could be wrong still. :)
[2014-03-26 19:38:52 -0400] programmerq: I should resurrect my blog and post about stuff like this I run into
[2014-03-26 19:39:24 -0400] dgarstang: programmerq: where would the include_attribute go?
[2014-03-26 19:39:34 -0400] programmerq: before you try to reference it
[2014-03-26 19:39:42 -0400] programmerq: I think I put mine up by the include_recipe
[2014-03-26 19:40:19 -0400] dgarstang: programmerq: but If I have to put anything in the wrapper cookbook =, something is wrong. If I use include_recipe "bc-location" (where the attributes are set) it works.
[2014-03-26 19:40:35 -0400] josephholsten: leocassarani: I'm spiking the chef one in ruby, and the etcd in go. final ones will probably all be go for ease of deployment.
[2014-03-26 19:40:44 -0400] leocassarani: yup, our internal service is in go
[2014-03-26 19:40:48 -0400] icarus_: Has anyone else experienced problems with recipes not cloning non-master branches from github?
[2014-03-26 19:40:50 -0400] programmerq: dgarstang: I may not have read your pastebin as closely as I should have then.
[2014-03-26 19:41:02 -0400] dgarstang: programmerq: it's still there. :)
[2014-03-26 19:41:20 -0400] dgarstang: maybe I should just stick with roles.
[2014-03-26 19:41:47 -0400] dgarstang: chef with replacing roles with a wrapper cookbook == fail
[2014-03-26 19:42:02 -0400] someara: dude
[2014-03-26 19:42:27 -0400] dgarstang: which means the practice of creating a wrapper cookbook to integration test a cookbook as suggested to me here yesterday is also a no go
[2014-03-26 19:42:49 -0400] programmerq: dgarstang: wrapper cookbooks are still better, though they do have their nuances
[2014-03-26 19:42:53 -0400] programmerq: I'm looking over the paste some more.
[2014-03-26 19:43:00 -0400] dgarstang: programmerq: tanx
[2014-03-26 19:43:03 -0400] someara: attributes are available globally
[2014-03-26 19:43:22 -0400] programmerq: someara: that's what I thought too. :)
[2014-03-26 19:43:45 -0400] dgarstang: programmerq: every cookbook up to the wrapper tests with vagrant fine. That should just mean that all the wrapper has to do is include_recipe the wrapee, but no
[2014-03-26 19:44:19 -0400] dgarstang: programmerq: but it seems that somehow layering another cookbook on top makes attributes set at a lower level... oohhh...
[2014-03-26 19:44:38 -0400] programmerq: that makes sense
[2014-03-26 19:44:56 -0400] programmerq: did you find a doc somewhere, or is it just a realization?
[2014-03-26 19:45:54 -0400] dgarstang: programmerq: I read something in http://www.getchef.com/blog/2013/11/19/chef-roles-arent-evil/ yesterday. hang on
[2014-03-26 19:46:29 -0400] sarkis: https://gist.github.com/sarkis/35c0185df2156ebd442a - can someone help me figure out what im doing wrong?
[2014-03-26 19:46:34 -0400] dgarstang: programmerq: nope, that wasn't it
[2014-03-26 19:48:36 -0400] dgarstang: Wrapper cookbooks might be better, but the fact that berkshelf doesn't recurse dependancies, and now this sort of thing where a wrapper cookbook forgets about stuff further down the stack, concerns me
[2014-03-26 19:48:42 -0400] someara: a lot of cookbooks aren't written in a way that lend themselves to the application cookbook pattern
[2014-03-26 19:48:48 -0400] someara: aka wrappers
[2014-03-26 19:49:05 -0400] someara: specifically, anything that "calculates" node attributes typically gets goofy
[2014-03-26 19:49:13 -0400] dgarstang: someara: We wrote the ones from the one that sets the attributes, and up
[2014-03-26 19:49:19 -0400] someara: and berkshelf does indeed recurse deps
[2014-03-26 19:49:24 -0400] someara: thats the whole point
[2014-03-26 19:49:47 -0400] scalp42: well up to a certain point someara
[2014-03-26 19:49:48 -0400] dgarstang: someara: I don't think so. look back earlier in this channel. other concurred with me. said i needed to get berkshelf 3 to fix
[2014-03-26 19:50:04 -0400] programmerq: yeah, berkshelf 3 fixes dep errors
[2014-03-26 19:50:09 -0400] programmerq: too bad it's kind of in limbo
[2014-03-26 19:50:40 -0400] programmerq: I've had the most luck with beta5 so far
[2014-03-26 19:50:52 -0400] scalp42: I need to give a try again
[2014-03-26 19:50:55 -0400] programmerq: beta7 gave me some problem, but I don't remember what specifically
[2014-03-26 19:51:07 -0400] dgarstang: someara: Are you saying that a cookbook that calculates values gets goofy with a wrapper cookbook?
[2014-03-26 19:51:18 -0400] scalp42: stoppers were: https://github.com/berkshelf/berkshelf/pull/907 and https://github.com/berkshelf/berkshelf/pull/906
[2014-03-26 19:51:36 -0400] someara: because of the way this works: http://docs.opscode.com/essentials_nodes_chef_run.html
[2014-03-26 19:51:52 -0400] someara: all cookbooks are loaded, and all attributes files are loaded
[2014-03-26 19:51:56 -0400] scalp42: https://github.com/berkshelf/berkshelf/pull/1058 should take care of these nested dependencies I assume
[2014-03-26 19:52:04 -0400] someara: THEN the recipes compile, and attributes get set along the way
[2014-03-26 19:52:25 -0400] dgarstang: someara: that sort of makes sense... but... the cookbook that calcs the values works when wrapped once... it's when its wrapped twice that it ails
[2014-03-26 19:52:38 -0400] someara: which make for some unintuitive outcomes
[2014-03-26 19:53:06 -0400] dgarstang: someara: ie bc-location -> bc-role-base -> bc-role-downloader. Works up to role-base. it's role-downloader that barfs
[2014-03-26 19:53:38 -0400] someara: role-downloaders attributes dont get set?
[2014-03-26 19:53:42 -0400] dgarstang: (bc-location does the calcs)
[2014-03-26 19:54:21 -0400] dgarstang: someara: values that bc-location calculates fail when I run the bc-role-downloader cookbook, but work with the bc-role-base cookbook
[2014-03-26 19:54:39 -0400] dgarstang: someara: so it works for the first wrapper, but not the 2nd wrapper
[2014-03-26 19:54:42 -0400] someara: I'd expect the attributes in bc-downloader to "win" because they're the last ones encoutered during the compilation phase, and the resources in bc-location to pick those up
[2014-03-26 19:55:07 -0400] someara: if you want different setting for different resources, namespace them
[2014-03-26 19:55:09 -0400] dgarstang: someara: there are no attributes set in bc-downloader. it's just a wrapper
[2014-03-26 19:55:10 -0400] sarkis: josephholsten: am i doing the resource variables right? https://gist.github.com/sarkis/35c0185df2156ebd442a
[2014-03-26 19:55:27 -0400] sarkis: josephholsten: i tried without [:default] it just got me blank values :(
[2014-03-26 19:56:20 -0400] josephholsten: um, it really should be node[:redis][:host]
[2014-03-26 19:56:41 -0400] josephholsten: you apparently have very fancy magic on your hands
[2014-03-26 20:00:20 -0400] dgarstang: *sigh*
[2014-03-26 20:01:06 -0400] programmerq: dgarstang: you have a very good problem
[2014-03-26 20:01:34 -0400] dgarstang: programmerq: Hows that good?
[2014-03-26 20:01:47 -0400] programmerq: it's good because it's interesting
[2014-03-26 20:01:56 -0400] dgarstang: programmerq: not when you gotta get stuff done
[2014-03-26 20:02:00 -0400] programmerq: agreed
[2014-03-26 20:02:24 -0400] programmerq: do you have any contracts with opscode? maybe get one of their techs to take a look?
[2014-03-26 20:02:32 -0400] programmerq: or maybe this might be better on the mailing list?
[2014-03-26 20:02:34 -0400] dgarstang: programmerq: omg I wish
[2014-03-26 20:02:54 -0400] dgarstang: programmerq: yah maybe. prolly piss coderanger off tho for asking the same question in two places
[2014-03-26 20:02:54 -0400] Nukepuppy: im having a hard time even following what the problem IS
[2014-03-26 20:03:01 -0400] Nukepuppy: setting attributes too many levels down?
[2014-03-26 20:03:34 -0400] programmerq: Nukepuppy: cookbook C has some attributes. cookbook B includes C. This works. the problem is
[2014-03-26 20:03:35 -0400] dgarstang: Nukepuppy: attributes set up a cookbook available when wrapped once, but not twice
[2014-03-26 20:03:51 -0400] programmerq: that when you have cookbook A include cookbook B, then C fails to find the attributes (thit it sets itself)
[2014-03-26 20:03:52 -0400] Nukepuppy: i wrap plenty cookbooks twice o.O
[2014-03-26 20:04:20 -0400] Nukepuppy: i saw an issue yesterday where someone from devel here forgot to include the metadata entry to depend on it
[2014-03-26 20:04:34 -0400] Nukepuppy: not sure how it was working but the attributes were empty until metadata was properly setup
[2014-03-26 20:04:47 -0400] Nukepuppy: was getting [] before that
[2014-03-26 20:04:53 -0400] dgarstang: can't find the damn pastebin
[2014-03-26 20:05:02 -0400] Nukepuppy: but still ive easily wrapped cookbooks twice
[2014-03-26 20:05:05 -0400] dgarstang: Nukepuppy: why would it needed in metadata?
[2014-03-26 20:05:15 -0400] Nukepuppy: so it can apparently pass attribute data correctly :)
[2014-03-26 20:05:24 -0400] Nukepuppy: if it depends on it.. why wouldnt it need it
[2014-03-26 20:05:36 -0400] Nukepuppy: attribute info would be.. meta.. data.. anyways no?
[2014-03-26 20:05:38 -0400] programmerq: Nukepuppy: currently A is depending on B in metadata
[2014-03-26 20:05:42 -0400] programmerq: and B on C
[2014-03-26 20:05:42 -0400] Nukepuppy: are you saying you're NOT including..
[2014-03-26 20:05:43 -0400] dgarstang: Nukepuppy: because the included cookbook depends on it, and IT has it in it's metadata
[2014-03-26 20:05:57 -0400] Nukepuppy: sure just saying ive seen it happen
[2014-03-26 20:05:59 -0400] sarkis: josephholsten: so that looks coreect then? should be in default_attributes?
[2014-03-26 20:05:59 -0400] programmerq: so, he's not including C in A
[2014-03-26 20:06:06 -0400] dgarstang: programmerq: right
[2014-03-26 20:06:24 -0400] programmerq: because he shouldn't need to care what B does and what B's dependencies are
[2014-03-26 20:06:29 -0400] dgarstang: C should not need to reference A directly at ALL
[2014-03-26 20:06:35 -0400] dgarstang: right
[2014-03-26 20:06:46 -0400] Nukepuppy: orig cookbook...  first wrap includes orig in meta i hope...   2nd wrap doesn't include A because it includes first wrapper and it depends on meta there
[2014-03-26 20:06:53 -0400] Nukepuppy: sure but..
[2014-03-26 20:06:55 -0400] Nukepuppy: its worth a simple test
[2014-03-26 20:06:59 -0400] Nukepuppy: add it to metadata..
[2014-03-26 20:07:06 -0400] Nukepuppy: writa a log entry to print the attribute
[2014-03-26 20:07:07 -0400] programmerq: indeed worth a test
[2014-03-26 20:07:09 -0400] Nukepuppy: see what happens
[2014-03-26 20:07:14 -0400] dgarstang: Nukepuppy: it works when I add an include_recipe "bc-location" to the recipe...
[2014-03-26 20:07:23 -0400] dgarstang: did not touch metadata
[2014-03-26 20:07:48 -0400] josephholsten: sarkis: default_attributes should be fine, unless you've got explicitly set or override node attributes
[2014-03-26 20:07:48 -0400] dgarstang: and I clearned out my berkshelf directory before hand...
[2014-03-26 20:08:11 -0400] Nukepuppy: something like      log "XXXXXXXXXXXXXXXXXXXXXXXXXXX SOME_ATTRIB=#{node['some_attrib']}"
[2014-03-26 20:08:25 -0400] Nukepuppy: soo you're fixed?
[2014-03-26 20:08:27 -0400] Nukepuppy: or what?
[2014-03-26 20:08:31 -0400] dgarstang: Nukepuppy: that won't help. log is pretty useless when chef barfs with undefined attribute errors
[2014-03-26 20:08:42 -0400] dgarstang: (unlike every other programming language since the dawn of time does)
[2014-03-26 20:08:49 -0400] Nukepuppy: heh
[2014-03-26 20:09:02 -0400] Nukepuppy: i can guarantee you something simple is wrong somewhere and it isn't chef/ruby's fault ;p
[2014-03-26 20:09:12 -0400] dgarstang: Nukepuppy: seriously. that's painful. oh, attribute not set? Sure, I'll use a log statement to debug....bzzzt, no you can't
[2014-03-26 20:09:35 -0400] sarkis: josephholsten: so weird, just changed it back to node[:redis][:host]... template is spitting out nothing... i am outputting in template like so <% @redis_host %>
[2014-03-26 20:09:45 -0400] josephholsten: dgarstang: my standard sledgehammer is `fail "Is this what I want? #{foo}"`
[2014-03-26 20:09:48 -0400] sarkis: does it matter if it's <%= <% or <%-
[2014-03-26 20:10:17 -0400] josephholsten: oh sonofa
[2014-03-26 20:10:21 -0400] josephholsten: yes
[2014-03-26 20:10:26 -0400] dgarstang: Nukepuppy: it has to be REAL simple.... because cookbook B tests ok. Cookbook C is super simple and just includes cookbook B and fails because something included by B is not set
[2014-03-26 20:10:27 -0400] josephholsten: it has to be <%=
[2014-03-26 20:10:29 -0400] sarkis: ah
[2014-03-26 20:10:47 -0400] sarkis: stupid erb
[2014-03-26 20:11:14 -0400] dgarstang: programmerq: thanks for the eyeballage. Will post to mailing list
[2014-03-26 20:11:19 -0400] Nukepuppy: did you .. try.. meta..data.. entry..?
[2014-03-26 20:11:38 -0400] Nukepuppy: its probably simplest test you can do
[2014-03-26 20:11:53 -0400] dgarstang: Nukepuppy: No. fine. I tested with include_recipe. I'll try that too
[2014-03-26 20:11:55 -0400] josephholsten: I'll take erb's stupid over autoconf m4 any day
[2014-03-26 20:12:50 -0400] Nukepuppy: dgarstang: curious what DOES your metadata looklike?
[2014-03-26 20:13:34 -0400] dgarstang: Nukepuppy: http://pastebin.com/sixtNFSy
[2014-03-26 20:15:37 -0400] Nukepuppy: hmm
[2014-03-26 20:15:44 -0400] Nukepuppy: i thought this would be cookbook C?
[2014-03-26 20:15:52 -0400] Nukepuppy: why is cookbook C depending on cookbook C?
[2014-03-26 20:15:52 -0400] dgarstang: Nukepuppy: it is
[2014-03-26 20:16:00 -0400] Nukepuppy: i was saying cookbook C should add dependson A for a test
[2014-03-26 20:16:13 -0400] dgarstang: Nukepuppy: how do you see C->C ?
[2014-03-26 20:16:17 -0400] Nukepuppy: name             'bc-role-downloader'
[2014-03-26 20:16:23 -0400] Nukepuppy: ooh foo-downloader
[2014-03-26 20:16:26 -0400] Nukepuppy: blah weirdo names
[2014-03-26 20:16:39 -0400] Nukepuppy: so guessing foo = 1?
[2014-03-26 20:16:41 -0400] Nukepuppy: err A?
[2014-03-26 20:16:51 -0400] dgarstang: Nukepuppy: err.
[2014-03-26 20:17:25 -0400] programmerq: sorry, A B C was my design, not his
[2014-03-26 20:17:45 -0400] dgarstang: Nukepuppy: This is cookbook C (bc-role-downloader). It depends on the base cookbook, bc-role-base, and the app cookbook bc-foo-downloader.
[2014-03-26 20:19:50 -0400] dgarstang: ok, now I am confused. I removed the berkshelf cache dir, and the Berksfile.lock file. The recipe still has include_recipe 'bc-location' ... but I removed it from the Berksfile and the metadata. Shou;d't it fail because it can't find the bc-location cookbook?!
[2014-03-26 20:20:15 -0400] dgarstang: I am so confused. :(
[2014-03-26 20:20:31 -0400] Nukepuppy: ive seen weird caching happen
[2014-03-26 20:20:40 -0400] dgarstang: '[Berkshelf] Installing bc-location (0.58.0) from chef_api: 'https://10.36.22.106:443'' ... where did that come from!?!?
[2014-03-26 20:21:41 -0400] dgarstang: i mean, it's not in the Berksfile, or the metdata
[2014-03-26 20:22:27 -0400] juliancdunn: is it in your ~/.berkshelf/config.json ?
[2014-03-26 20:23:15 -0400] dgarstang: oh ffs. i just blew away .berkshelf which had my config files. Fuck it
[2014-03-26 20:24:50 -0400] dgarstang: frustration at max. (coffee) time
[2014-03-26 20:25:13 -0400] doomviking: I recommend tequila
[2014-03-26 20:25:17 -0400] doomviking: in vast quantities
[2014-03-26 20:41:05 -0400] StDiluted: can someone assist me with this: https://gist.github.com/dginther/9792935
[2014-03-26 20:41:33 -0400] StDiluted: I have my chef_server_url defined with an FQDN, yet it is ignoring the domain name and just using server name
[2014-03-26 20:43:37 -0400] dgarstang: Why would a vagrant up be giving me '/Users/dgarstang/.vagrant.d/gems/gems/celluloid-0.14.1/lib/celluloid/responses.rb:29:in `value': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (Ridley::Errors::ConnectionFailed)' when a berks upload works?
[2014-03-26 20:46:37 -0400] Nukepuppy: did you wipe your config.json ;p   maybe remake and add "ssl":{ "verify":false}
[2014-03-26 20:46:47 -0400] dgarstang: Nukepuppy: i have that
[2014-03-26 20:47:14 -0400] dgarstang: hahahahahah https://github.com/berkshelf/berkshelf/issues/378
[2014-03-26 20:47:32 -0400] dgarstang: my certs must have been cached. now I have to upgrade vagrant.... which means everyhing else will break. Weeee!
[2014-03-26 20:51:39 -0400] StDiluted: my above paste was when using knife
[2014-03-26 20:51:45 -0400] StDiluted: in case anyone looked
[2014-03-26 20:55:16 -0400] dgarstang: yep, now I'm in gem/vagrant/virtualbox hell
[2014-03-26 20:56:02 -0400] dgarstang: "Vagrant could not find compatible versions for gem "celluloid":" :(
[2014-03-26 20:57:02 -0400] dgarstang: "celluloid (~> 0.13.0) ruby" ... i have celluloid (0.15.2, 0.14.1)... what's the damn problem!?
[2014-03-26 20:57:21 -0400] tcotav: too big.  wouldn't fit through the door
[2014-03-26 20:57:49 -0400] dgarstang: ARRGH! https://github.com/berkshelf/vagrant-berkshelf/issues/156
[2014-03-26 20:57:53 -0400] dgarstang: it's time to shave a yak!
[2014-03-26 21:03:23 -0400] cocotton: For a reason I can't understand, chef will return 1 because it is not able to install a package (package x do; end). Yet, I can install it manually without any problem.. Anyone can point out what could be the causes of this?
[2014-03-26 21:04:57 -0400] someara: dgarstang if you're using test-kitchen you dont need vagrant-berkshelf
[2014-03-26 21:05:23 -0400] juliancdunn: cocotton: hard to say, you could run that simple recipe with chef-apply in debug mode to see what it's trying to do
[2014-03-26 21:05:33 -0400] juliancdunn: sudo chef-apply -s -ldebug
[2014-03-26 21:05:45 -0400] juliancdunn: then enter the resource, hit Ctrl-D, and see what the output says
[2014-03-26 21:07:15 -0400] dgarstang: someara: yah I do for now. test kitchen docs are less than stellar.
[2014-03-26 21:07:32 -0400] cocotton: I'll try this right now
[2014-03-26 21:07:54 -0400] kbarry: We are installing chef (we are not bootstrapping from remote, we want chef-client installed, so we are doing it via MSI),
[2014-03-26 21:08:08 -0400] cocotton: juliancdunn: Not too sure what you mean by resource
[2014-03-26 21:08:17 -0400] someara: the docs are fine.
[2014-03-26 21:09:08 -0400] kbarry: once installed, we are attempting to get it to register with the chef server (and with success much of the time)
[2014-03-26 21:09:17 -0400] cocotton: ah the recipe
[2014-03-26 21:09:21 -0400] dgarstang: well awsome. my tooling is totally borked
[2014-03-26 21:10:36 -0400] kbarry: (these are windows VMs), when they have chef installed, we are executing a command
[2014-03-26 21:11:06 -0400] kbarry: chef-client -c [client.rb, we have made and populated] -E [environment name]
[2014-03-26 21:11:35 -0400] kbarry: when the environment name is _default, things appear to work fine,
[2014-03-26 21:11:45 -0400] kbarry: when its anything else, we seem to be having a problem
[2014-03-26 21:12:09 -0400] kbarry: I am not entirely sure if this is always the problem, But I do know that it appears that way,
[2014-03-26 21:12:15 -0400] kbarry: (We are further testing right now)
[2014-03-26 21:12:30 -0400] cocotton: juliancdunn: hum well, I'm not too sure what you really meant by resource. I tried it, but I don't really know how to make it work
[2014-03-26 21:12:35 -0400] kbarry: is this the proper way to declare the environment for the node to be placed in?
[2014-03-26 21:12:48 -0400] mhenrixon: @coderanger what does the converge_by block do?
[2014-03-26 21:12:50 -0400] juliancdunn: cocotton: a recipe file contains one or more resources - 'package' is a resource
[2014-03-26 21:13:48 -0400] juliancdunn: did you try the chef-apply command I mentioned?
[2014-03-26 21:13:54 -0400] cocotton: yes
[2014-03-26 21:14:10 -0400] juliancdunn: what did it say?
[2014-03-26 21:14:24 -0400] cocotton: [2014-03-26T17:10:53-04:00] DEBUG: NameError: No resource, method, or local variable named `xtrabackup' for `Chef::Recipe "(chef-apply recipe)"'
[2014-03-26 21:14:31 -0400] cocotton: tried using the recipe
[2014-03-26 21:14:34 -0400] cocotton: the cookbook
[2014-03-26 21:14:40 -0400] juliancdunn: did you literally write
[2014-03-26 21:14:45 -0400] juliancdunn: package 'xtrabackup'
[2014-03-26 21:14:48 -0400] juliancdunn: and then hit ctrl-D?
[2014-03-26 21:14:57 -0400] cocotton: those quotes, my bad
[2014-03-26 21:16:38 -0400] cocotton: well in debugs it seem to work...
[2014-03-26 21:16:42 -0400] juliancdunn: kbarry: yes, if you want to install by hand and then run Chef the first time, '-E <environment>' is the right way
[2014-03-26 21:16:56 -0400] kbarry: Alright,
[2014-03-26 21:17:20 -0400] kbarry: Is there a timeout on trying to chef-client?
[2014-03-26 21:17:45 -0400] juliancdunn: I dunno, what is the error you are getting kbarry
[2014-03-26 21:18:07 -0400] kbarry: well we are chef-client in a runonce registry key
[2014-03-26 21:18:14 -0400] kbarry: sometimes it works,
[2014-03-26 21:18:17 -0400] kbarry: sometims it deosnt
[2014-03-26 21:18:29 -0400] kbarry: as in, same VM,
[2014-03-26 21:18:35 -0400] kbarry: same name, same process,
[2014-03-26 21:18:38 -0400] kbarry: most of the time it works as expected,
[2014-03-26 21:19:04 -0400] kbarry: other time, it begins the chef-client, then just closes the cmd (like it finished the command, we can't actually see an error)
[2014-03-26 21:19:12 -0400] kbarry: and deoesnt auth w/ the chef server
[2014-03-26 21:19:51 -0400] juliancdunn: is anything logged to client.log? is anything logged to the Windows event log?
[2014-03-26 21:20:37 -0400] dgarstang: Vagrant 1.4.3, vagrant plugin vagrant-berkshelf (1.3.7)... my berkshelf config file has ssl : false... trying to do a vagrant up... "/Users/dgarstang/.vagrant.d/gems/gems/celluloid-0.14.1/lib/celluloid/responses.rb:29:in `value': SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed (Ridley::Errors::ConnectionFailed)" *Sigh*
[2014-03-26 21:20:46 -0400] kbarry: standby
[2014-03-26 21:29:06 -0400] bricker: Sorry if this is a bad place to ask: This iptables-ng rule is causing `iptables-persistent resart` to fail on Ubuntu: `"--append FIREWALL -p icmp --icmp-type 8 -s 205.144.162.128/255.255.255.224 -j ACCEPT"`. If I remove both -s and --icmp-type flags, it works.
[2014-03-26 21:32:25 -0400] Breaking_Pitt: alexbst Ping
[2014-03-26 21:41:46 -0400] Breaking_Pitt: Guys I have problems trying to make this work on chef... I need to ping a machine and based in if the machine responds I have to do a thing and if it doesn't responds do another
[2014-03-26 21:41:55 -0400] Breaking_Pitt: I've put the ping inside a execute resource
[2014-03-26 21:42:35 -0400] Breaking_Pitt: but if the machine doesn't respond the chef execution stops due the return value
[2014-03-26 21:42:51 -0400] Breaking_Pitt: what can I use to control the return value
[2014-03-26 21:53:01 -0400] scalp42: Breaking_Pitt can you give us a gist
[2014-03-26 21:53:35 -0400] Breaking_Pitt: scalp42 I think that i found the solution maybe a not_if (ping)
[2014-03-26 21:53:44 -0400] chris6131: Hey does anyone know of a cookbook/gem/something that will generate runtime warnings or fatal errors for attributes that are listed as 'required' in the metadata.rb but have no value at runtime?
[2014-03-26 21:54:10 -0400] scalp42: not aware of anything open source at least chris6131
[2014-03-26 22:03:57 -0400] bytheway: has anyone seen a writeup on cookbook versioning best practices?  We're current upgrading some of our basic (library) cookbooks, but not all of them have been done yet and are running into issues with unsolvable dependency trees on chef runs
[2014-03-26 22:04:03 -0400] bytheway: crashing our chef server, even
[2014-03-26 22:04:34 -0400] dgarstang: Wrapper cookbooks are driving me crazy
[2014-03-26 22:04:50 -0400] fveillette: Hi
[2014-03-26 22:05:05 -0400] fveillette: I have node that have the platform attribute set and other don't...
[2014-03-26 22:05:06 -0400] fveillette: why
[2014-03-26 22:05:13 -0400] juliancdunn: chris6131: Clinton Wolfe has an attribute validator you could look at - https://github.com/clintoncwolfe/attribute-validator
[2014-03-26 22:05:17 -0400] drywheat: coderanger: i'm looking for a solid example of using Fabric/PyChef to deploy to Chef. do you know where i could find one?
[2014-03-26 22:05:29 -0400] juliancdunn: it doesn't read metadata.rb but it allows you to enforce attribute consistency in another way
[2014-03-26 22:08:47 -0400] fveillette: it like knife search node is not consistent
[2014-03-26 22:11:03 -0400] bytheway: fveillette: did both nodes complete successful chef runs?
[2014-03-26 22:14:58 -0400] fveillette: yes
[2014-03-26 22:15:38 -0400] fveillette: what i did is doing to knife search node "os:windows" and a other comnnad with  "platform:windows"
[2014-03-26 22:16:00 -0400] drywheat: does anyone have a working example of PyChef + Fabric?
[2014-03-26 22:16:04 -0400] fveillette: and i got a list of 402 with the firt one and a list of 363 with the second one
[2014-03-26 22:16:26 -0400] fveillette: refering to a list of node...
[2014-03-26 22:16:53 -0400] fveillette: i take a server that apparently have the os attrbiute and not the platform attribute
[2014-03-26 22:17:06 -0400] fveillette: i did a knife node edit -a of it
[2014-03-26 22:17:16 -0400] fveillette: and i was able to fid the platform attribute
[2014-03-26 22:17:43 -0400] fveillette: so i don't understand why is not appear in the result of the knife search node query...
[2014-03-26 22:20:40 -0400] notpeter: hello
[2014-03-26 22:21:15 -0400] notpeter: I am having chef-client hang on requests of s3 with Resource temporarily unavailable
[2014-03-26 22:21:23 -0400] notpeter: are others experiencing this?
[2014-03-26 22:21:29 -0400] notpeter: or is there a common cause for this?
[2014-03-26 22:21:57 -0400] willejs: best ruby cookbook?
[2014-03-26 22:35:21 -0400] brucejdavis: Using chef-client 11.10.4, I continue to get "you must supply a name when declaring a resource" errors; the bug was supposedly fixed with v11.10.4 https://tickets.opscode.com/browse/CHEF-5052
[2014-03-26 22:36:52 -0400] brucejdavis: Specifically, the error happens withn using the yumrepo::percona recipe v2.1.0 and yum < 3.0.0
[2014-03-26 22:37:22 -0400] brucejdavis: ArgumentError-------------You must supply a name when declaring a yum_key resource
[2014-03-26 22:56:32 -0400] dgarstang: community, y u no answer? http://lists.opscode.com/sympa/arc/chef/2014-03/msg00385.html
[2014-03-26 23:10:50 -0400] mathuin: Is it reasonable to assume that hw-cookbooks/postgresql will create the server certificate file when executed through chef-solo ?
[2014-03-26 23:11:39 -0400] mathuin: I have a very simple JSON file which sets the version to 9.3 and defines the password.  The only recipe in the run list is postgresql::server.
[2014-03-26 23:13:39 -0400] mathuin: While looking over the recipe I see that ssl is set to true by default.  I can set it to false (or 0, or whatever) but I guess that I expected it to create a cert if one was needed and not supplied -- and if that feature wasn't present, the ability to submit a cert would be nice too!
[2014-03-26 23:14:27 -0400] euphy: don't you need to add the os specific recipe to the run list also?
[2014-03-26 23:15:51 -0400] mathuin: Based on the output, it appeared to me that the os-specific recipe was detected on the fly.

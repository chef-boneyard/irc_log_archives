[2014-03-21 00:00:06 -0400] werdnativ: ephantom: what's in the knife-chef10.rb script?
[2014-03-21 00:00:56 -0400] ephantom: http://docs.opscode.com/upgrade_server_open_source.html
[2014-03-21 00:01:15 -0400] ephantom: They have a listing of the script there.
[2014-03-21 00:02:53 -0400] ephantom: its nearly a standard knife config file except for adding the configs: repo_mode 'everything' versioned_cookbooks true
[2014-03-21 00:04:13 -0400] coderanger: ephantom: knife download clients/ && knife download nodes/ etc etc
[2014-03-21 00:04:27 -0400] coderanger: ephantom: Chances are you have roles, bags, and envs in git as well
[2014-03-21 00:04:31 -0400] werdnativ: ephantom: yeah. not sure if there's a way to just exclude some but you should be able to download cookbooks/name
[2014-03-21 00:04:37 -0400] coderanger: ephantom: So nodes and clients are the important ones
[2014-03-21 00:04:51 -0400] werdnativ: what he said.
[2014-03-21 00:08:36 -0400] ephantom: That worked thanks!
[2014-03-21 00:19:26 -0400] mveitas: I am trying to upload a cookbook to the community site.... it says the cookbook must contain a metadata.json file. Does the chef server store the metadata as json?
[2014-03-21 00:21:12 -0400] coderanger: mveitas: Yes
[2014-03-21 00:21:37 -0400] mveitas: so what's the best way to package a cookbook to upload it to the community site?
[2014-03-21 00:21:48 -0400] flaccid_: i'm using notifications to trigger service restarts. when i define the service resource for the service earlier, which action is better practice? :enable or :nothing ?
[2014-03-21 00:22:09 -0400] flaccid_: mveitas: it wants a tarball with metadata.json in it
[2014-03-21 00:23:25 -0400] coderanger: mveitas: knife cookbook site share is how I do it
[2014-03-21 00:23:41 -0400] mveitas: @coderanger: gracias!
[2014-03-21 00:23:47 -0400] coderanger: mveitas: Since it is sitting in my shell buffer
[2014-03-21 00:23:48 -0400] coderanger: knife cookbook site share -k ~/.chef/coderanger.pem -o .. poise-appenv Other
[2014-03-21 00:24:48 -0400] flaccid_: coderanger: what you think about my little action question? :)
[2014-03-21 00:25:02 -0400] rpad: I'm trying to use the artifact cookbook to load aws credentials from a databag, but I'm unsure as to the databag format it's expecting: I'm assuming it's data_bags/artifact/_wildcard.json
[2014-03-21 00:25:06 -0400] rpad: Can anyone confirm this?
[2014-03-21 00:25:17 -0400] coderanger: flaccid_: It is super moot given how much of a mess service systems are
[2014-03-21 00:25:28 -0400] coderanger: flaccid: Which OS and service layer are you using?
[2014-03-21 00:25:45 -0400] flaccid_: coderanger: its hostname or hostname.sh service - ubuntu / debian
[2014-03-21 00:26:13 -0400] coderanger: flaccid: upstart or sysv?
[2014-03-21 00:26:26 -0400] flaccid_: coderanger: debian is still sysv
[2014-03-21 00:26:35 -0400] flaccid_: ubuntu would be upstart
[2014-03-21 00:27:02 -0400] kbarry: I "thought" i hear that i could 1) First "tell" the chef server what the node was going to be named, and its run list (ie, knife node from file server.json), and then 2) Second, if the node has the validation.pem, and the client.rb , that it was possible to have the node obtain its run list by connecting to the chef server, no bootstrap from a 3rd box, but rather simple running chef-client...
[2014-03-21 00:27:03 -0400] kbarry: ...on the node itself.
[2014-03-21 00:27:05 -0400] coderanger: Enable AFAIK does nothing in upstart, for sysv it does matter still, but most packages auto-enable their services so ...
[2014-03-21 00:27:08 -0400] flaccid_: coderanger: https://github.com/xhost-cookbooks/system/blob/master/providers/hostname.rb#L65
[2014-03-21 00:27:25 -0400] coderanger: flaccid_: Oh, then leave it as :nothing
[2014-03-21 00:27:31 -0400] coderanger: flaccid_: Thats a core thingy :-)
[2014-03-21 00:27:33 -0400] flaccid_: ok
[2014-03-21 00:27:51 -0400] flaccid_: yeah its not a daemon
[2014-03-21 00:28:13 -0400] mveitas: I assume I need to duke it out with someone that already has the cookbook named the same as mine?
[2014-03-21 00:28:17 -0400] coderanger: flaccid_: More specifically, you don't ever want to change its enabled status since thats managed by the core system
[2014-03-21 00:28:22 -0400] coderanger: mveitas: Yes
[2014-03-21 00:28:45 -0400] coderanger: mveitas: Which cookbook?
[2014-03-21 00:28:56 -0400] mveitas: loggly-rsyslog
[2014-03-21 00:29:39 -0400] coderanger: mveitas: By convention that would be a loggly-specific cookbook
[2014-03-21 00:29:47 -0400] coderanger: mveitas: Generally you name things <companyname>-<thing>
[2014-03-21 00:30:13 -0400] flaccid_: me not a fan of that for general cookbooks
[2014-03-21 00:30:39 -0400] kbarry: Am i smoking something, or is it possible? I am hoping to have a box come up with the validation.pem and client.rb  and has chef-client, that it can sort of sync-up" with the chef server
[2014-03-21 00:30:52 -0400] kbarry: and get its run-list (because the chef server already has it defined)
[2014-03-21 00:30:58 -0400] kbarry: Please tell me i'm right,
[2014-03-21 00:31:20 -0400] coderanger: kbarry: Are you using enterprise chef or FOSS?
[2014-03-21 00:36:12 -0400] kbarry: not enterprise.
[2014-03-21 00:36:45 -0400] coderanger: kbarry: So FOSS?
[2014-03-21 00:36:58 -0400] coderanger: If so, yes you can do this, if not, you can't
[2014-03-21 00:37:18 -0400] kbarry: =i dont know what FOSS is, but we are not using enterprise, we are using the free version.
[2014-03-21 00:37:36 -0400] flaccid_: coderanger: this looks weird https://github.com/3ofcoins/chef-cookbook-hostname/pull/17/files#diff-55bf87238c9b8af164c5133a60721f12R89
[2014-03-21 00:37:43 -0400] kbarry: I was speaking to someone yesterday and they suggested that I pre-populare the chef server with node information.
[2014-03-21 00:37:56 -0400] kbarry: then stand up the nodes, and they' sort of "get connected"
[2014-03-21 00:37:57 -0400] doomviking: (Free Open Source Software)
[2014-03-21 00:37:58 -0400] coderanger: kbarry: foss == free/open source software
[2014-03-21 00:38:02 -0400] kbarry: coderanger: thanks,
[2014-03-21 00:38:31 -0400] coderanger: kbarry: So yeah, just create the node object before you boot the server
[2014-03-21 00:38:32 -0400] kbarry: coderanger: mind nudging me in the right direction on this?
[2014-03-21 00:39:09 -0400] kbarry: what are the prerequisetes for the nodes?
[2014-03-21 00:39:16 -0400] coderanger: kbarry: Not sure what you mean
[2014-03-21 00:39:19 -0400] kbarry: i assume they need the validation.pem, and the client.rb
[2014-03-21 00:39:24 -0400] coderanger: Yes
[2014-03-21 00:39:37 -0400] coderanger: Or you could skip the validation.pem system and allocate the keys yourself
[2014-03-21 00:42:41 -0400] kbarry: my experience is, this isnt working.
[2014-03-21 00:43:01 -0400] kbarry: i have, on my node, only, chef-client, the validation.pem, and the client.rb
[2014-03-21 00:43:15 -0400] kbarry: I bootstrapped the node first, then deleted the client.pem from the node, and tried chef-client again
[2014-03-21 00:43:28 -0400] kbarry: but the chef servers tells me if can't create another node by that name
[2014-03-21 00:43:57 -0400] kbarry: Chef encountered an error attempting to create the client "nodenamne.org"
[2014-03-21 00:44:21 -0400] kbarry: possible causes, a client names "blahblahblah" already
[2014-03-21 00:44:37 -0400] kbarry: or the validation client (chef validator) may have misconfigures permissions
[2014-03-21 00:44:40 -0400] kallistec: kbarry: from knife or the webui, you need to delete the client record
[2014-03-21 00:44:56 -0400] kbarry: OHHHHHHHHHHH
[2014-03-21 00:45:05 -0400] kbarry: Chef server knows about the node
[2014-03-21 00:45:07 -0400] kbarry: but NOT the client.
[2014-03-21 00:45:09 -0400] kbarry: Got it.
[2014-03-21 00:46:02 -0400] kallistec: kbarry: so the server treats the client and node objects separately. the client is like an api account for the machine, and the node is data about the machine and what chef does on it
[2014-03-21 00:46:52 -0400] kallistec: (and then we use the word node to refer to a physical/virtual machine that runs chef-client, which makes it confusing)
[2014-03-21 00:49:34 -0400] coderanger: kbarry: You need to delete the client too
[2014-03-21 00:49:51 -0400] coderanger: ah, sniped by kallistec
[2014-03-21 00:50:56 -0400] anthroprose: coderanger: I'm storing instance_id on node attr and using sns/sqs with a work for deletions... got anything better?
[2014-03-21 00:52:06 -0400] coderanger: anthroprose: Nope, thats the way to do it, you don't need to store the instance_id yourself though, its in the ohai data
[2014-03-21 00:52:44 -0400] anthroprose: after the ec2 thing, and my own chefserver issues, i disabled most plugins ;)
[2014-03-21 00:53:06 -0400] coderanger: Heh, well then you do :)
[2014-03-21 00:55:24 -0400] anthroprose: coderanger: https://github.com/Jumpshot/aws-sqs-alert im still working on node dels, but its modular and useful for other things
[2014-03-21 01:47:53 -0400] coderanger: anthroprose: Cool, thanks :)
[2014-03-21 01:48:19 -0400] anthroprose: coderanger: also, I have resources to touch the application cookbook
[2014-03-21 01:48:24 -0400] anthroprose: but my focus would be python
[2014-03-21 01:48:49 -0400] anthroprose: if someone wants to dictate community will in a brief description + references
[2014-03-21 01:49:24 -0400] anthroprose: I just spent a week debugging our python webapp and re-wrote it async
[2014-03-21 01:49:34 -0400] anthroprose: so I *REALLY* need to do some infra stuff
[2014-03-21 02:36:59 -0400] flaccid_: if i have a file resource with content attribute, if it notifies another resource, will it write thet file before notifying the resource? i seem to have a race condition
[2014-03-21 02:46:01 -0400] someara: flaccid yep
[2014-03-21 02:48:09 -0400] flaccid_: someara: thanks. i dunno what the problem is, it actually doesn't seem to be starting the hostname.sh service at all https://github.com/xhost-cookbooks/system/blob/master/providers/hostname.rb#L111
[2014-03-21 02:49:15 -0400] flaccid_: i see this in there though INFO: file[/etc/hostname] sending start action to service[hostname] (immediate)
[2014-03-21 02:59:19 -0400] flaccid_: i see the other notifications working but not this one :)
[2014-03-21 02:59:23 -0400] flaccid_: or :( rather
[2014-03-21 03:03:32 -0400] flaccid_: this is driving me insane!
[2014-03-21 03:05:27 -0400] flaccid_: someara: hmm can a service only be started if its enabled?
[2014-03-21 03:06:05 -0400] someara: not sure about the upstart provider, but usually those are two separate things
[2014-03-21 03:06:13 -0400] someara: one is service whatever start
[2014-03-21 03:06:20 -0400] someara: vs chkconfig whatever on
[2014-03-21 03:07:20 -0400] flaccid_: someara: i think i see the prob. it thinks its already running
[2014-03-21 03:07:28 -0400] flaccid_: [2014-03-21T03:06:42+00:00] DEBUG: service[hostname.sh] already running - nothing to do
[2014-03-21 03:07:42 -0400] flaccid_: i guess thats because the status returns 0
[2014-03-21 03:07:56 -0400] someara: aha
[2014-03-21 03:08:02 -0400] someara: so, win!
[2014-03-21 03:09:12 -0400] flaccid_: someara: ah yes! sweet as.
[2014-03-21 03:44:15 -0400] flaccid_: OHAI-398 now laid to rest properly after many years!
[2014-03-21 06:21:34 -0400] ether: if a node has been booted with a node name, it can't be booted by other chef server with other node name?
[2014-03-21 06:29:46 -0400] Perceptes: Is there a way to change the provider Chef will use by default for a resource? I'd like it to always use the upstart provider for the service resource
[2014-03-21 06:30:51 -0400] anthroprose: Perceptes: Chef::Provider::Service::Upstart
[2014-03-21 06:31:13 -0400] anthroprose: you can probably default it yes
[2014-03-21 06:31:40 -0400] Perceptes: how can I set that as the default any time the service resource is used, even in a third party cookbook where I can't explicitly set the provider?
[2014-03-21 06:32:26 -0400] Perceptes: It looks like all the mappings are just stored in a nested hash: https://github.com/opscode/chef/blob/master/lib/chef/platform/provider_mapping.rb
[2014-03-21 06:32:32 -0400] Perceptes: so I could do something like: Chef::Platform.platforms[:ubuntu][:default][:service] = Chef::Provider::Service::Upstart
[2014-03-21 06:32:38 -0400] Perceptes: but I'm not sure where that code would go
[2014-03-21 06:32:41 -0400] Perceptes: and that seems very hacky
[2014-03-21 06:34:04 -0400] anthroprose: im looking at the code now, trying to figure out what chooses
[2014-03-21 06:38:09 -0400] anthroprose: Perceptes: https://github.com/opscode/chef/blob/1d71cfe0d0d10f2108936f024090e450407c37d1/lib/chef/platform/provider_mapping.rb
[2014-03-21 06:38:21 -0400] Perceptes: looks like Chef::Platform.set is intended to change the mapping
[2014-03-21 06:39:29 -0400] Perceptes: where would it make sense to call that from? A recipe?
[2014-03-21 06:39:35 -0400] anthroprose: you could trick it, but not in ways that will not affect other things
[2014-03-21 06:39:42 -0400] anthroprose: its already being called by chef
[2014-03-21 06:40:06 -0400] anthroprose: I've only explicitly told the resource, never tried to default it node wide
[2014-03-21 06:41:10 -0400] Perceptes: yeah
[2014-03-21 06:41:55 -0400] Perceptes: why doesn't the service resource default to upstart on ubuntu anyway? if it did I wouldn't be trying to do this
[2014-03-21 06:42:15 -0400] anthroprose: it should I think
[2014-03-21 06:42:31 -0400] anthroprose: all depends on what versions of things you are running
[2014-03-21 06:42:55 -0400] Perceptes: according to the platform map, it uses Chef::Provider::Service::Debian by default on Ubuntu
[2014-03-21 06:43:09 -0400] anthroprose: and cookbooks sometimes make their own init.ds or things
[2014-03-21 06:44:09 -0400] anthroprose: Perceptes: normally I do what this guy does: http://reiddraper.com/first-chef-recipe/
[2014-03-21 06:44:51 -0400] Perceptes: that's what I'd do if I were writing my own recipe
[2014-03-21 06:45:03 -0400] Perceptes: but I was trying to use a third party cookbook for postgres
[2014-03-21 06:45:44 -0400] anthroprose: welcome to chef!
[2014-03-21 06:45:47 -0400] Perceptes: i guess i can just fork it and add a provider as an attribute
[2014-03-21 06:45:48 -0400] Perceptes: haha yeah
[2014-03-21 06:45:54 -0400] Perceptes: thanks for your help
[2014-03-21 06:46:03 -0400] anthroprose: there is a tool for this, but it may complicate things
[2014-03-21 06:46:18 -0400] anthroprose: https://github.com/bryanwb/chef-rewind
[2014-03-21 06:47:37 -0400] Perceptes: that is both cool and scary
[2014-03-21 06:48:25 -0400] anthroprose: yup, lots of the tools are really
[2014-03-21 06:57:26 -0400] ether: does a node can be bootstrap by different chef server?
[2014-03-21 08:00:12 -0400] Guangjian: hello i'm the new one about chef
[2014-03-21 08:49:51 -0400] ocholetras: can i acces knife config inside a thor task?
[2014-03-21 08:54:05 -0400] jwalker: good day - I have a knife bootstrap question. I've been searching and thought I would drop in here to see if my search is a futile ATM
[2014-03-21 08:54:36 -0400] jwalker: anyone on with bootstrap skills willing to school me :)
[2014-03-21 08:56:34 -0400] anthroprose: i self-bootstrap mine
[2014-03-21 08:57:36 -0400] jwalker: the question I have is I want to specify the source of the RPM when executing knife bootstrap as opposed to it going out and executing https://www.opscode.com/chef/install.sh
[2014-03-21 08:57:59 -0400] jwalker: I already have the chef-client RPM in satellite and RHEL 6 is my only target system type
[2014-03-21 08:58:54 -0400] jwalker: I've been searching for an argument or the like to add as a knife bootstrap option that would allow the install from some other source
[2014-03-21 08:59:09 -0400] jwalker: for example: yum -y install
[2014-03-21 08:59:30 -0400] jwalker: my company has too much proxy love
[2014-03-21 09:06:42 -0400] yatesy: So did chef ever formally acknolodge the problems with hosted chef yesterday? I still see no posts on status.opscode.com
[2014-03-21 09:13:34 -0400] chef916: hey guys
[2014-03-21 09:14:06 -0400] chef916: i am trying to install apache cookbook using my private chef server with jclouds api's
[2014-03-21 09:14:37 -0400] chef916: something like this its saying Chef encountered an error attempting to create the client apache-x.x.x.x
[2014-03-21 09:14:55 -0400] chef916: apache is my databag item
[2014-03-21 09:15:15 -0400] chef916: any help why its happening.
[2014-03-21 09:59:20 -0400] poseid: hi, I get a: Chef::Exceptions::CookbookNotFound: Cookbook java not found ... while the cookbook is clearly there
[2014-03-21 10:03:50 -0400] longlx: hello
[2014-03-21 10:04:02 -0400] longlx: i'm a newbie chef
[2014-03-21 10:07:25 -0400] longlx: i'm running chef-solo and encountering an error:
[2014-03-21 10:07:29 -0400] longlx: [2014-03-21T10:06:39+00:00] ERROR: Undefined method or attribute `action' on `node'
[2014-03-21 10:08:29 -0400] longlx: can anyone help me?
[2014-03-21 10:10:20 -0400] longlx: ouput error : http://pastebin.com/5QeNPPXn
[2014-03-21 10:12:05 -0400] workmad3: poseid: is the java cookbook version pinned in your environment and, if so, does the correct version exist? (The missing version tends to come through as a 'cookbook not found' error)
[2014-03-21 10:12:59 -0400] workmad3: longlx: could you also put up the recipe that's erroring please? I'd also recommend https://gist.github.com as a pastebin alternative that has much nicer syntax highlighting and really good multi-file support for that sort of purpose :)
[2014-03-21 10:13:46 -0400] poseid: workmad3: I am using berkshelf, and just have cookbook 'java', git: 'git://github.com/opscode-cookbooks/java.git'
[2014-03-21 10:16:49 -0400] longlx: @workmad3: thanks! this is my recipe https://gist.github.com/anonymous/9683203
[2014-03-21 10:17:57 -0400] longlx: workmad3: i try chef-solo with this tutorial http://gettingstartedwithchef.com/first-steps-with-chef.html
[2014-03-21 10:33:07 -0400] harry: hey hey - is there anyway to notify a service AFTER an init.d template has been created, and a configuration, too?
[2014-03-21 10:33:16 -0400] harry: http://pastebin.com/azsb5v8P is what i have so far
[2014-03-21 10:34:36 -0400] harry: i'm thinking subscribes might be useful, or maybe the :delayed action but i want to check to see if anyone has any recommendations...
[2014-03-21 12:13:23 -0400] _sp0k_: hello
[2014-03-21 12:13:59 -0400] _sp0k_: does anyone recently tried java cookbook for oracle jdk install?
[2014-03-21 12:20:35 -0400] chef916: hi guys
[2014-03-21 12:20:35 -0400] chef916: Chef encountered an error attempting to create the client
[2014-03-21 12:20:48 -0400] chef916: is there anything i have to do for access in my chef server
[2014-03-21 12:53:33 -0400] _sp0k_: chef916: what error you are seeing during client run, need more info
[2014-03-21 13:11:53 -0400] CPS: does anyone have any experience using winrm to bootstrap windows nodes?
[2014-03-21 13:15:12 -0400] helfire: Hey, upgrade private chef from 1.2.8.2 to 11.0.2 on ubuntu and we keep getting SignatureDoesNotMatch
[2014-03-21 13:23:28 -0400] mveitas: quick question about the "bash" resource... are "bash" resources supposed to be executed in the order they appear in a recipe?
[2014-03-21 13:24:32 -0400] mveitas: I have the following order in my recipe....  bash, template, template, include_recipe.  The bash doesn't seem to be called prior to the template resources
[2014-03-21 13:33:06 -0400] mattsurabian: mveitas: are you using a not_if or only_if on the bash block? Maybe something on the node isn't as you're expecting it?
[2014-03-21 13:33:15 -0400] TotalEvil: hi2all
[2014-03-21 13:34:05 -0400] mveitas: mattsurabian: nope, just issuing a aws s3 command from the bash resource
[2014-03-21 13:34:40 -0400] mattsurabian: is it possible it's executing the script but maybe network latency makes it take longer to finish that you'd expect?
[2014-03-21 13:34:42 -0400] CPS: mveitas: can you gist the output of the chef run? it should do things in order, or say that it's skipping it or whatever
[2014-03-21 13:35:39 -0400] TotalEvil: can someone help with guesing interface on node and get ip from it
[2014-03-21 13:36:22 -0400] btm: TotalEvil: https://tickets.opscode.com/browse/OHAI-88
[2014-03-21 13:37:08 -0400] TotalEvil: btm: thx buy that not exactly what i need
[2014-03-21 13:37:23 -0400] TotalEvil: btm: i need guess between eth0 and bond0
[2014-03-21 13:37:46 -0400] TotalEvil: btm: machine can have or eth or bond randomly when created
[2014-03-21 13:37:55 -0400] TotalEvil: any wat to do that?
[2014-03-21 13:38:06 -0400] CPS: check one, then the other?
[2014-03-21 13:38:26 -0400] CPS: ohai will either have info or not, right?
[2014-03-21 13:39:08 -0400] TotalEvil: i throught to do something like node[:network][:interfaces].detect{ eth0 || bond0 }[:addresses].detect{|k,v| v[:family] == "inet" }.first}
[2014-03-21 13:39:30 -0400] mveitas: CPS: The chef run fails, due to the s3 command not executing and downloading the jar file needed to run later in the recipe
[2014-03-21 13:39:46 -0400] TotalEvil: but can't find right way to write correct it
[2014-03-21 13:40:37 -0400] TotalEvil: CPS: yes ohai will have info but i need get ip from local interface and put it to nginx config
[2014-03-21 13:41:13 -0400] CPS: mveitas: out of context that means very little to me, sorry
[2014-03-21 13:41:17 -0400] TotalEvil: CPS: as i didn't know which interface will be bond or eth i need some guess method
[2014-03-21 13:41:55 -0400] mveitas: CPS: shitake... turns out the included recipes was in the wrong order
[2014-03-21 13:42:41 -0400] CPS: TotalEvil: i'm on windows so it may a little different for me, but if you check  node[network][interfaces]...[eth0] and it's nil, use bond0
[2014-03-21 13:42:44 -0400] CPS: does that not work?
[2014-03-21 13:43:22 -0400] TotalEvil: CPS: my code) bad itself) just concept there
[2014-03-21 13:43:34 -0400] mveitas: CPS: This is where some integration tests would come in handy to ensure the correct order of things was happening. I have unit tests to ensure everything is called
[2014-03-21 13:43:38 -0400] TotalEvil: CPS: hmm i need define that in erb template
[2014-03-21 13:43:55 -0400] TotalEvil: CPS: u mean make some if inside there and check interface values?
[2014-03-21 13:44:14 -0400] CPS: TotalEvil: templates are passed the node object, so you should be able to check there
[2014-03-21 13:44:30 -0400] TotalEvil: CPS: oky will try thx) for direction)
[2014-03-21 13:47:53 -0400] CPS: mveitas: i think you're a little beyond where i'm at with chef
[2014-03-21 13:48:28 -0400] CPS: my recipes that require things all have include_recipe at the top, pretty sure chef is smart enough to only include things once
[2014-03-21 13:49:56 -0400] helfire: Hey, upgrade private chef from 1.2.8.2 to 11.0.2 on ubuntu and we keep getting SignatureDoesNotMatch
[2014-03-21 14:09:26 -0400] _sp0k_: hello! has anyone tried applying custom SSL Certificate to Chef Server, it got applied ok, but now i am unable to upload cookbooks. my env is broke due to this, any help is appreciated
[2014-03-21 14:22:51 -0400] CPS: helfire: relevant? http://itarchmerc.wordpress.com/2013/09/05/knife-ec2-server-list-signaturedoesnotmatch-error/
[2014-03-21 14:26:27 -0400] helfire: CPS: funny thing is we dont use anything AWS
[2014-03-21 14:26:40 -0400] helfire: and it's an all of our clients, jenkins, local users, etc
[2014-03-21 14:26:50 -0400] helfire: to recover we just created another server
[2014-03-21 14:26:52 -0400] CPS: still, could be a key mismatch
[2014-03-21 14:27:07 -0400] CPS: oh it's a new server the nodes haven't talked to before?
[2014-03-21 14:27:42 -0400] helfire: no, we tried to update, got that error, spent too much time and just created a new server
[2014-03-21 14:27:48 -0400] helfire: now in progress of moving cookbooks/etc
[2014-03-21 14:28:16 -0400] CPS: that new server will have a new key, the old pem files on the nodes won't work
[2014-03-21 14:28:29 -0400] helfire: yep, it's our ci env, so we just re-create all the servers
[2014-03-21 14:28:37 -0400] helfire: we'll get to our prod one soon and figure it out :)
[2014-03-21 14:30:34 -0400] cdelpino: Hello there. I am having issues uploading a cookbook that I created. Nothing complicated, just a simple samba package install. When I submit the upload command, I get: Uploading samba        [0.1.0] ERROR: internal server error Response: internal service error. I tried this on two different chef workstations with the same result. I can provide a more verbose output if needed.
[2014-03-21 14:37:05 -0400] CPS: cdelpino: output would be helpful
[2014-03-21 14:37:44 -0400] cdelpino: Uploading samba        [0.1.0] INFO: Validating ruby files INFO: Validating templates INFO: Syntax OK INFO: Saving samba INFO: Uploading files INFO: Uploading /Users/delpic/chef-repo/cookbooks/samba/recipes/default.rb (checksum hex = 12a70659df019d11966da8e5ba79cdb8) to https://chefsvr.thedelpinos.com:443/bookshelf/organization-00000000000000000000000000000000/checksum-12a70659df019d11966da8e5ba79cdb8?AWSAccessKeyId=a3150b58cc33414c64
[2014-03-21 14:37:59 -0400] CPS: use gist
[2014-03-21 14:40:09 -0400] cdelpino: sorry, https://gist.github.com/delpic/9687692
[2014-03-21 14:40:21 -0400] mattsurabian: maybe don't want that AccessKey on there?
[2014-03-21 14:40:59 -0400] mattsurabian: like, visible in the gist
[2014-03-21 14:41:28 -0400] CPS: can you run it again with -VV?
[2014-03-21 14:41:46 -0400] CPS: internal server error isn't super helpful, -VV is maximum verbosityu
[2014-03-21 14:43:40 -0400] cdelpino: -VV output: https://gist.github.com/delpic/35d5d4cfb6025c91852a this is end portion
[2014-03-21 14:44:23 -0400] notromda: I have a question - to bootstrap a new server, I want to use a user and sudo, but that user doesn't exists yet.   chicken and egg
[2014-03-21 14:44:54 -0400] CPS: sorry cdelpino, i got nothing. 500 is a generic error and that isn't any more specific
[2014-03-21 14:44:56 -0400] notromda: Is there a way to create a rackspace instance that already has a user created that I can use to bootstrap chef?
[2014-03-21 14:45:59 -0400] cdelpino: ok. thanks CPS
[2014-03-21 14:46:34 -0400] CPS: maybe try googling for cases in which chef server responds with 500 and see if anything sounds relevant to your circumstances
[2014-03-21 14:48:15 -0400] cdelpino: did that already, no joy. there was an issue that someone had that was similar, but it was fixed in a newer version of chef apparently. will keep digging.
[2014-03-21 14:48:17 -0400] cdelpino: thanks again!
[2014-03-21 14:55:37 -0400] kzwin: how can i conditionally provide an attribute in a resource?
[2014-03-21 14:58:13 -0400] ocholetras: hi guys!
[2014-03-21 14:58:32 -0400] ocholetras: how do you acces attribute names with dots '.'
[2014-03-21 14:58:34 -0400] ocholetras: i mean
[2014-03-21 14:58:39 -0400] ocholetras: an vlan interface
[2014-03-21 14:58:45 -0400] ocholetras: "eth2.726"
[2014-03-21 14:58:58 -0400] ocholetras: im getting the name from network_interfaces ohai attribute
[2014-03-21 15:16:09 -0400] a13x212: any recommendations for an iptables cookbook?
[2014-03-21 15:26:37 -0400] silviud: hi - i have some strange results while running tests with kitchen
[2014-03-21 15:26:55 -0400] silviud: when i run kitchen test all tests pass
[2014-03-21 15:27:20 -0400] silviud: however if i run the tests by loging onto the vm some fail
[2014-03-21 15:27:36 -0400] silviud: looks like is a bug somewhere
[2014-03-21 15:27:45 -0400] silviud: anybody had a similar experience ?
[2014-03-21 15:31:42 -0400] der_flo: Hi!
[2014-03-21 15:32:06 -0400] der_flo: Is anybody here familiar with the deploy resource?
[2014-03-21 15:41:17 -0400] trilitheus: der_flo - I've been experimenting with it recently - whats up
[2014-03-21 15:42:06 -0400] trilitheus: when io say experimenting - I've written a cookbook
[2014-03-21 15:42:53 -0400] trilitheus: but coderanger who frequents this board advises against using it
[2014-03-21 15:44:18 -0400] shlant: anyone used the docker cookbook LWRP?
[2014-03-21 15:44:22 -0400] der_flo: When specifing symlinks to the shared directory, the destination directories don't get created.
[2014-03-21 15:44:36 -0400] der_flo: E.g. shared/logs, shared/pids, ...
[2014-03-21 15:46:08 -0400] der_flo: @trilitheus: what does coderanger suggest instead?
[2014-03-21 15:46:54 -0400] mattupstate: he'd probably suggest packages over source deployment
[2014-03-21 15:47:12 -0400] mattupstate: just a guess, though
[2014-03-21 15:47:47 -0400] toto: Hi
[2014-03-21 15:48:09 -0400] der_flo: In the Rails world, deploying the app from a git repo ist standard and my use case
[2014-03-21 15:48:38 -0400] mattupstate: der_flo: what are you wondering about the deploy resource?
[2014-03-21 15:49:36 -0400] der_flo: Pretty must exactly what is described in https://tickets.opscode.com/browse/CHEF-4404
[2014-03-21 15:50:01 -0400] mattupstate: but its closed and tagged as not a bug
[2014-03-21 15:50:28 -0400] der_flo: But I need a solution ;-)
[2014-03-21 15:50:31 -0400] mattupstate: to what?
[2014-03-21 15:50:47 -0400] der_flo: That the directories in the shared paths get created
[2014-03-21 15:52:17 -0400] mattupstate: how do you expect them to be created?
[2014-03-21 15:53:39 -0400] mattupstate: did you not see the `create_dirs_before_symlink` attribute?
[2014-03-21 15:54:04 -0400] der_flo: @mattupstate: This creates directories in "current" instead of "shared".
[2014-03-21 15:54:29 -0400] mattupstate: then create the directories in the `before_symlink` callback
[2014-03-21 15:54:42 -0400] mattupstate: http://docs.opscode.com/resource_deploy.html#callbacks
[2014-03-21 15:56:32 -0400] der_flo: @ mattupstate: Ok. I'll try that.
[2014-03-21 15:56:38 -0400] der_flo: Thanks for your help!
[2014-03-21 15:57:59 -0400] der_flo: bye!
[2014-03-21 16:25:24 -0400] bixu: Most of my converges are failing right now due to this error - any ideas?:
[2014-03-21 16:25:26 -0400] bixu: "Encoding::InvalidByteSequenceError: "\xC3" on US-ASCII"
[2014-03-21 16:25:45 -0400] bixu: Do I just have a bad char in one of my cookbooks or .json files?
[2014-03-21 16:28:51 -0400] CPS: bixu: are you switching between windows and linux?
[2014-03-21 16:28:58 -0400] bixu: no
[2014-03-21 16:29:17 -0400] CPS: well sounds like you've got an invalid character in there somewhere
[2014-03-21 16:30:53 -0400] tcotav: grep for invalid character
[2014-03-21 16:31:08 -0400] tcotav: "[\x80-\xFF]" pattern
[2014-03-21 16:32:22 -0400] kbarry: http://docs.opscode.com/chef/essentials_search.html , This say that "To search for the available keys for a particular object, use the show argument with any of the following Knife sub-commands: knife client, knife data bag, knife environment, knife node, or knife role. For example: knife data bag show."
[2014-03-21 16:33:02 -0400] kbarry: "knife data bag show" gives me the same thing as "knife data bag show --help"
[2014-03-21 16:33:16 -0400] bixu: tcotav: Interestingly, does not happen when I manually run chef-client...
[2014-03-21 16:33:24 -0400] CPS: kbarry: try knife data bag show [data bag name]
[2014-03-21 16:33:39 -0400] tcotav: bixu: ok, that's damn strange
[2014-03-21 16:33:48 -0400] kbarry: what is i just want to see what possible "properties names" that are available?
[2014-03-21 16:33:51 -0400] bixu: Might be the chef-client service in ubuntu?
[2014-03-21 16:33:53 -0400] kbarry: as in,
[2014-03-21 16:34:00 -0400] kbarry: if i don't even know if databas have names
[2014-03-21 16:34:09 -0400] kbarry: i might look to use knife data bag show
[2014-03-21 16:34:30 -0400] kbarry: and expect, from the page above, that it would list things like that databags have a name property, an id, etc.
[2014-03-21 16:34:42 -0400] kbarry: you "know" that databags have names,
[2014-03-21 16:34:45 -0400] kbarry: i don't
[2014-03-21 16:34:52 -0400] kbarry: i don't know what toher possible "keys" they have
[2014-03-21 16:35:13 -0400] kbarry: is the abode link is incorrect, then what is the proper method to view the keys
[2014-03-21 16:35:19 -0400] tcotav: bixu: backing up a step, nodes were converging prior to some change?
[2014-03-21 16:35:33 -0400] bixu: tcotav: No doubt, but I don't know when this started happening.
[2014-03-21 16:36:03 -0400] CPS: kbarry:  do knife list data_bags
[2014-03-21 16:36:57 -0400] tcotav: bixu: money is still on bad character somehow introduced (I get occasionally nailed when I c/p from browser -- someone got clever with quote and kills me
[2014-03-21 16:37:00 -0400] tcotav: )
[2014-03-21 16:37:03 -0400] kbarry: CPS: i think you mean "knife list data bags"
[2014-03-21 16:37:18 -0400] kbarry: and i think its actually knife data bags list
[2014-03-21 16:37:24 -0400] kbarry: but that shows me a list of databags,
[2014-03-21 16:37:29 -0400] kbarry: i want a list of all the keys
[2014-03-21 16:37:39 -0400] kbarry: "things i might search agaist"
[2014-03-21 16:38:26 -0400] CPS: knife data bag show [data bag name] will show you the keys for that data bag
[2014-03-21 16:38:41 -0400] kbarry: i want to see the keys for all data bags
[2014-03-21 16:38:46 -0400] kbarry: or the keys for all nodes
[2014-03-21 16:39:11 -0400] CPS: keys for the nodes?
[2014-03-21 16:39:34 -0400] kbarry: keys for anything
[2014-03-21 16:39:58 -0400] kbarry: when you do knife data bag show [databagname]
[2014-03-21 16:40:13 -0400] kbarry: you get a list of All the keys AND their values
[2014-03-21 16:40:23 -0400] kbarry: but for only one databag,
[2014-03-21 16:40:38 -0400] CPS: what are you trying to do with this info?
[2014-03-21 16:40:43 -0400] kbarry: I simple want to see, what keys are avaliable to query across all databags
[2014-03-21 16:40:57 -0400] kbarry: i want to form a search
[2014-03-21 16:41:18 -0400] kbarry: if i can see what the "keys" are, i can form a search
[2014-03-21 16:41:33 -0400] bixu: tcotav: Still confused.  I don't see this character in the local chef cache on the machines.
[2014-03-21 16:41:34 -0400] CPS: a search for what?
[2014-03-21 16:41:40 -0400] kbarry: are databag names under the key "name" or maybe "n" or maybe "dataname" or "bagname"
[2014-03-21 16:42:07 -0400] tcotav: bixu: in /var/chef/cache/cookbooks?
[2014-03-21 16:42:07 -0400] kbarry: or maybe the databag name is kept under a key called "thisisaretardedkeyfordatabadnames"
[2014-03-21 16:42:11 -0400] CPS: data bags are ruby hashes
[2014-03-21 16:42:13 -0400] bixu: tcotav: Yup.
[2014-03-21 16:42:41 -0400] tcotav: huh
[2014-03-21 16:42:50 -0400] kbarry: i am not disagreeing with you on that
[2014-03-21 16:42:55 -0400] kbarry: i jsut want a list of the keys
[2014-03-21 16:43:00 -0400] kbarry: not of one bag
[2014-03-21 16:43:05 -0400] kbarry: but of all bags
[2014-03-21 16:43:54 -0400] kbarry: "To search for the available keys for a particular object, use the show argument with any of the following Knife sub-commands: knife client, knife data bag, knife environment, knife node, or knife role. For example: knife data bag show."
[2014-03-21 16:44:01 -0400] kbarry: this sint true,
[2014-03-21 16:44:05 -0400] kbarry: its on the page, but its not true
[2014-03-21 16:44:10 -0400] kbarry: how is it to be done
[2014-03-21 16:44:30 -0400] CPS: kbarry: the documentation is bad in places, but i think you might be misunderstanding that
[2014-03-21 16:44:40 -0400] kbarry: nope, i see i am wrong.
[2014-03-21 16:44:45 -0400] CPS: it states that that command will list information for a particular object
[2014-03-21 16:44:57 -0400] CPS: meaning you need to give it the name of an object to get information about
[2014-03-21 16:45:05 -0400] kbarry: yup
[2014-03-21 16:45:05 -0400] perfectsine: What's the best way to run a chef recipe with a different set of variables?  I'm trying to reuse the code from a common.rb recipe
[2014-03-21 16:45:07 -0400] kbarry: i missed that part
[2014-03-21 16:45:11 -0400] kbarry: the "a particular"
[2014-03-21 16:45:30 -0400] CPS: i have no idea how to get every key for every data bag using just knife
[2014-03-21 16:47:24 -0400] kzwin: @perfectsine if you are referring to node attributes as 'variables' you can use roles and environments.
[2014-03-21 16:48:30 -0400] bixu: tcotav: But we are looking for non-unicode chars here, right? not non-ascii?
[2014-03-21 16:48:44 -0400] perfectsine: kzwin: I'm setting attributes on a per recipe basis, if multiple recipes are included, then I need common.rb run for each included recipe
[2014-03-21 16:48:45 -0400] tcotav: bixu: yes
[2014-03-21 16:49:10 -0400] tcotav: or at least that's the error sent (not sure how it could be a red herring)
[2014-03-21 16:49:56 -0400] kzwin: you can set these attributes in each recipe and then include common.rb
[2014-03-21 16:50:13 -0400] Guest88024: coderanger, hey can i ask you something about pychef ?
[2014-03-21 16:50:26 -0400] bixu: tcotav: It's possible this has to do with some of our devs using German localizations on their laptops...?
[2014-03-21 16:51:14 -0400] kzwin: like this:  node.default['common']['myvar'] = 345
[2014-03-21 16:51:16 -0400] kzwin: then
[2014-03-21 16:51:24 -0400] kzwin: include_recipe 'common'
[2014-03-21 16:52:03 -0400] tcotav: bixu: could be.  did you grep for that specific code that was in the error?
[2014-03-21 16:52:11 -0400] bixu: I'm looking again.
[2014-03-21 16:52:26 -0400] bixu: Had to get gnu grep on my mac to try the recommended regex.
[2014-03-21 16:53:12 -0400] bixu: tcotav: This is one of the reasons I love using pkgsrc on my Mac :)
[2014-03-21 16:53:14 -0400] tcotav: bixu: oh I use it too, its just every so often
[2014-03-21 16:53:21 -0400] bixu: Yup.
[2014-03-21 16:55:36 -0400] bixu: lol: "Binary file /var/chef/cache/cookbooks/ms_dotnet45/.DS_Store matches"
[2014-03-21 16:55:52 -0400] bixu: Now THAT is ironic.
[2014-03-21 16:55:53 -0400] tcotav: hahaha
[2014-03-21 16:56:23 -0400] tcotav: time to fix a .gitignore file
[2014-03-21 16:56:35 -0400] bixu: I think it's more appropriate here to shake the fist at whoever committed that msdotnet stuff.
[2014-03-21 16:56:42 -0400] tcotav: yeah definitely
[2014-03-21 16:57:02 -0400] bixu: We are using Berkshelf to manage those cookbooks, so this shouldn't be an issue that we created.
[2014-03-21 16:57:28 -0400] bixu: Maybe this error isn't really breaking anything - because I see similar issues for the npm package provider cookbook, but they make sense:
[2014-03-21 16:57:37 -0400] bixu: "/var/chef/cache/cookbooks/npm/providers/package.rb:8:    not_if "npm -g ls 2> /dev/null | grep '^[][] #{pkg_id}'""
[2014-03-21 16:58:10 -0400] bixu: Because the npm cookbook figures out npm stuff by matching against unicode chars in the npm list output.
[2014-03-21 16:58:48 -0400] bixu: Yeah - I think this is a bit of a red herring.  Because I restarted the chef client on all these machines and it's doing okay on 2/3 of them.
[2014-03-21 16:59:47 -0400] tcotav: ah that's a bummer (or its great depending on your perspective)
[2014-03-21 16:59:53 -0400] tcotav: *it's
[2014-03-21 16:59:58 -0400] bixu: Still digging until I'm sure.
[2014-03-21 17:02:40 -0400] bixu: Actually, seeing the time, I need to leave the office.
[2014-03-21 17:02:48 -0400] bixu: But thanks for the good regex pointers.
[2014-03-21 17:02:57 -0400] tcotav: no prob -- have a good night
[2014-03-21 17:23:33 -0400] kbarry: this is driving my crazy,
[2014-03-21 17:23:41 -0400] hekman: hey guys, im wondering if its possible to do artifact deploys instead of SCM checkouts with the application cookbooks...
[2014-03-21 17:23:48 -0400] kbarry: i don't know a "good way" to test tiny parts of a recipe.
[2014-03-21 17:23:52 -0400] kbarry: like, for syntax
[2014-03-21 17:24:48 -0400] kbarry: partial_search(:node, 'name:*AWS* AND chef_environment:devops',:keys => {'fqdn' => [ 'fqdn' ] })
[2014-03-21 17:25:14 -0400] kbarry: i want to search for a set of servers, take the FQDN's and join them together
[2014-03-21 17:25:28 -0400] kbarry: i am very new to ruby, so getting the "array" together is a bit tricky,
[2014-03-21 17:25:38 -0400] kbarry: i "think", i know how to join them as needed,
[2014-03-21 17:25:47 -0400] mattupstate: hekman: nope, the application cookbook is heavily coupled with the `deploy` resource
[2014-03-21 17:26:05 -0400] hekman: mattupstate: I was afraid of that :(
[2014-03-21 17:26:06 -0400] mattupstate: which is coupled to to the `git` and `svn` resources
[2014-03-21 17:28:00 -0400] mattupstate: hekman: however!
[2014-03-21 17:28:04 -0400] mattupstate: see https://github.com/RiotGames/artifact-cookbook
[2014-03-21 17:28:11 -0400] hekman: mattupstate: yeah i have been looking at that...
[2014-03-21 17:28:28 -0400] mattupstate: thats your best community option, otherwise you'll have to roll your own
[2014-03-21 17:29:14 -0400] hekman: we use application_python to deploy/run our django/celery app, so it looks like ill have some major refactoring to do
[2014-03-21 17:29:56 -0400] mattupstate: yeah, i used to use that too
[2014-03-21 17:30:18 -0400] mattupstate: currently trying to get away from SCM deployments
[2014-03-21 17:30:31 -0400] workmad3: hekman: you could always go the next step and turn your deploy into a .deb or .rpm package, push it to a company artifactory and just install it with package
[2014-03-21 17:30:46 -0400] anthroprose: mattupstate: signed artifacts of known SCM configs?
[2014-03-21 17:31:21 -0400] hekman: workmad3: yeah i am thinking about that - right now I have tarballs of my virtualenv and my application code
[2014-03-21 17:31:23 -0400] anthroprose: thats just so hard when you are pretty much 100% webapp and make 2 line changes 10 timea a day
[2014-03-21 17:31:25 -0400] mattupstate: anthroprose: not sure what you're asking
[2014-03-21 17:31:40 -0400] mattupstate: anthroprose: yes, its not for everybody ;)
[2014-03-21 17:32:03 -0400] anthroprose: ohh I know
[2014-03-21 17:32:06 -0400] hekman: anthroprose: well with a build server that auto-builds artifacts, its no different than SCM checkouts
[2014-03-21 17:32:07 -0400] workmad3: anthroprose: that's why you'd automate the entire package build and push on a CI server too :)
[2014-03-21 17:32:19 -0400] anthroprose: right now its base AMI and then SCM updates
[2014-03-21 17:32:20 -0400] hekman: except way more bettar
[2014-03-21 17:32:21 -0400] hekman: :D
[2014-03-21 17:32:48 -0400] anthroprose: ohh it gets automated & pushed
[2014-03-21 17:32:54 -0400] anthroprose: whole ci/cd chain
[2014-03-21 17:32:55 -0400] workmad3: anthroprose: that would be the idea
[2014-03-21 17:32:56 -0400] hekman: yep
[2014-03-21 17:33:08 -0400] anthroprose: its just still using SCM in prod
[2014-03-21 17:33:11 -0400] anthroprose: instead of artifact
[2014-03-21 17:33:30 -0400] hekman: right now we gate our SCM deploys on successful builds which are just a CI server executing all the tests
[2014-03-21 17:33:36 -0400] anthroprose: but the prod deploys are, git pull, reload webapp
[2014-03-21 17:33:42 -0400] anthroprose: kehman: same here
[2014-03-21 17:33:48 -0400] anthroprose: can't deploy with a broken dependency
[2014-03-21 17:33:58 -0400] hekman: but that is ugly because it takes so much longer to deploy
[2014-03-21 17:34:10 -0400] hekman: i want to get to the point where my artifacts are basically AMIs built with packer :)
[2014-03-21 17:34:27 -0400] anthroprose: thats not too hard, I do that with my devs
[2014-03-21 17:34:46 -0400] anthroprose: they get my prod chef, on a box whenever updates occur
[2014-03-21 17:35:08 -0400] anthroprose: vagrant downloads the packer box when it sees changes
[2014-03-21 17:36:25 -0400] anthroprose: only differences so far, is I run memcache/redis on the packer box for local connectivity, but those are controlled via an ENV var so there are no code diffs
[2014-03-21 17:36:47 -0400] jpr_: is it possible to see the constraints that get sent to the ruby depsolver with calling environments/<env>/cookbook_versions
[2014-03-21 17:36:48 -0400] jpr_: ?
[2014-03-21 17:37:00 -0400] anthroprose: and I re-gen the base AMI every so often
[2014-03-21 17:37:10 -0400] jpr_: the erchef log doesn't seem to show them by default at least
[2014-03-21 17:37:12 -0400] anthroprose: but generating & deploying an AMI for every change
[2014-03-21 17:37:25 -0400] anthroprose: our agile would die a slow death of people waiting on builds for deploys
[2014-03-21 17:38:23 -0400] anthroprose: hekman: what is your time from commit to prod running code?
[2014-03-21 17:38:55 -0400] werdnativ: about rails deploys: capistrano typically treats "web" and "app" as separate roles, when you go to multiple nodes do you typically keep nginx on the rails boxes and forward nginx's :80 to a load balancer or should load balancer proxys directly to the app's :8000 ?
[2014-03-21 17:39:23 -0400] werdnativ: assuming the load balancer is the nginx front-end here...
[2014-03-21 17:40:41 -0400] werdnativ: so [nginx LB] -> [nginx proxy -> unicorn]  where boxes are hosts, or just [nginx LB / proxy] -> [unicorn] ?
[2014-03-21 17:41:20 -0400] workmad3: werdnativ: depends on the link between the LB node and the app server nodes
[2014-03-21 17:41:41 -0400] mattupstate: depends on your app too
[2014-03-21 17:41:46 -0400] werdnativ: workmad3: "link" as in, is it a private network?
[2014-03-21 17:41:51 -0400] mattupstate: if you have static files, you'll want to go with the first option
[2014-03-21 17:42:07 -0400] workmad3: werdnativ: I do LB -> [nginx -> puma] for example, so I can configure the SSL connection between the LB and the app server
[2014-03-21 17:42:20 -0400] werdnativ: right, and asset cache, so each host takes care of its own cache.
[2014-03-21 17:42:58 -0400] anthroprose: im currently running ELB -> NginX -> twistd -> cyclone, recently switched from ELB -> NginX -> uWSGI -> Flask
[2014-03-21 17:43:08 -0400] anthroprose: SSL term at ELB
[2014-03-21 17:43:11 -0400] workmad3: werdnativ: if you had a VPN set up between the two though, you could drop that bit... and yes, pushing the assets to the LB can make sense
[2014-03-21 17:43:48 -0400] anthroprose: but yeah, using sqlite on each node for a thread shared asset cache, etc...
[2014-03-21 17:44:18 -0400] anthroprose: plus, try doing 600B metrics per min without doing some sort of rollup pre-agg across all the threads
[2014-03-21 17:44:22 -0400] werdnativ: pushing static (generated assets on deploy) to the front end was what I was wondering about with the second option...
[2014-03-21 17:44:42 -0400] anthroprose: werdnativ: I always vote for namespacing
[2014-03-21 17:45:00 -0400] anthroprose: but lots of things let you invalidate now
[2014-03-21 17:45:03 -0400] werdnativ: namespacing, i.e. asset host subdomain?
[2014-03-21 17:45:09 -0400] workmad3: werdnativ: I've not done that bit yet... I let the app-server nodes serve the generated assets through the local nginx... but I set caching headers, so they can be cached at the load balancer and onwards
[2014-03-21 17:45:22 -0400] anthroprose: for a start yeah, I always do a static.domain.tld
[2014-03-21 17:45:27 -0400] anthroprose: which makes it easy to switch to a cdn
[2014-03-21 17:45:40 -0400] werdnativ: gotcha. makes sense.
[2014-03-21 17:45:42 -0400] anthroprose: but i more meant static.domain.tld/v2/js/jquery.js
[2014-03-21 17:45:45 -0400] anthroprose: or something
[2014-03-21 17:45:58 -0400] anthroprose: so your webapp goes from v1 to v2
[2014-03-21 17:46:04 -0400] werdnativ: v2 == deploy rev?
[2014-03-21 17:46:08 -0400] anthroprose: and so does the content
[2014-03-21 17:46:19 -0400] workmad3: anthroprose: I'm used to asset compilation ending up as js/jquery-<file-sha>.js as cache-busting :)
[2014-03-21 17:46:21 -0400] anthroprose: its a lazy way of solving massive cache synchronization issues
[2014-03-21 17:46:45 -0400] werdnativ: yeah,  *-HASH.js that's the typical rails way.
[2014-03-21 17:46:47 -0400] anthroprose: I used to have a few million thumbnails that were autogenerated on demand, but cached in cloudfront
[2014-03-21 17:47:01 -0400] anthroprose: namespacing was the only way I could sold it with aws at the time
[2014-03-21 17:47:10 -0400] anthroprose: now you can properly invalidate I think, its been a bit
[2014-03-21 17:47:34 -0400] anthroprose: or else you end up with tops of pics not matching bottoms of ones, etc..
[2014-03-21 17:47:49 -0400] anthroprose: if rails handles the namespacing and all that, then sure
[2014-03-21 17:47:59 -0400] workmad3: anthroprose: yeah, slightly more extreme use-case than the typical rails pre-compiled assets :)
[2014-03-21 17:48:11 -0400] anthroprose: I've never had the pleasure of working with a webdev that used a proper framework with an asset pipeline
[2014-03-21 17:48:30 -0400] werdnativ: rails asset-pipeline is love/hate
[2014-03-21 17:48:51 -0400] anthroprose: but I also namespace API endpoints too like /api/v1/fnc /api/v2/fnc
[2014-03-21 17:49:01 -0400] anthroprose: so some of its just philosophical
[2014-03-21 17:49:03 -0400] werdnativ: heathen!
[2014-03-21 17:49:20 -0400] anthroprose: werd: do you like it when your URI endpoints change behavior?
[2014-03-21 17:49:43 -0400] werdnativ: you're supposed to use headers and custom mime content types! (jk)
[2014-03-21 17:49:52 -0400] workmad3: werdnativ: :D
[2014-03-21 17:50:02 -0400] werdnativ: each way has their own good points...
[2014-03-21 17:50:10 -0400] anthroprose: werd: thats what a lot of people think yeah
[2014-03-21 17:50:12 -0400] workmad3: werdnativ: I do quite like the custom mime content types approach
[2014-03-21 17:50:17 -0400] anthroprose: thats why I said philisophical
[2014-03-21 17:50:32 -0400] anthroprose: headers are there for a reason and most people dont even know/understand it
[2014-03-21 17:50:34 -0400] workmad3: but pragmatically, v1, v2 etc in the url can be a bit easier to manage and get people to use 'correctly'
[2014-03-21 17:51:01 -0400] anthroprose: I try & pass people metadata in headers... spend more time explaing how to access them than just giving a json array
[2014-03-21 17:51:43 -0400] workmad3: anthroprose: what? the people you deal with can't just do 'request.headers["X-My-Custom-Thing"]'? :(
[2014-03-21 17:51:49 -0400] anthroprose: does the newer rails do async things?
[2014-03-21 17:51:52 -0400] werdnativ: esp since most people don't code API clients using hypermedia semantics, they just hard-code shit anyway. So changing the URL when you change things does make sense.
[2014-03-21 17:51:57 -0400] anthroprose: workmad: no, lots of times not
[2014-03-21 17:52:22 -0400] workmad3: anthroprose: define 'async things'
[2014-03-21 17:52:25 -0400] anthroprose: very limited tech using javascript or something, following online examples only, no language comprehension
[2014-03-21 17:52:54 -0400] anthroprose: workmad: allow you to do callbacks
[2014-03-21 17:53:04 -0400] anthroprose: without hand coding it all
[2014-03-21 17:53:46 -0400] anthroprose: I just had a pretty beafy blocking/async issue that I solved in python, but was so frustrated with the entire ecosystem, almost used erlang
[2014-03-21 17:54:03 -0400] werdnativ: anthroprose: why not job queue?
[2014-03-21 17:54:12 -0400] workmad3: anthroprose: are we talking JS side, so stuff like sending forms? or are we talking about stuff like background workers? SSEs? Websockets?
[2014-03-21 17:54:14 -0400] anthroprose: werdnativ: this is the intake *for* a job queue
[2014-03-21 17:54:29 -0400] anthroprose: check this.....
[2014-03-21 17:54:58 -0400] anthroprose: #1 accept http client POST data, #2 send to S2, #3 make SQS post, #4 make DDB put
[2014-03-21 17:55:34 -0400] anthroprose: have you ever tried exponential backoffs at scale?
[2014-03-21 17:56:30 -0400] anthroprose: that 1 route, used to take 1100ms and do ~2TPS, with uWSGI being the bottleneck
[2014-03-21 17:56:32 -0400] workmad3: anthroprose: ah, so you're meaning being able to do something essentially like continuations on a request thread...
[2014-03-21 17:57:02 -0400] anthroprose: using async, and some threading, now I'm doing 170TPS at 6ms
[2014-03-21 17:57:13 -0400] anthroprose: http://gistflow.com/posts/1019-high-throughput-python-web-worker-for-aws
[2014-03-21 17:57:32 -0400] anthroprose: boto was doing time.sleep()s
[2014-03-21 17:57:52 -0400] anthroprose: all sorts of crazy things happening in a like 10 line python webapp
[2014-03-21 18:01:14 -0400] workmad3: anthroprose: so no, rails can't handle exactly that sort of flow... but you can spin up an EventMachine HTTP server and do that in ruby
[2014-03-21 18:02:40 -0400] anthroprose: workmad3: ahhhhh ok, I mean thats essentially what I just did with all that python using twisted
[2014-03-21 18:03:14 -0400] anthroprose: workmad3: thanks for the ref..... python shop currently, but its nice to be able to copy the pattern whereever I go
[2014-03-21 18:03:59 -0400] workmad3: anthroprose: yeah, I think so... essentially, a reactor acting as your request thread, and then that request thread defers tasks into a background thread and releases back to the reactor, reactor can then resume that request when the deferred task is finished
[2014-03-21 18:04:09 -0400] anthroprose: yup
[2014-03-21 18:04:26 -0400] workmad3: anthroprose: exactly the purpose of EventMachine... or the entirety of NodeJS :)
[2014-03-21 18:04:27 -0400] anthroprose: big ioloop with callbacks and horizontal thread queues from points in the stack
[2014-03-21 18:04:39 -0400] anthroprose: ohh yeah, I learned all this from js/node
[2014-03-21 18:04:49 -0400] anthroprose: which is why i think its hilarious none gets callbacks
[2014-03-21 18:04:59 -0400] anthroprose: didnt you ever write JS?
[2014-03-21 18:05:48 -0400] workmad3: anthroprose: I've written plenty of JS for my sins... I just wasn't sure which bit of the stack you were wanting to be asynchronous, or how you were wanting your asynchronous pie... as an evented reactor, as processes, as threads, as continuations... :D
[2014-03-21 18:07:37 -0400] dgarstang: *sigh* knife upload? why you not work and provide no output or errors or logs?
[2014-03-21 18:07:40 -0400] anthroprose: yeah, this was just 1 route in the entire arch that realy needed it
[2014-03-21 18:09:28 -0400] kbarry: i can't seem to get my chef server to "update" the content of a tempalte file i uploaded,
[2014-03-21 18:09:46 -0400] kbarry: i have changed the template file, but when i re-run chef-client, it appears to be using the old version of the template
[2014-03-21 18:10:13 -0400] workmad3: kbarry: did you nudge the version of the cookbook and re-upload?
[2014-03-21 18:11:38 -0400] dgarstang: i run knife upload... and tcpdump.... knife upload isn't even trying to talk to the server
[2014-03-21 18:12:58 -0400] kbarry: yup
[2014-03-21 18:13:02 -0400] kbarry: tried that aswell,
[2014-03-21 18:13:43 -0400] kbarry: i am about to copy the contents of the cookbook to a folder called [cookbookname]1 and change the metadata.rb and json to reflect the new name
[2014-03-21 18:13:55 -0400] kbarry: i have deleted it from my hef server
[2014-03-21 18:13:58 -0400] kbarry: and reuploaded
[2014-03-21 18:14:02 -0400] kbarry: i nudged versions
[2014-03-21 18:14:17 -0400] kbarry: it seems its possibly holding onto it on the client
[2014-03-21 18:14:19 -0400] kbarry: er node
[2014-03-21 18:18:22 -0400] kbarry: nope, just deleted it from the node, and it replaced with the same
[2014-03-21 18:21:20 -0400] kbarry: hahahaha
[2014-03-21 18:21:29 -0400] kbarry: my mistake.
[2014-03-21 18:21:34 -0400] kbarry: i had two copies of the file,
[2014-03-21 18:21:38 -0400] kbarry: got it sorted,
[2014-03-21 18:21:45 -0400] kbarry: but now I have another problem.
[2014-03-21 18:21:50 -0400] kbarry: standby
[2014-03-21 18:25:42 -0400] DrMeta: hey, with the python cookbook, can you pip install a requirements file instead of a single package?
[2014-03-21 18:26:11 -0400] kbarry: http://pastebin.com/dcmbjDLv
[2014-03-21 18:26:46 -0400] kbarry: I am tying to produce a line in my template. I am VERY new to ruby/chef in general, and i think my syntax might be "good" i think my context is wrong, as the error says it has no idea what partial_search is.
[2014-03-21 18:27:14 -0400] rberger: Anyone know how to use the community jenkins cookbook to enable security on Jenkins? I presume there is a way with jenkins_script but can't find the specific actions to just enable security
[2014-03-21 18:31:00 -0400] CPS: kbarry: look up helper methods for templates
[2014-03-21 18:31:03 -0400] CPS: that may be what you need
[2014-03-21 18:31:31 -0400] kbarry: is it not possible to use partial_search inside a template?
[2014-03-21 18:32:22 -0400] CPS: i'm sure there's a way but I don't think chef passes that in by default
[2014-03-21 18:32:30 -0400] iverson0881: kbarry: haven't tried but probably not, really should be doing that in the recipe and then output the results into a variable that can be used in a template
[2014-03-21 18:32:31 -0400] CPS: i haven't used it before though so who knows
[2014-03-21 18:32:37 -0400] iverson0881: kbarry: ie, keep your logic in recipes
[2014-03-21 18:32:50 -0400] dgarstang: Of for FFS. I put a bogus chef server into knife.rb and knife upload STILL does nothing
[2014-03-21 18:32:52 -0400] kbarry: iverson0881: i "thought" that might be what i needed to do.
[2014-03-21 18:33:08 -0400] kbarry: I'm new to ruby, so, i am unclear how to  put my stuff into the variables,
[2014-03-21 18:35:07 -0400] rgsteele: Hey guys, is there any way to get Ohai custom plugins to run before attributes are evaluated?
[2014-03-21 18:35:43 -0400] rgsteele: I'm trying to use a custom plugin in attributes/default.rb, but chef-client is bailing because it's not defined.  But, if I run ohai with the -f flag and point it at the plugin, it runs just fine
[2014-03-21 18:42:04 -0400] docwhat: Howdy! I'm writing an LWRP.  The end result is a (one or more) file that contains rows like '"Joe Cool" "Unique Hash"'  (it's actually more complicated, but "Joe Cool" and "Unique Hash" are the two variables needed per line).  Can I allow an attribute to be called multiple times? Or do I have to have a resource per user that some how ties to a specific file?  Because the list of users/hashes will be different per file.
[2014-03-21 18:47:19 -0400] ostrev: hello cooks! what's the reference called for the chef cookbook directory when running check-solo?
[2014-03-21 18:48:23 -0400] ostrev: so i'm running knife-solo and i want to check a data bag file, instead of ::File.exists('/static/location/file') i would want to put in a reference
[2014-03-21 19:02:27 -0400] dgarstang: Why would this... http://pastebin.com/T4Z3ZiqT ... knife config file not do ANYTHING? Note the bogus chef server url. Running with 'knife upload -c ~/.chef/hub/knife.rb -V /'
[2014-03-21 19:20:38 -0400] dgarstang: Why would this... http://pastebin.com/T4Z3ZiqT ... knife config file not do ANYTHING? Note the bogus chef server url. Running with 'knife upload -c ~/.chef/hub/knife.rb -V /'
[2014-03-21 19:30:55 -0400] sdgvf: how does one configure foodcritic to not examine 'spec/'? I usually just 'foodcritic .' when in the root of the cookbook
[2014-03-21 19:40:18 -0400] lmickh: Is there a way to figure out what file determined a given attribute in the chef run?
[2014-03-21 19:42:43 -0400] ddr_: hiall. how can i test cookbook with environment in test-kitchen?
[2014-03-21 19:43:19 -0400] ddr_:     environments_path: "../../environments"
[2014-03-21 19:43:19 -0400] ddr_:     environment: "production" in kitchen.yml don/t work
[2014-03-21 19:44:38 -0400] TaRaKa: jonc: When are you planning on doing your release?
[2014-03-21 19:51:05 -0400] rgsteele: is it possible to use library methods in attribute files?  The docs say so, but dont' indicate how
[2014-03-21 19:51:15 -0400] rgsteele: Using the Chef::Recipe namespace clearly won't work
[2014-03-21 19:51:34 -0400] rgsteele: And there is no Chef::Attribute namespace
[2014-03-21 19:59:59 -0400] shawn_sher: If you look at the code where the attributes files are read in and instance_eval'd, you might be able to see what is in scope at that time
[2014-03-21 20:00:26 -0400] rgsteele: Well, I was thinking maybe I could use Chef::Node::Attribute somehow
[2014-03-21 20:00:49 -0400] rgsteele: Maybe just .new, and set it directly as an attr?
[2014-03-21 20:02:50 -0400] shawn_sher: I don't remember well enough to have a good answer, but I think you can see where it's happening and find enough clues in the chef code
[2014-03-21 20:08:24 -0400] bhahn: hello
[2014-03-21 20:10:35 -0400] stormerider: so im not sure if there is a more appropriate channel for this, but does anyone know how to customize rubocop to match internal style guides at our org? (ie, using tabs instead of 2 spaces, etc)
[2014-03-21 20:15:38 -0400] garnertb: Hello all, has anyone else had problems with the java community cookbook failing while attempting to download the Oracle JDK?
[2014-03-21 20:16:16 -0400] garnertb: Here's the trace: http://pastebin.com/tZqt1rmX
[2014-03-21 20:20:01 -0400] failshell: looking at https://github.com/opscode-cookbooks/yum/blob/master/resources/repository.rb#L60 right now. what is this alias_method? does it mean the old attribute should work?
[2014-03-21 20:22:39 -0400] jpr_: garnertb: are you sure the checksum is correct?
[2014-03-21 20:23:03 -0400] jpr_: i get 80212f7748c2671b89b6085000717c747851db004409dce3bb97f3a2aeb91cdd for that bin
[2014-03-21 20:23:07 -0400] jpr_: (sha256)
[2014-03-21 20:23:59 -0400] garnertb: Hmm, let me try that.
[2014-03-21 20:27:07 -0400] garnertb: jpr_: I tried updating the checksum but that didn't help.  Were you able to download the file manually from here: http://download.oracle.com/otn-pub/java/jdk/6u45-b06/jdk-6u45-linux-x64.bin?
[2014-03-21 20:28:17 -0400] jpr_: yes
[2014-03-21 20:42:16 -0400] bsteinfeld: Hello, quick question. I've noticed that when I do a search in chef (knife exec -E "search ....") the results are slightly out of date.
[2014-03-21 20:42:24 -0400] bsteinfeld: Is there any way to force an update of the metadata?
[2014-03-21 20:53:28 -0400] kbarry: I'd like to download the json/rb file representation of a node from my chef-server
[2014-03-21 20:53:45 -0400] kbarry: (to use as a template for knife node from file)
[2014-03-21 20:55:07 -0400] laurent\: kbarry: knife node show -Fjs node-id
[2014-03-21 20:55:23 -0400] kbarry: laurent\: thank you
[2014-03-21 20:56:08 -0400] laurent\: use -l to get more than the normal attributes
[2014-03-21 20:56:18 -0400] jpr_: is it possible to get a debug dump of the dependency constraints?
[2014-03-21 20:56:44 -0400] maxmanders: I've been reading a blog post that describes different _types_ of cookbooks, e.g. an Application cookbook to wrap up a specific app deploy; and Library cookbooks that just expose LWRPs etc.  Not sure if test-kitchen would be appropriate for testing such _Library_ cookbooks.  What are people's thoughts on testing cookbooks that just expose LWRPs?
[2014-03-21 20:56:47 -0400] jpr_: erchef looks like it has a 'depsolver' api endpoint, but I can't seem to hit it corectly
[2014-03-21 20:59:07 -0400] dgarstang: *sigh* i just cant get knife upload to work
[2014-03-21 21:00:00 -0400] jpr_: dgarstang: does knife download work?
[2014-03-21 21:00:06 -0400] dgarstang: jpr_: it does
[2014-03-21 21:00:50 -0400] jpr_: dgarstang: what are you trying to upload
[2014-03-21 21:00:52 -0400] dgarstang: 'knife-us1 upload roles' == 'ERROR: Attempt to use relative path 'roles' when current directory is outside the repository path'
[2014-03-21 21:01:05 -0400] dgarstang: other variations include nothing...
[2014-03-21 21:01:12 -0400] dgarstang: ... even with -V
[2014-03-21 21:01:46 -0400] Slashterix: Hello. Does anyone know why https://github.com/opscode-cookbooks/apache2/blob/master/definitions/apache_site.rb uses restart instead of reload? As best I can tell, reload would be better.
[2014-03-21 21:02:12 -0400] Slashterix: I've been having issues where apache fails to restart due to long running php-cgi processes
[2014-03-21 21:03:13 -0400] pcn: Has anyone used knife vsphere vm config?
[2014-03-21 21:03:24 -0400] jpr_: pcn: i have experimented
[2014-03-21 21:03:31 -0400] dgarstang: jpr_: roles
[2014-03-21 21:03:34 -0400] jpr_: dgarstang: is the earlier pastebin
[2014-03-21 21:03:43 -0400] dgarstang: jpr_: yes?
[2014-03-21 21:03:56 -0400] jpr_: dgarstang: the config you used when getting the roles error?
[2014-03-21 21:03:56 -0400] pcn: jpr_: I'm looking for how to specify the mac address of ethernet1, ethernet0, etc.
[2014-03-21 21:04:01 -0400] dgarstang: jpr_: even with a bogus chef server url, it does nothing
[2014-03-21 21:04:17 -0400] dgarstang: jpr_: no, that config was causing knife to return immediately and do nothing.
[2014-03-21 21:04:18 -0400] jpr_: pcn: you can't unless you add a plugin
[2014-03-21 21:04:25 -0400] pcn: I see that vmware has docs for the resources, but I don't know how they should look when passing to knife
[2014-03-21 21:04:41 -0400] pcn: Hmm...
[2014-03-21 21:04:48 -0400] pcn: jpr_: know of any examples for this sort of thing?
[2014-03-21 21:05:02 -0400] jpr_: dgarstang: can you paste the one with the roles problem?
[2014-03-21 21:05:07 -0400] dgarstang: jpr_: i think part of the issue is the cookbooks_path. Those cookbooks arent in the same git repo as the roles. Roles are in one git repo, and each cookbook is in its own repo, so a knife uplaod should NOT upload those cookbooks, but if you remove the cookbooks_path it doesnt' do anything
[2014-03-21 21:05:28 -0400] jpr_: pcn: ife vsphere vm clone vm9.dev.polarmobile.com --chostname vm9 --cdomain dev.polarmobile.com --cips 10.2.52.9/16 --cgw 10.
[2014-03-21 21:05:32 -0400] pcn: jpr_: can you verify that?  The docstring says that "any property of type xs:string is supported"
[2014-03-21 21:05:35 -0400] jpr_: oops
[2014-03-21 21:05:39 -0400] jpr_: pcn: https://gist.github.com/shellbj/5685674
[2014-03-21 21:05:41 -0400] pcn: I'm not lookig for clone, though
[2014-03-21 21:06:01 -0400] dgarstang: jpr_: http://pastebin.com/FbT48eZB
[2014-03-21 21:07:48 -0400] dgarstang: so, basically... how do you knife upload excluding cookbooks?
[2014-03-21 21:08:04 -0400] dgarstang: or, put another way, how do you knife upload just roles?
[2014-03-21 21:08:11 -0400] jpr_: dgarstang: you can push an arg
[2014-03-21 21:08:15 -0400] jpr_: knife upload roles
[2014-03-21 21:08:24 -0400] jpr_: knife upload environments
[2014-03-21 21:08:33 -0400] jpr_: knife upload environments/qa.rb
[2014-03-21 21:08:46 -0400] dgarstang: jpr_: yah so that, with the config I put into pastebin, is still giving me 'ERROR: Attempt to use relative path 'roles' when current directory is outside the repository path'
[2014-03-21 21:08:57 -0400] doomviking: might be a Rakefile in there too
[2014-03-21 21:09:08 -0400] jpr_: pcn: http://pubs.vmware.com/vi3/sdk/ReferenceGuide/vim.vm.ConfigSpec.html does that actually say macaddress?
[2014-03-21 21:09:09 -0400] dgarstang: jpr_: if I use /roles instead, knife goes back to doing nothing
[2014-03-21 21:09:38 -0400] jpr_: dgarstang: what is the path to your roles dir?
[2014-03-21 21:10:18 -0400] dgarstang: jpr: /Users/dgarstang/git/chef-sauce/roles
[2014-03-21 21:12:29 -0400] pcn: jpr_: do you think there's a way to dump a list of supported properties/
[2014-03-21 21:13:16 -0400] jpr_: pcn: i don't know
[2014-03-21 21:14:47 -0400] a13x212: any easy way to do in place file edits with chef?
[2014-03-21 21:14:51 -0400] pcn: jpr_: I'm having trouble figuring out what the device name is, because I start at http://pubs.vmware.com/vi3/sdk/ReferenceGuide/vim.vm.ConfigSpec.html, go to http://pubs.vmware.com/vi3/sdk/ReferenceGuide/vim.vm.device.VirtualDeviceSpec.html, then go to http://pubs.vmware.com/vi3/sdk/ReferenceGuide/vim.vm.device.VirtualDevice.html, then land at
[2014-03-21 21:14:53 -0400] pcn: http://pubs.vmware.com/vi3/sdk/ReferenceGuide/vim.vm.device.VirtualEthernetCard.html
[2014-03-21 21:15:11 -0400] pcn: and I don't see how to name the damn device
[2014-03-21 21:17:27 -0400] jpr_: dgarstang: (I'm trying to replicate the problem)
[2014-03-21 21:17:54 -0400] pcn: jpr_: though now that I've looked at that again, and looked at the gist you posted, and looked at rbvmomi, it looks like the gist is doing the right thing?
[2014-03-21 21:18:09 -0400] jpr_: pcn: probably, but i have not tested it
[2014-03-21 21:18:23 -0400] jpr_: pcn: we are moving off static dhcp
[2014-03-21 21:18:31 -0400] jpr_: so no longer need the macaddress hack
[2014-03-21 21:18:39 -0400] dgarstang: jpr_: thanks
[2014-03-21 21:18:40 -0400] jpr_: just going to directly set the host and IP
[2014-03-21 21:19:05 -0400] pcn: jpr_: thanks, then.  I'll clone that.
[2014-03-21 21:33:47 -0400] jpr_: dgarstang: ok, i can generate the error now
[2014-03-21 21:33:58 -0400] dgarstang: jpr_: \o/
[2014-03-21 21:34:05 -0400] jpr_: dgarstang: are you setting knife[:chef_repo_path] somewhere?
[2014-03-21 21:34:31 -0400] dgarstang: jpr_: I had that previously, but it's commented.
[2014-03-21 21:34:45 -0400] dgarstang: jpr_: only have that enabled for downloads
[2014-03-21 21:34:57 -0400] jpr_: dgarstang: how so?
[2014-03-21 21:35:16 -0400] dgarstang: jpr_: Well, if I want to do a download, that setting is required, so knife knows where to download to
[2014-03-21 21:35:35 -0400] jpr_: it should just guess relative to cwd
[2014-03-21 21:35:59 -0400] dgarstang: jpr_: we don't want that tho... because the repo with the roles etc doesn't have the coobooks
[2014-03-21 21:36:06 -0400] jpr_: dgarstang: anyhow, I replicated with knife[:chef_repo_path] set to an absolute path
[2014-03-21 21:36:10 -0400] dgarstang: jpr_: the cookbooks are in separate repos
[2014-03-21 21:36:30 -0400] dgarstang: jpr_: well, mine is commented out, so I'm not sure what that tells us?
[2014-03-21 21:36:56 -0400] jpr_: dgarstang: https://github.com/opscode/chef/blob/294f9770d993b3ad6d504470a5ab1a9cbac59231/lib/chef/chef_fs/knife.rb#L105
[2014-03-21 21:37:33 -0400] dgarstang: jpr_: I dunno. just really frustrated.
[2014-03-21 21:37:42 -0400] jpr_: i hear you
[2014-03-21 21:38:06 -0400] dgarstang: jpr_: multiplied by 5 amazon and 2 gce regions
[2014-03-21 21:38:16 -0400] dgarstang: == ~ 7 knife configs
[2014-03-21 21:40:03 -0400] someara: chef-metal?
[2014-03-21 21:40:19 -0400] someara: not sure if it has gce support yet
[2014-03-21 21:40:53 -0400] dgarstang: someara: how's that help?
[2014-03-21 21:42:04 -0400] someara: not sure. that's why I put question mark after it. I haven't had a chance to play with it yet, but its supposed to let you describe a cluster of machines and has IaaS plugins
[2014-03-21 21:42:56 -0400] dgarstang: someara: my issue relates to having too many chef servers, and a knife config that doesn't work with the generally accepted putting of each cookbook into it's own repo.
[2014-03-21 21:43:25 -0400] jpr_: dgarstang: what about knife[:repository] ?
[2014-03-21 21:43:32 -0400] jpr_: dgarstang: is that set somewhere?
[2014-03-21 21:44:15 -0400] dgarstang: jpr_: No, and there's no mention of that setting at http://docs.opscode.com/config_rb_knife.html
[2014-03-21 21:44:55 -0400] jpr_: dgarstang: http://docs.opscode.com/config_rb_knife_optional_settings.html
[2014-03-21 21:45:39 -0400] dgarstang: jpr_: it's not set, but I don't think that would help
[2014-03-21 21:45:48 -0400] jpr_: yah, i can't replicate with that
[2014-03-21 21:45:59 -0400] jpr_: only with knife[:chef_repo_path]
[2014-03-21 21:46:07 -0400] jpr_: set to an absolute value
[2014-03-21 21:46:16 -0400] jpr_: and running the upload outside
[2014-03-21 21:46:19 -0400] jpr_: that path
[2014-03-21 21:46:19 -0400] dgarstang: jpr_: it still won't stop knife trying to upload cookbooks
[2014-03-21 21:46:35 -0400] jpr_: cookbook_path [ './cookbooks' ]
[2014-03-21 21:46:41 -0400] jpr_: its meant to be an array
[2014-03-21 21:46:46 -0400] jpr_: so I think that saves you here
[2014-03-21 21:46:47 -0400] dgarstang: jpr_: that's incorrect.
[2014-03-21 21:46:57 -0400] jpr_: sorry, thats mine
[2014-03-21 21:46:57 -0400] jpr_: ['/tmp/foo']
[2014-03-21 21:47:04 -0400] jpr_: its an absolute path
[2014-03-21 21:47:19 -0400] dgarstang: jpr_: that gets me the knife-returns-straight-away-and-does-nothing-even-with-verbose-turned on thing
[2014-03-21 21:47:42 -0400] jpr_: dodo you have any cookbooks in /tmp/foo?
[2014-03-21 21:47:51 -0400] jpr_: sorry!
[2014-03-21 21:47:56 -0400] dgarstang: jpr_: No
[2014-03-21 21:47:58 -0400] jpr_: dodo was a bad autocomplete
[2014-03-21 21:48:11 -0400] jpr_: dgarstang: that's why
[2014-03-21 21:48:17 -0400] dgarstang: jpr_: thanks for your help. i'm giving up for now. too frustrated to think straight
[2014-03-21 21:48:19 -0400] jpr_: dgarstang: try -VV
[2014-03-21 21:48:30 -0400] dgarstang: jpr_: Well... we don't want to upload any cookbooks
[2014-03-21 21:48:42 -0400] jpr_: -VV maximizes debug output
[2014-03-21 21:49:01 -0400] dgarstang: jpr_: kk
[2014-03-21 21:49:57 -0400] dgarstang: jpr_: so I made an empty cookbook directory... put that in knife.rb... ran 'knife-us1 upload /roles -VV' and got no output
[2014-03-21 21:50:28 -0400] jpr_: yah, me neither if I mock your setup
[2014-03-21 21:50:45 -0400] dgarstang: jpr_: this is crazy.
[2014-03-21 21:51:20 -0400] dgarstang: given that it's widely accepted that you put cookbooks in their own repo, everyone must face this issue
[2014-03-21 21:51:21 -0400] jpr_: dgarstang: I'm pretty sure its knife[:chef_repo_path] some how - you can see it in the source code
[2014-03-21 21:51:31 -0400] jpr_: unless there is some case sensitivity issues
[2014-03-21 21:51:58 -0400] jpr_: (there is/was a bug filed on that for windows)
[2014-03-21 21:53:40 -0400] jpr_: dgarstang: wait - what is the current state
[2014-03-21 21:53:56 -0400] jpr_: knife-us1 upload /roles -VV just returns?
[2014-03-21 21:54:09 -0400] jpr_: dgarstang: what are you expecting it to do?
[2014-03-21 21:54:19 -0400] dgarstang: jpr_: it was. hang on
[2014-03-21 22:04:26 -0400] jpr_: dgarstang: any luck?
[2014-03-21 22:07:05 -0400] dgarstang: jpr_: i got it to work by creating an empty cookbook dir and pointing knife.rb at that
[2014-03-21 22:18:09 -0400] kbarry: Anyoen using the zookeeper cookbook?
[2014-03-21 22:18:40 -0400] kbarry: were running into an issue at the very beginning of the zookeeper::zookeeper recipe
[2014-03-21 22:18:52 -0400] kbarry: chef_gem "zookeeper"
[2014-03-21 22:24:33 -0400] scalp42: kbarry whats the output
[2014-03-21 22:28:03 -0400] kbarry: scalp42:  standby
[2014-03-21 22:28:23 -0400] scalp42: (im not sure I can help, but will def need some log)
[2014-03-21 22:29:25 -0400] kbarry: http://pastebin.com/qSAq0b93
[2014-03-21 22:29:29 -0400] kbarry: scalp42: thank ahead of time
[2014-03-21 22:29:49 -0400] kbarry: we "think" its just a lack of the recipe saying is depends on ruby being installed
[2014-03-21 22:29:52 -0400] scalp42: I could be wrong but you can try depends on build-essential
[2014-03-21 22:30:10 -0400] scalp42: this one: https://github.com/opscode-cookbooks/build-essential
[2014-03-21 22:30:42 -0400] scalp42: and maybe set compile_time to true to be on safe side (depending on what you're exactly doing)
[2014-03-21 22:30:45 -0400] scalp42: but I'm no expert
[2014-03-21 22:31:00 -0400] scalp42: ruby is already installed fyi
[2014-03-21 22:31:20 -0400] scalp42: chef_gem use embedded ruby, you just missing some libs
[2014-03-21 22:32:54 -0400] scalp42: kbarry: https://gist.github.com/scalp42/cbee238ac552145bd186
[2014-03-21 22:33:05 -0400] scalp42: should fix your issue
[2014-03-21 22:33:39 -0400] kbarry: http://pastebin.com/e4RgQDqW
[2014-03-21 22:33:47 -0400] kbarry: i failed to include the entire log
[2014-03-21 22:33:53 -0400] kbarry: i added the beginning of the log
[2014-03-21 22:34:14 -0400] kbarry: where is shows the build-essentials as a dependency
[2014-03-21 22:34:23 -0400] scalp42: I see
[2014-03-21 22:34:28 -0400] scalp42: did you set that attribute?
[2014-03-21 22:34:39 -0400] kbarry: set what attribute?
[2014-03-21 22:34:47 -0400] scalp42: look in the gist please
[2014-03-21 22:34:58 -0400] scalp42: set this somewhere: default['build-essential']['compile_time'] = true
[2014-03-21 22:35:30 -0400] scalp42: its needed
[2014-03-21 22:46:06 -0400] kbarry: i put default['build-essential']['compile_time'] = true in the attributes/default.rb of the zookeeper recipe (just for testing)
[2014-03-21 22:46:10 -0400] kbarry: still not working.
[2014-03-21 22:47:02 -0400] scalp42: let me try to see whats needed for that gem hang on
[2014-03-21 22:47:11 -0400] scalp42: are you on ubuntu?
[2014-03-21 22:47:19 -0400] scalp42: I just have ubuntu boxes around
[2014-03-21 22:49:06 -0400] scalp42: I cant reproduce it
[2014-03-21 22:49:22 -0400] scalp42: https://gist.github.com/scalp42/a0cd4892d085ab861faa
[2014-03-21 22:49:39 -0400] kbarry: centos
[2014-03-21 22:50:03 -0400] scalp42: what you need is fine what package is needed
[2014-03-21 22:50:19 -0400] scalp42: and have it installed at compile time
[2014-03-21 22:50:21 -0400] scalp42: package('mypackage-devel') { action :nothing }.run_action(:install)
[2014-03-21 22:53:33 -0400] scalp42: s/fine/find
[2014-03-21 22:53:42 -0400] scalp42: s/what/which
[2014-03-21 22:54:15 -0400] kbarry: the "package('mypackage-devel') { action :nothing }.run_action(:install)",
[2014-03-21 22:54:24 -0400] kbarry: i think I am too nuub to know what that means.
[2014-03-21 22:54:44 -0400] kbarry: it "kinda" looks like a block in a recipe
[2014-03-21 22:56:22 -0400] scalp42: sorry you pretty much missing a package
[2014-03-21 22:56:26 -0400] scalp42: for that gem to install
[2014-03-21 22:56:29 -0400] scalp42: I dont have a centos box right now
[2014-03-21 22:56:34 -0400] scalp42: which centos version ?
[2014-03-21 22:56:41 -0400] scalp42: could try in vagrant I guess
[2014-03-21 22:58:42 -0400] scalp42: oh wait
[2014-03-21 22:58:50 -0400] scalp42: didnt look enough at your log
[2014-03-21 22:59:03 -0400] scalp42: kbarry: "sh: patch: command not found"
[2014-03-21 22:59:05 -0400] scalp42: here you go
[2014-03-21 22:59:19 -0400] scalp42: patch -p0 < patches/zkc-3.4.5-logging.patch 2>&1
[2014-03-21 22:59:23 -0400] scalp42: thats why it blows u
[2014-03-21 22:59:24 -0400] scalp42: *up
[2014-03-21 23:00:16 -0400] scalp42: package 'patch'
[2014-03-21 23:00:22 -0400] scalp42: that will fix it
[2014-03-21 23:06:57 -0400] kbarry: so lemme see if i get this
[2014-03-21 23:09:39 -0400] scalp42: I updated the gist for you: https://gist.github.com/scalp42/cbee238ac552145bd186
[2014-03-21 23:09:58 -0400] kbarry: there isthanks
[2014-03-21 23:10:02 -0400] kbarry: standby
[2014-03-21 23:12:28 -0400] Embalmed: is there a way to add additional actions to service resource?
[2014-03-21 23:12:48 -0400] Embalmed: one of my init scripts needs a reconfig action not a reload
[2014-03-21 23:13:19 -0400] Embalmed: [2014-03-21T23:08:44+00:00] INFO: Processing service[nfsen] action reconfig (neteng::nfsen-server line 66)
[2014-03-21 23:13:23 -0400] Embalmed: ================================================================================
[2014-03-21 23:13:25 -0400] Embalmed: Error executing action `reconfig` on resource 'service[nfsen]'
[2014-03-21 23:13:27 -0400] Embalmed: ================================================================================
[2014-03-21 23:13:31 -0400] Embalmed: NameError
[2014-03-21 23:13:33 -0400] Embalmed: ---------
[2014-03-21 23:13:35 -0400] Embalmed: Cannot find a resource for action_reconfig on ubuntu version 12.04
[2014-03-21 23:13:36 -0400] scalp42: jesus
[2014-03-21 23:13:48 -0400] Embalmed: oh no, i pasted 5 lines1
[2014-03-21 23:13:52 -0400] scalp42: please use gist.github.com or paste for your output Embalmed
[2014-03-21 23:14:09 -0400] Embalmed: how will our irc clients ever keep up
[2014-03-21 23:14:16 -0400] Embalmed: :P
[2014-03-21 23:14:26 -0400] scalp42: and to answer your question
[2014-03-21 23:14:29 -0400] scalp42: you can yes
[2014-03-21 23:14:47 -0400] scalp42: hang on
[2014-03-21 23:16:09 -0400] scalp42: Embalmed thats how you would add that reconfig support: https://gist.github.com/scalp42/1fb3668a215a0babf983
[2014-03-21 23:16:22 -0400] Embalmed: oh sweet, that's easy
[2014-03-21 23:16:26 -0400] Embalmed: thanks scalp42
[2014-03-21 23:16:34 -0400] scalp42: assuming it supports it of course
[2014-03-21 23:16:35 -0400] scalp42: np
[2014-03-21 23:18:30 -0400] Embalmed: hm
[2014-03-21 23:18:39 -0400] Embalmed: my current action on that service is   action[:enable, :start]
[2014-03-21 23:19:07 -0400] scalp42: do you have a notify somewhere?
[2014-03-21 23:19:09 -0400] Embalmed: yea
[2014-03-21 23:19:16 -0400] Embalmed: on a template
[2014-03-21 23:19:24 -0400] Embalmed: so prolly fine, let me roll out and test
[2014-03-21 23:19:39 -0400] scalp42: notifies :reconfig, 'service[nfsen]'
[2014-03-21 23:19:55 -0400] Embalmed: yep thats what i'm already doin
[2014-03-21 23:19:57 -0400] scalp42: if you add that support to it, should be good
[2014-03-21 23:20:03 -0400] scalp42: cool
[2014-03-21 23:20:07 -0400] Embalmed: excellent
[2014-03-21 23:21:27 -0400] kbarry: scalp42: that didnt seem to help.
[2014-03-21 23:21:35 -0400] scalp42: both solutions ?
[2014-03-21 23:21:48 -0400] scalp42: gotta be a different issue, can you give me the output please
[2014-03-21 23:23:49 -0400] kbarry: sorry, the second olution worked
[2014-03-21 23:23:50 -0400] kbarry: package('patch') { action :nothing }.run_action(:install)
[2014-03-21 23:23:58 -0400] kbarry: first one, no likey
[2014-03-21 23:24:04 -0400] kbarry: Thank you
[2014-03-21 23:24:31 -0400] scalp42: okay it makes sense
[2014-03-21 23:24:50 -0400] scalp42: chef_gem runs before that package 'patch' thats why
[2014-03-21 23:25:05 -0400] scalp42: in the 2nd solution it runs at compile time, so its there when its needed
[2014-03-21 23:25:13 -0400] scalp42: cool you all sorted out
[2014-03-21 23:26:22 -0400] scalp42: also that would be a good candidate for a PR on that cookbook kbarry
[2014-03-21 23:26:28 -0400] scalp42: someone else gonna run into it
[2014-03-21 23:26:46 -0400] kbarry: Agreed.
[2014-03-21 23:26:51 -0400] kbarry: I'll get in contact with them.
[2014-03-21 23:26:54 -0400] scalp42: awesome
[2014-03-21 23:28:16 -0400] scalp42: dgarstang, re: multiple chef server, been using https://github.com/trobrock/chefvm works like a charm
[2014-03-21 23:37:33 -0400] Embalmed: worked a treat scalp42
[2014-03-21 23:37:48 -0400] Embalmed: cheers =
[2014-03-21 23:37:51 -0400] Embalmed: =)
[2014-03-21 23:39:00 -0400] scalp42: awesome
[2014-03-21 23:42:24 -0400] sdgvf: took me too long to figure out that I needed to use the Dpkg provider when installing a .deb without a repo
[2014-03-21 23:42:25 -0400] sdgvf: the "no candidate version" error message is rather unintuitive
[2014-03-21 23:43:24 -0400] scalp42: should have asked
[2014-03-21 23:43:34 -0400] scalp42: ran into the same issue couple days ago
[2014-03-21 23:44:06 -0400] scalp42: https://gist.github.com/scalp42/957c032f05ec9bb09872
[2014-03-21 23:51:51 -0400] kbarry: what "is" file_cache_path

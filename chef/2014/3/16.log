[2014-03-16 00:40:03 -0400] TECHISH: Hello chefs
[2014-03-16 00:55:53 -0400] trilitheus: if anyone read my question - it seems to work - setting an attribute early in chef run and then setting it to empty string in a ruby block later in the recipe - am i right in thinking this attribute is effectively transient for the period of the chef run and never saved to the chef_server?
[2014-03-16 01:29:34 -0400] CADBOT: Hi all. I was trying to use the ark cookbook
[2014-03-16 01:29:42 -0400] CADBOT: but this line:
[2014-03-16 01:30:03 -0400] CADBOT: pkgs += %w(gtar) if platform?('freebsd')pkgs += %w(gtar)
[2014-03-16 01:30:08 -0400] CADBOT: is causing it to break
[2014-03-16 01:30:22 -0400] CADBOT: I'm provisioning a ubuntu base box
[2014-03-16 01:30:45 -0400] CADBOT: but it if platform('freebsd') is evaluating to true
[2014-03-16 01:30:46 -0400] CADBOT: for some reason
[2014-03-16 01:30:52 -0400] CADBOT: and causing it to try and install gtar
[2014-03-16 01:31:02 -0400] CADBOT: which fails as that isn't on ubunt
[2014-03-16 01:31:18 -0400] CADBOT: Any dieas?
[2014-03-16 01:48:37 -0400] spheromak: CADBOT: whats 'ohai platform' return ?
[2014-03-16 01:54:09 -0400] CADBOT: lemme check
[2014-03-16 01:54:45 -0400] CADBOT: how specifically should I run that?
[2014-03-16 01:58:09 -0400] CADDD: here is what it ran
[2014-03-16 01:58:22 -0400] CADDD: vagrant@personal-provisioner-berkshelf:/var/chef/cache$ ohai platform
[2014-03-16 01:58:23 -0400] CADDD: [
[2014-03-16 01:58:23 -0400] CADDD:   "ubuntu"
[2014-03-16 01:58:24 -0400] CADDD: ]
[2014-03-16 01:58:24 -0400] CADDD: vagrant@personal-provisioner-berkshelf:/var/chef/cache$ ohai platform
[2014-03-16 01:58:24 -0400] CADDD: [
[2014-03-16 01:58:25 -0400] CADDD:   "ubuntu"
[2014-03-16 01:58:25 -0400] CADDD: ]
[2014-03-16 01:58:39 -0400] CADDD: It is saying ubuntu from ohai
[2014-03-16 01:59:09 -0400] CADDD: So not sure :/
[2014-03-16 01:59:22 -0400] CADDD: It really seems like if platform? isn't working right
[2014-03-16 01:59:43 -0400] CADDD: when I deleted the line that added the gtar package if the platform was detected as freebsd
[2014-03-16 01:59:45 -0400] CADDD: everything worked
[2014-03-16 02:01:03 -0400] CADDD: Have any of you ever had issues with if platform not working?
[2014-03-16 02:27:12 -0400] mattsurabian: so what are best practices around testing a cookbook that expects a server to be in a pre-existing state? For example, a cookbook that attempts to notify a restart of apache expects a node with apache already installed on it. Is it best to just include the apache install recipe within the configuration recipe? it's already considered as a dependecy. Just getting into test kitchen and trying to figure out how to account for this kind of
[2014-03-16 02:27:13 -0400] mattsurabian: dependency
[2014-03-16 02:32:14 -0400] mattsurabian: going through the getting started guide anyway, maybe it'll be clearer after that. Just wondering how I should be thinking about that when testing individual cookbook repositories.
[2014-03-16 15:26:08 -0400] mveitas: mattsurabian: You can start by doing unit tests with Chefspec and then move to the next step with Test Kitchen
[2014-03-16 15:54:38 -0400] coredump: is there a way to export roles/envs/etc in .rb format instead of json?
[2014-03-16 15:55:51 -0400] mveitas: coredump: I don't believe there is
[2014-03-16 15:56:23 -0400] coredump: ugh
[2014-03-16 15:56:24 -0400] coredump: ok
[2014-03-16 15:59:27 -0400] mveitas: is there a reason why you want to have them in ruby?
[2014-03-16 16:00:24 -0400] mveitas: from what I have found, is that most people are actually using json to store their roles, envs, etc.  BUT that is only from my limited observations?
[2014-03-16 16:02:38 -0400] mveitas: you could easily write a plugin to do it for you, extract the json and just format it as a ruby file
[2014-03-16 16:03:03 -0400] mveitas: coredump: is it more of a preference to just keep things in .rb?
[2014-03-16 16:04:01 -0400] coredump: I think .rb files are easier to edit/read, I dislike json as a format to edit manually. I guess I should stop doing so many edits manually...
[2014-03-16 16:04:08 -0400] atomic-penguin: I keep mine stored as .rb
[2014-03-16 16:04:41 -0400] coredump: or even yml
[2014-03-16 16:06:04 -0400] mveitas: the .rb files are really just semi-flatted hashes, so a knife plugin export as -ruby would be easy to write
[2014-03-16 17:14:27 -0400] mhenrixon: Anyone able to point me in the right direction on release management on cookbooks? knife spork don't seem to work for me
[2014-03-16 17:41:56 -0400] mhenrixon: HTTP Request Returned 404 Object Not Found: I don't know how to search for users data objects.
[2014-03-16 17:42:07 -0400] mhenrixon: What is up with that? @coderanger ?
[2014-03-16 17:50:07 -0400] c_t: mhenrixon: users aren't indexed by the search, just clients
[2014-03-16 17:50:23 -0400] c_t: unless you have a users databag, then you'd get something back
[2014-03-16 18:27:38 -0400] cqql: Hi. I have several servers in the same environment, but every one of them should serve my app in another language. Where do I manage this best? Can I set node specific attributes without creating a recipe for each?
[2014-03-16 18:29:22 -0400] mveitas: cqql: if you were doing this without chef, how would you identify which servers were assigned to a specific language
[2014-03-16 18:30:29 -0400] mveitas: cqql: You could pass in a node attribute into the run list at bootstrap of the server
[2014-03-16 18:31:35 -0400] cqql: mveitas: How would I do that?
[2014-03-16 18:32:00 -0400] cqql: Without chef, I would hardcode it with vim in a config file
[2014-03-16 18:32:16 -0400] mveitas: are you using cloud-init to bootstrap the servers with chef?
[2014-03-16 18:32:24 -0400] cqql: And that is exactly, what I am trying to do, just many servers at once
[2014-03-16 18:33:31 -0400] cqql: No, I have not heard of that until now
[2014-03-16 18:34:09 -0400] mveitas: you could use a databag to store the mappings between a host name and the language
[2014-03-16 18:34:53 -0400] mveitas: or it could be some other identifier on a server
[2014-03-16 18:35:51 -0400] mveitas: you can also use chef-client -j option to pass in json attributes
[2014-03-16 18:35:53 -0400] mveitas: -j JSON_ATTRIBS,                 Load attributes from a JSON file or URL
[2014-03-16 18:35:54 -0400] mveitas:         --json-attributes
[2014-03-16 18:36:20 -0400] cqql: Hm
[2014-03-16 18:37:31 -0400] mveitas: cqql: does that help guide you any?
[2014-03-16 18:37:32 -0400] cqql: I will have a look at these options
[2014-03-16 18:38:14 -0400] cqql: Could you explain to me, what exactly is meant with FQDN? Does it have to be the server;s
[2014-03-16 18:38:27 -0400] cqql: server's dns name? Or is it just some internal identifier?
[2014-03-16 18:38:40 -0400] mveitas: FQDN: fully qualified domain name
[2014-03-16 18:39:23 -0400] cqql: So what would one put there, if a server has not DNS name?
[2014-03-16 18:40:14 -0400] mveitas: you could use the host name?
[2014-03-16 18:52:11 -0400] darkside_: you don't use DNS? refer to everything by IP?
[2014-03-16 19:01:56 -0400] savant: dns == slowww
[2014-03-16 19:10:28 -0400] resno: would it be resonable to use an ec2 instance that i turn on when needed and back off when not?
[2014-03-16 19:20:41 -0400] cqql: Sorry, for not answering. I had a phone call.
[2014-03-16 19:22:04 -0400] cqql: resno: Yes, you can do that. And if you have a really cool setup and host a big project, you may have a service, that does it automatically :)
[2014-03-16 19:22:46 -0400] resno: great.
[2014-03-16 19:26:47 -0400] zw: hi all
[2014-03-16 19:27:14 -0400] zw: quick question - can chef help auto install custom application ?
[2014-03-16 19:27:33 -0400] zw: custom application outside of apt or yum repo
[2014-03-16 19:27:44 -0400] resno: yes
[2014-03-16 19:27:54 -0400] resno: yes it can
[2014-03-16 19:28:10 -0400] zw: all i read so far on internet is the standard packages like mysql apache etc
[2014-03-16 19:28:13 -0400] resno: so for instance if its managed in git, it can do a git pull
[2014-03-16 19:28:24 -0400] resno: add configuration files etc
[2014-03-16 19:28:40 -0400] resno: whats your use case?
[2014-03-16 19:28:47 -0400] resno: if you can give more details
[2014-03-16 19:29:05 -0400] zw: the custom app I'm thinking of has its own shell script install of a wizard
[2014-03-16 19:29:39 -0400] resno: there may be a cookbook for it and you can use that
[2014-03-16 19:29:41 -0400] zw: i like to be able to auto install this web app on the VMs I have
[2014-03-16 19:30:02 -0400] zw: i went to the cookbook on opscode
[2014-03-16 19:30:20 -0400] zw: it's all the standard packages and appsmine is custom
[2014-03-16 19:30:42 -0400] zw: also i;m new to chef
[2014-03-16 19:30:54 -0400] zw: forgive if u think this is basic
[2014-03-16 19:31:29 -0400] resno: yes you can do what you want
[2014-03-16 19:31:33 -0400] zw: thx for responding resn
[2014-03-16 19:31:37 -0400] zw: resno
[2014-03-16 19:32:10 -0400] zw: is there an example u could point me to to read more to accomplish my need ?
[2014-03-16 19:32:45 -0400] resno: so i think of this in componenets
[2014-03-16 19:32:45 -0400] zw: on custom app install
[2014-03-16 19:32:50 -0400] zw: ok
[2014-03-16 19:32:59 -0400] resno: first, wheres you app code stored?
[2014-03-16 19:33:11 -0400] zw: locally on a vm
[2014-03-16 19:33:34 -0400] resno: how are the other machines going to access that code?
[2014-03-16 19:34:08 -0400] zw: they each would have to get from master i suppose
[2014-03-16 19:34:16 -0400] zw: or chef server
[2014-03-16 19:34:19 -0400] resno: so you have git running?
[2014-03-16 19:34:25 -0400] zw: not yet
[2014-03-16 19:34:40 -0400] resno: chef server doesnt store the app... its just an instrcutor of sorts
[2014-03-16 19:34:53 -0400] resno: so what i do is, store my code base in github for example
[2014-03-16 19:34:57 -0400] zw: ok thats news
[2014-03-16 19:35:44 -0400] resno: so for starters, get an idea of the steps you take to deploy your app on the vms
[2014-03-16 19:36:41 -0400] zw: hi resno big idea is to download a selected version of my install to a specified vm whenever i need
[2014-03-16 19:36:49 -0400] resno: for me, its install needed monitoring, add users, pull code (if webserver), configure apache (if web)
[2014-03-16 19:37:02 -0400] zw: thats what i need from puppet or chef
[2014-03-16 19:37:36 -0400] resno: so is wget a possibility?
[2014-03-16 19:37:39 -0400] resno: or rsync?
[2014-03-16 19:38:02 -0400] zw: maybe but i like to give chef a shot
[2014-03-16 19:38:32 -0400] resno: are you new to linux?
[2014-03-16 19:38:44 -0400] zw: so so on linux
[2014-03-16 19:39:24 -0400] resno: the big question you still have left unanswered is, how do you get your custom app to the vm
[2014-03-16 19:39:40 -0400] resno: and it seems you havent thought about this at any lengths.
[2014-03-16 19:40:01 -0400] zw: run shell script that responds to install wizard queries
[2014-03-16 19:40:32 -0400] zw: on the requested vm
[2014-03-16 19:40:34 -0400] resno: is the shell script made by the app creator or someone else?
[2014-03-16 19:40:39 -0400] resno: or you?
[2014-03-16 19:41:05 -0400] zw: me
[2014-03-16 19:41:21 -0400] resno: ok, you can replace the bash script with chef
[2014-03-16 19:41:22 -0400] zw: but i use install anywhere as my package
[2014-03-16 19:42:27 -0400] resno: to me, using chef to input in script you created is backwards
[2014-03-16 19:42:44 -0400] zw: so the shell script to kick off console mode install becomes a chef script after variable token replacement  ?
[2014-03-16 19:42:45 -0400] resno: chef can just take the lead using info you input and go from there
[2014-03-16 19:46:19 -0400] zw: resno thx for responding i'll update u soon
[2014-03-16 19:46:25 -0400] zw: good day
[2014-03-16 22:24:16 -0400] chefologist: hi, I am looking to install a jenkins plug via our chef server ..... https://wiki.jenkins-ci.org/display/JENKINS/AWS+Cloudformation+Plugin ... any assistance would be great
[2014-03-16 22:39:20 -0400] a13x212: running into this issue trying to install chef-server via chef-solo, Could not locate chef-server package matching version 'latest' for node.
[2014-03-16 22:42:52 -0400] CADBOT: Hi
[2014-03-16 22:42:57 -0400] CADBOT: Anyone around today? XD
[2014-03-16 22:44:41 -0400] CADBOT: If so I'd like to chat about some of the different use cases for roles and environments
[2014-03-16 22:44:44 -0400] CADBOT: They seem like they overlap a lot
[2014-03-16 22:51:34 -0400] mveitas: CADBOT: They have one thing in common in that they are not versioned!
[2014-03-16 22:52:02 -0400] chefologist: actually, via chef, how do I install a new plugin please ..... thanks in advance
[2014-03-16 22:52:57 -0400] CADBOT: mveitas: haha well, maybe you have a good idea about how to use them properly
[2014-03-16 22:53:00 -0400] mveitas: chefologist: https://github.com/opscode-cookbooks/jenkins
[2014-03-16 22:53:12 -0400] CADBOT: If you were using chef solo
[2014-03-16 22:53:22 -0400] CADBOT: and wanted to have like... a home computer setup thing
[2014-03-16 22:53:34 -0400] mveitas: CADBOT: there is no one recipe for success (no pun intended)
[2014-03-16 22:53:37 -0400] CADBOT: and wanted to one set of recipes in all cases
[2014-03-16 22:53:53 -0400] CADBOT: one set of recipes if it had a GUI front end (like a home computer)
[2014-03-16 22:54:08 -0400] CADBOT: and one set of operations if it was pure terminal (like a server or something)
[2014-03-16 22:54:15 -0400] CADBOT: would you use roles or environments?
[2014-03-16 22:54:24 -0400] mveitas: I use roles as a way to define the run list for a server (app server, web server)
[2014-03-16 22:54:25 -0400] CADBOT: Granted, you could probably mangle either to work in this case XD
[2014-03-16 22:54:31 -0400] a13x212: running into this issue trying to install chef-server via chef-solo, Could not locate chef-server package matching version 'latest' for node.
[2014-03-16 22:54:57 -0400] mveitas: I use environments to distinguish between various environments such as our development, testing, and production environments
[2014-03-16 22:55:29 -0400] mveitas: CADBOT: You can always create a 'wrapper' cookbook
[2014-03-16 22:55:43 -0400] mveitas: some people HATE roles, and other people love them
[2014-03-16 22:56:18 -0400] CADBOT: Eh, wrapper cookbooks don't feel right in this case
[2014-03-16 22:56:24 -0400] mveitas: so you could have a 'home_computer' cookbook that included a bunch of other stuff, similar to a role.
[2014-03-16 22:56:39 -0400] mveitas: one person's take on roles: http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/
[2014-03-16 22:56:42 -0400] CADBOT: That might just be my inexperience though lol
[2014-03-16 22:57:30 -0400] mveitas: the benefit to the application/wrapper cookbook is that it is versioned
[2014-03-16 22:58:09 -0400] mveitas: if that is important to you
[2014-03-16 22:58:30 -0400] CADBOT: In this it isn't, and I feel like it's adding more layers of indirection
[2014-03-16 22:58:40 -0400] CADBOT: I'll put some thought into it
[2014-03-16 22:58:54 -0400] CADBOT: At any rate, environments don't seem like the way to go with this one at least.
[2014-03-16 22:58:56 -0400] CADBOT: Thanks!
[2014-03-16 23:04:01 -0400] mjuszczak: What do you guys use for your github repo names for cookbooks (whether wrapper, library, role, etc.).  chef-cookbook-<name>?  Simply cookbook-<name>?  chef-<name>?
[2014-03-16 23:04:57 -0400] CADBOT: chef-<name> personally
[2014-03-16 23:08:47 -0400] someara: <name>-cookbook myself ;)
[2014-03-16 23:14:47 -0400] mjuszczak: someara: So like, roles-cookbook, blah-cookbook (if your application name is blah), etc.?
[2014-03-16 23:15:30 -0400] someara: I keep a monolithic ~/src directory
[2014-03-16 23:15:43 -0400] someara: so, ~/src/ganglia, ~/src-ganglia cookbook
[2014-03-16 23:15:59 -0400] someara: makes it easier on the command line
[2014-03-16 23:16:24 -0400] someara: then ~/src/some_application would depend on everything else it needs in the metadata
[2014-03-16 23:16:42 -0400] someara: with recipes for various components, all using "depends whatever" in the metadata
[2014-03-16 23:16:49 -0400] mjuszczak: So you use a single repo for all cookbooks?
[2014-03-16 23:17:02 -0400] someara: no, individual SCM repos per cookbook
[2014-03-16 23:17:19 -0400] mjuszczak: Can you give me an example of what an application cookbook would be like for you then?
[2014-03-16 23:17:23 -0400] someara: you want to treat cookbooks like software projects. Think of them like perl modules or rubygems or whatever
[2014-03-16 23:17:49 -0400] someara: sec let me whip something up
[2014-03-16 23:17:59 -0400] mjuszczak: so like, that myface example they use in the berkshelf docs... it would be myface-cookbook, which would have metadata in it depending on other cookbooks
[2014-03-16 23:19:16 -0400] mjuszczak: oh that'd be awesome :)
[2014-03-16 23:25:02 -0400] someara: https://gist.github.com/someara/9591343
[2014-03-16 23:25:13 -0400] someara: ^ that's the "application cookbook" pattern
[2014-03-16 23:25:49 -0400] someara: you bootstrap nodes with "myface::databass", or "myface::webserver"
[2014-03-16 23:26:36 -0400] mjuszczak: looking
[2014-03-16 23:27:21 -0400] someara: you have to install each of those cookbooks in ~/src into an artifact repository (community site, or your chef-server)
[2014-03-16 23:27:38 -0400] mjuszczak: that's awesome.  So you don't differentiate cookbooks as to whether they are a custom application (like myface) or apache? It's all just myface-cookbook and apache-cookbook in github?
[2014-03-16 23:27:48 -0400] someara: then test-kitchen/berkshelf will take care of getting them for you
[2014-03-16 23:28:26 -0400] someara: I only put the dash-cookbook on them to differentiate them from the what they're configuring
[2014-03-16 23:28:34 -0400] someara: so mysql vs mysql-cookbook
[2014-03-16 23:28:56 -0400] someara: namespaces gonna space
[2014-03-16 23:30:01 -0400] someara: roles don't fit into that model though
[2014-03-16 23:30:17 -0400] someara: because they're an extra "thing"
[2014-03-16 23:30:38 -0400] someara: all they let you do is set attributes and build run_lists anyway. you can do that in a recipe
[2014-03-16 23:30:48 -0400] someara: hence, the anti-role people
[2014-03-16 23:31:18 -0400] someara: an environment can lock down cookbook versions much like a Gemfile
[2014-03-16 23:33:02 -0400] someara: the only down side is all cookbooks end up on all nodes, needed or not
[2014-03-16 23:33:22 -0400] someara: so the webserver will have the mysql cookbook in the chef cache because myface depends on it
[2014-03-16 23:33:43 -0400] someara: a small price to pay for the ease of manipulation in my opinion
[2014-03-16 23:41:57 -0400] CADBOT: Anyone here ever tinker with AWS opsworks?
[2014-03-16 23:42:11 -0400] CADBOT: Seems like an interesting way to tinker with chef
[2014-03-16 23:42:45 -0400] mjuszczak: someara: Yeah, I don't plan on using roles in Chef.  Just role cookbooks.
[2014-03-16 23:43:03 -0400] mjuszczak: hence I'm trying to figure out how to name my roles cookbook and such.  I understand where you're coming from though
[2014-03-16 23:45:25 -0400] mjuszczak: Most public cookbooks use "chef-<name>"
[2014-03-16 23:46:31 -0400] flaccid_: mine don't
[2014-03-16 23:57:18 -0400] mjuszczak: flaccid_: Curious, what do you use?

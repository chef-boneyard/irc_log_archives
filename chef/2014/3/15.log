[2014-03-15 02:18:38 -0400] joe____: does anybody experience and how to fixed this error [2014-03-14T20:19:01+00:00] FATAL: NoMethodError: undefined method `run_list' for nil:NilClass, on chef-client for windows 10.16.2 the node use to run fine and suddenly its giving this error.
[2014-03-15 02:40:11 -0400] resno: how do people search for info only on chef?
[2014-03-15 02:40:18 -0400] resno: i get cookiing stuff all the time
[2014-03-15 03:26:52 -0400] erasmose: Hello, I have local .chef files to each project.
[2014-03-15 03:27:15 -0400] erasmose: How can I have a similar thing for berkshelf so it doesn't put everything in /home/user/.berkshelf
[2014-03-15 03:27:17 -0400] erasmose: ?
[2014-03-15 04:26:07 -0400] spheromak: ereslibre: .berkshelf and ~/.berkshelf
[2014-03-15 04:35:25 -0400] spheromak: resno: use opscode to qualify
[2014-03-15 05:15:57 -0400] shoelessone: So, what's the deal with Chef and telling me things about needing Homebrew?
[2014-03-15 05:16:07 -0400] shoelessone: As I understand it, homebrew is a package manager for OSX
[2014-03-15 05:16:18 -0400] mveitas: what is it telling you?
[2014-03-15 05:16:23 -0400] shoelessone: but I'm running Ubuntu on the host, and trying to provision a ubuntu machine
[2014-03-15 05:16:28 -0400] mveitas: maybe it is telling you to brew more coffee
[2014-03-15 05:16:37 -0400] shoelessone: mveitas: "Undefined constant Homebrew" or something along those lines
[2014-03-15 05:16:40 -0400] shoelessone: mveitas: it's possible.
[2014-03-15 05:16:45 -0400] shoelessone: I haven't had any coffee
[2014-03-15 05:17:39 -0400] shoelessone: great advice i'd say mveitas
[2014-03-15 05:17:42 -0400] shoelessone: 10/10
[2014-03-15 05:18:15 -0400] shoelessone: but hey, it's friday night you know?
[2014-03-15 05:18:42 -0400] mveitas: it's 5 oclock somewhere
[2014-03-15 05:20:13 -0400] shoelessone: exactly
[2014-03-15 05:20:16 -0400] shoelessone: you and me mveitas
[2014-03-15 05:20:21 -0400] shoelessone: we're going to do great things together i think
[2014-03-15 05:20:29 -0400] shoelessone: first, we've gotta tackle this homebrew thing
[2014-03-15 05:20:55 -0400] shoelessone: i mean look
[2014-03-15 05:21:17 -0400] shoelessone: i am not a system admin guy. i just want to write some php, using nginx, and hhvm, and mysql or postgres, and redis. that's what i want
[2014-03-15 05:21:20 -0400] shoelessone: bam
[2014-03-15 05:21:20 -0400] shoelessone: done
[2014-03-15 05:33:44 -0400] joe____: hi :) does anybody experience on how to fixed this error [2014-03-14T20:19:01+00:00] FATAL: NoMethodError: undefined method `run_list' for nil:NilClass, on chef-client for windows 10.16.2 the node use to run fine and suddenly its giving this error.
[2014-03-15 05:55:48 -0400] coderanger: joe____: Can you please pastebin the full traceback?
[2014-03-15 09:17:45 -0400] segv: coderanger you there professionally lurking?
[2014-03-15 11:01:44 -0400] mhenrixon: I can't edit anything on my chef server. It looks like the command line `knife environment edit` for instance isn't waiting for the save to happen. Any ideas what could be wrong?
[2014-03-15 11:01:59 -0400] mhenrixon: same for create as well
[2014-03-15 11:02:32 -0400] mhenrixon: everything just becomes empty no attributes or overrides or whatever takes and saves
[2014-03-15 11:03:04 -0400] mhenrixon: knife[:editor] = '"C:\Program Files\Sublime Text 2\sublime_text.exe --wait"'
[2014-03-15 11:03:10 -0400] mhenrixon: that might work
[2014-03-15 11:08:40 -0400] mhenrixon: yup
[2014-03-15 11:08:41 -0400] mhenrixon: sweetness
[2014-03-15 11:35:24 -0400] segv: NoMethodError: undefined method `Directory' for Chef::Resource:Class hah
[2014-03-15 11:40:12 -0400] segv: omg lazy evaluation just fixed that
[2014-03-15 12:31:47 -0400] euoia: So my friend was saying that chef is worthless because it doesn't know that apache is in /etc/apache2 on debian and in /etc/httpd on centos - is that accurate (the second bit)?
[2014-03-15 12:34:38 -0400] n1ko: nope
[2014-03-15 12:36:08 -0400] diginux_: euoia: http://community.opscode.com/cookbooks/apache2
[2014-03-15 12:36:14 -0400] diginux_: you can see the supported platforms
[2014-03-15 12:36:43 -0400] euoia: I will send him in that direction, thanks
[2014-03-15 12:37:43 -0400] euoia: given that this is the first link google presents when searching for "chef apache2" it does appear that he has not tried very hard
[2014-03-15 12:37:59 -0400] diginux: hehe
[2014-03-15 13:27:46 -0400] segv: hmmm
[2014-03-15 13:27:55 -0400] segv: wonder if that applications cookbook supports multi-tenant installations
[2014-03-15 14:06:41 -0400] someara: euoia chef "debianizes" rhel apache installations
[2014-03-15 14:06:57 -0400] someara: at least, the opscode apache2 cookbook does
[2014-03-15 14:09:33 -0400] someara: chef core itself doesn't know what apache is
[2014-03-15 14:43:12 -0400] tehnef: euoia: chef knows pretty much whatever you teach it
[2014-03-15 15:24:00 -0400] Mosselman: Hi guys. I have a question concerning chef and encrypted data bags. I am using knife solo to provision a remote server. I have encrypted some things like passwords in a data bag (using the knife-solo_data_bags gem) which works fine. Right now in my provisioning directory I have a dir. called `.chef` and in there there is a file `encrypted-password.chef` which is basically the secret that is used to decrypt the data bag. Obviously storing this into
[2014-03-15 15:24:01 -0400] Mosselman: version control is not the way to go, as then I'd might as well just store plain text passwords for everything in the data bag. The real question now is, how should/would I/you manage the password for your encrypted data bags?
[2014-03-15 15:24:02 -0400] Mosselman: I could for example use a plain text string that I encrypt in some passworded file (password manager, encrypted file, etc) and copy paste this into the command I use to provision every time. But this is a bit cumbersome/sensitive to accidentally giving it away.
[2014-03-15 15:24:03 -0400] Mosselman: Another thing I thought of is generate an SSH key specifically for the app and put that on the server. This way whenever chef-solo runs on the remote server it will use the locally existing  `~/.ssh/app_name_data_bag` to decrypt the data?
[2014-03-15 15:24:13 -0400] Mosselman: Whoops, sorry for the spam-ish copy-paste
[2014-03-15 15:24:20 -0400] Mosselman: I asked this previously in the #rubyonrails channel
[2014-03-15 17:28:33 -0400] i42n: hey, I get "FATAL: NameError: uninitialized constant Chef::Resource::LWRPBase" when I use the build_essential cookbook. Anynone knows whats wrong? I did not change the cookbook myself.
[2014-03-15 17:29:35 -0400] i42n: complete error message: https://gist.github.com/i42n/c56470bea2514065a7cb
[2014-03-15 17:34:23 -0400] jbz: i42n: what version of chef are you using?
[2014-03-15 17:34:46 -0400] jbz: i42n: and what version of OS X?
[2014-03-15 17:36:11 -0400] a13x212: anyone using berkshelf 3? can't even get it installed
[2014-03-15 17:38:51 -0400] i42n: jbz: chef 11.0.0 and MacOS 10.9
[2014-03-15 17:39:04 -0400] jbz: hm
[2014-03-15 17:39:18 -0400] i42n: jbz: The thing is: the error did not occur at first
[2014-03-15 17:39:20 -0400] jbz: i42n: is that error from the stacktrace.out?
[2014-03-15 17:39:25 -0400] jbz: huh
[2014-03-15 17:39:51 -0400] i42n: jbz: I removed all cookbooks, removed tmp folder from librarian-chef and reinstalled all cookbooks
[2014-03-15 17:40:06 -0400] i42n: jbz: error still there
[2014-03-15 17:40:34 -0400] i42n: jbz: before redownloading all cookbooks the error did not occur
[2014-03-15 17:40:59 -0400] jbz: Huh.  Yeah, I think that one is past my useful knowledge level, sorry. :-(
[2014-03-15 17:42:29 -0400] i42n: jbz: ok thanks
[2014-03-15 17:42:55 -0400] i42n: thing is: I completely removed the VM and reinstalled everything from the ground up to fix the problem. Did not help oO
[2014-03-15 17:43:04 -0400] i42n: all cookbooks directly from source again
[2014-03-15 18:00:35 -0400] mattsurabian: Anyone using Chef vault?
[2014-03-15 18:05:31 -0400] cqql: When I include the recipe mysql::ruby it always "jumps" to the front of the run list. So it want's to be installed before it's dependency build-essential, which breaks the whole chef-client run. Is that a known problem with some recipes?
[2014-03-15 18:10:32 -0400] tjr9898: anythoughts on managing apps with installable plugins like wordpress or redmine
[2014-03-15 18:11:14 -0400] tjr9898: Do people just tar the whole dir periodically or use chef to do a git commit/push
[2014-03-15 18:12:18 -0400] jbz: I generally won't ever use chef to commit or push anything.  When it comes to repos, I will only use Chef to deploy/clone/update.
[2014-03-15 18:12:25 -0400] jbz: But that's a personal preference. I'm paranoid.
[2014-03-15 18:13:02 -0400] coderanger: jbz: For jenkins I have an LWRP that manages the install process
[2014-03-15 18:13:50 -0400] jbz: @coderanger: didn't mean to claim I was *right*.  Hence disclaimer :-) :-)
[2014-03-15 18:14:20 -0400] coderanger: Sorry, that was for you tjr9898
[2014-03-15 18:14:23 -0400] coderanger: (still waking up)
[2014-03-15 18:14:26 -0400] coderanger: :)
[2014-03-15 18:14:28 -0400] jbz: :-)
[2014-03-15 18:16:01 -0400] tjr9898: Yeah I would never want to use chef to do a git commit, but I'm thinking I want to have those types of projects version controlled with git
[2014-03-15 18:18:04 -0400] coderanger: tjr9898: How would you install a plugin without chef
[2014-03-15 18:18:09 -0400] coderanger: Whatever that is, make a recipe to do it
[2014-03-15 18:18:49 -0400] tjr9898: The plugin can be installed by the use through I gui
[2014-03-15 18:19:18 -0400] coderanger: Okay, if thats the only way to do it then make some HTTP requests
[2014-03-15 18:22:23 -0400] tjr9898: coderanger: It's not the only way, but take wordpress
[2014-03-15 18:22:42 -0400] jbz: tjr9898: could you wrap something like this: http://wp-cli.org
[2014-03-15 18:23:59 -0400] tjr9898: Yeah, that means every plugin has to be installed by my team (read me)
[2014-03-15 18:24:20 -0400] tjr9898: But any admin of the wp could install a plugin
[2014-03-15 18:25:19 -0400] tjr9898: I'm also thinking of disaster recovery, I need to replicate a wp app with certain plugins and the state of a database
[2014-03-15 18:26:01 -0400] tjr9898: So in that case, I could package the entire wp site plus a db dump.
[2014-03-15 18:26:07 -0400] tjr9898: but that feels like overkill
[2014-03-15 18:27:11 -0400] coderanger: tjr9898: In general in-app state config manipulation should be disabled when something is managed by chef
[2014-03-15 18:27:45 -0400] tjr9898: immutable server
[2014-03-15 19:02:36 -0400] mhenrixon: tjr9898: checkout the deploy resource
[2014-03-15 19:07:09 -0400] _ci: hello.  what is the latest Chef version to use in Bundler?  Bundler shows 0.8.10 but I am experiencing errrors using that version
[2014-03-15 19:07:58 -0400] _ci: When I run knife client list I receive this error.
[2014-03-15 19:08:00 -0400] _ci: <class:Package>': uninitialized constant Chef::Provider::Package::Apt (NameError)
[2014-03-15 19:23:52 -0400] coderanger: mhenrixon: No, never use the deploy resource :P
[2014-03-15 19:24:05 -0400] coderanger: _ci: 11.10.4 is current, links in the topic
[2014-03-15 19:24:18 -0400] coderanger: _ci: You most likely have a dependency conflict
[2014-03-15 19:24:24 -0400] mhenrixon: @coderanger so how would you deploy a rails app then?
[2014-03-15 19:24:31 -0400] coderanger: mhenrixon: git resource
[2014-03-15 19:24:37 -0400] coderanger: mhenrixon: Or packages
[2014-03-15 19:40:10 -0400] d1ss3nt: hey guys, I'm getting "Data Bag Items must contain a Hash or Mash!" when trying to pull a data bag item from my recipe.. I'm using Vagrant as well and the data_bags path is correctly specified. Can someone point me in the correct direction?
[2014-03-15 19:40:38 -0400] d1ss3nt: also, the "id" is properly set in my data_bag file and named the same as the file (minus the .json extension)
[2014-03-15 19:41:38 -0400] coderanger: diginux: Can you pastebin the JSON?
[2014-03-15 19:41:43 -0400] coderanger: Might just be a syntax issue
[2014-03-15 19:41:51 -0400] i42n: Can anyone help with this error? https://gist.github.com/i42n/c56470bea2514065a7cb
[2014-03-15 19:41:54 -0400] d1ss3nt: sure
[2014-03-15 19:42:02 -0400] i42n: NameError: uninitialized constant Chef::Resource::LWRPBase
[2014-03-15 19:42:28 -0400] d1ss3nt: coderanger: http://pastebin.com/RDPDvVJt
[2014-03-15 19:42:46 -0400] coderanger: i42n: Your chef is too old, you need at least chef 11
[2014-03-15 19:42:55 -0400] d1ss3nt: its very simple right now.. that file is data_bags/git/site.json
[2014-03-15 19:43:09 -0400] coderanger: i42n: Grab the vagrant-omnibus plugin to fix things
[2014-03-15 19:43:46 -0400] i42n: coderanger: gem list --local says: chef (11.10.4, 11.0.0)
[2014-03-15 19:43:58 -0400] coderanger: i42n: Which basebox are you using
[2014-03-15 19:44:09 -0400] coderanger: i42n: Chef is not generally installed as a gem anymore
[2014-03-15 19:44:33 -0400] coderanger: d1ss3nt: Looks correct, this is in bags/<something/site.json?
[2014-03-15 19:44:40 -0400] d1ss3nt: coderanger: yep
[2014-03-15 19:44:55 -0400] d1ss3nt: coderanger: and from my recipe, im calling "git_key = data_bag_item( "site", "git_key" )"
[2014-03-15 19:44:56 -0400] coderanger: d1ss3nt: Can you pastebin the recipe code generating the error?
[2014-03-15 19:45:02 -0400] coderanger: Ahh, that would be why
[2014-03-15 19:45:09 -0400] d1ss3nt: oh ok good :)
[2014-03-15 19:45:16 -0400] coderanger: d1ss3nt: That should be data_bag_item('<something'>, 'site')['git_key']
[2014-03-15 19:45:23 -0400] d1ss3nt: a-ha!
[2014-03-15 19:45:26 -0400] coderanger: something is the bag name, site is the item name
[2014-03-15 19:45:32 -0400] coderanger: and git_key is just a key in the item
[2014-03-15 19:45:44 -0400] d1ss3nt: i knew it was something stupid like that... gracias sir
[2014-03-15 19:45:49 -0400] i42n: coderanger: I use vagrant provisioning with chef. Maybe vagrant uses "its own chef"?
[2014-03-15 19:46:14 -0400] coderanger: i42n: Which basebox are you using?
[2014-03-15 19:46:36 -0400] jidar: vagrant has a omni-installer option
[2014-03-15 19:46:40 -0400] jidar: which will grab the latest
[2014-03-15 19:46:55 -0400] jidar: ie: config.omnibus.chef_version = :latest
[2014-03-15 19:47:23 -0400] i42n: coderanger: this one https://github.com/i42n/vagrant-rails-project-box
[2014-03-15 19:47:26 -0400] d1ss3nt: coderanger: looks like that did it.. thanks again
[2014-03-15 19:47:57 -0400] coderanger: i42n: Thats using the old precise32 image, which ships chef 10
[2014-03-15 19:48:12 -0400] coderanger: i42n: Use one of the bento images and vagrant-omnibus, and you'll be fine, let me grab you an example
[2014-03-15 19:48:28 -0400] i42n: coderanger: great! thanks!
[2014-03-15 19:48:29 -0400] coderanger: jidar: That isn't part of vagrant, it is the vagrant-omnibus plugin
[2014-03-15 19:48:31 -0400] jidar: the new vagrant 1.5 images are pretty good
[2014-03-15 19:48:34 -0400] jidar: coderanger: yea
[2014-03-15 19:48:58 -0400] jidar: vagrant init chef/centos-6.5
[2014-03-15 19:49:05 -0400] coderanger: i42n: https://github.com/poise/berkshelf-api/blob/master/Vagrantfile#L15-L22
[2014-03-15 19:49:19 -0400] coderanger: i42n: that plus `vagrant plugin install vagrant-omnibus` and you should be all set
[2014-03-15 19:51:06 -0400] i42n: coderanger: awesome! you saved my day :D
[2014-03-15 19:51:09 -0400] i42n: thanks
[2014-03-15 20:42:23 -0400] someara: coderanger I have a strange one for ya
[2014-03-15 20:44:21 -0400] someara: so I'm trying to do some resource magic... sanitizing inputs and selecting a default value for a platform
[2014-03-15 20:44:23 -0400] someara: with these
[2014-03-15 20:44:26 -0400] someara: https://gist.github.com/someara/4490a2a47b0cd60a1ba5
[2014-03-15 20:44:43 -0400] someara: spec errors: https://gist.github.com/someara/fd47b85b2c498c149faa
[2014-03-15 20:45:24 -0400] someara: when using a HWRP style resource, I can't "step_into" with the spec... when using LWRPBase, I don't have access to the node object
[2014-03-15 20:48:27 -0400] coderanger: someara: Yeah, I don't use ChefSpec at all
[2014-03-15 20:48:46 -0400] coderanger: someara: I've not found a good way to do spec-style tests for compound resources that aren't super-simple LWRPs
[2014-03-15 20:48:56 -0400] someara: hrm
[2014-03-15 20:49:02 -0400] someara: https://github.com/opscode/chef/blob/master/lib/chef/resource/lwrp_base.rb#L50
[2014-03-15 20:50:14 -0400] coderanger: someara: I talked to seth about it briefly, but neither of us saw a simple fix
[2014-03-15 20:50:27 -0400] coderanger: ChefSpec just makes too many assumptions about how you write stuff
[2014-03-15 20:50:47 -0400] coderanger: To write real spec tests you would need more customized mocking of internals :-/
[2014-03-15 20:51:27 -0400] someara: its weird because the actual recipe works
[2014-03-15 20:51:45 -0400] coderanger: Yeah, its just related to how ChefSpec mocks/stubs stuff
[2014-03-15 20:54:09 -0400] coderanger: someara: So far I've stuck to TK+ServerSpec
[2014-03-15 20:54:30 -0400] someara: yea.. this is really bummin me out tho
[2014-03-15 20:54:41 -0400] coderanger: someara: And some weird-ass minitest stuff for places where serverspec doesn't work well (with poise specifically)
[2014-03-15 20:55:25 -0400] someara: https://github.com/sethvargo/chefspec/blob/master/lib/chefspec/extensions/chef/lwrp_base.rb#L56-L58
[2014-03-15 20:56:53 -0400] coderanger: Yeah
[2014-03-15 20:56:56 -0400] coderanger: Its :-(
[2014-03-15 20:57:27 -0400] someara: still doesn't explain why I can't see the "internal" resources when using the hwrp style resource definitoin
[2014-03-15 21:05:51 -0400] dmarr: im trying to use the chef solo provisioner with vagrant. i did knife solo init . in my project's root, and i see a site-cookbooks but no solo.rb in the root
[2014-03-15 21:07:37 -0400] dmarr: I notice the provisioner sets up this share: default: /tmp/vagrant-chef-1/chef-solo-1/cookbooks => /Users/dmarr/projects/phormat/cookbooks
[2014-03-15 21:07:50 -0400] dmarr: however my cookbook is in site-cookbooks
[2014-03-15 21:29:41 -0400] aujt74: dmarr: I believe having cookbooks & site-cookbooks is a deprecated pattern
[2014-03-15 21:32:30 -0400] jidar: dmarr: tell your vagrant file to the correct directory then
[2014-03-15 21:32:44 -0400] jidar: chef.cookbooks_path = "./cookbooks"
[2014-03-15 21:47:30 -0400] dmarr: ok just got it working by adding chef.cookbooks_path = ["site-cookbooks", "cookbooks"] in my Vagrantfile
[2014-03-15 22:08:29 -0400] trilitheus: If I want to use the community mysql cookbook but set the password from an encrypted data bag is that possible?
[2014-03-15 22:09:01 -0400] trilitheus: I had one idea so not stored on the chef server *permanently* but before start writing is this possible...
[2014-03-15 22:09:23 -0400] trilitheus: set the attribute from encypted data bag search - reload the attribute then call mysql cookbook
[2014-03-15 22:09:44 -0400] trilitheus: then unset the attribute as a later action?
[2014-03-15 22:09:47 -0400] trilitheus: would that work?
[2014-03-15 22:10:09 -0400] trilitheus: or is that ridiculous :)

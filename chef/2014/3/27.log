[2014-03-27 00:27:13 -0400] icarus_: hello all
[2014-03-27 00:27:20 -0400] icarus_: im seeing an odd error with knife:
[2014-03-27 00:27:20 -0400] icarus_: # knife role from file roles/update-staging-site-instances.json
[2014-03-27 00:27:21 -0400] icarus_: ERROR: Yajl::ParseError: parse error: unallowed token at this point in JSON text
[2014-03-27 00:27:21 -0400] icarus_:                   "name"               : "update-staging-siteinstances
[2014-03-27 00:27:21 -0400] icarus_:                      (right here) ------^
[2014-03-27 00:27:34 -0400] icarus_: the json format is correct for this role, its confusing me
[2014-03-27 00:30:26 -0400] sfalcon: icarus_: does `cat roles/update-staging-site-instances.json| python -mjson.tool` parse and format the JSON?
[2014-03-27 00:43:07 -0400] rpad: Anyone else have ridiculous issues with managed chef with saving environment attributes?
[2014-03-27 02:11:37 -0400] Freeheart: I'm just getting into Chef, and seem to have issues using the apt_repository resource in a custom cookbook. I'm sure the error is obvious, but I'm missing it.
[2014-03-27 02:11:38 -0400] Freeheart: http://pastebin.com/KiVsPeBa
[2014-03-27 02:12:12 -0400] Freeheart: Ubuntu 13.10 base OS, using Ruby 2.1.1, rbenv, Berkshelf 3 with a vendored cookbooks directory.
[2014-03-27 02:13:33 -0400] flaccid: Freeheart: looks like a bug in freeheart-base
[2014-03-27 02:13:58 -0400] Freeheart: That's quite likely. :) Any hints I can use to track it down?
[2014-03-27 02:14:23 -0400] flaccid: Freeheart: looks more like you wanna do https://github.com/xhost-cookbooks/system/blob/master/recipes/update_package_list.rb
[2014-03-27 02:14:35 -0400] flaccid: obviously there is no method apt_installed?
[2014-03-27 02:18:23 -0400] Freeheart: flaccid, I assume that's because I'm not properly indicating the dependency on apt?
[2014-03-27 02:21:13 -0400] flaccid: Freeheart: where is apt_installed? defined?
[2014-03-27 02:22:52 -0400] Freeheart: I would assume in the Opscode apt cookbook...
[2014-03-27 02:24:51 -0400] flaccid: well its not in https://github.com/opscode-cookbooks/apt
[2014-03-27 02:26:00 -0400] flaccid: sorry but i'm not familiar with that method. i wouldn't be doing an apt-get update like that anyway
[2014-03-27 02:27:32 -0400] Freeheart: Well, my goal isn't to do the update, but to add the repository. I *could* place it manually in apt.sources.d, but I'd like to reuse as much as possible.
[2014-03-27 02:28:04 -0400] Freeheart: (Obviously, updating is a part of the process, but I just need to do it, not do it on this way.)
[2014-03-27 02:29:37 -0400] Freeheart: Do you have a preferred way of managing PPAs in Chef?
[2014-03-27 02:30:22 -0400] Freeheart: Oh snap...
[2014-03-27 02:30:26 -0400] Freeheart: I just figured it out.
[2014-03-27 02:30:43 -0400] Freeheart: freeheart-base didn't have a properly defined "depends" in metadata.rb
[2014-03-27 02:30:50 -0400] Freeheart: In fact, didn't HAVE a metadata.rb.
[2014-03-27 02:31:02 -0400] hugespoon: i know this is slightly specific, but has anyone run into an issue with test-kitchen, kitchen converge when running through jenkins? https://gist.github.com/hugespoon/6ec1f7d04715d842fc17
[2014-03-27 02:31:19 -0400] Freeheart: flaccid, Thanks for rubber ducking with me. It's appreciated. :)
[2014-03-27 02:32:01 -0400] flaccid: Freeheart: i assume you want https://github.com/opscode-cookbooks/apt#apt_repository and juse use only_if { platform_family?('debian') } in the resource
[2014-03-27 02:32:45 -0400] Freeheart: Yep, I passed the platform_family info, added the depend in metadata, and it's converging now.
[2014-03-27 02:32:50 -0400] Freeheart: Or.. has converged.
[2014-03-27 03:45:32 -0400] brucelee_: coderanger: catch any good break out sessions today?
[2014-03-27 05:48:33 -0400] daos: anyone around w/ experience fixing the EOFError -- error syncing cookbooks?
[2014-03-27 05:48:37 -0400] GreatSUN: hi all
[2014-03-27 05:48:42 -0400] daos: i recently just purged and re-uploaded all
[2014-03-27 05:48:47 -0400] daos: then did a server_ctl reindex
[2014-03-27 05:49:11 -0400] daos: it seemed to work (1 machine converged w/o issue), and now it's choking again
[2014-03-27 05:49:52 -0400] GreatSUN: I am still trying to get my chef-server communication to work (trying to upload a cookbook)
[2014-03-27 05:50:13 -0400] GreatSUN: it was working with ruby 1.8 / chef 10
[2014-03-27 05:50:59 -0400] GreatSUN: but now with ruby 1.9 and chef 11 I have TypeErrors "superclass mismatch for class ImmutableMash" for class:Node
[2014-03-27 05:52:03 -0400] GreatSUN: loading chef/coookbook_loader and chef/cookbook_uploader works without problems
[2014-03-27 05:52:18 -0400] GreatSUN: but when issueing require chef/rest I get this error
[2014-03-27 05:52:56 -0400] GreatSUN: exact gem version is 11.10.4
[2014-03-27 05:53:16 -0400] GreatSUN: ruby 1.9.3p429
[2014-03-27 05:53:25 -0400] GreatSUN: any ideas upon this?
[2014-03-27 05:57:16 -0400] GreatSUN: btw. this also happens if I just require 'chef'
[2014-03-27 06:17:09 -0400] GreatSUN: `<class:Node>': superclass mismatch for class ImmutableMash (TypeError)  <--- noone an idea upon this?
[2014-03-27 06:17:31 -0400] GreatSUN: comes up when calling require 'chef' within a module
[2014-03-27 07:06:08 -0400] GreatSUN: hey guys
[2014-03-27 07:06:39 -0400] GreatSUN: am I able to get a copy of a node path as hash which I can change then?
[2014-03-27 07:07:06 -0400] GreatSUN: I tried to do it with .to_hash, but it seamed, that I still have an immutableMash afterwards
[2014-03-27 08:50:07 -0400] Junaid: Any help with this http://pastie.org/8972581?
[2014-03-27 09:14:12 -0400] railsraider: Hi i have wrote a method that i need running only after converge phase and not during the compile time how can i keep it as a librarry method and not run it during compile
[2014-03-27 09:14:18 -0400] railsraider: it gets excuted twice
[2014-03-27 09:45:52 -0400] gtfx: hey, how can i check all the recipes that are applied to some node?
[2014-03-27 09:47:23 -0400] Tensibai: hi thre
[2014-03-27 09:49:23 -0400] srenatus: gtfx: not really, you can get the expanded run list, but you'd never know what might include a recipe "at run time"
[2014-03-27 09:51:16 -0400] gtfx: 10x
[2014-03-27 09:51:23 -0400] gtfx: this is probably the problem
[2014-03-27 09:52:08 -0400] srenatus: gtfx: stuff can be quite hidden, e.g. the apache_module definition does include_recipe 'apache2::default'.
[2014-03-27 09:52:23 -0400] srenatus: gtfx: but apart from the theoretic excercise, what are you trying to achieve>
[2014-03-27 09:52:24 -0400] srenatus: ?
[2014-03-27 09:54:27 -0400] gtfx: i already have a crontab beeing populated at runtime based on databag information, and i am trying to find out which recipe does that. So what you said about includes makes sense
[2014-03-27 10:14:21 -0400] Breaking_Pitt: guys, how can I make this work with a not_if
[2014-03-27 10:14:23 -0400] Breaking_Pitt: http://pastebin.com/Jz551Cgc
[2014-03-27 10:14:56 -0400] Breaking_Pitt: can I put this inside a execute "ping2" do
[2014-03-27 10:14:57 -0400] Breaking_Pitt:  not_if "ping -c1 169.254.169.254"
[2014-03-27 10:14:59 -0400] Breaking_Pitt: end
[2014-03-27 10:16:50 -0400] srenatus: Breaking_Pitt: how about only_if?
[2014-03-27 10:17:53 -0400] Breaking_Pitt: srenatus I'm not able to see it.. I mean I'm newbie with this
[2014-03-27 10:17:55 -0400] Breaking_Pitt: O_o
[2014-03-27 10:17:57 -0400] Breaking_Pitt: Sorry
[2014-03-27 10:18:55 -0400] Breaking_Pitt: srenatus I mean I see and understan the only_if but I don't know how to make this snippet of code work together
[2014-03-27 10:23:49 -0400] srenatus: Breaking_Pitt: you could add 'only_if "ping -c1 169.254.169.254"' to the template resource
[2014-03-27 10:24:21 -0400] srenatus: Breaking_Pitt: btw, are you aware of ohai hints?  you can tell ohai that is should eat the metadata if you give it the hint that it's running inside openstack
[2014-03-27 10:24:36 -0400] srenatus: Breaking_Pitt: then, you get that ip in node['cloud']['public_ip4']
[2014-03-27 10:24:47 -0400] Breaking_Pitt: srenatus I don't  knwo about ohai
[2014-03-27 10:27:00 -0400] Breaking_Pitt: srenatus I have to take a look at later but I need to make this work due a dealine...
[2014-03-27 10:29:24 -0400] Breaking_Pitt: srenatus I can put all the reuiqre, public_ip etc code in the template resource?
[2014-03-27 10:33:54 -0400] srenatus: Breaking_Pitt: I don't think that'd be necessary, just leave it like the pasted thing, add the only_if
[2014-03-27 10:34:27 -0400] Breaking_Pitt: srenatus I'll give a try
[2014-03-27 10:35:31 -0400] Breaking_Pitt: srenatus but the public_ip .read will fail no?
[2014-03-27 10:41:26 -0400] srenatus: Breaking_Pitt: oh, yes, indeed. sorry. didn't catch that detail
[2014-03-27 10:41:41 -0400] Breaking_Pitt: srenatus how can I mae this work
[2014-03-27 10:41:59 -0400] srenatus: Breaking_Pitt: you could revert to plain ruby "check the ping succeeds" with mixlib-shellout
[2014-03-27 10:42:29 -0400] Breaking_Pitt: srenatus I can't...
[2014-03-27 10:43:01 -0400] Breaking_Pitt: srenatus It's a chef install that it's outsource I can install dependencies neither other things
[2014-03-27 10:44:08 -0400] srenatus: Breaking_Pitt: http://www.foodcritic.io/#FC048  you can
[2014-03-27 10:44:27 -0400] srenatus: Breaking_Pitt: the mixlib-shellout thingy is (reusable) chef stuff ;)
[2014-03-27 10:44:33 -0400] Breaking_Pitt: ah ok
[2014-03-27 10:44:43 -0400] Breaking_Pitt: I was thinking about dependencies and other stuff
[2014-03-27 10:53:01 -0400] alexbst: Breaking_Pitt - how is it going ?
[2014-03-27 10:53:43 -0400] Breaking_Pitt: Hi alexbst I'm not  able to make this work  even with the help of srenatus
[2014-03-27 10:54:07 -0400] Breaking_Pitt: I'm a newbie and this is a little bit complicated... and I'm started to think that I'm a little bit retarded :D
[2014-03-27 10:55:04 -0400] alexbst: Breaking_Pitt - why not paste your stuff in a gist ?
[2014-03-27 10:55:18 -0400] Breaking_Pitt: gist?
[2014-03-27 10:55:25 -0400] Breaking_Pitt: I'm retarded
[2014-03-27 10:55:27 -0400] Breaking_Pitt: xD
[2014-03-27 10:55:32 -0400] alexbst: it's a github code pasting location.
[2014-03-27 10:55:38 -0400] Breaking_Pitt: let me see
[2014-03-27 10:56:22 -0400] alexbst: you keep asking questions but you never show your code - this is a bit like asking about aircraft design problems without providing diagrams.
[2014-03-27 10:56:52 -0400] Breaking_Pitt: alexbst thttps://gist.github.com/BreakingPitt/9804965
[2014-03-27 10:57:07 -0400] Breaking_Pitt: alexbst anyway i put it in pastebin
[2014-03-27 10:57:21 -0400] Breaking_Pitt: alexbst [11:14:42]  <Breaking_Pitt> http://pastebin.com/Jz551Cgc
[2014-03-27 10:57:30 -0400] alexbst: Breaking_Pitt - ohai already has this info in the node info
[2014-03-27 10:58:29 -0400] Breaking_Pitt: alexbst ohai is installed by default? it's a built-in?
[2014-03-27 10:59:24 -0400] alexbst: it's installed by default by chef
[2014-03-27 10:59:42 -0400] alexbst: you just need to reference the variable node.ec2.public_hostname
[2014-03-27 11:00:13 -0400] alexbst: iirc you can also use ec2.public_ipv4
[2014-03-27 11:00:37 -0400] alexbst: run ohai and you will see the key/values you can reference from within your cookbooks.
[2014-03-27 11:02:25 -0400] Breaking_Pitt: alexbst run ohai fromcommand line?
[2014-03-27 11:03:06 -0400] alexbst: yeah
[2014-03-27 11:03:30 -0400] alexbst: chef runs ohai and imports all the info into the 'node' key
[2014-03-27 11:03:38 -0400] alexbst: and adds a few other things too, but it is mostly ohai-derived.
[2014-03-27 11:03:59 -0400] Breaking_Pitt: seems that I don't have ohai
[2014-03-27 11:04:04 -0400] Breaking_Pitt: in the machine
[2014-03-27 11:04:14 -0400] srenatus: note that hints might be needed, see https://tickets.opscode.com/browse/OHAI-381 for openstack
[2014-03-27 11:04:56 -0400] alexbst: Breaking_Pitt - you can just install it and run it then
[2014-03-27 11:05:10 -0400] Breaking_Pitt: alexbst I can't I don't have access to the machine
[2014-03-27 11:05:22 -0400] Breaking_Pitt: So i need to make this work as this is right now..
[2014-03-27 11:05:28 -0400] Breaking_Pitt: I know that it's weird
[2014-03-27 11:05:32 -0400] Breaking_Pitt: but..
[2014-03-27 11:05:43 -0400] alexbst: launch a node in ec2 then
[2014-03-27 11:06:02 -0400] alexbst: you can't be expected to write working code without direct, admin access to a representative machine.
[2014-03-27 11:06:23 -0400] Breaking_Pitt: I know that I can't but this project works in this way... I can't do more than this
[2014-03-27 11:07:00 -0400] StFS_: Hi there. After running "knife solo cook ... " is the output of it stored in a logfile somewhere? Either on the provisioner or the provisionee? Where would that file be located?
[2014-03-27 11:07:18 -0400] Breaking_Pitt: So that's the reason why I need to make this work... I need to make this work and make this crappy porject goes away... This is a hell to work on this
[2014-03-27 11:07:43 -0400] Breaking_Pitt: and alexbst  you can read about it here.. http://techcrunch.com/2014/03/18/why-is-the-european-commission-spending-e100m-on-a-pointless-hackathon/
[2014-03-27 11:07:50 -0400] Breaking_Pitt: Read it and cry xD
[2014-03-27 11:14:11 -0400] kernelpanik: Hi guys I made a  cookbook for install and configure wildfly 8 in cluster mode.. is named wildfly-clu  (I hope can be useful for you, and please let me know you have suggestions) thank you
[2014-03-27 11:16:02 -0400] srenatus: Breaking_Pitt: quick and dirty then: public_ip = "var=" + ( open('http://169.254.169.254/...').read rescue "unknown" )
[2014-03-27 11:30:39 -0400] yruss972: Hi guys- quick question, what is the correct way to use candidate_version in a package resource? Couldn't find docs.
[2014-03-27 11:31:35 -0400] chef188: hi
[2014-03-27 11:32:00 -0400] chef188: i am getting error while bootstraping the chef client with sensu recipe
[2014-03-27 11:40:17 -0400] mrpinksss: hey
[2014-03-27 11:40:27 -0400] mrpinksss: I'm having trouble adding a library
[2014-03-27 11:41:07 -0400] mrpinksss: I'm using the Sensu cookbook and want to add a instance_identifier
[2014-03-27 11:41:45 -0400] mrpinksss: so did https://gist.github.com/MrPink/9805684
[2014-03-27 11:41:57 -0400] mrpinksss: in cookbooks/sensu/libraries/sensu_instance_identifier.rb
[2014-03-27 11:42:10 -0400] mrpinksss: but I get
[2014-03-27 11:42:11 -0400] mrpinksss: [2014-03-27T11:39:13+00:00] FATAL: NoMethodError: undefined method `sensu_instance_identifier' for Chef::Resource::SensuCheck
[2014-03-27 11:45:02 -0400] jesser: so, the omnibus vagrant build lab  I think it's installing omnibus 2.0.1 and yet my calls to 'whitelist_file' do not seem to be working
[2014-03-27 12:38:37 -0400] railsraider: 0anyone able to resolve that super annoying bug of upstart that is already running and chef is trying ot run it?
[2014-03-27 13:46:03 -0400] juliancdunn: railsraider: I thought it was fixed in a recent version of Chef
[2014-03-27 13:46:47 -0400] juliancdunn: are you talking about https://tickets.opscode.com/browse/CHEF-4782 ?
[2014-03-27 13:47:18 -0400] juliancdunn: it's fixed in 11.10.x
[2014-03-27 13:53:38 -0400] JensOfSweden: I have a question, if i run chef-client to register with the chef server, i know i can override a runlist with -o, but can i somehow add a permanent runlist to the node? Since i want a no hands on bootstrap for bout 200 nodes :/
[2014-03-27 13:55:38 -0400] CPS: JensOfSweden: knife node run_list add
[2014-03-27 13:57:48 -0400] JensOfSweden: I know i can add it with knife. but then i need to configure knife during bootstrap aswell was woundering if there was a easier way to do it when registering the chef client
[2014-03-27 14:01:54 -0400] juliancdunn: JensOfSweden: create a piece of JSON and pass it to the first client run with -j
[2014-03-27 14:02:10 -0400] juliancdunn: that piece of JSON will look like {"run_list":["role[whatever]"]}
[2014-03-27 14:04:25 -0400] JensOfSweden: then it adds the runlist to the node?
[2014-03-27 14:04:36 -0400] juliancdunn: once the run succeeds, yes
[2014-03-27 14:04:43 -0400] JensOfSweden: sweet
[2014-03-27 14:04:44 -0400] juliancdunn: that's basically what 'knife bootstrap' does
[2014-03-27 14:05:03 -0400] juliancdunn: you can examine any node you've created with 'knife bootstrap' for an /etc/chef/first-boot.json
[2014-03-27 14:05:25 -0400] juliancdunn: the name is not special; you can call it anything
[2014-03-27 14:08:20 -0400] JensOfSweden: then i just use chef-client -j my.json?
[2014-03-27 14:08:26 -0400] juliancdunn: yup!
[2014-03-27 14:08:34 -0400] JensOfSweden: awesome, thanks =)
[2014-03-27 14:08:47 -0400] juliancdunn: np
[2014-03-27 14:09:07 -0400] JensOfSweden: Time to try it out =)
[2014-03-27 14:14:42 -0400] PapaSierra: i'm running chef-solo as a user other than root. it seems it wants to write to /var/chef/cache which it doesn't have permission for. is there a flag i can set to give it an alternate path?
[2014-03-27 14:16:35 -0400] juliancdunn: PapaSierra: modify the file_cache_path setting in solo.rb - http://docs.opscode.com/config_rb_solo.html
[2014-03-27 14:19:39 -0400] PapaSierra: juliancdunn: thank you sir
[2014-03-27 14:24:51 -0400] PapaSierra: huh, hit another snag. the apt cookbook is trying to do "apt-get update" but since i'm not root i think it should be doing "sudo apt-get update". i've read the apt cookbook readme, but nothing is standing out at me
[2014-03-27 14:26:00 -0400] storme_away: PapaSierra: most cookbooks assume running as root
[2014-03-27 14:26:29 -0400] stormerider: if you want to do otherwise, you'll need to hack them up yourself or write your own
[2014-03-27 14:26:43 -0400] gtfx: i receive an  Chef::Exceptions::InvalidDataBagItemID: Data Bag items must have an id matching /^[\.\-[:alnum:]_]+$/, you gave: nil . There is an id there matching the file name without json
[2014-03-27 14:27:57 -0400] PapaSierra: stormerider: ok, perhaps i need to rethink things. i'm trying to go through this process: brand new ubuntu server -> disable root access -> provision (must be repeatable)
[2014-03-27 14:29:05 -0400] stormerider: just because you disable root login doesnt mean chef can't run as root; just sudo the chef-client or chef-solo
[2014-03-27 14:29:25 -0400] PapaSierra: ah right of course!
[2014-03-27 14:29:54 -0400] stormerider: :)
[2014-03-27 14:37:15 -0400] kaushal: Hi
[2014-03-27 14:42:03 -0400] PapaSierra: stormerider: it's beautiful :) working just great
[2014-03-27 14:42:17 -0400] stormerider: happy to hear it.
[2014-03-27 14:43:30 -0400] daxroc: Evening all
[2014-03-27 14:44:18 -0400] PapaSierra: my next challenge: i'm using cookbooks and roles (as opposed to cookbooks and role-cookbooks) and i'm able to provision things that need no configuration. next up is nginx that needs loads of configuration. what will i need in terms of getting chef to place my custom config files into the file system?
[2014-03-27 14:44:51 -0400] gleam: a role cookbook
[2014-03-27 14:45:04 -0400] gleam: or wrapper cookbook, or whatever you want to call it
[2014-03-27 14:46:11 -0400] daxroc: Anyone had the need to reboot a system?
[2014-03-27 14:46:48 -0400] stormerider: yeah, if you have custom files you need a cookbook, roles wont cut it
[2014-03-27 14:47:43 -0400] daxroc: * I've a situation where I need to reboot the system after specific upgrades during the first converge has any one had to reboot a system within chef is there a mechanisim in place for this ?
[2014-03-27 14:48:57 -0400] hugespoon: daxroc: nix or windows?
[2014-03-27 14:49:33 -0400] daxroc: hugespoon: nix (ubuntu)
[2014-03-27 14:49:41 -0400] PapaSierra: stormerider, gleam: so i'd create a simple role and a wrapper cookbook as well that has the templates in it?
[2014-03-27 14:50:58 -0400] stormerider: daxroc: generally not a recommended practice, it's not very idempotent. but you could do it with an execute resource contingent on a file being present/absent.
[2014-03-27 14:51:08 -0400] hugespoon: indeed
[2014-03-27 14:51:17 -0400] stormerider: just generally considered a bad idea.
[2014-03-27 14:53:06 -0400] daxroc: stormerider: I can see it being bad. How do you ensure you have the latest "stable" system updates/upgrades. I guess as a part of the bootstrap process?
[2014-03-27 14:53:28 -0400] stormerider: patching isnt necessarily part of config management
[2014-03-27 14:53:50 -0400] stormerider: os patching, at least
[2014-03-27 14:55:18 -0400] daxroc: stormerider: That's a little subjective no, I see your point tho.
[2014-03-27 14:55:52 -0400] stormerider: yeah, im just saying a lot of people will treat it separately
[2014-03-27 14:56:03 -0400] daxroc: stormerider: a first_run cookbook thats used during the bootstrap ?
[2014-03-27 14:56:34 -0400] stormerider: i do that on an ami level rather than chef
[2014-03-27 14:57:29 -0400] daxroc: That would be my preference too, Not sure If I'll get that option tho.
[2014-03-27 14:58:02 -0400] anthroprose: stormerider: agreed
[2014-03-27 14:58:31 -0400] anthroprose: daxroc: does your company have an AWS NDA & other stuff?
[2014-03-27 14:58:36 -0400] anthroprose: they have tools to help you with this
[2014-03-27 15:00:24 -0400] adnichols: coderanger: fyi - ran into this stacktrace on chef-client 11.4.0 w/ Poise, update to 11.10.x fixed it but figured you'd wanna be aware: http://pastebin.com/KX5PZTj2
[2014-03-27 15:00:56 -0400] railsraider: guys, bash resource executing as the user who runs the chef client
[2014-03-27 15:01:10 -0400] railsraider: i specifiefd a user but it gets ignore
[2014-03-27 15:01:37 -0400] railsraider: i can solve it ugly by using sudo -u user command here
[2014-03-27 15:02:12 -0400] daxroc: stormerider anthroprose appreciate the feedback. I'll avoid the reboot in favor of beter intance imaging
[2014-03-27 15:32:14 -0400] Astrobolidos: hey guys, getting a odd behaviour on downloading the nodejs cookbook from berkshelf
[2014-03-27 15:32:27 -0400] Astrobolidos: the version downloaded is different from the git hub
[2014-03-27 15:32:51 -0400] Astrobolidos: someone there came throught this problem before?
[2014-03-27 15:33:02 -0400] PapaSierra: i can see that each cookbook declares its dependencies. this would imply there's a way to fetch all the dependencies automatically. how do i do that? the only way i know is to add the dependencies as git submodules one-by-one
[2014-03-27 15:33:06 -0400] Nukepuppy: is it in your berks.lock?
[2014-03-27 15:33:30 -0400] Nukepuppy: there isn't any hard unless you are source controlling it of wiping it.. (or moving it out of the way) to see if it fixes your issue
[2014-03-27 15:33:42 -0400] Nukepuppy: papasierra
[2014-03-27 15:33:44 -0400] Nukepuppy: berkshelf?
[2014-03-27 15:34:06 -0400] PapaSierra: right, i've heard of it, but wasn't sure what it did. ty will research it now...
[2014-03-27 15:34:11 -0400] Nukepuppy: if you're talking git submodules ... are you using one monolithic repo?
[2014-03-27 15:34:41 -0400] Astrobolidos: yep, it packages all the dependent cookbooks for you
[2014-03-27 15:34:55 -0400] Nukepuppy: papa.. you add a depends 'cookbook'  berkshelf makes a berksfile that can help resolve non upstream known cookbooks and can direct it to use local cookbooks.. private cookbooks on private git
[2014-03-27 15:34:57 -0400] PapaSierra: i'm not sure what you mean. for instance i have a role for a reverse proxy that needs only nginx. that's all i want, but it has like 15 dependencies
[2014-03-27 15:35:34 -0400] Nukepuppy: so your cookbook  depends 'nginx'   ?
[2014-03-27 15:35:50 -0400] PapaSierra: Nukepuppy: i have no cookbook. i just a role
[2014-03-27 15:36:01 -0400] Nukepuppy: make it a cookbook :P
[2014-03-27 15:36:06 -0400] PapaSierra: but i can create a cookbook if that's what needed
[2014-03-27 15:36:10 -0400] Nukepuppy: it would be safer
[2014-03-27 15:36:18 -0400] shlant: gtfx: just ran into that same issue. It was because I have all the extra keys that chef adds after uploading the data_bag (name, raw_data, etc_)
[2014-03-27 15:36:21 -0400] Nukepuppy: the whole 'cant version control a role/environment'
[2014-03-27 15:36:29 -0400] PapaSierra: ok. should i have a role that has a runlist of my custom cookbook?
[2014-03-27 15:36:52 -0400] Nukepuppy: yeah to keep your role as simple as possible
[2014-03-27 15:36:59 -0400] Nukepuppy: make it a role_cookbook  basically
[2014-03-27 15:37:02 -0400] gtfx: i actually figured this out. It was the format
[2014-03-27 15:37:26 -0400] Nukepuppy: papasierra: http://dougireton.com/blog/2013/02/16/chef-cookbook-anti-patterns/
[2014-03-27 15:37:29 -0400] Nukepuppy: feel that's a good overview
[2014-03-27 15:37:38 -0400] Nukepuppy: simple examples that i think explain a good bit
[2014-03-27 15:37:59 -0400] Nukepuppy: specifically for you look at "Pattern: Setting a Servers Run List in a role or application cookbooks default recipe"
[2014-03-27 15:38:39 -0400] PapaSierra: ok i'll read that right away. however one immediate issue is for some reason i can't ping rubygems.org which means i can't install the berkshelf gem
[2014-03-27 15:40:12 -0400] Nukepuppy: papa that happens from time to time.. its funky
[2014-03-27 15:40:29 -0400] Astrobolidos: hey Nukepuppy, wondenring if you can shine a light on a problem I'm having..... if you finished with papa....
[2014-03-27 15:41:41 -0400] Nukepuppy: hmm yeah sorry it all got blurred -.-
[2014-03-27 15:42:07 -0400] Astrobolidos: no worries, you logging out?
[2014-03-27 15:43:04 -0400] Nukepuppy: no i just sit here all day
[2014-03-27 15:44:13 -0400] Nukepuppy: but anyways if you have a berks.lock
[2014-03-27 15:44:34 -0400] Nukepuppy: can you see the version in "Berksfile.lock"   for the cookbook in question?
[2014-03-27 15:44:46 -0400] Astrobolidos: :) - it's just that when berkshelf download nodejs from opscode http://community.opscode.com/cookbooks/nodejs the code is different from the repo, even if it says that it's the same version on opscode and on github, have you ever saw something like it?
[2014-03-27 15:45:01 -0400] Astrobolidos: ok
[2014-03-27 15:45:02 -0400] Nukepuppy: "yum-epel": {"locked_version": "0.2.0" },
[2014-03-27 15:45:04 -0400] Astrobolidos: let me check
[2014-03-27 15:45:04 -0400] Nukepuppy: for example
[2014-03-27 15:45:13 -0400] Astrobolidos: got you!
[2014-03-27 15:46:17 -0400] Nukepuppy: if you are not source control Locking the versions via berksfile.lock
[2014-03-27 15:46:24 -0400] Astrobolidos:  "yum-epel": {       "locked_version": "0.3.4"     },
[2014-03-27 15:46:24 -0400] Nukepuppy: you should make sure its on your gitignore file ;P
[2014-03-27 15:46:37 -0400] Astrobolidos:  "nodejs": {       "locked_version": "1.3.0"     },
[2014-03-27 15:46:38 -0400] Nukepuppy: also if you dont need to lock your stuff
[2014-03-27 15:46:41 -0400] Nukepuppy: you can 'wipe' that file
[2014-03-27 15:46:51 -0400] Nukepuppy: it will just regenerate the next time you do any berks upload etc
[2014-03-27 15:47:29 -0400] Astrobolidos: ok! it's the epel version too old....
[2014-03-27 15:47:52 -0400] othatbrian: Does anyone have experience using Sequel within Chef? I'm encountering issues and I suspect it's because I don't firmly grasp "what" happens "when" during a chef run.
[2014-03-27 15:49:09 -0400] Nukepuppy: cool astro. hope that kinda fixes it.. yeah recently YUM had some breaking changes
[2014-03-27 15:49:55 -0400] Astrobolidos: cheers man! appreciate the help!
[2014-03-27 15:50:05 -0400] Nukepuppy: noprobs
[2014-03-27 15:51:30 -0400] joe_k: Hi. I am bootstrapping windows nodes from stock AMIs with chef-ec2
[2014-03-27 15:51:45 -0400] joe_k: whats the best way to get the chef-client bootstrap run to set up chef-client as a service
[2014-03-27 15:57:28 -0400] tomduffield: joe_k: include the chef-client cookbook in your initial runlist
[2014-03-27 15:57:43 -0400] tomduffield: joe_k: http://community.opscode.com/cookbooks/chef-client
[2014-03-27 16:08:45 -0400] daxroc: Anyone using the rbenv / ruby_build cookbooks. When I try and install version 2.1.0, 2.1.1 I get an issues with rdoc, is it possible to specify the directory to use ?
[2014-03-27 16:11:51 -0400] Nukepuppy: herm cant you just use --no-rdoc?
[2014-03-27 16:11:53 -0400] Nukepuppy: just curious ;p
[2014-03-27 16:13:40 -0400] srenatus: daxroc: there's also poise if you only need ruby - https://github.com/poise/poise-ruby
[2014-03-27 16:13:49 -0400] daxroc: Nukepuppy: Yes, guess so. more --disable-install-rdoc ,--disable-install-doc
[2014-03-27 16:15:12 -0400] daxroc: srenatus: Not sure what i need, nginx, passenger, ruby2+ , rails and I've used only ruby through Chef. Fun :D
[2014-03-27 16:16:29 -0400] StDiluted: Im having a problem where knife is ignoring the chef_server_url, anyone seen that?
[2014-03-27 16:16:57 -0400] StDiluted: Error connecting to https://chef-server/bookshelf/organization-000000000000 when the chef_server_url is set to a FQDN
[2014-03-27 16:23:26 -0400] brucejdavis: Chef client 11.10.4 seems to still have this issue: https://tickets.opscode.com/browse/CHEF-5051, which was supposedly resolved in 11.10.4 in CHEF-5051
[2014-03-27 16:25:59 -0400] brucejdavis: With the yumrepo cookbook v2.1.0, depends on yum < 3.0.0, I get this when I run chef-client v11.10.4-2: You must supply a name when declaring a yum_key resource"
[2014-03-27 16:26:54 -0400] Nukepuppy: anyone done work with newrelic cookbook much?
[2014-03-27 16:27:41 -0400] StDiluted: Anyone have any idea on my issue?
[2014-03-27 16:28:27 -0400] brucejdavis: This did issue not happen with 11.8.2
[2014-03-27 16:29:14 -0400] Nukepuppy: stdiluted sounds familiar honestly but been too long to remember cause
[2014-03-27 16:29:48 -0400] StDiluted: Nukepuppy: hrm, I am looking everywhere for a solution and not finding anything
[2014-03-27 16:29:59 -0400] Nukepuppy: i probably rage-reinstalled the chef server
[2014-03-27 16:30:10 -0400] Nukepuppy: unless its in production then i would roll back the client version?
[2014-03-27 16:30:32 -0400] StDiluted: not in production
[2014-03-27 16:30:45 -0400] StDiluted: its a pretty fresh install of everything too
[2014-03-27 16:33:46 -0400] troyready: If it's the issue I suspect that it is, it's a configuration issue with the chef-server
[2014-03-27 16:34:12 -0400] rayrod2030: oh herro chefs
[2014-03-27 16:34:26 -0400] troyready: StDiluted, http://docs.opscode.com/config_rb_chef_server.html
[2014-03-27 16:35:39 -0400] StDiluted: thanks troy
[2014-03-27 16:35:40 -0400] jascbu: Hello all, relative newbie here. Is there anyway to automatically download all the dependent cookbooks from Github / community.opscode.com that you need when uploading a cookbook to Chef server?
[2014-03-27 16:35:54 -0400] jtimberman: jascbu: that's what people use librarian or berkshelf to do.
[2014-03-27 16:36:39 -0400] jascbu: Ah ok, I'll have a look at those. Is one advised over the other?
[2014-03-27 16:39:53 -0400] CPS: where is the plugins directory for knife in windows?
[2014-03-27 16:39:59 -0400] jascbu: jtimberman: thanks, I'll go and have a read
[2014-03-27 16:40:35 -0400] bixu_: There is a default attribute in a community cookbook that I want to remove via a site cookbook.  Is that possible?
[2014-03-27 16:41:15 -0400] bixu: jascbu: I have used both and prefer Berkshelf, although it has some rough edges.
[2014-03-27 16:42:28 -0400] bixu: Specifically, I have some systems that don't use PAM, so when the community OpenSSH cookbook renders my sshd_config, even if I've set the line "UsePAM no", sshd fails to start because it doesn't respect that option.
[2014-03-27 16:43:02 -0400] bixu: So I'd like to remove that option from my rendered template altogether.
[2014-03-27 16:43:22 -0400] CPS: jonlives: can you help me out installing your knife flip plugin?
[2014-03-27 16:43:43 -0400] dgarstang: *sigh* wrapper cookbooks should be simple, yet I cannot get to work right. All the gory details are here.... http://lists.opscode.com/sympa/arc/chef/2014-03/msg00401.html
[2014-03-27 16:44:12 -0400] jonlives: CPS: should be just "gem install knife-flip"
[2014-03-27 16:44:27 -0400] CPS: my server is isolated, can't do that
[2014-03-27 16:44:34 -0400] CPS: i downloaded the zip from github
[2014-03-27 16:45:07 -0400] jonlives: CPS: ok in that case, drop the two files in https://github.com/jonlives/knife-flip/tree/master/lib/chef/knife under ~/.chef/plugins/knife
[2014-03-27 16:45:12 -0400] jonlives: (or windows equivalent)
[2014-03-27 16:45:27 -0400] CPS: the or windows equivalent is what's tripping me up
[2014-03-27 16:45:46 -0400] CPS: i don't see a plugins directory anywhere
[2014-03-27 16:45:51 -0400] CPS: so i'd just be guessing where it goes
[2014-03-27 16:46:11 -0400] jonlives: ah you'll need to create it if it doesn't already exist - where do you have your knife.rb?
[2014-03-27 16:46:38 -0400] CPS: c:\chef-repo\.chef
[2014-03-27 16:47:07 -0400] StDiluted: troyready: THANK YOU. That was what it was.
[2014-03-27 16:47:15 -0400] troyready: StDiluted, :)
[2014-03-27 16:47:38 -0400] bixu: Anyone?
[2014-03-27 16:47:40 -0400] troyready: Super glad to be of help. As with most issues, only aware of it because we've been there too :)
[2014-03-27 16:47:57 -0400] CPS: so the zip has an rb file next to a directory containing rb files
[2014-03-27 16:47:58 -0400] a13x212: bixu, try chef rewind
[2014-03-27 16:48:20 -0400] CPS: should i copy them over as they are or load all 3 rb to C:\chef-repo\.chef\plugins\knife?
[2014-03-27 16:48:44 -0400] StDiluted: troyready: exactly. Google wasnt being much help either. I think when I initially set the server up, I had a hosts entry for both the chef-server and chef-server.example.com
[2014-03-27 16:48:49 -0400] jonlives: CPS: sorry was afk
[2014-03-27 16:48:55 -0400] StDiluted: and I think it grabbed that as the default
[2014-03-27 16:49:13 -0400] jonlives: CPS: just copy the two files in this directory into that folder: https://github.com/jonlives/knife-flip/blob/master/lib/chef/knife/nodeflip.rb
[2014-03-27 16:49:21 -0400] jonlives: the other one is only needed for gem installs
[2014-03-27 16:49:31 -0400] jonlives: CPS: this folder sorry: https://github.com/jonlives/knife-flip/tree/master/lib/chef/knife
[2014-03-27 16:49:33 -0400] a13x212:  jonlives, any progress on spork/berkshelf intergration?
[2014-03-27 16:50:09 -0400] jonlives: a13x212: there's not that much that I can do until Berkshelf 3 comes out unfortunately - I don't use Berkshelf myself so sethvargo's going to be looking at that more once things stabilise
[2014-03-27 16:50:27 -0400] sethvargo: ^ fact
[2014-03-27 16:50:32 -0400] sethvargo: ^ knowledge bomb
[2014-03-27 16:50:36 -0400] sethvargo: ^ truth
[2014-03-27 16:50:39 -0400] jonlives: hehe
[2014-03-27 16:51:13 -0400] a13x212:  jonlives, how do you manage cookbook dependency now?
[2014-03-27 16:51:46 -0400] shlant: can anyone see why this doesn't work? I can't get it to print both down values https://gist.github.com/MrMMorris/678f577074747e698655
[2014-03-27 16:51:53 -0400] jonlives: a13x212: the whole library pattern doesn't fit that well with how we use cookbooks at Etsy, both historically and currently - we use Roles a lot more than many too
[2014-03-27 16:51:59 -0400] jonlives: *library cookbook
[2014-03-27 16:52:19 -0400] jonlives: a13x212: if you're gonna be at ChefConf, I'll happily talk about our workflow etc in exhausitive detail ;)
[2014-03-27 16:53:02 -0400] CPS: jonlives: https://gist.github.com/anonymous/9812291
[2014-03-27 16:53:18 -0400] CPS: your thing uses colorize?
[2014-03-27 16:53:20 -0400] jonlives: CPS: yeah there's a dependency on the colorize gem
[2014-03-27 16:53:21 -0400] CPS: is that a gem?
[2014-03-27 16:53:43 -0400] CPS: :\
[2014-03-27 16:53:46 -0400] jonlives: yeah
[2014-03-27 16:53:51 -0400] jonlives: it's the only gem dependancy tho
[2014-03-27 16:54:00 -0400] CPS: i don't even want to think about how windows command prompt will deal with color
[2014-03-27 16:54:10 -0400] jonlives: it probably won't :p
[2014-03-27 16:54:16 -0400] jonlives: ie, won't even try
[2014-03-27 16:55:33 -0400] CPS: so where do i add gem files?
[2014-03-27 16:55:42 -0400] CPS: to add them to chef's embedded ruby?
[2014-03-27 16:55:54 -0400] gleam: use chef_gem if you want to do it in a cookbook
[2014-03-27 16:56:01 -0400] gleam: otherwise use /opt/chef/embedded/bin/gem install (i think)
[2014-03-27 16:56:10 -0400] jonlives: ^ that I think
[2014-03-27 16:56:33 -0400] CPS: chef\embedded\bin has no directories
[2014-03-27 16:56:49 -0400] CPS: although that is where the ruby exe is
[2014-03-27 16:57:33 -0400] CPS: sorry, i misread that
[2014-03-27 16:57:44 -0400] CPS: i download the .gem file from rubygems.org
[2014-03-27 16:57:55 -0400] CPS: i just want to drop it whereever chef's embedded gems live
[2014-03-27 16:58:08 -0400] jonlives: CPS: you need to install gems, they're a software package
[2014-03-27 16:58:19 -0400] jonlives: in theory you could copy the files manually etc, but it'd be a pain.
[2014-03-27 16:58:28 -0400] CPS: ah
[2014-03-27 16:58:33 -0400] jonlives: you can just do "gem install whatever.gem" on the local machine
[2014-03-27 16:58:36 -0400] jonlives: if you downloaded it
[2014-03-27 16:58:54 -0400] peret: there you go CPS
[2014-03-27 16:59:01 -0400] peret: :)
[2014-03-27 16:59:45 -0400] CPS: hey look at that
[2014-03-27 16:59:47 -0400] CPS: it worked
[2014-03-27 16:59:49 -0400] CPS: thanks everyone
[2014-03-27 17:00:31 -0400] jonlives: np!
[2014-03-27 17:02:29 -0400] path: hey guys got a question: how can I update the 'Roles:' attribute ?
[2014-03-27 17:02:51 -0400] path: I tried to edit a node an add it to the run_list
[2014-03-27 17:08:25 -0400] brucejdavis: Anyone see  "You must supply a name when declaring a XXXXX resource" with chef-client v11.10.4-2?
[2014-03-27 17:08:53 -0400] douglaswth: brucejdavis: did you supply a name?
[2014-03-27 17:09:44 -0400] brucejdavis: Shouldn't have to; the issue didn't exist with 11.8.2; see: https://tickets.opscode.com/browse/CHEF-5051
[2014-03-27 17:10:09 -0400] brucejdavis: supposed to be resolved with 11.10.4 according to https://tickets.opscode.com/browse/CHEF-5052
[2014-03-27 17:10:23 -0400] brucejdavis: But NOT
[2014-03-27 17:19:31 -0400] joe_k: tomduffield: that cookbook only lists unix platforms as "known to work"
[2014-03-27 17:30:02 -0400] dgarstang: A wrapper cookbook only needs to care about the cookbook its immediately wrapping right? Implementation details should not matter, right?
[2014-03-27 17:30:46 -0400] werdnativ: which is better? https://github.com/fnichol/chef-rbenv https://github.com/RiotGames/rbenv-cookbook
[2014-03-27 17:34:04 -0400] werdnativ: Looking at this: https://github.com/RiotGames/rbenv-cookbook/blob/master/providers/execute.rb#L20
[2014-03-27 17:34:04 -0400] werdnativ: Doesn't this eval "rbenv init" in one user, and then executes in another user environment??
[2014-03-27 17:37:38 -0400] werdnativ: I'm trying to run rbenv_execute "bundle install" as my deploy user, but it's trying to create /home/vagrant/.bundle so I'm not sure what it's supposed to be doing.
[2014-03-27 17:45:17 -0400] PapaSierra: i don't need ruby in production, but it's there (embedded) with chef-solo, so now i want to use berkshelf, so i did "/opt/chef/embedded/bin/gem install -V berkshelf" which does a bunch of downloading followed by this error. what am i missing?  http://www.hastebin.com/raw/nucijikoqu
[2014-03-27 17:46:36 -0400] doomviking: PapaSierra: you need a compiler
[2014-03-27 17:46:59 -0400] doomviking: build-essential or equivalent non-debian stuff
[2014-03-27 17:47:17 -0400] PapaSierra: doomviking: legend, ty
[2014-03-27 17:47:43 -0400] doomviking: or some libraries, as the error says :)
[2014-03-27 17:49:16 -0400] doomviking: I need to have more coffee before I answer aquestions
[2014-03-27 17:50:22 -0400] PapaSierra: well, maybe i'm being a smart-alec by leveraging the embedded ruby? it's 1.8.24. however, i have no control over that since it's chef's ruby. is it smart to rely on it? all i want is berkshelf
[2014-03-27 17:50:56 -0400] doomviking: yeah I dont know about that
[2014-03-27 18:15:20 -0400] kbarry: I'm getting: "ERROR: Connection refused connecting to https://localhost/clients" when running chef-client.
[2014-03-27 18:15:38 -0400] kbarry: out client.rb contains the host url
[2014-03-27 18:16:02 -0400] brucejdavis: Is there a beta of chef-client available?
[2014-03-27 18:16:15 -0400] brucejdavis: newer than 11.10.4-1?
[2014-03-27 18:16:39 -0400] jonlives: brucejdavis: http://rubygems.org/gems/chef/versions/11.12.0.alpha.1
[2014-03-27 18:16:42 -0400] scalp42: brucejdavis http://docs.opscode.com/api_omnitruck.html
[2014-03-27 18:20:10 -0400] doomviking: gem install chef --pre will get you bleedy
[2014-03-27 18:20:37 -0400] doomviking: bleedish
[2014-03-27 18:26:57 -0400] dotplus: I'm about to start an eval of chef to replace our existing CM. The environment is mostly typical *nix  IT infrastructure work plus HPC complete with schedulers, high performance filesystems, clusters & multiple supercomputers. i.e. neither your typical tech company, nor a traditional corp. environment with lots of desktops and various corp depts.
[2014-03-27 18:28:08 -0400] dotplus: Can anyone suggest reading material/conference talks discussing pros/cons of chef at the level of CM process architecture?
[2014-03-27 18:28:43 -0400] mjuszczak: dotplus: I picked up Chef last month and the month before and was quite overwhelmed, the Berkshelf way made the most sense to me in the end: http://www.getchef.com/blog/chefconf-talks/the-berkshelf-way-jamie-winsor/
[2014-03-27 18:29:22 -0400] mjuszczak: After that vidoe, this may help you: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/ - however, keep in mind that vagrant-berkshelf is deprecated so you may want to skip parts of page #1 and read the section on test kitchen on page #3 instead. (kind of out of order).
[2014-03-27 18:31:24 -0400] dotplus: ok I'll take a look at those, thanks. I'm not looking for "how to config your 1st LAMP stack box", but more "issues you'll run into after you've been running chef for 3 years"
[2014-03-27 18:32:53 -0400] werdnativ: How does the execute resource "su" ? I'm trying to figure out why this: https://gist.github.com/avit/c33992107aaaf8e87a3c
[2014-03-27 18:33:08 -0400] Nukepuppy: i duno i saw some activity that may be able to fix vagrant-berkshelf once berkshelf 3 is out
[2014-03-27 18:33:20 -0400] Nukepuppy: so i just use an older vagrant for now since 1.5 breaks crap in general
[2014-03-27 18:33:28 -0400] Nukepuppy: wfm
[2014-03-27 18:34:04 -0400] kallistec: werdnativ: it changes the uid of the process. it doesn't invoke a login shell, so your rc files aren't sourced
[2014-03-27 18:34:40 -0400] dax_roc: Evening all
[2014-03-27 18:36:37 -0400] werdnativ: kallistec: it seems like it should set up environment in that rbenv_execute resource: the problem is I'm trying to run "bundle install" as the deploy user but it sees /home/vagrant as its home path.
[2014-03-27 18:36:39 -0400] jonlives: dotplus: dunno if location and budget permit, but I'd recommend trying to go to ChefConf next month
[2014-03-27 18:37:08 -0400] werdnativ: kallistec: the other rbenv vars seem to be present. I guess from the sudo user's original env?
[2014-03-27 18:42:02 -0400] path: https://tickets.opscode.com/browse/CHEF-4318
[2014-03-27 18:42:03 -0400] path: anyone ?
[2014-03-27 18:42:26 -0400] coderanger: path: What about it?
[2014-03-27 18:42:39 -0400] path: I need to know if there's a patch for that
[2014-03-27 18:42:47 -0400] path: Im facing the same issue
[2014-03-27 18:43:10 -0400] doomviking: looks like someone has a pull request
[2014-03-27 18:43:24 -0400] werdnativ: Looks like this describes my issue: https://github.com/RiotGames/rbenv-cookbook/issues/89
[2014-03-27 18:44:40 -0400] coderanger: path: As doomviking said, the patch is linked in the ticket
[2014-03-27 18:46:25 -0400] kallistec: werdnativ: right, what you're expecting is that the command runs as a bash script where bash is invoked with --login, as described here: http://www.gnu.org/software/bash/manual/bashref.html#Bash-Startup-Files
[2014-03-27 18:47:10 -0400] kallistec: path: pull request doesn't have tests so it's probably not going to get accepted until it does
[2014-03-27 18:47:19 -0400] path: :(
[2014-03-27 18:47:22 -0400] werdnativ: right, so a wrapper script would solve it I guess.
[2014-03-27 18:47:36 -0400] path: kallistec: is there a way to detect which node is not working ?
[2014-03-27 18:50:00 -0400] kallistec: path: nothing super simple I can think of. you can see if using -VV option reveals which one it is. Otherwise, you could do something like list the nodes with knife search and run `dig` for all of them to see which ones fail (assuming the issue is a node with a missing DNS entry)
[2014-03-27 18:50:24 -0400] j^2: if i have a number of attributes, default[:web][:apache_sites] = ["site1","site2","site3","site4"]
[2014-03-27 18:50:39 -0400] j^2: and i'd like to tack on site5 to an override attribute would this work?
[2014-03-27 18:51:04 -0400] coderanger: path: You can also just not use knife ssh, fabric or ansible are other options
[2014-03-27 18:51:05 -0400] j^2: better yet, how would that work?
[2014-03-27 18:51:50 -0400] kallistec: j^2: override will replace the array entirely. you could do something like default[:web][:apache_sites] << "site5"
[2014-03-27 18:52:14 -0400] j^2: kallistec: as an "override?"
[2014-03-27 18:52:17 -0400] j^2: in the environment?
[2014-03-27 18:52:46 -0400] j^2: ohhh soo like...
[2014-03-27 18:52:58 -0400] kallistec: j^2: that would be ruby code in a cookbook somewhere
[2014-03-27 18:54:56 -0400] j^2: kallistec: https://gist.github.com/jjasghar/2c8c8688a49de26568cc
[2014-03-27 18:55:02 -0400] dax_roc: How do I get my berks file to ignore the opscode (riotgames) rbenv cookbook ?
[2014-03-27 18:55:12 -0400] dax_roc: I'm wanting to use fnichol/chef-rbenv
[2014-03-27 18:55:26 -0400] coderanger: dax_roc: You need to git it a git location
[2014-03-27 18:55:31 -0400] coderanger: er, give it
[2014-03-27 18:55:37 -0400] j^2: coderanger: yeah i'd love to, but i havent been able able to refactor the functions that use it
[2014-03-27 18:55:51 -0400] drywheat: coderanger: i'm new to python and trying to setup a Fabric deploy using PyChef. i'm trying to figure out how to use the 'roles' functionality to dynamically connect to certain servers and i'm wondering if you know of any good resources/examples.
[2014-03-27 18:55:53 -0400] dax_roc: cookbook 'rbenv', git: 'git://github.com/fnichol/chef-rbenv.git', tag: '0.7.2'
[2014-03-27 18:56:30 -0400] j^2: kallistec: something like that?
[2014-03-27 18:56:31 -0400] coderanger: drywheat: http://pychef.readthedocs.org/en/latest/fabric.html
[2014-03-27 18:57:01 -0400] kallistec: j^2: if you want to change it with an environment attribute, then just set it as a default attribute.
[2014-03-27 18:57:33 -0400] j^2: kallistec: sorry, i'm missing something here
[2014-03-27 18:57:53 -0400] kallistec: arrays are merged when they are all `default` level attributes or all `override` level
[2014-03-27 18:58:01 -0400] j^2: oh
[2014-03-27 18:58:22 -0400] j^2: so the easier thing would be to add the default[:web] and upload a new cookbook
[2014-03-27 18:58:30 -0400] kallistec: `default[:web][:apache_sites] << "site5"` is ruby code you could use in a cookbook somewhere, but isn't valid json
[2014-03-27 18:58:36 -0400] j^2: pull out overrides everywhere
[2014-03-27 18:59:36 -0400] kallistec: j^2: arrays get replaced when they are at different attribute levels, so default[:foo] = %w[a b c] and override[:foo] = %w[ x ]
[2014-03-27 18:59:48 -0400] kallistec: would result in node[:foo] #=> "x"
[2014-03-27 19:00:03 -0400] dgarstang: A wrapper cookbook only needs to care about the cookbook its immediately wrapping right? Implementation details should not matter, right?
[2014-03-27 19:00:08 -0400] drywheat: funny thing is, i see the roledefs come in
[2014-03-27 19:00:17 -0400] drywheat: but fabric still asks for a hostname
[2014-03-27 19:00:22 -0400] j^2: kallistec: ohhh
[2014-03-27 19:00:27 -0400] j^2: yeah i get it now
[2014-03-27 19:00:39 -0400] j^2: yeah i think i'll just make the guy update the cookbook
[2014-03-27 19:01:05 -0400] drywheat: i need to open a repl and check it out
[2014-03-27 19:01:33 -0400] coderanger: drywheat: That usually means the search returned no results
[2014-03-27 19:01:42 -0400] coderanger: drywheat: fabric unfortunately defaults to asking in those cases
[2014-03-27 19:04:36 -0400] drywheat: ok, so executing "env.roledefs = chef_roledefs()" does return results
[2014-03-27 19:05:00 -0400] drywheat: e.g. {u'io-server': <chef.fabric.Roledef object at 0x10bed4950>, u'mysql-database': ...}
[2014-03-27 19:05:14 -0400] drywheat: and then for a task i'll set the decorator
[2014-03-27 19:05:19 -0400] drywheat: @roles('io-server')
[2014-03-27 19:05:50 -0400] drywheat: should/will that automatically select and connect to the hosts defined by that map value?
[2014-03-27 19:05:57 -0400] j^2: kallistec: thanks :)
[2014-03-27 19:06:39 -0400] senilegenius: have posted in #kitchenci also, but here too just in case...
[2014-03-27 19:06:44 -0400] senilegenius: anyone have a good link documenting how use test kitchen with an existing chef server?
[2014-03-27 19:19:43 -0400] tubbo: hey guys
[2014-03-27 19:19:57 -0400] tubbo: on Chef 10, is there a way to TURN OFF Chef constantly adding rubygems.org to the list of gem sources?
[2014-03-27 19:20:02 -0400] tubbo: it's pissing our entire dev team off ROYALLY...
[2014-03-27 19:20:18 -0400] tubbo: we can't use rubygems.org in the field because of offline upgrades and we need Chef to stop not listening to us :\
[2014-03-27 19:20:36 -0400] gleam: what part of chef is adding it?
[2014-03-27 19:20:40 -0400] gleam: a recipe? i'm confused.
[2014-03-27 19:20:59 -0400] Nukepuppy: are you like...
[2014-03-27 19:21:01 -0400] Nukepuppy: doing  gem installs?
[2014-03-27 19:21:03 -0400] tubbo: gleam: it's the gem_package resource
[2014-03-27 19:21:05 -0400] Nukepuppy: in chef... /
[2014-03-27 19:21:10 -0400] Nukepuppy: then you're asking it to do it!
[2014-03-27 19:21:26 -0400] tubbo: Nukepuppy: no, we want to specify the source manually. we don't want rubygems.org in the sources at all.
[2014-03-27 19:22:25 -0400] tubbo: Chef doesn't seem to be able to comprehend that we don't want to hit rubygems.org at all :P
[2014-03-27 19:22:25 -0400] Nukepuppy: you'll have to refactor
[2014-03-27 19:22:31 -0400] Nukepuppy: to use local files
[2014-03-27 19:22:50 -0400] tubbo: Nukepuppy: seriously? i can't get rubygems.org OUT of the configuration?
[2014-03-27 19:23:07 -0400] Nukepuppy: as in gem_package "whatever" do    source "/tmp/blah.gem"
[2014-03-27 19:23:19 -0400] Nukepuppy: "The RubyGems package provider attempts to use the RubyGems API to install gems "
[2014-03-27 19:23:47 -0400] Nukepuppy: either that or package your gems internally
[2014-03-27 19:23:58 -0400] Nukepuppy: via rpms or debs via FPM or something
[2014-03-27 19:23:59 -0400] gleam: make your own provider
[2014-03-27 19:24:05 -0400] gleam: use it instead
[2014-03-27 19:24:12 -0400] tubbo: gleam: that's my other option, was trying to use gem_package as far as i could
[2014-03-27 19:24:27 -0400] Nukepuppy: yeah you're basically telling a rubygems.org installer provider to not use itself
[2014-03-27 19:24:49 -0400] tubbo: Nukepuppy: no, i'm telling a `gem install` provider not to use itself. the API that it hits should be irrelevant.
[2014-03-27 19:25:08 -0400] Nukepuppy: http://docs.opscode.com/resource_gem_package.html
[2014-03-27 19:25:12 -0400] gleam: you could also create a gem wrapper script and have it use that as the gem binary
[2014-03-27 19:25:33 -0400] gleam: you can also put stuff in .gemrc
[2014-03-27 19:26:20 -0400] Nukepuppy: sounds like a lot of work .. do the nodes just not have.. internet access?
[2014-03-27 19:27:06 -0400] tubbo: gleam: we were not seeing consistent results. sometimes it would try to call out to rubygems, sometimes it won't.
[2014-03-27 19:27:29 -0400] tubbo: Nukepuppy: correct. many of our "nodes" (it's installed with chef server) don't have internet access. they are broadcast video appliances and 99% of the time they don't need access.
[2014-03-27 19:27:39 -0400] tubbo: however, we're working on getting them online soon enough.
[2014-03-27 19:28:16 -0400] Nukepuppy: honestly in cases like that it might be better for you to compile
[2014-03-27 19:28:20 -0400] Nukepuppy: and deliver 'packages'
[2014-03-27 19:29:38 -0400] tubbo: Nukepuppy: in the future, that is our goal.
[2014-03-27 19:29:59 -0400] tubbo: Nukepuppy: we're already doing that for ruby itself as well as many of our own C programs that would have to be compiled.
[2014-03-27 19:32:14 -0400] tubbo: oh and by the way? i've read that gem_package manual a billion times...it's blatantly wrong.
[2014-03-27 19:35:06 -0400] tubbo: are the chef docs open-source?
[2014-03-27 19:35:48 -0400] CPS: tubbo: they are not
[2014-03-27 19:36:51 -0400] no_name: Running new Chef Server on Azure & Ubuntu 12.10...cannot upload cookbooks, suspect fqdn issues
[2014-03-27 19:37:02 -0400] no_name: can anyone assist?
[2014-03-27 19:37:17 -0400] tubbo: this is the problem https://github.com/opscode/chef/blob/master/lib/chef/provider/package/rubygems.rb#L535
[2014-03-27 19:37:25 -0400] tubbo: CPS: so many mistakes... :\
[2014-03-27 19:37:31 -0400] no_name: lol
[2014-03-27 19:37:39 -0400] no_name: adding a node worked
[2014-03-27 19:38:01 -0400] no_name: all the azure names end in "cloudapp.net"
[2014-03-27 19:38:22 -0400] no_name: but for some reason during upload, it's repeating the server name twice
[2014-03-27 19:38:32 -0400] no_name: name.name.cloudapp.net
[2014-03-27 19:39:21 -0400] no_name: I tried setting the hostname to name.cloudapp.net, which seems to return correctly now for "hostname --fqdn"
[2014-03-27 19:39:40 -0400] no_name: but seems to have had no effect on the cookbook upload erro
[2014-03-27 19:39:42 -0400] no_name: er error
[2014-03-27 19:40:34 -0400] no_name: tubbo, just saw your link...so it's a bug in chef?
[2014-03-27 19:45:15 -0400] doomviking: its a bug if you dont want rubygems.org source :)
[2014-03-27 19:45:55 -0400] no_name: I've checked that "hostname -f" works
[2014-03-27 19:46:15 -0400] no_name: everything else I can find says to make some optional config file on the chef server with IP's in it
[2014-03-27 19:46:25 -0400] no_name: does that even remotely seem right?
[2014-03-27 19:46:49 -0400] icarus_: hello all
[2014-03-27 19:46:52 -0400] no_name: the error occurs in the bookshelf upload itself
[2014-03-27 19:47:07 -0400] icarus_: is there some other method for cloning a git branch with chef than 'application resource'
[2014-03-27 19:47:17 -0400] icarus_: i am having issues cloning non-master branches
[2014-03-27 19:47:27 -0400] icarus_: and it is a real blocker for me
[2014-03-27 19:48:20 -0400] juliancdunn: the docs are open-source tubbo & CPS
[2014-03-27 19:48:30 -0400] juliancdunn: https://github.com/opscode/chef-docs
[2014-03-27 19:48:35 -0400] juliancdunn: feel free to put in a ticket about what's wrong
[2014-03-27 19:49:30 -0400] no_name: hey juliancdunn, any chance you could glance at my cookbook upload issue?
[2014-03-27 19:50:00 -0400] juliancdunn: tubbo: I think you're running into this: https://tickets.opscode.com/browse/CHEF-4539
[2014-03-27 19:51:01 -0400] juliancdunn: no_name: you did a reconfigure after making the changes, right?
[2014-03-27 19:51:25 -0400] no_name: after updating hostname fqdn? no, that's required? sorry I'm new
[2014-03-27 19:52:35 -0400] juliancdunn: yeah, run chef-server-ctl reconfigure
[2014-03-27 19:52:41 -0400] juliancdunn: so that it picks up the changes and restarts nginx, etc.
[2014-03-27 19:53:29 -0400] no_name: got a FATAL: Chef::Exceptions::ChildConvergeError
[2014-03-27 19:53:37 -0400] no_name: that sounds bad :)
[2014-03-27 19:54:53 -0400] juliancdunn: ok, well actually this isn't the greatest way to deal with the DNS thing
[2014-03-27 19:54:59 -0400] juliancdunn: I usually leave the hostname alone
[2014-03-27 19:55:12 -0400] juliancdunn: and then set the following in /etc/chef-server/chef-server.rb:
[2014-03-27 19:55:16 -0400] no_name: should I change hostname back to just the box name?
[2014-03-27 19:55:21 -0400] juliancdunn: api_fqdn 'server.myhost.com'
[2014-03-27 19:55:21 -0400] juliancdunn: bookshelf['vip'] = 'server.myhost.com'
[2014-03-27 19:55:25 -0400] juliancdunn: no_name: I would
[2014-03-27 19:55:34 -0400] juliancdunn: and set those two settings to the public FQDN of the box
[2014-03-27 19:55:39 -0400] juliancdunn: then chef-server-ctl reconfigure
[2014-03-27 19:55:51 -0400] no_name: cool I'll give that a try, thanks for the help!
[2014-03-27 19:55:57 -0400] juliancdunn: np
[2014-03-27 19:56:05 -0400] no_name: Wish there was a bit more out there that was Azure hosted specific
[2014-03-27 19:56:19 -0400] juliancdunn: yeah... Azure *rageface*
[2014-03-27 19:56:27 -0400] no_name: not sure if any of the issues I've hit are Azure-specific or not
[2014-03-27 19:56:43 -0400] no_name: thanks again, I'll give it a try
[2014-03-27 19:56:44 -0400] juliancdunn: the fact that Azure machine names are >= 64 characters will also cause problems with SSL certificates
[2014-03-27 19:57:00 -0400] juliancdunn: since OpenSSL will refuse to generate a SSL cert with a CN >= 64 chars
[2014-03-27 19:57:21 -0400] juliancdunn: just a heads up.
[2014-03-27 19:57:24 -0400] no_name: thanks _god_ they added a publish settings flag in knife.rb
[2014-03-27 19:57:42 -0400] no_name: I was going crazy with base64, openssl for the pfx -> PEM conversion
[2014-03-27 19:57:50 -0400] juliancdunn: yeah, as did I :)
[2014-03-27 19:58:38 -0400] no_name: I'm running Chef on Ubuntu 12.10, but all the nodes I'm managing are Win boxes, so I'm thinking I can use WinRM...and avoid SSL certs?
[2014-03-27 19:59:07 -0400] juliancdunn: no_name: I mean if and when you want to generate a real SSL certificate for your Chef server
[2014-03-27 19:59:26 -0400] no_name: gotcha, sort of playing catchup on the cert end of things
[2014-03-27 19:59:28 -0400] juliancdunn: (as you should, if it's gonna be production)
[2014-03-27 20:04:05 -0400] davidordave: Quick question, say you have resource 'a' which notifies resource 'b', but resource 'c' subscribes to 'a'. Which will occur first, the notify or the subscribe if they are both:immediately ? :)
[2014-03-27 20:04:23 -0400] tubbo: juliancdunn: seems so. but it doesn't seem like they're planning to fix this for chef 10 :(
[2014-03-27 20:05:41 -0400] tubbo: at any rate, i have a fix in my own repo with a custom provider. all we did was make `source` configure the --source attr and *not* hard-code in rubygems.org
[2014-03-27 20:07:29 -0400] CPS: tubbo: why stop there? allow for --local
[2014-03-27 20:08:52 -0400] no_name: juliancdunn - all working now
[2014-03-27 20:09:07 -0400] no_name: the reconfigure error before was from me not running it with sudo
[2014-03-27 20:09:28 -0400] no_name: but adding the config file and changing hostname back worked like a charm, thanks again
[2014-03-27 20:10:06 -0400] tubbo: CPS: well if we were to simply add a rubygems_source attr to the provider, all I'd have to do is check whether that's set otherwise do DEFAULT_RUBYGEMS_SOURCE
[2014-03-27 20:16:25 -0400] dgarstang: A wrapper cookbook only needs to care about the cookbook its immediately wrapping right? Implementation details should not matter, right?
[2014-03-27 20:17:22 -0400] coderanger: dgarstang: Thats up to you
[2014-03-27 20:17:51 -0400] coderanger: dgarstang: As a parallel, a well written class creates an abstraction, but a poorly written one might still use tons of global vars internally
[2014-03-27 20:18:34 -0400] jesser: so, omnibus  i'm using `whitelist_file "libtinfo.so.5"` in a software definition but the health check is still failing on this. anyone know what might be going on? omnibus 2.0.1 installed in a vagrant box by the omnibus 1.2.4 cookbook
[2014-03-27 20:22:45 -0400] jidar: I'm trying to figure out something, if I'm just doing chef solo runs from vagrant vms I pull down and I need to serve files to that, like installers for stuff I can't grab from github anymore - and I'm trying to do this without running another server, how should I go about doing that? I really don't feel like it falls into the cookbook/foo/files stuff because of its size and it wants to sit in a git repo
[2014-03-27 20:23:26 -0400] coderanger: jidar: S3?
[2014-03-27 20:23:35 -0400] jidar: that's not a bad idea
[2014-03-27 20:23:47 -0400] coderanger: jidar: remote_file resource ftw :)
[2014-03-27 20:23:51 -0400] jidar: indeed
[2014-03-27 20:24:16 -0400] coderanger: jidar: I'm not sure if it streams to disk though, might want to check that
[2014-03-27 20:29:12 -0400] Ron__: Could someone explain what attribute type this is pulling (default, node, etc.) knife node show -l cep-staging.messagebus.com -a node.default.messagebus.cloud cep-staging.messagebus.com:   node.default.messagebus.cloud: amazon
[2014-03-27 20:29:33 -0400] Ron__: When I try to use node.default.messagebus.cloud in a recipe it returns nothing
[2014-03-27 20:31:28 -0400] Ron__: however in /var/chef/cache/failed-run-data.json I see the value I want under node.default.messagebus.cloud
[2014-03-27 20:32:06 -0400] Ron__: I can only assume this means the attribute is being overwritten while the recipes are running but I am not certain where.
[2014-03-27 20:41:43 -0400] nicko: hi chefs
[2014-03-27 20:42:44 -0400] nicko: I'm trying to access a chef server via an SSH tunnel
[2014-03-27 20:42:50 -0400] nicko: and am getting an SSL error
[2014-03-27 20:43:07 -0400] nicko: is this a good place to get assistance ? If not can someone point me in the right direction ?
[2014-03-27 20:43:49 -0400] pcort_: need some help with the 'deploy' resource if anybody has knowledge
[2014-03-27 20:44:17 -0400] nicko: (I can access the webui but knife is giving me an error)
[2014-03-27 20:46:25 -0400] coderanger: nicko: Whats the error?
[2014-03-27 20:46:28 -0400] coderanger: pcort_: Please don't use it
[2014-03-27 20:46:40 -0400] pcort_: why not
[2014-03-27 20:47:14 -0400] nicko: ERROR: SSL Validation failure connecting to host: 127.0.0.1 - SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol ERROR: OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol
[2014-03-27 20:47:39 -0400] nicko: so I assume it's got something to do with the tunnel confusing knife....
[2014-03-27 20:47:43 -0400] nicko: but I don't really know
[2014-03-27 20:48:59 -0400] coderanger: pcort_: Its a long answer, but the short version is that it gets you very little over a normal git resource and is hugely complex with more weird edge cases than I can list
[2014-03-27 20:49:10 -0400] coderanger: michael_mbp: You need to disable cert validation or fix your cert
[2014-03-27 20:49:16 -0400] coderanger: michael_mbp: Sorry, mistab
[2014-03-27 20:49:18 -0400] coderanger: nicko: ^^
[2014-03-27 20:49:26 -0400] Ron__: @nicko, whats the output of ssh -T
[2014-03-27 20:50:24 -0400] nicko: Got it @coderanger I'll try it. @Ron__ hang on I''ll try it
[2014-03-27 20:50:28 -0400] viglesias: is there a way to get all package resources in a run list to execute first?
[2014-03-27 20:50:47 -0400] coderanger: viglesias: Not directly, it runs in the order of the code
[2014-03-27 20:50:56 -0400] coderanger: Ron__: It isn't an SSH issue
[2014-03-27 20:50:58 -0400] viglesias: coderanger: thanks sir thats what i figured
[2014-03-27 20:51:17 -0400] coderanger: You gave it a hostname of "127.0.0.1" which doesn't match the SSL cert
[2014-03-27 20:51:18 -0400] viglesias: is it taboo to clear a runlist in a recipe?
[2014-03-27 20:51:23 -0400] coderanger: viglesias: Clear?
[2014-03-27 20:51:32 -0400] viglesias: with node.set or something
[2014-03-27 20:52:14 -0400] viglesias: i am using motherbrain and chef-client runs 1 time with run_list x, then something is added to the runlist then run again
[2014-03-27 20:52:24 -0400] viglesias: im guessing i should just be focusing on the idempotency
[2014-03-27 20:52:32 -0400] viglesias: rather than the hack i am thinking of
[2014-03-27 20:52:36 -0400] coderanger: viglesias: Ahh, a node changing its own runlist, it happens at times for stuff like DB migrations, but its usually an indication that chef is a poor choice for the task
[2014-03-27 20:52:47 -0400] coderanger: viglesias: Check out the oneshot cookbook for an example
[2014-03-27 20:52:57 -0400] viglesias: will do thanks again for the pointers coderanger
[2014-03-27 20:54:12 -0400] viglesias: coderanger: beautiful i think this will owrk for me, i have a bug in with my team to fix the reason i have to do this jig
[2014-03-27 20:54:35 -0400] nicko: @Ron__ - same error. I'm going to try disabling cert validation
[2014-03-27 20:54:43 -0400] coderanger: viglesias: Just beware that if a recipe is added via a role or similar, you can't remove it like that
[2014-03-27 20:54:52 -0400] coderanger: nicko: You reeeeeally shouldn't do that
[2014-03-27 20:54:57 -0400] coderanger: nicko: Its generally unsafe
[2014-03-27 20:55:24 -0400] coderanger: nicko: Better solution is to edit your hosts file so that the original name of the chef server resolves to 127.0.0.1
[2014-03-27 20:55:31 -0400] nicko: ahhhh
[2014-03-27 20:55:38 -0400] nicko: OK hang on @coderanger
[2014-03-27 20:59:23 -0400] robawt: slightly on topic: what is a good method for database migrations?
[2014-03-27 20:59:41 -0400] robawt: i realize how openen ended that could be
[2014-03-27 21:00:04 -0400] robawt: how would you handle it with Chef at your disposal?  stand up the empty server with Chef and use something else to propagate it?
[2014-03-27 21:01:11 -0400] nicko: @coderanger that didn't work but I figured something else out - looks like the web-ui is being served to me on http
[2014-03-27 21:01:36 -0400] anthroprose: robawt: I use lwrps to share creds and do things like scp or stream it to the other machine
[2014-03-27 21:01:43 -0400] anthroprose: chef-metal does similar
[2014-03-27 21:01:46 -0400] anthroprose: but better
[2014-03-27 21:01:52 -0400] nicko: @coderanger there is no "https" in the address bar. My test server (working) has https with a red cross through it. Production (the one with the SSL error) doesn't
[2014-03-27 21:02:06 -0400] coderanger: nicko: Why are you trying to use SSH tunnels for this?
[2014-03-27 21:02:21 -0400] coderanger: robawt: Use an orchestration tool
[2014-03-27 21:02:32 -0400] nicko:  @coderanger because there is firewalls and all sorts of stuff in the way and I can't get it fixed right now
[2014-03-27 21:02:37 -0400] coderanger: robawt: Examples: Fabric, Capistrano, Rundeck, Salt, Ansible, MCollective
[2014-03-27 21:02:44 -0400] jkeiser: firewalls are the biggest reason
[2014-03-27 21:02:53 -0400] jkeiser: It's the reason I invested so much in getting it into metal
[2014-03-27 21:03:00 -0400] nicko: @coderanger also the server already has things running on 80 and 443
[2014-03-27 21:03:19 -0400] coderanger: nicko: :-/ SSL relies on the server having a single, well-known name
[2014-03-27 21:03:38 -0400] nicko: @coderanger I trawled logs etc and found it then picked 9462 for webui
[2014-03-27 21:05:02 -0400] coderanger: nicko: You shouldn't talk to the UI directly, all communication to the chef server should go via its installed nginx
[2014-03-27 21:05:17 -0400] coderanger: nicko: You also shouldn't be using the FOSS webui, it is deprecated and you should disable it
[2014-03-27 21:05:21 -0400] coderanger: :-/
[2014-03-27 21:05:25 -0400] nicko: @coderanger I tried forcing nginx https only on a random port in chef-server.rb but the server doesn't seem to notice. Also I'm getting these continuously in the nginx log:
[2014-03-27 21:05:28 -0400] nicko: 2014-03-27_20:41:51.22879 nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use) 2014-03-27_20:41:51.22880 nginx: [emerg] bind() to 0.0.0.0:443 failed (98: Address already in use) 2014-03-27_20:41:51.72939 nginx: [emerg] still could not bind()
[2014-03-27 21:05:49 -0400] coderanger: nicko: Yeah, you'll have to override a bunch of the nginx config
[2014-03-27 21:06:03 -0400] coderanger: nicko: Chef-server really does expect to control the box, at least as far as ports go
[2014-03-27 21:07:18 -0400] nicko: @coderanger OK good to know. If we can't get anywhere soon I'll push for a dedicated box. This is my chef-server.rb:
[2014-03-27 21:07:34 -0400] nicko: @coderanger nginx['enable_non_ssl'] = false nginx['ssl_port'] = 9463
[2014-03-27 21:08:12 -0400] ribo: If I'm using deploy_revision to deploy an app from git, and I run the deployment a second time without :force_deploy, what exactly happens? noop?
[2014-03-27 21:08:25 -0400] ribo: a second time, with no new changes in git, that is
[2014-03-27 21:08:50 -0400] walkah: schisamo: hey, would you like some help maintaining the znc cookbook?
[2014-03-27 21:09:12 -0400] walkah: schisamo: I gather the "rewrite coming soon" isn't coming very soon :)
[2014-03-27 21:10:02 -0400] coderanger: ribo: It re-runs the plugin hooks
[2014-03-27 21:10:14 -0400] coderanger: ribo: But really, don't use the deploy resource, its super mega complicated :-(
[2014-03-27 21:10:43 -0400] ribo: eh, I've used it for years, kinda used to its quirks
[2014-03-27 21:11:28 -0400] ribo: I'm just trying to whip AWS OpsWorks into submission
[2014-03-27 21:11:32 -0400] doomviking: gave me a headache. so I gave capistrano to the devs and cleared that up. well, maybe just less of a headache.
[2014-03-27 21:11:46 -0400] coderanger: ribo: Heh, then yeah, it will just rerun all the hooks in order
[2014-03-27 21:12:30 -0400] ribo: coderanger: so, even if there aren't any changes, it'll notify some resource if I have one set to notify e.g. service[]
[2014-03-27 21:12:42 -0400] coderanger: I think so, yes
[2014-03-27 21:12:46 -0400] ribo: lol
[2014-03-27 21:13:53 -0400] ribo: ambiguous response from an @ in here, unexpected...
[2014-03-27 21:14:00 -0400] ribo: :D
[2014-03-27 21:14:57 -0400] coderanger: ribo: I did lead off with "it is too complicated to use" ;-)
[2014-03-27 21:15:03 -0400] ribo: haha
[2014-03-27 21:16:15 -0400] ribo: fair enough
[2014-03-27 21:20:15 -0400] ribo: https://github.com/opscode/chef/blob/master/lib/chef/provider/deploy.rb#L102
[2014-03-27 21:20:17 -0400] ribo: hmm
[2014-03-27 21:21:29 -0400] ribo: cool, looks like it just logs & noops
[2014-03-27 21:21:35 -0400] ribo: exactly what I wanted
[2014-03-27 21:23:08 -0400] PapaSierra: strange 404 error (nginx cookbook) http://www.hastebin.com/raw/xiqoxujowi
[2014-03-27 21:23:26 -0400] coderanger: ribo: That is for action :deploy, not :force_deploy
[2014-03-27 21:23:39 -0400] ribo: right
[2014-03-27 21:23:41 -0400] coderanger: PapaSierra: Your apt cache is out of date
[2014-03-27 21:23:48 -0400] coderanger: PapaSierra: Use the apt cookbook to trigger an apt-get update
[2014-03-27 21:23:55 -0400] PapaSierra: shoot, quite right
[2014-03-27 21:24:27 -0400] ribo: I wanted to know if it just immediately bailed out if the release was identical, or if it considered an identical release a "success" and ran hooks regardless
[2014-03-27 21:24:59 -0400] coderanger: ribo: Ahh, for :deploy, yes, it only does stuff on changes
[2014-03-27 21:25:13 -0400] ribo: cool :D
[2014-03-27 21:25:17 -0400] ribo: guess I wasn't clear
[2014-03-27 21:25:30 -0400] ribo: thanks
[2014-03-27 21:28:05 -0400] robawt: anthroprose: cool thanks
[2014-03-27 21:28:40 -0400] robawt: coderanger: do any of those orchestration tools allow for testing?  I've found salt's test=True to be a joke
[2014-03-27 21:28:49 -0400] coderanger: robawt: Define "testing"?
[2014-03-27 21:29:13 -0400] robawt: coderanger: verify what it said it did happened
[2014-03-27 21:29:37 -0400] robawt: so i could load a db dump, and once that dump was successful i could have a few queries that would work if the db was there
[2014-03-27 21:29:43 -0400] coderanger: robawt: No? Do you test that Chef itself works?
[2014-03-27 21:29:56 -0400] coderanger: robawt: You should be testing that your systems are correct, which serverspec does nicely
[2014-03-27 21:30:01 -0400] robawt: I'd like to!
[2014-03-27 21:30:08 -0400] robawt: ok cool, that's one of the directions i've looked at
[2014-03-27 21:30:31 -0400] coderanger: robawt: Thats a fools errand at best, if you get too paranoid you end up in a death spiral of testing
[2014-03-27 21:30:32 -0400] robawt: thanks for breaking that down for me coderanger
[2014-03-27 21:30:40 -0400] coderanger: robawt: Who is to say the kernel is working ;-)
[2014-03-27 21:31:13 -0400] robawt: haha, I understand, but I'm on the polar opposite of paranoid, I KNOW things aren't right but I can't always proove it with the time given
[2014-03-27 21:31:58 -0400] coderanger: Yeah, just saying that trying to write secondary test for your tools doesn't help
[2014-03-27 21:32:06 -0400] coderanger: What you want it tests for your own stuff
[2014-03-27 21:32:32 -0400] robawt: I think that's much more clearer coderanger, you're right:  I want to know the right way to begin testing my stuff
[2014-03-27 21:33:01 -0400] coderanger: Then yeah, serverspec :)
[2014-03-27 21:33:59 -0400] robawt: ok I have to ask: could I use serverspec for my orchestration as well as provisioning?
[2014-03-27 21:34:04 -0400] coderanger: No
[2014-03-27 21:34:08 -0400] coderanger: It does neither
[2014-03-27 21:34:12 -0400] coderanger: It is just a testing tool
[2014-03-27 21:34:30 -0400] robawt: so within the orchestration tool is where i'd have to write tests then?
[2014-03-27 21:34:53 -0400] robawt: I'm concerned if a series of steps are required to do an action, how can I see what and where something failed
[2014-03-27 21:34:58 -0400] coderanger: No, the two are unrelated
[2014-03-27 21:35:09 -0400] coderanger: You use the orchestration tool to run stuff
[2014-03-27 21:35:16 -0400] coderanger: and then serverspec afterwards to see if its all good
[2014-03-27 21:35:57 -0400] robawt: ok so if i used fabric, i wouldn't start calling unnitest in the fabric file?
[2014-03-27 21:36:01 -0400] coderanger: No
[2014-03-27 21:36:14 -0400] robawt: i like that, it's pretty cut and dry
[2014-03-27 21:36:20 -0400] coderanger: Again, your goal isn't to test fabric
[2014-03-27 21:36:26 -0400] coderanger: it is to test your configuration :)
[2014-03-27 21:36:52 -0400] dgarstang: oh nice. chef failed. /var/chef/cache/chef-stacktrace.out is empty
[2014-03-27 21:37:12 -0400] robawt: i think that's the part i didn't really detatch then
[2014-03-27 21:37:23 -0400] robawt: thanks again coderanger
[2014-03-27 21:52:32 -0400] dcrosby: jkeiser: just curious, are you able to run rspec on cheffish?
[2014-03-27 21:53:11 -0400] dcrosby: I'd like to start putting in support so it pulls signing stuff from knife.rb, but I'd like to make sure I don't break anything else ;-)
[2014-03-27 21:53:14 -0400] jkeiser: dcrosby: you mean can I run "rake spec" from the Cheffish project? It's been a while, but last time I checked in, it succeeded
[2014-03-27 21:53:43 -0400] jkeiser: dcrosby: ah!  Yes.  The tests in there are fine.  They aren't perfect, but they are a pretty good start
[2014-03-27 21:54:08 -0400] jkeiser: dcrosby: pulls signing stuff from knife.rb?  Do tell :)
[2014-03-27 21:54:11 -0400] dcrosby: jkeiser: ok. I'm get NameError: uninitialized constant Chef::Provider::WhyrunSafeRubyBlock on all of them
[2014-03-27 21:54:31 -0400] jkeiser: Could be something has changed in Chef
[2014-03-27 21:54:34 -0400] jkeiser: Let me check
[2014-03-27 21:55:46 -0400] dcrosby: jkeiser: we're going to use with_chef_server for our metal setup. Right now I have to hardcode signing_key_filename and client_name to get the node to bootstrap
[2014-03-27 21:56:13 -0400] dcrosby: it'd be niced to just get those from .chef/knife.rb instead :-)
[2014-03-27 21:56:43 -0400] jkeiser: dcrosby: you know if you don't specify with_chef_server, that it will use the knife.rb settings by default?
[2014-03-27 21:57:53 -0400] jkeiser: dcrosby: like, if knife.rb has chef_server_url http://mychef.com, with node_name 'blah' and signing_key_filename 'blerch.pem' those will be used for any new machines
[2014-03-27 21:58:08 -0400] dcrosby: jkeiser: Nope, didn't know that. Was that in the docs?
[2014-03-27 21:58:52 -0400] jkeiser: dcrosby: what, me doc?  (Seriously, we're actually working on docs, but no, it wasn't in them :)
[2014-03-27 21:59:29 -0400] dcrosby: Going to try that out now :-)
[2014-03-27 21:59:56 -0400] PapaSierra: how would one install ssh certificates with the nginx cookbook? i see no reference to it in the readme or code
[2014-03-27 21:59:57 -0400] jkeiser: dcrosby: with_chef_server and with_chef_local_server are just there if you want to point the new machines at a separate chef server
[2014-03-27 22:00:37 -0400] PapaSierra: sorry, SSL
[2014-03-27 22:00:56 -0400] dcrosby: jkeiser: expect a documentation patch shortly, then ;-)
[2014-03-27 22:00:58 -0400] jkeiser: dcrosby: sometimes it's worth imagining the most delightful thing that could work, and trying it out.  I tried really hard to make the defaults as awesome as possible, because I feel offended when a system makes me needlessly retype things
[2014-03-27 22:01:02 -0400] jkeiser: dcrosby: thanks :)
[2014-03-27 22:01:19 -0400] jkeiser: dcrosby: a whole section on how to use with_chef_server and with_chef_local_server would be awesome, if you are up for that!
[2014-03-27 22:01:27 -0400] jkeiser: That's one of the things that needs a-doin
[2014-03-27 22:01:59 -0400] dcrosby: jkeiser: definitely. I'm planning a bunch of doc fixes and a blog post describing the experience in the next few days
[2014-03-27 22:02:32 -0400] jkeiser: The docs that exist now are sort of a "holy shit I should really have some docs, people somehow found out about my project" moment
[2014-03-27 22:03:25 -0400] dcrosby: jkeiser: I've got some bad news. When I run 'chef-client -z' with no with_chef_server, it uses the chef-zero address
[2014-03-27 22:04:02 -0400] dcrosby: It's possible I'm approaching this terribly wrong
[2014-03-27 22:05:04 -0400] dcrosby: Is the assumption here that I'd be setting my laptop as a node and then running chef-client to access the run list on the chef server?
[2014-03-27 22:05:43 -0400] jkeiser: dcrosby: it will use whatever chef server you are pointed at, yeah--so if you do -z, it will point at your chef client
[2014-03-27 22:06:16 -0400] dcrosby: jkeiser: so it would still be necessary to use with_chef_server then
[2014-03-27 22:06:25 -0400] jkeiser: dcrosby: if you want to point the nodes at a separate chef server, you can do with_chef_server <url>, :node_name => Chef::Config.node_name, :signing_key_filename => Chef::Config.signing_key_filename
[2014-03-27 22:06:41 -0400] jkeiser: dcrosby: yep.  You can use the above strategy if you don't want to retype the actual data
[2014-03-27 22:06:49 -0400] jkeiser: dcrosby: I could be wrong about the exact key names there
[2014-03-27 22:07:06 -0400] dcrosby: jkeiser: ah, hadn't thought of just grabbing it through Chef::Config
[2014-03-27 22:07:27 -0400] jkeiser: I am typing from guessemory again ("John taking a guess at what code he probably would have written since he can't remember")
[2014-03-27 22:08:07 -0400] wdpro_kevin: anyone have an example of curling the berks-api?
[2014-03-27 22:09:20 -0400] coderanger: wdpro_kevin: Not sure what you mean
[2014-03-27 22:11:56 -0400] wdpro_kevin: 1 sec looking for an example of what I mean! :)
[2014-03-27 22:12:36 -0400] wdpro_kevin: I'm testing out our internal berks-api and I can hit /universe and /status
[2014-03-27 22:12:51 -0400] coderanger: wdpro_kevin: Those are the only two endpoints :)
[2014-03-27 22:12:58 -0400] wdpro_kevin: just want to do a query on a specific cookbook  if it works that way
[2014-03-27 22:13:08 -0400] coderanger: wdpro_kevin: Nope, thats all berks-api does
[2014-03-27 22:13:24 -0400] wdpro_kevin: ah damm it pulls down the whole lot everyt time? (besides the cache)
[2014-03-27 22:13:26 -0400] coderanger: wdpro_kevin: It just gives back the full universe to berkshelf to run a constraint solution on
[2014-03-27 22:14:06 -0400] wdpro_kevin: I guess my serch is over and coderanger you once again have my back. (bow)
[2014-03-27 22:14:11 -0400] dcrosby: jkeiser: to better assume with_chef_server awesomeness, it would be nice to assume Chef::Config[:node_name], etc. unless explicitly set
[2014-03-27 22:14:55 -0400] wdpro_kevin: a beer/coke for you if we cross paths at chefconf
[2014-03-27 22:15:00 -0400] jkeiser: dcrosby: do you have chef_server_url set in your knife.rb too?
[2014-03-27 22:15:48 -0400] dcrosby: jkeiser: When I do just 'with_chef_server <url>' it gives blank options
[2014-03-27 22:15:54 -0400] dcrosby: jkeiser: yes, I do
[2014-03-27 22:15:58 -0400] dcrosby: jkeiser: @chef_server: {:chef_server_url=>"https://chef.engine.sourcefire.com/organization        'nat-a'   => 'subnet-4f215227',
[2014-03-27 22:16:21 -0400] dcrosby: eff, 1s, will gist it
[2014-03-27 22:17:58 -0400] nicko: three cheers for @coderanger ! Hip hip hooray !
[2014-03-27 22:18:23 -0400] coderanger: wdpro_kevin: Heh, hopefully I won't be a gibbering wreck by then
[2014-03-27 22:18:29 -0400] jkeiser: dcrosby: usually the assumption is that you are pointing at an entirely new chef server, and in those cases it would be weird to assume you have the same username/key on two different servers
[2014-03-27 22:18:30 -0400] coderanger: wdpro_kevin: Haven't even started writing my talk yet :-(
[2014-03-27 22:19:04 -0400] dgarstang: if I type rm Berksfile instead of Berksfile.lock one more damn time...
[2014-03-27 22:19:11 -0400] jkeiser: dcrosby: but your specific use case makes some sense.  "I'm running -z but I have a knife.rb with some of that information"
[2014-03-27 22:19:31 -0400] jkeiser: dgarstang: you'll finally have a million dollars worth of nickels?
[2014-03-27 22:19:41 -0400] dcrosby: jkeiser: I think just documenting how to do it with Chef::Config should be enough
[2014-03-27 22:19:53 -0400] dgarstang: jkeiser; you got it
[2014-03-27 22:22:50 -0400] wdpro_kevin: coderanger my cohorts are still debating their talk as well
[2014-03-27 22:23:02 -0400] wdpro_kevin: I'll be bartending
[2014-03-27 22:26:29 -0400] dgarstang: I'm using the apt community cookbook. I'm wondering if there's a way to make apt-get update run every chef run?
[2014-03-27 22:26:42 -0400] dgarstang: I suppose I should read the docs. There's gotta be a way to do that
[2014-03-27 22:27:22 -0400] coderanger: dgarstang: It is indeed clearly documented
[2014-03-27 22:27:53 -0400] dgarstang: coderanger: :)
[2014-03-27 22:31:10 -0400] dgarstang: coderanger: although I'm not seeing it...
[2014-03-27 22:31:24 -0400] coderanger: Its in the attributes, you can change how many seconds to wait between runs
[2014-03-27 22:31:28 -0400] coderanger: You probably want 0
[2014-03-27 22:32:23 -0400] dgarstang: coderanger: gotcha, thanks
[2014-03-27 22:34:28 -0400] shadylog: coderanger: https://github.com/ozone-io/bootstrap-chef
[2014-03-27 22:34:53 -0400] shadylog: coderanger: Just uploaded it :) Big part of my thesis
[2014-03-27 22:35:06 -0400] shadylog: coderanger: tell me what you think or if you find it useful
[2014-03-27 22:36:23 -0400] coderanger: shadylog: Heh, you went a bit copy-pasty, you duplicated a large amount of the omnitruck install script just so you can download that script
[2014-03-27 22:37:32 -0400] coderanger: shadylog: Also you copied some bits you shouldn't have, like the python 2-based downloader is actively dangerous due to a lack of SSL verification
[2014-03-27 22:37:50 -0400] shadylog: yeah :P
[2014-03-27 22:37:55 -0400] shadylog: I did go very copy-pasty
[2014-03-27 22:38:12 -0400] shadylog: I should mention that
[2014-03-27 22:38:13 -0400] shadylog: sec
[2014-03-27 22:39:03 -0400] dcrosby: jkeiser: thanks, looks like that's working :-D I'll have some more patches soon :-)
[2014-03-27 22:39:19 -0400] jkeiser: dcrosby: *hugs*
[2014-03-27 22:39:50 -0400] shadylog: coderanger: I will remove the python downloader then, I think its a bit much
[2014-03-27 22:40:57 -0400] coderanger: shadylog: Which OSes are you targetting?
[2014-03-27 22:41:10 -0400] coderanger: shadylog: If you don't need to support Solaris 9 and/or AIX you can simplify a lot of stuff :)
[2014-03-27 22:41:29 -0400] shadylog: Yeah I don't need it hehe :P
[2014-03-27 22:41:42 -0400] shadylog: Well I was going for that this works on all OS's that chef install works
[2014-03-27 22:41:57 -0400] coderanger: Then you can replace the old test "x$foo" = "xfoo" pattern :)
[2014-03-27 22:42:09 -0400] coderanger: That was a workaround for bash ~2.0 not grokking empty strings correctly
[2014-03-27 22:42:17 -0400] shadylog: haha :)
[2014-03-27 22:42:20 -0400] coderanger: More modern way in bash would be
[2014-03-27 22:42:27 -0400] shadylog: I like that pattern actually, I use it often
[2014-03-27 22:42:43 -0400] coderanger: if [[ "$foo" = "foo" ]]
[2014-03-27 22:42:55 -0400] shadylog: but the double [[ is a bashism
[2014-03-27 22:43:01 -0400] coderanger: Indeed
[2014-03-27 22:43:29 -0400] shadylog: I tried to keep it all compatible under POSIX standards.. which is harder than it looks
[2014-03-27 22:43:36 -0400] shadylog: I have mad respect for chef devs making that install script
[2014-03-27 22:43:39 -0400] coderanger: Heh, then you can just use [
[2014-03-27 22:43:44 -0400] coderanger: which an alias for test
[2014-03-27 22:43:49 -0400] coderanger: but you still don't need the x hack
[2014-03-27 22:45:10 -0400] shadylog: ok thanks
[2014-03-27 22:45:17 -0400] shadylog: what about the chef configuration itself? see anything weird?
[2014-03-27 22:45:48 -0400] coderanger: I would ditch the site-packages bit
[2014-03-27 22:45:57 -0400] coderanger: thats highly deprecated, and you aren't using it anyway
[2014-03-27 22:46:13 -0400] shadylog: ok
[2014-03-27 22:46:43 -0400] shadylog: I didn't get its use actually :P
[2014-03-27 22:47:06 -0400] shadylog: its already gone
[2014-03-27 22:47:07 -0400] shadylog: :)
[2014-03-27 22:48:18 -0400] coderanger: shadylog: In the days before berkshelf and wrapper cookbooks, thats how people did local customizations on upstream cookbooks
[2014-03-27 22:48:53 -0400] shadylog: coderanger: in regard to that, I totally took your advice and didn't bother with the berkshelf/librarian-chef thing. thank you for your advice at the time!
[2014-03-27 22:49:20 -0400] coderanger: Yeah, these days we handle it at a totally different level :)
[2014-03-27 22:49:33 -0400] shadylog: yeah.
[2014-03-27 22:49:53 -0400] shadylog: this code just uses chef-solo to download it
[2014-03-27 22:50:00 -0400] shadylog: interestingly though it is a bit limited :)
[2014-03-27 22:50:26 -0400] coderanger: shadylog: Also you have /bin/sh as the shebang
[2014-03-27 22:50:35 -0400] shadylog: yeah?
[2014-03-27 22:50:37 -0400] coderanger: Beware that newer ubuntu, thats dash instead of bash
[2014-03-27 22:50:42 -0400] shadylog: I know
[2014-03-27 22:50:44 -0400] shadylog: this works in dash
[2014-03-27 22:50:46 -0400] shadylog: :P
[2014-03-27 22:51:09 -0400] shadylog: which is why I had to be posix compatible
[2014-03-27 22:51:20 -0400] coderanger: I don't think Dash does all of POSIX even
[2014-03-27 22:51:24 -0400] coderanger: just the common bits
[2014-03-27 22:51:26 -0400] shadylog: yeah
[2014-03-27 22:51:30 -0400] shadylog: its a pain
[2014-03-27 22:51:44 -0400] shadylog: but I also don't know if /bin/bash is always there
[2014-03-27 22:52:16 -0400] coderanger: Technically true, but all major linuxes have it
[2014-03-27 22:52:23 -0400] coderanger: But they also all have /usr/bin/python too
[2014-03-27 22:53:10 -0400] shadylog: this is why I leaned so heavily on what you chef dudes did
[2014-03-27 22:53:21 -0400] shadylog: because that has been written to work under dash
[2014-03-27 22:53:28 -0400] shadylog: etc
[2014-03-27 22:53:29 -0400] coderanger: Yeah, the omnitruck script jumps through a lot more hoops
[2014-03-27 22:53:35 -0400] coderanger: specifically because of solaris 9 and aix
[2014-03-27 22:53:42 -0400] shadylog: yes
[2014-03-27 22:53:52 -0400] shadylog: and while I don't specifically have tested for it.. It should work
[2014-03-27 22:54:07 -0400] coderanger: Indeed :)
[2014-03-27 22:54:14 -0400] coderanger: If thats something desirable then +1
[2014-03-27 22:54:37 -0400] coderanger: But supporting a 12+ year old OS is no easy feat ;-)
[2014-03-27 22:54:45 -0400] shadylog: goal => feed configuration with a single script, internet access, environment variables
[2014-03-27 22:55:20 -0400] shadylog: it installs provisioner/cm-tool you want, and the accompanying stuff that you defined
[2014-03-27 22:55:27 -0400] shadylog: in my eyes it can't be more beautiful
[2014-03-27 22:55:49 -0400] coderanger: shadylog: A nice goal, but beware leaky abstractions :)
[2014-03-27 22:55:56 -0400] doomviking: gosh, how I don't miss solaris.
[2014-03-27 22:56:07 -0400] doomviking: irix, on the other hand...
[2014-03-27 22:57:31 -0400] coderanger: doomviking: I can send you some old sparc boxes if you want to relive the good ol days
[2014-03-27 22:59:18 -0400] doomviking: pizza boxes? I could use a good doorstop ;)
[2014-03-27 23:01:06 -0400] coderanger: doomviking: If you want pizza boxes, I have a pair of http://www.thepcmuseum.net/comp_images/photo_IBMRisc6000.JPG
[2014-03-27 23:01:13 -0400] coderanger: model 250s
[2014-03-27 23:01:27 -0400] coderanger: Each of those suckers weighs like 50 pounds
[2014-03-27 23:01:32 -0400] doomviking: coderanger: I think I'll pass, thank you very much :)
[2014-03-27 23:01:45 -0400] doomviking: they are made from bricks, after all
[2014-03-27 23:01:56 -0400] coderanger: More like tank-grade steel >_<
[2014-03-27 23:02:10 -0400] coderanger: Just in case you need to use them armor your cubicle
[2014-03-27 23:07:44 -0400] doomviking: coderanger: if you have any sgi onyx machines laying about, hang yourself in the supply closet.
[2014-03-27 23:08:18 -0400] coderanger: doomviking: No onyx, I do have a non-booting origin2 and a pair in indys though
[2014-03-27 23:08:24 -0400] dstynchula: wow! that's a real ibm!
[2014-03-27 23:08:41 -0400] dstynchula: My family could only afford a cheap toshiba clone when I was a kid.
[2014-03-27 23:08:47 -0400] coderanger: doomviking: I did pretty serious techno-archeology in uni
[2014-03-27 23:08:50 -0400] dstynchula: fancy! ;)
[2014-03-27 23:08:57 -0400] doomviking: coderanger: I got rid of all that old crap a long time ago. apparently you did!
[2014-03-27 23:09:14 -0400] coderanger: doomviking: Got to know where we came from to know where we are going
[2014-03-27 23:09:36 -0400] coderanger: doomviking: Same reason I say all engineers should learn VMS
[2014-03-27 23:11:15 -0400] doomviking: coderanger: that is a tall order
[2014-03-27 23:11:25 -0400] storme_away: i used vms, but was never an admin.
[2014-03-27 23:11:32 -0400] doomviking: storme_away: me too
[2014-03-27 23:11:39 -0400] storme_away: first admin i had was sunos.
[2014-03-27 23:12:02 -0400] storme_away: 4.1.2/1.3/1.3u1 days
[2014-03-27 23:12:16 -0400] doomviking: oh good. there is a vms emulator
[2014-03-27 23:12:28 -0400] coderanger: doomviking: yep, simh
[2014-03-27 23:12:36 -0400] coderanger: doomviking: You can still get 7.3 install media too
[2014-03-27 23:12:46 -0400] coderanger: doomviking: Though it does require connecting to an honest-to-goodness BBS
[2014-03-27 23:12:48 -0400] doomviking: I think I'm not gonna go down that road haha
[2014-03-27 23:13:04 -0400] coderanger: doomviking: I've got ruby 1.8.2 built, never quite got chef running though :-(
[2014-03-27 23:13:46 -0400] doomviking: thats a shame
[2014-03-27 23:17:57 -0400] shadylog: what's VMS
[2014-03-27 23:23:41 -0400] doomviking: an old OS that later became windows NT; both made admins into some surly mofos.
[2014-03-27 23:23:46 -0400] EricL: I have a cookbook that won't seem to upgrade no matter how many times I update the metadata.rb
[2014-03-27 23:23:56 -0400] EricL: It's not pinned anywhere.
[2014-03-27 23:24:01 -0400] EricL: Any thoughts on why this might happen?
[2014-03-27 23:25:08 -0400] jkeiser: Hey, does anyone know where lxc_strerror is defined?  I can't find it anywhere ... https://github.com/lxc/lxc/blob/master/src/lxc/lxc.h#L161
[2014-03-27 23:25:58 -0400] EricL: n/m It's pinned by the depends in another cookbook.
[2014-03-27 23:27:05 -0400] jkeiser: Ohai, I am in the wrong channel with that question.
[2014-03-27 23:30:42 -0400] smcracraft: Any idea why this happens on the chef ? "ERROR: Failed to authenticate to http://chef-server:4000 as chef-server with key /root/.chef/chef-server.pem   Response: Failed to authenticate. Ensure that you client key is valid."
[2014-03-27 23:34:52 -0400] Nukepuppy: smcracraft is this a new node?
[2014-03-27 23:35:07 -0400] Nukepuppy: im guessing a node you have in chef..  when it tries to communicate with chef gets that error?
[2014-03-27 23:35:23 -0400] Nukepuppy: or when you re-bootstrap it?
[2014-03-27 23:35:30 -0400] smcracraft: it is when knife node list is run on the chef server
[2014-03-27 23:36:11 -0400] Nukepuppy: on the knife admin system you mean?
[2014-03-27 23:36:23 -0400] smcracraft: yes
[2014-03-27 23:36:25 -0400] Nukepuppy: i guess it could also be ran from the chef server if it has the knife configs
[2014-03-27 23:36:33 -0400] smcracraft: one and the same here
[2014-03-27 23:37:24 -0400] Nukepuppy: well hmm i would just regenerate and make sure you get the new keys from chef-server
[2014-03-27 23:37:29 -0400] Nukepuppy: validateor/and whatever it is
[2014-03-27 23:37:33 -0400] Nukepuppy: you dont even need to re-run knife -i
[2014-03-27 23:37:46 -0400] Nukepuppy: just put the files the knife.rb references in the place it expects
[2014-03-27 23:43:39 -0400] dstynchula: How can I use the bash resource to run the following?
[2014-03-27 23:43:40 -0400] dstynchula: ./configure --localstatedir=/var --with-km
[2014-03-27 23:44:08 -0400] coderanger: dstynchula: Do exactly what you said :-)
[2014-03-27 23:44:20 -0400] dstynchula: the '=' sign seems to be freaking out the recipe
[2014-03-27 23:44:24 -0400] doomviking: ha
[2014-03-27 23:44:35 -0400] coderanger: Whats your recipe code look like?
[2014-03-27 23:47:48 -0400] dstynchula: actually, it ran ok in the chef-shell
[2014-03-27 23:47:57 -0400] dstynchula: it just freaks out sublimetext
[2014-03-27 23:48:00 -0400] dstynchula: https://gist.github.com/dstynchula/9821750
[2014-03-27 23:48:11 -0400] dstynchula: 'yellowed' the rest of the code
[2014-03-27 23:49:18 -0400] coderanger: dstynchula: Ahh, yeah, editors don't do well with one lang inside the other most of the time
[2014-03-27 23:49:38 -0400] dstynchula: coderanger: a #/ seems to have sorted it out
[2014-03-27 23:49:44 -0400] dstynchula: lol
[2014-03-27 23:50:07 -0400] dstynchula: it's almost done now.
[2014-03-27 23:50:23 -0400] dstynchula: I'll have a mdadm-drbd cookbook to opensource soon.
[2014-03-27 23:50:27 -0400] dstynchula: wootee woot!
[2014-03-27 23:50:35 -0400] smcracraft: Nukepuppy: thanks for the inspiration. I tweaked client_key in /root/.chef/knife.rb to be /etc/chef/client.pem which had been generated earlier. For some reason the value had drifted. knife anything now works. great stuff.
[2014-03-27 23:52:23 -0400] tabolario: coderanger: so you're not having any issues using current vagrant 1.4.x with vagrant-wrapper and Berkshelf master?
[2014-03-27 23:52:45 -0400] tabolario: I just noticed you were using it in that poise repo, hadn't heard of it before
[2014-03-27 23:52:50 -0400] coderanger: tabolario: No, though I've not updated my gemfile in a day or two
[2014-03-27 23:53:25 -0400] tabolario: I'm still just pulling in vagrant off the 1.4.3 tag in my Gemfile and bundle exec'ing everything
[2014-03-27 23:53:45 -0400] coderanger: tabolario: Yep, thats what I do
[2014-03-27 23:54:20 -0400] tabolario: Travis + test-kitchen + <insert cloud provider> is awesome BTW
[2014-03-27 23:54:29 -0400] coderanger: tabolario: The Gemfile in Poise probably hasn't been sync'd to my normal one in a while
[2014-03-27 23:54:36 -0400] coderanger: tabolario: Eh, awesome isn't the word I would use
[2014-03-27 23:54:48 -0400] coderanger: tabolario: I get a ton of false failures due to launch issues
[2014-03-27 23:54:59 -0400] tabolario: Well awesome for my purposes so far
[2014-03-27 23:55:07 -0400] tabolario: Ah yeah, I haven't run into too many with DO yet
[2014-03-27 23:55:39 -0400] tabolario: I'd be using EC2 though if I wanted to shell out a bit more
[2014-03-27 23:55:45 -0400] coderanger: tabolario: Now that Docker has authentication support I'll hopefully move to that soon
[2014-03-27 23:55:53 -0400] coderanger: Yeah, I'm "stuck" on Rackspace because they give me free stuff :)
[2014-03-27 23:56:08 -0400] tabolario: Hah well that's not a bad way to be stuck I suppose
[2014-03-27 23:56:12 -0400] coderanger: Also RS has a slightly faster average launch time than EC2
[2014-03-27 23:57:07 -0400] tabolario: I mostly went with DO because of cost and keeping things a bit simpler, if I went on EC2 I'd be compelled to do a lot more things
[2014-03-27 23:57:53 -0400] tabolario: I actually decided to just use vagrant-digitalocean and solo to manage provisioning for the demo staging and prod environments I'm making for this project
[2014-03-27 23:59:07 -0400] tabolario: Perhaps I'll finally start pulling our cookbooks at work out into their own repos and putting them up on our Travis Pro account now that I know how to set all that up
[2014-03-27 23:59:50 -0400] coderanger: tabolario: Better, open source 'em and use normal travis

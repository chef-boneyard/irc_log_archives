[2014-03-20 00:19:37 -0400] doomviking: https://github.com/brandonhilkert/fucking_shell_scripts
[2014-03-20 00:22:02 -0400] coderanger: someara: Ping
[2014-03-20 00:23:16 -0400] flaccid: doomviking: whow that is intersting
[2014-03-20 00:23:49 -0400] flaccid: pretty funny that it is a gem
[2014-03-20 00:24:55 -0400] anthroprose: http://devstructure.com/blueprint/
[2014-03-20 00:25:00 -0400] doomviking: cant tell if its a joke or not
[2014-03-20 00:25:08 -0400] anthroprose: likely both ;)
[2014-03-20 00:25:14 -0400] coderanger: anthroprose: blueprint is long dead
[2014-03-20 00:25:18 -0400] anthroprose: code: i know
[2014-03-20 00:25:25 -0400] anthroprose: but thats pretty much what that guy did
[2014-03-20 00:25:54 -0400] anthroprose: another half joke ;)
[2014-03-20 00:26:18 -0400] doomviking: haha
[2014-03-20 00:26:19 -0400] doomviking: Step 5: Remove your chef repo and all its contents.
[2014-03-20 00:26:19 -0400] doomviking: rm -rf ~/old_config_management/chef
[2014-03-20 00:26:30 -0400] doomviking: gotta be a joke.
[2014-03-20 00:27:10 -0400] anthroprose: coderanger: anything newer than flock of chefs or is that yet again etcd territory?
[2014-03-20 00:27:32 -0400] coderanger: anthroprose: Depends on what you are trying to do
[2014-03-20 00:27:42 -0400] anthroprose: notify another node without it running chef
[2014-03-20 00:28:16 -0400] anthroprose: or even dependly running multiple chef runs on different machines somehow
[2014-03-20 00:28:29 -0400] coderanger: anthroprose: pushy, dominodes, pylon
[2014-03-20 00:28:32 -0400] anthroprose: err, single chef run on multiple machines, but they are depent on actions from each other
[2014-03-20 00:28:46 -0400] coderanger: anthroprose: (mcollective, rundeck, etc)
[2014-03-20 00:30:05 -0400] anthroprose: yeah, I really just want a method for PUSH notifications through chefserver, I could even handle the concurrancy
[2014-03-20 00:30:10 -0400] anthroprose: but yeah i know, orchestration tools
[2014-03-20 00:30:19 -0400] anthroprose: i get my hopes up every few weeks
[2014-03-20 00:31:23 -0400] coderanger: anthroprose: poke btm until he open-sources pushy
[2014-03-20 00:31:43 -0400] anthroprose: annoy people on the internet? I can do that
[2014-03-20 00:34:32 -0400] doomviking: heh
[2014-03-20 00:46:35 -0400] coderanger: spheromak: You about?
[2014-03-20 00:46:59 -0400] someara: coderanger pong
[2014-03-20 00:47:16 -0400] coderanger: someara: (and spheromak) want to take a look at https://github.com/balanced-cookbooks/role-env-demo?
[2014-03-20 00:47:39 -0400] coderanger: Quickie pattern I just wrote for a coworker for doing application-specific environments for settings
[2014-03-20 00:48:42 -0400] coderanger: Trying to figure out if it could be done more cleanly
[2014-03-20 00:50:08 -0400] someara: isn't that how people did environments back in chef 8?
[2014-03-20 00:50:21 -0400] coderanger: someara: Nah, mostly people did it with roles
[2014-03-20 00:50:25 -0400] someara: hrm
[2014-03-20 00:50:37 -0400] coderanger: This is trying to map similar ideas to cookbooks to keep it all in one place though
[2014-03-20 00:50:49 -0400] coderanger: rather than role-balanced-prod and role-balanced-test
[2014-03-20 00:51:07 -0400] anthroprose: coderanger: do you have major infra changes between them?
[2014-03-20 00:51:28 -0400] coderanger: anthroprose: No, app environments are generally just changes in app settings
[2014-03-20 00:51:32 -0400] anthroprose: I'm using python virtualenv's and magic_shell
[2014-03-20 00:52:37 -0400] someara: ug don't tell me stupid mavericks update broke my ssh again
[2014-03-20 00:52:42 -0400] someara: sonuva
[2014-03-20 00:52:50 -0400] anthroprose: https://github.com/customink-webops/magic_shell and then I make my virtualenv's ./bin/active loop & source those files from profile.d
[2014-03-20 00:53:25 -0400] coderanger: anthroprose: is that aimed at me?
[2014-03-20 00:53:37 -0400] anthroprose: coderanger: yeah, sorry
[2014-03-20 00:53:47 -0400] anthroprose: then I read ENVIRONMENT into the app
[2014-03-20 00:53:58 -0400] coderanger: anthroprose: Not sure of the link, you still need some way to store and organize settings between envs
[2014-03-20 00:54:05 -0400] coderanger: anthroprose: and some are things like "which branch to install from"
[2014-03-20 00:54:18 -0400] anthroprose: coderanger: yeah, I drive things with cloudformation
[2014-03-20 00:54:25 -0400] anthroprose: so jenkins tells CF, which tells chef
[2014-03-20 00:54:33 -0400] anthroprose: which populates the env, that the app reads
[2014-03-20 00:54:56 -0400] coderanger: anthroprose: I try to keep configuration data out of CF :-) chef is good at config
[2014-03-20 00:55:24 -0400] anthroprose: ohh I know
[2014-03-20 00:55:35 -0400] anthroprose: but do you have a CF stack with multiple different versions? I never have
[2014-03-20 00:55:44 -0400] anthroprose: so I just make it top down
[2014-03-20 00:56:41 -0400] anthroprose: coderanger: https://gist.github.com/anthroprose/5d4f8ba315b23cec745b
[2014-03-20 00:56:50 -0400] anthroprose: but I also use regular attrs too
[2014-03-20 00:58:08 -0400] anthroprose: this was, I can run all of our webapps on the same node if I *really* wanted to
[2014-03-20 00:58:19 -0400] anthroprose: everything is namespaced
[2014-03-20 00:58:39 -0400] anthroprose: not saying its better or anything, just what im doing
[2014-03-20 00:59:24 -0400] coderanger: anthroprose: Not sure how that helps
[2014-03-20 01:00:59 -0400] anthroprose: coderanger: maybe just different problems
[2014-03-20 01:01:13 -0400] anthroprose: i needed a way for deploy level UI to pass params for app level config
[2014-03-20 01:01:22 -0400] anthroprose: plus populate secrets
[2014-03-20 01:01:28 -0400] coderanger: anthroprose: Yeah, this is a structure for having heritable overrides in each app cluster
[2014-03-20 01:02:24 -0400] anthroprose: ahh, I just have defaults everywhere unless you change them yourself
[2014-03-20 01:02:27 -0400] anthroprose: "{\"run_list\":[\"role[brain]\"],\"jumpshot\":{\"brain\":{\"version\":\"",{ "Ref": "Version" },"\", \"reference\":\"",{ "Ref": "GitBranch" },"\", \"environment\":\"",{ "Ref": "Environment" },"\"}}}"
[2014-03-20 01:02:33 -0400] anthroprose: thats how it all starts
[2014-03-20 01:02:44 -0400] anthroprose: and then ends in a individual virtualenv's ENV
[2014-03-20 01:03:01 -0400] coderanger: anthroprose: That doesn't allow for easy tiered inheritance
[2014-03-20 01:03:10 -0400] coderanger: anthroprose: You can do that part already with normal chef envs
[2014-03-20 01:03:15 -0400] anthroprose: no I see your issue now
[2014-03-20 01:04:13 -0400] anthroprose: so my layers are chef environment, wrapper cookbook, node init.json override
[2014-03-20 01:04:42 -0400] anthroprose: but yeah, my last place I had prod-(n), staging-(n), etc...
[2014-03-20 01:04:47 -0400] anthroprose: and every prod-(n) was different
[2014-03-20 01:05:19 -0400] anthroprose: so I just ended up using version numbers for environments
[2014-03-20 01:08:04 -0400] coderanger: anthroprose: That means a lot of duplication of any shared config
[2014-03-20 01:09:15 -0400] anthroprose: coderanger: at that time I was also using roles, but it was essentially a CF stack per customer, each customer could have different versions from each other and occasionally there were customer with 2 simultaneous versions
[2014-03-20 01:09:22 -0400] anthroprose: now I'm just staging/production
[2014-03-20 01:09:52 -0400] anthroprose: and since CF was driven from a boostrap/mongodb dashboard that held the metadata, it wasnt too bad
[2014-03-20 01:10:00 -0400] anthroprose: but yeah, better ways
[2014-03-20 01:10:40 -0400] anthroprose: im about to go global again, so I will be thinking about these things again
[2014-03-20 01:10:48 -0400] anthroprose: prod/staging for every dc
[2014-03-20 02:44:18 -0400] doug1: anyone awake?
[2014-03-20 02:45:31 -0400] Durzo: no
[2014-03-20 02:47:39 -0400] anthroprose: always
[2014-03-20 02:48:10 -0400] anthroprose: yfeldblum: you still running an nginx+python stack?
[2014-03-20 03:59:22 -0400] doug1: Is there a way to show ohai data with knife search?
[2014-03-20 04:09:53 -0400] ignatz: you can specify an attribute to return from the search
[2014-03-20 04:49:00 -0400] yfeldblu_: anthroprose: hmm?
[2014-03-20 04:49:01 -0400] mikehaas763: Hi, we use chef for our provisioning servers. Just a handful. If something happens with a server for whatever reason and needs to be restarted is there something chef can do to help with this (or another tool)? Or is it basically just 'yo log in restart it' ?
[2014-03-20 04:49:40 -0400] anthroprose: yfeld: just remember you had a nginx+python stack, we talked about uwsgi a long time ago, but i wasnt python at the time
[2014-03-20 04:50:08 -0400] anthroprose: well now I'm running a nginx+uwsgi+python stack and uwsgi is blocking like crazy
[2014-03-20 04:50:35 -0400] yfeldblu_: anthroprose: doubt it was me; i haven't run nginx+python
[2014-03-20 04:50:42 -0400] anthroprose: diff nick, mybad :)
[2014-03-20 08:11:01 -0400] Tester_: Hi guys i have installed chef server 11
[2014-03-20 08:11:16 -0400] Tester_: the server seems to have set up nicely
[2014-03-20 08:11:41 -0400] Tester_: i have created a workstation and was able to upload cookbooks as well
[2014-03-20 08:11:55 -0400] Tester_: however whe i try to access it through jclouds api
[2014-03-20 08:12:04 -0400] Tester_: it throws me the certification erroe
[2014-03-20 08:12:14 -0400] n1ko: yep?
[2014-03-20 08:12:43 -0400] Tester_: i am trying to list down the clients
[2014-03-20 08:12:49 -0400] Tester_: but it throws me this
[2014-03-20 08:12:50 -0400] Tester_: unable to find valid certification path to requested target connecting to GET https://192.168.0.68/client
[2014-03-20 08:13:00 -0400] n1ko: https does that
[2014-03-20 08:13:10 -0400] n1ko: install a real certificate or find a way to accept a self signed
[2014-03-20 08:13:12 -0400] Tester_: is there anything i need to do on my chef server
[2014-03-20 08:13:32 -0400] n1ko: no, other than installing a signed certificate
[2014-03-20 08:13:41 -0400] n1ko: its a client side issue
[2014-03-20 08:16:17 -0400] Abhi_: Hey Guys I am using chef for application deployment and i was having some queries ,  1) my application has multiple environments where we have to deploy application like dev, stag, prod so how can i maintain environment specific configuration in chef , should i use chef environment or roles for this.
[2014-03-20 08:19:27 -0400] n1ko: i like environments for that reason because we use roles for stuff like "myapp-app" or "myapp-db" etc
[2014-03-20 08:22:38 -0400] Abhi_: @n1ko is chef environments are not for chef development ? I mean as i understand chef environments are built for cookbook testing in multiple environments not for other application deployment ?
[2014-03-20 09:33:13 -0400] srenatus: can I do (chef-) rewind in a ruby_block that's among the first items on my runtime collection?
[2014-03-20 09:35:07 -0400] srenatus: I'm asking because trying to put the rewind stuff into a recipe (as-is, compile time) and having that recipe as the last thing in a resource collection is quirky.  putting it into the base role is easy
[2014-03-20 11:37:30 -0400] nkts: hey guys
[2014-03-20 11:37:39 -0400] nkts: is hosted chef working ok?
[2014-03-20 11:38:01 -0400] nkts: I'm getting timeouts while synchonizing cookbooks
[2014-03-20 11:38:06 -0400] yatesy: I just noticed a few blips on searches timing out too
[2014-03-20 11:38:21 -0400] nkts: and I don't know who to blame :)
[2014-03-20 11:39:06 -0400] nkts: btw is search functionality working on chef-zero?
[2014-03-20 12:19:10 -0400] yatesy: Still seeing periodic failures, nothing on status.opscode.com yet
[2014-03-20 12:28:51 -0400] srenatus: nkts: you can search with chef-zero (or, "local mode", "chef-client -z")
[2014-03-20 12:44:13 -0400] adamtemple: Hi, I am having issues with many timeouts with our Hosted Chef. Is something going on? Is anyone else experiencing the same issues?
[2014-03-20 12:51:06 -0400] srenatus: adamtemple: judging from the backlog, you're not alone.
[2014-03-20 12:51:15 -0400] srenatus: (I'm not using hosted, though)
[2014-03-20 12:52:36 -0400] adamtemple: Yeah, looking at Twitter and chat history it looks to be. No update on the status page yet though
[2014-03-20 13:01:22 -0400] yatesy: yup still having issues here too
[2014-03-20 13:10:08 -0400] srenatus: anyone using whitelist-node-attrs?  It seems like filtering with the whitelist creates empty leaves (key {}) for entries that exist in the whitelist only but not in the actual attributes...
[2014-03-20 13:15:39 -0400] nobody18288181: How does the chef server autostart on reboot? On centos I do not see anything in /etc/init.d/ but chef-server is starting upon boot
[2014-03-20 13:23:05 -0400] dark_dr4g0n: maybe embedded runit
[2014-03-20 13:24:03 -0400] nobody18288181: dark_dr4g0n: I think it chef-server may be starting up from /etc/init/ not sure yet.
[2014-03-20 13:24:16 -0400] srenatus: there should be an init script starting runsvdir
[2014-03-20 13:24:27 -0400] nobody18288181: srenatus: where at?
[2014-03-20 13:24:48 -0400] srenatus: nobody18288181: I'm looking for it right now...
[2014-03-20 13:25:20 -0400] nobody18288181: srenatus: I'm thinking it's /etc/init/chef-server-runsvdir.conf ?
[2014-03-20 13:25:59 -0400] srenatus: nobody18288181: no that's for upstart
[2014-03-20 13:26:29 -0400] srenatus: nobody18288181: centos, hence sysvinit
[2014-03-20 13:26:42 -0400] srenatus: nobody18288181: check you inittab for this https://github.com/opscode/omnibus-chef-server/blob/c4b793948bf7e1b9b35033b5876682a6509cb81c/files/chef-server-cookbooks/runit/recipes/sysvinit.rb#L21
[2014-03-20 13:27:03 -0400] srenatus: maybe there's some log output produced by init, no idea how centos handles that
[2014-03-20 13:27:20 -0400] nobody18288181: srenatus: inittab clean
[2014-03-20 13:29:53 -0400] srenatus: nobody18288181: really?! hmm then this must have failed you https://github.com/opscode/omnibus-chef-server/blob/master/files/chef-server-cookbooks/runit/recipes/default.rb
[2014-03-20 13:30:40 -0400] nobody18288181: yea at
[2014-03-20 13:30:41 -0400] nobody18288181:     else # >= 6.0
[2014-03-20 13:30:41 -0400] nobody18288181:       include_recipe "runit::upstart"
[2014-03-20 13:30:42 -0400] nobody18288181:     end
[2014-03-20 13:32:01 -0400] nobody18288181: yea
[2014-03-20 13:32:04 -0400] nobody18288181: a quick google
[2014-03-20 13:32:05 -0400] nobody18288181: "Red Hat includes Upstart in their Red Hat Enterprise Linux 6 release.[14] As a result, it is also used by RHEL 6 variants such as CentOS, Scientific Linux, and Oracle Linux. For RHEL 7, systemd will be used."
[2014-03-20 13:32:14 -0400] nobody18288181: soooo it installs as upstart job in centos
[2014-03-20 13:32:46 -0400] srenatus: nobody18288181: Oh.  I didn't know that there was upstart on rhel... this case makes a lot more sense now ;)
[2014-03-20 13:32:55 -0400] nobody18288181: me neither... TIL
[2014-03-20 13:32:56 -0400] nobody18288181: lol
[2014-03-20 13:36:22 -0400] srenatus: nobody18288181: is your issue resolved, then?
[2014-03-20 13:36:34 -0400] srenatus: nobody18288181: install upstart, be happy...?
[2014-03-20 13:39:22 -0400] nkts: adamtemple: yes.. still suffering..
[2014-03-20 13:39:37 -0400] nkts: can't do much work today ;(
[2014-03-20 13:39:44 -0400] nobody18288181: srenatus: it's installed by default
[2014-03-20 13:41:26 -0400] adamtemple: nkts: Yeah, I'm unsure what it could be. I'm fairly sure its not local to me if other people are having issues and i've checked all our connectivity which is fine
[2014-03-20 13:41:59 -0400] adamtemple: Seems to be same integration between the Chef application layer and their storage layer
[2014-03-20 13:42:11 -0400] adamtemple: Although S3 overall is fine obviously
[2014-03-20 14:25:01 -0400] mboeru: hello
[2014-03-20 14:25:27 -0400] mboeru: could anyone have a look into my issue? http://pastebin.com/Ff5gp0MB ; I am just starting out with chef and following http://gettingstartedwithchef.com/first-steps-with-chef.html
[2014-03-20 14:25:40 -0400] mboeru: but I got that weird error with build-essential
[2014-03-20 14:31:30 -0400] houms: is there a way to download cookbook and all of its deps at once? e.g mysql requires openssl and buidl0-essential according to knife
[2014-03-20 14:31:54 -0400] srenatus: houms: berks can do that. depending on the version it's "berks install" or "berks vendor" (v3)
[2014-03-20 14:32:49 -0400] houms: so if i am on workstation using knife to download the cookbook is that berk done on the workstation? also is there a way to get cookbooks on server without having to download them first on the workstation?
[2014-03-20 14:32:55 -0400] houms: thanks for your reply srenatus
[2014-03-20 14:33:46 -0400] srenatus: houms: many worksflows are possible, but usually, people use berks to download cookbooks on the workstation (actually, rather to upload them to a chef server)
[2014-03-20 14:34:08 -0400] srenatus: houms: Noone will keep you from using berks on the server to get all dependencies. that's another possible workflow
[2014-03-20 14:34:45 -0400] houms: but i do not seem to have berks installed? is it part of the install ? I do have /opt/chef/embedded/bin in PATH
[2014-03-20 14:35:46 -0400] mboeru: did anyone experience my error with build-essential  cookbook? http://pastebin.com/Ff5gp0MB
[2014-03-20 14:35:47 -0400] srenatus: houms: no berks is not there by default
[2014-03-20 14:35:59 -0400] houms: so knife itself is not really to be used to download cookbooks is it? I mean doing so implies that each dep will needed to also be downloaded separately?
[2014-03-20 14:36:39 -0400] srenatus: houms: but you can (mis-) use the omnibus install, i.e. "/opt/chef/embedded/bin/gem install berkshelf"
[2014-03-20 14:37:04 -0400] srenatus: houms: but note that there are dependencies, i.e. building gems may require gcc/make (build-essential)
[2014-03-20 14:37:57 -0400] houms: srenatus what is the common workflow for managing cookbooks then? it seems there is a bit of disjointedness
[2014-03-20 14:38:16 -0400] houms: mostly pre-made cookbooks
[2014-03-20 14:38:40 -0400] srenatus: houms: the basic decision is of course chef-client or chef-solo
[2014-03-20 14:38:41 -0400] houms: i am curious if you are running environment with server for central management, how you get cookbooks on server in a sane manner
[2014-03-20 14:38:47 -0400] srenatus: houms: and that one has implications
[2014-03-20 14:39:03 -0400] srenatus: houms: berks is what most people use to resolve cookbook deps and push them to a server
[2014-03-20 14:39:16 -0400] srenatus: houms: can't qualify "most" though, just an intuition
[2014-03-20 14:39:56 -0400] houms: i see . I do appreciate your insights. It is very helpful. I am coming from puppet/foreman background and some of the workflow ideas are relatively different
[2014-03-20 14:51:58 -0400] shlant: what's the best way to have a default attribute not set and then check if it's set?
[2014-03-20 14:52:18 -0400] shlant: like if I want to break the run unless the user explicitely sets an attr
[2014-03-20 14:52:33 -0400] shlant: and the attr is a string
[2014-03-20 14:56:39 -0400] coredump_: Guyze, how you manage staging/qa/production environments with berkshelf? Like, newer versions or testing cookbooks have to go only to staging (and it's a different version from the production and qa ones)?
[2014-03-20 14:57:33 -0400] anthroprose: coredump: Chefserver Environments
[2014-03-20 14:57:42 -0400] anthroprose: the server itself can have multiple versions
[2014-03-20 14:58:09 -0400] Siiseli_: you can also specify cookbook version in the run list
[2014-03-20 14:58:36 -0400] coredump_: yes, that I do already, I am trying to integrate it with berkshelf.
[2014-03-20 14:58:49 -0400] coredump_: maybe spiceweasel? no, that seems too overpower
[2014-03-20 14:59:14 -0400] anthroprose: coredump: many rely on semantic version pinning and lots of testing
[2014-03-20 14:59:24 -0400] anthroprose: I do mine with static pins and batch acceptance testing
[2014-03-20 14:59:49 -0400] coredump_: My worries is about multiple people using the repo
[2014-03-20 14:59:58 -0400] coredump_: and applying a wrong version to some environment
[2014-03-20 15:00:40 -0400] anthroprose: so if you pin them at environment, and control who can edit environments
[2014-03-20 15:01:00 -0400] anthroprose: they can only deploy to the wrong environment, not the wrong version of an environment's dependency
[2014-03-20 15:01:21 -0400] coredump_: controlling who can edit environments is not optimal
[2014-03-20 15:01:59 -0400] anthroprose: heh
[2014-03-20 15:02:13 -0400] anthroprose: sounds like process issues if anyone can touch your production environment
[2014-03-20 15:02:54 -0400] anthroprose: use a deploy tool like jenkins or something as a quality gate/acl
[2014-03-20 15:03:03 -0400] coredump: anyone on the ops team can, that's 5 people already
[2014-03-20 15:03:24 -0400] anthroprose: coredump: having jr.dev knife environment update production.json is *VERY* dangerous
[2014-03-20 15:03:54 -0400] anthroprose: most have that as part of a tested, buildable process
[2014-03-20 15:04:18 -0400] anthroprose: thats how you down entire infras
[2014-03-20 15:04:51 -0400] coredump: I honestly think this is a very slow process. But again, I am not a devop, I am a sysadmin.
[2014-03-20 15:04:58 -0400] coredump: I will think about it, thanks.
[2014-03-20 15:05:19 -0400] anthroprose: coredump: so in theory, on a laptop, remote anywhere a dev could update your production metadata
[2014-03-20 15:05:23 -0400] anthroprose: and the next chef run
[2014-03-20 15:05:26 -0400] anthroprose: *boom*
[2014-03-20 15:05:51 -0400] coredump: yep, that's why we trust our employees not to fuck up :)
[2014-03-20 15:06:10 -0400] anthroprose: i trust no-one except myself, and I even suck at that
[2014-03-20 15:06:31 -0400] coredump: My organization has a very different culture then :)
[2014-03-20 15:06:34 -0400] anthroprose: i prefer to enforce reality with code, not culture
[2014-03-20 15:06:37 -0400] anthroprose: ohh totally
[2014-03-20 15:06:49 -0400] adamtemple: Hi all again, has anyone found any update with the issues with timeouts during runs with connectivity into opscode's storage
[2014-03-20 15:07:27 -0400] anthroprose: coredump: I once had my boss take down an entire SaaS, just because he 'didn't think he should be able to run those commands and so tried'
[2014-03-20 15:08:00 -0400] houms: once I create a Bertksfile in chef-repo/cookbooks/ and add cookbook 'mysql' to that file i then do a berks install and it seems to download mysql and the deps, but doing berks upload mysql returns cert error http://pastie.org/8953627
[2014-03-20 15:08:32 -0400] anthroprose: houms: sounds like your knife.rb dosnt have the right pem
[2014-03-20 15:09:14 -0400] houms: the client key or validation key?
[2014-03-20 15:09:27 -0400] anthroprose: possibly
[2014-03-20 15:10:26 -0400] houms: how can i tell ? is there a log file I can watch?
[2014-03-20 15:10:32 -0400] houms: possibly which one ? or both?
[2014-03-20 15:11:13 -0400] srenatus: houms: you could create ~/.berkshelf.config with { "ssl": { "verify": false }}
[2014-03-20 15:11:21 -0400] srenatus: wait, ~/.berkshelf/config.json
[2014-03-20 15:11:41 -0400] anthroprose: ah, I didnt even lookl at the paste sorry
[2014-03-20 15:11:44 -0400] anthroprose: yeah, self signed cert
[2014-03-20 15:12:12 -0400] houms: is ther workaround for self-signed certs? this is testing and I would hate to load a live ssl cert for testbed purposes
[2014-03-20 15:12:26 -0400] houms: no worries. Thanks anthroprose
[2014-03-20 15:12:31 -0400] anthroprose: houms: depends on the complexity you need
[2014-03-20 15:12:51 -0400] anthroprose: I run chefzero for things like that
[2014-03-20 15:12:58 -0400] mattsurabian: anthroprose: same here
[2014-03-20 15:13:00 -0400] anthroprose: but its local and stateless
[2014-03-20 15:13:03 -0400] houms: is a there doc I can review explaining that so I don't annoy you with my questions?
[2014-03-20 15:13:06 -0400] mattsurabian: chef_zero is ideal for that
[2014-03-20 15:13:35 -0400] anthroprose: houms: use test-kitchen to drive berkshelf+chefzero+allthetools
[2014-03-20 15:13:52 -0400] mattsurabian: anthroprose: +1
[2014-03-20 15:14:03 -0400] anthroprose: https://github.com/test-kitchen/test-kitchen & https://github.com/paulczar/meez
[2014-03-20 15:14:24 -0400] anthroprose: i just need a 'here are some chef tools' gist
[2014-03-20 15:14:27 -0400] anthroprose: that we can change daily
[2014-03-20 15:14:48 -0400] fveillette: Can someone can help me with this error? private method `open' called for Chef::Provider::File:Clas
[2014-03-20 15:15:07 -0400] srenatus: hmm meez, never seen this before. thanks anthroprose.
[2014-03-20 15:15:25 -0400] srenatus: fveillette: can you paste some context somewhere? (pastebin etc)
[2014-03-20 15:15:38 -0400] anthroprose: srenatus: it is in dev and in flux, it recently ditched strainer for rake and some others
[2014-03-20 15:15:47 -0400] anthroprose: but its much better than anything else I've seen
[2014-03-20 15:15:49 -0400] fveillette: https://gist.github.com/anonymous/9666063
[2014-03-20 15:15:56 -0400] fveillette: that my provider
[2014-03-20 15:15:59 -0400] fveillette: in chef
[2014-03-20 15:16:42 -0400] fveillette: output of my run: https://gist.github.com/anonymous/9666082
[2014-03-20 15:17:09 -0400] srenatus: fveillette: try ::File
[2014-03-20 15:17:25 -0400] srenatus: fveillette: i.e. ::File.open, so it will not use the "closest" class
[2014-03-20 15:18:42 -0400] fveillette: ok
[2014-03-20 15:23:42 -0400] yatesy: adamtemple: nope, after a few hours I'd have expected a status post or something by now :(
[2014-03-20 15:28:33 -0400] fveillette: my error change...
[2014-03-20 15:28:33 -0400] coredump: meez, test-kitchen and berks seem like a cool thing
[2014-03-20 15:28:35 -0400] fveillette: i got Permission denied - d:\source_file
[2014-03-20 15:28:37 -0400] fveillette: now :(
[2014-03-20 15:29:29 -0400] fveillette: lol
[2014-03-20 15:29:32 -0400] fveillette: i just found why :D
[2014-03-20 15:30:09 -0400] dobbs1: Hi All.  My main project is to replace capistrano with chef-solo and application_ruby.  My current snag is git doesn't have credentials to our github repo. StackOverflow suggests passing ssh keys via an encrypted databag (http://stackoverflow.com/questions/14624560/i-want-to-use-https-connection-on-my-git-repo-and-the-crendentials-are-in-data-b), but previous reading suggests I might do well to avoid databags.  Is there an incantation to make 'ss
[2014-03-20 15:35:27 -0400] bousquet: Anyone know how I can make ark install_with_make use the content disposition filename rather than the extension in the path to determine how to unpack (tar.gz)?
[2014-03-20 15:37:33 -0400] bousquet: looks like github is now redirecting .../v0.3.4.tar.gz requests to .../tar.gz/v0.3.4 and then remote_file doesn't write what ark[unpack] expects
[2014-03-20 15:40:20 -0400] Nielsen: Hello all, I'm seeing timeouts when upload cookbooks to opscode hosted chef. I see this was mentioned earlier but looks like no update to the problem?
[2014-03-20 15:41:37 -0400] anthroprose: Nielsen: do the retries suceed?
[2014-03-20 15:41:46 -0400] chrisg_: question - given, say, the elasticsearch community cookbook, which has attributes for version and for download filename, which is derived from the version
[2014-03-20 15:42:36 -0400] anthroprose: chrisg: for the es cookbook I set version only
[2014-03-20 15:42:38 -0400] chrisg_: in my own recipe when I include this, if I try to override the version attribute it does not also get the derived download filename right (it still has the default version number from the ES cookbook)
[2014-03-20 15:42:57 -0400] anthroprose: chris: using node.override?
[2014-03-20 15:43:25 -0400] chrisg_: tried several variants, I think including that, I'll try again... in recipe or attributes file?
[2014-03-20 15:43:43 -0400] anthroprose: current practice is to create a wrapper cookbook
[2014-03-20 15:43:45 -0400] Nielsen: anthroprose: Nope, tried mulitple times now
[2014-03-20 15:43:57 -0400] anthroprose: and do the overrides in the attributes
[2014-03-20 15:44:14 -0400] anthroprose: Nielsen: sometimes there are s3 eventually consistant issues, among other things
[2014-03-20 15:44:31 -0400] anthroprose: its a huge distributed system
[2014-03-20 15:45:00 -0400] anthroprose: i notice blips all the time... so unless its an actual bug
[2014-03-20 15:45:01 -0400] bubu: Hey guys, am seeing this on all our nodes using hosted chef: Errno::ETIMEDOUT: Error connecting to https://api.opscode.com/organizations/$ORGNAMEHERE/search/$DATABAGNAMEHERE?q=*:*&sort=X_CHEF_id_CHEF_X%20asc&start=0&rows=1000 - Connection timed out - connect(2)
[2014-03-20 15:45:07 -0400] chrisg_: anthro thx, I'll retry that might have done something odd... just need to override in attribute file and include the comm cookbook in the default recipe, right?
[2014-03-20 15:45:14 -0400] bubu: when I run chef=client manually, chef run completes OK, any ideas?
[2014-03-20 15:45:41 -0400] Popsikle-Work: run with -l debug
[2014-03-20 15:45:43 -0400] anthroprose: bubu: your manual run has $ENV vars that populate when cron does not?
[2014-03-20 15:46:10 -0400] bubu: cron doesn't run our chef-client ( AFAIK )
[2014-03-20 15:46:24 -0400] anthroprose: so what is different than 'manually'
[2014-03-20 15:48:34 -0400] bubu: well, normally we have the chef-client running as a service daemon
[2014-03-20 15:50:26 -0400] anthroprose: ah
[2014-03-20 15:50:31 -0400] anthroprose: ok, so whatever runs the daemon
[2014-03-20 15:50:42 -0400] anthroprose: what populates $ORGNAME?
[2014-03-20 15:51:03 -0400] anthroprose: like I do things such as OPSCODE_USER=`hostname chef-client
[2014-03-20 15:51:52 -0400] bubu: etc/chef/client.rb which has the correct orgname in it...I redacted the orgname and databag from the paste...
[2014-03-20 16:01:11 -0400] eliklein: so the other day i asked if there was a knife plugin that would allow you to run a command serially on some nodes and have it stop the first time a node fails to run the command
[2014-03-20 16:01:23 -0400] eliklein: i couldn't find one, so i created knife-cereal ;)
[2014-03-20 16:01:29 -0400] eliklein: it's on rubygems.
[2014-03-20 16:01:31 -0400] bbssysop: in chef-client out put... what does this mean:  @@ -1 +1,12 @@
[2014-03-20 16:01:40 -0400] eliklein: that's diff output
[2014-03-20 16:02:00 -0400] rdobbs: Hi. I was wondering if anyone might have an idea why a recipe would work in one enivonrment but in another a template inside of the (sigh) application_ruby cookbook errors out with "could not find cookbook none"
[2014-03-20 16:02:18 -0400] eliklein: ie. something changed in a file, what follows that line is what changed.. you'll see + and - prepended to the output showing what appeared and what disappeared
[2014-03-20 16:02:25 -0400] rdobbs: there's no environmental differentiation within the recipe, and it's the same recipe in both environments
[2014-03-20 16:02:37 -0400] anthroprose: rdobbs: sounds like attr convergence somehow
[2014-03-20 16:03:18 -0400] eliklein: rdobbs: you can also explicitly set the cookbook name to pull the template from by saying "cookbook <cookbook name>"
[2014-03-20 16:03:20 -0400] rdobbs: hrm. I'll dig through the attributes and see if somehow something is different
[2014-03-20 16:03:21 -0400] bbssysop: nice. that lead me to: http://www.gnu.org/software/diffutils/manual/diffutils.html#Detailed-Unified
[2014-03-20 16:03:24 -0400] bbssysop: if anyone is interested.
[2014-03-20 16:03:35 -0400] bbssysop: thank you
[2014-03-20 16:03:54 -0400] eliklein: bbssysop: surely
[2014-03-20 16:04:17 -0400] rdobbs: eliklein: I'm not sure I can as this is just an attribute passed to the database block within the rails block of a application block
[2014-03-20 16:04:20 -0400] rdobbs: but I'll try that now
[2014-03-20 16:04:26 -0400] eliklein: ah
[2014-03-20 16:04:46 -0400] eliklein: i may not be debugging that correctly, apologies if i send you down a rathole
[2014-03-20 16:05:20 -0400] coredump: lol I love dependencies conflict
[2014-03-20 16:05:21 -0400] coredump: https://gist.github.com/coredump/e349d946c0a709e615e9
[2014-03-20 16:05:45 -0400] rdobbs: coredump: I love music and women, bit I can't say the same about dependencies
[2014-03-20 16:05:58 -0400] rdobbs: ;)
[2014-03-20 16:06:01 -0400] coredump: birds of a feather
[2014-03-20 16:06:07 -0400] eliklein: coredump: could be worse, you could be fighting cookbook dependency problems.
[2014-03-20 16:06:12 -0400] anthroprose: coredump: yeah, for most new chef tools, I use an ubuntu distro & ruby 1.9+
[2014-03-20 16:06:29 -0400] anthroprose: trying to get test-kitchen to run on amazon linux makes me cry
[2014-03-20 16:06:51 -0400] coredump: who never had json/ssh/ssh-multi problems with the old versions of chef gem
[2014-03-20 16:06:59 -0400] coredump: that made me want to kick myself in the nuts
[2014-03-20 16:08:23 -0400] rdobbs: man this is so weird.
[2014-03-20 16:08:30 -0400] coredump: I may be getting an old version of the meez gem
[2014-03-20 16:09:15 -0400] rdobbs: https://gist.github.com/anonymous/5d3be639b26b010f5291
[2014-03-20 16:11:39 -0400] anthroprose: rdobbs: but you are feeding it   cookbook "none"
[2014-03-20 16:11:42 -0400] anthroprose: what do you expect?
[2014-03-20 16:11:48 -0400] rdobbs: I'm not
[2014-03-20 16:11:59 -0400] rdobbs: I'm using the application cookbook
[2014-03-20 16:12:04 -0400] rdobbs: it works perfect in one environment but not the other
[2014-03-20 16:12:14 -0400] rdobbs: well as perfect as the application cookbook can be anyways, which is mostly broken
[2014-03-20 16:12:20 -0400] anthroprose: ah, well the app cookbook is feeding it none
[2014-03-20 16:12:23 -0400] anthroprose: so its still upstream
[2014-03-20 16:12:23 -0400] rdobbs: yeah
[2014-03-20 16:12:39 -0400] rdobbs: sometimes I think chef is trolling me
[2014-03-20 16:12:49 -0400] anthroprose: its the 237237843 layers of convergence
[2014-03-20 16:13:04 -0400] anthroprose: trace back up the stack that attr
[2014-03-20 16:13:11 -0400] anthroprose: and I bet the app cookbook has a piece of logic somewhere
[2014-03-20 16:13:13 -0400] rdobbs: wasn't this the reason we shifted away from Puppet? non-deterministic issues?
[2014-03-20 16:13:14 -0400] rdobbs: :)
[2014-03-20 16:13:24 -0400] rdobbs: yeah doing that now. :/
[2014-03-20 16:13:37 -0400] anthroprose: that is treating a blank/null/nil as a string and makes it 'none'
[2014-03-20 16:13:49 -0400] anthroprose: but that may be my python talking re: 'None'
[2014-03-20 16:13:56 -0400] rdobbs: there isn't even an attribute to set the cookbook where the template comes from
[2014-03-20 16:14:10 -0400] rdobbs: I don't see why it wouldn't come from the cookbook calling it, as it does elsewhere
[2014-03-20 16:15:18 -0400] rdobbs: for fun, because this is really fun, I'm going to create a cookbook named none
[2014-03-20 16:15:28 -0400] nkts: anyone having connection timeout problems with hosted chef today?
[2014-03-20 16:15:46 -0400] anthroprose: nkts: hearing lots of that
[2014-03-20 16:16:03 -0400] rdobbs: nkts: this past week 25% of my uploads fail
[2014-03-20 16:16:13 -0400] rdobbs: http://fuckingshellscripts.org has an appeal this morning
[2014-03-20 16:16:32 -0400] adamtemple: nkts: Yeah, as we discussed before. it seems they might have been moving stuff to new infrastructure today
[2014-03-20 16:16:43 -0400] adamtemple: but their support suggests that most things should be fine or coming back
[2014-03-20 16:17:37 -0400] adamtemple: although that said, some of ours are still failing
[2014-03-20 16:17:53 -0400] nkts: I have started new server on AWS
[2014-03-20 16:18:26 -0400] nkts: and after ~430 requests to s3, I'm getting timeouts
[2014-03-20 16:18:27 -0400] mattsmith: Afternoon all, anyone else seeing a build up of chef-client processes?
[2014-03-20 16:19:17 -0400] anthroprose: great, and I have a planned traffic spike coming down the line
[2014-03-20 16:19:21 -0400] mattsmith: We call chef-client from the cron every 15mins. We monitor these processes and this has only started today
[2014-03-20 16:19:57 -0400] anthroprose: so this is why people with big deploys run their own chefserver
[2014-03-20 16:20:20 -0400] nkts: what is big deploy? :)
[2014-03-20 16:20:24 -0400] anthroprose: but also, I tried running my own for 2 weeks and had many issues not worth the monthly cost of hostedchef
[2014-03-20 16:20:34 -0400] anthroprose: nkts: usually I hear thousands of servers
[2014-03-20 16:20:51 -0400] anthroprose: don't get me wrong, people do that with hostedchef too
[2014-03-20 16:20:55 -0400] anthroprose: (i think)
[2014-03-20 16:21:05 -0400] anthroprose: but privatechef, etc... is for that market
[2014-03-20 16:21:09 -0400] nkts: I'm having problems to run it smoothly on one server at a time ;)
[2014-03-20 16:21:20 -0400] anthroprose: nkts: bad timing honestly
[2014-03-20 16:21:25 -0400] nkts: yess....
[2014-03-20 16:21:29 -0400] anthroprose: i havnt had blips for months
[2014-03-20 16:21:42 -0400] anthroprose: more than I can say for self hosted things ;)
[2014-03-20 16:21:54 -0400] gleam: i run it myself because we're cheap. about 100 nodes..haven't had any problems with it
[2014-03-20 16:21:58 -0400] nkts: tbh I have not done anything today what I had to do and now it's almost time to go home
[2014-03-20 16:22:03 -0400] dgarstang: Of the people here using the hosted chef, is anyone running clients on ec2? How does security work?
[2014-03-20 16:22:09 -0400] nkts: because chef/cloud wasn't working
[2014-03-20 16:22:24 -0400] anthroprose: gleam: that was my thinking.... but somehow I kill chef11 every time i install it no matter what method
[2014-03-20 16:22:53 -0400] anthroprose: dgarstang: I highly suggest IAM instance profiles, validator pem in s3 secure bucket with resource level perms
[2014-03-20 16:22:53 -0400] nkts: gleam: how do you upgrade chef-server ?
[2014-03-20 16:23:01 -0400] gleam: i install the new omnibus package
[2014-03-20 16:23:06 -0400] nkts: do you have to reupload cookbooks/other data?
[2014-03-20 16:23:11 -0400] gleam: and run chef-serverctl-reconfigure or whatever it is
[2014-03-20 16:23:12 -0400] gleam: nope
[2014-03-20 16:23:24 -0400] anthroprose: dgarstang: and use this https://github.com/balanced-cookbooks/citadel
[2014-03-20 16:23:59 -0400] anthroprose: for other artifacts... I personally use cloudformation to drive the chef bootstrap
[2014-03-20 16:24:44 -0400] nkts: but cloudformation is AWS specific thing
[2014-03-20 16:24:53 -0400] dgarstang: anthroprose: for hosted chef?
[2014-03-20 16:25:11 -0400] dgarstang: anthroprose: citadal won't work with GCE. :)
[2014-03-20 16:26:16 -0400] adamtemple: Has anyone else been in contact with support with regard to this?
[2014-03-20 16:26:25 -0400] adamtemple: The outage i mean
[2014-03-20 16:26:25 -0400] anthroprose: you asked about ec2 tho
[2014-03-20 16:26:34 -0400] wdeviers: On a manual bootstrap of a Debian 6 or 7 box for a very simple "inventory" cookbook, I'm creating and autostarting the chef-client sysv (init) script.  It creates the files and runs the initial run fine, but then some amount of minutes later (10 or so) the running chef-client exits.  This is onchef_11.8.2-1.debian.6.0.5_amd64.deb.  Strace reveals ) = -1 ETIMEDOUT (Connection timed out), which is all I can get at the moment. I don't know what it's trying to
[2014-03-20 16:26:34 -0400] wdeviers: connect to.  Anybody else seeing this recently?  It worked fine maybe.. 3-4 weeks ago?
[2014-03-20 16:26:50 -0400] dgarstang: anthroprose: ec2 AND GCE I suppose
[2014-03-20 16:27:01 -0400] anthroprose: ive never used GCE so I can't comment
[2014-03-20 16:27:11 -0400] anthroprose: if they support object store, it should be little difference
[2014-03-20 16:27:11 -0400] rdobbs: dear Chef, would you please give miah_ $1m so she can hire 5 people and rewrite all the community cookbooks not to be so jacked up?
[2014-03-20 16:27:20 -0400] dgarstang: anthroprose: the crux of my question was, does hosted chef have any level of security above the cert?
[2014-03-20 16:27:21 -0400] rdobbs: since her cookbooks always flipping work?
[2014-03-20 16:27:35 -0400] nkts: adamtemple: I'm still waiting for hosted chef, to start work normaly
[2014-03-20 16:27:58 -0400] nkts: tho I have not received any reply to my support ticket
[2014-03-20 16:28:03 -0400] anthroprose: dgar: no no no no
[2014-03-20 16:28:12 -0400] anthroprose: encrypted databags, that they store encrypted
[2014-03-20 16:28:14 -0400] anthroprose: but thats it
[2014-03-20 16:28:25 -0400] dgarstang: anthroprose: i think we're talking about different things
[2014-03-20 16:28:56 -0400] adamtemple: nkts: ok. We are still pursuing support to get information
[2014-03-20 16:29:17 -0400] nkts: never had such problems with puppet ;/
[2014-03-20 16:29:53 -0400] dgarstang: rdobbs: I have found the chef community cookbooks to be far more usable as-is than puppet ones
[2014-03-20 16:29:55 -0400] rdobbs: OK, I created a cookbook named none. and it worked.
[2014-03-20 16:30:06 -0400] rdobbs: dgarstang: Puppet can perform fellatio on a donkey.
[2014-03-20 16:30:17 -0400] rdobbs: I used it since the very beginning, and it was always a shitshow
[2014-03-20 16:30:18 -0400] dgarstang: rdobbs: I don't know if that's good or bad?
[2014-03-20 16:30:22 -0400] rdobbs: =)
[2014-03-20 16:30:23 -0400] nkts: dgarstang: I still write my own cookbooks/manifests
[2014-03-20 16:30:39 -0400] dgarstang: nkts: i'll use a community one if i can. moar faster
[2014-03-20 16:30:50 -0400] nkts: yes, I know
[2014-03-20 16:31:07 -0400] rdobbs: I'm working on scrapping all but the most basic cookbooks and rewriting them as providers
[2014-03-20 16:31:08 -0400] dgarstang: when the boss is like 'get this shit done' community ones are very appealing. :)
[2014-03-20 16:31:20 -0400] rdobbs: dbarstang: not when you have to spend 2 weeks debugging them
[2014-03-20 16:31:21 -0400] nkts: but I don't to turn each server into development machine, where everything is compiled from source
[2014-03-20 16:31:34 -0400] rdobbs: the more I use chef, the more I have to do manual work and roll out amis
[2014-03-20 16:31:41 -0400] nkts: or wont be able to deploy prod, if some 3rd party is failing
[2014-03-20 16:31:44 -0400] rdobbs: just due to workload and lack of bodies in my group
[2014-03-20 16:32:38 -0400] rdobbs: I think recipe-based cookbooks are the wrong approach
[2014-03-20 16:32:45 -0400] nkts: dgarstang: yeah yeah I know that
[2014-03-20 16:32:48 -0400] rdobbs: libraries for the win
[2014-03-20 16:33:20 -0400] nkts: LWRPs are cool
[2014-03-20 16:33:33 -0400] Nielsen: Regarding timeout to opscode hosted chef. I'm seeing SSL errors connecting to Amazon S3
[2014-03-20 16:33:36 -0400] Nielsen: ERROR: SSL Validation failure connecting to host: s3-external-1.amazonaws.com - SSL_connect returned=6 errno=0 state=SSLv3 read finished A
[2014-03-20 16:33:36 -0400] Nielsen: ERROR: OpenSSL::SSL::SSLError: SSL_connect returned=6 errno=0 state=SSLv3 read finished A
[2014-03-20 16:34:18 -0400] swalberg: I'm trying to bootstrap a new node through a gateway (-G mygateway) but get a "failed to authenticate to the chef server" error. Is there some config I need on my gateway?
[2014-03-20 16:34:49 -0400] adamtemple: Neilsen: I've not seen ssh errors come up yet in the chat or here but it likely related to the similar issues effecting others
[2014-03-20 16:35:08 -0400] nkts: Nielsen: yes, I got timeouts with s3-external-1.amazonaws.com all the day
[2014-03-20 16:35:17 -0400] nkts: now it is more less working
[2014-03-20 16:35:29 -0400] dgarstang: next question.... uploading cookbooks to a test chef server. Were using the thor scm version thing atm to bump VERSION and add tags, but if we wanted to upload a cookbook to a test server, we wouldn't want to deal with git...so... I dunno
[2014-03-20 16:35:30 -0400] swalberg: oh, never mind, blew things away on the node and it started working
[2014-03-20 16:35:35 -0400] adamtemple: yeah, it seems to work more now than it did earlier, but still intermittent
[2014-03-20 16:37:22 -0400] nkts: looks like it's morning in California and people are fixing things :)
[2014-03-20 16:37:49 -0400] rdobbs: Seattle?
[2014-03-20 16:37:55 -0400] rdobbs: or did Chef open a local office?
[2014-03-20 16:38:04 -0400] nkts: ghm
[2014-03-20 16:38:09 -0400] nkts: dunno, need to check
[2014-03-20 16:38:30 -0400] Nielsen: So this fauls when testing S3: openssl s_client -connect s3-external-1.amazonaws.com:443
[2014-03-20 16:39:04 -0400] nkts: Nielsen: ok for me
[2014-03-20 16:39:11 -0400] nkts: AWS glitch?
[2014-03-20 16:39:14 -0400] Nielsen: But following this http://stackoverflow.com/questions/21904335/ssl-validation-failure-connecting-to-host and using $ openssl s_client -CAfile PCA-3G5.pem -connect s3-external-1.amazonaws.com:443
[2014-03-20 16:39:15 -0400] Nielsen:  passes. i'll wait till 'someone' fixes. Cheers
[2014-03-20 16:39:25 -0400] anthroprose: per usual AWS says everythings fine
[2014-03-20 16:39:45 -0400] mattsmith: connections to the opscode api are timing out, anyone else?
[2014-03-20 16:39:57 -0400] nkts: Nielsen: which IP you're getting?
[2014-03-20 16:39:59 -0400] rdobbs: mattsmith: workinfg fine for me now, was botched an hour ago
[2014-03-20 16:40:13 -0400] nkts: mattsmith: yes, I have seen this
[2014-03-20 16:40:38 -0400] mattsmith: Anyone reported it to opscode,getchef,chef
[2014-03-20 16:40:51 -0400] mattsmith: ?
[2014-03-20 16:40:58 -0400] drywheat: chef foodcritic indicates that we should either quote file permissions or fully specify them
[2014-03-20 16:41:08 -0400] drywheat: i.e. "644" or 00644
[2014-03-20 16:41:34 -0400] drywheat: so, what's the mode for setting the effective GID on a dir
[2014-03-20 16:41:44 -0400] drywheat: 02755 or 20755?
[2014-03-20 16:41:46 -0400] bbssysop: im getting an error that something in a not_if statement doesnt exist. i thought that was the point of not_if? http://paste.ubuntu.com/7126098/
[2014-03-20 16:41:48 -0400] rdobbs: why should you need to quote an integer and turn it into a string?
[2014-03-20 16:42:30 -0400] drywheat: rdobbs: it has to do with the way Chef interprets a numeric value
[2014-03-20 16:42:47 -0400] gleam: 02755
[2014-03-20 16:42:49 -0400] drywheat: rdobbs: if numeric, it assumes you're providing an octal value
[2014-03-20 16:43:05 -0400] drywheat: gleam: what's that first 0? sticky bit?
[2014-03-20 16:43:39 -0400] rdobbs: Ah
[2014-03-20 16:44:16 -0400] gleam: the 0 is meaningless, ti's to convince ruby that it's octal instead of decimal. that's my understanding at least
[2014-03-20 16:45:06 -0400] drywheat: bahhhh...it was right in front of me
[2014-03-20 16:45:08 -0400] drywheat: gleam: thx
[2014-03-20 16:45:58 -0400] gleam: i personally prefer 5 digit unquoted but i think most people do quoted
[2014-03-20 16:46:40 -0400] drywheat: i typically use a 4 digit unquoted, but most of the time the 4th digit is zero
[2014-03-20 16:46:56 -0400] rdobbs: Ok I'm getting ridiculously weird errors. cookbooks no longer applying that worked 25 minutes ago, and nothing has changed.
[2014-03-20 16:47:03 -0400] rdobbs: could hosted chef be doing something really, really bizarro?
[2014-03-20 16:47:19 -0400] rdobbs: like serving up super old versions of cookbooks?
[2014-03-20 16:47:52 -0400] bbssysop: am i using not_if incorrectly?
[2014-03-20 16:47:53 -0400] rdobbs: and now it's applying
[2014-03-20 16:47:58 -0400] anthroprose: rdobbs: with the s3 errors, there could be caching issues maybe
[2014-03-20 16:48:01 -0400] dgarstang: oookay. knife bump anyone?
[2014-03-20 16:48:10 -0400] rdobbs: idempotence, it ain't just a river in egypt
[2014-03-20 16:48:32 -0400] rdobbs: anthroprose: what's weird, though, is when chef-client runs it's showing the right versions of the cookbooks.
[2014-03-20 16:48:55 -0400] anthroprose: rdobbs: all depends on your version scheme and what/when was uploaded.... but im totally speculating
[2014-03-20 16:49:11 -0400] anthroprose: just based on s3 eventual consistency & such
[2014-03-20 16:49:27 -0400] anthroprose: i dont know the inner workings of erchef
[2014-03-20 16:49:36 -0400] rdobbs: What's weird is these recipes are about 3 days old, so perhaps it's sending me cookbooks from back then
[2014-03-20 16:50:26 -0400] dgarstang: how are people bumping VERSION?
[2014-03-20 16:51:20 -0400] anthroprose: idgarstang: I prefer using a key, but some people still use straws
[2014-03-20 16:51:23 -0400] drywheat: rdobbs: you could launch `chef-shell' on the problematic node to see what's loading
[2014-03-20 16:51:37 -0400] drywheat: if you've already cut a new server
[2014-03-20 16:51:41 -0400] yatesy: i just tend to use knife spork's default bump, major/minor really means nothing to me internally
[2014-03-20 16:51:45 -0400] anthroprose: there is a tool for versioning cookbooks on commit
[2014-03-20 16:51:49 -0400] yatesy: if it was a public cookbook, i'd probably be more stringent
[2014-03-20 16:51:56 -0400] dgarstang: anthroprose: que?
[2014-03-20 16:52:04 -0400] rdobbs: is chef-shell the same as shef?
[2014-03-20 16:52:04 -0400] anthroprose: trying to remember
[2014-03-20 16:52:10 -0400] anthroprose: rdobbs: in chef11 yeah
[2014-03-20 16:52:51 -0400] rdobbs: ah thanks
[2014-03-20 16:52:56 -0400] dgarstang: yatesy: so much typing for knife spork... knife spork bump COOKBOOK [major | minor | patch | manual x.x.x]
[2014-03-20 16:53:18 -0400] yatesy: yeah i just don't bother with major/minor/patch etc on the end
[2014-03-20 16:53:31 -0400] dgarstang: yatesy: you don't really need to give the cookbook name do you?
[2014-03-20 16:53:56 -0400] yatesy: yeah it's not aware of which directory you're in or anything, so you need to specify it
[2014-03-20 16:54:05 -0400] dgarstang: yatesy: Ugh. That's plain dumb
[2014-03-20 16:54:27 -0400] yatesy: it doesn't bother me, i'm often not in the cookbook directory when bumping, uploading and promoting
[2014-03-20 16:56:26 -0400] dgarstang: knife spork bump bc-apt minor == 'ERROR: TypeError: can't convert nil into String'. Oh, that's nice
[2014-03-20 16:58:57 -0400] dgarstang: 'nife spork check bc-apt' == 'ERROR: TypeError: can't convert nil into String'
[2014-03-20 17:04:31 -0400] rdobbs: yeah. chef is sending me the wrong versions, and lying about it, looking at the cached cookbooks. must be an s3 consistency issue
[2014-03-20 17:04:54 -0400] gleam: s3 seems to be having all sorts of problems
[2014-03-20 17:05:00 -0400] dgarstang: so, basicaly, spork is borked. *lol*
[2014-03-20 17:05:32 -0400] dgarstang: of coure -V to knife yields nothing.
[2014-03-20 17:07:18 -0400] rdobbs: s3 or hosted chef?
[2014-03-20 17:07:54 -0400] rdobbs: feeling like it's time to start running my own chef-server and ditch hosted chef
[2014-03-20 17:08:11 -0400] rdobbs: or chef-solo, would probably save me 2 hours a day watching stuff upload
[2014-03-20 17:10:13 -0400] dgarstang: knife spork is supposed to actuall modify the VERSION file right?
[2014-03-20 17:10:18 -0400] anthroprose: rdobbs: chef-zero
[2014-03-20 17:10:39 -0400] anthroprose: i type kitchen converge and know pretty quick
[2014-03-20 17:10:46 -0400] rdobbs: damn. sweet.
[2014-03-20 17:11:12 -0400] rdobbs: that could be awesome.
[2014-03-20 17:11:23 -0400] rdobbs: sometimes I feel like I'm compiling gcc
[2014-03-20 17:13:10 -0400] werdnativ: I'm guessing chef-zero search :nodes will only find things by what's in the nodes/*.json directory? It doesn't look like it finds the self-same node in kitchen if I give it a matching role...
[2014-03-20 17:13:58 -0400] werdnativ: i.e. kitchen run_list has a role, but chef-zero won't find that in search?
[2014-03-20 17:14:57 -0400] rdobbs: and for no reason, whatsoever, the application cookbook is now finding the template from the right cookbook, with no changes at all.
[2014-03-20 17:15:18 -0400] rdobbs: just for fun I've been re-running chef-client in a while loop, 50% failures. definitely sounds like something jacked up with s3
[2014-03-20 17:15:27 -0400] rdobbs: like it's round robining between a good version and a bad version
[2014-03-20 17:16:50 -0400] rdobbs: and now it's failing on another template
[2014-03-20 17:16:51 -0400] rdobbs: what the fuck
[2014-03-20 17:17:01 -0400] anthroprose: rdobbs: days like this are free days
[2014-03-20 17:17:24 -0400] rdobbs: no, days like this are getting fired days because I'm now 4 days into debugging this shit that I no longer think is my fault.
[2014-03-20 17:17:29 -0400] rdobbs: except, it's my fault for choosing chef.
[2014-03-20 17:17:32 -0400] anthroprose: my last place we were SOOOO heavy AWS/Chef doing crazy stuff with beta products
[2014-03-20 17:17:37 -0400] anthroprose: things like this would happen
[2014-03-20 17:17:44 -0400] anthroprose: we just git up and leave, go have a beer
[2014-03-20 17:17:51 -0400] anthroprose: you cant fight the cloud if you are in bed with it
[2014-03-20 17:17:54 -0400] rdobbs: Chef has taken in what, $100m in funding?
[2014-03-20 17:18:00 -0400] rdobbs: I'm paying for it. It should fucking work.
[2014-03-20 17:18:09 -0400] anthroprose: I agree
[2014-03-20 17:18:09 -0400] rdobbs: this isn't a social network, it's a crucial part of my infrastructure.
[2014-03-20 17:18:14 -0400] anthroprose: read the contract tho ;)
[2014-03-20 17:18:18 -0400] rdobbs: I'm glad adam jacobs is going to be a billionaire
[2014-03-20 17:18:22 -0400] rdobbs: now if only his shit worked
[2014-03-20 17:19:15 -0400] anthroprose: its SaaS on top of PaaS
[2014-03-20 17:19:25 -0400] rdobbs: Then they can build a real infrastructure.
[2014-03-20 17:19:32 -0400] anthroprose: and actually SaaS on top of SaaS on top of PaaS
[2014-03-20 17:19:45 -0400] anthroprose: rdobbs: which is what big shops do yeah
[2014-03-20 17:20:22 -0400] anthroprose: so fyi.... the AMIs I gen
[2014-03-20 17:20:25 -0400] rdobbs: I feel like when chef took in their 3rd round of funding they stopped caring about their customers and only started focusing on monetization. that was when the cookbooks really started lagging and things started breaking
[2014-03-20 17:20:36 -0400] anthroprose: have chef installed/run/etc... and chkconfig'd off
[2014-03-20 17:20:41 -0400] anthroprose: so if chef quits working
[2014-03-20 17:20:50 -0400] anthroprose: I can quick edit my userdata to run the services
[2014-03-20 17:21:02 -0400] anthroprose: so I get *SOME* functionality out of things in failure modes
[2014-03-20 17:21:14 -0400] rdobbs: yeah, I rolled out 6 amis this morning that I configured manually because my team can't wait on me doing things the right way anymore
[2014-03-20 17:21:30 -0400] anthroprose: so yeah, def chef-solo for that stuff
[2014-03-20 17:21:32 -0400] rdobbs: and my boss wants me to scrap chef for the next 6 months :(
[2014-03-20 17:21:36 -0400] anthroprose: also, packer like a mofo
[2014-03-20 17:21:38 -0400] rdobbs: which means permanently
[2014-03-20 17:21:43 -0400] rdobbs: packer?
[2014-03-20 17:21:44 -0400] anthroprose: your boss will shoot the dept
[2014-03-20 17:21:58 -0400] anthroprose: http://www.packer.io/
[2014-03-20 17:21:59 -0400] rdobbs: this is wo weird
[2014-03-20 17:22:05 -0400] anthroprose: use it to generate your images
[2014-03-20 17:22:08 -0400] rdobbs: 4 hours ago these cookbooks worked
[2014-03-20 17:22:16 -0400] rdobbs: now every single template is complaining about not being able to find cookbook none
[2014-03-20 17:22:22 -0400] anthroprose: so that if you have dependency issues, or third party anythings
[2014-03-20 17:22:27 -0400] anthroprose: the devs dont notice
[2014-03-20 17:22:35 -0400] anthroprose: production still works(ish)
[2014-03-20 17:22:39 -0400] werdnativ: hmm. it seems like chef-zero search should find the node I'm testing with search(:nodes, 'role:db'), it does add the role on the run list in /tmp/kitchen/nodes/precise-default.json
[2014-03-20 17:23:06 -0400] rdobbs: no cookbook version changes, no recipe changes, no attribute changes, no data bag changes
[2014-03-20 17:23:20 -0400] rdobbs: I've tried my last 20 versions of my primary cookbook, all of which worked
[2014-03-20 17:23:31 -0400] rdobbs: they're all failing to find the local cookbook when applying templates
[2014-03-20 17:23:43 -0400] rdobbs: even if I specify cookbook name in the templates that aren't generated by providers
[2014-03-20 17:24:01 -0400] rdobbs: my boss will shoot me, and I am the devops department
[2014-03-20 17:24:15 -0400] anthroprose: welcome to devops :)
[2014-03-20 17:24:34 -0400] anthroprose: i made my current employer remove it from my title
[2014-03-20 17:24:46 -0400] prometheanfire: I seem to be getting more of these recently :( Errno::ECONNRESET: Connection reset by peer - SSL_connect
[2014-03-20 17:25:01 -0400] prometheanfire: happens when trying to download the cookbooks from opscode
[2014-03-20 17:25:26 -0400] rdobbs: if I removed it, then I'd get shuffled into a group where I'm oncall, unfortunately
[2014-03-20 17:25:32 -0400] anthroprose: heh
[2014-03-20 17:25:34 -0400] anthroprose: I'm 24/7
[2014-03-20 17:25:41 -0400] rdobbs: I'm too old for that
[2014-03-20 17:25:44 -0400] anthroprose: so am I
[2014-03-20 17:25:45 -0400] werdnativ: prometheanfire: I've seen that before... something something ssl certs on your workstation...
[2014-03-20 17:25:48 -0400] rdobbs: I haven't been on call in 5 years
[2014-03-20 17:25:52 -0400] anthroprose: write better automation :)
[2014-03-20 17:25:56 -0400] rdobbs: i'd kill someone if I were
[2014-03-20 17:26:05 -0400] prometheanfire: werdnativ: it's not that :P
[2014-03-20 17:26:08 -0400] anthroprose: i find myself wanting to frequently
[2014-03-20 17:26:14 -0400] anthroprose: luckily, the devs can push to prod
[2014-03-20 17:26:15 -0400] prometheanfire: werdnativ: some cookbooks download then it times out
[2014-03-20 17:26:18 -0400] anthroprose: and unless its an AWS issue
[2014-03-20 17:26:22 -0400] anthroprose: I dont hear a peep
[2014-03-20 17:26:24 -0400] prometheanfire: I am thinking aws as well
[2014-03-20 17:26:49 -0400] rdobbs: this has to be chef's fault.
[2014-03-20 17:27:03 -0400] rdobbs: there's nothing to explain this. fuck.an hour ago only one template was being looked for in the "none" cookbook
[2014-03-20 17:27:06 -0400] rdobbs: now they all are
[2014-03-20 17:28:20 -0400] anthroprose: rdobbs: run things with chefzero real quick
[2014-03-20 17:30:04 -0400] werdnativ: If anyone has clues how to get search in kitchen + chef-zero working: https://gist.github.com/avit/e5f2db3a2241fdae2411
[2014-03-20 17:30:54 -0400] dgarstang: *sigh* why does test kitchen try and use the public IP?
[2014-03-20 17:31:14 -0400] rdobbs: does chefzero work with berksfile at all?
[2014-03-20 17:31:17 -0400] rdobbs: err with berkshelf
[2014-03-20 17:31:24 -0400] rdobbs: or am I going to have to copy everything to another directory to use knife?
[2014-03-20 17:31:38 -0400] anthroprose: rdobbs: using test-kitchen it will drive berkshelf
[2014-03-20 17:31:45 -0400] anthroprose: 1 sec, I will give you a quick hack
[2014-03-20 17:31:50 -0400] anthroprose: dont use this perm
[2014-03-20 17:32:58 -0400] werdnativ: rdobbs: it does.
[2014-03-20 17:33:41 -0400] rdobbs: reading docs now
[2014-03-20 17:33:46 -0400] allgoodAtTaoti: hi all terribbly new to chef so excuse the seemingly simple question but https://gist.github.com/anonymous/9669336
[2014-03-20 17:33:54 -0400] allgoodAtTaoti: am I using run_list incorrectly
[2014-03-20 17:34:02 -0400] rdobbs: for such a simple thing, deploying a rails app, Chef is costing my company thousands of dollars in wasted man hours
[2014-03-20 17:34:18 -0400] allgoodAtTaoti: keeps on yelling about syntax errors on 5
[2014-03-20 17:34:22 -0400] allgoodAtTaoti: but i have no idea what is wrong
[2014-03-20 17:34:31 -0400] allgoodAtTaoti: it looks correct according to what i know of ruby
[2014-03-20 17:34:57 -0400] anthroprose: rdobbs: usually in that case I go lowest common denom and then refactor
[2014-03-20 17:34:58 -0400] jtimberman: rdobbs: Hi there! I'm sorry. We're looking into the connectivity issues being reported.
[2014-03-20 17:35:12 -0400] anthroprose: jtimberman: everyone's going crazy
[2014-03-20 17:35:19 -0400] rdobbs: @jtimberman: it's not a connectivity issue here, it's chef zerver doing something hella weird and randomly changing shit
[2014-03-20 17:35:21 -0400] werdnativ: allgoodAtTaoti: syntax looks right.
[2014-03-20 17:35:33 -0400] rdobbs: like 2 hours ago only 1/2 of my templates were broken and inexplicably looking for a cookbook named "none"
[2014-03-20 17:35:37 -0400] rdobbs: now they all are. with zero changes
[2014-03-20 17:36:01 -0400] rdobbs: at one point it was applying a 4 day old cookbook, now it's applying the right one, and still broken.
[2014-03-20 17:36:27 -0400] jtimberman: rdobbs: What is your Chef Server? Open Source, Hosted Enterprise Chef, Enterprise Chef?
[2014-03-20 17:36:34 -0400] rdobbs: hosted
[2014-03-20 17:36:40 -0400] allgoodAtTaoti: werdnativ, i've added a comment with my error message, do you ahve any clue (don't worry I'll stop bugging after this haha, have a client in 20)
[2014-03-20 17:36:53 -0400] yatesy: many of us have been experiencing issues all afternoon (UK time) with hosted chef
[2014-03-20 17:37:07 -0400] rdobbs: aren't you guys an entire company full of sysadmins?
[2014-03-20 17:37:22 -0400] werdnativ: allgoodAtTaoti: ah, sorry I missed the error, you should use "run_list" =>
[2014-03-20 17:37:32 -0400] allgoodAtTaoti: http://stackoverflow.com/questions/1777245/expecting-tassoc-in-a-rails-file
[2014-03-20 17:37:33 -0400] allgoodAtTaoti: yup
[2014-03-20 17:37:35 -0400] allgoodAtTaoti: silly me
[2014-03-20 17:37:39 -0400] allgoodAtTaoti: thanks for the second set of eyes
[2014-03-20 17:37:40 -0400] werdnativ: allgoodAtTaoti: or a symbol without quotes: run_list:
[2014-03-20 17:38:38 -0400] nkts: and why chef uses https connection: close while synchronizing cookbooks?
[2014-03-20 17:38:52 -0400] nkts: why not to use keepalive?
[2014-03-20 17:41:45 -0400] rdobbs: I'm starting to feel like chef is only useful for setting up base system stuff, and the right way to do it is manual configuration of applications rolled into amis
[2014-03-20 17:42:03 -0400] rdobbs: manually I can setup a rails environment in 15 minutes
[2014-03-20 17:42:19 -0400] rdobbs: using chef it's like 200 man hours of debugging broken cookbooks. devops snake oil.
[2014-03-20 17:42:39 -0400] someara: its often quicker to write your own cookbooks
[2014-03-20 17:42:39 -0400] anthroprose: rdobbs: chef has never billed itself as service orchestration
[2014-03-20 17:42:40 -0400] jidar: the good news is, it's only 200 hours of your time
[2014-03-20 17:42:57 -0400] anthroprose: rdobbs: so take that 15mins and turn it into a monolithic bash block
[2014-03-20 17:43:04 -0400] anthroprose: get it running
[2014-03-20 17:43:07 -0400] anthroprose: then make it better
[2014-03-20 17:43:09 -0400] werdnativ: anthroprose: what's better for orchestration?
[2014-03-20 17:43:19 -0400] anthroprose: werdnativ: for me, nothing yet
[2014-03-20 17:43:21 -0400] someara: https://speakerdeck.com/someara/configuration-management-101-at-scale12x
[2014-03-20 17:43:26 -0400] rdobbs: I'm not doing service orchestration really. I'm creating configuration files and starting unicorn and nginx.
[2014-03-20 17:43:28 -0400] anthroprose: I do stupid things with chef attributes
[2014-03-20 17:43:50 -0400] anthroprose: but apparently I'm getting close to etcD territory
[2014-03-20 17:43:58 -0400] rdobbs: not querying apis, pulling in anything from data bags. mostly I made the wrong mistake of using the worthless application cookbooks, which I'm undoing today
[2014-03-20 17:43:59 -0400] failshell: having used cfengine and puppet in the past along with a crazy amount of shell scripts, chef rocks
[2014-03-20 17:44:08 -0400] rdobbs: after I've manually configured all my applications.
[2014-03-20 17:44:20 -0400] robawt: someara: awesome talk
[2014-03-20 17:44:21 -0400] rdobbs: http://fuckingshellscripts.org/
[2014-03-20 17:44:22 -0400] anthroprose: @someara: can I use the word fucking in my talk title?
[2014-03-20 17:44:28 -0400] robawt: i especially loved the "drop the mic" exit :)
[2014-03-20 17:44:40 -0400] someara: thanks =)
[2014-03-20 17:45:42 -0400] werdnativ: the community cookbooks set people down the wrong path unfortunately. Misleading as a "simple" solution.
[2014-03-20 17:45:50 -0400] werdnativ: * some of
[2014-03-20 17:46:46 -0400] jtimberman: rdobbs: those symptoms sound like something chef should most definitely not be doing (arbitrarily changing cookbook name to 'none'). can you open a support request and include your organization name (you can email support@getchef.com to open a request).
[2014-03-20 17:48:09 -0400] Nielsen: nkts: Just tried again and it all seems to be working
[2014-03-20 17:48:18 -0400] anthroprose: someara: thats much of what I currently do, thanks for the link.... and good to know I'm not horribly off base on some things
[2014-03-20 17:48:36 -0400] Nielsen: nkts: IP was s3-external-1.amazonaws.com (176.32.101.147)
[2014-03-20 17:49:01 -0400] a13x212: as a newer chef user, i see where rdobbs is coming from, the learning curve is still high in my opinion
[2014-03-20 17:49:34 -0400] rdobbs: jtimberman: will do it after lunch. as it is I just created a none cookbook and made cloning my regular cookbook into it so my resoiurces can apply.
[2014-03-20 17:49:37 -0400] rdobbs: =~(
[2014-03-20 17:49:56 -0400] redondos: hello. I need to change some nodes' chef_server_url in client.rb. I was thinking of using knife ssh + sed, but is there a better way?
[2014-03-20 17:50:22 -0400] jtimberman: That sucks. Hopefully support folks will be able to get that sorted out w/ you after your lunch.
[2014-03-20 17:50:58 -0400] anthroprose: someara: have anything to expound on the slide re: Conductor/External Actors/Vector Clocks?
[2014-03-20 17:51:44 -0400] dgarstang: can I set the environment for test kitchen?
[2014-03-20 17:51:50 -0400] someara: conductor would be "manipulate with cookbook uploading only"
[2014-03-20 17:52:05 -0400] someara: like if you had a role on each of the servers in an application pool
[2014-03-20 17:52:16 -0400] someara: and bumped a version number in an attribute
[2014-03-20 17:52:28 -0400] someara: which is probably driven by an external actor
[2014-03-20 17:52:29 -0400] someara: so
[2014-03-20 17:52:41 -0400] someara: a process sitting over on a box somewhere driving the change
[2014-03-20 17:52:57 -0400] anthroprose: gotcha, for me thats CloudFormation/AutoScale and rake cmds in testing
[2014-03-20 17:52:58 -0400] someara: ssh-on-a-for-loop, converge box1, converge box2, converge box3
[2014-03-20 17:53:03 -0400] anthroprose: (or chef-metal someday maybe)
[2014-03-20 17:53:09 -0400] werdnativ: dgarstang: I do it in provisioner: client_rb: environment: development
[2014-03-20 17:53:11 -0400] someara: or ansible, pushy, mcollective, whatever
[2014-03-20 17:53:26 -0400] anthroprose: but yeah, run converge on master, then on slave, then on master agaion
[2014-03-20 17:53:32 -0400] someara: and the vector clocks one is "let the application itself handle its own business" like riak or whatever
[2014-03-20 17:53:47 -0400] someara: chuck another node into the network and let it sort itself out
[2014-03-20 17:53:53 -0400] anthroprose: gotcha, like elasticsearch clusters
[2014-03-20 17:53:57 -0400] someara: right
[2014-03-20 17:54:07 -0400] werdnativ: annoyed that chef-zero search won't find my test node by its role...
[2014-03-20 17:54:31 -0400] werdnativ: frustrating dead-end.
[2014-03-20 17:54:48 -0400] anthroprose: someara: many thanks, I have years of experience, but all trenches..... sometimes the terminology escapes me
[2014-03-20 17:54:54 -0400] coredump: anthroprose: do you know if meez has a config file or do I need to always pass settings via command line
[2014-03-20 17:55:04 -0400] someara: the point of that section is that "orchestration" is going to be a unique solution to your infrastructure, by definition
[2014-03-20 17:55:11 -0400] anthroprose: coredump: I only use it to generate at first
[2014-03-20 17:55:31 -0400] someara: who wrote meez? I gemsquatted "mise" with the intention of writing the exact same thing
[2014-03-20 17:55:39 -0400] someara: I can come off it
[2014-03-20 17:55:41 -0400] anthroprose: someara: yeah, but I think there are a few base patterns that can be included in the current framework
[2014-03-20 17:55:47 -0400] anthroprose: someara: paulzcar
[2014-03-20 17:55:48 -0400] dgarstang: werdnativ: That's not even documented at https://github.com/test-kitchen/test-kitchen
[2014-03-20 17:56:32 -0400] werdnativ: dgarstang: I think it changed recently, it's in a ticket
[2014-03-20 17:56:52 -0400] rdobbs: hopefully. as it is I just finished rolling out my manual amis, and I'm going to go kick the punching bag at the Y for my lunch hour.
[2014-03-20 17:57:00 -0400] werdnativ: dgarstang: https://github.com/test-kitchen/test-kitchen/issues/199
[2014-03-20 17:57:03 -0400] anthroprose: someara: like now I leverage idempotency + convergence and an external actor with multiple chef runs
[2014-03-20 17:57:06 -0400] someara: anthroprose I suspect that some common orchestration patterns will emerge once pushjobs is widely used
[2014-03-20 17:57:16 -0400] anthroprose: yeah, I just learned about pushy
[2014-03-20 17:57:17 -0400] someara: much like reusable cookbook patterns are starting to emerge
[2014-03-20 17:57:46 -0400] someara: yea the external actor is pretty much the only sane way to do it right now
[2014-03-20 17:57:58 -0400] dgarstang: werdnativ: i have no idea what to do with that. :-\
[2014-03-20 17:58:40 -0400] someara: I was going to implement a LB pool connection drainer walk through thing with vector clocks and node attributes
[2014-03-20 17:58:46 -0400] someara: but then I realized I have actual work to do
[2014-03-20 17:58:52 -0400] rdobbs: even weirder, some of my nodes are now trying to apply cookbooks not in their runlist
[2014-03-20 17:59:00 -0400] rdobbs: I'm writing all of this off to solar flares.
[2014-03-20 17:59:08 -0400] anthroprose: coredump: meez ./chef-cookbook -C anthroprose -l GPLv2 -m acorley@anthroprose.com
[2014-03-20 17:59:20 -0400] werdnativ: dgarstang: information for setting the environment is at the bottom of that ticket.
[2014-03-20 17:59:24 -0400] anthroprose: someara: I would have use for that
[2014-03-20 17:59:25 -0400] rdobbs: kind of fun watching 950 nodes all start sending redlines to graphite
[2014-03-20 17:59:36 -0400] dgarstang: werdnativ: does that means it's current? it has been implemented? has not? what version?
[2014-03-20 17:59:38 -0400] anthroprose: ive got a huge queue worker setup to drink form firehose
[2014-03-20 18:00:11 -0400] anthroprose: rdobbs: do you alert from graphite?
[2014-03-20 18:00:22 -0400] werdnativ: dgarstang: I'm running Test Kitchen version 1.2.1 and it works there. Not sure when it was added.
[2014-03-20 18:00:52 -0400] dgarstang: werdnativ: I got 1.2.1. I'll give it a try
[2014-03-20 18:01:17 -0400] werdnativ: dgarstang: https://github.com/test-kitchen/test-kitchen/blob/master/CHANGELOG.md#120--2014-02-11
[2014-03-20 18:03:45 -0400] rdobbs: aanthroprose: oh god no, our infrastructure is way too big for alerting
[2014-03-20 18:04:09 -0400] rdobbs: these are all ephemeral instances that boot up, rin chef-client, process a big chunk of data, then shut down
[2014-03-20 18:04:24 -0400] anthroprose: WHA?
[2014-03-20 18:04:31 -0400] dgarstang: ^ heaven
[2014-03-20 18:04:32 -0400] anthroprose: what about chef-client failures
[2014-03-20 18:04:36 -0400] anthroprose: EBS issues
[2014-03-20 18:04:39 -0400] rdobbs: hence those 950 red lines
[2014-03-20 18:04:43 -0400] anthroprose: instance-launch failures
[2014-03-20 18:04:49 -0400] rdobbs: I like my job too frequently for EBS
[2014-03-20 18:05:00 -0400] rdobbs: a failed instance launch doesn't matter because it never boots up and checks sqs
[2014-03-20 18:05:14 -0400] anthroprose: but it could be systemic
[2014-03-20 18:05:26 -0400] anthroprose: ive had my entire worker cluster no boot once
[2014-03-20 18:05:50 -0400] rdobbs: I have a bunch of logic that sort of tries to turn my infrastructure into a von neumman machine, calculates the number of instances to process our 10tb data sets in one hour, then keeps a tally on the number of processing nodes running
[2014-03-20 18:06:28 -0400] anthroprose: ah ok
[2014-03-20 18:06:31 -0400] werdnativ: I assume kitchen works with chef-zero already without this? http://jtimberman.housepub.org/blog/2013/10/10/preview-chef-client-local-mode/
[2014-03-20 18:06:38 -0400] rdobbs: oh, the team that relies on the data stares at graphite all day
[2014-03-20 18:07:03 -0400] rdobbs: it's atually fun.  we got backed up by 10 days last week, ended up having to process 500tb of data in a rush, spun up 8k instances
[2014-03-20 18:07:15 -0400] anthroprose: rdobbs: https://github.com/scobal/seyren and http://cabotapp.com/
[2014-03-20 18:07:27 -0400] anthroprose: rdobbs: yeah, I have a firehose too.... never stops
[2014-03-20 18:07:31 -0400] rdobbs: but we generally get 60% off all ec2 hours thanks to a deal I negotiated with amazon, so it's pretty cheap.
[2014-03-20 18:07:38 -0400] anthroprose: blips cause lots of running to drain the queue
[2014-03-20 18:07:59 -0400] anthroprose: 'deal' as in reserved instances or spot instances
[2014-03-20 18:08:05 -0400] anthroprose: or you blew your account rep?
[2014-03-20 18:08:12 -0400] doomviking: gnarly
[2014-03-20 18:08:47 -0400] rdobbs: hah. at any given time our overall company has something like 75k instances on amazon, and we have about 3 petabytes of data in s3, we have negotiating power.
[2014-03-20 18:08:55 -0400] anthroprose: nice
[2014-03-20 18:08:59 -0400] anthroprose: enterprise support?
[2014-03-20 18:09:01 -0400] dcparker: so - having a weird issue. When running knife cookbook upload, some cookbooks work fine, others give me a weird You authenticated successfully to chef as esv-ci but you are not authorized for this action.
[2014-03-20 18:09:06 -0400] mondo: I'm trying to update chef-server and I get: Cannot install package chef-server-11.0.11-1.el6.x86_64. It is obsoleted by installed package chef-server-11.0.8-1.el6.x86_64
[2014-03-20 18:09:13 -0400] dcparker: then above that it says The request signature we calculated does not match the signature you provided. Check your key and signing method.
[2014-03-20 18:09:19 -0400] rdobbs: we do, but we haven't actually had to use it in the past year so I'm not even sure who I would talk to for it
[2014-03-20 18:09:23 -0400] mondo: Think it's safe to just do --nodeps ?
[2014-03-20 18:09:27 -0400] dcparker: what could cause a signature mismatch that varies from cb to cb?
[2014-03-20 18:09:39 -0400] rdobbs: if I wouldn't go to jail for it, I'd consider reselling instances at 25% discounts :)
[2014-03-20 18:09:58 -0400] anthroprose: rdobbs: just fyi I would give you arch comparisons for price/whatever projections just for fun
[2014-03-20 18:10:02 -0400] rdobbs: as it is, I have to go through 2 proxies to make sure this irc connection isn't being sniffed by my higher powers
[2014-03-20 18:10:39 -0400] rdobbs: anthroprose: that would be fun, I'd need to figure out how to get acess to our pricing though. that's a project for next month,  calculating oour costs so when negotiations come up at the end of the year we can push for better pricing.
[2014-03-20 18:10:50 -0400] rdobbs: since we expect to double the size of our aws presence by 2015
[2014-03-20 18:11:03 -0400] anthroprose: I work with a phd stats guy who um.... does lots of crunching to calculate whether to place buys on sports books
[2014-03-20 18:11:22 -0400] anthroprose: he is giving me lots of throughput, but not ## for instances
[2014-03-20 18:11:41 -0400] rdobbs: interesting.
[2014-03-20 18:11:42 -0400] anthroprose: rdobbs: yeah, I mostly mean just here is what we are doing, can you do it cheaper?
[2014-03-20 18:12:10 -0400] anthroprose: rdobbs: https://github.com/Jumpshot/operations/blob/master/cloudformation/netflix_ice.json
[2014-03-20 18:12:19 -0400] rdobbs: I worked for a sports betting company in costa rica, but sort of fled back to the US when the feds started arresting my coworkers on RICO charges
[2014-03-20 18:12:22 -0400] anthroprose: its a hack, the process runs as root, I'm not proud of that
[2014-03-20 18:12:32 -0400] anthroprose: but its uber simple to deploy
[2014-03-20 18:12:37 -0400] anthroprose: and immediately stands up
[2014-03-20 18:12:49 -0400] anthroprose: rdobbs: I just do his AWS arch
[2014-03-20 18:12:55 -0400] rdobbs: ahh
[2014-03-20 18:12:56 -0400] anthroprose: but I did write a buncha R code for him
[2014-03-20 18:13:04 -0400] anthroprose: SOAP & Websockets <puke>
[2014-03-20 18:13:10 -0400] anthroprose: he only knows algos
[2014-03-20 18:13:26 -0400] rdobbs: your brain is bigger than mine then. Stats & R I suck at, and I bribe our data scientists with good scotch to do that part of my job for me ;)
[2014-03-20 18:13:34 -0400] anthroprose: not at all
[2014-03-20 18:13:40 -0400] anthroprose: I write R like I write Bash
[2014-03-20 18:13:52 -0400] anthroprose: not functional, and I don't understand math
[2014-03-20 18:13:56 -0400] rdobbs: ooh. my chef-client in the while loop just started applying cleanly. solar flare over?
[2014-03-20 18:14:02 -0400] rdobbs: Ahhh
[2014-03-20 18:14:16 -0400] anthroprose: but if you pair me with a data scientist
[2014-03-20 18:14:22 -0400] anthroprose: we could take over the world... or something
[2014-03-20 18:14:28 -0400] anthroprose: cause I do robots & other stuff too
[2014-03-20 18:14:54 -0400] rdobbs: if I culd come up with a good thing to arbitrage, and convince 3 of my data scientists to spend a week with me in a cabin coding, I could probably retire in 2 years.
[2014-03-20 18:15:14 -0400] anthroprose: yup
[2014-03-20 18:15:15 -0400] rdobbs: but I could go to jail for that too. working for big companies that are encumbered by DHS contracts .. is less than optimal
[2014-03-20 18:15:21 -0400] anthroprose: I have ethical issues with arbitrage
[2014-03-20 18:15:33 -0400] rdobbs: I don't. if I could steal money from bankers, I'd do it.
[2014-03-20 18:15:33 -0400] anthroprose: it makes me loose some of the little sleep I can even get
[2014-03-20 18:15:50 -0400] anthroprose: but who do the bankers steal it from?
[2014-03-20 18:15:54 -0400] anthroprose: my parents
[2014-03-20 18:16:08 -0400] rdobbs: they're going to steal it anyways
[2014-03-20 18:16:12 -0400] rdobbs: at least I can be a robin hood
[2014-03-20 18:16:28 -0400] anthroprose: in a utilitarian view yeah
[2014-03-20 18:16:44 -0400] anthroprose: im trying to do that by teaching anyone i possibly can to code/automate
[2014-03-20 18:16:59 -0400] rdobbs: apparently the way short sales work, and stock in general, most stocks are oversold by like 300% .. so if there ar a million shares out there of a company, stock companies have magically created another 2million, for the lulz
[2014-03-20 18:17:04 -0400] anthroprose: so that at least the people producing the systems are cultural agreeable and may eventually change things
[2014-03-20 18:17:05 -0400] rdobbs: apparently the way short sales work, and stock in general, most stocks are oversold by like 300% .. so if there ar a million shares out there of a company, stock companies have magically created another 2million, for the lulz
[2014-03-20 18:17:21 -0400] pravinmishra: Getting error: Error executing action `deploy` on resource 'deploy_revision[rails-demo]'
[2014-03-20 18:17:31 -0400] anthroprose: rdobbs: yeah, I also refuse to participate in any leveraged financial instrument
[2014-03-20 18:17:34 -0400] pravinmishra: NoMethodError
[2014-03-20 18:17:34 -0400] pravinmishra: -------------
[2014-03-20 18:17:35 -0400] pravinmishra: undefined method `application' for Chef::Resource::DeployRevision
[2014-03-20 18:17:36 -0400] anthroprose: my brain cannot understand them
[2014-03-20 18:17:40 -0400] rdobbs: pravinmishra: your life will be happier if you don't use the deploy resource.
[2014-03-20 18:17:57 -0400] rdobbs: anthroprose: likewise. I don't have a brain for finance.
[2014-03-20 18:18:32 -0400] anthroprose: rdobbs: thats why im working with the stats guy.... I'm like... hey, if we can make a box that just spits out money
[2014-03-20 18:18:34 -0400] anthroprose: I'm game
[2014-03-20 18:18:35 -0400] pravinmishra: rdobbs: i am not using deploy resource, It's from 'application'
[2014-03-20 18:18:35 -0400] rdobbs: pravinmishra: or the application cookbooks. no matter how much work you put into debugging them, you're at the whim of a series of ueber complex cookbooks whose pull request turn-around times average about a year.
[2014-03-20 18:18:56 -0400] rdobbs: the application cookbook is pretty much unusable
[2014-03-20 18:19:00 -0400] doomviking: I looked at it once. once.
[2014-03-20 18:19:03 -0400] rdobbs: especially if you're using unicorn. passenger seems to apply cleaner.
[2014-03-20 18:19:50 -0400] anthroprose: the application cookbooks are being discussed as being re-written but i wouldnt hold your breath
[2014-03-20 18:20:01 -0400] anthroprose: it would be much better to simply have this chat write a new one
[2014-03-20 18:20:04 -0400] redondos: how can i change chef 11's server_name?
[2014-03-20 18:20:08 -0400] rdobbs: pravinmishra: you're better off just using the git resource, then applying your configurations via templates, or even better, just use capistrano to deploy.
[2014-03-20 18:20:16 -0400] redondos: do i need to edit chef-server-running.json ?
[2014-03-20 18:20:19 -0400] anthroprose: I'll take python uwsgi/twisted apps :)
[2014-03-20 18:20:23 -0400] redondos: that seems like a file generated on the fly
[2014-03-20 18:20:43 -0400] rdobbs: anthroprose: there you go. shit. that's a great idea. are there any good collaborative pair-programming tools where ea handful of us cwho happen to be bitching about the same problem could easily bang our heads together?
[2014-03-20 18:20:54 -0400] anthroprose: you mean, github?
[2014-03-20 18:21:00 -0400] anthroprose: +hangouts?
[2014-03-20 18:21:13 -0400] rdobbs: hangouts?
[2014-03-20 18:21:25 -0400] anthroprose: google hangouts, screen/video/chat
[2014-03-20 18:21:29 -0400] anthroprose: cross platform
[2014-03-20 18:21:30 -0400] rdobbs: ah I see.
[2014-03-20 18:21:34 -0400] rdobbs: not a bad idea at all.
[2014-03-20 18:21:41 -0400] pravinmishra: rdobbs: I am pretty new to Chef, just learning using this series https://www.youtube.com/playlist?list=PLKK5zTDXqzFM53J6-rikDrqbbY0Pu-9SP
[2014-03-20 18:21:45 -0400] anthroprose: opscode does their codereviews that way
[2014-03-20 18:21:57 -0400] anthroprose: and my team uses github+hipchat
[2014-03-20 18:22:06 -0400] anthroprose: with occasional hangout
[2014-03-20 18:22:12 -0400] anthroprose: I leave my home like once a week
[2014-03-20 18:22:20 -0400] anthroprose: well, property, not home
[2014-03-20 18:22:37 -0400] rdobbs: pravinmishra: understood. those are all 2 years old though, and most of chef's quickstart stuff no longer works
[2014-03-20 18:22:51 -0400] rdobbs: especially around the application cookbooks. you'll bang your head on this for weeks.
[2014-03-20 18:22:56 -0400] pravinmishra: Ohhhh
[2014-03-20 18:23:46 -0400] pravinmishra: rdobbs: Could you please suggest me any latest tutorial?
[2014-03-20 18:23:57 -0400] pravinmishra: It was looking pretty good so far :)
[2014-03-20 18:24:01 -0400] anthroprose: pravin: what are you wanting to do?
[2014-03-20 18:24:04 -0400] JasonG: I've been trying like crazy to get our team to adopt Hipchat but we still send tons of email. So frustrating. And we're do pairing, which some find hard to do remotely. Which is why I have to be at the office so damn much.
[2014-03-20 18:24:21 -0400] anthroprose: JasonG: its largely cultural
[2014-03-20 18:24:22 -0400] rdobbs: pravinmishra: I don't know of any good ones really. The base stuff probably works, but at this point anything around the application* cookbooks just won't work
[2014-03-20 18:24:25 -0400] pravinmishra: Just trying to understand chef, write first cookbook
[2014-03-20 18:24:31 -0400] anthroprose: you gotta have a virtual meeting cheerleader
[2014-03-20 18:24:41 -0400] mattsurabian: pravinmishra: I'd suggest doing the test kitchen quick start
[2014-03-20 18:24:46 -0400] anthroprose: and if you are the remote one, maybe champion it yourself
[2014-03-20 18:24:50 -0400] mattsurabian: you'll write a cookbook and learning testing at the same time
[2014-03-20 18:25:07 -0400] JasonG: anthroprose: 100% correct. I am our cheerleader, but damn everyone loves the 27" iMac with 27" external display pairing stations
[2014-03-20 18:25:07 -0400] anthroprose: act excited about it and make a point to help others during the conf
[2014-03-20 18:25:32 -0400] anthroprose: I've got dual 29" wides at work
[2014-03-20 18:25:38 -0400] anthroprose: dunno why they even bought them for me
[2014-03-20 18:25:51 -0400] Guest48343: so I am having an issue learning chef.  When I type vagrant up, i get an error that there is no metadata.rb in the chef-repo root directory. "Berkshelf::BerksfileReadError: An error occurred while reading the Berksfile:" "Could not open or read: '~/chef-repo/metadata.rb'"
[2014-03-20 18:25:55 -0400] Guest48343: any ideas
[2014-03-20 18:26:19 -0400] mattsurabian: pravinmishra: http://kitchen.ci/docs/getting-started/
[2014-03-20 18:26:21 -0400] anthroprose: JasonG: my last manager was a remote manager, so I learned alot about remote team building from all of that
[2014-03-20 18:26:23 -0400] Guest48343: I have metadata.rb in the cookbooks
[2014-03-20 18:26:32 -0400] rdobbs: http://status.opscode.com
[2014-03-20 18:26:35 -0400] rdobbs: could really use an update today
[2014-03-20 18:26:40 -0400] rdobbs: with shit breaking .. just saying.
[2014-03-20 18:26:46 -0400] rdobbs: would be nice to show something official to my boss
[2014-03-20 18:27:10 -0400] pravinmishra: mattsurabian: thanks a lot
[2014-03-20 18:27:35 -0400] pravinmishra: looks enough good to start :)
[2014-03-20 18:27:49 -0400] mattsurabian: yeah it's a good start and gives you a solid workflow
[2014-03-20 18:28:24 -0400] anthroprose: rdobbs: with what you describe as your workflow, I would really consider just baking AMIs with chef and using those in your ASGs
[2014-03-20 18:28:43 -0400] anthroprose: thats what I do, and *then* run chef to catch any updates since the last AMI bake
[2014-03-20 18:29:13 -0400] anthroprose: I would argue for that even just to not have to constantly cleanup chefserver
[2014-03-20 18:29:18 -0400] mattsurabian: pravinmishra: Only thing I'd change about it, when you get to this step: http://kitchen.ci/docs/getting-started/creating-cookbook
[2014-03-20 18:29:25 -0400] anthroprose: cause the 'nodes' actually dont mean anything in your case
[2014-03-20 18:29:44 -0400] mattsurabian: I'd use chef_zero instead of chef_solo
[2014-03-20 18:29:47 -0400] rdobbs: anthroprose: Perhaps. I'm not quite sure I trust chef anymore. can't afford to get fired and my bosses don't quite understand how long the turn-around time for even basic tasks with Chef can be, when your workload doesn't give you the time to write everything from scratch.
[2014-03-20 18:29:48 -0400] mattsurabian: but it doesn't really matter
[2014-03-20 18:30:00 -0400] rdobbs: well that's only one part of my infrastructure, I support another 35 applications.
[2014-03-20 18:30:09 -0400] anthroprose: yeah
[2014-03-20 18:30:11 -0400] Guest48343: any ideas on this issue?
[2014-03-20 18:30:14 -0400] Guest48343: I am having an issue learning chef.  When I type vagrant up, i get an error that there is no metadata.rb in the chef-repo root directory. "Berkshelf::BerksfileReadError: An error occurred while reading the Berksfile:" "Could not open or read: '~/chef-repo/metadata.rb'"
[2014-03-20 18:30:15 -0400] anthroprose: you gotta have a tool to scale
[2014-03-20 18:30:20 -0400] anthroprose: so if not chef, what?
[2014-03-20 18:30:25 -0400] rdobbs: but as it is I am switching towards baking amis until I get another couple of bodies
[2014-03-20 18:30:38 -0400] rdobbs: perhaps http://fuckingshellscripts.org
[2014-03-20 18:30:39 -0400] mattsurabian: anthroprose: "fucking bash scripts" :-p
[2014-03-20 18:30:44 -0400] anthroprose: hehe
[2014-03-20 18:30:49 -0400] mattsurabian: that's not a real solution rdobbs
[2014-03-20 18:30:52 -0400] rdobbs: mattsurabian: jinx
[2014-03-20 18:31:13 -0400] rdobbs: chef isn't a real solution if it doesn't work, impacts my infrastructure, destroys my productivity, gets me fired, and throws my family out on the street.
[2014-03-20 18:31:22 -0400] mattsurabian: I don't envy you having to deal with pressure from management chef is a long term investment with a high learning curve
[2014-03-20 18:31:23 -0400] anthroprose: rdobbs: but thats not chef
[2014-03-20 18:31:30 -0400] anthroprose: its how you are trying to use it
[2014-03-20 18:31:44 -0400] mattsurabian: but it's worth it if you can make to to the other side
[2014-03-20 18:31:49 -0400] mattsurabian: and very powerful
[2014-03-20 18:31:50 -0400] rdobbs: you're right. it's chef's inability or disinterest in making sure the community cookbook ecosystem is functional
[2014-03-20 18:31:58 -0400] anthroprose: if you dont get a tool in place, you will forever be stuck by doing things by hand
[2014-03-20 18:32:01 -0400] JasonG: Guest48343: for some reason I think that's a but from an old version of Berkshelf, what version are you using?
[2014-03-20 18:32:09 -0400] rdobbs: about 30 of my applications are static enough, and change infrequently enough that manual configuration isn't so bad
[2014-03-20 18:32:15 -0400] JasonG: s/but/bug
[2014-03-20 18:32:24 -0400] rdobbs: 4 of them are really complex and chef makes sense for them
[2014-03-20 18:32:34 -0400] rdobbs: 2 of them, including my big data processing app, I'm rethinking Chef
[2014-03-20 18:32:37 -0400] mattsurabian: rdobbs: The problem with manual configuration is transparency
[2014-03-20 18:32:53 -0400] anthroprose: rdobbs: my first cookbook, was taking a buncha bash scripts, and wrapping them in DSL
[2014-03-20 18:32:54 -0400] rdobbs: transparency? hehe. have you ever read chef's error logs?
[2014-03-20 18:33:02 -0400] anthroprose: then I added not_ifs
[2014-03-20 18:33:05 -0400] rdobbs: anthroprose: so basically, a fucking shell script?
[2014-03-20 18:33:11 -0400] anthroprose: to start yeah
[2014-03-20 18:33:17 -0400] anthroprose: then you break out the parts
[2014-03-20 18:33:18 -0400] mattsurabian: leh sigh
[2014-03-20 18:33:22 -0400] anthroprose: into resources
[2014-03-20 18:33:26 -0400] anthroprose: so you can report on them
[2014-03-20 18:33:38 -0400] rdobbs: we're doing a lot more in python now and some of our devs are moving to fabric
[2014-03-20 18:33:46 -0400] anthroprose: but agile is *NOT* spending 2weeks on 1 problem
[2014-03-20 18:33:56 -0400] anthroprose: pick a smaller incremental step and take it
[2014-03-20 18:33:58 -0400] anthroprose: then another
[2014-03-20 18:34:33 -0400] anthroprose: no-one cares if it works or usually how
[2014-03-20 18:34:34 -0400] rdobbs: I was really idealistic 6 months ago when I started here, after taking a 2 year sabbatical. 2 years ago chef seemed to be more functional because the now big cookbooks weren't nearly as big
[2014-03-20 18:34:47 -0400] anthroprose: but its your life/time/energy ;)
[2014-03-20 18:35:01 -0400] mattsurabian: rdobbs: You might find this interesting? http://www.getchef.com/blog/chefconf-talks/how-chef-enables-the-devops-culture-at-prezi-zsolt-dollenstein/
[2014-03-20 18:35:14 -0400] mattsurabian: talks about their process slowly adopting chef
[2014-03-20 18:35:34 -0400] anthroprose: you can pick 1 resource and deploy chef without affecting anything else
[2014-03-20 18:35:38 -0400] rdobbs: I have a wet dream of having chef, graphite, sensu, logstash, and AWS all working happily in concert, giving me one central toolkit for all of this.
[2014-03-20 18:35:41 -0400] anthroprose: then add another
[2014-03-20 18:35:47 -0400] rdobbs: but I'm realizing to do that I need about 15 developers/sysadmins
[2014-03-20 18:35:53 -0400] rdobbs: and a whole lot of luck
[2014-03-20 18:36:00 -0400] anthroprose: rdobbs: https://github.com/Jumpshot/operations
[2014-03-20 18:36:06 -0400] anthroprose: that has all but Sensu
[2014-03-20 18:36:11 -0400] rdobbs: ooh thanks I'll check both of those links out
[2014-03-20 18:36:16 -0400] anthroprose: my last job was at Zenoss so I am avoiding anything involving 'monitoring'
[2014-03-20 18:36:24 -0400] rdobbs: hah likewise
[2014-03-20 18:36:30 -0400] mattsurabian: rdobbs: You need a runway and time to learn it, yah know. It's possible with a small team, or an individual, but not under the "get it done now" mindset
[2014-03-20 18:36:34 -0400] rdobbs: I only use sensu as a way to parse data streams and send stuff into graphite and logstash
[2014-03-20 18:36:40 -0400] anthroprose: rdobbs: I can also give you any/all AWS infra too
[2014-03-20 18:36:45 -0400] anthroprose: everything I do is open
[2014-03-20 18:36:57 -0400] anthroprose: rdobbs: I use Diamond for that
[2014-03-20 18:37:07 -0400] rdobbs: my last gig I had most of that implemented really well, minus sensu, on about 20 applicatiosn spanning 3k servers and it was great.
[2014-03-20 18:37:10 -0400] anthroprose: https://github.com/BrightcoveOS/Diamond
[2014-03-20 18:37:33 -0400] anthroprose: I wrote a cloudwatch plugin that will send load averages so you can scale on 01 Load Avg
[2014-03-20 18:37:54 -0400] rdobbs: oh interesting. I do that with sensu and collectd in some places.
[2014-03-20 18:38:10 -0400] anthroprose: yeah, I'm attempting to do everything using timeseries
[2014-03-20 18:38:19 -0400] rdobbs: I really like the piping philosophy of sensu && logstash
[2014-03-20 18:38:20 -0400] anthroprose: mostly for entertainment
[2014-03-20 18:38:52 -0400] rdobbs: yay lulz
[2014-03-20 18:38:53 -0400] anthroprose: i am currently re-writing out webworkers to use twisted, and will log directly to redis instead of disk+ship
[2014-03-20 18:39:08 -0400] anthroprose: soo much blocking in this infra it makes me cry
[2014-03-20 18:39:18 -0400] anthroprose: machines at 20% CPU and load of 10
[2014-03-20 18:39:22 -0400] rdobbs: that's one of my next processes, using sqs or redis for a lot of this data
[2014-03-20 18:39:33 -0400] rdobbs: the metrics/logging data, even
[2014-03-20 18:39:39 -0400] anthroprose: SQS is $.5/million
[2014-03-20 18:39:47 -0400] anthroprose: its not price effective for me
[2014-03-20 18:40:02 -0400] anthroprose: I am doing local stats in sqlite and then doing aggregate rollups to statsd/ddb
[2014-03-20 18:40:14 -0400] rdobbs: right now I'm proccessing a constant stream of about  500mbps , and with a new product we're rolling out, that's going to increase quite a bit.
[2014-03-20 18:40:15 -0400] anthroprose: I've got like 5mil stats, some doing 4k/s
[2014-03-20 18:40:23 -0400] rdobbs: luckily we don't actually care about cost
[2014-03-20 18:40:30 -0400] anthroprose: yeah
[2014-03-20 18:40:32 -0400] anthroprose: then use SQS
[2014-03-20 18:40:39 -0400] anthroprose: and dont ever think about your queuing again
[2014-03-20 18:40:45 -0400] rdobbs: I'm allowed to let the spend rate increase by about $150k/month before I need managerial improvement
[2014-03-20 18:40:48 -0400] rdobbs: approval
[2014-03-20 18:41:06 -0400] anthroprose: nice
[2014-03-20 18:41:12 -0400] anthroprose: I'm currently $10k
[2014-03-20 18:41:20 -0400] anthroprose: but run things at ~~$2k
[2014-03-20 18:41:22 -0400] rdobbs: and my spend is going to drop about $60k next month when I finish replacing our ~500 static nodes with reserved instances
[2014-03-20 18:41:24 -0400] anthroprose: wish I could keep the diff
[2014-03-20 18:41:57 -0400] anthroprose: rdobbs: you said processing within an hour.... of what dataset
[2014-03-20 18:42:01 -0400] anthroprose: an hours worth of data
[2014-03-20 18:42:10 -0400] anthroprose: or cumulative?
[2014-03-20 18:42:19 -0400] rdobbs: my team's infrastructure I think is $350kish/month. I'm sure the overall company is between $1m and $4m/month, but we're not allowed to have the whole picture of any process
[2014-03-20 18:42:34 -0400] rdobbs: anthroprose: data that comes from many thousands of devices around the world I'm not allowed to talk about
[2014-03-20 18:42:44 -0400] anthroprose: ohh, I dont care about that
[2014-03-20 18:42:50 -0400] anthroprose: i mean, like the flow
[2014-03-20 18:43:01 -0400] anthroprose: so its a constant stream of input
[2014-03-20 18:43:08 -0400] anthroprose: and you do hour ETL rollups?
[2014-03-20 18:43:31 -0400] rdobbs: sort of yeah, but no databases involved
[2014-03-20 18:43:57 -0400] anthroprose: rdobbs: I have kernel access to 250m devices including mobile, globally
[2014-03-20 18:43:58 -0400] rdobbs: we chunk data from about 100 nodes per region, which takes about 3 days to get to us, then we run it through a huge map/reduce cluster
[2014-03-20 18:43:58 -0400] anthroprose: meh
[2014-03-20 18:44:10 -0400] anthroprose: i just wanna solve engineering problems
[2014-03-20 18:44:32 -0400] anthroprose: ahhh
[2014-03-20 18:44:47 -0400] anthroprose: so you are queueing to EC2 instances, then EMR'n?
[2014-03-20 18:45:43 -0400] anthroprose: and just tell me to shush if I am asking too much.... I'm just curious about moving all that data around.... I am getting close to similar issues
[2014-03-20 18:45:59 -0400] rdobbs: essentially. our datasets parallelize really well. we have a 100gbps direct connect to aws
[2014-03-20 18:47:21 -0400] rdobbs: so our data gets assembled in a physical data  center,m and encrypted, then uploaded through a (shitty) upload manager called aspera, and gets piped through some gnarly inhstances popping off 1tb chunks, sent to another pre-processing map/reduce cluster, that  then sends them to some sanitizing/analysis processes I'm not allowed to know anything about
[2014-03-20 18:47:36 -0400] rdobbs: try debugging that type of data flow when you don't know what it does
[2014-03-20 18:49:10 -0400] rdobbs: and kind of don't want to know. it's either on my conscious to just consider myself a data-pusher who can afford to put my daughters into a montessori school as long as I don't ask questions :)
[2014-03-20 18:50:33 -0400] rdobbs: ok. time to go kick the punching bag!
[2014-03-20 18:50:37 -0400] rdobbs: thanks for all the help, and fun chat
[2014-03-20 18:54:00 -0400] pravinmishra: rdobbs: it was nice time seeing you all text, I enjoyed sitting here :D
[2014-03-20 18:56:09 -0400] werdnativ: It seems like test-kitchen is copying my role file from test/integration/roles to /tmp/kitchen/roles in the VM, but chef-zero is not loading it... any ideas?
[2014-03-20 18:58:10 -0400] coredump: can someone point me to talks or blog posts about chef workflows?
[2014-03-20 19:00:01 -0400] JasonG: coredump: I've been pushing this one at our devs, it doesn't suck: http://peterjmit.com/blog/a-better-workflow-with-chef-and-vagrant.html
[2014-03-20 19:00:31 -0400] coredump: and what about your ops? :)
[2014-03-20 19:01:13 -0400] JasonG: we have a pretty small devops group, currently 2
[2014-03-20 19:01:29 -0400] JasonG: who already know most of this
[2014-03-20 19:02:27 -0400] JasonG: I think most people's workflows are tied to Vagrant / Berkshelf and that's all good, as long as you have a fast SSD
[2014-03-20 19:02:44 -0400] JasonG: chef-solo is easy, chef-server is harder
[2014-03-20 19:02:55 -0400] anthroprose: JasonG: 8cores an 32G on the laptop...
[2014-03-20 19:03:04 -0400] anthroprose: chef-zero makes chef-server easier
[2014-03-20 19:03:15 -0400] anthroprose: I forget I'm running clusters sometimes :(
[2014-03-20 19:03:27 -0400] JasonG: yeah I'm just down lately on the community cookbook thing, faster to roll your own in most cases
[2014-03-20 19:03:33 -0400] JasonG: I want all chef solo
[2014-03-20 19:03:34 -0400] anthroprose: "why is the laptop fan screaming?..... ohh yeah"
[2014-03-20 19:03:51 -0400] jbellone: @anthroprose Nice. What kind of laptop?
[2014-03-20 19:04:02 -0400] anthroprose: JasonG: for single stack installs that works great, I use it for my personal website
[2014-03-20 19:04:12 -0400] anthroprose: jbellone: lenovo (its hyperthreaded)
[2014-03-20 19:04:35 -0400] anthroprose: but imma say the W530 line has horrible nix ACPI support
[2014-03-20 19:04:38 -0400] JasonG: we were stuck on EngineYard for over a year (no chef-server) and now on AWS Opsworks (better but still no chef-server)
[2014-03-20 19:04:55 -0400] jbellone: @anthropose: Sure, figured as much. Macbook Pro right now has 8GB and not a problem. Battery life is what sucks though.
[2014-03-20 19:05:12 -0400] anthroprose: mine has the extended, which I have to take off to even put in the laptop case
[2014-03-20 19:05:19 -0400] JasonG: My new MacBook Pro 16GB retina w/ terabyte SSD screams
[2014-03-20 19:05:42 -0400] anthroprose: JasonG: so how do you do metadata?
[2014-03-20 19:05:42 -0400] jbellone: Yeah, nice, MBP w/ retina is what I want just not the benjamins at the moment.
[2014-03-20 19:05:55 -0400] anthroprose: store things in a config & dl or make code commits?
[2014-03-20 19:05:56 -0400] jbellone: Although I do have a home openstack cluster. :)
[2014-03-20 19:07:12 -0400] anthroprose: jbellone: I've been pitching https://github.com/openstack-ansible/openstack-ansible, you got a better chef version?
[2014-03-20 19:07:22 -0400] JasonG: anthroprose: we don't do a lot with it, other than injecting json directly into our Opsworks instances / laters
[2014-03-20 19:07:26 -0400] JasonG: instances / layers
[2014-03-20 19:07:36 -0400] jbellone: anthroprose: Official stack forge stuff is pretty good. https://github.com/stackforge
[2014-03-20 19:07:38 -0400] anthroprose: ahhh ok, opwsworks lets you do it, got it
[2014-03-20 19:07:58 -0400] anthroprose: i use alot of AWS, but not the app management stuff beanstalk/opsworks
[2014-03-20 19:08:02 -0400] JasonG: you pick any of these tools, they are limiting in some ways but you get other things for free
[2014-03-20 19:08:05 -0400] jbellone: I'm going to build a wrapper cookbook at some point. Right now we just used Fuel to set it up.
[2014-03-20 19:08:28 -0400] anthroprose: JasonG: I give AWS as much as I can, every time
[2014-03-20 19:08:47 -0400] anthroprose: but my chef automation existed long before opsworks
[2014-03-20 19:08:52 -0400] JasonG: Me too, used to fight it but what's the point, if AWS goes down the whole Internet goes dark anyway
[2014-03-20 19:09:09 -0400] anthroprose: pretty much
[2014-03-20 19:09:26 -0400] anthroprose: my last place I was tasked with 'no vendor lock-in', so wrote my own rightscale pretty much
[2014-03-20 19:09:37 -0400] JasonG: sometimes execs ask about putting all our eggs in one basket, then we talk about how much it would cost to do that, then they go away
[2014-03-20 19:09:39 -0400] anthroprose: now I 'admin' some json files
[2014-03-20 19:10:34 -0400] werdnativ: chef-zero is not loading my roles. nodes/*.json load fine using the same config & dir/file structure: https://gist.github.com/avit/67d8db4267529d6a433d
[2014-03-20 19:10:39 -0400] anthroprose: I'm model driven from the start, but before I was, I would do describe API calls and store in mongodb so we could recreate infra topologies
[2014-03-20 19:10:47 -0400] JasonG: don't we all. i also like having API access to everything - deploy resources, changing DNS entries from Chef recipes... It's very powerful to keep all your eggs in the AWS basket
[2014-03-20 19:11:13 -0400] anthroprose: and we backup critical data to another provider, diff only
[2014-03-20 19:11:47 -0400] anthroprose: JasonG: I can run 100% of a startup for scale in the millions of users
[2014-03-20 19:11:54 -0400] anthroprose: but I pay AWS to support me
[2014-03-20 19:12:17 -0400] anthroprose: twisted+boto+aws will do just about anything
[2014-03-20 19:12:44 -0400] JasonG: other than superfast DB i/o with EBS, yeah
[2014-03-20 19:13:03 -0400] JasonG: love snapshots, hate slow EBS
[2014-03-20 19:13:26 -0400] anthroprose: JasonG: I'm using dynamo and run the webapp in RAM
[2014-03-20 19:13:48 -0400] anthroprose: JasonG: https://github.com/Jumpshot/aws-minions
[2014-03-20 19:14:02 -0400] anthroprose: I have those tuned for an /opt mountpoint and XFS
[2014-03-20 19:14:31 -0400] JasonG: I miss python sometimes, I went to a Ruby shop
[2014-03-20 19:14:56 -0400] anthroprose: i like the library support, havnt decided on the culture yet
[2014-03-20 19:15:07 -0400] anthroprose: #python has some major 12yrolds
[2014-03-20 19:15:59 -0400] JasonG: I did not love boto - aws-sdk for ruby is, I think, more sane. v2.0 even more so
[2014-03-20 19:16:18 -0400] anthroprose: interesting
[2014-03-20 19:16:43 -0400] anthroprose: I do not like boto and dynamodb with its layer2 abstractions
[2014-03-20 19:16:46 -0400] savant: boto's interface is nicer
[2014-03-20 19:16:53 -0400] savant: than ruby's aws-sdk imo
[2014-03-20 19:17:06 -0400] anthroprose: but I missed most of the aws-sdk stuff because all the chef community used the righscale gem which sucked hardcore
[2014-03-20 19:17:16 -0400] JasonG: I also have a good bit of Fog, but moving mostly to aws-sdk.
[2014-03-20 19:17:19 -0400] anthroprose: and it was a python shop at the time, so i switched to boto
[2014-03-20 19:19:06 -0400] anthroprose: does the aws-sdk do async?
[2014-03-20 19:21:28 -0400] kbarry: Where can I view the resource/provider for the package resource?
[2014-03-20 19:22:18 -0400] JasonG: anthroprose: I'm probably not the best person to ask. I do a lot of linear stuff on small amounts of infrastructure and almost nothing that has to be orchestrated for hundreds or thousands of ops
[2014-03-20 19:22:25 -0400] anthroprose: kbarry: https://github.com/opscode/chef/blob/master/lib/chef/provider/package.rb?
[2014-03-20 19:22:55 -0400] anthroprose: JasonG: cool, figured while were talking about it
[2014-03-20 19:23:01 -0400] kbarry: i was looking there,  i was wonting to look  at the provider itself, is it stored on my machine/repo?
[2014-03-20 19:23:32 -0400] anthroprose: the rubygem source
[2014-03-20 19:36:21 -0400] sarkis: hey guys i am confused on where to put a logrotate definition call... so i.e. for newrelic
[2014-03-20 19:37:02 -0400] sarkis: i was thinking avoid putting it in newrelic fork, so i don't diverge too far from upstream
[2014-03-20 19:39:44 -0400] jtimberman: anthroprose: omg i love the ruby aws-sdk
[2014-03-20 19:40:19 -0400] sarkis: how do you guys approach that? just add to the fork?
[2014-03-20 19:40:35 -0400] anthroprose: jtimberman: apparently I need to re-check things out... I've been in boto land for a long time
[2014-03-20 19:40:54 -0400] anthroprose: traditionally its been for chef-infra driven api stuff
[2014-03-20 19:40:57 -0400] jtimberman: anthroprose: if i had infinite time, i'd rewrite the aws cookbook to use sdk-aws.
[2014-03-20 19:41:00 -0400] jtimberman: er, aws-sdk
[2014-03-20 19:41:17 -0400] anthroprose: but now I am re-writing a web worker to be async
[2014-03-20 19:41:28 -0400] jtimberman: fog is cool, but the "aws" cookbook doesn't need to care about supporting other clouds :)
[2014-03-20 19:41:31 -0400] anthroprose: jtimberman: I think there is an email list of people just for that topic
[2014-03-20 19:43:43 -0400] dobbs1: So your conversation this afternoon seems pretty timely.  I've been beating my head against application_ruby for over a week.  Based on rdobbs and anthropose conversation should I ditch that and go back to capistrano?
[2014-03-20 19:45:15 -0400] anthroprose: dobbs: I do very simple python app deploys, no DB dependencies or artifacts
[2014-03-20 19:45:25 -0400] anthroprose: so my usecase is small, just for reference
[2014-03-20 19:45:29 -0400] rellis: Hello all. I'm trying to set my timezone using chef's timezone-ii cookbook. When I run "knife node edit nodename" and insert the "tz" setting it just says "Node not updated, skipping node save" and my change is removed.
[2014-03-20 19:53:12 -0400] houms: can someone confirm that the oss chef-server cannot be made to work with self signed ssl? I ask based on this write up which seems to imply it can be made to work http://www.getchef.com/blog/2013/10/31/ssl-certificate-validation-in-chef/
[2014-03-20 20:20:53 -0400] helfire: is there a difference between 'private' chef and 'enterprise' chef. I had an old lab one and it's packages are named 'private' but our new one us all pretty
[2014-03-20 20:21:05 -0400] coderanger: helfire: No, same things
[2014-03-20 20:21:10 -0400] helfire: ahh cool :)
[2014-03-20 20:21:15 -0400] coderanger: helfire: Enterprise Chef is the overall name for private+hosted
[2014-03-20 20:27:58 -0400] punk: greetings folks. is this the place to ask questions about test kitchen?
[2014-03-20 20:28:05 -0400] if_then_: Confusingly, Enterprise (private) install packages still have "private_chef" in the filenames
[2014-03-20 20:30:33 -0400] coderanger: punk: Here is fine, though there is also #kitchenci with a lot fewer people in it
[2014-03-20 20:31:15 -0400] coderanger: if_then_: Welcome to marketing vs. engineering
[2014-03-20 20:31:25 -0400] coderanger: if_then_: See also: opscode vs. chefinc
[2014-03-20 20:33:50 -0400] houms: what is chefinc?
[2014-03-20 20:35:28 -0400] coderanger: houms: The name of the company is now Chef Software Inc
[2014-03-20 20:35:34 -0400] coderanger: I use ChefInc for short
[2014-03-20 20:35:36 -0400] dgarstang: ppfft lol
[2014-03-20 20:35:50 -0400] JasonG: The new name guarantees that you'll never be able to google anything related to them and find it
[2014-03-20 20:36:35 -0400] dgarstang: totally. hard enough as it is
[2014-03-20 20:36:53 -0400] dgarstang: they should have called themselves 'Internet, Inc'
[2014-03-20 20:37:16 -0400] doomviking: yawn
[2014-03-20 20:38:05 -0400] dgarstang: i am unlucky. knife spork does not work for me. it reports the version number bumped, but then doesn't actually do anything. What files should it modify?
[2014-03-20 20:39:04 -0400] jbz_: It should modify metadata.rb with a new version number.
[2014-03-20 20:45:55 -0400] juliancdunn: houms: what do you mean "made to work with self-signed SSL"
[2014-03-20 20:46:41 -0400] juliancdunn: by default, the Chef Client won't validate the server's API certificate
[2014-03-20 20:47:14 -0400] coderanger: juliancdunn: Have I mentioned how sadpanda that makes me? :(
[2014-03-20 20:47:27 -0400] juliancdunn: SSL verification?
[2014-03-20 20:47:35 -0400] juliancdunn: yeah, we're working on it
[2014-03-20 20:47:49 -0400] juliancdunn: so there are three modes now: :none, :verify_ssl, and :verify_api
[2014-03-20 20:47:55 -0400] juliancdunn: at some point we'll flip it to :verify_api
[2014-03-20 20:48:16 -0400] werdnativ: does anyone know WHERE test-kitchen loads things into chef-zero? I'm trying to debug why it's not reading my roles json files https://github.com/test-kitchen/test-kitchen/blob/master/lib/kitchen/provisioner/chef_zero.rb
[2014-03-20 20:48:32 -0400] coderanger: juliancdunn: Yeah, I have it on so I'm safe at least, but lolmitm
[2014-03-20 20:48:57 -0400] juliancdunn: coderanger: right now we're developing nicer tools so that when we flip the bit, people can debug SSL problems more easily
[2014-03-20 20:49:16 -0400] juliancdunn: instead of jumping in here with "why do you all suck" :-)
[2014-03-20 20:49:34 -0400] werdnativ: Or does chef-zero ignore roles, since I'm not seeing "roles" listed here: https://github.com/opscode/chef-zero/tree/master/playground ?
[2014-03-20 20:51:20 -0400] juliancdunn: werdnativ: set roles_path in your provisioner clause
[2014-03-20 20:51:38 -0400] juliancdunn: to something like roles_path: "test/fixtures/roles"
[2014-03-20 20:53:42 -0400] werdnativ: juliancdunn: is there a bug? kitchen already copies my test/integration/roles into /tmp/kitchen/roles already, but search(:role, '*:*') finds []
[2014-03-20 20:54:06 -0400] werdnativ: adding that path config helps none. :(
[2014-03-20 20:54:18 -0400] dgarstang: i am unlucky. knife spork does not work for me. it reports the version number bumped, but then doesn't actually do anything. What files should it modify?
[2014-03-20 20:54:31 -0400] juliancdunn: unsure, there could be -- I've not actually tried using roles with t-k werdnativ
[2014-03-20 20:54:54 -0400] coderanger: dgarstang: Please don't copy-paste questions when someone already answered you
[2014-03-20 20:55:41 -0400] houms: juliancdunn i was told earlier that self-signed will not work and needs to be a verified ssl cert (paid) or use zerochef
[2014-03-20 20:55:44 -0400] dgarstang: jbz_: someone forgot to prefix with my name
[2014-03-20 20:55:46 -0400] werdnativ: weird. roles are like the first thing featured in chef-zero: http://johnkeiser.com/presentation/chef-zero/#/8
[2014-03-20 20:56:21 -0400] dgarstang: so, knife spork basically doesn't work with thor scm version then, because if you use that, the metadata.rb pulls it from VERSION
[2014-03-20 20:56:27 -0400] juliancdunn: werdnativ: I suspect it is not a chef-zero bug
[2014-03-20 20:56:30 -0400] c_t: chef-zero totally has roles
[2014-03-20 20:56:31 -0400] dgarstang: in which case knife spork reports DONE but quietly fails
[2014-03-20 20:56:35 -0400] jbz_: dgarstang: when I answer within 60 seconds, I generally assume people are still looking at the screen if they asked a question. :-P
[2014-03-20 20:56:47 -0400] dgarstang: jbz_: it scrolled. :)
[2014-03-20 20:56:49 -0400] juliancdunn: houms: no, see above where I said that the client doesn't care if your cert is valid -- for the moment
[2014-03-20 20:56:50 -0400] coderanger: houms: Chef will work with self-signed stuff just fine as long as you distribute the CA cert to your clients
[2014-03-20 20:57:06 -0400] coderanger: houms: OpenSSL doesn't know the difference between the two
[2014-03-20 20:57:09 -0400] werdnativ: yeah, I suspect kitchen. Can't figure out where in the code it should load things into chef-zero...
[2014-03-20 20:57:26 -0400] coderanger: houms: Additionally StartCom offers free SSL certs so there is no reason to not use them
[2014-03-20 20:57:41 -0400] houms: ah i see that is not what was mentioned in here earlier but thank you for clearing that up. well i really don't see a reason to use them if it is not public
[2014-03-20 20:57:58 -0400] c_t: werdnativ: debug mode may helP?
[2014-03-20 20:58:01 -0400] c_t: help, even
[2014-03-20 21:01:33 -0400] coderanger: Is https://github.com/poise/poise-appenv#quick-start mildly understandable?
[2014-03-20 21:01:53 -0400] werdnativ: holy wall of json, --log-level=debug!
[2014-03-20 21:07:20 -0400] dgarstang: oh. thor or spork. pick one
[2014-03-20 21:14:04 -0400] punk: coderanger: roger that. i have a vagrant setup for standing up multiple machines, the first of which is a chef-server, and the rest use that chef server for provisioning.
[2014-03-20 21:14:58 -0400] anthroprose: punk: so I use a rake file to fire up chefzero, and use a bash hack to connect back to it from the vagrant cluster
[2014-03-20 21:15:18 -0400] punk: so part of the chef-server recipe (site cookbook wrapper for the opscode chef-server cookbook) runs some knife commands to upload the cookbooks and roles to the server that the nodes will use during their provisioning runs
[2014-03-20 21:15:24 -0400] punk: and that all works fine
[2014-03-20 21:15:41 -0400] punk: but now i'm using test kitchen with vagrant for the driver
[2014-03-20 21:16:02 -0400] punk: and the knife commands throw a nginx 502 error, but only on the first converge attempt
[2014-03-20 21:16:03 -0400] sarkis: hey guys if i have 2 different roles and i specify the same array in each one.. does it get overwritten?
[2014-03-20 21:16:08 -0400] sarkis: or do they comine?
[2014-03-20 21:16:09 -0400] punk: afterwards it works fine
[2014-03-20 21:16:11 -0400] sarkis: combine*
[2014-03-20 21:16:55 -0400] punk: trying to figure out why it works fine in vagrant but test kitchen has this 502 issue. but only on that first converge attempt
[2014-03-20 21:16:58 -0400] sarkis: i.e. "logs": ["foo"]  and  "logs": ["bar"]
[2014-03-20 21:17:32 -0400] punk: anthorprose: using chef-solo now, going to move to chef-zero once i get this stable
[2014-03-20 21:19:06 -0400] punk: hoping there's something about the test kitchen - vagrant setup that i'm missing here but i can't find it
[2014-03-20 21:19:17 -0400] sarkis: looks like it will be overwritten
[2014-03-20 21:20:15 -0400] werdnativ: Debug doesn't help pinpoint much, but here's what I figured out: https://gist.github.com/avit/9fa66527e1569fde4f93
[2014-03-20 21:27:39 -0400] scalp42: any clues how I can check the cookbook version within a recipe ?
[2014-03-20 21:27:55 -0400] scalp42: trying to work some magic around java cookbook ><
[2014-03-20 21:28:03 -0400] dgarstang: scalp42: run_context.cookbook_collection[cookbook_name].version :)
[2014-03-20 21:28:13 -0400] dgarstang: without the smiley at the end
[2014-03-20 21:28:19 -0400] scalp42: oh god
[2014-03-20 21:28:23 -0400] dgarstang: ?
[2014-03-20 21:28:26 -0400] scalp42: if it works you'll save me from my misery
[2014-03-20 21:28:40 -0400] dgarstang: scalp42: passing it along from someone yesterday. :)
[2014-03-20 21:28:47 -0400] scalp42: awesome
[2014-03-20 21:29:17 -0400] scalp42: we have to use an old version, with old java, but the ark provider look for a sha256 in that version. New version look for an md5.
[2014-03-20 21:29:30 -0400] scalp42: wish that regex never existed :)
[2014-03-20 21:29:54 -0400] doomviking: use the smiley, see what happens
[2014-03-20 21:30:14 -0400] scalp42: its not Friday yet
[2014-03-20 21:30:33 -0400] Siiseli_: it will be here in 30 minutes
[2014-03-20 21:30:37 -0400] scalp42: but its kinda always Friday when debugging deprecated cookbooks (tableflip)
[2014-03-20 21:30:40 -0400] someara: it is in eurpoe
[2014-03-20 21:31:08 -0400] werdnativ: What's the difference between these paths for */environments or environments/* ? https://github.com/opscode/chef-zero/blob/master/lib/chef_zero/server.rb#L323
[2014-03-20 21:31:26 -0400] werdnativ: wondering if my missing roles search is under an environment.
[2014-03-20 21:31:38 -0400] Siiseli_: someara, at least it's not rvm madness
[2014-03-20 21:31:43 -0400] Siiseli_: or ruby madness in general
[2014-03-20 21:33:46 -0400] scalp42: So in our infra, for whatever reason (too soon), we stuck on an old java cookbook (1.15.4) and a previous jdk (u25). Oracle changed their cookies so even if I change the urls + checksums to match, the cookie is hardcoded in the provider: https://github.com/socrata-cookbooks/java/blob/master/providers/ark.rb#L69
[2014-03-20 21:34:17 -0400] scalp42: been on this since this morning, is there any way, besides hosting the jdk ourselves?
[2014-03-20 21:34:47 -0400] scalp42: cant really rewind the ark provider either
[2014-03-20 21:34:54 -0400] scalp42: a bit SoL
[2014-03-20 21:39:46 -0400] punk: you can't either fork the old cookbook or use a newer version?
[2014-03-20 21:40:14 -0400] scalp42: yeah I think that would be whats left
[2014-03-20 21:41:12 -0400] scalp42: run_context.cookbook_collection['java'].version would give me somewhat some if/else possibility
[2014-03-20 21:41:30 -0400] scalp42: but cant really do anything about the cookie :/
[2014-03-20 21:49:17 -0400] werdnativ: If I start chef-zero in a directory with nodes/ and roles/ should it automatically load those?
[2014-03-20 21:50:49 -0400] werdnativ: or where does this get called from? https://github.com/opscode/chef-zero/blob/master/lib/chef_zero/server.rb#L268
[2014-03-20 21:51:40 -0400] werdnativ: I can't find "load_data" in the chef-zero gem itself, or in chef or kitchen gems.
[2014-03-20 21:57:44 -0400] werdnativ: I just want search(:role, '*:*') to work... sigh.
[2014-03-20 21:57:58 -0400] dgarstang: would anyone here happen to have  a functional kitchen openstack config file?
[2014-03-20 22:49:55 -0400] Guest88716: quick question to anyone here, has a release date been given for the open sourced versions of the push server and push client?
[2014-03-20 22:52:50 -0400] coderanger: Guest88716: No
[2014-03-20 22:53:00 -0400] coderanger: Guest88716: Well yes, but that date was last year
[2014-03-20 22:53:04 -0400] coderanger: So functionally no
[2014-03-20 22:53:27 -0400] coderanger: Feel free to voice your displeasure with this to any and all Chef Software Inc personnel
[2014-03-20 22:58:34 -0400] notromda: weird. so when I log into a new rackspace server and create a user with sudo access, I can knife bootstrap ok, but if I do the same thing but try to bootstrap directly as root, it fails.   I can log in and run chef-client with a -o  override and it works
[2014-03-20 23:06:32 -0400] no_name: anyone know when push server will be released open source?
[2014-03-20 23:08:20 -0400] doomviking: no_name: last year.
[2014-03-20 23:08:41 -0400] doomviking: 15:52 <@coderanger> Guest88716: No
[2014-03-20 23:08:41 -0400] doomviking: 15:53 <@coderanger> Guest88716: Well yes, but that date was last year
[2014-03-20 23:08:41 -0400] doomviking: 15:53 <@coderanger> So functionally no
[2014-03-20 23:08:42 -0400] doomviking: 15:53 <@coderanger> Feel free to voice your displeasure with this to any and all Chef Software Inc personnel
[2014-03-20 23:08:45 -0400] no_name: I'm confused, every release and the docs I'm finding says it's still enterprise only
[2014-03-20 23:09:05 -0400] doomviking: sorry, this just got sorta answered.
[2014-03-20 23:09:17 -0400] no_name: I missed it? lol.
[2014-03-20 23:09:30 -0400] no_name: So can I use Push Server with the open source version of Chef?
[2014-03-20 23:09:38 -0400] doomviking: the answer is no
[2014-03-20 23:09:42 -0400] doomviking: not yet
[2014-03-20 23:10:12 -0400] no_name: Gotcha. Have they announced the date for release? Chef_Conf?
[2014-03-20 23:10:19 -0400] doomviking: nope
[2014-03-20 23:10:29 -0400] anthroprose: doomviking: it'd be way cooler if it did
[2014-03-20 23:10:37 -0400] doomviking: oh I agree
[2014-03-20 23:10:46 -0400] doomviking: see that last line from coderanger
[2014-03-20 23:10:49 -0400] anthroprose: i got told to pester btm
[2014-03-20 23:10:59 -0400] shawn_sher: If it was out, I think that you could.
[2014-03-20 23:11:06 -0400] no_name: is using knifessh that big of a pain to push?
[2014-03-20 23:11:29 -0400] doomviking: I dont mind it
[2014-03-20 23:11:36 -0400] no_name: I'm using Jenkins for CI and want to use Chef to manage updating our test servers instead of doing it in Jenkins
[2014-03-20 23:12:03 -0400] no_name: Chef seems way more suited to the task
[2014-03-20 23:12:06 -0400] anthroprose: i chef'd my jenkins and jenkins my chef
[2014-03-20 23:12:48 -0400] anthroprose: the app deploys currently use knife ssh from jenkins
[2014-03-20 23:12:57 -0400] no_name: I've seen some slide decks where they are managing the status of CI/CD pipeline in Jenkins despite using Chef
[2014-03-20 23:13:01 -0400] werdnativ: Why doesn't this class have a get method? https://github.com/opscode/chef-zero/blob/master/lib/chef_zero/endpoints/role_endpoint.rb#L9
[2014-03-20 23:13:17 -0400] no_name: @anthroprose: yup seems I'm headed that way
[2014-03-20 23:13:24 -0400] anthroprose: no_name: and I see people argue for bash all day too
[2014-03-20 23:13:37 -0400] coderanger: doomviking: o7o7
[2014-03-20 23:13:52 -0400] no_name: I'm from a primarily windows background, so it's uphill no matter what I do
[2014-03-20 23:13:59 -0400] werdnativ: nvm, it's in RestObjectEndpoint.
[2014-03-20 23:14:04 -0400] anthroprose: no_name: push button deploys driven by a developer who is the quality gate and blocked by failing builds
[2014-03-20 23:14:35 -0400] anthroprose: same with my cookbooks too.... no build no upload
[2014-03-20 23:14:48 -0400] no_name: i concur
[2014-03-20 23:14:52 -0400] no_name: fail often
[2014-03-20 23:15:00 -0400] anthroprose: constantly :)
[2014-03-20 23:15:09 -0400] doomviking: coderanger: say what
[2014-03-20 23:15:29 -0400] coderanger: doomviking: Its an Eve thing, o7 == a little dude saluting
[2014-03-20 23:15:34 -0400] anthroprose: and notify directly to developer that made the commit + group chat
[2014-03-20 23:15:57 -0400] doomviking: coderanger: ah. I still play nethack.
[2014-03-20 23:21:56 -0400] coderanger: doomviking: :-)
[2014-03-20 23:25:52 -0400] werdnativ: so, kitchen first copies roles, nodes, data_bags into /tmp/kitchen, sets things up, then runs chef-client -z. Where does it actually load everything into chef-zero?
[2014-03-20 23:25:56 -0400] rpad: Trying to use the after_extract proc on the artifact cookbook but receiving this error: undefined method `after_extract' for Chef::Resource::ArtifactDeploy
[2014-03-20 23:26:10 -0400] werdnativ: I'm still trying to debug why it's not loading my roles... wasted all day.
[2014-03-20 23:30:41 -0400] werdnativ: rpad, seems legit. https://github.com/RiotGames/artifact-cookbook documents it. Do you have a recent version of the cookbook?
[2014-03-20 23:34:41 -0400] rpad: hrm, my berks install says "Using artifact (1.11.3)" but my vagrant provision says "Using artifact (0.10.10)". That's probably the issue
[2014-03-20 23:40:59 -0400] werdnativ: Can anyone explain what might be happening here? I've been code-diving in chef-zero & test-kitchen all afternoon: https://gist.github.com/avit/9fa66527e1569fde4f93
[2014-03-20 23:57:09 -0400] ephantom: A Chef 10 to 11 upgrade question.  Background: I have a chef 10 server with a bad database caused by a disk sector failure, the database still works but there are a few cookbooks that are messed up.  I have local copies of the cookbooks that I can re-upload to the new chef 11 server once things are in place, however I would like to download the rest of the database. Im following the Opscode Upgrade to Open Source Server 11 instruc
[2014-03-20 23:57:15 -0400] ephantom: I am at the point where Im running the knife download -c .chef/knife-chef10.rb / command. It works till it hits the bad cookbooks then bails. Question: is there a way to format the knife download command so that it downloads everything from the database except for the cookbooks?

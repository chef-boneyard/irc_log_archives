[2014-03-05 00:10:58 -0500] Majost: Whats the correct way to do this: ::Chef::Mixin::ShellOut.new
[2014-03-05 00:12:22 -0500] coderanger: Majost: From a recipe?
[2014-03-05 00:12:28 -0500] Majost: from an lwrp
[2014-03-05 00:13:11 -0500] Majost: I found this: http://docs.opscode.com/lwrp_custom_provider_ruby.html
[2014-03-05 00:13:26 -0500] Majost: but it looks a little dataed because its using the old update_by_last_action stuff
[2014-03-05 00:14:04 -0500] coderanger: Majost: You can just use the shell_out! helper from provider code I think
[2014-03-05 00:18:26 -0500] Majost: ah, yeah that  worked -- looks like the same code essentially too.
[2014-03-05 00:18:27 -0500] Majost: Thanks
[2014-03-05 00:29:25 -0500] TrinitronX: Anyone know if "knife ssh 'name:*' -a my_attribute" can accept a name of a nested attribute?
[2014-03-05 00:32:03 -0500] coderanger: TrinitronX: Try -a foo.bar
[2014-03-05 00:32:45 -0500] TrinitronX: @coderanger:  Thanks!  That works great!
[2014-03-05 00:32:56 -0500] TrinitronX: couldn't seem to find a good example of that syntax
[2014-03-05 01:20:28 -0500] law: hey all, I'm trying to get an 'oh-my-zsh' cookbook playing nice on Chef11, but it seems to be dying on the databag search
[2014-03-05 01:20:34 -0500] law: here's the full error - https://gist.github.com/law/b4fefd0407792a18897d
[2014-03-05 01:22:55 -0500] coderanger: law: ERROR: 404 "Not Found"
[2014-03-05 01:23:00 -0500] coderanger: Meaning the bag item doesn't exist
[2014-03-05 01:25:10 -0500] law: :users doesn't exist?
[2014-03-05 01:25:42 -0500] coderanger: law: More likely the specific user doesn't exist
[2014-03-05 01:26:35 -0500] law: so it's returning null results for users that match the *zsh search pattern?
[2014-03-05 01:26:59 -0500] coderanger: law: That isn't a search
[2014-03-05 01:27:10 -0500] coderanger: data_bag_item is a single API request
[2014-03-05 01:27:18 -0500] coderanger: GET /data/users/#{user_id}
[2014-03-05 01:27:23 -0500] coderanger: That just returns JSON
[2014-03-05 01:29:09 -0500] fclausen: hello all - is there a way to delay a ruby gem installation until after a particular cookbook run as been completed? Currently the "chef_gem" resource executes first prior to its compile dependencies being in place.
[2014-03-05 01:29:58 -0500] coderanger: fclausen: Use a gem_package?
[2014-03-05 01:30:12 -0500] coderanger: Or install the prereq at compile time
[2014-03-05 01:31:06 -0500] fclausen: coderanger: I need chef_gem since I am using ruby-oci8 to write an LWRP to provision Oracle users. The problem is that I need the oracle-instantclient cookbook to complete *prior* to the chef_gem installation attempt.
[2014-03-05 01:31:39 -0500] coderanger: fclausen: :-/ Easiest way to do it is the now cookbook
[2014-03-05 01:31:45 -0500] coderanger: its a bit of a hack, but mostly works
[2014-03-05 01:32:24 -0500] fclausen: coderanger: mmm, "now" cookbook, I'll have a google
[2014-03-05 01:32:52 -0500] coderanger: fclausen: ckbk.it/now
[2014-03-05 01:33:02 -0500] fclausen: coderanger: thanks, checking it out
[2014-03-05 01:34:15 -0500] fclausen: coderanger: sounds like what I need but I'll re-evaluate the situation with Chef 12
[2014-03-05 01:35:15 -0500] coderanger: fclausen: Probably, my code is a bit crazypants
[2014-03-05 01:35:44 -0500] fclausen: coderanger: Oracle is crazypants to begin with so that's OK :)
[2014-03-05 01:57:58 -0500] maplebed: is it required that the directory name of a cookbook be the same as the cookbook name (as written in metadata.rb) or just strongly suggested?
[2014-03-05 02:52:02 -0500] fclausen_: coderanger: The now cookbook does the trick - the oracle-instantclient stuff is run before chef_gem allowing the gem install to succeed. Thanks for the tip
[2014-03-05 02:52:53 -0500] storme_radiance: wonder if anyone is working on chef-metal for vsphere
[2014-03-05 03:08:42 -0500] tjr9898_: Anyone running into deadthreads with Ridley/Celluloid
[2014-03-05 03:20:31 -0500] juliancdunn: ohai cheeseplus
[2014-03-05 03:20:46 -0500] cheeseplus: ohai juliancdunn
[2014-03-05 03:24:01 -0500] tos9: Hey. This is probably partially due to my complete lack of Java / maven knowledge, but can anyone explain how to use the maven resource?
[2014-03-05 03:24:43 -0500] tos9: I literally want to do the equivalent of `mvn install` in a local directory then copy the resulting jars into a folder, but this resource seems to take some odd parameters that would seem to indicate that it doesn't know how to do that.
[2014-03-05 03:24:57 -0500] tos9: (I know I can just `execute` obviously, but I'm curious if I'm missing something)
[2014-03-05 04:51:24 -0500] chef892: hi
[2014-03-05 04:52:02 -0500] chef892: I am always getting the error while installing the tomcat on chef-client using boostrap
[2014-03-05 04:52:48 -0500] chef892: Error:yum-dump Locking Error! Couldn't obtain an exclusive yum lock in 10 seconds
[2014-03-05 04:53:22 -0500] chef892: i need to manually kill the process which using yum then retry then its work
[2014-03-05 04:54:01 -0500] chef892: is their any way that i can kill the process using yum or check it yum is lock in cookbook recipe
[2014-03-05 04:56:32 -0500] chef892: any one have idea how i can do this?
[2014-03-05 06:41:56 -0500] TrinitronX: \quit
[2014-03-05 06:55:52 -0500] brucelee_: hey
[2014-03-05 06:56:12 -0500] brucelee_: coderanger: i included postfix recipe, but i want to add something to template
[2014-03-05 06:56:19 -0500] brucelee_: how do i "extend" it
[2014-03-05 06:57:00 -0500] coderanger: Unless the cookbook offers some way to do it, chef-rewind is your only option
[2014-03-05 06:57:33 -0500] brucelee_: :P
[2014-03-05 06:57:45 -0500] brucelee_: what does it do?
[2014-03-05 06:58:05 -0500] brucelee_: what i thought about doing was copying the postfix cookbook, and just using it as the actual cookbook
[2014-03-05 06:58:16 -0500] brucelee_: changing the opscode cookbook
[2014-03-05 06:58:21 -0500] brucelee_: but thats not good form
[2014-03-05 06:58:30 -0500] brucelee_: so how does chef-rewind do it?
[2014-03-05 07:01:20 -0500] coderanger: brucelee_: rewind modifies the values on a resource on the fly
[2014-03-05 07:02:13 -0500] brucelee_: coderanger: nice what is that called?
[2014-03-05 07:02:22 -0500] coderanger: chef-rewind?
[2014-03-05 07:02:32 -0500] brucelee_: coderanger: in programming terms, is the technique, "extending"
[2014-03-05 07:02:46 -0500] coderanger: No, its state mutation
[2014-03-05 07:03:01 -0500] brucelee_: :p
[2014-03-05 07:03:12 -0500] brucelee_: thanks for the rewind
[2014-03-05 07:03:15 -0500] brucelee_: ill check it out
[2014-03-05 07:03:26 -0500] coderanger: Its bad, but less bad than other options
[2014-03-05 07:03:41 -0500] brucelee_: coderanger: how would you do it though?
[2014-03-05 07:04:03 -0500] brucelee_: im sure in your extensive chef usage, you have come across these situations
[2014-03-05 07:04:14 -0500] brucelee_: where the original recipe's templates doesn't account for everything
[2014-03-05 07:04:24 -0500] coderanger: Yes, and if rewriting the upstream cookbook isn't an option, I use rewind (or similar)
[2014-03-05 07:04:34 -0500] coderanger: The real solution should be subclassing the Postfix resource
[2014-03-05 07:04:37 -0500] coderanger: but thats not a thing
[2014-03-05 07:04:53 -0500] brucelee_: what do you mean subclass
[2014-03-05 07:04:58 -0500] brucelee_: you mean extend the postfix resource
[2014-03-05 07:07:20 -0500] coderanger: I mean people should stop writing recipes
[2014-03-05 07:07:26 -0500] coderanger: and start writing resource classes
[2014-03-05 07:07:37 -0500] coderanger: so that in cases like this, they can actually be extended
[2014-03-05 07:07:46 -0500] brucelee_: are you talking about lwrp?
[2014-03-05 07:07:56 -0500] coderanger: No
[2014-03-05 07:08:05 -0500] coderanger: As I said, you have to write real classes
[2014-03-05 07:08:19 -0500] brucelee_: haha
[2014-03-05 07:08:24 -0500] brucelee_: well that wouldnt be chef then
[2014-03-05 07:08:30 -0500] coderanger: Sure it would
[2014-03-05 07:08:45 -0500] brucelee_: so how would it differ? i cant really visualize it
[2014-03-05 07:08:52 -0500] coderanger: https://github.com/balanced-cookbooks/jenkins/blob/master/libraries/jenkins.rb
[2014-03-05 07:08:52 -0500] brucelee_: you have a default.rb
[2014-03-05 07:08:57 -0500] coderanger: Thats how I install Jenkins
[2014-03-05 07:10:28 -0500] brucelee_: off topic, but do you use an internally hosted git?
[2014-03-05 07:10:31 -0500] brucelee_: or do you guys use github
[2014-03-05 07:10:32 -0500] brucelee_: for balanced
[2014-03-05 07:10:44 -0500] coderanger: Github, thats our cookbooks org
[2014-03-05 07:10:59 -0500] brucelee_: what about for your actual product?
[2014-03-05 07:11:05 -0500] brucelee_: currently we use internally hosted git
[2014-03-05 07:11:08 -0500] brucelee_: in my company
[2014-03-05 07:11:13 -0500] brucelee_: but we plan to move everything to a hosted one
[2014-03-05 07:11:19 -0500] brucelee_: probably bitbucket
[2014-03-05 07:11:27 -0500] coderanger: 100% github
[2014-03-05 07:11:44 -0500] brucelee_: ok
[2014-03-05 07:13:00 -0500] brucelee_: thats an extremely long cookbook
[2014-03-05 07:13:04 -0500] brucelee_: the jenkins
[2014-03-05 07:13:22 -0500] coderanger: Software is complex
[2014-03-05 07:13:39 -0500] coderanger: The resources model the underlying structure
[2014-03-05 07:13:45 -0500] coderanger: but are generally filled with sane defaults
[2014-03-05 07:14:21 -0500] coderanger: https://github.com/balanced-cookbooks/balanced-ci/blob/master/recipes/server.rb shows our actual final sever recipe
[2014-03-05 07:16:08 -0500] brucelee_: with the jenkins cookbook you linked
[2014-03-05 07:16:12 -0500] brucelee_: does that by itself install jenkins
[2014-03-05 07:16:21 -0500] brucelee_: the recipes/default.rb just sets the home attribute
[2014-03-05 07:16:47 -0500] brucelee_: is the server.rb you just linked the actual cookbook that installs stuff
[2014-03-05 07:17:31 -0500] coderanger: brucelee_: The resources have all the complex logic
[2014-03-05 07:17:41 -0500] coderanger: This is what I'll be talking about at ChefConf
[2014-03-05 07:18:23 -0500] brucelee_: coderanger: is that free?
[2014-03-05 07:18:30 -0500] coderanger: ChefConf? No
[2014-03-05 07:18:56 -0500] brucelee_: doesnt show you as a featured speaker :p
[2014-03-05 07:19:38 -0500] brucelee_: i was at rsa conference last week
[2014-03-05 07:19:47 -0500] brucelee_: one of the speakers gene kim was there
[2014-03-05 07:19:50 -0500] brucelee_: passing out his book for free
[2014-03-05 07:19:55 -0500] brucelee_: The Phoenix Project
[2014-03-05 07:20:38 -0500] Pensu: Hi all, I am trying to use openstack's mysql cookbook on Fedora 19, and here is the error I am getting.....
[2014-03-05 07:20:50 -0500] Pensu: ArgumentError : Bad string format template[], you must have a string like resource_type[name]!
[2014-03-05 07:21:18 -0500] Pensu: Relevant File Content:  /var/chef/cache/cookbooks/openstack-ops-database/recipes/mysql-server.rb:
[2014-03-05 07:21:40 -0500] Pensu: 50>> r = resources("template[#{mycnf_template}]")
[2014-03-05 07:22:24 -0500] Pensu: Now, I was able to bypass the mariadb and community-mysql issue......but I dont have any idea where to find this template....
[2014-03-05 07:22:30 -0500] coderanger: Pensu: Somehow that variable is empty
[2014-03-05 07:23:10 -0500] Pensu: coderanger: yes, the code looks a little buggy to me, check this:
[2014-03-05 07:23:19 -0500] Pensu:  43:  case node['platform_family']
[2014-03-05 07:23:25 -0500] Pensu: 46:  when 'rhel'
[2014-03-05 07:23:29 -0500] Pensu: 47:    mycnf_template = 'final-my.cnf'
[2014-03-05 07:23:50 -0500] Pensu: Now, for debian it searches in /etc/mysql/my.cnf...
[2014-03-05 07:24:08 -0500] Pensu: but for rhel family, how do I generate final-my.cnf???
[2014-03-05 07:24:29 -0500] coderanger: Pensu: Without more info I can't say, link to the code?
[2014-03-05 07:25:46 -0500] Pensu: coderanger: https://github.com/stackforge/cookbook-openstack-ops-database/blob/master/recipes/mysql-server.rb
[2014-03-05 07:26:08 -0500] Pensu: coderanger: check the lines 43-48
[2014-03-05 07:27:03 -0500] coderanger: Pensu: Looks fine to me
[2014-03-05 07:27:08 -0500] coderanger: Thats mutating https://github.com/opscode-cookbooks/mysql/blob/master/recipes/_server_rhel.rb#L73
[2014-03-05 07:29:13 -0500] Pensu: coderanger: Ok, I dont have that file. Let me check and get back to you. Thanks!
[2014-03-05 07:29:51 -0500] coderanger: Pensu: Yes you do, the recipe you mentioned includes it
[2014-03-05 07:29:59 -0500] coderanger: Pensu: include_recipe 'mysql::server'
[2014-03-05 07:30:09 -0500] coderanger: Pensu: What OS are you using?
[2014-03-05 07:30:23 -0500] coderanger: Pensu: From the error you mentioned, it sounds like you are using something that isn't debian or rhel
[2014-03-05 07:30:50 -0500] Pensu: coderanger: yeah, it's Fedora 19....
[2014-03-05 07:30:51 -0500] coderanger: Are you trying to use fedora, for example?
[2014-03-05 07:30:53 -0500] coderanger: Heh
[2014-03-05 07:30:56 -0500] coderanger: Jinx
[2014-03-05 07:31:04 -0500] coderanger: Few cookbooks will work with Fedora
[2014-03-05 07:31:11 -0500] coderanger: Nobody tests on it
[2014-03-05 07:31:25 -0500] coderanger: It is not considered to be a RHEL-family OS anymore
[2014-03-05 07:31:39 -0500] Pensu: coderanger: yeah, I had a troubling time with mysql, since fedora decided to move to maraidb
[2014-03-05 07:31:49 -0500] coderanger: Case in point
[2014-03-05 07:32:11 -0500] coderanger: Use either CentOS/RHEL 6 or Ubuntu 12.04
[2014-03-05 07:32:14 -0500] coderanger: There are no other OSes
[2014-03-05 07:33:58 -0500] Pensu: yeah, if this continues, I would have to give up on Fedora!
[2014-03-05 07:36:17 -0500] coderanger: Pensu: Why would you use Fedora? Its not a server OS
[2014-03-05 07:36:31 -0500] coderanger: It is aimed at being a latest-and-greatest distro
[2014-03-05 07:36:39 -0500] coderanger: which is usually pretty bad for servers
[2014-03-05 07:36:50 -0500] coderanger: also no real security support to speak of
[2014-03-05 07:37:00 -0500] coderanger: Granted it does have systemd, so thats a decent reason
[2014-03-05 07:37:03 -0500] Pensu: I was just testing it out, in the end, the plan is to go with RHEL only
[2014-03-05 07:37:59 -0500] coderanger: Heh, well I think you have your answer ;-)
[2014-03-05 07:39:43 -0500] Pensu: haha, yeah, learning the hard way!
[2014-03-05 07:56:08 -0500] coderanger: Pensu: Did you just post the same question to the ML?
[2014-03-05 09:08:55 -0500] Pensu: coderanger: yeah, sorry for late reply, that was me! was trying to get some more insight!
[2014-03-05 09:46:52 -0500] Rico_: hello
[2014-03-05 09:46:58 -0500] Rico_: Currently I want to use chef execute resource to run a bat , the bat contains a long run java program. my recipe is like following:  execute "execute startup-#{node.config.env}.bat" do   command "start startup-#{node.config.env}.bat"   action :run   cwd "#{node.default.cookbook.server.install_root}\\#{node.config.env}" end  I use "start test.bat", I expect chef client will start the java program then immediately return to console . but
[2014-03-05 09:47:13 -0500] Rico_: I use "start test.bat", I expect chef client will start the java program then immediately return to console . but now chef client will always wait for the java program to complete. is there any method to let chef run a program in background and exit to console?
[2014-03-05 10:13:46 -0500] mhenrixon: I just had a total brainfart
[2014-03-05 10:14:18 -0500] n1ko: how did it smell
[2014-03-05 10:14:27 -0500] mhenrixon: Does the name of the file with attributes matter when I am trying to set some default wrapper attributes in a cookbook or should it always be named default.rb?
[2014-03-05 10:14:55 -0500] mhenrixon: I can't get nginx to install the right version like it doesn't pick up my sensible defaults even though they are all there
[2014-03-05 10:15:07 -0500] mhenrixon: I suppose that is where a LWRP comes in play...
[2014-03-05 10:15:46 -0500] mhenrixon: ode['nginx']
[2014-03-05 10:15:47 -0500] mhenrixon: => {"version"=>"1.5.10",
[2014-03-05 10:16:00 -0500] mhenrixon: it is installing version 1.1.19
[2014-03-05 10:22:24 -0500] mhenrixon: include_attribute "base-server::web"
[2014-03-05 10:55:55 -0500] srenatus: can I do the following? >>def my_content() "my-content" end; file "/tmp/blah" do content my_content() end<<
[2014-03-05 10:56:33 -0500] srenatus: from the error that appears, it's looking up my_content() in Chef::Resource::File then.... I'd have expected some "later" binding here...
[2014-03-05 10:56:44 -0500] srenatus: or is it earlier? whatever.
[2014-03-05 10:57:39 -0500] chef703: hi
[2014-03-05 10:58:11 -0500] chef703: i am getting the error while installing the tomcat on chef-client using the bootstrap
[2014-03-05 11:02:19 -0500] chef703: Error is : [option installonlypkgs] kernel kernel-bigmem installonlypkg(kernel-module) in yum-dump Locking Error! Couldn't obtain an exclusive yum lock in 10 seconds.
[2014-03-05 11:10:27 -0500] daxroc: chef703: Has yum been locked by another processs ?
[2014-03-05 11:16:15 -0500] chef703: yes
[2014-03-05 11:16:36 -0500] chef703: i need to manually kill that process and then again bootstrap
[2014-03-05 11:16:40 -0500] chef703: then it works
[2014-03-05 11:16:54 -0500] chef703: but that happen frequently
[2014-03-05 11:17:35 -0500] chef703: is their any way so that i can kill the that process from recipe only before installing tomcat
[2014-03-05 11:20:59 -0500] srenatus: srenatus: put your def into libraries/, then it will be read here: https://github.com/opscode/chef/blob/1bb1a934fe397874b86ec00d6aff2df7b3eb6017/lib/chef/run_context/cookbook_compiler.rb#L179 and be available everywhere
[2014-03-05 12:02:11 -0500] ocholetras: does the chef server hardcoded nginx client body size limit
[2014-03-05 12:02:25 -0500] ocholetras: im changing de value on chef-server.rb and running reconfigure with no effect
[2014-03-05 12:03:15 -0500] ocholetras: the value on nginx.conf changes.. but server stil responding with 413 Request entity too large
[2014-03-05 13:14:00 -0500] Glenjamin: Hi guys, I'm writing an LWRP, and i'd like to delegate some behaviour to an existing resource - can anyone point me to some docs/examples for this?
[2014-03-05 13:14:47 -0500] Glenjamin: specifically, i'd like to write a file to the system, and execute a command
[2014-03-05 13:16:37 -0500] srenatus: Glenjamin: what you describe is called "use_inline_resource"
[2014-03-05 13:16:47 -0500] srenatus: Glenjamin: ahem, "use_inline_resources"
[2014-03-05 13:17:01 -0500] Glenjamin: excellent, thanks
[2014-03-05 13:17:42 -0500] Glenjamin: and then i can just use resources in the LWRP and it'll all just work?
[2014-03-05 13:18:00 -0500] Glenjamin: ah, found that example now - i see
[2014-03-05 13:39:03 -0500] ekle: hi, how can i make a cookbook with a own provider ? i made a resources/private_ip.rb and an providers/private_ip.rb. but i always get Cannot find a resource for private_ip on ubuntu version 13.04 as error.
[2014-03-05 13:39:32 -0500] bmhatfield: ekle: LWRPs are referred to by COOKBOOKNAME_private_ip
[2014-03-05 13:43:55 -0500] ekle: thx. it could be this simple
[2014-03-05 13:52:59 -0500] daxroc: What do people use other than strainer ?
[2014-03-05 14:09:36 -0500] jsfrerot: Hi, I'm obviously new to chef/ruby. I'm trying to create "def" in a librarie file to be able to use those defs in my recipe. Here is what i've done so far: http://pastebin.com/qX1nMUU9 I get the following error when running chef-client: FATAL: NameError: Cannot find a resource for GenerateArraySudoers on centos version 6.4
[2014-03-05 14:10:28 -0500] jsfrerot: How do I access Chef::Recipe::Sudo defs from my recipe
[2014-03-05 14:18:04 -0500] Glenjamin: hi again guys, the version of chef i'm on doesn't have use_inline_resources - it's a vagrant base box on centos 5.9 - i'm trying to find a good way of upgrading this, can I use chef-solo to upgrade itself?
[2014-03-05 14:21:06 -0500] srenatus: Glenjamin: there's a vagrant plugin for that, vagrant-omnibus
[2014-03-05 14:21:19 -0500] Glenjamin: aha, sounds like what i need
[2014-03-05 14:21:27 -0500] srenatus: Glenjamin: it will install the version you specify (such as :latest) of chef via the omnibus package
[2014-03-05 14:21:36 -0500] Glenjamin: "upgrade chef solo with chef" wasn't a very fruitful search
[2014-03-05 14:24:06 -0500] Glenjamin: this is exactly what i was after, thanks
[2014-03-05 14:34:44 -0500] srenatus: Glenjamin: :)
[2014-03-05 14:40:29 -0500] omrib_: I just found out that there's a new object type on chef server 11, "user". I've been using an admin client to manage my server till now. What are the differences?
[2014-03-05 15:02:05 -0500] jsfrerot: Hi, I'm obviously new to chef/ruby. I'm trying to create "def" in a librarie file to be able to use those defs in my recipe. Here is what i've done so far: http://pastebin.com/qX1nMUU9 I get the following error when running chef-client: FATAL: NameError: Cannot find a resource for GenerateArraySudoers on centos version 6.4
[2014-03-05 15:03:01 -0500] srenatus: jsfrerot: just try without the "class"es
[2014-03-05 15:03:47 -0500] jsfrerot: srenatus: you mean in my library file I simply start with "def..." ?
[2014-03-05 15:05:51 -0500] srenatus: jsfrerot: yep
[2014-03-05 15:06:42 -0500] jsfrerot: srenatus: huh! it works! I was under the impressions that I had to put my defs under Chef::Recipe::somenamespace, but is it possible to do that ?
[2014-03-05 15:09:40 -0500] srenatus: jsfrerot: you can do arbitrarily fancy things ;)
[2014-03-05 15:10:29 -0500] jsfrerot: srenatus: thx :)
[2014-03-05 15:10:38 -0500] srenatus: :)
[2014-03-05 15:38:26 -0500] benmoss: when you set "environment" in a deploy_revision block, where does it put those environment variables?
[2014-03-05 15:38:47 -0500] benmoss: i am trying to figure out why they don't seem to be showing up, but i don't know how to debug
[2014-03-05 16:16:49 -0500] FireBeyond: I can't see what is respawning my chef-client on a node, ubuntu 12
[2014-03-05 16:22:07 -0500] markp: hello chefs
[2014-03-05 16:22:12 -0500] markp: question RE test-kitchen
[2014-03-05 16:22:29 -0500] markp: is it possible to use anchors in the kitchen.yml file ?
[2014-03-05 16:29:01 -0500] atomic-penguin: anchors?
[2014-03-05 16:38:31 -0500] markp1: yes yaml anchors ....
[2014-03-05 16:38:42 -0500] markp1: eg  run_list: &default_run_list
[2014-03-05 16:38:49 -0500] markp1: then in another suite
[2014-03-05 16:39:19 -0500] markp1: run_list:
[2014-03-05 16:39:26 -0500] markp1: <<: *default_run_list
[2014-03-05 16:39:57 -0500] markp1: in yaml, *default_run_list would expand to the entries defined by &default_run_list
[2014-03-05 16:40:31 -0500] markp1: when I run kitchen against the .kitchen.yml file with anchors it fails with a parsing exception
[2014-03-05 17:07:34 -0500] EricL: Has anyone tried launching hvm instances on AWS and seen extra ephemeral drives being passed into the ec2 object?
[2014-03-05 17:08:26 -0500] therealkoopa: I'm trying to use the sensu cookbook, which depends on redisio. Redisio is failing because of "Error executing action `install` on resource 'package[build-essential]'" ... "apt-get -q -y install build-essential=11.6ubuntu5 returned 100, expected 0"
[2014-03-05 17:08:53 -0500] therealkoopa: I'm wondering why it's setting build-essential=11.6ubuntu5. I'm running this on ubuntu 12.04
[2014-03-05 17:19:00 -0500] jbarop_: Hi. I have trouble setting a simple attributes in a recipe. How should I do it? http://pastebin.com/WNh3qenP
[2014-03-05 17:31:55 -0500] shlant: jbarop_: what's the problem?
[2014-03-05 17:44:17 -0500] jbarop_: well, as you can see i want the recipe to be a wrapper which installs postgresql 9.3 with a given password.
[2014-03-05 17:44:47 -0500] jbarop_: the problem is, that the postgresql recipe is ranting that ['postgresql']['password']['postgres'] is not set
[2014-03-05 17:47:01 -0500] kewubenduben: for test-kitchen. How do you specificy/structure a serverspec that runs on all suite?
[2014-03-05 17:47:08 -0500] kewubenduben: runs/applies
[2014-03-05 17:47:15 -0500] iroller: Ohai Chefs. How can I get an a output of command executed in 'execute do {command "do smth 2>&1"}' resource without writing it to file and then reading it?
[2014-03-05 17:48:04 -0500] awc737: Can I use the config.vm.provision :chef_solo part of my Vagrantfile, to provision a VPS?
[2014-03-05 17:48:15 -0500] awc737: this is that Vagrantfile provision method, with cookbooks etc
[2014-03-05 17:48:16 -0500] awc737: http://pastie.org/8876106
[2014-03-05 17:48:18 -0500] fnichol: markp: i believe i've seen people use yaml anchors in some .kitchen.yml files. it was something i hadn't originally considered but could help dry up some crazier configs
[2014-03-05 17:49:15 -0500] jbarop_: shlant: it is sort of working when i use node.default['postgresql']['password']['postgres'] = "postgres"
[2014-03-05 17:49:17 -0500] fnichol: markp: kitchen uses ruby's yaml standard library and by the time the yaml parsing hits test kitchen, it'll already be a ruby hash
[2014-03-05 17:49:23 -0500] jbarop_: but then the other properties are ignored
[2014-03-05 17:49:48 -0500] markp: fnichol: that was exactly my angle but i am getting errors attempting to use them
[2014-03-05 17:50:37 -0500] fnichol: markp: ah! in that case it could be useful to try running `kitchen diagnose --all`. this'll include the yaml loading and merging info so maybe we can trace what's going on
[2014-03-05 17:50:48 -0500] markp: fnichol: so I was wondering how the file is being parsed as I discovered I am able to use ERB statements in there also
[2014-03-05 17:51:05 -0500] iroller: I'm asking because chefspec is unable to stub system() or ``(backtricks) output
[2014-03-05 17:53:11 -0500] fnichol: markp: the nitty gritty impl for loading/parsing/merging the yaml files are all in https://github.com/test-kitchen/test-kitchen/blob/master/lib/kitchen/loader/yaml.rb . that object implements a #read method which returns a ruby hash, and test kitchen uses that as the "raw data"
[2014-03-05 17:53:21 -0500] awc737: is this only for vagrant? http://pastie.org/8876106
[2014-03-05 17:53:33 -0500] awc737: I want to use that on a remote VPS
[2014-03-05 17:59:55 -0500] CPS: what ports do chef nodes talk to the server on by default?
[2014-03-05 18:00:04 -0500] coderanger: CPS: 443
[2014-03-05 18:04:22 -0500] CPS: coderanger: is this configured somewhere?
[2014-03-05 18:04:30 -0500] CPS: on the server
[2014-03-05 18:04:55 -0500] coderanger: CPS: /etc/chef-server/chef-server.rb which doesn't exist by default
[2014-03-05 18:05:31 -0500] CPS: so if that's not there it listens on 443 by default
[2014-03-05 18:06:27 -0500] coderanger: Yes, and 80 as well though clients don't generally use that
[2014-03-05 18:06:32 -0500] coderanger: 80 is just a redirect to HTTPS
[2014-03-05 18:08:56 -0500] CPS: thanks
[2014-03-05 18:09:57 -0500] shlant: hey coderanger I have a really od problem. chef-solo on vagrant has different files than chef-client on openstack. and because of this my test only exists in vagrant https://gist.github.com/MrMMorris/b5b605b8d30b2e7e1347
[2014-03-05 18:10:00 -0500] shlant: i'm so confused
[2014-03-05 18:10:08 -0500] shlant: thought it was vagrant-cachier
[2014-03-05 18:10:14 -0500] shlant: but I have removed that
[2014-03-05 18:10:56 -0500] shlant: I deleted and reuploaded all roles/cookbooks from scratch
[2014-03-05 18:11:54 -0500] coderanger: shlant: Do you have any version restrictions in production?
[2014-03-05 18:12:08 -0500] coderanger: check the metadata.rb in the cache
[2014-03-05 18:12:13 -0500] coderanger: and ensure its the correct version
[2014-03-05 18:12:27 -0500] Dairenn: Heh.
[2014-03-05 18:12:35 -0500] shlant: yes but the cookbook version in question is correct
[2014-03-05 18:12:41 -0500] shlant: 0.1.0 in prod env
[2014-03-05 18:12:44 -0500] Dairenn: Our devs changed their Jabber chatroom to be strictly devs only; no ops allowed.
[2014-03-05 18:13:13 -0500] shlant: there is only one version and it's correct in the server web portal
[2014-03-05 18:13:56 -0500] shlant: coderanger: everything runs EXACTLY the same, even minitest, but on vagrant there is one test run and on openstack there are none
[2014-03-05 18:15:50 -0500] coderanger: shlant: Check the store cookbook manifest (knife cookbook show <name> <version>) and ensure you see the file in the correct segment
[2014-03-05 18:15:51 -0500] shlant: coderanger:  just ran a new instance on OS and now the files are different from the gist
[2014-03-05 18:16:19 -0500] ShadySQL: guys
[2014-03-05 18:16:24 -0500] ShadySQL: could someone please help me
[2014-03-05 18:16:28 -0500] ShadySQL: I am new to Chef
[2014-03-05 18:16:37 -0500] ShadySQL: and I am trying to upload some cookbooks
[2014-03-05 18:16:42 -0500] ShadySQL: but I get this error
[2014-03-05 18:16:43 -0500] ShadySQL: Errno::EACCES: Permission denied - /Users/rtinoco/.chef/checksums
[2014-03-05 18:16:52 -0500] ShadySQL: google gives me almost nothing
[2014-03-05 18:17:00 -0500] ShadySQL: how could I resolve this?
[2014-03-05 18:17:16 -0500] shlant: ShadySQL: I think you need to add this to knife.rb:
[2014-03-05 18:17:17 -0500] shlant: cache_type               "BasicFile"
[2014-03-05 18:17:17 -0500] shlant: cache_options({ :path => "#{ENV['HOME']}/.chef/checksums", :skip_expires => true })
[2014-03-05 18:18:24 -0500] ShadySQL: at the end?
[2014-03-05 18:18:33 -0500] shlant: ShadySQL: sure
[2014-03-05 18:18:45 -0500] shlant: coderanger: the output is what is expected. All files are there
[2014-03-05 18:19:04 -0500] shlant: it's like it randomly chooses SOME files to upload
[2014-03-05 18:19:12 -0500] shlant: when it bootstraps
[2014-03-05 18:19:13 -0500] coderanger: ShadySQL: You already have that
[2014-03-05 18:19:30 -0500] coderanger: ShadySQL: sudo rm -rf /Users/rtinoco/.chef/checksums
[2014-03-05 18:19:39 -0500] coderanger: ShadySQL: You probably ran knife as root at some point
[2014-03-05 18:20:05 -0500] ShadySQL: :-(
[2014-03-05 18:20:07 -0500] coderanger: ShadySQL: bootstraping uploads nothing, when chef-client runs it should sync all files in the cookbook versions it tries to run
[2014-03-05 18:20:10 -0500] ShadySQL: I said I was new
[2014-03-05 18:20:13 -0500] ShadySQL: sorry guys
[2014-03-05 18:20:19 -0500] ShadySQL: let me append those lines
[2014-03-05 18:20:25 -0500] shlant: ShadySQL: no need for apologies
[2014-03-05 18:20:26 -0500] coderanger: ShadySQL: No, you don't need to add them
[2014-03-05 18:20:28 -0500] ShadySQL: and give it a go once more
[2014-03-05 18:20:31 -0500] coderanger: ShadySQL: Just clear the cache
[2014-03-05 18:20:49 -0500] shlant: coderanger: sorry upload was the wrong word. sync
[2014-03-05 18:21:04 -0500] shlant: it syncs only a random selection from the files dir
[2014-03-05 18:21:16 -0500] coderanger: shlant: It is possible it is a chef-client bug, it would be the first I've heard of it though
[2014-03-05 18:21:33 -0500] coderanger: so that seems unlikely
[2014-03-05 18:21:44 -0500] ShadySQL: ok let me clear the cache
[2014-03-05 18:21:57 -0500] ShadySQL: so I need to do nothing to the knife.rb file?
[2014-03-05 18:22:05 -0500] coderanger: shlant: If you run it with -l debug, so you see it syncing that cookbook?
[2014-03-05 18:22:11 -0500] coderanger: ShadySQL: Probably nothing
[2014-03-05 18:22:18 -0500] ShadySQL: cool
[2014-03-05 18:22:24 -0500] ShadySQL: let me clear the cache then
[2014-03-05 18:22:30 -0500] coderanger: ShadySQL: The default provided knife.rb has all you need for basic chefing
[2014-03-05 18:22:39 -0500] bettyclamp: My chef client has suddenly stopped logging to /var/log/chef/client.log. Any idea why?
[2014-03-05 18:22:51 -0500] shlant: coderanger: i'll give it a try
[2014-03-05 18:23:05 -0500] ShadySQL: same error
[2014-03-05 18:23:05 -0500] ShadySQL: ERROR: Errno::EACCES: Permission denied - /Users/rtinoco/.chef/checksums
[2014-03-05 18:23:12 -0500] ShadySQL: :-((
[2014-03-05 18:23:23 -0500] coderanger: ShadySQL: What command are you running?
[2014-03-05 18:23:34 -0500] ShadySQL: knife cookbook upload --all
[2014-03-05 18:23:43 -0500] bettyclamp: I also tried using the -L and -l flags, but still no log file...
[2014-03-05 18:23:50 -0500] coderanger: ShadySQL: and your username is rtinoco?
[2014-03-05 18:23:54 -0500] ShadySQL: yes
[2014-03-05 18:23:58 -0500] coderanger: ShadySQL: You should have write permissions to your own home dir :)
[2014-03-05 18:24:23 -0500] coderanger: ShadySQL: You can `ls -la` the various folders to check permissions and ownership
[2014-03-05 18:24:24 -0500] ShadySQL: what the
[2014-03-05 18:24:33 -0500] ShadySQL: facepalm
[2014-03-05 18:25:51 -0500] brimstone: ok, seriously, is there a way to prevent nodes from changing their run_list on a chef-server?
[2014-03-05 18:25:58 -0500] coderanger: brimstone: No
[2014-03-05 18:26:03 -0500] brimstone: :(
[2014-03-05 18:26:25 -0500] coderanger: bettyclamp: Hmm, what do you have in your client.rb? (though CLI options should take priority anyway)
[2014-03-05 18:27:14 -0500] evaryont: Anyone know of a pretty way to specify run lists for Vagrant? I have 3 boxes, each with ~15 roles associated, and now the Vagrantfile is over 100 lines long total. Seems noisy :-(
[2014-03-05 18:27:16 -0500] bettyclamp: coderanger: actually, it's STDOUT.
[2014-03-05 18:27:52 -0500] coderanger: evaryont: I think maybe you are misusing roles :)
[2014-03-05 18:28:10 -0500] awc737: How can I make this work for Chef-solo, on a remote server?
[2014-03-05 18:28:11 -0500] awc737: https://github.com/awc737/joomla-vagrant
[2014-03-05 18:28:27 -0500] awc737: the Chef provisioning happens in the Vagrantfile, I want to expose that bit to run on newly provisioned servers
[2014-03-05 18:28:34 -0500] evaryont: coderanger: yeah, it's $WORK's old (chef 0.9) stuff. So in the mean time as we are improving that, I want vagrant nodes up :)
[2014-03-05 18:29:04 -0500] coderanger: evaryont: Heh, you can slightly clean up the code using the %w{} syntax possibly
[2014-03-05 18:29:29 -0500] coderanger: ['role[foo]', 'role[bar]']   becomes   %w{role[foo] role[bar]}
[2014-03-05 18:29:40 -0500] evaryont: mm, right.
[2014-03-05 18:30:11 -0500] coderanger: evaryont: Beyond that, not too much you can do
[2014-03-05 18:30:18 -0500] awc737: ?
[2014-03-05 18:30:23 -0500] evaryont: coderanger: also, who do I poke for a release of Ridley that includes a fix for Hash#slice? I've ran into that error and found your bug report :P
[2014-03-05 18:31:05 -0500] coderanger: evaryont: reset and/or sethvargo
[2014-03-05 18:31:11 -0500] brimstone: thanks coderanger
[2014-03-05 18:31:38 -0500] coderanger: awc737: knife-solo is a popular option
[2014-03-05 18:32:11 -0500] awc737: coderanger: I have knife-solo. I'm just not sure what about my repo structure needs to change
[2014-03-05 18:32:26 -0500] awc737: add a Cheffile? add  .nodes/ dir?
[2014-03-05 18:32:35 -0500] ShadySQL: look
[2014-03-05 18:32:40 -0500] ShadySQL: I am still getting the same error
[2014-03-05 18:32:46 -0500] ShadySQL: what gives
[2014-03-05 18:33:08 -0500] coderanger: ShadySQL: Does "touch ~/.chef/checksums/test" work?
[2014-03-05 18:33:30 -0500] ShadySQL: touch: /Users/rtinoco/.chef/checksums/test: No such file or directory
[2014-03-05 18:33:57 -0500] jbarop_: i'm using chef 11.8.2 and i'm trying to understand this: http://docs.opscode.com/essentials_cookbook_attribute_files.html#Attributes-CookbookAttributes
[2014-03-05 18:34:20 -0500] jbarop_: "Cannot find a resource for include_attribute on debian version 7.3"....
[2014-03-05 18:34:35 -0500] ShadySQL: no it appears that I am missing
[2014-03-05 18:34:40 -0500] ShadySQL: checksums
[2014-03-05 18:35:01 -0500] coderanger: ShadySQL: Does ~/.chef exist?
[2014-03-05 18:35:16 -0500] awc737: ?
[2014-03-05 18:35:17 -0500] ShadySQL: yes
[2014-03-05 18:35:33 -0500] coderanger: jbarop_: You can't use that from a recipe file nor do you need to
[2014-03-05 18:36:03 -0500] coderanger: ShadySQL: If you stat ~/.chef, what is the owner/perms?
[2014-03-05 18:36:32 -0500] ShadySQL: 16777217 41016871 drwxr-xr-x 2 root staff 0 68 "Feb 24 21:35:13 2014" "Feb 24 21:35:13 2014" "Feb 24 21:35:13 2014" "Feb 24 21:35:13 2014" 4096 0 0 /Users/rtinoco/.chef
[2014-03-05 18:37:18 -0500] jbarop_: coderanger: so how is properly done? i want to write a wrapper recipe which installs some recipes with certain attributs
[2014-03-05 18:37:31 -0500] coderanger: ShadySQL: Note that it is owned by root :)
[2014-03-05 18:37:38 -0500] coderanger: ShadySQL: Fix that
[2014-03-05 18:38:08 -0500] coderanger: jbarop_: All attribute files from all needed cookbooks are loaded before recipe code
[2014-03-05 18:38:55 -0500] coderanger: jbarop_: Back in chef 0.9 days include_attribute was needed because chef would load them in effectively a random order, but in chef 10 that was fixed to be topological sort order
[2014-03-05 18:39:14 -0500] ShadySQL: I am on a MAC
[2014-03-05 18:39:18 -0500] ShadySQL: I ran only a
[2014-03-05 18:39:24 -0500] ShadySQL: chown rtinoco:admin
[2014-03-05 18:39:32 -0500] ShadySQL: put after I run
[2014-03-05 18:39:38 -0500] ShadySQL: stat ~/.chef
[2014-03-05 18:39:42 -0500] ShadySQL: still shows root
[2014-03-05 18:40:21 -0500] coderanger: ShadySQL: sudo chown rtinoco:admin ~/.chef
[2014-03-05 18:40:42 -0500] ShadySQL: jeez
[2014-03-05 18:40:43 -0500] coderanger: Probably wouldn't hurt to throw in a -R too
[2014-03-05 18:40:46 -0500] ShadySQL: it likes sudo
[2014-03-05 18:40:46 -0500] jbarop_: coderanger: okay. understood. but the recipe i want to use has an attribute which i need to set before including it. furthermore i want to override some of the defaults.
[2014-03-05 18:40:47 -0500] coderanger: (recursive)
[2014-03-05 18:40:48 -0500] ShadySQL: ok
[2014-03-05 18:40:53 -0500] shlant: coderanger: In the endless sea of checksums and json, I found this: "files/default/tests/system_test.rb"=>{"name"=>"system_test.rb", "path"=>"files/default/tests/system_test.rb", "checksum"=>"92a05bc11b47618ac3873b41c13b0c07", "specificity"=>"tests",
[2014-03-05 18:40:53 -0500] jbarop_: coderanger: like so: http://pastebin.com/WNh3qenP
[2014-03-05 18:40:56 -0500] awc737: Can anyone recommend how to update this structure, to handle remote servers?
[2014-03-05 18:41:01 -0500] coderanger: ShadySQL: You need to be root to change the owner of root-owned files
[2014-03-05 18:41:03 -0500] awc737: https://github.com/awc737/joomla-vagrant
[2014-03-05 18:41:04 -0500] jbarop_: coderanger: but i'm unable to getting it to work.
[2014-03-05 18:41:31 -0500] coderanger: awc737: Please go read the docs for knife-solo
[2014-03-05 18:41:38 -0500] jbarop_: coderanger: thanks for you support btw
[2014-03-05 18:42:15 -0500] coderanger: jbarop_: what isn't working?
[2014-03-05 18:42:34 -0500] awc737: jbarop_: I understand and have used knife-solo, in a basic tutorial
[2014-03-05 18:42:53 -0500] awc737: My question, is how to update my repository structure, so that it handles Vagrant (as it does) AND remote servers
[2014-03-05 18:43:04 -0500] coderanger: awc737: The two are unrelated
[2014-03-05 18:43:16 -0500] shlant: jbarop_: I think it's because ['postgresql']['password']['postgres'] is a hash?
[2014-03-05 18:43:23 -0500] awc737: coderanger: but one repository, setup correctly should be able to handle both...
[2014-03-05 18:43:24 -0500] shlant: not sure what that means for overriding
[2014-03-05 18:43:34 -0500] awc737: ls
[2014-03-05 18:43:45 -0500] ShadySQL: ok she's ok now
[2014-03-05 18:43:46 -0500] coderanger: awc737: Sure, but you just have to setup knife-solo as per normal
[2014-03-05 18:43:50 -0500] ShadySQL: thanks code ranger
[2014-03-05 18:43:51 -0500] awc737: e.g, should I move my Chef provisioning OUT of Vagrantfile?
[2014-03-05 18:43:52 -0500] ShadySQL: you the man!
[2014-03-05 18:43:58 -0500] awc737: and call it from Vagrantfile?
[2014-03-05 18:44:05 -0500] coderanger: awc737: Vagrant cannot provision a remote server
[2014-03-05 18:44:09 -0500] coderanger: That isn't what it does
[2014-03-05 18:44:15 -0500] ShadySQL: could you please point me to a good resource on how to bootstrap windows?
[2014-03-05 18:44:22 -0500] coderanger: awc737: You just duplicate things in both places
[2014-03-05 18:44:24 -0500] awc737: I know, but my Vagrantfile has all the same provisioning config I want to use for remote servers
[2014-03-05 18:44:32 -0500] awc737: was wondering if I could reference the same file
[2014-03-05 18:44:40 -0500] coderanger: awc737: No
[2014-03-05 18:44:53 -0500] awc737: in both places, being once in Vagrantfile and once in nodes/site.json ?
[2014-03-05 18:44:58 -0500] coderanger: awc737: Yep
[2014-03-05 18:45:18 -0500] coderanger: ShadySQL: knife should be able to do it as long as WinRM is running
[2014-03-05 18:45:35 -0500] coderanger: okay, gotta run to $DAYJOB, back in a bit
[2014-03-05 18:46:00 -0500] awc737: coderanger: Isn't Berkshelf a newer alternative to knife?
[2014-03-05 18:46:05 -0500] awc737: Can I use that instead of knife-solo?
[2014-03-05 18:46:16 -0500] jbarop_: coderanger: everything besides node.override['postgresql']['password']['postgres'] is ignored
[2014-03-05 18:46:19 -0500] shlant: awc737: berkshelf is like a bundler for cookbooks
[2014-03-05 18:46:49 -0500] jbarop_: for example it tries to install version 9.1
[2014-03-05 18:47:04 -0500] awc737: shlant: I've been using it instead of knife for Vagrant
[2014-03-05 18:47:49 -0500] awc737: shlant: does knife do everything Berkshelf does? can I eliminate berkshelf?
[2014-03-05 18:48:52 -0500] shlant: jbarop_: I think that attribute (password) is broken.
[2014-03-05 18:49:01 -0500] shlant: from the postgrsql README:
[2014-03-05 18:49:02 -0500] shlant: If you're using `chef server`, if the attribute
[2014-03-05 18:49:02 -0500] shlant: `node['postgresql']['password']['postgres']` is not found,
[2014-03-05 18:49:03 -0500] shlant: the recipe generates a random password and performs a node.save.
[2014-03-05 18:49:04 -0500] shlant: (TODO: This is broken, as it disables the password.)
[2014-03-05 18:49:25 -0500] shlant: you might just have to use the randomly generated password for now
[2014-03-05 18:49:38 -0500] jbarop_: i'm using chef-solo and i have to set ['postgresql']['password']['postgres'] wich is the only thing what works
[2014-03-05 18:49:54 -0500] shlant: awc737: berkshelf allows you to reference cookbooks without having them locally
[2014-03-05 18:50:01 -0500] awc737: oh ok
[2014-03-05 18:50:02 -0500] shlant: is has nothing to do with knife
[2014-03-05 18:50:15 -0500] awc737: shlant:well berkshelf also handles dependencies right? Does knife?
[2014-03-05 18:50:22 -0500] shlant: instead of having a bunch of community cookbooks in your repo, you just have aberksfile that refs those cookboos
[2014-03-05 18:50:37 -0500] shlant: awc737: berkshelf handles deps, yes
[2014-03-05 18:50:42 -0500] shlant: not sure what you mean by knife deps
[2014-03-05 18:50:58 -0500] awc737: handle dependencies, if I'm not using berkshelf
[2014-03-05 18:51:13 -0500] awc737: I'm wondering if using Berkshelf will work, will all my cookbooks install on a remote server, which may not have berkshelf installed
[2014-03-05 18:52:16 -0500] shlant: see Integration with Berkshelf & Librarian here: http://matschaffer.github.io/knife-solo/
[2014-03-05 18:52:28 -0500] tcate: does anyone know what syntax rbenv-cookbook is expecting for options on rbenv_gem?
[2014-03-05 18:52:57 -0500] awc737: thanks!
[2014-03-05 18:53:12 -0500] shlant: tcate: rbenv_gem "bundler" do
[2014-03-05 18:53:13 -0500] shlant:   ruby_version "1.9.3-p194"
[2014-03-05 18:53:13 -0500] shlant: end
[2014-03-05 18:53:31 -0500] awc737: ah, the tutorial I was using used librarian-chef
[2014-03-05 18:53:34 -0500] shlant: I assume you could just have rbenv_gem "bundler" for the latest version
[2014-03-05 18:53:38 -0500] tcate: yeah, but there's an options that takes a hash, but I have no idea how it wants me to pass "-f" as a hash
[2014-03-05 18:53:40 -0500] awc737: so shlant I can replace librarian-chef with Berkshelf right
[2014-03-05 18:53:55 -0500] shlant: awc737: correct
[2014-03-05 18:54:36 -0500] shlant: tcate: what option?
[2014-03-05 18:54:40 -0500] tcate: -f
[2014-03-05 18:54:51 -0500] tcate: there is an attribute named "options"
[2014-03-05 18:54:59 -0500] shlant: oh yes
[2014-03-05 18:55:02 -0500] tcate: for options to add to the gem command
[2014-03-05 18:55:16 -0500] tcate: but because my gem wants to upgrade rake it stops chef and wants someone to hit Y
[2014-03-05 18:55:31 -0500] bettyclamp: EncryptedDataBagItem is not decrypting data in my recipe, even though I'm following the instructions on http://docs.opscode.com/chef/essentials_data_bags.html#store-keys-on-nodes. Any idea why?
[2014-03-05 18:55:32 -0500] shlant: and rbenv_gem "foo" do options "-f" end doesn't work?
[2014-03-05 18:55:38 -0500] shlant: tcate: ^
[2014-03-05 18:56:45 -0500] tcate: Option options must be a kind of Hash!  You passed "-f".
[2014-03-05 18:57:01 -0500] bettyclamp: Instead, what comes out of the call to 'load' is data that is still encrypted.
[2014-03-05 18:57:14 -0500] awc737: shlant: is Cheffile something specific to librarian-chef
[2014-03-05 18:57:35 -0500] tcate: I've been bashing away at every way I can come up with to feed that option, it always either doesn't like that it's not a hash, or doesn't actually use it on the gem command
[2014-03-05 18:57:40 -0500] awc737: I wonder if I need it, or just keep my Vagrantfile, and create the nodes/site.dev
[2014-03-05 18:58:09 -0500] shlant: awc737: yea, librarian uses Cheffile, Berkshelf uses Berksfile
[2014-03-05 18:58:15 -0500] awc737: cool thanks
[2014-03-05 19:00:13 -0500] awc737: what is with this syntax?
[2014-03-05 19:00:20 -0500] awc737: :server_root_password => 'rootpass',
[2014-03-05 19:00:28 -0500] awc737: I'm no Ruby programmer, but that's not JSON. and can I use JSON
[2014-03-05 19:01:42 -0500] shlant: awc737: where is that from?
[2014-03-05 19:01:59 -0500] awc737: a Vagrantfile
[2014-03-05 19:02:10 -0500] shlant: tcate: yea, ruby isn't my strong suite either ;)
[2014-03-05 19:02:12 -0500] awc737: https://github.com/awc737/joomla-vagrant/blob/master/Vagrantfile
[2014-03-05 19:02:17 -0500] awc737: down under chef.json = {
[2014-03-05 19:03:41 -0500] shlant: awc737: you can do 'server_root_password': 'rootpass',
[2014-03-05 19:03:48 -0500] awc737: thanks
[2014-03-05 19:03:55 -0500] shlant: i think...
[2014-03-05 19:06:48 -0500] bettyclamp: Help anyone?
[2014-03-05 19:06:51 -0500] bettyclamp: (Above?)
[2014-03-05 19:12:48 -0500] zmalone: I've got a customer right now who is on an Enterprise hosted account, and their CTO left.  Unfortunately, he didn't fully delegate admin privs before he did so.  They've got an outage right now, and need to make some changes to get things back online, and just called for support, but got an answering machine.
[2014-03-05 19:13:10 -0500] zmalone: Is there anyone from opscode here who might be able to help get ahold of them and work out the verification of account ownership?
[2014-03-05 19:13:48 -0500] troyready: bettyclamp, this is the sort of answer I hate to give, but I'd recommend looking at using chef-vault instead: https://github.com/Nordstrom/chef-vault
[2014-03-05 19:14:36 -0500] troyready: It's workflow is so much better (in the opinion of many people, including myself). Doesn't really answer your question directly, but I hope that can help
[2014-03-05 19:30:01 -0500] bettyclamp: troyready: Thanks, but that's not an option for me right here and now.
[2014-03-05 19:31:13 -0500] bettyclamp: What I'm seeing is that the private key is decrypted, but that a newline is tacked on to the end of it in the compiled resource (jenkins_private_key_credentials). Should things really happen that way?
[2014-03-05 19:37:46 -0500] kewubenduben: for test-kitchen. How do you specificy/structure a serverspec test that applies for all suite?
[2014-03-05 19:43:26 -0500] atomic-penguin: kewubenduben, I don't think you do.  Because, maybe if you are running the same test on different suites, than maybe your suites aren't that different after all
[2014-03-05 19:44:02 -0500] atomic-penguin: kewubenduben, like examine why you need different suites, if you have to run the same tests against each.
[2014-03-05 19:46:00 -0500] shlant: anyone know the difference between %sudo ALL=(ALL) ALL and %sudo ALL=(ALL:ALL) ALL?
[2014-03-05 19:46:05 -0500] shlant: in sudoers
[2014-03-05 19:46:58 -0500] kbarry: I'm trying to configure the domain search order, I am very very new to liux
[2014-03-05 19:47:09 -0500] kbarry: i know how this is done in windows, but i am unsure what its called in linux
[2014-03-05 19:47:22 -0500] kbarry: I can probably find the answer i'm looking for with a little shove in the right direction.
[2014-03-05 19:48:05 -0500] kbarry: i keep seeing mention of resolv.conf
[2014-03-05 19:49:30 -0500] zmalone: resolv.conf will define domain search order and DNS servers
[2014-03-05 19:49:42 -0500] divbell: man resolv.conf for all the options
[2014-03-05 19:50:07 -0500] divbell: but "search domain.com" will cause a "ping foo" to search "foo.domain.com"
[2014-03-05 19:50:25 -0500] divbell: and you can have multiple "nameserver 8.8.8.8" lines to define your DNS servers
[2014-03-05 19:50:46 -0500] zmalone: search isn't super heavily used these days, most people (justly) choose to have their applications use FQDN
[2014-03-05 19:50:58 -0500] divbell: if you're using DHCP, this file is likely autogenerated, and you can override what the dhcp lease provides in dhclient.conf
[2014-03-05 19:51:40 -0500] divbell: ^ kbarry
[2014-03-05 19:51:55 -0500] kbarry: we are not using dhcp
[2014-03-05 19:52:39 -0500] kbarry: i think i am actually talking about something slightly different
[2014-03-05 19:52:40 -0500] kbarry: standby
[2014-03-05 19:55:23 -0500] kbarry: I'm looking for the suffix search order
[2014-03-05 19:55:32 -0500] kbarry: for when short names are used,
[2014-03-05 19:55:36 -0500] kbarry: server01
[2014-03-05 19:55:52 -0500] kbarry: if i had domain.net, and the acme.org
[2014-03-05 19:56:08 -0500] kbarry: it would first look for server01.domain.net, and then for server01.acme.org
[2014-03-05 19:56:27 -0500] kbarry: appending the suffixes to perform its search
[2014-03-05 19:56:47 -0500] kbarry: Is this the function of the resolv.conf?
[2014-03-05 19:59:32 -0500] btm: Chef/Ohai Code Review: Join: bit.ly/1eXBt7j watch: bit.ly/1eXBrwj
[2014-03-05 19:59:59 -0500] kewubenduben: atomic-penguin, thanks for pointing that out. But I do need at least a few that should be for all. Will putting it in something like a shared spec_helper be good enough to start?
[2014-03-05 20:02:45 -0500] divbell: kbarry, definitely check resolv.conf, you want the "search" option
[2014-03-05 20:02:46 -0500] divbell: The search list is currently limited to six domains with a total of 256 characters.
[2014-03-05 20:02:59 -0500] divbell: kbarry, that is, type: man resolv.conf
[2014-03-05 20:03:41 -0500] kbarry: divbell: thanks for the help.
[2014-03-05 20:04:04 -0500] kbarry: How are yall handling this in your environments?
[2014-03-05 20:04:07 -0500] kbarry: template?
[2014-03-05 20:04:15 -0500] kbarry: is there a handy dandy cookbook?
[2014-03-05 20:04:37 -0500] divbell: dhcp
[2014-03-05 20:08:26 -0500] atomic-penguin: kewubenduben, might break it out into a common_spec, I don't see any reason it has to go into a helper file.   I don't really know, haven't played too much with serverspec
[2014-03-05 20:09:21 -0500] kewubenduben: atomic-penguin, thanks.
[2014-03-05 20:10:30 -0500] awc737: When I run "knife solo cook root@domain", it asks my password so many times
[2014-03-05 20:15:36 -0500] awc737: How can I stop knife solo from asking my password
[2014-03-05 20:17:19 -0500] teukka: awc737: use ssh keys
[2014-03-05 20:18:16 -0500] teukka: there's no (easy) way knife-solo can pass the password to all the rsync commands it invokes
[2014-03-05 20:18:16 -0500] awc737: I do have an ssh key for myuser
[2014-03-05 20:18:33 -0500] awc737: but I run this as root, otherwise it requires me to sudo
[2014-03-05 20:18:58 -0500] teukka: knfe-solo automatically calls sudo
[2014-03-05 20:19:11 -0500] awc737: hmm, ok i'll try again that way
[2014-03-05 20:19:13 -0500] awc737: not sure why it denied
[2014-03-05 20:19:25 -0500] teukka: maybe I didn't understand what you mean
[2014-03-05 20:19:42 -0500] awc737: if it calls sudo on each command, it should work fine as my user, with ssh key
[2014-03-05 20:45:24 -0500] Dairenn: Quick question...  If I want to use a different version of a cookbook in a certain Chef environment, what does the JSON for that look like in the run_list of a role?
[2014-03-05 20:47:13 -0500] mattupstate: Dairenn: it doesn't, it goes in your environment file
[2014-03-05 20:50:46 -0500] Dairenn: Ah ha.
[2014-03-05 20:51:47 -0500] Dairenn: (No sarc, heh.)
[2014-03-05 21:14:26 -0500] zanshin: Can I pass a template file into a LWRP? I've got an application deployment cookbook that has the SSL config for nginx that it needs to pass into a LWPR I'm creating for the purpose of setting up that site's configuration.
[2014-03-05 21:15:47 -0500] shlant: is there are 3-4 recipes that are in every role, would it be best to merge them all into a "base" recipe?
[2014-03-05 21:15:56 -0500] shlant: if*
[2014-03-05 21:16:32 -0500] coderanger: zanshin: Not sure what you mean, but the answer is probably yes
[2014-03-05 21:16:43 -0500] coderanger: shlant: Yeah, thats pretty common
[2014-03-05 21:16:44 -0500] zanshin: shlant: Maybe create a base role that contains those recipes.
[2014-03-05 21:18:02 -0500] zanshin: coderanger: In cookbook foo, I've got ../template/default/config.erb, and I want to use bar_lwrp and pass it config.erb.
[2014-03-05 21:18:36 -0500] coderanger: zanshin: Sure, just pass both the source and cookbook arguments to the underlying template resource
[2014-03-05 21:18:51 -0500] zanshin: coderanger: Thanks.
[2014-03-05 21:21:24 -0500] awc737: does this syntax look accurate?
[2014-03-05 21:21:25 -0500] awc737: docroot node[:precise64-lamp][:webroot] + '/site'
[2014-03-05 21:22:52 -0500] coderanger: awc737: That should work, though it isn't very idiomatic
[2014-03-05 21:23:00 -0500] coderanger: Oh, no
[2014-03-05 21:23:09 -0500] coderanger: you can't have -s in symbols
[2014-03-05 21:23:14 -0500] awc737: darnn
[2014-03-05 21:23:30 -0500] coderanger: docroot "#{node['precise64-lamp']['webroot']}/site"
[2014-03-05 21:23:36 -0500] awc737: sweet!
[2014-03-05 21:23:38 -0500] coderanger: Thats the idiomatic way to do it
[2014-03-05 21:23:47 -0500] awc737: what about in the Vagrantfile?
[2014-03-05 21:23:51 -0500] awc737: :precise64-lamp => {
[2014-03-05 21:23:51 -0500] awc737:         :webroot => vconfig['webroot']
[2014-03-05 21:23:57 -0500] coderanger: note using strings instead of symbols for attrs, and using string interpolation
[2014-03-05 21:24:50 -0500] awc737: hmm?
[2014-03-05 21:25:08 -0500] coderanger: Use strings for the keys, not symbols
[2014-03-05 21:25:23 -0500] awc737: are you talking about in my Vagrantfile?
[2014-03-05 21:25:33 -0500] coderanger: Both
[2014-03-05 21:25:47 -0500] awc737: I'm using symbols?
[2014-03-05 21:25:54 -0500] coderanger: Yes
[2014-03-05 21:26:02 -0500] coderanger: :foo is called a symbol in Ruby
[2014-03-05 21:26:19 -0500] awc737: oh, well as long as it works
[2014-03-05 21:26:26 -0500] awc737: will the value side of that key work?
[2014-03-05 21:26:35 -0500] awc737: I will switch them all to strings though
[2014-03-05 21:26:39 -0500] coderanger: Except what you wrote doesn't work
[2014-03-05 21:26:56 -0500] coderanger: :foo-bar is invalid syntax, or at least not the syntax you mean
[2014-03-05 21:27:02 -0500] coderanger: thats :foo - bar
[2014-03-05 21:27:07 -0500] coderanger: which isn't a thing that makes sense
[2014-03-05 21:29:21 -0500] awc737: oh I see
[2014-03-05 21:37:02 -0500] mjuszczak: Curious about host naming schemes, particularly around the berkshelf method and lack of data from chef search.  I'm trying to decide between one of the following naming schemes - would picking one over the other help me as we transition to chef?  For instance, I know that some cookbooks allow you to filter firewall rules and such based on hostnames.
[2014-03-05 21:37:53 -0500] mjuszczak: Trying to decide between: role-randomword.appname, role-randomword.datacenter, or role-randomword.appname.datacenter.  Trying to decide if putting datacenter (physical location) is that important in a public cloud world.  I just feel like at some point I may get to the point where I want a chef server at each provider.
[2014-03-05 21:40:01 -0500] coderanger: mjuszczak: We use <cfn stackname>-<ip>
[2014-03-05 21:40:09 -0500] euphy: can someone help me with a conditional in a template.  i'm trying to check if an attribute exists and if it does not write out static entries in a host file.  https://gist.github.com/mcuerdon/a47fad9982659986b37b
[2014-03-05 21:40:38 -0500] coderanger: euphy: Drop the attribute?
[2014-03-05 21:40:49 -0500] coderanger: Just set nil as the default value in your attrs file
[2014-03-05 21:41:19 -0500] mjuszczak: cfn stackname?
[2014-03-05 21:41:20 -0500] euphy: is there a way to not have to set default attributes.
[2014-03-05 21:41:51 -0500] mjuszczak: Oh, cloud formations
[2014-03-05 21:43:13 -0500] coderanger: mjuszczak: Yeah
[2014-03-05 21:43:20 -0500] coderanger: euphy: Technically yes, but don't do that
[2014-03-05 21:43:50 -0500] euphy: ok, thanks.
[2014-03-05 21:47:17 -0500] mjuszczak: coderanger: you don't put data center in the hostnames at all?  What if you guys go elsewhere other than AWS?  Or use multiple regions?
[2014-03-05 21:47:34 -0500] coderanger: mjuszczak: thats coded into the stack name already
[2014-03-05 21:47:36 -0500] mjuszczak: And want to run a chef server in each region, for instance
[2014-03-05 21:47:56 -0500] mjuszczak: ah
[2014-03-05 21:48:43 -0500] mjuszczak: coderanger: What if you weren't using AWS?  We're using Rackspace.  Would you then include data center?
[2014-03-05 21:49:05 -0500] coderanger: mjuszczak: It would be baked into the Heat group name, bu same difference
[2014-03-05 21:49:52 -0500] mjuszczak: coderanger: Yeah, we've thought about using heat, but haven't yet.
[2014-03-05 21:50:10 -0500] mjuszczak: openstack heat, I assume?
[2014-03-05 21:51:38 -0500] coderanger: mjuszczak: Yeah
[2014-03-05 21:51:48 -0500] mjuszczak: What's an example heat group name, if you don't mind me asking?
[2014-03-05 21:52:03 -0500] mjuszczak: The problem is, we have some servers which are cattle (IE: spin up/spin down) and others which are more persistent, such as MySQL servers.
[2014-03-05 21:52:59 -0500] coderanger: mjuszczak: Our persistent servers are just ASGs with a min and max capacity of 1 :)
[2014-03-05 21:55:06 -0500] mjuszczak: ASG?
[2014-03-05 21:55:11 -0500] coderanger: autoscaling group
[2014-03-05 21:55:59 -0500] mjuszczak: ahh
[2014-03-05 21:58:01 -0500] mjuszczak: What format is being used for the stack name?
[2014-03-05 21:59:39 -0500] coderanger: heh, to fully expand it role-chefenv-location-iteration-ip
[2014-03-05 22:00:50 -0500] mjuszczak: gotcha
[2014-03-05 22:07:18 -0500] mjuszczak: thanks :)
[2014-03-05 22:07:58 -0500] cheflevelramen: 9
[2014-03-05 22:12:11 -0500] mjuszczak: coderanger: curious, why wouldn't you split out the naming?  role-iteration.chefenv.location.TLD, for instance.
[2014-03-05 22:12:44 -0500] coderanger: mjuszczak: SSL
[2014-03-05 22:17:56 -0500] evaryont: coderanger: pfft, just buy a cert for *.com, easy :D
[2014-03-05 22:18:39 -0500] coderanger: evaryont: wildcards aren't recursive
[2014-03-05 22:18:57 -0500] evaryont: coderanger: they were until everyone realized what a bad idea it was.
[2014-03-05 22:19:04 -0500] coderanger: evaryont: Indeed :)
[2014-03-05 22:33:25 -0500] kbarry: W want to ask how you might do this. I need to change the root password. I am currently planning on using the bash resource, and code ' usermod -p [encrypted password] root'
[2014-03-05 22:33:53 -0500] atawmic: hey, if i'm running chef server 11.02 on centos, will there be any problem upgrading to 11.10 using the rpm?
[2014-03-05 22:34:03 -0500] atawmic: will it overwrite any of my current configuration, or will it just work?
[2014-03-05 22:34:11 -0500] atawmic: i don't see any documentation on upgrading between versions 11
[2014-03-05 22:46:58 -0500] aneto: Hello, I have a question about hosted chef. After a chef run failing because of a missing recipe in a specific cookbook version, I log into the management web ui and notice the wrong version is there... no biggie I reupload the new version and notice that 0.1.3 is there now which is correct but now all my prior versions are missing.
[2014-03-05 22:47:26 -0500] coderanger: aneto: Where are you looking?
[2014-03-05 22:47:42 -0500] aneto: https://manage.opscode.com/cookbooks
[2014-03-05 22:48:04 -0500] aneto: there are two columns latest version and other version
[2014-03-05 22:48:57 -0500] bxraabe: atawmic: I don't think the RPM touches the configuration or data, so you should be able to `rpm -e chef-server-11.0.2` and then install the new rpm, and then run `chef-server-ctl reconfigure`
[2014-03-05 22:49:17 -0500] aneto: using knife cookbook show foo, also only shows the one version
[2014-03-05 22:49:17 -0500] bxraabe: I would test on a vagrant box or something first though
[2014-03-05 22:52:45 -0500] bxraabe: anyone on with experience managing mixed windows/linux environments?
[2014-03-05 22:54:25 -0500] jtran: i have a role "foo" with override_attributes and run_list "recipe[bar]".   If i do a chef-client -j foo.json when the chef-client run executes it doesn't see any of the override attributes.   HOWEVER, if i upload the role into chef-server, and then chef-client -o role[foo] , the chef-client run sees the override attrs just fine.
[2014-03-05 22:54:39 -0500] jtran: is this intended behavior for chef-client -j foo.json to not see override attrs?
[2014-03-05 22:59:01 -0500] bxraabe: jtran: what does your foo.json look like?  {"run_list":"role[foo]"}
[2014-03-05 23:01:19 -0500] jtran: bxraabe:  http://pastebin.com/vVUuXydD
[2014-03-05 23:01:58 -0500] jtran: bxraabe:  notably i had to remove   "json_class": "Chef::Role",
[2014-03-05 23:02:04 -0500] jtran: otherwise chef-client -j wouldn't take it.
[2014-03-05 23:02:16 -0500] jtran: do u think that's related to why it isn't reading the override attributs?
[2014-03-05 23:02:17 -0500] bxraabe: ah, ok so that's the literal role's json definition
[2014-03-05 23:02:35 -0500] bxraabe: which is not what you want to pass in to chef-client
[2014-03-05 23:03:09 -0500] jtran: bxraabe: oh.  so -j isn't meant to pass a role.  that does make sense
[2014-03-05 23:03:48 -0500] bxraabe: Yeah, -j is for passing in a json configuration file
[2014-03-05 23:04:09 -0500] Majost: how do I check the return status from a run_command call?
[2014-03-05 23:04:21 -0500] jtran: i guess i'm unclear what the json config file is for, bxraabe  .  node json only?  not roles?
[2014-03-05 23:04:55 -0500] jtran: so using the -j i'd like to be able to 1) override attributes 2) then execute recipe with those attrs
[2014-03-05 23:04:59 -0500] jtran: is that possible?
[2014-03-05 23:05:15 -0500] bxraabe: correct, it's what you want to use as a starting blueprint for that node. You can give it a run_list, and a set of attributes
[2014-03-05 23:05:16 -0500] Majost: .exitstatus?
[2014-03-05 23:05:52 -0500] bxraabe: if the role has what you want to use, then you can just pass the json I mentioned above
[2014-03-05 23:06:03 -0500] bxraabe: provided the role has been uploaded to your chef server
[2014-03-05 23:06:08 -0500] jtran: right i'm trying to avoid uploading the role, bxrabe, since is temporary one time run
[2014-03-05 23:06:15 -0500] bxraabe: ok
[2014-03-05 23:06:55 -0500] jtran: so if i update the json so that it's not 'chef_type: role" , and feed it to chef-client -j it still doesn't seem to pickup the override attrs
[2014-03-05 23:07:59 -0500] bxraabe: jtran, one sec and I'll have an example json for you
[2014-03-05 23:08:07 -0500] jtran: kk thx bxraabe
[2014-03-05 23:10:14 -0500] bxraabe: jtran: try using this as your json file content - http://pastebin.com/2SYi8rvq
[2014-03-05 23:11:38 -0500] jtran: intersting, so u don't have to specify the override_attrs key
[2014-03-05 23:12:28 -0500] jtran: bxraabe:  bingo that did it!  thanks !
[2014-03-05 23:13:27 -0500] bxraabe: awesome
[2014-03-05 23:13:34 -0500] bxraabe: np
[2014-03-05 23:17:03 -0500] fclausen: hello all - is there a way to notify a service to stop totally and then restart? Instead of "notifies :restart". The reason is that upstart will restart services but not pick up new arguments to a command (in the upstart service config) unless totally stopped and started.
[2014-03-05 23:17:36 -0500] coderanger: fclausen: notifies :stop  \n notifies :start
[2014-03-05 23:17:46 -0500] coderanger: flaccid: Or change your service restart command to stop && start
[2014-03-05 23:18:55 -0500] fclausen: @coderanger: thanks for the info - I did not know I could specify multiple notifies. I will try that first; otherwise change the service restart command
[2014-03-05 23:19:34 -0500] mjuszczak: coderanger: We ended up choosing service-role-increment.datacenter.<environment>.TLD (environment is optional, only filled in if not prod).  I felt data center was worth keeping separate even though we need to buy separate wildcards for it, just so we can do some fun search in /etc/resolv.conf stuff.  Any major objections to that?
[2014-03-05 23:20:03 -0500] coderanger: mjuszczak: Yes, that is incompatible with SSL wildcard certs
[2014-03-05 23:20:12 -0500] coderanger: Unless you buy a ton of them
[2014-03-05 23:21:21 -0500] coderanger: mjuszczak: You can decide thats not important, but you would be shooting yourself in the foot when you want to SSL-ize internal services :-)
[2014-03-05 23:22:31 -0500] mjuszczak: coderanger: Well, right now we only have one data center (Rackspace Cloud, DFW).  Adding some EC2 servers here shortly... wanted a naming scheme that was cross-provider compatible.
[2014-03-05 23:22:56 -0500] coderanger: Sure, just saying that you don't get a ton from having a hierarchy
[2014-03-05 23:23:06 -0500] coderanger: Just s/./-/ for most of it
[2014-03-05 23:24:15 -0500] mjuszczak: so like, <service>-<role>-<dataCenter>-<randomGUID>.TLD? (and *.int.TLD for internal DNS?)
[2014-03-05 23:29:52 -0500] euphy: another question.  i was able to get the conditional working by setting the attribute to nil, but when i try to nest the hash more i it no longer runs. https://gist.github.com/mcuerdon/a47fad9982659986b37b
[2014-03-05 23:30:14 -0500] euphy: only thing changed was node['api']['eng']['hostfile']
[2014-03-05 23:31:04 -0500] euphy: even trying this fails. <% #puts node['api']['eng']['hostfile'].inspect %>
[2014-03-05 23:31:46 -0500] euphy: without the #
[2014-03-05 23:35:42 -0500] coderanger: mjuszczak: Yeah, except use separate TLDs for internal and external
[2014-03-05 23:36:01 -0500] coderanger: mjuszczak: balancedpayments.com is for customer-facing sutff, vandelay.io is for internal (for us)
[2014-03-05 23:36:10 -0500] coderanger: mjuszczak: This is important for security due to how cookies work
[2014-03-05 23:45:08 -0500] mjuszczak: coderanger: ah, intriguing.  Would you ALWAYS put environment in the hostname?  IE prd vs stg?
[2014-03-05 23:45:26 -0500] coderanger: Yes
[2014-03-05 23:45:31 -0500] mjuszczak: We were thinking of only mentioning environment if it isn't prd, otherwise just leaving it out
[2014-03-05 23:45:51 -0500] coderanger: With exceptions for a few things that exist outside of any environment like our NAT boxes
[2014-03-05 23:46:39 -0500] mjuszczak: coderanger: We are using a separate TLD for our customer facing app vs our infrastructure. Our public DNS records would be company.land and our internal would be int.company.land, but still entirely dedicated to infrastructure.  Are you saying have a separate domain for internal DNS records too vs public DNS?
[2014-03-05 23:47:03 -0500] coderanger: mjuszczak: It needs to be a separate TLD entirely
[2014-03-05 23:47:28 -0500] coderanger: mjuszczak: Otherwise you risk internal compromises cascading due to HTTP cookies not following same-origin policy
[2014-03-05 23:47:51 -0500] coderanger: Unfortunate and annoying, but dems da breaks
[2014-03-05 23:59:12 -0500] Otterley: is anyone aware of a way to access the current client object in a resource?
[2014-03-05 23:59:28 -0500] coderanger: Otterley: What do you mean?

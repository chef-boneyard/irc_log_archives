[2014-03-09 03:10:58 -0400] rbowlby: first time using foodcritic, ran against a recipe that had "ervice" instead of service
[2014-03-09 03:11:03 -0400] rbowlby: and it didn't complain :(
[2014-03-09 03:11:14 -0400] rbowlby: am I doing it wrong?
[2014-03-09 03:20:39 -0400] rbowlby: it would appear it does not do that, knife cookbook test does not warn on that either
[2014-03-09 03:20:56 -0400] rbowlby: what would warn on a non-existent resource?
[2014-03-09 03:21:18 -0400] rbowlby: I'm coming from puppet and the puppet parser would warn me in VIM on write
[2014-03-09 03:21:54 -0400] rbowlby: looking for something equiv to 'puppet parser validate' that I can run on file write within VIM
[2014-03-09 03:44:51 -0400] mveitas: rbowlby, foodcritic will perform linting and some rules checks. It is not meant to catch syntax errors necessarily
[2014-03-09 03:45:06 -0400] mveitas: you can use knife cookbook test to check for syntax errors
[2014-03-09 03:45:53 -0400] rbowlby: mveitas, thanks
[2014-03-09 03:46:13 -0400] rbowlby: just tried knife cookbook test on a mistyped "ervice" resource
[2014-03-09 03:46:18 -0400] rbowlby: it did not complain
[2014-03-09 03:47:19 -0400] creamridge: hey all, anyone know what version of postgresql chef can install to centos 5.5?  from the community cookbooks i see the latest needs to be centos >=6
[2014-03-09 03:47:24 -0400] rbowlby: perhaps a chef dry-run would catch this? any clue how that's done in chef?
[2014-03-09 03:54:22 -0400] gregf: rbowlby: chef-client has -W --why-run, but I don't think that is what you really want. http://docs.opscode.com/client/ctl_chef_client.html
[2014-03-09 03:55:20 -0400] gregf: rbowlby: personally I would say chef-spec may be the best way to catch some of those stupid mistakes. It's more than just a linter though.
[2014-03-09 03:55:48 -0400] gregf: rbowlby: https://github.com/sethvargo/chefspec if you are interested
[2014-03-09 03:56:20 -0400] rbowlby: thanks greg, I just picked up the TDI w/chef book...only on ch2 so far ;)
[2014-03-09 03:56:39 -0400] rbowlby: trying to get as much feedback within my VIM workflow as possible
[2014-03-09 03:56:52 -0400] rbowlby: looks like this will have to happen pre-commit
[2014-03-09 03:57:27 -0400] gregf: rbowlby: for vim I make use of syntastic myself and have a few syntax checkers enabled for while i'm coding
[2014-03-09 03:57:43 -0400] gregf: https://github.com/scrooloose/syntastic
[2014-03-09 03:58:07 -0400] gregf: theres checkers for ruby,foodcritic,rubocop,eruby that i all have enabled when working with chef
[2014-03-09 03:59:36 -0400] rbowlby: nice, I just installed vim-chef to get the file types detected correctly for syntastic-based linting w/ foodcritic
[2014-03-09 03:00:02 -0400] rbowlby: prob could use some more lint rules though, spaces count and stuff like that
[2014-03-09 03:00:23 -0400] gregf: rubocop i think should take care of some of the extras
[2014-03-09 03:00:41 -0400] gregf: https://github.com/bbatsov/rubocop
[2014-03-09 03:01:08 -0400] rbowlby: that looks perfect, I'll add that now! Thanks
[2014-03-09 03:01:23 -0400] gregf: rbowlby: if you look at some of the opscode cookbooks there ignoring a few of the rubocop warnings though. https://github.com/opscode-cookbooks/yum/blob/master/.rubocop.yml
[2014-03-09 03:01:38 -0400] rbowlby: I was just about to ask
[2014-03-09 03:02:46 -0400] rbowlby: is it normal to align attr within a resource or align hash rockets? they do this in puppet
[2014-03-09 03:04:19 -0400] gregf: I go by hash rockets myself
[2014-03-09 03:17:00 -0400] creamridge: anyone know why when i try to remove a package in my recipe chef responds action remove (up to date) but doesn't remove the package
[2014-03-09 14:43:35 -0400] mal__: Does anyone know the best way to avoid getting "warning: already initialized constant" during a chef run? I have a few libraries, but they depend on each other so some are required by others, and then chef loads them again anyway
[2014-03-09 14:44:14 -0400] mal__: Just wondering if there's a more cheffy way than "unless defined?"
[2014-03-09 17:09:46 -0400] arikfr: Hi. I'm trying to upload a new cookbook to the community site but keep getting "Cookbook folder must match cookbook name"
[2014-03-09 17:10:04 -0400] arikfr: My tarball has one directory in it: "redash" and the cookbook name is redash. What am I doing wrong?
[2014-03-09 17:25:13 -0400] chgravier: Hi everyone, I want to upgrade my 11.0.8 open source chef server to a 11.0.11 version. Inspired by http://adigitalnotepad.com/post/upgrade-chef-server-11-0-4-to-11-0-6, I am about to try to upgrade the server using the dpkg on top of the existing instance. But hey, is it the appropriate approach to do this please (mainly in order to keep data :)) ? I am hitting a similar issue than this bug report on 11.0.4 :
[2014-03-09 17:25:13 -0400] chgravier: https://tickets.opscode.com/browse/CHEF-4485 but I want to upgrade to latest before actually reporting
[2014-03-09 17:27:33 -0400] sarkis: hey guys, i am developing on a cookbook locally, we also use berkshelf.. what would be the easiest way to test off the local version ( we are using chef-solo )
[2014-03-09 17:28:24 -0400] sarkis: i was thinking i can push to a different branch, set that in my berksfile.lock, but is there an easier way i can test this out before i push to the repo?
[2014-03-09 19:03:13 -0400] zanshin: sarkis: You can specify a path in your Berskfile to the local version. `cookbook 'mycookbook' path: '/path/to/cookbook'
[2014-03-09 19:09:41 -0400] arikfr: Hi. I'm trying to upload a new cookbook to the community site but keep getting "Cookbook folder must match cookbook name"
[2014-03-09 19:09:42 -0400] arikfr: My tarball has one directory in it: "redash" and the cookbook name is redash. What am I doing wrong?
[2014-03-09 21:57:20 -0400] JeanMertz: Is there a way to force a recipe to the end of the run list? I have recipe A that either requires recipe B or C, depending on the result of `node.recipe?('D')`, but 'D' could be loaded after A, making that condition always fail.
[2014-03-09 21:58:10 -0400] JeanMertz: I tried putting the `node.recipe?` condition in a ruby_block (since that happens AFTER compile, and thus `recipe?` actually has all the loaded recipes), but then I can't load new recipes anymore, since the compile phase is already completed.
[2014-03-09 22:00:35 -0400] JeanMert_: sorry, got disconnected there
[2014-03-09 22:09:55 -0400] sethvargo: @rbowlby ChefSpec would
[2014-03-09 22:10:01 -0400] sethvargo: Or Test Kitchen
[2014-03-09 22:10:42 -0400] rbowlby: tx seth, looking into those
[2014-03-09 22:18:58 -0400] ddr_: hi all. How can I use test from original cookbook  in my wrapper book?
[2014-03-09 22:49:53 -0400] mhenrixon: When creating LWRP can I skipe the namespacing in the method name? Meaning can I get my authorized_keys LWRP to not be base_server_authorized_keys do end
[2014-03-09 23:14:41 -0400] coderanger: mhenrixon: No
[2014-03-09 23:15:11 -0400] mhenrixon: heh that sucks so I would have to name my cookbook authorized and my lwrp keys to make that work
[2014-03-09 23:15:22 -0400] mhenrixon: or authorized_keys and entry maybe
[2014-03-09 23:20:45 -0400] coderanger: mhenrixon: Or don't use an LWRP :)
[2014-03-09 23:21:19 -0400] mhenrixon: heh suppose that is an option of course :)
[2014-03-09 23:22:42 -0400] coderanger: mhenrixon: If you want to convert it to a class-based resource, let me know
[2014-03-09 23:22:54 -0400] coderanger: Pretty easy to copy-pasta it
[2014-03-09 23:23:08 -0400] mhenrixon: @coderanger how would I go about that?
[2014-03-09 23:23:47 -0400] mhenrixon: https://gist.github.com/9456532
[2014-03-09 23:24:12 -0400] coderanger: sec
[2014-03-09 23:25:38 -0400] coderanger: want to add the resource file to that gist?
[2014-03-09 23:26:57 -0400] mhenrixon: yeah sorry
[2014-03-09 23:27:35 -0400] mhenrixon: @coderanger check!
[2014-03-09 23:29:07 -0400] coderanger: Added a simple example
[2014-03-09 23:29:25 -0400] coderanger: Make sure you add depends 'poise' to your metadata.rb too
[2014-03-09 23:29:59 -0400] coderanger: You can make the name whatever you want by changing the class names, just make sure they match
[2014-03-09 23:30:16 -0400] mhenrixon: jesus that is fantastic!
[2014-03-09 23:30:42 -0400] mhenrixon: I still put that in providers folder?
[2014-03-09 23:30:47 -0400] coderanger: libraries/
[2014-03-09 23:30:55 -0400] coderanger: Its just a straight Ruby lib
[2014-03-09 23:31:12 -0400] coderanger: I can make a slightly cleaner version too, one sec
[2014-03-09 23:31:13 -0400] mhenrixon: ah right and that is picked up by chef in other cookbooks?
[2014-03-09 23:31:45 -0400] coderanger: Yeah, when a cookbook is loaded, all lib files are run, which will put this new resource in place in the relevant modules
[2014-03-09 23:32:59 -0400] coderanger: So to explain a few changes to make
[2014-03-09 23:33:12 -0400] coderanger: the NilClass in the kind_of is redundant, you can't set attributes to nil anyway
[2014-03-09 23:33:30 -0400] mhenrixon: love it
[2014-03-09 23:35:26 -0400] coderanger: Added cleaner version
[2014-03-09 23:36:16 -0400] mhenrixon: nice now it is a whole lot easier to understand what is going on
[2014-03-09 23:36:21 -0400] coderanger: This has slightly different semantics from your original version re: triggering notifications
[2014-03-09 23:36:35 -0400] coderanger: Your "new_resource.updated_by_last_action(f.updated_by_last_action?)" line doesn't actually work :-(
[2014-03-09 23:36:54 -0400] coderanger: (it was put in a bunch of docs at one point, but is silently incorrect)
[2014-03-09 23:37:12 -0400] mhenrixon: right like a whole bunch of other stuff I've found in the docs :)
[2014-03-09 23:38:12 -0400] coderanger: So now notifications will actually work
[2014-03-09 23:38:20 -0400] mhenrixon: thanks a ton @coderanger I will make great use of this way of writing my LWRP's in the future. Suites me better coming from a ruby background
[2014-03-09 23:38:23 -0400] coderanger: if you don't care about that, you can remove the notifying_block bit
[2014-03-09 23:39:01 -0400] coderanger: mhenrixon: You can check out the balanced-cookbooks/jenkins repo (and a few others in there) for more examples of using Poise
[2014-03-09 23:39:16 -0400] coderanger: And then mock me for not having docs for it yet >_<
[2014-03-09 23:39:46 -0400] mhenrixon: It is great to have there, I might have to update the authorized_keys in the future not sure if I have to restart some ssh_agent or something. Might have to if the key is password protected.
[2014-03-09 23:39:47 -0400] coderanger: Theres a whole bunch more helpers in there for writing nicer resources though
[2014-03-09 23:40:02 -0400] mhenrixon: vnice
[2014-03-09 23:41:11 -0400] mhenrixon: HAH! Not a whole lot of docs indeed @coderanger good thing you have some pretty decent cookbooks using it already so that I can get some inspiration >(
[2014-03-09 23:41:12 -0400] mhenrixon: :)
[2014-03-09 23:42:09 -0400] mhenrixon: hey can I load templates from other cookbooks as well?
[2014-03-09 23:42:22 -0400] mhenrixon: Like https://github.com/balanced-cookbooks/jenkins/blob/master/libraries/jenkins_credential.rb#L73 ? @coderanger
[2014-03-09 23:42:40 -0400] coderanger: mhenrixon: Yep
[2014-03-09 23:42:59 -0400] mhenrixon: wow I can skip those stupid templates i've duplicated then :)
[2014-03-09 23:43:00 -0400] coderanger: mhenrixon: Also you might want to check out https://github.com/balanced-cookbooks/balanced-user/blob/master/libraries/balanced_user.rb
[2014-03-09 23:46:06 -0400] mhenrixon: awesomeness! I had no idea it could be achieved that beautifully

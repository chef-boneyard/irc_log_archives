[2014-05-29 00:00:28 -0400] shlant: anyone know of a cookbook to install ruby 2.0 without rvm?
[2014-05-29 00:01:34 -0400] gchristensen: shlant: you could do it without rbenv
[2014-05-29 00:03:20 -0400] shlant: gchristensen: and that way is?
[2014-05-29 00:03:31 -0400] gchristensen: with rbenv* sorry
[2014-05-29 00:04:12 -0400] shlant: gchristensen: my point is I don't want a ruby version manager
[2014-05-29 00:04:35 -0400] gchristensen: shlant: you could use ruby-build, which is what rbenv uses
[2014-05-29 00:07:23 -0400] shlant: gchristensen: i'll tkae a look, thanks
[2014-05-29 00:09:49 -0400] loki97123: hello
[2014-05-29 00:10:32 -0400] loki97123: has anyone seen the ark recipe fail in a cloud init situation
[2014-05-29 00:10:49 -0400] loki97123: where it seems like the wildcard globbing is not resolving
[2014-05-29 00:10:54 -0400] Otterley: shlant, you really do want rbenv
[2014-05-29 00:11:01 -0400] Otterley: even if you think you don't now
[2014-05-29 00:11:52 -0400] shlant: Otterley: why's that? And do you mean rbenv specifically or a version manager in general?
[2014-05-29 00:12:05 -0400] Otterley: anything but rvm
[2014-05-29 00:12:25 -0400] Otterley: because you will eventually be running multiple Rubies.
[2014-05-29 00:12:39 -0400] Otterley: maybe not immediately but I recommend assuming that you will in the long term
[2014-05-29 00:13:05 -0400] Otterley: the Riot Games rbenv cookbook is pretty good, we use a fork of it
[2014-05-29 00:13:11 -0400] jperry_: is api.berkshelf.com down?
[2014-05-29 00:18:48 -0400] loki97123: wow it just got empty in here
[2014-05-29 00:18:53 -0400] loki97123: i swear i washed today
[2014-05-29 00:20:05 -0400] loki97123: anybody have any ideas why file globbing would not resolve in a chef recipe
[2014-05-29 00:21:42 -0400] Otterley: loki97123, try posting a gist or pastebin sample of the recipe
[2014-05-29 00:23:00 -0400] loki97123: https://github.com/opscode-cookbooks/ark
[2014-05-29 00:25:05 -0400] loki97123: more specifically
[2014-05-29 00:25:07 -0400] loki97123: https://github.com/opscode-cookbooks/ark/blob/master/libraries/default.rb
[2014-05-29 00:25:20 -0400] loki97123: and the issue being around the unzip_command
[2014-05-29 00:25:29 -0400] loki97123: even more specifically
[2014-05-29 00:26:02 -0400] loki97123: why file globbing would not resolve in a cloud environment run via cloud init but
[2014-05-29 00:26:13 -0400] loki97123: would resolve when run while directly on the machine
[2014-05-29 00:27:07 -0400] loki97123: @coderanger you around
[2014-05-29 00:27:15 -0400] coderanger: briefly
[2014-05-29 00:27:21 -0400] coderanger: about to head for the train
[2014-05-29 00:27:28 -0400] loki97123: let you run then
[2014-05-29 00:27:37 -0400] loki97123: this is sbrin
[2014-05-29 00:27:41 -0400] loki97123: anyways
[2014-05-29 00:27:57 -0400] loki97123: damn * isn't resolving in the ark recipe out in the cloud
[2014-05-29 00:28:07 -0400] loki97123: catch you tomorrow
[2014-05-29 01:18:24 -0400] jameson__: PaxHeader :(
[2014-05-29 01:18:39 -0400] jameson__: there goes using chef-zero, back to chef-solo
[2014-05-29 01:52:38 -0400] kisoku:   /win 8
[2014-05-29 03:47:15 -0400] nomike: it is possible to organize cookbook files in subdirectories according to the platform (e.g. "files/default/foo.bar", "files/debian/foo.bar", "files/debian-7.5/foo.bar".
[2014-05-29 03:47:25 -0400] nomike: Is there a similar mechanism for attributes?
[2014-05-29 03:48:49 -0400] coderanger: nomike: No
[2014-05-29 03:49:45 -0400] nomike: I've been here earlier this day and was working on a problem regarding changed package names in debian but unfortunately I had to leave and now I'm back working at that problem:
[2014-05-29 03:50:46 -0400] nomike: I need to install "ruby-shadow" but in the LTS version of debian the package is called "libshadow-ruby1.8". There is no transitional meta-package in the new debian version.
[2014-05-29 03:51:56 -0400] nomike: And I'm now looking for a neat way to avoid having "if distro_version.equals('debian-7.0') then package 'libshadow-ruby1.9' else package 'ruby-shadow'" like contructs.
[2014-05-29 03:53:18 -0400] coderanger: nomike: look up value_for_platform
[2014-05-29 03:54:01 -0400] netty195: Hello al
[2014-05-29 03:54:06 -0400] netty195: *Hello all
[2014-05-29 03:56:13 -0400] netty195: Can someone confirm if 'subscribes' is used to do template 'change' based actions?
[2014-05-29 03:56:36 -0400] coderanger: netty195: subscribes and notifies, yes
[2014-05-29 03:57:15 -0400] netty195: Thank you!
[2014-05-29 04:04:23 -0400] netty195: subscribes :restart, "template[/etc/myservice.cfg]", :immediately is what is there in examples
[2014-05-29 04:04:38 -0400] netty195: subscribes :restart, "template[/etc/myservice.cfg]", :delayed, works as well right?
[2014-05-29 04:04:55 -0400] netty195: *subscribes :restart, "template[/etc/myservice.cfg]", :  delayed
[2014-05-29 04:12:30 -0400] nomike: coderanger, cool. this is exactly what I'm looking for
[2014-05-29 04:14:56 -0400] coderanger: netty195: yes, but :delay is the default so it is usually left off
[2014-05-29 04:15:47 -0400] netty195: Great. Thank you!
[2014-05-29 04:15:48 -0400] netty195: I try to specify explicitly to ensure  readability for those who may not know Chef well enough
[2014-05-29 04:16:55 -0400] nomike: but it is still a bit ugly *g* http://pastebin.com/3CfWK1vf
[2014-05-29 04:18:01 -0400] nomike: would be cool if I could use regular expressions or at least shell wildcards
[2014-05-29 04:18:57 -0400] coderanger: nomike: I think you can use an array as the key
[2014-05-29 04:19:45 -0400] nomike: Yes, but according to the documentation only for the platform and not for the version, which doesn't make much sense.
[2014-05-29 04:20:28 -0400] nomike: well, you can specify a custom package name for version 2.0 of both ubuntu and fedora.
[2014-05-29 04:22:24 -0400] nomike: value_for_platform(["ubuntu", "fedora"] => { "12.04" => "libfoo-ruby", "10" => "ruby-foo"})
[2014-05-29 04:23:11 -0400] nomike: didn't quite get the sense in this. I would understand having the chance to use arrays for the version instead of the platform. Or better having both.
[2014-05-29 04:41:40 -0400] gkra: oh, awesome. can't get to http://gems.hashicorp.com, so there goes my ability to get vagrant-vmware working...
[2014-05-29 04:47:03 -0400] digitalchild: orks here
[2014-05-29 04:47:07 -0400] digitalchild: err works..
[2014-05-29 04:53:17 -0400] ignatz: ork ork
[2014-05-29 05:05:35 -0400] cschneid: So does the file resource no take a block for the content?   I have a line like:   content ::File.open("/home/deploy/secrets/deploy_rsa.pem").read  -- but it blows up if that file doesn't exist, even if a not_if block prevents it from running
[2014-05-29 05:05:45 -0400] cschneid: was hoping to have `  content { ::File.open("/home/deploy/secrets/deploy_rsa.pem").read }
[2014-05-29 05:08:48 -0400] juliancdunn: kisoku: that's weird, not sure why - open an issue on github?
[2014-05-29 05:15:56 -0400] digitalchild: hmm no matter which command i run for kitchen i get a datamunger error :/
[2014-05-29 05:16:04 -0400] digitalchild: kitchen destroy/verify, whatever
[2014-05-29 05:16:28 -0400] digitalchild: hmm
[2014-05-29 05:16:32 -0400] digitalchild: seems to be that one app only :/
[2014-05-29 06:03:14 -0400] fclausen: hey all - are there any knife bash completion scripts to recommend?
[2014-05-29 07:58:07 -0400] i42n: Hey, can anyone help me with this? https://stackoverflow.com/questions/23928478/chef-recipe-to-configure-multiple-mpd-instances
[2014-05-29 07:58:18 -0400] i42n: I am new to chef and try to configure multiple mpd instances
[2014-05-29 08:01:36 -0400] ambientsound: i42n: you'll need to create your init scripts manually, at least, for 1.
[2014-05-29 08:01:53 -0400] ambientsound: that'll solve 2 as well
[2014-05-29 08:02:57 -0400] ambientsound: try iterating over node[:mpd][:channels] instead of node[:normal][:channels], maybe that'll solve 3.
[2014-05-29 08:04:02 -0400] ambientsound: yeah, and for 2., use: service "mpd_#{channel[:name]}" do action :enable end
[2014-05-29 08:04:47 -0400] chernjie: is there a way to overwrite a template file used by a community cookbook? I am using wrapper cookbook method
[2014-05-29 08:07:00 -0400] chernjie: e.g. ~/.berkshelf/cookbooks/rabbitmq-3.2.2/templates/default/rabbitmq.config.erb
[2014-05-29 08:07:04 -0400] i42n: ambientsound: so I can not automatically create the init scripts with chef?
[2014-05-29 08:08:18 -0400] ambientsound: i42n: no, not as far as I know. Chef would have to make assumptions of how your software is supposed to run
[2014-05-29 08:09:54 -0400] i42n: ambientsound: what does 'service "mpd_#{channel[:name]}"' change?
[2014-05-29 08:10:54 -0400] i42n: ambientsound: how can I tell chef which init script to start when launching the service?
[2014-05-29 08:11:04 -0400] i42n: ambientsound: or is this what service_name does?
[2014-05-29 08:11:34 -0400] i42n: ambientsound: so if I create /etc/init.d/mpd_mix and use service_name: 'mpd_mix' it will work?
[2014-05-29 08:11:40 -0400] ambientsound: yes.
[2014-05-29 08:12:02 -0400] ambientsound: you'd probably want to do: action :enable, :start
[2014-05-29 08:16:51 -0400] i42n: ambientsound: ok so this part should be solveable. However the /etc/mpd_mix.conf still contains the tech settings.
[2014-05-29 08:17:11 -0400] i42n: ambientsound: I changed the iteration as you suggested
[2014-05-29 08:17:28 -0400] i42n: changed it to: node[:mpd][:channels].each_value do |channel|
[2014-05-29 08:19:15 -0400] ambientsound: i42n: what does mpd.conf.erb look like?
[2014-05-29 08:19:30 -0400] i42n: ambientsound: the template or the result?
[2014-05-29 08:19:38 -0400] ambientsound: the template
[2014-05-29 08:20:05 -0400] i42n: ambientsound: here it is https://gist.github.com/i42n/ebf1159c934e5c6f4b58
[2014-05-29 08:20:46 -0400] i42n: ambientsound: the resulting config files are basically correct, but both times with the settings for the tech channel
[2014-05-29 08:23:26 -0400] ambientsound: in your template file you have <%= node[:mpd][:bind] %>, etc
[2014-05-29 08:24:13 -0400] ambientsound: ah, now I see
[2014-05-29 08:24:34 -0400] ambientsound: try supplying the :channel to your template instead of overwriting node values
[2014-05-29 08:25:06 -0400] ambientsound: i.e. variables :channel => channel
[2014-05-29 08:25:23 -0400] ambientsound: and then in your template: @channel[:name]
[2014-05-29 08:25:52 -0400] i42n: ambientsound: ok I'll have a try
[2014-05-29 08:27:58 -0400] i42n: ambientsound: shouldn't it be @channel = channel?
[2014-05-29 08:28:29 -0400] ambientsound: no, it's a global
[2014-05-29 08:28:51 -0400] ambientsound: err, I mean, you supply it as :channel, and it appears as @channel
[2014-05-29 08:34:12 -0400] i42n: ambientsound: this assignment does not work. :channel => channel
[2014-05-29 08:34:22 -0400] i42n: syntax error, unexpected tASSOC, expecting keyword_end
[2014-05-29 08:35:31 -0400] ambientsound: "variables :channel => channel"
[2014-05-29 08:39:08 -0400] i42n: ambientsound: oh I see. Did not know that.
[2014-05-29 08:40:29 -0400] i42n: ambientsound: however chef still does not know how the handle the variables thing.
[2014-05-29 08:40:33 -0400] i42n:  No resource or method named `variables' for `Chef::Recipe "default"'
[2014-05-29 08:40:45 -0400] ambientsound: oh, that's inside the template ... do block
[2014-05-29 08:41:02 -0400] i42n: ambientsound: this is what I have now: https://gist.github.com/i42n/77e890695e9a2e690432
[2014-05-29 08:41:04 -0400] ambientsound: sorry for being unclear.
[2014-05-29 08:41:16 -0400] i42n: ambientsound: sorry for being such a noob ;)
[2014-05-29 08:42:24 -0400] ambientsound: aren't everyone at one point or another? ;p
[2014-05-29 08:42:47 -0400] ambientsound: I just know enough to write Chef stuff, but make bad design choices
[2014-05-29 08:42:51 -0400] ambientsound: so there's that ;-)
[2014-05-29 08:47:49 -0400] i42n: ambientsound: perfekt! now the config files are correct.
[2014-05-29 08:47:57 -0400] i42n: ambientsound: I will add the init stuff now
[2014-05-29 08:54:55 -0400] i42n: ambientsound: now I am stuck in a loop. to define a service /etc/init.d/mpd_mix this init file must be present. But to create the template init file I have to define the restart action which requires the service to be present.
[2014-05-29 08:55:13 -0400] ambientsound: you can define the service at the end, no problem
[2014-05-29 08:55:23 -0400] i42n: ambientsound: code https://gist.github.com/i42n/a7d35763ee3b2ed1b4e5
[2014-05-29 08:55:44 -0400] i42n: ambientsound: if I move the init config before the service declaration it does also not work
[2014-05-29 08:56:29 -0400] i42n: ambientsound: I could remove the notify...
[2014-05-29 08:56:47 -0400] ambientsound: _filename = "/etc/" + channel[:name]
[2014-05-29 08:56:52 -0400] ambientsound: you'll need init.d as well
[2014-05-29 08:57:20 -0400] jim__: hi, can anyone point me to the documentation for include_recipe been going around in circles and getting very frustrated?
[2014-05-29 08:58:12 -0400] ambientsound: jim__: it's just one parameter
[2014-05-29 08:58:48 -0400] jim__: how do you know that?
[2014-05-29 08:59:51 -0400] i42n: ambientsound: found the init.d bug already. fixed
[2014-05-29 09:00:01 -0400] jim__: ambientsound: so there is no way to specify version?
[2014-05-29 09:00:05 -0400] i42n: ambientsound: I removed the notify so it works now
[2014-05-29 09:00:40 -0400] ambientsound: jim__: should be in your metadata.rb file, I reckon
[2014-05-29 09:02:41 -0400] jim__: ambientsound: So my metadata.rb will take preference, I set up versioning there and in my recipe it will use the correct version.  Thats cool if true, would be nice to find some where documenting these details.
[2014-05-29 09:09:27 -0400] i42n: I have updated my recipe template, but running provisioning does not update the file. How can I force it? I assume chef things nothing changed...
[2014-05-29 09:10:13 -0400] i42n: *thinks
[2014-05-29 09:12:06 -0400] jim__: hi, can anyone point me in the direction of some documentation of the depends method used in metadata.rb, nothing in chef seems to be properly documented, i.e. what the parameters?
[2014-05-29 09:12:56 -0400] ambientsound: i42n: wrong filename?
[2014-05-29 09:14:12 -0400] i42n: ambientsound: works now. it did not create them because there was an error in the part before.
[2014-05-29 09:14:19 -0400] i42n: ambientsound: thanks for your time and your help :)
[2014-05-29 09:14:43 -0400] ambientsound: i42n: glad to help :)
[2014-05-29 11:30:50 -0400] mhenrixon: How should I approach only installing stuff if a specific criteria is matched?
[2014-05-29 11:31:10 -0400] HibernateStump: Hi I am using chef to create a cookbook recipe for cron, I am still a novice but i am getting some good results, i was wanting to create a recipe that does job A on only dev boxes and job b on production boxes, but all in the same recipe? i am pretty sure its possible the prod and dev hosts are never the same hostname as they are ec2 cloud instances so cant use hostname
[2014-05-29 11:31:22 -0400] mhenrixon: I am thinking like nginx it does a whole bunch of stuff that shouldn't be done unless needed. Was thinking of including the recipe conditionally
[2014-05-29 11:34:04 -0400] trilitheus: mhenrixon, maybe this helps? http://stackoverflow.com/questions/15961496/is-it-possible-to-chef-include-recipe-and-indicate-only-if-not-if-condition
[2014-05-29 11:38:16 -0400] mhenrixon: trilitheus yeah that helps a little. Was hoping not having to store stuff on the nodes but its a fair tradeoff
[2014-05-29 11:38:16 -0400] trilitheus: HibernateStump, are you using environments in chef?  you can use node.chef_environment to check which environment the nodes is in and run job based on that
[2014-05-29 11:39:35 -0400] HibernateStump: Ahh trilitheus thanks, I am not, but you  have helped me i think from here on I know what to do :-)
[2014-05-29 11:42:37 -0400] whiteadam: mmm, emails
[2014-05-29 11:42:40 -0400] drrk: HibernateStump: it's also worth reading about the Environment Cookboook pattern http://blog.vialstudios.com/the-environment-cookbook-pattern/
[2014-05-29 11:43:21 -0400] HibernateStump: drrk: brilliant thanks for this tip, I shall indeed:-)
[2014-05-29 11:43:48 -0400] drrk: it doesn't talk directly about the issue you are having, but it's a good workflow that will help keep your stuff sane
[2014-05-29 11:45:34 -0400] HibernateStump: drrk: thanks, I have had a reasonable amount of exposure to puppet, but not to chef, this will help...
[2014-05-29 12:11:53 -0400] ddosia: hi folks, I would like to use node["kernel"]["machine"] inside LWRP provider, but chef complains: undefined local variable or method `node'
[2014-05-29 12:18:17 -0400] whiteadam: ddosia: What file is this in?
[2014-05-29 12:18:57 -0400] whiteadam: ddosia: eg: Is it in the role or...
[2014-05-29 12:21:34 -0400] trilitheus: hey drrk - also you seen https://github.com/reset/berkflow
[2014-05-29 12:29:01 -0400] ddosia: whiteadam: the file is provider/pkg.rb
[2014-05-29 12:38:02 -0400] mc_fail: hi, it's me again
[2014-05-29 12:38:30 -0400] mc_fail: so, why i can't see a environment attributes, assigned to node?
[2014-05-29 12:38:56 -0400] mc_fail: i even can see this attributes via a web-interface
[2014-05-29 12:43:07 -0400] whiteadam: mc_fail: Give me an example of an environment attribute
[2014-05-29 12:43:55 -0400] mc_fail: whiteadam http://pastebin.com/CcB3kpkn
[2014-05-29 12:45:33 -0400] mc_fail: so, before "city": "Moscow" was in a "override_attributes", and i have moved it to "default_attributes", but in knife search it is still override
[2014-05-29 12:45:57 -0400] mc_fail: *in kinfe node show
[2014-05-29 12:48:37 -0400] mc_fail: actually it's fun, because i can see this attributes on other hosts in the same environment
[2014-05-29 12:48:59 -0400] mc_fail: it looks like a bug, actually
[2014-05-29 12:59:11 -0400] whiteadam: mc_fail: oh boy, I think that is one for someone else :)
[2014-05-29 13:00:45 -0400] ddosia: is it possible that variable assigment semantic works different inside recipes and inside providers?
[2014-05-29 13:01:11 -0400] ddosia: I have if statement, and in both clauses I assign some value to variable
[2014-05-29 13:01:44 -0400] ddosia: If I do this in recipe, this variable bound after if statement, and I can access to it's value
[2014-05-29 13:02:05 -0400] ddosia: but inside provider, this works differently
[2014-05-29 13:02:06 -0400] mc_fail: whiteadam what you mean?
[2014-05-29 13:02:14 -0400] ddosia: variable is empty
[2014-05-29 13:03:59 -0400] ddosia: I am sorry, there was just unmatched if clause
[2014-05-29 13:17:05 -0400] mc_fail: f*king attribute bug, now i must deploy a 50 servers with hands
[2014-05-29 13:27:20 -0400] CPS: made a ticket for the behavior we saw with the windows cookbook https://tickets.opscode.com/browse/COOK-4687
[2014-05-29 13:35:37 -0400] rmoriz: hi
[2014-05-29 13:36:01 -0400] rmoriz: is there a way to execute serverspec specs after each converge on each node?
[2014-05-29 14:09:41 -0400] sysdef: i installed chef on wheezy. that's a normal output? http://pastebin.com/raw.php?i=YGJu78fF
[2014-05-29 14:11:51 -0400] gleam: you probably want to be installing the omnibus builds of chef..
[2014-05-29 14:16:32 -0400] sysdef: i see. so the guy at http://public.sebastian-wendel.de/bth_chef_workshop_1/#/13 just misleaded me
[2014-05-29 14:19:36 -0400] sysdef: 'wget -qO- https://www.opscode.com/chef/install.sh|bash' works like a sharm =) thanks, gleam
[2014-05-29 14:27:52 -0400] jreslock: Is there a way to remove the chef node and client after a successful test run?
[2014-05-29 14:35:17 -0400] bigl0af-wrk: this might be a n00b question but i'm doing some chef PoC work...anyone ever seen chef-client throw this error?
[2014-05-29 14:35:18 -0400] bigl0af-wrk: ERROR: JSON::GeneratorError: source sequence is illegal/malformed utf-8
[2014-05-29 14:53:58 -0400] CPS: bigl0af-wrk: pretty clear your json is messed up somehow
[2014-05-29 14:55:09 -0400] bigl0af-wrk: CPS: so this is a fresh environment...new chef server, new chef client, the machine throwing the error is freshly knife bootstrapped
[2014-05-29 14:55:22 -0400] CPS: what editor/platform are you using?
[2014-05-29 14:55:41 -0400] bigl0af-wrk: client and server are RHEL 6.4
[2014-05-29 14:55:51 -0400] bigl0af-wrk: admin workstation is Fedora 20
[2014-05-29 14:56:10 -0400] bigl0af-wrk: i'll be using vi as my editor (no cookbooks have been written yet tho)
[2014-05-29 14:56:47 -0400] CPS: i don't know vi, is there an option to show all symbols? you might have a weird invisible control character in there somewhere
[2014-05-29 14:56:58 -0400] CPS: also check that it's actually utf-8 encoded and not something else
[2014-05-29 14:57:14 -0400] whiteadam: in vim: :set invlist
[2014-05-29 14:58:09 -0400] bigl0af-wrk: so there are no roles, recipes, cookbooks - nothing...this is a fresh install
[2014-05-29 14:58:32 -0400] bigl0af-wrk: could *that* be the issue - i need at least one recipe assigned to a machine?
[2014-05-29 14:58:44 -0400] CPS: you're just running chef-client on a new node? is it registered with the server?
[2014-05-29 14:58:45 -0400] whiteadam: I don't think so.
[2014-05-29 14:59:15 -0400] stormerider: bigl0af-wrk: no, you can have a node with an empty run_list
[2014-05-29 14:59:24 -0400] bigl0af-wrk: CPS: yes it is registered with the server...it shows on the web interface and on my admin workstation via knife client list
[2014-05-29 14:59:50 -0400] whiteadam: At what part of the client run does it throw the error?
[2014-05-29 15:00:12 -0400] bigl0af-wrk: at the very end...lemme throw the full output on pastebin
[2014-05-29 15:00:16 -0400] CPS: can you gist the whole output?
[2014-05-29 15:02:34 -0400] bigl0af-wrk: https://gist.github.com/anonymous/12db23137b61a0d437c6
[2014-05-29 15:03:39 -0400] CPS: what's in /var/chef/cache/chef-stacktrace.out?
[2014-05-29 15:04:11 -0400] whiteadam: boy it is just crapping out immediately huh
[2014-05-29 15:04:17 -0400] stormerider: can someone from Chef help me get an update on https://www.getchef.com/support/tickets/18028 ? btm / kallistec / etc? thanks. i pinged sethvargo about it on twitter, but he can't see the support ticket.
[2014-05-29 15:05:11 -0400] bigl0af-wrk: CPS: https://gist.github.com/anonymous/e0f17db65b8e5311f0ba
[2014-05-29 15:06:31 -0400] whiteadam: bigl0af-wrk: Well, there's definitely a non UTF character somewhere...
[2014-05-29 15:06:51 -0400] CPS: one of the devs might be able to answer what it's doing with json there
[2014-05-29 15:07:12 -0400] CPS: just a guess but it kind of looks like it's trying to compose json to send info about the node to the server
[2014-05-29 15:07:36 -0400] CPS: does the node on the server show all the ohai attributes?
[2014-05-29 15:07:40 -0400] bigl0af-wrk: whiteadam: i'd agree but where? lol...this is a default install...server, client, admin wrkstation all fresh
[2014-05-29 15:08:02 -0400] bigl0af-wrk: CPS: i'm not sure if it shows all attribs but it certainly shows a bunch
[2014-05-29 15:08:04 -0400] cschneid: Running into a weird issue with a 403 when fetching a template.  I have a self-hosted chef-server, all recipes and templates are there, but I get a 403 forbidden halfway through my node's run when fetching this template. If I force it to rerun, it fetches it.  Is there a login timeout that I'm hiting?
[2014-05-29 15:08:17 -0400] whiteadam: bigl0af-wrk: hah, I've never seen that error. The clients usually just work :)
[2014-05-29 15:08:41 -0400] cschneid: It's a very simple template definition, https://gist.github.com/cschneid/ee789bb55374134d59cf
[2014-05-29 15:08:56 -0400] CPS: bigl0af-wrk: there'll be stuff about your os and cpu and other hardware
[2014-05-29 15:09:43 -0400] bigl0af-wrk: CPS: yea i get all that jazz...
[2014-05-29 15:09:54 -0400] bigl0af-wrk: interesting what it seems i'm NOT getting tho
[2014-05-29 15:10:05 -0400] bigl0af-wrk: output of ohai includes: "[2014-05-29T08:09:19-07:00] WARN: unable to detect ipaddress"
[2014-05-29 15:12:08 -0400] bigl0af-wrk: almost seems like bonded eth* devices are causing issues w/ ohai fact discovery...perhaps that's the issue?
[2014-05-29 15:14:23 -0400] CPS: i wouldn't think a warning like that would blow it up, but who knows?
[2014-05-29 15:14:30 -0400] CPS: not sure i'm able to help with this
[2014-05-29 15:16:06 -0400] bigl0af-wrk: CPS: well thx for the good ole college attempt anyways!
[2014-05-29 15:17:01 -0400] bigl0af-wrk: like i said, i'm a n00b with chef...having mostly worked with ansible chef seems over the top but my new employer wants us to use chef it seems
[2014-05-29 15:17:20 -0400] bigl0af-wrk: in a way it doesn't matter what tool you use, just that you're using an orchestration tool of some type
[2014-05-29 15:17:38 -0400] bigl0af-wrk: plus being a geek i don't mind learning new stuff in the least :)
[2014-05-29 15:24:44 -0400] gyoza: https://www.youtube.com/watch?feature=player_detailpage&v=6Ajhzlq42f0 if you watch this in the morning everyday you will always have a good attitude
[2014-05-29 15:24:45 -0400] gyoza: :)
[2014-05-29 15:26:00 -0400] gyoza: welcome back
[2014-05-29 15:50:36 -0400] medya: is there any working cookbook to install lamp stack ? I tried this one but it gives error on the client and wont finish installing http://www.jasongrimes.org/2012/06/provisioning-a-lamp-stack-with-chef-vagrant-and-ec2-2-of-3/#comment-173738
[2014-05-29 15:52:09 -0400] jmickeyDW: I'm having an issue with http://community.opscode.com/cookbooks/aws The recipe I wrote for aws_s3_file does not respect the IAM role assigned to the instance
[2014-05-29 15:52:33 -0400] jmickeyDW: I am able to download from S3 without providing a key/secret with AWS CLI or Powershell
[2014-05-29 15:52:59 -0400] jmickeyDW: But the chef-client output says AWS access keys are requried
[2014-05-29 15:53:18 -0400] jmickeyDW: The instructions in the cookbook say to leave out access and secret key if a role is present
[2014-05-29 15:55:20 -0400] shlant: jmickeyDW: what does your role policy look like?
[2014-05-29 15:56:34 -0400] shlant: medya: it would probably be better to use the separate community cookbooks pertaining to each component of the stack. I doubt there is a single cookbook that does the whole stack very well
[2014-05-29 15:57:07 -0400] jmickeyDW: <shlant> {"Statement":[{"Resource":"arn:aws:s3:::*","Action":["s3:ListAllMyBuckets"],"Effect":"Allow"},{"Resource":"arn:aws:s3:::mybucket","Action":["s3:ListBucket","s3:GetBucketLocation"],"Effect":"Allow"},{"Resource":"arn:aws:s3:::mybucket/*","Action":["s3:PutObject","s3:GetObject"],"Effect":"Allow"}]}
[2014-05-29 15:57:40 -0400] shlant: jmickeyDW: oh god. Can you gist or pastebin that?
[2014-05-29 15:58:51 -0400] jmickeyDW: sorry, not sure how to do that
[2014-05-29 16:00:38 -0400] medya: shlant. so for lamps stack I would need apache mysql server and php cookbooks?
[2014-05-29 16:02:22 -0400] shlant: jmickeyDW: paste that policy here: http://pastebin.com/
[2014-05-29 16:02:25 -0400] shlant: helps with formatting
[2014-05-29 16:02:46 -0400] shlant: medya: if those are the components you want, yes
[2014-05-29 16:03:20 -0400] medya: shlant, I am not sure, if those 3 would make lamp
[2014-05-29 16:03:35 -0400] medya: is there any way to uninstall the things that a cookbook did?
[2014-05-29 16:03:51 -0400] medya: let say I install a cookbook it installs bunch of stuff then it fails
[2014-05-29 16:03:56 -0400] shlant: medya: they do, but so do other components: http://en.wikipedia.org/wiki/LAMP_(software_bundle)
[2014-05-29 16:04:19 -0400] shlant: medya: you could find out what was installed and manually uninstall
[2014-05-29 16:04:27 -0400] shlant: or just build/provision a new machine
[2014-05-29 16:04:30 -0400] jmickeyDW: <shlant> http://pastebin.com/sBnaJ9s3
[2014-05-29 16:05:02 -0400] shlant: jmickeyDW: I can just json lint is I guess haha
[2014-05-29 16:05:27 -0400] shlant: 1 sec
[2014-05-29 16:05:30 -0400] medya: shlant, I dont wanna do it manualy, let say I installed something by mistake on 100 machines, is there any way to uninstall it in chef automaticly?
[2014-05-29 16:06:27 -0400] shlant: medya: well what did you install? An more importantly, why did you not test before pushing to 100 machines?
[2014-05-29 16:07:51 -0400] rewandy: does anybody know why I get "Invalid signature for user or client" when POSTing to /search/ - while GET works fine
[2014-05-29 16:08:23 -0400] rewandy: i am able to PUT successfully as well - so I know my signature generating code is correct
[2014-05-29 16:08:53 -0400] medya: shlant, I was trying to install LAMP using http://www.jasongrimes.org/2012/06/provisioning-a-lamp-stack-with-chef-vagrant-and-ec2-2-of-3
[2014-05-29 16:09:02 -0400] medya: then  I got error when run chef-client
[2014-05-29 16:09:11 -0400] medya: the error is after it installs bunchs of stuff
[2014-05-29 16:11:22 -0400] shlant: jmickeyDW: can you try a wildcard all access policy for troubleshooting?
[2014-05-29 16:12:05 -0400] shlant: medya: 1. you cannot uninstall without knowing what was installed. 2. WHY
[2014-05-29 16:12:49 -0400] medya: why what
[2014-05-29 16:15:50 -0400] shlant: medya: whyyyy did you do that
[2014-05-29 16:15:56 -0400] shlant: if it's actually 100 servers
[2014-05-29 16:16:17 -0400] medya:  no it is only one server
[2014-05-29 16:16:30 -0400] medya: but I was just wondering if someone had done a mistake how could it be recoevered
[2014-05-29 16:16:40 -0400] medya: does chef has any mechanisim to recover that failure?
[2014-05-29 16:17:35 -0400] shlant: oh thnak god haha
[2014-05-29 16:18:01 -0400] whiteadam: So, Chef enforces a desired state. You would need to specify a desired state of LAMP not being installed... if that makes sense
[2014-05-29 16:18:05 -0400] shlant: medya: one thing idempotent Configuration Management tools don't do well is rollbacks
[2014-05-29 16:18:16 -0400] shlant: you have to know what was installed so you can uninstall it
[2014-05-29 16:18:26 -0400] medya: ok
[2014-05-29 16:18:27 -0400] shlant: do you have the chef run output for the failed LAMP install?
[2014-05-29 16:18:35 -0400] medya: yes I do
[2014-05-29 16:18:39 -0400] shlant: is this a bare metal machine?
[2014-05-29 16:18:42 -0400] shlant: or a VM
[2014-05-29 16:18:59 -0400] medya: it is a VM with SSH access
[2014-05-29 16:19:07 -0400] whiteadam: medya: The general theory with configuration management is that you don't repair, you re-build.
[2014-05-29 16:19:19 -0400] medya: here is the output of error I commented on that blog post, http://www.jasongrimes.org/2012/06/provisioning-a-lamp-stack-with-chef-vagrant-and-ec2-2-of-3/#comment-173738
[2014-05-29 16:20:07 -0400] whiteadam: What kind of server is this? The os?
[2014-05-29 16:20:34 -0400] shlant: medya: it would be easier to reprovision the VM
[2014-05-29 16:20:49 -0400] whiteadam: AH00526: Syntax error on line 11 of /etc/apache2/apache2.conf:
[2014-05-29 16:20:50 -0400] whiteadam: Invalid command LockFile, perhaps misspelled or defined by a module not includ ed in the server configuration
[2014-05-29 16:21:00 -0400] whiteadam: There you go
[2014-05-29 16:21:25 -0400] shlant: and the error is probably because authz_default was removed in newer apache versions
[2014-05-29 16:21:53 -0400] shlant: 2.4 to be specific
[2014-05-29 16:22:06 -0400] medya: so you suggest I dont uninstall anything on the VM , just download apache, mysql and php cookbooks seperately and add to the run list
[2014-05-29 16:22:57 -0400] rewandy: can anybody point me to a way to debug "Invalid signature for user or client" error?
[2014-05-29 16:30:06 -0400] runfromnowhere: Has anyone setup the community Tomcat cookbook to deploy multiple Tomcat instances on the same host?
[2014-05-29 16:31:34 -0400] shlant: medya: you want to start with a "blank" VM
[2014-05-29 16:31:49 -0400] shlant: you can either uninstall everything (hard way) or create a new VM (easy way)
[2014-05-29 16:33:39 -0400] shlant: rewandy: did you see this archive?
[2014-05-29 16:33:39 -0400] shlant: http://community.opscode.com/chat/chef/2012-09-26
[2014-05-29 16:33:45 -0400] shlant: search for your error
[2014-05-29 16:33:50 -0400] shlant: someone else had it
[2014-05-29 16:34:46 -0400] rewandy: shlant: the problem is that I only get that error for a specific /search/ POST request
[2014-05-29 16:34:55 -0400] rewandy: all other requests are working correctly
[2014-05-29 16:35:12 -0400] rewandy: including a GET /search/node?q=whatever
[2014-05-29 16:35:34 -0400] rewandy: i'm trying to do a partial search which requires me to POST
[2014-05-29 16:36:12 -0400] shlant: rewandy: what are you trying to accomplish?
[2014-05-29 16:36:33 -0400] rewandy: a partial search
[2014-05-29 16:36:45 -0400] rewandy: http://docs.opscode.com/api_chef_server.html#id42
[2014-05-29 16:44:45 -0400] medya: Is it possible to have a node without SSH access and still be provisioned by chef ?
[2014-05-29 16:47:21 -0400] ScienceFairy: anyone available to hep with an initial install problem? i used the omnibus installer for chef server, nothing special, vanilla installation. the default admin credentials fail to log me in, and just redirect me back to the login screen. can't seem to find anything in the logs to point to why that would be.
[2014-05-29 16:48:14 -0400] phantasm66: Hey Chefs: question.... so i make a LWRP in a cookbook. The cookbook name is 'foo'... and my resource and provider files are named resources/setup.rb and providers/setup.rb
[2014-05-29 16:48:30 -0400] phantasm66: So, in my recipe.. i start a resource block like so:
[2014-05-29 16:48:42 -0400] phantasm66: foo_setup "resource_name" do
[2014-05-29 16:49:01 -0400] phantasm66: is there anyway to explictly set the resource itself's name?
[2014-05-29 16:49:30 -0400] phantasm66: instead of a concatenation of "cookbook_name" + "resource/provider filename"
[2014-05-29 16:49:32 -0400] phantasm66: ?
[2014-05-29 16:50:25 -0400] Er00: Is it possible to rename an environment? Or would I have to create a new one, copy the data from the old one (except the name, obviously) and then change the environment on each of the nodes individually?
[2014-05-29 16:50:31 -0400] gleam: not with a lwrp, phantasm66
[2014-05-29 16:50:40 -0400] gleam: if you name it default.rb then it'll just be foo instead of foo_setup, but that's it
[2014-05-29 16:51:15 -0400] phantasm66: @gleam, k. thanks :)
[2014-05-29 16:51:51 -0400] ScienceFairy: Any pointers where a n00b may try and pinpoint the issue with the initial admin/p@ssw0rd1 credentials failing to log me in to a new, vanilla installation?
[2014-05-29 16:52:11 -0400] Er00: ScienceFairy: try a different browser
[2014-05-29 16:52:34 -0400] Er00: Had one install where it did that in FF but not Opera, took us ages to pin down why I could log in but my colleague couldn't
[2014-05-29 16:53:23 -0400] ScienceFairy: Er00: it fails in both chrome and ff. i'll see if i can try opera.
[2014-05-29 16:53:56 -0400] Er00: ok
[2014-05-29 16:54:05 -0400] Er00: I don't think we ever figured out *why*
[2014-05-29 16:55:07 -0400] ScienceFairy: yeah it's very odd. i can't find anything in the logs which gives me a good pointer.
[2014-05-29 16:55:29 -0400] geggam: anyone run chef server in the cloud and put it behind an ELB ?
[2014-05-29 16:55:44 -0400] ScienceFairy: well, there's this, but it's not super helpful:
[2014-05-29 16:56:02 -0400] ScienceFairy: 2014-05-29_16:52:53.53236 Started POST "/users/login_exec" for 108.23.214.179 at 2014-05-29 16:52:53 +0000 2014-05-29_16:52:53.53440 Processing by UsersController#login_exec as HTML 2014-05-29_16:52:53.53471   Parameters: {"utf8"=>"", "authenticity_token"=>"xIa69i6ywZhuPSjFLOUD4ICED/a9bPYfmp3YVGGAtBo=", "name"=>"admin", "commit"=>"login", "password"=>"[FILTERED]"} 2014-05-29_16:52:58.03013 Redirected to https://ec2-54-208-165-
[2014-05-29 16:56:15 -0400] ScienceFairy: ugh
[2014-05-29 16:56:16 -0400] ScienceFairy: n/m
[2014-05-29 16:56:46 -0400] geggam: what do you use the UI for ?
[2014-05-29 17:08:52 -0400] medya: is there an uninstall action for a package in cookbooks?
[2014-05-29 17:10:50 -0400] someara: medya sure is: http://docs.opscode.com/resource_package.html
[2014-05-29 17:10:52 -0400] someara: action :remove
[2014-05-29 17:11:35 -0400] medya: great thanks
[2014-05-29 17:16:02 -0400] medya: is there any way to rename a node in chef ?
[2014-05-29 17:18:41 -0400] shlant: medya: google is your friend. http://pauldowman.com/2011/12/18/how-to-rename-a-chef-node
[2014-05-29 17:19:41 -0400] medya: shlant, I did read that but it is not really renaming, it is deleting and creating it again
[2014-05-29 17:20:36 -0400] shlant: medya: that's because it's the only way to change a node name
[2014-05-29 17:29:46 -0400] ScienceFairy: Anyone ever see this in the chef-server-webui log?
[2014-05-29 17:29:47 -0400] ScienceFairy: Filter chain halted as :require_login rendered or redirected
[2014-05-29 17:30:26 -0400] ScienceFairy: Just stood up a brand-new instance on AWS, Ubuntu 12.04 with omnibus Chef installer. After running the initial reconfigure, I'm unable to login to the UI using the default admin/p@ssw0rd1 combo.
[2014-05-29 17:45:45 -0400] lucasheinlen: Is it possible to install Chef Server on Ubuntu 14.04 or is there some reason it won't work?  I see that there are only packages listed up to 12.10.
[2014-05-29 17:49:08 -0400] grepory: Where does the code for "knife encrypt" live?
[2014-05-29 17:49:58 -0400] sanguisdex: lucasheinlen:  it should work, that's the beauty of chef it is is an apstration layer ontop of packages managers
[2014-05-29 17:59:44 -0400] Majost: coderanger: have you seen orchardup.com? I know in your case this isn't really needed; but it looks like it may be as simple as changing the docker command to 'orchard docker' and specifying their stuff for the host
[2014-05-29 18:00:16 -0400] Majost: coderanger: there would still need to be some pre and post setup steps to create the instances in their cloud via a travis file
[2014-05-29 18:00:29 -0400] Majost: but it looks like it could be a good option.
[2014-05-29 18:00:42 -0400] Majost: I am going to try it out if I get some time this week
[2014-05-29 18:07:42 -0400] lucasheinlen: sanguisdex: Thanks for the reply.  Sorry about dropping off.  I assumed it should work but just figured I'd double check.
[2014-05-29 18:08:26 -0400] clayb: Is there any way to issue a Chef server search query from within a ruby role definition? (I'm looking to get back a list of nodes which have a particular recipe in their run list.) I know of the pattern for requiring ohai to get node info in a ruby role but haven't seen anyone include chef or if chef provides any objects to the role.
[2014-05-29 18:12:42 -0400] ScienceFairy: Has anyone had trouble logging in with the default admin/p@ssw0rd1 credentials on a newly installed chef server using the omnibus installer? I've tried this behind a VPC, and also in standard EC2 on AWS, but the initial login just redirects me back to the login screen. I'm nearly at my wits' end here.
[2014-05-29 18:13:47 -0400] medya: if I download a cookbook from community site using berkshelf and then modify a few lines of it, if I do berks install, will download it again from community site and overwrite my changes?
[2014-05-29 18:14:14 -0400] shlant: ScienceFairy: what do you mean "After running the initial reconfigure"
[2014-05-29 18:14:52 -0400] ScienceFairy: so when i install the omnibus pkg, the first step it has me do is run "sudo chef-server-ctl reconfigure" to configure the instance
[2014-05-29 18:14:58 -0400] ScienceFairy: i do that, it does its thing with no errors
[2014-05-29 18:15:08 -0400] shlant: medya: are you modifying it in .berkshelf/default/cookbooks?
[2014-05-29 18:15:13 -0400] medya: yeah
[2014-05-29 18:15:34 -0400] ScienceFairy: and then when i try logging in for the first time using the default admin/p@ssw0rd1 combo, it just spins and then sends me back to the login screen.
[2014-05-29 18:16:03 -0400] ScienceFairy: i've tried on instances behind my VPC, as well as vanilla EC2 classic (no VPC), tried with different browsers, to no avail
[2014-05-29 18:17:00 -0400] medya: shlant, yeah
[2014-05-29 18:20:08 -0400] shlant: medya: why are you modifying community cookbooks? and to answer your question, no it overwrite it because it jsut looks at version
[2014-05-29 18:20:20 -0400] shlant: won't
[2014-05-29 18:21:58 -0400] medya: I know the right way to modify a community cookbook, is to write a wrapper cookbook, but where do I put my wrapper cookbook ? same folder where the berkshelf downloads stuff?
[2014-05-29 18:23:19 -0400] shlant: medya: you can create a cookbook wherever you want such as ~/Work/cookbooks
[2014-05-29 18:23:29 -0400] shlant: but no you would not put it in /berkshelf
[2014-05-29 18:23:35 -0400] medya: do I need to specify a version for my wrapper cookbook?
[2014-05-29 18:23:36 -0400] shlant: there is no reason why you should be going in there
[2014-05-29 18:23:51 -0400] shlant: medya: us knife cookbook create foo
[2014-05-29 18:23:55 -0400] shlant: use*
[2014-05-29 18:24:06 -0400] shlant: it will create the folders you need
[2014-05-29 18:24:17 -0400] shlant: put it somewhere like ~/Work
[2014-05-29 18:24:33 -0400] medya: gotcha
[2014-05-29 18:25:02 -0400] shlant: ScienceFairy: yea I'm not sure why that's happening. maybe EC2?
[2014-05-29 18:25:47 -0400] ScienceFairy: yeah, been working with hostname settings as well, but no dice.
[2014-05-29 18:26:33 -0400] medya: can I delete cookbooks using berks ?
[2014-05-29 18:27:30 -0400] medya: some dumb tutorial on internet told me to modify the cookbook, and I did (without making a wrapper for it) and then berks uploaded it to the chef server, because now it becomes compilcated, acording to you if I make changes to the cookbook it wont be updated on the server because it looks at the  version and see it is same and wont update it
[2014-05-29 18:28:16 -0400] geggam: aws is the most liberating confining tool i have ever used
[2014-05-29 18:28:26 -0400] geggam: use all this crap.... but only use it like this
[2014-05-29 18:28:46 -0400] ScienceFairy: lol hear hear, brother
[2014-05-29 18:28:51 -0400] ScienceFairy: have you seen anything like this before?
[2014-05-29 18:35:28 -0400] medya: do you create a seprate databag per each cookbook ? or you make one databag for multiple coookbooks, what is the best practice?
[2014-05-29 18:41:29 -0400] loki97123: hello
[2014-05-29 18:41:41 -0400] loki97123: cmd="ls /tmp/*"
[2014-05-29 18:41:44 -0400] loki97123: cmd
[2014-05-29 18:41:54 -0400] loki97123: in a library
[2014-05-29 18:42:03 -0400] loki97123: what would you expect the outcome
[2014-05-29 18:42:21 -0400] loki97123: is the cmd starting a new shell
[2014-05-29 18:42:31 -0400] loki97123: or will globbing go by the wayside
[2014-05-29 18:42:36 -0400] loki97123: ...
[2014-05-29 18:42:50 -0400] loki97123: has chef-client 11.>10 changed the way that works?
[2014-05-29 18:44:44 -0400] shlant: medya: in response to your first question: you asked if berks install would overwrite, not berks upload. Berks upload would overwrite on the server if the same version only if the version is not frozen (which berkshelf does when uploading)
[2014-05-29 18:45:03 -0400] kK____: using a data bag to store app config, trying to load the data bag and write it to a file (/etc/environment), but cant find documentation on how to loop through the whole data bag and write all values in a format like {github: {key:value, key2:value}} -> github__key=value github__key2=value
[2014-05-29 18:45:13 -0400] shlant: as for data bags, it depends on what your using it for
[2014-05-29 18:45:23 -0400] loki97123: open the data bag
[2014-05-29 18:45:29 -0400] loki97123: pass in as hash
[2014-05-29 18:45:51 -0400] medya: let say I am installing a jboss and a lamp stack
[2014-05-29 18:45:54 -0400] loki97123: look at the library and resource provider on sensu
[2014-05-29 18:45:56 -0400] medya: do I need a databag for jboss
[2014-05-29 18:46:09 -0400] medya: and one databag for each of  L-A-M-P
[2014-05-29 18:46:20 -0400] shlant: medya: again, what is the databag for?
[2014-05-29 18:46:25 -0400] medya: credentials
[2014-05-29 18:46:42 -0400] medya: isnt that what databag is for credentials and attributes?
[2014-05-29 18:47:24 -0400] shlant: medya: I would recommend only using data bags for data that is required across multiple nodes
[2014-05-29 18:47:34 -0400] shlant: otherwise use attributes in the cookbook itself
[2014-05-29 18:47:44 -0400] medya: data like what ?
[2014-05-29 18:48:10 -0400] medya: so you recommend putting credentials in the cookbook itself ? but it is not encrypted in attribute files in cookbook
[2014-05-29 18:48:15 -0400] medya: you can encrypt databags
[2014-05-29 18:48:41 -0400] shlant: medya: definitely do not put creds in cookbooks
[2014-05-29 18:48:50 -0400] shlant: you can use encrypted data bags
[2014-05-29 18:49:05 -0400] shlant: or citadel if you're on AWS
[2014-05-29 18:49:26 -0400] shlant: or some other key value stroe (more complicated)
[2014-05-29 18:50:13 -0400] medya: so you say I should use data bags for credentials
[2014-05-29 18:50:17 -0400] dcparker: anyone ever had an issue where knife openstack just hangs? it gives me an error if i put in a bad url or try network list since I'm on nova-network, other it never returns anything. i am able to make API calls to openstack outside of knife-openstack as well. This just started happening today, nothing changed that i know of
[2014-05-29 18:50:35 -0400] medya: so back to my first questions, should there be one databag per cookbook
[2014-05-29 18:51:10 -0400] juliancdunn: data bags are global data, so no
[2014-05-29 18:51:15 -0400] juliancdunn: in 99% of the situations, you won't use data bags
[2014-05-29 18:51:49 -0400] juliancdunn: http://www.getchef.com/blog/2014/01/23/attributes-or-data-bags-what-should-i-use/
[2014-05-29 18:52:39 -0400] shlant: medya: if it's credentials, you don't really have a choice as you can't encrypt attributes
[2014-05-29 18:52:51 -0400] shlant: so you would have a single encrypted data bag
[2014-05-29 18:52:55 -0400] shlant: with the credentials
[2014-05-29 18:53:04 -0400] shlant: and whatever cookbooks needs those credentials
[2014-05-29 18:53:09 -0400] shlant: should use that data bag
[2014-05-29 18:53:39 -0400] medya: ok thanks juliancdunn
[2014-05-29 18:56:58 -0400] medya: @juliancdunn you said in 99% of the situations, you won't use data bags, so when you mean 99% of the times you dont need to encrypt your credentials ?
[2014-05-29 18:57:31 -0400] medya: so 99% of the times you dont need to encrypt your credentials ?
[2014-05-29 18:58:09 -0400] juliancdunn: no, I mean, there are narrow use cases for the use of data bags
[2014-05-29 18:58:35 -0400] juliancdunn: don't let the fact that you need to encrypt credentials drive the entire architecture of how/when you use data bags is all I say
[2014-05-29 18:58:40 -0400] coderanger: Majost: I already have the docker bits running, at this point I just need to fix kitchen so it stops timing out
[2014-05-29 19:00:52 -0400] geggam: juliancdunn, i find databags to be better than attributes :)
[2014-05-29 19:00:55 -0400] medya: when a client uses the databag item, does it have to fetch it from server every time  ? or it downloads it once and decrypts locally each time?
[2014-05-29 19:02:31 -0400] coderanger: medya: There is no caching, if you want to re-use it you need to do that in your own code
[2014-05-29 19:02:34 -0400] geggam: when you scale large systems with multiple application tiers you always want that data to be available to all the applications...databags eliminate the problem where new apps cant reach old data
[2014-05-29 19:03:16 -0400] medya: so each time it fetches the databag item from chef-server each time it wants to use it
[2014-05-29 19:03:36 -0400] juliancdunn: geggam: I'd still argue that you should solve for those specific use cases and not apply a blanket rule
[2014-05-29 19:04:04 -0400] geggam: time for solving is a luxury...deadlines dont allow for luxiries
[2014-05-29 19:04:11 -0400] geggam: or luxuries
[2014-05-29 19:09:03 -0400] tbenz9: I'm using the windows_package resource and it's reporting "Installer type for Windows Package 'WinZip12.1' not specified and cannot be determined from file extension 'exe'"
[2014-05-29 19:09:12 -0400] tbenz9: Any ideas why it doesn't know what an exe is?
[2014-05-29 19:10:32 -0400] tbenz9: Anyone here even using chef on Windows?
[2014-05-29 19:11:14 -0400] datallah: tbenz9: .exe could be any number of installers
[2014-05-29 19:11:43 -0400] tbenz9: Ah, could you give me an example?  I read something about "inno" but I don't know what that is.
[2014-05-29 19:12:21 -0400] tbenz9: So I need to include "installer_type" in my recipe?
[2014-05-29 19:12:43 -0400] troyready: Yeah, exactly
[2014-05-29 19:13:02 -0400] datallah: if it isn't able to determine it, then yes - see https://github.com/opscode-cookbooks/windows
[2014-05-29 19:14:05 -0400] tbenz9: Great, let me try that.
[2014-05-29 19:18:19 -0400] tbenz9: Is "installer_type" supposed to be a string?
[2014-05-29 19:18:31 -0400] tbenz9: The docs say "installer_type :inno"
[2014-05-29 19:18:43 -0400] tbenz9: and my chef run says "FATAL: Chef::Exceptions::ValidationFailed: Option installer_type must be a kind of [String]!  You passed :inno."
[2014-05-29 19:24:39 -0400] Majost: Does ohai pick up some magic attribute when chef is running via test kitchen?
[2014-05-29 19:29:30 -0400] Majost: I want to be able to detect if its a test kitchen run to exclude some of the user management behavior
[2014-05-29 19:30:07 -0400] Majost: or include the correct users in the sudoers (eg: kitchen or vagrant) for example
[2014-05-29 19:35:00 -0400] arir_a: ohai all!
[2014-05-29 19:35:23 -0400] Majost: :q
[2014-05-29 19:35:34 -0400] Majost: oops, wrong window
[2014-05-29 19:35:35 -0400] Majost: heh
[2014-05-29 19:35:59 -0400] coderanger: Majost: No, you would have to set something
[2014-05-29 19:37:15 -0400] pl1ght: anyone point me to the parameters I can pass to with_fog_ec2_provisioner for chef-metal-fog?  The link is 404'd "https://github.com/opscode/chef-metal/blob/master/lib/chef_metal/provisioner/fog_provisioner.rb#L21-L32"
[2014-05-29 19:37:40 -0400] arir_a: @Majost, vim for the win
[2014-05-29 19:38:00 -0400] Majost: heh
[2014-05-29 19:38:43 -0400] shlant: coderanger: can I use the application_ruby cookbook if I want to use nginx instead of apache?
[2014-05-29 19:39:27 -0400] coderanger: shlant: 1) yes 2) don't :)
[2014-05-29 19:40:16 -0400] shlant: coderanger: what conglomeration of cookbooks would you recommend for a ruby app server with nginx and unicorn?
[2014-05-29 19:40:28 -0400] shlant: just all the separate cookbooks
[2014-05-29 19:40:31 -0400] shlant: and deploy?
[2014-05-29 19:41:36 -0400] shlant: seems like all methods of deploying are gross/broken
[2014-05-29 19:41:45 -0400] geggam: yum works
[2014-05-29 19:41:55 -0400] geggam: apt-get works
[2014-05-29 19:42:12 -0400] geggam: package your stuff and leverage the thousands of man hours that went into those tools :)
[2014-05-29 19:42:30 -0400] geggam: or dont and reinvent the wheel
[2014-05-29 19:43:44 -0400] shlant: geggam: if I wanted to go that route I'd revert to being a sysadmin
[2014-05-29 19:44:08 -0400] coderanger: shlant: Yep, its all pretty gross right now :-(
[2014-05-29 19:44:31 -0400] coderanger: shlant: I'm working on it, need to get my testing harnesses in a good place so I can feel comfortable making releases again
[2014-05-29 19:44:57 -0400] coderanger: shlant: [insert rant here about lack of support for having a good app deployment/platform story for Chef]
[2014-05-29 19:49:34 -0400] stormerider: is there a way to see what the current enterprise chef package versions are at, to see if we're current or out of date?
[2014-05-29 19:50:08 -0400] shlant: coderanger: I believe in you
[2014-05-29 19:51:02 -0400] shlant: coderanger: so you were saying to use the git resource separately from the application resource? If so, how do I point it to the repo?
[2014-05-29 19:51:11 -0400] Majost: stormerider: you can register/request from getchef.com
[2014-05-29 19:51:21 -0400] Majost: but its 11.1.4
[2014-05-29 20:00:14 -0400] stormerider: Majost: i mean for all the packages, like the private server, the push jobs, the manager, etc.
[2014-05-29 20:04:06 -0400] coderanger: shlant: how do you point the got resource at it?
[2014-05-29 20:05:27 -0400] shlant: coderanger: well you would have to tell the application resource where to find the git repo, yes?
[2014-05-29 20:05:32 -0400] shlant: or am i confused
[2014-05-29 20:06:09 -0400] coderanger: no, just don't use the app cookbooks
[2014-05-29 20:06:25 -0400] coderanger: do it all yourself, got resource and a few executes
[2014-05-29 20:07:00 -0400] coderanger: if what you want isn't exactly what the app cookbooks offer, it's probably more work to wrangle them than to do it yourself
[2014-05-29 20:07:25 -0400] coderanger: which I hope to improve, but it's a slow battle
[2014-05-29 20:08:25 -0400] damien: greetings!
[2014-05-29 20:09:24 -0400] damien: how do I start chef-shell in a chef solo vagrant box so that it loads the cookbooks/recipes?  I am doing sudo chef-shell --solo -j /tmp/vagrant-chef-1/dna.json but it only ever says loading configuration: none (standalone session)
[2014-05-29 20:10:39 -0400] spheromak: damien: you might want to give it your solo.rb  as well with -c
[2014-05-29 20:16:15 -0400] jamesgolick: hey - so, I'm trying to provide people with recipes for which to install https://packagecloud.io repos
[2014-05-29 20:16:26 -0400] jtimberman: jamesgolick: <3
[2014-05-29 20:16:28 -0400] jamesgolick: wondering what the best way is - should i create a packagecloud_repo definition?
[2014-05-29 20:17:15 -0400] jamesgolick: and then get people to import our cookbook or....?
[2014-05-29 20:17:52 -0400] coderanger: jamesgolick: an lwrp probably, but yep
[2014-05-29 20:18:01 -0400] jtimberman: jamesgolick: i'd suggest a chef resource ("HWRP" using the LWRP DSL is my preference for such thing these days)
[2014-05-29 20:18:07 -0400] chazzly: I there a way to role and environment attributes cumulatively build an array?  i.e. a recipe sets the default to ["a"], I would like the role to add ["b"] and the Environment to add ["c"] for an end result of ["a","b","c"]
[2014-05-29 20:18:31 -0400] jamesgolick: jtimberman / coderanger: and how do they install my cookbook?
[2014-05-29 20:18:38 -0400] jtimberman: chazzly: coderanger wrote a great blog post about the hazards of additive arrays as chef attributes
[2014-05-29 20:18:52 -0400] ypaq: hey, can i tell kitchen that a suite is supposed to have a specific environment?
[2014-05-29 20:19:06 -0400] jtimberman: jamesgolick: depends? I mean, you'd provide primitives so people who want to use it would depend on it in their cookbooks' metadata.
[2014-05-29 20:19:07 -0400] coderanger: jamesgolick: list it on the community site
[2014-05-29 20:19:08 -0400] chazzly: and an alternative approach, I hope :-)?
[2014-05-29 20:19:23 -0400] coderanger: people pull it in as a dependency via berkshelf
[2014-05-29 20:19:23 -0400] jtimberman: and yeah make releases on the community site.
[2014-05-29 20:20:04 -0400] jamesgolick: is there a knife cmd that ppl use to import cookbooks from the community site?
[2014-05-29 20:20:06 -0400] phantasm66: are only_if and not_if attributes available to custom LWRP's?
[2014-05-29 20:20:39 -0400] ypaq: jamesgolick: did you look at Berkshelf or librarian-chef?
[2014-05-29 20:20:53 -0400] phantasm66: and i don't mean in the custom provider code, but in the custom LWRP resource block in a recipe
[2014-05-29 20:21:03 -0400] coderanger: jamesgolick: technically yes, but it is by far not he rig thing to use
[2014-05-29 20:21:09 -0400] jamesgolick: ypaq: yeah I'm just trying to figure out what the simplest way is for packagecloud users to get setup
[2014-05-29 20:21:16 -0400] jtimberman: jamesgolick: "yes" but most use berkshelf or librarian these days
[2014-05-29 20:21:35 -0400] jamesgolick: fair enough but i wanna find the easiest way to get ppl up and running
[2014-05-29 20:21:39 -0400] jtimberman: nod
[2014-05-29 20:21:42 -0400] jamesgolick: if the chef recipe instructions are like install 10 things
[2014-05-29 20:21:54 -0400] jamesgolick: that might be asking too much
[2014-05-29 20:22:19 -0400] ypaq: jamesgolick: package the instructions in a role wouldn't work?
[2014-05-29 20:22:33 -0400] jamesgolick: ypaq: I don't follow
[2014-05-29 20:22:36 -0400] jtimberman: well, for users who have berkshelf or librarian, putting a depends "packagecloud" (or whatever you call the cookbook) in their cookbook's metadata means dependency resolution happens.
[2014-05-29 20:22:53 -0400] jamesgolick: oh interesting
[2014-05-29 20:23:01 -0400] ypaq: jamesgolick: sorry, guess i misunderstood
[2014-05-29 20:23:02 -0400] jtimberman: like, if i want to use packagecloud
[2014-05-29 20:23:10 -0400] jamesgolick: *when :-P
[2014-05-29 20:23:16 -0400] jtimberman: :D
[2014-05-29 20:23:21 -0400] damien: spheromak, k I will give that a try, ty
[2014-05-29 20:23:56 -0400] CPS: is there an option i can pass to knife to be able to do `knife data bag from file bagname file.json` when bagname doesn't exist yet, is a new bag?
[2014-05-29 20:24:00 -0400] jtimberman: anyway WHEN i want to use packagecloud for setting up repositories that have the packages i want to install via my recipes, i'd totally want ot just add the dependency and let berkshelf do the heavy lifting.
[2014-05-29 20:24:10 -0400] CPS: it complains about the data bag not existing
[2014-05-29 20:24:24 -0400] jamesgolick: jtimberman: cool, that's perfect.
[2014-05-29 20:24:33 -0400] jamesgolick: also /me switches our infra to using berkshelf
[2014-05-29 20:42:06 -0400] bneuman: Hi - pretty new to chef. I manually installed ruby2.0 on an Amazon Linux box using yum install ruby. If I now add package ruby somewhere in my chef routines for that box, will it recognize that Ruby is already installed/up-to-date?
[2014-05-29 20:42:53 -0400] CPS: chef comes with ruby 1.9 embedded
[2014-05-29 20:42:59 -0400] CPS: you don't need a separate install
[2014-05-29 20:43:01 -0400] cheeseplus: bneuman: yes, it'll check the platform pkg provider (yum) and know
[2014-05-29 20:43:54 -0400] bneuman: thanks
[2014-05-29 20:45:12 -0400] damien: CPS I wrote a couple of one liners to do the data bag creation for items when bag doesn't exist: http://pastebin.com/XmXpxN9E
[2014-05-29 20:46:02 -0400] jamesgolick: how do I get the OS and version from chef? is it possible to know that I'm on ubuntu/precise, for example?
[2014-05-29 20:48:00 -0400] mattray: jamesgolick: yeah, node['platform'] and node['platform_version'] I think
[2014-05-29 20:48:26 -0400] mattray: jamesgolick: you might want to look at chef-sugar, it's got lots of helpers around such things https://github.com/sethvargo/chef-sugar
[2014-05-29 20:48:43 -0400] jamesgolick: thx mattray
[2014-05-29 20:49:12 -0400] mattray: some of these are pretty slick: https://github.com/sethvargo/chef-sugar#platform
[2014-05-29 20:50:02 -0400] jamesgolick: ya that's dope
[2014-05-29 20:50:23 -0400] jidar: anybody got any experience with vCloud director and chef?
[2014-05-29 20:51:25 -0400] CPS: thanks damien i'll see if this will do it for us
[2014-05-29 21:07:16 -0400] alexbst: howdy jbz
[2014-05-29 21:07:23 -0400] jbz: whasssap
[2014-05-29 21:07:34 -0400] alexbst: watching railcasts for format inspiration
[2014-05-29 21:07:48 -0400] alexbst: and starting some ASGs in preparation for a demo :-)
[2014-05-29 21:17:03 -0400] mattray: jidar: I should be doing some work with VMware soon. There's a knife-vcloud that should work: https://github.com/opscode/knife-vcloud
[2014-05-29 21:21:26 -0400] jidar: mattray: yea, I was just more curious about some real world experience with it
[2014-05-29 21:21:58 -0400] mattray: jidar: hopefully I'll be digging in next month
[2014-05-29 21:43:02 -0400] star_unicorn089: Hello Chef users and channel operators. I am getting issues building my infrastructure running spiceweasel for the first time. I am getting errors. Can anyone help me?
[2014-05-29 21:43:31 -0400] mattray: star_unicorn089: you have a gist of the error output?
[2014-05-29 21:43:42 -0400] star_unicorn089: yes
[2014-05-29 21:43:58 -0400] star_unicorn089: ill send it to you.
[2014-05-29 22:14:22 -0400] Wes99999: Has anyone get this error? "ERROR: Net::HTTPBadResponse: wrong status line: "<html>""
[2014-05-29 22:14:32 -0400] Wes99999: when running sudo knife cookbook upload getting-started
[2014-05-29 22:14:33 -0400] Wes99999: ?
[2014-05-29 22:17:28 -0400] Wes99999: Has anyone get this error? "ERROR: Net::HTTPBadResponse: wrong status line: "<html>""
[2014-05-29 22:20:32 -0400] kvad32: Hey all, whats a good comunity cookbook to use for a rails site in aws?
[2014-05-29 22:21:26 -0400] Majost: is it possible to search or partial search an encrypted data bag?
[2014-05-29 22:21:57 -0400] Majost: I have some nested key/value pairs I want to access individually
[2014-05-29 22:22:14 -0400] Majost: and search might be a way to do this
[2014-05-29 22:22:25 -0400] Majost: I haven't thought of another way yet
[2014-05-29 22:30:58 -0400] stormerider: Majost: i think coderanger has answered this in the past, from what i remember it's not part of the published API but it can be done if you muck around with undocumented api endpoints, but is highly not recommended.
[2014-05-29 22:31:15 -0400] stormerider: i'd search previous channel transcripts
[2014-05-29 22:31:45 -0400] coderanger: Majost: You can't really search on an encrypted bag
[2014-05-29 22:31:56 -0400] coderanger: I mean you could, but you would have to search on the encrypted form
[2014-05-29 22:32:02 -0400] Majost: oh
[2014-05-29 22:32:05 -0400] Majost: thats ugly
[2014-05-29 22:32:15 -0400] Majost: that wont work for my situation either
[2014-05-29 22:32:17 -0400] Majost: =/
[2014-05-29 22:33:09 -0400] stormerider: coderanger: ah, then i must be thinking of something else that was undocumented/subject to change... programmattically writing to encrypted databags, maybe?
[2014-05-29 22:33:31 -0400] coderanger: Yeah, thats undocumented
[2014-05-29 22:33:33 -0400] Majost: I think I might be able to select
[2014-05-29 22:34:05 -0400] Majost: and just get the decrypted hash blob and select the specific nested value
[2014-05-29 22:51:11 -0400] shlant: coderanger: I'm running into an issue with git where is says key denied on the chef run, but when I ssh in, ssh-add the key and test, it works
[2014-05-29 22:51:26 -0400] shlant: is my ssh_wrapper broken?
[2014-05-29 22:51:51 -0400] coderanger: shlant: what does your wrapper look like?
[2014-05-29 22:53:12 -0400] shlant:  /usr/bin/env ssh -o "StrictHostKeyChecking=no" -i "/var/chef/cache/git_key" $1 $2
[2014-05-29 22:53:29 -0400] coderanger: shlant: Hmm, looks okay, check permissions on the key?
[2014-05-29 22:53:34 -0400] shlant: 0600
[2014-05-29 22:53:49 -0400] shlant: 755 on wrapper
[2014-05-29 22:56:02 -0400] shlant: coderanger: even after adding it to ssh-agent and testing, the reporvision fails with the same
[2014-05-29 22:56:04 -0400] shlant: wtf
[2014-05-29 22:56:16 -0400] coderanger: I don't know what ssh-agent has anything to do with it
[2014-05-29 22:56:31 -0400] shlant: coderanger: well ssh-add adds the key to the agent
[2014-05-29 22:56:50 -0400] shlant: not sure why that's even relevant
[2014-05-29 22:56:56 -0400] shlant: as the wrapper points to the key
[2014-05-29 22:57:22 -0400] coderanger: Sure, but depending on how you are running chef there is a high likelihood it isn't visible to chef
[2014-05-29 22:58:06 -0400] coderanger: If you run `env GIT_SSH=/path/to/wrapper git clone ` does it work?
[2014-05-29 22:59:02 -0400] shlant: coderanger: nope
[2014-05-29 22:59:17 -0400] coderanger: Okay, so figure out why that isn't working :)
[2014-05-29 23:05:35 -0400] chef-installer: looking for some help installing community version of chef-server.
[2014-05-29 23:07:53 -0400] chef275: I am trying to install community chef-server over web proxy and getting a weird error.  See if anyone can help
[2014-05-29 23:10:08 -0400] chef275: I've install chef-server via the omnibus.  chef-server-ctl reconfigure unable to complete.  My server is behind a firewall and I am proxying all my web traffic
[2014-05-29 23:10:45 -0400] chef275: Is there a document on installing chef-server over proxy?
[2014-05-29 23:15:02 -0400] coderanger: chef275: Does the server have a real FQDN?
[2014-05-29 23:27:51 -0400] chef275: @chef257 yes
[2014-05-29 23:27:59 -0400] chef275: @coderanger ^
[2014-05-29 23:28:13 -0400] chef275: @coderanger the error log shows: /opt/chef-server/embedded/lib/ruby/gems/1.9.1/gems/mixlib-shellout-1.4.0/lib/mixlib/shellout.rb:257:in `invalid!'
[2014-05-29 23:28:27 -0400] coderanger: chef275: You would need to pastebin the full error
[2014-05-29 23:28:35 -0400] chef275: this failed at reconfigure
[2014-05-29 23:29:09 -0400] chef275: where do I paste it to?
[2014-05-29 23:30:37 -0400] chef275: @coderanger where do I pastebin to?
[2014-05-29 23:30:55 -0400] coderanger: chef275: I use hastebin.com, but there are many sites out there
[2014-05-29 23:31:01 -0400] coderanger: gist.github.com is also popular
[2014-05-29 23:32:17 -0400] chef275: @coderanger ok.  pastebin : http://pastebin.com/Uw0Q6eyt
[2014-05-29 23:34:12 -0400] chef275: @coderanger this server is firewalled and all outgoing access go through a proxy server
[2014-05-29 23:34:16 -0400] kisoku: wow. community site is dog slow
[2014-05-29 23:35:47 -0400] coderanger: chef275: Thats talking to localhost though
[2014-05-29 23:35:57 -0400] chef275: @coderanger agreed
[2014-05-29 23:36:16 -0400] coderanger: chef275: looks like error 52 is "empty reply from server"
[2014-05-29 23:36:33 -0400] coderanger: so take a look at your erchef and see why it isn't responding
[2014-05-29 23:39:36 -0400] chef275: @coderanger here is the screen capture : http://pastebin.com/faXajpjZ
[2014-05-29 23:40:30 -0400] coderanger: chef275: Yes, check the erchef logs
[2014-05-29 23:41:10 -0400] chef275: @coderanger I don't see nginx running in process list
[2014-05-29 23:43:59 -0400] coderanger: chef275: nginx isn't involved, thats talking to erchef directly
[2014-05-29 23:44:04 -0400] chef275: @coderanger updated erchef.log : http://pastebin.com/pkvhxDh4
[2014-05-29 23:45:31 -0400] coderanger: chef275: Seems normal to me, just have to figure out whats wrong, I would try the curl yourself with debugging on and see how far it gets before disconnect
[2014-05-29 23:46:40 -0400] chef275: @coderanger ok
[2014-05-29 23:48:40 -0400] chef275: @coderanger  curl output at http://pastebin.com/W4mK9D5s
[2014-05-29 23:49:19 -0400] coderanger: chef275: Not sure why you keep pastbining everything, you need to go debug it :)
[2014-05-29 23:49:56 -0400] chef275: @coderanger got it.  I'll debug for a while.  Thanks
[2014-05-29 23:50:22 -0400] coderanger: Theres a lot of things that can cause it to not respond, the simplest thing to try is simply restart erchef though

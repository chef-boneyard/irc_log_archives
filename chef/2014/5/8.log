[2014-05-08 01:07:06 -0400] rcrowley: What even are the appropriate value for -o option in `knife search -o"SORT" "*:*"`?  I can't find it anywhere.
[2014-05-08 01:08:05 -0400] rcrowley: Tried "ASC", "<", "up", "+", and "name" (as in the attribute).
[2014-05-08 01:26:18 -0400] digitalchild: rcrowley: is -o even an option?
[2014-05-08 01:26:48 -0400] rcrowley: Yes, it's the short version of --sort.
[2014-05-08 01:26:52 -0400] digitalchild: oh
[2014-05-08 01:30:29 -0400] digitalchild: even the source code is slim on it
[2014-05-08 01:30:36 -0400] digitalchild: https://github.com/opscode/chef/blob/master/lib/chef/knife/search.rb
[2014-05-08 01:31:58 -0400] rcrowley: Yep.  :/
[2014-05-08 01:34:58 -0400] digitalchild: sort by.. what!
[2014-05-08 01:35:02 -0400] digitalchild: heh
[2014-05-08 01:35:07 -0400] digitalchild: why do you need sorting?
[2014-05-08 01:36:59 -0400] rcrowley: Because `knife search -a"ec2.instance_type" "role:slack-db" | tr "\n" "Z" | sed "s/Z  ec2.instance_type://g" | tr "Z" "\n" | grep "." | sort` is idiotic.
[2014-05-08 01:37:16 -0400] digitalchild: heh
[2014-05-08 01:37:19 -0400] rcrowley: :)
[2014-05-08 03:49:49 -0400] stoked: is it expected behaviour to have chef-client-running.pid not removed after a chef run?
[2014-05-08 03:52:35 -0400] digitalchild: stoked: its in my cache
[2014-05-08 03:52:38 -0400] digitalchild: so yes?
[2014-05-08 03:53:05 -0400] stoked: digitalchild: ok
[2014-05-08 03:53:27 -0400] stoked: trying to find a way to know that the chef run is complete
[2014-05-08 03:53:37 -0400] stoked: watching for the pid file to disappear won't work
[2014-05-08 03:53:45 -0400] digitalchild: why?
[2014-05-08 03:54:01 -0400] stoked: why which?
[2014-05-08 03:54:39 -0400] digitalchild: why you looking to see when chef is finished
[2014-05-08 03:54:54 -0400] stoked: oh, packer needs to know when to continue on
[2014-05-08 03:55:17 -0400] stoked: but because I'm on windows, I had to use the chef-client windows service because of weird opensshd permissions
[2014-05-08 03:56:19 -0400] digitalchild: *nods*
[2014-05-08 03:56:30 -0400] digitalchild: ive not heard of packer before
[2014-05-08 03:56:36 -0400] digitalchild: looks like something i might be able to use
[2014-05-08 03:56:45 -0400] digitalchild: except id make a base image and then have chef do everything after the fact
[2014-05-08 03:57:01 -0400] stoked: yeah I'm trying to build baked images
[2014-05-08 03:57:12 -0400] stoked: pre-install updates and patches
[2014-05-08 03:57:13 -0400] stoked: install the apps
[2014-05-08 03:57:19 -0400] stoked: with chef
[2014-05-08 03:57:23 -0400] digitalchild: *nods*
[2014-05-08 03:57:34 -0400] stoked: then deploy from that and do another chef run for configs
[2014-05-08 03:57:46 -0400] stoked: should be much faster
[2014-05-08 03:57:54 -0400] digitalchild: so its a speed issue then?
[2014-05-08 03:58:08 -0400] stoked: not only
[2014-05-08 04:33:11 -0400] tempname: Anyone from opscode on this late at night?
[2014-05-08 05:24:51 -0400] coderanger: tempname: Whats your question
[2014-05-08 05:25:25 -0400] tempname: We upgraded our account from free to launch at around 3pm PST today and when I look at our subscription we are still on the free account
[2014-05-08 05:37:57 -0400] coderanger: tempname: ahh, best bet is to email support@getchef.com for stuff like that, but I wouldn't worry about it
[2014-05-08 05:59:49 -0400] pipework: I was almost found in puppetlabs territory. I felt like a sham, so I left as quickly as I came.
[2014-05-08 06:13:50 -0400] coderanger: pipework: Heh, I was there for the party yesterday for a bit
[2014-05-08 06:14:08 -0400] pipework: coderanger: I couldn't find my friend. :(
[2014-05-08 07:03:58 -0400] epcim: how to run chef-zero (to be able search) in VM created by test-kitchen+vagrant
[2014-05-08 07:08:54 -0400] JensOfSweden: Anyone know why when i use chef rest gem in a ruby script and do a get on a node i dont get the full json array from the request, just the node name?
[2014-05-08 07:59:30 -0400] drrk: does anyone know what happened to the Chromium cookbook?
[2014-05-08 08:59:45 -0400] JensOfSweden: Why do i get a 405 "Method Not Allowed" when i try to post data into a databag with rest?
[2014-05-08 09:55:18 -0400] bubu: Hey guys, anyone using knife to bootstrap linux boxes in azure here?
[2014-05-08 11:57:25 -0400] [iilliinn]_: does the service resource check the UID instead of the CMD when determining if a service is running?
[2014-05-08 12:14:06 -0400] moore267: Has anyone here ever had the mysql cookbook cause mysql to stop responding on its socket? I'm running this in CentOS 5 and 6
[2014-05-08 12:14:39 -0400] moore267: The service shows as running, but no one can connect via socket with having a manual service restart
[2014-05-08 12:27:40 -0400] binbintriangel: hello    can someone here help me with was cookbook please?
[2014-05-08 12:28:02 -0400] binbintriangel: was cookbook
[2014-05-08 12:28:53 -0400] binbintriangel: hello    can someone here help me with aws cookbook please?
[2014-05-08 13:28:19 -0400] mhenrixon: Anyone know what is up with this? Authentication failed for user mhenrixon@cspay01.casinosaga@cspay01.casinosaga
[2014-05-08 13:31:20 -0400] fifthecho: Looks like an authentication failure. Can you provide more context?
[2014-05-08 13:40:31 -0400] jespada: any hints, articles on how to make jenkins manage your cookbook versioning ?
[2014-05-08 13:43:17 -0400] JensOfSweden: How do you meen jespada
[2014-05-08 13:45:38 -0400] jespada: JensOfSweden, basically push a change,  if all the tests(rubocup, foodcritic, chefspec, kitchenci) goes well, change the version of that cookbook, and freeze and upload
[2014-05-08 13:46:55 -0400] mhenrixon: I had to set ssh user and password and I was good to go
[2014-05-08 13:47:07 -0400] mhenrixon: unfortunately there is no way to run commands as sudo using knife ssh
[2014-05-08 13:47:18 -0400] mhenrixon: for good and bad :D
[2014-05-08 13:48:09 -0400] JensOfSweden: jespada: You most likely have to have jenkins execute a script on a git pull. So write a script that tests everything and if exit 0 does a sed on the coocbook version and use knife to push the coobkook to your server
[2014-05-08 13:49:28 -0400] jespada: JensOfSweden, yeah something along those lines, just being lazy and asking away to see what ppl are doing
[2014-05-08 13:55:56 -0400] JensOfSweden: jespada: i did a simular thing except that i didnt update the cookbook version. The devs did that themselfs =)
[2014-05-08 14:04:20 -0400] jespada: JensOfSweden, yup, but that needs coordination somehow.. if more than one person is working on a cookbook.. so I want jenkins to act as a lock queue for changes or something like that
[2014-05-08 14:18:03 -0400] JensOfSweden: jespada: we had a master and a dev branch for cookbooks, devs then branched out from dev to work on cookbooks and tested them with vagrant and testkitchen. If they where happy with changes they merged it with dev and jenkins did its checks and sent it to the chef server then the "live" dev servers got the changes of the cookbook, when it worked ok i merged dev into master and jenkins pushed it out to the chef server a
[2014-05-08 14:18:04 -0400] JensOfSweden: gain and updated the environment for prod.
[2014-05-08 14:18:12 -0400] JensOfSweden: with the new cookbook version
[2014-05-08 14:29:43 -0400] jespada: JensOfSweden, I'm working on something similar, but not quite, thanks for sharing :)
[2014-05-08 14:46:24 -0400] mhenrixon: how do you guys manage distro updates etc? You automate that stuff too?
[2014-05-08 15:59:12 -0400] zeroXten: is there a reason not to put a recipe name in an attribute and do 'include_recipe "#{node.blah}"' ?
[2014-05-08 16:00:32 -0400] drywheat_: is there any reason why hosted Chef search is inconsistent? has anyone encountered this?
[2014-05-08 16:00:39 -0400] drywheat_: i'm finding it very unreliable
[2014-05-08 16:13:32 -0400] mattray: drywheat_: it's eventually consistent, or unreliable ever?
[2014-05-08 16:13:47 -0400] mattray: zeroXten: no reason
[2014-05-08 16:14:25 -0400] zeroXten: mattray: sweet... hack+1
[2014-05-08 16:14:37 -0400] drywheat_: mattray: it's eventually consistent
[2014-05-08 16:15:04 -0400] drywheat_: i script up the operations to build and converge new nodes using Fabric
[2014-05-08 16:15:12 -0400] drywheat_: 1. create the instance
[2014-05-08 16:15:16 -0400] zeroXten: it isn't an idiom is it? akin to the cookbook attribute on the template resource?
[2014-05-08 16:15:19 -0400] drywheat_: 2. updated the run list
[2014-05-08 16:15:47 -0400] drywheat_: 3. converge using `knife ssh name:<node-name> "sudo chef-client"'
[2014-05-08 16:16:07 -0400] drywheat_: it's step 3 that bombs out because search returns no results (sometimes)
[2014-05-08 16:18:07 -0400] mattray: drywheat_: yeah, there's an inherent latency between nodes being pushed to the server and indexed for search. Usually <30 seconds
[2014-05-08 16:18:34 -0400] mattray: to get around this, some folks use an external service registry, like Zookeeper or Etcd
[2014-05-08 16:19:05 -0400] hackenschmidt: howdy, I'm moving from a chef 10 to a chef 11 server. However, on the new server I get a 413: "request Entity Too Large. JSON must be no more than 1000000 bytes." when I try to upload a 2MB data bag. I don't see an option any where to increase this.
[2014-05-08 16:19:40 -0400] davidordave: @hackenschmidt I am pretty sure that is a hard limit.
[2014-05-08 16:20:26 -0400] hackenschmidt: new to chef 11?
[2014-05-08 16:20:34 -0400] drywheat_: we're in the process of setting up zookeeper
[2014-05-08 16:20:58 -0400] hackenschmidt: I can upload the exact same data bag to the old server just fine
[2014-05-08 16:21:00 -0400] drywheat_: until then, as an interim solution, i guess i can sleep the thread for 30 secs
[2014-05-08 16:22:15 -0400] c_t: hmm
[2014-05-08 16:22:38 -0400] c_t: hackenschmidt: that limit's a test in chef-pedant, so I think it's probably supposed to be chef 10 behavior too
[2014-05-08 16:25:04 -0400] hackenschmidt: c_t: I'm unfamiliar with how it actually tansferrs data, could it be that only a delta is getting sent?
[2014-05-08 16:25:24 -0400] c_t: I don't believe that's the case
[2014-05-08 16:28:52 -0400] Neozonz: is there a way to print all attributes/variables from chef to a file?
[2014-05-08 16:29:03 -0400] jtimberman: drywheat_: you can use knife ssh IPADDRESS -m 'sudo chef-client'
[2014-05-08 16:29:30 -0400] jtimberman: the -m option says "use a manual list of hostnames/ipaddresses to connect to rather than a search query"
[2014-05-08 16:29:50 -0400] hackenschmidt: c_t: so i'm kinda screwed?
[2014-05-08 16:31:29 -0400] c_t: kinda, as far as I know
[2014-05-08 16:32:34 -0400] c_t: how did you end up with such a huge data bag, anyway?
[2014-05-08 16:35:08 -0400] c_t: hackenschmidt: I would take that data bag and upload it as a file, either in the cookbook or upload it somewhere and use it as a file resource, and get your info out of that
[2014-05-08 16:35:29 -0400] c_t: but it make conceivably work to send an Accept-Encoding: gzip header with the upload request
[2014-05-08 16:35:32 -0400] hackenschmidt: c_t: just find it really odd that it still works on the old chef server
[2014-05-08 16:35:56 -0400] c_t: this depends on a) knife being able to do that and b) chef-server dealing with the request properly
[2014-05-08 16:36:03 -0400] MikeTLive: @hackenschmidt an object that large screams for pulling from some other artifact repo and instead managing a link to it.
[2014-05-08 16:37:17 -0400] Neozonz: is there a way to print all attributes/variables from a node to a file?
[2014-05-08 16:38:01 -0400] hackenschmidt: c_t: MikeTLive: its not a single object, its storing a hundred certs or so
[2014-05-08 16:39:52 -0400] MikeTLive: *humminahumminahummina
[2014-05-08 16:40:04 -0400] c_t: So yeah, while I have no idea why it used to work, your best bet is to either split the data bag up or move them entirely out of the data bag, store them elsewhere, and fetch them from that elsewhere
[2014-05-08 16:40:08 -0400] MikeTLive: must be painful when you need to change one :)
[2014-05-08 16:40:22 -0400] NukePuppy: anyone done any chef-vault with chef-solo?
[2014-05-08 16:40:24 -0400] cswarren: I'm trying to encrypt data bags for use with chef-solo, but I'm getting a weird error about the format version of the data bag item.
[2014-05-08 16:40:31 -0400] hackenschmidt: MikeTLive, not at all. I have a python wrapper that takes care of all of it
[2014-05-08 16:40:50 -0400] MikeTLive: ok, so this databag is your artifact and you are using chef as your repo
[2014-05-08 16:40:54 -0400] cswarren: "The encrypted data bag item has format version `', but the config setting 'data_bag_decrypt_minimum_version' requires version `0'" -- But when I look inside the encrypted data bag file, it has "version":1.
[2014-05-08 16:41:11 -0400] c_t: hackenschmidt: you may get a better answer on the "why" of it from an actual opscode person though
[2014-05-08 16:41:13 -0400] jasonv: So I ran into an issue today that I don't fully understand ... I and an execute block that was always failing on a only_if that checked if a file existed based on a variable. I had to move the variable definition into the execute block to make the only_if pass.  Here is a diff of the change I had to make if it helps anyone understand http://pastebin.com/PJPa3FZC
[2014-05-08 16:41:49 -0400] jasonv: The issue is resolved .. but I don't understand why it needed to be done this way and I wonder if this is a bug or not.
[2014-05-08 16:43:01 -0400] MikeTLive: i'm looking inside the code, i know ive seen an error like that before.  its the knife upload of the databag that is failing? what is the actual command used
[2014-05-08 16:43:10 -0400] hackenschmidt: basically, ya. I got a reply from opscode:
[2014-05-08 16:43:48 -0400] hackenschmidt: opscode_erchef['max_request_size'] = INTEGER. INTEGER should be replaced with your desired number of bytes. The default is 1000000 bytes
[2014-05-08 16:44:03 -0400] hackenschmidt: You can adjust the max request size that opscode-erchef will accept using the following attribute setting in /etc/opscode/private-chef.rb on the frontends
[2014-05-08 16:44:28 -0400] hackenschmidt: MikeTLive: the command i was running: knife data bag from file nginx ssl_certs.json
[2014-05-08 16:45:11 -0400] MikeTLive: trying not to look at the solution while i dig through the code :)
[2014-05-08 16:45:21 -0400] MikeTLive: i love that this is interpreted ruby and i can do that :)
[2014-05-08 16:45:43 -0400] hackenschmidt: MikeTLive: lol sorry
[2014-05-08 16:45:59 -0400] MikeTLive: no worries. glad you got one so fast.
[2014-05-08 16:46:38 -0400] hackenschmidt: ya, i work for HP and we pay for private chef. So we get a snappy response. One of the few benifits :-/
[2014-05-08 16:47:20 -0400] MikeTLive: when you get to a certain level it is appropriate to pay for it.
[2014-05-08 16:47:37 -0400] MikeTLive: its almost your duty to insist on paying or contributing.
[2014-05-08 16:48:00 -0400] hackenschmidt: i'd rather pay and user open source chef :D then we would have to bother with all this auth crap
[2014-05-08 16:48:03 -0400] Neozonz: is there a way to list all attributes/variables from a node/cookbook during a recipe run?
[2014-05-08 16:48:09 -0400] MikeTLive: exactly!
[2014-05-08 16:49:05 -0400] MikeTLive: people + culture
[2014-05-08 16:50:23 -0400] Neozonz: anyone?
[2014-05-08 16:54:09 -0400] MikeTLive: @hackenschmidt: seen in the object_loader.rb          # When someone makes this awesome, please update the above error message.
[2014-05-08 16:54:11 -0400] MikeTLive: hee hee
[2014-05-08 17:04:29 -0400] hackenschmidt: MikeTLive: lol
[2014-05-08 17:14:09 -0400] _pingu: http://www.rubydoc.info/github/opscode/test-kitchen/file/README.md shows an example for the platform name: ubuntu-12.04   where can i see a list of the supported platforms?
[2014-05-08 17:20:14 -0400] apes: If you want to add functionality to a builtin resource, what is the correct way to do so?
[2014-05-08 18:11:51 -0400] queuetip: what's the right way to write shell script in a cookbook?
[2014-05-08 18:12:16 -0400] queuetip: i thought it was via a code block, but i just got this error: Cannot find a resource for code on ubuntu version 14.04
[2014-05-08 18:12:28 -0400] bricker`work: the permissions for the chef-client aren't automatically being added to the node on the chef-server, so I get "403 forbidden" at the end of the chef-client run until I add the permission manually. How can I get those permissions added automatically?
[2014-05-08 18:12:49 -0400] bricker`work: queuetip: use the "bash" resource http://docs.opscode.com/resource_bash.html
[2014-05-08 18:13:05 -0400] queuetip: bricker`work: excellent, thanks!
[2014-05-08 18:33:44 -0400] queuetip: i have service 'php5-fpm' do action [:enable, :start] end  ... but it's erroring on me with: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-05-08 18:34:03 -0400] queuetip: but i don't understand this because when i ssh to that box i can start php5-fpm via service php5-fpm start
[2014-05-08 18:34:55 -0400] dsa_: hey folks
[2014-05-08 18:35:41 -0400] dsa_: somebody here uses the build-essential cookbook and has sometimes weird behaivours when its include inside of a runlist 1st positon but doesnt get executed as first ?
[2014-05-08 18:41:24 -0400] Chef-beginner: I am trying to set up user account management using chef with cookbook https://github.com/fnichol/chef-user.  Does anyone has experience setting this up?
[2014-05-08 18:41:58 -0400] dsa_: Chef-beginner: its more up to what your current problem is
[2014-05-08 18:43:00 -0400] Chef-beginner: @dsa I just want to set up 2 groups of users : admins, and none-admins that would get pushed out to all my servers
[2014-05-08 18:43:23 -0400] savant: does anyone in here know if setting the role path to the path of a set of data bags would work?
[2014-05-08 18:43:47 -0400] savant: havent tried it, just asking (using chef solo)
[2014-05-08 18:43:50 -0400] |rt|: has anyone ever seen chef-client fail with "NoMethodError: undefined method `close!' for nil:NilClass" when trying to sync cookbooks?
[2014-05-08 18:44:17 -0400] |rt|: here's the full output of the run http://pastebin.com/BDXtH0EZ
[2014-05-08 18:45:10 -0400] dsa_: Chef-beginner: are these group only intended to be mangaged by this one recipe/role inside of you chef enviroment ?
[2014-05-08 18:45:11 -0400] Chef-beginner: before I head down the patch of using https://github.com/fnichol/chef-user.  Is there a cookbook that uses attributes for user management?  chef-user uses data bag and I am not sure if that is the right approach
[2014-05-08 18:45:36 -0400] gchristensen: data bags are a good place to store data like users to be created
[2014-05-08 18:46:23 -0400] Chef-beginner: @dsa: these groups will only be manage by a single recipe inside my chef
[2014-05-08 18:47:23 -0400] dsa_: @dsa: then the chef-user cookbook from fnichol will work without problems. Just as point for later - if you start to manage the users from another point of a cookbook it might happend that user get removed by accident or complete groups get cleared
[2014-05-08 18:47:23 -0400] drywheat_: i would like to set the `ssl_verify_mode :verify_peer' option for my nodes. what's the inherent risk here?
[2014-05-08 18:47:27 -0400] dsa_: uh sorry
[2014-05-08 18:47:37 -0400] dsa_: Chef-beginner: then the chef-user cookbook from fnichol will work without problems. Just as point for later - if you start to manage the users  from another point of a cookbook it might happend that user get removed by accident or complete groups get cleared
[2014-05-08 18:48:09 -0400] dsa_: drywheat_: only that if the ssl cert is not correct your chef installation will not be working anymore
[2014-05-08 18:49:32 -0400] Chef-beginner: @dsa what is another option to prevent accidental removal of groups if I ever decided to manage users from another point of a cookbook?
[2014-05-08 18:49:34 -0400] dsa_: Chef-beginner: and data bags are the best approach for mgmt of users inside of data bags. Because of the state fact before. If theyre in attribute they are easly forgotten changed or not seen
[2014-05-08 18:49:52 -0400] drywheat_: dsa_: and that's the ssl cert installed by the Chef server during node registration, correct?
[2014-05-08 18:50:44 -0400] dsa_: Chef-beginner: write your own cookbook - or make a hack to get it work. On group mgmt i needed to do often hacks because under some conditions groups get cleared. So i used the bash LWRP to addend users on shell level - rather to mgm them completly by the chef-users cookbook
[2014-05-08 18:51:43 -0400] dsa_: drywheat_: exact. But if you do enable ssl_verify_mode :verify_peer it will check all aspects of the ssl cert. Issuer. Validty etc and self signed certs will not work anymore
[2014-05-08 18:52:10 -0400] dsa_: drywheat_: if your on Opscode mgmt chef server this option can work without problem. on private servers i would use this with caution
[2014-05-08 18:52:31 -0400] dsa_: drywheat_: test one node first and see the outcome - which is likley that it will not work because of the selfsigned cert
[2014-05-08 18:52:31 -0400] drywheat_: great. thank you much
[2014-05-08 18:52:55 -0400] drywheat_: we use enterprise Chef
[2014-05-08 18:53:04 -0400] drywheat_: i'll test with a single node first
[2014-05-08 18:53:24 -0400] dsa_: drywheat_: then try it first on one node and look if it works. it should because they have AFAIK real sslcerts
[2014-05-08 19:04:04 -0400] queuetip: i have a really simple cookbook for php5-fpm, using package and in debian family, but when using the service resource, the action [:enable, :start] fails with an exit code of 1, no other info really exists, there's a stacktrace on the box in /var/chef/cache but nothing jumps out at me. when i ssh into the box the service is there and it's running, i don't get it
[2014-05-08 19:06:08 -0400] bricker: Sorry for asking again: How do I automatically permissions for the chef-client to the node? Right now I have to manually go in an add them to the node, or the chef-client gets a 403.
[2014-05-08 19:06:21 -0400] bricker: this is chef-enterprise by the way
[2014-05-08 19:07:18 -0400] thatothermitch: bricker: how are you registering the nodes w/ chef-server ?
[2014-05-08 19:07:34 -0400] dsa_: queuetip: depending on load on the machine it takes some time to that php5-fpm gets running
[2014-05-08 19:11:09 -0400] bricker: thatothermitch: the chef-client script is setup to phone home to the chef server. Is that enough information to answer your question?
[2014-05-08 19:11:28 -0400] bricker: thatothermitch: and then there's an upstart script to run chef-client
[2014-05-08 19:12:16 -0400] bricker: thatothermitch: the chef-client script has set paramters like "chef_server_url", "validation_key", and "validation_client_name", which are read from attributes on the VM
[2014-05-08 19:12:31 -0400] bricker: and the node
[2014-05-08 19:12:32 -0400] thatothermitch: sure. I would double check the validation key
[2014-05-08 19:13:11 -0400] thatothermitch: also, be aware there are node objects and client objects representing nodes
[2014-05-08 19:13:26 -0400] bricker: thatothermitch: What am I double-checking? the validation key works, as long as the chef-client has been given permissions on the node (manually)
[2014-05-08 19:13:59 -0400] thatothermitch: ok, maybe i'm misunderstanding. i also need to run. sorry for the tease : P
[2014-05-08 19:14:11 -0400] bricker: thatothermitch: no problem, thanks :)
[2014-05-08 19:19:59 -0400] dtrott: In the chef enterprise GUI when I create a new client what effect does checking the Validation Client have ?
[2014-05-08 19:23:37 -0400] epcim: how to run chef-zero (to be able search) in VM created by test-kitchen+vagrant. I have tried knife search *** -z -c client.rb in /tmp/kitchen, but it returns only node name (run_list, roles, etc) are empty...
[2014-05-08 19:31:55 -0400] queuetip: i tried adding a provider in my service resource for ubuntu 14.04 but now i'm getting: ERROR: Cannot find a resource for provider on ubuntu version 14.04
[2014-05-08 19:32:04 -0400] queuetip: provider Chef::Provider::Service::Upstart
[2014-05-08 19:34:58 -0400] queuetip: what am i doing wrong?
[2014-05-08 19:38:25 -0400] mmzyk: An FYI for everyone. We had hoped to have the open source server 11.1 release candidate out today, but were working through a bug in the new upgrade command. As soon as we get that worked out well be putting out the RC.
[2014-05-08 19:50:53 -0400] stat1x: It seems that with Chef 11 (vs. 10) that when using the default bootstrap, that the new node does not automatically set up chef-client as a service, or start the service so that it runs periodically. Is that correct?
[2014-05-08 19:51:06 -0400] CPS: test it well mmzyk, my last upgrade blew up in my face
[2014-05-08 19:51:41 -0400] xmltok_: how/when is the .kitchen.cloud.yml file used? id like my cookbooks to have a kitchen configuration that uses vagrant but also contain the necessary configs for a jenkins job to run kitchen against openstack
[2014-05-08 19:53:58 -0400] davidordave: @stat1x bootstrapping in 11 doesn't setup chef-client to run regularly.
[2014-05-08 19:54:08 -0400] mmzyk: CPS sorry about that, well do our best.
[2014-05-08 19:54:37 -0400] stat1x: Is there a standard way to do that now? A chef-client cookbook?
[2014-05-08 19:54:42 -0400] davidordave: The chef-client cookbook can set that up I am pretty sure: https://github.com/opscode-cookbooks/chef-client
[2014-05-08 19:54:58 -0400] stat1x: Ahh, thank you
[2014-05-08 20:02:55 -0400] winchef: Is anyone here familiar with IIS cookbook? I'm trying to create a new app pool and pass in SpecificUser Identity pool_username and pool_password. It doesn't seem to be working.
[2014-05-08 20:03:35 -0400] winchef: The app pool is created but with default ApplicationPoolIdentity
[2014-05-08 20:05:02 -0400] |rt|: I figured out why chef client was throwing the "NoMethodError: undefined method `close!' for nil:NilClass" when trying to sync cookbooks
[2014-05-08 20:06:14 -0400] |rt|: tmp folder as many folders in it as the filesystem supported
[2014-05-08 20:06:27 -0400] |rt|: munin apparently had been doing something odd on that box for some time
[2014-05-08 20:09:07 -0400] RazaR: Any help would be appreciate..... I have a very noobish bootstrap question and it's probably related to my lack of knowledge of custom template files. The bootstrap process will install the rpm from the internal URL but the process cannot create the client on the chef-server. It thinks the chef_server_url is localhost when I have it defined in the knife.rb as my.chef.server.....
[2014-05-08 20:13:33 -0400] drywheat: i'm creating a cookbook to install a node.js application. does it make sense to `include_recipe 'nodejs' in that cookbook or externally in the run list for the node?
[2014-05-08 20:13:34 -0400] dylannorthrup: if i use 'client_key "/path/to/file.pem"' is there a way later i can print out which client_key is being pointed to?  so far, even if i override it, client_key seems to point to '/etc/chef/client.pem' instead of what it's set to.
[2014-05-08 20:13:56 -0400] dylannorthrup: er... s/use/use inside knife.rb/
[2014-05-08 20:16:40 -0400] dylannorthrup: looks like i can access that via '@attributes[:client_key]'
[2014-05-08 20:16:48 -0400] dylannorthrup: thanks for being my rubber duck, #chef :-)
[2014-05-08 20:18:04 -0400] aujt74: drywheat: Yes, it does make sense to include the recipe. Also, you should declare it as a dependency in your cookbook's metadata. Your aim should, in most cases, be for the run list to be just your cookbook to deploy the application and the stack it runs on.
[2014-05-08 20:18:22 -0400] aujt74: dylannorthrup: Anytime! :)
[2014-05-08 20:18:42 -0400] drywheat: right-o, got that. that was my inclination but i wanted to cross-check it
[2014-05-08 20:20:23 -0400] drywheat: if i need to set attribute values prior to including the nodejs recipe, should i do that in my recipe or my attributes file?
[2014-05-08 20:23:09 -0400] dsa_: A
[2014-05-08 20:25:03 -0400] aujt74: drywheat: I would do it in your attributes file, set sensible defaults there for your use case and you can always override in a role/environment/node as needed.
[2014-05-08 20:25:53 -0400] drywheat: ok
[2014-05-08 20:26:02 -0400] epcim_: epcim
[2014-05-08 20:31:21 -0400] RazaR: How is the chef_server_url set when bootstraping a node? Seems the client wants to go to localhost instead of the actual chef-server
[2014-05-08 20:31:44 -0400] gyoza: yo anybody seen this before? http://pastebin.com/s4YRJtEB
[2014-05-08 20:32:29 -0400] coderanger: RazaR: It matches the URL knife is using
[2014-05-08 20:32:43 -0400] coderanger: RazaR: You could customize this by making your own bootstrap template
[2014-05-08 20:33:16 -0400] RazaR: thats what I'm trying to do.... knife.rb lists it correctly.... should it be set in the template file?
[2014-05-08 20:34:26 -0400] coderanger: gyoza: Yes, that package isn't found, hence the 404
[2014-05-08 20:34:36 -0400] coderanger: RazaR: knife.rb lists localhost?
[2014-05-08 20:35:06 -0400] RazaR: knife.rb lists the correct chef-server.hostname.url
[2014-05-08 20:35:55 -0400] coderanger: Whatever that string is, thats what gets sent to the bootstrap node
[2014-05-08 20:36:59 -0400] epcim_: how to run chef-zero within the test-kitchen/vagrant provisioned VM to be able to perform searches (like knife search "runlist:*") ... can't figure it out
[2014-05-08 20:37:59 -0400] RazaR: That was my understanding of how it's supposed to work.
[2014-05-08 20:38:15 -0400] coderanger: epcim_: There is a vagrant-chef-zero I think, but I've not used it
[2014-05-08 20:38:52 -0400] bricker: So as part of a master/slave database setup, I need to take dump the master database into a file, and then load that file on the slave. Should I just use rsync inside of a recipe to do this?
[2014-05-08 20:38:58 -0400] davidordave: @RazaR, are you using a custom bootstrap template?
[2014-05-08 20:40:04 -0400] coderanger: bricker: Don't use chef to manage that
[2014-05-08 20:40:39 -0400] RazaR: @davidordave, yessir that is what I'm trying to do
[2014-05-08 20:40:52 -0400] bricker: coderanger: to manage what?
[2014-05-08 20:41:01 -0400] coderanger: bricker: Bringing up replication
[2014-05-08 20:41:05 -0400] bricker: coderanger: why not?
[2014-05-08 20:41:23 -0400] coderanger: bricker: At heart it is a procedural process, not a convergent one
[2014-05-08 20:41:31 -0400] davidordave: @RazaR, I think this is the line that drops that config in the standard template: https://github.com/opscode/chef/blob/master/lib/chef/knife/bootstrap/chef-full.erb#L63
[2014-05-08 20:41:41 -0400] coderanger: Chef really only handles convergent processes, and only single node ones
[2014-05-08 20:42:02 -0400] coderanger: bricker: Have chef manage the configuration, do the file copy in something like fabric or rundeck
[2014-05-08 20:42:05 -0400] epcim_: I am using it.. but the search not work properly in last days .. the "converge" fails with 500 in chef-client on the search when searching for queries other than "*:*" .. the /tmp/kitchen/nodes/***.json is filled with data..
[2014-05-08 20:42:31 -0400] epcim_: What way to run chef-zero in background?
[2014-05-08 20:42:38 -0400] bricker: coderanger: okay
[2014-05-08 20:44:12 -0400] RazaR: @davidordave, aye sir... I have the config_content lines from /etc/chef/client.rb and I have the https://chef.server:port set as chef_server_url
[2014-05-08 20:44:52 -0400] gyoza: .us-west-2.compute.amazonaws.com ERROR 404
[2014-05-08 20:44:52 -0400] gyoza: .us-west-2.compute.amazonaws.com Unable to retrieve a valid package!
[2014-05-08 20:44:58 -0400] gyoza: is soemthing wrong with bootstrap?
[2014-05-08 20:49:42 -0400] coderanger: gyoza: You are telling it to install a prerelease that doesn't exist, apparently
[2014-05-08 20:49:51 -0400] coderanger: gyoza: Do you have chef installed from master on your workstation?
[2014-05-08 20:50:28 -0400] gyoza: I figurted it out
[2014-05-08 20:50:30 -0400] gyoza: But thanks:)
[2014-05-08 20:50:36 -0400] gyoza: I didnt specify a distro
[2014-05-08 20:50:45 -0400] gyoza: Since its AWS weirded up ami
[2014-05-08 20:50:51 -0400] gyoza: Couldnt tell that it was centos
[2014-05-08 20:51:19 -0400] gyoza: Codemonkey: im also using Chefkdk which is prob why its trying to instal the weird alpha version
[2014-05-08 20:51:29 -0400] gyoza: coderanger: im also using Chefkdk which is prob why its trying to instal the weird alpha version
[2014-05-08 20:52:09 -0400] gyoza: oh god damnit
[2014-05-08 20:56:55 -0400] MikeTLive: when i use a community cookbook, i dont want to simply present it to my users as is (unless its awesome) , i also do not want to fork that cookbook and make it unmaintainable.   is there a good example and pattern of creating and using wrapper cookbook that depend on that externally sourced cookbook?
[2014-05-08 20:57:37 -0400] MikeTLive: my_cookbook  depending on your_cookbook  exactly what needs to change
[2014-05-08 20:59:49 -0400] gyoza: what is the value i need for --bootstrap-version?
[2014-05-08 20:59:57 -0400] gyoza: i tried 11.10.0 5 6
[2014-05-08 20:59:59 -0400] gyoza: none of them work
[2014-05-08 21:01:18 -0400] coderanger: MikeTLive: Look at most of the cookbooks under balanced-cookbooks on github
[2014-05-08 21:01:30 -0400] coderanger: gyoza: Try 11.12.2-1
[2014-05-08 21:01:43 -0400] gyoza: thank you
[2014-05-08 21:01:58 -0400] gyoza: Attempting..
[2014-05-08 21:02:43 -0400] gyoza: i am really loving chef
[2014-05-08 21:02:44 -0400] gyoza: and berkshelf
[2014-05-08 21:02:46 -0400] gyoza: and vagrant
[2014-05-08 21:02:49 -0400] gyoza: i want to kiss the developers
[2014-05-08 21:03:06 -0400] gyoza: us-west-2.compute.amazonaws.com ERROR:  Could not find a valid gem 'chef' (= 11.12.2.pre.1) in any repository bastard!
[2014-05-08 21:05:53 -0400] RazaR: So, part of the bootstrap process is creating /etc/chef/client.rb on the new node from the /etc/chef/client.rb that resides on the workstation? If so, it's not getting created on the new node for some reason
[2014-05-08 21:06:02 -0400] gyoza: https://github.com/fnichol/knife-server/issues/23 < - related to my issue
[2014-05-08 21:06:33 -0400] gyoza: .us-west-2.compute.amazonaws.com Successfully installed chef-11.14.0.alpha.2
[2014-05-08 21:06:35 -0400] coderanger: RazaR: No, it is built dynamically based on the active knife config
[2014-05-08 21:06:46 -0400] gyoza: Here is the magic - --sudo -d centos5-gems --prerelease
[2014-05-08 21:07:00 -0400] RazaR: still learning... thanks
[2014-05-08 21:08:15 -0400] RazaR: Is there a command for knife to return all the active config info?
[2014-05-08 21:08:16 -0400] coderanger: gyoza: You reeeeeally don't want to use that
[2014-05-08 21:08:23 -0400] gyoza: ahahaha
[2014-05-08 21:08:27 -0400] coderanger: gyoza: Using anything other than chef-full is very very not recommended
[2014-05-08 21:08:28 -0400] gyoza: yea it didnt work :P
[2014-05-08 21:09:27 -0400] schuckles: This is a question to windows people
[2014-05-08 21:09:46 -0400] schuckles: how do you guys handle user administration?
[2014-05-08 21:10:45 -0400] coderanger: schuckles: Every windows shop I've touched uses AD
[2014-05-08 21:11:18 -0400] schuckles: Codemonkey: even for cloud based servers?
[2014-05-08 21:11:26 -0400] sauraus: What's the best way to create a user on mac/linux system and have a pre-defined ssh key for it?
[2014-05-08 21:11:38 -0400] sauraus: such that the user can ssh to the machine on which the account was created
[2014-05-08 21:11:42 -0400] gyoza: adduser
[2014-05-08 21:11:43 -0400] gyoza: passwd
[2014-05-08 21:11:46 -0400] gyoza: su <user>
[2014-05-08 21:11:55 -0400] gyoza: openssl-keygen -t rsa
[2014-05-08 21:12:16 -0400] schuckles: sauraus: much like the slogan for the iPhone, there's a cookbook for that
[2014-05-08 21:12:16 -0400] gyoza: then thats the users key
[2014-05-08 21:12:18 -0400] sauraus: I know the basic unix steps/command ;) I was wondering if there was a recipe to do this?
[2014-05-08 21:12:19 -0400] gchristensen: ^ that is the wrong way to go about it ... you should be placing the public key on there
[2014-05-08 21:12:25 -0400] gyoza: sauraus: oh my bad:P
[2014-05-08 21:12:26 -0400] gchristensen: instead of generating one on the server
[2014-05-08 21:12:56 -0400] sauraus: I have the public key in a data bag :)
[2014-05-08 21:12:59 -0400] gyoza: sauraus: you could write ssh config files
[2014-05-08 21:13:12 -0400] gyoza: simply enough
[2014-05-08 21:13:23 -0400] gyoza: .ssh/config
[2014-05-08 21:13:45 -0400] gyoza: IdentityFile /Users/blahblahblah
[2014-05-08 21:14:12 -0400] sauraus: Yes I've though of doing a file '/Users/xxxx' do content => data bag - ssh_key end
[2014-05-08 21:14:27 -0400] gyoza: sauraus: i am really new to this so bear with me:P
[2014-05-08 21:14:31 -0400] gchristensen: or, you know, sauraus / gyoza , you coud use the users cookbook: https://github.com/fnichol/chef-user
[2014-05-08 21:14:35 -0400] sauraus: I found this: https://github.com/fnichol/chef-user and was wondering
[2014-05-08 21:14:55 -0400] sauraus: However it doesn't work very well on Mac :(
[2014-05-08 21:15:07 -0400] gyoza: good ole mac
[2014-05-08 21:15:19 -0400] gyoza: I had to reinstall my OSX to get ChefDK and berkshelf working right
[2014-05-08 21:15:22 -0400] gyoza: took me 4-days
[2014-05-08 21:15:31 -0400] gyoza: (its because i had macports installed, totally screwed me over)
[2014-05-08 21:15:38 -0400] doomviking: dang
[2014-05-08 21:15:40 -0400] tcotav: heh -- I had similar mess
[2014-05-08 21:15:51 -0400] take_it_t: if i have an execute resource that creates a file, how can i read in that file later in the recipe?
[2014-05-08 21:16:17 -0400] gyoza: Now im running into an issue where chef-client isnt available in the PATH variable so when it runs it fails...
[2014-05-08 21:16:18 -0400] coderanger: take_it_t: Use a ruby_block
[2014-05-08 21:17:12 -0400] RazaR: Ok, so if the client.rb file is not getting created on the new bootstraped node then there is likely an error in my template file?
[2014-05-08 21:17:15 -0400] take_it_t: coderanger: what about when using an lwrp that wraps the execute resource? in my case the rbenv cookbook
[2014-05-08 21:17:26 -0400] coderanger: take_it_t: Thats an option too
[2014-05-08 21:17:43 -0400] coderanger: take_it_t: If you go that route, you can just use shell_out! directly and sequence it more manually
[2014-05-08 21:21:31 -0400] gyoza: is there a way to pass a variable to the system from bootstrap?
[2014-05-08 21:21:40 -0400] gyoza: i need to add /usr/local/bin/ to the path
[2014-05-08 21:21:58 -0400] gyoza: cause it doesnt exist in SUDO conf file for maintained env variables
[2014-05-08 21:22:03 -0400] gyoza: bastards
[2014-05-08 21:22:28 -0400] take_it_t: coderanger: to rephrase, im using an exisitng lwrp (rbenv-cookbook), i know it just wraps the execute resource, but i dont want to reimplement its logic
[2014-05-08 21:25:51 -0400] unclek: any ideas on what might cause "Recipe Compile Error in /tmp/vagrant-chef-2/chef-solo-1/cookbooks/mysql/libraries/provider_mysql_service_debian.rb =====  LoadError --------- no such file to load -- chef/provider/lwrp_base....  the VM was originally provisioned without issue a few weeks ago.. don't see any changes in the opscode mysql cookbook that would have caused this.. (ubuntu12.04 w/vagrant). wracking my brain currently
[2014-05-08 21:25:52 -0400] coderanger: take_it_t: Ahh, if you wanted to manage that inside an LWRP you would need something like poise's notfiying_block helper
[2014-05-08 21:26:12 -0400] coderanger: unclek: You aren't using vagrant-omnibus so your chef is too old in the VM
[2014-05-08 21:26:43 -0400] someara: unclek mysql is only compatible with Chef 11 or higher
[2014-05-08 21:27:26 -0400] unclek: installed vagrant-omnibus plugin and recreated the vm.. should it not have kicked in?
[2014-05-08 21:27:42 -0400] coderanger: unclek: Did you enable it in the vagrantfile?
[2014-05-08 21:29:24 -0400] gyoza: my coworker just told me that we get charged for the full hour on all my knife tests
[2014-05-08 21:29:24 -0400] gyoza: lol
[2014-05-08 21:29:26 -0400] gyoza: WOOPS
[2014-05-08 21:29:37 -0400] gyoza: better go put a dollar on my bosses desk
[2014-05-08 21:30:15 -0400] someara: gyoza digital ocean and google compute engine are super cheap for cook development
[2014-05-08 21:30:37 -0400] someara: GCE specifically has sub-hour billing
[2014-05-08 21:30:48 -0400] gyoza: really
[2014-05-08 21:30:50 -0400] gyoza: hmmm
[2014-05-08 21:31:36 -0400] unclek: @coderanger: clearly not! thanks!
[2014-05-08 21:42:42 -0400] randingo: Hey hey!  I'm looking for an example to manage Windose Users, add/edit/etc  I've been looking at this reference: http://docs.opscode.com/resource_user.html
[2014-05-08 21:44:14 -0400] randingo: But that reference doesn't have a Windows user example.  A co-worker attempted to add/edit and it apparently screwed up all the users on the instance.
[2014-05-08 21:57:53 -0400] esproul: Hi, wondering if it's possible for a resource to subscribe only to a specific aspect of another resource, such as the :start action of a service
[2014-05-08 21:58:29 -0400] esproul: so that I only fire if the service is starting for the first time, as opposed to a restart or a stop
[2014-05-08 21:59:23 -0400] coderanger: esproul: No, notifications aren't triggered on actions specifically
[2014-05-08 21:59:31 -0400] coderanger: they are most of an abstract "something changed"
[2014-05-08 21:59:45 -0400] coderanger: this is a good example of why chef should only be used for convergent processes :)
[2014-05-08 21:59:56 -0400] esproul: coderanger: that was my understanding, though I was hoping there was something I missed. :)
[2014-05-08 21:59:58 -0400] esproul: thanks
[2014-05-08 22:00:04 -0400] coderanger: If you need to do more complex service management, don't do that in Chef, use your service manager
[2014-05-08 22:00:15 -0400] esproul: what if my service manager sucks?  ;)
[2014-05-08 22:00:26 -0400] gyoza: zabbix!
[2014-05-08 22:00:38 -0400] gyoza: zabbix!
[2014-05-08 22:00:44 -0400] esproul: no
[2014-05-08 22:00:46 -0400] gyoza: :(
[2014-05-08 22:00:55 -0400] coderanger: esproul: Get a better one? :D
[2014-05-08 22:01:21 -0400] esproul: I have a better one (SMF on illumos) but I have to support RHEL.
[2014-05-08 22:01:29 -0400] gyoza: Doesnt spacewalk do that shit?
[2014-05-08 22:03:28 -0400] coderanger: esproul: Wait for RHEL 7 and then ALLHAILSYSTEMD
[2014-05-08 22:03:37 -0400] gyoza: 19 days until watch dogs guys.
[2014-05-08 22:03:55 -0400] gyoza: TIL: Markus pearson networth is 150million
[2014-05-08 22:03:57 -0400] coderanger: gyoza: Just 6 months until it will be on sale and I'll care to buy it \o/
[2014-05-08 22:03:59 -0400] gyoza: persson
[2014-05-08 22:04:05 -0400] esproul: coderanger: yeah, but when you're a software vendor, you are bound by what your customers are actually running.
[2014-05-08 22:04:10 -0400] gyoza: Codemonkey: bastard! wish i was able to wait for games hahaha
[2014-05-08 22:04:15 -0400] gyoza: err ^^ ranger
[2014-05-08 22:04:35 -0400] coderanger: esproul: Not really, look at how chef-server does it, it runs its own service layer internally
[2014-05-08 22:04:39 -0400] Neozonz|Disc: a template of mine has the following,        Define::SetDefine('ENVIRONMENT', '<%= node[:environment][:name] %>');
[2014-05-08 22:04:41 -0400] esproul: coderanger: my chef stuff gets shipped to and run by customers to set up our stuff on their premises (i.e. hands-off to me)
[2014-05-08 22:04:58 -0400] esproul: I also don't have chef-server.  this is strictly chef-solo.
[2014-05-08 22:05:02 -0400] esproul: we're weird
[2014-05-08 22:05:15 -0400] Neozonz|Disc: when I run chef it fails however due to Chef::Mixin::Template::TemplateError (no implicit conversion of Symbol into Integer) on line #20:
[2014-05-08 22:05:21 -0400] coderanger: esproul: I just mean use chef-server as an example of doing service management in an appliace-y app :)
[2014-05-08 22:05:29 -0400] esproul: ah
[2014-05-08 22:05:34 -0400] coderanger: gyoza: I have literally over 100 games in my steam queue I've not played yet >_<
[2014-05-08 22:05:41 -0400] Neozonz|Disc: any ideas?
[2014-05-08 22:06:10 -0400] coderanger: Neozonz|Disc: Usually means node[:environment] is an array
[2014-05-08 22:06:39 -0400] Neozonz|Disc: it should still resolve tho?
[2014-05-08 22:06:52 -0400] Neozonz|Disc: in attributes i have default['environment']['name'] = "development"
[2014-05-08 22:07:27 -0400] coderanger: Neozonz|Disc: Add this to your recipe
[2014-05-08 22:07:34 -0400] coderanger: log node['environment']
[2014-05-08 22:07:56 -0400] coderanger: make sure nothing else is overwriting it
[2014-05-08 22:08:07 -0400] Neozonz|Disc: well here is the thing
[2014-05-08 22:08:26 -0400] Neozonz|Disc: i have a json passing in as evironment
[2014-05-08 22:08:43 -0400] Neozonz|Disc: then i wanna add the name to that
[2014-05-08 22:09:22 -0400] coderanger: Do you mean a chef environment?
[2014-05-08 22:09:42 -0400] Neozonz|Disc: no, this is just a custom json i'm passing via opswork
[2014-05-08 22:10:17 -0400] Neozonz|Disc: {   "environment": "development" }
[2014-05-08 22:10:29 -0400] coderanger: Neozonz|Disc: How are you intending to load that into Chef?
[2014-05-08 22:10:47 -0400] Neozonz|Disc: i think opswork already does that
[2014-05-08 22:11:34 -0400] Neozonz|Disc: if node[:environment] == "development"                actually working code block              end
[2014-05-08 22:11:54 -0400] Neozonz|Disc: that code block works fine, so i know the json is being passed
[2014-05-08 22:12:46 -0400] coderanger: Neozonz|Disc: You can't have it be both a string and a hash
[2014-05-08 22:13:01 -0400] BryanWB: how does `knife ec2` supply the validation.pem to new AWS instances? i assume that it provides it via ec2 userdata. Is this correct?
[2014-05-08 22:13:03 -0400] coderanger: Either node['environment'] == 'foo' or {'name' => 'foo'}
[2014-05-08 22:13:05 -0400] Neozonz|Disc: ?
[2014-05-08 22:13:07 -0400] coderanger: You need to pick one
[2014-05-08 22:13:26 -0400] coderanger: You are indeed overwriting your attribute as I suspected :)
[2014-05-08 22:13:37 -0400] coderanger: BryanWB: No, its copied via SSH
[2014-05-08 22:13:45 -0400] Neozonz|Disc: sorry, looks like i'm missing something fundamental
[2014-05-08 22:13:49 -0400] coderanger: BryanWB: Thats not handled by knife ec2 though, its just knife bootstrap
[2014-05-08 22:13:50 -0400] BryanWB: coderanger: and how does windows handle it?
[2014-05-08 22:14:01 -0400] coderanger: Neozonz|Disc: In your attributes you have default['env']['name'] = 'foo'
[2014-05-08 22:14:15 -0400] Neozonz|Disc: yup
[2014-05-08 22:14:18 -0400] coderanger: Neozonz|Disc: In your node JSON you have the equiv of override['env'] = 'foo'
[2014-05-08 22:14:24 -0400] coderanger: You see those are shaped differently?
[2014-05-08 22:14:33 -0400] Neozonz|Disc: ah i see
[2014-05-08 22:14:42 -0400] Neozonz|Disc: how do i add on?
[2014-05-08 22:14:52 -0400] Neozonz|Disc: or should i just use another variable
[2014-05-08 22:14:55 -0400] coderanger: BryanWB: knife winrm bootstrap copies it or somesuch
[2014-05-08 22:15:03 -0400] coderanger: Neozonz|Disc: I don't know what this data means, so I can't say
[2014-05-08 22:15:09 -0400] coderanger: Do envs have more than just a name?
[2014-05-08 22:15:14 -0400] Neozonz|Disc: yeah
[2014-05-08 22:15:18 -0400] coderanger: Either structure is fine, you just need to be consistent
[2014-05-08 22:15:31 -0400] Neozonz|Disc: basically looking to have each evironment have its own config variables
[2014-05-08 22:15:32 -0400] coderanger: Sounds like your node json should look like {"env": {"name": "foo"}}
[2014-05-08 22:15:41 -0400] BryanWB: coderanger: tks
[2014-05-08 22:15:58 -0400] Neozonz|Disc: but how would i add such a thing on attributes?
[2014-05-08 22:16:28 -0400] coderanger: BryanWB: All the various cloud plugins just boot the machine and then hand off to the bootstrap commands
[2014-05-08 22:16:58 -0400] coderanger: Neozonz|Disc: Not sure what you mean
[2014-05-08 22:17:01 -0400] coderanger: which attributes
[2014-05-08 22:17:42 -0400] BryanWB: coderanger: tks, i used to know this :/
[2014-05-08 22:18:16 -0400] coderanger: BryanWB: Memory is overrated, thats what the internet is for! :D
[2014-05-08 22:18:25 -0400] Neozonz|Disc: ah
[2014-05-08 22:18:29 -0400] Neozonz|Disc: i think i understand now
[2014-05-08 22:18:30 -0400] Neozonz|Disc: thanks
[2014-05-08 22:18:31 -0400] coderanger: BryanWB: Think you'll make it to the next community summit? We all missed you in SF :-(
[2014-05-08 22:23:43 -0400] neurogenesis: hey guys... does someone have a quick minute to help me out with the proper use of the "metadata" line in Berksfile? i've seen this pop up in the Berksfile more regularly.
[2014-05-08 22:24:03 -0400] coderanger: neurogenesis: Same idea as "gemspec" in a Gemfile, if that helps
[2014-05-08 22:24:23 -0400] coderanger: it just loads dependencies from the metadata.rb next to the berksfile and pretends there are listed in the berksfile
[2014-05-08 22:24:57 -0400] neurogenesis: wish i could just define everything in metadata.rb, including source location/branch, and have berks pull that from the metadata. obviously the source/locations aren't supported by chef, so presently all source/location info still has to go into Berksfile.
[2014-05-08 22:25:20 -0400] coderanger: neurogenesis: https://caremad.io/blog/setup-vs-requirement/ read that :)
[2014-05-08 22:25:30 -0400] coderanger: metadata.rb is abstract deps, berksfile is concrete
[2014-05-08 22:25:33 -0400] neurogenesis: ok, so basically it's helpful for simple cases where you don't specify source/branch info.
[2014-05-08 22:26:07 -0400] neurogenesis: (otherwise you'd have to maintain some in Berksfile, rest in metadata.rb (as opposed to listing in full in both and keeping in sync)
[2014-05-08 22:26:24 -0400] neurogenesis: thx coderanger
[2014-05-08 22:26:44 -0400] coderanger: neurogenesis: neurogenesis You should almost never be using a manual source specifier
[2014-05-08 22:26:51 -0400] coderanger: I sometimes use a path one for local dev
[2014-05-08 22:26:59 -0400] coderanger: but that never gets checked in
[2014-05-08 22:28:29 -0400] gyoza: yo real quick, i cant find anything on the googs, now what i've added a recipe to my node, how do i make those changes happen immediately?
[2014-05-08 22:31:05 -0400] coderanger: re-run chef-client
[2014-05-08 22:31:12 -0400] gyoza: hmmm
[2014-05-08 22:31:23 -0400] gyoza: it doesnt come through on its own every so often to check to see if there are any changes?
[2014-05-08 22:31:34 -0400] neurogenesis: ultimately i'll have to use sources for private repos, or improved versions of the tracked cookbooks (like https://github.com/fnichol/chef-ruby_build ). also is nice to pin production to specific branches/tags in some cases where things can get out of control.
[2014-05-08 22:33:33 -0400] neurogenesis: all of this started while trying to revisit how we're vendoring cookbooks and testing in travis with TDD. vendoring is working fine in dev, berks is doing funny things in travis.
[2014-05-08 22:34:03 -0400] neurogenesis: anyway, thanks @coderanger for the info about Berksfile and meatadata directive.
[2014-05-08 22:48:07 -0400] bricker: I have a provider which depends on another recipe being included, how should I ensure that dependency is met? `include_recipe` doesn't work in a provider file.
[2014-05-08 22:55:06 -0400] someara: bricker https://github.com/opscode-cookbooks/mysql-chef_gem/blob/master/libraries/provider_mysql_chef_gem.rb#L12-L14
[2014-05-08 22:55:34 -0400] thatothermitch: that's a neat trick.
[2014-05-08 22:56:37 -0400] bricker: someara: thanks
[2014-05-08 23:06:41 -0400] gyoza: well guys, i got chef running today, my first bootstrap, my first berkshelf, my first alter config
[2014-05-08 23:06:58 -0400] gyoza: very excite
[2014-05-08 23:07:10 -0400] gyoza: now im elaving work! Coderanger: thanks for all the help buddy
[2014-05-08 23:08:21 -0400] thatothermitch: It's nice when it works, but I'm sure reality will set in soon : )
[2014-05-08 23:14:14 -0400] digitalc1ild: whats the advantage of using berkshelf?
[2014-05-08 23:15:22 -0400] thatothermitch: digitalc1ild: there are a number of advantages, like automatically figuring out which cookbooks you need, removing other people's code from your repository, encouraging maintainabilty by discouraging local modification for open source cookbooks...
[2014-05-08 23:15:49 -0400] thatothermitch: providing a sane update path for open source cookbooks
[2014-05-08 23:15:54 -0400] digitalc1ild: ok, just reading the website now
[2014-05-08 23:16:14 -0400] digitalc1ild: atm when i grab a cookbook i haven't made, i just it as a dependency and write my own that references it
[2014-05-08 23:16:18 -0400] digitalc1ild: is this the correct method?
[2014-05-08 23:16:24 -0400] thatothermitch: yes
[2014-05-08 23:16:28 -0400] digitalc1ild: cool
[2014-05-08 23:16:31 -0400] thatothermitch: this is very much dependency management
[2014-05-08 23:16:35 -0400] thatothermitch: see also bundler
[2014-05-08 23:16:36 -0400] thatothermitch: : P
[2014-05-08 23:16:53 -0400] digitalc1ild: ok, i'm pretty new to this but ive managed to replicate my entire shell script mess in chef
[2014-05-08 23:17:09 -0400] digitalc1ild: except for rvm/ruby system install
[2014-05-08 23:17:16 -0400] digitalc1ild: that is very much broken as of last night, heh
[2014-05-08 23:17:37 -0400] digitalc1ild: i want a newer version of ruby then what ships with centos and tried using the chef-rvm to do it
[2014-05-08 23:17:43 -0400] digitalc1ild: and it broke chef
[2014-05-08 23:17:50 -0400] thatothermitch: heh
[2014-05-08 23:18:03 -0400] digitalc1ild: luckily its all in test env so i just rolled the snapshot back
[2014-05-08 23:18:10 -0400] jmickle: does anyone use sympa?
[2014-05-08 23:18:29 -0400] thatothermitch: rvm scares me on prod servers
[2014-05-08 23:18:34 -0400] digitalc1ild: i would like to get ruby installed via rvm and have chef-client not break on the node if possible
[2014-05-08 23:18:42 -0400] digitalc1ild: actually just the latest version of ruby would be fine
[2014-05-08 23:18:53 -0400] digitalc1ild: thatothermitch: i use a ruby based backup script for my prod machines
[2014-05-08 23:19:07 -0400] digitalc1ild: the backup gem
[2014-05-08 23:19:13 -0400] thatothermitch: heh, i've used this gem
[2014-05-08 23:19:14 -0400] digitalc1ild: https://github.com/meskyanichi/backup <-
[2014-05-08 23:19:24 -0400] digitalc1ild: i used to write my own scripts
[2014-05-08 23:19:25 -0400] thatothermitch: but yes, we manage rubies on servers via package management
[2014-05-08 23:19:37 -0400] digitalc1ild: using the shipped ones?
[2014-05-08 23:19:49 -0400] thatothermitch: no, building from source and packaging via FPM
[2014-05-08 23:20:10 -0400] thatothermitch: if you need to you can sidecar the entire thing into /opt (ruby, gem-home and all)
[2014-05-08 23:20:25 -0400] thatothermitch: anyway, that's a pretty huge topic and i need to get going
[2014-05-08 23:20:31 -0400] digitalc1ild: ok thanks

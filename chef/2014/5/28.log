[2014-05-28 00:00:44 -0400] coderanger: shlant: I probably wouldn't wait, I would just use a git resource directly and go from there
[2014-05-28 00:10:28 -0400] shlant: coderanger: sounds good, thanks
[2014-05-28 00:13:15 -0400] heph: coderanger: hey, got a sec to follow up on a twitter question from earlier?
[2014-05-28 00:13:52 -0400] heph: coderanger: my situation is similar to a conversation someone else had with you in March, but I didn't see a resolution: http://community.opscode.com/chat/chef/2014-03-27#id-539441
[2014-05-28 00:14:03 -0400] setient: heph: whats up
[2014-05-28 00:14:40 -0400] heph: coderanger: same deal, env.roledefs = chef_roledefs returns a dict of roles:roledef objects, but fabric still asks for a hostname.
[2014-05-28 00:15:44 -0400] heph: coderanger: i replicated the search code from the Roledef class, just using chef.Search('node', 'roles:blah') and got my list of hostnames, but within the context of fabric it's not working.
[2014-05-28 00:16:28 -0400] heph: coderanger: i'm assuming there's some boilerplate code i must be missing that lets fabric actually run the callable search on the roledef object? how can i debug this further?
[2014-05-28 00:25:28 -0400] coderanger: heph: Sorry, just about to run to dinner, I should be back in a bit
[2014-05-28 00:25:58 -0400] coderanger: heph: You have the @role decorator on the task?
[2014-05-28 00:26:05 -0400] coderanger: (and that role is found by pychef)?
[2014-05-28 00:27:04 -0400] heph: yes
[2014-05-28 00:27:55 -0400] coderanger: heph: If you are using chef environments, make sure you either set that in the roledefs line or otherwise handle it
[2014-05-28 00:28:11 -0400] coderanger: by default the query executed will be "roles:foo AND chef_environment:_default"
[2014-05-28 00:28:24 -0400] coderanger: and if the role comes back as empty in Fabric, it prompts for whatever reason
[2014-05-28 00:28:46 -0400] heph: coderanger: https://gist.github.com/heph/bb17434b2e11cb076d23
[2014-05-28 00:29:14 -0400] heph: checking environment
[2014-05-28 00:29:48 -0400] heph: coderanger: omg.. *headdesk*
[2014-05-28 00:30:14 -0400] heph: coderanger: go to dinner. pebkac.
[2014-05-28 00:31:52 -0400] heph: didn't realize it would *set* environment, rather than just not search for one. the _default_environment magic threw me
[2014-05-28 00:41:22 -0400] coderanger: heph: :) I should probably add some warning messages in pychef since fab doesn't mention what happened
[2014-05-28 00:46:35 -0400] sauraus: G'day :)
[2014-05-28 00:46:44 -0400] sauraus: What's the easiest way to re-bootstrap a node?
[2014-05-28 00:46:56 -0400] sauraus: I thought that --no-host-key-verify would do the trick but it's not :(
[2014-05-28 00:47:11 -0400] digitalchild: delete it and readd it
[2014-05-28 00:50:35 -0400] sauraus: Did that already :)
[2014-05-28 00:50:52 -0400] sauraus: but the node already had a client.pem file and it's getting used but that of course fails
[2014-05-28 01:38:06 -0400] fclausen: hello all - I am using yum_package and specifying "flush_cache [:before]" as part of the resource. However it does not appear to flush the cache. If I manually do "yum clean all" then at the next Chef run yum "sees" the newer package version but not with "flush_cache [:before]". Is there anything else that needs to be done?
[2014-05-28 08:08:54 -0400] ahmadsherif: Hi, is the "link" resource supposed to support linking directories?
[2014-05-28 08:14:11 -0400] alexbst: ahmadsherif - try it - I don't think there is a difference between a directory and file symlink ?
[2014-05-28 08:15:33 -0400] ahmadsherif: alexbst, I did try it, it fails due to a file-specific line in chef code base, that's why I'm asking
[2014-05-28 08:16:04 -0400] ahmadsherif: 'cause I can't find a canonical way to do it except for using shell code
[2014-05-28 08:16:24 -0400] ahmadsherif: also wondering if I should submit a PR :)
[2014-05-28 08:18:12 -0400] sphtjg: Hi there, i'm trialing Chef and was wondering how I can pass the node name as a variable which sets the windows hostname?
[2014-05-28 09:13:04 -0400] netty195: hi all
[2014-05-28 09:16:11 -0400] netty195: Lets say I have 3 environments and 3 services.
[2014-05-28 09:16:12 -0400] netty195: Services here are set as roles.
[2014-05-28 09:16:12 -0400] netty195: I have an attributes, which looks like:
[2014-05-28 09:16:13 -0400] netty195: default['service1']['pg_server']
[2014-05-28 09:16:13 -0400] netty195: default['service2']['pg_server']
[2014-05-28 09:16:14 -0400] netty195: default['service3']['pg_server']
[2014-05-28 09:16:14 -0400] netty195: Now what is the best way to reference them in a recipe?
[2014-05-28 09:16:15 -0400] netty195: Should I do an 'if' check for each service?
[2014-05-28 09:17:21 -0400] netty195: Values of these attributes are different for each environment too
[2014-05-28 09:24:10 -0400] sphtjg: hi
[2014-05-28 10:04:07 -0400] luca3m: hi, chef deploy resource support only git/svn?
[2014-05-28 10:04:39 -0400] luca3m: how can I deploy a C++ service? Where on git I have only sources
[2014-05-28 10:06:39 -0400] srenatus: luca3m: you can do whatever you want with chef.  how have you deployed before?
[2014-05-28 10:06:58 -0400] srenatus: luca3m: most of the times, people use chef to set up a repository and install packages (self-built from whereever)
[2014-05-28 10:07:47 -0400] luca3m: right now I'm using capistrano, using rsync instead of git for application synchronization. So I can use binary directory
[2014-05-28 10:08:15 -0400] luca3m: so I would use "deploy" resource on chef, to achieve a similar result
[2014-05-28 10:08:24 -0400] srenatus: luca3m: so your rsyncing your build artifacts? i.e. executables
[2014-05-28 10:08:32 -0400] luca3m: yes
[2014-05-28 10:08:56 -0400] srenatus: luca3m: you could have a look at the artifact cookbook: https://github.com/RiotGames/artifact-cookbook that allows quite elaborate deployment strategies
[2014-05-28 10:09:22 -0400] srenatus: it doesn't support rsync though
[2014-05-28 10:10:03 -0400] srenatus: you could also just use the execute resource to handle the rsync and go on from there, maybe with "link" and template to render config files, etc
[2014-05-28 10:11:21 -0400] luca3m: seems what I need ^_^ My only problem is that I can't deploy git repository because it contains only source. Rsync, scp, tar is the same
[2014-05-28 10:12:01 -0400] luca3m: thank you!
[2014-05-28 10:12:09 -0400] srenatus: :)
[2014-05-28 10:20:16 -0400] sphtjg: Anyone know how if when i provision a windows machine with knife vspshere if i can pass the node name into a recipie as a var?
[2014-05-28 10:52:21 -0400] mc_fail: hi guys, if i have a array of hashes, how can i read hash from here?
[2014-05-28 10:53:17 -0400] mc_fail: for example i have something like array: [ {val1:blabla, var2:bla} ]
[2014-05-28 10:53:56 -0400] mc_fail: so, to acces it from recipe i should use something like array[0][val1], isn't it?
[2014-05-28 10:54:27 -0400] boffbowsh: array[0][:val1]
[2014-05-28 10:54:41 -0400] boffbowsh: (or perhaps ["val1"])
[2014-05-28 10:56:20 -0400] chef867: Anyone know if there is book on chef
[2014-05-28 11:00:28 -0400] mc_fail: ok, so i have a problem with it, i have a construction for main server like mainserver:{ slaves: [ {"id": "slave0", "instances": [ 0, 1 ] }]} and hash for each slave-server like slave0:{ instances:[ {"param0":"blabla", "param1":"bla"} ] }, and i'm trying to generate config for main server based for parameters from a slave servers, so when i'm trying acces a slave server instance config with loop on main server config, i get a error
[2014-05-28 11:00:43 -0400] mc_fail: so, i think it will be better to paste my configs
[2014-05-28 11:03:00 -0400] mc_fail: for example, i have a config like http://pastebin.com/qGNag77A
[2014-05-28 11:04:06 -0400] mc_fail: and i'm trying to check "handler" for "cap" with loop like http://pastebin.com/gSJVeZ7Y
[2014-05-28 11:04:30 -0400] mc_fail: so, it reports me error on node['tg-cap']["#{puller['host']}"]['cap']["#{inst}"]["handler"]
[2014-05-28 11:04:42 -0400] mc_fail: it looks like it can't read config with it
[2014-05-28 11:05:52 -0400] mc_fail: and error is can't convert String into Integer
[2014-05-28 11:06:36 -0400] mc_fail: i think the problem is because ruby tink that list in puller.instances is a array of text values
[2014-05-28 11:07:11 -0400] mc_fail: but actually it is numbers
[2014-05-28 11:09:21 -0400] mc_fail: so, may be i should use a .to_n method, but it forced me to change a lot of code
[2014-05-28 11:11:22 -0400] mc_fail: before i had a hash instead array, but it always change my configs, because hash is always returns with random sequience
[2014-05-28 11:11:56 -0400] mc_fail: (sorry for my gly english, if you didn't understand any, just ask me)
[2014-05-28 11:41:31 -0400] whiteadam: i'm awake, all is well.
[2014-05-28 12:18:24 -0400] whiteadam: Has anyone used the Selenium cookbook? Wondering how good it is.
[2014-05-28 13:06:10 -0400] whiteadam: Where is everyone this morning? Show yourselves.
[2014-05-28 13:07:41 -0400] bmurt: heh
[2014-05-28 13:07:44 -0400] bmurt: just waking up
[2014-05-28 13:08:25 -0400] whiteadam: same here. Trying to fix some failing AMANDA backups. I really despise backups.
[2014-05-28 13:08:39 -0400] bmurt: but you love restores
[2014-05-28 13:08:45 -0400] bmurt: successful ones*
[2014-05-28 13:09:10 -0400] whiteadam: hah, we've never tested these and I hope they move these servers before we have to... cuz I don't know if they would come back.
[2014-05-28 13:47:32 -0400] tsunamie: hi there, can someone guide me throught how to troubelshoot a cookbook? I am using opsworks and I want to know why the cookbook does not seem to be running. I have checked the databag. (Json file) in the cook book and that has the correct content. I am using the standard logstash cook book https://github.com/lusis/chef-logstash
[2014-05-28 13:49:51 -0400] whiteadam: tsunamie: Are any logs being produced by chance?
[2014-05-28 13:50:24 -0400] tsunamie: yes, however I ahve looked throught them and they only indicate when files are being created. Not the logic of how the content in the files are decided
[2014-05-28 13:50:49 -0400] tsunamie: whiteadam, I need to know why specific json content is not being put into the logstash.copnf filew
[2014-05-28 13:51:31 -0400] whiteadam: ohh I see. Hmm...
[2014-05-28 13:52:40 -0400] whiteadam: I haven't used OpsWorks myself, but have you checked this out: http://docs.aws.amazon.com/opsworks/latest/userguide/troubleshoot-debug.html
[2014-05-28 13:53:12 -0400] whiteadam: The running the tests part is interesting.
[2014-05-28 13:54:08 -0400] tsunamie: whiteadam, thanks reading now
[2014-05-28 13:54:43 -0400] whiteadam: No problem. Maybe it will help.
[2014-05-28 14:01:35 -0400] nebrera: helllo
[2014-05-28 14:01:45 -0400] graph1ZzLle: Hello everyone
[2014-05-28 14:02:18 -0400] nebrera: I am checking ssl verify peer, I get success on "knife ssl check" command
[2014-05-28 14:02:28 -0400] graph1ZzLle: Anyone has experience with chef/knife on EC2 ? I'm starting Chef and I can't get an instance to be provisoned.
[2014-05-28 14:02:36 -0400] nebrera: but chef client says me there is an error on SSL_connect
[2014-05-28 14:09:04 -0400] tier: graph1ZzLle: have you worked through the getting started with chef tutorials? they have specific examples on bootstrapping an ec2 node.
[2014-05-28 14:09:21 -0400] graph1ZzLle: I have just found out why actually
[2014-05-28 14:10:02 -0400] graph1ZzLle: It was kinda a stupid mistake, I did not specified the correct --ssh-user to use, so the server were created, but couldn't install things because couldn't ssh into instance
[2014-05-28 14:10:22 -0400] graph1ZzLle: but now I've got another error: Chef encountered an error attempting to create the client "i-aac000ea"
[2014-05-28 14:10:49 -0400] graph1ZzLle: Failed to authenticate as 'xxxx'.
[2014-05-28 14:13:52 -0400] tier: you specifying credentials or using ssh keys?
[2014-05-28 14:14:49 -0400] graph1ZzLle: It was kinda a stupid mistake, I did not specified the correct --ssh-user to use, so the server were created, but couldn't install things because couldn't ssh into instance
[2014-05-28 14:14:51 -0400] graph1ZzLle: oops
[2014-05-28 14:14:55 -0400] graph1ZzLle: specified ssh key
[2014-05-28 14:15:21 -0400] graph1ZzLle: defined in my knife.rb
[2014-05-28 14:21:20 -0400] ErebusBat: graph1ZzLle if you run with -VV option then it might provide more insight to the failure
[2014-05-28 14:33:21 -0400] mikz: hi, i was looking for an error I'm getting when using test-kitchen and omnibus and found it referenced in this chat ( http://community.opscode.com/chat/chef/2014-04-17 )
[2014-05-28 14:33:33 -0400] mikz: it is about omnibus::_git installing libcurl4-gnutls-dev
[2014-05-28 14:33:35 -0400] mikz: which fails
[2014-05-28 14:33:56 -0400] mikz: i'm using latest generated kitchen.yml, also tried several combinations, upgrading chef, nothing helps
[2014-05-28 14:34:18 -0400] mikz: the apt-get works fine when I run it by hand
[2014-05-28 14:34:58 -0400] mikz: https://gist.github.com/mikz/a7d9247828ad1d7996a3
[2014-05-28 14:41:53 -0400] juliancdunn: mikz: looks like a path thing
[2014-05-28 14:41:58 -0400] juliancdunn: 'update-info-dir: not found'
[2014-05-28 14:42:36 -0400] juliancdunn: gonna assume that's in the interactive session's path, but not the non-interactive one
[2014-05-28 14:45:17 -0400] mikz: hmm.. i can try to strip the .kithen.yml as much as possible
[2014-05-28 14:46:05 -0400] mikz: also what happens
[2014-05-28 14:46:18 -0400] mikz: that after this failed step kitchen can't ssh to that machine
[2014-05-28 14:46:41 -0400] mikz: is there a way to update the base images? might be some issue there?
[2014-05-28 14:48:41 -0400] juliancdunn: maybe? I wouldn't start there though
[2014-05-28 14:49:01 -0400] mikz: hm. the Berksfile has omnibus (2.1.0)
[2014-05-28 14:49:11 -0400] mikz: .lock ... but I'm using 3.1
[2014-05-28 14:49:21 -0400] medya: I am trying to install the tomcat using cookbook on opscode site, but I dont know how to create databag for it, here are the commands I used for creating data bag: $:knife data bag create tomcat_users $:knife data bag create user1  $:knife data bag create tomcat_users user1
[2014-05-28 14:49:47 -0400] mikz: this is my first use of kitchen/chef, so I don't exactly know what belongs to what
[2014-05-28 14:51:17 -0400] juliancdunn: medya: the docs walk you through it. http://docs.opscode.com/essentials_data_bags.html
[2014-05-28 14:52:16 -0400] medya: juliancdunn, I did follow the instructions there, but still is not happy with me
[2014-05-28 14:53:09 -0400] medya: it would be greatly appericated if there is one example of cookbok with databag, I could install and learn
[2014-05-28 14:54:39 -0400] gchristensen: medya: here ya are: https://github.com/atomic-penguin/cookbook-certificate
[2014-05-28 14:56:45 -0400] eliklein: has anyone found a profiling tool that helps you determine where a specific attribute (and perhaps it's precedence level) is coming from?
[2014-05-28 14:56:51 -0400] juliancdunn: medya: your second command is also unnecessary. you've just created a data bag called 'user1'
[2014-05-28 14:57:36 -0400] mikz: so looks like omnibus (the cookbook) is 2.1, where omnibus-ruby is 3.1... ok I've removed my paths so the .kitchen.yml looks like: https://gist.github.com/mikz/432ccce4518ead5efb73 but it still fails
[2014-05-28 14:57:39 -0400] eliklein: ran into a problem where an attribute was set in a databag on the server that was pulled in via a cookbook, was srs pain remembering where we'd set it
[2014-05-28 14:59:36 -0400] mikz: it is the most basic .kitchen.yml I could come up with (based on the generated default) and it still does not work
[2014-05-28 14:59:59 -0400] juliancdunn: mikz: from the output it doesn't look like a kitchen problem, it looks like apt's post-install script is failing
[2014-05-28 15:00:24 -0400] mikz: installing that package before omnibus::default  works
[2014-05-28 15:00:38 -0400] mikz: after this crash, kitchen can't ssh to that machine
[2014-05-28 15:00:58 -0400] juliancdunn: maybe the packages that it installed restart sshd or something
[2014-05-28 15:01:04 -0400] mikz: so it looks like omnibus cookbook error
[2014-05-28 15:01:10 -0400] CPS: does the opscode jira accept tickets regarding the windows cookbook? or is that not maintained by them?
[2014-05-28 15:01:35 -0400] juliancdunn: CPS: yes, choose Chef Cookbooks and component 'windows'
[2014-05-28 15:02:10 -0400] mikz: i'm using just apt::default and omnibus::default, so there is not much I can do
[2014-05-28 15:02:33 -0400] CPS: seeing some weird behavior where dism.exe uses all available memory when turning server features on
[2014-05-28 15:05:03 -0400] juliancdunn: weird, I use that cookbook regularly and have never seen such behavior
[2014-05-28 15:06:18 -0400] mikz: juliancdunn: does opscode release updates to the default ubuntu images ?
[2014-05-28 15:07:11 -0400] CPS: it's weird, it runs fine in isolation, but when included in our full role it explodes
[2014-05-28 15:07:25 -0400] CPS: so it's probably something i'm doing, but i have no idea how to track it down
[2014-05-28 15:25:46 -0400] mikz: i've tried chef_zero provisioner instead of chef_solo and it still fails
[2014-05-28 15:35:31 -0400] freezey: anyway to ssl verify false in knife.rb?
[2014-05-28 15:36:22 -0400] medya: sorry guys I am still very confused about how to create databag for my tomcat cookbook, could you help me to create very simple databag for this https://github.com/opscode-cookbooks/tomcat#managing-tomcat-users
[2014-05-28 15:45:22 -0400] phantasm66: are node attributes available in a cookbook library?
[2014-05-28 15:46:40 -0400] mikz: I was able to reproduce the omnibus failure on two machines
[2014-05-28 15:47:16 -0400] mikz: is there a omnibus channel or should I create github issue directly?
[2014-05-28 15:48:46 -0400] whiteadam: mikz: Here is probably your best bet: https://tickets.opscode.com/browse/CHEF
[2014-05-28 15:48:49 -0400] double_p: phantasm66: i hope so, i'm using them :)
[2014-05-28 15:49:07 -0400] phantasm66: @double_p: cool!
[2014-05-28 15:49:11 -0400] phantasm66: thanks
[2014-05-28 15:49:26 -0400] phantasm66: next question...
[2014-05-28 15:49:34 -0400] whiteadam: 10 inches
[2014-05-28 15:49:39 -0400] mikz: i'm not sure if it is chef issue, it is omnibus cookbook
[2014-05-28 15:49:39 -0400] double_p: heh
[2014-05-28 15:49:49 -0400] phantasm66: can resources be used in a library?
[2014-05-28 15:49:53 -0400] whiteadam: mikz: oh, in that case just on Github would be fine
[2014-05-28 15:49:56 -0400] phantasm66: haha
[2014-05-28 15:51:46 -0400] mc_fail: huy guys, does chef supports a each_with_index method?
[2014-05-28 15:51:57 -0400] mc_fail: i get a strange error: [2014-05-28T19:47:42+04:00] ERROR: undefined method `each_with_index' for nil:NilClass
[2014-05-28 15:52:10 -0400] juliancdunn: nil doesn't support any methods :-P
[2014-05-28 15:52:16 -0400] whiteadam: burn!
[2014-05-28 15:52:26 -0400] mc_fail: but why nill?
[2014-05-28 15:52:31 -0400] double_p: phantasm66: cant say for sure.. but basically it doesnt make a difference if the code is in the recipe or the library.
[2014-05-28 15:52:47 -0400] jchauncey: mc_fail: im guessing the object you are trying to iterate on is nil
[2014-05-28 15:52:58 -0400] mc_fail: but it doesn't
[2014-05-28 15:53:09 -0400] phantasm66: @double_p: makes sense with cookbook scope
[2014-05-28 15:53:11 -0400] phantasm66: thanks
[2014-05-28 15:53:54 -0400] jchauncey: the error you are geting begs to differ
[2014-05-28 15:55:00 -0400] mc_fail: here is a json with attributes: http://pastebin.com/ZMhvKxYR
[2014-05-28 15:55:20 -0400] mc_fail: and here is my recipie string node['tg-cap']["srv2"]['cap'].each_with_index do |params,cap|
[2014-05-28 15:56:08 -0400] jchauncey: start by removing indexes from node and calling .inspect
[2014-05-28 15:58:47 -0400] whiteadam: Anyone know of a good article that can trick me into using my Gemfiles properly?
[2014-05-28 15:58:59 -0400] zr2d2: I'm having trouble with my bash resource, it says it ran, but my Chef info statements aren't printing. my recipe is at https://gist.github.com/zr2d2/ed1f4292677213a1c1d9. Can I not put Chef log statements inside a code block?
[2014-05-28 15:59:47 -0400] paulczar: whiteadam: its impossible to use Gemfiles properly
[2014-05-28 15:59:59 -0400] whiteadam: paulczar: noooooo that's what I feared the most
[2014-05-28 16:00:27 -0400] paulczar: the only proper way to use gemfiles is to uninstall ruby
[2014-05-28 16:00:55 -0400] whiteadam: hah, I just need to mess my shit up a little bit less
[2014-05-28 16:01:02 -0400] whiteadam: then I'd be happy
[2014-05-28 16:01:17 -0400] zr2d2: paulczar: that seems counterproductive
[2014-05-28 16:01:51 -0400] whiteadam: that's life man
[2014-05-28 16:02:13 -0400] paulczar: zr2d2: I assume he knows Im joking
[2014-05-28 16:02:25 -0400] whiteadam: what are these jokes you speak of?
[2014-05-28 16:02:25 -0400] jeff_r: do I need to use a package resource or some other resource to install git before I can use the git resource? http://docs.opscode.com/resource_git.html
[2014-05-28 16:02:51 -0400] whiteadam: jeff_r: So you want to know if you can get git with git?
[2014-05-28 16:03:13 -0400] paulczar: jeff_r: yes,  I usually do it in my base cookbook before I start loading app cookbooks
[2014-05-28 16:04:09 -0400] jeff_r: so lets say I want to use the git resource to clone a github repo, if git isnt already installed on that machine is the git resource smart enough to install git first or will it fail?
[2014-05-28 16:04:13 -0400] paulczar: jeff_r: which I usually just do as a package resource,  but I think theres a communit git cookbook that will do it
[2014-05-28 16:04:21 -0400] paulczar: http://community.opscode.com/cookbooks/git
[2014-05-28 16:05:49 -0400] paulczar: it would get scary if chef resources started having opinions on how/what things should be installed on your system and then just doing it  ( with the exception of stuff in the omnibus pkg )
[2014-05-28 16:06:32 -0400] jeff_r: paulczar: so if git isnt installed prior to using the git resource, the git resource will fail?
[2014-05-28 16:06:48 -0400] paulczar: jeff_r: from memory yes
[2014-05-28 16:06:56 -0400] jeff_r: paulczar: ok thanks
[2014-05-28 16:07:29 -0400] cyberswat: I can do metadata = Chef::Cookbook::Metadata.new and metadata.from_file('metadata.rb') to parse metadata from rake.  Is there an equivalent for attributes or should attributes also be called out in the metadata.rb?
[2014-05-28 16:08:03 -0400] zr2d2: jeff_r: i would use include_recipe 'git' to install git
[2014-05-28 16:08:56 -0400] cyberswat: I'm thinking proper use of metadata.rb
[2014-05-28 16:09:44 -0400] jeff_r: zr2d2: ill try that out, thanks
[2014-05-28 16:17:38 -0400] cyberswat: yep metadata does that nicely ... thanks!
[2014-05-28 16:19:09 -0400] lungaro: I'm an old school chef user from 0.7.x days and wondered, is there a way to get the logging back to "log whats changed" and thats it?
[2014-05-28 16:19:19 -0400] lungaro: currently my mount is ridiculously verbose
[2014-05-28 16:19:50 -0400] mc_fail: tried to start recipie with node.inspect, but id doesnt helps
[2014-05-28 16:19:54 -0400] mc_fail: *it
[2014-05-28 16:20:05 -0400] juliancdunn: lungaro: there's a minimal formatter
[2014-05-28 16:20:30 -0400] mc_fail: even i can't see my new attributes with web-interface
[2014-05-28 16:20:31 -0400] lungaro: oh nice, so just "-F minimal" -- i'll go rtfm, searching for "chef logging" is kinda hard
[2014-05-28 16:20:39 -0400] mc_fail: but usially i see it
[2014-05-28 16:21:27 -0400] StFS: Hi. I have this recipe which depends on the docker cookbook/recipe. The docker cookbook seems to have a bug which requires me to manually restart the docker service. I'm trying to do this in my recipe (https://gist.github.com/StFS/0d007c503a194ccc1cd4) but when I continue and try to set up a container I keep getting an error message that docker isn't ready
[2014-05-28 16:21:28 -0400] StFS: yet. Is there any way for me to put in some delay (I know it's ugly) after the docker service restart and before the docker_container section is performed?
[2014-05-28 16:21:55 -0400] mc_fail: if i have bot default and override attributes, it should be merged, i'm right?
[2014-05-28 16:22:15 -0400] lungaro: juliancdunn, thanks
[2014-05-28 16:22:27 -0400] juliancdunn: np
[2014-05-28 16:22:34 -0400] mc_fail: actually, i have the same thing with some saved attributes
[2014-05-28 16:30:44 -0400] mc_fail: hmm, i even can't see environment attributes with puts node.inspect
[2014-05-28 16:31:57 -0400] mc_fail: actually, it's really strange, because i can see the same attributes on other hosts in the same environment
[2014-05-28 16:34:04 -0400] jeffcara: Anybody have a good vagrant base box for Ubuntu desktop?
[2014-05-28 16:34:13 -0400] pulsejc: I experienced an odd error yesterday, and I'd like someone to help me understand why the change that fixed it actually works: https://gist.github.com/jerrycattell/515db2bf895cae898c2d
[2014-05-28 16:34:52 -0400] jeffcara: I was hoping to have to avoid learning VeeWee today
[2014-05-28 16:35:02 -0400] pulsejc: chef 10.32.2 on ubuntu 12.04 if it matters (and isn't clear from the logs)
[2014-05-28 16:35:24 -0400] gchristensen: jeffcara: I have one
[2014-05-28 16:35:42 -0400] gchristensen: jeffcara: its 12.04 though, is that okay?
[2014-05-28 16:36:36 -0400] jeffcara: gchristensen: Yeah, that's perfect actually
[2014-05-28 16:37:32 -0400] gchristensen: one sec
[2014-05-28 16:37:41 -0400] cyberswat: @jeffcara If you end up building your own, I'd start by updating the checksums and urls in https://github.com/opscode/bento/blob/master/packer/ubuntu-14.04-i386.json FWIW
[2014-05-28 16:38:03 -0400] gchristensen: jeffcara:err, sorry, its 12.10
[2014-05-28 16:38:55 -0400] jeffcara: gchristensen: no worries. Beggars can't be choosers after all :)
[2014-05-28 16:39:11 -0400] jeffcara: I just wanted a standard dev environment to start off with
[2014-05-28 16:39:17 -0400] gchristensen: jeffcara: if you're using vagrant 1.5, you can use VagrantCloud and use the box name  "grahamc/ubuntu-12.10-desktop-amd64"
[2014-05-28 16:39:34 -0400] jeffcara: okay, sounds good.
[2014-05-28 16:39:40 -0400] gchristensen: jeffcara: if not, you can use this as the source URL: https://vagrantcloud.com/grahamc/ubuntu-12.10-desktop-amd64/version/1/provider/virtualbox.box
[2014-05-28 16:51:02 -0400] worstadmin: Is there a paper someone would recommend as far as salt or chef?
[2014-05-28 16:52:21 -0400] gchristensen: 'a paper'?
[2014-05-28 16:52:25 -0400] gchristensen: like a white paper..?
[2014-05-28 16:52:49 -0400] worstadmin: Just a thing with words that's well structured
[2014-05-28 16:53:35 -0400] gchristensen: Joy of Cooking talks about chefs and salt ;) I'm really, really not sure whaty ou're looking for
[2014-05-28 16:53:50 -0400] worstadmin: That was good
[2014-05-28 17:05:13 -0400] tier: can i set an only_if on an expanded run list in the case of using a role?
[2014-05-28 17:06:12 -0400] tier: something like only_if { node.run_list.expand.include?('recipe[foo]') }
[2014-05-28 17:06:21 -0400] tier: im assuming expand doesn't quite work like that though
[2014-05-28 17:11:20 -0400] CPS: tier: you can do ruby in recipes, so that should work
[2014-05-28 17:11:35 -0400] CPS: depends how/when chef executes that bit about the node though
[2014-05-28 17:12:36 -0400] tier: yeah, doing it like that tells me wrong number of arguments, 0 for 1
[2014-05-28 17:12:54 -0400] CPS: on which part?
[2014-05-28 17:14:16 -0400] tier: the only_if line gets pinpointed when the run bombs out
[2014-05-28 17:14:56 -0400] CPS: split it into multiple lines so you can see if it's the if or the include?
[2014-05-28 17:19:30 -0400] tier: actually, before i rip this apart... does expand work in chef solo?
[2014-05-28 17:32:51 -0400] medya: I have question about creating AWS using chef, is the process of creating AWS all automated ? in the getting started I read that says click on this and click on that in AWS console, is there any way to automate creating machines in AWS for nodes ?
[2014-05-28 17:33:56 -0400] kvad32: There is `knife ec2` plugin you may want to check out: https://github.com/opscode/knife-ec2
[2014-05-28 17:43:58 -0400] rayrod2030: hello fellow cheficionados
[2014-05-28 17:45:07 -0400] Tbenz9: Hey guys, I'm trying to write a recipe that installs WinZip on Windows.  When I run the cookbook it doesn't report any errors, but Winzip is not installed, any ideas?
[2014-05-28 17:46:07 -0400] Tbenz9: I upped the log level to "debug" and I'm still not seeing anything that looks amiss.
[2014-05-28 17:50:17 -0400] Tbenz9: bump.
[2014-05-28 17:51:26 -0400] graph1ZzLle: hi there :) it is possible to use data_bag_item in a role file ? I've wrote it in the ruby DSL, but when uploading knife throw me : `from_file': undefined method `data_bag_item' for role
[2014-05-28 17:51:34 -0400] graph1ZzLle: any ideas ?
[2014-05-28 18:01:08 -0400] medya: kvad32, I looked at knife-ec2 plugin, does that plugin create the machine for me ? or do I have create the machine manualy ? becasue in their docs it says "The main assumption is a baseline OS installation exists (provided by the provisioning)."
[2014-05-28 18:11:25 -0400] medya: for creating machines automaticly in AWS do you recommend using chef-metal fog or knife ec2 plugin ?
[2014-05-28 18:14:22 -0400] stormerider: is seth vargo on IRC by chance, or someone from Chef that could ping him for an update on https://www.getchef.com/support/tickets/18028 ? thanks!
[2014-05-28 18:19:36 -0400] cheeseplus: medya: you still need to bootsrap the nodes with knife
[2014-05-28 18:19:49 -0400] cheeseplus: medya: "This is the official Chef Knife plugin for EC2. This plugin gives knife the ability to create, bootstrap, and manage EC2 instances."
[2014-05-28 18:20:00 -0400] sandstrom: Probably a newbie question, but my attributes won't work. http://pastie.org/9231620 (I've included them in the attributes file, and try to reference from recipe.
[2014-05-28 18:20:01 -0400] cheeseplus: so yes, it will do what you want and is the right toom
[2014-05-28 18:21:49 -0400] jbz: sandstrom: when you're referencing attributes, don't put 'default' - just put node[:ruby][:version].
[2014-05-28 18:22:15 -0400] jbz: when reading attributes, there is no precedence, there's just the current value.  Precedence is only for setting.
[2014-05-28 18:22:38 -0400] how-art-thou: what is vagrant?
[2014-05-28 18:24:53 -0400] sandstrom: how-art-thou: their website will explain it better than I can
[2014-05-28 18:25:29 -0400] sandstrom: jbz: I tried that first. It throws `undefined method `[]' for nil:NilClass`
[2014-05-28 18:28:08 -0400] jbz: sandstrom: Try taking out the code that uses the attribute, leaving in the attribute, and then seeing if the node record on the server reflects the value you expect?
[2014-05-28 18:29:04 -0400] sandstrom: what/where is the node record? (I'm not using chef server, only chef client)
[2014-05-28 18:30:45 -0400] sandstrom: jbz: what/where is the node record? (I'm not using chef server, only chef client)
[2014-05-28 18:31:12 -0400] sandstrom: I've gotten other cookbooks to work, so it feels like I've made some major mistake on this one.
[2014-05-28 18:31:23 -0400] ErebusBat: sandstrom: do you mean that you are using chef-solo?
[2014-05-28 18:31:48 -0400] sandstrom: ErebusBat: Yes!
[2014-05-28 18:31:53 -0400] sanguisdex: so I am having trouble reading the docmention of the php cook book. it wants me to use LWRP's to add pear packages but it does not say what the databags will be called, and I can't fine data_bag_item in the code, so I don't know how to make the LWRP
[2014-05-28 18:32:02 -0400] how-art-thou: http://docs.vagrantup.com/v2/why-vagrant/index.html hmmmm
[2014-05-28 18:32:04 -0400] sanguisdex: anyone point me in the right direction?
[2014-05-28 18:32:07 -0400] how-art-thou: its like chef for chef?
[2014-05-28 18:32:08 -0400] sandstrom: ErebusBat: chef-solo + vagrant
[2014-05-28 18:32:27 -0400] ErebusBat: sandstrom: then your node data should be in the Vagrantfile
[2014-05-28 18:33:47 -0400] ErebusBat: sandstrom: See the chef.json note:  http://docs.vagrantup.com/v2/provisioning/chef_solo.html
[2014-05-28 18:33:48 -0400] sanguisdex: https://github.com/opscode-cookbooks/php#resourceprovider how do I add the packages I need?
[2014-05-28 18:37:12 -0400] medya: cheeseplus, so do you mean knife ec2 does everything that chef-metal does?  what chef metal does that knife ec2 doesnt do?
[2014-05-28 18:38:49 -0400] rayrod2030: medya: totally depends on your usecase.
[2014-05-28 18:39:04 -0400] rayrod2030: medya: some people run applications that use fog/boto/jclouds for provisioning.
[2014-05-28 18:39:25 -0400] rayrod2030: medya: chef-metal seems to be gaining popularity for standing up stacks
[2014-05-28 18:39:52 -0400] rayrod2030: medya: personally I use a modified version of asgard to launch nodes that are provisioned by chef.
[2014-05-28 18:40:13 -0400] rayrod2030: medya: so like every answer in chef land there is no one answer.  it's a matter of taste I suppose.
[2014-05-28 18:40:24 -0400] medya: rayrod2030 so can chef-metal create a AWS automaitcly and bootstrap it, do you mean I dont need knife ec2 ?
[2014-05-28 18:40:41 -0400] jkeiser: medya: they can both create AWS servers, correct
[2014-05-28 18:41:15 -0400] medya: and can also bootstrap it and add things to the nodes run lists?
[2014-05-28 18:41:16 -0400] jkeiser: metal is a way to write down your servers in a recipe so that you can reuse them or create them in batches; knife ec2 lets you do one-at-a-time server creation
[2014-05-28 18:41:18 -0400] jkeiser: yep
[2014-05-28 18:41:31 -0400] jkeiser: metal is a bit better at *modifying* machines after the fact, as well
[2014-05-28 18:41:32 -0400] medya: I see thanks
[2014-05-28 18:41:51 -0400] jkeiser: the caution is that metal is still prerelease.  Like, seems to be working and increasing numbers of people are using it
[2014-05-28 18:41:56 -0400] jkeiser: But still prerelease
[2014-05-28 18:42:15 -0400] jkeiser: There is a lot of polish (and a couple of drivers) to do before 1.0
[2014-05-28 18:42:33 -0400] nomike: hi
[2014-05-28 18:45:31 -0400] nomike: I'm running a few systems with a mix of different debian and ubuntu versions. As I'm modifying users within my recipes I need to have the package "ruby-shadow" installed. My problem now is, that the package was named "libshadow-ruby1.8" in debian <= squeeze and ubuntu <= 12.04.
[2014-05-28 18:45:42 -0400] nomike: There is no transitional package.
[2014-05-28 18:46:47 -0400] nomike: And I want to avoid having to write "if debianversion <= 6.0 then package "libshadow-ruby1.8" else package "ruby-shadow" endif" like contructs.
[2014-05-28 18:46:51 -0400] nomike: Any ideas?
[2014-05-28 18:47:00 -0400] sandstrom: jbz: ErebusBat I've investigated some more. I've got multiple-cookbooks, tied together with a 'wrapper cookbook'. The attributes/default.rb file in one cookbook gets run, but not the other. I've tested this by inserting `puts "Hello from /path/to/file"`.
[2014-05-28 18:47:25 -0400] sandstrom: jbz: ErebusBat what could cause an attributes file not to be included?
[2014-05-28 18:48:35 -0400] jbz: sandstrom: Are both cookbooks in the run list?  Or is one handled only by includes?
[2014-05-28 18:48:43 -0400] ErebusBat: sandstrom: My guess is that your path is wrong.  The attribute file should be: COOKBOOK/attributes/default.rb
[2014-05-28 18:48:47 -0400] jbz: oh I see, wrapper
[2014-05-28 18:49:31 -0400] ErebusBat: You could test that by running a recipe in the offending cookbook directly.  Also when testing this I find either a raise "STOPSTOP" or a=1/0 works better
[2014-05-28 18:49:34 -0400] sandstrom: both 'child recipes' (non-wrapper) are included via `include_recipe`, and neither is listed using `depends` in metadata.rb
[2014-05-28 18:49:39 -0400] ErebusBat: Sometimes stdout gets eaten
[2014-05-28 18:49:51 -0400] cheeseplus: nomike: set the package name in an attribute
[2014-05-28 18:49:59 -0400] jbz: oh, you *have* to have depends in metadata, AFAIK
[2014-05-28 18:50:05 -0400] cheeseplus: nomike: or case around the operating systems, the reality is you'll just have to do that at some point
[2014-05-28 18:50:14 -0400] ErebusBat: sandstrom: if it is a wrapper then the should be listed as depends
[2014-05-28 18:50:36 -0400] cheeseplus: nomike: abstractions can only be stretched so far
[2014-05-28 18:51:25 -0400] sanguisdex: so I am having some touble understaning LWRP's. when a cookbook provides them do I need to write another extending cookbook to use them?
[2014-05-28 18:51:52 -0400] sandstrom: jbz: ErebusBat THANKS! It worked after putting them in 'depends'. I never tried because I assumed it would work without, since the other - working - recipe wasn't. Anyway, thanks so much!
[2014-05-28 18:52:09 -0400] sanguisdex: any tutorials that provide more than therory and I need context
[2014-05-28 18:52:24 -0400] jbz: sandstrom: excellent.
[2014-05-28 18:52:43 -0400] cheeseplus: sanguisdex: http://dougireton.com/blog/2012/12/31/creating-an-lwrp/
[2014-05-28 18:52:57 -0400] cheeseplus: sanguisdex: you don't have to extend them all the time
[2014-05-28 18:53:23 -0400] cheeseplus: sanguisdex: sometimes LWRPs are inside of cookbooks that do the thing you want, other times you will wrap a cookbook that includes an LWRP to get the functionality
[2014-05-28 18:53:33 -0400] cheeseplus: so bolth
[2014-05-28 18:54:42 -0400] sanguisdex: cheeseplus: if you would not mind looking at the php cookbook and helping me decyperh what I need to do to install APC that would be great
[2014-05-28 18:54:57 -0400] zr2d2: can i get the bash resource to print to stdout? or would it print somewhere else by default? in my recipe (https://gist.github.com/zr2d2/f36e4190d92c8be9a862) i'm tring to run pwd, but i don't see the output
[2014-05-28 18:56:04 -0400] shlant: zr2d2: either set the log level to debug or use the log resource
[2014-05-28 18:56:33 -0400] shlant: actually maybe you can't use the log resource
[2014-05-28 18:56:38 -0400] shlant: just debug
[2014-05-28 18:56:44 -0400] cheeseplus: sanguisdex: so from the examples, yes you would need to write a wrapper cookbook or include it to get the php_pear resource
[2014-05-28 18:57:17 -0400] cheeseplus: all the LWRP gives you is a nice little shortcut, like"php_pear" to abstract A Thing
[2014-05-28 18:57:55 -0400] cheeseplus: now you could write a cookbook to just install the package itself for the respective distro
[2014-05-28 18:58:07 -0400] cheeseplus: buy if you wanted to use pear, that would be the way to do it
[2014-05-28 19:00:20 -0400] sanguisdex: cheeseplus: oh okay so to clatrify in my default.rb I can add php_pear "apc" do ....., and then write my on tmplate for the conf.d apc.ini file
[2014-05-28 19:01:31 -0400] sanguisdex: (just saying it back yo you in my own words so I can confrim I understand
[2014-05-28 19:05:49 -0400] nomike: cheesplus: I think I've found another solution. I've created a meta-package named "libshadow-ruby1.8" with version 0.1 which depends on "ruby-shadow". This comes into a PPA which I use on my systems. When I'm on an old release of debian/ubuntu the package is not used as there are newer versions in the official repos. On new releases the package is installed and pulls in "ruby-shadow" as dependency.
[2014-05-28 19:06:12 -0400] cheeseplus: sanguisdex: sure that'll work
[2014-05-28 19:06:27 -0400] sanguisdex: cheeseplus: thanks mate you're a ledgend
[2014-05-28 19:06:40 -0400] sanguisdex: cheeseplus++
[2014-05-28 19:06:41 -0400] cheeseplus: nomike: that works too but that to me seems like the most convuluted way
[2014-05-28 19:07:09 -0400] cheeseplus: nomike: only because if someone else has to debug later, casing for the operating system isn't _that_ dirty
[2014-05-28 19:07:27 -0400] cheeseplus: I'm a fan of this method https://github.com/opscode-cookbooks/build-essential
[2014-05-28 19:07:51 -0400] cheeseplus: have the default recipe do nothing but request a corresponding platform version recipe
[2014-05-28 19:07:54 -0400] cheeseplus: very easy to reason about
[2014-05-28 19:08:09 -0400] zr2d2: shlant: i only had it at info, but still can't see it when i run 'chef-client -l debug'
[2014-05-28 19:10:45 -0400] rpetty: Good afternoon.  Is there a way to load a file via cookbook_file from another cookbook and prevent default from running in that cookbook?
[2014-05-28 19:10:55 -0400] shlant: zr2d2: are you sure? Double check that it is actually debug. It can sometimes be hard to see as there will be a lot of output with debug as well
[2014-05-28 19:19:58 -0400] zr2d2: shlant: uplaoded my recipe again and ran chef-client -l debug, but couldn't find the string i echoed
[2014-05-28 19:23:25 -0400] shlant: zr2d2: can you show me the part of the chef run relating to the bash block?
[2014-05-28 19:23:33 -0400] jeffcara: Can you use knife exec to start a chef-client run on a node? I know you can add stuff to the run_list with that, but didn't see anything specific about htat
[2014-05-28 19:23:42 -0400] workmad3: zr2d2: try 'chef-client -l debug --force-logger'
[2014-05-28 19:25:00 -0400] zr2d2: shlant: added it to my gist
[2014-05-28 19:25:30 -0400] ryanschwartz: Hello all - I remember way back in the good old days, there used to be a documentation page that said, in a nutshell "you can use knife or the webUI to edit roles or you can use DSL and `knife role from file` but don't do both" - I can't find that page any more.
[2014-05-28 19:26:10 -0400] ryanschwartz: Trying to explain to a new admin why his 'knife edit role' changes didn't show up in our git repos
[2014-05-28 19:26:44 -0400] ryanschwartz: Does that ring a bell for anyone, and might you have a link?
[2014-05-28 19:30:05 -0400] shlant: ryanschwartz: well I assume knife edit role only touched the role on the chef server which has nothing to do with git
[2014-05-28 19:30:28 -0400] ryanschwartz: shlant: that's exactly correct, but I'm looking for the documentation page that explains that
[2014-05-28 19:30:46 -0400] shlant: zr2d2: that's weird try not specifying a user with the block?
[2014-05-28 19:31:01 -0400] ryanschwartz: I just can't find it now that everything's moved over to docs.opscode.com
[2014-05-28 19:31:52 -0400] shlant: ryanschwartz: well this page says "The knife edit subcommand is used to edit objects on the Chef server"
[2014-05-28 19:31:56 -0400] shlant: http://docs.opscode.com/knife_edit.html
[2014-05-28 19:32:19 -0400] shlant: this seems to be more of a confusion of what git is
[2014-05-28 19:33:08 -0400] ryanschwartz: shlant: not helping. I'm not needing an explanation of how it works. I know how it works. I want to know if the documentation page that I'm remembering was moved or not.
[2014-05-28 19:33:26 -0400] ryanschwartz: and if it was moved, where the new URL is
[2014-05-28 19:33:30 -0400] ryanschwartz: :D
[2014-05-28 19:37:49 -0400] ryanschwartz: http://docs.opscode.com/essentials_roles.html#manage-roles
[2014-05-28 19:38:04 -0400] ryanschwartz: When files are uploaded to a Chef server from a file and then edited using the Chef Manage, if the file is edited and uploaded again, the changes made using the Chef Manage user interface will be lost. The same is true with Knife, in that if roles are created and managed using Knife and then arbitrarily updated uploaded JSON data, that action will overwrite what has been done previously using Knife. It is strongly recommended t
[2014-05-28 19:38:04 -0400] ryanschwartz: keep to one process and not switch back and forth.
[2014-05-28 19:38:13 -0400] ryanschwartz: FWIW, that's what I was looking for
[2014-05-28 19:41:08 -0400] shlant: ah
[2014-05-28 19:45:54 -0400] CPS: we're using jenkins to automatically upload things to the chef server when checked into git
[2014-05-28 19:46:08 -0400] CPS: so you don't need someone knifing stuff as it comes in
[2014-05-28 19:47:44 -0400] cheeseplus: there is also knife-spork - https://github.com/jonlives/knife-spork
[2014-05-28 19:55:19 -0400] zr2d2: shlant: can't find it' that section of output hasn't changed
[2014-05-28 19:55:44 -0400] zr2d2: but good guess at the user differance
[2014-05-28 19:58:27 -0400] zenloop_: Hey guys, question, how do I move a chef node to another chef server?  I
[2014-05-28 20:00:33 -0400] shlant: zenloop_: try here: http://www.ducea.com/2013/03/05/howto-migrate-to-chef-11/
[2014-05-28 20:01:03 -0400] shlant: zr2d2: no idea. Should work http://stackoverflow.com/questions/17813592/how-can-i-display-the-output-of-a-opscode-chef-bash-command-in-my-console
[2014-05-28 20:02:12 -0400] zr2d2: shlant: i'm specifying it as an attribute
[2014-05-28 20:02:24 -0400] zenloop_: @shlant: Thanks!  Will give it a look.
[2014-05-28 20:02:30 -0400] zr2d2: not in a code block
[2014-05-28 20:04:25 -0400] gyoza: anybody got a hacked up aws calculator for personal use?
[2014-05-28 20:04:31 -0400] gyoza: (pricing
[2014-05-28 20:04:32 -0400] gyoza: )
[2014-05-28 20:04:49 -0400] jameson__: gyoza: is the simple pricing caculator not worky?
[2014-05-28 20:04:54 -0400] gyoza: it works
[2014-05-28 20:04:55 -0400] shlant: zr2d2: uhhh I thought your original gist had it in a bash block?
[2014-05-28 20:04:56 -0400] gyoza: i want to steal it
[2014-05-28 20:04:57 -0400] gyoza: :P
[2014-05-28 20:05:02 -0400] jameson__: :3
[2014-05-28 20:05:11 -0400] gyoza: dont want to rewrite it
[2014-05-28 20:05:13 -0400] gyoza: if i do not need to
[2014-05-28 20:05:59 -0400] zr2d2: by bash block, you mean the code attribute? that part is commented out
[2014-05-28 20:07:21 -0400] shlant: zr2d2: are you looking for the echo ==========================
[2014-05-28 20:07:56 -0400] zr2d2: well, the ==========================
[2014-05-28 20:12:56 -0400] datallah: coderanger: I was asking about an issue with partial search a few days ago - it was only resolving for the node index, and not the environment index.  I think I've figured out why it isn't working, and I wanted your thoughts before I filed a bug.
[2014-05-28 20:13:33 -0400] datallah: I think the issue is that on the environment these things are "defaults" not "attributes"
[2014-05-28 20:14:31 -0400] datallah: It looks like the indexing (and also retrieval of specific attributes) only works for attributes.
[2014-05-28 20:14:57 -0400] Medya: if I encrypt a databag with a sercret, do I need to provide the nodes with that secret somehow ? if yes, how ?
[2014-05-28 20:15:11 -0400] gchristensen: frequently the secret willbe provided during bootstrap
[2014-05-28 20:16:19 -0400] davidordave: --secret-file {path} at bootstrap time will drop it. You may want to look into chef-vault too. Much better approach I think.
[2014-05-28 20:16:20 -0400] Medya: does it mean if I run sudo chef-client on the nodes, they will get the new databag and the secret ?
[2014-05-28 20:18:30 -0400] Medya: davidordave ,when you say bootstrap you mean only the first time I create a node and install chef on it ? or any time that chef-client runs?
[2014-05-28 20:20:17 -0400] davidordave: The first time http://docs.opscode.com/knife_bootstrap.html#options. I think you can re-bootstrap without any issues, but at that point you might as well add it via some other means.
[2014-05-28 20:21:11 -0400] Medya: daviddordave what do u mean of  "add it via some other means."
[2014-05-28 20:28:06 -0400] davidordave: @Medya, like scp
[2014-05-28 20:29:45 -0400] werdnativ: I'm trying to override this to depend on percona::client instead of mysql::client: https://github.com/opscode-cookbooks/mysql-chef_gem/blob/master/libraries/provider_mysql_chef_gem.rb#L10
[2014-05-28 20:30:21 -0400] werdnativ: It seems to install the packages, but build-essential doesn't seem to get installed before it gets down to the chef_gem
[2014-05-28 20:32:31 -0400] werdnativ: I tried it with adding node.set['build-essential']['compile_time'] = true as well, but I don't see any of those packages getting installed.
[2014-05-28 20:32:49 -0400] Medya: daviddordave I tried to re-bootstrap my node so I pass the secret to it but it gave me this error  on the client "Failed to authenticate as 'arch-chef-002'. Ensure that your node_name and client key are correct."
[2014-05-28 20:36:18 -0400] gyoza: ok. one more time before ig uess I write my own ghetto version, anybody got a clone of the aws calculator they wanna hook me up with? :)
[2014-05-28 20:36:49 -0400] gyoza: boss wants me to make a calculator with "what the customer is going to pay"
[2014-05-28 20:36:50 -0400] gyoza: hahaha
[2014-05-28 20:37:21 -0400] gchristensen: only Amazon knows how much you're using :P
[2014-05-28 20:39:57 -0400] gyoza: yea i know but we want to be able to dynamically do pricing
[2014-05-28 20:40:05 -0400] gyoza: i know its easy as this is the price
[2014-05-28 20:40:07 -0400] gyoza: add x amount
[2014-05-28 20:40:14 -0400] gyoza: but we wanna get more granular
[2014-05-28 20:46:33 -0400] coderanger: datallah: I don't think that should be an issue, the expander only speaks JSON, and should recursively expand everything given to it
[2014-05-28 20:49:28 -0400] datallah: Hmm... Well my original issue was around filtering the search, and I'm running into what seems like the same thing when trying to filter the results, so the defaults vs attributes made logical sense.
[2014-05-28 20:56:59 -0400] cschneid: ERROR: The data in your request was invalid - Response: Bad checksums!
[2014-05-28 20:57:01 -0400] cschneid: What's up with this:
[2014-05-28 20:57:32 -0400] cschneid: I am running sudo knife cookbook upload -VV --all -c vm/workstation/knife.rb and getting that checksums error. The same line worked previously.
[2014-05-28 21:02:34 -0400] davidordave: @cschneid, I have run into a similar issue before in berks because of .ds_store files. I feel like I saw a ticket about it regarding bulk knife uploads, but I can't seem to find it.
[2014-05-28 21:02:57 -0400] cschneid: some googling didn't help so I blew away my whole vagrant and am trying again. I've changed enough it's worth doing anyway.
[2014-05-28 21:03:03 -0400] cschneid: I'll keep an eye out for .ds_store files.
[2014-05-28 21:03:30 -0400] cschneid: or... do I need to be better about bumping cookbook versions when I'm devving? (upload to local chef server inside the vagrant repeatedly)
[2014-05-28 21:05:32 -0400] coderanger: datallah: The way search works is that when an object update is received by erchef, it bakes it to JSON and crams it in the rabbitmq queue. The expander process pops the queue, decodes the JSON, and then does the baz, bar_baz, foo_bar_baz expansion (but at this point it doesn't know what type of data it is operating on), and then makes a single huge string of that and puts it in Solr
[2014-05-28 21:06:31 -0400] coderanger: datallah: so it might be something funky about the form/shape of that JSON passed between the proc
[2014-05-28 21:07:57 -0400] gchristensen: cschneid: have you tried chef-zero for dev?
[2014-05-28 21:08:06 -0400] cschneid: no. don't know what that is
[2014-05-28 21:08:14 -0400] gchristensen: its like a chef server, but with no memory :)
[2014-05-28 21:08:19 -0400] gchristensen: or rather, in-memory memory
[2014-05-28 21:08:23 -0400] datallah: coderanger: It looks like I'm just an idiot - my coworker pointed out that I need to prefix my query/filter with e.g. "default_attributes" instead of just looking for the attribute tree
[2014-05-28 21:08:29 -0400] gchristensen: cschneid: it makes dev easier, check it out
[2014-05-28 21:08:42 -0400] cschneid: interesting. We have a vagrant vm which boots with a full chef server
[2014-05-28 21:08:48 -0400] cschneid: so that's not the bad part. :)
[2014-05-28 21:09:35 -0400] gchristensen: it just simplifies things around version #'s and faking data
[2014-05-28 21:09:41 -0400] cschneid: does look pretty slick.
[2014-05-28 21:09:47 -0400] cschneid: I'll figure that out soon
[2014-05-28 21:12:50 -0400] coderanger: datallah: Ahh, I see what you mean
[2014-05-28 21:13:05 -0400] coderanger: datallah: Yeah, that would be a thing in partial search, thats different from the nested query not working though
[2014-05-28 21:13:22 -0400] datallah: It turns out that it is kinda the same thing
[2014-05-28 21:13:40 -0400] datallah: (or at least if I qualify the nested query, it works in the same way)
[2014-05-28 21:14:01 -0400] coderanger: datallah: Weird, that doesn't match what I thought I was seeing, but maybe I mistyped as well
[2014-05-28 21:31:11 -0400] pedahzur: Does anyone know if http://rbel.frameos.org/ is going to soon start to build for RHEL 7? There are public betas available now.
[2014-05-28 21:32:40 -0400] coderanger: pedahzur: Why would you not use the omnibus packages?
[2014-05-28 21:33:02 -0400] pedahzur: coderanger: Willing to learn. Can you point me to those?
[2014-05-28 21:33:10 -0400] coderanger: pedahzur: getchef.com/chef/install/
[2014-05-28 21:34:04 -0400] pedahzur: coderanger: Well, that doesn't list RHEL 7 either. And that is all one huge package, and not broken out to properly pull in dependencies (at least I gather, from the description on that page).
[2014-05-28 21:34:20 -0400] cschneid: gchristensen: figured out my error - I had a knife.rb file that had `cookbook_path [ "#{File.dirname(__FILE__)}/cookbooks" ]`, but then moved knife.rb, and then the path didn't work any more
[2014-05-28 21:35:15 -0400] coderanger: pedahzur: It won't be added formally until RHEL 7 actually releases, but the RHEL 6 builds should work
[2014-05-28 21:35:30 -0400] coderanger: pedahzur: And yes, they are shipped as isolated containers, not multiple packages
[2014-05-28 21:35:58 -0400] pedahzur: coderanger: Want isolated containers (that play well with other RPM deps), and don't really want to install in /opt. :)
[2014-05-28 21:44:00 -0400] coderanger: pedahzur: Not sure what you mean
[2014-05-28 21:44:12 -0400] coderanger: pedahzur: They do play well with other RPMs in that they don't interact with them
[2014-05-28 21:52:14 -0400] pedahzur: coderanger: OK, gotcha. We might consider that.
[2014-05-28 21:52:33 -0400] gyoza: yo, anybody here know if you can call support with the license you get from AWS for redhat?
[2014-05-28 21:52:40 -0400] coderanger: pedahzur: You don't have a lot of options, thats the only supported way to install Chef
[2014-05-28 21:53:07 -0400] coderanger: pedahzur: Certainly for chef-server, its more or less the only game in down
[2014-05-28 21:54:45 -0400] coderanger: You can install chef-client yourself, but its not easy to do correctly
[2014-05-28 21:54:50 -0400] elebertus: jtimberman: thanks for looking at that pr :D
[2014-05-28 21:55:15 -0400] jtimberman: elebertus: yar
[2014-05-28 22:01:18 -0400] bricker`work: Am I crazy or should Berkshelf not be creating git files when you run `berks cookbook something`? That seems absurd.
[2014-05-28 22:05:51 -0400] coderanger: gyoza: You are paying for some kind of subscription I think
[2014-05-28 22:06:25 -0400] coderanger: bricker: Berks is opinionated, you should be using git, dealwithit.gif
[2014-05-28 22:10:50 -0400] jameson__: jtimberman: do you handles chef-splunk cookbook tickets?
[2014-05-28 22:14:06 -0400] jidar: lol
[2014-05-28 22:14:18 -0400] jidar: use git! berks says so, I pitty the fool
[2014-05-28 22:44:19 -0400] oponder: does anyone know what could be causing a weird encoding switch in chef output
[2014-05-28 22:44:21 -0400] oponder: http://pastie.org/9232481
[2014-05-28 22:45:38 -0400] oponder: its during an apt-get upgrade -y... but when it is generating locales, suddenly everything goes to hell and I get some weird characters
[2014-05-28 22:46:45 -0400] jmickle: is there something on the latest knife
[2014-05-28 22:46:51 -0400] jmickle: that wont download if directory is a git repo?
[2014-05-28 22:57:06 -0400] gyoza: FYI Amazon AWS rhel images come w/ licensing, but its not a license that comes w/ support.
[2014-05-28 22:57:16 -0400] gyoza: (ansering my question from earlier)
[2014-05-28 22:59:02 -0400] Otterley: what's the best way to import and call functions in libraries these days?
[2014-05-28 22:59:47 -0400] Otterley: I've seen libraries that extend Chef::Resource::whatever, recipes that do it, crazy metaprogramming involving .send(:include, ...) ...
[2014-05-28 23:00:26 -0400] Otterley: my goal: use my own namespace and not cause naming conflicts
[2014-05-28 23:02:08 -0400] kisoku: juliancdunn: you around ?
[2014-05-28 23:02:45 -0400] kisoku: is there any reason the opscode bento vagrant images ship with this in their /etc/hosts
[2014-05-28 23:02:51 -0400] kisoku: 127.0.1.1vagrant.nyc.urbandecoder.netvagrant
[2014-05-28 23:12:42 -0400] Wesly549142: e
[2014-05-28 23:13:03 -0400] Wesly549142: Hey Quick question for Chef Clients - any experts?
[2014-05-28 23:13:12 -0400] Otterley: just ask
[2014-05-28 23:13:28 -0400] Wesly549142: I'm getting "changing permissions of `/etc/chef/validation.pem': Operation not permitted"
[2014-05-28 23:13:38 -0400] Wesly549142: while trying to configure a client
[2014-05-28 23:14:47 -0400] Wesly549142: This is the whole log
[2014-05-28 23:14:48 -0400] Wesly549142:  bash: line 37: /etc/chef/validation.pem: Permission denied   chmod: changing permissions of `/etc/chef/validation.pem': Operation not permitted   bash: line 71: /etc/chef/client.rb: Permission denied  bash: line 79: /etc/chef/first-boot.json: Permission denied  Starting first Chef Client run...  [2014-05-28T16:05:29-07:00] FATAL: Permissions are incorrect on /etc/chef/client.rb. Please chmod a+r /etc/chef/client.rb
[2014-05-28 23:16:35 -0400] stormerider: Wesly549142: are you running chef-client as root?
[2014-05-28 23:17:02 -0400] Wesly549142: yes
[2014-05-28 23:17:14 -0400] Wesly549142: infact how can i verify that?
[2014-05-28 23:17:43 -0400] stormerider: how are you running it? sudo chef-client, sudo su - and then chef-client, etc?
[2014-05-28 23:18:37 -0400] Wesly549142: oh, I am a root user on my chef-server connecting to my first client
[2014-05-28 23:21:39 -0400] Wesly549142: ahh nvm i figured it out thanks
[2014-05-28 23:24:29 -0400] karen_: hey, folks, I have a question about attribute searching
[2014-05-28 23:25:08 -0400] karen_: is there a way using either 'knife search' or the REST API to force a search for 'tag:blah' to be the node tags and not some nested attribute named 'tag'?
[2014-05-28 23:26:12 -0400] karen_: I know you can specify the nested attribute by joining the hierarchy named with _, but I can't find a way to force it only to match the node-level tags
[2014-05-28 23:26:13 -0400] Otterley: chef search shouldn't be diving below the top level in my experience
[2014-05-28 23:26:21 -0400] Otterley: lemme verify though
[2014-05-28 23:26:29 -0400] karen_: it totally does
[2014-05-28 23:27:25 -0400] karen_: which is arguably a feature, until you can't force it to pin to the top-level
[2014-05-28 23:28:42 -0400] karen_: btw, this is open source server 11.0.12-1.ubuntu.12.04
[2014-05-28 23:29:05 -0400] Otterley: hey you're right.  I learn something new every day.
[2014-05-28 23:29:12 -0400] karen_: although I'm pretty sure I recreated it on the latest
[2014-05-28 23:30:23 -0400] Otterley: I wonder if the code is putting an implicit wildcard before the attribute name, or if Chef is indexing attributes multiple times.
[2014-05-28 23:30:58 -0400] Otterley: e.g. node["foo"]["bar"] = 42 is indexed as foo_bar:42 and bar:42 ?
[2014-05-28 23:31:07 -0400] karen_: http://docs.opscode.com/essentials_search.html seems to imply that all leaf attributes get mapped to the top-level to make searching easier
[2014-05-28 23:31:39 -0400] karen_: so my experiments have shown that node tags get merged with node['some_app']['some_attribute']['tags']
[2014-05-28 23:31:57 -0400] karen_: except I can't find a way to force matching the node-level tags only
[2014-05-28 23:32:49 -0400] Otterley: yeah, this would be a feature except when it isn't :(
[2014-05-28 23:33:16 -0400] Otterley: "Before this data is indexed on the Chef server, the nested fields are extracted into the top level"
[2014-05-28 23:33:33 -0400] karen_: and it's potentially a security hole if you use tags to populate users on hosts, etc.
[2014-05-28 23:33:55 -0400] Otterley: this suggests to me that there's no way (a) to avoid value conflicts or (b) to request a strict search
[2014-05-28 23:35:50 -0400] Otterley: http://lists.opscode.com/sympa/arc/chef/2014-01/msg00411.html
[2014-05-28 23:36:23 -0400] Otterley: looks like they're aware of the issue
[2014-05-28 23:37:12 -0400] karen_: I wouldn't mind the proposed solution, as long as there was any way to simplify the search (without also writing checks to filter the results)
[2014-05-28 23:38:01 -0400] karen_: but could I suggest that this be better documented somewhere?  I found it "the hard way" and as I said, depending on use cases, some people may unwittingly be compromising their node security
[2014-05-28 23:38:30 -0400] Otterley: I think you can file doc bugs in their tracker
[2014-05-28 23:39:36 -0400] karen_: Ah, I see, the docs are on github
[2014-05-28 23:43:46 -0400] shlant: anyone have an opinion on cookbook layout? Should I have a cookbook for each app of the same language, or have one app language cookbook and customize with attributes?
[2014-05-28 23:45:07 -0400] Otterley: not sure what you mean by "app language"
[2014-05-28 23:45:18 -0400] Otterley: we have per-application cookbooks.
[2014-05-28 23:45:41 -0400] Otterley: language management is handled via separate cookbooks.
[2014-05-28 23:46:18 -0400] Otterley: so if app A is Python, app A's default recipe installs Python via a Python cookbook, and if app B is Ruby, app B's default receipt installs Ruby via a Ruby cookbook.
[2014-05-28 23:46:28 -0400] Otterley: include_recipe is your friend here
[2014-05-28 23:49:35 -0400] shlant: Otterley: so if you had a bunch of ruby apps, you would still have a cookbook for each?
[2014-05-28 23:49:46 -0400] Otterley: totally
[2014-05-28 23:49:53 -0400] Otterley: makes them independently testable
[2014-05-28 23:51:09 -0400] shlant: Otterley: good point, thanks

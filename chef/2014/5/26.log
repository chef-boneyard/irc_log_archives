[2014-05-26 00:08:07 -0400] lyken: whats the best way to syn cookbooks between workstations? git?
[2014-05-26 00:12:24 -0400] coderanger: lyken: Whatever you use for source control
[2014-05-26 00:12:32 -0400] coderanger: It is just source code like anything else
[2014-05-26 00:12:45 -0400] lyken: yeah thought as much
[2014-05-26 00:12:51 -0400] lyken: monday morning, brain isn't booted yet
[2014-05-26 00:13:20 -0400] lyken: coderanger: ive switched to doing everything with berks
[2014-05-26 00:13:39 -0400] lyken: instead of building everything in a text editor and killing a node testing things :)
[2014-05-26 01:35:52 -0400] lyken: how do i go about adding multiple dependencies ?
[2014-05-26 01:36:03 -0400] lyken: i tried depends 'firstcookbook', 'secondcookbook' ..
[2014-05-26 01:36:30 -0400] jidar: depeds 'first'
[2014-05-26 01:36:34 -0400] jidar: depends 'second'
[2014-05-26 01:36:39 -0400] digitalchild: are, a line for each, thanks
[2014-05-26 03:01:51 -0400] CapoFerro: Sometimes people do: %w[a b c].each do { |c| depends c }
[2014-05-26 03:08:05 -0400] BrianJ: If I do node.default[:my][:attribute] inside a recipe, will it be accessible in other recipes?
[2014-05-26 03:08:29 -0400] BrianJ: node.default[:my][:attribute] = "value"
[2014-05-26 03:29:00 -0400] coderanger: BrianJ: Yes, if they execute later
[2014-05-26 03:30:38 -0400] BrianJ: if I move it into an attribute file will it avoid the execution order?
[2014-05-26 03:30:45 -0400] BrianJ: don't the attributes get executed first?
[2014-05-26 03:30:47 -0400] coderanger: Yes
[2014-05-26 03:35:36 -0400] BrianJ: ok. thanks
[2014-05-26 03:44:43 -0400] chernjie: I am still having trouble understanding what berks does...
[2014-05-26 03:48:48 -0400] coderanger: chernjie: It is a package manager, where the packages are cookbooks
[2014-05-26 03:53:57 -0400] chernjie: coderanger: how do you configure the berks managed cookbooks? by writing a custom cookbook with separate recipes?
[2014-05-26 03:54:17 -0400] chernjie: s/berks\ managed/berks-managed/
[2014-05-26 03:54:25 -0400] coderanger: Yeah, the Right Way is with wrapper cookbooks
[2014-05-26 03:54:33 -0400] coderanger: but roles/env attributes are an option too
[2014-05-26 08:49:01 -0400] kraM: Hi, test-kitchen... Is it still useful?, like berkshelf provides a Vagrant entvironment and all that... And, if it is still useful... Does anyone know how to configure test-kitchen for a Vagrant base box to use?
[2014-05-26 08:53:22 -0400] srenatus: kraM: https://github.com/test-kitchen/kitchen-vagrant/#-default-configuration
[2014-05-26 08:55:39 -0400] kraM: srenatus: Thanks. Not that hard to find :/
[2014-05-26 08:56:50 -0400] srenatus: kraM: there's also #kitchenci on this network
[2014-05-26 09:01:55 -0400] ermajn: hello, what would be best approach to disable root login.. .
[2014-05-26 09:02:26 -0400] srenatus: ermajn: root login?  tty or ssh?
[2014-05-26 09:02:40 -0400] ermajn: srenatus, ssh
[2014-05-26 09:04:11 -0400] srenatus: ermajn: check the openssh cookbook then: https://github.com/opscode-cookbooks/openssh
[2014-05-26 09:21:43 -0400] srenatus: ermajn: FYI, there's also work done in this area already: https://github.com/TelekomLabs/chef-ssh-hardening
[2014-05-26 09:25:56 -0400] ermajn: srenatus, thanks
[2014-05-26 14:17:10 -0400] srenatus: hi there. using berks 3.1.2, I cannot seem to get past "Starting resolution" when trying to "berks install --debug"
[2014-05-26 14:18:24 -0400] srenatus: judging from the data, the communication with api.berkshelf.com seems fine, it sends something and gets 1.36M json data back
[2014-05-26 14:18:59 -0400] srenatus: and now it converted itself into a very busy ruby process
[2014-05-26 14:19:41 -0400] srenatus: Is there anything I could do?  providing hints...?
[2014-05-26 14:34:07 -0400] Evangeael: srenatus: is your chef server overloaded by any chance ?
[2014-05-26 14:36:14 -0400] srenatus: Evangeael: I'm not referencing it in the Berksfile - it'd be better?
[2014-05-26 14:37:21 -0400] Evangeael: Not quite sure, I'm still figuring out how it's working myself. ^^'.
[2014-05-26 14:37:49 -0400] srenatus: Evangeael: :D I'm open to all suggestions
[2014-05-26 14:39:16 -0400] srenatus: hmm missed something.  I guess there was no resolution.
[2014-05-26 15:29:14 -0400] cschneid: When do I use an execute block vs. a bash block?
[2014-05-26 16:05:51 -0400] sarkis: trying to figure out what ill be doing different if i added a chef server
[2014-05-26 16:06:21 -0400] sarkis: currently i have knife-solo which takes my berkshelf file and rsyncs the cookbooks over to the node i am converging..
[2014-05-26 16:07:08 -0400] sarkis: i see that i need to upload cookbooks to chef server? is that the only thing that will change in my workflow? just upload the modified cookbook and allow for nodes to converge?
[2014-05-26 16:08:04 -0400] sarkis: i dont see how berkshelf fits in, unless it makes it easy to upload my cookbooks to the server?
[2014-05-26 16:08:38 -0400] cheeseplus: sarkis: it does exactly that
[2014-05-26 16:10:17 -0400] cheeseplus: sarkis: if you haven't checked it out yet, I highly recommend this series of posts: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-05-26 16:11:46 -0400] sarkis: so i do use berkshelf but ts with knnife-solo
[2014-05-26 16:12:08 -0400] sarkis: ah ive seen that blog, i forgot it shows chef-server ty
[2014-05-26 16:12:19 -0400] sarkis: or does it show chef-server
[2014-05-26 16:12:47 -0400] sarkis: i see it
[2014-05-26 16:13:11 -0400] cheeseplus: cschneid: it depends, what are you trying to accomplish - generally if you're running a script I'd recommned the bash or script resource
[2014-05-26 16:13:39 -0400] cschneid: they seem so similar. What do they do differently?
[2014-05-26 16:13:47 -0400] StFS: hmm... I'm trying to figure out how to define a bridge network interface with chef. I'm coming up empty... am I just having a bad case of the mondays?
[2014-05-26 16:13:50 -0400] cheeseplus: cschneid: I don't like using the bash resource because it pre-supposes bash which has potential to not work on BSD/solaris systems
[2014-05-26 16:14:11 -0400] cheeseplus: cschneid: one is simply more targeted than the other, fairly sure execute calls the script resource
[2014-05-26 16:14:19 -0400] cheeseplus: just convenient wrappers
[2014-05-26 16:14:22 -0400] cschneid: cheeseplus: sure - although my use case is 100% our environment, known ubuntu
[2014-05-26 16:14:25 -0400] cschneid: cheeseplus: ahh, cool.
[2014-05-26 16:14:55 -0400] cheeseplus: sure, I tend to write cookbooks cross-plat so it's important to me (also I like BSD so I'm already strange)
[2014-05-26 16:15:29 -0400] cheeseplus: cschneid: I haven't dug through the code but I image they end up calling the same provider at some point
[2014-05-26 16:15:43 -0400] cschneid: heh. :)
[2014-05-26 16:15:49 -0400] cheeseplus: Chef::Resource::Script::Bash
[2014-05-26 16:16:12 -0400] cheeseplus: er just the generic script resource is what I meant to paste
[2014-05-26 16:16:56 -0400] cheeseplus: I think the bash one is just a subset of execute and it supports all the execute actions and resources
[2014-05-26 16:17:18 -0400] cheeseplus: so it just depends on if you want to declare the shell as an attribute, let it default, or be nicely explicit in the recipe
[2014-05-26 16:17:34 -0400] sarkis: cheeseplus: so say i need to revert something back, i do the rollbacks on the cookbooks and do a berks upload again?
[2014-05-26 16:18:54 -0400] cheeseplus: yes, when using berks with a chef server you only want to use berks
[2014-05-26 16:19:13 -0400] cheeseplus: or at least that is one way to do it, haven't ever rolled anything back in that fashion myself though
[2014-05-26 17:51:08 -0400] sarkis: main thing here is, chef server doesn't really have it's own repo?
[2014-05-26 17:51:13 -0400] sarkis: when using berksway*
[2014-05-26 17:51:20 -0400] sarkis: or does it.. hmm im confused :P
[2014-05-26 17:53:11 -0400] sarkis: would i still need a chef-repo git repo if i am using the berkshelf way?
[2014-05-26 17:53:22 -0400] sarkis: i guess i would need to tell  my server about the nodes etc
[2014-05-26 18:18:57 -0400] werdnativ: Does OSS chef-server always display the default admin user/password on the login page sidebar? I mean, I've changed my password and added other users, but it always looks a little disconcerting seeing it there.
[2014-05-26 18:28:58 -0400] cheeseplus: sarkis: you have repos for each cookbook that is a wrapper/application cookbook
[2014-05-26 18:29:14 -0400] cheeseplus: and anything that exists elsewhere is included in the berksfile
[2014-05-26 18:33:08 -0400] cheeseplus: sarkis: the only thing you would keep in a chef-repo would be things like databags, roles, environments
[2014-05-26 18:40:19 -0400] sarkis: cheeseplus: so currently knife-solo gives me "nodes" where i define run_list
[2014-05-26 18:40:44 -0400] sarkis: cheeseplus: im confused what the run_list will be when i move to chef-server
[2014-05-26 18:40:50 -0400] sarkis: i'd like to stay away from roles
[2014-05-26 18:40:58 -0400] cheeseplus: thats fine
[2014-05-26 18:41:13 -0400] cheeseplus: not sure what you are getting at though, the run_list will be a list of the recipes to run
[2014-05-26 18:41:36 -0400] sarkis: ya but how does chef-server know say nodeA needs this run_list
[2014-05-26 18:42:29 -0400] sarkis: does chef-server know to look in nodes/nodeA.json?
[2014-05-26 18:42:36 -0400] sarkis: wsant sure if that is a knife-solo t hing
[2014-05-26 18:43:08 -0400] cheeseplus: chef server maintains node objects which contain the run_lists
[2014-05-26 18:43:31 -0400] cheeseplus: you tell it when you bootsrap nodes what their run_list will be
[2014-05-26 18:43:39 -0400] sarkis: hmmm
[2014-05-26 18:43:41 -0400] cheeseplus: or just edit the node object directly using knife
[2014-05-26 18:43:43 -0400] sarkis: i need to read up on this
[2014-05-26 18:43:47 -0400] cheeseplus: there are a few ways to do it
[2014-05-26 18:44:26 -0400] cheeseplus: the nodes/ directory thing is just a knife-solo thing
[2014-05-26 18:44:42 -0400] cheeseplus: the server stores all this (roles, envs, nodes)
[2014-05-26 18:44:56 -0400] cheeseplus: and you interact with it via API, typically knife
[2014-05-26 18:48:10 -0400] sarkis: makes sense.. thanks
[2014-05-26 18:55:12 -0400] jpic: hi all, i'm trying to use a chef-repo with chef-solo for a project, but knife role create fails because "ERROR: Your private key could not be loaded from /etc/chef/client.pem". I don't intend to use chef server for this project, how to disable this knife behaviour ?
[2014-05-26 18:55:47 -0400] cheeseplus: jpic: just create the role manually?
[2014-05-26 18:57:14 -0400] cheeseplus: jpic: knife is primarily an interface for chef-sever so most things it does require a chef-server
[2014-05-26 19:27:41 -0400] jpic: i see, thanks cheeseplus
[2014-05-26 19:32:07 -0400] Neozonz|Disc: is there anyway to get a list of IPs of instances inside a aws stack? trying to get such a variable via chef
[2014-05-26 19:37:08 -0400] Neozonz|DISC3: is there anyway to get a list of IPs of instances inside a aws stack? trying to get such a variable via chef
[2014-05-26 19:37:12 -0400] Neozonz|DISC3: sorry got disc earlier
[2014-05-26 19:53:58 -0400] mee: it's certainly possible via the aws command line tools. Not sure how to do it via the chef stuff.
[2014-05-26 19:54:22 -0400] mee: easiest way might be to tag / search by tag
[2014-05-26 19:56:26 -0400] Neozonz|DISC3: i think i found a way
[2014-05-26 19:57:13 -0400] Neozonz|DISC3: https://gist.github.com/anonymous/c6a107182b4b238048fa
[2014-05-26 19:57:20 -0400] Neozonz|DISC3: but i can't figure out the chef array part
[2014-05-26 20:00:31 -0400] Neozonz|DISC3: mee, any ideas?
[2014-05-26 20:27:58 -0400] nougad: hi, does someone know if it is possible to disable a specific ohai plugin in chef-solo?
[2014-05-26 21:50:35 -0400] coderanger: Neozonz|DISC3: Do you mean the current instance or others
[2014-05-26 21:50:51 -0400] Neozonz|DISC3: others
[2014-05-26 21:50:56 -0400] Neozonz|DISC3: basically all instances in the stack
[2014-05-26 21:54:28 -0400] Neozonz|DISC3: coderanger, any ideas? :o
[2014-05-26 21:54:47 -0400] coderanger: Neozonz|DISC3: That would be opsworks-specific, as the usual ways don't apply there
[2014-05-26 21:54:54 -0400] coderanger: (and I don't know about their APIs to say)
[2014-05-26 21:55:00 -0400] Neozonz|DISC3: https://gist.github.com/anonymous/c6a107182b4b238048fa
[2014-05-26 21:55:08 -0400] coderanger: Most likely you need to use the AWS APIs directly
[2014-05-26 21:55:09 -0400] Neozonz|DISC3: i thought maybe that might work
[2014-05-26 21:55:29 -0400] coderanger: Neozonz|DISC3: Again, that has nothing to do with Chef, its an Opsworks API thing :)
[2014-05-26 21:55:39 -0400] coderanger: (and Amazon docs and support are shit)
[2014-05-26 21:55:52 -0400] Neozonz|DISC3: yeah... :(
[2014-05-26 21:55:54 -0400] Neozonz|DISC3: i know
[2014-05-26 21:56:15 -0400] Neozonz|DISC3: oh well
[2014-05-26 21:56:34 -0400] Neozonz|DISC3: was hoping to avoid sdk but guess it cant be helped
[2014-05-26 21:56:43 -0400] Neozonz|DISC3: thx
[2014-05-26 21:56:53 -0400] coderanger: There is the aws cookbook which will help getting the gem installed and usable from within chef
[2014-05-26 22:05:25 -0400] sarkis: coderanger do you use chef server?
[2014-05-26 22:05:47 -0400] sarkis: i know u guys were using berkshelf too just wondering how easy it is to get them both working nicely with each other?
[2014-05-26 22:06:01 -0400] sarkis: seems i have to read up on knife and start using it
[2014-05-26 22:06:25 -0400] coderanger: sarkis: I don't have a production network anymore, but I do recommend using chef-server for a few _very very specific_ things
[2014-05-26 22:06:44 -0400] coderanger: basically just use it for cookbook distribution and node run list storage and nothing else
[2014-05-26 22:07:07 -0400] sarkis: ya thats what i was planning on using it for :)
[2014-05-26 22:07:39 -0400] sarkis: nice.. im on the right track then
[2014-05-26 22:07:53 -0400] sarkis: i can't find how to modify the run_list via knife though, reading through chef knife docs
[2014-05-26 22:08:47 -0400] coderanger: sarkis: knife node edit, usually
[2014-05-26 22:08:54 -0400] sarkis: the cookbook distribution seems straight forward, have berkshelf setup with the chef-server and key, then just do berks upload to the se4rver
[2014-05-26 22:08:58 -0400] coderanger: there are also the knife node run_list commands, but I find them annoying
[2014-05-26 22:08:59 -0400] sarkis: i see
[2014-05-26 22:10:23 -0400] coderanger: If I need to do bulk edits, I usually just write a little python script
[2014-05-26 22:10:47 -0400] coderanger: but it is pretty rare I need to change a node after creation at all
[2014-05-26 23:53:44 -0400] digitalchild: hmm
[2014-05-26 23:53:54 -0400] digitalchild: my install is hanging on bundle install
[2014-05-26 23:53:56 -0400] digitalchild: at ridley
[2014-05-26 23:54:08 -0400] digitalchild: and then the machine goes nuts with cc1plus chewing all cpu
[2014-05-26 23:58:10 -0400] slh1234: Is this the place to ask Knife questions?
[2014-05-26 23:58:31 -0400] digitalchild: yes

[2014-05-24 00:06:34 -0400] fujin: coderanger: where are you at these days? is the training venture a new solo endeavour?
[2014-05-24 00:31:26 -0400] cheflevelramen: quit
[2014-05-24 00:31:31 -0400] cheflevelramen: exit
[2014-05-24 00:31:39 -0400] cheflevelramen: :q!
[2014-05-24 00:52:52 -0400] jameson__: the opscode nginx's cookbook has to be the most garbled up thing i've seen in a while :\
[2014-05-24 01:13:28 -0400] cyrusdavid: how do I check if a data bag item exists?
[2014-05-24 01:15:04 -0400] gkra: oh wtf
[2014-05-24 01:15:09 -0400] gkra: jameson__: yes, yes it is.
[2014-05-24 01:15:11 -0400] gkra: i.e.
[2014-05-24 01:16:21 -0400] gkra: trying to install nginx and passenger from source against a custom ruby.
[2014-05-24 01:16:49 -0400] gkra: passenger needs nginx paths to exist, but needs to be built first, so when you build nginx, you can build it with the passenger module.
[2014-05-24 01:20:11 -0400] jameson__: :| I'm glad my nginx is really simple
[2014-05-24 01:21:10 -0400] Majost_: For the life of me I can't figure out the correct syntax in TK to specify multiple attributes.
[2014-05-24 01:21:25 -0400] Majost_: Does nyone have a working example of this use case?
[2014-05-24 01:21:49 -0400] Majost_: s/nyone/anyone/
[2014-05-24 01:22:28 -0400] fujin: in the kitchen.yml?
[2014-05-24 01:23:09 -0400] Majost_: fujin, yeah
[2014-05-24 01:23:29 -0400] fujin: Majost_: you can either chuck an attributes hash in the provisioner block, or you can put an attributes hash in a suite
[2014-05-24 01:23:33 -0400] fujin: trying to find a non sensitive example to show
[2014-05-24 01:23:44 -0400] fujin: https://www.irccloud.com/pastebin/XIO86wDI
[2014-05-24 01:23:46 -0400] Majost_: It not actually documented on the TK site, which is a little annoying
[2014-05-24 01:23:47 -0400] Majost_: heh
[2014-05-24 01:24:14 -0400] Majost_: oh thats way easier than I thought
[2014-05-24 01:24:39 -0400] fujin: yup. you can also put your tk-specific attrs in like a role or cookbook or something, then include that in the run list, right?
[2014-05-24 01:24:48 -0400] Majost_: I have been using the { key1: { subkey1: { mykey: 'value' }}} syntax
[2014-05-24 01:25:04 -0400] fujin: ah
[2014-05-24 01:25:13 -0400] fujin: I think my syntax is yaml-proper hash specification
[2014-05-24 01:25:19 -0400] gkra: bah, i htink I figured it out now
[2014-05-24 01:25:20 -0400] fujin: dict or associative array or whatever
[2014-05-24 01:25:28 -0400] fujin: map
[2014-05-24 01:25:40 -0400] gkra: nginx::commons, nginx::passenger, nginx::source
[2014-05-24 01:25:43 -0400] gkra: in that order...
[2014-05-24 01:25:46 -0400] Majost_: fujin, yeah, it looks like it
[2014-05-24 01:25:57 -0400] fujin: Majost_: cool, hope that helps 
[2014-05-24 01:26:10 -0400] Majost_: fujin, Yes, thanks! (and they should document it that way)
[2014-05-24 01:26:56 -0400] fujin: Majost_: maybe log a ticket here: https://github.com/test-kitchen/kitchen-docs it's src code to the guide/website.
[2014-05-24 01:27:05 -0400] fujin: I'm sure the kitchenci team would be appreciative
[2014-05-24 01:27:39 -0400] Majost_: thanks
[2014-05-24 01:27:39 -0400] Majost_: =)
[2014-05-24 01:34:22 -0400] Majost_: ack
[2014-05-24 01:34:29 -0400] Majost_: that didn't work quite right
[2014-05-24 01:34:57 -0400] Majost_: The issue seems to be that I have multiple top level keys I need to use
[2014-05-24 01:36:08 -0400] fujin: Majost_: can you gist me what you have
[2014-05-24 01:36:25 -0400] fujin: Majost_: I've definitely done the multiple top level keys, even distinct ones, some specified in the provisioner (globally) and some in suites.
[2014-05-24 01:36:30 -0400] fujin: I can't share my whole kitchen yml though :-(
[2014-05-24 01:36:52 -0400] Majost_: fujin, https://gist.github.com/rhass-r7/25fe5d58f409b44d0ee7
[2014-05-24 01:36:57 -0400] Majost_: np
[2014-05-24 01:37:10 -0400] Majost_: it doesn't barf on the syntax
[2014-05-24 01:37:21 -0400] Majost_: but it doesn't seem to respect the values either
[2014-05-24 01:37:50 -0400] Majost_: so in this case, the postgresql cookbook is complaining because I am trying to converge in solo mode
[2014-05-24 01:38:29 -0400] Majost_: and thats simply because it has a check to say, if in solo, make sure the password attribute is defined
[2014-05-24 01:40:39 -0400] fujin: Majost_: https://gist.github.com/rhass-r7/25fe5d58f409b44d0ee7#comment-1234535
[2014-05-24 01:40:57 -0400] fujin: postgresql is pretty gnarly to get working, the way it re-uses attributes
[2014-05-24 01:41:04 -0400] fujin: trying to recall what issue I had with it
[2014-05-24 01:45:02 -0400] Majost_: heh
[2014-05-24 01:45:11 -0400] Majost_: I use it a lot
[2014-05-24 01:45:34 -0400] Majost_: I would bet it had something to do with wrapping it while setting the version
[2014-05-24 01:45:52 -0400] fujin: yea
[2014-05-24 01:45:55 -0400] Majost_: =)
[2014-05-24 01:46:07 -0400] fujin: https://github.com/fujin/postgresql/tree/unix-socket-directory-only-for-less-than-9.3
[2014-05-24 01:46:10 -0400] fujin: something like that.
[2014-05-24 01:54:43 -0400] Majost_: fujin, huh... that actually defines different suites for different top level keys
[2014-05-24 01:54:57 -0400] Majost_: I wonder if this is a bug or missing feature
[2014-05-24 01:55:51 -0400] fujin: Majost_: it definitely appears to be parsing correctly if you check my comment on your gist
[2014-05-24 01:55:56 -0400] fujin: you can run that ruby 1liner locally too
[2014-05-24 01:56:10 -0400] fujin: ruby -ryaml -e 'puts YAML.load(open("gistfile1.yml").read)'
[2014-05-24 01:56:14 -0400] fujin: change gistfile1.yml to .kitchen.yml
[2014-05-24 01:56:29 -0400] coderanger: fujin: Yeah, staying solo is the plan
[2014-05-24 01:56:44 -0400] coderanger: fujin: But if someone makes me an offer I can't refuse, so be it :)
[2014-05-24 01:56:53 -0400] fujin: nice
[2014-05-24 02:03:01 -0400] Majost_: I am going write this off as a feature request
[2014-05-24 02:09:14 -0400] Majost_: well, have a good weekend all
[2014-05-24 03:10:31 -0400] delongh1: in the puppet vs chef debate.. is it true that puppet can't talk to EC2/AWS w/o Puppet Enterprise.. yet Chef has it's knife plugin (free)?
[2014-05-24 03:13:54 -0400] fujin: pretty sure you can run puppet on ec2/aws without "talking to it" or using puppet enterprise, but it doesn't have a knife equivalent
[2014-05-24 03:14:00 -0400] jidar: I can't imagine why either cares about the connectivity between them?
[2014-05-24 03:14:03 -0400] fujin: i would probably suggest not using 'knife ec2' for managing any serious ec2 infrastructure either
[2014-05-24 03:14:16 -0400] fujin: look at chef-metal + ec2 driver or AWS CloudFormation
[2014-05-24 03:14:26 -0400] jidar: yea knife ec2 is just for testing a few small things
[2014-05-24 03:14:38 -0400] jidar: imho
[2014-05-24 03:15:32 -0400] delongh1: ok "talk to" .. i mean launch ec2 instances via puppet, versus chef
[2014-05-24 03:16:26 -0400] jidar: so aws cf will launch an ec2 instance and run the chef stuff on it
[2014-05-24 03:16:44 -0400] jidar: not sure what puppet is doing on the other side
[2014-05-24 03:17:15 -0400] jidar: might be better to ask what options you have on that side for launching ec2 instances, sans-enterprise
[2014-05-24 03:17:57 -0400] jidar: I'm not sure either tool cares how it gets launched
[2014-05-24 03:18:35 -0400] fujin: delongh1: that's what we're saying. neither puppet nor chef directly talk to aws. knife has an ec2 plugin that can perform very basic administrative EC2-API tasks
[2014-05-24 03:18:39 -0400] fujin: not sure if puppet has an analogue
[2014-05-24 03:19:03 -0400] fujin: delongh1: check out https://github.com/opscode/chef-metal
[2014-05-24 03:19:17 -0400] fujin: delongh1: this one too https://github.com/bazaarvoice/cloudformation-ruby-dsl <-- dsl for writing CFN templates
[2014-05-24 03:19:17 -0400] delongh1: fujin: ok talking directly to AWS is the job of something like jclouds or libcloud... is your point?
[2014-05-24 03:19:29 -0400] fujin: delongh1: correctamundo. Knife uses Fog I think in some cases.
[2014-05-24 03:19:44 -0400] fujin: (or all. whatever).
[2014-05-24 03:20:06 -0400] delongh1: ah i see.. thanks you have unconfused me
[2014-05-24 03:20:11 -0400] fujin: NP
[2014-05-24 03:20:26 -0400] fujin: delongh1: chef-metal kind of confuses you back in the opposite direction. it *does* allow chef recipes to manage infrastructure, with the new metal resource
[2014-05-24 03:20:42 -0400] fujin: among other things including aws
[2014-05-24 03:21:10 -0400] jidar: sort of the issue with chef in general, so many extras and plugins and stuff that says it can do what chef normally doesn't
[2014-05-24 03:21:15 -0400] jidar: nor drive the product/solution/etc
[2014-05-24 03:22:02 -0400] fujin: heh.
[2014-05-24 03:22:09 -0400] fujin: yeah. too many ways to do it
[2014-05-24 03:22:21 -0400] fujin: I would highly recommend CloudFormation from a professional site reliability perspective
[2014-05-24 03:22:29 -0400] jidar: oh yea
[2014-05-24 03:22:34 -0400] jidar: that's the right way to do it on the AWS side
[2014-05-24 03:22:35 -0400] fujin: that or potentially something like Netflix Asgard suite
[2014-05-24 03:22:42 -0400] fujin: which probably does use CFN under the hood tbh
[2014-05-24 03:23:11 -0400] delongh1: fujin: i met a co-worker this week that was hating on CloudFormation. That it's clunky to watch it run in the UI
[2014-05-24 03:23:25 -0400] delongh1: i don't recall the rest of his anti-CloudFormation argument thoguh
[2014-05-24 03:23:30 -0400] fujin: he's probably never built any complex infrastructure by hand in aws (unfortunately)
[2014-05-24 03:23:31 -0400] jidar: heh, wouldn't say that watching it run is a primary concern for CF
[2014-05-24 03:23:35 -0400] jidar: hahah
[2014-05-24 03:23:36 -0400] fujin: ya
[2014-05-24 03:23:39 -0400] fujin: cf-update-stack && walk-away
[2014-05-24 03:23:52 -0400] jidar: the question you need to ask is, does it work?
[2014-05-24 03:24:03 -0400] fujin: the amount of things you can manage programmatically with cfn is off the chain
[2014-05-24 03:24:13 -0400] fujin: networks, routers, elastic ips, ENIs, RDSs, ebses
[2014-05-24 03:24:19 -0400] fujin: IAM creds
[2014-05-24 03:24:20 -0400] fujin: machine keys
[2014-05-24 03:24:28 -0400] jidar: ah yea, never got past just getting the vms up
[2014-05-24 03:24:39 -0400] jidar: and setting up a few VPNs with CF templates
[2014-05-24 03:24:40 -0400] fujin: can literally bring up your whole VPC with it
[2014-05-24 03:24:55 -0400] delongh1: are there free, widely used tools for CloudFormation itself?
[2014-05-24 03:24:58 -0400] jidar: yea, if you're willing to spend all the time to map things out, it's very powerful
[2014-05-24 03:25:15 -0400] delongh1: er, are there plans by AWS to make a nice GUI out of CloudFormation like visualops.com
[2014-05-24 03:25:30 -0400] fujin: not a big gui man myself
[2014-05-24 03:25:37 -0400] fujin: the cloudformation dsl projects that are available are okay
[2014-05-24 03:25:42 -0400] fujin: https://github.com/sweetspot/draw_cloud
[2014-05-24 03:25:44 -0400] jidar: I wrote all of my AWS in powershell
[2014-05-24 03:25:47 -0400] fujin: https://github.com/heavywater/sparkle_formation
[2014-05-24 03:25:55 -0400] fujin: https://github.com/bazaarvoice/cloudformation-ruby-dsl
[2014-05-24 03:26:13 -0400] fujin: any one of those is going to let you take a lot of repetition and the suckfulness of writing json out of managing cfn
[2014-05-24 03:26:15 -0400] jidar: meanwhile the guys I work with were still pecking through the gui, you could do 10x as much after getting your head around their APIs
[2014-05-24 03:26:19 -0400] delongh1: IIRC visualops.com is salt stack that drives the cloudformation
[2014-05-24 03:26:43 -0400] fujin: lol
[2014-05-24 03:26:46 -0400] fujin: visualops just looks like an image to
[2014-05-24 03:26:47 -0400] fujin: me
[2014-05-24 03:26:49 -0400] fujin: nothing on the site?
[2014-05-24 03:27:03 -0400] fujin: lol even after I allowed my noscript, ze site, it does nothing
[2014-05-24 03:27:09 -0400] delongh1: docs have more info
[2014-05-24 03:27:25 -0400] fujin: I'll check it out, could be pretty cool
[2014-05-24 03:27:28 -0400] fujin: I have some friends using salt
[2014-05-24 03:28:04 -0400] delongh1: part of the reason i'm here is .. we will have a pow wow at work.. to try to agree on a CM tool.
[2014-05-24 03:28:11 -0400] delongh1: there's 3 candidates - puppet, chef and ansible
[2014-05-24 03:29:08 -0400] delongh1: i'm heavy puppet and this other dude is heavy .. one level shy of zealot (imho) for ansible.
[2014-05-24 03:29:28 -0400] delongh1: i kind of want to go ansible if i can confirm hw badly he wants to champion it
[2014-05-24 03:30:06 -0400] delongh1: what i like with chef/puppet is the irc following. ansible seems dead currently
[2014-05-24 03:31:03 -0400] fujin: there is no correct answer to this
[2014-05-24 03:31:09 -0400] fujin: pick whichever one is easiest for your team to digest
[2014-05-24 03:31:14 -0400] fujin: focus on automating instead of the tool
[2014-05-24 03:31:48 -0400] jidar: or at least define your needs
[2014-05-24 03:31:54 -0400] fujin: ;-) right
[2014-05-24 03:31:55 -0400] delongh1: problem is we have mutliple teams - one ops and 2 eng/dev teams
[2014-05-24 03:31:59 -0400] jidar: then find the solution that fits
[2014-05-24 03:32:09 -0400] fujin: some argue that the manifest language in puppet is more rigid and allows for 'less ways to do it' than Chef
[2014-05-24 03:32:13 -0400] jidar: well you're talking about a full time job
[2014-05-24 03:32:20 -0400] fujin: which leads to kind of an implicit correctness once style is established
[2014-05-24 03:32:21 -0400] delongh1: we need to like.. automate everything so we can fire the ops aand qa folks!
[2014-05-24 03:32:30 -0400] cheeseplus: lmao
[2014-05-24 03:32:33 -0400] fujin: haha
[2014-05-24 03:32:37 -0400] fujin: fire the ops guys! good luck with that
[2014-05-24 03:32:38 -0400] jidar: this problem doesn't fix either of those two groups, sorry :(
[2014-05-24 03:32:39 -0400] jidar: hahahah
[2014-05-24 03:32:57 -0400] fujin: there's like a venn diagram with ops/qa/dev and DevOps TM in the middle
[2014-05-24 03:33:05 -0400] jidar: it can however, make the QA team very happy, and the OPS guys pissed off, unless they are inovolved
[2014-05-24 03:33:08 -0400] fujin: tear down the walls, man!
[2014-05-24 03:33:46 -0400] delongh1: my coworker and I are tearing them walls.. it's an escuse to not be at our desks also
[2014-05-24 03:34:10 -0400] delongh1: people find us amusing. or maybe the pretend
[2014-05-24 03:34:47 -0400] delongh1: i think the CM community is tool silo'd! #puppet, #chef and #ansible should merge.
[2014-05-24 03:34:49 -0400] fujin: i quite like ansible for c&c
[2014-05-24 03:35:11 -0400] fujin: i use it for some "run this shite across 10,000 machines and give me the status back" every now and then, if I can't do what I need with GNU parallel
[2014-05-24 03:35:28 -0400] fujin: bit of jank
[2014-05-24 03:38:56 -0400] delongh1: fujin: can you say .. run script against 10k hosts only for hosts that have a certain kernel version?
[2014-05-24 03:39:22 -0400] fujin: delongh1: I can with chef, sure. I believe the inventory system in ansible allows for something similar, too, yes.
[2014-05-24 03:39:23 -0400] delongh1: w/ ansible (i guess I can ask in #ansible but they are all asleep/dead/drunk)
[2014-05-24 03:39:44 -0400] fujin: delongh1: you have to run the setup module on each of the nodes to get the ohai/facter info (same type of data that Chef uses, for kernel version)
[2014-05-24 03:40:06 -0400] fujin: delongh1: http://docs.ansible.com/intro_dynamic_inventory.html may be of use too
[2014-05-24 03:40:46 -0400] delongh1: hmm ok actually kind of makes sense that the chef community may be into ansible... because chef doesn't have an mcollective equivalent?
[2014-05-24 03:40:56 -0400] delongh1: well chef could use mcollective in theory.. but do people really use it
[2014-05-24 03:41:21 -0400] delongh1: fujin: cool man i wil check that out
[2014-05-24 03:41:26 -0400] fujin: I am not into it per-se, just not oblivious to it
[2014-05-24 03:41:39 -0400] a13x212: any recommendation for managing ruby installs on servers? rvm?
[2014-05-24 03:41:55 -0400] fujin: a13x212: rvm, rbenv, chruby, ruby package, ruby-ng PPA from brightboxuk
[2014-05-24 03:41:57 -0400] fujin: omnibus-rubies
[2014-05-24 03:42:03 -0400] fujin: re-use chef omnibus ruby install at worst case scenario
[2014-05-24 03:42:10 -0400] fujin: a13x212: which platform
[2014-05-24 03:42:13 -0400] a13x212: centos
[2014-05-24 03:44:04 -0400] fujin: a13x212: lookign to install a package or build from src
[2014-05-24 03:44:38 -0400] a13x212: looking to install knife ec2 plugin
[2014-05-24 03:44:58 -0400] fujin: you want to install the knife ec2 plugin on your servers?
[2014-05-24 03:45:01 -0400] fujin: why use knife on a server?
[2014-05-24 03:45:37 -0400] a13x212: just on the chef server
[2014-05-24 03:46:28 -0400] fujin: a13x212: pretty sure chef-server already has knife
[2014-05-24 03:46:32 -0400] fujin: https://www.irccloud.com/pastebin/7OVE0U72
[2014-05-24 03:46:52 -0400] fujin: ah, that is coming from the 'chef' pkg, not chef-server
[2014-05-24 03:47:18 -0400] fujin: https://www.irccloud.com/pastebin/rSZfZxX5
[2014-05-24 03:47:38 -0400] fujin: a13x212: I would probably just use that unless you specifically need or want to install another full ruby interpreter, just to reinstall knife+ec2.
[2014-05-24 03:47:53 -0400] fujin: e.g. /opt/chef/embedded/bin/gem install knife-ec2
[2014-05-24 03:47:58 -0400] fujin: chef_gem probably works too haha
[2014-05-24 03:49:14 -0400] a13x212: i'll try that never wanted to mess around with chef's version of ruby
[2014-05-24 03:50:48 -0400] fujin: a13x212: generally folks run knife ec2 from their workstations.
[2014-05-24 03:50:59 -0400] fujin: a13x212: e.g. in a ChefDK environment or similar.
[2014-05-24 04:07:18 -0400] delongh1: glennpratt! you are poisoning my webchat.freenode.net webpages. how dare you
[2014-05-24 05:44:46 -0400] luddite: Hello everyone.
[2014-05-24 05:50:02 -0400] coderanger: luddite: Alo
[2014-05-24 05:51:45 -0400] luddite: I have a recipe where I loop over databags and using if statements I call "include_recipe" based on certain logic. It only ever runs a include_recipe once even thought eh databag details that are passed to the included_recipe are different. Here is the simple logic :: http://pastebin.com/3uq4mEdF
[2014-05-24 05:52:03 -0400] luddite: hey coderanger. Enjoying your weekend?
[2014-05-24 05:53:14 -0400] coderanger: luddite: That is correct, recipes are "debounced", just like with normal ruby require they are only ever executed once
[2014-05-24 05:53:37 -0400] coderanger: luddite: If you want to instantiate something multiple times like that, you should make it a resource (using the LWRP syntax).
[2014-05-24 05:54:43 -0400] luddite: coderanger : That is leaving me confused because this was working. Of maybe I am retarded and thought it was working. How do i make it a LWRP?
[2014-05-24 05:55:11 -0400] coderanger: Please don't use the word "retarded" here, it is offensive to some.
[2014-05-24 05:55:24 -0400] luddite: Point taken
[2014-05-24 05:55:52 -0400] coderanger: So if it was working before it might have been because you only had one item in the bag?
[2014-05-24 05:56:30 -0400] luddite: No I had 3 items. Now I have 3. It correctly parsed and included recipes multiple times per site
[2014-05-24 05:56:49 -0400] coderanger: If they all were named the same, then something else was causing it to work
[2014-05-24 05:56:50 -0400] luddite: although the documentation I have read says that it shouldnt
[2014-05-24 05:56:58 -0400] coderanger: include_recipe has always been debounced like that
[2014-05-24 05:57:27 -0400] luddite: is there a way around this without copying all the code from the other recipes into the default recipe?
[2014-05-24 05:59:02 -0400] coderanger: Not easily, you can reach in to the run_state and erase the debounce marker, but then you'll hit the reason it exists which is two resources with the same name will share internal state and that  can break things unless you are super careful
[2014-05-24 05:59:16 -0400] coderanger: The best way to do it is take the contents of that recipe and put it in an LWRP
[2014-05-24 05:59:27 -0400] coderanger: and then just create instances of that resource in the loop
[2014-05-24 05:59:49 -0400] coderanger: You'll just have to change the recipe code to read from new_resource instead of node.
[2014-05-24 06:00:46 -0400] luddite: is that a massive task? Sounds like I have to do it
[2014-05-24 06:02:10 -0400] coderanger: Not really, mostly just some boiler plate and copy-pasta
[2014-05-24 06:02:24 -0400] coderanger: Let me make you an example, sec
[2014-05-24 06:03:11 -0400] luddite: really - thank-you that is much appreciated.
[2014-05-24 06:03:57 -0400] luddite: coderanger++
[2014-05-24 06:06:00 -0400] coderanger: http://hastebin.com/irehiriwan.rb
[2014-05-24 06:06:02 -0400] coderanger: Something like that
[2014-05-24 06:06:27 -0400] coderanger: Or maybe http://hastebin.com/sevuyomoba.rb if you wanted to be a tad more explicit
[2014-05-24 06:07:50 -0400] luddite: coderanger :: looking now
[2014-05-24 06:09:38 -0400] luddite: coderanger - that still loops to me that all the code would exist inside a single recipe. I was trying to have the different actions in different .rb files. Maybe that isnt possible
[2014-05-24 06:10:13 -0400] coderanger: luddite: Not sure what you mean
[2014-05-24 06:11:31 -0400] luddite: coderanger: i wanted default.rb to contain the logic. And then have disable.rb, delete.rb contain the code to do single tasks.
[2014-05-24 06:11:40 -0400] coderanger: Yeah, thats not how recipes work
[2014-05-24 06:11:59 -0400] coderanger: They are convergent, not procedural
[2014-05-24 06:12:15 -0400] luddite: right- so I would simply be better off to copy all logic to the single recipe?
[2014-05-24 06:13:16 -0400] coderanger: No, you should copy it into an LWRP
[2014-05-24 06:13:29 -0400] luddite: ok ill do that
[2014-05-24 06:13:32 -0400] luddite: biab
[2014-05-24 06:13:40 -0400] coderanger: Thats how you get the procedural bits like you wanted :)
[2014-05-24 06:13:48 -0400] coderanger: Mulitple actions on a single LWRP
[2014-05-24 06:14:14 -0400] luddite: ok-great thank you very much for your assistance. Its very kind of you and helpful
[2014-05-24 06:14:22 -0400] luddite: I really appreciate it
[2014-05-24 06:16:45 -0400] coderanger: No problem
[2014-05-24 06:54:22 -0400] luddite: coderanger :: I have it working - just deployed 3 sites. Deleted them and deployed again hahahah :: Thank-you!!!!
[2014-05-24 06:54:27 -0400] luddite: coderanger++
[2014-05-24 09:58:10 -0400] n1ko: if i try override an attribute in a wrapper cookbook that has been alredy used to compile another attribute before that
[2014-05-24 09:58:31 -0400] n1ko: theres no way to tell if the compiled variable is correct?
[2014-05-24 09:58:41 -0400] n1ko: most likely its wrong of course, because the value has already been used
[2014-05-24 09:58:44 -0400] n1ko: https://github.com/elasticsearch/cookbook-elasticsearch/blob/master/attributes/default.rb
[2014-05-24 09:59:01 -0400] n1ko: this is an good example, the download url is built from the version
[2014-05-24 10:03:53 -0400] coderanger: n1ko: Yeah, that situation kind of sucks
[2014-05-24 10:04:05 -0400] coderanger: n1ko: You would have to override both
[2014-05-24 10:04:09 -0400] coderanger: or ensure it is set first
[2014-05-24 10:04:23 -0400] coderanger: or yell at the upstream author to stop using interpolation like that
[2014-05-24 10:05:22 -0400] coderanger: n1ko: A better option is the %{} interpolation which is delayed and can be done later after all attributes load
[2014-05-24 10:11:43 -0400] n1ko: coderanger: you mean that putting elasticsearch[:filename] inside %Q{} would fix it because it delays it?
[2014-05-24 10:11:47 -0400] n1ko: hmm
[2014-05-24 10:12:00 -0400] coderanger: No, I mean %{}
[2014-05-24 10:12:04 -0400] coderanger: not %Q
[2014-05-24 10:12:37 -0400] coderanger: For example, instead of "elasticsearch-#{node.elasticsearch[:version]}.tar.gz"
[2014-05-24 10:12:47 -0400] coderanger: use ""elasticsearch-%{version}.tar.gz"
[2014-05-24 10:13:04 -0400] coderanger: and then later on do node['whatever'] % {version: node['whateverelse
[2014-05-24 10:13:49 -0400] coderanger: It defers the actual interpolation until recipe time, when all attributes are loaded
[2014-05-24 10:55:55 -0400] rdenis: anyone knows if smartos chef server install is broken on purpose ? :)
[2014-05-24 10:56:02 -0400] rdenis: downloading https://www.opscode.com/chef/metadata?v=&prerelease=false&nightlies=false&p=smartos&pv=13.4.2&m=i386
[2014-05-24 10:56:03 -0400] rdenis: fails
[2014-05-24 10:56:30 -0400] rdenis: client i mean
[2014-05-24 11:49:03 -0400] someara: rdenis right now you have to do a gem install
[2014-05-24 11:49:11 -0400] someara: it incorrectly detects at "solaris2"
[2014-05-24 11:49:33 -0400] someara: https://github.com/opscode-cookbooks/mysql/blob/master/.kitchen.cloud.yml#L120
[2014-05-24 14:00:07 -0400] rdenis: someara thanks
[2014-05-24 15:21:52 -0400] Neozonz|Disc: how does one pull an int from a variable? for example node[:thisnumberword] = "application57"  would like to take the int 57 from the variable
[2014-05-24 15:23:22 -0400] zanshin1: Neozonz|Disc: It's just Ruby, so something like this: http://stackoverflow.com/questions/2640819/extract-number-from-string-in-ruby
[2014-05-24 15:26:51 -0400] Neozonz|Disc: zanshin, cool thank you
[2014-05-24 15:28:02 -0400] zanshin1: Neozonz|Disc:  You could also split the attribute into two pieces. "application" in one and "57" (or whatever value it has) in another.
[2014-05-24 15:31:06 -0400] Neozonz|Disc: node[:opsworks][:instance][:hostname].gsub(/[^0-9]/, '')
[2014-05-24 15:31:40 -0400] Neozonz|Disc: would that make sense? it would take the hostname and remove all string components and just leverage the hostname number
[2014-05-24 15:31:55 -0400] Neozonz|Disc: just not sure on the syntax
[2014-05-24 15:33:38 -0400] zanshin1: Looks good. But you'll have to test it to see. I'm still learning Ruby myself. :)
[2014-05-24 15:35:01 -0400] Neozonz|Disc: yup, giving it a try now, just wanted to verify- takes a long time deploying these on aws >_<
[2014-05-24 15:35:23 -0400] zanshin1: Use Vagrant and test locally.
[2014-05-24 15:35:25 -0400] zanshin1: :)
[2014-05-24 15:48:33 -0400] Neozonz|Disc: yeah but then I can't test with the aws variables that are assigned
[2014-05-24 15:48:43 -0400] Neozonz|Disc: unless i'm misunderstanding something
[2014-05-24 16:36:13 -0400] androidbruce: mernin
[2014-05-24 21:23:15 -0400] try: for learning purposes, is standalone chef a good starting point?
[2014-05-24 21:28:17 -0400] jidar: sure
[2014-05-24 21:28:29 -0400] jidar: you might even want to just try using chef solo and vagrant
[2014-05-24 21:28:41 -0400] jidar: (that's how I do all of my local testing, etc)
[2014-05-24 21:33:34 -0400] try: jidar, thank you.  that's good news, because i just installed chef and vagrant from debian package. :)
[2014-05-24 21:34:47 -0400] jidar: ah, not sure those are up to date.
[2014-05-24 21:34:52 -0400] jidar: you should verify
[2014-05-24 21:36:34 -0400] try: "chef-solo --version" reports 10.12.0
[2014-05-24 21:37:33 -0400] try: "vagrant --version" reports 1.0.3
[2014-05-24 21:38:58 -0400] jidar: old and very old
[2014-05-24 21:39:25 -0400] try: do you recommend going the omnibus route?
[2014-05-24 21:40:25 -0400] jidar: eh, yea.. I don't really like how it gets packaged but its the only way to make it work
[2014-05-24 21:40:29 -0400] jidar: pick up chefdk while you're at it
[2014-05-24 21:40:32 -0400] jidar: might save you some time
[2014-05-24 21:40:47 -0400] jidar: (it's the only easy way to make it work, fwiw)
[2014-05-24 21:41:19 -0400] try: will do, thanks for advice

[2014-05-14 05:16:29 -0400] brucelee_: coderanger: yout here?
[2014-05-14 05:17:06 -0400] coderanger: Yep
[2014-05-14 05:24:24 -0400] coderanger: brucelee_: For a little while at least
[2014-05-14 05:32:41 -0400] brucelee_: coderanger: hey i remember you were saying how that ssh ansible model of push doesnt scale
[2014-05-14 05:32:51 -0400] coderanger: Indeed
[2014-05-14 05:32:54 -0400] brucelee_: whtas so bad about it?
[2014-05-14 05:33:13 -0400] brucelee_: a server connecting to like 1000 nodes via ssh is faulty ro something?
[2014-05-14 05:33:24 -0400] coderanger: SSH is just a high-overhead protocol, the crypto takes a lot of CPU power
[2014-05-14 05:33:38 -0400] coderanger: so yeah, if you tried running 1000 parallel SSH conns, your CPU would melt
[2014-05-14 05:34:30 -0400] brucelee_: :P
[2014-05-14 05:34:35 -0400] brucelee_: but you can run them in serial :p
[2014-05-14 05:34:38 -0400] brucelee_: which i guess is slow
[2014-05-14 05:34:43 -0400] brucelee_: when doing 1000 nodes
[2014-05-14 05:34:50 -0400] n1ko: 1000 parallel ssh conns is also quite a big case
[2014-05-14 05:34:50 -0400] coderanger: Exactly
[2014-05-14 05:35:02 -0400] coderanger: It scales fine for all but hte highest cases
[2014-05-14 05:35:05 -0400] double_p: how's that different from 1000 https pulls? SSL handshake isnt cheap, too
[2014-05-14 05:35:06 -0400] brucelee_: but when is anyone doing 1000 nodes :P
[2014-05-14 05:35:08 -0400] n1ko: and on a modern box i dont think if it would actually be so much of a problem
[2014-05-14 05:35:17 -0400] n1ko: you know, octacore and that
[2014-05-14 05:35:44 -0400] coderanger: brucelee: Twitter was talking about doing 10k machine deploys when they released Murder
[2014-05-14 05:35:47 -0400] brucelee_: n1ko: i think you can set the number of parallel ssh connections at a time
[2014-05-14 05:36:19 -0400] brucelee_: coderanger: i just googled twitter murder, sounds interesting
[2014-05-14 05:36:24 -0400] brucelee_: datacneter deploysover bittorrent
[2014-05-14 05:36:25 -0400] brucelee_: :P
[2014-05-14 05:36:35 -0400] coderanger: double_p: HTTPS is much easier to load balance
[2014-05-14 05:36:53 -0400] coderanger: double_p: hardware crypto-accelerators too
[2014-05-14 05:37:53 -0400] digitalchild: brucelee_: the devops engineers where i used to work replaced tivoli with their own home grown torrent based imaging system for the windows labs
[2014-05-14 05:37:58 -0400] digitalchild: it was very very fast
[2014-05-14 05:38:06 -0400] digitalchild: and the file server stopped having a tanty
[2014-05-14 05:38:27 -0400] coderanger: brucelee: I don't think Murder is still being used, but Twitter is pretty inscrutable these days
[2014-05-14 05:38:38 -0400] digitalchild: are they using ansible or chef?
[2014-05-14 05:38:57 -0400] brucelee_: coderanger: inscrutable, is that a compliment
[2014-05-14 05:39:02 -0400] brucelee_: :)
[2014-05-14 05:39:51 -0400] coderanger: Not really
[2014-05-14 05:40:06 -0400] brucelee_: thought you were trying to say theyre really 'advanced'
[2014-05-14 05:42:31 -0400] double_p: scale-beyond-sanity? :)
[2014-05-14 05:43:48 -0400] coderanger: Even beyond that, push-driven models are just hard to keep everything in sync
[2014-05-14 06:01:15 -0400] fujin: sup anyone using omnibus? depending on openssl? seen this bug?: https://github.com/opscode/omnibus-software/issues/201
[2014-05-14 06:46:12 -0400] JensOfSweden: coderanger: Found out a better way to do it =), used Ridley gem instead for rest api calls to chef server. Works awesome =)
[2014-05-14 06:46:58 -0400] coderanger: JensOfSweden: ridely works, but can be way more complex than needed if you aren't using celluloid yourself
[2014-05-14 06:47:52 -0400] JensOfSweden: coderanger: Might be, but got the job done =)
[2014-05-14 06:48:08 -0400] coderanger: Yep
[2014-05-14 06:48:36 -0400] JensOfSweden: So now its only dns and f5 integration left =)
[2014-05-14 07:07:37 -0400] double_p: gl, we had quite some time to feed powerdns :}
[2014-05-14 07:09:55 -0400] dtrott: Inside a chef recipe how do I get the name of the current chef environment ?
[2014-05-14 07:19:09 -0400] dtrott: nvm - turns out you have to do node.chef_environment rather than node[chef_environment]
[2014-05-14 09:17:11 -0400] bubu: Yo, trying to build omnibus-descartes but keep on getting a load of omnubis errors around mismatched checksums...any ideas?
[2014-05-14 09:29:35 -0400] bubu: seems to be failing on checksums for various different packages on different builds.. :/
[2014-05-14 10:19:42 -0400] MrWonka: hey all.
[2014-05-14 10:20:24 -0400] MrWonka: I'm just wondering. Is it possible to pass parameters to a definition you've created based on the existance of config values?
[2014-05-14 10:23:17 -0400] MrWonka: i want to say that if your json file contains a specific property then that should be set when you call the definition. otherwise don't set it at all.
[2014-05-14 10:25:09 -0400] bubu: Am using chef omnibus installer but falling over on the Health Check. https://gist.github.com/joshmyers/387a6657b7fa0515a569#file-gistfile1-txt-L25 any ideas??
[2014-05-14 10:26:08 -0400] bubu: 'Unsafe dependency' ? :/
[2014-05-14 10:49:11 -0400] nd__: Hey guys, I have a recipe file using an LWRP to download files, then one file of that is changed. The chef-run errors out because the file doesn't exist, because it seems that the reading the file is executed before the LWRP downloads it Why is that?
[2014-05-14 11:02:37 -0400] simon__: Is there any way to create a provider that accepts arbitrary inputs without specifying any resource for it, so I can do "my_provider "ehehe" do random_name 12 end and access it trough new_resource?
[2014-05-14 11:10:27 -0400] marius: hi, I have search(:node, "name:*") in my code
[2014-05-14 11:10:53 -0400] marius: tho I can't access all attributes of the node, when I do iteration in template
[2014-05-14 11:12:08 -0400] marius: like here http://p.nkts.lt/5fb9f542-d57e-4e6c-ba32-4419d74d6f37.txt - I can access foo.id, but not ipaddress
[2014-05-14 12:15:01 -0400] ocholetras: hy guys
[2014-05-14 12:15:11 -0400] ocholetras: is there any way to know what versions is being applied on a chef-client run?
[2014-05-14 12:15:22 -0400] ocholetras: cookbook versios i mean
[2014-05-14 12:18:54 -0400] JensOfSweden: How do you mean?
[2014-05-14 12:21:21 -0400] ocholetras: i mean
[2014-05-14 12:21:28 -0400] ocholetras: last run of chef-client on the node X
[2014-05-14 12:21:37 -0400] ocholetras: version 1.8.0 of nginx was applied
[2014-05-14 12:21:48 -0400] ocholetras: and version 2.0.0 of build-essentials
[2014-05-14 12:21:50 -0400] ocholetras: etc..
[2014-05-14 12:23:14 -0400] ocholetras: i have a dependency problem
[2014-05-14 12:23:24 -0400] ocholetras: and dont know what restriction is failing
[2014-05-14 12:23:53 -0400] double_p: you can check the synchronized cookbooks on the node in /var/chef/cache (metadata.rb)
[2014-05-14 12:24:55 -0400] willejs: so this is pretty cool
[2014-05-14 12:24:56 -0400] willejs: https://github.com/coderanger/etcd-chef
[2014-05-14 12:25:15 -0400] ocholetras: double_p: great thx
[2014-05-14 12:26:39 -0400] JB__: hey all, just a quick question, is there a way to add a user by the user resource, as admin on windows?
[2014-05-14 12:30:22 -0400] MikeTLive: Good Morning from EastCoastUSA - sipping my coffee waiting for the spring sunrise to come over the barn roof and bathe me with its wonderment.
[2014-05-14 12:37:15 -0400] whiteadam: MikeTLive: Still waiting for my coffee to kick in
[2014-05-14 12:38:22 -0400] whiteadam: willejs: Explain what etcd does like I'm a child.
[2014-05-14 12:38:56 -0400] MikeTLive: whiteadam: Scootch Closer children. Scootch.
[2014-05-14 12:39:05 -0400] marius: :)
[2014-05-14 12:41:21 -0400] MikeTLive: if memory serves, its a distributed name:value database.
[2014-05-14 12:43:11 -0400] MikeTLive: whiteadam: http://www.activestate.com/blog/2014/03/brandon-philips-explains-etcd
[2014-05-14 12:43:40 -0400] MikeTLive: whiteadam: "It's a data-store for really important information. It's tolerant of nodes going down. It gives you a way to store configuration data with consistent changes and distributed locks. The data is always available and always correct."
[2014-05-14 12:52:40 -0400] willejs: whiteadam: the best thing about it is that you can watch/listen on keys, or a keyspace, and when that key changes, it notifies you instantly
[2014-05-14 12:52:50 -0400] willejs: great for instant config changes
[2014-05-14 12:53:39 -0400] whiteadam: ooh
[2014-05-14 12:55:02 -0400] bixu: We are seeing issues like those described here with downloads of the jenkins-cli.jar remote_file: https://tickets.opscode.com/browse/CHEF-4746?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel#comment-49621
[2014-05-14 12:55:17 -0400] bixu: Anybody have ideas about workarounds until the bug is fixed?
[2014-05-14 13:00:39 -0400] bixu: Anyone?  :D
[2014-05-14 13:07:20 -0400] bixu: D:
[2014-05-14 13:17:20 -0400] ocholetras: any way of debug dependency conflicts on chef server
[2014-05-14 13:17:59 -0400] ocholetras: chef client hangs with "Error Resolving Cookbooks for Run List"
[2014-05-14 13:18:38 -0400] ocholetras: then chef-server [2014-05-14T13:53:30+01:00] ERROR: Timeout connecting to https://chef.,..../environment/testing/cookbook_versions retry 1/5
[2014-05-14 13:19:05 -0400] ocholetras: sounds like a cookbook version constraint conflicting but cand find what is the one that is a pain in the as...
[2014-05-14 13:19:40 -0400] mmzyk: ocholetras What version of the server are you running?
[2014-05-14 13:20:48 -0400] ocholetras: umm
[2014-05-14 13:20:56 -0400] ocholetras: i can se that with dpkg -l ?
[2014-05-14 13:21:07 -0400] ocholetras: ii  chef-server                          11.0.10-1.ubuntu.12.04            The full stack of chef-server
[2014-05-14 13:22:05 -0400] jreslock: ocholestras you can set log level to :debug in client.rb on your chef client and see what the dependencies resolve to.
[2014-05-14 13:22:39 -0400] ocholetras: jreslock: lets try
[2014-05-14 13:22:52 -0400] mmzyk: Thats open source, right? I ask b/c there is a good change youre hitting this bug: https://tickets.opscode.com/browse/CHEF-3921
[2014-05-14 13:23:11 -0400] mmzyk: It has to do with a deficiency in the erlang depsolver that was introduced in 11.0
[2014-05-14 13:23:11 -0400] ocholetras: mmzyk: yeah
[2014-05-14 13:23:14 -0400] marius: so.. attributes of the cookbooks are not indexed?
[2014-05-14 13:23:22 -0400] ocholetras: and cpu goes 80-99%
[2014-05-14 13:23:31 -0400] mmzyk: Yeah, thats it.
[2014-05-14 13:23:40 -0400] ocholetras: i have read that on 11.1 its removed
[2014-05-14 13:23:48 -0400] ocholetras: back to the other one
[2014-05-14 13:23:50 -0400] marius: what I need to do to attributes to be visible by search ?
[2014-05-14 13:23:51 -0400] ocholetras: right?
[2014-05-14 13:23:52 -0400] mmzyk: Youre relying on a version of a cookbook that doesnt exist on the server somewhere I think.
[2014-05-14 13:24:00 -0400] mmzyk: And yeah, it is fixed in 11.1.
[2014-05-14 13:24:20 -0400] mmzyk: Because we went back to the gecode depsolver (Im the engineer coordinated the 11.1 release)
[2014-05-14 13:24:28 -0400] mmzyk: 11.1 RC is out now.
[2014-05-14 13:24:45 -0400] mmzyk: Good news is that it is very likely well release 11.1 today.
[2014-05-14 13:24:46 -0400] ocholetras: btw jreslock cant se versions with debug
[2014-05-14 13:24:50 -0400] mmzyk: barring anything unexpected
[2014-05-14 13:24:58 -0400] ocholetras: it get stuck on [2014-05-14T14:22:40+01:00] DEBUG: Initiating POST to https://chef.stic.ull.es/environments/_default/cookbook_versions
[2014-05-14 13:25:02 -0400] ocholetras: mmzyk: great news!
[2014-05-14 13:25:09 -0400] workmad3: mmzyk: so I noticed yesterday... and then I spent all morning re-uploading my cookbooks because something went wrong inside bookshelf :(
[2014-05-14 13:25:28 -0400] mmzyk: workmad3 Noticed what yesterday? The bug?
[2014-05-14 13:25:56 -0400] workmad3: mmzyk: no, the 11.1 rc
[2014-05-14 13:26:24 -0400] mmzyk: My apologies, what went wrong?
[2014-05-14 13:27:45 -0400] workmad3: mmzyk: couldn't track down an exact issue, but for some reason one of my custom cookbooks just reported '404' whenever something tried to access it or synchronise it
[2014-05-14 13:28:21 -0400] mmzyk: huh. And you fixed it by re-uploading all your cookbooks?
[2014-05-14 13:28:28 -0400] workmad3: I deleted and re-uploaded
[2014-05-14 13:29:02 -0400] workmad3: I could probably have gotten away with just uploading the one erroring, but I had quite a few old versions anyway so just cleared everything out ;)
[2014-05-14 13:30:02 -0400] mmzyk: Okay. And everything seems fine for you after that point?
[2014-05-14 13:30:42 -0400] mmzyk: Im also curious how you upgraded to the RC, if you could tell me the steps you took.
[2014-05-14 13:31:10 -0400] mmzyk: And the setup youre running - I assume a standalone (although not everyone runs standalone), and what OS?
[2014-05-14 13:36:42 -0400] workmad3: mmzyk: https://gist.github.com/workmad3/eb110d6b95eb65d47d94 so I can add extra info if you want
[2014-05-14 13:38:09 -0400] mmzyk: hmm. So the upgrade command is actually multistep, which might explain why you ran into some issues.
[2014-05-14 13:38:10 -0400] mmzyk: http://docs.opscode.com/release/osc_11-1/release_notes.html
[2014-05-14 13:38:11 -0400] workmad3: mmzyk: also, I had a load of '2014-05-14_10:21:09.84141 ERROR:  duplicate key value violates unique constraint "checksums_pkey"' in the postgreqs logs
[2014-05-14 13:38:29 -0400] workmad3: mmzyk: oh, I restarted as well
[2014-05-14 13:38:48 -0400] workmad3: oh... I *may* have forgotten to stop chef first... *blush*
[2014-05-14 13:39:16 -0400] mmzyk: Im not sure how much of an effect that woudl have had.
[2014-05-14 13:39:37 -0400] mmzyk: The duplicate key issue is likely benign.
[2014-05-14 13:39:55 -0400] mmzyk: Ill double check to confirm though.
[2014-05-14 13:40:03 -0400] mmzyk: If I miss you on IRC Ill drop comments on the gist.
[2014-05-14 13:40:13 -0400] workmad3: mmzyk: oh, also I had to adjust my firewall settings slightly after the upgrade, which may be worth documenting somewhere
[2014-05-14 13:40:21 -0400] ocholetras: cant just the logs say what cookbook version is fucking? xD
[2014-05-14 13:40:30 -0400] ocholetras: on chef-server logs neither
[2014-05-14 13:40:31 -0400] ocholetras: O_o
[2014-05-14 13:40:45 -0400] workmad3: mmzyk: I had a simple ufw setup to just deny all access apart from 80 and 443... after the upgrade, I had to add in a rule to allow the rabbitmq port access from 127.0.0.1
[2014-05-14 13:40:50 -0400] ocholetras: workmad3: rabbitmq port changed
[2014-05-14 13:41:05 -0400] workmad3: ocholetras: I didn't have any rules for rabbitmq previously though ;)
[2014-05-14 13:41:21 -0400] ocholetras: ^^
[2014-05-14 13:43:12 -0400] mmzyk: ocholetras Its a bit more complicated than that for cookbook solving. The solver(s) are general constraint solvers, so it just takes a bunch of numbers and worksout if a solution is available. If we didnt have a bug where the solver ate the cpu, youd get better output. :)
[2014-05-14 13:43:23 -0400] mmzyk: Thanks workmad3, appreciate the feedback.
[2014-05-14 13:44:10 -0400] mmzyk: workmad3 Was that all you saw?
[2014-05-14 13:45:27 -0400] workmad3: mmzyk: I had errors in erchef, but they were related to the rabbitmq firewall issue, same in chef-expander logs
[2014-05-14 13:45:33 -0400] workmad3: mmzyk: checking other logs quickly now :)
[2014-05-14 13:45:59 -0400] mmzyk: workmad3 Actually, can you see if your ufw setup had a rule to allow 5672?
[2014-05-14 13:46:57 -0400] mmzyk: I think at the very least well get the release notes updated to say that a firewall change maybe needed to enable the new rabbitmq port
[2014-05-14 13:47:09 -0400] mmzyk: For the curious, heres why the port was changed: https://github.com/opscode/omnibus-chef-server/commit/b3bd2c4e20762b5f828953719e8fad56c6b3808e
[2014-05-14 13:47:45 -0400] workmad3: mmzyk: I only had 3 rules in there before upgrading... opening 22, 80 and 443 for ssh and chef
[2014-05-14 13:47:56 -0400] workmad3: mmzyk: and it was set to a default 'deny all'
[2014-05-14 13:48:11 -0400] mmzyk: ocholetras I dont know if you use bershelf or not, but with berkshelf now using gecode and with the open source server going back to gecode, all the cookbook dependencies solvers in the chef universe are the same now, fyi. This eases some pain for people, who would sometimes see cookbooks resolve different in different places.
[2014-05-14 13:48:46 -0400] ocholetras: yea, im using berkshelf
[2014-05-14 13:48:54 -0400] ocholetras: i think the problem is that gitlab cookbook
[2014-05-14 13:48:58 -0400] mmzyk: workmad3 I wonder 
[2014-05-14 13:49:01 -0400] ocholetras: put depends without version constraints..
[2014-05-14 13:49:11 -0400] ocholetras: so let the solver goes crazy
[2014-05-14 13:49:25 -0400] ocholetras: i was recently, two days ago was working
[2014-05-14 13:49:50 -0400] ocholetras: but i dont know what upload breaks
[2014-05-14 13:50:45 -0400] mmzyk: ocholetras Right. The erlang solver couldnt handle issues like that, as it wasnt robust enough, where as gecode doesnt care, if it can solve it, it does.
[2014-05-14 13:51:02 -0400] ocholetras: k
[2014-05-14 13:51:14 -0400] ocholetras: ill keep trying to catch the thing
[2014-05-14 13:51:16 -0400] mmzyk: workmad3 I think I know what happened. See the section on Full IPv6 support in the changelog: https://github.com/opscode/omnibus-chef-server/blob/master/CHANGELOG.md
[2014-05-14 13:51:22 -0400] ocholetras: because that cookbook is on production
[2014-05-14 13:51:26 -0400] ocholetras: ^^
[2014-05-14 13:52:13 -0400] mmzyk: In adding in IPv6 support we made a change in IPv54 mode so the default listen interface is 0.0.0.0 from 127.0.0.1. I bet this is why you had to add the rule. Unintended side effects that we never ran into.
[2014-05-14 13:52:25 -0400] mmzyk: er, IPv54 should be IPv4. We not up to version 54 yet.
[2014-05-14 13:52:57 -0400] mmzyk: This had to do with making it so you could flip a single switch to go from IPv4 to IPv6 and back again.
[2014-05-14 13:53:24 -0400] workmad3: yeah, I kinda figured it was some listen address had changed
[2014-05-14 13:53:48 -0400] mmzyk: Interesting it only affected rabbit, given we changed them accoss the board.
[2014-05-14 13:54:04 -0400] mmzyk: Ill get that called out in the release notes, so its clear.
[2014-05-14 13:54:07 -0400] workmad3: hmm... also, reading that... I've definitely got rabbit still on 5672, not the updated 8672...
[2014-05-14 13:54:40 -0400] mmzyk: My guess is that would be related to not having done the stop.
[2014-05-14 13:54:56 -0400] workmad3: yeah... I'm not gonna worry about it I think :)
[2014-05-14 13:55:17 -0400] mmzyk: Computers, what a pain in the ass. Were trying to make it all as simple as possible - and then no simplier.
[2014-05-14 13:55:33 -0400] workmad3: sounds about right :)
[2014-05-14 13:55:51 -0400] workmad3: have you seen the 'programming sucks' article that's been making the rounds recently?
[2014-05-14 13:55:57 -0400] mmzyk: But the changelog does highlight all the listen interface and how to set them, so if you wanted you can put them all back to 127.0.0.1
[2014-05-14 13:56:27 -0400] mmzyk: The reason we went away from it is to support people who run tiered setups. Its not an official supported setup in open source, but if you want to run that way we dont want to stop you.
[2014-05-14 13:56:43 -0400] mmzyk: No, I dont think Ive seen that article.
[2014-05-14 13:56:49 -0400] workmad3: http://stilldrinking.org/programming-sucks
[2014-05-14 13:57:43 -0400] mmzyk: Thanks, Ill give it a read when I need some downtime.
[2014-05-14 13:59:43 -0400] mmzyk: workmad3 You might want to do a stop and start on your server to see if it picks up the new rabbit port. I dont want you to get in a situation where it changes on you and youre not thinking about it.
[2014-05-14 14:00:12 -0400] jmreicha: Hi guys, question about wrapper cookbooks.  What advantage is there to creating a wrapper with a few tiny changes as opposed to putting the content in a site specific cookbook that already exists?
[2014-05-14 14:03:23 -0400] ocholetras: jmreich your changes, your versions, your CVS
[2014-05-14 14:03:36 -0400] ocholetras: and you change site cookbook behaviour by attributes
[2014-05-14 14:03:39 -0400] ocholetras: that is the thing
[2014-05-14 14:03:44 -0400] jmreicha: As an example, there are three variables that I'd like to change on the fail2ban cookbook but it seems a bit unnecessary to create a wrapper to do that when I could just stick it in a recipe somewhere else?
[2014-05-14 14:04:02 -0400] StFS: Hello. I'm trying to bootstrap chef on a server with knife solo bootstrap but I'm getting "connection refused" errors. I suspect it's because of missing proxy settings. Can I supply proxy settings with the knife solo bootstrap command somehow (couldn't find it in the docs)?
[2014-05-14 14:04:44 -0400] ocholetras: jmreich You have a recipe that deploys fail2ban, right?
[2014-05-14 14:05:13 -0400] ocholetras: on the attributes/fail2ban.rb on that cookbook sounds like a good place to put those changes, to me.
[2014-05-14 14:05:50 -0400] JensOfSweden: or make override attributes in a role
[2014-05-14 14:09:41 -0400] jmreicha: ocholetras: Yes, I have a site specific recipe that calls the fail2ban cookbook.  I just want to make sure I'm following good practices, I've been reading about cookbook patterns and wanted to make sure I wasn't missing something
[2014-05-14 14:10:39 -0400] jmreicha: So the wrapper cookbook patterns doesn't necessary have to be a separate repo, it can just be a recipe that overrides the default behavior with my own?
[2014-05-14 14:19:25 -0400] NukePuppy: anyone got an example of a join of comma delimited values from within an ERB?
[2014-05-14 14:23:42 -0400] gleam: like, you have an array and you want to join it into a comma delimited string?
[2014-05-14 14:25:57 -0400] NukePuppy: right
[2014-05-14 14:26:27 -0400] NukePuppy:  <%= @myvalues.map { |server| "#{server}" }.join(",") %>     tried something like this but got a fail
[2014-05-14 14:26:53 -0400] boffbowsh: What was the error?
[2014-05-14 14:27:25 -0400] boffbowsh: If @myvalues is an array of strings, you can just do @myvalues.join(",")
[2014-05-14 14:28:02 -0400] boffbowsh: What does @myvalues contain?
[2014-05-14 14:28:36 -0400] Shred00: [how] can i include the contents of a .rb snippet into the override_attributes {} of a role file?  i have some data i want to share between a few roles.
[2014-05-14 14:33:29 -0400] nd__: Hey guys, I have a recipe file using an LWRP to download files, then one file of that is changed. The chef-run errors out because the file doesn't exist, because it seems that the reading the file is executed before the LWRP downloads it Why is that?
[2014-05-14 14:45:41 -0400] NukePuppy: @boffwash undefined method `join' for nil:NilClass  is my error   myvalues is some attribute which looks like this = [ "server1", "server2", "server3" ]
[2014-05-14 14:46:19 -0400] boffbowsh: That's very odd
[2014-05-14 14:46:34 -0400] boffbowsh: So does @myvalues.join(",") not work? Same error?
[2014-05-14 14:46:46 -0400] NukePuppy: right that was latest attempt
[2014-05-14 14:46:53 -0400] boffbowsh: Then @myvalues is empty
[2014-05-14 14:46:59 -0400] boffbowsh: Or nil, rather
[2014-05-14 14:47:00 -0400] NukePuppy: thats what im leaning towards :(
[2014-05-14 14:47:01 -0400] gleam: not just empty, nil
[2014-05-14 14:47:10 -0400] gleam: [] would work, after all
[2014-05-14 14:47:20 -0400] boffbowsh: Yeah, I made sense in my head ;)
[2014-05-14 14:47:23 -0400] gleam: hehe
[2014-05-14 14:49:17 -0400] NukePuppy: i think that hints me to the issue ;P
[2014-05-14 14:49:34 -0400] NukePuppy: fixing someones cookbook atm.. and it seems they're sending the template a variable they're not settingin template
[2014-05-14 14:51:45 -0400] josh0x0: Hey guys.  I have an attribute structure like this: { global: { a: 1, b: 2}, apps: { key: { a: 3}, key2: {} }. and I want global and each apps hash to be deep merged.  Whats the idiomatic way to do this in chef?
[2014-05-14 14:52:10 -0400] josh0x0: per the example above, apps[:key] would be { a: 3, b: 2 }
[2014-05-14 14:53:26 -0400] josh0x0: this is what I am trying btw:  attrs = Chef::Mixin::DeepMerge.deep_merge(node.default[:global], node[:apps][:key].to_hash) but I get this error: Node attributes are read-only when you do not specify which precedence level to set. To set an attribute use code like `node.default["key"] = "value"'
[2014-05-14 14:55:43 -0400] cudgel: having trouble finding info on this:  ethernet channel bonding on rhel (& variants)...  there must be a cookbook for that out there some place, but it seems my google skills are failing me
[2014-05-14 14:57:38 -0400] cudgel: if anyone has any knowledge of cookbooks, or perhaps I can simply use the ifconfig resource?
[2014-05-14 15:00:25 -0400] gchristensen: cudgel: my impression is NIC bonding is one of the less frequent tasks discussed here, and while there are cookbooks to do it, many of them are probably just internal 'books
[2014-05-14 15:00:42 -0400] gleam: there's the network_interfaces cookbook, but that's ubuntu/debian
[2014-05-14 15:00:54 -0400] CPS: how do i reset the admin password for the web ui of open source chef?
[2014-05-14 15:08:32 -0400] zanshin: How can I tell the impact of updating a cookbook version on our chef server? If I want to upload the newest version of `foo` is there a way to list all the cookbooks that will start using that version, i.e., the ones that aren't sheltered from version changes by an environment with pinned versions?
[2014-05-14 15:10:50 -0400] cudgel: gchristensen:  thanks; looks like maybe i'll have to roll my own then.  perhaps i can convince the powers-that-be that it should be released as open-source
[2014-05-14 15:28:35 -0400] helfire: i have a cookbook version pin'd in an environment, but want to test the new pin on 1 node first. Is there a way to just move that cookbook version pin on one node? i tried editing the node and putting the runlist as coobook@1.2.3 but chef says 1.2.3 doesnt satisfy the constraint of the environment
[2014-05-14 15:42:19 -0400] mmzyk: workmad3 That postgres error in the logs you saw in during upgrade is fine; its expected in some instances. Ill get a note added to the docs about it.
[2014-05-14 15:50:07 -0400] cocotton: Hey all. In a recipe, I'm using the remote_file resource, yet I have an error I never saw before. JSON::ParserError Top level JSON object must be a Hash or Array. (actual: NilClass). There does not seem to be a problem with the resource declaration since it is working on other nodes. Anyone ever saw something like that?
[2014-05-14 15:51:40 -0400] CPS: cocotton: gist the output
[2014-05-14 15:51:51 -0400] cocotton: CPS: Sure, give me a moment
[2014-05-14 15:52:53 -0400] workmad3: mmzyk: cheers
[2014-05-14 15:55:33 -0400] whiteadam: Anyone running FreeIPA on AWS by chance?
[2014-05-14 15:55:54 -0400] rjbs: I'm hitting a problem with cron on Solaris.  smf runs chef-client which ends up running "crontab -l user" but I get the dreaded "The audit context for your shell has not been set"
[2014-05-14 15:56:21 -0400] rjbs: I'm searching for any information on setting audit context /not/ related to my ssh process.  I hoped someone else had hit this...
[2014-05-14 15:58:30 -0400] cocotton: CPS: https://gist.github.com/anonymous/b9b7e07f7890675f940f Do you need something else?
[2014-05-14 16:03:01 -0400] StFS: I'm having problems bootstraping a machine. It keeps giving me "network unreachable" errors and I found out that it's trying to run yum but looking everything with ipv6!? I disabled ipv6 on the machine in question but it still doesn't work. This only happens when I bootstrap with knife... I can run yum just fine if I log in myself.
[2014-05-14 16:05:15 -0400] dylannorthrup: is there a way from the web UI to determine what version of chef-server is running?
[2014-05-14 16:07:08 -0400] whiteadam: dylannorthrup: type /version   like, chef.example.com/version
[2014-05-14 16:07:26 -0400] dylannorthrup: sweet, thanks whiteadam
[2014-05-14 16:07:47 -0400] whiteadam: dylannorthrup: no problem. I only know like 5 things about chef, and that happens to be one of them
[2014-05-14 16:13:52 -0400] _automan: I'm using berkshelf 3. I thought the issue where (in this case), my wrapper cookbook foo-mongodb, which depends on mongodb which then depends on apt and a bunch of stuff stuff... was resolved?
[2014-05-14 16:14:37 -0400] _automan: it seems not. Ie a 'berks install' in my wrapper cookbook complains it can't find the apt cookbook... I shouldn't have to specify that in my Berksfile. it should be handled by the mongodb one's Berksfile.
[2014-05-14 16:17:29 -0400] _automan: Actually... "[Berkshelf::APIClient::ServiceUnavaiable] service unavailable at: https://api.berkshelf.com".... *sigh*
[2014-05-14 16:21:01 -0400] rayrod2030: oh aws with it's eternal m3.x pending instances. :(
[2014-05-14 16:30:20 -0400] sarkis: was there a way to turn off user passwords?
[2014-05-14 16:36:39 -0400] coderanger: _automan: the cache has to be rebuilt from time to time
[2014-05-14 16:36:45 -0400] coderanger: _automan: usually only lasts a few minutes
[2014-05-14 16:37:13 -0400] whiteadam: coderanger: yeah, I think they just moved it to a larger instance
[2014-05-14 16:37:58 -0400] coderanger: whiteadam: No, its run on Heroku
[2014-05-14 16:38:38 -0400] whiteadam: coderanger: oh yeah, and where does heroku run?
[2014-05-14 16:38:41 -0400] whiteadam: SNAP!
[2014-05-14 16:39:03 -0400] coderanger: whiteadam: heroku also does instance migration transparently
[2014-05-14 16:39:10 -0400] whiteadam: coderanger: lies
[2014-05-14 16:39:18 -0400] coderanger: well they try to :P
[2014-05-14 16:39:21 -0400] whiteadam: hehe
[2014-05-14 16:39:42 -0400] whiteadam: my brain hurts, someone come do my job for me
[2014-05-14 16:52:33 -0400] corp: greetings
[2014-05-14 16:53:43 -0400] corp: any tools around to benchmark individual chef resources during runs?
[2014-05-14 16:55:31 -0400] jperry_: anyone else experience chef failures relating to nokogiri updating?  If you dont have git installed it bombs
[2014-05-14 16:55:52 -0400] corp: my runs are pretty slow now, and looking for ways to speed them up by identifying the worst offenders
[2014-05-14 16:58:37 -0400] cocotton: CPS: Did you have time to take a look at the gist :) ?
[2014-05-14 16:58:54 -0400] CPS: i did, unfortunately i wasn't able to come up with anything
[2014-05-14 16:59:33 -0400] cocotton: CPS: Yeah that is weird, I mean it is working for the other package in the %w(), yet not for this particular one :/
[2014-05-14 17:00:13 -0400] jperry_: corp: checkout the chef_profiler cookbook
[2014-05-14 17:00:18 -0400] CPS: it's a pretty unhelpful error, as well
[2014-05-14 17:00:31 -0400] cocotton: CPS: It is!
[2014-05-14 17:00:38 -0400] jperry_: corp: https://github.com/joemiller/chef-handler-profiler
[2014-05-14 17:00:47 -0400] corp: this one? https://github.com/joemiller/chef-handler-profiler
[2014-05-14 17:00:49 -0400] corp: thanks
[2014-05-14 17:00:50 -0400] jperry_: yup
[2014-05-14 17:01:07 -0400] corp: just what i needed - not easy to find
[2014-05-14 17:01:16 -0400] jperry_: corp: consider pre-baking your hosts with packer to speed things up
[2014-05-14 17:01:36 -0400] corp: jperry: thats not the issue - a fully 'baked' host run still takes a while
[2014-05-14 17:01:47 -0400] jperry_: really that is weird
[2014-05-14 17:01:53 -0400] jperry_: sounds like something isnt idempotent
[2014-05-14 17:01:56 -0400] corp: another thing i thought would be good is to start splitting runs out into lifecycle steps
[2014-05-14 17:02:10 -0400] corp: jperry: idempotence checks themselves, for a lot of things, are not fast
[2014-05-14 17:02:20 -0400] corp: for a large runlist anyway
[2014-05-14 17:02:42 -0400] corp: anyone experimented with using 'lifecycles' and chef server?
[2014-05-14 17:03:03 -0400] corp: afaik, there is no way to use a different runlist defined in the chef server, other than environments
[2014-05-14 17:03:34 -0400] corp: the idea there is for most runs, i dont want all the recipes to run every time, for example the unix user recipe
[2014-05-14 17:03:43 -0400] corp: just the important ones
[2014-05-14 17:04:41 -0400] jperry_: you could always have things only run on the first run
[2014-05-14 17:05:02 -0400] jperry_: corp: we have done that for things using a node attribute as a flag
[2014-05-14 17:05:11 -0400] jperry_: which is checked as a resource guard
[2014-05-14 17:05:33 -0400] double_p: converging 'important' .. hm, interesting :)
[2014-05-14 17:05:38 -0400] corp: well i dont want that as much as to be able to have different run lists
[2014-05-14 17:05:47 -0400] corp: AWS Opsworks works like this on purpose
[2014-05-14 17:05:55 -0400] corp: there is a setup, configure, deploy, etc phase
[2014-05-14 17:06:04 -0400] jperry_: corp: yeah you might need some tool to manage your run list
[2014-05-14 17:06:07 -0400] jperry_: not sure I know of one
[2014-05-14 17:06:11 -0400] corp: each with different runlist. you can just pick a phase
[2014-05-14 17:06:41 -0400] double_p: how about wrapper cookbooks?
[2014-05-14 17:06:43 -0400] corp: i think if i specify a runlist on the command line, it will run just for that run, or will be stuck in the server? havent tried that
[2014-05-14 17:07:01 -0400] jperry_: every time you update the run_list the next run will take it
[2014-05-14 17:07:02 -0400] double_p: corp: that's not persistent
[2014-05-14 17:07:17 -0400] corp: ok, is it or not :)
[2014-05-14 17:07:18 -0400] jperry_: meaning updating it on the server
[2014-05-14 17:07:32 -0400] jperry_: it also depends what you use for your runlist
[2014-05-14 17:07:38 -0400] corp: used to be, though now roles define the runlist
[2014-05-14 17:07:40 -0400] jperry_: if its a role etc
[2014-05-14 17:07:58 -0400] jperry_: you could manage it via roles where each role defines a phase
[2014-05-14 17:08:02 -0400] double_p: if you run chef-client with a runlist override.. that's not saved?
[2014-05-14 17:08:16 -0400] corp: yeah jperry, for now just thinking roles with different names
[2014-05-14 17:09:05 -0400] jperry_: double_p: if you override the run_list directly on the host by calling chef-client directly Im not sure if it is persisted
[2014-05-14 17:09:08 -0400] jperry_: easy to test though
[2014-05-14 17:09:13 -0400] corp: i found on opsworks this saved a lot of time
[2014-05-14 17:09:19 -0400] cocotton: Hey all. In a recipe, I'm using the remote_file resource, yet I have an error I never saw before. JSON::ParserError Top level JSON object must be a Hash or Array. (actual: NilClass). There does not seem to be a problem with the resource declaration since it is working on other nodes. Anyone ever saw something like that? Here is the gist containing the part on my recipe calling the resource and the error trace : https://gist.github.com/anonym
[2014-05-14 17:09:20 -0400] cocotton: ous/b9b7e07f7890675f940f
[2014-05-14 17:09:24 -0400] cocotton: https://gist.github.com/anonymous/b9b7e07f7890675f940f *
[2014-05-14 17:09:32 -0400] corp: not running all the cookbooks every time
[2014-05-14 17:10:02 -0400] double_p: jperry_: i do that for debugging recipes.. but never checked thoroughly what's left behind in the node's runlist to be honest
[2014-05-14 17:20:28 -0400] _automan: is there a way to call kitchen and not converge? ie, err have it do the suite and not the platform run_list?
[2014-05-14 17:21:17 -0400] rayrod2030: setup?
[2014-05-14 17:21:30 -0400] rayrod2030: oh um
[2014-05-14 17:22:06 -0400] _automan: rayrod2030: Oh?
[2014-05-14 17:22:17 -0400] _automan: rayrod2030: now, if I could just find docs. :)
[2014-05-14 17:23:23 -0400] rayrod2030: _automan: not sure if setup is what you are looking for
[2014-05-14 17:24:10 -0400] _automan: rayrod2030: looks like it does the converse of what I need... ie run the platform run_list. Man the docs on kitchen suck
[2014-05-14 17:24:53 -0400] rayrod2030: _automan: docs are getting better over time.  If you feel they need to improve them contribute a pull request.
[2014-05-14 17:25:12 -0400] _automan: rayrod2030: just as soon as I work it out... which is hard without docs to begin with
[2014-05-14 17:25:44 -0400] rayrod2030: Monsieur Nichol is very responsive to feedback.
[2014-05-14 17:26:18 -0400] _automan: maybe a ticket...
[2014-05-14 17:27:03 -0400] _automan: actually would that be the appropriate thing?
[2014-05-14 17:29:04 -0400] rayrod2030: yeah sure
[2014-05-14 17:33:31 -0400] sauraus: Anyone with Jenkins cookbook experience around?
[2014-05-14 17:33:35 -0400] _automan: I thought this was fixed in berkshelf 3. If I have a wrapper cookbook, lets call it foo-mongodb, and it depends on other cookbooks... do I need to explicitly put those deps in foo-mongodb or does berkshelf 'recursively' resolve?
[2014-05-14 17:34:52 -0400] rayrod2030: should resolve anything in metadata and all deps from those deps
[2014-05-14 17:35:44 -0400] _automan: rayrod2030: recursively?
[2014-05-14 17:36:48 -0400] _automan: rayrod2030: because my Berksfile contains foo-role-base. The cookbook foo-role-base depends on foo-users. However, berks is complaining it can't find foo-users.
[2014-05-14 17:37:16 -0400] _automan: berks should refer to the Berksfile for foo-role-base to determine how to get foo-users...
[2014-05-14 17:37:37 -0400] _automan: the main cookbook should not have to have foo-users as a dependancy. It should not need to know anything about that
[2014-05-14 17:39:15 -0400] rayrod2030: is foo-users defined in the berks api or is it a local cookbook?
[2014-05-14 17:39:30 -0400] rayrod2030: if it's a local cookbook that's just in one of your github repos then you need to define that in your berks file.
[2014-05-14 17:39:43 -0400] rayrod2030: there is no other way for berkshelf to know it exists.
[2014-05-14 17:40:32 -0400] _automan: rayrod2030: it's a local cookbook. It's referenced in the upstream foo-role-base's berksfile as cookbook 'foo-users', path: '../foo-users' ... and that cookbook resolves it fine.
[2014-05-14 17:41:04 -0400] _automan: it's not until foo-mongodb tries to use foo-role-base that it complains it can't find it.
[2014-05-14 17:44:17 -0400] _automan: well I dunno
[2014-05-14 17:48:35 -0400] whiteadam: Are you guys still talking about computers? I thought this was a cooking channel.
[2014-05-14 17:51:49 -0400] rayrod2030: In preparing a velout sauce, a light stock (one in which the bones used have not been previously roasted), such as chicken or fish stock, is thickened with a blond roux.
[2014-05-14 17:52:06 -0400] whiteadam: rayrod2030: now that's more like it
[2014-05-14 17:52:28 -0400] rayrod2030: veloute has to be a future chef tool name
[2014-05-14 17:52:56 -0400] rayrod2030: also siphon
[2014-05-14 17:53:06 -0400] whiteadam: Anyone know of a program that triggers a script based on a file being edited?
[2014-05-14 17:53:23 -0400] whiteadam: Like, if the DNS file is changed, then execute this script to update Route53
[2014-05-14 17:53:32 -0400] coderanger: whiteadam: gaurd?
[2014-05-14 17:54:02 -0400] whiteadam: coderanger: well shit, I thought that was just for like, rails development. derp derp
[2014-05-14 17:56:50 -0400] robawt: silly question
[2014-05-14 17:56:59 -0400] whiteadam: I like silly
[2014-05-14 17:57:02 -0400] robawt: what are people using to watch baseline metrics of systems?
[2014-05-14 17:57:12 -0400] whiteadam: Like... what
[2014-05-14 17:57:19 -0400] whiteadam: I would like to be using ganglia
[2014-05-14 17:57:24 -0400] robawt: munin is what i'm currently using but i'm looking for more custom report ability
[2014-05-14 17:57:53 -0400] whiteadam: robawt: check this out and see if it's what you're thinking: http://ganglia.wikimedia.org/
[2014-05-14 17:58:47 -0400] robawt: whiteadam: looks like an improvement, but can you modify the views without crazy custom templating?
[2014-05-14 18:00:40 -0400] rayrod2030: robawt: cloudwatch
[2014-05-14 18:00:48 -0400] whiteadam: robawt: that I am not sure of
[2014-05-14 18:03:01 -0400] robawt: thanks whiteadam rayrod2030
[2014-05-14 18:05:07 -0400] sauraus: Ok I have a super weird situation with the Jenkins cookbook, on Vagrant jenkins install fine, but when I run exactly the same recipe on my prod VM, it fails because it now is creating a SSL key/pair which I cannot explain. ANyone got an idea?
[2014-05-14 18:06:25 -0400] davidordave: @sauraus, is it throwing a specific error?
[2014-05-14 18:07:30 -0400] sauraus: Yes that no private key was accepted by the Jenkins server, which was just created
[2014-05-14 18:08:20 -0400] sauraus: Which is true because I've not yet set that in the cookbook, and yet the chef_run on the PROD node created the jenkins-key file in the /etc/chef/cache folder the moment I hit the create user part
[2014-05-14 18:08:30 -0400] rpetty: Good morning.  Anyone having trouble uploading cookbooks?  Trying to knife cookbook upload and its taking a loooooooon time, nothing else appears to be slow on my end.
[2014-05-14 18:11:11 -0400] ron2: ron2 challenges ron
[2014-05-14 18:11:17 -0400] rpetty: ron challenges ron2
[2014-05-14 18:11:52 -0400] ssd7: Two rons enter, one ron leaves
[2014-05-14 18:14:14 -0400] davidordave: From my understanding, you have to set the node attribute for the private key after you create the user on first run, otherwise the call tries to authenticate using a key that isn't in jenkins yet. That wouldn't explain why it was working in vagrant though.
[2014-05-14 18:16:50 -0400] davidordave: hence the use of a ruby block in the readme to force converge time evaluation.
[2014-05-14 18:17:08 -0400] tejaycar: Ok, folks, this one has been killing me for a while.
[2014-05-14 18:17:20 -0400] tejaycar: Many of the opscode cookbooks have multiple files in the attributes folder
[2014-05-14 18:17:31 -0400] tejaycar: default.rb, but also others for each recipe/resource
[2014-05-14 18:17:52 -0400] tejaycar: Simply dropping other files in there seems to do nothing.  So how do those files get loaded?
[2014-05-14 18:18:01 -0400] rayrod2030: based on cookbook name
[2014-05-14 18:18:04 -0400] rayrod2030: sorry recipe name
[2014-05-14 18:18:21 -0400] rayrod2030: default will load for recipes/default.rb
[2014-05-14 18:18:38 -0400] rayrod2030: attributes/foo.rb will load for recipes/foo.rb
[2014-05-14 18:18:48 -0400] rayrod2030: iicr
[2014-05-14 18:21:24 -0400] rayrod2030: tejaycar: the docs aren't too clear on that here http://docs.opscode.com/essentials_cookbook_attribute_files.html
[2014-05-14 18:21:40 -0400] rayrod2030: the attribute file ordering section touches on it a bit.
[2014-05-14 18:22:02 -0400] tejaycar: but default.rb get's loaded no matter what, right?
[2014-05-14 18:22:10 -0400] tejaycar: Even if you don't run the default.rb recipe.
[2014-05-14 18:23:12 -0400] rayrod2030: yeah the node attributes are applied if the cookbook is in the runlist but not applied.
[2014-05-14 18:23:39 -0400] sauraus: davidordave I've actually removed all the code that does the SSL key/pair generation from my wrapper cookbook, which on a Vagrant box just works, but on my PROD node will still create the SSL key/pair. I've checked the code on my PROD node for my cookbook to be sure I am not running an old version of my cookbook and the code is 100% identical
[2014-05-14 18:35:46 -0400] davidordave: @sauraus, if the node attribute isn't set the key shouldn't be dropped. The readme code sample sets the attribute to normal, so if you have run that code on your node before the attribute will still be there. Maybe check the node object and see if it is set at that level?
[2014-05-14 18:47:55 -0400] Shubby: when I specify a run list in a bootstrap command, it fails and tells me the "following cookbooks are required by the client but don't exist on the server" and then lists the things I put in my run list... obviously the cookbooks do exist on the server
[2014-05-14 18:48:20 -0400] Shubby: I'm using this command: knife bootstrap 192.168.8.107 -x root -P <password> -N centos-dns-test1 --sudo --bootstrap-version 11.12 -r 'recipe[aws-us-east]'
[2014-05-14 18:48:23 -0400] Shubby: am I doing something wrong?
[2014-05-14 18:48:48 -0400] sauraus: davidordave OMG that's probably it, it's on the node object on the Chef server!
[2014-05-14 18:51:12 -0400] mattsmith: Evening all, how does one override the default settings in a kitchen.yml when generated from "kitchen init"
[2014-05-14 18:52:09 -0400] rayrod2030: mattsmith: you can set up a .kitchen.local.yml file
[2014-05-14 18:52:21 -0400] rayrod2030: oh you mean the template used to generate the file initially?
[2014-05-14 18:52:37 -0400] whiteadam: mattsmith: Do I know you, are you in Austin?
[2014-05-14 18:52:47 -0400] sauraus: Is there a way to prevent an attribute value to be stored on the NODE object in the Chef server?
[2014-05-14 18:53:28 -0400] whiteadam: mattsmith: Maybe not... We both have entirely too common of a name.
[2014-05-14 18:53:50 -0400] someara: sauraus https://github.com/opscode/whitelist-node-attrs
[2014-05-14 18:54:15 -0400] mattsmith: whiteadam, Nope I'm in the UK :-)
[2014-05-14 18:54:26 -0400] whiteadam: mattsmith: hah, I think I know one over there also
[2014-05-14 18:55:07 -0400] mattsmith: rayrod2030, Yep... Kinda like you have for vagrant
[2014-05-14 18:56:13 -0400] mattsmith: and for berkshelf
[2014-05-14 18:56:25 -0400] mattsmith: like a config.json for test kitchen?
[2014-05-14 18:56:49 -0400] whiteadam: mattsmith: I asked that question recently and am looking for the answer in my logsd
[2014-05-14 18:57:27 -0400] whiteadam: mattsmith: I think it might be ~/.kitchen/config.yml
[2014-05-14 18:57:28 -0400] rayrod2030: mattsmith: https://github.com/test-kitchen/test-kitchen/blob/9b232eaeffcbea5e73b2e4278a278f6313106138/lib/kitchen/generator/init.rb#L53
[2014-05-14 18:57:45 -0400] davidordave: @sauraus, with the jenkins cookbook I use a guard on the user's xml and a node.default call in a ruby block. Maybe not the best way, but it works.
[2014-05-14 18:58:17 -0400] rayrod2030: doesn't look pluggable yet
[2014-05-14 18:58:37 -0400] rayrod2030: but I'm sure you can just replace that template in your gem folder but that's a hack.
[2014-05-14 18:59:03 -0400] rayrod2030: mattsmith: I'm sure that's been brought up as a feature request.
[2014-05-14 18:59:24 -0400] mattsmith: can you trigger a `kitchen init` on firing a berks cookbook ?
[2014-05-14 18:59:28 -0400] rayrod2030: mattsmith: https://github.com/test-kitchen/test-kitchen/pull/425
[2014-05-14 18:59:31 -0400] rayrod2030: there
[2014-05-14 18:59:48 -0400] someara: export KITCHEN_YAML="whatever"
[2014-05-14 19:00:59 -0400] rayrod2030: oh nice
[2014-05-14 19:01:06 -0400] mattsmith: great cheers guys, i'll try these out
[2014-05-14 19:04:10 -0400] take_it_t: whats the best way for managing secrets with chef solo?
[2014-05-14 19:04:19 -0400] Shred00: how do i avoid altering a user account that already exists?
[2014-05-14 19:04:28 -0400] Shred00: i.e. using the user resource
[2014-05-14 19:04:54 -0400] whiteadam: Shred00: I think you just put your "desired state" and Chef makes it so.
[2014-05-14 19:05:06 -0400] btm: @chef code review: join: bit.ly/1jgtuFE watch: bit.ly/1jgtx4o
[2014-05-14 19:05:10 -0400] Shred00: i want to set an initial password if the account doesn't exist but i don't want to reset the password to that default password if it does exist
[2014-05-14 19:06:06 -0400] whiteadam: Code review, most exciting part of my day.
[2014-05-14 19:07:15 -0400] Shred00: whiteadam: if i run chef again, after adding all of the accounts i get a bunch of "INFO: Altered user[joe]" which i assume is resetting passwords back to their initial/default value
[2014-05-14 19:07:51 -0400] whiteadam: Shred00: yeah, I see what you mean... hmm
[2014-05-14 19:08:57 -0400] Shred00: or maybe i am just going about this account creation wrong?  surely everyone creates accounts with an initial password don't they?
[2014-05-14 19:10:09 -0400] AskSteve: using the git resource, is it possible to check out a subdirectory under the branch/repo or should I checkout the whole thing and then move the files I want where I want them?
[2014-05-14 19:11:04 -0400] whiteadam: Shred00: yeah, but what I understand is that Chef enforces the desired state and you're telling it that the desired password is "password"
[2014-05-14 19:11:13 -0400] whiteadam: Shred00: BUT, I totally get what you're trying to do.
[2014-05-14 19:13:49 -0400] ianblenke: Shred00: The thing you might be doing wrong is allowing the state of a node to diverge from what chef thinks it should be. If a user changes their password, you want that password to be changed on all nodes, right? In that case, storing that new password in chef and having chef enforce that new password is generally the approach taken.
[2014-05-14 19:14:18 -0400] whiteadam: Shred00: it might be easier to use a public key
[2014-05-14 19:14:21 -0400] Shred00: ianblenke: not even that complicated.  a single node.  no multiple-node sync needed
[2014-05-14 19:14:50 -0400] whiteadam: AskSteve: When you say check out, do you mean chef/berkshelf reading a specific branch?
[2014-05-14 19:14:50 -0400] Shred00: whiteadam: this is for access other than ssh
[2014-05-14 19:14:58 -0400] whiteadam: Shred00: ooooh, ok
[2014-05-14 19:15:20 -0400] AskSteve: no, a folder under a branch in a recipe
[2014-05-14 19:15:30 -0400] whiteadam: hmm
[2014-05-14 19:15:36 -0400] AskSteve: so git@github.com:orgname/project/folder
[2014-05-14 19:16:01 -0400] AskSteve: I can get orgname/project and manipulate that after checkout but all I really want is the latest contents of folder
[2014-05-14 19:16:10 -0400] whiteadam: AskSteve: I'm not sure about that one. Probably possible though
[2014-05-14 19:16:20 -0400] AskSteve: git doesn't support it, so I would assume that chef doesn't, thought I'd ask first
[2014-05-14 19:16:28 -0400] ianblenke: yeah, you're probably not going to find a user cookbook that does things that way. you could fork one. alternatively, you could always override the action on that user resource to be :nothing after including the user cookbook at compile time or some other such hack to avoid mucking with the community cookbook to do what you want.
[2014-05-14 19:16:52 -0400] ianblenke: it's not so much that chef doesn't so much as it is that the user cookbook you are using likely doesn't.
[2014-05-14 19:17:27 -0400] ianblenke: adding a not_if stanza to the resource creating said user to not do so if the user already has a password set might be what you're looking for.
[2014-05-14 19:17:33 -0400] Evangael_: Shred00: Since account creation are handled by chef in you case, why not handle the password creation (the real one, not the default one) by chef also, with encrypted databag or another alternative? That way, it will add and keep user updated on each node. Am I missing something ?
[2014-05-14 19:18:09 -0400] Shred00: how would users interact with such a solution?
[2014-05-14 19:18:19 -0400] Shred00: i.e. what is the alternative to the "passwd" command?
[2014-05-14 19:18:20 -0400] ianblenke: Evangael_: It sounds like Shred00 is just doing this on one node and doesn't want to have a converged encrypted user databag as the chef community generally suggests doing.
[2014-05-14 19:18:30 -0400] whiteadam: Evangael_: I think he wants the user to be able to change their password from the default
[2014-05-14 19:20:11 -0400] Evangael_: Oh, then, nevermind ^^'
[2014-05-14 19:20:26 -0400] whiteadam: Evangael_: YEAH PAY ATTENTION!
[2014-05-14 19:20:42 -0400] whiteadam: Is it too early to drink beer?
[2014-05-14 19:21:04 -0400] Evangael_: define too early.
[2014-05-14 19:21:05 -0400] Evangael_: ;)
[2014-05-14 19:21:16 -0400] whiteadam: then I'm doin it.
[2014-05-14 19:21:18 -0400] rayrod2030: 5 o'clock somewhere
[2014-05-14 19:21:20 -0400] bubu: Can you use the git resource on windows machines which have git installed?
[2014-05-14 19:21:44 -0400] ianblenke: Shred00: Are you using the user resource? (http://docs.opscode.com/resource_user.html)
[2014-05-14 19:22:29 -0400] Shred00: ianblenke: yes
[2014-05-14 19:23:23 -0400] whiteadam: ianblenke: Do you know if :unlock will allow the user to change their default password?
[2014-05-14 19:23:42 -0400] ianblenke: Shred00: It sounds like you want to make the password method invocation conditional on a non-existing password already existing... Something like this maybe: password self['password'] if !self['password']
[2014-05-14 19:25:25 -0400] ianblenke: Shred00: If you're using a users cookbook to generate your user from a databag, that cookbook might need some logic like that instead.
[2014-05-14 19:25:34 -0400] Shred00: ianblenke: that code in the user resource?  does that imply that if the user exists, "self" contains the pre-change version of the account?
[2014-05-14 19:27:13 -0400] ianblenke: whiteadam: looking around for :unlock now
[2014-05-14 19:29:32 -0400] whiteadam: ianblenke: It's down there, curious as to what it does.
[2014-05-14 19:30:01 -0400] whiteadam: ianblenke: not sure if it "locks" as in locks-out, or just doesn't allow the user to change their password
[2014-05-14 19:30:32 -0400] sauraus: someara is there an black-list cookbook as well? :)
[2014-05-14 19:30:37 -0400] ianblenke: pretty sure that's for locking an account to prevent someone from logging in with that account. ie, passwd -l
[2014-05-14 19:31:08 -0400] whiteadam: ianblenke: yeah, makes sense
[2014-05-14 19:31:40 -0400] coderanger: sauraus: You mean for node attrs?
[2014-05-14 19:31:47 -0400] someara: nope
[2014-05-14 19:32:15 -0400] coderanger: someara: citadel blacklists a few attrs, it could be adapted I suppose :)
[2014-05-14 19:32:39 -0400] ianblenke: why am I having such a difficult time finding the source for Chef::User? as referred to here: https://github.com/opscode/chef/blob/master/lib/chef/user.rb#L87
[2014-05-14 19:32:42 -0400] Shred00: it seems the user cookbook needs to have an "initial password" attribute or something like that
[2014-05-14 19:32:45 -0400] Evangael_: whiteadam, ianblenke, it doesn't seems implemented from the source code anyway : https://github.com/opscode/chef/blob/master/lib/chef/provider/user.rb
[2014-05-14 19:33:17 -0400] ianblenke: yeah, ignore my last question. *forehead slap*
[2014-05-14 19:34:09 -0400] coderanger: Shred00: Local passwords are mostly obsolete
[2014-05-14 19:34:10 -0400] ianblenke: unless we're missing a mixin somewhere, lock/unlock are conspicuously missing there. but that wouldn't help Shred00 with his quandry.
[2014-05-14 19:34:24 -0400] sauraus: coderanger yes for node attrs, I basicly want to prevent a single node attr from being saved on the Chef server
[2014-05-14 19:34:54 -0400] Shred00: coderanger: for a single machine?  would you set up an AD or an LDAP server for a single machine?
[2014-05-14 19:35:33 -0400] coderanger: ianblenke: chef::user is for actual chef webui users
[2014-05-14 19:35:34 -0400] coderanger: ianblenke: You want chef::resource::user
[2014-05-14 19:35:34 -0400] coderanger: and similarly chef::provider::user
[2014-05-14 19:35:45 -0400] coderanger:  sauraus Look at citadel/libraries/safe_node.rb
[2014-05-14 19:35:54 -0400] coderanger: Shred00: No, I just wouldn't use passwords at all
[2014-05-14 19:35:59 -0400] coderanger: Shred00: (and, in fact, I don't :)
[2014-05-14 19:36:09 -0400] Shred00: coderanger: so anyone can have access?
[2014-05-14 19:36:11 -0400] coderanger: Shred00: Login is restricted to keys only
[2014-05-14 19:36:15 -0400] coderanger: Shred00: SSH keys ftw
[2014-05-14 19:36:30 -0400] Shred00: coderanger: ssh keys work great for ssh.  not so much for other things.
[2014-05-14 19:36:38 -0400] coderanger: Shred00: What other things are there?
[2014-05-14 19:36:54 -0400] whiteadam: coderanger: the NSA doesn't like the use of SSH keys
[2014-05-14 19:36:55 -0400] coderanger: sudo has no need for passwords (its stupidly insecure anyway)
[2014-05-14 19:37:04 -0400] coderanger: and local login isn't really a thing
[2014-05-14 19:37:06 -0400] Shred00: coderanger: are you being serious or are you trolling me?
[2014-05-14 19:37:23 -0400] coderanger: (barring workstation setup, but thats a horse of a different color)
[2014-05-14 19:37:29 -0400] coderanger: Shred00: I'm quite serious
[2014-05-14 19:38:01 -0400] Shred00: coderanger: there are a zillion pieces of software out there that require a user/password authentication.  web UIs, as just a simple example.
[2014-05-14 19:38:57 -0400] ianblenke: encrypted databags. Nordstrom's chef-vault. there are mechanisms used to store those passwords in chef and have chef enforce them where they are needed, to converge the state of the nodes.
[2014-05-14 19:39:16 -0400] coderanger: Shred00: Thats 1) not related to unix users 2) no longer talking about "a single system" and 3) not always true, most stuff supports one of LDAP, OpenID, or OAuth (possibly via plugins)
[2014-05-14 19:39:19 -0400] Shred00: ianblenke: how do users manage their passwords when they are in chef databags though?
[2014-05-14 19:40:36 -0400] coderanger: Shred00: The only thing I have deployed right now that required its own passwords is rundeck
[2014-05-14 19:40:42 -0400] ianblenke: an ssh key trust would put the onus of protecting the private part with a passphrase on the accessor, which is probably why the silly "ssh needs a password" policy is used there. if they're that paranoid, require MFA.
[2014-05-14 19:40:51 -0400] Shred00: coderanger: 1) it's absolutely related to unix users if you need multiple things to share a common user database, 2) and yes i am still talking about a single system -- i'm the one implementing it here.  i can count to one. 3) i am not going to the effort of LDAP for one webui.
[2014-05-14 19:42:39 -0400] Evangael_: Shred00: Dirty trick. Use :modify to change the comment on a user to some random string. If there's an exception raised, the users doesn't exists. Create it. If the modify work, do nothing.
[2014-05-14 19:43:28 -0400] coderanger: Shred00: What web UI supports authenticating with local unix passwords but not OpenID? That would be a really weird mix
[2014-05-14 19:43:29 -0400] coderanger: ianblenke: Most MFA these days is software tokens, if you presume incompetence that really doesn't help much :-/
[2014-05-14 19:43:42 -0400] ianblenke: Shred00: the agile answer would be to approach that from the perspective of the policy you are trying to enforce. a central auth server may be what you're really looking for, hooked into PAM auth. with chef-vault, you could conceivably have users editing their own encrypted databags.
[2014-05-14 19:43:45 -0400] Shred00: Evangael_: i guess if you want to sacrifice the comment field, that could work
[2014-05-14 19:44:32 -0400] Evangael_: Shred00: you can keep the comment and append a random string at run time. But this will modify the user systematically and it's definitely not clean.
[2014-05-14 19:44:59 -0400] coderanger: Shred00: Basically secrets management is Really Hard, and passwords are the most secret-y secret you can get
[2014-05-14 19:45:09 -0400] coderanger: If it is even remotely possible to delegate the issue, you should
[2014-05-14 19:45:14 -0400] ianblenke: coderanger: +1
[2014-05-14 19:45:34 -0400] whiteadam: coderanger said Really Hard
[2014-05-14 19:46:02 -0400] ianblenke: NP-complete, at least.
[2014-05-14 19:46:26 -0400] newbie259: anyone have any idea why I would get this NoMethodError: undefined method `[]' for nil:NilClass when calling end.run_action(:converge) in chef metal?
[2014-05-14 19:46:32 -0400] coderanger: Also the corollary is identity management is easier than secrets management (hence keys > passwords)
[2014-05-14 19:46:46 -0400] whiteadam: newbie259: sounds like you have a space somewhere
[2014-05-14 19:47:05 -0400] whiteadam: coderanger: Do you use FreeIPA?
[2014-05-14 19:47:12 -0400] coderanger: newbie259: Often that means you are missing a required node attribute that has no default set
[2014-05-14 19:47:37 -0400] ianblenke: just ran into FreeIPA last week. hadn't dealt with that particular project before.
[2014-05-14 19:47:39 -0400] newbie259: hmm. ok. I do have a space above it. is that not allowed?
[2014-05-14 19:47:52 -0400] newbie259: not sure what node attribute would be giving me trouble
[2014-05-14 19:48:11 -0400] whiteadam: ianblenke: yeah, I'm trying to get it running on AWS now and the initial setup is a pain
[2014-05-14 19:48:18 -0400] ianblenke: PAM to FreeIPA to Shibboleth :-P
[2014-05-14 19:48:52 -0400] ianblenke: throw GSSAPI Google MFA just to make your life more difficult
[2014-05-14 19:49:20 -0400] coderanger: whiteadam: No, I delegate to either google or github auth for everything possible
[2014-05-14 19:49:25 -0400] whiteadam: ianblenke: hah, I work for a Fortune 100 with PCI 1 compliance, everything is difficult.
[2014-05-14 19:49:32 -0400] whiteadam: coderanger: lucky bastard
[2014-05-14 19:49:52 -0400] newbie259: killing the space didnt help
[2014-05-14 19:50:07 -0400] newbie259: I dont have any node attributes blank
[2014-05-14 19:50:33 -0400] coderanger: whiteadam: We just keep all PCI-relevant stuff locked away in its own little corner
[2014-05-14 19:50:33 -0400] coderanger: fuck if I'm going to make jenkins PCI compliant
[2014-05-14 19:50:54 -0400] whiteadam: coderanger: it sucks
[2014-05-14 19:50:55 -0400] coderanger: newbie259: It might just be a bug, can you pastebin the whole traceback?
[2014-05-14 19:52:13 -0400] ianblenke: jenkins running tests against anything containing real customer data that requires PCI compliance just makes me shudder a bit.
[2014-05-14 19:53:40 -0400] coderanger: It is worth pointing out that unless you either use my jenkins cookbook or have a really good security team, Jenkins is _really_ insecure
[2014-05-14 19:54:04 -0400] coderanger: Like downloads-executable-code-over-unverified-http insecure
[2014-05-14 19:54:15 -0400] whiteadam: PCI is the worst, level 1 is the stupidest ever. We have a client that sells books and I mean they only have like 30 books, and they want to be PCI 1
[2014-05-14 19:54:49 -0400] whiteadam: PCI 1 is for 20,000,000+ transaction per year
[2014-05-14 20:00:42 -0400] robawt: whiteadam: worst part about PCI is the penalty is only money.  so depending on the infractions a lot of companies won't be compliant because they'll make enough profit to "deal with problems later", and later is never
[2014-05-14 20:01:44 -0400] whiteadam: robawt: amen. And it seems like everything is up to the QSA. the "spirit" of the requirement. wtf is that.
[2014-05-14 20:03:00 -0400] robawt: whiteadam: oh man, seriously
[2014-05-14 20:04:39 -0400] whiteadam: robawt: oh, and they're all assholes.
[2014-05-14 20:04:48 -0400] robawt: lol
[2014-05-14 20:04:50 -0400] robawt: that's a given
[2014-05-14 20:05:14 -0400] robawt: any time a private group made up of the very people who profit from the very thing they're protecting comes into play.
[2014-05-14 20:05:36 -0400] whiteadam: and they're all experts in scare tactics.
[2014-05-14 20:05:48 -0400] robawt: whiteadam: and novices at reading service banners
[2014-05-14 20:06:04 -0400] whiteadam: I get it, security is important, but guess what, these servers don't touch CC's, they just see tokens, so... whyyyyyyy
[2014-05-14 20:06:09 -0400] robawt: you can pull up the CVE, show that your stuff is patched, and they want to take 2-3 days to mull it over
[2014-05-14 20:06:47 -0400] whiteadam: "give me 6 types of evidence please"
[2014-05-14 20:07:05 -0400] whiteadam: me: "i don't know what that means, here's a user/pass"
[2014-05-14 20:07:40 -0400] robawt: haha
[2014-05-14 20:07:48 -0400] robawt: i better stop before you give me flashbacks whiteadam
[2014-05-14 20:07:57 -0400] whiteadam: haha, right? it's the worst
[2014-05-14 20:11:48 -0400] coderanger: robawt: It depends on who you are, if we get hit with a PCI violation and one of hte CC processors blacklists us, it would be a non-trivial problem
[2014-05-14 20:13:23 -0400] whiteadam: coderanger: From what I can tell, it's all a show, lots of "voluntary" stuff
[2014-05-14 20:13:37 -0400] coderanger: whiteadam: For clarity, I work for a payment processor
[2014-05-14 20:13:47 -0400] whiteadam: coderanger: gross, so you're L1
[2014-05-14 20:14:00 -0400] coderanger: Yep
[2014-05-14 20:15:51 -0400] robawt: coderanger: good point
[2014-05-14 20:16:05 -0400] whiteadam: coderanger: So, here's one: If we have a client who uses IBM commerce and they get a token from a processor, do they fall within the "cardholder data" storage requirements?
[2014-05-14 20:16:10 -0400] robawt: coderanger: also sorry to hear you have to deal with L1
[2014-05-14 20:17:05 -0400] coderanger: whiteadam: No
[2014-05-14 20:17:33 -0400] coderanger: whiteadam: an opaque token, as long as it requires authentication to use, is not covered
[2014-05-14 20:17:34 -0400] whiteadam: coderanger: I knew it!
[2014-05-14 20:17:56 -0400] coderanger: whiteadam: _but_ they might still fall under PII storage reqs depending on what they keep
[2014-05-14 20:18:12 -0400] coderanger: But those are generally pretty common-sense things
[2014-05-14 20:18:14 -0400] whiteadam: coderanger: I think they keep the billing address, that's it
[2014-05-14 20:18:49 -0400] coderanger: I don't remember the specifics on PII stuffs, been too long
[2014-05-14 20:18:55 -0400] whiteadam: coderanger: We have a customer who insists that they want PCI 1, but all they have is like 1 commerce server and 1 DB server, none of which do payment processing.
[2014-05-14 20:19:24 -0400] coderanger: whiteadam: ::shrug:: bill 'em for it and move on? :)
[2014-05-14 20:19:30 -0400] whiteadam: coderanger: It's been a delicate situation telling them "I don't think that's what you need" since they're paying us for otherwise
[2014-05-14 20:19:33 -0400] whiteadam: coderanger: ahahha, I know!
[2014-05-14 20:20:23 -0400] Shred00: can one conditionalize the contents of the run_list in a role, say, based on what ohai gathers?
[2014-05-14 20:23:32 -0400] mlt: Im using knife ec2 with ChefDK.  Im getting ERROR: Fog::Compute::AWS::Error: AuthFailure => AWS was not able to validate the provided access credentials with everything Ive tried.  Here is the output of -VV https://gist.github.com/mtyler/41165bb09c59342f1d2e.
[2014-05-14 20:24:16 -0400] coderanger: Shred00: No, but you can make a recipe that skips itself if a condition is/isn't met
[2014-05-14 20:24:37 -0400] Shred00: coderanger: yeah, a wrapper recipe is what i was thinking as a plan b
[2014-05-14 20:26:11 -0400] coderanger: Shred00: The only conditional expansion you can do directly is roles can have environment-specific overrides
[2014-05-14 20:27:00 -0400] drywheat: what is the best way to debug chef attributes? i'm expecting a merge when using the `default' level across cookbooks but instead see a complete overwrite
[2014-05-14 20:28:05 -0400] coderanger: drywheat: What do the attributes look like?
[2014-05-14 20:28:23 -0400] drywheat: just an array of strings
[2014-05-14 20:28:32 -0400] coderanger: Also to debug, use #debug_value, see http://www.getchef.com/blog/2013/02/05/chef-11-in-depth-attributes-changes/
[2014-05-14 20:28:39 -0400] coderanger: drywheat: Do not use arrays in node attrs
[2014-05-14 20:28:57 -0400] coderanger: drywheat: They are really hard to predict, you only get the merging in very specific circumstances
[2014-05-14 20:29:34 -0400] drywheat: it feels like the best data structure to use. what's the alternative
[2014-05-14 20:29:35 -0400] drywheat: ?
[2014-05-14 20:30:13 -0400] gchristensen: hashes. {'string': true, 'anotherstring': true}
[2014-05-14 20:30:18 -0400] gchristensen: filter out false's
[2014-05-14 20:30:30 -0400] gchristensen: drywheat: https://coderanger.net/2013/06/arrays-and-chef/
[2014-05-14 20:32:05 -0400] coderanger: heh, didn't even have to find the link :)
[2014-05-14 20:32:22 -0400] drywheat: that's something
[2014-05-14 20:32:42 -0400] gchristensen: chef + array attributes are the devil
[2014-05-14 20:33:11 -0400] drywheat: but merging maps is acceptable?
[2014-05-14 20:33:23 -0400] coderanger: drywheat: Yes, because they have deep-merge semantics that make sense
[2014-05-14 20:33:27 -0400] coderanger: arrays, unfortunately, don't
[2014-05-14 20:33:28 -0400] gchristensen: hashes merge cleanly
[2014-05-14 20:33:46 -0400] coderanger: Really chef should have picked a single semantic for array merges and used it everywhere
[2014-05-14 20:33:55 -0400] coderanger: I think kallistec had planned to fix that up at some point
[2014-05-14 20:34:24 -0400] phil_s_stein: Has anyone used PyChef here? If so, is it any good?
[2014-05-14 20:34:31 -0400] coderanger: phil_s_stein: I might have used it once or twice :)
[2014-05-14 20:34:40 -0400] phil_s_stein: Is it yours?
[2014-05-14 20:34:43 -0400] coderanger: Indeed
[2014-05-14 20:34:45 -0400] phil_s_stein: haha
[2014-05-14 20:34:54 -0400] phil_s_stein: so, yes, I'm guessing it's awesome.
[2014-05-14 20:34:56 -0400] phil_s_stein: :)
[2014-05-14 20:35:03 -0400] coderanger: What it does, it does well enough
[2014-05-14 20:35:18 -0400] phil_s_stein: Excellent! You're the best.
[2014-05-14 20:35:20 -0400] coderanger: What are you looking to do with it?
[2014-05-14 20:35:32 -0400] phil_s_stein: Don't really know yet.
[2014-05-14 20:35:42 -0400] kallistec: coderanger: unfortunately, there's two valid use cases that requires arrays to merge and not merge
[2014-05-14 20:35:44 -0400] phil_s_stein: Add some accounts to a bunch of machines.
[2014-05-14 20:36:14 -0400] coderanger: phil_s_stein: If you just want to make a script that pokes at the Chef API, it works nicely
[2014-05-14 20:36:55 -0400] phil_s_stein: I have a DB of accounts. I'm going to pull them out of the DB, feed them to chef, and then have all the nodes update.
[2014-05-14 20:37:15 -0400] phil_s_stein: So it PyChef like a good candidate.
[2014-05-14 20:37:20 -0400] ianblenke: https://github.com/go-chef < This. This excites me.
[2014-05-14 20:37:20 -0400] phil_s_stein: *seems
[2014-05-14 20:37:24 -0400] coderanger: phil_s_stein: Why not have Chef directly query your DB?
[2014-05-14 20:37:47 -0400] phil_s_stein: I didn't know it could do that. I'm a Chef n00b.
[2014-05-14 20:38:14 -0400] phil_s_stein: The SQL needed to pull the account info is quite ugly.
[2014-05-14 20:38:24 -0400] phil_s_stein: Can you point me to the DB API in Chef?
[2014-05-14 20:38:43 -0400] coderanger: phil_s_stein: Chef doesn't have one specifically, you would just use the gem for whatever database it is
[2014-05-14 20:39:05 -0400] coderanger: phil_s_stein: both mysql and postgres have ::ruby recipes in their respective cookbooks to install the needed gem
[2014-05-14 20:39:11 -0400] phil_s_stein: Ah. I'm not a Ruby guy either.
[2014-05-14 20:39:24 -0400] phil_s_stein: Great. Thanks for the tip, I'll check it out.
[2014-05-14 20:40:32 -0400] coderanger: phil_s_stein: Syncing the data with PyChef will totally work
[2014-05-14 20:40:50 -0400] coderanger: phil_s_stein: But I'm a fan of keeping truth in the places that are actually authoritative for it
[2014-05-14 20:41:23 -0400] phil_s_stein: Sure. One less glue script is fine with me. If I can get Chef to get the info directly - all the better.
[2014-05-14 20:41:35 -0400] coderanger: phil_s_stein: What DB is it?
[2014-05-14 20:41:40 -0400] phil_s_stein: mysql
[2014-05-14 20:42:25 -0400] coderanger: phil_s_stein: https://github.com/brianmario/mysql2 is the usual backend gem for that
[2014-05-14 20:42:46 -0400] coderanger: phil_s_stein: http://sequel.jeremyevans.net/ might make life a bit easier though
[2014-05-14 20:42:55 -0400] phil_s_stein: Very nice, thanks!
[2014-05-14 20:47:07 -0400] coderanger: Okay, straw poll, do I purposefully sabotage the security of my cookbook because node attributes are insecure because people won't want to use it if making a wrapper is 100% required?
[2014-05-14 20:47:52 -0400] gchristensen: coderanger: are you making it to get others to use it?
[2014-05-14 20:48:11 -0400] coderanger: Not really, but it would be nice
[2014-05-14 20:48:23 -0400] gchristensen: coderanger: is it feasible to make a wrapper that others could easily use or adapt?
[2014-05-14 20:48:38 -0400] coderanger: Sure, making the wrapper is super easy
[2014-05-14 20:48:47 -0400] coderanger: just sitting down to document that process
[2014-05-14 20:48:48 -0400] gchristensen: so make that and release that too :)
[2014-05-14 20:49:04 -0400] coderanger: but I'm pretty sure people will be all like "why can't I just put the password in a node attribute?"
[2014-05-14 20:49:07 -0400] coderanger: and then I'll be sad
[2014-05-14 20:49:40 -0400] phil_s_stein: coderanger, is this the basic idea: write a recipe using one of those DB APIs, push that recipe to my chef server, update the run list for the nodes, have the nodes run chef-client?
[2014-05-14 20:49:52 -0400] sauraus: coderanger if that makes you sad then the Jenkins cookbook is very sad for storing the jenkins.executor.private_key in plain text as a node attr on the Chef server :(
[2014-05-14 20:50:10 -0400] phil_s_stein: That doesn't sound good.
[2014-05-14 20:50:53 -0400] coderanger: phil_s_stein: Sure, thats a general overview of how to use chef
[2014-05-14 20:51:07 -0400] coderanger: phil_s_stein: I would probably add it to my base role/recipe rather than update everyt node though
[2014-05-14 20:51:28 -0400] coderanger: sauraus: The opscode jenkins cookbook and I have a long history of mutual hatred
[2014-05-14 20:51:34 -0400] sauraus: :D ROFL
[2014-05-14 20:51:40 -0400] phil_s_stein: that makes sense. I'm still learning.
[2014-05-14 20:52:03 -0400] ianblenke: we have little love for the opscode jenkins cookbook either.
[2014-05-14 20:52:28 -0400] sauraus: Anyone have a better one?
[2014-05-14 20:52:40 -0400] coderanger: sauraus: Mine? :)
[2014-05-14 20:52:51 -0400] coderanger: sauraus: https://github.com/balanced-cookbooks/jenkins
[2014-05-14 20:53:08 -0400] coderanger: sauraus: And https://github.com/balanced-cookbooks/ci and https://github.com/balanced-cookbooks/balanced-ci along with it
[2014-05-14 20:53:09 -0400] ianblenke: README so barren.
[2014-05-14 20:53:22 -0400] coderanger: ianblenke: I'm getting there, working on the rundeck one first
[2014-05-14 20:55:30 -0400] coderanger: You can see in balanced-ci how we do everything though
[2014-05-14 20:56:08 -0400] ianblenke: coderanger: Thanks! I'll take a look. Excited by your CI stuff and rundeck as well.
[2014-05-14 21:13:18 -0400] _automan: am I gonna have problems running chef server and clients on ec2 instances without first modifying the hostnames from the default ip-x-x-x-x ?
[2014-05-14 21:13:54 -0400] coderanger: _automan: No, the default names are fine
[2014-05-14 21:13:56 -0400] whaley: is there a way to globally ignore a certain depends from all metadata.rb files?  For instance, I know my target will be debian based in all cases and I want to not include a yum cookbook
[2014-05-14 21:14:04 -0400] coderanger: whaley: No
[2014-05-14 21:14:10 -0400] coderanger: whaley: Nor is there much value in that
[2014-05-14 21:14:18 -0400] _automan: apart from total confusion on my part. :)
[2014-05-14 21:14:55 -0400] whaley: coderanger:  ok, thanks.
[2014-05-14 21:15:01 -0400] sauraus: How can I query for tag on a node?
[2014-05-14 21:15:08 -0400] coderanger: sauraus: In what context
[2014-05-14 21:15:23 -0400] coderanger: whaley: the cookbook being a dependency doesn't mean any of its recipes execute
[2014-05-14 21:15:44 -0400] sauraus: In a cookbook I want to set specific attribute values based on the tag on a node
[2014-05-14 21:15:52 -0400] whaley: coderanger:  correct.  I just didn't want to chase down all of the yum cookbooks (playing with opsworks today and the feedback loop is slow)
[2014-05-14 21:16:01 -0400] paulmooring: sauraus tags are just attributes you can search for them same as anything search(:node, "tags:some_tag")
[2014-05-14 21:16:09 -0400] coderanger: whaley: Opsworks now supports berkshelf :-)
[2014-05-14 21:16:15 -0400] sauraus: oh nice
[2014-05-14 21:16:24 -0400] whaley: borkshefl?
[2014-05-14 21:16:35 -0400] whaley: (bad muppets reference...)
[2014-05-14 21:17:03 -0400] coderanger: sauraus: node.tags.include?('foo')
[2014-05-14 21:17:31 -0400] coderanger: sauraus: and in recipe context there is a top-level tagged?('foo')
[2014-05-14 21:17:43 -0400] sauraus: that easy? :)
[2014-05-14 21:18:03 -0400] paulmooring: what coderanger said is better than search if you only care about the local node
[2014-05-14 21:18:13 -0400] sauraus: local node only
[2014-05-14 21:18:17 -0400] coderanger: whaley: http://knowyourmeme.com/memes/ermahgerd
[2014-05-14 21:20:41 -0400] sauraus: Can Tags be key:value pairs?
[2014-05-14 21:21:11 -0400] coderanger: sauraus: Technically, though knife et al won't look at the value
[2014-05-14 21:21:19 -0400] paulmooring: sauraus no but you could just use regular attributes at that point
[2014-05-14 21:21:29 -0400] coderanger: sauraus: They are really just normal node atts, nothing special except a few nice helper functions
[2014-05-14 21:21:41 -0400] newbie259:  knife ec2 server create -s subnet-blah90 -N provisioner -r 'recipe[orchestration],recipe[orchestration::dns]' -f m1.small -g sg-blah90 --server-connect-attribute 50.112.XXX.XXX --associate-eip 50.112.XXX.XXX
[2014-05-14 21:21:47 -0400] newbie259: results in an error: Exception: NoMethodError: undefined method `50.112.184.63' for #<Fog::Compute::AWS::Server:0x007febedad080
[2014-05-14 21:21:55 -0400] newbie259: has anyone ever had this happen?
[2014-05-14 21:23:32 -0400] sauraus: So here is the bigger question :) I have dev & prod environment for multiple products, all products share a certain common base of services amongst each other. I can either create individual Chef environements for each product's dev/int/qa/perf/stage/prod or I can have generic dev/int/qa/perf/stage/prod envs on the Chef server and then use Tags on nodes to identify to which product they belong. Or should I do something else entirely?
[2014-05-14 21:26:08 -0400] coderanger: newbie259: You can't use --server-connet-attribute like that
[2014-05-14 21:26:33 -0400] newbie259: oh ok. how do i tell it to ssh to the eip rather than the private ip?
[2014-05-14 21:27:10 -0400] paulmooring: sauraus it's largely a matter of preference that largely depends on how/why you want to separate them
[2014-05-14 21:27:11 -0400] coderanger: newbie259: You would need to find the attribute name for it, I don't know that off hand though
[2014-05-14 21:27:32 -0400] sauraus: paulmooring thanks that's the debate right now ;)
[2014-05-14 21:27:47 -0400] paulmooring: you can override attributes in an environment, which is preferable to doing `tagged?` in the recipe because you generally don't ant env specific logic in the recipe
[2014-05-14 21:28:21 -0400] ianblenke: sauraus: take a look at berkflow or spork, something that will help you manage pinning cookbooks to an environment.
[2014-05-14 21:29:53 -0400] paulmooring: sauraus you could also just split them out in roles i.e. dev-web, qa-web, prod-web which also would allow setting attributes rather than in recipe logic
[2014-05-14 21:30:18 -0400] paulmooring: but tags and switches in the recipe would work if that fits your workflow
[2014-05-14 21:30:26 -0400] d_`: so, the opscode postgresql cookbook defines several attributes with string interpolation of attributes defined further up the file. is it possible to override these attributes in a wrapper cookbook?
[2014-05-14 21:30:44 -0400] sauraus: paulmooring I prefer the recipe logic because it gives the developers full control over what happens in each environment without being dependent on anyone outside
[2014-05-14 21:31:39 -0400] paulmooring: sauraus then that's what you should do ;)
[2014-05-14 21:31:39 -0400] coderanger: d_`: Not easily, you need to redefine them all :-(
[2014-05-14 21:34:07 -0400] d_`: coderanger: that's consistent with what I've been finding through experimentation, thanks for the confirmation
[2014-05-14 21:39:41 -0400] bb0x: hi guys
[2014-05-14 21:39:58 -0400] bb0x: any idea why couchdb is crashing with the following message
[2014-05-14 21:39:59 -0400] bb0x: heart: Wed May 14 18:26:27 2014: heart-beat time-out.
[2014-05-14 21:40:00 -0400] bb0x: heart: Wed May 14 18:26:32 2014: Executed "/usr/bin/couchdb -k". Terminating.
[2014-05-14 21:40:00 -0400] bb0x: heart_beat_kill_pid = 28421
[2014-05-14 21:40:00 -0400] bb0x: heart_beat_timeout = 11
[2014-05-14 21:40:46 -0400] bb0x: chef10, couchdb 1.0.4 (after i upgraded)
[2014-05-14 21:41:43 -0400] coderanger: bb0x: Can I go with "because couchdb sucks"?
[2014-05-14 21:41:54 -0400] coderanger: bb0x: Any reason you haven't upgraded your server? It is literally better in every way
[2014-05-14 21:42:40 -0400] bb0x: we are moving slowly to chef11 but currently we need to support chef10 too
[2014-05-14 21:42:52 -0400] coderanger: bb0x: chef server 11 supports both, you can upgrade independently
[2014-05-14 21:44:12 -0400] bb0x: any other fix except the upgrade ? I've tried to upgrade couch base but it looks the problem persists
[2014-05-14 21:44:37 -0400] coderanger: bb0x: I can't really say, I've purged most of that stuff from my brain as a defense mechanism
[2014-05-14 21:44:52 -0400] bb0x: :)
[2014-05-14 21:44:53 -0400] coderanger: bb0x: You would probably be better off asking on the couch ML or similar
[2014-05-14 21:45:08 -0400] coderanger: bb0x: I mean upgrading will fix it because it will remove Couch
[2014-05-14 21:48:54 -0400] coderanger: bb0x: It sounds like its a replication failure though?
[2014-05-14 21:50:21 -0400] bb0x: it could be since couch is replicated to another host
[2014-05-14 21:51:02 -0400] coderanger: bb0x: If I had a nickel for every time I got paged at 4AM because couch replication had failed, I would have bought couchbase inc and gutted it
[2014-05-14 21:59:51 -0400] gkra: Hey... If I have Community Chef server, and nobody has an admin account, how do I create one? can it be done from a shell on the box?
[2014-05-14 22:00:21 -0400] coderanger: gkra: Yes, find the admin.pem and use that with knife to create a user
[2014-05-14 22:01:35 -0400] gkra: that'd be somewhere under /opt/chef-server I take it
[2014-05-14 22:01:51 -0400] coderanger: gkra: I think its under /etc/chef but its been a while
[2014-05-14 22:02:23 -0400] coderanger: ahh, /etc/chef-server
[2014-05-14 22:02:25 -0400] coderanger: I was close
[2014-05-14 22:02:37 -0400] gkra: awesome, thanks :)
[2014-05-14 22:03:01 -0400] gkra: apparently one of my tasks in my new position is to find all the chef servers and ... chef them.
[2014-05-14 22:03:16 -0400] gkra: feels very meta. Chef managed by Chef.
[2014-05-14 22:03:28 -0400] mmzyk: Its what we do at Chef.
[2014-05-14 22:03:43 -0400] mmzyk: Hosted Chef is managed by an EC server, which was setup using chef solo.
[2014-05-14 22:03:50 -0400] rayrod2030: gkra: Who's cheffing the chef?
[2014-05-14 22:04:21 -0400] gkra: there's a Watchmen joke in there somewhere... I just don't have it.
[2014-05-14 22:04:44 -0400] ianblenke: CHEF ALL THE THINGS!
[2014-05-14 22:05:04 -0400] Ash: whoever is carrying 'the end is near' sign around is rorschach, watch out for that guy
[2014-05-14 22:05:18 -0400] rayrod2030: the converge is near
[2014-05-14 22:05:33 -0400] rayrod2030: never mind it failed
[2014-05-14 22:05:36 -0400] ianblenke: wow. such converge.
[2014-05-14 22:06:12 -0400] newbie259: weird. I never could get it to connect with ec2 server create
[2014-05-14 22:06:26 -0400] newbie259: but if i waited until it failed and then bootstrapped it, it connects fine
[2014-05-14 22:10:01 -0400] mmzyk: OSC 11.1.0 is officially released: http://www.getchef.com/blog/2014/05/14/open-source-chef-server-11-1-0/
[2014-05-14 22:10:36 -0400] mmzyk: Congrats to Jesse Nelson and Philip Hutchins, if they are around, as theyre the MVPs for this release. Thank them for their work when you see them.
[2014-05-14 22:11:36 -0400] alexbst: <B spheromak
[2014-05-14 22:38:41 -0400] _automan: "ERROR: SSL Validation failure connecting to host: 10.150.59.12 - hostname does not match the server certificate" ....
[2014-05-14 22:44:15 -0400] _automan: i presume leaving a chef server with default ip-x-x-x-x from amazon doesn't work so well.
[2014-05-14 22:44:37 -0400] coderanger: _automan: I mean it does, you just need an SSL certificate to match, which would be hard to come by
[2014-05-14 22:45:04 -0400] coderanger: _automan: You would need to make your own internal CA and issue it cert yourself
[2014-05-14 22:45:11 -0400] coderanger: Or self-sign
[2014-05-14 22:45:38 -0400] _automan: coderanger: well, it is self signed...
[2014-05-14 22:45:48 -0400] jtimberman: gkra: we manage Hosted Chef with an Enterprise Chef install. Enterprise Chef (and open source chef server) are managed with a command that wraps up chef-solo. :)
[2014-05-14 22:45:54 -0400] coderanger: _automan: Whats the hostname on the cert?
[2014-05-14 22:46:02 -0400] coderanger: jtimberman: mmzyk beat you to it
[2014-05-14 22:46:06 -0400] _automan: coderanger: on the chef server? ip-x-x-x-x
[2014-05-14 22:46:11 -0400] coderanger: _automan: No, on the cert
[2014-05-14 22:46:22 -0400] jtimberman: coderanger: oh i missed that :D
[2014-05-14 22:46:28 -0400] coderanger: jtimberman: TOO SLOW OLD MAN
[2014-05-14 22:46:37 -0400] _automan: coderanger: crt file?
[2014-05-14 22:46:40 -0400] coderanger: _automan: Yes
[2014-05-14 22:46:48 -0400] coderanger: _automan: Or PEM, whichever
[2014-05-14 22:46:51 -0400] jtimberman: coderanger: right?
[2014-05-14 22:47:09 -0400] gkra: jtimberman: nice :)
[2014-05-14 22:47:14 -0400] coderanger: _automan: The important thing is the CN value must match the hostname you are accessing the server with, which is "10.150.59.12"
[2014-05-14 22:48:01 -0400] _automan: coderanger: kinda what i thought.
[2014-05-14 22:48:28 -0400] coderanger: _automan: and that if it is self-signed, you need to distribute the public key to all nodes and set it as a trusted CA
[2014-05-14 22:49:00 -0400] _automan: coderanger: CN=ip-xx-xx-xx-xx.ec2.internal ... so that means the client has to use that name, correct?
[2014-05-14 22:49:27 -0400] coderanger: _automan: Yep, standard HTTPS rules
[2014-05-14 22:49:42 -0400] _automan: ok... creating a DNS domain for 'internal'... not much fun.
[2014-05-14 22:53:29 -0400] rayrod2030: anybody working in vpc?
[2014-05-14 22:54:29 -0400] newbie259: undefined method `each_section' for nil:NilClass
[2014-05-14 22:54:36 -0400] coderanger: rayrod2030: I do
[2014-05-14 22:54:37 -0400] newbie259: error happens on this call: with_fog_ec2_provisioner
[2014-05-14 22:54:50 -0400] newbie259: anyone else ever had this happen?
[2014-05-14 22:54:51 -0400] coderanger: _automan: That name is already resolvable within EC2
[2014-05-14 22:55:37 -0400] rayrod2030: coderanger: I've got a custom vpc set up with internal and external subnets.  My internal subnet route table is set to send all traffic to my nat instance.
[2014-05-14 22:56:08 -0400] rayrod2030: that's how my internal instances get to the internet.
[2014-05-14 22:56:21 -0400] rayrod2030: that's pretty much the recommended setup correct?
[2014-05-14 22:56:48 -0400] _automan: coderanger: Yah? cuz ip-x-x-x-x gives me the same error and ip-x-x-x-x.internal doesn't resolve
[2014-05-14 22:56:50 -0400] coderanger: rayrod2030: Yep
[2014-05-14 22:57:02 -0400] rayrod2030: hmm must be security groups or something.
[2014-05-14 22:57:29 -0400] _automan: oh ec2. ugh, noise
[2014-05-14 22:57:33 -0400] coderanger: rayrod2030: Make sure the "receive non-local traffic" is set on the nat mvs
[2014-05-14 22:57:36 -0400] coderanger: _automan: ?
[2014-05-14 22:59:47 -0400] ianblenke: that is something that xip.io is missing: nested wildcard SSL certs signed and exposed for things just like this. then again, maybe that isn't such a great idea security wise...
[2014-05-14 23:00:26 -0400] rayrod2030: coderanger: derp security groups. :)
[2014-05-14 23:00:52 -0400] newbie259: is jon not around today?
[2014-05-14 23:01:05 -0400] coderanger: newbie259: I haven't seen him lately
[2014-05-14 23:01:21 -0400] newbie259: drag. hes the man when it comes to these weird chef-metal errors
[2014-05-14 23:01:50 -0400] kisoku: Cope: I usually just give a linux kernel version
[2014-05-14 23:02:11 -0400] coderanger: newbie259: It is his project, so yeah, maybe just file a github ticket
[2014-05-14 23:02:44 -0400] newbie259: I usually like to go here first because the problem, normally, is between the chair and the keyboard
[2014-05-14 23:02:51 -0400] newbie259: no sense clogging up tickets for that
[2014-05-14 23:02:52 -0400] newbie259: :)
[2014-05-14 23:03:10 -0400] coderanger: newbie259: Yeah, asnyc channels are just good as a fallback :)
[2014-05-14 23:03:41 -0400] newbie259: cool. thx
[2014-05-14 23:04:41 -0400] kisoku: yay /win 15
[2014-05-14 23:04:54 -0400] coderanger: kisoku: Make it back home in one piece?
[2014-05-14 23:19:39 -0400] xeno: Why does source use erb instead of simple Ruby interpolation?  That seems like a silly alternative.  There must be a reason.
[2014-05-14 23:19:51 -0400] coderanger: xeno: You mean chef templates?
[2014-05-14 23:19:58 -0400] xeno: Yes.
[2014-05-14 23:20:13 -0400] coderanger: Ruby interpolation doesn't allow for things like loops, conditionals, etc
[2014-05-14 23:20:23 -0400] coderanger: or really anything other than variable expressions
[2014-05-14 23:20:51 -0400] coderanger: You also can't control the context
[2014-05-14 23:21:00 -0400] coderanger: (unless you use the %{} form)
[2014-05-14 23:21:10 -0400] xeno: Okay, I guess I cannot picture why not.  At any given point in ruby you can do str = "Something #{somethingElse}"
[2014-05-14 23:21:39 -0400] coderanger: xeno: You can't do this: "foo #{if bar}baz#{end}"
[2014-05-14 23:21:49 -0400] coderanger: Nor can you do loops
[2014-05-14 23:22:22 -0400] coderanger: or, again, anything other than simple expression substitution
[2014-05-14 23:22:26 -0400] xeno: How do you do that with ERB?
[2014-05-14 23:22:41 -0400] coderanger: <% if bar %>baz<% end %>
[2014-05-14 23:23:08 -0400] xeno: I guess I've not done that kind of thing in ERB.
[2014-05-14 23:23:15 -0400] xeno: Thank you.
[2014-05-14 23:23:25 -0400] coderanger: Similarly you see loops all the time in chef templates
[2014-05-14 23:23:52 -0400] coderanger: <%- @ports.each do |port| -%>proxy_port <%= port %>;<%- end -%>
[2014-05-14 23:33:01 -0400] a13x212: how would i use a node attribute in a only_if?
[2014-05-14 23:33:17 -0400] coderanger: a13x212: What are you trying to do?
[2014-05-14 23:36:29 -0400] a13x212: coderanger only_if ' #{node['mysql']['datadir']} '
[2014-05-14 23:36:33 -0400] a13x212: i want to do that
[2014-05-14 23:37:12 -0400] coderanger: a13x212: only_if { node['mysql']['datadir'] }
[2014-05-14 23:37:25 -0400] coderanger: a13x212: Beware that Ruby considers the empty string ('') to be true-y
[2014-05-14 23:37:49 -0400] coderanger: So you might want only_if { node['mysql']['datadir'] && !node['mysql']['datadir'].empty? }
[2014-05-14 23:38:57 -0400] a13x212: what i'm trying to do is verify if a directory is empty
[2014-05-14 23:40:00 -0400] a13x212: in a bash resource
[2014-05-14 23:40:11 -0400] coderanger: a13x212: only_if { Dir.entries(node['mysql']['datadir']).empty? }
[2014-05-14 23:40:24 -0400] sauraus: coderanger any docs on howto use https://github.com/balanced-cookbooks/jenkins :) :P
[2014-05-14 23:40:40 -0400] coderanger: sauraus: Look at the recipes in balanced-ci
[2014-05-14 23:42:00 -0400] a13x212: coderanger, thanks codranger, i thought it had to be done in bash
[2014-05-14 23:42:27 -0400] coderanger: a13x212: If you give not_if/only_if a string, it runs it like a command, if you give it a block, it runs it as ruby code
[2014-05-14 23:47:33 -0400] a13x212: great tip coderanger thanks
[2014-05-14 23:49:06 -0400] gowen: Hi, I am using the logstash 1.4 cookbook, and it worked once, however now I keep getting this: undefined method `[]' for nil:NilClass
[2014-05-14 23:49:08 -0400] gowen: 29>> embedded_es = node['logstash']['instance'][name]['enable_embedded_es'] || node['logstash']['instance']['default']['enable_embedded_es']
[2014-05-14 23:49:28 -0400] gowen: I have st these attributes, but am still struggling as to why it is failing.
[2014-05-14 23:50:29 -0400] kisoku: coderanger: I made it home and promptly caught a sinus cold
[2014-05-14 23:50:33 -0400] kisoku: :-/
[2014-05-14 23:50:42 -0400] kisoku: that's what I get for burning the candle at both ends
[2014-05-14 23:53:46 -0400] sauraus: coderanger thanks
[2014-05-14 23:54:56 -0400] spheromak: kisoku: thats no good

[2014-05-16 00:03:06 -0400] bricker`LA: What would you call a node whose purpose is to host small/experimental apps? I originally thought "sandbox" but that implies that it can be wiped out with no consequences... This node will host production applications
[2014-05-16 00:03:14 -0400] bricker`LA: maybe just "apps", but that's a little too vague
[2014-05-16 00:04:06 -0400] coderanger: bricker`LA: "thing that shouldn't exist"? :)
[2014-05-16 00:05:18 -0400] bricker`LA: I don't get it
[2014-05-16 00:05:52 -0400] coderanger: bricker`LA: Put each app on its own VM/container
[2014-05-16 00:06:12 -0400] coderanger: Having those kind of "junk" machines leads to organic creep over time
[2014-05-16 00:06:36 -0400] coderanger: If its small enough that you don't care about it, deploy it on Heroku :)
[2014-05-16 00:08:18 -0400] bricker`LA: hmmmm
[2014-05-16 00:09:08 -0400] bricker`LA: damn, you're right
[2014-05-16 00:11:53 -0400] MikeTLive: bricker`LA: i call it a compute node.
[2014-05-16 00:12:03 -0400] MikeTLive: if its junk, dont deploy.
[2014-05-16 00:12:54 -0400] MikeTLive: if its being deployed, its to be used, if its used it needs to be reliable, to be reliable there are at least 2 working (preferably 3 =N+2) and more like 7 or 8) and you are scaling on demand ...
[2014-05-16 00:13:33 -0400] MikeTLive: to MGR's dont ask me to deploy your junk, because if its junk, its already done, it just happened to die and delete itslef.
[2014-05-16 00:13:43 -0400] MikeTLive: saving us all the pain.
[2014-05-16 00:13:43 -0400] bricker`LA: lol
[2014-05-16 00:13:46 -0400] bricker`LA: thanks
[2014-05-16 00:25:59 -0400] MikeTLive: Saying 'what kind of an idiot doesn't know about the Yellowstone supervolcano' is so much more boring than telling someone about the Yellowstone supervolcano for the first time.
[2014-05-16 00:26:12 -0400] MikeTLive:  ah. now that is suitable for the community that i like.
[2014-05-16 00:26:28 -0400] MikeTLive: ++ and thats what i find here.
[2014-05-16 00:38:52 -0400] storme_away: question, is there an x86 build of the ChefDK for ubuntu, or only x64?
[2014-05-16 00:46:13 -0400] bricker`LA: coderanger: just for context, what's your role in chef development? Do you work at opscode/chef?
[2014-05-16 00:54:42 -0400] kisoku: when did all of the omnibus package names change format again ?
[2014-05-16 00:55:15 -0400] kisoku: used to be the os and version were part of the filename, ie. chef_11.10.4-1.ubuntu.12.04_amd64.deb
[2014-05-16 00:55:46 -0400] kisoku: since 11.12 it seems to be chef_11.12.4-1_amd64.deb regardless of os version
[2014-05-16 00:56:10 -0400] kisoku: which is mildly irritating for those of use who maintain a local mirror
[2014-05-16 00:59:13 -0400] coderanger: bricker`LA: I used to, but don't anymore
[2014-05-16 00:59:29 -0400] coderanger: bricker`LA: When I worked there, I was the frontend team lead
[2014-05-16 00:59:54 -0400] coderanger: bricker`LA: Now I'm just the cranky uncle that sticks around at parties
[2014-05-16 01:51:39 -0400] resno: so, is a m3.medium (aws) not good enough to run chef?
[2014-05-16 01:52:17 -0400] resno: 1 vcp 3gb of ram
[2014-05-16 01:52:30 -0400] resno: seems like the cpu is pegging @ 100%
[2014-05-16 01:55:13 -0400] dyer: What version of chef server?
[2014-05-16 01:55:19 -0400] resno: the most recent one
[2014-05-16 01:55:31 -0400] dyer: well one came out today
[2014-05-16 01:55:36 -0400] dyer: 11.1 ?
[2014-05-16 01:55:41 -0400] resno: i just set up the machin enow
[2014-05-16 01:55:49 -0400] resno: looking
[2014-05-16 01:56:13 -0400] resno: 11.1.0
[2014-05-16 01:57:04 -0400] dyer: ah, we are running on a large, and were running into cpu issues which seem fixed in 11.1
[2014-05-16 01:57:10 -0400] dyer: Pretty sure our problem was related to https://tickets.opscode.com/browse/CHEF-3921
[2014-05-16 01:57:15 -0400] dyer: which was fixed in 11.1
[2014-05-16 01:57:36 -0400] resno: hmm, heh
[2014-05-16 01:57:53 -0400] daniel6temes: Good morning everyone!
[2014-05-16 01:58:52 -0400] resno: dyer: it seems like its randomly reperaing the unicorn workers
[2014-05-16 01:59:18 -0400] mmzyk: resno we have machine recommendations somewhere I think.
[2014-05-16 01:59:25 -0400] resno: hey mmzyk
[2014-05-16 01:59:31 -0400] daniel6temes: I am having problems with a fresh install a of chef server. I was here some hours ago but i couldn't solve it yet. I am following that manual: http://docs.opscode.com/install_server.html but once I access to the web interface, I cannot login with the default admin pass.
[2014-05-16 01:59:46 -0400] resno: mmzyk: i read a small would be suitable for "testing" enviroemnts
[2014-05-16 02:00:09 -0400] mmzyk: I have spun it up on a small before.
[2014-05-16 02:00:25 -0400] mmzyk: So its possible youre running into an issue.
[2014-05-16 02:00:32 -0400] daniel6temes: Is there any additional step I should perform?
[2014-05-16 02:00:50 -0400] mmzyk: I was the lead on getting this release out, so if something seems amiss, ping me or open a ticket at tickets.opscode.com
[2014-05-16 02:01:10 -0400] resno:  [2014-05-16T02:00:56.708844 #524] ERROR -- : reaped #<Process::Status: pid 2539 exit 1> worker=1
[2014-05-16 02:01:14 -0400] mmzyk: Or talk to me Wednesday, assuming you make it out to Triangle DevOps, resno
[2014-05-16 02:01:41 -0400] mmzyk: resno What log is that in?
[2014-05-16 02:01:55 -0400] resno: just doing a chef-server-ctl tail
[2014-05-16 02:02:21 -0400] mmzyk: it should give you a heading telling you what log that is coming from.
[2014-05-16 02:02:51 -0400] mmzyk: You can also give it a subsystem to watch just a single log, fyi: chef-server-ctl tail chef-server-webui for instance
[2014-05-16 02:03:10 -0400] mmzyk: Or look in /var/log/chef-server/ and see all the logs. I think thats the right path.
[2014-05-16 02:04:37 -0400] mmzyk: resno Heres the page where we list recommended minimun requirements for a server: http://docs.opscode.com/chef_system_requirements.html
[2014-05-16 02:04:46 -0400] mmzyk: but yeah, for testing it should work on less than that.
[2014-05-16 02:06:04 -0400] mmzyk: daniel6temes Interesting, youre the second report Ive seen of this.
[2014-05-16 02:06:05 -0400] resno: thats what i thought.
[2014-05-16 02:06:39 -0400] mmzyk: daniel6temes See if the workaround works for you here: https://tickets.opscode.com/browse/CHEF-5301
[2014-05-16 02:06:58 -0400] mmzyk: daniel6temes If you could comment about what you find on that ticket, I would appreciate it.
[2014-05-16 02:08:54 -0400] daniel6temes: Ok, thanks I will check now. Do you prefer I comment on the ticket or we can chat here?
[2014-05-16 02:09:31 -0400] mmzyk: Please comment on the ticket daniel6temes. Its late in the evening for me, so Im about to log off, or else I would chat here. :)
[2014-05-16 02:09:59 -0400] mmzyk: Even if you figure it out, please leave a comment, as I could use the data point, daniel6temes. Thanks.
[2014-05-16 02:10:21 -0400] mmzyk: Are you on aws by any chance, daniel6temes?
[2014-05-16 02:10:37 -0400] daniel6temes: Yes, I am.
[2014-05-16 02:10:56 -0400] daniel6temes: I tested installing the server on ubuntu and amazon linux.
[2014-05-16 02:11:20 -0400] mmzyk: Okay. Sounds like the same setup that the reporter of the ticket saw. I expect his work around will work for you then.
[2014-05-16 02:11:56 -0400] mmzyk: If you could still comment on the ticket and note that youre on aws, that will be helpful.
[2014-05-16 02:12:23 -0400] daniel6temes: Just a silly question, what is the proper way to restart chef server? I-ve seen there's some services runing
[2014-05-16 02:12:27 -0400] mmzyk: I wonder if in this release weve somehow run afoul of a security setting in aws. Not sure what change would have caused that though. Well track it down.
[2014-05-16 02:12:37 -0400] mmzyk: chef-server-ctl restart
[2014-05-16 02:12:47 -0400] mmzyk: Chef server has a cmd line tool chef-server-ctl
[2014-05-16 02:13:09 -0400] daniel6temes: txs
[2014-05-16 02:13:10 -0400] mmzyk: If you type that it should show you the options you can do.
[2014-05-16 02:13:36 -0400] mmzyk: If you make changes to config, such as in chef-server.rb, youll need to do a chef-server-ctl reconfigure to get it to be picked up.
[2014-05-16 02:14:19 -0400] daniel6temes: that's good to know.
[2014-05-16 02:14:23 -0400] daniel6temes: :)
[2014-05-16 02:14:37 -0400] daniel6temes: I will follow up on the ticket. I don't want to keep you doing overtime ;)
[2014-05-16 02:14:45 -0400] mmzyk: All right, Im out for the evening. daniel6temes and resno, if you dont get your issues figured out feel free to seek me out or open a ticket. Ill respond as I can.
[2014-05-16 02:15:17 -0400] daniel6temes: good night
[2014-05-16 02:16:06 -0400] resno: mmzyk: ok later
[2014-05-16 02:16:08 -0400] resno: thanks
[2014-05-16 02:16:49 -0400] mmzyk: np. Its my job, and every issue we solve means someone else doesnt have to deal with it.
[2014-05-16 02:43:04 -0400] bricker`LA: arg... I am confused by VMWare. I'm trying to add extra space to a VM, so I increased the side of the hard disk and added a second hard disk... neither one of those made any difference on the VM when checking with `df`. Anybody familiar with VMWare think they can help?
[2014-05-16 02:43:11 -0400] bricker`LA: size*
[2014-05-16 02:43:41 -0400] eblack: hi friends
[2014-05-16 04:25:31 -0400] marius: why chef-client -L file location is not overwritting one which is in client.rb ?
[2014-05-16 05:16:03 -0400] MikeTLive: |-)  zzz ZZZ
[2014-05-16 05:20:15 -0400] dgarstang: Ugh! "<p>Cannot serve request to /cookbooks on this server</p>" from knife upload!
[2014-05-16 05:25:24 -0400] bricker`LA: Do you guys number your nodes, like web001? I'm trying to figure out why our setup uses this convention
[2014-05-16 05:25:27 -0400] bricker`LA: (I didn't set it up)
[2014-05-16 05:27:59 -0400] dgarstang: knife makes me want to tear my hair out!
[2014-05-16 05:35:57 -0400] dgarstang: trying to get the magic undocumented perfect combination of stuff that allows knife to work in the ways espoused by the community is almost impossible.
[2014-05-16 05:52:23 -0400] kisoku: hrm
[2014-05-16 05:52:31 -0400] dgarstang: indeed
[2014-05-16 05:52:41 -0400] kisoku: /opt/chefdk/embedded/bin/ruby: /lib/libc.so.6: version `GLIBC_2.14' not found (required by /opt/chefdk/embedded/lib/libruby.so.2.1)
[2014-05-16 05:52:54 -0400] kisoku: this is on an up-to-date precise box
[2014-05-16 06:09:31 -0400] dgarstang: who's using chef_repo_path ?
[2014-05-16 06:13:22 -0400] bricker`LA: Should a node map exactly to a VM? And if you want to replace a VM you should use a new node? If that's the case, how do you duplicate a node?
[2014-05-16 06:23:38 -0400] jesse__: hey all, I'm looking for a way to merge chef attributes from two separate cookbook attribute files.  More specifically, I have one cookbook that creates an array of the IP addresses of our standard syslog servers, and then I have a second cookbook that needs to append a third IP address to that array.  Any ideas.  Google has NOT been my friend tonight
[2014-05-16 06:30:12 -0400] coderanger: jesse__: Don't use an array
[2014-05-16 06:30:22 -0400] coderanger: jesse__: See https://coderanger.net/2013/06/arrays-and-chef/
[2014-05-16 06:36:57 -0400] jesse__: thanks @coderanger, I'll give that a shot
[2014-05-16 06:36:58 -0400] dgarstang: ugh. are role_path and so on relative to chef_repo_path or absolute?
[2014-05-16 06:41:01 -0400] dgarstang: in knife.rb, chef_repo_path( :path => "#{home_dir}/git/" ) ... yet when I'm in the cookbooks directory a "knife list cookbooks" yields "ERROR: Attempt to use relative path 'cookbooks' when current directory is outside the repository pat". I am so confused and frustrated.
[2014-05-16 06:42:08 -0400] dgarstang: now "<p>Cannot serve request to /cookbooks on this server</p>"
[2014-05-16 06:42:52 -0400] dgarstang: not sure what's worse. spending 8 hours during the day trying to get this to work, or four hours in my evening.
[2014-05-16 06:45:44 -0400] dgarstang: "ERROR: Attempt to use relative path 'cookbooks' when current directory is outside the repository path" .... not true
[2014-05-16 07:01:42 -0400] jesse__: @coderanger: that totally worked.  Thanks!
[2014-05-16 07:24:24 -0400] mosez: knows somebody a good way to detect with chef if the desktop system got kde or gnome running?
[2014-05-16 07:25:35 -0400] TotalEvil: hi2all
[2014-05-16 07:29:59 -0400] TotalEvil: can someone help with set dynamical attribute in recipe?
[2014-05-16 07:30:20 -0400] TotalEvil: i need make something like rand(59) and output should be an attribute
[2014-05-16 07:31:54 -0400] ocholetras: http://pastebin.com/KAdvvqiq
[2014-05-16 07:31:56 -0400] ocholetras: is that normal
[2014-05-16 07:32:03 -0400] ocholetras: in the new chef version?
[2014-05-16 07:32:08 -0400] ocholetras: 3 examples from test are failing
[2014-05-16 07:32:20 -0400] ocholetras: API endpoint with multiple versions of multiple cookbooks with no environment constraints from a non-default environment when fetching cookbooks should respond with 200 OK and latest versions of ALL cookbooks
[2014-05-16 07:33:47 -0400] dgarstang: great, more chef issues. {"class":"org.apache.sling.api.resource.PersistenceException","message":"Unable to commit changes to session."},"status.code":500,"status.message":"org.apache.sling.api.resource.PersistenceException: Unable to commit changes to session.","title":"Error while processing /sandboxes","referer":""}
[2014-05-16 09:02:15 -0400] _pingu: Can I tell Leibniz to use the kitchen.yml? Or how can I tell leibniz to use the vm box from my box_url, share coockbooks and tell something like environment=staging?
[2014-05-16 09:12:07 -0400] whiteadam: _pingu: I think it will use any box you have previously imported to vagrant
[2014-05-16 09:12:18 -0400] whiteadam: _pingu: but I don't have all that much experience with it... yet
[2014-05-16 09:17:45 -0400] _pingu: whiteadam: seems like leibniz by default it tries to download boxes from a cloud. untiol now i don't see a way to override that behaviour.
[2014-05-16 09:19:56 -0400] whiteadam: _pingu: ohh, I see what you mean.
[2014-05-16 09:20:20 -0400] whiteadam: _pingu: Yeah, I wish they would add a few more features, or at least pull the current requests into the repo
[2014-05-16 09:25:23 -0400] _pingu: whiteadam: do you know if cucumber-chef is an alternative to leibniz? just try to get an overview, but it's difficult. there are so many tools, gems... .
[2014-05-16 09:27:25 -0400] whiteadam: _pingu: I know, I am actually trying to navigate that space myself right now. I really want to use Cucumber because the rest of my team is... not great.
[2014-05-16 09:28:23 -0400] whiteadam: _pingu: I really like the vision of Leibniz, but it's not there yet.
[2014-05-16 09:31:02 -0400] _pingu: whiteadam: most tools seem like at the beginning. version 0.x or 1.x. leibniz, too.
[2014-05-16 09:45:53 -0400] whiteadam: _pingu: Did you read the Infrastructure Testing book?
[2014-05-16 09:46:21 -0400] whiteadam: Test-Driven Infrastructure with Chef I think it was
[2014-05-16 09:47:16 -0400] _pingu: yes. i think i have to read some parts again, but it does not answer all questions.
[2014-05-16 09:50:19 -0400] whiteadam: _pingu: That's exactly what I said!
[2014-05-16 09:50:47 -0400] whiteadam: _pingu: It started off really good, especially in the philosophy section, but I felt like it broke down in the examples/implementation
[2014-05-16 09:53:39 -0400] _pingu: whiteadam: i am just in a call..
[2014-05-16 09:54:04 -0400] whiteadam: _pingu: With Oabama?
[2014-05-16 09:54:20 -0400] _pingu: :-)
[2014-05-16 10:07:31 -0400] jonlives: _pingu: you might wanna prod Cope, he's the author of both book and leibniz :)
[2014-05-16 10:16:31 -0400] whiteadam: jonlives: Where that fool at!?
[2014-05-16 10:18:32 -0400] _pingu: whiteadam: i'am going to lunch now. maybe we can exchange our experiences later
[2014-05-16 10:19:25 -0400] whiteadam: _pingu: sure, i'll be around
[2014-05-16 10:26:07 -0400] mattt: jtimberman: ping
[2014-05-16 11:15:26 -0400] brauliobo_: someara: how can I report issues to nginx cookbook? it seems issues are disabled on github
[2014-05-16 11:16:47 -0400] brauliobo_: someara: i have overwriten the default site with the http://community.opscode.com/cookbooks/nginx-fallback-to-apache. but on each deploy nginx will overwrite it.... I don't know how to avoid that
[2014-05-16 11:29:33 -0400] iroller_: brauliobo_: try https://tickets.opscode.com/browse/COOK to report an issue, but first I'd suggest asking in chef maillist (https://wiki.opscode.com/display/chef/Mailing+Lists)
[2014-05-16 13:10:06 -0400] srenatus: anyone else having problems with node[ipaddress] ending up as [] in a recent chef version?
[2014-05-16 13:56:08 -0400] comjf: I am unable to download chef when provisioning new servers
[2014-05-16 13:56:14 -0400] comjf: is this a known issue right now?
[2014-05-16 13:56:35 -0400] comjf: happened between 4pm yesterday EST and now
[2014-05-16 13:57:03 -0400] comjf: using knife-solo, that apparently downloads https://www.opscode.com/chef/metadata?v=11.14.0.alpha.2&prerelease=false&nightlies=false&p=ubuntu&pv=12.04&m=x86_64
[2014-05-16 13:57:07 -0400] comjf: which is 404
[2014-05-16 13:58:09 -0400] teukka: comjf: by default it downloads the same version that you have on your workstation
[2014-05-16 13:58:20 -0400] teukka: it *tries* to download, that is
[2014-05-16 14:00:10 -0400] teukka: comjf: you can specify the version with --bootstrap-version
[2014-05-16 14:00:32 -0400] teukka: `latest` might be accepted too. not sure
[2014-05-16 14:05:40 -0400] mmzyk: comjf So its constructing that url based on the omnitruck api: http://docs.opscode.com/api_omnitruck.html
[2014-05-16 14:05:56 -0400] mmzyk: I assume you meant chef-solo. Im not sure what knife-solo is, unless I missed something.
[2014-05-16 14:06:59 -0400] wiscas: hello, I'm running chef 10.10.x and I'm having issues with opscode aws recipe for undefined method on state_attrs
[2014-05-16 14:07:10 -0400] wiscas: undefined method `state_attrs' for #<Class:0x7f645998a228>
[2014-05-16 14:07:17 -0400] wiscas: any clues on how to mitigate this? :(
[2014-05-16 14:07:27 -0400] mmzyk: comjf Also, 11.14.0 certainly isnt out yet. Are you wanting that version for some reason?
[2014-05-16 14:19:08 -0400] srenatus: hmm what could be wrong it this fails with "top-level JSON object must be a hash or an array (actual: nilClass)?  >> chef-apply -e 'remote_file("/tmp/pubkey.gpg") {source ["http://repos.sensuapp.org/apt/pubkey.gpg"]}' -l debug
[2014-05-16 14:19:17 -0400] srenatus: looks so harmless and works on all but one machine...
[2014-05-16 14:19:24 -0400] srenatus: :7  so weird.
[2014-05-16 14:21:23 -0400] mmzyk: wiscas Based on a quick search, I believe state_attrs wasnt added until 10.14
[2014-05-16 14:22:38 -0400] mmzyk: srenatus That would seem to indicate some kind of issue with that machine, or chef on that machine, no? Maybe the client installed on that machine is different?
[2014-05-16 14:24:31 -0400] srenatus: mmzyk: 11.10.4 on both, omnibus package
[2014-05-16 14:31:01 -0400] jtimberman: wiscas: you need to upgrade Chef. state_attrs was added in 10.14.0 (also available in 11+)
[2014-05-16 14:31:31 -0400] jtimberman: version 10.10 is two years old
[2014-05-16 14:31:51 -0400] wiscas: yeah its the one i've been provided with
[2014-05-16 14:33:07 -0400] jtimberman: you can't upgrade?
[2014-05-16 14:33:18 -0400] jtimberman: why?
[2014-05-16 14:33:26 -0400] jtimberman: at least upgrade to a later 10.x release
[2014-05-16 14:33:32 -0400] jtimberman: if not 11
[2014-05-16 14:33:45 -0400] srenatus: ah there was an empty file in /var/chef/cache/remote_file/http___repos[...].json that caused that problem
[2014-05-16 14:33:47 -0400] jtimberman: there's heaps of bugs fixed in the last two years, not to mention improvements
[2014-05-16 14:34:34 -0400] srenatus: more problems... apparently, a chef-run with read-only / (by accident) screws up your /var/chef/cache
[2014-05-16 14:34:57 -0400] mmzyk: comjf As far as I can tell, 11.14.0.alpha.2, the release being requested, isnt yet available. Its tagged, but it doesnt appear a build has been available, which would explain the 404 youre seeing.
[2014-05-16 14:51:02 -0400] srenatus: turns out this https://github.com/opscode/chef/blob/master/lib/chef/provider/remote_file/cache_control_data.rb#L148  explodes when the JSON file on disk is empty
[2014-05-16 14:52:45 -0400] samdunne: Hey, is there berkshelf api issues? I've had intermitted connectivity since yesterday
[2014-05-16 14:53:12 -0400] samdunne: dyer: did you get an update?
[2014-05-16 14:53:26 -0400] dyer: Hey, negative
[2014-05-16 14:53:42 -0400] mmzyk: samdunne that should be resolved http://status.opscode.com/
[2014-05-16 14:53:56 -0400] dyer: that was two days ago
[2014-05-16 14:54:01 -0400] mmzyk: http://www.getchef.com/blog/2014/05/15/api-berkshelf-com-outage-and-corrective-actions/
[2014-05-16 14:54:01 -0400] samdunne: mmzyk: that was on the 14th
[2014-05-16 14:54:05 -0400] dyer: we were still seeing issues yesterday
[2014-05-16 14:54:11 -0400] samdunne: And I am today still
[2014-05-16 14:54:15 -0400] samdunne: Right now in fact
[2014-05-16 14:54:27 -0400] dyer: Yea, I dont think its resolved
[2014-05-16 14:54:38 -0400] dyer: this problem seems to be related to the community site
[2014-05-16 14:54:44 -0400] dyer: rather then the berkshelf api
[2014-05-16 14:54:59 -0400] lxsameer: hey guys
[2014-05-16 14:55:11 -0400] chef771: hi
[2014-05-16 14:55:15 -0400] mmzyk: okay. Ill report it back internally and have someone look into it, dyer,  samdunne
[2014-05-16 14:55:15 -0400] lxsameer: what is node_name in .chef/knife.rb
[2014-05-16 14:55:19 -0400] samdunne: dyer: agreed. I can hit the api, but it doesn't seem to get to the community site
[2014-05-16 14:55:28 -0400] samdunne: Thanks mmzyk
[2014-05-16 14:55:46 -0400] dyer: yea, I got 504's a couple of times yesterday while I was trying to mirror some stuff off the community site
[2014-05-16 14:56:00 -0400] dyer: this was me using 'knife site download'
[2014-05-16 14:56:27 -0400] samdunne: I was using berks vendor
[2014-05-16 14:56:47 -0400] dyer: I bet nginx logs show a s**t ton of 504's recently
[2014-05-16 14:57:16 -0400] jtimberman: samdunne: dyer: can you pastebin/gist output logs of what you're seeing from berks, maybe with debug logging enabled?
[2014-05-16 14:58:00 -0400] samdunne: jtimberman: let me check. I have to ok sending debug logs externally
[2014-05-16 14:58:55 -0400] chef771: Guys,
[2014-05-16 14:58:56 -0400] chef771: Can anyone post please links to material for Chef beginners, beyond "Google" that.
[2014-05-16 14:59:04 -0400] chef771: Video / guides. Thanks
[2014-05-16 14:59:39 -0400] srenatus: chef771: there's #learnchef and there's a chef fundamentals webinar series
[2014-05-16 14:59:42 -0400] samdunne: chef771: did you try the material on the offical site?
[2014-05-16 14:59:48 -0400] samdunne: It's pretty good
[2014-05-16 15:01:53 -0400] jtimberman: samdunne: if not debug, at least the error output you're seeing
[2014-05-16 15:02:24 -0400] jtimberman: i was just able to run 'berks' against one of my repos..
[2014-05-16 15:02:56 -0400] samdunne: Sec
[2014-05-16 15:03:15 -0400] chef771: Of course I dig the offical .. but I'm looking for something more in style like CBT Nuggets
[2014-05-16 15:03:45 -0400] chef771: since they didn't post curse for chef , i'm looking for videos
[2014-05-16 15:05:43 -0400] gyoza: best guide that i've seen so far is writing cookbooks the berkshelf way
[2014-05-16 15:06:03 -0400] gyoza: and it teaches you good fundamentals
[2014-05-16 15:06:08 -0400] mmzyk: chef771 If you want videos, learn chef has a lot of them
[2014-05-16 15:06:10 -0400] mmzyk: https://learnchef.opscode.com/concepts/
[2014-05-16 15:06:16 -0400] mmzyk: Each concept has a video, I believe.
[2014-05-16 15:06:17 -0400] dyer: jtimberman, I am not in a position to reproduce easily right now.  I asked one of my colleagues to see if he can
[2014-05-16 15:06:44 -0400] mmzyk: https://learnchef.opscode.com/additional-resources/ < See the Chef fundamentals section. Lots of links to videos.
[2014-05-16 15:07:12 -0400] double_p: or just getchef and opscode youtube channel
[2014-05-16 15:08:32 -0400] jtimberman: dyer: api.berkshelf.com/status will report the app status. the main thing in that is the "cache_status", which will be either "warming" or "ok"
[2014-05-16 15:08:59 -0400] jtimberman: if it is "ok" and berks is throwing an error, we'd need to see the output to better debug.
[2014-05-16 15:09:13 -0400] dyer: @jtimberman, but the error seems to be downloading the actual cookbook from the community site
[2014-05-16 15:09:37 -0400] jtimberman: ok that's the error i'd need to see :)
[2014-05-16 15:09:40 -0400] gyoza: i wanna see it too
[2014-05-16 15:09:41 -0400] gyoza: lol
[2014-05-16 15:09:48 -0400] jtimberman: do you know which cookbook?
[2014-05-16 15:09:55 -0400] dyer: maybe my understanding of the role Berkshelf plays in theprocess, but I was under the impression that its just telling you where to get version x.y.z of cookbook foo, then you goto that location to get said cookbook
[2014-05-16 15:10:12 -0400] dyer: @jtimberman, random, only commonality is the community site for me
[2014-05-16 15:11:15 -0400] gyoza: so much smoke outside
[2014-05-16 15:11:15 -0400] gyoza: :(
[2014-05-16 15:11:21 -0400] gyoza: being outside hurts mah lungs
[2014-05-16 15:11:33 -0400] dyer: https://gist.github.com/johntdyer/56f3d438b4c279bbc77d
[2014-05-16 15:11:56 -0400] dyer: @jtimberman, some internal chat logs from a buddy, shows how many times he was hit over the course of the last 367 hours
[2014-05-16 15:12:20 -0400] dyer: xfs, chef_handler, activemq, ect
[2014-05-16 15:12:30 -0400] dyer: totally intermittent
[2014-05-16 15:13:12 -0400] dyer: like I said, I am not in a place to reproduce right now, but I have a msg out to him to see if he can
[2014-05-16 15:13:15 -0400] dyer: hopefully he is able
[2014-05-16 15:13:49 -0400] dyer: but my guess is you guys check your access lots on nginx you will see a big uptick in 5xx errors recently
[2014-05-16 15:13:59 -0400] dyer: :s/lots/logs
[2014-05-16 15:14:26 -0400] gyoza: are you sure that system can reach that url?
[2014-05-16 15:14:32 -0400] dyer: yes
[2014-05-16 15:14:51 -0400] dyer: build 1 fails on xfs, we retry, build 2 fails on chef_handler, but passes on xfs
[2014-05-16 15:15:02 -0400] gyoza: weird
[2014-05-16 15:15:06 -0400] dyer: build 3 fails on activemq, but gets chef_handelr
[2014-05-16 15:15:38 -0400] dyer: I'll try to get the debug log, but from info level it certainly seem to be failing downloading the actual cookbooks
[2014-05-16 15:19:23 -0400] dyer: gyoza, so much smoke?
[2014-05-16 15:19:29 -0400] dyer: You in China or San Diego ?
[2014-05-16 15:22:14 -0400] samdunne: Mine seems back up
[2014-05-16 15:22:18 -0400] samdunne: APologies for disappearing
[2014-05-16 15:24:25 -0400] jtimberman: dyer: ugh, transient errors are the worst :(
[2014-05-16 15:24:28 -0400] jtimberman: I'm sorry :(
[2014-05-16 15:24:45 -0400] dyer: yea, they suck for sur e
[2014-05-16 15:25:25 -0400] samdunne: dyer: are you behind a corporate firewall?
[2014-05-16 15:25:33 -0400] dyer: negative ghostrider
[2014-05-16 15:25:46 -0400] samdunne: Well that kills that idea
[2014-05-16 15:48:27 -0400] sarkis: hey guys, so i am getting an error, which seems to have started with 11.12.4
[2014-05-16 15:48:48 -0400] sarkis: it complains that the application recipe which i am running knife-solo from can't be found..
[2014-05-16 15:49:07 -0400] sarkis: RecipeNotFound: could not find recipe app for cookbook chef-cookbooks-rails
[2014-05-16 15:49:49 -0400] sarkis: thats the app cookbook itself and i do have metadata in my Berksfile and do see it getting loaded: Using chef-cookbooks-rails (0.1.0) from source at .
[2014-05-16 15:49:53 -0400] sarkis: what gives...
[2014-05-16 15:59:37 -0400] juliancdunn: sarkis: you're sure the cookbook contains a recipe called "app"
[2014-05-16 16:12:04 -0400] sanguisdex: is it a bacd practice to include ssl certs in a the files of a cookbook?
[2014-05-16 16:12:24 -0400] hot_karl: hi everyone
[2014-05-16 16:12:25 -0400] double_p: sanguisdex: certs are public data
[2014-05-16 16:12:41 -0400] double_p: sanguisdex: different thing with private-keys
[2014-05-16 16:14:11 -0400] sanguisdex: double_p: I should state that this is a cookbook that is specific for a set of servers and it won't be released publicly
[2014-05-16 16:14:22 -0400] hot_karl: does anyone have suggestions or examples of how to authenticate with a chef script to jenkins after you have set it to require AD authentication?  I have gotten the script to properly setup AD authentication via groovy but once that gets set I can never run my script again since it requires authentication to modify the server
[2014-05-16 16:14:40 -0400] sanguisdex: double_p: encrypted databags for the key?
[2014-05-16 16:15:53 -0400] double_p: sanguisdex: yep
[2014-05-16 16:15:58 -0400] double_p: "or by other means"
[2014-05-16 16:22:38 -0400] jmreicha: Anybody doing Chef and Sensu?
[2014-05-16 16:22:54 -0400] sarkis: juliancdunn: thanks, stupid mistake
[2014-05-16 16:23:01 -0400] sarkis: jmreicha: i plan too :P
[2014-05-16 16:23:07 -0400] sarkis: to*
[2014-05-16 16:23:21 -0400] jmreicha: sarkis: Ah nice.  Don't suppose you've made any progress on it yet?
[2014-05-16 16:23:31 -0400] sarkis: not yet
[2014-05-16 16:24:18 -0400] jmreicha: sarkis:  Ah bummer.  I'm stuck right now, nobody is on in #sensu right now :(
[2014-05-16 16:32:54 -0400] poolpog: hello nice people....
[2014-05-16 16:33:15 -0400] poolpog: regarding Ubuntu 14.04 and Apache2.. this: https://github.com/onehealth-cookbooks/apache2/pull/130
[2014-05-16 16:33:59 -0400] poolpog: is that merged, yet, into the released cookbook?
[2014-05-16 16:35:02 -0400] brauliobo_: poolpog: no, unfortunetely
[2014-05-16 16:35:08 -0400] brauliobo_: you have to use the apache 2.4 fork
[2014-05-16 16:35:31 -0400] brauliobo_: it is this one: https://github.com/CIRANDAS/noosfero-ecosol/blob/master/plugins/fbes/lib/fbes_plugin/queries.rb
[2014-05-16 16:36:07 -0400] brauliobo_: specify on the Berksfile
[2014-05-16 16:38:09 -0400] poolpog: ok, thank you
[2014-05-16 16:39:09 -0400] poolpog: actually, question: is it worthwhile for me to just backport or "rewind" changes from the ubutnu 14.04 patches into a local cookbook rather than use that fork
[2014-05-16 16:39:32 -0400] poolpog: hmm, never mind, I'll figure it out, but if anyone has any thoughts on this sucker, i'm all ears
[2014-05-16 16:40:02 -0400] dgarstang: i just did a gem install knife-block and it's not showing up in my help output. :(
[2014-05-16 16:42:55 -0400] dgarstang: knife-block (0.1.0) shows up in my gem list output but there's no block command available to me.
[2014-05-16 16:43:48 -0400] sarkis: k this kinda sucks.. we have different application cookbooks for each of our apps, however, all the users need to be the same.. i don't see a way to do this without repeating in every app cookbook
[2014-05-16 16:44:09 -0400] sarkis: i'd have to add databags of the users to all the app cookbooks
[2014-05-16 16:45:06 -0400] sarkis: i tried creating a "common" cookbook that all the app cookbooks can just include, but databags only work because of knife solo i believe so they have to be in the app cookbook :(
[2014-05-16 16:46:17 -0400] dgarstang: seems knife block does not work
[2014-05-16 16:47:19 -0400] jbz: dgarstang: might also try chefvm
[2014-05-16 16:48:18 -0400] dgarstang: jbz: soooo much software. Thanks, will try
[2014-05-16 16:49:23 -0400] sarkis: would chef-client -z give me what i want?
[2014-05-16 16:49:36 -0400] sarkis: be able to use data_bags inside of a cookbook im including
[2014-05-16 16:49:55 -0400] sarkis: wondering if it's worth switching over from chef-solo
[2014-05-16 16:51:20 -0400] dgarstang: wtf? after installing knife-block as a gem the /opt/chef/embedded/lib/ruby/gems/1.9.1/gems/knife-block-0.1.0/lib/knife-block.rb file is 0 bytes.
[2014-05-16 16:52:07 -0400] dgarstang: and ... so is the one on github. Good grief.
[2014-05-16 16:54:48 -0400] sarkis: anyone know if chef zero is ready for primetime?
[2014-05-16 16:56:37 -0400] sarkis: i guess i can just define hashes inside of attributes
[2014-05-16 16:56:43 -0400] sarkis: attributes/default.rb
[2014-05-16 17:16:22 -0400] gondoi: anyone use berkshelf and private repos?
[2014-05-16 17:16:43 -0400] gondoi: i'm having issues with it not "finding" the repo even though I have been using it so my keys are good
[2014-05-16 17:17:04 -0400] gondoi: i also added protocol: 'ssh'
[2014-05-16 17:41:41 -0400] chef410: hi, anyone know of a chef-related command or script which takes a <NODE> and shows all the methods, in order, (or recipes) if not available, which are run on the node. knife node show <NODE> shows the run_list roles and recipes but doesn't really appear to me at least to show the atomistic set of what is run from first to last.
[2014-05-16 17:43:53 -0400] sauraus: chef410 I guess it's all self documenting code :D
[2014-05-16 17:44:28 -0400] mikesplain_: If you do knife `node show <NODE> -l` youll get the full stack of attributes and full recipes
[2014-05-16 17:45:02 -0400] mikesplain_: Im not positive if thats the exact order or not, it appears to be for me
[2014-05-16 18:02:11 -0400] dgarstang: shouldn't chefvm be creating symlinks to knife.rb ? it appears NOT
[2014-05-16 18:02:12 -0400] chef410: can one place a "notifies :restart etc." into a provider under cookbooks/somecookbook/libraries/someprovider.rb and it will do the notification properly when the provider is run?
[2014-05-16 18:03:18 -0400] dgarstang: "Chefvm will create a symlink between (~/.chefvm -> ~/.chef )," nope... not doing that either
[2014-05-16 18:04:13 -0400] mikesplain: Works for me
[2014-05-16 18:04:50 -0400] mikesplain: did you run the init script?
[2014-05-16 18:05:10 -0400] dgarstang: mikesplain: i did. i had to run chefvm setup again to make it create the symlinks. no idea why
[2014-05-16 18:05:28 -0400] mikesplain: hmm odd
[2014-05-16 18:05:35 -0400] dgarstang: i wonder if there's a way to make this work with berkshelf?
[2014-05-16 18:16:15 -0400] tercenya: cookbook design question:  I have a recipe for creating vhosts (which eventually calls apache2's #web_app), but I want to add a $monitoring_system check (say, check_http.rb) but I need it to run from *another* node.   Is the best solution to register the vhosts in shared databag, then have the monitoring node enumerate the check templates from there?  or should I do something more crafty - say, override the #vhost function on the mo
[2014-05-16 18:16:15 -0400] tercenya: nitoring node, then include_recipe the original source...
[2014-05-16 18:18:18 -0400] jbz: tercenya: if the node with vhosts has them listed in an attribute somewhere, you could do a search from the monitoring node and have it set up the checks for all vhosts it finds across the nodefleet...?
[2014-05-16 18:19:27 -0400] jbz: tercenya: attributes will get autosaved to the chef server at run end, and be available for search.  Databags require active frobbing to make changes.  This is a purely personal foible, but if I need info on current state, I tend to put it in attributes.  If I need to propagate common or human-sourced data to nodes for them to do their jobs (config, etc.) I tend to use databags.
[2014-05-16 18:19:32 -0400] tercenya: jbz: the vhosts aren't attributes, which allows me to treat them like resources: "vhost 'my.host.net' do; alias 'www.my.host.net'; ..."
[2014-05-16 18:19:51 -0400] jbz: tercenya: Yes, but can you populate an attribute when you instantiate a vhost?
[2014-05-16 18:20:12 -0400] jbz: i.e. have the cookbook which is provisioning them keep track of which are present on the node?  How does it know which ones to bring up, anyway?
[2014-05-16 18:23:30 -0400] tercenya: just have the vhost function populate a node attribute at the same time, then do something like partial_search(:node, 'role:web', keys: :vhosts').flatten ?
[2014-05-16 18:25:30 -0400] jbz: right
[2014-05-16 18:26:41 -0400] jbz: That coordination using the server's store of attributes is one of the really powerful things about Chef, purely IMO.  It's never as 'tight' as you'd want, due to delay/splay, but it's certainly good enough for reconfiguring monitoring and tracking what's where.
[2014-05-16 18:28:28 -0400] tercenya: aye, makes sense, I'll give it a whirl.   only reason I questioned it was that I was looking at it more of a "this recipe generates an expectation for another resource".  the node attribute didn't seem like the *first* place I'd want to put that.
[2014-05-16 18:29:09 -0400] tercenya: but it is just data at the end of the day
[2014-05-16 18:34:45 -0400] jbz: tercenya: I see.  I tend not to think of it as one recipe generating an expectation for another.'  I try to decouple.  "The monitoring recipe will always sweep the whole field and do what is necessary."  "the vhost recipe will always update the attribute."  Trying to think too hard about those processes being directly linked always messes me up.
[2014-05-16 18:39:12 -0400] poolpog: hi. i'm just curious who, if anyone, has upgraded production systems to Ubuntu 14.04, and what gotchas you've run into
[2014-05-16 18:42:16 -0400] tercenya: poolpog: current complaints on 14.04 include: lack of vmware-tools in the esxi packages repo; systemd (sigh); ceph isn't at 0.8/Firefly yet.  but the folks in ##infra-talk might have more to say about it than here.
[2014-05-16 18:49:24 -0400] poolpog: thanks
[2014-05-16 18:50:05 -0400] poolpog: i don't even know what ceph is. maybe i should?
[2014-05-16 18:50:36 -0400] coredump: it's just me or all databags I create when having a encrypted_data_bag secret get encrypted?
[2014-05-16 18:51:08 -0400] jperry_: anyone getting this failure in their chef runs on ubuntu: chef_gem[libarchive-ruby] (libarchive::default line 27) had an error: Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
[2014-05-16 18:51:14 -0400] jperry_: just started happening
[2014-05-16 18:51:50 -0400] davidordave: @coredump, I am pretty sure there is a bug logged for that. One sec.
[2014-05-16 18:52:00 -0400] jperry_: getting it trying to install berkshelf-api
[2014-05-16 18:52:43 -0400] sanguisdex: is there an ultisnips snippest set for chef cookbook development or should I make my own
[2014-05-16 18:52:50 -0400] davidordave: @coredump: https://tickets.opscode.com/browse/CHEF-4011?focusedCommentId=47663&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-47663
[2014-05-16 18:57:28 -0400] sanguisdex: nm I found one (github search > google search)
[2014-05-16 18:58:20 -0400] otakup0pe: hey any of y'all have much experience with the new jenkins cookbook ?
[2014-05-16 18:58:27 -0400] otakup0pe: having some woe getting it rolling with nginx
[2014-05-16 18:58:41 -0400] otakup0pe: always seems to fail with connection failed during first run.
[2014-05-16 19:24:07 -0400] dgarstang: I've got a baked AMI here that starts chef on boot... using the chef-client cookbook... the chef log file shows 3 iterations of "Daemonizing.." Forked, in 1800. Privileges: 0 0" "SIGTERM received, exiting gracefully" and then stops. Runs fine by hand tho. Ideas?
[2014-05-16 19:40:27 -0400] bricker: What do you guys name your nodes/vms? The dev here before started the convention "web001", with the numbers after every one, but I can't think of a good reason to do that unless your deployment process involves the VMs
[2014-05-16 19:42:09 -0400] ErebusBat: bricker: I have worked at shops that use the number scheme like that as well as random things (star wars characters, etc)
[2014-05-16 19:42:33 -0400] ErebusBat: In my experience it is much easier for everyone (especially new people) to absorb numerical names
[2014-05-16 19:43:29 -0400] bricker: ErebusBat: well if we just need one 'web' node, I don't see the purpose in calling it 'web001' as if we're going to be creating 1000 of them
[2014-05-16 19:44:21 -0400] ErebusBat: Good point... But it always seems that you end up with more than one. So then you get nodes like web, web2, web-2. Web02
[2014-05-16 19:44:28 -0400] ErebusBat: There is no consistancy
[2014-05-16 19:44:49 -0400] ErebusBat: If you start out with a scheme then it is more likely it will be followed.  Granted you probably won't need 1000
[2014-05-16 20:29:20 -0400] smithmb: Hi there -- is there a way to delete a node or client using knife and an API client + client key?
[2014-05-16 20:29:33 -0400] smithmb: (I can't find any permission in the UI for this use case)
[2014-05-16 20:29:53 -0400] nefilim: has to be a user key apparently
[2014-05-16 20:30:03 -0400] smithmb: ah, so much for autoscaling :/
[2014-05-16 20:30:17 -0400] nefilim: i had the same problem
[2014-05-16 20:30:26 -0400] coderanger: smithmb: Are you on open source or enterprise?
[2014-05-16 20:30:37 -0400] smithmb: coderanger: hosted
[2014-05-16 20:30:42 -0400] smithmb: hosted/enterprise
[2014-05-16 20:30:59 -0400] coderanger: smithmb: okay, so enterprise, just grant that client Delete permissions on the node and client
[2014-05-16 20:31:07 -0400] coderanger: got to run to a meeting, I can walk you through it in a bit
[2014-05-16 20:31:16 -0400] smithmb: coderanger: I want it to be able to delete *any* node
[2014-05-16 20:31:21 -0400] smithmb: coderanger: ok :)
[2014-05-16 20:31:32 -0400] coderanger: nefilim: IF you are on Open Source, just make the client an admin key
[2014-05-16 20:31:35 -0400] coderanger: smithmb: Yep, you can do that
[2014-05-16 20:31:50 -0400] smithmb: coderanger: ok, I'd love to understand how to do that. The UI is not obvious to me.
[2014-05-16 20:33:47 -0400] smithmb: coderanger: from what I've read, enterprise chef doesn't support admin keys
[2014-05-16 20:34:17 -0400] smithmb: "This option only works when used with the open source Chef server and will have no effect when used with Enterprise Chef."
[2014-05-16 20:34:20 -0400] nefilim: this is what opscode support emailed me:
[2014-05-16 20:34:22 -0400] nefilim: The rule of thumb is this
[2014-05-16 20:34:22 -0400] nefilim: * Clients are automatically created by chef-client managed nodes to do their node updates.
[2014-05-16 20:34:23 -0400] nefilim: * All other usage of the API should be through a User, just like the way knife is used.
[2014-05-16 20:35:20 -0400] smithmb: bummer.
[2014-05-16 20:36:13 -0400] bricker: So I wanted to upload the "ffmpeg" package... but I've been going down a trail of "cookbook [...] depends on cookbook [...] which is not currently being uploaded". There must be a better way to just upload a cookbook and its dependencies, rather than having to download, untar, and upload each one manually?
[2014-05-16 20:36:46 -0400] nefilim: smithmb: here's my little project, sounds like you are doing something similar: https://github.com/nefilim/SNSMonitor
[2014-05-16 20:37:21 -0400] smithmb: nefilim: that would be perfect, except I'm not using AWS and I don't have a notification or trigger to consume :/
[2014-05-16 20:37:44 -0400] nefilim: smithmb: doh, ah well
[2014-05-16 20:41:06 -0400] mmzyk: Probably not the best thing to ask on a Friday afternoon, but how is the open source server 11.1 release working out for those of you running it?
[2014-05-16 20:41:47 -0400] workmad3: mmzyk: I had another 404 issue when I updated from rc2 to the released version
[2014-05-16 20:42:24 -0400] workmad3: mmzyk: thankfully, this time my local 'main' berksfile was updated though, so I just cleaned out and did a single 'berks upload' :)
[2014-05-16 20:42:41 -0400] mmzyk: Remind me what the 404 issue was again?
[2014-05-16 20:42:53 -0400] mmzyk: I recall talking about it, but not what it was exactly.
[2014-05-16 20:43:55 -0400] workmad3: mmzyk: an uploaded cookbook just kept on reporting '404' from requests for files within it after updating
[2014-05-16 20:44:24 -0400] mmzyk: okay. And after the upload all was fine?
[2014-05-16 20:44:26 -0400] workmad3: mmzyk: in good news though, after the update to the released version, my rabbitmq port updated correctly, and the firewall issue resolved itself so I could remove that :)
[2014-05-16 20:44:29 -0400] workmad3: mmzyk: yeah
[2014-05-16 20:44:51 -0400] mmzyk: cool. Youre the only person Ive seen report this. Im not sure why it happens.
[2014-05-16 20:45:45 -0400] workmad3: mmzyk: I did notice that while it was happening my postgresql logs were reporting failures to remove lines from cookbook_version_checksums (or at least I think that was it... 1 sec while I double check :) )
[2014-05-16 20:47:05 -0400] workmad3: mmzyk: ah, here it is, on a DELETE - 'ERROR:  update or delete on table "checksums" violates foreign key constraint "cookbook_version_checksums_org_id_fkey" on table "cookbook_version_checksums"'
[2014-05-16 20:47:24 -0400] workmad3: hmm... nm, I still seem to be getting them
[2014-05-16 20:47:46 -0400] workmad3: I don't know what went wrong, but it's resolved after cleaning stuff out so not too worried :)
[2014-05-16 20:48:11 -0400] mmzyk: okay, cool.
[2014-05-16 20:57:05 -0400] Neozonz: how does one restart an upstart process?
[2014-05-16 20:58:23 -0400] Neozonz: I tried the following recipe http://pastebin.com/TWHk0Y5Q
[2014-05-16 20:59:02 -0400] coderanger: smithmb nefilim: Okay back, either of you still need helpx0rz?
[2014-05-16 21:00:22 -0400] smithmb: coderanger: according to the docs for 'admin' clients, "This option only works when used with the open source Chef server and will have no effect when used with Enterprise Chef."
[2014-05-16 21:00:33 -0400] coderanger: smithmb: Yes, thats only used in Open Source Chef
[2014-05-16 21:00:45 -0400] coderanger: smithmb: For Hosted, you need to two things
[2014-05-16 21:00:46 -0400] smithmb: Right, so probably I have no option but to create a full user
[2014-05-16 21:00:49 -0400] coderanger: smithmb: No
[2014-05-16 21:01:06 -0400] coderanger: smithmb: So first make your new client
[2014-05-16 21:01:12 -0400] smithmb: coderanger: did that
[2014-05-16 21:01:22 -0400] coderanger: smithmb: Then on each existing node/client, mark your new client as having DELETE perms
[2014-05-16 21:01:28 -0400] smithmb: but I'm autoscaling
[2014-05-16 21:01:34 -0400] coderanger: smithmb: Then give your client DELETE on the nodes and clients container
[2014-05-16 21:01:57 -0400] coderanger: smithmb: The way EC ACLs work is that when a new object is created, it copies the ACLs on the container object for that type
[2014-05-16 21:02:17 -0400] coderanger: smithmb: So the container will handle all new nodes/clients, you just have to manually fix the existing ones
[2014-05-16 21:02:20 -0400] smithmb: coderanger: How does one edit the nodes and clients container?
[2014-05-16 21:03:19 -0400] coderanger: Let me double check the labels in case they changed
[2014-05-16 21:03:29 -0400] coderanger: smithmb: Admin -> Global Permissions
[2014-05-16 21:03:47 -0400] coderanger: smithmb: You can also use knife-acl
[2014-05-16 21:04:43 -0400] smithmb: so under global permissions, the only options I can grant are "list" and "create"
[2014-05-16 21:04:58 -0400] smithmb: and "clients" isn't in the list of containers
[2014-05-16 21:05:42 -0400] smithmb: ^ coderanger
[2014-05-16 21:05:57 -0400] coderanger: smithmb: Oh right, I forgot I hid that stuff
[2014-05-16 21:06:00 -0400] coderanger: smithmb: Then yeah, knife-acl
[2014-05-16 21:07:37 -0400] smithmb: Guess I need to go find and install that
[2014-05-16 21:07:58 -0400] coderanger: The ACL system is super powerful but almost entirely undocumented
[2014-05-16 21:08:00 -0400] smithmb: "Be warned, once you start managing a group's membership using knife-acl you should avoid managing that group's membership using the management console's web interface."
[2014-05-16 21:08:14 -0400] coderanger: smithmb: Doesn't apply anymore, the new manage UI does things correctly
[2014-05-16 21:08:33 -0400] coderanger: USAGs are a pain I don't miss dealing with
[2014-05-16 21:08:34 -0400] smithmb: excellent...
[2014-05-16 21:09:30 -0400] smithmb: installed it, working out the commands I'd want
[2014-05-16 21:09:59 -0400] coderanger: let me go check the code, sec
[2014-05-16 21:11:20 -0400] coderanger: smithmb: Try `knife acl add container nodes delete client foo`
[2014-05-16 21:12:10 -0400] smithmb: "you are not authorized for this action"
[2014-05-16 21:12:25 -0400] smithmb: hmmm
[2014-05-16 21:12:35 -0400] smithmb: I have a master account, but I'm using my regular user account.
[2014-05-16 21:13:07 -0400] smithmb: got it :)
[2014-05-16 21:13:27 -0400] coderanger: Not 100% that will work, but its worth a shot
[2014-05-16 21:13:37 -0400] coderanger: the system isn't hugely consistent about the "containers" container
[2014-05-16 21:13:48 -0400] dgarstang: any users of the edgelight mongo cookbook? it seems to fail on centos. :(
[2014-05-16 21:15:43 -0400] smithmb: coderanger: trying it now
[2014-05-16 21:17:39 -0400] coderanger: smithmb: You'll need to set it on both the nodes and clients containers
[2014-05-16 21:17:54 -0400] coderanger: smithmb: But you should be able to see if it worked by creating a new node or client and looking at their ACLs
[2014-05-16 21:17:59 -0400] smithmb: did that, and it took the command without an error
[2014-05-16 21:18:11 -0400] coderanger: smithmb: Thats a good sign, or at least not a bad one :)
[2014-05-16 21:20:01 -0400] smithmb: coderanger: btw, I appreciate all the assistance :)
[2014-05-16 21:20:29 -0400] coderanger: smithmb: No problem, like I said this whole thing is dangerously undocumented, might as well let other people benefit from my years of pain :)
[2014-05-16 21:20:49 -0400] smithmb: :)
[2014-05-16 21:29:17 -0400] poolpog: hello again nice people... PHP5 in Ubuntu14.04 uses "php5[en|dis]mod" to enable/disable php modules...
[2014-05-16 21:29:42 -0400] poolpog: does the newest Opscode PHP cookbook account for this? it didn't seem to for me
[2014-05-16 21:30:06 -0400] coderanger: poolpog: Is that just doing the same symlink dance?
[2014-05-16 21:30:09 -0400] poolpog: yes
[2014-05-16 21:30:20 -0400] coderanger: Thats not something Chef should be doing, so I hope not
[2014-05-16 21:30:28 -0400] coderanger: :-)
[2014-05-16 21:30:33 -0400] poolpog: well... Chef does do this for the Apache cookbook
[2014-05-16 21:30:39 -0400] coderanger: Yeah, and that was a huge mistake
[2014-05-16 21:30:41 -0400] coderanger: (nginx too)
[2014-05-16 21:30:44 -0400] poolpog: ah
[2014-05-16 21:30:59 -0400] coderanger: Trying to emulate the tools used for human interfaces makes no sense when its a machine doing things
[2014-05-16 21:31:01 -0400] poolpog: is there a "fix" for that "big mistake" that I can look at somewherE?
[2014-05-16 21:31:07 -0400] coderanger: poolpog: Probably not :)
[2014-05-16 21:31:13 -0400] coderanger: someara is working on a new apache cookbook
[2014-05-16 21:31:14 -0400] poolpog: oh! I agree with that statment
[2014-05-16 21:31:21 -0400] coderanger: But I don't know if its published yet
[2014-05-16 21:31:31 -0400] poolpog: ok
[2014-05-16 21:31:37 -0400] poolpog: well, i'll muddle along then, i guess
[2014-05-16 21:32:32 -0400] poolpog: oh, so, what is the "fix" then? having chef put in the symlinks?
[2014-05-16 21:32:40 -0400] poolpog: i.e. how do you do the a2enmod thing, for example
[2014-05-16 21:33:07 -0400] coderanger: poolpog: Just manage the files directly, skip the symlinks entirely
[2014-05-16 21:33:58 -0400] poolpog: ah
[2014-05-16 21:34:51 -0400] coderanger: There was this idea that cookbooks should do things "the ubuntu way" or "the rhel way", but really they should just do it "the correct way"
[2014-05-16 21:35:27 -0400] poolpog: well, which one is "the correct way"? in my experience, if you have 5 sysadmins in a room, you'll get 5 different "correct ways"
[2014-05-16 21:35:54 -0400] poolpog: and all of them will have merit roughly equal to the amount of experience each individual has
[2014-05-16 21:36:14 -0400] coderanger: poolpog: Sure, but none of them will involve symlinks :)
[2014-05-16 21:36:20 -0400] poolpog: but now I'm just philosophzing... don't want to get too off track from this IRC's prupose
[2014-05-16 21:36:24 -0400] poolpog: lol
[2014-05-16 21:36:39 -0400] coderanger: lmao if you think this room stays on-topic, especially on a Friday
[2014-05-16 21:36:45 -0400] poolpog: now you're just being self-invloved
[2014-05-16 21:36:54 -0400] poolpog: symlinks are useful
[2014-05-16 21:37:00 -0400] poolpog: raise your hand if you like symlinks!
[2014-05-16 21:37:10 -0400] robbkidd: SYMLINK ALL THE THINGS!
[2014-05-16 21:37:16 -0400] poolpog: lol. see?
[2014-05-16 21:37:21 -0400] poolpog: lol computer humor
[2014-05-16 21:37:41 -0400] poolpog: I'm wearing my "computer professional" shirt today so I can get away with it
[2014-05-16 21:38:23 -0400] robbkidd: I'm wearing a collar to dress it up a bit on a Friday.
[2014-05-16 21:39:19 -0400] coderanger: I put on pants today, that qualifies as "dressed up" in my book
[2014-05-16 21:39:31 -0400] robbkidd: Trf
[2014-05-16 21:39:58 -0400] poolpog: indeed
[2014-05-16 21:41:17 -0400] poolpog: shameless plug:  http://www.zazzle.com/computer_professional_t_shirt-235925911977754176?rf=238083418166184366
[2014-05-16 21:41:53 -0400] poolpog: and this:  http://www.zazzle.com/3_nines_tshirt-235145391636528568?rf=238083418166184366    I figure people here would like these
[2014-05-16 21:45:09 -0400] tercenya: RE: 'correct' way: https://xkcd.com/927/
[2014-05-16 21:48:38 -0400] poolpog: lol, exactly
[2014-05-16 21:50:34 -0400] poolpog: bye!
[2014-05-16 21:51:09 -0400] coderanger: https://i.imgur.com/OSk8H2m.png
[2014-05-16 21:56:05 -0400] someara: what are we complaining about today?
[2014-05-16 21:56:58 -0400] dgarstang: Oh man. It looks like in 2.6 mongo changed to a yml file format and the authors of the edgelight mongo cookbook have not kept up
[2014-05-16 21:57:01 -0400] coderanger: someara: Apache cookbook
[2014-05-16 21:57:08 -0400] coderanger: someara: Figured you would want in
[2014-05-16 21:57:23 -0400] someara: yea.
[2014-05-16 21:57:44 -0400] coderanger: someara: (o) ( o) 
[2014-05-16 21:58:00 -0400] davidski: Anyone have pointers for a vagrant+chef-solo user looking to make my AWS instances live/production? Worth getting cozy with opsworks or should I steer clear of that?
[2014-05-16 21:59:12 -0400] davidski: My recipes are fairly well baked at this point so it's a question of provisioning and autoscaling. Looking at opsworks, chef-metal, knife-ec2, and user-init scripts as options. So many choices. :)
[2014-05-16 22:00:17 -0400] coderanger: davidski: knife-solo + knife-ec2 it the easy way
[2014-05-16 22:00:36 -0400] davidski: coderanger: Graci. I like easy. :)
[2014-05-16 22:01:21 -0400] davidski: Is knife fairly well support to install on Windows workstations? Still waiting for chef-dk for windows.
[2014-05-16 22:02:15 -0400] coderanger: davidski: Yep
[2014-05-16 22:02:34 -0400] coderanger: davidski: What isn't super easy is berkshelf
[2014-05-16 22:02:45 -0400] elebertus: heh
[2014-05-16 22:02:48 -0400] Neozonz|Disc: coderanger, how can i do a service xxx restart for a upstart service?
[2014-05-16 22:03:02 -0400] Neozonz|Disc: i tried but it seems to look in /etc/init.d/xxx
[2014-05-16 22:03:17 -0400] davidski: coderanger: Yeah, tell me about it. :( I have berkshelf v2 and no vagrant-berkshelf plugin. Been scared to try anything else. That ecosystem is very confusing to a newbie.
[2014-05-16 22:03:50 -0400] davidski: coderanger: Berkshelf is an area I want to focus on if I ever get in on the chef table program.
[2014-05-16 22:04:51 -0400] coderanger: Neozonz|Disc: provider :upstart
[2014-05-16 22:06:00 -0400] Neozonz|Disc: ah i see
[2014-05-16 22:06:06 -0400] Neozonz|Disc: ill give it a go thx
[2014-05-16 22:46:34 -0400] dgarstang: Oh man. It looks like in 2.6 mongo changed to a yml file format and the authors of the edgelight mongo cookbook have not kept up
[2014-05-16 22:47:29 -0400] chef014: hi all.  I
[2014-05-16 22:47:43 -0400] coderanger: chef014: Alo
[2014-05-16 22:48:19 -0400] chef014: iI'm having trouble getting knife-wiindows to work.  I've gotten the gem installed but knife winrm just returns a list of knife commands, without the winrm option.
[2014-05-16 22:48:40 -0400] chef014: i'm on a mac using mavericks ruby 1.9.3
[2014-05-16 22:48:52 -0400] chef014: and the chef dk
[2014-05-16 22:49:05 -0400] coderanger: chef014: How did you install the gem?
[2014-05-16 22:49:38 -0400] chef014: opt/chef/embedded/bin/gem install
[2014-05-16 22:49:54 -0400] chef014: knife-windows.  left off the first slash
[2014-05-16 22:50:17 -0400] coderanger: chef014: ChefDK is in /opt/chefdk
[2014-05-16 22:50:24 -0400] coderanger: you installed it into the old omnibus chef
[2014-05-16 22:51:20 -0400] jtimberman: also, current chefdk (0.1.0) ships with ruby 2.1.1p76
[2014-05-16 22:55:25 -0400] chef014: yes that got me a bit further.  it looks like i am having to install all of the knife-windows dependencies manually
[2014-05-16 22:55:31 -0400] chef014: is that expected?
[2014-05-16 22:55:33 -0400] fayesal: can anyone help with a kitchen-docker question?
[2014-05-16 22:56:04 -0400] coderanger: chef014: Using bundler is probably easier
[2014-05-16 22:56:06 -0400] coderanger: fayesal: possibly
[2014-05-16 22:56:13 -0400] fayesal: coderanger: : I am trying to use test-kitchen 1.21, kitchen-docker 1.21, boot2docker.  I can get as far as setting up a container such that I can log into it with kitchen login, but I get a Berksfile::Read exception, which I'm guessing means it can't access the recipe files.  How do I start debugging it?
[2014-05-16 22:56:38 -0400] coderanger: fayesal: Pastebin the exception?
[2014-05-16 22:58:01 -0400] chef014: @coderanger: forgive my ignorance how would i use bundler?
[2014-05-16 22:58:10 -0400] fayesal: @coderanger http://pastebin.com/dDAGrhLT
[2014-05-16 22:58:32 -0400] coderanger: chef014: Create a Gemfile containing 'gem "knife-windows"'
[2014-05-16 23:00:04 -0400] coderanger: fayesal: Whats in your Berksfile?
[2014-05-16 23:00:43 -0400] fayesal: sourceberkshelf.com" and metadata.
[2014-05-16 23:01:00 -0400] fayesal: the  is the usual foo
[2014-05-16 23:01:38 -0400] fayesal: butI don't even see it putting the stuff into the container.
[2014-05-16 23:04:41 -0400] coderanger: fayesal: Your berksfile is written for berks 3, but you are using berks 2.0.16
[2014-05-16 23:04:46 -0400] coderanger: Got to run to another meeting
[2014-05-16 23:05:04 -0400] fayesal: coderanger: thanks for the info
[2014-05-16 23:06:28 -0400] fayesal: HA!
[2014-05-16 23:06:31 -0400] fayesal: perfect, thansk
[2014-05-16 23:12:58 -0400] chef014: coderanger: ok i've got a gemfile with the knife-windows dependencies now how do i get them installed into the omnibus chefdk install
[2014-05-16 23:16:55 -0400] tcotav: chef014: under /opt/chefdk, there is same dir structure as under /opt/chef
[2014-05-16 23:17:45 -0400] tcotav: and gem is at /opt/chefdk/embedded/bin/gem
[2014-05-16 23:28:21 -0400] chef410: can there be any cookbooks not represented in a node's run list?
[2014-05-16 23:28:32 -0400] chef410: (which are run, despite not being in the node's assigned run list)
[2014-05-16 23:42:28 -0400] chef014: tcotav: i tried doing a /opt/chefdk/embedded/bin/gem install knife-windows. this did install knife-windows but none of its dependencies.

[2014-05-20 00:19:02 -0400] shlant: anyone know why bundler is installing chef 0.8.10 if I don't specify a version?
[2014-05-20 00:21:03 -0400] coderanger: shlant: Something is restricting the version of a dependency most likely
[2014-05-20 00:21:07 -0400] coderanger: what else is in the gemfile?
[2014-05-20 00:25:18 -0400] shlant: coderanger: knife-ec2 and berkshelf
[2014-05-20 00:25:31 -0400] coderanger: shlant: What versions are those solving to?
[2014-05-20 00:26:02 -0400] coderanger: shlant: bundler is a greedy solver, so the order in the gemfile can also matter a lot
[2014-05-20 00:26:09 -0400] shlant: coderanger: knife-ec2 (0.8.0) berkshelf (3.1.2)
[2014-05-20 00:26:32 -0400] shlant: cat GEmfile
[2014-05-20 00:26:33 -0400] shlant: source 'https://rubygems.org'
[2014-05-20 00:26:33 -0400] shlant: gem 'chef', '11.12.4'
[2014-05-20 00:26:34 -0400] shlant: gem 'berkshelf'
[2014-05-20 00:26:34 -0400] shlant: gem 'knife-ec2'
[2014-05-20 00:26:47 -0400] shlant: cept without the version specified
[2014-05-20 00:27:25 -0400] shlant: hmmm
[2014-05-20 00:27:29 -0400] shlant: seems to work now
[2014-05-20 00:27:44 -0400] shlant: nope nm
[2014-05-20 00:28:16 -0400] coderanger: shlant: The mime-types and json gems are common points of conflict for the bundler solver
[2014-05-20 00:28:49 -0400] shlant: coderanger: actually, it is working now, but I had removed an older json gem in trying to solve something else
[2014-05-20 00:28:52 -0400] shlant: so that must have been it
[2014-05-20 00:29:11 -0400] coderanger: Welcome to packaging, everything is terrible forever
[2014-05-20 00:29:15 -0400] shlant: haha
[2014-05-20 00:29:17 -0400] shlant: truth
[2014-05-20 00:37:04 -0400] digitalchild: is it better to have one cookbook per service and then another to configure that service for a specific app?
[2014-05-20 00:37:25 -0400] digitalchild: such as installing mysql in one, then adding dbs,users and data in another ?
[2014-05-20 00:42:42 -0400] coderanger: digitalchild: My rules are that the low-level cookbook just models the service itself, and then the application or wrapper cookbook does business-specific configuration
[2014-05-20 00:43:08 -0400] digitalchild: cool, that's what im doing
[2014-05-20 00:43:19 -0400] digitalchild: pretty much getting services up and running read for app deployment
[2014-05-20 00:43:35 -0400] digitalchild: so they are all default configs (well our env default)
[2014-05-20 00:44:57 -0400] coderanger: Some of it depends on how much you care about reusability
[2014-05-20 00:46:20 -0400] jackjackdrpr: what I usually do is create a cookbook for say apache, mysql, zookeeper etc for basic install
[2014-05-20 00:47:00 -0400] jackjackdrpr: for the configuration I create another cookbook based on the project or stack name
[2014-05-20 01:15:07 -0400] coderanger: digitalchild: Your clock and/or timezone are busted btw
[2014-05-20 01:15:23 -0400] coderanger: digitalchild: Your commit shows as coming from tomorrow :-)
[2014-05-20 01:26:13 -0400] rfergu: Hi so I'm still at this... I'm trying to follow this guide: http://stackoverflow.com/questions/16451762/using-knife-ec2-plugin-to-create-vm-in-vpc-private-subnet
[2014-05-20 01:26:35 -0400] rfergu: But I always get Waiting for sshdERROR: Net::SSH::AuthenticationFailed: Authentication failed for user ec2-user@mybastion
[2014-05-20 01:27:23 -0400] rfergu: ssh -i identify_file ec2-user@bastion works,  but I can't make knife ssh or knife ec2 create work
[2014-05-20 01:27:46 -0400] coderanger: rfergu: --server-connect-attribute private_ip_address
[2014-05-20 01:28:16 -0400] rfergu: I have that actually
[2014-05-20 01:28:30 -0400] coderanger: Yes, are you sure thats what you want?
[2014-05-20 01:30:10 -0400] coderanger: rfergu: Can you connect to the bastion host as ec2-user normally?
[2014-05-20 01:30:21 -0400] coderanger: Ahh yeah, you said it works
[2014-05-20 01:30:26 -0400] rfergu: https://gist.github.com/rfergu/9f9b41f604c0fe5c11e3
[2014-05-20 01:30:50 -0400] rfergu: I just want the bastion server to forward things through
[2014-05-20 01:31:02 -0400] rfergu: public bastion to private vpc chef goodness
[2014-05-20 01:31:49 -0400] rfergu: I'd even take an easy way to test this with knife ssh
[2014-05-20 01:32:04 -0400] rfergu: Right now it makes the ec2 instance and then dies at the sshd step:
[2014-05-20 01:32:37 -0400] rfergu: Waiting for instance.............  (make it) Waiting for sshdERROR: Net::SSH::AuthenticationFailed
[2014-05-20 01:32:43 -0400] coderanger: rfergu: Can SSH to the new machin yourself?
[2014-05-20 01:32:56 -0400] rfergu: I can ssh if I go into the bastion machine and ssh from there
[2014-05-20 01:33:34 -0400] coderanger: what do you get if you just run knife bootstrap?
[2014-05-20 01:34:03 -0400] rfergu: with the ip
[2014-05-20 01:34:04 -0400] rfergu: ?
[2014-05-20 01:34:24 -0400] coderanger: rfergu: Yeah, include the --ssh-gateway option and -x ec2-user
[2014-05-20 01:34:30 -0400] coderanger: and probably --sudo
[2014-05-20 01:34:37 -0400] rfergu: will do
[2014-05-20 01:36:34 -0400] rfergu: Enter the password for ec2-user@bastion
[2014-05-20 01:36:47 -0400] rfergu: I forgot to pass --identity one sec
[2014-05-20 01:37:23 -0400] xeno__: So, I'm going through this sequence on http://www.getchef.com/blog/2013/03/11/chef-11-server-up-and-running/, and I get...
[2014-05-20 01:37:32 -0400] rfergu: still wants password
[2014-05-20 01:37:42 -0400] xeno__: Creating initial API user... ERROR: Client '' already exists
[2014-05-20 01:38:28 -0400] rfergu: It's like its just ignoring the identity file
[2014-05-20 01:39:31 -0400] coderanger: rfergu: Hmm, trying to grok the code in knife ssh
[2014-05-20 01:39:56 -0400] coderanger: rfergu: Is your key loaded in to your ssh-agent?
[2014-05-20 01:40:14 -0400] rfergu: should be, but I can confirm
[2014-05-20 01:40:34 -0400] coderanger: xeno__: Which step fails?
[2014-05-20 01:40:37 -0400] coderanger: rfergu: ssh-add -l
[2014-05-20 01:41:02 -0400] xeno__: knife configure -i
[2014-05-20 01:41:22 -0400] coderanger: xeno__: Are you trying to name your initial user "admin"?
[2014-05-20 01:41:29 -0400] xeno__: I made mistakes the first few times, so the fact that something exists is MY fault.  However...
[2014-05-20 01:41:43 -0400] coderanger: xeno__: Oh :P
[2014-05-20 01:42:10 -0400] xeno__: Yes, as per the sequence directions on http://www.getchef.com/blog/2013/03/11/chef-11-server-up-and-running/
[2014-05-20 01:42:20 -0400] rfergu: so I did 'ssh-add -l Operations-Chef.pem'  and it still wants a password for ec2-user
[2014-05-20 01:42:21 -0400] xeno__: You see on that page, they direct you to do so.
[2014-05-20 01:42:58 -0400] coderanger: rfergu: ssh-add -l it to list existing stuff in the agent
[2014-05-20 01:43:06 -0400] xeno__: So perhaps I need to initialize and do this knife configure -i over?
[2014-05-20 01:43:23 -0400] coderanger: xeno__: No, they direct you to create a new user using the existing admin user, your new user has to be named something different
[2014-05-20 01:43:41 -0400] xeno__: Ok, so a mistake in the instructions.
[2014-05-20 01:43:49 -0400] rfergu: ahhhhh
[2014-05-20 01:43:51 -0400] rfergu: You got it
[2014-05-20 01:43:52 -0400] xeno__: Can I just use xenoadmin, presumably.
[2014-05-20 01:44:06 -0400] rfergu: I owe you one!
[2014-05-20 01:44:33 -0400] xeno__: Thank you.  Trying again.
[2014-05-20 01:44:47 -0400] coderanger: rfergu: \o/ that sounds like a bug, though I'm not actually sure if you can do this within net::ssh
[2014-05-20 01:45:15 -0400] coderanger: rfergu: Want to file a ticket about the gateway connection not taking the -i file into account?
[2014-05-20 01:45:26 -0400] rfergu: Yeah I can do that
[2014-05-20 01:45:38 -0400] coderanger: Thanky :)
[2014-05-20 01:47:45 -0400] xeno__: I am probably not getting the fact, that I should have learned in the other tutorial, but I don't see it stated here, that I need to create the admin user?
[2014-05-20 01:47:47 -0400] xeno__: ERROR: Failed to authenticate to http://chefserver6nc.xeno.net as xenoadmin with key /home/xeno/.chef/admin.pem
[2014-05-20 01:48:02 -0400] xeno__: On the server web GUI?
[2014-05-20 01:49:21 -0400] coderanger: xeno__: You need to use your own key for the new user, not the admin.pem key
[2014-05-20 01:50:40 -0400] xeno__: Ok.  But I need to make the key...on the server GUI?
[2014-05-20 01:51:29 -0400] coderanger: xeno__: No, you can do it via knife
[2014-05-20 01:51:47 -0400] xeno__: Ok.  Good.
[2014-05-20 01:51:49 -0400] coderanger: xeno__: It is recommend you fully disable the web UI on open-source chef, it is deprecated and will be removed in a future version
[2014-05-20 01:51:54 -0400] rfergu: https://tickets.opscode.com/browse/CHEF-5315
[2014-05-20 01:52:02 -0400] xeno__: Oh.  neato.
[2014-05-20 01:52:08 -0400] coderanger: thanky :)
[2014-05-20 01:52:32 -0400] xeno__: Thank you.
[2014-05-20 01:52:35 -0400] rfergu: Thanks again!  going to go get dinner
[2014-05-20 01:53:53 -0400] coderanger: I should probably do that eventually
[2014-05-20 02:07:00 -0400] cheeseplus: so this would lead me to believe remote_file is fixed: https://tickets.opscode.com/browse/CHEF-5198
[2014-05-20 02:07:06 -0400] fclausen: hey all, logging question: Running "chef-client -l info" seems to log shellout errors where as the /var/log/chef/client.log does not include this. Is there a way to log the shellout error output to the client.log?
[2014-05-20 02:07:08 -0400] cheeseplus: however, on 1404 I get the bug all the time
[2014-05-20 02:09:34 -0400] xeno__: Ok.  I'll bite.  I am not seeing a pem get made.  I don't see how knife makes it. Looking at man page once again in case I'm crazy, but...
[2014-05-20 02:14:32 -0400] coderanger: fclausen: In your client.rb, set log_level :info
[2014-05-20 02:14:38 -0400] coderanger: (or :debug if you want the firehose)
[2014-05-20 02:27:02 -0400] xeno__: Ok.  I got it.
[2014-05-20 02:36:35 -0400] xeno__: Why does chef default to a place like:  /etc/chef-server/admin.pem?
[2014-05-20 02:37:04 -0400] xeno__: It seems like that would prompt the user to leave it in an unprotected public state...perhaps it doesn't matter that much, but...
[2014-05-20 02:45:01 -0400] fclausen: @coderanger: thanks. It is already set to info. That said there are some other settings like "log_location STDOUT" and "vebose_logging false". Would they play a role in how shellout STDERR is logged?
[2014-05-20 02:52:37 -0400] martin_work: can anyone point me in the right direction for this error https://gist.github.com/martin2110/3fa7b381237526dd014f
[2014-05-20 02:53:06 -0400] digitalchild: that way ->
[2014-05-20 02:53:33 -0400] digitalchild: also a snippet of the relevant recipe would probably help..
[2014-05-20 02:56:02 -0400] martin_work: thanks digitalchild here is the rest https://gist.github.com/martin2110/f21a35dc33868aaff8e7
[2014-05-20 02:57:48 -0400] digitalchild: which version of ruby is this?
[2014-05-20 02:58:45 -0400] martin_work: its chefs ruby
[2014-05-20 02:58:53 -0400] martin_work: i think
[2014-05-20 02:58:55 -0400] martin_work: il check
[2014-05-20 02:59:49 -0400] digitalchild: i think it is
[2014-05-20 03:00:30 -0400] digitalchild: whoops, was just testing on one of my nodes
[2014-05-20 03:00:33 -0400] digitalchild: chef-client
[2014-05-20 03:00:49 -0400] digitalchild: '/usr/bin/env: ruby : no suck file or directory'
[2014-05-20 03:00:56 -0400] digitalchild: yup, my rvm cookbook really broke that node...
[2014-05-20 03:03:45 -0400] digitalchild: the require_relative is a conflict with ruby 1.8 somewhere..
[2014-05-20 03:04:43 -0400] martin_work: thanks digitalchild, i had a old chef/ruby installed
[2014-05-20 03:04:49 -0400] martin_work: i thought it was using omnibus
[2014-05-20 03:05:25 -0400] digitalchild: sweet, i helped!
[2014-05-20 03:05:42 -0400] digitalchild: only been ruby/chef for 2 months heh
[2014-05-20 04:21:58 -0400] digitalchild: is there a way to check syntax of a cookbook before uploading ?
[2014-05-20 04:22:47 -0400] digitalchild: nvm found it
[2014-05-20 04:23:12 -0400] programmerq: digitalchild: see also, foodcritic: http://acrmp.github.io/foodcritic/
[2014-05-20 04:23:40 -0400] digitalchild: thanks programmerq will rtfm
[2014-05-20 04:23:54 -0400] digitalchild: oh is this part of nathan's podcast?
[2014-05-20 04:24:30 -0400] programmerq: oh, don't take my comment as an rtfm-- there are ways to do a syntax check, as you mentioned. I am referring to foodcritic because it does a few more things that make cookbook validation nice.
[2014-05-20 04:24:39 -0400] programmerq: and I'm sure foodcritic is in a few podcasts.
[2014-05-20 04:24:46 -0400] digitalchild: *nods*
[2014-05-20 04:24:47 -0400] programmerq: I do believe they made it part of the chefdk.
[2014-05-20 04:24:53 -0400] digitalchild: nah, i always rtfm :)
[2014-05-20 04:25:07 -0400] digitalchild: more people would have less questions if they just knew which 'm' to read
[2014-05-20 04:25:53 -0400] programmerq: indeed
[2014-05-20 04:36:23 -0400] robawt: hey yawls.  I've been hearing about how forking a community cookbook is bad, and working with them using your own cookbooks is better.  are there any examples/blogs anyone can think of that best illustrates this?
[2014-05-20 04:36:55 -0400] digitalchild: depends 'somecookbook'
[2014-05-20 04:37:07 -0400] digitalchild: then just reference it in yours?
[2014-05-20 04:37:55 -0400] robawt: digitalchild: i am guessing.  I don't want to start off on the wrong foot
[2014-05-20 04:38:12 -0400] digitalchild: robawt: the idea like any OSS i guess
[2014-05-20 04:38:17 -0400] robawt: i can see how modifying attributes of a cookbook could be close but is it the same?
[2014-05-20 04:38:20 -0400] digitalchild: you want to just refernce/inherit the existing stuff
[2014-05-20 04:38:28 -0400] robawt: ok
[2014-05-20 04:38:38 -0400] digitalchild: so when the upstream changes, you don't have to re-work your changes
[2014-05-20 04:38:44 -0400] digitalchild: yum is a good example
[2014-05-20 04:38:45 -0400] robawt: precisely
[2014-05-20 04:38:49 -0400] rfergu: So now when I try to create a server with knife ec2 (through a bastion server) it says "Waiting for sshd........................................ERROR: Errno::ENOTCONN: Socket is not connected"  and knife bootstrap seems to get stuck with:
[2014-05-20 04:38:55 -0400] digitalchild: i use the community yum cookbook
[2014-05-20 04:39:00 -0400] rfergu: 10.0.0.19 --2014-05-20 01:43:45--  https://www.opscode.com/chef/install.sh 10.0.0.19 Resolving www.opscode.com (www.opscode.com)... 184.106.28.90 10.0.0.19 Connecting to www.opscode.com (www.opscode.com)|184.106.28.90|:443... failed: Connection timed out. 10.0.0.19 Retrying.
[2014-05-20 04:39:02 -0400] digitalchild: but write all my own yum repo cookbooks that depend on it
[2014-05-20 04:39:18 -0400] rfergu: any idea how to start debugging this?
[2014-05-20 04:39:22 -0400] digitalchild: so i have vmware and others
[2014-05-20 04:39:43 -0400] robawt: digitalchild: ok so you're downloading all in the same but then you're writing digitalchild_yum that does all of the work?
[2014-05-20 04:40:03 -0400] digitalchild: yeah
[2014-05-20 04:40:09 -0400] digitalchild: i use roles and applie the cookbooks to the roles
[2014-05-20 04:40:48 -0400] digitalchild: so my yum-vmware allows me to then reference yum_repository 'vmware-tools' do
[2014-05-20 04:41:00 -0400] digitalchild: and it'll create the repo file and put it in the write spot
[2014-05-20 04:41:40 -0400] robawt: nice
[2014-05-20 04:41:49 -0400] robawt: that's exactly what i've got stuck in my head
[2014-05-20 04:41:57 -0400] robawt: i'm glad to know i'm on the right path
[2014-05-20 04:42:03 -0400] digitalchild: im very new to this
[2014-05-20 04:42:09 -0400] elebertus: hmm, so if I submit a PR and open a jira ticket do I just need to wait until someone hops on it?
[2014-05-20 04:42:16 -0400] digitalchild: last 2 months or so, seriously focusing on it the last 3 weeks
[2014-05-20 04:42:17 -0400] elebertus: *for a cookbook
[2014-05-20 04:42:47 -0400] robawt: i'm coming from salt and trying to implement all of the things i complain about
[2014-05-20 04:43:05 -0400] digitalchild: shell scripts here..
[2014-05-20 04:43:35 -0400] cheeseplus: robawt: http://misheska.com/blog/2013/06/16/getting-started-writing-chef-cookbooks-the-berkshelf-way/
[2014-05-20 04:44:00 -0400] robawt: thx cheeseplus
[2014-05-20 04:44:13 -0400] cheeseplus: that is one of the many guides to the wrapper cookbook method
[2014-05-20 04:45:58 -0400] rfergu: Any idea what causes "Waiting for sshd........................................ERROR: Errno::ENOTCONN: Socket is not connected"?
[2014-05-20 04:46:40 -0400] digitalchild: cheeseplus: berkshelf recommended over just writing cookbooks from scratch and using knife upload ?
[2014-05-20 04:46:46 -0400] digitalchild: and knife cookbook create ?
[2014-05-20 04:47:08 -0400] cheeseplus: yes, generally
[2014-05-20 04:47:17 -0400] digitalchild: ok, ill read up on this
[2014-05-20 04:47:28 -0400] cheeseplus: berkshelf takes care of your deps
[2014-05-20 04:47:31 -0400] digitalchild: cause ive already written 30 odd cookbooks ..
[2014-05-20 04:47:42 -0400] someara: https://drive.google.com/file/d/0B30tP3uIQZBAS2ZjbWdBZGJ4M2c/edit?usp=sharing
[2014-05-20 04:47:43 -0400] robawt: cheeseplus: it also stores all specific versions of cookbooks, right?
[2014-05-20 04:47:45 -0400] cheeseplus: so you can lock them down as you need
[2014-05-20 04:47:54 -0400] someara: ^ let me know what you think... find bugs and email them to me =)
[2014-05-20 04:47:55 -0400] cheeseplus: robawt: correct
[2014-05-20 04:48:34 -0400] robawt: someara: if there's not a basket full of kittens to kill i'm not interested
[2014-05-20 04:48:36 -0400] robawt: :)
[2014-05-20 04:49:26 -0400] someara: https://tickets.opscode.com/browse/OHAI-526
[2014-05-20 05:21:17 -0400] robawt: cheeseplus: this is a great walk through, thanks again
[2014-05-20 05:21:48 -0400] cheeseplus: np, it's helped a lot of folk
[2014-05-20 07:43:40 -0400] whiteadam: quit
[2014-05-20 07:43:46 -0400] whiteadam: stupid slashes
[2014-05-20 08:32:06 -0400] eft_: Hello everyone, I can't seem to login to my chef-webui anymore
[2014-05-20 08:32:26 -0400] monsterzz: eft_: 11.1? :)
[2014-05-20 08:32:31 -0400] eft_: I thought I has forgotten the password so I created a new admin account using knife but it simply goes back to the login screen
[2014-05-20 08:32:49 -0400] eft_: I had this in 11.0 and then tried to update so now yes I'm on 11.1
[2014-05-20 08:33:04 -0400] whiteadam: I thought the gods solved that problem
[2014-05-20 08:33:27 -0400] monsterzz: eft_: check https://tickets.opscode.com/browse/CHEF-5301
[2014-05-20 08:33:28 -0400] eft_: I'm not seeing anything using chef-server-ctl tail
[2014-05-20 08:34:45 -0400] monsterzz: eft_: also nothing in logs. you could try to patch session_store.rb with your actual external DNS name, it should help
[2014-05-20 08:35:05 -0400] monsterzz: but you need to be very verbose afterwards using chef-server-ctl reconfigure and upgrade
[2014-05-20 08:37:09 -0400] eft_: I'm testing..
[2014-05-20 08:39:53 -0400] eft_: fantastic :)
[2014-05-20 08:39:55 -0400] eft_: Thanks !
[2014-05-20 09:36:10 -0400] jpic: hi all, is there any way to get kitchen to dump the suite attributes ?
[2014-05-20 09:38:58 -0400] jpic: using the percona::server recipe, trying to override default['percona']['version'], using syntax from http://docs.opscode.com/config_yml_kitchen.html : http://dpaste.com/282NXP3/ it doesn't work, it still tries 5.6
[2014-05-20 09:41:27 -0400] jpic: so i'd like an easier way to try my attribute override than kitchen {destroy,create,converge}
[2014-05-20 09:42:02 -0400] markweston: Anyone else seeing Librarian having trouble connecting to opscode?
[2014-05-20 09:42:04 -0400] markweston: ould not get http://community.opscode.com/api/v1/cookbooks/runit because 502 Bad Gateway!
[2014-05-20 09:42:08 -0400] srenatus: have you had a look at kitchen diagnose?  I'm not sure if it should show that, but maybe it does
[2014-05-20 09:47:57 -0400] jpic: kitchen diagnose does show percona version 5.5, but still it installs 5.6: http://dpaste.com/0HZ1HPT/ (kichen.yml, kitchen diagnose, kitchen create/converge output)
[2014-05-20 10:09:33 -0400] srenatus: jpic: if this is your percona cookbook, you probably have to override node[percona][server][package]
[2014-05-20 10:12:07 -0400] jpic: srenatus: really ? that's the one i'm trying: https://github.com/phlipper/chef-percona/blob/master/attributes/default.rb#L24
[2014-05-20 10:15:50 -0400] whiteadam: jpic: I would probably just try making a wrapper cookbook and over-riding it there
[2014-05-20 10:17:24 -0400] jpic: well that's what i'm trying to do
[2014-05-20 10:17:38 -0400] whiteadam: then you don't need to specify attributes
[2014-05-20 10:17:47 -0400] whiteadam: in the kitchen file
[2014-05-20 10:17:52 -0400] srenatus: jpic: that line sets the local variable "version" and the node attribute _in default_precedence_ to 5.6
[2014-05-20 10:18:11 -0400] srenatus: jpic: there's no way to override that variable and it's the variable that is used in the package attribute further below
[2014-05-20 10:18:30 -0400] srenatus: jpic: so your only change is overriding the package name, not the version
[2014-05-20 10:18:40 -0400] whiteadam: ^
[2014-05-20 10:18:46 -0400] jpic: ahhhh thanks i get it, it's hardcoding the version
[2014-05-20 10:18:50 -0400] srenatus: jpic: yes, this looks pretty much like broken logic in the percona cookbook.
[2014-05-20 10:40:14 -0400] whiteadam: Anyone know what the name of the program is that makes those nicely formatted comments?
[2014-05-20 11:08:04 -0400] jpic: hi all, how do you recommend to debug kitchen ? is it possible to run it interactively with a ruby console ? I've seen the ktichen console command, i did read the help but it just doesn't explain how to get started. Also it would be cool if I could get kitchen to "dry-run", ie. print all commands it would run etc ... without doing anything "for real" to save time
[2014-05-20 11:43:33 -0400] srenatus: jpic: just to be sure: dry-running test-kitchen (i.e. see it copy cookbooks and stuff) or chef-client (i.e. see resources begin defined and converged)?
[2014-05-20 11:49:01 -0400] jpic: i think chef-client dry-running is what i was actually looking for, thanks for the heads up srenatus
[2014-05-20 12:02:32 -0400] srenatus: jpic: look up why-run then (param -W)
[2014-05-20 12:02:53 -0400] srenatus: jpic: it's not perfect but quite useful
[2014-05-20 13:28:21 -0400] kitemikaze: Hello, Im writing a cookbook and I need to detect if the platform is a docker container. Is there something like case node[platform] when docker  ? thnaks
[2014-05-20 13:29:25 -0400] kitemikaze: Hello, Im writing a cookbook and I need to detect if the platform is a docker container. Is there something like case node[platform] when docker  ? thanks
[2014-05-20 13:29:26 -0400] lewiz: Anybody able to comment on whether http://docs.opscode.com/server_security.html is up-to-date?  I have a fresh latest Chef 11 open source server install and the paths do not match up
[2014-05-20 13:30:21 -0400] whiteadam: kitemikaze: I don't think so: https://tickets.opscode.com/browse/OHAI-581?page=com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab
[2014-05-20 13:30:28 -0400] whiteadam: or https://tickets.opscode.com/browse/OHAI-581
[2014-05-20 13:40:45 -0400] CPS: kitemikaze: i'm not familiar with docker, but i would start by running ohai and looking for docker or anything associated with it in the output
[2014-05-20 13:57:10 -0400] mati_user_ctes: Hello Team //  knife cookbook upload <cookbook_name> ERROR: Failed to upload 413 "Request Entity Too Large" trying to upload a cookbook that has a tgz 499M Any ideas.
[2014-05-20 13:57:58 -0400] ErebusBat: mati_user_ctes: sounds like the proxy is killing it for being to big.  Is there a reason you have it that big?
[2014-05-20 13:58:51 -0400] ErebusBat: Any node that uses that cookbook will have to download all 500M.  I would assume you have some pretty big files in there... Can you offload them and just reference a URL in your recipes, or must they be in the cookbook?
[2014-05-20 14:01:28 -0400] mati_user_ctes: <ErebusBat> thanks. I see your point. I can not reduce that tgz. They are apache images / staff.  So is a chef limitation on large files ?
[2014-05-20 14:03:14 -0400] ErebusBat: mati_user_ctes: I don't understand 'apache images / staff'   It is not a limitation that I know of, it sounds like the HTTP reverse proxy (apache) that is giving you that error, so it never even gets to chef.   Are you using Open Source Chef or Hosted/Enterprise Chef?
[2014-05-20 14:04:20 -0400] gchristensen: mati_user_ctes: a cookbook is seriously the wrong way to distribute assets like that
[2014-05-20 14:05:13 -0400] mati_user_ctes: <ErebusBat> Open Source Chef server  I was looking to http://www.cyberciti.biz/faq/linux-unix-bsd-nginx-413-request-entity-too-large/
[2014-05-20 14:07:06 -0400] ErebusBat: Same principle; however I believe that Open Source Chef server uses apache and that article is for nginx
[2014-05-20 14:07:48 -0400] ErebusBat: mati_user_ctes: ^^ --- is there any way you can move that tar to a different server (even a CDN of some sort) and detect if you need it in your cookbook and download and extract it?
[2014-05-20 14:08:52 -0400] ErebusBat: If you do not then even a 1 character change in another part of your cookbook will result in massive delays on your nodes.  Depending on how many nodes you have with this cookbook then it could also put massive load on your chef server as they all request the same 500M file
[2014-05-20 14:14:25 -0400] mati_user_ctes:  <ErebusBat> I will need to work around that cookbook. Yes I see the point on having massive delays from my nodes. I was looking to https://github.com/berkshelf/berkshelf/issues/189
[2014-05-20 14:15:58 -0400] ErebusBat: mati_user_ctes: Are you saying that you are not the cookbook author and can not change it?  That issue looks like berkshelf will just exit early and tell you that it failed, not actually let you upload your cookbook?
[2014-05-20 14:19:53 -0400] ErebusBat: mati_user_ctes: Do you know how big your OHAI dataset is that gets posted back to your chef server? See the comments CHEF-4491, specifically: https://tickets.opscode.com/browse/CHEF-4491?focusedCommentId=45455&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-45455
[2014-05-20 14:22:15 -0400] mati_user_ctes: <ErebusBat> Let said I participate in this code, I remenber we distribute this 499M with Puppet no problem. Let me ask are you sure chef-server_11.1.0-1_amd64.deb used apache ?
[2014-05-20 14:24:47 -0400] ErebusBat: No I am not sure.  You can up the limit using either nginx or apache (with the correct syntax of course).  I would just caution against it (again)... I believe you will run into more problems down the road than you are solving now
[2014-05-20 14:29:19 -0400] cowboycoder: is it possible to make chef_zero persistent when using testkitchen?
[2014-05-20 14:31:15 -0400] mati_user_ctes: <ErebusBat> I see, I will test with apache / nginx configurtation files first. But definetely need to work around that cookbook.
[2014-05-20 14:38:32 -0400] Lars__: Hi there! I'm running chef-client (v 11.10.4) and it hangs on "resolving cookbooks for run list:" I don't get any other information on the terminal
[2014-05-20 14:39:41 -0400] rayrod2030: Lars__: have you checked the CPU on the server?  Might be the resolve bug.
[2014-05-20 14:39:58 -0400] rayrod2030: can you run other knife commands against the server or use the UI while it hangs in chef-client?
[2014-05-20 14:40:45 -0400] Lars__: more info: I'm managing my cookbooks with Berkshelf, it happened for the first time after updating the gem to the latest version
[2014-05-20 14:41:03 -0400] Lars__: might be problem with Berkshelf instead?
[2014-05-20 14:42:18 -0400] Lars__: I can run chef commands and access the web interface
[2014-05-20 14:42:26 -0400] Lars__: knife commands I mean
[2014-05-20 14:44:53 -0400] Evangael: Lars__, when the cookbook list is empty, from my experience, there's a dependency issues.
[2014-05-20 14:44:59 -0400] Lars__: CPU is idle
[2014-05-20 14:45:51 -0400] Lars__: thanks Evangael, I haven't copied the entire command, sorry
[2014-05-20 14:46:02 -0400] Lars__: It's more like: resolving cookbooks for run list: ["ohai", "apt", "iptables", "openssh", "openssh".... etc
[2014-05-20 14:55:01 -0400] coredump: Hey, on test kitchen, is there a way to create a test recipe that will be ran only for testing? I have a LWRP provider and don't want to create a recipe to test that will be available for people. Is that a thing?
[2014-05-20 14:56:04 -0400] rayrod2030: coredump: yes just add it to test/cookbooks and put it in berksfile
[2014-05-20 14:56:13 -0400] rayrod2030: then call it from your test kitchen suite
[2014-05-20 14:56:43 -0400] coredump: it must have the whole structure of a cookbook right? Thanks.
[2014-05-20 14:56:44 -0400] rayrod2030: I do that same exact thing here: https://github.com/mdsol/mesos_cookbook
[2014-05-20 14:56:50 -0400] davidordave: @coredump, the jenkins cookbook is a cool example of this setup. https://github.com/opscode-cookbooks/jenkins
[2014-05-20 14:56:51 -0400] rayrod2030: coredump: yeah but it's minimal
[2014-05-20 14:57:03 -0400] coredump: Also, what's the accepted way of returning an error on an LWRP?
[2014-05-20 14:57:07 -0400] rayrod2030: yeah jenkins cookbook is my reference for most techniques
[2014-05-20 15:16:31 -0400] phantasm66: Howdy chefs....
[2014-05-20 15:17:25 -0400] someara: rayrod you should as yum, yum-epel, and mysql to your reference list =)
[2014-05-20 15:19:13 -0400] phantasm66: i have a node attribute that is a rather lengthy ruby hash... i want to load this from a yaml file (which can also reside in the same cookbook (perhaps under libraries/ ?)... but knowing that a chef-client run has compile (first) and execute (second) phases... i am not certain the best way to do this
[2014-05-20 15:19:31 -0400] rayrod2030: someara: oh yeah of course.  mysql was the OG library-ish cookbook before all the kids were doing library cookbooks in williamsburg. :)
[2014-05-20 15:20:02 -0400] phantasm66: Anybody else in here ever load node attributes from a YAML file?
[2014-05-20 15:20:08 -0400] rayrod2030: someara: so kudos
[2014-05-20 15:20:14 -0400] phantasm66: and if so.. how did you do that ;)
[2014-05-20 15:20:39 -0400] someara: actually its only recently a library cookbook. =)
[2014-05-20 15:23:04 -0400] rayrod2030: yeah I always felt like it had a library like vibe without actually implementing them till later.  I've been digging some of the changes to the 1.4 branch of lusis's logstash cookbook.
[2014-05-20 15:23:42 -0400] rayrod2030: nice stuff for custom templates and service discovery
[2014-05-20 15:24:20 -0400] alexbst: howdy rayro :-)
[2014-05-20 15:25:04 -0400] rayrod2030: hey alex
[2014-05-20 15:25:37 -0400] alexbst: I just introduced my mom to Android in the form of a Moto E.
[2014-05-20 15:26:39 -0400] rayrod2030: did she question you about the legitimacy of the oracle/google java patent ruling?
[2014-05-20 15:26:59 -0400] rayrod2030: or just ask for "angry birds" to be installed.
[2014-05-20 15:27:36 -0400] alexbst: she just wants to try and keep up with technology.
[2014-05-20 15:28:08 -0400] nullspoon: I've got a chef/windows question. I'm trying to transfer a file as a part of a particular cookbook using chef 10.26.0 (unfortunatley upgrade isn't an option). I'm fairly certain my recipe syntax is correct, but I keep getting Permission Denied.
[2014-05-20 15:28:39 -0400] nullspoon: More specifics, I tried doing a template to the same directory and it worked fine.
[2014-05-20 15:28:48 -0400] nullspoon: Anyone have any ideas?
[2014-05-20 15:30:00 -0400] rayrod2030: ohai question: anyone run into an ohai bug recently in aws where the ec2 node attribute does not get populated at all?  I'm on chef-client 11.12.2 using hosted chef and running in a VPC.
[2014-05-20 15:30:22 -0400] rayrod2030: I don't see cloud_v2 attributes either as a result.  Basically not cloud ohai stuff at all.
[2014-05-20 15:30:52 -0400] alexbst: ohai lnxchk :D
[2014-05-20 15:32:06 -0400] nullspoon: I take it that means no one wants to touch a question with chef on windows. It's okay, I understand. I don't want to either.  :)
[2014-05-20 15:33:15 -0400] alexbst: nullspoon - maybe post up the resource bits to a gist along with the full error ? I don't mind looking.
[2014-05-20 15:33:29 -0400] nullspoon: That'd be awesome alexbst. I'd really appreciate it.
[2014-05-20 15:33:55 -0400] alexbst: rayrod2030 - check how the ohai plugins work and try and reproduce it ?
[2014-05-20 15:35:00 -0400] alexbst: iirc it pokes the local aws data node thingy on the 196 address for the host's ec2 metadata. Maybe somehow it isn't working in your particular case.
[2014-05-20 15:35:10 -0400] alexbst: rayrod2030 - also have you shot it and relaunched ?
[2014-05-20 15:36:20 -0400] rayrod2030: alexbst: seeing this on all my nodes so it's reproduceable.  I have looked at the metadata and know it's available.  I did find a bug where if just one metadata attribute is unreachable from aws the whole attribute bombs out.
[2014-05-20 15:36:20 -0400] nullspoon: alexbst: https://gist.github.com/anonymous/2835dce71f5c9639fdf4
[2014-05-20 15:38:24 -0400] alexbst: nullspoon - have you tried the 7zip community cookbook ?
[2014-05-20 15:39:31 -0400] nullspoon: alexbst:unfortunately I cannot. I'll have a look at it though. I didn't know there was one for it.
[2014-05-20 15:39:47 -0400] alexbst: rayrod2030 - ouch. I would search and/or raise a bug on https://tickets.opscode.com/browse/OHAI
[2014-05-20 15:40:45 -0400] alexbst: nullspoon - https://github.com/Blackavar/7-zip/blob/master/recipes/default.rb - doesn't specify a user, so it should run as Administrator.
[2014-05-20 15:40:54 -0400] alexbst: or whatever the system-level equivalent of Administrator is.
[2014-05-20 15:41:33 -0400] nullspoon: alexbst:I'm running chef-client manually from a powershell term running as administrator.
[2014-05-20 15:44:02 -0400] alexbst: notice that the 7-zip recipe effectively skips the creation of a path, using the chef built in temp/cache directory instead (most probably)
[2014-05-20 15:45:10 -0400] nullspoon: alexbst:I did notice that. The thing that I'm finding strange is the files directory isn't being created on the server after chef-client runs.
[2014-05-20 15:46:10 -0400] nullspoon: I'm wondering if chef-client thinks that files/default doesn't apply to windows for some reason, and thus is not transferring the file?
[2014-05-20 15:46:23 -0400] nullspoon: Really though I'm just grasping at the air here. I've been banging my head on this for a while now.
[2014-05-20 15:46:40 -0400] alexbst: nullspoon - sometimes I've found things are fixed by having double quotes around them..
[2014-05-20 15:46:53 -0400] alexbst: so try a "#{fqd}" or something like that.
[2014-05-20 15:47:04 -0400] nullspoon: Huh. Never thought of that.
[2014-05-20 15:47:12 -0400] nullspoon: I was hoping literals would work.
[2014-05-20 15:47:22 -0400] nullspoon: Give me a few to try.
[2014-05-20 15:47:37 -0400] alexbst: + I am never sure about correct directory form on Windows.
[2014-05-20 15:47:47 -0400] alexbst: is it c:\x\y or c:/x/y ? ;)
[2014-05-20 15:48:19 -0400] nullspoon: right?
[2014-05-20 15:48:25 -0400] nullspoon: ha
[2014-05-20 15:49:12 -0400] nullspoon: Negatory on the quotes.
[2014-05-20 15:49:40 -0400] nullspoon: mmm.This has been good even if it hasn't fixed my issue. At least it gave me some more ideas.
[2014-05-20 15:50:04 -0400] alexbst: I would try skip this and just reuse the community 7zip's contents.
[2014-05-20 15:51:58 -0400] nullspoon: I'm testing that now actually.
[2014-05-20 15:54:31 -0400] eft_: nullspoon: is chocolatey an option?
[2014-05-20 15:57:30 -0400] nullspoon: eft_: Unfortunately I think not.
[2014-05-20 15:57:51 -0400] alexbst: how about milo ?
[2014-05-20 15:58:10 -0400] nullspoon: Eh. Sadly the approach that needs to be taken here I think is it all has to be written in house.
[2014-05-20 15:58:40 -0400] nullspoon: Though I will bring these up to see if they're viable options.
[2014-05-20 15:59:41 -0400] eft_: chocolatey "7zip" would be easier in a recipe :)
[2014-05-20 16:00:03 -0400] nullspoon: Heh. I'm not disagreeing at all.
[2014-05-20 16:00:19 -0400] nullspoon: I'd like nothing more than repo-style functionality for installs.
[2014-05-20 16:00:55 -0400] nullspoon: *sigh* no windows cookbook
[2014-05-20 16:01:58 -0400] alexbst: nullspoon - where are you working, NIH Inc. ?
[2014-05-20 16:02:51 -0400] dgarstang: Anyone using the edgelight mongodb cookbook?
[2014-05-20 16:02:55 -0400] nullspoon: Heh. Nope. Not far off though.
[2014-05-20 16:03:08 -0400] eft_: dgarstang: simply tested it for a basic install
[2014-05-20 16:04:10 -0400] dgarstang: eft_: not with sharding?
[2014-05-20 16:04:56 -0400] alexbst: nullspoon - I hope they let you use the windows community cookbook - without it you are going to suffer needlessly.
[2014-05-20 16:04:58 -0400] eft_: not yet no sorry ... it's also one of my next actions
[2014-05-20 16:05:35 -0400] dgarstang: eft_: it's a bit painful :)
[2014-05-20 16:06:07 -0400] nullspoon: alexbst: We'll see. I'm definitely going to bring it up.
[2014-05-20 16:06:20 -0400] double_p: NIH inc is over here :P
[2014-05-20 16:07:23 -0400] eft_: dgarstang: have to leave for now. Wish you good luck and hope I'll find you here where I start experimenting :)
[2014-05-20 16:08:28 -0400] nullspoon: Sweet mother I got it to transfer a file finally!
[2014-05-20 16:08:42 -0400] nullspoon: Had to send it to c:\windows\temp
[2014-05-20 16:08:52 -0400] nullspoon: Just need to figure out what the perm difference is now.
[2014-05-20 16:09:49 -0400] alexbst: :-)
[2014-05-20 16:09:51 -0400] alexbst: B RB
[2014-05-20 16:12:12 -0400] shlant: if I wanted to provision a MEAN stack, anyone have suggestions on what cookbooks to use?
[2014-05-20 16:12:31 -0400] shlant: node? nodejs? applications_nodejs?
[2014-05-20 16:13:12 -0400] alexbst: shlant - existing cookbooks have mongo and node covered at the minimum
[2014-05-20 16:14:20 -0400] shlant: yea I wil use the mongodb cookbooks
[2014-05-20 16:14:23 -0400] shlant: cookbook
[2014-05-20 16:14:58 -0400] shlant: but what about angular, node and express?
[2014-05-20 16:16:11 -0400] alexbst: shlant - maybe you should write some, or find some with good licenses, and publish to community ?
[2014-05-20 16:16:47 -0400] gkra: Joy. Just used the RVM cookbook to install a system ruby (2.1.2) and now chef-client is broken (omnibus install)
[2014-05-20 16:17:27 -0400] gkra: why would chef-client care about things that are outside its omnibus?
[2014-05-20 16:19:46 -0400] nullspoon: alexbst: HaHAAAAAaaaa! Progress has been made. It's not transferring the file for whatever reason. I'm guessing it's permission denied becuase the file doesn't exist on the client when it tries to move it to the tmp dir.
[2014-05-20 16:20:54 -0400] xcook: hi.. knife search node 10.11.11.1 -a run_list  returns all hosts matching 1*...e.g 10.11.11.1,10.11.11.11,10.11.11.111 etc..how can i get output for only "10.11.11.1"
[2014-05-20 16:22:07 -0400] alexbst: orsm nullspoon
[2014-05-20 16:22:38 -0400] nullspoon: alexbst: Got it. Looks like when I specify source it doesn't trasnfer the file. I misread that as potentially meaning either an fqdn Or the files/default filename. Guess it doesn't mean that.
[2014-05-20 16:22:46 -0400] gleam: ipaddress:10.11.11.1 should work
[2014-05-20 16:23:04 -0400] alexbst: nullspoon - it may work with a file:// url.. but I haven't tested that.
[2014-05-20 16:24:07 -0400] nullspoon: alexbst: Don't say that. Don't breathe, don't think. We don't want it to break.   :)
[2014-05-20 16:28:00 -0400] dgarstang: omg, I wish chef would log more than just "undefined method `[]' for nil:NilClass"
[2014-05-20 16:28:18 -0400] jblack: dgarstang:  It does. Ther's a log in /var/log/chef-somethingorother
[2014-05-20 16:28:37 -0400] jblack: somewhere under the "undefined method" it should say where the stack dump is
[2014-05-20 16:29:36 -0400] dgarstang: cjblack: it actually has the variable name? Cuz, I'm not seeing it
[2014-05-20 16:30:21 -0400] jblack: mmm, thought there was more there. sorry.
[2014-05-20 16:30:48 -0400] xcook: <gleam> thanks
[2014-05-20 16:31:13 -0400] dgarstang: I must not have the ruby skillz... http://pastebin.com/43jZ9mUP
[2014-05-20 16:31:55 -0400] dgarstang: I mean, the line # that the backtrace refers to has 'ruby_block 'config_replicaset' do' ... how can that be nil?
[2014-05-20 16:36:36 -0400] nullspoon: dgarstang: I'm fairly new to chef, so this might not be helpful, but I've found that with those fantastically verbose (yeah, that's what we'll call them) errors, puts is your friend.
[2014-05-20 16:37:45 -0400] dgarstang: nullspoon: I've found the opposite. Due to the whole multi-phase compile thing, putting a puts in the recipe to debug an empty variable probably won't help. Doing that has been an effective way of debuging code since, I don't know... 1969?
[2014-05-20 16:40:13 -0400] shlant: is it just me or is http://community.opscode.com/ slowwwwww
[2014-05-20 16:41:37 -0400] CPS: puts will always be a debug method
[2014-05-20 16:42:39 -0400] dgarstang: CPS: not always with chef.
[2014-05-20 16:43:12 -0400] dgarstang: alternatively, if anyone has an implemention of the edgelight mongo cookbook somewhere...
[2014-05-20 16:43:19 -0400] double_p: chef-client --debug-from-orbit *wish* ):>
[2014-05-20 16:43:25 -0400] nullspoon: dgarstang: I agree with you. I've just run into issues a lot where cookbooks pull variables from other cookbooks without defining those cookbooks as dependencies, and thus you have nill errors all over. It's a big progblem when people write ruby like old school perl and cram as much on one line as possible.
[2014-05-20 16:43:50 -0400] nullspoon: dgarstang: "Error: line 152"...There are over 50 variables on that line!!!  *mind explodes*
[2014-05-20 16:45:07 -0400] dgarstang: nullspoon: *lol* i hate the put-everyhing-on-one-line-stuff too. '
[2014-05-20 16:46:43 -0400] double_p: nullspoon: debugging such 'works on my machine' cookbooks is along http://alexshabanov.com/wp-content/uploads/2012/05/refactoring.gif :}
[2014-05-20 16:49:04 -0400] dgarstang: debugging chef is so infuriating
[2014-05-20 16:51:15 -0400] geggam: KISS and debugging is simple dgarstang
[2014-05-20 16:51:57 -0400] daos: anyone see inexplicable 403 Forbidden errors in /var/log/chef/client.log for the chef-client daemon but running the command `sudo chef-client` by hand works without any errors?
[2014-05-20 16:52:00 -0400] geggam: config management... not system management :) ...
[2014-05-20 16:55:12 -0400] StFS: Hey. I'm running into problems with installing a chef server. I installed the RPM and after changing the hostname to the FQDN and running chef-server-ctl reconfigure I'm able to get to the chef server webui login page. But if I log in it hangs and eventually displays an error message.
[2014-05-20 16:55:47 -0400] dgarstang: geggam: err, and how do you deal with the fact that putting a puts in the recipe doesn't help when the variable AFTER isn't defined and then chef stops?
[2014-05-20 16:57:57 -0400] StFS: looking at the logs (chef-server-ctl tail) it looks like this has something to do with an error rendering some template: https://gist.github.com/StFS/da39fbcd99da1a726c91
[2014-05-20 17:00:17 -0400] geggam: define the variable ? ... I just attempt to make my recipes so simple there is little to break dgarstang ... 50 variables means its too complex for how i do things
[2014-05-20 17:00:45 -0400] geggam: im not suggesting my way is perfect or the only way.... i plan for shit to break and try to make it easy to figure out what is broken
[2014-05-20 17:01:38 -0400] dgarstang: geggam: a mongo recipe isnt exactly going to be simple
[2014-05-20 17:02:01 -0400] geggam: yeah... nosql is abused and overused IMHO
[2014-05-20 17:04:58 -0400] daos: what's the proper way for clearing node/client PEM data from the chef server (installed via omnibus into /opt)
[2014-05-20 17:07:53 -0400] dgarstang: omg, this edgelight mongo cookbook is.... terrible.
[2014-05-20 17:08:56 -0400] tubbo: are there any life-cycle management tools that are designed to work specifically with Chef?
[2014-05-20 17:09:37 -0400] geggam: i have heard someone say theforeman is going to head that way tubbo
[2014-05-20 17:09:59 -0400] tubbo: i know of razor, ubuntu MAAS, cobbler, spacewalk, and the foreman...they all seem to have built-in Puppet integration (some of which developed by Puppet Labs themselves)
[2014-05-20 17:10:18 -0400] tubbo: geggam: that would be awesome, since the only guy on our team that has experience with this stuff used theforeman :)
[2014-05-20 17:10:43 -0400] dgarstang: I don't get it. the mongo cookbook fails to configure the replicaset because "server is not running with --replSet" ... isn't that it's job to do that? Argh.
[2014-05-20 17:14:32 -0400] dotplus: I'm trying to create an environment, `knife environment create test from file environments/test.rb`  (the contents of test.rb are pasted at http://sprunge.us/FfJL), but knife just dumps me into an editor with a bare json environment template. Is there something wrong with my file? or is my knife command not reading it? or what?
[2014-05-20 17:16:03 -0400] davidordave: @dotplus, I think you want knife environment from file
[2014-05-20 17:16:26 -0400] davidordave: not knife environment create
[2014-05-20 17:18:15 -0400] dotplus: davidordave: no, knife errors "cannot find sub command"
[2014-05-20 17:21:15 -0400] davidordave: @dotplus, what version of knife? I get "USAGE: knife environment from file FILE [FILE..] (options)" on 11.12.2
[2014-05-20 17:21:40 -0400] alexbst: dernit, where'd rayro go
[2014-05-20 17:22:52 -0400] dotplus: davidordave: 11.14.0.alpha.1 which is what I got from opscode's enterprise installation instructions a couple of weeks ago
[2014-05-20 17:23:50 -0400] rfergu: My knife run is stalling on "10.0.0.7 --2014-05-20 17:18:48--  https://www.opscode.com/chef/install.sh"  but I'm on my AWS VPC's public subnet and https is open.  Any idea what I'm missing?
[2014-05-20 17:24:39 -0400] Simon_H: does it work if you do wget https://www...?
[2014-05-20 17:25:02 -0400] rfergu: Let me go on to that machine
[2014-05-20 17:27:44 -0400] rfergu: yeah its not able to wget some aws port thing is wrong :(
[2014-05-20 17:31:03 -0400] dgarstang: Anyone got a working implementation of the edgelight mongo cookbook?
[2014-05-20 17:33:35 -0400] devjj: Question: I've included the apt::default recipe early in my run list, but I'm still getting the apt error 100 when trying to install packages. It doesn't look like apt-get update is actually running. Has anyone seen this before?
[2014-05-20 17:46:22 -0400] b-dean: so I noticed with https://tickets.opscode.com/browse/CHEF-3820 that attribute files from other cookbooks only get loaded when there are dependencies
[2014-05-20 17:47:12 -0400] b-dean: I have a cookbook that uses suggests rather than depends, because they only need apache2 or whatever else if they're using certain recipes that use include_recipe
[2014-05-20 17:47:27 -0400] b-dean: but that's not causing the attribute files to get loaded
[2014-05-20 17:48:12 -0400] b-dean: so I was wondering, what's the point of suggests/recommends if you *have* to use depends in the metadata if you actually want the other cookbook to ... work
[2014-05-20 17:49:03 -0400] rfergu: hmmph...  My node is on the public VPC, the security group has literally all connections open, and I can't curl from the box.  Is there something special I should have sent from knife-ec2?
[2014-05-20 17:50:25 -0400] shlant: coderanger: in the citadel cookbook, I assume the role it mentions in the IAM policy is AWS roles, not chef?
[2014-05-20 17:50:40 -0400] rfergu: hmm the instance doesn't have a public ip
[2014-05-20 18:11:47 -0400] isotope: Can anyone help out with the syntax for nodetool removenode force?
[2014-05-20 18:12:14 -0400] isotope: I'm trying nodetool removenode force ID and it spits out an error
[2014-05-20 18:17:26 -0400] b-dean: in the docs on cookbook metadata, the difference between recommends and suggests seems to imply that recommendations will actually have some affect on how the cookbook functions. but it seems (from looking at the code) that neither of them do anything useful (such as causing the suggested or recommened cookbook attributes to be loaded)
[2014-05-20 18:17:50 -0400] b-dean: so I'm wondering, what good are they?
[2014-05-20 18:19:01 -0400] Simon_H: A long shot: anyone had trouble runsvdir-start starting rabbitmq from init? I see init -q but Chef reconfig hanging on no /opt/chef-server/sv/rabbitmq/supervise/ok (ENOENT)
[2014-05-20 18:21:15 -0400] Simon_H: I'm doing it straight after template net config (Oracle Linux 5.8) - wondering if it might be timing as if I start reconfig manually it works fine. Would rather not have a sleep 60 tho'!
[2014-05-20 18:26:23 -0400] coderanger: shlant: correct
[2014-05-20 18:26:41 -0400] coderanger: shlant: EC2/IAM sever roles let you assign a security policy to that server
[2014-05-20 18:27:58 -0400] shlant: coderanger: so I can create a role, add a policy to the s3 bucket that includes that role and then specify the role when provisioning the instance?
[2014-05-20 18:28:12 -0400] armendonigian: can someone confirm whether this behavoir is trueI noticed when using remote_file chef resource, if the file exists, the not_if guard is ignored. Its only if the filename doesnt exists, does the not_if guard get evaluated.
[2014-05-20 18:28:17 -0400] coderanger: shlant: I put all the policy in the role itself, but either way works
[2014-05-20 18:28:36 -0400] shlant: coderanger: ok thnaks
[2014-05-20 18:29:13 -0400] coderanger: armendonigian: Hmm, they should be run regardless, but it wouldn't overwrite the file normally
[2014-05-20 18:31:13 -0400] armendonigian: how can i overwrite the file if size has changed using remote_file?
[2014-05-20 18:33:57 -0400] coderanger: armendonigian: by default it uses both the if-last-modified and etags caching headers, does your server support those?
[2014-05-20 18:34:20 -0400] armendonigian: how can i find out if my server supports etags cahcing?
[2014-05-20 18:34:42 -0400] coderanger: armendonigian: Grab the file with curl and see if there is an etags header
[2014-05-20 18:38:24 -0400] ohadlevy: tubbo: there is a chef plugin for foreman, you can have a look at the chefconf videos or wiki/code at github..
[2014-05-20 18:38:50 -0400] jpic: hi all, i'm trying to override this template in my wrapper cookbook: https://github.com/phlipper/chef-percona/blob/master/templates/default/my.cnf.cluster.erb I added my own template to my_cookbook/templates/default/my.cnf.cluster.erb but knife doesn't use it. Any idea please ? Thanks !
[2014-05-20 18:39:15 -0400] tubbo: ohadlevy: just found the chefconf video :)
[2014-05-20 18:39:19 -0400] tubbo: ohadlevy: have you ever used the plugin?
[2014-05-20 18:40:15 -0400] ohadlevy: tubbo: just played around, not that much :)
[2014-05-20 18:40:55 -0400] tubbo: ok
[2014-05-20 18:41:04 -0400] tubbo: i'm just screwing with foreman right now actually
[2014-05-20 18:41:59 -0400] r3dk1ng|2: howdy
[2014-05-20 18:42:17 -0400] ohadlevy: tubbo: you can probably ask more questions on #theforeman
[2014-05-20 18:42:21 -0400] r3dk1ng|2: I have a quick question, I am sure somebody can answer...
[2014-05-20 18:43:23 -0400] r3dk1ng|2: I have a wrapper cookbook that I made for the RabbitMQ Community Cookbook.  I want to exclude some of the included attributes that are supplied by the community cookbook without having to modify it.  What is the best tractice to do this?
[2014-05-20 18:44:15 -0400] r3dk1ng|2: does anyone have experience with this?
[2014-05-20 18:45:44 -0400] someara: attributes aren't "executed" they're loaded.... just put "depends 'rabbitmq'" in your wrapper's metadata.rb and they'll be available to you
[2014-05-20 18:46:33 -0400] r3dk1ng|2: @someara: Right, they are loaded.  I said I want to "EX-CLUDE" them from entering into my wrapper cookbook.
[2014-05-20 18:46:48 -0400] someara: ooh. sorry
[2014-05-20 18:46:50 -0400] someara: yea you can't do that
[2014-05-20 18:46:57 -0400] r3dk1ng|2: Are you sure?
[2014-05-20 18:47:25 -0400] someara: all attributes from all cookbooks dependences are loaded at the start of the chef-client run
[2014-05-20 18:48:05 -0400] someara: what attributes are you trying to exclude and why?
[2014-05-20 18:48:06 -0400] b-dean: r3dk1ng|2: you could delete the attributes from the node in  your cookbook. I don't think if you depend on the cookbook there's any way to prevent the attributes from being loaded but  you could delete or override them (depending on what you're trying to do)
[2014-05-20 18:48:51 -0400] r3dk1ng|2: @somera specifically, the rabbitmq community cookbook.  The HA section at the end, I do not want those.
[2014-05-20 18:50:28 -0400] phantasm66: I wrote a cookbook library that needs to require a gem that would need to be installed before the library is evaluated (i assume that happens during compile phase)
[2014-05-20 18:51:12 -0400] r3dk1ng|2: The only problem with deleting the attributes off the node, is if the community cookbook changes, and those attributes I don't want change, etc, then I have to account for them as well.
[2014-05-20 18:51:21 -0400] someara: r3dk1ng|2 if you load that cookbook they will be present on the node attribute before any recipes are compiled.
[2014-05-20 18:51:24 -0400] phantasm66: i know about the run_action trick to executing during compile phase:
[2014-05-20 18:51:26 -0400] phantasm66: https://gist.github.com/phantasm66/17e378109e5ecc1490bb
[2014-05-20 18:51:31 -0400] someara: use a different hash namespace
[2014-05-20 18:51:59 -0400] phantasm66: But can i actually call chef resource blocks in a cookbook library (which appears to be just straight up ruby)?
[2014-05-20 18:53:02 -0400] b-dean: r3dk1ng|2: you could just delete that ha-all policy. node.default['rabbitmq']['policies'].delete('ha-all') that'd work as long as they have policies like that
[2014-05-20 18:53:03 -0400] tubbo: ohadlevy: did you help develop foreman? i see your name in the credits :) good job
[2014-05-20 18:54:09 -0400] someara: I don't see them used anywhere in the cookbook
[2014-05-20 18:54:27 -0400] someara: why don't you want them?
[2014-05-20 18:54:37 -0400] r3dk1ng|2: Yes, that would probably work.  I would have to delete 'ha-all' and 'ha-two'...
[2014-05-20 18:55:32 -0400] b-dean: they're used by rabbitmq::policy_management
[2014-05-20 18:56:02 -0400] someara: aha
[2014-05-20 18:56:55 -0400] someara: I'd set them to nil in your wrapper, personally
[2014-05-20 18:57:35 -0400] b-dean: the way that loop is written that'd blow up. it's not checking if the policies are nil or not
[2014-05-20 18:58:27 -0400] someara: they'd blow up if you unset them too
[2014-05-20 18:58:33 -0400] someara: s/unset/delete
[2014-05-20 18:58:39 -0400] someara:  /'
[2014-05-20 18:58:55 -0400] someara: (sorry, at a conference)
[2014-05-20 19:01:20 -0400] r3dk1ng|2: I don't want them because I don't use them, and they are annoying whtn then get deployed :)
[2014-05-20 19:02:15 -0400] jpic: FTR chef-rewind did the trick rather nicely
[2014-05-20 19:05:06 -0400] mati_user_ctes: ping <ErebusBat>
[2014-05-20 19:08:25 -0400] rayrod2030: yeah umm so why are keys displayed for iam accounts in aws ohai attributes?
[2014-05-20 19:09:13 -0400] rayrod2030: I'm assuming everybody is whitelisting those right?
[2014-05-20 19:11:33 -0400] jalessio: Anyone around using Razor for provisioning metal via Razor+Chef?
[2014-05-20 19:12:36 -0400] j^2: so question. I see undefined local variable or method `node' for #<Erubis::Context:0x000000031a29c8> running a chef-client run, is there a way for using something like chef-shell i can see why it's not being defined?
[2014-05-20 19:12:52 -0400] j^2: node is created by ohai...iirc....
[2014-05-20 19:13:12 -0400] gchristensen: node is populated b ohai
[2014-05-20 19:13:20 -0400] j^2: :-/
[2014-05-20 19:13:28 -0400] j^2: so node failing is probably ohai?
[2014-05-20 19:13:38 -0400] bgoad: hi, i am having an issue bootstrapping
[2014-05-20 19:13:59 -0400] bgoad: > knife bootstrap X.X.X.X
[2014-05-20 19:14:40 -0400] bgoad: [2014-05-20T15:09:27-04:00] ERROR: POST request was redirected from https://chefqa.ds.com/clients to http://chefqa.ds.com:443/clients. Only GET and HEAD support redirects.
[2014-05-20 19:15:38 -0400] bgoad: my chef-server was setup using omnibus
[2014-05-20 19:15:41 -0400] alexbst: j^2 amazon changed something (mac address prefix) that helps ohai detect it is on ec2
[2014-05-20 19:15:55 -0400] alexbst: you may want to do this : mkdir -p /etc/chef/ohai/hints && touch /etc/chef/ohai/hints/ec2.json
[2014-05-20 19:15:58 -0400] alexbst: and retry.
[2014-05-20 19:16:01 -0400] j^2: alexbst nice thanks
[2014-05-20 19:17:33 -0400] bgoad: and i am having trouble figuring out where i need to fix the setting on the chef-server that populates the server location in client.rb on the bootstrapping node
[2014-05-20 19:17:38 -0400] jpic: hi all, can i tell kitchen to use a particular role ?
[2014-05-20 19:18:27 -0400] rayrod2030: sure
[2014-05-20 19:18:41 -0400] rayrod2030: create a roles directory and reference it from .kitchen.yml
[2014-05-20 19:18:45 -0400] rayrod2030: in your runlist
[2014-05-20 19:19:04 -0400] jpic: ohhh thanks !
[2014-05-20 19:19:07 -0400] rayrod2030: https://github.com/test-kitchen/test-kitchen/issues/129
[2014-05-20 19:19:52 -0400] bgoad: my issue seems to be related to this: https://github.com/opscode/omnibus-chef/commit/3c9760b129b38a8702956816ec9f505e65f35d10
[2014-05-20 19:20:23 -0400] bgoad: any info would be helpful!
[2014-05-20 19:21:05 -0400] jpic: another question if you don't mind, how to tell chef that "use server #1's ip in server #2's configuration when deploying server #2" ?
[2014-05-20 19:21:59 -0400] jpic: what docs would you recommend to read for that ?
[2014-05-20 19:22:10 -0400] rayrod2030: jpic: you mean within test kitchen or for chef in general?
[2014-05-20 19:23:01 -0400] jpic: i'm aiming for kitchen in the mean time
[2014-05-20 19:23:13 -0400] keen: folks, question around chef-client logging.  is there a way to make chef-client -always- log to it's configed logfile (even when it's also outputting to stdout
[2014-05-20 19:23:16 -0400] keen: )?
[2014-05-20 19:23:42 -0400] keen: we have a few specific use cases that call the client manually, and I'd love to still get logs for those runs without jumping through hoops.
[2014-05-20 19:23:43 -0400] rayrod2030: I usually just test single instance with test-kitchen.  have you managed to bring up multiple instances within one test suite?
[2014-05-20 19:23:58 -0400] rayrod2030: keen: tee?
[2014-05-20 19:24:03 -0400] keen: see hoops
[2014-05-20 19:24:22 -0400] rayrod2030: hmm
[2014-05-20 19:24:27 -0400] keen: because teaching a guy to always "chef-client | tee -a to the right place" is..not easy.  esp when you dont have enforcement power.
[2014-05-20 19:24:44 -0400] keen: and wrapping the client itself is another realm of pain for long term maint
[2014-05-20 19:24:48 -0400] keen: (but I may do it..)
[2014-05-20 19:25:38 -0400] jpic: rayrod2030: well not yet ... but that one does i think: https://github.com/stackforge/openstack-chef-repo what about in chef in general ?
[2014-05-20 19:26:22 -0400] rayrod2030: ah yes that project uses vagabond which I have used to test multi-node converge
[2014-05-20 19:26:49 -0400] bgoad: hi all, let's try this again ... has anyone seen issues with this error message when bootstrapping nodes on a chef-server setup via omnibus before? "ERROR: POST request was redirected from https://chefqa.ds.com/clients to http://chefqa.ds.com:443/clients. Only GET and HEAD support redirects."
[2014-05-20 19:27:08 -0400] rayrod2030: so if your question is simply about discovery there are lots of ways to do that but many people do it via chef search based on name/role/environment etc.
[2014-05-20 19:27:43 -0400] jpic: going to learn chef search, thanks rayrod2030
[2014-05-20 19:28:16 -0400] rayrod2030: How is everyone whitelisting node attribs these days?
[2014-05-20 19:28:53 -0400] jeffcara: jpic, if you find a good tutorial on using knife search let me know
[2014-05-20 19:29:02 -0400] jeffcara: Or at least a couple of cookbooks that have good examples
[2014-05-20 19:29:03 -0400] rayrod2030: node[:whitelist] should do it right?
[2014-05-20 19:36:59 -0400] phantasm66: Will this work in a chef library/ file ?
[2014-05-20 19:37:01 -0400] phantasm66: https://gist.github.com/phantasm66/cdf13352d13d2814c88f
[2014-05-20 19:38:00 -0400] phantasm66: Specifically, calling a run_action method on an instantiated Chef::Resource::GemPackage.new
[2014-05-20 19:38:33 -0400] phantasm66: and a 2nd question on if 'Gem.clear_paths' is available in a library/ file as well... ?
[2014-05-20 19:42:27 -0400] NukePuppy: hmm
[2014-05-20 19:42:32 -0400] NukePuppy: why would a cookbook I upload show up
[2014-05-20 19:42:38 -0400] jpic: jeffcara: what about http://docs.opscode.com/essentials_search.html ?
[2014-05-20 19:42:38 -0400] NukePuppy: then dissapear/vanish seconds later
[2014-05-20 19:43:36 -0400] jeffcara: jpic: I have been using that as a starting point, but I like having real world examples as a personal prefernce
[2014-05-20 19:46:32 -0400] Shred00: if i have an "override_attributes :config => { ... }" in multiple roles in a run_list, are they merged to be the union of the two?  what happens with overlapping attributes?
[2014-05-20 19:50:07 -0400] stormerider: any opscode folks that can take a look at a ticket for me?
[2014-05-20 20:03:16 -0400] jmreicha: Is there a general good/best practice for how often to run chef-client on a host machine?
[2014-05-20 20:05:31 -0400] rayrod2030: jmreicha: nope
[2014-05-20 20:05:40 -0400] jharley: anyone else have a chef recipe that restarts networking on Ubuntu 14.04 and were shocked to see the beautiful Stopping or restarting the networking job is not supported. Use ifdown & ifup to reconfigure desired interface. message? #headdesk
[2014-05-20 20:05:41 -0400] r3dk1ng|2: jmreicha: I would assume it's different for every site
[2014-05-20 20:05:50 -0400] rayrod2030: totally depends on how often you want to converge.  15 to 30 minutes is typical.
[2014-05-20 20:06:19 -0400] r3dk1ng|2: Agreed, 15 is pretty good
[2014-05-20 20:06:38 -0400] rayrod2030: jmreicha: I supposed if you converge too often you'll just be spiking your cpu for no reason and mess up your metrics.
[2014-05-20 20:07:12 -0400] rayrod2030: jmreicha: on the other end of the spectrum some people like to just set server state with chef on demand and never run the chef-client daemon.
[2014-05-20 20:07:58 -0400] ianblenke: enterprise chef has a push add-on to trigger a chef-client run: http://docs.opscode.com/push_jobs.html
[2014-05-20 20:08:06 -0400] jmreicha: rayrod2030:  Right.  I want to avoid CPU spiking
[2014-05-20 20:08:57 -0400] jmreicha: ianblenke: That looks sweet
[2014-05-20 20:09:06 -0400] stormerider: i think we have some nodes that are 6h converge, some that are 30m
[2014-05-20 20:09:07 -0400] ianblenke: anyone know when the enterprise stuff will get rolled into hosted opscode?
[2014-05-20 20:09:39 -0400] rayrod2030: stormerider: 6h converge.  shudder.
[2014-05-20 20:09:54 -0400] jmreicha: lol
[2014-05-20 20:09:59 -0400] ianblenke: we use an 18minute splay, for whatever reason.
[2014-05-20 20:10:15 -0400] stormerider: i mean, we can poke them to update if we need to, but those boxes dont change often.
[2014-05-20 20:10:20 -0400] rayrod2030: stormerider: Technically that chef-client should be getting two 15 minute breaks and lunch.  Who do you work for?  Walmart?
[2014-05-20 20:10:48 -0400] stormerider: er, i mean rather 6h poll intervals
[2014-05-20 20:11:13 -0400] jmreicha: stormerider: Why 30 mins?  Is your chef environment changing a ton?
[2014-05-20 20:11:33 -0400] stormerider: on those boxes, more frequently, yes.
[2014-05-20 20:11:51 -0400] rayrod2030: I'm considering converging my zookeeper ensembles on demand.  Way to easy to knock them out of synch with a misconfig.
[2014-05-20 20:12:11 -0400] stormerider: devs updating settings via chef databags, etc, lowers how long they need to wait to see the results
[2014-05-20 20:13:05 -0400] stormerider: anyone know how to get in touch with chef/opscode about a ticket that hasnt been updated in ~4d from creation?
[2014-05-20 20:13:20 -0400] stormerider: (enterprise ticket, i should say)
[2014-05-20 20:13:26 -0400] ErebusBat: stormerider: I assume you have tried support@ ?
[2014-05-20 20:13:54 -0400] stormerider: that's where i filed it initially yes, and i have asked on the ticket for updates
[2014-05-20 20:14:58 -0400] ErebusBat: If you want the nuclear option ping @adamhjk on twitter
[2014-05-20 20:15:16 -0400] ErebusBat: Or @chef
[2014-05-20 20:15:36 -0400] stormerider: thanks. i tend to forget twitter.
[2014-05-20 20:15:38 -0400] sarkis: hey all, is it wise to have chef solo run on a cron? similar to how chef-server would be running and making sure servers converge every X mins
[2014-05-20 20:16:04 -0400] sarkis: currently we have everything with chef-solo, but i miss the days of puppet where it would run on a schedule
[2014-05-20 20:16:22 -0400] sarkis: so basically i am debating if we even need chef-server just for that?
[2014-05-20 20:16:55 -0400] ErebusBat: sarkis no you can run chef-solo from cron, although chef-server would help you manage it better
[2014-05-20 20:17:02 -0400] ErebusBat: How many nodes do you have?
[2014-05-20 20:17:09 -0400] jidar: if you're asking if that's needed, it would likely be the right solution imho
[2014-05-20 20:17:24 -0400] sarkis: ErebusBat: currently about 10
[2014-05-20 20:18:53 -0400] ErebusBat: I agree with jidar.  Infrastructure rarely gets less complicated.  The sooner you put a chef server in there the easier it will be for you.  How many hours have you devoted to your chef-solo solution (syncing cookbooks, etc)?
[2014-05-20 20:19:49 -0400] jidar: if you start with the right design, it's not too bad, but isn't scalable (unless you're looking at massive scale) and even then, still not likely the _right_ solution
[2014-05-20 20:20:20 -0400] sarkis: yea its becoming a pain, i've eased it a bit going application cookbooks using berkshelf way
[2014-05-20 20:20:37 -0400] sarkis: im wondering how much of this i'd have to change
[2014-05-20 20:21:50 -0400] mmzyk: @stormerider One of the other options, if you need someone to look at a ticket thats been sitting, is leave another comment on the ticket, or ping one of the Chef people who sit in this chat room, such as myself. If one of us dont handle it directly we can bring to the attention of someone who will.
[2014-05-20 20:22:53 -0400] stormerider: mmzyk: yeah, i left a comment on it yesterday and earlier today... wasnt sure who all was here from opscode, as i know not all @ folks are current opscode employees (or is coderanger the only exception?)
[2014-05-20 20:25:12 -0400] mmzyk: I think hes currently the only exception. At least he is in the currently list.
[2014-05-20 20:25:40 -0400] mati_user_ctes: Hello just trying to upload a cookbook knife cookbook upload <cookbook-name> getting "ERROR: The data in your request was invalid Response: Field 'metadata.name' invalid"
[2014-05-20 20:26:29 -0400] stormerider: mmzyk: ok, noted for future reference. the ticket is 18028 btw, about berks 3
[2014-05-20 20:26:31 -0400] mati_user_ctes: verbose mode show DEBUG: Expected JSON response, but got content-type '' DEBUG: Chef::HTTP calling Chef::HTTP::JSONInput#handle_response INFO: HTTP Request Returned 400 Bad Request: error /opt/chef-server/embedded/lib/ruby/1.9.1/net/http.rb:2633:in `error!': 400 "Bad Request" (Net::HTTPServerException)
[2014-05-20 20:29:01 -0400] rfergu: hmm...  knife ec2 create works, but I get the error "Waiting for sshd......................................../Users/rob/.rvm/gems/ruby-2.1.1/gems/net-ssh-2.9.1/lib/net/ssh/transport/server_version.rb:47:in `readpartial': Socket is not connected (Errno::ENOTCONN)"  The box bootstraps correctly.
[2014-05-20 20:29:18 -0400] rfergu: I got the error before the box was done setting up
[2014-05-20 20:33:19 -0400] elebertus: asked this pretty late last night, if I have a PR for a cookbook and a jira ticket do I just need to wait until it's reaped from the queue?
[2014-05-20 20:34:05 -0400] xeno__: So I get a failure:
[2014-05-20 20:34:06 -0400] xeno__: root@debvm3:/etc/chef# /etc/init.d/chef-client restart [FAIL] Restarting chef-client: chef-client failed!
[2014-05-20 20:34:22 -0400] xeno__: That doesn't correspond to more than a WARN in /var/log/chef/client.log
[2014-05-20 20:34:33 -0400] xeno__: Should I look in another log"?
[2014-05-20 20:35:34 -0400] mmzyk: stormerider Can you drop the link to the ticket here? Im flubbing something and not finding it.
[2014-05-20 20:35:54 -0400] stormerider: mmzyk: https://www.getchef.com/support/tickets/18028
[2014-05-20 20:36:38 -0400] mmzyk: oh, were talking a support ticket. I was thinking an issue ticket on tickets.opscode.com. Let me ping someone about it.
[2014-05-20 20:38:11 -0400] mmzyk: stormerider Im told its being looked into and you should have a response from the support person now. They just hadnt tracked down the answer and forgot to touch the ticket to let you know.
[2014-05-20 20:38:34 -0400] stormerider: mmzyk: thanks!
[2014-05-20 20:38:34 -0400] mmzyk: elebertus What is your question exactly? Im not sure I follow.
[2014-05-20 20:39:05 -0400] mmzyk: stormerider Your twitter message beat me to it, I just read the internal chat. :)
[2014-05-20 20:41:40 -0400] coderanger: mmzyk: Heh, a fair number of former and/or non employees have op, myself, jesse robbins, fujin, ezmobius
[2014-05-20 20:42:08 -0400] jameson__: anyone having issues with the getchef webui for managing subscriptions :|?
[2014-05-20 20:42:24 -0400] mmzyk: I was just looking at the currently list. :) Eiither way, if got pinged youd send them to the right place.
[2014-05-20 20:42:45 -0400] mmzyk: jameson_ What are you trying to do? Is this billing related on hosted?
[2014-05-20 20:43:03 -0400] jameson__: I think so
[2014-05-20 20:43:11 -0400] jameson__: I need to update the billing for my org
[2014-05-20 20:43:24 -0400] steveelsewhere: I can't tell from the docs, if a cookbook_file destination file exists and is identical, should a notify fire? do you need an explicit not_if mechanism to prevent an unnecessary service reload?
[2014-05-20 20:43:43 -0400] steveelsewhere: identical to the source I mean
[2014-05-20 20:43:43 -0400] mmzyk: jameson_ Youll likely need to contact support I think. Were in the process of changing our backend billing provider and not everything is in place. I dont know the timeline for when it will all be restored.
[2014-05-20 20:43:49 -0400] rayrod2030: coderanger: you around?
[2014-05-20 20:43:53 -0400] coderanger: rayrod2030: Yep
[2014-05-20 20:44:08 -0400] jameson__: steveelsewhere: I believe cookbook_file will blinding overwrite the destination file
[2014-05-20 20:44:22 -0400] rayrod2030: coderanger: looking to use citadel but was wondering it would still work if I blacklist the IAM role aws creds node attributes?
[2014-05-20 20:44:28 -0400] jameson__: mmzyk: does that mean I am stuck on starter(?) I need to bump the number of nodes for testing
[2014-05-20 20:44:36 -0400] coderanger: rayrod2030: It already does for you
[2014-05-20 20:44:37 -0400] steveelsewhere: jameson__: gross
[2014-05-20 20:44:48 -0400] rayrod2030: coderanger: oh fantastic
[2014-05-20 20:45:06 -0400] rayrod2030: coderanger: you are a scholar and a gentleman.
[2014-05-20 20:45:09 -0400] coderanger: rayrod2030: Should be compatible with other forms of node.save monkeypatch though
[2014-05-20 20:45:16 -0400] mmzyk: jameson_ No. You can bump the nodes right now and it will be fine. If you intend to keep it there, just contact support and let them know the situation.
[2014-05-20 20:45:25 -0400] jameson__: steveelsewhere: you can do create_if_missing :\
[2014-05-20 20:46:17 -0400] coderanger: jameson__: It shouldn't trigger a notification unless something changed
[2014-05-20 20:46:26 -0400] steveelsewhere: it shouldn't
[2014-05-20 20:46:34 -0400] coderanger: oh sorry, steveelsewhere ^^
[2014-05-20 20:46:35 -0400] coderanger: heh
[2014-05-20 20:46:40 -0400] steveelsewhere: but I have no idea
[2014-05-20 20:46:58 -0400] coderanger: steveelsewhere: I would be very very surprised if it was doing that
[2014-05-20 20:47:28 -0400] steveelsewhere: do we have any opscoders who can confirm?
[2014-05-20 20:47:39 -0400] coderanger: steveelsewhere: I can confirm just about as much as anyone else :)
[2014-05-20 20:47:52 -0400] xeno__: Looks like it's a busy time here.
[2014-05-20 20:48:09 -0400] coderanger: steveelsewhere: The file output system is shared between file, cookbook_file, and template, and I use it on a daily basis :)
[2014-05-20 20:48:20 -0400] coderanger: steveelsewhere: If you want to be sure, go check the code though
[2014-05-20 20:48:42 -0400] steveelsewhere: =] excellent, so if the contents match the notify shouldn't fire?
[2014-05-20 20:49:40 -0400] coderanger: steveelsewhere: Yes, the whole idea of notifications is they only fire if chef took action on a certain resource
[2014-05-20 21:03:18 -0400] xeno__: Say what is typically considered the canonical thing to tail on server for errors?
[2014-05-20 21:03:36 -0400] mmzyk: chef-server-ctl tail will tail all the logs, xeno_
[2014-05-20 21:04:08 -0400] xeno__: I wanted to guess erchef/current, but I see nothing coming out there.
[2014-05-20 21:04:16 -0400] mmzyk: If you give it a name after the tail part you can tail an individual log. chef-server-ctl tail chef-server-webui
[2014-05-20 21:05:16 -0400] mmzyk: xeno_ chef-server-ctl tail erchef should do it. You might have to look at the individual log files in that one - I forget how log rotate works on erchef, but there might be a bug where its not sendign to current. I dont remember off the top of my head. Check which log file was written to last and tail that one.
[2014-05-20 21:05:26 -0400] coderanger: xeno__: Whats the error you are looking at?
[2014-05-20 21:05:43 -0400] mmzyk: Ive got to step away. Sorry the the advice and then having to run.
[2014-05-20 21:05:50 -0400] xeno__: root@debvm3:/etc/chef# /etc/init.d/chef-client start [FAIL] Starting chef-client : chef-client failed!
[2014-05-20 21:06:07 -0400] xeno__: It's really not something I specifically wanted to impose on this group.
[2014-05-20 21:06:19 -0400] coderanger: xeno__: Thats something local most likely, wouldn't show up on the server
[2014-05-20 21:06:28 -0400] xeno__: I am getting it from the thing you guys say not to do, which is an install using apt-get install chef on Debian.
[2014-05-20 21:06:36 -0400] xeno__: So I am talking to the Debian folks about it.
[2014-05-20 21:06:40 -0400] coderanger: xeno__: Try running chef-client by hand and see if it works
[2014-05-20 21:06:43 -0400] xeno__: But I want to know where I should see errors.
[2014-05-20 21:06:49 -0400] xeno__: Ok
[2014-05-20 21:07:03 -0400] coderanger: xeno__: Standard debian-flavor init scripts have no logging output
[2014-05-20 21:07:10 -0400] xeno__:  It works fine with the omnibus install.
[2014-05-20 21:07:52 -0400] coderanger: xeno__: Might be a gems and/or gem path issue
[2014-05-20 21:08:09 -0400] coderanger: xeno__: Just have to figure out what command the init script is running and run it by hand
[2014-05-20 21:08:11 -0400] xeno__: Could be.  I'm not sure the apt-get installs use gems at all.
[2014-05-20 21:08:21 -0400] coderanger: xeno__: Possibly accounting for differences in env vars
[2014-05-20 21:08:26 -0400] xeno__: Thing is too, the daemon goes into memory, and seems to finish fine.
[2014-05-20 21:08:30 -0400] coderanger: xeno__: It does, gems is just the ruby packaging system
[2014-05-20 21:08:33 -0400] xeno__: But it gets this error.
[2014-05-20 21:08:44 -0400] xeno__: yes, I've used gems.
[2014-05-20 21:09:01 -0400] xeno__: So, let me stop it again...
[2014-05-20 21:09:18 -0400] a13x212: i'm including a couple of recipes, but one of them doesn't seem to be called. can anyone think of anything why it wouldn't work
[2014-05-20 21:09:36 -0400] mallu: hi, can you please tell me what is the best way to delete all the files in a directory?
[2014-05-20 21:09:52 -0400] xeno__: So when you stop the daemon, then start it by hand as you suggested, you don't get the fatal error.
[2014-05-20 21:10:17 -0400] coderanger: xeno__: Try it with env -i
[2014-05-20 21:10:30 -0400] coderanger: mallu: Recursively or not?
[2014-05-20 21:10:46 -0400] xeno__: Ok.
[2014-05-20 21:11:11 -0400] mallu: @coderanger: no recursive?
[2014-05-20 21:11:13 -0400] mallu: @coderanger: no recursive
[2014-05-20 21:11:18 -0400] coderanger: xeno__: if you get an init script failing but running the exact same command by hand works, my first stop is usually env var differences
[2014-05-20 21:11:47 -0400] xeno__: [2014-05-20T14:11:04-07:00] FATAL: NoMethodError: undefined method `split' for nil:NilClass
[2014-05-20 21:12:16 -0400] xeno__: Okay.  I'll make a pastie and post it on #debian.
[2014-05-20 21:12:37 -0400] coderanger: mallu: Dir["#{path}/*"].each do |name| file name do action :delete end end
[2014-05-20 21:16:27 -0400] xeno__: The one advantage of apt-get install chef on Debian, over the broken apt-get install, is you do get the man page.
[2014-05-20 21:19:49 -0400] xeno__: Is there any canonical way to run knife config -i and provide the configuration without the damnable prompts?
[2014-05-20 21:19:53 -0400] jameson__: yeah just recheck cookbook_file, looks like it doesn't do if the md5s are the same :3
[2014-05-20 21:19:59 -0400] xeno__: (excuse my wording)
[2014-05-20 21:22:03 -0400] coderanger: xeno__: I mean if you don't want to do it interactively, just write out the config file
[2014-05-20 21:22:11 -0400] rayrod2030: does anyone know if the sensitive attribute on the file resource still work?
[2014-05-20 21:22:19 -0400] coderanger: jameson__: sha512 actually
[2014-05-20 21:23:09 -0400] xeno__: But then how do you execute the step to get the client.pem?
[2014-05-20 21:23:24 -0400] coderanger: rayrod2030: I think thats a "yet", not a "still"
[2014-05-20 21:23:32 -0400] rayrod2030: gotcha
[2014-05-20 21:23:37 -0400] coderanger: rayrod2030: Ahh no, it was in 11.12
[2014-05-20 21:23:45 -0400] jameson__: oh.
[2014-05-20 21:23:51 -0400] xeno__: (Apologies if this should be obvious, but I'm not seeing it)
[2014-05-20 21:23:56 -0400] coderanger: xeno__: knife client create
[2014-05-20 21:24:08 -0400] xeno__: Ok.  I'll try it.  Thank you.
[2014-05-20 21:24:50 -0400] rayrod2030: yes indeed.  perfect.
[2014-05-20 21:37:15 -0400] jameson__: is there a way to know if a chef-run is in chef-zero vs hosted/entprise chef ?
[2014-05-20 21:37:26 -0400] jameson__: I know fo solo you can do Chef::Config[:solo]
[2014-05-20 21:37:57 -0400] dgarstang: Anyone got the edgelight mongo cookbook working?
[2014-05-20 21:38:26 -0400] jkeiser_: jameson__: chef-zero is like open-source chef, so you can check if Chef::Config.chef_server_url starts with /organizations/orgname
[2014-05-20 21:38:49 -0400] jkeiser_: Other than that, the chef client really has no idea what sort of chef server it's talking to
[2014-05-20 21:38:53 -0400] jameson__: dgarstang: :3 depends on 'working'
[2014-05-20 21:39:12 -0400] dgarstang: jameson__: Hm. with sharding and replicasets and such
[2014-05-20 21:39:21 -0400] jameson__: jkeiser_: so it'd be wiser to add an attribute from TK say 'is_testing' or something?
[2014-05-20 21:39:38 -0400] jameson__: dgarstang: yeah, those 2 are marginally broken, they work for very specific cases
[2014-05-20 21:40:14 -0400] jkeiser_: jameson__: that's my opinion, yeah--pass in attributes
[2014-05-20 21:40:23 -0400] dgarstang: jameson__: I'd gotten as far as the config and routing servers. been mucking about with shards for two days. Right now, damn thing won't run addShard() on router. I just had to do it by hand.
[2014-05-20 21:40:54 -0400] jkeiser_: jameson__: a lot of cases of if [:solo] I've seen would be better solved with cookbook / node attributes anyway (like they specify paths, or say "don't encrypt this data," or something)
[2014-05-20 21:42:09 -0400] jameson__: dgarstang: I believe that's because the search stuff is not finding the nodes to add, I'm thinking that is going to allow a variable override.
[2014-05-20 21:42:43 -0400] dgarstang: jameson__: Dunno. I think it's finding nodes from the search in general.
[2014-05-20 21:42:54 -0400] jameson__: jkeiser_: yeah, I am doing incldue_recipe 'some-racipe' unless node['envrionment']...
[2014-05-20 21:43:53 -0400] jkeiser_: jameson__: curious, might that be better solved by not including it in the run list?  (Not a suggestion or anything, I have no idea your use case :)
[2014-05-20 21:45:05 -0400] jameson__: yeah, I'm flipping back and forth on that
[2014-05-20 21:45:20 -0400] jameson__: because it's a 3rd party recipe(s) that's getting included that isn't useful in testing.
[2014-05-20 21:47:48 -0400] dgarstang: jameson__: Hm. I have replSet: 'rs0' in the node config, and the cookbook wants to prefix rs_ to the front. Y u make my life hard?
[2014-05-20 21:49:08 -0400] jameson__: dgarstang: tbh, it's because you can't test the replicaset/shard/config in TK well
[2014-05-20 21:49:12 -0400] jameson__: 'well'
[2014-05-20 21:49:22 -0400] dgarstang: TK?
[2014-05-20 21:49:28 -0400] jameson__: test-kitchen
[2014-05-20 21:49:35 -0400] dgarstang: ah, yes well.... that doesn't help
[2014-05-20 21:50:26 -0400] dgarstang: i just changed the shard name to 'rs_rs0' and now chef barfs with 'undefined method `[]' for nil:NilClass'. Time for a new job maybe
[2014-05-20 21:51:21 -0400] jameson__: I think there are like 2 or 3 different ways to change the way that variable comes up if i recall correctly
[2014-05-20 21:51:48 -0400] dgarstang: *sigh*
[2014-05-20 21:52:48 -0400] jameson__: it's because shard and replicaset are interwined, and then it used to allow both to be set separately blah blah
[2014-05-20 21:53:25 -0400] dgarstang: right
[2014-05-20 21:53:31 -0400] dgarstang: theres lots of moving parts here
[2014-05-20 21:53:43 -0400] dgarstang: the cookbook doesnt say what order to bring them up in, etc
[2014-05-20 22:01:25 -0400] dgarstang: nope, damn cookbook will not call addShard. *sigh*
[2014-05-20 22:13:49 -0400] jameson__: :\
[2014-05-20 22:18:35 -0400] xeno: Say guys, I crashed, and I'm trying to find the group log.
[2014-05-20 22:19:38 -0400] xeno: Isn't there a history log for this IRC channel?
[2014-05-20 22:21:49 -0400] coderanger: xeno: There are two, both linked in the topic
[2014-05-20 22:28:20 -0400] xeno: Ok.  Thanks.  Now here is a sticking point.  I see this example in the help:  knife client create exampleorg -a -f "/etc/chef/client.pem"
[2014-05-20 22:28:24 -0400] mbailey: does anyone here know how to get databags working with test-kitchen and chef-zero?
[2014-05-20 22:28:42 -0400] jtimberman: http://www.getchef.com/blog/2014/05/20/berkshelf-api-remediation-followup/
[2014-05-20 22:28:52 -0400] xeno: I am not seeing how that references the knife.rb file I have prepared for this as per our pre-xeno-crash exchange.
[2014-05-20 22:29:12 -0400] jtimberman: mbailey: https://github.com/opscode-cookbooks/chef-splunk/tree/master/test/fixtures/data_bags
[2014-05-20 22:29:29 -0400] rayrod2030: will kitchen-ec2 respect iam roles when creating an ec2 instance?
[2014-05-20 22:29:30 -0400] jtimberman: mbailey: and https://github.com/opscode-cookbooks/chef-splunk/blob/master/.kitchen.yml#L7-L9
[2014-05-20 22:29:42 -0400] rayrod2030: not assign the role but use an existing role for creating a resource.
[2014-05-20 22:29:47 -0400] mbailey: ahhh
[2014-05-20 22:29:51 -0400] jtimberman: make sense?
[2014-05-20 22:29:51 -0400] mbailey: under the provisioner
[2014-05-20 22:29:53 -0400] mbailey: duhhhh
[2014-05-20 22:29:54 -0400] mbailey: thank you
[2014-05-20 22:30:01 -0400] mbailey: i had it in the absolutely wrong place
[2014-05-20 22:30:11 -0400] coderanger: jtimberman: For your script, just because it isn't commonly known https://api.berkshelf.com/status?format=json does exist
[2014-05-20 22:30:14 -0400] mbailey: jtimberman: life saver man..thank you =)
[2014-05-20 22:30:25 -0400] coderanger: jtimberman: (and you shouldn't need the format= once they upgrade it)
[2014-05-20 22:32:29 -0400] xeno: Okay, the right guess is probably as it states it look for .chef/knife.rb unless you specify a different location with -c CONFIG_FILE..?
[2014-05-20 22:32:32 -0400] xeno: Is that right?
[2014-05-20 22:32:53 -0400] coderanger: xeno: Yes
[2014-05-20 22:33:02 -0400] xeno: Thanks.  again.
[2014-05-20 22:34:33 -0400] xeno: But, another problem is it seems to like to look for admin.pm in /etc/chef-server rather than $HOME/.chef...
[2014-05-20 22:35:02 -0400] coderanger: jtimberman: Oh, hah, you're already using it, ignore me :)
[2014-05-20 22:35:25 -0400] xeno: Oh yes, so -k ~/.chef/admin.pem
[2014-05-20 22:36:53 -0400] xeno: ERROR: RuntimeError: Please set EDITOR environment variable
[2014-05-20 22:37:01 -0400] xeno: Did I do something wrong, or is that a bug?
[2014-05-20 22:37:17 -0400] coderanger: xeno: No, you need to set $EDITOR
[2014-05-20 22:37:32 -0400] coderanger: it is the standard environment variable used to open an interactive editor
[2014-05-20 22:37:50 -0400] coderanger: xeno: env EDITOR=true
[2014-05-20 22:38:42 -0400] xeno: Oh, not EDITOR=/usr/bin/vi
[2014-05-20 22:39:28 -0400] xeno: And presumably you mean export EDITOR=true
[2014-05-20 22:39:29 -0400] xeno: ?
[2014-05-20 22:39:47 -0400] xeno: Or is this a setting inside knife.rb?
[2014-05-20 22:39:50 -0400] coderanger: xeno: /usr/bin/env lets you set variables for a single command
[2014-05-20 22:40:23 -0400] coderanger: xeno: Or just pass -d
[2014-05-20 22:40:30 -0400] coderanger: -d, --disable-editing            Do not open EDITOR, just accept the data as is
[2014-05-20 22:41:18 -0400] xeno: So, you mean at the shell env EDITOR=true; knife client create ...
[2014-05-20 22:41:19 -0400] xeno: ?
[2014-05-20 22:41:47 -0400] coderanger: xeno: Just do knife client create -d
[2014-05-20 22:41:55 -0400] coderanger: That disables the interactive bits
[2014-05-20 22:43:06 -0400] xeno: Ok.  Sorry.  This confuses me because it used to be EDITOR would be assigned an actual editor path, but, sally forth...
[2014-05-20 22:43:31 -0400] coderanger: xeno: Its an old trick in unix, set $EDITOR to /bin/true to bypass interactive editing
[2014-05-20 22:43:48 -0400] coderanger: But knife offers its own flag for that
[2014-05-20 22:45:53 -0400] xeno: Ok.  I believe it.  I don't always know the "tricks".  Thanks.
[2014-05-20 22:46:12 -0400] mbailey: So we use version control on our cookbooks to have a centralized place where they're "safe"
[2014-05-20 22:46:13 -0400] xeno: Anyhow, I got another error.  Proceeding to see if I can figure it out myself.
[2014-05-20 22:46:18 -0400] mbailey: how do you accomplish the same thing with Berkshelf
[2014-05-20 22:46:27 -0400] mbailey: it seems they all live on my machine..and I can upload them to the chef server
[2014-05-20 22:46:42 -0400] mbailey: but I don't see the worflow for creating a centralized place to keep them
[2014-05-20 22:46:44 -0400] drywheat: trying to figure out the best way to install my encrypted data bag secret file on nodes.
[2014-05-20 22:47:04 -0400] coderanger: drywheat: "best" is a loaded adjective, it depends on your goals
[2014-05-20 22:47:14 -0400] coderanger: drywheat: The most secure option is likely to do it manually
[2014-05-20 22:47:19 -0400] drywheat: in my workstation's knife.rb, if i set the knife[:secret_file] option then it gets installed during a bootstrap
[2014-05-20 22:47:32 -0400] drywheat: if that option is missing, then it's not there
[2014-05-20 22:47:34 -0400] xeno: Okay, it looks like I'm specifying the initial admin.pem key incorrectly...
[2014-05-20 22:47:39 -0400] coderanger: mbailey: You wouldn't, in a berkshelf workflow each cookbook is an independent project
[2014-05-20 22:47:50 -0400] xeno:  knife client create cws3u3 -d -k ~/.chef/admin.pem -f ~/.chef/cws3u3.pem
[2014-05-20 22:48:07 -0400] mbailey: coderanger: would that cookbook then end up in it's own repository?
[2014-05-20 22:48:17 -0400] coderanger: mbailey: Yes
[2014-05-20 22:48:21 -0400] mbailey: ahhhhh
[2014-05-20 22:48:24 -0400] mbailey: that makes a lot more sense
[2014-05-20 22:48:45 -0400] coderanger: xeno: you probably want "-u admin" as well
[2014-05-20 22:49:00 -0400] xeno: Ok.
[2014-05-20 22:49:03 -0400] coderanger: xeno: That sets the username it uses to talk to the API
[2014-05-20 22:49:10 -0400] xeno: Ok.
[2014-05-20 22:49:11 -0400] mbailey: coderanger: we're going to have to have a talk about how we're doing this.  this will also make continuous integration much easier
[2014-05-20 22:49:18 -0400] mbailey: coderanger: thanks
[2014-05-20 22:49:33 -0400] xeno: Yep, that change made it go.
[2014-05-20 22:49:50 -0400] xeno: Now to try again to drill it in.  Thanks again cr.
[2014-05-20 22:54:15 -0400] xeno: Okay, so I am confusing creation of a user, and a client.  knife.rb can do both, right?
[2014-05-20 22:54:39 -0400] jtimberman: coderanger: yeah if you curl that url its json :)
[2014-05-20 22:54:46 -0400] jtimberman: coderanger: or if you grab it from ruby
[2014-05-20 22:54:54 -0400] coderanger: jtimberman: Depends on the build of curl >_<
[2014-05-20 22:54:58 -0400] jtimberman: :D!
[2014-05-20 22:55:04 -0400] jtimberman: #worksonmymachine
[2014-05-20 22:55:06 -0400] coderanger: jtimberman: Its fixed in master of berks-api regardless
[2014-05-20 22:55:26 -0400] jtimberman: that was a fun nagios plugin to write tho :D
[2014-05-20 23:02:49 -0400] dgarstang: So... anyone here successfully using the edgelight mongo cookbook sharding and replicaset features successfully?
[2014-05-20 23:13:11 -0400] dgarstang: So... anyone here successfully using the edgelight mongo cookbook sharding and replicaset features successfully?
[2014-05-20 23:14:21 -0400] xeno: Here is a place I am confused.  If the chef server URL is defined by the config line chef_server_url          'https://chefserver6nc.xeno.net:443'
[2014-05-20 23:14:41 -0400] xeno: Then what is the config line that defines the actual client to be configured?
[2014-05-20 23:14:59 -0400] xeno: I fear I have been doing things sideways.
[2014-05-20 23:15:33 -0400] rayrod2030: dgarstang: what did you write your irc bot in?
[2014-05-20 23:15:54 -0400] dgarstang: rayrod2030: keyboard. :)
[2014-05-20 23:16:22 -0400] rayrod2030: :)
[2014-05-20 23:24:47 -0400] programmerq: coderanger: congrats! does this mean you are imbalanced now?
[2014-05-20 23:25:00 -0400] coderanger: programmerq: rimshot.wav
[2014-05-20 23:25:11 -0400] programmerq: I bet no one else has thought of that one
[2014-05-20 23:25:19 -0400] programmerq: no one at all
[2014-05-20 23:26:20 -0400] jameson__: jtimberman: is there a reason chef-splunk doesn't talk about the libraries?
[2014-05-20 23:26:29 -0400] jtimberman: jameson__: what do you mean?
[2014-05-20 23:26:32 -0400] jameson__: like how to use splunk_app_install?
[2014-05-20 23:26:56 -0400] jameson__: and that it doesn't expose splunk monitor add (directory/file) ?
[2014-05-20 23:27:39 -0400] jtimberman: oversight?
[2014-05-20 23:27:41 -0400] jtimberman: :)
[2014-05-20 23:28:24 -0400] jtimberman: but, example use of the resource is here: https://github.com/opscode-cookbooks/chef-splunk/blob/master/test/fixtures/cookbooks/test/recipes/default.rb
[2014-05-20 23:30:10 -0400] dgarstang: Hm. That can't be right. It looks like the edgelight mongo cookbook is passing the shard name instead of the replica set name to the addshard command. That's never going to work. https://github.com/edelight/chef-mongodb/blob/master/libraries/mongodb.rb#220
[2014-05-20 23:30:42 -0400] xeno: "replace the -x and -P arguments with the username and password for an account that has root access..." - means a chef account that has admin privileges, presumably, and not a unix account that has sudo or some such thing...?
[2014-05-20 23:31:09 -0400] coderanger: xeno: For knife bootstrap?
[2014-05-20 23:31:11 -0400] jameson__: dgarstang: that's because that is a shard?
[2014-05-20 23:31:14 -0400] xeno: Yes.
[2014-05-20 23:31:24 -0400] xeno: This is quoted from learnchef.com
[2014-05-20 23:31:36 -0400] dgarstang: jameson__: format of addshard command is addShard(rs_name, 'server:port, server:port')
[2014-05-20 23:31:38 -0400] coderanger: xeno: There is a --sudo option if you want it to use sudo
[2014-05-20 23:32:20 -0400] dgarstang: actually it's addShard('rs_name/server:port,server:port')
[2014-05-20 23:32:27 -0400] xeno: No, I just want to follow the tutorial, and it seems to be using a command I would expect to access a chef account, but it is using unix account vocabulary, so I am once again having cognitive dissonance.
[2014-05-20 23:33:01 -0400] coderanger: xeno: No, thats a local system account, knife bootstrap SSH's to the target machine and runs commands
[2014-05-20 23:33:36 -0400] xeno: Ok.  So it needs the u/p on the client in question?  And presumably most people just use root?
[2014-05-20 23:33:52 -0400] coderanger: xeno: Most OS images have root login disabled (as they should)
[2014-05-20 23:34:09 -0400] xeno: I should like that.  Good.
[2014-05-20 23:34:39 -0400] xeno: So, I need to configure a user on my client that has what kind of access?  Just general sudo?
[2014-05-20 23:34:55 -0400] coderanger: xeno: Thats the usual way, yes
[2014-05-20 23:35:14 -0400] coderanger: xeno: I think technically all it does is run sudo bash, but restricting it to "just" that is a bit moot
[2014-05-20 23:35:21 -0400] xeno: Thank you.  Once again I apologize for the stridence of my inability to make heroic guesses.
[2014-05-20 23:35:39 -0400] coderanger: No problem :)
[2014-05-20 23:35:54 -0400] coderanger: xeno: Usually this kind of thing is baked in to the OS image or cloud framework :)
[2014-05-20 23:36:14 -0400] coderanger: xeno: Like on EC2 there is the ubuntu user, or ec2-user on RHEL-based images
[2014-05-20 23:36:31 -0400] coderanger: xeno: And login is usually done with SSH keys instead of passwords, but either works
[2014-05-20 23:36:46 -0400] xeno: Yes, well, to be a domain expert, typically one bakes it into one's own brain. I hope I am not going too far because of my advanced age, but I'm doing the best I can.
[2014-05-20 23:37:03 -0400] xeno: Hmm.
[2014-05-20 23:37:15 -0400] xeno: So, can I specify a bootstrap that uses the ssh keys instead of the password?
[2014-05-20 23:37:25 -0400] coderanger: Yes, use -i instead of -P
[2014-05-20 23:37:31 -0400] coderanger: or just add the keys to your active ssh-agent
[2014-05-20 23:38:23 -0400] xeno: Except of course that that is not a step in the tutorial.  I'm saving this conversation for reference later.  Otherwise I'll probably ask you the same stuff in a week.  Thank you.
[2014-05-20 23:41:19 -0400] jidar: I edit my ~/.ssh/config file and throw the keys in my .ssh directory ;)
[2014-05-20 23:41:35 -0400] jidar: remembering the file name via -i gets old if it's not in your history
[2014-05-20 23:41:38 -0400] jidar: or on a new computer
[2014-05-20 23:43:40 -0400] coderanger: xeno: I can't comment on the content on learnchef except to say I didn't write it :)
[2014-05-20 23:49:17 -0400] xeno: Well, but you were right that so far it is better than the other.  One does the best one can, and it doesn't pay to put down an effort, only to provide helpful criticism.
[2014-05-20 23:50:23 -0400] xeno: Gotta get groceries.  Thank you for help.  I'll try more on return.

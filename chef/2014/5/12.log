[2014-05-12 00:08:41 -0400] sarkis: hey all, so in an attributes file i can use the default shortcut but in recipes i cannot right? i need to use node.default instead?
[2014-05-12 00:12:14 -0400] Tricon: sarkis: I am not following.
[2014-05-12 00:54:53 -0400] sarkis: Tricon: you know default['foo']['bar'], i thought that was a shortcut for node.default['foo']['bar'], can I use the short form in both recipes/default.rb as well as attributes/default.rb?
[2014-05-12 02:07:19 -0400] Senjai: Ugh, whats the simplist way of running a shell command in chef?
[2014-05-12 02:07:38 -0400] digitalchild: excute
[2014-05-12 02:08:01 -0400] Senjai: digitalchild: https://gist.github.com/Senjai/c2d435098cc59424d134 doesnt seem to work
[2014-05-12 02:08:10 -0400] Senjai: I can ssh in and the packages aren't getting installed
[2014-05-12 02:09:00 -0400] Senjai: Any ideas?
[2014-05-12 02:09:16 -0400] darkside_: why would you use apt-get command instead of package resource?
[2014-05-12 02:09:31 -0400] digitalchild: yeah, that..
[2014-05-12 02:09:42 -0400] digitalchild: and there is a build-essentials cookbook also..
[2014-05-12 02:10:34 -0400] Senjai: Because I suck at devops, darkside_ Can you pass in multiple packages?
[2014-05-12 02:10:44 -0400] darkside_: i left a comment on your gist
[2014-05-12 02:13:30 -0400] Senjai: Thanks
[2014-05-12 02:13:42 -0400] Senjai: I need to leave this coffee shop
[2014-05-12 02:13:48 -0400] Senjai: I cant even connect to my irc znc without lag
[2014-05-12 02:13:50 -0400] Senjai: :/
[2014-05-12 02:13:53 -0400] Senjai: brb
[2014-05-12 02:22:43 -0400] Senjai: back :/
[2014-05-12 02:53:23 -0400] mjuszczak: I'm having troubel figuring out why a berks upload is failing.  Knife commands work fine... http://pastebin.com/CR7hNN2F
[2014-05-12 02:53:44 -0400] mjuszczak: Any ideas?  Some googling refers to an authentication error, but everything else seems to check out.  Everything knife related works.
[2014-05-12 02:55:29 -0400] Senjai: using the build-essential recipe within my recipe with include_recipe isn't installing the packages :/
[2014-05-12 03:55:17 -0400] darkside_: Senjai: you have to paste some error to debug, you know.
[2014-05-12 03:56:41 -0400] Senjai: darkside_: Yes I know. I'm using a pretty custom setup so its kind of hard to describe everything which was why I didn't elaborate. I found the error just now
[2014-05-12 03:57:01 -0400] Senjai: Using knife solo I had a legacy version of the same cookbook in site-cookbooks which overrode the one generated in cookbooks
[2014-05-12 03:57:38 -0400] darkside_: right
[2014-05-12 04:28:00 -0400] dgarstang: Anyone using the chef-client provisioner with vagrant? trying to find something to supplement the ... bad... vagrant docs.
[2014-05-12 04:49:18 -0400] lrr: dgarstang: what do you need help wtih?
[2014-05-12 06:30:42 -0400] ponyfleisch: hi everyone
[2014-05-12 06:30:58 -0400] ponyfleisch: the vagrant box referenced in the default vagrantfile that berks generates throws a 404.
[2014-05-12 06:37:38 -0400] ponyfleisch: oh might be my mistake
[2014-05-12 07:05:05 -0400] JensOfSweden: Anyone who could help me with node creating trough rest api? Cant get the json array right :/
[2014-05-12 07:06:48 -0400] double_p: JensOfSweden: if you start one with 'knife node create' it would show the correct json struct?
[2014-05-12 07:07:36 -0400] JensOfSweden: double_p: I have actualy made the json according to the API, but seems it doesnt want to do it anyways
[2014-05-12 07:07:57 -0400] JensOfSweden: chef_array = {:name=>"#{h_server[:longname]}",:chef_type=>"node",:json_class=>"Chef::node",:normal=>{:tags=>["#{h_server[:instance_id]}"]},:run_list=>["role[default]"]} .to_json
[2014-05-12 07:08:08 -0400] boffbowsh: Are you setting the Content-Type header to application/json on the request?
[2014-05-12 07:08:18 -0400] double_p: uhm
[2014-05-12 07:10:10 -0400] JensOfSweden: im using Chef::REST for all my requests witch adds all headers to all my requests
[2014-05-12 07:10:26 -0400] JensOfSweden: i think it does atleat
[2014-05-12 07:10:36 -0400] boffbowsh: k
[2014-05-12 07:26:40 -0400] JensOfSweden: There is something wrong with the json, since it doesnt want to post, getting bad request 400 :/
[2014-05-12 07:27:09 -0400] double_p: oh.. speaking http to https by chance (or vice versa)
[2014-05-12 07:28:27 -0400] JensOfSweden: No proxy at all, so no rewriting
[2014-05-12 07:31:44 -0400] JensOfSweden: All REST requests works except for the json thingy =)
[2014-05-12 08:13:50 -0400] mafi: Following problem: chef version Chef: 11.8.2
[2014-05-12 08:13:58 -0400] mafi: plattform openbsd
[2014-05-12 08:14:24 -0400] mafi: when doing "execute" i get TypeError: no implicit conversion from nil to integer
[2014-05-12 08:15:07 -0400] mafi: TypeError: execute[test execute] (chef-openbsd::default line 266) had an error: TypeError: no implicit conversion from nil to integer
[2014-05-12 08:15:10 -0400] mafi: /usr/local/lib/ruby/gems/2.0/gems/mixlib-shellout-1.4.0/lib/mixlib/shellout/unix.rb:350:in `kill'
[2014-05-12 08:15:16 -0400] mafi: any ideas?
[2014-05-12 08:21:42 -0400] user9999: Good morning everyone :)
[2014-05-12 08:21:58 -0400] user9999: I get a wiered exception when running chef-client command on one of my nodes
[2014-05-12 08:22:41 -0400] user9999: NoMethodError: undefined method `state_attrs' for #<Class:0x00000001872390>
[2014-05-12 08:22:52 -0400] user9999: Any idea what caused this issue?
[2014-05-12 08:28:50 -0400] user9999: hmmm I got it. Somehow chef-client was not installed properly
[2014-05-12 08:28:59 -0400] user9999: reinstalling chef-client on the node fixed the issue.
[2014-05-12 10:22:51 -0400] rastasheep_: Hi there!
[2014-05-12 10:24:49 -0400] rastasheep_: i have one question about running knife bootstrap with custom template, actually i first create a node and then bootstrap it with local template, and after that i do not have run list on my node :/
[2014-05-12 11:23:54 -0400] mafi: okay i fixed it by using an older shell mixout lib....
[2014-05-12 11:24:36 -0400] mafi: looks like mixlib-shellout-1.4.0 has some serious problems with NOT linux UNIX
[2014-05-12 11:25:01 -0400] mafi: they should not call the class unix if it only supports linux
[2014-05-12 11:27:39 -0400] workmad3: mafi: afaik, mixlib works fine on osx, which is a non-linux unix... and probably other unix variants as well
[2014-05-12 11:27:57 -0400] mafi: i am on openbsd 5.5
[2014-05-12 11:27:59 -0400] mafi: workmad3
[2014-05-12 11:28:05 -0400] mafi: there it doesn't work
[2014-05-12 11:28:19 -0400] mafi: same problem on freebsd 10
[2014-05-12 11:28:37 -0400] mafi: so your statement is not that correct
[2014-05-12 11:28:50 -0400] mafi: 1.3.0 works fine
[2014-05-12 11:28:55 -0400] workmad3: mafi: I said 'other' not 'all'
[2014-05-12 11:31:17 -0400] workmad3: mafi: no idea why it's not working on those two btw... maybe worth raising an issue on the github page with exact details if there isn't one already
[2014-05-12 11:32:24 -0400] mafi: workmad3: by reading the stack trace it looks like there is a problem with the process timeout. but yes i will put an issue on github.
[2014-05-12 12:02:21 -0400] kisoku: mafi: put an issue on tickets.opscode.com instead
[2014-05-12 12:02:35 -0400] kisoku: not sure how often they triage the github issues
[2014-05-12 12:21:53 -0400] mafi: kisoku: wrote the ticket
[2014-05-12 12:28:19 -0400] Cope: I'm not had to do this for a while.. and it's possible the world has changed, but any idea why knife node show somenode, and knife node search *:* would be returning just the chef_enviroment attribute rather than the node?
[2014-05-12 12:39:27 -0400] koc: hi everyone
[2014-05-12 12:40:23 -0400] koc: 10.201.1.200 ================================================================================
[2014-05-12 12:40:24 -0400] koc: 10.201.1.200 Chef encountered an error attempting to create the client "mongocluster-node4.eba.gov.tr"
[2014-05-12 12:40:24 -0400] koc: 10.201.1.200 ================================================================================
[2014-05-12 12:40:25 -0400] koc: 10.201.1.200
[2014-05-12 12:40:27 -0400] koc: 10.201.1.200
[2014-05-12 12:40:29 -0400] koc: 10.201.1.200 Authorization Error:
[2014-05-12 12:40:31 -0400] koc: 10.201.1.200 --------------------
[2014-05-12 12:40:33 -0400] koc: 10.201.1.200 Your validation client is not authorized to create the client for this node (HTTP 403).
[2014-05-12 12:40:36 -0400] koc: 10.201.1.200
[2014-05-12 12:40:37 -0400] koc: 10.201.1.200
[2014-05-12 12:40:39 -0400] koc: 10.201.1.200
[2014-05-12 12:40:41 -0400] koc: 10.201.1.200 Possible Causes:
[2014-05-12 12:40:43 -0400] koc: 10.201.1.200 ----------------
[2014-05-12 12:40:45 -0400] frots: please use pastebin
[2014-05-12 12:40:46 -0400] koc: 10.201.1.200 * There may already be a client named "mongocluster-node4.eba.gov.tr"
[2014-05-12 12:40:47 -0400] koc: 10.201.1.200 * Your validation client (chef-validator) may have misconfigured authorization permissions.
[2014-05-12 12:40:49 -0400] koc: 10.201.1.200
[2014-05-12 12:40:51 -0400] koc: 10.201.1.200
[2014-05-12 12:40:53 -0400] koc: 10.201.1.200
[2014-05-12 12:40:55 -0400] koc: 10.201.1.200 [2014-05-12T15:37:44+03:00] FATAL: Stacktrace dumped to /var/chef/cache/chef-stacktrace.out
[2014-05-12 12:40:57 -0400] Cope: my eyes
[2014-05-12 12:40:57 -0400] koc: 10.201.1.200 Chef Client failed. 0 resources updated in 1.156386788 seconds
[2014-05-12 12:40:58 -0400] frots: koc: please use pastebin
[2014-05-12 12:40:59 -0400] koc: 10.201.1.200 [2014-05-12T15:37:44+03:00] ERROR: 403 "Forbidden"
[2014-05-12 12:41:01 -0400] koc: 10.201.1.200 [2014-05-12T15:37:44+03:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)
[2014-05-12 12:41:03 -0400] koc: the bootstrap operation ends up with an error
[2014-05-12 12:41:05 -0400] koc: error dump is as above.
[2014-05-12 12:41:07 -0400] koc: alrgith
[2014-05-12 12:41:44 -0400] Cope: I think the problem might be that your validation client isn't authorized to create the client for this node.
[2014-05-12 12:41:50 -0400] koc: http://pastebin.com/WRFL8ML0
[2014-05-12 12:41:55 -0400] koc: here is the output
[2014-05-12 12:42:00 -0400] Cope: further more, there might already be a client named "mongocluster-node4.eba.gov.tr"
[2014-05-12 12:42:11 -0400] koc: I had a node with the same name
[2014-05-12 12:42:20 -0400] Cope: did you also consider the possibility that your validation client (chef-validator) may have misconfigured authorization permissions
[2014-05-12 12:42:24 -0400] koc: but I removed it with 'knife node delete ...'
[2014-05-12 12:42:39 -0400] koc: I have no problem with authorrication
[2014-05-12 12:43:03 -0400] koc: if I change the hostname of node which is not used before, it works
[2014-05-12 12:43:26 -0400] koc: I just wonder if I should further operation to delete a node completely.
[2014-05-12 12:43:51 -0400] Cope: koc: you need to delete the cliet as well as the node
[2014-05-12 12:44:19 -0400] Cope: I suspect you'll see there's a client with that name
[2014-05-12 12:44:22 -0400] Cope: if so, just delete it
[2014-05-12 12:44:24 -0400] koc: what do you mean by deleting client? I shut it off
[2014-05-12 12:44:35 -0400] Cope: there are 2 objects on the chef server
[2014-05-12 12:44:38 -0400] Cope: the node and the cliet
[2014-05-12 12:44:43 -0400] Cope: you need to delete both of them
[2014-05-12 12:44:54 -0400] Cope: so knife node delete and knife client delete
[2014-05-12 12:46:04 -0400] koc: Cope: you are right. I didn't delete client. this solved my issue
[2014-05-12 12:46:36 -0400] koc: So, could you tell me the diff btw node and client?
[2014-05-12 12:46:46 -0400] koc: why is both neede?
[2014-05-12 12:48:45 -0400] Cope: koc: the client is an api client, with associated keys
[2014-05-12 12:48:56 -0400] Cope: the node is the representation of the machine you're managing with chef
[2014-05-12 12:49:34 -0400] Cope: so when you bootstrap a new node, you get a node object, and an api client object
[2014-05-12 12:49:38 -0400] Cope: you need to delete both
[2014-05-12 13:03:00 -0400] koc: Cope, thanks for the  answers
[2014-05-12 13:13:08 -0400] Cope: any time :)
[2014-05-12 13:13:40 -0400] whiteadam: What does everyone use for LDAP? Trying to find a solution, but everything seems like overkill.
[2014-05-12 13:13:54 -0400] jperry: anyone using berkshelf with a single chef repo to manage community cookbooks?
[2014-05-12 13:13:58 -0400] Cope: whiteadam: I use freeipa (which is 389 directory server plus lots of other goodies)
[2014-05-12 13:14:11 -0400] whiteadam: Cope: Yeah, that's what I've been looking at
[2014-05-12 13:14:26 -0400] Cope: jperry: conducting markey research? or do you actually have a real question?
[2014-05-12 13:14:36 -0400] Cope: whiteadam: I think it's very good.
[2014-05-12 13:14:52 -0400] whiteadam: Cope: Seems awesome, but also overkill. I might have to try it anyway
[2014-05-12 13:15:23 -0400] Cope: whiteadam: it's overkill, in that it has a tonne of features you might not need
[2014-05-12 13:15:24 -0400] jperry: @Cope - I want berkshelf to manage my community cookbooks and any dependencies resolved through my chef server if they exist
[2014-05-12 13:15:32 -0400] jperry: I am not seeing that behavior
[2014-05-12 13:15:41 -0400] Cope: but it's also very easy to use, and you get replication, an api, a cli, a web interface etc all for free
[2014-05-12 13:15:43 -0400] jperry: I have more context on this issue: https://github.com/berkshelf/berkshelf-api/issues/123
[2014-05-12 13:16:28 -0400] Cope: jperry: could you explain what you mean by 'manage'? what's the intended outcome? ie what does success look like?
[2014-05-12 13:17:30 -0400] jperry: Cope: Berksfile will list all the community cookbooks
[2014-05-12 13:18:07 -0400] jperry: when I do a berks install community cookbooks are fetched from the community and any dependencies of those community cookbooks is resolvable should be pulled from my chef server
[2014-05-12 13:18:22 -0400] jperry: my berkshelf-api has an endpoint pointing to my chef server
[2014-05-12 13:20:52 -0400] Evangael: Greetings, I've got a quick question. I've uploaded a new version of a cookbook on my chef server.  Whenever I try to converge my node, it's not using this cookbook version but the previous one systematically. There's no lock for this cookbook in the environment on the run list. Any idea why chef-client is using the previous versions ?
[2014-05-12 13:21:23 -0400] jperry: Cope: what I am seeing is my Berksfile has passenger_apache2 '2.1.2' .  My chef server has an internal version of apache2 with a latest version of 1.0.49
[2014-05-12 13:22:00 -0400] jperry: Berkshelf is fetching 1.10.4 from the community when it should have just grabbed the one from my chef server
[2014-05-12 13:24:17 -0400] Cope: jperry: sorry - was afk; reading back.
[2014-05-12 13:25:01 -0400] sanguisdex: let me know if this is an inappropriate topic, but I don't want to hurt the industry, would a couple of freelancers mind PMing with me about industry rates?
[2014-05-12 13:25:02 -0400] Cope: could you gist your berksfile?
[2014-05-12 13:25:50 -0400] sanguisdex: jperry: berks vendor
[2014-05-12 13:30:41 -0400] jperry: Cope: https://gist.github.com/jperry/1806e2489ea48b522115
[2014-05-12 13:36:07 -0400] jperry: Cope: I added my Berksfile.lock to that gist as well
[2014-05-12 13:36:19 -0400] jperry: Our chef server has all the dependencies so not sure why it is resolving some of them from the community.
[2014-05-12 13:36:37 -0400] jperry: mysql, ohai are some of the other ones that should have come from our server
[2014-05-12 13:47:27 -0400] whiteadam: Cope: Did you just go by the docs when setting up FreeIPA? Seems like a real chore :)
[2014-05-12 13:52:10 -0400] jperry: Cope: were you able to check out that gist?
[2014-05-12 14:04:34 -0400] [iilliinn]_: how can i knife search for nodes with some recipe/cookbook
[2014-05-12 14:04:35 -0400] [iilliinn]_: ?
[2014-05-12 14:06:56 -0400] [iilliinn]_: knife search node 'run_list:*nagios*'
[2014-05-12 14:08:44 -0400] Cope: jperry: looking now
[2014-05-12 14:11:56 -0400] matti: Um.
[2014-05-12 14:12:27 -0400] whiteadam: [iilliinn]_: knife search node 'recipes:*nagios*'
[2014-05-12 14:13:54 -0400] Cope: jperry: ok so... what I'd expect is that if the dependency can be satisfied from source "http://localhost:26200" it'd come from there first
[2014-05-12 14:14:04 -0400] Cope: and then from source "https://api.berkshelf.com"
[2014-05-12 14:15:55 -0400] Cope: so, humour me, and create a new project, with a new berksfile, with just passenger_apache2 and just http://localhost:26200
[2014-05-12 14:15:59 -0400] Cope: and run a berks install
[2014-05-12 14:16:01 -0400] Cope: and show me the output
[2014-05-12 14:20:17 -0400] jblancett: is it possible to run chef-client with -o and still save node attributes after?
[2014-05-12 14:21:14 -0400] jblancett: "WARN: Skipping final node save because override_runlist was given"
[2014-05-12 14:24:08 -0400] Cope: jperry: looks related to: https://twitter.com/claco/status/432668781135925248
[2014-05-12 14:24:20 -0400] Cope: jblancett: sorry you ;)
[2014-05-12 14:24:28 -0400] Cope: jperry: unrelated for you :)
[2014-05-12 14:25:00 -0400] gchristensen: jtimberman: you know its *may*, right?
[2014-05-12 14:25:42 -0400] Cope: gchristensen: hello old chum
[2014-05-12 14:25:49 -0400] gchristensen: hi there Cope, how are ya?
[2014-05-12 14:26:56 -0400] Cope: superb thanks
[2014-05-12 14:27:30 -0400] runfromnowhere: Morning everyone - I found something I think might be a bug but I was wondering if someone could take a second and help me do a sanity check before I investigated any further...
[2014-05-12 14:29:06 -0400] gchristensen: Cope: I was remarking on jtimberman's photo of *snow* in his yard.
[2014-05-12 14:29:13 -0400] Cope: heh
[2014-05-12 14:29:28 -0400] Cope: well if you will live at silly altitudes, near massive mountains
[2014-05-12 14:31:15 -0400] runfromnowhere: Seems like there are discrepencies between the attributes on the "node" object that chef-client constructs for itself and the "node" object that chef-client can retrieve from the server with search() and I'm wondering if this is expected behavior or not
[2014-05-12 14:31:27 -0400] Cope: meanwhile, breakfast time in Austin, and it's nearly 80, I'm going to guess.
[2014-05-12 14:32:40 -0400] jperry: Cope: I'll give the blank repo a try.
[2014-05-12 14:33:46 -0400] gchristensen: Cope: it is, and very gross out - gray and 85% humidity
[2014-05-12 14:37:06 -0400] Cope: Given a choice between TX and CO in May, much as I like TX, I think I'd pick CO.
[2014-05-12 14:38:31 -0400] gchristensen: Cope: oh for sure, but I'd be back in TX for winter
[2014-05-12 14:45:18 -0400] sanguisdex: is there a good cookbook for doing nginx vhosts as databags?
[2014-05-12 14:45:33 -0400] sanguisdex: or should I just write my own cookbook?
[2014-05-12 14:45:57 -0400] gchristensen: sanguisdex: maybe write a wrapper cookbook to the nginx cookbook?
[2014-05-12 14:46:27 -0400] sanguisdex: gchristensen: probably the best method
[2014-05-12 14:46:28 -0400] sanguisdex: thanks
[2014-05-12 14:48:59 -0400] jperry: Cope: the correct apache2 was pulled when only the localhost api source was in Berksfile
[2014-05-12 14:49:22 -0400] jperry: once I add "source "https://api.berkshelf.com"" it pulls apache2 from the community and not our chef server
[2014-05-12 14:51:11 -0400] jperry: Cope: does this sound like a bug?
[2014-05-12 15:00:57 -0400] heathsnow_: Does running "chef-client -o recipe[some_recipe]" work properly with databags?  I can't find much documentation on the -o param
[2014-05-12 15:08:15 -0400] jperry: Cope: I filed a bug as this doesn't seem correct behavior: https://github.com/berkshelf/berkshelf/issues/1199
[2014-05-12 15:16:22 -0400] josh0x0: Hey guys. Im new to chefspec, cant figure this simple test out even after looking through docs. i believe Im using it wrong:
[2014-05-12 15:16:28 -0400] josh0x0: I created a LWRP in {provider,resource}/app.rb and simply trying to test that my recipe is calling it:  expect(chef_run).to create_app('myapp')   Getting:  undefined method `create_app'   (create is the action, app is the resource)
[2014-05-12 15:19:00 -0400] davidordave: @josh0x0 if you implement your own lwrp you need to define matchers: https://github.com/sethvargo/chefspec#packaging-custom-matchers
[2014-05-12 15:19:21 -0400] jtimberman: gchristensen: yeah tell that to colorado
[2014-05-12 15:19:38 -0400] josh0x0: @davidordave ohh, i see. thanks!
[2014-05-12 15:19:52 -0400] davidordave: no problem :)
[2014-05-12 15:20:02 -0400] jtimberman: gchristensen: http://weknowmemes.com/wp-content/uploads/2013/05/april-showers-bring-may-flowers.jpg
[2014-05-12 15:20:16 -0400] jtimberman: (look at the timestamps in those pictures)
[2014-05-12 15:20:38 -0400] jessemdavis: lol
[2014-05-12 15:21:06 -0400] jessemdavis: (and btw, that is crazy, friends of mine in westminster were posting pics yesterday)
[2014-05-12 15:21:08 -0400] Neozonz: anyone know how I can have opsworks only deploy 1 of my 3 php apps on start up? it looks like it installs all by default
[2014-05-12 15:21:49 -0400] saasuser_: hi
[2014-05-12 15:24:02 -0400] gchristensen: jtimberman: haha, jeeze
[2014-05-12 15:47:52 -0400] mmzyk: Friendly reminder that we released the open source server 11.1.0 RC on Friday http://www.getchef.com/blog/2014/05/09/release-candidate-for-open-source-chef-server-11-1-0/
[2014-05-12 15:48:16 -0400] mmzyk: If you give it a try and see anything thats off, or even smells funny, you can ping me and Ill look into it.
[2014-05-12 15:57:21 -0400] Senjai: mmzyk: Awesome
[2014-05-12 16:00:48 -0400] josh0x0: in chefspec do custom LWRP get invoked by a recipe or is it automagically stubbed out?  i have 1 spec that tests if it runs that returns true, but none of the code in the action(:create) block is executed
[2014-05-12 16:11:04 -0400] jtimberman: jessemdavis: i'm in westminster :D
[2014-05-12 16:11:13 -0400] jtimberman: course, westminster's a huge suburb.
[2014-05-12 16:11:22 -0400] sarkis: are environments the way to go if i want to do things environment specific?
[2014-05-12 16:11:25 -0400] jtimberman: josh0x0: did you make a custom matcher for your lwrp?
[2014-05-12 16:11:34 -0400] jtimberman: sarkis: depends
[2014-05-12 16:11:44 -0400] jtimberman: :)
[2014-05-12 16:11:56 -0400] sarkis: jtimberman: so i want to for example, ensure a directory exists in prod, or just create the dir on dev
[2014-05-12 16:12:09 -0400] sarkis: in prod it's a mounted partition, in dev i fake the partition..
[2014-05-12 16:12:10 -0400] josh0x0: @jtimberman yes I did, but not using it in the spec to test if the LWRP created a directory
[2014-05-12 16:12:11 -0400] whiteadam: o.O new server you say... yes
[2014-05-12 16:12:37 -0400] josh0x0: @jtimberman only used the matcher in this fashion:  expect(chef_run).to create_rails_stack_app('myapp')
[2014-05-12 16:24:13 -0400] NukePuppy: @sarkis would it make sense to try something like case node.chef_environment == 'production' or similar to handle your situation?
[2014-05-12 16:24:59 -0400] NukePuppy: jtimberman.. westminster colorado? :P i lived there shortly too isolated for me used to nyc life ;P
[2014-05-12 16:25:53 -0400] whiteadam: NukePuppy: I think I'm actually headed the CO way within the year. Sounds like you're missing out :)
[2014-05-12 16:26:03 -0400] NukePuppy: im in denver now :P
[2014-05-12 16:26:06 -0400] bmurt: anyone able to recommend a good site to grab updated vagrant boxes for chef?
[2014-05-12 16:26:29 -0400] whiteadam: bmurt: https://github.com/opscode/bento
[2014-05-12 16:27:13 -0400] whiteadam: NukePuppy: oh man, I thought you meant you were in NYC. The wife and I are looking to relocate to the Denver area next year.
[2014-05-12 16:27:28 -0400] whiteadam: NukePuppy: Austin is getting too hot and too hip for me :)
[2014-05-12 16:27:41 -0400] crazysix: Denver FTW
[2014-05-12 16:27:46 -0400] NukePuppy: from NYC :) so used to that kind of life.. denver was a lil closer to that.. i live right in hipster central lower highlands
[2014-05-12 16:28:04 -0400] whiteadam: NukePuppy: note to self, stay away from Central Lower Highlands
[2014-05-12 16:28:11 -0400] NukePuppy: hehe
[2014-05-12 16:29:22 -0400] bmurt: ty whiteadam
[2014-05-12 16:29:34 -0400] whiteadam: bmurt: no problemo
[2014-05-12 16:32:44 -0400] th3rt: Good afternoon/morning all.  Is there a way to "bootstrap" an existing node from one Org into another Org using knife?
[2014-05-12 16:33:21 -0400] th3rt: Or is there a recommended way of doing that without editing client.rb by hand?
[2014-05-12 16:34:07 -0400] whiteadam: th3rt: So like, basically changing master servers?
[2014-05-12 16:34:21 -0400] th3rt: No,  just changing orgs within the same server.
[2014-05-12 16:35:28 -0400] whiteadam: th3rt: ohh, I see what you mean.
[2014-05-12 16:36:26 -0400] whiteadam: th3rt: I'm not positive, but I would think that you could just do the normal bootstrap process with the new info... Better let someone confirm that.
[2014-05-12 16:37:03 -0400] th3rt: Ok,  I'd like to avoid downloading a new version of chef-client if I can help it.  I'm not trying to install or upgrade anything,  just change the organization.
[2014-05-12 17:16:04 -0400] Shubby: how could I define an attribute using the value of another attribute in a role? specifically, I have a role with default_attributes "git" => { "version" => "1.9.3", "url" => "https://github.com/git/git/archive/v#{['git']['version']}" }
[2014-05-12 17:16:14 -0400] Shubby: but knife throws an error when I try to upload the role to Chef
[2014-05-12 17:18:17 -0400] double_p: since that value is not available at ruby compile time? set a default and override with the role var?
[2014-05-12 17:20:44 -0400] davidordave: @Shubby, maybe it is because you are trying to access a variable (git['version']) in the same line it is being created.  A quick test in irb results in "url" => nil. Just a thought
[2014-05-12 17:24:53 -0400] Shubby: I guess the easiest way to fix it would be to set the attributes at the cookbook level but I was hoping to set it in the role
[2014-05-12 17:25:50 -0400] Shubby: I already have a git cookbook (the official community one) that sets the default values for those attributes but I want to override them since it installs an ancient version of git
[2014-05-12 17:29:16 -0400] th3rt: @whiteadam,  using knife bootstrap to migrate orgs does work.  However,  bootstrapping the node erases any runlists that the node had in the old organization (an expected outcome I suppose).  I'll need to figure out a way to bootstrap the nodes to the new organization with the correct runlists attached at the time of boostrapping.
[2014-05-12 17:34:26 -0400] davidordave: @th3rt you should be able to download then re-up your nodes.
[2014-05-12 17:45:20 -0400] heathsnow_: joem: what's up joe!
[2014-05-12 17:45:41 -0400] heathsnow_: joem: what's up joe!
[2014-05-12 17:46:14 -0400] heathsnow_: joem_: You there?  pinging wrong name :P
[2014-05-12 17:47:53 -0400] joem_: heathsnow_: hello
[2014-05-12 18:19:33 -0400] gyoza: i am in love with chef
[2014-05-12 18:19:35 -0400] gyoza: i wanna kiss it
[2014-05-12 18:19:50 -0400] gleam: haha
[2014-05-12 18:20:04 -0400] gyoza: i love modules
[2014-05-12 18:20:08 -0400] gyoza: and chef is modules extreme
[2014-05-12 18:21:27 -0400] gyoza: i found a bug inside berkshelf vagrant
[2014-05-12 19:04:19 -0400] btm:  Chef Code Review: Join: bit.ly/SUfVB8 Watch: bit.ly/SUfUgD
[2014-05-12 19:09:04 -0400] NukePuppy: whats the issue with data bag names and periods?
[2014-05-12 19:11:03 -0400] ratcliff444: hi does anyone know why im getting this error when trying to knife bootstrap a node "ERROR: Errno::EISDIR: Is a directory @ io_fread - /root"
[2014-05-12 19:22:31 -0400] ratcliff444:  hi does anyone know why im getting this error when trying to knife bootstrap a node "ERROR: Errno::EISDIR: Is a directory @ io_fread - /root"
[2014-05-12 19:23:46 -0400] Brad_K: ratcliff444: I haven't responded until now, because I've never seen that error message before and I have no idea what kind of advice to give you on this matter.  But I did want to confirm that at least I have seen your post in this channel.
[2014-05-12 19:25:33 -0400] ratcliff444: Brad_K: sorry for the double post just wanted to check. If its not a common error then I have probably mis-configured  something quite badly
[2014-05-12 19:26:19 -0400] Brad_K: no problem, I just wanted to confirm that there was at least one other warm body in the channel, even if I couldn't help.
[2014-05-12 19:27:13 -0400] ratcliff444: Brad_K: it's appreciated :)
[2014-05-12 19:29:55 -0400] Malkav: Hey guys
[2014-05-12 19:30:33 -0400] Malkav: I have a question about this cookbook https://github.com/opscode-cookbooks/sudo. Do I have to include it in my recepies to be able to use it? And how do I do that?
[2014-05-12 19:32:19 -0400] tspencer: In your metadata for the recipe that needs it, put in 'depends          "sudo"', then you should be able to use the sudo stuff in that recipe.
[2014-05-12 19:33:36 -0400] tspencer: s/metadata/metadata.rb/
[2014-05-12 19:41:49 -0400] coderanger: Malkav: If you want to use the recipe then you either need to include it in a run list, or include_recipe it from something else that executes
[2014-05-12 19:42:25 -0400] Malkav: <coderanger> thanks for the hint.
[2014-05-12 19:42:41 -0400] coderanger: but if you just want to use the LWRPs, then the depends is enough
[2014-05-12 19:47:17 -0400] benmoss: how would I stop a service *before* creating a template?
[2014-05-12 19:47:59 -0400] benmoss: i have a service do \ action :stop \ end block, but that seems to happen at some kind of unpredictable time
[2014-05-12 19:50:00 -0400] coderanger: benmoss: It will happen when that resource is converged
[2014-05-12 19:50:40 -0400] double_p: http://www.youtube.com/watch?v=aCmvu53EPyg
[2014-05-12 19:51:00 -0400] coderanger: double_p: Wrong channel?
[2014-05-12 19:52:35 -0400] savant: does anyone know of any way to time individual resources in a chef run?
[2014-05-12 19:52:48 -0400] savant: maybe output some sort of graph to say what bits are taking x amount of time?
[2014-05-12 19:54:16 -0400] coderanger: savant: The reporting system gathers that data
[2014-05-12 19:54:34 -0400] heathsnow_: maybe -VV when runing knife command?
[2014-05-12 19:54:34 -0400] coderanger: savant: It is a feature of enterprise chef server to store it though
[2014-05-12 19:55:05 -0400] coderanger: savant: If you are using hosted chef you can 24 hours of retention for free
[2014-05-12 19:55:11 -0400] savant: im using chef-solo
[2014-05-12 19:55:31 -0400] benmoss: coderanger: slightly ashamed to admit it but i dont know when that is
[2014-05-12 19:55:51 -0400] coderanger: savant: There are some report handlers that will print it to stdout
[2014-05-12 19:56:39 -0400] coderanger: savant: https://github.com/joemiller/chef-handler-profiler for example
[2014-05-12 19:56:50 -0400] benmoss: i think its a slightly difficult dance chef has to do, I want the service to be running, but then if a certain file is not up-to-date I need to stop the service, change the file, and then re-start the service
[2014-05-12 19:56:55 -0400] coderanger: benmoss: Basically it happens in order with respect to all other resources
[2014-05-12 19:57:11 -0400] zhirafovod: Hello guys. rake spec on "master" branch of chef stopped working for me. Worked a few weeks ago
[2014-05-12 19:57:21 -0400] savant: oh awesome thats pretty much exactly what I want
[2014-05-12 19:57:23 -0400] zhirafovod:   /Users/<username>/.rvm/gems/ruby-1.9.3-p545@global/gems/ohai-6.22.0.rc.0/lib/ohai/system.rb:128:in `all_plugins': wrong number of arguments (1 for 0) (ArgumentError)
[2014-05-12 19:57:25 -0400] savant: coderanger: thanks!
[2014-05-12 19:58:01 -0400] coderanger: zhirafovod: You probably need ohai 7 now
[2014-05-12 19:59:07 -0400] zhirafovod: @cooderanger, thank you. Will update chef on my workstation
[2014-05-12 19:59:54 -0400] whiteadam: someone fax me a beer
[2014-05-12 20:00:01 -0400] coderanger: zhirafovod: Unless you are tracking master of about a half dozen opscode projects, running from master is not recommended
[2014-05-12 20:00:38 -0400] savant: whiteadam: +1
[2014-05-12 20:01:25 -0400] whiteadam: savant: "We really need a GUI client if we're going to use git" -Developer    beer needed asap
[2014-05-12 20:01:43 -0400] zhirafovod: Was going to push my changes as a PR and found rake not working after rebasing to master.
[2014-05-12 20:01:55 -0400] savant: oh shit
[2014-05-12 20:02:03 -0400] savant: whiteadam: you have my regards
[2014-05-12 20:02:08 -0400] savant: send them sourcetree
[2014-05-12 20:02:17 -0400] whiteadam: savant: hah, I did
[2014-05-12 20:02:21 -0400] savant: its what I use for partial commits
[2014-05-12 20:02:39 -0400] savant: a bit more pleasant to review the commits (though I do committing/rebasing on the cli)
[2014-05-12 20:02:45 -0400] zhirafovod: <@coderanger>, updating to ohai 7.x helped. Thank you again
[2014-05-12 20:02:48 -0400] whiteadam: it just confused me, so I ran
[2014-05-12 20:02:56 -0400] savant: run far
[2014-05-12 20:03:19 -0400] coderanger: GitX ftw
[2014-05-12 20:03:55 -0400] rep0st: hey guys, just need a quick sanity check.Are handlers are for the entire chef run or can they be targeted to a specific cookbook/recipe? i.e via chef_handler resource from the chef handler cookbook
[2014-05-12 20:04:13 -0400] coderanger: rep0st: Global, though they can check when executed
[2014-05-12 20:05:21 -0400] mmzyk: Friendly reminder that we released the open source server 11.1.0 RC on Friday. Feel free to download and try it out if youre so inclinded. Send feedback my way. If Im not around, open a ticket or reach me at mm@getchef.com.
[2014-05-12 20:05:24 -0400] mmzyk: http://www.getchef.com/blog/2014/05/09/release-candidate-for-open-source-chef-server-11-1-0/
[2014-05-12 20:05:25 -0400] rep0st: @coderanger: thanks for the quick reply. that's what i thought. I suppose more specifically, when they check for exceptions when executed, it'll still check globally even before the chef handler gets executed?
[2014-05-12 20:06:07 -0400] coderanger: rep0st: Not sure what you mean, they are entirely global but you could check where the exception happened to decide to not email or whatever
[2014-05-12 20:06:35 -0400] rep0st: coderanger: got it. thanks!
[2014-05-12 20:21:35 -0400] dgarstang: I know this is a packer question, but #packer-tool is dead. The chef-client provisioner in packer starts the chef client. That makes no sense...
[2014-05-12 20:22:14 -0400] coderanger: dgarstang: Hmm?
[2014-05-12 20:22:36 -0400] dgarstang: coderanger: unless I'm missing the point. Is there a point to starting the chef client on an AMI?
[2014-05-12 20:22:55 -0400] coderanger: It doesn't start chef-client on the AMI, it just runs it during the build process
[2014-05-12 20:23:21 -0400] dgarstang: coderanger: we want the client installed and configured to start, but not start. .... it's starting the client in my case...
[2014-05-12 20:23:34 -0400] coderanger: Then fix whatever you use to build it
[2014-05-12 20:23:48 -0400] coderanger: thats entirely determined by the service scripts you are using and your init system
[2014-05-12 20:23:52 -0400] dgarstang: coderanger: I'm using the chef-client provisioner, so not much
[2014-05-12 20:24:03 -0400] coderanger: Okay, so fix your recipes
[2014-05-12 20:24:10 -0400] dgarstang: coderanger: There is no recipe yet
[2014-05-12 20:24:38 -0400] coderanger: dgarstang: By default the omnibus packages set up an init script
[2014-05-12 20:24:48 -0400] coderanger: dgarstang: You need to disable it if you don't want it
[2014-05-12 20:24:58 -0400] dgarstang: coderanger: well i don't see an option in packer to do that
[2014-05-12 20:25:16 -0400] coderanger: There isn't one, like I said, fix your recipes (or in this case, write them)
[2014-05-12 20:25:37 -0400] coderanger: packer does almost nothing, it installs omnibus chef on the target and runs chef-client
[2014-05-12 20:25:38 -0400] coderanger: thats it
[2014-05-12 20:25:44 -0400] coderanger: everything past that point is your problem
[2014-05-12 20:25:59 -0400] dgarstang: coderanger: well I don't want it to run chef-client. i seem to have no control over that
[2014-05-12 20:26:25 -0400] coderanger: again, running it at build time and running it when the AMI boots _have nothing to do with each other_
[2014-05-12 20:26:31 -0400] coderanger: You are just bad at using your tools :-)
[2014-05-12 20:26:36 -0400] dgarstang: coderanger: this is build time.
[2014-05-12 20:26:47 -0400] coderanger: Indeed, you are telling it to run chef-client at build time
[2014-05-12 20:26:51 -0400] coderanger: So it does
[2014-05-12 20:26:55 -0400] dgarstang: coderanger: not me, packer
[2014-05-12 20:27:22 -0400] coderanger: Packer, and all computer programs, do what you tell it to
[2014-05-12 20:27:46 -0400] martinisoft: Seeing some weirdness running a bats test. Anyone free to take a look? https://gist.github.com/martinisoft/7fb2291cb4b73c7ae0c3
[2014-05-12 20:27:55 -0400] coderanger: You need to write a recipe that will disable the default omnibus-installed init scripts
[2014-05-12 20:28:01 -0400] coderanger: (if you don't want it to run at AMI boot)
[2014-05-12 20:28:06 -0400] dgarstang: coderanger: snarky comments aside, as i said, pacekr seems to have no option to prevent it from starting.
[2014-05-12 20:28:25 -0400] coderanger: dgarstang: No, it doesn't, because it isn't something packer is involved in
[2014-05-12 20:28:29 -0400] dgarstang: coderanger: a recipe? well that means using chef-solo instead.
[2014-05-12 20:28:42 -0400] coderanger: dgarstang: It also has no option to deliver pizza
[2014-05-12 20:28:59 -0400] whiteadam: coderanger: can that option be added?
[2014-05-12 20:29:04 -0400] coderanger: dgarstang: I don't know what you mean, both client and solo run recipe code
[2014-05-12 20:29:12 -0400] coderanger: dgarstang: The difference is in where the code comes from
[2014-05-12 20:29:18 -0400] dgarstang: more snarky comments aside, if true, .... Oh I don;t know. whatever I say you'll have an issue with it
[2014-05-12 20:29:22 -0400] coderanger: whiteadam: +1 would use
[2014-05-12 20:29:52 -0400] whiteadam: coderanger: Feature Request: Every 5th kitchen converge, send a pizza.
[2014-05-12 20:29:56 -0400] dgarstang: coderanger: I simply want to install the client at build time and not start it. Starting it at build time makes no sense.
[2014-05-12 20:30:12 -0400] Raymond: chef-client is creating several zombie processes. We have had no luck in finding out what is causing the process to hang. The parent completes and closes.
[2014-05-12 20:30:18 -0400] whiteadam: dgarstang: So, you want to install the chef-client, but not run it?
[2014-05-12 20:30:28 -0400] dgarstang: whiteadm: correct
[2014-05-12 20:30:37 -0400] mmzyk: Raymond The first question is which version of client are you on?
[2014-05-12 20:30:46 -0400] mmzyk: I believe there was a version that had a zombie process bug.
[2014-05-12 20:31:35 -0400] Raymond: @mmzyk: Chef: 11.4.4
[2014-05-12 20:32:34 -0400] dgarstang: oh and coderanger: I don't want to disable chef in the init scripts. i want it to start when an instance created from the AMI is started.
[2014-05-12 20:33:15 -0400] dgarstang: it's just very peculiar that packer would want to start the chef-client during the build phase.
[2014-05-12 20:34:39 -0400] dgarstang: or .... maybe phrased another way, is there a way to install chef via the omnibus installer, and have it configured to start on boot, but not run immeditately?
[2014-05-12 20:36:14 -0400] mmzyk: Raymond That might be old enough to have the bug. Im trying to verify.
[2014-05-12 20:36:36 -0400] whiteadam: dgarstang: I'm pretty sure. There's a way to do it where it reads a json or some black magic
[2014-05-12 20:37:33 -0400] dgarstang: whiteadm: black magic eh? well I'm obviously an idiot for not knowing that
[2014-05-12 20:37:54 -0400] whiteadam: dgarstang: yeah, dummy! It might actually be White Science, who knows these days
[2014-05-12 20:38:15 -0400] dgarstang: whiteadam: no worries. my comment was directed more towards someone else.
[2014-05-12 20:38:19 -0400] whiteadam: dgarstang: This may or may not help, look under Unattended http://docs.opscode.com/install_bootstrap.html
[2014-05-12 20:38:35 -0400] whiteadam: dgarstang: coderanger is probably just drunk and if he's not, he should be.
[2014-05-12 20:38:54 -0400] mmzyk: Raymond This bug in mixlib-shell out is what caused the client to sometimes see zombie processes: https://tickets.opscode.com/browse/MIXLIB-17 Now working on figuring out which versions of the client are afffected to see if you have this.
[2014-05-12 20:39:00 -0400] dgarstang: whiteadm: you mean he's snarky when he is drunk? good to know
[2014-05-12 20:39:20 -0400] whiteadam: dgarstang: he's a young blond supermodel.
[2014-05-12 20:39:40 -0400] Raymond: mmzyk: Thanks, We will also look from our side.
[2014-05-12 20:40:23 -0400] dgarstang: I'm not even sure what is more appropriate ... chef-solo or chef-client
[2014-05-12 20:40:45 -0400] whiteadam: dgarstang: it's a fine line, depends on what you're doing I guess
[2014-05-12 20:41:06 -0400] dgarstang: whiteadm: well all I can fathom is that if I plan to do some config of the AMI then chef-solo makes sense
[2014-05-12 20:41:26 -0400] dgarstang: either can run the client find after the instance is started
[2014-05-12 20:41:37 -0400] whiteadam: dgarstang: new wrench, what about chef-zero!??!!??!??!?
[2014-05-12 20:41:44 -0400] dgarstang: whiteadm: grrrr
[2014-05-12 20:41:48 -0400] whiteadam: hehehe
[2014-05-12 20:42:09 -0400] whiteadam: dgarstang: server makes life easier for me, because I make lots of mistakes and have to update the recipes a lot
[2014-05-12 20:42:55 -0400] dgarstang: whiteadm: I don't think the omnibus installre even starts the client automatically (it doesn't on my mac) so to say that it's chef fault that the client starts automatically with packer is incorrect.
[2014-05-12 20:43:37 -0400] dgarstang: .... which means packer starts it, and the question is then why and why there's no option to not start it
[2014-05-12 20:43:40 -0400] mmzyk: Raymond That mixlib-shellout bug was reported in mixlib-shellout 1.2.0. It looks like chef 11.4.4 is running version 1.1.0.
[2014-05-12 20:43:57 -0400] whiteadam: dgarstang: so, by start, do you mean as a daemon?
[2014-05-12 20:44:19 -0400] whiteadam: dgarstang: because omnibus doesn't do that
[2014-05-12 20:44:24 -0400] dgarstang: whiteadm: no i dont think so because the output of chef-client is on my packer console. i think it's in the foreground in this case
[2014-05-12 20:44:25 -0400] whiteadam: dgarstang: or bootstrap
[2014-05-12 20:44:25 -0400] someara: dgarstang packer is using chef as the configuration mechanism to configure the machine.
[2014-05-12 20:44:35 -0400] someara: you can use chef to configure chef
[2014-05-12 20:44:51 -0400] whiteadam: someara just exploded minds
[2014-05-12 20:44:53 -0400] dgarstang: someara: before it's installed?
[2014-05-12 20:44:57 -0400] mmzyk: Raymond I think its possible you could be seeing this issue in your code, although its hard to definitely say. Step one I think would be to update the chef client youre running and see if it goes away.
[2014-05-12 20:44:57 -0400] someara: alternately, you can use the shell provisioner to just install chef
[2014-05-12 20:45:11 -0400] dgarstang: someara: or i suppose I could do that
[2014-05-12 20:45:23 -0400] someara: you goal is the end state of the machine
[2014-05-12 20:45:27 -0400] dgarstang: someara: or chef-solo and provide necessary config files.
[2014-05-12 20:45:31 -0400] yser: q: I get the following error when running "sudo /opt/chef-server/embedded/bin/knife list": ERROR: Attempt to use relative path '' when current directory is outside the repository path. So does chef absolutely need to run knife out of the repo-folder?
[2014-05-12 20:45:45 -0400] someara: sure
[2014-05-12 20:45:57 -0400] dgarstang: kk
[2014-05-12 20:46:00 -0400] dgarstang: tanx
[2014-05-12 20:46:04 -0400] someara: manage the chef package installation, the /etc/chef directory contents
[2014-05-12 20:46:08 -0400] coderanger: yser: For the knife-essentials commands, yes
[2014-05-12 20:46:45 -0400] Raymond: mmzyk: Ok, we will check our code again. We thought it could be due to a chef-handler that we built but have ruled that out.
[2014-05-12 20:47:00 -0400] dgarstang: someara: right
[2014-05-12 20:47:05 -0400] coderanger: yser: plain API commands can run from anywhere as long as you have a valid knife config
[2014-05-12 20:47:51 -0400] mmzyk: Raymond I didnt mean to suggest your code was at fault, sorry for my poor wording. :) I was suggesting you might be seeing the mixlib-shellout bug and you should try upgrading the chef-client and seeing if the zombie processes still remain. Sorry about being unclear.
[2014-05-12 20:51:13 -0400] Raymond: mmzyk: NP we will see up upgrading fixes it. If not we will check our code again. May have to open a ticket etc.
[2014-05-12 20:51:35 -0400] mmzyk: Raymond Sounds good.
[2014-05-12 20:52:14 -0400] yser: coderanger: I want to use the embedded chef client from the chef server installation. do u think thats a good idea or should i install an extra chef-solo?
[2014-05-12 20:52:35 -0400] coderanger: yser: Definitely install it on its own
[2014-05-12 20:53:01 -0400] coderanger: yser: The internal use of solo to omnibus-server is an impl detail
[2014-05-12 20:53:56 -0400] yser: coderanger: okay, thx alot ;)
[2014-05-12 20:54:59 -0400] martinisoft: Ah okay, might have found a bug with environments running BATS tests.
[2014-05-12 20:56:12 -0400] martinisoft: Has anyone else wrtitten a bats test to test a chef client version?
[2014-05-12 20:58:43 -0400] sj__: Hi - I can't get knife ec2 server create working - keep getting a knife ec2 error: Fog::Compute::AWS::NotFound: The key pair 'mytest' does not exist
[2014-05-12 20:59:06 -0400] sj__: but I have the keypair.pem in my ~/.ssh directory  with mode 600
[2014-05-12 21:00:22 -0400] coderanger: sj__: You need to add it to your EC2 account
[2014-05-12 21:00:47 -0400] coderanger: sj__: Its on the left side of the EC2 web console, Key Pairs
[2014-05-12 21:00:50 -0400] sj__: @coderanger I downloaded it from ec2
[2014-05-12 21:01:00 -0400] sj__: it's definitely in the ec2 dashboard
[2014-05-12 21:01:23 -0400] coderanger: sj__: Hmm, check the region, key pairs are independent in each region (for no good reason)
[2014-05-12 21:01:45 -0400] sj__: isn't the default always us-east?
[2014-05-12 21:01:54 -0400] coderanger: Should be, yes
[2014-05-12 21:02:19 -0400] coderanger: Are you super sure it is actually called "mytest" in EC2?
[2014-05-12 21:02:57 -0400] sj__: yeah - strings match
[2014-05-12 21:03:31 -0400] coderanger: sj__: Hmm, thats all the easy stuff at least
[2014-05-12 21:03:40 -0400] sj__: sure.
[2014-05-12 21:03:55 -0400] coderanger: sj__: Next thing to double check is that your access keys are what you expect, if you have more than one AWS acct
[2014-05-12 21:04:52 -0400] sj__: just one access key/account
[2014-05-12 21:05:06 -0400] coderanger: sj__: Can you pastebin the exact command you are running?
[2014-05-12 21:05:36 -0400] sj__: sec
[2014-05-12 21:06:39 -0400] sj__: http://pastebin.com/La6Ykv3u
[2014-05-12 21:06:43 -0400] sauraus: Anyone know how I can update an encrypted data bag?
[2014-05-12 21:07:36 -0400] stormerider: sauraus: knife data bag edit
[2014-05-12 21:07:56 -0400] sauraus: Should have added, from within a recipe? :)
[2014-05-12 21:08:12 -0400] stormerider: ah, yes, vv different.
[2014-05-12 21:08:23 -0400] workmad3: sauraus: there's no recipe API to update a data bag
[2014-05-12 21:08:30 -0400] stormerider: im not sure thats part of the public api yet
[2014-05-12 21:08:40 -0400] workmad3: sauraus: you could make the API calls directly, but you'd need admin rights on the nodes client
[2014-05-12 21:08:55 -0400] coderanger: sj__: Looks correct
[2014-05-12 21:09:07 -0400] sauraus: There is an API to edit data bags from a recipe, what I've not found is how an encrypted data bag can be updated
[2014-05-12 21:09:19 -0400] coderanger: sauraus: Are you using enterprise chef or open source?
[2014-05-12 21:09:24 -0400] sauraus: enterprise
[2014-05-12 21:09:36 -0400] coderanger: sauraus: Okay, does this recipe run on more than one server?
[2014-05-12 21:10:23 -0400] sauraus: Yes and depending on the server it will update a different data bag
[2014-05-12 21:10:33 -0400] coderanger: sauraus: Okay, probably safe then
[2014-05-12 21:10:33 -0400] workmad3: sauraus: why not just encrypt data on the node? :)
[2014-05-12 21:11:22 -0400] allaire: What can I do when a cookbook does not update to his latest version? No matter if I run berks update, nginx sticks to 1.8.0, not >= 2.0. I had to manually specify it in my Berksfile: cookbook 'nginx', '~> 2.0.0'
[2014-05-12 21:11:23 -0400] sauraus: coderanger the question is how? :)
[2014-05-12 21:11:32 -0400] coderanger: sauraus: sec, finding you the code
[2014-05-12 21:11:34 -0400] allaire: and no other cookbook specify any 1.x.x nginx version
[2014-05-12 21:11:37 -0400] sauraus: ah thx sorry
[2014-05-12 21:11:53 -0400] coderanger: sauraus: Worth noting that this is well into "very sharp edges" territory :)
[2014-05-12 21:12:03 -0400] sauraus: I love sharp things :)
[2014-05-12 21:12:26 -0400] stormerider: allaire: what was the previous definition?
[2014-05-12 21:12:52 -0400] allaire: stormerider: What do you mean
[2014-05-12 21:13:06 -0400] stormerider: allaire: what did you previously have defined in the berksfile?
[2014-05-12 21:13:37 -0400] allaire: stormerider: Nothing. no cookbook 'nginx'
[2014-05-12 21:13:43 -0400] allaire: it was a dependency of  a wrapper cookbook
[2014-05-12 21:13:48 -0400] allaire: with no pinned version
[2014-05-12 21:14:17 -0400] coderanger: sauraus: https://github.com/opscode/chef/blob/master/lib/chef/encrypted_data_bag_item.rb#L90
[2014-05-12 21:14:20 -0400] ambientsound: I'm trying to specify attributes in a role file (i.e. default_attributes 'mycookbook' => { 'mylist' => ['myvar'] } ) but cannot seem to access it from the recipe through node['mycookbook']['mylist']. What can I be doing wrong?
[2014-05-12 21:14:30 -0400] coderanger: sauraus: Call that classmethod and store the data back using a normal PUT
[2014-05-12 21:14:47 -0400] coderanger: sauraus: You can get the secret via #load_secret below
[2014-05-12 21:14:49 -0400] stormerider: eh, not really sure how you came across that, but if you care about the version, you should probably be specifying it natively anyways... my 2c, ymmv.
[2014-05-12 21:14:53 -0400] ambientsound: The attribute is also specified in attributes/default.rb, as an empty list, and that's what shows up in the recipe. I've tried override_attributes from the role file as well.
[2014-05-12 21:15:04 -0400] workmad3: coderanger: that's the code I ripped apart so I could store data on the node object encrypted :)
[2014-05-12 21:15:09 -0400] sauraus: coderanger thanks
[2014-05-12 21:15:22 -0400] coderanger: workmad3: Not touching that one with a ten foot pole :)
[2014-05-12 21:15:22 -0400] ambientsound: Tried looking in other cookbooks and they are doing it the same way, I can't understand what's wrong.
[2014-05-12 21:15:46 -0400] workmad3: coderanger: I kinda treat the node attributes as 'this is my private data bag' in that sense :)
[2014-05-12 21:16:12 -0400] coderanger: workmad3: Sure, but I (mostly) hate encrypted bags so ...
[2014-05-12 21:16:23 -0400] workmad3: heh
[2014-05-12 21:16:56 -0400] workmad3: at some point, I'm wanting to dig into chef-vault, see if I can do similar with that code
[2014-05-12 21:17:38 -0400] workmad3: so I could do stuff like generate passwords and store them on node data encrypted to the results of a search
[2014-05-12 21:17:39 -0400] coderanger: workmad3: Don't get me ranting about secrets mangement, I ca go on for for quite a while
[2014-05-12 21:17:50 -0400] workmad3: :)
[2014-05-12 21:17:53 -0400] stormerider: coderanger can, I've seen it :)
[2014-05-12 21:18:16 -0400] fujin: hope you have some prosthetic limbs standing by
[2014-05-12 21:18:23 -0400] fujin: to repair all the damage from blowing off your legs with shotguns
[2014-05-12 21:19:16 -0400] mjuszczak: When using knife rackspace to bootstrap a node, should the server name and node name match?  -S and -N?  Is one supposed to be the FQDN and the other the node name?
[2014-05-12 21:19:33 -0400] coderanger: Though if you're in SF and want to see me talk about secrets management, its one of my topics for SFPython on Wednesday
[2014-05-12 21:19:55 -0400] workmad3: coderanger: unfortunately, there's a bit of a big puddle and a very large bit of land between me and SF
[2014-05-12 21:20:31 -0400] dgarstang: ok, in really bad english, what means this when starting chef-client on new instance? "OpenSSL::PKey::RSAError: data too large for key size"
[2014-05-12 21:20:50 -0400] coderanger: dgarstang: You are trying to sign a message that is too big for the RSA key
[2014-05-12 21:21:01 -0400] coderanger: Usually means the hostname is too long
[2014-05-12 21:21:05 -0400] dgarstang: coderanger: got some context with that? oic
[2014-05-12 21:21:12 -0400] coderanger: dgarstang: Or rather, the node name is too long
[2014-05-12 21:21:36 -0400] dgarstang: coderanger: kk
[2014-05-12 21:33:34 -0400] mjuszczak: coderanger: What's the difference between the node name and server name?  And FYI, I was able to figure out that berkshelf bug.  Turns out my /etc/chef-server/chef-server.rb was missing one setting for the API, hence why openssl tests against my chef URL on port 443 was fine but berks was still crapping out.
[2014-05-12 21:34:08 -0400] coderanger: mjuszczak: The node name defaults to your fqdn, but can be overridden to be anything you want
[2014-05-12 21:34:48 -0400] ambientsound: figured it out. Can't use default_attributes more than once in a role file.
[2014-05-12 21:35:02 -0400] coderanger: ambientsound: Ahh, indeed :-) it just takes a single hash
[2014-05-12 21:35:09 -0400] rjbs-: Earlier today I filed a PR.  Looks like I should've filed a ticket instead... I wish GitHub let you disable PRs!
[2014-05-12 21:35:25 -0400] coderanger: rjbs-: PRs are fine, you just need need a Jira ticket too
[2014-05-12 21:36:33 -0400] coderanger: rjbs-: Jira is used to manage the triage and review process, thats all :)
[2014-05-12 21:36:37 -0400] rjbs: Cool, thanks.
[2014-05-12 21:36:52 -0400] rjbs: This bug had me in a foul mood much of the day.  Now I'm on the bus home, my mood will lighten!
[2014-05-12 21:37:39 -0400] mmzyk: We sometimes open a ticket if we find a PR that doesnt have one. But we dont always notice the PRs without tickets.
[2014-05-12 21:38:06 -0400] rocky_raccoon: wondering if anyone knows how to escape spaces in windows paths?
[2014-05-12 21:38:16 -0400] rocky_raccoon: I have this : command "C:\\Program\ Files\ (x86)\\Blahblah\\uninst.exe\ /S" in an execute block
[2014-05-12 21:38:34 -0400] rocky_raccoon: and it returns "C:\Program' is not recognized as an internal or external command"
[2014-05-12 21:38:40 -0400] mmzyk: Im heading out, but a reminder the OSC 11.1.0 RC is out. If you find issues, open a ticket, seek me out on IRC, or email me (mm@getchef.com)
[2014-05-12 21:39:02 -0400] coderanger: rocky_raccoon: '"C:/Program Files (x86)/Blahblah/uninst.exe" /S'
[2014-05-12 21:41:17 -0400] rocky_raccoon: brilliant, thanks coderanger!
[2014-05-12 21:41:53 -0400] rjbs: > Your default time zone has been set to (GMT-05:00) Havana
[2014-05-12 21:41:54 -0400] rjbs: Awesome.
[2014-05-12 21:42:30 -0400] coderanger: rjbs: Just don't tell Opscode
[2014-05-12 21:42:40 -0400] rjbs: I'm not *in* Havana, but that's what Jira guessed.
[2014-05-12 21:42:46 -0400] coderanger: Hah
[2014-05-12 21:42:59 -0400] rjbs: I hit a snag while making my patch, maybe someone can enlighten me as to the problem.  The bug I encountered is that after running `crontab`, the check for error is status.exitcode > 1
[2014-05-12 21:43:03 -0400] rjbs: Instead of > 0 or >= 1.
[2014-05-12 21:43:11 -0400] rjbs: So, I cleverly change this to (not status.success?)
[2014-05-12 21:43:31 -0400] rjbs: but quite a few of the smokers barfed; they acted like (status) was a Double and not a Process::Status
[2014-05-12 21:43:39 -0400] rjbs: so I changed it to use .exitcode, which of course also failed
[2014-05-12 21:43:48 -0400] rjbs: I think the problem is not mine, but... what?
[2014-05-12 21:43:52 -0400] rjbs: https://travis-ci.org/opscode/chef/builds/24999572
[2014-05-12 21:47:19 -0400] rjbs: I don't see what to click on https://tickets.opscode.com/browse/COOK-4647 to mark it as "Fix provided" -- am I missing something?
[2014-05-12 21:47:55 -0400] sauraus: coderanger I am getting this from my chef-client run for an encrypted data bag:
[2014-05-12 21:47:56 -0400] sauraus: undefined method `data_bag' for #<Chef::EncryptedDataBagItem:0x000000023705a8>
[2014-05-12 21:48:10 -0400] coderanger: sauraus: Pastebin your code please
[2014-05-12 21:49:41 -0400] sauraus: coderanger https://gist.github.com/Sauraus/8e46c997943c16adf9b8
[2014-05-12 21:51:20 -0400] coredump: anyone gets a TTY required error with the newest Vagrant and Kitchen?
[2014-05-12 21:51:34 -0400] coderanger: sauraus: Indeed, thats not the method I said to use
[2014-05-12 21:51:56 -0400] coderanger: sauraus: You need to use #encrypt_data_bag_item, not #new
[2014-05-12 21:52:55 -0400] sauraus: Ah :) The Synopsis on https://github.com/opscode/chef/blob/master/lib/chef/encrypted_data_bag_item.rb#L55 is wrong then no?
[2014-05-12 21:53:46 -0400] coderanger: sauraus: No? https://github.com/opscode/chef/blob/master/lib/chef/encrypted_data_bag_item.rb#L60
[2014-05-12 21:53:53 -0400] coderanger: sauraus: Thats for decryption, not encryption
[2014-05-12 21:54:57 -0400] coderanger: sauraus: In fact it says that at least three times in that doc block :D
[2014-05-12 21:55:10 -0400] coredump: the error is Vagrant is attempting to interface with the UI in a way that requires a TTY.
[2014-05-12 21:55:40 -0400] sauraus: I must be missing something because https://github.com/opscode/chef/blob/master/lib/chef/encrypted_data_bag_item.rb#L66 talks about a new encrypted data bag item
[2014-05-12 21:56:32 -0400] coderanger: sauraus: Read the end of the sentence
[2014-05-12 21:56:44 -0400] martinisoft: For those who were wondering. Sub-shelling out tot he vagrant user fixed the issue: sudo -u $SUDO_USER bash -l -c "chef-client --version | grep '^Chef: 11.10.0$'"
[2014-05-12 21:57:04 -0400] rjbs: I'm afraid I'm going to have to go in a moment, but https://tickets.opscode.com/browse/COOK-4647 just needs to be marked Fix Provided.  I can't figure out what to click, so I think I'm going to give up as it stands.
[2014-05-12 21:57:18 -0400] martinisoft: Gnarly hack, but the only way to prevent busser from monkeying with the GEM_HOME env var that freaks out Chef.
[2014-05-12 21:57:51 -0400] sauraus: :D let's agree to disagree I think the docs are confusing and innaccurate
[2014-05-12 21:57:54 -0400] coderanger: rjbs: You need to sign a CLA before you can mark ti that way
[2014-05-12 21:58:02 -0400] coderanger: sauraus: I did warn you ;-)
[2014-05-12 21:58:46 -0400] sauraus: :D
[2014-05-12 21:58:55 -0400] rjbs: coderanger: I did sign it! :-/  I'll check again.
[2014-05-12 21:59:05 -0400] coderanger: rjbs: Recently?
[2014-05-12 21:59:13 -0400] rjbs: an hour ago?  does it need to go through legal first?
[2014-05-12 21:59:14 -0400] coderanger: rjbs: Its a manual process to update your Jira perms
[2014-05-12 21:59:16 -0400] coderanger: yeah
[2014-05-12 21:59:18 -0400] rjbs: Okay.
[2014-05-12 21:59:27 -0400] coderanger: One sec, I'll mark it for oyu
[2014-05-12 21:59:30 -0400] sauraus: So how does this work down stream? As next I get an error on the .data_bag('yournamehere') method:: undefined method `data_bag' for #<Hash:0x00000002fb0fc0>
[2014-05-12 21:59:43 -0400] rjbs: That'd be great.  Otherwise, if I get an email when it's done, that'll remind me to follow up
[2014-05-12 21:59:58 -0400] coderanger: sauraus: You can't use the nice OO APIs, you have to do it manually
[2014-05-12 22:00:11 -0400] coderanger: rjbs: Done
[2014-05-12 22:00:26 -0400] coderanger: sauraus: So you get back an encrypted hash
[2014-05-12 22:00:29 -0400] sauraus: oh so what is the rest of this sharp API that I need to use to name and save the data bag?
[2014-05-12 22:00:36 -0400] rjbs: coderanger: Thanks, I appreciate it!  Now, time to lurk.
[2014-05-12 22:00:50 -0400] coderanger: you then need to use chef_server_rest.put_rest("data/<bag name>/<item name>", encrypted_data)
[2014-05-12 22:03:55 -0400] sauraus: coderanger do you have an URL for the chef_server_rest api?
[2014-05-12 22:05:49 -0400] mjuszczak: chef-client doing okay on 14.04 now?
[2014-05-12 22:06:07 -0400] sauraus: coderanger is there any example code for how to best do the chef server rest API from within a recipe?
[2014-05-12 22:11:52 -0400] drywheat: does anyone know a good resource for learning about attribute merging in Chef?
[2014-05-12 22:13:07 -0400] troyready: drywheat, http://docs.opscode.com/chef_overview_attributes.html
[2014-05-12 22:13:13 -0400] troyready: Way long, but a lot of good info it
[2014-05-12 22:13:33 -0400] coderanger: sauraus: Just exactly what I said
[2014-05-12 22:13:44 -0400] coderanger: sauraus: chef_server_rest is available in recipe context
[2014-05-12 22:13:46 -0400] drywheat: troyready: that'll work, thank you
[2014-05-12 22:13:55 -0400] troyready: Particularly the Attribute Sources & Attribute Precedence sections.
[2014-05-12 22:14:01 -0400] coderanger: drywheat: That covers everything except dealing with arrays
[2014-05-12 22:14:35 -0400] sauraus: coderanger that returns an error:  No resource, method, or local variable named `chef_server_rest' for `Chef::Recipe "default"'
[2014-05-12 22:14:58 -0400] coderanger: Hmm, guess that changed, one sec
[2014-05-12 22:16:19 -0400] coderanger: sauraus: Ahh, node.chef_server_rest.put_rest
[2014-05-12 22:16:44 -0400] sauraus: I tried using Chef::Rest.new like in the update gist here: https://gist.github.com/Sauraus/8e46c997943c16adf9b8
[2014-05-12 22:18:15 -0400] sauraus: still an error :( here is what I am doing and the error
[2014-05-12 22:18:17 -0400] sauraus: databag.each do |key, val|
[2014-05-12 22:18:17 -0400] sauraus:   #puts rest.put_rest("/data/#{node[:hostname]}/#{key}", val)
[2014-05-12 22:18:18 -0400] sauraus:   node.chef_server_rest.put_rest("/data/#{node[:hostname]}/#{key}", val)
[2014-05-12 22:18:18 -0400] sauraus: end
[2014-05-12 22:18:26 -0400] sauraus: 500 "Internal Server Error"
[2014-05-12 22:18:47 -0400] coderanger: sauraus: You can't use a hostname as a bag name like htat
[2014-05-12 22:19:06 -0400] coderanger: sauraus: For one, the bag needs to be created before you can use it, and for two you can't have periods in bag names IIRC
[2014-05-12 22:19:39 -0400] sauraus: ah bugger thanks
[2014-05-12 22:20:19 -0400] coderanger: sauraus: What you probably want is a single bag called jenkins_keys or something
[2014-05-12 22:20:33 -0400] sauraus: that's my thinking as well now :)
[2014-05-12 22:20:34 -0400] drywheat: hmm, i want to allow Chef to merge a hash in my attributes but i can't seem to do so
[2014-05-12 22:20:35 -0400] coderanger: sauraus: And for the item name use node.name.replace('.', '_')
[2014-05-12 22:20:46 -0400] coderanger: thats fairly common at least
[2014-05-12 22:20:51 -0400] drywheat: I'm using the precendence level "set" inside an attribute file.
[2014-05-12 22:21:04 -0400] coderanger: You'll still need somewhat more complex code to do create-or-update
[2014-05-12 22:21:07 -0400] drywheat: is there something special about that level?
[2014-05-12 22:21:15 -0400] coderanger: basically PUT first and if that 404s, do a POST to create it
[2014-05-12 22:21:20 -0400] coderanger: drywheat: Yes, don't use it
[2014-05-12 22:21:26 -0400] drywheat: the docs indicate: "A normal attribute is a setting that persists on the target system and is never reset during a chef-client run."
[2014-05-12 22:21:39 -0400] coderanger: drywheat: Yeah, thats what makes it special (and usually wrong)
[2014-05-12 22:21:40 -0400] drywheat: coderanger: really? wow, i've been using it like a beast
[2014-05-12 22:22:55 -0400] drywheat: should I be using the "default" level when setting values for a cookbook I'm wrapping?
[2014-05-12 22:23:03 -0400] coderanger: drywheat: It exists for when you need to write back state from the node that isn't managed elsewhere, this is almost always a terrible idea
[2014-05-12 22:23:15 -0400] drywheat: Ok
[2014-05-12 22:23:18 -0400] coderanger: drywheat: Yes, cookbook attribute files almost exclusively use default
[2014-05-12 22:23:38 -0400] coderanger: drywheat: Remember that cookbooks are loaded in dependecy-solved (topographic) order
[2014-05-12 22:23:59 -0400] coderanger: drywheat: So as long as your metadata deps are correct, it gets merged in the right order :)
[2014-05-12 22:25:43 -0400] drywheat: ok, i think it get it, my top-level cookbook 'my-app' sets default['firewall']['rules'] in its attribute file for the cookbook 'firewall' that it uses and defines as a dep in its metadata file.
[2014-05-12 22:25:58 -0400] drywheat: instead of using `set'
[2014-05-12 22:26:38 -0400] drywheat: and anything that wraps that also uses default['firewall']['rules'] and merging will take place correctly
[2014-05-12 22:27:17 -0400] sauraus: coderanger I believe I don't need the REST apit at all to do this, check out the updated gist https://gist.github.com/Sauraus/8e46c997943c16adf9b8
[2014-05-12 22:27:55 -0400] coderanger: sauraus: Yeah, thats effectively the same just taking more lines :)
[2014-05-12 22:28:03 -0400] sauraus: :D
[2014-05-12 22:28:15 -0400] sauraus: Just trying to avoid those sharp edges ;)
[2014-05-12 22:42:43 -0400] helen: hi everyone
[2014-05-12 22:44:09 -0400] Guest61173: anyone here familiar with chef-shell and chef-solo?
[2014-05-12 22:44:18 -0400] coderanger: Guest61173: Many people, what can we do for oyu?
[2014-05-12 22:44:41 -0400] Guest61173: just not quite sure I understand how to use it
[2014-05-12 22:45:15 -0400] Guest61173: i'm running it with chef-shell -s -c solo.rb -j solo.json
[2014-05-12 22:45:15 -0400] coderanger: Guest61173: What are you trying to do?
[2014-05-12 22:45:39 -0400] Guest61173: trying to understand why one of my directory and symlink are not being created
[2014-05-12 22:46:05 -0400] Guest61173: i added some breaks, but chef-shell doesn't seem to do anything of use
[2014-05-12 22:46:08 -0400] coderanger: Guest61173: Can you pastebin your recipe?
[2014-05-12 22:46:56 -0400] Guest61173: well, to be honest, was quite keen to find out how to use chef-shell as imagine i'll need it quite a lot :)
[2014-05-12 22:47:13 -0400] coderanger: Some people like it, I never use it personally :)
[2014-05-12 22:47:46 -0400] Guest61173: i assumed it would go through the run list but doesn't really give any output
[2014-05-12 22:48:19 -0400] dgarstang: Ok, I dunno why but I have a chef-client here with a fqdn of 'test01.testfoo.com' and chef-client on first run is reporting "OpenSSL::PKey::RSAError: data too large for key size"
[2014-05-12 22:48:45 -0400] coderanger: dgarstang: Run with -ldebug, it will show you the params before signing
[2014-05-12 22:50:44 -0400] dgarstang: well, seeing a lot of ' Plugin PHP threw #<Errno::ENOENT: No such file or directory - php -v>' and the like
[2014-05-12 22:52:42 -0400] dgarstang: and nothing about node name
[2014-05-12 22:53:07 -0400] coderanger: dgarstang: Please re-read my suggestion
[2014-05-12 22:53:35 -0400] dgarstang: coderanger: i ran with -l debug.
[2014-05-12 22:53:38 -0400] Guest61173: anyone else here familiar with chef-shell and chef-solo?
[2014-05-12 22:53:52 -0400] dgarstang: and there's so many backtraces I don't know which one is relevant
[2014-05-12 22:54:54 -0400] coderanger: dgarstang: None of them, look for the API parameter dumps
[2014-05-12 22:54:56 -0400] dgarstang: "Creating a new client identity for test01.footest.com using the validator key."
[2014-05-12 22:56:00 -0400] dgarstang: 6 references to 'api' all in files.
[2014-05-12 22:56:04 -0400] spheromak: coderanger: where did poise/ruby go ?
[2014-05-12 22:56:10 -0400] coderanger: spheromak: ?
[2014-05-12 22:56:11 -0400] dgarstang: no reference to parm
[2014-05-12 22:56:17 -0400] coderanger: spheromak: You mean poise/poise-ruby?
[2014-05-12 22:56:36 -0400] spheromak: ah shit not poise/ruby poise/posie-ruby
[2014-05-12 22:56:38 -0400] spheromak: hurp a durp
[2014-05-12 22:56:52 -0400] dgarstang: I'm seeing nothing about API parameter dumps.
[2014-05-12 22:59:45 -0400] Guest61173: i'll try and find some more examples of using it with solo elsewhere, thanks anyhow
[2014-05-12 23:01:33 -0400] dgarstang: Darn, well I don't know. dead with "DEBUG: Re-raising exception: OpenSSL::PKey::RSAError - data too large for key size"
[2014-05-12 23:04:12 -0400] coderanger: dgarstang: Search for "DEBUG: Initiating POST" (or GET, PUT, etc)
[2014-05-12 23:04:26 -0400] coderanger: dgarstang: Or do your usual of give up until someone walks you through the fix :)
[2014-05-12 23:05:26 -0400] brauliobo_: hello all, I can't find (anymore) the apache 2.4 cookbook, anybody know where to find it?
[2014-05-12 23:05:45 -0400] coderanger: brauliobo_: I don't think there is one, at least not specifically
[2014-05-12 23:05:45 -0400] dgarstang: coderanger: It's a good thing I leave my shame at the door when I come in here.
[2014-05-12 23:06:33 -0400] dgarstang: coderanger: Searched debug output. No reference to 'Initiating' or POST or GET
[2014-05-12 23:07:39 -0400] coderanger: dgarstang: How far does it get before dying?
[2014-05-12 23:07:59 -0400] coderanger: If it crashes before any API requests get made, then none would be logged
[2014-05-12 23:08:13 -0400] coderanger: and also means you need to check the params manually
[2014-05-12 23:08:44 -0400] coderanger: http://pychef.readthedocs.org/en/latest/auth.html#base-string thats the string thats too long
[2014-05-12 23:10:08 -0400] dgarstang: coderanger: about this far. http://pastebin.com/pX80CQqB
[2014-05-12 23:11:50 -0400] coderanger: dgarstang: Also make sure your keys are all 2048 bits
[2014-05-12 23:12:11 -0400] coderanger: dgarstang: Long ago chef issues 1024 bit keys, but that was back in the early 0.9 days
[2014-05-12 23:12:15 -0400] dgarstang: coderanger: Well, the only key involved so far here is the validation key created by the chef server.
[2014-05-12 23:12:30 -0400] coderanger: Indeed, that would be the one to confirm
[2014-05-12 23:12:50 -0400] dgarstang: coderanger: Why would the chef server generate an incorrect length key?
[2014-05-12 23:13:04 -0400] coderanger: dgarstang: It wouldn't unless you kept the same key for the last 4 years
[2014-05-12 23:13:11 -0400] dgarstang: oh noes
[2014-05-12 23:13:30 -0400] dgarstang: or... I could have used the private key instead of the public key. :-\
[2014-05-12 23:13:54 -0400] dgarstang: grrr dammit. thanks
[2014-05-12 23:14:24 -0400] whiteadam: Are you guys still talking about computers?
[2014-05-12 23:14:33 -0400] dgarstang: wait... which one goes in the validation key?
[2014-05-12 23:15:06 -0400] coderanger: dgarstang: Should be the private half of the validation key
[2014-05-12 23:15:12 -0400] coderanger: whiteadam: Thats pretty much all I do
[2014-05-12 23:15:16 -0400] coderanger: whiteadam: It is a sad life
[2014-05-12 23:15:18 -0400] dgarstang: coderanger: okiday, that's what I got. Hmmm
[2014-05-12 23:15:58 -0400] whiteadam: coderanger: I know right? I don't know anything else... or much about this.
[2014-05-12 23:16:44 -0400] brauliobo_: coderanger: just found it: https://github.com/onehealth-cookbooks/apache2-onehealth.git
[2014-05-12 23:17:30 -0400] coderanger: brauliobo_: I mean thats just someone's cookbook, not sure you should use it though
[2014-05-12 23:18:29 -0400] brauliobo_: coderanger: it is from the developer at apache2, i thing
[2014-05-12 23:18:32 -0400] brauliobo_: think
[2014-05-12 23:19:10 -0400] digitalchild: anyone have any pointers on getting rvm onto a node without breaking chef-client ?
[2014-05-12 23:19:15 -0400] coderanger: brauliobo_: No, its from some random company called onehealth
[2014-05-12 23:19:25 -0400] coderanger: digitalchild: step 1) please don't :-(
[2014-05-12 23:19:29 -0400] coderanger: digitalchild: What OS are you on?
[2014-05-12 23:19:33 -0400] digitalchild: centos 6.5
[2014-05-12 23:19:38 -0400] digitalchild: and ruby is too freaking old
[2014-05-12 23:19:41 -0400] coderanger: digitalchild: Use software collections
[2014-05-12 23:19:48 -0400] digitalchild: ok, just came across that this morning
[2014-05-12 23:19:51 -0400] digitalchild: will read up on that
[2014-05-12 23:20:03 -0400] someara: actually, onehealth now maintains the apache2 cookbook on the community site
[2014-05-12 23:20:05 -0400] coderanger: digitalchild: It has shiny new versions of everything you need :)
[2014-05-12 23:20:14 -0400] coderanger: Ahh, well there you go,
[2014-05-12 23:20:19 -0400] someara: so what you see there is the "official" one
[2014-05-12 23:20:26 -0400] digitalchild: coderanger: thanks
[2014-05-12 23:20:29 -0400] coderanger: still not from the ASF though
[2014-05-12 23:20:34 -0400] someara: right
[2014-05-12 23:20:38 -0400] digitalchild: its the last thing i have left to get my base node config completed
[2014-05-12 23:20:49 -0400] brauliobo_: coderanger:  github.com/opscode-cookbooks/apache2 redirects to onehealth
[2014-05-12 23:21:15 -0400] coderanger: brauliobo_: Yes, that one looks better, different from what you linked before though :)
[2014-05-12 23:21:30 -0400] brauliobo_: coderanger: ? both are from onehealth
[2014-05-12 23:22:32 -0400] someara: the apache2 cookbook that you get when you reference "apache2" on the community site, was originally authored and maintained by opscode. onehealth has taken over maintenance of that cookbook
[2014-05-12 23:23:47 -0400] whiteadam: brauliobo_: onehealth is good, it's what they used on the Obamacare site.
[2014-05-12 23:24:31 -0400] digitalchild: coderanger: how the hell did i miss SCLs ? I've been using centos since version 4...
[2014-05-12 23:24:48 -0400] someara: SCLs are a new thing... they were announced sometime last year
[2014-05-12 23:25:03 -0400] coderanger: Yeah, and only pushed hard in the last month or so
[2014-05-12 23:25:12 -0400] someara: they're like a crappy version of ubuntu PPAs
[2014-05-12 23:25:18 -0400] digitalchild: *nods*
[2014-05-12 23:25:27 -0400] digitalchild: well i just need ruby 1.9.3
[2014-05-12 23:25:40 -0400] whiteadam: you're in luck, that's a version that exists
[2014-05-12 23:25:44 -0400] digitalchild: :)
[2014-05-12 23:25:51 -0400] digitalchild: cause i use the ruby backup gem
[2014-05-12 23:25:56 -0400] whiteadam: oooh, do you?
[2014-05-12 23:26:00 -0400] digitalchild: yup
[2014-05-12 23:26:06 -0400] digitalchild: i replaced all my hacked rsync scripts with it
[2014-05-12 23:26:07 -0400] whiteadam: I was just looking at it last week, how is it?
[2014-05-12 23:26:12 -0400] whiteadam: sweet
[2014-05-12 23:26:16 -0400] digitalchild: perfect for my needs
[2014-05-12 23:26:22 -0400] digitalchild: file system, database all good
[2014-05-12 23:26:26 -0400] digitalchild: i also like the notifiers
[2014-05-12 23:26:30 -0400] whiteadam: I have to go through and clean up a bunch of AMANDA and rsync scripts from some old admins, thought about using it
[2014-05-12 23:26:37 -0400] digitalchild: i have one that writes to an API for a public display + twitter notifier
[2014-05-12 23:26:44 -0400] whiteadam: fancy you
[2014-05-12 23:26:47 -0400] digitalchild: that's EXACTLY what i replaced
[2014-05-12 23:26:50 -0400] coderanger: digitalchild: If you ever need newer ruby for Debian-family machines, look at Poise Ruby
[2014-05-12 23:26:58 -0400] whiteadam: I need to get one of these ners I work with to write a DB2 dumper for it
[2014-05-12 23:27:02 -0400] whiteadam: ners = nerds
[2014-05-12 23:27:04 -0400] digitalchild: coderanger: will do, im 100% centos/rhel
[2014-05-12 23:27:11 -0400] coderanger: digitalchild: I'm sorry :)
[2014-05-12 23:27:26 -0400] digitalchild: coderanger: just ensures that it runs on my hardware (dell gear)
[2014-05-12 23:27:39 -0400] digitalchild: but less of an issue these days seeing as almost everything is virtualised
[2014-05-12 23:27:48 -0400] digitalchild: but better the devil you know..
[2014-05-12 23:27:50 -0400] whiteadam: yeah man, you don't got that cloud?
[2014-05-12 23:28:00 -0400] digitalchild: whiteadam: hybrid
[2014-05-12 23:28:10 -0400] whiteadam: http://www.theonion.com/video/hp-on-that-cloud-thing-that-everyone-else-is-talki,28789/
[2014-05-12 23:28:11 -0400] digitalchild: work for a company that doesn't like to put stuff in 'clouds'
[2014-05-12 23:28:40 -0400] whiteadam: digitalchild: same here, but luckily I am a "cloud consultant" whatever that means, so I get to use it.
[2014-05-12 23:28:43 -0400] digitalchild: but after 2.5 years its gone from 'not happening' to 'ok lets investigate this'
[2014-05-12 23:29:05 -0400] digitalchild: starting with DR solution first to prove how useful and cheap it can be
[2014-05-12 23:29:10 -0400] whiteadam: yeah, sucks for enterprise IT at the moment, too hard to horizontally scale
[2014-05-12 23:29:33 -0400] digitalchild: hence why im moving to chef from my sweet sweet script mess :)
[2014-05-12 23:29:38 -0400] whiteadam: that's the way to slip it in, use it for DR, then when there's a failure, kick it to prod for a moment and let it stay prod :)
[2014-05-12 23:29:57 -0400] digitalchild: biggest issue for us, is bandwidth limits and speeds
[2014-05-12 23:30:09 -0400] digitalchild: i still have to run all file servers onsite cause the networks are just too slow
[2014-05-12 23:30:19 -0400] digitalchild: 6 of my 9 sites are on 1/1mbit links..
[2014-05-12 23:30:37 -0400] whiteadam: digitalchild: sounds like a lot of my company. Fortune 100 my ass
[2014-05-12 23:30:52 -0400] digitalchild: lol
[2014-05-12 23:30:59 -0400] digitalchild: australia is just too expensive and big..
[2014-05-12 23:31:07 -0400] whiteadam: digitalchild: Most all sites are 1-4 T1's that are hard routed back to the main datacenter in nowhere america
[2014-05-12 23:31:31 -0400] digitalchild: they're charging $40-80/mbit on our dc..
[2014-05-12 23:31:50 -0400] whiteadam: digitalchild: for instance, they just put $600,000 of routers and switches in our office, then put in 2 T1's
[2014-05-12 23:31:56 -0400] whiteadam: because that makes sense
[2014-05-12 23:31:58 -0400] digitalchild: lol
[2014-05-12 23:32:09 -0400] darkside_: heh
[2014-05-12 23:32:11 -0400] digitalchild: at least i got 10/10 at head office
[2014-05-12 23:32:27 -0400] digitalchild: we are currently using a vpn/mpls network
[2014-05-12 23:32:34 -0400] digitalchild: which im looking to replace with more meraki gear
[2014-05-12 23:32:39 -0400] whiteadam: I wonder when AMZN is going to put a center in Australia
[2014-05-12 23:32:40 -0400] gyre007_: anyone here knows how apt_package upgrade is implemented ? looks like package upgrade is installing 1 version below the package is available ?? https://gist.github.com/milosgajdos83/d794768c2d0c672c9822
[2014-05-12 23:32:46 -0400] whiteadam: meraki is nice stuff
[2014-05-12 23:32:46 -0400] digitalchild: whiteadam: they already have
[2014-05-12 23:32:49 -0400] digitalchild: there is 2
[2014-05-12 23:32:51 -0400] gyre007_: like...it's running install instead of upgrade ??
[2014-05-12 23:32:54 -0400] gyre007_: w00t ?!
[2014-05-12 23:33:14 -0400] whiteadam: digitalchild: are there? I guess I never look outside of the US, like a good American
[2014-05-12 23:33:21 -0400] digitalchild: whiteadam: hah
[2014-05-12 23:33:27 -0400] digitalchild: yeah for about 18 months maybe 2 years?
[2014-05-12 23:33:34 -0400] whiteadam: digitalchild: ah, Asia Pacific - Sydney
[2014-05-12 23:33:43 -0400] whiteadam: digitalchild: I knew a lot of their support was there
[2014-05-12 23:33:47 -0400] digitalchild: that's what ill be using for our DR cloud
[2014-05-12 23:34:00 -0400] whiteadam: digitalchild: Do they have Glacier?
[2014-05-12 23:34:01 -0400] digitalchild: cause the backup gem can store to s3
[2014-05-12 23:34:15 -0400] EnriqueFabuloso: Hello everyone.
[2014-05-12 23:34:17 -0400] digitalchild: im not sure, amazon stuff for me is the last 4-5 months
[2014-05-12 23:34:46 -0400] EnriqueFabuloso: Is this a private channel?
[2014-05-12 23:34:52 -0400] digitalchild: but wanting to learn it the right way with vdcs
[2014-05-12 23:34:53 -0400] digitalchild: EnriqueFabuloso: no
[2014-05-12 23:34:56 -0400] whiteadam: digitalchild: ah, it appears they do. We have to store logs for PCI compliance, so we just do it on glacier. Like 1 USD per GB
[2014-05-12 23:35:19 -0400] digitalchild: whiteadam: nothing that fancy here, just gotta make sure the production management apps don't break
[2014-05-12 23:35:28 -0400] whiteadam: Backup Gem - S3 w/ Policy - Glacier
[2014-05-12 23:35:33 -0400] gyre007_: oh upgrade is calling install
[2014-05-12 23:35:58 -0400] whiteadam: gyre007_: Upgrade is both Update or Install
[2014-05-12 23:36:14 -0400] EnriqueFabuloso: May I ask a question pertaining to a vagrant plugin by the name of 'berkshelf'?
[2014-05-12 23:36:27 -0400] whiteadam: gyre007_: :upgradeUse to install a package and/or to ensure that a package is the latest version.
[2014-05-12 23:36:28 -0400] digitalchild: EnriqueFabuloso: just ask, don't ask to ask
[2014-05-12 23:36:32 -0400] digitalchild: like all irc channels :)
[2014-05-12 23:36:37 -0400] gyre007_: apt-get upgrade != apt-get install mate...
[2014-05-12 23:36:45 -0400] whiteadam: EnriqueFabuloso: You could also try #berkshelf
[2014-05-12 23:36:46 -0400] coderanger: EnriqueFabuloso: Veriily
[2014-05-12 23:36:50 -0400] gyre007_: https://github.com/opscode/chef/blob/master/lib/chef/provider/package/apt.rb#L97
[2014-05-12 23:37:07 -0400] EnriqueFabuloso: digitalchild: Okay
[2014-05-12 23:37:08 -0400] whiteadam: gyre007_: Ah, I thought you meant the Chef command.
[2014-05-12 23:37:34 -0400] EnriqueFabuloso: whitedam: #berkshelf seems non-responsive.
[2014-05-12 23:37:43 -0400] gyre007_: Chef should be doing the right thing - it's not...clearly!
[2014-05-12 23:38:26 -0400] EnriqueFabuloso: ran the following: vagrant plugin install vagrant-berkshelf --plugin-version 1.3.7
[2014-05-12 23:39:06 -0400] EnriqueFabuloso: Seems like dependency errors...
[2014-05-12 23:39:32 -0400] coderanger: EnriqueFabuloso: What version of vagrant are you using?
[2014-05-12 23:39:38 -0400] EnriqueFabuloso: 1.3.5
[2014-05-12 23:39:50 -0400] whiteadam: gyre007_: Yeah, I thought you meant like: package 'apt' do action :upgrade end
[2014-05-12 23:39:53 -0400] EnriqueFabuloso: coderanger: 1.3.5
[2014-05-12 23:39:54 -0400] coderanger: EnriqueFabuloso: Hmm, no idea, thats possibly too old for the plugin to work
[2014-05-12 23:40:47 -0400] EnriqueFabuloso: coderanger: I following the instructions I found @ https://gitlab.com/gitlab-org/cookbook-gitlab/blob/master/doc/development.md
[2014-05-12 23:41:12 -0400] coderanger: EnriqueFabuloso: That specifically cites vagrant 1.4.0
[2014-05-12 23:41:15 -0400] gyre007_: well whiteadam I did mean to ask what in goodness name is Chef doing when package blah do action :upgrade end is in recipe
[2014-05-12 23:41:16 -0400] whiteadam: EnriqueFabuloso: I had issues with that cookbook last week. I could only get it to work on Ubuntu 12.04
[2014-05-12 23:41:37 -0400] coderanger: EnriqueFabuloso: At least at the top of the file
[2014-05-12 23:41:44 -0400] coderanger: EnriqueFabuloso: You are better off using the latest vagrant though
[2014-05-12 23:41:51 -0400] whiteadam: gyre007_: Yeah, there's :install :update: and :upgrade (upgrade is the first 2 combined)
[2014-05-12 23:41:58 -0400] EnriqueFabuloso: whitedam: I'm using 14.04, so do you think that's the problem?
[2014-05-12 23:42:27 -0400] whiteadam: EnriqueFabuloso: yeah, there was an open issue: https://gitlab.com/gitlab-org/cookbook-gitlab/issues/52
[2014-05-12 23:42:51 -0400] whiteadam: EnriqueFabuloso: and also this one: https://gitlab.com/gitlab-org/cookbook-gitlab/issues/51
[2014-05-12 23:42:58 -0400] gyre007_: whiteadam: there is NO update in apt_package mate
[2014-05-12 23:43:16 -0400] gyre007_: there is no such thing as UPDATE APT package
[2014-05-12 23:43:18 -0400] whiteadam: gyre007_: Sounds like ghosts
[2014-05-12 23:43:39 -0400] gyre007_: update apt db
[2014-05-12 23:43:40 -0400] gyre007_: yes
[2014-05-12 23:43:46 -0400] gyre007_: update package - no
[2014-05-12 23:44:06 -0400] EnriqueFabuloso: Does anyone have suggestions for installing vagrant ubuntu virtualbox with gitlab?
[2014-05-12 23:44:22 -0400] whiteadam: EnriqueFabuloso: It works if you use the RPM
[2014-05-12 23:44:32 -0400] whiteadam: EnriqueFabuloso: or at least it did for me on RHEL
[2014-05-12 23:44:46 -0400] whiteadam: EnriqueFabuloso: You might want to try #gitlab also
[2014-05-12 23:46:44 -0400] EnriqueFabuloso: digitalchild: Thank you
[2014-05-12 23:46:54 -0400] EnriqueFabuloso: whitedam: Thank you
[2014-05-12 23:47:02 -0400] EnriqueFabuloso: coderanger: Thank you
[2014-05-12 23:47:10 -0400] whiteadam: no problem
[2014-05-12 23:47:30 -0400] digitalchild: no worries but it was all whiteadam heh
[2014-05-12 23:47:56 -0400] whiteadam: I was just saying things, probably none of it true.

[2014-05-02 01:52:16 -0400] hailwood: Hi guys, in an attributes file, can we have an attribute concat another attribute from that file? E.g.
[2014-05-02 01:52:16 -0400] hailwood: default['roots']['application'] = 'https://mysite.com/'
[2014-05-02 01:52:17 -0400] hailwood: defaults['roots']['oauth'] = defaults['roots']['application'].concat('oauth/endpoint/')
[2014-05-02 01:53:22 -0400] hailwood: whopos, although that's not valid since it would alter the original, it get's my point across, can we use an attribute in the same file in an attributes file?
[2014-05-02 01:58:21 -0400] coderanger: hailwood: You can do that, but really don't
[2014-05-02 01:58:38 -0400] coderanger: hailwood: It doesn't interact well with some types of overrides
[2014-05-02 01:58:45 -0400] coderanger: hailwood: Use template strings if you have to
[2014-05-02 01:59:21 -0400] coderanger: defaults['roots]['oauth'] = '%{application}oauth/endpoint/'
[2014-05-02 02:00:17 -0400] coderanger: and then later in your recipe node['roots']['oauth']%{application: node['roots']['oauth']['application']}
[2014-05-02 02:00:22 -0400] coderanger: or something similar to that
[2014-05-02 02:00:38 -0400] coderanger: That defers the interpolation until after all overrides are loaded
[2014-05-02 02:02:09 -0400] hailwood: Ah righto, hmm I think it might be better to just make the user copy/paste the application root 10 odd times heh.
[2014-05-02 02:02:47 -0400] coderanger: Heh, or that
[2014-05-02 02:11:35 -0400] mmzyk: Any one on at the moment using open source chef 11.0.8 and uses the webui?
[2014-05-02 02:12:27 -0400] digitalchild: let me check which one im using
[2014-05-02 02:12:45 -0400] digitalchild: where do i find version ?
[2014-05-02 02:12:46 -0400] coderanger: mmzyk: I hope not :)
[2014-05-02 02:13:05 -0400] mmzyk: well, I admit it isnt the best exerience in the world coderanger. :)
[2014-05-02 02:13:17 -0400] mmzyk: Im trying to figure if we introduced a bug in that version. I suspect we did.
[2014-05-02 02:13:58 -0400] mmzyk: Im firing it up locally to check, but thought Id see if anyone had it handy to validate.
[2014-05-02 02:14:05 -0400] digitalchild: 11.0.11
[2014-05-02 02:14:28 -0400] mmzyk: digitalchild thats will work. Its funcationally the same as 11.0.8 except for a security patch.
[2014-05-02 02:14:42 -0400] digitalchild: *nods*
[2014-05-02 02:14:47 -0400] digitalchild: do you need me to test something?
[2014-05-02 02:15:01 -0400] mmzyk: In the webui, just see if you can view and browse around a cookbook
[2014-05-02 02:15:18 -0400] digitalchild: i can
[2014-05-02 02:16:04 -0400] digitalchild: as in i click on a cookbook, can view attributes/files/yada
[2014-05-02 02:16:15 -0400] digitalchild: can see the rbs and view them
[2014-05-02 02:16:22 -0400] digitalchild: the js animation is a bit slow to reveal
[2014-05-02 02:16:32 -0400] mmzyk: okay, cool. Thats all I needed. If thats working its good.
[2014-05-02 02:16:41 -0400] digitalchild: yup all working
[2014-05-02 02:16:58 -0400] mmzyk: Sometimes we see it give a fat 404 and Im trying to figure out where that came from.
[2014-05-02 02:17:12 -0400] digitalchild: yeah im not getting 404s or anything like that
[2014-05-02 02:17:33 -0400] digitalchild: not even a js error!
[2014-05-02 02:19:07 -0400] mmzyk: Thats kind of amazing, actually, given how little love weve given the open source webui.
[2014-05-02 02:19:31 -0400] digitalchild: it functions
[2014-05-02 02:20:01 -0400] coderanger: digitalchild: You should really really disable it though, the lag time on security issues can be a problem
[2014-05-02 02:20:13 -0400] coderanger: also its deprecated and will be removed eventually :)
[2014-05-02 02:20:24 -0400] digitalchild: coderanger: the web ui?
[2014-05-02 02:20:33 -0400] coderanger: Yes
[2014-05-02 02:20:43 -0400] digitalchild: ok
[2014-05-02 02:20:51 -0400] digitalchild: well the only thing i use it for is to assign roles to nodes
[2014-05-02 02:21:03 -0400] digitalchild: cause of the drag and drop interface
[2014-05-02 02:21:12 -0400] digitalchild: + this is all internal behind several firewalls
[2014-05-02 02:21:20 -0400] mmzyk: Yeah, it is deprecated, although we really didnt make that announcement like we should have.
[2014-05-02 02:21:44 -0400] coderanger: mmzyk: Heh, I think after the firestorm btm just hoped people would ignore it
[2014-05-02 02:22:01 -0400] coderanger: (it was briefly removed in one of the chef 11 rcs, and people got unhappy)
[2014-05-02 02:22:03 -0400] mmzyk: We currently deciding what to do about it for Chef 12, but nothing has been decided yet.
[2014-05-02 02:22:34 -0400] mmzyk: coderanger Yeah, but we should still have stood behind that decision more.
[2014-05-02 02:23:03 -0400] digitalchild: right, how to i manage roles on nodes via knife ?
[2014-05-02 02:23:10 -0400] mmzyk: Anyway, the current incarnation is gong to go away, but we dont know what, if anything, is going to replace it in the open source.
[2014-05-02 02:23:18 -0400] coderanger: digitalchild: knife node edit or the knife node run_list commands
[2014-05-02 02:23:25 -0400] digitalchild: ok, ill rtfm
[2014-05-02 02:23:31 -0400] digitalchild: i prefer the cli
[2014-05-02 02:24:49 -0400] hailwood: Hey guys, another question, but it's a week bit much to explain here, so does someone mind looking at https://gist.github.com/hailwood/56e7a8f60ba12796b357
[2014-05-02 02:25:04 -0400] mmzyk: Yeah, we wouldnt have deprecated the webui if you couldnt do everything from the cli, digitalchild.
[2014-05-02 02:25:10 -0400] coderanger: digitalchild: If you do want a great web UI, enterprise chef's is muuuuch better :D
[2014-05-02 02:25:19 -0400] coderanger: (I say in my entirely unbiased opinions)
[2014-05-02 02:25:30 -0400] digitalchild: coderanger: oh of course :)
[2014-05-02 02:25:48 -0400] mmzyk: Very similar to hosteds, so you can also use the free hosted account for 5 nodes to check it out.
[2014-05-02 02:26:12 -0400] digitalchild: yeah boss just doesn't like having to shell out on a per node basis when we can run an internal one
[2014-05-02 02:26:33 -0400] digitalchild: services start to add up when everything is node based
[2014-05-02 02:26:51 -0400] mmzyk: Sure, we understand.
[2014-05-02 02:27:11 -0400] digitalchild: we dont have any windows servers for that exact reason
[2014-05-02 02:27:11 -0400] mmzyk: However, for 6 bucks a node you too could have hte glory that is reporting and analytics. :)
[2014-05-02 02:27:17 -0400] coderanger: hailwood: deploy[:whatever] || node[:whatever]
[2014-05-02 02:27:31 -0400] digitalchild: 2 things we currently don't use
[2014-05-02 02:27:51 -0400] mmzyk: and push jobs since we still havent open sourced that. Plan is to actually make that happen in the 12 release.
[2014-05-02 02:28:00 -0400] digitalchild: push jobs?
[2014-05-02 02:28:01 -0400] coderanger: digitalchild: Well you can't be using them since they are paid-only features, but super handy
[2014-05-02 02:28:17 -0400] digitalchild: coderanger: meant more we don't have a need for them yet
[2014-05-02 02:28:18 -0400] mmzyk: No worries digitalchild, Im just giving you a hard time. Continue using the open source.
[2014-05-02 02:28:37 -0400] hailwood: coderanger: is that going to work if it's multi level and the first level doesn't exist? e.g. if I try accessing deploy[:whatever][:whenever] but :whatever doesn't exist? or is it going to error? also, isn't that going to fail if deploy[:whatever] === false but node[:whatever] === true?
[2014-05-02 02:28:59 -0400] mmzyk: Yeah, so the enterprise version currently has an add on that allows push comands out to clients, instead of just the pull model, hence, push jobs.
[2014-05-02 02:29:08 -0400] coderanger: hailwood: No, you can do (deploy[:a] && deploy[:a][:b]) || node[:c]
[2014-05-02 02:29:15 -0400] mmzyk: Weve said were going to open source that (a long time ago) but have so far failed to do so.
[2014-05-02 02:29:53 -0400] digitalchild: mmzyk: for my personal infrastructure ill be using hosted
[2014-05-02 02:30:22 -0400] digitalchild: i currently have linode machines all over the place
[2014-05-02 02:30:29 -0400] mmzyk: Cool. I was serious about use whatever you would like though. :)
[2014-05-02 02:30:31 -0400] digitalchild: and im shuttering everything onto amazon
[2014-05-02 02:30:53 -0400] mmzyk: We do offer a days reporting free to everyone on hosted. Its a rolling 24 hour window.
[2014-05-02 02:30:54 -0400] digitalchild: turns out my 20 buck linode machines are over powered for most of the sites im running :)
[2014-05-02 02:32:13 -0400] digitalchild: im trying to use simple_iptables and it says include the recipe somewhere in your run list
[2014-05-02 02:32:27 -0400] digitalchild: so i have include_recipe "simple_iptables" at the top of my default.rb recipe
[2014-05-02 02:32:49 -0400] digitalchild: but im getting an error saying simple_iptables not found when i run chef client
[2014-05-02 02:33:03 -0400] digitalchild: its on the server, am i including it wrong?
[2014-05-02 02:33:04 -0400] jbz: digitalchild: wait, you have it in the default.rb of another cookbook?
[2014-05-02 02:33:16 -0400] digitalchild: yes, called firewall
[2014-05-02 02:33:32 -0400] jbz: Did you put simple_iptables in the depends statement in the metadata of firewall?
[2014-05-02 02:33:33 -0400] digitalchild: i assume it works like a dependency
[2014-05-02 02:33:41 -0400] digitalchild: negative, whoops
[2014-05-02 02:33:43 -0400] jbz: Yep
[2014-05-02 02:33:47 -0400] hailwood: coderanger: would it be a viable idea to take a temp copy of node, then merge deploy into that temp copy and reference that instead inside the loop?
[2014-05-02 02:33:59 -0400] jbz: you have to declare dependencies in the metadata or the chef server doesn't know to include the dep cookbook in your manifest
[2014-05-02 02:34:06 -0400] coderanger: hailwood: Sure, use #to_hash though
[2014-05-02 02:34:29 -0400] digitalchild: jbz: ok, thanks, do i also have to do recipe "simple_iptables" in meta data ?
[2014-05-02 02:34:38 -0400] jbz: No, that goes in the default.rb
[2014-05-02 02:34:42 -0400] digitalchild: ok thanks
[2014-05-02 02:34:48 -0400] jbz: er, wait, I mean the 'include' statement does
[2014-05-02 02:34:48 -0400] coderanger: hailwood: https://github.com/opscode/chef/blob/master/lib/chef/mixin/deep_merge.rb
[2014-05-02 02:34:51 -0400] digitalchild: yes
[2014-05-02 02:34:54 -0400] jbz: yep.
[2014-05-02 02:35:00 -0400] coderanger: hailwood: Those are the helpers for doing deep merges if you need them
[2014-05-02 02:35:19 -0400] hailwood: Oh I definitely will! thanks
[2014-05-02 02:36:19 -0400] digitalchild: and my firewall script just kicked me off that host, whoops
[2014-05-02 02:41:32 -0400] mmzyk: I mentioned this earlier in the day, but might as well mention it again. Were planning on shipping the open source server 11.1 next week.
[2014-05-02 02:41:52 -0400] mmzyk: (Im an engineer with Chef, if you dont know, currently heading up the 11.1 release).
[2014-05-02 02:42:13 -0400] mmzyk: We realize its been a long time coming and weve been remiss not to get it out sooner, but its finally coming out.
[2014-05-02 02:42:35 -0400] mmzyk: A detailed changelog is here: https://github.com/opscode/omnibus-chef-server/blob/master/CHANGELOG.md
[2014-05-02 02:42:38 -0400] digitalchild: sweet
[2014-05-02 02:42:47 -0400] digitalchild: eh, its open source, its ready when its ready
[2014-05-02 02:42:59 -0400] mmzyk: If youre brave you can use the omnitruck api to pull down the nightlies.
[2014-05-02 02:43:09 -0400] mmzyk: They are tagged 11.1.0 beta + timestamp.
[2014-05-02 02:43:29 -0400] mmzyk: We still have some bugs to work out around the new chef-server-ctl upgrade, so you might want to stay away from that. ;)
[2014-05-02 02:43:55 -0400] mmzyk: digitalchild We promised this release back in January, so Id understand if people wanted to give us a few lashings.
[2014-05-02 02:44:16 -0400] digitalchild: screw them, unless they contribute they can wait
[2014-05-02 02:44:24 -0400] mmzyk: We also included a less than adequate erlang depsolver in 11 that gave lots of people pain.
[2014-05-02 02:44:25 -0400] digitalchild: i used to help with postgres quite a lot back in the v7 days
[2014-05-02 02:44:28 -0400] mmzyk: 11.1 goes back to gecode.
[2014-05-02 02:44:38 -0400] digitalchild: and that was always the stance
[2014-05-02 02:44:43 -0400] digitalchild: 'its ready when its ready'
[2014-05-02 02:45:18 -0400] mmzyk: Well, Im not really for screwing over any of the community, but at Chef were in agreement this was too long, so were working on streamlining our process to get releases out earlier.
[2014-05-02 02:45:37 -0400] digitalchild: have you considered using devops :)
[2014-05-02 02:45:47 -0400] digitalchild: i hear that speeds things up!
[2014-05-02 02:46:18 -0400] mmzyk: Yeah, I might know a thing or two about that. I run a little something called triangledevops.com
[2014-05-02 02:46:37 -0400] mmzyk: shameless plug for my meetup.
[2014-05-02 02:46:42 -0400] digitalchild: im coming from old sysadmin world and wanting to move into automated stuff
[2014-05-02 02:46:56 -0400] digitalchild: i did it all via my own shell scripts
[2014-05-02 02:47:06 -0400] mmzyk: We do all right with the devops stuff at Chef, although were far from perfect. Its a continuous journey of improvement.
[2014-05-02 02:47:26 -0400] digitalchild: like anything in the tech world
[2014-05-02 02:47:31 -0400] digitalchild: blink twice and everything has changed
[2014-05-02 02:49:12 -0400] mmzyk: so it goes.
[2014-05-02 02:51:27 -0400] digitalchild: did you come across that post by peter welch?
[2014-05-02 02:51:31 -0400] digitalchild: programming sucks ?
[2014-05-02 02:51:56 -0400] jbz: digitalchild: this is why whenever I touch iptables rules I first set up an at job to turn them off in two minutes :-)
[2014-05-02 02:52:22 -0400] digitalchild: jbz: haha
[2014-05-02 02:52:25 -0400] digitalchild: what do you use?
[2014-05-02 02:52:40 -0400] jbz: For the failsafe job?  Depends
[2014-05-02 02:53:00 -0400] digitalchild: *nods*
[2014-05-02 02:53:08 -0400] jbz: this is a long standing habit though that started many years ago when I had to take a 25-min midnight drive to a colo because derp.
[2014-05-02 02:53:09 -0400] digitalchild: i might have to do the same thing while im testing this
[2014-05-02 02:53:18 -0400] jbz: (actually was more like an hour)
[2014-05-02 02:53:19 -0400] digitalchild: im trying to duplicate the out of the box centos-minimal rules
[2014-05-02 02:53:22 -0400] jbz: (but I was speeding)
[2014-05-02 02:53:24 -0400] jbz: ah
[2014-05-02 02:53:49 -0400] digitalchild: im working through replacing all my shell scripts that configures my machines
[2014-05-02 02:59:15 -0400] mjuszczak: Sometimes, I see things that look like this in roles/attributes files:  BLAH = %w(hi hello), and other times, I see something like:  default["blah"]["hoarf"]["ribbit"] = "hi" ... what's the thing with each?
[2014-05-02 03:00:32 -0400] mjuszczak: I understand that the first is a ruby array.  But I'm more wondering about the namespaces.
[2014-05-02 03:01:35 -0400] coderanger: mjuszczak: Node attributes are a big nested hash
[2014-05-02 03:12:05 -0400] a13x212: is it possible to force knife bootstrap to update the client version installed on a system?
[2014-05-02 03:22:49 -0400] mjuszczak: coderanger: versus variables?
[2014-05-02 03:22:59 -0400] mjuszczak: can I put anything other than node attributes inside attributes.rb?
[2014-05-02 03:23:10 -0400] mjuszczak: sorry, attributes/default.rb
[2014-05-02 03:24:52 -0400] mjuszczak: coderanger: like, is this valid?: http://pastebin.com/ctfBJUVG  ...
[2014-05-02 03:33:31 -0400] coderanger: mjuszczak: You can set variables but they will be lost when you hit the end of the file. You can technical set consts like that but pleeeeeease don't
[2014-05-02 03:34:06 -0400] coderanger: mjuszczak: And the default_attributes isn't valid there
[2014-05-02 03:34:13 -0400] coderanger: mjuszczak: Thats from roles/env files
[2014-05-02 03:35:33 -0400] mjuszczak: coderanger: OK.  So what's the best way to specify a list of, for example, users I want to pass into the users recipe?
[2014-05-02 03:42:39 -0400] coderanger: Use a node attribute?
[2014-05-02 04:17:56 -0400] jidar: what's the correct way for having two servers that have almost the same attributes in a recipe but differ by say, one or two attributes
[2014-05-02 04:21:39 -0400] coderanger: jidar: Don't use a recipe, make a resource
[2014-05-02 04:34:56 -0400] jidar: so you mean to wrap the resource in some sort of if statement, or am I misunderstanding this here
[2014-05-02 05:18:56 -0400] armendonigian: Getting an error when executing knife environment from file env/int.json. whats wrong with the following  "cookbook_versions": {
[2014-05-02 05:18:57 -0400] armendonigian:         "base": "2.0.0"
[2014-05-02 05:18:57 -0400] armendonigian:     },
[2014-05-02 05:22:45 -0400] armendonigian: i checked the cookbook version exists on server
[2014-05-02 05:48:54 -0400] digitalchild: what does %w{ } do?
[2014-05-02 05:53:14 -0400] coderanger: digitalchild: makes a list of strings
[2014-05-02 05:53:30 -0400] coderanger: digitalchild: %w{foo bar baz} == ['foo', 'bar', 'baz']
[2014-05-02 05:53:43 -0400] digitalchild: ok
[2014-05-02 05:54:28 -0400] digitalchild: just trying to work out why this recipe is referencing attribute files in a %w { }.each do on them
[2014-05-02 05:54:45 -0400] coderanger: digitalchild: Its just slightly faster to type
[2014-05-02 05:54:53 -0400] digitalchild: just short hand eh?
[2014-05-02 05:55:26 -0400] coderanger: Yep
[2014-05-02 05:56:21 -0400] digitalchild: arh, yes and they have defined the attributes for each of those strings in respective attr files
[2014-05-02 05:56:24 -0400] digitalchild: got it
[2014-05-02 06:03:29 -0400] digitalchild: are all files in the attributes dir loaded with a cookbook and can be called on?
[2014-05-02 06:04:32 -0400] coderanger: digitalchild: Yes, they are all loaded in alphabetical order
[2014-05-02 06:04:43 -0400] digitalchild: good to know
[2014-05-02 06:04:46 -0400] coderanger: Generally having more than one attr file in a cookbook is superfluous
[2014-05-02 06:05:12 -0400] digitalchild: that's what I thought..
[2014-05-02 06:05:31 -0400] digitalchild: i want to keep it as simple as possible and make everything as generic as possible
[2014-05-02 06:06:00 -0400] digitalchild: ive learned in OSS land you step off the accepted path and things start to break
[2014-05-02 06:11:21 -0400] programmerq: coderanger: I enjoyed the picture of you that fnichol showed in his kitchenci talk at chefconf (just watched it tonight)
[2014-05-02 06:11:53 -0400] coderanger: programmerq: Heh, thats my twitter icon
[2014-05-02 06:12:41 -0400] programmerq: what is your twitter handle? @coderanger on twitter looks different than the icon in his talk
[2014-05-02 06:12:58 -0400] coderanger: programmerq: @kantrn
[2014-05-02 06:13:24 -0400] coderanger: The guy that has @coderanger and I duel on each new social media site to see who cares enough to sign up first and get the name
[2014-05-02 06:13:37 -0400] programmerq: I've been in #chef long enough I should probably follow you on twitter. why not
[2014-05-02 06:13:40 -0400] coderanger: so I think I have it on facebook, he has it on twitter and tumblr, I might have it on app.net
[2014-05-02 06:13:47 -0400] digitalchild: same with my nick, the other dc does the same
[2014-05-02 06:13:56 -0400] programmerq: I've been using programmerq on the internet since like 1999
[2014-05-02 06:14:08 -0400] programmerq: and some korean guy grabbed it for twitter and facebook
[2014-05-02 06:14:10 -0400] digitalchild: i wanted the .com and emailed him from gmail and he was like, so you have the @gmail address
[2014-05-02 06:14:19 -0400] programmerq: so when I decided I cared about those things, I was SOL
[2014-05-02 06:14:37 -0400] programmerq: I'm programm3rq on twitter
[2014-05-02 06:15:15 -0400] coderanger: Dan has a little more claim on it than I at least
[2014-05-02 06:15:22 -0400] digitalchild: skype, twitter and .com are the only ones i missed out on
[2014-05-02 06:15:29 -0400] coderanger: I think he registered coderanger.com about 9 months before I got the .net and .org
[2014-05-02 06:15:44 -0400] digitalchild: only geeks would care about this, lol
[2014-05-02 06:15:50 -0400] digitalchild: gimme the .com damn it!
[2014-05-02 06:16:18 -0400] programmerq: I wouldn't mind changing what handle I use
[2014-05-02 06:16:32 -0400] coderanger: On the plus side, I have coderan.gr
[2014-05-02 06:16:39 -0400] programmerq: I'm far enough into my professional career with it that I have a good chunk of legit stuff associated with it
[2014-05-02 06:16:40 -0400] coderanger: so I think I might win on nerd points
[2014-05-02 06:16:45 -0400] programmerq: so that makes it a little harder to let it go
[2014-05-02 06:16:48 -0400] programmerq: whatever
[2014-05-02 06:17:19 -0400] coderanger: I've been using the name "coderanger" since I was ~12
[2014-05-02 06:17:19 -0400] programmerq: I think it started out as an AIM name for me to talk to my friends with in like junior high
[2014-05-02 06:17:21 -0400] programmerq: sheesh
[2014-05-02 06:17:34 -0400] coderanger: so its as "real" to me as my actual name at this point
[2014-05-02 06:17:39 -0400] programmerq: well, I feel a bit less silly having a gratuitous q
[2014-05-02 06:17:50 -0400] programmerq: coderanger sounds better than programmerq
[2014-05-02 06:17:59 -0400] digitalchild: it was my dj name, heh
[2014-05-02 06:18:07 -0400] programmerq: but I do have similar feelings about it
[2014-05-02 06:18:21 -0400] coderanger: Heh, it was originally my username on geocities
[2014-05-02 06:18:25 -0400] programmerq: depends on the circle I'm in. local hackerspace? I'll intro as programmerq and mention my name.
[2014-05-02 06:18:46 -0400] digitalchild: everyone shorts mine to dc
[2014-05-02 06:18:58 -0400] programmerq: starting as a consultant at a large company? probably going to hide it until it comes up that I have programmerq.net
[2014-05-02 06:19:01 -0400] digitalchild: cause calling a grown man digitalchild is kinda weird
[2014-05-02 06:19:30 -0400] programmerq: digitalchild: it'll be cool when you're like 67
[2014-05-02 06:19:41 -0400] digitalchild: heh
[2014-05-02 06:19:52 -0400] coderanger: I just kind of lucked out that I picked an alias that still sounds vaguely cool all these years later
[2014-05-02 06:19:53 -0400] digitalchild: i have digitalchild and lyken
[2014-05-02 06:19:57 -0400] programmerq: ::raspy old man voice:: "yes, I'm digitalchild. How can I... help you today?"
[2014-05-02 06:20:13 -0400] digitalchild: lyken was the OSS nick i used to use many ions ago
[2014-05-02 06:20:21 -0400] digitalchild: but been migrating everything over to dc
[2014-05-02 06:20:38 -0400] programmerq: my criteria was that it had to be somewhat unique on the internet, I wanted it to basically follow English spelling rules
[2014-05-02 06:20:45 -0400] programmerq: and I didn't want to lean on using a number
[2014-05-02 06:21:05 -0400] programmerq: I think before programmerq I was using "doom2er"
[2014-05-02 06:21:09 -0400] programmerq: that didn't last long
[2014-05-02 06:22:38 -0400] programmerq: coderanger: I don't remember, do you work for chef? you seem to have op status, so I'm going to guess yes.
[2014-05-02 06:22:58 -0400] coderanger: I used to, but do not currently
[2014-05-02 06:23:33 -0400] programmerq: ah, okay.
[2014-05-02 06:24:02 -0400] programmerq: working for chef would be fun. I'm not sure what they're looking for, and I'm not sure I'm looking though.
[2014-05-02 06:25:06 -0400] coderanger: programmerq: http://www.getchef.com/careers/
[2014-05-02 06:25:09 -0400] coderanger: or tl;dr everything
[2014-05-02 06:25:39 -0400] programmerq: "automation consulting engineer" is a title that I could get behind.
[2014-05-02 06:25:53 -0400] programmerq: I'm not down for frequent travel though
[2014-05-02 06:26:04 -0400] programmerq: not with small children
[2014-05-02 06:26:26 -0400] programmerq: something like that would be awesome when they aren't so small
[2014-05-02 10:30:03 -0400] ocholetras: hi all!
[2014-05-02 10:30:12 -0400] ocholetras: does chef-apply actually works with cookbook_file
[2014-05-02 10:30:14 -0400] ocholetras: resource
[2014-05-02 10:30:15 -0400] ocholetras: ?
[2014-05-02 11:39:35 -0400] aujt74: Hi folks, any reason a "being ... rescue Mixlib::ShellOut::ShellCommandFailed => e ..." wouldn't actually catch that error when it's thrown? It's being thrown by the gem_package resource in this case but also doesn't catch it with the execute resource either.
[2014-05-02 11:45:43 -0400] aujt74: I'm guessing it's an issue with compilation and that the resource isn't actually run from within the begin block...
[2014-05-02 11:47:24 -0400] _pingu: i use rspec. is there something to check if resource template x contains y?
[2014-05-02 11:47:54 -0400] aujt74: Rubber duck moment. Nevermind, appending .run_action(:install) causes it to run at converge time and thus catch the error...
[2014-05-02 13:59:32 -0400] Neozonz: running into an issue when attempting to bootstrap a machine
[2014-05-02 13:59:35 -0400] Neozonz: Chef encountered an error attempting to create the client "localhost.localdomain"
[2014-05-02 13:59:48 -0400] Neozonz: any insights would be appreciated
[2014-05-02 14:01:54 -0400] sam__: hi.   let's say that I assign a recipe to some nodes, via a role.      The role is "production" and the recipe is called "miscellaneous".       I have just tested this with the latest versions of chef, and now something odd is appearing.
[2014-05-02 14:02:28 -0400] sam__: in the run_list, it shows both "miscellaneous" and "miscellaneous::default""
[2014-05-02 14:02:39 -0400] sam__: for "knife node show"
[2014-05-02 14:03:33 -0400] sam__: why is this appearing twice.
[2014-05-02 14:03:42 -0400] sam__: yes, the default recipe for that cookbook should be applied.
[2014-05-02 14:03:51 -0400] sam__: which is miscellaneous::default
[2014-05-02 14:04:13 -0400] sam__: but isn't this implied, by recipe miscellaneous
[2014-05-02 14:10:31 -0400] Neozonz: how can i add my private key to the knife.rb config?
[2014-05-02 14:10:51 -0400] Neozonz: instead of having to type -i /location/private.key  on knife
[2014-05-02 14:40:31 -0400] anthonyacquanita: anyone have any good ways or links to develop recipes, databags and templates insteal of just running chef-client over and over?
[2014-05-02 14:42:22 -0400] Death_Syn: sweet, i've almost got my cookbooks ready to work with raspbian
[2014-05-02 14:42:41 -0400] Death_Syn: raspberry pi will be managed!
[2014-05-02 14:43:41 -0400] anthonyacquanita: chef_shell... forgot about that...
[2014-05-02 14:43:59 -0400] Death_Syn: chef-shell is quite handy
[2014-05-02 15:07:09 -0400] Guest49491: try this to manager your nodes....  find roles -iname "*.json" -exec knife role from file {} \;
[2014-05-02 15:07:20 -0400] Guest49491: and you can run this to manage your environments find environments -iname "*.json" -exec knife environment from file {} \;
[2014-05-02 15:07:40 -0400] gchristensen: Guest49491: you can also do knife role from file roles/*.json
[2014-05-02 15:08:43 -0400] Guest49491: Has anyone had problems with knife[:identity_file].. when I set it it works great
[2014-05-02 15:08:49 -0400] Guest49491: but when I try to override it it does not
[2014-05-02 15:08:53 -0400] Guest49491: so, if I run...
[2014-05-02 15:09:10 -0400] Guest49491: knife ssh  -i /etc/chef/secrets/id_bootstrap_chef_rsa -x bootstrap
[2014-05-02 15:09:22 -0400] Guest49491: I still picks up knife.rb over the commands
[2014-05-02 15:09:27 -0400] Guest49491: what is the precedence?
[2014-05-02 15:09:44 -0400] Guest49491: Is knife.rb override command lines?
[2014-05-02 15:10:12 -0400] brendan`: where is the best place to grab some vagrant boxes for chef development?
[2014-05-02 15:11:30 -0400] lewiz: if I pin the version of a cookbook in my environment is it possible to override that on a per-node basis?
[2014-05-02 15:17:40 -0400] wilbur2: tangential question but is there a a text editor optimized for chef? Im just using vim but open to some suggestions
[2014-05-02 15:18:50 -0400] brendan`: i wouldn't say there's a specific text editor optimized for chef, its more about an editor that has syntax, etc. plugins available that support chef
[2014-05-02 15:19:38 -0400] brendan`: im using macvim with some stuff for puppet because that's currently what i'm using at this company, but will be switching over to chef when i start my new job on the 12th.. i still plan on using macvim to start, but in a similar boat for plugins
[2014-05-02 15:19:45 -0400] brendan`: just haven't looked yet for what's available
[2014-05-02 15:19:55 -0400] brendan`: i'd imagine sublime text editor is a common one
[2014-05-02 15:21:25 -0400] thom: the ruby plugin is pretty much all you need for chef
[2014-05-02 15:21:30 -0400] thom: in terms of vim, anyway
[2014-05-02 15:21:34 -0400] brendan`: link?
[2014-05-02 15:21:37 -0400] brendan`: ahh
[2014-05-02 15:21:39 -0400] brendan`: true
[2014-05-02 15:21:51 -0400] Guest49491: just get a good text editor that supports ruby
[2014-05-02 15:21:55 -0400] Guest49491: Sublime is good..
[2014-05-02 15:21:57 -0400] brendan`: that makes sense when comparing the ruby dsl vs puppet's dsl
[2014-05-02 15:23:14 -0400] leifmadsen: sublime is good agreed. I still just use vim though.
[2014-05-02 15:23:55 -0400] jidar: configuring vim to get all the stuff looking good and working correctly is a pain
[2014-05-02 15:24:06 -0400] jidar: it might also depend on your terminal app, os settings, etc
[2014-05-02 15:24:29 -0400] jidar: it makes me angry that I can't unmap ctrlP from terminal.app so I can use it like I would use Sublime's cmdp
[2014-05-02 15:24:30 -0400] AskSteve: If you're going to use vim, go all in and set it as your cmdline editor in your shell too ;-)
[2014-05-02 15:44:58 -0400] sfiggins: lewiz: I don't believe there is a way to override the pin of a cookbook for a specific node.
[2014-05-02 15:45:23 -0400] lewiz: sfiggins: cool, thanks for confirming.  I w
[2014-05-02 15:45:39 -0400] lewiz: worked around it by cloning the environment and moving the node
[2014-05-02 15:45:43 -0400] sfiggins: lewiz: If you are looking to update a system at a time would be to create another environment that has the later pin.
[2014-05-02 15:45:52 -0400] sfiggins: lewiz: exactly
[2014-05-02 15:46:06 -0400] sfiggins: lewiz: I think etsy has a blog on this pattern.
[2014-05-02 15:46:52 -0400] sfiggins: lewiz: maybe covered in a presentation or two as well.
[2014-05-02 15:47:42 -0400] sfiggins: maybe here: http://www.slideshare.net/mcdonnps/lessons-from-etsy-avoiding-kitchen-nightmares-chefconf-2012
[2014-05-02 15:48:22 -0400] sfiggins: lewiz: maybe also useful - https://github.com/jonlives/knife-flip
[2014-05-02 15:49:16 -0400] lewiz: sfiggins: cheers, will check the slides out :-)
[2014-05-02 15:49:51 -0400] sfiggins: lewiz: newer slidedeck - http://www.slideshare.net/mrtazz/etsy-chefworkflow
[2014-05-02 15:50:12 -0400] sfiggins: newer, but not as good I think.
[2014-05-02 15:56:05 -0400] jonlives: sfiggins / lewiz video to  go with patrick's slides: https://www.youtube.com/watch?v=nSnJCJiZDDU
[2014-05-02 15:56:13 -0400] sfiggins: sweet
[2014-05-02 15:56:37 -0400] sfiggins: I was looking to see if there was anything good workflow related on video from chefconf 2014 yet.
[2014-05-02 16:28:54 -0400] viszeral: anyone familiar with configuring an internal berkshel-api server?
[2014-05-02 16:31:54 -0400] traviscline: not seeing immediately how the user resource determines if a user already exists -- i manually removed a user and it's not getting recreated
[2014-05-02 16:38:39 -0400] NukePuppy: traviscline whats your syntax looklike?
[2014-05-02 16:39:00 -0400] mrtazz: sfiggins: lewiz that slidedeck was also only for a 10 minute talk, this one has a bit more https://speakerdeck.com/mrtazz/feature-flagging-your-infrastructure-for-fun-and-profit too
[2014-05-02 16:39:51 -0400] coredump: is there a way to completely obliterate whatever kitchen/vagrant have saved? I am getting weird file corrupted errors and trying to access savestates that I already deleted
[2014-05-02 16:43:24 -0400] JJ_: Hi all. every time when I bootstrap a new node the chef_server_url  gets set to "http://127.0.0.1:8889" instead of my chef server. Can somebody tell me where is that value taken from so I can change it?
[2014-05-02 16:43:41 -0400] JJ_: the relevant part of my bootstrap script is:
[2014-05-02 16:43:43 -0400] JJ_: cat > /etc/chef/client.rb <<'EOP' <%= config_content %> EOP
[2014-05-02 16:47:05 -0400] NukePuppy: JJ your knife configs mayhaps?
[2014-05-02 16:47:09 -0400] NukePuppy: knife.rb
[2014-05-02 16:49:45 -0400] AskSteve: JJ looks like server is set in your .chef/knife.rb
[2014-05-02 16:49:55 -0400] JJ_: sure http://pastebin.com/upiEayg9
[2014-05-02 16:51:09 -0400] JJ_: thats the one in the $PWD/.chef directory where I am with doing knife bootstrap
[2014-05-02 16:54:02 -0400] NukePuppy: wondering if you have others being read
[2014-05-02 16:57:00 -0400] JJ_: http://pastebin.com/TgmXKXSv
[2014-05-02 16:57:18 -0400] JJ_: by the looks of that, there doesnt seem to be any other knife.rb in my system
[2014-05-02 17:16:07 -0400] NukePuppy: @JJ cant say can only thing if its an older node that had an old value in /etc/chef/ etc but on new nodes doesnt make a lot of sense atm
[2014-05-02 17:17:46 -0400] NukePuppy: hmm best place to store a p12 cert in chef land?
[2014-05-02 17:18:01 -0400] NukePuppy: opinions welcome (want it to be secure)
[2014-05-02 17:22:17 -0400] troyready: Export to ascii and distribute w/ chef-vault? :)
[2014-05-02 17:24:16 -0400] heathsnow_: or just a plain old encrypted data bag
[2014-05-02 17:24:30 -0400] mhenrixon: in da virtual house!
[2014-05-02 17:30:24 -0400] NukePuppy: heathsnow_ can encrypted data bags support a 'binary' ;p
[2014-05-02 17:32:02 -0400] gchristensen: binary sounds like not data to be put in a bag
[2014-05-02 17:32:31 -0400] heathsnow_: agreed
[2014-05-02 17:33:31 -0400] heathsnow_: maybe just add it to an artifact repo?  (spitballing here)
[2014-05-02 17:34:24 -0400] NukePuppy: yeah i dunno.. i mean this one in particular is passworded but..
[2014-05-02 17:34:31 -0400] NukePuppy: doesnt mean all p12s are created equal
[2014-05-02 17:34:51 -0400] NukePuppy: would just like a repeatable non adhoc kind of way
[2014-05-02 17:35:37 -0400] cap10morgan: I'm getting "Failed to register new client" when trying to do a knife ec2 server create w/ hosted chef. Anyone else seeing that? status page says they're up...
[2014-05-02 17:44:27 -0400] jtimberman: cap10morgan: have more details, debug output etc?
[2014-05-02 17:45:13 -0400] cap10morgan: jtimberman: https://gist.github.com/cap10morgan/4b278c9c4a809c9d741a
[2014-05-02 17:47:58 -0400] cap10morgan: jtimberman: and the /var/chef/cache/chef-stacktrace.out from the node: https://gist.github.com/cap10morgan/582a412cd35eca8f2ccf
[2014-05-02 17:48:24 -0400] jtimberman: cap10morgan: does it happen every time or just that run?
[2014-05-02 17:48:34 -0400] cap10morgan: we've tried twice now
[2014-05-02 17:48:58 -0400] cap10morgan: trying one more time
[2014-05-02 17:49:46 -0400] cap10morgan: and yes, it gave that error both times
[2014-05-02 17:50:29 -0400] jmickle: jtimberman: how are you
[2014-05-02 17:58:19 -0400] redondos: can I modify a resource from a provider? I'm trying to do new_resource.rule = 'foo' but getting: undefined method `rule=' for Chef::Resource::TestRule
[2014-05-02 17:59:47 -0400] kallistec: redondos: resources use "DSL style" setters, IOWs, new_resource.rule("foo") instead of the version w/ the equal sign
[2014-05-02 18:00:22 -0400] kallistec: it's kinda annoying, I need to make a sweep through everything to add the normal style setters
[2014-05-02 18:05:29 -0400] redondos: i see, thank you kallistec!
[2014-05-02 18:13:53 -0400] NukePuppy: chef-vault - real purpose of chef edit ? edit your local data bag that isn't live unencrypted?
[2014-05-02 18:13:58 -0400] NukePuppy: chef vault edit*
[2014-05-02 18:14:16 -0400] NukePuppy: its kinda iffy misleading
[2014-05-02 18:38:18 -0400] Guest11271: does anyone know how private-chef-server handles the number of nodes running for billing? we paid for 50 and we have 30+ nodes running but our account still shows 0
[2014-05-02 18:44:57 -0400] anthonyacquanita: I'm trying to pass a hash to a template but losing the variable scope??
[2014-05-02 18:45:13 -0400] anthonyacquanita: Chef::Log.info("IP-> #{ip_name}")
[2014-05-02 18:45:30 -0400] anthonyacquanita: that works inside the search block but not outside
[2014-05-02 18:48:45 -0400] martinisoft: _Stuart: Id probably file a support ticket about that if its Private Chef
[2014-05-02 18:50:35 -0400] anthonyacquanita: ip_name={}  above the search block and it works.....
[2014-05-02 19:09:05 -0400] anthonyacquanita: now it only uses the last value.. how to make a hash from a search in a recipe ????
[2014-05-02 19:09:51 -0400] mjuszczak: What's the best way, following berkshelf method guidelines, for orchestrating two services together?  IE: spin up a webserver and a database server and then, at the same time, tell the webserver the IP of the database server.  IE: service discovery and registration.  I assume a job for zookeeper/etcd/consul, but is chef search the best still?
[2014-05-02 19:13:45 -0400] sfiggins: mjuszczak: answer will probably depend on your size/needs.
[2014-05-02 19:14:03 -0400] mjuszczak: sfiggins: small and KISS
[2014-05-02 19:14:18 -0400] mjuszczak: couple hundred nodes in total, but probably only 3-4 that need this.
[2014-05-02 19:14:47 -0400] sfiggins: mjuszczak: I currently use search, and I just set up the db first, but my db servers provisioning isn't automated yet.
[2014-05-02 19:15:09 -0400] sfiggins: It's got a cookbook, but I don't have some single command that sets it all up.
[2014-05-02 19:15:37 -0400] sfiggins: I provision the server, assign it a role/cookbooks in a bootstrap.
[2014-05-02 19:15:53 -0400] sfiggins: If it's a database server, I often have to manually move a database onto it.
[2014-05-02 19:16:10 -0400] sfiggins: So orchestration is me-orchestration.
[2014-05-02 19:17:20 -0400] sfiggins: But I've done a few systems where my app can set up it's own database... then I just provision the database and other services my app needs first, then my database.
[2014-05-02 19:17:28 -0400] sfiggins: I mean, then my app server
[2014-05-02 19:17:41 -0400] sfiggins: which is all to say..... i don't really orchestrate much.
[2014-05-02 19:18:29 -0400] sfiggins: mjuszczak: I currently keep some configuration information, like pg_roles and passwords and such in data bags.
[2014-05-02 19:19:00 -0400] sfiggins: but I'm starting to experiment some with moving that to zookeeper.
[2014-05-02 19:21:25 -0400] sfiggins: I leverage data bags, roles, node attributes and the chef server as much as I can though to handle configs.
[2014-05-02 19:21:49 -0400] sfiggins: mjuszczak: clear as mud?
[2014-05-02 19:26:11 -0400] mjuszczak: sfiggins: YES
[2014-05-02 19:26:12 -0400] mjuszczak: thank you :)
[2014-05-02 19:44:16 -0400] dysinger: hola, peoples of devops land
[2014-05-02 19:47:38 -0400] dysinger: I got a chef dependency problem for you. Say I have my own cookbook and it depends on the community cookbook dependency graph X->Y->Z. I can pin X in my metadata or envirnoment or node. I have no control over Y getting put on chef server at a newer version by another knife/berks upload.  Y may not have a specific version of Z in mind.  Things then break sometimes with surprise.  This happens at bigger shops with tons of chef going on.
[2014-05-02 19:47:39 -0400] dysinger: What do you guys do to lock the dependency graph on chef server side?  I don't want supririses.
[2014-05-02 19:48:17 -0400] dysinger: surprises rather
[2014-05-02 19:52:46 -0400] CPS: how do i get a node's run list from inside a template?
[2014-05-02 19:52:56 -0400] CPS: i want to check if a role is included
[2014-05-02 20:00:14 -0400] dysinger: where do people ask non-trivial commercial chef questions these days?
[2014-05-02 20:05:57 -0400] aujt74: CPS: node['roles'] would give you roles applied to that node e.g. https://github.com/opscode-cookbooks/motd-tail/blob/master/templates/default/motd.tail.erb#L12
[2014-05-02 20:20:51 -0400] CPS: aujt74: thanks
[2014-05-02 20:27:14 -0400] urq_: exit
[2014-05-02 20:27:15 -0400] urq_: exit
[2014-05-02 20:34:38 -0400] sfiggins: dysinger: This isn't a bad place to ask, but friday afternoons may be a difficult time to get answers to tough questions.
[2014-05-02 20:35:56 -0400] sfiggins: dysinger: I was wondering about this today too.  How to better automate locking cookbooks in certain environments.
[2014-05-02 20:36:16 -0400] sfiggins: dysinger: I think this is one of the things knife-spork is meant to resolve.
[2014-05-02 20:36:47 -0400] sfiggins: dysinger: I haven't used it much though.  It used to have some problems working with a berkshelf way of doing things.
[2014-05-02 20:37:11 -0400] sfiggins: dysinger: I don't know how much better that is now.
[2014-05-02 20:37:30 -0400] galaux: Hello everyone
[2014-05-02 20:38:15 -0400] galaux: Anyone used to cookbook "user" http://fnichol.github.io/chef-user/ ?
[2014-05-02 20:38:47 -0400] sfiggins: We use it galaux.
[2014-05-02 20:39:19 -0400] galaux: Ok cause it seems it is not the official userS
[2014-05-02 20:39:21 -0400] galaux: so
[2014-05-02 20:39:34 -0400] galaux: I am trying to use it with chef-solo
[2014-05-02 20:39:45 -0400] galaux: I installed it ok with librarian
[2014-05-02 20:40:09 -0400] galaux: and created a data_bag here data_bags/users/hsolo.json
[2014-05-02 20:40:44 -0400] galaux: I put some user info (exactly what is on the page I cited)
[2014-05-02 20:41:21 -0400] galaux: sfiggins: what do I need to do to make chef-solo use this data_bag info?
[2014-05-02 20:41:31 -0400] galaux: I tried to declare a node['users'] = ['hsolo']
[2014-05-02 20:41:36 -0400] galaux: on a custom recipe
[2014-05-02 20:44:03 -0400] sfiggins: galaux I'm using it with chef server.
[2014-05-02 20:44:26 -0400] sfiggins: have you sucessfully used any other data bags with chef solo?
[2014-05-02 20:44:44 -0400] galaux: sfiggins: so in chef-server: do you create your own recipe or can you invoke it only through configuration?
[2014-05-02 20:45:02 -0400] galaux: yes I have
[2014-05-02 20:45:27 -0400] sfiggins: ok, cool.   just wanted to see if maybe it was a problem finding the bag... maybe something about the data_bag_path
[2014-05-02 20:46:16 -0400] galaux: Oh sorry well I have already used a databag in some other project
[2014-05-02 20:46:24 -0400] galaux: but not yet on this one
[2014-05-02 20:46:53 -0400] galaux: I am checking whether it looks to be well configured
[2014-05-02 20:48:08 -0400] galaux: sfiggins: it looks OK. It is setup in my .chef/knife.rb file
[2014-05-02 20:48:19 -0400] galaux: which should be sufficient if I understand correctly
[2014-05-02 20:48:25 -0400] combusean: what are the internals of knife ssh, if you run knife ssh on a wide range of machines, does it start all those connections at once from your own machine or is it filtered to the chef-server somehow?
[2014-05-02 20:48:41 -0400] combusean: or if there's a better way to run a command grok its output/return code, I'm all ears.
[2014-05-02 20:48:46 -0400] combusean: we're using salt right now and it sucks.
[2014-05-02 20:49:46 -0400] sfiggins: galaux: ah, didn't know it would use the knife.rb.  I thought that had to go in solo.rb.
[2014-05-02 20:50:28 -0400] sfiggins: I really should play with solo some more.
[2014-05-02 20:52:46 -0400] galaux: sfiggins: :) So do you know if I am suppose to create my own cookbook that should use this `user_account` or if I am suppose to do something else?
[2014-05-02 20:53:02 -0400] galaux: The documentation about this cookbook is not very clear about it
[2014-05-02 20:53:47 -0400] coderanger: combusean: It is run directly from your machine
[2014-05-02 20:53:54 -0400] mallu: hi, I have chef client 11.12.2 and I'm trying to enable ssl verification ... I've created trusted_certs directory and copied crt from our chef server .. knife ssl check -c /etc/chef/client.rb still showing error
[2014-05-02 20:54:02 -0400] coderanger: combusean: And yes, it just opens that many SSH conns via Net::SSH
[2014-05-02 20:54:23 -0400] combusean: coderanger, =(
[2014-05-02 20:54:35 -0400] mallu: it seems like it is not reading trusted_certs dir
[2014-05-02 20:54:43 -0400] mallu: any help would be appreciated
[2014-05-02 20:54:55 -0400] coderanger: combusean: knife ssh is a super simple tool, I wouldn't use it for anything major
[2014-05-02 20:55:42 -0400] coderanger: combusean: Chef Push Jobs is similar to Salt's orchestration tool, based around a custom agent and zmq, but currently only available to paid enterprise chef customers, supposed to be open sourced Soon
[2014-05-02 20:56:08 -0400] combusean: coderanger, that's not out of the question
[2014-05-02 20:56:10 -0400] coderanger: combusean: But you can just use salt's orchestration system with Chef, or use MCollective
[2014-05-02 20:56:21 -0400] combusean: we want to move to chef for configuration management
[2014-05-02 20:56:34 -0400] combusean: but $6/server/month is fucking expensive.
[2014-05-02 20:56:58 -0400] sfiggins: galaux: I'm testing something out.
[2014-05-02 20:57:23 -0400] sfiggins: galaux: but I would use this in your own cookbook, yes.
[2014-05-02 20:57:34 -0400] mallu: anyone?
[2014-05-02 20:57:43 -0400] galaux: sfiggins: ok
[2014-05-02 20:58:02 -0400] sfiggins: galaux: you would include it in your depends, and then just access the lwrp from within your own cookbook.
[2014-05-02 20:58:21 -0400] galaux: yup ok
[2014-05-02 20:58:50 -0400] galaux: unfortunately it does not find the infos about the user on the cookbook
[2014-05-02 20:59:18 -0400] galaux: it just creates it on /home event though I set it to use /opt on the users.json datbag
[2014-05-02 20:59:41 -0400] galaux: testing again
[2014-05-02 20:59:43 -0400] galaux: :)
[2014-05-02 20:59:51 -0400] combusean: mallu, don't know about the specific issue you're facing, but ssl stuff can fail when the permissions on files and directories are too loose, almost silently.  (openssh does, at least).  make sure you're stuff is 700/600 for dirs and files
[2014-05-02 21:00:01 -0400] combusean: your*
[2014-05-02 21:00:25 -0400] sfiggins: galaux: but it creates a user?
[2014-05-02 21:00:32 -0400] sfiggins: galaux: that's a start.
[2014-05-02 21:00:44 -0400] galaux: yes definitly!! :)
[2014-05-02 21:01:20 -0400] galaux: So I have a custom cookbook with recipe like "user_account 'hsolo' do action  [:create] end"
[2014-05-02 21:01:28 -0400] galaux: so it creates it
[2014-05-02 21:01:47 -0400] mallu: combusean: I have verified permissions... it looks good
[2014-05-02 21:01:48 -0400] sfiggins: galaux: yeah, that would be using the lwrp directly
[2014-05-02 21:02:41 -0400] galaux: sfiggins: yeah but it does not use the databag info
[2014-05-02 21:03:00 -0400] galaux: the data_bag info is data_bags/users/hsolo.json
[2014-05-02 21:03:07 -0400] sfiggins: galaux: but to use the databag thing, you wouldn't define the user in your recipe.
[2014-05-02 21:03:20 -0400] mallu: drw-------. 2 root root 4096 May  2 20:36 trusted_certs
[2014-05-02 21:03:54 -0400] combusean: mallu, that's wrong
[2014-05-02 21:03:57 -0400] galaux:  hum ok so if I understand it correctly I can make chef create all users contained in databags automatically right?
[2014-05-02 21:04:00 -0400] sfiggins: All you should need to do in your recipe is: include_recipe: user::data_bag
[2014-05-02 21:04:07 -0400] combusean: mallu, directories have to have execute permissions
[2014-05-02 21:04:13 -0400] combusean: chmod u+x trusted_certs
[2014-05-02 21:04:17 -0400] mallu: oops...
[2014-05-02 21:04:20 -0400] galaux: yep ok I did that but it does not work
[2014-05-02 21:04:36 -0400] galaux: sfiggins: so I guess it means it cannot find the data_bags or something
[2014-05-02 21:04:49 -0400] sfiggins: that would be my guess.
[2014-05-02 21:05:27 -0400] mallu: drwx------. 2 root root 4096 May  2 20:36 trusted_certs
[2014-05-02 21:05:30 -0400] mallu: still same
[2014-05-02 21:06:32 -0400] coderanger: mallu: Why are you restricting to root only?
[2014-05-02 21:06:37 -0400] coderanger: Nothing in there is sensitive data
[2014-05-02 21:06:40 -0400] coderanger: or at least shouldn't be
[2014-05-02 21:07:37 -0400] galaux: trying "knife solo cook blabla" with -V
[2014-05-02 21:07:51 -0400] mallu: coderanger: I should change it to 755?
[2014-05-02 21:07:58 -0400] coderanger: mallu: Probably
[2014-05-02 21:08:11 -0400] coderanger: mallu: I've not used the dir-based cert option though, I just use a compiled CA file
[2014-05-02 21:09:17 -0400] mallu: coderanger: still not good
[2014-05-02 21:12:50 -0400] coderanger: Compiling gecode on an m3.medium, lets see how long this takes
[2014-05-02 21:15:58 -0400] aujt74: coderanger: On that note, I was wondering... do you happen to know if the intention with bringing gecode back as the solver for chef-server is as a stopgap until the erlang solver is functionally equivalent? or is it a "permanent" move?
[2014-05-02 21:16:12 -0400] coderanger: aujt74: Permanent
[2014-05-02 21:16:49 -0400] coderanger: aujt74: Or at least as permanent as anything in software is, no one is working on a replacement solver in either chef-server or berks
[2014-05-02 21:16:56 -0400] coderanger: librarian still uses its own solver
[2014-05-02 21:17:09 -0400] aujt74: Ok, thanks!
[2014-05-02 21:17:27 -0400] aujt74: Ah yeah, I've had the pleasure of working with librarian's solver...
[2014-05-02 21:17:48 -0400] coderanger: Nuf said
[2014-05-02 21:17:55 -0400] coderanger: Writing solvers is Really Really Hard
[2014-05-02 21:18:00 -0400] coderanger: And we all have better things to do :)
[2014-05-02 21:18:10 -0400] aujt74: Ha, yes :)
[2014-05-02 21:18:29 -0400] coderanger: I still want to see berks have an optional greedy solver like bundler uses, but sethvargo is unconvinced :)
[2014-05-02 21:19:33 -0400] c_t: oh man
[2014-05-02 21:19:44 -0400] c_t: depsolvers suuuuuuuuuck to write
[2014-05-02 21:20:09 -0400] c_t: coderanger: how does librarian do it?
[2014-05-02 21:21:49 -0400] coderanger: https://github.com/applicationsonline/librarian/blob/master/lib/librarian/resolver/implementation.rb
[2014-05-02 21:21:55 -0400] coderanger: Relatively naive solver
[2014-05-02 21:22:49 -0400] c_t: the goiardi depsolver takes the approach of throwing its hands up at the first problem
[2014-05-02 21:23:03 -0400] c_t: rather than attempting to figure out all the problems
[2014-05-02 21:23:23 -0400] coderanger: Yeah, thats a greedy solver
[2014-05-02 21:23:41 -0400] c_t: which may not be the worst way to do it; someone was telling me the other day about seeing erchef get wedged trying to depsolve
[2014-05-02 21:23:50 -0400] coderanger: It has a much higher false failure rate
[2014-05-02 21:23:54 -0400] sfiggins: galaux: how are you setting the users attribute?  Are you setting that before including the data_bags recipe?
[2014-05-02 21:23:54 -0400] coderanger: but much much simpler code
[2014-05-02 21:23:55 -0400] c_t: (or that's what it seemed to do)
[2014-05-02 21:24:41 -0400] galaux: sfiggins: what do you mean by "setting the users att"?
[2014-05-02 21:24:47 -0400] galaux: I just put them in a databag
[2014-05-02 21:25:17 -0400] sfiggins: galaux: the data_bags recipe doesn't search your bag for items, it iterates through a list of users you provide it in node['users']
[2014-05-02 21:25:51 -0400] aujt74: c_t: Yup, cpu usage would blow up if it couldn't solve and the offending converge(s) would hang
[2014-05-02 21:25:52 -0400] sfiggins: galaux: so if you want it to pull hsolo from the data bag, node['users'] = ['hsolo']
[2014-05-02 21:26:07 -0400] galaux: yeah I tried that too trying again to check
[2014-05-02 21:26:20 -0400] sfiggins: if you have nothing set in node['users'] then the data_bag recipe doesn't do anything.
[2014-05-02 21:26:33 -0400] sfiggins: node.default['users'] = ['hsolo']
[2014-05-02 21:26:34 -0400] sfiggins: include_recipe "user::data_bag"
[2014-05-02 21:26:50 -0400] galaux: ok. and you put this on a custom recipe right?
[2014-05-02 21:27:11 -0400] sfiggins: yeah, in a cookbook that depends on fnichol's users cookbook.
[2014-05-02 21:27:48 -0400] sfiggins: I expect that's the piece you were missing.  I had totally forgotten about it.
[2014-05-02 21:28:37 -0400] sfiggins: galaux: which I should have, since one of my complaints is that that attribute is an array.
[2014-05-02 21:28:53 -0400] galaux: I'm having a look at how to set my cookbook to depend on an other cookbook
[2014-05-02 21:29:26 -0400] sfiggins: in metadata.rb you would add a depends line.
[2014-05-02 21:29:58 -0400] galaux: yeah ok I see
[2014-05-02 21:30:02 -0400] galaux: trying that
[2014-05-02 21:34:14 -0400] galaux: damn it still won't do anything
[2014-05-02 21:34:37 -0400] sfiggins: nuts.
[2014-05-02 21:34:40 -0400] galaux: :)
[2014-05-02 21:34:55 -0400] sfiggins: galaux: I did manage to get it to work with test-kitchen.
[2014-05-02 21:35:19 -0400] galaux: would you mind sharing the code?
[2014-05-02 21:36:29 -0400] sfiggins: galaux: I can.  Are you using the latest Chef-DK
[2014-05-02 21:36:41 -0400] galaux: "DK"?
[2014-05-02 21:37:06 -0400] galaux: devel kit?
[2014-05-02 21:37:11 -0400] sfiggins: http://www.getchef.com/downloads/chef-dk/mac/
[2014-05-02 21:37:18 -0400] sfiggins: well, maybe not mac
[2014-05-02 21:37:29 -0400] sfiggins: that was just the page it shuffled me off to.
[2014-05-02 21:37:38 -0400] sfiggins: http://www.getchef.com/downloads/chef-dk/
[2014-05-02 21:38:01 -0400] galaux: I'm using version 11.10.4
[2014-05-02 21:38:04 -0400] galaux: is that enough?
[2014-05-02 21:38:08 -0400] sfiggins: That and virtual box and vagrant are key to my cookbook development.
[2014-05-02 21:38:45 -0400] sfiggins: the dk includes test-kitchen, berkshelf, and the vagrant-berkshelf plugin.
[2014-05-02 21:42:32 -0400] galaux: This page is just going to download chef for Debian
[2014-05-02 21:42:49 -0400] galaux: What is in the DK that is not on the regular package?
[2014-05-02 21:43:32 -0400] galaux: huh OK so I have the DK
[2014-05-02 21:43:46 -0400] galaux: it is going to be a bit complicated to install it but anyway
[2014-05-02 21:44:00 -0400] galaux: so what should I do with it? :)
[2014-05-02 21:44:41 -0400] galaux: damn, it's taking ages to download :)
[2014-05-02 21:44:42 -0400] sfiggins: galaux: what platform do you develop on?
[2014-05-02 21:45:01 -0400] sfiggins: galaux: it's got embedded ruby and a bunch of other things.  It's pretty big.
[2014-05-02 21:45:14 -0400] sfiggins: gonna be 500+M to install.
[2014-05-02 21:45:16 -0400] galaux: You mean the host?
[2014-05-02 21:45:18 -0400] galaux: Arch Linux
[2014-05-02 21:45:27 -0400] sfiggins: cool.
[2014-05-02 21:45:32 -0400] galaux: gem install test-kitchen
[2014-05-02 21:45:37 -0400] galaux: ahaha :)
[2014-05-02 21:45:42 -0400] galaux: should be easier
[2014-05-02 21:45:44 -0400] sfiggins: do you rbenv?
[2014-05-02 21:46:06 -0400] sfiggins: Yeah, you could just gem install test-kitchen.
[2014-05-02 21:46:25 -0400] sfiggins: vagrant, berkshelf, etc.
[2014-05-02 21:46:50 -0400] sfiggins: How about I just send you a tarball of my test cookbook.
[2014-05-02 21:47:03 -0400] sfiggins: galaux: I'll let you figure it out from there.
[2014-05-02 21:47:04 -0400] galaux: yup! could be nice oot
[2014-05-02 21:47:10 -0400] galaux: yep definitly
[2014-05-02 21:49:48 -0400] sfiggins: galaux: it's pretty simple.
[2014-05-02 21:53:26 -0400] sfiggins: galaux: I recently started using the DK at work to solve problems where not all the people working on a cookbook have a full kit of tools or aren't at the same version etc.   It makes a handy work environment.
[2014-05-02 21:53:55 -0400] sfiggins: galaux: it is pretty big though.
[2014-05-02 21:59:30 -0400] galaux: sfiggins: thanks alot: I will have a deeper look tomorow as I am way too tired right now.
[2014-05-02 21:59:42 -0400] galaux: Again : thank you for your time
[2014-05-02 21:59:53 -0400] sfiggins: keep at it.
[2014-05-02 22:00:44 -0400] galaux: will do :)
[2014-05-02 22:01:40 -0400] combusean: sfiggins, you have a test cookbook with test kitchen examples?
[2014-05-02 22:03:43 -0400] sfiggins: combusean: I just did a short cookbook to see if I could make fletcher nichols users cookbook work with chef-solo.
[2014-05-02 22:03:50 -0400] combusean: ahh
[2014-05-02 22:04:05 -0400] combusean: that actually might help me still
[2014-05-02 22:04:10 -0400] combusean: my last cookbook foray was a nightmare
[2014-05-02 22:04:12 -0400] sfiggins: combusean: galaux was having trouble.
[2014-05-02 22:04:21 -0400] combusean: trying to converge a moving target over 2 months was unsuccessful
[2014-05-02 22:04:54 -0400] sfiggins: sounds horrible.
[2014-05-02 22:04:58 -0400] combusean: not drunk, but they had a strong beer drinking culture there.
[2014-05-02 22:08:09 -0400] sfiggins: combusean: got to run, but if you want to look at my stupid simple cookbook its at https://dl.dropboxusercontent.com/u/6904951/fnusertest.tgz
[2014-05-02 22:08:15 -0400] combusean: thanks sfiggins =)
[2014-05-02 22:08:57 -0400] sfiggins: i'm a berkshelf/vagrant/test-kitchen user.   So that's basically a berkshelf style cookbook.
[2014-05-02 22:20:56 -0400] mallu: can someone tell me how do you trust a self signed cert?
[2014-05-02 22:24:59 -0400] coderanger: mallu: ssl_ca_file pointed at your CA pem
[2014-05-02 22:27:01 -0400] mallu: @coderanger: can you please elaborate that a bit? I add ssl_ca_file= <location of server cert >?
[2014-05-02 22:27:12 -0400] mallu: in client.rb?
[2014-05-02 22:27:16 -0400] coderanger: Yep
[2014-05-02 22:27:44 -0400] coderanger: mallu: http://hastebin.com/ajacoguvev.hs thats my core client.rb
[2014-05-02 22:32:32 -0400] programmerq: mallu: yeah, the way you trust any certificate is you put the signing certificate in the ssl_ca_file
[2014-05-02 22:32:46 -0400] programmerq: since a self signed cert was signed by itself, you just throw that cert in to the ssl_ca_file
[2014-05-02 23:30:41 -0400] armendonigian: if a runlist exists in both the node file and environment, which gets evaluated and ran?
[2014-05-02 23:38:28 -0400] sauraus: what node[] contains the name of the environment in which a recipe is executed?
[2014-05-02 23:39:37 -0400] bxraabe: sauraus: node.chef_environment
[2014-05-02 23:39:44 -0400] sauraus: ah thanks :)
[2014-05-02 23:40:54 -0400] sauraus: nope it's empty string :(
[2014-05-02 23:40:58 -0400] sauraus: just tried it
[2014-05-02 23:42:11 -0400] armendonigian: so would the runlist of the environment be executed or that specified in the node file?
[2014-05-02 23:42:17 -0400] coderanger: armendonigian: envs don't contain run lists
[2014-05-02 23:42:23 -0400] coderanger: so not sure what you mean
[2014-05-02 23:42:32 -0400] armendonigian: oh, just override params?
[2014-05-02 23:42:45 -0400] doomviking: pinning
[2014-05-02 23:42:47 -0400] coderanger: envs contain default/override attrs, and cookbook version constraints
[2014-05-02 23:42:52 -0400] coderanger: and name/description
[2014-05-02 23:42:58 -0400] armendonigian: gotcha
[2014-05-02 23:43:12 -0400] sauraus: How do I do conditional processing in a cookbook based on the names of environments?
[2014-05-02 23:43:35 -0400] coderanger: sauraus: if node.chef_environment == 'foo'  end
[2014-05-02 23:44:00 -0400] sauraus: so not 'if node['chef_environment'] ?
[2014-05-02 23:44:06 -0400] coderanger: Correct, that isn't a thing
[2014-05-02 23:44:21 -0400] coderanger: chef_environment is a real function call, not a node attribute
[2014-05-02 23:44:33 -0400] sauraus: ah got it
[2014-05-02 23:47:44 -0400] sauraus: Does the java cookbook support installing JAVA on MAC OS?
[2014-05-02 23:48:01 -0400] coderanger: Check the readme
[2014-05-02 23:48:29 -0400] sauraus: RTFM eyh? :D
[2014-05-02 23:51:15 -0400] coderanger: It happens :)
[2014-05-02 23:55:26 -0400] stu_: Q: how to access a chef's node data in stand-alone ruby script?
[2014-05-02 23:56:11 -0400] coderanger: stu_: Use the ChefAPI gem
[2014-05-02 23:56:47 -0400] stu_: @coderanger: I'll look into it. Thnx.

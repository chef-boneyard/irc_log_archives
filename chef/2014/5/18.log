[2014-05-18 00:05:34 -0400] coderanger: tubbo: Yep
[2014-05-18 00:07:22 -0400] tubbo: coderanger: did you use the cookbook to do it? i'm having some serious problems
[2014-05-18 00:07:36 -0400] tubbo: like it's not being detected by berkshelf when i run chef-solo, but it does detect the chef-server cookbook i have installed
[2014-05-18 00:07:39 -0400] coderanger: Which cookbook, reset's or mine?
[2014-05-18 00:07:45 -0400] tubbo: i'm not sure..
[2014-05-18 00:07:50 -0400] tubbo: i figured the one that's on berkshelf_Api
[2014-05-18 00:07:53 -0400] tubbo: err
[2014-05-18 00:07:57 -0400] tubbo: github.com/berkshelf/berkshelf-api
[2014-05-18 00:08:01 -0400] coderanger: The one that comes with the app or the one from the community site
[2014-05-18 00:08:10 -0400] tubbo: the one that comes with the app
[2014-05-18 00:08:24 -0400] coderanger: Can't comment on that one, just mine :)
[2014-05-18 00:08:33 -0400] tubbo: well, that's the one i *wanted* to use but apparently i'm getting the one from the community site
[2014-05-18 00:08:44 -0400] tubbo: because i'm using :opscode as my site
[2014-05-18 00:09:10 -0400] tubbo: coderanger: did you make the community cookbook?
[2014-05-18 00:09:14 -0400] coderanger: Yes
[2014-05-18 00:09:42 -0400] tubbo: hmm, ok...well it seems to be working strangely for me haha
[2014-05-18 00:09:50 -0400] tubbo: just re-installed.. "berkshelf-api (1.0.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'"
[2014-05-18 00:10:33 -0400] tubbo: and it still gives me that error
[2014-05-18 00:10:36 -0400] coderanger: Yes, thats mine
[2014-05-18 00:10:39 -0400] tubbo: [2014-05-17T20:10:27-04:00] DEBUG: Chef::Exceptions::CookbookNotFound: Cookbook berkshelf-api not found. If you're loading berkshelf-api from another cookbook, make sure you configure the dependency in your metadata
[2014-05-18 00:10:41 -0400] coderanger: And works totally differently
[2014-05-18 00:12:03 -0400] tubbo: ok
[2014-05-18 00:12:22 -0400] coderanger: one sec
[2014-05-18 00:12:54 -0400] tubbo: coderanger: this is yours, right? https://github.com/poise/berkshelf-api
[2014-05-18 00:13:02 -0400] coderanger: Yep
[2014-05-18 00:13:11 -0400] coderanger: So how are you trying to deploy this?
[2014-05-18 00:13:36 -0400] coderanger: If you follow reset's direction using berksflow, you will deploy based on his cookbook
[2014-05-18 00:17:23 -0400] tubbo: ugh, berkflow requires berkshelf 3 beta
[2014-05-18 00:18:35 -0400] coderanger: tubbo: beta?
[2014-05-18 00:18:41 -0400] coderanger: It only depends on >3.0
[2014-05-18 00:19:16 -0400] tubbo: told me ~> 3.0.0.beta3
[2014-05-18 00:19:18 -0400] tubbo: err, beta7
[2014-05-18 00:19:40 -0400] coderanger: Yes, anything greater than that
[2014-05-18 00:19:55 -0400] coderanger: https://github.com/reset/berkflow/blob/master/berkflow.gemspec#L22
[2014-05-18 00:20:20 -0400] coderanger: Thats the actual dependency
[2014-05-18 00:53:04 -0400] logankoester: How do I set the current recipe in chef-shell?
[2014-05-18 01:50:11 -0400] luddite: Hi everyone :: Question :: Instead of a databag can I have the data retrieved from a mysql db table somewhere?
[2014-05-18 01:51:12 -0400] coderanger: luddite: surely
[2014-05-18 01:54:20 -0400] luddite: coderanger : any example? P.S :: Is this you https://coderanger.net/2014/02/data-bags/
[2014-05-18 01:58:21 -0400] coderanger: It is indeed
[2014-05-18 01:58:26 -0400] coderanger: Andj ust use the gem directly
[2014-05-18 01:58:34 -0400] coderanger: The mysql::gem recipe should install it for you
[2014-05-18 01:59:08 -0400] luddite: No kidding- i read that article about a minute before i posted my question
[2014-05-18 01:59:23 -0400] luddite: i thought "is this guy watching me?" hahah
[2014-05-18 02:00:22 -0400] luddite: i already have mysql loaded. I think its a job for another time but I see that I simply have to dump my data in a similar json format
[2014-05-18 02:00:27 -0400] luddite: then im good to go
[2014-05-18 02:02:46 -0400] coderanger: luddite: You can do that too, I meant you can just use the gem directly from recipe code and skip the data bags entirely
[2014-05-18 02:08:08 -0400] luddite: coderanger : that is completely possible. Ive got to migrate 73 websites into my chef setup that i just finished. Then move them to a new server that is managed completely by chef. I dont really want 73 databags.
[2014-05-18 05:53:29 -0400] brucelee_: coderanger: sup
[2014-05-18 05:56:53 -0400] coderanger: yo
[2014-05-18 06:05:48 -0400] brucelee_: coderanger: what are you up to
[2014-05-18 06:05:55 -0400] brucelee_: im about to nerd out
[2014-05-18 06:05:58 -0400] coderanger: pycon videos and hearthstone
[2014-05-18 06:08:27 -0400] brucelee_: haha nice
[2014-05-18 06:08:49 -0400] brucelee_: learning python actually...
[2014-05-18 06:09:02 -0400] brucelee_: simple stuff though
[2014-05-18 06:09:19 -0400] brucelee_: like writing fab files :p
[2014-05-18 06:09:35 -0400] brucelee_: coderanger: how bigs your fab file?
[2014-05-18 06:09:57 -0400] coderanger: Depends on the project, most are only 3 or 4 tasks for a web deploy
[2014-05-18 06:37:05 -0400] ellisera: ohai
[2014-05-18 06:38:59 -0400] ellisera: anyone know more about how package handling is done in chef for yum packages? Ive come accross an interesting issue
[2014-05-18 06:44:59 -0400] ellisera: I have a chef recipe that depends on a yum package install in a prior recipe. it always dies on the first run, but executes flawlessly on the second run on the same node
[2014-05-18 06:45:21 -0400] ellisera: Im trying to figure a way around this so I can get it to run on the first run
[2014-05-18 06:52:35 -0400] lxsameer: hey guys, how can i get my pem file from an other client to use chef-starter-kit ?
[2014-05-18 06:55:12 -0400] brucelee_: ellisera: isnt there a chef debug on why it failed?
[2014-05-18 07:00:49 -0400] ellisera: brucelee_: yes, there is, but its not very descriptive and it doesnt make sense
[2014-05-18 07:00:55 -0400] ellisera: the yum package gets pulled
[2014-05-18 07:01:05 -0400] ellisera: but its not being used on the first run
[2014-05-18 07:01:37 -0400] ellisera: it will however be used on the second run, and is available on the box after the first run
[2014-05-18 07:01:53 -0400] brucelee_: ellisera: did you try the more verbose option
[2014-05-18 07:02:55 -0400] ellisera: it is the more verbose option. it says that a resource that in turn is created by and uses that package isnt found
[2014-05-18 07:03:33 -0400] ellisera: once again though, it exists on the box after the first run, and will work just fine on a second run
[2014-05-18 07:05:34 -0400] coderanger: ellisera: Is the package in question coming from a custom yum repo?
[2014-05-18 07:05:48 -0400] coderanger: lxsameer: Not sure what you mean
[2014-05-18 07:05:56 -0400] coderanger: lxsameer: The starter kit download includes your key
[2014-05-18 07:06:42 -0400] lxsameer: coderanger: yeah it does but i made a git repo and push it into my new repo. but *pem files is in gitignore so the key did not push to repo
[2014-05-18 07:06:57 -0400] lxsameer: coderanger: now i'm in a different machine and want to work on my chef repo
[2014-05-18 07:07:05 -0400] lxsameer: coderanger: i don't have the pem key
[2014-05-18 07:07:29 -0400] coderanger: lxsameer: You either have to regenerate your key, or copy it over
[2014-05-18 07:07:36 -0400] ellisera: coderanger: yes, its from a custom yum repo
[2014-05-18 07:08:24 -0400] lxsameer: coderanger: ah thanks
[2014-05-18 07:08:24 -0400] ellisera: its actually the nokogiri gem set to embed in the chef ruby on install (trying to avoid high run times for when it compiles)
[2014-05-18 07:09:04 -0400] ellisera: I have a few other embedded gems that are being added that way that work just fine, but nokogiri itself is presenting an issue
[2014-05-18 07:09:15 -0400] coderanger: ellisera: How are you adding the custom yum repo
[2014-05-18 07:09:45 -0400] ellisera: the recipe will work fine with the other gems as yum rpms, and if I compile nokogiri as a gem, and it will work fine on a second run
[2014-05-18 07:09:57 -0400] coderanger: lxsameer: If you want to regenerate the key, you can do it via the opscode website, but then your original key will stop working
[2014-05-18 07:10:25 -0400] ellisera: coderanger: give me a sec, I need to track it down, I didnt write the repo addition recipe
[2014-05-18 07:10:25 -0400] lxsameer: coderanger: i see , thanks
[2014-05-18 07:14:05 -0400] ellisera: coderanger: all default repos are deleted and the new ones added into /etc/yum.repos.d/    in a prior recipe
[2014-05-18 07:14:28 -0400] coderanger: ellisera: Make sure you are using the yum_repository resource
[2014-05-18 07:14:32 -0400] coderanger: not doing it manually
[2014-05-18 07:14:47 -0400] coderanger: Chef caches the yum package set internally, and adding it manually won't flush the cache
[2014-05-18 07:16:14 -0400] ellisera: coderanger: thanks! I was trying to find documentation on how chef handles yum packaging in general :)
[2014-05-18 07:17:33 -0400] coderanger: I don't think thats super well documented
[2014-05-18 07:18:36 -0400] coderanger: ellisera: https://github.com/opscode/chef/blob/master/lib/chef/provider/package/yum.rb is the code fwiw
[2014-05-18 07:18:40 -0400] coderanger: but its a doozie
[2014-05-18 07:19:31 -0400] ellisera: coderanger: in the interim would the flush_cache attribute in the yum_package resource help?
[2014-05-18 07:20:11 -0400] coderanger: Yeah, set it to before: true
[2014-05-18 07:26:59 -0400] ellisera: coderanger: thank you very much, trying a new run on a fresh node now :)
[2014-05-18 07:45:04 -0400] ellisera: coderanger: nope, didnt seem to work, Im getting the same issue even with flush cache
[2014-05-18 07:49:31 -0400] ellisera: could it still be a yum cache issue? Or could it be something else?
[2014-05-18 08:10:56 -0400] ellisera: the error is actually:  Error executing action `create` on resource
[2014-05-18 08:11:33 -0400] ellisera: so Im wondering why Id be getting that error still
[2014-05-18 10:08:11 -0400] bobdobalina: hey all, jtimberman, are you about dude?
[2014-05-18 10:08:46 -0400] bobdobalina: or anyone familiar with adding in custom modules to nginx cookbook ?
[2014-05-18 10:09:21 -0400] bobdobalina: or even just anyone ? =p
[2014-05-18 13:01:14 -0400] bobdobalina_: for the love of god, is there anyone here with a good understanding of the nginx recipe ?
[2014-05-18 13:01:55 -0400] bobdobalina_: or can anyone point me to a more active chef channel ?
[2014-05-18 13:09:10 -0400] rdenis: http://www.getchef.com/support/
[2014-05-18 13:09:28 -0400] bobdobalina_: :)
[2014-05-18 13:09:30 -0400] bobdobalina_: thanks
[2014-05-18 13:10:11 -0400] bobdobalina_: have you used custom modules with nginx cookbook ?
[2014-05-18 13:10:24 -0400] rdenis: no
[2014-05-18 13:10:33 -0400] bobdobalina_: kk
[2014-05-18 13:10:48 -0400] bobdobalina_: do you have a lot of chef exp?
[2014-05-18 13:52:25 -0400] bobdobalina: i'm back
[2014-05-18 13:52:52 -0400] bobdobalina: still sending out an SOS for someone familiar with nginx cookbook
[2014-05-18 13:54:41 -0400] bobdobalina: common people, i'm soooo close to finishing my first proper wrapper
[2014-05-18 13:55:27 -0400] bobdobalina: it works perfectly on chef-solo but now running from knife ec2 server create some behavior is different
[2014-05-18 13:59:55 -0400] bobdobalina: i'm guessing there is another irc chef room where the party is really happening :)
[2014-05-18 14:24:15 -0400] bobdobalina: what time does this channel warm up ?
[2014-05-18 15:37:31 -0400] bobdobalina_: hey all, any admin on yet?
[2014-05-18 15:38:27 -0400] bobdobalina_: hey sarkis
[2014-05-18 15:39:53 -0400] bobdobalina_: hey yruss
[2014-05-18 15:39:56 -0400] bobdobalina_: hey anyone lol
[2014-05-18 15:48:17 -0400] mdavids: morning (or other timezone appropriate greeting)! had a quick question regarding the use of the windows_zipfile resource (or more generally any cookbook-provided resource) from inside of a ruby_block... the issue is that, due to the way I'm finding my target folder, the location of that folder is not known outside of the ruby_block... so in order to use windows_zipfile to extract the file I want, I have to use it (afaik) as something li
[2014-05-18 15:48:45 -0400] mdavids: zipfile = Chef::Resource::Windows_Zipfile
[2014-05-18 15:48:57 -0400] mdavids: but beyond that I don't know what to do
[2014-05-18 15:49:46 -0400] mdavids: or maybe    zipfile = Chef::Resource::Windows_Zipfile.new(node[:var], run_context
[2014-05-18 15:52:28 -0400] mdavids: zipfile.path = zipfilelocation.zip
[2014-05-18 15:53:03 -0400] mdavids: oop.... zipfile.path = zipfilecontentsdestination
[2014-05-18 15:53:19 -0400] mdavids: zipfile.source = zipfilesource.zip
[2014-05-18 15:53:30 -0400] mdavids: zipfile.run_action
[2014-05-18 17:16:42 -0400] jakshi: Hello people. Does anybody knows. How to add new cookbooks templates/recipes/attributes during chef run?
[2014-05-18 17:21:52 -0400] jakshi: Anybody?
[2014-05-18 17:25:26 -0400] ianblenke: jakshi: there are two phases, compile time where resources are defined, and evaluation time where resources are executed. You can define things at compile time (resources, attributes), though I've never tried to dynamically create templates/recipes programmatically at compile time. while theoretically possible, you would be doing something quiet a bit out of mainstream by doing so.
[2014-05-18 17:28:34 -0400] cloudnull: 80093621
[2014-05-18 17:30:51 -0400] jakshi: @ianblenke I think I need to download cookbooks from git during comile time and add their attributes and templates to chef run context. I want to do it so I can test OpsWorks cookbooks with test-kitchen. I know that it's not mainstream - but I need to have behaviour similar to OpsWorks to test OpsWorks cookbooks.
[2014-05-18 17:34:46 -0400] jakshi: @ianblenke Do you know how to get cookbooks and add their attributes/recipes/templates to chef run context during compile phase in practice?
[2014-05-18 17:39:37 -0400] ianblenke: Honestly, no. It would be a fun thing to explore, but I don't have any experience with that myself at the moment.
[2014-05-18 20:48:05 -0400] justizin: any idear why my chef-client recipe only seems to enable / start the daemon after a manual run, not after a knife bootstrap?
[2014-05-18 21:47:01 -0400] xeno: Interesting.  I'm following https://www.digitalocean.com/community/articles/how-to-install-a-chef-server-workstation-and-client-on-ubuntu-vps-instances, because it's recent, and I kept making "mistakes", so now I am stuck, and cannot get anything done?
[2014-05-18 21:47:22 -0400] xeno: How do I initialize or delete my ws users so I can go back and walk through this from the beginning?
[2014-05-18 21:48:03 -0400] coderanger: xeno: If you ssh to the chef server, do you see a file /etc/chef-server/admin.pem?
[2014-05-18 21:48:15 -0400] xeno: Yes.
[2014-05-18 21:48:29 -0400] coderanger: xeno: Okay, you can use that with knife and re-run knife user create
[2014-05-18 21:49:29 -0400] coderanger: This guide is really not great btw
[2014-05-18 21:49:36 -0400] coderanger: You should _not_ be using the open source webui
[2014-05-18 21:49:57 -0400] xeno: Well, I am accepting suggestions for better ones, but this is recent.  I am doing tutorials because I'm a novice.
[2014-05-18 21:49:58 -0400] coderanger: It is deprecated and will be removed in (probably) the next major version
[2014-05-18 21:50:14 -0400] coderanger: xeno: Learnchef.com is a good starting point
[2014-05-18 21:50:19 -0400] xeno: So, since that admin.pem is a private key, won't I be using the public key from the workstation?
[2014-05-18 21:50:45 -0400] xeno: Or did I do something wrong?
[2014-05-18 21:51:05 -0400] coderanger: xeno: No, clients authenticate with a private key, the public half of the key is kept in the chef database
[2014-05-18 21:51:36 -0400] xeno: Ok.  Thank you.
[2014-05-18 21:55:46 -0400] xeno: That is a different admin.pem than the one I recently generated via the tutorial.  Is this for a different matter, or is it all mixed up?
[2014-05-18 22:05:50 -0400] bobdobalina: party people in the house
[2014-05-18 22:07:34 -0400] bobdobalina: what time does this channel get more active ?
[2014-05-18 22:08:54 -0400] bobdobalina: Nathan you out there dawg?
[2014-05-18 22:40:27 -0400] xeno: I don't see how --key works in knife configure.  KEY is capitalized..
[2014-05-18 22:58:44 -0400] coderanger: xeno: You give it a path to a key file
[2014-05-18 22:59:19 -0400] xeno: So I copy the key file over from the server, and not a URL.
[2014-05-18 22:59:38 -0400] xeno: I'm sorry, that makes the most sense, but ...
[2014-05-18 23:00:22 -0400] xeno: I may start over anyway, as it appears the Debian release I was using is not supported from the Learnchef tutorial which is recommended.
[2014-05-18 23:18:55 -0400] coderanger: xeno: Supported for what?
[2014-05-18 23:19:38 -0400] xeno: The tutorial you directed me to says 12.04 is the latest supported Ubuntu for a WS, and does not mention Debian.
[2014-05-18 23:20:06 -0400] xeno: Given I had so much outstanding failure trying to get the server up on Debian, I'm trying to strictly follow directions.
[2014-05-18 23:21:25 -0400] coderanger: xeno: chef omnibus is supported on everything
[2014-05-18 23:21:29 -0400] xeno: So now on the debian I'm playing with while the Ubu1204 installs, I see there is a complete disconnect between my guess of how the keys work, and what the tutorial says.
[2014-05-18 23:21:41 -0400] coderanger: xeno: chefdk doesn't have windows builds up yet, but will soon
[2014-05-18 23:21:54 -0400] coderanger: Just use the debian build
[2014-05-18 23:21:58 -0400] xeno: Ok.
[2014-05-18 23:22:04 -0400] coderanger: debs are up for debian 6 and 7 AFAIK
[2014-05-18 23:22:20 -0400] xeno: That is reassuring, except it doesn't explain my failures.  Okay, well to more immediate matters...
[2014-05-18 23:23:36 -0400] xeno: It apears the odd tutorial in question secifies an admin key that I thought was just local, but It didn't say, or I didn't read, for it to also be copied to the server /etc/chef-server directory.
[2014-05-18 23:25:02 -0400] xeno: So, that leaves me with a question.  I got this admin.pem off the server GUI that generated it.  When I got that, was I supposed to put it in /etc/chef-server myself and replace the old one, while also copying it to be my admin.pem on the ws, or is the omission in the tutorial have other imputed meaning after all?
[2014-05-18 23:25:58 -0400] xeno: Not that it wouldn't make sense, but I'm in the habit of a tutorial being a robust sequence of steps that works and demonstrates function, not a shaggy path through a minefield that is designed to blow up in your face.
[2014-05-18 23:26:22 -0400] xeno: Sorry for being verbose.
[2014-05-18 23:32:00 -0400] coderanger: xeno: No, the /etc/chef-server/admin.pem is only used (normally) to create your first real user account
[2014-05-18 23:32:24 -0400] coderanger: You can, optionally, do that via the web UI instead, but as mentioned, you should be disabling the web ui as it is deprecated and a security risk
[2014-05-18 23:33:04 -0400] coderanger: You normally don't ever copy it anywhere, you just use it locally to create a user key for yourself
[2014-05-18 23:33:10 -0400] coderanger: and then you copy that to your workstation
[2014-05-18 23:33:34 -0400] xeno: Ok.  Thank you.  So, the knife assignment of the admin.pem to be the one I copied is then just an odd guess on the part of knife config.  It apears I can just change it in my knife.rb.
[2014-05-18 23:33:37 -0400] xeno: Is this true?
[2014-05-18 23:34:09 -0400] xeno: (sorry this laptop has a bad p)
[2014-05-18 23:34:27 -0400] coderanger: It isn't a guess, if you look in the knife.rb you'll see it has the path to the key file
[2014-05-18 23:35:12 -0400] xeno: Yes, and I can just change that, and the location of said file, right?...Maybe I'd better put together a pastie of my diagnostic message...
[2014-05-18 23:36:46 -0400] xeno2: http://pastebin.com/KsfhDGpR
[2014-05-18 23:37:22 -0400] xeno: Ugh crap.  I should always use pastie.  These other ones are trash.
[2014-05-18 23:38:18 -0400] xeno2: http://pastie.org/9188001
[2014-05-18 23:39:08 -0400] xeno: So you see the admonishment /home/xeno/wscopya.pem has associated with it.
[2014-05-18 23:39:27 -0400] coderanger: xeno: Yes, you can just open up the file and change the key path
[2014-05-18 23:40:08 -0400] xeno: Okay, thanks coderanger.  I'm sorry I need my ass wiped today, but I've had a lot of dead ends.  Please accept my apologies, especially with the -k thing.
[2014-05-18 23:40:26 -0400] coderanger: xeno: If you are just starting out with chef I highly recommend not running your own chef server to start with, hosted chef is great for learning
[2014-05-18 23:41:12 -0400] xeno: I promise to try that this week, but this step, it turns out, is necessary for all my other projects so I am in a kind of parallel.
[2014-05-18 23:41:30 -0400] xeno: Your advise is very helpful, however, and I will take panes to largely follow it.
[2014-05-18 23:41:53 -0400] coderanger: Okay, so what is your current state?
[2014-05-18 23:41:59 -0400] coderanger: did you blow away your chef server?
[2014-05-18 23:55:35 -0400] xeno: No, I have a lot of room for vms.  I'll keep that, and I'm making a second.  When I don't use 'em, I just keep 'em unbooted.
[2014-05-18 23:56:13 -0400] xeno: So meanwhile, I'll go back and try to fix my abortive adventures with that other tutorial.
[2014-05-18 23:59:02 -0400] xeno: virtualbox isn't bad as a dev tool, actually, despite some bugs.  I want to learn docker soon, but a complete vm seems more robust.

[2014-02-26 00:00:26 -0500] AntelopeSalad: coderanger: isn't it a bit better than cap when it comes to deploys? since you can just set the git repo to a remote server
[2014-02-26 00:00:37 -0500] AntelopeSalad: then the chef-run can just pull in the new version when it runs on its own
[2014-02-26 00:00:38 -0500] coderanger: kallistec: I don't think that was from backtracking, it was just that it was trying to check every gem for knife plugins and I had hundreds.
[2014-02-26 00:00:54 -0500] coderanger: AntelopeSalad: Yes, but the layout is still based on cap
[2014-02-26 00:01:16 -0500] AntelopeSalad: yeah i did have to do quite a bit of manual symlink bs to get it all working in a way that was semi-sane
[2014-02-26 00:01:35 -0500] kallistec: coderanger: but I recall there was also an issue with a specific gem installed that made chef load much slower
[2014-02-26 00:01:58 -0500] coderanger: kallistec: Hmm, I don't remember, sorry
[2014-02-26 00:02:07 -0500] coderanger: kallistec: There were issues with mime-types 2.0 I know
[2014-02-26 00:02:52 -0500] pushnell: coderanger: Well, for us anyway, the developer gets exactly what's in production, with basically all the roles applied to their vagrant VM so that everything runs locally.  The dev commits code to a dev git repo, which triggers a CI pull, and when CI passes it creates a commit to the CD repo which is only ever at master.
[2014-02-26 00:03:24 -0500] kallistec: coderanger: https://github.com/opscode/chef/pull/1186 yeah that
[2014-02-26 00:03:53 -0500] coderanger: kallistec: I didn't keep the gemfiles around from those tests, sorry
[2014-02-26 00:04:10 -0500] pushnell: coderanger: so the dev environment has "appserver" roles and "database server" roles and "queue" roles etc all applied to their single VM, and configured (per our "dev" environment attribute) to point to itself.
[2014-02-26 00:04:11 -0500] kallistec: coderanger: bummer, I have a new approach to test
[2014-02-26 00:04:37 -0500] coderanger: kallistec: I also switched ruby versions so that jettisoned most of the gems until I install rails again :-)
[2014-02-26 00:05:17 -0500] pushnell: I seem to be in the minority about not having a problem with roles, so I accept that I'm the oddball :)  I just haven't hit a situation myself yet where they caused a problem for me.
[2014-02-26 00:05:37 -0500] coderanger: pushnell: What happens when a dev wants to change some major piece of infra in a backwards-incompatible way
[2014-02-26 00:05:45 -0500] kallistec: coderanger: well, FWIW, https://gist.github.com/danielsdeleo/9220660
[2014-02-26 00:05:46 -0500] coderanger: pushnell: You have to move those changes through slowly and in lockstep
[2014-02-26 00:06:26 -0500] josephholsten: oh man oh man I wish chef-server omnibus shipped with postgresql 9.3
[2014-02-26 00:06:46 -0500] coderanger: kallistec: Heh, I do basically that already, I have a fast-knife/knife binary which is a binstub based on a tiny gemfile
[2014-02-26 00:08:18 -0500] brucelee_: redondos: itsnot
[2014-02-26 00:08:27 -0500] brucelee_: redondos: i have to do it by source and deal with tons of dependancies
[2014-02-26 00:08:27 -0500] redondos: brucelee_: that's why, then
[2014-02-26 00:08:40 -0500] josephholsten: though this is hilarious:
[2014-02-26 00:08:41 -0500] josephholsten: select name, major,minor,patch, dependencies from cookbook_version_dependencies where dependencies LIKE '%yum%';
[2014-02-26 00:08:57 -0500] brucelee_: redondos: how do i troubleshoot what went wrong>
[2014-02-26 00:09:35 -0500] redondos: brucelee_: it looks like this cookbook expects snort to be in the package database
[2014-02-26 00:10:04 -0500] frick: Anyone know if there's a way to have chef-client log only resources changed?
[2014-02-26 00:10:16 -0500] brucelee_: redondos: ah so it doesnt work? :/
[2014-02-26 00:10:25 -0500] redondos: you can run in debug mode: chef.log_level = :debug
[2014-02-26 00:10:29 -0500] redondos: chef.verbose_logging = true
[2014-02-26 00:10:41 -0500] frick: I mean _less_ logging.  :-)
[2014-02-26 00:10:58 -0500] dougi: what's the best practice for AWS EC2 instance chef-client hostnames? Should I leave it at "ip-10-1-2-3" or set it to the <Instance Id>?
[2014-02-26 00:11:11 -0500] frick: A coworker doesn't like how verbose the run is... he only wants to see what changed.  :-/
[2014-02-26 00:11:13 -0500] redondos: brucelee_: look at the Description: https://github.com/jtimberman/snort-cookbook
[2014-02-26 00:11:27 -0500] redondos: brucelee_: also look at the default recipe: https://github.com/jtimberman/snort-cookbook/blob/master/recipes/default.rb
[2014-02-26 00:12:22 -0500] brucelee_: redondos: yeah i looked at the default recipe and the descrption
[2014-02-26 00:13:04 -0500] redondos: for debian-like systems
[2014-02-26 00:13:14 -0500] redondos: "Installs and configures SNORT. On Debian/Ubuntu systems, the packages from apt are used. On RHEL and Fedora systems, the packages are retrieved directly from the SNORT project site."
[2014-02-26 00:14:54 -0500] geggam: knife ssh attempts to connect to user@host@host... what do i need to configure differently ?
[2014-02-26 00:14:59 -0500] brucelee_: redondos: yep, its downloaded from snort project site, but i dont see it doing that
[2014-02-26 00:15:06 -0500] brucelee_: redondos: its supposed to download it, and then install it right?
[2014-02-26 00:15:16 -0500] redondos: so you're on rhel
[2014-02-26 00:15:29 -0500] redondos: ls /var/cache/chef/
[2014-02-26 00:15:45 -0500] redondos: anything in there?
[2014-02-26 00:18:55 -0500] pushnell: coderanger: We're on AWS were servers can come & go.  So if something major needs to change then we create a different role and spin up new servers with the new role and decommission the old servers.  When the last of the old servers goes, so does the old role.  I could see how that would be a pain with physical boxes.
[2014-02-26 00:18:59 -0500] pushnell: where*
[2014-02-26 00:19:33 -0500] coderanger: pushnell: Any having to make new stuff is effectively terrible versioning :)
[2014-02-26 00:22:52 -0500] pushnell: Agreed with physical boxes.  With virtual ones it really hasn't been an issue for us.
[2014-02-26 00:24:39 -0500] FireBeyond: If I have some custom commands that need to be run once on server spinup, what's the best location/mode for them?
[2014-02-26 00:25:47 -0500] coderanger: pushnell: Its about semantic cleanliness, you aren't using roles as actual roles, you are using them as simple bundles of runlists
[2014-02-26 00:26:02 -0500] coderanger: pushnell: When you start thinking about the nouns and verbs of your infra, it gets harder :)
[2014-02-26 00:26:10 -0500] pushnell: coderanger: right, but that's all they are :)  a combination runlist and attribute set :)
[2014-02-26 00:26:59 -0500] coderanger: pushnell: No, they are more, roles in the abstract are nouns, abstractions built on other nouns
[2014-02-26 00:27:00 -0500] pushnell: in a massive environment, I could see how it'd be cognitively advantageous to assign semantic meaning to the application of a role.
[2014-02-26 00:27:35 -0500] dougi: sorry to ask again, but what's the best practice for AWS EC2 instance chef-client hostnames? Should I leave it at "ip-10-1-2-3" or set it to the <Instance Id>? since the instance's Private IP can change, wouldn't that break the chef-client?
[2014-02-26 00:27:58 -0500] coderanger: dougi: the private IP can't change
[2014-02-26 00:28:20 -0500] geggam: if you reboot the machine coderanger  ?
[2014-02-26 00:28:51 -0500] coderanger: geggam: Don't think it changes on reboot, just on stop/start, which is getting a new VM instance and they just lie to you
[2014-02-26 00:29:10 -0500] geggam: i rebooted a chef server... it changed everything
[2014-02-26 00:29:17 -0500] brucelee_: redondos: hye
[2014-02-26 00:29:20 -0500] brucelee_: redondos: sorry i was afk
[2014-02-26 00:29:23 -0500] geggam: that made me learn some things coderanger  :)
[2014-02-26 00:29:27 -0500] coderanger: geggam: instance-store or EBS?
[2014-02-26 00:29:33 -0500] brucelee_: redondos: let me check /var/cache/chef
[2014-02-26 00:29:38 -0500] geggam: not sure coderanger  ?
[2014-02-26 00:29:52 -0500] brucelee_: redondos: i dont even have a var/cache/chef
[2014-02-26 00:29:53 -0500] dougi: @coderanger, see this AWS answer: https://forums.aws.amazon.com/thread.jspa?messageID=207526
[2014-02-26 00:29:56 -0500] frick: So the most minimal, yet still helpful, output I can find was: chef-client -F min
[2014-02-26 00:30:02 -0500] frick: In case anyone else cared.  :-)
[2014-02-26 00:30:16 -0500] dougi: We have a "private" VPC in AWS
[2014-02-26 00:30:17 -0500] coderanger: dougi: TIL
[2014-02-26 00:30:50 -0500] coderanger: dougi: We just lock the node name at provisioning
[2014-02-26 00:31:15 -0500] coderanger: dougi: https://github.com/balanced/balanced-infra/blob/master/packer/client-bootstrap.sh#L37
[2014-02-26 00:33:01 -0500] dougi: ok, cool
[2014-02-26 00:34:12 -0500] brucelee_: coderanger: hey i have a blank cookbook with include_recipe "snort"
[2014-02-26 00:34:20 -0500] brucelee_: with this cook book here: https://github.com/jtimberman/snort-cookbook/blob/master/recipes/default.rb
[2014-02-26 00:34:22 -0500] redondos: brucelee_: paste the output of your run
[2014-02-26 00:34:26 -0500] brucelee_: redondos: ok
[2014-02-26 00:34:47 -0500] brucelee_: going to destroy and re-run vagrant
[2014-02-26 00:38:54 -0500] brucele_: stuck here so far: http://hastebin.com/kakukugude.vhdl
[2014-02-26 00:39:10 -0500] brucele_: seems like my vagrant vm has no internet connectivity or something
[2014-02-26 00:39:45 -0500] redondos: `vagrant reload'
[2014-02-26 00:39:56 -0500] brucele_: yeah i basically did a vagrant up
[2014-02-26 00:40:04 -0500] brucele_: let me try to reload it
[2014-02-26 00:41:07 -0500] rayrod2030: hai
[2014-02-26 00:42:21 -0500] rayrod2030: I'm trying to test a lwrp via a test cookbook in test-kitchen.  I'm using the same wait_until_ready helper code that's used in the jenkins cookbook.  I call that wait_until_ready block in my test cookbook recipe so that my lwrp isn't called until my service is ready.
[2014-02-26 00:42:39 -0500] rayrod2030: only issue is that the wait_until_ready block is being evaluated at compile time instead of converge.
[2014-02-26 00:43:07 -0500] brucele_: redondos: stuck at the same place
[2014-02-26 00:43:26 -0500] redondos: this is certainly a different issue
[2014-02-26 00:43:35 -0500] redondos: maybe stop your other virtualbox vms?
[2014-02-26 00:43:36 -0500] brucele_: http://hastebin.com/hakedelaxi.vhdl
[2014-02-26 00:43:43 -0500] brucele_: i dont have any other ones running...
[2014-02-26 00:43:44 -0500] brucele_: i dont think
[2014-02-26 00:43:45 -0500] brucele_: let me check
[2014-02-26 00:43:47 -0500] redondos: check
[2014-02-26 00:43:55 -0500] brucele_: nope youre right
[2014-02-26 00:43:57 -0500] brucele_: i do :)
[2014-02-26 00:44:35 -0500] brucele_: had another vagrant vm running for another cookbook im testing
[2014-02-26 00:44:48 -0500] brucele_: vagrant reloading...
[2014-02-26 00:47:42 -0500] brucele_: redondos: hmm
[2014-02-26 00:47:44 -0500] brucele_: redondos: same thing still
[2014-02-26 00:48:04 -0500] brucele_: im going to try to destroy it and recreate
[2014-02-26 00:48:07 -0500] redondos: destroy / up
[2014-02-26 00:48:08 -0500] brucele_: with only 1 machine running now
[2014-02-26 00:48:09 -0500] brucele_: ij
[2014-02-26 00:48:10 -0500] brucele_: ok*
[2014-02-26 00:48:41 -0500] brucele_: re-upping
[2014-02-26 00:52:28 -0500] brucele_: stuck
[2014-02-26 00:52:29 -0500] brucele_: same place
[2014-02-26 00:52:31 -0500] brucele_: :/
[2014-02-26 00:52:43 -0500] redondos: vagrant ssh
[2014-02-26 00:52:46 -0500] redondos: see what's up with the network
[2014-02-26 00:53:01 -0500] redondos: you may need to reload virtualbox on your macbook
[2014-02-26 00:53:04 -0500] brucele_: http://hastebin.com/focuxaqofu.vhdl
[2014-02-26 00:53:12 -0500] brucele_: ok
[2014-02-26 00:53:39 -0500] brucele_: when i vagrant ssh in
[2014-02-26 00:53:41 -0500] brucele_: im able to ping google.com
[2014-02-26 00:53:44 -0500] brucele_: thats really weird
[2014-02-26 00:53:48 -0500] brucele_: doesnt seem like anything is wrong with the networking
[2014-02-26 00:54:16 -0500] brucele_: i guess ill try to connect to a different internet source
[2014-02-26 00:54:35 -0500] brucele_: right now im connected to a network thats 10.x.x.x and virtualbox by default sets me up with that network
[2014-02-26 00:54:37 -0500] brucele_: not sure how i can change that
[2014-02-26 00:54:39 -0500] brucele_: its so annoying
[2014-02-26 00:54:44 -0500] brucele_: the GUI doesnt offer any configurations to change it
[2014-02-26 00:55:31 -0500] redondos: sudo /Library/StartupItems/VirtualBox/VirtualBox restart
[2014-02-26 00:57:06 -0500] brucelee_: let me try that
[2014-02-26 00:58:48 -0500] brucele__: i dont even have that file
[2014-02-26 00:58:57 -0500] brucele__: /Library/StartupItems/VirtualBox/ doesnt exist
[2014-02-26 00:58:59 -0500] brucele__: let me see how to restart it
[2014-02-26 01:03:04 -0500] brucelee_: redondos: bare with me :)
[2014-02-26 01:04:11 -0500] redondos: can you wget that file from the server?
[2014-02-26 01:04:35 -0500] brucelee_: im not even sure what its trying to wget
[2014-02-26 01:04:37 -0500] brucelee_: the output looks all weird
[2014-02-26 01:04:52 -0500] brucelee_: i presume its trying to wget the file above it
[2014-02-26 01:05:00 -0500] brucelee_: ill try it
[2014-02-26 01:05:03 -0500] redondos: https://opscode-omnibus-packages.s3.amazonaws.com/el/6/i686/chef-11.10.4-1.el6.i686.rpm
[2014-02-26 01:05:30 -0500] brucelee_: i can wget that one
[2014-02-26 01:05:31 -0500] brucelee_: no prob
[2014-02-26 01:05:58 -0500] brucelee_: its able to successfuly wget a few filse before it gets stuck at that chef-11.10.4-1 one
[2014-02-26 01:06:04 -0500] brucelee_: maybe its just really slow
[2014-02-26 01:06:07 -0500] brucelee_: i wgetting now
[2014-02-26 01:06:10 -0500] brucelee_: and eta is like 3mins or so
[2014-02-26 01:06:13 -0500] brucelee_: i guess ill just sit tight
[2014-02-26 01:06:26 -0500] brucelee_: brb in a min, restroom
[2014-02-26 01:07:23 -0500] redondos: yeah you can just install that rpm and run vagrant provision
[2014-02-26 01:08:45 -0500] brucelee_: ok interesting...
[2014-02-26 01:09:09 -0500] brucele__: http://hastebin.com/mivotudaba.vbs
[2014-02-26 01:09:16 -0500] brucele__: it completed but there are errors
[2014-02-26 01:10:07 -0500] brucele__: OK
[2014-02-26 01:10:12 -0500] Guest81188: has any body ever used private-chef-ctl ?
[2014-02-26 01:10:18 -0500] brucele__: i thinki foundt he error, the vagrantfile was loading the wrong default.rb from the wrong recipe
[2014-02-26 01:10:27 -0500] brucele__: it had recipe[default::testapp]
[2014-02-26 01:10:55 -0500] brucele__: or recipe[testapp::default], i copied the default.rb from that recipe but forgot to modify that line
[2014-02-26 01:11:22 -0500] redondos: there you go.
[2014-02-26 01:11:30 -0500] brucele__: redondos: but still i dont think snort is installing though
[2014-02-26 01:11:33 -0500] redondos: it should match whatever's in metadata.rb
[2014-02-26 01:11:36 -0500] brucele__: i dont see any output from chef run that mentions snort being installed
[2014-02-26 01:11:47 -0500] redondos: what's the output?
[2014-02-26 01:11:51 -0500] redondos: i'm about to leave the office
[2014-02-26 01:11:53 -0500] brucele__: let me paste
[2014-02-26 01:11:56 -0500] brucele__: just about to do a fresh vagrant up
[2014-02-26 01:12:04 -0500] brucele__: :D
[2014-02-26 01:12:09 -0500] brucele__: just bare with me for just a few more mins
[2014-02-26 01:13:35 -0500] brucele__: loading that super long wget ...
[2014-02-26 01:16:45 -0500] brucelee_: ok
[2014-02-26 01:16:45 -0500] brucelee_: it works
[2014-02-26 01:16:47 -0500] brucelee_: it works :)
[2014-02-26 01:16:48 -0500] brucelee_: from what i can tell
[2014-02-26 01:16:54 -0500] coalbe: brucele__: theres a ruby gem to test your chef cookbooks for errors like that, it's called foodcritic. I find it pretty useful.
[2014-02-26 01:16:54 -0500] brucelee_: redondos: thanks a lot!!!
[2014-02-26 01:17:44 -0500] Guest81188: knife cookbook test <cookbook name>  is also quite nice
[2014-02-26 01:18:40 -0500] brucele__: redondos: http://hastebin.com/toduveboru.avrasm
[2014-02-26 01:18:50 -0500] brucele__: Guest81188: ill have to check that out
[2014-02-26 01:19:06 -0500] brucele__: coalbe: i thought foodcritic is just lint
[2014-02-26 01:19:14 -0500] brucele__: coalbe: OHhhh you mean when creating one
[2014-02-26 01:19:20 -0500] brucele__: coalbe: yah i need to use it :P
[2014-02-26 01:19:58 -0500] coalbe: between the two of those, you'll find it quick to test than to provision and wait to fail.
[2014-02-26 01:20:05 -0500] redondos: looks good
[2014-02-26 01:21:04 -0500] redondos: you fixed it yourself, i just guided you a bit. i know in the beginning it's hard to find what's failing
[2014-02-26 01:21:06 -0500] redondos: happy cooking
[2014-02-26 01:21:33 -0500] baloo: yuck, didn't notice I had that horrible nick
[2014-02-26 01:57:25 -0500] thun: How do you sleep in a recipe?
[2014-02-26 02:01:19 -0500] douglaswth: thun: Kernel.sleep at the top level if you want it during compile time, in a ruby block's code block if you want it during converge, but why do you want to sleep? how you do it depends on that
[2014-02-26 02:10:52 -0500] pavlov_: greetings
[2014-02-26 02:11:24 -0500] pavlov_: I am trying to use a customized virtualbox base VM with test kitchen.
[2014-02-26 02:12:04 -0500] pavlov_: I have been unable to configure it so that kitchen and/or vagrant finds my base VM box file
[2014-02-26 02:12:17 -0500] mattupstate: pavlov_: #kitchenci
[2014-02-26 02:12:39 -0500] pavlov_: I tried to configure things as I saw in a number of examples online ... but kitchen keeps kicking it out saying my .kitchen.yml file is not valid YML
[2014-02-26 02:13:20 -0500] pavlov_: Anyone ever get a custom base VM to work with kitchen/vagrant/chef?
[2014-02-26 02:24:15 -0500] pavlov_: ping
[2014-02-26 02:24:49 -0500] pavlov_: Has anyone ever managed to get a custom base VM to work with kitchen/vagrant/chef?
[2014-02-26 02:25:07 -0500] j^2: pavlov_: every day
[2014-02-26 02:25:13 -0500] j^2: built in my jenkinsci env
[2014-02-26 02:35:37 -0500] pavlov_: j^2 ... ok ... I've tried to do that ... but can't get it to work
[2014-02-26 02:35:53 -0500] pavlov_: I am trying to use a customized virtualbox base VM with test kitchen.
[2014-02-26 02:36:04 -0500] j^2: do you package up your boxes too?
[2014-02-26 02:36:20 -0500] pavlov_: I did ... I had vagrant package it for me into  a .box file
[2014-02-26 02:36:20 -0500] j^2: whats the error?
[2014-02-26 02:36:49 -0500] pavlov_: the problem is that I can't find where to configure the system to make use of my new .box file
[2014-02-26 02:37:13 -0500] pavlov_: I tried putting it into the .kitchen.yml file as I saw a few example online that did so ...
[2014-02-26 02:37:14 -0500] j^2: there's vagrant file, or you can edit your kitchen.yml also
[2014-02-26 02:37:29 -0500] pavlov_: kitchen kicked it out saying it wasn't valid YML
[2014-02-26 02:37:42 -0500] j^2: what's the box name? package.box?
[2014-02-26 02:38:03 -0500] pavlov_: let's say the file is named MyVM.box
[2014-02-26 02:38:33 -0500] j^2: paste your yml in here
[2014-02-26 02:38:36 -0500] j^2: http://yamllint.com/
[2014-02-26 02:38:38 -0500] j^2: see if it's valid
[2014-02-26 02:38:53 -0500] pavlov_: and let's say it is located on my local machine in, say, "/Users/pavlov/MyVM.box"
[2014-02-26 02:39:05 -0500] pavlov_: I'll try that
[2014-02-26 02:39:40 -0500] pavlov_: if my kitchen.yml file looks like this ...
[2014-02-26 02:39:42 -0500] pavlov_: --- driver:   name: vagrant  provisioner:   name: chef_solo  platforms:   - name: centos-6.5  suites:   - name: default     run_list:       - recipe[minitest-handler]       - recipe[falcon-centos-prep-test]     attributes: {}
[2014-02-26 02:39:52 -0500] pavlov_: that was unhelpful ... grrrr
[2014-02-26 02:39:58 -0500] pavlov_: no formatting
[2014-02-26 02:39:59 -0500] j^2: gist on github
[2014-02-26 02:40:03 -0500] pavlov_: :)
[2014-02-26 02:40:05 -0500] pavlov_: stand by
[2014-02-26 02:41:19 -0500] pavlov_: https://gist.github.com/pavlovich/eaece4d7e63d9afaebaf
[2014-02-26 02:41:43 -0500] calvin: hi all
[2014-02-26 02:41:53 -0500] calvin: i'm trying to install coreutils on osx via macports
[2014-02-26 02:41:59 -0500] Guest99843: but i keep getting this error "Errno::ENOENT: No such file or directory - port installed coreutils"
[2014-02-26 02:42:07 -0500] pavlov_: so ... what would I have to do to have kitchen/vagrant/whatever ... be able to use my new base box if it is stored on my local machine at '/Users/pavlov/MyVM.box' ???
[2014-02-26 02:42:41 -0500] calvin10: argh
[2014-02-26 02:42:45 -0500] calvin10: alright one more try
[2014-02-26 02:43:04 -0500] calvin10: i'm trying to install coreutils via macports, but keep getting this error: "Errno::ENOENT: No such file or directory - port installed coreutils"
[2014-02-26 02:43:29 -0500] pavlov_: I tried adding a new platform .... and tried using the driver_config entry below the platform name  .... no go
[2014-02-26 02:43:34 -0500] j^2: https://github.com/test-kitchen/test-kitchen/blob/eea1e536de924190d62a99ffdd94336a67b42524/lib/kitchen/config.rb
[2014-02-26 02:43:40 -0500] j^2: that's the guy that controls it
[2014-02-26 02:43:44 -0500] calvin10: macports is definitely se up properly -- if i SSH into the machine, then i can port install it just fine
[2014-02-26 02:43:58 -0500] j^2: it looks like it should worke with the box
[2014-02-26 02:44:10 -0500] j^2: is the box in the same directory that the .kitchen.yml?
[2014-02-26 02:44:54 -0500] pavlov_: no ... should it be?
[2014-02-26 02:45:00 -0500] j^2: give it a shot
[2014-02-26 02:45:01 -0500] calvin10: i suspect that `/opt/local/bin` is somehow missing from the chef path, but i'm not sure how to get it in there
[2014-02-26 02:45:20 -0500] calvin10: i tried adding `ENV['PATH'] += ':/opt/local/bin'` client.rb but that didn't work for me =/
[2014-02-26 02:45:25 -0500] j^2: it think it starts in the local directory for the machine name
[2014-02-26 02:45:29 -0500] calvin10: fwiw, i'm trying to provision via `knife bootstrap
[2014-02-26 02:46:05 -0500] pavlov_: could you give me an example kitchen.yml file that references a custom box file? I'm looking for some sort of guide for the formatting and what specific entries/keys I need to include to make it work
[2014-02-26 02:46:14 -0500] pavlov_: no good examples online that I could find :(
[2014-02-26 02:46:25 -0500] j^2: pavlov_: alas i can't dont have access to them ATM
[2014-02-26 02:47:42 -0500] pavlov_: can you give me some pointers or suggestions ... even a starting point?
[2014-02-26 02:48:35 -0500] j^2: add the box with a simple vagrant box add mybox  boxname.box
[2014-02-26 02:48:41 -0500] j^2: then add it to the .kitchen.yml file
[2014-02-26 02:48:43 -0500] j^2: that's the best
[2014-02-26 02:48:52 -0500] j^2: way
[2014-02-26 02:49:32 -0500] j^2: mybox being the https://gist.github.com/pavlovich/eaece4d7e63d9afaebaf#file-gistfile1-txt-L9
[2014-02-26 02:49:42 -0500] j^2: that _should_ work
[2014-02-26 02:49:51 -0500] pavlov_: thanks ... I will check it out
[2014-02-26 02:50:37 -0500] j^2: i miss understood your original problem, sorry about sending you down a rabbit hole
[2014-02-26 04:08:10 -0500] flaccid: with the notifies attribute of a resource, how do you specifiy multiple resources with the same action to notify?
[2014-02-26 04:11:27 -0500] ssd7: flaccid: You can specify an array for the second argument
[2014-02-26 04:11:51 -0500] ssd7: ["service[foo]", "service[bar]"]
[2014-02-26 04:13:55 -0500] mljsimone: Hello, I need to set user/group of all files inside of /vagrant (guest vm)
[2014-02-26 04:13:59 -0500] mljsimone: How do I do this?
[2014-02-26 04:14:09 -0500] mljsimone: I use NFS shares btw
[2014-02-26 04:16:35 -0500] flaccid: ssd7: thanks y0
[2014-02-26 04:20:16 -0500] flaccid: ssd7: i appear to be n00bing it. notifies :execute, ['execute[update network sysconfig]', 'execute[run hostname]', 'execute[run domainname]'], :immediately
[2014-02-26 04:24:13 -0500] flaccid: maybe its not possible?
[2014-02-26 04:24:28 -0500] flaccid: it wants String
[2014-02-26 04:33:14 -0500] ssd7: flaccid: Hrm, I thought we allowed an array
[2014-02-26 04:33:16 -0500] ssd7: what if you do
[2014-02-26 04:33:28 -0500] ssd7: a single string with comma seperated resources
[2014-02-26 04:35:29 -0500] flaccid: ssd7: how would i do that if the resource names have spaces?
[2014-02-26 04:35:40 -0500] flaccid: i assume its ok to have spaces in resource names or is that bad practice?
[2014-02-26 04:36:25 -0500] flaccid: ssd7: is this weird or wrong?     notifies :execute, "execute['update network sysconfig', 'run hostname, 'run domainname']", :immediately
[2014-02-26 04:38:46 -0500] flaccid: missing quote there, but without still returns but execute[update network sysconfig, run hostname, run domainname] cannot be found in the resource collection.
[2014-02-26 04:41:37 -0500] jwuenschel1: you can just use notifies over and over
[2014-02-26 04:41:52 -0500] jwuenschel1: also, i think you want notifies :run for an execute block
[2014-02-26 04:42:05 -0500] flaccid: thats what i am doing, but the old syntax uses resources() plural so i was wonderin if its reducabele
[2014-02-26 04:42:38 -0500] flaccid: ah yep the action is wrong, i misread the docs cheers
[2014-02-26 04:49:22 -0500] flaccid: cool thanks guys. this provider is pretty spanky now https://github.com/xhost-cookbooks/system/blob/master/providers/hostname.rb
[2014-02-26 05:24:30 -0500] brucele_: coderanger: you there?
[2014-02-26 05:25:02 -0500] brucele_: guess not :p
[2014-02-26 05:25:28 -0500] brucele_: anyway, for anyone here who may be active, was wondering wondering if you could share what your workflow is
[2014-02-26 05:25:59 -0500] brucele_: mine is: work on the workflow, and run "vagrant reload" to see if the cookbook works
[2014-02-26 05:26:14 -0500] brucele_: Whats your workflow? do you work on a cookbook, and periodically run vagrant reload to test whether it works? in puppet there you can just change the cookbook and run puppet apply manifest.pp on the actual server and it will try to load the new changes.
[2014-02-26 05:26:25 -0500] brucele_: was wondering if theres something similiar for chef
[2014-02-26 05:26:41 -0500] j^2: brucele_: http://kitchen.ci
[2014-02-26 05:26:46 -0500] j^2: i think that's what you are looking for
[2014-02-26 05:27:19 -0500] j^2: or you can hope out of the machine and run "vagrant provision" to run the chef-solo/chef-client from the vagrant file
[2014-02-26 05:28:16 -0500] brucele_: j^2: nice, but doesnt test kitchen pretty much use vagrant to spin up a new VM and test your cookbook on it
[2014-02-26 05:28:28 -0500] j^2: yep
[2014-02-26 05:28:29 -0500] brucele_: pretty much similiar to coding the cookbook, and running "vagrant reload" right?
[2014-02-26 05:28:35 -0500] j^2: not exactly
[2014-02-26 05:28:55 -0500] j^2: and i thought vagrant provision is what you are looking for vagrant reload is something different?
[2014-02-26 05:29:52 -0500] brucele_: j^2: oh yeah vagrant provision is what i meant
[2014-02-26 05:29:56 -0500] j^2: :D
[2014-02-26 05:30:00 -0500] brucele_: :P
[2014-02-26 05:30:22 -0500] brucele_: ill check out that website on test kitchen
[2014-02-26 05:30:25 -0500] brucele_: thanks :)
[2014-02-26 05:30:29 -0500] j^2: it's pretty slick stuff no joke
[2014-02-26 05:30:36 -0500] brucele_: yeah ive heard a lot of good things about it
[2014-02-26 05:30:50 -0500] brucele_: ive even tried it once, but it seemed like nothing much differnt than vagrant provision
[2014-02-26 05:30:56 -0500] j^2: and you can put jenkins infront of it too, tie it up with your github or whatever and boom you're testing in real time commits
[2014-02-26 05:31:04 -0500] brucele_: vagrant up, and then "exit" out of the VM, and then change cookbook more... then vagrant provision
[2014-02-26 05:31:09 -0500] j^2: well it' the testing afterward is the key
[2014-02-26 05:31:19 -0500] j^2: using busser to do either bats or serverspec tests
[2014-02-26 05:31:26 -0500] j^2: to confirm you get what you exect
[2014-02-26 05:31:26 -0500] brucele_: ah ok, i havent even started writing any unit tests yet
[2014-02-26 05:31:42 -0500] j^2: not unit per se, it's acceptance test more like it
[2014-02-26 05:31:52 -0500] j^2: http://serverspec.org
[2014-02-26 05:31:56 -0500] j^2: or bats
[2014-02-26 05:32:00 -0500] brucele_: does it work with chefspec?
[2014-02-26 05:32:07 -0500] j^2: pretty sure it does
[2014-02-26 05:32:08 -0500] brucele_: or is chefspec more for unit tests
[2014-02-26 05:32:14 -0500] j^2: ^^ that
[2014-02-26 05:32:17 -0500] brucele_: :P
[2014-02-26 05:32:42 -0500] j^2: i prefer bats actually, lower bar to something useful when you are learning chef and testing with it
[2014-02-26 05:32:54 -0500] brucele_: new to the whole testing thing... trying to understand the value of it for the simple little cookbooks i have now
[2014-02-26 05:32:58 -0500] j^2: yeah
[2014-02-26 05:33:02 -0500] j^2: bats is what you want to start with
[2014-02-26 05:33:16 -0500] brucele_: j^2: ill check that out
[2014-02-26 05:33:21 -0500] j^2: as sethvargo says, it's for regression.
[2014-02-26 05:33:56 -0500] j^2: simple cookbooks are simple yes, but as they grow you'll forget why something is something and if you write a test for it years down the line you're like hey this isnt needed or i moved this thing, and your test catches it
[2014-02-26 05:34:08 -0500] j^2: brucele_: https://github.com/sstephenson/bats
[2014-02-26 05:34:38 -0500] brucele_: j^2: thanks :P
[2014-02-26 05:34:45 -0500] j^2: np
[2014-02-26 05:54:14 -0500] brucele_: j^2: you still there?
[2014-02-26 05:54:23 -0500] j^2: yep
[2014-02-26 05:54:38 -0500] brucele_: j^2: do you ever use testkitchen and chef to test application?
[2014-02-26 05:54:46 -0500] brucele_: application QA kind of stuff
[2014-02-26 05:55:01 -0500] j^2: like spinning up an applictian?
[2014-02-26 05:55:11 -0500] j^2: and using the tests to confirm that its up and running?
[2014-02-26 05:55:20 -0500] brucele_: yeah
[2014-02-26 05:55:41 -0500] brucele_: or even a step further and to try to run scripts and see if a user is able to log in
[2014-02-26 05:55:44 -0500] brucele_: and such
[2014-02-26 05:56:05 -0500] brucele_: or is that beyond the scope of the testing done with testkitchen
[2014-02-26 05:56:18 -0500] j^2: in theory it's pretty straight forward: use the deploy resource: http://docs.opscode.com/resource_deploy.html and make sure your underlying dependancies are there then have test-kitchen run the tests
[2014-02-26 05:57:04 -0500] j^2: it's not out of scope....well too out of scope, but you could jimmy rig it to work; this is where jenkins should do most of the lifting though not test-kitchen
[2014-02-26 05:57:12 -0500] j^2: but that's my opinion
[2014-02-26 06:13:07 -0500] nyeedi: hi I am some what new to chef just checking if this feature is there in
[2014-02-26 06:13:40 -0500] nyeedi: I want to push some default run_list to all nodes with out mentioning any thing in any role
[2014-02-26 06:14:13 -0500] nyeedi: i.e when we run chef-client in server then it should run that default run_list and then its role ....
[2014-02-26 06:15:38 -0500] j^2: nyeedi: that's what a "role[base]" or somethnig to that effect is for
[2014-02-26 06:15:42 -0500] j^2: but you have to create it
[2014-02-26 06:16:02 -0500] j^2: from what i know, you cant create a "default" run_list
[2014-02-26 06:16:14 -0500] jidar: yea, there is no default
[2014-02-26 06:16:16 -0500] storme_away: i think you can do that with environment run lists, too, but you can't modify the _default environment
[2014-02-26 06:17:50 -0500] nyeedi: j^2: so we need to create a role with name "base"
[2014-02-26 06:18:08 -0500] jidar: you can call it whatever you want
[2014-02-26 06:18:11 -0500] j^2: or whatever you want to name it, but yeah.
[2014-02-26 06:18:35 -0500] j^2: and when you do a knife server create make sure the run_list has role[base] or whatever
[2014-02-26 06:20:06 -0500] nyeedi: that is where I am stuck I don't what to mention specifically that role[base] in servers role / run_ist . I need to mention this role only once then it should apply to all servers
[2014-02-26 06:20:22 -0500] j^2: nyeedi: from what i know that's not possible
[2014-02-26 06:20:36 -0500] j^2: oooh
[2014-02-26 06:20:45 -0500] j^2: unless you add them all to an environment list
[2014-02-26 06:20:52 -0500] j^2: and add the runlist there
[2014-02-26 06:20:59 -0500] j^2: like storme_away suggests
[2014-02-26 06:21:20 -0500] nyeedi: okay
[2014-02-26 06:21:24 -0500] j^2: but then you need to create another environtment
[2014-02-26 06:21:40 -0500] j^2: 6 of one or 1/2 dozen of another
[2014-02-26 06:22:11 -0500] storme_away: yeah, but using environments gives you better control down the road anyways
[2014-02-26 06:24:21 -0500] nyeedi: okay so let me go back and know much about environment
[2014-02-26 07:27:34 -0500] lopezt: Hey guys
[2014-02-26 07:29:11 -0500] lopezt: can someone tell me how to execute a command in a recipe if a particular node in a Vagrantfile is set?
[2014-02-26 07:29:40 -0500] lopezt: Something like "only_if  { platform_family?('rhel', 'fedora') }"
[2014-02-26 07:29:58 -0500] lopezt: just where i check if a particular node has a value or still does not exist
[2014-02-26 07:30:56 -0500] lopezt: found it
[2014-02-26 10:08:49 -0500] daxroc: Is it right that chef will error out at compile stage because of a missing file that hasn't been extracted by a recipe yet?
[2014-02-26 10:10:12 -0500] daxroc: *In a file resource I'm referencing a file path that doesn't exist at compile time only after a previous recipe has converged.
[2014-02-26 10:10:30 -0500] srenatus: daxroc: reference how?
[2014-02-26 10:10:45 -0500] daxroc: contents ::File read
[2014-02-26 10:10:52 -0500] srenatus: yes that breaks.
[2014-02-26 10:10:54 -0500] srenatus: ;)
[2014-02-26 10:11:33 -0500] srenatus: AFAIK there's no way to "copy a file" in chef nicely.  a) execute resource, b) template with local source, c) link
[2014-02-26 10:12:13 -0500] daxroc: cant you defer end.?
[2014-02-26 10:12:34 -0500] srenatus: d) ruby block
[2014-02-26 10:12:44 -0500] srenatus: (did I miss something? probably)
[2014-02-26 10:16:14 -0500] daxroc: NM, local template seems good alternative
[2014-02-26 10:16:43 -0500] daxroc: or remote_file with source file: right ?
[2014-02-26 10:16:54 -0500] srenatus: oh, that's e)
[2014-02-26 10:17:33 -0500] daxroc: which is the least error prone
[2014-02-26 10:19:49 -0500] daxroc: srenatus: How do you specify the source on a local template ?
[2014-02-26 10:24:11 -0500] daxroc: hym, if you wrap the contents in lazy { ::File } it works fine
[2014-02-26 10:28:57 -0500] srenatus: daxroc: lazy?  tell me more :)
[2014-02-26 10:29:16 -0500] srenatus: lazy chef is unsearchable
[2014-02-26 10:34:43 -0500] daxroc: What do you mean?
[2014-02-26 10:35:58 -0500] daxroc: srenatus: Sorry, Lazy attribute evaluation
[2014-02-26 10:36:11 -0500] daxroc: http://docs.opscode.com/chef/resources.html
[2014-02-26 10:40:27 -0500] srenatus: daxroc: that's pretty cool. learnt something today. thanks
[2014-02-26 10:49:16 -0500] mhenrixon: hey guys
[2014-02-26 10:49:44 -0500] mhenrixon: How should I store the various domains/sites and what goes where?
[2014-02-26 10:49:56 -0500] mhenrixon: Anyone have any best practices to recommend?
[2014-02-26 10:50:05 -0500] mhenrixon: daxroc how do you solve that ?
[2014-02-26 10:56:54 -0500] daxroc: mhenrixon: Not sure what you mean, describe your problem?
[2014-02-26 10:58:20 -0500] mhenrixon: I am setting up a reverse proxy with nginx and now I have to ask the chef-server for what domains go the upstream proxy and I dont know where to put that mapping. I mean I could do it in an attributes file but that feels wrong
[2014-02-26 10:59:31 -0500] mhenrixon: I found this which is in the docs https://github.com/opscode/chef-docs/blob/master/step_resource/step_resource_template_consistent_proxy_settings.rst
[2014-02-26 11:01:28 -0500] daxroc: Possibly a data bag as it's global to your 'organisation' no?
[2014-02-26 11:02:36 -0500] mhenrixon: that was my initial thought
[2014-02-26 11:03:06 -0500] daxroc: But for the configuration of the proxy I think it should be dynamic, coming from how many web-servers are configured eg have role http_backend etc, Does that make sense?
[2014-02-26 11:04:05 -0500] mhenrixon: right there you go, tag the node with something, search for those nodes and then find the domains and tell those domains to proxy to the nodes I searched for. That what you mean? If so I am pretty much set
[2014-02-26 11:04:12 -0500] mhenrixon: Just have to handle the SSL certificates as well
[2014-02-26 11:04:24 -0500] mhenrixon: wildcard certs thank god
[2014-02-26 12:42:48 -0500] ocholetras: users cookbook on redhat
[2014-02-26 12:43:27 -0500] ocholetras: uses usermod to update password but we execute chef-client with sudo, so usermod says "cant update user when is logged in"
[2014-02-26 12:43:30 -0500] ocholetras: any workaround ?
[2014-02-26 12:53:57 -0500] cassianoleal: hey guys... is it possible to ssh into a kitchen-docker VM?
[2014-02-26 12:54:45 -0500] srenatus: cassianoleal: most probably not.  special precautions have to be taken for being able to SSH into a docker container
[2014-02-26 12:54:52 -0500] srenatus: that's why it's a container and not a VM ;)
[2014-02-26 12:55:13 -0500] cassianoleal: srenatus: I see... what's the best way to run commands in the container, thank?
[2014-02-26 12:55:23 -0500] srenatus: oh wait
[2014-02-26 12:55:42 -0500] srenatus: nevermind, kitchen-docker actually does only use ssh
[2014-02-26 12:55:43 -0500] Raboo: is there a way to verify that all my cookbooks work with chef 11?
[2014-02-26 12:56:03 -0500] Raboo: I have chef 10 today and want to start with updating the chef client to 11
[2014-02-26 12:56:10 -0500] srenatus: cassianoleal: you should be able to use "kitchen login ..."
[2014-02-26 12:56:33 -0500] cassianoleal: srenatus: it asks for the kichen user's password
[2014-02-26 12:56:41 -0500] srenatus: cassianoleal: https://github.com/portertech/kitchen-docker/blob/master/lib/kitchen/driver/docker.rb  << there's the container it sets up...
[2014-02-26 12:56:49 -0500] srenatus: cassianoleal: then something's wrong, it shouldn't do that
[2014-02-26 12:57:11 -0500] cassianoleal: srenatus: yeah, I thought so... I'm using the debian base container. it's ok though, the password is "kitchen"
[2014-02-26 12:57:14 -0500] cassianoleal: srenatus: thanks!
[2014-02-26 12:57:26 -0500] srenatus: cassianoleal: wait. looking at it, it doesn't do anything to prevent asking you for a password
[2014-02-26 12:57:38 -0500] srenatus: cassianoleal: https://github.com/portertech/kitchen-docker/blob/master/lib/kitchen/driver/docker.rb#L115-L117
[2014-02-26 12:57:59 -0500] srenatus: cassianoleal: so, nothing's wrong, kitchen-docker just works a little different to what you (me at least) would expect...
[2014-02-26 12:58:40 -0500] cassianoleal: srenatus: yep, that's cool.. I'm in anyway :) thanks!
[2014-02-26 13:41:01 -0500] neuronotic: Hi all, what's the best way to update the package manager agnostic to if it's yum or apt? Eg for apt, I'd want to execute "apt-get update" on debian flavour systems vs the Yum equivilant for red-hat like flavours?
[2014-02-26 13:42:04 -0500] neuronotic: That is, use / write a recipe that did this?
[2014-02-26 14:18:46 -0500] jbellone: Good morning!
[2014-02-26 14:20:03 -0500] jbellone: neuronotic: I wouldn't say one is better than the other, but as you brought up it is more of the flavor of Linux. Debian based distributions use apt and Red Hat based distributions are using yum. Additionally if you're working with Gentoo or Arch you're going to use other tools.
[2014-02-26 14:20:38 -0500] jbellone: neuronotic: The equivalent would be "yum update".
[2014-02-26 14:23:05 -0500] cwj: neuronotic: declare a dependency on the yum and apt cookbooks, then use something like a case statement on node[:platform_family] to include_recipe "yum::default" or include_recipe "apt::default accordingly
[2014-02-26 14:25:27 -0500] cwj: neuronotic: although I am not familiar enough with the current state of the yum cookbook, i do know the apt cookbook will run apt-get update if it hasnt been run in the last 86400 seconds
[2014-02-26 14:33:42 -0500] neuronotic: cwj: thanks, that makes sense .
[2014-02-26 14:35:57 -0500] ichilton: Having an odd problem with the redisio cookbook, which i've used before but isn't working now:
[2014-02-26 14:36:06 -0500] ichilton: [2014-02-26T14:33:17+00:00] ERROR: redisio_install[redis-servers] (redisio::install line 30) had an error: ArgumentError: You must supply a name when declaring a file resource
[2014-02-26 14:36:13 -0500] neuronotic: jbellone:  yup, I wanted to make my chef config as agnostic to linux flavour as possible - and currently, some recipes need latest repos. but cwj's suggestion for using a case statement seems simple enough for now. I had been wondering if there was some pre-existing cookbook for handling this.
[2014-02-26 14:36:20 -0500] ichilton: line 30 is:
[2014-02-26 14:36:21 -0500] ichilton:  30: redisio_install "redis-servers" do
[2014-02-26 14:36:25 -0500] ichilton: any ideas anyone?
[2014-02-26 14:46:46 -0500] jbell05: Hello again!
[2014-02-26 14:47:01 -0500] jbell05: Quickie question -hopefully this one isn't too bad-
[2014-02-26 14:47:25 -0500] jbell05: How would I put together a library of common functions that recipes in a bunch of my cookbooks will use...
[2014-02-26 14:47:26 -0500] jbell05: ?
[2014-02-26 14:47:49 -0500] jbell05: The functions I'm looking at, particularly, involve looking up data from a specific databag based on the IP of the node...
[2014-02-26 14:47:59 -0500] jbell05: It can hardcode it into each recipe, but that seems... inefficient.
[2014-02-26 14:48:37 -0500] jbell05: If I were writing something in C or Perl, I'd write some functions and just put them into a library...
[2014-02-26 14:48:55 -0500] jbell05: but IDK if that's the best way, or even a possible way, of doing this with Chef...
[2014-02-26 14:51:30 -0500] yatesy: I think there's a libraries folder within a cookbook that could be the sort of thing you're looking for, but I know little about it
[2014-02-26 14:52:03 -0500] jbell05: I was just reading about that...
[2014-02-26 14:52:13 -0500] jbell05: http://docs.opscode.com/essentials_cookbook_libraries.html
[2014-02-26 14:52:16 -0500] jbell05: I think this may be the way to go...
[2014-02-26 14:52:20 -0500] jbell05: Hm..
[2014-02-26 15:02:41 -0500] dawuud: howdy
[2014-02-26 15:02:54 -0500] dawuud: how would i generate my  chef-server.rb file on my new chef-server?
[2014-02-26 15:14:22 -0500] bmhatfield: dawuud: https://github.com/opscode-cookbooks/chef-server/blob/master/recipes/default.rb#L85-L92
[2014-02-26 15:16:26 -0500] dawuud: bmhatfield: thanks... i'll take a look
[2014-02-26 15:19:55 -0500] ichilton: anyone familiar with knife solo around?
[2014-02-26 15:21:55 -0500] dawuud: bmhatfield: interesting. since i didn't have a chef server before installing the chef-server i used the debian package...
[2014-02-26 15:22:46 -0500] dawuud: i guess i don't fully understand the point of such a cookbook... except to track changes done to the chef-server
[2014-02-26 15:23:48 -0500] bmhatfield: dawuud: I used chef-client to update the chef-server.rb config. You can almost certainly use chef-solo for this sort of thing.
[2014-02-26 15:24:09 -0500] bmhatfield: The point is to allow you to set attributes containing the chef-server.rb settings you want, which will then apply them to the node.
[2014-02-26 15:24:42 -0500] bmhatfield: Yes, there's some chicken and egg going on here. But it's not that bad.
[2014-02-26 15:25:37 -0500] dawuud: ah ok
[2014-02-26 15:25:45 -0500] dawuud: yeah... eggs.
[2014-02-26 15:26:39 -0500] shlant: anyone have a suggestion for a better way to handle this? https://gist.github.com/MrMMorris/72a136c1c218142e457c
[2014-02-26 15:27:13 -0500] dawuud: bootstraping a chef-server with chef-solo sounds cool
[2014-02-26 15:27:44 -0500] bmhatfield: shlant: I put a premium on idempotence in my chef repo, so the way I would do this is I would add all of those ads-server examples to my chef repo as files / templates and have chef manage them.
[2014-02-26 15:28:22 -0500] bmhatfield: dawuud: in fact, chef-server-ctl uses chef-solo under the covers
[2014-02-26 15:29:07 -0500] bmhatfield: dawuud: here's the internal recipes that it runs: https://github.com/opscode/omnibus-chef-server/tree/master/files/chef-server-cookbooks
[2014-02-26 15:29:20 -0500] dawuud: ah interesting
[2014-02-26 15:29:33 -0500] dawuud: makes sense
[2014-02-26 15:30:28 -0500] shlant: bmhatfield: yea, I was thinking that but theres over 30 confs haha. And I think they change pretty regularly
[2014-02-26 15:30:47 -0500] dawuud: i want to use this to manage my existing chef-server
[2014-02-26 15:30:48 -0500] bmhatfield: How are they getting to the /usr/share location?
[2014-02-26 15:32:03 -0500] bmhatfield: shlant: ^^
[2014-02-26 15:32:51 -0500] shlant: bmhatfield: you mean to run the bash rm/cp command?
[2014-02-26 15:34:22 -0500] shlant: bmhatfield: oh sorry, I see what you mean. That location is created as part of a package install
[2014-02-26 15:35:03 -0500] shlant: I'm going to see if we can just put the conf straight to /etc/ads-server
[2014-02-26 15:36:39 -0500] dawuud: bmhatfield: um yeah weird; now i bootstrap my chef-server and run this chef-server cookbook which looks like it won't make total destroy
[2014-02-26 15:41:09 -0500] bmhatfield: shlant: yeah, you want to either have your package manage them entirely, or do it in a more idempotent way. Internally, chef checks checksums before manipulating files, and then only changes files that need to be changed. This has a knock on effect of being able to say "if this file changes, restart this service", etc
[2014-02-26 16:02:33 -0500] djnos: Hello, is there somebody which can help me using search into a recipe?
[2014-02-26 16:03:17 -0500] djnos: I have done a kitchen test but I get a :  No such file or directory - /tmp/kitchen/client.pem>
[2014-02-26 16:07:11 -0500] jbell05: Question -- how can I use search() from within a ruby class defined in a recipe? -- http://pastebin.com/kcEewCqU
[2014-02-26 16:07:39 -0500] jbell05: The pastebin above breaks at line 3, saying that it cant find 'search' in Chef::Recipe::Something
[2014-02-26 16:08:05 -0500] jbell05: I'm trying to write a common code base that I'll use in multiple cookbooks...
[2014-02-26 16:12:06 -0500] jbell05: Anyone?
[2014-02-26 16:13:26 -0500] AntelopeSalad: jbell05: what is "search"?
[2014-02-26 16:13:42 -0500] AntelopeSalad: is that something a chef cookbook provides in a recipe? (i never used it personally)
[2014-02-26 16:13:48 -0500] jbell05: AntelopeSalad: The search function within chef... yes
[2014-02-26 16:13:57 -0500] jbell05: um... here: http://docs.opscode.com/essentials_search.html
[2014-02-26 16:14:05 -0500] AntelopeSalad: maybe you can pass it in to self.nodeCode(search)
[2014-02-26 16:14:22 -0500] jbell05: I suppose I could, but that's kind of sloppy
[2014-02-26 16:14:28 -0500] AntelopeSalad: and then when you call that nodeCall method in your recipe, you just pass in search
[2014-02-26 16:14:36 -0500] AntelopeSalad: yeah it's one way to get around it for now, i'm not sure of the proper implementation
[2014-02-26 16:14:43 -0500] jbell05: hm...
[2014-02-26 16:14:56 -0500] AntelopeSalad: i'm just starting to work with library code myself and so far i've been passing in the stuff to the method directly
[2014-02-26 16:15:07 -0500] jbell05: If I knew the namespace of the function call, I could just reference it directly.
[2014-02-26 16:15:33 -0500] jbell05: If it's like Chef::Search.search, or what... IDK I'm just stabbing in the dark LOL
[2014-02-26 16:16:10 -0500] AntelopeSalad: in my case i wanted to use cookbook_name in my custom method, so i passed it in
[2014-02-26 16:16:26 -0500] AntelopeSalad: maybe it's something you can mixin to your custom class?
[2014-02-26 16:16:54 -0500] jbell05: Hm... maybe. I'm not too familiar with Ruby at the moment, but it's similar enough to Perl and Python that I've been able to get along...
[2014-02-26 16:17:18 -0500] AntelopeSalad: with ruby you can mixin modules to classes with the "include Foo::Bar" syntax
[2014-02-26 16:17:28 -0500] AntelopeSalad: and then those classes get the goodies provided by the module
[2014-02-26 16:17:38 -0500] jbell05: I guess I don't even know if which module search() is actually stored in...
[2014-02-26 16:17:46 -0500] jbell05: Is there a way I can glean that within the ruby code?
[2014-02-26 16:18:25 -0500] AntelopeSalad: if your editor has a "jump to implementation" feature
[2014-02-26 16:18:44 -0500] AntelopeSalad: you could probably dive directly into search's implementation
[2014-02-26 16:18:54 -0500] AntelopeSalad: and then see what class/modules it lives in
[2014-02-26 16:19:18 -0500] jbell05: My editor is vim... likely not.
[2014-02-26 16:19:23 -0500] jbell05: I found this though -
[2014-02-26 16:19:27 -0500] jbell05: http://stackoverflow.com/questions/19134728/how-can-i-access-the-current-node-from-a-library-in-a-chef-cookbook
[2014-02-26 16:19:38 -0500] jbell05: That may work... (as opposed to defining a class proper)
[2014-02-26 16:20:11 -0500] AntelopeSalad: yah it is the mixin approach
[2014-02-26 16:20:37 -0500] AntelopeSalad: but it's mixing it in from the other direction
[2014-02-26 16:20:48 -0500] AntelopeSalad: i'm not sure i like having to extend my regular recipes, but i guess it's a possible solution
[2014-02-26 16:22:42 -0500] jbell05: All I want is a central place to put common code... so in essence (in my instance) I am extending the recipes... by pulling the external code.  IDK if I can pull a lib cross-cookbook though, is that a possibility?
[2014-02-26 16:22:42 -0500] AntelopeSalad: maybe it is reasonable though, it lets people know instantly that this recipe is using things from a custom library
[2014-02-26 16:23:22 -0500] AntelopeSalad: i've never done cross cookbook features but
[2014-02-26 16:23:45 -0500] AntelopeSalad: my uninformed newbie perspective would think the code would have to be inside of its own cookbook
[2014-02-26 16:23:52 -0500] AntelopeSalad: and then pulled as a dep for the other cookbooks?
[2014-02-26 16:23:58 -0500] AntelopeSalad: (the ones that use it)
[2014-02-26 16:24:11 -0500] jbell05: ah.
[2014-02-26 16:24:18 -0500] jbell05: well I guess we'll see.  Let me get it working forst...
[2014-02-26 16:24:22 -0500] jbell05: s/forst/first
[2014-02-26 16:24:42 -0500] AntelopeSalad: for internal abstractions i put code in the /libraries folder
[2014-02-26 16:24:48 -0500] AntelopeSalad: and then i use those methods in my recipes
[2014-02-26 16:26:58 -0500] jbell05: Well that works for node, but it still doesn't pull in search.. durrrrrrrr
[2014-02-26 16:27:06 -0500] AntelopeSalad: jbell05: wait a sec now
[2014-02-26 16:27:15 -0500] AntelopeSalad: can a chef installation depend on gems?
[2014-02-26 16:27:44 -0500] jbell05: eh idk.
[2014-02-26 16:27:46 -0500] AntelopeSalad: maybe you could write your custom code as a gem and then add them to each node and then your cookbook could require in the gem?
[2014-02-26 16:28:20 -0500] jbell05: I still want access to the search function though... and IDK where to pull it in if I'm gonna code a separate lib into a gem...
[2014-02-26 16:28:53 -0500] AntelopeSalad: oh, yeah i have no idea. i haven't even used the search feature yet
[2014-02-26 16:29:03 -0500] AntelopeSalad: or know its limitations/how it works
[2014-02-26 16:29:24 -0500] jbell05: It's fantastically awesome... I'm writing an addon cookbook that'll allow our NTP servers to self-organized.
[2014-02-26 16:29:32 -0500] jbell05: *self organize
[2014-02-26 16:29:43 -0500] jbell05: The search function is what allows them to "see" each other.
[2014-02-26 16:29:55 -0500] AntelopeSalad: i haven't gone past 1 node yet
[2014-02-26 16:30:09 -0500] jbell05: LOL yeah.. I have a whole..... ..... .... two
[2014-02-26 16:30:22 -0500] AntelopeSalad: but that is neat if search lets you get information from another node
[2014-02-26 16:30:28 -0500] jbell05: yup.
[2014-02-26 16:30:35 -0500] AntelopeSalad: i guess everything you have defined as an attribute is searchable?
[2014-02-26 16:31:03 -0500] jbell05: Pretty much.
[2014-02-26 16:31:17 -0500] mattsurabian: anyone use the php_pear resource in the php cookbook?
[2014-02-26 16:31:19 -0500] jbell05: You can search through the ohai data too... so things like node platforms, etc...
[2014-02-26 16:31:34 -0500] AntelopeSalad: oh yeah, i think i remember that now from the learnchef webinar
[2014-02-26 16:31:41 -0500] mattsurabian: getting an error that it can't find a package, but when I ssh to the box I can pear install it
[2014-02-26 16:31:56 -0500] jbell05: AntelopeSalad: In my instance, the nodes self-tag and then pull up nodes at a similar level by searching for node:tags
[2014-02-26 16:32:22 -0500] AntelopeSalad: seems useful if you need to write out files that depend on some information from another node i suppose?
[2014-02-26 16:32:38 -0500] jbell05: yeah.... like peers & servers in an NTP heirarchy
[2014-02-26 16:36:53 -0500] tubbo: are there any existing Knife plugins for PXE boot?
[2014-02-26 16:48:15 -0500] djnos: search function is very useful for scalability, where is the benefit of complexifying IT delivery if config stay static?
[2014-02-26 16:54:43 -0500] chef-newbie_: hello.  I am setting up chef with the open-source server.  I have set up the server and two nodes so far.   I have downloaded  the apace2 cookbook, but I cannot upload it
[2014-02-26 16:55:18 -0500] chef-newbie_: I get "/opt/chef/embedded/lib/ruby/1.9.1/net/http.rb:2789:in `stream_check': undefined method `closed?'"
[2014-02-26 16:58:23 -0500] bmhatfield: chef-newbie_: That might be an SSL certificate issue
[2014-02-26 17:02:01 -0500] djnos: webservers = search(:node, 'role:wbserver')      =>       how to bind my local settings (pem files etc.) to kitchen please to sign my re'quests?
[2014-02-26 17:02:04 -0500] chef-newbie_: If it was SSL, I wouldn't expect to be able to create nodes.
[2014-02-26 17:02:41 -0500] djnos: Nobody ever do that?
[2014-02-26 17:41:13 -0500] nefilim: hi, having trouble with a simple #{os}::network ohai plugin, basically "network" is always Nil in the plugin, however when i run ohai network on the node all the data is there?
[2014-02-26 17:41:32 -0500] nefilim: (ohai 6.20.0)
[2014-02-26 18:24:38 -0500] gnagno: hello
[2014-02-26 18:24:57 -0500] gnagno: is there a best practice for installing a rails application using chef?
[2014-02-26 18:25:39 -0500] bmhatfield: gnagno: Opscode's opinion is that you should use the "application" cookbook
[2014-02-26 18:30:33 -0500] AntelopeSalad: gnagno: i would say there's no best practice because everyone has different needs
[2014-02-26 18:39:27 -0500] benjohnson77: ahoi chef's
[2014-02-26 18:39:39 -0500] benjohnson77: ohai rather
[2014-02-26 18:42:24 -0500] benjohnson77: is there a perfered approach or example how to install passenger enterprise gem, with ngnix:source ... I have regular passenger working but can't determine the best way to install the enterprise version
[2014-02-26 18:43:39 -0500] shlant1: is it ok to automate apt-get upgrade as long as you use a custom repo?
[2014-02-26 18:58:09 -0500] bmhatfield: shlant: I'd choose that on a package-by-package basis with action :upgrade
[2014-02-26 18:58:26 -0500] bmhatfield: I do have some packages that do that, specifically because I control when and how they show up in my repo.
[2014-02-26 18:58:35 -0500] bmhatfield: I wouldn't do a full upgrade blindly though.
[2014-02-26 20:06:28 -0500] jperry_: https://tickets.opscode.com/ is down
[2014-02-26 20:06:29 -0500] jperry_: well throwing 404s
[2014-02-26 20:06:29 -0500] jperry_: jtimberman: https://tickets.opscode.com/ is throwing 40s
[2014-02-26 20:06:38 -0500] jperry_: juliancdunn: ^^^
[2014-02-26 20:13:37 -0500] juliancdunn: jperry_: let me ask ops
[2014-02-26 20:14:21 -0500] jperry_: juliancdunn: btw, I brought this up awhile ago but when I bring the centos 5.10 bento box up it can't talk to the outside
[2014-02-26 20:14:32 -0500] jperry_: I forget the fix for this but do you happen to remember?
[2014-02-26 20:15:20 -0500] anthroprose1: jperry: I have to do things like: v.customize ["modifyvm", :id, "--natdnshostresolver1", "on"] sometimes
[2014-02-26 20:15:25 -0500] juliancdunn: jperry_: response is, emergency maintenance on the atlassian box - http://status.opscode.com/post/77928170440/tickets-wiki-opscode-com-maintenance-emergency
[2014-02-26 20:15:37 -0500] jperry_: okay
[2014-02-26 20:15:55 -0500] juliancdunn: jperry_: as for CentOS 5, I thought I rebuilt the box without kudzu, which was the culprit
[2014-02-26 20:16:08 -0500] juliancdunn: if that isn't it, then it must be something else busted
[2014-02-26 20:16:09 -0500] anthroprose1: yeah, huge atlassian security bug right now, my corp jira/etc... got firewalled this morning
[2014-02-26 20:16:16 -0500] jperry_: I'm still having the issue
[2014-02-26 20:16:46 -0500] jperry_: anthroprose1: I'll try that setting to see if that clears it up
[2014-02-26 20:16:47 -0500] juliancdunn: the emphasis is on the 2nd syllable in "Atlassian"
[2014-02-26 20:16:58 -0500] eherot: to anyone in here that works on the nginx community cookbook: Is it a known issue that the test-kitchen download for the ubuntu 10.04 vagrant box is no longer working? (tickets.opscode.com is down)
[2014-02-26 20:18:24 -0500] juliancdunn: eherot: I'm reading the .kitchen.yml and I think it's an error /cc someara_
[2014-02-26 20:18:52 -0500] juliancdunn: should be a period between '10' and '04'
[2014-02-26 20:19:47 -0500] eherot: juliancdunn: good to know I'm not crazy :-)
[2014-02-26 20:20:24 -0500] juliancdunn: ditto for "12" and "04" - probably a copypasta error
[2014-02-26 20:20:43 -0500] eherot: lets see if it works with the decimal
[2014-02-26 20:21:46 -0500] eherot: juliancdunn: confirmed 200 OK with the dot.
[2014-02-26 20:21:57 -0500] juliancdunn: there you go
[2014-02-26 20:22:16 -0500] juliancdunn: JIRA is back up
[2014-02-26 20:22:22 -0500] eherot: ah good thx
[2014-02-26 20:27:34 -0500] atompngn: I have something weird happening with a default array attribute being merged together with 2 different recipes in the same cookbook.  Wondering is !merge still a thing or is that gone?
[2014-02-26 20:30:47 -0500] eherot: juliancdunn: I'm suspicious that I'm the first to notice this ;-)
[2014-02-26 20:31:23 -0500] juliancdunn: eherot: I have a suspicion that many people are like the Dos Equis guy when it comes to testing
[2014-02-26 20:32:07 -0500] eherot: I don't always test my code, but when I do, I do it with errors.
[2014-02-26 20:33:13 -0500] juliancdunn: :)
[2014-02-26 20:33:32 -0500] eherot: pr filed ;-)
[2014-02-26 20:35:52 -0500] jperry_: anthroprose1: juliancdunn the vb.customize ["modifyvm", :id, "--natdnshostresolver1", "on"] didn't fix the issue with centos 5.10
[2014-02-26 20:36:01 -0500] jperry_: this is using a private network too
[2014-02-26 20:52:23 -0500] juliancdunn: jperry_: the problems have always been with host-only networks
[2014-02-26 20:52:36 -0500] juliancdunn: for some reason the VM won't rewrite the /etc/resolv.conf
[2014-02-26 20:58:00 -0500] icarus: Where do the chef-repo details get stored on a chef-server?
[2014-02-26 21:00:02 -0500] icarus: I've been using berks to update the chef-server, and it appears to be working correctly
[2014-02-26 21:00:09 -0500] icarus: I added a comment to a template file
[2014-02-26 21:00:23 -0500] icarus: but it won't update when i run chef-client on my chef nodes
[2014-02-26 21:02:51 -0500] icarus: I do see " (up to date)" in the chef-client output above that file
[2014-02-26 21:03:00 -0500] icarus: Perhaps chef-client isn't passing the change?
[2014-02-26 21:04:40 -0500] daxroc: how are you updateing using berks
[2014-02-26 21:05:38 -0500] daxroc: icarus: If the cookbook has changed, chef-client will update and converge on checkin
[2014-02-26 21:05:55 -0500] btm: cookbook code review: join: bit.ly/1lm6RQF watch: bit.ly/1lm6QfB
[2014-02-26 21:07:56 -0500] icarus: daxroc: berks update
[2014-02-26 21:08:22 -0500] icarus: berks upload*
[2014-02-26 21:08:25 -0500] atompngn: nvm, I'm stupid
[2014-02-26 21:09:09 -0500] ranjib: its raining in SF :-D
[2014-02-26 21:09:44 -0500] daxroc: icarus: did you check the copy on the server to see if it has your changes?
[2014-02-26 21:13:39 -0500] icarus: daxroc: ive checked, it doesn't have the changes
[2014-02-26 21:18:03 -0500] jperry_: juliancdunn: thanks, I'll keep looking
[2014-02-26 21:20:42 -0500] daxroc: icarus: bump the version of the cookbook you modified and try update it again
[2014-02-26 21:41:56 -0500] icarus: daxroc: woohoo!
[2014-02-26 21:42:00 -0500] icarus: that appears to have done it
[2014-02-26 21:42:57 -0500] icarus: bumping the version number 0.X.44
[2014-02-26 22:03:16 -0500] AntelopeSalad: why isn't chef letting me use the Hash[] method in a recipe?
[2014-02-26 22:04:08 -0500] AntelopeSalad: i just checked with an online evaluator and that method exists even in 1.8.7
[2014-02-26 22:07:04 -0500] coderanger: AntelopeSalad: Whats the error?
[2014-02-26 22:08:06 -0500] AntelopeSalad: coderanger: undefined method `Hash' for Chef::Recipe::SourceEnvironment:Class
[2014-02-26 22:08:38 -0500] coderanger: Pastebin the code, you are using it in a context that it is trying to use that atom as a method call
[2014-02-26 22:09:11 -0500] AntelopeSalad: coderanger: https://gist.github.com/AntelopeSalad/c5ae1b9a08af5d3c2028
[2014-02-26 22:10:18 -0500] AntelopeSalad: if i take that code as is and run it locally on my workstation using ruby 2.1.0 it works -- even with the exact contents of /etc/profile on the server
[2014-02-26 22:12:01 -0500] AntelopeSalad: haha damn, i think i see the problem...i caught up making it nice looking
[2014-02-26 22:12:21 -0500] AntelopeSalad: *got caught up -- Hash [ is invalid but Hash[ works
[2014-02-26 22:12:29 -0500] coderanger: Yeah
[2014-02-26 22:12:35 -0500] coderanger: Though also I'm not sure thats legal Ruby
[2014-02-26 22:12:46 -0500] coderanger: Hash[['a', '1']] gives a ton of errors
[2014-02-26 22:13:03 -0500] AntelopeSalad: what type of errors? let me check
[2014-02-26 22:13:15 -0500] coderanger: http://i.coderanger.net/RGHsC.png
[2014-02-26 22:13:23 -0500] AntelopeSalad: https://eval.in/106027
[2014-02-26 22:13:37 -0500] AntelopeSalad: this lets you choose a few different versions of ruby btw, it's nice for testing
[2014-02-26 22:13:41 -0500] coderanger: Yeah, that
[2014-02-26 22:13:52 -0500] coderanger: Hash['a', '1'] is what you want
[2014-02-26 22:14:04 -0500] coderanger: So you may just need a * in there
[2014-02-26 22:14:05 -0500] AntelopeSalad: i wonder why mine isn't throwing warnings (on 2.1)
[2014-02-26 22:14:34 -0500] coderanger: I am also on 2.1
[2014-02-26 22:15:09 -0500] coderanger: Regardless of warnings, do you get teh right output for the the nested list?
[2014-02-26 22:15:14 -0500] AntelopeSalad: check this out https://eval.in/106029
[2014-02-26 22:15:24 -0500] AntelopeSalad: no warnings
[2014-02-26 22:15:52 -0500] AntelopeSalad: seems to work as intended on 1.9.3 too
[2014-02-26 22:15:57 -0500] coderanger: Weird
[2014-02-26 22:17:02 -0500] AntelopeSalad: had to use that to populate the execute/deploy calls with my full env since it doesn't source them from /etc/profile
[2014-02-26 22:17:17 -0500] AntelopeSalad: that is why i had those db errors the other day if you happened to remember
[2014-02-26 22:20:41 -0500] coderanger: AntelopeSalad: FWIW I usually use .inject to build an interable into a hash
[2014-02-26 22:22:54 -0500] AntelopeSalad: coderanger: hmm
[2014-02-26 22:24:57 -0500] AntelopeSalad: i don't even know what an "interable into a hash means" haha
[2014-02-26 22:25:16 -0500] AntelopeSalad: haven't messed with .inject much either, i thought it was nearly an alias for reduce?
[2014-02-26 22:26:27 -0500] coderanger: AntelopeSalad:[['a', 1], ['b', 2]].inject({}) {|memo, (key, value)| memo[key] = value; memo}
[2014-02-26 22:27:41 -0500] AntelopeSalad: interesting, so i can drop the Hash[] completely and just add the inject after my chain?
[2014-02-26 22:27:47 -0500] coderanger: Mhmm
[2014-02-26 22:27:54 -0500] coderanger: Keeps the data flow in the right order IMO :)
[2014-02-26 22:28:57 -0500] AntelopeSalad: something like this: https://eval.in/106054
[2014-02-26 22:29:16 -0500] coderanger: mhmm
[2014-02-26 22:29:42 -0500] AntelopeSalad: both versions seem to output the same result
[2014-02-26 22:31:04 -0500] AntelopeSalad: i wonder which one is more readable
[2014-02-26 22:33:40 -0500] icarus: daxroc: is there a way to commit changes without changing version numbers?
[2014-02-26 22:37:15 -0500] daxroc: icarus: I'm sure there is you can fall back to knife
[2014-02-26 22:53:42 -0500] volker-: I try to find all set attributes of a certain style, e.g. "node[cookbookname][*][*_s3_bucket]". How can I accomplish it? I can get the smaller subset by using  "knife search 'cookbookname:*' -l", but I don't get more down.
[2014-02-26 23:02:01 -0500] volker-: actually you can use "-a" for nested attributes, but how can I use there * for any value
[2014-02-26 23:03:02 -0500] gaulia: Is there a way to tell berkshelf to look for cookbooks locally?
[2014-02-26 23:04:41 -0500] gaulia: I've written my own rbenv, postgres, nginx, etc cookbooks, but they're for practice and I don't want to deploy them to opscode, so what are my options? I was thinking locally via berkshelf might be one
[2014-02-26 23:06:08 -0500] flaccid: sounds like a wheel reinvention
[2014-02-26 23:06:39 -0500] AntelopeSalad: gaulia: in the Berksfile you can point to local cookbooks
[2014-02-26 23:06:50 -0500] atomic-penguin: flaccid, they said, "for practice"
[2014-02-26 23:06:51 -0500] AntelopeSalad: and git repos too if you happen to upload them later
[2014-02-26 23:07:16 -0500] gaulia: K that's cool, I have them on github but they're private as i'm not particularly proud of them :p
[2014-02-26 23:07:26 -0500] gaulia: Yes flaccid, just for practice.
[2014-02-26 23:07:37 -0500] gaulia: ty antelopesalad
[2014-02-26 23:08:00 -0500] flaccid: yeah i don't mean to sound rude, you can practice by writing cookbooks that have not been written yet :)
[2014-02-26 23:08:04 -0500] AntelopeSalad: check the berkshelf readme on the main page, the syntax on how to do it is there
[2014-02-26 23:09:42 -0500] gaulia: That makes sense, I am just doing this for my personal website and all of the ones I 'need' are written, and if I don't need it it's hard for me to finish that
[2014-02-26 23:10:18 -0500] gaulia: Is there somewhere that specifies some that aren't writte, flaccid?
[2014-02-26 23:10:36 -0500] gaulia: rather than just checking one at a time on opcode cookbook website...
[2014-02-26 23:13:10 -0500] AntelopeSalad: gaulia: didn't you ask about deploying rails apps earlier?
[2014-02-26 23:13:54 -0500] gaulia: hmmm, how much earlier? I don't think i've asked a question in #chef for a while but that is what i'm deploying
[2014-02-26 23:16:01 -0500] AntelopeSalad: gaulia: wrong person, similar name tho
[2014-02-26 23:17:01 -0500] gaulia: nw
[2014-02-26 23:17:07 -0500] gaulia: ty again
[2014-02-26 23:20:59 -0500] kitopastorino: does it make sense to use something like rvm/rbenv when deploying a node with chef? seems like compiling it from source show be enough and simple to change with chef
[2014-02-26 23:25:29 -0500] flaccid: gaulia: i found google to be pretty accurate when searching, of course you want the opposite, that kind of list would be pretty cool to have
[2014-02-26 23:25:44 -0500] gaulia: right?
[2014-02-26 23:25:49 -0500] flaccid: kitopastorino: depends what you need it for
[2014-02-26 23:27:13 -0500] kitopastorino: flaccid, it's just to run a ruby app, rails in this case, but a sinatra on another node
[2014-02-26 23:27:38 -0500] kitopastorino: and i've been looking for ruby 2.1 recipes and couldn't find any, but saw a lot of recipes with rvm
[2014-02-26 23:27:41 -0500] AntelopeSalad: i use rvm mainly because you can install ruby without compiling it
[2014-02-26 23:28:16 -0500] AntelopeSalad: that saves a good 15min per run if you use a low end vps
[2014-02-26 23:28:51 -0500] kitopastorino: AntelopeSalad: that's a good point
[2014-02-26 23:30:19 -0500] AntelopeSalad: kitopastorino, i'm using this cookbook https://github.com/fnichol/chef-rvm
[2014-02-26 23:30:33 -0500] AntelopeSalad: it was like 3 lines to get it all working with ruby 2.1.0
[2014-02-26 23:30:41 -0500] pushnell: hey folks, I'm struggling with a recipe that tries to do a git checkout and then run some local templates which came from git.  On the first chef run, it does the git checkout but then doesn't see any templates to run.  The second chef run changes nothing with git, but now chef sees the templates and runs them.  Any ideas how to kick the file cache after the git deploy?
[2014-02-26 23:31:23 -0500] kitopastorino: AntelopeSalad: thanks! I'll try it
[2014-02-26 23:32:06 -0500] AntelopeSalad: kitopastorino: i went with the system wide approach
[2014-02-26 23:32:43 -0500] kitopastorino: AntelopeSalad: yes, that's what I want, and why I was thinking about compiling ruby from source also (ubuntu packages are outdated)
[2014-02-26 23:33:03 -0500] jbz: !mon
[2014-02-26 23:33:09 -0500] AntelopeSalad: the only annoying this is if you go down this route with rvm and you happen to use the deploy resource
[2014-02-26 23:33:11 -0500] jbz: heh whoops
[2014-02-26 23:33:37 -0500] AntelopeSalad: you will need to run your rake commands from within the context of rvm since rvm doesn't mess with chef's view of your shell
[2014-02-26 23:34:12 -0500] flaccid: kitopastorino: https://github.com/poise/poise-ruby
[2014-02-26 23:34:16 -0500] kitopastorino: you mean using "rvm_shell" and those commands?
[2014-02-26 23:34:27 -0500] AntelopeSalad: rvm_shell is one way to do it yeah
[2014-02-26 23:34:41 -0500] AntelopeSalad: that's a drop in replacement for 'execute' from what i saw
[2014-02-26 23:34:59 -0500] AntelopeSalad: poise-ruby and the pg gem don't nice together
[2014-02-26 23:35:53 -0500] AntelopeSalad: the openssl versions between poise-ruby and libpq-dev are different so when you try to compile the pg gem for rails it blows up -- no known work around AFAIK
[2014-02-26 23:35:54 -0500] kitopastorino: what's the conflict with pg gem?
[2014-02-26 23:36:15 -0500] kitopastorino: oh, that's really bad... not using pg yet, but maybe in a future
[2014-02-26 23:36:26 -0500] AntelopeSalad: but with the rvm approach the pg gem will compile no problem
[2014-02-26 23:36:33 -0500] flaccid: that sounds like the gem is behind
[2014-02-26 23:36:35 -0500] AntelopeSalad: and if you use rbenv and compile ruby manually it will also work
[2014-02-26 23:36:52 -0500] AntelopeSalad: it's not the gem, it's the postgres libpq-dev package it depends on
[2014-02-26 23:37:49 -0500] flaccid: because openssl 1.0 ?
[2014-02-26 23:38:33 -0500] AntelopeSalad: https://bitbucket.org/ged/ruby-pg/issue/178/pgs-way-of-linking-to-openssl-is-not
[2014-02-26 23:38:55 -0500] coalbe: i took the easy route with rbenv, how often does one change a ruby version anyways?
[2014-02-26 23:39:20 -0500] AntelopeSalad: hmm security updates maybe
[2014-02-26 23:39:40 -0500] AntelopeSalad: or 2.0 to 2.1 seems like a pretty great update
[2014-02-26 23:40:19 -0500] flaccid: interesting

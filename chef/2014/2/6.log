[2014-02-06 00:00:40 -0500] jtimberman: flaccid: in your .rubocop.yml
[2014-02-06 00:00:44 -0500] jtimberman: Documentation: Enabled: false
[2014-02-06 00:00:46 -0500] jtimberman: two lines ><
[2014-02-06 00:01:37 -0500] jtimberman: https://github.com/jtimberman/skeleton-cookbook/blob/master/.rubocop.yml
[2014-02-06 00:03:52 -0500] nektos: Running "kitchen converge" with a recipe that uses search() for :node is giving "I cannot read /tmp/kitchen/client.pem, which you told me to use to sign requests!"...any ideas?
[2014-02-06 00:04:00 -0500] flaccid: jtimberman: thanks mate, i got it but decided a basic comment would be ok to say i'm including a library, better to not be global. what i found with that offense is that when it was a top-level, it didn't allow a spare line between the comment and the module block which is what the accept actually is in the ruby doc project
[2014-02-06 00:04:23 -0500] flaccid: accept=example
[2014-02-06 00:06:11 -0500] flaccid: jtimberman: like i guess this is informative https://github.com/xhost-cookbooks/system/blob/master/providers/hostname.rb#L19 but wasn't allowed a spare line here https://github.com/xhost-cookbooks/system/blob/master/libraries/host_info.rb#L22 heh!
[2014-02-06 00:08:09 -0500] superbenk: Anyone here familiar with chef-vault?
[2014-02-06 00:10:19 -0500] superbenk: I'm fighting with "padding check failed" even after reading what's supposedly causing it here: https://github.com/Nordstrom/chef-vault/issues/43
[2014-02-06 00:10:43 -0500] superbenk: I can create & use the encrypted data bags with knife vault but I can't view or update them
[2014-02-06 00:10:57 -0500] superbenk: This is using vagrant & chef-zero
[2014-02-06 00:21:17 -0500] gaulia: how would I run the command  Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?   with apt? I'm installing postgres and getting that
[2014-02-06 00:21:28 -0500] gaulia: with the apt cookbook
[2014-02-06 00:23:31 -0500] flaccid: gaulia: it would be better to work out why its getting in that state and fix that
[2014-02-06 00:24:04 -0500] flaccid: if anyone is using meez, i'd be interested to know if anything sux about it :) http://theagileadmin.com/2014/01/20/clean-up-your-cookbook-mess-with-meez/
[2014-02-06 00:29:50 -0500] gaulia: flaccid: That sounds great, I have default-ubuntu-1204.log and kitchen.log, do you want to see one or both?
[2014-02-06 00:30:07 -0500] gaulia: Or what information would be needed
[2014-02-06 00:30:35 -0500] flaccid: gaulia: i guess i have time, the chef output would be a good start
[2014-02-06 00:33:35 -0500] gaulia: flaccid: is that one of the log files?
[2014-02-06 00:33:52 -0500] gaulia: flaccid: Thanks a lot, if you run out of time or don't then don't worry about it
[2014-02-06 00:33:57 -0500] gaulia: don't have time*
[2014-02-06 00:34:16 -0500] gaulia: is the chef output one of those log files, or what is output to the console?
[2014-02-06 00:34:44 -0500] gaulia: i'm stilling piecing together terminology so be patient :)
[2014-02-06 00:35:04 -0500] gaulia: I'm using berkshelf + test kitchen + vagrant
[2014-02-06 00:36:35 -0500] flaccid: gaulia: i've never used berkshelf, i guess its probably the output from that
[2014-02-06 00:36:48 -0500] flaccid: well it would be in the vagrant output i assume
[2014-02-06 00:39:45 -0500] gaulia: ok grabbing that
[2014-02-06 00:45:19 -0500] hamux: hi, quick question, how can I install bundler on a node? I've got the cookbook, but when I do bundler in vagrant, says command doesn't exist
[2014-02-06 00:45:27 -0500] flaccid: gaulia: gotta run sorry
[2014-02-06 00:45:56 -0500] knix_: hamux: the bin for bundler is bundle
[2014-02-06 00:46:35 -0500] hamux: tried bundle as well
[2014-02-06 00:46:41 -0500] gaulia: flaccid: k ty
[2014-02-06 00:47:09 -0500] hamux: i've got the rubygems cookbook in the runlist too, but can't do gem either
[2014-02-06 00:48:42 -0500] flaccid: gaulia: pastebin it now, i got a few mins
[2014-02-06 00:48:43 -0500] darron__: hamux: That generally means that bundler isn't installed on the box: gem install bundler
[2014-02-06 00:49:48 -0500] hamux: that's right, but how can I provision the box with bundler? i'm using bundler and rubygems cookbooks, for some reason they don't exist on the box
[2014-02-06 00:50:00 -0500] hamux: should i use gem_package?
[2014-02-06 00:50:08 -0500] flaccid: hamux: yeah or just use https://github.com/xhost-cookbooks/rubygems/blob/master/recipes/install_gems.rb
[2014-02-06 00:51:05 -0500] hamux: cheers guys, i'll give it a shot
[2014-02-06 00:51:41 -0500] darron__: Yeah gem_package worked for me.
[2014-02-06 00:52:00 -0500] scalp42: or chef_gem
[2014-02-06 00:53:51 -0500] gaulia: flaccid: http://pastebin.com/raw.php?i=jxqS66JP
[2014-02-06 00:54:54 -0500] gaulia: so I logged in and ran sudo apt-get -q -y install postgresql-client-9.1=9.1.10-0ubuntu12.04
[2014-02-06 00:55:14 -0500] gaulia: oops, I ran this first sudo apt-get update --fix-missing
[2014-02-06 00:55:19 -0500] flaccid: gaulia: looks like you need to use the apt cookbook so it does an apt-get update first
[2014-02-06 00:55:34 -0500] gaulia: hmmm I have that,
[2014-02-06 00:55:45 -0500] gaulia: and I listed it in my recipes/default.rb first
[2014-02-06 00:56:05 -0500] flaccid: gaulia: yes but https://github.com/chef-blueprints/linux_box/blob/master/share/vagrant/Vagrantfile.default#L52
[2014-02-06 00:56:25 -0500] flaccid: mitchellh still has not rebuilt the box and open sourced the build either
[2014-02-06 00:56:32 -0500] flaccid: gotta run, have fun
[2014-02-06 00:56:55 -0500] gaulia: k
[2014-02-06 00:56:56 -0500] gaulia: ty
[2014-02-06 00:57:15 -0500] gaulia: how was I suppose to know about that damn
[2014-02-06 00:57:27 -0500] gaulia: flaccid: tyvm
[2014-02-06 00:59:59 -0500] zbp: I just installed chef server 11.0.10 via RPM onto centos, and I'm trying to create the client config on another machine via `knife configure --initial` when it asks for the server URL, it defaults to port to port 443 which is not running on the server when I look in /etc/chef-server/chef-server-running.json it shows webui bound to localhost (127.0.0.1) and running on port 9462 so the question is how do I configure it to listen on the NIC ip and not lo0, and 
[2014-02-06 01:00:00 -0500] zbp: is the webui url what I plug into knife configure --intiial?
[2014-02-06 01:02:08 -0500] zbp: in other words, how do I configure chef-server api listen on 0.0.0.0
[2014-02-06 01:24:01 -0500] coderanger: zbp: the api and webui only listen on localhost because they are proxied by nginx
[2014-02-06 01:24:15 -0500] coderanger: In other news, you should not be using the FOSS web UI as it is functionally deprecated
[2014-02-06 01:25:25 -0500] zbp: I may be confused about the component names, I'm not using the webui to control chef server what I'm trying to do is correctly answer the question for `knife configure --initial` when it asks "Please enter the chef server URL:"
[2014-02-06 01:25:45 -0500] zbp: port 443 doesn't appear to be open after I install chef-server via rpm
[2014-02-06 01:25:55 -0500] zbp: so just trying to determine what URL I should put there.
[2014-02-06 01:26:14 -0500] zbp: I have an FQDN for the chef server, so URL isn't the problem, it's just knowing what port to put there in the answer to the question.
[2014-02-06 01:26:40 -0500] zbp: I've already copied the admin.pem and and chef-validator.pem to the client workstation.
[2014-02-06 01:27:36 -0500] coderanger: zbp: is nginx running on the server?
[2014-02-06 01:27:53 -0500] coderanger: zbp: No port is needed, just normal https://whatever
[2014-02-06 01:28:01 -0500] zbp: ok let me try
[2014-02-06 02:05:12 -0500] zbp: coderanger: thx man
[2014-02-06 02:05:24 -0500] zbp: had something blocking nginx
[2014-02-06 05:26:31 -0500] kbarry: for the life of me...... Why can't I get this to work in a powershell_script:
[2014-02-06 05:28:25 -0500] kbarry: $a = (Get-ChildItem -Path \\\\server.name.com\\e$\\time\\service\\websupport\\song\\indexes\\active | where {$_.name -like "????????????"} |sort lastwritetime -Descending | select -First 1)
[2014-02-06 05:49:41 -0500] zbp: If i have some functions that I want to use across multiple templates, where is a good place to put them?
[2014-02-06 05:50:31 -0500] coderanger: zbp: You can use a helper module
[2014-02-06 05:50:46 -0500] coderanger: http://docs.opscode.com/resource_template.html#library-modules
[2014-02-06 05:50:50 -0500] zbp: coderanger: thank you
[2014-02-06 06:02:55 -0500] kbarry: http://poshcode.com/paste/46/
[2014-02-06 06:03:12 -0500] kbarry: I have been experimenting with using the %q{} syntax,
[2014-02-06 06:03:15 -0500] kbarry: to no avail,
[2014-02-06 06:03:32 -0500] kbarry: the code listed above does not in any way work as far as I can tell.
[2014-02-06 06:03:32 -0500] coderanger: kbarry: You can't mix that with a heredoc
[2014-02-06 06:03:44 -0500] kbarry: what is a heredoc?
[2014-02-06 06:03:55 -0500] coderanger: The <<-EOB thing
[2014-02-06 06:04:04 -0500] kbarry: is it either or?
[2014-02-06 06:04:12 -0500] coderanger: Yes, both are syntax for strings
[2014-02-06 06:04:19 -0500] coderanger: Using both is like "'foo'"
[2014-02-06 06:04:20 -0500] coderanger: :)
[2014-02-06 06:15:31 -0500] kbarry: sorry, got disconnected
[2014-02-06 06:15:39 -0500] kbarry: coderanger what is a heredoc, or beter yet,
[2014-02-06 06:15:40 -0500] kbarry: what is it doing in my code?
[2014-02-06 06:15:59 -0500] coderanger: A heredoc is a syntax for a multiline string
[2014-02-06 06:16:06 -0500] spheromak: kbarry: http://en.wikipedia.org/wiki/Here_document
[2014-02-06 06:17:31 -0500] kbarry: in powershell there is such a thing as a here-string
[2014-02-06 06:17:50 -0500] kbarry: in a herestring nothing needs to be escaped, nothing is interpreted, everything is taken literally
[2014-02-06 06:18:04 -0500] kbarry: period,
[2014-02-06 06:18:22 -0500] kbarry: apparently thats not the case with how I am using my heredoc
[2014-02-06 06:20:00 -0500] coderanger: What issue are you having?
[2014-02-06 06:21:36 -0500] kbarry: would it workthe issue I was having was when i used it between the eob (i guess its called a heredoc)
[2014-02-06 06:21:46 -0500] kbarry: i needed to escape the \ in the script
[2014-02-06 06:22:04 -0500] kbarry: but ever after escaping them, i guess i still needed to escape the " aswell
[2014-02-06 06:22:15 -0500] kbarry: and ever after that, something wasnt working
[2014-02-06 06:22:28 -0500] kbarry: the powershell_script wasnt functioning as expected
[2014-02-06 06:22:39 -0500] kbarry: so i thought, Fine, I dont want to escape anything,
[2014-02-06 06:22:53 -0500] coderanger: ahh, easy to fix
[2014-02-06 06:23:04 -0500] spheromak: kbarry: %q  gets you absolute quotes  between delimiters
[2014-02-06 06:23:07 -0500] coderanger: change the opening of the heredoc to <<-'EOB'
[2014-02-06 06:23:13 -0500] kbarry: i want to wrap it in something that says "I swear Ruby, if you try to interpret ANYTHING in here, i will hunt you down and kill and your children.
[2014-02-06 06:23:26 -0500] spheromak: similar to heredoc, but easier to remmember the syntax
[2014-02-06 06:24:08 -0500] kbarry: just put single quoted around only the first EOB
[2014-02-06 06:24:13 -0500] kbarry: and not around the second?
[2014-02-06 06:24:47 -0500] spheromak: kbarry: i should have read scrolback
[2014-02-06 06:25:28 -0500] kbarry: I do not want anything interpreted, period.
[2014-02-06 06:25:32 -0500] kbarry: nothing.
[2014-02-06 06:25:42 -0500] kbarry: but for the life of me, i cannot get the powershellscript to function.
[2014-02-06 06:25:48 -0500] kbarry: i can get parts of it to work,
[2014-02-06 06:25:58 -0500] spheromak: kbarry: using %q[ script.... content ] didn't work ?
[2014-02-06 06:26:11 -0500] kbarry: when i remobed the EOB it did,
[2014-02-06 06:26:11 -0500] spheromak: in your paste i don't see square brackets
[2014-02-06 06:26:18 -0500] kbarry: i used ^
[2014-02-06 06:26:25 -0500] spheromak: it would be code %q[ .... ]
[2014-02-06 06:26:27 -0500] spheromak: no heredoc
[2014-02-06 06:26:39 -0500] kbarry: i was going to use { and }  but those are in my code
[2014-02-06 06:26:49 -0500] spheromak: yea use any delim not in yer code ;0
[2014-02-06 06:26:54 -0500] kbarry: right
[2014-02-06 06:26:59 -0500] kbarry: so, i still have a problem,
[2014-02-06 06:27:19 -0500] spheromak: oh you are trying to get the <<-EOB to not inerpolate
[2014-02-06 06:27:21 -0500] spheromak: ?
[2014-02-06 06:27:31 -0500] spheromak: thats actually part of your powershell
[2014-02-06 06:27:33 -0500] spheromak: ?
[2014-02-06 06:27:39 -0500] kbarry: no,
[2014-02-06 06:27:43 -0500] spheromak: ok
[2014-02-06 06:27:47 -0500] kbarry: I want "something" to be a wrapper
[2014-02-06 06:27:52 -0500] spheromak: yea
[2014-02-06 06:28:10 -0500] spheromak: so  code  %q[  script multiline content ]   should work
[2014-02-06 06:28:11 -0500] kbarry: that "means" Ruby, if you freaking touch ANYTIHNG inside here, i will kill your dog, and then you, and then your wntire family."
[2014-02-06 06:28:15 -0500] spheromak: given what you pasted
[2014-02-06 06:28:38 -0500] kbarry: the line beginning with $a = ... doesnt appear to be executing
[2014-02-06 06:28:54 -0500] kbarry: of course Chef is so awesome, i can't actually see what the powershell is/was doing
[2014-02-06 06:29:08 -0500] spheromak: dunno whats the case, but %q will not parse
[2014-02-06 06:29:22 -0500] spheromak: even wit --debug ?
[2014-02-06 06:29:40 -0500] kbarry: only that in the next line when it calls for "$($a.fullname)" it isnt writting that
[2014-02-06 06:29:46 -0500] kbarry: ohhh, i am new
[2014-02-06 06:29:55 -0500] kbarry: Is there a way to see?
[2014-02-06 06:30:04 -0500] kbarry: chef-client ...???
[2014-02-06 06:30:51 -0500] spheromak: yea chef-client --debug will give you more info
[2014-02-06 06:30:57 -0500] spheromak: sorry
[2014-02-06 06:30:59 -0500] spheromak: -Ldebug
[2014-02-06 06:32:45 -0500] spheromak: kbarry: https://gist.github.com/spheromak/8839273
[2014-02-06 06:33:04 -0500] spheromak: u can see that the script is unmolested
[2014-02-06 06:33:34 -0500] spheromak: doesn't mean something in the powershell provider/resource couldn't be doing something wrong
[2014-02-06 06:33:50 -0500] kbarry: Look, it could be something like a permissions issue
[2014-02-06 06:33:57 -0500] kbarry: i just haven't been able to "see"
[2014-02-06 06:34:00 -0500] kbarry: what powershell was doing
[2014-02-06 06:34:00 -0500] spheromak: yea run client with -Ldebug
[2014-02-06 06:34:06 -0500] spheromak: should dump infos
[2014-02-06 06:34:07 -0500] kbarry: alright
[2014-02-06 06:34:10 -0500] spheromak: LOTS
[2014-02-06 06:34:11 -0500] spheromak: :d
[2014-02-06 06:34:58 -0500] kbarry: btw, what credentials does powershell_script use?
[2014-02-06 06:35:20 -0500] spheromak: kbarry: no idea, dun use windows here sorry :|
[2014-02-06 06:35:57 -0500] kbarry: chef-client -Ldebig returned nothing :)
[2014-02-06 06:36:01 -0500] kbarry: just a new prompt.
[2014-02-06 06:38:52 -0500] kbarry: apparently i needed to use chef-client -l debug
[2014-02-06 06:39:09 -0500] kbarry: -L is ro specify the log location..... wonder if i can drop it in a file
[2014-02-06 06:41:47 -0500] kbarry: nothing new
[2014-02-06 06:41:54 -0500] kbarry: everything else it seems gets more info,
[2014-02-06 06:42:14 -0500] kbarry: but the powershell_script still only shows that 1)it ran, and 2) it was successful.....
[2014-02-06 07:04:24 -0500] spheromak: kbarry: might try  a post to the ML, i am not familliar with chef on windows and/or powershell. there are people on the ML that can help more.
[2014-02-06 07:05:45 -0500] kbarry: Thanks for the help.
[2014-02-06 07:55:08 -0500] vgirnet_: Hello. I have a json file that has all information about a node. I need to create a Node object for a test session, without really creating the Node on Chef-Server
[2014-02-06 07:55:17 -0500] vgirnet_: node = Chef::Node.new
[2014-02-06 07:55:30 -0500] vgirnet_: node.name(parsed_data['name'])
[2014-02-06 07:55:33 -0500] vgirnet_: this works
[2014-02-06 07:55:50 -0500] vgirnet_: but node.set[:ipaddress] = parsed_data['ipaddress'] seems to not work
[2014-02-06 07:56:20 -0500] vgirnet_: How to create a node object from an json file?
[2014-02-06 07:56:22 -0500] vgirnet_: Thanks
[2014-02-06 07:57:31 -0500] flaccid: vgirnet_: seems a bit strange, have you considered some TDD frameworks and systems?
[2014-02-06 07:57:43 -0500] flaccid: kitchen works good here
[2014-02-06 07:59:46 -0500] vgirnet_: this is required for a set of own scripts, and only for development purposes
[2014-02-06 08:00:07 -0500] vgirnet_: need to keep them as simple as possible
[2014-02-06 08:00:48 -0500] flaccid: may not be a good approach
[2014-02-06 08:03:18 -0500] vgirnet_: kitchen seems to be good, but way too complicated for what I need
[2014-02-06 08:03:33 -0500] flaccid: vgirnet_: this is why meez is looking awesome
[2014-02-06 08:03:48 -0500] vgirnet_: in my scripts I need to extract for a node: name, ipaddress, and run_list / roles
[2014-02-06 08:04:18 -0500] vgirnet_: and I don't need to start VMs, it's just processing of roles, to ensure scripts are working fine
[2014-02-06 08:04:22 -0500] flaccid: i'm no expert in tdd yet but i don't know how to do anything like that without using some kind of test software
[2014-02-06 08:06:28 -0500] vgirnet_: ok, thanks
[2014-02-06 08:07:51 -0500] kaushal: Hi
[2014-02-06 08:08:38 -0500] kaushal: I am new to chef. Can someone please point me to start learning Chef and implement in my office
[2014-02-06 08:09:42 -0500] flaccid: kaushal: #learnchef http://learnchef.com/
[2014-02-06 08:28:56 -0500] vgirnet_: found solution to my needs, hope to work
[2014-02-06 08:29:08 -0500] vgirnet_: parsed_data = JSON.parse(node_json_data_from_file)
[2014-02-06 08:29:15 -0500] vgirnet_: node = Chef::Node.json_create(parsed_data)
[2014-02-06 08:55:56 -0500] kaushal: flaccid: Thanks
[2014-02-06 08:57:28 -0500] flaccid: kaushal: np
[2014-02-06 08:58:48 -0500] kaushal: flaccid: any books?
[2014-02-06 08:59:10 -0500] flaccid: kaushal: not sure, try google
[2014-02-06 12:04:06 -0500] zeroXten: can I just confirm that for chef-vault, the xxx.json contains field_n => E(k, plaintext_n) and xxx_keys.json contains something like user => E(pub, k)
[2014-02-06 12:06:53 -0500] zeroXten: so if those two files were leaked (or in a public repo) it would provide a list of clients/users and info about field names, but not much else
[2014-02-06 12:12:49 -0500] vanchester: Humm, hello everyone. What it can be if chef-client doesn't run by interval? Manually it works. Node "interval" attribute is set.
[2014-02-06 12:22:51 -0500] aujt74: vanchester: Have you enabled chef-client to run as a service, via cron or similar?
[2014-02-06 12:26:07 -0500] olesku: Am I right about that Chef 10 did store the users in the clients directory ?
[2014-02-06 12:30:57 -0500] vanchester: aujt74, i didn't. Shouldn't knife did that automatically?
[2014-02-06 12:31:11 -0500] vanchester: do* that
[2014-02-06 12:33:21 -0500] vanchester: aujt74, i think this is an expected behavior
[2014-02-06 12:33:51 -0500] aujt74: vanchester: No it shouldn't. Please see https://github.com/opscode-cookbooks/chef-client. It is up to you how or even if you want chef-client to run regularly.
[2014-02-06 12:36:03 -0500] vanchester: aujt74, thanks a lot for help.
[2014-02-06 12:36:13 -0500] aujt74: It also entirely depends on what platform you are running on. You need to run the chef-client::service recipe which can set chef-client in a whole range of systems, init, upstart, runit, bluepill, daemontools etc etc.
[2014-02-06 12:36:24 -0500] aujt74: No problem.
[2014-02-06 12:41:39 -0500] vanchester: aujt74, yeah i read about this recipes, but i expected that chef-client will periodically run itself out of the box.
[2014-02-06 12:42:38 -0500] flaccid: vanchester: chef-client is just a script. there is no client service with chef
[2014-02-06 12:43:56 -0500] aujt74: vanchester: It *can* periodically run if you set it up as a service using one of the service recipes, but chef-client *will* not periodically run by default.
[2014-02-06 12:44:01 -0500] workmad3: vanchester: many users don't want/need chef to run periodically, so running like that is an opt-in process (and integrates into your chosen process supervisor or init system via the chef-client recipe)
[2014-02-06 12:44:37 -0500] flaccid: its different to puppet which has a real service/agent
[2014-02-06 12:46:04 -0500] vanchester: i got it
[2014-02-06 12:46:38 -0500] AlainODea: workmad3: crucial point. Having chef-client running automatically may be desirable but it means a slip up in knife role from file (as I did) can bring down production. That wasn't my best day
[2014-02-06 12:47:33 -0500] adam-_-_: is there a knife command to view the recipe version installed on a node and not just that the recipe is present
[2014-02-06 13:12:34 -0500] mancdaz: if manually modifying a resource from the resource collection (rather than using chef-rewind), whats the syntax to append a 'notifies' argument?
[2014-02-06 13:16:18 -0500] mancdaz: trying to do this: https://gist.github.com/mancdaz/8843913
[2014-02-06 13:16:29 -0500] mancdaz: the resource does not seem modiified with my notification
[2014-02-06 13:34:49 -0500] ay_: Hm. What would be the best way to seperate projects in chef We are one company but have problaby around 40 very differnt projects. I want to be able to target/list them and set owners and stuff on the (a attribute for technical owner etc) What is the best way to to that? Use roles and subroles? Enviroments? Something else?
[2014-02-06 13:35:41 -0500] ay_: Or should I use enviroments for that?
[2014-02-06 13:35:53 -0500] ay_: All the different projects has stage/prod/dev as well.
[2014-02-06 14:01:05 -0500] zeroXten: whoohoo, got keepass piping into chef-vault
[2014-02-06 14:04:12 -0500] workmad3: AlainODea: yeah... I don't use roles anymore :) I manage everything with cookbooks and environment pinning (to avoid exactly that sort of issue)
[2014-02-06 14:12:04 -0500] vgirnet_: hello
[2014-02-06 14:12:54 -0500] vgirnet_: I'm using open source Chef Server to keep everything inside my network. I'm going to upgrade to Chef 11, and it's not quite clear how to manage Chef Server 11
[2014-02-06 14:13:09 -0500] vgirnet_: for Chef 10 there is a cookbook "chef-server", was enough for me
[2014-02-06 14:14:05 -0500] vgirnet_: for Chef Server 11 - should I just edit the chef-server.rb ?
[2014-02-06 14:16:44 -0500] lewiz: Is it possible to throw an error with template parsing fails to fill placeholders with values (e.g. @variables or node['attribute']['values'])?
[2014-02-06 14:17:48 -0500] flaccid: lewiz: whats the use case?
[2014-02-06 14:18:11 -0500] lewiz: flaccid: I want to fail if some value is not filled in a generated template
[2014-02-06 14:18:23 -0500] flaccid: lewiz: filled in ?
[2014-02-06 14:18:54 -0500] lewiz: flaccid: Sure.  So if I specify that three node attributes should be populated in a template, I want to fail if those attributes are not set in the node, environment, etc.
[2014-02-06 14:19:38 -0500] flaccid: lewiz: is there no default attribute value?
[2014-02-06 14:20:08 -0500] lewiz: flaccid: in this instance it's the hostname of a server and should be populated
[2014-02-06 14:20:29 -0500] flaccid: lewiz: computers cannot work without a hostname
[2014-02-06 14:23:01 -0500] lewiz: flaccid: Sorry, maybe I wasn't clear.  I'm talking about a config file for some application which needs the hostname or IP address of a server, say a database.  I want to fail if that hostname/IP isn't provided as an attribute variable.  In this instance there is no sensible default
[2014-02-06 14:23:40 -0500] flaccid: lewiz: when you say attribute variable do you mean a node attribute for the node?
[2014-02-06 14:23:51 -0500] lewiz: flaccid: Yes.  or environment
[2014-02-06 14:25:34 -0500] flaccid: lewiz: ok so you don't do this on the template level. you make the attribute required in metadata, in your default attribute file you make it default to nil, then in your recipe or provider your raise if its not set with ruby code raise 'foooo message fail' unless node['foo']['bar']
[2014-02-06 14:30:23 -0500] lewiz: flaccid: that's certainly interesting and I'll remember for the future.  Correct me if I'm wrong but I don't think it will work for what I'm doing: using partial templates I store my config.erb outside of the cookbook (it's checked into the application repo we deploy from).  This makes sense as out devs can add new config options, etc. without directly involving ops.  Unfortunately this could mean new variables get added without me being aware and I want to 
[2014-02-06 14:33:03 -0500] flaccid: lewiz: chef templates are template based, not stream edits. you are double managing a file. thats a logical issue.  the short story, don't do it.
[2014-02-06 14:33:12 -0500] chef903: I have a test-kitchen 1.1.1 question on forwarding ports, for kitchen-vagrant. I'm wondering if anyone has a working example of this working.
[2014-02-06 14:33:54 -0500] flaccid: lewiz: its one way or the other
[2014-02-06 14:34:04 -0500] flaccid: you can't partially manage a file
[2014-02-06 14:34:31 -0500] lewiz: flaccid: I don't quite follow.  It's exactly the same template file it would be, except that it's checked into a different repo.  It gets populated in the same way it would as if it were in the cookbook.
[2014-02-06 14:36:00 -0500] flaccid: lewiz: i don't know what problem you are trying to solve if your one cookbook is managing the file
[2014-02-06 14:37:47 -0500] lewiz: flaccid: It's a config file fully managed by Chef.  The only thing different about this is that the erb template file lives outside of the cookbook templates directory
[2014-02-06 14:37:59 -0500] flaccid: i have never seen anybody have files for a cookbook live in different repositories
[2014-02-06 14:38:44 -0500] flaccid: lewiz: thats pretty crazy but if you were to do it, make it a git submodule
[2014-02-06 14:38:54 -0500] flaccid: then do what i said to check it in the recipe not the template
[2014-02-06 14:40:19 -0500] flaccid: raise 'you did not specify a dang hostname' unless node['foo']['hostname']
[2014-02-06 14:41:08 -0500] lewiz: flaccid: Hmm, that doesn't quite fit what I need.  I know this is a bit of an odd thing to want to do but I think it does make sense.  The whole point is to decouple the template and its variables from the cookbook.  That way I can have major config changes between versions without updating the cookbook - I just need to add new attributes at a role or environment level
[2014-02-06 14:41:30 -0500] lewiz: It's quite likely that it's just not possible for template to raise an error when a placeholder doesn't get filled
[2014-02-06 14:41:44 -0500] workmad3: lewiz: the only way I can think of to do what you want (assuming I've understood it correctly) would be to educate the developers to use a slightly different style of access in the template, e.g. @options to scope all your variables
[2014-02-06 14:42:15 -0500] fveillette: does anyone here can help me with windows_task provider?
[2014-02-06 14:42:22 -0500] flaccid: lewiz: sure but you are thinking on the wrong level. template is the last part, its the render of something that is determined. you don't need cookbooks to set node attributes on nodes, that can be done with a node.json on bootstrap, knife, enterprise UI etc.
[2014-02-06 14:43:11 -0500] workmad3: lewiz: and then instead of just providing a normal hash to options, you create a hash 'template_options = Hash.new{|h,k| raise "No value provided for #{k}"}; template "foo" do; variables template_options.merge(put all your exposed variables here); end'
[2014-02-06 14:43:30 -0500] workmad3: err, make that 'variables options: template_options.merge(...)'
[2014-02-06 14:44:02 -0500] flaccid: pretty crazy stuff, its like doing an additional layer of validation workmad3
[2014-02-06 14:44:06 -0500] lewiz: workmad3: Ah, template_options is an array of all of the @placeholders present in a epl file?
[2014-02-06 14:44:22 -0500] workmad3: lewiz: it's a hash of whatever you want ;)
[2014-02-06 14:44:33 -0500] flaccid: pointless
[2014-02-06 14:45:00 -0500] workmad3: flaccid: yeah... but that sounds like what he wants... the template in question is pulled out of an application repository, and lewiz wants some form of notification when a developer modifies that template and tries to use a variable that is currently not set
[2014-02-06 14:45:26 -0500] flaccid: workmad3: define notification
[2014-02-06 14:45:27 -0500] lewiz: workmad3: That's exactly what I want.  Give me a minute to re-read what you've said :)
[2014-02-06 14:45:42 -0500] workmad3: flaccid: in this case, lewiz is going very extreme and killing the entire chef run ;)
[2014-02-06 14:45:56 -0500] workmad3: flaccid: I'd probably personally go for logging something out in the hash default proc...
[2014-02-06 14:46:06 -0500] flaccid: workmad3: thus why you simply raise per what i said if the node attribute is not set by the operator
[2014-02-06 14:46:17 -0500] flaccid: i'd make it simple
[2014-02-06 14:46:21 -0500] workmad3: flaccid: yes... but then you have to put that all over the place in the template
[2014-02-06 14:46:30 -0500] flaccid: no you don't have to touch the template
[2014-02-06 14:46:34 -0500] flaccid: you don't raise in templates
[2014-02-06 14:46:53 -0500] workmad3: flaccid: yes you do... because it's if a new variable is introduced *into the template* without it being set externally that the raise needs to happen
[2014-02-06 14:47:18 -0500] flaccid: workmad3: you raise it in compile time in the recipe or provider because the node attribute has no value and its required
[2014-02-06 14:47:42 -0500] workmad3: flaccid: yes, but without rendering the template, it's not known if the variable is required
[2014-02-06 14:47:52 -0500] workmad3: flaccid: because the template in this case is being modified outside the recipe
[2014-02-06 14:47:56 -0500] flaccid: workmad3: yes it is
[2014-02-06 14:48:10 -0500] flaccid: workmad3: no the template file is simply from a different location, its irrelevent
[2014-02-06 14:48:29 -0500] lewiz: flaccid: I think workmad3 is correct.  the template file gets pulled via deploy so is not present at compile time
[2014-02-06 14:48:36 -0500] workmad3: flaccid: no, the point is that a developer could introduce a new variable into the template (that being the only thing they're editing)
[2014-02-06 14:48:51 -0500] workmad3: flaccid: so the only place a record of what variables the template 'requires' is within the template
[2014-02-06 14:49:11 -0500] lewiz: workmad3: ah!  now I understand
[2014-02-06 14:49:17 -0500] flaccid: lewiz: you did not mention that
[2014-02-06 14:49:28 -0500] workmad3: flaccid: yeah, he kinda did... just not very well ;)
[2014-02-06 14:49:46 -0500] lewiz: flaccid: sorry, I didn't explain it very concisely.  not quite sure how workmad3 figured it out so well!
[2014-02-06 14:50:00 -0500] workmad3: lewiz: 5+ years of helping newbies in #rubyonrails :P
[2014-02-06 14:50:04 -0500] flaccid: yeah quite poorly, i thought the template .erb as he said was from a different source.
[2014-02-06 14:51:15 -0500] flaccid: quite naturually when we talk about templates here, its the template resource in chef runs contained in cookbooks.
[2014-02-06 14:51:29 -0500] workmad3: yeah, it's an unusual use-case :)
[2014-02-06 14:51:43 -0500] flaccid: which is why its important to provide detailed specifics
[2014-02-06 14:51:51 -0500] workmad3: trying to think how you could do it so that the entire node is available....
[2014-02-06 14:51:59 -0500] flaccid: alas if the problem is now solved we all win
[2014-02-06 14:54:07 -0500] sarkis: so what's the recommended orchestration tool for chef users/
[2014-02-06 14:54:34 -0500] sarkis: i.e. do something to all boxes that match a certain criteria
[2014-02-06 14:54:45 -0500] lewiz: workmad3: I'm gonna have a go at building this template you're suggesting.  It's exactly what I'm after but I suspect I may screw it up :)
[2014-02-06 14:55:24 -0500] workmad3: lewiz: I'm trying to figure out how you'd be able to essentially 'wrap' the node with that default_proc so that all node attributes are available (and any missing ones are flagged)
[2014-02-06 14:56:00 -0500] lewiz: ah, so the same but without the requirement for manually defining template_options hash?
[2014-02-06 14:56:29 -0500] lewiz: workmad3: sorry, meant to prefix your name there
[2014-02-06 14:59:09 -0500] lewiz: workmad3: on second thoughts I don't think it would allow that
[2014-02-06 15:02:49 -0500] fveillette: does anyone here can help me with windows_task provider?
[2014-02-06 15:05:54 -0500] workmad3: lewiz: hmm... no can't figure it out atm, sorry
[2014-02-06 15:06:53 -0500] lewiz: workmad3: no worries... thanks for your help.  I'm still trying to get your suggestion up and running (keep getting interrupted) :)
[2014-02-06 15:07:33 -0500] workmad3: hehe
[2014-02-06 15:07:50 -0500] qurve: If in a deploy resource's after_restart hook, I need to just wait for a few seconds, it is as simple as simply using ruby's sleep?
[2014-02-06 15:08:35 -0500] qurve: My problem is that I need to configure rsyslog with an unknown number of log files that won't necessarily exist until a short period of time after the restart command has executed.
[2014-02-06 15:08:56 -0500] qurve: If I do it right away, listing the contents of the log directory will be empty in most cases, so no logfiles get registered in for being watched.
[2014-02-06 15:09:36 -0500] workmad3: qurve: is it the entire contents of the directory?
[2014-02-06 15:10:00 -0500] workmad3: oh wait, I'm thinking logrotate rules...
[2014-02-06 15:10:09 -0500] qurve: Yeah, the problem is that rsyslog can't take wildcards.
[2014-02-06 15:10:21 -0500] qurve: So if I want it to watch files (and pipe them to papertrail) I need to know the exact filenames.
[2014-02-06 15:10:38 -0500] qurve: But the filenames are foreman filenames (proc-N.log, otherproc-N.log) etc.
[2014-02-06 15:10:54 -0500] qurve: So I don't technically know what they are until the usptart service has (re)started the appropriate foreman processes.
[2014-02-06 15:11:52 -0500] qurve: As of now, there seems to be a delay between when the deploy resource executes the command to restart the service and when it actually writes the files to the disk, with no delay it's hit or miss which ones get written out by the time I Dir[].
[2014-02-06 15:12:18 -0500] fveillette: i can't have a windows task created with native system account in windows server.... why
[2014-02-06 15:15:55 -0500] qurve: Are there any better altneratives to rsyslog? I'm using Ubuntu 12.04.
[2014-02-06 15:16:02 -0500] qurve: I've never really bothered to use syslog stuff before.
[2014-02-06 15:27:43 -0500] workmad3: qurve: I haven't found anything yet... I currently have a setup where my servers use rsyslog-relp to forward (over TLS) to a central logging server, which then dumps out the logs into a unified file... that file is then processed by logstash before being forwarded via GELF to a graylog2 interface
[2014-02-06 15:28:08 -0500] qurve: Sounds rad, I am just shooting my logs directly to papertrail.
[2014-02-06 15:28:17 -0500] qurve: Everything is working 100% except this one problem.
[2014-02-06 15:28:52 -0500] qurve: I am running a test now to see if putting this code in a ruby_block will work.
[2014-02-06 15:29:16 -0500] qurve: Yep, that did it.
[2014-02-06 15:29:34 -0500] qurve: I'll test it a few times to make sure it wasn't a fluke.
[2014-02-06 15:29:59 -0500] qurve: Treating this process of looking for the files and then configuring as a resource itself seems to be the way.
[2014-02-06 15:31:28 -0500] workmad3: yeah... the other option would be to do something like wrap a custom resource provider around the Procfile that, on being run, parses out the process types in the Procfile and exposes them on the resource so you could then use that to build the rsyslog config rather than waiting for the log files to exist
[2014-02-06 15:37:27 -0500] davsharyan33: hi guys, one of the community cookbook use chef_gem to install a package and chef_gem always runs the first one in the list ( http://docs.opscode.com/resource_chef_gem.html ). I have a recipe which MUST be run before that, is there a way to run my recipe first w/o changing community cookbook ? thanks
[2014-02-06 15:40:54 -0500] qurve: workmad3: Also a good idea, I already have a definition for the Procfile, it could be turned into a resource itself.
[2014-02-06 15:50:33 -0500] kraM: Hi there. Uploading a cookbook with `knife cookbook upload -E experimental foo'... foo is available to the server in version 1.0. Upload would be in version 1.2. A node in _default environment... Will it get foo 1.0 or foo 1.2?
[2014-02-06 15:53:11 -0500] kraM: knife cookbook upload -E experimental foo; knife cookbook show foo -> foo 1.2   1.0
[2014-02-06 15:53:33 -0500] kraM: I'm affraid a node in _default environment will get the updated pretty much untested cookbook.
[2014-02-06 15:55:13 -0500] qurve: Rad, pgp keyserver is down apparently.
[2014-02-06 15:59:33 -0500] qurve: Nothing is more frustrating when you're just trying to make something work and something else breaks :|
[2014-02-06 16:09:37 -0500] mkirk_sysop: hi, what's the best way to trigger a resource to run before another. Say I want to stop a service before installing a file
[2014-02-06 16:09:52 -0500] qurve: notifications/subscriptions
[2014-02-06 16:10:11 -0500] qurve: http://docs.opscode.com/chef/resources.html#notifications
[2014-02-06 16:10:15 -0500] qurve: That's one way at least.
[2014-02-06 16:10:29 -0500] mkirk_sysop: but notifiers and subscriptions even when run immediately run after the file is installed
[2014-02-06 16:10:41 -0500] mkirk_sysop: I want to stop the service first before installing the file
[2014-02-06 16:11:19 -0500] qurve: Have the file resource subscribe to the service's stop action?
[2014-02-06 16:21:30 -0500] shlant: anyone using apache 2.4 w/chef?
[2014-02-06 16:22:37 -0500] kbarry: I'm looking for help with powershell_script
[2014-02-06 16:23:03 -0500] kbarry: namely, how the "flags" syntax is to look, and also, what credentials its executed with?
[2014-02-06 16:23:40 -0500] kbarry: I suspect, from the docs, that the code is packed into a file, transferred to the client, and passed in to powershell.exe, with a number of flags,
[2014-02-06 16:24:20 -0500] kbarry: My powershell isnt working, and i can't get anything from adding the debug flag,
[2014-02-06 16:24:43 -0500] kbarry: well, part of my powershell is working, and part is not
[2014-02-06 16:25:06 -0500] kbarry: trying to get tot he root of the problem but its terribly hard to troubleshoot
[2014-02-06 16:53:53 -0500] kraM: To answer myself: I was right :/
[2014-02-06 17:05:02 -0500] kbarry: Any in here?
[2014-02-06 17:05:14 -0500] kbarry: I have found a very interesting, and frustrating problem,
[2014-02-06 17:05:34 -0500] kbarry: %q{"\\remoteserver.com\'$e'\folder"}
[2014-02-06 17:05:39 -0500] kbarry: is turning into
[2014-02-06 17:05:45 -0500] sarkis: ofcourse there are people here why not just ask your question
[2014-02-06 17:05:50 -0500] kbarry: c:\remoteserver.com\$e\folder
[2014-02-06 17:06:18 -0500] kbarry: what am I doing wrong?
[2014-02-06 17:06:43 -0500] kbarry: I thought %q{} wouldnt change anything inside the curly brace
[2014-02-06 17:07:10 -0500] kbarry: is there something special about ruby that is making it turn \\ into c:\ ?
[2014-02-06 17:08:18 -0500] kbarry: Also, id like to preserve a copy of the .ps1 thats generated on the client when a powershell_script is part of a recipe
[2014-02-06 17:58:30 -0500] phutchins: Hey, anyone seen the "undefined method response for errno::econnreset" for a chef-client run?
[2014-02-06 17:58:47 -0500] phutchins: I'm getting it every time i run chef-client on a fresh node against my chef-server
[2014-02-06 17:59:00 -0500] phutchins: Looks like the same thing as this: https://tickets.opscode.com/browse/CHEF-4099?page=com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel
[2014-02-06 18:16:05 -0500] dgarstang2: boy.... anyone here using kitchen-openstack?
[2014-02-06 18:26:50 -0500] daxroc: Morning all
[2014-02-06 18:27:01 -0500] daxroc: Anyone use the chef-rvm cookbook?
[2014-02-06 18:30:03 -0500] daxroc: When using the user recipe I get an issue with ruby missing libyaml support and psych but the system does have this library installed. Using ruby-1.9.3p484 rvm 1.25.17
[2014-02-06 18:33:39 -0500] dgarstang2: well I just don't know what's going on. :(
[2014-02-06 18:43:44 -0500] ianco: dudes/dudettes, im spacing out on a common word at an inopportune time
[2014-02-06 18:43:45 -0500] ianco: chef runs should be __, in that they dont continuously and unpredictably change system state
[2014-02-06 18:43:58 -0500] ianco: help a space cadet out :)
[2014-02-06 18:44:22 -0500] ianco: idempotent
[2014-02-06 18:44:28 -0500] ianco: thanks anyway :)
[2014-02-06 18:49:49 -0500] dgarstang2: anyone here using kitchen-openstack?
[2014-02-06 18:54:13 -0500] dgarstang2: This is terrible. The format of the kitchen.yml is different everywhere I look
[2014-02-06 18:56:47 -0500] dgarstang2: Where does driver_config go? One place has it at the top level, and others have it below platforms
[2014-02-06 19:09:13 -0500] kbarry: how do i change the flags in powershell_script
[2014-02-06 19:09:20 -0500] kbarry: I can't find an example of the syntax.
[2014-02-06 19:09:45 -0500] dgarstang2: anyone here using kitchen-openstack?
[2014-02-06 19:10:23 -0500] mhulan: how can I change default attributes when runing chef-server-ctl reconfigure? I want to disable nginx for chef server
[2014-02-06 19:16:57 -0500] mhulan: ah it loads /etc/chef-server/chef-server.rb
[2014-02-06 19:39:50 -0500] shlant: so I don''t suppose there's a way to live in the future and only stop a service (immediately) if a file changes and before the file is changed?
[2014-02-06 20:02:32 -0500] shlant: anyone know if it's possible to notify a .each block? As in only notify once if any of the .each is executed
[2014-02-06 20:02:49 -0500] shlant: right now it notifies for every .each instance
[2014-02-06 20:02:59 -0500] shlant: just flag it?
[2014-02-06 20:34:39 -0500] phutchins: Hey, anyone seen the "undefined method response for errno::econnreset" for a chef-client run?
[2014-02-06 20:35:03 -0500] phutchins: i've tried downgrading chef-server to 11.08 from 11.0.10 but no dice
[2014-02-06 20:46:42 -0500] wdilly: Can i have an if else statment in a resource (link) that goes something like this: http://fpaste.org/75095/17195471/
[2014-02-06 20:47:26 -0500] scalp42: wdilly sure
[2014-02-06 20:47:36 -0500] wdilly: jiggy
[2014-02-06 20:47:43 -0500] scalp42: if im not mistaken
[2014-02-06 20:50:12 -0500] scalp42: curious if this works wdilly  https://gist.github.com/scalp42/6f1c8430bf56dfba4617
[2014-02-06 20:52:56 -0500] pcn: ohai chefs.  Is there a way to use the runit cookbook so that I can declare the resource so that the service dir is created, etc. but the service isn't started until/unless notified?
[2014-02-06 20:58:10 -0500] wdilly: scalp42, i will run some tests and get back to oyu
[2014-02-06 20:58:14 -0500] wdilly: thanks
[2014-02-06 20:58:17 -0500] scalp42: np
[2014-02-06 20:58:59 -0500] scalp42: also heads up but you can remove the link_type
[2014-02-06 20:59:03 -0500] scalp42: its symbolic by default
[2014-02-06 21:00:36 -0500] wdilly: i like to specify nonetheless, for other people reading the code to see whats happening
[2014-02-06 21:01:32 -0500] scalp42: agreed.
[2014-02-06 21:04:03 -0500] dgarstang2: kitchen... i can't get attributes from roles can I instead of the attributes in the kitchen.yml file?
[2014-02-06 21:09:36 -0500] dgarstang2: put another way... what advantage does kitchen have over vagrant?
[2014-02-06 21:58:34 -0500] wdilly: on this code: (   %w[ root ubuntu sgeadmin ].each do |LOCALUSER|     ) I get the error  "formal argument cannot be a constant" what am i doing wrong?
[2014-02-06 21:59:09 -0500] scalp42: replace LOCALUSER by localuser
[2014-02-06 21:59:24 -0500] wdilly: is all caps something special in ruby?
[2014-02-06 21:59:38 -0500] scalp42: yes its a constant
[2014-02-06 21:59:47 -0500] wdilly: i see.
[2014-02-06 21:59:53 -0500] wdilly: would LocalUser work?
[2014-02-06 21:59:58 -0500] wdilly: is it just all caps?
[2014-02-06 21:59:59 -0500] scalp42: will lead to funky errors on a loop
[2014-02-06 22:00:04 -0500] scalp42: yeah will work
[2014-02-06 22:00:12 -0500] wdilly: thanks
[2014-02-06 22:00:15 -0500] scalp42: np
[2014-02-06 22:26:55 -0500] scalp42: wdilly all good?
[2014-02-06 22:36:36 -0500] dgarstang2: kitchen... i can't get attributes from roles can I instead of the attributes in the kitchen.yml file?
[2014-02-06 22:41:17 -0500] shadynastys: exit
[2014-02-06 22:53:03 -0500] coderanger: dgarstang2: Set a roles path and it should work, not used by many people though and almost certainly means you are structuring things wrong
[2014-02-06 23:29:52 -0500] tvkiley: Hey, I just updated to chef-client 11.10 and I'm getting this in a simple recipe with one directory and one file resource declared:
[2014-02-06 23:29:56 -0500] tvkiley: No resource or method named `file' for `Chef::Recipe "default"'
[2014-02-06 23:30:52 -0500] tvkiley: Downgrading to 11.8.2 makes the error go away, interestingly
[2014-02-06 23:31:22 -0500] btm_: tvkiley: can you provide a gist of your recipe?
[2014-02-06 23:33:13 -0500] tvkiley: btm_: sec, gisting
[2014-02-06 23:35:38 -0500] tvkiley: wow. Apparently, I can't reproduce the error - I upgraded, then downgraded, then upgraded again and now the broken recipe works.
[2014-02-06 23:36:26 -0500] btm_: tvkiley: well, that's better than there being a major bug in the release. ;)
[2014-02-06 23:45:37 -0500] jmickle: anyone know if its possible to use knife format with knife ec2 server list?
[2014-02-06 23:50:29 -0500] dgarstang2: installing foodcritic... "checking for libxml/parser.h... no"

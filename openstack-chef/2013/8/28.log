[2013-08-28 17:41:23 -0400] ctracey: do others here have issues with berkshelf not updating properly?
[2013-08-28 17:41:55 -0400] ctracey: i can take a look at the code, but it seems there is a use case where upstream has changed and it wont pull any new commits
[2013-08-28 17:42:07 -0400] ctracey: just an annoyance more than anything
[2013-08-28 18:41:55 -0400] ctracey: so the glance LWRP seems pretty borked for AMIs
[2013-08-28 18:44:44 -0400] ctracey: thinkin it probably needs a wholesale rewrite
[2013-08-28 18:52:09 -0400] alop: ctracey: Yeah
[2013-08-28 18:52:29 -0400] alop: I constantly have to first remove a cookbook using knife, as berks won't update it
[2013-08-28 18:53:17 -0400] alop: ctracey: also, I'm so over using chef to add glance images
[2013-08-28 18:54:22 -0400] ctracey: alop: whys that?
[2013-08-28 18:54:33 -0400] ctracey: just bc its broken?
[2013-08-28 18:54:42 -0400] alop: first, there was this odd duplication problem we dealt with
[2013-08-28 18:54:44 -0400] alop: then
[2013-08-28 18:54:58 -0400] ctracey: well its not idempotent
[2013-08-28 18:55:06 -0400] alop: right
[2013-08-28 18:55:08 -0400] ctracey: which is kinda silly
[2013-08-28 18:55:13 -0400] alop: it just adds a new ID
[2013-08-28 18:55:14 -0400] ctracey: i can fix that
[2013-08-28 18:55:17 -0400] alop: and I think we can add that
[2013-08-28 18:55:26 -0400] alop: we should generate a new UUID in the lwrp
[2013-08-28 18:55:31 -0400] alop: and use that for a key
[2013-08-28 18:55:35 -0400] alop: instead of the name
[2013-08-28 18:55:43 -0400] ctracey: and can we make a new rule? no bash in a lwrp? :)
[2013-08-28 18:55:54 -0400] alop: that wasn't me :)
[2013-08-28 18:55:56 -0400] ctracey: i was gonna just check the csum
[2013-08-28 18:56:00 -0400] ctracey: i know
[2013-08-28 18:56:01 -0400] alop: ok
[2013-08-28 18:56:08 -0400] alop: hey, while we're on the subject
[2013-08-28 18:56:18 -0400] alop: could you look at my prefetch review?
[2013-08-28 18:56:23 -0400] ctracey: yessir
[2013-08-28 18:56:42 -0400] alop: it doesn't do anything yet, but I want it to be available for users using wrapper scripts
[2013-08-28 18:57:12 -0400] alop: https://review.openstack.org/#/c/43320/
[2013-08-28 18:57:53 -0400] ctracey: ok - as long as its not doing much mind if i try to refactor this into a wholesale change?
[2013-08-28 18:58:11 -0400] ctracey: reason i say this...
[2013-08-28 18:58:31 -0400] ctracey: there are a bunch of problems already with this code...including deprecated options
[2013-08-28 18:59:17 -0400] alop: retr0h was telling me he hates that it looks like ruby written by python guys
[2013-08-28 18:59:48 -0400] ctracey: hah
[2013-08-28 19:00:02 -0400] alop: hehe
[2013-08-28 19:00:50 -0400] ctracey: aint been much of a rubist, but i at least attempt to adhere to the unspoken rules
[2013-08-28 19:01:21 -0400] alop: I bet we could rewrite the bash sections using mixlib
[2013-08-28 19:01:37 -0400] alop: like what I did on like 88 of my change
[2013-08-28 19:02:25 -0400] ctracey: yeah...was gonna do it like i did baremetal and identity lwrps
[2013-08-28 19:03:04 -0400] ctracey: and I was gonna allow you to upload discrete pieces...for instance in the case of an AMI
[2013-08-28 19:03:29 -0400] ctracey: assuming that folks dont allow duplicate names in their glance registries
[2013-08-28 19:04:10 -0400] ctracey: so, upload initrd, upload kernel, then for ami upload the AMI, and call out the kernel and initrd by name
[2013-08-28 19:04:21 -0400] ctracey: i think that is a safe enough use case
[2013-08-28 19:04:42 -0400] ctracey: wont support those weird envs where people have duplicate image names
[2013-08-28 19:05:05 -0400] ctracey: but this is software and we can express our opinions in ruby :)
[2013-08-28 19:05:16 -0400] alop: that's only accidentally in our case
[2013-08-28 19:08:13 -0400] ctracey: i would hope that is accidental in most cases
[2013-08-28 19:08:26 -0400] ctracey: though what's in a name? :)
[2013-08-28 19:08:47 -0400] alop: it's just a PITA, as it makes the list long
[2013-08-28 19:08:58 -0400] ctracey: yep
[2013-08-28 19:09:26 -0400] ctracey: doing it this way is probably more felxible with less code anyway
[2013-08-28 19:09:39 -0400] alop: I'd love to see it
[2013-08-28 19:09:55 -0400] ctracey: just starting, but it sholdnt take too long
[2013-08-28 19:10:00 -0400] ctracey: the tests will be ugly

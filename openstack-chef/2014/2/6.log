[2014-02-06 08:16:38 -0500] nacer_: morning
[2014-02-06 08:34:07 -0500] openstackgerrit: Nacer Laradji proposed a change to stackforge/cookbook-openstack-dashboard: Fix dashboard login errors  https://review.openstack.org/68446
[2014-02-06 08:37:24 -0500] nacer_: finally, i did understand a little about gerrit
[2014-02-06 08:38:03 -0500] nacer_: must have -> https://wiki.openstack.org/wiki/Gerrit_Workflow
[2014-02-06 09:00:09 -0500] srenatus: any opinions regarding ceph and how integrate a deployment with openstack-chef, please chip in: https://review.openstack.org/#/c/69368/
[2014-02-06 09:00:23 -0500] srenatus: (masteinhauser: referred to you there, hope you dont mind.)
[2014-02-06 09:11:50 -0500] srenatus: my comment made jenkins start... so I'm actually referring to mattray's last comment and asking for more opinions on this...
[2014-02-06 09:15:47 -0500] nacer_: srenatus: it seem i can't have the ceph cookbook running on my nova node with your patch
[2014-02-06 09:16:07 -0500] nacer_: srenatus: if i want to have the ceph-osd or ceph-mon on the same node
[2014-02-06 09:23:39 -0500] srenatus: nacer_: yes you probably cannot do that.  my assumption was that you'd not share nodes that way.
[2014-02-06 09:25:38 -0500] nacer_: srenatus: maybe your work on setting up the ceph client should be in the ceph cookbook
[2014-02-06 09:25:52 -0500] nacer_: srenatus: i know that the ceph cookbook don't have a ceph client recipe
[2014-02-06 09:29:55 -0500] srenatus: nacer_: actually, what would be needed from the ceph cookbook is repo and conf (and creating users/permissions); however, if you haven't setup your ceph cluster with this ceph-cookbook, the ceph::conf recipe won't work for you.  And I'm reluctant to assume that everyone uses this ceph cookbook to deploy their cluster
[2014-02-06 09:34:03 -0500] nacer_: srenatus: you can only use the ceph cookbook to setup your client if you want
[2014-02-06 09:34:37 -0500] nacer_: srenatus: i mean if you put your patch to setup ceph client in the ceph cookbook
[2014-02-06 09:39:23 -0500] nacer_: srenatus: conf recipe in ceph cookbook is a sufficient setup for a nova/cinder node  ?
[2014-02-06 09:39:30 -0500] srenatus: nacer_: I don't follow... if your chef server is shared between the ceph cluster and the openstack cluster, all you need is to include_recipe ceph::conf and ceph::repo, and then package 'ceph-common'.
[2014-02-06 09:40:12 -0500] srenatus: nacer_: However, if you chef server has not been used to set up the ceph cluster, the ceph::conf recipe won't work for you.  the "get_mon..." methods will fail
[2014-02-06 09:40:20 -0500] srenatus: s/you/your/
[2014-02-06 09:45:21 -0500] nacer_: srenatus: ok so no conflict this wayt
[2014-02-06 09:46:50 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-common: Upgrade/Update rubocop  https://review.openstack.org/71089
[2014-02-06 10:06:10 -0500] openstackgerrit: A change was merged to stackforge/openstack-chef-repo: Support v3 of yum cookbook  https://review.openstack.org/70788
[2014-02-06 10:09:36 -0500] openstackgerrit: Stephan Renatus proposed a change to stackforge/cookbook-openstack-block-storage: Ceph RBD integration for openstack-block-storage  https://review.openstack.org/70332
[2014-02-06 10:35:01 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-dashboard: Upgrade/Update rubocop  https://review.openstack.org/71069
[2014-02-06 10:36:16 -0500] openstackgerrit: Ionut Artarisi proposed a change to stackforge/cookbook-openstack-common: add SUSE tests for adding repositories and repo keys  https://review.openstack.org/71482
[2014-02-06 10:44:33 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-identity: Upgrade/Update rubocop  https://review.openstack.org/71076
[2014-02-06 10:46:15 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-block-storage: Upgrade/Update rubocop  https://review.openstack.org/71090
[2014-02-06 10:47:43 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-network: Upgrade/Update rubocop  https://review.openstack.org/71080
[2014-02-06 10:51:08 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-block-storage: Updates cinder-group-active script to work on Ubuntu  https://review.openstack.org/70057
[2014-02-06 11:02:05 -0500] masteinhauser: srenatus: no worries, my thoughts on that still stand and loosely coupled is usually the better way to go.
[2014-02-06 11:11:40 -0500] openstackgerrit: Ionut Artarisi proposed a change to stackforge/cookbook-openstack-common: add SUSE tests for adding repositories and repo keys  https://review.openstack.org/71482
[2014-02-06 11:12:10 -0500] srenatus: hm I'm struggling with the dichotomy of endpoint vs. "where the service shound bind to" right now... any thoughts or prior art on this?
[2014-02-06 11:14:49 -0500] srenatus: https://groups.google.com/forum/#!msg/opscode-chef-openstack/zAMzC4Bkf-c/w3Pu-7uxqU8J this is a starting point, I guess.
[2014-02-06 11:24:51 -0500] openstackgerrit: Ionut Artarisi proposed a change to stackforge/cookbook-openstack-compute: rename tests for SLES instead of openSUSE  https://review.openstack.org/71492
[2014-02-06 13:45:56 -0500] Guest63118: how i integrate ceph with openstack rdo
[2014-02-06 13:46:52 -0500] Guest63118: can any one help me?
[2014-02-06 13:51:53 -0500] mancdaz: hi Guest63118. You might want to ask in one of the openstack channels
[2014-02-06 13:52:45 -0500] mancdaz: this channel is for discussing the implementation of the chef cookbooks for deploying openstack
[2014-02-06 15:27:32 -0500] openstackgerrit: Nacer Laradji proposed a change to stackforge/cookbook-openstack-dashboard: Fix dashboard login errors  https://review.openstack.org/68446
[2014-02-06 15:36:51 -0500] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Add client recipe for compute  https://review.openstack.org/71386
[2014-02-06 15:49:52 -0500] nacer: ionut are you there ?
[2014-02-06 15:50:02 -0500] nacer: *here ?
[2014-02-06 15:51:19 -0500] iartarisi: nacer: hey
[2014-02-06 15:51:58 -0500] nacer: you want me to test the full line ALLOWED_HOSTS = ['dashboard.example.net']
[2014-02-06 15:52:00 -0500] nacer: right ?
[2014-02-06 15:52:15 -0500] iartarisi: nacer: right
[2014-02-06 15:52:46 -0500] nacer: okay, i have to delete the older test too, i have miss this one
[2014-02-06 15:52:49 -0500] nacer: line 108
[2014-02-06 15:52:54 -0500] iartarisi: it's also good to make sure it's not commented out
[2014-02-06 15:54:44 -0500] iartarisi: nacer: that one looks good though, isn't it?
[2014-02-06 15:55:22 -0500] iartarisi: would be nice to have it be /^ALLOWED_HOSTS = ["*"]/ instead of 'ALLOWED_HOSTS = ["*"]', but otherwise it looks fine
[2014-02-06 15:55:40 -0500] nacer: iartarisi: yeah why not , it test the default value
[2014-02-06 15:56:11 -0500] nacer: iartarisi: i'm not good with regexp what does it mean /^ /
[2014-02-06 15:56:26 -0500] nacer: forget it i google it
[2014-02-06 15:56:44 -0500] iartarisi: it tests that the string is at the start of the line
[2014-02-06 15:57:11 -0500] iartarisi: the way it is now, that line could be commented and the test would still pass
[2014-02-06 15:57:34 -0500] nacer: ok let's add that
[2014-02-06 15:58:51 -0500] nacer: still i'm not sure if i can directly do that -> expect(chef_run).to render_file(file.name).with_content('/^ALLOWED_HOSTS = ["dashboard.example.net"]/')
[2014-02-06 15:59:11 -0500] iartarisi: it should work without the single quotes
[2014-02-06 15:59:19 -0500] nacer: ok
[2014-02-06 15:59:46 -0500] iartarisi: ah, and you need to escape the block quotes
[2014-02-06 16:00:04 -0500] iartarisi: /^ALLOWED_HOSTS = \["dashboard.example.net"\]/
[2014-02-06 16:00:21 -0500] nacer: expect(chef_run).to render_file(file.name).with_content(/^ALLOWED_HOSTS = [\"dashboard.example.net\"]/)
[2014-02-06 16:00:24 -0500] nacer: good ?
[2014-02-06 16:04:16 -0500] iartarisi: nacer: no, escape the square brackets, not the double quotes, like in my example
[2014-02-06 16:04:37 -0500] iartarisi: sorry, I shouldn't have said block quotes above, but square brackets
[2014-02-06 16:04:53 -0500] nacer: expect(chef_run).to render_file(file.name).with_content(/^ALLOWED_HOSTS = \["dashboard.example.net"\]/)
[2014-02-06 16:08:15 -0500] openstackgerrit: Nacer Laradji proposed a change to stackforge/cookbook-openstack-dashboard: Fix dashboard login errors  https://review.openstack.org/68446
[2014-02-06 16:10:08 -0500] iartarisi: I think you need to escape the * in the second example :)
[2014-02-06 16:10:26 -0500] iartarisi: ah, and the dots in the first
[2014-02-06 16:10:38 -0500] iartarisi: note to self: composing regexp on IRC is not a good idea
[2014-02-06 16:18:12 -0500] nacer: :)
[2014-02-06 16:18:36 -0500] nacer: iartarisi: do you run the test on your workstation ?
[2014-02-06 16:19:10 -0500] nacer: They is a document that explain how to run the locally ?
[2014-02-06 16:19:20 -0500] nacer: *run the test
[2014-02-06 16:22:13 -0500] iartarisi: nacer: you can just:
[2014-02-06 16:22:14 -0500] iartarisi: $ bundle install
[2014-02-06 16:22:14 -0500] iartarisi: $ bundle exec rspec spec/your_spec_file.rb
[2014-02-06 16:22:21 -0500] nacer: tks
[2014-02-06 16:33:06 -0500] openstackgerrit: Nacer Laradji proposed a change to stackforge/cookbook-openstack-dashboard: Fix dashboard login errors  https://review.openstack.org/68446
[2014-02-06 16:39:11 -0500] nacer: hi mattray
[2014-02-06 16:39:25 -0500] mattray: nacer: greetings
[2014-02-06 16:59:18 -0500] openstackgerrit: Ionut Artarisi proposed a change to stackforge/cookbook-openstack-common: add SUSE tests for adding repositories and repo keys  https://review.openstack.org/71482
[2014-02-06 17:01:16 -0500] openstackgerrit: Stephan Renatus proposed a change to stackforge/cookbook-openstack-compute: Make nova-compute-{kvm,qemu} packages overridable  https://review.openstack.org/70161
[2014-02-06 19:26:47 -0500] lrr: anyone around to help me debug why in a ubuntu vagrant i cannot access the dashboard page?
[2014-02-06 19:45:05 -0500] invsblduck: galstrom: you around?
[2014-02-06 20:00:49 -0500] lrr: this is the error i'm getting while trying to load the horizon dashboard page: http://pastebin.osuosl.org/5441/
[2014-02-06 20:10:36 -0500] mattray: lrr: possibly this? https://review.openstack.org/#/c/68446/
[2014-02-06 20:27:15 -0500] openstackgerrit: A change was merged to stackforge/openstack-chef-repo: Add vagrantfile/environment for a working vagrant all-in-one using nova-network  https://review.openstack.org/69385
[2014-02-06 20:29:27 -0500] invsblduck: mattray: so Ionut didn't want me to test template values by setting the node attribute to 'foo' and ensuring that 'foo' shows up the way we expect it to (eg., driver = keystone.catalog.backends.foo.Catalog);
[2014-02-06 20:30:18 -0500] invsblduck: mattray: he wants me to test real values to make sure we have sane defaults i suppose
[2014-02-06 20:31:04 -0500] mattray: ok
[2014-02-06 20:31:26 -0500] invsblduck: mattray: so in the case of 50 LDAP attributes in keystone.conf - which right now is looping over each one and setting it to "blah" or whatever - how should i approach checking the default values?  in the spirit of DRY
[2014-02-06 20:31:27 -0500] mattray: I guess to imply you know what the "right" values should be?
[2014-02-06 20:31:49 -0500] mattray: or else you're just testing Chef
[2014-02-06 20:32:10 -0500] invsblduck: yeah, i don't want to hardcode all the default values in the spec file (which are already defined in the attributes file)
[2014-02-06 20:33:00 -0500] invsblduck: in my mind, i was testing that the *templating mechanism* is working, ie. what the user configured is what is being set according to the logic inside the template
[2014-02-06 20:33:47 -0500] mattray: not specifically the templating mechanism, but the actual rendered template.
[2014-02-06 20:34:01 -0500] invsblduck: mattray: that's what i meant, sorry.
[2014-02-06 20:34:04 -0500] mattray: so there are 50ish attributes?
[2014-02-06 20:35:00 -0500] invsblduck: well if you look at L290, here are some of them: https://review.openstack.org/#/c/71057/1/spec/server_spec.rb
[2014-02-06 20:35:28 -0500] invsblduck: mattray: in this case, those are not checking actual values, just that any word is there.
[2014-02-06 20:38:33 -0500] invsblduck: mattray: L273 is an example of looping and setting them to "foo", which is kind of pointless, but you're ensuring the rendered template looks the way you expect when you configure the tunable
[2014-02-06 20:38:48 -0500] mattray: yeah, that's what I'm looking at
[2014-02-06 20:39:28 -0500] mattray: what if you had a hash of the required attributes as keys and default values? That would be relatively small amounts of code
[2014-02-06 20:40:19 -0500] mattray: I mean, essentially you loop over the keys and values and check, still seems excessive
[2014-02-06 20:40:25 -0500] mattray: but at least it's not "foo"?
[2014-02-06 20:40:26 -0500] invsblduck: mattray: yeah, that's basically the solution, i just wasn't sure how much we're trying to dry things up, or if anyone cares that i'm duplicating the defaults in the tests and not _tuning_ the actual knobs...
[2014-02-06 20:40:59 -0500] mattray: I'd modify the defaults, just to be pedantic
[2014-02-06 20:41:13 -0500] invsblduck: mattray: i guess that's why i'm asking your opinion :)
[2014-02-06 20:41:15 -0500] mattray: like add "TEST" on the end
[2014-02-06 20:41:28 -0500] mattray: so at least we know it's not rendering the attribute defaults
[2014-02-06 20:41:37 -0500] invsblduck: Ionut mentioned he didn't care about checking arbitrary values
[2014-02-06 22:24:44 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-network: Explicitly set rpc_backend to kombu when using rabbitmq  https://review.openstack.org/70142
[2014-02-06 22:39:30 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-compute: rename tests for SLES instead of openSUSE  https://review.openstack.org/71492
[2014-02-06 22:59:28 -0500] mrodden: does anyone have any strong opinions on this?
[2014-02-06 22:59:33 -0500] mrodden: https://bugs.launchpad.net/openstack-chef/+bug/1277266
[2014-02-06 23:01:27 -0500] mrodden: i was just going to cookie cutter something like this commit https://github.com/stackforge/cookbook-openstack-image/commit/671c62d35b822306c101618cd5a350381564c87e#diff-25e5d4a4446ae12a0d6f1162b6160375 into identity
[2014-02-06 23:27:33 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-compute: Make nova-compute-{kvm,qemu} packages overridable  https://review.openstack.org/70161
[2014-02-06 23:27:34 -0500] mattray: mrodden: that seems good
[2014-02-06 23:28:06 -0500] mrodden: mattray: yeah i dont really feel strongly about it either way, but consistency is a good thing
[2014-02-06 23:29:57 -0500] mattray: yeah, I feel strongly about consistency
[2014-02-06 23:30:26 -0500] mattray: especially when the number of OpenStack projects continues to balloon. I'm a hobgoblin that way
[2014-02-06 23:30:51 -0500] mattray: http://www.bartleby.com/100/420.47.html
[2014-02-06 23:31:40 -0500] mrodden: heh
[2014-02-06 23:32:06 -0500] mrodden: http://www.python.org/dev/peps/pep-0008/#a-foolish-consistency-is-the-hobgoblin-of-little-minds
[2014-02-06 23:32:14 -0500] mrodden: written into pep8
[2014-02-06 23:32:59 -0500] mattray: I'm a fan, sometimes I miss Python
[2014-02-06 23:33:16 -0500] mattray: shared codes requires standards
[2014-02-06 23:33:25 -0500] mrodden: yeah i really like it
[2014-02-06 23:33:40 -0500] mrodden: was a huge java/C# guy before i started at my job 2 years ago
[2014-02-06 23:33:46 -0500] mrodden: then everything openstack is python
[2014-02-06 23:33:54 -0500] mrodden: so had to learn really quick
[2014-02-06 23:33:59 -0500] mattray: back in the day when I coded Java, there were epic battles on code formatters. I don't care as long as everyone uses the same one :)
[2014-02-06 23:34:18 -0500] mrodden: yeah i remember those days too...
[2014-02-06 23:34:42 -0500] mrodden: public void doThing() { vs public void doThing() /n{
[2014-02-06 23:34:52 -0500] mrodden: oops \n is newline
[2014-02-06 23:34:54 -0500] mattray: there were 2 managers who would make edits to the formatter rules behind each others' backs
[2014-02-06 23:35:06 -0500] mattray: talk about stupid wastes of time
[2014-02-06 23:35:12 -0500] mrodden: wow...
[2014-02-06 23:35:27 -0500] mrodden: all compiles to the same bytecode...
[2014-02-06 23:35:39 -0500] mattray: yeah somehow that job burned me out on Java :)
[2014-02-06 23:35:57 -0500] mrodden: heh
[2014-02-06 23:36:04 -0500] mrodden: IBM guys REALLY like Java
[2014-02-06 23:36:15 -0500] mrodden: its pretty much the goto language around here
[2014-02-06 23:36:34 -0500] mrodden: and there are a lot of instances of things that should never be written in Java that are
[2014-02-06 23:37:13 -0500] mrodden: if your JVM is normally floating around 22GB of memory that shouldn't be acceptable
[2014-02-06 23:38:14 -0500] mrodden: at least with python you can offload performance critical parts to C really easily
[2014-02-06 23:38:19 -0500] mrodden: well, CPython i guess
[2014-02-06 23:39:43 -0500] mrodden: anyways, one patch for identity cookbook coming up
[2014-02-06 23:41:33 -0500] mrodden: pretty sure i could never go back to Java, just because of the time i save not having to deal with a billion getBlah/setBlah methods
[2014-02-06 23:43:33 -0500] mrodden: is there any specific reason why attribute references are preferred to use the node['thing'] form vs node.thing ?
[2014-02-06 23:43:40 -0500] mrodden: never understood that
[2014-02-06 23:59:32 -0500] mrodden: hmm  openstack-identity/providers/register.rb:295:3: W: Avoid rescuing the Exception class.

[2014-07-08 03:28:33 -0400] openstackgerrit: Eric Zhou proposed a change to stackforge/cookbook-openstack-network: Allow namespaces to be removable.  https://review.openstack.org/104059
[2014-07-08 08:17:07 -0400] openstackgerrit: Ma Wen Cheng proposed a change to stackforge/cookbook-openstack-network: Add a SSL configuration option  https://review.openstack.org/105387
[2014-07-08 08:30:50 -0400] openstackgerrit: Jan Klare proposed a change to stackforge/cookbook-openstack-block-storage: added rootwrap.conf template like in cookbook-openstack-compute  https://review.openstack.org/104202
[2014-07-08 08:47:45 -0400] jklare: hi, i am currently getting 3 FAILURES from jenkins for my patchset, although i already had 3 SUCCESS and did only edit the CHANGELOG.md and metadata.rb. Looks like Jenkins has a Problem during berks install, anyone an idea?
[2014-07-08 09:05:16 -0400] jklare: i guess Ma Wen Cheng and me have the same issue
[2014-07-08 09:05:58 -0400] openstackgerrit: Ma Wen Cheng proposed a change to stackforge/cookbook-openstack-network: Add a SSL configuration option  https://review.openstack.org/105399
[2014-07-08 09:28:27 -0400] mattt: jklare: https://github.com/berkshelf/berkshelf/pull/1251 ?
[2014-07-08 09:29:03 -0400] mattt: looks like we need to stop using berkshelf 2.0
[2014-07-08 09:31:59 -0400] mattt: jklare: our problem stems here: https://github.com/stackforge/openstack-chef-repo/blob/master/Gemfile
[2014-07-08 09:32:05 -0400] mattt: we use gem "berkshelf", "~> 2.0.10"
[2014-07-08 09:43:50 -0400] jklare: mattt: so finally upgrading to 3 :)
[2014-07-08 09:46:04 -0400] jklare: is there something like a standard blueprint for gem upgarde to refere to?
[2014-07-08 09:47:37 -0400] mattt: jklare: not as far as i'm aware
[2014-07-08 09:47:49 -0400] jklare: so i should file a bug?
[2014-07-08 09:49:12 -0400] mattt: yep i'd create a bug personally
[2014-07-08 09:49:21 -0400] mattt: we could even upgrade to latest version of 2.x series since it's fixed there
[2014-07-08 09:49:34 -0400] mattt: not sure if there is any reason we shouldn't be using berkshelf 3 ?
[2014-07-08 10:08:26 -0400] jklare: mattt: https://bugs.launchpad.net/openstack-chef/+bug/1338972
[2014-07-08 10:11:14 -0400] jklare: i will wait for a response and then either propose a change with 2.X or 3.X i guess
[2014-07-08 10:12:38 -0400] mattt: jklare: i'd just propose a change
[2014-07-08 10:13:17 -0400] jklare: so you also see no reason not to jump to 3.1.3 ?
[2014-07-08 10:14:11 -0400] mattt: jklare: from the discussion in that github issue, it sounds like no one should be using 2.x any more :P
[2014-07-08 10:14:22 -0400] mattt: jklare: i guess we could ask matt ray, he is clued up about this stuff
[2014-07-08 10:14:35 -0400] mattt: jklare: the crap part is we'll have to bump berkshelf in all the Gemfiles (https://github.com/stackforge/cookbook-openstack-identity/blob/master/Gemfile#L5 for example)
[2014-07-08 10:20:18 -0400] jklare: mattt: i guess thats why these are not updated to often ;)
[2014-07-08 10:21:17 -0400] jklare: mattt: and we also have to include https://api.berkshelf.com in all the Berksfiles
[2014-07-08 10:22:29 -0400] andymccr: it doesn't seem tooooo bad: https://github.com/berkshelf/berkshelf/wiki/2.x-to-3.0-Upgrade-Guide
[2014-07-08 10:22:35 -0400] andymccr: but it will probably require a blueprint, and some coordination
[2014-07-08 10:28:08 -0400] mattt: jklare: i think i gave you bad information about not creating the BP :(
[2014-07-08 10:28:21 -0400] mattt: (i thougth we'd just have to bump it in the openstck-chef-repo repo)
[2014-07-08 10:28:31 -0400] jklare: mattt: np i am currently creating the bp
[2014-07-08 10:38:10 -0400] jklare: mattt: https://blueprints.launchpad.net/openstack-chef/+spec/update-berkshelf
[2014-07-08 11:23:12 -0400] mattt: jklare: looks like you need to set up a berkshelf API when using berkshelf 3 :(
[2014-07-08 13:09:49 -0400] openstackgerrit: Jan Klare proposed a change to stackforge/cookbook-openstack-block-storage: updated berkshelf  https://review.openstack.org/105444
[2014-07-08 13:11:40 -0400] openstackgerrit: Jan Klare proposed a change to stackforge/cookbook-openstack-block-storage: updated berkshelf  https://review.openstack.org/105444
[2014-07-08 13:40:30 -0400] openstackgerrit: Jan Klare proposed a change to stackforge/cookbook-openstack-block-storage: updated berkshelf  https://review.openstack.org/105444
[2014-07-08 14:51:57 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-network: Allow veth_mtu to be configured in openvswitch agent  https://review.openstack.org/97522
[2014-07-08 14:52:40 -0400] jklare: mattray: hi, you got a moment to help me with the proper way of upgrading to a newer berks version in all openstack-cookbooks? I already started with a bug report and a blueprint, but i guess there are more changes that need to be done, expecially in jenkins itself
[2014-07-08 14:54:02 -0400] mattray: hmmm this sounds like a good task for j^2 when he gets here
[2014-07-08 14:54:28 -0400] markvan: mattray: Any idea on what's happening with the "redirection forbidden"  in gate failures?  http://logs.openstack.org/62/105262/1/check/gate-cookbook-openstack-compute-chef-style/980a195/console.html
[2014-07-08 14:55:03 -0400] mattray: markvan: yeah, I think I do
[2014-07-08 14:55:04 -0400] markvan: I think you mentioned something opscode moving web sites, it that what's causing this?
[2014-07-08 14:55:11 -0400] jklare: markvan: thats why i want to upgrade
[2014-07-08 14:55:36 -0400] mattray: there are some issues with Berkshelf 2 not handling the Community->Supermarket upgrade
[2014-07-08 14:55:46 -0400] mattray: I think a redirect is broken
[2014-07-08 14:55:53 -0400] markvan: ah, that's sounds like fun
[2014-07-08 14:56:08 -0400] jklare: there was a patch yesterday i linked in the blueprint update-berkshelf
[2014-07-08 14:56:08 -0400] mattray: it may be fixed
[2014-07-08 14:57:55 -0400] markvan: so, anything I can help with?  or it's either get fix for berskshelf 2 or upgrade to 3.
[2014-07-08 14:59:02 -0400] mattray: I'm looking
[2014-07-08 15:03:44 -0400] mattray: markvan: jklare: I'm investigating with the folks running Supermarket, I'll let you know as soon as I have a clear answer. I thought this was fixed but obviously it's not
[2014-07-08 15:08:27 -0400] mattray: The word I got is to upgrade to berks 2.0.18
[2014-07-08 15:09:17 -0400] jklare: that would work, but is there a reason no to go to berks 3 ?
[2014-07-08 15:09:46 -0400] mattray: jklare: let's fix the 2.0.18 first, then upgrade to 3 in a separate move
[2014-07-08 15:09:50 -0400] mattray: seems safer
[2014-07-08 15:10:05 -0400] mattray: jklare: but yes, we should upgrade to 3
[2014-07-08 15:10:36 -0400] jklare: ok
[2014-07-08 15:14:14 -0400] jklare: but i guess we will run into dependencie issues anyways and i thought maybe just do it once
[2014-07-08 15:14:55 -0400] mattray: jklare: upgrading Berkshelf to 3 will need to change berksfiles too I think
[2014-07-08 15:15:18 -0400] jklare: mattray: just adding the source i guess
[2014-07-08 15:15:28 -0400] mattray: markvan: if you want to update https://review.openstack.org/#/c/105262/ to include the berks bump to 2.0.18 that should be a good test
[2014-07-08 15:15:45 -0400] markvan: k, I can do that
[2014-07-08 15:16:01 -0400] jklare: mattray: the bigger problem for me is the way of updating the Gemfile.lock
[2014-07-08 15:16:12 -0400] jklare: mattray: or would you just go with a fill bundle update?
[2014-07-08 15:16:21 -0400] jklare: ^^full
[2014-07-08 15:17:07 -0400] mattray: jklare: ugh. The lock files should only be in the stable branches, but yeah, we'd have to hit all of those too
[2014-07-08 15:17:35 -0400] mattray: sounds like a good starter project for j^2
[2014-07-08 15:29:52 -0400] tkabrt: hi guys... Im using Chef for provisioning of Openstack and need to use knife openstack server create command to create new VM... everything is going all right, but when knife tries to connect to newly created VM via ssh to bootstrap it, it gives out this error message ERROR: Net::SSH::Disconnect: connection closed by remote host. Im using certificates for ssh and I am able to
[2014-07-08 15:29:53 -0400] tkabrt: connect to that VM manually right after the error. SSH log from VM has this entry  - Jul  8 14:48:26 node sshd[922]: Did not receive identification string from x.x.x.x
[2014-07-08 15:29:53 -0400] tkabrt: Ive search for some info on google, but everything meaningful leads to Opscode Community web, which is no longer working. Can you help me?
[2014-07-08 15:34:41 -0400] iartarisi: heh, I had no idea knife openstack existed
[2014-07-08 15:55:17 -0400] mattt: disabled gating on http://jenkins.uk.rs.wherenow.org/ until these berkshelf changes go through
[2014-07-08 15:55:24 -0400] mattt: can someone remind me to re-enable please?  :P
[2014-07-08 15:55:53 -0400] mattt: ^^^ jklare
[2014-07-08 18:06:16 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow metadata listen host and port to be configured via attributes  https://review.openstack.org/105262
[2014-07-08 18:07:14 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow metadata listen host and port to be configured attributes  https://review.openstack.org/105262
[2014-07-08 18:08:25 -0400] markvan: jklare: mattray: ^^^ pushed up with bump to berkshelf 2.0.18.    Is it time to condsider removing the Gemfile.locks from master, seems like should only be in stable branches?
[2014-07-08 18:42:12 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow metadata listen host and port to be configured attributes  https://review.openstack.org/105262
[2014-07-08 18:55:47 -0400] mattray: markvan: I think I'm ok with not having a Gemfile.lock on master, I thought we were already doing that
[2014-07-08 18:58:15 -0400] markvan: mattray: yeah, seems like that would help with changes like this.   my latest run shows failure with rspec, looks like 2.99.0 was used and we want  2.14.1
[2014-07-08 18:58:26 -0400] markvan: will try again.
[2014-07-08 18:58:43 -0400] mattray: is the rspec dependency not specific enough?
[2014-07-08 18:59:18 -0400] mattray: I ran into that when I upgraded to Ruby 2.1, Rubygems' understanding of "<3" changed and started bringing in 3.0.0.rc2
[2014-07-08 19:00:54 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow metadata listen host and port to be configured attributes  https://review.openstack.org/105262
[2014-07-08 19:02:11 -0400] markvan: we just have chefspec 3.4.0 in the Gemfile, nothing for rspec.  so I added rspec to that, now should work.
[2014-07-08 19:02:51 -0400] markvan: next I can push up with removing gem lock file.
[2014-07-08 19:35:44 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow metadata listen host and port to be configured attributes  https://review.openstack.org/105262
[2014-07-08 19:36:00 -0400] markvan: mattray: jklare:  Looks like latest patch works with updates to berks and rspec.  Will start pushing up patches for each cookbook for this gate fix.
[2014-07-08 19:37:31 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-block-storage: Update Gemfile and remove lock  https://review.openstack.org/105565
[2014-07-08 19:39:01 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-common: Update Gemfile and remove lock  https://review.openstack.org/105567
[2014-07-08 19:39:45 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-dashboard: Update Gemfile and remove lock  https://review.openstack.org/105568
[2014-07-08 19:43:29 -0400] markvan: not quite right yet, dependency issue with hashie now.
[2014-07-08 19:44:50 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow metadata listen host and port to be configured attributes  https://review.openstack.org/105262
[2014-07-08 19:47:52 -0400] mattray: markvan: hah, I'm having j^2 sort out his stackforge build environment fixing these same issues
[2014-07-08 19:48:09 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-dashboard: Update Gemfile and remove lock  https://review.openstack.org/105568
[2014-07-08 19:48:56 -0400] openstackgerrit: JJ Asghar proposed a change to stackforge/cookbook-openstack-common: Update Berkshelf to 2.0.18  https://review.openstack.org/105570
[2014-07-08 19:49:15 -0400] markvan: mattray: ok.  I think I'm on the right track here, hopefuly some of it is useful.
[2014-07-08 19:49:36 -0400] mattray: j^2: woohoo
[2014-07-08 19:49:40 -0400] j^2: yay!
[2014-07-08 19:50:58 -0400] markvan: j^2:   I tried that same patch, but it failed with hashie issue.  So, look at  https://review.openstack.org/105262  and  https://review.openstack.org/105568  I think this will work for us.
[2014-07-08 19:51:47 -0400] markvan: And I would like to get rid of the Gemfile lock in master.
[2014-07-08 19:52:05 -0400] j^2: awesome, thanks for the heads up
[2014-07-08 19:52:32 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-block-storage: Update Gemfile and remove lock  https://review.openstack.org/105565
[2014-07-08 19:53:26 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-common: Update Gemfile and remove lock  https://review.openstack.org/105567
[2014-07-08 19:53:37 -0400] markvan: I'll update the ones I started on, if you want to cover the rest.
[2014-07-08 19:53:49 -0400] j^2: markvan: perfect
[2014-07-08 19:54:09 -0400] j^2: yeah i'll make this happen accross the board. so everything other than block-storage and common?
[2014-07-08 19:54:44 -0400] mattray: markvan: I'm having j^2 hit up the stable/havana branches too, figure we'll leave grizzly alone
[2014-07-08 19:54:52 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-identity: Update Gemfile and remove lock  https://review.openstack.org/105571
[2014-07-08 19:55:14 -0400] markvan: mattray: sounds good.  That will include the Gem lock updates.
[2014-07-08 19:55:52 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-image: Update Gemfile and remove lock  https://review.openstack.org/105572
[2014-07-08 19:57:22 -0400] markvan: j^2: I have the first 5 icehouse ones spinning now, I think they will work.  If you want to focus on havana, I can do the rest fo the icehouse ones.  but I'll wait for these to all complete gates.
[2014-07-08 19:59:24 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-network: Update Gemfile and remove lock  https://review.openstack.org/105573
[2014-07-08 19:59:25 -0400] j^2: awesome, havana is mine
[2014-07-08 20:03:32 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-object-storage: Update Gemfile and remove lock  https://review.openstack.org/105575
[2014-07-08 20:06:14 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-ops-database: Update Gemfile and remove lock  https://review.openstack.org/105576
[2014-07-08 20:08:33 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-database: Update Gemfile and remove lock  https://review.openstack.org/105577
[2014-07-08 20:11:42 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-ops-messaging: Update Gemfile and remove lock  https://review.openstack.org/105580
[2014-07-08 20:14:14 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-orchestration: Update Gemfile and remove lock  https://review.openstack.org/105581
[2014-07-08 20:16:10 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-telemetry: Update Gemfile and remove lock  https://review.openstack.org/105582
[2014-07-08 20:17:13 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow metadata listen host and port to be configured via attributes  https://review.openstack.org/105262
[2014-07-08 20:18:56 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Update Gemfile and remove lock  https://review.openstack.org/105584
[2014-07-08 20:21:58 -0400] markvan: j^2:   I think I have the master branch covered.
[2014-07-08 20:22:03 -0400] j^2: markvan: awesome
[2014-07-08 20:22:05 -0400] j^2: thanks
[2014-07-08 20:31:22 -0400] openstackgerrit: JJ Asghar proposed a change to stackforge/cookbook-openstack-common: Update Berkshelf to 2.0.18  https://review.openstack.org/105587
[2014-07-08 20:50:32 -0400] openstackgerrit: JJ Asghar proposed a change to stackforge/cookbook-openstack-common: Update Berkshelf to 2.0.18  https://review.openstack.org/105587
[2014-07-08 21:48:51 -0400] JamesS: howdy, looking for a pointer on how to build the Single Controller + N Compute (aka 1+N) environment
[2014-07-08 21:49:21 -0400] JamesS: Unofrtunately my googleing only find me this refrence to it:
[2014-07-08 21:49:22 -0400] JamesS: http://docs.opscode.com/openstack_architecture.html
[2014-07-08 21:49:41 -0400] lrr: JamesS: i've been going through the same thing
[2014-07-08 21:49:45 -0400] lrr: let me find y gist
[2014-07-08 21:49:47 -0400] lrr: my gist*
[2014-07-08 21:49:57 -0400] JamesS: thanks
[2014-07-08 21:51:13 -0400] j^2: hey i'm here to make everyone happy with docs now :)
[2014-07-08 21:51:33 -0400] j^2: I'm gonna do my best to make everything as up-to-date and active as possible
[2014-07-08 21:52:29 -0400] j^2: JamesS: this isnt perfect, but it can give you some high view...
[2014-07-08 21:52:30 -0400] j^2: https://github.com/stackforge/openstack-chef-repo
[2014-07-08 21:52:55 -0400] JamesS: Awesome, thanks!
[2014-07-08 21:53:24 -0400] JamesS: So far all I have was the single paragraph from the arch page I liked earlier, so any thing is better than that :)
[2014-07-08 21:53:35 -0400] j^2: \o/
[2014-07-08 21:53:53 -0400] j^2: yeah it's a good "template" that'll get better and better as i get my hands more and more dirty
[2014-07-08 21:56:21 -0400] lrr: JamesS: https://gist.github.com/stumped2/7b4a3431966bbae10f50
[2014-07-08 21:57:07 -0400] j^2: lrr: just forked it :)
[2014-07-08 21:57:32 -0400] lrr: JamesS: as for the roles, you want os-compute-single-controller for the controller, and os-compute-worker for the compute nodes
[2014-07-08 21:57:45 -0400] lrr: j^2: what do you mean?
[2014-07-08 21:58:07 -0400] lrr: JamesS: also, the way that gist is setup, it uses a dedicated mysql server
[2014-07-08 21:59:06 -0400] j^2: lrr: i grabbed it too, i'm gonna take note of it :)
[2014-07-08 21:59:38 -0400] lrr: j^2: ah :)
[2014-07-08 21:59:41 -0400] lrr: have fun with it
[2014-07-08 21:59:58 -0400] lrr: oh i forgot to mention, that's for havana and uses nova-networking
[2014-07-08 22:00:20 -0400] lrr: j^2: there's probably some stuff in the endpoints section that's redundant though
[2014-07-08 22:00:24 -0400] j^2: :D
[2014-07-08 22:00:49 -0400] lrr: j^2: i haven't been able to get icehouse to work yet
[2014-07-08 22:01:06 -0400] lrr: the webui keeps trying to use neutron, even though i told it i want nova
[2014-07-08 22:01:54 -0400] j^2: ah cool
[2014-07-08 22:02:30 -0400] j^2: i'm doing my damnedest to get the Berkshelf update psuhed out today, so we can get the ball rolling again
[2014-07-08 22:12:14 -0400] JamesS: og
[2014-07-08 22:12:16 -0400] JamesS: erm ok
[2014-07-08 22:13:11 -0400] JamesS: Not 100% sure what to do with the gist file. I sort of arrived at chef via the indirect route of looking for a way to configure openstack that was a complete boar.
[2014-07-08 22:13:21 -0400] j^2: ah yeah
[2014-07-08 22:13:42 -0400] j^2: start with that vagrant file then (when i get berkshelf fixed ;) ) it'll be a good start for you
[2014-07-08 22:14:50 -0400] JamesS: the snag is I'm trying to deploy on real hardware
[2014-07-08 22:15:08 -0400] JamesS: so at least based on what I've read of vagrant, it's not suited for what I'm trying to build.
[2014-07-08 22:38:48 -0400] openstackgerrit: JJ Asghar proposed a change to stackforge/cookbook-openstack-common: Update Berkshelf to 2.0.18  https://review.openstack.org/105587
[2014-07-08 22:43:45 -0400] mattray: JamesS: j^2 is going to be updating those docs you found, so he'll be deploying to real hardware eventually too
[2014-07-08 22:46:09 -0400] j^2: JamesS: that's the plan :)
[2014-07-08 22:48:47 -0400] JamesS: awesome
[2014-07-08 23:01:09 -0400] JamesS: Thanks for all the help guys, Time to go do some homework
[2014-07-08 23:01:19 -0400] openstackgerrit: JJ Asghar proposed a change to stackforge/cookbook-openstack-common: Update Berkshelf to 2.0.18  https://review.openstack.org/105587
[2014-07-08 23:36:22 -0400] openstackgerrit: JJ Asghar proposed a change to stackforge/cookbook-openstack-common: Update Berkshelf to 2.0.18  https://review.openstack.org/105587

[2014-01-08 04:38:54 -0500] openstackgerrit: David Geng proposed a change to stackforge/cookbook-openstack-compute: Sync the rootwrap filters  https://review.openstack.org/65417
[2014-01-08 04:48:47 -0500] openstackgerrit: David Geng proposed a change to stackforge/cookbook-openstack-network: Make sure the linuxbridge agent can be restarted  https://review.openstack.org/58481
[2014-01-08 05:32:46 -0500] openstackgerrit: David Geng proposed a change to stackforge/cookbook-openstack-network: Make sure the linuxbridge agent can be restarted  https://review.openstack.org/58481
[2014-01-08 10:54:02 -0500] openstackgerrit: mattt proposed a change to stackforge/cookbook-openstack-common: Update spec_helper to include 'chefspec/berkshelf'  https://review.openstack.org/65454
[2014-01-08 11:29:58 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-common: Update spec_helper to include 'chefspec/berkshelf'  https://review.openstack.org/65454
[2014-01-08 11:29:59 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-network: Make sure the linuxbridge agent can be restarted  https://review.openstack.org/58481
[2014-01-08 12:53:07 -0500] openstackgerrit: David Geng proposed a change to stackforge/cookbook-openstack-block-storage: Need create init.d script file before enable the service  https://review.openstack.org/65462
[2014-01-08 13:50:19 -0500] openstackgerrit: David Geng proposed a change to stackforge/cookbook-openstack-block-storage: Need create init.d script file before enable the service  https://review.openstack.org/65462
[2014-01-08 14:02:37 -0500] openstackgerrit: David Geng proposed a change to stackforge/cookbook-openstack-block-storage: Need create init.d script file before enable the service  https://review.openstack.org/65462
[2014-01-08 14:25:39 -0500] openstackgerrit: David Geng proposed a change to stackforge/cookbook-openstack-block-storage: Need create init.d script file before enable the service  https://review.openstack.org/65462
[2014-01-08 15:29:47 -0500] openstackgerrit: David Geng proposed a change to stackforge/cookbook-openstack-block-storage: Need create init.d script file before enable the service  https://review.openstack.org/65462
[2014-01-08 15:44:29 -0500] openstackgerrit: Alan Meadows proposed a change to stackforge/cookbook-openstack-object-storage: Bugfix ring_script.rb to parse recent ring-builder  https://review.openstack.org/65380
[2014-01-08 17:10:45 -0500] ctracey: alanmeadows, how extensively are you using object storage?
[2014-01-08 17:11:46 -0500] alanmeadows: ctracey: its in production for two different companies, managing small to fairly large clusters
[2014-01-08 17:11:53 -0500] alanmeadows: (that i directly oversee)
[2014-01-08 17:12:10 -0500] ctracey: and which part of the cookbook, if you dont mind my asking
[2014-01-08 17:12:42 -0500] ctracey: the reason being...there is a good deal that should be changed to make it "stackforge" imo
[2014-01-08 17:12:59 -0500] ctracey: do  you use it for the rin building?
[2014-01-08 17:13:02 -0500] ctracey: ring*
[2014-01-08 17:13:42 -0500] alanmeadows: ctracey: ring management, yeah -- for some clusters the initial ring is provided (usually looping in an existing cluster into using the cookbook) and for some we let the cookbook generate it (new clusters)
[2014-01-08 17:14:50 -0500] ctracey: would you be bummed if i overhauled some of that?
[2014-01-08 17:15:31 -0500] ctracey: its doing some interesting things like git management of the rings and a good deal of eval's
[2014-01-08 17:15:31 -0500] alanmeadows: ctracey: not at all, you are correct its not exactly 100% standard
[2014-01-08 17:16:22 -0500] alanmeadows: ctracey: however, the ring management stuff, some of it borrowed, I actually appreciate as an administrator -- its actually nice not to have the cookbook get its hands too deeply into things
[2014-01-08 17:16:49 -0500] ctracey: i agree with that part of things
[2014-01-08 17:17:20 -0500] ctracey: i feel like the cookbook should get you off the ground and make the thing usable
[2014-01-08 17:17:40 -0500] ctracey: after that it should be up to your orchestration tool du jour
[2014-01-08 17:17:52 -0500] ctracey: are we on the same page?
[2014-01-08 17:18:09 -0500] ctracey: id like to consider others' preferences as well
[2014-01-08 17:26:32 -0500] openstackgerrit: A change was merged to stackforge/openstack-chef-repo: Include 'role[os-image-upload]' to upload images  https://review.openstack.org/62765
[2014-01-08 17:26:58 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-image: Add DB2 support to glance on redhat platform  https://review.openstack.org/60141
[2014-01-08 17:28:30 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-common: fix NoMethodError on ShellOut calls  https://review.openstack.org/65089
[2014-01-08 17:29:31 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-identity: Add DB2 support to keystone on redhat platform  https://review.openstack.org/60135
[2014-01-08 17:30:41 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-compute: Add DB2 support to nova on redhat platform  https://review.openstack.org/60148
[2014-01-08 17:30:57 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-network: added rubocop todo list to mask current fails  https://review.openstack.org/64977
[2014-01-08 17:33:58 -0500] openstackgerrit: A change was merged to stackforge/cookbook-openstack-compute: fix NoMethodError in ShellOut run_command  https://review.openstack.org/65084
[2014-01-08 18:12:25 -0500] openstackgerrit: Abel Lopez proposed a change to stackforge/cookbook-openstack-compute: Adds misc options  https://review.openstack.org/63027
[2014-01-08 18:26:02 -0500] alanmeadows: ctracey: sorry got locked into a few successive calls--I do not disagree with any of those statements
[2014-01-08 18:27:25 -0500] alanmeadows: ctracey: The few items I had on my list of todo regarding object-storage was the networking didn't support interface names, which doesn't match what I'm actually doing with it for several large clusters, the attribute paths are all foobar'd to be stackforge standard, and the git stuff (which I do like) needs to discover the git ip from the management role, it need not be spelled out
[2014-01-08 18:28:01 -0500] alanmeadows: not to mention, very few of the attributes are overridable
[2014-01-08 18:34:49 -0500] ctracey: alanmeadows, np
[2014-01-08 18:35:02 -0500] ctracey: i agree with all of that...though not a fan of the git stuff
[2014-01-08 18:35:12 -0500] ctracey: it also presumes that you will run memcached locally
[2014-01-08 18:35:31 -0500] ctracey: and the locate_disk routines are pretty whack
[2014-01-08 19:19:59 -0500] alanmeadows: ctracey: You've never needed to recover an old ring :)
[2014-01-08 19:32:33 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-block-storage: Initial rubocop support for recipes.  https://review.openstack.org/65516
[2014-01-08 19:51:45 -0500] openstackgerrit: Abel Lopez proposed a change to stackforge/cookbook-openstack-compute: Adds misc options  https://review.openstack.org/63027
[2014-01-08 20:09:33 -0500] ctracey: alanmeadows, but whygit?
[2014-01-08 20:10:58 -0500] alanmeadows: ctracey: I admit, its not exactly the correct, but the server capability does make pulling easy and commit messages are nice.  I'd feel dirty using rcs.  What would you recommend?
[2014-01-08 20:11:05 -0500] alanmeadows: the correct tool, even
[2014-01-08 20:11:50 -0500] alanmeadows: with git at least in order to push a new ring your basically "forced" to make a backup (checkin)
[2014-01-08 20:12:15 -0500] alanmeadows: I'm up for any good suggestion though, not locked to it
[2014-01-08 20:17:07 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-block-storage: Initial rubocop support for ChefSpec tests.  https://review.openstack.org/65528
[2014-01-08 20:17:24 -0500] ctracey: yeah...i can see how it could help
[2014-01-08 20:17:35 -0500] ctracey: but seems like it is probably overkill for most
[2014-01-08 20:18:02 -0500] ctracey: perhaps most ideal is a versioned config file?
[2014-01-08 20:18:25 -0500] ctracey: drop a tool to build the rings from config...then not tied to git
[2014-01-08 20:18:44 -0500] ctracey: either way...i think it can be left, but just disabled for those that want it
[2014-01-08 20:18:50 -0500] ctracey: (it already supports that)
[2014-01-08 20:23:27 -0500] aspiers: mattray: I've been playing around with delegation from a Chef::Provider::Service::Pacemaker to Chef::Provider::Service::$ORIGINAL_PROVIDER, and come to the conclusion this is probably not the way to go
[2014-01-08 20:23:58 -0500] aspiers: I think the responsibility for supporting HA needs to be placed on each OpenStack service cookbook
[2014-01-08 20:24:14 -0500] mattray: that's unfortunate, that sounds more intrusive
[2014-01-08 20:24:18 -0500] aspiers: since it's more complex than just starting and stopping services
[2014-01-08 20:24:27 -0500] aspiers: for example, the vips
[2014-01-08 20:24:56 -0500] aspiers: and ordering constraints
[2014-01-08 20:25:18 -0500] aspiers: putting all that in a single pacemaker cookbook smells like the feature envy anti-pattern to me
[2014-01-08 20:25:28 -0500] aspiers: OpenStack services will change over time
[2014-01-08 20:25:58 -0500] aspiers: e.g. one day keystone will only support active/active using a certain type of tokens, and the next day it will support it for any token type
[2014-01-08 20:26:14 -0500] aspiers: the intelligence about that kind of thing belongs in the keystone cookbook
[2014-01-08 20:26:24 -0500] aspiers: because it's dependent on particular OpenStack versions
[2014-01-08 20:27:07 -0500] aspiers: yes, it's more intrusive on the OpenStack cookbooks, but my gut feeling is that it will be cleaner in the long run
[2014-01-08 20:27:15 -0500] aspiers: this delegation thing just feels fugly :)
[2014-01-08 20:27:46 -0500] aspiers: it's still monkey-patching, whichever way you look at it
[2014-01-08 20:27:54 -0500] aspiers: and I have no idea how it would deal with VIPs
[2014-01-08 20:29:56 -0500] aspiers: the original approach seemed to be "define a whole bunch of attributes describing pacemaker primitives, then loop over them creating the resources"
[2014-01-08 20:30:21 -0500] aspiers: but that doesn't allow for any per-service logic
[2014-01-08 20:30:51 -0500] aspiers: mattray: but feel free to tell me I'm talking crap, as I could be totally wrong ;-)
[2014-01-08 20:31:47 -0500] mattray: I'd hoped it was easier, but HA is undoubtedly intrusive
[2014-01-08 20:31:49 -0500] aspiers: I think it should be enough for the pacemaker cookbook to provide the LWRPs which make it simple for other cookbooks to incorporate pacemaker support
[2014-01-08 20:31:57 -0500] mattray: yeah, that's a definite win
[2014-01-08 20:32:05 -0500] mattray: library cookbooks +100
[2014-01-08 20:32:10 -0500] aspiers: right :)
[2014-01-08 20:32:13 -0500] aspiers: I'm expecting the intrusion to be reasonably low though
[2014-01-08 20:32:36 -0500] aspiers: typically just:
[2014-01-08 20:32:40 -0500] aspiers: if ha_enabled?
[2014-01-08 20:32:51 -0500] aspiers:   pacemaker_primitive "blah" do ... end
[2014-01-08 20:33:00 -0500] aspiers:   pacemaker_vip "blah" do ... end
[2014-01-08 20:33:02 -0500] aspiers: else
[2014-01-08 20:33:08 -0500] aspiers:   service "blah" do ... end
[2014-01-08 20:33:11 -0500] aspiers: end
[2014-01-08 20:33:26 -0500] aspiers: oh, and the first branch would also :disable the normal service
[2014-01-08 20:34:02 -0500] aspiers: I want it to be able to adopt a running service into the cluster with no downtime
[2014-01-08 20:39:57 -0500] rtheis: I'm having a bit of trouble when using mysql db.  Creating my nova db fails with "Access denied for user 'root'@'127.0.0.1' (using password: YES)".  I tracked it down to ... default['openstack']['db']['compute']['host'] = "127.0.0.1".  If I change the default attribute to localhost then it works.
[2014-01-08 20:40:50 -0500] rtheis: Seems like maybe I'm missing something in mysql setup.  Wondering if others have seen this error
[2014-01-08 20:41:06 -0500] ctracey: rtheis, no, but that sounds like an /etc/hosts issue
[2014-01-08 20:41:14 -0500] ctracey: sudo netstat -nap | grep 3306
[2014-01-08 20:41:25 -0500] ctracey: what interface is it listening on?
[2014-01-08 20:41:45 -0500] rtheis: tcp        0      0 127.0.0.1:3306              0.0.0.0:*                   LISTEN      8479/mysqld
[2014-01-08 20:41:46 -0500] ctracey: and what does your /etc/hosts say about localhost?
[2014-01-08 20:42:05 -0500] mattray: rtheis: probably this: https://github.com/stackforge/openstack-chef-repo/blob/master/environments/vagrant.rb#L5
[2014-01-08 20:42:05 -0500] ctracey: cat /etc/hosts | grep localhost
[2014-01-08 20:42:52 -0500] ctracey: oh duh...thats not an access issue
[2014-01-08 20:42:58 -0500] ctracey: that looks like a password issue
[2014-01-08 20:43:09 -0500] ctracey: can you connect to mysql locally?
[2014-01-08 20:43:16 -0500] ctracey: as root with password
[2014-01-08 20:43:31 -0500] rtheis: yeah, but was only able to do so on localhost with a password
[2014-01-08 20:43:43 -0500] ctracey: well that makes sense
[2014-01-08 20:43:50 -0500] rtheis: seems like no password on 127.0.0.1
[2014-01-08 20:44:04 -0500] ctracey: again...check hosts file
[2014-01-08 20:44:35 -0500] rtheis: 127.0.0.1   centos64 centos64 localhost localhost.localdomain localhost4 localhost4.localdomain4
[2014-01-08 20:44:36 -0500] rtheis: ::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
[2014-01-08 20:45:53 -0500] rtheis: mattray: I'm using vagrant.rb...is there something I need to add under mysql attributes?
[2014-01-08 20:46:35 -0500] mattray: rtheis: if those attributes are there, I'd assume /etc/hosts or some DNS issue
[2014-01-08 20:46:42 -0500] mattray: like ctracey said
[2014-01-08 20:47:02 -0500] mattray: does it need a fqdn?
[2014-01-08 20:47:05 -0500] rtheis: ok, thanks
[2014-01-08 20:47:19 -0500] mattray: centos64.local or something?
[2014-01-08 20:47:50 -0500] ctracey: check your mysql users as well...
[2014-01-08 20:47:56 -0500] mattray: no idea if it's related, but long ago I got bit by something stupid like that and now always give my VMs a domain
[2014-01-08 20:48:12 -0500] ctracey: mysql -e "select * from mysql.user where User = 'root'"
[2014-01-08 20:48:44 -0500] ctracey: i have been doing this with localhost quite successfully
[2014-01-08 20:48:57 -0500] ctracey: i can hand you a vagrant file example if you ant
[2014-01-08 20:49:00 -0500] ctracey: want*
[2014-01-08 20:49:25 -0500] rtheis: ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
[2014-01-08 20:50:16 -0500] rtheis: the vagrant file example would be helpful
[2014-01-08 20:50:54 -0500] ctracey: rtheis, https://gist.github.com/craigtracey/8324407
[2014-01-08 20:51:09 -0500] ctracey: those are my json attributes for a keystone instance
[2014-01-08 20:51:28 -0500] rtheis: thank you
[2014-01-08 20:51:30 -0500] ctracey: you would obviously need to update it to suite your needs
[2014-01-08 20:51:38 -0500] ctracey: but that works end-to-end
[2014-01-08 20:51:42 -0500] ctracey: using it for swift
[2014-01-08 20:51:47 -0500] ctracey: (i removed the swift bits)
[2014-01-08 22:04:22 -0500] mattt: rtheis: i had that problem
[2014-01-08 22:04:57 -0500] mattt: rtheis: i think it's a bug w/ the mysql cookbook
[2014-01-08 22:05:58 -0500] rtheis: mattt: what version of mysql are you using?
[2014-01-08 22:06:10 -0500] rtheis: cookbook that is
[2014-01-08 22:07:20 -0500] mattt: rtheis: i think it's the allow_remote_root environment attribute that trips it up
[2014-01-08 22:07:35 -0500] mattt: i'd get the issue in github but i can't reach github :(
[2014-01-08 22:09:00 -0500] mattt: rtheis: https://tickets.opscode.com/browse/COOK-3858
[2014-01-08 22:18:17 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-common: Filling out initial rubocop support.  https://review.openstack.org/65551
[2014-01-08 22:31:51 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-common: Filling out initial rubocop support.  https://review.openstack.org/65551
[2014-01-08 22:33:26 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-compute: Filling out initial rubocop support.  https://review.openstack.org/65555
[2014-01-08 23:06:22 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-dashboard: Filling out initial rubocop support.  https://review.openstack.org/65562
[2014-01-08 23:11:04 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-identity: Filling out initial rubocop support.  https://review.openstack.org/65563
[2014-01-08 23:17:10 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-image: Filling out initial rubocop support for metadata.rb and the Gemfile.  https://review.openstack.org/65564
[2014-01-08 23:17:58 -0500] openstackgerrit: Justin Shepherd proposed a change to stackforge/cookbook-openstack-image: Removing rubocop StringLiterals violations  https://review.openstack.org/65176
[2014-01-08 23:19:34 -0500] luisg: mattray, qq what version of OS is master?
[2014-01-08 23:19:42 -0500] luisg: H? or G?
[2014-01-08 23:19:52 -0500] aspiers: H or post-H IIRC
[2014-01-08 23:19:56 -0500] aspiers: it was mentioned on this week's call
[2014-01-08 23:20:09 -0500] luisg: ah cool, I missed that, thanks!
[2014-01-08 23:20:10 -0500] aspiers: I think it recently changed
[2014-01-08 23:20:14 -0500] aspiers: but ICBW ...
[2014-01-08 23:20:21 -0500] luisg: k thx
[2014-01-08 23:20:36 -0500] aspiers: I think I saw a grizzly branch at least
[2014-01-08 23:21:03 -0500] mattray: luisg: Havana
[2014-01-08 23:21:14 -0500] luisg: thanks
[2014-01-08 23:21:15 -0500] luisg: !
[2014-01-08 23:21:27 -0500] mattray: waiting for someone to step up and commit to Icehouse work
[2014-01-08 23:21:39 -0500] mattray: before moving Havana off of master
[2014-01-08 23:23:27 -0500] luisg: before that ahppens im going to update the readme :)
[2014-01-08 23:27:54 -0500] openstackgerrit: Alan Meadows proposed a change to stackforge/cookbook-openstack-network: Bugfix missing quantum-ovs-cleanup on startup  https://review.openstack.org/65098
[2014-01-08 23:29:24 -0500] openstackgerrit: Luis A. Garcia proposed a change to stackforge/openstack-chef-repo: Update Grizzly mention in README to Havana  https://review.openstack.org/65567
[2014-01-08 23:30:27 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-metering: Filling out initial rubocop support for metadata.rb and the Gemfile.  https://review.openstack.org/65568
[2014-01-08 23:37:43 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-network: Filling out initial rubocop support for metadata.rb and the Gemfile.  https://review.openstack.org/65569
[2014-01-08 23:45:55 -0500] openstackgerrit: Matt Ray proposed a change to stackforge/cookbook-openstack-object-storage: Filling out initial rubocop support for metadata.rb and the Gemfile.  https://review.openstack.org/65570

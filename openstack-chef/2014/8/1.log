[2014-08-01 00:08:02 -0400] pcn: j^2: berks is crashig out on dependency resolution.  It's looking for openstack-ops-database from supermarket.getchef.com.  If I look at the index there, it does not have openstack-ops-database
[2014-08-01 00:10:05 -0400] pcn: That's failing even though berks install successfully does a git checkout on an openstack-ops-database whose metadata shows 10.0.0
[2014-08-01 00:16:37 -0400] j^2: Can you put it in a gist for me?
[2014-08-01 00:19:12 -0400] j^2: That supermarket thing might be a nasty problem. I need to look into that
[2014-08-01 00:23:12 -0400] pcn: https://gist.github.com/pcn/00c5ee350db20d59a9bc
[2014-08-01 00:26:34 -0400] pcn: So uh, no-one else is having this problem at the moment?
[2014-08-01 00:37:16 -0400] j^2: Not 100% sure. No one else has reported it that I know of
[2014-08-01 00:39:07 -0400] j^2: That's a dependency mix match right?
[2014-08-01 00:43:34 -0400] j^2: I think its falling back to supermarket because its trying to find a version that is mismatching. But that's me reading this on my phone
[2014-08-01 00:54:50 -0400] pcn: It could be just a version mis-match, but manually cloning those and uploading them via knife all at once is working
[2014-08-01 00:54:52 -0400] pcn: stackforge/cookbook-openstack-common stackforge/cookbook-openstack-compute stackforge/cookbook-openstack-dashboard stackforge/cookbook-openstack-identity stackforge/cookbook-openstack-image stackforge/cookbook-openstack-network stackforge/cookbook-openstack-object-storage stackforge/cookbook-openstack-ops-database stackforge/cookbook-openstack-ops-messaging stackforge/cookbook-openstack-orchestration
[2014-08-01 00:54:54 -0400] pcn: stackforge/cookbook-openstack-telemetry
[2014-08-01 00:55:02 -0400] pcn: Whoops!  Sorry for the spam
[2014-08-01 01:07:01 -0400] pcn: It looks like openstack-telemetry is still at 9.x in the icehose branh
[2014-08-01 02:04:22 -0400] j^2: That should be correct 9 is icehouse 10 is Juno
[2014-08-01 02:07:32 -0400] pcn: Every other cookbook is at the 10.0 version, and there's no icehouse branch
[2014-08-01 02:07:41 -0400] pcn: Is there a commit or a tag you'd suggest?
[2014-08-01 02:08:08 -0400] pcn: (of the openstack-chef-repo)
[2014-08-01 02:13:46 -0400] j^2: Ah, let me get on my laptop instead my phone
[2014-08-01 02:15:57 -0400] j^2: ah so there is a stable/icehouse branch for every cookbook
[2014-08-01 02:16:06 -0400] j^2: or at least should be
[2014-08-01 02:16:18 -0400] j^2: master should have 10.0 as the metadata.rb
[2014-08-01 02:16:22 -0400] j^2: which is juno
[2014-08-01 02:16:50 -0400] j^2: apart from openstack-chef-repo, it seems there is an issue with vagrant plugins and vagrant chef-zero
[2014-08-01 02:17:10 -0400] j^2: thats why im spending my time on chef-metal
[2014-08-01 02:17:31 -0400] j^2: but theres an issue with updating the roles/environments for chef-metal atm
[2014-08-01 02:17:51 -0400] j^2: and i  should be pairing with jkeiser on monday/tuesday to get that done
[2014-08-01 02:21:26 -0400] j^2: pcn: the net net is that the stable/havana branch was good a bit ago, before a ridley issue with a couple vagrant plugins
[2014-08-01 02:22:13 -0400] j^2: the ridley issue is here: https://github.com/RiotGames/ridley/pull/255
[2014-08-01 02:29:39 -0400] openstackgerrit: Xi Jia proposed a change to stackforge/cookbook-openstack-image: Add attribute filesystem_store_metadata_file  https://review.openstack.org/110839
[2014-08-01 02:54:25 -0400] openstackgerrit: Xu Han Peng proposed a change to stackforge/openstack-chef-specs: Specification for Enable Neutron VPN as Service  https://review.openstack.org/111145
[2014-08-01 02:59:59 -0400] openstackgerrit: Xu Han Peng proposed a change to stackforge/openstack-chef-specs: Specification for Enable Neutron VPN as Service  https://review.openstack.org/111145
[2014-08-01 03:16:49 -0400] pcn: j^2: So shouldn't there be an icehouse branch of the openstack-chef-repo?
[2014-08-01 03:17:02 -0400] j^2: yes we are in the process of creating it
[2014-08-01 03:17:09 -0400] pcn: cool.
[2014-08-01 03:17:26 -0400] j^2: we just got all the stable/icehouse built yesterday and today juno got created
[2014-08-01 03:17:46 -0400] j^2: juno == manster atm
[2014-08-01 03:23:01 -0400] pcn: Cool, I'm just going to back my cookbooks out to stable/icehouse and then follow-through with my plan
[2014-08-01 06:38:58 -0400] openstackgerrit: doctormacky proposed a change to stackforge/cookbook-openstack-block-storage: Change gpfs driver path from cinder.volume.drivers.gpfs.GPFSDriver to cinder.volume.drivers.ibm.gpfs.GPFSDriver.This Driver is defined in https://github.com/openstack/cinder/blob/master/cinder/volume/drivers/ibm/gpfs.py  https://review.openstack.org/111178
[2014-08-01 07:39:48 -0400] openstackgerrit: Xi Jia proposed a change to stackforge/cookbook-openstack-image: Add attribute filesystem_store_metadata_file  https://review.openstack.org/110839
[2014-08-01 07:44:16 -0400] openstackgerrit: Xi Jia proposed a change to stackforge/cookbook-openstack-image: Add attribute filesystem_store_metadata_file  https://review.openstack.org/110839
[2014-08-01 08:02:25 -0400] openstackgerrit: Xi Jia proposed a change to stackforge/cookbook-openstack-image: Add attribute filesystem_store_metadata_file  https://review.openstack.org/110839
[2014-08-01 14:53:27 -0400] markvan: j^2: hi.  Looking at a few blueprints.  For the https://blueprints.launchpad.net/openstack-chef/+spec/update-berkshelf, this seems straight forward, do you see a need for that one to go through new spec process?
[2014-08-01 14:53:55 -0400] markvan: j^2: and https://review.openstack.org/#/c/110368/ is ready to go on, that should put juno in better shape.
[2014-08-01 14:59:46 -0400] j^2: I'll take a look here in a bit
[2014-08-01 15:15:30 -0400] j^2: markvan: were starting to get people to notice the chef-repo not being updated :( https://groups.google.com/forum/#!topic/opscode-chef-openstack/RKTD7MOIM4w
[2014-08-01 15:29:41 -0400] markvan: j^2: yeah, it's time to make the repo branch, and put the basic updates in there.
[2014-08-01 15:45:13 -0400] j^2: sounds good
[2014-08-01 16:02:43 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-block-storage: Update Testing.md to factor out Strainer  https://review.openstack.org/111322
[2014-08-01 16:16:42 -0400] markvan: j^2: see https://review.openstack.org/#/c/110839/,  comments on when to version bump for basic conf value attribute additions.  IMO not needed for master branch unless impacts other cookbooks.
[2014-08-01 16:16:54 -0400] j^2: looking :)
[2014-08-01 16:17:07 -0400] pcn: Can someone do a sanity check on the data bags I'm supposed to have?
[2014-08-01 16:17:08 -0400] markvan: j^2:  I pointed them to the version spec, maybe we can get more feedback on this from folks.
[2014-08-01 16:18:11 -0400] pcn: I'm following the instructions at https://github.com/stackforge/openstack-chef-repo, and I've created e.g. the bag items for secrets
[2014-08-01 16:19:07 -0400] pcn: but I'm failing on openstack-common's password at line 73: ::Chef::EncryptedDataBagItem.load(bag_name, index, secret)[index]
[2014-08-01 16:20:29 -0400] j^2: pcn: can you put the complete run/error in a gist please?
[2014-08-01 16:22:26 -0400] pcn: Just ran with debug, it was trying to get guest.  That would make sense, I didn't realize guest was required (kind of hidden there - I need coffee, probably)
[2014-08-01 16:22:37 -0400] pcn: Yeah, there we go.
[2014-08-01 16:22:44 -0400] pcn: It'd be great if the instructions had something like this:
[2014-08-01 16:22:56 -0400] pcn: for p in openstack_identity_bootstrap_token neutron_metadata_secret ; do EDITOR=ec knife data bag create secrets $p --secret-file ~/.chef/openstack_data_bag_secret; done
[2014-08-01 16:23:04 -0400] pcn: Ignoring my EDITOR :)
[2014-08-01 16:23:11 -0400] pcn: Should I submit a PR on that?
[2014-08-01 16:23:24 -0400] j^2: i like prs
[2014-08-01 16:23:27 -0400] j^2: PRs ;)
[2014-08-01 16:23:46 -0400] pcn: OK, let me run errands, I'll get some coffee and I'll add some for loops
[2014-08-01 16:26:42 -0400] pcn: Bleh, now it's a mysql error
[2014-08-01 16:26:44 -0400] pcn: STDOUT:
[2014-08-01 16:26:46 -0400] pcn: STDERR: 2014-08-01 16:25:45.328 20187 CRITICAL glance [-] ValueError: Tables "migrate_version" have non utf8 collation, please make sure all tables are CHARSET=utf8
[2014-08-01 16:27:01 -0400] pcn: I think my dev had this same problem with the manual install
[2014-08-01 16:32:04 -0400] pcn: https://bugs.launchpad.net/glance/+bug/1279000
[2014-08-01 16:32:57 -0400] pcn: Maybe I'll just go to postgres.  That whole bug is a big mess of horrible.
[2014-08-01 16:33:03 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-network: Allow rootwrap configuration via attributes  https://review.openstack.org/109113
[2014-08-01 16:37:03 -0400] openstackgerrit: A change was merged to stackforge/cookbook-openstack-telemetry: Setting up repo for master Juno Branch  https://review.openstack.org/110368
[2014-08-01 16:37:30 -0400] j^2: markvan: commented on https://review.openstack.org/#/c/110839/ like you did
[2014-08-01 16:37:56 -0400] markvan: j^2: ok.   now that telemetry is merged, time to get repo branched and fixed up?
[2014-08-01 16:38:05 -0400] j^2: sounds like a plan
[2014-08-01 16:39:40 -0400] markvan: j^2: k, let me know when branch is done, then I can push up changes for icehouse locks and new juno versions.
[2014-08-01 16:40:06 -0400] j^2: k, ill start working here in a bit
[2014-08-01 16:42:26 -0400] j^2: markvan: just so i have another confirmation. im branching stable/icehouse off master for openstack-chef-repo?
[2014-08-01 16:42:49 -0400] markvan: j^2:  yup, sounds right.
[2014-08-01 16:42:55 -0400] j^2: awesome
[2014-08-01 16:43:23 -0400] markvan: j^2: then I'll add the locks to the stable side, and update the berks for the juno/master side.
[2014-08-01 16:43:23 -0400] j^2: markvan: done
[2014-08-01 16:43:24 -0400] j^2: https://github.com/stackforge/openstack-chef-repo/tree/stable/icehouse
[2014-08-01 16:44:38 -0400] markvan: j^2: k, will get patches up
[2014-08-01 17:07:40 -0400] lrr: how are the stackforge cookbooks handling https endpoints? i looked into it, (especially the uri) and the templates don't seem to have ssl even configurable
[2014-08-01 17:08:05 -0400] lrr: i mean the attributes suppot it, but in the keystone template, all the ssl stuff is commented out
[2014-08-01 17:09:36 -0400] j^2: lrr do we have any tests for it?
[2014-08-01 17:09:45 -0400] j^2: i dont know off hand to be honest
[2014-08-01 17:09:51 -0400] lrr: j^2: i don't know
[2014-08-01 17:10:10 -0400] j^2: thats probably the reason why its commented is because we dont have the confidence to use it ;)
[2014-08-01 17:10:16 -0400] j^2: but thats my logic :P
[2014-08-01 17:10:33 -0400] j^2: it was probably in the POC phase or something
[2014-08-01 17:10:34 -0400] lrr: but in the master branches for the cookbooks, i set uri to be https, and the set enpoints library tried to make https endpoints, but keystone wasn't configured to accept https
[2014-08-01 17:10:44 -0400] j^2: hmm
[2014-08-01 17:10:49 -0400] lrr: then why do the attributes still support https?
[2014-08-01 17:11:07 -0400] lrr: i know apache being https is important and easy to test for
[2014-08-01 17:13:06 -0400] j^2: that is a good question
[2014-08-01 17:13:12 -0400] lrr: the only other option i can think of now as it stands is to set the endpoints to a non-public network that all the nodes can talk to and then setup something like an ssl terminator on a public ip
[2014-08-01 17:18:35 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/openstack-chef-repo: Setting up repo for master Juno Branch  https://review.openstack.org/111345
[2014-08-01 17:23:23 -0400] j^2: rock on
[2014-08-01 17:27:04 -0400] markvan: lrr: yeah, for ssl, we are still missing some pieces of it in the various conf files.  probably need a small blueprint to complete that work.
[2014-08-01 17:27:46 -0400] markvan: lrr: and for testing, we probably need to bring in an ssl cookbook to create self signed certs which I don't think has been done yet.
[2014-08-01 17:28:22 -0400] markvan: j^2: pushed up repo patches...I think I covered all the necessary changes
[2014-08-01 17:28:35 -0400] lrr: on the plus side, i did figure out my horizon + console tab issue
[2014-08-01 17:29:40 -0400] j^2: markvan: swee
[2014-08-01 17:29:41 -0400] markvan: j^2: oops I missed the new ops database versions that we need for database and mysql...
[2014-08-01 17:29:41 -0400] j^2: t
[2014-08-01 17:29:50 -0400] j^2: yeah thats actually a good question
[2014-08-01 17:30:03 -0400] lrr: markvan: ok, i'll look into setting ssl termination or similar
[2014-08-01 17:30:07 -0400] j^2: its wierd that it feel back to supermarket
[2014-08-01 17:35:05 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/openstack-chef-repo: Setting up repo for master Juno Branch  https://review.openstack.org/111345
[2014-08-01 17:37:51 -0400] j^2: markvan: do we not have chefspec in openstack-chef-repo?
[2014-08-01 17:37:56 -0400] j^2: is that why you removed rspec?
[2014-08-01 17:38:26 -0400] markvan: j^2: yeah, no specs in the repo, just roles and env's
[2014-08-01 17:38:36 -0400] j^2: that seems like a gap ;)
[2014-08-01 17:43:55 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow rootwrap configuration via attributes  https://review.openstack.org/109083
[2014-08-01 17:56:55 -0400] openstackgerrit: Mark Vanderwiel proposed a change to stackforge/cookbook-openstack-compute: Allow rootwrap configuration via attributes  https://review.openstack.org/109083
[2014-08-01 18:00:44 -0400] pcn: Anyone try using postgres with icehouse recently?
[2014-08-01 18:01:08 -0400] pcn: I'm getting pg client complaining about ssl termination failing, no idea why that would be.
[2014-08-01 18:04:57 -0400] pcn: OK, turning ssl off on postgres for now
[2014-08-01 18:07:40 -0400] markvan: j^2: repo does not really contain any logic for spec testing, it's need more robust integration testing.   and maybe a cleanup with a new rubocop gate
[2014-08-01 18:18:22 -0400] j^2: ahh makes sense
[2014-08-01 18:18:34 -0400] j^2: ill get test-kitchen hooked up before we know it :)
[2014-08-01 18:21:25 -0400] pcn: I'll add that a guide to the warts of setting up the database would be good, too.
[2014-08-01 18:36:04 -0400] pcn: Aha, the port seems to be getting set to 3306 w/ postgres
[2014-08-01 18:39:29 -0400] pcn: OK, that seems to get me past the database
[2014-08-01 19:13:56 -0400] markvan: j^2:   when those repo patches finally merge, icehouse should be good to open up for stable dev.  Juno needs to be sync'd with changes in openstack (juno).  I have started the ugly process of going thru all the project .conf looking for changes and will start posting patches soon.  Until we get that intitial pass done, master is not really juno yet.
[2014-08-01 19:15:02 -0400] j^2: awesome, great. hey even if its ugly and it still works good enough for me :)
[2014-08-01 19:24:31 -0400] pcn: https://github.com/stackforge/openstack-chef-repo/pull/5
[2014-08-01 19:26:40 -0400] j^2: pcn looking
[2014-08-01 19:28:10 -0400] j^2: pcn:  you opened the PR on github, you need to go through the review process via gerrit
[2014-08-01 19:28:13 -0400] pcn: It's just a starting point - I expect you'll want a lead-in so those sections of the README make sense
[2014-08-01 19:28:16 -0400] pcn: Oh god.
[2014-08-01 19:28:28 -0400] pcn: You mean there are issues in github, but gerrit for reviews
[2014-08-01 19:28:29 -0400] pcn: ?
[2014-08-01 19:28:48 -0400] j^2: http://docs.getchef.com/openstack_develop.html bottom of the page
[2014-08-01 19:28:55 -0400] j^2: gerrit is everything
[2014-08-01 19:29:06 -0400] j^2: the bot will come along and close your PR within 24 hours
[2014-08-01 19:29:45 -0400] pcn: Ah, got it.  I'm thinking of this as an opscode project
[2014-08-01 19:29:51 -0400] pcn: NP, let it close it.
[2014-08-01 19:30:06 -0400] pcn: I'll keep my opinion on gerrit to myself
[2014-08-01 19:31:20 -0400] j^2: kk
[2014-08-01 19:32:54 -0400] pcn: OK, let me get some work done, I'll get back to finding my launchpad etc. stuff later tonight after work
[2014-08-01 19:33:04 -0400] j^2: kk

[2012-02-29 19:18:00 -0500] nico: fujin: worked like a charm, I'll see tomorrow to publish that sysctl cookbook : it allow to set/unset a sysctl from any recipe, writes the sysctl.conf & allow per node customization
[2012-02-29 20:10:00 -0500] hoover_damm: i think there's several sysctl cookbooks out now no?
[2012-02-29 20:46:00 -0500] atomic-penguin: Yes, one just released last night in fact
[2012-02-29 21:07:00 -0500] jesserobbins: Hey just a reminder - Today is last day to register for irc://irc.freenode.net:6667/#ChefConfat Ultra-earlybird Pricing! http://chefconf.opscode.com/registration/
[2012-02-29 22:03:00 -0500] hoover_damm: atomic-penguin, where?
[2012-02-29 22:03:00 -0500] bawt: atomic-penguin, where is the 'amazon' reference? i don't see it in attributes/default.rb
[2012-02-29 22:03:00 -0500] hoover_damm: bawt, forget where?
[2012-02-29 22:03:00 -0500] bawt: couldn't find keyword where?
[2012-02-29 22:03:00 -0500] hoover_damm: bawt, forget where
[2012-02-29 22:03:00 -0500] bawt: okies!
[2012-02-29 22:22:00 -0500] spheromak: nico: my syctl cook already does all that :)
[2012-02-29 22:24:00 -0500] cwj: whenever someone says 'cook' as shorthand for cookbook i find myself thinking about breaking bad :)
[2012-02-29 22:35:00 -0500] atomic-penguin: hoover_damm, http://ckbk.it/jn_sysctl
[2012-02-29 22:42:00 -0500] spheromak: cwj: lol
[2012-02-29 22:44:00 -0500] spheromak: atomic-penguin: side effect of renaming for the namespace. is that that cook wont work when you do site-download since the lwrp expects it to be  sysctl not jn_sysctl.   blargh.
[2012-02-29 22:45:00 -0500] atomic-penguin: hmm, how'd you fix, purge the old one from your chef-server?
[2012-02-29 22:46:00 -0500] spheromak: nah just thinking out loud
[2012-02-29 22:47:00 -0500] spheromak: cause its deployed localy at a couple sites as sysctl. tracked in github as sysctl, but i renamed a version for community site. this is continuation of my rant on namespaces on community site :)
[2012-02-29 22:47:00 -0500] atomic-penguin: Of course
[2012-02-29 22:47:00 -0500] spheromak: so ill have to branch just for uploading to community and maintain that with name changes :)
[2012-02-29 22:47:00 -0500] atomic-penguin: blargh indeed
[2012-02-29 22:47:00 -0500] spheromak: yar
[2012-02-29 22:48:00 -0500] hoover_damm: lol
[2012-02-29 22:48:00 -0500] hoover_damm: look at the link in http://community.opscode.com/cookbooks/jn_sysctl
[2012-02-29 22:48:00 -0500] hoover_damm: for your homepage atomic-penguin 
[2012-02-29 22:48:00 -0500] hoover_damm: actually it's spheromak 
[2012-02-29 22:48:00 -0500] hoover_damm: but LOL
[2012-02-29 22:48:00 -0500] hoover_damm: http://https//github.com/spheromak/cookbooks/tree/master/sysctl
[2012-02-29 22:49:00 -0500] spheromak: hah
[2012-02-29 22:49:00 -0500] hoover_damm: took me to homeimprovement.com/github.com/sphereomak/
[2012-02-29 22:49:00 -0500] spheromak: ill fix
[2012-02-29 22:49:00 -0500] hoover_damm: lol
[2012-02-29 22:49:00 -0500] spheromak: :)
[2012-02-29 22:49:00 -0500] spheromak: missing a :
[2012-02-29 22:49:00 -0500] spheromak: er double http:
[2012-02-29 22:49:00 -0500] spheromak: rather.. no clue how that happened
[2012-02-29 22:49:00 -0500] hoover_damm: omit the https
[2012-02-29 22:49:00 -0500] hoover_damm: just github.com/sphereomak...
[2012-02-29 22:49:00 -0500] hoover_damm: github will forward for you
[2012-02-29 22:49:00 -0500] spheromak: ah
[2012-02-29 22:49:00 -0500] spheromak: cause the edit function
[2012-02-29 22:49:00 -0500] spheromak: prepends http:// automagically
[2012-02-29 22:50:00 -0500] hoover_damm: yeah i figured that much
[2012-02-29 22:50:00 -0500] spheromak: sory my first real attempts at putting stuff on community site
[2012-02-29 22:50:00 -0500] hoover_damm: doh you don't update sysctl.conf?
[2012-02-29 22:50:00 -0500] spheromak: for URL
[2012-02-29 22:50:00 -0500] spheromak: fixed!
[2012-02-29 22:53:00 -0500] spheromak: it does
[2012-02-29 22:53:00 -0500] spheromak: it calls sysctl -n -w under the hood which should write sysctl.conf
[2012-02-29 22:54:00 -0500] spheromak: course on platforms where sysctl -w doens't exist it wont write
[2012-02-29 22:55:00 -0500] hoover_damm: desolation ~ # sysctl -nw vm.overcommit_memory=0
[2012-02-29 22:55:00 -0500] hoover_damm: 0
[2012-02-29 22:55:00 -0500] hoover_damm: desolation ~ # cat /etc/sysctl.conf | grep over
[2012-02-29 22:55:00 -0500] hoover_damm: vm.overcommit_memory = 1
[2012-02-29 22:55:00 -0500] hoover_damm: you don't have to fix it i'll just stick to mine
[2012-02-29 22:55:00 -0500] hoover_damm: I was just hoping you saved me time
[2012-02-29 22:55:00 -0500] spheromak: that on rhel or debian based ?
[2012-02-29 22:56:00 -0500] hoover_damm: that's gentoo
[2012-02-29 22:56:00 -0500] hoover_damm: root@chef1:/etc/chef# sysctl -n -w vm.overcommit_memory=1
[2012-02-29 22:56:00 -0500] hoover_damm: 1
[2012-02-29 22:56:00 -0500] hoover_damm: root@chef1:/etc/chef# cat /etc/sysctl.conf | grep over
[2012-02-29 22:56:00 -0500] hoover_damm: that's ubuntu
[2012-02-29 22:56:00 -0500] spheromak: yea
[2012-02-29 22:57:00 -0500] hoover_damm: so i'm fairly sure -w doesn't do what you think it does
[2012-02-29 22:57:00 -0500] hoover_damm:  -w     Use this option when you want to change a sysctl setting.
[2012-02-29 22:57:00 -0500] spheromak: weird
[2012-02-29 22:57:00 -0500] spheromak: yea
[2012-02-29 22:58:00 -0500] spheromak: i wrote this a while ago and thought it was functioning right. aparently i was mistaken :)
[2012-02-29 22:58:00 -0500] hoover_damm: nah i'm seeking a specific you likely didn't think of
[2012-02-29 22:58:00 -0500] hoover_damm: totally happens
[2012-02-29 22:58:00 -0500] hoover_damm: don't feel bad at /all/
[2012-02-29 22:59:00 -0500] spheromak: nah the shitter is that its a pita then to walk the collection to grab all the defined settings and regenerate the config
[2012-02-29 22:59:00 -0500] hoover_damm: I just don't want someone to run sysctl -p and blow out the knobs by accident
[2012-02-29 22:59:00 -0500] spheromak: yea
[2012-02-29 22:59:00 -0500] spheromak: for sure
[2012-02-29 22:59:00 -0500] spheromak: and you want it to come back on boot
[2012-02-29 22:59:00 -0500] spheromak: so do i
[2012-02-29 22:59:00 -0500] hoover_damm: heh want what I use?
[2012-02-29 22:59:00 -0500] spheromak: how are you doing the collect and write ?
[2012-02-29 23:00:00 -0500] hoover_damm: mind you I wrote this recipe a year and a half ago
[2012-02-29 23:00:00 -0500] spheromak: i've doen it before
[2012-02-29 23:00:00 -0500] hoover_damm: so if your jaw drops
[2012-02-29 23:00:00 -0500] hoover_damm: pardon
[2012-02-29 23:00:00 -0500] spheromak: sok
[2012-02-29 23:00:00 -0500] spheromak: my code is nasty :)
[2012-02-29 23:03:00 -0500] hoover_damm: https://github.com/damm/chef-sysctl
[2012-02-29 23:03:00 -0500] hoover_damm: not really pretty but does the job
[2012-02-29 23:03:00 -0500] spheromak: ewe :)
[2012-02-29 23:04:00 -0500] hoover_damm: sysctl "bob" do
[2012-02-29 23:04:00 -0500] hoover_damm: variables "vm.overcommit_memory" => 1
[2012-02-29 23:04:00 -0500] hoover_damm: done
[2012-02-29 23:04:00 -0500] spheromak: yea but you can redifine the same value this way
[2012-02-29 23:04:00 -0500] spheromak: in a run
[2012-02-29 23:05:00 -0500] spheromak: the key should be the resource name there are no redundant keys in the table. thinking that a write command should just dump running settings ala iptables-save and write that out
[2012-02-29 23:06:00 -0500] spheromak: alternative is to walk collection and grab all sysctl resources and generate the config. which will happen many times in a single run if you define alot of variables.  tho that could be a delayed action write. should make it only a single walk/write
[2012-02-29 23:18:00 -0500] hoover_damm: really it should be a 2 part process, part 1 grab the existing sysctl, part 2 append what you want, part 3 write the finish file
[2012-02-29 23:18:00 -0500] hoover_damm: then run sysctl -p
[2012-02-29 23:18:00 -0500] hoover_damm: fail on errors
[2012-02-29 23:18:00 -0500] hoover_damm: s/2 part/4 part
[2012-02-29 23:18:00 -0500] spheromak: yea more like cron
[2012-02-29 23:18:00 -0500] spheromak: which is doable
[2012-02-29 23:19:00 -0500] spheromak: easy way is to just clobber /etc/sysctl.conf over and over :)
[2012-02-29 23:19:00 -0500] hoover_damm: oh yeah
[2012-02-29 23:20:00 -0500] hoover_damm: create 500 different unique entries
[2012-02-29 23:20:00 -0500] hoover_damm: that could be a lot of forking action
[2012-02-29 23:20:00 -0500] spheromak: nah i mean for each call to write action you collect and nuke config
[2012-02-29 23:20:00 -0500] hoover_damm: i know
[2012-02-29 23:20:00 -0500] spheromak: but yea
[2012-02-29 23:20:00 -0500] hoover_damm: as I said it's like 2 years old code
[2012-02-29 23:20:00 -0500] spheromak: its terrible if you have alot of settings :)
[2012-02-29 23:20:00 -0500] spheromak: yea so is this ;)
[2012-02-29 23:20:00 -0500] spheromak: well 1 year i just cleaned it up and posted on a whim yesterday
[2012-02-29 23:21:00 -0500] spheromak: this is a common thing i run into tho
[2012-02-29 23:21:00 -0500] spheromak: needing to collect all resources and write some file
[2012-02-29 23:21:00 -0500] spheromak: seems ripe for some lifting
[2012-02-29 23:30:00 -0500] c_t: question for the ages
[2012-02-29 23:30:00 -0500] c_t: can you use include_attribute in an attribute file, or only recipes?

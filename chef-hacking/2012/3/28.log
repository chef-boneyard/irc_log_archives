[2012-03-28 16:18:07 -0400] hoover_damm: matthewvermaak, /sc
[2012-03-28 16:18:11 -0400] hoover_damm: huh
[2012-03-28 16:18:27 -0400] hoover_damm: don't you really just hate it when someone's name is stuck in your keyboard and ..
[2012-03-28 16:18:31 -0400] hoover_damm: lol
[2012-03-28 16:18:46 -0400] hoover_damm: i'm gonna blame my cats as I forgot to lock my keyboard again
[2012-03-28 16:36:05 -0400] hoover_damm: anyone have any examples of good patterns to share with a client who's hosting multiple chef-repos and wants to share their cookbooks aroun
[2012-03-28 16:36:08 -0400] hoover_damm: around?
[2012-03-28 16:36:17 -0400] hoover_damm: I mean I can explain to them what good patterns to follow and help them
[2012-03-28 16:36:39 -0400] hoover_damm: but as my clients are all about learning and also being self suffecient (they love having me, but bus theory is always thrown out)
[2012-03-28 16:37:03 -0400] hoover_damm: sitting here reviewing some code, and they did an excellent job
[2012-03-28 16:37:16 -0400] hoover_damm: just thinking some examples would be better
[2012-03-28 16:37:19 -0400] hoover_damm: so perhaps I'll need to make some
[2012-03-28 16:37:53 -0400] hoover_damm: and have you ever just wished for a package recipe?
[2012-03-28 16:38:24 -0400] hoover_damm: perhaps it's something I liked about EY that was wrong, but I rather liked hitting node['packages'].each do |p|
[2012-03-28 16:38:41 -0400] hoover_damm: so that way all your packages are defined in 1 spot
[2012-03-28 16:38:50 -0400] hoover_damm: instead of 50 cookbooks defining various packages
[2012-03-28 16:38:56 -0400] hoover_damm: and if you want to know how you got there, grep was your friend
[2012-03-28 16:38:57 -0400] hoover_damm: :|
[2012-03-28 16:39:11 -0400] hoover_damm: perhaps my idea is laced with bad thoughts too
[2012-03-28 17:22:06 -0400] holoway: hoover_damm: I go back and forth
[2012-03-28 17:22:20 -0400] holoway: for non-critical application stuff, I think it kind of makes sense
[2012-03-28 17:22:26 -0400] holoway: for example, to get vim installed
[2012-03-28 17:33:59 -0400] hoover_damm: holoway, for non-critical totally
[2012-03-28 17:34:02 -0400] hoover_damm: for critical, i'm torn
[2012-03-28 17:37:41 -0400] c_t: I've made recipes that are just packages
[2012-03-28 18:02:26 -0400] jtimberman: hoover_damm: i totally do that in my "workstation" recipe
[2012-03-28 18:22:23 -0400] hoover_damm: cookbooks that just install utility packages suck
[2012-03-28 18:22:32 -0400] hoover_damm: know how often you add utilities?
[2012-03-28 18:22:46 -0400] hoover_damm: follow what jtimberman just said...
[2012-03-28 18:29:33 -0400] jtimberman: dude someone might uninstall things
[2012-03-28 18:30:47 -0400] jtimberman: c_t: I've been made fun of on the internet for having cookbooks that just install packages (man, cron, lvm, and a couple others)
[2012-03-28 18:35:29 -0400] hoover_damm: jtimberman, right, there's a way to uninstall too
[2012-03-28 18:35:42 -0400] hoover_damm: jtimberman, node['utility']['uninstall_packages'].each do |p|
[2012-03-28 18:36:10 -0400] hoover_damm: jtimberman, we're just talking about a way to describe our packages, and then do it dry
[2012-03-28 18:36:24 -0400] hoover_damm: having another hash for pakages to uninstall
[2012-03-28 18:36:28 -0400] hoover_damm: is not a big deal
[2012-03-28 18:36:35 -0400] hoover_damm: packages*
[2012-03-28 18:37:26 -0400] c_t: jtimberman: I've made cookbooks that are basically "install all these packages that I'm going to need and be done with it"
[2012-03-28 18:37:42 -0400] c_t: or a very special cookbook devoted to CPAN goodies.
[2012-03-28 18:39:42 -0400] hoover_damm: ick
[2012-03-28 18:39:44 -0400] hoover_damm: you poor thing
[2012-03-28 18:39:48 -0400] hoover_damm: you should see a doctor about that c_t
[2012-03-28 18:40:19 -0400] c_t: I've done a remarkable amount of getting chef to work with old-timey stuff
[2012-03-28 18:40:40 -0400] c_t: hell, apparently I was the first person to ever bother adding a mod_perl recipe to the apache2 cookbook
[2012-03-28 18:40:56 -0400] c_t: at one point I cranked out an apache13 cookbook (merely adapting the apache2 one, but still)
[2012-03-28 18:41:15 -0400] c_t: that one's a bit trickier, since you also need forward ported packages for it
[2012-03-28 18:43:26 -0400] hoover_damm: rofl
[2012-03-28 18:43:28 -0400] hoover_damm: you poor thing
[2012-03-28 18:43:40 -0400] hoover_damm: I'm so thankful not to be in a job where i support old distros
[2012-03-28 18:43:51 -0400] hoover_damm: if i was at the same job I had back in 2008... I could be setting up Chef for FreeBSD 3.2
[2012-03-28 18:43:54 -0400] hoover_damm: and 2.2
[2012-03-28 18:43:55 -0400] hoover_damm: :|
[2012-03-28 18:52:26 -0400] c_t: oh, I can use new distros
[2012-03-28 18:52:39 -0400] c_t: it does at times require some hoop jumping though
[2012-03-28 19:09:30 -0400] newb_: I am trying out chef on VirtualBox VMs and currently allocating 2GB RAM to each VM. Considering I won't work with more than 4 - 5 nodes at a time, how much (minimum) virtual RAM could I get away with to each VM, and the VM hosting the chef server?
[2012-03-28 19:09:38 -0400] newb_: For example, if I shrunk the virtual RAM allocated to the chef server from 2GB (currently) to 512MB, would it start behaving in an undefined manner? Or could I expect it to handle the sudden loss of RAM in a graceful manner and continue to operate properly (provision 4 - 5 nodes at a time with full search functionality)
[2012-03-28 19:11:59 -0400] hoover_damm: sometimes yep
[2012-03-28 21:28:34 -0400] fujin`: btm: lol just add --noop bro
[2012-03-28 21:28:39 -0400] fujin`: 2988 is too agile
[2012-03-28 21:40:50 -0400] corp: anyone know why ohai's linux network plugin uses this command to retrieve an interface's ip address; ip route show scope link
[2012-03-28 21:40:53 -0400] corp: ?
[2012-03-28 21:43:09 -0400] hoover_damm: does it not work?
[2012-03-28 21:43:40 -0400] corp: i'm having an issue on a linux vserver which shows the host ip as the src
[2012-03-28 21:43:56 -0400] corp: even though ifconfig or ip addr shows the correct IP
[2012-03-28 21:45:15 -0400] laurent\: corp: can you provide a paste of "ip addr" and "ip route" please ?
[2012-03-28 21:46:18 -0400] corp: yup, one moment
[2012-03-28 21:48:27 -0400] fujin: corp: i know that plugin has been through some changes lately, have you tried latest master of ohai?
[2012-03-28 21:48:45 -0400] laurent\: i think he's already using ohai 0.6.12
[2012-03-28 21:48:59 -0400] corp: using 0.6.12
[2012-03-28 21:49:09 -0400] fujin: oic
[2012-03-28 21:49:12 -0400] fujin: right it is using ip route, derp
[2012-03-28 21:50:05 -0400] laurent\: i'm curious to see 'ip r' and 'ip a' from vserver host and guest in fact :)
[2012-03-28 21:59:55 -0400] corp: https://gist.github.com/e4f7b36a10dda2c5144a
[2012-03-28 21:59:58 -0400] corp: thats the guest
[2012-03-28 22:01:04 -0400] corp: this is the host https://gist.github.com/2230942
[2012-03-28 22:01:40 -0400] hoover_damm: chmod 000 /usr/bin/ip?
[2012-03-28 22:01:48 -0400] hoover_damm: well actually you'd need to rm it
[2012-03-28 22:02:02 -0400] corp: ?
[2012-03-28 22:02:11 -0400] hoover_damm: corp, you should file a ticket at least on the notion that you can switch back between ifconfig / iproute2 on a knob
[2012-03-28 22:02:20 -0400] hoover_damm: corp, https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/linux/network.rb#L53
[2012-03-28 22:02:31 -0400] hoover_damm: otherwise
[2012-03-28 22:02:31 -0400] corp: ah
[2012-03-28 22:02:37 -0400] hoover_damm: https://github.com/opscode/ohai/blob/master/lib/ohai/plugins/linux/network.rb#L220
[2012-03-28 22:02:41 -0400] hoover_damm: then the old pattern
[2012-03-28 22:02:44 -0400] hoover_damm: that worked for you
[2012-03-28 22:02:56 -0400] fujin: holoway: around?
[2012-03-28 22:03:01 -0400] corp: alright. dont want to kill ip :)
[2012-03-28 22:03:36 -0400] holoway: fujin: aye
[2012-03-28 22:03:46 -0400] corp: i'm more curious as to the reason for using ip route instead of ip addr to parse the ip address
[2012-03-28 22:04:03 -0400] fujin: holoway: yo I dm'd you, about dynect_rest?
[2012-03-28 22:04:23 -0400] holoway: fujin: oh? on irc?
[2012-03-28 22:04:24 -0400] fujin: holoway: looksl ike there is a bugfix that you merged in 1mo~ ago, would be nice to pump out a version?
[2012-03-28 22:04:35 -0400] fujin: nay twitter thought it would be easier =P
[2012-03-28 22:04:40 -0400] holoway: fujin: you want maint?
[2012-03-28 22:04:41 -0400] laurent\: corp: what's "ohai ipaddress" result ? it should be returning 217.118.19.48
[2012-03-28 22:04:45 -0400] holoway: fujin: (or at least shared)
[2012-03-28 22:04:56 -0400] fujin: holoway: sure!
[2012-03-28 22:05:00 -0400] fujin: https://github.com/adamhjk/dynect_rest/commit/48e68f0ef0115c4e671334e86a4faae8a8e58a18
[2012-03-28 22:05:04 -0400] holoway: you fujin on the rubygems?
[2012-03-28 22:05:19 -0400] holoway: fujin: be good to have someone else with the creds
[2012-03-28 22:05:20 -0400] fujin: I rewrote the dynect cookbook to use Fog bug fog's dynect support doesn't bring back the rdata/ttl/serial
[2012-03-28 22:05:24 -0400] fujin: holoway: yeah, fujin on rubygems too.
[2012-03-28 22:05:28 -0400] holoway: ok
[2012-03-28 22:05:52 -0400] fujin: if you flip commit on dynect_rest I'll bump gem versions and ship a new one out, if you like?
[2012-03-28 22:05:59 -0400] corp: laurent:   "217.118.19.39"
[2012-03-28 22:06:23 -0400] corp: laurent\: which comes from here: 217.118.19.0/26 dev eth0  proto kernel  scope link  src 217.118.19.39
[2012-03-28 22:06:26 -0400] laurent\: corp: ok i see
[2012-03-28 22:07:18 -0400] laurent\: a check is missing, it shouldn't use 217.118.19.39 because 217.118.19.39 is not an ip address on that node
[2012-03-28 22:07:59 -0400] laurent\: corp: if you're curious enough reasons are here: http://tickets.opscode.com/browse/OHAI-325
[2012-03-28 22:08:39 -0400] holoway: fujin: whats your email addy on rubygems?
[2012-03-28 22:08:40 -0400] laurent\: nonetheless i missed that test
[2012-03-28 22:08:50 -0400] holoway: fujin: exactly
[2012-03-28 22:09:40 -0400] holoway: fujin: you got it on gh already, doing rubygems now
[2012-03-28 22:09:47 -0400] holoway: (you've got the bit for adamhjk/dynect_rest)
[2012-03-28 22:10:09 -0400] fujin: aj@junglist.gen.nz prob
[2012-03-28 22:10:49 -0400] fujin: holoway: what versioning scheme are you using?
[2012-03-28 22:11:31 -0400] fujin: ah I'll just do a minor version bump since it's two patches. ?
[2012-03-28 22:11:40 -0400] holoway: fujin: sre!
[2012-03-28 22:11:41 -0400] holoway: :)
[2012-03-28 22:12:07 -0400] holoway: doneburger
[2012-03-28 22:12:09 -0400] holoway: you are gtg
[2012-03-28 22:12:11 -0400] fujin: just going to check the dynect cookbook to make sure I don't break that with anything. :)
[2012-03-28 22:12:13 -0400] fujin: holoway: thanks! <3 /hug
[2012-03-28 22:12:19 -0400] holoway: fujin: thank you, man
[2012-03-28 22:12:25 -0400] btm: corp: ifconfig is part of net-tools, which is deprecated/abandoned/doesn't play well with others. You should be able to find all the history on OHAI-325 that laurent\ sent you or in the chef-dev archives.
[2012-03-28 22:12:33 -0400] holoway: I appreciate you always being willing to fish, knowumsayin?
[2012-03-28 22:13:21 -0400] btm: fujin: --noop isn't agile. I run master in production. #agile.
[2012-03-28 22:13:25 -0400] fujin: I fight for the user
[2012-03-28 22:13:46 -0400] fujin: fight the user? I don't know
[2012-03-28 22:13:46 -0400] btm: fujin: but the lolz.
[2012-03-28 22:14:02 -0400] fujin: btm: I haven't even re-read your response
[2012-03-28 22:14:03 -0400] btm: fujin: I just left that one alone.
[2012-03-28 22:14:07 -0400] fujin: skimmed followups and got to that one
[2012-03-28 22:14:11 -0400] fujin: furrowed brow, desk flip engage
[2012-03-28 22:14:31 -0400] fujin: I went to the code for serenity -_-
[2012-03-28 22:18:09 -0400] laurent\: corp: would you be able to try that https://gist.github.com/2231034 ?
[2012-03-28 22:18:25 -0400] laurent\: (i haven't tested yet) :)
[2012-03-28 22:21:13 -0400] laurent\: ok, that's not a good quickfix
[2012-03-28 22:21:46 -0400] laurent\: i guess i should stop drinking wine right now :)
[2012-03-28 22:23:08 -0400] laurent\: oh it's because i removed the parenthesis !
[2012-03-28 22:24:23 -0400] laurent\: corp: i've edited the gist
[2012-03-28 22:25:09 -0400] corp: one sec
[2012-03-28 22:25:14 -0400] laurent\: i can provide the whole lib/ohai/plugins/linux/network.rb to test if it's easier
[2012-03-28 22:25:15 -0400] corp: im drinking free beer
[2012-03-28 22:25:28 -0400] corp: nah i'll kjust edit it
[2012-03-28 22:28:37 -0400] corp: works
[2012-03-28 22:29:49 -0400] laurent\: ok thanks a lot, i'll provide a patch with a new test case
[2012-03-28 22:30:14 -0400] corp: sweet
[2012-03-28 22:30:18 -0400] corp: could you explain the patch?
[2012-03-28 22:31:23 -0400] btm: This might be related? I'm not really paying attention, sorry. http://tickets.opscode.com/browse/OHAI-343
[2012-03-28 22:34:01 -0400] laurent\: corp: ok, i proposed we set ipaddress from the linux network plugin when using iproute2 to make sure we return the best relevant ipaddress. i was needing that because i have quite a lot of servers having more than one ip per iface.
[2012-03-28 22:34:11 -0400] laurent\: corp: an example here : http://tickets.opscode.com/browse/OHAI-325?focusedCommentId=22459&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-22459
[2012-03-28 22:35:09 -0400] corp: i se
[2012-03-28 22:35:16 -0400] corp: fair enough
[2012-03-28 22:35:44 -0400] laurent\: on a vserver guest you have kind of a mixed network setup, as you can see ip route is telling you that the kernel should use 217.118.19.39 to reach the 217.118.19.0/26 network on eth0
[2012-03-28 22:37:01 -0400] laurent\: i should have thought of this one, the patch is just making sure we select an ipaddress that is actually set on eth0 (in this case)
[2012-03-28 22:37:33 -0400] ezmobius: hey corp!
[2012-03-28 22:37:45 -0400] ezmobius: same corp  im thikking of?
[2012-03-28 22:37:53 -0400] corp: ezmobius: yup
[2012-03-28 22:37:58 -0400] ezmobius: hows life man?
[2012-03-28 22:38:01 -0400] corp: greetings from chile
[2012-03-28 22:38:23 -0400] corp: laurent\: yep. i get it now
[2012-03-28 22:38:27 -0400] corp: laurent\: thanks
[2012-03-28 22:40:52 -0400] laurent\: i'm glad you understood what i was trying to explain, i tend to make quite complex incomprehensible long sentences :)
[2012-03-28 22:42:32 -0400] corp: i was just being lazy not reading the code
[2012-03-28 22:43:46 -0400] fujin: holoway: thanks, 0.4.1 shipped, opscode dynect cookbook does :upgrade so will reap the benefits
[2012-03-28 22:44:07 -0400] fujin: holoway: i am working on a fix to the fqdn / Array bug too. long term I want to get dynect working in Fog, we use fog for lots of other stuff.
[2012-03-28 23:07:28 -0400] hoover_damm: fujin, that would be cool
[2012-03-28 23:48:42 -0400] c_t: grrr
[2012-03-28 23:48:48 -0400] c_t: motherfucking moon is starting to come back

[2012-12-24 17:45:25 -0500] sethvargo: CHEF-3721
[2012-12-24 17:46:02 -0500] nathenharvey: sorry, I thought the twitter convo was 'bout README format (only paying 50% attention)
[2012-12-24 17:46:22 -0500] sethvargo: ooo sorry. 50% of it was, so you're 100% right
[2012-12-24 17:46:26 -0500] sethvargo: but I'm talking about a different thread
[2012-12-24 17:46:32 -0500] sethvargo: the recent release of moneta broke chef :(
[2012-12-24 17:47:01 -0500] nathenharvey: I've seen a bit of that in the twitterverse
[2012-12-24 17:47:11 -0500] sethvargo: Yea, it's on the mailing list
[2012-12-24 17:47:15 -0500] jtimberman: specifically, it broke chef if you installed via RubyGems.
[2012-12-24 17:47:20 -0500] sethvargo: right
[2012-12-24 17:47:25 -0500] sethvargo: omnibus is still functional
[2012-12-24 17:47:28 -0500] sethvargo: but it still sucks
[2012-12-24 17:47:30 -0500] jtimberman: Or if you're installing a gem that has a dependency on it inside of Chef's ruby environment
[2012-12-24 17:47:40 -0500] jtimberman: I concur that it sucks :)
[2012-12-24 17:48:03 -0500] sethvargo: can we just lock moneta to a lower version (with a =, not ~>) until a more permanent soln is found
[2012-12-24 17:48:05 -0500] sethvargo: ^?
[2012-12-24 17:48:07 -0500] nathenharvey: is there a PR?  looking at the ticket I see a patch but not a PR.  in any case, I think if there's a specific version of moneta that is known to be good we should use that version explicitly
[2012-12-24 17:48:39 -0500] sethvargo: 0.6.0 is the "good" version
[2012-12-24 17:48:55 -0500] jtimberman: moneta 0.6.0 was the only released version for a really long time, i think pinning to that version specifically is good.
[2012-12-24 17:49:13 -0500] sethvargo: send
[2012-12-24 17:49:16 -0500] sethvargo: second*
[2012-12-24 17:49:20 -0500] sethvargo: wow, i really can't type todady
[2012-12-24 17:49:24 -0500] sethvargo: case in point
[2012-12-24 17:49:28 -0500] jtimberman: sethvargo: holiday binge drinking will do that
[2012-12-24 17:49:38 -0500] jtimberman: ;)
[2012-12-24 17:49:46 -0500] sethvargo: hahahaha i haven't started yet!
[2012-12-24 17:49:50 -0500] nathenharvey: s.add_dependency "moneta", "= 0.6.0"
[2012-12-24 17:50:19 -0500] ssd7: Dan has a patch to completely remove moneta, so longer term we can potentially backport that to Chef 10.  +1 on locking the moneta version on 10-stable for now.
[2012-12-24 17:50:48 -0500] btm: I doubt they'll release ~> 0.6.0, but I like that better than = 0.6.0
[2012-12-24 17:51:12 -0500] jtimberman: 0.6.1 wouldn't happen, there's already a 0.7.1.
[2012-12-24 17:51:27 -0500] jtimberman: its a completely different person managing the project now.
[2012-12-24 17:51:34 -0500] sethvargo: Here's my thoughts - it's currently 100% broken on a gem install. There are definitely long term solutions, but I'm in favor of the quickest, least political, and least likely to break change
[2012-12-24 17:51:38 -0500] btm: Folks are always like "omg why did you guyz set such restrictive constraints, now X and Y break loading" and then "omg that version broke, set it to the last one." :)
[2012-12-24 17:52:12 -0500] btm: well. we're not going to rush, because we don't want to fall on our swords, but I can probably ship a release before christmas.
[2012-12-24 17:52:55 -0500] sethvargo: I'm not saying we should rush, but I don't want to make a huge change to fix this small issue, when we could just lock the version constraint and continue moving forward
[2012-12-24 17:52:55 -0500] btm: sethvargo: can you work on identifying why moneta=0.7.0 sucks and document that on CHEF-3721? links to upstream tickets would be awesome.
[2012-12-24 17:53:21 -0500] ssd7: sethvargo: Right, I haven't heard anyone disagree with locking the version down for now.
[2012-12-24 17:53:29 -0500] jtimberman: btm: moneta 0.6.0 -> 0.7.0 is a complete rewrite; https://github.com/minad/moneta/blob/master/CHANGES#L14
[2012-12-24 17:53:34 -0500] btm: sethvargo: right. as ssd7 points out, we do have a patch in 11 to remove moneta, but 'longer term'
[2012-12-24 17:53:43 -0500] jtimberman: identifying the specific part that makes it break is problematic at best.
[2012-12-24 17:53:50 -0500] sethvargo: btm: it doesn't suck (well, not in this context) it's completely rewritten
[2012-12-24 17:53:56 -0500] sethvargo: but only a minor version bump (yay semver)
[2012-12-24 17:54:27 -0500] btm: jtimberman: why?
[2012-12-24 17:54:29 -0500] jtimberman: wycats's repo went from no commits in 2 years to "move to this fork" 5 days ago.
[2012-12-24 17:54:39 -0500] jtimberman: https://github.com/wycats/moneta/commits/master
[2012-12-24 17:54:45 -0500] jtimberman: because, uh, rounder wheel?
[2012-12-24 17:54:45 -0500] btm: we don't need to identify what changed, just what doesn't work.
[2012-12-24 17:55:21 -0500] btm: the error in CHEF-3721 doesn't look like it'd be that hard to identify.
[2012-12-24 17:56:35 -0500] btm: I would do it, but I should review existing reviewed blockers if we're going to kick out a release. sethvargo sounds pumped to help, which is why I asked him to work on fully developing CHEF-3721.
[2012-12-24 17:56:47 -0500] jtimberman: btm: "BasicFile" was removed.
[2012-12-24 17:57:30 -0500] jtimberman: uh -- 5 weeks ago 24d89b0 Daniel Mendler  (juno-v0.1.0) refactored moneta and renamed to juno
[2012-12-24 17:57:40 -0500] sethvargo: lol "pumped" might be a bit extreme :)
[2012-12-24 17:58:00 -0500] btm: sethvargo: whut'evs pumpy mcpumperson ;)
[2012-12-24 17:58:21 -0500] jtimberman: haha
[2012-12-24 18:00:00 -0500] sethvargo: so here's the big q - do we fix moneta/juno/whatever-the-fuck-the-gem-is-now-called support and backport? Or do we remove the dependency (which sounds like has already been started) and backport?
[2012-12-24 18:00:10 -0500] btm: so if basicfile is gone. did something replace it? Can we get a bit of a story about this on the ticket?
[2012-12-24 18:00:35 -0500] btm: sethvargo: we'll change the moneta constraint today, because it is simple and we can feel better about not having a beta cycle.
[2012-12-24 18:00:51 -0500] sethvargo: btm:  :)
[2012-12-24 18:01:00 -0500] jtimberman: btm: there's a 'file' adapter in the moneta source now
[2012-12-24 18:01:58 -0500] nathenharvey: I'm dropping out of this for now (cookies burning in the oven) get back to me when we're discussing IMPORTANT changes like the format of the readme ;)
[2012-12-24 18:02:14 -0500] sethvargo: nathenharvey: hater :-p
[2012-12-24 18:03:24 -0500] btm: jtimberman: a complete explanation on the ticket would be preferred to telling just me.
[2012-12-24 18:03:40 -0500] nathenharvey: sethvargo:  yep.  merry christmas all'
[2012-12-24 18:19:18 -0500] jtimberman: btm: yeah, i totally don't have a complete explanation of anything, just observation of what happened with the repositories.
[2012-12-24 18:20:31 -0500] sethvargo: it looks like someone new took over and went ham on the project, which is fine, but then released a new version without following semver
[2012-12-24 18:21:45 -0500] jtimberman: well, it's not just not following semver, it at least appears that the basic_file class was not preserved, probably oversight because of all the other k/v stores it supports, and are likely to be more common when used inside an application
[2012-12-24 18:22:26 -0500] btm: semver wouldn't have mattered anyway since we lack a constraint.
[2012-12-24 18:22:26 -0500] ssd7: Heh, well, as we were discussing in a different channel they didn't *technically* violate the rules; but someone really needs to explain "spirit of the law" to those guys/gals
[2012-12-24 18:22:55 -0500] jtimberman: ssd7: To the moneta maintainer?
[2012-12-24 18:23:02 -0500] ssd7: jtimberman: Indeed.
[2012-12-24 18:23:17 -0500] jtimberman: man, just put gem "moneta", "~> 0.6.0" in your gemfile, man?
[2012-12-24 18:23:33 -0500] jtimberman: (that's the common type response that I see from this kind of topic)
[2012-12-24 18:25:38 -0500] btm: # == RubyGems Rational Versioning
[2012-12-24 18:25:58 -0500] btm: ^-- I hadn't heard of that until I broke it reasonable
[2012-12-24 18:26:04 -0500] btm: s/reasonable/recently/
[2012-12-24 18:30:53 -0500] jtimberman: http://tickets.opscode.com/browse/CHEF-3721?focusedCommentId=30698&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-30698
[2012-12-24 18:31:04 -0500] jtimberman: btm: Comment with my discovery / observation
[2012-12-24 18:36:32 -0500] github-bawt: [chef] btm created 10.16.4-release (+5 new commits): http://git.io/sme7Lw
[2012-12-24 18:36:32 -0500] github-bawt: chef/10.16.4-release ba63bb6 Fletcher Nichol: [CHEF-3597] Handle frozen strings in knife.rb chef_server_url var.
[2012-12-24 18:36:33 -0500] github-bawt: chef/10.16.4-release 1206d59 Xabier de Zuazo: [CHEF-3632] All providers have whyrun enabled by default due to RemoteDirectory
[2012-12-24 18:36:33 -0500] github-bawt: chef/10.16.4-release 2962183 Xabier de Zuazo: [CHEF-3632] removed duplicated provider#whyrun_supported? method
[2012-12-24 18:39:11 -0500] github-bawt: [chef] btm pushed 1 new commit to 10.16.4-release: http://git.io/8YXH-A
[2012-12-24 18:39:11 -0500] github-bawt: chef/10.16.4-release ad662f5 Bryan McLellan: 10.16.4.rc.1
[2012-12-24 18:41:41 -0500] btm: chef 10.16.4.rc.1 up on rubygems.org now. includes CHEF-3672, CHEF-3632, CHEF-3597, CHEF-3574, CHEF-3564, CHEF-3577, CHEF-3721. please test it an report back what testing you did here folks.
[2012-12-24 19:03:22 -0500] jtimberman: https://gist.github.com/4370396
[2012-12-24 19:05:42 -0500] jtimberman: updated gist, I previously had an error per the 10.16.2 file
[2012-12-24 19:09:27 -0500] btm: 'At year-end, a maximum of 56 hours/7 days PTO may be carried over within the PTO bank to the next calendar year.  Any PTO in excess of 56 hours will be lost from the PTO bank at year-end.
[2012-12-24 19:09:42 -0500] btm: forget that
[2012-12-24 19:09:59 -0500] btm: 'knife _10.16.4.rc.1_ ec2 server create -I ami-dc66d8b5 -g btm -S btm -r 'recipe[wordpress]' -d ubuntu12.10-gems -x ubuntu' <-- worked with a minor change to the template to add '--pre' to chef gem install.
[2012-12-24 19:45:34 -0500] btm: knife _10.16.4.rc.1_ bootstrap -N os-btm-test -d ubuntu12.10-gems -x ubuntu -r 'recipe[postgresql]' --sudo 172.31.6.53
[2012-12-24 19:45:53 -0500] btm: that worked fine for me too (ubuntu 12.10 again, just on openstack instead of ec2)
[2012-12-24 20:04:05 -0500] ssd7: Bootstrapping on 12.10 with gems works here as well.
[2012-12-24 20:32:41 -0500] miketheman: will there be an associated jira 10.16.4 release to show all the tickets included in this version?
[2012-12-24 20:34:09 -0500] btm: knife _10.16.4.rc.1_ azure server create -R btm-knife-test2 -m "East US" -I "b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-12_04_1-LTS-amd64-server-20121218-en-us-30GB" --host-name "btm-knife-test2" -z "Small" --ssh-user btm --ssh-password 'test123!' --bootstrap-version 10.16.4.rc.1 -r 'recipe[nginx]' -d ubuntu12.04-gems <-- worked fine (against azure and ubuntu 12.04 + nginx recipe)
[2012-12-24 20:34:21 -0500] btm: miketheman: of course.
[2012-12-24 20:35:57 -0500] miketheman: btm: thanks. Was looking in jira right now, didn't see it yet
[2012-12-24 20:36:32 -0500] btm: miketheman: did you see the list I've posted on twitter + IRC?
[2012-12-24 20:39:20 -0500] miketheman: saw it on twitter
[2012-12-24 20:41:52 -0500] github-bawt: [chef] btm pushed 1 new commit to 10.16.4-release: http://git.io/H7j8fQ
[2012-12-24 20:41:53 -0500] github-bawt: chef/10.16.4-release 2dab51f Bryan McLellan: 10.16.4 release
[2012-12-24 20:49:56 -0500] btm: 10.16.4 is on rubygems. omnibuild is running, I think.
[2012-12-24 21:03:16 -0500] github-bawt: [chef] btm pushed 2 new commits to 10-stable: http://git.io/32f3bg
[2012-12-24 21:03:16 -0500] github-bawt: chef/10-stable eb5e9f1 Bryan McLellan: Add version.rb files to .gitattributes...
[2012-12-24 21:03:17 -0500] github-bawt: chef/10-stable 8d7927b Bryan McLellan: Merge branch '10.16.4-release' into 10-stable
[2012-12-24 21:46:15 -0500] github-bawt: [chef] btm pushed 1 new commit to 10.16.4-release: http://git.io/vIrIkA
[2012-12-24 21:46:16 -0500] github-bawt: chef/10.16.4-release 82ce467 Bryan McLellan: Save @config[:knife] before tests...
[2012-12-24 21:46:29 -0500] github-bawt: [chef] btm tagged 10.16.4 at 10.16.4-release: http://git.io/rT6Bwg
[2012-12-24 22:10:49 -0500] github-bawt: [chef] btm pushed 1 new commit to 10.16.4-release: http://git.io/U_rvEA
[2012-12-24 22:10:52 -0500] github-bawt: chef/10.16.4-release baada4b Lamont Granquist: CHEF-3718: pin systemu version for windows
[2012-12-24 22:11:05 -0500] github-bawt: [chef] btm tagged 10.16.4 at 10.16.4-release: http://git.io/rT6Bwg
[2012-12-24 22:11:22 -0500] github-bawt: [chef] btm pushed 1 new commit to 10-stable: http://git.io/sR6I0w
[2012-12-24 22:11:22 -0500] github-bawt: chef/10-stable 22bac99 Bryan McLellan: Merge branch '10.16.4-release' into 10-stable

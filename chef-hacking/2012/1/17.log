[2012-01-17 15:47:00 -0500] jtimberman: omg hai guise
[2012-01-17 16:34:00 -0500] yfeldblum: morning, jt
[2012-01-17 16:35:00 -0500] yfeldblum: is a "high guise" a mask that you were so that no-one can tell that you're high?
[2012-01-17 16:35:00 -0500] yfeldblum: wear*
[2012-01-17 18:27:00 -0500] github-bawt: [chef] btm pushed 1 new commit to master: http://git.io/KaxDdg
[2012-01-17 18:27:00 -0500] github-bawt: [chef/master] CHEF-2863: make sure wget is installed for ubuntu apt bootstrap - Bryan McLellan
[2012-01-17 18:36:00 -0500] github-bawt: [omnibus] btm pushed 1 new commit to master: http://git.io/Rg7N7Q
[2012-01-17 18:36:00 -0500] github-bawt: [omnibus/master] Check to see if we download an empty file and error sanely - Bryan McLellan
[2012-01-17 18:43:00 -0500] github-bawt: [omnibus] btm pushed 1 new commit to master: http://git.io/ihLopg
[2012-01-17 18:43:00 -0500] github-bawt: [omnibus/master] CHEF-2866: Ensure we are on the master branch when we build - Bryan McLellan
[2012-01-17 19:20:00 -0500] github-bawt: [chef] btm pushed 1 new commit to master: http://git.io/DFH1Dw
[2012-01-17 19:20:00 -0500] github-bawt: [chef/master] ignore autogenerated content on merge - Bryan McLellan
[2012-01-17 21:15:00 -0500] github-bawt: [chef] btm pushed 1 new commit to master: http://git.io/Lwjq4w
[2012-01-17 21:15:00 -0500] github-bawt: [chef/master] Merge branch '0.10.6-rc' - Bryan McLellan
[2012-01-17 21:27:00 -0500] KarlHungus: hi
[2012-01-17 21:28:00 -0500] KarlHungus: is it possible to override the freebsd package provider for all recipes?
[2012-01-17 21:34:00 -0500] fujin: Yes, of course. I recently had to do this for a client because their opinions for how freebsd should use the package manager differ to
[2012-01-17 21:34:00 -0500] fujin: well, everyone
[2012-01-17 21:34:00 -0500] fujin: seems to be quite common with freebsd
[2012-01-17 21:34:00 -0500] fujin: "oh no i don't like it like that <rewrite provider>"
[2012-01-17 21:35:00 -0500] fujin: KarlHungus: You can use a library in a cookbook and override the freebsd package provider class
[2012-01-17 21:36:00 -0500] KarlHungus: fujin: frankly, parts of the freebsd package provider are simply flawed
[2012-01-17 21:36:00 -0500] fujin: yeah yeah. I know
[2012-01-17 21:37:00 -0500] fujin: KarlHungus: feel free to submit issues, do the contributing process then supply patches
[2012-01-17 21:37:00 -0500] KarlHungus: fujin: i will, absolutely
[2012-01-17 21:37:00 -0500] KarlHungus: but to test my fixes, i need to override first =)
[2012-01-17 21:37:00 -0500] fujin: half of the shit in freebsd is bat-fuck-insane
[2012-01-17 21:37:00 -0500] fujin: not designed for automation
[2012-01-17 21:37:00 -0500] fujin: it doesn't work. blah blah
[2012-01-17 21:37:00 -0500] KarlHungus: no. it does work. most of the time =)
[2012-01-17 21:38:00 -0500] fujin: I'm not going down this road again
[2012-01-17 21:38:00 -0500] KarlHungus: thats arguable. its a different methodology from linux, for sure.
[2012-01-17 21:39:00 -0500] KarlHungus: my current issue is that the provider uses 'whereis -s #{@new_resource.package_name}"' which doesn't work if whereis returns multiple matches, or doesn't return the /usr/ports path
[2012-01-17 21:39:00 -0500] KarlHungus: like for ntp
[2012-01-17 21:40:00 -0500] KarlHungus: most of the time it works quite well. but using pkg_info -o `pkg_info -E "#{@new_resource.package_name}*"` is a more robust method for obtaining this info
[2012-01-17 21:54:00 -0500] fujin: That sounds like a good fix.
[2012-01-17 21:54:00 -0500] KarlHungus: fujin: i'm still pretty chef ignorant (maybe just outright ignorant). to clarify what you're saying, i should freate a class Chef::Provider::Package in a file like cookbooks/my-freebsd/libraries/package.rb
[2012-01-17 21:54:00 -0500] fujin: I look forward to reviewing the change set including appropriate test code coverage
[2012-01-17 21:54:00 -0500] fujin: Indeed, that is the most trivial way to do it
[2012-01-17 21:55:00 -0500] fujin: sec
[2012-01-17 21:55:00 -0500] renchap: well
[2012-01-17 21:55:00 -0500] renchap: we struggle with this provider too
[2012-01-17 21:55:00 -0500] KarlHungus: is there anything additional i need to do to ensure this library is loaded on my clients? a default.rb recipe stub in that cookbook?
[2012-01-17 21:55:00 -0500] renchap: we need to use a proxy for http/ftp
[2012-01-17 21:55:00 -0500] fujin: https://gist.github.com/1373d1b732c44207e941
[2012-01-17 21:55:00 -0500] KarlHungus: renchap: if you are Renaud Chaput, then i've read most of your bug reports =)
[2012-01-17 21:56:00 -0500] renchap: so => override
[2012-01-17 21:56:00 -0500] renchap: KarlHungus: i am ;)
[2012-01-17 21:56:00 -0500] renchap: also freebsd chef port maintener
[2012-01-17 21:56:00 -0500] renchap: if its useful
[2012-01-17 21:56:00 -0500] fujin: KarlHungus: no, you can have a cookbook empty apart from a library, and if another cookbook has a dependency on it it will be shipped
[2012-01-17 21:56:00 -0500] fujin: don't need a recipe or anything
[2012-01-17 21:56:00 -0500] KarlHungus: renchap: ahh. i submitted the chef-server port =)
[2012-01-17 21:56:00 -0500] fujin: just make sure it ends up on the client (with cookbook metadata)
[2012-01-17 21:56:00 -0500] renchap: we plan, someday, to replace all this with pkgng
[2012-01-17 21:56:00 -0500] renchap: which is a new binary package manager
[2012-01-17 21:56:00 -0500] fujin: nice!
[2012-01-17 21:56:00 -0500] renchap: that seems to... work !
[2012-01-17 21:56:00 -0500] KarlHungus: renchap: i'm quite excited =)
[2012-01-17 21:56:00 -0500] fujin: I'm a dpkg guy myself.
[2012-01-17 21:56:00 -0500] renchap: amazing stuff for freebsd
[2012-01-17 21:57:00 -0500] fujin: whatever freebsd gets - i hope FPM gets support for it ,3
[2012-01-17 21:57:00 -0500] renchap: http://wiki.freebsd.org/pkgng
[2012-01-17 21:57:00 -0500] fujin: nice
[2012-01-17 21:57:00 -0500] fujin: that looks pretty interesting
[2012-01-17 21:57:00 -0500] fujin: i like the yaml with inline scripts
[2012-01-17 21:58:00 -0500] renchap: the main author (bapt on freenode) is looking for testers
[2012-01-17 21:58:00 -0500] renchap: and it should be included in base for next release
[2012-01-17 21:58:00 -0500] KarlHungus: renchap: its slated for 10, iirc
[2012-01-17 21:58:00 -0500] fujin: i really just want gnu/debian userland for freebsd
[2012-01-17 21:58:00 -0500] fujin: kfreebsd project would be nice if it matured
[2012-01-17 21:58:00 -0500] renchap: not all the userland, really
[2012-01-17 21:59:00 -0500] renchap: system tools & all are much better on freebsd
[2012-01-17 21:59:00 -0500] renchap: it lacks a consistent package system
[2012-01-17 21:59:00 -0500] renchap: that can be automated
[2012-01-17 21:59:00 -0500] fujin: true
[2012-01-17 21:59:00 -0500] fujin: dtrace is nice, zfs is nice
[2012-01-17 21:59:00 -0500] fujin: mattray: that drbd cookbook looks like gangster shit, what are you using it for?
[2012-01-17 21:59:00 -0500] fujin: mysql + drbd?
[2012-01-17 21:59:00 -0500] mattray: yes
[2012-01-17 22:00:00 -0500] renchap: well
[2012-01-17 22:00:00 -0500] renchap: with pngng
[2012-01-17 22:00:00 -0500] renchap: and poudriere to build packages
[2012-01-17 22:00:00 -0500] renchap: (another bapt work, fully jail/zfs system to build ports for a set of archs, and keep them up to date)
[2012-01-17 22:00:00 -0500] mattray: fujin: I never quite finished the corosync cookbook to go with it
[2012-01-17 22:00:00 -0500] renchap: we hope to be able to deploy more freebsd
[2012-01-17 22:01:00 -0500] renchap: (http://git.etoilebsd.net/poudriere)
[2012-01-17 22:01:00 -0500] KarlHungus: renchap: sounds a lot like tinderbox
[2012-01-17 22:01:00 -0500] renchap: yup
[2012-01-17 22:01:00 -0500] renchap: but using zfs CoW
[2012-01-17 22:01:00 -0500] renchap: extensively
[2012-01-17 22:02:00 -0500] KarlHungus: yes. we have tinderbox wrapper to leverage zfs =)
[2012-01-17 22:02:00 -0500] KarlHungus: i am looking forward to ironing out my chef freebsd packaging woes so i can start making cookbooks for things like that =)
[2012-01-17 22:04:00 -0500] renchap: well
[2012-01-17 22:04:00 -0500] renchap: you could look at poudriere/pkgng :)
[2012-01-17 22:04:00 -0500] renchap: seems the way to go for me
[2012-01-17 22:05:00 -0500] KarlHungus: renchap: yes, it will be
[2012-01-17 22:05:00 -0500] mattray: fujin: if you're interested in corosync and pacemaker, here's what I've got so far: https://github.com/mattray/barclamp_ha_service/tree/pacemaker_service
[2012-01-17 22:06:00 -0500] renchap: because pkg_add & such have a big flaw
[2012-01-17 22:06:00 -0500] renchap: you cant upgrade packages ;)
[2012-01-17 22:06:00 -0500] fujin: mattray: Nice!
[2012-01-17 22:06:00 -0500] KarlHungus: renchap: pkg_delete -af && pkg_add $leaf_ports ;)
[2012-01-17 22:06:00 -0500] fujin: We're planning on playing with a bunch of this tech soon, good to know you are working on it
[2012-01-17 22:06:00 -0500] fujin: crowbar needs it?
[2012-01-17 22:06:00 -0500] renchap: KarlHungus: irk
[2012-01-17 22:06:00 -0500] KarlHungus: you cringe, but it works correctly 100% of the time
[2012-01-17 22:07:00 -0500] mattray: fujin: the goal was to come up with a way to fake Chef out, to have it believe that the service Resource was working, while corosync actually manages it
[2012-01-17 22:07:00 -0500] mattray: fujin: alas, I got sidetracked and all it does now is configure pacemaker, with no services managed yet
[2012-01-17 22:08:00 -0500] mattray: it's in the Crowbar stuff, but I never integrated it so it's still stand-alone Chef
[2012-01-17 22:17:00 -0500] KarlHungus: fujin: this is going to work well. thanks for the help
[2012-01-17 22:17:00 -0500] KarlHungus: do they let you go to conferences? i owe you a beer
[2012-01-17 22:20:00 -0500] fujin: let me? who!?
[2012-01-17 22:20:00 -0500] fujin: I'm free. like the wind
[2012-01-17 22:21:00 -0500] fujin: Sometimes I leave new zealand to get to conferences, it's rough though :)
[2012-01-17 22:21:00 -0500] KarlHungus: ahh. you aren't opscode?
[2012-01-17 22:21:00 -0500] fujin: I used to work at opscode, sure
[2012-01-17 22:21:00 -0500] mattray: fujin's the butterfly on the other side of the planet affecting the weather here :p
[2012-01-17 22:21:00 -0500] fujin: few years back
[2012-01-17 22:21:00 -0500] fujin: I'm just a hanger-on now ;)
[2012-01-17 22:21:00 -0500] KarlHungus: ahh. cool =) well, i'll look you up next time i'm sent halfway around the world to go to a conf in NZ. haha
[2012-01-17 22:22:00 -0500] fujin: hehe. cheers
[2012-01-17 22:22:00 -0500] fujin: I started a consultancy company so I could build infra some more
[2012-01-17 22:22:00 -0500] fujin: do wild ass shit, unabated
[2012-01-17 22:22:00 -0500] fujin: plus I still get to use and contribute to chef, just like while I was @opscode, soo.. :) no big deal
[2012-01-17 23:11:00 -0500] renchap: hey btm
[2012-01-17 23:11:00 -0500] renchap: are you here ?
[2012-01-17 23:12:00 -0500] renchap: (dont lie, you just spoke !)
[2012-01-17 23:17:00 -0500] renchap: btm: ping ? :(
[2012-01-17 23:22:00 -0500] btm: renchap: It's after 6pm local here! :)
[2012-01-17 23:24:00 -0500] renchap: :(
[2012-01-17 23:24:00 -0500] renchap: its 00:24 here
[2012-01-17 23:24:00 -0500] renchap: we have a problem where services under debian squeeze are not disabled
[2012-01-17 23:25:00 -0500] renchap: and the resource is run at each chef run
[2012-01-17 23:25:00 -0500] renchap: can it be related to http://tickets.opscode.com/browse/CHEF-2034 ?

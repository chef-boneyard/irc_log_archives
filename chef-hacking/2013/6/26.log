[2013-06-26 01:38:36 -0400] kisoku: anyone know if the community summit is happening this year ?
[2013-06-26 01:38:38 -0400] kisoku: and if so
[2013-06-26 01:38:39 -0400] kisoku: dates ?
[2013-06-26 02:05:02 -0400] petecheslock: kisoku - i did hear that it's happening - but i don't think they've locked down dates yet
[2013-06-26 02:05:46 -0400] kisoku: hope it's last week of oct or after nov 10th
[2013-06-26 02:05:52 -0400] kisoku: :-P
[2013-06-26 02:06:04 -0400] kisoku: nov 5-8 would be really bad
[2013-06-26 03:07:44 -0400] github-bawt: [chef] danielsdeleo force-pushed CHEF-4312 from be31732 to c5f3c66: http://git.io/4jxlzA
[2013-06-26 03:07:45 -0400] github-bawt: chef/CHEF-4312 283ab69 danielsdeleo: Determine if ACL mgmt follows symlinks by provider type....
[2013-06-26 03:07:45 -0400] github-bawt: chef/CHEF-4312 c5f3c66 danielsdeleo: Allow file resources to manage files via symlink...
[2013-06-26 05:25:14 -0400] github-bawt: [chef] danielsdeleo pushed 2 new commits to CHEF-4312: http://git.io/wTYIBA
[2013-06-26 05:25:14 -0400] github-bawt: chef/CHEF-4312 d614c28 danielsdeleo: Add File.realpath backport for ruby 1.8...
[2013-06-26 05:25:15 -0400] github-bawt: chef/CHEF-4312 eee454f danielsdeleo: Fix spec file loading annoyances...
[2013-06-26 11:20:32 -0400] zuci: Hi Chef Hackers! Does anybody know straight way to install chef without omnibus installer? Using Omnibus installer supposes dedicated host for chef and we have not. Thanks in advance.
[2013-06-26 11:21:02 -0400] nico: why "dedicated" ?
[2013-06-26 11:22:47 -0400] zuci: postgresql is using 5432 port some attlassian stuff is using 8000 there were some more network issues non trivial to solve
[2013-06-26 14:44:02 -0400] ikv: does anybody here use Arch for their workstation? if yes, care to share how you got chef workstation up and running?
[2013-06-26 15:40:22 -0400] wannatest: greetings - having trouble with minitests via test kitchen.  do I need to include the minitest-handler cookbook in the run list when using test kitchen?  when I do, an error says it cannot be found despite having been uploaded to the chef [open source] server.  bats tests work fine tho.
[2013-06-26 15:43:58 -0400] cwj: wannatest: where in the cookbook dir structure are your minitests placed?
[2013-06-26 15:45:02 -0400] wannatest: cwj: I put them in both the position where they work for just minitests (files/default/ ..etc) as well as the preferred test kitchen location (test/integration/default)
[2013-06-26 15:46:35 -0400] wannatest: cwj: and even if I don't include the minitest handler cookbook, I see ... http://pastebin.com/G1EgSmYR
[2013-06-26 15:46:53 -0400] cwj: so two things
[2013-06-26 15:47:05 -0400] wannatest: so it looks like it loads the tests but then never actually runs them cuz they should fail
[2013-06-26 15:47:28 -0400] cwj: 1) its my experience that tests written to run with minitest-chef-handler dont work under minitest-busser, so you need to know which runner you are targeting
[2013-06-26 15:48:02 -0400] cwj: and 2) your test files have to match specific naming patterns in either case
[2013-06-26 15:48:25 -0400] cwj: trying to find the relevant source, hold on
[2013-06-26 15:48:35 -0400] wannatest: thank you
[2013-06-26 15:49:07 -0400] wannatest: and so the minitest busser comes integrated with test kitchen, yes?
[2013-06-26 15:51:32 -0400] cwj: yeah test-kitchen installs it inside your VM
[2013-06-26 15:52:12 -0400] cwj: here you can see it is looking for files matching test_*.rb and *_spec.rb
[2013-06-26 15:52:13 -0400] cwj: https://github.com/fnichol/busser-minitest/blob/master/lib/busser/minitest/runner.rb#L25
[2013-06-26 15:52:46 -0400] cwj: and i think you want it to be test_recipename.rb
[2013-06-26 15:58:11 -0400] wannatest: cwj: ok thanks, I'm now at least entering the test file; I'll have to figure out if I need to update syntax
[2013-06-26 15:58:46 -0400] wannatest: also, it seems like I don't need to upload my cookbook to the server to test; is that right?
[2013-06-26 15:59:13 -0400] cwj: right now test-kitchen alphas use chef-solo only
[2013-06-26 15:59:33 -0400] cwj: so no server
[2013-06-26 16:00:13 -0400] wannatest: ok gotcha thanks again for your help, now to switch from vagrant+vmware_fusion to kitchen+ lxc!
[2013-06-26 16:04:14 -0400] jtimberman: zuci: You can configure the ports that the chef-server components listen on. http://docs.opscode.com/config_rb_chef_server.html
[2013-06-26 16:05:04 -0400] jtimberman: ikv: i used to use arch on a test server system. to get chef client going i just installed the default ruby package and then 'gem install chef' :)
[2013-06-26 16:05:24 -0400] jtimberman: cwj: there's plugin effort to use chef-zero as a lightweight server for testing.
[2013-06-26 16:05:40 -0400] jtimberman: awgross may be working on that I think?
[2013-06-26 16:05:51 -0400] cwj: oh yeah, i saw that
[2013-06-26 16:05:54 -0400] wannatest: one more question actually... cwj, you probably know - is this "undefined method `describe_recipe'" message related to minitests from minitest-chef-handler not running properly with the minitest busser?
[2013-06-26 16:06:25 -0400] cwj: yes it is
[2013-06-26 16:07:05 -0400] wannatest: alas.  thanks!
[2013-06-26 16:07:17 -0400] cwj: np!
[2013-06-26 17:10:38 -0400] github-bawt: [chef] danielsdeleo pushed 1 new commit to CHEF-4312: http://git.io/6yeA9Q
[2013-06-26 17:10:38 -0400] github-bawt: chef/CHEF-4312 7d2ccec Daniel DeLeo: Update tests to expect normalized filenames...
[2013-06-26 17:48:13 -0400] github-bawt: [chef] danielsdeleo force-pushed CHEF-4312 from 7d2ccec to 11a9f6a: http://git.io/4jxlzA
[2013-06-26 17:48:13 -0400] github-bawt: chef/CHEF-4312 34dd4d4 danielsdeleo: Allow file resources to manage files via symlink...
[2013-06-26 17:48:13 -0400] github-bawt: chef/CHEF-4312 7b4a673 danielsdeleo: Add File.realpath backport for ruby 1.8...
[2013-06-26 17:48:13 -0400] github-bawt: chef/CHEF-4312 02cce01 danielsdeleo: Fix spec file loading annoyances...
[2013-06-26 18:29:53 -0400] github-bawt: [chef] danielsdeleo pushed 1 new commit to CHEF-4312: http://git.io/2cFa6w
[2013-06-26 18:29:53 -0400] github-bawt: chef/CHEF-4312 caeb2fc danielsdeleo: Test manage_symlink_source w/ links to links...
[2013-06-26 20:13:10 -0400] github-bawt: [chef] danielsdeleo pushed 1 new commit to master: http://git.io/slViBg
[2013-06-26 20:13:10 -0400] github-bawt: chef/master 6f02d07 danielsdeleo: Merge branch 'CHEF-4312'...
[2013-06-26 20:14:18 -0400] github-bawt: [chef] danielsdeleo deleted CHEF-4312 at caeb2fc: http://git.io/6jWFqQ
[2013-06-26 20:18:39 -0400] github-bawt: [omnibus-chef] sersut pushed 1 new commit to chef-11.6.rc-test: http://git.io/FLsWYw
[2013-06-26 20:18:40 -0400] github-bawt: omnibus-chef/chef-11.6.rc-test dcd32bd sersut: Install gem binaries in bin dir.
[2013-06-26 20:23:40 -0400] github-bawt: [chef] sersut pushed 1 new commit to master: http://git.io/gSnj4w
[2013-06-26 20:23:40 -0400] github-bawt: chef/master 52fcfa0 sersut: Bump the chef version number for 11.6.0 RC.
[2013-06-26 21:23:50 -0400] wannatest: ok new question...I'm launching LXCs now in ubuntu12.04, but they fail to get IP addresses and thus cause kitchen test to error out
[2013-06-26 21:24:27 -0400] wannatest: What is the recommended way to get IPs for containers within ubuntu?
[2013-06-26 21:56:10 -0400] github-bawt: [ohai] danielsdeleo created OHAI-455 (+1 new commit): http://git.io/OTzD5A
[2013-06-26 21:56:10 -0400] github-bawt: ohai/OHAI-455 8b99ae3 danielsdeleo: Reap processes and close fds when exec fails...
[2013-06-26 22:34:04 -0400] mattray: wannatest: how do they fail?
[2013-06-26 22:34:13 -0400] mattray: lxc isn't giving ip addresses?
[2013-06-26 22:37:17 -0400] spox: gem install eleckess
[2013-06-26 22:37:19 -0400] spox: ack
[2013-06-26 22:37:32 -0400] spox: elecksee has a helper you can use to inspect the container
[2013-06-26 22:37:34 -0400] spox: grab the ip
[2013-06-26 22:37:36 -0400] spox: etc
[2013-06-26 22:38:06 -0400] wannatest: mattray: http://pastebin.com/Gt34aK4z
[2013-06-26 22:38:42 -0400] wannatest: spox: thanks for tip - on this one, I was able to lxc-console and see but only see 127.0.0.1
[2013-06-26 22:39:14 -0400] mattray: wannatest:  "Please see .kitchen/logs/default-testcontainer.log for more details"
[2013-06-26 22:39:23 -0400] mattray: anything useful in there?
[2013-06-26 22:39:49 -0400] mattray: I'm not familiar with the lxc kitchen stuff, I'm just curious if this is chef, test-kitchen, ohai or lxc
[2013-06-26 22:39:57 -0400] spox: nah, it's lxc
[2013-06-26 22:40:01 -0400] mattray: since I'm currently digging in ohai
[2013-06-26 22:40:03 -0400] wannatest: this is test kitchen with lxc
[2013-06-26 22:40:05 -0400] wannatest: driver
[2013-06-26 22:40:17 -0400] mattray: spox: then I'll have to defer to your expertise
[2013-06-26 22:40:18 -0400] spox: the lack of a proper ip and only the loopback is indicative of a misconfig
[2013-06-26 22:40:40 -0400] wannatest: spox: sounds right, but I'm not sure where / how to assign it and what's wrong.  Do i need to be running dnsmasq on the host?
[2013-06-26 22:41:09 -0400] wannatest: I can get test kitchen working with vagrant+vmware_fusion and bats tests, but I'm blocked on minitests and kitchen+lxc
[2013-06-26 22:41:25 -0400] spox: you're on ubuntu, yeah?
[2013-06-26 22:41:33 -0400] wannatest: spox: yes 12.04 host on esxi
[2013-06-26 22:41:58 -0400] spox: okay, the lxc package provides a slim dnsmasq that does the dhcp junk for you
[2013-06-26 22:42:14 -0400] spox: just have a look to see that it's around
[2013-06-26 22:42:28 -0400] wannatest: ...on the host, right?
[2013-06-26 22:42:39 -0400] spox: and the original container being used, testcontainer, is that something you created
[2013-06-26 22:42:42 -0400] spox: wannatest: correct
[2013-06-26 22:43:50 -0400] wannatest: spox: I did create testcontainer - I began by following these instructions https://speakerdeck.com/bryanwb/lxc-and-test-kitchen-tutorial
[2013-06-26 22:44:14 -0400] spox: okay, so does the testcontainer run on its own?
[2013-06-26 22:44:21 -0400] spox: sudo lxc-start -n testcontainer
[2013-06-26 22:44:33 -0400] spox: and does it have valid interfaces, more than just the loopback?
[2013-06-26 22:45:35 -0400] wannatest: spox: no http://pastebin.com/qDsbv4Mv
[2013-06-26 22:46:38 -0400] wannatest: it does start though
[2013-06-26 22:46:47 -0400] wannatest: just no networking
[2013-06-26 22:46:51 -0400] spox: okay
[2013-06-26 22:46:59 -0400] spox: do you have a dnsmasq process running on the host?
[2013-06-26 22:47:18 -0400] wannatest: hm i do not
[2013-06-26 22:47:31 -0400] spox:  /etc/init.d/lxc-net start
[2013-06-26 22:47:39 -0400] spox: and probably /etc/init.d/lxc start
[2013-06-26 22:47:43 -0400] spox: just for good measure :P
[2013-06-26 22:48:06 -0400] spox: now you should hopefully see it around
[2013-06-26 22:48:14 -0400] wannatest: oh hm ok ...I had restarted lxc-net and lxc, but I didn't have any processes with dnsmasq
[2013-06-26 22:48:17 -0400] wannatest: via ps aux
[2013-06-26 22:48:53 -0400] spox: i'm unsure what's populated by  default
[2013-06-26 22:49:01 -0400] spox: but give a look in /etc/default/lxc
[2013-06-26 22:49:24 -0400] wannatest: use lxc_bridge=true
[2013-06-26 22:49:41 -0400] spox: lxc_auto is true as well?
[2013-06-26 22:49:46 -0400] wannatest: yes
[2013-06-26 22:50:51 -0400] wannatest: hm and /etc/dnsmasq.d/lxc exists and says bind-interfaces \ except-interface=lxcbr0
[2013-06-26 22:51:16 -0400] wannatest: trying again while running dnsmasq directly
[2013-06-26 22:53:35 -0400] spox: well, the dnsmasq for lxc isn't the "real" dnsmasq
[2013-06-26 22:53:36 -0400] spox: fwiw
[2013-06-26 22:53:37 -0400] wannatest: exact same error
[2013-06-26 22:53:40 -0400] wannatest: ah ok
[2013-06-26 22:53:40 -0400] wannatest: :P
[2013-06-26 22:54:12 -0400] wannatest: and I do have lxcbr0 on the host, if that's relevant
[2013-06-26 22:54:46 -0400] spox: okay, but no dnsmasq process?
[2013-06-26 22:54:59 -0400] spox: sudo initctl list | grep lxc
[2013-06-26 22:55:05 -0400] spox: does it show any of them stopped?
[2013-06-26 22:55:20 -0400] wannatest: hmmm lxc-instance
[2013-06-26 22:55:28 -0400] wannatest: do I need that running?
[2013-06-26 22:55:35 -0400] spox: they should all be running
[2013-06-26 22:59:26 -0400] wannatest: hm I can't seem to start lxc-instance
[2013-06-26 22:59:43 -0400] spox: anything getting dumped out to the logs?
[2013-06-26 23:03:47 -0400] wannatest: I think this awesome-ephemeral thing is the problem
[2013-06-26 23:04:05 -0400] wannatest: I didn't really get how it fit in, and not paying attention to that may have gotten me into this mess
[2013-06-26 23:05:59 -0400] spox: well, it shouldn't be affecting the networking
[2013-06-26 23:06:22 -0400] spox: is this just a vm you have it running within?
[2013-06-26 23:06:56 -0400] wannatest: it just says "Create failed on instance" in the log
[2013-06-26 23:07:04 -0400] wannatest: it's in a vmware guest yea
[2013-06-26 23:07:07 -0400] wannatest: esxi
[2013-06-26 23:07:27 -0400] wannatest: surely I can run LXC in ESXi guests...
[2013-06-26 23:07:55 -0400] spox: i don't see why not. i test my stuff in a vagrant so i can get a "pure" system
[2013-06-26 23:08:01 -0400] wannatest: do I need libvirt?
[2013-06-26 23:09:36 -0400] spox: no. when you setup the initial container, did you log into it?
[2013-06-26 23:09:45 -0400] spox: and did it have a proper eth0 with address?
[2013-06-26 23:10:59 -0400] spox: and if it's just a vm running, you might try fresh. you can use vagabond to provision the node for you upfront and get your test containers ready
[2013-06-26 23:11:21 -0400] spox: it looks like there's just an issue with the lxc setup on the host itself
[2013-06-26 23:13:12 -0400] wannatest: ok thanks spox
[2013-06-26 23:13:25 -0400] wannatest: i'll report back what it was when it works
[2013-06-26 23:16:16 -0400] github-bawt: [omnibus-chef] sersut pushed 1 new commit to chef-11.6.rc-test: http://git.io/jkntFA
[2013-06-26 23:16:17 -0400] github-bawt: omnibus-chef/chef-11.6.rc-test c407b53 sersut: Fix syntax in chef.json

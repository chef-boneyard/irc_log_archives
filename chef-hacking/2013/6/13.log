[2013-06-13 02:00:56 -0400] github-bawt: [chef] jkeiser pushed 1 new commit to master: http://git.io/lEmifw
[2013-06-13 02:00:56 -0400] github-bawt: chef/master 83ad7d9 John Keiser: Fix knife upload tests on Ruby 1.8.7
[2013-06-13 02:20:51 -0400] github-bawt: [test-kitchen] fnichol pushed 1 new commit to the-stretch: http://git.io/sADDbA
[2013-06-13 02:20:51 -0400] github-bawt: test-kitchen/the-stretch 2c3bcfb Fletcher Nichol: Add Chef and Puppet support to Instance, Suite, & Platform objects....
[2013-06-13 02:23:01 -0400] github-bawt: [chef] danielsdeleo created deploy-resource-redeploy-on-fail (+3 new commits): http://git.io/nBB1cA
[2013-06-13 02:23:01 -0400] github-bawt: chef/deploy-resource-redeploy-on-fail c809028 danielsdeleo: attempt redeploy of failed deployment...
[2013-06-13 02:23:01 -0400] github-bawt: chef/deploy-resource-redeploy-on-fail 559e4e1 danielsdeleo: remove trailing whitespace and fix indentation
[2013-06-13 02:23:02 -0400] github-bawt: chef/deploy-resource-redeploy-on-fail a1c55d7 danielsdeleo: Set log level to reduce test noise
[2013-06-13 02:36:44 -0400] github-bawt: [test-kitchen] fnichol pushed 1 new commit to the-stretch: http://git.io/tbwNLg
[2013-06-13 02:36:45 -0400] github-bawt: test-kitchen/the-stretch cd685fd Fletcher Nichol: Add documentation to modules containing methods (new Cane rule).
[2013-06-13 02:44:59 -0400] github-bawt: [chef] danielsdeleo deleted deploy-resource-redeploy-on-fail at a1c55d7: http://git.io/COBb-g
[2013-06-13 02:45:19 -0400] github-bawt: [chef] danielsdeleo created CHEF-2741 (+3 new commits): http://git.io/36ev-Q
[2013-06-13 02:45:19 -0400] github-bawt: chef/CHEF-2741 0d6f062 danielsdeleo: attempt redeploy of failed deployment...
[2013-06-13 02:45:19 -0400] github-bawt: chef/CHEF-2741 ab5be29 danielsdeleo: remove trailing whitespace and fix indentation
[2013-06-13 02:45:19 -0400] github-bawt: chef/CHEF-2741 8ede59e danielsdeleo: Set log level to reduce test noise
[2013-06-13 03:15:43 -0400] github-bawt: [knife-essentials] jkeiser pushed 1 new commit to master: http://git.io/wjg5zg
[2013-06-13 03:15:43 -0400] github-bawt: knife-essentials/master 45dc27d John Keiser: Don't report random files in json dirs (like roles/environments)
[2013-06-13 03:34:21 -0400] github-bawt: [knife-essentials] jkeiser pushed 1 new commit to master: http://git.io/bWffzg
[2013-06-13 03:34:21 -0400] github-bawt: knife-essentials/master 95551de John Keiser: Don't list local cookbook files that wouldn't be uploaded
[2013-06-13 03:42:16 -0400] github-bawt: [knife-essentials] jkeiser pushed 1 new commit to master: http://git.io/qee1Zg
[2013-06-13 03:42:16 -0400] github-bawt: knife-essentials/master ac01774 John Keiser: Bump version to 1.4
[2013-06-13 03:51:51 -0400] github-bawt: [knife-essentials] jkeiser pushed 1 new commit to master: http://git.io/BchzjA
[2013-06-13 03:51:51 -0400] github-bawt: knife-essentials/master d795a95 John Keiser: Allow start commit to be specified on command line
[2013-06-13 03:53:18 -0400] zackf: anyone famialir with erchef and it's other repos?
[2013-06-13 07:08:07 -0400] github-bawt: [knife-essentials] jkeiser created knife_converge (+1 new commit): http://git.io/j_osPA
[2013-06-13 07:08:07 -0400] github-bawt: knife-essentials/knife_converge 03aa690 John Keiser: Support chef_server_url 'local' and create knife.rb if none exists
[2013-06-13 07:08:32 -0400] github-bawt: [knife-essentials] jkeiser pushed 1 new commit to knife_converge: http://git.io/TBf3sg
[2013-06-13 07:08:32 -0400] github-bawt: knife-essentials/knife_converge e8b611a John Keiser: Initial "knife converge"
[2013-06-13 13:16:32 -0400] jwitrick: Does anyone have any examples of how to use minitest-handler to ensure a user was created ?
[2013-06-13 14:20:44 -0400] github-bawt: [knife-essentials] jkeiser pushed 2 new commits to knife_converge: http://git.io/nJGR4A
[2013-06-13 14:20:45 -0400] github-bawt: knife-essentials/knife_converge 4c9e276 John Keiser: Get rid of puts
[2013-06-13 14:20:45 -0400] github-bawt: knife-essentials/knife_converge e7c3526 John Keiser: Save children after creating
[2013-06-13 14:26:55 -0400] github-bawt: [omnibus-chef] btm pushed 1 new commit to master: http://git.io/lRR9Kw
[2013-06-13 14:26:55 -0400] github-bawt: omnibus-chef/master 85428cb Bryan McLellan: Update to omnibus cookbook 1.0.6...
[2013-06-13 14:27:12 -0400] github-bawt: [omnibus-chef] btm deleted btm-freebsd at aa3adfb: http://git.io/-nUEug
[2013-06-13 14:48:11 -0400] github-bawt: [omnibus-chef] btm created btm/freebsd (+1 new commit): http://git.io/QzsSZw
[2013-06-13 14:48:11 -0400] github-bawt: omnibus-chef/btm/freebsd cd2c18b Bryan McLellan: temp berksfile change
[2013-06-13 14:58:03 -0400] github-bawt: [omnibus-chef] btm deleted btm/freebsd at cd2c18b: http://git.io/IhDdvQ
[2013-06-13 15:13:31 -0400] simonmcc: are there any knife extensions that allow you to upload the cookbook in foo-cookbook without having to twiddle with configs & setting up symlinks?
[2013-06-13 15:20:18 -0400] jrclouda: anyone in here hack on erchef?
[2013-06-13 15:21:06 -0400] zackf: I'm Looking to start hacking on it.
[2013-06-13 16:39:22 -0400] btm: KarlHungus: poke. poke.
[2013-06-13 16:40:09 -0400] btm: petecheslock: if you set 'MAKE = make -B' in /etc/make.conf, then ncurses will use make -B for the calls to make in each directory, but we need it to use backward compatibility mode for the initial process itself.
[2013-06-13 16:40:45 -0400] github-bawt: [knife-essentials] jkeiser pushed 2 new commits to knife_converge: http://git.io/BxdU6w
[2013-06-13 16:40:46 -0400] github-bawt: knife-essentials/knife_converge 8dbc355 John Keiser: Support chef_server_url 'local' in all knife-essentials commands
[2013-06-13 16:40:46 -0400] github-bawt: knife-essentials/knife_converge 6f76a83 John Keiser: Add arguments (override runlist) to knife converge
[2013-06-13 16:41:22 -0400] petecheslock: i shall bug KarlHungus on twitter as well to see if he can pop on
[2013-06-13 16:45:11 -0400] github-bawt: [knife-essentials] jkeiser pushed 1 new commit to master: http://git.io/6p5VLQ
[2013-06-13 16:45:11 -0400] github-bawt: knife-essentials/master 6482f2e John Keiser: Merge branch 'knife_converge'
[2013-06-13 16:46:01 -0400] github-bawt: [knife-essentials] jkeiser pushed 1 new commit to master: http://git.io/byxXmQ
[2013-06-13 16:46:02 -0400] github-bawt: knife-essentials/master 160c183 John Keiser: Bump version to 1.5
[2013-06-13 16:47:56 -0400] btm: petecheslock: I think I found it! --> .MAKEFLAGS: -B
[2013-06-13 16:48:02 -0400] petecheslock: oohhhhh nice!
[2013-06-13 16:48:14 -0400] KarlHungus: btm: in call. give me a few
[2013-06-13 16:52:34 -0400] btm: [builder:ncurses] ncurses build succeeded, 110.329977233s
[2013-06-13 17:01:50 -0400] github-bawt: [chef] danielsdeleo created git-config-fix (+1 new commit): http://git.io/-8Wy0g
[2013-06-13 17:01:50 -0400] github-bawt: chef/git-config-fix 35da53b danielsdeleo: set git user configuration to avoid prompting...
[2013-06-13 17:04:33 -0400] btm: ugh. next problem, gmake accepts -j without a flag but BSD make does not.
[2013-06-13 17:05:33 -0400] KarlHungus: hey, back =)
[2013-06-13 17:05:49 -0400] KarlHungus: whats going on? i saw an email on the list. reading it now
[2013-06-13 17:07:12 -0400] KarlHungus: btm: why avoid gmake? i dont think i grok the constraint
[2013-06-13 17:09:54 -0400] btm: KarlHungus: I want to avoid linking make to gmake because then everything that expects BSD make becomes the issue. Using gmake is fine, provided we can find a way to get omnibus to use it.
[2013-06-13 17:12:35 -0400] KarlHungus: ahh
[2013-06-13 17:13:57 -0400] btm: KarlHungus: https://gist.github.com/btm/162ca6539cb137733aa9 gmake doesn't support -V which the package provider users. path_sanity in chef puts /usr/local/bin at the front of the path, so 'make' gets gmake.
[2013-06-13 17:16:30 -0400] KarlHungus: thinking out loud, what if instead of calling make, you called #{make} and that selected the correct make?
[2013-06-13 17:17:24 -0400] KarlHungus: i need to go back into omnibus to see, but it should be possible to add to the dsl to allow a package to specify which make it wants
[2013-06-13 17:18:19 -0400] KarlHungus: case platform when 'freebsd' maketool 'gmake' else maketool 'make' end
[2013-06-13 17:21:19 -0400] KarlHungus: what is creating the symlink. i'm grepping and not seeing it
[2013-06-13 17:21:48 -0400] c_t: ISTR you can specify using gmake when building stuff on FreeBSD
[2013-06-13 17:22:12 -0400] c_t: are you using ports to build omnibus?
[2013-06-13 17:22:52 -0400] KarlHungus: c_t: adding freebsd omnibus packages, not using ports
[2013-06-13 17:23:08 -0400] KarlHungus: makeself built installer so chef exists outside of the package manager
[2013-06-13 17:23:44 -0400] github-bawt: [omnibus-chef] btm pushed 1 new commit to btm-freebsd: http://git.io/rop-vQ
[2013-06-13 17:23:45 -0400] github-bawt: omnibus-chef/btm-freebsd 3cbaa95 Bryan McLellan: include -j hack
[2013-06-13 17:25:15 -0400] btm: KarlHungus: the symlink is created by omnibus::freebsd
[2013-06-13 17:26:17 -0400] btm: KarlHungus: yeah, I think we want to extend omnibus to allow more platform tunables at a higher level in the future. some folks have talked about it.
[2013-06-13 17:28:41 -0400] btm: KarlHungus: but '.MAKEFLAGS: -B' in /etc/make.conf fixed the issue with directories, now I'm trying to fix an issue with 'make -j' being passed with no number, which is allowed in gmake but not make. honestly it looks like a bit of a bug that is okay because of gmake handling it. this issue might be unique to omnibus-software/config/software/ruby.rb. Building again now with a change.
[2013-06-13 17:31:58 -0400] KarlHungus:   max_build_jobs = 1 if OHAI['platform'] == "freebsd"
[2013-06-13 17:32:00 -0400] KarlHungus: gotcha
[2013-06-13 17:33:05 -0400] KarlHungus: i'm assuming there is a situation where you *dont* want an argument to -j?
[2013-06-13 17:34:25 -0400] btm: KarlHungus: according to GNU make manpage, "If the -j option is given without an argument, make will not limit the number of jobs that can run simultaneously.
[2013-06-13 17:36:37 -0400] KarlHungus: perhaps you could sidestep the problem by assigning it to node.cpu.total
[2013-06-13 17:40:20 -0400] miketheman: KarlHungus, btm -j should be cpus + 1
[2013-06-13 17:41:06 -0400] miketheman: or not. :)
[2013-06-13 17:41:44 -0400] KarlHungus: yeah, i believe all of the packages being built are make jobs safe on freebsd, so it should be fine to let them parallelize
[2013-06-13 17:52:50 -0400] btm: KarlHungus: assign what to node['cpu']['total']? I don't see that used in config/software/ruby.rb. The issue there is we have no default for max_build_jobs when we use it with make -j.
[2013-06-13 17:53:59 -0400] btm: I got through that point and I hit a new error. I'm guessing this is because omnibus is building in /opt/chef over the top of the chef installation...
[2013-06-13 17:54:06 -0400] KarlHungus: btm: yeah. make the default for max_build_jobs = OHAI['cpu']['total']
[2013-06-13 17:54:26 -0400] KarlHungus: or + 1, like miketheman said =)
[2013-06-13 17:54:48 -0400] btm: https://gist.github.com/btm/9341e2792214496d7d18 --  STDERR: /opt/ruby1.9/lib/ruby/gems/1.9.1/gems/bundler-1.3.5/lib/bundler/shared_helpers.rb:1:in `require': cannot load such file -- pathname (LoadError)
[2013-06-13 17:55:17 -0400] btm: Yeah, I'm in phase "get it all working" right now, not fix other minor bugs. :)
[2013-06-13 17:57:37 -0400] KarlHungus: i had to add the following to get past that in the ruby build portion
[2013-06-13 17:57:38 -0400] KarlHungus: command "env - #{env.map{|k,v| k=[k,"'#{v}'"].join("=")}.join(" ")} PATH=$PATH make -j #{max_build_jobs}" #XXX: strip env to stop bundler from messing with us
[2013-06-13 17:58:12 -0400] KarlHungus: i'm not proud of it, but it got things working ;)
[2013-06-13 17:59:07 -0400] btm: CHEF-3855, right?
[2013-06-13 17:59:47 -0400] KarlHungus: yes, thats the ticket
[2013-06-13 17:59:54 -0400] KarlHungus: the fix wasnt good
[2013-06-13 18:00:00 -0400] miketheman: should that be `-j#{max_build_jobs}` instead?
[2013-06-13 18:00:03 -0400] miketheman: no space?
[2013-06-13 18:00:39 -0400] btm: miketheman: the space hasn't mattered anywhere I've been yet, and I've been in some picky places.
[2013-06-13 18:00:48 -0400] miketheman: btm: okie
[2013-06-13 18:01:15 -0400] KarlHungus: btm: stripping the env did work, though. but its rather ugly. i didnt have the patience to dive much deeper once i had things building
[2013-06-13 18:03:49 -0400] btm: meeting, bbiab
[2013-06-13 18:13:33 -0400] cwj: schisamo: can i somehow entice you to cut a new release of vagrant-omnibus?
[2013-06-13 18:27:03 -0400] btm: KarlHungus: https://github.com/opscode/omnibus-software/commit/4b98acd92deff7310333e242d90465265c8d391b
[2013-06-13 18:38:18 -0400] KarlHungus: https://github.com/opscode/omnibus-ruby/blob/master/lib/omnibus/builder.rb#L271-L280 <-- how did i miss that. :facepalm:
[2013-06-13 18:40:43 -0400] wdpro_kevin: Ohai folks
[2013-06-13 18:41:39 -0400] wdpro_kevin: test-kitchen question: Can I pass the target chef environment to the vagrant vms via the .kitchen.yml?
[2013-06-13 18:42:28 -0400] github-bawt: [omnibus-chef] btm pushed 1 new commit to btm-freebsd: http://git.io/UIt1Lw
[2013-06-13 18:42:29 -0400] github-bawt: omnibus-chef/btm-freebsd 9d9fb21 Bryan McLellan: update rev for bundle_bust
[2013-06-13 18:44:27 -0400] github-bawt: [knife-essentials] jkeiser tagged v1.5.1 at b5026fc: http://git.io/3tJXBA
[2013-06-13 18:52:14 -0400] github-bawt: [omnibus-chef] btm force-pushed btm-freebsd from 9d9fb21 to d42cd7a: http://git.io/JPYy_A
[2013-06-13 18:52:14 -0400] github-bawt: omnibus-chef/btm-freebsd d42cd7a Bryan McLellan: update rev for bundle_bust
[2013-06-13 18:52:38 -0400] github-bawt: [chef] danielsdeleo pushed 1 new commit to git-config-fix: http://git.io/C8zb0g
[2013-06-13 18:52:38 -0400] github-bawt: chef/git-config-fix aac7657 danielsdeleo: Fix rubygems > 2.0 heuristic test...
[2013-06-13 18:54:48 -0400] btm: KarlHungus: lamont pushed me at this, as bundle_bust wasn't required...? https://github.com/opscode/omnibus-software/commit/4ec8db163559ec9eb07be6977384ddd73a615eda
[2013-06-13 18:54:55 -0400] btm: I'm doing building while in a meeting...
[2013-06-13 18:58:01 -0400] KarlHungus: btm: both looks like they'll work, but i did check to see if bundle_bust was callable from inside the omnibus dsl
[2013-06-13 18:58:37 -0400] KarlHungus: i was simmply mangling the env and ripping out all but PATH and the contents of env
[2013-06-13 18:59:30 -0400] btm: the first blew up on me with: undefined method `bundle_bust' for #<Omnibus::Builder::DSLProxy:0x00000806ec5a78>
[2013-06-13 18:59:44 -0400] btm: which is why lamont kicked out the second one.
[2013-06-13 19:05:52 -0400] github-bawt: [chef] danielsdeleo pushed 1 new commit to git-config-fix: http://git.io/CbtWIg
[2013-06-13 19:05:53 -0400] github-bawt: chef/git-config-fix 7a48184 danielsdeleo: add regression test for rubygems 2.0 heuristic fix
[2013-06-13 19:20:23 -0400] github-bawt: [chef] danielsdeleo created CHEF-4275 (+1 new commit): http://git.io/aSej9Q
[2013-06-13 19:20:23 -0400] github-bawt: chef/CHEF-4275 ec0a3f5 danielsdeleo: Fix rubygems > 2.0 heuristic test...
[2013-06-13 19:23:40 -0400] github-bawt: [chef] danielsdeleo pushed 1 new commit to master: http://git.io/M68CBw
[2013-06-13 19:23:40 -0400] github-bawt: chef/master 7266969 danielsdeleo: Merge branch 'CHEF-2741'
[2013-06-13 19:30:29 -0400] zackf: How do I add a new URI to erchef
[2013-06-13 19:32:26 -0400] github-bawt: [chef] danielsdeleo deleted CHEF-2741 at 8ede59e: http://git.io/2fXfFA
[2013-06-13 19:40:26 -0400] schisamo: cwj: I'm hoping to do that soonish. I need to get caught up on backlog.
[2013-06-13 19:41:01 -0400] cwj: sending you hugs via ctcp
[2013-06-13 19:41:56 -0400] schisamo: LOL depending on how a few things go I should have some time tomorrow afternoon or Monday.
[2013-06-13 20:45:39 -0400] github-bawt: [chef] danielsdeleo pushed 1 new commit to master: http://git.io/XYSlLw
[2013-06-13 20:45:39 -0400] github-bawt: chef/master 98c2452 danielsdeleo: Merge branch 'CHEF-4275'
[2013-06-13 20:46:12 -0400] github-bawt: [chef] danielsdeleo deleted CHEF-4275 at ec0a3f5: http://git.io/bafpJA
[2013-06-13 20:55:10 -0400] btm: KarlHungus / petecheslock: proposed make -j fix: https://github.com/opscode-cookbooks/omnibus/pull/5/files
[2013-06-13 21:04:15 -0400] btm: KarlHungus / petecheslock: and the ruby fixes: https://github.com/opscode/omnibus-software/pull/46
[2013-06-13 21:05:06 -0400] btm: builds appear to work (installed on the two 9.1 build machines)
[2013-06-13 21:05:58 -0400] btm: our CI infrastructure runs the spec tests after the builds and it wasn't even trying, which I'm believing is due to the complex nest of git branch redirection I was feeding it.
[2013-06-13 21:14:21 -0400] KarlHungus: btm: i'm travelling tomorrow and over the weekend, but i'll try to get that into my CI stuff sunday night to test for you
[2013-06-13 21:25:11 -0400] github-bawt: [omnibus-chef] btm pushed 1 new commit to master: http://git.io/tXkvJg
[2013-06-13 21:25:11 -0400] github-bawt: omnibus-chef/master 99ecf35 Bryan McLellan: Update to omnibus v1.0.8...
[2013-06-13 21:58:39 -0400] github-bawt: [chef] josephrdsmith created add-travis-yml (+1 new commit): http://git.io/q9U7-Q
[2013-06-13 21:58:39 -0400] github-bawt: chef/add-travis-yml 9a95a63 Joseph Smith: start testing with travis
[2013-06-13 22:07:05 -0400] github-bawt: [chef] josephrdsmith merged add-travis-yml into master: http://git.io/yjB8BA
[2013-06-13 22:08:55 -0400] github-bawt: [knife-essentials] jkeiser tagged v1.5.2 at a5f48cb: http://git.io/F1mzFg
[2013-06-13 22:55:03 -0400] caryp: Hey Now  I've been out of the loop for a while but is there any active work on adding versioning to Roles?
[2013-06-13 23:39:54 -0400] sn0wb1rdz: What is the quick way to verify if the "chef_environment" I have on my run_list.json file is applied when I run chef_client?

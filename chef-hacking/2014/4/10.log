[2014-04-10 00:03:15 -0400] github-bawt: [omnibus-chef] sersut created project-specific-resources (+2 new commits): http://git.io/seIKlg
[2014-04-10 00:03:15 -0400] github-bawt: omnibus-chef/project-specific-resources d08562c sersut: Update chefdk mac packager resources.
[2014-04-10 00:03:15 -0400] github-bawt: omnibus-chef/project-specific-resources fd198ab sersut: Update chefdk pkg resources.
[2014-04-10 00:09:48 -0400] github-bawt: [omnibus-chef] sersut force-pushed project-specific-resources from fd198ab to ecce35b: http://git.io/TG--Ag
[2014-04-10 00:09:48 -0400] github-bawt: omnibus-chef/project-specific-resources ecce35b sersut: Update chefdk pkg resources.
[2014-04-10 00:15:04 -0400] ohlol: jkeiser_: hmm, shouldn't i be able to specify 'region' in compute_options?
[2014-04-10 00:15:32 -0400] ohlol: i get -->     - add normal.provisioner_options = {"compute_options"=>{"region"=>"us-west-1"}} <-- but it's still created in us-east-1
[2014-04-10 00:15:37 -0400] ohlol: tried in bootstrap_options too
[2014-04-10 00:16:24 -0400] ohlol: that's within my machine resource
[2014-04-10 00:19:03 -0400] jkeiser_: ohlol: that looks right ... ohlol: compute_options are part of the provisioner itself rather than each instance
[2014-04-10 00:19:20 -0400] ohlol: hmm k
[2014-04-10 00:19:26 -0400] jkeiser_: ohlol: ignore the first sentence there :)  I think it needs to be passed to with_fog_ec2_provisioner
[2014-04-10 00:21:59 -0400] jkeiser_: ohlol: if you want to create different servers in different regions, you might be able to pass region as part of bootstrap_options (I'm not sure if Fog supports that)
[2014-04-10 00:22:11 -0400] ohlol: yea i tried that
[2014-04-10 00:22:32 -0400] jkeiser_: Man, this all really makes me want to support ec2 api directly and bypass fog, would be clearer what is supported
[2014-04-10 00:22:39 -0400] jkeiser_: aws documentation is way better than fog's
[2014-04-10 00:22:47 -0400] ohlol: fog:AWS:077150036468 <-- is that on the RHS the region id?
[2014-04-10 00:22:52 -0400] ohlol: heh
[2014-04-10 00:23:38 -0400] ohlol: hmm i'm getting undefined method []
[2014-04-10 00:23:47 -0400] ohlol: when i have this line: with_fog_ec2_provisioner :region => 'us-west-1'
[2014-04-10 00:24:21 -0400] ohlol: seems like the correct syntax based on the readme
[2014-04-10 00:24:34 -0400] ohlol: gonna try wrapping it in curly braces
[2014-04-10 00:24:59 -0400] jkeiser_: that seems like the right syntax
[2014-04-10 00:25:33 -0400] jkeiser_: ohlol: what is the stack?
[2014-04-10 00:26:23 -0400] ohlol: jkeiser_: https://gist.github.com/ohlol/ec329148534927821459
[2014-04-10 00:26:49 -0400] ohlol: my recipe: https://gist.github.com/ohlol/e3676edfd82e5345a125
[2014-04-10 00:27:30 -0400] jkeiser_: ohlol: does it still do that if you remove the :region entirely?
[2014-04-10 00:27:37 -0400] ohlol: nah works fine then
[2014-04-10 00:28:50 -0400] jkeiser_: That's so weird, the bit you are looking at looks completely unrelated
[2014-04-10 00:30:55 -0400] jkeiser_: ohlol: the line in question implies that you have not defined any fog_key_pairs
[2014-04-10 00:31:28 -0400] ohlol: i do that in another recipe that is included
[2014-04-10 00:32:15 -0400] jkeiser_: ohlol: hmm.  can you show the recipe you are using that includes the with_fog_ec2_provisioner?
[2014-04-10 00:32:33 -0400] ohlol: sure
[2014-04-10 00:32:36 -0400] ohlol: i'll put it all in one file
[2014-04-10 00:33:43 -0400] jkeiser_: ohlol: regarding your question, the # in fog:AWS:# is actually the account ID
[2014-04-10 00:33:49 -0400] ohlol: ah k
[2014-04-10 00:34:02 -0400] jkeiser_: ohlol: so if you have multiple IAM users, that URL will be the same for all of them
[2014-04-10 00:34:10 -0400] ohlol: word
[2014-04-10 00:35:40 -0400] jkeiser_: ohlol: just tested quick, and when I set :region => 'us-east-1' I don't get the exception.  Trying west to see if it does anything different ...
[2014-04-10 00:36:15 -0400] ohlol: i wonder if it's because in my other recipe i have with_fog_ec2_provisioner with no arguments
[2014-04-10 00:37:19 -0400] jkeiser_: hmm, you mean two separate with_fog_ec2_provisioners?  It could be.  It's not *supposed* to be a problem, but as I've never tried it before.
[2014-04-10 00:37:46 -0400] jkeiser_: OH
[2014-04-10 00:37:47 -0400] ohlol: well it's not blowing up with everything in the same recipe file
[2014-04-10 00:37:48 -0400] jkeiser_: yes, that's it
[2014-04-10 00:37:51 -0400] ohlol: at least
[2014-04-10 00:38:17 -0400] jkeiser_: I understand the issue.  I really need to get my credentials model fixed.  For now, don't make more than one fog ec2 provisioner :)
[2014-04-10 00:38:47 -0400] jkeiser_: ohlol: let me know if you get things up in west then :)
[2014-04-10 00:38:54 -0400] ohlol: jkeiser_: it works :)
[2014-04-10 00:38:55 -0400] ohlol: thanks
[2014-04-10 00:39:23 -0400] ohlol: so i think vpc is assigned by using subnet id
[2014-04-10 00:39:28 -0400] ohlol: based on what i see with knife-ec2
[2014-04-10 00:57:26 -0400] ohlol: jkeiser_: woot, got it to assign to a vpc too
[2014-04-10 02:20:50 -0400] jkeiser: ohlol: yay for vpc!
[2014-04-10 02:21:26 -0400] jkeiser: ohlol: as we approach 1.0 we will have actual docs for these things :) And hopefully some non-fog drivers
[2014-04-10 02:21:55 -0400] ohlol: nice
[2014-04-10 05:35:29 -0400] github-bawt: [chef] lamont-granquist created lcg/CHEF-5198-remote-file-functests (+1 new commit): http://git.io/S194Rw
[2014-04-10 05:35:30 -0400] github-bawt: chef/lcg/CHEF-5198-remote-file-functests 732e16d Lamont Granquist: CHEF-5198: add func tests for remote_file...
[2014-04-10 11:57:50 -0400] github-bawt: [chef] btm pushed 2 new commits to master: http://git.io/L7-FsQ
[2014-04-10 11:57:51 -0400] github-bawt: chef/master 8aa63d3 Jeremiah Snapp: quote git rev_pattern to prevent pathname expansion
[2014-04-10 11:57:52 -0400] github-bawt: chef/master 0e618d8 Bryan McLellan: CHEF-4940: Add note to changelog
[2014-04-10 11:58:10 -0400] github-bawt: [chef] btm deleted jhs/CHEF-4940 at 41c33ad: http://git.io/Mp_Ofg
[2014-04-10 12:03:15 -0400] github-bawt: [chef] btm pushed 2 new commits to master: http://git.io/Wx4Alw
[2014-04-10 12:03:15 -0400] github-bawt: chef/master b3506a7 Pierre Ynard: [CHEF-5150] chef-service-manager: don't create interactive service...
[2014-04-10 12:03:17 -0400] github-bawt: chef/master 2404f19 Bryan McLellan: CHEF-5150: update UPPER_CASE.md files
[2014-04-10 14:01:05 -0400] github-bawt: [chef] btm created btm/CHEF-5147 (+2 new commits): http://git.io/yz8r_Q
[2014-04-10 14:01:06 -0400] github-bawt: chef/btm/CHEF-5147 7263048 Ranjib Dey: dont check for dependencies if include-dependency is set to false
[2014-04-10 14:01:06 -0400] github-bawt: chef/btm/CHEF-5147 3ea0acd Bryan McLellan: CHEF-5147: Fix tests, but......
[2014-04-10 16:12:30 -0400] github-bawt: [chef] btm pushed 5 new commits to master: http://git.io/T4aI9Q
[2014-04-10 16:12:30 -0400] github-bawt: chef/master 07f6316 Bastien JOVE: windows path fix for CHEF-4472
[2014-04-10 16:12:30 -0400] github-bawt: chef/master 34f7ada Tensibai: Update local_file.rb
[2014-04-10 16:12:31 -0400] github-bawt: chef/master a104e83 Bastien JOVE: Correction on call vs log error
[2014-04-10 16:31:54 -0400] github-bawt: [chef] btm created btm/CHEF-5211 (+2 new commits): http://git.io/g94GZw
[2014-04-10 16:31:54 -0400] github-bawt: chef/btm/CHEF-5211 51d012e Michael Goetz: [CHEF-5211] Adding load_plugins call to ensure oha plugins are loaded before requiring them
[2014-04-10 16:31:54 -0400] github-bawt: chef/btm/CHEF-5211 cf28738 Bryan McLellan: CHEF-5211: Make sure ohai[:fqdn] succeeds
[2014-04-10 16:42:24 -0400] github-bawt: [chef] lamont-granquist pushed 1 new commit to master: http://git.io/9kCJKg
[2014-04-10 16:42:24 -0400] github-bawt: chef/master 512c827 lamont-granquist: Merge pull request #1370 from opscode/lcg/CHEF-5198-remote-file-functests...
[2014-04-10 16:51:12 -0400] github-bawt: [chef] btm force-pushed btm/CHEF-5211 from cf28738 to d918e96: http://git.io/FW598w
[2014-04-10 16:51:12 -0400] github-bawt: chef/btm/CHEF-5211 d918e96 Bryan McLellan: CHEF-5211: Make sure ohai[:fqdn] succeeds
[2014-04-10 17:11:28 -0400] github-bawt: [knife-ec2] adamedx created adamed/knife-464 (+7 new commits): http://git.io/OmsyMA
[2014-04-10 17:11:28 -0400] github-bawt: knife-ec2/adamed/knife-464 37244d4 Kris Wehner: Add session token support for use with STS
[2014-04-10 17:11:29 -0400] github-bawt: knife-ec2/adamed/knife-464 d51ac6a Charles G: Add aws_session_token option to the README
[2014-04-10 17:11:29 -0400] github-bawt: knife-ec2/adamed/knife-464 f17b6e0 Charles G: Remove short option from aws_session_token (-T in use)
[2014-04-10 17:17:02 -0400] github-bawt: [omnibus-chef] sersut force-pushed project-specific-resources from ecce35b to 438135a: http://git.io/TG--Ag
[2014-04-10 17:17:02 -0400] github-bawt: omnibus-chef/project-specific-resources 4896fed sersut: Update chefdk pkg resources.
[2014-04-10 17:17:03 -0400] github-bawt: omnibus-chef/project-specific-resources 438135a sersut: Testing signing and per project resources.
[2014-04-10 17:37:13 -0400] github-bawt: [omnibus-chef] sersut force-pushed project-specific-resources from 438135a to 3aab164: http://git.io/TG--Ag
[2014-04-10 17:37:13 -0400] github-bawt: omnibus-chef/project-specific-resources 287982c sersut: Update chefdk mac packager resources.
[2014-04-10 17:37:14 -0400] github-bawt: omnibus-chef/project-specific-resources 18b72d5 sersut: Update chefdk pkg resources.
[2014-04-10 17:37:14 -0400] github-bawt: omnibus-chef/project-specific-resources f4331f0 sersut: Make the year in the license files dynamic.
[2014-04-10 18:01:31 -0400] github-bawt: [omnibus-chef] sersut force-pushed project-specific-resources from 3aab164 to d84e4f7: http://git.io/TG--Ag
[2014-04-10 18:01:31 -0400] github-bawt: omnibus-chef/project-specific-resources d84e4f7 sersut: Testing signing and per project resources.
[2014-04-10 18:18:35 -0400] github-bawt: [knife-ec2] adamedx pushed 1 new commit to adamed/knife-464: http://git.io/xuE6Uw
[2014-04-10 18:18:35 -0400] github-bawt: knife-ec2/adamed/knife-464 7b046bb adamedx: Documentation updates for AWS STS Token
[2014-04-10 18:27:36 -0400] github-bawt: [ohai] mcquin created plugin-name-fix (+1 new commit): http://git.io/PvPizA
[2014-04-10 18:27:36 -0400] github-bawt: ohai/plugin-name-fix cb174ed Claire McQuin: remove capitalize from v7 name method
[2014-04-10 18:47:31 -0400] github-bawt: [knife-ec2] adamedx deleted adamed/knife-464 at 7b046bb: http://git.io/CX5ZvA
[2014-04-10 21:57:44 -0400] aspiers: how can I introspect a light-weight resource to find out its attributes?
[2014-04-10 22:04:36 -0400] aspiers: the only thing I can figure out is to look out for methods beginning with _set_or_return
[2014-04-10 22:05:23 -0400] aspiers: i.e. resource.methods.grep(/^_set_or_return_/).map { |m| m.to_s.gsub /^_set_or_return_/, '' }
[2014-04-10 22:05:29 -0400] aspiers: but that's as evil as hell
[2014-04-10 22:21:45 -0400] ohlol_: hey jkeiser does chef-metal handle data bags?
[2014-04-10 22:22:05 -0400] jkeiser: ohlol_: you mean, can you create and update data bags from a metal recipe?
[2014-04-10 22:22:09 -0400] ohlol_: yeah
[2014-04-10 22:22:13 -0400] ohlol_: well
[2014-04-10 22:22:17 -0400] ohlol_: actually no
[2014-04-10 22:22:21 -0400] jkeiser: ohlol_: yep.  you can do that with any chef objects except cookbooks
[2014-04-10 22:23:37 -0400] ohlol_: well hmm
[2014-04-10 22:23:40 -0400] ohlol_: where's the docs on that?
[2014-04-10 22:23:44 -0400] jkeiser: ohlol_: https://github.com/opscode/cheffish
[2014-04-10 22:24:06 -0400] ohlol_: lol
[2014-04-10 22:24:07 -0400] ohlol_: k
[2014-04-10 22:24:09 -0400] jkeiser: ohlol_: it's included if you have installed chef-metal
[2014-04-10 22:24:22 -0400] jkeiser: ohlol_: there are better docs I think, that was one of the first things the docs guy got to
[2014-04-10 22:24:23 -0400] jkeiser: one sec
[2014-04-10 22:24:57 -0400] ohlol_: i have some local data bag files that i need to get used when chef-client runs on the remote
[2014-04-10 22:26:20 -0400] jkeiser: ohlol_: you mean like, you have a local file named data_bags/mybagname/myitemname.json, and you are using chef-zero, and you want chef-client on the remote side to see them?
[2014-04-10 22:26:27 -0400] ohlol_: ya
[2014-04-10 22:26:43 -0400] jkeiser: ohlol_: (are you using local-mode/chef-zero, or are you using Hosted / Enterprise / Open Source Chef Server?)
[2014-04-10 22:26:53 -0400] ohlol_: the former
[2014-04-10 22:27:09 -0400] jkeiser: ohlol_: that's the answer then :)  If you are using local mode, the remote side will point back at your local repository
[2014-04-10 22:27:22 -0400] ohlol_: hmm
[2014-04-10 22:27:30 -0400] jkeiser: ohlol_: so anything in the proper place will show up.  So, like, make sure you have a data_bags file in that place and it should work
[2014-04-10 22:29:52 -0400] ohlol: oh so i think i need to set data_bag_path in my client.rb
[2014-04-10 22:30:11 -0400] jkeiser: ohlol_: depends.  do you have a cookbook_path or chef_repo_path set?
[2014-04-10 22:30:18 -0400] ohlol: the former yeah
[2014-04-10 22:30:31 -0400] ohlol: maybe i should just use the chef_repo_path
[2014-04-10 22:30:37 -0400] ohlol: didn't know that was a thing
[2014-04-10 22:30:38 -0400] jkeiser: ohlol_: data_bags/ directory by default is chef_repo_path/data_bags
[2014-04-10 22:31:00 -0400] jkeiser: ohlol_: as a nice backwards compatibility thing, chef_repo_path by default is cookbook_path/..
[2014-04-10 22:31:13 -0400] ohlol: hm
[2014-04-10 22:31:16 -0400] jkeiser: ohlol_: so in your case, make cookbooks/../data_bags and you will be ok
[2014-04-10 22:31:25 -0400] jkeiser: but yeah, imo chef_repo_path is the right way to set things
[2014-04-10 22:31:28 -0400] ohlol: well i've got htat
[2014-04-10 22:31:40 -0400] jkeiser: ohlol_: ok, try this then
[2014-04-10 22:31:49 -0400] jkeiser: ohlol_: knife list /data_bags
[2014-04-10 22:31:52 -0400] ohlol: oh wait
[2014-04-10 22:31:54 -0400] ohlol: you know what
[2014-04-10 22:31:55 -0400] jkeiser: And knife list /cookbooks
[2014-04-10 22:32:03 -0400] ohlol: i see the problem
[2014-04-10 22:32:31 -0400] ohlol: so the run list is just the openvpn recipes, and i assumed it would look up users from a data bag named 'openvpn'
[2014-04-10 22:32:34 -0400] ohlol: but it's 'users'
[2014-04-10 22:32:45 -0400] jkeiser: ah!
[2014-04-10 22:33:01 -0400] ohlol: predictable naming, lol
[2014-04-10 22:33:02 -0400] jkeiser: cool.  well, if knife list /data_bags shows the users data bag, you should be good
[2014-04-10 22:34:08 -0400] ohlol: the chef-zero server has to be running for that, right?
[2014-04-10 22:34:30 -0400] jkeiser: ohlol: if local_mode true is set in your knife.rb, it will start up.  Or you can use knife -z
[2014-04-10 22:34:50 -0400] jkeiser: ohlol_: well it has to be knife list /data_bags -z (-z has to be the last parameter)
[2014-04-10 22:34:57 -0400] ohlol: ah cool
[2014-04-10 22:39:25 -0400] ohlol: awww yeah it worked
[2014-04-10 22:42:55 -0400] jkeiser: WOO
[2014-04-10 22:43:24 -0400] jkeiser: It actually tunnels chef-zero over the port, so it even works if you are inceptioning chef-metal
[2014-04-10 22:44:38 -0400] jkeiser: you can run chef-zero on your workstation, and run a metal recipe there, and the created machine will tunnel back.  If you run metal on the created machine, the created(created) machine will port forward all the way back to your workstation to get its data.
[2014-04-10 22:45:27 -0400] jkeiser: Someday I'm going to make a 6-machine ec2 chain just to prove that shit works
[2014-04-10 22:45:44 -0400] jkeiser: Is that a HELLO WORLD file on that sixth machine?  WHY YES IT IS thank you very much

[2013-04-19 11:16:27 -0400] Silex: hi people, say pls , fi chef can use (bind server's ports) to IPv6  ?
[2013-04-19 11:19:24 -0400] Silex: or I need to set some auxiliary options for IPv6 usage
[2013-04-19 13:41:41 -0400] dillyjay: hello. i'm new to chef and ruby, seeking help on code organization. i'm using chef to provision an AMP application on ubuntu 12.04. php is built from source so i can use 5.4. when building from source, i kept running into "can't find libc-client.a" b/c it was in the wrong lib-dir. right now i have a cookbook called "hacks", whose default recipe runs an execute block to symlink libc-client.a in the lib-dir. 
[2013-04-19 13:42:10 -0400] dillyjay: obviously a "hacks" cookbook isn't a good thing. any suggestions on a better approach?
[2013-04-19 13:42:32 -0400] behemphi: So first dillyjay there is a link resource
[2013-04-19 13:42:40 -0400] behemphi: so you don't need to do it as an execute block
[2013-04-19 13:42:51 -0400] behemphi: the other side of it (the need for the link)
[2013-04-19 13:43:06 -0400] behemphi: I have never compiled PHP wthout having to do some sort of hackery like this.  
[2013-04-19 13:43:42 -0400] behemphi: so I would expect to have to do some symlinking before acutally compiling chef or otherwise
[2013-04-19 13:44:03 -0400] behemphi: that comes with the caveat that the last version I compiled was 5.3.5 on REL 4
[2013-04-19 13:44:12 -0400] behemphi: so things may have changed since then
[2013-04-19 13:44:49 -0400] behemphi: Here is the doc on the link resource:  http://docs.opscode.com/resource_link.html
[2013-04-19 13:46:08 -0400] dillyjay: cool, thanks very much. a couple questions: 1) does the link resource fail if the link already exists? 2) would it break stuff or be considered bad practice to move everything into one lib-dir instead of having ugly symlinks? 3) where would you suggest putting the link resource? new cookbook that handles the link and runs the php recipe as well?
[2013-04-19 13:46:59 -0400] behemphi: 1) No, that is the beauty of "idempotency".  The resource will see it and skip the create.
[2013-04-19 13:47:23 -0400] behemphi: 2) Other things will depend on lib-client etc.  
[2013-04-19 13:47:31 -0400] behemphi: So I would not move it
[2013-04-19 13:48:54 -0400] behemphi: Ubuntu as a system for this, but the name escapes me.  It would be a better way.  Maybe one of the others can call the name up.  
[2013-04-19 13:49:30 -0400] behemphi: 3) I am going to run off the reservation here since you are new  stick with me:
[2013-04-19 13:49:49 -0400] dillyjay: cool, thanks very much. 
[2013-04-19 13:49:50 -0400] dillyjay: alright
[2013-04-19 13:49:52 -0400] behemphi: I would first get the community php cookbook and see if it will do the compilation installation (like nginx)
[2013-04-19 13:50:00 -0400] behemphi: I expect it does.
[2013-04-19 13:50:13 -0400] behemphi: It _might_ already deal with this problem 
[2013-04-19 13:50:50 -0400] behemphi: Whether it does or not, I would write my own cookbook called fm_php (the fm is a namespace convention for my company FeedMagnet)
[2013-04-19 13:50:53 -0400] dillyjay: the community cookbook is missing some modules that i need. and (this may be super dumb) the "compilation" is the package, right?
[2013-04-19 13:51:02 -0400] dillyjay: like apt-get php or what have you?
[2013-04-19 13:51:02 -0400] behemphi: In there I woudl have a recipe called "layout"
[2013-04-19 13:51:15 -0400] behemphi: that is where I would "prep the field"
[2013-04-19 13:51:43 -0400] behemphi: create and permission directorys, symlinks, etc needed b/f I then called the recipe(s) from the php cookbook 
[2013-04-19 13:51:49 -0400] behemphi: with include_receipt
[2013-04-19 13:52:06 -0400] dillyjay: that's what i'm doing now in "hacks"
[2013-04-19 13:52:17 -0400] behemphi: Cool
[2013-04-19 13:52:39 -0400] behemphi: I am not familiar with the PHP cookbook.  I am basing my suggestion on others like nginx and rabbitmq
[2013-04-19 13:52:40 -0400] dillyjay: it just didn't feel like it was organized properly
[2013-04-19 13:53:08 -0400] dillyjay: but is the "compilation" what you get when you install using a package manager?
[2013-04-19 13:53:35 -0400] behemphi: No, you get the 12.04 package
[2013-04-19 13:53:50 -0400] behemphi: which will be in stalled in the "ubuntu way"
[2013-04-19 13:54:08 -0400] behemphi: and will be the version they decided upon
[2013-04-19 13:54:25 -0400] behemphi: sec let me peek at the PHP cookbook
[2013-04-19 13:54:37 -0400] dillyjay: yeah, that's the problem. ubuntu 12.04 installs php 5.3
[2013-04-19 13:55:52 -0400] dillyjay: i think ubuntu 12.10 installs 5.4 (which is what i'm after), but the project spec is strict about ubuntu 12.04 bc of LTS
[2013-04-19 13:56:16 -0400] behemphi: https://github.com/opscode-cookbooks/php/blob/master/recipes/source.rb
[2013-04-19 13:56:57 -0400] behemphi: On line 50 it starts compiling
[2013-04-19 13:57:46 -0400] dillyjay: i moved from the community cookbook to https://github.com/priestjim/chef-php because it has some modules i need
[2013-04-19 13:59:21 -0400] dillyjay: ok, so compilation is just the stage of the source build process that puts all the stuff together
[2013-04-19 13:59:45 -0400] behemphi: Yes, so your "hack" recipe just becomes "layout"
[2013-04-19 14:00:13 -0400] behemphi: it might only have that one symlink in it or it might have serveral resources  getting the system ready b/f compiling php
[2013-04-19 14:00:26 -0400] behemphi: but it sounds to me like you are on a good path
[2013-04-19 14:01:06 -0400] dillyjay: it only has the symlink and some of the module recipes from the chef-php cookbook, i guess that's why it felt "wrong", bc it didn't really do anything other than altering existing cookbooks
[2013-04-19 14:01:59 -0400] dillyjay: i thought there might be some better way to integrate it in attributes of the node or something.
[2013-04-19 14:02:10 -0400] dillyjay: basically, i'm just over thinking it :) i appreciate all the help
[2013-04-19 14:02:48 -0400] behemphi: your welcome
[2013-04-19 15:16:30 -0400] dillyjay: behemphi: can you specify multiple "to" attributes in a link resource? or do you have to define multiple link resources?
[2013-04-19 15:18:02 -0400] behemphi: one at a time
[2013-04-19 15:18:46 -0400] dillyjay: thanks
[2013-04-19 15:19:10 -0400] behemphi: Not trying to lay RTMF on you but that link above (if you did not look) is definitive and has a number of examples.  I say this b/c all the other resources are documented in this way too.  IMO it is  really well done. 
[2013-04-19 15:19:23 -0400] behemphi: I also supsect it worth saying I am not an opscode employee
[2013-04-19 15:19:38 -0400] behemphi: just a "sou chef"
[2013-04-19 15:20:20 -0400] dillyjay: i only came back to ask because i didn't see anything in that link about linking one file to multiple "to"s
[2013-04-19 15:20:45 -0400] dillyjay: psh, i don't care who you work for. good assistance is good.
[2013-04-19 15:20:47 -0400] behemphi: cool, again not tyring to be an ass, just want to be sure you know the doc is pretty tight on the resources
[2013-04-19 15:22:26 -0400] dillyjay: it is; i'm not one of those "yeah, i know it's in the manual, but can't you just tell me?" people
[2013-04-19 15:23:41 -0400] behemphi: I used to be :-).  Good doc and access to the code has slowly grown on me!  
[2013-04-19 15:25:26 -0400] dillyjay: i was too. then i tried reading docs/source, got more stuff done, and learned a bunch of cool stuff in the process; "teaching a man to fish" and all that
[2013-04-19 15:25:39 -0400] behemphi: bingo!
[2013-04-19 15:26:24 -0400] dillyjay: can you share any of the cookbooks that you've done "layout" recipes for?
[2013-04-19 15:28:59 -0400] behemphi: This one ended up not going that direction (b/f Istarted doing it that way), but it does have all the prep, compile, etc for getting nginx installed:
[2013-04-19 15:29:00 -0400] behemphi: https://gist.github.com/behemphi/5421091
[2013-04-19 15:29:46 -0400] behemphi: we use python and uwsgi to server it ( uwsgi ~ fastcgi for php)
[2013-04-19 15:38:44 -0400] dillyjay: this is perfect, thanks
[2013-04-19 15:41:17 -0400] dillyjay: can i ask, do you work as a sysadmin alone, or do you also develop and/or design?
[2013-04-19 15:43:21 -0400] behemphi: sysadmin and dba mostly
[2013-04-19 15:43:34 -0400] behemphi: I have a big role in system architecture as well.  
[2013-04-19 15:44:25 -0400] behemphi: Chef is allowing me to move in the dev direction again and I am looking forward to it.  I am really keep to implement Splunk then get some semantic type logging into our application.  (so really I am a _self serving_ sysadmin :-)
[2013-04-19 15:46:11 -0400] dillyjay: cool. i ask bc i'm a dev/design person, trying to improve margin on a new project by wearing a sysadmin hat too. the more i'm looking at this stuff, i think i probably should hire someone until i can learn off the job
[2013-04-19 15:47:02 -0400] behemphi: where are you located?
[2013-04-19 15:47:18 -0400] dillyjay: florida
[2013-04-19 15:47:33 -0400] rep0st: dillyjay: tampa by any chance?
[2013-04-19 15:47:39 -0400] dillyjay: yes
[2013-04-19 15:47:40 -0400] behemphi: dunno anyone local to you
[2013-04-19 15:47:44 -0400] rep0st: dillyjay: heheh
[2013-04-19 15:47:47 -0400] behemphi: well there you go!
[2013-04-19 15:47:56 -0400] rep0st: lol no i'm in new york
[2013-04-19 15:48:02 -0400] rep0st: but i've had dreams of finding something in tampa
[2013-04-19 15:48:07 -0400] rep0st: family and some friends are there
[2013-04-19 15:48:55 -0400] rep0st: went down thre for a wedding and it was an awesome atmosphere
[2013-04-19 15:48:56 -0400] dillyjay: rep0st: if you're gainfully employed in ny, not sure i could afford your services unfortunately.
[2013-04-19 15:49:15 -0400] dillyjay: i've been here my whole life, outside of college. it's a nice place to be
[2013-04-19 15:49:48 -0400] rep0st: dillyjay: agreed. the only thing really that was stopping me was finding a tech job scene where i could fit into. 
[2013-04-19 15:52:22 -0400] dillyjay: rep0st: yeah, unfortunately there's not a very big digital shop community. mostly huge networking cos and tiny shops ripping people off on wordpress
[2013-04-19 15:52:28 -0400] ranman: Anyone know where the platform strings for value_for_platform come from?
[2013-04-19 15:53:27 -0400] behemphi: @ranman Ohai is what reads the platform and makes it available to chef
[2013-04-19 15:53:31 -0400] behemphi: is that what you are asking?
[2013-04-19 15:53:52 -0400] ranman: yes
[2013-04-19 15:54:00 -0400] ranman: thanks, where is that in the source? :/
[2013-04-19 15:54:10 -0400] behemphi: ohai is its own gem
[2013-04-19 15:54:13 -0400] ranman: thought it would be somewhere like lib/chef/dsl/platform_introspection.rb
[2013-04-19 15:54:16 -0400] ranman: I know that
[2013-04-19 15:54:54 -0400] ranman: (well I know that after you told me, I had never heard of it before)
[2013-04-19 15:56:27 -0400] behemphi: ranman, you set?  Not sure if I gave you the answer to the wrong question
[2013-04-19 15:56:28 -0400] behemphi: https://github.com/opscode/ohai
[2013-04-19 15:56:39 -0400] behemphi: is where I peek at the source
[2013-04-19 15:57:33 -0400] ranman: behemphi: going through that now, (though I checked it out and am acking it), my real question was what's the platform string for OSX
[2013-04-19 15:57:39 -0400] ranman: but I thought that would be too rookie
[2013-04-19 15:59:24 -0400] behemphi: http://tickets.opscode.com/browse/CHEF-1690  this is likely the answer 
[2013-04-19 16:00:03 -0400] ranman: behemphi++
[2013-04-19 16:00:06 -0400] ranman: thanks
[2013-04-19 16:00:36 -0400] behemphi: sure
[2013-04-19 16:01:17 -0400] behemphi: Note Ranman there is also platform_family which is meant to catch groups of them
[2013-04-19 16:01:41 -0400] behemphi: http://docs.opscode.com/dsl_recipe_method_platform_family.html
[2013-04-19 16:04:22 -0400] ranman: cool, as I understand it that is only available in newer versions of the client though?
[2013-04-19 16:04:48 -0400] ranman: (though finding out which version this was added in is pretty difficult)

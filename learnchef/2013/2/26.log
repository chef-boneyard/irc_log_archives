[2013-02-26 00:00:05 -0500] sethvargo: ashmckenzie: I would recommend having a data_bag with all the necessary cron definitions with an enabled attribute
[2013-02-26 00:00:35 -0500] sethvargo: and then a recipe that adds the definitions if that data_bag attribute is true
[2013-02-26 00:02:02 -0500] ashmckenzie: that sounds really nice, i've not played with data bags, thanks very much
[2013-02-26 21:44:36 -0500] ngrayson: is there a way to add a user and set the initial password but have it be allowed to change?
[2013-02-26 22:10:57 -0500] sethvargo: ngrayson what operating system?
[2013-02-26 22:11:05 -0500] ngrayson: ubuntu
[2013-02-26 22:11:29 -0500] sethvargo: server or desktop?
[2013-02-26 22:12:17 -0500] ngrayson: server, sec i'll paste example
[2013-02-26 22:12:54 -0500] ngrayson: user site['ftpusername'] do
[2013-02-26 22:12:54 -0500] ngrayson:       comment "FTP Account for site['domain']"
[2013-02-26 22:12:54 -0500] ngrayson:       home "/home/site['ftpusername']"
[2013-02-26 22:12:54 -0500] ngrayson:       shell "/bin/bash"
[2013-02-26 22:12:55 -0500] ngrayson:       password "site['ftppassword']"
[2013-02-26 22:12:55 -0500] ngrayson:     end
[2013-02-26 22:13:25 -0500] ngrayson: so i want "password "site['ftppassword']"" to only set the password once
[2013-02-26 22:13:32 -0500] sethvargo: well, first, you want to interpolate those variables
[2013-02-26 22:13:44 -0500] sethvargo: b/c right now, that's the literal password
[2013-02-26 22:13:56 -0500] ngrayson: it's pulling from a databag
[2013-02-26 22:14:07 -0500] sethvargo: right, but what you have right now, isn't doing that
[2013-02-26 22:14:11 -0500] ngrayson: it works right now just sets the password each time after i passwd
[2013-02-26 22:14:27 -0500] ngrayson: i'll gist the recipe
[2013-02-26 22:14:44 -0500] sethvargo: what you have there will set the password to site['ftppassword'] (like that literal string), not the value of site['ftppassword']
[2013-02-26 22:14:46 -0500] ngrayson: https://gist.github.com/ngrayson/118f29c6e5ccf0ea5959
[2013-02-26 22:15:02 -0500] sethvargo: https://gist.github.com/ngrayson/118f29c6e5ccf0ea5959#file-gistfile1-txt-L16
[2013-02-26 22:15:12 -0500] sethvargo: You're setting the password to a literal string
[2013-02-26 22:15:17 -0500] sethvargo: same for https://gist.github.com/ngrayson/118f29c6e5ccf0ea5959#file-gistfile1-txt-L16
[2013-02-26 22:15:29 -0500] sethvargo: That should be "FTP Account for #{site['domain']}"
[2013-02-26 22:15:38 -0500] sethvargo: (like you have on line 19)
[2013-02-26 22:15:46 -0500] ngrayson: ah okay
[2013-02-26 22:15:56 -0500] sethvargo: but that doesn't answer your question
[2013-02-26 22:16:13 -0500] sethvargo: so you want to only create the user if it doesn't already exist (basically)
[2013-02-26 22:16:20 -0500] ngrayson: yes
[2013-02-26 22:17:27 -0500] sethvargo: the "chef" way is to have the user's entirely managed by chef
[2013-02-26 22:17:45 -0500] sethvargo: meaning, for a user to change his/her password, he/she would generate and edit the databag for his/her username
[2013-02-26 22:18:10 -0500] sethvargo: but giving all your users access to the git repository may not be possible in your organization, so you can use a workaround
[2013-02-26 22:18:21 -0500] ngrayson: for sure not possible
[2013-02-26 22:18:59 -0500] ngrayson: i guess i could just ssh and passwd the user once and not have it in a cookbook at all
[2013-02-26 22:19:27 -0500] sethvargo: you can have two user declartion blocks
[2013-02-26 22:19:57 -0500] sethvargo: in pseudo code: if user_exists -> just manage it, else -> create and change password
[2013-02-26 22:20:25 -0500] ngrayson: ah that would work
[2013-02-26 22:20:40 -0500] ngrayson: i wish there was a :create_if_missing action 
[2013-02-26 22:20:47 -0500] sethvargo: you could open a ticket
[2013-02-26 22:21:15 -0500] ngrayson: thanks for the help. i'll consider that
[2013-02-26 22:21:29 -0500] sethvargo: see the comment I just posted on the gist
[2013-02-26 22:22:44 -0500] ngrayson: that is a way of doing it

[2013-11-22 00:36:05 -0500] rsmitty: has anyone run into this issue? I'm writing a cookbook, upload it and add it to runlist. then when I 'sudo chef-client' it syncs and compiles the cookbook, but doesn't converge it
[2013-11-22 00:36:11 -0500] rsmitty: no error is thrown
[2013-11-22 01:54:30 -0500] Mando: Hi Everyone
[2013-11-22 01:55:22 -0500] mmzyk: Hi.
[2013-11-22 01:55:29 -0500] Mando: I'm trying to get started on learning chef but I'm a little confused as to where to begin
[2013-11-22 01:55:39 -0500] mmzyk: Okay.
[2013-11-22 01:55:42 -0500] Mando: I tried running through the getting started guide
[2013-11-22 01:56:30 -0500] Mando: I guess my problem is i don't know the different between chef-solo and chef-client
[2013-11-22 01:56:52 -0500] mmzyk: Which getting started guide did you try?
[2013-11-22 01:57:37 -0500] Mando: https://learnchef.opscode.com/quickstart/workstation-setup/
[2013-11-22 01:57:57 -0500] Mando: i got chef install and i can run chef-solo
[2013-11-22 01:58:13 -0500] Mando: i get this output
[2013-11-22 01:58:14 -0500] Mando: [root@mywiki cookbooks]# chef-solo  [2013-11-22T01:56:43+00:00] WARN: ***************************************** [2013-11-22T01:56:43+00:00] WARN: Did not find config file: /etc/chef/solo.rb, using command line options. [2013-11-22T01:56:43+00:00] WARN: ***************************************** Starting Chef Client, version 11.8.0 Compiling Cookbooks... Converging 0 resources Chef Client finished, 0 resources updated
[2013-11-22 01:58:32 -0500] Mando: does that mean it's actually working and i just need to create a solo.rb file?
[2013-11-22 01:58:34 -0500] mmzyk: Mando: mac/linux/windows?
[2013-11-22 01:58:37 -0500] Mando: linux
[2013-11-22 01:58:45 -0500] Mando: CentOS 6.5
[2013-11-22 01:58:54 -0500] Mando: sorry 6.4
[2013-11-22 01:59:10 -0500] mmzyk: And which step in the quickstart guide are you at?
[2013-11-22 01:59:33 -0500] mmzyk: So I can follow along and see if I can figure out where the confusion is - and I'll answer the solo vs. client question in a second.
[2013-11-22 01:59:52 -0500] Mando: Chef-Repo
[2013-11-22 02:00:57 -0500] Mando: I didn't sign up for the free ops account
[2013-11-22 02:01:13 -0500] Mando: since i read somewhere i could use chef-solo since i only have 1 workstation
[2013-11-22 02:01:29 -0500] mmzyk: Okay. So I'm confused as to exactly what you've done, but I think I have an idea. 
[2013-11-22 02:01:31 -0500] Mando: I figure I could start with just one instead of running it on multiple machine right away
[2013-11-22 02:02:19 -0500] mmzyk: If you're new, following the quide exactly is generally the best course of action. You sign up for the free acount and hosted chef acts as your chef server while you run chef client on yoru workstation.
[2013-11-22 02:02:23 -0500] mmzyk: the client then talks ot the server.
[2013-11-22 02:02:35 -0500] mmzyk: Where as with chef-solo, as the name implies, it does everythign itself.
[2013-11-22 02:02:45 -0500] mmzyk: It acts as a self contained system.
[2013-11-22 02:03:03 -0500] Mando: ok
[2013-11-22 02:03:15 -0500] mmzyk: However, the guide doesn't take you through setting up solo. 
[2013-11-22 02:03:25 -0500] Mando: so i would need to sign up to be able to generate the pem and all the other file required correct?
[2013-11-22 02:03:29 -0500] mmzyk: Not that it's that different, but it is a seperate thing from teh chef client.
[2013-11-22 02:03:49 -0500] mmzyk: Yes, that's so your workstation can talk securly with the server.
[2013-11-22 02:03:57 -0500] Mando: ok
[2013-11-22 02:04:00 -0500] mmzyk: You'll see in the steps that you can download a starter guide.
[2013-11-22 02:04:12 -0500] mmzyk: er, maybe it's called a starter kit.
[2013-11-22 02:04:29 -0500] mmzyk: That kit will have your pem and everything you need in it.
[2013-11-22 02:04:42 -0500] mmzyk: In an attempt to make getting started as easy as possible.
[2013-11-22 02:04:49 -0500] Mando: so "Workstation" is that refering to my Laptop or the actual server i will be chefafying?
[2013-11-22 02:06:23 -0500] mmzyk: workstation would be your laptop. The machine you're going to be using to interact w/ the chef server.
[2013-11-22 02:06:27 -0500] mpechner: Is anyone using chef to configure linux containers? Not talking about using chef to intall the container.  But configure containers once created.
[2013-11-22 02:06:47 -0500] mmzyk: mpechner no clue. I'd recommend you ask that question in #chef.
[2013-11-22 02:06:56 -0500] mpechner: ok. thanks
[2013-11-22 02:07:09 -0500] mmzyk: Mando Generally a machine being managed by chef is called a client or node.
[2013-11-22 02:07:48 -0500] mmzyk: however, just to make things maximally confusing they can be the same machine. :)
[2013-11-22 02:08:08 -0500] mmzyk: rsmitty, you asked a question earlier about a cookbook not seeming to run, is that right?
[2013-11-22 02:08:19 -0500] mmzyk: rsmitty ever figure that out?
[2013-11-22 02:09:19 -0500] rsmitty: hey mmzyk, thanks. yeah, i didn't figure it out. winded up killing my fedora node. i think it had to do with the fact that i had bootstrapped it more than once
[2013-11-22 02:09:25 -0500] rsmitty: user error i'm sure, haha
[2013-11-22 02:10:27 -0500] mmzyk: well, if it happens again feel free to ask again and if I'm around I'll help you debug it as best I can.
[2013-11-22 02:11:10 -0500] rsmitty: thanks for the help. yeah i'll probably try to spin up another fedora node tomorrow to try again..
[2013-11-22 02:11:49 -0500] mmzyk: fveillette If you're still around, did you see the last comment in the ticket you posted about setting an attribute that might help? https://tickets.opscode.com/browse/COOK-3542
[2013-11-22 02:12:01 -0500] mmzyk: rsmitty Sounds good.
[2013-11-22 02:12:06 -0500] mmzyk: Mando You all set for now?
[2013-11-22 02:12:24 -0500] Mando: Yeah
[2013-11-22 02:12:27 -0500] Mando: thank you 
[2013-11-22 02:15:33 -0500] mmzyk: Going way back, CPS, it might be helpful if you put the blocks in question in a gist (your execute block and the one that is trying to notify it).
[2013-11-22 02:15:53 -0500] mmzyk: CPS Could it possibly be that the resource that does the notifying isn't getting run like you think it is?
[2013-11-22 02:17:15 -0500] mmzyk: It's probably unreasonable to expect someone to respond when you ask for clarification on their question 6 hours after they asked it. :)
[2013-11-22 02:22:49 -0500] fveillette: question
[2013-11-22 02:23:14 -0500] fveillette: how i should define a variable that need to exist in different ruby block inside provider code
[2013-11-22 02:23:19 -0500] fveillette: woth $ ????
[2013-11-22 02:23:23 -0500] fveillette: with $ ???
[2013-11-22 02:24:15 -0500] mpechner: wold a environment variable work? Assuming you can just start with it as a attribute
[2013-11-22 02:24:37 -0500] fveillette: what do you mean?
[2013-11-22 02:25:35 -0500] mpechner: Since eahruby block is a invocation, accessing variable between blocks need by global.  I've added variables to ENV
[2013-11-22 02:26:04 -0500] mpechner: The other solution is is the value is not calulated, make it a value from a attribute to databag.
[2013-11-22 02:27:10 -0500] fveillette: so global variable define with $ should be ok in my case?
[2013-11-22 02:27:47 -0500] mpechner: If I define $RR  it will exist between ruby blocks?
[2013-11-22 02:28:41 -0500] fveillette: that's my question
[2013-11-22 02:29:21 -0500] mpechner: ENV['varname']=value
[2013-11-22 02:29:26 -0500] fveillette: and also if i call the provider twice does the global variable are reset between the provider call?
[2013-11-22 02:29:40 -0500] mpechner: It is then a environment variable.  
[2013-11-22 02:29:55 -0500] mpechner: Same is export var=value in a bash script
[2013-11-22 02:31:05 -0500] mpechner: ruby_block "one" do
[2013-11-22 02:31:21 -0500] mpechner: ENV['tt]='one
[2013-11-22 02:31:24 -0500] mpechner: end
[2013-11-22 02:31:35 -0500] mpechner: ruby_block "two" do
[2013-11-22 02:31:49 -0500] mpechner: puts "#{ENV['tt']}"
[2013-11-22 02:31:50 -0500] mpechner: end
[2013-11-22 02:32:04 -0500] mpechner: block 2 will print "one"
[2013-11-22 02:32:10 -0500] mpechner: clear as mud?
[2013-11-22 02:32:41 -0500] mpechner: Is this a computed value or a constant?
[2013-11-22 02:33:34 -0500] mpechner: bash "block_three" do
[2013-11-22 02:33:47 -0500] mpechner: code "echo ${tt}"
[2013-11-22 02:33:48 -0500] mpechner: end
[2013-11-22 02:33:56 -0500] mpechner: will also print one
[2013-11-22 02:35:11 -0500] mpechner: feedback? look ok or is this noob smoking something bad?
[2013-11-22 02:38:04 -0500] mpechner: @fveillette did I answer the question?
[2013-11-22 02:40:17 -0500] fveillette: not really
[2013-11-22 02:40:23 -0500] mpechner: ok
[2013-11-22 02:40:37 -0500] fveillette: the problem i got actually is that i call my provider
[2013-11-22 02:40:45 -0500] mpechner: more clearification or am I worng?
[2013-11-22 02:40:49 -0500] fveillette: my provider code notifies the right riby block
[2013-11-22 02:41:05 -0500] fveillette: when i call the provider the second time
[2013-11-22 02:41:13 -0500] fveillette: it seem to notifies the reby block 
[2013-11-22 02:41:19 -0500] fveillette: the same ruby block
[2013-11-22 02:41:26 -0500] fveillette: because it did the first time
[2013-11-22 02:41:32 -0500] fveillette: but it should not
[2013-11-22 02:41:33 -0500] fveillette: why
[2013-11-22 02:41:59 -0500] mpechner: that one is past me
[2013-11-22 02:43:50 -0500] mpechner: there is no resrouce the referers to the first block the second time around?
[2013-11-22 05:39:38 -0500] Jayant: hey
[2013-11-22 05:39:41 -0500] Jayant: guys
[2013-11-22 05:40:41 -0500] Jayant: i am facing one problem while installing chef-server on My Ubuntu 12.4
[2013-11-22 05:40:58 -0500] Jayant: server got installed properly
[2013-11-22 05:44:27 -0500] Jayant: TDERR: initctl: Unknown job: opscode-runsvdir ---- End output of initctl status opscode-runsvdir ---- Ran initctl status opscode-runsvdir returned 1
[2013-11-22 05:44:41 -0500] Jayant: any idea what this is??
[2013-11-22 06:02:58 -0500] Jayant: Hey guys need some help with chef server
[2013-11-22 06:03:06 -0500] Jayant: STDERR: initctl: Unknown job: opscode-runsvdir
[2013-11-22 06:31:51 -0500] thetuxracer: Hello, room! thetuxracer here. I am a dev learning chef. I am running into issues and googling did not help, so reaching out here. In my cookbook, I am trying to search for nodes with a particular name. Its failing spectacularly.
[2013-11-22 06:31:57 -0500] thetuxracer: pastie:http://pastebin.com/8AuSWhvM
[2013-11-22 10:24:22 -0500] trekkerboy: Hi, chef newbie here. what does this mean  <%   some stuff  %> ? Have no luck on google
[2013-11-22 10:26:32 -0500] divad: that's how you include embedded ruby code inside a template
[2013-11-22 10:26:39 -0500] divad: see http://docs.opscode.com/essentials_cookbook_templates.html
[2013-11-22 10:27:06 -0500] trekkerboy: thanks alot
[2013-11-22 10:27:11 -0500] divad: np
[2013-11-22 10:28:52 -0500] trekkerboy: this is only for template? but I can write code directly in a recipe?
[2013-11-22 11:09:51 -0500] divad: yeah, recipes are written in ruby
[2013-11-22 11:17:17 -0500] trekkerboy: ok. I checked that link.  If I understand correctly  <%=   for expression/statement %> and <%  to mark beginning and end of block -%>
[2013-11-22 11:19:12 -0500] divad: yeah exactly
[2013-11-22 11:46:02 -0500] trekkerboy: thanks very much
[2013-11-22 11:47:08 -0500] divad: you're welcome
[2013-11-22 14:01:19 -0500] test___: does anybody know just a bit of documentation which is really working?
[2013-11-22 14:01:42 -0500] test___: every documentation site (I joined since two week) contains errors
[2013-11-22 14:02:33 -0500] divad: http://docs.opscode.com/
[2013-11-22 15:19:52 -0500] CPS: mmzyk: problem solved: http://stackoverflow.com/questions/20131754/chef-how-do-i-check-to-see-if-a-service-is-installed
[2013-11-22 15:21:00 -0500] mmzyk: CPS nice.
[2013-11-22 15:21:57 -0500] CPS: well, half solved
[2013-11-22 15:22:08 -0500] CPS: i put that code in an execute "sleep 1" block
[2013-11-22 15:22:26 -0500] CPS: not sure what resource would be appropriate so its kind of hacky
[2013-11-22 15:27:34 -0500] CPS: also mmzyk i'm going to need to be logging the results of my recipes. is there a good way to summarize what the recipe does and send an email with it?
[2013-11-22 15:32:21 -0500] mmzyk: CPS not really. We're building a reporting system for enterprise chef, but that is hooked into the webui, not email. However, all of the reporting hooks that exist on the client side are freely available, so you could potentially use those to gather your data and wrap it up into an email.
[2013-11-22 15:32:55 -0500] mmzyk: Of course, the question is where do you send the email from? I assume the server, so now you need to gather that data back on the server and email it out.
[2013-11-22 15:33:12 -0500] mmzyk: Is it doable? Yeah, but it's likely going to take some work on your part.
[2013-11-22 15:33:49 -0500] mmzyk: CPS You're probably going to want to look at the handlers: http://docs.opscode.com/essentials_handlers.html
[2013-11-22 15:34:08 -0500] CPS: i'm moving our VB script into chef. it does email reporting, but i don't know that email is the required report method
[2013-11-22 15:34:51 -0500] mmzyk: Gotcha. Either way, it's going to take some work I think to figure out the best way to handle this, as we don't have a built-in system to just handle this for you.
[2013-11-22 15:35:30 -0500] mmzyk: Now might be a good time for me to mention the existance of #chef-hacking
[2013-11-22 15:36:06 -0500] mmzyk: I don't hang out there on a day to day basis, so I'm not sure how active it is, but that and of course #chef are good places to ask questions as you work on extending out chef.
[2013-11-22 15:36:19 -0500] CPS: cool
[2013-11-22 15:36:52 -0500] mmzyk: CPS Here's the main entry point into the reporting code in the chef client: https://github.com/opscode/chef/blob/master/lib/chef/resource_reporter.rb
[2013-11-22 15:37:06 -0500] mmzyk: Make it easy for you to find, although you should also read up on the handlers as I mentioned earlier.
[2013-11-22 15:37:33 -0500] CPS: cool, thanks
[2013-11-22 15:38:07 -0500] mmzyk: np. Feel free to continue to ask me questions and I'll keep answering as best I can.
[2013-11-22 19:57:10 -0500] ras__: hi! Anyone familiar with how to provision a server to run ruby 1.9
[2013-11-22 20:29:49 -0500] rsmitty: Anyone know how to accept agreements that pop up during a deb package install? I'm trying to write a cookbook to install steam via apt-get on ubuntu
[2013-11-22 20:30:02 -0500] rsmitty: but it asks to agree to some terms
[2013-11-22 20:40:03 -0500] mmzyk: rsmitty that probably invovles passing some kind of flag to the package during install. I'm not sure if the package resource let's you pass flags or not. If not, you might need to use an execute resource and issue the apt-get command your self w/ the appropriate flags.
[2013-11-22 20:40:56 -0500] mmzyk: ras__ Ever get your question answered? Not sure what you're looking for in provisioning a server to run ruby 1.9. I assume it's a matter of installing ruby 1.9 and setting the path approriately.
[2013-11-22 20:42:11 -0500] rsmitty: i'm assuming that the package resource calls apt-get underneath somewhere doesn't it?
[2013-11-22 20:42:54 -0500] rsmitty: i can't seem to get around it though terminal using the -y flag for apt-get anyways. not sure how to respond to the graphical acceptance thingy automatically.
[2013-11-22 20:44:36 -0500] mmzyk: Yeah, it's calling apt-get under the covers as it will detect if you're on ubutu. That said, I'm not sure if it will let you pass things like a -y flag, that's why I suggested an execute resource. Of course, you'd need to figure otu the right flag to pass.
[2013-11-22 20:44:48 -0500] mmzyk: Ask in #chef - someone in there might have encountered and solved this.
[2013-11-22 20:46:04 -0500] rsmitty: will do. thanks
[2013-11-22 20:51:51 -0500] chip-: rsmitty: So in the documentation here: http://docs.opscode.com/chef/resources.html#apt-package
[2013-11-22 20:51:57 -0500] chip-: (Which is what gets called under the hood)
[2013-11-22 20:52:09 -0500] chip-: you can pass in options as one of the attributes
[2013-11-22 20:52:43 -0500] rsmitty: oh okay, so if i can figure out the flags, I just pass them in as attributes?
[2013-11-22 20:56:06 -0500] rsmitty: so here's more of a community question. I didn't notice that there was a steam cookbook already present out on the Opscode Community site. How do I go about pushing mine out there? I plan to rewrite it eventually to work with Win, Ubuntu, and Fedora
[2013-11-22 20:57:04 -0500] rsmitty: I don't know how much interest there is in cookbooks for desktop applications, but I don't mind pushing it out there
[2013-11-22 21:01:00 -0500] mmzyk: rsmitty You can push to the community site using knife: http://docs.opscode.com/chef/knife.html#share
[2013-11-22 21:01:11 -0500] mmzyk: You'll need a login on the site and all that jazz.
[2013-11-22 21:01:57 -0500] rsmitty: yeah, i've already got an account and all. did the chef fundamentals training this week so I'm just trying to practice writing some stuff for myself
[2013-11-22 21:02:18 -0500] mmzyk: sounds good.
[2013-11-22 22:31:38 -0500] cannonball: Is there a guide anywhere to writing resources and providers?  How they fit together is not really clear to me.  All of the howtos talk about attributes and recipes, but I need to write my own resource.  Looking at existing cookbooks helps some, but it's still somewhat opaque.
[2013-11-22 22:49:44 -0500] mmzyk: cannonball You probably want this: http://docs.opscode.com/chef/lwrps_custom.html Also see further links at the bottom of that page.
[2013-11-22 22:50:11 -0500] cannonball: Many thanks.
[2013-11-22 22:51:29 -0500] cannonball: I just had what I think is a revelation.  If I have a common/resources/rsync.rb, the provider is named common_rsync() , right?
[2013-11-22 22:51:48 -0500] bean: cannonball: yes
[2013-11-22 22:51:54 -0500] bean: if your cookbook is called common
[2013-11-22 22:53:35 -0500] cannonball: Wow, I think that one little bit of knowledge will go a long way to figuring out this.  I know my code works the way I expect it to by defining functions and running it in irb (the embedded version).  I've just been stuck on how to call a resource defined in cookbooks/common/resources/rsync.rb.  It makes so much more sense now.

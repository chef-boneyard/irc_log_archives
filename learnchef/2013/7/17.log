[2013-07-17 00:17:41 -0400] timewarrior: Hi Everyone, had a question - we have a repository on github and we want to deploy code. What is the best startegy: I heard that in pull is a best practise with chef. Are pointer of steps to do it. Thanks :)
[2013-07-17 01:40:23 -0400] timewarrior: Hi Everyone, how do I call deploy from command line. This page is not clear on that http://docs.opscode.com/resource_deploy.html
[2013-07-17 01:41:24 -0400] ssd7: timewarrior: What do you mean "call from the command line?  `deploy` is a chef resource just like template or service.  You put it in your recipe and then run chef-client 
[2013-07-17 01:42:22 -0400] timewarrior: so I create a recipe in my app, use deploy in that recipe, add it to run_list and then run chef-client
[2013-07-17 01:42:50 -0400] ssd7: timewarrior: Yup!
[2013-07-17 01:43:08 -0400] ssd7: s/app/cookbook/
[2013-07-17 01:43:46 -0400] timewarrior: ok, now I get it.. so basically if I have to do anything with the servers, then the way to do it is to call recipes.. 
[2013-07-17 01:44:43 -0400] timewarrior: so basically I have a deploy recipe added to run_list of my machines all the time and whenever I need to push, all I do is run chef-client on all machines
[2013-07-17 01:45:26 -0400] ssd7: timewarrior: It depends a bit on who you set up your recipe.  The deploy resource takes a "revision" attribute that tells it *what* to deploy
[2013-07-17 01:45:43 -0400] ssd7: if you don't chant that, you can run chef-client as often as you want and it won't re-deploy anything
[2013-07-17 01:46:28 -0400] ssd7: So usually to deploy people will do something like: (1) bump the revision in the recipe or data bag that feeds the recipe, (2) run chef-client everywhere.
[2013-07-17 01:46:48 -0400] timewarrior: and if I have to roll back, then I add a rollback recipe to run_list and then run chef-client everywhere?
[2013-07-17 01:47:59 -0400] ssd7: timewarrior: That depends on your app.  In many cases, rolling back is as simple as flipping back the "revision" attribute to the old value and running chef-client
[2013-07-17 01:49:14 -0400] timewarrior: but in this case I would need to keep track of the revision id, right. E.g. in capistrano I could just say rollback and it does that
[2013-07-17 01:50:37 -0400] timewarrior: btw, ssd7.. thanks for the tips, really appreciate your taking out time to help
[2013-07-17 01:51:20 -0400] ssd7: timewarrior: the deploy resource also has a rollback, that isn't how I typically do things so I don't have as much experience with it, but it is supposed to do something similar to what you do with capistrano
[2013-07-17 01:51:28 -0400] ssd7: timewarrior: np :)
[2013-07-17 01:52:30 -0400] timewarrior: and how do I run_client on all machines
[2013-07-17 01:53:22 -0400] timewarrior: one way is to do node list, grep, cut and then run a loop.. is there a better way
[2013-07-17 01:55:52 -0400] timewarrior: maybe I can use the role: for that
[2013-07-17 02:06:31 -0400] timewarrior: had one more question, to distinguish between production, staging, test etc do we use environments
[2013-07-17 02:18:48 -0400] timewarrior: thanks for your help..
[2013-07-17 02:35:45 -0400] ssd7: Sorry, flaky internet.  knife-ssh can help run chef-client on-demand up to a certain scale.
[2013-07-17 02:36:15 -0400] ssd7: Environments are indeed good for distinguishing environments like prod, staging, test
[2013-07-17 03:53:07 -0400] bayareacoder: Had a quick query.. want to know what you guys think about it. I have a cookbook, where the default recipe does things like installing gems, npm, creating upstart script. If I have to start the service, should I create another receipt for that. If yes, is that also a part of run_list. If that is the case then every time I call chef client it will start and stop the service. Help on this will be appreciated.. thanks
[2013-07-17 08:18:32 -0400] Breaking_Pitt: tu crees que esta mujer sabe de rollo psicologico?
[2013-07-17 08:18:44 -0400] Breaking_Pitt: sorry

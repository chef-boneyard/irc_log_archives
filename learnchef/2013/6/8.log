[2013-06-08 03:50:10 -0400] arosen2: I'm doing this tutorial https://learnchef.opscode.com/quickstart/converge/ and i'm wondering what i have to do to avoid using: $ vagrant init opscode-ubuntu-1204 https://opscode-vm.s3.amazonaws.com/vagrant/opscode_ubuntu-12.04-i386_chef-11.4.4.box --no-color 
[2013-06-08 03:50:20 -0400] arosen2: if i already have a ubuntu vm up how can i use that intead? 
[2013-06-08 03:51:10 -0400] arosen2: if i do knife bootstrap host ... it logs in fine but clpans about /etc/chef/validation.pem 
[2013-06-08 04:11:18 -0400] sascha_d: @arosen2 I haven't looked at the tutorial
[2013-06-08 04:11:32 -0400] sascha_d: but if you already have a vagrant box, you can use that instead
[2013-06-08 04:12:24 -0400] sascha_d: you should only need to download the .box file once however
[2013-06-08 04:12:25 -0400] arosen2: sascha_d:  why do i need a vagrant box? 
[2013-06-08 04:12:30 -0400] sascha_d: because you're using vagrant
[2013-06-08 04:12:42 -0400] arosen2: sascha_d: i'm wondering what code is in there? Can't i just start from a vm of ubuntu and use that? 
[2013-06-08 04:12:42 -0400] sascha_d: :)
[2013-06-08 04:12:51 -0400] arosen2: what's in the .box file? 
[2013-06-08 04:12:51 -0400] sascha_d: you can package a vm I think
[2013-06-08 04:13:07 -0400] arosen2: that's the part i'm wondering 
[2013-06-08 04:13:07 -0400] sascha_d: it's a compressed collection of files with metadata I think?
[2013-06-08 04:13:20 -0400] arosen2: so running this command: 
[2013-06-08 04:13:23 -0400] sascha_d: does your vm already have chef installed?
[2013-06-08 04:13:51 -0400] arosen2: I ran this in my vm: 
[2013-06-08 04:13:53 -0400] arosen2:  curl -L https://www.opscode.com/chef/install.sh | sudo bash
[2013-06-08 04:14:01 -0400] arosen2: so yes. 
[2013-06-08 04:14:19 -0400] sascha_d: vagrant package -h
[2013-06-08 04:14:34 -0400] arosen2: nope i don't have vagrant 
[2013-06-08 04:15:06 -0400] sascha_d: http://docs.vagrantup.com/v2/boxes/format.html
[2013-06-08 04:15:35 -0400] sascha_d: so you can try just tarring or gzipping up your vm and adding it to vagrant 
[2013-06-08 04:15:43 -0400] sascha_d: vagrant box add ...
[2013-06-08 04:16:19 -0400] arosen2: sascha_d:  say i was running on bare metal though? 
[2013-06-08 04:16:47 -0400] arosen2: sascha_d:  in the tutorial they have you upload some cookbooks to opscode via: 
[2013-06-08 04:16:50 -0400] arosen2: $ knife cookbook upload -a
[2013-06-08 04:17:09 -0400] arosen2: then in part 3 they make you download a vm and tell you to run: 
[2013-06-08 04:17:12 -0400] arosen2: $ knife bootstrap localhost \
[2013-06-08 04:17:13 -0400] arosen2:   --ssh-user vagrant \
[2013-06-08 04:17:13 -0400] arosen2:   --ssh-password vagrant \
[2013-06-08 04:17:13 -0400] arosen2:   --ssh-port 2222 \
[2013-06-08 04:17:13 -0400] arosen2:   --run-list "recipe[apt],recipe[aliases],recipe[apache2],recipe[networking_basic]" \
[2013-06-08 04:17:14 -0400] arosen2:   --sudo
[2013-06-08 04:17:35 -0400] sascha_d: if you can ssh into your vm
[2013-06-08 04:17:39 -0400] arosen2: some how it magically should install your recipes though i'm wondering how. 
[2013-06-08 04:17:40 -0400] sascha_d: then you can maybe skip to that part
[2013-06-08 04:17:46 -0400] sascha_d: knife is the magic piece
[2013-06-08 04:17:59 -0400] arosen2: yup so if i update this command to: 
[2013-06-08 04:18:01 -0400] sascha_d: it's basically the command line tool that interacts with the chef server API
[2013-06-08 04:20:22 -0400] arosen2: root@ubuntu:/home/ubuntu/Development/chef-repo/.chef# knife bootstrap 192.168.1.182   --ssh-user ubuntu    --ssh-password password   --ssh-port 22   --run-list "recipe[apt],recipe[aliases],recipe[apache2],recipe[networking_basic]" 
[2013-06-08 04:20:22 -0400] arosen2: Bootstrapping Chef on 192.168.1.182
[2013-06-08 04:20:23 -0400] arosen2: 192.168.1.182 bash: line 61: /etc/chef/client.rb: Permission denied
[2013-06-08 04:20:23 -0400] arosen2: 192.168.1.182 bash: line 70: /etc/chef/first-boot.json: Permission denied
[2013-06-08 04:20:23 -0400] arosen2: 192.168.1.182 [2013-06-07T21:20:16-07:00] WARN: *****************************************
[2013-06-08 04:20:23 -0400] arosen2: 192.168.1.182 [2013-06-07T21:20:16-07:00] WARN: Did not find config file: /etc/chef/client.rb, using command line options.
[2013-06-08 04:20:23 -0400] arosen2: 192.168.1.182 [2013-06-07T21:20:16-07:00] WARN: *****************************************
[2013-06-08 04:20:24 -0400] arosen2: 192.168.1.182 [2013-06-07T21:20:16-07:00] FATAL: I cannot find /etc/chef/first-boot.json
[2013-06-08 04:21:07 -0400] arosen2: it seems like i need to put these files on my vm i'm trying to deploy these recepies to
[2013-06-08 04:21:11 -0400] sascha_d: when trying to paste into IRC, try using a service like gist or pastie and then paste the url to the snippet. That makes it easier to read
[2013-06-08 04:21:23 -0400] sascha_d: so let me look at what you've pasted
[2013-06-08 04:21:25 -0400] arosen2: (since there isn't many people here I just pasted it)
[2013-06-08 04:22:13 -0400] sascha_d: well, I'm guessing there's something making the server unhappy with your sudo permissions
[2013-06-08 04:22:21 -0400] sascha_d: actually
[2013-06-08 04:22:30 -0400] sascha_d: I think vagrant is set up to translate the idea of running chef as root
[2013-06-08 04:22:41 -0400] sascha_d: so you might need to ssh as root for this
[2013-06-08 04:22:51 -0400] arosen2: ah it worked i needed to add --sudo 
[2013-06-08 04:23:02 -0400] arosen2: Hrm i'm wondering how it did this though? 
[2013-06-08 04:23:03 -0400] sascha_d: it's been a while since I've knife bootstrapped :)
[2013-06-08 04:23:13 -0400] sascha_d: it read your knife.rb
[2013-06-08 04:23:22 -0400] sascha_d: got the chef server info from that
[2013-06-08 04:23:25 -0400] arosen2: on the machine that i'm running bootstrap from? 
[2013-06-08 04:23:32 -0400] sascha_d: set up a client.rb and validator on the client
[2013-06-08 04:23:38 -0400] sascha_d: yeah, it should have
[2013-06-08 04:23:51 -0400] sascha_d: if you don't point to it in the bootstrap, it assumes defaults 
[2013-06-08 04:24:03 -0400] arosen2: the one part that seems kind of weird to me is it wanted me to create /etc/chef/validation.pem first 
[2013-06-08 04:24:49 -0400] sascha_d: create it locally?
[2013-06-08 04:25:33 -0400] sascha_d: http://docs.opscode.com/knife_bootstrap.html
[2013-06-08 04:25:41 -0400] sascha_d: that has some more info on the knife bootstrap
[2013-06-08 04:25:55 -0400] sascha_d: and some of the things you can put into your knife.rb file to ease node creation
[2013-06-08 04:28:53 -0400] arosen2: what's running on localhost:4000 ? 
[2013-06-08 04:30:16 -0400] sascha_d: chef?
[2013-06-08 04:30:31 -0400] sascha_d: that's a default
[2013-06-08 04:31:01 -0400] arosen2: i hit ^c while it was bootstrapping now it's messed up. booting another vm though just to let it finish on that one. 
[2013-06-08 04:36:55 -0400] arosen2: hrm it also seems to complain if there are duplicate hostnames 
[2013-06-08 04:37:09 -0400] sascha_d: yes
[2013-06-08 04:37:17 -0400] sascha_d: chef won't let you register a host twice
[2013-06-08 04:37:34 -0400] sascha_d: knife node delete <node> and knife client delete <client>
[2013-06-08 04:48:43 -0400] arosen2: sascha_d:  thanks for the help. I think i'm rolling now :) 
[2013-06-08 06:15:29 -0400] matthewalr: Hello
[2013-06-08 06:15:52 -0400] matthewalr: Trying to play with hosted chef but can't get past running "knife client list"
[2013-06-08 06:18:05 -0400] matthewalr: ERROR: Failed to authenticate to https://api.opscode.com/organizations/<myorg> as <myuser> with key /Users/matt/Development/chef-repo/.chef/<myuser>.pem Response:  Failed to authenticate as <my user>. Ensure that your node_name and client key are correct.
[2013-06-08 06:26:35 -0400] matthewalr: Seems like copying and pasting the private key text from when I created my account was the issue. Downloading the .pem file for my account fixed the issue.
[2013-06-08 08:14:07 -0400] cheflearner: Hi Guys !!! 
[2013-06-08 08:14:35 -0400] cheflearner: I just joined up :) 
[2013-06-08 08:14:51 -0400] cheflearner: Anyone up ? 
[2013-06-08 08:16:09 -0400] cheflearner: Just had a question regarding hosted chef 
[2013-06-08 08:16:27 -0400] cheflearner: You know they give us two keys 
[2013-06-08 08:17:09 -0400] cheflearner: I am not really sure which one to use when communicating with the chef server programmatically  

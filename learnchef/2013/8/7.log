[2013-08-07 07:06:15 -0400] pygmael: hi - so I've got a few ec2 nodes running through chef. easiest way to get recipe updates to all of them? just set cron? knife ssh?
[2013-08-07 12:09:13 -0400] ncraike: Hi everyone. I'm having some problems with the learnchef.opscode.com Quickstart Guide.
[2013-08-07 12:09:40 -0400] ncraike: Would anyone feel like giving me a bit of help?
[2013-08-07 12:18:03 -0400] ncraike: So... I'm at the "knife boostrap" step from https://learnchef.opscode.com/quickstart/converge/ . But I'm using a Linode newly imaged with Debian instead of a VirtualBox VM...
[2013-08-07 12:19:14 -0400] ncraike: and I'm using the nginx cookbook instead of apache2 (I did 'knife cookbook site install nginx' and replaced recipe['apache2'] with recipe['nginx'] in my runlist)
[2013-08-07 12:20:55 -0400] ncraike: The problem I'm having is that when I try "knife bootstrap <mylinode> --runlist='...' etc", I get:
[2013-08-07 12:20:56 -0400] ncraike: Recipe Compile Error in /var/chef/cache/cookbooks/aliases/recipes/default.rb
[2013-08-07 12:21:49 -0400] ncraike: then some kind of traceback, pointing at line 12 of aliases/recipes/default.rb.
[2013-08-07 12:22:29 -0400] ncraike: The odd thing is, I've now actually changed default.rb to remove the "sites" alias (and also to set EDITOR=vim, not nano)...
[2013-08-07 12:22:55 -0400] ncraike: then I've rerun knife upload. But the error still shows the old default.rb (even though the offending line isn't in my local default.rb)
[2013-08-07 12:23:34 -0400] ncraike: Anyway,... since everyone seems to be afk, I guess if someone sees this later and has advice, email me at ncraike at gmail dot com
[2013-08-07 13:04:05 -0400] Ben_: Hi
[2013-08-07 13:06:49 -0400] Ben_: For https://learnchef.opscode.com/common-use-cases/multi-node-ec2/ step 10 mentions dropping the config files for redis, but it does not mention where they are stored.
[2013-08-07 14:46:55 -0400] Ben_: For https://learnchef.opscode.com/common-use-cases/multi-node-ec2/ step 10 mentions dropping the config files for redis, but it does not mention where they are stored.
[2013-08-07 15:42:34 -0400] Austin_Admin: anyone seen this one --Mixlib::ShellOut::ShellCommandFailed: execute[Install chef-client service using winsw]
[2013-08-07 17:51:06 -0400] Benji_: Hi
[2013-08-07 17:52:51 -0400] Benji_: In this tutorial https://learnchef.opscode.com/common-use-cases/multi-node-ec2/ for step 10 it tells you to drop the redis config files but dosen't tell you where you should do that.
[2013-08-07 19:38:21 -0400] mfick: Is it possible to nest cookbooks?
[2013-08-07 19:38:39 -0400] mfick: i.e name a cookbook with a hierachy
[2013-08-07 19:38:52 -0400] mfick: such as a/b a/c a/d/e
[2013-08-07 19:39:09 -0400] mfick: in other words cookbooks/a/b
[2013-08-07 20:44:03 -0400] mannyt: mfick: generally a cookbook should be its own directory and not contain other cookbooks
[2013-08-07 20:44:35 -0400] mannyt: mfick: there isn't any advantage to putting one cookbook inside another
[2013-08-07 20:52:17 -0400] mfick: I don't want it inside another
[2013-08-07 20:52:34 -0400] mfick: I just don't want to have a top level consisting of hundreds of cookbooks
[2013-08-07 20:52:56 -0400] mfick: a flat structure seems insane to manage in a large organization
[2013-08-07 20:53:36 -0400] mfick: I basically just want to be able to group cookbooks together in subdirectories
[2013-08-07 20:54:48 -0400] mfick: But perhaps I have missonceptions about how many cookbooks I should eventually have
[2013-08-07 20:54:50 -0400] mfick: ?
[2013-08-07 20:55:18 -0400] mfick: How do people organize combinations of recipes and cookbooks?
[2013-08-07 20:55:25 -0400] mfick: Using roles instead?
[2013-08-07 20:55:44 -0400] mfick: Can roles be organized with subdirectories then?
[2013-08-07 22:14:03 -0400] ouiea: Hi there
[2013-08-07 22:14:18 -0400] ouiea: Can anyone answer me a simple question?
[2013-08-07 22:14:30 -0400] ouiea: Does the knife.rb get uploaded to the hosted chef?
[2013-08-07 22:24:38 -0400] mannyt: mfick: ah I see what you were trying to achieve now
[2013-08-07 22:25:58 -0400] mannyt: mfick: We do have a lot of cookbooks across the board but generally they are organized more with roles 
[2013-08-07 22:26:15 -0400] binamov: ouiea typically knife.rb gets generated by OHC; not being sent from workstation to server afaik
[2013-08-07 22:26:29 -0400] mannyt: you can define roles however you like, they are a logical construct on the chef server and you can store them as json files 
[2013-08-07 22:26:56 -0400] mannyt: I don't think there are any restrictions on the folder structure of roles 
[2013-08-07 22:27:06 -0400] ouiea: thanks binamov!
[2013-08-07 22:27:26 -0400] mannyt: I think setting up roles and just creating a document to track what gets applied where might be easier than trying to force things into a folder structure
[2013-08-07 22:27:39 -0400] mannyt: you might get better information on this in the #chef room
[2013-08-07 22:28:33 -0400] mannyt: mfick: also cookbooks usually apply to a service, like apache2 so every server that needs apache gets it
[2013-08-07 22:28:55 -0400] mannyt: any differences between servers are stored in their roles and applied to the cookbook on a chef run
[2013-08-07 22:34:20 -0400] mfick: mannyt: thanks.
[2013-08-07 22:35:35 -0400] mfick: Still seems strange that cookbooks are at least organized at bit
[2013-08-07 22:35:53 -0400] mfick: afterall, why should a MYSQL cookbook be at the top level?
[2013-08-07 22:36:04 -0400] mfick: Why not db/mysql?
[2013-08-07 22:36:27 -0400] mannyt: Well you could have a db cookbook
[2013-08-07 22:36:49 -0400] mannyt: and in that cookbook install mysql
[2013-08-07 22:37:04 -0400] mfick: but then can I drop in external mysql and postrgress cookboks into it?
[2013-08-07 22:37:15 -0400] mfick: I just wnat them to be visually separated
[2013-08-07 22:37:18 -0400] mannyt: they would be recipes within the db cookbook
[2013-08-07 22:37:33 -0400] mfick: but then I have to redesign the upstream recipes
[2013-08-07 22:37:36 -0400] mannyt: so when you open the recipes folder they would have their own
[2013-08-07 22:37:50 -0400] mannyt: I find that you often need to modify the upstream
[2013-08-07 22:38:17 -0400] mannyt: IMHO I let the chef server deal with the logical splits of the cookbooks
[2013-08-07 22:38:27 -0400] mfick: sure, but still I don't want to have to combine cookbooks that shouldn't be combined
[2013-08-07 22:38:40 -0400] mfick: mysql is mysql
[2013-08-07 22:38:43 -0400] mannyt: I use includes to call other cookbooks and tools like berkshelf to tell me dependencies
[2013-08-07 22:38:45 -0400] mfick: postgress is postgress
[2013-08-07 22:39:02 -0400] mfick: i just don't want to see them both when searching for webservers
[2013-08-07 22:39:19 -0400] mfick: An enterprise tool needs ot be hierachical
[2013-08-07 22:39:40 -0400] mfick: I am having a hard time imagining that this isn't a problem for most people
[2013-08-07 22:40:57 -0400] mannyt: It is hierarchical, it just doesn't have a directory structure that you may agree with
[2013-08-07 22:41:34 -0400] mfick: Hmm, I don't understand
[2013-08-07 22:41:43 -0400] mfick: where is the hiearchy?
[2013-08-07 22:43:40 -0400] mannyt: The chef server is aware of how each server or set of servers should behave.  It also knows the logical relationships between all the cookbook because each one lists its dependencies on other cookbooks.  So it knows which cookbook inherits another and makes sure that all that stuff ends up on the right server when chef-client is run
[2013-08-07 22:44:10 -0400] mannyt: So webserverA will grab apache2 cookbook, mysql cookbook, php cookbook etc and apply them to that server
[2013-08-07 22:44:29 -0400] mfick: I am just talking about from an admin standpoint, how can I segregate things logically
[2013-08-07 22:44:34 -0400] mannyt: There are tools like berkshelf that will present that information to you from inside your repository
[2013-08-07 22:44:48 -0400] mfick: If I have 5 teams
[2013-08-07 22:45:00 -0400] mfick: and each wants to customize the mysql cookbook
[2013-08-07 22:45:17 -0400] mfick: they should be able to do cookbooks/team1/mysql
[2013-08-07 22:45:28 -0400] mannyt: So the way that should be done is with attributes
[2013-08-07 22:45:51 -0400] mfick: No, with attribtues it requires that we coordinate and agree on how to design the recipe
[2013-08-07 22:45:59 -0400] mannyt: All of the settings should be available in 
[2013-08-07 22:46:03 -0400] mfick: By separate teams, I mean teams that don't agree
[2013-08-07 22:46:07 -0400] mannyt: lol
[2013-08-07 22:46:11 -0400] mfick: or care to talk to the other teams
[2013-08-07 22:46:15 -0400] mannyt: That is a bigger problem than organizing cookbooks
[2013-08-07 22:46:19 -0400] mfick: No, it is not
[2013-08-07 22:46:25 -0400] mannyt: 5 different cookbooks
[2013-08-07 22:46:27 -0400] mfick: because they don't work together
[2013-08-07 22:46:28 -0400] mannyt: different repos
[2013-08-07 22:46:36 -0400] mannyt: no sharing
[2013-08-07 22:46:44 -0400] mannyt: That's the best way int hat case
[2013-08-07 22:46:44 -0400] mfick: we just want to use the same server
[2013-08-07 22:47:04 -0400] mannyt: Different repos and each one gets a cookbook
[2013-08-07 22:47:20 -0400] mannyt: So team1mysql, team2mysql, team3mysql
[2013-08-07 22:47:33 -0400] mannyt: All those cookbooks don't have to be in the same repo
[2013-08-07 22:48:08 -0400] mfick: but that doesn't provide isolation
[2013-08-07 22:48:25 -0400] mannyt: Each one can be its own or you can say team1repo/team1mysql team1apache, team2repo/ team2mysql team2apache
[2013-08-07 22:48:25 -0400] mfick: prefixing sucks because it doesn't hide what you don't care about
[2013-08-07 22:48:54 -0400] mfick: It's like saying, who need direcotories, just name all your files really long
[2013-08-07 22:49:41 -0400] mannyt: I would check with the guys in #chef, I have to say my in depth knowledge of chef libraries is limited there may very well be a way to create a mysql cookbook that abstracts away enough that your teams can share
[2013-08-07 22:50:06 -0400] mfick: No, I really don't want to share
[2013-08-07 22:50:22 -0400] mfick: it just isn't the point
[2013-08-07 22:50:38 -0400] mfick: if we are limited to a flat structure it will no work for many reasons
[2013-08-07 22:50:47 -0400] mfick: that is why I can't belive this isn't an issue for others
[2013-08-07 22:51:10 -0400] mfick: And I know chef is used by large organizations, so how do they not crumble?
[2013-08-07 22:51:15 -0400] mannyt: I think there is more to your environment that I don't understand 
[2013-08-07 22:51:22 -0400] mfick: I don't have an env yet
[2013-08-07 22:51:26 -0400] mfick: I am just starting out
[2013-08-07 22:51:29 -0400] mannyt: I mean work organization
[2013-08-07 22:51:59 -0400] mfick: it's a big company teams that don't care about each other, fairly normal, not bad
[2013-08-07 22:52:03 -0400] mfick: it is normal to want isolation
[2013-08-07 22:52:07 -0400] mfick: it is safer
[2013-08-07 22:52:31 -0400] mfick: sharing is good when desired, but not when forced
[2013-08-07 22:52:44 -0400] mfick: because a tool can;t organize things with direcrotires
[2013-08-07 22:53:12 -0400] mannyt: Generally the directories don't matter
[2013-08-07 22:53:21 -0400] mannyt: The server doesn't even recognized the directories
[2013-08-07 22:53:31 -0400] mfick: How so?
[2013-08-07 22:53:49 -0400] mfick: When I go to the server and list cookbooks, I have to see them all
[2013-08-07 22:53:54 -0400] mfick: what if I have 1000?
[2013-08-07 22:53:56 -0400] mannyt: When you upload a cookbook all the server cares about is that one cookbook and everything inside of it
[2013-08-07 22:54:07 -0400] mannyt: the server is aware of 1000 cookbooks
[2013-08-07 22:54:38 -0400] mannyt: but it won't acknowledge the fact that the cookbook had a cookbook inside of it, just all the recipes libraries, files etc
[2013-08-07 22:54:45 -0400] mfick: btu what about users looking at server/cookbooks?
[2013-08-07 22:55:10 -0400] mannyt: They can look at a directory however they want
[2013-08-07 22:55:22 -0400] mannyt: The server is the one that distributes cookbooks to each node
[2013-08-07 22:55:37 -0400] mannyt: the repo is just how you and your coworkers see it
[2013-08-07 22:56:02 -0400] mfick: But how can the users limit the http://chef-server/cookbooks so it doesn't show 1000 recipes?
[2013-08-07 22:56:08 -0400] mannyt: I would read up on how cookbooks are pushed up to the server and test out a couple before you commit to an organization method
[2013-08-07 22:56:56 -0400] mannyt: are you using git for version control?
[2013-08-07 22:57:14 -0400] mfick: Sure, but you keep ignoring my question
[2013-08-07 22:57:22 -0400] mfick: (feel like it)
[2013-08-07 22:57:31 -0400] mannyt: don't mean to
[2013-08-07 22:57:47 -0400] mfick: I know, sorry just frustrated, but I appreciate your help
[2013-08-07 22:57:48 -0400] mannyt: There are many ways to organize cookbooks and different companies have different approaches
[2013-08-07 22:58:05 -0400] mannyt: Workflow will vary from company to company
[2013-08-07 22:58:18 -0400] mfick: Do you knwo what I mean by  http://chef-server/cookbooks?
[2013-08-07 22:58:21 -0400] mannyt: The suggested workflow for cookbooks is that each one is its own repository
[2013-08-07 22:58:23 -0400] mannyt: I have no clue
[2013-08-07 22:58:39 -0400] mfick: Go to that url on your chef-server
[2013-08-07 22:58:58 -0400] mfick: I should have said http://<chef-server>/cookbooks
[2013-08-07 22:59:09 -0400] mannyt: ok I see your point
[2013-08-07 22:59:20 -0400] mannyt: let me tell you this, I have never been to this page lol
[2013-08-07 22:59:38 -0400] mfick: Then how do you ever get a global view?
[2013-08-07 22:59:42 -0400] mfick: as an admin
[2013-08-07 22:59:44 -0400] mannyt: the knife tool
[2013-08-07 22:59:48 -0400] mannyt: it works from the command line
[2013-08-07 22:59:59 -0400] mannyt: and it is faster than the webUI
[2013-08-07 22:59:59 -0400] mfick: but won't it show me the same list?
[2013-08-07 23:00:07 -0400] mannyt: it will
[2013-08-07 23:00:19 -0400] mannyt: and you can use knife cookbook list|grep "cookbookname
[2013-08-07 23:00:20 -0400] mannyt: "
[2013-08-07 23:00:32 -0400] mannyt: if you wanted to search
[2013-08-07 23:00:41 -0400] mfick: that doesn't seem reasonable :(
[2013-08-07 23:00:43 -0400] mannyt: knife search also has options for searching cookbooks
[2013-08-07 23:00:49 -0400] mannyt: not a command line user?
[2013-08-07 23:01:07 -0400] mfick: no, but manual filtering should not be a default
[2013-08-07 23:01:28 -0400] mfick: (no, as in I prefer cmd-line)
[2013-08-07 23:01:34 -0400] mfick: but when I type ls
[2013-08-07 23:01:44 -0400] mfick: I don't expect the output to be ls -R
[2013-08-07 23:01:53 -0400] mfick: I expect a limited set of things to look at
[2013-08-07 23:02:20 -0400] mfick: not the world unless I do ls -R | grep /dira/dirb/dirc/dird
[2013-08-07 23:03:00 -0400] mannyt: in all honesty I don't think I've ever just looked at the list of cookbooks on the server
[2013-08-07 23:03:10 -0400] mannyt: most of the time I spend dealing with cookbooks I'm doing it through git
[2013-08-07 23:03:25 -0400] mannyt: I don't really care what the server has on it because I'm managing them all through git
[2013-08-07 23:03:32 -0400] mfick: but evn in git, how do you prevent the long list?
[2013-08-07 23:04:44 -0400] mannyt: Well one method is every cookbook is its own repository, each dev only pulls the ones they need
[2013-08-07 23:05:08 -0400] mannyt: or each team gets their own repository
[2013-08-07 23:05:15 -0400] mannyt: then you can just see which ones each team is using
[2013-08-07 23:05:19 -0400] mfick: but then how do they prevent name conflicts?
[2013-08-07 23:05:45 -0400] mfick: Even withint a team I would want direcotries
[2013-08-07 23:05:57 -0400] mfick: I guess I just don't like any list longer than 5 :(
[2013-08-07 23:06:07 -0400] mannyt: I mean you can actually do that inside the code
[2013-08-07 23:06:27 -0400] mfick: can u explain?
[2013-08-07 23:06:30 -0400] mannyt: but yes from that chef-server/cookbooks view you will always see a lot
[2013-08-07 23:06:42 -0400] mannyt: That's more of a programming issue and not an admin issue
[2013-08-07 23:07:09 -0400] mannyt: unfortunately I have to go but if you inquire in the #chef room there are smarter men than I that might provide better input
[2013-08-07 23:07:12 -0400] mannyt: or at least better tools
[2013-08-07 23:07:21 -0400] mannyt: Sorry i couldn't help more mfinck
[2013-08-07 23:07:25 -0400] mfick: OK, I really appreciate you putting up with me
[2013-08-07 23:07:29 -0400] mfick: :)
[2013-08-07 23:07:33 -0400] mannyt: its ok, good luck :-)
[2013-08-07 23:07:37 -0400] mfick: Thanks
[2013-08-07 23:07:52 -0400] mannyt: I understand this can be frustrating, took me a while as well

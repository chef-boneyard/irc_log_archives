[2013-10-10 04:25:04 -0400] brucelee1: hey
[2013-10-10 04:25:06 -0400] brucelee1: anyone here? :p
[2013-10-10 19:11:28 -0400] CPS: what resource type would you use to simply execute other resources in a particular order?
[2013-10-10 19:20:32 -0400] mmzyk: CPS I don't believe that exists. recipes are run top to bottom, so write them in the order you want them to run.
[2013-10-10 19:21:04 -0400] CPS: so write them in order and have the action be :run?
[2013-10-10 19:21:59 -0400] mmzyk: Or whatever the action is for the resource you want - each resource type as a default action that will be executed if you specify nothing.
[2013-10-10 19:22:10 -0400] mmzyk: so for package the default is install for instance.
[2013-10-10 19:22:27 -0400] mmzyk: So you can say package "foo" do action :install end
[2013-10-10 19:22:33 -0400] mmzyk: or you can say package "foo"
[2013-10-10 19:22:47 -0400] mmzyk: those are equivalent, b/c action :install is the default action for package.
[2013-10-10 19:23:00 -0400] mmzyk: so you don't have to specify the default action if you don't want to.
[2013-10-10 19:27:19 -0400] mmzyk: Does that answer your question CPS?
[2013-10-10 19:27:26 -0400] CPS: yes
[2013-10-10 19:27:31 -0400] CPS: it worked :D
[2013-10-10 19:27:33 -0400] CPS: thanks
[2013-10-10 19:28:51 -0400] CPS: here's a question: what would i use to check to see if an environment variable exists and if not write it?
[2013-10-10 19:28:59 -0400] mmzyk: np. Do note that if you use the notify option on resources it is possible to get resources to run out of the order written, but by default they run in the order they are written, top to bottom.
[2013-10-10 19:29:23 -0400] CPS: that's initially what i was trying to do
[2013-10-10 19:30:37 -0400] mmzyk: Docs on notify: http://docs.opscode.com/chef/resources.html#notifications
[2013-10-10 19:31:10 -0400] CPS: i was getting tripped up on the resource type to use
[2013-10-10 19:31:12 -0400] mmzyk: But yeah, generally just write it in the order you want it to run. This is one major way chef is different than puppet, if you have puppet experience.
[2013-10-10 19:31:23 -0400] CPS: nope
[2013-10-10 19:32:27 -0400] mmzyk: well, I guessed maybe you did from your question. :)
[2013-10-10 19:32:31 -0400] mmzyk: so I was wrong.
[2013-10-10 19:32:48 -0400] mmzyk: As far as checking env vars  I'm not sure.
[2013-10-10 19:33:07 -0400] CPS: really i just need help with the conditionals
[2013-10-10 19:33:26 -0400] CPS: ENV['TEMP'] will return the temp directory, for example
[2013-10-10 19:34:32 -0400] mmzyk: help with conditionals?
[2013-10-10 19:35:08 -0400] CPS: in the recipe, what kind of resource would i need to define to check an env var and set it, based on whether it exists?
[2013-10-10 19:35:43 -0400] mmzyk: well, you could use a ruby_block for that, since chef is built on ruby and ruby can access the env vars.
[2013-10-10 19:36:04 -0400] mmzyk: but you want to pop into #chef and ask there, as someone could likely tell you the best way to do what you want.
[2013-10-10 19:36:23 -0400] mmzyk: Feel free to come back and ask questions here, but sometimes asking the larger group of users is useful. :)
[2013-10-10 19:36:44 -0400] CPS: i'm in there actually
[2013-10-10 19:36:51 -0400] CPS: i did ask
[2013-10-10 19:37:39 -0400] mmzyk: ah. I wasn't paying attention to that room. Did it not get answered?
[2013-10-10 19:37:51 -0400] mmzyk: Sometimes questions get overlooked, depending on the whims of the room.
[2013-10-10 19:38:01 -0400] CPS: yeah
[2013-10-10 19:38:16 -0400] mmzyk: Did you ask about the env var question>
[2013-10-10 19:38:29 -0400] mmzyk: I see the one about execution order.
[2013-10-10 19:38:36 -0400] CPS: oh, no
[2013-10-10 19:38:57 -0400] CPS: that's the next thing i need to tackle now that the execution order thing has been resolved
[2013-10-10 19:39:10 -0400] CPS: now that i know ruby_block exists it should be easy
[2013-10-10 19:40:27 -0400] mmzyk: yeah, you can always use ruby_block if you just need to write ruby, but you need to be careful that what you write is still idempotent.
[2013-10-10 19:40:49 -0400] mmzyk: I still recommend asking in #chef and seeing if someone has a better way than ruby block.
[2013-10-10 19:41:30 -0400] CPS: idempotent?
[2013-10-10 19:42:36 -0400] mmzyk: http://stackoverflow.com/questions/1077412/what-is-an-idempotent-operation
[2013-10-10 19:42:48 -0400] mmzyk: Basically you want your chef runs to be side effect free.
[2013-10-10 19:43:07 -0400] mmzyk: In practice, this means if you run a chef run and it fails, it should always fail in the same place if you run it again until you change something.
[2013-10-10 19:43:20 -0400] mmzyk: If it succeeds, it should always succeed until you change something.
[2013-10-10 19:43:58 -0400] mmzyk: For the most part, chef resources work hard to guarantee this, but when you drop into ruby chef can only guarantee so much. :)
[2013-10-10 19:45:52 -0400] mmzyk: That make sense? the concept of idempotence is actually very important to tools like chef and the others in the space.
[2013-10-10 19:46:00 -0400] CPS: it does
[2013-10-10 19:46:15 -0400] CPS: i'm familiar with the concept just not the term
[2013-10-10 19:46:30 -0400] mmzyk: now you know. 
[2013-10-10 19:53:59 -0400] mmzyk: CPS, I asked internally to ensure you got an answer on the env question
[2013-10-10 19:54:12 -0400] CPS: oh, thanks
[2013-10-10 19:54:30 -0400] mmzyk: So some resources, like the bash on, have an environments field where you can set them: http://docs.opscode.com/resource_bash.html#attributes
[2013-10-10 19:55:04 -0400] mmzyk: Not sure what you're using the env var for, but that might be what you want.
[2013-10-10 19:55:06 -0400] CPS: this is on windows
[2013-10-10 19:55:11 -0400] mmzyk: do'h.
[2013-10-10 19:55:15 -0400] CPS: chef needs an EDITOR env var
[2013-10-10 19:55:35 -0400] mmzyk: This this is what you want: http://docs.opscode.com/chef/resources.html#env
[2013-10-10 19:55:35 -0400] CPS: so i'm going to install notepad++ and set that as the editor
[2013-10-10 19:55:59 -0400] CPS: ah cool
[2013-10-10 19:56:56 -0400] mmzyk: So this page is still a work in progress, but it collects all the windows specific bits about chef: http://docs.opscode.com/windows.html

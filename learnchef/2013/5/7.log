[2013-05-07 13:58:07 -0400] lostnewbie: Hi, I had a question about chef_gem, I am using it to load the mysql gem, but it seems to load it before running the "apt" cookbook.  Should I be using something else?
[2013-05-07 14:42:15 -0400] behemphi: @lostnewbie why are you using chef_gem?  That will install the mysql gem into your chef environment if you are using omnibus.  I am assuming the goal with MySQL is to use it for you app, so I think it should just be the gem_package resource
[2013-05-07 14:43:04 -0400] behemphi: Can you provide a bit more detail on what you are trying to do?
[2013-05-07 15:15:40 -0400] lostnewbie: @behemphi you are correct, I am just trying to load the mysql gem for my app.  I tried "require 'mysql'" and that seemed to work before, but it isn't now.  so I was going with the "brute force" way and that appears to be the wrong way.
[2013-05-07 15:20:47 -0400] behemphi: I _think_ what you want to do is change chef_gem to gem_package in your recipe
[2013-05-07 15:21:02 -0400] behemphi: chef_gem is a resource to install gems you might want to use with chef
[2013-05-07 15:21:12 -0400] behemphi: e.g. mini-test-chef-handler or chefspec
[2013-05-07 15:25:02 -0400] lostnewbie: @behemphi, thank you very much!  I will switch it out.  Thanks for the help and info!
[2013-05-07 19:01:03 -0400] artcurmudgeon: having an issue using knife to copy and existing data bag, cant find any references on how to copy the node_databags
[2013-05-07 19:06:30 -0400] behemphi: Hello
[2013-05-07 19:06:39 -0400] behemphi: did you create your data bags from files?
[2013-05-07 19:07:22 -0400] artcurmudgeon: no I need to copy an existing data bag but thats where I get confused
[2013-05-07 19:08:20 -0400] behemphi: First I will suggest that you keep your databags as files in source control (in your chef repo)
[2013-05-07 19:08:27 -0400] behemphi: source control is a good thing
[2013-05-07 19:08:30 -0400] behemphi: :-)
[2013-05-07 19:08:51 -0400] artcurmudgeon: honestly, I am walking into this blind, the guy who started this project quit
[2013-05-07 19:09:17 -0400] behemphi: you can use `knife data bag from file [bag] [file]` to upload the files to the chef server
[2013-05-07 19:09:34 -0400] behemphi: then it is a simple matter of copying the file and changing the data
[2013-05-07 19:11:49 -0400] behemphi: baring that you could do something like this:
[2013-05-07 19:12:00 -0400] artcurmudgeon: it sounds simple. but I dont know the switches to use with it. does bag refer to databag name? 
[2013-05-07 19:12:08 -0400] behemphi: knife data bag edit [bag] [item]
[2013-05-07 19:12:21 -0400] behemphi: this will open your $EDITOR and present you the JSON
[2013-05-07 19:12:32 -0400] behemphi: you can then copy/paste to get the copy
[2013-05-07 19:12:41 -0400] behemphi: one important thing:
[2013-05-07 19:12:54 -0400] behemphi: the ID is the name of the data bag fro all intents and purposes
[2013-05-07 19:13:19 -0400] behemphi: Not to be obtuse, but there is a nice doc here:
[2013-05-07 19:13:19 -0400] behemphi: http://docs.opscode.com/essentials_data_bags.html
[2013-05-07 19:13:33 -0400] behemphi: The opscode folks have been improving the heck out of the docs for some time
[2013-05-07 19:13:40 -0400] behemphi: alot of examples
[2013-05-07 19:14:57 -0400] artcurmudgeon: I have seen that one, it doesnt make sense to me. 
[2013-05-07 19:15:10 -0400] artcurmudgeon: I can use sudo knife data bag list
[2013-05-07 19:15:30 -0400] artcurmudgeon: I can see the 4 databags there
[2013-05-07 19:16:01 -0400] behemphi: You can see the items in a bag with:
[2013-05-07 19:16:07 -0400] behemphi: knife data bag show "bag name"
[2013-05-07 19:16:20 -0400] artcurmudgeon: I can list node_databags(which contains all the sites this is connecting to)
[2013-05-07 19:17:30 -0400] artcurmudgeon: I am trying this from both the chef server gui as well as command line with knife, but I cant get any further than creating the data bag in the gui, I cant edit it or save it
[2013-05-07 19:18:05 -0400] behemphi: so here is a quick output from me:
[2013-05-07 19:18:14 -0400] behemphi: boyd@openkitchen:~ 19:13:59 > knife data bag show ssh_users
[2013-05-07 19:18:14 -0400] behemphi:   boyd
[2013-05-07 19:18:14 -0400] behemphi:   brent
[2013-05-07 19:18:25 -0400] behemphi: now I can type:
[2013-05-07 19:18:41 -0400] behemphi: knife data bag edit ssh_users boyd
[2013-05-07 19:19:01 -0400] behemphi: that will open up the definitions for my sssh user (i.e. what is in the bag)
[2013-05-07 19:19:04 -0400] behemphi: and i can edit it
[2013-05-07 19:19:09 -0400] behemphi: likely it is with VI
[2013-05-07 19:20:18 -0400] artcurmudgeon: lol need to set the editor variable
[2013-05-07 19:24:44 -0400] behemphi: good deal, did that get you what you needed?
[2013-05-07 19:27:02 -0400] artcurmudgeon: no still having issues....got to love ubuntu
[2013-05-07 19:54:00 -0400] artcurmudgeon: how would you copy from one data bag to another?
[2013-05-07 20:00:40 -0400] behemphi: If you are going to keep them in your chef repo as files I would copy the file then chnge the ID then upload
[2013-05-07 20:00:47 -0400] behemphi: assuming you want no other changes
[2013-05-07 20:01:04 -0400] behemphi: if that is not the case, then I would do a knife data bag edit
[2013-05-07 20:01:16 -0400] behemphi: and copy paste out of their
[2013-05-07 20:01:19 -0400] behemphi: change the ID
[2013-05-07 20:01:28 -0400] behemphi: and upload the new data bag
[2013-05-07 20:01:32 -0400] behemphi: be _sure_ the id is changed
[2013-05-07 20:01:38 -0400] behemphi: that is what the key is for the search
[2013-05-07 20:02:07 -0400] behemphi: so regardless of anything else if the id matches in two different instnaces, it is "last one wins" when you upload to the chef server
[2013-05-07 20:06:24 -0400] artcurmudgeon: my problem is that it reside inside data_bag/node_databags/ sitename
[2013-05-07 20:06:38 -0400] artcurmudgeon: I cant seem to get it work
[2013-05-07 20:06:57 -0400] behemphi: hmm
[2013-05-07 20:07:09 -0400] behemphi: what is the name of the bag?
[2013-05-07 20:07:16 -0400] artcurmudgeon: I am using sudo knife data bag from file ./data_bag/node_databag/site name
[2013-05-07 20:07:36 -0400] artcurmudgeon: actually it is client-location
[2013-05-07 20:07:42 -0400] artcurmudgeon: with a hyphen
[2013-05-07 20:07:54 -0400] behemphi: try this
[2013-05-07 20:08:09 -0400] behemphi: knife data bag show client-location
[2013-05-07 20:08:54 -0400] artcurmudgeon: cannot load data bag client-location
[2013-05-07 20:09:06 -0400] behemphi: that would indicate a bag with that name does not exist
[2013-05-07 20:09:22 -0400] behemphi: do this first
[2013-05-07 20:09:27 -0400] behemphi: knife data bag list
[2013-05-07 20:09:30 -0400] artcurmudgeon: but it shows up in the node_databags
[2013-05-07 20:09:58 -0400] behemphi: I am pretty sure node_databags is a construct from your predecessor
[2013-05-07 20:10:02 -0400] behemphi: it is not a chef thing
[2013-05-07 20:10:10 -0400] artcurmudgeon: it is
[2013-05-07 20:10:22 -0400] behemphi: what does knife data bag list show/
[2013-05-07 20:10:23 -0400] behemphi: ?
[2013-05-07 20:10:35 -0400] artcurmudgeon: api_hash
[2013-05-07 20:10:38 -0400] artcurmudgeon: from
[2013-05-07 20:10:43 -0400] artcurmudgeon: node_databags
[2013-05-07 20:10:44 -0400] artcurmudgeon: users
[2013-05-07 20:11:00 -0400] artcurmudgeon: in the node_databads is the client-location 
[2013-05-07 20:11:22 -0400] artcurmudgeon: I can knife data bags show node_databags and it shows a correct list
[2013-05-07 20:12:00 -0400] behemphi: so you would say:
[2013-05-07 20:12:17 -0400] behemphi: knife data bag edit node_databags client-location
[2013-05-07 20:12:24 -0400] behemphi: node_databags is the "bag"
[2013-05-07 20:12:31 -0400] behemphi: client-location is the "item"
[2013-05-07 20:12:55 -0400] artcurmudgeon: that does but how would I u
[2013-05-07 20:12:58 -0400] artcurmudgeon: crap
[2013-05-07 20:13:20 -0400] artcurmudgeon: how would I copy client-location to client-location2
[2013-05-07 20:13:34 -0400] behemphi: OK so you have the json open right?
[2013-05-07 20:14:37 -0400] artcurmudgeon: oh crap I just realised what you are going to say
[2013-05-07 20:15:00 -0400] behemphi: lol, I hope you are good with that :-)
[2013-05-07 20:16:12 -0400] artcurmudgeon: hmmm....looks like my predessor set the editor for nano
[2013-05-07 20:17:23 -0400] artcurmudgeon: I love cleaning up someone elses messes
[2013-05-07 20:17:36 -0400] behemphi: could have been emacs :-)
[2013-05-07 20:17:43 -0400] artcurmudgeon: true
[2013-05-07 20:18:03 -0400] behemphi: you can either write out the file and make any changes
[2013-05-07 20:18:18 -0400] behemphi: I think that is ctl-o
[2013-05-07 20:18:42 -0400] behemphi: or you can do the cut and paste thing
[2013-05-07 20:18:57 -0400] artcurmudgeon: I think I am going to have to cut and paste
[2013-05-07 20:35:47 -0400] artcurmudgeon: hmmm got ERROR: JSON::ParserError: 751: unexpected token at '{ and then listed the entire json file
[2013-05-07 20:36:11 -0400] behemphi: that means there was a syntax error in your json
[2013-05-07 20:36:20 -0400] behemphi: it will not save bad json
[2013-05-07 20:37:53 -0400] artcurmudgeon: lovely
[2013-05-07 20:46:01 -0400] xvrbx: hi all
[2013-05-07 20:46:50 -0400] xvrbx: dunno if this is the right channel... I have issues deciding what to use for integration testing in Chef... I'm quite ignorant on this
[2013-05-07 20:48:57 -0400] behemphi: @xvrbx TestKichen seems to be the tool of choice for integration testing
[2013-05-07 20:49:03 -0400] behemphi: but I have no personal experience with it
[2013-05-07 20:50:41 -0400] xvrbx: thanks behemphi 
[2013-05-07 21:06:13 -0400] artcurmudgeon: btw, thank you for all your help behemhi
[2013-05-07 21:07:03 -0400] behemphi: you all are welcome
[2013-05-07 21:09:50 -0400] artcurmudgeon: how does the rest of this work for a from file? knife databag from file location/json file name what goes after?
[2013-05-07 21:10:58 -0400] thehar: knife data bag from file databagname location/json
[2013-05-07 21:11:28 -0400] artcurmudgeon: got that, but how do you name the new file you are creating?
[2013-05-07 21:13:07 -0400] thehar: the filename of the json file isn't specific to anything.. 
[2013-05-07 21:14:21 -0400] artcurmudgeon: maybe I am going at this wrong. I am wanting to copy on json to another and maybe thats why I cant get my head around this
[2013-05-07 21:14:39 -0400] artcurmudgeon: opps one json
[2013-05-07 21:18:47 -0400] artcurmudgeon: also having that issue with writing the file as well...not sure at this point

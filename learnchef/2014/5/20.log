[2014-05-20 15:13:28 -0400] sggokak: Hi folks, i have a chef-solo question
[2014-05-20 15:17:43 -0400] sggokak: i see this exception 
[2014-05-20 15:17:44 -0400] sggokak: The encrypted data bag item has format version `', but the config setting 'data_bag_decrypt_minimum_version' requires version `0'
[2014-05-20 16:10:38 -0400] alexbst: ohai learnchefs
[2014-05-20 17:03:35 -0400] ErebusBat: Ohai to you alexbst 
[2014-05-20 17:27:37 -0400] StFS: Hi. I'm having some problems getting a chef server up and running. I am able to download and install it just fine and I run "chef-server-ctl reconfigure" and it seems to go just fine. But then I try to run "chef-server-ctl test" and I get an error. I also tried logging into the webui and I get the login page but when I enter the username/password and press
[2014-05-20 17:27:38 -0400] StFS: the login button everything hangs for a while and then an error is displayed
[2014-05-20 17:30:36 -0400] StFS: oh... nevermind
[2014-05-20 17:30:47 -0400] StFS: turns out the hostname wasn't resolving to itself
[2014-05-20 17:30:48 -0400] gestrella: I want to create a variable with the cookbook name   in order to use like this  node[app_name][:java]
[2014-05-20 17:31:01 -0400] gestrella: how can get cookbook name?
[2014-05-20 19:00:23 -0400] aandy: hi, sorry if this is obvious (very new to chef), but after reading opscode.com's article on attributes i'm still not clear where to do overrides. i have some default attributes, which i'd like to override on my instances. i imagined something like using ENV or "including" a host specific .rb file with override_attributes(), but i'm not entirely sure how. anyone mind pointing me in the right direction?
[2014-05-20 19:06:44 -0400] ErebusBat: aandy: perhaps a role?
[2014-05-20 19:06:55 -0400] aandy: is chef-solo --json what i'm looking for? and then having the attributes in a json file?
[2014-05-20 19:07:01 -0400] urbanmonk: how do I override an attribute from a cookbook to a node?  "knife node edit nodename" brings up a json file that I can edit but I'm not sure what the structure should be if the attribute is for example node["openvpn"]["local"]
[2014-05-20 19:07:25 -0400] aandy: ErebusBat: that sounds right, but in that case i'd bundle all nodes "custom" attributes with the cookbook, right?
[2014-05-20 19:07:46 -0400] aandy: hehe, i guess urbanmonk asks the same thing
[2014-05-20 19:08:10 -0400] ErebusBat: urbanmonk can you post what JSON you get to a gist?
[2014-05-20 19:08:20 -0400] urbanmonk: i.e. it would be great if I could do something like "knife node add attribute node["openvpn"]["local"]=foo
[2014-05-20 19:08:44 -0400] urbanmonk: err .. "knife node add attribute nodename["openvpn"]["local"]=foo
[2014-05-20 19:09:01 -0400] aandy: ErebusBat: how about /var/chef-solo/environments - is that a way to go?
[2014-05-20 19:09:08 -0400] ErebusBat: urbanmonk I don't disagree, but I am not a knife expert.  I just edit the JSON
[2014-05-20 19:09:25 -0400] ErebusBat: aandy: You are using chef-solo?  That will make managing multiple nodes much harder
[2014-05-20 19:10:01 -0400] ErebusBat: aandy and it depends on your infrastructure which the the 'right' way to do, although either roles or environemtns would work.  What exactly are you wanting to override?
[2014-05-20 19:10:10 -0400] urbanmonk: https://gist.github.com/pointclickcare/ddda90b2dfc8ed41b137
[2014-05-20 19:10:26 -0400] aandy: ErebusBat: right now i'm just trying to learn the basics of chef. i only have five servers, so having the cookbooks on all in a git repo wouldn't be an issue so far
[2014-05-20 19:10:59 -0400] aandy: ErebusBat: essentially, custom local paths. one server has /chroot/data, another has /var/x/data etc
[2014-05-20 19:11:24 -0400] aandy: so i'd like to set a node[:data_dir], which could then be overridden with /chroot/data on one
[2014-05-20 19:11:46 -0400] ErebusBat: aandy I would put that in the nodes JSON file
[2014-05-20 19:12:15 -0400] ErebusBat: If you name it after the hostname then you can do something like:  chef-solo -c mysolo.rb -j nodes/$(hostname).json
[2014-05-20 19:12:27 -0400] aandy: ErebusBat: okay, great. and then when running chef(-solo) supply the json option
[2014-05-20 19:12:37 -0400] aandy: ErebusBat: perfect, thank you very much :)
[2014-05-20 19:12:41 -0400] ErebusBat: Yup
[2014-05-20 19:15:05 -0400] ErebusBat: urbanmonkurb see this https://gist.github.com/ErebusBat/4564e593e365c0a72f9a   also http://www.jsoneditoronline.org/ is helpful
[2014-05-20 19:24:50 -0400] urbanmonk: ErebusBat: thanks!  I have no problem editing json .. i was just wondering about the proper structure for adding attributes
[2014-05-20 19:25:10 -0400] urbanmonk: ErebusBat: too bad knife can't do this for you ... seems like it would be easy to do something like that
[2014-05-20 19:27:37 -0400] ErebusBat: urbanmonk there may be a plugin; however depending on the data structure it could get pretty harry pretty quick.  Personally I might write a knife plugin to take Ruby => JSON as I live in Ruby and it's syntax is more forgivving
[2014-05-20 19:34:45 -0400] aandy: ErebusBat: thanks again, it worked perfectly :)
[2014-05-20 19:36:02 -0400] ErebusBat: aandy: no problem, I am glad it worked for you
[2014-05-20 19:38:59 -0400] aandy: now i just need to make my config erb compliant and i'm ready for some larger tests :)
[2014-05-20 20:03:30 -0400] aandy: ah, so nice. this will make my life much easier ;) we started out with two servers and very simple service setups. then came another server, and then two more, and now i could really use Chef, even just for config templating. makes it much easier when rolling out changes :)
[2014-05-20 20:06:46 -0400] ErebusBat: aandy I am glad it is working out for you.  That always seems to be the way "We only have ONE server/file/db/whatver so I don't need to do that now" and it works fine.... Until it doesn't
[2014-05-20 20:08:16 -0400] aandy: hehe, right. i've used simple tools like fabric, and even Docker to some extend, but in this case it was very "yeah, it's the same, but a lot of paths, variables and names are different everywhere"
[2014-05-20 20:08:58 -0400] aandy: so it's really nice that i'm able to make a small json file for each where everything is in *that* file, not across 7 different conf files etc.
[2014-05-20 20:09:35 -0400] aandy: with a lot of inherited spam, which could be derived from e.g. node[:root] and not having to replace a chrooted dir everywhere
[2014-05-20 20:09:38 -0400] aandy: :)
[2014-05-20 20:09:48 -0400] ErebusBat: :)
[2014-05-20 20:10:32 -0400] ErebusBat: I am in the process of writing wrapper cookbooks for our stuff, so I can just include whf-nginx and it is all setup how we need it
[2014-05-20 20:10:45 -0400] aandy: ironically i do this now that i have to leave the company. to make it easy to manage for the guy taking over. hopefully instant karma 
[2014-05-20 20:10:46 -0400] ErebusBat: Then in our app cookbooks we have very small reciipes
[2014-05-20 20:10:53 -0400] aandy: nice :)
[2014-05-20 21:46:10 -0400] aandy: i know it's typical/no biggie, but damn it makes me giggle when you can derive non-trivial configs from a single small json file ;)
